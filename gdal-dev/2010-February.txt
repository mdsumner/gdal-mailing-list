From alexander.bruy at gmail.com  Mon Feb  1 01:46:30 2010
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Mon Feb  1 01:52:45 2010
Subject: [gdal-dev] Raster algebra with Gdal and Python
In-Reply-To: <BAC54A9C-91AC-410F-8997-019A4969C5D2@mac.com>
References: <20100131204022.22b9c933.alexander.bruy@gmail.com>
	<BAC54A9C-91AC-410F-8997-019A4969C5D2@mac.com>
Message-ID: <66a45d6d1001312246l6cb6d83bxc1eb9a1b3dba5748@mail.gmail.com>

2010/2/1 Greg Coats <gregcoats@mac.com>:
> Yes, GDAL can successfully process images with 15,000 columns by 15,000 rows. I have used GDAL on a computer with only 3 GB RAM to process an image with Image Width: 260,000 Image Length: 195,000. What version of GAL are you using? Are you using GDAL 1.7.0? What operating system are you using? How much RAM is available to GDAL? Greg

I'm using GDAL 1.6.3 under Linux Slackware 12.2, and I plan to upgrade
to 1.7.0 today.
My computer has 2 Gb RAM and 2 Gb swap, but now I can't test this
error by myself because I have no large files. This error was reported
by users, they test code on several
Windows XP boxes with 4 Gb RAM.
I get large rasters today and try to reproduce this error.


-- 
Alexander Bruy
mailto: alexander.bruy@gmail.com
From SriRam.PrasadBhasker at rmsi.com  Mon Feb  1 01:58:56 2010
From: SriRam.PrasadBhasker at rmsi.com (SriRam.PrasadBhasker@rmsi.com)
Date: Mon Feb  1 01:56:03 2010
Subject: [gdal-dev] Raster algebra with Gdal and Python
In-Reply-To: <66a45d6d1001312246l6cb6d83bxc1eb9a1b3dba5748@mail.gmail.com>
Message-ID: <OF0DBFD689.38552450-ON652576BD.00262538-652576BD.00261500@rmsi.com>

Hi.

Suggest to Immediately Upgrade to 1.7.0

also check if the users have correct Page File Settings for the Hard Drive
Partitions.

1.7.0 is working excellently for Huge Images.

Thank You
Bhasker



                                                                           
             Alexander Bruy                                                
             <alexander.bruy@g                                             
             mail.com>                                                  To 
             Sent by:                  Greg Coats <gregcoats@mac.com>      
             gdal-dev-bounces@                                          cc 
             lists.osgeo.org           gdal-dev@lists.osgeo.org            
                                                                   Subject 
                                       Re: [gdal-dev] Raster algebra with  
             02/01/2010 12:25          Gdal and Python                     
             PM                                                            
                                                                           
                                                                           
                                                                           
                                                                           
                                                                           




2010/2/1 Greg Coats <gregcoats@mac.com>:
> Yes, GDAL can successfully process images with 15,000 columns by 15,000
rows. I have used GDAL on a computer with only 3 GB RAM to process an image
with Image Width: 260,000 Image Length: 195,000. What version of GAL are
you using? Are you using GDAL 1.7.0? What operating system are you using?
How much RAM is available to GDAL? Greg

I'm using GDAL 1.6.3 under Linux Slackware 12.2, and I plan to upgrade
to 1.7.0 today.
My computer has 2 Gb RAM and 2 Gb swap, but now I can't test this
error by myself because I have no large files. This error was reported
by users, they test code on several
Windows XP boxes with 4 Gb RAM.
I get large rasters today and try to reproduce this error.


--
Alexander Bruy
mailto: alexander.bruy@gmail.com
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


From antonio.valentino at tiscali.it  Mon Feb  1 03:08:48 2010
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Mon Feb  1 03:09:55 2010
Subject: [gdal-dev] Proposal: gdal_muladd.py
In-Reply-To: <9520510A-60F1-4C74-8DBE-458A8B37C229@mac.com>
References: <2DB710A4-6972-4298-9798-C4ABD201E848@axensten.se>
	<eb502d881001250840r1c2a51d1l17fdb67fca10208f@mail.gmail.com>
	<931f8ea91001251838w1c427827r61fb9cf2f8a27852@mail.gmail.com>
	<eba00f2b1001251857o109f5dafh66d224f22f967a1f@mail.gmail.com>
	<20100131181853.3698af47@mac1.local.net>
	<9520510A-60F1-4C74-8DBE-458A8B37C229@mac.com>
Message-ID: <20100201090848.5805e88c@asigrid01>

Hi Greg,

Il giorno Sun, 31 Jan 2010 14:58:19 -0500
Greg Coats <gregcoats@mac.com> ha scritto:

> Regarding the diff function
> "diff": computes the difference between 2 raster bands (b1 - b2)
> Since the result of diff could be a negative number, for example
> 99-150=-51, I suggest that there be an additional function that
> provides the absolute value of diff, which would be 51 in this
> example. Greg

Of course, it would not be a problem to include but my original idea
was to provide only base functions and use them to get complex
expressions.

In this case, what you need can be obtained using two stacked virtual
files:
 - diff (using appropriate band data type and SourceTransferType)
 - mod

Is it a reasonable approach for you?

Even more interesting for common tasks should be to compute 

abs((b1-b2)/(b1+b2))


> On Jan 31, 2010, at 12:18 PM, Antonio Valentino wrote:
> 
> > Hi Matt,
> > 
> > Il giorno Mon, 25 Jan 2010 20:57:58 -0600
> > Matt Klaric <matt@klaric.com> ha scritto:
> > 
> >> On Mon, Jan 25, 2010 at 8:38 PM, Frank Warmerdam
> >> <warmerdam@pobox.com>wrote:
> >> 
> >>> I don't think the VRT approach supports actually adding
> >>> different images together, only overlaying and rescaling.
> >>> 
> >>> 
> >> However, pixel functions could be used in a VRT file to accomplish
> >> the desired outcome.
> >> 
> >> --matt
> > 
> > Indeed, it would require a pixel function for sum and the ScaleRatio
> > property of ComplexSource.
> > 
> > I have just submitted a patch 
> > 
> > http://trac.osgeo.org/gdal/ticket/3367
> > 
> > that provides a set of standard pixel functions, including sum (of 2
> > or more raster bands).
> > 
> > Using this set of functions it should be quite easy to write a
> > python program that performs generic bands arithmetic.


best regards

-- 
Antonio Valentino
From schut at sarvision.nl  Mon Feb  1 04:17:25 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Mon Feb  1 04:18:35 2010
Subject: [gdal-dev] Raster algebra with Gdal and Python
In-Reply-To: <20100131204022.22b9c933.alexander.bruy@gmail.com>
References: <20100131204022.22b9c933.alexander.bruy@gmail.com>
Message-ID: <4B669C25.2050903@sarvision.nl>

On 01/31/2010 07:40 PM, Alexander Bruy wrote:
> Hi all
>
> I want to write a raster calculator and have two problems with Python
> and GDAL.
>
> My first problem: when calculating a difference between two raster bands I
> get a wrong results. Raster in ERDAS IMAGINE format (HFA) and bands extracted
> correctly. When I print each band and subtraction result I get something
> similar to this
>
> BAND 1
> [[ 118  121  121 ...,  111  108  107]....]]
> BAND 5
> [[ 156  162  159 ...,  148  145  142]....]]
> DIFFERENCE
> [[218 215 218 ..., 219 219 221]....]]
>
> But when calculate difference between two separate TIFFs (each band in
> separate file) - result is ok
>
> RASTER 1
> [[ 118.  121.  121. ...,  111.  108.  107.]....]]
> RASTER 5
> [[ 156.  162.  159. ...,  148.  145.  142.]....]]
> DIFFERENCE
> [[-38. -41. -38. ..., -37. -37. -35.]....]]
>
> Here is my code and sample files http://www.4shared.com/file/212381308/a3e3f140/gdal_numpytar.html.
> Run examples as:
>   - bands subtraction: test_bands.py landsat-6bands/s1986-06-12-163.img
>   - files subtraction: test_files.py landsat-separate-files/band1.tif landsat-separate-files/band5.tif
>
> Can anyone help? What is wrong in my code?
>    

Hi Alexander,

the problem is that you're working with unsigned 8bit integers 
(numpy.uint8 or numpy.byte). Therefore, the negative result (-38) is 
interpreted as 256 - 38: 218. This is called 'integer overflow' 
[http://en.wikipedia.org/wiki/Integer_overflow]. To allow for negative 
values, you should do your calculations in a variable type that allows 
for the storage of such values, e.g. in this case a signed 16bit integer 
(numpy.int16) would suffice. For convenience sake, you could also do all 
your calculations in floating point variables, so you won't be bitten by 
integer overflows again. This will cost you more memory however, and in 
some cases (not this one) you might loose some precision.

Vincent.
From l.schaminee at 12move.nl  Mon Feb  1 05:56:58 2010
From: l.schaminee at 12move.nl (Luuk Schaminee)
Date: Mon Feb  1 06:08:40 2010
Subject: [gdal-dev] Color-palette file for use in rgb2pct
Message-ID: <8AC22883-04AE-43F8-ABD4-4C196B65337A@12move.nl>

Hi,

I am trying to convert a 24 bit RGB TIFF file to a 8 bit TIFF file. Without the ?pct option this works perfectly but I want to control the created colors with a palette file. So I tried the following command:
rgb2pct -pct c:\color_file.txt c:\image.tif e:\new_image.tif.

I downloaded FWTools 2.4.6 (for Windows) to try it out, but unfortunately it doesn?t work the way I want. It is possible the format I saved the palette file in, is wrong.
I tried several versions:
This one for example:
500 255 255 255
450 235 220 175
300 190 185 135
150 240 250 150
76 50  180  50
75 200 230 255
-32768 200 230 255

Or this one:
0: 0,0,0,0
1: 251,0,0,64
2: 250,0,0,54
3: 253,0,0,114
4: 254,0,0,176
5: 254,0,0,224
6: 254,0,0,228
7: 254,0,0,252
8: 253,0,0,168
9: 254,0,0,170

I keep getting the following error:
ERROR 4: `c:\color_file.txt' not recognised as a supported file format.
Traceback (most recent call last):
  File "C:\FWTOOL~1.6\bin\rgb2pct.py", line 121, in ?
    ct = pct_ds.GetRasterBand(1).GetRasterColorTable().Clone()
AttributeError: 'NoneType' object has no attribute 'GetRasterBand'

I changed the rgb2pct Python file to print the palette file name as a check and it gives the error ?ERROR 4: `c:\color_file.txt' not recognised as a supported file format.?
If I delete the added line (?print pct_filename? above the line ?if pct_filename is None:?) this error is gone again, but not the next.

So now my question. What format must the palette file be in? and can you give me a working example.

Many thanks,

Luuk Schaminee
From warmerdam at pobox.com  Mon Feb  1 06:37:47 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb  1 06:38:09 2010
Subject: [gdal-dev] Color-palette file for use in rgb2pct
In-Reply-To: <8AC22883-04AE-43F8-ABD4-4C196B65337A@12move.nl>
References: <8AC22883-04AE-43F8-ABD4-4C196B65337A@12move.nl>
Message-ID: <4B66BD0B.60901@pobox.com>

Luuk Schaminee wrote:
> Hi,
> 
> I am trying to convert a 24 bit RGB TIFF file to a 8 bit TIFF file. Without the ?pct option this works perfectly but I want to control the created colors with a palette file. So I tried the following command:
> rgb2pct -pct c:\color_file.txt c:\image.tif e:\new_image.tif.
...
> So now my question. What format must the palette file be in? and can you give me a working example.

Luuk,

The palette must be in a GDAL supported raster file format (ie. TIFF,
PNG, GIF, etc).  Likely the easiest format for you to prepare manually
would be VRT format.  The following VRT is one with a small color table
and no actual raster data:


<VRTDataset rasterXSize="226" rasterYSize="271">
   <Metadata/>
   <VRTRasterBand dataType="Byte" band="1">
     <ColorInterp>Palette</ColorInterp>
     <ColorTable>
       <Entry c1="238" c2="238" c3="238" c4="255"/>
       <Entry c1="237" c2="237" c3="237" c4="255"/>
       <Entry c1="236" c2="236" c3="236" c4="255"/>
       <Entry c1="229" c2="229" c3="229" c4="255"/>
     </ColorTable>
   </VRTRasterBand>
</VRTDataset>

The c1/c2/c3/c4 entries are the red, green, blue and alpha components
of color entries.  You can have up to 256 entries in a normal file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From j.l.h.hartmann at uva.nl  Mon Feb  1 06:46:51 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Mon Feb  1 06:47:00 2010
Subject: [gdal-dev] Color-palette file for use in rgb2pct
In-Reply-To: <4B66BD0B.60901@pobox.com>
References: <8AC22883-04AE-43F8-ABD4-4C196B65337A@12move.nl>
	<4B66BD0B.60901@pobox.com>
Message-ID: <4B66BF2B.1020302@uva.nl>

Hi Frank, could this be added to the documentation?

Jan

On 1-2-2010 12:37, Frank Warmerdam wrote:
> Luuk Schaminee wrote:
>> Hi,
>>
>> I am trying to convert a 24 bit RGB TIFF file to a 8 bit TIFF file. 
>> Without the ?pct option this works perfectly but I want to control 
>> the created colors with a palette file. So I tried the following 
>> command:
>> rgb2pct -pct c:\color_file.txt c:\image.tif e:\new_image.tif.
> ...
>> So now my question. What format must the palette file be in? and can 
>> you give me a working example.
>
> Luuk,
>
> The palette must be in a GDAL supported raster file format (ie. TIFF,
> PNG, GIF, etc).  Likely the easiest format for you to prepare manually
> would be VRT format.  The following VRT is one with a small color table
> and no actual raster data:
>
>
> <VRTDataset rasterXSize="226" rasterYSize="271">
> <Metadata/>
> <VRTRasterBand dataType="Byte" band="1">
> <ColorInterp>Palette</ColorInterp>
> <ColorTable>
> <Entry c1="238" c2="238" c3="238" c4="255"/>
> <Entry c1="237" c2="237" c3="237" c4="255"/>
> <Entry c1="236" c2="236" c3="236" c4="255"/>
> <Entry c1="229" c2="229" c3="229" c4="255"/>
> </ColorTable>
> </VRTRasterBand>
> </VRTDataset>
>
> The c1/c2/c3/c4 entries are the red, green, blue and alpha components
> of color entries.  You can have up to 256 entries in a normal file.
>
> Best regards,
From chaitanya.ch at gmail.com  Mon Feb  1 06:55:59 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Feb  1 06:56:02 2010
Subject: [gdal-dev] Color-palette file for use in rgb2pct
In-Reply-To: <4B66BF2B.1020302@uva.nl>
References: <8AC22883-04AE-43F8-ABD4-4C196B65337A@12move.nl>
	<4B66BD0B.60901@pobox.com> <4B66BF2B.1020302@uva.nl>
Message-ID: <eb502d881002010355k2e78cca4t48e3da71174585e2@mail.gmail.com>

I'm on it.

On Mon, Feb 1, 2010 at 5:16 PM, Jan Hartmann <j.l.h.hartmann@uva.nl> wrote:

> Hi Frank, could this be added to the documentation?
>
> Jan
>
>
> On 1-2-2010 12:37, Frank Warmerdam wrote:
>
>> Luuk Schaminee wrote:
>>
>>> Hi,
>>>
>>> I am trying to convert a 24 bit RGB TIFF file to a 8 bit TIFF file.
>>> Without the ?pct option this works perfectly but I want to control the
>>> created colors with a palette file. So I tried the following command:
>>> rgb2pct -pct c:\color_file.txt c:\image.tif e:\new_image.tif.
>>>
>> ...
>>
>>> So now my question. What format must the palette file be in? and can you
>>> give me a working example.
>>>
>>
>> Luuk,
>>
>> The palette must be in a GDAL supported raster file format (ie. TIFF,
>> PNG, GIF, etc).  Likely the easiest format for you to prepare manually
>> would be VRT format.  The following VRT is one with a small color table
>> and no actual raster data:
>>
>>
>> <VRTDataset rasterXSize="226" rasterYSize="271">
>> <Metadata/>
>> <VRTRasterBand dataType="Byte" band="1">
>> <ColorInterp>Palette</ColorInterp>
>> <ColorTable>
>> <Entry c1="238" c2="238" c3="238" c4="255"/>
>> <Entry c1="237" c2="237" c3="237" c4="255"/>
>> <Entry c1="236" c2="236" c3="236" c4="255"/>
>> <Entry c1="229" c2="229" c3="229" c4="255"/>
>> </ColorTable>
>> </VRTRasterBand>
>> </VRTDataset>
>>
>> The c1/c2/c3/c4 entries are the red, green, blue and alpha components
>> of color entries.  You can have up to 256 entries in a normal file.
>>
>> Best regards,
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100201/c4401222/attachment.html
From Christian.Strobl at dlr.de  Mon Feb  1 09:48:35 2010
From: Christian.Strobl at dlr.de (Christian.Strobl@dlr.de)
Date: Mon Feb  1 09:49:44 2010
Subject: [gdal-dev] ogr2ogr PGSQL_OGR_FID is not work
Message-ID: <AE9E61FB4CB9B74B8D957FF9536FEE9375B4FE@exbe7.intra.dlr.de>


hi all,

at http://n2.nabble.com/GDAL-Dev-f2022644.html i found one thread with the same problem but unfortunately no answer. 

http://n2.nabble.com/ogr2ogr-PGSQL-OGR-FID-is-not-work-td4026177.html#a4026177

if i try the following command

ogr2ogr -f PostgreSQL -nln newlayer -nlt MULTIPOLYGON PG:"host=localhost user=admin password=xxx dbname=mydb" PG:"host=localhost user=admin password=yyy dbname=otherdb" oldlayer -lco PGSQL_OGR_FID=myid

everything works fine but the primary key remains at the column "ogc_fid" not at the column "myid". 

thanks for every help
christian

p.s. at the gdal-dev mailing list (http://lists.osgeo.org/pipermail/gdal-dev/) this thread seems not to exist. any explanation?

From jukka.rahkonen at mmmtike.fi  Mon Feb  1 10:06:19 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Feb  1 10:06:48 2010
Subject: [gdal-dev] Re: ogr2ogr PGSQL_OGR_FID is not work
References: <AE9E61FB4CB9B74B8D957FF9536FEE9375B4FE@exbe7.intra.dlr.de>
Message-ID: <loom.20100201T160500-545@post.gmane.org>

 <Christian.Strobl <at> dlr.de> writes:


> if i try the following command
> 
> ogr2ogr -f PostgreSQL -nln newlayer -nlt MULTIPOLYGON PG:"host=localhost
user=admin password=xxx
> dbname=mydb" PG:"host=localhost user=admin password=yyy dbname=otherdb"
oldlayer -lco PGSQL_OGR_FID=myid
> 
> everything works fine but the primary key remains at the column "ogc_fid" not
at the column "myid". 
> 
> thanks for every help


Hi,

I have never tried that but it seems to by in the manual page under subtitle
"Environment variables" and not under "Layer creation options".  With Windows it
would mean giving a command

SET PGSQL_OGR_FID=myid from command line before running ogr2ogr. Must be
something similar with Linux.

-Jukka-

From gregcoats at mac.com  Mon Feb  1 10:07:24 2010
From: gregcoats at mac.com (Greg Coats)
Date: Mon Feb  1 10:07:47 2010
Subject: [gdal-dev] Proposal: gdal_muladd.py
In-Reply-To: <20100201090848.5805e88c@asigrid01>
References: <2DB710A4-6972-4298-9798-C4ABD201E848@axensten.se>
	<eb502d881001250840r1c2a51d1l17fdb67fca10208f@mail.gmail.com>
	<931f8ea91001251838w1c427827r61fb9cf2f8a27852@mail.gmail.com>
	<eba00f2b1001251857o109f5dafh66d224f22f967a1f@mail.gmail.com>
	<20100131181853.3698af47@mac1.local.net>
	<9520510A-60F1-4C74-8DBE-458A8B37C229@mac.com>
	<20100201090848.5805e88c@asigrid01>
Message-ID: <E51B62EA-21C7-4213-8E2A-DD2F9BA3C8B2@mac.com>

I would prefer to obtain in one step the absolute value of the difference between two pixels, in part because I do not see the meaning of a negative pixel value. In my example, I do not see meaning to a signed byte value for a pixel channel being red=-51. Greg

On Feb 1, 2010, at 3:08 AM, Antonio Valentino wrote:

> Hi Greg,
> 
> Il giorno Sun, 31 Jan 2010 14:58:19 -0500
> Greg Coats <gregcoats@mac.com> ha scritto:
> 
>> Regarding the diff function
>> "diff": computes the difference between 2 raster bands (b1 - b2)
>> Since the result of diff could be a negative number, for example
>> 99-150=-51, I suggest that there be an additional function that
>> provides the absolute value of diff, which would be 51 in this
>> example. Greg
> 
> Of course, it would not be a problem to include but my original idea
> was to provide only base functions and use them to get complex
> expressions.
> 
> In this case, what you need can be obtained using two stacked virtual
> files:
> - diff (using appropriate band data type and SourceTransferType)
> - mod
> 
> Is it a reasonable approach for you?
> 
> Even more interesting for common tasks should be to compute 
> 
> abs((b1-b2)/(b1+b2))
> 
> 
>> On Jan 31, 2010, at 12:18 PM, Antonio Valentino wrote:
>> 
>>> Hi Matt,
>>> 
>>> Il giorno Mon, 25 Jan 2010 20:57:58 -0600
>>> Matt Klaric <matt@klaric.com> ha scritto:
>>> 
>>>> On Mon, Jan 25, 2010 at 8:38 PM, Frank Warmerdam
>>>> <warmerdam@pobox.com>wrote:
>>>> 
>>>>> I don't think the VRT approach supports actually adding
>>>>> different images together, only overlaying and rescaling.
>>>>> 
>>>>> 
>>>> However, pixel functions could be used in a VRT file to accomplish
>>>> the desired outcome.
>>>> 
>>>> --matt
>>> 
>>> Indeed, it would require a pixel function for sum and the ScaleRatio
>>> property of ComplexSource.
>>> 
>>> I have just submitted a patch 
>>> 
>>> http://trac.osgeo.org/gdal/ticket/3367
>>> 
>>> that provides a set of standard pixel functions, including sum (of 2
>>> or more raster bands).
>>> 
>>> Using this set of functions it should be quite easy to write a
>>> python program that performs generic bands arithmetic.
> 
> 
> best regards
> 
> -- 
> Antonio Valentino

From jctull at gmail.com  Mon Feb  1 15:26:30 2010
From: jctull at gmail.com (John C. Tull)
Date: Mon Feb  1 15:26:38 2010
Subject: [gdal-dev] GdalTools contour
Message-ID: <E635ECF3-B567-41EE-A362-293594B84A3E@gmail.com>

Hi all,

I noticed that the contour tool in GdalTools only accepts integers for the contour interval. Having this field accept float would be great for those of us trying to manipulate contour outputs between various units.

Cheers,
John
From patsv at bredband.net  Mon Feb  1 18:10:22 2010
From: patsv at bredband.net (Patrik Svensson)
Date: Mon Feb  1 18:30:42 2010
Subject: [gdal-dev] Projection of GEOTIFF in C# problems
Message-ID: <89689A33C90148B0A2A9A1EBFBC52FD2@frej>

Hi all,

I have problem with geotiff files created with gdal_translate when I try to
read them with the C# bindings. 

So I tested it with the GDALInfo commands.

GDALInfo.exe  (The c-api) will output the correct projection information:

 

C:\tmp\release-1500-x64-gdal-mapserver\bin>gdal\apps\GDALInfo.exe w:\Lmv\F

\7h0a.tif

Driver: GTiff/GeoTIFF

Files: w:\Lmv\Foto\7h\7h0a.tif

Size is 5500, 5500 

Coordinate System is `'

GCP Projection =

PROJCS["RT90 2.5 gon V",

    GEOGCS["RT90",

        DATUM["Rikets_koordinatsystem_1990",

            SPHEROID["Bessel 1841",6377397.155,299.1528128000009,

                AUTHORITY["EPSG","7004"]],

            AUTHORITY["EPSG","6124"]],

        PRIMEM["Greenwich",0],

        UNIT["degree",0.0174532925199433],

        AUTHORITY["EPSG","4124"]],

    PROJECTION["Transverse_Mercator"],

    PARAMETER["latitude_of_origin",0],

    PARAMETER["central_meridian",15.80827777777778],

    PARAMETER["scale_factor",1],

    PARAMETER["false_easting",1500000],

    PARAMETER["false_northing",0],

    UNIT["metre",1,

        AUTHORITY["EPSG","9001"]],

    AUTHORITY["EPSG","3021"]]

GCP[  0]: Id=1, Info=

          (250,250) -> (1550000,6405000,0)

GCP[  1]: Id=2, Info=

          (5250,250) -> (1555000,6405000,0)

GCP[  2]: Id=3, Info=

          (250,5250) -> (1550000,6400000,0)

GCP[  3]: Id=4, Info=

          (5250,5250) -> (1555000,6400000,0)

Metadata:

  AREA_OR_POINT=Area

Image Structure Metadata:

  INTERLEAVE=BAND

Corner Coordinates:

Upper Left  (    0.0,    0.0)

Lower Left  (    0.0, 5500.0)

Upper Right ( 5500.0,    0.0)

Lower Right ( 5500.0, 5500.0)

Center      ( 2750.0, 2750.0)

Band 1 Block=5500x1 Type=Byte, ColorInterp=Gray

 

But the c-sharp version has problems with projection string as it only
reports this, lacking the projection data:

C:\tmp\release-1500-x64-gdal-mapserver\bin>gdal\csharp\GDALInfo.exe
w:\Lmv\Foto\

7h\7h0a.tif

 

Raster dataset parameters:

  Projection:

  RasterCount: 1

  RasterSize (5500,5500)

Using driver GeoTIFF

  Image Structure Metadata:

    0:  INTERLEAVE=BAND

 

Corner Coordinates:

  Upper Left (0, 0)

  Lower Left (0, 5500)

  Upper Right (5500, 0)

  Lower Right (5500, 5500)

  Center (2750, 2750)

 

GCP Projection:

GCP[0]: Id=1, Info=

          (250,250) -> (1550000,6405000,0)

 

GCP[1]: Id=2, Info=

          (5250,250) -> (1555000,6405000,0)

 

GCP[2]: Id=3, Info=

          (250,5250) -> (1550000,6400000,0)

 

GCP[3]: Id=4, Info=

          (5250,5250) -> (1555000,6400000,0)

 

 

GCP Equivalent geotransformation parameters:

t[0] = 1549750

t[1] = 1

t[2] = 0

t[3] = 6405250

t[4] = 0

t[5] = -1

 

Band 1 :

   DataType: Byte

   ColorInterpretation: Gray

   Description:

   Size (5500,5500)

   BlockSize (5500,1)

 

What can I do to get the correct string to give to SpatialReference?

(Tried both GDAL 1.6 and 1.7)

Regards 

Patrik Svensson

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100202/01c01e6d/attachment-0001.html
From even.rouault at mines-paris.org  Mon Feb  1 18:41:08 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Feb  1 18:41:28 2010
Subject: [gdal-dev] GdalTools contour
In-Reply-To: <E635ECF3-B567-41EE-A362-293594B84A3E@gmail.com>
References: <E635ECF3-B567-41EE-A362-293594B84A3E@gmail.com>
Message-ID: <201002020041.11074.even.rouault@mines-paris.org>

John,

from a quick look at gdal_contour.cpp, I see it uses a float value for the 
contour interval, so unless there's some cast to integer at lower level in 
the contour generation code, it looks more like a limitation by GdalTools, 
and not in GDAL.

Indeed another quick look at 
https://trac.faunalia.it/GdalTools-plugin/browser/trunk/tools/ui_widgetContour.py 
shows the use of a QSpinBox. 

The QT doc specifies http://doc.trolltech.com/4.3/qspinbox.html :
"QSpinBox is designed to handle integers and discrete sets of values (e.g., 
month names); use QDoubleSpinBox  for floating point values"

A text entry might be more appropriate. Anyway, you might want to address your 
request to the GdalTools author instead ;-)

Best regards,

Even

Le Monday 01 February 2010 21:26:30 John C. Tull, vous avez ?crit?:
> Hi all,
>
> I noticed that the contour tool in GdalTools only accepts integers for the
> contour interval. Having this field accept float would be great for those
> of us trying to manipulate contour outputs between various units.
>
> Cheers,
> John_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From alexander.bruy at gmail.com  Tue Feb  2 02:01:39 2010
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Tue Feb  2 02:01:41 2010
Subject: [gdal-dev] Raster algebra with Gdal and Python
In-Reply-To: <4B669C25.2050903@sarvision.nl>
References: <20100131204022.22b9c933.alexander.bruy@gmail.com>
	<4B669C25.2050903@sarvision.nl>
Message-ID: <66a45d6d1002012301n5c61378ai861723c4f749239d@mail.gmail.com>

Hi again,

with your help I've fix problem with "integer overflow" and now I get
correct results.

Also I clean up my code for reduce memory usage but problem with large files is
remain. I have raster with size 11779*10663 and 5 bands. When I calculate NDVI
on Linux box (2 Gb RAM, 2Gb swap, GDAL 1.6.3) all works fine and I get correct
results.Peak memory consumption during this operation is 1900 Mb RAM and
300 Mb swap (monitored with htop).

When I run same code with same raster on Windows box (2 Gb RAM, swap size is
selected by OS ~1.3 Gb, GDAL 1.6.3) I get MemoryError. Peak memory consumption
during this operation is 600 Mb RAM and 700 Mb swap. I've try smaller
raster with size
8500*7600 pixels but get MemoryError too.

-- 
Alexander Bruy
mailto: alexander.bruy@gmail.com
From jukka.rahkonen at mmmtike.fi  Tue Feb  2 02:20:52 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Feb  2 02:21:22 2010
Subject: [gdal-dev] Re: Proposal: gdal_muladd.py
References: <2DB710A4-6972-4298-9798-C4ABD201E848@axensten.se>
	<eb502d881001250840r1c2a51d1l17fdb67fca10208f@mail.gmail.com>
	<931f8ea91001251838w1c427827r61fb9cf2f8a27852@mail.gmail.com>
	<eba00f2b1001251857o109f5dafh66d224f22f967a1f@mail.gmail.com>
	<20100131181853.3698af47@mac1.local.net>
	<9520510A-60F1-4C74-8DBE-458A8B37C229@mac.com>
	<20100201090848.5805e88c@asigrid01>
	<E51B62EA-21C7-4213-8E2A-DD2F9BA3C8B2@mac.com>
Message-ID: <loom.20100202T081730-534@post.gmane.org>

Greg Coats <gregcoats <at> mac.com> writes:

> 
> I would prefer to obtain in one step the absolute value of the difference
between two pixels, in part because
> I do not see the meaning of a negative pixel value. In my example, I do not
see meaning to a signed byte value
> for a pixel channel being red=-51. Greg

Hi,

If somebody is doing for example change detection by comparing satellite images
from different dates, it is not at all the same if the result is 
 99-150=-51  or 150-99=51.

-Jukka Rahkonen-

From antonio.valentino at tiscali.it  Tue Feb  2 03:12:45 2010
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Tue Feb  2 03:12:52 2010
Subject: [gdal-dev] Re: Proposal: gdal_muladd.py
In-Reply-To: <loom.20100202T081730-534@post.gmane.org>
References: <2DB710A4-6972-4298-9798-C4ABD201E848@axensten.se>
	<eb502d881001250840r1c2a51d1l17fdb67fca10208f@mail.gmail.com>
	<931f8ea91001251838w1c427827r61fb9cf2f8a27852@mail.gmail.com>
	<eba00f2b1001251857o109f5dafh66d224f22f967a1f@mail.gmail.com>
	<20100131181853.3698af47@mac1.local.net>
	<9520510A-60F1-4C74-8DBE-458A8B37C229@mac.com>
	<20100201090848.5805e88c@asigrid01>
	<E51B62EA-21C7-4213-8E2A-DD2F9BA3C8B2@mac.com>
	<loom.20100202T081730-534@post.gmane.org>
Message-ID: <20100202091245.6ad76982@asigrid01>

Hi Jukka,

Il giorno Tue, 2 Feb 2010 07:20:52 +0000 (UTC)
Jukka Rahkonen <jukka.rahkonen@mmmtike.fi> ha scritto:

> Greg Coats <gregcoats <at> mac.com> writes:
> 
> > 
> > I would prefer to obtain in one step the absolute value of the
> > difference
> between two pixels, in part because
> > I do not see the meaning of a negative pixel value. In my example,
> > I do not
> see meaning to a signed byte value
> > for a pixel channel being red=-51. Greg
> 
> Hi,
> 
> If somebody is doing for example change detection by comparing
> satellite images from different dates, it is not at all the same if
> the result is 99-150=-51  or 150-99=51.
> 
> -Jukka Rahkonen-

I completely agree with you.

Anyway, IMHO the point here is not to decide if we have to
*modify* the diff function so that it returns abs(b1-b2).
Greg asked to add a new one ( abs(b1-b2) ) to the *base set* of pixel
functions.
Stated that there is no technical difficulty to do this I'm wondering
what is the Frank's mind about the question.

In my opinion the criterion should be to have only a minimal set of
pixel functions in the library and write a support tool for all other
needs.

Another criterion could be to have a wider set of pixel functions in
the library and to include all the ones that are considered *of
general utility*.
Greg's request makes perfectly sense, of course, with respect to this
criterion.

I think I will add to the patch abs(b1-b2).
It will be GDAL developers, if they ever will consider to integrate the
patch, to take a decision about which pixel function to include and
which not.


Best regards


-- 
Antonio Valentino
From antonio.valentino at tiscali.it  Tue Feb  2 06:39:49 2010
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Tue Feb  2 06:40:55 2010
Subject: [gdal-dev] Re: Proposal: gdal_muladd.py
In-Reply-To: <op.u7hxep2aqw3wu1@titan>
References: <2DB710A4-6972-4298-9798-C4ABD201E848@axensten.se>
	<eb502d881001250840r1c2a51d1l17fdb67fca10208f@mail.gmail.com>
	<931f8ea91001251838w1c427827r61fb9cf2f8a27852@mail.gmail.com>
	<eba00f2b1001251857o109f5dafh66d224f22f967a1f@mail.gmail.com>
	<20100131181853.3698af47@mac1.local.net>
	<9520510A-60F1-4C74-8DBE-458A8B37C229@mac.com>
	<20100201090848.5805e88c@asigrid01>
	<E51B62EA-21C7-4213-8E2A-DD2F9BA3C8B2@mac.com>
	<loom.20100202T081730-534@post.gmane.org>
	<20100202091245.6ad76982@asigrid01> <op.u7hxep2aqw3wu1@titan>
Message-ID: <20100202123949.721bbeab@asigrid01>

Hi Andrew,

Il giorno Tue, 02 Feb 2010 10:43:27 -0000
"Andrew Brooks" <arb@sat.dundee.ac.uk> ha scritto:

> Hi Antonio
> 
> Your pixel function patch sounds interesting.  I've not tried it yet,

thanks 

> but how easy is it to create a stack of functions? For example if
> absdiff(b1.tif,b2.tif) is not available how would I create
> abs(diff(b1.tif,b2.tif)) ?

the idea is to write a command line tool (or a GUI one) that analyzes 
the algebric expression an produces the the appropriate stack of
virtual files.

I have still not written such a tool.

If you want simply to give it a try you could do something like the
following (not tested):

$ echo diff.vrt
<VRTDataset rasterXSize="5" rasterYSize="6">
  <VRTRasterBand dataType="CFloat32" band="1"
subClass="VRTDerivedRasterBand"> <Description>Difference</Description>
    <PixelFunctionType>diff</PixelFunctionType>
    <SimpleSource>
      <SourceFilename relativeToVRT="1">cint_sar.tif</SourceFilename>
      <SourceBand>1</SourceBand>
      <SrcRect xOff="0" yOff="0" xSize="5" ySize="6"/>
      <DstRect xOff="0" yOff="0" xSize="5" ySize="6"/>
    </SimpleSource>
    <SimpleSource>
      <SourceFilename relativeToVRT="1">cfloat64.tif</SourceFilename>
      <SourceBand>1</SourceBand>
      <SrcRect xOff="0" yOff="0" xSize="5" ySize="6"/>
      <DstRect xOff="0" yOff="0" xSize="5" ySize="6"/>
    </SimpleSource>
  </VRTRasterBand>
</VRTDataset>

$ echo abs.vrt
<VRTDataset rasterXSize="5" rasterYSize="6">
  <VRTRasterBand dataType="Byte" band="1"
subClass="VRTDerivedRasterBand"> <Description>Abs</Description>
    <PixelFunctionType>mod</PixelFunctionType>
    <SourceTransferType>CFloat32</SourceTransferType>
    <SimpleSource>
      <SourceFilename relativeToVRT="1">diff.vrt</SourceFilename>
      <SourceBand>1</SourceBand>
      <SrcRect xOff="0" yOff="0" xSize="5" ySize="6"/>
      <DstRect xOff="0" yOff="0" xSize="5" ySize="6"/>
    </SimpleSource>
  </VRTRasterBand>
</VRTDataset>

$ gdal_translate abs.vrt absdiff.tif

Uses band 1 from cint_sar.tif and cfloat64.tif of the test dataset.

Note that if you use ComplexSource instead of SimpleSource you can also
apply a scaling factor.

Writing simple vrt file is not hard but if the expression is complex it
could be quite boring.

Does the example answerer your question?

best regards

-- 
Antonio Valentino
From zoltans at geograph.co.za  Tue Feb  2 04:47:25 2010
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Tue Feb  2 06:42:21 2010
Subject: [gdal-dev] Raster algebra with Gdal and Python
In-Reply-To: <66a45d6d1002012301n5c61378ai861723c4f749239d@mail.gmail.com>
References: <20100131204022.22b9c933.alexander.bruy@gmail.com>	<4B669C25.2050903@sarvision.nl>
	<66a45d6d1002012301n5c61378ai861723c4f749239d@mail.gmail.com>
Message-ID: <4B67F4AD.2040401@geograph.co.za>

Alexander Bruy wrote:
> Hi again,
>
> with your help I've fix problem with "integer overflow" and now I get
> correct results.
>
> Also I clean up my code for reduce memory usage but problem with large files is
> remain. I have raster with size 11779*10663 and 5 bands. When I calculate NDVI
> on Linux box (2 Gb RAM, 2Gb swap, GDAL 1.6.3) all works fine and I get correct
> results.Peak memory consumption during this operation is 1900 Mb RAM and
> 300 Mb swap (monitored with htop).
>
> When I run same code with same raster on Windows box (2 Gb RAM, swap size is
> selected by OS ~1.3 Gb, GDAL 1.6.3) I get MemoryError. Peak memory consumption
> during this operation is 600 Mb RAM and 700 Mb swap. I've try smaller
> raster with size
> 8500*7600 pixels but get MemoryError too.
>
>   
Hi,
I'll bet the problem is that you are hitting the normal 2GB user address 
space in Windows.
Google for "/3GB" and you will find how to increase this to 3GB.
I can't tell you outright because you have not mentioned whether you are 
using XP or VISTA/Win7 - there are different ways to do it for these OS 
versions.
You will have to re-boot after changing the relevant boot.ini or 
whatever file.


HTH,
Zoltan


-- 

===========================================
Zoltan Szecsei
Director

Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.  

34? 6'16.35"S 18?28'5.62"E 

Tel: +27-21-7884897 
Fax: +27-86-6115323    www.geograph.co.za
===========================================
-------------- next part --------------
Skipped content of type multipart/alternative
From Christian.Strobl at dlr.de  Tue Feb  2 06:42:52 2010
From: Christian.Strobl at dlr.de (Christian.Strobl@dlr.de)
Date: Tue Feb  2 06:42:57 2010
Subject: AW: [gdal-dev] Re: ogr2ogr PGSQL_OGR_FID is not work
In-Reply-To: <loom.20100201T160500-545@post.gmane.org>
References: <AE9E61FB4CB9B74B8D957FF9536FEE9375B4FE@exbe7.intra.dlr.de>
	<loom.20100201T160500-545@post.gmane.org>
Message-ID: <AE9E61FB4CB9B74B8D957FF9536FEE93A5C17C@exbe7.intra.dlr.de>



hi jukka,

thanks for your hint. i have read the section too fast, so PGSQL_OGR_FID seems to be an environment variable. i tried also your suggestion, it's the right way to define environment variables for windows

SET PGSQL_OGR_FID=myid

but there is no difference neither. i will try it later for linux with export.

does anybody know if this PGSQL_OGR_FID option is working at all?

thanks
christian

p.s. i tried also 

SET PGSQL_OGR_FID="myid"
SET PGSQL_OGR_FID='myid' 


> -----Urspr?ngliche Nachricht-----
> Von: gdal-dev-bounces@lists.osgeo.org 
> [mailto:gdal-dev-bounces@lists.osgeo.org] Im Auftrag von 
> Jukka Rahkonen
> Gesendet: Montag, 1. Februar 2010 16:06
> An: gdal-dev@lists.osgeo.org
> Betreff: [gdal-dev] Re: ogr2ogr PGSQL_OGR_FID is not work
> 
> 
>  <Christian.Strobl <at> dlr.de> writes:
> 
> 
> > if i try the following command
> > 
> > ogr2ogr -f PostgreSQL -nln newlayer -nlt MULTIPOLYGON 
> > PG:"host=localhost
> user=admin password=xxx
> > dbname=mydb" PG:"host=localhost user=admin password=yyy 
> dbname=otherdb"
> oldlayer -lco PGSQL_OGR_FID=myid
> > 
> > everything works fine but the primary key remains at the column 
> > "ogc_fid" not
> at the column "myid". 
> > 
> > thanks for every help
> 
> 
> Hi,
> 
> I have never tried that but it seems to by in the manual page 
> under subtitle "Environment variables" and not under "Layer 
> creation options".  With Windows it would mean giving a command
> 
> SET PGSQL_OGR_FID=myid from command line before running 
> ogr2ogr. Must be something similar with Linux.
> 
> -Jukka-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
From ahh34 at cam.ac.uk  Tue Feb  2 06:45:34 2010
From: ahh34 at cam.ac.uk (Alex Hagen-Zanker)
Date: Tue Feb  2 06:45:37 2010
Subject: [gdal-dev] beginner or bug: reprojecting using ogr2ogr
Message-ID: <4B68105E.7060308@cam.ac.uk>

Dear all,

I just did my first reprojection using ogr2ogr. The process went quite 
patchy and I wonder if this is because of a bug or because I am not 
understanding something really basic.

I want to reproject a point dataset from British National Grid 
(EPSG:27700) to WGS84.

My input comes as comma separated values. Therefore I use GDAL 1.7 which 
offers great support for VRT and CSV

I have two input files, input.vrt and input.cvs

input.vrt looks as follows:

<OGRVRTDataSource>
   <OGRVRTLayer name="input">
       <SrcDataSource>input.csv</SrcDataSource>
       <GeometryType>wkbPoint</GeometryType>
       <LayerSRS>EPSG:27700</LayerSRS>
       <GeometryField encoding="PointFromColumns" x="X" y="Y"/>
       <Field name="Z" src="Z" type="Real"/>
   </OGRVRTLayer>
</OGRVRTDataSource>

input.csv as follows:

X,Y,Z
385500,815500,2

I assumed that the following command would do all my work:

% ogr2ogr -f csv -s_srs EPSG:27700 -t_srs WGS84 output.csv input.vrt 
-lco GEOMETRY=AS_XY

It does not work however, and I get an error about "Failed to initialize 
PROJ.4 " due to "unknown ellipical parameter name". See the full error 
at the bottom of this email.

I thought that it might be better to separate the file conversions and 
the reprojection and did the following:

First convert:    % ogr2ogr input.shp input.vrt
Then reproject:    % ogr2ogr -s_srs EPSG:27700 -t_srs WGS84 output.shp 
input.shp
Then convert:    % ogr2ogr -f csv output.csv output.shp -lco GEOMETRY=AS_XY

But the reproject step fails on exactly the same error.

Leaving out the -s_srs override because it is obsolete does not help

% ogr2ogr -t_srs WGS84 output.shp input.shp
(fails on same error)

Finally, it worked using the older 1.6 version of ogr2ogr, which I had 
renamed to ogr2ogr16

% ogr2ogr16 -t_srs WGS84 output.shp input.shp
(now it works)

When I useArcGIS to map the points in both projections, they coincide 
exactly. Output.csv looks as follows:

X,Y,Z
-2.240199963394935,57.230193361600563,       2.000000000000000

Out of interest I made the source projection explicit again, and the 
same error returns:

% ogr2ogr16 -s_srs EPSG:27700 -t_srs WGS84 output.shp input.shp
(fails on same error)

This could be a bug in the new version, but I suspect that I have 
misunderstood how ogr2ogr is really intended to be used.

Could somebody point me in the right direction?

Thanks in advance,

Alex

-- 
Alex Hagen-Zanker
University of Cambridge, Department of Architecture,  1-5 Scroope 
Terrace, Cambridge, CB2 1PX, United Kingdom
Tel: +44(0) 1223 330573




Full error message:

ERROR 6: Failed to initialize PROJ.4 with `+proj=tmerc +lat_0=49 
+lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy 
+datum=OSGB36 +units=m +no_defs'.
unknown elliptical parameter name
Failed to create coordinate transformation between the following 
coordinate systems.  This may be because they are not transformable, or 
because projection services (PROJ.4 DLL/.so) could not be loaded.
Source:
PROJCS["OSGB 1936 / British National Grid",
   GEOGCS["OSGB 1936",
       DATUM["OSGB_1936",
           SPHEROID["Airy 1830",6377563.396,299.3249646,
               AUTHORITY["EPSG","7001"]],
           AUTHORITY["EPSG","6277"]],
       PRIMEM["Greenwich",0,
           AUTHORITY["EPSG","8901"]],
       UNIT["degree",0.01745329251994328,
           AUTHORITY["EPSG","9122"]],
       AUTHORITY["EPSG","4277"]],
   UNIT["metre",1,
       AUTHORITY["EPSG","9001"]],
   PROJECTION["Transverse_Mercator"],
   PARAMETER["latitude_of_origin",49],
   PARAMETER["central_meridian",-2],
   PARAMETER["scale_factor",0.9996012717],
   PARAMETER["false_easting",400000],
   PARAMETER["false_northing",-100000],
   AUTHORITY["EPSG","27700"],
   AXIS["Easting",EAST],
   AXIS["Northing",NORTH]]
Target:
GEOGCS["WGS 84",
   DATUM["WGS_1984",
       SPHEROID["WGS 84",6378137,298.257223563,
           AUTHORITY["EPSG","7030"]],
       TOWGS84[0,0,0,0,0,0,0],
       AUTHORITY["EPSG","6326"]],
   PRIMEM["Greenwich",0,
       AUTHORITY["EPSG","8901"]],
   UNIT["degree",0.0174532925199433,
       AUTHORITY["EPSG","9108"]],
   AUTHORITY["EPSG","4326"]]
From ahh34 at cam.ac.uk  Tue Feb  2 06:35:46 2010
From: ahh34 at cam.ac.uk (Alex Hagen-Zanker)
Date: Tue Feb  2 06:46:55 2010
Subject: [gdal-dev] beginner or bug: reprojecting using ogr2ogr
Message-ID: <4B680E12.3050506@cam.ac.uk>

Dear all,

I just did my first reprojection using ogr2ogr. The process went quite 
patchy and I wonder if this is because of a bug or because I am not 
understanding something really basic.

I want to reproject a point dataset from British National Grid 
(EPSG:27700) to WGS84.

My input comes as comma separated values. Therefore I use GDAL 1.7 which 
offers great support for VRT and CSV

I have two input files, input.vrt and input.cvs

input.vrt looks as follows:

<OGRVRTDataSource>
    <OGRVRTLayer name="input">
        <SrcDataSource>input.csv</SrcDataSource>
        <GeometryType>wkbPoint</GeometryType>
        <LayerSRS>EPSG:27700</LayerSRS>
        <GeometryField encoding="PointFromColumns" x="X" y="Y"/>
        <Field name="Z" src="Z" type="Real"/>
    </OGRVRTLayer>
</OGRVRTDataSource>

input.csv as follows:

X,Y,Z
385500,815500,2

I assumed that the following command would do all my work:

% ogr2ogr -f csv -s_srs EPSG:27700 -t_srs WGS84 output.csv input.vrt 
-lco GEOMETRY=AS_XY

It does not work however, and I get an error about "Failed to initialize 
PROJ.4 " due to "unknown ellipical parameter name". See the full error 
at the bottom of this email.

I thought that it might be better to separate the file conversions and 
the reprojection and did the following:

First convert:    % ogr2ogr input.shp input.vrt
Then reproject:    % ogr2ogr -s_srs EPSG:27700 -t_srs WGS84 output.shp 
input.shp
Then convert:    % ogr2ogr -f csv output.csv output.shp -lco GEOMETRY=AS_XY

But the reproject step fails on exactly the same error.

Leaving out the -s_srs override, because it is obsolete does not help

% ogr2ogr -t_srs WGS84 output.shp input.shp
(fails on same error)

Finally, it worked using the older 1.6 version of ogr2ogr, which I had 
renamed to ogr2ogr16

% ogr2ogr16 -t_srs WGS84 output.shp input.shp
(now it works)

When I useArcGIS to map the points in both projection they coincide 
exactly. Output.csv looks as follows:

X,Y,Z
-2.240199963394935,57.230193361600563,       2.000000000000000

Out of interest I made the source projection explicit again, and I get 
the same error again:

% ogr2ogr16 -s_srs EPSG:27700 -t_srs WGS84 output.shp input.shp
(fails on same error)

This could be a bug in the new version, but I suspect that I have 
misunderstood how ogr2ogr is really intended to be used.

Could somebody point me in the right direction?

Thanks in advance,

Alex

-- 
Alex Hagen-Zanker
University of Cambridge, Department of Architecture,  1-5 Scroope Terrace, Cambridge, CB2 1PX, United Kingdom
Tel: +44(0) 1223 330573




Full error message:

ERROR 6: Failed to initialize PROJ.4 with `+proj=tmerc +lat_0=49 
+lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy 
+datum=OSGB36 +units=m +no_defs'.
unknown elliptical parameter name
Failed to create coordinate transformation between the following 
coordinate systems.  This may be because they are not transformable, or 
because projection services (PROJ.4 DLL/.so) could not be loaded.
Source:
PROJCS["OSGB 1936 / British National Grid",
    GEOGCS["OSGB 1936",
        DATUM["OSGB_1936",
            SPHEROID["Airy 1830",6377563.396,299.3249646,
                AUTHORITY["EPSG","7001"]],
            AUTHORITY["EPSG","6277"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.01745329251994328,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4277"]],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",49],
    PARAMETER["central_meridian",-2],
    PARAMETER["scale_factor",0.9996012717],
    PARAMETER["false_easting",400000],
    PARAMETER["false_northing",-100000],
    AUTHORITY["EPSG","27700"],
    AXIS["Easting",EAST],
    AXIS["Northing",NORTH]]
Target:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AUTHORITY["EPSG","4326"]]
From schut at sarvision.nl  Tue Feb  2 07:09:27 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Tue Feb  2 07:09:33 2010
Subject: [gdal-dev] Raster algebra with Gdal and Python
In-Reply-To: <66a45d6d1002012301n5c61378ai861723c4f749239d@mail.gmail.com>
References: <20100131204022.22b9c933.alexander.bruy@gmail.com>	<4B669C25.2050903@sarvision.nl>
	<66a45d6d1002012301n5c61378ai861723c4f749239d@mail.gmail.com>
Message-ID: <4B6815F7.5000706@sarvision.nl>

On 02/02/2010 08:01 AM, Alexander Bruy wrote:
> Hi again,
>
> with your help I've fix problem with "integer overflow" and now I get
> correct results.
>
> Also I clean up my code for reduce memory usage but problem with large files is
> remain. I have raster with size 11779*10663 and 5 bands. When I calculate NDVI
> on Linux box (2 Gb RAM, 2Gb swap, GDAL 1.6.3) all works fine and I get correct
> results.Peak memory consumption during this operation is 1900 Mb RAM and
> 300 Mb swap (monitored with htop).
>
> When I run same code with same raster on Windows box (2 Gb RAM, swap size is
> selected by OS ~1.3 Gb, GDAL 1.6.3) I get MemoryError. Peak memory consumption
> during this operation is 600 Mb RAM and 700 Mb swap. I've try smaller
> raster with size
> 8500*7600 pixels but get MemoryError too.
>
>    
Alexander,

if you want your raster algebra to be independent of raster size, you'll
have to resort to do the processing in a loop, each time processing a
part of the input(s), writing the result, and so on.
Easiest would be (to program) to loop over the image lines. Read a line
for each input, calculate the resulting line, write that line to the
output, and repeat.
Performance-wise, it could be better to calculate in blocks of lines,
for example 50 lines per iteration.
This of course gets more complicated when your calculations include
neighbourhood expressions.

Vincent.

From mateusz at loskot.net  Tue Feb  2 08:16:49 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Feb  2 08:16:41 2010
Subject: [gdal-dev] Raster algebra with Gdal and Python
In-Reply-To: <4B67F4AD.2040401@geograph.co.za>
References: <20100131204022.22b9c933.alexander.bruy@gmail.com>	<4B669C25.2050903@sarvision.nl>	<66a45d6d1002012301n5c61378ai861723c4f749239d@mail.gmail.com>
	<4B67F4AD.2040401@geograph.co.za>
Message-ID: <4B6825C1.9010904@loskot.net>

Zoltan Szecsei wrote:
> Alexander Bruy wrote:
>> Hi again,
>>
>> with your help I've fix problem with "integer overflow" and now I get
>> correct results.
>>
>> Also I clean up my code for reduce memory usage but problem with large 
>> files is
>> remain. I have raster with size 11779*10663 and 5 bands. When I 
>> calculate NDVI
>> on Linux box (2 Gb RAM, 2Gb swap, GDAL 1.6.3) all works fine and I get 
>> correct
>> results.Peak memory consumption during this operation is 1900 Mb RAM and
>> 300 Mb swap (monitored with htop).
>>
>> When I run same code with same raster on Windows box (2 Gb RAM, swap 
>> size is
>> selected by OS ~1.3 Gb, GDAL 1.6.3) I get MemoryError. Peak memory 
>> consumption
>> during this operation is 600 Mb RAM and 700 Mb swap. I've try smaller
>> raster with size
>> 8500*7600 pixels but get MemoryError too.
>>
>>   
> Hi,
> I'll bet the problem is that you are hitting the normal 2GB user address 
> space in Windows.
> Google for "/3GB" and you will find how to increase this to 3GB.

http://blogs.msdn.com/oldnewthing/archive/2004/08/16/215089.aspx

http://blogs.msdn.com/oldnewthing/archive/2004/08/22/218527.aspx

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From warmerdam at pobox.com  Tue Feb  2 11:05:08 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb  2 11:05:25 2010
Subject: [gdal-dev] beginner or bug: reprojecting using ogr2ogr
In-Reply-To: <4B68105E.7060308@cam.ac.uk>
References: <4B68105E.7060308@cam.ac.uk>
Message-ID: <4B684D34.8050402@pobox.com>

Alex Hagen-Zanker wrote:
> Dear all,
> 
> I just did my first reprojection using ogr2ogr. The process went quite 
> patchy and I wonder if this is because of a bug or because I am not 
> understanding something really basic.
...
> I assumed that the following command would do all my work:
> 
> % ogr2ogr -f csv -s_srs EPSG:27700 -t_srs WGS84 output.csv input.vrt 
> -lco GEOMETRY=AS_XY
> 
> It does not work however, and I get an error about "Failed to initialize 
> PROJ.4 " due to "unknown ellipical parameter name". See the full error 
> at the bottom of this email.

Alex,

As far as I can see this should have worked, and I'm quite mystified
at the error you got since the proj.4 string does contain +ellps=airy
defining the ellipse.

ERROR 6: Failed to initialize PROJ.4 with `+proj=tmerc +lat_0=49 +lon_0=-2 
+k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m 
+no_defs'

I'm sorry I can't offer any sort of useful suggestion.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Feb  2 11:13:54 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb  2 11:14:14 2010
Subject: [gdal-dev] Re: Proposal: gdal_muladd.py
In-Reply-To: <20100202091245.6ad76982@asigrid01>
References: <2DB710A4-6972-4298-9798-C4ABD201E848@axensten.se>
	<eb502d881001250840r1c2a51d1l17fdb67fca10208f@mail.gmail.com>
	<931f8ea91001251838w1c427827r61fb9cf2f8a27852@mail.gmail.com>
	<eba00f2b1001251857o109f5dafh66d224f22f967a1f@mail.gmail.com>
	<20100131181853.3698af47@mac1.local.net>
	<9520510A-60F1-4C74-8DBE-458A8B37C229@mac.com>
	<20100201090848.5805e88c@asigrid01>
	<E51B62EA-21C7-4213-8E2A-DD2F9BA3C8B2@mac.com>
	<loom.20100202T081730-534@post.gmane.org>
	<20100202091245.6ad76982@asigrid01>
Message-ID: <4B684F42.2000207@pobox.com>

Antonio Valentino wrote:
> Anyway, IMHO the point here is not to decide if we have to
> *modify* the diff function so that it returns abs(b1-b2).
> Greg asked to add a new one ( abs(b1-b2) ) to the *base set* of pixel
> functions.
> Stated that there is no technical difficulty to do this I'm wondering
> what is the Frank's mind about the question.

Antonio,

I think including abs(b1-b2) just demonstrates that we haven't come
up with a convenient way of stacking more basic operations (difference
and abs).

Honestly, I'm a bit ambivalent about fleshing out the use of
pixel operations in VRT files and I've never used them myself.
I think I would prefer to wait for a more generalized expression
evaluation mechanism for VRT or possibly as a distinct driver.

However, if there are other GDAL developers keen on this functionality,
and willing to take responsibility for integration, documentation and
support then I'm willing to let them proceed.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From gantonio.castillo at gmail.com  Tue Feb  2 12:11:52 2010
From: gantonio.castillo at gmail.com (Antonio Castillo)
Date: Tue Feb  2 12:11:56 2010
Subject: [gdal-dev] trying create a new SHP with Ogr2ogr from ODBC: SQL
	SERVER
Message-ID: <b334ae7f1002020911l19c90797p8551314245a1f799@mail.gmail.com>

Good morning for all

I'm begin to work with ogr2ogr, and i'm trying create a new .shp file from a
connection ODBC, but when i add the .shp file created in MapWindow or in
Quantum GIS these no display the points in the map window,when i open the
attribute table window of my .shp file, i can see all the data and
attributes in the grid,  but i don't see them in the Map Window.

*i can see what the bounding box properties is set in 0*

what do i?m doing wrong?

this is the command for ogr2ogr

ogr2ogr -f "ESRI Shapefile" -a_srs "EPSG:4326" "puentes.shp"
"ODBC:INACMASQL"  -nlt POINT -sql "SELECT
p.nombre,t.latitud,t.longitud,t.altura FROM puente p,trayectoria t WHERE
p.id_trajectory = t.id_trayectoria"

than you for you help!



-- 
Ing Germ?n Antonio Castillo P.


---------------------------------------
www.AcaroLabs.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100202/b2096c29/attachment.html
From jgomezdans at gmail.com  Tue Feb  2 12:33:05 2010
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Tue Feb  2 12:41:08 2010
Subject: [gdal-dev] trying create a new SHP with Ogr2ogr from ODBC: SQL 
	SERVER
In-Reply-To: <b334ae7f1002020911l19c90797p8551314245a1f799@mail.gmail.com>
References: <b334ae7f1002020911l19c90797p8551314245a1f799@mail.gmail.com>
Message-ID: <91d218431002020933i4aa2e8b4hf78971a4e4ecd717@mail.gmail.com>

Hi

On 2 February 2010 17:11, Antonio Castillo <gantonio.castillo@gmail.com>wrote:

> ogr2ogr -f "ESRI Shapefile" -a_srs "EPSG:4326" "puentes.shp"
> "ODBC:INACMASQL"  -nlt POINT -sql "SELECT
> p.nombre,t.latitud,t.longitud,t.altura FROM puente p,trayectoria t WHERE
> p.id_trajectory = t.id_trayectoria"


I think your problem stems from the fact that the DBF created in the
previous command has two fields that need to be related to a point geometry.
There's an example in how to translate this query into a virtual dataset,
which can then be translated into a shapefile easily in <
http://www.gdal.org/ogr/drv_vrt.html>. Not tested, but basically create a
file called the following file:

<OGRVRTDataSource>
    <OGRVRTLayer name="MyQuery">
        <SrcDataSource>ODBC:INACMASQL</SrcDataSource>
*        <SrcSQL*>SELECT p.nombre AS nombre,t.latitud AS
lat,t.longitud AS long,t.altura AS altura FROM puente p,trayectoria t
WHERE p.id_trajectory = t.id_trayectoria</SrcSQL>
	<GeometryType>wkbPoint</GeometryType>
        <LayerSRS>WGS84</LayerSRS>
	<GeometryField encoding="PointFromColumns" x="long" y="lat"/>
    </OGRVRTLayer>
</OGRVRTDataSource>


and then convert it into a Shapefile using ogr2ogr.

Hope that helps!
Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100202/51e9c7e7/attachment.html
From debeaudette at ucdavis.edu  Tue Feb  2 13:49:36 2010
From: debeaudette at ucdavis.edu (Dylan Beaudette)
Date: Tue Feb  2 13:47:16 2010
Subject: [gdal-dev] Raster algebra with Gdal and Python
In-Reply-To: <4B6815F7.5000706@sarvision.nl>
References: <20100131204022.22b9c933.alexander.bruy@gmail.com>
	<66a45d6d1002012301n5c61378ai861723c4f749239d@mail.gmail.com>
	<4B6815F7.5000706@sarvision.nl>
Message-ID: <201002021049.36576.dylan.beaudette@gmail.com>

On Tuesday 02 February 2010, Vincent Schut wrote:
> On 02/02/2010 08:01 AM, Alexander Bruy wrote:
> > Hi again,
> >
> > with your help I've fix problem with "integer overflow" and now I get
> > correct results.
> >
> > Also I clean up my code for reduce memory usage but problem with large
> > files is remain. I have raster with size 11779*10663 and 5 bands. When I
> > calculate NDVI on Linux box (2 Gb RAM, 2Gb swap, GDAL 1.6.3) all works
> > fine and I get correct results.Peak memory consumption during this
> > operation is 1900 Mb RAM and 300 Mb swap (monitored with htop).
> >
> > When I run same code with same raster on Windows box (2 Gb RAM, swap size
> > is selected by OS ~1.3 Gb, GDAL 1.6.3) I get MemoryError. Peak memory
> > consumption during this operation is 600 Mb RAM and 700 Mb swap. I've try
> > smaller raster with size
> > 8500*7600 pixels but get MemoryError too.
>
> Alexander,
>
> if you want your raster algebra to be independent of raster size, you'll
> have to resort to do the processing in a loop, each time processing a
> part of the input(s), writing the result, and so on.
> Easiest would be (to program) to loop over the image lines. Read a line
> for each input, calculate the resulting line, write that line to the
> output, and repeat.
> Performance-wise, it could be better to calculate in blocks of lines,
> for example 50 lines per iteration.
> This of course gets more complicated when your calculations include
> neighbourhood expressions.
>
> Vincent.
>

Not to rain on anyone's parade... but this type of operation tends to scale 
much better in tools that are row-based, and not memory bound, i.e. GRASS. 

Cheers,
Dylan


-- 
Dylan Beaudette
Soil Resource Laboratory
http://casoilresource.lawr.ucdavis.edu/
University of California at Davis
530.754.7341
From powerphysics at hotmail.com  Tue Feb  2 16:01:22 2010
From: powerphysics at hotmail.com (Mattias Carlsson)
Date: Tue Feb  2 16:02:25 2010
Subject: [gdal-dev] ogr2ogr .SHP to .KML conversion problem
Message-ID: <COL117-W10EA172F45B51EEC6BCBF9DB570@phx.gbl>


Hi,

I am trying to learn how to use ogr2ogr to convert a shapefile to kml, but fail to do so and cannot understand whether I am at all on the right track or completely lost (very much beginner in GIS). I would like to convert either, or all, of the files on <http://www.nationalgrid.com/uk/LandandDevelopment/DDC/GasElectricNW/undergroundcables/shape/> to .kml and try using

>ogr2ogr -f "KML" LINE.kml LINE.shp

but get a buffer overflow (I can send a backtrace if this would help):

>*** buffer overflow detected ***: ogr2ogr terminated

(btw, I am using Ubuntu 9.10)

Apologies if this is the wrong forum or totally basic, but after many frustrations I am getting desperate and, please, please, guide me in the right direction...

Thanks!

\Mattias
 		 	   		  
_________________________________________________________________
Your E-mail and More On-the-Go. Get Windows Live Hotmail Free.
https://signup.live.com/signup.aspx?id=60969
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100202/c2ef98ae/attachment.html
From even.rouault at mines-paris.org  Tue Feb  2 16:13:53 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb  2 16:14:05 2010
Subject: [gdal-dev] Re: Proposal: gdal_muladd.py
In-Reply-To: <4B684F42.2000207@pobox.com>
References: <2DB710A4-6972-4298-9798-C4ABD201E848@axensten.se>
	<20100202091245.6ad76982@asigrid01> <4B684F42.2000207@pobox.com>
Message-ID: <201002022213.54328.even.rouault@mines-paris.org>

For the record, I had started some time ago to work on something pretty close 
to Frank's ideas. It was based on a "generic" expression evaluator that could 
accept C-like expressions ( arithmetic operators, boolean operators, numeric 
constants, a few predefined maths functions, user variables, user 
functions, ...). It could be specialized for pixel operations : the 
specialization consists in providing the necessary code to evaluate the 
variables and function calls. I'll give more details once I find where it is 
burried right now ;-).

It could potentially do more complex operations than just operations on pixels 
at same location in different images. 

If my memory are corrects, it could do things like :
* "pixel[ysize-1-y][x]" : to make an horizontal flip of an image
* "0.30 * source[0].pixel[y][x] + 0.59 * source[1].pixel[y][x] + 0.11 * 
source[2].pixel[y][x]" : to compute a grey level from RGB
* "sum(j,-1,1,sum(i,-1,1,abs(pixel[y+j][x+i] - pixel[y][x]))) / 8" : 
equivalent of the TPI algorithm of gdaldem
* "abs(source[0].pixel[y][x] - source[1].pixel[y][x])" : for the example 
discussed in the previous post in this thread ;-)

This worked pretty well but of course the performance of an interpretator is 
way much slower than the equivalent compiled code.

Best regards,

Even

Le Tuesday 02 February 2010 17:13:54 Frank Warmerdam, vous avez ?crit?:
> Antonio Valentino wrote:
> > Anyway, IMHO the point here is not to decide if we have to
> > *modify* the diff function so that it returns abs(b1-b2).
> > Greg asked to add a new one ( abs(b1-b2) ) to the *base set* of pixel
> > functions.
> > Stated that there is no technical difficulty to do this I'm wondering
> > what is the Frank's mind about the question.
>
> Antonio,
>
> I think including abs(b1-b2) just demonstrates that we haven't come
> up with a convenient way of stacking more basic operations (difference
> and abs).
>
> Honestly, I'm a bit ambivalent about fleshing out the use of
> pixel operations in VRT files and I've never used them myself.
> I think I would prefer to wait for a more generalized expression
> evaluation mechanism for VRT or possibly as a distinct driver.
>
> However, if there are other GDAL developers keen on this functionality,
> and willing to take responsibility for integration, documentation and
> support then I'm willing to let them proceed.
>
> Best regards,


From szekerest at gmail.com  Tue Feb  2 16:18:13 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Feb  2 16:18:17 2010
Subject: [gdal-dev] Projection of GEOTIFF in C# problems
In-Reply-To: <89689A33C90148B0A2A9A1EBFBC52FD2@frej>
References: <89689A33C90148B0A2A9A1EBFBC52FD2@frej>
Message-ID: <f3b73b7d1002021318o1669e584rad86c6b2321b4bc6@mail.gmail.com>

Patrik,

The GDALInfo csharp sample application doesn't exactly follow the C version
by producing the same output. However it's pretty straight forward to report
the projection similarly using the C# API.
I've just added the required changes in the development version:

http://trac.osgeo.org/gdal/changeset/18705

Best regards,

Tamas



2010/2/2 Patrik Svensson <patsv@bredband.net>

>  Hi all,
>
> I have problem with geotiff files created with gdal_translate when I try to
> read them with the C# bindings.
>
> So I tested it with the GDALInfo commands.
>
> GDALInfo.exe  (The c-api) will output the correct projection information:
>
>
>
> *C:\tmp\release-1500-x64-gdal-mapserver\bin>gdal\apps\GDALInfo.exe
> w:\Lmv\F*
>
> *\7h0a.tif*
>
> *Driver: GTiff/GeoTIFF*
>
> *Files: w:\Lmv\Foto\7h\7h0a.tif*
>
> *Size is 5500, 5500 *
>
> *Coordinate System is `'*
>
> *GCP Projection =*
>
> *PROJCS["RT90 2.5 gon V",*
>
> *    **GEOGCS["RT90",*
>
> *        DATUM["Rikets_koordinatsystem_1990",*
>
> *            **SPHEROID["Bessel 1841",6377397.155,299.1528128000009,*
>
> *                AUTHORITY["EPSG","7004"]],*
>
> *            AUTHORITY["EPSG","6124"]],*
>
> *        PRIMEM["Greenwich",0],*
>
> *        UNIT["degree",0.0174532925199433],*
>
> *        AUTHORITY["EPSG","4124"]],*
>
> *    PROJECTION["Transverse_Mercator"],*
>
> *    PARAMETER["latitude_of_origin",0],*
>
> *    PARAMETER["central_meridian",15.80827777777778],*
>
> *    PARAMETER["scale_factor",1],*
>
> *    PARAMETER["false_easting",1500000],*
>
> *    PARAMETER["false_northing",0],*
>
> *    UNIT["metre",1,*
>
> *        AUTHORITY["EPSG","9001"]],*
>
> *    AUTHORITY["EPSG","3021"]]*
>
> *GCP[  0]: Id=1, Info=*
>
> *          (250,250) -> (1550000,6405000,0)*
>
> *GCP[  1]: Id=2, Info=*
>
> *          (5250,250) -> (1555000,6405000,0)*
>
> *GCP[  2]: Id=3, Info=*
>
> *          (250,5250) -> (1550000,6400000,0)*
>
> *GCP[  3]: Id=4, Info=*
>
> *          (5250,5250) -> (1555000,6400000,0)*
>
> *Metadata:*
>
> *  AREA_OR_POINT=Area*
>
> *Image Structure Metadata:*
>
> *  INTERLEAVE=BAND*
>
> *Corner Coordinates:*
>
> *Upper Left  (    0.0,    0.0)*
>
> *Lower Left  (    0.0, 5500.0)*
>
> *Upper Right ( 5500.0,    0.0)*
>
> *Lower Right ( 5500.0, 5500.0)*
>
> *Center      ( 2750.0, 2750.0)*
>
> *Band 1 Block=5500x1 Type=Byte, ColorInterp=Gray*
>
>
>
> But the c-sharp version has problems with projection string as it only
> reports this, lacking the projection data:
>
> *C:\tmp\release-1500-x64-gdal-mapserver\bin>gdal\csharp\GDALInfo.exe
> w:\Lmv\Foto\*
>
> *7h\7h0a.tif*
>
> * *
>
> *Raster dataset parameters:*
>
> *  Projection:*
>
> *  RasterCount: 1*
>
> *  RasterSize (5500,5500)*
>
> *Using driver GeoTIFF*
>
> *  Image Structure Metadata:*
>
> *    0:  INTERLEAVE=BAND*
>
> * *
>
> *Corner Coordinates:*
>
> *  Upper Left (0, 0)*
>
> *  Lower Left (0, 5500)*
>
> *  Upper Right (5500, 0)*
>
> *  Lower Right (5500, 5500)*
>
> *  Center (2750, 2750)*
>
> * *
>
> *GCP Projection:*
>
> *GCP[0]: Id=1, Info=*
>
> *          (250,250) -> (1550000,6405000,0)*
>
> * *
>
> *GCP[1]: Id=2, Info=*
>
> *          (5250,250) -> (1555000,6405000,0)*
>
> * *
>
> *GCP[2]: Id=3, Info=*
>
> *          (250,5250) -> (1550000,6400000,0)*
>
> * *
>
> *GCP[3]: Id=4, Info=*
>
> *          (5250,5250) -> (1555000,6400000,0)*
>
> * *
>
> * *
>
> *GCP Equivalent geotransformation parameters:*
>
> *t[0] = 1549750*
>
> *t[1] = 1*
>
> *t[2] = 0*
>
> *t[3] = 6405250*
>
> *t[4] = 0*
>
> *t[5] = -1*
>
> * *
>
> *Band 1 :*
>
> *   DataType: Byte*
>
> *   ColorInterpretation: Gray*
>
> *   Description:*
>
> *   Size (5500,5500)*
>
> *   BlockSize (5500,1)*
>
> * *
>
> What can I do to get the correct string to give to SpatialReference?
>
> (Tried both GDAL 1.6 and 1.7)
>
> Regards
>
> Patrik Svensson
>
> * *
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100202/29c0d16e/attachment-0001.html
From Chris.Barker at noaa.gov  Tue Feb  2 17:09:48 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Tue Feb  2 17:05:57 2010
Subject: [gdal-dev] Re: Proposal: gdal_muladd.py
In-Reply-To: <201002022213.54328.even.rouault@mines-paris.org>
References: <2DB710A4-6972-4298-9798-C4ABD201E848@axensten.se>
	<20100202091245.6ad76982@asigrid01> <4B684F42.2000207@pobox.com>
	<201002022213.54328.even.rouault@mines-paris.org>
Message-ID: <4B68A2AC.8020806@noaa.gov>

Even Rouault wrote:
> For the record, I had started some time ago to work on something pretty close 
> to Frank's ideas. It was based on a "generic" expression evaluator that could 
> accept C-like expressions ( arithmetic operators, boolean operators, numeric 
> constants, a few predefined maths functions, user variables, user 
> functions, ...). It could be specialized for pixel operations :

> If my memory are corrects, it could do things like :
> * "pixel[ysize-1-y][x]" : to make an horizontal flip of an image
> * "0.30 * source[0].pixel[y][x] + 0.59 * source[1].pixel[y][x] + 0.11 * 
> source[2].pixel[y][x]" : to compute a grey level from RGB
> * "sum(j,-1,1,sum(i,-1,1,abs(pixel[y+j][x+i] - pixel[y][x]))) / 8" : 
> equivalent of the TPI algorithm of gdaldem
> * "abs(source[0].pixel[y][x] - source[1].pixel[y][x])" : for the example 
> discussed in the previous post in this thread ;-)

This sounds a while lot like numpy, which is already supported by the 
python wrappers. Why not just use python (or one of the other supported 
scripting languages, at least if they have something numpy-like) as your 
scripting language?

It might be nice to write a package to make some of the loading and 
setting up easier, but the math stuff is all there in numpy.

-Chris




-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From gregcoats at mac.com  Tue Feb  2 18:06:28 2010
From: gregcoats at mac.com (Greg Coats)
Date: Tue Feb  2 18:06:51 2010
Subject: [gdal-dev] ogr2ogr .SHP to .KML conversion problem
In-Reply-To: <COL117-W10EA172F45B51EEC6BCBF9DB570@phx.gbl>
References: <COL117-W10EA172F45B51EEC6BCBF9DB570@phx.gbl>
Message-ID: <6225F5AF-2ABF-40D3-9C44-A478F865EDAB@mac.com>

Use gdal_translate --version

Since you told me that you are using GDAL version 1.5.0 from December 2007, I suggest that you upgrade to GDAL 1.7.0 from January 2010. Greg

On Feb 2, 2010, at 4:01 PM, Mattias Carlsson wrote:

> Hi,
> 
> I am trying to learn how to use ogr2ogr to convert a shapefile to kml, but fail to do so and cannot understand whether I am at all on the right track or completely lost (very much beginner in GIS). I would like to convert either, or all, of the files on <http://www.nationalgrid.com/uk/LandandDevelopment/DDC/GasElectricNW/undergroundcables/shape/> to .kml and try using
> 
> >ogr2ogr -f "KML" LINE.kml LINE.shp
> 
> but get a buffer overflow (I can send a backtrace if this would help):
> 
> >*** buffer overflow detected ***: ogr2ogr terminated
> 
> (btw, I am using Ubuntu 9.10)
> 
> Apologies if this is the wrong forum or totally basic, but after many frustrations I am getting desperate and, please, please, guide me in the right direction...
> 
> Thanks!
> 
> \Mattias
> 
> Your E-mail and More On-the-Go. Get Windows Live Hotmail Free. Sign up now. _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100202/61e29d77/attachment.html
From even.rouault at mines-paris.org  Tue Feb  2 18:22:21 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb  2 18:22:34 2010
Subject: AW: [gdal-dev] Re: ogr2ogr PGSQL_OGR_FID is not work
In-Reply-To: <AE9E61FB4CB9B74B8D957FF9536FEE93A5C17C@exbe7.intra.dlr.de>
References: <AE9E61FB4CB9B74B8D957FF9536FEE9375B4FE@exbe7.intra.dlr.de>
	<loom.20100201T160500-545@post.gmane.org>
	<AE9E61FB4CB9B74B8D957FF9536FEE93A5C17C@exbe7.intra.dlr.de>
Message-ID: <201002030022.22963.even.rouault@mines-paris.org>

The doc is not very clear about what PGSQL_OGR_FID really does, but my 
understanding of the code and its history is that it was introduced at a time 
when OGR had no yet any autodetection of the name of the primary key column. 
However, it can still be usefull today in cases where no primary key is 
defined.

Anyway, I can say for sure that for the write part of the driver, setting 
PGSQL_OGR_FID is without any effect. The OGC_FID name is hard-coded when 
creating a table.

Le Tuesday 02 February 2010 12:42:52 Christian.Strobl@dlr.de, vous avez 
?crit?:
> hi jukka,
>
> thanks for your hint. i have read the section too fast, so PGSQL_OGR_FID
> seems to be an environment variable. i tried also your suggestion, it's the
> right way to define environment variables for windows
>
> SET PGSQL_OGR_FID=myid
>
> but there is no difference neither. i will try it later for linux with
> export.
>
> does anybody know if this PGSQL_OGR_FID option is working at all?
>
> thanks
> christian
>
> p.s. i tried also
>
> SET PGSQL_OGR_FID="myid"
> SET PGSQL_OGR_FID='myid'
>
> > -----Urspr?ngliche Nachricht-----
> > Von: gdal-dev-bounces@lists.osgeo.org
> > [mailto:gdal-dev-bounces@lists.osgeo.org] Im Auftrag von
> > Jukka Rahkonen
> > Gesendet: Montag, 1. Februar 2010 16:06
> > An: gdal-dev@lists.osgeo.org
> > Betreff: [gdal-dev] Re: ogr2ogr PGSQL_OGR_FID is not work
> >
> >  <Christian.Strobl <at> dlr.de> writes:
> > > if i try the following command
> > >
> > > ogr2ogr -f PostgreSQL -nln newlayer -nlt MULTIPOLYGON
> > > PG:"host=localhost
> >
> > user=admin password=xxx
> >
> > > dbname=mydb" PG:"host=localhost user=admin password=yyy
> >
> > dbname=otherdb"
> > oldlayer -lco PGSQL_OGR_FID=myid
> >
> > > everything works fine but the primary key remains at the column
> > > "ogc_fid" not
> >
> > at the column "myid".
> >
> > > thanks for every help
> >
> > Hi,
> >
> > I have never tried that but it seems to by in the manual page
> > under subtitle "Environment variables" and not under "Layer
> > creation options".  With Windows it would mean giving a command
> >
> > SET PGSQL_OGR_FID=myid from command line before running
> > ogr2ogr. Must be something similar with Linux.
> >
> > -Jukka-
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From ivan.lucena at pmldnet.com  Tue Feb  2 19:48:24 2010
From: ivan.lucena at pmldnet.com (Ivan)
Date: Tue Feb  2 19:48:32 2010
Subject: [gdal-dev] Re: Proposal: gdal_muladd.py
In-Reply-To: <201002022213.54328.even.rouault@mines-paris.org>
References: <2DB710A4-6972-4298-9798-C4ABD201E848@axensten.se>	<20100202091245.6ad76982@asigrid01>
	<4B684F42.2000207@pobox.com>
	<201002022213.54328.even.rouault@mines-paris.org>
Message-ID: <4B68C7D8.7090308@pmldnet.com>

Even,

That was a little thing that I start years ago. Here is the usage:

{{{
# =============================================================================
# Usage Message
# =============================================================================

def Usage():
     print 'Usage: mathbox.py [-formula "formula"] [outfile] [infile*]'
     print
     print '  -formula      Formula to be applied on input pixels values'
     print '                assigning the results to the output.'
     print '                Use letters "a" to "j" as variables to refers'
     print '                to the list of infiles in alphabetic order'
     print '  outfifile     Name of the output file'
     print '  infile        Name of the input file(s)'
     print
     print '  Notes: Images will be identified by the order of file name as "a,b,c...'
     print
     print 'Examples:'
     print
     print '  mathbox.py -formula "a+b/2" result.tif dist_roads.tif slope.tif'
     print '  mathbox.py -formula "a-255" correct.tif original.tif'
     print
     sys.exit(1)
}}}

It is based on the "eval()" Python function, so it will actually execute the formula as it was
entered by the user. Please let me know if that would be of any interest.

Regards,

Ivan

Even Rouault wrote:
> For the record, I had started some time ago to work on something pretty close 
> to Frank's ideas. It was based on a "generic" expression evaluator that could 
> accept C-like expressions ( arithmetic operators, boolean operators, numeric 
> constants, a few predefined maths functions, user variables, user 
> functions, ...). It could be specialized for pixel operations : the 
> specialization consists in providing the necessary code to evaluate the 
> variables and function calls. I'll give more details once I find where it is 
> burried right now ;-).
> 
> It could potentially do more complex operations than just operations on pixels 
> at same location in different images. 
> 
> If my memory are corrects, it could do things like :
> * "pixel[ysize-1-y][x]" : to make an horizontal flip of an image
> * "0.30 * source[0].pixel[y][x] + 0.59 * source[1].pixel[y][x] + 0.11 * 
> source[2].pixel[y][x]" : to compute a grey level from RGB
> * "sum(j,-1,1,sum(i,-1,1,abs(pixel[y+j][x+i] - pixel[y][x]))) / 8" : 
> equivalent of the TPI algorithm of gdaldem
> * "abs(source[0].pixel[y][x] - source[1].pixel[y][x])" : for the example 
> discussed in the previous post in this thread ;-)
> 
> This worked pretty well but of course the performance of an interpretator is 
> way much slower than the equivalent compiled code.
> 
> Best regards,
> 
> Even
> 
> Le Tuesday 02 February 2010 17:13:54 Frank Warmerdam, vous avez ?crit :
>> Antonio Valentino wrote:
>>> Anyway, IMHO the point here is not to decide if we have to
>>> *modify* the diff function so that it returns abs(b1-b2).
>>> Greg asked to add a new one ( abs(b1-b2) ) to the *base set* of pixel
>>> functions.
>>> Stated that there is no technical difficulty to do this I'm wondering
>>> what is the Frank's mind about the question.
>> Antonio,
>>
>> I think including abs(b1-b2) just demonstrates that we haven't come
>> up with a convenient way of stacking more basic operations (difference
>> and abs).
>>
>> Honestly, I'm a bit ambivalent about fleshing out the use of
>> pixel operations in VRT files and I've never used them myself.
>> I think I would prefer to wait for a more generalized expression
>> evaluation mechanism for VRT or possibly as a distinct driver.
>>
>> However, if there are other GDAL developers keen on this functionality,
>> and willing to take responsibility for integration, documentation and
>> support then I'm willing to let them proceed.
>>
>> Best regards,
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


From gantonio.castillo at gmail.com  Tue Feb  2 19:51:24 2010
From: gantonio.castillo at gmail.com (Antonio Castillo)
Date: Tue Feb  2 19:51:26 2010
Subject: [gdal-dev] trying create a new SHP with Ogr2ogr from ODBC: SQL 
	SERVER
In-Reply-To: <91d218431002020933i4aa2e8b4hf78971a4e4ecd717@mail.gmail.com>
References: <b334ae7f1002020911l19c90797p8551314245a1f799@mail.gmail.com>
	<91d218431002020933i4aa2e8b4hf78971a4e4ecd717@mail.gmail.com>
Message-ID: <b334ae7f1002021651o687aa8a4waa727431b496e25a@mail.gmail.com>

Hello Jose

I can create the Shapefile from "ODBC:SQL Server 2008" connection, with the
OGR VRT :D

thank you!!! :P

the .ovf file
----------------------
puentes.ovf
----------------------
<OGRVRTDataSource>
    <OGRVRTLayer name="Puentes">
        <SrcDataSource>ODBC:INACMASQL</SrcDataSource>
        <SrcSQL>SELECT p.nombre AS nombre,replace(t.latitud,',','.') AS
lat,replace(t.longitud,',','.') AS long,replace(t.altura,',','.')  AS altura
FROM puente p,trayectoria t WHERE p.id_trajectory =
t.id_trayectoria</SrcSQL>
     <GeometryType>wkbPoint</GeometryType>
        <LayerSRS>WGS84</LayerSRS>
    <GeometryField encoding="PointFromColumns" x="long" y="lat"/>
    </OGRVRTLayer>
</OGRVRTDataSource>

-----------------------------
and ogr2ogr command
-------------------------------
ogr2ogr -f "ESRI Shapefile" puentes.shp puentes.ovf


On Tue, Feb 2, 2010 at 12:33 PM, Jose Gomez-Dans <jgomezdans@gmail.com>wrote:

> Hi
>
> On 2 February 2010 17:11, Antonio Castillo <gantonio.castillo@gmail.com>wrote:
>
>> ogr2ogr -f "ESRI Shapefile" -a_srs "EPSG:4326" "puentes.shp"
>> "ODBC:INACMASQL"  -nlt POINT -sql "SELECT
>> p.nombre,t.latitud,t.longitud,t.altura FROM puente p,trayectoria t WHERE
>> p.id_trajectory = t.id_trayectoria"
>
>
> I think your problem stems from the fact that the DBF created in the
> previous command has two fields that need to be related to a point geometry.
> There's an example in how to translate this query into a virtual dataset,
> which can then be translated into a shapefile easily in <
> http://www.gdal.org/ogr/drv_vrt.html>. Not tested, but basically create a
> file called the following file:
>
> <OGRVRTDataSource>
>     <OGRVRTLayer name="MyQuery">
>         <SrcDataSource>ODBC:INACMASQL</SrcDataSource>
> *        <SrcSQL*>SELECT p.nombre AS nombre,t.latitud AS lat,t.longitud AS long,t.altura AS altura FROM puente p,trayectoria t WHERE p.id_trajectory = t.id_trayectoria</SrcSQL>
>
>
> 	<GeometryType>wkbPoint</GeometryType>
>         <LayerSRS>WGS84</LayerSRS>
> 	<GeometryField encoding="PointFromColumns" x="long" y="lat"/>
>     </OGRVRTLayer>
>
>
> </OGRVRTDataSource>
>
>
> and then convert it into a Shapefile using ogr2ogr.
>
> Hope that helps!
> Jose
>



-- 
Ing Germ?n Antonio Castillo P.


---------------------------------------
www.AcaroLabs.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100202/25c2e96c/attachment.html
From schut at sarvision.nl  Wed Feb  3 03:12:08 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Feb  3 03:12:19 2010
Subject: [gdal-dev] Re: Proposal: gdal_muladd.py
In-Reply-To: <4B68C7D8.7090308@pmldnet.com>
References: <2DB710A4-6972-4298-9798-C4ABD201E848@axensten.se>	<20100202091245.6ad76982@asigrid01>	<4B684F42.2000207@pobox.com>	<201002022213.54328.even.rouault@mines-paris.org>
	<4B68C7D8.7090308@pmldnet.com>
Message-ID: <4B692FD8.8000600@sarvision.nl>

On 02/03/2010 01:48 AM, Ivan wrote:
> Even,
>
> That was a little thing that I start years ago. Here is the usage:
>
> {{{
> # 
> ============================================================================= 
>
> # Usage Message
> # 
> ============================================================================= 
>
>
> def Usage():
>     print 'Usage: mathbox.py [-formula "formula"] [outfile] [infile*]'
>     print
>     print '  -formula      Formula to be applied on input pixels values'
>     print '                assigning the results to the output.'
>     print '                Use letters "a" to "j" as variables to refers'
>     print '                to the list of infiles in alphabetic order'
>     print '  outfifile     Name of the output file'
>     print '  infile        Name of the input file(s)'
>     print
>     print '  Notes: Images will be identified by the order of file 
> name as "a,b,c...'
>     print
>     print 'Examples:'
>     print
>     print '  mathbox.py -formula "a+b/2" result.tif dist_roads.tif 
> slope.tif'
>     print '  mathbox.py -formula "a-255" correct.tif original.tif'
>     print
>     sys.exit(1)
> }}}
>
> It is based on the "eval()" Python function, so it will actually 
> execute the formula as it was
> entered by the user. Please let me know if that would be of any interest.
>
> Regards,
>
> Ivan
Some years ago I've created something similar, I still use it from time 
to time. See attached python script (if that survives the list. we'll 
see...). As far as I'm concerned the code is public (it's not that fancy 
:)). I'm not willing to maintain this actively as part of gdal, but feel 
free to adapt/adopt/use/mix'n'match it.
O by the way, it does more or less the same as Ivan's (apply a formula 
or formula's on pixels on input bands/sources), but is pretty flexible 
as you have all of numpy & python available in your formula. Furthermore 
it evaluates per line, so no neighbourhood functions possible, but also 
no memory limits :-)

Vincent.
>
> Even Rouault wrote:
>> For the record, I had started some time ago to work on something 
>> pretty close to Frank's ideas. It was based on a "generic" expression 
>> evaluator that could accept C-like expressions ( arithmetic 
>> operators, boolean operators, numeric constants, a few predefined 
>> maths functions, user variables, user functions, ...). It could be 
>> specialized for pixel operations : the specialization consists in 
>> providing the necessary code to evaluate the variables and function 
>> calls. I'll give more details once I find where it is burried right 
>> now ;-).
>>
>> It could potentially do more complex operations than just operations 
>> on pixels at same location in different images.
>> If my memory are corrects, it could do things like :
>> * "pixel[ysize-1-y][x]" : to make an horizontal flip of an image
>> * "0.30 * source[0].pixel[y][x] + 0.59 * source[1].pixel[y][x] + 0.11 
>> * source[2].pixel[y][x]" : to compute a grey level from RGB
>> * "sum(j,-1,1,sum(i,-1,1,abs(pixel[y+j][x+i] - pixel[y][x]))) / 8" : 
>> equivalent of the TPI algorithm of gdaldem
>> * "abs(source[0].pixel[y][x] - source[1].pixel[y][x])" : for the 
>> example discussed in the previous post in this thread ;-)
>>
>> This worked pretty well but of course the performance of an 
>> interpretator is way much slower than the equivalent compiled code.
>>
>> Best regards,
>>
>> Even
>>
>> Le Tuesday 02 February 2010 17:13:54 Frank Warmerdam, vous avez ?crit :
>>> Antonio Valentino wrote:
>>>> Anyway, IMHO the point here is not to decide if we have to
>>>> *modify* the diff function so that it returns abs(b1-b2).
>>>> Greg asked to add a new one ( abs(b1-b2) ) to the *base set* of pixel
>>>> functions.
>>>> Stated that there is no technical difficulty to do this I'm wondering
>>>> what is the Frank's mind about the question.
>>> Antonio,
>>>
>>> I think including abs(b1-b2) just demonstrates that we haven't come
>>> up with a convenient way of stacking more basic operations (difference
>>> and abs).
>>>
>>> Honestly, I'm a bit ambivalent about fleshing out the use of
>>> pixel operations in VRT files and I've never used them myself.
>>> I think I would prefer to wait for a more generalized expression
>>> evaluation mechanism for VRT or possibly as a distinct driver.
>>>
>>> However, if there are other GDAL developers keen on this functionality,
>>> and willing to take responsibility for integration, documentation and
>>> support then I'm willing to let them proceed.
>>>
>>> Best regards,
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdal_calc.py
Type: text/x-python
Size: 13673 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100203/41287761/gdal_calc-0001.py
From powerphysics at hotmail.com  Wed Feb  3 03:14:05 2010
From: powerphysics at hotmail.com (Mattias Carlsson)
Date: Wed Feb  3 03:14:10 2010
Subject: [gdal-dev] ogr2ogr .SHP to .KML conversion problem
In-Reply-To: <6225F5AF-2ABF-40D3-9C44-A478F865EDAB@mac.com>
References: <COL117-W10EA172F45B51EEC6BCBF9DB570@phx.gbl>,
	<6225F5AF-2ABF-40D3-9C44-A478F865EDAB@mac.com>
Message-ID: <COL117-W5780054A18E1549C8D7D18DB560@phx.gbl>


Thanks, that says version is 1.5.4. I guess an upgrade might do the trick. However, as I am very green in Linux, I have yet to compile my first source and would appreciate any simpler way, i.e. pre-compiled binaries. Is there any such way, or any good reference for learning necessary basics regarding compilation?  /Mattias 

Subject: Re: [gdal-dev] ogr2ogr .SHP to .KML conversion problem
From: gregcoats@mac.com
Date: Tue, 2 Feb 2010 18:06:28 -0500
CC: gdal-dev@lists.osgeo.org
To: powerphysics@hotmail.com



Use gdal_translate --version
Since you told me that you are using GDAL version 1.5.0 from December 2007, I suggest that you upgrade to GDAL 1.7.0 from January 2010. Greg
On Feb 2, 2010, at 4:01 PM, Mattias Carlsson wrote:Hi,

I am trying to learn how to use ogr2ogr to convert a shapefile to kml, but fail to do so and cannot understand whether I am at all on the right track or completely lost (very much beginner in GIS). I would like to convert either, or all, of the files on <http://www.nationalgrid.com/uk/LandandDevelopment/DDC/GasElectricNW/undergroundcables/shape/> to .kml and try using

>ogr2ogr -f "KML" LINE.kml LINE.shp

but get a buffer overflow (I can send a backtrace if this would help):

>*** buffer overflow detected ***: ogr2ogr terminated

(btw, I am using Ubuntu 9.10)

Apologies if this is the wrong forum or totally basic, but after many frustrations I am getting desperate and, please, please, guide me in the right direction...

Thanks!

\Mattias

Your E-mail and More On-the-Go. Get Windows Live Hotmail Free. Sign up now. _______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
 		 	   		  
_________________________________________________________________
Hotmail: Trusted email with powerful SPAM protection.
https://signup.live.com/signup.aspx?id=60969
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100203/d323daf2/attachment.html
From vadivelan_gi at yahoo.co.in  Wed Feb  3 08:29:35 2010
From: vadivelan_gi at yahoo.co.in (vadi_nabble)
Date: Wed Feb  3 08:29:37 2010
Subject: [gdal-dev] Unable to convert Shape file from GML file (ERROR 1: XML
 Parsing Error:)
Message-ID: <1265203775134-4507144.post@n2.nabble.com>


Hi,
 I am trying to learn OGR APIs.
 For that i took "ogr2ogr.cpp" file from (gdal-1.6.3\apps) and successfully
build the exe.

 I was able to successfully convert Shape file to GML using following
command:
 <myexefilename> -f "gml" output.gml input.shp

 However, when i am trying the reverse of that, means from GML to Shape
using following command:
 <myexefilename> -f "ESRI Shapefile" output.shp input.gml

 I am getting the following error:
 ERROR 1: XML Parsing Error: unable to connect  socket for  URL
'http://schemas.opengeospatial.net/gml/2.1.2/feature.xsd'

 ERROR 1: XML Parsing Error: fatal error during schema scan
 
 I am not sure, what is causing this error. 
 Thanks, for any help in advance.

 Thanks,
 Vadivelan
-- 
View this message in context: http://n2.nabble.com/Unable-to-convert-Shape-file-from-GML-file-ERROR-1-XML-Parsing-Error-tp4507144p4507144.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From traviskirstine at gmail.com  Wed Feb  3 09:54:10 2010
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Wed Feb  3 09:54:12 2010
Subject: [gdal-dev] nodata - mask question
Message-ID: <681116191002030654i49860bd0gd385dd28f4009e20@mail.gmail.com>

I have a general question regarding how to handle the null values with
1 band byte grey scale images.  Typically I will receive a image with
pixels at the edges of a image with a  value of 0 however some of the
interior pixel values (shadow areas) share the same pixel value.  My
old approach was just to ignore the interior values and run gdalwarp
indicating the source and target nodata as 0.

Is there a method currently available to distinguish between valid and
invalid nodata values when they both share the same pixel value?



-- 
Travis K.

Toronto, Canada
------------------------------------------------------------
"She knows there's no success like failure
and that failure's no success at all."
-Bob Dylan-
------------------------------------------------------------
From antonio.valentino at tiscali.it  Wed Feb  3 10:01:36 2010
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Wed Feb  3 10:06:04 2010
Subject: [gdal-dev] Re: Proposal: gdal_muladd.py
In-Reply-To: <4B684F42.2000207@pobox.com>
References: <2DB710A4-6972-4298-9798-C4ABD201E848@axensten.se>
	<eb502d881001250840r1c2a51d1l17fdb67fca10208f@mail.gmail.com>
	<931f8ea91001251838w1c427827r61fb9cf2f8a27852@mail.gmail.com>
	<eba00f2b1001251857o109f5dafh66d224f22f967a1f@mail.gmail.com>
	<20100131181853.3698af47@mac1.local.net>
	<9520510A-60F1-4C74-8DBE-458A8B37C229@mac.com>
	<20100201090848.5805e88c@asigrid01>
	<E51B62EA-21C7-4213-8E2A-DD2F9BA3C8B2@mac.com>
	<loom.20100202T081730-534@post.gmane.org>
	<20100202091245.6ad76982@asigrid01> <4B684F42.2000207@pobox.com>
Message-ID: <20100203160136.6b5bef65@asigrid01>

Il giorno Tue, 02 Feb 2010 11:13:54 -0500
Frank Warmerdam <warmerdam@pobox.com> ha scritto:

> Antonio Valentino wrote:
> > Anyway, IMHO the point here is not to decide if we have to
> > *modify* the diff function so that it returns abs(b1-b2).
> > Greg asked to add a new one ( abs(b1-b2) ) to the *base set* of
> > pixel functions.
> > Stated that there is no technical difficulty to do this I'm
> > wondering what is the Frank's mind about the question.
> 
> Antonio,
> 
> I think including abs(b1-b2) just demonstrates that we haven't come
> up with a convenient way of stacking more basic operations (difference
> and abs).
> 
> Honestly, I'm a bit ambivalent about fleshing out the use of
> pixel operations in VRT files and I've never used them myself.
> I think I would prefer to wait for a more generalized expression
> evaluation mechanism for VRT or possibly as a distinct driver.
> 
> However, if there are other GDAL developers keen on this
> functionality, and willing to take responsibility for integration,
> documentation and support then I'm willing to let them proceed.
> 
> Best regards,

Ok Frank,
thanks for the answer.


-- 
Antonio Valentino
From chaitanya.ch at gmail.com  Wed Feb  3 10:14:07 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Feb  3 10:14:26 2010
Subject: [gdal-dev] Unable to convert Shape file from GML file (ERROR 1: 
	XML Parsing Error:)
In-Reply-To: <1265203775134-4507144.post@n2.nabble.com>
References: <1265203775134-4507144.post@n2.nabble.com>
Message-ID: <eb502d881002030714s596318aj7fdaa9103d53243c@mail.gmail.com>

Vadivelan,

GML driver uses xerces or expat library for parsing the gml data. There
might be some problem there. Besides, the driver should be able to read the
.gml file without the .xsd file. Remove the .xsd file and try again.

On Wed, Feb 3, 2010 at 6:59 PM, vadi_nabble <vadivelan_gi@yahoo.co.in>wrote:

>
> Hi,
>  I am trying to learn OGR APIs.
>  For that i took "ogr2ogr.cpp" file from (gdal-1.6.3\apps) and successfully
> build the exe.
>
>  I was able to successfully convert Shape file to GML using following
> command:
>  <myexefilename> -f "gml" output.gml input.shp
>
>  However, when i am trying the reverse of that, means from GML to Shape
> using following command:
>  <myexefilename> -f "ESRI Shapefile" output.shp input.gml
>
>  I am getting the following error:
>  ERROR 1: XML Parsing Error: unable to connect  socket for  URL
> 'http://schemas.opengeospatial.net/gml/2.1.2/feature.xsd'
>
>  ERROR 1: XML Parsing Error: fatal error during schema scan
>
>  I am not sure, what is causing this error.
>  Thanks, for any help in advance.
>
>  Thanks,
>  Vadivelan
> --
> View this message in context:
> http://n2.nabble.com/Unable-to-convert-Shape-file-from-GML-file-ERROR-1-XML-Parsing-Error-tp4507144p4507144.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100203/cf2c3b6b/attachment.html
From gregcoats at mac.com  Wed Feb  3 10:52:11 2010
From: gregcoats at mac.com (Greg Coats)
Date: Wed Feb  3 10:52:29 2010
Subject: [gdal-dev] ogr2ogr .SHP to .KML conversion problem
In-Reply-To: <COL117-W5780054A18E1549C8D7D18DB560@phx.gbl>
References: <COL117-W10EA172F45B51EEC6BCBF9DB570@phx.gbl>
	<6225F5AF-2ABF-40D3-9C44-A478F865EDAB@mac.com>
	<COL117-W5780054A18E1549C8D7D18DB560@phx.gbl>
Message-ID: <5F484156-127F-48C3-B09E-BF3A43B0302A@mac.com>

Even Rouault offers GDAL 1.7.0 compiled for Ubuntu at http://even.rouault.free.fr/

On Feb 3, 2010, at 3:14 AM, Mattias Carlsson wrote:

> Thanks, that says version is 1.5.4. I guess an upgrade might do the trick. However, as I am very green in Linux, I have yet to compile my first source and would appreciate any simpler way, i.e. pre-compiled binaries. Is there any such way, or any good reference for learning necessary basics regarding compilation?  /Mattias 
> 
> Subject: Re: [gdal-dev] ogr2ogr .SHP to .KML conversion problem
> From: gregcoats@mac.com
> Date: Tue, 2 Feb 2010 18:06:28 -0500
> CC: gdal-dev@lists.osgeo.org
> To: powerphysics@hotmail.com
> 
> Use gdal_translate --version
> 
> Since you told me that you are using GDAL version 1.5.0 from December 2007, I suggest that you upgrade to GDAL 1.7.0 from January 2010. Greg
> 
> On Feb 2, 2010, at 4:01 PM, Mattias Carlsson wrote:
> 
> Hi,
> 
> I am trying to learn how to use ogr2ogr to convert a shapefile to kml, but fail to do so and cannot understand whether I am at all on the right track or completely lost (very much beginner in GIS). I would like to convert either, or all, of the files on <http://www.nationalgrid.com/uk/LandandDevelopment/DDC/GasElectricNW/undergroundcables/shape/> to .kml and try using
> 
> >ogr2ogr -f "KML" LINE.kml LINE.shp
> 
> but get a buffer overflow (I can send a backtrace if this would help):
> 
> >*** buffer overflow detected ***: ogr2ogr terminated
> 
> (btw, I am using Ubuntu 9.10)
> 
> Apologies if this is the wrong forum or totally basic, but after many frustrations I am getting desperate and, please, please, guide me in the right direction...
> 
> Thanks!
> 
> \Mattias

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100203/d0d4e804/attachment.html
From powerphysics at hotmail.com  Wed Feb  3 10:58:29 2010
From: powerphysics at hotmail.com (Mattias Carlsson)
Date: Wed Feb  3 10:58:32 2010
Subject: [gdal-dev] ogr2ogr .SHP to .KML conversion problem
In-Reply-To: <6225F5AF-2ABF-40D3-9C44-A478F865EDAB@mac.com>
References: <COL117-W10EA172F45B51EEC6BCBF9DB570@phx.gbl>,
	<6225F5AF-2ABF-40D3-9C44-A478F865EDAB@mac.com>
Message-ID: <COL117-W284850B740D1E000BA2748DB560@phx.gbl>


OK, so I got the conversion working, probably a newbie mistake, as the solution was mainly to switch datum, i.e. change the command from

ogr2ogr "KML" LINE.kml LINE.shp

to




	
	
	
	

ogr2ogr
-s_srs EPSG:27700 -t_srs WGS84 -f "KML" LINE.kml LINE.shp

However, before realising that, I managed to compile and install gdal 1.7. Using gdal 1.7 did not crash reading the file using the initial command line but gave a warning about coordinates exceeding limits, and from this I eventually realised my error! Thus, I am not sure whether gdal 1.5 would still work using the correct conversion (probably).

The next problem is to display the kml file on a map; there are about 500 polylines ranging from a few to hundreds of points each. Sending this to google maps (by using "My Maps"->"Import") displays the data over several tabs, which is undesirable. Any ideas on how to display all the data simultaneously?

Thanks,

Mattias



Subject: Re: [gdal-dev] ogr2ogr .SHP to .KML conversion problem
From: gregcoats@mac.com
Date: Tue, 2 Feb 2010 18:06:28 -0500
CC: gdal-dev@lists.osgeo.org
To: powerphysics@hotmail.com



Use gdal_translate --version
Since you told me that you are using GDAL version 1.5.0 from December 2007, I suggest that you upgrade to GDAL 1.7.0 from January 2010. Greg
On Feb 2, 2010, at 4:01 PM, Mattias Carlsson wrote:Hi,

I am trying to learn how to use ogr2ogr to convert a shapefile to kml, but fail to do so and cannot understand whether I am at all on the right track or completely lost (very much beginner in GIS). I would like to convert either, or all, of the files on <http://www.nationalgrid.com/uk/LandandDevelopment/DDC/GasElectricNW/undergroundcables/shape/> to .kml and try using

>ogr2ogr -f "KML" LINE.kml LINE.shp

but get a buffer overflow (I can send a backtrace if this would help):

>*** buffer overflow detected ***: ogr2ogr terminated

(btw, I am using Ubuntu 9.10)

Apologies if this is the wrong forum or totally basic, but after many frustrations I am getting desperate and, please, please, guide me in the right direction...

Thanks!

\Mattias

Your E-mail and More On-the-Go. Get Windows Live Hotmail Free. Sign up now. _______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
 		 	   		  
_________________________________________________________________
Hotmail: Trusted email with Microsoft?s powerful SPAM protection.
https://signup.live.com/signup.aspx?id=60969
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100203/145b5665/attachment-0001.html
From ahmostovoi at gmail.com  Wed Feb  3 12:13:25 2010
From: ahmostovoi at gmail.com (Alejandro Mostovoi)
Date: Wed Feb  3 12:21:05 2010
Subject: [gdal-dev] Get Image Endianness
Message-ID: <9db695c1002030913i4c18f97fp5d123e2086cc580e@mail.gmail.com>

Hi All,

I need to know the image endianness.
I search for in api's help and list but can't find anything.

Any idea?

Thanks in advance
Alejandro.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100203/d2405edb/attachment.html
From chaitanya.ch at gmail.com  Wed Feb  3 12:38:44 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Feb  3 12:38:48 2010
Subject: [gdal-dev] Get Image Endianness
In-Reply-To: <9db695c1002030913i4c18f97fp5d123e2086cc580e@mail.gmail.com>
References: <9db695c1002030913i4c18f97fp5d123e2086cc580e@mail.gmail.com>
Message-ID: <eb502d881002030938i46ea75e3re0c8dabf0967abbd@mail.gmail.com>

Alejandro,

The endianness may be in the image file header. What format is it?

On Wed, Feb 3, 2010 at 10:43 PM, Alejandro Mostovoi <ahmostovoi@gmail.com>wrote:

> Hi All,
>
> I need to know the image endianness.
> I search for in api's help and list but can't find anything.
>
> Any idea?
>
> Thanks in advance
> Alejandro.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100203/86d34c37/attachment.html
From gregcoats at mac.com  Wed Feb  3 12:53:35 2010
From: gregcoats at mac.com (Greg Coats)
Date: Wed Feb  3 12:53:58 2010
Subject: [gdal-dev] Get Image Endianness
In-Reply-To: <eb502d881002030938i46ea75e3re0c8dabf0967abbd@mail.gmail.com>
References: <9db695c1002030913i4c18f97fp5d123e2086cc580e@mail.gmail.com>
	<eb502d881002030938i46ea75e3re0c8dabf0967abbd@mail.gmail.com>
Message-ID: <E854770C-0B70-4B46-BE34-1CF51F306A0D@mac.com>

For example, all TIFF files begin with a header that starts with an endianness indicator, that is 0x49 for little endian and 0x4D for big endian. Greg

On Feb 3, 2010, at 12:38 PM, Chaitanya kumar CH wrote:

> Alejandro,
> 
> The endianness may be in the image file header. What format is it?
> 
> On Wed, Feb 3, 2010 at 10:43 PM, Alejandro Mostovoi <ahmostovoi@gmail.com> wrote:
> Hi All,
> 
> I need to know the image endianness. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100203/ad64a09a/attachment.html
From warmerdam at pobox.com  Wed Feb  3 13:03:10 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb  3 13:03:23 2010
Subject: [gdal-dev] Get Image Endianness
In-Reply-To: <9db695c1002030913i4c18f97fp5d123e2086cc580e@mail.gmail.com>
References: <9db695c1002030913i4c18f97fp5d123e2086cc580e@mail.gmail.com>
Message-ID: <4B69BA5E.4020300@pobox.com>

Alejandro Mostovoi wrote:
> Hi All,
> 
> I need to know the image endianness.
> I search for in api's help and list but can't find anything.
> 
> Any idea?

Alejandro,

As mentioned by others the on-disk endianess varies by format and sometimes
by file in a format.  The endianess of data returned by the GDAL API is always
local machine order. So if you read a big endian file on a little endian
system, the RasterIO() calls will return the data to the application in little
endian byte order.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ahmostovoi at gmail.com  Wed Feb  3 13:15:00 2010
From: ahmostovoi at gmail.com (Alejandro Mostovoi)
Date: Wed Feb  3 13:15:05 2010
Subject: [gdal-dev] Get Image Endianness
In-Reply-To: <4B69BA5E.4020300@pobox.com>
References: <9db695c1002030913i4c18f97fp5d123e2086cc580e@mail.gmail.com>
	<4B69BA5E.4020300@pobox.com>
Message-ID: <9db695c1002031015jd682b2ld3d138cdfdd5283e@mail.gmail.com>

Thanks, the read of the image is resolved.
But my app shows information about an open image, one data of that
information is (or will be) the endianness of the image, I mean, the format
of the image shouldn't be significant.
I need some method o struct that return the endianness of the image.

Thanks again.
Alejandro.


On 3 February 2010 15:03, Frank Warmerdam <warmerdam@pobox.com> wrote:

> Alejandro Mostovoi wrote:
>
>> Hi All,
>>
>> I need to know the image endianness.
>> I search for in api's help and list but can't find anything.
>>
>> Any idea?
>>
>
> Alejandro,
>
> As mentioned by others the on-disk endianess varies by format and sometimes
> by file in a format.  The endianess of data returned by the GDAL API is
> always
> local machine order. So if you read a big endian file on a little endian
> system, the RasterIO() calls will return the data to the application in
> little
> endian byte order.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100203/850306b3/attachment.html
From even.rouault at mines-paris.org  Wed Feb  3 13:26:44 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb  3 13:26:59 2010
Subject: [gdal-dev] Get Image Endianness
In-Reply-To: <9db695c1002031015jd682b2ld3d138cdfdd5283e@mail.gmail.com>
References: <9db695c1002030913i4c18f97fp5d123e2086cc580e@mail.gmail.com>
	<4B69BA5E.4020300@pobox.com>
	<9db695c1002031015jd682b2ld3d138cdfdd5283e@mail.gmail.com>
Message-ID: <201002031926.46036.even.rouault@mines-paris.org>

Alejandro,

There is no such general method in GDAL. Determining on disk endianness is 
format specific (it makes sense only for some formats) and, to the best of my 
knowledge, rarely/never exposed as a metadata that can be retrieved by the 
GDAL API. If you want it badly, you'll have to hack the appropriate drivers 
code to make them report the endianness.

Le Wednesday 03 February 2010 19:15:00 Alejandro Mostovoi, vous avez ?crit?:
> Thanks, the read of the image is resolved.
> But my app shows information about an open image, one data of that
> information is (or will be) the endianness of the image, I mean, the format
> of the image shouldn't be significant.
> I need some method o struct that return the endianness of the image.
>
> Thanks again.
> Alejandro.
>
> On 3 February 2010 15:03, Frank Warmerdam <warmerdam@pobox.com> wrote:
> > Alejandro Mostovoi wrote:
> >> Hi All,
> >>
> >> I need to know the image endianness.
> >> I search for in api's help and list but can't find anything.
> >>
> >> Any idea?
> >
> > Alejandro,
> >
> > As mentioned by others the on-disk endianess varies by format and
> > sometimes by file in a format.  The endianess of data returned by the
> > GDAL API is always
> > local machine order. So if you read a big endian file on a little endian
> > system, the RasterIO() calls will return the data to the application in
> > little
> > endian byte order.
> >
> > Best regards,
> > --
> >
> > ---------------------------------------+---------------------------------
> >----- I set the clouds in motion - turn up   | Frank Warmerdam,
> > warmerdam@pobox.com
> > light and sound - activate the windows |
> > http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam> and watch the
> > world go round - Rush    | Geospatial Programmer for Rent


From even.rouault at mines-paris.org  Wed Feb  3 13:28:00 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb  3 13:28:10 2010
Subject: [gdal-dev] ogr2ogr .SHP to .KML conversion problem
In-Reply-To: <5F484156-127F-48C3-B09E-BF3A43B0302A@mac.com>
References: <COL117-W10EA172F45B51EEC6BCBF9DB570@phx.gbl>
	<COL117-W5780054A18E1549C8D7D18DB560@phx.gbl>
	<5F484156-127F-48C3-B09E-BF3A43B0302A@mac.com>
Message-ID: <201002031928.01032.even.rouault@mines-paris.org>

No, this was not packages of 1.7.0 but 1.7.0dev of several months ago. I've 
removed them from the site to avoid any confusion. Hopefully the UbuntuGIS 
team will package 1.7.0 now it is released.

Le Wednesday 03 February 2010 16:52:11 Greg Coats, vous avez ?crit?:
> Even Rouault offers GDAL 1.7.0 compiled for Ubuntu at
> http://even.rouault.free.fr/
>
> On Feb 3, 2010, at 3:14 AM, Mattias Carlsson wrote:
> > Thanks, that says version is 1.5.4. I guess an upgrade might do the
> > trick. However, as I am very green in Linux, I have yet to compile my
> > first source and would appreciate any simpler way, i.e. pre-compiled
> > binaries. Is there any such way, or any good reference for learning
> > necessary basics regarding compilation?  /Mattias
> >
> > Subject: Re: [gdal-dev] ogr2ogr .SHP to .KML conversion problem
> > From: gregcoats@mac.com
> > Date: Tue, 2 Feb 2010 18:06:28 -0500
> > CC: gdal-dev@lists.osgeo.org
> > To: powerphysics@hotmail.com
> >
> > Use gdal_translate --version
> >
> > Since you told me that you are using GDAL version 1.5.0 from December
> > 2007, I suggest that you upgrade to GDAL 1.7.0 from January 2010. Greg
> >
> > On Feb 2, 2010, at 4:01 PM, Mattias Carlsson wrote:
> >
> > Hi,
> >
> > I am trying to learn how to use ogr2ogr to convert a shapefile to kml,
> > but fail to do so and cannot understand whether I am at all on the right
> > track or completely lost (very much beginner in GIS). I would like to
> > convert either, or all, of the files on
> > <http://www.nationalgrid.com/uk/LandandDevelopment/DDC/GasElectricNW/unde
> >rgroundcables/shape/> to .kml and try using
> >
> > >ogr2ogr -f "KML" LINE.kml LINE.shp
> >
> > but get a buffer overflow (I can send a backtrace if this would help):
> > >*** buffer overflow detected ***: ogr2ogr terminated
> >
> > (btw, I am using Ubuntu 9.10)
> >
> > Apologies if this is the wrong forum or totally basic, but after many
> > frustrations I am getting desperate and, please, please, guide me in the
> > right direction...
> >
> > Thanks!
> >
> > \Mattias


From warmerdam at pobox.com  Wed Feb  3 13:50:10 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb  3 13:50:32 2010
Subject: [gdal-dev] Unable to convert Shape file from GML file (ERROR 1:
	XML Parsing Error:)
In-Reply-To: <1265203775134-4507144.post@n2.nabble.com>
References: <1265203775134-4507144.post@n2.nabble.com>
Message-ID: <4B69C562.9050506@pobox.com>

vadi_nabble wrote:
> Hi,
>  I am trying to learn OGR APIs.
>  For that i took "ogr2ogr.cpp" file from (gdal-1.6.3\apps) and successfully
> build the exe.
> 
>  I was able to successfully convert Shape file to GML using following
> command:
>  <myexefilename> -f "gml" output.gml input.shp
> 
>  However, when i am trying the reverse of that, means from GML to Shape
> using following command:
>  <myexefilename> -f "ESRI Shapefile" output.shp input.gml
> 
>  I am getting the following error:
>  ERROR 1: XML Parsing Error: unable to connect  socket for  URL
> 'http://schemas.opengeospatial.net/gml/2.1.2/feature.xsd'
> 
>  ERROR 1: XML Parsing Error: fatal error during schema scan

Vadivelan,

It appears that the Xerces XML parsing library is attempting to fetch the
GML schemas to do validation of the GML, and is failing.  The url is
valid and has a document.

I *thought* that we disabled validation by Xerces by default.  Reviewing
gdal/ogr/ogrsf_frmts/gml/gmlreader.cpp and the makefile.vc and GNUmakefile
in that directory, it does appear validation should be disabled by default
so I'm surprised at the problem you see.

If you are interested in following up on this, please file a ticket, and I'll
have Chaitanya go through it with you.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ahmostovoi at gmail.com  Wed Feb  3 13:50:33 2010
From: ahmostovoi at gmail.com (Alejandro Mostovoi)
Date: Wed Feb  3 13:50:46 2010
Subject: [gdal-dev] Get Image Endianness
In-Reply-To: <201002031926.46036.even.rouault@mines-paris.org>
References: <9db695c1002030913i4c18f97fp5d123e2086cc580e@mail.gmail.com>
	<4B69BA5E.4020300@pobox.com>
	<9db695c1002031015jd682b2ld3d138cdfdd5283e@mail.gmail.com>
	<201002031926.46036.even.rouault@mines-paris.org>
Message-ID: <9db695c1002031050wc568384x6b08b5026b0c20be@mail.gmail.com>

Ok,

thanks for your answers


Alejandro.


On 3 February 2010 15:26, Even Rouault <even.rouault@mines-paris.org> wrote:

> Alejandro,
>
> There is no such general method in GDAL. Determining on disk endianness is
> format specific (it makes sense only for some formats) and, to the best of
> my
> knowledge, rarely/never exposed as a metadata that can be retrieved by the
> GDAL API. If you want it badly, you'll have to hack the appropriate drivers
> code to make them report the endianness.
>
> Le Wednesday 03 February 2010 19:15:00 Alejandro Mostovoi, vous avez
> ?crit :
> > Thanks, the read of the image is resolved.
> > But my app shows information about an open image, one data of that
> > information is (or will be) the endianness of the image, I mean, the
> format
> > of the image shouldn't be significant.
> > I need some method o struct that return the endianness of the image.
> >
> > Thanks again.
> > Alejandro.
> >
> > On 3 February 2010 15:03, Frank Warmerdam <warmerdam@pobox.com> wrote:
> > > Alejandro Mostovoi wrote:
> > >> Hi All,
> > >>
> > >> I need to know the image endianness.
> > >> I search for in api's help and list but can't find anything.
> > >>
> > >> Any idea?
> > >
> > > Alejandro,
> > >
> > > As mentioned by others the on-disk endianess varies by format and
> > > sometimes by file in a format.  The endianess of data returned by the
> > > GDAL API is always
> > > local machine order. So if you read a big endian file on a little
> endian
> > > system, the RasterIO() calls will return the data to the application in
> > > little
> > > endian byte order.
> > >
> > > Best regards,
> > > --
> > >
> > >
> ---------------------------------------+---------------------------------
> > >----- I set the clouds in motion - turn up   | Frank Warmerdam,
> > > warmerdam@pobox.com
> > > light and sound - activate the windows |
> > > http://pobox.com/~warmerdam <http://pobox.com/%7Ewarmerdam><
> http://pobox.com/%7Ewarmerdam> and watch the
> > > world go round - Rush    | Geospatial Programmer for Rent
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100203/6c8bec5c/attachment.html
From powerphysics at hotmail.com  Wed Feb  3 14:50:45 2010
From: powerphysics at hotmail.com (Mattias Carlsson)
Date: Wed Feb  3 14:50:49 2010
Subject: [gdal-dev] ogr2ogr .SHP to .KML conversion problem
In-Reply-To: <201002031928.01032.even.rouault@mines-paris.org>
References: <COL117-W10EA172F45B51EEC6BCBF9DB570@phx.gbl>
	<COL117-W5780054A18E1549C8D7D18DB560@phx.gbl>
	<5F484156-127F-48C3-B09E-BF3A43B0302A@mac.com>,
	<201002031928.01032.even.rouault@mines-paris.org>
Message-ID: <COL117-W564C40EB664E8B15E4BE95DB560@phx.gbl>


Thanks for your support gents! For now, I have managed to get by, both compiling, converting and displaying (though it broke a few cool nerves in the process). 

I tried Google Earth, and this handles large .kml files - I guess the data transfer is the issue in using online apps, like Google Maps. The ideal of course would be to fund a GPL alternative...

Again, thanks!

Mattias

> From: even.rouault@mines-paris.org
> To: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] ogr2ogr .SHP to .KML conversion problem
> Date: Wed, 3 Feb 2010 19:28:00 +0100
> CC: gregcoats@mac.com; powerphysics@hotmail.com
> 
> No, this was not packages of 1.7.0 but 1.7.0dev of several months ago. I've 
> removed them from the site to avoid any confusion. Hopefully the UbuntuGIS 
> team will package 1.7.0 now it is released.
> 
> Le Wednesday 03 February 2010 16:52:11 Greg Coats, vous avez ?crit :
> > Even Rouault offers GDAL 1.7.0 compiled for Ubuntu at
> > http://even.rouault.free.fr/
> >
> > On Feb 3, 2010, at 3:14 AM, Mattias Carlsson wrote:
> > > Thanks, that says version is 1.5.4. I guess an upgrade might do the
> > > trick. However, as I am very green in Linux, I have yet to compile my
> > > first source and would appreciate any simpler way, i.e. pre-compiled
> > > binaries. Is there any such way, or any good reference for learning
> > > necessary basics regarding compilation?  /Mattias
> > >
> > > Subject: Re: [gdal-dev] ogr2ogr .SHP to .KML conversion problem
> > > From: gregcoats@mac.com
> > > Date: Tue, 2 Feb 2010 18:06:28 -0500
> > > CC: gdal-dev@lists.osgeo.org
> > > To: powerphysics@hotmail.com
> > >
> > > Use gdal_translate --version
> > >
> > > Since you told me that you are using GDAL version 1.5.0 from December
> > > 2007, I suggest that you upgrade to GDAL 1.7.0 from January 2010. Greg
> > >
> > > On Feb 2, 2010, at 4:01 PM, Mattias Carlsson wrote:
> > >
> > > Hi,
> > >
> > > I am trying to learn how to use ogr2ogr to convert a shapefile to kml,
> > > but fail to do so and cannot understand whether I am at all on the right
> > > track or completely lost (very much beginner in GIS). I would like to
> > > convert either, or all, of the files on
> > > <http://www.nationalgrid.com/uk/LandandDevelopment/DDC/GasElectricNW/unde
> > >rgroundcables/shape/> to .kml and try using
> > >
> > > >ogr2ogr -f "KML" LINE.kml LINE.shp
> > >
> > > but get a buffer overflow (I can send a backtrace if this would help):
> > > >*** buffer overflow detected ***: ogr2ogr terminated
> > >
> > > (btw, I am using Ubuntu 9.10)
> > >
> > > Apologies if this is the wrong forum or totally basic, but after many
> > > frustrations I am getting desperate and, please, please, guide me in the
> > > right direction...
> > >
> > > Thanks!
> > >
> > > \Mattias
> 
> 
 		 	   		  
_________________________________________________________________
Hotmail: Trusted email with Microsoft?s powerful SPAM protection.
https://signup.live.com/signup.aspx?id=60969
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100203/b392332c/attachment.html
From rpw at globema.pl  Wed Feb  3 18:56:50 2010
From: rpw at globema.pl (Ralf Wagner)
Date: Wed Feb  3 18:57:03 2010
Subject: [gdal-dev] Cannot set transparent color for GeoTIFFs processed by
	gdal_retile
Message-ID: <4B6A0D42.5020101@globema.pl>

Hello,
I am creating image pyramid from a bunch of color GeoTIFF files using
"gdal_retile" tool. I have managed to generate pyramid but unfortunately
there is a problem - my GeoTIFFs maps overlap and have white margins
around and I am unable to force GDAL to treat white color as transparent
to avoid covering maps by these margins. I have tried all ideas I could
imagine but to no avail. So my question is: how to tweak "gdal_retile"
to get white color treated as transparent during merging?
I am using GDAL 1.6 on Windows. Any help will be very, very appreciated
- thank you.

-- 
Ralf Wagner



From gregor at hostgis.com  Wed Feb  3 19:10:03 2010
From: gregor at hostgis.com (Gregor at HostGIS)
Date: Wed Feb  3 19:19:30 2010
Subject: [gdal-dev] ODBC as OGR data source?
Message-ID: <4B6A105B.7080906@hostgis.com>

Hey all. I've been asked to set up support for pseudo-spatial data via 
ODBC. So far, I've not had any luck. We're using this as our starting point:
    http://mapserver.org/input/vector/VirtualSpatialData.html

But I get this...

$ ogrinfo ODBC:gregor/mosheh@testPgSQL table
*** glibc detected *** free(): invalid next size (fast): 
0x0000000000505520 ***
Aborted

So my very first questions are a) whether the tricks described in that 
document has ever been considered production-stable, and b) whether 
upgrading from GDAL/OGR 1.5.4 to 1.6.3 is likely to help. Then of course 
(c) would be "So what AM I doing wrong?" :)

The OS is Linux, and I have installed unixODBC and drivers for 
PostgreSQL (bundled with unixODBC) and MySQL (MySQL Connector). I then 
rebuilt GDAL/OGR 1.5.4 including --withodbc=/usr/local/unixODBC

My odbc.ini is as follows:

[testPgSQL]
Description         = Test to Postgres
Driver              = PostgreSQL
Database            = MY_DATABASE
Servername          = MY_HOSTNAME
Port                = 5432
Protocol            = 8.2
ReadOnly            = No
RowVersioning       = No
ShowSystemTables    = No
ShowOidColumn       = No
FakeOidIndex        = No
ConnSettings        =


-- 
HostGIS, Open Source solutions for the global GIS community
Greg Allensworth - SysAdmin, Programmer, GIS Person, Security
    Network+   Server+   A+   Security+   Linux+
    PHP   PostgreSQL   MySQL   DHTML/JavaScript/AJAX

"No one cares if you can back up ? only if you can recover."
From gregcoats at mac.com  Wed Feb  3 19:41:36 2010
From: gregcoats at mac.com (Greg Coats)
Date: Wed Feb  3 19:41:43 2010
Subject: [gdal-dev] ODBC as OGR data source?
In-Reply-To: <4B6A105B.7080906@hostgis.com>
References: <4B6A105B.7080906@hostgis.com>
Message-ID: <BABDA478-0192-4471-8F39-BCD6E9D4A535@mac.com>

What not try using the Jan 2010 GDAL 1.7.0, rather than the Jan 2009 GDAL 1.5.4? Greg

On Feb 3, 2010, at 7:10 PM, Gregor at HostGIS wrote:

> I then rebuilt GDAL/OGR 1.5.4 

From weixj2003ld at 163.com  Wed Feb  3 21:32:30 2010
From: weixj2003ld at 163.com (weixj2003ld)
Date: Wed Feb  3 21:47:49 2010
Subject: [gdal-dev] how to get heightmap
Message-ID: <1ef9d39.1e5b.12696d2517f.Coremail.weixj2003ld@163.com>

Hi,
Now,I have a .tif file(it is a satallite photo),How to get the heightmap of it?
Kind regards. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100204/d12674f2/attachment.html
From woklist at kyngchaos.com  Wed Feb  3 21:51:33 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Feb  3 21:51:38 2010
Subject: [gdal-dev] some 1.7 autotest issues
Message-ID: <6045CECF-305A-415B-A9BC-36F259455D79@kyngchaos.com>

I'm working thru a few autotest problems for GDAL 1.7 on OSX.  This one looks like it may be easily solved:

  TEST: tiff_write_56 ... fail
    color table seemingly not cleared.
  TEST: tiff_write_57 ... fail
    did not get expected geotransform, perhaps unset is not working?

Are there new features in libtiff CVS?  I'm using a CVS version from May 2009.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

The equator is so long, it could encircle the earth completely once.

From chaitanya.ch at gmail.com  Wed Feb  3 22:09:15 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Feb  3 22:09:18 2010
Subject: [gdal-dev] how to get heightmap
In-Reply-To: <1ef9d39.1e5b.12696d2517f.Coremail.weixj2003ld@163.com>
References: <1ef9d39.1e5b.12696d2517f.Coremail.weixj2003ld@163.com>
Message-ID: <eb502d881002031909qa64e5bah5a4fd30629a9d1ad@mail.gmail.com>

Wei,

Generating a height map or a 3D model from one photo is harder and more
error prone than with multiple photos. These methods come under
Photogrammetry ( http://en.wikipedia.org/wiki/Photogrammetry ).

2010/2/4 weixj2003ld <weixj2003ld@163.com>

> Hi,
> Now,I have a .tif file(it is a satallite photo),How to get the heightmap of
> it?
> Kind regards.
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100204/476afb96/attachment-0001.html
From chaitanya.ch at gmail.com  Wed Feb  3 22:22:48 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Feb  3 22:22:50 2010
Subject: [gdal-dev] Cannot set transparent color for GeoTIFFs processed by
	gdal_retile
In-Reply-To: <4B6A0D42.5020101@globema.pl>
References: <4B6A0D42.5020101@globema.pl>
Message-ID: <eb502d881002031922x5cb74c51ud92bb739665fb9a4@mail.gmail.com>

Ralf,

Try the -addalpha and -srcnodata options in gdalbuildvrt (
http://www.gdal.org/gdalbuildvrt.html) to generate a VRT file to represent
your files, individually or combined. Mention the RGB values of the white
pixels as -srcnodata values. This will add an alpha band to your images and
makes all white pixels transparent.

Run gdal_retile.py using the vrt files.

2010/2/4 Ralf Wagner <rpw@globema.pl>

> Hello,
> I am creating image pyramid from a bunch of color GeoTIFF files using
> "gdal_retile" tool. I have managed to generate pyramid but unfortunately
> there is a problem - my GeoTIFFs maps overlap and have white margins
> around and I am unable to force GDAL to treat white color as transparent
> to avoid covering maps by these margins. I have tried all ideas I could
> imagine but to no avail. So my question is: how to tweak "gdal_retile"
> to get white color treated as transparent during merging?
> I am using GDAL 1.6 on Windows. Any help will be very, very appreciated
> - thank you.
>
> --
> Ralf Wagner
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100204/a7727700/attachment.html
From chaitanya.ch at gmail.com  Wed Feb  3 22:40:39 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Feb  3 22:40:41 2010
Subject: [gdal-dev] ODBC as OGR data source?
In-Reply-To: <4B6A105B.7080906@hostgis.com>
References: <4B6A105B.7080906@hostgis.com>
Message-ID: <eb502d881002031940m5547f22cq9eee5a1245d7fa19@mail.gmail.com>

Gregor,

Your error message should be resolved by an upgrade.

Use the --formats option with ogrinfo to see the status of the ODBC driver.

GDAL/OGR's ODBC driver is currently readonly. Refer to
http://www.gdal.org/ogr/drv_odbc.html and
http://www.gdal.org/ogr/drv_pgeo.html for more details.

On Thu, Feb 4, 2010 at 5:40 AM, Gregor at HostGIS <gregor@hostgis.com>wrote:

> Hey all. I've been asked to set up support for pseudo-spatial data via
> ODBC. So far, I've not had any luck. We're using this as our starting point:
>   http://mapserver.org/input/vector/VirtualSpatialData.html
>
> But I get this...
>
> $ ogrinfo ODBC:gregor/mosheh@testPgSQL table
> *** glibc detected *** free(): invalid next size (fast): 0x0000000000505520
> ***
> Aborted
>
> So my very first questions are a) whether the tricks described in that
> document has ever been considered production-stable, and b) whether
> upgrading from GDAL/OGR 1.5.4 to 1.6.3 is likely to help. Then of course (c)
> would be "So what AM I doing wrong?" :)
>
> The OS is Linux, and I have installed unixODBC and drivers for PostgreSQL
> (bundled with unixODBC) and MySQL (MySQL Connector). I then rebuilt GDAL/OGR
> 1.5.4 including --withodbc=/usr/local/unixODBC
>
> My odbc.ini is as follows:
>
> [testPgSQL]
> Description         = Test to Postgres
> Driver              = PostgreSQL
> Database            = MY_DATABASE
> Servername          = MY_HOSTNAME
> Port                = 5432
> Protocol            = 8.2
> ReadOnly            = No
> RowVersioning       = No
> ShowSystemTables    = No
> ShowOidColumn       = No
> FakeOidIndex        = No
> ConnSettings        =
>
>
> --
> HostGIS, Open Source solutions for the global GIS community
> Greg Allensworth - SysAdmin, Programmer, GIS Person, Security
>   Network+   Server+   A+   Security+   Linux+
>   PHP   PostgreSQL   MySQL   DHTML/JavaScript/AJAX
>
> "No one cares if you can back up ? only if you can recover."
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100204/843f940c/attachment.html
From eugenio.realini at gmail.com  Thu Feb  4 00:54:28 2010
From: eugenio.realini at gmail.com (Eugenio Realini)
Date: Thu Feb  4 00:54:52 2010
Subject: [gdal-dev] PYTHON variable problem in GDALmake.opt
Message-ID: <57a9d5cf1002032154n6517c055ja78da256ac83c61b@mail.gmail.com>

Hello,

while compiling gdal 1.7.0 on Slackware64 I noticed that the PYTHON
variable is set to "no" in GDALmake.opt even if the configure output
says "SWIG Bindings:  python".
Then the make fails because it tries to run: "no setup.py build".

If I change "PYTHON = no" to "PYTHON = python" manually, then
everything goes well.

When I compile gdal 1.6.3 on the same machine it correctly sets
"PYTHON = python".
Is there something I'm doing wrong with the new version?

This is my call to configure:

./configure --prefix=/usr \
--libdir=/usr/lib64 \
--with-libz=/usr/lib64 \
--with-netcdf \
--with-libtiff=internal \
--with-curl=/usr/bin/curl-config \
--with-mysql=yes \
--with-static-proj4 \
--with-threads \
--with-hide-internal-symbols=yes \
--with-python \
--build=x86_64-slackware-linux

Thanks
Eugenio
From andywood.home at gmail.com  Thu Feb  4 03:16:36 2010
From: andywood.home at gmail.com (Andrew Wood)
Date: Thu Feb  4 03:18:33 2010
Subject: [gdal-dev] Re: advice on using the moving average command
In-Reply-To: <4e0154af1001301052i967694fkcf12b719ffbdb157@mail.gmail.com>
References: <4e0154af1001301052i967694fkcf12b719ffbdb157@mail.gmail.com>
Message-ID: <4e0154af1002040016w5184ff51k329d938b05aa5ff5@mail.gmail.com>

Dear List members,

For a third time, I am requesting assistance on the issue below.  Does
anyone in this community know how to use the moving average command to
produce a grid from a CSV?  It must be a simple issue.   gdal seems like a
promising piece of software, but is unlikely to be of much use to anyone if
the community is so small that it cannot address simple requests from new
users.   For comparison, the first time I emailed the GMT users list, I had
a response within hours.

Thanks,
Andy
__________________________
Andy Wood, PhD
Lead Scientist
3TIER Inc.
2001 6th Avenue, Suite 2100
Seattle, WA 98121
www.3tier.com


On Sat, Jan 30, 2010 at 10:52 AM, Andrew Wood <andywood.home@gmail.com>wrote:

> Dear List members,
>
> I am requesting help again on the problem below.  If anyone has used the
> moving average functionality in gdal_grid, it would be great to see your
> example, especially if you have produced outputs that either are netcdf or
> ascii grids, or could be converted to them via gdal_translate or imagemagik
> convert.
>
> Regards,
> -Andy
>
> On Tue, Jan 26, 2010 at 11:10 AM, Andy Wood <awood@3tier.com> wrote:
>
>> Dear List,
>>
>> I'm a novice to gdal and have been trying to apply the moving average
>> algorithm to CSV (or gridded) data to produce grids in either ESRI arc/info
>> Ascii or NetCDF format.  I've tried a range of command variations with no
>> success (just get the usage message).
>>
>> A typical attempt looks like the following:
>>
>> > gdal_grid -a
>> average:radius1=2.0:radius2=2.0:angle=0.0:min_points=4:nodata=-99.0 -outsize
>> 48 48 -txe -107.5 -104.5 -tye 22.5 25.5 -of AAIGrid -l robf robf.m2.csv
>> robf.m2.MA.asc
>>
>> with the CSV data file (robf.m2.csv) looking like:
>>
>> -104.53125,22.53125,4.631
>> -104.59375,22.53125,3.988
>> -104.65625,22.53125,2.785
>> -104.71875,22.53125,2.660
>> ...
>>
>> The grid I'm trying to create would be in a geographic (decimal degree)
>> projection; I'm not sure if that matters.  I'm working on mac osx.
>>
>> I don't think I have the basic syntax down, and if anyone could help me
>> with it, I think that would get me past the hump and open up all the other
>> commands as well.
>>
>> Thanks in advance,
>> -Andy
>>
>>
>>
>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100204/db0f11b3/attachment.html
From bruno.binet at camptocamp.com  Thu Feb  4 06:12:13 2010
From: bruno.binet at camptocamp.com (Bruno Binet)
Date: Thu Feb  4 06:14:14 2010
Subject: [gdal-dev] wcs extraction
Message-ID: <4b5079221002040312o76766255mfc4cf30b615df07f@mail.gmail.com>

Hi list,

I'm currently trying to use the wcs gdal driver to extract data from a
wcs service (mapserver), using a specfic projection, extent and
resolution.
I managed to extract the all dataset in the original projection, and
format (geotiff).
But I would like to be able to specify a value for the format, the
extent, the projection, and the resolution for the data to be
extracted.

Given the docs: http://www.gdal.org/frmt_wcs.html we can specify a
preferred format for extraction with the PreferredFormat element, but
what about projection, extent, and resolution?
Do we have to download the entire dataset and use gdal capabilities to
extract and reproject a subset of the downloaded data?
It would be great if it could be handled directly by mapserver.

Cheers,

Bruno

-- 
Bruno Binet

Camptocamp France SAS
Savoie Technolac, BP 352
73377 Le Bourget du Lac, Cedex

Mail : bruno.binet@camptocamp.com
http://www.camptocamp.com
From rpw at globema.pl  Thu Feb  4 07:46:36 2010
From: rpw at globema.pl (Ralf Wagner)
Date: Thu Feb  4 07:46:47 2010
Subject: [gdal-dev] Cannot set transparent color for GeoTIFFs processed
	by 	gdal_retile
In-Reply-To: <eb502d881002031922x5cb74c51ud92bb739665fb9a4@mail.gmail.com>
References: <4B6A0D42.5020101@globema.pl>
	<eb502d881002031922x5cb74c51ud92bb739665fb9a4@mail.gmail.com>
Message-ID: <4B6AC1AC.5030603@globema.pl>

Thank you for your prompt answer.
Actually, I was experimenting with VRT files trying to fight this 
"transparency" problem. I have failed, but probably my way of setting 
transparency for VRT files was wrong - I had been setting 'c4' value 
(Alpha) for 'white' entry in color table in my VRT files to '0'. It 
didn't work. But if you are saying that this is way to go, I will try to 
do more experiments (and I will dig deeper into VRT format) .

Best regards,
Ralf Wagner

Chaitanya kumar CH pisze:
> Ralf,
>
> Try the -addalpha and -srcnodata options in gdalbuildvrt 
> (http://www.gdal.org/gdalbuildvrt.html) to generate a VRT file to 
> represent your files, individually or combined. Mention the RGB values 
> of the white pixels as -srcnodata values. This will add an alpha band 
> to your images and makes all white pixels transparent.
>
> Run gdal_retile.py using the vrt files.
>
> 2010/2/4 Ralf Wagner <rpw@globema.pl <mailto:rpw@globema.pl>>
>
>     Hello,
>     I am creating image pyramid from a bunch of color GeoTIFF files using
>     "gdal_retile" tool. I have managed to generate pyramid but
>     unfortunately
>     there is a problem - my GeoTIFFs maps overlap and have white margins
>     around and I am unable to force GDAL to treat white color as
>     transparent
>     to avoid covering maps by these margins. I have tried all ideas I
>     could
>     imagine but to no avail. So my question is: how to tweak "gdal_retile"
>     to get white color treated as transparent during merging?
>     I am using GDAL 1.6 on Windows. Any help will be very, very
>     appreciated
>     - thank you.
>
>     -- 
>     Ralf Wagner
>
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9848167848
> 17.241582N 80.142635E


-- 
Ralf Wagner



Globema Sp. z o.o., ul. Rostafi?skich 4, 02-593 Warszawa, Poland
tel. (+48) 22 848 73 13, fax (+48) 22 848 68 83
www.globema.com.pl <http://www.globema.com.pl>



"Tre?? tej wiadomo?ci mo?e zawiera? prawnie chronione informacje poufne.
Je?li otrzymali?cie j? Pa?stwo przez pomy?k?, prosimy o niezw?oczne
powiadomienie o tym nadawcy oraz jej usuni?cie z Pa?stwa komputera, bez
wykonywania, dystrybuowania lub zatrzymywania jakiejkolwiek jej kopii.

This message may contain confidential information protected by law. If
you have received this message by mistake, please immediately inform the
sender of the mistake and delete this message from your system without
making, distributing or retaining any copies of it." 

From jgomezdans at gmail.com  Thu Feb  4 07:41:30 2010
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Thu Feb  4 07:49:44 2010
Subject: [gdal-dev] Re: advice on using the moving average command
In-Reply-To: <4e0154af1002040016w5184ff51k329d938b05aa5ff5@mail.gmail.com>
References: <4e0154af1001301052i967694fkcf12b719ffbdb157@mail.gmail.com>
	<4e0154af1002040016w5184ff51k329d938b05aa5ff5@mail.gmail.com>
Message-ID: <91d218431002040441r7640a189pcc61506ec09f8b4a@mail.gmail.com>

Hi,

On 4 February 2010 08:16, Andrew Wood <andywood.home@gmail.com> wrote:

> For a third time, I am requesting assistance on the issue below.  Does
> anyone in this community know how to use the moving average command to
> produce a grid from a CSV?
>

Have you read the section entitled "READING COMMA SEPARATED VALUES" on
gdal_grdi's manpage? I did something failry similar to what you want based
on it, and it works fine.

Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100204/e509a0f1/attachment.html
From vadivelan_gi at yahoo.co.in  Thu Feb  4 09:28:52 2010
From: vadivelan_gi at yahoo.co.in (vadi_nabble)
Date: Thu Feb  4 09:30:08 2010
Subject: [gdal-dev] Re: Unable to convert Shape file from GML file (ERROR 1:
 XML Parsing Error:)
In-Reply-To: <4B69C562.9050506@pobox.com>
References: <1265203775134-4507144.post@n2.nabble.com>
	<4B69C562.9050506@pobox.com>
Message-ID: <1265293732112-4513709.post@n2.nabble.com>


Frank/Chaitanya,

 I am now able to convert .gml file to .shp file.

 Actually, I thought, we have to enable the Xerces validation for GML
parsing, so i uncomment it from the Makefile.
 However, as per your comment, I commented it back and it worked.

 Thanks, for your valuable suggestion.

 Regards,
 Vadivelan 
-- 
View this message in context: http://n2.nabble.com/Unable-to-convert-Shape-file-from-GML-file-ERROR-1-XML-Parsing-Error-tp4507144p4513709.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From mateusz at loskot.net  Thu Feb  4 10:04:01 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Feb  4 10:03:52 2010
Subject: [gdal-dev] how to get heightmap
In-Reply-To: <1ef9d39.1e5b.12696d2517f.Coremail.weixj2003ld@163.com>
References: <1ef9d39.1e5b.12696d2517f.Coremail.weixj2003ld@163.com>
Message-ID: <4B6AE1E1.2090208@loskot.net>

weixj2003ld wrote:
> Hi,
> Now,I have a .tif file(it is a satallite photo),How to get the heightmap 
> of it?

Apply a proper algorithm.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From jorge.arevalo at gmail.com  Thu Feb  4 10:14:40 2010
From: jorge.arevalo at gmail.com (=?UTF-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Thu Feb  4 10:15:04 2010
Subject: [gdal-dev] Question about MEM raster
Message-ID: <cb4457701002040714v23f0bad4v7068fe2d5153863@mail.gmail.com>

Hi,

Is it possible to create a raster in memory
(http://www.gdal.org/frmt_mem.html) when not all the bands have the
same pixel datatype? I suppose it's not a common situation, but if
happens, should I avoid the DATATYPE option and let GDAL manage this
issue? In other way, is the DATATYPE option an "information-only"
option?

Thanks in advance

Best regards,
Jorge
From jorge.arevalo at gmail.com  Thu Feb  4 10:32:46 2010
From: jorge.arevalo at gmail.com (=?UTF-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Thu Feb  4 10:33:14 2010
Subject: [gdal-dev] Re: Question about MEM raster
In-Reply-To: <cb4457701002040714v23f0bad4v7068fe2d5153863@mail.gmail.com>
References: <cb4457701002040714v23f0bad4v7068fe2d5153863@mail.gmail.com>
Message-ID: <cb4457701002040732g2e2ed8ep3ac3c15cef1868c0@mail.gmail.com>

I response myself: I think I may use AddBand, to add bands one by one,
specifying its data type and additional options...

2010/2/4 Jorge Ar?valo <jorge.arevalo@gmail.com>:
> Hi,
>
> Is it possible to create a raster in memory
> (http://www.gdal.org/frmt_mem.html) when not all the bands have the
> same pixel datatype? I suppose it's not a common situation, but if
> happens, should I avoid the DATATYPE option and let GDAL manage this
> issue? In other way, is the DATATYPE option an "information-only"
> option?
>
> Thanks in advance
>
> Best regards,
> Jorge
>
From gregor at hostgis.com  Thu Feb  4 17:00:19 2010
From: gregor at hostgis.com (Gregor at HostGIS)
Date: Thu Feb  4 17:00:26 2010
Subject: [gdal-dev] ODBC as OGR data source?
In-Reply-To: <eb502d881002031940m5547f22cq9eee5a1245d7fa19@mail.gmail.com>
References: <4B6A105B.7080906@hostgis.com>
	<eb502d881002031940m5547f22cq9eee5a1245d7fa19@mail.gmail.com>
Message-ID: <4B6B4373.8080005@hostgis.com>

Well, some progress. Almost. :)
I have upgraded to 1.7.0 and now  get a different error:

$ ogrinfo ODBC:gregor/mosheh@testPgSQL table
ERROR 2: CPLMalloc(): Out of memory allocating 4294967297 bytes.

Yowch, 4 GB seems a bit steep. The PostgreSQL table itself is 5 rows, 
all points. Why would it want that much? I did try upping the RAM on the 
server, but I still get "Segmentation fault" The last few lines of 
strace output are:

sendto(3, "Qselect ta.attname, ia.attnum fr"..., 275, MSG_NOSIGNAL, 
NULL, 0) = 275
recvfrom(3, "Pblank\0T\0\2attname\0\0\0\0\23\0@\377\377\377\377attn"..., 
4096, 0, NULL, NULL) = 69
mmap(NULL, 4294971392, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, 
-1, 0) = 0x2ae075e57000
--- SIGSEGV (Segmentation fault) @ 0 (0) ---

Any ideas?

-- 
HostGIS, Open Source solutions for the global GIS community
Greg Allensworth - SysAdmin, Programmer, GIS Person, Security
    Network+   Server+   A+   Security+   Linux+
    PHP   PostgreSQL   MySQL   DHTML/JavaScript/AJAX

"No one cares if you can back up ? only if you can recover."
From enrico at enricozini.org  Thu Feb  4 18:20:52 2010
From: enrico at enricozini.org (Enrico Zini)
Date: Thu Feb  4 18:28:18 2010
Subject: [gdal-dev] gdal_translate as a VRTDataset factory
Message-ID: <20100204232052.GA28021@enricozini.org>

Hello,

I needed a way to create virtual datasets in a way similar to what
gdal_translate is doing. I noticed that gdal_translate is basically a
tool to construct a VRTDataset, so I proceeded by transforming
gdal_translate.cc into a VRTDataset builder class.

The result is gdaltranslate.{h,cpp} in 
http://meteosatlib.svn.sourceforge.net/viewvc/meteosatlib/gdal/trunk/utils/
(I did not deal with subdatasets because it is a part of GDAL I have not
explored yet).

I reckon such a VRTDataset generator could be useful to many, and since
its interface (necessarily) closely matches the way gdal_translate
works, it is also quite easy to learn.

Could it make sense to package GDALTranslate as part of GDAL, and just
rebase gdal_translate off it?

From chats on IRC I get the feeling that it is quite customary to take
"inspiration" from gdal_translate.cpp when creating virtual datasets.

I would love if that happened, because that will guarantee that
updates/fixes to gdal_translate are readily available also to the other
code based on GDALTranslate.


Ciao,

Enrico

-- 
GPG key: 4096R/E7AD5568 2009-05-08 Enrico Zini <enrico@enricozini.org>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 490 bytes
Desc: Digital signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100204/5e0e43f9/attachment.bin
From chaitanya.ch at gmail.com  Thu Feb  4 21:28:10 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Feb  4 21:28:14 2010
Subject: [gdal-dev] ODBC as OGR data source?
In-Reply-To: <4B6B4373.8080005@hostgis.com>
References: <4B6A105B.7080906@hostgis.com>
	<eb502d881002031940m5547f22cq9eee5a1245d7fa19@mail.gmail.com>
	<4B6B4373.8080005@hostgis.com>
Message-ID: <eb502d881002041828r3e2567bbk85236c876e7fef01@mail.gmail.com>

Gregor,

I don't think you can allocate a contiguous 4GB memory no matter how much
RAM you have.
I don't have any experience in using ODBC in GDAL. Let's hope someone else
with that experience sees this.
Send all the lines from the strace output. Meanwhile, see if you can work on
Windows. It may be an issue in unixODBC.

On Fri, Feb 5, 2010 at 3:30 AM, Gregor at HostGIS <gregor@hostgis.com>wrote:

> Well, some progress. Almost. :)
> I have upgraded to 1.7.0 and now  get a different error:
>
>
> $ ogrinfo ODBC:gregor/mosheh@testPgSQL table
> ERROR 2: CPLMalloc(): Out of memory allocating 4294967297 bytes.
>
> Yowch, 4 GB seems a bit steep. The PostgreSQL table itself is 5 rows, all
> points. Why would it want that much? I did try upping the RAM on the server,
> but I still get "Segmentation fault" The last few lines of strace output
> are:
>
> sendto(3, "Qselect ta.attname, ia.attnum fr"..., 275, MSG_NOSIGNAL, NULL,
> 0) = 275
> recvfrom(3, "Pblank\0T\0\2attname\0\0\0\0\23\0@\377\377\377\377attn"...,
> 4096, 0, NULL, NULL) = 69
> mmap(NULL, 4294971392, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1,
> 0) = 0x2ae075e57000
> --- SIGSEGV (Segmentation fault) @ 0 (0) ---
>
> Any ideas?
>
>
> --
> HostGIS, Open Source solutions for the global GIS community
> Greg Allensworth - SysAdmin, Programmer, GIS Person, Security
>   Network+   Server+   A+   Security+   Linux+
>   PHP   PostgreSQL   MySQL   DHTML/JavaScript/AJAX
>
> "No one cares if you can back up ? only if you can recover."
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100205/9b4a5c13/attachment.html
From chaitanya.ch at gmail.com  Thu Feb  4 21:30:38 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Feb  4 21:30:41 2010
Subject: [gdal-dev] ODBC as OGR data source?
In-Reply-To: <eb502d881002041828r3e2567bbk85236c876e7fef01@mail.gmail.com>
References: <4B6A105B.7080906@hostgis.com>
	<eb502d881002031940m5547f22cq9eee5a1245d7fa19@mail.gmail.com>
	<4B6B4373.8080005@hostgis.com>
	<eb502d881002041828r3e2567bbk85236c876e7fef01@mail.gmail.com>
Message-ID: <eb502d881002041830u74a81550jc69a967bab477b5f@mail.gmail.com>

Use gdb instead of strace.

On Fri, Feb 5, 2010 at 7:58 AM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> Gregor,
>
> I don't think you can allocate a contiguous 4GB memory no matter how much
> RAM you have.
> I don't have any experience in using ODBC in GDAL. Let's hope someone else
> with that experience sees this.
> Send all the lines from the strace output. Meanwhile, see if you can work
> on Windows. It may be an issue in unixODBC.
>
>
> On Fri, Feb 5, 2010 at 3:30 AM, Gregor at HostGIS <gregor@hostgis.com>wrote:
>
>> Well, some progress. Almost. :)
>> I have upgraded to 1.7.0 and now  get a different error:
>>
>>
>> $ ogrinfo ODBC:gregor/mosheh@testPgSQL table
>> ERROR 2: CPLMalloc(): Out of memory allocating 4294967297 bytes.
>>
>> Yowch, 4 GB seems a bit steep. The PostgreSQL table itself is 5 rows, all
>> points. Why would it want that much? I did try upping the RAM on the server,
>> but I still get "Segmentation fault" The last few lines of strace output
>> are:
>>
>> sendto(3, "Qselect ta.attname, ia.attnum fr"..., 275, MSG_NOSIGNAL, NULL,
>> 0) = 275
>> recvfrom(3, "Pblank\0T\0\2attname\0\0\0\0\23\0@\377\377\377\377attn"...,
>> 4096, 0, NULL, NULL) = 69
>> mmap(NULL, 4294971392, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS,
>> -1, 0) = 0x2ae075e57000
>> --- SIGSEGV (Segmentation fault) @ 0 (0) ---
>>
>> Any ideas?
>>
>>
>> --
>> HostGIS, Open Source solutions for the global GIS community
>> Greg Allensworth - SysAdmin, Programmer, GIS Person, Security
>>   Network+   Server+   A+   Security+   Linux+
>>   PHP   PostgreSQL   MySQL   DHTML/JavaScript/AJAX
>>
>> "No one cares if you can back up ? only if you can recover."
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9848167848
> 17.241582N 80.142635E
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100205/7cea890c/attachment.html
From warmerdam at pobox.com  Thu Feb  4 23:49:16 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb  4 23:49:16 2010
Subject: [gdal-dev] Important - GDAL 1.7.0 - Imagine/HFA Driver Produces
	Corrupt Files
Message-ID: <4B6BA34C.3060703@pobox.com>

Folks,

Ivan has discovered that GDAL 1.7.0 is producing HFA files that are
corrupt - that is they are only readable with GDAL.  Imagine and older
versions of ArcGIS fail to read them.  The problem is described in:

   http://trac.osgeo.org/gdal/ticket/3382

I consider this problem very serious, and the longer that GDAL 1.7.0
is in use the more of these corrupt Imagine files will be produced and
cause problems for the world.  For that reason, I would like to press
ahead to produce a GDAL 1.7.1 release soon, and to mark GDAL 1.7.0 deprecated
due to this serious bug.  Does anyone feel this is overkill?

Are there any other high priority fixes folks would like to see in a GDAL 1.7.1
release?  I am thinking of preparing an RC on Monday if there is no objection.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From chaitanya.ch at gmail.com  Fri Feb  5 00:37:32 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Feb  5 00:37:35 2010
Subject: [gdal-dev] ODBC as OGR data source?
In-Reply-To: <4B6BA5BD.2020607@hostgis.com>
References: <4B6A105B.7080906@hostgis.com>
	<eb502d881002031940m5547f22cq9eee5a1245d7fa19@mail.gmail.com>
	<4B6B4373.8080005@hostgis.com>
	<eb502d881002041828r3e2567bbk85236c876e7fef01@mail.gmail.com>
	<4B6B8CD5.9080808@hostgis.com>
	<eb502d881002041949l2c1fe78h7abac0261c41d20d@mail.gmail.com>
	<4B6B97C8.2090601@hostgis.com>
	<eb502d881002042029q59dfd49et51b689c76d033db@mail.gmail.com>
	<4B6BA5BD.2020607@hostgis.com>
Message-ID: <eb502d881002042137s4752de19r200f246552767e2d@mail.gmail.com>

Gregor,

The segfault occurred at
http://trac.osgeo.org/gdal/browser/branches/1.7/gdal/port/cpl_odbc.cpp#L796during
a call to memcpy.
You mentioned that there was an attempt by CPLMalloc to allocate 4294967297
bytes of memory. There may be an integer overflow. There were similar
problems elsewhere in GDAL.

If you can provide a sample dataset please file a bug report at
http://trac.osgeo.org/gdal/newticket mentioning your database and driver
setup.

---------- Forwarded message ----------
From: Gregor at HostGIS <gregor@hostgis.com>
Date: Fri, Feb 5, 2010 at 10:29 AM
Subject: Re: [gdal-dev] ODBC as OGR data source?
To: Chaitanya kumar CH <chaitanya.ch@gmail.com>


Okay, here you go...

http://pastebin.com/m18fce732


-- 
HostGIS, Open Source solutions for the global GIS community
Greg Allensworth - SysAdmin, Programmer, GIS Person, Security
  Network+   Server+   A+   Security+   Linux+
  PHP   PostgreSQL   MySQL   DHTML/JavaScript/AJAX

"No one cares if you can back up ? only if you can recover."



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100205/90d7b14d/attachment-0001.html
From gregor at hostgis.com  Fri Feb  5 01:53:35 2010
From: gregor at hostgis.com (Gregor at HostGIS)
Date: Fri Feb  5 01:53:43 2010
Subject: [gdal-dev] ODBC as OGR data source?
In-Reply-To: <eb502d881002042137s4752de19r200f246552767e2d@mail.gmail.com>
References: <4B6A105B.7080906@hostgis.com>	
	<eb502d881002031940m5547f22cq9eee5a1245d7fa19@mail.gmail.com>	
	<4B6B4373.8080005@hostgis.com>	
	<eb502d881002041828r3e2567bbk85236c876e7fef01@mail.gmail.com>	
	<4B6B8CD5.9080808@hostgis.com>	
	<eb502d881002041949l2c1fe78h7abac0261c41d20d@mail.gmail.com>	
	<4B6B97C8.2090601@hostgis.com>	
	<eb502d881002042029q59dfd49et51b689c76d033db@mail.gmail.com>	
	<4B6BA5BD.2020607@hostgis.com>
	<eb502d881002042137s4752de19r200f246552767e2d@mail.gmail.com>
Message-ID: <4B6BC06F.1070305@hostgis.com>

Thanks, Kumar, for all your help. I have filed a ticket, #3385

-- 
HostGIS, Open Source solutions for the global GIS community
Greg Allensworth - SysAdmin, Programmer, GIS Person, Security
    Network+   Server+   A+   Security+   Linux+
    PHP   PostgreSQL   MySQL   DHTML/JavaScript/AJAX

"No one cares if you can back up ? only if you can recover."
From dmorissette at mapgears.com  Fri Feb  5 07:53:07 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri Feb  5 07:53:13 2010
Subject: [gdal-dev] Important - GDAL 1.7.0 - Imagine/HFA Driver Produces
	Corrupt Files
In-Reply-To: <4B6BA34C.3060703@pobox.com>
References: <4B6BA34C.3060703@pobox.com>
Message-ID: <4B6C14B3.9040000@mapgears.com>

Frank Warmerdam wrote:
> 
> I consider this problem very serious, and the longer that GDAL 1.7.0
> is in use the more of these corrupt Imagine files will be produced and
> cause problems for the world.  For that reason, I would like to press
> ahead to produce a GDAL 1.7.1 release soon, and to mark GDAL 1.7.0 
> deprecated
> due to this serious bug.  Does anyone feel this is overkill?
> 
> Are there any other high priority fixes folks would like to see in a 
> GDAL 1.7.1
> release?  I am thinking of preparing an RC on Monday if there is no 
> objection.
> 

I am not able to judge the importance of that HFA issue, but I am +1 on 
rushing out a 1.7.1 with that single fix if you feel it's worthwhile.

With respect to calling a release deprecated, doesn't the production of 
a point release implicitly deprecate the previous releases of the same 
stable branch in most users mind? I have no objection but am not sure of 
the value of calling 1.7.0 deprecated since I don't think distribution 
maintainers such as DebianGIS or UbuntuGIS have a mechanism to deprecate 
a package anyway (at best they can make a patch for the release I 
think). That being said, GDAL 1.7.0 has not been picked up yet by 
DebianGIS and UbuntuGIS due to some build issues, so they will be able 
to jump straight to 1.7.1 in this specific case. I can't speak for the 
other distributions.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From woklist at kyngchaos.com  Fri Feb  5 09:43:27 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Fri Feb  5 09:43:31 2010
Subject: [gdal-dev] some 1.7 autotest issues
In-Reply-To: <6045CECF-305A-415B-A9BC-36F259455D79@kyngchaos.com>
References: <6045CECF-305A-415B-A9BC-36F259455D79@kyngchaos.com>
Message-ID: <9F40FDA7-D2A0-4A86-8442-2A137DF11088@kyngchaos.com>

Found libtiff 4 beta5, problem solved.  Sorry for the noise.

On Feb 3, 2010, at 8:51 PM, William Kyngesburye wrote:

> I'm working thru a few autotest problems for GDAL 1.7 on OSX.  This one looks like it may be easily solved:
> 
>  TEST: tiff_write_56 ... fail
>    color table seemingly not cleared.
>  TEST: tiff_write_57 ... fail
>    did not get expected geotransform, perhaps unset is not working?
> 
> Are there new features in libtiff CVS?  I'm using a CVS version from May 2009.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those least suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy


From hobu.inc at gmail.com  Fri Feb  5 09:41:14 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Fri Feb  5 09:53:22 2010
Subject: [gdal-dev] Important - GDAL 1.7.0 - Imagine/HFA Driver Produces
	Corrupt Files
In-Reply-To: <4B6BA34C.3060703@pobox.com>
References: <4B6BA34C.3060703@pobox.com>
Message-ID: <1729ACF0-0E2F-44BC-BF7E-7067ED09C9CB@gmail.com>


On Feb 4, 2010, at 10:49 PM, Frank Warmerdam wrote:

> Folks,
> 
> Ivan has discovered that GDAL 1.7.0 is producing HFA files that are
> corrupt - that is they are only readable with GDAL.  Imagine and older
> versions of ArcGIS fail to read them.  The problem is described in:
> 
>  http://trac.osgeo.org/gdal/ticket/3382
> 
> I consider this problem very serious, and the longer that GDAL 1.7.0
> is in use the more of these corrupt Imagine files will be produced and
> cause problems for the world.  For that reason, I would like to press
> ahead to produce a GDAL 1.7.1 release soon, and to mark GDAL 1.7.0 deprecated
> due to this serious bug.  Does anyone feel this is overkill?
> 
> Are there any other high priority fixes folks would like to see in a GDAL 1.7.1
> release?  I am thinking of preparing an RC on Monday if there is no objection.

+1.  Except for BigTIFF, the HFA driver is one of the consistent large file drivers we have.  Instead of marking it deprecated, I think we should retract the release (remove it from download.osgeo.org) and immediately issue 1.7.1 RC1 today.  1.7.0 hasn't been disseminated that widely, and a new release shouldn't be that disruptive to downstream packagers that are just starting to incorporate 1.7.

Was this just an issue of limited test coverage?

Howard

From nhv at cape.com  Fri Feb  5 10:05:36 2010
From: nhv at cape.com (Norman Vine)
Date: Fri Feb  5 10:14:05 2010
Subject: [gdal-dev] Important - GDAL 1.7.0 - Imagine/HFA Driver Produces
	Corrupt Files
In-Reply-To: <1729ACF0-0E2F-44BC-BF7E-7067ED09C9CB@gmail.com>
References: <4B6BA34C.3060703@pobox.com>
	<1729ACF0-0E2F-44BC-BF7E-7067ED09C9CB@gmail.com>
Message-ID: <83A8DD85-E274-4650-951B-EEEB29E5FF02@cape.com>


On Feb 5, 2010, at 9:41 AM, Howard Butler wrote:

>
> On Feb 4, 2010, at 10:49 PM, Frank Warmerdam wrote:
>
>> Folks,
>>
>> Ivan has discovered that GDAL 1.7.0 is producing HFA files that are
>> corrupt - that is they are only readable with GDAL.  Imagine and  
>> older
>> versions of ArcGIS fail to read them.

....

>> I consider this problem very serious, and the longer that GDAL 1.7.0
>> is in use the more of these corrupt Imagine files will be produced  
>> and
>> cause problems for the world.

...

> +1.  Except for BigTIFF, the HFA driver is one of the consistent  
> large file drivers we have.  Instead of marking it deprecated, I  
> think we should retract the release (remove it from  
> download.osgeo.org) and immediately issue 1.7.1 RC1 today.

+1 on retracting the release

There are enough poorly formatted images in the wild already

Cheers

Norman
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100205/66870b23/attachment.html
From woklist at kyngchaos.com  Fri Feb  5 10:19:10 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Fri Feb  5 10:19:14 2010
Subject: [gdal-dev] another test failure - dods raster, GDALCopyWordsFromT()
Message-ID: <C5FD2074-51A1-4711-A290-985C243EF4AA@kyngchaos.com>

gdrivers/DODS test 5 is crashing in GDALCopyWordsFromT().  I see that there was a major overhaul of GDALCopyWords to improve performance.  Is there anything else other than performance that I'd lose if I forced it to use the old GDALCopyWords?

... I noticed that the x-flip operation (what this test is checking) in dods IReadBlock() has a '-nBytesPerPixel' in the destination pixel offset, while the y-flip operation uses 'nBytesPerPixel'.  Could this be a problem?  (Or more likely I just don't understand what it's doing ;)

Anyways, I'll see if I can narrow down the GDALCopyWordsFromT() problem.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

First Pogril: Why is life like sticking your head in a bucket filled with hyena offal?
Second Pogril: I don't know.  Why IS life like sticking your head in a bucket filled with hyena offal?
First Pogril: I don't know either.  Wretched, isn't it?

-HitchHiker's Guide to the Galaxy


From gregcoats at mac.com  Fri Feb  5 10:29:11 2010
From: gregcoats at mac.com (Greg Coats)
Date: Fri Feb  5 10:29:17 2010
Subject: [gdal-dev] Important - GDAL 1.7.0 - Imagine/HFA Driver Produces
	Corrupt Files
In-Reply-To: <4B6C14B3.9040000@mapgears.com>
References: <4B6BA34C.3060703@pobox.com> <4B6C14B3.9040000@mapgears.com>
Message-ID: <D59C95E3-F68A-4FDC-8322-5267598342B9@mac.com>

Even though GDAL 1.7.0 RC1 was released on 19 Jan 2010, and GDAL 1.7.0 RC1 is GDAL 1.7.0, GDAL 1.7.0 is also not available to the Apple Mac OS X community from http://www.kyngchaos.com , and since GDAL 1.7.0 is being retracted, I doubt that GDAL 1.7.0 will ever be available to the Mac OS X community.

There are capabilities not in GDAL prior to 1.7.0, that are in GDAL 1.7.0 that I need to use.
I am +1 for preparing and releasing GDAL 1.7.1 RC1 today.
Greg

On Feb 5, 2010, at 7:53 AM, Daniel Morissette wrote:

> GDAL 1.7.0 has not been picked up yet by DebianGIS and UbuntuGIS

From matt at klaric.com  Fri Feb  5 10:52:35 2010
From: matt at klaric.com (Matt Klaric)
Date: Fri Feb  5 10:52:39 2010
Subject: [gdal-dev] Important - GDAL 1.7.0 - Imagine/HFA Driver Produces 
	Corrupt Files
In-Reply-To: <D59C95E3-F68A-4FDC-8322-5267598342B9@mac.com>
References: <4B6BA34C.3060703@pobox.com> <4B6C14B3.9040000@mapgears.com>
	<D59C95E3-F68A-4FDC-8322-5267598342B9@mac.com>
Message-ID: <eba00f2b1002050752j65f41b91l2c4e8bfe24913a3e@mail.gmail.com>

On Fri, Feb 5, 2010 at 8:41 AM, Howard Butler <hobu.inc@gmail.com> wrote:
> +1.  Except for BigTIFF, the HFA driver is one of the consistent large
file drivers we have.  Instead of marking it deprecated, I think we should
retract the release (remove it from download.osgeo.org) and immediately
issue 1.7.1 RC1 today.  1.7.0 hasn't been disseminated that widely, and a
new release shouldn't be that disruptive to downstream packagers that are
just starting to incorporate 1.7.

+1    I would be in favor of a quick release on the new RC.




On Fri, Feb 5, 2010 at 9:29 AM, Greg Coats <gregcoats@mac.com> wrote:

> GDAL 1.7.0 is also not available to the Apple Mac OS X community from
> http://www.kyngchaos.com , and since GDAL 1.7.0 is being retracted, I
> doubt that GDAL 1.7.0 will ever be available to the Mac OS X community.


The source code paired with a compiler makes GDAL available to the Mac OS X
community: http://download.osgeo.org/gdal/

--matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100205/a8ee8012/attachment.html
From warmerdam at pobox.com  Fri Feb  5 13:30:36 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb  5 13:30:36 2010
Subject: [gdal-dev] GDAL / Oracle / GeoRaster Webinar
Message-ID: <4B6C63CC.1060307@pobox.com>

Folks,

Ivan Lucena will be participating in a Webinar next Thursday (Feb 11th,
2-3pm EST) that will be discussing Oracle GeoRaster support in GDAL
and possibly a variety of related topics.  The Webinar is hosted by
Direction Magazine.  More information, and registration information
is available at:

   https://www2.gotomeeting.com/register/426704834

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Fri Feb  5 14:37:07 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Feb  5 14:37:21 2010
Subject: [gdal-dev] Important - GDAL 1.7.0 - Imagine/HFA Driver Produces
	Corrupt Files
In-Reply-To: <1729ACF0-0E2F-44BC-BF7E-7067ED09C9CB@gmail.com>
References: <4B6BA34C.3060703@pobox.com>
	<1729ACF0-0E2F-44BC-BF7E-7067ED09C9CB@gmail.com>
Message-ID: <201002052037.08315.even.rouault@mines-paris.org>

Definitely +1 for retracting the 1.7.0 release and preparing a 1.7.1RC1.

Users of FWTools versions released after 28th February 2009 should be carefull 
too if they have produced HFA images.

Even

Le Friday 05 February 2010 15:41:14 Howard Butler, vous avez ?crit?:
> On Feb 4, 2010, at 10:49 PM, Frank Warmerdam wrote:
> > Folks,
> >
> > Ivan has discovered that GDAL 1.7.0 is producing HFA files that are
> > corrupt - that is they are only readable with GDAL.  Imagine and older
> > versions of ArcGIS fail to read them.  The problem is described in:
> >
> >  http://trac.osgeo.org/gdal/ticket/3382
> >
> > I consider this problem very serious, and the longer that GDAL 1.7.0
> > is in use the more of these corrupt Imagine files will be produced and
> > cause problems for the world.  For that reason, I would like to press
> > ahead to produce a GDAL 1.7.1 release soon, and to mark GDAL 1.7.0
> > deprecated due to this serious bug.  Does anyone feel this is overkill?
> >
> > Are there any other high priority fixes folks would like to see in a GDAL
> > 1.7.1 release?  I am thinking of preparing an RC on Monday if there is no
> > objection.
>
> +1.  Except for BigTIFF, the HFA driver is one of the consistent large file
> drivers we have.  Instead of marking it deprecated, I think we should
> retract the release (remove it from download.osgeo.org) and immediately
> issue 1.7.1 RC1 today.  1.7.0 hasn't been disseminated that widely, and a
> new release shouldn't be that disruptive to downstream packagers that are
> just starting to incorporate 1.7.
>
> Was this just an issue of limited test coverage?
>
> Howard
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From szekerest at gmail.com  Fri Feb  5 15:01:36 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Feb  5 15:01:38 2010
Subject: [gdal-dev] Important - GDAL 1.7.0 - Imagine/HFA Driver Produces 
	Corrupt Files
In-Reply-To: <4B6BA34C.3060703@pobox.com>
References: <4B6BA34C.3060703@pobox.com>
Message-ID: <f3b73b7d1002051201o6afbe13oc41f38b6e7fbd85b@mail.gmail.com>

+1 for the new release.

Best regards,

Tamas



2010/2/5 Frank Warmerdam <warmerdam@pobox.com>

> Folks,
>
> Ivan has discovered that GDAL 1.7.0 is producing HFA files that are
> corrupt - that is they are only readable with GDAL.  Imagine and older
> versions of ArcGIS fail to read them.  The problem is described in:
>
>  http://trac.osgeo.org/gdal/ticket/3382
>
> I consider this problem very serious, and the longer that GDAL 1.7.0
> is in use the more of these corrupt Imagine files will be produced and
> cause problems for the world.  For that reason, I would like to press
> ahead to produce a GDAL 1.7.1 release soon, and to mark GDAL 1.7.0
> deprecated
> due to this serious bug.  Does anyone feel this is overkill?
>
> Are there any other high priority fixes folks would like to see in a GDAL
> 1.7.1
> release?  I am thinking of preparing an RC on Monday if there is no
> objection.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100205/1ab50bfa/attachment.html
From antonio.valentino at tiscali.it  Sat Feb  6 05:34:54 2010
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Sat Feb  6 05:35:02 2010
Subject: [gdal-dev] gdal_translate as a VRTDataset factory
In-Reply-To: <20100204232052.GA28021@enricozini.org>
References: <20100204232052.GA28021@enricozini.org>
Message-ID: <20100206113454.4350b479@mac1.local.net>

Hi Enrico,

Il giorno Thu, 4 Feb 2010 23:20:52 +0000
Enrico Zini <enrico@enricozini.org> ha scritto:

> Hello,
> 
> I needed a way to create virtual datasets in a way similar to what
> gdal_translate is doing. I noticed that gdal_translate is basically a
> tool to construct a VRTDataset, so I proceeded by transforming
> gdal_translate.cc into a VRTDataset builder class.
> 
> The result is gdaltranslate.{h,cpp} in 
> http://meteosatlib.svn.sourceforge.net/viewvc/meteosatlib/gdal/trunk/utils/
> (I did not deal with subdatasets because it is a part of GDAL I have
> not explored yet).
> 
> I reckon such a VRTDataset generator could be useful to many, and
> since its interface (necessarily) closely matches the way
> gdal_translate works, it is also quite easy to learn.
> 
> Could it make sense to package GDALTranslate as part of GDAL, and just
> rebase gdal_translate off it?

I think it is a great idea!

ciao


-- 
Antonio Valentino
From jluis at ualg.pt  Sun Feb  7 17:27:28 2010
From: jluis at ualg.pt (jluis@ualg.pt)
Date: Sun Feb  7 17:27:41 2010
Subject: [gdal-dev] Building libecw on OSX 10.6
Message-ID: <20100207232728.16481rueyrziyezo@wmail.ualg.pt>

Hi,

I'm getting these (and more) errors while trying to build libecw on  
Mac OSx 10.6.
I could build on the previous cat, but not now on SL.
Any one did that?

Thanks

Joaquim Luis

../C/NCSnet/NCScnet3/NCSGetPasswordDlg.cpp:134: error: ?GetControlID?  
was not declared in this scope
../C/NCSnet/NCScnet3/NCSGetPasswordDlg.cpp:150: error:  
?GetControlByID? was not declared in this scope
../C/NCSnet/NCScnet3/NCSGetPasswordDlg.cpp:152: error:  
?GetControlData? was not declared in this scope
../C/NCSnet/NCScnet3/NCSGetPasswordDlg.cpp:171: error:  
?GetControl32BitValue? was not declared in this scope


----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From gregcoats at mac.com  Sun Feb  7 17:47:20 2010
From: gregcoats at mac.com (Greg Coats)
Date: Sun Feb  7 17:47:48 2010
Subject: [gdal-dev] Building libecw on OSX 10.6
In-Reply-To: <20100207232728.16481rueyrziyezo@wmail.ualg.pt>
References: <20100207232728.16481rueyrziyezo@wmail.ualg.pt>
Message-ID: <C970D2BB-F861-47F9-A425-3F93DF9BA07B@mac.com>

You are using the source code for what version of GDAL? Greg

On Feb 7, 2010, at 5:27 PM, jluis@ualg.pt wrote:

> Hi,
> 
> I'm getting these (and more) errors while trying to build libecw on Mac OSx 10.6.
> I could build on the previous cat, but not now on SL.
> Any one did that?
> 
> Thanks
> 
> Joaquim Luis
> 
> ../C/NCSnet/NCScnet3/NCSGetPasswordDlg.cpp:134: error: ?GetControlID? was not declared in this scope
> ../C/NCSnet/NCScnet3/NCSGetPasswordDlg.cpp:150: error: ?GetControlByID? was not declared in this scope
> ../C/NCSnet/NCScnet3/NCSGetPasswordDlg.cpp:152: error: ?GetControlData? was not declared in this scope
> ../C/NCSnet/NCScnet3/NCSGetPasswordDlg.cpp:171: error: ?GetControl32BitValue? was not declared in this scope
From woklist at kyngchaos.com  Sun Feb  7 17:53:17 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sun Feb  7 17:53:21 2010
Subject: [gdal-dev] Building libecw on OSX 10.6
In-Reply-To: <20100207232728.16481rueyrziyezo@wmail.ualg.pt>
References: <20100207232728.16481rueyrziyezo@wmail.ualg.pt>
Message-ID: <27DBAC59-99FA-450F-9CB1-7C008B9CD4D9@kyngchaos.com>

That's because the NCS password dialog uses Carbon APIs, which are not 64bit (and will never be).  And since Leica isn't maintaining ECW lib, they will probably never update it to use Cocoa.

What I do is just completely disable the password dialog feature of ECW.  See my ECW build page (includes a few other patches also):

http://www.kyngchaos.com/macosx/build/ecw

On Feb 7, 2010, at 4:27 PM, jluis@ualg.pt wrote:

> Hi,
> 
> I'm getting these (and more) errors while trying to build libecw on Mac OSx 10.6.
> I could build on the previous cat, but not now on SL.
> Any one did that?
> 
> Thanks
> 
> Joaquim Luis
> 
> ../C/NCSnet/NCScnet3/NCSGetPasswordDlg.cpp:134: error: ?GetControlID? was not declared in this scope
> ../C/NCSnet/NCScnet3/NCSGetPasswordDlg.cpp:150: error: ?GetControlByID? was not declared in this scope
> ../C/NCSnet/NCScnet3/NCSGetPasswordDlg.cpp:152: error: ?GetControlData? was not declared in this scope
> ../C/NCSnet/NCScnet3/NCSGetPasswordDlg.cpp:171: error: ?GetControl32BitValue? was not declared in this scope
> 
> 
> ----------------------------------------------------------------
> This message was sent using IMP, the Internet Messaging Program.
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those least suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy


From jluis at ualg.pt  Sun Feb  7 18:51:01 2010
From: jluis at ualg.pt (jluis@ualg.pt)
Date: Sun Feb  7 18:51:07 2010
Subject: [gdal-dev] Building libecw on OSX 10.6
In-Reply-To: <27DBAC59-99FA-450F-9CB1-7C008B9CD4D9@kyngchaos.com>
References: <20100207232728.16481rueyrziyezo@wmail.ualg.pt>
	<27DBAC59-99FA-450F-9CB1-7C008B9CD4D9@kyngchaos.com>
Message-ID: <20100208005101.21230b59dmxk1dd4@wmail.ualg.pt>

Thanks William,

I had also hacked NCSGetPasswordDlg.cpp to not let it go trough the  
offending calls but went back and applied your patches.

Joaquim

Quoting William Kyngesburye <woklist@kyngchaos.com>:

> That's because the NCS password dialog uses Carbon APIs, which are  
> not 64bit (and will never be).  And since Leica isn't maintaining  
> ECW lib, they will probably never update it to use Cocoa.
>
> What I do is just completely disable the password dialog feature of  
> ECW.  See my ECW build page (includes a few other patches also):
>
> http://www.kyngchaos.com/macosx/build/ecw
>
> On Feb 7, 2010, at 4:27 PM, jluis@ualg.pt wrote:
>
>> Hi,
>>
>> I'm getting these (and more) errors while trying to build libecw on  
>> Mac OSx 10.6.
>> I could build on the previous cat, but not now on SL.
>> Any one did that?
>>
>> Thanks
>>
>> Joaquim Luis
>>
>> ../C/NCSnet/NCScnet3/NCSGetPasswordDlg.cpp:134: error:  
>> ?GetControlID? was not declared in this scope
>> ../C/NCSnet/NCScnet3/NCSGetPasswordDlg.cpp:150: error:  
>> ?GetControlByID? was not declared in this scope
>> ../C/NCSnet/NCScnet3/NCSGetPasswordDlg.cpp:152: error:  
>> ?GetControlData? was not declared in this scope
>> ../C/NCSnet/NCScnet3/NCSGetPasswordDlg.cpp:171: error:  
>> ?GetControl32BitValue? was not declared in this scope
>>
>>
>> ----------------------------------------------------------------
>> This message was sent using IMP, the Internet Messaging Program.
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> "Those people who most want to rule people are, ipso-facto, those  
> least suited to do it."
>
> - A rule of the universe, from the HitchHiker's Guide to the Galaxy
>
>
>
>



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.

From weixj2003ld at 163.com  Mon Feb  8 03:00:06 2010
From: weixj2003ld at 163.com (weixj2003ld)
Date: Mon Feb  8 03:15:23 2010
Subject: [gdal-dev] how to get heightmap
Message-ID: <a49267.814d.126ac97ad33.Coremail.weixj2003ld@163.com>

Hi,
Now,I have a .tif file(it is a satallite photo),How to get the heightmap of it?
Kind regards. 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100208/f4decb3e/attachment.html
From peder at axensten.se  Mon Feb  8 04:56:53 2010
From: peder at axensten.se (Peder Axensten)
Date: Mon Feb  8 04:56:57 2010
Subject: [gdal-dev] Raster test files
Message-ID: <52A31E03-FB58-40AC-AE03-C86EFD86F9C8@axensten.se>

Are there any larger (>2 Gbyte sizes) raster test files to test extremes on?
I've found files in various data directories in http://trac.osgeo.org/gdal/browser/trunk/, but they all seem to be rather small?

I'm trying to interest Lemke Software to use GDAL in their GraphicConverter. There doesn't seem to be many raster viewers/utilities around for Mac OS X...

Best regards,

Peder Axensten
Research engineer

Swedish University of Agricultural Sciences
Forest Resource Management
Remote Sensing Laboratory
Skogmarksgr?nd
se-90183 Ume?
Sweden

Phone: +46-90-786.8500
http://www.srh.slu.se/rsl

From chaitanya.ch at gmail.com  Mon Feb  8 05:11:41 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Feb  8 05:11:48 2010
Subject: [gdal-dev] Raster test files
In-Reply-To: <52A31E03-FB58-40AC-AE03-C86EFD86F9C8@axensten.se>
References: <52A31E03-FB58-40AC-AE03-C86EFD86F9C8@axensten.se>
Message-ID: <eb502d881002080211m679a254eu3a0052cdc4e9e908@mail.gmail.com>

Peder,

You can try to prepare a 'fake' large file from an existing smaller file by
using the gdal_translate utility with the -outsize 200% 200% option. You can
play with the value of the scale to give you an appropriate size.

On Mon, Feb 8, 2010 at 3:26 PM, Peder Axensten <peder@axensten.se> wrote:

> Are there any larger (>2 Gbyte sizes) raster test files to test extremes
> on?
> I've found files in various data directories in
> http://trac.osgeo.org/gdal/browser/trunk/, but they all seem to be rather
> small?
>
> I'm trying to interest Lemke Software to use GDAL in their
> GraphicConverter. There doesn't seem to be many raster viewers/utilities
> around for Mac OS X...
>
> Best regards,
>
> Peder Axensten
> Research engineer
>
> Swedish University of Agricultural Sciences
> Forest Resource Management
> Remote Sensing Laboratory
> Skogmarksgr?nd
> se-90183 Ume?
> Sweden
>
> Phone: +46-90-786.8500
> http://www.srh.slu.se/rsl
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100208/a3ba0612/attachment.html
From rpw at globema.pl  Mon Feb  8 07:13:37 2010
From: rpw at globema.pl (Ralf Wagner)
Date: Mon Feb  8 07:14:46 2010
Subject: [gdal-dev] Cannot set transparent color for GeoTIFFs
In-Reply-To: <AA6DDFA4E046A24585BC828A78155B4706D136AD@US-MAIL.ingrnet.com>
References: <AA6DDFA4E046A24585BC828A78155B4706D136AD@US-MAIL.ingrnet.com>
Message-ID: <4B6FFFF1.5010703@globema.pl>

Unfortunately I have absolutely no idea how to deal with this 
transparency problem - all my trials failed.
I am experimenting on four properly referenced GeoTiff, overlapping 
files with white margins.
My (temporary) goal was to obtain ONE GeoTIFF file from these FOUR 
source files - but, of course, without white margins between them.
So, first I created VRT file from my source GeoTiffs:

gdalbuildvrt -srcnodata "255 255 255" All.vrt Ac3.tif Ac4.tif Ca1.tif 
Ca2.tif

and then GeoTiff from this VRT file:

gdal_translate -of GTiff All.vrt All.tif

But white stripes still existed. Also, additional step of creating 
separate VRT files for each GeoTiff file and using these files as 
components for "All.vrt" didn't help. Messing around with -vrtnodata, 
-hidenodata etc. didn't help also. Using -addalpha option causes warning 
during destination GeoTiff file generation: "Unable to export color 
table to GeoTIFF file" and resulting file is broken.

So, I am stuck...

Do you have any idea what can I try next?

Best regards,
Ralf Wagner
From chaitanya.ch at gmail.com  Mon Feb  8 07:59:20 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Feb  8 08:05:05 2010
Subject: [gdal-dev] Cannot set transparent color for GeoTIFFs
In-Reply-To: <4B6FFFF1.5010703@globema.pl>
References: <AA6DDFA4E046A24585BC828A78155B4706D136AD@US-MAIL.ingrnet.com>
	<4B6FFFF1.5010703@globema.pl>
Message-ID: <eb502d881002080459p13c923ddi6161d534816e0cb6@mail.gmail.com>

Ralf,

Your tif files seem to use color tables. You may be able to edit the color
table to represent RGBA instead of RGB with A value set to 0 for nodata and
1 elsewhere. I don't know much about handling the color tables.

If you don't want to deal color tables, use the -expand option in
gdal_translate.
First use "-expand rgb" to create RBG tiffs. Then use gdalbuildvrt with
-srcnodata and -addalpha options. Finally, convert it All.tif using
gdal_translate.

On Mon, Feb 8, 2010 at 5:43 PM, Ralf Wagner <rpw@globema.pl> wrote:

> Unfortunately I have absolutely no idea how to deal with this transparency
> problem - all my trials failed.
> I am experimenting on four properly referenced GeoTiff, overlapping files
> with white margins.
> My (temporary) goal was to obtain ONE GeoTIFF file from these FOUR source
> files - but, of course, without white margins between them.
> So, first I created VRT file from my source GeoTiffs:
>
> gdalbuildvrt -srcnodata "255 255 255" All.vrt Ac3.tif Ac4.tif Ca1.tif
> Ca2.tif
>
> and then GeoTiff from this VRT file:
>
> gdal_translate -of GTiff All.vrt All.tif
>
> But white stripes still existed. Also, additional step of creating separate
> VRT files for each GeoTiff file and using these files as components for
> "All.vrt" didn't help. Messing around with -vrtnodata, -hidenodata etc.
> didn't help also. Using -addalpha option causes warning during destination
> GeoTiff file generation: "Unable to export color table to GeoTIFF file" and
> resulting file is broken.
>
> So, I am stuck...
>
> Do you have any idea what can I try next?
>
> Best regards,
> Ralf Wagner
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100208/b19ff647/attachment-0001.html
From peter.rankor at googlemail.com  Mon Feb  8 10:54:07 2010
From: peter.rankor at googlemail.com (Peter Rankor)
Date: Mon Feb  8 11:02:01 2010
Subject: [gdal-dev] gdal_rasterize use SHP FID as burn attribute
Message-ID: <394cacf21002080754l2eb2f1f9mcb88d0f882796e31@mail.gmail.com>

List,

I need to rasterize a polygon layer coming from a SHP file. However, the
values in the outputraster need to be the FID of the corresponding polygon.

My command:
gdal_rasterize -a FID -l FECS FECS.shp flattenedRaster.tif

I get:
Failed to find field FID on layer FECS, skipping.

And the program aborts.

Any idea how to use a FID as rasterization attribute?

Regards,
Peter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100208/d3640144/attachment.html
From chaitanya.ch at gmail.com  Mon Feb  8 12:25:44 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Feb  8 12:25:51 2010
Subject: [gdal-dev] Cannot set transparent color for GeoTIFFs
In-Reply-To: <AA6DDFA4E046A24585BC828A78155B4706D141F1@US-MAIL.ingrnet.com>
References: <AA6DDFA4E046A24585BC828A78155B4706D141F1@US-MAIL.ingrnet.com>
Message-ID: <eb502d881002080925ode5bbdp8b04914f28c5812b@mail.gmail.com>

>From what Ed said, editing the color table is useless. Try to expand the
tiff to rgb and proceed from there. At least the error message should
change. ;-)

On Mon, Feb 8, 2010 at 8:52 PM, Grissom, Edward (Ed) <
ed.grissom@intergraph.com> wrote:

>
> Are you aware that the TIFF (and GeoTIFF) spec does not allow you to set
> a transparent color ?
>
> The TIFF spec allows a transparency bit-mask or an alpha channel -- each
> of which covers the entire image, but does not allow a specific color
> value to be used as transparent.
>
> I believe that the spec also forbids a alpha channel on the color table
> itself.   It may allow one on a color indexed image, but it may be that
> GDAL has not implemented support for that yet.
>
>
>
> --
> ed grissom
> ed.grissom@intergraph.com
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100208/d05a0fef/attachment.html
From warmerdam at pobox.com  Mon Feb  8 14:58:08 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb  8 14:58:13 2010
Subject: [gdal-dev] GDAL/OGR 1.7.1RC1 Prepared
Message-ID: <4B706CD0.4000300@pobox.com>

Folks,

I have prepared a GDAL/OGR 1.7.1 release candidate at:

   http://download.osgeo.org/gdal/gdal171RC1.zip
   http://download.osgeo.org/gdal/gdal171.zip.md5
   http://download.osgeo.org/gdal/gdal-1.7.1RC1.tar.gz
   http://download.osgeo.org/gdal/gdal-1.7.1.tar.gz.md5

Feedback is welcome, though as this is a fairly high priority to push out,
I'd prefer not to get stalled on minor bugs or improvements. But certainly
we want to prevent any regressions from 1.7.0.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Feb  8 15:02:23 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb  8 15:02:28 2010
Subject: [gdal-dev] Motion: Promote GDAL/OGR 1.7.1RC1 to release and retract
	1.7.0
Message-ID: <4B706DCF.2080404@pobox.com>

Motion: The GDAL/OGR 1.7.1 RC1 release candidate is promoted to a full
release, and the GDAL/OGR 1.7.0 release is retracted due to the serious
bug with Erdas Imagine file creation (http://trac.osgeo.org/gdal/ticket/3382)

---

Folks,

As previously discussed, I think bug 3382 is a serious regression in the 1.7.0
release, and I'd like to formally retract the release (as we did once previosly
with a release that introduced an ABI compatability problem). I have already
removed the source code from the servers and added notes that I anticipate this
release being released.

I'd also like to promote the 1.7.1 RC1 published today to be a final release
to replace 1.7.0 (as 1.7.1).

This motion will be open for 48 hours to allow testing of 1.7.1RC1 and to
consider the merits of my request.

Starting with:

+1 Frank

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From rpw at globema.pl  Mon Feb  8 17:08:52 2010
From: rpw at globema.pl (Ralf Wagner)
Date: Mon Feb  8 17:09:03 2010
Subject: [gdal-dev] Cannot set transparent color for GeoTIFFs
In-Reply-To: <eb502d881002080925ode5bbdp8b04914f28c5812b@mail.gmail.com>
References: <AA6DDFA4E046A24585BC828A78155B4706D141F1@US-MAIL.ingrnet.com>
	<eb502d881002080925ode5bbdp8b04914f28c5812b@mail.gmail.com>
Message-ID: <4B708B74.5020302@globema.pl>

Thanks a lot!!!
It was crucial - to expand color table to RGB! After that everything 
works perfect.
Once again: big thank you!

Ralf Wagner

Chaitanya kumar CH pisze:
> From what Ed said, editing the color table is useless. Try to expand 
> the tiff to rgb and proceed from there. At least the error message 
> should change. ;-)
>
> On Mon, Feb 8, 2010 at 8:52 PM, Grissom, Edward (Ed) 
> <ed.grissom@intergraph.com <mailto:ed.grissom@intergraph.com>> wrote:
>
>
>     Are you aware that the TIFF (and GeoTIFF) spec does not allow you
>     to set
>     a transparent color ?
>
>     The TIFF spec allows a transparency bit-mask or an alpha channel
>     -- each
>     of which covers the entire image, but does not allow a specific color
>     value to be used as transparent.
>
>     I believe that the spec also forbids a alpha channel on the color
>     table
>     itself.   It may allow one on a color indexed image, but it may be
>     that
>     GDAL has not implemented support for that yet.
>
>
>
>     --
>     ed grissom
>     ed.grissom@intergraph.com <mailto:ed.grissom@intergraph.com>
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9848167848
> 17.241582N 80.142635E


-- 
Ralf Wagner



Globema Sp. z o.o., ul. Rostafi?skich 4, 02-593 Warszawa, Poland
tel. (+48) 22 848 73 13, fax (+48) 22 848 68 83
www.globema.com.pl <http://www.globema.com.pl>



"Tre?? tej wiadomo?ci mo?e zawiera? prawnie chronione informacje poufne.
Je?li otrzymali?cie j? Pa?stwo przez pomy?k?, prosimy o niezw?oczne
powiadomienie o tym nadawcy oraz jej usuni?cie z Pa?stwa komputera, bez
wykonywania, dystrybuowania lub zatrzymywania jakiejkolwiek jej kopii.

This message may contain confidential information protected by law. If
you have received this message by mistake, please immediately inform the
sender of the mistake and delete this message from your system without
making, distributing or retaining any copies of it." 

From warmerdam at pobox.com  Mon Feb  8 19:56:45 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb  8 19:56:47 2010
Subject: [gdal-dev] gdal_rasterize use SHP FID as burn attribute
In-Reply-To: <394cacf21002080754l2eb2f1f9mcb88d0f882796e31@mail.gmail.com>
References: <394cacf21002080754l2eb2f1f9mcb88d0f882796e31@mail.gmail.com>
Message-ID: <4B70B2CD.6000201@pobox.com>

Peter Rankor wrote:
> List,
> 
> I need to rasterize a polygon layer coming from a SHP file. However, the 
> values in the outputraster need to be the FID of the corresponding polygon.
> 
> My command:
> gdal_rasterize -a FID -l FECS FECS.shp flattenedRaster.tif

Peter,

Could you try:

gdal_rasterize -a FID \
     -sql "select FID, * from FECS" FEC.shp flattenedRaster.tif

The ExecuteSQL() method invoked for -sql should be able to treat FID
as a pseudo-attribute.  It's a bit unfortunate this sort of thing doesn't
work directly without the SQL route.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Feb  8 20:12:05 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb  8 20:12:07 2010
Subject: [gdal-dev] Re: DXF reader question (wrong header?)
In-Reply-To: <25bc040b1002081702j67a9f1e0j132f00a5f2a14a3d@mail.gmail.com>
References: <25bc040b1002081702j67a9f1e0j132f00a5f2a14a3d@mail.gmail.com>
Message-ID: <4B70B665.4030608@pobox.com>

Stefan Keller wrote:
> Dear Frank, dear all
> 
> I have a question reading in a DXF file which is an official test data
> set from the Swiss Federal Office of Topography (swisstopo) available
> here: http://tinyurl.com/rimini-testdata . When I try to import the
> data I get an error:
> 
>> ogrinfo rimtestgp.dxf
> "FAILURE: Unable to open datasource `rimtestgp.dxf' ..."
> 
> I tried to add a header but with no success: What is wrong? Is it the
> data or the DXF reader?

Stefan,

Indeed the problem is that this file is only an ENTITIES section without
any of the other headers.  If you file a ticket on the issue, I will
try and extend the DXF read to support this formulation.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From gregcoats at mac.com  Mon Feb  8 21:12:09 2010
From: gregcoats at mac.com (Greg Coats)
Date: Mon Feb  8 21:12:14 2010
Subject: [gdal-dev] GDAL/OGR 1.7.1RC1 Prepared
In-Reply-To: <4B706CD0.4000300@pobox.com>
References: <4B706CD0.4000300@pobox.com>
Message-ID: <5CB97D03-14C4-445C-9AA2-EF6993FD46E3@mac.com>

Frank,
Thanks for preparing this GDAL 1.7.1 Release Candidate 1.
I observe that line 2578 of frmts/jp2kak/jp2kakdataset.cpp has the old needlessly restrictive
if( dfQuality < 1.0 || dfQuality > 100.0 )
even though you had replaced that restriction on or before 25 Jan 2010 with the less restrictive
if( dfQuality < 0.01 || dfQuality > 100.0 )
I request that the 25 Jan 2010 or later version of frmts/jp2kak/jp2kakdataset.cpp be included in the final release, otherwise people will have to wait until GDAL 1.7.2 before being able to use it.
This was not immediately obvious because all of the files in the RC have the same date created and date modified, today.
Greg

On Feb 8, 2010, at 2:58 PM, Frank Warmerdam wrote:

> Folks,
> 
> I have prepared a GDAL/OGR 1.7.1 release candidate at:
> 
>  http://download.osgeo.org/gdal/gdal171RC1.zip
>  http://download.osgeo.org/gdal/gdal171.zip.md5
>  http://download.osgeo.org/gdal/gdal-1.7.1RC1.tar.gz
>  http://download.osgeo.org/gdal/gdal-1.7.1.tar.gz.md5
> 
> Feedback is welcome, though as this is a fairly high priority to push out,
> I'd prefer not to get stalled on minor bugs or improvements. But certainly
> we want to prevent any regressions from 1.7.0.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100208/26983dd4/attachment-0001.html
From woklist at kyngchaos.com  Mon Feb  8 21:37:44 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Feb  8 21:37:48 2010
Subject: [gdal-dev] GDAL/OGR 1.7.1RC1 Prepared
In-Reply-To: <4B706CD0.4000300@pobox.com>
References: <4B706CD0.4000300@pobox.com>
Message-ID: <545F1B27-796B-447B-91D9-768063E82AD8@kyngchaos.com>

I'm now getting a test failure in the PDS driver.  Looks like r18694 - I guess 1.7.1 also needs a new autotest package.

On Feb 8, 2010, at 1:58 PM, Frank Warmerdam wrote:

> Folks,
> 
> I have prepared a GDAL/OGR 1.7.1 release candidate at:
> 
>  http://download.osgeo.org/gdal/gdal171RC1.zip
>  http://download.osgeo.org/gdal/gdal171.zip.md5
>  http://download.osgeo.org/gdal/gdal-1.7.1RC1.tar.gz
>  http://download.osgeo.org/gdal/gdal-1.7.1.tar.gz.md5
> 
> Feedback is welcome, though as this is a fairly high priority to push out,
> I'd prefer not to get stalled on minor bugs or improvements. But certainly
> we want to prevent any regressions from 1.7.0.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Time is an illusion - lunchtime doubly so."

- Ford Prefect


From hobu.inc at gmail.com  Mon Feb  8 21:46:33 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Mon Feb  8 21:51:21 2010
Subject: [gdal-dev] GDAL/OGR 1.7.1RC1 Prepared
In-Reply-To: <5CB97D03-14C4-445C-9AA2-EF6993FD46E3@mac.com>
References: <4B706CD0.4000300@pobox.com>
	<5CB97D03-14C4-445C-9AA2-EF6993FD46E3@mac.com>
Message-ID: <2A3037DE-DC2F-48BA-A694-1547CBD6BF70@gmail.com>


On Feb 8, 2010, at 8:12 PM, Greg Coats wrote:

>  otherwise people will have to wait until GDAL 1.7.2 before being able to use it.

I don't see the relaxing of this as any reason to hold up the release.  In fact, one could argue this is a new feature just as easily and should be targeted at 1.8.  A search found http://trac.osgeo.org/gdal/ticket/2801 and http://trac.osgeo.org/gdal/changeset/18657 which was in trunk, with no effort to target or backport this to 1.7 at this time.  

> This was not immediately obvious because all of the files in the RC have the same date created and date modified, today.

A few seconds reading 'svn log' or 'svn blame' output and looking at http://trac.osgeo.org/gdal/log/trunk/gdal/frmts/jp2kak/jp2kakdataset.cpp can show you what you are looking for.  

It is important to bring up your pet issue(s) *before* the release candidate is made, and not demand that we stop everything and turn the boat around afterward.  If you have something that is important to you, you should follow it, ticket it, and watch the code you care about during the period between releases.  Alternatively, filing tickets with patches and test cases attached will ensure quick resolution of your issue.  

Howard
From gregcoats at mac.com  Mon Feb  8 21:57:44 2010
From: gregcoats at mac.com (Greg Coats)
Date: Mon Feb  8 21:58:10 2010
Subject: [gdal-dev] GDAL/OGR 1.7.1RC1 Prepared
In-Reply-To: <4B706CD0.4000300@pobox.com>
References: <4B706CD0.4000300@pobox.com>
Message-ID: <F95CACDD-B92F-4FDC-A1A4-5F4F69AD94A5@mac.com>

Upon further investigation, I am left puzzled why the 25 Jan 2010 version of frmts/jp2kak/jp2kakdataset.cpp, that was successfully updated & enhanced by Frank, is not included in GDAL 1.7.1 RC1, particularly since the 27 Jan 2010 version (note: that is 2 days later) of swig/python/scripts/gdal_merge.py, that was successfully updated & enhanced by Chaitanya, is included.
I find it confusing (and false info) to see all of the files have the same date created and date modified, today, rather than reflecting the actual date the source code was really created and modified in Subversion.
I think I am supposed to vote numerically: -1 Greg Coats
Greg

On Feb 8, 2010, at 2:58 PM, Frank Warmerdam wrote:

> Folks,
> 
> I have prepared a GDAL/OGR 1.7.1 release candidate at:
> 
>  http://download.osgeo.org/gdal/gdal171RC1.zip
>  http://download.osgeo.org/gdal/gdal171.zip.md5
>  http://download.osgeo.org/gdal/gdal-1.7.1RC1.tar.gz
>  http://download.osgeo.org/gdal/gdal-1.7.1.tar.gz.md5
> 
> Feedback is welcome, though as this is a fairly high priority to push out,
> I'd prefer not to get stalled on minor bugs or improvements. But certainly
> we want to prevent any regressions from 1.7.0.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From gregcoats at mac.com  Mon Feb  8 22:08:42 2010
From: gregcoats at mac.com (Greg Coats)
Date: Mon Feb  8 22:08:46 2010
Subject: [gdal-dev] GDAL/OGR 1.7.1RC1 Prepared
In-Reply-To: <2A3037DE-DC2F-48BA-A694-1547CBD6BF70@gmail.com>
References: <4B706CD0.4000300@pobox.com>
	<5CB97D03-14C4-445C-9AA2-EF6993FD46E3@mac.com>
	<2A3037DE-DC2F-48BA-A694-1547CBD6BF70@gmail.com>
Message-ID: <D29249DB-D52C-4F78-B3C0-64AADA363123@mac.com>

Indeed I do!
The fixed & enhanced code for frmts/jp2kak/jp2kakdataset.cpp was actually available before GDAL 1.7.0 was released, but Frank elected not to include it, and I was given assurances at that time by Frank that the fixed jp2kakdataset.cpp would be include in the next release of GDAL. GDAL 1.7.1 is the next release. Also, an enhanced swig/python/scripts/gdal_merge.py, that was not entered until 2 days after jp2kakdataset.cp, is being included, so there is no logic, and no reason to exclude code from 2 days earlier that Frank himself wrote/altered by changing 1 line of code, and 1 comment line.
I vote against Howard.
Greg

On Feb 8, 2010, at 9:46 PM, Howard Butler wrote:

> I don't see the relaxing of this as any reason to hold up the release

From warmerdam at pobox.com  Mon Feb  8 22:10:26 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb  8 22:10:29 2010
Subject: [gdal-dev] GDAL/OGR 1.7.1RC1 Prepared
In-Reply-To: <F95CACDD-B92F-4FDC-A1A4-5F4F69AD94A5@mac.com>
References: <4B706CD0.4000300@pobox.com>
	<F95CACDD-B92F-4FDC-A1A4-5F4F69AD94A5@mac.com>
Message-ID: <4B70D222.80806@pobox.com>

Greg Coats wrote:
> Upon further investigation, I am left puzzled why the 25 Jan 2010 version of
> frmts/jp2kak/jp2kakdataset.cpp, that was successfully updated & enhanced by
> Frank, is not included in GDAL 1.7.1 RC1, particularly since the 27 Jan 2010
> version (note: that is 2 days later) of swig/python/scripts/gdal_merge.py,
> that was successfully updated & enhanced by Chaitanya, is included.

Greg,

We maintain separate source control branches for "trunk" (the development
version), and the stable release code bases for the 1.7.x releases.  So in
this case I judged the enchancement with regard to allowed quality values
to be insufficiently important to backport into the 1.7 stable branch.  Thus
it will only appear in the 1.8 release (likely in nearly a year).  Chaitanya
made the extra effort to ensure his changes went into trunk *and* the 1.7
stable branch as he judged them to be important bug fixes (I assume).

 >  I find
> it confusing (and false info) to see all of the files have the same date
> created and date modified, today, rather than reflecting the actual date the
> source code was really created and modified in Subversion. 

It would be nice if the dates of source code in the distribution files
were based on the date of last change; however, that is not how our
release preparation steps work.  I don't see it as desirable enough to try
and figure out how to change it.

 > I think I am
> supposed to vote numerically: -1 Greg Coats

Your position is noted, and feedback from all developers and users is
welcome.  However, technically, only the votes of the project steering
committee members affect the motion.  With respect, I still judge the
quality range change not very significant.

If another PSC member sees things your way, they might alter their vote
to veto the release.

In deference to your opinion and your contributions to community harmony,
I will now backport the change into the 1.7 branch so it will make it into
the 1.7.2 release (or 1.7.1 should RC1 be vetoed, for perhaps more significant
reasons).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From hobu.inc at gmail.com  Mon Feb  8 22:25:06 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Mon Feb  8 22:29:54 2010
Subject: [gdal-dev] GDAL/OGR 1.7.1RC1 Prepared
In-Reply-To: <4B70D222.80806@pobox.com>
References: <4B706CD0.4000300@pobox.com>
	<F95CACDD-B92F-4FDC-A1A4-5F4F69AD94A5@mac.com>
	<4B70D222.80806@pobox.com>
Message-ID: <524B6155-FC9C-4DC9-AE65-FD2B2DF0B9FC@gmail.com>


On Feb 8, 2010, at 9:10 PM, Frank Warmerdam wrote:
> It would be nice if the dates of source code in the distribution files
> were based on the date of last change; however, that is not how our
> release preparation steps work.  I don't see it as desirable enough to try
> and figure out how to change it.

Fixed.  The next release of 1.7.2 or 1.8 should have mtimes that match when the file was last changed in subversion.

Howard
From bgiv at gmx.de  Tue Feb  9 04:22:37 2010
From: bgiv at gmx.de (Wolfgang Lahr)
Date: Tue Feb  9 04:22:40 2010
Subject: [gdal-dev] gdalwarp ecw
Message-ID: <813125430.20100209102237@gmx.de>

Hello list,

I stumbled into the following issue using gdalwarp 1.7.0 to change the
projection of images: my ecw files will grow from ~ 2.5 to > 70 Mb, no
matter what is passed as a compression argument. Is this a known
thing?


Thanks

wollah

From jorge.arevalo at gmail.com  Tue Feb  9 06:54:49 2010
From: jorge.arevalo at gmail.com (=?UTF-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Tue Feb  9 06:55:12 2010
Subject: [gdal-dev] Doubt about memory raster
Message-ID: <cb4457701002090354i30477b79nbef9bbfe54f1a908@mail.gmail.com>

Hello,

I'm creating a raster-in-memory using MEM driver and following this
example http://trac.osgeo.org/gdal/ticket/1503

I feel confused about an issue:

sprintf( szPixelOffset, "PIXELOFFSET=2" );

(...)

GDALAddBand( hDS, GDT_Byte, apszOptions )

(...)

GDALDatasetRasterIO( hDS, GF_Read, 49999, 49999, 1, 1,
                         abyResult, 1, 1, GDT_Byte,
                         2, NULL, 0, 0, 0 );

In MEM driver page: http://www.gdal.org/frmt_mem.html says:

"PIXELOFFSET: Offset in bytes between the start of one pixel and the
next on the same scanline. (optional)"

The data pixels are bytes, but the pixeloffset is 2. I suppose in the
example, the data pixels are interlaced (one scan line starts on
pabyBigMem and the other in pabyBigMem + 1), and for this reason
pixeloffset = 2.

How do you specify this (if pixels are interlaced or not) when
creating the raster and adding the bands? Maybe this is not necessary,
and you specify this when reading or writing, but then, why in
GDALDatasetRasterIO the pixeloffset and lineoffset are set to 0?

Thanks in advance

Best regards,
Jorge
From dmorissette at mapgears.com  Tue Feb  9 08:46:37 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue Feb  9 08:46:41 2010
Subject: [gdal-dev] Motion: Promote GDAL/OGR 1.7.1RC1 to release and
	retract 1.7.0
In-Reply-To: <4B706DCF.2080404@pobox.com>
References: <4B706DCF.2080404@pobox.com>
Message-ID: <4B71673D.10103@mapgears.com>

Frank Warmerdam wrote:
> Motion: The GDAL/OGR 1.7.1 RC1 release candidate is promoted to a full
> release, and the GDAL/OGR 1.7.0 release is retracted due to the serious
> bug with Erdas Imagine file creation 
> (http://trac.osgeo.org/gdal/ticket/3382)
> 

+1 (1.7.1 RC1 working fine for me here)


-- 
Daniel Morissette
http://www.mapgears.com/
From Ralf.Suhr at itc-halle.de  Tue Feb  9 10:19:32 2010
From: Ralf.Suhr at itc-halle.de (Suhr, Ralf)
Date: Tue Feb  9 10:20:40 2010
Subject: [gdal-dev] how to escape special charakter
Message-ID: <305F51E63512244D853C549502A61324392786@VVVMAIL.vvv.vvv-konzern.net>

Hello list,

 

how can I write the commandline to work on a dos box. The dos box says:
program "name" is not found. On linux it run fine.

 

ogr2ogr -f "DGN" -sql "SELECT 'LABEL(f:\"Times New Roman\",s:12pt,t:\"'
|| name || '\")' AS OGR_STYLE,  *  FROM mytable" export.dgn
"PG:dbname=..--.."

 

Thanks in advance.

Ralf 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100209/d0da4ff1/attachment-0001.html
From warmerdam at pobox.com  Tue Feb  9 10:30:32 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb  9 10:30:32 2010
Subject: [gdal-dev] Doubt about memory raster
In-Reply-To: <cb4457701002090354i30477b79nbef9bbfe54f1a908@mail.gmail.com>
References: <cb4457701002090354i30477b79nbef9bbfe54f1a908@mail.gmail.com>
Message-ID: <4B717F98.6060003@pobox.com>

Jorge Ar?valo wrote:
> In MEM driver page: http://www.gdal.org/frmt_mem.html says:
> 
> "PIXELOFFSET: Offset in bytes between the start of one pixel and the
> next on the same scanline. (optional)"
> 
> The data pixels are bytes, but the pixeloffset is 2. I suppose in the
> example, the data pixels are interlaced (one scan line starts on
> pabyBigMem and the other in pabyBigMem + 1), and for this reason
> pixeloffset = 2.
> 
> How do you specify this (if pixels are interlaced or not) when
> creating the raster and adding the bands? Maybe this is not necessary,
> and you specify this when reading or writing, but then, why in
> GDALDatasetRasterIO the pixeloffset and lineoffset are set to 0?

Jorge,

To address such an existing array, the options to GDALAddBand()
would need to include DATAPOINTER, PIXELOFFSET and LINEOFFSET.
DATAPOINTER for the first call to addband would be pabyBigMem
and it would be pabyBigMem+1 for the second band.   In both
cases PIXELOFFSET would be 2 and LINEOFFSET would be
PIXELOFFSET*(image_width_in_pixels).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Feb  9 10:39:49 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb  9 10:39:59 2010
Subject: [gdal-dev] how to escape special charakter
In-Reply-To: <305F51E63512244D853C549502A61324392786@VVVMAIL.vvv.vvv-konzern.net>
References: <305F51E63512244D853C549502A61324392786@VVVMAIL.vvv.vvv-konzern.net>
Message-ID: <4B7181C5.6090806@pobox.com>

Suhr, Ralf wrote:
> Hello list,
> 
>  
> 
> how can I write the commandline to work on a dos box. The dos box says: 
> program ?name? is not found. On linux it run fine.
> 
>  
> 
> ogr2ogr -f "DGN" -sql "SELECT 'LABEL(f:\"Times New Roman\",s:12pt,t:\"' 
> || name || '\")' AS OGR_STYLE,  *  FROM mytable" export.dgn 
> ?PG:dbname=..--..?

Ralf,

The problem, I believe, is that the DOS command parser does not understand
backslash escaping to protect the internal double quotes.  I don't really
know if the above can be processed properly by the DOS command parser.

One option might be to install Cygwin which provides a unix-like shell
interpreter (bash) that should follow normal unix rules.

Alternatively, you could possibly invoke os.execl() in python to invoke
a subproject with preparsed arguments.

I had wanted to suggest using the GDAL/OGR --optfile switch which allows
reading command options from a text file, but on review I think the
escaped quotes will also end up confusing it and you will be no better off.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Ralf.Suhr at itc-halle.de  Tue Feb  9 11:10:10 2010
From: Ralf.Suhr at itc-halle.de (Suhr, Ralf)
Date: Tue Feb  9 11:10:14 2010
Subject: AW: [gdal-dev] how to escape special charakter
In-Reply-To: <4B7181C5.6090806@pobox.com>
References: <305F51E63512244D853C549502A61324392786@VVVMAIL.vvv.vvv-konzern.net>
	<4B7181C5.6090806@pobox.com>
Message-ID: <305F51E63512244D853C549502A61324392788@VVVMAIL.vvv.vvv-konzern.net>

Thanks Frank,

the --optfile switch makes it work.

Regards
Ralf

-----Urspr?ngliche Nachricht-----
Von: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Gesendet: Dienstag, 9. Februar 2010 16:40
An: Suhr, Ralf
Cc: gdal-dev@lists.osgeo.org
Betreff: Re: [gdal-dev] how to escape special charakter

Suhr, Ralf wrote:
> Hello list,
> 
>  
> 
> how can I write the commandline to work on a dos box. The dos box says: 
> program "name" is not found. On linux it run fine.
> 
>  
> 
> ogr2ogr -f "DGN" -sql "SELECT 'LABEL(f:\"Times New Roman\",s:12pt,t:\"' 
> || name || '\")' AS OGR_STYLE,  *  FROM mytable" export.dgn 
> "PG:dbname=..--.."

Ralf,

The problem, I believe, is that the DOS command parser does not understand
backslash escaping to protect the internal double quotes.  I don't really
know if the above can be processed properly by the DOS command parser.

One option might be to install Cygwin which provides a unix-like shell
interpreter (bash) that should follow normal unix rules.

Alternatively, you could possibly invoke os.execl() in python to invoke
a subproject with preparsed arguments.

I had wanted to suggest using the GDAL/OGR --optfile switch which allows
reading command options from a text file, but on review I think the
escaped quotes will also end up confusing it and you will be no better off.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jorge.arevalo at gmail.com  Tue Feb  9 11:24:57 2010
From: jorge.arevalo at gmail.com (=?UTF-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Tue Feb  9 11:25:19 2010
Subject: [gdal-dev] Doubt about memory raster
In-Reply-To: <4B717F98.6060003@pobox.com>
References: <cb4457701002090354i30477b79nbef9bbfe54f1a908@mail.gmail.com> 
	<4B717F98.6060003@pobox.com>
Message-ID: <cb4457701002090824mea5d24di6bbb80246747a0a4@mail.gmail.com>

2010/2/9 Frank Warmerdam <warmerdam@pobox.com>:
> Jorge Ar?valo wrote:
>>
>> In MEM driver page: http://www.gdal.org/frmt_mem.html says:
>>
>> "PIXELOFFSET: Offset in bytes between the start of one pixel and the
>> next on the same scanline. (optional)"
>>
>> The data pixels are bytes, but the pixeloffset is 2. I suppose in the
>> example, the data pixels are interlaced (one scan line starts on
>> pabyBigMem and the other in pabyBigMem + 1), and for this reason
>> pixeloffset = 2.
>>
>> How do you specify this (if pixels are interlaced or not) when
>> creating the raster and adding the bands? Maybe this is not necessary,
>> and you specify this when reading or writing, but then, why in
>> GDALDatasetRasterIO the pixeloffset and lineoffset are set to 0?
>
> Jorge,
>
> To address such an existing array, the options to GDALAddBand()
> would need to include DATAPOINTER, PIXELOFFSET and LINEOFFSET.
> DATAPOINTER for the first call to addband would be pabyBigMem
> and it would be pabyBigMem+1 for the second band. ? In both
> cases PIXELOFFSET would be 2 and LINEOFFSET would be
> PIXELOFFSET*(image_width_in_pixels).
>

Mmm... But I suppose this is in case of rasters with pixel type =
Byte. In that cases, should I always follow this scheme? pArray for
first band, pArray + 1 for second band, and so on (interlaced)? I
mean, why don't pArray for first band, pArray + raster_width for
second band...(non interlaced)?

Anyway, I'm working in a "WKT Raster format to GDAL format" parser. I
get all the bands in different arrays: void * pBandData, for example.
And the pixel type of these bands can be Byte, Int16, Float32, etc.
So, I don't have one array for all the raster data, I have a different
one per band.

In such situation, has sense this scheme?

DATAPOINTER = pBandData
PIXELOFFSET = (GDALDataTypeSize(raster_pixel_size) / 8) (this is, 1 =
pixel size byte, 2 = pixel size int16, 4 = pixel size int32, etc)
LINEOFFSET = PIXELOFFSET * raster_width_in_px

Thanks in advance,

Jorge

> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
>
From warmerdam at pobox.com  Tue Feb  9 12:19:49 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb  9 12:19:53 2010
Subject: [gdal-dev] Doubt about memory raster
In-Reply-To: <cb4457701002090824mea5d24di6bbb80246747a0a4@mail.gmail.com>
References: <cb4457701002090354i30477b79nbef9bbfe54f1a908@mail.gmail.com> 
	<4B717F98.6060003@pobox.com>
	<cb4457701002090824mea5d24di6bbb80246747a0a4@mail.gmail.com>
Message-ID: <4B719935.6020805@pobox.com>

Jorge Ar?valo wrote:
> Mmm... But I suppose this is in case of rasters with pixel type =
> Byte. In that cases, should I always follow this scheme? pArray for
> first band, pArray + 1 for second band, and so on (interlaced)? I
> mean, why don't pArray for first band, pArray + raster_width for
> second band...(non interlaced)?
> 
> Anyway, I'm working in a "WKT Raster format to GDAL format" parser. I
> get all the bands in different arrays: void * pBandData, for example.
> And the pixel type of these bands can be Byte, Int16, Float32, etc.
> So, I don't have one array for all the raster data, I have a different
> one per band.
> 
> In such situation, has sense this scheme?
> 
> DATAPOINTER = pBandData
> PIXELOFFSET = (GDALDataTypeSize(raster_pixel_size) / 8) (this is, 1 =
> pixel size byte, 2 = pixel size int16, 4 = pixel size int32, etc)
> LINEOFFSET = PIXELOFFSET * raster_width_in_px

Jorge,

Yes, this is correct, but you can just omit the PIXELOFFSET and
LINEOFFSET values in this situation since this is the default
configuration.  You only need to specify them if you are doing
something complicated, like interleaving.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From rikardocezar at msn.com  Tue Feb  9 13:16:48 2010
From: rikardocezar at msn.com (Ricardo Cezar Bonfim Rodrigues)
Date: Tue Feb  9 13:17:51 2010
Subject: [gdal-dev] Beginner (load DTED)
Message-ID: <SNT125-W4494A3C173A4FC1725BE54C2500@phx.gbl>


Hi,



I'm beginner in development using GDAL. So I'd like some advises and

tips, let me explain what I need to do.



I need to load a DTED file level 2 and given the parameters

latitude,longitude and width I must create a region (rectangle) and

find the highest elevation in the grid points inside this rectangle. I

need it to be fast, I don't know exaclty how slow GDAL is, so I need

to understand which strategies to useds to increase de speed of this

routine.



I didn't find source code examples of DTED loading with GDAL, So there

are lot's of doubts I have, such as how GDAL stores the DTED since it

was loaded (in an image file?), how to represent this grid area (a polygonon area with elevation points), how to get the elevation of a point

given (lat, lon).

I'd be glad to receive examples, references and tips about it.



Thanks

Ricardo 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100209/05cc3864/attachment.html
From even.rouault at mines-paris.org  Tue Feb  9 14:56:15 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb  9 14:56:26 2010
Subject: [gdal-dev] Beginner (load DTED)
In-Reply-To: <SNT125-W4494A3C173A4FC1725BE54C2500@phx.gbl>
References: <SNT125-W4494A3C173A4FC1725BE54C2500@phx.gbl>
Message-ID: <201002092056.16281.even.rouault@mines-paris.org>

Using GDAL for reading DTED 2 (and more generally elevation data) is a 
perfectly valid and common use case.

I'd encourage you reading http://gdal.org/gdal_datamodel.html first and then 
looking at the API doc.

The DTED grid is seen as a standard raster. So if gt is the geotransform 
returned by GDALGetGeoTransform(), (x,y) the pixel coordinates in the DTED 
file corresponding to the (longitutde, latitude) you're interested in, you 
have the following relationship :

x = (longitude - gt[0]) / gt[1]
y = (latitude - gt[3]) / gt[5]

Then using GDALRasterIO(), you should be able to extract a region into a 
buffer of yours and compute the max elevation.

As far as performance are concerned, the column orientation of DTED is 
generally a bit painful when using scanline oriented algorithms. You might 
want to bench for your use case if setting the GDAL_DTED_SINGLE_BLOCK 
environment variable to TRUE might help. See http://gdal.org/frmt_dted.html

Best regards

Even

> Hi,
>
>
>
> I'm beginner in development using GDAL. So I'd like some advises and
>
> tips, let me explain what I need to do.
>
>
>
> I need to load a DTED file level 2 and given the parameters
>
> latitude,longitude and width I must create a region (rectangle) and
>
> find the highest elevation in the grid points inside this rectangle. I
>
> need it to be fast, I don't know exaclty how slow GDAL is, so I need
>
> to understand which strategies to useds to increase de speed of this
>
> routine.
>
>
>
> I didn't find source code examples of DTED loading with GDAL, So there
>
> are lot's of doubts I have, such as how GDAL stores the DTED since it
>
> was loaded (in an image file?), how to represent this grid area (a
> polygonon area with elevation points), how to get the elevation of a point
>
> given (lat, lon).
>
> I'd be glad to receive examples, references and tips about it.
>
>
>
> Thanks
>
> Ricardo


From jorge.arevalo at gmail.com  Tue Feb  9 15:06:37 2010
From: jorge.arevalo at gmail.com (=?UTF-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Tue Feb  9 15:06:59 2010
Subject: [gdal-dev] Doubt about memory raster
In-Reply-To: <4B719935.6020805@pobox.com>
References: <cb4457701002090354i30477b79nbef9bbfe54f1a908@mail.gmail.com> 
	<4B717F98.6060003@pobox.com>
	<cb4457701002090824mea5d24di6bbb80246747a0a4@mail.gmail.com> 
	<4B719935.6020805@pobox.com>
Message-ID: <cb4457701002091206n69371285gbeacf2306266fd8e@mail.gmail.com>

2010/2/9 Frank Warmerdam <warmerdam@pobox.com>:
> Jorge Ar?valo wrote:
>>
>> Mmm... But I suppose this is in case of rasters with pixel type =
>> Byte. In that cases, should I always follow this scheme? pArray for
>> first band, pArray + 1 for second band, and so on (interlaced)? I
>> mean, why don't pArray for first band, pArray + raster_width for
>> second band...(non interlaced)?
>>
>> Anyway, I'm working in a "WKT Raster format to GDAL format" parser. I
>> get all the bands in different arrays: void * pBandData, for example.
>> And the pixel type of these bands can be Byte, Int16, Float32, etc.
>> So, I don't have one array for all the raster data, I have a different
>> one per band.
>>
>> In such situation, has sense this scheme?
>>
>> DATAPOINTER = pBandData
>> PIXELOFFSET = (GDALDataTypeSize(raster_pixel_size) / 8) (this is, 1 =
>> pixel size byte, 2 = pixel size int16, 4 = pixel size int32, etc)
>> LINEOFFSET = PIXELOFFSET * raster_width_in_px
>
> Jorge,
>
> Yes, this is correct, but you can just omit the PIXELOFFSET and
> LINEOFFSET values in this situation since this is the default
> configuration. ?You only need to specify them if you are doing
> something complicated, like interleaving.
>
Ok. So, interleaving is not the default behaviour when creating a
raster from scratch, from mem.

Many thanks!

Best regards,
Jorge

> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
>
From upperoso at gmail.com  Tue Feb  9 16:57:26 2010
From: upperoso at gmail.com (David Fogel)
Date: Tue Feb  9 17:04:14 2010
Subject: [gdal-dev] BigTIFF Overviews ( OVR files )
Message-ID: <12089da1002091357t15f31da0nb38fa4e22d11044b@mail.gmail.com>

Hi:

In the process of moving data into GeoTIFF, I am re-creating pyramids
(OVR files).  The good news: It takes fewer than ten minutes to create
an LZW Horizontal Differenced compressed 3.5 GB file on a Windows 7
box using GDAL 1.70+ ( via Tamas Szekeres site; 64-bit precompiled ).

The OVR files are problematic.  Using gdal_translate, I can resize by
50% in less than ten minutes.  Using gdaladdo, the first layer ( "2" )
takes hours to complete.

This is for SRTM 16-bit data.  It appears that something is amiss.

Tips and tricks?

Thanks!
= David
From even.rouault at mines-paris.org  Tue Feb  9 17:09:54 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb  9 17:10:03 2010
Subject: [gdal-dev] BigTIFF Overviews ( OVR files )
In-Reply-To: <12089da1002091357t15f31da0nb38fa4e22d11044b@mail.gmail.com>
References: <12089da1002091357t15f31da0nb38fa4e22d11044b@mail.gmail.com>
Message-ID: <201002092309.55244.even.rouault@mines-paris.org>

Could you append the output of gdalinfo on the TIF you make overviews on and 
the exact gdaladdo you're using (mainly if you use one particular resampling 
algorithm) ?

Le Tuesday 09 February 2010 22:57:26 David Fogel, vous avez ?crit?:
> Hi:
>
> In the process of moving data into GeoTIFF, I am re-creating pyramids
> (OVR files).  The good news: It takes fewer than ten minutes to create
> an LZW Horizontal Differenced compressed 3.5 GB file on a Windows 7
> box using GDAL 1.70+ ( via Tamas Szekeres site; 64-bit precompiled ).
>
> The OVR files are problematic.  Using gdal_translate, I can resize by
> 50% in less than ten minutes.  Using gdaladdo, the first layer ( "2" )
> takes hours to complete.
>
> This is for SRTM 16-bit data.  It appears that something is amiss.
>
> Tips and tricks?
>
> Thanks!
> = David
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From crschmidt at metacarta.com  Tue Feb  9 17:13:44 2010
From: crschmidt at metacarta.com (Christopher Schmidt)
Date: Tue Feb  9 17:13:47 2010
Subject: [gdal-dev] BigTIFF Overviews ( OVR files )
In-Reply-To: <12089da1002091357t15f31da0nb38fa4e22d11044b@mail.gmail.com>
References: <12089da1002091357t15f31da0nb38fa4e22d11044b@mail.gmail.com>
Message-ID: <20100209221344.GC24279@metacarta.com>

On Tue, Feb 09, 2010 at 01:57:26PM -0800, David Fogel wrote:
> Hi:
> 
> In the process of moving data into GeoTIFF, I am re-creating pyramids
> (OVR files).  The good news: It takes fewer than ten minutes to create
> an LZW Horizontal Differenced compressed 3.5 GB file on a Windows 7
> box using GDAL 1.70+ ( via Tamas Szekeres site; 64-bit precompiled ).
> 
> The OVR files are problematic.  Using gdal_translate, I can resize by
> 50% in less than ten minutes.  Using gdaladdo, the first layer ( "2" )
> takes hours to complete.
> 
> This is for SRTM 16-bit data.  It appears that something is amiss.
> 
> Tips and tricks?

One piece of advice; I find that adding overlays is often significantly
helped by increasing the GDAL_CACHEMAX setting.

gdaladdo --config GDAL_CACHEMAX 800 file.tif 2 4 8 16 32 64

800 is MB of memory; as a result, it probably makes sense to limit this
if your platform is low on free RAM.

Regards,
-- 
Christopher Schmidt
MetaCarta
From upperoso at gmail.com  Tue Feb  9 17:22:05 2010
From: upperoso at gmail.com (David Fogel)
Date: Tue Feb  9 17:22:08 2010
Subject: [gdal-dev] BigTIFF Overviews ( OVR files )
In-Reply-To: <201002092309.55244.even.rouault@mines-paris.org>
References: <12089da1002091357t15f31da0nb38fa4e22d11044b@mail.gmail.com>
	<201002092309.55244.even.rouault@mines-paris.org>
Message-ID: <12089da1002091422m3219ae62sf61a983c1db5b861@mail.gmail.com>

Hi Even:

The GeoTIFF file is described below (output from gdalinfo).  The
pre-compiled code is from Tamas' site:
http://vbkto.dyndns.org/sdk/
I am using the MSVC2008 version ( scroll to the bottom of the page ).
This ought to be v1.7.0 with some or all of the code for HFA files
folded into it.

The workstation is running Windows 7 64-bit w/ 8 GB of RAM and too
much disk space to know what to do with .. for the moment.

Thanks.
= David

----- % cut here % -----
Driver: GTiff/GeoTIFF
Files: Central_North.tif
Size is 119999, 74401
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-31.999583000000001,60.000416333276846)
Pixel Size = (0.000833333333333,-0.000833333333333)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=LZW
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  ( -31.9995830,  60.0004163) ( 31d59'58.50"W, 60d 0'1.50"N)
Lower Left  ( -31.9995830,  -2.0004170) ( 31d59'58.50"W,  2d 0'1.50"S)
Upper Right (  67.9995837,  60.0004163) ( 67d59'58.50"E, 60d 0'1.50"N)
Lower Right (  67.9995837,  -2.0004170) ( 67d59'58.50"E,  2d 0'1.50"S)
Center      (  18.0000003,  28.9999997) ( 18d 0'0.00"E, 29d 0'0.00"N)
Band 1 Block=119999x1 Type=Int16, ColorInterp=Gray
  NoData Value=-32768
  Metadata:
    LAYER_TYPE=athematic
----- % cut here % -----

On Tue, Feb 9, 2010 at 2:09 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Could you append the output of gdalinfo on the TIF you make overviews on and
> the exact gdaladdo you're using (mainly if you use one particular resampling
> algorithm) ?
>
> Le Tuesday 09 February 2010 22:57:26 David Fogel, vous avez ?crit?:
>> Hi:
>>
>> In the process of moving data into GeoTIFF, I am re-creating pyramids
>> (OVR files). ?The good news: It takes fewer than ten minutes to create
>> an LZW Horizontal Differenced compressed 3.5 GB file on a Windows 7
>> box using GDAL 1.70+ ( via Tamas Szekeres site; 64-bit precompiled ).
>>
>> The OVR files are problematic. ?Using gdal_translate, I can resize by
>> 50% in less than ten minutes. ?Using gdaladdo, the first layer ( "2" )
>> takes hours to complete.
>>
>> This is for SRTM 16-bit data. ?It appears that something is amiss.
>>
>> Tips and tricks?
>>
>> Thanks!
>> = David
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
From upperoso at gmail.com  Tue Feb  9 17:24:01 2010
From: upperoso at gmail.com (David Fogel)
Date: Tue Feb  9 17:24:03 2010
Subject: [gdal-dev] BigTIFF Overviews ( OVR files )
In-Reply-To: <20100209221344.GC24279@metacarta.com>
References: <12089da1002091357t15f31da0nb38fa4e22d11044b@mail.gmail.com>
	<20100209221344.GC24279@metacarta.com>
Message-ID: <12089da1002091424i26a70ed6qfc2f6effb52c67b@mail.gmail.com>

Hi Christopher,

And so I shall experiment with the GDAL_CACHEMAX setting.  Perhaps I
can post back on that before the end of the day here (US West Coast;
PST);

Thanks.
= David

On Tue, Feb 9, 2010 at 2:13 PM, Christopher Schmidt
<crschmidt@metacarta.com> wrote:
> On Tue, Feb 09, 2010 at 01:57:26PM -0800, David Fogel wrote:
>> Hi:
>>
>> In the process of moving data into GeoTIFF, I am re-creating pyramids
>> (OVR files). ?The good news: It takes fewer than ten minutes to create
>> an LZW Horizontal Differenced compressed 3.5 GB file on a Windows 7
>> box using GDAL 1.70+ ( via Tamas Szekeres site; 64-bit precompiled ).
>>
>> The OVR files are problematic. ?Using gdal_translate, I can resize by
>> 50% in less than ten minutes. ?Using gdaladdo, the first layer ( "2" )
>> takes hours to complete.
>>
>> This is for SRTM 16-bit data. ?It appears that something is amiss.
>>
>> Tips and tricks?
>
> One piece of advice; I find that adding overlays is often significantly
> helped by increasing the GDAL_CACHEMAX setting.
>
> gdaladdo --config GDAL_CACHEMAX 800 file.tif 2 4 8 16 32 64
>
> 800 is MB of memory; as a result, it probably makes sense to limit this
> if your platform is low on free RAM.
>
> Regards,
> --
> Christopher Schmidt
> MetaCarta
>
From even.rouault at mines-paris.org  Tue Feb  9 17:26:18 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb  9 17:26:28 2010
Subject: [gdal-dev] BigTIFF Overviews ( OVR files )
In-Reply-To: <12089da1002091422m3219ae62sf61a983c1db5b861@mail.gmail.com>
References: <12089da1002091357t15f31da0nb38fa4e22d11044b@mail.gmail.com>
	<201002092309.55244.even.rouault@mines-paris.org>
	<12089da1002091422m3219ae62sf61a983c1db5b861@mail.gmail.com>
Message-ID: <201002092326.19113.even.rouault@mines-paris.org>

And the exact gdaladdo command line you're using ? (must be sure if it's 
internal or external overviews)

Le Tuesday 09 February 2010 23:22:05 David Fogel, vous avez ?crit?:
> Hi Even:
>
> The GeoTIFF file is described below (output from gdalinfo).  The
> pre-compiled code is from Tamas' site:
> http://vbkto.dyndns.org/sdk/
> I am using the MSVC2008 version ( scroll to the bottom of the page ).
> This ought to be v1.7.0 with some or all of the code for HFA files
> folded into it.
>
> The workstation is running Windows 7 64-bit w/ 8 GB of RAM and too
> much disk space to know what to do with .. for the moment.
>
> Thanks.
> = David
>
> ----- % cut here % -----
> Driver: GTiff/GeoTIFF
> Files: Central_North.tif
> Size is 119999, 74401
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433],
>     AUTHORITY["EPSG","4326"]]
> Origin = (-31.999583000000001,60.000416333276846)
> Pixel Size = (0.000833333333333,-0.000833333333333)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   COMPRESSION=LZW
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  ( -31.9995830,  60.0004163) ( 31d59'58.50"W, 60d 0'1.50"N)
> Lower Left  ( -31.9995830,  -2.0004170) ( 31d59'58.50"W,  2d 0'1.50"S)
> Upper Right (  67.9995837,  60.0004163) ( 67d59'58.50"E, 60d 0'1.50"N)
> Lower Right (  67.9995837,  -2.0004170) ( 67d59'58.50"E,  2d 0'1.50"S)
> Center      (  18.0000003,  28.9999997) ( 18d 0'0.00"E, 29d 0'0.00"N)
> Band 1 Block=119999x1 Type=Int16, ColorInterp=Gray
>   NoData Value=-32768
>   Metadata:
>     LAYER_TYPE=athematic
> ----- % cut here % -----
>
> On Tue, Feb 9, 2010 at 2:09 PM, Even Rouault
>
> <even.rouault@mines-paris.org> wrote:
> > Could you append the output of gdalinfo on the TIF you make overviews on
> > and the exact gdaladdo you're using (mainly if you use one particular
> > resampling algorithm) ?
> >
> > Le Tuesday 09 February 2010 22:57:26 David Fogel, vous avez ?crit?:
> >> Hi:
> >>
> >> In the process of moving data into GeoTIFF, I am re-creating pyramids
> >> (OVR files). ?The good news: It takes fewer than ten minutes to create
> >> an LZW Horizontal Differenced compressed 3.5 GB file on a Windows 7
> >> box using GDAL 1.70+ ( via Tamas Szekeres site; 64-bit precompiled ).
> >>
> >> The OVR files are problematic. ?Using gdal_translate, I can resize by
> >> 50% in less than ten minutes. ?Using gdaladdo, the first layer ( "2" )
> >> takes hours to complete.
> >>
> >> This is for SRTM 16-bit data. ?It appears that something is amiss.
> >>
> >> Tips and tricks?
> >>
> >> Thanks!
> >> = David
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From upperoso at gmail.com  Tue Feb  9 17:32:55 2010
From: upperoso at gmail.com (David Fogel)
Date: Tue Feb  9 17:32:59 2010
Subject: [gdal-dev] BigTIFF Overviews ( OVR files )
In-Reply-To: <201002092326.19113.even.rouault@mines-paris.org>
References: <12089da1002091357t15f31da0nb38fa4e22d11044b@mail.gmail.com>
	<201002092309.55244.even.rouault@mines-paris.org>
	<12089da1002091422m3219ae62sf61a983c1db5b861@mail.gmail.com>
	<201002092326.19113.even.rouault@mines-paris.org>
Message-ID: <12089da1002091432t145312fchbadc76daa093f0cb@mail.gmail.com>

The gdaladdo command is below (for a single overview):

D:\SRTM\Central_North> "c:\Tamas\bin\gdal\apps\gdaladdo.exe" -r
nearest -ro --config BIGTIFF_OVERVIEW YES --config COMPRESS_OVERVIEW
LZW --config PREDICTOR 2 Central_North.tif 2


On Tue, Feb 9, 2010 at 2:26 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> And the exact gdaladdo command line you're using ? (must be sure if it's
> internal or external overviews)
>
> Le Tuesday 09 February 2010 23:22:05 David Fogel, vous avez ?crit?:
>> Hi Even:
>>
>> The GeoTIFF file is described below (output from gdalinfo). ?The
>> pre-compiled code is from Tamas' site:
>> http://vbkto.dyndns.org/sdk/
>> I am using the MSVC2008 version ( scroll to the bottom of the page ).
>> This ought to be v1.7.0 with some or all of the code for HFA files
>> folded into it.
>>
>> The workstation is running Windows 7 64-bit w/ 8 GB of RAM and too
>> much disk space to know what to do with .. for the moment.
>>
>> Thanks.
>> = David
>>
>> ----- % cut here % -----
>> Driver: GTiff/GeoTIFF
>> Files: Central_North.tif
>> Size is 119999, 74401
>> Coordinate System is:
>> GEOGCS["WGS 84",
>> ? ? DATUM["WGS_1984",
>> ? ? ? ? SPHEROID["WGS 84",6378137,298.257223563,
>> ? ? ? ? ? ? AUTHORITY["EPSG","7030"]],
>> ? ? ? ? AUTHORITY["EPSG","6326"]],
>> ? ? PRIMEM["Greenwich",0],
>> ? ? UNIT["degree",0.0174532925199433],
>> ? ? AUTHORITY["EPSG","4326"]]
>> Origin = (-31.999583000000001,60.000416333276846)
>> Pixel Size = (0.000833333333333,-0.000833333333333)
>> Metadata:
>> ? AREA_OR_POINT=Area
>> Image Structure Metadata:
>> ? COMPRESSION=LZW
>> ? INTERLEAVE=BAND
>> Corner Coordinates:
>> Upper Left ?( -31.9995830, ?60.0004163) ( 31d59'58.50"W, 60d 0'1.50"N)
>> Lower Left ?( -31.9995830, ?-2.0004170) ( 31d59'58.50"W, ?2d 0'1.50"S)
>> Upper Right ( ?67.9995837, ?60.0004163) ( 67d59'58.50"E, 60d 0'1.50"N)
>> Lower Right ( ?67.9995837, ?-2.0004170) ( 67d59'58.50"E, ?2d 0'1.50"S)
>> Center ? ? ?( ?18.0000003, ?28.9999997) ( 18d 0'0.00"E, 29d 0'0.00"N)
>> Band 1 Block=119999x1 Type=Int16, ColorInterp=Gray
>> ? NoData Value=-32768
>> ? Metadata:
>> ? ? LAYER_TYPE=athematic
>> ----- % cut here % -----
>>
>> On Tue, Feb 9, 2010 at 2:09 PM, Even Rouault
>>
>> <even.rouault@mines-paris.org> wrote:
>> > Could you append the output of gdalinfo on the TIF you make overviews on
>> > and the exact gdaladdo you're using (mainly if you use one particular
>> > resampling algorithm) ?
>> >
>> > Le Tuesday 09 February 2010 22:57:26 David Fogel, vous avez ?crit?:
>> >> Hi:
>> >>
>> >> In the process of moving data into GeoTIFF, I am re-creating pyramids
>> >> (OVR files). ?The good news: It takes fewer than ten minutes to create
>> >> an LZW Horizontal Differenced compressed 3.5 GB file on a Windows 7
>> >> box using GDAL 1.70+ ( via Tamas Szekeres site; 64-bit precompiled ).
>> >>
>> >> The OVR files are problematic. ?Using gdal_translate, I can resize by
>> >> 50% in less than ten minutes. ?Using gdaladdo, the first layer ( "2" )
>> >> takes hours to complete.
>> >>
>> >> This is for SRTM 16-bit data. ?It appears that something is amiss.
>> >>
>> >> Tips and tricks?
>> >>
>> >> Thanks!
>> >> = David
>> >> _______________________________________________
>> >> gdal-dev mailing list
>> >> gdal-dev@lists.osgeo.org
>> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
From upperoso at gmail.com  Tue Feb  9 17:35:54 2010
From: upperoso at gmail.com (David Fogel)
Date: Tue Feb  9 17:35:57 2010
Subject: [gdal-dev] BigTIFF Overviews ( OVR files )
In-Reply-To: <12089da1002091432t145312fchbadc76daa093f0cb@mail.gmail.com>
References: <12089da1002091357t15f31da0nb38fa4e22d11044b@mail.gmail.com>
	<201002092309.55244.even.rouault@mines-paris.org>
	<12089da1002091422m3219ae62sf61a983c1db5b861@mail.gmail.com>
	<201002092326.19113.even.rouault@mines-paris.org>
	<12089da1002091432t145312fchbadc76daa093f0cb@mail.gmail.com>
Message-ID: <12089da1002091435k409f0b60o74723cf71fa54cde@mail.gmail.com>

I should add that I picked up the 64-bit executable from Tamas' site
after the 32-bit executable, v.1.6.0, was taking hours to create
overviews.

Thanks.
= David

On Tue, Feb 9, 2010 at 2:32 PM, David Fogel <upperoso@gmail.com> wrote:
> The gdaladdo command is below (for a single overview):
>
> D:\SRTM\Central_North> "c:\Tamas\bin\gdal\apps\gdaladdo.exe" -r
> nearest -ro --config BIGTIFF_OVERVIEW YES --config COMPRESS_OVERVIEW
> LZW --config PREDICTOR 2 Central_North.tif 2
>
>
> On Tue, Feb 9, 2010 at 2:26 PM, Even Rouault
> <even.rouault@mines-paris.org> wrote:
>> And the exact gdaladdo command line you're using ? (must be sure if it's
>> internal or external overviews)
>>
>> Le Tuesday 09 February 2010 23:22:05 David Fogel, vous avez ?crit?:
>>> Hi Even:
>>>
>>> The GeoTIFF file is described below (output from gdalinfo). ?The
>>> pre-compiled code is from Tamas' site:
>>> http://vbkto.dyndns.org/sdk/
>>> I am using the MSVC2008 version ( scroll to the bottom of the page ).
>>> This ought to be v1.7.0 with some or all of the code for HFA files
>>> folded into it.
>>>
>>> The workstation is running Windows 7 64-bit w/ 8 GB of RAM and too
>>> much disk space to know what to do with .. for the moment.
>>>
>>> Thanks.
>>> = David
>>>
>>> ----- % cut here % -----
>>> Driver: GTiff/GeoTIFF
>>> Files: Central_North.tif
>>> Size is 119999, 74401
>>> Coordinate System is:
>>> GEOGCS["WGS 84",
>>> ? ? DATUM["WGS_1984",
>>> ? ? ? ? SPHEROID["WGS 84",6378137,298.257223563,
>>> ? ? ? ? ? ? AUTHORITY["EPSG","7030"]],
>>> ? ? ? ? AUTHORITY["EPSG","6326"]],
>>> ? ? PRIMEM["Greenwich",0],
>>> ? ? UNIT["degree",0.0174532925199433],
>>> ? ? AUTHORITY["EPSG","4326"]]
>>> Origin = (-31.999583000000001,60.000416333276846)
>>> Pixel Size = (0.000833333333333,-0.000833333333333)
>>> Metadata:
>>> ? AREA_OR_POINT=Area
>>> Image Structure Metadata:
>>> ? COMPRESSION=LZW
>>> ? INTERLEAVE=BAND
>>> Corner Coordinates:
>>> Upper Left ?( -31.9995830, ?60.0004163) ( 31d59'58.50"W, 60d 0'1.50"N)
>>> Lower Left ?( -31.9995830, ?-2.0004170) ( 31d59'58.50"W, ?2d 0'1.50"S)
>>> Upper Right ( ?67.9995837, ?60.0004163) ( 67d59'58.50"E, 60d 0'1.50"N)
>>> Lower Right ( ?67.9995837, ?-2.0004170) ( 67d59'58.50"E, ?2d 0'1.50"S)
>>> Center ? ? ?( ?18.0000003, ?28.9999997) ( 18d 0'0.00"E, 29d 0'0.00"N)
>>> Band 1 Block=119999x1 Type=Int16, ColorInterp=Gray
>>> ? NoData Value=-32768
>>> ? Metadata:
>>> ? ? LAYER_TYPE=athematic
>>> ----- % cut here % -----
>>>
>>> On Tue, Feb 9, 2010 at 2:09 PM, Even Rouault
>>>
>>> <even.rouault@mines-paris.org> wrote:
>>> > Could you append the output of gdalinfo on the TIF you make overviews on
>>> > and the exact gdaladdo you're using (mainly if you use one particular
>>> > resampling algorithm) ?
>>> >
>>> > Le Tuesday 09 February 2010 22:57:26 David Fogel, vous avez ?crit?:
>>> >> Hi:
>>> >>
>>> >> In the process of moving data into GeoTIFF, I am re-creating pyramids
>>> >> (OVR files). ?The good news: It takes fewer than ten minutes to create
>>> >> an LZW Horizontal Differenced compressed 3.5 GB file on a Windows 7
>>> >> box using GDAL 1.70+ ( via Tamas Szekeres site; 64-bit precompiled ).
>>> >>
>>> >> The OVR files are problematic. ?Using gdal_translate, I can resize by
>>> >> 50% in less than ten minutes. ?Using gdaladdo, the first layer ( "2" )
>>> >> takes hours to complete.
>>> >>
>>> >> This is for SRTM 16-bit data. ?It appears that something is amiss.
>>> >>
>>> >> Tips and tricks?
>>> >>
>>> >> Thanks!
>>> >> = David
>>> >> _______________________________________________
>>> >> gdal-dev mailing list
>>> >> gdal-dev@lists.osgeo.org
>>> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>
From even.rouault at mines-paris.org  Tue Feb  9 18:24:09 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb  9 18:24:24 2010
Subject: [gdal-dev] BigTIFF Overviews ( OVR files )
In-Reply-To: <12089da1002091432t145312fchbadc76daa093f0cb@mail.gmail.com>
References: <12089da1002091357t15f31da0nb38fa4e22d11044b@mail.gmail.com>
	<201002092326.19113.even.rouault@mines-paris.org>
	<12089da1002091432t145312fchbadc76daa093f0cb@mail.gmail.com>
Message-ID: <201002100024.11053.even.rouault@mines-paris.org>

2 things :

1)  Christopher Schmidt is right in suggesting to increase  GDAL_CACHEMAX (the 
default is 40 MB). In your use case (building external overviews with 
compression), the analysis of the algorithm (and a bit of experimentation to 
confirm ;-)) shows that that the minimum cache size is :
source_block_width * dst_block_height * overview_factor * sizeof(datatype) =
119999 * 128 * 2 * 2 = 61, 4 MB 
(to be exact, you should also add to that a bit of extra space for the size of 
a target block (128 * 128 * 2) to hold in the cache). So specifying --config 
GDAL_CACHEMAX 65 should be far sufficient to avoid source band thrashing. 
Increasing it more than that wouldn't help.

More generally, to diagnose performance problems, setting CPL_DEBUG=ON can be 
interesting. If you see, a warning like 'GDAL: Potential thrashing on band 1 
of', this is an indication to try increasing GDAL_CACHEMAX

2) --config PREDICTOR 2 will be ignored. This is a creation option of the 
GTiff driver, but there's no corresponding configuration option in the GTiff 
overview building code. This could be easily added if needed.

Le Tuesday 09 February 2010 23:32:55 David Fogel, vous avez ?crit?:
> The gdaladdo command is below (for a single overview):
>
> D:\SRTM\Central_North> "c:\Tamas\bin\gdal\apps\gdaladdo.exe" -r
> nearest -ro --config BIGTIFF_OVERVIEW YES --config COMPRESS_OVERVIEW
> LZW --config PREDICTOR 2 Central_North.tif 2
>
>
> On Tue, Feb 9, 2010 at 2:26 PM, Even Rouault
>
> <even.rouault@mines-paris.org> wrote:
> > And the exact gdaladdo command line you're using ? (must be sure if it's
> > internal or external overviews)
> >
> > Le Tuesday 09 February 2010 23:22:05 David Fogel, vous avez ?crit?:
> >> Hi Even:
> >>
> >> The GeoTIFF file is described below (output from gdalinfo). ?The
> >> pre-compiled code is from Tamas' site:
> >> http://vbkto.dyndns.org/sdk/
> >> I am using the MSVC2008 version ( scroll to the bottom of the page ).
> >> This ought to be v1.7.0 with some or all of the code for HFA files
> >> folded into it.
> >>
> >> The workstation is running Windows 7 64-bit w/ 8 GB of RAM and too
> >> much disk space to know what to do with .. for the moment.
> >>
> >> Thanks.
> >> = David
> >>
> >> ----- % cut here % -----
> >> Driver: GTiff/GeoTIFF
> >> Files: Central_North.tif
> >> Size is 119999, 74401
> >> Coordinate System is:
> >> GEOGCS["WGS 84",
> >> ? ? DATUM["WGS_1984",
> >> ? ? ? ? SPHEROID["WGS 84",6378137,298.257223563,
> >> ? ? ? ? ? ? AUTHORITY["EPSG","7030"]],
> >> ? ? ? ? AUTHORITY["EPSG","6326"]],
> >> ? ? PRIMEM["Greenwich",0],
> >> ? ? UNIT["degree",0.0174532925199433],
> >> ? ? AUTHORITY["EPSG","4326"]]
> >> Origin = (-31.999583000000001,60.000416333276846)
> >> Pixel Size = (0.000833333333333,-0.000833333333333)
> >> Metadata:
> >> ? AREA_OR_POINT=Area
> >> Image Structure Metadata:
> >> ? COMPRESSION=LZW
> >> ? INTERLEAVE=BAND
> >> Corner Coordinates:
> >> Upper Left ?( -31.9995830, ?60.0004163) ( 31d59'58.50"W, 60d 0'1.50"N)
> >> Lower Left ?( -31.9995830, ?-2.0004170) ( 31d59'58.50"W, ?2d 0'1.50"S)
> >> Upper Right ( ?67.9995837, ?60.0004163) ( 67d59'58.50"E, 60d 0'1.50"N)
> >> Lower Right ( ?67.9995837, ?-2.0004170) ( 67d59'58.50"E, ?2d 0'1.50"S)
> >> Center ? ? ?( ?18.0000003, ?28.9999997) ( 18d 0'0.00"E, 29d 0'0.00"N)
> >> Band 1 Block=119999x1 Type=Int16, ColorInterp=Gray
> >> ? NoData Value=-32768
> >> ? Metadata:
> >> ? ? LAYER_TYPE=athematic
> >> ----- % cut here % -----
> >>
> >> On Tue, Feb 9, 2010 at 2:09 PM, Even Rouault
> >>
> >> <even.rouault@mines-paris.org> wrote:
> >> > Could you append the output of gdalinfo on the TIF you make overviews
> >> > on and the exact gdaladdo you're using (mainly if you use one
> >> > particular resampling algorithm) ?
> >> >
> >> > Le Tuesday 09 February 2010 22:57:26 David Fogel, vous avez ?crit?:
> >> >> Hi:
> >> >>
> >> >> In the process of moving data into GeoTIFF, I am re-creating pyramids
> >> >> (OVR files). ?The good news: It takes fewer than ten minutes to
> >> >> create an LZW Horizontal Differenced compressed 3.5 GB file on a
> >> >> Windows 7 box using GDAL 1.70+ ( via Tamas Szekeres site; 64-bit
> >> >> precompiled ).
> >> >>
> >> >> The OVR files are problematic. ?Using gdal_translate, I can resize by
> >> >> 50% in less than ten minutes. ?Using gdaladdo, the first layer ( "2"
> >> >> ) takes hours to complete.
> >> >>
> >> >> This is for SRTM 16-bit data. ?It appears that something is amiss.
> >> >>
> >> >> Tips and tricks?
> >> >>
> >> >> Thanks!
> >> >> = David
> >> >> _______________________________________________
> >> >> gdal-dev mailing list
> >> >> gdal-dev@lists.osgeo.org
> >> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From upperoso at gmail.com  Tue Feb  9 18:54:00 2010
From: upperoso at gmail.com (David Fogel)
Date: Tue Feb  9 18:54:03 2010
Subject: [gdal-dev] BigTIFF Overviews ( OVR files )
In-Reply-To: <201002100024.11053.even.rouault@mines-paris.org>
References: <12089da1002091357t15f31da0nb38fa4e22d11044b@mail.gmail.com>
	<201002092326.19113.even.rouault@mines-paris.org>
	<12089da1002091432t145312fchbadc76daa093f0cb@mail.gmail.com>
	<201002100024.11053.even.rouault@mines-paris.org>
Message-ID: <12089da1002091554o624ceb44x5b6b8c19fc7db60f@mail.gmail.com>

Even, Christopher:

I have started building a new overview with the GDAL_CACHEMAX set to
65.  Already, I can see the improvement.

It is a bit embarrassing to inquire why GDAL_CACHEMAX did not show
such a change using 2048 or a larger number?  I am seeing the
thrashing that you mentioned @ 65 so I will increase GDAL_CACHEMAX a
little bit at a time.

Re: Horizontal Differencing ( LZW Compressed across 16-bits ), the
results for elevation data are quite noticeable.  The frequency at
which the high and low-order bytes change is very different.  The
uncompressed ASTER GDEM V001 ( elevation and metadata ( NUM ) files )
can be fit on a disk with about 150 GB.  That's much better than
uncompressed ( 1.2 TB ) and LZW 8-bit compression ( 350 GB IIRC ).  As
many people probably know, a 16-bit raster dataset may increase in
size with LZW 8-bit compression.

I have often wondered if the LZW horizontal differencing could be
extended to 32-bits and what the implications would be.  The source
code for the TIFF LZW compression options is fairly clean ( dates back
to the mid-80s I think ).  Could a floating point number be handled
and at what cost ( compressed file size vs. uncompressing for
real-time / online access )?

Merci beaucoup / Thanks,
= David

On Tue, Feb 9, 2010 at 3:24 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> 2 things :
>
> 1) ?Christopher Schmidt is right in suggesting to increase ?GDAL_CACHEMAX (the
> default is 40 MB). In your use case (building external overviews with
> compression), the analysis of the algorithm (and a bit of experimentation to
> confirm ;-)) shows that that the minimum cache size is :
> source_block_width * dst_block_height * overview_factor * sizeof(datatype) =
> 119999 * 128 * 2 * 2 = 61, 4 MB
> (to be exact, you should also add to that a bit of extra space for the size of
> a target block (128 * 128 * 2) to hold in the cache). So specifying --config
> GDAL_CACHEMAX 65 should be far sufficient to avoid source band thrashing.
> Increasing it more than that wouldn't help.
>
> More generally, to diagnose performance problems, setting CPL_DEBUG=ON can be
> interesting. If you see, a warning like 'GDAL: Potential thrashing on band 1
> of', this is an indication to try increasing GDAL_CACHEMAX
>
> 2) --config PREDICTOR 2 will be ignored. This is a creation option of the
> GTiff driver, but there's no corresponding configuration option in the GTiff
> overview building code. This could be easily added if needed.
>
> Le Tuesday 09 February 2010 23:32:55 David Fogel, vous avez ?crit?:
>> The gdaladdo command is below (for a single overview):
>>
>> D:\SRTM\Central_North> "c:\Tamas\bin\gdal\apps\gdaladdo.exe" -r
>> nearest -ro --config BIGTIFF_OVERVIEW YES --config COMPRESS_OVERVIEW
>> LZW --config PREDICTOR 2 Central_North.tif 2
>>
>>
>> On Tue, Feb 9, 2010 at 2:26 PM, Even Rouault
>>
>> <even.rouault@mines-paris.org> wrote:
>> > And the exact gdaladdo command line you're using ? (must be sure if it's
>> > internal or external overviews)
>> >
>> > Le Tuesday 09 February 2010 23:22:05 David Fogel, vous avez ?crit?:
>> >> Hi Even:
>> >>
>> >> The GeoTIFF file is described below (output from gdalinfo). ?The
>> >> pre-compiled code is from Tamas' site:
>> >> http://vbkto.dyndns.org/sdk/
>> >> I am using the MSVC2008 version ( scroll to the bottom of the page ).
>> >> This ought to be v1.7.0 with some or all of the code for HFA files
>> >> folded into it.
>> >>
>> >> The workstation is running Windows 7 64-bit w/ 8 GB of RAM and too
>> >> much disk space to know what to do with .. for the moment.
>> >>
>> >> Thanks.
>> >> = David
>> >>
>> >> ----- % cut here % -----
>> >> Driver: GTiff/GeoTIFF
>> >> Files: Central_North.tif
>> >> Size is 119999, 74401
>> >> Coordinate System is:
>> >> GEOGCS["WGS 84",
>> >> ? ? DATUM["WGS_1984",
>> >> ? ? ? ? SPHEROID["WGS 84",6378137,298.257223563,
>> >> ? ? ? ? ? ? AUTHORITY["EPSG","7030"]],
>> >> ? ? ? ? AUTHORITY["EPSG","6326"]],
>> >> ? ? PRIMEM["Greenwich",0],
>> >> ? ? UNIT["degree",0.0174532925199433],
>> >> ? ? AUTHORITY["EPSG","4326"]]
>> >> Origin = (-31.999583000000001,60.000416333276846)
>> >> Pixel Size = (0.000833333333333,-0.000833333333333)
>> >> Metadata:
>> >> ? AREA_OR_POINT=Area
>> >> Image Structure Metadata:
>> >> ? COMPRESSION=LZW
>> >> ? INTERLEAVE=BAND
>> >> Corner Coordinates:
>> >> Upper Left ?( -31.9995830, ?60.0004163) ( 31d59'58.50"W, 60d 0'1.50"N)
>> >> Lower Left ?( -31.9995830, ?-2.0004170) ( 31d59'58.50"W, ?2d 0'1.50"S)
>> >> Upper Right ( ?67.9995837, ?60.0004163) ( 67d59'58.50"E, 60d 0'1.50"N)
>> >> Lower Right ( ?67.9995837, ?-2.0004170) ( 67d59'58.50"E, ?2d 0'1.50"S)
>> >> Center ? ? ?( ?18.0000003, ?28.9999997) ( 18d 0'0.00"E, 29d 0'0.00"N)
>> >> Band 1 Block=119999x1 Type=Int16, ColorInterp=Gray
>> >> ? NoData Value=-32768
>> >> ? Metadata:
>> >> ? ? LAYER_TYPE=athematic
>> >> ----- % cut here % -----
>> >>
>> >> On Tue, Feb 9, 2010 at 2:09 PM, Even Rouault
>> >>
>> >> <even.rouault@mines-paris.org> wrote:
>> >> > Could you append the output of gdalinfo on the TIF you make overviews
>> >> > on and the exact gdaladdo you're using (mainly if you use one
>> >> > particular resampling algorithm) ?
>> >> >
>> >> > Le Tuesday 09 February 2010 22:57:26 David Fogel, vous avez ?crit?:
>> >> >> Hi:
>> >> >>
>> >> >> In the process of moving data into GeoTIFF, I am re-creating pyramids
>> >> >> (OVR files). ?The good news: It takes fewer than ten minutes to
>> >> >> create an LZW Horizontal Differenced compressed 3.5 GB file on a
>> >> >> Windows 7 box using GDAL 1.70+ ( via Tamas Szekeres site; 64-bit
>> >> >> precompiled ).
>> >> >>
>> >> >> The OVR files are problematic. ?Using gdal_translate, I can resize by
>> >> >> 50% in less than ten minutes. ?Using gdaladdo, the first layer ( "2"
>> >> >> ) takes hours to complete.
>> >> >>
>> >> >> This is for SRTM 16-bit data. ?It appears that something is amiss.
>> >> >>
>> >> >> Tips and tricks?
>> >> >>
>> >> >> Thanks!
>> >> >> = David
>> >> >> _______________________________________________
>> >> >> gdal-dev mailing list
>> >> >> gdal-dev@lists.osgeo.org
>> >> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
From jasonbeverage at gmail.com  Wed Feb 10 10:59:58 2010
From: jasonbeverage at gmail.com (Jason Beverage)
Date: Wed Feb 10 11:00:26 2010
Subject: [gdal-dev] ECW driver as a plugin
Message-ID: <2c4bbbeb1002100759o65432111vc992dc195aa805ad@mail.gmail.com>

Hi all,

I'm exploring different methods of deploying GDAL with ECW support and
saw various posts about building ECW support as a plugin vs including
it within the build.  I found the GDAL ECW plugin and instructions
here (http://home.prea.net/node/79) but the source is from the GRASS
project.  I tried it out with GDAL 1.6.3 and it seemed to work great.
Is this the "official" GDAL ECW plugin?

Thanks,

Jason
From tom at vdputte.nl  Wed Feb 10 10:44:23 2010
From: tom at vdputte.nl (Tom van der Putte)
Date: Wed Feb 10 11:23:29 2010
Subject: [gdal-dev] Problems with C# ogr_wrap.dll
Message-ID: <1569.1265816663@vdputte.nl>

Hi,
 I'm currently having a problem getting the C# OGR binaries to work
on a 64bit WinXP Pro machine, using VS2008 Pro. Ive tried both the
32bit Binaries and the 64 bit binaries.
 * Using the 32bit binaries from
http://vbkto.dyndns.org:1280/sdk/Default.aspx [1] as well as the
general FW windows binaries:
 I set the target platform to x86, added the reference path to the
32bit binaries and added those as a reference. However the
ogr_warp.dll is nowhere to be seen in the references. Calling the
Ogr.RegisterAll(); results in the error :"Unable to load DLL
'ogr_wrap': The specified module could not be found. (Exception from
HRESULT: 0x8007007E)"  
 When I manually try to add the dll under the references, it says it
cannot do so, and I have to check that it is either in use, or a valid
assembly.
 * Using the 64bit binaries from
http://vbkto.dyndns.org:1280/sdk/Default.aspx, [2] and the target
platform set to x64, the ogr_wrap.dll file is not in the bin/debug
dir, and I get an error: "An attempt was made to load a program with
an incorrect format. (Exception from HRESULT: 0x8007000B)"
 If I add the ogr_warp.dll to the debug/bin folder, the "Unable to
load DLL 'ogr_wrap': The specified module could not be found.
(Exception from HRESULT: 0x8007007E)" error pops up.
 Any ideas?
 Cheers,
 Tom
  

Links:
------
[1] http://vbkto.dyndns.org:1280/sdk/Default.aspx
[2] http://vbkto.dyndns.org:1280/sdk/Default.aspx,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100210/e34598d7/attachment.html
From szekerest at gmail.com  Wed Feb 10 12:03:17 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Feb 10 12:03:23 2010
Subject: [gdal-dev] Problems with C# ogr_wrap.dll
In-Reply-To: <1569.1265816663@vdputte.nl>
References: <1569.1265816663@vdputte.nl>
Message-ID: <f3b73b7d1002100903j24962e1boe88726cb2065b3f3@mail.gmail.com>

Hi Tom,

In this case you'll have to set a reference to ogr_csharp.dll and make sure
the unmanaged dll-s (ogr_wrap.dll and it's dependencies like proj.dll) are
available to load by the application, either by copying these dll-s into
your executing directory or make them available in the PATH environment.

Best regards,

Tamas



2010/2/10 Tom van der Putte <tom@vdputte.nl>

> Hi,
>
> I'm currently having a problem getting the C# OGR binaries to work on a
> 64bit WinXP Pro machine, using VS2008 Pro. Ive tried both the 32bit Binaries
> and the 64 bit binaries.
>
> * Using the 32bit binaries from
> http://vbkto.dyndns.org:1280/sdk/Default.aspx as well as the general FW
> windows binaries:
> I set the target platform to x86, added the reference path to the 32bit
> binaries and added those as a reference. However the ogr_warp.dll is nowhere
> to be seen in the references. Calling the Ogr.RegisterAll(); results in the
> error :"Unable to load DLL 'ogr_wrap': The specified module could not be
> found. (Exception from HRESULT: 0x8007007E)"
>
> When I manually try to add the dll under the references, it says it cannot
> do so, and I have to check that it is either in use, or a valid assembly.
>
> * Using the 64bit binaries from
> http://vbkto.dyndns.org:1280/sdk/Default.aspx, and the target platform set
> to x64, the ogr_wrap.dll file is not in the bin/debug dir, and I get an
> error: "An attempt was made to load a program with an incorrect format.
> (Exception from HRESULT: 0x8007000B)"
>
> If I add the ogr_warp.dll to the debug/bin folder, the "Unable to load DLL
> 'ogr_wrap': The specified module could not be found. (Exception from
> HRESULT: 0x8007007E)" error pops up.
>
> Any ideas?
>
> Cheers,
> Tom
>
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100210/07c308af/attachment.html
From warmerdam at pobox.com  Wed Feb 10 12:25:01 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb 10 12:24:56 2010
Subject: [gdal-dev] Motion: Extend Commit Access to Gaige Paulsen
Message-ID: <4B72EBED.2090408@pobox.com>

Motion: Extend GDAL/OGR Commit Access to Gaige Paulsen.

---

Folks,

Gaige is a software developer working on Cartographica (http://www.macgis.com/)
and has been using GDAL for some time.  He has recently been working
particularly hard to feed fixes back into GDAL trunk (see tickets:
http://trac.osgeo.org/gdal/search?q=gaige&noquickjump=1&ticket=on).  I
have reviewed some of the patches proposed and they seem quite competent
and I think it would be most expedient to provide Gaige with commit access
so that he can incorporate fixes directly.

Gaige - could you reply to this email indicating a willingness to abide
by the RFC 3 committer guidelines?

   http://trac.osgeo.org/gdal/wiki/rfc3_commiters

I'll start the vote with:

+1 Frank

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From osgeo at gbp.gaige.net  Wed Feb 10 12:54:49 2010
From: osgeo at gbp.gaige.net (Gaige B Paulsen)
Date: Wed Feb 10 12:54:51 2010
Subject: [gdal-dev] Motion: Extend Commit Access to Gaige Paulsen
In-Reply-To: <mailman.652.1265824358.24490.gdal-dev@lists.osgeo.org>
References: <mailman.652.1265824358.24490.gdal-dev@lists.osgeo.org>
Message-ID: <8c4ebff3abdb66c038fcd3004affd0cd.squirrel@mcp.gbpsw.com>


Hi all!
   I do hereby agree to willfully abide by the RFC 3 committer guidelines.
  I'm looking forward to continuing to work with everyone to make GDAL
better.

Thanks,
-Gaige


------

Folks,

Gaige is a software developer working on Cartographica
(http://www.macgis.com/)
and has been using GDAL for some time.  He has recently been working
particularly hard to feed fixes back into GDAL trunk (see tickets:
http://trac.osgeo.org/gdal/search?q=gaige&noquickjump=1&ticket=on).  I
have reviewed some of the patches proposed and they seem quite competent
and I think it would be most expedient to provide Gaige with commit access
so that he can incorporate fixes directly.

Gaige - could you reply to this email indicating a willingness to abide
by the RFC 3 committer guidelines?

   http://trac.osgeo.org/gdal/wiki/rfc3_commiters

I'll start the vote with:

+1 Frank

From warmerdam at pobox.com  Wed Feb 10 12:59:10 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb 10 12:59:06 2010
Subject: [gdal-dev] ECW driver as a plugin
In-Reply-To: <2c4bbbeb1002100759o65432111vc992dc195aa805ad@mail.gmail.com>
References: <2c4bbbeb1002100759o65432111vc992dc195aa805ad@mail.gmail.com>
Message-ID: <4B72F3EE.6020902@pobox.com>

Jason Beverage wrote:
> Hi all,
> 
> I'm exploring different methods of deploying GDAL with ECW support and
> saw various posts about building ECW support as a plugin vs including
> it within the build.  I found the GDAL ECW plugin and instructions
> here (http://home.prea.net/node/79) but the source is from the GRASS
> project.  I tried it out with GDAL 1.6.3 and it seemed to work great.
> Is this the "official" GDAL ECW plugin?


Jason,

The approach described seems fine, but the project does not produce "official"
binaries for linux itself, and so there is no official version of the plugin.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mongoose_riki at mail.ru  Wed Feb 10 12:28:44 2010
From: mongoose_riki at mail.ru (Riki Tiki)
Date: Wed Feb 10 13:08:45 2010
Subject: [gdal-dev] comparing two las files DEMs
Message-ID: <E1NfGMm-0002xP-00.mongoose_riki-mail-ru@f272.mail.ru>

hi, i know this is not directly related to the topics of this list... but anyways,
currently i have a.las file, then removed some of the points, and created b.las file.
Now, I create DEM of both a.las and b.las, taking into account that a.las file was the original one, how can i see if the DEM generated by b.las file is of acceptable quality as opposed to the DEM of a.las file.
thanks!!!
From szekerest at gmail.com  Wed Feb 10 13:27:22 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Feb 10 13:27:27 2010
Subject: [gdal-dev] Motion: Extend Commit Access to Gaige Paulsen
In-Reply-To: <4B72EBED.2090408@pobox.com>
References: <4B72EBED.2090408@pobox.com>
Message-ID: <f3b73b7d1002101027p165cb317hcbb83cf39581e50c@mail.gmail.com>

+1

Best regards,

Tamas


2010/2/10 Frank Warmerdam <warmerdam@pobox.com>

> Motion: Extend GDAL/OGR Commit Access to Gaige Paulsen.
>
> ---
>
> Folks,
>
> Gaige is a software developer working on Cartographica (
> http://www.macgis.com/)
> and has been using GDAL for some time.  He has recently been working
> particularly hard to feed fixes back into GDAL trunk (see tickets:
> http://trac.osgeo.org/gdal/search?q=gaige&noquickjump=1&ticket=on).  I
> have reviewed some of the patches proposed and they seem quite competent
> and I think it would be most expedient to provide Gaige with commit access
> so that he can incorporate fixes directly.
>
> Gaige - could you reply to this email indicating a willingness to abide
> by the RFC 3 committer guidelines?
>
>  http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start the vote with:
>
> +1 Frank
>
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100210/fb844af3/attachment.html
From jasonbeverage at gmail.com  Wed Feb 10 13:28:08 2010
From: jasonbeverage at gmail.com (Jason Beverage)
Date: Wed Feb 10 13:28:30 2010
Subject: [gdal-dev] ECW driver as a plugin
In-Reply-To: <4B72F3EE.6020902@pobox.com>
References: <2c4bbbeb1002100759o65432111vc992dc195aa805ad@mail.gmail.com> 
	<4B72F3EE.6020902@pobox.com>
Message-ID: <2c4bbbeb1002101028t749fc0apa6dfca0b0b128c87@mail.gmail.com>

Hi Frank,

By "official" version of the plugin I meant the definitive source.  I
would have expected to find the ECW plugin as part of GDAL itself, or
downloadable from the GDAL website rather than going through GRASS to
get the GDAL ECW plugin.  Just wanted to make sure I was getting the
plugin from the "right" place.

Thanks,

Jason

On Wed, Feb 10, 2010 at 12:59 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Jason Beverage wrote:
>>
>> Hi all,
>>
>> I'm exploring different methods of deploying GDAL with ECW support and
>> saw various posts about building ECW support as a plugin vs including
>> it within the build. ?I found the GDAL ECW plugin and instructions
>> here (http://home.prea.net/node/79) but the source is from the GRASS
>> project. ?I tried it out with GDAL 1.6.3 and it seemed to work great.
>> Is this the "official" GDAL ECW plugin?
>
>
> Jason,
>
> The approach described seems fine, but the project does not produce
> "official"
> binaries for linux itself, and so there is no official version of the
> plugin.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
>
From warmerdam at pobox.com  Wed Feb 10 13:34:14 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb 10 13:34:13 2010
Subject: [gdal-dev] ECW driver as a plugin
In-Reply-To: <2c4bbbeb1002101028t749fc0apa6dfca0b0b128c87@mail.gmail.com>
References: <2c4bbbeb1002100759o65432111vc992dc195aa805ad@mail.gmail.com> 
	<4B72F3EE.6020902@pobox.com>
	<2c4bbbeb1002101028t749fc0apa6dfca0b0b128c87@mail.gmail.com>
Message-ID: <4B72FC26.7020508@pobox.com>

Jason Beverage wrote:
> Hi Frank,
> 
> By "official" version of the plugin I meant the definitive source.  I
> would have expected to find the ECW plugin as part of GDAL itself, or
> downloadable from the GDAL website rather than going through GRASS to
> get the GDAL ECW plugin.  Just wanted to make sure I was getting the
> plugin from the "right" place.

Jason,

The official source for the ECW plugin is part of the normal GDAL source
releases.

eg.
http://download.osgeo.org/gdal/gdal-1.6.3.tar.gz

(in frmts/ecw)

The normal instructions for building the ECW driver and plugin are found
at:

  http://trac.osgeo.org/gdal/wiki/ECW

But that doesn't invalidate the information you found which might be
significantly more useful on debian than the other resources.  In fact,
you might want to edit the trac wiki topic for ECW and add a pointer
to the instructions.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Wed Feb 10 14:05:02 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb 10 14:05:13 2010
Subject: [gdal-dev] Motion: Promote GDAL/OGR 1.7.1RC1 to release and
	retract 1.7.0
In-Reply-To: <4B706DCF.2080404@pobox.com>
References: <4B706DCF.2080404@pobox.com>
Message-ID: <201002102005.03997.even.rouault@mines-paris.org>

+1 to promote 1.7.1RC1 to release and retract 1.7.0

I'd note that during the testing process, I have had problems building the 
python bindings on one of my environment (not 1.7.1 specific; this also 
occured with 1.7.0 indeed) with python 2.4 and 2.5 due to use of unicode by 
setup.py. I've pushed a fixed since RC1, but as the problem hasn't been 
reported by anyone else and I'm not sure why it only occurs on my 
environment, I'd suppose this is one odd particularity of my setup that isn't 
characterized enough to prevent us from releasing. See 
http://trac.osgeo.org/gdal/ticket/3395

Best regards,

Even

Le Monday 08 February 2010 21:02:23 Frank Warmerdam, vous avez ?crit?:
> Motion: The GDAL/OGR 1.7.1 RC1 release candidate is promoted to a full
> release, and the GDAL/OGR 1.7.0 release is retracted due to the serious
> bug with Erdas Imagine file creation
> (http://trac.osgeo.org/gdal/ticket/3382)
>
> ---
>
> Folks,
>
> As previously discussed, I think bug 3382 is a serious regression in the
> 1.7.0 release, and I'd like to formally retract the release (as we did once
> previosly with a release that introduced an ABI compatability problem). I
> have already removed the source code from the servers and added notes that
> I anticipate this release being released.
>
> I'd also like to promote the 1.7.1 RC1 published today to be a final
> release to replace 1.7.0 (as 1.7.1).
>
> This motion will be open for 48 hours to allow testing of 1.7.1RC1 and to
> consider the merits of my request.
>
> Starting with:
>
> +1 Frank
>
> Best regards,


From even.rouault at mines-paris.org  Wed Feb 10 14:43:42 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb 10 14:43:51 2010
Subject: [gdal-dev] Motion: Extend Commit Access to Gaige Paulsen
In-Reply-To: <4B72EBED.2090408@pobox.com>
References: <4B72EBED.2090408@pobox.com>
Message-ID: <201002102043.42567.even.rouault@mines-paris.org>

+1

Best regards,

Even

Le Wednesday 10 February 2010 18:25:01 Frank Warmerdam, vous avez ?crit?:
> Motion: Extend GDAL/OGR Commit Access to Gaige Paulsen.
>
> ---
>
> Folks,
>
> Gaige is a software developer working on Cartographica
> (http://www.macgis.com/) and has been using GDAL for some time.  He has
> recently been working particularly hard to feed fixes back into GDAL trunk
> (see tickets:
> http://trac.osgeo.org/gdal/search?q=gaige&noquickjump=1&ticket=on).  I have
> reviewed some of the patches proposed and they seem quite competent and I
> think it would be most expedient to provide Gaige with commit access so
> that he can incorporate fixes directly.
>
> Gaige - could you reply to this email indicating a willingness to abide
> by the RFC 3 committer guidelines?
>
>    http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start the vote with:
>
> +1 Frank
>
> Best regards,


From ahmostovoi at gmail.com  Wed Feb 10 15:09:21 2010
From: ahmostovoi at gmail.com (Alejandro Mostovoi)
Date: Wed Feb 10 15:09:24 2010
Subject: [gdal-dev] GDALDriver question
Message-ID: <9db695c1002101209k6d11a847h1d4d8bb494242980@mail.gmail.com>

Hi All,

I need to get the Long Format Name and the Code of GDAL Raster Formats (BMP,
FAST, ENVI, etc) from a GDALDataset. I'm looking for a method like
OGRSFDriver::GetName();

Any idea?

Thanks in Advance.
Alejandro.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100210/519da7c1/attachment.html
From even.rouault at mines-paris.org  Wed Feb 10 15:12:28 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb 10 15:12:40 2010
Subject: [gdal-dev] GDALDriver question
In-Reply-To: <9db695c1002101209k6d11a847h1d4d8bb494242980@mail.gmail.com>
References: <9db695c1002101209k6d11a847h1d4d8bb494242980@mail.gmail.com>
Message-ID: <201002102112.29710.even.rouault@mines-paris.org>

Did you have a look at http://gdal.org/gdal_8h.html ?

Extract from gcore/gdal_misc.cpp that answer all your questions :

/* -------------------------------------------------------------------- */
/*      --formats                                                       */
/* -------------------------------------------------------------------- */
        else if( EQUAL(papszArgv[iArg], "--formats") )
        {
            int iDr;

            printf( "Supported Formats:\n" );
            for( iDr = 0; iDr < GDALGetDriverCount(); iDr++ )
            {
                GDALDriverH hDriver = GDALGetDriver(iDr);
                const char *pszRWFlag, *pszVirtualIO;
                
                if( GDALGetMetadataItem( hDriver, GDAL_DCAP_CREATE, NULL ) )
                    pszRWFlag = "rw+";
                else if( GDALGetMetadataItem( hDriver, GDAL_DCAP_CREATECOPY, 
                                              NULL ) )
                    pszRWFlag = "rw";
                else
                    pszRWFlag = "ro";
                
                if( GDALGetMetadataItem( hDriver, GDAL_DCAP_VIRTUALIO, NULL) )
                    pszVirtualIO = "v";
                else
                    pszVirtualIO = "";

                printf( "  %s (%s%s): %s\n",
                        GDALGetDriverShortName( hDriver ),
                        pszRWFlag, pszVirtualIO,
                        GDALGetDriverLongName( hDriver ) );
            }

            CSLDestroy( papszReturn );
            return 0;
        }



Le Wednesday 10 February 2010 21:09:21 Alejandro Mostovoi, vous avez ?crit?:
> Hi All,
>
> I need to get the Long Format Name and the Code of GDAL Raster Formats
> (BMP, FAST, ENVI, etc) from a GDALDataset. I'm looking for a method like
> OGRSFDriver::GetName();
>
> Any idea?
>
> Thanks in Advance.
> Alejandro.


From hobu.inc at gmail.com  Wed Feb 10 15:17:18 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Feb 10 15:22:02 2010
Subject: [gdal-dev] Motion: Extend Commit Access to Gaige Paulsen
In-Reply-To: <f3b73b7d1002101027p165cb317hcbb83cf39581e50c@mail.gmail.com>
References: <4B72EBED.2090408@pobox.com>
	<f3b73b7d1002101027p165cb317hcbb83cf39581e50c@mail.gmail.com>
Message-ID: <D3BEC05B-2875-451E-B52C-1E35A3E575C5@gmail.com>

+1 

Howard

On Feb 10, 2010, at 12:27 PM, Tamas Szekeres wrote:

> +1
> 
> Best regards,
> 
> Tamas
> 
> 
> 2010/2/10 Frank Warmerdam <warmerdam@pobox.com>
> Motion: Extend GDAL/OGR Commit Access to Gaige Paulsen.
> 
> ---
> 
> Folks,
> 
> Gaige is a software developer working on Cartographica (http://www.macgis.com/)
> and has been using GDAL for some time.  He has recently been working
> particularly hard to feed fixes back into GDAL trunk (see tickets:
> http://trac.osgeo.org/gdal/search?q=gaige&noquickjump=1&ticket=on).  I
> have reviewed some of the patches proposed and they seem quite competent
> and I think it would be most expedient to provide Gaige with commit access
> so that he can incorporate fixes directly.
> 
> Gaige - could you reply to this email indicating a willingness to abide
> by the RFC 3 committer guidelines?
> 
>  http://trac.osgeo.org/gdal/wiki/rfc3_commiters
> 
> I'll start the vote with:
> 
> +1 Frank
> 
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Wed Feb 10 15:27:06 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb 10 15:27:21 2010
Subject: [gdal-dev] ECW driver as a plugin
In-Reply-To: <2c4bbbeb1002101028t749fc0apa6dfca0b0b128c87@mail.gmail.com>
References: <2c4bbbeb1002100759o65432111vc992dc195aa805ad@mail.gmail.com>
	<4B72F3EE.6020902@pobox.com>
	<2c4bbbeb1002101028t749fc0apa6dfca0b0b128c87@mail.gmail.com>
Message-ID: <201002102127.08005.even.rouault@mines-paris.org>

In case it might interest you, the UbuntuGIS team packages a GDAL ECW plugin :

https://launchpad.net/~ubuntugis/+archive/ppa/

Le Wednesday 10 February 2010 19:28:08 Jason Beverage, vous avez ?crit?:
> Hi Frank,
>
> By "official" version of the plugin I meant the definitive source.  I
> would have expected to find the ECW plugin as part of GDAL itself, or
> downloadable from the GDAL website rather than going through GRASS to
> get the GDAL ECW plugin.  Just wanted to make sure I was getting the
> plugin from the "right" place.
>
> Thanks,
>
> Jason
>
> On Wed, Feb 10, 2010 at 12:59 PM, Frank Warmerdam <warmerdam@pobox.com> 
wrote:
> > Jason Beverage wrote:
> >> Hi all,
> >>
> >> I'm exploring different methods of deploying GDAL with ECW support and
> >> saw various posts about building ECW support as a plugin vs including
> >> it within the build. ?I found the GDAL ECW plugin and instructions
> >> here (http://home.prea.net/node/79) but the source is from the GRASS
> >> project. ?I tried it out with GDAL 1.6.3 and it seemed to work great.
> >> Is this the "official" GDAL ECW plugin?
> >
> > Jason,
> >
> > The approach described seems fine, but the project does not produce
> > "official"
> > binaries for linux itself, and so there is no official version of the
> > plugin.
> >
> > Best regards,
> > --
> > ---------------------------------------+---------------------------------
> >----- I set the clouds in motion - turn up ? | Frank Warmerdam,
> > warmerdam@pobox.com
> > light and sound - activate the windows | http://pobox.com/~warmerdam
> > and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From peter.rankor at googlemail.com  Wed Feb 10 15:40:38 2010
From: peter.rankor at googlemail.com (Peter Rankor)
Date: Wed Feb 10 15:40:54 2010
Subject: [gdal-dev] gdal_rasterize use SHP FID as burn attribute
In-Reply-To: <4B70B2CD.6000201@pobox.com>
References: <394cacf21002080754l2eb2f1f9mcb88d0f882796e31@mail.gmail.com>
	<4B70B2CD.6000201@pobox.com>
Message-ID: <394cacf21002101240w5af71423o9c8d9fea48188630@mail.gmail.com>

Thanks you guys.

The SQL statement did the trick.

2010/2/9 Frank Warmerdam <warmerdam@pobox.com>

> Peter Rankor wrote:
>
>> List,
>>
>> I need to rasterize a polygon layer coming from a SHP file. However, the
>> values in the outputraster need to be the FID of the corresponding polygon.
>>
>> My command:
>> gdal_rasterize -a FID -l FECS FECS.shp flattenedRaster.tif
>>
>
> Peter,
>
> Could you try:
>
> gdal_rasterize -a FID \
>    -sql "select FID, * from FECS" FEC.shp flattenedRaster.tif
>
> The ExecuteSQL() method invoked for -sql should be able to treat FID
> as a pseudo-attribute.  It's a bit unfortunate this sort of thing doesn't
> work directly without the SQL route.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100210/3bbe40e3/attachment-0001.html
From warmerdam at pobox.com  Wed Feb 10 16:00:52 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb 10 16:00:46 2010
Subject: [gdal-dev] Re: Motion: Promote GDAL/OGR 1.7.1RC1 to release and
	retract 1.7.0
In-Reply-To: <4B706DCF.2080404@pobox.com>
References: <4B706DCF.2080404@pobox.com>
Message-ID: <4B731E84.4080809@pobox.com>

Frank Warmerdam wrote:
> Motion: The GDAL/OGR 1.7.1 RC1 release candidate is promoted to a full
> release, and the GDAL/OGR 1.7.0 release is retracted due to the serious
> bug with Erdas Imagine file creation 
> (http://trac.osgeo.org/gdal/ticket/3382)

Folks,

I declare this motion passed with support from FrankW, EvenR, and DanielM.
I will do the updates, and issue an announcement shortly.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Wed Feb 10 16:39:06 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb 10 16:39:03 2010
Subject: [gdal-dev] GDAL/OGR 1.7.0 Retracted, GDAL/OGR 1.7.1 Released
Message-ID: <4B73277A.30807@pobox.com>

The GDAL/OGR Project has decided to retract the GDAL/OGR 1.7.0 release
due to a serious bug which causes all Erdas Imagine (.img / HFA) files
being unreadable by Erdas Imagine and other non-GDAL based applications.
Additional detail is available in:

   http://trac.osgeo.org/gdal/ticket/3382

The project requests that software distributors (packagers, etc) replace
GDAL/OGR 1.7.0 with 1.7.1 as promptly as possible, or otherwise avoid
distributing GDAL/OGR 1.7.0.

The GDAL/OGR Project is pleased to announce the release of GDAL/OGR 1.7.1.
This is bug fix release in the 1.7.x stable release branch.  This release
includes everal bug fixes, including the serious Erdas Imagine bug in 1.7.0.

Full release news is available at:
   http://trac.osgeo.org/gdal/wiki/Release/1.7.1-News

The source code, documentation and test suite can be downloaded from:

Source:
   http://download.osgeo.org/gdal/gdal-1.7.1.tar.gz
   http://download.osgeo.org/gdal/gdal171.zip

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ahmostovoi at gmail.com  Wed Feb 10 16:50:48 2010
From: ahmostovoi at gmail.com (Alejandro Mostovoi)
Date: Wed Feb 10 16:50:52 2010
Subject: [gdal-dev] GDALDriver question
In-Reply-To: <201002102112.29710.even.rouault@mines-paris.org>
References: <9db695c1002101209k6d11a847h1d4d8bb494242980@mail.gmail.com>
	<201002102112.29710.even.rouault@mines-paris.org>
Message-ID: <9db695c1002101350k7b8e47f0sb06089583101199c@mail.gmail.com>

Thanks for your answer.

Alejandro.


On 10 February 2010 17:12, Even Rouault <even.rouault@mines-paris.org>wrote:

> Did you have a look at http://gdal.org/gdal_8h.html ?
>
> Extract from gcore/gdal_misc.cpp that answer all your questions :
>
> /* -------------------------------------------------------------------- */
> /*      --formats                                                       */
> /* -------------------------------------------------------------------- */
>        else if( EQUAL(papszArgv[iArg], "--formats") )
>        {
>            int iDr;
>
>            printf( "Supported Formats:\n" );
>            for( iDr = 0; iDr < GDALGetDriverCount(); iDr++ )
>            {
>                GDALDriverH hDriver = GDALGetDriver(iDr);
>                const char *pszRWFlag, *pszVirtualIO;
>
>                if( GDALGetMetadataItem( hDriver, GDAL_DCAP_CREATE, NULL ) )
>                    pszRWFlag = "rw+";
>                else if( GDALGetMetadataItem( hDriver, GDAL_DCAP_CREATECOPY,
>                                              NULL ) )
>                    pszRWFlag = "rw";
>                else
>                    pszRWFlag = "ro";
>
>                if( GDALGetMetadataItem( hDriver, GDAL_DCAP_VIRTUALIO, NULL)
> )
>                    pszVirtualIO = "v";
>                else
>                    pszVirtualIO = "";
>
>                printf( "  %s (%s%s): %s\n",
>                        GDALGetDriverShortName( hDriver ),
>                        pszRWFlag, pszVirtualIO,
>                        GDALGetDriverLongName( hDriver ) );
>            }
>
>            CSLDestroy( papszReturn );
>            return 0;
>        }
>
>
>
> Le Wednesday 10 February 2010 21:09:21 Alejandro Mostovoi, vous avez
> ?crit :
> > Hi All,
> >
> > I need to get the Long Format Name and the Code of GDAL Raster Formats
> > (BMP, FAST, ENVI, etc) from a GDALDataset. I'm looking for a method like
> > OGRSFDriver::GetName();
> >
> > Any idea?
> >
> > Thanks in Advance.
> > Alejandro.
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100210/71fb4b9a/attachment.html
From randre at gmail.com  Thu Feb 11 02:04:56 2010
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Thu Feb 11 02:04:58 2010
Subject: [gdal-dev] How to calculate total change in headings?
Message-ID: <9c2015091002102304ua79cff9v2a9bb28e97dcdbe@mail.gmail.com>

Hi all,

Not a GDAL question at all, but one which might amuse some of you, and which
has been unsolveable in a satisfactory fashion for me.

Given a list of compass headings in degrees, how can you reliably calculate
the total change in direction?

Here's an example:  [355.5, 10.0, 5.1]

This seemed like a simple thing to figure out, but seems to be more
complicated than I had originally thought.

Roger
--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100210/10215404/attachment.html
From tom at vdputte.nl  Thu Feb 11 02:50:25 2010
From: tom at vdputte.nl (Tom van der Putte)
Date: Thu Feb 11 02:50:29 2010
Subject: [gdal-dev] Problems with C# ogr_wrap.dll
Message-ID: <2343.1265874625@vdputte.nl>

Hi
Tamas,
 Thanks for the reply. I tried your method in the overkill-mode to be
sure: copying all dlls from gdalbin and gdalbingdalcsharp and this
worked with the 32bit (not the 64 bit). I had already set the path to
gdalbin so I don't understand why it doesn't work but hey, I'm a happy
man!
 Cheers!
 Tom
 On Wed 10/02/10 18:03 , Tamas Szekeres szekerest@gmail.com sent:
 Hi Tom,
 In this case you'll have to set a reference to ogr_csharp.dll and
make sure the unmanaged dll-s (ogr_wrap.dll and it's dependencies like
proj.dll) are available to load by the application, either by copying
these dll-s into your executing directory or make them available in
the PATH environment.
 Best regards,
 Tamas
 2010/2/10 Tom van der Putte 
  Hi,
 I'm currently having a problem getting the C# OGR binaries to work
on a 64bit WinXP Pro machine, using VS2008 Pro. Ive tried both the
32bit Binaries and the 64 bit binaries.
 * Using the 32bit binaries from
http://vbkto.dyndns.org:1280/sdk/Default.aspx [2] as well as the
general FW windows binaries:
 I set the target platform to x86, added the reference path to the
32bit binaries and added those as a reference. However the
ogr_warp.dll is nowhere to be seen in the references. Calling the
Ogr.RegisterAll(); results in the error :"Unable to load DLL
'ogr_wrap': The specified module could not be found. (Exception from
HRESULT: 0x8007007E)"  
 When I manually try to add the dll under the references, it says it
cannot do so, and I have to check that it is either in use, or a valid
assembly.
 * Using the 64bit binaries from
http://vbkto.dyndns.org:1280/sdk/Default.aspx, [3] and the target
platform set to x64, the ogr_wrap.dll file is not in the bin/debug
dir, and I get an error: "An attempt was made to load a program with
an incorrect format. (Exception from HRESULT: 0x8007000B)"
 If I add the ogr_warp.dll to the debug/bin folder, the "Unable to
load DLL 'ogr_wrap': The specified module could not be found.
(Exception from HRESULT: 0x8007007E)" error pops up.
 Any ideas?
 Cheers,
  Tom
 _______________________________________________
 gdal-dev mailing list
 http://lists.osgeo.org/mailman/listinfo/gdal-dev [5]
 

Links:
------
[2] http://vbkto.dyndns.org:1280/sdk/Default.aspx
[3] http://vbkto.dyndns.org:1280/sdk/Default.aspx,
[5] http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100211/0aaa428d/attachment.html
From nsicad at gmail.com  Thu Feb 11 06:41:42 2010
From: nsicad at gmail.com (Noli Sicad)
Date: Thu Feb 11 06:50:02 2010
Subject: [gdal-dev] FWTools 2.4.7 ogr2org How to convert CSV to SQLite table
Message-ID: <f7bd71731002110341w123d093k77bae8c14d28d51e@mail.gmail.com>

Hi,

I downloaded FWTools 2.4.7  (Jan 19, 2010) for windows and installed.
I suppose there is support for converting CSV table to SQLite Table in
this version. Now, how do i convert my CSV table to SQLite

ogr2org - f SQLite HarvestArea1.csv Harvest.sqlite  -dsco SPATIALITE=YES

It seems that this command above is not working, since no
Harvest.sqlite database is created.

I want to create forest.sqlite database from various tables e.g.
harvestarea (harvestArea1.csv) and yield (yield.csv), etc.

How do I do this task.

Thanks in advance.

Noli
From chaitanya.ch at gmail.com  Thu Feb 11 06:54:59 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Feb 11 06:55:11 2010
Subject: [gdal-dev] FWTools 2.4.7 ogr2org How to convert CSV to SQLite 
	table
In-Reply-To: <f7bd71731002110341w123d093k77bae8c14d28d51e@mail.gmail.com>
References: <f7bd71731002110341w123d093k77bae8c14d28d51e@mail.gmail.com>
Message-ID: <eb502d881002110354n704a6ce0pbac2863f506848a@mail.gmail.com>

Noli,

There must have been some error message. What did you get?

On Thu, Feb 11, 2010 at 5:11 PM, Noli Sicad <nsicad@gmail.com> wrote:

> Hi,
>
> I downloaded FWTools 2.4.7  (Jan 19, 2010) for windows and installed.
> I suppose there is support for converting CSV table to SQLite Table in
> this version. Now, how do i convert my CSV table to SQLite
>
> ogr2org - f SQLite HarvestArea1.csv Harvest.sqlite  -dsco SPATIALITE=YES
>
> It seems that this command above is not working, since no
> Harvest.sqlite database is created.
>
> I want to create forest.sqlite database from various tables e.g.
> harvestarea (harvestArea1.csv) and yield (yield.csv), etc.
>
> How do I do this task.
>
> Thanks in advance.
>
> Noli
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100211/4aa12043/attachment-0001.html
From nsicad at gmail.com  Thu Feb 11 07:07:05 2010
From: nsicad at gmail.com (Noli Sicad)
Date: Thu Feb 11 07:07:08 2010
Subject: [gdal-dev] FWTools 2.4.7 ogr2org How to convert CSV to SQLite 
	table
In-Reply-To: <eb502d881002110354n704a6ce0pbac2863f506848a@mail.gmail.com>
References: <f7bd71731002110341w123d093k77bae8c14d28d51e@mail.gmail.com>
	<eb502d881002110354n704a6ce0pbac2863f506848a@mail.gmail.com>
Message-ID: <f7bd71731002110407w11362e37l5b2508588a55f397@mail.gmail.com>

OK. Sorry
This is the error,

FAILURE:
Unable to open datasource `harvest.sqlite' with the following drivers.
  -> ESRI Shapefile
  -> MapInfo File
  -> UK .NTF
  -> SDTS
  -> TIGER
  -> S57
  -> DGN
  -> VRT
  -> REC
  -> Memory
  -> BNA
  -> CSV
  -> NAS
  -> GML
  -> GPX
  -> KML
  -> GeoJSON
  -> Interlis 1
  -> Interlis 2
  -> GMT
  -> SQLite
  -> ODBC
  -> PGeo
  -> OGDI
  -> PostgreSQL
  -> MySQL
  -> XPlane
  -> AVCBin
  -> AVCE00
  -> DXF
  -> Geoconcept
  -> GeoRSS
  -> GPSTrackMaker
  -> VFK

On 2/11/10, Chaitanya kumar CH <chaitanya.ch@gmail.com> wrote:
> Noli,
>
> There must have been some error message. What did you get?
From chaitanya.ch at gmail.com  Thu Feb 11 07:15:23 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Feb 11 07:43:34 2010
Subject: [gdal-dev] FWTools 2.4.7 ogr2org How to convert CSV to SQLite 
	table
In-Reply-To: <f7bd71731002110407w11362e37l5b2508588a55f397@mail.gmail.com>
References: <f7bd71731002110341w123d093k77bae8c14d28d51e@mail.gmail.com>
	<eb502d881002110354n704a6ce0pbac2863f506848a@mail.gmail.com>
	<f7bd71731002110407w11362e37l5b2508588a55f397@mail.gmail.com>
Message-ID: <eb502d881002110415r7e4b2654i2bf6ae51d99a21b9@mail.gmail.com>

Noli,

There was a problem with the order of the arguments in your command.
http://gdal.org/ogr2ogr.html

On Thu, Feb 11, 2010 at 5:37 PM, Noli Sicad <nsicad@gmail.com> wrote:

> OK. Sorry
> This is the error,
>
> FAILURE:
> Unable to open datasource `harvest.sqlite' with the following drivers.
>  -> ESRI Shapefile
>  -> MapInfo File
>  -> UK .NTF
>  -> SDTS
>  -> TIGER
>  -> S57
>  -> DGN
>  -> VRT
>  -> REC
>  -> Memory
>  -> BNA
>  -> CSV
>  -> NAS
>  -> GML
>  -> GPX
>  -> KML
>  -> GeoJSON
>  -> Interlis 1
>  -> Interlis 2
>  -> GMT
>  -> SQLite
>  -> ODBC
>  -> PGeo
>  -> OGDI
>  -> PostgreSQL
>  -> MySQL
>  -> XPlane
>  -> AVCBin
>  -> AVCE00
>  -> DXF
>  -> Geoconcept
>  -> GeoRSS
>  -> GPSTrackMaker
>  -> VFK
>
> On 2/11/10, Chaitanya kumar CH <chaitanya.ch@gmail.com> wrote:
> > Noli,
> >
> > There must have been some error message. What did you get?
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100211/7743c622/attachment.html
From nsicad at gmail.com  Thu Feb 11 07:49:42 2010
From: nsicad at gmail.com (Noli Sicad)
Date: Thu Feb 11 07:49:44 2010
Subject: [gdal-dev] FWTools 2.4.7 ogr2org How to convert CSV to SQLite 
	table
In-Reply-To: <eb502d881002110415r7e4b2654i2bf6ae51d99a21b9@mail.gmail.com>
References: <f7bd71731002110341w123d093k77bae8c14d28d51e@mail.gmail.com>
	<eb502d881002110354n704a6ce0pbac2863f506848a@mail.gmail.com>
	<f7bd71731002110407w11362e37l5b2508588a55f397@mail.gmail.com>
	<eb502d881002110415r7e4b2654i2bf6ae51d99a21b9@mail.gmail.com>
Message-ID: <f7bd71731002110449q5cb097cl25d5193ae6fd6651@mail.gmail.com>

Yes, this is what I am trying to ask.

from file:///C:/Program%20Files/FWTools2.4.7/html/drv_sqlite.html

 # Duplicate the sample database provided with SpatiaLite (does not
need explicit linking with SpatiaLite)
ogr2ogr -f SQLite testspatialite.sqlite test-2.3.sqlite  -dsco SPATIALITE=YES

from file:///C:/Program%20Files/FWTools2.4.7/html/drv_csv.html

ogr2ogr -f CSV output.csv input.shp -lco GEOMETRY=AS_XYZ

Now, any suggestion how I reorganise the arguments?

Meanwhile, I am using spatial_tools from spatialite some success using
import of dbf  tables into spatialite tables but the problem is the
primary key.  CVS and DBF tables does not contain any information of
primary key. Hence, no go for sqlite conversion. Convert tables in
sqlite is still useless for SQL querying.

Noli


On 2/11/10, Chaitanya kumar CH <chaitanya.ch@gmail.com> wrote:
> Noli,
>
> There was a problem with the order of the arguments in your command.
> http://gdal.org/ogr2ogr.html
>
> On Thu, Feb 11, 2010 at 5:37 PM, Noli Sicad <nsicad@gmail.com> wrote:
>
>> OK. Sorry
>> This is the error,
>>
>> FAILURE:
>> Unable to open datasource `harvest.sqlite' with the following drivers.
>>  -> ESRI Shapefile
>>  -> MapInfo File
>>  -> UK .NTF
>>  -> SDTS
>>  -> TIGER
>>  -> S57
>>  -> DGN
>>  -> VRT
>>  -> REC
>>  -> Memory
>>  -> BNA
>>  -> CSV
>>  -> NAS
>>  -> GML
>>  -> GPX
>>  -> KML
>>  -> GeoJSON
>>  -> Interlis 1
>>  -> Interlis 2
>>  -> GMT
>>  -> SQLite
>>  -> ODBC
>>  -> PGeo
>>  -> OGDI
>>  -> PostgreSQL
>>  -> MySQL
>>  -> XPlane
>>  -> AVCBin
>>  -> AVCE00
>>  -> DXF
>>  -> Geoconcept
>>  -> GeoRSS
>>  -> GPSTrackMaker
>>  -> VFK
>>
>> On 2/11/10, Chaitanya kumar CH <chaitanya.ch@gmail.com> wrote:
>> > Noli,
>> >
>> > There must have been some error message. What did you get?
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9848167848
> 17.241582N 80.142635E
>
From chaitanya.ch at gmail.com  Thu Feb 11 07:56:30 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Feb 11 07:56:33 2010
Subject: [gdal-dev] FWTools 2.4.7 ogr2org How to convert CSV to SQLite 
	table
In-Reply-To: <f7bd71731002110449q5cb097cl25d5193ae6fd6651@mail.gmail.com>
References: <f7bd71731002110341w123d093k77bae8c14d28d51e@mail.gmail.com>
	<eb502d881002110354n704a6ce0pbac2863f506848a@mail.gmail.com>
	<f7bd71731002110407w11362e37l5b2508588a55f397@mail.gmail.com>
	<eb502d881002110415r7e4b2654i2bf6ae51d99a21b9@mail.gmail.com>
	<f7bd71731002110449q5cb097cl25d5193ae6fd6651@mail.gmail.com>
Message-ID: <eb502d881002110456x372e15f5w1deed04a5bf2ee75@mail.gmail.com>

Noli,

Your destination file has to be before the source file.

On Thu, Feb 11, 2010 at 6:19 PM, Noli Sicad <nsicad@gmail.com> wrote:

> Yes, this is what I am trying to ask.
>
> from file:///C:/Program%20Files/FWTools2.4.7/html/drv_sqlite.html
>
>  # Duplicate the sample database provided with SpatiaLite (does not
> need explicit linking with SpatiaLite)
> ogr2ogr -f SQLite testspatialite.sqlite test-2.3.sqlite  -dsco
> SPATIALITE=YES
>
> from file:///C:/Program%20Files/FWTools2.4.7/html/drv_csv.html
>
> ogr2ogr -f CSV output.csv input.shp -lco GEOMETRY=AS_XYZ
>
> Now, any suggestion how I reorganise the arguments?
>
> Meanwhile, I am using spatial_tools from spatialite some success using
> import of dbf  tables into spatialite tables but the problem is the
> primary key.  CVS and DBF tables does not contain any information of
> primary key. Hence, no go for sqlite conversion. Convert tables in
> sqlite is still useless for SQL querying.
>
> Noli
>
>
> On 2/11/10, Chaitanya kumar CH <chaitanya.ch@gmail.com> wrote:
> > Noli,
> >
> > There was a problem with the order of the arguments in your command.
> > http://gdal.org/ogr2ogr.html
> >
> > On Thu, Feb 11, 2010 at 5:37 PM, Noli Sicad <nsicad@gmail.com> wrote:
> >
> >> OK. Sorry
> >> This is the error,
> >>
> >> FAILURE:
> >> Unable to open datasource `harvest.sqlite' with the following drivers.
> >>  -> ESRI Shapefile
> >>  -> MapInfo File
> >>  -> UK .NTF
> >>  -> SDTS
> >>  -> TIGER
> >>  -> S57
> >>  -> DGN
> >>  -> VRT
> >>  -> REC
> >>  -> Memory
> >>  -> BNA
> >>  -> CSV
> >>  -> NAS
> >>  -> GML
> >>  -> GPX
> >>  -> KML
> >>  -> GeoJSON
> >>  -> Interlis 1
> >>  -> Interlis 2
> >>  -> GMT
> >>  -> SQLite
> >>  -> ODBC
> >>  -> PGeo
> >>  -> OGDI
> >>  -> PostgreSQL
> >>  -> MySQL
> >>  -> XPlane
> >>  -> AVCBin
> >>  -> AVCE00
> >>  -> DXF
> >>  -> Geoconcept
> >>  -> GeoRSS
> >>  -> GPSTrackMaker
> >>  -> VFK
> >>
> >> On 2/11/10, Chaitanya kumar CH <chaitanya.ch@gmail.com> wrote:
> >> > Noli,
> >> >
> >> > There must have been some error message. What did you get?
> >>
> >
> >
> >
> > --
> > Best regards,
> > Chaitanya kumar CH.
> > /t?a???nj?/ /k?m?r/
> > +91-9848167848
> > 17.241582N 80.142635E
> >
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100211/1d769ab0/attachment.html
From nsicad at gmail.com  Thu Feb 11 08:10:06 2010
From: nsicad at gmail.com (Noli Sicad)
Date: Thu Feb 11 08:10:12 2010
Subject: [gdal-dev] FWTools 2.4.7 ogr2org How to convert CSV to SQLite 
	table
In-Reply-To: <eb502d881002110456x372e15f5w1deed04a5bf2ee75@mail.gmail.com>
References: <f7bd71731002110341w123d093k77bae8c14d28d51e@mail.gmail.com>
	<eb502d881002110354n704a6ce0pbac2863f506848a@mail.gmail.com>
	<f7bd71731002110407w11362e37l5b2508588a55f397@mail.gmail.com>
	<eb502d881002110415r7e4b2654i2bf6ae51d99a21b9@mail.gmail.com>
	<f7bd71731002110449q5cb097cl25d5193ae6fd6651@mail.gmail.com>
	<eb502d881002110456x372e15f5w1deed04a5bf2ee75@mail.gmail.com>
Message-ID: <f7bd71731002110510k5e963ffco7735d7392aa380a6@mail.gmail.com>

Kumar,

OK. I did this command as you suggested.

ogr2ogr - f SQLite Harvest.sqlite HarvestArea1.csv  -dsco SPATIALITE=YES

But still no Harvest.sqlite is created.

Please tell what is the right order of the arguments. Suggest any
command combination.

Noli

On 2/11/10, Chaitanya kumar CH <chaitanya.ch@gmail.com> wrote:
> Noli,
>
> Your destination file has to be before the source file.
>
> On Thu, Feb 11, 2010 at 6:19 PM, Noli Sicad <nsicad@gmail.com> wrote:
>
>> Yes, this is what I am trying to ask.
>>
>> from file:///C:/Program%20Files/FWTools2.4.7/html/drv_sqlite.html
>>
>>  # Duplicate the sample database provided with SpatiaLite (does not
>> need explicit linking with SpatiaLite)
>> ogr2ogr -f SQLite testspatialite.sqlite test-2.3.sqlite  -dsco
>> SPATIALITE=YES
>>
>> from file:///C:/Program%20Files/FWTools2.4.7/html/drv_csv.html
>>
>> ogr2ogr -f CSV output.csv input.shp -lco GEOMETRY=AS_XYZ
>>
>> Now, any suggestion how I reorganise the arguments?
>>
>> Meanwhile, I am using spatial_tools from spatialite some success using
>> import of dbf  tables into spatialite tables but the problem is the
>> primary key.  CVS and DBF tables does not contain any information of
>> primary key. Hence, no go for sqlite conversion. Convert tables in
>> sqlite is still useless for SQL querying.
>>
>> Noli
>>
>>
>> On 2/11/10, Chaitanya kumar CH <chaitanya.ch@gmail.com> wrote:
>> > Noli,
>> >
>> > There was a problem with the order of the arguments in your command.
>> > http://gdal.org/ogr2ogr.html
>> >
>> > On Thu, Feb 11, 2010 at 5:37 PM, Noli Sicad <nsicad@gmail.com> wrote:
>> >
>> >> OK. Sorry
>> >> This is the error,
>> >>
>> >> FAILURE:
>> >> Unable to open datasource `harvest.sqlite' with the following drivers.
>> >>  -> ESRI Shapefile
>> >>  -> MapInfo File
>> >>  -> UK .NTF
>> >>  -> SDTS
>> >>  -> TIGER
>> >>  -> S57
>> >>  -> DGN
>> >>  -> VRT
>> >>  -> REC
>> >>  -> Memory
>> >>  -> BNA
>> >>  -> CSV
>> >>  -> NAS
>> >>  -> GML
>> >>  -> GPX
>> >>  -> KML
>> >>  -> GeoJSON
>> >>  -> Interlis 1
>> >>  -> Interlis 2
>> >>  -> GMT
>> >>  -> SQLite
>> >>  -> ODBC
>> >>  -> PGeo
>> >>  -> OGDI
>> >>  -> PostgreSQL
>> >>  -> MySQL
>> >>  -> XPlane
>> >>  -> AVCBin
>> >>  -> AVCE00
>> >>  -> DXF
>> >>  -> Geoconcept
>> >>  -> GeoRSS
>> >>  -> GPSTrackMaker
>> >>  -> VFK
>> >>
>> >> On 2/11/10, Chaitanya kumar CH <chaitanya.ch@gmail.com> wrote:
>> >> > Noli,
>> >> >
>> >> > There must have been some error message. What did you get?
>> >>
>> >
>> >
>> >
>> > --
>> > Best regards,
>> > Chaitanya kumar CH.
>> > /t?a???nj?/ /k?m?r/
>> > +91-9848167848
>> > 17.241582N 80.142635E
>> >
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9848167848
> 17.241582N 80.142635E
>
From szekerest at gmail.com  Thu Feb 11 08:14:45 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Feb 11 08:14:48 2010
Subject: [gdal-dev] Problems with C# ogr_wrap.dll
In-Reply-To: <2343.1265874625@vdputte.nl>
References: <2343.1265874625@vdputte.nl>
Message-ID: <f3b73b7d1002110514m38745bc9m8a35ae0b96ffe43b@mail.gmail.com>

Tom,

It depends on the platform target settings and the your current framework,
which kind of binaries should be used, see the table below:

Platform target                Executing environment (Framework version)
          binary package should be used
/x86
x86                                                                      x86
/x86
x64                                                                      x86
/x64
x64                                                                      x64
/AnyCPU
x86
x86
/AnyCPU                         x64
                             x64


All other combinations are not supported, and will probably result in
BadImageFormatException.


Best regards,

Tamas




2010/2/11 Tom van der Putte <tom@vdputte.nl>

> Hi Tamas,
>
> Thanks for the reply. I tried your method in the overkill-mode to be sure:
> copying all dlls from gdal\bin and gdal\bin\gdal\csharp and this worked with
> the 32bit (not the 64 bit). I had already set the path to gdal\bin so I
> don't understand why it doesn't work but hey, I'm a happy man!
>
> Cheers!
>
> Tom
>
>
> On Wed 10/02/10 18:03 , Tamas Szekeres szekerest@gmail.com sent:
>
> Hi Tom,
>
> In this case you'll have to set a reference to ogr_csharp.dll and make sure
> the unmanaged dll-s (ogr_wrap.dll and it's dependencies like proj.dll) are
> available to load by the application, either by copying these dll-s into
> your executing directory or make them available in the PATH environment.
>
> Best regards,
>
> Tamas
>
>
>
> 2010/2/10 Tom van der Putte <tom@vdputte.nl>
>
>> Hi,
>>
>> I'm currently having a problem getting the C# OGR binaries to work on a
>> 64bit WinXP Pro machine, using VS2008 Pro. Ive tried both the 32bit Binaries
>> and the 64 bit binaries.
>>
>> * Using the 32bit binaries from
>> http://vbkto.dyndns.org:1280/sdk/Default.aspx as well as the general FW
>> windows binaries:
>> I set the target platform to x86, added the reference path to the 32bit
>> binaries and added those as a reference. However the ogr_warp.dll is nowhere
>> to be seen in the references. Calling the Ogr.RegisterAll(); results in the
>> error :"Unable to load DLL 'ogr_wrap': The specified module could not be
>> found. (Exception from HRESULT: 0x8007007E)"
>>
>> When I manually try to add the dll under the references, it says it cannot
>> do so, and I have to check that it is either in use, or a valid assembly.
>>
>> * Using the 64bit binaries from
>> http://vbkto.dyndns.org:1280/sdk/Default.aspx, and the target platform
>> set to x64, the ogr_wrap.dll file is not in the bin/debug dir, and I get an
>> error: "An attempt was made to load a program with an incorrect format.
>> (Exception from HRESULT: 0x8007000B)"
>>
>> If I add the ogr_warp.dll to the debug/bin folder, the "Unable to load DLL
>> 'ogr_wrap': The specified module could not be found. (Exception from
>> HRESULT: 0x8007007E)" error pops up.
>>
>> Any ideas?
>>
>> Cheers,
>>  Tom
>>
>>
>>
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100211/fdfac27a/attachment-0001.html
From warmerdam at pobox.com  Thu Feb 11 10:54:35 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 11 10:54:25 2010
Subject: [gdal-dev] wcs extraction
In-Reply-To: <4b5079221002040312o76766255mfc4cf30b615df07f@mail.gmail.com>
References: <4b5079221002040312o76766255mfc4cf30b615df07f@mail.gmail.com>
Message-ID: <4B74283B.7060806@pobox.com>

Bruno Binet wrote:
> Hi list,
> 
> I'm currently trying to use the wcs gdal driver to extract data from a
> wcs service (mapserver), using a specfic projection, extent and
> resolution.
> I managed to extract the all dataset in the original projection, and
> format (geotiff).
> But I would like to be able to specify a value for the format, the
> extent, the projection, and the resolution for the data to be
> extracted.
> 
> Given the docs: http://www.gdal.org/frmt_wcs.html we can specify a
> preferred format for extraction with the PreferredFormat element, but
> what about projection, extent, and resolution?
> Do we have to download the entire dataset and use gdal capabilities to
> extract and reproject a subset of the downloaded data?
> It would be great if it could be handled directly by mapserver.

Bruno,

I have skimmed the WCS driver implementation and it does not appear
to be convenient to request data in a projection other than the default.
Basically the driver really wants to establish an image size and it does
this from the GridCRS/BoundingBox (1.1) or GridEnvelope (1.0) and this
information is generally (always?) only available for the default coordinate
system.

It might be possible for you to manually massage all these values in
the CoverageOffering/CoverageDescription in the GDAL WCS control file
to "fake it out" as if another coordinate system was the default.  However,
I've never tried that and it might be fairly hard to get right.

As things are currently setup, it is really intended that GDAL "knows" the
true native coordinate system, grid size and georeferencing and accesses
on that basis.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From bruno.binet at camptocamp.com  Thu Feb 11 12:00:26 2010
From: bruno.binet at camptocamp.com (Bruno Binet)
Date: Thu Feb 11 12:00:52 2010
Subject: [gdal-dev] wcs extraction
In-Reply-To: <4B74283B.7060806@pobox.com>
References: <4b5079221002040312o76766255mfc4cf30b615df07f@mail.gmail.com> 
	<4B74283B.7060806@pobox.com>
Message-ID: <4b5079221002110900n754c81c8w55e9e003c82fb888@mail.gmail.com>

Thanks you very much Frank for the clarification.
You confirm what I understood.

Best regards,
Bruno

On 11 February 2010 16:54, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Bruno Binet wrote:
>>
>> Hi list,
>>
>> I'm currently trying to use the wcs gdal driver to extract data from a
>> wcs service (mapserver), using a specfic projection, extent and
>> resolution.
>> I managed to extract the all dataset in the original projection, and
>> format (geotiff).
>> But I would like to be able to specify a value for the format, the
>> extent, the projection, and the resolution for the data to be
>> extracted.
>>
>> Given the docs: http://www.gdal.org/frmt_wcs.html we can specify a
>> preferred format for extraction with the PreferredFormat element, but
>> what about projection, extent, and resolution?
>> Do we have to download the entire dataset and use gdal capabilities to
>> extract and reproject a subset of the downloaded data?
>> It would be great if it could be handled directly by mapserver.
>
> Bruno,
>
> I have skimmed the WCS driver implementation and it does not appear
> to be convenient to request data in a projection other than the default.
> Basically the driver really wants to establish an image size and it does
> this from the GridCRS/BoundingBox (1.1) or GridEnvelope (1.0) and this
> information is generally (always?) only available for the default coordinate
> system.
>
> It might be possible for you to manually massage all these values in
> the CoverageOffering/CoverageDescription in the GDAL WCS control file
> to "fake it out" as if another coordinate system was the default. ?However,
> I've never tried that and it might be fairly hard to get right.
>
> As things are currently setup, it is really intended that GDAL "knows" the
> true native coordinate system, grid size and georeferencing and accesses
> on that basis.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
>



-- 
Bruno Binet

Camptocamp France SAS
Savoie Technolac, BP 352
73377 Le Bourget du Lac, Cedex

Mail : bruno.binet@camptocamp.com
http://www.camptocamp.com
From Chris.Barker at noaa.gov  Thu Feb 11 12:26:36 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu Feb 11 12:22:14 2010
Subject: [gdal-dev] How to calculate total change in headings?
In-Reply-To: <9c2015091002102304ua79cff9v2a9bb28e97dcdbe@mail.gmail.com>
References: <9c2015091002102304ua79cff9v2a9bb28e97dcdbe@mail.gmail.com>
Message-ID: <4B743DCC.7000607@noaa.gov>

Roger Andr? wrote:
> Not a GDAL question at all, but one which might amuse some of you, and 
> which has been unsolveable in a satisfactory fashion for me.

fun with circular math...

> Given a list of compass headings in degrees, how can you reliably 
> calculate the total change in direction?
> 
> Here's an example:  [355.5, 10.0, 5.1]

how do you define "total change in direction"? Wouldn't it be the 
difference between the first and the last, with the ones in the middle 
irrelevant. So in that example, it would be 9.6 degrees.

Also, which would you want: -90degrees or +270 degrees for a change from 
90 to 0 ?

Anyway, a start is simply to do the subtraction then do "mod" 360. In 
Python:

In [28]: (5.1 - 355.5) % 360
Out[28]: 9.6000000000000227

In [30]: (0 - 90) % 360
Out[30]: 270

you can subtract 360 for values over 180, if you want.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From craig.miller at spatialminds.com  Thu Feb 11 13:32:07 2010
From: craig.miller at spatialminds.com (Miller, Craig)
Date: Thu Feb 11 13:32:10 2010
Subject: [gdal-dev] Spatial Filters and PostGIS
Message-ID: <e3e1d0091002111032k8338e8epbe85532a4b660c9c@mail.gmail.com>

I was browsing the PostGIS  driver code today and noticed that when used
with ExecuteSQL the spatial filters appear to be getting applied on the
client side instead of the PostGIS side.  Am I understanding the code
correctly?

No worries if it is, I'll just modify my SQL to included bbox info so I can
leverage the spatial indexes and reduce the resultset size.

Thanks,
Craig
-- 
Craig Miller
Geospatial Software Architect
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100211/af78a8b0/attachment.html
From warmerdam at pobox.com  Thu Feb 11 13:53:41 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 11 13:53:38 2010
Subject: [gdal-dev] Spatial Filters and PostGIS
In-Reply-To: <e3e1d0091002111032k8338e8epbe85532a4b660c9c@mail.gmail.com>
References: <e3e1d0091002111032k8338e8epbe85532a4b660c9c@mail.gmail.com>
Message-ID: <4B745235.7030203@pobox.com>

Miller, Craig wrote:
> I was browsing the PostGIS  driver code today and noticed that when used 
> with ExecuteSQL the spatial filters appear to be getting applied on the 
> client side instead of the PostGIS side.  Am I understanding the code 
> correctly?

Craig,

Yes, that is correct.  When using ExecuteSQL() we pass on the SQL
directly without alternation which means we need to do the spatial
query manually after the fact.

On the other hand, when you access postgres/postgis through a normal
OGRLayer, we do attempt to incorporate the spatial and attribute filters
into the internally generated SQL used to read the features.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From craig.miller at spatialminds.com  Thu Feb 11 14:02:02 2010
From: craig.miller at spatialminds.com (Miller, Craig)
Date: Thu Feb 11 14:02:06 2010
Subject: [gdal-dev] Spatial Filters and PostGIS
In-Reply-To: <4B745235.7030203@pobox.com>
References: <e3e1d0091002111032k8338e8epbe85532a4b660c9c@mail.gmail.com>
	<4B745235.7030203@pobox.com>
Message-ID: <e3e1d0091002111102n656ef221y467e9c81684f624@mail.gmail.com>

Thanks for the confirmation.  I'll tweak my queries accordingly.

Craig

On Thu, Feb 11, 2010 at 10:53 AM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Miller, Craig wrote:
>
>> I was browsing the PostGIS  driver code today and noticed that when used
>> with ExecuteSQL the spatial filters appear to be getting applied on the
>> client side instead of the PostGIS side.  Am I understanding the code
>> correctly?
>>
>
> Craig,
>
> Yes, that is correct.  When using ExecuteSQL() we pass on the SQL
> directly without alternation which means we need to do the spatial
> query manually after the fact.
>
> On the other hand, when you access postgres/postgis through a normal
> OGRLayer, we do attempt to incorporate the spatial and attribute filters
> into the internally generated SQL used to read the features.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>


-- 
Craig Miller
Geospatial Software Architect
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100211/9a0e273a/attachment.html
From dmorissette at mapgears.com  Thu Feb 11 14:14:57 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu Feb 11 14:14:59 2010
Subject: [gdal-dev] Motion: Extend Commit Access to Gaige Paulsen
In-Reply-To: <4B72EBED.2090408@pobox.com>
References: <4B72EBED.2090408@pobox.com>
Message-ID: <4B745731.9000704@mapgears.com>

Frank Warmerdam wrote:
> Motion: Extend GDAL/OGR Commit Access to Gaige Paulsen.
> 

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From even.rouault at mines-paris.org  Thu Feb 11 14:22:21 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb 11 14:22:32 2010
Subject: [gdal-dev] FWTools 2.4.7 ogr2org How to convert CSV to SQLite
	table
In-Reply-To: <eb502d881002110415r7e4b2654i2bf6ae51d99a21b9@mail.gmail.com>
References: <f7bd71731002110341w123d093k77bae8c14d28d51e@mail.gmail.com>
	<f7bd71731002110407w11362e37l5b2508588a55f397@mail.gmail.com>
	<eb502d881002110415r7e4b2654i2bf6ae51d99a21b9@mail.gmail.com>
Message-ID: <201002112022.21512.even.rouault@mines-paris.org>

I'm not sure if the version of sqlite3.dll included in latest FWTools is 
recent enough to support reading and/or creation of spatialite databases.

See http://bugzilla.maptools.org/show_bug.cgi?id=2099

Le Thursday 11 February 2010 13:15:23 Chaitanya kumar CH, vous avez ?crit?:
> Noli,
>
> There was a problem with the order of the arguments in your command.
> http://gdal.org/ogr2ogr.html
>
> On Thu, Feb 11, 2010 at 5:37 PM, Noli Sicad <nsicad@gmail.com> wrote:
> > OK. Sorry
> > This is the error,
> >
> > FAILURE:
> > Unable to open datasource `harvest.sqlite' with the following drivers.
> >  -> ESRI Shapefile
> >  -> MapInfo File
> >  -> UK .NTF
> >  -> SDTS
> >  -> TIGER
> >  -> S57
> >  -> DGN
> >  -> VRT
> >  -> REC
> >  -> Memory
> >  -> BNA
> >  -> CSV
> >  -> NAS
> >  -> GML
> >  -> GPX
> >  -> KML
> >  -> GeoJSON
> >  -> Interlis 1
> >  -> Interlis 2
> >  -> GMT
> >  -> SQLite
> >  -> ODBC
> >  -> PGeo
> >  -> OGDI
> >  -> PostgreSQL
> >  -> MySQL
> >  -> XPlane
> >  -> AVCBin
> >  -> AVCE00
> >  -> DXF
> >  -> Geoconcept
> >  -> GeoRSS
> >  -> GPSTrackMaker
> >  -> VFK
> >
> > On 2/11/10, Chaitanya kumar CH <chaitanya.ch@gmail.com> wrote:
> > > Noli,
> > >
> > > There must have been some error message. What did you get?


From nsicad at gmail.com  Thu Feb 11 14:38:46 2010
From: nsicad at gmail.com (Noli Sicad)
Date: Thu Feb 11 14:38:50 2010
Subject: [gdal-dev] FWTools 2.4.7 ogr2org How to convert CSV to SQLite 
	table
In-Reply-To: <201002112022.21512.even.rouault@mines-paris.org>
References: <f7bd71731002110341w123d093k77bae8c14d28d51e@mail.gmail.com>
	<f7bd71731002110407w11362e37l5b2508588a55f397@mail.gmail.com>
	<eb502d881002110415r7e4b2654i2bf6ae51d99a21b9@mail.gmail.com>
	<201002112022.21512.even.rouault@mines-paris.org>
Message-ID: <f7bd71731002111138h592695c4wb1270d559066911e@mail.gmail.com>

Even,
Thanks for pointing this out.

Kumar noticed that the "- f" there was space in between. The correct
syntax is "-f"

This one (below) is working.

ogr2ogr - f SQLite Harvest.sqlite HarvestArea1.csv  -dsco SPATIALITE=YES

Noli


On 2/12/10, Even Rouault <even.rouault@mines-paris.org> wrote:
> I'm not sure if the version of sqlite3.dll included in latest FWTools is
> recent enough to support reading and/or creation of spatialite databases.
>
> See http://bugzilla.maptools.org/show_bug.cgi?id=2099
>
> Le Thursday 11 February 2010 13:15:23 Chaitanya kumar CH, vous avez ?crit?:
>> Noli,
>>
>> There was a problem with the order of the arguments in your command.
>> http://gdal.org/ogr2ogr.html
>>
>> On Thu, Feb 11, 2010 at 5:37 PM, Noli Sicad <nsicad@gmail.com> wrote:
>> > OK. Sorry
>> > This is the error,
>> >
>> > FAILURE:
>> > Unable to open datasource `harvest.sqlite' with the following drivers.
>> >  -> ESRI Shapefile
>> >  -> MapInfo File
>> >  -> UK .NTF
>> >  -> SDTS
>> >  -> TIGER
>> >  -> S57
>> >  -> DGN
>> >  -> VRT
>> >  -> REC
>> >  -> Memory
>> >  -> BNA
>> >  -> CSV
>> >  -> NAS
>> >  -> GML
>> >  -> GPX
>> >  -> KML
>> >  -> GeoJSON
>> >  -> Interlis 1
>> >  -> Interlis 2
>> >  -> GMT
>> >  -> SQLite
>> >  -> ODBC
>> >  -> PGeo
>> >  -> OGDI
>> >  -> PostgreSQL
>> >  -> MySQL
>> >  -> XPlane
>> >  -> AVCBin
>> >  -> AVCE00
>> >  -> DXF
>> >  -> Geoconcept
>> >  -> GeoRSS
>> >  -> GPSTrackMaker
>> >  -> VFK
>> >
>> > On 2/11/10, Chaitanya kumar CH <chaitanya.ch@gmail.com> wrote:
>> > > Noli,
>> > >
>> > > There must have been some error message. What did you get?
>
>
>
From even.rouault at mines-paris.org  Thu Feb 11 14:50:32 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb 11 14:50:45 2010
Subject: [gdal-dev] Spatial Filters and PostGIS
In-Reply-To: <4B745235.7030203@pobox.com>
References: <e3e1d0091002111032k8338e8epbe85532a4b660c9c@mail.gmail.com>
	<4B745235.7030203@pobox.com>
Message-ID: <201002112050.33207.even.rouault@mines-paris.org>

Le Thursday 11 February 2010 19:53:41 Frank Warmerdam, vous avez ?crit?:

Craig,

Since GDAL 1.6.0, spatial filtering on layers returned by ExecuteSQL() should 
be rather fast (http://trac.osgeo.org/gdal/changeset/14291). I see a 
OGRPGResultLayer::SetSpatialFilter() method that appends an intersection test 
to the SQL request, similarly to what is done in OGRPGTableLayer. This is 
only true if the code was able to determine the SRID of the geometry column 
returned by your SQL request. Maybe your request is too complex for that ?

Best regards,

Even

> Miller, Craig wrote:
> > I was browsing the PostGIS  driver code today and noticed that when used
> > with ExecuteSQL the spatial filters appear to be getting applied on the
> > client side instead of the PostGIS side.  Am I understanding the code
> > correctly?
>
> Craig,
>
> Yes, that is correct.  When using ExecuteSQL() we pass on the SQL
> directly without alternation which means we need to do the spatial
> query manually after the fact.
>
> On the other hand, when you access postgres/postgis through a normal
> OGRLayer, we do attempt to incorporate the spatial and attribute filters
> into the internally generated SQL used to read the features.
>
> Best regards,


From craig.miller at spatialminds.com  Thu Feb 11 14:57:46 2010
From: craig.miller at spatialminds.com (Miller, Craig)
Date: Thu Feb 11 14:58:02 2010
Subject: [gdal-dev] Spatial Filters and PostGIS
In-Reply-To: <201002112050.33207.even.rouault@mines-paris.org>
References: <e3e1d0091002111032k8338e8epbe85532a4b660c9c@mail.gmail.com>
	<4B745235.7030203@pobox.com>
	<201002112050.33207.even.rouault@mines-paris.org>
Message-ID: <e3e1d0091002111157v6f80914ewb3c70cdbc577612d@mail.gmail.com>

I haven't done any performance testing.  I was just looking to understand
how to best structure my code/queries to insure that it will continue to
work well with extremely large datasets.





On Thu, Feb 11, 2010 at 11:50 AM, Even Rouault <even.rouault@mines-paris.org
> wrote:

> Le Thursday 11 February 2010 19:53:41 Frank Warmerdam, vous avez ?crit :
>
> Craig,
>
> Since GDAL 1.6.0, spatial filtering on layers returned by ExecuteSQL()
> should
> be rather fast (http://trac.osgeo.org/gdal/changeset/14291). I see a
> OGRPGResultLayer::SetSpatialFilter() method that appends an intersection
> test
> to the SQL request, similarly to what is done in OGRPGTableLayer. This is
> only true if the code was able to determine the SRID of the geometry column
> returned by your SQL request. Maybe your request is too complex for that ?
>
> Best regards,
>
> Even
>
> > Miller, Craig wrote:
> > > I was browsing the PostGIS  driver code today and noticed that when
> used
> > > with ExecuteSQL the spatial filters appear to be getting applied on the
> > > client side instead of the PostGIS side.  Am I understanding the code
> > > correctly?
> >
> > Craig,
> >
> > Yes, that is correct.  When using ExecuteSQL() we pass on the SQL
> > directly without alternation which means we need to do the spatial
> > query manually after the fact.
> >
> > On the other hand, when you access postgres/postgis through a normal
> > OGRLayer, we do attempt to incorporate the spatial and attribute filters
> > into the internally generated SQL used to read the features.
> >
> > Best regards,
>
>
>


-- 
Craig Miller
Geospatial Software Architect
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100211/ece0a6e5/attachment.html
From michele.sanges at gmail.com  Thu Feb 11 17:20:56 2010
From: michele.sanges at gmail.com (Michele Sanges)
Date: Thu Feb 11 17:23:05 2010
Subject: [gdal-dev] elevation profile
Message-ID: <4B7482C8.4030105@gmail.com>

Hello all,

opening a raster file with values of elevation (for example DEM or DTED 
files), is there a GDAL C++ API to get all the values of elevation 
between two places (elevation profile)?

Thanks.

Best regards.

-- 
Michele Sanges
From even.rouault at mines-paris.org  Thu Feb 11 17:24:05 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb 11 17:24:16 2010
Subject: [gdal-dev] elevation profile
In-Reply-To: <4B7482C8.4030105@gmail.com>
References: <4B7482C8.4030105@gmail.com>
Message-ID: <201002112324.06334.even.rouault@mines-paris.org>

No. This must be done by the calling application.

Le Thursday 11 February 2010 23:20:56 Michele Sanges, vous avez ?crit?:
> Hello all,
>
> opening a raster file with values of elevation (for example DEM or DTED
> files), is there a GDAL C++ API to get all the values of elevation
> between two places (elevation profile)?
>
> Thanks.
>
> Best regards.


From ebwolf at gmail.com  Fri Feb 12 04:18:23 2010
From: ebwolf at gmail.com (Eric Wolf)
Date: Fri Feb 12 04:18:27 2010
Subject: [gdal-dev] Oracle OCI connection in Python OGR
Message-ID: <18bb6ba01002120118v3821a4f6ye6ce404ab0321879@mail.gmail.com>

I'm using GDAL/OGR 1.6.1 with ActivePython 2.6.4-10 and cx_Oracle-5.0.3-11g.
I am trying to connect to an Oracle 11g instance.

This works:

    ogr2ogr -f "KML" emp.kml OCI:scott/tiger "EMP"

What am I doing wrong. This fails, ds is None:

from osgeo import ogr

try:
    d = ogr.GetDriverByName('OCI')
except:
    print "Unable to GetDriverByName"
    quit()

ds = None

try:
    ds = ogr.Open('OCI:scott/tiger')
except:
    print "Unable to open OCI connection"
    quit()

if ds is None:
    print "Unable to open Oracle connection", ds
    quit()

lyr = ds.GetLayerByName('EMP')
number = lyr.GetFeatureCount()

print "Features: " + str(number)




-=--=---=----=----=---=--=-=--=---=----=---=--=-=-
Eric B. Wolf                    New! 720-334-7734
USGS Geographer
Center of Excellence in GIScience
PhD Student
CU-Boulder - Geography

GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100212/8738972b/attachment.html
From ariasgore at gmx.de  Fri Feb 12 04:37:29 2010
From: ariasgore at gmx.de (ariasgore@gmx.de)
Date: Fri Feb 12 04:37:35 2010
Subject: [gdal-dev] How to supress std io of gdal?
Message-ID: <20100212093729.280200@gmx.net>

Hello,
I've been looking into the docs and also into the source without much luck.
When it comes to error handling, functions like GDALOpen just dump everything to the console when reading file error or similar things occur.

Is this customizable? GDAL is deeply burried in the logic-code part of our code which is not supposed to break the architecture by dumping unwanted information to the console or whatever is tied to the output stream.
Is there a way to redirect it to some other buffer? Like an internal stream which can then be properly propagated via exceptions or written into a log?

Thanks
Sam
-- 
NEU: Mit GMX DSL ?ber 1000,- ? sparen!
http://portal.gmx.net/de/go/dsl02
From hrz at geodata.soton.ac.uk  Fri Feb 12 04:48:24 2010
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Fri Feb 12 04:55:55 2010
Subject: [gdal-dev] Colour interpretation missing in the TMS mini-driver
Message-ID: <20100212094824.GA11292@sarah.geodata.soton.ac.uk>

Hello all,

I've been using the TMS mini driver for the first time (gdal 1.7.0)
and came across a problem that I think is due to the driver not
setting ColorInterp values on the raster bands it returns.

The problem arose using the gdal plugin to mapnik whereby all the
images mapnik renders using the TMS data are grayscale. It transpires
that mapnik treats gdal derived images as grayscale if no colour
interpretation is present (using the first band it comes across). You
could say this is a mapnik problem, but it seems to me that it is
Gdal's responsibility to properly define the data it returns. In this
case the TMS is returning RGB PNG images but the problem would also
apply to RGBA data sources.

My current workaround is to wrap the GDAL TMS description file in a
VRT file that explicitly assigns ColorInterp values, and use that VRT
as the mapnik datasource. It would be nice if the TMS driver did this
automatically.

Hopefully I'm not missing anything here; if there are no objections
I'll add this as a bug.

The TMS description I'm using is along these lines:

<GDAL_WMS>
  <Service name="TMS">
    <ServerUrl>http://my.local.tms</ServerUrl>
    <Layer>bathymetry</Layer>
    <Format>png</Format>
  </Service>
  <DataWindow>
    <UpperLeftX>-180.0</UpperLeftX>
    <UpperLeftY>90.0</UpperLeftY>
    <LowerRightX>180.0</LowerRightX>
    <LowerRightY>-90.0</LowerRightY>
    <TileLevel>19</TileLevel>
    <TileCountX>2</TileCountX>
    <TileCountY>1</TileCountY>
  </DataWindow>
  <Projection>EPSG:4326</Projection>
  <BlockSizeX>256</BlockSizeX>
  <BlockSizeY>256</BlockSizeY>
  <BandsCount>3</BandsCount>
  <MaxConnections>10</MaxConnections>
  <Timeout>5</Timeout>
</GDAL_WMS>

In case it helps others with the same issue, the VRT that corrects the
problem in mapnik is:

<VRTDataset rasterXSize="268435456" rasterYSize="134217728">
  <SRS>GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.01745329251994328,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]</SRS>
  <GeoTransform> -1.8000000000000000e+02,  1.3411045074462891e-06,  0.0000000000000000e+00,  9.0000000000000000e+01,  0.0000000000000000e+00, -1.3411045074462891e-06</GeoTransform>
  <Metadata/>
  <VRTRasterBand dataType="Byte" band="1">
    <ColorInterp>Red</ColorInterp>
    <Metadata/>
    <SimpleSource>
      <SourceFilename relativeToVRT="1">tms.xml</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="268435456" RasterYSize="134217728" DataType="Byte" BlockXSize="256" BlockYSize="256"/>
      <SrcRect xOff="0" yOff="0" xSize="268435456" ySize="134217728"/>
      <DstRect xOff="0" yOff="0" xSize="268435456" ySize="134217728"/>
    </SimpleSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="2">
    <ColorInterp>Green</ColorInterp>
    <Metadata/>
    <SimpleSource>
      <SourceFilename relativeToVRT="1">tms.xml</SourceFilename>
      <SourceBand>2</SourceBand>
      <SourceProperties RasterXSize="268435456" RasterYSize="134217728" DataType="Byte" BlockXSize="256" BlockYSize="256"/>
      <SrcRect xOff="0" yOff="0" xSize="268435456" ySize="134217728"/>
      <DstRect xOff="0" yOff="0" xSize="268435456" ySize="134217728"/>
    </SimpleSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="3">
    <ColorInterp>Blue</ColorInterp>
    <Metadata/>
    <SimpleSource>
      <SourceFilename relativeToVRT="1">tms.xml</SourceFilename>
      <SourceBand>3</SourceBand>
      <SourceProperties RasterXSize="268435456" RasterYSize="134217728" DataType="Byte" BlockXSize="256" BlockYSize="256"/>
      <SrcRect xOff="0" yOff="0" xSize="268435456" ySize="134217728"/>
      <DstRect xOff="0" yOff="0" xSize="268435456" ySize="134217728"/>
    </SimpleSource>
  </VRTRasterBand>
</VRTDataset>

Kind regards,

Homme

-- 
Homme Zwaagstra
GeoData Institute
University of Southampton

From aboudreault at mapgears.com  Fri Feb 12 08:25:35 2010
From: aboudreault at mapgears.com (Alan Boudreault)
Date: Fri Feb 12 08:30:51 2010
Subject: [gdal-dev] Oracle OCI connection in Python OGR
In-Reply-To: <18bb6ba01002120118v3821a4f6ye6ce404ab0321879@mail.gmail.com>
References: <18bb6ba01002120118v3821a4f6ye6ce404ab0321879@mail.gmail.com>
Message-ID: <201002120825.35673.aboudreault@mapgears.com>

Eric,

Could you try a OCI connection string like:

"OCI:user/password@host/SID"

Alan

On February 12, 2010 04:18:23 am Eric Wolf wrote:
> I'm using GDAL/OGR 1.6.1 with ActivePython 2.6.4-10 and
>  cx_Oracle-5.0.3-11g. I am trying to connect to an Oracle 11g instance.
> 
> This works:
> 
>     ogr2ogr -f "KML" emp.kml OCI:scott/tiger "EMP"
> 
> What am I doing wrong. This fails, ds is None:
> 
> from osgeo import ogr
> 
> try:
>     d = ogr.GetDriverByName('OCI')
> except:
>     print "Unable to GetDriverByName"
>     quit()
> 
> ds = None
> 
> try:
>     ds = ogr.Open('OCI:scott/tiger')
> except:
>     print "Unable to open OCI connection"
>     quit()
> 
> if ds is None:
>     print "Unable to open Oracle connection", ds
>     quit()
> 
> lyr = ds.GetLayerByName('EMP')
> number = lyr.GetFeatureCount()
> 
> print "Features: " + str(number)
> 
> 
> 
> 
> -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
> Eric B. Wolf                    New! 720-334-7734
> USGS Geographer
> Center of Excellence in GIScience
> PhD Student
> CU-Boulder - Geography
> 
> GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt
> 

-- 
Alan Boudreault
Mapgears
http://www.mapgears.com
From ivan.lucena at pmldnet.com  Fri Feb 12 08:35:25 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri Feb 12 08:35:28 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gSG93IHRvIHN1cHJlc3Mgc3RkIGlvIG9mIGdkYWw/?=
Message-ID: <20100212133525.31379.qmail@s466.sureserver.com>

Sam,

>  Is there a way to redirect it to some other buffer? Like an internal stream which can then be properly propagated via exceptions or written into a log?

It is probably not as sophisticated as you want or need but have you tried that:

gdalinfo out.tif > stdout.txt 2> stderr.txt

Regards,

Ivan

>  
>  Thanks
>  Sam
>  --
>  NEU: Mit GMX DSL ?ber 1000,- ? sparen!
>  http://portal.gmx.net/de/go/dsl02
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From abhay.menon at gmail.com  Fri Feb 12 08:56:11 2010
From: abhay.menon at gmail.com (Abhay)
Date: Fri Feb 12 09:01:58 2010
Subject: [gdal-dev] Oracle OCI connection in Python OGR
In-Reply-To: <18bb6ba01002120118v3821a4f6ye6ce404ab0321879@mail.gmail.com>
References: <18bb6ba01002120118v3821a4f6ye6ce404ab0321879@mail.gmail.com>
Message-ID: <7a30cd71002120556kbb2952dl8dc756d3175f2b08@mail.gmail.com>

On Fri, Feb 12, 2010 at 2:48 PM, Eric Wolf <ebwolf@gmail.com> wrote:

> I'm using GDAL/OGR 1.6.1 with ActivePython 2.6.4-10 and
> cx_Oracle-5.0.3-11g. I am trying to connect to an Oracle 11g instance.
>
> This works:
>
>     ogr2ogr -f "KML" emp.kml OCI:scott/tiger "EMP"
>
> What am I doing wrong. This fails, ds is None:
>
> from osgeo import ogr
>
> try:
>     d = ogr.GetDriverByName('OCI')
> except:
>     print "Unable to GetDriverByName"
>     quit()
>
> ds = None
>
> try:
>     ds = ogr.Open('OCI:scott/tiger')
> except:
>     print "Unable to open OCI connection"
>     quit()
>
> if ds is None:
>     print "Unable to open Oracle connection", ds
>     quit()
>
> lyr = ds.GetLayerByName('EMP')
> number = lyr.GetFeatureCount()
>
> print "Features: " + str(number)
>
>
>
>
> -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
> Eric B. Wolf                    New! 720-334-7734
> USGS Geographer
> Center of Excellence in GIScience
> PhD Student
> CU-Boulder - Geography
>
> GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

Hi Eric,

Form your mail it not clear what is cause of the problem.

There 2 scenario here

1) you are on a remote machine form where your trying to connect oracle
server machine:

a) Have you installed any Oracle Client in your system. Considering that you
are using the complete oracle client installation you can use the following
 :
OCI:scott/tiger@<Tnsname entry for eg. ORCL>

b) if you are trying out with Instant client for 11g you should try either
of the following

OCI:scott/tiger@//localhost/<your ORACLE SERVICE IDENTIFIER for eg ORCL>.

2) you are on the oracle server machine where

you must set the oracle SID. like the following
on windows
SET ORACLE_SID=ORCL
or
on *nix
export ORACLE_SID=ORCL

then try your implementation or use methods stated in 1)




Rgds.

Abhay.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100212/bac48845/attachment.html
From jluis at ualg.pt  Fri Feb 12 09:04:50 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Fri Feb 12 09:05:02 2010
Subject: [gdal-dev] How to supress std io of gdal?
In-Reply-To: <20100212133525.31379.qmail@s466.sureserver.com>
References: <20100212133525.31379.qmail@s466.sureserver.com>
Message-ID: <4B756002.8070009@ualg.pt>


I have also reported troubles of this type that unfortunately slipped 
across the last two gdal releases without being addressed.

http://trac.osgeo.org/gdal/ticket/3195

Here the problem is even worst as the errors are print to stdout

Joaquim Luis

> Sam,
>
>    
>>   Is there a way to redirect it to some other buffer? Like an internal stream which can then be properly propagated via exceptions or written into a log?
>>      
> It is probably not as sophisticated as you want or need but have you tried that:
>
> gdalinfo out.tif>  stdout.txt 2>  stderr.txt
>
> Regards,
>
> Ivan
>
>    
>>
>>   Thanks
>>   Sam
>>   --
>>   NEU: Mit GMX DSL ?ber 1000,- ? sparen!
>>   http://portal.gmx.net/de/go/dsl02
>>   _______________________________________________
>>   gdal-dev mailing list
>>   gdal-dev@lists.osgeo.org
>>   http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>      
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>    

From ari.jolma at gmail.com  Fri Feb 12 09:27:43 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Fri Feb 12 09:27:50 2010
Subject: [gdal-dev] How to supress std io of gdal?
In-Reply-To: <20100212093729.280200@gmx.net>
References: <20100212093729.280200@gmx.net>
Message-ID: <4B75655F.5090302@gmail.com>

Sam,

There is CPLSetErrorHandler, which you can use to set your own error 
handler function:

http://www.gdal.org/ogr/cpl__error_8h.html#74d0e649d58180e621540bf73b58e4a2

This is used for example by the HL bindings to redirect warnings and 
errors to respective systems of the HLs. See:

http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/include/cpl_exceptions.i

Regards,

Ari

ariasgore@gmx.de wrote:
> Hello,
> I've been looking into the docs and also into the source without much luck.
> When it comes to error handling, functions like GDALOpen just dump everything to the console when reading file error or similar things occur.
>
> Is this customizable? GDAL is deeply burried in the logic-code part of our code which is not supposed to break the architecture by dumping unwanted information to the console or whatever is tied to the output stream.
> Is there a way to redirect it to some other buffer? Like an internal stream which can then be properly propagated via exceptions or written into a log?
>
> Thanks
> Sam
>   

From jasonbeverage at gmail.com  Fri Feb 12 12:36:38 2010
From: jasonbeverage at gmail.com (Jason Beverage)
Date: Fri Feb 12 12:37:14 2010
Subject: [gdal-dev] ECW driver as a plugin
In-Reply-To: <201002102127.08005.even.rouault@mines-paris.org>
References: <2c4bbbeb1002100759o65432111vc992dc195aa805ad@mail.gmail.com> 
	<4B72F3EE.6020902@pobox.com>
	<2c4bbbeb1002101028t749fc0apa6dfca0b0b128c87@mail.gmail.com> 
	<201002102127.08005.even.rouault@mines-paris.org>
Message-ID: <2c4bbbeb1002120936g74afa205k35809e2ecd758550@mail.gmail.com>

Awesome, thanks for the info Even!

Jason

On Wed, Feb 10, 2010 at 3:27 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> In case it might interest you, the UbuntuGIS team packages a GDAL ECW plugin :
>
> https://launchpad.net/~ubuntugis/+archive/ppa/
>
> Le Wednesday 10 February 2010 19:28:08 Jason Beverage, vous avez ?crit?:
>> Hi Frank,
>>
>> By "official" version of the plugin I meant the definitive source. ?I
>> would have expected to find the ECW plugin as part of GDAL itself, or
>> downloadable from the GDAL website rather than going through GRASS to
>> get the GDAL ECW plugin. ?Just wanted to make sure I was getting the
>> plugin from the "right" place.
>>
>> Thanks,
>>
>> Jason
>>
>> On Wed, Feb 10, 2010 at 12:59 PM, Frank Warmerdam <warmerdam@pobox.com>
> wrote:
>> > Jason Beverage wrote:
>> >> Hi all,
>> >>
>> >> I'm exploring different methods of deploying GDAL with ECW support and
>> >> saw various posts about building ECW support as a plugin vs including
>> >> it within the build. ?I found the GDAL ECW plugin and instructions
>> >> here (http://home.prea.net/node/79) but the source is from the GRASS
>> >> project. ?I tried it out with GDAL 1.6.3 and it seemed to work great.
>> >> Is this the "official" GDAL ECW plugin?
>> >
>> > Jason,
>> >
>> > The approach described seems fine, but the project does not produce
>> > "official"
>> > binaries for linux itself, and so there is no official version of the
>> > plugin.
>> >
>> > Best regards,
>> > --
>> > ---------------------------------------+---------------------------------
>> >----- I set the clouds in motion - turn up ? | Frank Warmerdam,
>> > warmerdam@pobox.com
>> > light and sound - activate the windows | http://pobox.com/~warmerdam
>> > and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
From ebwolf at gmail.com  Fri Feb 12 13:02:52 2010
From: ebwolf at gmail.com (Eric Wolf)
Date: Fri Feb 12 13:02:56 2010
Subject: [gdal-dev] Oracle OCI connection in Python OGR
In-Reply-To: <7a30cd71002120556kbb2952dl8dc756d3175f2b08@mail.gmail.com>
References: <18bb6ba01002120118v3821a4f6ye6ce404ab0321879@mail.gmail.com>
	<7a30cd71002120556kbb2952dl8dc756d3175f2b08@mail.gmail.com>
Message-ID: <18bb6ba01002121002r243690d1xb70d3a98c1ba069@mail.gmail.com>

Thanks for the replies. Sorry I didn't give more details on the environment.

I am running on Windows, at the command line, both ogr2ogr and the python
script.

Created an environment variable for ORACLE_SID=ORCL

I double-checked my OCI string by using sqlplus to connect:

    sqlplus scott/tiger@orcl

This works fine. I changed the script to use that in the call to ogr.Open().
No luck.

I imported gdal and sprinkled print 'Error:', gdal.GetLastErrorMsg() in my
exception handlers. I got:

    Unable to open Oracle connection None
    Error:

Still no dice. If I take the same script and modify the GetDriverByName and
Open to use a shapefile, it works perfectly.

-Eric



-=--=---=----=----=---=--=-=--=---=----=---=--=-=-
Eric B. Wolf                    New! 720-334-7734
USGS Geographer
Center of Excellence in GIScience
PhD Student
CU-Boulder - Geography

GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt


On Fri, Feb 12, 2010 at 6:56 AM, Abhay <abhay.menon@gmail.com> wrote:

>
>
> On Fri, Feb 12, 2010 at 2:48 PM, Eric Wolf <ebwolf@gmail.com> wrote:
>
>> I'm using GDAL/OGR 1.6.1 with ActivePython 2.6.4-10 and
>> cx_Oracle-5.0.3-11g. I am trying to connect to an Oracle 11g instance.
>>
>> This works:
>>
>>     ogr2ogr -f "KML" emp.kml OCI:scott/tiger "EMP"
>>
>> What am I doing wrong. This fails, ds is None:
>>
>> from osgeo import ogr
>>
>> try:
>>     d = ogr.GetDriverByName('OCI')
>> except:
>>     print "Unable to GetDriverByName"
>>     quit()
>>
>> ds = None
>>
>> try:
>>     ds = ogr.Open('OCI:scott/tiger')
>> except:
>>     print "Unable to open OCI connection"
>>     quit()
>>
>> if ds is None:
>>     print "Unable to open Oracle connection", ds
>>     quit()
>>
>> lyr = ds.GetLayerByName('EMP')
>> number = lyr.GetFeatureCount()
>>
>> print "Features: " + str(number)
>>
>>
>>
>>
>> -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
>> Eric B. Wolf                    New! 720-334-7734
>> USGS Geographer
>> Center of Excellence in GIScience
>> PhD Student
>> CU-Boulder - Geography
>>
>> GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> Hi Eric,
>
> Form your mail it not clear what is cause of the problem.
>
> There 2 scenario here
>
> 1) you are on a remote machine form where your trying to connect oracle
> server machine:
>
> a) Have you installed any Oracle Client in your system. Considering that
> you are using the complete oracle client installation you can use the
> following  :
> OCI:scott/tiger@<Tnsname entry for eg. ORCL>
>
> b) if you are trying out with Instant client for 11g you should try either
> of the following
>
> OCI:scott/tiger@//localhost/<your ORACLE SERVICE IDENTIFIER for eg ORCL>.
>
> 2) you are on the oracle server machine where
>
> you must set the oracle SID. like the following
> on windows
> SET ORACLE_SID=ORCL
> or
> on *nix
> export ORACLE_SID=ORCL
>
> then try your implementation or use methods stated in 1)
>
>
>
>
> Rgds.
>
> Abhay.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100212/b0076299/attachment.html
From harsh.govind at spadac.com  Fri Feb 12 13:14:28 2010
From: harsh.govind at spadac.com (Harsh Govind)
Date: Fri Feb 12 13:14:32 2010
Subject: [gdal-dev] OGDI -- GDAL
In-Reply-To: <18bb6ba01002121002r243690d1xb70d3a98c1ba069@mail.gmail.com>
References: <18bb6ba01002120118v3821a4f6ye6ce404ab0321879@mail.gmail.com>
	<7a30cd71002120556kbb2952dl8dc756d3175f2b08@mail.gmail.com>
	<18bb6ba01002121002r243690d1xb70d3a98c1ba069@mail.gmail.com>
Message-ID: <4B3B3C35D34C9345BC8914C199882E2817ED4446C0@SPATCEX003.spadac.com>

I am trying to compile the OGDI library so that I may use it from within GDAL to read VPF data. I downloaded the code but seems like all the makefiles are setup for VC++ 6.0 in Win32 environment. All my other dlls are in VC++8.0.

Has anyone compiled OGDI in VS2005? How can I build OGDI with VS8.0? Thanks in advance.

Regards,
Harsh Govind


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100212/d8ae69b8/attachment.html
From warmerdam at pobox.com  Fri Feb 12 14:42:16 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 12 14:42:00 2010
Subject: [gdal-dev] OGDI -- GDAL
In-Reply-To: <4B3B3C35D34C9345BC8914C199882E2817ED4446C0@SPATCEX003.spadac.com>
References: <18bb6ba01002120118v3821a4f6ye6ce404ab0321879@mail.gmail.com>
	<7a30cd71002120556kbb2952dl8dc756d3175f2b08@mail.gmail.com>
	<18bb6ba01002121002r243690d1xb70d3a98c1ba069@mail.gmail.com>
	<4B3B3C35D34C9345BC8914C199882E2817ED4446C0@SPATCEX003.spadac.com>
Message-ID: <4B75AF18.4000803@pobox.com>

Harsh Govind wrote:
> I am trying to compile the OGDI library so that I may use it from within 
> GDAL to read VPF data. I downloaded the code but seems like all the 
> makefiles are setup for VC++ 6.0 in Win32 environment. All my other dlls 
> are in VC++8.0.
> 
>  
> 
> Has anyone compiled OGDI in VS2005? How can I build OGDI with VS8.0? 
> Thanks in advance.

Harsh,

I have had no problem building OGDI with VS2003, and I see no reason that
VS2005 or even VS2008 Express shouldn't work well.  One issue that isn't
addressed in the makefiles is doing anything about manifests.  You may find
it helpful to manually incorporate manifests into the DLLs using something
like:

mt -manifest abc.dll.manifest -outputresource:abc.dll;2

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Feb 12 23:04:55 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 12 23:04:33 2010
Subject: [gdal-dev] Re: Motion: Extend Commit Access to Gaige Paulsen
In-Reply-To: <4B72EBED.2090408@pobox.com>
References: <4B72EBED.2090408@pobox.com>
Message-ID: <4B7624E7.5010704@pobox.com>

Frank Warmerdam wrote:
> Motion: Extend GDAL/OGR Commit Access to Gaige Paulsen.

Folks,

I declare this motion passed with support from Daniel, Even, Tamas, Howard
and myself.  Welcome aboard Gaige!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mateusz at loskot.net  Sat Feb 13 15:33:21 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Feb 13 15:33:28 2010
Subject: [gdal-dev] Git clone of SVN trunk
Message-ID: <4B770C91.7000003@loskot.net>

Folks,

If anyone is interested, I've started mirroring GDAL SVN trunk
in Git repository svn-trunk

http://gitorious.org/gdal/

The main motivation is that it simplifies experimenting development
in case one needs version control or complete disconnection from
SVN trunk for some period.

Synchronization is not a time consuming process at all
but I hope to make it automatic process in near future.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From mateusz at loskot.net  Sat Feb 13 15:58:39 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Feb 13 15:58:44 2010
Subject: [gdal-dev] Git clone of SVN trunk
In-Reply-To: <4B770C91.7000003@loskot.net>
References: <4B770C91.7000003@loskot.net>
Message-ID: <4B77127F.8020303@loskot.net>

Mateusz Loskot wrote:
> Folks,
> 
> If anyone is interested, I've started mirroring GDAL SVN trunk
> in Git repository svn-trunk
> 
> http://gitorious.org/gdal/

http://trac.osgeo.org/gdal/wiki/UsingGitToMaintainGDALWorkflow


Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From even.rouault at mines-paris.org  Sat Feb 13 18:53:29 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Feb 13 18:53:41 2010
Subject: [gdal-dev] corrupt block on AIG dataset
In-Reply-To: <4B770406.7070203@brown.edu>
References: <4B770406.7070203@brown.edu>
Message-ID: <201002140053.30900.even.rouault@mines-paris.org>

Hum, not sure to remember the issue you're talking about...

Le Saturday 13 February 2010 20:56:54 ?mer ?zak, vous avez ?crit?:
>  Hi,
>
>  I read your postings about this problem being fixed. I'm getting a similar
> issue when I import many ArcGIS binary grids using the AIG with python. I
> upgraded to gdal 1.7.1 and the issue is still there. I've opened the
> dataset in Arcgis and they work ok, so I don't think it is an issue with
> the files. Do you know how one can solve this?
>
>  Thanks


From even.rouault at mines-paris.org  Sun Feb 14 05:57:42 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Feb 14 05:57:54 2010
Subject: [gdal-dev] corrupt block on AIG dataset
In-Reply-To: <4B77AD94.3040004@brown.edu>
References: <4B770406.7070203@brown.edu>
	<201002140053.30900.even.rouault@mines-paris.org>
	<4B77AD94.3040004@brown.edu>
Message-ID: <201002141157.43438.even.rouault@mines-paris.org>

?mer,

Is it really a new problem ? Looking at the history of the driver and the 
error message, I've the feeling it is not a new one.

You'd better open a Trac ticket and attach the dataset that causes the error.

You could also check if you get the same issue with the dataset used in the 
GDAL automated test : http://download.osgeo.org/gdal/data/aig/nzdem.zip

Best regards,

Even

PS : please avoid sending private email and add gdal-dev in CC.


Le Sunday 14 February 2010 09:00:20 ?mer ?zak, vous avez ?crit?:
> Well, I'm importing and working on AIG grids. The process will work
> sometimes and not others (even on the same file). It will give me an
> error saying there is a corrupt block. Strangely it is always when I
> issue the ReadAsArray() comand and it will say it is in X Block ref 36
> in all files. The nly thing that changes is the supposed number of bytes
> it was expecting and the number it actually received.
>
> Since I upgraded to GDAL1.7 it tells me the following:
>
> ERROR 1: Block is corrupt, block size was 0, but expected to be 8192.
> ERROR 1: IReadBlock failed at X offset 36, Y offset 2021
> ERROR 1: GetBlockRef failed at X block offset 36, Y block offset 2021
> Traceback (most recent call last):
>    File "<stdin>", line 1, in <module>
>    File "utils.py", line 132, in <module>
>    File
> "/Library/Frameworks/GDAL.framework/Versions/1.7/Python/site-packages/osgeo
>/gdal.py", line 895, in ReadAsArray
>      buf_xsize, buf_ysize, buf_obj )
>    File
> "/Library/Frameworks/GDAL.framework/Versions/1.7/Python/site-packages/osgeo
>/gdal_array.py", line 227, in BandReadAsArray
>      ar = numpy.reshape(ar, [buf_ysize,buf_xsize])
>    File
> "/Library/Frameworks/GDAL.framework/Versions/1.7/Python/site-packages/numpy
>/core/fromnumeric.py", line 152, in reshape
>      return reshape(newshape, order=order)
> ValueError: total size of new array must be unchanged
>
> Any ideas?
>
> On 2/13/10 6:53 PM, Even Rouault wrote:
> > Hum, not sure to remember the issue you're talking about...
> >
> > Le Saturday 13 February 2010 20:56:54 ?mer ?zak, vous avez ?crit :
> >>   Hi,
> >>
> >>   I read your postings about this problem being fixed. I'm getting a
> >> similar issue when I import many ArcGIS binary grids using the AIG with
> >> python. I upgraded to gdal 1.7.1 and the issue is still there. I've
> >> opened the dataset in Arcgis and they work ok, so I don't think it is an
> >> issue with the files. Do you know how one can solve this?
> >>
> >>   Thanks


From enrico at enricozini.org  Sun Feb 14 09:09:52 2010
From: enrico at enricozini.org (Enrico Zini)
Date: Sun Feb 14 09:09:03 2010
Subject: [gdal-dev] GDAL plugins based on meteosatlib
Message-ID: <20100214140952.GA32091@enricozini.org>

Hello,

Yesterday released msat-gdal[1] which is a set of GDAL plugins based on
meteosatlib[2].

The development of msat-gdal came from taking meteosatlib (which I
maintain for work) and making it more useful by writing gdal drivers for
it. I did not explore the existing GDAL MSG and MSGN drivers, so I do
not know how it compares.

[1] http://meteosatlib.sourceforge.net/msat-gdal.html
[2] http://meteosatlib.sourceforge.net/

My intention is to keep maintaining it as an out of tree set of plugins,
because the drivers make strong assumptions about the images being
meteosat images.


Ciao,

Enrico

-- 
GPG key: 4096R/E7AD5568 2009-05-08 Enrico Zini <enrico@enricozini.org>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 490 bytes
Desc: Digital signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100214/81dff3ff/attachment.bin
From ozak at BROWN.EDU  Sun Feb 14 14:32:15 2010
From: ozak at BROWN.EDU (ozak)
Date: Sun Feb 14 14:32:17 2010
Subject: [gdal-dev] Re: corrupt block on AIG dataset
In-Reply-To: <201002141157.43438.even.rouault@mines-paris.org>
References: <201002140053.30900.even.rouault@mines-paris.org>
	<201002141157.43438.even.rouault@mines-paris.org>
Message-ID: <1266175935893-4571318.post@n2.nabble.com>


Hi Even,

Thanks for your help.

I did try it with that test file and it work perfectly. But I'm having
issues with my files. I'll upload a link with one of my datasets (I have
like 500, all over 2GB, and all getting the same issue) in a while.

I have tried to process it on a MAC (using python 2.5 and GDAL 1.7), Linux
server and a windows machine (both using FWTools 2.0.6)...it might work for
a while (I was able to process 5 or 6 files) but then starts creating this
import errors, even on files it has processed without problems before. It's
a puzzle to me, but then I'm quite new to GDAL.

Best,

Omer


-- 
View this message in context: http://n2.nabble.com/Re-corrupt-block-on-AIG-dataset-tp4568372p4571318.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From abhay.menon at gmail.com  Sun Feb 14 14:45:32 2010
From: abhay.menon at gmail.com (Abhay)
Date: Sun Feb 14 14:45:54 2010
Subject: [gdal-dev] Oracle OCI connection in Python OGR
In-Reply-To: <18bb6ba01002121002r243690d1xb70d3a98c1ba069@mail.gmail.com>
References: <18bb6ba01002120118v3821a4f6ye6ce404ab0321879@mail.gmail.com> 
	<7a30cd71002120556kbb2952dl8dc756d3175f2b08@mail.gmail.com> 
	<18bb6ba01002121002r243690d1xb70d3a98c1ba069@mail.gmail.com>
Message-ID: <7a30cd71002141145h606dbfacy2347f97bf1808457@mail.gmail.com>

On Fri, Feb 12, 2010 at 11:32 PM, Eric Wolf <ebwolf@gmail.com> wrote:

> Thanks for the replies. Sorry I didn't give more details on the
> environment.
>
> I am running on Windows, at the command line, both ogr2ogr and the python
> script.
>
> Created an environment variable for ORACLE_SID=ORCL
>
> I double-checked my OCI string by using sqlplus to connect:
>
>     sqlplus scott/tiger@orcl
>
> This works fine. I changed the script to use that in the call to
> ogr.Open(). No luck.
>
> I imported gdal and sprinkled print 'Error:', gdal.GetLastErrorMsg() in my
> exception handlers. I got:
>
>     Unable to open Oracle connection None
>     Error:
>
> Still no dice. If I take the same script and modify the GetDriverByName and
> Open to use a shapefile, it works perfectly.
>
> -Eric
>
>
>
> -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
> Eric B. Wolf                    New! 720-334-7734
> USGS Geographer
> Center of Excellence in GIScience
> PhD Student
> CU-Boulder - Geography
>
> GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt
>
>
> On Fri, Feb 12, 2010 at 6:56 AM, Abhay <abhay.menon@gmail.com> wrote:
>
>>
>>
>> On Fri, Feb 12, 2010 at 2:48 PM, Eric Wolf <ebwolf@gmail.com> wrote:
>>
>>> I'm using GDAL/OGR 1.6.1 with ActivePython 2.6.4-10 and
>>> cx_Oracle-5.0.3-11g. I am trying to connect to an Oracle 11g instance.
>>>
>>> This works:
>>>
>>>     ogr2ogr -f "KML" emp.kml OCI:scott/tiger "EMP"
>>>
>>> What am I doing wrong. This fails, ds is None:
>>>
>>> from osgeo import ogr
>>>
>>> try:
>>>     d = ogr.GetDriverByName('OCI')
>>> except:
>>>     print "Unable to GetDriverByName"
>>>     quit()
>>>
>>> ds = None
>>>
>>> try:
>>>     ds = ogr.Open('OCI:scott/tiger')
>>> except:
>>>     print "Unable to open OCI connection"
>>>     quit()
>>>
>>> if ds is None:
>>>     print "Unable to open Oracle connection", ds
>>>     quit()
>>>
>>> lyr = ds.GetLayerByName('EMP')
>>> number = lyr.GetFeatureCount()
>>>
>>> print "Features: " + str(number)
>>>
>>>
>>>
>>>
>>> -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
>>> Eric B. Wolf                    New! 720-334-7734
>>> USGS Geographer
>>> Center of Excellence in GIScience
>>> PhD Student
>>> CU-Boulder - Geography
>>>
>>> GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>> Hi Eric,
>>
>> Form your mail it not clear what is cause of the problem.
>>
>> There 2 scenario here
>>
>> 1) you are on a remote machine form where your trying to connect oracle
>> server machine:
>>
>> a) Have you installed any Oracle Client in your system. Considering that
>> you are using the complete oracle client installation you can use the
>> following  :
>> OCI:scott/tiger@<Tnsname entry for eg. ORCL>
>>
>> b) if you are trying out with Instant client for 11g you should try either
>> of the following
>>
>> OCI:scott/tiger@//localhost/<your ORACLE SERVICE IDENTIFIER for eg ORCL>.
>>
>> 2) you are on the oracle server machine where
>>
>> you must set the oracle SID. like the following
>> on windows
>> SET ORACLE_SID=ORCL
>> or
>> on *nix
>> export ORACLE_SID=ORCL
>>
>> then try your implementation or use methods stated in 1)
>>
>>
>>
>>
>> Rgds.
>>
>> Abhay.
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

Hi Eric,

What I still did not get is whether your running Oracle Server 11g on the
same machine on which your developing.

Also have you tried connecting the same using "cx_Oracle.Connection" whether
this connect string is working.

Are you using gdal-1.6.1-py2.6-win32.egg install with Python or build your
on using SWIG python implementation.

Interestingly, what I found is that in gdal-1.6.1-py2.5-win32.egg which
install using easy_install seem not work with OCI driver as way it should.
But connection string using cx_Oracle is working. So it seem
gdal-1.6.1-py*-win32.egg is broken for OCI plugin or probably it must be
some setup I must have overlooked will setup, if someone else is working
with same setup could help on this or Howard could comment on this.

I have build my own egg using latest repo of gdal build and is working. If
you need I can share the same egg file (for python 2.6) or wait for Howard
to compile for the latest build of GDAL-1.7 for python officially as you
would need gdalwin32-17 for this along with OCI build plugin.

Rgds.

Abhay.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100215/7c4f5884/attachment.html
From ozak at BROWN.EDU  Sun Feb 14 16:41:40 2010
From: ozak at BROWN.EDU (ozak)
Date: Sun Feb 14 16:41:43 2010
Subject: [gdal-dev] Re: corrupt block on AIG dataset
In-Reply-To: <1266175935893-4571318.post@n2.nabble.com>
References: <201002140053.30900.even.rouault@mines-paris.org>
	<201002141157.43438.even.rouault@mines-paris.org>
	<1266175935893-4571318.post@n2.nabble.com>
Message-ID: <1266183700352-4571794.post@n2.nabble.com>


Hi Even and community,

here's the link to the dataset that causes the error:
http://www.econ.brown.edu/students/Omer_Ozak_Munoz/Datasets/afgdist.zip Data 

I was using the following code which used another dataset to create a mask,
but that's not the issue, so it could be simply deleted. I really appreciate
your help.

Best,

Omer

#############################

import os, sys, time

try:
    from osgeo import gdal, gdalconst
    from osgeo.gdalconst import *
    import numpy
    use_numeric = False
    
except:
    import gdal, gdalconst
    from gdalconst import *
    import Numeric
    use_numeric = True    
    
# start timing
startTime=time.time()
pais = 'afg'
file= pais+'.txt'
file = open(file,'w')
# prepare gdal for importing ARCGIS binary grid
#gdal.AllRegister()
driver = gdal.GetDriverByName('AIG')
driver.Register()

if use_numeric:
    # set the directory
    dire='/direct/'
else:
    dire='/Volumes/direct/'
# the file to open
fn = dire+'timehours'
mask = gdal.Open(fn, GA_ReadOnly)
if mask is None:
    print('Could not open' + fn)
    sys.exit(1)
else:
    #determine info of grid 
    mcols = mask.RasterXSize
    mrows = mask.RasterYSize
    mbands = mask.RasterCount
    mgeotransform = mask.GetGeoTransform()
    moriginX = mgeotransform[0]
    moriginY = mgeotransform[3]
    mpixelWidth = mgeotransform[1]
    mpixelHeight = mgeotransform[5]
    mband = mask.GetRasterBand(1) 
    
# set the directory
if use_numeric:
    os.chdir('/direct')
else:
    os.chdir('/Volumes/direct')

# the file to open
fn = pais+'dist'
ds = gdal.Open(fn, GA_ReadOnly)
if ds is None:
    print('Could not open ' + fn)
    sys.exit(1)
else:
    #determine info of grid 
    cols = ds.RasterXSize
    rows = ds.RasterYSize
    bands = ds.RasterCount
    geotransform = ds.GetGeoTransform()
    originX = geotransform[0]
    originY = geotransform[3]
    pixelWidth = geotransform[1]
    pixelHeight = geotransform[5]
    band = ds.GetRasterBand(1)
    # read the whole data    
    #data = band.ReadAsArray(0, 0, cols, rows)
    # read only a couple of lines in (x,y)
    x=-2684213
    y=6146882
    #x=1000000
    #y=1000000
    suma=0
    count=0
    maxi=0
    xOffset = int((x-originX) / pixelWidth)
    yOffset = int((y-originY) / pixelHeight)
    y = -3883447
    yend = int((y-originY) / pixelHeight)
    xBsize = 100
    yBsize = 100
    #print 'mrows='+str(mrows)+' mcol='+str(mcols)
    #print 'rows='+str(rows)+' col='+str(cols)
    #print 'xoffset=' + str(xOffset) +', yoffset=' + str(yOffset) 
    for j in range(xOffset,cols,xBsize):
        if j + xBsize <= cols:
            ncols=xBsize
        else:
            ncols=cols-j
        for i in range (yOffset,yend,yBsize):
            if i+yBsize<=yend:
                nrows=yBsize
            else:
                nrows=yend-i
            if use_numeric:
                data = band.ReadAsArray(j, i, ncols ,
nrows).astype(Numeric.Float)
                mdata = mband.ReadAsArray(j, i, ncols , nrows)
                mdata = Numeric.greater(data,0)
                data = data * mdata
                count = Numeric.sum(Numeric.sum(mdata))+count
                suma = Numeric.sum(Numeric.sum(data))+suma
                maxi = max(max(max(data)), maxi)                
            else:                
                data = band.ReadAsArray(j, i, ncols ,
nrows).astype(numpy.float32)
                mdata = mband.ReadAsArray(j, i, ncols , nrows)
                mdata = numpy.greater(mdata,0)
                data = data * mdata
                count = numpy.sum(numpy.sum(mdata))+count
                suma = numpy.sum(numpy.sum(data))+suma 
                maxi=numpy.maximum(numpy.max(data),maxi)                
    #print 'i=' +str(i)+' j='+str(j)+' count=' +str(count)
    print(' media=' + str(suma / count)+' max=' +str(maxi)+'
suma='+str(suma)+' count='+str(count))
    file.write('code,mean,max,sum \n')
    file.write(pais+ str(suma/count)+','+str(maxi)+','+str(suma)+' \n')
    #print 'bands=' + str(bands) + ', originX=' + str(originX) + ',
originY=' + str(originY)
    print('xoffset=' + str(xOffset) +', yoffset=' + str(yOffset)) 
    endTime=time.time()
    print('It took ' + str(startTime-endTime) + ' seconds')
    file.close()
-- 
View this message in context: http://n2.nabble.com/Re-corrupt-block-on-AIG-dataset-tp4568372p4571794.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Sun Feb 14 17:43:31 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Feb 14 17:43:52 2010
Subject: [gdal-dev] Re: corrupt block on AIG dataset
In-Reply-To: <1266183700352-4571794.post@n2.nabble.com>
References: <201002140053.30900.even.rouault@mines-paris.org>
	<1266175935893-4571318.post@n2.nabble.com>
	<1266183700352-4571794.post@n2.nabble.com>
Message-ID: <201002142343.35039.even.rouault@mines-paris.org>

Omer,

I've downloaded the dataset and run gdalinfo -checksum on it successfully (I'm 
using gdal-trunk - equivalent to 1.7 as far as AIG is concerned on 64bit 
Linux)

Now I'm running your script (with a slight modification to use the dataset as 
mask too), and until here (takes quite a long time to run!), I see no 
problem.

Not sure why you get errors...

Le Sunday 14 February 2010 22:41:40 ozak, vous avez ?crit?:
> Hi Even and community,
>
> here's the link to the dataset that causes the error:
> http://www.econ.brown.edu/students/Omer_Ozak_Munoz/Datasets/afgdist.zip
> Data
>
> I was using the following code which used another dataset to create a mask,
> but that's not the issue, so it could be simply deleted. I really
> appreciate your help.
>
> Best,
>
> Omer
>
> #############################
>
> import os, sys, time
>
> try:
>     from osgeo import gdal, gdalconst
>     from osgeo.gdalconst import *
>     import numpy
>     use_numeric = False
>
> except:
>     import gdal, gdalconst
>     from gdalconst import *
>     import Numeric
>     use_numeric = True
>
> # start timing
> startTime=time.time()
> pais = 'afg'
> file= pais+'.txt'
> file = open(file,'w')
> # prepare gdal for importing ARCGIS binary grid
> #gdal.AllRegister()
> driver = gdal.GetDriverByName('AIG')
> driver.Register()
>
> if use_numeric:
>     # set the directory
>     dire='/direct/'
> else:
>     dire='/Volumes/direct/'
> # the file to open
> fn = dire+'timehours'
> mask = gdal.Open(fn, GA_ReadOnly)
> if mask is None:
>     print('Could not open' + fn)
>     sys.exit(1)
> else:
>     #determine info of grid
>     mcols = mask.RasterXSize
>     mrows = mask.RasterYSize
>     mbands = mask.RasterCount
>     mgeotransform = mask.GetGeoTransform()
>     moriginX = mgeotransform[0]
>     moriginY = mgeotransform[3]
>     mpixelWidth = mgeotransform[1]
>     mpixelHeight = mgeotransform[5]
>     mband = mask.GetRasterBand(1)
>
> # set the directory
> if use_numeric:
>     os.chdir('/direct')
> else:
>     os.chdir('/Volumes/direct')
>
> # the file to open
> fn = pais+'dist'
> ds = gdal.Open(fn, GA_ReadOnly)
> if ds is None:
>     print('Could not open ' + fn)
>     sys.exit(1)
> else:
>     #determine info of grid
>     cols = ds.RasterXSize
>     rows = ds.RasterYSize
>     bands = ds.RasterCount
>     geotransform = ds.GetGeoTransform()
>     originX = geotransform[0]
>     originY = geotransform[3]
>     pixelWidth = geotransform[1]
>     pixelHeight = geotransform[5]
>     band = ds.GetRasterBand(1)
>     # read the whole data
>     #data = band.ReadAsArray(0, 0, cols, rows)
>     # read only a couple of lines in (x,y)
>     x=-2684213
>     y=6146882
>     #x=1000000
>     #y=1000000
>     suma=0
>     count=0
>     maxi=0
>     xOffset = int((x-originX) / pixelWidth)
>     yOffset = int((y-originY) / pixelHeight)
>     y = -3883447
>     yend = int((y-originY) / pixelHeight)
>     xBsize = 100
>     yBsize = 100
>     #print 'mrows='+str(mrows)+' mcol='+str(mcols)
>     #print 'rows='+str(rows)+' col='+str(cols)
>     #print 'xoffset=' + str(xOffset) +', yoffset=' + str(yOffset)
>     for j in range(xOffset,cols,xBsize):
>         if j + xBsize <= cols:
>             ncols=xBsize
>         else:
>             ncols=cols-j
>         for i in range (yOffset,yend,yBsize):
>             if i+yBsize<=yend:
>                 nrows=yBsize
>             else:
>                 nrows=yend-i
>             if use_numeric:
>                 data = band.ReadAsArray(j, i, ncols ,
> nrows).astype(Numeric.Float)
>                 mdata = mband.ReadAsArray(j, i, ncols , nrows)
>                 mdata = Numeric.greater(data,0)
>                 data = data * mdata
>                 count = Numeric.sum(Numeric.sum(mdata))+count
>                 suma = Numeric.sum(Numeric.sum(data))+suma
>                 maxi = max(max(max(data)), maxi)
>             else:
>                 data = band.ReadAsArray(j, i, ncols ,
> nrows).astype(numpy.float32)
>                 mdata = mband.ReadAsArray(j, i, ncols , nrows)
>                 mdata = numpy.greater(mdata,0)
>                 data = data * mdata
>                 count = numpy.sum(numpy.sum(mdata))+count
>                 suma = numpy.sum(numpy.sum(data))+suma
>                 maxi=numpy.maximum(numpy.max(data),maxi)
>     #print 'i=' +str(i)+' j='+str(j)+' count=' +str(count)
>     print(' media=' + str(suma / count)+' max=' +str(maxi)+'
> suma='+str(suma)+' count='+str(count))
>     file.write('code,mean,max,sum \n')
>     file.write(pais+ str(suma/count)+','+str(maxi)+','+str(suma)+' \n')
>     #print 'bands=' + str(bands) + ', originX=' + str(originX) + ',
> originY=' + str(originY)
>     print('xoffset=' + str(xOffset) +', yoffset=' + str(yOffset))
>     endTime=time.time()
>     print('It took ' + str(startTime-endTime) + ' seconds')
>     file.close()


From ozak at BROWN.EDU  Sun Feb 14 19:09:23 2010
From: ozak at BROWN.EDU (ozak)
Date: Sun Feb 14 19:09:26 2010
Subject: [gdal-dev] Re: corrupt block on AIG dataset
In-Reply-To: <201002142343.35039.even.rouault@mines-paris.org>
References: <201002140053.30900.even.rouault@mines-paris.org>
	<201002141157.43438.even.rouault@mines-paris.org>
	<1266175935893-4571318.post@n2.nabble.com>
	<1266183700352-4571794.post@n2.nabble.com>
	<201002142343.35039.even.rouault@mines-paris.org>
Message-ID: <1266192563124-4572259.post@n2.nabble.com>


Hi Even,

that's exactly my problem...sometimes it works. Others it fails without any
reason.

I thought it had to do with the speed of connection between the linux server
and the windows computer that holds the data, which was causing the problem,
but I tried running it directly with FWTools on the windows computer, but it
still generated the same problem.
-- 
View this message in context: http://n2.nabble.com/Re-corrupt-block-on-AIG-dataset-tp4568372p4572259.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From tosborn at sbcglobal.net  Sun Feb 14 22:45:56 2010
From: tosborn at sbcglobal.net (Tim Osborn)
Date: Sun Feb 14 22:45:58 2010
Subject: [gdal-dev] GDAL_PAM_ENABLED ....Yes for reading, No for writing?
Message-ID: <1266205556488-4572762.post@n2.nabble.com>


It seems that when I set a GDAL_PAM_ENABLED environment variable to NO, it
not only suppresses the creation of aux.xml file (what I desire), but it
also suppresses the reading of aux files as in ds.getprojectionref() (not
desired).  Is there a way to only suppress the creation of aux.xml files but
keep the ability to read aux files associated with, for example Mr.Sid
files?

Thanks

Tim Osborn
-- 
View this message in context: http://n2.nabble.com/GDAL-PAM-ENABLED-Yes-for-reading-No-for-writing-tp4572762p4572762.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From P.Halls at york.ac.uk  Mon Feb 15 02:22:30 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Mon Feb 15 02:22:42 2010
Subject: [gdal-dev] Oracle OCI connection in Python OGR
In-Reply-To: <18bb6ba01002121002r243690d1xb70d3a98c1ba069@mail.gmail.com>
References: <18bb6ba01002120118v3821a4f6ye6ce404ab0321879@mail.gmail.com>	<7a30cd71002120556kbb2952dl8dc756d3175f2b08@mail.gmail.com>
	<18bb6ba01002121002r243690d1xb70d3a98c1ba069@mail.gmail.com>
Message-ID: <4B78F636.6070006@york.ac.uk>

Eric,

    when you installed the Oracle Client, which options did you install? 
SQLPlus will install (and work) regardless of whether the OCI libraries are 
installed - this has given grief to many here who have not read the 
documentation prior to performing the install!  The Oracle tool I have found to 
be a more representative test is SQL Developer - it is much nicer to use than 
SQLPlus as well and is another install option.

    Of course, it may be that your problem is related to the possible build 
problem described by others ....

Best wishes,

Peter

Eric Wolf wrote:
> Thanks for the replies. Sorry I didn't give more details on the environment.
> 
> I am running on Windows, at the command line, both ogr2ogr and the python
> script.
> 
> Created an environment variable for ORACLE_SID=ORCL
> 
> I double-checked my OCI string by using sqlplus to connect:
> 
>     sqlplus scott/tiger@orcl
> 
> This works fine. I changed the script to use that in the call to ogr.Open().
> No luck.
> 
> I imported gdal and sprinkled print 'Error:', gdal.GetLastErrorMsg() in my
> exception handlers. I got:
> 
>     Unable to open Oracle connection None
>     Error:
> 
> Still no dice. If I take the same script and modify the GetDriverByName and
> Open to use a shapefile, it works perfectly.
> 
> -Eric
> 
> 
> 
> -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
> Eric B. Wolf                    New! 720-334-7734
> USGS Geographer
> Center of Excellence in GIScience
> PhD Student
> CU-Boulder - Geography
> 
> GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt
> 
> 
> On Fri, Feb 12, 2010 at 6:56 AM, Abhay <abhay.menon@gmail.com> wrote:
> 
>>
>> On Fri, Feb 12, 2010 at 2:48 PM, Eric Wolf <ebwolf@gmail.com> wrote:
>>
>>> I'm using GDAL/OGR 1.6.1 with ActivePython 2.6.4-10 and
>>> cx_Oracle-5.0.3-11g. I am trying to connect to an Oracle 11g instance.
>>>
>>> This works:
>>>
>>>     ogr2ogr -f "KML" emp.kml OCI:scott/tiger "EMP"
>>>
>>> What am I doing wrong. This fails, ds is None:
>>>
>>> from osgeo import ogr
>>>
>>> try:
>>>     d = ogr.GetDriverByName('OCI')
>>> except:
>>>     print "Unable to GetDriverByName"
>>>     quit()
>>>
>>> ds = None
>>>
>>> try:
>>>     ds = ogr.Open('OCI:scott/tiger')
>>> except:
>>>     print "Unable to open OCI connection"
>>>     quit()
>>>
>>> if ds is None:
>>>     print "Unable to open Oracle connection", ds
>>>     quit()
>>>
>>> lyr = ds.GetLayerByName('EMP')
>>> number = lyr.GetFeatureCount()
>>>
>>> print "Features: " + str(number)
>>>
>>>
>>>
>>>
>>> -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
>>> Eric B. Wolf                    New! 720-334-7734
>>> USGS Geographer
>>> Center of Excellence in GIScience
>>> PhD Student
>>> CU-Boulder - Geography
>>>
>>> GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>> Hi Eric,
>>
>> Form your mail it not clear what is cause of the problem.
>>
>> There 2 scenario here
>>
>> 1) you are on a remote machine form where your trying to connect oracle
>> server machine:
>>
>> a) Have you installed any Oracle Client in your system. Considering that
>> you are using the complete oracle client installation you can use the
>> following  :
>> OCI:scott/tiger@<Tnsname entry for eg. ORCL>
>>
>> b) if you are trying out with Instant client for 11g you should try either
>> of the following
>>
>> OCI:scott/tiger@//localhost/<your ORACLE SERVICE IDENTIFIER for eg ORCL>.
>>
>> 2) you are on the oracle server machine where
>>
>> you must set the oracle SID. like the following
>> on windows
>> SET ORACLE_SID=ORCL
>> or
>> on *nix
>> export ORACLE_SID=ORCL
>>
>> then try your implementation or use methods stated in 1)
>>
>>
>>
>>
>> Rgds.
>>
>> Abhay.
>>
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 433806     Fax: 01904 433740
Snail mail: Computing Service, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From jrepetto at free.fr  Mon Feb 15 07:02:16 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Mon Feb 15 07:10:59 2010
Subject: [gdal-dev] elevation profile
In-Reply-To: <4B7482C8.4030105@gmail.com>
References: <4B7482C8.4030105@gmail.com>
Message-ID: <4B7937C8.2080203@free.fr>

Michele Sanges a ?crit :
> Hello all,
> 
> opening a raster file with values of elevation (for example DEM or DTED 
> files), is there a GDAL C++ API to get all the values of elevation 
> between two places (elevation profile)?
> 
> Thanks.
> 
> Best regards.
> 

Hello Michele,

There is an interesting paper about this problem :
<http://www.geocomputation.org/1999/082/gc_082.htm>

I don't know if there are libraries implementing these algorithms for 
DEM interpolation. Does anybody know if there is an open source function 
to compute the coefficients of a bicubic interpolation ?

Regards,
Jean-Claude




From jluis at ualg.pt  Mon Feb 15 08:10:41 2010
From: jluis at ualg.pt (jluis@ualg.pt)
Date: Mon Feb 15 08:10:54 2010
Subject: [gdal-dev] elevation profile
In-Reply-To: <4B7937C8.2080203@free.fr>
References: <4B7482C8.4030105@gmail.com> <4B7937C8.2080203@free.fr>
Message-ID: <20100215141041.82995g17es7giodw@wmail.ualg.pt>

Citando Jean-Claude REPETTO <jrepetto@free.fr>:

> Michele Sanges a ?crit :
>> Hello all,
>>
>> opening a raster file with values of elevation (for example DEM or  
>> DTED files), is there a GDAL C++ API to get all the values of  
>> elevation between two places (elevation profile)?
>>
>> Thanks.
>>
>> Best regards.
>>
>
> Hello Michele,
>
> There is an interesting paper about this problem :
> <http://www.geocomputation.org/1999/082/gc_082.htm>
>
> I don't know if there are libraries implementing these algorithms  
> for DEM interpolation. Does anybody know if there is an open source  
> function to compute the coefficients of a bicubic interpolation ?
>
> Regards,
> Jean-Claude


You can do that very easily with GMT (grdtrack).

Joaquim Luis


----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.

From jluis at ualg.pt  Mon Feb 15 08:11:42 2010
From: jluis at ualg.pt (jluis@ualg.pt)
Date: Mon Feb 15 08:11:48 2010
Subject: [gdal-dev] elevation profile
In-Reply-To: <4B7937C8.2080203@free.fr>
References: <4B7482C8.4030105@gmail.com> <4B7937C8.2080203@free.fr>
Message-ID: <20100215141142.46750xrud0v4y0pc@wmail.ualg.pt>

Citando Jean-Claude REPETTO <jrepetto@free.fr>:

> Michele Sanges a ?crit :
>> Hello all,
>>
>> opening a raster file with values of elevation (for example DEM or  
>> DTED files), is there a GDAL C++ API to get all the values of  
>> elevation between two places (elevation profile)?
>>
>> Thanks.
>>
>> Best regards.
>>
>
> Hello Michele,
>
> There is an interesting paper about this problem :
> <http://www.geocomputation.org/1999/082/gc_082.htm>
>
> I don't know if there are libraries implementing these algorithms  
> for DEM interpolation. Does anybody know if there is an open source  
> function to compute the coefficients of a bicubic interpolation ?
>
> Regards,
> Jean-Claude
You can do that very easily with GMT (grdtrack).

Joaquim Luis


----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.

From peifer at gmx.eu  Mon Feb 15 14:02:38 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon Feb 15 14:03:00 2010
Subject: [gdal-dev] gdal_translate -scale and negative values
Message-ID: <hlc5oc$gg4$1@ger.gmane.org>

Hi,

I am trying to scale the values in an Int16 raster band. Basically, I want to have them divided by 100. It looks to me that negative values are not scaled at all, whatever ranges I give to -scale. What am I doing wrong? 

Hermann 

$ gdalinfo -mm infile.tif
...
Band 1 Block=7200x1 Type=Int16, ColorInterp=Gray
    Computed Min/Max=-464.000,3122.000
  NoData Value=-32768
...

$ gdal_translate infile.tif outfile.tif -scale -500 0 -5 0
Input file size is 7200, 3600
0...10...20...30...40...50...60...70...80...90...100 - done.

$ gdalinfo -mm outfile.tif
...
Band 1 Block=7200x1 Type=Int16, ColorInterp=Gray
    Computed Min/Max=-328.000,31.000
  NoData Value=-32768
...

$ gdalinfo --version
GDAL 1.7.1, released 2010/02/08

From even.rouault at mines-paris.org  Mon Feb 15 14:53:46 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Feb 15 14:54:13 2010
Subject: [gdal-dev] gdal_translate -scale and negative values
In-Reply-To: <hlc5oc$gg4$1@ger.gmane.org>
References: <hlc5oc$gg4$1@ger.gmane.org>
Message-ID: <201002152053.51196.even.rouault@mines-paris.org>

Herman,

didn't you notice that -32768 / 100 = -327.68 ~= -328 ... ;-) ? The issue is 
that when doing rescaling, gdal_translate doesn't currently explicetly set 
the source nodata value as the nodata value of the VRT source, so the pixels 
whose value is the nodata value are just rescaled as other pixels.

However, you can get your expected result by explicetly setting the nodata 
value of the source :
1) gdal_translate -of VRT infile.tif outfile.vrt -scale -500 0 -5 0
2) edit outfile.vrt  with your favorite text editor and add 
<NODATA>-32768</NODATA> between  <ComplexSource> and </ComplexSource>
3) gdal_translate outfile.vrt outfile.tif

I'm not sure why gdal_translate doesn't set the source nodata value by 
default. Looking at the history, it looks like it never did. Maybe Frank will 
have an opinion on if it would be approriate to automatically set the source 
nodata value as the nodata value of the ComplexSource ? (this behaviour could 
be controlled by an option flag if necessary)

Best regards,

Even

> Hi,
>
> I am trying to scale the values in an Int16 raster band. Basically, I want
> to have them divided by 100. It looks to me that negative values are not
> scaled at all, whatever ranges I give to -scale. What am I doing wrong?
>
> Hermann
>
> $ gdalinfo -mm infile.tif
> ...
> Band 1 Block=7200x1 Type=Int16, ColorInterp=Gray
>     Computed Min/Max=-464.000,3122.000
>   NoData Value=-32768
> ...
>
> $ gdal_translate infile.tif outfile.tif -scale -500 0 -5 0
> Input file size is 7200, 3600
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
> $ gdalinfo -mm outfile.tif
> ...
> Band 1 Block=7200x1 Type=Int16, ColorInterp=Gray
>     Computed Min/Max=-328.000,31.000
>   NoData Value=-32768
> ...
>
> $ gdalinfo --version
> GDAL 1.7.1, released 2010/02/08
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From peifer at gmx.eu  Mon Feb 15 15:17:39 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon Feb 15 15:17:54 2010
Subject: [gdal-dev] gdal_translate -scale and negative values
In-Reply-To: <201002152053.51196.even.rouault@mines-paris.org>
References: <hlc5oc$gg4$1@ger.gmane.org>
	<201002152053.51196.even.rouault@mines-paris.org>
Message-ID: <4B79ABE3.4080003@gmx.eu>

> didn't you notice that...

Not really. I must have been blind. 
Thanks for your hint. This works fine.

Hermann


-------- Original Message  --------
Subject: [gdal-dev] gdal_translate -scale and negative values
From: Even Rouault <even.rouault@mines-paris.org>
To: gdal-dev@lists.osgeo.org
Cc: Hermann Peifer <peifer@gmx.eu>, Frank Warmerdam <warmerdam@pobox.com>
Date: 15/02/2010 20:53

> Herman,
> 
> didn't you notice that -32768 / 100 = -327.68 ~= -328 ... ;-) ? The issue is 
> that when doing rescaling, gdal_translate doesn't currently explicetly set 
> the source nodata value as the nodata value of the VRT source, so the pixels 
> whose value is the nodata value are just rescaled as other pixels.
> 
> However, you can get your expected result by explicetly setting the nodata 
> value of the source :
> 1) gdal_translate -of VRT infile.tif outfile.vrt -scale -500 0 -5 0
> 2) edit outfile.vrt  with your favorite text editor and add 
> <NODATA>-32768</NODATA> between  <ComplexSource> and </ComplexSource>
> 3) gdal_translate outfile.vrt outfile.tif
> 
> I'm not sure why gdal_translate doesn't set the source nodata value by 
> default. Looking at the history, it looks like it never did. Maybe Frank will 
> have an opinion on if it would be approriate to automatically set the source 
> nodata value as the nodata value of the ComplexSource ? (this behaviour could 
> be controlled by an option flag if necessary)
> 
> Best regards,
> 
> Even
> 
>> Hi,
>>
>> I am trying to scale the values in an Int16 raster band. Basically, I want
>> to have them divided by 100. It looks to me that negative values are not
>> scaled at all, whatever ranges I give to -scale. What am I doing wrong?
>>
>> Hermann
>>
>> $ gdalinfo -mm infile.tif
>> ...
>> Band 1 Block=7200x1 Type=Int16, ColorInterp=Gray
>>     Computed Min/Max=-464.000,3122.000
>>   NoData Value=-32768
>> ...
>>
>> $ gdal_translate infile.tif outfile.tif -scale -500 0 -5 0
>> Input file size is 7200, 3600
>> 0...10...20...30...40...50...60...70...80...90...100 - done.
>>
>> $ gdalinfo -mm outfile.tif
>> ...
>> Band 1 Block=7200x1 Type=Int16, ColorInterp=Gray
>>     Computed Min/Max=-328.000,31.000
>>   NoData Value=-32768
>> ...
>>
>> $ gdalinfo --version
>> GDAL 1.7.1, released 2010/02/08
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
From ebwolf at gmail.com  Mon Feb 15 17:13:30 2010
From: ebwolf at gmail.com (Eric Wolf)
Date: Mon Feb 15 17:13:33 2010
Subject: [gdal-dev] Oracle OCI connection in Python OGR
In-Reply-To: <7a30cd71002141145h606dbfacy2347f97bf1808457@mail.gmail.com>
References: <18bb6ba01002120118v3821a4f6ye6ce404ab0321879@mail.gmail.com>
	<7a30cd71002120556kbb2952dl8dc756d3175f2b08@mail.gmail.com>
	<18bb6ba01002121002r243690d1xb70d3a98c1ba069@mail.gmail.com>
	<7a30cd71002141145h606dbfacy2347f97bf1808457@mail.gmail.com>
Message-ID: <18bb6ba01002151413p152df5bdka186285935af494c@mail.gmail.com>

I'm running Oracle 11g on the same machine as the Python script.

I did test cx_Oracle and found that it wasn't working. I was using the
Unicode cx_Oracle 5.0.3. Switching to the non-Unicode cx_Oracle got it
working. But OGR is still not connecting.

Does OGR rely on cx_Oracle?

I think I'll try regressing to an older version of GDAL and see if it works.

-Eric

-=--=---=----=----=---=--=-=--=---=----=---=--=-=-
Eric B. Wolf                    New! 720-334-7734
USGS Geographer
Center of Excellence in GIScience
PhD Student
CU-Boulder - Geography

GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt


On Sun, Feb 14, 2010 at 12:45 PM, Abhay <abhay.menon@gmail.com> wrote:

>
>
> On Fri, Feb 12, 2010 at 11:32 PM, Eric Wolf <ebwolf@gmail.com> wrote:
>
>> Thanks for the replies. Sorry I didn't give more details on the
>> environment.
>>
>> I am running on Windows, at the command line, both ogr2ogr and the python
>> script.
>>
>> Created an environment variable for ORACLE_SID=ORCL
>>
>> I double-checked my OCI string by using sqlplus to connect:
>>
>>     sqlplus scott/tiger@orcl
>>
>> This works fine. I changed the script to use that in the call to
>> ogr.Open(). No luck.
>>
>> I imported gdal and sprinkled print 'Error:', gdal.GetLastErrorMsg() in my
>> exception handlers. I got:
>>
>>     Unable to open Oracle connection None
>>     Error:
>>
>> Still no dice. If I take the same script and modify the GetDriverByName
>> and Open to use a shapefile, it works perfectly.
>>
>> -Eric
>>
>>
>>
>> -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
>> Eric B. Wolf                    New! 720-334-7734
>> USGS Geographer
>> Center of Excellence in GIScience
>> PhD Student
>> CU-Boulder - Geography
>>
>> GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt
>>
>>
>> On Fri, Feb 12, 2010 at 6:56 AM, Abhay <abhay.menon@gmail.com> wrote:
>>
>>>
>>>
>>> On Fri, Feb 12, 2010 at 2:48 PM, Eric Wolf <ebwolf@gmail.com> wrote:
>>>
>>>> I'm using GDAL/OGR 1.6.1 with ActivePython 2.6.4-10 and
>>>> cx_Oracle-5.0.3-11g. I am trying to connect to an Oracle 11g instance.
>>>>
>>>> This works:
>>>>
>>>>     ogr2ogr -f "KML" emp.kml OCI:scott/tiger "EMP"
>>>>
>>>> What am I doing wrong. This fails, ds is None:
>>>>
>>>> from osgeo import ogr
>>>>
>>>> try:
>>>>     d = ogr.GetDriverByName('OCI')
>>>> except:
>>>>     print "Unable to GetDriverByName"
>>>>     quit()
>>>>
>>>> ds = None
>>>>
>>>> try:
>>>>     ds = ogr.Open('OCI:scott/tiger')
>>>> except:
>>>>     print "Unable to open OCI connection"
>>>>     quit()
>>>>
>>>> if ds is None:
>>>>     print "Unable to open Oracle connection", ds
>>>>     quit()
>>>>
>>>> lyr = ds.GetLayerByName('EMP')
>>>> number = lyr.GetFeatureCount()
>>>>
>>>> print "Features: " + str(number)
>>>>
>>>>
>>>>
>>>>
>>>> -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
>>>> Eric B. Wolf                    New! 720-334-7734
>>>> USGS Geographer
>>>> Center of Excellence in GIScience
>>>> PhD Student
>>>> CU-Boulder - Geography
>>>>
>>>> GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>> Hi Eric,
>>>
>>> Form your mail it not clear what is cause of the problem.
>>>
>>> There 2 scenario here
>>>
>>> 1) you are on a remote machine form where your trying to connect oracle
>>> server machine:
>>>
>>> a) Have you installed any Oracle Client in your system. Considering that
>>> you are using the complete oracle client installation you can use the
>>> following  :
>>> OCI:scott/tiger@<Tnsname entry for eg. ORCL>
>>>
>>> b) if you are trying out with Instant client for 11g you should try
>>> either of the following
>>>
>>> OCI:scott/tiger@//localhost/<your ORACLE SERVICE IDENTIFIER for eg
>>> ORCL>.
>>>
>>> 2) you are on the oracle server machine where
>>>
>>> you must set the oracle SID. like the following
>>> on windows
>>> SET ORACLE_SID=ORCL
>>> or
>>> on *nix
>>> export ORACLE_SID=ORCL
>>>
>>> then try your implementation or use methods stated in 1)
>>>
>>>
>>>
>>>
>>> Rgds.
>>>
>>> Abhay.
>>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> Hi Eric,
>
> What I still did not get is whether your running Oracle Server 11g on the
> same machine on which your developing.
>
> Also have you tried connecting the same using "cx_Oracle.Connection"
> whether this connect string is working.
>
> Are you using gdal-1.6.1-py2.6-win32.egg install with Python or build your
> on using SWIG python implementation.
>
> Interestingly, what I found is that in gdal-1.6.1-py2.5-win32.egg which
> install using easy_install seem not work with OCI driver as way it should.
> But connection string using cx_Oracle is working. So it seem
> gdal-1.6.1-py*-win32.egg is broken for OCI plugin or probably it must be
> some setup I must have overlooked will setup, if someone else is working
> with same setup could help on this or Howard could comment on this.
>
> I have build my own egg using latest repo of gdal build and is working. If
> you need I can share the same egg file (for python 2.6) or wait for Howard
> to compile for the latest build of GDAL-1.7 for python officially as you
> would need gdalwin32-17 for this along with OCI build plugin.
>
> Rgds.
>
> Abhay.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100215/56efe9e7/attachment.html
From ivan.lucena at pmldnet.com  Mon Feb 15 17:33:02 2010
From: ivan.lucena at pmldnet.com (Ivan)
Date: Mon Feb 15 17:33:32 2010
Subject: [gdal-dev] Oracle OCI connection in Python OGR
In-Reply-To: <18bb6ba01002151413p152df5bdka186285935af494c@mail.gmail.com>
References: <18bb6ba01002120118v3821a4f6ye6ce404ab0321879@mail.gmail.com>	<7a30cd71002120556kbb2952dl8dc756d3175f2b08@mail.gmail.com>	<18bb6ba01002121002r243690d1xb70d3a98c1ba069@mail.gmail.com>	<7a30cd71002141145h606dbfacy2347f97bf1808457@mail.gmail.com>
	<18bb6ba01002151413p152df5bdka186285935af494c@mail.gmail.com>
Message-ID: <4B79CB9E.7000409@pmldnet.com>

Eric,

Eric Wolf wrote:
> I'm running Oracle 11g on the same machine as the Python script.
> 
> I did test cx_Oracle and found that it wasn't working. I was using the 
> Unicode cx_Oracle 5.0.3. Switching to the non-Unicode cx_Oracle got it 
> working. But OGR is still not connecting.
> 
> Does OGR rely on cx_Oracle?

No it doesn't but I was a good to clue.

> 
> I think I'll try regressing to an older version of GDAL and see if it works.

I running GDAL/OGR/Python/OCI on OpenSUSE and it works just fine. I am going to test on Windows.

Regards,

Ivan

> 
> -Eric
> 
> -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
> Eric B. Wolf                    New! 720-334-7734
> USGS Geographer
> Center of Excellence in GIScience
> PhD Student
> CU-Boulder - Geography
> 
> GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt
> 
> 
> On Sun, Feb 14, 2010 at 12:45 PM, Abhay <abhay.menon@gmail.com 
> <mailto:abhay.menon@gmail.com>> wrote:
> 
> 
> 
>     On Fri, Feb 12, 2010 at 11:32 PM, Eric Wolf <ebwolf@gmail.com
>     <mailto:ebwolf@gmail.com>> wrote:
> 
>         Thanks for the replies. Sorry I didn't give more details on the
>         environment.
> 
>         I am running on Windows, at the command line, both ogr2ogr and
>         the python script.
> 
>         Created an environment variable for ORACLE_SID=ORCL
> 
>         I double-checked my OCI string by using sqlplus to connect:
> 
>             sqlplus scott/tiger@orcl
> 
>         This works fine. I changed the script to use that in the call to
>         ogr.Open(). No luck.
> 
>         I imported gdal and sprinkled print 'Error:',
>         gdal.GetLastErrorMsg() in my exception handlers. I got:
> 
>             Unable to open Oracle connection None
>             Error:
> 
>         Still no dice. If I take the same script and modify the
>         GetDriverByName and Open to use a shapefile, it works perfectly.
> 
>         -Eric
> 
> 
> 
>         -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
>         Eric B. Wolf                    New! 720-334-7734
>         USGS Geographer
>         Center of Excellence in GIScience
>         PhD Student
>         CU-Boulder - Geography
> 
>         GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt
> 
> 
>         On Fri, Feb 12, 2010 at 6:56 AM, Abhay <abhay.menon@gmail.com
>         <mailto:abhay.menon@gmail.com>> wrote:
> 
> 
> 
>             On Fri, Feb 12, 2010 at 2:48 PM, Eric Wolf <ebwolf@gmail.com
>             <mailto:ebwolf@gmail.com>> wrote:
> 
>                 I'm using GDAL/OGR 1.6.1 with ActivePython 2.6.4-10 and
>                 cx_Oracle-5.0.3-11g. I am trying to connect to an Oracle
>                 11g instance.
> 
>                 This works:
> 
>                     ogr2ogr -f "KML" emp.kml OCI:scott/tiger "EMP"
> 
>                 What am I doing wrong. This fails, ds is None:
> 
>                 from osgeo import ogr
> 
>                 try:
>                     d = ogr.GetDriverByName('OCI')
>                 except:
>                     print "Unable to GetDriverByName"
>                     quit()
> 
>                 ds = None
> 
>                 try:
>                     ds = ogr.Open('OCI:scott/tiger')
>                 except:
>                     print "Unable to open OCI connection"
>                     quit()
> 
>                 if ds is None:
>                     print "Unable to open Oracle connection", ds
>                     quit()
> 
>                 lyr = ds.GetLayerByName('EMP')
>                 number = lyr.GetFeatureCount()
> 
>                 print "Features: " + str(number)
> 
> 
> 
> 
>                 -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
>                 Eric B. Wolf                    New! 720-334-7734
>                 USGS Geographer
>                 Center of Excellence in GIScience
>                 PhD Student
>                 CU-Boulder - Geography
> 
>                 GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt
> 
>                 _______________________________________________
>                 gdal-dev mailing list
>                 gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>                 http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
>             Hi Eric,
> 
>             Form your mail it not clear what is cause of the problem.
> 
>             There 2 scenario here 
> 
>             1) you are on a remote machine form where your trying to
>             connect oracle server machine:
> 
>             a) Have you installed any Oracle Client in your system.
>             Considering that you are using the complete oracle client
>             installation you can use the following  : 
>             OCI:scott/tiger@<Tnsname entry for eg. ORCL>
> 
>             b) if you are trying out with Instant client for 11g you
>             should try either of the following
> 
>             OCI:scott/tiger@//localhost/<your ORACLE SERVICE IDENTIFIER
>             for eg ORCL>.
> 
>             2) you are on the oracle server machine where 
> 
>             you must set the oracle SID. like the following 
>             on windows 
>             SET ORACLE_SID=ORCL
>             or
>             on *nix
>             export ORACLE_SID=ORCL
> 
>             then try your implementation or use methods stated in 1) 
> 
> 
> 
> 
>             Rgds.
> 
>             Abhay.
> 
> 
> 
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
>     Hi Eric,
> 
>     What I still did not get is whether your running Oracle Server 11g
>     on the same machine on which your developing. 
> 
>     Also have you tried connecting the same using "cx_Oracle.Connection"
>     whether this connect string is working.
> 
>     Are you using gdal-1.6.1-py2.6-win32.egg install with Python or
>     build your on using SWIG python implementation.
> 
>     Interestingly, what I found is that in gdal-1.6.1-py2.5-win32.egg
>     which install using easy_install seem not work with OCI driver as
>     way it should. But connection string using cx_Oracle is working. So
>     it seem gdal-1.6.1-py*-win32.egg is broken for OCI plugin or
>     probably it must be some setup I must have overlooked will setup, if
>     someone else is working with same setup could help on this or Howard
>     could comment on this. 
> 
>     I have build my own egg using latest repo of gdal build and is
>     working. If you need I can share the same egg file (for python 2.6)
>     or wait for Howard to compile for the latest build of GDAL-1.7 for
>     python officially as you would need gdalwin32-17 for this along with
>     OCI build plugin.
> 
>     Rgds.
> 
>     Abhay.
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From ebwolf at gmail.com  Mon Feb 15 17:47:30 2010
From: ebwolf at gmail.com (Eric Wolf)
Date: Mon Feb 15 17:47:33 2010
Subject: [gdal-dev] Oracle OCI connection in Python OGR
In-Reply-To: <4B79CB9E.7000409@pmldnet.com>
References: <18bb6ba01002120118v3821a4f6ye6ce404ab0321879@mail.gmail.com>
	<7a30cd71002120556kbb2952dl8dc756d3175f2b08@mail.gmail.com>
	<18bb6ba01002121002r243690d1xb70d3a98c1ba069@mail.gmail.com>
	<7a30cd71002141145h606dbfacy2347f97bf1808457@mail.gmail.com>
	<18bb6ba01002151413p152df5bdka186285935af494c@mail.gmail.com>
	<4B79CB9E.7000409@pmldnet.com>
Message-ID: <18bb6ba01002151447l3861fba0m33247d78c00ffe49@mail.gmail.com>

I'm beginning to think something is wrong at my end. I just installed Python
2.5, GDAL 1.5 and cx_Oracle for Python 2.5. I'm still getting the same
behavior. cx_Oracle works, OGR doesn't.

Is the clue in my last email? I mean, the Unicode version of cx_Oracle
didn't work but the non-Unicode version did work. Is the OGR OCI driver
compiled for Unicode?

-Eric

-=--=---=----=----=---=--=-=--=---=----=---=--=-=-
Eric B. Wolf                    New! 720-334-7734
USGS Geographer
Center of Excellence in GIScience
PhD Student
CU-Boulder - Geography

GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt


On Mon, Feb 15, 2010 at 3:33 PM, Ivan <ivan.lucena@pmldnet.com> wrote:

> Eric,
>
>
> Eric Wolf wrote:
>
>> I'm running Oracle 11g on the same machine as the Python script.
>>
>> I did test cx_Oracle and found that it wasn't working. I was using the
>> Unicode cx_Oracle 5.0.3. Switching to the non-Unicode cx_Oracle got it
>> working. But OGR is still not connecting.
>>
>> Does OGR rely on cx_Oracle?
>>
>
> No it doesn't but I was a good to clue.
>
>
>
>> I think I'll try regressing to an older version of GDAL and see if it
>> works.
>>
>
> I running GDAL/OGR/Python/OCI on OpenSUSE and it works just fine. I am
> going to test on Windows.
>
> Regards,
>
> Ivan
>
>
>> -Eric
>>
>> -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
>> Eric B. Wolf                    New! 720-334-7734
>> USGS Geographer
>> Center of Excellence in GIScience
>> PhD Student
>> CU-Boulder - Geography
>>
>> GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt
>>
>>
>> On Sun, Feb 14, 2010 at 12:45 PM, Abhay <abhay.menon@gmail.com <mailto:
>> abhay.menon@gmail.com>> wrote:
>>
>>
>>
>>    On Fri, Feb 12, 2010 at 11:32 PM, Eric Wolf <ebwolf@gmail.com
>>    <mailto:ebwolf@gmail.com>> wrote:
>>
>>        Thanks for the replies. Sorry I didn't give more details on the
>>        environment.
>>
>>        I am running on Windows, at the command line, both ogr2ogr and
>>        the python script.
>>
>>        Created an environment variable for ORACLE_SID=ORCL
>>
>>        I double-checked my OCI string by using sqlplus to connect:
>>
>>            sqlplus scott/tiger@orcl
>>
>>        This works fine. I changed the script to use that in the call to
>>        ogr.Open(). No luck.
>>
>>        I imported gdal and sprinkled print 'Error:',
>>        gdal.GetLastErrorMsg() in my exception handlers. I got:
>>
>>            Unable to open Oracle connection None
>>            Error:
>>
>>        Still no dice. If I take the same script and modify the
>>        GetDriverByName and Open to use a shapefile, it works perfectly.
>>
>>        -Eric
>>
>>
>>
>>        -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
>>        Eric B. Wolf                    New! 720-334-7734
>>        USGS Geographer
>>        Center of Excellence in GIScience
>>        PhD Student
>>        CU-Boulder - Geography
>>
>>        GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt
>>
>>
>>        On Fri, Feb 12, 2010 at 6:56 AM, Abhay <abhay.menon@gmail.com
>>        <mailto:abhay.menon@gmail.com>> wrote:
>>
>>
>>
>>            On Fri, Feb 12, 2010 at 2:48 PM, Eric Wolf <ebwolf@gmail.com
>>            <mailto:ebwolf@gmail.com>> wrote:
>>
>>                I'm using GDAL/OGR 1.6.1 with ActivePython 2.6.4-10 and
>>                cx_Oracle-5.0.3-11g. I am trying to connect to an Oracle
>>                11g instance.
>>
>>                This works:
>>
>>                    ogr2ogr -f "KML" emp.kml OCI:scott/tiger "EMP"
>>
>>                What am I doing wrong. This fails, ds is None:
>>
>>                from osgeo import ogr
>>
>>                try:
>>                    d = ogr.GetDriverByName('OCI')
>>                except:
>>                    print "Unable to GetDriverByName"
>>                    quit()
>>
>>                ds = None
>>
>>                try:
>>                    ds = ogr.Open('OCI:scott/tiger')
>>                except:
>>                    print "Unable to open OCI connection"
>>                    quit()
>>
>>                if ds is None:
>>                    print "Unable to open Oracle connection", ds
>>                    quit()
>>
>>                lyr = ds.GetLayerByName('EMP')
>>                number = lyr.GetFeatureCount()
>>
>>                print "Features: " + str(number)
>>
>>
>>
>>
>>                -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
>>                Eric B. Wolf                    New! 720-334-7734
>>                USGS Geographer
>>                Center of Excellence in GIScience
>>                PhD Student
>>                CU-Boulder - Geography
>>
>>                GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt
>>
>>                _______________________________________________
>>                gdal-dev mailing list
>>                gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>
>>                http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>            Hi Eric,
>>
>>            Form your mail it not clear what is cause of the problem.
>>
>>            There 2 scenario here
>>            1) you are on a remote machine form where your trying to
>>            connect oracle server machine:
>>
>>            a) Have you installed any Oracle Client in your system.
>>            Considering that you are using the complete oracle client
>>            installation you can use the following  :
>>  OCI:scott/tiger@<Tnsname entry for eg. ORCL>
>>
>>            b) if you are trying out with Instant client for 11g you
>>            should try either of the following
>>
>>            OCI:scott/tiger@//localhost/<your ORACLE SERVICE IDENTIFIER
>>            for eg ORCL>.
>>
>>            2) you are on the oracle server machine where
>>            you must set the oracle SID. like the following            on
>> windows            SET ORACLE_SID=ORCL
>>            or
>>            on *nix
>>            export ORACLE_SID=ORCL
>>
>>            then try your implementation or use methods stated in 1)
>>
>>
>>
>>            Rgds.
>>
>>            Abhay.
>>
>>
>>
>>        _______________________________________________
>>        gdal-dev mailing list
>>        gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>
>>        http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>    Hi Eric,
>>
>>    What I still did not get is whether your running Oracle Server 11g
>>    on the same machine on which your developing.
>>    Also have you tried connecting the same using "cx_Oracle.Connection"
>>    whether this connect string is working.
>>
>>    Are you using gdal-1.6.1-py2.6-win32.egg install with Python or
>>    build your on using SWIG python implementation.
>>
>>    Interestingly, what I found is that in gdal-1.6.1-py2.5-win32.egg
>>    which install using easy_install seem not work with OCI driver as
>>    way it should. But connection string using cx_Oracle is working. So
>>    it seem gdal-1.6.1-py*-win32.egg is broken for OCI plugin or
>>    probably it must be some setup I must have overlooked will setup, if
>>    someone else is working with same setup could help on this or Howard
>>    could comment on this.
>>    I have build my own egg using latest repo of gdal build and is
>>    working. If you need I can share the same egg file (for python 2.6)
>>    or wait for Howard to compile for the latest build of GDAL-1.7 for
>>    python officially as you would need gdalwin32-17 for this along with
>>    OCI build plugin.
>>
>>    Rgds.
>>
>>    Abhay.
>>
>>
>>
>> ------------------------------------------------------------------------
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100215/8685ecd3/attachment.html
From parshakov at uleth.ca  Mon Feb 15 18:50:34 2010
From: parshakov at uleth.ca (vona)
Date: Mon Feb 15 18:50:36 2010
Subject: [gdal-dev] Simple Q: fatal error LNK1120: 19 unresolved externals
Message-ID: <1266277834419-4577872.post@n2.nabble.com>


What I did is:
- downloaded the latest release of GDAL here:
http://trac.osgeo.org/gdal/wiki/DownloadSource
- created a project, created a .cpp file and put all the required .h files
in the same directory
- ran debugging and got the following error:
        fatal error LNK1120: 19 unresolved externals

Did I miss something?


PS: I'm using windows XP and visual c++ 2008 express.

-- 
View this message in context: http://n2.nabble.com/Simple-Q-fatal-error-LNK1120-19-unresolved-externals-tp4577872p4577872.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100215/7d156e91/attachment.html
From Sjur.A.Kolberg at sintef.no  Mon Feb 15 19:03:30 2010
From: Sjur.A.Kolberg at sintef.no (Sjur Kolberg)
Date: Mon Feb 15 19:04:38 2010
Subject: [gdal-dev] Simple Q: fatal error LNK1120: 19 unresolved externals
In-Reply-To: <1266277834419-4577872.post@n2.nabble.com>
References: <1266277834419-4577872.post@n2.nabble.com>
Message-ID: <72251B925CE10A478606EEAC6AA683BE18081E12E3@SINTEFEXMBX01.sintef.no>

Vona,

This is because the linker doesn't find the gdal_i.lib. Did you build GDAL yourself or download binaries?

Sjur  :-)

________________________________
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of vona
Sent: 16. februar 2010 00:51
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Simple Q: fatal error LNK1120: 19 unresolved externals

What I did is: - downloaded the latest release of GDAL here: http://trac.osgeo.org/gdal/wiki/DownloadSource - created a project, created a .cpp file and put all the required .h files in the same directory - ran debugging and got the following error: fatal error LNK1120: 19 unresolved externals Did I miss something? PS: I'm using windows XP and visual c++ 2008 express.
________________________________
View this message in context: Simple Q: fatal error LNK1120: 19 unresolved externals<http://n2.nabble.com/Simple-Q-fatal-error-LNK1120-19-unresolved-externals-tp4577872p4577872.html>
Sent from the GDAL - Dev mailing list archive<http://n2.nabble.com/GDAL-Dev-f2022644.html> at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100216/4430985e/attachment-0001.html
From parshakov at uleth.ca  Mon Feb 15 19:51:36 2010
From: parshakov at uleth.ca (vona)
Date: Mon Feb 15 19:51:38 2010
Subject: [gdal-dev] RE: Simple Q: fatal error LNK1120: 19 unresolved
	externals
In-Reply-To: <72251B925CE10A478606EEAC6AA683BE18081E12E3@SINTEFEXMBX01.sintef.no>
References: <1266277834419-4577872.post@n2.nabble.com>
	<72251B925CE10A478606EEAC6AA683BE18081E12E3@SINTEFEXMBX01.sintef.no>
Message-ID: <1266281496083-4578039.post@n2.nabble.com>


Thanks Sjur :)
I just took the required .h files from the source package downloaded from
here: http://trac.osgeo.org/gdal/wiki/DownloadSource

I also downloaded a bunch of binaries, but how do i know which of them i
need to run?

All i need is to get pixel values of geotiff files (load then into an
array).
I wrote a cellular automata model for forest fire simulation, but it can't
load geotiff images, so I thought GDAL would help me with that. The problem
is that I have no experience with such things ((

-- 
View this message in context: http://n2.nabble.com/Simple-Q-fatal-error-LNK1120-19-unresolved-externals-tp4577872p4578039.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Luke.Pinner at environment.gov.au  Mon Feb 15 22:59:25 2010
From: Luke.Pinner at environment.gov.au (Pinner, Luke)
Date: Mon Feb 15 22:59:31 2010
Subject: [gdal-dev] ECW/JPEG2000 on Windows Vista/7
Message-ID: <64102B2FB850C345B04D09C82018F45F0273EBF3@ACT01VEXCCL04.internal.govt>

Hi all,

Not strictly a GDAL issue as such, I'm just posting this to "publish" a
workaround (as I couldn't find much info about this issue) so apologies
in advance.

Using GDAL 1.6.3 (OSGeo4W).

The standard ERDAS ECW/JPEG2000 SDK "redistributables" (NCSEcw.dll
etc...) crash when opening ECW/JP2 rasters on all Win Vista PC's I've
tried (and I've been told also on Win 7).  These are the dlls included
in the precompiled Windows SDK version that *used* to be available for
download from the ERDAS website (now available by request only -
http://www.erdas.com/tabid/84/currentid/1142/default.aspx).

The VC71 versions of the dlls do not cause these crashes. If you have
the precompiled Windows SDK version, these dlls can be found in: <ECW
SDK install dir>\redistributable\vc71.

I have no idea if there are any issues using the VC71 versions, but it
works ok for me.

Regards
Luke


------
If you have received this transmission in error please notify us immediately by return e-mail and delete all copies. If this e-mail or any attachments have been sent to you in error, that error does not constitute waiver of any confidentiality, privilege or copyright in respect of information in the e-mail or attachments. 



Please consider the environment before printing this email.

------

From ivan.lucena at pmldnet.com  Mon Feb 15 23:42:10 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Mon Feb 15 23:42:12 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gT3JhY2xlIE9DSSBjb25uZWN0aW9uIGluIFB5dGhvbiBPR1I=?=
Message-ID: <20100216044210.24904.qmail@s466.sureserver.com>

Eric,

Sorry for my typo. I mean, "it was a good clue".

I did a quit test using GDAL 1.8dev, the trunk version. I build the python wrapper myself by running "setup.py bdist_wininst" with Python 2.5.4. That generates "GDAL-1.7.0.win32-py2.5.exe".

That is how it goes:

Python 2.5.4 (r254:67916, Dec 23 2008, 15:10:54) [MSC v.1310 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> from osgeo import ogr
>>> ds = ogr.Open("OCI:scott/tiger@orcl")
>>> ly = ds.GetLayer(0)
>>> ly.GetName()
'ROADS'
>>>

No problem here.

I believe that you should use a GDAL/Python wrapper compatible (UNICODE) with the Python you have.

By the way, what is the character set of your database?

select * from NLS_DATABASE_PARAMETERS;

There is also the NLS_LANG. NLS_LANG is set as a local environment variable on UNIX and is set in the registry on Windows.

I just following that clue, but can you use ogr.Open() with a local file, like a shape file?

Best regards,

Ivan




>  -------Original Message-------
>  From: Eric Wolf <ebwolf@gmail.com>
>  To: gdal-dev <gdal-dev@lists.osgeo.org>
>  Subject: Re: [gdal-dev] Oracle OCI connection in Python OGR
>  Sent: Feb 15 '10 17:47
>  
>  I'm beginning to think something is wrong at my end. I just installed
>  Python 2.5, GDAL 1.5 and cx_Oracle for Python 2.5. I'm still getting
>  the same behavior. cx_Oracle works, OGR doesn't.
>  
>  
>  Is the clue in my last email? I mean, the Unicode version of cx_Oracle
>  didn't work but the non-Unicode version did work. Is the OGR OCI driver
>  compiled for Unicode?
>  
>  
>  -Eric
>  
>  -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
>  Eric B. Wolf                    New! 720-334-7734
>  USGS Geographer
>  Center of Excellence in GIScience
>  PhD Student
>  CU-Boulder - Geography
>  
>  GPG Public Key: [LINK: http://www.h4h.net/ebwolf.public.key.txt]
>  http://www.h4h.net/ebwolf.public.key.txt
>  
>  
>  On Mon, Feb 15, 2010 at 3:33 PM, Ivan <[LINK:
>  mailto:ivan.lucena@pmldnet.com] ivan.lucena@pmldnet.com> wrote:
>  Eric,
>  
>  
>  Eric Wolf wrote:
>  I'm running Oracle 11g on the same machine as the Python script.
>  
>  I did test cx_Oracle and found that it wasn't working. I was using the
>  Unicode cx_Oracle 5.0.3. Switching to the non-Unicode cx_Oracle got it
>  working. But OGR is still not connecting.
>  
>  Does OGR rely on cx_Oracle?
>  
>  No it doesn't but I was a good to clue.
>  
>  
>  I think I'll try regressing to an older version of GDAL and see if it
>  works.
>  
>  I running GDAL/OGR/Python/OCI on OpenSUSE and it works just fine. I am
>  going to test on Windows.
>  
>  Regards,
>  
>  Ivan
>  
>  
>  -Eric
>  
>  -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
>  Eric B. Wolf                    New! 720-334-7734
>  USGS Geographer
>  Center of Excellence in GIScience
>  PhD Student
>  CU-Boulder - Geography
>  
>  GPG Public Key: [LINK: http://www.h4h.net/ebwolf.public.key.txt]
>  http://www.h4h.net/ebwolf.public.key.txt
>  
>  
>  On Sun, Feb 14, 2010 at 12:45 PM, Abhay <[LINK:
>  mailto:abhay.menon@gmail.com] abhay.menon@gmail.com <mailto:[LINK:
>  mailto:abhay.menon@gmail.com] abhay.menon@gmail.com>> wrote:
>  
>  
>     On Fri, Feb 12, 2010 at 11:32 PM, Eric Wolf <[LINK:
>  mailto:ebwolf@gmail.com] ebwolf@gmail.com
>  
>     <mailto:[LINK: mailto:ebwolf@gmail.com] ebwolf@gmail.com>> wrote:
>  
>         Thanks for the replies. Sorry I didn't give more details
>  on the
>         environment.
>  
>         I am running on Windows, at the command line, both ogr2ogr and
>         the python script.
>  
>         Created an environment variable for ORACLE_SID=ORCL
>  
>         I double-checked my OCI string by using sqlplus to connect:
>  
>             sqlplus scott/tiger@orcl
>  
>         This works fine. I changed the script to use that in the call
>  to
>         ogr.Open(). No luck.
>  
>         I imported gdal and sprinkled print 'Error:',
>         gdal.GetLastErrorMsg() in my exception handlers. I got:
>  
>             Unable to open Oracle connection None
>             Error:
>  
>         Still no dice. If I take the same script and modify the
>         GetDriverByName and Open to use a shapefile, it works
>  perfectly.
>  
>         -Eric
>  
>  
>         -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
>         Eric B. Wolf                    New! 720-334-7734
>         USGS Geographer
>         Center of Excellence in GIScience
>         PhD Student
>         CU-Boulder - Geography
>  
>         GPG Public Key: [LINK:
>  http://www.h4h.net/ebwolf.public.key.txt]
>  http://www.h4h.net/ebwolf.public.key.txt
>  
>  
>         On Fri, Feb 12, 2010 at 6:56 AM, Abhay <[LINK:
>  mailto:abhay.menon@gmail.com] abhay.menon@gmail.com
>  
>         <mailto:[LINK: mailto:abhay.menon@gmail.com]
>  abhay.menon@gmail.com>> wrote:
>  
>  
>             On Fri, Feb 12, 2010 at 2:48 PM, Eric Wolf <[LINK:
>  mailto:ebwolf@gmail.com] ebwolf@gmail.com
>  
>  
>             <mailto:[LINK: mailto:ebwolf@gmail.com]
>  ebwolf@gmail.com>> wrote:
>  
>                 I'm using GDAL/OGR 1.6.1 with ActivePython
>  2.6.4-10 and
>                 cx_Oracle-5.0.3-11g. I am trying to connect to an
>  Oracle
>                 11g instance.
>  
>                 This works:
>  
>                     ogr2ogr -f "KML" emp.kml OCI:scott/tiger
>  "EMP"
>  
>                 What am I doing wrong. This fails, ds is None:
>  
>                 from osgeo import ogr
>  
>                 try:
>                     d = ogr.GetDriverByName('OCI')
>                 except:
>                     print "Unable to GetDriverByName"
>                     quit()
>  
>                 ds = None
>  
>                 try:
>                     ds = ogr.Open('OCI:scott/tiger')
>                 except:
>                     print "Unable to open OCI connection"
>                     quit()
>  
>                 if ds is None:
>                     print "Unable to open Oracle connection", ds
>                     quit()
>  
>                 lyr = ds.GetLayerByName('EMP')
>                 number = lyr.GetFeatureCount()
>  
>                 print "Features: " + str(number)
>  
>  
>                 -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
>                 Eric B. Wolf                    New!
>  720-334-7734
>                 USGS Geographer
>                 Center of Excellence in GIScience
>                 PhD Student
>                 CU-Boulder - Geography
>  
>                 GPG Public Key: [LINK:
>  http://www.h4h.net/ebwolf.public.key.txt]
>  http://www.h4h.net/ebwolf.public.key.txt
>  
>                 _______________________________________________
>                 gdal-dev mailing list
>                 [LINK: mailto:gdal-dev@lists.osgeo.org]
>  gdal-dev@lists.osgeo.org <mailto:[LINK: mailto:gdal-dev@lists.osgeo.org]
>  gdal-dev@lists.osgeo.org>
>  
>                 [LINK:
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
>  
>             Hi Eric,
>  
>             Form your mail it not clear what is cause of the
>  problem.
>  
>             There 2 scenario here
>             1) you are on a remote machine form where your trying to
>             connect oracle server machine:
>  
>             a) Have you installed any Oracle Client in your system.
>             Considering that you a
From ebwolf at gmail.com  Tue Feb 16 00:43:09 2010
From: ebwolf at gmail.com (Eric Wolf)
Date: Tue Feb 16 00:43:11 2010
Subject: [gdal-dev] Oracle OCI connection in Python OGR
In-Reply-To: <20100216044210.24904.qmail@s466.sureserver.com>
References: <20100216044210.24904.qmail@s466.sureserver.com>
Message-ID: <18bb6ba01002152143h29014c4bh3c1cc45aa8792c37@mail.gmail.com>

Thanks Ivan,

NLS_LANGUAGE = AMERCAN

Reading shapefile works (still).

Rather aggravating... I may try it on another system to see what I get.

-Eric

-=--=---=----=----=---=--=-=--=---=----=---=--=-=-
Eric B. Wolf                    New! 720-334-7734
USGS Geographer
Center of Excellence in GIScience
PhD Student
CU-Boulder - Geography

GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt


On Mon, Feb 15, 2010 at 9:42 PM, Ivan Lucena <ivan.lucena@pmldnet.com>wrote:

> Eric,
>
> Sorry for my typo. I mean, "it was a good clue".
>
> I did a quit test using GDAL 1.8dev, the trunk version. I build the python
> wrapper myself by running "setup.py bdist_wininst" with Python 2.5.4. That
> generates "GDAL-1.7.0.win32-py2.5.exe".
>
> That is how it goes:
>
> Python 2.5.4 (r254:67916, Dec 23 2008, 15:10:54) [MSC v.1310 32 bit
> (Intel)] on win32
> Type "help", "copyright", "credits" or "license" for more information.
> >>> from osgeo import ogr
> >>> ds = ogr.Open("OCI:scott/tiger@orcl")
> >>> ly = ds.GetLayer(0)
> >>> ly.GetName()
> 'ROADS'
> >>>
>
> No problem here.
>
> I believe that you should use a GDAL/Python wrapper compatible (UNICODE)
> with the Python you have.
>
> By the way, what is the character set of your database?
>
> select * from NLS_DATABASE_PARAMETERS;
>
> There is also the NLS_LANG. NLS_LANG is set as a local environment variable
> on UNIX and is set in the registry on Windows.
>
> I just following that clue, but can you use ogr.Open() with a local file,
> like a shape file?
>
> Best regards,
>
> Ivan
>
>
>
>
> >  -------Original Message-------
> >  From: Eric Wolf <ebwolf@gmail.com>
> >  To: gdal-dev <gdal-dev@lists.osgeo.org>
> >  Subject: Re: [gdal-dev] Oracle OCI connection in Python OGR
> >  Sent: Feb 15 '10 17:47
> >
> >  I'm beginning to think something is wrong at my end. I just installed
> >  Python 2.5, GDAL 1.5 and cx_Oracle for Python 2.5. I'm still getting
> >  the same behavior. cx_Oracle works, OGR doesn't.
> >
> >
> >  Is the clue in my last email? I mean, the Unicode version of cx_Oracle
> >  didn't work but the non-Unicode version did work. Is the OGR OCI driver
> >  compiled for Unicode?
> >
> >
> >  -Eric
> >
> >  -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
> >  Eric B. Wolf                    New! 720-334-7734
> >  USGS Geographer
> >  Center of Excellence in GIScience
> >  PhD Student
> >  CU-Boulder - Geography
> >
> >  GPG Public Key: [LINK: http://www.h4h.net/ebwolf.public.key.txt]
> >  http://www.h4h.net/ebwolf.public.key.txt
> >
> >
> >  On Mon, Feb 15, 2010 at 3:33 PM, Ivan <[LINK:
> >  mailto:ivan.lucena@pmldnet.com] ivan.lucena@pmldnet.com> wrote:
> >  Eric,
> >
> >
> >  Eric Wolf wrote:
> >  I'm running Oracle 11g on the same machine as the Python script.
> >
> >  I did test cx_Oracle and found that it wasn't working. I was using the
> >  Unicode cx_Oracle 5.0.3. Switching to the non-Unicode cx_Oracle got it
> >  working. But OGR is still not connecting.
> >
> >  Does OGR rely on cx_Oracle?
> >
> >  No it doesn't but I was a good to clue.
> >
> >
> >  I think I'll try regressing to an older version of GDAL and see if it
> >  works.
> >
> >  I running GDAL/OGR/Python/OCI on OpenSUSE and it works just fine. I am
> >  going to test on Windows.
> >
> >  Regards,
> >
> >  Ivan
> >
> >
> >  -Eric
> >
> >  -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
> >  Eric B. Wolf                    New! 720-334-7734
> >  USGS Geographer
> >  Center of Excellence in GIScience
> >  PhD Student
> >  CU-Boulder - Geography
> >
> >  GPG Public Key: [LINK: http://www.h4h.net/ebwolf.public.key.txt]
> >  http://www.h4h.net/ebwolf.public.key.txt
> >
> >
> >  On Sun, Feb 14, 2010 at 12:45 PM, Abhay <[LINK:
> >  mailto:abhay.menon@gmail.com] abhay.menon@gmail.com <mailto:[LINK:
> >  mailto:abhay.menon@gmail.com] abhay.menon@gmail.com>> wrote:
> >
> >
> >     On Fri, Feb 12, 2010 at 11:32 PM, Eric Wolf <[LINK:
> >  mailto:ebwolf@gmail.com] ebwolf@gmail.com
> >
> >     <mailto:[LINK: mailto:ebwolf@gmail.com] ebwolf@gmail.com>> wrote:
> >
> >         Thanks for the replies. Sorry I didn't give more details
> >  on the
> >         environment.
> >
> >         I am running on Windows, at the command line, both ogr2ogr and
> >         the python script.
> >
> >         Created an environment variable for ORACLE_SID=ORCL
> >
> >         I double-checked my OCI string by using sqlplus to connect:
> >
> >             sqlplus scott/tiger@orcl
> >
> >         This works fine. I changed the script to use that in the call
> >  to
> >         ogr.Open(). No luck.
> >
> >         I imported gdal and sprinkled print 'Error:',
> >         gdal.GetLastErrorMsg() in my exception handlers. I got:
> >
> >             Unable to open Oracle connection None
> >             Error:
> >
> >         Still no dice. If I take the same script and modify the
> >         GetDriverByName and Open to use a shapefile, it works
> >  perfectly.
> >
> >         -Eric
> >
> >
> >         -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
> >         Eric B. Wolf                    New! 720-334-7734
> >         USGS Geographer
> >         Center of Excellence in GIScience
> >         PhD Student
> >         CU-Boulder - Geography
> >
> >         GPG Public Key: [LINK:
> >  http://www.h4h.net/ebwolf.public.key.txt]
> >  http://www.h4h.net/ebwolf.public.key.txt
> >
> >
> >         On Fri, Feb 12, 2010 at 6:56 AM, Abhay <[LINK:
> >  mailto:abhay.menon@gmail.com] abhay.menon@gmail.com
> >
> >         <mailto:[LINK: mailto:abhay.menon@gmail.com]
> >  abhay.menon@gmail.com>> wrote:
> >
> >
> >             On Fri, Feb 12, 2010 at 2:48 PM, Eric Wolf <[LINK:
> >  mailto:ebwolf@gmail.com] ebwolf@gmail.com
> >
> >
> >             <mailto:[LINK: mailto:ebwolf@gmail.com]
> >  ebwolf@gmail.com>> wrote:
> >
> >                 I'm using GDAL/OGR 1.6.1 with ActivePython
> >  2.6.4-10 and
> >                 cx_Oracle-5.0.3-11g. I am trying to connect to an
> >  Oracle
> >                 11g instance.
> >
> >                 This works:
> >
> >                     ogr2ogr -f "KML" emp.kml OCI:scott/tiger
> >  "EMP"
> >
> >                 What am I doing wrong. This fails, ds is None:
> >
> >                 from osgeo import ogr
> >
> >                 try:
> >                     d = ogr.GetDriverByName('OCI')
> >                 except:
> >                     print "Unable to GetDriverByName"
> >                     quit()
> >
> >                 ds = None
> >
> >                 try:
> >                     ds = ogr.Open('OCI:scott/tiger')
> >                 except:
> >                     print "Unable to open OCI connection"
> >                     quit()
> >
> >                 if ds is None:
> >                     print "Unable to open Oracle connection", ds
> >                     quit()
> >
> >                 lyr = ds.GetLayerByName('EMP')
> >                 number = lyr.GetFeatureCount()
> >
> >                 print "Features: " + str(number)
> >
> >
> >                 -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
> >                 Eric B. Wolf                    New!
> >  720-334-7734
> >                 USGS Geographer
> >                 Center of Excellence in GIScience
> >                 PhD Student
> >                 CU-Boulder - Geography
> >
> >                 GPG Public Key: [LINK:
> >  http://www.h4h.net/ebwolf.public.key.txt]
> >  http://www.h4h.net/ebwolf.public.key.txt
> >
> >                 _______________________________________________
> >                 gdal-dev mailing list
> >                 [LINK: mailto:gdal-dev@lists.osgeo.org]
> >  gdal-dev@lists.osgeo.org <mailto:[LINK: mailto:gdal-dev@lists.osgeo.org
> ]
> >  gdal-dev@lists.osgeo.org>
> >
> >                 [LINK:
> >  http://lists.osgeo.org/mailman/listinfo/gdal-dev]
> >  http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >             Hi Eric,
> >
> >             Form your mail it not clear what is cause of the
> >  problem.
> >
> >             There 2 scenario here
> >             1) you are on a remote machine form where your trying to
> >             connect oracle server machine:
> >
> >             a) Have you installed any Oracle Client in your system.
> >             Considering that you a
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100215/3f9c6c70/attachment-0001.html
From Sjur.A.Kolberg at sintef.no  Tue Feb 16 03:09:01 2010
From: Sjur.A.Kolberg at sintef.no (Sjur Kolberg)
Date: Tue Feb 16 03:09:17 2010
Subject: [gdal-dev] RE: Simple Q: fatal error LNK1120: 19 unresolved
	externals
In-Reply-To: <1266281496083-4578039.post@n2.nabble.com>
References: <1266277834419-4577872.post@n2.nabble.com>
	<72251B925CE10A478606EEAC6AA683BE18081E12E3@SINTEFEXMBX01.sintef.no>
	<1266281496083-4578039.post@n2.nabble.com>
Message-ID: <72251B925CE10A478606EEAC6AA683BE18081E12E4@SINTEFEXMBX01.sintef.no>

 
Hi, Vona!

The general procedure is this:

You generally compile/link GDAL and your program in separate VS projects/solutions.

If you're unfamiliar with building multi-binaries programs, I encourage you to look at the FWtools build of GDAL (and some other stuff), then you only have to worry about your own program.
http://fwtools.maptools.org/
The FWToools package includes both GDAL binaries (.lib and .dll) and include (.h) files. You don't need the source code. 

When compiling your program (from .cpp and -.h files to .obj files), Visual Studio needs to know the declaration of all the GDAL prototypes, which is found in the set of .h files. In Project Properties, go to Configuration Properties, C/C++ and select General; type in the folder of the GDAL .h files in the Additional Include Directories line. Then in your source code 
#include "gdal_i.h" in every source file that uses GDAL.
Your 'unresolved external' error message tells that you've successfully passed this point.

When linking you program (from .obj files to .exe or .dll files), Visual Studio needs the implementation of all the GDAL stuff. Since you wisely do not want to include all the GDAL source code into your program, this is found in stub libraries (.lib files). In Project Properties, go to Configuration Properties, Linker and select General; type in the folder of the GDAL .lib files in the Additional Library Directories line. Next, select Input, and type gdal_i.lib in the Additional Dependencies line. Your 'unresolved external' error message tells that this is the point you've missed.

And when running your program, your .exe file needs to find the GDAL .dll files. Either copy them (all) into the same directory as your program.exe, or add the folder where they reside to your system's PATH variable.

>From http://fwtools.maptools.org/windows-package-notes.html:
The GDAL DLL is named gdal_fw.dll, rather than the normal name. 
Include files are available in include directory. 
Stub library for linking (gdal_i.lib) is available in lib directory.

Good luck!

Sjur :-)

> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org 
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of vona
> Sent: 16. februar 2010 01:52
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] RE: Simple Q: fatal error LNK1120: 19 
> unresolved externals
> 
> 
> Thanks Sjur :)
> I just took the required .h files from the source package 
> downloaded from
> here: http://trac.osgeo.org/gdal/wiki/DownloadSource
> 
> I also downloaded a bunch of binaries, but how do i know 
> which of them i
> need to run?
> 
> All i need is to get pixel values of geotiff files (load then into an
> array).
> I wrote a cellular automata model for forest fire simulation, 
> but it can't
> load geotiff images, so I thought GDAL would help me with 
> that. The problem
> is that I have no experience with such things ((
> 
> -- 
> View this message in context: 
> http://n2.nabble.com/Simple-Q-fatal-error-LNK1120-19-unresolve
d-externals-tp4577872p4578039.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
From martin.raspaud at smhi.se  Tue Feb 16 04:27:02 2010
From: martin.raspaud at smhi.se (Raspaud Martin)
Date: Tue Feb 16 04:53:46 2010
Subject: [gdal-dev] Tiled geotiffs and blocksize
Message-ID: <783F32138ED65D4A9CF016980481B6BF01EFF1B6@CORRE.ad.smhi.se>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: martin_raspaud.vcf
Type: text/x-vcard
Size: 260 bytes
Desc: martin_raspaud.vcf
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100216/e1915d9b/martin_raspaud.vcf
From martin.raspaud at smhi.se  Tue Feb 16 05:12:57 2010
From: martin.raspaud at smhi.se (Raspaud Martin)
Date: Tue Feb 16 05:13:00 2010
Subject: [gdal-dev] Tiled geotiffs and blocksize
In-Reply-To: <783F32138ED65D4A9CF016980481B6BF01EFF1B6@CORRE.ad.smhi.se>
References: <783F32138ED65D4A9CF016980481B6BF01EFF1B6@CORRE.ad.smhi.se>
Message-ID: <783F32138ED65D4A9CF016980481B6BF01EFF1B7@CORRE.ad.smhi.se>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: martin_raspaud.vcf
Type: text/x-vcard
Size: 260 bytes
Desc: martin_raspaud.vcf
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100216/d22ea131/martin_raspaud.vcf
From chaitanya.ch at gmail.com  Tue Feb 16 05:35:38 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Feb 16 05:35:43 2010
Subject: [gdal-dev] Tiled geotiffs and blocksize
In-Reply-To: <783F32138ED65D4A9CF016980481B6BF01EFF1B6@CORRE.ad.smhi.se>
References: <783F32138ED65D4A9CF016980481B6BF01EFF1B6@CORRE.ad.smhi.se>
Message-ID: <eb502d881002160235g248c4637tb3cebd15b1d34dea@mail.gmail.com>

Raspaud,

Try the options with no space before and after the '=' sign.

On Tue, Feb 16, 2010 at 2:57 PM, Raspaud Martin <martin.raspaud@smhi.se>wrote:

>  -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Hi all,
>
> I?m trying to save geotiff rasters as tiled with custom blocksize. I'm
> using the
> python interface for this.
>
> Hence I use the following options:
> options = ["TILED = YES", "BLOCKXSIZE = 128", "BLOCKYSIZE = 128"]
>
> that I then pass on to the raster creation:
> dst_ds = raster.Create( filename,
>                         self.width,
>                         self.height,
>                         3,
>                         gdal.GDT_Byte,
>                         options)
>
> The code does not create any error and a readable tif is generated.
> However, I cannot see using tiffdump or tiffinfo any information on the
> tiling:
>
> TIFF Directory at offset 0x6fdf5a (7331674)
>   Image Width: 2560 Image Length: 2048
>   Bits/Sample: 8
>   Sample Format: unsigned integer
>   Compression Scheme: AdobeDeflate
>   Photometric Interpretation: RGB color
>   Samples/Pixel: 3
>   Rows/Strip: 1
>   Planar Configuration: single image plane
>   DateTime: 2010:02:15 07:30:00
>   Tag 33550: 3000.000000,3000.000000,0.000000
>   Tag 33922:
> 0.000000,0.000000,0.000000,-3780000.000000,-1500000.000000,0.000000
>   Tag 34735:
> 1,1,0,5,1024,0,1,2,1025,0,1,1,2048,0,1,4326,2049,34737,7,0,2054,0,1,9102
>   Tag 34737: WGS 84|
>
> Hence my questions:
> - - How do I check that the resulting tif image is tiled ?
> - - Do I need to specify TIFFTAG_TILELENGTH and TIFFTAG_TILEWIDTH ?
>
>
> Thanks !
> Martin
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.9 (GNU/Linux)
> Comment: Using GnuPG with Fedora - http://enigmail.mozdev.org/
>
> iQEcBAEBAgAGBQJLemTlAAoJEBdvyODiyJI4X3wH/AhvD8UuYPZ3Rg8TmydYSvoI
> eCwrbOYVZTogdR2w9H9i8wVRMJdzlZSMKUyQ6eiXgRR3NdvDmS4pXKQarFRmBnUS
> zyVgUaJDNHutmMZBJtmwGXLuPYG5qgGg2E7FSMzNt5FKqoFWoz9R1HI5GKjDJOVf
> FS1XWtK6x1EqbNob0n889rzPkeTvKRlpOTZpTY/1rhLGlEdDxRECsP9IKKwnd5yD
> vg9gojaEp6V5zJGpwyvxaLPnGBc9rHu5bQlj2MIQ3D0vvHh6IF8fOVPCgTyHSVpm
> yjZyViadq/OV8akwlnx481mOuyVoL+MSbL9mZpYrRb/vA6VeSIKk239aMB+c7iY=
> =OhoT
> -----END PGP SIGNATURE-----
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100216/e10c9257/attachment-0001.html
From michele.sanges at gmail.com  Tue Feb 16 13:37:34 2010
From: michele.sanges at gmail.com (Michele Sanges)
Date: Tue Feb 16 13:39:34 2010
Subject: [gdal-dev] elevation profile
In-Reply-To: <20100215141142.46750xrud0v4y0pc@wmail.ualg.pt>
References: <4B7482C8.4030105@gmail.com> <4B7937C8.2080203@free.fr>
	<20100215141142.46750xrud0v4y0pc@wmail.ualg.pt>
Message-ID: <4B7AE5EE.1090700@gmail.com>

Il 15/02/2010 14:11, jluis@ualg.pt ha scritto:

> You can do that very easily with GMT (grdtrack).
>
> Joaquim Luis



Il 15/02/2010 17:36, Brent Wood ha scritto:
> Hi Michele,
>
> I use PostGIS&  GMT to generate such profiles.
> <cut>
> Brent Wood

Thanks to all for the replies.
Unfortunately I need to generate the elevation profiles within my 
application, using only my own code or external libraries, but without 
using external tools.

Il 15/02/2010 13:02, Jean-Claude REPETTO ha scritto:
>>Hello Michele,
>
> There is an interesting paper about this problem :
> <http://www.geocomputation.org/1999/082/gc_082.htm>
>
> I don't know if there are libraries implementing these algorithms for
> DEM interpolation. Does anybody know if there is an open source function
> to compute the coefficients of a bicubic interpolation ?
>
> Regards,
> Jean-Claude

Hello Jean-Claude,
you have pointed me to a very interesting article, I think that bilinear 
interpolation can be enough simple to implement.

Regards.


-- 
Michele Sanges
From jgomezdans at gmail.com  Tue Feb 16 15:27:43 2010
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Tue Feb 16 15:27:47 2010
Subject: [gdal-dev] elevation profile
In-Reply-To: <4B7AE5EE.1090700@gmail.com>
References: <4B7482C8.4030105@gmail.com> <4B7937C8.2080203@free.fr>
	<20100215141142.46750xrud0v4y0pc@wmail.ualg.pt>
	<4B7AE5EE.1090700@gmail.com>
Message-ID: <91d218431002161227h23c38e78o6d3d03206b31b3a2@mail.gmail.com>

Hi,

On 16 February 2010 18:37, Michele Sanges <michele.sanges@gmail.com> wrote:

> you have pointed me to a very interesting article, I think that bilinear
> interpolation can be enough simple to implement.
>

I don't know what your setup is, but if you can use python and scipy in
addition to gdal, you can:
1.- read the points using (eg) OGR
2.- read the raster fle using GDAL
3.- use scipy's interpolation routines to interpolate your point

It definitely has bilinear interpolation there.
J
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100216/84dbc9f3/attachment.html
From ksshannon at gmail.com  Tue Feb 16 16:54:13 2010
From: ksshannon at gmail.com (Kyle Shannon)
Date: Tue Feb 16 17:21:53 2010
Subject: [gdal-dev] CF-1.0 Convention and netCDF driver
Message-ID: <c28f2e141002161354q1f7fbd16la67515e683495ddd@mail.gmail.com>

I have been working quite a bit with the netcdf driver and weather data.  I
am noticing that many CF-1.0 (NetCDF Climate and Forecast Metadata
Convention) tags are not supported or referenced in the driver.  In many
cases this forces some data to be set to a default.  I am mostly working in
the spatial reference tags and this is causing problems as I don't know
where my grids are in space.

>From the NetCDF format page:

> Georeference There is no universal way of storing georeferencing in netCDF
> files. The driver first tries to follow the CF-1 Convention from UNIDATA
> looking for the Metadata named "grid_mapping". If "grid_mapping" is not
> present, the driver will try to find an lat/lon grid array to set
> geotransform array. The NetCDF driver verifies that the Lat/Lon array is
> equally space.
>
> If those 2 mehtods fail, NetCDF driver will try to read the following
> metadata directly and set up georefenrencing.
>
>    - spatial_ref (Well Known Text)
>
>
>    - GeoTransform (GeoTransform array)
>
> or,
>
>    - Northernmost_Northing
>    - Southernmost_Northing
>    - Easternmost_Easting
>    - Westernmost_Easting
>
> Is it in the best interest of everyone (or most people) to follow CF-1.0 as
the NetCDF Format states?

regards,
kss

# ===================
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406) 829-6954
kshannon@fs.fed.us
# ===================
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100216/3de5d78f/attachment.html
From proppy at aminche.com  Tue Feb 16 18:29:53 2010
From: proppy at aminche.com (Johan Euphrosine)
Date: Tue Feb 16 18:30:00 2010
Subject: [gdal-dev] map2geojson
In-Reply-To: <BAY122-DS357AAB59323600B237083D1490@phx.gbl>
References: <BAY122-DS357AAB59323600B237083D1490@phx.gbl>
Message-ID: <1266362993.6879.9.camel@pasokon>

On Tue, 2010-02-16 at 14:24 -0500, Rob Tozier wrote:
> 
> I am working on building a webpage that uses maptiler to build a
> mapimage/webpage and wanted to add your code to it, which allows a
> clickable hotlink layer.  The goal I am trying to achieve is a webpage
> that has a boundary map on it.  When a user clicks on each individual
> county it opens another webpage in an iframe to the right of the map.
> By doing this it allows me to display any info I want regardless since
> it is loading another webpage in the iframe.  The language all of this
> is written in is new to me.  Any information you can give me on it
> would be great. 

map2geojson.py is written in python, and could be used to convert html
<map> polygon definition into a geojson.

Openlayers is a javascript library which could be used to display the
tiles, and the geojson layer.

SelectFeature and "featureselected" event could be used with custom
javascript code to update the iframe url when a new feature is selected.

Let me know if you need more informations.

-- 
Johan Euphrosine <proppy@aminche.com>
Development and services around Free Software
http://www.aminche.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100217/5fb08eac/attachment.bin
From ebwolf at gmail.com  Tue Feb 16 23:01:24 2010
From: ebwolf at gmail.com (Eric Wolf)
Date: Tue Feb 16 23:06:45 2010
Subject: [gdal-dev] Python problem with exportToGML()
Message-ID: <18bb6ba01002162001i64882bb2s9f369f79ff5a7d42@mail.gmail.com>

I've decided to just get some work done rather than focus on the Oracle
issues. Fortunately, the code I write with OGR using Shapefiles should work
seamlessly with Oracle (or relatively seamlessly).

But now I have a new problem. I am getting the following error when I call
exportToGML():

Traceback (most recent call last):
  File "shp2n3.py", line 178, in <module>
    write_triples()
  File "shp2n3.py", line 137, in write_triples
    gml = geom.exportToGML()
  File "C:\Python26\lib\site-packages\osgeo\ogr.py", line 2672, in <lambda>
    __getattr__ = lambda self, name: _swig_getattr(self, Geometry, name)
  File "C:\Python26\lib\site-packages\osgeo\ogr.py", line 34, in
_swig_getattr
    raise AttributeError,name
AttributeError: exportToGML

The bit of code looks like

geom = feat.GetGeometryRef()
 if geom is not None:
gml = geom.exportToGML()
 outs = '      :hasGML ' + gml + '^^gmlr:string '

outs += ".\n"
outFp.write(outs)
else:
print "Can't get geometry!"
print "GDAL Error: " + gdal.GetLastErrorMsg()

geom is not None. I get the same results with Python 2.5.5.7 + GDAL 1.5.2
and Python 2.6.4.10 + GDAL 1.6.1.

-Eric

-=--=---=----=----=---=--=-=--=---=----=---=--=-=-
Eric B. Wolf                    New! 720-334-7734
USGS Geographer
Center of Excellence in GIScience
PhD Student
CU-Boulder - Geography

GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100216/0a027231/attachment.html
From warmerdam at pobox.com  Tue Feb 16 23:16:40 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 16 23:16:40 2010
Subject: [gdal-dev] Python problem with exportToGML()
In-Reply-To: <18bb6ba01002162001i64882bb2s9f369f79ff5a7d42@mail.gmail.com>
References: <18bb6ba01002162001i64882bb2s9f369f79ff5a7d42@mail.gmail.com>
Message-ID: <4B7B6DA8.3040307@pobox.com>

Eric Wolf wrote:
> I've decided to just get some work done rather than focus on the Oracle 
> issues. Fortunately, the code I write with OGR using Shapefiles should 
> work seamlessly with Oracle (or relatively seamlessly).
> 
> But now I have a new problem. I am getting the following error when I 
> call exportToGML():
> 
> Traceback (most recent call last):
>   File "shp2n3.py", line 178, in <module>
>     write_triples()
>   File "shp2n3.py", line 137, in write_triples
>     gml = geom.exportToGML()
>   File "C:\Python26\lib\site-packages\osgeo\ogr.py", line 2672, in <lambda>
>     __getattr__ = lambda self, name: _swig_getattr(self, Geometry, name)
>   File "C:\Python26\lib\site-packages\osgeo\ogr.py", line 34, in 
> _swig_getattr
>     raise AttributeError,name
> AttributeError: exportToGML

Eric,

Try ExportToGML() instead of exportToGML().  The swig bindings do not
follow the case capitalization as some of the OGR methods.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From pedroroma1982 at gmail.com  Wed Feb 17 05:55:59 2010
From: pedroroma1982 at gmail.com (Pedro Roma)
Date: Wed Feb 17 05:56:04 2010
Subject: [gdal-dev] HDF5 information regarding Coordinate System and GCP
Message-ID: <3461e9f01002170255k622a6af0vfb43381df63c7611@mail.gmail.com>

Greetings

I'm a GRASS user and I'm dealing with some difficulties with HDF5
import/translate. I'm using gdal_translate to import HDF5 files to GRASS but
I need to use GCP's information and coordinate system. My question is, using
GDAL tools how can I import/use GCP and coordinate systems that are
associated with each Subset and that I can "see" using gldalinfo.

Thank you

Best regards
pedro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100217/8c8639f8/attachment-0001.html
From chaitanya.ch at gmail.com  Wed Feb 17 06:23:19 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Feb 17 06:23:21 2010
Subject: [gdal-dev] HDF5 information regarding Coordinate System and GCP
In-Reply-To: <3461e9f01002170255k622a6af0vfb43381df63c7611@mail.gmail.com>
References: <3461e9f01002170255k622a6af0vfb43381df63c7611@mail.gmail.com>
Message-ID: <eb502d881002170323m5573269ai64c3e7c597691080@mail.gmail.com>

Pedro,

You need to specify the individual subdataset of the hdf5 file to retrieve
the metadata. This page, http://www.gdal.org/frmt_hdf5.html , shows a way to
do it in gdalinfo. GRASS should be in similar lines.

On Wed, Feb 17, 2010 at 4:25 PM, Pedro Roma <pedroroma1982@gmail.com> wrote:

> Greetings
>
> I'm a GRASS user and I'm dealing with some difficulties with HDF5
> import/translate. I'm using gdal_translate to import HDF5 files to GRASS but
> I need to use GCP's information and coordinate system. My question is, using
> GDAL tools how can I import/use GCP and coordinate systems that are
> associated with each Subset and that I can "see" using gldalinfo.
>
> Thank you
>
> Best regards
> pedro
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100217/526db30d/attachment.html
From pedroroma1982 at gmail.com  Wed Feb 17 07:00:15 2010
From: pedroroma1982 at gmail.com (Pedro Roma)
Date: Wed Feb 17 07:00:20 2010
Subject: [gdal-dev] HDF5 information regarding Coordinate System and GCP
In-Reply-To: <eb502d881002170323m5573269ai64c3e7c597691080@mail.gmail.com>
References: <3461e9f01002170255k622a6af0vfb43381df63c7611@mail.gmail.com>
	<eb502d881002170323m5573269ai64c3e7c597691080@mail.gmail.com>
Message-ID: <3461e9f01002170400r3ce3a8a5vd3973243f0caacd0@mail.gmail.com>

Hi

I have specified individual subdataset and I have run gdalinfo but it only
writes in the terminal window it doesn't store in a specific file to be
read.
As it says in that link: This driver is intended only for importing remote
sensing and geospatial datasets in form of raster image. There is nothing
mentioning georrectify using GCP points included in HDF5 file.

On Wed, Feb 17, 2010 at 11:23 AM, Chaitanya kumar CH <chaitanya.ch@gmail.com
> wrote:

> Pedro,
>
> You need to specify the individual subdataset of the hdf5 file to retrieve
> the metadata. This page, http://www.gdal.org/frmt_hdf5.html , shows a way
> to do it in gdalinfo. GRASS should be in similar lines.
>
> On Wed, Feb 17, 2010 at 4:25 PM, Pedro Roma <pedroroma1982@gmail.com>wrote:
>
>> Greetings
>>
>> I'm a GRASS user and I'm dealing with some difficulties with HDF5
>> import/translate. I'm using gdal_translate to import HDF5 files to GRASS but
>> I need to use GCP's information and coordinate system. My question is, using
>> GDAL tools how can I import/use GCP and coordinate systems that are
>> associated with each Subset and that I can "see" using gldalinfo.
>>
>> Thank you
>>
>> Best regards
>> pedro
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9848167848
> 17.241582N 80.142635E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100217/492781ad/attachment.html
From neteler at osgeo.org  Wed Feb 17 07:35:34 2010
From: neteler at osgeo.org (Markus Neteler)
Date: Wed Feb 17 07:41:38 2010
Subject: [gdal-dev] HDF5 information regarding Coordinate System and GCP
In-Reply-To: <3461e9f01002170400r3ce3a8a5vd3973243f0caacd0@mail.gmail.com>
References: <3461e9f01002170255k622a6af0vfb43381df63c7611@mail.gmail.com> 
	<eb502d881002170323m5573269ai64c3e7c597691080@mail.gmail.com> 
	<3461e9f01002170400r3ce3a8a5vd3973243f0caacd0@mail.gmail.com>
Message-ID: <86782b611002170435r4eb7ab93nb96a5e3bc8a0c66c@mail.gmail.com>

On Wed, Feb 17, 2010 at 1:00 PM, Pedro Roma <pedroroma1982@gmail.com> wrote:
> Hi
> I have specified individual subdataset and I have run gdalinfo but it only
> writes in the terminal window it doesn't store in a specific file to be
> read.

Here a script how things could be done (contains some MODIS specialities):
http://www.grassbook.org/neteler/useful/modis_hdf2erdas_ll_wgs84.sh

> As it says in that link:?This driver is intended only for importing remote
> sensing and geospatial datasets in form of raster image. There is nothing
> mentioning georrectify using GCP points included in HDF5 file.

Please point us to the data set.

Markus
From even.rouault at mines-paris.org  Wed Feb 17 14:29:23 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb 17 14:29:34 2010
Subject: [gdal-dev] HDF5 information regarding Coordinate System and GCP
In-Reply-To: <3461e9f01002170400r3ce3a8a5vd3973243f0caacd0@mail.gmail.com>
References: <3461e9f01002170255k622a6af0vfb43381df63c7611@mail.gmail.com>
	<eb502d881002170323m5573269ai64c3e7c597691080@mail.gmail.com>
	<3461e9f01002170400r3ce3a8a5vd3973243f0caacd0@mail.gmail.com>
Message-ID: <201002172029.23755.even.rouault@mines-paris.org>

Petro,

yes it is not surprising there's nothing specific in the doc of the HDF5 
driver about what to do with GCPs as quite a few other drivers can also 
return GCPs. You're probably interested by a generic tool such as gdalwarp to 
rectify the image from the GCPs : see http://gdal.org/gdalwarp.html

Best regards,

Even

Le Wednesday 17 February 2010 13:00:15 Pedro Roma, vous avez ?crit?:
> Hi
>
> I have specified individual subdataset and I have run gdalinfo but it only
> writes in the terminal window it doesn't store in a specific file to be
> read.
> As it says in that link: This driver is intended only for importing remote
> sensing and geospatial datasets in form of raster image. There is nothing
> mentioning georrectify using GCP points included in HDF5 file.
>
> On Wed, Feb 17, 2010 at 11:23 AM, Chaitanya kumar CH
> <chaitanya.ch@gmail.com
>
> > wrote:
> >
> > Pedro,
> >
> > You need to specify the individual subdataset of the hdf5 file to
> > retrieve the metadata. This page, http://www.gdal.org/frmt_hdf5.html ,
> > shows a way to do it in gdalinfo. GRASS should be in similar lines.
> >
> > On Wed, Feb 17, 2010 at 4:25 PM, Pedro Roma 
<pedroroma1982@gmail.com>wrote:
> >> Greetings
> >>
> >> I'm a GRASS user and I'm dealing with some difficulties with HDF5
> >> import/translate. I'm using gdal_translate to import HDF5 files to GRASS
> >> but I need to use GCP's information and coordinate system. My question
> >> is, using GDAL tools how can I import/use GCP and coordinate systems
> >> that are associated with each Subset and that I can "see" using
> >> gldalinfo.
> >>
> >> Thank you
> >>
> >> Best regards
> >> pedro
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > --
> > Best regards,
> > Chaitanya kumar CH.
> > /t?a???nj?/ /k?m?r/
> > +91-9848167848
> > 17.241582N 80.142635E


From wendell at enflight.com  Wed Feb 17 20:30:04 2010
From: wendell at enflight.com (Wendell Turner)
Date: Wed Feb 17 21:00:00 2010
Subject: [gdal-dev] need help with geo-referencing
Message-ID: <20100218013004.GA7062@cloud3.rho.net>

I'm trying to geo-reference a .tif image, but the
corner coordinates don't change.  I used gimp to get the
pixel and lat/lng of 4 points on the image.  I converted
the lat/lng to the desired coordinates, then used this
command:
  gdal_translate \
   -a_srs epsg:3395 \
   -gcp 1954 1085  -8682920.2818 4766363.8392 0 \
   -gcp 1954 4581  -8682920.2818 4623698.8898 0 \
   -gcp 7376 1085  -8460281.3002 4766363.8392 0 \
   -gcp 7376 4581  -8460281.3002 4623698.8898 0 \
   bw_unref.tif \
   bw_ref.tif

That command produced an output file, but gdalinfo shows the
corner coordinates are still in pixels:
  Corner Coordinates:
  Upper Left  (    0.0,    0.0)
  Lower Left  (    0.0, 5764.0)
  Upper Right ( 7995.0,    0.0)
  Lower Right ( 7995.0, 5764.0)

not the easting/northing that I expect; other files that are
geo-referenced have coordinates like this::
 Corner Coordinates:
  Upper Left  (-8710773.534, 4802386.689) ( 78d15'0.76"W, 39d45'0.87"N)
  Lower Left  (-8710773.534, 4588376.402) ( 78d15'0.76"W, 38d15'0.77"N)
  Upper Right (-8460315.902, 4802386.689) ( 76d 0'1.12"W, 39d45'0.87"N)
  Lower Right (-8460315.902, 4588376.402) ( 76d 0'1.12"W, 38d15'0.77"N)

Also, the coordinate system parameter in the geo-referenced
file is a nicely formatted/indented hierarchy.  In the one I
tried to create it shows as one long string, with `' at the
beginning, as if it isn't really parsed or a part of the
file.

What do I need to do to get the output file to have the
correct coordinate system?

Thanks,

Wendell

From ytrapaet at hotmail.com  Wed Feb 17 23:59:15 2010
From: ytrapaet at hotmail.com (anotherObject)
Date: Wed Feb 17 23:59:18 2010
Subject: [gdal-dev] installing GDAL for pythonwin: can import and use gdal,
 but not gdal_translate
Message-ID: <1266469155885-4590165.post@n2.nabble.com>


Hello, i am new to using GDAL, from what I've looked into it seems great. I
am using pythonwin to interact with GDAL. 

For installation, I followed the instructions here:
http://www.gis.usu.edu/~chrisg/python/2009/install.html (installing GDAL
manually). All my windows system variables are identical to these
instructions. 
 
I am now able to use GDAL in pythonwin - except i am unable to access the
GDAL utilities (in my first task of utilizing GDAL, thei am in need  of the
gdal_translate). 

If i can import the GDAL libraries, but cannot access the gdal_translate,
does this indicate any specific problem? I am using pythonwin 2.5 and gdal
1.6.

here is what happens in my pythonwin interactive window:

>>> from osgeo import gdal
>>> gdal
<module 'osgeo.gdal' from 'C:\Python25\lib\site-packages\osgeo\gdal.pyc'>
>>> gdal_translate
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
NameError: name 'gdal_translate' is not defined
>>> 


thanks so much for any help on this, i would love to get moving with
actually learning GDAL rather than setting it up!
-- 
View this message in context: http://n2.nabble.com/installing-GDAL-for-pythonwin-can-import-and-use-gdal-but-not-gdal-translate-tp4590165p4590165.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Thu Feb 18 00:08:57 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Feb 18 00:09:02 2010
Subject: [gdal-dev] installing GDAL for pythonwin: can import and use 
	gdal, but not gdal_translate
In-Reply-To: <1266469155885-4590165.post@n2.nabble.com>
References: <1266469155885-4590165.post@n2.nabble.com>
Message-ID: <eb502d881002172108j7d09fd7anfa923967e1d63f27@mail.gmail.com>

ytrapaet,

gdal_translate is an executable program. You can use it directly from the
command line. Refer to http://www.gdal.org/gdal_utilities.html for python
scripts and other programs. Python scripts are indicated by .py extension.

On Thu, Feb 18, 2010 at 10:29 AM, anotherObject <ytrapaet@hotmail.com>wrote:

>
> Hello, i am new to using GDAL, from what I've looked into it seems great. I
> am using pythonwin to interact with GDAL.
>
> For installation, I followed the instructions here:
> http://www.gis.usu.edu/~chrisg/python/2009/install.html<http://www.gis.usu.edu/%7Echrisg/python/2009/install.html>(installing GDAL
> manually). All my windows system variables are identical to these
> instructions.
>
> I am now able to use GDAL in pythonwin - except i am unable to access the
> GDAL utilities (in my first task of utilizing GDAL, thei am in need  of the
> gdal_translate).
>
> If i can import the GDAL libraries, but cannot access the gdal_translate,
> does this indicate any specific problem? I am using pythonwin 2.5 and gdal
> 1.6.
>
> here is what happens in my pythonwin interactive window:
>
> >>> from osgeo import gdal
> >>> gdal
> <module 'osgeo.gdal' from 'C:\Python25\lib\site-packages\osgeo\gdal.pyc'>
> >>> gdal_translate
> Traceback (most recent call last):
>  File "<interactive input>", line 1, in <module>
> NameError: name 'gdal_translate' is not defined
> >>>
>
>
> thanks so much for any help on this, i would love to get moving with
> actually learning GDAL rather than setting it up!
> --
> View this message in context:
> http://n2.nabble.com/installing-GDAL-for-pythonwin-can-import-and-use-gdal-but-not-gdal-translate-tp4590165p4590165.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100218/11ced07a/attachment.html
From ytrapaet at hotmail.com  Thu Feb 18 01:06:56 2010
From: ytrapaet at hotmail.com (anotherObject)
Date: Thu Feb 18 01:06:57 2010
Subject: [gdal-dev] Re: installing GDAL for pythonwin: can import and use
 gdal, but not gdal_translate
In-Reply-To: <eb502d881002172108j7d09fd7anfa923967e1d63f27@mail.gmail.com>
References: <1266469155885-4590165.post@n2.nabble.com>
	<eb502d881002172108j7d09fd7anfa923967e1d63f27@mail.gmail.com>
Message-ID: <1266473216019-4590291.post@n2.nabble.com>


hi Chaitanya,

Thanks for the response. Perhaps i am just not understanding or remembering
terms, but is the pythonwin interactive window not the command line? that is
where i am trying to access gdal_translate (i guess run the exe would be
more corrent), yet  it completely does not recognize the word
"gdal_translate" (or any of the other utility names).  
-- 
View this message in context: http://n2.nabble.com/installing-GDAL-for-pythonwin-can-import-and-use-gdal-but-not-gdal-translate-tp4590165p4590291.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Thu Feb 18 01:21:44 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Feb 18 01:21:46 2010
Subject: [gdal-dev] Re: installing GDAL for pythonwin: can import and use 
	gdal, but not gdal_translate
In-Reply-To: <1266473216019-4590291.post@n2.nabble.com>
References: <1266469155885-4590165.post@n2.nabble.com>
	<eb502d881002172108j7d09fd7anfa923967e1d63f27@mail.gmail.com>
	<1266473216019-4590291.post@n2.nabble.com>
Message-ID: <eb502d881002172221q308bff93oefc5a2c34db84d8b@mail.gmail.com>

ytrapaet,

pythonwin is for python's commands. gdal_translate.exe is a seperate
executable file. You need to run it from the system's command line (Start ->
Run -> cmd). If your environment variables are set as described in the
document you should be able to run it from your command prompt.

On Thu, Feb 18, 2010 at 11:36 AM, anotherObject <ytrapaet@hotmail.com>wrote:

>
> hi Chaitanya,
>
> Thanks for the response. Perhaps i am just not understanding or remembering
> terms, but is the pythonwin interactive window not the command line? that
> is
> where i am trying to access gdal_translate (i guess run the exe would be
> more corrent), yet  it completely does not recognize the word
> "gdal_translate" (or any of the other utility names).
> --
> View this message in context:
> http://n2.nabble.com/installing-GDAL-for-pythonwin-can-import-and-use-gdal-but-not-gdal-translate-tp4590165p4590291.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100218/8026a7b6/attachment.html
From jrepetto at free.fr  Thu Feb 18 02:08:21 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Thu Feb 18 02:08:32 2010
Subject: [gdal-dev] need help with geo-referencing
In-Reply-To: <20100218013004.GA7062@cloud3.rho.net>
References: <20100218013004.GA7062@cloud3.rho.net>
Message-ID: <4B7CE765.90409@free.fr>

Wendell Turner a ?crit :
> I'm trying to geo-reference a .tif image, but the
> corner coordinates don't change. 
> 
> What do I need to do to get the output file to have the
> correct coordinate system?
> 

Hello Wendell,

You have to use gdalwarp :
gdalwarp -r lanczos bw_ref.tif bw.tif

Alternatively, you can use QGIS with the georeferencer plugin.

Jean-Claude
From ytrapaet at hotmail.com  Thu Feb 18 02:10:55 2010
From: ytrapaet at hotmail.com (anotherObject)
Date: Thu Feb 18 02:11:03 2010
Subject: [gdal-dev] Re: installing GDAL for pythonwin: can import and use
 gdal, but not gdal_translate
In-Reply-To: <eb502d881002172221q308bff93oefc5a2c34db84d8b@mail.gmail.com>
References: <1266469155885-4590165.post@n2.nabble.com>
	<eb502d881002172108j7d09fd7anfa923967e1d63f27@mail.gmail.com>
	<1266473216019-4590291.post@n2.nabble.com>
	<eb502d881002172221q308bff93oefc5a2c34db84d8b@mail.gmail.com>
Message-ID: <1266477055980-4590386.post@n2.nabble.com>


Chaitanya - thank you! i am not used to much GIS programming outside of the
pythonwin context. Im glad its not a setup problem.

I'm not sure i need to make some more changes to my environment that are not
mentioned in that pdf article describing the setup GDAL; every time i try
any sort of commands that are mentioned in the GDAL utilities page from the
Start -> Run -> cmd, once i press ok, i see the black DOS screen for a split
second, then it disappears, so i cant see the displayed information that
something like gdalinfo gives. sorry for being such a newbie.

ive also glanced at a few resources that talk about how to do batch
processing with GDAL utilities - what is the actual language that is being
used in this command window (for batch, or any type of commands)?
-- 
View this message in context: http://n2.nabble.com/installing-GDAL-for-pythonwin-can-import-and-use-gdal-but-not-gdal-translate-tp4590165p4590386.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From eran.geva at gmail.com  Thu Feb 18 02:18:09 2010
From: eran.geva at gmail.com (Eran Geva)
Date: Thu Feb 18 02:19:29 2010
Subject: [gdal-dev] multithreading with GDAL
Message-ID: <1266477489688-4590398.post@n2.nabble.com>


hello,
our system reads a large amount of images and used LIBTIFF directly.
to quicken things up we implemented prefetching of whole images which
resided on a different OS-thread.
we moved to GDAL for better format support and now the prefetching mechanism
isn't helpful anymore.
actually now it is giving the exact same throughput as without it...
any notions?
Eran
-- 
View this message in context: http://n2.nabble.com/multithreading-with-GDAL-tp4590398p4590398.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jukka.rahkonen at mmmtike.fi  Thu Feb 18 03:41:45 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Feb 18 03:42:24 2010
Subject: [gdal-dev] Re: installing GDAL for pythonwin: can import and use
	gdal, but not gdal_translate
References: <1266469155885-4590165.post@n2.nabble.com>
	<eb502d881002172108j7d09fd7anfa923967e1d63f27@mail.gmail.com>
	<1266473216019-4590291.post@n2.nabble.com>
	<eb502d881002172221q308bff93oefc5a2c34db84d8b@mail.gmail.com>
	<1266477055980-4590386.post@n2.nabble.com>
Message-ID: <loom.20100218T093343-533@post.gmane.org>

anotherObject <ytrapaet <at> hotmail.com> writes:

 
> I'm not sure i need to make some more changes to my environment that are not
> mentioned in that pdf article describing the setup GDAL; every time i try
> any sort of commands that are mentioned in the GDAL utilities page from the
> Start -> Run -> cmd, once i press ok, i see the black DOS screen for a split
> second, then it disappears, so i cant see the displayed information that
> something like gdalinfo gives. sorry for being such a newbie.

Hi,

I suppose you are now trying to run GDAL utilities from the "Run" window. Try to
get the black DOS screen open and stay open first.  Start - Run - write cmd -
press Enter is one way, or you can find it from Start-All
programs-Utilities-Command line. I am not sure about how Windows show menu items
in English, but anyway, you will find it.

Then you can run GDAL utilities from the DOS window and it will keep open and
show all the messages for you.

-Jukka Rahkonen-

From pedroroma1982 at gmail.com  Thu Feb 18 06:31:07 2010
From: pedroroma1982 at gmail.com (Pedro Roma)
Date: Thu Feb 18 06:31:10 2010
Subject: [gdal-dev] HDF5 information regarding Coordinate System and GCP
In-Reply-To: <201002172029.23755.even.rouault@mines-paris.org>
References: <3461e9f01002170255k622a6af0vfb43381df63c7611@mail.gmail.com>
	<eb502d881002170323m5573269ai64c3e7c597691080@mail.gmail.com>
	<3461e9f01002170400r3ce3a8a5vd3973243f0caacd0@mail.gmail.com>
	<201002172029.23755.even.rouault@mines-paris.org>
Message-ID: <3461e9f01002180331x751ccbeei47a6f4d8370ccbdc@mail.gmail.com>

Greetings All

Clearly I'm a newbie in this mattters.
Ok, each of my previously mentioned HDF5 files doesn't include GCP points...
Instead of that, pixel geographic position is given in two other HDF5 file
(one for latitude another for longitude). My question is, how can I
geoprocess and rectify this images into a Geotiff file or to be ingested,
geographically projected into GRASS? Any one has tried or had sucess with a
similar problem (but different datasets)?

Best regards,
Pedro


On Wed, Feb 17, 2010 at 7:29 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Petro,
>
> yes it is not surprising there's nothing specific in the doc of the HDF5
> driver about what to do with GCPs as quite a few other drivers can also
> return GCPs. You're probably interested by a generic tool such as gdalwarp
> to
> rectify the image from the GCPs : see http://gdal.org/gdalwarp.html
>
> Best regards,
>
> Even
>
> Le Wednesday 17 February 2010 13:00:15 Pedro Roma, vous avez ?crit :
> > Hi
> >
> > I have specified individual subdataset and I have run gdalinfo but it
> only
> > writes in the terminal window it doesn't store in a specific file to be
> > read.
> > As it says in that link: This driver is intended only for importing
> remote
> > sensing and geospatial datasets in form of raster image. There is nothing
> > mentioning georrectify using GCP points included in HDF5 file.
> >
> > On Wed, Feb 17, 2010 at 11:23 AM, Chaitanya kumar CH
> > <chaitanya.ch@gmail.com
> >
> > > wrote:
> > >
> > > Pedro,
> > >
> > > You need to specify the individual subdataset of the hdf5 file to
> > > retrieve the metadata. This page, http://www.gdal.org/frmt_hdf5.html ,
> > > shows a way to do it in gdalinfo. GRASS should be in similar lines.
> > >
> > > On Wed, Feb 17, 2010 at 4:25 PM, Pedro Roma
> <pedroroma1982@gmail.com>wrote:
> > >> Greetings
> > >>
> > >> I'm a GRASS user and I'm dealing with some difficulties with HDF5
> > >> import/translate. I'm using gdal_translate to import HDF5 files to
> GRASS
> > >> but I need to use GCP's information and coordinate system. My question
> > >> is, using GDAL tools how can I import/use GCP and coordinate systems
> > >> that are associated with each Subset and that I can "see" using
> > >> gldalinfo.
> > >>
> > >> Thank you
> > >>
> > >> Best regards
> > >> pedro
> > >>
> > >> _______________________________________________
> > >> gdal-dev mailing list
> > >> gdal-dev@lists.osgeo.org
> > >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> > > --
> > > Best regards,
> > > Chaitanya kumar CH.
> > > /t?a???nj?/ /k?m?r/
> > > +91-9848167848
> > > 17.241582N 80.142635E
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100218/b93dfa23/attachment.html
From ari.jolma at gmail.com  Thu Feb 18 09:40:21 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu Feb 18 09:40:25 2010
Subject: [gdal-dev] Length method for geometries in bindings
Message-ID: <4B7D5155.3040401@gmail.com>

Folks,

I added a Length() method for geometries into bindings. The method 
re-dos a simple euclidean distance as the get_Length of OGR proper is 
not exposed.

I hope this is ok. Length is in OGC SF with that name. However, the 
standard specifies that the length should be in its associated spatial 
reference and that's not the case here.

The method checks for geometry count and is recursive if count is > 0. 
The syntax  OGRGeometryShadow_Length for calling the method itself works 
in swig/Perl but I'm not sure about other languages. Could other swig 
developers check?

Regards,

Ari

From warmerdam at pobox.com  Thu Feb 18 09:56:44 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 18 09:56:36 2010
Subject: [gdal-dev] Length method for geometries in bindings
In-Reply-To: <4B7D5155.3040401@gmail.com>
References: <4B7D5155.3040401@gmail.com>
Message-ID: <4B7D552C.10908@pobox.com>

Ari Jolma wrote:
> Folks,
> 
> I added a Length() method for geometries into bindings. The method 
> re-dos a simple euclidean distance as the get_Length of OGR proper is 
> not exposed.

Ari,

I'm not clear on why you reimplemented it for the bindings instead of
just exposing it from the core, and adding a binding around it.

> I hope this is ok. Length is in OGC SF with that name. However, the 
> standard specifies that the length should be in its associated spatial 
> reference and that's not the case here.

I don't understand this statement.  In what way is the length not being
returned in the linear measure of the spatial referenced associated with
the geometry?  It seems to be - it seems to me something special would
need to be done to make that not-true.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ari.jolma at gmail.com  Thu Feb 18 11:16:18 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu Feb 18 11:16:20 2010
Subject: [gdal-dev] Length method for geometries in bindings
In-Reply-To: <4B7D552C.10908@pobox.com>
References: <4B7D5155.3040401@gmail.com> <4B7D552C.10908@pobox.com>
Message-ID: <4B7D67D2.2060808@gmail.com>

Frank Warmerdam wrote:
> Ari Jolma wrote:
>> Folks,
>>
>> I added a Length() method for geometries into bindings. The method 
>> re-dos a simple euclidean distance as the get_Length of OGR proper is 
>> not exposed.
>
> Ari,
>
> I'm not clear on why you reimplemented it for the bindings instead of
> just exposing it from the core, and adding a binding around it.

I simply don't feel confident enough on changing the C API as I've so 
far only worked on the bindings.

>
>> I hope this is ok. Length is in OGC SF with that name. However, the 
>> standard specifies that the length should be in its associated 
>> spatial reference and that's not the case here.
>
> I don't understand this statement.  In what way is the length not being
> returned in the linear measure of the spatial referenced associated with
> the geometry?  It seems to be - it seems to me something special would
> need to be done to make that not-true.

For example if the data is in geographic coordinates then the distance 
between two points is not euclidean distance.

Regards,

Ari

>
> Best regards,

From warmerdam at pobox.com  Thu Feb 18 11:23:42 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 18 11:23:34 2010
Subject: [gdal-dev] Length method for geometries in bindings
In-Reply-To: <4B7D67D2.2060808@gmail.com>
References: <4B7D5155.3040401@gmail.com> <4B7D552C.10908@pobox.com>
	<4B7D67D2.2060808@gmail.com>
Message-ID: <4B7D698E.2010000@pobox.com>

Ari Jolma wrote:
> Frank Warmerdam wrote:
>> Ari Jolma wrote:
>>> Folks,
>>>
>>> I added a Length() method for geometries into bindings. The method 
>>> re-dos a simple euclidean distance as the get_Length of OGR proper is 
>>> not exposed.
>>
>> Ari,
>>
>> I'm not clear on why you reimplemented it for the bindings instead of
>> just exposing it from the core, and adding a binding around it.
> 
> I simply don't feel confident enough on changing the C API as I've so 
> far only worked on the bindings.

Ari,

I'm happy to provide a C API entry point if you would be willing to
recast the SWIG function to use it.  Let me know if you are interested.

>>> I hope this is ok. Length is in OGC SF with that name. However, the 
>>> standard specifies that the length should be in its associated 
>>> spatial reference and that's not the case here.
>>
>> I don't understand this statement.  In what way is the length not being
>> returned in the linear measure of the spatial referenced associated with
>> the geometry?  It seems to be - it seems to me something special would
>> need to be done to make that not-true.
> 
> For example if the data is in geographic coordinates then the distance 
> between two points is not euclidean distance.

I would disagree.  If the data is in geographic (lat/long) degrees then
the distance will be in "linear degrees", computed as a euclidean distance.
So the distance is returned in the coordinate system of the geometry.

What we don't offer is a real (ie. great circle distance in meters) length
of the geometries.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From luisapena1979 at gmail.com  Thu Feb 18 11:49:36 2010
From: luisapena1979 at gmail.com (=?ISO-8859-1?Q?Luisa_Pe=F1a?=)
Date: Thu Feb 18 11:49:40 2010
Subject: [gdal-dev] Warp a file from two separate Lat and Long
Message-ID: <979f23b11002180849h737e25fre76647905a4bfc34@mail.gmail.com>

Greetings

I've used GDAL a few times but this is the first time that I'm lost on what
I can do with GDAL to solve my problem. I have 3 separate files, one with my
data, other with Lattitude and another with Longitude. They have the same
size and, as an example,  it means that Pixel (1,1) of data is located in
latitude retrieved from Pixel (1,1) from latitude and longitude (pixel (1,1)
from longitude). All of them are in WGS84 but without GCP's points.
I need to create a georreferenced/rectified Geotiff with this data and, to
do that, I need lat and Long. How can I do this?

Thanks

Best regards,
Luisa Pe?a
S.Paulo, Brazil
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100218/1bc80f94/attachment.html
From jluis at ualg.pt  Thu Feb 18 12:22:14 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Feb 18 12:22:18 2010
Subject: [gdal-dev] Warp a file from two separate Lat and Long
In-Reply-To: <979f23b11002180849h737e25fre76647905a4bfc34@mail.gmail.com>
References: <979f23b11002180849h737e25fre76647905a4bfc34@mail.gmail.com>
Message-ID: <4B7D7746.1050404@ualg.pt>

Luisa,

I normally restrain to propose GMT solutions here, but I'll open one 
more exception now as this problem seams easy to solve with it and also 
because I have o idea how to do it with GDAL.
For this, if your grids are not in netCDF, you will need a GMT built 
with GDAL support (I have one for Windows in Mirone's download page)

Use grd2xyz to construct a x,y,z (lon,lat,val) that will be 
instantaneously "georeferenced"

# Below the '=gd' is not part of the file's name but instead the 
instruction to direct GMT to use GDAL to read the grids
# No need for this if grids are netCDF
grd2xyz grid_withd_data=gd -Z > val.z
grd2xyz grid_withd_lon=gd -Z > lon.x
grd2xyz grid_withd_lat=gd -Z > lat.y

# Now paste the 3 columns
paste lon.x lat.y val.z > data.xyz

Probably at this point you will need to interpolate the "data.xyz" file 
to create a new grid as the lon & lats are likely not north-south 
aligned  (satellite data?) and not equispaced.

Joaquim Luis

> Greetings
>
> I've used GDAL a few times but this is the first time that I'm lost on 
> what I can do with GDAL to solve my problem. I have 3 separate files, 
> one with my data, other with Lattitude and another with Longitude. 
> They have the same size and, as an example,  it means that Pixel (1,1) 
> of data is located in latitude retrieved from Pixel (1,1) from 
> latitude and longitude (pixel (1,1) from longitude). All of them are 
> in WGS84 but without GCP's points.
> I need to create a georreferenced/rectified Geotiff with this data 
> and, to do that, I need lat and Long. How can I do this?
>
> Thanks
>
> Best regards,
> Luisa Pe?a
> S.Paulo, Brazil
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100218/5b4d566e/attachment.html
From jason.roberts at duke.edu  Thu Feb 18 12:37:04 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Thu Feb 18 12:37:14 2010
Subject: [gdal-dev] Nullable fields in OGR
Message-ID: <01d201cab0c0$fc6afd80$f540f880$@roberts@duke.edu>

Many relational databases allow fields to be set to NULL. Is this supported
in OGR? How does one detect whether a field is nullable or not?

 

Looking at the class documentation, I see functions OGRFeature::IsFieldSet
and OGRFeature::UnsetField. Are these intended for checking whether a field
is NULL and setting it to NULL? Or are they used for something else, such as
determining which fields have been modified by a caller prior to him calling
OGRLayer::SetFeature?

 

When I looked at OGRFieldDefn, I could not find a method that might be
intended for checking whether a field was nullable (e.g.
OGRFieldDefn::IsUnsettable).

 

A while back, Mateusz asked this:

 

> Yes. Also, most applications I've seen using OGR do define their own

> data models and translate OGRFeature to features of their own types.

> Perhaps it would be interesting to know why they don't use OGRFeature

> as a part of their data model, what's missing...

 

I am currently evaluating whether or not I should use OGRFeature directly in
a data model, or wrap it. Without nullability, I am probably inclined to
wrap it. As I have mentioned previously on gdal-dev, I'm trying to build
something that wraps OGR and ArcGIS APIs behind a common abstraction, to
allow development of tools that work with both. ArcGIS supports nullability
and it is useful in many situations, so I'd like to cleanly preserve it in
my abstraction, even if OGR does not presently support it.

 

Thanks for any thoughts you have,

 

Jason

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100218/4bf30985/attachment.html
From ancl at pml.ac.uk  Thu Feb 18 12:37:14 2010
From: ancl at pml.ac.uk (Andrew Clegg)
Date: Thu Feb 18 12:40:43 2010
Subject: [gdal-dev] Warp a file from two separate Lat and Long
In-Reply-To: <979f23b11002180849h737e25fre76647905a4bfc34@mail.gmail.com>
References: <979f23b11002180849h737e25fre76647905a4bfc34@mail.gmail.com>
Message-ID: <4B7D7ACA.1010501@pml.ac.uk>

Hi Luisa,

I've tried something similar in the past with satellite data. I had 3 
files, containing latitude, longitude and value stored as floats. I had 
some very minor success with the following solution (I got out an image 
but it seemed to drop to a very low resolution). I'm posting it more in 
the hope that someone else may be able to spot what I did wrong, because 
I would still really like to be able to do this.

My approach was to create a virtual dataset for each file:

sst.vrt (the values):

<VRTDataset rasterXSize="1296" rasterYSize="2030">
   <Metadata domain="GEOLOCATION">
      <MDI key="X_DATASET">lon.vrt</MDI>
      <MDI key="X_BAND">1</MDI>
      <MDI key="Y_DATASET">lat.vrt</MDI>
      <MDI key="Y_BAND">1</MDI>
      <MDI key="PIXEL_OFFSET">0</MDI>
      <MDI key="LINE_OFFSET">0</MDI>
      <MDI key="PIXEL_STEP">1</MDI>
      <MDI key="LINE_STEP">1</MDI>
   </Metadata>
    
   <VRTRasterBand dataType="Float32" band="1" subClass="VRTRawRasterBand">
     <SourceFilename relativetoVRT="1">sst.img</SourceFilename>
     <ImageOffset>0</ImageOffset>
     <PixelOffset>4</PixelOffset>
     <LineOffset>5184</LineOffset>
     <ByteOrder>LSB</ByteOrder>
   </VRTRasterBand>
</VRTDataset>

lon.vrt (longitude): (latitude is basically the same)

<VRTDataset rasterXSize="1296" rasterYSize="2030">
   <VRTRasterBand dataType="Float32" band="1" subClass="VRTRawRasterBand">
      <SourceFilename relativetoVRT="1">lon.img</SourceFilename>
      <ImageOffset>0</ImageOffset>
      <PixelOffset>4</PixelOffset>
      <LineOffset>5184</LineOffset>
      <ByteOrder>LSB</ByteOrder>
   </VRTRasterBand>
</VRTDataset>

I then tried to run gdalwarp on sst.vrt, trying either '-geoloc' or '-to 
METHOD=GEOLOC_ARRAY'.

Regards,

Andrew Clegg
Plymouth Marine Laboratory

Luisa Pe?a wrote:
> Greetings 
>
> I've used GDAL a few times but this is the first time that I'm lost on 
> what I can do with GDAL to solve my problem. I have 3 separate files, 
> one with my data, other with Lattitude and another with Longitude. 
> They have the same size and, as an example,  it means that Pixel (1,1) 
> of data is located in latitude retrieved from Pixel (1,1) from 
> latitude and longitude (pixel (1,1) from longitude). All of them are 
> in WGS84 but without GCP's points. 
> I need to create a georreferenced/rectified Geotiff with this data 
> and, to do that, I need lat and Long. How can I do this?
>
> Thanks
>
> Best regards,
> Luisa Pe?a
> S.Paulo, Brazil
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


--------------------------------------------------------------------------------
Plymouth Marine Laboratory
 
Registered Office:
Prospect Place 
The Hoe
Plymouth  PL1 3DH
 
Website: www.pml.ac.uk
Registered Charity No. 1091222
PML is a company limited by guarantee
registered in England & Wales
company number 4178503

PML is a member of the Plymouth Marine Sciences Partnership
Website: www.pmsp.org.uk 
--------------------------------------------------------------------------------
This e-mail, its content and any file attachments are confidential.

If you have received this e-mail in error please do not copy, disclose it to any third party or use the contents or attachments in any way. Please notify the sender by replying to this e-mail or e-mail forinfo@pml.ac.uk and then delete the email without making any copies or using it in any other way.

The content of this message may contain personal views which are not the views of Plymouth Marine Laboratory unless specifically stated.

You are reminded that e-mail communications are not secure and may contain viruses. Plymouth Marine Laboratory accepts no liability for any loss or damage which may be caused by viruses.
--------------------------------------------------------------------------------
From arb at sat.dundee.ac.uk  Thu Feb 18 12:42:08 2010
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Thu Feb 18 12:45:00 2010
Subject: [gdal-dev] Warp a file from two separate Lat and Long
In-Reply-To: <979f23b11002180849h737e25fre76647905a4bfc34@mail.gmail.com>
References: <979f23b11002180849h737e25fre76647905a4bfc34@mail.gmail.com>
Message-ID: <op.u8b3givyqw3wu1@titan>

On Thu, 18 Feb 2010 16:49:36 -0000, Luisa Pe?a <luisapena1979@gmail.com> wrote:
>
> I've used GDAL a few times but this is the first time that I'm lost on what
> I can do with GDAL to solve my problem. I have 3 separate files, one with my
> data, other with Lattitude and another with Longitude. They have the same
> size and, as an example,  it means that Pixel (1,1) of data is located in
> latitude retrieved from Pixel (1,1) from latitude and longitude (pixel (1,1)
> from longitude). All of them are in WGS84 but without GCP's points.
> I need to create a georreferenced/rectified Geotiff with this data and, to
> do that, I need lat and Long. How can I do this?

In the past it has been suggested to use VRT files for this (don't know if
that's still the best solution?).

Create one VRT file which describes the Latitude file
Create one VRT file which describes the Longitude file
Create one VRT file which describes the data and references the
lat and lon VRT files as GEOLOCATION metadata.

The latter VRT file is the one you reference as the source image to a
gdalwarp/translate command.  It's all actually quite simple (see examples
below) but if you need some more specific advice then let me know.

Andrew


Example VRT file for latitude:

<VRTDataset rasterXSize="2048" rasterYSize="964">
   <SRS>GEOGCS[&quot;WGS 72&quot;,DATUM[&quot;WGS_1972&quot;,SPHEROID[&quot;WGS 7
2&quot;,6378135,298.26,AUTHORITY[&quot;EPSG&quot;,&quot;7043&quot;]],AUTHORITY[&
quot;EPSG&quot;,&quot;6322&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quo
t;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.01745329251994328,AUTH
ORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4322&
quot;]]</SRS>
   <VRTRasterBand dataType="Float32" band="1" subClass="VRTRawRasterBand">
         <SourceFilename relativetoVRT="1">data.lat</SourceFilename>
     <ByteOrder>LSB</ByteOrder>
   </VRTRasterBand>
</VRTDataset>

Example VRT file for data (just to show the geolocation metadata reference):

<VRTDataset rasterXSize="2048" rasterYSize="964">
   <Metadata domain="GEOLOCATION">
     <MDI key="X_DATASET">data.lon.vrt</MDI>
     <MDI key="X_BAND">1</MDI>
     <MDI key="Y_DATASET">data.lat.vrt</MDI>
     <MDI key="Y_BAND">1</MDI>
     <MDI key="PIXEL_OFFSET">0</MDI>
     <MDI key="LINE_OFFSET">0</MDI>
     <MDI key="PIXEL_STEP">1</MDI>
     <MDI key="LINE_STEP">1</MDI>
   </Metadata>
   <SRS> stuff goes here</SRS>

   <VRTRasterBand dataType="UInt16" band="1" subClass="VRTRawRasterBand">
     <ImageOffset>1500</ImageOffset>
     <PixelOffset>10</PixelOffset>
     <LineOffset>22180</LineOffset>
     <ByteOrder>LSB</ByteOrder>
   </VRTRasterBand>
</VRTDataset>

From warmerdam at pobox.com  Thu Feb 18 13:07:00 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 18 13:06:54 2010
Subject: [gdal-dev] Nullable fields in OGR
In-Reply-To: <01d201cab0c0$fc6afd80$f540f880$@roberts@duke.edu>
References: <01d201cab0c0$fc6afd80$f540f880$@roberts@duke.edu>
Message-ID: <4B7D81C4.7010104@pobox.com>

Jason Roberts wrote:
> Many relational databases allow fields to be set to NULL. Is this 
> supported in OGR? How does one detect whether a field is nullable or not?
> 
>  
> 
> Looking at the class documentation, I see functions 
> OGRFeature::IsFieldSet and OGRFeature::UnsetField. Are these intended 
> for checking whether a field is NULL and setting it to NULL? Or are they 
> used for something else, such as determining which fields have been 
> modified by a caller prior to him calling OGRLayer::SetFeature?
> 
>  
> 
> When I looked at OGRFieldDefn, I could not find a method that might be 
> intended for checking whether a field was nullable (e.g. 
> OGRFieldDefn::IsUnsettable).

Jason,

IsFieldSet() tests if a feature field is NULL, and UnsetField() can force
it to NULL if it is not.

There is currently no way to test if a datastore supports the concept
of NULL fields, but if it does not it should just write a default value
(0.0, empty string, etc).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Thu Feb 18 13:09:05 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb 18 13:09:17 2010
Subject: [gdal-dev] Nullable fields in OGR
In-Reply-To: <01d201cab0c0$fc6afd80$f540f880$@roberts@duke.edu>
References: <01d201cab0c0$fc6afd80$f540f880$@roberts@duke.edu>
Message-ID: <201002181909.07072.even.rouault@mines-paris.org>

Le Thursday 18 February 2010 18:37:04 Jason Roberts, vous avez ?crit?:
> Many relational databases allow fields to be set to NULL. Is this supported
> in OGR? How does one detect whether a field is nullable or not?

All fields in OGRFeature are nullable. I think most OGR drivers will support 
writing features with null fields but this must be checked on a case by case 
basis. In theory, all drivers should check if the field is null or not. I can 
imagine that some specialized format could fail if some given compulsory 
fields are unset. From a quick look, drivers such as Shape, BNA, GML, KML, 
GPX, etc.. support null fields.  For relational databases such as SQLite, 
Postgres or MySQL, this is also supported, unless if you try to write a NULL 
value and the schema of the table constraints the column to be non NULLable, 
you'll get an error when inserting/updating the feature.

>
>
>
> Looking at the class documentation, I see functions OGRFeature::IsFieldSet
> and OGRFeature::UnsetField. Are these intended for checking whether a field
> is NULL and setting it to NULL?

Yes

> Or are they used for something else, such 
> as determining which fields have been modified by a caller prior to him
> calling OGRLayer::SetFeature?
>
>
>
> When I looked at OGRFieldDefn, I could not find a method that might be
> intended for checking whether a field was nullable (e.g.
> OGRFieldDefn::IsUnsettable).

It doesn't exist. You can always nullify a field in OGRFeature. But there's 
currently no API to be sure that writing it with OGRLayer::SetFeature() or 
OGRLayer::CreateFeature() will actually work.

>
> A while back, Mateusz asked this:
> > Yes. Also, most applications I've seen using OGR do define their own
> >
> > data models and translate OGRFeature to features of their own types.
> >
> > Perhaps it would be interesting to know why they don't use OGRFeature
> >
> > as a part of their data model, what's missing...
>
> I am currently evaluating whether or not I should use OGRFeature directly
> in a data model, or wrap it. Without nullability, I am probably inclined to
> wrap it. As I have mentioned previously on gdal-dev, I'm trying to build
> something that wraps OGR and ArcGIS APIs behind a common abstraction, to
> allow development of tools that work with both. ArcGIS supports nullability
> and it is useful in many situations, so I'd like to cleanly preserve it in
> my abstraction, even if OGR does not presently support it.
>
>
>
> Thanks for any thoughts you have,
>
>
>
> Jason


From pcreso at pcreso.com  Thu Feb 18 13:14:28 2010
From: pcreso at pcreso.com (pcreso@pcreso.com)
Date: Thu Feb 18 13:21:12 2010
Subject: [gdal-dev] Warp a file from two separate Lat and Long
In-Reply-To: <op.u8b3givyqw3wu1@titan>
Message-ID: <427409.31967.qm@web33203.mail.mud.yahoo.com>

assuming you are using Linux....

Can you use paste to merge the files first, redirected into a new file of x y z columns, then use GDAL on the result (assuming the order of values is the same in all 3 files)

eg:

echo 1 > f1
echo 2 > f2
echo 3 > f3
paste f1 f2 f3
1       2       3


Brent Wood


--- On Fri, 2/19/10, Andrew Brooks <arb@sat.dundee.ac.uk> wrote:

> From: Andrew Brooks <arb@sat.dundee.ac.uk>
> Subject: Re: [gdal-dev] Warp a file from two separate Lat and Long
> To: "gdal-dev" <gdal-dev@lists.osgeo.org>
> Date: Friday, February 19, 2010, 6:42 AM
> On Thu, 18 Feb 2010 16:49:36 -0000,
> Luisa Pe?a <luisapena1979@gmail.com>
> wrote:
> > 
> > I've used GDAL a few times but this is the first time
> that I'm lost on what
> > I can do with GDAL to solve my problem. I have 3
> separate files, one with my
> > data, other with Lattitude and another with Longitude.
> They have the same
> > size and, as an example,? it means that Pixel
> (1,1) of data is located in
> > latitude retrieved from Pixel (1,1) from latitude and
> longitude (pixel (1,1)
> > from longitude). All of them are in WGS84 but without
> GCP's points.
> > I need to create a georreferenced/rectified Geotiff
> with this data and, to
> > do that, I need lat and Long. How can I do this?
> 
> In the past it has been suggested to use VRT files for this
> (don't know if
> that's still the best solution?).
> 
> Create one VRT file which describes the Latitude file
> Create one VRT file which describes the Longitude file
> Create one VRT file which describes the data and references
> the
> lat and lon VRT files as GEOLOCATION metadata.
> 
> The latter VRT file is the one you reference as the source
> image to a
> gdalwarp/translate command.? It's all actually quite
> simple (see examples
> below) but if you need some more specific advice then let
> me know.
> 
> Andrew
> 
> 
> Example VRT file for latitude:
> 
> <VRTDataset rasterXSize="2048" rasterYSize="964">
> ? <SRS>GEOGCS[&quot;WGS
> 72&quot;,DATUM[&quot;WGS_1972&quot;,SPHEROID[&quot;WGS
> 7
> 2&quot;,6378135,298.26,AUTHORITY[&quot;EPSG&quot;,&quot;7043&quot;]],AUTHORITY[&
> quot;EPSG&quot;,&quot;6322&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quo
> t;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.01745329251994328,AUTH
> ORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4322&
> quot;]]</SRS>
> ? <VRTRasterBand dataType="Float32" band="1"
> subClass="VRTRawRasterBand">
> ? ? ? ? <SourceFilename
> relativetoVRT="1">data.lat</SourceFilename>
> ? ? <ByteOrder>LSB</ByteOrder>
> ? </VRTRasterBand>
> </VRTDataset>
> 
> Example VRT file for data (just to show the geolocation
> metadata reference):
> 
> <VRTDataset rasterXSize="2048" rasterYSize="964">
> ? <Metadata domain="GEOLOCATION">
> ? ? <MDI
> key="X_DATASET">data.lon.vrt</MDI>
> ? ? <MDI key="X_BAND">1</MDI>
> ? ? <MDI
> key="Y_DATASET">data.lat.vrt</MDI>
> ? ? <MDI key="Y_BAND">1</MDI>
> ? ? <MDI key="PIXEL_OFFSET">0</MDI>
> ? ? <MDI key="LINE_OFFSET">0</MDI>
> ? ? <MDI key="PIXEL_STEP">1</MDI>
> ? ? <MDI key="LINE_STEP">1</MDI>
> ? </Metadata>
> ? <SRS> stuff goes here</SRS>
> 
> ? <VRTRasterBand dataType="UInt16" band="1"
> subClass="VRTRawRasterBand">
> ? ? <ImageOffset>1500</ImageOffset>
> ? ? <PixelOffset>10</PixelOffset>
> ? ? <LineOffset>22180</LineOffset>
> ? ? <ByteOrder>LSB</ByteOrder>
> ? </VRTRasterBand>
> </VRTDataset>
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
From luisapena1979 at gmail.com  Thu Feb 18 13:44:43 2010
From: luisapena1979 at gmail.com (=?ISO-8859-1?Q?Luisa_Pe=F1a?=)
Date: Thu Feb 18 13:44:47 2010
Subject: [gdal-dev] Warp a file from two separate Lat and Long
In-Reply-To: <4B7D7ACA.1010501@pml.ac.uk>
References: <979f23b11002180849h737e25fre76647905a4bfc34@mail.gmail.com>
	<4B7D7ACA.1010501@pml.ac.uk>
Message-ID: <979f23b11002181044y7b1c7343sf29e4d531cd8e8dc@mail.gmail.com>

Hi Andrew

But How can I create those VRT, I never used those, from my original
binaries datasets  (HDF)? It seems that VRT is the key for my problem. But I
never used it before

Thanks for your help

Luisa
2010/2/18 Andrew Clegg <ancl@pml.ac.uk>

> Hi Luisa,
>
> I've tried something similar in the past with satellite data. I had 3
> files, containing latitude, longitude and value stored as floats. I had some
> very minor success with the following solution (I got out an image but it
> seemed to drop to a very low resolution). I'm posting it more in the hope
> that someone else may be able to spot what I did wrong, because I would
> still really like to be able to do this.
>
> My approach was to create a virtual dataset for each file:
>
> sst.vrt (the values):
>
> <VRTDataset rasterXSize="1296" rasterYSize="2030">
>  <Metadata domain="GEOLOCATION">
>     <MDI key="X_DATASET">lon.vrt</MDI>
>     <MDI key="X_BAND">1</MDI>
>     <MDI key="Y_DATASET">lat.vrt</MDI>
>     <MDI key="Y_BAND">1</MDI>
>     <MDI key="PIXEL_OFFSET">0</MDI>
>     <MDI key="LINE_OFFSET">0</MDI>
>     <MDI key="PIXEL_STEP">1</MDI>
>     <MDI key="LINE_STEP">1</MDI>
>  </Metadata>
>    <VRTRasterBand dataType="Float32" band="1" subClass="VRTRawRasterBand">
>    <SourceFilename relativetoVRT="1">sst.img</SourceFilename>
>    <ImageOffset>0</ImageOffset>
>    <PixelOffset>4</PixelOffset>
>    <LineOffset>5184</LineOffset>
>    <ByteOrder>LSB</ByteOrder>
>  </VRTRasterBand>
> </VRTDataset>
>
> lon.vrt (longitude): (latitude is basically the same)
>
> <VRTDataset rasterXSize="1296" rasterYSize="2030">
>  <VRTRasterBand dataType="Float32" band="1" subClass="VRTRawRasterBand">
>     <SourceFilename relativetoVRT="1">lon.img</SourceFilename>
>     <ImageOffset>0</ImageOffset>
>     <PixelOffset>4</PixelOffset>
>     <LineOffset>5184</LineOffset>
>     <ByteOrder>LSB</ByteOrder>
>  </VRTRasterBand>
> </VRTDataset>
>
> I then tried to run gdalwarp on sst.vrt, trying either '-geoloc' or '-to
> METHOD=GEOLOC_ARRAY'.
>
> Regards,
>
> Andrew Clegg
> Plymouth Marine Laboratory
>
> Luisa Pe?a wrote:
>
>> Greetings
>> I've used GDAL a few times but this is the first time that I'm lost on
>> what I can do with GDAL to solve my problem. I have 3 separate files, one
>> with my data, other with Lattitude and another with Longitude. They have the
>> same size and, as an example,  it means that Pixel (1,1) of data is located
>> in latitude retrieved from Pixel (1,1) from latitude and longitude (pixel
>> (1,1) from longitude). All of them are in WGS84 but without GCP's points. I
>> need to create a georreferenced/rectified Geotiff with this data and, to do
>> that, I need lat and Long. How can I do this?
>>
>> Thanks
>>
>> Best regards,
>> Luisa Pe?a
>> S.Paulo, Brazil
>> ------------------------------------------------------------------------
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --------------------------------------------------------------------------------
> Plymouth Marine Laboratory
>
> Registered Office:
> Prospect Place The Hoe
> Plymouth  PL1 3DH
>
> Website: www.pml.ac.uk
> Registered Charity No. 1091222
> PML is a company limited by guarantee
> registered in England & Wales
> company number 4178503
>
> PML is a member of the Plymouth Marine Sciences Partnership
> Website: www.pmsp.org.uk--------------------------------------------------------------------------------
> This e-mail, its content and any file attachments are confidential.
>
> If you have received this e-mail in error please do not copy, disclose it
> to any third party or use the contents or attachments in any way. Please
> notify the sender by replying to this e-mail or e-mail forinfo@pml.ac.ukand then delete the email without making any copies or using it in any other
> way.
>
> The content of this message may contain personal views which are not the
> views of Plymouth Marine Laboratory unless specifically stated.
>
> You are reminded that e-mail communications are not secure and may contain
> viruses. Plymouth Marine Laboratory accepts no liability for any loss or
> damage which may be caused by viruses.
>
> --------------------------------------------------------------------------------
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100218/875afa05/attachment.html
From jason.roberts at duke.edu  Thu Feb 18 13:52:30 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Thu Feb 18 13:52:41 2010
Subject: [gdal-dev] Nullable fields in OGR
In-Reply-To: <201002181909.07072.even.rouault@mines-paris.org>
References: <01d201cab0c0$fc6afd80$f540f880$%roberts@duke.edu>
	<201002181909.07072.even.rouault@mines-paris.org>
Message-ID: <020901cab0cb$86c61aa0$94524fe0$@roberts@duke.edu>

Even and Frank, thanks for your replies. I am a little confused because you
each appeared to describe different behaviors.

Frank said:

> There is currently no way to test if a datastore supports the concept
> of NULL fields, but if it does not it should just write a default value
> (0.0, empty string, etc).

Even said:

> For relational databases such as SQLite, 
> Postgres or MySQL, this is also supported, unless if you try to write a
NULL 
> value and the schema of the table constraints the column to be non
NULLable, 
> you'll get an error when inserting/updating the feature.

Which one is correct, or is it decided on a per-driver basis, with no policy
specified by the OGR team? If this is too much trivia for you bother with,
let me know and I will try to determine it by looking at the code.

It would be nice if a future version of OGRFieldDefn allowed the caller to
interrogate whether a field can be set to NULL. If it cannot be done, my
personal preference would be for Even's behavior to occur: that
OGRLayer::CreateFeature or SetFeature fails if a NULL field is not allowed
by the underlying format. If NULLs are silently translated to 0.0, empty
string, etc, this could be very bad for certain applications. It would be
nice to protect the user from this, so he doesn't have to remember which
formats support NULL and which do not. I would be happy to create a ticket
if you thought this was worthwhile.

Even, you mentioned that the shapefile driver supports NULL fields. My
understanding is that shapefiles do not support NULL, at least not according
to ESRI. The only exception are date fields, which sort of support NULL. For
more on that, see
http://webhelp.esri.com/arcgisdesktop/9.3/index.cfm?TopicName=Geoprocessing%
20considerations%20for%20shapefile%20output. Does OGR do something
different?

Thanks,
Jason

-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Thursday, February 18, 2010 1:09 PM
To: gdal-dev@lists.osgeo.org
Cc: Jason Roberts
Subject: Re: [gdal-dev] Nullable fields in OGR

Le Thursday 18 February 2010 18:37:04 Jason Roberts, vous avez ?crit?:
> Many relational databases allow fields to be set to NULL. Is this
supported
> in OGR? How does one detect whether a field is nullable or not?

All fields in OGRFeature are nullable. I think most OGR drivers will support

writing features with null fields but this must be checked on a case by case

basis. In theory, all drivers should check if the field is null or not. I
can 
imagine that some specialized format could fail if some given compulsory 
fields are unset. From a quick look, drivers such as Shape, BNA, GML, KML, 
GPX, etc.. support null fields.  For relational databases such as SQLite, 
Postgres or MySQL, this is also supported, unless if you try to write a NULL

value and the schema of the table constraints the column to be non NULLable,

you'll get an error when inserting/updating the feature.

>
>
>
> Looking at the class documentation, I see functions OGRFeature::IsFieldSet
> and OGRFeature::UnsetField. Are these intended for checking whether a
field
> is NULL and setting it to NULL?

Yes

> Or are they used for something else, such 
> as determining which fields have been modified by a caller prior to him
> calling OGRLayer::SetFeature?
>
>
>
> When I looked at OGRFieldDefn, I could not find a method that might be
> intended for checking whether a field was nullable (e.g.
> OGRFieldDefn::IsUnsettable).

It doesn't exist. You can always nullify a field in OGRFeature. But there's 
currently no API to be sure that writing it with OGRLayer::SetFeature() or 
OGRLayer::CreateFeature() will actually work.

>
> A while back, Mateusz asked this:
> > Yes. Also, most applications I've seen using OGR do define their own
> >
> > data models and translate OGRFeature to features of their own types.
> >
> > Perhaps it would be interesting to know why they don't use OGRFeature
> >
> > as a part of their data model, what's missing...
>
> I am currently evaluating whether or not I should use OGRFeature directly
> in a data model, or wrap it. Without nullability, I am probably inclined
to
> wrap it. As I have mentioned previously on gdal-dev, I'm trying to build
> something that wraps OGR and ArcGIS APIs behind a common abstraction, to
> allow development of tools that work with both. ArcGIS supports
nullability
> and it is useful in many situations, so I'd like to cleanly preserve it in
> my abstraction, even if OGR does not presently support it.
>
>
>
> Thanks for any thoughts you have,
>
>
>
> Jason



From warmerdam at pobox.com  Thu Feb 18 14:36:16 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 18 14:36:13 2010
Subject: [gdal-dev] Nullable fields in OGR
In-Reply-To: <020901cab0cb$86c61aa0$94524fe0$@roberts@duke.edu>
References: <01d201cab0c0$fc6afd80$f540f880$%roberts@duke.edu>
	<201002181909.07072.even.rouault@mines-paris.org>
	<020901cab0cb$86c61aa0$94524fe0$@roberts@duke.edu>
Message-ID: <4B7D96B0.3030503@pobox.com>

Jason Roberts wrote:
> Even and Frank, thanks for your replies. I am a little confused because you
> each appeared to describe different behaviors.
> 
> Frank said:
> 
>> There is currently no way to test if a datastore supports the concept
>> of NULL fields, but if it does not it should just write a default value
>> (0.0, empty string, etc).
> 
> Even said:
> 
>> For relational databases such as SQLite, 
>> Postgres or MySQL, this is also supported, unless if you try to write a
> NULL 
>> value and the schema of the table constraints the column to be non
> NULLable, 
>> you'll get an error when inserting/updating the feature.
> 
> Which one is correct, or is it decided on a per-driver basis, with no policy
> specified by the OGR team? If this is too much trivia for you bother with,
> let me know and I will try to determine it by looking at the code.

Jason,

I imagine Even is correct about the behavior of some of the
RDBMS drivers.

> It would be nice if a future version of OGRFieldDefn allowed the caller to
> interrogate whether a field can be set to NULL. If it cannot be done, my
> personal preference would be for Even's behavior to occur: that
> OGRLayer::CreateFeature or SetFeature fails if a NULL field is not allowed
> by the underlying format. If NULLs are silently translated to 0.0, empty
> string, etc, this could be very bad for certain applications. It would be
> nice to protect the user from this, so he doesn't have to remember which
> formats support NULL and which do not. I would be happy to create a ticket
> if you thought this was worthwhile.

I'm personally ambivalent about this, but I have seen this (an IsNULLABLE
test) in other systems similar to OGR - for instance PCI's GDB.

> Even, you mentioned that the shapefile driver supports NULL fields. My
> understanding is that shapefiles do not support NULL, at least not according
> to ESRI. The only exception are date fields, which sort of support NULL. For
> more on that, see
> http://webhelp.esri.com/arcgisdesktop/9.3/index.cfm?TopicName=Geoprocessing%
> 20considerations%20for%20shapefile%20output. Does OGR do something
> different?

I believe Shapelib writes *** for numeric nulls, zeros for date nulls,
? for logical nulls and an empty string for other nulls.  That means, for
instance, that Shapelib and OGR cannot differentiate between empty string
fields and null string fields (they will be reported as NULL).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ragi at burhum.com  Thu Feb 18 14:30:11 2010
From: ragi at burhum.com (Ragi Y. Burhum)
Date: Thu Feb 18 14:37:02 2010
Subject: [gdal-dev] Nullable fields in OGR
Message-ID: <738927441002181130q530eb3b0g31fda814be0c6b95@mail.gmail.com>

Jason,

Having (successfully) built abstraction layers in the past to wrap
ArcGIS APIs (aka ArcObjects), OGR (and others) for other projects, I
would strongly advice you *NOT* do it. Why? Because you end up with
some API that looks **way** to similar to ArcObjects or OGR! So why
not use one of those APIs in the first place?

The only time I would suggest to do this is when there is a specific
datasource that has a model that is radically different than what is
presented by the data abstraction layer you are using (think XML,
NoSQL datastores, etc).

If this is not your case, then I would offer something that IMHO is a
better approach. Instead of creating a common abstraction, why not use
the extensibility model of 1) OGR to wrap ArcObjects or 2) viceversa ?

1) If you want to use simply OGR as your one abstraction layer, then
use the arcobjects driver for access ESRI APIs. Use the uncommitted
patch available at http://trac.osgeo.org/gdal/ticket/3332
With this you should be able to use ArcObjects inside OGR. Simply use
OGR as it is.

If there is something that you definitely need and it is not supported
by OGR abstractions (like your NULLs comment), bring it up in this
mailing list. If the GDAL/OGR models gets extended because your need
is identified as must have - then everyone benefits.

2) Currently, the only way to do this is by paying for an expensive
FME extension and even then there are many things you cannot do
(outside of the scope of this conversation). You can also use the
ArcObjects extensibility model (not trivial) and create your own OGR
Workspace that can be accessed through the ESRI tools. I have a
half-way implementation of this which I haven't worked had time (nor
energy/will) to work on. I would be happy to share this code with you
if you want to work together on finishing it.

My two cents,

- Ragi

> Date: Thu, 18 Feb 2010 12:37:04 -0500
> From: "Jason Roberts" <jason.roberts@duke.edu>
> Subject: [gdal-dev] Nullable fields in OGR
> To: "'gdal-dev'" <gdal-dev@lists.osgeo.org>
> Message-ID: <01d201cab0c0$fc6afd80$f540f880$@roberts@duke.edu>
> Content-Type: text/plain; charset="us-ascii"
>
> Many relational databases allow fields to be set to NULL. Is this supported
> in OGR? How does one detect whether a field is nullable or not?
>
>
>
> Looking at the class documentation, I see functions OGRFeature::IsFieldSet
> and OGRFeature::UnsetField. Are these intended for checking whether a field
> is NULL and setting it to NULL? Or are they used for something else, such as
> determining which fields have been modified by a caller prior to him calling
> OGRLayer::SetFeature?
>
>
>
> When I looked at OGRFieldDefn, I could not find a method that might be
> intended for checking whether a field was nullable (e.g.
> OGRFieldDefn::IsUnsettable).
>
>
>
> A while back, Mateusz asked this:
>
>
>
>> Yes. Also, most applications I've seen using OGR do define their own
>
>> data models and translate OGRFeature to features of their own types.
>
>> Perhaps it would be interesting to know why they don't use OGRFeature
>
>> as a part of their data model, what's missing...
>
>
>
> I am currently evaluating whether or not I should use OGRFeature directly in
> a data model, or wrap it. Without nullability, I am probably inclined to
> wrap it. As I have mentioned previously on gdal-dev, I'm trying to build
> something that wraps OGR and ArcGIS APIs behind a common abstraction, to
> allow development of tools that work with both. ArcGIS supports nullability
> and it is useful in many situations, so I'd like to cleanly preserve it in
> my abstraction, even if OGR does not presently support it.
>
>
>
> Thanks for any thoughts you have,
>
>
>
> Jason
From ksshannon at gmail.com  Thu Feb 18 14:50:32 2010
From: ksshannon at gmail.com (Kyle Shannon)
Date: Thu Feb 18 14:50:49 2010
Subject: [gdal-dev] Projection issue with a netcdf file
In-Reply-To: <4B4CE230.4050203@pobox.com>
References: <c28f2e141001120859x4112e4acge1141c2c444b73d5@mail.gmail.com> 
	<4B4CADB1.90001@noaa.gov>
	<c28f2e141001120941q47a2d5f0r49e27a2f0757f563@mail.gmail.com> 
	<4B4CBEBE.7060400@noaa.gov>
	<c28f2e141001121238g2f5520aat7aa32ea5f8a9412f@mail.gmail.com> 
	<4B4CE230.4050203@pobox.com>
Message-ID: <c28f2e141002181150x526afbc2q9225eb6bd427653f@mail.gmail.com>

Frank,
I have been working on this issue for some time and the driver has a quirky
way of handling spatial reference parameters.  If a tag is not present, the
netCDFDataset::FetchCopyParms() function returns a default value.
Currently, those default values are all specified as 0.0.  Because of this,
there is no error and my projection is set with several 0.0 values.  I have
fixed the standard parallel issue on my local machine and it now supports
CF-1 tags(standard_parallel) as well as gdal tags (standard_parallel_1 and
standard_parallel_2).  I would like to continue to update the driver for
other tags that have been added to CF, but still support gdal tags as well,
but I am not sure if my programming methods will be suitable.  I would hate
to do a bunch of work and not be able to incorporate it.  Any thoughts on
how to go about this?

kss
# ===================
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406) 829-6954
kshannon@fs.fed.us
# ===================


On Tue, Jan 12, 2010 at 1:57 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Kyle Shannon wrote:
>
>> After a little digging, it appears that the netCDF driver does not support
>> the tag:
>>
>> Lambert_Conformal:standard_parallel
>>
>> it supports:
>> Lambert_Conformal:standard_parallel_1
>> and:
>> Lambert_Conformal:standard_parallel_2
>>
>> I am not sure if the tag is out of specification, or if the driver needs
>> to be updated.  I also notice OGRSpatialReference has a separate function
>> for setting a Lambert Conformal Conic with single parallel:
>>
>> OGRErr SetLCC1SP( *double* dfCenterLat, *double* dfCenterLong, ...
>>
>> but this is not referenced in the netCDF driver.
>>
>> So, my next question is:
>> Can you specify the value of SP_1 and SP_2 as the same parallel in the
>> standard LCC, or do you have to set LCC1SP
>>
>> Thanks everyone for your patience,
>>
>
> Kyle,
>
> Good investigating.  I'd suggest filing a ticket, ideally referencing
> an example file.  It should be fairly easily added.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100218/0123c5f0/attachment.html
From warmerdam at pobox.com  Thu Feb 18 14:58:37 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 18 14:58:26 2010
Subject: [gdal-dev] Configuration Options
Message-ID: <4B7D9BED.9000506@pobox.com>

Folks,

I have established a topic in the wiki to discuss ConfigOptions, feel free
to flesh out as appropriate and cross link where needed.

   http://trac.osgeo.org/gdal/wiki/ConfigOptions

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Thu Feb 18 15:02:14 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 18 15:02:08 2010
Subject: [gdal-dev] Projection issue with a netcdf file
In-Reply-To: <c28f2e141002181150x526afbc2q9225eb6bd427653f@mail.gmail.com>
References: <c28f2e141001120859x4112e4acge1141c2c444b73d5@mail.gmail.com> 
	<4B4CADB1.90001@noaa.gov>
	<c28f2e141001120941q47a2d5f0r49e27a2f0757f563@mail.gmail.com> 
	<4B4CBEBE.7060400@noaa.gov>
	<c28f2e141001121238g2f5520aat7aa32ea5f8a9412f@mail.gmail.com> 
	<4B4CE230.4050203@pobox.com>
	<c28f2e141002181150x526afbc2q9225eb6bd427653f@mail.gmail.com>
Message-ID: <4B7D9CC6.3020208@pobox.com>

Kyle Shannon wrote:
> Frank,
> I have been working on this issue for some time and the driver has a 
> quirky way of handling spatial reference parameters.  If a tag is not 
> present, the netCDFDataset::FetchCopyParms() function returns a default 
> value.  Currently, those default values are all specified as 0.0.  
> Because of this, there is no error and my projection is set with several 
> 0.0 values.  I have fixed the standard parallel issue on my local 
> machine and it now supports CF-1 tags(standard_parallel) as well as gdal 
> tags (standard_parallel_1 and standard_parallel_2).  I would like to 
> continue to update the driver for other tags that have been added to CF, 
> but still support gdal tags as well, but I am not sure if my programming 
> methods will be suitable.  I would hate to do a bunch of work and not be 
> able to incorporate it.  Any thoughts on how to go about this?

Kyle,

I would welcome you contributing improvements in this area.  I will attempt
to apply the patches even though I am not so familiar with the details of
the driver.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ksshannon at gmail.com  Thu Feb 18 15:13:55 2010
From: ksshannon at gmail.com (Kyle Shannon)
Date: Thu Feb 18 15:14:13 2010
Subject: [gdal-dev] Projection issue with a netcdf file
In-Reply-To: <4B7D9CC6.3020208@pobox.com>
References: <c28f2e141001120859x4112e4acge1141c2c444b73d5@mail.gmail.com> 
	<4B4CADB1.90001@noaa.gov>
	<c28f2e141001120941q47a2d5f0r49e27a2f0757f563@mail.gmail.com> 
	<4B4CBEBE.7060400@noaa.gov>
	<c28f2e141001121238g2f5520aat7aa32ea5f8a9412f@mail.gmail.com> 
	<4B4CE230.4050203@pobox.com>
	<c28f2e141002181150x526afbc2q9225eb6bd427653f@mail.gmail.com> 
	<4B7D9CC6.3020208@pobox.com>
Message-ID: <c28f2e141002181213m3371bdbr5e0a0cc371e14a25@mail.gmail.com>

Frank,
I would hold off on that patch for a little bit, I just found an issue.
I also just replied to the other patch I submitted in trac.

kss
# ===================
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406) 829-6954
kshannon@fs.fed.us
# ===================


On Thu, Feb 18, 2010 at 1:02 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Kyle Shannon wrote:
>
>> Frank,
>> I have been working on this issue for some time and the driver has a
>> quirky way of handling spatial reference parameters.  If a tag is not
>> present, the netCDFDataset::FetchCopyParms() function returns a default
>> value.  Currently, those default values are all specified as 0.0.  Because
>> of this, there is no error and my projection is set with several 0.0 values.
>>  I have fixed the standard parallel issue on my local machine and it now
>> supports CF-1 tags(standard_parallel) as well as gdal tags
>> (standard_parallel_1 and standard_parallel_2).  I would like to continue to
>> update the driver for other tags that have been added to CF, but still
>> support gdal tags as well, but I am not sure if my programming methods will
>> be suitable.  I would hate to do a bunch of work and not be able to
>> incorporate it.  Any thoughts on how to go about this?
>>
>
> Kyle,
>
> I would welcome you contributing improvements in this area.  I will attempt
> to apply the patches even though I am not so familiar with the details of
> the driver.
>
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100218/e21b73c7/attachment.html
From gregor at hostgis.com  Thu Feb 18 15:15:01 2010
From: gregor at hostgis.com (Gregor at HostGIS)
Date: Thu Feb 18 15:15:10 2010
Subject: [gdal-dev] A palette for gdaldem color relief?
Message-ID: <4B7D9FC5.6040102@hostgis.com>

Hey guys.

Does anyone have a good palette for use with gdaldem's "colorrelief" 
mode? I have a tough time with colors, and figure that somebody has 
already put together a nice green-brown-white set of colors.

The spatial region is New Zealand, so it's land with surrounding sea, a 
lot of low and hills.

-- 
HostGIS, Open Source solutions for the global GIS community
Greg Allensworth - SysAdmin, Programmer, GIS Person, Security
    Network+   Server+   A+   Security+   Linux+
    PHP   PostgreSQL   MySQL   DHTML/JavaScript/AJAX

"No one cares if you can back up ? only if you can recover."
From mateusz at loskot.net  Thu Feb 18 15:23:22 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Feb 18 15:24:06 2010
Subject: [gdal-dev] Nullable fields in OGR
In-Reply-To: <01d201cab0c0$fc6afd80$f540f880$@roberts@duke.edu>
References: <01d201cab0c0$fc6afd80$f540f880$@roberts@duke.edu>
Message-ID: <afb5ea8b0957dcdd54d599a7d8046bac.squirrel@loskot.net>

Jason Roberts wrote:
> A while back, Mateusz asked this:
>> Yes. Also, most applications I've seen using OGR do define their own
>> data models and translate OGRFeature to features of their own types.
>> Perhaps it would be interesting to know why they don't use OGRFeature
>> as a part of their data model, what's missing...
>
> I am currently evaluating whether or not I should use OGRFeature directly
> in a data model, or wrap it. Without nullability, I am probably inclined
> to wrap it. As I have mentioned previously on gdal-dev, I'm trying
> to build something that wraps OGR and ArcGIS APIs behind a common
> abstraction, to allow development of tools that work with both.

I have no interest in trying to convince you to not to do it, but my name
appeared, so I feel entitled to share comment.

I'd be careful as abstractions of abstractions can easily lead to
fat beasts which can do everything, but are complex as hell where
nobody understands what is what and how it actually works.

Wrapper, namely adapter pattern, usually means translation of one
interface to another, likely to interface which has common denominator
with something else. It is about structure of software components.

However, translation between interfaces, does not mean translation between
semantics. The latter problem belongs to domain of data models and ORM.
You will most likely have to deal with both problems. The API translation
should be a straightforward task. ORM usually introduces the whole pile of
complexity (see software pieces like FDO).

My point is, I doubt there is a point in developing such thing.

Best regards,
-- 
Mateusz Loskot
http://mateusz.loskot.net

From Chris.Barker at noaa.gov  Thu Feb 18 15:39:29 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu Feb 18 15:34:47 2010
Subject: [gdal-dev] Best way to add geo-referencing to a PNG
Message-ID: <4B7DA581.9040101@noaa.gov>

Hi folks,

I have a set of PNGs that I would like to add geo-referencing to. 
Frankly, I'm not sure what projection they are in, but I do know the 
bounding box in lat-long, and I think they are simple geo-coordinates.

I tried adding a *.pgw "world file", that looks like this:

0.04430379
0.0
0.0
-0.03201024
-85.0
45.0

That seems to get the basics: QGIS puts it in the right place on the 
map, and gdal_translate seems to be able to make a geotiff out of it. 
However, I'd like to be able to put a bit more information in, like that 
it's wgs84, and geo-coordinates. How can I do that? It seems an 
*.aux.xml file should be able to do what I want. but I don't what to put 
in that.

Has anyone got a sample that I could follow?

Or is there another way?

-Chris





-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From warmerdam at pobox.com  Thu Feb 18 15:35:27 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 18 15:35:17 2010
Subject: [gdal-dev] Motion: Commit Access for Kyle Shannon
Message-ID: <4B7DA48F.2020900@pobox.com>

Motion: Extend GDAL/OGR Commit Access to Kyle Shannon.

---

Folks,

Kyle has been working with GDAL for a while - I first noticed him when
he started adding himself to the cc: list of lots of bugs.  He has a
particular interest in improving the netcdf driver, and as that driver
is not really actively maintained currently, I'm keen to give him convenient
access.

He has already submitted a few patches, for:
   http://trac.osgeo.org/gdal/ticket/3425
   http://trac.osgeo.org/gdal/ticket/3324
   http://trac.osgeo.org/gdal/ticket/3255

Kyle, could you reply to this message indicating your agreement to the
guidelines listed in:

    http://trac.osgeo.org/gdal/wiki/rfc3_commiters

I will plan to monitor Kyle work for a while and provide feedback.

I'll start voting with my support:

+1 Frank

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From harsh.govind at spadac.com  Thu Feb 18 15:58:08 2010
From: harsh.govind at spadac.com (Harsh Govind)
Date: Thu Feb 18 15:58:39 2010
Subject: [gdal-dev] Motion: Commit Access for Kyle Shannon
In-Reply-To: <4B7DA48F.2020900@pobox.com>
References: <4B7DA48F.2020900@pobox.com>
Message-ID: <4B3B3C35D34C9345BC8914C199882E2817ED3355ED@SPATCEX003.spadac.com>

+1 Harsh

Regards,
Harsh Govind

________________________________________
From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam [warmerdam@pobox.com]
Sent: Thursday, February 18, 2010 03:35 PM
To: gdal-dev
Subject: [gdal-dev] Motion: Commit Access for Kyle Shannon

Motion: Extend GDAL/OGR Commit Access to Kyle Shannon.

---

Folks,

Kyle has been working with GDAL for a while - I first noticed him when
he started adding himself to the cc: list of lots of bugs.  He has a
particular interest in improving the netcdf driver, and as that driver
is not really actively maintained currently, I'm keen to give him convenient
access.

He has already submitted a few patches, for:
   http://trac.osgeo.org/gdal/ticket/3425
   http://trac.osgeo.org/gdal/ticket/3324
   http://trac.osgeo.org/gdal/ticket/3255

Kyle, could you reply to this message indicating your agreement to the
guidelines listed in:

    http://trac.osgeo.org/gdal/wiki/rfc3_commiters

I will plan to monitor Kyle work for a while and provide feedback.

I'll start voting with my support:

+1 Frank

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From Chris.Barker at noaa.gov  Thu Feb 18 17:01:56 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu Feb 18 16:57:08 2010
Subject: [gdal-dev] Motion: Commit Access for Kyle Shannon
In-Reply-To: <4B7DA48F.2020900@pobox.com>
References: <4B7DA48F.2020900@pobox.com>
Message-ID: <4B7DB8D4.9080303@noaa.gov>

Frank Warmerdam wrote:
> Motion: Extend GDAL/OGR Commit Access to Kyle Shannon.
> He has a
> particular interest in improving the netcdf driver

I don't have a vote, but +1 on netcdf work -- thanks, Kyle!

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From dmorissette at mapgears.com  Thu Feb 18 16:58:59 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu Feb 18 16:59:01 2010
Subject: [gdal-dev] Motion: Commit Access for Kyle Shannon
In-Reply-To: <4B7DA48F.2020900@pobox.com>
References: <4B7DA48F.2020900@pobox.com>
Message-ID: <4B7DB823.10404@mapgears.com>

Frank Warmerdam wrote:
> Motion: Extend GDAL/OGR Commit Access to Kyle Shannon.
> 
>

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From ksshannon at gmail.com  Thu Feb 18 16:55:53 2010
From: ksshannon at gmail.com (Kyle Shannon)
Date: Thu Feb 18 17:04:17 2010
Subject: [gdal-dev] Motion: Commit Access for Kyle Shannon
In-Reply-To: <4B7DA48F.2020900@pobox.com>
References: <4B7DA48F.2020900@pobox.com>
Message-ID: <c28f2e141002181355v9b00357j2ce519090ff2eeea@mail.gmail.com>

I agree to the rfc 3 guidelines.

kss
# ===================
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406) 829-6954
kshannon@fs.fed.us
# ===================


On Thu, Feb 18, 2010 at 1:35 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Motion: Extend GDAL/OGR Commit Access to Kyle Shannon.
>
> ---
>
> Folks,
>
> Kyle has been working with GDAL for a while - I first noticed him when
> he started adding himself to the cc: list of lots of bugs.  He has a
> particular interest in improving the netcdf driver, and as that driver
> is not really actively maintained currently, I'm keen to give him
> convenient
> access.
>
> He has already submitted a few patches, for:
>  http://trac.osgeo.org/gdal/ticket/3425
>  http://trac.osgeo.org/gdal/ticket/3324
>  http://trac.osgeo.org/gdal/ticket/3255
>
> Kyle, could you reply to this message indicating your agreement to the
> guidelines listed in:
>
>   http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I will plan to monitor Kyle work for a while and provide feedback.
>
> I'll start voting with my support:
>
> +1 Frank
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100218/b2c10451/attachment.html
From even.rouault at mines-paris.org  Thu Feb 18 17:05:58 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb 18 17:06:10 2010
Subject: [gdal-dev] Motion: Commit Access for Kyle Shannon
In-Reply-To: <4B7DA48F.2020900@pobox.com>
References: <4B7DA48F.2020900@pobox.com>
Message-ID: <201002182306.00258.even.rouault@mines-paris.org>

+1

Le Thursday 18 February 2010 21:35:27 Frank Warmerdam, vous avez ?crit?:
> Motion: Extend GDAL/OGR Commit Access to Kyle Shannon.
>
> ---
>
> Folks,
>
> Kyle has been working with GDAL for a while - I first noticed him when
> he started adding himself to the cc: list of lots of bugs.  He has a
> particular interest in improving the netcdf driver, and as that driver
> is not really actively maintained currently, I'm keen to give him
> convenient access.
>
> He has already submitted a few patches, for:
>    http://trac.osgeo.org/gdal/ticket/3425
>    http://trac.osgeo.org/gdal/ticket/3324
>    http://trac.osgeo.org/gdal/ticket/3255
>
> Kyle, could you reply to this message indicating your agreement to the
> guidelines listed in:
>
>     http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I will plan to monitor Kyle work for a while and provide feedback.
>
> I'll start voting with my support:
>
> +1 Frank
>
> Best regards,


From jason.roberts at duke.edu  Thu Feb 18 17:09:36 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Thu Feb 18 17:09:46 2010
Subject: [gdal-dev] Nullable fields in OGR
In-Reply-To: <738927441002181130q530eb3b0g31fda814be0c6b95@mail.gmail.com>
References: <738927441002181130q530eb3b0g31fda814be0c6b95@mail.gmail.com>
Message-ID: <025d01cab0e7$0f451500$2dcf3f00$@roberts@duke.edu>

Ragi,

Thanks for your thoughts. I know what you are saying; no need to create a
another useless layer. But by adopting one or the other APIs, I would get
locked in to whatever that API decided to support, with no way to work
around it other than to hack on a private copy of that particular API.

The "is nullable" topic is a case in point. Coming from the database world,
I personally think it is very useful to be able to interrogate a schema to
determine if a field is nullable, and in existing GIS tools I do it for
various reasons. But Frank W is lukewarm to adding it to OGR. Neither of us
is right or wrong, necessarily, but as owner of OGR (at least way more than
me), Frank will probably decide whether OGRFieldDefn deserves to be extended
to include IsNullable (or maybe it would be OGRLayer::FieldIsNullable). I
must live by that decision if I adopt OGR wholesale as my internal API.

(That said, I give big kudos to the GDAL and OGR team for listening to
people like me, fixing bugs that I report, and taking feature suggestions
into consideration. It is much nicer working in this environment than it
usually is working with ESRI, who, incidentally, required three years and
two releases to finally fix a bug I reported involving not being able to set
fields to NULL through their Python interface!)

I have not written off your suggestion #1 yet--having the ArcObjects
provider indeed makes it feasible to consider--but it may turn out to be too
onerous to constrain myself to OGR's interface.

One thing I have not mentioned is a need to support additional APIs. I am
loathe to mention this because it will be the nail in my coffin--others will
think I am crazy for sure--but the ultimate goal is to have a framework in
which I can write geoprocessing tools once, and have them work with multiple
GISes. I will probably target ArcGIS and QGIS as the first two. QGIS has
allows Python based plugins for geoprocessing, and it looked like they have
their own definition of a "layer" (probably built on OGR internally?). So
that might be a third API to wrap behind a common abstraction (or will there
be a QgisLayer driver for OGR?)

Jason

-----Original Message-----
From: rburhum@gmail.com [mailto:rburhum@gmail.com] On Behalf Of Ragi Y.
Burhum
Sent: Thursday, February 18, 2010 2:30 PM
To: gdal-dev@lists.osgeo.org; Jason Roberts
Subject: Re: [gdal-dev] Nullable fields in OGR

Jason,

Having (successfully) built abstraction layers in the past to wrap
ArcGIS APIs (aka ArcObjects), OGR (and others) for other projects, I
would strongly advice you *NOT* do it. Why? Because you end up with
some API that looks **way** to similar to ArcObjects or OGR! So why
not use one of those APIs in the first place?

The only time I would suggest to do this is when there is a specific
datasource that has a model that is radically different than what is
presented by the data abstraction layer you are using (think XML,
NoSQL datastores, etc).

If this is not your case, then I would offer something that IMHO is a
better approach. Instead of creating a common abstraction, why not use
the extensibility model of 1) OGR to wrap ArcObjects or 2) viceversa ?

1) If you want to use simply OGR as your one abstraction layer, then
use the arcobjects driver for access ESRI APIs. Use the uncommitted
patch available at http://trac.osgeo.org/gdal/ticket/3332
With this you should be able to use ArcObjects inside OGR. Simply use
OGR as it is.

If there is something that you definitely need and it is not supported
by OGR abstractions (like your NULLs comment), bring it up in this
mailing list. If the GDAL/OGR models gets extended because your need
is identified as must have - then everyone benefits.

2) Currently, the only way to do this is by paying for an expensive
FME extension and even then there are many things you cannot do
(outside of the scope of this conversation). You can also use the
ArcObjects extensibility model (not trivial) and create your own OGR
Workspace that can be accessed through the ESRI tools. I have a
half-way implementation of this which I haven't worked had time (nor
energy/will) to work on. I would be happy to share this code with you
if you want to work together on finishing it.

My two cents,

- Ragi

> Date: Thu, 18 Feb 2010 12:37:04 -0500
> From: "Jason Roberts" <jason.roberts@duke.edu>
> Subject: [gdal-dev] Nullable fields in OGR
> To: "'gdal-dev'" <gdal-dev@lists.osgeo.org>
> Message-ID: <01d201cab0c0$fc6afd80$f540f880$@roberts@duke.edu>
> Content-Type: text/plain; charset="us-ascii"
>
> Many relational databases allow fields to be set to NULL. Is this
supported
> in OGR? How does one detect whether a field is nullable or not?
>
>
>
> Looking at the class documentation, I see functions OGRFeature::IsFieldSet
> and OGRFeature::UnsetField. Are these intended for checking whether a
field
> is NULL and setting it to NULL? Or are they used for something else, such
as
> determining which fields have been modified by a caller prior to him
calling
> OGRLayer::SetFeature?
>
>
>
> When I looked at OGRFieldDefn, I could not find a method that might be
> intended for checking whether a field was nullable (e.g.
> OGRFieldDefn::IsUnsettable).
>
>
>
> A while back, Mateusz asked this:
>
>
>
>> Yes. Also, most applications I've seen using OGR do define their own
>
>> data models and translate OGRFeature to features of their own types.
>
>> Perhaps it would be interesting to know why they don't use OGRFeature
>
>> as a part of their data model, what's missing...
>
>
>
> I am currently evaluating whether or not I should use OGRFeature directly
in
> a data model, or wrap it. Without nullability, I am probably inclined to
> wrap it. As I have mentioned previously on gdal-dev, I'm trying to build
> something that wraps OGR and ArcGIS APIs behind a common abstraction, to
> allow development of tools that work with both. ArcGIS supports
nullability
> and it is useful in many situations, so I'd like to cleanly preserve it in
> my abstraction, even if OGR does not presently support it.
>
>
>
> Thanks for any thoughts you have,
>
>
>
> Jason

From ebwolf at gmail.com  Thu Feb 18 17:22:12 2010
From: ebwolf at gmail.com (Eric Wolf)
Date: Thu Feb 18 17:22:14 2010
Subject: [gdal-dev] Oracle OCI connection in Python OGR
In-Reply-To: <18bb6ba01002152143h29014c4bh3c1cc45aa8792c37@mail.gmail.com>
References: <20100216044210.24904.qmail@s466.sureserver.com>
	<18bb6ba01002152143h29014c4bh3c1cc45aa8792c37@mail.gmail.com>
Message-ID: <18bb6ba01002181422o4373bb9cs83bf88d0e11c70e1@mail.gmail.com>

Maybe it's just me... but...

I'm trying to connect to another Oracle instance, on a different machine,
using basically the same code as above. I get exactly the same results. In
this case, I've tried Python 2.6.4 with GDAL 1.6.0 and Python 2.4.1 with
GDAL 1.5.2. I can connect with OGR2OGR.EXE in the same environment but
cannot connect with OGR. The Oracle instance is 11.2.0.1.0.

I'm probably going setup my own build environment for GDAL/OGR at home (on
the same system as the Oracle install). So I may just roll my own and see if
that helps. Although I wouldn't mind trying other's eggs.

-Eric

-=--=---=----=----=---=--=-=--=---=----=---=--=-=-
Eric B. Wolf                    New! 720-334-7734
USGS Geographer
Center of Excellence in GIScience
PhD Student
CU-Boulder - Geography

GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt


On Mon, Feb 15, 2010 at 10:43 PM, Eric Wolf <ebwolf@gmail.com> wrote:

> Thanks Ivan,
>
> NLS_LANGUAGE = AMERCAN
>
> Reading shapefile works (still).
>
> Rather aggravating... I may try it on another system to see what I get.
>
> -Eric
>
> -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
> Eric B. Wolf                    New! 720-334-7734
> USGS Geographer
> Center of Excellence in GIScience
> PhD Student
> CU-Boulder - Geography
>
> GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt
>
>
>
> On Mon, Feb 15, 2010 at 9:42 PM, Ivan Lucena <ivan.lucena@pmldnet.com>wrote:
>
>> Eric,
>>
>> Sorry for my typo. I mean, "it was a good clue".
>>
>> I did a quit test using GDAL 1.8dev, the trunk version. I build the python
>> wrapper myself by running "setup.py bdist_wininst" with Python 2.5.4. That
>> generates "GDAL-1.7.0.win32-py2.5.exe".
>>
>> That is how it goes:
>>
>> Python 2.5.4 (r254:67916, Dec 23 2008, 15:10:54) [MSC v.1310 32 bit
>> (Intel)] on win32
>> Type "help", "copyright", "credits" or "license" for more information.
>> >>> from osgeo import ogr
>> >>> ds = ogr.Open("OCI:scott/tiger@orcl")
>> >>> ly = ds.GetLayer(0)
>> >>> ly.GetName()
>> 'ROADS'
>> >>>
>>
>> No problem here.
>>
>> I believe that you should use a GDAL/Python wrapper compatible (UNICODE)
>> with the Python you have.
>>
>> By the way, what is the character set of your database?
>>
>> select * from NLS_DATABASE_PARAMETERS;
>>
>> There is also the NLS_LANG. NLS_LANG is set as a local environment
>> variable on UNIX and is set in the registry on Windows.
>>
>> I just following that clue, but can you use ogr.Open() with a local file,
>> like a shape file?
>>
>> Best regards,
>>
>> Ivan
>>
>>
>>
>>
>> >  -------Original Message-------
>> >  From: Eric Wolf <ebwolf@gmail.com>
>> >  To: gdal-dev <gdal-dev@lists.osgeo.org>
>> >  Subject: Re: [gdal-dev] Oracle OCI connection in Python OGR
>> >  Sent: Feb 15 '10 17:47
>> >
>> >  I'm beginning to think something is wrong at my end. I just installed
>> >  Python 2.5, GDAL 1.5 and cx_Oracle for Python 2.5. I'm still getting
>> >  the same behavior. cx_Oracle works, OGR doesn't.
>> >
>> >
>> >  Is the clue in my last email? I mean, the Unicode version of cx_Oracle
>> >  didn't work but the non-Unicode version did work. Is the OGR OCI driver
>> >  compiled for Unicode?
>> >
>> >
>> >  -Eric
>> >
>> >  -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
>> >  Eric B. Wolf                    New! 720-334-7734
>> >  USGS Geographer
>> >  Center of Excellence in GIScience
>> >  PhD Student
>> >  CU-Boulder - Geography
>> >
>> >  GPG Public Key: [LINK: http://www.h4h.net/ebwolf.public.key.txt]
>> >  http://www.h4h.net/ebwolf.public.key.txt
>> >
>> >
>> >  On Mon, Feb 15, 2010 at 3:33 PM, Ivan <[LINK:
>> >  mailto:ivan.lucena@pmldnet.com] ivan.lucena@pmldnet.com> wrote:
>> >  Eric,
>> >
>> >
>> >  Eric Wolf wrote:
>> >  I'm running Oracle 11g on the same machine as the Python script.
>> >
>> >  I did test cx_Oracle and found that it wasn't working. I was using the
>> >  Unicode cx_Oracle 5.0.3. Switching to the non-Unicode cx_Oracle got it
>> >  working. But OGR is still not connecting.
>> >
>> >  Does OGR rely on cx_Oracle?
>> >
>> >  No it doesn't but I was a good to clue.
>> >
>> >
>> >  I think I'll try regressing to an older version of GDAL and see if it
>> >  works.
>> >
>> >  I running GDAL/OGR/Python/OCI on OpenSUSE and it works just fine. I am
>> >  going to test on Windows.
>> >
>> >  Regards,
>> >
>> >  Ivan
>> >
>> >
>> >  -Eric
>> >
>> >  -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
>> >  Eric B. Wolf                    New! 720-334-7734
>> >  USGS Geographer
>> >  Center of Excellence in GIScience
>> >  PhD Student
>> >  CU-Boulder - Geography
>> >
>> >  GPG Public Key: [LINK: http://www.h4h.net/ebwolf.public.key.txt]
>> >  http://www.h4h.net/ebwolf.public.key.txt
>> >
>> >
>> >  On Sun, Feb 14, 2010 at 12:45 PM, Abhay <[LINK:
>> >  mailto:abhay.menon@gmail.com] abhay.menon@gmail.com <mailto:[LINK:
>> >  mailto:abhay.menon@gmail.com] abhay.menon@gmail.com>> wrote:
>> >
>> >
>> >     On Fri, Feb 12, 2010 at 11:32 PM, Eric Wolf <[LINK:
>> >  mailto:ebwolf@gmail.com] ebwolf@gmail.com
>> >
>> >     <mailto:[LINK: mailto:ebwolf@gmail.com] ebwolf@gmail.com>> wrote:
>> >
>> >         Thanks for the replies. Sorry I didn't give more details
>> >  on the
>> >         environment.
>> >
>> >         I am running on Windows, at the command line, both ogr2ogr and
>> >         the python script.
>> >
>> >         Created an environment variable for ORACLE_SID=ORCL
>> >
>> >         I double-checked my OCI string by using sqlplus to connect:
>> >
>> >             sqlplus scott/tiger@orcl
>> >
>> >         This works fine. I changed the script to use that in the call
>> >  to
>> >         ogr.Open(). No luck.
>> >
>> >         I imported gdal and sprinkled print 'Error:',
>> >         gdal.GetLastErrorMsg() in my exception handlers. I got:
>> >
>> >             Unable to open Oracle connection None
>> >             Error:
>> >
>> >         Still no dice. If I take the same script and modify the
>> >         GetDriverByName and Open to use a shapefile, it works
>> >  perfectly.
>> >
>> >         -Eric
>> >
>> >
>> >         -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
>> >         Eric B. Wolf                    New! 720-334-7734
>> >         USGS Geographer
>> >         Center of Excellence in GIScience
>> >         PhD Student
>> >         CU-Boulder - Geography
>> >
>> >         GPG Public Key: [LINK:
>> >  http://www.h4h.net/ebwolf.public.key.txt]
>> >  http://www.h4h.net/ebwolf.public.key.txt
>> >
>> >
>> >         On Fri, Feb 12, 2010 at 6:56 AM, Abhay <[LINK:
>> >  mailto:abhay.menon@gmail.com] abhay.menon@gmail.com
>> >
>> >         <mailto:[LINK: mailto:abhay.menon@gmail.com]
>> >  abhay.menon@gmail.com>> wrote:
>> >
>> >
>> >             On Fri, Feb 12, 2010 at 2:48 PM, Eric Wolf <[LINK:
>> >  mailto:ebwolf@gmail.com] ebwolf@gmail.com
>> >
>> >
>> >             <mailto:[LINK: mailto:ebwolf@gmail.com]
>> >  ebwolf@gmail.com>> wrote:
>> >
>> >                 I'm using GDAL/OGR 1.6.1 with ActivePython
>> >  2.6.4-10 and
>> >                 cx_Oracle-5.0.3-11g. I am trying to connect to an
>> >  Oracle
>> >                 11g instance.
>> >
>> >                 This works:
>> >
>> >                     ogr2ogr -f "KML" emp.kml OCI:scott/tiger
>> >  "EMP"
>> >
>> >                 What am I doing wrong. This fails, ds is None:
>> >
>> >                 from osgeo import ogr
>> >
>> >                 try:
>> >                     d = ogr.GetDriverByName('OCI')
>> >                 except:
>> >                     print "Unable to GetDriverByName"
>> >                     quit()
>> >
>> >                 ds = None
>> >
>> >                 try:
>> >                     ds = ogr.Open('OCI:scott/tiger')
>> >                 except:
>> >                     print "Unable to open OCI connection"
>> >                     quit()
>> >
>> >                 if ds is None:
>> >                     print "Unable to open Oracle connection", ds
>> >                     quit()
>> >
>> >                 lyr = ds.GetLayerByName('EMP')
>> >                 number = lyr.GetFeatureCount()
>> >
>> >                 print "Features: " + str(number)
>> >
>> >
>> >                 -=--=---=----=----=---=--=-=--=---=----=---=--=-=-
>> >                 Eric B. Wolf                    New!
>> >  720-334-7734
>> >                 USGS Geographer
>> >                 Center of Excellence in GIScience
>> >                 PhD Student
>> >                 CU-Boulder - Geography
>> >
>> >                 GPG Public Key: [LINK:
>> >  http://www.h4h.net/ebwolf.public.key.txt]
>> >  http://www.h4h.net/ebwolf.public.key.txt
>> >
>> >                 _______________________________________________
>> >                 gdal-dev mailing list
>> >                 [LINK: mailto:gdal-dev@lists.osgeo.org]
>> >  gdal-dev@lists.osgeo.org <mailto:[LINK: mailto:
>> gdal-dev@lists.osgeo.org]
>> >  gdal-dev@lists.osgeo.org>
>> >
>> >                 [LINK:
>> >  http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>> >  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>> >
>> >             Hi Eric,
>> >
>> >             Form your mail it not clear what is cause of the
>> >  problem.
>> >
>> >             There 2 scenario here
>> >             1) you are on a remote machine form where your trying to
>> >             connect oracle server machine:
>> >
>> >             a) Have you installed any Oracle Client in your system.
>> >             Considering that you a
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100218/b3f3c83b/attachment.html
From jason.roberts at duke.edu  Thu Feb 18 17:22:59 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Thu Feb 18 17:23:12 2010
Subject: [gdal-dev] Nullable fields in OGR
In-Reply-To: <afb5ea8b0957dcdd54d599a7d8046bac.squirrel@loskot.net>
References: <01d201cab0c0$fc6afd80$f540f880$%roberts@duke.edu>
	<afb5ea8b0957dcdd54d599a7d8046bac.squirrel@loskot.net>
Message-ID: <026101cab0e8$ee2c1c90$ca8455b0$@roberts@duke.edu>

> I'd be careful as abstractions of abstractions can easily lead to
> fat beasts which can do everything, but are complex as hell where
> nobody understands what is what and how it actually works.

I believe I learned this as oopaholism, a disease in which someone becomes
so addicted to object orientation that they spend all of their time working
on frameworks that don't actually DO anything. :-)

Seriously, all I am trying to do is build some tools that can work in
multiple GISes without having rewriting large portions of the tools once for
each GIS. If that, in itself, is pointless or not doable at this moment in
time, then I guess I am crazy.

Jason

-----Original Message-----
From: Mateusz Loskot [mailto:mateusz@loskot.net] 
Sent: Thursday, February 18, 2010 3:23 PM
To: Jason Roberts
Cc: 'gdal-dev'
Subject: Re: [gdal-dev] Nullable fields in OGR

Jason Roberts wrote:
> A while back, Mateusz asked this:
>> Yes. Also, most applications I've seen using OGR do define their own
>> data models and translate OGRFeature to features of their own types.
>> Perhaps it would be interesting to know why they don't use OGRFeature
>> as a part of their data model, what's missing...
>
> I am currently evaluating whether or not I should use OGRFeature directly
> in a data model, or wrap it. Without nullability, I am probably inclined
> to wrap it. As I have mentioned previously on gdal-dev, I'm trying
> to build something that wraps OGR and ArcGIS APIs behind a common
> abstraction, to allow development of tools that work with both.

I have no interest in trying to convince you to not to do it, but my name
appeared, so I feel entitled to share comment.

I'd be careful as abstractions of abstractions can easily lead to
fat beasts which can do everything, but are complex as hell where
nobody understands what is what and how it actually works.

Wrapper, namely adapter pattern, usually means translation of one
interface to another, likely to interface which has common denominator
with something else. It is about structure of software components.

However, translation between interfaces, does not mean translation between
semantics. The latter problem belongs to domain of data models and ORM.
You will most likely have to deal with both problems. The API translation
should be a straightforward task. ORM usually introduces the whole pile of
complexity (see software pieces like FDO).

My point is, I doubt there is a point in developing such thing.

Best regards,
-- 
Mateusz Loskot
http://mateusz.loskot.net


From szekerest at gmail.com  Thu Feb 18 18:03:42 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Feb 18 18:03:45 2010
Subject: [gdal-dev] Motion: Commit Access for Kyle Shannon
In-Reply-To: <4B7DA48F.2020900@pobox.com>
References: <4B7DA48F.2020900@pobox.com>
Message-ID: <f3b73b7d1002181503r3872800bk454d6cf114883144@mail.gmail.com>

+1

Tamas



2010/2/18 Frank Warmerdam <warmerdam@pobox.com>

> Motion: Extend GDAL/OGR Commit Access to Kyle Shannon.
>
> ---
>
> Folks,
>
> Kyle has been working with GDAL for a while - I first noticed him when
> he started adding himself to the cc: list of lots of bugs.  He has a
> particular interest in improving the netcdf driver, and as that driver
> is not really actively maintained currently, I'm keen to give him
> convenient
> access.
>
> He has already submitted a few patches, for:
>  http://trac.osgeo.org/gdal/ticket/3425
>  http://trac.osgeo.org/gdal/ticket/3324
>  http://trac.osgeo.org/gdal/ticket/3255
>
> Kyle, could you reply to this message indicating your agreement to the
> guidelines listed in:
>
>   http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I will plan to monitor Kyle work for a while and provide feedback.
>
> I'll start voting with my support:
>
> +1 Frank
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100219/43ca035b/attachment.html
From hobu.inc at gmail.com  Thu Feb 18 20:49:16 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Thu Feb 18 20:54:07 2010
Subject: [gdal-dev] Motion: Commit Access for Kyle Shannon
In-Reply-To: <4B7DB823.10404@mapgears.com>
References: <4B7DA48F.2020900@pobox.com> <4B7DB823.10404@mapgears.com>
Message-ID: <7A28DEDD-42ED-4F06-8E39-470E538CE5B3@gmail.com>


On Feb 18, 2010, at 3:58 PM, Daniel Morissette wrote:

> Frank Warmerdam wrote:
>> Motion: Extend GDAL/OGR Commit Access to Kyle Shannon.
>> 
> 
> +1

+1

From warmerdam at pobox.com  Thu Feb 18 21:30:31 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 18 21:30:22 2010
Subject: [gdal-dev] Nullable fields in OGR
In-Reply-To: <025d01cab0e7$0f451500$2dcf3f00$@roberts@duke.edu>
References: <738927441002181130q530eb3b0g31fda814be0c6b95@mail.gmail.com>
	<025d01cab0e7$0f451500$2dcf3f00$@roberts@duke.edu>
Message-ID: <4B7DF7C7.5010508@pobox.com>

Jason Roberts wrote:
> Ragi,
> 
> Thanks for your thoughts. I know what you are saying; no need to create a
> another useless layer. But by adopting one or the other APIs, I would get
> locked in to whatever that API decided to support, with no way to work
> around it other than to hack on a private copy of that particular API.
> 
> The "is nullable" topic is a case in point. Coming from the database world,
> I personally think it is very useful to be able to interrogate a schema to
> determine if a field is nullable, and in existing GIS tools I do it for
> various reasons. But Frank W is lukewarm to adding it to OGR. Neither of us
> is right or wrong, necessarily, but as owner of OGR (at least way more than
> me), Frank will probably decide whether OGRFieldDefn deserves to be extended
> to include IsNullable (or maybe it would be OGRLayer::FieldIsNullable). I
> must live by that decision if I adopt OGR wholesale as my internal API.

Jason,

I would stress that it was important for GDAL to move to a project steering
committee model under OSGeo exactly so that things would not be unduely
constrained by what I was hot or cold about.  If you can a project developer
who is hot on the idea, and is willing to try and stick-handle an RFC on the
topic through, then the idea can get implemented.  But it is a non-trivial
change (once you update lots of drivers, implement tests, docs, etc) and
so it will take resources (volunteer, yours or otherwise) to make it happen.

Given the breadth of environments you would eventually like to write tools
for, it is *possible* you might want your own higher level API but I think
you would be better off looking for simplier, rather than more complicated
features or else your tools will still not work across everything.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jukka.rahkonen at mmmtike.fi  Fri Feb 19 03:43:43 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Feb 19 03:44:02 2010
Subject: [gdal-dev] Re: Best way to add geo-referencing to a PNG
References: <4B7DA581.9040101@noaa.gov>
Message-ID: <loom.20100219T093814-770@post.gmane.org>

Christopher Barker <Chris.Barker <at> noaa.gov> writes:

> That seems to get the basics: QGIS puts it in the right place on the 
> map, and gdal_translate seems to be able to make a geotiff out of it. 
> However, I'd like to be able to put a bit more information in, like that 
> it's wgs84, and geo-coordinates. How can I do that? It seems an 
> *.aux.xml file should be able to do what I want. but I don't what to put 
> in that.

Hi,

I would convert them to geotiffs with -a_srs option for telling it is in wgs84.

gdal_translate -of GTiff -a_srs epsg:4326 image.png image.tif

-Jukka Rahkonen-


From kimbesson1981 at gmail.com  Fri Feb 19 03:46:50 2010
From: kimbesson1981 at gmail.com (Kim Besson)
Date: Fri Feb 19 03:52:48 2010
Subject: [gdal-dev] Add GCP's to a file
Message-ID: <8fb908a31002190046k23d22440y5fdfa339bf481e22@mail.gmail.com>

Greetings

I have a file, in HDF4 format, and I need to add GCP's points in order to
later warp that file. How can I add that information to a HDF? it can be a
Geotiff if it's easier.

Thanks

Kim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100219/15876e40/attachment.html
From jukka.rahkonen at mmmtike.fi  Fri Feb 19 05:02:47 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Feb 19 05:03:41 2010
Subject: [gdal-dev] Re: Add GCP's to a file
References: <8fb908a31002190046k23d22440y5fdfa339bf481e22@mail.gmail.com>
Message-ID: <loom.20100219T105715-674@post.gmane.org>

Kim Besson <kimbesson1981 <at> gmail.com> writes:

> 
> 
> Greetings
> 
> I have a file, in HDF4 format, and I need to add GCP's points in order to
later warp that file. How can I add that information to a HDF? it can be a
Geotiff if it's easier.

Hi,

Gdal_translation has on option
 [-gcp pixel line easting northing [elevation]]*

I know it works with tiffs but I have not tried it with HDF4. Some working
examples and considerations about this is hidden inside a document
http://www.scangis.org/scangis2007/papers/r3_rahkonen.pdf

-Jukka Rahkonen-

From ancl at pml.ac.uk  Fri Feb 19 05:11:21 2010
From: ancl at pml.ac.uk (Andrew Clegg)
Date: Fri Feb 19 05:30:12 2010
Subject: [gdal-dev] Warp a file from two separate Lat and Long
In-Reply-To: <979f23b11002181044y7b1c7343sf29e4d531cd8e8dc@mail.gmail.com>
References: <979f23b11002180849h737e25fre76647905a4bfc34@mail.gmail.com>	
	<4B7D7ACA.1010501@pml.ac.uk>
	<979f23b11002181044y7b1c7343sf29e4d531cd8e8dc@mail.gmail.com>
Message-ID: <4B7E63C9.2050506@pml.ac.uk>

Hi Luisa,

I think you would need to create the VRTs manually - although it would 
be a fairly easy task to automate.

Regards,

Andrew

Luisa Pe?a wrote:
>
> Hi Andrew
>
> But How can I create those VRT, I never used those, from my original 
> binaries datasets  (HDF)? It seems that VRT is the key for my problem. 
> But I never used it before
>
> Thanks for your help
>
> Luisa
> 2010/2/18 Andrew Clegg <ancl@pml.ac.uk <mailto:ancl@pml.ac.uk>>
>
>     Hi Luisa,
>
>     I've tried something similar in the past with satellite data. I
>     had 3 files, containing latitude, longitude and value stored as
>     floats. I had some very minor success with the following solution
>     (I got out an image but it seemed to drop to a very low
>     resolution). I'm posting it more in the hope that someone else may
>     be able to spot what I did wrong, because I would still really
>     like to be able to do this.
>
>     My approach was to create a virtual dataset for each file:
>
>     sst.vrt (the values):
>
>     <VRTDataset rasterXSize="1296" rasterYSize="2030">
>      <Metadata domain="GEOLOCATION">
>         <MDI key="X_DATASET">lon.vrt</MDI>
>         <MDI key="X_BAND">1</MDI>
>         <MDI key="Y_DATASET">lat.vrt</MDI>
>         <MDI key="Y_BAND">1</MDI>
>         <MDI key="PIXEL_OFFSET">0</MDI>
>         <MDI key="LINE_OFFSET">0</MDI>
>         <MDI key="PIXEL_STEP">1</MDI>
>         <MDI key="LINE_STEP">1</MDI>
>      </Metadata>
>        <VRTRasterBand dataType="Float32" band="1"
>     subClass="VRTRawRasterBand">
>        <SourceFilename relativetoVRT="1">sst.img</SourceFilename>
>        <ImageOffset>0</ImageOffset>
>        <PixelOffset>4</PixelOffset>
>        <LineOffset>5184</LineOffset>
>        <ByteOrder>LSB</ByteOrder>
>      </VRTRasterBand>
>     </VRTDataset>
>
>     lon.vrt (longitude): (latitude is basically the same)
>
>     <VRTDataset rasterXSize="1296" rasterYSize="2030">
>      <VRTRasterBand dataType="Float32" band="1"
>     subClass="VRTRawRasterBand">
>         <SourceFilename relativetoVRT="1">lon.img</SourceFilename>
>         <ImageOffset>0</ImageOffset>
>         <PixelOffset>4</PixelOffset>
>         <LineOffset>5184</LineOffset>
>         <ByteOrder>LSB</ByteOrder>
>      </VRTRasterBand>
>     </VRTDataset>
>
>     I then tried to run gdalwarp on sst.vrt, trying either '-geoloc'
>     or '-to METHOD=GEOLOC_ARRAY'.
>
>     Regards,
>
>     Andrew Clegg
>     Plymouth Marine Laboratory
>
>     Luisa Pe?a wrote:
>
>         Greetings
>         I've used GDAL a few times but this is the first time that I'm
>         lost on what I can do with GDAL to solve my problem. I have 3
>         separate files, one with my data, other with Lattitude and
>         another with Longitude. They have the same size and, as an
>         example,  it means that Pixel (1,1) of data is located in
>         latitude retrieved from Pixel (1,1) from latitude and
>         longitude (pixel (1,1) from longitude). All of them are in
>         WGS84 but without GCP's points. I need to create a
>         georreferenced/rectified Geotiff with this data and, to do
>         that, I need lat and Long. How can I do this?
>
>         Thanks
>
>         Best regards,
>         Luisa Pe?a
>         S.Paulo, Brazil
>         ------------------------------------------------------------------------
>
>
>
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>     --------------------------------------------------------------------------------
>     Plymouth Marine Laboratory
>
>     Registered Office:
>     Prospect Place The Hoe
>     Plymouth  PL1 3DH
>
>     Website: www.pml.ac.uk <http://www.pml.ac.uk>
>     Registered Charity No. 1091222
>     PML is a company limited by guarantee
>     registered in England & Wales
>     company number 4178503
>
>     PML is a member of the Plymouth Marine Sciences Partnership
>     Website: www.pmsp.org.uk <http://www.pmsp.org.uk>
>     --------------------------------------------------------------------------------
>     This e-mail, its content and any file attachments are confidential.
>
>     If you have received this e-mail in error please do not copy,
>     disclose it to any third party or use the contents or attachments
>     in any way. Please notify the sender by replying to this e-mail or
>     e-mail forinfo@pml.ac.uk <mailto:forinfo@pml.ac.uk> and then
>     delete the email without making any copies or using it in any
>     other way.
>
>     The content of this message may contain personal views which are
>     not the views of Plymouth Marine Laboratory unless specifically
>     stated.
>
>     You are reminded that e-mail communications are not secure and may
>     contain viruses. Plymouth Marine Laboratory accepts no liability
>     for any loss or damage which may be caused by viruses.
>     --------------------------------------------------------------------------------
>
>


--------------------------------------------------------------------------------
Plymouth Marine Laboratory
 
Registered Office:
Prospect Place 
The Hoe
Plymouth  PL1 3DH
 
Website: www.pml.ac.uk
Registered Charity No. 1091222
PML is a company limited by guarantee
registered in England & Wales
company number 4178503

PML is a member of the Plymouth Marine Sciences Partnership
Website: www.pmsp.org.uk 
--------------------------------------------------------------------------------
This e-mail, its content and any file attachments are confidential.

If you have received this e-mail in error please do not copy, disclose it to any third party or use the contents or attachments in any way. Please notify the sender by replying to this e-mail or e-mail forinfo@pml.ac.uk and then delete the email without making any copies or using it in any other way.

The content of this message may contain personal views which are not the views of Plymouth Marine Laboratory unless specifically stated.

You are reminded that e-mail communications are not secure and may contain viruses. Plymouth Marine Laboratory accepts no liability for any loss or damage which may be caused by viruses.
--------------------------------------------------------------------------------
From m.massing at warped-space.de  Fri Feb 19 05:46:08 2010
From: m.massing at warped-space.de (Manuel Massing)
Date: Fri Feb 19 06:01:18 2010
Subject: [gdal-dev] Re: Add GCP's to a file
In-Reply-To: <loom.20100219T105715-674@post.gmane.org>
References: <8fb908a31002190046k23d22440y5fdfa339bf481e22@mail.gmail.com>
	<loom.20100219T105715-674@post.gmane.org>
Message-ID: <201002191146.08596.m.massing@warped-space.de>

Hi,

> Gdal_translation has on option
>  [-gcp pixel line easting northing [elevation]]*

this should also work using the VRT output format, which has the advantage 
that the raster data doesn't need to be written to an intermediate file (VRT 
"wraps" the original data). 
E.g.:
gdal_translate [-gcp pixel line easting northing [elevation]]* -of VRT <input> 
<output> 

You can then gdalwarp the resulting vrt file. 

Incidentally, I wonder if there is a strong reason for not implementing a gcp 
option in gdalwarp itself?

Regards,

	Manuel

From j.l.h.hartmann at uva.nl  Fri Feb 19 06:08:55 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Fri Feb 19 06:09:02 2010
Subject: [gdal-dev] Re: Add GCP's to a file
In-Reply-To: <201002191146.08596.m.massing@warped-space.de>
References: <8fb908a31002190046k23d22440y5fdfa339bf481e22@mail.gmail.com>	<loom.20100219T105715-674@post.gmane.org>
	<201002191146.08596.m.massing@warped-space.de>
Message-ID: <4B7E7147.2030501@uva.nl>



On 19-2-2010 11:46, Manuel Massing wrote:
> Hi,
>
>    
>> Gdal_translation has on option
>>   [-gcp pixel line easting northing [elevation]]*
>>      
> this should also work using the VRT output format, which has the advantage
> that the raster data doesn't need to be written to an intermediate file (VRT
> "wraps" the original data).
> E.g.:
> gdal_translate [-gcp pixel line easting northing [elevation]]* -of VRT<input>
> <output>
>
> You can then gdalwarp the resulting vrt file.
>
> Incidentally, I wonder if there is a strong reason for not implementing a gcp
> option in gdalwarp itself?
>
>
>    
Thanks Miguel, I didn't know that you could warp with gcp's without 
creating an intermediate gcp-raster. I've often been wondering too why 
there is no -gcp option in gdalwarp.

Jan
From grevedan at hotmail.com  Fri Feb 19 15:19:48 2010
From: grevedan at hotmail.com (Dan Greve)
Date: Fri Feb 19 15:20:52 2010
Subject: [gdal-dev] Re: Add GCP's to a file
In-Reply-To: <4B7E7147.2030501@uva.nl>
References: <8fb908a31002190046k23d22440y5fdfa339bf481e22@mail.gmail.com>
	<loom.20100219T105715-674@post.gmane.org>,
	<201002191146.08596.m.massing@warped-space.de>,
	<4B7E7147.2030501@uva.nl>
Message-ID: <COL107-W35625BEED47B9A57845F9C7460@phx.gbl>


Question on the -gcp option in gdal_translate.  If i want to use it to specify the geographic referencing of the four corners do i need to specify the center of the pixel, or the UL of the pixel.  (e.g. -gcp 0 0 34 115 OR -gcp 0.5 0.5 34 115 )

Dan Greve
 		 	   		  
_________________________________________________________________
Hotmail: Powerful Free email with security by Microsoft.
http://clk.atdmt.com/GBL/go/201469230/direct/01/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100219/ad02871c/attachment.html
From rdewit.list at somethingspatial.com.au  Fri Feb 19 17:47:54 2010
From: rdewit.list at somethingspatial.com.au (Roald de Wit)
Date: Fri Feb 19 17:48:00 2010
Subject: [gdal-dev] GDAL 1.7 issues with SQLite creation from source without
	geometries
Message-ID: <4B7F151A.70601@somethingspatial.com.au>

Hi list,

I have the following issue: OGR 1.7.x cannot read the SQLite files it 
creates from a source *without geometries*.

I used the following GDAL:
- from http://vbkto.dyndns.org/sdk/
   (release-1310-gdal-1-7-mapserver-5-6.zip, based on r9799, r18849)
- on a WinXP machine
- having no other GDAL in my path

Simple example, try the following with attached CSV file.:

     ogr2ogr -F "SQLite" tasmania.sqlite tasmania_cities.csv

and then:

     ogrinfo tasmania.sqlite
     INFO: Open of `tasmania.sqlite'
            using driver `SQLite' successful.

No layers are found. With GDAL 1.6.x there is no problem.

I'm not sure if this is an issue with this specific build of GDAL or 
with GDAL in general (since I'm not aware of another recent GDAL with 
modern SQLite support built-in on Windows).

I contacted Tamas Szekeres off-line about the issue. He suggested it 
might be a problem with the SQLite driver, therefore I'm taking it to 
the gdal-dev list.

Is this a bug? If so, I'm happy to create a ticket in trac.

Regards,

Roald

-------------- next part --------------
A non-text attachment was scrubbed...
Name: tasmania_cities.csv
Type: text/csv
Size: 115 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100220/3f118d73/tasmania_cities.bin
From Chris.Barker at noaa.gov  Fri Feb 19 18:33:53 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Fri Feb 19 18:29:03 2010
Subject: [gdal-dev] Re: Best way to add geo-referencing to a PNG
In-Reply-To: <loom.20100219T093814-770@post.gmane.org>
References: <4B7DA581.9040101@noaa.gov>
	<loom.20100219T093814-770@post.gmane.org>
Message-ID: <4B7F1FE1.2060606@noaa.gov>

Jukka Rahkonen wrote:
> Christopher Barker <Chris.Barker <at> noaa.gov> writes:
> 
>> That seems to get the basics: QGIS puts it in the right place on the 
>> map, and gdal_translate seems to be able to make a geotiff out of it. 
>> However, I'd like to be able to put a bit more information in, like that 
>> it's wgs84, and geo-coordinates. How can I do that? It seems an 
>> *.aux.xml file should be able to do what I want. but I don't what to put 
>> in that.
> 
> I would convert them to geotiffs with -a_srs option for telling it is in wgs84.
> 
> gdal_translate -of GTiff -a_srs epsg:4326 image.png image.tif

thanks -- by adding the world file, then using that to convert to 
geotiff, I do get what I want. I can now use gdal_translate to convert 
back to png, and I get a .aux.xml file that is what I want.

Thanks,

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From even.rouault at mines-paris.org  Fri Feb 19 19:38:01 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Feb 19 19:38:20 2010
Subject: [gdal-dev] GDAL 1.7 issues with SQLite creation from source
	without geometries
In-Reply-To: <4B7F151A.70601@somethingspatial.com.au>
References: <4B7F151A.70601@somethingspatial.com.au>
Message-ID: <201002200138.03540.even.rouault@mines-paris.org>

Roald,

Several points :

* I've tried with 1.6 branch, and even if it can list the tasmania_cities 
layer, it doesn't seem to be able to read the features in it, as a dumb 
geometry column name '(null)' was inserted by ogr2ogr into the 
geometry_columns table. Thus when reading the definition of the 
tasmania_cities layer, it will stop because it can't find the '(null)' 
column. See the output :

$  ogrinfo  -ro -al tasmania.sqlite
INFO: Open of `tasmania.sqlite'
      using driver `SQLite' successful.

Layer name: tasmania_cities
Geometry: None
Feature Count: 1
Layer SRS WKT:
(unknown)
city_name: String (0.0)
admin_name: String (0.0)
cntry_name: String (0.0)
status: String (0.0)
pop_class: String (0.0)
ERROR 1: Unable to find Geometry column '(null)'.

So 1.6 seems to be broken wit respect to non spatial databases.

* With OGR 1.7, no entry is added in the geometry_columns table for 
non-spatial tables (http://trac.osgeo.org/gdal/changeset/17990). But as the 
databases are created by default for spatial table support, ogrinfo won't 
list non spatial databases, which is a "specified" behaviour to avoid 
reporting tables such as geometry_columns or spatial_ref_sys.

To make things clearer, I've found at least 3 ways of making OGR 1.7 work with 
non spatial databases.

--> The cleanest one : Create a non-spatial databases that has no 
geometry_column table. You must pass the -dsco METADATA=NO option on the 
ogr2ogr command line. This option was broken before 1.7.0 - see 
http://trac.osgeo.org/gdal/ticket/2879 - , but databases created with -dsco 
METADATA=NO with 1.7.0 will be readable with 1.6.0

--> If your database contains the geometry_column table, only spatial tables 
are listed by default, unless you set the SQLITE_LIST_ALL_TABLES environment 
variable to YES when opening it with ogrinfo - or any other OGR utility. 
(this option is new in OGR 1.7.0)

--> Rather dirty. Pretend that your non spatial table is a spatial table with 
POINT geometry type for example. Add the -nlt POINT option on the ogr2ogr 
command line for that. The table will be registered as begin a POINT table, 
but no feature will have a geometry. Works with both 1.6.0 and 1.7.0

So, all in all, I think OGR 1.7 should work rather well when dealing with non 
spatial sqlite databases.

Best regards,

Even

Le Friday 19 February 2010 23:47:54 Roald de Wit, vous avez ?crit?:
> Hi list,
>
> I have the following issue: OGR 1.7.x cannot read the SQLite files it
> creates from a source *without geometries*.
>
> I used the following GDAL:
> - from http://vbkto.dyndns.org/sdk/
>    (release-1310-gdal-1-7-mapserver-5-6.zip, based on r9799, r18849)
> - on a WinXP machine
> - having no other GDAL in my path
>
> Simple example, try the following with attached CSV file.:
>
>      ogr2ogr -F "SQLite" tasmania.sqlite tasmania_cities.csv
>
> and then:
>
>      ogrinfo tasmania.sqlite
>      INFO: Open of `tasmania.sqlite'
>             using driver `SQLite' successful.
>
> No layers are found. With GDAL 1.6.x there is no problem.
>
> I'm not sure if this is an issue with this specific build of GDAL or
> with GDAL in general (since I'm not aware of another recent GDAL with
> modern SQLite support built-in on Windows).
>
> I contacted Tamas Szekeres off-line about the issue. He suggested it
> might be a problem with the SQLite driver, therefore I'm taking it to
> the gdal-dev list.
>
> Is this a bug? If so, I'm happy to create a ticket in trac.
>
> Regards,
>
> Roald


From rdewit.list at somethingspatial.com.au  Fri Feb 19 22:46:47 2010
From: rdewit.list at somethingspatial.com.au (Roald de Wit)
Date: Fri Feb 19 22:46:56 2010
Subject: [gdal-dev] GDAL 1.7 issues with SQLite creation from source
	without geometries
In-Reply-To: <201002200138.03540.even.rouault@mines-paris.org>
References: <4B7F151A.70601@somethingspatial.com.au>
	<201002200138.03540.even.rouault@mines-paris.org>
Message-ID: <4B7F5B27.4010701@somethingspatial.com.au>

Hi Even,

Thanks for the verbose response. Option 2 (SQLITE_LIST_ALL_TABLES=YES) 
is the easiest and best one for my use case : importing data from both 
spatial and non-spatial sources into one SQLite file).

Realising I had not read the release notes [1] properly and having read 
them again, I just noticed that they mention SQLITE_LIST_ALL_LAYERS 
(does not work) instead of SQLITE_LIST_ALL_TABLES (does work).
It looks like I have editing rights for that page. Are you OK with me 
changing it to SQLITE_LIST_ALL_TABLES?

Regards, Roald

[1] http://trac.osgeo.org/gdal/wiki/Release/1.7.0-News

On 20/02/10 11:38, Even Rouault wrote:
> Roald,
>
> Several points :
>
> * I've tried with 1.6 branch, and even if it can list the tasmania_cities
> layer, it doesn't seem to be able to read the features in it, as a dumb
> geometry column name '(null)' was inserted by ogr2ogr into the
> geometry_columns table. Thus when reading the definition of the
> tasmania_cities layer, it will stop because it can't find the '(null)'
> column. See the output :
>
> $  ogrinfo  -ro -al tasmania.sqlite
> INFO: Open of `tasmania.sqlite'
>        using driver `SQLite' successful.
>
> Layer name: tasmania_cities
> Geometry: None
> Feature Count: 1
> Layer SRS WKT:
> (unknown)
> city_name: String (0.0)
> admin_name: String (0.0)
> cntry_name: String (0.0)
> status: String (0.0)
> pop_class: String (0.0)
> ERROR 1: Unable to find Geometry column '(null)'.
>
> So 1.6 seems to be broken wit respect to non spatial databases.
>
> * With OGR 1.7, no entry is added in the geometry_columns table for
> non-spatial tables (http://trac.osgeo.org/gdal/changeset/17990). But as the
> databases are created by default for spatial table support, ogrinfo won't
> list non spatial databases, which is a "specified" behaviour to avoid
> reporting tables such as geometry_columns or spatial_ref_sys.
>
> To make things clearer, I've found at least 3 ways of making OGR 1.7 work with
> non spatial databases.
>
> -->  The cleanest one : Create a non-spatial databases that has no
> geometry_column table. You must pass the -dsco METADATA=NO option on the
> ogr2ogr command line. This option was broken before 1.7.0 - see
> http://trac.osgeo.org/gdal/ticket/2879 - , but databases created with -dsco
> METADATA=NO with 1.7.0 will be readable with 1.6.0
>
> -->  If your database contains the geometry_column table, only spatial tables
> are listed by default, unless you set the SQLITE_LIST_ALL_TABLES environment
> variable to YES when opening it with ogrinfo - or any other OGR utility.
> (this option is new in OGR 1.7.0)
>
> -->  Rather dirty. Pretend that your non spatial table is a spatial table with
> POINT geometry type for example. Add the -nlt POINT option on the ogr2ogr
> command line for that. The table will be registered as begin a POINT table,
> but no feature will have a geometry. Works with both 1.6.0 and 1.7.0
>
> So, all in all, I think OGR 1.7 should work rather well when dealing with non
> spatial sqlite databases.
>
> Best regards,
>
> Even
>
> Le Friday 19 February 2010 23:47:54 Roald de Wit, vous avez ?crit :
>    
>> Hi list,
>>
>> I have the following issue: OGR 1.7.x cannot read the SQLite files it
>> creates from a source *without geometries*.
>>
>> I used the following GDAL:
>> - from http://vbkto.dyndns.org/sdk/
>>     (release-1310-gdal-1-7-mapserver-5-6.zip, based on r9799, r18849)
>> - on a WinXP machine
>> - having no other GDAL in my path
>>
>> Simple example, try the following with attached CSV file.:
>>
>>       ogr2ogr -F "SQLite" tasmania.sqlite tasmania_cities.csv
>>
>> and then:
>>
>>       ogrinfo tasmania.sqlite
>>       INFO: Open of `tasmania.sqlite'
>>              using driver `SQLite' successful.
>>
>> No layers are found. With GDAL 1.6.x there is no problem.
>>
>> I'm not sure if this is an issue with this specific build of GDAL or
>> with GDAL in general (since I'm not aware of another recent GDAL with
>> modern SQLite support built-in on Windows).
>>
>> I contacted Tamas Szekeres off-line about the issue. He suggested it
>> might be a problem with the SQLite driver, therefore I'm taking it to
>> the gdal-dev list.
>>
>> Is this a bug? If so, I'm happy to create a ticket in trac.
>>
>> Regards,
>>
>> Roald
>>      
>
>    
From even.rouault at mines-paris.org  Sat Feb 20 05:16:12 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Feb 20 05:16:26 2010
Subject: [gdal-dev] GDAL 1.7 issues with SQLite creation from source
	without geometries
In-Reply-To: <4B7F5B27.4010701@somethingspatial.com.au>
References: <4B7F151A.70601@somethingspatial.com.au>
	<201002200138.03540.even.rouault@mines-paris.org>
	<4B7F5B27.4010701@somethingspatial.com.au>
Message-ID: <201002201116.14020.even.rouault@mines-paris.org>

Thanks for reporting the typo. I've just corrected the wiki page as well as 
the NEWS file in subversion which is the master for the wiki page.
From jukka.rahkonen at mmmtike.fi  Sat Feb 20 17:34:50 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sat Feb 20 19:41:25 2010
Subject: [gdal-dev] Re: Add GCP's to a file
References: <8fb908a31002190046k23d22440y5fdfa339bf481e22@mail.gmail.com>
	<loom.20100219T105715-674@post.gmane.org>,
	<201002191146.08596.m.massing@warped-space.de>,
	<4B7E7147.2030501@uva.nl> <COL107-W35625BEED47B9A57845F9C7460@phx.gbl>
Message-ID: <loom.20100220T232431-401@post.gmane.org>

Dan Greve <grevedan <at> hotmail.com> writes:

> 
> 
> Question on the -gcp option in gdal_translate.? If i want to use it to 
> specify the geographic referencing of the four corners do i need to
> specify the center of the pixel, or the UL of the pixel.? 
> (e.g. -gcp 0 0 34 115 OR -gcp 0.5 0.5 34 115 .


Hi,

Pixel values are integers and -gcp 0.5 0.5 34 115 does not make sense.  It is
worth knowing that the anchor point of the pixel is in the top-left corner of
the pixel (somebody hopefully corrects me if I am wrong) and the geographical
coordinates should be taken from that point, not from the middle of the pixel.  

Also the extents reported by gdalinfo are the widest possible extents and if 
those are to be used only UL coordinated can be used as it.  For other three
corners there is a need to minus one pixel size in one or both axis directions.

-Jukka Rahkonen-

From mateusz at loskot.net  Sat Feb 20 20:40:21 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Feb 20 20:40:29 2010
Subject: [gdal-dev] Nullable fields in OGR
In-Reply-To: <026101cab0e8$ee2c1c90$ca8455b0$@roberts@duke.edu>
References: <01d201cab0c0$fc6afd80$f540f880$%roberts@duke.edu>
	<afb5ea8b0957dcdd54d599a7d8046bac.squirrel@loskot.net>
	<026101cab0e8$ee2c1c90$ca8455b0$@roberts@duke.edu>
Message-ID: <4B808F05.6080402@loskot.net>

Jason Roberts wrote:
>> I'd be careful as abstractions of abstractions can easily lead to 
>> fat beasts which can do everything, but are complex as hell where 
>> nobody understands what is what and how it actually works.
> 
> I believe I learned this as oopaholism, a disease in which someone
> becomes so addicted to object orientation that they spend all of
> their time working on frameworks that don't actually DO anything. :-)


Jason, you're reading my mind :-)

> Seriously, all I am trying to do is build some tools that can work in
> multiple GISes without having rewriting large portions of the tools
> once for each GIS. If that, in itself, is pointless or not doable at
> this moment in time, then I guess I am crazy.

Understood. Good luck!

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From warmerdam at pobox.com  Sat Feb 20 21:53:57 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Feb 20 21:53:30 2010
Subject: [gdal-dev] Re: Add GCP's to a file
In-Reply-To: <loom.20100220T232431-401@post.gmane.org>
References: <8fb908a31002190046k23d22440y5fdfa339bf481e22@mail.gmail.com>
	<loom.20100219T105715-674@post.gmane.org>,
	<201002191146.08596.m.massing@warped-space.de>,
	<4B7E7147.2030501@uva.nl>
	<COL107-W35625BEED47B9A57845F9C7460@phx.gbl>
	<loom.20100220T232431-401@post.gmane.org>
Message-ID: <4B80A045.4070002@pobox.com>

Jukka Rahkonen wrote:
> Dan Greve <grevedan <at> hotmail.com> writes:
> 
>>
>> Question on the -gcp option in gdal_translate.  If i want to use it to 
>> specify the geographic referencing of the four corners do i need to
>> specify the center of the pixel, or the UL of the pixel.  
>> (e.g. -gcp 0 0 34 115 OR -gcp 0.5 0.5 34 115 .
> 
> 
> Hi,
> 
> Pixel values are integers and -gcp 0.5 0.5 34 115 does not make sense.  It is
> worth knowing that the anchor point of the pixel is in the top-left corner of
> the pixel (somebody hopefully corrects me if I am wrong) and the geographical
> coordinates should be taken from that point, not from the middle of the pixel.  

Folks,

To clarify the GCPs do support sub-pixel locations.  So you can use (0.5,0.5)
if you mean the center of the top left pixel while (0,0) is the top left corner
of the top left pixel and (1,1) is the bottom right corner of the top left
pixel (or the top left corner of the next pixel in if you prefer to think of it
that way).

> Also the extents reported by gdalinfo are the widest possible extents and if 
> those are to be used only UL coordinated can be used as it.  For other three
> corners there is a need to minus one pixel size in one or both axis directions.

The lower right corner reported by gdalinfo would be at
pixel/line coordinate (xsize,ysize).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jukka.rahkonen at mmmtike.fi  Sun Feb 21 04:05:48 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun Feb 21 06:11:19 2010
Subject: [gdal-dev] Re: Add GCP's to a file
Message-ID: <loom.20100221T100141-518@post.gmane.org>

Frank wrote:

>> Also the extents reported by gdalinfo are the widest possible extents
 and if 
>> those are to be used only UL coordinated can be used as it.  For 
other three
>> corners there is a need to minus one pixel size in one or both axis 
directions.

> The lower right corner reported by gdalinfo would be at
> pixel/line coordinate (xsize,ysize).

Last pixel/line of, let's say 1000 by 1000 pixel image is (999,999). So it is
possible to give a GCP to pixel (1000,1000), that is actually outside of the
image? Knowing that would have saved me some work.

-Jukka-


From warmerdam at pobox.com  Sun Feb 21 10:27:50 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Feb 21 10:27:23 2010
Subject: [gdal-dev] Re: Add GCP's to a file
In-Reply-To: <loom.20100221T100141-518@post.gmane.org>
References: <loom.20100221T100141-518@post.gmane.org>
Message-ID: <4B8150F6.909@pobox.com>

Jukka Rahkonen wrote:
> Frank wrote:
> 
>>> Also the extents reported by gdalinfo are the widest possible extents
>  and if 
>>> those are to be used only UL coordinated can be used as it.  For 
> other three
>>> corners there is a need to minus one pixel size in one or both axis 
> directions.
> 
>> The lower right corner reported by gdalinfo would be at
>> pixel/line coordinate (xsize,ysize).
> 
> Last pixel/line of, let's say 1000 by 1000 pixel image is (999,999). So it is
> possible to give a GCP to pixel (1000,1000), that is actually outside of the
> image? Knowing that would have saved me some work.

Jukka,

There is no absolute constraint on GCPs requiring them to be on the image.
In some situations - for instance subsetting a GCP controlled image - it
might make a lot of sense to have GCPs well outside the image.

In any event in the above case (1000,1000) is the bottom right corner
of the bottom right pixel and can be considered on (or on the edge of)
the image.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From thomas.maschler at gmx.net  Sun Feb 21 17:00:24 2010
From: thomas.maschler at gmx.net (Thomas Maschler)
Date: Sun Feb 21 17:00:29 2010
Subject: [gdal-dev] Gdal 1.7.1 and Python3.1
Message-ID: <20100221220024.146040@gmx.net>

Hi,

I am trying to get Gdal 1.7.1 running with Python3.1 since I was reading that this is possible now, but somehow it does not work.

I am using Ubuntu 9.10 having, python2.6 and python3.1 installed.

I compiled gdal from source. The packages were placed in the 2.6 folder and gdal runs fine in the version

>>> from osgeo import gdal
>>> gdal.__version__
'1.7.1'

Since I want it to use in 3.1, I copied the packages into my 3.1 folder (was this right??) and got the error:

>>> from osgeo import gdal
Traceback (most recent call last):
  File "<pyshell#8>", line 1, in <module>
    from osgeo import gdal
  File "/usr/local/lib/python3.1/dist-packages/osgeo/__init__.py", line 21, in <module>
    _gdal = swig_import_helper()
  File "/usr/local/lib/python3.1/dist-packages/osgeo/__init__.py", line 17, in swig_import_helper
    _mod = imp.load_module('_gdal', fp, pathname, description)
ImportError: /usr/local/lib/python3.1/dist-packages/osgeo/_gdal.so: undefined symbol: PyInstance_Type
>>>


Can anybody help?

Thanks in advance

Thomas


-- 
NEU: Mit GMX DSL ?ber 1000,- ? sparen!
http://portal.gmx.net/de/go/dsl02

-- 
GRATIS f?r alle GMX-Mitglieder: Die maxdome Movie-FLAT!
Jetzt freischalten unter http://portal.gmx.net/de/go/maxdome01

-- 
NEU: Mit GMX DSL ?ber 1000,- ? sparen!
http://portal.gmx.net/de/go/dsl02
From even.rouault at mines-paris.org  Sun Feb 21 17:12:42 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Feb 21 17:12:53 2010
Subject: [gdal-dev] Gdal 1.7.1 and Python3.1
In-Reply-To: <20100221220024.146040@gmx.net>
References: <20100221220024.146040@gmx.net>
Message-ID: <201002212312.43693.even.rouault@mines-paris.org>

Thomas,

you can't use the python package compiled with a python version with another 
python version.

So try the following :

cd /path/to/gdal_source_tree/swig/python
sudo /path/to/your/python3.1/bin/python setup.py install

Le Sunday 21 February 2010 23:00:24 Thomas Maschler, vous avez ?crit?:
> Hi,
>
> I am trying to get Gdal 1.7.1 running with Python3.1 since I was reading
> that this is possible now, but somehow it does not work.
>
> I am using Ubuntu 9.10 having, python2.6 and python3.1 installed.
>
> I compiled gdal from source. The packages were placed in the 2.6 folder and
> gdal runs fine in the version
>
> >>> from osgeo import gdal
> >>> gdal.__version__
>
> '1.7.1'
>
> Since I want it to use in 3.1, I copied the packages into my 3.1 folder (was 
this right??) and got the error:
> >>> from osgeo import gdal
>
> Traceback (most recent call last):
>   File "<pyshell#8>", line 1, in <module>
>     from osgeo import gdal
>   File "/usr/local/lib/python3.1/dist-packages/osgeo/__init__.py", line 21,
> in <module> _gdal = swig_import_helper()
>   File "/usr/local/lib/python3.1/dist-packages/osgeo/__init__.py", line 17,
> in swig_import_helper _mod = imp.load_module('_gdal', fp, pathname,
> description)
> ImportError: /usr/local/lib/python3.1/dist-packages/osgeo/_gdal.so:
> undefined symbol: PyInstance_Type
>
>
>
> Can anybody help?
>
> Thanks in advance
>
> Thomas
>
>
> --
> NEU: Mit GMX DSL ?ber 1000,- ? sparen!
> http://portal.gmx.net/de/go/dsl02
>
> --
> GRATIS f?r alle GMX-Mitglieder: Die maxdome Movie-FLAT!
> Jetzt freischalten unter http://portal.gmx.net/de/go/maxdome01


From thomas.maschler at gmx.net  Sun Feb 21 17:48:47 2010
From: thomas.maschler at gmx.net (Thomas Maschler)
Date: Sun Feb 21 17:48:51 2010
Subject: [gdal-dev] Gdal 1.7.1 and Python3.1
In-Reply-To: <201002212312.43693.even.rouault@mines-paris.org>
References: <20100221220024.146040@gmx.net>
	<201002212312.43693.even.rouault@mines-paris.org>
Message-ID: <20100221224847.54850@gmx.net>

Sounds logical, I already had a weired feeling copying the files just like this.

OK, I tried your advice, but I got a long list of errors. Doing the same with 2.6 works fine.

$ sudo /usr/bin/python3.1 setup.py install

running install
running build
running build_py
running build_ext
building 'osgeo._gdal' extension
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -O2 -Wall -Wstrict-prototypes -fPIC -I../../port -I../../gcore -I../../alg -I../../ogr/ -I/usr/include/python3.1 -I. -I/home/thomas/gdal-1.7.1/include -c extensions/gdal_wrap.cpp -o build/temp.linux-i686-3.1/extensions/gdal_wrap.o
cc1plus: warning: command line option "-Wstrict-prototypes" is valid for Ada/C/ObjC but not for C++
extensions/gdal_wrap.cpp: In function ?void SWIG_Python_AddErrorMsg(const char*)?:
extensions/gdal_wrap.cpp:883: error: ?PyString_AsString? was not declared in this scope
extensions/gdal_wrap.cpp: In function ?PySwigClientData* PySwigClientData_New(PyObject*)?:
extensions/gdal_wrap.cpp:1274: error: ?PyClass_Check? was not declared in this scope
extensions/gdal_wrap.cpp: In function ?PyObject* PySwigObject_format(const char*, PySwigObject*)?:
extensions/gdal_wrap.cpp:1347: error: ?PyString_FromString? was not declared in this scope
extensions/gdal_wrap.cpp:1349: error: ?PyString_Format? was not declared in this scope
extensions/gdal_wrap.cpp: In function ?PyObject* PySwigObject_repr(PySwigObject*)?:
extensions/gdal_wrap.cpp:1379: error: ?PyString_AsString? was not declared in this scope
extensions/gdal_wrap.cpp:1379: error: ?PyString_FromFormat? was not declared in this scope
extensions/gdal_wrap.cpp:1387: error: ?PyString_ConcatAndDel? was not declared in this scope
extensions/gdal_wrap.cpp: In function ?int PySwigObject_print(PySwigObject*, FILE*, int)?:
extensions/gdal_wrap.cpp:1401: error: ?PyString_AsString? was not declared in this scope
extensions/gdal_wrap.cpp: In function ?PyObject* PySwigObject_str(PySwigObject*)?:
extensions/gdal_wrap.cpp:1414: error: ?PyString_FromString? was not declared in this scope
extensions/gdal_wrap.cpp: In function ?PyTypeObject* _PySwigObject_type()?:
extensions/gdal_wrap.cpp:1623: error: ?coercion? was not declared in this scope
extensions/gdal_wrap.cpp:1623: error: expected ?}? before numeric constant
extensions/gdal_wrap.cpp:1623: error: too many initializers for ?PyNumberMethods?
extensions/gdal_wrap.cpp:1623: error: invalid conversion from ?PyObject* (*)(PyObject*, PyObject*)? to ?PyObject* (*)(PyObject*, PyObject*, PyObject*)?
extensions/gdal_wrap.cpp:1623: error: invalid conversion from ?PyObject* (*)(PyObject*, PyObject*, PyObject*)? to ?PyObject* (*)(PyObject*)?
extensions/gdal_wrap.cpp:1623: error: invalid conversion from ?PyObject* (*)(PyObject*)? to ?int (*)(PyObject*)?
extensions/gdal_wrap.cpp:1623: error: invalid conversion from ?int (*)(PyObject*)? to ?PyObject* (*)(PyObject*)?
extensions/gdal_wrap.cpp:1623: error: expected ?,? or ?;? before numeric constant
extensions/gdal_wrap.cpp:1603: warning: unused variable ?swigobject_doc?
extensions/gdal_wrap.cpp:1605: warning: unused variable ?PySwigObject_as_number?
extensions/gdal_wrap.cpp:1636: warning: no return statement in function returning non-void
extensions/gdal_wrap.cpp: At global scope:
extensions/gdal_wrap.cpp:1640: error: expected unqualified-id before ?if?
In file included from /usr/include/c++/4.4/stdexcept:38,
                 from extensions/gdal_wrap.cpp:2557:
/usr/include/c++/4.4/exception:35: error: expected ?}? before end of line
/usr/include/c++/4.4/exception:35: error: expected declaration before end of line
error: command 'gcc' failed with exit status 1





$ sudo /usr/bin/python setup.py install
running install
running build
running build_py
running build_ext
running install_lib
running install_egg_info
Writing /usr/local/lib/python2.6/dist-packages/GDAL-1.7.1.egg-info

-- 
Sicherer, schneller und einfacher. Die aktuellen Internet-Browser -
jetzt kostenlos herunterladen! http://portal.gmx.net/de/go/atbrowser
From even.rouault at mines-paris.org  Sun Feb 21 18:18:39 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Feb 21 18:18:50 2010
Subject: [gdal-dev] Gdal 1.7.1 and Python3.1
In-Reply-To: <20100221224847.54850@gmx.net>
References: <20100221220024.146040@gmx.net>
	<201002212312.43693.even.rouault@mines-paris.org>
	<20100221224847.54850@gmx.net>
Message-ID: <201002220018.40260.even.rouault@mines-paris.org>

Hum, I think you have regenerated swig/python/extensions/gdal_wrap.cpp with 
your own swig version (which is probably too old), as the official version of 
gdal_wrap.cpp in 1.7.1 has lines that don't match with your error message. 
Try restoring the official files in  swig/python/extensions and  
swig/python/osgeo and redo 'sudo /usr/bin/python3.1 setup.py install' again 
(or upgrade your swig version to 1.3.39).

Le Sunday 21 February 2010 23:48:47 Thomas Maschler, vous avez ?crit?:
> Sounds logical, I already had a weired feeling copying the files just like
> this.
>
> OK, I tried your advice, but I got a long list of errors. Doing the same
> with 2.6 works fine.
>
> $ sudo /usr/bin/python3.1 setup.py install
>
> running install
> running build
> running build_py
> running build_ext
> building 'osgeo._gdal' extension
> gcc -pthread -fno-strict-aliasing -DNDEBUG -g -O2 -Wall -Wstrict-prototypes
> -fPIC -I../../port -I../../gcore -I../../alg -I../../ogr/
> -I/usr/include/python3.1 -I. -I/home/thomas/gdal-1.7.1/include -c
> extensions/gdal_wrap.cpp -o
> build/temp.linux-i686-3.1/extensions/gdal_wrap.o cc1plus: warning: command
> line option "-Wstrict-prototypes" is valid for Ada/C/ObjC but not for C++
> extensions/gdal_wrap.cpp: In function ?void SWIG_Python_AddErrorMsg(const
> char*)?: extensions/gdal_wrap.cpp:883: error: ?PyString_AsString? was not
> declared in this scope extensions/gdal_wrap.cpp: In function
> ?PySwigClientData* PySwigClientData_New(PyObject*)?:
> extensions/gdal_wrap.cpp:1274: error: ?PyClass_Check? was not declared in
> this scope extensions/gdal_wrap.cpp: In function ?PyObject*
> PySwigObject_format(const char*, PySwigObject*)?:
> extensions/gdal_wrap.cpp:1347: error: ?PyString_FromString? was not
> declared in this scope extensions/gdal_wrap.cpp:1349: error:
> ?PyString_Format? was not declared in this scope extensions/gdal_wrap.cpp:
> In function ?PyObject* PySwigObject_repr(PySwigObject*)?:
> extensions/gdal_wrap.cpp:1379: error: ?PyString_AsString? was not declared
> in this scope extensions/gdal_wrap.cpp:1379: error: ?PyString_FromFormat?
> was not declared in this scope extensions/gdal_wrap.cpp:1387: error:
> ?PyString_ConcatAndDel? was not declared in this scope
> extensions/gdal_wrap.cpp: In function ?int
> PySwigObject_print(PySwigObject*, FILE*, int)?:
> extensions/gdal_wrap.cpp:1401: error: ?PyString_AsString? was not declared
> in this scope extensions/gdal_wrap.cpp: In function ?PyObject*
> PySwigObject_str(PySwigObject*)?: extensions/gdal_wrap.cpp:1414: error:
> ?PyString_FromString? was not declared in this scope
> extensions/gdal_wrap.cpp: In function ?PyTypeObject* _PySwigObject_type()?:
> extensions/gdal_wrap.cpp:1623: error: ?coercion? was not declared in this
> scope extensions/gdal_wrap.cpp:1623: error: expected ?}? before numeric
> constant extensions/gdal_wrap.cpp:1623: error: too many initializers for
> ?PyNumberMethods? extensions/gdal_wrap.cpp:1623: error: invalid conversion
> from ?PyObject* (*)(PyObject*, PyObject*)? to ?PyObject* (*)(PyObject*,
> PyObject*, PyObject*)? extensions/gdal_wrap.cpp:1623: error: invalid
> conversion from ?PyObject* (*)(PyObject*, PyObject*, PyObject*)? to
> ?PyObject* (*)(PyObject*)? extensions/gdal_wrap.cpp:1623: error: invalid
> conversion from ?PyObject* (*)(PyObject*)? to ?int (*)(PyObject*)?
> extensions/gdal_wrap.cpp:1623: error: invalid conversion from ?int
> (*)(PyObject*)? to ?PyObject* (*)(PyObject*)?
> extensions/gdal_wrap.cpp:1623: error: expected ?,? or ?;? before numeric
> constant extensions/gdal_wrap.cpp:1603: warning: unused variable
> ?swigobject_doc? extensions/gdal_wrap.cpp:1605: warning: unused variable
> ?PySwigObject_as_number? extensions/gdal_wrap.cpp:1636: warning: no return
> statement in function returning non-void extensions/gdal_wrap.cpp: At
> global scope:
> extensions/gdal_wrap.cpp:1640: error: expected unqualified-id before ?if?
> In file included from /usr/include/c++/4.4/stdexcept:38,
>                  from extensions/gdal_wrap.cpp:2557:
> /usr/include/c++/4.4/exception:35: error: expected ?}? before end of line
> /usr/include/c++/4.4/exception:35: error: expected declaration before end
> of line error: command 'gcc' failed with exit status 1
>
>
>
>
>
> $ sudo /usr/bin/python setup.py install
> running install
> running build
> running build_py
> running build_ext
> running install_lib
> running install_egg_info
> Writing /usr/local/lib/python2.6/dist-packages/GDAL-1.7.1.egg-info


From knudby at gmail.com  Sun Feb 21 19:00:56 2010
From: knudby at gmail.com (knudby)
Date: Sun Feb 21 19:00:57 2010
Subject: [gdal-dev] Re: gdal does not read ENVISAT N1 files correctly?
In-Reply-To: <1252921205125-3641025.post@n2.nabble.com>
References: <1252921205125-3641025.post@n2.nabble.com>
Message-ID: <1266796856097-4609398.post@n2.nabble.com>


Hi, did you ever get a response to this? I'm having a problem reading L1
AATSR data (.N1 format), I get no projection or geotransform information at
all.

Anders
-- 
View this message in context: http://n2.nabble.com/gdal-does-not-read-ENVISAT-N1-files-correctly-tp3641025p4609398.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From knudby at gmail.com  Sun Feb 21 19:10:05 2010
From: knudby at gmail.com (knudby)
Date: Sun Feb 21 19:10:06 2010
Subject: [gdal-dev] Reading Envisat AATSR L1 data (.N1 format)
Message-ID: <1266797405126-4609430.post@n2.nabble.com>


Hi, I'm trying to read AATSR data in ESA's N1 format. Supposedly gdal can do
this, but when I open my files I get no projection or geotransform
information. Is this a known issue, or am I doing something wrong. If I'm
doing something wrong, can someone give me a quick tip on how to get the
information out (Python please).

A snippet of what I'm using now:

import sys
import string
import os
from osgeo import osr
from osgeo import gdal
from osgeo import gdalnumeric
from osgeo.gdalconst import * 

source_image_file = "c:/aatsr/l1/aatsr_data.N1"
source_image = gdal.Open(source_image_file, GA_ReadOnly)
geotransform = source_image.GetGeoTransform()             #Turns out empty!
projection_reference = source_image.GetProjectionRef()    #Turns out empty!
projection = source_image.GetProjection()                      #Turns out
empty!

-- 
View this message in context: http://n2.nabble.com/Reading-Envisat-AATSR-L1-data-N1-format-tp4609430p4609430.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Mon Feb 22 01:49:19 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Feb 22 01:49:23 2010
Subject: [gdal-dev] Reading Envisat AATSR L1 data (.N1 format)
In-Reply-To: <1266797405126-4609430.post@n2.nabble.com>
References: <1266797405126-4609430.post@n2.nabble.com>
Message-ID: <eb502d881002212249p58b7eea1i6e6cd8ac7f6e9536@mail.gmail.com>

knudby,

According to http://gdal.org/formats_list.html and
http://gdal.org/frmt_various.html#Envisat you cannot get the projection
information but will be able to read GCPs with GDALDataset::GetGCPs().

On Mon, Feb 22, 2010 at 5:40 AM, knudby <knudby@gmail.com> wrote:

>
> Hi, I'm trying to read AATSR data in ESA's N1 format. Supposedly gdal can
> do
> this, but when I open my files I get no projection or geotransform
> information. Is this a known issue, or am I doing something wrong. If I'm
> doing something wrong, can someone give me a quick tip on how to get the
> information out (Python please).
>
> A snippet of what I'm using now:
>
> import sys
> import string
> import os
> from osgeo import osr
> from osgeo import gdal
> from osgeo import gdalnumeric
> from osgeo.gdalconst import *
>
> source_image_file = "c:/aatsr/l1/aatsr_data.N1"
> source_image = gdal.Open(source_image_file, GA_ReadOnly)
> geotransform = source_image.GetGeoTransform()             #Turns out empty!
> projection_reference = source_image.GetProjectionRef()    #Turns out empty!
> projection = source_image.GetProjection()                      #Turns out
> empty!
>
> --
> View this message in context:
> http://n2.nabble.com/Reading-Envisat-AATSR-L1-data-N1-format-tp4609430p4609430.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100222/279ddbec/attachment-0001.html
From vincent.neuilly at gmail.com  Mon Feb 22 07:05:47 2010
From: vincent.neuilly at gmail.com (Vincent Neuilly)
Date: Mon Feb 22 07:05:51 2010
Subject: [gdal-dev] Problem with wktext and ECW
Message-ID: <898ce0141002220405o1c6be305tb7059aaeca368337@mail.gmail.com>

Hi all,

I have a problem with ECW and wktext.
When I generate a TIFF, or a JP2000, no problem.
gdalwarp -of VRT -s_srs "+init=IGNF:LAMB2 +wktext" -t_srs
"+init=IGNF:LAMB93" file.ecw file_reproj.vrt
gdal_translate -of JP2ECW -co TARGET=90 -co LARGE_OK=YES -co PROJ=LMFRAN93
-co DATUM=RGF93 -projwin X Y X Y file_reproj.vrt file2.jp2

But, when I try to generate a ECW, with the same command
gdal_translate -of ECW -co TARGET=90 -co LARGE_OK=YES -co PROJ=LMFRAN93 -co
DATUM=RGF93 -projwin X Y X Y file_reproj.vrt file2.ecw
It doesn't work, gdal_translate doesn't work, it stays at "0" (and not
0...10...20...etc.).
The problem comes from "wktext" because without "wktext", it works.


Any ideas ?


Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100222/a6d32bc8/attachment.html
From rikardocezar at msn.com  Mon Feb 22 07:44:59 2010
From: rikardocezar at msn.com (Ricardo Cezar Bonfim Rodrigues)
Date: Mon Feb 22 07:45:02 2010
Subject: [gdal-dev] Loading various DTED files in a single block
Message-ID: <SNT125-W2812916D9E55D33F466DE7C2430@phx.gbl>


Hi everyone,



I'm writing a code to find highest terrain elevation in dted files.

I'm already reading the elevations from a dted with gdal. But there

are cases where the region I'm searching the highest elevation

contains more then one file (e.g. s20.dt1, s20.dt1 etc...). So I was

wondering how could I load more than one file in a single pafScanline

and if would be a good strategy to work with. I have also read about

GDAL_DTED_SINGLE_BLOCK=TRUE, but where I set it? is it for a single

file?



Does someone know if there is any implementation which returns the

dted files I should open to access the elevations of given a region

(e.g rectangle including bounds in latitude and longitude)?



I'd be glad to receive tips, references which could help me.



Thanks in advance



Ricardo Rodrigues

Brazil

 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100222/68ecd945/attachment.html
From warmerdam at pobox.com  Mon Feb 22 08:14:49 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb 22 08:14:17 2010
Subject: [gdal-dev] Loading various DTED files in a single block
In-Reply-To: <SNT125-W2812916D9E55D33F466DE7C2430@phx.gbl>
References: <SNT125-W2812916D9E55D33F466DE7C2430@phx.gbl>
Message-ID: <4B828349.4090407@pobox.com>

Ricardo Cezar Bonfim Rodrigues wrote:
> Hi everyone,
> 
> I'm writing a code to find highest terrain elevation in dted files.
> I'm already reading the elevations from a dted with gdal. But there
> are cases where the region I'm searching the highest elevation
> contains more then one file (e.g. s20.dt1, s20.dt1 etc...). So I was
> wondering how could I load more than one file in a single pafScanline
> and if would be a good strategy to work with.

Ricardo,

There is no handy function in GDAL for searching a set of GDALDataset's
to find out which ones overlap a particular region.   So you would
pretty much need to do this yourself.  The normal way to do this
might be to open all the files and identify which are overlapping.
However, with special knowledge of the dted tiling scheme and naming
convention you could likely identify the correct files without having
to pre-open any unnecessary files.

Another approach would be to treat all the DTED files as one large
virtual image.  Then you just ask for a region and it will take
care of opening the required files.  To build a virtual raster suitable
for this purpose you can use the gdalbuildvrt program (possibly only
available in recent versions of GDAL).

 >  I have also read about
> GDAL_DTED_SINGLE_BLOCK=TRUE, but where I set it? is it for a single
> file?

This only affects whether a DTED file is treated as a single block
or with one block per column.  I don't see it as being relavent to
your purpose.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From kimbesson1981 at gmail.com  Mon Feb 22 12:31:37 2010
From: kimbesson1981 at gmail.com (Kim Besson)
Date: Mon Feb 22 12:31:40 2010
Subject: [gdal-dev] Re: Add GCP's to a file
Message-ID: <8fb908a31002220931v68c2dca3r9af1b6a6a80c1e42@mail.gmail.com>

>Hi,
>Gdal_translation has on option
> [-gcp pixel line easting northing [elevation]]*

>I know it works with tiffs but I have not tried it with HDF4. Some working
>examples and considerations about this is hidden inside a document
>http://www.scangis.org/scangis2007/papers/r3_rahkonen.pdf

Thanks Jukka. Although why does it only requires pixel line? The dataset
that I'm using, Easthing and Northing varies along pixel line. Shouldn't it
be Pixel column and row (or pixel (x,y)?

Thanks
Kim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100222/30d36440/attachment.html
From osgeo at gbp.gaige.net  Mon Feb 22 12:38:13 2010
From: osgeo at gbp.gaige.net (Gaige B. Paulsen)
Date: Mon Feb 22 12:38:17 2010
Subject: [gdal-dev] Re: Add GCP's to a file
In-Reply-To: <8fb908a31002220931v68c2dca3r9af1b6a6a80c1e42@mail.gmail.com>
References: <8fb908a31002220931v68c2dca3r9af1b6a6a80c1e42@mail.gmail.com>
Message-ID: <64691797-D19C-4421-A31C-0BD0030D341A@gbp.gaige.net>

Pixel and line in the description below are actually two different numbers, one representing the pixel (x coordinate) and the line (y coordinate) of the point in the image.

Hope this helps,
-Gaige


On Feb 22, 2010, at 12:31 PM, Kim Besson wrote:

> >Hi,
> >Gdal_translation has on option
> > [-gcp pixel line easting northing [elevation]]*
> 
> >I know it works with tiffs but I have not tried it with HDF4. Some working
> >examples and considerations about this is hidden inside a document
> >http://www.scangis.org/scangis2007/papers/r3_rahkonen.pdf
> 
> Thanks Jukka. Although why does it only requires pixel line? The dataset that I'm using, Easthing and Northing varies along pixel line. Shouldn't it be Pixel column and row (or pixel (x,y)?
> 
> Thanks
> Kim
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100222/e64ad06f/attachment.html
From kimbesson1981 at gmail.com  Mon Feb 22 13:48:05 2010
From: kimbesson1981 at gmail.com (Kim Besson)
Date: Mon Feb 22 13:48:09 2010
Subject: [gdal-dev] Re: Add GCP's to a file
In-Reply-To: <64691797-D19C-4421-A31C-0BD0030D341A@gbp.gaige.net>
References: <8fb908a31002220931v68c2dca3r9af1b6a6a80c1e42@mail.gmail.com>
	<64691797-D19C-4421-A31C-0BD0030D341A@gbp.gaige.net>
Message-ID: <8fb908a31002221048k263690des1d1cd280ab85febc@mail.gmail.com>

Thanks Mr Paulsen and Jukka

Ok I tried  the command and it seemed to work :) Thanks

By the way, if my image has no Coordinates system and my GCPs corresponds to
a certain projection/coordinate system, How I define now the coordinate
system in which that data is?

Thank you


2010/2/22 Gaige B. Paulsen <osgeo@gbp.gaige.net>

> Pixel and line in the description below are actually two different numbers,
> one representing the pixel (x coordinate) and the line (y coordinate) of the
> point in the image.
>
> Hope this helps,
> -Gaige
>
>
> On Feb 22, 2010, at 12:31 PM, Kim Besson wrote:
>
> >Hi,
> >Gdal_translation has on option
> > [-gcp pixel line easting northing [elevation]]*
>
> >I know it works with tiffs but I have not tried it with HDF4. Some working
> >examples and considerations about this is hidden inside a document
> >http://www.scangis.org/scangis2007/papers/r3_rahkonen.pdf
>
> Thanks Jukka. Although why does it only requires pixel line? The dataset
> that I'm using, Easthing and Northing varies along pixel line. Shouldn't it
> be Pixel column and row (or pixel (x,y)?
>
> Thanks
> Kim
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100222/bbe480c0/attachment.html
From rikardocezar at msn.com  Mon Feb 22 16:09:19 2010
From: rikardocezar at msn.com (Ricardo Cezar Bonfim Rodrigues)
Date: Mon Feb 22 16:09:22 2010
Subject: [gdal-dev] Loading various DTED files in a single block
In-Reply-To: <4B828349.4090407@pobox.com>
References: <SNT125-W2812916D9E55D33F466DE7C2430@phx.gbl>,
	<4B828349.4090407@pobox.com>
Message-ID: <SNT125-W53551C147AC7BC94FF5ECFC2430@phx.gbl>


Thanks Frank, the gdalbuildvrt seems to be a good option for me. 
One more question. 

A single deted file level 1 takes almost 6 seconds to be loaded here, since I'm worried about processing time I was thinking about generate and save Gtiff's of all my dted files and work direct with them instead of loading deted files. I've made a simple test here with dted level 0 (I'm having problems to save gtiffs from dted's level 1) and it seems to be much faster. Is it a good way to improve processing time? do you have any other idea?

And here is the code to creates tiffs which works for dted level 0, but dont for dted level 1, It compiles, but breaks and and points an internal error in "xstring" code, if does someone see what is wrong, pls let me know.

...

GDALDataset  *poDataset;
GDALAllRegister();

poDataset = (GDALDataset *) GDALOpen( "s20.dt1", GA_ReadOnly );

...

GDALDataset *poDstDS; 
poDstDS = poDriver->CreateCopy( "output.tif", poDataset, FALSE, 
                                    NULL, NULL, NULL );
 
GDALClose(poDstDS);

...

Thanks

Ricardo Rodrigues
Brazil


> Date: Mon, 22 Feb 2010 08:14:49 -0500
> From: warmerdam@pobox.com
> To: rikardocezar@msn.com
> CC: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Loading various DTED files in a single block
> 
> Ricardo Cezar Bonfim Rodrigues wrote:
> > Hi everyone,
> > 
> > I'm writing a code to find highest terrain elevation in dted files.
> > I'm already reading the elevations from a dted with gdal. But there
> > are cases where the region I'm searching the highest elevation
> > contains more then one file (e.g. s20.dt1, s20.dt1 etc...). So I was
> > wondering how could I load more than one file in a single pafScanline
> > and if would be a good strategy to work with.
> 
> Ricardo,
> 
> There is no handy function in GDAL for searching a set of GDALDataset's
> to find out which ones overlap a particular region.   So you would
> pretty much need to do this yourself.  The normal way to do this
> might be to open all the files and identify which are overlapping.
> However, with special knowledge of the dted tiling scheme and naming
> convention you could likely identify the correct files without having
> to pre-open any unnecessary files.
> 
> Another approach would be to treat all the DTED files as one large
> virtual image.  Then you just ask for a region and it will take
> care of opening the required files.  To build a virtual raster suitable
> for this purpose you can use the gdalbuildvrt program (possibly only
> available in recent versions of GDAL).
> 
>  >  I have also read about
> > GDAL_DTED_SINGLE_BLOCK=TRUE, but where I set it? is it for a single
> > file?
> 
> This only affects whether a DTED file is treated as a single block
> or with one block per column.  I don't see it as being relavent to
> your purpose.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100222/b5600662/attachment.html
From even.rouault at mines-paris.org  Mon Feb 22 16:32:35 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Feb 22 16:32:49 2010
Subject: [gdal-dev] Motion: Commit Access for Adam Nowacki
Message-ID: <201002222232.36484.even.rouault@mines-paris.org>

Motion: Extend GDAL/OGR Commit Access to Adam Nowacki.

---

Hi,

Adam is the author of the GDAL WMS driver, that he contributed during the 2007 
Google Summer of Code. Since then, he has regularly taken part to discussions 
related to the driver and contributes patches, such as in :

http://trac.osgeo.org/gdal/ticket/3224
http://trac.osgeo.org/gdal/ticket/2750
http://trac.osgeo.org/gdal/ticket/2646
http://trac.osgeo.org/gdal/ticket/3420

Adam is also using GDAL heavily in the context of his professionnal 
activities.

It would be convenient to give him direct commit access to subversion.

Adam, could you reply to this message indicating your agreement to the
guidelines listed in:

? ? http://trac.osgeo.org/gdal/wiki/rfc3_commiters

I'll start voting with my support:

+1

Best regards,
From szekerest at gmail.com  Mon Feb 22 17:16:23 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Feb 22 17:16:30 2010
Subject: [gdal-dev] Re: Motion: Commit Access for Adam Nowacki
In-Reply-To: <201002222232.36484.even.rouault@mines-paris.org>
References: <201002222232.36484.even.rouault@mines-paris.org>
Message-ID: <f3b73b7d1002221416t2095b1abh31556303daa39981@mail.gmail.com>

A strong +1 from me to the motion.

Best regards,

Tamas



2010/2/22 Even Rouault <even.rouault@mines-paris.org>

> Motion: Extend GDAL/OGR Commit Access to Adam Nowacki.
>
> ---
>
> Hi,
>
> Adam is the author of the GDAL WMS driver, that he contributed during the
> 2007
> Google Summer of Code. Since then, he has regularly taken part to
> discussions
> related to the driver and contributes patches, such as in :
>
> http://trac.osgeo.org/gdal/ticket/3224
> http://trac.osgeo.org/gdal/ticket/2750
> http://trac.osgeo.org/gdal/ticket/2646
> http://trac.osgeo.org/gdal/ticket/3420
>
> Adam is also using GDAL heavily in the context of his professionnal
> activities.
>
> It would be convenient to give him direct commit access to subversion.
>
> Adam, could you reply to this message indicating your agreement to the
> guidelines listed in:
>
>     http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start voting with my support:
>
> +1
>
> Best regards,
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100222/61fe77a1/attachment-0001.html
From gregor at hostgis.com  Mon Feb 22 18:55:35 2010
From: gregor at hostgis.com (Gregor at HostGIS)
Date: Mon Feb 22 18:55:47 2010
Subject: [gdal-dev] Ticket 3385?
Message-ID: <4B831977.3010607@hostgis.com>

Hey guys.

I'd not heard anything about this ticket:
    http://trac.osgeo.org/gdal/ticket/3385

Is there something I can do to help the process any? I'll cooperate in 
just about any idea for testing and troubleshooting.

-- 
HostGIS, Open Source solutions for the global GIS community
Greg Allensworth - SysAdmin, Programmer, GIS Person, Security
    Network+   Server+   A+   Security+   Linux+
    PHP   PostgreSQL   MySQL   DHTML/JavaScript/AJAX

"No one cares if you can back up ? only if you can recover."
From warmerdam at pobox.com  Mon Feb 22 19:52:21 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb 22 19:51:45 2010
Subject: [gdal-dev] Re: Motion: Commit Access for Kyle Shannon
In-Reply-To: <4B7DA48F.2020900@pobox.com>
References: <4B7DA48F.2020900@pobox.com>
Message-ID: <4B8326C5.7030708@pobox.com>

Frank Warmerdam wrote:
> Motion: Extend GDAL/OGR Commit Access to Kyle Shannon.

Folks,

I declare this motion passed with support from FrankW, TamasS, EvenR,
HowardB, and DanielM.  Welcome to the team Kyle!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From stephan.holl at intevation.de  Tue Feb 23 01:33:22 2010
From: stephan.holl at intevation.de (Stephan Holl)
Date: Tue Feb 23 01:32:46 2010
Subject: [gdal-dev] ogrinfo with remote KML-urls
Message-ID: <201002230733.22629.stephan.holl@intevation.de>

Hello,

I am trying to use ogrinfo with a URL to a KML-file. I have compiled gdal 
1.7.1 with libcurl, so it _should_ do that.

The Errormessage is the following:
ogrinfo  "http://mw1.google.com/mw-earth-vectordb/haiti/Haiti-Earthquake-nl.kml"

ERROR 1: GeoJSON parsing error: unexpected character (at offset 0)
ERROR 4: Failed to read GeoJSON data
ERROR 1: GeoJSON parsing error: unexpected character (at offset 0)
ERROR 4: Failed to read GeoJSON data
FAILURE:
Unable to open datasource 
`http://mw1.google.com/mw-earth-vectordb/haiti/Haiti-Earthquake-nl.kml' with 
the following drivers.
  -> ESRI Shapefile
  -> MapInfo File
  -> UK .NTF
  -> SDTS
  -> TIGER
  -> S57
  -> DGN
  -> VRT
  -> REC
  -> Memory
  -> BNA
  -> CSV
  -> GML
  -> GPX
  -> KML
  -> GeoJSON
  -> Interlis 1
  -> Interlis 2
  -> GMT
  -> SQLite
  -> ODBC
  -> PGeo
  -> PostgreSQL
  -> PCIDSK
  -> XPlane
  -> AVCBin
  -> AVCE00
  -> DXF
  -> Geoconcept
  -> GeoRSS
  -> GPSTrackMaker

I am unsure about the GeoJSON-notice since I am trying to use the KML_driver.

Is this a known issue that ogrinfo does not work with remote URLs?

TIA

	Stephan

-- 
Stephan Holl <stephan.holl@intevation.de> | Tel.: +49 (0)541-33 508 3663
Intevation GmbH, Neuer Graben 17, 49074 OS  |  AG Osnabr?ck - HR B 18998
Gesch?ftsf?hrer:  Frank Koormann, Bernhard Reiter, Dr. Jan-Oliver Wagner
From ytrapaet at hotmail.com  Tue Feb 23 04:36:02 2010
From: ytrapaet at hotmail.com (anotherObject)
Date: Tue Feb 23 04:42:14 2010
Subject: [gdal-dev] storing height information in a .tif rather the
 grayscale in the tif relying on another file
Message-ID: <1266917762245-4617873.post@n2.nabble.com>


I have successfully been using gdal_translate to convert some tifs. Viewing
my resulting 8 byte tifs through a GIS viewer, the color ramp is perfect.
However I converted these to 8 byte so i could further work with them in
photoshop. 

When I open one of my 8 byte .tifs in photoshop, the DEM looks different
(looks like some type of stretch, cant be sure, but it looks like standard
deviation. 

I gather this means that when gdal is saving the tif, the actual colors it
stores in the tif are not the elevation values themselves, but instead rely
on a histogram calculation (from an outside file) to correct for showing the
actual elevations.I have tried correcting for this in photoshop, but the
histogram tools are not nearly as sophisticated enough for any precise
manipulation. 

I am still a newbie in gdal.  How can i save an 8byte tif so that the actual
.tif grayscale colors are not stretched at all? (does not rely on another
file to correct for this?). Or conversely, how can I convert how a .tif is
stretched? Is this going outside the realm of gdal_translate?

many thanks for any help.
-- 
View this message in context: http://n2.nabble.com/storing-height-information-in-a-tif-rather-the-grayscale-in-the-tif-relying-on-another-file-tp4617873p4617873.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Tue Feb 23 08:40:49 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 23 08:41:34 2010
Subject: [gdal-dev] storing height information in a .tif rather the
	grayscale in the tif relying on another file
In-Reply-To: <1266917762245-4617873.post@n2.nabble.com>
References: <1266917762245-4617873.post@n2.nabble.com>
Message-ID: <4B83DAE1.8020805@pobox.com>

anotherObject wrote:
> I have successfully been using gdal_translate to convert some tifs. Viewing
> my resulting 8 byte tifs through a GIS viewer, the color ramp is perfect.
> However I converted these to 8 byte so i could further work with them in
> photoshop. 
> 
> When I open one of my 8 byte .tifs in photoshop, the DEM looks different
> (looks like some type of stretch, cant be sure, but it looks like standard
> deviation. 
> 
> I gather this means that when gdal is saving the tif, the actual colors it
> stores in the tif are not the elevation values themselves, but instead rely
> on a histogram calculation (from an outside file) to correct for showing the
> actual elevations.I have tried correcting for this in photoshop, but the
> histogram tools are not nearly as sophisticated enough for any precise
> manipulation. 
>

Ytrapaet,

If you had a 16bit DEM with no color information (such as a normal DTED
for instance) the following command would convert to 8bit by linear scaling
of the min/max to 0-255 without applying any color table.  The implicit
color interpretation of the result is greyscale.

   gdal_translate -scale -ot Byte in.dt1 out.tif

I'm not positive what you did, or what you started with since you didn't
explain.

 > I am still a newbie in gdal.  How can i save an 8byte tif so that the actual
 > .tif grayscale colors are not stretched at all? (does not rely on another
 > file to correct for this?). Or conversely, how can I convert how a .tif is
 > stretched? Is this going outside the realm of gdal_translate?

Note that raw DEM data has no inherent coloring so it doesn't really mean
anything to say "so that the actual .tif grayscale colors are not stretched
at all" in this context.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Feb 23 08:46:44 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 23 08:46:21 2010
Subject: [gdal-dev] ogrinfo with remote KML-urls
In-Reply-To: <201002230733.22629.stephan.holl@intevation.de>
References: <201002230733.22629.stephan.holl@intevation.de>
Message-ID: <4B83DC44.5070803@pobox.com>

Stephan Holl wrote:
> Hello,
> 
> I am trying to use ogrinfo with a URL to a KML-file. I have compiled gdal 
> 1.7.1 with libcurl, so it _should_ do that.
> 
> The Errormessage is the following:
> ogrinfo  "http://mw1.google.com/mw-earth-vectordb/haiti/Haiti-Earthquake-nl.kml"
> 
> ERROR 1: GeoJSON parsing error: unexpected character (at offset 0)
> ERROR 4: Failed to read GeoJSON data
> ERROR 1: GeoJSON parsing error: unexpected character (at offset 0)
> ERROR 4: Failed to read GeoJSON data
> FAILURE:
> Unable to open datasource 
> `http://mw1.google.com/mw-earth-vectordb/haiti/Haiti-Earthquake-nl.kml' with 
> the following drivers.
...
> Is this a known issue that ogrinfo does not work with remote URLs?

Stephan,

I am not aware of any support in OGR for working on remote urls.  There is
an http driver in GDAL that sort of supports this for rasters, but I don't
think the same thing exists in OGR.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From aaime at opengeo.org  Tue Feb 23 12:20:28 2010
From: aaime at opengeo.org (Andrea Aime)
Date: Tue Feb 23 12:20:30 2010
Subject: [gdal-dev] Issues repacking shapefiles on Linux with 1.7.1?
Message-ID: <4B840E5C.7070500@opengeo.org>

Hi,
these days I'm trying to resurrect the GeoTools OGR datastore (a bridge 
between the GeoTools data reading API and the OGR one).
Things are working fine, thanks for the nice job on the Java bindings.

The one problem I'm seeing at the moment is an issue trying to repack
shapefiles, when I run the sql command "REPACK <layername>" GDAL prints 
the following error message on the console:

ERROR 4: Failed to create temp file 
/tmp\test-shp7354670084102227244_packed.dbf.

Hum... see the mixup between unix and windows separators?
Do you need a stand-alone example to reproduce the issue?

Cheers
Andrea


From ytrapaet at hotmail.com  Tue Feb 23 13:03:31 2010
From: ytrapaet at hotmail.com (anotherObject)
Date: Tue Feb 23 13:03:33 2010
Subject: [gdal-dev] Re: storing height information in a .tif rather the
 grayscale in the tif relying on another file
In-Reply-To: <4B83DAE1.8020805@pobox.com>
References: <1266917762245-4617873.post@n2.nabble.com>
	<4B83DAE1.8020805@pobox.com>
Message-ID: <1266948211313-4620664.post@n2.nabble.com>


Hi Frank

>Ytrapaet,
>
>If you had a 16bit DEM with no color information (such as a normal DTED
>for instance) the following command would convert to 8bit by linear scaling
>of the min/max to 0-255 without applying any color table.  The implicit
>color interpretation of the result is greyscale.
>
>   gdal_translate -scale -ot Byte in.dt1 out.tif
>
>I'm not positive what you did, or what you started with since you didn't
>explain. 

Sorry for not being clearer: I started off with a a 32bit tif - however, im
not sure how I can tell if it has an associated color table. Are there both
types of tifs? if so how can I convert from one to the other?

What I do know is that when the 32bit elevation model is viewed through
ArcGIS, its default setting was on "standard deviation stretch". If I change
it to "none", it gives the correct elevation values. However, this seems to
only be a display setting; when I converted the 32 to 8bit using
gdal_translate (which is the same as your example), the resulting 8bit image
did not have any stretching when I viewed it in ArcGIS. However,the
conversion did produce my8bit.tif along with my8bit.aux.xml.

Normally, when i open images in photoshop, i only plan to loose the
georeferencing information, however, it seems that when i open my8bit.tif, i
also loose the proper colors. I think this is because the color information
is stored in the .aux.xml file, but I dont know how to produce a .tif that
is any different (that does not have a .aux.xml file)

> Note that raw DEM data has no inherent coloring so it doesn't really mean
> anything to say "so that the actual .tif grayscale colors are not
> stretched
> at all" in this context. 

I tryed converting my 8bit.tif to 8bit.raw, then back to an 8 bit.tif, but i
still always end up with a .aux.xml file even with the .raw route. In other
words, any method I try, I always end up with an image that is correctly
seen my GIS programs, but incorrectly seen by photoshop. I need the correct
grayscale in photoshop so that I can interactively make new RGB color
gradients that use the elevation informaiton. I am definitely missing a
concept somewhere along the way... The way I see it, its the .aux.xml file
about color that I want embedded into the .tif instead. Is this what is
meant by "applying a color table"? 

thanks for helping out
-- 
View this message in context: http://n2.nabble.com/storing-height-information-in-a-tif-rather-the-grayscale-in-the-tif-relying-on-another-file-tp4617873p4620664.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From antonio.rocha at deimos.com.pt  Tue Feb 23 13:18:17 2010
From: antonio.rocha at deimos.com.pt (=?ISO-8859-1?Q?Ant=F3nio_Rocha?=)
Date: Tue Feb 23 13:18:21 2010
Subject: [gdal-dev] Converting GEOS to Gtiff lat/lon
Message-ID: <4B841BE9.2000107@deimos.com.pt>

Greetings

Bas has been helping me in TRANSLATE and WARPING MSG data, in HDF5 
format, to a georrectified format that I can use in GRASS.

First I do this:
gdal_translate -of GTiff -a_srs "+proj=geos +lon_0=0.0 +h=35785831 
+x_0=0.0 +y_0=0.0" -a_ullr -924124.2 5421728.5 4179561.6 3468466.1 
"HDF5:"HDF5_MSG_200802170100"://ABC" "area_georeferenced.tif"
Everything runs smoothly.

Then I have to do:
gdalwarp -s_srs "+proj=geos +lon_0=0.0 +h=35785831 +x_0=0.0 +y_0=0.0" 
-t_srs "+proj=latlong" "area_georeferenced.tif" "euro_area_latlong.tif"

For some datasets I get an image with different size (instead of 1701, 
651 is 1721, 595) and in another cases I get the following error:
Creating output file that is 1721P x 595L.
Processing input file euro_area_georeferenced.tif.
0...10...20...30...40...50...60...70...80...90...ERROR 1: 
TIFFReadDirectory:euro_area_latlong.tif: Can not read TIFF directory count
ERROR 1: TIFFWriteEncodedStrip:euro_area_latlong.tif: Must set 
"ImageWidth" before writing data
ERROR 1: TIFFWriteEncodedStrip:euro_area_latlong.tif: Must set 
"ImageWidth" before writing data
ERROR 1: TIFFWriteEncodedStrip:euro_area_latlong.tif: Must set 
"ImageWidth" before writing data
(...)

Why am I obtaining a smaller dataset and, why I get this error in some 
datasets?


I even tried with different fileformats and the error is the same. Bas 
is using GDAL1.6dev in FWTOOLS and I'm using 1.5.4 in Ubuntu OS (to work 
with GRASS)

Thank you

Best regards
Antonio Rocha


__________ Information from ESET NOD32 Antivirus, version of virus signature database 4890 (20100223) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From warmerdam at pobox.com  Tue Feb 23 14:12:56 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 23 14:12:21 2010
Subject: [gdal-dev] Re: storing height information in a .tif rather the
	grayscale in the tif relying on another file
In-Reply-To: <1266948211313-4620664.post@n2.nabble.com>
References: <1266917762245-4617873.post@n2.nabble.com>
	<4B83DAE1.8020805@pobox.com> <1266948211313-4620664.post@n2.nabble.com>
Message-ID: <4B8428B8.60604@pobox.com>

anotherObject wrote:
> Sorry for not being clearer: I started off with a a 32bit tif - however, im
> not sure how I can tell if it has an associated color table. 

Ytrapaet,

Try running gdalinfo against the file and seeing what it reports.  Including
a gdalinfo report with your email would make it much easier for us to
give a meaningful reply.

> Are there both types of tifs? if so how can I convert from one to the other?

There are many types of TIFF files.  TIFF supports a wide variety of color
models, pixel data types and numbers of bands.


> What I do know is that when the 32bit elevation model is viewed through
> ArcGIS, its default setting was on "standard deviation stretch". If I change
> it to "none", it gives the correct elevation values. However, this seems to
> only be a display setting;

You are correct - this is a display setting in ArcGIS and does not
reflect some fundamental nature of the file.

 >  when I converted the 32 to 8bit using
> gdal_translate (which is the same as your example), the resulting 8bit image
> did not have any stretching when I viewed it in ArcGIS. However,the
> conversion did produce my8bit.tif along with my8bit.aux.xml.
> 
> Normally, when i open images in photoshop, i only plan to loose the
> georeferencing information, however, it seems that when i open my8bit.tif, i
> also loose the proper colors. I think this is because the color information
> is stored in the .aux.xml file, but I dont know how to produce a .tif that
> is any different (that does not have a .aux.xml file)

What colors do you see?  Just a range of greys?  Once again, you speak
of "proper colors", but I will claim there is no inherent colors involved.
Perhaps you just mean it is using a stretch or display mode that does not
meet your expectations or wishes.

>> Note that raw DEM data has no inherent coloring so it doesn't really mean
>> anything to say "so that the actual .tif grayscale colors are not
>> stretched
>> at all" in this context. 
> 
> I tryed converting my 8bit.tif to 8bit.raw,

Two issues.  First, when I said raw I wasn't so much speaking of a file
format, but rather of "dem data as typically provided by data providers
before being processed into special visualization form, like a shaded
relief".  Second, gdal_translate does  *not* decide on file format based
on file extensions, so you just produced a TIFF that happened to have
the extension .raw.

 > then back to an 8 bit.tif, but i
> still always end up with a .aux.xml file even with the .raw route. In other
> words, any method I try, I always end up with an image that is correctly
> seen my GIS programs, but incorrectly seen by photoshop. I need the correct
> grayscale in photoshop so that I can interactively make new RGB color
> gradients that use the elevation informaiton. I am definitely missing a
> concept somewhere along the way... The way I see it, its the .aux.xml file
> about color that I want embedded into the .tif instead. Is this what is
> meant by "applying a color table"? 

I don't know what photoshop does, and you haven't given any details on the
nature of the file (such as a gdalinfo or tiffinfo report).  I am really
not sure I can help you since the issues seem mostly to be "how do I get
photoshop to display things the way I hope it will", and this isn't a
photoshop mailing list.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Feb 23 14:15:05 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 23 14:14:35 2010
Subject: [gdal-dev] ogrinfo with remote KML-urls
In-Reply-To: <4B842698.10100@loskot.net>
References: <201002230733.22629.stephan.holl@intevation.de>
	<4B83DC44.5070803@pobox.com> <4B842698.10100@loskot.net>
Message-ID: <4B842939.4070003@pobox.com>

Mateusz Loskot wrote:
>>> Is this a known issue that ogrinfo does not work with remote URLs?
>> Stephan,
>>
>> I am not aware of any support in OGR for working on remote urls.  There is
>> an http driver in GDAL that sort of supports this for rasters, but I don't
>> think the same thing exists in OGR.
> 
> Frank,
> 
> GeoJSON driver can read GeoJSON stream from remote resource.
> Obviously, Stephan's URL does not point to GeoJSON file,
> but KML, thus it fails.
> AFAIK, the KML driver can't read from URL.

Mateusz,

Ah, I did not realize such magic existed in the geojson driver.  How does
it decide whether it ought to initate an expensive http request?   It
*seems* like a bad idea to embed such behavior in a particular driver.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mateusz at loskot.net  Tue Feb 23 14:34:04 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Feb 23 14:34:13 2010
Subject: [gdal-dev] ogrinfo with remote KML-urls
In-Reply-To: <4B842939.4070003@pobox.com>
References: <201002230733.22629.stephan.holl@intevation.de>
	<4B83DC44.5070803@pobox.com> <4B842698.10100@loskot.net>
	<4B842939.4070003@pobox.com>
Message-ID: <4B842DAC.9000005@loskot.net>

Frank Warmerdam wrote:
> Mateusz Loskot wrote:
>>>> Is this a known issue that ogrinfo does not work with remote URLs?
>>> Stephan,
>>>
>>> I am not aware of any support in OGR for working on remote urls. 
>>> There is
>>> an http driver in GDAL that sort of supports this for rasters, but I
>>> don't
>>> think the same thing exists in OGR.
>>
>> Frank,
>>
>> GeoJSON driver can read GeoJSON stream from remote resource.
>> Obviously, Stephan's URL does not point to GeoJSON file,
>> but KML, thus it fails.
>> AFAIK, the KML driver can't read from URL.
> 
> Mateusz,
> 
> Ah, I did not realize such magic existed in the geojson driver.  How does
> it decide whether it ought to initate an expensive http request? 

If protocol type is any of the three [1] then it decides to read.

> It *seems* like a bad idea to embed such behavior in a
> particular driver.

Yes, I understand your point.
Perhaps I should narrow the test with check if URL consists of "geojson"
token, like http://server/path/geojson/1234 or
ftp://server/path/file.geojson and if not present, then no remote
reading would be performed. Should I?

[1]
http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/geojson/ogrgeojsonutils.cpp#L92
[2]
http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/geojson/ogrgeojsondatasource.cpp#L369

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From mateusz at loskot.net  Tue Feb 23 14:03:52 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Feb 23 14:44:43 2010
Subject: [gdal-dev] ogrinfo with remote KML-urls
In-Reply-To: <4B83DC44.5070803@pobox.com>
References: <201002230733.22629.stephan.holl@intevation.de>
	<4B83DC44.5070803@pobox.com>
Message-ID: <4B842698.10100@loskot.net>

Frank Warmerdam wrote:
> Stephan Holl wrote:
>> Hello,
>>
>> I am trying to use ogrinfo with a URL to a KML-file. I have compiled
>> gdal 1.7.1 with libcurl, so it _should_ do that.
>>
>> The Errormessage is the following:
>> ogrinfo 
>> "http://mw1.google.com/mw-earth-vectordb/haiti/Haiti-Earthquake-nl.kml"
>>
>> ERROR 1: GeoJSON parsing error: unexpected character (at offset 0)
>> ERROR 4: Failed to read GeoJSON data
>> ERROR 1: GeoJSON parsing error: unexpected character (at offset 0)
>> ERROR 4: Failed to read GeoJSON data
>> FAILURE:
>> Unable to open datasource
>> `http://mw1.google.com/mw-earth-vectordb/haiti/Haiti-Earthquake-nl.kml'
>> with the following drivers.
> ...
>> Is this a known issue that ogrinfo does not work with remote URLs?
> 
> Stephan,
> 
> I am not aware of any support in OGR for working on remote urls.  There is
> an http driver in GDAL that sort of supports this for rasters, but I don't
> think the same thing exists in OGR.

Frank,

GeoJSON driver can read GeoJSON stream from remote resource.
Obviously, Stephan's URL does not point to GeoJSON file,
but KML, thus it fails.
AFAIK, the KML driver can't read from URL.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From warmerdam at pobox.com  Tue Feb 23 14:46:42 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 23 14:46:11 2010
Subject: [gdal-dev] ogrinfo with remote KML-urls
In-Reply-To: <4B842DAC.9000005@loskot.net>
References: <201002230733.22629.stephan.holl@intevation.de>
	<4B83DC44.5070803@pobox.com> <4B842698.10100@loskot.net>
	<4B842939.4070003@pobox.com> <4B842DAC.9000005@loskot.net>
Message-ID: <4B8430A2.3010107@pobox.com>

Mateusz Loskot wrote:
>> It *seems* like a bad idea to embed such behavior in a
>> particular driver.
> 
> Yes, I understand your point.
> Perhaps I should narrow the test with check if URL consists of "geojson"
> token, like http://server/path/geojson/1234 or
> ftp://server/path/file.geojson and if not present, then no remote
> reading would be performed. Should I?

Mateusz,

If there was a typical extension for geojson files that would be helpful.
Alternatively, we could take this out of the geojson driver, and handle it
more like GDAL where we have a final "http" driver that will fetch http results
and then re-invoke OGROpen() on the resulting downloaded file.   Then all the
drivers again have a crack at the file.

This would make it work for kml, for instance, and would sure we don't end up
downloading it several times if the logic ends up in several drivers.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mateusz at loskot.net  Tue Feb 23 15:04:19 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Feb 23 15:04:28 2010
Subject: [gdal-dev] ogrinfo with remote KML-urls
In-Reply-To: <4B8430A2.3010107@pobox.com>
References: <201002230733.22629.stephan.holl@intevation.de>
	<4B83DC44.5070803@pobox.com> <4B842698.10100@loskot.net>
	<4B842939.4070003@pobox.com> <4B842DAC.9000005@loskot.net>
	<4B8430A2.3010107@pobox.com>
Message-ID: <4B8434C3.3030103@loskot.net>

Frank Warmerdam wrote:
> Mateusz Loskot wrote:
>>> It *seems* like a bad idea to embed such behavior in a particular
>>> driver.
>> 
>> Yes, I understand your point. Perhaps I should narrow the test with
>> check if URL consists of "geojson" token, like
>> http://server/path/geojson/1234 or ftp://server/path/file.geojson
>> and if not present, then no remote reading would be performed.
>> Should I?
> 
> Mateusz,
> 
> If there was a typical extension for geojson files that would be
> helpful.

Looking at http://featureserver.org/ I suppose a typical extension
is .json but I sort of proposed also .geojson.
I mean, URLs may include string "geojson" as a format request,
so I meant this

http://server/path/geojson/1234

as specific format request (following RESTful thing):

http://server/path/gml/1234
http://server/path/kml/1234
etc.

> Alternatively, we could take this out of the geojson driver, and
> handle it more like GDAL where we have a final "http" driver that
> will fetch http results and then re-invoke OGROpen() on the resulting
> downloaded file.   Then all the drivers again have a crack at the
> file.
> 
> This would make it work for kml, for instance, and would sure we
> don't end up downloading it several times if the logic ends up in
> several drivers.

OK, no problem for me to disable it. Should I?

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From matthewdw at gmail.com  Tue Feb 23 14:12:14 2010
From: matthewdw at gmail.com (Matt Williamson)
Date: Tue Feb 23 15:12:18 2010
Subject: [gdal-dev] Possible bug in gdaldem color-relief,
	zero always transparent
Message-ID: <0F200C15-9DFE-4324-B81C-21E780BE5079@gmail.com>

Hello List,

I may have encountered a bug in gdaldem color-relief. When I use it to apply a color map to a GeoTIFF band that has positive and negative and zero values, the zero pixels are always translated as having alpha 0, even if the color map file explicitly states zero values should be opaque. 

e.g., I'm using a command like this one:

gdaldem color-relief MinT_SFC.EPSG_900913.tif colortables/T_SFC.clr pngs/test.png -alpha -b 1 -of PNG

and a segment of the color table file reads as follows:

-10.0   64  64  64
-0.1   127 127 127 255
0       64  64 127 255
0.1     64  64 127 255
9.9    127 127 192

I can provide a sample dataset that produces this problem, but I'm not sure what the etiquette on attaching files in this list is.

Can anyone confirm they see the same behavior? I'm using 1.7.1, compiled locally. The behavior appears whether my -of is PNG or GTiff, so I don't think it's a driver issue.

I know this has nothing to do with generating elevation maps, but it's too convenient a way to apply a color map to float data--I had been using mapserver just to make colorized PNGs, and gdaldem is so much cleaner.

Thanks!

-Matt

From even.rouault at mines-paris.org  Tue Feb 23 15:50:44 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb 23 15:50:58 2010
Subject: [gdal-dev] Possible bug in gdaldem color-relief,
	zero always transparent
In-Reply-To: <0F200C15-9DFE-4324-B81C-21E780BE5079@gmail.com>
References: <0F200C15-9DFE-4324-B81C-21E780BE5079@gmail.com>
Message-ID: <201002232150.45883.even.rouault@mines-paris.org>

I think the problem lies in you .clr file. I pasted the content from the email 
into a file, and when looking with an hexadecimal editor, I see that there 
are several instances of a strange hexadecimal sequence "0xc2 0xa0" that is 
used as a separator between the figures. If your original .clr file has 
really those, and they are not an artifact of pasting into the email, then 
this is the cause of your issue, as the parser only supports spaces, 
tabulations, commas or colons. When fixing the clr file, I get expected 
results.

Le Tuesday 23 February 2010 20:12:14 Matt Williamson, vous avez ?crit?:
> Hello List,
>
> I may have encountered a bug in gdaldem color-relief. When I use it to
> apply a color map to a GeoTIFF band that has positive and negative and zero
> values, the zero pixels are always translated as having alpha 0, even if
> the color map file explicitly states zero values should be opaque.
>
> e.g., I'm using a command like this one:
>
> gdaldem color-relief MinT_SFC.EPSG_900913.tif colortables/T_SFC.clr
> pngs/test.png -alpha -b 1 -of PNG
>
> and a segment of the color table file reads as follows:
>
> -10.0   64  64  64
> -0.1   127 127 127 255
> 0       64  64 127 255
> 0.1     64  64 127 255
> 9.9    127 127 192
>
> I can provide a sample dataset that produces this problem, but I'm not sure
> what the etiquette on attaching files in this list is.
>
> Can anyone confirm they see the same behavior? I'm using 1.7.1, compiled
> locally. The behavior appears whether my -of is PNG or GTiff, so I don't
> think it's a driver issue.
>
> I know this has nothing to do with generating elevation maps, but it's too
> convenient a way to apply a color map to float data--I had been using
> mapserver just to make colorized PNGs, and gdaldem is so much cleaner.
>
> Thanks!
>
> -Matt
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From maxime at mguillaud.net  Tue Feb 23 15:54:26 2010
From: maxime at mguillaud.net (Maxime Guillaud)
Date: Tue Feb 23 16:14:51 2010
Subject: [gdal-dev] gdal_contour and "nodata" oceans
Message-ID: <20100223215426.47b24863@gotlib>

Hi all,

I am trying to have gdal_contour operate on SRTM data from CGIAR
(http://srtm.csi.cgiar.org/). The problem is that this dataset has
oceans set to "nodata". This creates ugly artifacts along the shores
(you can see an example here on the red lines:
http://www.mguillaud.net/tmp/Screenshot.png - in contrast, the blue
contour lines were generated by gdal_contour from another DEM file with
sea-level at zero - however I can not use this second data source
because it has other defects).

Now, I would like to either
1. set all "nodata" points to an arbitrary elevation (zero) directly
in the GeoTIFF file, or
2. make gdal_contour assume that nodata means elevation zero.

I would be grateful if anyone can point me to a way to do either of the
above !

cheers,
Maxime
From matthewdw at gmail.com  Tue Feb 23 16:26:44 2010
From: matthewdw at gmail.com (Matt Williamson)
Date: Tue Feb 23 16:26:48 2010
Subject: [gdal-dev] Possible bug in gdaldem color-relief,
	zero always transparent
In-Reply-To: <201002232150.45883.even.rouault@mines-paris.org>
References: <0F200C15-9DFE-4324-B81C-21E780BE5079@gmail.com>
	<201002232150.45883.even.rouault@mines-paris.org>
Message-ID: <74B7974D-E8AB-4786-A0CD-299F96FD0615@gmail.com>

Hmm! Thanks, that is definitely not something I would have checked--However, I don't think it's my problem. I checked my .clr file I'm running, and I don't see anything out of the ordinary:

$ xxd T_SFC.clr 
0000000: 2d34 302e 3020 2031 3237 2032 3535 2032  -40.0  127 255 2
0000010: 3535 0a2d 3330 2e31 2020 3139 3220 3235  55.-30.1  192 25
...
0000070: 320a 2d31 302e 3020 2020 3634 2020 3634  2.-10.0   64  64
0000080: 2020 3634 0a2d 302e 3120 2020 3132 3720    64.-0.1   127 
0000090: 3132 3720 3132 3720 3235 350a 3020 2020  127 127 255.0   
00000a0: 2020 2020 3634 2020 3634 2031 3237 2032      64  64 127 2
00000b0: 3535 0a30 2e31 2020 2020 2036 3420 2036  55.0.1     64  6
00000c0: 3420 3132 3720 3235 350a 392e 3920 2020  4 127 255.9.9   
...

You ran it on a dataset with zeroes? Everything works properly for me except the zero values in the source GeoTIFF--everything else is colored as expected, with the correct alpha values.

In fact (I probably should have mentioned this), when I first noticed the problem, I did not have the 0.1 value line in there, and it was actually interpolating the alpha from 0-255 between the values 0 and 9.9 (i.e. it got progressively more opaque between those values).

Also, FWIW, I encountered this issue under 1.7.0 and upgraded to 1.7.1 to make sure it wasn't a bug fixed in .1, but no, it does it in both versions.

-Matt


On Feb 23, 2010, at 1:50 PM, Even Rouault wrote:

> I think the problem lies in you .clr file. I pasted the content from the email 
> into a file, and when looking with an hexadecimal editor, I see that there 
> are several instances of a strange hexadecimal sequence "0xc2 0xa0" that is 
> used as a separator between the figures. If your original .clr file has 
> really those, and they are not an artifact of pasting into the email, then 
> this is the cause of your issue, as the parser only supports spaces, 
> tabulations, commas or colons. When fixing the clr file, I get expected 
> results.
> 
> Le Tuesday 23 February 2010 20:12:14 Matt Williamson, vous avez ?crit :
>> Hello List,
>> 
>> I may have encountered a bug in gdaldem color-relief. When I use it to
>> apply a color map to a GeoTIFF band that has positive and negative and zero
>> values, the zero pixels are always translated as having alpha 0, even if
>> the color map file explicitly states zero values should be opaque.
>> 
>> e.g., I'm using a command like this one:
>> 
>> gdaldem color-relief MinT_SFC.EPSG_900913.tif colortables/T_SFC.clr
>> pngs/test.png -alpha -b 1 -of PNG
>> 
>> and a segment of the color table file reads as follows:
>> 
>> -10.0   64  64  64
>> -0.1   127 127 127 255
>> 0       64  64 127 255
>> 0.1     64  64 127 255
>> 9.9    127 127 192
>> 
>> I can provide a sample dataset that produces this problem, but I'm not sure
>> what the etiquette on attaching files in this list is.
>> 
>> Can anyone confirm they see the same behavior? I'm using 1.7.1, compiled
>> locally. The behavior appears whether my -of is PNG or GTiff, so I don't
>> think it's a driver issue.
>> 
>> I know this has nothing to do with generating elevation maps, but it's too
>> convenient a way to apply a color map to float data--I had been using
>> mapserver just to make colorized PNGs, and gdaldem is so much cleaner.
>> 
>> Thanks!
>> 
>> -Matt
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

From even.rouault at mines-paris.org  Tue Feb 23 17:00:31 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb 23 17:00:43 2010
Subject: [gdal-dev] gdal_contour and "nodata" oceans
In-Reply-To: <20100223215426.47b24863@gotlib>
References: <20100223215426.47b24863@gotlib>
Message-ID: <201002232300.32324.even.rouault@mines-paris.org>

Maxime,

you can try the following tricks to remap your nodata value from -32768 (this 
is type typical value for most DEM) to 0 :

1) gdalwarp -srcnodata -32768 -dstnodata 0 src_dem.tif out_dem.tif

2) or gdalbuildvrt -srcnodata -32768 -vrtnodata 0 out_dem.vrt src_dem.tif
(you need GDAL 1.7.1 for the latest)

and then use gdal_contour on out_dem.tif or out_dem.vrt

Le Tuesday 23 February 2010 21:54:26 Maxime Guillaud, vous avez ?crit?:
> Hi all,
>
> I am trying to have gdal_contour operate on SRTM data from CGIAR
> (http://srtm.csi.cgiar.org/). The problem is that this dataset has
> oceans set to "nodata". This creates ugly artifacts along the shores
> (you can see an example here on the red lines:
> http://www.mguillaud.net/tmp/Screenshot.png - in contrast, the blue
> contour lines were generated by gdal_contour from another DEM file with
> sea-level at zero - however I can not use this second data source
> because it has other defects).
>
> Now, I would like to either
> 1. set all "nodata" points to an arbitrary elevation (zero) directly
> in the GeoTIFF file, or
> 2. make gdal_contour assume that nodata means elevation zero.
>
> I would be grateful if anyone can point me to a way to do either of the
> above !
>
> cheers,
> Maxime
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Tue Feb 23 17:55:48 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb 23 17:55:58 2010
Subject: [gdal-dev] Possible bug in gdaldem color-relief,
	zero always transparent
In-Reply-To: <74B7974D-E8AB-4786-A0CD-299F96FD0615@gmail.com>
References: <0F200C15-9DFE-4324-B81C-21E780BE5079@gmail.com>
	<201002232150.45883.even.rouault@mines-paris.org>
	<74B7974D-E8AB-4786-A0CD-299F96FD0615@gmail.com>
Message-ID: <201002232355.48650.even.rouault@mines-paris.org>

Hum, then I have no clue. Yes I tested with a dataset with zeros.

You can file a ticket on Trac with the dataset and the .clr file attached, 
provided that the dataset is not too big (no more than 1 MB). Otherwise, 
you'll have to provide a link to the dataset.

Le Tuesday 23 February 2010 22:26:44 Matt Williamson, vous avez ?crit?:
> Hmm! Thanks, that is definitely not something I would have
> checked--However, I don't think it's my problem. I checked my .clr file I'm
> running, and I don't see anything out of the ordinary:
>
> $ xxd T_SFC.clr
> 0000000: 2d34 302e 3020 2031 3237 2032 3535 2032  -40.0  127 255 2
> 0000010: 3535 0a2d 3330 2e31 2020 3139 3220 3235  55.-30.1  192 25
> ...
> 0000070: 320a 2d31 302e 3020 2020 3634 2020 3634  2.-10.0   64  64
> 0000080: 2020 3634 0a2d 302e 3120 2020 3132 3720    64.-0.1   127
> 0000090: 3132 3720 3132 3720 3235 350a 3020 2020  127 127 255.0
> 00000a0: 2020 2020 3634 2020 3634 2031 3237 2032      64  64 127 2
> 00000b0: 3535 0a30 2e31 2020 2020 2036 3420 2036  55.0.1     64  6
> 00000c0: 3420 3132 3720 3235 350a 392e 3920 2020  4 127 255.9.9
> ...
>
> You ran it on a dataset with zeroes? Everything works properly for me
> except the zero values in the source GeoTIFF--everything else is colored as
> expected, with the correct alpha values.
>
> In fact (I probably should have mentioned this), when I first noticed the
> problem, I did not have the 0.1 value line in there, and it was actually
> interpolating the alpha from 0-255 between the values 0 and 9.9 (i.e. it
> got progressively more opaque between those values).
>
> Also, FWIW, I encountered this issue under 1.7.0 and upgraded to 1.7.1 to
> make sure it wasn't a bug fixed in .1, but no, it does it in both versions.
>
> -Matt
>
> On Feb 23, 2010, at 1:50 PM, Even Rouault wrote:
> > I think the problem lies in you .clr file. I pasted the content from the
> > email into a file, and when looking with an hexadecimal editor, I see
> > that there are several instances of a strange hexadecimal sequence "0xc2
> > 0xa0" that is used as a separator between the figures. If your original
> > .clr file has really those, and they are not an artifact of pasting into
> > the email, then this is the cause of your issue, as the parser only
> > supports spaces, tabulations, commas or colons. When fixing the clr file,
> > I get expected results.
> >
> > Le Tuesday 23 February 2010 20:12:14 Matt Williamson, vous avez ?crit :
> >> Hello List,
> >>
> >> I may have encountered a bug in gdaldem color-relief. When I use it to
> >> apply a color map to a GeoTIFF band that has positive and negative and
> >> zero values, the zero pixels are always translated as having alpha 0,
> >> even if the color map file explicitly states zero values should be
> >> opaque.
> >>
> >> e.g., I'm using a command like this one:
> >>
> >> gdaldem color-relief MinT_SFC.EPSG_900913.tif colortables/T_SFC.clr
> >> pngs/test.png -alpha -b 1 -of PNG
> >>
> >> and a segment of the color table file reads as follows:
> >>
> >> -10.0   64  64  64
> >> -0.1   127 127 127 255
> >> 0       64  64 127 255
> >> 0.1     64  64 127 255
> >> 9.9    127 127 192
> >>
> >> I can provide a sample dataset that produces this problem, but I'm not
> >> sure what the etiquette on attaching files in this list is.
> >>
> >> Can anyone confirm they see the same behavior? I'm using 1.7.1, compiled
> >> locally. The behavior appears whether my -of is PNG or GTiff, so I don't
> >> think it's a driver issue.
> >>
> >> I know this has nothing to do with generating elevation maps, but it's
> >> too convenient a way to apply a color map to float data--I had been
> >> using mapserver just to make colorized PNGs, and gdaldem is so much
> >> cleaner.
> >>
> >> Thanks!
> >>
> >> -Matt
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From ekkehart at gmx.de  Tue Feb 23 17:56:35 2010
From: ekkehart at gmx.de (NopMap)
Date: Tue Feb 23 17:56:36 2010
Subject: [gdal-dev] Re: Gdal / Python / Win7 crash with ReadAsArray()
In-Reply-To: <4B50E17F.9000204@noaa.gov>
References: <e7d9427f1001150436s4c513b9ch7b6416bf31fafefc@mail.gmail.com>
	<4B50E17F.9000204@noaa.gov>
Message-ID: <1266965795875-4622435.post@n2.nabble.com>



Hi!

Any progress on this? I am having exactly the same problem. I am using GDAL
1.6, Python binding 1.6 for python 2.6 on a Windows 7 64bit machine.

When I try to use gdal_merge.py, python crashes with the same error message
in ntdll.dll.

Any ideas on how to fix this?

bye
        Nop
-- 
View this message in context: http://n2.nabble.com/Gdal-Python-Win7-crash-with-ReadAsArray-tp4398401p4622435.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ivar at avenza.com  Tue Feb 23 18:02:16 2010
From: ivar at avenza.com (ivar)
Date: Tue Feb 23 18:08:59 2010
Subject: [gdal-dev] Re: storing height information in a .tif rather
	the	grayscale in the tif relying on another file
In-Reply-To: <20100223194614.92F2FE01EA1@lists.osgeo.org>
References: <20100223194614.92F2FE01EA1@lists.osgeo.org>
Message-ID: <4B845E78.9080100@avenza.com>

Ytrapaet,
     There is no such thing as an 'associated color table' in strict 
TIFF meaning. In the specific case of DEM TIFF you have either one of 
two cases: 1) a grayscale TIFF that is generated using some sort of 
mapping between raw elevation values and grayscale colors. If the 
mapping is 1-to-1 which is, of course, normally only possible for 16 or 
32 bit grayscale color mode, it can be called "raw" data, since it 
allows conversion back to the original  values, well, at least with 
integer precision. This grayscale TIFFs can be rendered by various 
software packages using whatever colorization method they default to or 
whatever the user choice is; obviously in case of Photoshop there is no 
default and its up to the user to apply whatever gradient they choose 
manually 2) a pre-colorized TIFF, basically 2D or 3D rendering of the 
DEM data where the raw values are irreversibly replaced by the image 
rendition using selected colorization schema. The choice is determined, 
say, in ArcGIS by 'Use rendered' checkbox on export. There are, of 
course, some other formats (ESRI HDR, for example) that indeed do store 
a color table separately, however in any case this is not a kind of 
information that Photoshop would render out-of-the-box. Moreover, even 
rendering a simple 16-bit graysclae image in Photoshop is not performed 
on a 1-1 mapping basis  - Adobe has their own way of re-interpreting 
values for display purpose and I remember having to dig through Adobe 
forums unraveling these mysteries when working on our Geographic Imager 
product. In any case, I think Frank is right and indeed it is more of a 
Photoshop discussion at this point. If you want, you can contact me 
offline or/and send your sample data if you still have any specific 
questions.

     ivar
     Avenza Systems Inc

On 23/02/2010 2:46 PM, gdal-dev-request@lists.osgeo.org wrote:
> Message: 4 Date: Tue, 23 Feb 2010 14:12:56 -0500 From: Frank Warmerdam 
> <warmerdam@pobox.com> Subject: Re: [gdal-dev] Re: storing height 
> information in a .tif rather the grayscale in the tif relying on 
> another file To: anotherObject <ytrapaet@hotmail.com> Cc: 
> gdal-dev@lists.osgeo.org Message-ID: <4B8428B8.60604@pobox.com> 
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed 
> anotherObject wrote:
>> >  Sorry for not being clearer: I started off with a a 32bit tif - however, im
>> >  not sure how I can tell if it has an associated color table.
>>      
> Ytrapaet,
>
> Try running gdalinfo against the file and seeing what it reports.  Including
> a gdalinfo report with your email would make it much easier for us to
> give a meaningful reply.
>
>    
>> >  Are there both types of tifs? if so how can I convert from one to the other?
>>      
> There are many types of TIFF files.  TIFF supports a wide variety of color
> models, pixel data types and numbers of bands.
>
>
>    
>> >  What I do know is that when the 32bit elevation model is viewed through
>> >  ArcGIS, its default setting was on "standard deviation stretch". If I change
>> >  it to "none", it gives the correct elevation values. However, this seems to
>> >  only be a display setting;
>>      
> You are correct - this is a display setting in ArcGIS and does not
> reflect some fundamental nature of the file.
>
>   >   when I converted the 32 to 8bit using
>    
>> >  gdal_translate (which is the same as your example), the resulting 8bit image
>> >  did not have any stretching when I viewed it in ArcGIS. However,the
>> >  conversion did produce my8bit.tif along with my8bit.aux.xml.
>> >  
>> >  Normally, when i open images in photoshop, i only plan to loose the
>> >  georeferencing information, however, it seems that when i open my8bit.tif, i
>> >  also loose the proper colors. I think this is because the color information
>> >  is stored in the .aux.xml file, but I dont know how to produce a .tif that
>> >  is any different (that does not have a .aux.xml file)
>>      
> What colors do you see?  Just a range of greys?  Once again, you speak
> of "proper colors", but I will claim there is no inherent colors involved.
> Perhaps you just mean it is using a stretch or display mode that does not
> meet your expectations or wishes.
>
>    
>>> >>  Note that raw DEM data has no inherent coloring so it doesn't really mean
>>> >>  anything to say "so that the actual .tif grayscale colors are not
>>> >>  stretched
>>> >>  at all" in this context.
>>>        
>> >  
>> >  I tryed converting my 8bit.tif to 8bit.raw,
>>      
> Two issues.  First, when I said raw I wasn't so much speaking of a file
> format, but rather of "dem data as typically provided by data providers
> before being processed into special visualization form, like a shaded
> relief".  Second, gdal_translate does*not*  decide on file format based
> on file extensions, so you just produced a TIFF that happened to have
> the extension .raw.
>
>   >  then back to an 8 bit.tif, but i
>    
>> >  still always end up with a .aux.xml file even with the .raw route. In other
>> >  words, any method I try, I always end up with an image that is correctly
>> >  seen my GIS programs, but incorrectly seen by photoshop. I need the correct
>> >  grayscale in photoshop so that I can interactively make new RGB color
>> >  gradients that use the elevation informaiton. I am definitely missing a
>> >  concept somewhere along the way... The way I see it, its the .aux.xml file
>> >  about color that I want embedded into the .tif instead. Is this what is
>> >  meant by "applying a color table"?
>>      
> I don't know what photoshop does, and you haven't given any details on the
> nature of the file (such as a gdalinfo or tiffinfo report).  I am really
> not sure I can help you since the issues seem mostly to be "how do I get
> photoshop to display things the way I hope it will", and this isn't a
> photoshop mailing list.
>
> Best regards,
> -- 
> ---------------------------------------+-------------------------------------- 
> I set the clouds in motion - turn up | Frank Warmerdam, 
> warmerdam@pobox.com light and sound - activate the windows | 
> http://pobox.com/~warmerdam and watch the world go round - Rush | 
> Geospatial Programmer for Rent

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100223/2227d80a/attachment-0001.html
From ytrapaet at hotmail.com  Tue Feb 23 18:14:05 2010
From: ytrapaet at hotmail.com (anotherObject)
Date: Tue Feb 23 18:14:07 2010
Subject: [gdal-dev] Re: storing height information in a .tif rather the
 grayscale in the tif relying on another file
In-Reply-To: <4B8428B8.60604@pobox.com>
References: <1266917762245-4617873.post@n2.nabble.com>
	<4B83DAE1.8020805@pobox.com>
	<1266948211313-4620664.post@n2.nabble.com>
	<4B8428B8.60604@pobox.com>
Message-ID: <1266966845907-4622532.post@n2.nabble.com>


Thanks for your patience,

The metadata about my file is wrong because it is the metadata from the
deriving 32 bit file. If I calculate the statistics of my new 8 bit file
(which i do in ArcGIS, i dont know if GDAL does this?), then the statistics
are correct, but ArcGIS also applies a standard deviation stretch to the
display of the grayscale, which I do not want and cannot undo. For some
reason calculate statistics in ArcGIS by default stetches the color display.
 
that said, below is info about both versions of the 8 bit file:

A) 8bitfile with wrong metadata (but right color display in ArcGIS)

C:\>gdalinfo -nomd -stats M:\GIS_data\a_temp\globe8b_nostats.tif
Driver: GTiff/GeoTIFF
Files: M:\GIS_data\a_temp\globe8b_nostats.tif
       M:\GIS_data\a_temp\globe8b_nostats.aux
       M:\GIS_data\a_temp\globe8b_nostats.tif.aux.xml
Size is 10800, 5400
Coordinate System is `'
Origin = (-180.008333333340000,90.008333369334991)
Pixel Size = (0.033334876549877,-0.033336419759754)
Corner Coordinates:
Upper Left  (-180.0083333,  90.0083334)
Lower Left  (-180.0083333, -90.0083333)
Upper Right ( 180.0083334,  90.0083334)
Lower Right ( 180.0083334, -90.0083333)
Center      (   0.0000000,   0.0000000)
Band 1 Block=10800x1 Type=Byte, ColorInterp=Gray
  Min=-10898.000 Max=7966.000
  Minimum=-10898.000, Maximum=7966.000, Mean=-1892.469, StdDev=2650.051
  NoData Value=-3.4028234663852886e+038


A) 8bitfile with right metadata (but wrong color display in ArcGIS)

C:\>gdalinfo -nomd -stats M:\GIS_data\a_temp\globe8b_stats.tif
Driver: GTiff/GeoTIFF
Files: M:\GIS_data\a_temp\globe8b_stats.tif
       M:\GIS_data\a_temp\globe8b_stats.aux
Size is 10800, 5400
Coordinate System is `'
Origin = (-180.008333333340000,90.008333369334991)
Pixel Size = (0.033334876549877,-0.033336419759754)
Corner Coordinates:
Upper Left  (-180.0083333,  90.0083334)
Lower Left  (-180.0083333, -90.0083333)
Upper Right ( 180.0083334,  90.0083334)
Lower Right ( 180.0083334, -90.0083333)
Center      (   0.0000000,   0.0000000)
Band 1 Block=10800x1 Type=Byte, ColorInterp=Gray
  Min=1.000 Max=255.000
  Minimum=1.000, Maximum=255.000, Mean=121.757, StdDev=35.684
  NoData Value=-3.4028234663852886e+038


To restate my goal, I want to somehow export an 8bit image that precisely
(with no stretching) keeps grayscale elevation values in one image file (a
tif, jpg or png...), preferably with no .aux files, so that there are no
complications when reading the image with non-GIS software.

Is there some export or create  function that I should use for this goal
with pythonwin+GDAL? Perhaps I just need an infusion of new terms, I do not
know how do describe what I am trying to do in more technical terms that
might be useful for searching for solutions. More and more I somehow thing
that numpy+PIL might be a better route, although I started with GDAL because
I thought it would be an easier route that is also more useful in the long
run. thanks!


-- 
View this message in context: http://n2.nabble.com/storing-height-information-in-a-tif-rather-the-grayscale-in-the-tif-relying-on-another-file-tp4617873p4622532.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From dan at gina.alaska.edu  Tue Feb 23 21:09:35 2010
From: dan at gina.alaska.edu (Dan Stahlke)
Date: Tue Feb 23 21:15:12 2010
Subject: [gdal-dev] Re: nodata - mask question
References: <681116191002030654i49860bd0gd385dd28f4009e20@mail.gmail.com>
Message-ID: <hm21ov$q8s$1@dough.gmane.org>

On Wed, 03 Feb 2010 09:54:10 -0500, Travis Kirstine wrote:

> I have a general question regarding how to handle the null values with 1
> band byte grey scale images.  Typically I will receive a image with
> pixels at the edges of a image with a  value of 0 however some of the
> interior pixel values (shadow areas) share the same pixel value.  My old
> approach was just to ignore the interior values and run gdalwarp
> indicating the source and target nodata as 0.
> 
> Is there a method currently available to distinguish between valid and
> invalid nodata values when they both share the same pixel value?

Travis,

I have created a tool to solve just this problem.  It works in Linux, and 
people have also gotten it to compile in Windows with some work.  You can 
download it from here:
    http://www.gina.alaska.edu/projects/gina-tools/

The utility of interest for your purpose is "gdal_trace_outline".  
Basically, you tell it various things about your image, such as the 
nodata value, whether the image has internal holes in it (like a 
doughnut), etc.  It traces the outline, uses some fuzzy logic to deal 
with raggedy edges due to shadows that hit the nodata value, and then 
outputs a WKT file and a mask file.  You can then use the mask to cut 
things out using ImageMagick or netpbm, or you could probably turn it 
into a mask band using GDAL's VRT format.

- Dan

From benjamin.r.welton at wmich.edu  Tue Feb 23 22:03:38 2010
From: benjamin.r.welton at wmich.edu (Benjamin Welton)
Date: Tue Feb 23 22:08:46 2010
Subject: [gdal-dev] Reading a single pixel from multiple bands at the same
	time in python
Message-ID: <4B84970A.3080201@wmich.edu>

Hey,

    Iv got a question on whether or not its possible to read a single 
pixel value from multiple bands using one GDAL call in python? The file 
working with is an ENVI BIP file that has a large number of bands 
(around 1000) and im looking for a way to reduce the python overhead by 
only making one single call into the GDAL library. GDALDataset::RasterIO 
seems like it might be the function i need to use but im 100% sure. If 
anyone has any suggestions or hints on whether or not this is possible 
that would be great.

Thanks,
Ben
From odonnems at yahoo.com  Tue Feb 23 22:09:02 2010
From: odonnems at yahoo.com (Michael ODonnell)
Date: Tue Feb 23 22:15:44 2010
Subject: [gdal-dev] Problem with links and compiling C++ app using GDAL
	libraries
Message-ID: <254219.65131.qm@web58005.mail.re3.yahoo.com>

I have written a C++ application that uses GDAL libraries for raster analysis. The compiling crashes when trying to link to gdal libraries. I am getting an error for every GDAL object such as:
  [Linker error] undefined reference to `GDALAllRegister'
  [Linker error] undefined reference to `GDALOpen'
  ...
  ...

Can anyone help me with this because I am entirely lost as to what I have done wrong.

Thank you for your help,
Mike


My include files are:
#include <gdal_priv.h>
#include <cpl_string.h>

Project Options Linker:
-L"<path>/bin" -lgdal14

I have also set project Options Include and library directories.

OS: Windows XP SP3


Makefile.win:
# Project: Focal_Stats
# Makefile created by Dev-C++ 4.9.9.2

CPP  = g++.exe -D__DEBUG__
CC   = gcc.exe -D__DEBUG__
WINDRES = windres.exe
RES  = Focal_Stats_private.res
OBJ  = FocalStats.o $(RES)
LINKOBJ  = FocalStats.o $(RES)
LIBS =  -L"C:/Dev-Cpp/lib" -L"C:/Data_314/MW_C++/Focal_Stats_App/gdal_source_lib/gdalwin32dev141/gdalwin32-1.4.1/lib" -L"C:/Data_314/MW_C++/Focal_Stats_App/gdal_source_lib/gdalwin32exe141/gdalwin32-1.4.1/bin" -L"C:/Data_314/MW_C++/gdal_source_lib/gdalwin32exe141/gdalwin32-1.4.1/bin" -lgdal14  -lgmon -pg  -g3 
INCS =  -I"C:/Dev-Cpp/include"  -I"C:/Data_314/MW_C++/Focal_Stats_App/gdal_source_lib/gdalwin32dev141/gdalwin32-1.4.1/include" 
CXXINCS =  -I"C:/Dev-Cpp/lib/gcc/mingw32/3.4.2/include"  -I"C:/Dev-Cpp/include/c++/3.4.2/backward"  -I"C:/Dev-Cpp/include/c++/3.4.2/mingw32"  -I"C:/Dev-Cpp/include/c++/3.4.2"  -I"C:/Dev-Cpp/include"  -I"C:/Data_314/MW_C++/Focal_Stats_App/gdal_source_lib/gdalwin32dev141/gdalwin32-1.4.1/include" 
BIN  = Focal_Stats.exe
CXXFLAGS = $(CXXINCS)   -pg -g3
CFLAGS = $(INCS)   -pg -g3
RM = rm -f

.PHONY: all all-before all-after clean clean-custom

all: all-before Focal_Stats.exe all-after


clean: clean-custom
	${RM} $(OBJ) $(BIN)

$(BIN): $(OBJ)
	$(CPP) $(LINKOBJ) -o "Focal_Stats.exe" $(LIBS)

FocalStats.o: FocalStats.cpp
	$(CPP) -c FocalStats.cpp -o FocalStats.o $(CXXFLAGS)

Focal_Stats_private.res: Focal_Stats_private.rc 
	$(WINDRES) -i Focal_Stats_private.rc --input-format=rc -o Focal_Stats_private.res -O coff



      
From warmerdam at pobox.com  Tue Feb 23 22:25:00 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 23 22:24:19 2010
Subject: [gdal-dev] Reading a single pixel from multiple bands at the
	same time in python
In-Reply-To: <4B84970A.3080201@wmich.edu>
References: <4B84970A.3080201@wmich.edu>
Message-ID: <4B849C0C.1020402@pobox.com>

Benjamin Welton wrote:
> Hey,
> 
>    Iv got a question on whether or not its possible to read a single 
> pixel value from multiple bands using one GDAL call in python? The file 
> working with is an ENVI BIP file that has a large number of bands 
> (around 1000) and im looking for a way to reduce the python overhead by 
> only making one single call into the GDAL library. GDALDataset::RasterIO 
> seems like it might be the function i need to use but im 100% sure. If 
> anyone has any suggestions or hints on whether or not this is possible 
> that would be great.

Ben,

You can use the ReadAsArray() method on a gdal.Dataset to read multiple
bands in one call as an array object:

ds = gdal.Open('/home/warmerda/public_html/world.tif')
d = ds.ReadAsArray(0,0,1,1)
print d
[[[11]]

  [[10]]

  [[50]]]

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From maxime at mguillaud.net  Wed Feb 24 02:26:42 2010
From: maxime at mguillaud.net (Maxime Guillaud)
Date: Wed Feb 24 02:26:53 2010
Subject: [gdal-dev] gdal_contour and "nodata" oceans
In-Reply-To: <201002232300.32324.even.rouault@mines-paris.org>
References: <20100223215426.47b24863@gotlib>
	<201002232300.32324.even.rouault@mines-paris.org>
Message-ID: <20100224082642.41a051e7@gotlib>


On Tue, 23 Feb 2010 23:00:31 +0100 Even Rouault
<even.rouault@mines-paris.org> wrote:
> you can try the following tricks to remap your nodata value from
> -32768 (this is type typical value for most DEM) to 0 :
> 
> 1) gdalwarp -srcnodata -32768 -dstnodata 0 src_dem.tif out_dem.tif

Thanks, that helped. I had to run gdalwarp a second time on the output
with "-scrnodata -32768 -dstnodata -32768" to reset the value of nodata
in the GeoTIFF metadata, otherwise gdal_contour is honoring altitude
zero as nodata.

Maxime
From stephan.holl at intevation.de  Wed Feb 24 03:15:41 2010
From: stephan.holl at intevation.de (Stephan Holl)
Date: Wed Feb 24 03:18:43 2010
Subject: [gdal-dev] ogrinfo with remote KML-urls
In-Reply-To: <4B8434C3.3030103@loskot.net>
References: <201002230733.22629.stephan.holl@intevation.de>
	<4B83DC44.5070803@pobox.com> <4B842698.10100@loskot.net>
	<4B842939.4070003@pobox.com> <4B842DAC.9000005@loskot.net>
	<4B8430A2.3010107@pobox.com> <4B8434C3.3030103@loskot.net>
Message-ID: <20100224091541.08e9b103@thoe.hq.intevation.de>

Hello Mateusz, Frank,

thanks for your elaborated answers. This confirmes what I thought.

So the changes Frank suggested in this thread seem to work also for
KML when it will be done in a future release of gdal. In the meanwhile I
will wrap the ogr-call in a wrapper who does the curl-stuff.

If you decide to change it like Frank proposed I would be happy to get
CCed to the related ticket.

Thanks for your help!

	Stephan


Mateusz Loskot <mateusz@loskot.net>, [20100223 - 20:04:19]

> Frank Warmerdam wrote:
> > Mateusz Loskot wrote:
> >>> It *seems* like a bad idea to embed such behavior in a particular
> >>> driver.
> >> 
> >> Yes, I understand your point. Perhaps I should narrow the test with
> >> check if URL consists of "geojson" token, like
> >> http://server/path/geojson/1234 or ftp://server/path/file.geojson
> >> and if not present, then no remote reading would be performed.
> >> Should I?
> > 
> > Mateusz,
> > 
> > If there was a typical extension for geojson files that would be
> > helpful.
> 
> Looking at http://featureserver.org/ I suppose a typical extension
> is .json but I sort of proposed also .geojson.
> I mean, URLs may include string "geojson" as a format request,
> so I meant this
> 
> http://server/path/geojson/1234
> 
> as specific format request (following RESTful thing):
> 
> http://server/path/gml/1234
> http://server/path/kml/1234
> etc.
> 
> > Alternatively, we could take this out of the geojson driver, and
> > handle it more like GDAL where we have a final "http" driver that
> > will fetch http results and then re-invoke OGROpen() on the
> > resulting downloaded file.   Then all the drivers again have a
> > crack at the file.
> > 
> > This would make it work for kml, for instance, and would sure we
> > don't end up downloading it several times if the logic ends up in
> > several drivers.
> 
> OK, no problem for me to disable it. Should I?
> 
> Best regards,


-- 
Stephan Holl <stephan.holl@intevation.de> | Tel.: +49 (0)541-33 508 3663
Intevation GmbH, Neuer Graben 17, 49074 OS  |  AG Osnabr?ck - HR B 18998
Gesch?ftsf?hrer:  Frank Koormann, Bernhard Reiter, Dr. Jan-Oliver Wagner
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 198 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100224/787c74ba/signature.bin
From kimbesson1981 at gmail.com  Wed Feb 24 06:09:56 2010
From: kimbesson1981 at gmail.com (Kim Besson)
Date: Wed Feb 24 06:17:22 2010
Subject: [gdal-dev] Re: Add GCP's to a file
In-Reply-To: <8fb908a31002221048k263690des1d1cd280ab85febc@mail.gmail.com>
References: <8fb908a31002220931v68c2dca3r9af1b6a6a80c1e42@mail.gmail.com>
	<64691797-D19C-4421-A31C-0BD0030D341A@gbp.gaige.net>
	<8fb908a31002221048k263690des1d1cd280ab85febc@mail.gmail.com>
Message-ID: <8fb908a31002240309u2b14edc4s3d23e4d24b5118b5@mail.gmail.com>

Thanks Mr Paulsen and Jukka

Ok I tried  the command and it seemed to work :) Thanks

By the way, if my image has no Coordinates system and my GCPs corresponds to
a certain projection/coordinate system, How I define now the coordinate
system in which that data is?

Thank you



>
> 2010/2/22 Gaige B. Paulsen <osgeo@gbp.gaige.net>
>
> Pixel and line in the description below are actually two different numbers,
>> one representing the pixel (x coordinate) and the line (y coordinate) of the
>> point in the image.
>>
>> Hope this helps,
>> -Gaige
>>
>>
>> On Feb 22, 2010, at 12:31 PM, Kim Besson wrote:
>>
>> >Hi,
>> >Gdal_translation has on option
>> > [-gcp pixel line easting northing [elevation]]*
>>
>> >I know it works with tiffs but I have not tried it with HDF4. Some
>> working
>> >examples and considerations about this is hidden inside a document
>> >http://www.scangis.org/scangis2007/papers/r3_rahkonen.pdf
>>
>> Thanks Jukka. Although why does it only requires pixel line? The dataset
>> that I'm using, Easthing and Northing varies along pixel line. Shouldn't it
>> be Pixel column and row (or pixel (x,y)?
>>
>> Thanks
>> Kim
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100224/8ab3e174/attachment-0001.html
From kimbesson1981 at gmail.com  Wed Feb 24 07:28:27 2010
From: kimbesson1981 at gmail.com (Kim Besson)
Date: Wed Feb 24 07:28:30 2010
Subject: [gdal-dev] Converting GEOS to Gtiff lat/lon
Message-ID: <8fb908a31002240428y53e04ad8ha02c4dd697df804a@mail.gmail.com>

Greetings

I have used the same dataset from MSG and I got the same error. I thought
that maybe it has something to do with my coordinates but using your command

Using command:
dal_translate -of GTiff -a_srs "+proj=geos +lon_0=0.0 +h=35785831 +x_0=0.0
+y_0=0.0" -a_ullr -924124.2 5421728.5 4179561.6 3468466.1
"HDF5:"HDF5_LST_Euro_200901010000"://LST" euro_lst.tif
I did gdalinfo to this file:
Driver: GTiff/GeoTIFF
Files: euro_lst.tif
Size is 1701, 651
Coordinate System is:
LOCAL_CS["unnamed",
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-924124.199999999953434,5421728.500000000000000)
Pixel Size = (3000.403174603174648,-3000.403072196620542)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  ( -924124.200, 5421728.500)
Lower Left  ( -924124.200, 3468466.100)
Upper Right ( 4179561.600, 5421728.500)
Lower Right ( 4179561.600, 3468466.100)
Center      ( 1627718.700, 4445097.300)
Band 1 Block=1701x2 Type=Int16, ColorInterp=Gray
  Metadata:
    LST=CAL_OFFSET=999

(seems Ok, right?)

After that I did:
gdalwarp -of GTiff -s_srs "+proj=geos +lon_0=0.0 +h=35785831 +x_0=0.0
+y_0=0.0" -t_srs "+proj=latlong" "eurolat.tif" "lat.tif"&>log.log

It creates an "almost" empty and with errors  TIFF file and reports the
following:
Creating output file that is 1721P x 595L.
Processing input file euro_lst.tif.
0...10...20...30...40...50...60...70...80...90...ERROR 1:
TIFFReadDirectory:lat.tif: Can not read TIFF directory count
ERROR 1: TIFFWriteEncodedStrip:lat.tif: Must set "ImageWidth" before writing
data
ERROR 1: TIFFWriteEncodedStrip:lat.tif: Must set "ImageWidth" before writing
data
(.........) repeats for 278 times
100 - done.

I'm using  GDAL 1.5.4, released 2009/01/07

Any ideas of what might be happening? And Why?

Thanks

Best regards
Kim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100224/4602a772/attachment.html
From ivan.lucena at pmldnet.com  Wed Feb 24 09:03:58 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Wed Feb 24 09:04:02 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gUmVhZGluZyBhIHNpbmdsZSBwaXhlbCBmcm9tIG11bHRpcGxlIGJhbmRzIGF0IHRoZSBzYW1lIHRpbWUgaW4gcHl0aG9u?=
Message-ID: <20100224140358.5287.qmail@s466.sureserver.com>

Ben,

Another alternative a little bit more flexible is to use ReadRaster() specifying your query window (1x1 or more), the 
automatic data type conversion and the list of bands you are querying from. I guess it wrapper RasterIO directly.

Note that the resulting buffer will be binary, not a numpy Array as in ReadAsArray(), but that is easy to convert using 
numpy.fromstring().

Regards,

Ivan

>  -------Original Message-------
>  From: Frank Warmerdam <warmerdam@pobox.com>
>  To: Benjamin Welton <benjamin.r.welton@wmich.edu>
>  Cc: gdal-dev@lists.osgeo.org
>  Subject: Re: [gdal-dev] Reading a single pixel from multiple bands at the same time in python
>  Sent: Feb 23 '10 22:25
>  
>  Benjamin Welton wrote:
>  > Hey,
>  >
>  >????Iv got a question on whether or not its possible to read a single
>  > pixel value from multiple bands using one GDAL call in python? The file
>  > working with is an ENVI BIP file that has a large number of bands
>  > (around 1000) and im looking for a way to reduce the python overhead by
>  > only making one single call into the GDAL library. GDALDataset::RasterIO
>  > seems like it might be the function i need to use but im 100% sure. If
>  > anyone has any suggestions or hints on whether or not this is possible
>  > that would be great.
>  
>  Ben,
>  
>  You can use the ReadAsArray() method on a gdal.Dataset to read multiple
>  bands in one call as an array object:
>  
>  ds = gdal.Open('/home/warmerda/public_html/world.tif')
>  d = ds.ReadAsArray(0,0,1,1)
>  print d
>  [[[11]]
>  
>  ??[[10]]
>  
>  ??[[50]]]
>  
>  Best regards,
>  --
>  ---------------------------------------+--------------------------------------
>  I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
>  light and sound - activate the windows | http://pobox.com/~warmerdam
>  and watch the world go round - Rush????| Geospatial Programmer for Rent
>  
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From zoltans at geograph.co.za  Wed Feb 24 09:35:34 2010
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Wed Feb 24 09:36:19 2010
Subject: [gdal-dev] Converting JP2 to GeoTIFF
Message-ID: <4B853936.8090501@geograph.co.za>

Hi,
I'm trying to convert a jpeg2000 image to a geotiff, but I keep getting 
a segmentation fault. Please can someone point me in the direction of a 
solution.

Thanks in advance,
Zoltan.

**************************************************************************************

zls@gl1:/mnt/gm0_sdd1/gisortho/t4a/breederivier$ gdal_translate trvr.jp2 
trvr.tif
Segmentation fault

**************************************************************************************

zls@gl1:/mnt/gm0_sdd1/gisortho/t4a/breederivier$ gdalinfo trvr.jp2
Segmentation fault

**************************************************************************************

zls@gl1:/mnt/gm0_sdd1/gisortho/t4a/breederivier$ ls -la trvr.*
-rwxr-xr-x 1 1001 geograph        151 2010-02-24 16:01 trvr.j2w
-rwxr-xr-x 1 1001 geograph    4031979 2010-02-24 16:01 trvr.jp2
-rwxr-xr-x 1 1001 geograph        417 2010-02-24 16:01 trvr.prj

**************************************************************************************

$ cat trvr.prj
PROJCS["UTM Zone 34, Southern Hemisphere",GEOGCS["Geographic Coordinate 
System",DATUM["WGS84",SPHEROID["WGS84",6378137,298.257223560493]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",21],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",10000000],UNIT["Meter",1]]

**************************************************************************************

zls@gl1:/mnt/gm0_sdd1/gisortho/t4a/breederivier$ cat trvr.j2w
1.00000000000000000
0.00000000000000000
0.00000000000000000
-1.00000000000000000
408298.90989752498000000
6312778.31578812000000000

**************************************************************************************

zls@gl1:/mnt/gm0_sdd1/gisortho/t4a/breederivier$ gdal_translate
Usage: gdal_translate [--help-general]
       [-ot {Byte/Int16/UInt16/UInt32/Int32/Float32/Float64/
             CInt16/CInt32/CFloat32/CFloat64}] [-strict]
       [-of format] [-b band] [-outsize xsize[%] ysize[%]]
       [-scale [src_min src_max [dst_min dst_max]]]
       [-srcwin xoff yoff xsize ysize] [-projwin ulx uly lrx lry]
       [-a_srs srs_def] [-a_ullr ulx uly lrx lry] [-a_nodata value]
       [-gcp pixel line easting northing [elevation]]*
       [-mo "META-TAG=VALUE"]* [-quiet] [-sds]
       [-co "NAME=VALUE"]*
       src_dataset dst_dataset

GDAL 1.5.4, released 2009/01/07

The following format drivers are configured and support output:
  VRT: Virtual Raster
etc etc



-- 

===========================================
Zoltan Szecsei
Director

Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.  

34? 6'16.35"S 18?28'5.62"E 

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323    www.geograph.co.za
===========================================
-------------- next part --------------
Skipped content of type multipart/alternative
From chaitanya.ch at gmail.com  Wed Feb 24 09:47:54 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Feb 24 09:56:01 2010
Subject: [gdal-dev] Converting JP2 to GeoTIFF
In-Reply-To: <4B853936.8090501@geograph.co.za>
References: <4B853936.8090501@geograph.co.za>
Message-ID: <eb502d881002240647n32d50289mb9f308761528cbd8@mail.gmail.com>

Zoltan,

Can you provide a sample dataset that raised this error?

On Wed, Feb 24, 2010 at 8:05 PM, Zoltan Szecsei <zoltans@geograph.co.za>wrote:

> Hi,
> I'm trying to convert a jpeg2000 image to a geotiff, but I keep getting a
> segmentation fault. Please can someone point me in the direction of a
> solution.
>
> Thanks in advance,
> Zoltan.
>
>
> **************************************************************************************
>
> zls@gl1:/mnt/gm0_sdd1/gisortho/t4a/breederivier$ gdal_translate trvr.jp2
> trvr.tif
> Segmentation fault
>
>
> **************************************************************************************
>
> zls@gl1:/mnt/gm0_sdd1/gisortho/t4a/breederivier$ gdalinfo trvr.jp2
> Segmentation fault
>
>
> **************************************************************************************
>
> zls@gl1:/mnt/gm0_sdd1/gisortho/t4a/breederivier$ ls -la trvr.*
> -rwxr-xr-x 1 1001 geograph        151 2010-02-24 16:01 trvr.j2w
> -rwxr-xr-x 1 1001 geograph    4031979 2010-02-24 16:01 trvr.jp2
> -rwxr-xr-x 1 1001 geograph        417 2010-02-24 16:01 trvr.prj
>
>
> **************************************************************************************
>
> $ cat trvr.prj
> PROJCS["UTM Zone 34, Southern Hemisphere",GEOGCS["Geographic Coordinate
> System",DATUM["WGS84",SPHEROID["WGS84",6378137,298.257223560493]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",21],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",10000000],UNIT["Meter",1]]
>
>
> **************************************************************************************
>
> zls@gl1:/mnt/gm0_sdd1/gisortho/t4a/breederivier$ cat trvr.j2w
> 1.00000000000000000
> 0.00000000000000000
> 0.00000000000000000
> -1.00000000000000000
> 408298.90989752498000000
> 6312778.31578812000000000
>
>
> **************************************************************************************
>
> zls@gl1:/mnt/gm0_sdd1/gisortho/t4a/breederivier$ gdal_translate
> Usage: gdal_translate [--help-general]
>      [-ot {Byte/Int16/UInt16/UInt32/Int32/Float32/Float64/
>            CInt16/CInt32/CFloat32/CFloat64}] [-strict]
>      [-of format] [-b band] [-outsize xsize[%] ysize[%]]
>      [-scale [src_min src_max [dst_min dst_max]]]
>      [-srcwin xoff yoff xsize ysize] [-projwin ulx uly lrx lry]
>      [-a_srs srs_def] [-a_ullr ulx uly lrx lry] [-a_nodata value]
>      [-gcp pixel line easting northing [elevation]]*
>      [-mo "META-TAG=VALUE"]* [-quiet] [-sds]
>      [-co "NAME=VALUE"]*
>      src_dataset dst_dataset
>
> GDAL 1.5.4, released 2009/01/07
>
> The following format drivers are configured and support output:
>  VRT: Virtual Raster
> etc etc
>
>
>
> --
>
> ===========================================
> Zoltan Szecsei
> Director
>
> Geograph (Pty) Ltd.
> P.O. Box 7, Muizenberg 7950, South Africa.
>
> 65 Main Road, Muizenberg 7945
> Western Cape, South Africa.
> 34? 6'16.35"S 18?28'5.62"E
> Tel: +27-21-7884897  Mobile: +27-83-6004028
> Fax: +27-86-6115323    www.geograph.co.za
> ===========================================
>
>
> No virus found in this outgoing message.
> Checked by AVG - www.avg.com
> Version: 9.0.733 / Virus Database: 271.1.1/2706 - Release Date: 02/23/10
> 21:34:00
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100224/dfe4ff36/attachment.html
From osgeo at gbp.gaige.net  Wed Feb 24 10:28:01 2010
From: osgeo at gbp.gaige.net (Gaige B. Paulsen)
Date: Wed Feb 24 10:28:05 2010
Subject: [gdal-dev] Re: Add GCP's to a file
In-Reply-To: <8fb908a31002221048k263690des1d1cd280ab85febc@mail.gmail.com>
References: <8fb908a31002220931v68c2dca3r9af1b6a6a80c1e42@mail.gmail.com>
	<64691797-D19C-4421-A31C-0BD0030D341A@gbp.gaige.net>
	<8fb908a31002221048k263690des1d1cd280ab85febc@mail.gmail.com>
Message-ID: <AE1BFA71-57BC-476B-9398-494946822FC0@gbp.gaige.net>

You should be able to do that using the -a_srs option

-Gaige

On Feb 22, 2010, at 1:48 PM, Kim Besson wrote:

> Thanks Mr Paulsen and Jukka
> 
> Ok I tried  the command and it seemed to work :) Thanks
> 
> By the way, if my image has no Coordinates system and my GCPs corresponds to a certain projection/coordinate system, How I define now the coordinate system in which that data is? 
> 
> Thank you
> 
> 
> 2010/2/22 Gaige B. Paulsen <osgeo@gbp.gaige.net>
> Pixel and line in the description below are actually two different numbers, one representing the pixel (x coordinate) and the line (y coordinate) of the point in the image.
> 
> Hope this helps,
> -Gaige
> 
> 
> On Feb 22, 2010, at 12:31 PM, Kim Besson wrote:
> 
>> >Hi,
>> >Gdal_translation has on option
>> > [-gcp pixel line easting northing [elevation]]*
>> 
>> >I know it works with tiffs but I have not tried it with HDF4. Some working
>> >examples and considerations about this is hidden inside a document
>> >http://www.scangis.org/scangis2007/papers/r3_rahkonen.pdf
>> 
>> Thanks Jukka. Although why does it only requires pixel line? The dataset that I'm using, Easthing and Northing varies along pixel line. Shouldn't it be Pixel column and row (or pixel (x,y)?
>> 
>> Thanks
>> Kim
>> 
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100224/91b1f7de/attachment-0001.html
From mongoose_riki at mail.ru  Wed Feb 24 10:07:48 2010
From: mongoose_riki at mail.ru (Riki Tiki)
Date: Wed Feb 24 10:44:17 2010
Subject: [gdal-dev] Fw: [Liblas-devel] about las2txt and las2tin
Message-ID: <E1NkIq4-00072q-00.mongoose_riki-mail-ru@f156.mail.ru>

hi, i know this should not be sent to this forum... but i got no reply from liblas-devel... i thought maybe you could at least point me the good forum, where i could get some reply to this problem, thanks a lot!!! riki


-----Original Message-----
From: Riki Tiki <mongoose_riki@mail.ru>
To: liblas-devel@lists.osgeo.org
Date: Tue, 23 Feb 2010 22:21:37 +0300
Subject: [Liblas-devel] about las2txt and las2tin

>  Hi,
> 
>  I have used above two tools. Thanks a lot for those in advance.
>  I did the following:
>  1) las2txt -i a.las -o coordinates.txt -parse xyz
>  2) las2tin -i a.las -o triangles.txt
> 
>  My questions are as follows:
>  1) Do all the points in coordinates.txt should be appearing in triangles.txt?
>  I.e. for example if in coordinates.txt I have the following:
>  x0 y0 z0
>  x1 y1 z1
>  x2 y2 z2
>  ...
>  x100 y100 z100
> 
>  Where x0,y0,z0,...,z100 are floats. So I assume that in triangles.txt I will only see numbers
>  between 0 and 100 inclusive. Am I right on this? Also can I be 100% sure that all the numbers
>  between 0 and 100 will appear in triangles.txt at least in one triangle?
> 
>  2) For example currently I have downloaded the following "http://liblas.org/samples/mscst000131.las" las file... I converted it using your tools above into coordinates.txt and triangles.txt, respectively as it is shown exactly above.
> 
>  But then I run a program which consists of the following code:
> 
>  //program written in c#
>  string[] triangles = File.ReadAllLines("triangles.txt");
>  string[] coordinates = File.ReadAllLines("coordinates.txt");
>  long counter;
> 
>  for(long i=0; i<coordinates.Length; i++)
>  {
>   counter = 0;
>   for(long j=0; j<triangles.Length; j++)
>   {
>    string[] str = triangles[j].Trim().Split(' ');
>    if((long.Parse(str[0]==i))||((long.Parse(str[1]==i))||((long.Parse(str[2]==i)))
>    {
>     counter++;
>    }
>   }
>   Console.WriteLine("Line: "+i+", found "+counter+"times.");
>  }
> 
>  Some of the lines are found to be 0 times. It means that not all of the coordinates appear in tins created? Am I doing something wrong? Or is it normal that some of them do not appear in tins generated?
> 
>  Thanks a lot in advance!
> Riki
> 
> 
> _______________________________________________
> Liblas-devel mailing list
> Liblas-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/liblas-devel
> 
From dron at ak4719.spb.edu  Wed Feb 24 10:30:49 2010
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Feb 24 11:18:59 2010
Subject: [gdal-dev] Re: Motion: Commit Access for Adam Nowacki
In-Reply-To: <201002222232.36484.even.rouault@mines-paris.org>
References: <201002222232.36484.even.rouault@mines-paris.org>
Message-ID: <20100224153049.GA22743@ak4719.spb.edu>

On Mon, Feb 22, 2010 at 10:32:35PM +0100, Even Rouault wrote:
> Motion: Extend GDAL/OGR Commit Access to Adam Nowacki.

+1


-- 
Andrey V. Kiselev
From hobu.inc at gmail.com  Wed Feb 24 12:45:52 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Feb 24 12:45:54 2010
Subject: [gdal-dev] Re: Motion: Commit Access for Adam Nowacki
In-Reply-To: <20100224153049.GA22743@ak4719.spb.edu>
References: <201002222232.36484.even.rouault@mines-paris.org>
	<20100224153049.GA22743@ak4719.spb.edu>
Message-ID: <459e60fb1002240945m3dd99329k589fb7c9aae12899@mail.gmail.com>

+1

On Wed, Feb 24, 2010 at 9:30 AM, Andrey Kiselev <dron@ak4719.spb.edu> wrote:

> On Mon, Feb 22, 2010 at 10:32:35PM +0100, Even Rouault wrote:
> > Motion: Extend GDAL/OGR Commit Access to Adam Nowacki.
>
> +1
>
>
> --
> Andrey V. Kiselev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100224/fda6290a/attachment.html
From ekkehart at gmx.de  Wed Feb 24 14:35:20 2010
From: ekkehart at gmx.de (NopMap)
Date: Wed Feb 24 14:35:22 2010
Subject: [gdal-dev] Re: Gdal / Python / Win7 crash with ReadAsArray()
In-Reply-To: <1266965795875-4622435.post@n2.nabble.com>
References: <e7d9427f1001150436s4c513b9ch7b6416bf31fafefc@mail.gmail.com>
	<4B50E17F.9000204@noaa.gov>
	<1266965795875-4622435.post@n2.nabble.com>
Message-ID: <1267040120346-4628026.post@n2.nabble.com>



Hi!

A small update. I tried this again, with the 1.6.0 bindings and the 1.6.1
bindings and in the XP compatibility mode. Always the same crash.

Does any of you have an idea what might be the reason?
- Python 2.5 vs. 2.6 Problems?
- Windows 7 problem?
- 64 bit machine problem?
- missing dependencies?

Any suggestions on what to try next?

bye
             Nop
-- 
View this message in context: http://n2.nabble.com/Gdal-Python-Win7-crash-with-ReadAsArray-tp4398401p4628026.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From luisapena1979 at gmail.com  Thu Feb 25 04:22:22 2010
From: luisapena1979 at gmail.com (=?ISO-8859-1?Q?Luisa_Pe=F1a?=)
Date: Thu Feb 25 04:22:28 2010
Subject: [gdal-dev] Spatial Reference syntax
Message-ID: <979f23b11002250122n185e02a9l97217a9ddba4a0eb@mail.gmail.com>

Hello

I'm reading a few examples of GDALWARP usage and I have a few questions
regarding spatial reference syntax. Is there any Wiki explaining explaining
coordinates systems definition to be passed to GDALWARP/other GDAL tool?

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100225/17f9e3f3/attachment.html
From zoltans at geograph.co.za  Thu Feb 25 04:42:41 2010
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Thu Feb 25 04:43:32 2010
Subject: [gdal-dev] gdalwarp -t_srs problems
Message-ID: <4B864611.2050001@geograph.co.za>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100225/db22a089/attachment.html
-------------- next part --------------
Skipped content of type multipart/alternative
From zoltans at geograph.co.za  Thu Feb 25 04:50:11 2010
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Thu Feb 25 04:50:57 2010
Subject: [gdal-dev] Spatial Reference syntax
In-Reply-To: <979f23b11002250122n185e02a9l97217a9ddba4a0eb@mail.gmail.com>
References: <979f23b11002250122n185e02a9l97217a9ddba4a0eb@mail.gmail.com>
Message-ID: <4B8647D3.7050109@geograph.co.za>

Luisa Pe?a wrote:
>
> I'm reading a few examples of GDALWARP usage and I have a few 
> questions regarding spatial reference syntax. Is there any Wiki 
> explaining explaining coordinates systems definition to be passed to 
> GDALWARP/other GDAL tool?

I've just been where you are now :-)

I managed to work out something by looking at the gcs.csv and pcs.csv 
files, and at:
http://www.gdal.org/gdalwarp.html
and
http://www.gdal.org/gdal_utilities.html

HTH,
Zoltan


-- 

===========================================
Zoltan Szecsei
Director

Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.  

34? 6'16.35"S 18?28'5.62"E 

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323    www.geograph.co.za
===========================================
-------------- next part --------------
Skipped content of type multipart/alternative
From vincent.honnet at external.thalesgroup.com  Thu Feb 25 06:11:57 2010
From: vincent.honnet at external.thalesgroup.com (Vincent Honnet)
Date: Thu Feb 25 06:14:24 2010
Subject: [gdal-dev] gdal_proximmity.py
Message-ID: <4B865AFD.2030403@external.thalesgroup.com>

Hi,

I'm trying to use gdal_proximity.py. through an installation of FWTools 
2.4.5 or 2.4.6.

The first thing is that there is, I think, a mistake at line 150: the 
variable dst_ts is wrong, it should dst_ds, then the exception of the 
try can set the right variable to None.

My command line is:
gdal_proximity.py T:\vincent\tmp\SwissBoarder.tif 
T:\vincent\tmp\test.tif -srcband 1 -of GTiff -values 255 -nodata 0 
-distunits GEO -maxdist 100

that way, the result is:

Traceback (most recent call last):
  File "c:\FWTools2.4.5\bin\gdal_proximity.py", line 171, in ?
    gdal.ComputeProximity( srcband, dstband, options,
AttributeError: 'module' object has no attribute 'ComputeProximity'


Did someone use this command that way ? Is my command wrong ?

Thanks a lot in advance,

Vincent




From zoltans at geograph.co.za  Thu Feb 25 07:52:21 2010
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Thu Feb 25 07:53:07 2010
Subject: [gdal-dev] gdalwarp -t_srs problems SOLVED
In-Reply-To: <4B864611.2050001@geograph.co.za>
References: <4B864611.2050001@geograph.co.za>
Message-ID: <4B867285.8040303@geograph.co.za>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100225/0153b8ec/attachment-0001.html
-------------- next part --------------
Skipped content of type multipart/alternative
From ahmostovoi at gmail.com  Thu Feb 25 08:24:41 2010
From: ahmostovoi at gmail.com (Alejandro Mostovoi)
Date: Thu Feb 25 08:24:44 2010
Subject: [gdal-dev] OGRSFDriverRegistrar question
Message-ID: <9db695c1002250524u3e7df321kf461fb2e2f54c0b2@mail.gmail.com>

Hi All,
   How can make OGRSFDriverRegistrar::Open fails when trying to open an ESRI
Shapefile and the first parameter "*pszName" has extension different to
"shp"*?

I know when extension is different to "shp", "dbf" and "shx" it fails, but I
need that also fails when extension is "dbf" or "shx".

Any idea?

Thanks in advance.
Alejandro.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100225/18139cb4/attachment.html
From warmerdam at pobox.com  Thu Feb 25 09:57:36 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 25 09:56:51 2010
Subject: [gdal-dev] OGRSFDriverRegistrar question
In-Reply-To: <9db695c1002250524u3e7df321kf461fb2e2f54c0b2@mail.gmail.com>
References: <9db695c1002250524u3e7df321kf461fb2e2f54c0b2@mail.gmail.com>
Message-ID: <4B868FE0.5090705@pobox.com>

Alejandro Mostovoi wrote:
 > Hi All,
 >    How can make OGRSFDriverRegistrar::Open fails when trying to open an
 > ESRI Shapefile and the first parameter "/pszName" has extension
 > different to "shp"/?
 >
 > I know when extension is different to "shp", "dbf" and "shx" it fails,
 > but I need that also fails when extension is "dbf" or "shx".
 >
 > Any idea?

Alejandro,

You could modify OGRShapeDataSource::Open() in
gdal/ogr/ogrsf_frmts/shape/ogrshapedatasource.cpp so that is checks this.

change:

     if( VSI_ISREG(stat.st_mode) )
     {
         if( !OpenFile( pszNewName, bUpdate, bTestOpen ) )

to:

     if( VSI_ISREG(stat.st_mode) )
     {
         if( !EQUAL(CPLGetExtension(pszNewName),"shp")
             || !OpenFile( pszNewName, bUpdate, bTestOpen ) )

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Thu Feb 25 10:02:04 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 25 10:01:16 2010
Subject: [gdal-dev] gdal_proximmity.py
In-Reply-To: <4B865AFD.2030403@external.thalesgroup.com>
References: <4B865AFD.2030403@external.thalesgroup.com>
Message-ID: <4B8690EC.1040703@pobox.com>

Vincent Honnet wrote:
> Hi,
> 
> I'm trying to use gdal_proximity.py. through an installation of FWTools 
> 2.4.5 or 2.4.6.
> 
> The first thing is that there is, I think, a mistake at line 150: the 
> variable dst_ts is wrong, it should dst_ds, then the exception of the 
> try can set the right variable to None.
> 
> My command line is:
> gdal_proximity.py T:\vincent\tmp\SwissBoarder.tif 
> T:\vincent\tmp\test.tif -srcband 1 -of GTiff -values 255 -nodata 0 
> -distunits GEO -maxdist 100
> 
> that way, the result is:
> 
> Traceback (most recent call last):
>  File "c:\FWTools2.4.5\bin\gdal_proximity.py", line 171, in ?
>    gdal.ComputeProximity( srcband, dstband, options,
> AttributeError: 'module' object has no attribute 'ComputeProximity'
> 
> 
> Did someone use this command that way ? Is my command wrong ?

Vincent,

gdal_proximity requires the "next generation" python api. FWTools still
distributes the old python bindings for OpenEV compatability.  You will
need to use a different environment like OSGeo4W's "gdal-dev" package.

I have fixed the dst_ts thing in trunk now.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ahmostovoi at gmail.com  Thu Feb 25 10:49:59 2010
From: ahmostovoi at gmail.com (Alejandro Mostovoi)
Date: Thu Feb 25 10:50:04 2010
Subject: [gdal-dev] OGRSFDriverRegistrar question
In-Reply-To: <4B868FE0.5090705@pobox.com>
References: <9db695c1002250524u3e7df321kf461fb2e2f54c0b2@mail.gmail.com>
	<4B868FE0.5090705@pobox.com>
Message-ID: <9db695c1002250749l555b9f3dw8530c6672c89cecd@mail.gmail.com>

Ok.

Thanks.
Alejandro.


On 25 February 2010 11:57, Frank Warmerdam <warmerdam@pobox.com> wrote:

> Alejandro Mostovoi wrote:
> > Hi All,
> >    How can make OGRSFDriverRegistrar::Open fails when trying to open an
> > ESRI Shapefile and the first parameter "/pszName" has extension
> > different to "shp"/?
> >
> > I know when extension is different to "shp", "dbf" and "shx" it fails,
> > but I need that also fails when extension is "dbf" or "shx".
> >
> > Any idea?
>
> Alejandro,
>
> You could modify OGRShapeDataSource::Open() in
> gdal/ogr/ogrsf_frmts/shape/ogrshapedatasource.cpp so that is checks this.
>
> change:
>
>    if( VSI_ISREG(stat.st_mode) )
>    {
>        if( !OpenFile( pszNewName, bUpdate, bTestOpen ) )
>
> to:
>
>    if( VSI_ISREG(stat.st_mode) )
>    {
>        if( !EQUAL(CPLGetExtension(pszNewName),"shp")
>            || !OpenFile( pszNewName, bUpdate, bTestOpen ) )
>
> Best regards,
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100225/ecd7a862/attachment.html
From chaitanya.ch at gmail.com  Thu Feb 25 11:14:29 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Feb 25 11:14:32 2010
Subject: [gdal-dev] Converting JP2 to GeoTIFF
In-Reply-To: <4B853C8E.2000800@geograph.co.za>
References: <4B853936.8090501@geograph.co.za>
	<eb502d881002240647n32d50289mb9f308761528cbd8@mail.gmail.com>
	<4B853C8E.2000800@geograph.co.za>
Message-ID: <eb502d881002250814s431e231cm53b79413e0d9fdb2@mail.gmail.com>

Zoltan,

I tested the data provided by you. I was able to open it with GDAL using the
MrSID driver with no problem.
Can you give the details of GDAL version you are using and the output of the
command "gdalinfo --formats"?

On Wed, Feb 24, 2010 at 8:19 PM, Zoltan Szecsei <zoltans@geograph.co.za>wrote:

>  Herewith .....
> Thank you,
> Regards,
> Zoltan
>
>
> Chaitanya kumar CH wrote:
>
> Zoltan,
>
> Can you provide a sample dataset that raised this error?
>
> On Wed, Feb 24, 2010 at 8:05 PM, Zoltan Szecsei <zoltans@geograph.co.za>wrote:
>
>> Hi,
>> I'm trying to convert a jpeg2000 image to a geotiff, but I keep getting a
>> segmentation fault. Please can someone point me in the direction of a
>> solution.
>>
>> Thanks in advance,
>> Zoltan.
>>
>>
>> **************************************************************************************
>>
>> zls@gl1:/mnt/gm0_sdd1/gisortho/t4a/breederivier$ gdal_translate trvr.jp2
>> trvr.tif
>> Segmentation fault
>>
>>
>> **************************************************************************************
>>
>> zls@gl1:/mnt/gm0_sdd1/gisortho/t4a/breederivier$ gdalinfo trvr.jp2
>> Segmentation fault
>>
>>
>> **************************************************************************************
>>
>> zls@gl1:/mnt/gm0_sdd1/gisortho/t4a/breederivier$ ls -la trvr.*
>> -rwxr-xr-x 1 1001 geograph        151 2010-02-24 16:01 trvr.j2w
>> -rwxr-xr-x 1 1001 geograph    4031979 2010-02-24 16:01 trvr.jp2
>> -rwxr-xr-x 1 1001 geograph        417 2010-02-24 16:01 trvr.prj
>>
>>
>> **************************************************************************************
>>
>> $ cat trvr.prj
>> PROJCS["UTM Zone 34, Southern Hemisphere",GEOGCS["Geographic Coordinate
>> System",DATUM["WGS84",SPHEROID["WGS84",6378137,298.257223560493]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",21],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",10000000],UNIT["Meter",1]]
>>
>>
>> **************************************************************************************
>>
>> zls@gl1:/mnt/gm0_sdd1/gisortho/t4a/breederivier$ cat trvr.j2w
>> 1.00000000000000000
>> 0.00000000000000000
>> 0.00000000000000000
>> -1.00000000000000000
>> 408298.90989752498000000
>> 6312778.31578812000000000
>>
>>
>> **************************************************************************************
>>
>> zls@gl1:/mnt/gm0_sdd1/gisortho/t4a/breederivier$ gdal_translate
>> Usage: gdal_translate [--help-general]
>>      [-ot {Byte/Int16/UInt16/UInt32/Int32/Float32/Float64/
>>            CInt16/CInt32/CFloat32/CFloat64}] [-strict]
>>      [-of format] [-b band] [-outsize xsize[%] ysize[%]]
>>      [-scale [src_min src_max [dst_min dst_max]]]
>>      [-srcwin xoff yoff xsize ysize] [-projwin ulx uly lrx lry]
>>      [-a_srs srs_def] [-a_ullr ulx uly lrx lry] [-a_nodata value]
>>      [-gcp pixel line easting northing [elevation]]*
>>      [-mo "META-TAG=VALUE"]* [-quiet] [-sds]
>>      [-co "NAME=VALUE"]*
>>      src_dataset dst_dataset
>>
>> GDAL 1.5.4, released 2009/01/07
>>
>> The following format drivers are configured and support output:
>>  VRT: Virtual Raster
>> etc etc
>>
>>
>>
>> --
>>
>> ===========================================
>> Zoltan Szecsei
>> Director
>>
>> Geograph (Pty) Ltd.
>> P.O. Box 7, Muizenberg 7950, South Africa.
>>
>> 65 Main Road, Muizenberg 7945
>> Western Cape, South Africa.
>> 34? 6'16.35"S 18?28'5.62"E
>> Tel: +27-21-7884897  Mobile: +27-83-6004028
>> Fax: +27-86-6115323    www.geograph.co.za
>> ===========================================
>>
>>
>> No virus found in this outgoing message.
>> Checked by AVG - www.avg.com
>> Version: 9.0.733 / Virus Database: 271.1.1/2706 - Release Date: 02/23/10
>> 21:34:00
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9848167848
> 17.241582N 80.142635E
>
>
>
> --
>
> ===========================================
> Zoltan Szecsei
> Director
>
> Geograph (Pty) Ltd.
> P.O. Box 7, Muizenberg 7950, South Africa.
>
> 65 Main Road, Muizenberg 7945
> Western Cape, South Africa.
>
> 34? 6'16.35"S 18?28'5.62"E
>
> Tel: +27-21-7884897  Mobile: +27-83-6004028
> Fax: +27-86-6115323    www.geograph.co.za
> ===========================================
>
>
> 1.00000000000000000
> 0.00000000000000000
> 0.00000000000000000
> -1.00000000000000000
> 408298.90989752498000000
> 6312778.31578812000000000
>
> PROJCS["UTM Zone 34, Southern Hemisphere",GEOGCS["Geographic Coordinate
> System",DATUM["WGS84",SPHEROID["WGS84",6378137,298.257223560493]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",21],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",10000000],UNIT["Meter",1]]
>
>
> No virus found in this outgoing message.
> Checked by AVG - www.avg.com
> Version: 9.0.733 / Virus Database: 271.1.1/2706 - Release Date: 02/23/10
> 21:34:00
>
>


-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100225/884c48db/attachment-0001.html
From zoltans at geograph.co.za  Thu Feb 25 11:33:19 2010
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Thu Feb 25 11:34:07 2010
Subject: [gdal-dev] Converting JP2 to GeoTIFF
In-Reply-To: <eb502d881002250814s431e231cm53b79413e0d9fdb2@mail.gmail.com>
References: <4B853936.8090501@geograph.co.za>	
	<eb502d881002240647n32d50289mb9f308761528cbd8@mail.gmail.com>	
	<4B853C8E.2000800@geograph.co.za>
	<eb502d881002250814s431e231cm53b79413e0d9fdb2@mail.gmail.com>
Message-ID: <4B86A64F.9090600@geograph.co.za>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100225/aa0aa61c/attachment.html
-------------- next part --------------
Skipped content of type multipart/alternative
From jluis at ualg.pt  Thu Feb 25 11:49:23 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Feb 25 11:49:28 2010
Subject: [gdal-dev] make install -- copy "shapefil.h" into the include dir
Message-ID: <4B86AA13.6030906@ualg.pt>

Hi,

I have a MEX that links against shapelib and works fine. However, I just 
tried to link it against GDAL since it has the same ability to read 
shapefiles in OGR and it also works.
All I had to do was to copy the "shapefil.h" from

...\gdal\ogr\ogrsf_frmts\shape
to
...\gdal\include

so can I ask as a kind of enhancement request that the "shapefil.h" be 
moved to the "include" dir by the "make install" procedure so that for 
the next GDAL release I can have my makefiles link that MEX to GDAL only 
and therefore drop the need of having also a shapelib instaled?

Thanks

Joaquim Luis
From mateusz at loskot.net  Thu Feb 25 13:09:03 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Feb 25 13:08:47 2010
Subject: [gdal-dev] OGRSFDriverRegistrar question
In-Reply-To: <9db695c1002250524u3e7df321kf461fb2e2f54c0b2@mail.gmail.com>
References: <9db695c1002250524u3e7df321kf461fb2e2f54c0b2@mail.gmail.com>
Message-ID: <4B86BCBF.7000001@loskot.net>

Alejandro Mostovoi wrote:
> Hi All,
>    How can make OGRSFDriverRegistrar::Open fails when trying to open an 
> ESRI Shapefile and the first parameter "/pszName" has extension 
> different to "shp"/?
> 
> I know when extension is different to "shp", "dbf" and "shx" it fails, 
> but I need that also fails when extension is "dbf" or "shx".
> 
> Any idea?

Requirements and customizations of this kind are responsibility
of a client, so cope with it in your application.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From BCassanova at weather.com  Thu Feb 25 14:07:43 2010
From: BCassanova at weather.com (Cassanova, Bill)
Date: Thu Feb 25 14:23:32 2010
Subject: [gdal-dev] gdal_translate with -a_srs option using proj4 syntax and
	+a=ellipsoid 
Message-ID: <1D5F4E64B8C04F4C868B94AC9A532AF80CA0DEFD@ATLMAIL01.corp.weather.com>

Hi all,

I have a tiff image that has been exported from meteorological software
that has know geographic parameters:

ELLIPSOID_EQUATOR_RADIUS 	6378206.5	
ELLIPSOID_POLAR_RADIUS 	6356584	
ELLIPSOID_FLATTENING 	0.00339	
UPPER_LEFT_X 	-3507992.25	
UPPER_LEFT_Y 	6780696	
LOWER_RIGHT_X 	3601343.75	
LOWER_RIGHT_Y 	2337361	
PROJECTION_TYPE 	Mercator	
CENTER_LONGITUDE_MERCATOR_SPECIFIC 	-96	
CENTER_LATITUDE 	37.910004	
CENTER_LONGITUDE 	-95.580002	
ROTATION 	0	

I am trying to convert this to a geotiff with my eventual goal of
converting it to an unprojected tiff.

First step is to add the geographic information to the tiff:

gdal_translate -a_ullr -3507992.25 6780696 3601343.75 2337361-a_srs
"+proj=merc +lon_0=96w +a=6378206.5 +f=0.00339" src_image.tiff
dest_image.tiff

The failure I get is:
Failed to process SRS definition: +proj=merc +lon_0=96w +a=6378206.5
+f=0.00339

My second attempt was the try the same above command except with a proj
string that does not include the +a or +f options
But instead "+proj=merc +lon_0=96w +datum=WGS84".  This did work.

The problem I am now having is that I bring this image into ArcInfo and
for some reason it is shifted north.  I think that being able to
correctly apply the ellipsoid equator radius and ellipsoid flattening
may fix my problem or am I missing something?

The second step is to create an un-projected image from this data:  

My presumption is the below command will accomplish
Just that:
gdalwarp -t_srs '+proj=latlong' -r ${sample_method} ${tmp_image_3}
${final_image

Any help is fully appreciated.

Thanks,
Bill



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100225/36b7eb22/attachment.html
From even.rouault at mines-paris.org  Thu Feb 25 14:29:45 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb 25 14:29:57 2010
Subject: [gdal-dev] make install -- copy "shapefil.h" into the include dir
In-Reply-To: <4B86AA13.6030906@ualg.pt>
References: <4B86AA13.6030906@ualg.pt>
Message-ID: <201002252029.47343.even.rouault@mines-paris.org>

Joaquim,

I'm not sure this is a good idea. Shapelib and its header file is an internal 
dependency of GDAL/OGR and should probably remain as such. I'd note we made 
recently necessary changes to some utilities (gdaltindex comes to mind) to 
use OGR API and drop their explicit dependency to shapelib.

I'd note that, in some builds of GDAL, shapelib symbols embedded in the 
Shapefile driver could even not be exported (for example if configure is run 
with --with-hide-internal-symbols)

Le Thursday 25 February 2010 17:49:23 Joaquim Luis, vous avez ?crit?:
> Hi,
>
> I have a MEX that links against shapelib and works fine. However, I just
> tried to link it against GDAL since it has the same ability to read
> shapefiles in OGR and it also works.
> All I had to do was to copy the "shapefil.h" from
>
> ...\gdal\ogr\ogrsf_frmts\shape
> to
> ...\gdal\include
>
> so can I ask as a kind of enhancement request that the "shapefil.h" be
> moved to the "include" dir by the "make install" procedure so that for
> the next GDAL release I can have my makefiles link that MEX to GDAL only
> and therefore drop the need of having also a shapelib instaled?
>
> Thanks
>
> Joaquim Luis
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jluis at ualg.pt  Thu Feb 25 15:15:25 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Feb 25 15:15:45 2010
Subject: [gdal-dev] make install -- copy "shapefil.h" into the include dir
In-Reply-To: <201002252029.47343.even.rouault@mines-paris.org>
References: <4B86AA13.6030906@ualg.pt>
	<201002252029.47343.even.rouault@mines-paris.org>
Message-ID: <4B86DA5D.2080303@ualg.pt>

Even,

Thanks for the feedback. I think I understand what you mean but on the 
other hand I got puzzled as well.
Glad that my memory is not too rotten with age as I remember one of your 
mails that ended up as ticket #1810
http://trac.osgeo.org/gdal/ticket/1810
where you explained that (and this is my interpretation of it), on 
Windows the  "--with-hide-internal-symbols" behavior is the default one.
But I'm testing on Windows and it worked fine with the link to 
"gdal_i.lib". If it works here, why should it fail on *nix?

Joaquim

> Joaquim,
>
> I'm not sure this is a good idea. Shapelib and its header file is an internal
> dependency of GDAL/OGR and should probably remain as such. I'd note we made
> recently necessary changes to some utilities (gdaltindex comes to mind) to
> use OGR API and drop their explicit dependency to shapelib.
>
> I'd note that, in some builds of GDAL, shapelib symbols embedded in the
> Shapefile driver could even not be exported (for example if configure is run
> with --with-hide-internal-symbols)
>
> Le Thursday 25 February 2010 17:49:23 Joaquim Luis, vous avez ?crit :
>    
>> Hi,
>>
>> I have a MEX that links against shapelib and works fine. However, I just
>> tried to link it against GDAL since it has the same ability to read
>> shapefiles in OGR and it also works.
>> All I had to do was to copy the "shapefil.h" from
>>
>> ...\gdal\ogr\ogrsf_frmts\shape
>> to
>> ...\gdal\include
>>
>> so can I ask as a kind of enhancement request that the "shapefil.h" be
>> moved to the "include" dir by the "make install" procedure so that for
>> the next GDAL release I can have my makefiles link that MEX to GDAL only
>> and therefore drop the need of having also a shapelib instaled?
>>
>> Thanks
>>
>> Joaquim Luis
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>      
>
>
>
>    

From even.rouault at mines-paris.org  Thu Feb 25 15:34:28 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb 25 15:34:42 2010
Subject: [gdal-dev] make install -- copy "shapefil.h" into the include dir
In-Reply-To: <4B86DA5D.2080303@ualg.pt>
References: <4B86AA13.6030906@ualg.pt>
	<201002252029.47343.even.rouault@mines-paris.org>
	<4B86DA5D.2080303@ualg.pt>
Message-ID: <201002252134.29508.even.rouault@mines-paris.org>

I didn't check for that particular case, but yes, they are indeed exported. Is 
it by design or just because it is like it is ? I don't know...
From xiaodong.zhang2 at und.edu  Thu Feb 25 17:08:20 2010
From: xiaodong.zhang2 at und.edu (Xiaodong Zhang)
Date: Thu Feb 25 17:33:33 2010
Subject: [gdal-dev] raster to polygon
Message-ID: <4B86F4D4.6020609@und.edu>

Hi,

Currently, I'm using gdal and ogr to convert a map after classification 
into a point shape file. Since the classification map typically consists 
of zones, a polygon shape file would make more sense. I'm wondering if 
anyone would know or share the idea of how to convert a map into a 
polygon shape file directly.

Thanks
Xiaodong
From nowak at funil.de  Thu Feb 25 17:10:52 2010
From: nowak at funil.de (Adam Nowacki)
Date: Thu Feb 25 17:43:12 2010
Subject: [gdal-dev] Re: Motion: Commit Access for Adam Nowacki
In-Reply-To: <201002222232.36484.even.rouault@mines-paris.org>
References: <201002222232.36484.even.rouault@mines-paris.org>
Message-ID: <4B86F56C.80300@funil.de>

I agree with the RFC 3: GDAL Commiter Guildlines.

Even Rouault wrote:
> Motion: Extend GDAL/OGR Commit Access to Adam Nowacki.
> 
> ---
> 
> Hi,
> 
> Adam is the author of the GDAL WMS driver, that he contributed during the 2007 
> Google Summer of Code. Since then, he has regularly taken part to discussions 
> related to the driver and contributes patches, such as in :
> 
> http://trac.osgeo.org/gdal/ticket/3224
> http://trac.osgeo.org/gdal/ticket/2750
> http://trac.osgeo.org/gdal/ticket/2646
> http://trac.osgeo.org/gdal/ticket/3420
> 
> Adam is also using GDAL heavily in the context of his professionnal 
> activities.
> 
> It would be convenient to give him direct commit access to subversion.
> 
> Adam, could you reply to this message indicating your agreement to the
> guidelines listed in:
> 
>     http://trac.osgeo.org/gdal/wiki/rfc3_commiters
> 
> I'll start voting with my support:
> 
> +1
> 
> Best regards,
> 
> 

From matthewdw at gmail.com  Thu Feb 25 18:13:22 2010
From: matthewdw at gmail.com (Matt Williamson)
Date: Thu Feb 25 18:13:25 2010
Subject: [gdal-dev] Possible bug in gdaldem color-relief,
	zero always transparent
In-Reply-To: <201002232355.48650.even.rouault@mines-paris.org>
References: <0F200C15-9DFE-4324-B81C-21E780BE5079@gmail.com>
	<201002232150.45883.even.rouault@mines-paris.org>
	<74B7974D-E8AB-4786-A0CD-299F96FD0615@gmail.com>
	<201002232355.48650.even.rouault@mines-paris.org>
Message-ID: <7D91F0E1-D480-4093-8D25-6FF11364AB81@gmail.com>

Ok, got some clarification.

The _real_ problem was that my dataset did not have it's NODATA value set properly. That being the case, gdaldem apparently assumes 0 is the NODATA value...sort of...if you have an "nv" line in the color table, perhaps. Since I had a "nv" line in my color table, it seems that the setting for 0 and the setting for nv were conflicting. The result was still rather odd, so I might still toss this in the bug tracker and see what you guys think of the behavior.

I tried removing the nv entry from the color table, and the results were perfectly sensible. Removing the explicit zero entry and leaving the nv setting produced strange results...it seems that in this case, the value for zero gets set to black with the opacity of the nv entry, unless the nv entry has opacity 255, in which case the zero value is the color specified for nv.

It's probably one of those cases where if you have a nv entry specified for a dataset without a NODATA value, then the behavior is undefined...which is fine, but it took me a while to figure out what the heck was going on. What's really strange to me though is that the actual NODATA pixels (-30000, in this case) also seemed to be taking on the nv color settings, correctly, even though no NODATA value was set...a fluke probably, but whatever.

On a separate note, the reason I had a file with no NODATA value specified was that I expected gdalwarp to pass-through the NODATA value from the source file if none of the -*nodata switches were present--but it doesn't. I can mostly understand this, but it's somewhat counterintuitive since gdal_translate works this way. Also, I am forced to specify a value for -dstnodata to get it to work--but as it happens I'm trying to process multiple files in batch, which have different output data types, and different source NODATA values...is there a way to have gdalwarp passthrough the NODATA value from the source to the destination file automatically?

Thanks again,

-Matt


On Feb 23, 2010, at 3:55 PM, Even Rouault wrote:

> Hum, then I have no clue. Yes I tested with a dataset with zeros.
> 
> You can file a ticket on Trac with the dataset and the .clr file attached, 
> provided that the dataset is not too big (no more than 1 MB). Otherwise, 
> you'll have to provide a link to the dataset.
> 
> Le Tuesday 23 February 2010 22:26:44 Matt Williamson, vous avez ?crit :
>> Hmm! Thanks, that is definitely not something I would have
>> checked--However, I don't think it's my problem. I checked my .clr file I'm
>> running, and I don't see anything out of the ordinary:
>> 
>> $ xxd T_SFC.clr
>> 0000000: 2d34 302e 3020 2031 3237 2032 3535 2032  -40.0  127 255 2
>> 0000010: 3535 0a2d 3330 2e31 2020 3139 3220 3235  55.-30.1  192 25
>> ...
>> 0000070: 320a 2d31 302e 3020 2020 3634 2020 3634  2.-10.0   64  64
>> 0000080: 2020 3634 0a2d 302e 3120 2020 3132 3720    64.-0.1   127
>> 0000090: 3132 3720 3132 3720 3235 350a 3020 2020  127 127 255.0
>> 00000a0: 2020 2020 3634 2020 3634 2031 3237 2032      64  64 127 2
>> 00000b0: 3535 0a30 2e31 2020 2020 2036 3420 2036  55.0.1     64  6
>> 00000c0: 3420 3132 3720 3235 350a 392e 3920 2020  4 127 255.9.9
>> ...
>> 
>> You ran it on a dataset with zeroes? Everything works properly for me
>> except the zero values in the source GeoTIFF--everything else is colored as
>> expected, with the correct alpha values.
>> 
>> In fact (I probably should have mentioned this), when I first noticed the
>> problem, I did not have the 0.1 value line in there, and it was actually
>> interpolating the alpha from 0-255 between the values 0 and 9.9 (i.e. it
>> got progressively more opaque between those values).
>> 
>> Also, FWIW, I encountered this issue under 1.7.0 and upgraded to 1.7.1 to
>> make sure it wasn't a bug fixed in .1, but no, it does it in both versions.
>> 
>> -Matt
>> 
>> On Feb 23, 2010, at 1:50 PM, Even Rouault wrote:
>>> I think the problem lies in you .clr file. I pasted the content from the
>>> email into a file, and when looking with an hexadecimal editor, I see
>>> that there are several instances of a strange hexadecimal sequence "0xc2
>>> 0xa0" that is used as a separator between the figures. If your original
>>> .clr file has really those, and they are not an artifact of pasting into
>>> the email, then this is the cause of your issue, as the parser only
>>> supports spaces, tabulations, commas or colons. When fixing the clr file,
>>> I get expected results.
>>> 
>>> Le Tuesday 23 February 2010 20:12:14 Matt Williamson, vous avez ?crit :
>>>> Hello List,
>>>> 
>>>> I may have encountered a bug in gdaldem color-relief. When I use it to
>>>> apply a color map to a GeoTIFF band that has positive and negative and
>>>> zero values, the zero pixels are always translated as having alpha 0,
>>>> even if the color map file explicitly states zero values should be
>>>> opaque.
>>>> 
>>>> e.g., I'm using a command like this one:
>>>> 
>>>> gdaldem color-relief MinT_SFC.EPSG_900913.tif colortables/T_SFC.clr
>>>> pngs/test.png -alpha -b 1 -of PNG
>>>> 
>>>> and a segment of the color table file reads as follows:
>>>> 
>>>> -10.0   64  64  64
>>>> -0.1   127 127 127 255
>>>> 0       64  64 127 255
>>>> 0.1     64  64 127 255
>>>> 9.9    127 127 192
>>>> 
>>>> I can provide a sample dataset that produces this problem, but I'm not
>>>> sure what the etiquette on attaching files in this list is.
>>>> 
>>>> Can anyone confirm they see the same behavior? I'm using 1.7.1, compiled
>>>> locally. The behavior appears whether my -of is PNG or GTiff, so I don't
>>>> think it's a driver issue.
>>>> 
>>>> I know this has nothing to do with generating elevation maps, but it's
>>>> too convenient a way to apply a color map to float data--I had been
>>>> using mapserver just to make colorized PNGs, and gdaldem is so much
>>>> cleaner.
>>>> 
>>>> Thanks!
>>>> 
>>>> -Matt
>>>> 
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100225/2e4ff80e/attachment.html
From even.rouault at mines-paris.org  Thu Feb 25 18:45:58 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb 25 18:46:10 2010
Subject: [gdal-dev] Possible bug in gdaldem color-relief,
	zero always transparent
In-Reply-To: <7D91F0E1-D480-4093-8D25-6FF11364AB81@gmail.com>
References: <0F200C15-9DFE-4324-B81C-21E780BE5079@gmail.com>
	<201002232355.48650.even.rouault@mines-paris.org>
	<7D91F0E1-D480-4093-8D25-6FF11364AB81@gmail.com>
Message-ID: <201002260045.59122.even.rouault@mines-paris.org>

Le Friday 26 February 2010 00:13:22 Matt Williamson, vous avez ?crit?:
> Ok, got some clarification.
>
> The _real_ problem was that my dataset did not have it's NODATA value set
> properly. That being the case, gdaldem apparently assumes 0 is the NODATA
> value...sort of...if you have an "nv" line in the color table, perhaps.
> Since I had a "nv" line in my color table, it seems that the setting for 0
> and the setting for nv were conflicting. The result was still rather odd,
> so I might still toss this in the bug tracker and see what you guys think
> of the behavior.

Yes, please do. While reviewing the code, it appears that in the case 'nv' is 
defined but there's no NODATA value defined for the dataset, it is wrongly 
interprated as 0. I agree it should be ignored in that case. So you ended up 
with 2 entries in the color file with the same key, which leaks to an 
undefined behaviour for which entry will be used.

>
> I tried removing the nv entry from the color table, and the results were
> perfectly sensible. Removing the explicit zero entry and leaving the nv
> setting produced strange results...it seems that in this case, the value
> for zero gets set to black with the opacity of the nv entry, unless the nv
> entry has opacity 255, in which case the zero value is the color specified
> for nv.
>
> It's probably one of those cases where if you have a nv entry specified for
> a dataset without a NODATA value, then the behavior is undefined...which is
> fine, but it took me a while to figure out what the heck was going on.
> What's really strange to me though is that the actual NODATA pixels
> (-30000, in this case) also seemed to be taking on the nv color settings,
> correctly, even though no NODATA value was set...a fluke probably, but
> whatever.
>
> On a separate note, the reason I had a file with no NODATA value specified
> was that I expected gdalwarp to pass-through the NODATA value from the
> source file if none of the -*nodata switches were present--but it doesn't.
> I can mostly understand this, but it's somewhat counterintuitive since
> gdal_translate works this way.

-srcnodata should not been needed. If not specified, gdalwarp will use the 
nodata value of the source bands.
But currently, you need to specify -dstnodata. I guess the reason is 
historical / backward compatibility with behaviour of previous versions of 
gdalwarp.

> Also, I am forced to specify a value for 
> -dstnodata to get it to work--but as it happens I'm trying to process
> multiple files in batch, which have different output data types, and
> different source NODATA values...is there a way to have gdalwarp
> passthrough the NODATA value from the source to the destination file
> automatically?

If you're on Unix/Linux, use of usual command line utilities should do it :

NODATA_VAL=$(gdalinfo in.tif | grep "NoData Value" | awk '{print $2}' | 
awk -F '=' '{print $2}')
if "$NODATA_VAL" != ""; then
	gdalwarp -dstnodata $NODATA_VAL in.tif out.tif
else
	gdalwarp in.tif out.tif
fi

But this could be worth an enhancement ticket. I'd imagine something 
like "gdalwarp -dstnodata source src.tif dst.tif" to use the source nodata 
values as dest nodata values.

>
> Thanks again,
>
> -Matt
>
> On Feb 23, 2010, at 3:55 PM, Even Rouault wrote:
> > Hum, then I have no clue. Yes I tested with a dataset with zeros.
> >
> > You can file a ticket on Trac with the dataset and the .clr file
> > attached, provided that the dataset is not too big (no more than 1 MB).
> > Otherwise, you'll have to provide a link to the dataset.
> >
> > Le Tuesday 23 February 2010 22:26:44 Matt Williamson, vous avez ?crit :
> >> Hmm! Thanks, that is definitely not something I would have
> >> checked--However, I don't think it's my problem. I checked my .clr file
> >> I'm running, and I don't see anything out of the ordinary:
> >>
> >> $ xxd T_SFC.clr
> >> 0000000: 2d34 302e 3020 2031 3237 2032 3535 2032  -40.0  127 255 2
> >> 0000010: 3535 0a2d 3330 2e31 2020 3139 3220 3235  55.-30.1  192 25
> >> ...
> >> 0000070: 320a 2d31 302e 3020 2020 3634 2020 3634  2.-10.0   64  64
> >> 0000080: 2020 3634 0a2d 302e 3120 2020 3132 3720    64.-0.1   127
> >> 0000090: 3132 3720 3132 3720 3235 350a 3020 2020  127 127 255.0
> >> 00000a0: 2020 2020 3634 2020 3634 2031 3237 2032      64  64 127 2
> >> 00000b0: 3535 0a30 2e31 2020 2020 2036 3420 2036  55.0.1     64  6
> >> 00000c0: 3420 3132 3720 3235 350a 392e 3920 2020  4 127 255.9.9
> >> ...
> >>
> >> You ran it on a dataset with zeroes? Everything works properly for me
> >> except the zero values in the source GeoTIFF--everything else is colored
> >> as expected, with the correct alpha values.
> >>
> >> In fact (I probably should have mentioned this), when I first noticed
> >> the problem, I did not have the 0.1 value line in there, and it was
> >> actually interpolating the alpha from 0-255 between the values 0 and 9.9
> >> (i.e. it got progressively more opaque between those values).
> >>
> >> Also, FWIW, I encountered this issue under 1.7.0 and upgraded to 1.7.1
> >> to make sure it wasn't a bug fixed in .1, but no, it does it in both
> >> versions.
> >>
> >> -Matt
> >>
> >> On Feb 23, 2010, at 1:50 PM, Even Rouault wrote:
> >>> I think the problem lies in you .clr file. I pasted the content from
> >>> the email into a file, and when looking with an hexadecimal editor, I
> >>> see that there are several instances of a strange hexadecimal sequence
> >>> "0xc2 0xa0" that is used as a separator between the figures. If your
> >>> original .clr file has really those, and they are not an artifact of
> >>> pasting into the email, then this is the cause of your issue, as the
> >>> parser only supports spaces, tabulations, commas or colons. When fixing
> >>> the clr file, I get expected results.
> >>>
> >>> Le Tuesday 23 February 2010 20:12:14 Matt Williamson, vous avez ?crit :
> >>>> Hello List,
> >>>>
> >>>> I may have encountered a bug in gdaldem color-relief. When I use it to
> >>>> apply a color map to a GeoTIFF band that has positive and negative and
> >>>> zero values, the zero pixels are always translated as having alpha 0,
> >>>> even if the color map file explicitly states zero values should be
> >>>> opaque.
> >>>>
> >>>> e.g., I'm using a command like this one:
> >>>>
> >>>> gdaldem color-relief MinT_SFC.EPSG_900913.tif colortables/T_SFC.clr
> >>>> pngs/test.png -alpha -b 1 -of PNG
> >>>>
> >>>> and a segment of the color table file reads as follows:
> >>>>
> >>>> -10.0   64  64  64
> >>>> -0.1   127 127 127 255
> >>>> 0       64  64 127 255
> >>>> 0.1     64  64 127 255
> >>>> 9.9    127 127 192
> >>>>
> >>>> I can provide a sample dataset that produces this problem, but I'm not
> >>>> sure what the etiquette on attaching files in this list is.
> >>>>
> >>>> Can anyone confirm they see the same behavior? I'm using 1.7.1,
> >>>> compiled locally. The behavior appears whether my -of is PNG or GTiff,
> >>>> so I don't think it's a driver issue.
> >>>>
> >>>> I know this has nothing to do with generating elevation maps, but it's
> >>>> too convenient a way to apply a color map to float data--I had been
> >>>> using mapserver just to make colorized PNGs, and gdaldem is so much
> >>>> cleaner.
> >>>>
> >>>> Thanks!
> >>>>
> >>>> -Matt
> >>>>
> >>>> _______________________________________________
> >>>> gdal-dev mailing list
> >>>> gdal-dev@lists.osgeo.org
> >>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From stakk_man at hotmail.com  Thu Feb 25 21:55:31 2010
From: stakk_man at hotmail.com (Livingstone)
Date: Thu Feb 25 21:55:33 2010
Subject: [gdal-dev] Querying Field Names
Message-ID: <1267152931094-4636867.post@n2.nabble.com>


Hi,

I'm using Python to do some work with shape files, with GDAL/OGR, although I
am not particularly experienced in GIS programming (so I apologise for any
incorrect terminology, etc.). What I need to do is retrieve the list of
field names in the shape file; fields can be queried by name or row number,
surely the field names can be listed? (Then I can query the field given that
I know the field name)...

I have searched the documentation quite thoroughly with no luck.. Perhaps my
terminology is incorrect? Using QGIS to bring up the attribute table shows
(for example):
       ID    Street_Add           Road_Locat         Title
1    143   1 Lake Place          Ilam                   Smith, C. J.
2    144   3 Tower Road         Riccarton           Townshend, P.
3    145   7 Lake Place          Ilam                   Morrison, J.
4    146   9 Harper Court       Ilam                   Doe, J.
5    147   11 Tower Road      South Ricc           Black, F.

I need to find what field names are available; e.g. ID, Street_Add,
Road_Locat, Title...

Thanks in advance,
Stacy
-- 
View this message in context: http://n2.nabble.com/Querying-Field-Names-tp4636867p4636867.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Thu Feb 25 22:01:42 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Feb 25 22:01:45 2010
Subject: [gdal-dev] raster to polygon
In-Reply-To: <4B86F4D4.6020609@und.edu>
References: <4B86F4D4.6020609@und.edu>
Message-ID: <eb502d881002251901l62e9f0c9tce29485d0599d14b@mail.gmail.com>

Xiaodong,

Have you tried the gdal_polygonize.py script (
http://www.gdal.org/gdal_polygonize.html)? Since your raster is classified,
this should work nicely.

On Fri, Feb 26, 2010 at 3:38 AM, Xiaodong Zhang <xiaodong.zhang2@und.edu>wrote:

> Hi,
>
> Currently, I'm using gdal and ogr to convert a map after classification
> into a point shape file. Since the classification map typically consists of
> zones, a polygon shape file would make more sense. I'm wondering if anyone
> would know or share the idea of how to convert a map into a polygon shape
> file directly.
>
> Thanks
> Xiaodong
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100226/f28b26fe/attachment.html
From chaitanya.ch at gmail.com  Thu Feb 25 22:26:32 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Feb 25 22:26:36 2010
Subject: [gdal-dev] Querying Field Names
In-Reply-To: <1267152931094-4636867.post@n2.nabble.com>
References: <1267152931094-4636867.post@n2.nabble.com>
Message-ID: <eb502d881002251926p7a2c1a46q6758be70f15bb9f7@mail.gmail.com>

Stacy,

This should help:
http://trac.osgeo.org/gdal/browser/trunk/autotest/ogr/ogr_shape.py#L1384

On Fri, Feb 26, 2010 at 8:25 AM, Livingstone <stakk_man@hotmail.com> wrote:

>
> Hi,
>
> I'm using Python to do some work with shape files, with GDAL/OGR, although
> I
> am not particularly experienced in GIS programming (so I apologise for any
> incorrect terminology, etc.). What I need to do is retrieve the list of
> field names in the shape file; fields can be queried by name or row number,
> surely the field names can be listed? (Then I can query the field given
> that
> I know the field name)...
>
> I have searched the documentation quite thoroughly with no luck.. Perhaps
> my
> terminology is incorrect? Using QGIS to bring up the attribute table shows
> (for example):
>       ID    Street_Add           Road_Locat         Title
> 1    143   1 Lake Place          Ilam                   Smith, C. J.
> 2    144   3 Tower Road         Riccarton           Townshend, P.
> 3    145   7 Lake Place          Ilam                   Morrison, J.
> 4    146   9 Harper Court       Ilam                   Doe, J.
> 5    147   11 Tower Road      South Ricc           Black, F.
>
> I need to find what field names are available; e.g. ID, Street_Add,
> Road_Locat, Title...
>
> Thanks in advance,
> Stacy
> --
> View this message in context:
> http://n2.nabble.com/Querying-Field-Names-tp4636867p4636867.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100226/c5a38bbd/attachment.html
From parshakov at uleth.ca  Thu Feb 25 22:52:40 2010
From: parshakov at uleth.ca (vona)
Date: Thu Feb 25 22:52:42 2010
Subject: [gdal-dev] RE: Simple Q: fatal error LNK1120: 19 unresolved
	externals
In-Reply-To: <72251B925CE10A478606EEAC6AA683BE18081E12E4@SINTEFEXMBX01.sintef.no>
References: <1266277834419-4577872.post@n2.nabble.com>
	<72251B925CE10A478606EEAC6AA683BE18081E12E3@SINTEFEXMBX01.sintef.no>
	<1266281496083-4578039.post@n2.nabble.com>
	<72251B925CE10A478606EEAC6AA683BE18081E12E4@SINTEFEXMBX01.sintef.no>
Message-ID: <1267156360423-4637053.post@n2.nabble.com>


Thank you very much Sjur for the detailed respond.
Now I'm getting only
error LNK2001: unresolved external symbol _main
error LNK1120: 1 unresolved externals

By the way Sjur, have you ever thought of making some video tutorials and
posting them on youtube? I always find them very useful and they are easy to
find...
-- 
View this message in context: http://n2.nabble.com/Simple-Q-fatal-error-LNK1120-19-unresolved-externals-tp4577872p4637053.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From martin.raspaud at smhi.se  Fri Feb 26 04:18:18 2010
From: martin.raspaud at smhi.se (Martin Raspaud)
Date: Fri Feb 26 04:18:37 2010
Subject: [gdal-dev] Reading Modis level1b HDF4 data
Message-ID: <4B8791DA.4050807@smhi.se>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi,

I'm trying to access Modis data (Terra) with gdal through the python API.

I'm following the gdal tutorial http://www.gdal.org/gdal_tutorial.html, but get
stuck at the rasterband reading part, with an error:
Traceback (most recent call last):
  File "gdaltest.py", line 24, in <module>
    print 'Band Type=',gdal.GetDataTypeName(band.DataType)
AttributeError: 'NoneType' object has no attribute 'DataType'

which means that the line:
band = dataset.GetRasterBand(1)
did return None.

Does anyone have an idea of what is going on ?
I join the gdaltest.py and the dump of the file from gdalinfo (removed some
lengthy metadata).

Thanks,
Martin
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)
Comment: Using GnuPG with Fedora - http://enigmail.mozdev.org/

iQEcBAEBAgAGBQJLh5HaAAoJEBdvyODiyJI4FoUH/jIbIM2s+rWq9V01CYRxjv+B
PsvKJwIIL2saJ/ozuGlg6K3VMofW4eRRgOq877S6nnuVFSn1Ex0LnL01TKJIqoQF
z9oOAY5knq/c2L37F2M1Y1ROg7hXyu0aTRsJD4+dkEBztu1DXSyC9j1ziYZYf52w
/F0rWAkUjo1z+VuLnAbuqMX/41aHSLQCh5ksMaTv7+aw1QebAwL05IaKAKlEEbLE
Mo8PpZfEl9NeoMyGkm8hK92dkpGxiFTozBmrGZy8zISmY5P3NpuUXDJGMQvX+OHY
3Hf+hHhYZhCXMVKNgM1ECs+SfFQFzegU9W+v5BFxL/VsuG3uwAhDJyhU/XuOcCY=
=UQkq
-----END PGP SIGNATURE-----
-------------- next part --------------
import gdal
from gdalconst import *

filename = "/local_disk/data/satellite/terra/MOD021KM.A2005161.0920.005.2005161194747.hdf"

dataset = gdal.Open( filename, GA_ReadOnly )
if dataset is None:
    print "Dataset is None"


print 'Driver: ', dataset.GetDriver().ShortName,'/', \
      dataset.GetDriver().LongName
print 'Size is ',dataset.RasterXSize,'x',dataset.RasterYSize, \
      'x',dataset.RasterCount
print 'Projection is ',dataset.GetProjection()

geotransform = dataset.GetGeoTransform()
if not geotransform is None:
    print 'Origin = (',geotransform[0], ',',geotransform[3],')'
    print 'Pixel Size = (',geotransform[1], ',',geotransform[5],')'

band = dataset.GetRasterBand(1)

print 'Band Type=',gdal.GetDataTypeName(band.DataType)

min = band.GetMinimum()
max = band.GetMaximum()
if min is None or max is None:
    (min,max) = band.ComputeRasterMinMax(1)
print 'Min=%.3f, Max=%.3f' % (min,max)
    
if band.GetOverviewCount() > 0:
    print 'Band has ', band.GetOverviewCount(), ' overviews.'

if not band.GetRasterColorTable() is None:
    print 'Band has a color table with ', \
          band.GetRasterColorTable().GetCount(), ' entries.'

scanline = band.ReadRaster( 0, 0, band.XSize, 1, \
                            band.XSize, 1, GDT_Float32 )
gdal.Close(dataset)
-------------- next part --------------
Driver: HDF4/Hierarchical Data Format Release 4
Files: MOD021KM.A2005161.0920.005.2005161194747.hdf
Size is 512, 512
Coordinate System is `'
Metadata:
  HDFEOSVersion=HDFEOS_V2.9
  HDFEOS_FractionalOffset_10*nscans_MODIS_SWATH_Type_L1B=0
  HDFEOS_FractionalOffset_Max_EV_frames_MODIS_SWATH_Type_L1B=0
  LOCALGRANULEID=MOD021KM.A2005161.0920.005.2005161194747.hdf
  PRODUCTIONDATETIME=2005-06-10T19:47:48.000Z
  DAYNIGHTFLAG=Day
  REPROCESSINGACTUAL=processed once
  REPROCESSINGPLANNED=further update is anticipated
  SCIENCEQUALITYFLAG=Not Investigated
  AUTOMATICQUALITYFLAGEXPLANATION=not being investigated
  AUTOMATICQUALITYFLAG=Suspect
  QAPERCENTMISSINGDATA=0
  QAPERCENTOUTOFBOUNDSDATA=52
  QAPERCENTINTERPOLATEDDATA=0
  PARAMETERNAME=EV_1KM_RefSB
  SCIENCEQUALITYFLAG=Not Investigated
  AUTOMATICQUALITYFLAGEXPLANATION=not being investigated
  AUTOMATICQUALITYFLAG=Suspect
  QAPERCENTMISSINGDATA=0
  QAPERCENTOUTOFBOUNDSDATA=0
  QAPERCENTINTERPOLATEDDATA=0
  PARAMETERNAME=EV_1KM_Emissive
  EQUATORCROSSINGDATE=2005-06-10
  EQUATORCROSSINGTIME=09:38:13.976074
  ORBITNUMBER=29140
  EQUATORCROSSINGLONGITUDE=12.7623657291106
  VERSIONID=5
  SHORTNAME=MOD021KM
  INPUTPOINTER=LGID:MOD01:005:MOD01.A2005161.0915.005.2005161191258.hdf, LGID:MOD01:005:MOD01.A2005161.0920.005.2005161191440.hdf, LGID:MOD01:005:MOD01.A2005161.0925.005.2005161191649.hdf, MOD02_Reflective_LUTs.hdf.V5.0.6.4.coeff, MOD02_Emissive_LUTs.hdf.V5.0.6.4.coeff, MOD02_QA_LUTs.hdf.V5.0.6.4.coeff
  GRINGPOINTLONGITUDE=8.7597011923161, 55.6532739676118, 40.0391675744443, 9.38789658628149
  GRINGPOINTLATITUDE=66.8481307216782, 60.1649488030506, 44.3272211294195, 48.4759872891678
  GRINGPOINTSEQUENCENO=1, 2, 3, 4
  EXCLUSIONGRINGFLAG=N
  RANGEENDINGDATE=2005-06-10
  RANGEENDINGTIME=09:25:00.000000
  RANGEBEGINNINGDATE=2005-06-10
  RANGEBEGINNINGTIME=09:20:00.000000
  PGEVERSION=5.0.6
  ANCILLARYINPUTPOINTER=LGID:MOD03:005:MOD03.A2005161.0920.005.2005161192012.hdf
  ANCILLARYINPUTTYPE=Geolocation
  ASSOCIATEDSENSORSHORTNAME=MODIS
  ASSOCIATEDPLATFORMSHORTNAME=Terra
  ASSOCIATEDINSTRUMENTSHORTNAME=MODIS
  AveragedBlackBodyTemperature= 290.02
  AveragedMirrorTemperature= 276.36
  AveragedFocalPlane1Temperature= 269.49
  AveragedFocalPlane2Temperature= 269.78
  AveragedFocalPlane3Temperature=  83.39
  AveragedFocalPlane4Temperature=  83.02
  CalibrationQuality=marginal
  MissionPhase=EXECUTION
  NadirPointing=Y
  NORTHBOUNDINGCOORDINATE=66.9024176306048
  SOUTHBOUNDINGCOORDINATE=44.4806525822938
  EASTBOUNDINGCOORDINATE=55.6517447686945
  WESTBOUNDINGCOORDINATE=9.37947978255603
  ALGORITHMPACKAGEACCEPTANCEDATE=1999-12-14
  ALGORITHMPACKAGEMATURITYCODE=OPERATIONAL
  ALGORITHMPACKAGENAME=MODIS Level 1B Algorithm Package
  ALGORITHMPACKAGEVERSION=5.0.6.4_Terra
  INSTRUMENTNAME=Moderate Resolution Imaging SpectroRadiometer
  PROCESSINGCENTER=GSFC
  DESCRREVISION=5.0
  PRODUCTIONHISTORY=PGE02:5.0.6.4;PGE01:5.0.2
  LONGNAME=MODIS/Terra Calibrated Radiances 5-Min L1B Swath 1km
  PROCESSINGENVIRONMENT=/usr/bsd/hostname 
  Number of Scans=204
  Number of Day mode scans=204
  Number of Night mode scans=0
  Incomplete Scans=0
  Max Earth View Frames=1354
  %Valid EV Observations=100, 99.21136, 99.99989, 99.99982, 99.99178, 99.99998, 99.92158, 77.74535, 50.97116, 41.75863, 37.40073, 33.14359, 24.75512, 14.11185, 26.32291, 8.996546, 5.195354, 5.656334, 96.05117, 100, 99.85711, 100, 99.93998, 99.96195, 99.94226, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100
  %Saturated EV Observations=0, 0.7886288, 9.955977e-05, 0.0001719669, 9.050887e-06, 0, 0, 22.14911, 48.40397, 58.16368, 62.59927, 66.85641, 75.24488, 85.88815, 73.67709, 91.00346, 94.80465, 94.34367, 3.94883, 0, 0.1428954, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  % L1A EV All Scan Data are Missing=0
  % L1A EV RSB DN Not in Day Mode=0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 00, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  Bit QA Flags Last Value=819400
  Bit QA Flags Change=8200
  Granule Average QA Values=290.0298, 290.0169, 290.044, 290.023, 290.0063, 289.9778, 290.0536, 290.0276, 290.0271, 289.9987, 289.9916, 289.9913, 269.4888, 269.7763, 83.38789, 83.01974, 276.3508, 276.3605, 277.0281, 275.5197, 276.6356, 275.4676, 274.5634, 268.8403, 265.752, 267.1087, 267.2303, 82.72014, 82.85756, 126.2144, 126.1309, 185.1862, 5.768203, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  Electronics Redundancy Vector=22405973, 1048
  Electronics Configuration Change=0, 0
  Reflective LUT Serial Number and Date of Last Change=R090 2005:05:27:11:08
  Emissive LUT Serial Number and Date of Last Change=E082 2005:05:27:11:08
  QA LUT Serial Number and Date of Last Change=Q078 2005:05:27:11:08
  Focal Plane Set Point State=1
  Doors and Screens Configuration=224
  Reflective Bands With Bad Data=0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0
  Emissive Bands With Bad Data=0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  Noise in Black Body Thermistors=3, 2, 3, 2, 3, 2, 2, 3, 2, 2, 6, 2
  Noise in Average BB Temperature=2
  Noise in LWIR FPA Temperature=207
  Noise in MWIR FPA Temperature=18
  Noise in Scan Mirror Thermistor #1=63
  Noise in Scan Mirror Thermistor #2=2
  Noise in Scan Mirror Thermistor Average=9
  Noise in Instrument Temperature=6
  Noise in Cavity Temperature=3
  Noise in Temperature of NIR FPA=0
  Noise in Temperature of Vis FPA=0
  Dead Detector List=0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
Subdatasets:
  SUBDATASET_1_NAME=HDF4_EOS:EOS_SWATH:"MOD021KM.A2005161.0920.005.2005161194747.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
  SUBDATASET_1_DESC=[15x2040x1354] EV_1KM_RefSB MODIS_SWATH_Type_L1B (16-bit unsigned integer)
  SUBDATASET_2_NAME=HDF4_EOS:EOS_SWATH:"MOD021KM.A2005161.0920.005.2005161194747.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB_Uncert_Indexes
  SUBDATASET_2_DESC=[15x2040x1354] EV_1KM_RefSB_Uncert_Indexes MODIS_SWATH_Type_L1B (8-bit unsigned integer)
  SUBDATASET_3_NAME=HDF4_EOS:EOS_SWATH:"MOD021KM.A2005161.0920.005.2005161194747.hdf":MODIS_SWATH_Type_L1B:EV_1KM_Emissive
  SUBDATASET_3_DESC=[16x2040x1354] EV_1KM_Emissive MODIS_SWATH_Type_L1B (16-bit unsigned integer)
  SUBDATASET_4_NAME=HDF4_EOS:EOS_SWATH:"MOD021KM.A2005161.0920.005.2005161194747.hdf":MODIS_SWATH_Type_L1B:EV_1KM_Emissive_Uncert_Indexes
  SUBDATASET_4_DESC=[16x2040x1354] EV_1KM_Emissive_Uncert_Indexes MODIS_SWATH_Type_L1B (8-bit unsigned integer)
  SUBDATASET_5_NAME=HDF4_EOS:EOS_SWATH:"MOD021KM.A2005161.0920.005.2005161194747.hdf":MODIS_SWATH_Type_L1B:EV_250_Aggr1km_RefSB
  SUBDATASET_5_DESC=[2x2040x1354] EV_250_Aggr1km_RefSB MODIS_SWATH_Type_L1B (16-bit unsigned integer)
  SUBDATASET_6_NAME=HDF4_EOS:EOS_SWATH:"MOD021KM.A2005161.0920.005.2005161194747.hdf":MODIS_SWATH_Type_L1B:EV_250_Aggr1km_RefSB_Uncert_Indexes
  SUBDATASET_6_DESC=[2x2040x1354] EV_250_Aggr1km_RefSB_Uncert_Indexes MODIS_SWATH_Type_L1B (8-bit unsigned integer)
  SUBDATASET_7_NAME=HDF4_EOS:EOS_SWATH:"MOD021KM.A2005161.0920.005.2005161194747.hdf":MODIS_SWATH_Type_L1B:EV_250_Aggr1km_RefSB_Samples_Used
  SUBDATASET_7_DESC=[2x2040x1354] EV_250_Aggr1km_RefSB_Samples_Used MODIS_SWATH_Type_L1B (8-bit integer)
  SUBDATASET_8_NAME=HDF4_EOS:EOS_SWATH:"MOD021KM.A2005161.0920.005.2005161194747.hdf":MODIS_SWATH_Type_L1B:EV_500_Aggr1km_RefSB
  SUBDATASET_8_DESC=[5x2040x1354] EV_500_Aggr1km_RefSB MODIS_SWATH_Type_L1B (16-bit unsigned integer)
  SUBDATASET_9_NAME=HDF4_EOS:EOS_SWATH:"MOD021KM.A2005161.0920.005.2005161194747.hdf":MODIS_SWATH_Type_L1B:EV_500_Aggr1km_RefSB_Uncert_Indexes
  SUBDATASET_9_DESC=[5x2040x1354] EV_500_Aggr1km_RefSB_Uncert_Indexes MODIS_SWATH_Type_L1B (8-bit unsigned integer)
  SUBDATASET_10_NAME=HDF4_EOS:EOS_SWATH:"MOD021KM.A2005161.0920.005.2005161194747.hdf":MODIS_SWATH_Type_L1B:EV_500_Aggr1km_RefSB_Samples_Used
  SUBDATASET_10_DESC=[5x2040x1354] EV_500_Aggr1km_RefSB_Samples_Used MODIS_SWATH_Type_L1B (8-bit integer)
  SUBDATASET_11_NAME=HDF4_EOS:EOS_SWATH:"MOD021KM.A2005161.0920.005.2005161194747.hdf":MODIS_SWATH_Type_L1B:Height
  SUBDATASET_11_DESC=[408x271] Height MODIS_SWATH_Type_L1B (16-bit integer)
  SUBDATASET_12_NAME=HDF4_EOS:EOS_SWATH:"MOD021KM.A2005161.0920.005.2005161194747.hdf":MODIS_SWATH_Type_L1B:SensorZenith
  SUBDATASET_12_DESC=[408x271] SensorZenith MODIS_SWATH_Type_L1B (16-bit integer)
  SUBDATASET_13_NAME=HDF4_EOS:EOS_SWATH:"MOD021KM.A2005161.0920.005.2005161194747.hdf":MODIS_SWATH_Type_L1B:SensorAzimuth
  SUBDATASET_13_DESC=[408x271] SensorAzimuth MODIS_SWATH_Type_L1B (16-bit integer)
  SUBDATASET_14_NAME=HDF4_EOS:EOS_SWATH:"MOD021KM.A2005161.0920.005.2005161194747.hdf":MODIS_SWATH_Type_L1B:Range
  SUBDATASET_14_DESC=[408x271] Range MODIS_SWATH_Type_L1B (16-bit unsigned integer)
  SUBDATASET_15_NAME=HDF4_EOS:EOS_SWATH:"MOD021KM.A2005161.0920.005.2005161194747.hdf":MODIS_SWATH_Type_L1B:SolarZenith
  SUBDATASET_15_DESC=[408x271] SolarZenith MODIS_SWATH_Type_L1B (16-bit integer)
  SUBDATASET_16_NAME=HDF4_EOS:EOS_SWATH:"MOD021KM.A2005161.0920.005.2005161194747.hdf":MODIS_SWATH_Type_L1B:SolarAzimuth
  SUBDATASET_16_DESC=[408x271] SolarAzimuth MODIS_SWATH_Type_L1B (16-bit integer)
  SUBDATASET_17_NAME=HDF4_EOS:EOS_SWATH:"MOD021KM.A2005161.0920.005.2005161194747.hdf":MODIS_SWATH_Type_L1B:gflags
  SUBDATASET_17_DESC=[408x271] gflags MODIS_SWATH_Type_L1B (8-bit unsigned integer)
  SUBDATASET_18_NAME=HDF4_EOS:EOS_SWATH:"MOD021KM.A2005161.0920.005.2005161194747.hdf":MODIS_SWATH_Type_L1B:EV_Band26
  SUBDATASET_18_DESC=[2040x1354] EV_Band26 MODIS_SWATH_Type_L1B (16-bit unsigned integer)
  SUBDATASET_19_NAME=HDF4_EOS:EOS_SWATH:"MOD021KM.A2005161.0920.005.2005161194747.hdf":MODIS_SWATH_Type_L1B:EV_Band26_Uncert_Indexes
  SUBDATASET_19_DESC=[2040x1354] EV_Band26_Uncert_Indexes MODIS_SWATH_Type_L1B (8-bit unsigned integer)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdaltest.py.sig
Type: application/octet-stream
Size: 287 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100226/ab9ef32c/gdaltest.py-0001.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: moddump.sig
Type: application/octet-stream
Size: 287 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100226/ab9ef32c/moddump-0001.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: martin_raspaud.vcf
Type: text/x-vcard
Size: 259 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100226/ab9ef32c/martin_raspaud-0001.vcf
From giohappy at gmail.com  Fri Feb 26 04:56:31 2010
From: giohappy at gmail.com (G. Allegri)
Date: Fri Feb 26 04:56:34 2010
Subject: [gdal-dev] why ogr oracle connection is so slow?
Message-ID: <e12429641002260156o4219fafcpa83a68259ac3f166@mail.gmail.com>

In this period I'm working intensively with Oracle Spatial (on Windows
XP), and I've had the occasion to use it from many perspectives:
through Gvsig with its jdbc-based connector, ArcGis with the
Interoperability Tools, etc.
When I've decided to test the ogr driver I've seen it's times slower
then any other solution. I see it uses the C api (oci.h), but I'm not
capable to debug it to find the bottleneck...

Does anyone can shed light on this?
thanks,
giovanni
From ivan.lucena at pmldnet.com  Fri Feb 26 07:05:18 2010
From: ivan.lucena at pmldnet.com (Ivan)
Date: Fri Feb 26 07:05:23 2010
Subject: [gdal-dev] Reading Modis level1b HDF4 data
In-Reply-To: <4B8791DA.4050807@smhi.se>
References: <4B8791DA.4050807@smhi.se>
Message-ID: <4B87B8FE.2020203@pmldnet.com>

Martin,

Martin Raspaud wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> Hi,
> 
> I'm trying to access Modis data (Terra) with gdal through the python API.
> 
> I'm following the gdal tutorial http://www.gdal.org/gdal_tutorial.html, but get
> stuck at the rasterband reading part, with an error:
> Traceback (most recent call last):
>   File "gdaltest.py", line 24, in <module>
>     print 'Band Type=',gdal.GetDataTypeName(band.DataType)
> AttributeError: 'NoneType' object has no attribute 'DataType'
> 
> which means that the line:
> band = dataset.GetRasterBand(1)
> did return None.
> 
> Does anyone have an idea of what is going on ?

Try to use gdal.Open() on a subdataset and then call GetRasterBand(), example:

dataset = 
gdal.Open('HDF4_EOS:EOS_SWATH:"/local_disk/data/satellite/terra/MOD021KM.A2005161.0920.005.2005161194747.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB')
band = dataset.GetRasterBand(1)

See http://gdal.org/frmt_hdf4.html for more details on HDF subdatasets.


> I join the gdaltest.py and the dump of the file from gdalinfo (removed some
> lengthy metadata).
> 
> Thanks,
> Martin
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.9 (GNU/Linux)
> Comment: Using GnuPG with Fedora - http://enigmail.mozdev.org/
> 
> iQEcBAEBAgAGBQJLh5HaAAoJEBdvyODiyJI4FoUH/jIbIM2s+rWq9V01CYRxjv+B
> PsvKJwIIL2saJ/ozuGlg6K3VMofW4eRRgOq877S6nnuVFSn1Ex0LnL01TKJIqoQF
> z9oOAY5knq/c2L37F2M1Y1ROg7hXyu0aTRsJD4+dkEBztu1DXSyC9j1ziYZYf52w
> /F0rWAkUjo1z+VuLnAbuqMX/41aHSLQCh5ksMaTv7+aw1QebAwL05IaKAKlEEbLE
> Mo8PpZfEl9NeoMyGkm8hK92dkpGxiFTozBmrGZy8zISmY5P3NpuUXDJGMQvX+OHY
> 3Hf+hHhYZhCXMVKNgM1ECs+SfFQFzegU9W+v5BFxL/VsuG3uwAhDJyhU/XuOcCY=
> =UQkq
> -----END PGP SIGNATURE-----
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


Regards,

Ivan
From martin.raspaud at smhi.se  Fri Feb 26 07:15:37 2010
From: martin.raspaud at smhi.se (Martin Raspaud)
Date: Fri Feb 26 07:15:42 2010
Subject: [gdal-dev] Reading Modis level1b HDF4 data
In-Reply-To: <4B87B8FE.2020203@pmldnet.com>
References: <4B8791DA.4050807@smhi.se> <4B87B8FE.2020203@pmldnet.com>
Message-ID: <4B87BB69.1030201@smhi.se>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi Ivan,

Ivan skrev:
> Martin,
>> Try to use gdal.Open() on a subdataset and then call GetRasterBand(),
>> example:
> 
>> dataset =
>> gdal.Open('HDF4_EOS:EOS_SWATH:"/local_disk/data/satellite/terra/MOD021KM.A2005161.0920.005.2005161194747.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB')
> 
>> band = dataset.GetRasterBand(1)
> 
>> See http://gdal.org/frmt_hdf4.html for more details on HDF subdatasets.

Indeed, this was what I was missing !

I looks like I can retreive the data now...

Thanks a lot,
Martin
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)
Comment: Using GnuPG with Fedora - http://enigmail.mozdev.org/

iQEcBAEBAgAGBQJLh7tpAAoJEBdvyODiyJI4jBUIAIY/9/dNHc46LqK6la0PxQv1
MUqbi+3o/yKNwcI0insLDkdjZppScR5fD21oFwovMVIVZsPjXvE7f7FkMDqlz11q
1yhbPYFos+ykORZbM7bG8ou2l3gSXL9rlgETpW4WeKcYtycQM2JeKpiReWvCCqe3
mBZV+FxswOl0Xreb59qytgDyY0SUHXdWybnljn8kdos9J9sKcF6pd+iPl3hFEqVO
iSMcSfGU2o2lfRuRnSCWqmTE1cVB0xrTITTGGUGMPqpeJpsT5MAvA9ahZ3saa6hq
0UNtf08MVSBgqoqBpu00+Z+TRaqWDcQbe1+zDG/Y6iJWv37w4IImmlbTSEgM6LM=
=Q6rM
-----END PGP SIGNATURE-----
-------------- next part --------------
A non-text attachment was scrubbed...
Name: martin_raspaud.vcf
Type: text/x-vcard
Size: 259 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100226/9f9235d3/martin_raspaud.vcf
From rikardocezar at msn.com  Fri Feb 26 08:51:40 2010
From: rikardocezar at msn.com (Ricardo Cezar Bonfim Rodrigues)
Date: Fri Feb 26 08:51:45 2010
Subject: [gdal-dev] Storing Gdal datasets in Postgis
Message-ID: <SNT125-W2860145087AB6BA9830E65C23F0@phx.gbl>


Hi,

I'm using Gdal to load dted files and get max elevations of a region, but I have constraints concerning speed. Inspite of loading geotifs generated from dted has reduced a lot the processing time, its still not enough to the constraints I have. I'm loading geotiffs which represents dted L1 files, reading its points using rasterIO and verifying the max elevation of a rectangle area given ( lat, lon, width).
I've noticed the more expensive is the data reading, so I'm thinking about storing the dted (or geotiff) files in a Postgis. Would it increase the search speed?
Does anyone know the best way to store dted files in a Postgis? I thought about storing geotiffs (generated from deted using gdal), but I dont now exactly how it would work. I know there are spatial queries in Postgis and I think it would be very useful in my case.

I look forwarding to receving any tip of how to do this.

Thanks in Advance,

Ricardo Rodrigues
Brazil
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100226/105ea978/attachment.html
From warmerdam at pobox.com  Fri Feb 26 11:39:26 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 26 11:39:41 2010
Subject: [gdal-dev] why ogr oracle connection is so slow?
In-Reply-To: <e12429641002260156o4219fafcpa83a68259ac3f166@mail.gmail.com>
References: <e12429641002260156o4219fafcpa83a68259ac3f166@mail.gmail.com>
Message-ID: <4B87F93E.8080506@pobox.com>

G. Allegri wrote:
> In this period I'm working intensively with Oracle Spatial (on Windows
> XP), and I've had the occasion to use it from many perspectives:
> through Gvsig with its jdbc-based connector, ArcGis with the
> Interoperability Tools, etc.
> When I've decided to test the ogr driver I've seen it's times slower
> then any other solution. I see it uses the C api (oci.h), but I'm not
> capable to debug it to find the bottleneck...

Giovanni,

What use cases is it particularly slow for?  I will note that fetching
records by feature id is very slow with oracle because each fetch is an
independent SQL query.

In general the Oracle driver read access was not performance tuned as
the point of the original contract supporting it's development was
fast data loading.  I do not believe the problem is use of OCI.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dmorissette at mapgears.com  Fri Feb 26 11:50:46 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri Feb 26 11:50:49 2010
Subject: [gdal-dev] Re: Motion: Commit Access for Adam Nowacki
In-Reply-To: <201002222232.36484.even.rouault@mines-paris.org>
References: <201002222232.36484.even.rouault@mines-paris.org>
Message-ID: <4B87FBE6.1030400@mapgears.com>

Even Rouault wrote:
> Motion: Extend GDAL/OGR Commit Access to Adam Nowacki.
> 

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From ivan.lucena at pmldnet.com  Fri Feb 26 11:52:23 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri Feb 26 11:52:27 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gd2h5IG9nciBvcmFjbGUgY29ubmVjdGlvbiBpcyBzbyBzbG93Pw==?=
Message-ID: <20100226165223.18117.qmail@s466.sureserver.com>

Giovanni,

Have you tried any GeoRaster read and write on your environment? 

Have you been able to compare the performance of Oracle/GeoRaster in GDAL against other alternatives?

The raster driver also uses Oracle's OCI dlls but the performance is balanced between fast loading and fast reading. 

Regards,

Ivan


>  -------Original Message-------
>  From: Frank Warmerdam <warmerdam@pobox.com>
>  To: G. Allegri <giohappy@gmail.com>
>  Cc: gdal-dev@lists.osgeo.org
>  Subject: Re: [gdal-dev] why ogr oracle connection is so slow?
>  Sent: Feb 26 '10 11:39
>  
>  G. Allegri wrote:
>  > In this period I'm working intensively with Oracle Spatial (on Windows
>  > XP), and I've had the occasion to use it from many perspectives:
>  > through Gvsig with its jdbc-based connector, ArcGis with the
>  > Interoperability Tools, etc.
>  > When I've decided to test the ogr driver I've seen it's times slower
>  > then any other solution. I see it uses the C api (oci.h), but I'm not
>  > capable to debug it to find the bottleneck...
>  
>  Giovanni,
>  
>  What use cases is it particularly slow for???I will note that fetching
>  records by feature id is very slow with oracle because each fetch is an
>  independent SQL query.
>  
>  In general the Oracle driver read access was not performance tuned as
>  the point of the original contract supporting it's development was
>  fast data loading.??I do not believe the problem is use of OCI.
>  
>  Best regards,
>  --
>  ---------------------------------------+--------------------------------------
>  I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
>  light and sound - activate the windows | http://pobox.com/~warmerdam
>  and watch the world go round - Rush????| Geospatial Programmer for Rent
>  
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From warmerdam at pobox.com  Fri Feb 26 11:59:21 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 26 11:59:36 2010
Subject: [gdal-dev] Motion: Commit access for 
Message-ID: <4B87FDE9.1010102@pobox.com>

Motion: Commit access on the GDAL/OGR project is extended to Brian Case.

---

Brian Case (Winkey in irc/trac) has been using and contributing to GDAL/OGR
for some time.  He has provided a number of patches, including those in
tickets #2979, #2978, #2977, #2955, #2945, and #2890.  He has not embarked
on development of a libkml based kml driver and it would be convenient for
him to have commit access to develop within the main tree (or possibly in
a sandbox for a while), and to maintain the driver.

Brian, could you confirm here by email your agreement with the guidelines in:

   http://trac.osgeo.org/gdal/wiki/rfc3_commiters

I'll start with a:

+1 Frank

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Feb 26 12:08:18 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 26 12:08:36 2010
Subject: [gdal-dev] Motion: Commit access for
In-Reply-To: <4B87FDE9.1010102@pobox.com>
References: <4B87FDE9.1010102@pobox.com>
Message-ID: <4B880002.4090507@pobox.com>

Frank Warmerdam wrote:
> Motion: Commit access on the GDAL/OGR project is extended to Brian Case.
> 
> ---
> 
> Brian Case (Winkey in irc/trac) has been using and contributing to GDAL/OGR
> for some time.  He has provided a number of patches, including those in
> tickets #2979, #2978, #2977, #2955, #2945, and #2890.  He has not embarked

Folks,

To clarify, he has *now* embarked on development of a libkml based driver.


> on development of a libkml based kml driver and it would be convenient for
> him to have commit access to develop within the main tree (or possibly in
> a sandbox for a while), and to maintain the driver.
> 
> Brian, could you confirm here by email your agreement with the 
> guidelines in:
> 
>   http://trac.osgeo.org/gdal/wiki/rfc3_commiters
> 
> I'll start with a:
> 
> +1 Frank
> 


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Feb 26 12:15:57 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 26 12:16:17 2010
Subject: [gdal-dev] make install -- copy "shapefil.h" into the include dir
In-Reply-To: <201002252029.47343.even.rouault@mines-paris.org>
References: <4B86AA13.6030906@ualg.pt>
	<201002252029.47343.even.rouault@mines-paris.org>
Message-ID: <4B8801CD.40408@pobox.com>

Even Rouault wrote:
> Joaquim,
> 
> I'm not sure this is a good idea. Shapelib and its header file is an internal 
> dependency of GDAL/OGR and should probably remain as such. I'd note we made 
> recently necessary changes to some utilities (gdaltindex comes to mind) to 
> use OGR API and drop their explicit dependency to shapelib.
> 
> I'd note that, in some builds of GDAL, shapelib symbols embedded in the 
> Shapefile driver could even not be exported (for example if configure is run 
> with --with-hide-internal-symbols)

Joaquim,

I concur with Even.  It is not the practice of the project to install the
include files of sublibraries like shapelib (dgnlib, tiff, geotiff, etc)
and it isn't something I want to start.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Feb 26 12:37:21 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 26 12:37:38 2010
Subject: [gdal-dev] gdal_translate with -a_srs option using proj4 syntax
	and +a=ellipsoid
In-Reply-To: <1D5F4E64B8C04F4C868B94AC9A532AF80CA0DEFD@ATLMAIL01.corp.weather.com>
References: <1D5F4E64B8C04F4C868B94AC9A532AF80CA0DEFD@ATLMAIL01.corp.weather.com>
Message-ID: <4B8806D1.3000006@pobox.com>

Cassanova, Bill wrote:
> ***First step is to add the geographic information to the tiff*:
> 
> gdal_translate -a_ullr -3507992.25 6780696 3601343.75 2337361-a_srs 
> "+proj=merc +lon_0=96w +a=6378206.5 +f=0.00339" src_image.tiff 
> dest_image.tiff
> 
> The failure I get is:
> 
> Failed to process SRS definition: +proj=merc +lon_0=96w +a=6378206.5 
> +f=0.00339

Bill,

Unfortunately the OGRSpatialReference PROJ.4 parser does not support
the +f flag, but it does support +rf (inverse flattening).  Try
using +rf=294.98525 instead of the +f parameter.

If you wish, you could file an enhancement ticket requesting that
support for +f be added.

> The problem I am now having is that I bring this image into ArcInfo and 
> for some reason it is shifted north.  I think that being able to 
> correctly apply the ellipsoid equator radius and ellipsoid flattening 
> may fix my problem or am I missing something?
> 
> ***The second step is to create an un****-****projected image from this 
> data*: 
> 
> My presumption is the below command will accomplish
> 
> Just that:
> 
> gdalwarp -t_srs '+proj=latlong' -r ${sample_method} ${tmp_image_3} 
> ${final_image

You should be specific about the target earth model by adding
something like +datum=WGS84 into the -t_srs string.

Otherwise the approach is plausible.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mateusz at loskot.net  Fri Feb 26 12:39:39 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Feb 26 12:39:02 2010
Subject: [gdal-dev] Motion: Commit access for
In-Reply-To: <4B880002.4090507@pobox.com>
References: <4B87FDE9.1010102@pobox.com> <4B880002.4090507@pobox.com>
Message-ID: <4B88075B.4060500@loskot.net>

Frank Warmerdam wrote:
> Frank Warmerdam wrote:
>> Motion: Commit access on the GDAL/OGR project is extended to Brian Case.
>>
>> ---
>>
>> Brian Case (Winkey in irc/trac) has been using and contributing to 
>> GDAL/OGR
>> for some time.  He has provided a number of patches, including those in
>> tickets #2979, #2978, #2977, #2955, #2945, and #2890.  He has not 
>> embarked
> 
> Folks,
> 
> To clarify, he has *now* embarked on development of a libkml based driver.

Yes, indeed. I've merged Brian's work together with GDAL trunk
as a branch here

http://svn.osgeo.org/gdal/sandbox/mloskot/winkey-libkml/

So, it would be a very good idea if Brian gets write access so he
can continue and merge his works to trunk once it's finished.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From giohappy at gmail.com  Fri Feb 26 12:45:00 2010
From: giohappy at gmail.com (G. Allegri)
Date: Fri Feb 26 12:45:03 2010
Subject: [gdal-dev] why ogr oracle connection is so slow?
In-Reply-To: <20100226165223.18117.qmail@s466.sureserver.com>
References: <20100226165223.18117.qmail@s466.sureserver.com>
Message-ID: <e12429641002260945n29edb372q37adffb626e83ea1@mail.gmail.com>

Thanks for your replies.
I've my pc down for maintanance, so I cannot give you quantitative
details at the moment.
Anyway, I haven't tested GeoRaster (as I don't have rasters on the
db). I've only made read-only tests through ogr2ogr (to export to
shapefiles) and the qgis ogr provider.
>From the words of Frank I suppose that the driver needs more tuning
and optimization for reading... I'm going to read 'Oracle Call
Interface Programmer's Guide' and 'Building High Performance
Drivers...' [1]

giovanni


[1] http://www.oracle.com/technology/tech/oci/pdf/building-best-drivers.v9.pdf


2010/2/26 Ivan Lucena <ivan.lucena@pmldnet.com>:
> Giovanni,
>
> Have you tried any GeoRaster read and write on your environment?
>
> Have you been able to compare the performance of Oracle/GeoRaster in GDAL against other alternatives?
>
> The raster driver also uses Oracle's OCI dlls but the performance is balanced between fast loading and fast reading.
>
> Regards,
>
> Ivan
>
>
>> ?-------Original Message-------
>> ?From: Frank Warmerdam <warmerdam@pobox.com>
>> ?To: G. Allegri <giohappy@gmail.com>
>> ?Cc: gdal-dev@lists.osgeo.org
>> ?Subject: Re: [gdal-dev] why ogr oracle connection is so slow?
>> ?Sent: Feb 26 '10 11:39
>>
>> ?G. Allegri wrote:
>> ?> In this period I'm working intensively with Oracle Spatial (on Windows
>> ?> XP), and I've had the occasion to use it from many perspectives:
>> ?> through Gvsig with its jdbc-based connector, ArcGis with the
>> ?> Interoperability Tools, etc.
>> ?> When I've decided to test the ogr driver I've seen it's times slower
>> ?> then any other solution. I see it uses the C api (oci.h), but I'm not
>> ?> capable to debug it to find the bottleneck...
>>
>> ?Giovanni,
>>
>> ?What use cases is it particularly slow for???I will note that fetching
>> ?records by feature id is very slow with oracle because each fetch is an
>> ?independent SQL query.
>>
>> ?In general the Oracle driver read access was not performance tuned as
>> ?the point of the original contract supporting it's development was
>> ?fast data loading.??I do not believe the problem is use of OCI.
>>
>> ?Best regards,
>> ?--
>> ?---------------------------------------+--------------------------------------
>> ?I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
>> ?light and sound - activate the windows | http://pobox.com/~warmerdam
>> ?and watch the world go round - Rush????| Geospatial Programmer for Rent
>>
>> ?_______________________________________________
>> ?gdal-dev mailing list
>> ?gdal-dev@lists.osgeo.org
>> ?http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
From dmorissette at mapgears.com  Fri Feb 26 13:09:08 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri Feb 26 13:09:12 2010
Subject: [gdal-dev] Motion: Commit access for
In-Reply-To: <4B87FDE9.1010102@pobox.com>
References: <4B87FDE9.1010102@pobox.com>
Message-ID: <4B880E44.10207@mapgears.com>

Frank Warmerdam wrote:
> Motion: Commit access on the GDAL/OGR project is extended to Brian Case.
> 

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From Bob.Moskovitz at conservation.ca.gov  Fri Feb 26 12:50:14 2010
From: Bob.Moskovitz at conservation.ca.gov (Moskovitz, Bob)
Date: Fri Feb 26 13:23:01 2010
Subject: [gdal-dev] why ogr oracle connection is so slow?
In-Reply-To: <e12429641002260945n29edb372q37adffb626e83ea1@mail.gmail.com>
References: <20100226165223.18117.qmail@s466.sureserver.com>
	<e12429641002260945n29edb372q37adffb626e83ea1@mail.gmail.com>
Message-ID: <A73B6E7A4503E948826CE81A65AF5FECA2A6AD@docexs1.ad.consrv.ca.gov>

Speaking of Oracle drivers.  Maybe there is something in orclib (http://orclib.sourceforge.net/ ) that the gdal devs can use to solve the speed problem.  -Bob

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of G. Allegri
Sent: Friday, February 26, 2010 9:45 AM
To: Ivan Lucena
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] why ogr oracle connection is so slow?

Thanks for your replies.
I've my pc down for maintanance, so I cannot give you quantitative
details at the moment.
Anyway, I haven't tested GeoRaster (as I don't have rasters on the
db). I've only made read-only tests through ogr2ogr (to export to
shapefiles) and the qgis ogr provider.
>From the words of Frank I suppose that the driver needs more tuning
and optimization for reading... I'm going to read 'Oracle Call
Interface Programmer's Guide' and 'Building High Performance
Drivers...' [1]

giovanni


[1] http://www.oracle.com/technology/tech/oci/pdf/building-best-drivers.v9.pdf


2010/2/26 Ivan Lucena <ivan.lucena@pmldnet.com>:
> Giovanni,
>
> Have you tried any GeoRaster read and write on your environment?
>
> Have you been able to compare the performance of Oracle/GeoRaster in GDAL against other alternatives?
>
> The raster driver also uses Oracle's OCI dlls but the performance is balanced between fast loading and fast reading.
>
> Regards,
>
> Ivan
>
>
>> ?-------Original Message-------
>> ?From: Frank Warmerdam <warmerdam@pobox.com>
>> ?To: G. Allegri <giohappy@gmail.com>
>> ?Cc: gdal-dev@lists.osgeo.org
>> ?Subject: Re: [gdal-dev] why ogr oracle connection is so slow?
>> ?Sent: Feb 26 '10 11:39
>>
>> ?G. Allegri wrote:
>> ?> In this period I'm working intensively with Oracle Spatial (on Windows
>> ?> XP), and I've had the occasion to use it from many perspectives:
>> ?> through Gvsig with its jdbc-based connector, ArcGis with the
>> ?> Interoperability Tools, etc.
>> ?> When I've decided to test the ogr driver I've seen it's times slower
>> ?> then any other solution. I see it uses the C api (oci.h), but I'm not
>> ?> capable to debug it to find the bottleneck...
>>
>> ?Giovanni,
>>
>> ?What use cases is it particularly slow for???I will note that fetching
>> ?records by feature id is very slow with oracle because each fetch is an
>> ?independent SQL query.
>>
>> ?In general the Oracle driver read access was not performance tuned as
>> ?the point of the original contract supporting it's development was
>> ?fast data loading.??I do not believe the problem is use of OCI.
>>
>> ?Best regards,
>> ?--
>> ?---------------------------------------+--------------------------------------
>> ?I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
>> ?light and sound - activate the windows | http://pobox.com/~warmerdam
>> ?and watch the world go round - Rush????| Geospatial Programmer for Rent
>>
>> ?_______________________________________________
>> ?gdal-dev mailing list
>> ?gdal-dev@lists.osgeo.org
>> ?http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ivan.lucena at pmldnet.com  Fri Feb 26 13:40:49 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri Feb 26 13:40:51 2010
Subject: =?iso-8859-1?B?UkU6IFtnZGFsLWRldl0gd2h5IG9nciBvcmFjbGUgY29ubmVjdGlvbiBpcyBzbyBzbG93Pw==?=
Message-ID: <20100226184049.21576.qmail@s466.sureserver.com>

Hi Bob,

The OCILIB is a great wrapper over the OCI but even Oracle has a great wrapper over OCI, it is called OCCI. 

Those wrapper make it easier to develop code against Oracle OCI but I believe that there is no specific concern in LOB access performance and that is what we need. That would requires deep understand of pure OCI interface calls.

I would encourage Giovanni, if he is interested, to also take a look at FDO ".h" style OCI wrapper and Terralib OCI wrapper for some ideas. Well, and of course, the GeoRaster driver "oci_wrapper.cpp/.h", also used by LibLAS.org. Those are wrappers developed for Spatial data.

Regards,

Ivan


>  -------Original Message-------
>  From: Moskovitz, Bob <Bob.Moskovitz@conservation.ca.gov>
>  To: G. Allegri <giohappy@gmail.com>, Ivan Lucena <ivan.lucena@pmldnet.com>
>  Cc: gdal-dev@lists.osgeo.org
>  Subject: RE: [gdal-dev] why ogr oracle connection is so slow?
>  Sent: Feb 26 '10 12:50
>  
>  Speaking of Oracle drivers.??Maybe there is something in orclib (http://orclib.sourceforge.net/ ) that the gdal devs can use to solve the speed problem.??-Bob
>  
>  -----Original Message-----
>  From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of G. Allegri
>  Sent: Friday, February 26, 2010 9:45 AM
>  To: Ivan Lucena
>  Cc: gdal-dev@lists.osgeo.org
>  Subject: Re: [gdal-dev] why ogr oracle connection is so slow?
>  
>  Thanks for your replies.
>  I've my pc down for maintanance, so I cannot give you quantitative
>  details at the moment.
>  Anyway, I haven't tested GeoRaster (as I don't have rasters on the
>  db). I've only made read-only tests through ogr2ogr (to export to
>  shapefiles) and the qgis ogr provider.
>  >From the words of Frank I suppose that the driver needs more tuning
>  and optimization for reading... I'm going to read 'Oracle Call
>  Interface Programmer's Guide' and 'Building High Performance
>  Drivers...' [1]
>  
>  giovanni
>  
>  
>  [1] http://www.oracle.com/technology/tech/oci/pdf/building-best-drivers.v9.pdf
>  
>  
>  2010/2/26 Ivan Lucena <ivan.lucena@pmldnet.com>:
>  > Giovanni,
>  >
>  > Have you tried any GeoRaster read and write on your environment?
>  >
>  > Have you been able to compare the performance of Oracle/GeoRaster in GDAL against other alternatives?
>  >
>  > The raster driver also uses Oracle's OCI dlls but the performance is balanced between fast loading and fast reading.
>  >
>  > Regards,
>  >
>  > Ivan
>  >
>  >
>  >> ?-------Original Message-------
>  >> ?From: Frank Warmerdam <warmerdam@pobox.com>
>  >> ?To: G. Allegri <giohappy@gmail.com>
>  >> ?Cc: gdal-dev@lists.osgeo.org
>  >> ?Subject: Re: [gdal-dev] why ogr oracle connection is so slow?
>  >> ?Sent: Feb 26 '10 11:39
>  >>
>  >> ?G. Allegri wrote:
>  >> ?> In this period I'm working intensively with Oracle Spatial (on Windows
>  >> ?> XP), and I've had the occasion to use it from many perspectives:
>  >> ?> through Gvsig with its jdbc-based connector, ArcGis with the
>  >> ?> Interoperability Tools, etc.
>  >> ?> When I've decided to test the ogr driver I've seen it's times slower
>  >> ?> then any other solution. I see it uses the C api (oci.h), but I'm not
>  >> ?> capable to debug it to find the bottleneck...
>  >>
>  >> ?Giovanni,
>  >>
>  >> ?What use cases is it particularly slow for???I will note that fetching
>  >> ?records by feature id is very slow with oracle because each fetch is an
>  >> ?independent SQL query.
>  >>
>  >> ?In general the Oracle driver read access was not performance tuned as
>  >> ?the point of the original contract supporting it's development was
>  >> ?fast data loading.??I do not believe the problem is use of OCI.
>  >>
>  >> ?Best regards,
>  >> ?--
>  >> ?---------------------------------------+--------------------------------------
>  >> ?I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
>  >> ?light and sound - activate the windows | http://pobox.com/~warmerdam
>  >> ?and watch the world go round - Rush????| Geospatial Programmer for Rent
>  >>
>  >> ?_______________________________________________
>  >> ?gdal-dev mailing list
>  >> ?gdal-dev@lists.osgeo.org
>  >> ?http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  >>
>  >
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From j.l.h.hartmann at uva.nl  Fri Feb 26 13:44:18 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Fri Feb 26 13:44:26 2010
Subject: [gdal-dev] Motion: Commit access for
In-Reply-To: <4B880002.4090507@pobox.com>
References: <4B87FDE9.1010102@pobox.com> <4B880002.4090507@pobox.com>
Message-ID: <4B881682.1000508@uva.nl>

On 26-2-2010 18:08, Frank Warmerdam wrote:
> Frank Warmerdam wrote:
>> Motion: Commit access on the GDAL/OGR project is extended to Brian Case.
>>
>> ---
>>
>> Brian Case (Winkey in irc/trac) has been using and contributing to 
>> GDAL/OGR
>> for some time.  He has provided a number of patches, including those in
>> tickets #2979, #2978, #2977, #2955, #2945, and #2890.  He has not 
>> embarked
>
> Folks,
>
> To clarify, he has *now* embarked on development of a libkml based 
> driver.
>
>
There seems to be a pattern in this error ...

http://lists.osgeo.org/pipermail/gdal-dev/2010-January/023198.html
http://lists.osgeo.org/pipermail/gdal-dev/2010-January/023200.html

Jan
From jason.roberts at duke.edu  Fri Feb 26 13:46:40 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Fri Feb 26 13:46:43 2010
Subject: [gdal-dev] When is GDAL_DATA environment variable read by OGR?
Message-ID: <007501cab714$08cfb760$1a6f2620$@roberts@duke.edu>

I am curious to know when OGR will read the GDAL_DATA environment variable.
After looking at the code and reviewing this
<http://lists.osgeo.org/pipermail/gdal-dev/2009-May/020584.html>  email
thread, it appears that the environment variable is currently only read at
initialization time (OGRSFDriverRegistrar::OGRSFDriverRegistrar() is one
such place), and that changes to the variable after initialization time will
not be recognized. Is that correct? Do you anticipate that that behavior
will change in the future?

 

Thanks,

Jason

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100226/7d2baad7/attachment.html
From even.rouault at mines-paris.org  Fri Feb 26 14:06:51 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Feb 26 14:07:03 2010
Subject: [gdal-dev] Motion: Commit access for
In-Reply-To: <4B87FDE9.1010102@pobox.com>
References: <4B87FDE9.1010102@pobox.com>
Message-ID: <201002262006.52082.even.rouault@mines-paris.org>

+1

Le Friday 26 February 2010 17:59:21 Frank Warmerdam, vous avez ?crit?:
> Motion: Commit access on the GDAL/OGR project is extended to Brian Case.
>
> ---
>
> Brian Case (Winkey in irc/trac) has been using and contributing to GDAL/OGR
> for some time.  He has provided a number of patches, including those in
> tickets #2979, #2978, #2977, #2955, #2945, and #2890.  He has not embarked
> on development of a libkml based kml driver and it would be convenient for
> him to have commit access to develop within the main tree (or possibly in
> a sandbox for a while), and to maintain the driver.
>
> Brian, could you confirm here by email your agreement with the guidelines
> in:
>
>    http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start with a:
>
> +1 Frank


From mateusz at loskot.net  Fri Feb 26 14:17:56 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Feb 26 14:18:25 2010
Subject: [gdal-dev] Motion: Commit access for
In-Reply-To: <4B881682.1000508@uva.nl>
References: <4B87FDE9.1010102@pobox.com> <4B880002.4090507@pobox.com>
	<4B881682.1000508@uva.nl>
Message-ID: <baf8d118887b1ea83bf2ec37fcfb02a3.squirrel@loskot.net>

Jan Hartmann wrote:
> On 26-2-2010 18:08, Frank Warmerdam wrote:
>> Frank Warmerdam wrote:
>>> Motion: Commit access on the GDAL/OGR project is extended to Brian
>>> Case.
>>>
>>> ---
>>>
>>> Brian Case (Winkey in irc/trac) has been using and contributing to
>>> GDAL/OGR
>>> for some time.  He has provided a number of patches, including those in
>>> tickets #2979, #2978, #2977, #2955, #2945, and #2890.  He has not
>>> embarked
>>
>> Folks,
>>
>> To clarify, he has *now* embarked on development of a libkml based
>> driver.
>
>
> There seems to be a pattern in this error ...
>
> http://lists.osgeo.org/pipermail/gdal-dev/2010-January/023198.html
> http://lists.osgeo.org/pipermail/gdal-dev/2010-January/023200.html

How these posts are related to this thread?

Best regards,
-- 
Mateusz Loskot
http://mateusz.loskot.net

From szekerest at gmail.com  Fri Feb 26 14:15:10 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Feb 26 14:20:41 2010
Subject: [gdal-dev] Motion: Commit access for
In-Reply-To: <4B87FDE9.1010102@pobox.com>
References: <4B87FDE9.1010102@pobox.com>
Message-ID: <f3b73b7d1002261115p48734dfep71700ec5fbfc098c@mail.gmail.com>

+1

Tamas



2010/2/26 Frank Warmerdam <warmerdam@pobox.com>

> Motion: Commit access on the GDAL/OGR project is extended to Brian Case.
>
> ---
>
> Brian Case (Winkey in irc/trac) has been using and contributing to GDAL/OGR
> for some time.  He has provided a number of patches, including those in
> tickets #2979, #2978, #2977, #2955, #2945, and #2890.  He has not embarked
> on development of a libkml based kml driver and it would be convenient for
> him to have commit access to develop within the main tree (or possibly in
> a sandbox for a while), and to maintain the driver.
>
> Brian, could you confirm here by email your agreement with the guidelines
> in:
>
>  http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start with a:
>
> +1 Frank
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100226/2461f800/attachment.html
From even.rouault at mines-paris.org  Fri Feb 26 14:21:40 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Feb 26 14:21:50 2010
Subject: [gdal-dev] When is GDAL_DATA environment variable read by OGR?
In-Reply-To: <007501cab714$08cfb760$1a6f2620$@roberts@duke.edu>
References: <007501cab714$08cfb760$1a6f2620$@roberts@duke.edu>
Message-ID: <201002262021.41399.even.rouault@mines-paris.org>

Le Friday 26 February 2010 19:46:40 Jason Roberts, vous avez ?crit?:
> I am curious to know when OGR will read the GDAL_DATA environment variable.
> After looking at the code and reviewing this
> <http://lists.osgeo.org/pipermail/gdal-dev/2009-May/020584.html>  email
> thread, it appears that the environment variable is currently only read at
> initialization time (OGRSFDriverRegistrar::OGRSFDriverRegistrar() is one
> such place), and that changes to the variable after initialization time
> will not be recognized. Is that correct?

Yes, actually it is also read in other initialization places, such as the 
registrar function of GDAL and in CPLFinderInit() and in port/cpl_csv.cpp as 
well

You can use CPLPushFinderLocation() to push a new search location, but you 
must do it before the first access to the file, as in the case of .CSV files, 
their location is cached once they are accessed the first time.

I'd recommand setting the GDAL_DATA value before using any call to GDAL/OGR 
API. If you want to set it from your code and not in the environmenent, you 
can set it with CPLSetConfigOption() for example.

> Do you anticipate that that 
> behavior will change in the future?

I don't think so.

>
>
>
> Thanks,
>
> Jason


From mateusz at loskot.net  Fri Feb 26 14:28:06 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Feb 26 14:28:13 2010
Subject: [gdal-dev] When is GDAL_DATA environment variable read by OGR?
In-Reply-To: <007501cab714$08cfb760$1a6f2620$@roberts@duke.edu>
References: <007501cab714$08cfb760$1a6f2620$@roberts@duke.edu>
Message-ID: <4B8820C6.10200@loskot.net>

Jason Roberts wrote:
> I am curious to know when OGR will read the GDAL_DATA environment 
> variable.

It is set during construction of driver managers of

GDAL

http://trac.osgeo.org/gdal/browser/trunk/gdal/gcore/gdaldrivermanager.cpp?rev=18770#L98

OGR

http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/generic/ogrsfdriverregistrar.cpp?rev=18770#L67

What in practice means, during during first access to any of these two
driver managers. This usually happens when a client calls
either GDALAllRegister

http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/gdalallregister.cpp?rev=18207#L73

or OGRRegisterAll

http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/generic/ogrregisterall.cpp?rev=18449#L38

(GDAL_DATA is shared among GDAL and OGR)

> After looking at the code and reviewing this 
> <http://lists.osgeo.org/pipermail/gdal-dev/2009-May/020584.html> 
> email thread, it appears that the environment variable is currently 
> only read at initialization time 
> (OGRSFDriverRegistrar::OGRSFDriverRegistrar() is one such place), and
>  that changes to the variable after initialization time will not be
> recognized. Is that correct?

AFAIU, yes.

> Do you anticipate that that behavior will change in the future?

I don't know.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From mateusz at loskot.net  Fri Feb 26 14:31:39 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Feb 26 14:31:46 2010
Subject: [gdal-dev] why ogr oracle connection is so slow?
In-Reply-To: <A73B6E7A4503E948826CE81A65AF5FECA2A6AD@docexs1.ad.consrv.ca.gov>
References: <20100226165223.18117.qmail@s466.sureserver.com>	<e12429641002260945n29edb372q37adffb626e83ea1@mail.gmail.com>
	<A73B6E7A4503E948826CE81A65AF5FECA2A6AD@docexs1.ad.consrv.ca.gov>
Message-ID: <4B88219B.2020100@loskot.net>

Moskovitz, Bob wrote:
> Speaking of Oracle drivers.  Maybe there is something in orclib 
> (http://orclib.sourceforge.net/ ) that the gdal devs can use to solve
>  the speed problem.  -Bob

"encapsulates OCI (Oracle Call Interface)"

So, there would be obviously no difference related to what
Oracle API is used.

I doubt that the matter of which Oracle API is used causes any
performance bottleneck. It could be OCI or OCCI, which in fact are APIs
of lowest level available to end user, and there was no difference.
orclib is an abstraction on top of OCI, so it potentially
could make things even slower :-)

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From even.rouault at mines-paris.org  Fri Feb 26 15:11:33 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Feb 26 15:11:51 2010
Subject: [gdal-dev] Motion: Commit Access for Adam Nowacki
In-Reply-To: <201002222232.36484.even.rouault@mines-paris.org>
References: <201002222232.36484.even.rouault@mines-paris.org>
Message-ID: <201002262111.35019.even.rouault@mines-paris.org>

Le Monday 22 February 2010 22:32:35 Even Rouault, vous avez ?crit?:
> Motion: Extend GDAL/OGR Commit Access to Adam Nowacki.

Hi,

I declare this motion passed with support from TamasS, EvenR, AndreyK,
HowardB, and DanielM. 

Best regards,

>
> ---
>
> Hi,
>
> Adam is the author of the GDAL WMS driver, that he contributed during the
> 2007 Google Summer of Code. Since then, he has regularly taken part to
> discussions related to the driver and contributes patches, such as in :
>
> http://trac.osgeo.org/gdal/ticket/3224
> http://trac.osgeo.org/gdal/ticket/2750
> http://trac.osgeo.org/gdal/ticket/2646
> http://trac.osgeo.org/gdal/ticket/3420
>
> Adam is also using GDAL heavily in the context of his professionnal
> activities.
>
> It would be convenient to give him direct commit access to subversion.
>
> Adam, could you reply to this message indicating your agreement to the
> guidelines listed in:
>
> ? ? http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start voting with my support:
>
> +1
>
> Best regards,
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From ivan.lucena at pmldnet.com  Sat Feb 27 08:11:14 2010
From: ivan.lucena at pmldnet.com (Ivan)
Date: Sat Feb 27 08:11:19 2010
Subject: [gdal-dev] why ogr oracle connection is so slow?
In-Reply-To: <4B88219B.2020100@loskot.net>
References: <20100226165223.18117.qmail@s466.sureserver.com>	<e12429641002260945n29edb372q37adffb626e83ea1@mail.gmail.com>
	<A73B6E7A4503E948826CE81A65AF5FECA2A6AD@docexs1.ad.consrv.ca.gov>
	<4B88219B.2020100@loskot.net>
Message-ID: <4B8919F2.3080304@pmldnet.com>

Mateusz Loskot wrote:
> Moskovitz, Bob wrote:
>> Speaking of Oracle drivers.  Maybe there is something in orclib 
>> (http://orclib.sourceforge.net/ ) that the gdal devs can use to solve
>>  the speed problem.  -Bob
> 
> "encapsulates OCI (Oracle Call Interface)"
> 
> So, there would be obviously no difference related to what
> Oracle API is used.
> 
> I doubt that the matter of which Oracle API is used causes any
> performance bottleneck. It could be OCI or OCCI, which in fact are APIs
> of lowest level available to end user, and there was no difference.
> orclib is an abstraction on top of OCI, so it potentially
> could make things even slower :-)
> 
> Best regards,

Mateusz,

That is right. Using somebody else wrapper or writing your own just help to make your code cleaner. 
But that could introduce a little overhead. One thing that OCILIb does, and maybe that is what Bob 
is looking for, is the OS authentication stuff. We don't have that in GDAL/GeoRaster or OGR/OCI.

But I was looking at the OCI driver code and I noticed that it uses OCIBindObject() to link the 
sdo_geometry objects. I am not sure that is the best alternative. If I remember correctly Bind are 
used when you don't know much about the column you are reading/writing and Define is used otherwise.

The OCI driver is responsible to read attribute data in several different types, like varchar, 
number, date and other previously unknown types. That makes Bind the best option but I double it is 
the best when you know that what you are reading/writing is a SDO_GEOMETRY.

In the GeoRaster driver I use OCIDefineByPos() to retrieve a list of all the LOB at once. That 
doesn't mean that it reads all the data blocks to memory. It means that you don't need to issue 
another SQL and the Oracle client/server will take care of caching the data for you as needed. That 
solution wouldn't work for OGR/OCI because sdo_geometries are not LOB. Works for LibLAS as far as I 
know because the point cloud data is stored is LOB.

So, here is what I found on the "Oracle? Call Interface Programmer's Guide". A better alternative to 
fetch complex object is to use the "Complex Object Retrieval (COR) handle":

"Application performance when dealing with objects may be increased through the use of complex 
object retrieval (COR). This is a prefecthing mechanism in which an application specifies a criteria 
for retrieving a set of linked objects in a single operation.
...
If an application needs to manipulate a graph of objects (inter-related by object
references) then it is more effective to use the OCI interface rather than the SQL
interface for accessing objects. Retrieving a graph of objects using the SQL interface
may require executing multiple SELECT statements which would mean multiple
network round trips. Using the complex object retrieval capability provided by the
OCI, the application can retrieve the graph of objects in one OCIObjectPin() call."

It looks like there is a lot of alternatives to explorer on OCI itself, that is where the meet touch 
the bones. No wrapper is going to help with that :)

Sounds like a lot of fun.

Regards,

Ivan
From giohappy at gmail.com  Sat Feb 27 12:53:24 2010
From: giohappy at gmail.com (G. Allegri)
Date: Sat Feb 27 12:53:26 2010
Subject: [gdal-dev] why ogr oracle connection is so slow?
In-Reply-To: <4B8919F2.3080304@pmldnet.com>
References: <20100226165223.18117.qmail@s466.sureserver.com>
	<e12429641002260945n29edb372q37adffb626e83ea1@mail.gmail.com>
	<A73B6E7A4503E948826CE81A65AF5FECA2A6AD@docexs1.ad.consrv.ca.gov>
	<4B88219B.2020100@loskot.net> <4B8919F2.3080304@pmldnet.com>
Message-ID: <e12429641002270953v456142cbhcffe2512e5d30306@mail.gmail.com>

Very intereseting discussion. I don't have much experience neither in
C++ nor in OCI programming, but the topic is very important and
interesting and I will try to contribute somehow. I will start to
deepen the argument making a comparison between the various adopted
solutions (FDO, etc.).

Thanks everyone for sharing ideas.
Giovanni

2010/2/27 Ivan <ivan.lucena@pmldnet.com>:
> Mateusz Loskot wrote:
>>
>> Moskovitz, Bob wrote:
>>>
>>> Speaking of Oracle drivers. ?Maybe there is something in orclib
>>> (http://orclib.sourceforge.net/ ) that the gdal devs can use to solve
>>> ?the speed problem. ?-Bob
>>
>> "encapsulates OCI (Oracle Call Interface)"
>>
>> So, there would be obviously no difference related to what
>> Oracle API is used.
>>
>> I doubt that the matter of which Oracle API is used causes any
>> performance bottleneck. It could be OCI or OCCI, which in fact are APIs
>> of lowest level available to end user, and there was no difference.
>> orclib is an abstraction on top of OCI, so it potentially
>> could make things even slower :-)
>>
>> Best regards,
>
> Mateusz,
>
> That is right. Using somebody else wrapper or writing your own just help to
> make your code cleaner. But that could introduce a little overhead. One
> thing that OCILIb does, and maybe that is what Bob is looking for, is the OS
> authentication stuff. We don't have that in GDAL/GeoRaster or OGR/OCI.
>
> But I was looking at the OCI driver code and I noticed that it uses
> OCIBindObject() to link the sdo_geometry objects. I am not sure that is the
> best alternative. If I remember correctly Bind are used when you don't know
> much about the column you are reading/writing and Define is used otherwise.
>
> The OCI driver is responsible to read attribute data in several different
> types, like varchar, number, date and other previously unknown types. That
> makes Bind the best option but I double it is the best when you know that
> what you are reading/writing is a SDO_GEOMETRY.
>
> In the GeoRaster driver I use OCIDefineByPos() to retrieve a list of all the
> LOB at once. That doesn't mean that it reads all the data blocks to memory.
> It means that you don't need to issue another SQL and the Oracle
> client/server will take care of caching the data for you as needed. That
> solution wouldn't work for OGR/OCI because sdo_geometries are not LOB. Works
> for LibLAS as far as I know because the point cloud data is stored is LOB.
>
> So, here is what I found on the "Oracle? Call Interface Programmer's Guide".
> A better alternative to fetch complex object is to use the "Complex Object
> Retrieval (COR) handle":
>
> "Application performance when dealing with objects may be increased through
> the use of complex object retrieval (COR). This is a prefecthing mechanism
> in which an application specifies a criteria for retrieving a set of linked
> objects in a single operation.
> ...
> If an application needs to manipulate a graph of objects (inter-related by
> object
> references) then it is more effective to use the OCI interface rather than
> the SQL
> interface for accessing objects. Retrieving a graph of objects using the SQL
> interface
> may require executing multiple SELECT statements which would mean multiple
> network round trips. Using the complex object retrieval capability provided
> by the
> OCI, the application can retrieve the graph of objects in one OCIObjectPin()
> call."
>
> It looks like there is a lot of alternatives to explorer on OCI itself, that
> is where the meet touch the bones. No wrapper is going to help with that :)
>
> Sounds like a lot of fun.
>
> Regards,
>
> Ivan
>
From warmerdam at pobox.com  Sun Feb 28 15:22:39 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Feb 28 15:22:37 2010
Subject: [gdal-dev] Nightly Snapshots
Message-ID: <4B8AD08F.9060303@pobox.com>

Folks,

I discovered a few issues with the nightly snapshots.

1) the stable snapshots were being captured from 1.6 instead of 1.7.  Fixed.

2) The change Howard made recently to mkgdaldist.sh to preserve last file
change times was not compatible with the svn on xblade14 so the trunk and 1.7
nightly snapshots were not being produced.  I have disabled this.

3) The nightly snapshots were regenerating bindings with swig 1.3.36 from
/usr/local/bin instead of 1.3.39 from /home/warmerdam/gdal-swig - fixed.  I
believe 1.3.39 is our standard now right?

Let me know if anyone notices problems with the nightly snapshots.  Apparently
we haven't been watching them closely.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From bea at ixsea.com  Sun Feb 28 16:35:42 2010
From: bea at ixsea.com (=?ISO-8859-1?Q?Beno=EEt_Andrieu?=)
Date: Sun Feb 28 17:03:34 2010
Subject: [Gdal-dev] VRT format Schema
In-Reply-To: <64691797-D19C-4421-A31C-0BD0030D341A@gbp.gaige.net>
References: <8fb908a31002220931v68c2dca3r9af1b6a6a80c1e42@mail.gmail.com>
	<64691797-D19C-4421-A31C-0BD0030D341A@gbp.gaige.net>
Message-ID: <4B8AE1AE.9000101@ixsea.com>

Hi list !

I need to merge three tif files, each one having a single Float32 band.
I want each file to use a separated band of the final tif.

I think the best way to do this is to use the VRT driver.
I would have liked to not use the C# binding or the native C++ library.
I would prefer to create a file on the disk using C# serialization.

I am so searching for the schema of the VRT format and I've found this quite old thread.
I saw the XSD in one of the messages of the topic. Is it correct ?
It is mentionned too that the XSD should be in the CVS/SVN in gdal/frmts/vrt but I've not found it, I assume the idea has been abandonned.

I am also interested in any other suggestion ! ^^

Thanks in advance.

Regards,
Benoit Andrieu


Antoine Hue wrote:
>>>/  There are still a few dark zones and area to improves:
/>>>/  - ComplexSource and AverageSource need a complete definition
/>/  Any information about these sources? They do not appear in the VRT tut
/>/  and I did not get there purpose/functioning.
/>>>/  - Better definition of the subClass property of the VRTRasterBand
/>>>/  needed.
/>>/
/>>/  What did you need to know?  It seems that values include
/>>/  "VRTWarpedDataset",
/>>/  "VRTDerivedRasterBand" and "VRTRawRasterBand".
/>/  OK, I will add this. What is the impact this parameter on the VRT
/>/  processing?
/
Antoine,

It determines what elements are legal on the VRTRasterBand and
internally it tells GDAL which particular class to instantiate.
This "subClass" attribute approach does not really lend itself to
describing the grammar with XML schema as far as I know.

>>>/  - An explicit definition of the raw raster source (to go with
/>>>/  SimpleSource, KernelFilteredSource,..) would improve homogeneity.
/>>/
/>>/  I'm not sure what you mean. Isn't the ".vrt Descriptions for Raw Files"
/>>/  on the gdal_vrttut.html page appropriate?
/  >
>/  For example, Simple source are described in the<SimpleSource>  tag.
/>/  However, there is no<RawRasterSource>   tag but a set of tags specific
/>/  to the raw raster band (<VRTRasterBand subClass="VRTRawRasterBand">)
/
That is correct, there is no RawRasterSource or equivelent.  Raw, warped
and "derived" data can only be implemented as complete bands, not sources
on a sourced band.

>/  This actually appears in the schema:
/>/
/>/  <!-- Raster Band -->
/>/  <xsd:complexType name="vrt_raster_band_t">
/>/      ....
/>/          <xsd:choice maxOccurs="unbounded">
/>/              <xsd:element name="SimpleSource" type="simple_source_t" />
/>/              <xsd:element name="KernelFilteredSource"
/>/  type="kernel_source_t" />
/>/              <xsd:element name="ComplexSource" />  <!-- Need refinement -->
/>/              <xsd:element name="AveragedSource" />  <!-- Need refinement -->
/>/              <xsd:sequence>
/>/                  <!-- Raw source -->
/>/                  <xsd:element name="SourceFilename"
/>/  type="source_file_name_t"/>
/>/                  <xsd:element name="ImageOffset"
/>/  type="xsd:nonNegativeInteger" />
/>/                  <xsd:element name="PixelOffset"
/>/  type="xsd:nonNegativeInteger" />
/>/                  <xsd:element name="LineOffset"
/>/  type="xsd:nonNegativeInteger" />
/>/                  <xsd:element name="ByteOrder" type="byte_order_t" />
/>/              </xsd:sequence>
/>/          </xsd:choice>...
/>/  </xsd:complexType>
/>/
/>/  One more question about it, the extract above allows mixed type sources
/>/  within a raster band. Is this correct?
/
A "sourced" raster band (the default kind of VRTRasterBand) can have
a mixture of different sources.

>>/  Were you thinking of the .xsd file as being primarily useful for
/>>/  automated validation of .vrt files?  As educational?
/>/  Why not both?
/>/  Schema is more extensive than the tutorial and more readable than C++.
/>/  It may also simplify C++ by checking validity of the VRT in place of the
/>/  C++.
/
As I mention, I think I have approached the .vrt files in a way that is
not conveniently expressed in XML Schema and I would contend that the
schema files are not all that readable as a description.

>/  Schema may also make it possible to version VRT grammar and enable
/>/  evolution of the format.
/
Well, keep in mind that the code is using a schema supporting parser
of any kind, so the .xsd files aren't systematically useful to GDAL
itself.  As for versioning, I anticipate handling this in an adhoc
fashion, primarily by just extending the format rather than changing
existing items.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,warmerdam at pobox.com  <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
light and sound - activate the windows |http://pobox.com/~warmerdam  <http://pobox.com/%7Ewarmerdam>
and watch the world go round - Rush    | President OSGF,http://osgeo.org

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100228/10a84959/attachment.html
From even.rouault at mines-paris.org  Sun Feb 28 17:12:47 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Feb 28 17:13:01 2010
Subject: [Gdal-dev] VRT format Schema
In-Reply-To: <4B8AE1AE.9000101@ixsea.com>
References: <8fb908a31002220931v68c2dca3r9af1b6a6a80c1e42@mail.gmail.com>
	<64691797-D19C-4421-A31C-0BD0030D341A@gbp.gaige.net>
	<4B8AE1AE.9000101@ixsea.com>
Message-ID: <201002282312.48995.even.rouault@mines-paris.org>

Beno?t,

yes this XSD idea apparently did not go further than this dicussion. The best 
description of the VRT format is to be found on 
http://www.gdal.org/gdal_vrttut.html

You can try gdal_translate -of VRT or gdalbuildvrt to have examples of valid 
VRT files.

For your use case, "gdalbuildvrt -separate out.vrt in1.tif in2.tif in3.tif" 
should generate what you expect.

Best regards,

Even

> Hi list !
>
> I need to merge three tif files, each one having a single Float32 band.
> I want each file to use a separated band of the final tif.
>
> I think the best way to do this is to use the VRT driver.
> I would have liked to not use the C# binding or the native C++ library.
> I would prefer to create a file on the disk using C# serialization.
>
> I am so searching for the schema of the VRT format and I've found this
> quite old thread. I saw the XSD in one of the messages of the topic. Is it
> correct ? It is mentionned too that the XSD should be in the CVS/SVN in
> gdal/frmts/vrt but I've not found it, I assume the idea has been
> abandonned.
>
> I am also interested in any other suggestion ! ^^
>
> Thanks in advance.
>
> Regards,
> Benoit Andrieu
>
> Antoine Hue wrote:
> >>>/  There are still a few dark zones and area to improves:
>
> />>>/  - ComplexSource and AverageSource need a complete definition
> />/  Any information about these sources? They do not appear in the VRT tut
> />/  and I did not get there purpose/functioning.
> />>>/  - Better definition of the subClass property of the VRTRasterBand
> />>>/  needed.
> />>/
> />>/  What did you need to know?  It seems that values include
> />>/  "VRTWarpedDataset",
> />>/  "VRTDerivedRasterBand" and "VRTRawRasterBand".
> />/  OK, I will add this. What is the impact this parameter on the VRT
> />/  processing?
> /
> Antoine,
>
> It determines what elements are legal on the VRTRasterBand and
> internally it tells GDAL which particular class to instantiate.
> This "subClass" attribute approach does not really lend itself to
> describing the grammar with XML schema as far as I know.
>
> >>>/  - An explicit definition of the raw raster source (to go with
>
> />>>/  SimpleSource, KernelFilteredSource,..) would improve homogeneity.
> />>/
> />>/  I'm not sure what you mean. Isn't the ".vrt Descriptions for Raw
> Files" />>/  on the gdal_vrttut.html page appropriate?
> /  >
>
> >/  For example, Simple source are described in the<SimpleSource>  tag.
>
> />/  However, there is no<RawRasterSource>   tag but a set of tags specific
> />/  to the raw raster band (<VRTRasterBand subClass="VRTRawRasterBand">)
> /
> That is correct, there is no RawRasterSource or equivelent.  Raw, warped
> and "derived" data can only be implemented as complete bands, not sources
> on a sourced band.
>
> >/  This actually appears in the schema:
>
> />/
> />/  <!-- Raster Band -->
> />/  <xsd:complexType name="vrt_raster_band_t">
> />/      ....
> />/          <xsd:choice maxOccurs="unbounded">
> />/              <xsd:element name="SimpleSource" type="simple_source_t" />
> />/              <xsd:element name="KernelFilteredSource"
> />/  type="kernel_source_t" />
> />/              <xsd:element name="ComplexSource" />  <!-- Need refinement
> --> />/              <xsd:element name="AveragedSource" />  <!-- Need
> refinement --> />/              <xsd:sequence>
> />/                  <!-- Raw source -->
> />/                  <xsd:element name="SourceFilename"
> />/  type="source_file_name_t"/>
> />/                  <xsd:element name="ImageOffset"
> />/  type="xsd:nonNegativeInteger" />
> />/                  <xsd:element name="PixelOffset"
> />/  type="xsd:nonNegativeInteger" />
> />/                  <xsd:element name="LineOffset"
> />/  type="xsd:nonNegativeInteger" />
> />/                  <xsd:element name="ByteOrder" type="byte_order_t" />
> />/              </xsd:sequence>
> />/          </xsd:choice>...
> />/  </xsd:complexType>
> />/
> />/  One more question about it, the extract above allows mixed type
> sources />/  within a raster band. Is this correct?
> /
> A "sourced" raster band (the default kind of VRTRasterBand) can have
> a mixture of different sources.
>
> >>/  Were you thinking of the .xsd file as being primarily useful for
>
> />>/  automated validation of .vrt files?  As educational?
> />/  Why not both?
> />/  Schema is more extensive than the tutorial and more readable than C++.
> />/  It may also simplify C++ by checking validity of the VRT in place of
> the />/  C++.
> /
> As I mention, I think I have approached the .vrt files in a way that is
> not conveniently expressed in XML Schema and I would contend that the
> schema files are not all that readable as a description.
>
> >/  Schema may also make it possible to version VRT grammar and enable
>
> />/  evolution of the format.
> /
> Well, keep in mind that the code is using a schema supporting parser
> of any kind, so the .xsd files aren't systematically useful to GDAL
> itself.  As for versioning, I anticipate handling this in an adhoc
> fashion, primarily by just extending the format rather than changing
> existing items.
>
> Best regards,


From scottd777 at yahoo.com  Sun Feb 28 21:10:28 2010
From: scottd777 at yahoo.com (scottd777)
Date: Sun Feb 28 21:10:30 2010
Subject: [gdal-dev] GDAL for BNG to Lat/Long, WGS84
Message-ID: <1267409428843-4652000.post@n2.nabble.com>


Hi, and thank heaven for GDAL!   

I was so happy to find this tool, but I am having some trouble figuring out
the exact command I need for an image warping application.  If there is
someone who doesn't mind a newbie type question, I could really use the
help! 

Essentially, I have imagery which is referenced with British National Grid. 
I am tyring to convert / warp this so that it can be used within Google
Earth.  I have reference points for the upper left and lower right of the
image in Easting and Northing, and transformed those so that I got lat /
long coordinates which line up very well within Google Earth, however it
appears that the projection is off.   

I am hoping to use gdalwarp to convert the TIF file (referenced as
mentioned), but I had some questions: 
- For the world file that I create for gdalwarp, should I include the
Easting / Northing, or does this need to be lat / long? 
- Can I just go straight to gdalwarp, or do I need to do some other
translation first? 

- The command I am trying to use looks like this: 
gdalwarp -s_srs "proj=utm +zone=33v +datum=OSGB36" -t_srs "proj=latlong
+datum=WGS84" filein.tif out.tif 

Is this the correct command to get from a BNG source ortho image to what
would overlay correctly in something like Google Earth? 

Many thanks for any help! 

-Scott 
-- 
View this message in context: http://n2.nabble.com/gdal-dev-GDAL-for-BNG-to-Lat-Long-WGS84-tp4652000p4652000.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
