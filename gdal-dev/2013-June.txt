From taibc_coltech at yahoo.com  Sat Jun  1 02:57:06 2013
From: taibc_coltech at yahoo.com (taibc)
Date: Sat, 1 Jun 2013 02:57:06 -0700 (PDT)
Subject: [gdal-dev] Asking about Convert Dgn to Shp and
	OGRLayer::SetSpatialFilter
Message-ID: <1370080626128-5057280.post@n6.nabble.com>

Hi,

I used the this function: 
http://osgeo-org.1560.x6.nabble.com/file/n4989766/Source1.cpp
<http://osgeo-org.1560.x6.nabble.com/file/n4989766/Source1.cpp>  

to convert my dgn file to shp file. But, after converting, I can't select
the small polygon (that is contained in another polygon, I used ArcMap to
test this). Please see my image for demo: 
<http://osgeo-org.1560.x6.nabble.com/file/n5057280/image.png> 

Are there anyone know how to fix it ?

Thank you very much.

Kind regards,

Tai




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Asking-about-Convert-Dgn-to-Shp-and-OGRLayer-SetSpatialFilter-tp5057280.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From gdal at stripfamily.net  Sat Jun  1 20:06:40 2013
From: gdal at stripfamily.net (David Strip)
Date: Sat, 01 Jun 2013 21:06:40 -0600
Subject: [gdal-dev] GDALRasterBand::RasterIO and FlushCache
In-Reply-To: <CA+YzLBc+Jxbt6SeJwL8NyC5E-gQoeHYQAt-PGC3oYOWzZFgXPA@mail.gmail.com>
References: <51A93143.50903@stripfamily.net>
	<CA+YzLBc+Jxbt6SeJwL8NyC5E-gQoeHYQAt-PGC3oYOWzZFgXPA@mail.gmail.com>
Message-ID: <51AAB6C0.5080906@stripfamily.net>

On 5/31/2013 5:38 PM, Frank Warmerdam wrote:
> Note that the image cache will start discarding blocks on it's own 
> when it is full.  I think the default cache is about 64MB.    I don't 
> think that flushing the cache should be part of normal applications 
> operations, though if you are very tight on memory you might want to 
> alter the default size.  Note that the cached blocks are discarded 
> when the dataset is closed.

Thanks - I didn't realize this as happening. My memory usage appeared to 
be growing, but I didn't look that closely.  A little experimentation 
showed that max_cache = 40960K (at least in my build, which is pretty 
much a default setup), and indeed once max cache is reached there is no 
growth in the memory usage.

David


From jukka.rahkonen at mmmtike.fi  Sun Jun  2 03:44:19 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun, 2 Jun 2013 10:44:19 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Asking_about_Convert_Dgn_to_Shp_and=09OGRLay?=
	=?utf-8?q?er=3A=3ASetSpatialFilter?=
References: <1370080626128-5057280.post@n6.nabble.com>
Message-ID: <loom.20130602T123901-989@post.gmane.org>

taibc <taibc_coltech <at> yahoo.com> writes:

> 
> Hi,
> 
> I used the this function: 
> http://osgeo-org.1560.x6.nabble.com/file/n4989766/Source1.cpp
> <http://osgeo-org.1560.x6.nabble.com/file/n4989766/Source1.cpp>  
> 
> to convert my dgn file to shp file. But, after converting, I can't select
> the small polygon (that is contained in another polygon, I used ArcMap to
> test this). Please see my image for demo: 
> <http://osgeo-org.1560.x6.nabble.com/file/n5057280/image.png> 
> 
> Are there anyone know how to fix it ?

Hi,

I fear that with this much of information, no. It would be easier if you
could sent a small sample of your source data and an exact description about
what you did so that someone could repeat it.

-Jukka Rahkonen-


From even.rouault at mines-paris.org  Sun Jun  2 04:07:19 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 2 Jun 2013 13:07:19 +0200
Subject: [gdal-dev] ogr_dispatch.py: dispatch features into layers according
	to the value of some fields or the geometry type
Message-ID: <201306021307.19781.even.rouault@mines-paris.org>

Hi,

http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/ogr_dispatch.py is a 
new utility that can be used typically to dispatch features of datasource that 
mix in a single layer features of several geometry types into separate target 
layers, to match a typical constraint enforced in most GIS formats (one 
geometry type per layer). You can also use it to dispatch features according 
to the value of a field.

From the usage message:

"""

ogr_dispatch.py [-f format] -src name -dst name [-field field]+
                [-25D_as_2D] [-multi_as_single]
                [-remove_dispatch_fields] [-prefix_with_out_lyr_name]
                [-dsco KEY=VALUE]* [-lco KEY=VALUE]* [-a_srs srs_def]
                [-style_as_field] [-where restricted_where] [-gt n] [-quiet]

Dispatch features into layers according to the value of some fields or their
geometry type.

Arguments:
 -f format: name of the driver to use to create the destination dataset
            (default 'ESRI Shapefile').
 -src name: name of the source dataset.
 -dst name: name of the destination dataset (existing or to be created).
 -field field: name of a field to use to dispatch features. May also
                        be 'OGR_GEOMETRY'. At least, one occurence needed.
 -25D_as_2D: for dispatching, consider 2.5D geometries as 2D.
 -multi_as_single: for dispatching, consider MULTIPOLYGON as POLYGON and
                   MULTILINESTRING as LINESTRING.
 -remove_dispatch_fields: remove the dispatch fields from the target layer 
definitions.
 -prefix_with_out_lyr_name: prefix the target layer name with the source layer 
name.
 -dsco KEY=VALUE: dataset creation option. May be repeated.
 -lco KEY=VALUE: layer creation option. May be repeated.
 -a_srs srs_def: assign a SRS to the target layers. Source layer SRS is 
otherwise used.
 -style_as_field: add a OGR_STYLE field with the content of the feature style 
string.
 -where restricted_where: where clause to filter source features.
 -gt n: group n features per transaction (default 200).

Example :
  ogr_dispatch.py -src in.dxf -dst out -field Layer -field OGR_GEOMETRY

"""

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jukka.rahkonen at mmmtike.fi  Sun Jun  2 06:21:40 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun, 2 Jun 2013 13:21:40 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?ogr=5Fdispatch=2Epy=3A_dispatch_features_int?=
	=?utf-8?q?o_layers_according=09to_the_value_of_some_fields_or_the_?=
	=?utf-8?q?geometry_type?=
References: <201306021307.19781.even.rouault@mines-paris.org>
Message-ID: <loom.20130602T135708-302@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> Hi,
> 
> http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/ogr_dispatch.py is a 
> new utility that can be used typically to dispatch features of datasource
that 
> mix in a single layer features of several geometry types into separate target 
> layers, to match a typical constraint enforced in most GIS formats (one 
> geometry type per layer). You can also use it to dispatch features according 
> to the value of a field.

...

>  -prefix_with_out_lyr_name: prefix the target layer name with the source
layer 

This parameter name feels like it contains "without" written in a wrong way.
How bout renaming it to -prexix_with_output_layer_name? It does pay 5 extra
charecters which may feel bad from the developer point of view but the name
is already rather long.

-Jukka Rahkonen-


From even.rouault at mines-paris.org  Sun Jun  2 06:26:00 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 2 Jun 2013 15:26:00 +0200
Subject: [gdal-dev]
 =?iso-8859-1?q?ogr=5Fdispatch=2Epy=3A_dispatch_feature?=
 =?iso-8859-1?q?s_into_layers_according=09to_the_value_of_some_fields_or_t?=
 =?iso-8859-1?q?he_geometry_type?=
In-Reply-To: <loom.20130602T135708-302@post.gmane.org>
References: <201306021307.19781.even.rouault@mines-paris.org>
	<loom.20130602T135708-302@post.gmane.org>
Message-ID: <201306021526.00644.even.rouault@mines-paris.org>

Le dimanche 02 juin 2013 15:21:40, Jukka Rahkonen a ?crit :

> >  -prefix_with_out_lyr_name: prefix the target layer name with the source
> 
> layer
> 
> This parameter name feels like it contains "without" written in a wrong
> way. How bout renaming it to -prexix_with_output_layer_name? It does pay 5
> extra charecters which may feel bad from the developer point of view but
> the name is already rather long.

Ah good point, this is a unwanted side effect of the renaming of an unrelated 
internal variable. I've restored the option to its intended name :
-prefix_with_layer_name

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From taibc_coltech at yahoo.com  Sun Jun  2 17:51:07 2013
From: taibc_coltech at yahoo.com (taibc)
Date: Sun, 2 Jun 2013 17:51:07 -0700 (PDT)
Subject: [gdal-dev] Asking about Convert Dgn to Shp
	and	OGRLayer::SetSpatialFilter
In-Reply-To: <loom.20130602T123901-989@post.gmane.org>
References: <1370080626128-5057280.post@n6.nabble.com>
	<loom.20130602T123901-989@post.gmane.org>
Message-ID: <1370220667475-5057386.post@n6.nabble.com>

Thanks Jukka,

I uploaded the dgn file and shp files (after converting) at the link: 
http://www.mediafire.com/?aw830x9629j3x9q
<http://www.mediafire.com/?aw830x9629j3x9q>  

Could you please download and check it ?


Thanks and regards,



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Asking-about-Convert-Dgn-to-Shp-and-OGRLayer-SetSpatialFilter-tp5057280p5057386.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From taibc_coltech at yahoo.com  Sun Jun  2 18:34:43 2013
From: taibc_coltech at yahoo.com (taibc)
Date: Sun, 2 Jun 2013 18:34:43 -0700 (PDT)
Subject: [gdal-dev] How to check are there any OGRGeometry (polygons) within
 an OGRGeometry (polygon) ?
Message-ID: <1370223283507-5057389.post@n6.nabble.com>

Hi everyone,
Please see my image:

  <http://osgeo-org.1560.x6.nabble.com/file/n5057389/Multipolygon.png> 

I used the below statements to get Geometry: 

OGRGeometry *poGeometry;
poGeometry = poFeature->GetGeometryRef();

Do you know how to check whether the Polygon 1 (geometry) is empty (or
include a small polygon) or not ?

If it is possible, how to get or identify the polygon 2 ?

Thanks and regards,

Tai



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/How-to-check-are-there-any-OGRGeometry-polygons-within-an-OGRGeometry-polygon-tp5057389.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at mmmtike.fi  Mon Jun  3 02:11:54 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 3 Jun 2013 09:11:54 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Asking_about_Convert_Dgn_to_Shp=09and=09OGRL?=
	=?utf-8?q?ayer=3A=3ASetSpatialFilter?=
References: <1370080626128-5057280.post@n6.nabble.com>
	<loom.20130602T123901-989@post.gmane.org>
	<1370220667475-5057386.post@n6.nabble.com>
Message-ID: <loom.20130603T105521-564@post.gmane.org>

taibc <taibc_coltech <at> yahoo.com> writes:

> 
> Thanks Jukka,
> 
> I uploaded the dgn file and shp files (after converting) at the link: 
> http://www.mediafire.com/?aw830x9629j3x9q
> <http://www.mediafire.com/?aw830x9629j3x9q>  
> 
> Could you please download and check it ?
> 
> Thanks and regards,

Hi,

I have only little experience on MicroStation design files and I do not know
if GDAL has done good work with finding the polygons from entities. However,
by opening your shp file with OpenJUMP I can find three polygons from that
place. One is the big one and then there are two identical small ones. See
http://latuviitta.org/documents/DGN_converted_into_shp_with_GDAL.png

Thus if you cannot select the small polygons with ArcMap is an ArcMap issue.
Perhaps there is some setting option for controlling how ArcMap behaves with
selecting polygons which are equal or overlapping/covering/covered
by/containing each other.

-Jukka Rahkonen-






From ari.jolma at gmail.com  Mon Jun  3 03:09:21 2013
From: ari.jolma at gmail.com (Ari Jolma)
Date: Mon, 03 Jun 2013 13:09:21 +0300
Subject: [gdal-dev] Asking about Convert Dgn to Shp and
	OGRLayer::SetSpatialFilter
In-Reply-To: <loom.20130603T105521-564@post.gmane.org>
References: <1370080626128-5057280.post@n6.nabble.com>
	<loom.20130602T123901-989@post.gmane.org>
	<1370220667475-5057386.post@n6.nabble.com>
	<loom.20130603T105521-564@post.gmane.org>
Message-ID: <51AC6B51.2060104@gmail.com>

On 06/03/2013 12:11 PM, Jukka Rahkonen wrote:
> taibc <taibc_coltech <at> yahoo.com> writes:
>
>> Thanks Jukka,
>>
>> I uploaded the dgn file and shp files (after converting) at the link:
>> http://www.mediafire.com/?aw830x9629j3x9q
>> <http://www.mediafire.com/?aw830x9629j3x9q>
>>
>> Could you please download and check it ?
>>
>> Thanks and regards,
> Hi,
>
> I have only little experience on MicroStation design files and I do not know
> if GDAL has done good work with finding the polygons from entities.


The feature count as returned by ogrinfo seems misleading. It returns 
5137 when in reality there are 12028 linestrings in the file (counted 
with ogrinfo -al Dc19.dgn | grep LINE | wc -l) and 435 polygons in the 
file (and then some points etc.).

Ari


>   However,
> by opening your shp file with OpenJUMP I can find three polygons from that
> place. One is the big one and then there are two identical small ones. See
> http://latuviitta.org/documents/DGN_converted_into_shp_with_GDAL.png
>
> Thus if you cannot select the small polygons with ArcMap is an ArcMap issue.
> Perhaps there is some setting option for controlling how ArcMap behaves with
> selecting polygons which are equal or overlapping/covering/covered
> by/containing each other.
>
> -Jukka Rahkonen-
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From arwesley at web.de  Mon Jun  3 05:37:24 2013
From: arwesley at web.de (JM)
Date: Mon, 3 Jun 2013 14:37:24 +0200
Subject: [gdal-dev] Clipping imprecision  with gdal_translate
Message-ID: <00d401ce6057$1993f030$4cbbd090$@de>

Hello List.

 

At first i wanna thanks for the great work you are doing with the gdal
library. It is a source of great tools and opportunities for spatial issues
which whom i involed in. 

 

Among others i am using the commandline tool gdal_translate for clipping
raster files via the following example command:

 

                gdal_translate -projwin 13.6666664938 53.2000002428
13.8333334784 53.1000017686 source.tif target.tif

 

The source tif is already georeferenced (EPSG:4326). I would now assume that
the boundingbox of the following GTiff is somethink like this:

 

                Lower Left: 13.6666664938 53.1000017686

                Upper Right: 13.8333334784 53.2000002428

 

Instead it is something like this (the full gdalinfo dialog you can see in
the attach to this mail):

 

                Lower Left: 13.6666610463 53.1000244672

                Upper Right: 13.8333191458 53.2000151873

 

So there is a small imprecision in the clipping result. My question is now
if this imprecision is normal (maybe a result of rounding operations within
the clipping process) or if i do something wrong (do i miss something in my
command).

 

I am using libgdal1 version 1.9.0-3.1ubunut1. Looking forward to hearing
from you.

 

Kind regards,

 

JM

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130603/f2922675/attachment.html>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: gdalinfo.txt
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130603/f2922675/attachment.txt>

From jorgearevalo at libregis.org  Mon Jun  3 08:00:18 2013
From: jorgearevalo at libregis.org (=?utf-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Mon, 3 Jun 2013 17:00:18 +0200
Subject: [gdal-dev] Non-EPSG projections, esri_extra.wkt and best practices
Message-ID: <41610A2E51654E228756863673272CC3@libregis.org>

Hello, 

Let say I want to warp this raster file https://dl.dropboxusercontent.com/u/6599273/gis_data/utm.tif

>From its original projection, EPSG:26711, to Robinson projection, not part of EPSG. So, I need to provide the correct frame of reference, and GDAL will be able to do it. 

I could download the OGC WKT definition from http://spatialreference.org/ref/esri/54030/ogcwkt/, and pass the downloaded file to gdalwarp, like:

gdalwarp -s_srs epsg:26711 -t_srs robinson_file.wkt utm.tif utm_warped.tif

The thing is I'm working with an app that uses GDAL to warp raster files. The information this app handles (and it's hard to change) related with non EPSG projections is something like ESRI:54030. I know this is something that GDAL doesn't accept. But I see, in GDAL_DATA directory, a file named esri_extra.wkt. This file contains a line like this:

54030,PROJCS["World_Robinson",GEOGCS["GCS_WGS_1984",DATUM["WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Robinson"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",0],UNIT["Meter",1],AUTHORITY["EPSG","54030"]]

This is the number of the ESRI projection followed by the WKT definition. So, my question is: Is there any "right" mechanism, maybe provided by GDAL, to make the warping operation? Something that gets ESRI:54030 as input, looks in this file (or where needed) and gets the wkt definition as output, that can be safely used with gdalwarp.

Many thanks in advance, 

-- 
Jorge Arevalo
Freelance developer

http://www.krop.com/jorgearevalo
http://about.me/jorgeas80

Enviado con Sparrow (http://www.sparrowmailapp.com/?sig)



From tyler.mitchell at actian.com  Mon Jun  3 08:29:56 2013
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Mon, 3 Jun 2013 08:29:56 -0700
Subject: [gdal-dev] Non-EPSG projections,
	esri_extra.wkt and best practices
In-Reply-To: <41610A2E51654E228756863673272CC3@libregis.org>
References: <41610A2E51654E228756863673272CC3@libregis.org>
Message-ID: <D47FBA1B-6463-47A9-BCCF-E04B7214E43B@actian.com>

Jorge, are you able to just provide the full PROJ syntax instead?
+proj=robin +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs 
Aside from that, you can just copy/append the ESRI definitions to the end of the EPSG main file and GDAL should pick it up.

Tyler

On 2013-06-03, at 8:00 AM, Jorge Ar?valo wrote:

> Hello, 
> 
> Let say I want to warp this raster file https://dl.dropboxusercontent.com/u/6599273/gis_data/utm.tif
> 
> From its original projection, EPSG:26711, to Robinson projection, not part of EPSG. So, I need to provide the correct frame of reference, and GDAL will be able to do it. 
> 
> I could download the OGC WKT definition from http://spatialreference.org/ref/esri/54030/ogcwkt/, and pass the downloaded file to gdalwarp, like:
> 
> gdalwarp -s_srs epsg:26711 -t_srs robinson_file.wkt utm.tif utm_warped.tif
> 
> The thing is I'm working with an app that uses GDAL to warp raster files. The information this app handles (and it's hard to change) related with non EPSG projections is something like ESRI:54030. I know this is something that GDAL doesn't accept. But I see, in GDAL_DATA directory, a file named esri_extra.wkt. This file contains a line like this:
> 
> 54030,PROJCS["World_Robinson",GEOGCS["GCS_WGS_1984",DATUM["WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Robinson"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",0],UNIT["Meter",1],AUTHORITY["EPSG","54030"]]
> 
> This is the number of the ESRI projection followed by the WKT definition. So, my question is: Is there any "right" mechanism, maybe provided by GDAL, to make the warping operation? Something that gets ESRI:54030 as input, looks in this file (or where needed) and gets the wkt definition as output, that can be safely used with gdalwarp.
> 
> Many thanks in advance, 
> 
> -- 
> Jorge Arevalo
> Freelance developer
> 
> http://www.krop.com/jorgearevalo
> http://about.me/jorgeas80
> 
> Enviado con Sparrow (http://www.sparrowmailapp.com/?sig)
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



Tyler Mitchell
Engineering Director 
Actian Corporation
tyler.mitchell at actian.com

MOBILE 250-303-1831
SKYPE spatialguru
www.actian.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130603/3a04653a/attachment-0001.html>

From jorgearevalo at libregis.org  Mon Jun  3 08:41:22 2013
From: jorgearevalo at libregis.org (=?utf-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Mon, 3 Jun 2013 17:41:22 +0200
Subject: [gdal-dev] Non-EPSG projections,
 esri_extra.wkt and best practices
In-Reply-To: <D47FBA1B-6463-47A9-BCCF-E04B7214E43B@actian.com>
References: <41610A2E51654E228756863673272CC3@libregis.org>
	<D47FBA1B-6463-47A9-BCCF-E04B7214E43B@actian.com>
Message-ID: <4B42CB76CA8B4FDF84EBDD6D12906AAA@libregis.org>

Hello,  

Thanks for your response, Tyler. Let me provide a little more context.

The app have 2 parts: Java part and C++ part, calling GDAL. The connection is made via JNI. The Java part provides a string like ESRI:54030 to the C++ part. The C++ part call gdalwarp with that string, and it fails.  

I could try to change the Java part to provide the PROJ string, like you suggested, but it's a really complex desktop application. That would imply to change a lot of Java code, and a previous understanding of the whole architecture. I'm just trying to save time, changing only the C++ part, much easier.

I like the idea about append the ESRI definitions to the end of the EPSG main file. So, I guess than, in that situation, I should just replace the "ESRI" part in the string with "EPSG", right?  

--  
Jorge Arevalo
Freelance developer

http://www.krop.com/jorgearevalo
http://about.me/jorgeas80

Enviado con Sparrow (http://www.sparrowmailapp.com/?sig)


El lunes 3 de junio de 2013 a las 17:29, Tyler Mitchell escribi?:

> Jorge, are you able to just provide the full PROJ syntax instead?
> +proj=robin +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs  
> Aside from that, you can just copy/append the ESRI definitions to the end of the EPSG main file and GDAL should pick it up.
>  
> Tyler
>  
> On 2013-06-03, at 8:00 AM, Jorge Ar?valo wrote:
> > Hello,  
> >  
> > Let say I want to warp this raster file https://dl.dropboxusercontent.com/u/6599273/gis_data/utm.tif
> >  
> > From its original projection, EPSG:26711, to Robinson projection, not part of EPSG. So, I need to provide the correct frame of reference, and GDAL will be able to do it.  
> >  
> > I could download the OGC WKT definition from http://spatialreference.org/ref/esri/54030/ogcwkt/, and pass the downloaded file to gdalwarp, like:
> >  
> > gdalwarp -s_srs epsg:26711 -t_srs robinson_file.wkt utm.tif utm_warped.tif
> >  
> > The thing is I'm working with an app that uses GDAL to warp raster files. The information this app handles (and it's hard to change) related with non EPSG projections is something like ESRI:54030. I know this is something that GDAL doesn't accept. But I see, in GDAL_DATA directory, a file named esri_extra.wkt. This file contains a line like this:
> >  
> > 54030,PROJCS["World_Robinson",GEOGCS["GCS_WGS_1984",DATUM["WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Robinson"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",0],UNIT["Meter",1],AUTHORITY["EPSG","54030"]]
> >  
> > This is the number of the ESRI projection followed by the WKT definition. So, my question is: Is there any "right" mechanism, maybe provided by GDAL, to make the warping operation? Something that gets ESRI:54030 as input, looks in this file (or where needed) and gets the wkt definition as output, that can be safely used with gdalwarp.
> >  
> > Many thanks in advance,  
> >  
> > --  
> > Jorge Arevalo
> > Freelance developer
> >  
> > http://www.krop.com/jorgearevalo
> > http://about.me/jorgeas80
> >  
> > Enviado con Sparrow (http://www.sparrowmailapp.com/?sig)
> >  
> >  
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org (mailto:gdal-dev at lists.osgeo.org)
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
>  
>  
>  
> Tyler Mitchell
> Engineering Director  
> Actian Corporation
> tyler.mitchell at actian.com (mailto:tyler.mitchell at actian.com)
>  
> MOBILE 250-303-1831
> SKYPE spatialguru
> www.actian.com
> (http://www.actian.com/)  




From tyler.mitchell at actian.com  Mon Jun  3 09:03:25 2013
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Mon, 3 Jun 2013 09:03:25 -0700
Subject: [gdal-dev] Non-EPSG projections,
	esri_extra.wkt and best practices
In-Reply-To: <4B42CB76CA8B4FDF84EBDD6D12906AAA@libregis.org>
References: <41610A2E51654E228756863673272CC3@libregis.org>
	<D47FBA1B-6463-47A9-BCCF-E04B7214E43B@actian.com>
	<4B42CB76CA8B4FDF84EBDD6D12906AAA@libregis.org>
Message-ID: <656916F2-9D7D-427F-9B41-3B5014F59AF3@actian.com>

On 2013-06-03, at 8:41 AM, Jorge Ar?valo wrote:

> I like the idea about append the ESRI definitions to the end of the EPSG main file. So, I guess than, in that situation, I should just replace the "ESRI" part in the string with "EPSG", right?  

I guess so, I haven't done it myself, but once the definitions are in the main epsg file you would normally just use EPSG: with the new number.

Someone else may have a better idea :)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130603/ceb41d73/attachment.html>

From guillmercier at yahoo.fr  Mon Jun  3 15:14:34 2013
From: guillmercier at yahoo.fr (rawalpundi)
Date: Mon, 3 Jun 2013 15:14:34 -0700 (PDT)
Subject: [gdal-dev] no translation for Mercator to PROJ.4
Message-ID: <1370297674358-5057584.post@n6.nabble.com>

hello,

i'm trying to gdalwarp a google map tile geotiff
its SRS is a 3857.prj

PROJCS["WGS 84 / Pseudo-Mercator",GEOGCS["Popular Visualisation
CRS",DATUM["D_Popular_Visualisation_Datum",SPHEROID["Popular_Visualisation_Sphere",6378137,0]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Mercator"],PARAMETER["central_meridian",0],PARAMETER["scale_factor",1],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["Meter",1]]

unfortunately this proj is not supported by my framework
so I'm trying to convert it to a standard WGS84 proj :
gdalwarp -t_srs WGS84

but I get the following error :
ERROR6 : No translation for Mercator to PROJ.4 format is known

any idea of what it wrong ?
thanks











--
View this message in context: http://osgeo-org.1560.x6.nabble.com/no-translation-for-Mercator-to-PROJ-4-tp5057584.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From andre+joost at nurfuerspam.de  Mon Jun  3 21:10:31 2013
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Tue, 04 Jun 2013 06:10:31 +0200
Subject: [gdal-dev] no translation for Mercator to PROJ.4
In-Reply-To: <1370297674358-5057584.post@n6.nabble.com>
References: <1370297674358-5057584.post@n6.nabble.com>
Message-ID: <kojpcr$ah$1@ger.gmane.org>

Am 04.06.2013 00:14, schrieb rawalpundi:
> hello,
>
> i'm trying to gdalwarp a google map tile geotiff its SRS is a
> 3857.prj
>
> PROJCS["WGS 84 / Pseudo-Mercator",GEOGCS["Popular Visualisation
> CRS",DATUM["D_Popular_Visualisation_Datum",SPHEROID["Popular_Visualisation_Sphere",6378137,0]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Mercator"],PARAMETER["central_meridian",0],PARAMETER["scale_factor",1],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["Meter",1]]
>
>  unfortunately this proj is not supported by my framework so I'm
> trying to convert it to a standard WGS84 proj : gdalwarp -t_srs
> WGS84
>
> but I get the following error : ERROR6 : No translation for Mercator
> to PROJ.4 format is known
>
> any idea of what it wrong ?



You can explicitly give the source and target CRS with
  -s_srs EPSG:3857 t_srs EPSG:4326

HTH,
Andr? Joost


From adiba.nizami at gmail.com  Mon Jun  3 22:56:59 2013
From: adiba.nizami at gmail.com (adi_khan)
Date: Mon, 3 Jun 2013 22:56:59 -0700 (PDT)
Subject: [gdal-dev] gdal_merge does not mosaic
In-Reply-To: <51A9288D.8060208@free.fr>
References: <1369978610574-5057095.post@n6.nabble.com>
	<CA+YzLBc1zf-arm4Uc5OKH-TCZX1XhW-V5dMPA87_Ab_iUTXssw@mail.gmail.com>
	<1370022494351-5057219.post@n6.nabble.com>
	<51A9288D.8060208@free.fr>
Message-ID: <1370325419174-5057631.post@n6.nabble.com>

<http://osgeo-org.1560.x6.nabble.com/file/n5057631/inputimgs.jpg> 
<http://osgeo-org.1560.x6.nabble.com/file/n5057631/gdalinfo.jpg> 
<http://osgeo-org.1560.x6.nabble.com/file/n5057631/output.jpg> 

Hi all,
here please find the input and output I used.

The attached images :
1. First image is a snapshot of 2 input images in different views
2. gdalinfo of first and second image.
3. Output mosaic along with info.

Note :
I used gdal_merge.py and gdalwarp as well. But the output remains the same.

Thanks!



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-merge-does-not-mosaic-tp5057095p5057631.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From ari.jolma at gmail.com  Tue Jun  4 00:35:43 2013
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue, 04 Jun 2013 10:35:43 +0300
Subject: [gdal-dev] Clipping imprecision  with gdal_translate
In-Reply-To: <00d401ce6057$1993f030$4cbbd090$@de>
References: <00d401ce6057$1993f030$4cbbd090$@de>
Message-ID: <51AD98CF.6040102@gmail.com>

JM,

Looks to me that GDAL has clipped to the nearest pixel boundaries and 
not to the window you have provided. This is probably a feature. Maybe 
gdalwarp would do the kind of resampling you wish, but I'm not sure.

Regards,

Ari

On 06/03/2013 03:37 PM, JM wrote:
>
> Hello List.
>
> At first i wanna thanks for the great work you are doing with the gdal 
> library. It is a source of great tools and opportunities for spatial 
> issues which whom i involed in.
>
> Among others i am using the commandline tool gdal_translate for 
> clipping raster files via the following example command:
>
>                 gdal_translate -projwin 13.6666664938 53.2000002428 
> 13.8333334784 53.1000017686 source.tif target.tif
>
> The source tif is already georeferenced (EPSG:4326). I would now 
> assume that the boundingbox of the following GTiff is somethink like this:
>
>                 Lower Left: 13.6666664938 53.1000017686
>
>                 Upper Right: 13.8333334784 53.2000002428
>
> Instead it is something like this (the full gdalinfo dialog you can 
> see in the attach to this mail):
>
>                 Lower Left: 13.6666610463 53.1000244672
>
>                 Upper Right: 13.8333191458 53.2000151873
>
> So there is a small imprecision in the clipping result. My question is 
> now if this imprecision is normal (maybe a result of rounding 
> operations within the clipping process) or if i do something wrong (do 
> i miss something in my command).
>
> I am using libgdal1 version 1.9.0-3.1ubunut1. Looking forward to 
> hearing from you.
>
> Kind regards,
>
> JM
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130604/aaac0597/attachment.html>

From taibc_coltech at yahoo.com  Tue Jun  4 01:11:59 2013
From: taibc_coltech at yahoo.com (taibc)
Date: Tue, 4 Jun 2013 01:11:59 -0700 (PDT)
Subject: [gdal-dev] Asking about Convert Dgn to Shp and
	OGRLayer::SetSpatialFilter
In-Reply-To: <51AC6B51.2060104@gmail.com>
References: <1370080626128-5057280.post@n6.nabble.com>
	<loom.20130602T123901-989@post.gmane.org>
	<1370220667475-5057386.post@n6.nabble.com>
	<loom.20130603T105521-564@post.gmane.org>
	<51AC6B51.2060104@gmail.com>
Message-ID: <1370333519909-5057658.post@n6.nabble.com>

Hi Ari,

So do you think the dgn file is wrong ?

Thanks and kind regards,

Tai



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Asking-about-Convert-Dgn-to-Shp-and-OGRLayer-SetSpatialFilter-tp5057280p5057658.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From ari.jolma at gmail.com  Tue Jun  4 01:12:29 2013
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue, 04 Jun 2013 11:12:29 +0300
Subject: [gdal-dev] Asking about Convert Dgn to Shp and
	OGRLayer::SetSpatialFilter
In-Reply-To: <1370333519909-5057658.post@n6.nabble.com>
References: <1370080626128-5057280.post@n6.nabble.com>
	<loom.20130602T123901-989@post.gmane.org>
	<1370220667475-5057386.post@n6.nabble.com>
	<loom.20130603T105521-564@post.gmane.org>
	<51AC6B51.2060104@gmail.com>
	<1370333519909-5057658.post@n6.nabble.com>
Message-ID: <51ADA16D.3030406@gmail.com>

On 06/04/2013 11:11 AM, taibc wrote:
> Hi Ari,
>
> So do you think the dgn file is wrong ?

No. I was just wondering why the GDAL driver was reporting much less 
features than it actually found in the file. The driver does not 
complain anything about the file, thus it seems fine to me.

Ari


>
> Thanks and kind regards,
>
> Tai
>
>
>
> --
> View this message in context: http://osgeo-org.1560.x6.nabble.com/Asking-about-Convert-Dgn-to-Shp-and-OGRLayer-SetSpatialFilter-tp5057280p5057658.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jukka.rahkonen at mmmtike.fi  Tue Jun  4 02:26:01 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 4 Jun 2013 09:26:01 +0000 (UTC)
Subject: [gdal-dev] =?utf-8?q?gdal=5Fmerge_does_not_mosaic?=
References: <1369978610574-5057095.post@n6.nabble.com>
	<CA+YzLBc1zf-arm4Uc5OKH-TCZX1XhW-V5dMPA87_Ab_iUTXssw@mail.gmail.com>
	<1370022494351-5057219.post@n6.nabble.com>
	<51A9288D.8060208@free.fr>
	<1370325419174-5057631.post@n6.nabble.com>
Message-ID: <loom.20130604T104443-163@post.gmane.org>

adi_khan <adiba.nizami <at> gmail.com> writes:

> 
> <http://osgeo-org.1560.x6.nabble.com/file/n5057631/inputimgs.jpg> 
> <http://osgeo-org.1560.x6.nabble.com/file/n5057631/gdalinfo.jpg> 
> <http://osgeo-org.1560.x6.nabble.com/file/n5057631/output.jpg> 
> 
> Hi all,
> here please find the input and output I used.
> 
> The attached images :
> 1. First image is a snapshot of 2 input images in different views
> 2. gdalinfo of first and second image.
> 3. Output mosaic along with info.
> 
> Note :
> I used gdal_merge.py and gdalwarp as well. But the output remains the same.

Hi,

Lambert conformal conic is totally unknown system to me and I am not sure if
you should be able to use gdal_merge with your source images as they are at
all. The gdal_merge document page says:
"All the images must be in the same coordinate system and have a matching
number of bands"
If you compare the PROJCS parameters in the gdalinfo reports they are not
the same but I do not what gdal_merge thinks about that.

You were adviced to use gdalwarp as
gdalwarp -of HFA img1.img img2.img img3.img mosaic.img

I made some trials and it seems that if img1.img and img2.img are in
different coordinate systems then gdalwarp does not create correct output.
For me it is anyway not so good idea to run gdalwarp without giving -t_srs
parameter. Why to let some program to decide the target projection if you
can give it yourself and know for sure what will happen?

Another thing is that your images have nodata areas which appears to be
black. However, no colour is labeled as nodata colour in image metadata and
therefore gdalwarp believes that black borders belong to the images.

So my untested suggestion for the command is

gdalwarp -of HFA -t_srs [some_definition_here] -srsnodata 0 0 0 img1.img
img2.img mosaic.img

-Jukka Rahkonen-



From adiba.nizami at gmail.com  Tue Jun  4 02:52:48 2013
From: adiba.nizami at gmail.com (adi_khan)
Date: Tue, 4 Jun 2013 02:52:48 -0700 (PDT)
Subject: [gdal-dev] gdal_merge does not mosaic
In-Reply-To: <loom.20130604T104443-163@post.gmane.org>
References: <1369978610574-5057095.post@n6.nabble.com>
	<CA+YzLBc1zf-arm4Uc5OKH-TCZX1XhW-V5dMPA87_Ab_iUTXssw@mail.gmail.com>
	<1370022494351-5057219.post@n6.nabble.com>
	<51A9288D.8060208@free.fr>
	<1370325419174-5057631.post@n6.nabble.com>
	<loom.20130604T104443-163@post.gmane.org>
Message-ID: <CAH8QYjtqTxtjfaKXqoba2OPLF2LoxYGjdhazW8U+FUbkot-8-Q@mail.gmail.com>

Thanks!


On Tue, Jun 4, 2013 at 2:57 PM, Rahkonen Jukka [via OSGeo.org] <
ml-node+s1560n5057691h22 at n6.nabble.com> wrote:

> adi_khan <adiba.nizami <at> gmail.com> writes:
>
> >
> > <http://osgeo-org.1560.x6.nabble.com/file/n5057631/inputimgs.jpg>
> > <http://osgeo-org.1560.x6.nabble.com/file/n5057631/gdalinfo.jpg>
> > <http://osgeo-org.1560.x6.nabble.com/file/n5057631/output.jpg>
> >
> > Hi all,
> > here please find the input and output I used.
> >
> > The attached images :
> > 1. First image is a snapshot of 2 input images in different views
> > 2. gdalinfo of first and second image.
> > 3. Output mosaic along with info.
> >
> > Note :
> > I used gdal_merge.py and gdalwarp as well. But the output remains the
> same.
>
> Hi,
>
> Lambert conformal conic is totally unknown system to me and I am not sure
> if
> you should be able to use gdal_merge with your source images as they are
> at
> all. The gdal_merge document page says:
> "All the images must be in the same coordinate system and have a matching
> number of bands"
> If you compare the PROJCS parameters in the gdalinfo reports they are not
> the same but I do not what gdal_merge thinks about that.
>
> You were adviced to use gdalwarp as
> gdalwarp -of HFA img1.img img2.img img3.img mosaic.img
>
> I made some trials and it seems that if img1.img and img2.img are in
> different coordinate systems then gdalwarp does not create correct output.
> For me it is anyway not so good idea to run gdalwarp without giving -t_srs
> parameter. Why to let some program to decide the target projection if you
> can give it yourself and know for sure what will happen?
>
> Another thing is that your images have nodata areas which appears to be
> black. However, no colour is labeled as nodata colour in image metadata
> and
> therefore gdalwarp believes that black borders belong to the images.
>
> So my untested suggestion for the command is
>
> gdalwarp -of HFA -t_srs [some_definition_here] -srsnodata 0 0 0 img1.img
> img2.img mosaic.img
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> [hidden email] <http://user/SendEmail.jtp?type=node&node=5057691&i=0>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> ------------------------------
>  If you reply to this email, your message will be added to the discussion
> below:
>
> http://osgeo-org.1560.x6.nabble.com/gdal-merge-does-not-mosaic-tp5057095p5057691.html
>  To unsubscribe from gdal_merge does not mosaic, click here<http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5057095&code=YWRpYmEubml6YW1pQGdtYWlsLmNvbXw1MDU3MDk1fC0xNTgzOTQ1MTgw>
> .
> NAML<http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
>



-- 
Regards,
Adiba Khan




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-merge-does-not-mosaic-tp5057095p5057701.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130604/5a9af224/attachment-0001.html>

From adiba.nizami at gmail.com  Tue Jun  4 02:59:21 2013
From: adiba.nizami at gmail.com (adi_khan)
Date: Tue, 4 Jun 2013 02:59:21 -0700 (PDT)
Subject: [gdal-dev] gdal_merge does not mosaic
In-Reply-To: <CAH8QYjtqTxtjfaKXqoba2OPLF2LoxYGjdhazW8U+FUbkot-8-Q@mail.gmail.com>
References: <1369978610574-5057095.post@n6.nabble.com>
	<CA+YzLBc1zf-arm4Uc5OKH-TCZX1XhW-V5dMPA87_Ab_iUTXssw@mail.gmail.com>
	<1370022494351-5057219.post@n6.nabble.com>
	<51A9288D.8060208@free.fr>
	<1370325419174-5057631.post@n6.nabble.com>
	<loom.20130604T104443-163@post.gmane.org>
	<CAH8QYjtqTxtjfaKXqoba2OPLF2LoxYGjdhazW8U+FUbkot-8-Q@mail.gmail.com>
Message-ID: <1370339961622-5057704.post@n6.nabble.com>

Hi All,

Could you please suggest any open source library/API/ command line tools (on
Linux) that can mosaic images of the kind I posted earlier  (with different
paramters etc..)?

Also if I am to use gdal_merge then I will have to reproject all input
images to one projcs and then try mosaicing ?






--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-merge-does-not-mosaic-tp5057095p5057704.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at mmmtike.fi  Tue Jun  4 05:52:37 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 4 Jun 2013 12:52:37 +0000 (UTC)
Subject: [gdal-dev] =?utf-8?q?gdal=5Fmerge_does_not_mosaic?=
References: <1369978610574-5057095.post@n6.nabble.com>
	<CA+YzLBc1zf-arm4Uc5OKH-TCZX1XhW-V5dMPA87_Ab_iUTXssw@mail.gmail.com>
	<1370022494351-5057219.post@n6.nabble.com>
	<51A9288D.8060208@free.fr>
	<1370325419174-5057631.post@n6.nabble.com>
	<loom.20130604T104443-163@post.gmane.org>
	<CAH8QYjtqTxtjfaKXqoba2OPLF2LoxYGjdhazW8U+FUbkot-8-Q@mail.gmail.com>
	<1370339961622-5057704.post@n6.nabble.com>
Message-ID: <loom.20130604T144822-415@post.gmane.org>

adi_khan <adiba.nizami <at> gmail.com> writes:

> 
> Hi All,
> 
> Could you please suggest any open source library/API/ command line tools (on
> Linux) that can mosaic images of the kind I posted earlier  (with different
> paramters etc..)?
> 
> Also if I am to use gdal_merge then I will have to reproject all input
> images to one projcs and then try mosaicing ?

Hi,

You will do what you want with gdalwarp but giving remote help without a
possibility to play with same kind of images than you have is not very
productive. If you can't share your originals could it be possible to
generate some similar samples from free data?

-Jukka Rahkonen-


From etourigny.dev at gmail.com  Tue Jun  4 06:59:27 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 4 Jun 2013 10:59:27 -0300
Subject: [gdal-dev] gdal_merge does not mosaic
In-Reply-To: <1370339961622-5057704.post@n6.nabble.com>
References: <1369978610574-5057095.post@n6.nabble.com>
	<CA+YzLBc1zf-arm4Uc5OKH-TCZX1XhW-V5dMPA87_Ab_iUTXssw@mail.gmail.com>
	<1370022494351-5057219.post@n6.nabble.com>
	<51A9288D.8060208@free.fr>
	<1370325419174-5057631.post@n6.nabble.com>
	<loom.20130604T104443-163@post.gmane.org>
	<CAH8QYjtqTxtjfaKXqoba2OPLF2LoxYGjdhazW8U+FUbkot-8-Q@mail.gmail.com>
	<1370339961622-5057704.post@n6.nabble.com>
Message-ID: <CA+TxYvMapcK6kVr6Ob+hMtj4WHvjx4zZpx9krZpLETN35VZ41g@mail.gmail.com>

On Tue, Jun 4, 2013 at 6:59 AM, adi_khan <adiba.nizami at gmail.com> wrote:

> Hi All,
>
> Could you please suggest any open source library/API/ command line tools
> (on
> Linux) that can mosaic images of the kind I posted earlier  (with different
> paramters etc..)?
>
> Also if I am to use gdal_merge then I will have to reproject all input
> images to one projcs and then try mosaicing ?
>

why don't you try the command that was suggested earlier?

gdalwarp -of HFA -t_srs [some_definition_here] -srsnodata 0 0 0 img1.img
img2.img mosaic.img


>
>
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/gdal-merge-does-not-mosaic-tp5057095p5057704.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130604/4db31789/attachment.html>

From eadam at co.lincoln.or.us  Tue Jun  4 17:14:51 2013
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Tue, 4 Jun 2013 17:14:51 -0700
Subject: [gdal-dev] Clipping imprecision with gdal_translate
In-Reply-To: <51AD98CF.6040102@gmail.com>
References: <00d401ce6057$1993f030$4cbbd090$@de> <51AD98CF.6040102@gmail.com>
Message-ID: <CACqBkM9dYZ98NQ70FMMNrm--ph7Sphy+JZYEypjsPK31nFhdig@mail.gmail.com>

gdalwarp does have -tap which may be of some use.  Quoting the doc page:

-tap:(GDAL >= 1.8.0) (target aligned pixels) align the coordinates of
the extent of the output file to the values of the -tr, such that the
aligned extent includes the minimum extent.


Best Regards, Eli

On Tue, Jun 4, 2013 at 12:35 AM, Ari Jolma <ari.jolma at gmail.com> wrote:
> JM,
>
> Looks to me that GDAL has clipped to the nearest pixel boundaries and not to
> the window you have provided. This is probably a feature. Maybe gdalwarp
> would do the kind of resampling you wish, but I'm not sure.
>
> Regards,
>
> Ari
>
>
> On 06/03/2013 03:37 PM, JM wrote:
>
> Hello List.
>
>
>
> At first i wanna thanks for the great work you are doing with the gdal
> library. It is a source of great tools and opportunities for spatial issues
> which whom i involed in.
>
>
>
> Among others i am using the commandline tool gdal_translate for clipping
> raster files via the following example command:
>
>
>
>                 gdal_translate -projwin 13.6666664938 53.2000002428
> 13.8333334784 53.1000017686 source.tif target.tif
>
>
>
> The source tif is already georeferenced (EPSG:4326). I would now assume that
> the boundingbox of the following GTiff is somethink like this:
>
>
>
>                 Lower Left: 13.6666664938 53.1000017686
>
>                 Upper Right: 13.8333334784 53.2000002428
>
>
>
> Instead it is something like this (the full gdalinfo dialog you can see in
> the attach to this mail):
>
>
>
>                 Lower Left: 13.6666610463 53.1000244672
>
>                 Upper Right: 13.8333191458 53.2000151873
>
>
>
> So there is a small imprecision in the clipping result. My question is now
> if this imprecision is normal (maybe a result of rounding operations within
> the clipping process) or if i do something wrong (do i miss something in my
> command).
>
>
>
> I am using libgdal1 version 1.9.0-3.1ubunut1. Looking forward to hearing
> from you.
>
>
>
> Kind regards,
>
>
>
> JM
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From adiba.nizami at gmail.com  Tue Jun  4 23:43:10 2013
From: adiba.nizami at gmail.com (adi_khan)
Date: Tue, 4 Jun 2013 23:43:10 -0700 (PDT)
Subject: [gdal-dev] gdal_merge does not mosaic
In-Reply-To: <loom.20130604T144822-415@post.gmane.org>
References: <1369978610574-5057095.post@n6.nabble.com>
	<CA+YzLBc1zf-arm4Uc5OKH-TCZX1XhW-V5dMPA87_Ab_iUTXssw@mail.gmail.com>
	<1370022494351-5057219.post@n6.nabble.com>
	<51A9288D.8060208@free.fr>
	<1370325419174-5057631.post@n6.nabble.com>
	<loom.20130604T104443-163@post.gmane.org>
	<CAH8QYjtqTxtjfaKXqoba2OPLF2LoxYGjdhazW8U+FUbkot-8-Q@mail.gmail.com>
	<1370339961622-5057704.post@n6.nabble.com>
	<loom.20130604T144822-415@post.gmane.org>
Message-ID: <1370414590929-5057994.post@n6.nabble.com>

img1.img <http://osgeo-org.1560.x6.nabble.com/file/n5057994/img1.img>  
img2.img <http://osgeo-org.1560.x6.nabble.com/file/n5057994/img2.img>  
I have attached the inputs images ( reduced resolution).



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-merge-does-not-mosaic-tp5057095p5057994.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From warmerdam at pobox.com  Tue Jun  4 23:57:21 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 4 Jun 2013 23:57:21 -0700
Subject: [gdal-dev] gdal_merge does not mosaic
In-Reply-To: <1370414590929-5057994.post@n6.nabble.com>
References: <1369978610574-5057095.post@n6.nabble.com>
	<CA+YzLBc1zf-arm4Uc5OKH-TCZX1XhW-V5dMPA87_Ab_iUTXssw@mail.gmail.com>
	<1370022494351-5057219.post@n6.nabble.com>
	<51A9288D.8060208@free.fr>
	<1370325419174-5057631.post@n6.nabble.com>
	<loom.20130604T104443-163@post.gmane.org>
	<CAH8QYjtqTxtjfaKXqoba2OPLF2LoxYGjdhazW8U+FUbkot-8-Q@mail.gmail.com>
	<1370339961622-5057704.post@n6.nabble.com>
	<loom.20130604T144822-415@post.gmane.org>
	<1370414590929-5057994.post@n6.nabble.com>
Message-ID: <CA+YzLBcUpaw6ryQRUg+ZexHdDFRtxVRYcQhDKsLxf3aepJhn-w@mail.gmail.com>

Adi,

As previously mentioned the input images have different coordinate systems.
 gdal_merge.py does not support this situation.

I was able to somewhat successfully merge them like this:

gdalwarp img1.img img1_wgs84.img -t_srs WGS84
gdalwarp img2.img img2_wgs84.img -t_srs WGS84
gdal_merge.py img1_wgs84.img img2_wgs84.img -o mosaic.tif -n 0

Note the use of -n 0 when merging to treat areas of zero value as nodata.
 The gdalwarp commands are used in this case to transform to WGS84 so the
images will be in a common coordinate system.

It could also likely be done all with one gdalwarp command.

Best regards,
Frank



On Tue, Jun 4, 2013 at 11:43 PM, adi_khan <adiba.nizami at gmail.com> wrote:

> img1.img <http://osgeo-org.1560.x6.nabble.com/file/n5057994/img1.img>
> img2.img <http://osgeo-org.1560.x6.nabble.com/file/n5057994/img2.img>
> I have attached the inputs images ( reduced resolution).
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/gdal-merge-does-not-mosaic-tp5057095p5057994.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130604/238999ae/attachment.html>

From giohappy at gmail.com  Wed Jun  5 03:13:41 2013
From: giohappy at gmail.com (G. Allegri)
Date: Wed, 5 Jun 2013 12:13:41 +0200
Subject: [gdal-dev] Python and OGR: layer's GetGeomType and geometry's
 GetGeometryType return -2147483645
Message-ID: <CAB4g1=xMJNL+N4ULR3wh8nyFrZvUteU4MspS18i7KMRKkUOHXw@mail.gmail.com>

It's a long time I do not use the OGR Python APIs, but I remember I could
test layer's GetGeomType and geometry's GetGeometryType against the
integere corresponding to the
OGRwkbGeometryType enumeration [1].
Using Python-OGR from the latest Osgeo4W (Python 2.7.4 and GDAL 1.9.2) I
alwasy obtain -2147483645 (the integer type lower boundary), while ogrinfo
outputs the right type, 3D Polygon.

Am I doing something wrong?
Giovanni

[1]
http://www.gdal.org/ogr/ogr__core_8h.html#a800236a0d460ef66e687b7b65610f12a
-- 
Giovanni Allegri
http://about.me/giovanniallegri
blog: http://blog.spaziogis.it
GEO+ geomatica in Italia http://bit.ly/GEOplus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130605/2a11d0e7/attachment.html>

From even.rouault at mines-paris.org  Wed Jun  5 03:18:05 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 5 Jun 2013 12:18:05 +0200
Subject: [gdal-dev] Python and OGR: layer's GetGeomType and geometry's
	GetGeometryType return -2147483645
In-Reply-To: <CAB4g1=xMJNL+N4ULR3wh8nyFrZvUteU4MspS18i7KMRKkUOHXw@mail.gmail.com>
References: <CAB4g1=xMJNL+N4ULR3wh8nyFrZvUteU4MspS18i7KMRKkUOHXw@mail.gmail.com>
Message-ID: <201306051218.05131.even.rouault@mines-paris.org>

Le mercredi 05 juin 2013 12:13:41, G. Allegri a ?crit :
> It's a long time I do not use the OGR Python APIs, but I remember I could
> test layer's GetGeomType and geometry's GetGeometryType against the
> integere corresponding to the
> OGRwkbGeometryType enumeration [1].
> Using Python-OGR from the latest Osgeo4W (Python 2.7.4 and GDAL 1.9.2) I
> alwasy obtain -2147483645 (the integer type lower boundary), while ogrinfo
> outputs the right type, 3D Polygon.
> 
> Am I doing something wrong?

No, see :

$ python
Python 2.6.6 (r266:84292, Oct 29 2012, 23:09:05) 
[GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from osgeo import ogr
>>> ogr.wkbPolygon25D
-2147483645
>>> ogr.wkbPolygon | ogr.wkb25DBit
-2147483645
>>> 


> Giovanni
> 
> [1]
> http://www.gdal.org/ogr/ogr__core_8h.html#a800236a0d460ef66e687b7b65610f12a

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From giohappy at gmail.com  Wed Jun  5 03:21:42 2013
From: giohappy at gmail.com (G. Allegri)
Date: Wed, 5 Jun 2013 12:21:42 +0200
Subject: [gdal-dev] Python and OGR: layer's GetGeomType and geometry's
 GetGeometryType return -2147483645
In-Reply-To: <201306051218.05131.even.rouault@mines-paris.org>
References: <CAB4g1=xMJNL+N4ULR3wh8nyFrZvUteU4MspS18i7KMRKkUOHXw@mail.gmail.com>
	<201306051218.05131.even.rouault@mines-paris.org>
Message-ID: <CAB4g1=ydXNXn3zK5e0K48-LhgK03+yQxZSTMdvNZ05jn8T5rQQ@mail.gmail.com>

Ahhh, I see, the wkb25DBit.
Thanks Even!

Giovanni

2013/6/5 Even Rouault <even.rouault at mines-paris.org>

> Le mercredi 05 juin 2013 12:13:41, G. Allegri a ?crit :
> > It's a long time I do not use the OGR Python APIs, but I remember I could
> > test layer's GetGeomType and geometry's GetGeometryType against the
> > integere corresponding to the
> > OGRwkbGeometryType enumeration [1].
> > Using Python-OGR from the latest Osgeo4W (Python 2.7.4 and GDAL 1.9.2) I
> > alwasy obtain -2147483645 (the integer type lower boundary), while
> ogrinfo
> > outputs the right type, 3D Polygon.
> >
> > Am I doing something wrong?
>
> No, see :
>
> $ python
> Python 2.6.6 (r266:84292, Oct 29 2012, 23:09:05)
> [GCC 4.4.3] on linux2
> Type "help", "copyright", "credits" or "license" for more information.
> >>> from osgeo import ogr
> >>> ogr.wkbPolygon25D
> -2147483645
> >>> ogr.wkbPolygon | ogr.wkb25DBit
> -2147483645
> >>>
>
>
> > Giovanni
> >
> > [1]
> >
> http://www.gdal.org/ogr/ogr__core_8h.html#a800236a0d460ef66e687b7b65610f12a
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>



-- 
Giovanni Allegri
http://about.me/giovanniallegri
blog: http://blog.spaziogis.it
GEO+ geomatica in Italia http://bit.ly/GEOplus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130605/5bcf39ae/attachment.html>

From 2284168009 at qq.com  Wed Jun  5 18:31:41 2013
From: 2284168009 at qq.com (=?gb18030?B?wbrM7LO9?=)
Date: Thu, 6 Jun 2013 09:31:41 +0800
Subject: [gdal-dev] failed to add GDal header files to an atl project
Message-ID: <tencent_5F8CA59D2CC8E80C35B4DD30@qq.com>

Hi all,
I'm using ATL wizards in Visual Studio 2010 to generate an  in-process COM server.Before adding a simple atl object to the project, I added following code to stdafx.h:
#pragma comment(lib,"gdal_i.lib")
#pragma warning( disable: 4251 )
#include "gdal/gdal_priv.h"
#include "gdal/ogr_api.h"
#include "gdal/gdal_alg.h"
#include "gdal/ogrsf_frmts.h"
 but if I include file "gdal/ogrsf_frmts.h" and build the solution, there will be an error message like this:
C:\Program Files\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets(735,5): warning MSB3073: ?regsvr32 /s /n /i:user "xxx.dll"? has exit  -1073741819
>C:\Program Files\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets(744,5): error MSB8011: unable to register output ?
I've tried 
STDAPI DllRegisterServer(void)
{
 //SetPerUserRegistration(true);  
 ATL::AtlSetPerUserRegistration(true);  
 HRESULT hr = _AtlModule.DllRegisterServer();
  return hr;
}
. and putting gdal19.dll geos_c.dll the same folder of the project ,and the error still exists.
Is there anything I could do to solve the problem?
Best regards,
liang
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130606/6fe04b0f/attachment.html>

From ngarel at micromine.com  Wed Jun  5 23:49:54 2013
From: ngarel at micromine.com (ngarel)
Date: Wed, 5 Jun 2013 23:49:54 -0700 (PDT)
Subject: [gdal-dev] Cannot write jpeg2000 with ERDAS 4.3
In-Reply-To: <1363307744610-5040505.post@n6.nabble.com>
References: <1363307744610-5040505.post@n6.nabble.com>
Message-ID: <1370501378897-5058290.post@n6.nabble.com>

Upgraded to gdal 1.10 and still the same problem when writing JP2 files.
It still fails at 
oError = CNCSJP2FileView::Open( &(m_OStream) );
in ecwcreatecopy.cpp.

I think the problem comes with the way ERDAS library handles m_OStream.

I commented this block just before trying to open the output file:
    // if( bIsJPEG2000 )
    // {
    //     int bSeekable = !
    //       ( strncmp(pszFilename, "/vsistdout/", strlen("/vsistdout/")) ==
0 ||
    //         strncmp(pszFilename, "/vsizip/", strlen("/vsizip/")) == 0 ||
    //         strncmp(pszFilename, "/vsigzip/", strlen("/vsigzip/")) == 0
);
    //     fpVSIL = VSIFOpenL( pszFilename, (bSeekable) ? "wb+": "wb" );
    //     if( fpVSIL == NULL )
    //     {
    //         CPLError( CE_Failure, CPLE_OpenFailed, 
    //                   "Failed to open %s.", pszFilename );
    //         return CE_Failure;
    //     }

    //     m_OStream.Access( fpVSIL, TRUE, bSeekable, pszFilename, 0, -1 );
    // }  

which makes it fall in 
oError = Open( (char *) pszFilename, false, true );
instead and works perfectly.

What is the benefit of using m_OStream? and could you confirm that the same
problem occurs with you?





--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Cannot-write-jpeg2000-with-ERDAS-4-3-tp5040505p5058290.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From lazy at dark-matter.biz  Thu Jun  6 03:48:03 2013
From: lazy at dark-matter.biz (lazy)
Date: Thu, 6 Jun 2013 13:48:03 +0300
Subject: [gdal-dev] easy_install error
Message-ID: <CAA7bQdCky=pOdhREjt8B+tfLfT0_dwf_wgvETNNmnJsA6=HQkQ@mail.gmail.com>

I am having problems with easy_install-2.7 gdal

easy_install gdal
Searching for gdal
Reading http://pypi.python.org/simple/gdal/
Reading http://www.gdal.org
Best match: GDAL 1.9.1
Downloading
http://pypi.python.org/packages/source/G/GDAL/GDAL-1.9.1.tar.gz#md5=60cb0e0b652dfb204e150bcb11190248
Processing GDAL-1.9.1.tar.gz
Writing /tmp/easy_install-VbXRge/GDAL-1.9.1/setup.cfg
Running GDAL-1.9.1/setup.py -q bdist_egg --dist-dir
/tmp/easy_install-VbXRge/GDAL-1.9.1/egg-dist-tmp-_exdTD
cc1plus: warning: command line option "-Wstrict-prototypes" is valid for
Ada/C/ObjC but not for C++
extensions/gdal_wrap.cpp:2853:22: error: cpl_port.h: No such file or
directory
extensions/gdal_wrap.cpp:2854:24: error: cpl_string.h: No such file or
directory
extensions/gdal_wrap.cpp:2855:27: error: cpl_multiproc.h: No such file or
directory
extensions/gdal_wrap.cpp:2857:18: error: gdal.h: No such file or directory
extensions/gdal_wrap.cpp:2858:23: error: gdal_priv.h: No such file or
directory
extensions/gdal_wrap.cpp:2859:22: error: gdal_alg.h: No such file or
directory
extensions/gdal_wrap.cpp:2860:24: error: gdalwarper.h: No such file or
directory
extensions/gdal_wrap.cpp:4560:22: error: gdalgrid.h: No such file or
directory
extensions/gdal_wrap.cpp:2877: error: ?CPLErrorHandler? does not name a type
extensions/gdal_wrap.cpp:2880: error: expected initializer before
?PythonBindingErrorHandler?
extensions/gdal_wrap.cpp:2753: warning: ?swig_module? defined but not used
error: Setup script exited with error: command 'gcc' failed with exit
status 1


Packages what are installed:

gdal-devel-1.9.2-4.el6.x86_64
gdal-java-1.9.2-4.el6.x86_64
gdal-1.9.2-4.el6.x86_64
gdal-libs-1.9.2-4.el6.x86_64
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130606/04d726ce/attachment.html>

From yehil at rafael.co.il  Thu Jun  6 08:02:59 2013
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Thu, 6 Jun 2013 18:02:59 +0300
Subject: [gdal-dev] (no subject)
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0CC76164727@MAILBOXSERVER.rf.local>


Hello list
I'm using gdal on android.
I'm having problems reading data from tiff files larger than 2GB.
Smaller files works ok.
Is there a limit in android, or the android GDAL build? Is there some build flag to make it work?
Thanks
Yehiyam Livneh

Sent from my mobile

________________________________________

This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not the intended recipient, you should contact us immediately and thereafter delete this message from your system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all electronic or other copies of the original message and any attachments thereof.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130606/32272c12/attachment.html>

From arb at sat.dundee.ac.uk  Thu Jun  6 09:54:01 2013
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Thu, 6 Jun 2013 17:54:01 +0100
Subject: [gdal-dev] Two gdal-1.10.0 build errors
Message-ID: <CAHOfOo1_J-iu0yqSrSRfLzNXZA-8tWP4jO_yGACj=UB0U4Ajfw@mail.gmail.com>

Hi

Just a couple of problems:

 frmts/msg/msgcommand.cpp:434: error: 'sprintf' was not declared in this
scope
(needed a #include)

  --with-rename-internal-libtiff-symbols=yes and
 --with-rename-internal-libgeotiff-symbols=yes
 .libs/libgdal.so: undefined reference to `TIFFReadEncodedStrip'
 (had to configure without those options)

Andrew
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130606/498f9e12/attachment.html>

From yehil at rafael.co.il  Thu Jun  6 10:04:48 2013
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Thu, 6 Jun 2013 20:04:48 +0300
Subject: [gdal-dev] large tiff problem on android
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0CC76164727@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0CC76164727@MAILBOXSERVER.rf.local>
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0CC76164728@MAILBOXSERVER.rf.local>

Hello list
I'm using gdal on android.
I'm having problems reading data from tiff files larger than 2GB.
Smaller files works ok.
Is there a limit in android, or the android GDAL build? Is there some build flag to make it work?
Thanks
Yehiyam Livneh

Sent from my mobile


________________________________________

This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not the intended recipient, you should contact us immediately and thereafter delete this message from your system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all electronic or other copies of the original message and any attachments thereof.

From jrepetto at free.fr  Thu Jun  6 10:25:58 2013
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu, 06 Jun 2013 19:25:58 +0200
Subject: [gdal-dev] Two gdal-1.10.0 build errors
In-Reply-To: <CAHOfOo1_J-iu0yqSrSRfLzNXZA-8tWP4jO_yGACj=UB0U4Ajfw@mail.gmail.com>
References: <CAHOfOo1_J-iu0yqSrSRfLzNXZA-8tWP4jO_yGACj=UB0U4Ajfw@mail.gmail.com>
Message-ID: <51B0C626.403@free.fr>

On 06/06/2013 18:54, Andrew Brooks wrote:
> Hi
>
> Just a couple of problems:
>
>   frmts/msg/msgcommand.cpp:434: error: 'sprintf' was not declared in
> this scope
> (needed a #include)
>
>    --with-rename-internal-libtiff-symbols=yes and
>   --with-rename-internal-libgeotiff-symbols=yes
>   .libs/libgdal.so: undefined reference to `TIFFReadEncodedStrip'
>   (had to configure without those options)
>
> Andrew
>

Hi,

You should give some information about the OS and the compiler you use.

Jean-Claude



From ivan at sanchezortega.es  Thu Jun  6 10:39:14 2013
From: ivan at sanchezortega.es (=?iso-8859-1?q?Iv=E1n_S=E1nchez_Ortega?=)
Date: Thu, 6 Jun 2013 19:39:14 +0200
Subject: [gdal-dev] large tiff problem on android
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0CC76164728@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0CC76164727@MAILBOXSERVER.rf.local>
	<C5D1974ECA44D2429ECBC64B967C34C0CC76164728@MAILBOXSERVER.rf.local>
Message-ID: <201306061939.14544.ivan@sanchezortega.es>

On Jueves, 6 de junio de 2013 19:04:48 Livneh Yehiyam escribi?:
> I'm having problems reading data from tiff files larger than 2GB.
> Smaller files works ok.

What's your filesystem? FAT32 on an SD card, by any chance?

-- 
----------------------------------
Iv?n S?nchez Ortega <ivan at sanchezortega.es> <ivan at geonerd.org>


From yehil at rafael.co.il  Thu Jun  6 11:03:02 2013
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Thu, 6 Jun 2013 21:03:02 +0300
Subject: [gdal-dev] large tiff problem on android
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0CC7616472A@MAILBOXSERVER.rf.local>

Its on the internal storage (which is called external on android). I don't know the file system type.
One more thing is that I am able to open the dataset, get its size, projection etc. Only when I try to read the pixel data I get an error.
I don't have the error in front of me, but I do remember that it fails to seek in the tiff.

Sent from my mobile


-----------------------------
From: Iv?n S?nchez Ortega
Subject: Re: [gdal-dev] large tiff problem on android
Date: 06 ???? 2013 20:55


On Jueves, 6 de junio de 2013 19:04:48 Livneh Yehiyam escribi?:
> I'm having problems reading data from tiff files larger than 2GB.
> Smaller files works ok.

What's your filesystem? FAT32 on an SD card, by any chance?

--
----------------------------------
Iv?n S?nchez Ortega <ivan at sanchezortega.es> <ivan at geonerd.org>


________________________________________

This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not the intended recipient, you should contact us immediately and thereafter delete this message from your system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all electronic or other copies of the original message and any attachments thereof.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130606/dd7aaac0/attachment.html>

From even.rouault at mines-paris.org  Thu Jun  6 11:06:41 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 6 Jun 2013 20:06:41 +0200
Subject: [gdal-dev] Two gdal-1.10.0 build errors
In-Reply-To: <CAHOfOo1_J-iu0yqSrSRfLzNXZA-8tWP4jO_yGACj=UB0U4Ajfw@mail.gmail.com>
References: <CAHOfOo1_J-iu0yqSrSRfLzNXZA-8tWP4jO_yGACj=UB0U4Ajfw@mail.gmail.com>
Message-ID: <201306062006.41351.even.rouault@mines-paris.org>

Hi Andrew,

> 
> Just a couple of problems:
> 
>  frmts/msg/msgcommand.cpp:434: error: 'sprintf' was not declared in this
> scope
> (needed a #include)

Perhaps you can provide the patch ? This driver is most likely not compiled on 
a regular basis due to its unusual dependencies.

> 
>   --with-rename-internal-libtiff-symbols=yes and
>  --with-rename-internal-libgeotiff-symbols=yes
>  .libs/libgdal.so: undefined reference to `TIFFReadEncodedStrip'
>  (had to configure without those options)

If you added those flags after a first ./configure attempt, make sure to make 
clean && make
If problems persists, could you issue "grep TIFFReadEncodedStrip frmts/o/*" 
and "grep gdal_TIFFReadEncodedStrip frmts/o/*" and report the output ?

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From aperi2007 at gmail.com  Thu Jun  6 11:24:50 2013
From: aperi2007 at gmail.com (Andrea Peri)
Date: Thu, 6 Jun 2013 20:24:50 +0200
Subject: [gdal-dev] gml driver : access to the db temporary
Message-ID: <CABqTJk_RR_VcRgyagAtRE292V7y5dY1u8X6hLNtJCBsog+0M_g@mail.gmail.com>

Hi,

As reported in the GML driver page:

when using the  GML_SKIP_RESOLVE_ELEMS HUGE method to resolve the GML.
It will produce firstly a file-system based DBMS.

I don't see this dbms file so probably itis removed fter it use.

I'm interest to see its information. So there is a workaround to avoid this
remove ?

thx,

-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130606/b1a249cb/attachment.html>

From jaak at nutiteq.com  Thu Jun  6 12:50:57 2013
From: jaak at nutiteq.com (Jaak Laineste (Nutiteq))
Date: Thu, 6 Jun 2013 12:50:57 -0700
Subject: [gdal-dev] Wrapping with SWIG
In-Reply-To: <201305221920.55720.even.rouault@mines-paris.org>
References: <CACPKxk_KHkXdJxmubH2Vesein_dMTFxAnJdZAsAE8=j+0GSHzw@mail.gmail.com>
	<CACALY+RU=a+HLroXimBmFzbLKAU_WoEqp6noB65r1X6UW6n5Uw@mail.gmail.com>
	<1368776311385-5053886.post@n6.nabble.com>
	<201305221920.55720.even.rouault@mines-paris.org>
Message-ID: <78F5E82F-7450-494B-9CE7-98ECA172C562@nutiteq.com>


On 22.05.2013, at 10:20, Even Rouault wrote:

> Le vendredi 17 mai 2013 09:38:31, Hank Finley a ?crit :
>> Hi Tamas,
>> 
>> thanks for the advice, I would still like to continue with my goal, down
>> the track I'm going to be using this to fuel my OpenGL graphical map. The
>> SQL API level was far too slow, so I am going to the C API level.
>> 
>> Is it possible to contact Even somehow?
> 
> Done now ;-)
> 
> I'm afraid that your goal - as far as I've understood it - is not achievable. 
> You will have to use the SQLite API at some point since Spatialite is "no 
> more" than a set of C functions (and triggers) that can do 
> serialization/deserialization of geometry blobs, spatial operations, etc... 
> But you have to access the SQLite database through the SQL SQLite API.

It is my understanding also that even if Spatialite has C API, then it is more for internal things, and you area supposed to use SQL API instead. It might be possible to generate wrapper for C functions and datatypes also, but it would be pain with not much gain. Swig is no good for any more complex datatypes, you'd need to manually redefine them. I would suggest to use Java stuff instead, like JTS, and SQL wrappers for gaiageo functions.

This reminds me that I patched (more like hotfixed) GDAL Java Swig wrapper to get it to run on Android. I found one snag, now reported with the fix as http://trac.osgeo.org/gdal/ticket/5107, it seems to be unfixed in the latest version. Review/comments are welcome, as this is my first and only Swig adventure.

Jaak

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130606/fd837d27/attachment.html>

From eduardo.kanegae at gmail.com  Thu Jun  6 13:28:20 2013
From: eduardo.kanegae at gmail.com (Eduardo Kanegae)
Date: Thu, 6 Jun 2013 17:28:20 -0300
Subject: [gdal-dev] GDAL 1.9.2 - converting from shp to MapInfo get wrong SRS
Message-ID: <CAF_a5S+fyLxunsacGoDoL_mtLvTBKCda_00yp-Wbi8y9oz5cqQ@mail.gmail.com>

hi,

I'm trying to convert a shapefile layer (EPSG:22523) for the same SRS
in a MapInfo TAB file, but despite I try to do it using:

$ ogr2ogr  -f "MapInfo File" -s_srs EPSG:22523 -t_srs EPSG:22523
-a_srs EPSG:22523 /mapinfo_target_folder/ /shp_source_folder
my_layer_1

And despite an "orginfo -so " is dumping same extent values for source
and target files, the full dump for TARGET mapinfo file is displaying
the follwing metadata for SRS:
Layer SRS WKT:
PROJCS["unnamed",
    GEOGCS["unnamed",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563],
            TOWGS84[0,0,0,-0,-0,-0,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-45],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",10000000],
    UNIT["Meter",1.0]]

and finally, when opening the target file at Mapinfo application, this
layer is being displayed shifted.

Is there any creation option to be passed to ogr2ogr to fix this WGS metadata?

thanks in advance,

Eduardo Patto Kanegae
http://www.webmapit.com | @webmapit

From jluis at ualg.pt  Thu Jun  6 14:14:35 2013
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu, 06 Jun 2013 22:14:35 +0100
Subject: [gdal-dev] with poppler error
Message-ID: <51B0FBBB.4070603@ualg.pt>

Hi,

I'm having this error when building with poppler. It used to build 
before but for the doubts I rebuild poppler (from the git repo) but the 
error persists.

C:/programs/compa_libs/poppler_GIT\poppler/SplashOutputDev.h(164) : 
error C2061: syntax error : identifier 'SplashThinLineMode'
C:/programs/compa_libs/poppler_GIT\poppler/SplashOutputDev.h(164) : 
error C2059: syntax error : ')'
C:/programs/compa_libs/poppler_GIT\poppler/SplashOutputDev.h(164) : 
error C2143: syntax error : missing ')' before ';'
c1xx : fatal error C1903: unable to recover from previous error(s); 
stopping compilation

Joaquim

From even.rouault at mines-paris.org  Thu Jun  6 14:37:40 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 6 Jun 2013 23:37:40 +0200
Subject: [gdal-dev] with poppler error
In-Reply-To: <51B0FBBB.4070603@ualg.pt>
References: <51B0FBBB.4070603@ualg.pt>
Message-ID: <201306062337.41119.even.rouault@mines-paris.org>

Le jeudi 06 juin 2013 23:14:35, Joaquim Luis a ?crit :
> Hi,
> 
> I'm having this error when building with poppler. It used to build
> before but for the doubts I rebuild poppler (from the git repo) but the
> error persists.
> 
> C:/programs/compa_libs/poppler_GIT\poppler/SplashOutputDev.h(164) :
> error C2061: syntax error : identifier 'SplashThinLineMode'
> C:/programs/compa_libs/poppler_GIT\poppler/SplashOutputDev.h(164) :
> error C2059: syntax error : ')'
> C:/programs/compa_libs/poppler_GIT\poppler/SplashOutputDev.h(164) :
> error C2143: syntax error : missing ')' before ';'
> c1xx : fatal error C1903: unable to recover from previous error(s);
> stopping compilation

I've just tried on Linux with latest poppler git, and GDAL compiles fine. I can 
see that SplashThinLineMode is an enumeration defined in 
poppler/splash/SplashTypes.h. Perhaps you should check if that exists in it. 
Perhaps an installation problem of poppler headers on Windows... ? I can see 
that the enumeration is new in poppler 0.23/git w.r.t poppler 0.22.

> 
> Joaquim
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jmckenna at gatewaygeomatics.com  Thu Jun  6 14:37:55 2013
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu, 06 Jun 2013 18:37:55 -0300
Subject: [gdal-dev] with poppler error
In-Reply-To: <51B0FBBB.4070603@ualg.pt>
References: <51B0FBBB.4070603@ualg.pt>
Message-ID: <51B10133.9090003@gatewaygeomatics.com>

Poppler is one of those libraries during the GDAL build process where I
have to make changes to the GDAL source for the build to succeed.  I
believe I change an include path in /frmts/pdf/pdfobject.h to Splash.h -
your error could be related to this.

-jeff


-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/

On 2013-06-06 6:14 PM, Joaquim Luis wrote:
> Hi,
> 
> I'm having this error when building with poppler. It used to build
> before but for the doubts I rebuild poppler (from the git repo) but the
> error persists.
> 
> C:/programs/compa_libs/poppler_GIT\poppler/SplashOutputDev.h(164) :
> error C2061: syntax error : identifier 'SplashThinLineMode'
> C:/programs/compa_libs/poppler_GIT\poppler/SplashOutputDev.h(164) :
> error C2059: syntax error : ')'
> C:/programs/compa_libs/poppler_GIT\poppler/SplashOutputDev.h(164) :
> error C2143: syntax error : missing ')' before ';'
> c1xx : fatal error C1903: unable to recover from previous error(s);
> stopping compilation
> 
> Joaquim



From jluis at ualg.pt  Thu Jun  6 15:22:16 2013
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu, 06 Jun 2013 23:22:16 +0100
Subject: [gdal-dev] with poppler error
In-Reply-To: <201306062337.41119.even.rouault@mines-paris.org>
References: <51B0FBBB.4070603@ualg.pt>
	<201306062337.41119.even.rouault@mines-paris.org>
Message-ID: <51B10B98.1020209@ualg.pt>


> I've just tried on Linux with latest poppler git, and GDAL compiles fine. I can
> see that SplashThinLineMode is an enumeration defined in
> poppler/splash/SplashTypes.h. Perhaps you should check if that exists in it.
> Perhaps an installation problem of poppler headers on Windows... ? I can see
> that the enumeration is new in poppler 0.23/git w.r.t poppler 0.22.

SplashThinLineMode  looks fine in SplashTypes.h


From jluis at ualg.pt  Thu Jun  6 15:32:24 2013
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu, 06 Jun 2013 23:32:24 +0100
Subject: [gdal-dev] with poppler error
In-Reply-To: <51B10133.9090003@gatewaygeomatics.com>
References: <51B0FBBB.4070603@ualg.pt> <51B10133.9090003@gatewaygeomatics.com>
Message-ID: <51B10DF8.6040905@ualg.pt>

On 06-06-2013 22:37, Jeff McKenna wrote:
> Poppler is one of those libraries during the GDAL build process where I
> have to make changes to the GDAL source for the build to succeed.  I
> believe I change an include path in /frmts/pdf/pdfobject.h to Splash.h -
> your error could be related to this.
>
> -jeff

But I don't see any change applied by you on  /frmts/pdf/pdfobject.h


From mauropisano at suremptec.com.ar  Thu Jun  6 15:34:38 2013
From: mauropisano at suremptec.com.ar (Mauro Pisano)
Date: Thu, 6 Jun 2013 19:34:38 -0300
Subject: [gdal-dev] SetFeature trouble! (HELP)
Message-ID: <CAJ0G4t0+XgKGOU79p=7oLA8uocv3W2Fw5Lz9p7_44rZqeeREKA@mail.gmail.com>

Hi everyone!

I have a question about using the method OGRLayer::Layer().

Following i show you a protion of code:

/*** */
// Create geometry from wkt
OGRGeometryFactory::createFromWkt(&pwkt, pSpatialRef, &pgeometry);

/** Configure geom
pCurrentFeature_->SetGeometry(&pgeometry);

if (pCurrentLayer_->SetFeature(pCurrentFeature_) != OGRERR_NONE) {
    SHOW_ERROR(message_LAYER_MODIFIED_CLOSE_ERROR);
}

1: The SetFeature, returns with an error, but if I open the .DBF file I
found that the insert was made.
Then... why I have the Feature set?, taking account that the method is
returning FAIL.

2: Suppose that i have two features, and I open it and started to edit a
third feature. Whats
 wrong in this case,  is that after the insert, the value of the FID is a
very very very big number. Example:

Feature 1 = FID = 0;
Feature 2 = FID = 1;
Feature 3 = FID = 2893772.

I dont  have any clue about whats happening, any kind of data will be
appreciated.

Thanks in advance,

Mauro Pisano
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
mauropisano at suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130606/3feb0bab/attachment.html>

From warmerdam at pobox.com  Thu Jun  6 15:59:29 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 6 Jun 2013 15:59:29 -0700
Subject: [gdal-dev] SetFeature trouble! (HELP)
In-Reply-To: <CAJ0G4t0+XgKGOU79p=7oLA8uocv3W2Fw5Lz9p7_44rZqeeREKA@mail.gmail.com>
References: <CAJ0G4t0+XgKGOU79p=7oLA8uocv3W2Fw5Lz9p7_44rZqeeREKA@mail.gmail.com>
Message-ID: <CA+YzLBfh+RTZ5Sb5325TL6OHjQrkddmm0r1rM3q23UmodwCCGw@mail.gmail.com>

On Thu, Jun 6, 2013 at 3:34 PM, Mauro Pisano
<mauropisano at suremptec.com.ar>wrote:

>
> Hi everyone!
>
> I have a question about using the method OGRLayer::Layer().
>
> Following i show you a protion of code:
>
> /*** */
> // Create geometry from wkt
> OGRGeometryFactory::createFromWkt(&pwkt, pSpatialRef, &pgeometry);
>
> /** Configure geom
> pCurrentFeature_->SetGeometry(&pgeometry);
>

Mauro,

Assuming  that pgometry is declared as "OGRGeometry *pgeometry;" I don't
see how the proposed SetGeometry call would compile.  You should be passing
an OGRGeometry* to SetGeometry, not an OGRGeometry**.  Also, if you aren't
going to use the geometry for anything else you might as well call
SetGeometryDirectly() which grants ownership of the geometry to the feature
so you don't have to free it.



> if (pCurrentLayer_->SetFeature(pCurrentFeature_) != OGRERR_NONE) {
>     SHOW_ERROR(message_LAYER_MODIFIED_CLOSE_ERROR);
> }
>

Note that SetFeature() is used to update an existing featre in the layer.
 I think you creating new features and so you should be using
CreateFeature().  With SetFeature() you are supposed to have the FID
already established so the layer knows where it belongs.

I'm not sure why you are seeing an error put still that things seem to
work.

Best regards,
Frank


>
> 1: The SetFeature, returns with an error, but if I open the .DBF file I
> found that the insert was made.
> Then... why I have the Feature set?, taking account that the method is
> returning FAIL.
>
> 2: Suppose that i have two features, and I open it and started to edit a
> third feature. Whats
>  wrong in this case,  is that after the insert, the value of the FID is a
> very very very big number. Example:
>
> Feature 1 = FID = 0;
> Feature 2 = FID = 1;
> Feature 3 = FID = 2893772.
>
> I dont  have any clue about whats happening, any kind of data will be
> appreciated.
>
> Thanks in advance,
>
> Mauro Pisano
> SUR Emprendimientos Tecnol?gicos
>
> Per? 345  Piso 5to Oficina "B" (C1067AAG)
> Ciudad de Buenos Aires, Argentina
> Tel. +54 (11) 4342-2976/84
> mauropisano at suremptec.com.ar
> www.suremptec.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130606/38a3c189/attachment-0001.html>

From jukka.rahkonen at mmmtike.fi  Thu Jun  6 16:26:58 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 6 Jun 2013 23:26:58 +0000 (UTC)
Subject: [gdal-dev] =?utf-8?q?Bad_result_when_writing_into_KML_without_-t?=
	=?utf-8?q?=5Fsrs?=
Message-ID: <loom.20130607T011619-959@post.gmane.org>

Hi,

I have a shapefile in EPSG:2393 but without .prj file and I am getting a bad
result if I convert it into KML format with command:

ogr2ogr -f KML -s_srs epsg:2393 test_2.kml test_region.shp
ERROR 1: Latitude 6785184.157800 is invalid. Valid range is [-90,90]. This
warning will not be issued any more
Warning 1: Longitude 3304050.889898 has been modified to fit into range
[-180,180]. This warning will not be issued any more

The result is good if I add parameter -t_srs epsg:4326. However, this should
be unnecessary with KML because it is always EPSG:4326 and also the driver
manual page http://www.gdal.org/ogr/drv_kml.html claims the same in the text
and in the examples.

Gdal version is "GDAL 1.10.0, released 2013/04/13" from gisinternals

-Jukka Rahkonen-



From jukka.rahkonen at mmmtike.fi  Thu Jun  6 16:42:39 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 6 Jun 2013 23:42:39 +0000 (UTC)
Subject: [gdal-dev] Source SRS not honoured if shapefile .prj file exists
Message-ID: <loom.20130607T012950-898@post.gmane.org>

Hi,

I received a shapefile with a non-perfect .prj file which does not advertise
that the coordinate system is Finnish KKJ (EPSG:2393) which needs +towgs84
parameters. I knew that GDAL 1.10 finally comes with correct parameters and
thought that problem could be solved easily by adding parameter "-s_srs
epsg:2393" into ogr2ogr command. However, GDAL does not honour the parameter
if the .prj still exists in the shapefile directory. Only after deleting the
.prj file I got the correct result. I think that the correct behaviour would
be the opposite and take -s_srs instead of .prj if both are available.

Tested with GDAL 1.10.0, released 2013/04/13 and my command was
ogr2ogr -f KML -s_srs epsg:2393 -t_srs epsg:4326 test4.kml test_region.shp

-Jukka Rahkonen-


From andre+joost at nurfuerspam.de  Thu Jun  6 21:09:15 2013
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Fri, 07 Jun 2013 06:09:15 +0200
Subject: [gdal-dev] Bad result when writing into KML without -t_srs
In-Reply-To: <loom.20130607T011619-959@post.gmane.org>
References: <loom.20130607T011619-959@post.gmane.org>
Message-ID: <kormi2$8ti$2@ger.gmane.org>

Am 07.06.2013 01:26, schrieb Jukka Rahkonen:

>
> The result is good if I add parameter -t_srs epsg:4326. However, this should
> be unnecessary with KML because it is always EPSG:4326 and also the driver
> manual page http://www.gdal.org/ogr/drv_kml.html claims the same in the text
> and in the examples.

+1, the same should go for the GPX driver.

Greetings,
Andr? Joost



From andre+joost at nurfuerspam.de  Thu Jun  6 21:10:57 2013
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Fri, 07 Jun 2013 06:10:57 +0200
Subject: [gdal-dev] Source SRS not honoured if shapefile .prj file exists
In-Reply-To: <loom.20130607T012950-898@post.gmane.org>
References: <loom.20130607T012950-898@post.gmane.org>
Message-ID: <kormi1$8ti$1@ger.gmane.org>

Am 07.06.2013 01:42, schrieb Jukka Rahkonen:
> Hi,
>
> I received a shapefile with a non-perfect .prj file which does not advertise
> that the coordinate system is Finnish KKJ (EPSG:2393) which needs +towgs84
> parameters. I knew that GDAL 1.10 finally comes with correct parameters and
> thought that problem could be solved easily by adding parameter "-s_srs
> epsg:2393" into ogr2ogr command. However, GDAL does not honour the parameter
> if the .prj still exists in the shapefile directory. Only after deleting the
> .prj file I got the correct result. I think that the correct behaviour would
> be the opposite and take -s_srs instead of .prj if both are available.
>
> Tested with GDAL 1.10.0, released 2013/04/13 and my command was
> ogr2ogr -f KML -s_srs epsg:2393 -t_srs epsg:4326 test4.kml test_region.shp
>


Can you test with the full proj string as well? I discovered some 
differences between supplying EPSG code and full proj string.

Greetings,
Andr? Joost



From gdal at stripfamily.net  Thu Jun  6 21:50:26 2013
From: gdal at stripfamily.net (David Strip)
Date: Thu, 06 Jun 2013 22:50:26 -0600
Subject: [gdal-dev] How robust is  OGRSpatialReference::GetAuthorityCode?
Message-ID: <51B16692.4040504@stripfamily.net>

How well does OGRSpatialReference::GetAuthorityCode perform in the wild 
when handed a WKT? In particular, if I have satellite imagery from 
someplace in the world that was ortho-rectified in a "sane" manner to a 
national or state projection with an conforming WKT, will this function 
return an EPSG value?  (I realize "robust" is somewhat ill-defined, but 
this is the best I could come up with in terms of my question. Sorry).

From adiba.nizami at gmail.com  Thu Jun  6 21:58:25 2013
From: adiba.nizami at gmail.com (adi_khan)
Date: Thu, 6 Jun 2013 21:58:25 -0700 (PDT)
Subject: [gdal-dev] gdal_merge does not mosaic
In-Reply-To: <CA+YzLBcUpaw6ryQRUg+ZexHdDFRtxVRYcQhDKsLxf3aepJhn-w@mail.gmail.com>
References: <CA+YzLBc1zf-arm4Uc5OKH-TCZX1XhW-V5dMPA87_Ab_iUTXssw@mail.gmail.com>
	<1370022494351-5057219.post@n6.nabble.com>
	<51A9288D.8060208@free.fr>
	<1370325419174-5057631.post@n6.nabble.com>
	<loom.20130604T104443-163@post.gmane.org>
	<CAH8QYjtqTxtjfaKXqoba2OPLF2LoxYGjdhazW8U+FUbkot-8-Q@mail.gmail.com>
	<1370339961622-5057704.post@n6.nabble.com>
	<loom.20130604T144822-415@post.gmane.org>
	<1370414590929-5057994.post@n6.nabble.com>
	<CA+YzLBcUpaw6ryQRUg+ZexHdDFRtxVRYcQhDKsLxf3aepJhn-w@mail.gmail.com>
Message-ID: <1370581105213-5058590.post@n6.nabble.com>

Thanks Frank.
I have been able to solve the issue. Using your clue, I am reprojecting all
the input images to common projected coordinate system (of the image which
will be at mosaic'c center) and then mosaicing.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-merge-does-not-mosaic-tp5057095p5058590.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at mmmtike.fi  Thu Jun  6 22:08:48 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 7 Jun 2013 05:08:48 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Bad_result_when_writing_into_KML_without_-t?=
	=?utf-8?q?=5Fsrs?=
References: <loom.20130607T011619-959@post.gmane.org>
	<kormi2$8ti$2@ger.gmane.org>
Message-ID: <loom.20130607T065503-116@post.gmane.org>

Andre Joost <andre+joost <at> nurfuerspam.de> writes:

> 
> Am 07.06.2013 01:26, schrieb Jukka Rahkonen:
> 
> >
> > The result is good if I add parameter -t_srs epsg:4326. However, this should
> > be unnecessary with KML because it is always EPSG:4326 and also the driver
> > manual page http://www.gdal.org/ogr/drv_kml.html claims the same in the text
> > and in the examples.
> 
> +1, the same should go for the GPX driver.

Herman Peifer wrote but forgot to send to the list:

" Jukka,
Could you please try with -a_srs epsg:2393 instead of -s_srs epsg:2393,
see http://trac.osgeo.org/gdal/ticket/4496"

This is funny, but using -a_srs:2393 in the command really leads to correct
result. Following command, even being all wrong with the a_srs, gives good
KML and it also overrides the erroneous prj file.

ogr2ogr -f KML -a_srs epsg:2393  test6.kml test_region.shp

-Jukka Rahkonen-





From ari.jolma at gmail.com  Fri Jun  7 01:28:14 2013
From: ari.jolma at gmail.com (Ari Jolma)
Date: Fri, 07 Jun 2013 11:28:14 +0300
Subject: [gdal-dev] gml driver : access to the db temporary
In-Reply-To: <CABqTJk_RR_VcRgyagAtRE292V7y5dY1u8X6hLNtJCBsog+0M_g@mail.gmail.com>
References: <CABqTJk_RR_VcRgyagAtRE292V7y5dY1u8X6hLNtJCBsog+0M_g@mail.gmail.com>
Message-ID: <51B1999E.7060808@gmail.com>

On 06/06/2013 09:24 PM, Andrea Peri wrote:
> Hi,
>
> As reported in the GML driver page:
>
> when using the  GML_SKIP_RESOLVE_ELEMS HUGE method to resolve the GML.
> It will produce firstly a file-system based DBMS.
>
> I don't see this dbms file so probably itis removed fter it use.
>
> I'm interest to see its information. So there is a workaround to avoid 
> this remove ?

If that is the case, then possibly you can avoid it by using a 
programmatic interface to GDAL.

Ari

>
> thx,
>
> -- 
> -----------------
> Andrea Peri
> . . . . . . . . .
> qwerty ?????
> -----------------
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130607/75684523/attachment.html>

From even.rouault at mines-paris.org  Fri Jun  7 02:13:35 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 07 Jun 2013 11:13:35 +0200
Subject: [gdal-dev] Bad result when writing into KML without -t_srs
In-Reply-To: <loom.20130607T011619-959@post.gmane.org>
References: <loom.20130607T011619-959@post.gmane.org>
Message-ID: <1370596415.51b1a43f7f4ea@imp.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:

> Hi,
>
> I have a shapefile in EPSG:2393 but without .prj file and I am getting a bad
> result if I convert it into KML format with command:
>
> ogr2ogr -f KML -s_srs epsg:2393 test_2.kml test_region.shp
> ERROR 1: Latitude 6785184.157800 is invalid. Valid range is [-90,90]. This
> warning will not be issued any more
> Warning 1: Longitude 3304050.889898 has been modified to fit into range
> [-180,180]. This warning will not be issued any more
>
> The result is good if I add parameter -t_srs epsg:4326. However, this should
> be unnecessary with KML because it is always EPSG:4326 and also the driver
> manual page http://www.gdal.org/ogr/drv_kml.html claims the same in the text
> and in the examples.

Several emails in the queue related to the reprojection area.

Logical behaviour when considering how -s_srs works. Basically -s_srs is ignored
completely if you don't also specify -t_srs. Probably a warning should be issued
to warn the user, and this should be documented in the manual page.

>
> Gdal version is "GDAL 1.10.0, released 2013/04/13" from gisinternals
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From even.rouault at mines-paris.org  Fri Jun  7 02:22:31 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 07 Jun 2013 11:22:31 +0200
Subject: [gdal-dev] Source SRS not honoured if shapefile .prj file exists
In-Reply-To: <loom.20130607T012950-898@post.gmane.org>
References: <loom.20130607T012950-898@post.gmane.org>
Message-ID: <1370596951.51b1a65715a19@imp.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:

> Hi,
>
> I received a shapefile with a non-perfect .prj file which does not advertise
> that the coordinate system is Finnish KKJ (EPSG:2393) which needs +towgs84
> parameters. I knew that GDAL 1.10 finally comes with correct parameters and
> thought that problem could be solved easily by adding parameter "-s_srs
> epsg:2393" into ogr2ogr command. However, GDAL does not honour the parameter
> if the .prj still exists in the shapefile directory. Only after deleting the
> .prj file I got the correct result. I think that the correct behaviour would
> be the opposite and take -s_srs instead of .prj if both are available.
>
> Tested with GDAL 1.10.0, released 2013/04/13 and my command was
> ogr2ogr -f KML -s_srs epsg:2393 -t_srs epsg:4326 test4.kml test_region.shp

This one is weird. Looking at ogr2ogr code doesn't lead to an obvious
explanation. -s_srs should override the SRS of the shapefile. Perhaps you could
open a ticket with the data to reproduce ?

>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From even.rouault at mines-paris.org  Fri Jun  7 02:33:07 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 07 Jun 2013 11:33:07 +0200
Subject: [gdal-dev] Bad result when writing into KML without -t_srs
In-Reply-To: <loom.20130607T065503-116@post.gmane.org>
References: <loom.20130607T011619-959@post.gmane.org>
	<kormi2$8ti$2@ger.gmane.org>
	<loom.20130607T065503-116@post.gmane.org>
Message-ID: <1370597587.51b1a8d30f893@imp.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:

> Andre Joost <andre+joost <at> nurfuerspam.de> writes:
>
> >
> > Am 07.06.2013 01:26, schrieb Jukka Rahkonen:
> >
> > >
> > > The result is good if I add parameter -t_srs epsg:4326. However, this
> should
> > > be unnecessary with KML because it is always EPSG:4326 and also the
> driver
> > > manual page http://www.gdal.org/ogr/drv_kml.html claims the same in the
> text
> > > and in the examples.
> >
> > +1, the same should go for the GPX driver.
>
> Herman Peifer wrote but forgot to send to the list:
>
> " Jukka,
> Could you please try with -a_srs epsg:2393 instead of -s_srs epsg:2393,
> see http://trac.osgeo.org/gdal/ticket/4496"
>
> This is funny, but using -a_srs:2393 in the command really leads to correct
> result. Following command, even being all wrong with the a_srs, gives good
> KML and it also overrides the erroneous prj file.
>
> ogr2ogr -f KML -a_srs epsg:2393  test6.kml test_region.shp

This is also explainable by ogr2ogr and the KML driver works. -a_srs attaches a
SRS to the feature that is passed to the output driver (overriding the SRS of
the source feature if existing). The KML driver has a very unique behaviour in
which it takes into account the SRS of the features that are passed to it to do
reprojection to EPSG:4326 if needed. Said differently the KML driver has some
sort of -s_srs -t_srs mechanism integrated into it.

You could do weird things like:

ogr2ogr -f KML -s_srs EPSG:3857 -t_srs EPSG:32632 out.kml src_4326.shp and it
would do EPSG:3857 --> EPSG:32632 in ogr2ogr, and then EPSG:32632 --> EPSG:4326
in the KML driver ...


>
> -Jukka Rahkonen-
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From jukka.rahkonen at mmmtike.fi  Fri Jun  7 02:35:44 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 7 Jun 2013 09:35:44 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Bad_result_when_writing_into_KML_without_-t?=
	=?utf-8?q?=5Fsrs?=
References: <loom.20130607T011619-959@post.gmane.org>
	<1370596415.51b1a43f7f4ea@imp.free.fr>
Message-ID: <loom.20130607T112924-386@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:


> 
> Logical behaviour when considering how -s_srs works. Basically -s_srs is
ignored
> completely if you don't also specify -t_srs. Probably a warning should be
issued
> to warn the user, and this should be documented in the manual page.


True, but there was also a logical reason for the mistake.  I was reading
from the manual page "Note that KML by specification uses only a single
projection, EPSG:4326" and therefore I just felt that specifying -t_srs is
unnecessary also in this context.



-Jukka Rahkonen-


From jukka.rahkonen at mmmtike.fi  Fri Jun  7 04:21:26 2013
From: jukka.rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Fri, 7 Jun 2013 11:21:26 +0000
Subject: [gdal-dev] Source SRS not honoured if shapefile .prj file exists
Message-ID: <84446DEF76453C439E9E97E438E13A63C134FF@suutari.haapa.mmm.fi>

Even Rouault wrote:

> Selon Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:
> 
> > Hi,
> >
> > I received a shapefile with a non-perfect .prj file which does not
> > advertise that the coordinate system is Finnish KKJ (EPSG:2393) which
> > needs +towgs84 parameters. I knew that GDAL 1.10 finally comes with
> > correct parameters and thought that problem could be solved easily by
> > adding parameter "-s_srs epsg:2393" into ogr2ogr command. However,
> > GDAL does not honour the parameter if the .prj still exists in the
> > shapefile directory. Only after deleting the .prj file I got the
> > correct result. I think that the correct behaviour would be the opposite and
> take -s_srs instead of .prj if both are available.
> >
> > Tested with GDAL 1.10.0, released 2013/04/13 and my command was
> > ogr2ogr -f KML -s_srs epsg:2393 -t_srs epsg:4326 test4.kml
> > test_region.shp
> 
> This one is weird. Looking at ogr2ogr code doesn't lead to an obvious
> explanation. -s_srs should override the SRS of the shapefile. Perhaps you could
> open a ticket with the data to reproduce ?

Sad, but I can't. It was only a typo in -t_srs when the prj file was present. Now I know that GDAL discarded quietly also -s_srs because  of missing -t_srs and utilized prj  instead.

Perhaps ogr2ogr could print a message if it is discards -s_srs.  I also think that the KML driver page is  a little bit too optimistic when it is advertising "As such OGR will create layers in the correct coordinate system and transform any geometries."  At least there could be sentence  in the Caveats section emphasizing that if the automatic recognition of source srs fails then user must give both source srs and target srs manually.

-Jukka Rahkonen-

From peifer at gmx.eu  Fri Jun  7 05:55:05 2013
From: peifer at gmx.eu (Hermann Peifer)
Date: Fri, 07 Jun 2013 09:55:05 -0300
Subject: [gdal-dev] Bad result when writing into KML without -t_srs
In-Reply-To: <1370597587.51b1a8d30f893@imp.free.fr>
References: <loom.20130607T011619-959@post.gmane.org>
	<kormi2$8ti$2@ger.gmane.org>
	<loom.20130607T065503-116@post.gmane.org>
	<1370597587.51b1a8d30f893@imp.free.fr>
Message-ID: <51B1D829.8060200@gmx.eu>

On 2013-06-07 6:33, Even Rouault wrote:
> Selon Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:
>> Herman Peifer wrote but forgot to send to the list:
>>
>> " Jukka,
>> Could you please try with -a_srs epsg:2393 instead of -s_srs epsg:2393,
>> see http://trac.osgeo.org/gdal/ticket/4496"
>>
>> This is funny, but using -a_srs:2393 in the command really leads to correct
>> result. Following command, even being all wrong with the a_srs, gives good
>> KML and it also overrides the erroneous prj file.
>>
>> ogr2ogr -f KML -a_srs epsg:2393  test6.kml test_region.shp
>
> This is also explainable by ogr2ogr and the KML driver works. -a_srs attaches a
> SRS to the feature that is passed to the output driver (overriding the SRS of
> the source feature if existing). The KML driver has a very unique behaviour in
> which it takes into account the SRS of the features that are passed to it to do
> reprojection to EPSG:4326 if needed. Said differently the KML driver has some
> sort of -s_srs -t_srs mechanism integrated into it.
>

Said even differently, and from my perspective: the KML driver's 
behaviour is counter-intuitive. However, this seems to be a feature 
rather than bug, as far as I can gather from Even's explanations.

Hermann


From lauramail at iol.it  Fri Jun  7 08:32:43 2013
From: lauramail at iol.it (laura0)
Date: Fri, 7 Jun 2013 08:32:43 -0700 (PDT)
Subject: [gdal-dev] Reprojection raster 0 360 longitude
Message-ID: <1370619163656-5058766.post@n6.nabble.com>

Hi all,
I have a geotiff with the following corner coordinates:
Upper Left  (  -0.2500000,  90.2500000) (  0d15' 0.00"W, 90d15' 0.00"N)
Lower Left  (  -0.2500000, -90.2500000) (  0d15' 0.00"W, 90d15' 0.00"S)
Upper Right (     359.750,      90.250) (359d45' 0.00"E, 90d15' 0.00"N)
Lower Right (     359.750,     -90.250) (359d45' 0.00"E, 90d15' 0.00"S)
Center      ( 179.7500000,   0.0000000)

I would like to reproject it in UTM (then I will crop the image) for
instance with the command
gdalwarp -t_srs "+proj=utm +zone=32 +datum=WGS84" temp.tif proj.tif 

As you can see above, the range of longitude is 0 360 and not -180 180 so I
have tried:
gdalwarp -t_srs "+proj=utm +zone=32 +datum=WGS84" -te -180 -90 180 90
temp.tif proj.tif
but I get the error message
 ERROR 1: Reprojection failed, err = -14, further errors will be supressed
on the transform object.
Creating output file that is 0P x 0L.

I have also tried the option -wo SOURCE_EXTRA=1000 --config CENTER_LONG 0 I
have found somewhere, but I am not sure this is the right way.
Can someone suggest me the way?
Thanks

Laura



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Reprojection-raster-0-360-longitude-tp5058766.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From eloi.ribeiro at gmail.com  Fri Jun  7 09:32:15 2013
From: eloi.ribeiro at gmail.com (Eloi Ribeiro)
Date: Fri, 7 Jun 2013 18:32:15 +0200
Subject: [gdal-dev] Reprojection raster 0 360 longitude
In-Reply-To: <1370619163656-5058766.post@n6.nabble.com>
References: <1370619163656-5058766.post@n6.nabble.com>
Message-ID: <CANPxM8jJNtgk-MrN2UUD_sg9d2agWXZKtT3SXCH1oMpoECfFow@mail.gmail.com>

Try this to convert 0? 360? into -180? 180?:
http://eloiribeiro.wordpress.com/2009/07/08/coverter-imagens-0%C2%BA-360%C2%BA-a-180-180%C2%BA-com-gdal/
Good luck,

Eloi Ribeiro
GIS Analyst / Programmer
51.9871, 5.6661
flavors.me/eloiribeiro


On 7 June 2013 17:32, laura0 <lauramail at iol.it> wrote:

> Hi all,
> I have a geotiff with the following corner coordinates:
> Upper Left  (  -0.2500000,  90.2500000) (  0d15' 0.00"W, 90d15' 0.00"N)
> Lower Left  (  -0.2500000, -90.2500000) (  0d15' 0.00"W, 90d15' 0.00"S)
> Upper Right (     359.750,      90.250) (359d45' 0.00"E, 90d15' 0.00"N)
> Lower Right (     359.750,     -90.250) (359d45' 0.00"E, 90d15' 0.00"S)
> Center      ( 179.7500000,   0.0000000)
>
> I would like to reproject it in UTM (then I will crop the image) for
> instance with the command
> gdalwarp -t_srs "+proj=utm +zone=32 +datum=WGS84" temp.tif proj.tif
>
> As you can see above, the range of longitude is 0 360 and not -180 180 so I
> have tried:
> gdalwarp -t_srs "+proj=utm +zone=32 +datum=WGS84" -te -180 -90 180 90
> temp.tif proj.tif
> but I get the error message
>  ERROR 1: Reprojection failed, err = -14, further errors will be supressed
> on the transform object.
> Creating output file that is 0P x 0L.
>
> I have also tried the option -wo SOURCE_EXTRA=1000 --config CENTER_LONG 0 I
> have found somewhere, but I am not sure this is the right way.
> Can someone suggest me the way?
> Thanks
>
> Laura
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Reprojection-raster-0-360-longitude-tp5058766.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130607/c583ee3c/attachment.html>

From otrov at hush.ai  Fri Jun  7 16:54:55 2013
From: otrov at hush.ai (ven)
Date: Fri, 7 Jun 2013 16:54:55 -0700 (PDT)
Subject: [gdal-dev] How to re-project EPSG:4326 to polar projection EPSG:3411
Message-ID: <1370649295226-5058811.post@n6.nabble.com>

Hello,

I have global tiff file in EPSG:4326 and wanted to re-project in EPSG:3411
(http://spatialreference.org/ref/epsg/3411/).
I used this command:

"gdalwarp -s_srs EPSG:4326 -t_srs EPSG:3411 global.tif polar.tif"

which resulted in tiff image with large black hole in the middle and some
gray content outside this black circle. I was hoping obviously for opposite
- projection inside circle and black content outside, so I guess I failed at
some point but not sure where. Can anyone suggest what may be the problem
here?

I use gdal 1.10.0  on Windows

Thanks in advance



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/How-to-re-project-EPSG-4326-to-polar-projection-EPSG-3411-tp5058811.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From taibc_coltech at yahoo.com  Sat Jun  8 01:16:57 2013
From: taibc_coltech at yahoo.com (taibc)
Date: Sat, 8 Jun 2013 01:16:57 -0700 (PDT)
Subject: [gdal-dev] How to create feature LineString in a Polygon shape file
	layer ?
Message-ID: <1370679417083-5058827.post@n6.nabble.com>

Hi everyone,

I used below codes to create ShapeFile layer

OGRDataSource       *poDS,  *poSHPDS;
OGRLayer   *poSHPLayer;
......
poSHPLayer = poSHPDS->CreateLayer (shpFileName, NULL, wkbPolygon , NULL);

And I used below codes to create feature:

OGRFeature *poSHPFeature; 
poSHPFeature = OGRFeature::CreateFeature (poSHPLayer->GetLayerDefn());  
poSHPFeature->SetGeometry (poGeometry);

But when I tried to add create a LineString feature into shape file layer. I
got the error: "*Attempt to write non-polygon geometry to polygon type shape
file*". Please see my image. 

<http://osgeo-org.1560.x6.nabble.com/file/n5058827/LineString.png> 

How can I add linestring into layer (shape file) ?




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/How-to-create-feature-LineString-in-a-Polygon-shape-file-layer-tp5058827.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Sat Jun  8 13:53:58 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 8 Jun 2013 22:53:58 +0200
Subject: [gdal-dev] How robust is OGRSpatialReference::GetAuthorityCode?
In-Reply-To: <51B16692.4040504@stripfamily.net>
References: <51B16692.4040504@stripfamily.net>
Message-ID: <201306082253.58094.even.rouault@mines-paris.org>

Le vendredi 07 juin 2013 06:50:26, David Strip a ?crit :
> How well does OGRSpatialReference::GetAuthorityCode perform in the wild
> when handed a WKT? In particular, if I have satellite imagery from
> someplace in the world that was ortho-rectified in a "sane" manner to a
> national or state projection with an conforming WKT, will this function
> return an EPSG value?  (I realize "robust" is somewhat ill-defined, but
> this is the best I could come up with in terms of my question. Sorry).

David,

OGRSpatialReference::GetAuthorityCode() should be pretty robust, in the sense 
that it will return the authority code if an AUTHORITY[] node exists in the 
WKT. Otherwise it will return NULL.

The key is to have a WKT with AUTHORITY in it, which is for example NOT the 
case with the .prj files accompagning shapefiles.

You can also have a look at OGRSpatialReference::AutoIdentifyEPSG(), but don't 
expect too much of it... See its doc.

Even


> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jukka.rahkonen at mmmtike.fi  Sun Jun  9 03:40:46 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun, 9 Jun 2013 10:40:46 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?How_to_create_feature_LineString_in_a_Polygo?=
	=?utf-8?q?n_shape_file=09layer_=3F?=
References: <1370679417083-5058827.post@n6.nabble.com>
Message-ID: <loom.20130609T123819-197@post.gmane.org>

taibc <taibc_coltech <at> yahoo.com> writes:


> But when I tried to add create a LineString feature into shape file layer. I
> got the error: "*Attempt to write non-polygon geometry to polygon type shape
> file*". Please see my image. 
> 
> <http://osgeo-org.1560.x6.nabble.com/file/n5058827/LineString.png> 
> 
> How can I add linestring into layer (shape file) ?

You can't write linestrings into a polygon shapefile. Each shapefile can
only contain features of the same shape type or null geometries. Read for
example http://en.wikipedia.org/wiki/Shapefile

-Jukka Rahkonen-


From aperi2007 at gmail.com  Sun Jun  9 08:58:55 2013
From: aperi2007 at gmail.com (Andrea Peri)
Date: Sun, 9 Jun 2013 17:58:55 +0200
Subject: [gdal-dev] gml driver : access to the db temporary
Message-ID: <CABqTJk_1xg=s8PhyVBuR-+x1Vafnc6VR717vRL=GFpp54U9+og@mail.gmail.com>

On 07/06/2013, Ari Jolma wrote:
>On 06/06/2013 09:24 PM, Andrea Peri wrote:
>>* Hi,*>>**>>* As reported in the GML driver page:*>>**>>* when using the  GML_SKIP_RESOLVE_ELEMS HUGE method to resolve the GML.*>>* It will produce firstly a file-system based DBMS.*>>**>>* I don't see this dbms file so probably itis removed fter it use.*>>**>>* I'm interest to see its information. So there is a workaround to avoid *>>* this remove ?*>
>If that is the case, then possibly you can avoid it by using a
>programmatic interface to GDAL.
>
>Ari


Thx for response.
Meanwhile I spoke with on of the author of GML topology driver reader and
understand that the information in the temporary db was not interesting to
me.

I was interest in the PAL topology information available in the topology
GML .
But it is not available in that file.

So I will do a my specific parser to extract this information from GML.

Regards,


-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130609/9f3192eb/attachment.html>

From mlacayo at stanford.edu  Sun Jun  9 16:24:20 2013
From: mlacayo at stanford.edu (Martin Lacayo)
Date: Sun, 9 Jun 2013 16:24:20 -0700
Subject: [gdal-dev] How to create feature LineString in a Polygon shape
 file layer ?
In-Reply-To: <loom.20130609T123819-197@post.gmane.org>
References: <1370679417083-5058827.post@n6.nabble.com>
	<loom.20130609T123819-197@post.gmane.org>
Message-ID: <CADcOYKvjjqcsm5k9bkAz0QOGUvkfWoRQ1aLF1aqP+pVR6AwpCQ@mail.gmail.com>

>From reading the 1998 white paper it would seem that it was intended
to be possible, since each record includes a shape type (in addition
to the file header), however I have never seen or heard of data with
mixed geometries. I have always been curious though, does anyone have
any experience with a shapefile with mixed geometries?

On Sun, Jun 9, 2013 at 3:40 AM, Jukka Rahkonen
<jukka.rahkonen at mmmtike.fi> wrote:
> taibc <taibc_coltech <at> yahoo.com> writes:
>
>
>> But when I tried to add create a LineString feature into shape file layer. I
>> got the error: "*Attempt to write non-polygon geometry to polygon type shape
>> file*". Please see my image.
>>
>> <http://osgeo-org.1560.x6.nabble.com/file/n5058827/LineString.png>
>>
>> How can I add linestring into layer (shape file) ?
>
> You can't write linestrings into a polygon shapefile. Each shapefile can
> only contain features of the same shape type or null geometries. Read for
> example http://en.wikipedia.org/wiki/Shapefile
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From taibc_coltech at yahoo.com  Sun Jun  9 18:05:46 2013
From: taibc_coltech at yahoo.com (taibc)
Date: Sun, 9 Jun 2013 18:05:46 -0700 (PDT)
Subject: [gdal-dev] How to create feature LineString in a Polygon shape
 file	layer ?
In-Reply-To: <loom.20130609T123819-197@post.gmane.org>
References: <1370679417083-5058827.post@n6.nabble.com>
	<loom.20130609T123819-197@post.gmane.org>
Message-ID: <1370826346761-5059000.post@n6.nabble.com>

Yes. I will create a new shapefile for LineString type.

Thanks and regards,

Tai



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/How-to-create-feature-LineString-in-a-Polygon-shape-file-layer-tp5058827p5059000.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From emmanuel.sambale at gmail.com  Sun Jun  9 19:53:27 2013
From: emmanuel.sambale at gmail.com (maning sambale)
Date: Mon, 10 Jun 2013 10:53:27 +0800
Subject: [gdal-dev] cannot access GFT recently via QGIS and OGR
Message-ID: <CAPzumuEnq0bFBUEeCOhC33q2uaWdEgUWb0N3Q1MEQ8H6D91ecw@mail.gmail.com>

I have a vrt with the following contents:
(email and password redacted)

<OGRVRTDataSource>
  <OGRVRTLayer name="data">
    <SrcDataSource>
      GFT:email=redacted password=redacted
    </SrcDataSource>
    <SrcLayer>data</SrcLayer>
</OGRVRTLayer>

This vrt used to work and I can view and edit the data.  But recently,
I got this error.

ogrinfo -ro census.vrt
INFO: Open of `census.vrt'
      using driver `VRT' successful.
ERROR 1: HTTP error code : 400
ERROR 1: HTML error page returned by server
1: data

Using GDAL 1.9.2, released 2012/10/08

--
cheers,
maning
------------------------------------------------------
"Freedom is still the most radical idea of all" -N.Branden
wiki: http://esambale.wikispaces.com/
blog: http://epsg4253.wordpress.com/
------------------------------------------------------

From p.scadden at gns.cri.nz  Sun Jun  9 21:13:31 2013
From: p.scadden at gns.cri.nz (Phil Scadden)
Date: Mon, 10 Jun 2013 16:13:31 +1200
Subject: [gdal-dev] What has happened with gdal2tiles?
Message-ID: <51B5526B.5070407@gns.cri.nz>

gdal2tiles seems to have become something of an orphan.

I install Osgeo with gdal-16,
Go Gdal-16 on command line, but gdal2tiles doesnt work. I used to have 
to going no problem in an older osgeo version.

This is with the stock version of gdal2tiles

  Traceback (most recent call last):
   File "C:\OSGeo4W\\apps\gdal-16\bin\gdal2tiles.py", line 42, in <module>
     import gdal
   File "C:\OSGeo4W\apps\gdal-16\pymod\gdal.py", line 2, in <module>
     from osgeo.gdal import deprecation_warn
   File "C:\OSGeo4W\apps\gdal-16\pymod\osgeo\gdal.py", line 7, in <module>
     import _gdal
ImportError: DLL load failed: The specified module could not be found.

Now I have  a heavily hacked version of this and would really like to 
get it going properly.
1/ What I am missing getting it going under Gdal-16?
2/ what needs to happen to gdal2tiles.py in general terms to fit it into 
the 1.9.3 framework?
Happy to hack.


Notice: This email and any attachments are confidential.
If received in error please destroy and immediately notify us.
Do not copy or disclose the contents.


From p.scadden at gns.cri.nz  Sun Jun  9 21:57:24 2013
From: p.scadden at gns.cri.nz (Phil Scadden)
Date: Mon, 10 Jun 2013 16:57:24 +1200
Subject: [gdal-dev] Belay that comment gdal2tiles.
Message-ID: <51B55CB4.8020803@gns.cri.nz>

Found it was working in the 1.9.3 okay, if I ignored all the 
instructions about using 16. Merging my stuff.

Notice: This email and any attachments are confidential.
If received in error please destroy and immediately notify us.
Do not copy or disclose the contents.


From adiba.nizami at gmail.com  Sun Jun  9 23:37:51 2013
From: adiba.nizami at gmail.com (adi_khan)
Date: Sun, 9 Jun 2013 23:37:51 -0700 (PDT)
Subject: [gdal-dev] geographic vs projected coordinate system
Message-ID: <1370846271748-5059024.post@n6.nabble.com>

Hi all, 
I am a novice to geospatialrelated terminology...and going through some
literature to understand better.. 
Could someone please tell difference btwn geographic and projected
coordinate system... 
I mean, I am not able to imagine how I can  see an (satellite) image on
screen ( flat surface) and say it is in geographic cordinate system (GCS)... 
as GCS means lat/long and I see it on a flat screen, so should it not be 
projected if I am seeing it on a flat screen? And if it is projected, then
how can it be in GCS ? 

My doubt, perhaps , may sound very trivial for all the experts out there but
I will really appreciate anything that will aid my understanding. 

Thanks. 



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/geographic-vs-projected-coordinate-system-tp5059024.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From andre+joost at nurfuerspam.de  Mon Jun 10 08:44:41 2013
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Mon, 10 Jun 2013 17:44:41 +0200
Subject: [gdal-dev] geographic vs projected coordinate system
In-Reply-To: <1370846271748-5059024.post@n6.nabble.com>
References: <1370846271748-5059024.post@n6.nabble.com>
Message-ID: <kp4sb6$e7u$1@ger.gmane.org>

Am 10.06.2013 08:37, schrieb adi_khan:
> Hi all,
> I am a novice to geospatialrelated terminology...and going through some
> literature to understand better..
> Could someone please tell difference btwn geographic and projected
> coordinate system...
> I mean, I am not able to imagine how I can  see an (satellite) image on
> screen ( flat surface) and say it is in geographic cordinate system (GCS)...
> as GCS means lat/long and I see it on a flat screen, so should it not be
> projected if I am seeing it on a flat screen? And if it is projected, then
> how can it be in GCS ?
>

What you see on the screen, is in fact projected, but with a simple one 
degree = one unit on the screen projection. The extent of that map is 
still +/- 180?/90?

This "projection" has none of the benefits usual projection have, like 
true areas, true angles or true lenghts.

HTH,
Andr? Joost



From warmerdam at pobox.com  Mon Jun 10 09:08:30 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 10 Jun 2013 09:08:30 -0700
Subject: [gdal-dev] cannot access GFT recently via QGIS and OGR
In-Reply-To: <CAPzumuEnq0bFBUEeCOhC33q2uaWdEgUWb0N3Q1MEQ8H6D91ecw@mail.gmail.com>
References: <CAPzumuEnq0bFBUEeCOhC33q2uaWdEgUWb0N3Q1MEQ8H6D91ecw@mail.gmail.com>
Message-ID: <CA+YzLBcnJ81ZtSEqXn-irPEWhiprxMR_zwx3yK1ZXM_ivOnPDQ@mail.gmail.com>

Maning,

Could you try GDAL 1.10.0 which has an upgraded GFT (Google Fusion Tables)
driver.  There were some changes in how the login stuff worked in January
or so on the google side.

Make sure you read over the format driver page for details of usage.

  http://www.gdal.org/ogr/drv_gft.html

Best regards,

Frank
On Jun 9, 2013 7:54 PM, "maning sambale" <emmanuel.sambale at gmail.com> wrote:

> I have a vrt with the following contents:
> (email and password redacted)
>
> <OGRVRTDataSource>
>   <OGRVRTLayer name="data">
>     <SrcDataSource>
>       GFT:email=redacted password=redacted
>     </SrcDataSource>
>     <SrcLayer>data</SrcLayer>
> </OGRVRTLayer>
>
> This vrt used to work and I can view and edit the data.  But recently,
> I got this error.
>
> ogrinfo -ro census.vrt
> INFO: Open of `census.vrt'
>       using driver `VRT' successful.
> ERROR 1: HTTP error code : 400
> ERROR 1: HTML error page returned by server
> 1: data
>
> Using GDAL 1.9.2, released 2012/10/08
>
> --
> cheers,
> maning
> ------------------------------------------------------
> "Freedom is still the most radical idea of all" -N.Branden
> wiki: http://esambale.wikispaces.com/
> blog: http://epsg4253.wordpress.com/
> ------------------------------------------------------
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130610/139203b4/attachment.html>

From jrepetto at free.fr  Mon Jun 10 09:06:01 2013
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon, 10 Jun 2013 18:06:01 +0200
Subject: [gdal-dev] geographic vs projected coordinate system
In-Reply-To: <kp4sb6$e7u$1@ger.gmane.org>
References: <1370846271748-5059024.post@n6.nabble.com>
	<kp4sb6$e7u$1@ger.gmane.org>
Message-ID: <51B5F969.6070705@free.fr>

Le 10/06/2013 17:44, Andre Joost a ?crit :
>
> What you see on the screen, is in fact projected, but with a simple one
> degree = one unit on the screen projection. The extent of that map is
> still +/- 180?/90?

This projection is the same as "Plate carr?e" (EPSG:32663), except that 
the units are degrees instead of meters.


From Anthony.W.Baker at boeing.com  Mon Jun 10 09:13:47 2013
From: Anthony.W.Baker at boeing.com (Baker, Anthony W)
Date: Mon, 10 Jun 2013 16:13:47 +0000
Subject: [gdal-dev] NITF Chip
Message-ID: <1106E45778F04E4D94505A07DD74991202DA9A@XCH-PHX-403.sw.nos.boeing.com>

I have a NITF file which I can read fine with GDAL.  The issue that it is a chip and using the transformation to determine geolocations fails (for example finding the chip's four corners).  Instead of placing a point based on the chip, it places it based on the whole image.  I can read the metadata and see that the RPC metadata contains the chip offset:
RPC Metadata:
  LINE_OFF=3276
  LINE_SCALE=3276
  SAMP_OFF=2538
  SAMP_SCALE=2538
  LONG_OFF=-106.8927
  LONG_SCALE=0.0542
  LAT_OFF=32.3084
  LAT_SCALE=0.0593
  HEIGHT_OFF=1229
  HEIGHT_SCALE=1214

I am tempted to use the LINE_OFF and SAMP_OFF to make the adjustments to properly get the boundary.  I believe this is only a partial solution (not generic enough) and will just give further problems as I get other NITF chips.  Would someone help me with the proper way of handling the chip transformation?

Thank you,

Anthony
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130610/8d777cd6/attachment-0001.html>

From Anthony.W.Baker at boeing.com  Mon Jun 10 13:43:52 2013
From: Anthony.W.Baker at boeing.com (Baker, Anthony W)
Date: Mon, 10 Jun 2013 20:43:52 +0000
Subject: [gdal-dev] NITF Chip
In-Reply-To: <1106E45778F04E4D94505A07DD74991202DA9A@XCH-PHX-403.sw.nos.boeing.com>
References: <1106E45778F04E4D94505A07DD74991202DA9A@XCH-PHX-403.sw.nos.boeing.com>
Message-ID: <1106E45778F04E4D94505A07DD74991202DB16@XCH-PHX-403.sw.nos.boeing.com>

One possible answer seems to be to use ICHIP_OP_**_** and  ICHIP_FI_**_**

Using the _OP_ metadata I form a row-wise 2x2 projection matrix with _12 - _11 as one row and _21 - _11 as the other.  With _FI_ I form a column-wise 2x2 projection matrix with _12 - _11 and _21 - _11 as the columns.   Applying these matrices and the two translations in the right order seems to give ok results.  If I combine this transform with the geoTransform (matrix multi and trans) I seem to get ok results.  The results are different by a little from ArcMap's raster inclusion but close.  Code is included below to show the transforms that I have done.  Does this seem right?

double fi11r = strtod(poDataset->GetMetadataItem("ICHIP_FI_ROW_11", NULL), NULL);
double fi11c = strtod(poDataset->GetMetadataItem("ICHIP_FI_COL_11", NULL), NULL);
double fi12r = strtod(poDataset->GetMetadataItem("ICHIP_FI_ROW_12", NULL), NULL);
double fi12c = strtod(poDataset->GetMetadataItem("ICHIP_FI_COL_12", NULL), NULL);
double fi21r = strtod(poDataset->GetMetadataItem("ICHIP_FI_ROW_21", NULL), NULL);
double fi21c = strtod(poDataset->GetMetadataItem("ICHIP_FI_COL_21", NULL), NULL);
double op11r = strtod(poDataset->GetMetadataItem("ICHIP_OP_ROW_11", NULL), NULL);
double op11c = strtod(poDataset->GetMetadataItem("ICHIP_OP_COL_11", NULL), NULL);
double op12r = strtod(poDataset->GetMetadataItem("ICHIP_OP_ROW_12", NULL), NULL);
double op12c = strtod(poDataset->GetMetadataItem("ICHIP_OP_COL_12", NULL), NULL);
double op21r = strtod(poDataset->GetMetadataItem("ICHIP_OP_ROW_21", NULL), NULL);
double op21c = strtod(poDataset->GetMetadataItem("ICHIP_OP_COL_21", NULL), NULL);

//Column matrix
double pr11, pr12, pr22, pr21;
double npr1, npr2;
npr1 = sqrt((fi12c - fi11c)*(fi12c - fi11c) + (fi12r - fi11r)*(fi12r - fi11r));
npr2 = sqrt((fi21c - fi11c)*(fi21c - fi11c) + (fi21r - fi11r)*(fi21r - fi11r));
pr11 = (fi12c - fi11c)/npr1;
pr12 = (fi21c - fi11c)/npr2;
pr21 = (fi12r - fi11r)/npr1;
pr22 = (fi21r - fi11r)/npr2;

//Row matrix
double br11, br12, br22, br21;
double nbr1, nbr2;
nbr1 = sqrt((op12c - op11c)*(op12c - op11c) + (op12r - op11r)*(op12r - op11r));
nbr2 = sqrt((op21c - op11c)*(op21c - op11c) + (op21r - op11r)*(op21r - op11r));
br11 = (op12c - op11c)/nbr1;
br21 = (op21c - op11c)/nbr2;
br12 = (op12r - op11r)/nbr1;
br22 = (op21r - op11r)/nbr2;

//Transform
double m11, m12, m22, m21;
m11 = pr11*br11 + pr12*br21;
m21 = pr21*br11 + pr22*br21;
m12 = pr11*br12 + pr12*br22;
m22 = pr21*br12 + pr22*br22;

//Compute the translation factor
double a1, a2;
a1 = -(m11*op11c + m12*op11r) + fi11c;
a2 = -(m21*op11c + m22*op11r) + fi11r;

ST[0] = a1;
ST[3] = a2;
ST[1] = m11;
ST[2] = m12;
ST[4] = m21;
ST[5] = m22;



From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Baker, Anthony W
Sent: Monday, June 10, 2013 12:14 PM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] NITF Chip

I have a NITF file which I can read fine with GDAL.  The issue that it is a chip and using the transformation to determine geolocations fails (for example finding the chip's four corners).  Instead of placing a point based on the chip, it places it based on the whole image.  I can read the metadata and see that the RPC metadata contains the chip offset:
RPC Metadata:
  LINE_OFF=3276
  LINE_SCALE=3276
  SAMP_OFF=2538
  SAMP_SCALE=2538
  LONG_OFF=-106.8927
  LONG_SCALE=0.0542
  LAT_OFF=32.3084
  LAT_SCALE=0.0593
  HEIGHT_OFF=1229
  HEIGHT_SCALE=1214

I am tempted to use the LINE_OFF and SAMP_OFF to make the adjustments to properly get the boundary.  I believe this is only a partial solution (not generic enough) and will just give further problems as I get other NITF chips.  Would someone help me with the proper way of handling the chip transformation?

Thank you,

Anthony
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130610/eb8a97eb/attachment.html>

From p.scadden at gns.cri.nz  Mon Jun 10 14:22:57 2013
From: p.scadden at gns.cri.nz (Phil Scadden)
Date: Tue, 11 Jun 2013 09:22:57 +1200
Subject: [gdal-dev] geographic vs projected coordinate system
In-Reply-To: <1370846271748-5059024.post@n6.nabble.com>
References: <1370846271748-5059024.post@n6.nabble.com>
Message-ID: <51B643B1.9060101@gns.cri.nz>

You are correct in that imaging a round earth on a flat screen must 
involve projection. However, there is no one projection that is fit for 
all purposes so it is pretty normal to store data sets in GCS and 
project on-the-fly into whatever projection is fit for purpose. To 
complicate matters, describing the position of a point on the planet in 
lat/long means also defining a figure for the ellipsoid which is still 
an approximation for the real object, and furthermore our planet is 
dynamic so points move over time. This means there is no one, true GCS 
though for most purposes the WGS84 framework with a suitable time 
reference is new measurements. However historical data is likely to be 
measured on a local datum with earlier best-guess figure of earth but I 
digress.

There is nothing to stop you however from treating lat/long as 
rectangular coordinates and using that as a "projection". The projection 
figure is Plate Carree and this has no redeeming cartographic features 
as a projection. It is however, obviously exceedingly easy to calculate 
so  could be regarded as "programmer" or "computer resource" friendly. 
For a quick look at some data it okay, providing you understand what you 
are looking at.


Hi all, I am a novice to geospatialrelated terminology...and going 
through some literature to understand better.. Could someone please tell 
difference btwn geographic and projected coordinate system... I mean, I 
am not able to imagine how I can see an (satellite) image on screen ( 
flat surface) and say it is in geographic cordinate system (GCS)... as 
GCS means lat/long and I see it on a flat screen, so should it not be 
projected if I am seeing it on a flat screen? And if it is projected, 
then how can it be in GCS ? My doubt, perhaps , may sound very trivial 
for all the experts out there but I will really appreciate anything that 
will aid my understanding. Thanks. -- View this message in context: 
http://osgeo-org.1560.x6.nabble.com/geographic-vs-projected-coordinate-system-tp5059024.html 
Sent from the GDAL - Dev mailing list archive at Nabble.com. 
_______________________________________________ gdal-dev mailing list 
gdal-dev at lists.osgeo.org http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Phil Scadden, Senior Scientist GNS Science Ltd 764 Cumberland St, 
Private Bag 1930, Dunedin, New Zealand Ph +64 3 4799663, fax +64 3 477 5232

Notice: This email and any attachments are confidential.
If received in error please destroy and immediately notify us.
Do not copy or disclose the contents.


From even.rouault at mines-paris.org  Mon Jun 10 16:30:13 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 11 Jun 2013 01:30:13 +0200
Subject: [gdal-dev] NITF Chip
In-Reply-To: <1106E45778F04E4D94505A07DD74991202DA9A@XCH-PHX-403.sw.nos.boeing.com>
References: <1106E45778F04E4D94505A07DD74991202DA9A@XCH-PHX-403.sw.nos.boeing.com>
Message-ID: <201306110130.13481.even.rouault@mines-paris.org>

Le lundi 10 juin 2013 18:13:47, Baker, Anthony W a ?crit :
> I have a NITF file which I can read fine with GDAL.  The issue that it is a
> chip and using the transformation to determine geolocations fails (for
> example finding the chip's four corners).  Instead of placing a point
> based on the chip, it places it based on the whole image.  I can read the
> metadata and see that the RPC metadata contains the chip offset: RPC
> Metadata:
>   LINE_OFF=3276
>   LINE_SCALE=3276
>   SAMP_OFF=2538
>   SAMP_SCALE=2538
>   LONG_OFF=-106.8927
>   LONG_SCALE=0.0542
>   LAT_OFF=32.3084
>   LAT_SCALE=0.0593
>   HEIGHT_OFF=1229
>   HEIGHT_SCALE=1214
> 
> I am tempted to use the LINE_OFF and SAMP_OFF to make the adjustments to
> properly get the boundary.  I believe this is only a partial solution (not
> generic enough) and will just give further problems as I get other NITF
> chips.  Would someone help me with the proper way of handling the chip
> transformation?

Anthony,

I'm not sure from your above text how you tried to make use of the RPC 
metadata. Did you try "gdalwarp -rpc the.nitf out.tif" ?

Best regards,

Even

> 
> Thank you,
> 
> Anthony

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jesse at gaiagps.com  Mon Jun 10 17:17:28 2013
From: jesse at gaiagps.com (Jesse Crocker)
Date: Mon, 10 Jun 2013 17:17:28 -0700
Subject: [gdal-dev] Trouble with GDALAutoCreateWarpedVRT and No data values
Message-ID: <CBE60C69-F31D-4E24-9A67-E583EE197AA9@gaiagps.com>

Hello List,
Im having some trouble with the C api, that I assume is do my failure to understand some part of it.
What I'm trying to do: Load a BSB raster file, apply a cutline to the file, and warp it into a north-up projection.  Im doing additional transformations to it after that, but right now I'm stuck trying to get areas outside of the cutline to be transparent instead of black.

An abbreviated version of what I'm doing now:

    sourceDataset = GDALOpen(imageFilePath.UTF8String, GA_ReadOnly );
  GDALWarpOptions *warpOptions = GDALCreateWarpOptions();
  OGRGeometryH clipGeometry;
    OGRErr polyStatus = OGR_G_CreateFromWkt(&pszWkt, spatialRef, &clipGeometry);
    if(polyStatus == CE_None) {
      warpOptions->hCutline = clipGeometry;
    } 
  warpedDataset = GDALAutoCreateWarpedVRT(sourceDataset,
                                          NULL, 
                                          NULL, 
                                          GRA_NearestNeighbour,
                                          0.0,
                                          warpOptions);

The source data does not have a no data value, i've tried setting one and adding an entry to the color palette before calling GDALAutoCreateWarpedVRT, and settings the same value in the VRT but that had no effect. 

Any suggestions for the right way to do this?  Am I just setting the no_data value incorrectly, or is this a situation that requires a mask band?  And if it does require a mask band is there an easy way to create that from a cutline?

Thanks,
Jesse


From kyle at pobox.com  Mon Jun 10 18:20:31 2013
From: kyle at pobox.com (Kyle Shannon)
Date: Mon, 10 Jun 2013 19:20:31 -0600
Subject: [gdal-dev] Trouble with GDALAutoCreateWarpedVRT and No data
	values
In-Reply-To: <CBE60C69-F31D-4E24-9A67-E583EE197AA9@gaiagps.com>
References: <CBE60C69-F31D-4E24-9A67-E583EE197AA9@gaiagps.com>
Message-ID: <CAJ0mEz2A4A5AikMbGUdnegDoCpRAmj7fWebn3xmbPx8Gnh0NCQ@mail.gmail.com>

Jesse,

i believe I've run into this before.  The GDALWarpOptions has a
member, padfDstNoDataReal.  It is an array  of doubles nBands in size.
 Create that, fill it in with your no data values and set the Warp
Option INIT_DEST to NO_DATA:

....
        psWarpOptions = GDALCreateWarpOptions();

        int nBandCount = srcDS->GetRasterCount();

        psWarpOptions->nBandCount = nBandCount;

        psWarpOptions->padfDstNoDataReal =
            (double*) CPLMalloc( sizeof( double ) * nBandCount );

       double dfNoData = -9999.0;

       for( int b = 0;b < srcDS->GetRasterCount();b++ )
       {
            psWarpOptions->padfDstNoDataReal[b] = dfNoData;
        }

        psWarpOptions->papszWarpOptions =
            CSLSetNameValue( psWarpOptions->papszWarpOptions,
                            "INIT_DEST", "NO_DATA" );

        wrpDS = (GDALDataset*) GDALAutoCreateWarpedVRT( srcDS, pszSrcWkt,
                                                        pszDstWkt,
                                                        GRA_NearestNeighbour,
                                                        1.0, psWarpOptions );

...

That seemed to work for me, hopefully it puts you on the right track.

kss

On Mon, Jun 10, 2013 at 6:17 PM, Jesse Crocker <jesse at gaiagps.com> wrote:
> Hello List,
> Im having some trouble with the C api, that I assume is do my failure to understand some part of it.
> What I'm trying to do: Load a BSB raster file, apply a cutline to the file, and warp it into a north-up projection.  Im doing additional transformations to it after that, but right now I'm stuck trying to get areas outside of the cutline to be transparent instead of black.
>
> An abbreviated version of what I'm doing now:
>
>     sourceDataset = GDALOpen(imageFilePath.UTF8String, GA_ReadOnly );
>   GDALWarpOptions *warpOptions = GDALCreateWarpOptions();
>   OGRGeometryH clipGeometry;
>     OGRErr polyStatus = OGR_G_CreateFromWkt(&pszWkt, spatialRef, &clipGeometry);
>     if(polyStatus == CE_None) {
>       warpOptions->hCutline = clipGeometry;
>     }
>   warpedDataset = GDALAutoCreateWarpedVRT(sourceDataset,
>                                           NULL,
>                                           NULL,
>                                           GRA_NearestNeighbour,
>                                           0.0,
>                                           warpOptions);
>
> The source data does not have a no data value, i've tried setting one and adding an entry to the color palette before calling GDALAutoCreateWarpedVRT, and settings the same value in the VRT but that had no effect.
>
> Any suggestions for the right way to do this?  Am I just setting the no_data value incorrectly, or is this a situation that requires a mask band?  And if it does require a mask band is there an easy way to create that from a cutline?
>
> Thanks,
> Jesse
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From feumar at shaw.ca  Mon Jun 10 23:33:28 2013
From: feumar at shaw.ca (Martin Feuchtwanger)
Date: Mon, 10 Jun 2013 23:33:28 -0700
Subject: [gdal-dev] geographic vs projected coordinate system
In-Reply-To: <51B643B1.9060101@gns.cri.nz>
References: <1370846271748-5059024.post@n6.nabble.com>
	<51B643B1.9060101@gns.cri.nz>
Message-ID: <51B6C4B8.7040304@shaw.ca>

Some of Phil's and Andre's words require correction:

Just because it is so simple mathematically, the Plate Carree (or 
equi-rectangular) projection is no less of a projection than others. 
Like /all /projections, it has its distortions and yet it preserves some 
geometrics. It is in the class known as "equidistant" projections. In 
this particular case, scale is preserved along the equator /and/ at all 
points on the map in a direction perpendicular to the equator. (Pretty 
impressive for something so simple, eh?)

Martin Feuchtwanger  feumar at shaw.ca  604-254-0361
http://members.shaw.ca/geomatics.developer

On 10/06/2013 2:22 PM, Phil Scadden wrote:
> There is nothing to stop you however from treating lat/long as 
> rectangular coordinates and using that as a "projection". The 
> projection figure is Plate Carree and /this has no redeeming 
> cartographic features as a projection/.
On 10/06/2013 8:44 AM, Andre Joost wrote:
> What you see on the screen, is in fact projected, but with a simple 
> one degree = one unit on the screen projection. The extent of that map 
> is still ? 180?/90?
>
> /This "projection" has none of the benefits usual projection have, 
> like true areas, true angles or true lenghts. /
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130610/b487960a/attachment.html>

From Anthony.W.Baker at boeing.com  Tue Jun 11 04:16:33 2013
From: Anthony.W.Baker at boeing.com (Baker, Anthony W)
Date: Tue, 11 Jun 2013 11:16:33 +0000
Subject: [gdal-dev] NITF Chip
In-Reply-To: <201306110130.13481.even.rouault@mines-paris.org>
References: <1106E45778F04E4D94505A07DD74991202DA9A@XCH-PHX-403.sw.nos.boeing.com>
	<201306110130.13481.even.rouault@mines-paris.org>
Message-ID: <1106E45778F04E4D94505A07DD74991202DC3A@XCH-PHX-403.sw.nos.boeing.com>

Yes, after I sent it I relieved that I was wrong about the RPC.  I did follow up with what I think is a better way although I am not sure it works perfectly.  For example ArcMap's visualization does not line up with my points :-S  Would love to hear back what a better way would be.

Anthony


From emmanuel.sambale at gmail.com  Tue Jun 11 04:57:05 2013
From: emmanuel.sambale at gmail.com (maning sambale)
Date: Tue, 11 Jun 2013 19:57:05 +0800
Subject: [gdal-dev] cannot access GFT recently via QGIS and OGR
In-Reply-To: <CA+YzLBcnJ81ZtSEqXn-irPEWhiprxMR_zwx3yK1ZXM_ivOnPDQ@mail.gmail.com>
References: <CAPzumuEnq0bFBUEeCOhC33q2uaWdEgUWb0N3Q1MEQ8H6D91ecw@mail.gmail.com>
	<CA+YzLBcnJ81ZtSEqXn-irPEWhiprxMR_zwx3yK1ZXM_ivOnPDQ@mail.gmail.com>
Message-ID: <CAPzumuFQwvN-nTy3p4uEyYj5kbkypf+G9K4mUsnsxUpqj88NLw@mail.gmail.com>

Thanks Frank.  I did the following:

1. Installed GDAL 1.10.0, released 2013/04/24

2. Run authorization.

$ gdal_auth.py
Authorization requested for scope:
https://www.googleapis.com/auth/fusiontables

Please login and authorize access in web browser...

Enter authorization token:
sometoken
Refresh Token:anothertoken

Consider setting a configuration option like:
GFT_REFRESH_TOKEN=anothertoken

3. Running ogrinfo

ogrinfo -ro "GFT:email=xxx at gmail.com password=xxx tables=data
GFT_REFRESH_TOKEN=anothertoken"
INFO: Open of `GFT:email=xxx at gmail.com password=xxx tables=data
GFT_REFRESH_TOKEN=anothertoken'
      using driver `GFT' successful.
1: dataERROR 1: HTTP error code : 400
ERROR 1: HTML error page returned by server



On Tue, Jun 11, 2013 at 12:08 AM, Frank Warmerdam <warmerdam at pobox.com> wrote:
> Maning,
>
> Could you try GDAL 1.10.0 which has an upgraded GFT (Google Fusion Tables)
> driver.  There were some changes in how the login stuff worked in January or
> so on the google side.
>
> Make sure you read over the format driver page for details of usage.
>
>   http://www.gdal.org/ogr/drv_gft.html
>
> Best regards,
>
> Frank
>
> On Jun 9, 2013 7:54 PM, "maning sambale" <emmanuel.sambale at gmail.com> wrote:
>>
>> I have a vrt with the following contents:
>> (email and password redacted)
>>
>> <OGRVRTDataSource>
>>   <OGRVRTLayer name="data">
>>     <SrcDataSource>
>>       GFT:email=redacted password=redacted
>>     </SrcDataSource>
>>     <SrcLayer>data</SrcLayer>
>> </OGRVRTLayer>
>>
>> This vrt used to work and I can view and edit the data.  But recently,
>> I got this error.
>>
>> ogrinfo -ro census.vrt
>> INFO: Open of `census.vrt'
>>       using driver `VRT' successful.
>> ERROR 1: HTTP error code : 400
>> ERROR 1: HTML error page returned by server
>> 1: data
>>
>> Using GDAL 1.9.2, released 2012/10/08
>>
>> --
>> cheers,
>> maning
>> ------------------------------------------------------
>> "Freedom is still the most radical idea of all" -N.Branden
>> wiki: http://esambale.wikispaces.com/
>> blog: http://epsg4253.wordpress.com/
>> ------------------------------------------------------
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
cheers,
maning
------------------------------------------------------
"Freedom is still the most radical idea of all" -N.Branden
wiki: http://esambale.wikispaces.com/
blog: http://epsg4253.wordpress.com/
------------------------------------------------------

From simonaoancea.so at gmail.com  Wed Jun 12 03:54:05 2013
From: simonaoancea.so at gmail.com (Simona Oancea)
Date: Wed, 12 Jun 2013 12:54:05 +0200
Subject: [gdal-dev] gdalwarp swath satellite data issue using gdal1.6.0
Message-ID: <CAD=NWrvi34N7OLFNt3kmS=D8+=dJRUkKWGCentgDWNXc1SDiHg@mail.gmail.com>

Dear List,



I would like to reproject METOP SST data (satellite data which are swath
data granules stored in the netcdf file) with GDAL geolocation arrays.

I have run the followings commands using Gdal 1.6.0:



1. Here I extract the subsetdata. The same command is used for latitude and
longitude data

gdal_translate -a_srs EPSG:4326 -a_ullr ${granule[@]} -of GTiff -co
"compress=lzw" ${inputdata} ${outputdata}

2. build VRT file for every data subset extracted  (SST , lat and lon)
using a command like that:

gdalbuildvrt ${fileSSTVrt} ${fileSSTRawData}

3.Then reproject the SST raw data

gdalwarp -t_srs '+proj=latlong +datum=WGS84' -te ${te_arg_granule[@]} -tr
${ps} ${ps} -srcnodata ${nodataValue} -dstnodata ${nodataValue} -r near -of
GTiff -co "compress=lzw" -geoloc ${fileSSTVrt} ${fileSSTReproject}

 The geolocation arrays have the same size as the raw data (SST data).

Using geolocation arrays it seems to work well but we found the resulting
image quality not so good when we compare it with one obtained  by using
ENVI option, Georeference from INPUT geometry with the same method of
resampling: nearest neighbor.



I?m wondering if this might be due to the gdal version which we used it
(1.6.0) and that is improved in the later version of gdal software or it is
something wrong in the way I used the commands mentioned above.



Please, if someone has experienced the same problem, I would like to know
how he/she did to improve the results.



Thank you in advance

Simona



Joint Research Centre of the European Commission
MONDE Action - GEM/IES
v. E. Fermi 2749, 21020 Ispra (VA) - Italy
+39.0332.785548
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130612/298b322c/attachment.html>

From grb at skogoglandskap.no  Wed Jun 12 10:50:29 2013
From: grb at skogoglandskap.no (Graeme B. Bell)
Date: Wed, 12 Jun 2013 17:50:29 +0000
Subject: [gdal-dev] bugs: 2 examples of incorrect behaviour by
 gdal_rasterize with zero-polygon valid query result.
Message-ID: <65A475FA-E7D7-4DAC-84A0-8B0D13F0D8D6@skogoglandskap.no>


Summary: 

I noticed that gdal_rasterize invents data values instead of burning nodata values, incorrectly, in what is probably a common situation - a valid query returning geometry columns but zero polygon rows. 

Command line output suggests that nothing is being done, yet a GeoTIFF with data values is silently rendered in the background. 


Example:

Imagine we have a map whose extents are defined from 0 to 1000 in the X axis and 0 to 1000 in the Y axis as geometry in a postgres database. 

Situation 1 - rendering off-map with polygon rows in the query result.

Specify gdal_rasterize with -a_nodata 255, and -te to burn a square area with extents 2000 to 3000 in x and y axis, i.e rasterizing an off-map area. We use PG: and -sql to specify the data layer to use. The layer returned contains 1000 polygons. 

Command line output:
0...10...20...30...40...50...60...70...80...90...100 - done.
Result: A valid GeoTIFF raster is burnt with nodata values 255 everywhere which are marked as nodata.

This is correct behaviour.


Situation 2 - rendering off-map without polygon rows in the query result.

As before, but now we use PG: and -sql to specify a datalayer that does not contain any polygons (e.g. perhaps clipping the original map with a bounding box that describes the area being rendered). Everything else, including the nodata value, remains the same. PostGIS returns columns correctly but there are no examples of polygons.

Command line output:
(nothing)

Result: A valid GeoTIFF raster is burnt with data values 0 everywhere. 

This is wrong behaviour. 


Expected result: 

I would expect the semantics of gdal_rasterize in these two situations to be the same. The correct raster value for all pixels in the extent being rasterized is the nodata value (whether the polygons are clipped by postgis or by gdal_rasterize) since there is no data. 

Setting a '0' value is a bug. It is a data value, rather than nodata. The SQL query is returning correctly (e.g. it produces column names), so the fault lies with gdal_rasterize in how it renders that query result.

Failing to produce command line output is also a bug, especially considering that a valid GeoTIFF file containing data values is produced silently. 


Thoughts?

Graeme.

From grb at skogoglandskap.no  Wed Jun 12 10:58:20 2013
From: grb at skogoglandskap.no (Graeme B. Bell)
Date: Wed, 12 Jun 2013 17:58:20 +0000
Subject: [gdal-dev] bugs: 2 examples of incorrect behaviour by
 gdal_rasterize with zero-polygon valid query result.
In-Reply-To: <65A475FA-E7D7-4DAC-84A0-8B0D13F0D8D6@skogoglandskap.no>
References: <65A475FA-E7D7-4DAC-84A0-8B0D13F0D8D6@skogoglandskap.no>
Message-ID: <C2A4DF91-C043-4F9A-BCA6-465FCA53C248@skogoglandskap.no>

Also:

(using -init 255 will produce a TIFF with suitable nodata values in the second scenario I described, as a workaround. 

However, gdal_rasterize still does not produce correct command line output in this situation, and also it should not be necessary for users to manually add a -init option and manually synchronise the value with the -a_nodata value to ensure valid output from gdal_rasterize)

On Jun 12, 2013, at 7:50 PM, Graeme Bell <grb at skogoglandskap.no> wrote:

> 
> Summary: 
> 
> I noticed that gdal_rasterize invents data values instead of burning nodata values, incorrectly, in what is probably a common situation - a valid query returning geometry columns but zero polygon rows. 
> 
> Command line output suggests that nothing is being done, yet a GeoTIFF with data values is silently rendered in the background. 

From grb at skogoglandskap.no  Wed Jun 12 11:00:00 2013
From: grb at skogoglandskap.no (Graeme B. Bell)
Date: Wed, 12 Jun 2013 18:00:00 +0000
Subject: [gdal-dev] bugs: 2 examples of incorrect behaviour by
 gdal_rasterize with zero-polygon valid query result.
In-Reply-To: <C2A4DF91-C043-4F9A-BCA6-465FCA53C248@skogoglandskap.no>
References: <65A475FA-E7D7-4DAC-84A0-8B0D13F0D8D6@skogoglandskap.no>
	<C2A4DF91-C043-4F9A-BCA6-465FCA53C248@skogoglandskap.no>
Message-ID: <E93F1E22-500C-4116-9559-2DCCDDC9A07B@skogoglandskap.no>

Program version:

gdal_rasterize --version
GDAL 1.10.0, released 2013/04/24

Apologies for spreading the information across 3 emails. 

From even.rouault at mines-paris.org  Wed Jun 12 11:23:23 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 12 Jun 2013 20:23:23 +0200
Subject: [gdal-dev] bugs: 2 examples of incorrect behaviour by
	gdal_rasterize with zero-polygon valid query result.
In-Reply-To: <C2A4DF91-C043-4F9A-BCA6-465FCA53C248@skogoglandskap.no>
References: <65A475FA-E7D7-4DAC-84A0-8B0D13F0D8D6@skogoglandskap.no>
	<C2A4DF91-C043-4F9A-BCA6-465FCA53C248@skogoglandskap.no>
Message-ID: <201306122023.24057.even.rouault@mines-paris.org>

Le mercredi 12 juin 2013 19:58:20, Graeme B. Bell a ?crit :
> Also:
> 
> (using -init 255 will produce a TIFF with suitable nodata values in the
> second scenario I described, as a workaround.
> 
> However, gdal_rasterize still does not produce correct command line output
> in this situation, and also it should not be necessary for users to
> manually add a -init option and manually synchronise the value with the
> -a_nodata value to ensure valid output from gdal_rasterize)

The fact that the first example inits the output TIFF to the nodata value is 
specific to the working of the GeoTIFF driver, that returns non-instanciated 
blocks initialized to the nodata value. With other output drivers, you could 
also get a raster initialized to 0 instead of the nodata value. If you really 
want to initialize the raster with a particular value in a reliable way, 
always use -init.

I've pushed a fix in the dev version so that the progress bar appears in the 
second case (SQL with 0 resulting rows).

> 
> On Jun 12, 2013, at 7:50 PM, Graeme Bell <grb at skogoglandskap.no> wrote:
> > Summary:
> > 
> > I noticed that gdal_rasterize invents data values instead of burning
> > nodata values, incorrectly, in what is probably a common situation - a
> > valid query returning geometry columns but zero polygon rows.
> > 
> > Command line output suggests that nothing is being done, yet a GeoTIFF
> > with data values is silently rendered in the background.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From grb at skogoglandskap.no  Wed Jun 12 12:05:42 2013
From: grb at skogoglandskap.no (Graeme B. Bell)
Date: Wed, 12 Jun 2013 19:05:42 +0000
Subject: [gdal-dev] bugs: 2 examples of incorrect behaviour by
 gdal_rasterize with zero-polygon valid query result.
In-Reply-To: <E93F1E22-500C-4116-9559-2DCCDDC9A07B@skogoglandskap.no>
References: <65A475FA-E7D7-4DAC-84A0-8B0D13F0D8D6@skogoglandskap.no>
	<C2A4DF91-C043-4F9A-BCA6-465FCA53C248@skogoglandskap.no>
	<E93F1E22-500C-4116-9559-2DCCDDC9A07B@skogoglandskap.no>
Message-ID: <66058E76-1D9B-4137-B300-246F3E35172D@skogoglandskap.no>

Even,

Thank you for your very kind explanation of a probable origin for the bug I've described.

Regardless of the point in the GDAL infrastructure that the bug is occuring at, it appears that gdal_rasterize (as a whole) is prone to unpredictably writing data values in places where there is no data and when a nodata value has been specified. 

That's semantically wrong.

May I propose a fix for discussion that would work regardless of driver?

If a user specifies -a_nodata X, then -init X should be *implicitly* specified at the same time unless the value is overwritten by a manual -init. 

To me, this makes sense semantically, because all drivers should (by default) output the 'nodata' value in places where there is no data, rather than occasionally inventing their own data values in an arbitrary and unpredictable way. 

Assuming that your explanation is correct - the present situation, where an entire raster extent can change from being full of data values to being completely empty of data values depending on the output driver (and without any warning!) seems very broken. 

Graeme. 

From even.rouault at mines-paris.org  Wed Jun 12 12:19:03 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 12 Jun 2013 21:19:03 +0200
Subject: [gdal-dev] bugs: 2 examples of incorrect behaviour by
	gdal_rasterize with zero-polygon valid query result.
In-Reply-To: <66058E76-1D9B-4137-B300-246F3E35172D@skogoglandskap.no>
References: <65A475FA-E7D7-4DAC-84A0-8B0D13F0D8D6@skogoglandskap.no>
	<E93F1E22-500C-4116-9559-2DCCDDC9A07B@skogoglandskap.no>
	<66058E76-1D9B-4137-B300-246F3E35172D@skogoglandskap.no>
Message-ID: <201306122119.03753.even.rouault@mines-paris.org>

Le mercredi 12 juin 2013 21:05:42, Graeme B. Bell a ?crit :
> Even,
> 
> Thank you for your very kind explanation of a probable origin for the bug
> I've described.
> 
> Regardless of the point in the GDAL infrastructure that the bug is occuring
> at, it appears that gdal_rasterize (as a whole) is prone to unpredictably
> writing data values in places where there is no data and when a nodata
> value has been specified.
> 
> That's semantically wrong.
> 
> May I propose a fix for discussion that would work regardless of driver?
> 
> If a user specifies -a_nodata X, then -init X should be *implicitly*
> specified at the same time unless the value is overwritten by a manual
> -init.
> 
> To me, this makes sense semantically, because all drivers should (by
> default) output the 'nodata' value in places where there is no data,
> rather than occasionally inventing their own data values in an arbitrary
> and unpredictable way.

If you feel strong about that, you can file a ticket in Trac about that. Your 
proposal makes sense, although I suspect there could be use cases where it 
wouldn't be desirable, but I can't find them right now...

> 
> Assuming that your explanation is correct - the present situation, where an
> entire raster extent can change from being full of data values to being
> completely empty of data values depending on the output driver (and
> without any warning!) seems very broken.
> 
> Graeme.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From warmerdam at pobox.com  Wed Jun 12 14:09:33 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 12 Jun 2013 14:09:33 -0700
Subject: [gdal-dev] Motion: Commit Access for Wolf Bergenheim
Message-ID: <CA+YzLBfykrQsFnGUNWP9bC6AVRUYV_rtuy=dHSEn0nXqvSvjkw@mail.gmail.com>

Motion: Extend GDAL/OGR commit access to Wolf Bergenheim.

---

Wolf would like to work on OGR GME support with me, and the easiest place
to collaborate would be in GDAL SVN.  Wolf has been a long time contributor
to GRASS and I would review his early GDAL commits.

I'll start the voting with:

+1 Frank

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130612/1bbd65c6/attachment.html>

From even.rouault at mines-paris.org  Wed Jun 12 14:16:41 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 12 Jun 2013 23:16:41 +0200
Subject: [gdal-dev] Motion: Commit Access for Wolf Bergenheim
In-Reply-To: <CA+YzLBfykrQsFnGUNWP9bC6AVRUYV_rtuy=dHSEn0nXqvSvjkw@mail.gmail.com>
References: <CA+YzLBfykrQsFnGUNWP9bC6AVRUYV_rtuy=dHSEn0nXqvSvjkw@mail.gmail.com>
Message-ID: <201306122316.41060.even.rouault@mines-paris.org>

Le mercredi 12 juin 2013 23:09:33, Frank Warmerdam a ?crit :
> Motion: Extend GDAL/OGR commit access to Wolf Bergenheim.

+1 Even

> 
> Best regards,

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From grb at skogoglandskap.no  Wed Jun 12 14:20:59 2013
From: grb at skogoglandskap.no (Graeme B. Bell)
Date: Wed, 12 Jun 2013 21:20:59 +0000
Subject: [gdal-dev] FW: bugs: 2 examples of incorrect behaviour by
 gdal_rasterize with zero-polygon valid query result.
In-Reply-To: <201306122023.24057.even.rouault@mines-paris.org>
References: <65A475FA-E7D7-4DAC-84A0-8B0D13F0D8D6@skogoglandskap.no>
	<C2A4DF91-C043-4F9A-BCA6-465FCA53C248@skogoglandskap.no>,
	<201306122023.24057.even.rouault@mines-paris.org>
Message-ID: <A159F30E840ED349B2A6EC1DF601839D265021D7@exdb1.ad.skogoglandskap.no>

Even,

Sorry, after I left work I realised that I had forgotten to reply to the last part of your mail.

"I've pushed a fix in the dev version so that the progress bar appears in the
second case (SQL with 0 resulting rows)."

Thank you so much! It's brilliant that you were able to get a fix for that issue into place so quickly. 

I really appreciate you giving your time towards improving GDAL and responding so quickly to the issue I mentioned.

Graeme.

From hobu.inc at gmail.com  Wed Jun 12 14:21:04 2013
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed, 12 Jun 2013 16:21:04 -0500
Subject: [gdal-dev] Motion: Commit Access for Wolf Bergenheim
In-Reply-To: <201306122316.41060.even.rouault@mines-paris.org>
References: <CA+YzLBfykrQsFnGUNWP9bC6AVRUYV_rtuy=dHSEn0nXqvSvjkw@mail.gmail.com>
	<201306122316.41060.even.rouault@mines-paris.org>
Message-ID: <3DD87690-7654-476F-8ED6-7A3C204E7192@gmail.com>


On Jun 12, 2013, at 4:16 PM, Even Rouault <even.rouault at mines-paris.org> wrote:

> Le mercredi 12 juin 2013 23:09:33, Frank Warmerdam a ?crit :
>> Motion: Extend GDAL/OGR commit access to Wolf Bergenheim.
> 
> +1 Even

+1 Howard

From ozdogan at wisc.edu  Wed Jun 12 14:12:47 2013
From: ozdogan at wisc.edu (Mutlu Ozdogan)
Date: Wed, 12 Jun 2013 16:12:47 -0500
Subject: [gdal-dev] Motion: Commit Access for Wolf Bergenheim
In-Reply-To: <CA+YzLBfykrQsFnGUNWP9bC6AVRUYV_rtuy=dHSEn0nXqvSvjkw@mail.gmail.com>
References: <CA+YzLBfykrQsFnGUNWP9bC6AVRUYV_rtuy=dHSEn0nXqvSvjkw@mail.gmail.com>
Message-ID: <51B8E44F.9040904@wisc.edu>

I concur

On 6/12/13 4:09 PM, Frank Warmerdam wrote:
> Motion: Extend GDAL/OGR commit access to Wolf Bergenheim.
>
> ---
>
> Wolf would like to work on OGR GME support with me, and the easiest 
> place to collaborate would be in GDAL SVN.  Wolf has been a long time 
> contributor to GRASS and I would review his early GDAL commits.
>
> I'll start the voting with:
>
> +1 Frank
>
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam at pobox.com <mailto:warmerdam at pobox.com>
> light and sound - activate the windows | http://pobox.com/~warmerdam 
> <http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Software Developer
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Mutlu Ozdogan
Assistant Professor
Center for Sustainability and the Global Environment &
Department of Forest and Wildlife Ecology
University of Wisconsin-Madison USA
phone (608) 262-0873
ozdogan at wisc.edu

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130612/0b0d1339/attachment.html>

From wolf+grass at bergenheim.net  Wed Jun 12 15:20:05 2013
From: wolf+grass at bergenheim.net (Wolf Bergenheim)
Date: Thu, 13 Jun 2013 00:20:05 +0200
Subject: [gdal-dev] Motion: Commit Access for Wolf Bergenheim
In-Reply-To: <51B8E44F.9040904@wisc.edu>
References: <CA+YzLBfykrQsFnGUNWP9bC6AVRUYV_rtuy=dHSEn0nXqvSvjkw@mail.gmail.com>
	<51B8E44F.9040904@wisc.edu>
Message-ID: <CAJhTkW5_TEDrgeYeggAc=uzTXgAXEmVF7jYL1CWBLLRrPZAa6w@mail.gmail.com>

--Wolf on Android
The usual disclaimer about phones goes here.
On 13 Jun 2013 00:12, "Mutlu Ozdogan" <ozdogan at wisc.edu> wrote:

>  I concur
>
> On 6/12/13 4:09 PM, Frank Warmerdam wrote:
>
>  Motion: Extend GDAL/OGR commit access to Wolf Bergenheim.
>
>  ---
>
>  Wolf would like to work on OGR GME support with me, and the easiest
> place to collaborate would be in GDAL SVN.  Wolf has been a long time
> contributor to GRASS and I would review his early GDAL commits.
>
>  I'll start the voting with:
>
>  +1 Frank
>
>  Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Mutlu Ozdogan
> Assistant Professor
> Center for Sustainability and the Global Environment &
> Department of Forest and Wildlife Ecology
> University of Wisconsin-Madison USA
> phone (608) 262-0873  ozdogan at wisc.edu
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130613/29c632d1/attachment-0001.html>

From wolf+grass at bergenheim.net  Wed Jun 12 15:21:29 2013
From: wolf+grass at bergenheim.net (Wolf Bergenheim)
Date: Thu, 13 Jun 2013 00:21:29 +0200
Subject: [gdal-dev] Motion: Commit Access for Wolf Bergenheim
In-Reply-To: <51B8E44F.9040904@wisc.edu>
References: <CA+YzLBfykrQsFnGUNWP9bC6AVRUYV_rtuy=dHSEn0nXqvSvjkw@mail.gmail.com>
	<51B8E44F.9040904@wisc.edu>
Message-ID: <CAJhTkW5h18nvZf3b4LwC06SVbuOGAdG_Rxa8siJKHg_Ehzs3RQ@mail.gmail.com>

Hi all.  I agree to the RFC-3 and agree to following it. Sorry about the
empty email before...

--Wolf on Android
The usual disclaimer about phones goes here.
On 13 Jun 2013 00:12, "Mutlu Ozdogan" <ozdogan at wisc.edu> wrote:

>  I concur
>
> On 6/12/13 4:09 PM, Frank Warmerdam wrote:
>
>  Motion: Extend GDAL/OGR commit access to Wolf Bergenheim.
>
>  ---
>
>  Wolf would like to work on OGR GME support with me, and the easiest
> place to collaborate would be in GDAL SVN.  Wolf has been a long time
> contributor to GRASS and I would review his early GDAL commits.
>
>  I'll start the voting with:
>
>  +1 Frank
>
>  Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Mutlu Ozdogan
> Assistant Professor
> Center for Sustainability and the Global Environment &
> Department of Forest and Wildlife Ecology
> University of Wisconsin-Madison USA
> phone (608) 262-0873  ozdogan at wisc.edu
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130613/37839cf4/attachment.html>

From dmorissette at mapgears.com  Wed Jun 12 18:42:15 2013
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed, 12 Jun 2013 21:42:15 -0400
Subject: [gdal-dev] Motion: Commit Access for Wolf Bergenheim
In-Reply-To: <CA+YzLBfykrQsFnGUNWP9bC6AVRUYV_rtuy=dHSEn0nXqvSvjkw@mail.gmail.com>
References: <CA+YzLBfykrQsFnGUNWP9bC6AVRUYV_rtuy=dHSEn0nXqvSvjkw@mail.gmail.com>
Message-ID: <51B92377.4010102@mapgears.com>

+1

Daniel


On 13-06-12 5:09 PM, Frank Warmerdam wrote:
> Motion: Extend GDAL/OGR commit access to Wolf Bergenheim.
>
> ---
>
> Wolf would like to work on OGR GME support with me, and the easiest
> place to collaborate would be in GDAL SVN.  Wolf has been a long time
> contributor to GRASS and I would review his early GDAL commits.
>
> I'll start the voting with:
>
> +1 Frank
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com <mailto:warmerdam at pobox.com>
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000


From p.scadden at gns.cri.nz  Wed Jun 12 21:29:32 2013
From: p.scadden at gns.cri.nz (Phil Scadden)
Date: Thu, 13 Jun 2013 16:29:32 +1200
Subject: [gdal-dev] Combining quantized png files in gdal2tiles
Message-ID: <51B94AAC.60808@gns.cri.nz>

I was hacking gdal2tiles a bit by running pnqnq of a base tile 
immediately after creating it (I want to be able to run partial updates 
on a TMS which has been pngnq optimised). No problem with that, but 
updating the overview tiles produces issues. It does
writeraster(......,readraster(....)) on those png files and in the 
output, then colour palette is more of grayscale (actually a readscale).

Does GDAL read quantized PNG properly but some intermediary processing 
needed (what??) or is there a problem with the driver?
-- 
Phil Scadden, GNS Science Ltd 764 Cumberland St, Private Bag 1930, 
Dunedin, New Zealand Ph +64 3 4799663, fax +64 3 477 5232

Notice: This email and any attachments are confidential.
If received in error please destroy and immediately notify us.
Do not copy or disclose the contents.


From szekerest at gmail.com  Wed Jun 12 23:35:19 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu, 13 Jun 2013 08:35:19 +0200
Subject: [gdal-dev] Motion: Commit Access for Wolf Bergenheim
In-Reply-To: <CA+YzLBfykrQsFnGUNWP9bC6AVRUYV_rtuy=dHSEn0nXqvSvjkw@mail.gmail.com>
References: <CA+YzLBfykrQsFnGUNWP9bC6AVRUYV_rtuy=dHSEn0nXqvSvjkw@mail.gmail.com>
Message-ID: <CACALY+RY2+PSEVuBAxb4PfX1ujXtY8RbotWzyq1GAr69zdb+vw@mail.gmail.com>

+1

Tamas



2013/6/12 Frank Warmerdam <warmerdam at pobox.com>

> Motion: Extend GDAL/OGR commit access to Wolf Bergenheim.
>
> ---
>
> Wolf would like to work on OGR GME support with me, and the easiest place
> to collaborate would be in GDAL SVN.  Wolf has been a long time contributor
> to GRASS and I would review his early GDAL commits.
>
> I'll start the voting with:
>
> +1 Frank
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130613/2bfa85c8/attachment.html>

From 2284168009 at qq.com  Thu Jun 13 00:46:16 2013
From: 2284168009 at qq.com (=?gb18030?B?wbrM7LO9?=)
Date: Thu, 13 Jun 2013 15:46:16 +0800
Subject: [gdal-dev] about OGRSQL case sensitive
Message-ID: <tencent_11CD87D65647CECF702FDE08@qq.com>

Hi all,

According to page http://www.gdal.org/ogr/ogr_sql.html , I found that <, >, <= and >= operators are case sensitive. My code is something like this: and I couldn't get the required result. Can anyone give me some suggestions?Thanks for your help!
  OGRFeature *pfea = OGRFeature::CreateFeature(poLayerws->GetLayerDefn());
  pfea->SetField("codede","CAPITAL");
  if (poLayerws->CreateFeature(pfea) != OGRERR_NONE)
  {
   return false;
  }
  pfea = OGRFeature::CreateFeature(poLayerws->GetLayerDefn());
  pfea->SetField("codede","capital");
  if (poLayerws->CreateFeature(pfea) != OGRERR_NONE)
  {
   return false;
  }
 string layername = poLayerws->GetName();
 string ssf = "SELECT * FROM " + layername + " WHERE codede >= 'capital' AND codede <= 'capital'" ;
 const char *sql = ssf.c_str();
 OGRLayer *ret = poDSws->ExecuteSQL(sql,NULL,NULL);
/*value of n is  2*/
 int n = ret->GetFeatureCount();
 ret->ResetReading();
 OGRFeature *pfearet;
/*prints CAPITAL 
capital*/
 while(pfearet = ret->GetNextFeature())
 {
  cout<<pfearet->GetFieldAsString("codede")<<endl;
 }
poDSws->ReleaseResultSet(ret);
 OGRDataSource::DestroyDataSource(poDSws);
 OGRCleanupAll();
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130613/7d1655f6/attachment.html>

From grb at skogoglandskap.no  Thu Jun 13 00:57:12 2013
From: grb at skogoglandskap.no (Graeme B. Bell)
Date: Thu, 13 Jun 2013 07:57:12 +0000
Subject: [gdal-dev] bugs: 2 examples of incorrect behaviour by
 gdal_rasterize with zero-polygon valid query result.
In-Reply-To: <201306122119.03753.even.rouault@mines-paris.org>
References: <65A475FA-E7D7-4DAC-84A0-8B0D13F0D8D6@skogoglandskap.no>
	<E93F1E22-500C-4116-9559-2DCCDDC9A07B@skogoglandskap.no>
	<66058E76-1D9B-4137-B300-246F3E35172D@skogoglandskap.no>
	<201306122119.03753.even.rouault@mines-paris.org>
Message-ID: <6F4DDA2B-66F6-4580-9A05-87FC803BAC63@skogoglandskap.no>

> 
> If you feel strong about that, you can file a ticket in Trac about that. Your 
> proposal makes sense, although I suspect there could be use cases where it 
> wouldn't be desirable, but I can't find them right now...

Thanks. Now logged in trac, #5115

Graeme.



From bontepaarden at gmail.com  Thu Jun 13 04:32:06 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Thu, 13 Jun 2013 13:32:06 +0200
Subject: [gdal-dev] Aggregate bands
Message-ID: <CAHNf2YRQiJM1HFGoAZA6RscPYaML-nEsETtzCMkw4c+HvF_Zrw@mail.gmail.com>

Hi list,

I have a netCDF file with 24 bands.
I want to create a new (ASCII) grid with the bands aggregated.
Is this possible using the gdal tools or with an existing python script?

Thanks,

Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130613/16f92dfc/attachment.html>

From etourigny.dev at gmail.com  Thu Jun 13 06:54:42 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 13 Jun 2013 10:54:42 -0300
Subject: [gdal-dev] Aggregate bands
In-Reply-To: <CAHNf2YRQiJM1HFGoAZA6RscPYaML-nEsETtzCMkw4c+HvF_Zrw@mail.gmail.com>
References: <CAHNf2YRQiJM1HFGoAZA6RscPYaML-nEsETtzCMkw4c+HvF_Zrw@mail.gmail.com>
Message-ID: <CA+TxYvNHKh=oE_vJaHwosXmQDY6zxJP9KM+3ppUO_GNKe=4VWw@mail.gmail.com>

that should be a simple as

gdal_translate -of AAIGrid in.nc out.asc

On Thu, Jun 13, 2013 at 8:32 AM, Paul Meems <bontepaarden at gmail.com> wrote:

> Hi list,
>
> I have a netCDF file with 24 bands.
> I want to create a new (ASCII) grid with the bands aggregated.
> Is this possible using the gdal tools or with an existing python script?
>
> Thanks,
>
> Paul
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130613/43a3b57a/attachment-0001.html>

From arb at sat.dundee.ac.uk  Thu Jun 13 07:24:00 2013
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Thu, 13 Jun 2013 15:24:00 +0100
Subject: [gdal-dev] Two gdal-1.10.0 build errors
In-Reply-To: <201306062006.41351.even.rouault@mines-paris.org>
References: <CAHOfOo1_J-iu0yqSrSRfLzNXZA-8tWP4jO_yGACj=UB0U4Ajfw@mail.gmail.com>
	<201306062006.41351.even.rouault@mines-paris.org>
Message-ID: <CAHOfOo2z48rNsjijuQ20wGxQzjneu27YgdyyYwMdQ+aN-oA16g@mail.gmail.com>

On 6 June 2013 19:06, Even Rouault <even.rouault at mines-paris.org> wrote:

> >  frmts/msg/msgcommand.cpp:434: error: 'sprintf' was not declared in this
> > scope
> > (needed a #include)
>
> Perhaps you can provide the patch ? This driver is most likely not
> compiled on
> a regular basis due to its unusual dependencies.
>

I just added  #include <cstdio>
but I didn't want to provide a patch in case that's not the right thing to
do
for all systems/compilers/etc, eg. maybe it should be <stdio.h> ?

>   --with-rename-internal-libtiff-symbols=yes and
> >  --with-rename-internal-libgeotiff-symbols=yes
> >  .libs/libgdal.so: undefined reference to `TIFFReadEncodedStrip'
> >  (had to configure without those options)
> If problems persists, could you issue "grep TIFFReadEncodedStrip frmts/o/*"
> and "grep gdal_TIFFReadEncodedStrip frmts/o/*" and report the output ?
>

 I can't rebuild this right now so if anyone else would like to try then
all you have to do is use the --with-rename options and observe the link
failure.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130613/7891390b/attachment.html>

From Anthony.W.Baker at boeing.com  Thu Jun 13 07:58:59 2013
From: Anthony.W.Baker at boeing.com (Baker, Anthony W)
Date: Thu, 13 Jun 2013 14:58:59 +0000
Subject: [gdal-dev] NITF Chip
In-Reply-To: <CAHOfOo2z48rNsjijuQ20wGxQzjneu27YgdyyYwMdQ+aN-oA16g@mail.gmail.com>
References: <CAHOfOo1_J-iu0yqSrSRfLzNXZA-8tWP4jO_yGACj=UB0U4Ajfw@mail.gmail.com>
	<201306062006.41351.even.rouault@mines-paris.org>
	<CAHOfOo2z48rNsjijuQ20wGxQzjneu27YgdyyYwMdQ+aN-oA16g@mail.gmail.com>
Message-ID: <1106E45778F04E4D94505A07DD74991202E15B@XCH-PHX-403.sw.nos.boeing.com>

Hi All,

I posted a few days ago about trying to find the transform for a NITF chip, for instance to map from the chip pixel coordinates to geo coordinates.  I was able to come close in terms of my mapping but it does not seem to match with other sources that are interpreting the data.  Would someone please give a summary of what this process should look like?  Code would be greatly welcomed.

I think that the NITF has RCP associated and I suspect that is where I am running into the problem.

Thank you,

Anthony

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130613/6d0f3db4/attachment.html>

From pramsey at cleverelephant.ca  Thu Jun 13 10:22:02 2013
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Thu, 13 Jun 2013 10:22:02 -0700
Subject: [gdal-dev] Fw: [TOSprint] Code Sprint 2014
In-Reply-To: <D2333B754249457E85E784BD54985672@cleverelephant.ca>
References: <51B9BC1C.8040605@meissl.name>
	<D2333B754249457E85E784BD54985672@cleverelephant.ca>
Message-ID: <3C4A510010DB48BFBB4E84D1B18DE968@cleverelephant.ca>

PSC / committers / coders,  
If you would join the 2014 code sprint at either of the proposed venues, noting so on the doodle would be must helpful!
P.

--  
Paul Ramsey
http://cleverelephant.ca
http://postgis.net


Forwarded message:

> From: Paul Ramsey <pramsey at cleverelephant.ca>
> To: Stephan Mei?l <stephan at meissl.name>
> Cc: tosprint at lists.osgeo.org
> Date: Thursday, June 13, 2013 10:14:13 AM
> Subject: Re: [TOSprint] Code Sprint 2014
>  
> Hey Sprinters, rather that doing a yes/no binary thing, how about we see how much polarity there is one way or another, by asking everyone who would go to a sprint which places and dates they could actually attend.  
>  
> http://www.doodle.com/ky3eh797mtsrx3bn
>  
> For example, in my case, I can attend at both venues at all months, so I'd check them all. It's all the same to me, but my vote counts, in that it's a vote for trying lots of things. If it turns out a large portion of our community simply cannot attend a particular venue or time, this is our chance to figure that out. My guess (hope) is that for every North American who just cannot find their way to Vienna, there will be a European who can find their way there, and things will end up pretty even, but let's see if that guess is true.
>  
> Follow the link and add your information. Also, forward to people who are in the community and would attend a sprint in one of the two venues.
>  
> P.  
>  
> --  
> Paul Ramsey
> http://cleverelephant.ca
> http://postgis.net
>  
>  
> On Thursday, June 13, 2013 at 5:33 AM, Stephan Mei?l wrote:
>  
> > Hi devs,
> >  
> > now that we are in the great position of having two proposals to host
> > 2014's code sprint we have the difficulty to decide upon them. As a way
> > forward we might want to accept both proposals, one for 2014 and one for
> > 2015. Opinions? I hope the Vienna venue sponsoring is also valid for
> > 2015. Who's up to toss a coin?
> >  
> > I'd appreciate if we can have a decision and fixation of dates in the
> > next weeks as our venue sponsor would like to make a reservation.
> >  
> > cu
> > Stephan
> > _______________________________________________
> > TOSprint mailing list
> > TOSprint at lists.osgeo.org (mailto:TOSprint at lists.osgeo.org)
> > http://lists.osgeo.org/mailman/listinfo/tosprint
>  
>  




From even.rouault at mines-paris.org  Thu Jun 13 14:43:54 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 13 Jun 2013 23:43:54 +0200
Subject: [gdal-dev] Aggregate bands
In-Reply-To: <CA+TxYvNHKh=oE_vJaHwosXmQDY6zxJP9KM+3ppUO_GNKe=4VWw@mail.gmail.com>
References: <CAHNf2YRQiJM1HFGoAZA6RscPYaML-nEsETtzCMkw4c+HvF_Zrw@mail.gmail.com>
	<CA+TxYvNHKh=oE_vJaHwosXmQDY6zxJP9KM+3ppUO_GNKe=4VWw@mail.gmail.com>
Message-ID: <201306132343.55113.even.rouault@mines-paris.org>

Le jeudi 13 juin 2013 15:54:42, Etienne Tourigny a ?crit :
> that should be a simple as
> 
> gdal_translate -of AAIGrid in.nc out.asc

Except that AAIGrid only supports 1-band datasets. I can't think of a ASCII 
based format that supports multi-band datasets.

> 
> On Thu, Jun 13, 2013 at 8:32 AM, Paul Meems <bontepaarden at gmail.com> wrote:
> > Hi list,
> > 
> > I have a netCDF file with 24 bands.
> > I want to create a new (ASCII) grid with the bands aggregated.
> > Is this possible using the gdal tools or with an existing python script?
> > 
> > Thanks,
> > 
> > Paul
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Thu Jun 13 15:00:58 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 14 Jun 2013 00:00:58 +0200
Subject: [gdal-dev] about OGRSQL case sensitive
In-Reply-To: <tencent_11CD87D65647CECF702FDE08@qq.com>
References: <tencent_11CD87D65647CECF702FDE08@qq.com>
Message-ID: <201306140000.59238.even.rouault@mines-paris.org>

Le jeudi 13 juin 2013 09:46:16, ??? a ?crit :
> Hi all,
> 
> According to page http://www.gdal.org/ogr/ogr_sql.html , I found that <, >,
> <= and >= operators are case sensitive. 

Hum, it appears that this was true before the rewriting of the OGR SQL engine 
for GDAL 1.8.0. The current implementation of <, >, <= and >= is also case 
insensitive as you've noticed... Not sure if we must change the doc or the 
implementation here...

If you use GDAL 1.10.0, and you've built is with SQLite support, you can use 
the following (convoluted) SQL :

"SELECT * FROM " + layername + " WHERE NOT codede != 'capital'"

and

poDSws->ExecuteSQL(sql,NULL,"SQLite");

so that the SQLite engine is used.

Well, why the above works, and not directly "SELECT * FROM " + layername + " 
WHERE codede = 'capital'" since '=' is case sensitive (by default) in SQLite. 
If you try this, the SQLite <--> OGR bridge will be smart and will forward the 
WHERE clause to the OGR SetAttributeFilter() method, that in turns will be 
evaluated by OGR SQL (for drivers that are not RDBMS). But by using "NOT foo 
!= 'bar'" this optimization isn't triggered and the expression is fully 
evaluated by the SQLite engine...

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Thu Jun 13 15:05:21 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 14 Jun 2013 00:05:21 +0200
Subject: [gdal-dev] Combining quantized png files in gdal2tiles
In-Reply-To: <51B94AAC.60808@gns.cri.nz>
References: <51B94AAC.60808@gns.cri.nz>
Message-ID: <201306140005.21241.even.rouault@mines-paris.org>

Le jeudi 13 juin 2013 06:29:32, Phil Scadden a ?crit :
> I was hacking gdal2tiles a bit by running pnqnq of a base tile
> immediately after creating it (I want to be able to run partial updates
> on a TMS which has been pngnq optimised). No problem with that, but
> updating the overview tiles produces issues. It does
> writeraster(......,readraster(....)) on those png files and in the
> output, then colour palette is more of grayscale (actually a readscale).

Not sure to completely follow you ...

> 
> Does GDAL read quantized PNG properly but some intermediary processing
> needed (what??) or is there a problem with the driver?

I've just done some quick testing by running pngnq on a sample PNG, and the 
GDAL PNG driver seems to handle the generated XXXXX-nq8.png file well.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From p.scadden at gns.cri.nz  Thu Jun 13 15:26:52 2013
From: p.scadden at gns.cri.nz (Phil Scadden)
Date: Fri, 14 Jun 2013 10:26:52 +1200
Subject: [gdal-dev] Combining quantized png files in gdal2tiles
In-Reply-To: <201306140005.21241.even.rouault@mines-paris.org>
References: <51B94AAC.60808@gns.cri.nz>
	<201306140005.21241.even.rouault@mines-paris.org>
Message-ID: <51BA472C.5070004@gns.cri.nz>

 >Not sure to completely follow you ...

Okay, what goes on in gdal2tiles.py, is that after creating the base 
tiles, (and in my version, they are quantised)  the base tiles are taken 
in groups of 4, read into a new MEM driver raster to make a one tile, 
then resampled down to size of base tile to create an overview. It is 
repeated for each level up the tree. The rescaled output tile from this 
process has lost all the orginal colour - its just variations of red. 
Either in reading them into MEM or in the resampling, I have lost the 
palette info.


Notice: This email and any attachments are confidential.
If received in error please destroy and immediately notify us.
Do not copy or disclose the contents.


From even.rouault at mines-paris.org  Thu Jun 13 15:38:07 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 14 Jun 2013 00:38:07 +0200
Subject: [gdal-dev] Combining quantized png files in gdal2tiles
In-Reply-To: <51BA472C.5070004@gns.cri.nz>
References: <51B94AAC.60808@gns.cri.nz>
	<201306140005.21241.even.rouault@mines-paris.org>
	<51BA472C.5070004@gns.cri.nz>
Message-ID: <201306140038.07321.even.rouault@mines-paris.org>

Le vendredi 14 juin 2013 00:26:52, Phil Scadden a ?crit :
>  >Not sure to completely follow you ...
> 
> Okay, what goes on in gdal2tiles.py, is that after creating the base
> tiles, (and in my version, they are quantised)  the base tiles are taken
> in groups of 4, read into a new MEM driver raster to make a one tile,
> then resampled down to size of base tile to create an overview. It is
> repeated for each level up the tree. The rescaled output tile from this
> process has lost all the orginal colour - its just variations of red.
> Either in reading them into MEM or in the resampling, I have lost the
> palette info.

I suppose (*) that gdal2tiles isn't ready to deal with paletted datasets. It 
must just concatenate the raw values of the 4 source tiles (i.e. index to 
palettes), then do the resampling and write to the file. If the 4 tiles don't 
share the same palette, this is bound to result in non-sensical data. If they 
share the same palette, some code should be added to do somelink like 
target_ds.SetColorTable(source_ds.GetColorTable())


(*) confirmed by the test I can see at line 732:
        if self.in_ds.GetRasterBand(1).GetRasterColorTable():
            # TODO: Process directly paletted dataset by generating VRT in 
memory
            self.error( "Please convert this file to RGB/RGBA and run 
gdal2tiles on the result.",

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From p.scadden at gns.cri.nz  Thu Jun 13 15:55:51 2013
From: p.scadden at gns.cri.nz (Phil Scadden)
Date: Fri, 14 Jun 2013 10:55:51 +1200
Subject: [gdal-dev] Combining quantized png files in gdal2tiles
In-Reply-To: <201306140038.07321.even.rouault@mines-paris.org>
References: <51B94AAC.60808@gns.cri.nz>
	<201306140005.21241.even.rouault@mines-paris.org>
	<51BA472C.5070004@gns.cri.nz>
	<201306140038.07321.even.rouault@mines-paris.org>
Message-ID: <51BA4DF7.8070001@gns.cri.nz>

Okay, but how is the best way to fix it? Since pnqnq runs on individual 
tiles, I would not expect tiles to have the same palette.

What is needed is to read the nq tiles into memory, convert to RGBA 
raster, then put that into overview tile. How tricky is this to do? Any 
pointers into the API that would help me.

Thanks

Notice: This email and any attachments are confidential.
If received in error please destroy and immediately notify us.
Do not copy or disclose the contents.


From bontepaarden at gmail.com  Fri Jun 14 00:04:58 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Fri, 14 Jun 2013 09:04:58 +0200
Subject: [gdal-dev] Aggregate bands
In-Reply-To: <201306132343.55113.even.rouault@mines-paris.org>
References: <CAHNf2YRQiJM1HFGoAZA6RscPYaML-nEsETtzCMkw4c+HvF_Zrw@mail.gmail.com>
	<CA+TxYvNHKh=oE_vJaHwosXmQDY6zxJP9KM+3ppUO_GNKe=4VWw@mail.gmail.com>
	<201306132343.55113.even.rouault@mines-paris.org>
Message-ID: <CAHNf2YS4kOUMtSPxMa6k+P5KpyrtovuXch3+6y4A4gaCa9jivQ@mail.gmail.com>

Hi Even,

I've just tried and I get this result:
Warning 1: dimension #2 (x) is not a Longitude/X dimension.
Warning 1: dimension #1 (y) is not a Latitude/Y dimension.
Input file size is 257, 329
ERROR 6: AAIG driver doesn't support 24 bands.  Must be 1 band.

So you are right, it doesn't work.

I don't need an ASCII grid, a different format is also OK. But I do need
all bands combined/aggregated.
Do you have a different suggestion?

Or should I read (using Python or similar) each band/pixel and manual
aggregate them?

Thanks,


Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl

*
*


2013/6/13 Even Rouault <even.rouault at mines-paris.org>

> Le jeudi 13 juin 2013 15:54:42, Etienne Tourigny a ?crit :
> > that should be a simple as
> >
> > gdal_translate -of AAIGrid in.nc out.asc
>
> Except that AAIGrid only supports 1-band datasets. I can't think of a ASCII
> based format that supports multi-band datasets.
>
> >
> > On Thu, Jun 13, 2013 at 8:32 AM, Paul Meems <bontepaarden at gmail.com>
> wrote:
> > > Hi list,
> > >
> > > I have a netCDF file with 24 bands.
> > > I want to create a new (ASCII) grid with the bands aggregated.
> > > Is this possible using the gdal tools or with an existing python
> script?
> > >
> > > Thanks,
> > >
> > > Paul
> > >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130614/bf9b3924/attachment.html>

From taibc_coltech at yahoo.com  Fri Jun 14 01:02:32 2013
From: taibc_coltech at yahoo.com (taibc)
Date: Fri, 14 Jun 2013 01:02:32 -0700 (PDT)
Subject: [gdal-dev] Using OGRLayer::GetNextFeature() to read Dgn file ?
Message-ID: <1371196952624-5060084.post@n6.nabble.com>

Hi everyone,

I am trying read features in a dgn file and convert to shape file.
Everything is ok before I adding the last while loop. After adding this
while loop, I can't exit the program. Please see my below codes.

Do you know why ?

OGRRegisterAll();
OGRDataSource       *poDS,  *poSHPDS;
OGRLayer  *poLayer;
poLayer = poDS->GetLayer(0);
...
OGRFeature *poFeature;
while( (poFeature = poLayer->GetNextFeature()) != NULL )
{
    OGRGeometry *poGeometry;
    poGeometry = poFeature->GetGeometryRef();
    if( poGeometry != NULL && (wkbFlatten(poGeometry->getGeometryType()) ==
wkbPolygon) && (poFeature->GetFieldAsInteger ("Level") == 62) 
                && (strstr(poFeature->GetStyleString (), "BRUSH") != NULL))

    {
         poLayer->SetSpatialFilter(poGeometry); 
         // .............
         // .............
         OGRFeature *poTempFeature; 

         while((poTempFeature = poLayer->GetNextFeature()) != NULL)
         {
             if ((poTempFeature->GetGeometryRef () != NULL) &&
(poTempFeature->GetGeometryRef()->getGeometryType() == wkbPolygon)
                        && (strstr(poTempFeature->GetStyleString (),
"BRUSH") != NULL)
                        && poTempFeature->GetGeometryRef
()->Within(poGeometry) 
             {
                  poLayer->SetSpatialFilter(poTempFeature->GetGeometryRef
()); 
                  .....
                  OGRFeature *poSubFeature; 


                  while ((poSubFeature = poLayer->GetNextFeature ()) !=
NULL)
                  {
                       // do something 
                       // Can't exit the programe after adding this while
loop 
                  }
             }
         }
    }

}

Thanks and regards,

Tai



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Using-OGRLayer-GetNextFeature-to-read-Dgn-file-tp5060084.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From taibc_coltech at yahoo.com  Fri Jun 14 02:19:36 2013
From: taibc_coltech at yahoo.com (taibc)
Date: Fri, 14 Jun 2013 02:19:36 -0700 (PDT)
Subject: [gdal-dev] Using OGRLayer::GetNextFeature() to read Dgn file ?
In-Reply-To: <1371196952624-5060084.post@n6.nabble.com>
References: <1371196952624-5060084.post@n6.nabble.com>
Message-ID: <1371201576016-5060120.post@n6.nabble.com>

I resolved this error. 

Thanks and regards,



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Using-OGRLayer-GetNextFeature-to-read-Dgn-file-tp5060084p5060120.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From siebe at hydroconsult.nl  Fri Jun 14 03:40:06 2013
From: siebe at hydroconsult.nl (Siebe Bosch)
Date: Fri, 14 Jun 2013 11:40:06 +0100
Subject: [gdal-dev] Aggregate bands
In-Reply-To: <CAHNf2YS4kOUMtSPxMa6k+P5KpyrtovuXch3+6y4A4gaCa9jivQ@mail.gmail.com>
References: <CAHNf2YRQiJM1HFGoAZA6RscPYaML-nEsETtzCMkw4c+HvF_Zrw@mail.gmail.com>
	<CA+TxYvNHKh=oE_vJaHwosXmQDY6zxJP9KM+3ppUO_GNKe=4VWw@mail.gmail.com>
	<201306132343.55113.even.rouault@mines-paris.org>
	<CAHNf2YS4kOUMtSPxMa6k+P5KpyrtovuXch3+6y4A4gaCa9jivQ@mail.gmail.com>
Message-ID: <51BAF306.1050502@hydroconsult.nl>

Hi List,

The question was originally mine. Thanks to Paul for posting it.
Here's what I did (calling GDAL tools from VB.NET):

 1. Warping the NetCDF-file to match my desired co-ordinate system and
    crop the image.

    outputFile = OutputDir & "\" & Str(OrderNum).Trim & "_NSL_" &
    Str(i).Trim & ".nc"
    myArgs = " -of NetCDF -dstnodata -999 -te " & Xmin & " " & Ymin & "
    " & Xmax & " " & Ymax & "  -tr 1000 1000 -s_srs " & Chr(34) &
    "+proj=stere +x_0=0 +y_0=0 +lat_0=90 +lon_0=0 +lat_ts=60 +a=6378.388
    +b=6356.906" & Chr(34) & " -t_srs " & Chr(34) & "EPSG:28992" &
    Chr(34) & " " & myPath & " " & outputFile
    ProcessCollection.Add(Process.Start(GDALToolsDir &
    "\bin\gdalwarp.exe", myArgs))

 2. Translating the 24 bands to .ASC

    outputFile = myPath.Replace(".nc", ".asc")
    myArgs = "-of AAIGrid -sds " & myPath & " " & outputFile  'exports
    all 24 subdatasets
    ProcessCollection.Add(Process.Start(GDALToolsDir &
    "\bin\gdal_translate.exe", myArgs))


Now this results in 24 ASC rasters: outputFile.asc1, outputFile.asc2, 
outputFile.asc3 etc. through outputFile.asc24.

By itself this is absolutely great because it gives me access to each band.
My question however is still: how can I (1.) aggregate the values for 
all 24 bands into one band and (2.) write it to an  .ASC

Thanks,
Siebe













On 14-06-13 08:04, Paul Meems wrote:
> Hi Even,
>
> I've just tried and I get this result:
> Warning 1: dimension #2 (x) is not a Longitude/X dimension.
> Warning 1: dimension #1 (y) is not a Latitude/Y dimension.
> Input file size is 257, 329
> ERROR 6: AAIG driver doesn't support 24 bands.  Must be 1 band.
>
> So you are right, it doesn't work.
>
> I don't need an ASCII grid, a different format is also OK. But I do 
> need all bands combined/aggregated.
> Do you have a different suggestion?
>
> Or should I read (using Python or similar) each band/pixel and manual 
> aggregate them?
>
> Thanks,
>
>
> Paul
>
> *Paul Meems *
> Release manager, configuration manager
> and forum moderator of MapWindow GIS.
> www.mapwindow.org <http://www.mapwindow.org/>
>
> Owner of MapWindow.nl - Support for
> Dutch speaking users.
> www.mapwindow.nl <http://www.mapwindow.nl/>
>
> *
> *
>
>
>
> 2013/6/13 Even Rouault <even.rouault at mines-paris.org 
> <mailto:even.rouault at mines-paris.org>>
>
>     Le jeudi 13 juin 2013 15:54:42, Etienne Tourigny a ?crit :
>     > that should be a simple as
>     >
>     > gdal_translate -of AAIGrid in.nc <http://in.nc> out.asc
>
>     Except that AAIGrid only supports 1-band datasets. I can't think
>     of a ASCII
>     based format that supports multi-band datasets.
>
>     >
>     > On Thu, Jun 13, 2013 at 8:32 AM, Paul Meems
>     <bontepaarden at gmail.com <mailto:bontepaarden at gmail.com>> wrote:
>     > > Hi list,
>     > >
>     > > I have a netCDF file with 24 bands.
>     > > I want to create a new (ASCII) grid with the bands aggregated.
>     > > Is this possible using the gdal tools or with an existing
>     python script?
>     > >
>     > > Thanks,
>     > >
>     > > Paul
>     > >
>     > > _______________________________________________
>     > > gdal-dev mailing list
>     > > gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>     --
>     Geospatial professional services
>     http://even.rouault.free.fr/services.html
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
---------------------------------------
Hydroconsult
Lulofsstraat 55, unit 47
2521 AL Den Haag
The Netherlands

web: http://www.hydroconsult.nl
e-mail: siebe at hydroconsult.nl
phone: +31(0)70 250 0580
mobile: +31(0)6 17 682 689
fax: +31(0)84 728 8946
---------------------------------------

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130614/00e76348/attachment-0001.html>

From andre+joost at nurfuerspam.de  Fri Jun 14 07:55:22 2013
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Fri, 14 Jun 2013 16:55:22 +0200
Subject: [gdal-dev] Combining quantized png files in gdal2tiles
In-Reply-To: <51BA4DF7.8070001@gns.cri.nz>
References: <51B94AAC.60808@gns.cri.nz>
	<201306140005.21241.even.rouault@mines-paris.org>
	<51BA472C.5070004@gns.cri.nz>
	<201306140038.07321.even.rouault@mines-paris.org>
	<51BA4DF7.8070001@gns.cri.nz>
Message-ID: <kpfbd6$rph$1@ger.gmane.org>

Am 14.06.2013 00:55, schrieb Phil Scadden:
> Okay, but how is the best way to fix it? Since pnqnq runs on individual
> tiles, I would not expect tiles to have the same palette.
>
> What is needed is to read the nq tiles into memory, convert to RGBA
> raster, then put that into overview tile. How tricky is this to do? Any
> pointers into the API that would help me.

I ran into the same problem when tiling paletted dutch top map tif files.
I created vrts with RGBA with the following command (on Windows):

for %%N in (D:\Karten\gdal\gdal2tiles\NL25\*.tif) DO gdal_translate -of 
vrt -expand rgba %%N D:\Karten\gdal\gdal2tiles\NL25\%%~nN.vrt

and then build an index and ran gdal2tiles on the index vrt:

gdalbuildvrt -allow_projection_difference index25.vrt NL25\*.vrt
gdal2tiles --s_srs EPSG:28992 --zoom 15-16 index25.vrt tiles

HTH,
Andr? Joost



From warmerdam at pobox.com  Fri Jun 14 08:22:13 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 14 Jun 2013 08:22:13 -0700
Subject: [gdal-dev] Aggregate bands
In-Reply-To: <51BAF306.1050502@hydroconsult.nl>
References: <CAHNf2YRQiJM1HFGoAZA6RscPYaML-nEsETtzCMkw4c+HvF_Zrw@mail.gmail.com>
	<CA+TxYvNHKh=oE_vJaHwosXmQDY6zxJP9KM+3ppUO_GNKe=4VWw@mail.gmail.com>
	<201306132343.55113.even.rouault@mines-paris.org>
	<CAHNf2YS4kOUMtSPxMa6k+P5KpyrtovuXch3+6y4A4gaCa9jivQ@mail.gmail.com>
	<51BAF306.1050502@hydroconsult.nl>
Message-ID: <CA+YzLBdmcJTrC17dFHeM+VUXmPZ6jY0v4btPfxrGpA+vQUqjyg@mail.gmail.com>

Siebe,

There are many ways to aggregate.  What do you want?  Just one band summing
each pixel stack?

Best regards,
On Jun 14, 2013 3:55 AM, "Siebe Bosch" <siebe at hydroconsult.nl> wrote:

>  Hi List,
>
> The question was originally mine. Thanks to Paul for posting it.
> Here's what I did (calling GDAL tools from VB.NET):
>
>    1. Warping the NetCDF-file to match my desired co-ordinate system and
>    crop the image.
>
>    outputFile = OutputDir & "\" & Str(OrderNum).Trim & "_NSL_" &
>    Str(i).Trim & ".nc"
>    myArgs = " -of NetCDF -dstnodata -999 -te " & Xmin & " " & Ymin & " "
>    & Xmax & " " & Ymax & "  -tr 1000 1000 -s_srs " & Chr(34) & "+proj=stere
>    +x_0=0 +y_0=0 +lat_0=90 +lon_0=0 +lat_ts=60 +a=6378.388 +b=6356.906" &
>    Chr(34) & " -t_srs " & Chr(34) & "EPSG:28992" & Chr(34) & " " & myPath & "
>    " & outputFile
>    ProcessCollection.Add(Process.Start(GDALToolsDir &
>    "\bin\gdalwarp.exe", myArgs))
>
>     2. Translating the 24 bands to .ASC
>
>    outputFile = myPath.Replace(".nc", ".asc")
>    myArgs = "-of AAIGrid -sds " & myPath & " " & outputFile  'exports all
>    24 subdatasets
>    ProcessCollection.Add(Process.Start(GDALToolsDir &
>    "\bin\gdal_translate.exe", myArgs))
>
>
> Now this results in 24 ASC rasters: outputFile.asc1, outputFile.asc2,
> outputFile.asc3 etc. through outputFile.asc24.
>
> By itself this is absolutely great because it gives me access to each
> band.
> My question however is still: how can I (1.) aggregate the values for all
> 24 bands into one band and (2.) write it to an  .ASC
>
> Thanks,
> Siebe
>
>
>
>
>
>
>
>
>
>
>
>
>
> On 14-06-13 08:04, Paul Meems wrote:
>
>    Hi Even,
>
>  I've just tried and I get this result:
> Warning 1: dimension #2 (x) is not a Longitude/X dimension.
> Warning 1: dimension #1 (y) is not a Latitude/Y dimension.
> Input file size is 257, 329
> ERROR 6: AAIG driver doesn't support 24 bands.  Must be 1 band.
>
>  So you are right, it doesn't work.
>
>  I don't need an ASCII grid, a different format is also OK. But I do need
> all bands combined/aggregated.
>  Do you have a different suggestion?
>
>  Or should I read (using Python or similar) each band/pixel and manual
> aggregate them?
>
>  Thanks,
>
>
> Paul
>
>   *Paul Meems *
> Release manager, configuration manager
> and forum moderator of MapWindow GIS.
> www.mapwindow.org
>
> Owner of MapWindow.nl - Support for
> Dutch speaking users.
> www.mapwindow.nl
>
> *
> *
>
>
> 2013/6/13 Even Rouault <even.rouault at mines-paris.org>
>
>> Le jeudi 13 juin 2013 15:54:42, Etienne Tourigny a ?crit :
>> > that should be a simple as
>> >
>> > gdal_translate -of AAIGrid in.nc out.asc
>>
>>  Except that AAIGrid only supports 1-band datasets. I can't think of a
>> ASCII
>> based format that supports multi-band datasets.
>>
>> >
>> > On Thu, Jun 13, 2013 at 8:32 AM, Paul Meems <bontepaarden at gmail.com>
>> wrote:
>> > > Hi list,
>> > >
>> > > I have a netCDF file with 24 bands.
>> > > I want to create a new (ASCII) grid with the bands aggregated.
>> > > Is this possible using the gdal tools or with an existing python
>> script?
>> > >
>> > > Thanks,
>> > >
>> > > Paul
>> > >
>> > > _______________________________________________
>> > > gdal-dev mailing list
>> > > gdal-dev at lists.osgeo.org
>> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>  --
>> Geospatial professional services
>> http://even.rouault.free.fr/services.html
>>
>
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> ---------------------------------------
> Hydroconsult
> Lulofsstraat 55, unit 47
> 2521 AL Den Haag
> The Netherlands
>
> web: http://www.hydroconsult.nl
> e-mail: siebe at hydroconsult.nl
> phone: +31(0)70 250 0580
> mobile: +31(0)6 17 682 689
> fax: +31(0)84 728 8946
> ---------------------------------------
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130614/4af6cb40/attachment.html>

From even.rouault at mines-paris.org  Fri Jun 14 10:41:34 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 14 Jun 2013 19:41:34 +0200
Subject: [gdal-dev] NITF Chip
In-Reply-To: <1106E45778F04E4D94505A07DD74991202DB16@XCH-PHX-403.sw.nos.boeing.com>
References: <1106E45778F04E4D94505A07DD74991202DA9A@XCH-PHX-403.sw.nos.boeing.com>
	<1106E45778F04E4D94505A07DD74991202DB16@XCH-PHX-403.sw.nos.boeing.com>
Message-ID: <201306141941.35078.even.rouault@mines-paris.org>

Le lundi 10 juin 2013 22:43:52, Baker, Anthony W a ?crit :
> One possible answer seems to be to use ICHIP_OP_**_** and  ICHIP_FI_**_**
> 
> Using the _OP_ metadata I form a row-wise 2x2 projection matrix with _12 -
> _11 as one row and _21 - _11 as the other.  With _FI_ I form a column-wise
> 2x2 projection matrix with _12 - _11 and _21 - _11 as the columns.  
> Applying these matrices and the two translations in the right order seems
> to give ok results.  If I combine this transform with the geoTransform
> (matrix multi and trans) I seem to get ok results.  The results are
> different by a little from ArcMap's raster inclusion but close.  Code is
> included below to show the transforms that I have done.  Does this seem
> right?
> 
> double fi11r = strtod(poDataset->GetMetadataItem("ICHIP_FI_ROW_11", NULL),
> NULL); double fi11c = strtod(poDataset->GetMetadataItem("ICHIP_FI_COL_11",
> NULL), NULL); double fi12r =
> strtod(poDataset->GetMetadataItem("ICHIP_FI_ROW_12", NULL), NULL); double
> fi12c = strtod(poDataset->GetMetadataItem("ICHIP_FI_COL_12", NULL), NULL);
> double fi21r = strtod(poDataset->GetMetadataItem("ICHIP_FI_ROW_21", NULL),
> NULL); double fi21c = strtod(poDataset->GetMetadataItem("ICHIP_FI_COL_21",
> NULL), NULL); double op11r =
> strtod(poDataset->GetMetadataItem("ICHIP_OP_ROW_11", NULL), NULL); double
> op11c = strtod(poDataset->GetMetadataItem("ICHIP_OP_COL_11", NULL), NULL);
> double op12r = strtod(poDataset->GetMetadataItem("ICHIP_OP_ROW_12", NULL),
> NULL); double op12c = strtod(poDataset->GetMetadataItem("ICHIP_OP_COL_12",
> NULL), NULL); double op21r =
> strtod(poDataset->GetMetadataItem("ICHIP_OP_ROW_21", NULL), NULL); double
> op21c = strtod(poDataset->GetMetadataItem("ICHIP_OP_COL_21", NULL), NULL);
> 
> //Column matrix
> double pr11, pr12, pr22, pr21;
> double npr1, npr2;
> npr1 = sqrt((fi12c - fi11c)*(fi12c - fi11c) + (fi12r - fi11r)*(fi12r -
> fi11r)); npr2 = sqrt((fi21c - fi11c)*(fi21c - fi11c) + (fi21r -
> fi11r)*(fi21r - fi11r)); pr11 = (fi12c - fi11c)/npr1;
> pr12 = (fi21c - fi11c)/npr2;
> pr21 = (fi12r - fi11r)/npr1;
> pr22 = (fi21r - fi11r)/npr2;
> 
> //Row matrix
> double br11, br12, br22, br21;
> double nbr1, nbr2;
> nbr1 = sqrt((op12c - op11c)*(op12c - op11c) + (op12r - op11r)*(op12r -
> op11r)); nbr2 = sqrt((op21c - op11c)*(op21c - op11c) + (op21r -
> op11r)*(op21r - op11r)); br11 = (op12c - op11c)/nbr1;
> br21 = (op21c - op11c)/nbr2;
> br12 = (op12r - op11r)/nbr1;
> br22 = (op21r - op11r)/nbr2;
> 
> //Transform
> double m11, m12, m22, m21;
> m11 = pr11*br11 + pr12*br21;
> m21 = pr21*br11 + pr22*br21;
> m12 = pr11*br12 + pr12*br22;
> m22 = pr21*br12 + pr22*br22;
> 
> //Compute the translation factor
> double a1, a2;
> a1 = -(m11*op11c + m12*op11r) + fi11c;
> a2 = -(m21*op11c + m22*op11r) + fi11r;
> 
> ST[0] = a1;
> ST[3] = a2;
> ST[1] = m11;
> ST[2] = m12;
> ST[4] = m21;
> ST[5] = m22;

I've not followed the math logic of the above formulas, but if I were you I 
would try defining 4 GDAL GCPs with dfGCPPixel = OP_COL, dfGCPLine = OP_ROW, 
dfGCPX = FI_COL, dfGCPY = FI_ROW and then I would use GDALGCPsToGeoTransform() 
(that will do a least squares error regression) to deduce the best 
geotransform matrix.


-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jorgearevalo at libregis.org  Fri Jun 14 10:43:22 2013
From: jorgearevalo at libregis.org (=?utf-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Fri, 14 Jun 2013 19:43:22 +0200
Subject: [gdal-dev] ECW reading is taking too much time
Message-ID: <8F11C2E45C7546FFB4B362A4DCF6A8AE@libregis.org>

Hello, 

I'm having problems reading a ECW file with GDAL. It's taking several hours to get an equivalent GeoTIFF file, executing gdal_translate. Besides, the ECW file is 1.9GB and the resulting GeoTIFF is 21GB. The CPU is at almost 80% during the read operation. Same problem trying to load it in PostGIS Raster. The SQL file creation takes hours. 

This is the gdalinfo output

Driver: ECW/ERDAS Compressed Wavelets (SDK 3.x)
Files: PNOA_MR_OF_ETRS89_HU29_h50_0223.ecw
Size is 110680, 74840
Coordinate System is `'
Origin = (511960.000000000000000,4686950.000000000000000)
Pixel Size = (0.250000000000000,-0.250000000000000)
Metadata:
COLORSPACE=RGB
COMPRESSION_RATE_TARGET=10
VERSION=2
Corner Coordinates:
Upper Left ( 511960.000, 4686950.000) 
Lower Left ( 511960.000, 4668240.000) 
Upper Right ( 539630.000, 4686950.000) 
Lower Right ( 539630.000, 4668240.000) 
Center ( 525795.000, 4677595.000) 
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
Description = Red
Overviews: 55340x37420, 27670x18710, 13835x9355, 6917x4677, 3458x2338, 1729x1169, 864x584, 432x292, 216x146
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
Description = Green
Overviews: 55340x37420, 27670x18710, 13835x9355, 6917x4677, 3458x2338, 1729x1169, 864x584, 432x292, 216x146
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
Description = Blue
Overviews: 55340x37420, 27670x18710, 13835x9355, 6917x4677, 3458x2338, 1729x1169, 864x584, 432x292, 216x146

I don't know why there isn't srid information, but it should be epsg:2158

I guess the speed depends on the reading strategy (looking at debug messages, looks like the driver is reading line by line), and you may get better performance combining ECW specific options with GDAL general options.

I'm using GDAL 1.10 and ECW 3.3. I've read about a known bug with ECW 3.3 and machines with more than 8GB RAM (http://osgeo-org.1560.x6.nabble.com/Re-Qgis-developer-Large-raster-ecw-identify-very-long-td4996966.html), but it's not my case.

Is there any know strategy to make the ECW driver reading faster? I'm just executing these operations:

- For the GeoTiff transformation: 

gdal_translate -a_srs epsg:2158 PNOA_MR_OF_ETRS89_HU29_h50_0223.ecw PNOA_MR_OF_ETRS89_HU29_h50_0223.tif

- For the PostGIS Raster loading:

raster2pgsql -s epsg:2158 -t 15x15 -I -M -C -Y PNOA_MR_OF_ETRS89_HU29_h50_0223.ecw > output.sql (I've tried with different tile sizes, with the same result)

Any clues?

Many thanks in advance, 

-- 
Jorge Arevalo
Freelance developer

http://www.krop.com/jorgearevalo
http://about.me/jorgeas80

Enviado con Sparrow (http://www.sparrowmailapp.com/?sig)



From piotr at cgis.pl  Fri Jun 14 11:18:19 2013
From: piotr at cgis.pl (Piotr Tracz)
Date: Fri, 14 Jun 2013 20:18:19 +0200
Subject: [gdal-dev] SQLite driver and drop table problem
Message-ID: <51BB5E6B.8090801@cgis.pl>

Hello,

I think there might be a bug in OGRSQLiteDataSource::ExecuteSQL but 
before I make bug ticket, I want to be sure I'm not missing anything.
When one try to execute SQL command "DROP TABLE xxx", error "In 
ExecuteSQL(): sqlite3_step(DROP TABLE xxx):
   SQL logic error or missing database" occurs.

  I think this error is related to how SQLite behaves: DROP TABLE can be 
only executed by sqlite3_exec while GDAL is trying to do that by
  sqlite3_prepare ->  sqlite3_step -> sqlite3_finalize chain.

Bug is related to GDAL 1.10 version (however previous behaves the same) 
compiled aganist SQLITE 3.7.x.

Regards,

Piotr




From even.rouault at mines-paris.org  Fri Jun 14 11:50:41 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 14 Jun 2013 20:50:41 +0200
Subject: [gdal-dev] ECW reading is taking too much time
In-Reply-To: <8F11C2E45C7546FFB4B362A4DCF6A8AE@libregis.org>
References: <8F11C2E45C7546FFB4B362A4DCF6A8AE@libregis.org>
Message-ID: <201306142050.42713.even.rouault@mines-paris.org>

Le vendredi 14 juin 2013 19:43:22, Jorge Ar?valo a ?crit :
> Hello,
> 
> I'm having problems reading a ECW file with GDAL. It's taking several hours
> to get an equivalent GeoTIFF file, executing gdal_translate. Besides, the
> ECW file is 1.9GB and the resulting GeoTIFF is 21GB. 

Not choking at all.

> The CPU is at almost
> 80% during the read operation.

Not choking at all. ECW decompression is expected to burn CPU

> 
> I don't know why there isn't srid information, but it should be epsg:2158

The mapping from ECW way of encoding SRS to WKT is far from being perfect. Try 
enabling CPL_DEBUG=ECW, and if there's some SRS information in the ECW file, 
you should see a line like :

ECW: projection=GEODETIC, datum=WGS84, units=DEGREES

> 
> I guess the speed depends on the reading strategy (looking at debug
> messages, looks like the driver is reading line by line), and you may get
> better performance combining ECW specific options with GDAL general
> options.
> 
> I'm using GDAL 1.10 and ECW 3.3. I've read about a known bug with ECW 3.3
> and machines with more than 8GB RAM
> (http://osgeo-org.1560.x6.nabble.com/Re-Qgis-developer-Large-raster-ecw-id
> entify-very-long-td4996966.html), but it's not my case.
> 
> Is there any know strategy to make the ECW driver reading faster? I'm just
> executing these operations:
> 
> - For the GeoTiff transformation:
> 
> gdal_translate -a_srs epsg:2158 PNOA_MR_OF_ETRS89_HU29_h50_0223.ecw
> PNOA_MR_OF_ETRS89_HU29_h50_0223.tif

Yes tweaking ECW reading performance can be tricky. I've done a few 
experiments (on a 3 band 141970x141970 Landsat ECW) , and couldn't really 
found something that would improve things dramatically.
You can try defining the GDAL_SWATH_SIZE configuration option to a bigger value 
than its default (the default is 10 MB). Beware you must specify the value in 
bytes (lot of zeros). I've tried with 100 MB or 500 MB but couldn't really 
observe a real improvement.

Note: to benefit from the option, I'd recommand that you just do 
"gdal_translate src.ecw out.tif" and remove the -a_srs option, that would use 
intermediary VRT. You can alter the SRS of out.tif with the gdal_edit.py 
script.

I've also tried the following patch that indicates to the ECW driver that we 
will read the whole image at full resolution, but it seemed to decrease 
performance a bit...

Index: gcore/rasterio.cpp
===================================================================
--- gcore/rasterio.cpp	(revision 26076)
+++ gcore/rasterio.cpp	(working copy)
@@ -2927,6 +2927,16 @@
             "GDALDatasetCopyWholeRaster(): %d*%d swaths, bInterleave=%d", 
             nSwathCols, nSwathLines, bInterleave );
 
+    int* panBandMap = (int*) CPLMalloc(sizeof(int) * nBandCount);
+    int i;
+    for(i=0;i<nBandCount;i++)
+        panBandMap[i] = i + 1;
+    GDALDatasetAdviseRead( (GDALDatasetH)poSrcDS, 
+                           0, 0, nXSize, nYSize,
+                           nXSize, nYSize, eDT,
+                           nBandCount, panBandMap, NULL );
+    CPLFree(panBandMap);
+
 /* ==================================================================== */
 /*      Band oriented (uninterleaved) case.                             */
 /* ==================================================================== */

> 
> - For the PostGIS Raster loading:
> 
> raster2pgsql -s epsg:2158 -t 15x15 -I -M -C -Y
> PNOA_MR_OF_ETRS89_HU29_h50_0223.ecw > output.sql (I've tried with
> different tile sizes, with the same result)

raster2pgsql uses its own reading logic, so the above tricks might not apply. 
-t 15x15 looks like a really tiny value. That will cause a lot of overhead in 
the database I think. 256x256 would probably be better.

> 
> Any clues?
> 
> Many thanks in advance,

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Fri Jun 14 11:58:19 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 14 Jun 2013 20:58:19 +0200
Subject: [gdal-dev] SQLite driver and drop table problem
In-Reply-To: <51BB5E6B.8090801@cgis.pl>
References: <51BB5E6B.8090801@cgis.pl>
Message-ID: <201306142058.19735.even.rouault@mines-paris.org>

Le vendredi 14 juin 2013 20:18:19, Piotr Tracz a ?crit :
> Hello,
> 
> I think there might be a bug in OGRSQLiteDataSource::ExecuteSQL but
> before I make bug ticket, I want to be sure I'm not missing anything.
> When one try to execute SQL command "DROP TABLE xxx", error "In
> ExecuteSQL(): sqlite3_step(DROP TABLE xxx):
>    SQL logic error or missing database" occurs.
> 
>   I think this error is related to how SQLite behaves: DROP TABLE can be
> only executed by sqlite3_exec while GDAL is trying to do that by
>   sqlite3_prepare ->  sqlite3_step -> sqlite3_finalize chain.
> 
> Bug is related to GDAL 1.10 version (however previous behaves the same)
> compiled aganist SQLITE 3.7.x.

Can you try downloading 
http://svn.osgeo.org/gdal/trunk/autotest/ogr/data/poly_spatialite.sqlite and 
then do : ogrinfo poly_spatialite.sqlite -sql "drop table poly" ?

This works for me with SQLITE 3.6.22 and 3.7.13.

> 
> Regards,
> 
> Piotr
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From piotr at cgis.pl  Fri Jun 14 13:15:39 2013
From: piotr at cgis.pl (Piotr Tracz)
Date: Fri, 14 Jun 2013 22:15:39 +0200
Subject: [gdal-dev] SQLite driver and drop table problem
In-Reply-To: <201306142058.19735.even.rouault@mines-paris.org>
References: <51BB5E6B.8090801@cgis.pl>
	<201306142058.19735.even.rouault@mines-paris.org>
Message-ID: <51BB79EB.2030704@cgis.pl>

W dniu 2013-06-14 20:58, Even Rouault pisze:
> http://svn.osgeo.org/gdal/trunk/autotest/ogr/data/poly_spatialite.sqlite and
> then do : ogrinfo poly_spatialite.sqlite -sql "drop table poly" ?
>
> This works for me with SQLITE 3.6.22 and 3.7.13.
>
Yes it works.
False alarm. Error was a reason of some orphaned OGRLayer pointer in 
totally different part of codesource.

Best regards,

Piotr










From warmerdam at pobox.com  Fri Jun 14 14:23:49 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 14 Jun 2013 14:23:49 -0700
Subject: [gdal-dev] Motion: Commit Access for Wolf Bergenheim
In-Reply-To: <CA+YzLBfykrQsFnGUNWP9bC6AVRUYV_rtuy=dHSEn0nXqvSvjkw@mail.gmail.com>
References: <CA+YzLBfykrQsFnGUNWP9bC6AVRUYV_rtuy=dHSEn0nXqvSvjkw@mail.gmail.com>
Message-ID: <CA+YzLBcQwCj9F=3bMWchnPrQNdcGzx+wYYzqW1Fh5draFNccsw@mail.gmail.com>

On Wed, Jun 12, 2013 at 2:09 PM, Frank Warmerdam <warmerdam at pobox.com>wrote:

> Motion: Extend GDAL/OGR commit access to Wolf Bergenheim.
>
>
>
Folks,

I declare this motion passed with PSC support from Even, Howard, Daniel,
and Tamas.

Welcome Wolf!  I've enabled your commit access.  Your first task is to add
yourself to the COMMITERS file in the main gdal directory.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130614/0694b61f/attachment.html>

From jorgearevalo at libregis.org  Fri Jun 14 16:41:07 2013
From: jorgearevalo at libregis.org (=?utf-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Sat, 15 Jun 2013 01:41:07 +0200
Subject: [gdal-dev] ECW reading is taking too much time
In-Reply-To: <201306142050.42713.even.rouault@mines-paris.org>
References: <8F11C2E45C7546FFB4B362A4DCF6A8AE@libregis.org>
	<201306142050.42713.even.rouault@mines-paris.org>
Message-ID: <B74474C0B56E4F5AA565CC2966D781F2@libregis.org>

Hello,  


El viernes 14 de junio de 2013 a las 20:50, Even Rouault escribi?:

> Le vendredi 14 juin 2013 19:43:22, Jorge Ar?valo a ?crit :
> > Hello,
> >  
> > I'm having problems reading a ECW file with GDAL. It's taking several hours
> > to get an equivalent GeoTIFF file, executing gdal_translate. Besides, the
> > ECW file is 1.9GB and the resulting GeoTIFF is 21GB.  
>  
>  
>  
> Not choking at all.
>  
> > The CPU is at almost
> > 80% during the read operation.
>  
>  
>  
> Not choking at all. ECW decompression is expected to burn CPU
>  
> >  
> > I don't know why there isn't srid information, but it should be epsg:2158
>  
> The mapping from ECW way of encoding SRS to WKT is far from being perfect. Try  
> enabling CPL_DEBUG=ECW, and if there's some SRS information in the ECW file,  
> you should see a line like :
>  
> ECW: projection=GEODETIC, datum=WGS84, units=DEGREES
>  
Yes. This is what I see

ECW: projection=NUTM29, datum=ETRS89, units=METERS

That is http://spatialreference.org/ref/epsg/25829/, not epsg:2158. I was wrong.

Many thanks!
  
>  
> >  
> > I guess the speed depends on the reading strategy (looking at debug
> > messages, looks like the driver is reading line by line), and you may get
> > better performance combining ECW specific options with GDAL general
> > options.
> >  
> > I'm using GDAL 1.10 and ECW 3.3. I've read about a known bug with ECW 3.3
> > and machines with more than 8GB RAM
> > (http://osgeo-org.1560.x6.nabble.com/Re-Qgis-developer-Large-raster-ecw-id
> > entify-very-long-td4996966.html), but it's not my case.
> >  
> > Is there any know strategy to make the ECW driver reading faster? I'm just
> > executing these operations:
> >  
> > - For the GeoTiff transformation:
> >  
> > gdal_translate -a_srs epsg:2158 PNOA_MR_OF_ETRS89_HU29_h50_0223.ecw
> > PNOA_MR_OF_ETRS89_HU29_h50_0223.tif
>  
>  
>  
> Yes tweaking ECW reading performance can be tricky. I've done a few  
> experiments (on a 3 band 141970x141970 Landsat ECW) , and couldn't really  
> found something that would improve things dramatically.
> You can try defining the GDAL_SWATH_SIZE configuration option to a bigger value  
> than its default (the default is 10 MB). Beware you must specify the value in  
> bytes (lot of zeros). I've tried with 100 MB or 500 MB but couldn't really  
> observe a real improvement.
>  
> Note: to benefit from the option, I'd recommand that you just do  
> "gdal_translate src.ecw out.tif" and remove the -a_srs option, that would use  
> intermediary VRT. You can alter the SRS of out.tif with the gdal_edit.py  
> script.
>  
That actually worked fine. I got a 40% GeoTIFF version. I built some overviews and added srs with gdal_edit.py, as you suggested. The quality is enough for me, and the size of the file, overviews included, is about 8GB. Not so big. Many thanks again!

> I've also tried the following patch that indicates to the ECW driver that we  
> will read the whole image at full resolution, but it seemed to decrease  
> performance a bit...
>  
> Index: gcore/rasterio.cpp
> ===================================================================
> --- gcore/rasterio.cpp (revision 26076)
> +++ gcore/rasterio.cpp (working copy)
> @@ -2927,6 +2927,16 @@
> "GDALDatasetCopyWholeRaster(): %d*%d swaths, bInterleave=%d",  
> nSwathCols, nSwathLines, bInterleave );
>  
> + int* panBandMap = (int*) CPLMalloc(sizeof(int) * nBandCount);
> + int i;
> + for(i=0;i<nBandCount;i++)
> + panBandMap[i] = i + 1;
> + GDALDatasetAdviseRead( (GDALDatasetH)poSrcDS,  
> + 0, 0, nXSize, nYSize,
> + nXSize, nYSize, eDT,
> + nBandCount, panBandMap, NULL );
> + CPLFree(panBandMap);
> +
> /* ==================================================================== */
> /* Band oriented (uninterleaved) case. */
> /* ==================================================================== */
>  
My CPU is burning again, but doesn't matter. With the 40% outsize is enough.
  
>  
> >  
> > - For the PostGIS Raster loading:
> >  
> > raster2pgsql -s epsg:2158 -t 15x15 -I -M -C -Y
> > PNOA_MR_OF_ETRS89_HU29_h50_0223.ecw > output.sql (I've tried with
> > different tile sizes, with the same result)
>  
>  
>  
> raster2pgsql uses its own reading logic, so the above tricks might not apply.  
> -t 15x15 looks like a really tiny value. That will cause a lot of overhead in  
> the database I think. 256x256 would probably be better.
>  
Yes. I was trying with several scenarios (small tiles than fit in postgres page size, and some other tests). But this tiny tile size causes an overhead that burns the cpu again. So, I'll look for a bigger one.

Great help, thanks again!
  
>  
> >  
> > Any clues?
> >  
> > Many thanks in advance,
>  
> --  
> Geospatial professional services
> http://even.rouault.free.fr/services.html




From jorgearevalo at libregis.org  Fri Jun 14 16:56:26 2013
From: jorgearevalo at libregis.org (=?utf-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Sat, 15 Jun 2013 01:56:26 +0200
Subject: [gdal-dev] GDAL formats list order
Message-ID: <A00FA6F41C7B463583E0FC23A106EF94@libregis.org>

Hello, 

I read at http://trac.osgeo.org/gdal/wiki/GDAL20Changes that GDAL formats, when calling gdalinfo --formats, "are returned in a meaningful order - the order they are tried - which is important to know sometimes".

I see at http://trac.osgeo.org/gdal/browser/tags/1.10.0/gdal/frmts/gdalallregister.cpp several calls to GDALRegister_X, in what looks like an arbitrary order to me. Seems to have "groups". Apart from that, older drivers first?

Is there any reason to choose that order?

Many thanks in advance, 

-- 
Jorge Arevalo
Freelance developer

http://www.krop.com/jorgearevalo
http://about.me/jorgeas80

Enviado con Sparrow (http://www.sparrowmailapp.com/?sig)



From taibc_coltech at yahoo.com  Fri Jun 14 18:14:42 2013
From: taibc_coltech at yahoo.com (taibc)
Date: Fri, 14 Jun 2013 18:14:42 -0700 (PDT)
Subject: [gdal-dev] Using OGRLayer::GetNextFeature() to read Dgn file ?
In-Reply-To: <1371196952624-5060084.post@n6.nabble.com>
References: <1371196952624-5060084.post@n6.nabble.com>
Message-ID: <1371258882980-5060290.post@n6.nabble.com>

The problem is: after the last while loop. I need to set SetSpatialFilter and
Feature again (The spatialfilter that used in the previous while loop), by
using below codes:

poLayer->SetSpatialFilter (poGeometry);
poLayer->SetNextByIndex (index2-1);

Kind regards,

Tai



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Using-OGRLayer-GetNextFeature-to-read-Dgn-file-tp5060084p5060290.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From ivan.lucena at princeton-ma.us  Sat Jun 15 04:09:15 2013
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Sat, 15 Jun 2013 06:09:15 -0500
Subject: [gdal-dev] =?iso-8859-1?q?GDAL_formats_list_order?=
In-Reply-To: <A00FA6F41C7B463583E0FC23A106EF94@libregis.org>
References: <A00FA6F41C7B463583E0FC23A106EF94@libregis.org>
Message-ID: <20130615110915.28867.qmail@s466.sureserver.com>

Hi Jorge

"Arbitrariness is a term given to choices and actions 
subject to individual will, judgment or preference, based 
solely upon an individual's opinion or discretion."  
Wikipedia

That's sounds about right.

There are several different cases and reason for a driver 
be moved up or down on that list. For example, if a 
format is not safely identified, if it doesn't have a MIME 
header, and if we have cases where it catches somebody 
else files, we move it down on the list.

>  -------Original Message-------
>  From: Jorge Ar?valo <jorgearevalo at libregis.org>
>  To: gdal-dev at lists.osgeo.org
>  Subject: [gdal-dev] GDAL formats list order
>  Sent: Jun 14 '13 18:56
>  
>  Hello,
>  
>  I read at 
http://trac.osgeo.org/gdal/wiki/GDAL20Changes that 
GDAL formats, when calling gdalinfo --formats, "are 
returned in a meaningful order - the order they are tried - 
which is important to know sometimes".
>  
>  I see at 
http://trac.osgeo.org/gdal/browser/tags/1.10.0/gdal/frmts/
gdalallregister.cpp several calls to GDALRegister_X, in 
what looks like an arbitrary order to me. Seems to have 
"groups". Apart from that, older drivers first?
>  
>  Is there any reason to choose that order?
>  
>  Many thanks in advance,
>  
>  --
>  Jorge Arevalo
>  Freelance developer
>  
>  http://www.krop.com/jorgearevalo
>  http://about.me/jorgeas80
>  
>  Enviado con Sparrow 
(http://www.sparrowmailapp.com/?sig)
>  
>  
>  
_____________________________________________
__
>  gdal-dev mailing list
>  gdal-dev at lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  

From P.Scadden at gns.cri.nz  Sat Jun 15 18:35:31 2013
From: P.Scadden at gns.cri.nz (Phil Scadden)
Date: Sun, 16 Jun 2013 13:35:31 +1200
Subject: [gdal-dev] Combining quantized png files in gdal2tiles
In-Reply-To: <kpfbd6$rph$1@ger.gmane.org>
References: <kpfbd6$rph$1@ger.gmane.org>,
	<51B94AAC.60808@gns.cri.nz>	<201306140005.21241.even.rouault@mines-paris.org>
	<51BA472C.5070004@gns.cri.nz>	<201306140038.07321.even.rouault@mines-paris.org>
	<51BA4DF7.8070001@gns.cri.nz>
Message-ID: <OF030E73D4.3902035D-ONCC257B8C.0008BEA7-CC257B8C.0008BEA9@gns.cri.nz>

Thanks for that Andre. I have been looking over code in cpt2rbg.py and that gives my more insight into what is going on. I think I will try to build that cpt2rbga directly into gdal2tiles.py.

Notice: This email and any attachments are confidential.
If received in error please destroy and immediately notify us.
Do not copy or disclose the contents.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130616/4e1cc37b/attachment.html>

From otrov at hush.ai  Sun Jun 16 09:17:27 2013
From: otrov at hush.ai (zetah)
Date: Sun, 16 Jun 2013 18:17:27 +0200
Subject: [gdal-dev] Offset shapefile to start from prime meridian
Message-ID: <20130616161728.5DEFD600DB@smtp.hushmail.com>

I have Natural Earth shapefile covering whole globe in -180:180 range. I want to offset this file, so that it starts from Greenwich prime meridian instead -180.

How can I do this with gdal/ogr?

Thanks in advance


From thare at usgs.gov  Sun Jun 16 11:02:30 2013
From: thare at usgs.gov (Hare, Trent)
Date: Sun, 16 Jun 2013 11:02:30 -0700
Subject: [gdal-dev] Offset shapefile to start from prime meridian
In-Reply-To: <20130616161728.5DEFD600DB@smtp.hushmail.com>
References: <20130616161728.5DEFD600DB@smtp.hushmail.com>
Message-ID: <CAB6t5t8Bi44pRKgHejOWAd2PRaJawrtrFECkVjJ_iZiooYWXBQ@mail.gmail.com>

There is a great method to do this virtually using GDAL's VRT format.
Unfortunately it looks like this site has died but the wayback machine has
a snapshot of it. Definitely a good tutorial to keep around -- I use this
trick all the time.

http://web.archive.org/web/20110406210056/http://www1.eonfusion.com/manual/index.php/Manipulate_rasters_with_GDAL_VRT

good luck,
Trent


On Sun, Jun 16, 2013 at 9:17 AM, zetah <otrov at hush.ai> wrote:

> I have Natural Earth shapefile covering whole globe in -180:180 range. I
> want to offset this file, so that it starts from Greenwich prime meridian
> instead -180.
>
> How can I do this with gdal/ogr?
>
> Thanks in advance
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130616/c970b8f7/attachment.html>

From pierric7 at yahoo.com  Sun Jun 16 13:19:21 2013
From: pierric7 at yahoo.com (Pierric)
Date: Sun, 16 Jun 2013 13:19:21 -0700 (PDT)
Subject: [gdal-dev] gdal_grid  - VRT - flipped image
Message-ID: <1371413961.75416.YahooMailNeo@web160205.mail.bf1.yahoo.com>

Hello,

By using the following commands, it creates a raster which is opened and shown correctly in GIS software but it is displaid upside down in an image viewer or internet browser. ( gdalinfo gives? Upper Right (? 11.0000000,? 10.0000000) and Lower Right (? 11.0000000,? 70.0000000)? which shows image is upside down somehow )

Could you please help me to understand why ??? 

I use GDAL_grid to convert a list of coordinates into a raster (interpolated). 

- VRT file I use is :

<OGRVRTDataSource>
??? <OGRVRTLayer name="lonlat">
??????? <SrcDataSource>lonlat.csv</SrcDataSource> 
??? <GeometryType>wkbPoint</GeometryType>
??? <GeometryField encoding="PointFromColumns" x="longitude" y="latitude" z="ssha"/> 
??? </OGRVRTLayer>
</OGRVRTDataSource>



- Command is :


> gdal_grid -a invdist:power=3.0:smoothing=0.0: -zfield "ssha" -outsize 20 10 -ot Int16? -a_srs EPSG:4326 -of GTiff -l lonlat lonlat.vrt A.tiff --config GDAL_NUM_THREADS ALL_CPUS


>? gdalinfo A.tif


Size is 20, 10
Coordinate System is:
GEOGCS["WGS 84",
??? DATUM["WGS_1984",
??????? SPHEROID["WGS 84",6378137,298.257223563,
??????????? AUTHORITY["EPSG","7030"]],
??????? AUTHORITY["EPSG","6326"]],
??? PRIMEM["Greenwich",0],
??? UNIT["degree",0.0174532925199433],
??? AUTHORITY["EPSG","4326"]]
Origin = (-80.000000000000000,10.000000000000000)
Pixel Size = (4.550000000000000,6.000000000000000)
Metadata:
? AREA_OR_POINT=Area
Image Structure Metadata:
? INTERLEAVE=BAND
Corner Coordinates:
Upper Left? ( -80.0000000,? 10.0000000)
Lower Left? ( -80.0000000,? 70.0000000)
Upper Right (? 11.0000000,? 10.0000000)
Lower Right (? 11.0000000,? 70.0000000)
Center????? ( -34.5000000,? 40.0000000)

From otrov at hush.ai  Sun Jun 16 13:21:36 2013
From: otrov at hush.ai (zetah)
Date: Sun, 16 Jun 2013 22:21:36 +0200
Subject: [gdal-dev] Offset shapefile to start from prime meridian
In-Reply-To: <CAB6t5t8Bi44pRKgHejOWAd2PRaJawrtrFECkVjJ_iZiooYWXBQ@mail.gmail.com>
References: <20130616161728.5DEFD600DB@smtp.hushmail.com>
	<CAB6t5t8Bi44pRKgHejOWAd2PRaJawrtrFECkVjJ_iZiooYWXBQ@mail.gmail.com>
Message-ID: <20130616202137.6A416600DB@smtp.hushmail.com>

Trent Hare wrote:
>
>There is a great method to do this virtually using GDAL's VRT format.
>Unfortunately it looks like this site has died but the wayback machine has
>a snapshot of it. Definitely a good tutorial to keep around -- I use this
>trick all the time.
>
>http://web.archive.org/web/20110406210056/http://www1.eonfusion.com
>/manual/index.php/Manipulate_rasters_with_GDAL_VRT

Hi Trent,

that's nice trick indeed, thanks. However shapefile as vector can't be converted
to virtual raster.

I thought that it's my lack of understanding ogr2org switches, as I didn't expected
that this is more then trivial task, like it must be possible to represent global map
starting from prime meridian other way then cropping the map on half?


From even.rouault at mines-paris.org  Sun Jun 16 13:25:14 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 16 Jun 2013 22:25:14 +0200
Subject: [gdal-dev] gdal_grid  - VRT - flipped image
In-Reply-To: <1371413961.75416.YahooMailNeo@web160205.mail.bf1.yahoo.com>
References: <1371413961.75416.YahooMailNeo@web160205.mail.bf1.yahoo.com>
Message-ID: <201306162225.14579.even.rouault@mines-paris.org>

Le dimanche 16 juin 2013 22:19:21, Pierric a ?crit :
> Hello,
> 
> By using the following commands, it creates a raster which is opened and
> shown correctly in GIS software but it is displaid upside down in an image
> viewer or internet browser. ( gdalinfo gives  Upper Right (  11.0000000, 
> 10.0000000) and Lower Right (  11.0000000,  70.0000000)  which shows image
> is upside down somehow )
> 
> Could you please help me to understand why ?  

Well, this is the behaviour of the utility that puts a correct, but unusual 
georeferencing. You can flip the image back to normal convention by using 
"gdalwarp src.tif out.tif" where src.tif if the output of gdal_grid.

> 
> I use GDAL_grid to convert a list of coordinates into a raster
> (interpolated).
> 
> - VRT file I use is :
> 
> <OGRVRTDataSource>
>     <OGRVRTLayer name="lonlat">
>         <SrcDataSource>lonlat.csv</SrcDataSource>
>     <GeometryType>wkbPoint</GeometryType>
>     <GeometryField encoding="PointFromColumns" x="longitude" y="latitude"
> z="ssha"/> </OGRVRTLayer>
> </OGRVRTDataSource>
> 
> - Command is :
> > gdal_grid -a invdist:power=3.0:smoothing=0.0: -zfield "ssha" -outsize 20
> > 10 -ot Int16  -a_srs EPSG:4326 -of GTiff -l lonlat lonlat.vrt A.tiff
> > --config GDAL_NUM_THREADS ALL_CPUS
> >
> >  gdalinfo A.tif
> 
> Size is 20, 10
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433],
>     AUTHORITY["EPSG","4326"]]
> Origin = (-80.000000000000000,10.000000000000000)
> Pixel Size = (4.550000000000000,6.000000000000000)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  ( -80.0000000,  10.0000000)
> Lower Left  ( -80.0000000,  70.0000000)
> Upper Right (  11.0000000,  10.0000000)
> Lower Right (  11.0000000,  70.0000000)
> Center      ( -34.5000000,  40.0000000)
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From weliam.cloud at gmail.com  Sun Jun 16 16:13:04 2013
From: weliam.cloud at gmail.com (William Kang)
Date: Sun, 16 Jun 2013 19:13:04 -0400
Subject: [gdal-dev] Project with projection
Message-ID: <CAA9ouV4orLJSQpEef50dyF7wKhyij2Q3xL2WKyjRL9kSyZincg@mail.gmail.com>

Hi,
I am tyring to GDal to convert some data from
USA_Contiguous_Albers_Equal_Area_Conic_USGS (
http://spatialreference.org/ref/sr-org/7480/) to WGS 84. But I got an error
"ERROR 6: No translation for Albers to PROJ.4 format is known." Does this
mean I won't be able to convert these data by using GDal?
Can anyone help me with this?
Many thanks!


William
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130616/7afc33af/attachment.html>

From thare at usgs.gov  Sun Jun 16 16:57:20 2013
From: thare at usgs.gov (Hare, Trent)
Date: Sun, 16 Jun 2013 16:57:20 -0700
Subject: [gdal-dev] Offset shapefile to start from prime meridian
In-Reply-To: <20130616202137.6A416600DB@smtp.hushmail.com>
References: <20130616161728.5DEFD600DB@smtp.hushmail.com>
	<CAB6t5t8Bi44pRKgHejOWAd2PRaJawrtrFECkVjJ_iZiooYWXBQ@mail.gmail.com>
	<20130616202137.6A416600DB@smtp.hushmail.com>
Message-ID: <CAB6t5t8dHSDQp3Jv7DzvGthNUX0reX_reDN9Ge8+3c11UBy2Xw@mail.gmail.com>

Zetah,
   Oops - I skipped passed the fact you were working with vectors. I read
"Natural Earth" and assumed the nice hillshade images they support.

Converting from 180 -> 360 -> 180 is a something we often have to do for
planetary data. My colleague Jay (CC'd) has written an OGR script to
convert from 360 -> 180 but it requires OGR and Shapely. Shapely is used
for line and polygon intersections (to split the boundary cases before
shifting). Converting it to 180 -> 360 should be simple. Hopefully Jay can
post it for the group.

Other options:
(1) As you can see here, you might have luck using OGR if you have no
features that cross 0:
http://lists.osgeo.org/pipermail/gdal-dev/2006-June/009293.html

(2) ArcMap - This tool by Jeff Jeneness has a wrap boundary script:
http://www.jennessent.com/arcgis/shapes_graphics.htm

(3) For simple points, here is an older OGR example script:
https://isis.astrogeology.usgs.gov/IsisSupport/index.php/topic,3722.0.html

-Trent



On Sun, Jun 16, 2013 at 1:21 PM, zetah <otrov at hush.ai> wrote:

> Trent Hare wrote:
> >
> >There is a great method to do this virtually using GDAL's VRT format.
> >Unfortunately it looks like this site has died but the wayback machine has
> >a snapshot of it. Definitely a good tutorial to keep around -- I use this
> >trick all the time.
> >
> >http://web.archive.org/web/20110406210056/http://www1.eonfusion.com
> >/manual/index.php/Manipulate_rasters_with_GDAL_VRT
>
> Hi Trent,
>
> that's nice trick indeed, thanks. However shapefile as vector can't be
> converted
> to virtual raster.
>
> I thought that it's my lack of understanding ogr2org switches, as I didn't
> expected
> that this is more then trivial task, like it must be possible to represent
> global map
> starting from prime meridian other way then cropping the map on half?
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130616/7b1b2a31/attachment.html>

From otrov at hush.ai  Sun Jun 16 19:35:38 2013
From: otrov at hush.ai (zetah)
Date: Mon, 17 Jun 2013 04:35:38 +0200
Subject: [gdal-dev] Offset shapefile to start from prime meridian
In-Reply-To: <CAB6t5t8dHSDQp3Jv7DzvGthNUX0reX_reDN9Ge8+3c11UBy2Xw@mail.gmail.com>
References: <20130616161728.5DEFD600DB@smtp.hushmail.com>
	<CAB6t5t8Bi44pRKgHejOWAd2PRaJawrtrFECkVjJ_iZiooYWXBQ@mail.gmail.com>
	<20130616202137.6A416600DB@smtp.hushmail.com>
	<CAB6t5t8dHSDQp3Jv7DzvGthNUX0reX_reDN9Ge8+3c11UBy2Xw@mail.gmail.com>
Message-ID: <20130617023538.A1732600DB@smtp.hushmail.com>

Trent Hare wrote:
>
>Zetah,
>   Oops - I skipped passed the fact you were working with vectors. 
>I read "Natural Earth" and assumed the nice hillshade images they support.
>
>Converting from 180 -> 360 -> 180 is a something we often have to 
>do for planetary data. My colleague Jay (CC'd) has written an OGR script 
>to convert from 360 -> 180 but it requires OGR and Shapely. Shapely 
>is used for line and polygon intersections (to split the boundary cases 
>before shifting). Converting it to 180 -> 360 should be simple. Hopefully 
>Jay can post it for the group.
>
>Other options:
>(1) As you can see here, you might have luck using OGR if you have 
>no features that cross 0:
>http://lists.osgeo.org/pipermail/gdal-dev/2006-June/009293.html
>
>(2) ArcMap - This tool by Jeff Jeneness has a wrap boundary script:
>http://www.jennessent.com/arcgis/shapes_graphics.htm
>
>(3) For simple points, here is an older OGR example script:
>https://isis.astrogeology.usgs.gov/IsisSupport/index.php/topic,3722.0.html

Trent, thanks for you reply

I now see that translating polygons is a problem. I followed discussion linked in
first option, but result is messy as polygons are crossing prime meridian.
Unfortunately I don't have Arcmap nor my shape file has simple points.

I do have Shapely, but didn't really used it much. Once I did script to geocode 
points to countries and that's all about me and Shapely IIRC. I'll pass manipulating
vector geometries without a GUI ;)

Followed by your first reply I thought to try and convert to other vector format
and then tweak the values, but none seems applicable. I meant to use XSL
but soon gave up, after looking at the contents of any XML format produced
by ogr2ogr...


From freimuth69 at gmail.com  Sun Jun 16 20:50:00 2013
From: freimuth69 at gmail.com (Peter Freimuth)
Date: Sun, 16 Jun 2013 21:50:00 -0600
Subject: [gdal-dev] Reducing the size of a GeoTIFF file with significant
	blackfill
Message-ID: <C8120E2F-701B-4C2E-9F15-FE064A713CE8@gmail.com>

Hi,

I have a 5 band, 16-bit orthorectified GeoTIFF from a satellite image that contains a significant amount of blackfill and has a file size of over 21GB. I would like to decrease the file size by eliminating or negating the blackfill. I have attempted to use the SPARSE_OK option in GDAL as such:

gdal_translate -of GTiff -co "BIGTIFF=YES" -co "SPARSE_OK=TRUE" -co "TILED=YES" input.tif output.tif

This has had no effect on the file size. Is my understanding of how SPARSE_OK works incorrect or is there a potential problem with the SPARSE_OK option? Is there a better way of reducing the file size? I have tried "COMPRESS=DEFLATE", which works, but then the product is veryyyy slow  loading into the viewing software.

Any hint or better solution is highly welcome.

Best Regards,
Peter

-- 
Peter Freimuth 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130616/0d9e4fa8/attachment-0001.html>

From even.rouault at mines-paris.org  Mon Jun 17 01:48:13 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 17 Jun 2013 10:48:13 +0200
Subject: [gdal-dev] Reducing the size of a GeoTIFF file with significant
	blackfill
In-Reply-To: <C8120E2F-701B-4C2E-9F15-FE064A713CE8@gmail.com>
References: <C8120E2F-701B-4C2E-9F15-FE064A713CE8@gmail.com>
Message-ID: <1371458893.51becd4de04e7@imp.free.fr>

Selon Peter Freimuth <freimuth69 at gmail.com>:

> Hi,
>
> I have a 5 band, 16-bit orthorectified GeoTIFF from a satellite image that
> contains a significant amount of blackfill and has a file size of over 21GB.
> I would like to decrease the file size by eliminating or negating the
> blackfill. I have attempted to use the SPARSE_OK option in GDAL as such:
>
> gdal_translate -of GTiff -co "BIGTIFF=YES" -co "SPARSE_OK=TRUE" -co
> "TILED=YES" input.tif output.tif
>
> This has had no effect on the file size. Is my understanding of how SPARSE_OK
> works incorrect or is there a potential problem with the SPARSE_OK option?

Peter,

Yes, SPARSE_OK works but as not you intend it to. SPARSE_OK is usefull only when
you create a file with the Create() API. With SPARSE_OK, at dataset closing, it
will not try to instanciate tiles that have not been written. But with
gdal_translate, the CreateCopy() API is used and it will write each block of the
target datasets, so SPARSE_OK is useless.


> Is
> there a better way of reducing the file size? I have tried
> "COMPRESS=DEFLATE", which works, but then the product is veryyyy slow
> loading into the viewing software.

I've not really a ready-made solution for you, but I'm thinking of a possible
evolution where the GTiff driver would detect the tiles at 0 (or nodata value)
and would not write them physically (like SPARSE_OK does on a newly Create()'d
dataset), or would point them all on the same physical tile (but the later would
cause interesting issues in case of update).

Best regards,

Even

From pcorti at gmail.com  Mon Jun 17 01:52:18 2013
From: pcorti at gmail.com (Paolo Corti)
Date: Mon, 17 Jun 2013 10:52:18 +0200
Subject: [gdal-dev] Accessing to GRIB bands
Message-ID: <CAHXrU-Lhca3LWu9ViiPb31DBZtjvBwN20u9NL5qmP9WEWVQ5vw@mail.gmail.com>

Hi list
When working with NETCDF data I have always been finding extremely
useful the NETCDF:filename:variable_name syntax.
Now I have to process a large amount of GRIB data: do I understand
correctly that the GRIB driver does not support such a syntax?
In such a case, is there a way to access to a specific band with the
gdal_translate command to export a GRIB band to a different format, or
do I have to write script for that purpose?
thanks in advance!
regards
p

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti

From j.l.h.hartmann at uva.nl  Mon Jun 17 01:54:54 2013
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Mon, 17 Jun 2013 10:54:54 +0200
Subject: [gdal-dev] Reducing the size of a GeoTIFF file with significant
 blackfill
In-Reply-To: <1371458893.51becd4de04e7@imp.free.fr>
References: <C8120E2F-701B-4C2E-9F15-FE064A713CE8@gmail.com>
	<1371458893.51becd4de04e7@imp.free.fr>
Message-ID: <51BECEDE.2030709@uva.nl>

Hi Peter,

You can get a compress-ratio to about 10% of the original size with the 
GDAL option -co COMPRESS=JKEG -co PHOTOMETRIC=YCBCR. Perhaps even more 
for you sort of data. Of course that compression is lossy, so for 
archival purposes it is useless. For viewers, you won't note the 
difference and it is quite fast, especially if you use gdaladdo with the 
option --config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW YCBCR

Jan

On 06/17/2013 10:48 AM, Even Rouault wrote:
> Selon Peter Freimuth <freimuth69 at gmail.com>:
>
>> Hi,
>>
>> I have a 5 band, 16-bit orthorectified GeoTIFF from a satellite image that
>> contains a significant amount of blackfill and has a file size of over 21GB.
>> I would like to decrease the file size by eliminating or negating the
>> blackfill. I have attempted to use the SPARSE_OK option in GDAL as such:
>>
>> gdal_translate -of GTiff -co "BIGTIFF=YES" -co "SPARSE_OK=TRUE" -co
>> "TILED=YES" input.tif output.tif
>>
>> This has had no effect on the file size. Is my understanding of how SPARSE_OK
>> works incorrect or is there a potential problem with the SPARSE_OK option?
> Peter,
>
> Yes, SPARSE_OK works but as not you intend it to. SPARSE_OK is usefull only when
> you create a file with the Create() API. With SPARSE_OK, at dataset closing, it
> will not try to instanciate tiles that have not been written. But with
> gdal_translate, the CreateCopy() API is used and it will write each block of the
> target datasets, so SPARSE_OK is useless.
>
>
>> Is
>> there a better way of reducing the file size? I have tried
>> "COMPRESS=DEFLATE", which works, but then the product is veryyyy slow
>> loading into the viewing software.
> I've not really a ready-made solution for you, but I'm thinking of a possible
> evolution where the GTiff driver would detect the tiles at 0 (or nodata value)
> and would not write them physically (like SPARSE_OK does on a newly Create()'d
> dataset), or would point them all on the same physical tile (but the later would
> cause interesting issues in case of update).
>
> Best regards,
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130617/f4c70487/attachment.html>

From jukka.rahkonen at mmmtike.fi  Mon Jun 17 02:28:10 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 17 Jun 2013 09:28:10 +0000 (UTC)
Subject: [gdal-dev] Reducing the size of a GeoTIFF file with significant
	blackfill
References: <C8120E2F-701B-4C2E-9F15-FE064A713CE8@gmail.com>
	<1371458893.51becd4de04e7@imp.free.fr> <51BECEDE.2030709@uva.nl>
Message-ID: <loom.20130617T112159-976@post.gmane.org>

Jan Hartmann <j.l.h.hartmann <at> uva.nl> writes:

> 
> 
>     Hi Peter,
>       You can get a compress-ratio to about 10% of the original size
>       with the GDAL option -co COMPRESS=JKEG -co PHOTOMETRIC=YCBCR.
>       Perhaps even more for you sort of data. Of course that compression
>       is lossy, so for archival purposes it is useless. For viewers, you
>       won't note the difference and it is quite fast, especially if you
>       use gdaladdo with the option --config COMPRESS_OVERVIEW JPEG
>       --config PHOTOMETRIC_OVERVIEW YCBCR

We can't forecast the speed without knowing which viewer is used. They do
not all include GDAL. GDAL based viewer should have been fast already with
the COMPRESS=DEFLATE image at least with close zoom. Pyramid layers or
reduced resolution layers or overviews or how one wants to call them are
very good to have but that also depends on the viewer.

-Jukka Rahkonen-





From etienne.trimaille at gmail.com  Mon Jun 17 08:55:19 2013
From: etienne.trimaille at gmail.com (Etienne Trimaille)
Date: Mon, 17 Jun 2013 17:55:19 +0200
Subject: [gdal-dev] OGR API with an OSM file
Message-ID: <CAMtDFL+OqhqkeUc+35qGz_bkOk8ir=Y4646uyBEWJM8s4bAnYw@mail.gmail.com>

Hi,

I'm trying to use Python API with an OSM file.

According to the documentation of OSM driver, we can use a custom
OSM_CONFIG_FILE.
http://www.gdal.org/ogr/drv_osm.html

However, I can't find how to use my own config file with the API.

from osgeo import ogr

osmfile = 'test.osm'
driver = ogr.GetDriverByName('OSM')
datasource = driver.Open(osmfile)
layer = datasource.GetLayer()

Is there a way to use it ?

Thanks
Regards
Etienne
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130617/ee7489a8/attachment.html>

From jgrn at illinois.edu  Mon Jun 17 09:10:41 2013
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Mon, 17 Jun 2013 11:10:41 -0500
Subject: [gdal-dev] OGR slow with network files on Windows
In-Reply-To: <f939b8b2e2124bd4af60e560387e271f@CITESHT3.ad.uillinois.edu>
References: <CAEMrtYrG5fA1+RLif82T_RK+nWuiNAOLniw8yQuN2NVqYJ0Xhg@mail.gmail.com>
	<201304282126.46546.even.rouault@mines-paris.org>
	<CAEMrtYr2VhCa8Hor754waA5F__uvYq7BKNT-aYD7cgV=_rGmow@mail.gmail.com>
	<1367223811.517e2e0331817@imp.free.fr>
	<CAEMrtYpZNkBT63jkRaPH9x6_QfQuORdod7pEe92AHcCnOCvL4w@mail.gmail.com>
	<1367225750.517e359675640@imp.free.fr>
	<f939b8b2e2124bd4af60e560387e271f@CITESHT3.ad.uillinois.edu>
Message-ID: <CABG0rfsLo39jUt0yWKcaqC7wUXSfUDMB6GNrshGM_+q5wvvfrg@mail.gmail.com>

This is an old(ish) thread but I wanted to follow-up since I've been
dealing with SMB2 and GIS stuff recently and came across this in my
searches.  Some of this is specific to reading files from a Samba
server (linux, typically), but modern Windows file servers have a
similar problem.  A couple of notes that we found related to this:

1) oplocks may be a problem.  By disabling oplocks in SMB1, we saw
some of these issues go away.  In smb.conf (ask your network admin
about this):
[global]
...
kernel oplocks = no

[shared folder]
...
        oplocks = no
        level2 oplocks = no
        posix locking = no
        locking = no

(don't forget to restart the server, e.g. sudo service smb restart)

If the files are being shared up by Windows, try:
http://support.microsoft.com/kb/296264 (but note SMB2 can't have
oplocks disabled, see #2 below).

2) oplocks can NOT be disabled on SMB2 as far as I can tell, so there
is no way to fix this problem in SMB2 (or SMB3, AFAIK).  If you have
two Windows machines talking to each other, they are likely to be
using SMB2 (or maybe even SMB3).  You can determine this by using
Wireshark (http://www.wireshark.org/), and capturing when you start
doing work over the network.  If you see a column that says "SMB2" it
is using SMB2 (and oplocks will be running, and likely interfering
with DB-type operations).  If it says "SMB", then it is running SMB v.
1 and, with the right tweaks, you can disable oplocks (see (1) for
linux).

3) It is possible to force a Windows machine to use SMB1 only, but be
aware there are performance hits to non-DB-type processes that will
arise.  http://support.microsoft.com/kb/2696547 gives a good overview
of how to disable it on the client-side.  If you are using a Linux
samba server, set in smb.conf:
[global]
...
max protocol = NT1
(restart smbd via e.g. sudo service smb restart, but I had to actually
reboot the client machine for this to work -- you might get
authentication errors if you don't reboot the client machine).

Hope this helps some future folks!

--j

On Mon, Apr 29, 2013 at 4:07 AM, Radim Blazek <radim.blazek at gmail.com> wrote:
> On Mon, Apr 29, 2013 at 10:55 AM, Even Rouault
> <even.rouault at mines-paris.org> wrote:
>> Selon Radim Blazek <radim.blazek at gmail.com>:
>>
>>> On Mon, Apr 29, 2013 at 10:23 AM, Even Rouault
>>> <even.rouault at mines-paris.org> wrote:
>>> > I'm also wondering if setting unconditionnaly VSI_CACHE might not have some
>>> > theoretical penalty for fast access storage when there is a lot of seeking
>>> and
>>> > reading by small amounts (I believe this is the typical I/O pattern when
>>> you
>>> > display a JPEG2000). It might be relevant to have an option to enable
>>> > caching/buffering for files only located on SMB folders.
>>>
>>> How do you recognize if a file is SMB?
>>
>> I was wondering that too and hoped you would known the answer ;-) There's
>> perhaps a Windows API for that... ?
>
> There seems to be: GetVolumePathName + GetDriveType which should be
> DRIVE_REMOTE.
> maybe also PathIsNetworkPath.
>
> It seems to me that VSI cache as buffer (small VSI_CACHE_SIZE) should
> always be used on Windows by default with network files. It should go
> to OGR, I think.
>
> Radim
>
>> FWIK SMB filenames are in the form "servershared_folderxxxx" , but it can be
>> mounted on a drive, so it becomes "X:shared_folderxxxx". Perhaps there's a way
>> of resolving this to the original name ?
>>
>> But I'm not sure it is really needed either. Perhaps the theoretical performance
>> loss is neglectable in practice. I'm just throwing thoughts.
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Jonathan A. Greenberg, PhD
Assistant Professor
Global Environmental Analysis and Remote Sensing (GEARS) Laboratory
Department of Geography and Geographic Information Science
University of Illinois at Urbana-Champaign
607 South Mathews Avenue, MC 150
Urbana, IL 61801
Phone: 217-300-1924
http://www.geog.illinois.edu/~jgrn/
AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007

From jorgearevalo at libregis.org  Mon Jun 17 09:14:38 2013
From: jorgearevalo at libregis.org (=?utf-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Mon, 17 Jun 2013 18:14:38 +0200
Subject: [gdal-dev] GDAL formats list order
In-Reply-To: <20130615110915.28867.qmail@s466.sureserver.com>
References: <A00FA6F41C7B463583E0FC23A106EF94@libregis.org>
	<20130615110915.28867.qmail@s466.sureserver.com>
Message-ID: <7F93959344F149A7BE0E34AD59F1EC49@libregis.org>

Hi Ivan,  

Fine, that makes sense. So, experience and technical reasons qualify one driver to be up or down in the list. Thanks for the response.  

--  
Jorge Arevalo
Freelance developer

http://www.krop.com/jorgearevalo
http://about.me/jorgeas80

Enviado con Sparrow (http://www.sparrowmailapp.com/?sig)


El s?bado 15 de junio de 2013 a las 13:09, Ivan Lucena escribi?:

> Hi Jorge
>  
> "Arbitrariness is a term given to choices and actions  
> subject to individual will, judgment or preference, based  
> solely upon an individual's opinion or discretion."  
> Wikipedia
>  
> That's sounds about right.
>  
> There are several different cases and reason for a driver  
> be moved up or down on that list. For example, if a  
> format is not safely identified, if it doesn't have a MIME  
> header, and if we have cases where it catches somebody  
> else files, we move it down on the list.
>  
> > -------Original Message-------
> > From: Jorge Ar?valo <jorgearevalo at libregis.org (mailto:jorgearevalo at libregis.org)>
> > To: gdal-dev at lists.osgeo.org (mailto:gdal-dev at lists.osgeo.org)
> > Subject: [gdal-dev] GDAL formats list order
> > Sent: Jun 14 '13 18:56
> >  
> > Hello,
> >  
> > I read at  
>  
> http://trac.osgeo.org/gdal/wiki/GDAL20Changes that  
> GDAL formats, when calling gdalinfo --formats, "are  
> returned in a meaningful order - the order they are tried -  
> which is important to know sometimes".
> >  
> > I see at  
>  
> http://trac.osgeo.org/gdal/browser/tags/1.10.0/gdal/frmts/
> gdalallregister.cpp several calls to GDALRegister_X, in  
> what looks like an arbitrary order to me. Seems to have  
> "groups". Apart from that, older drivers first?
> >  
> > Is there any reason to choose that order?
> >  
> > Many thanks in advance,
> >  
> > --
> > Jorge Arevalo
> > Freelance developer
> >  
> > http://www.krop.com/jorgearevalo
> > http://about.me/jorgeas80
> >  
> > Enviado con Sparrow  
>  
> (http://www.sparrowmailapp.com/?sig)
>  
>  
> _____________________________________________
> __
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org (mailto:gdal-dev at lists.osgeo.org)
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  




From etourigny.dev at gmail.com  Mon Jun 17 13:19:07 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 17 Jun 2013 17:19:07 -0300
Subject: [gdal-dev] gdal_translate file naming for sds and HDF4 files
In-Reply-To: <CA+TxYvMd_0wGgR5SooyNq_D+TwwXfYG=D49VgP177RLDiKOofQ@mail.gmail.com>
References: <CABG0rfuv7fZHL19nXG4Wc5zOOwUvWT4chP8awoDRMRRFveUfQw@mail.gmail.com>
	<loom.20130530T214224-344@post.gmane.org>
	<bf5bcf3daa79433f99cfa4789a0f86b6@CHIHT1.ad.uillinois.edu>
	<CABG0rfv9a5sb4BJ3uj8+=JZsFOzTCxBY9bayvw0GTRMQ0LvBUw@mail.gmail.com>
	<CA+TxYvMd_0wGgR5SooyNq_D+TwwXfYG=D49VgP177RLDiKOofQ@mail.gmail.com>
Message-ID: <CA+TxYvOYinv9ZAZExi9khE_B4rYc8JQpwOd7cDu-7H+9cYY+Tw@mail.gmail.com>

I have created a ticket and a patch for this problem

http://trac.osgeo.org/gdal/ticket/5119


On Fri, May 31, 2013 at 3:28 PM, Etienne Tourigny
<etourigny.dev at gmail.com>wrote:

>
>
> On Fri, May 31, 2013 at 1:04 PM, Jonathan Greenberg <jgrn at illinois.edu>wrote:
>
>> Thanks -- I did notice it was an earlier version (switching to the latest
>> OSGeo4W), I apologize for not checking the latest, but as Etienne
>> confirmed, the bug seems to be there in the latest as well.  The HDF files
>> from various sources are so odd when it comes to naming layers, that this
>> SDS argument is really helpful (if it would name the files correctly).
>>
>> Speaking of -sds --> perhaps I can request that gdal_translate allow for
>> a layer # flag rather than the full layer name for subdataset files?  Is
>> this relatively easy to implement (since gdalinfo seems to already have the
>> capability)?
>>
>
> that depends on the driver actually... for hdf4 files normal syntax uses
> number, whereas the netcdf driver uses variable name (which is more
> informative). Changing this behaviour involves tweaking the driver code,
> not gdal_translate.
>
> e.g.
>
> SUBDATASET_1_NAME=HDF4_SDS:MODIS_L1B:GSUB1.A2001124.0855.003.200219309451.hdf:0
>
> SUBDATASET_1_NAME=NETCDF:"sst.nc":lon_bnds
>
> Now perhaps you mean to select a single dataset by number, without the
> full SUBDATASET_X_NAME syntax ?
>
> such as
> gdalinfo -subdatset 1 file.hdf
>
> which would be equivalent to
> gdalinfo HDF4_SDS:file.hdf:0
>
> that would be marginally handy, but not much as the rest of gdal uses the
> driver:file:subdataset syntax.
>
>
>> --j
>>
>>
>> On Thu, May 30, 2013 at 3:50 PM, Etienne Tourigny <
>> etourigny.dev at gmail.com> wrote:
>>
>>>
>>>
>>> On Thu, May 30, 2013 at 4:46 PM, Jukka Rahkonen <
>>> jukka.rahkonen at mmmtike.fi> wrote:
>>>
>>>> Jonathan Greenberg <jgrn <at> illinois.edu> writes:
>>>>
>>>> >
>>>> > Folks:
>>>> > I'm using a Windows install of GDAL 1.7.0 (FWTools) -- when I run:
>>>> >
>>>> > gdal_translate -sds -of "GTiff" [some.hdf] "myoutput"
>>>> > The output filenames do not have the .tif extension.  If I set the
>>>> output
>>>> file to "myoutput.tif", it appends the "layer numbers" to the end of the
>>>> file, e.g. myoutput.tif1.  Any tricks to getting the naming working
>>>> properly
>>>> (myoutput1.tif would be what I'd expect)?
>>>>
>>>>  Hi,
>>>>
>>>> First, acquire more fresh GDAL, current version is 1.10. Use OSGeo4W or
>>>> download Windows binaries from http://gisinternals.com/sdk/
>>>>
>>>
>>>  actually the same thing happens with gdal-1.10. I will prepare a bug
>>> report and fix.
>>>
>>>
>>>>
>>>>
>>>> Then, perhaps you should use gdalinfo first for seeing the exact names
>>>> of
>>>> layers as GDAL understands them and use such a layer name as input
>>>> instead
>>>> of [some.hdf]. Read usage examples from
>>>> http://www.gdal.org/frmt_hdf4.html
>>>>
>>>
>>>  the idea of using the -sds argument is to generate an output file for
>>> each subdataset, without having to search for subdataset names
>>>
>>>
>>>>
>>>>
>>>> -Jukka Rahkonen-
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>
>>
>> --
>> Jonathan A. Greenberg, PhD
>> Assistant Professor
>> Global Environmental Analysis and Remote Sensing (GEARS) Laboratory
>> Department of Geography and Geographic Information Science
>> University of Illinois at Urbana-Champaign
>> 607 South Mathews Avenue, MC 150
>> Urbana, IL 61801
>> Phone: 217-300-1924
>> http://www.geog.illinois.edu/~jgrn/
>> AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130617/172fcbcd/attachment.html>

From even.rouault at mines-paris.org  Mon Jun 17 15:45:19 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 18 Jun 2013 00:45:19 +0200
Subject: [gdal-dev] OGR API with an OSM file
In-Reply-To: <CAMtDFL+OqhqkeUc+35qGz_bkOk8ir=Y4646uyBEWJM8s4bAnYw@mail.gmail.com>
References: <CAMtDFL+OqhqkeUc+35qGz_bkOk8ir=Y4646uyBEWJM8s4bAnYw@mail.gmail.com>
Message-ID: <201306180045.19900.even.rouault@mines-paris.org>

Le lundi 17 juin 2013 17:55:19, Etienne Trimaille a ?crit :
> Hi,
> 
> I'm trying to use Python API with an OSM file.
> 
> According to the documentation of OSM driver, we can use a custom
> OSM_CONFIG_FILE.
> http://www.gdal.org/ogr/drv_osm.html
> 
> However, I can't find how to use my own config file with the API.
> 
> from osgeo import ogr

from osgeo import gdal
gdal.SetConfigOption('OSM_CONFIG_FILE', '/path/to/your/osmconf.ini')

> 
> osmfile = 'test.osm'
> driver = ogr.GetDriverByName('OSM')
> datasource = driver.Open(osmfile)
> layer = datasource.GetLayer()
> 
> Is there a way to use it ?
> 
> Thanks
> Regards
> Etienne

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Mon Jun 17 15:46:24 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 18 Jun 2013 00:46:24 +0200
Subject: [gdal-dev] Accessing to GRIB bands
In-Reply-To: <CAHXrU-Lhca3LWu9ViiPb31DBZtjvBwN20u9NL5qmP9WEWVQ5vw@mail.gmail.com>
References: <CAHXrU-Lhca3LWu9ViiPb31DBZtjvBwN20u9NL5qmP9WEWVQ5vw@mail.gmail.com>
Message-ID: <201306180046.24706.even.rouault@mines-paris.org>

Le lundi 17 juin 2013 10:52:18, Paolo Corti a ?crit :
> Hi list
> When working with NETCDF data I have always been finding extremely
> useful the NETCDF:filename:variable_name syntax.
> Now I have to process a large amount of GRIB data: do I understand
> correctly that the GRIB driver does not support such a syntax?

Yes

> In such a case, is there a way to access to a specific band with the
> gdal_translate command to export a GRIB band to a different format, or
> do I have to write script for that purpose?

From gdal_translate man page:

       -b band:
           Select an input band band for output. Bands are numbered from 1. 
Multiple -b switches may be used to select a set of input bands to write to 
the output file, or
           to reorder bands. Starting with GDAL 1.8.0, band can also be set to 
'mask,1' (or just 'mask') to mean the mask band of the first band of the input 
dataset.



> thanks in advance!
> regards
> p

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From pcorti at gmail.com  Mon Jun 17 16:16:08 2013
From: pcorti at gmail.com (Paolo Corti)
Date: Tue, 18 Jun 2013 01:16:08 +0200
Subject: [gdal-dev] Accessing to GRIB bands
In-Reply-To: <201306180046.24706.even.rouault@mines-paris.org>
References: <CAHXrU-Lhca3LWu9ViiPb31DBZtjvBwN20u9NL5qmP9WEWVQ5vw@mail.gmail.com>
	<201306180046.24706.even.rouault@mines-paris.org>
Message-ID: <CAHXrU-JrAExB=oHrhNKCD_PPenm+v9N3UYOo7xC4KfbC2h4J7Q@mail.gmail.com>

On Tue, Jun 18, 2013 at 12:46 AM, Even Rouault
<even.rouault at mines-paris.org> wrote:
>
> From gdal_translate man page:
>
>        -b band:
>            Select an input band band for output. Bands are numbered from 1.
> Multiple -b switches may be used to select a set of input bands to write to
> the output file, or
>            to reorder bands. Starting with GDAL 1.8.0, band can also be set to
> 'mask,1' (or just 'mask') to mean the mask band of the first band of the input
> dataset.

Hey Even

thanks for the reply.

I am well aware of the -b option, the problem here is that each raster
has not the same bands order.
Therefore, as I had to make some work on just one single band
representing the same variable in all of the datasets, I ended up to
write a script, iterate the datasets, then iterate the bands, read the
metadata, and when found the correct band ran the process on it.

thanks a lot in any case
cheers
p

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti

From rveciana at gmail.com  Tue Jun 18 03:42:28 2013
From: rveciana at gmail.com (Roger Veciana i Rovira)
Date: Tue, 18 Jun 2013 12:42:28 +0200
Subject: [gdal-dev] Fwd:  Accessing to GRIB bands
In-Reply-To: <CAJx2nomTHvBN2O3aNaWFZS-q41V=sznuBrNjDLFwv_Z38cgqQQ@mail.gmail.com>
References: <CAHXrU-Lhca3LWu9ViiPb31DBZtjvBwN20u9NL5qmP9WEWVQ5vw@mail.gmail.com>
	<201306180046.24706.even.rouault@mines-paris.org>
	<CAHXrU-JrAExB=oHrhNKCD_PPenm+v9N3UYOo7xC4KfbC2h4J7Q@mail.gmail.com>
	<CAJx2nomTHvBN2O3aNaWFZS-q41V=sznuBrNjDLFwv_Z38cgqQQ@mail.gmail.com>
Message-ID: <CAJx2no=66mT5tWtK3rheJJ5R64nVzDMBLmuc+EO9ez57gGVqrQ@mail.gmail.com>

Hi Paolo,

I think that you will need a script. At least in my case, every file has
the bands written in a different order, no using directly the band number
is not possible. The only way I have found is to read the file metadata
using a python script:

------

from osgeo import gdal
from osgeo.gdalconst import GA_ReadOnly

grib_file = "wrf-03.2013060200_32.grib"
variable = "UGRD"
level = "950-ISBL"

dataset = gdal.Open(grib_file, GA_ReadOnly )

for i in range(1,dataset.RasterCount + 1):
    band = dataset.GetRasterBand(i)
    metadata = band.GetMetadata()
    level_band = metadata['GRIB_SHORT_NAME']
    variable_band = metadata['GRIB_ELEMENT']

    if level_band == level and variable_band == variable:
        bandnum = i

print bandnum

------


Of course, you have to change the filename, variable and level, and you'll
get the band number that fits the conditions. Then, just open this band and
do whatever you need.

I hope that helps.

Roger


2013/6/18 Paolo Corti <pcorti at gmail.com>

> On Tue, Jun 18, 2013 at 12:46 AM, Even Rouault
> <even.rouault at mines-paris.org> wrote:
> >
> > From gdal_translate man page:
> >
> >        -b band:
> >            Select an input band band for output. Bands are numbered from
> 1.
> > Multiple -b switches may be used to select a set of input bands to write
> to
> > the output file, or
> >            to reorder bands. Starting with GDAL 1.8.0, band can also be
> set to
> > 'mask,1' (or just 'mask') to mean the mask band of the first band of the
> input
> > dataset.
>
> Hey Even
>
> thanks for the reply.
>
> I am well aware of the -b option, the problem here is that each raster
> has not the same bands order.
> Therefore, as I had to make some work on just one single band
> representing the same variable in all of the datasets, I ended up to
> write a script, iterate the datasets, then iterate the bands, read the
> metadata, and when found the correct band ran the process on it.
>
> thanks a lot in any case
> cheers
> p
>
> --
> Paolo Corti
> Geospatial software developer
> web: http://www.paolocorti.net
> twitter: @capooti
> skype: capooti
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130618/7862e2da/attachment.html>

From lhomme.xavier at gmail.com  Tue Jun 18 05:32:48 2013
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Tue, 18 Jun 2013 14:32:48 +0200
Subject: [gdal-dev]  updating xml:TRE
Message-ID: <CACqzBMx1XtkHQzmVNCztFq1rOP_q36oMhQ4ASMfLQDnv1K=1QA@mail.gmail.com>

Hi

 How to update TRE of NITF file from xml string ?
 or how to convert a xml:TRE string to a TRE string ?

Best regards

xlhomme
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130618/71895544/attachment-0001.html>

From etourigny.dev at gmail.com  Tue Jun 18 07:17:24 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 18 Jun 2013 11:17:24 -0300
Subject: [gdal-dev] Accessing to GRIB bands
In-Reply-To: <CAHXrU-JrAExB=oHrhNKCD_PPenm+v9N3UYOo7xC4KfbC2h4J7Q@mail.gmail.com>
References: <CAHXrU-Lhca3LWu9ViiPb31DBZtjvBwN20u9NL5qmP9WEWVQ5vw@mail.gmail.com>
	<201306180046.24706.even.rouault@mines-paris.org>
	<CAHXrU-JrAExB=oHrhNKCD_PPenm+v9N3UYOo7xC4KfbC2h4J7Q@mail.gmail.com>
Message-ID: <CA+TxYvPeqvmmKSEiXu5o_B1T-NUSt71VDYLa17oRkz_1fJfStw@mail.gmail.com>

you can always convert the files to netcdf using the command-line tool cdo
(climate data operators), although that would increase processing time and
disk space.

https://code.zmaw.de/projects/cdo

Etienne

On Mon, Jun 17, 2013 at 8:16 PM, Paolo Corti <pcorti at gmail.com> wrote:

> On Tue, Jun 18, 2013 at 12:46 AM, Even Rouault
> <even.rouault at mines-paris.org> wrote:
> >
> > From gdal_translate man page:
> >
> >        -b band:
> >            Select an input band band for output. Bands are numbered from
> 1.
> > Multiple -b switches may be used to select a set of input bands to write
> to
> > the output file, or
> >            to reorder bands. Starting with GDAL 1.8.0, band can also be
> set to
> > 'mask,1' (or just 'mask') to mean the mask band of the first band of the
> input
> > dataset.
>
> Hey Even
>
> thanks for the reply.
>
> I am well aware of the -b option, the problem here is that each raster
> has not the same bands order.
> Therefore, as I had to make some work on just one single band
> representing the same variable in all of the datasets, I ended up to
> write a script, iterate the datasets, then iterate the bands, read the
> metadata, and when found the correct band ran the process on it.
>
> thanks a lot in any case
> cheers
> p
>
> --
> Paolo Corti
> Geospatial software developer
> web: http://www.paolocorti.net
> twitter: @capooti
> skype: capooti
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130618/222c5704/attachment.html>

From lhomme.xavier at gmail.com  Tue Jun 18 08:34:36 2013
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Tue, 18 Jun 2013 17:34:36 +0200
Subject: [gdal-dev]  UnescapeString
Message-ID: <CACqzBMyyc9ZD7bbvKhO6roG==u+ubYt7HcXsFnyWqL23hwg84Q@mail.gmail.com>

Hi

   The C# binding contains the EscapeString function, but my version
doesn't contains the UnescapeString function.

 Do I need to patch gdal_wrap.cpp  and recompilethe dll in order to have
acces to UnescapeString ?

Best Regards
xl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130618/69857227/attachment.html>

From lhomme.xavier at gmail.com  Wed Jun 19 13:49:53 2013
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Wed, 19 Jun 2013 22:49:53 +0200
Subject: [gdal-dev] Extract CGM from a NITF file
Message-ID: <CACqzBMyhWA2YuB_6YDGOCnjvAHRq0fD5oG3G6WGzioQVWtKRtw@mail.gmail.com>

Hi

  I'm trying to extract CGM files from a NITF but the CGM are corrupt.

  First I Unescape the CGM Data and I obtain something like
   "\0,\vCreated CGM \"\0 f\0 ??\0 ...
  Then write the text file.

  I compared this string with a CGM obtained from NITRO NITF
(nitro_extract_cgm.exe).
  The new CGM file start with
    "\0,\vCreated CGM \"\0 f\0 ??\0
 I succeed to read this CGM file with a CGM viewer.

One of the difference come from caracter like ? (from GDAL) ? from NITRO

Then It's probably something I missed in the Escaping/Unescaping function

Because UnescapeScring wasn't exposed in C# I wrote a function :
static public string UnescapeString(string pszInput)
        {
             string pszOutput="";
            int iIn = 0;
            for (iIn = 0; iIn<pszInput.Length; iIn++)
            {
                if (pszInput[iIn] == '\\')
                {
                    iIn++;
                    if (pszInput[iIn] == 'n')
                        pszOutput += '\n';
                    else if (pszInput[iIn] == '0')
                        pszOutput += '\0';
                    else
                        pszOutput += pszInput[iIn];
                }
                else
                {
                    pszOutput += pszInput[iIn];
                }
            }
            return pszOutput;
        }

thanks in advance!
Best regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130619/e723c4b9/attachment.html>

From yehil at rafael.co.il  Wed Jun 19 22:12:26 2013
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Thu, 20 Jun 2013 08:12:26 +0300
Subject: [gdal-dev] Extract CGM from a NITF file
In-Reply-To: <CACqzBMyhWA2YuB_6YDGOCnjvAHRq0fD5oG3G6WGzioQVWtKRtw@mail.gmail.com>
References: <CACqzBMyhWA2YuB_6YDGOCnjvAHRq0fD5oG3G6WGzioQVWtKRtw@mail.gmail.com>
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0CC79E98EF6@MAILBOXSERVER.rf.local>


Hi
You can use the GDAL unescape function like this:

/// <summary>
        /// Remove "backslash quotable" escape characters from the string and convert it to byte array.
        /// </summary>
        public static byte[] RemoveEscapeCharacters(this string value)
        {
            if(String.IsNullOrEmpty(value))
            {
                return new byte[0];
            }
            int length = value.Length;
            IntPtr escapedString = CPLUnescapeString(value, ref length, 0);
            byte[] escapedBytes = new byte[length];
            Marshal.Copy(escapedString, escapedBytes, 0, length);
            VSIFree(escapedString);
            return escapedBytes;
        }

        [DllImport("gdal18.dll", EntryPoint = "CPLUnescapeString", CallingConvention = CallingConvention.Cdecl)]
        private static extern IntPtr CPLUnescapeString(string input, ref int length, int scheme);

        [DllImport("gdal18.dll", EntryPoint = "VSIFree", CallingConvention = CallingConvention.Cdecl)]
        private static extern void VSIFree(IntPtr input);


Yehiyam


From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of xavier lhomme
Sent: Wednesday, June 19, 2013 11:50 PM
To: gdal-dev
Subject: [gdal-dev] Extract CGM from a NITF file

Hi

  I'm trying to extract CGM files from a NITF but the CGM are corrupt.

  First I Unescape the CGM Data and I obtain something like
   "\0,\vCreated CGM \"\0 f\0 ??\0 ...
  Then write the text file.

  I compared this string with a CGM obtained from NITRO NITF (nitro_extract_cgm.exe).
  The new CGM file start with
    "\0,\vCreated CGM \"\0 f\0 ??\0
 I succeed to read this CGM file with a CGM viewer.

One of the difference come from caracter like ? (from GDAL) ? from NITRO

Then It's probably something I missed in the Escaping/Unescaping function

Because UnescapeScring wasn't exposed in C# I wrote a function :
static public string UnescapeString(string pszInput)
        {
             string pszOutput="";
            int iIn = 0;
            for (iIn = 0; iIn<pszInput.Length; iIn++)
            {
                if (pszInput[iIn] == '\\')
                {
                    iIn++;
                    if (pszInput[iIn] == 'n')
                        pszOutput += '\n';
                    else if (pszInput[iIn] == '0')
                        pszOutput += '\0';
                    else
                        pszOutput += pszInput[iIn];
                }
                else
                {
                    pszOutput += pszInput[iIn];
                }
            }
            return pszOutput;
        }

thanks in advance!
Best regards

________________________________________

This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not the intended recipient, you should contact us immediately and thereafter delete this message from your system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all electronic or other copies of the original message and any attachments thereof.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130620/e6a3126c/attachment-0001.html>

From lhomme.xavier at gmail.com  Thu Jun 20 02:15:54 2013
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Thu, 20 Jun 2013 11:15:54 +0200
Subject: [gdal-dev] Extract CGM from a NITF file
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0CC79E98EF6@MAILBOXSERVER.rf.local>
References: <CACqzBMyhWA2YuB_6YDGOCnjvAHRq0fD5oG3G6WGzioQVWtKRtw@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C0CC79E98EF6@MAILBOXSERVER.rf.local>
Message-ID: <CACqzBMzWP57rHw7NSXdm0v1_952arDfPBDjECTxY7NkGD1Uxsw@mail.gmail.com>

Thanks it works well ! I succeed to export graphics from the NITF file.
But I didn't understand why my C# function was wrong.


Best regards.


2013/6/20 Livneh Yehiyam <yehil at rafael.co.il>

>  Hi****
>
> You can use the GDAL unescape function like this:****
>
> ** **
>
> /// <summary>****
>
>         /// Remove "backslash quotable" escape characters from the string
> and convert it to byte array.****
>
>         /// </summary>****
>
>         public static byte[] RemoveEscapeCharacters(this string value)****
>
>         {****
>
>             if(String.IsNullOrEmpty(value))****
>
>             {****
>
>                 return new byte[0];****
>
>             }****
>
>             int length = value.Length;****
>
>             IntPtr escapedString = CPLUnescapeString(value, ref length,
> 0);****
>
>             byte[] escapedBytes = new byte[length];****
>
>             Marshal.Copy(escapedString, escapedBytes, 0, length);****
>
>             VSIFree(escapedString);****
>
>             return escapedBytes;****
>
>         }****
>
> ** **
>
>         [DllImport("gdal18.dll", EntryPoint = "CPLUnescapeString",
> CallingConvention = CallingConvention.Cdecl)]****
>
>         private static extern IntPtr CPLUnescapeString(string input, ref
> int length, int scheme);****
>
> ** **
>
>         [DllImport("gdal18.dll", EntryPoint = "VSIFree",
> CallingConvention = CallingConvention.Cdecl)]****
>
>         private static extern void VSIFree(IntPtr input);****
>
> ** **
>
> ** **
>
> Yehiyam****
>
> ** **
>
> *From:* gdal-dev-bounces at lists.osgeo.org [mailto:
> gdal-dev-bounces at lists.osgeo.org] *On Behalf Of *xavier lhomme
> *Sent:* Wednesday, June 19, 2013 11:50 PM
> *To:* gdal-dev
> *Subject:* [gdal-dev] Extract CGM from a NITF file****
>
> ** **
>
> Hi ****
>
> ** **
>
>   I'm trying to extract CGM files from a NITF but the CGM are corrupt. ***
> *
>
> ** **
>
>   First I Unescape the CGM Data and I obtain something like****
>
>    "\0,\vCreated CGM \"\0 f\0 ??\0 ...****
>
>   Then write the text file. ****
>
>  ****
>
>   I compared this string with a CGM obtained from NITRO NITF
> (nitro_extract_cgm.exe).****
>
>   The new CGM file start with  ****
>
>     "\0,\vCreated CGM \"\0 f\0 ??\0****
>
>  I succeed to read this CGM file with a CGM viewer. ****
>
> ** **
>
> One of the difference come from caracter like ? (from GDAL) ? from NITRO**
> **
>
> ** **
>
> Then It's probably something I missed in the Escaping/Unescaping function
> ****
>
> ** **
>
> Because UnescapeScring wasn't exposed in C# I wrote a function : ****
>
> static public string UnescapeString(string pszInput)****
>
>         {****
>
>              string pszOutput="";    ****
>
>             int iIn = 0;****
>
>             for (iIn = 0; iIn<pszInput.Length; iIn++)****
>
>             {****
>
>                 if (pszInput[iIn] == '\\')****
>
>                 {****
>
>                     iIn++;****
>
>                     if (pszInput[iIn] == 'n')****
>
>                         pszOutput += '\n';****
>
>                     else if (pszInput[iIn] == '0')****
>
>                         pszOutput += '\0';****
>
>                     else****
>
>                         pszOutput += pszInput[iIn];****
>
>                 }****
>
>                 else****
>
>                 {****
>
>                     pszOutput += pszInput[iIn];****
>
>                 }****
>
>             }****
>
>             return pszOutput;****
>
>         }****
>
> ** **
>
> thanks in advance!****
>
> Best regards ****
>   ________________________________________
> This message (including any attachments) issued by RAFAEL- ADVANCED
> DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential
> information intended for a specific individual and purpose, may constitute
> information that is privileged or confidential or otherwise protected from
> disclosure. If you are not the intended recipient, you should contact us
> immediately and thereafter delete this message from your system. You are
> hereby notified that any disclosure, copying, dissemination, distribution
> or forwarding of this message, or the taking of any action based on it, is
> strictly prohibited. If you have received this e-mail in error, please
> notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely
> delete or destroy any and all electronic or other copies of the original
> message and any attachments thereof.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130620/7478011b/attachment.html>

From even.rouault at mines-paris.org  Thu Jun 20 13:47:31 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 20 Jun 2013 22:47:31 +0200
Subject: [gdal-dev] Status of patch for RFC40 ?
Message-ID: <201306202247.31368.even.rouault@mines-paris.org>

Hi Sam,

I see you've attached recently a patch in 
http://trac.osgeo.org/gdal/wiki/rfc40_enhanced_rat_support that does the 
refactoring of GDALRasterAttributeTable vs GDALTableRasterAttributeTable. Do 
you intend it to be committed in trunk before tackling the implementation in 
the HFA driver ?

I'd suggest you open a ticket in Trac to follow more easily the implementation 
of RFC 40.

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Thu Jun 20 13:49:13 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 20 Jun 2013 22:49:13 +0200
Subject: [gdal-dev] Status of patch for RFC40 ?
In-Reply-To: <201306202247.31368.even.rouault@mines-paris.org>
References: <201306202247.31368.even.rouault@mines-paris.org>
Message-ID: <201306202249.13906.even.rouault@mines-paris.org>

Le jeudi 20 juin 2013 22:47:31, Even Rouault a ?crit :
> Hi Sam,
> 
> I see you've attached recently a patch in
> http://trac.osgeo.org/gdal/wiki/rfc40_enhanced_rat_support that does the
> refactoring of GDALRasterAttributeTable vs GDALTableRasterAttributeTable

I meant GDALDefaultRasterAttributeTable (not GDALTableRasterAttributeTable)

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From gillingham.sam at gmail.com  Thu Jun 20 14:46:34 2013
From: gillingham.sam at gmail.com (Sam Gillingham)
Date: Fri, 21 Jun 2013 09:46:34 +1200
Subject: [gdal-dev] Status of patch for RFC40 ?
In-Reply-To: <201306202247.31368.even.rouault@mines-paris.org>
References: <201306202247.31368.even.rouault@mines-paris.org>
Message-ID: <CAMH-Rba+K12TRcg0VbfPDQOhJtBB6nrKXhd_fRGnC=90TcC-Jw@mail.gmail.com>

Hi Even,

http://trac.osgeo.org/gdal/ticket/5129

Yes I have recently updated the patch with the changes you and Frank
suggested to GetValueAsString so the returned pointer is temporary. I have
also changed the definition of GetDefaultRAT to return a non-const pointer
and updated relevant drivers.

I'm actually just doing some final testing on my HFA patches and hope to
have something to you in the next few hours. These will rely on the first
ones being applied obviously. Up to you whether you apply them all at once,
or as I submit them. Any feedback on the currently attached patch would be
great.

Thanks,
Sam.


On 21 June 2013 08:47, Even Rouault <even.rouault at mines-paris.org> wrote:

> Hi Sam,
>
> I see you've attached recently a patch in
> http://trac.osgeo.org/gdal/wiki/rfc40_enhanced_rat_support that does the
> refactoring of GDALRasterAttributeTable vs GDALTableRasterAttributeTable.
> Do
> you intend it to be committed in trunk before tackling the implementation
> in
> the HFA driver ?
>
> I'd suggest you open a ticket in Trac to follow more easily the
> implementation
> of RFC 40.
>
> Best regards,
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130621/617e3a2d/attachment.html>

From even.rouault at mines-paris.org  Thu Jun 20 14:53:45 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 20 Jun 2013 23:53:45 +0200
Subject: [gdal-dev] Status of patch for RFC40 ?
In-Reply-To: <CAMH-Rba+K12TRcg0VbfPDQOhJtBB6nrKXhd_fRGnC=90TcC-Jw@mail.gmail.com>
References: <201306202247.31368.even.rouault@mines-paris.org>
	<CAMH-Rba+K12TRcg0VbfPDQOhJtBB6nrKXhd_fRGnC=90TcC-Jw@mail.gmail.com>
Message-ID: <201306202353.45506.even.rouault@mines-paris.org>

> Any feedback on the currently attached patch would be
> great.

This looked fine to me.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From grb at skogoglandskap.no  Fri Jun 21 01:58:17 2013
From: grb at skogoglandskap.no (Graeme B. Bell)
Date: Fri, 21 Jun 2013 08:58:17 +0000
Subject: [gdal-dev] gdal_calc.py - new optional feature / performance
	improvement
Message-ID: <60A75461-D0D0-4ABF-B9B2-4BCFDFC6826B@skogoglandskap.no>

Hi,

This may be of use to anyone who regularly uses gdal_calc.py.

http://trac.osgeo.org/gdal/ticket/5130

- easy patch

- you can get a performance boost of up to 33% depending on how you use gdal_calc or the type of data you have

- you can handle nodata processing with more flexibility if you prefer

- there's no risk of regressions or new complications for existing users

Thoughts/comments welcomed. 

My own use case involves taking different actions in the calculation function depending on which input rasters have data or nodata values at a given point. The performance boost is just a bonus :)

Graeme. 

From adiba.nizami at gmail.com  Fri Jun 21 03:39:27 2013
From: adiba.nizami at gmail.com (adi_khan)
Date: Fri, 21 Jun 2013 03:39:27 -0700 (PDT)
Subject: [gdal-dev] openev.py "classify" option
Message-ID: <1371811167062-5061559.post@n6.nabble.com>

Hi all,

Using gdalwarp, I have generated two mosaic images for same area.
MOSAIC1 :One image is 2-byte(12-bit data values : 0-4095) and  
MOSAIC2 : Another is 1-byte ( actually having 0-3 values only)

I am trying to view the images using openev.
First I open 2-byte mosaic (MOSAIC1) then I overlay 1-byte mosaic (MOSAIC2)
over it. 

I click the classify button for the MOSAIC2 and choose discrete values as
classes, it lists only 1,3 and not 0 even though there is 0 in the mosaic. 
I want to make all 0's transparent and see only 1,3 values regions overlaid
over 2-byte data.  For this , I usually set 0's class as transparent but
since 0 is not listed at all I am not able to set it transparent.
I tried to use "Add Class" option and added 0 class explicitly but that also
doesn't work.
[Using gdal 1.4.5 ]

The input images using which I generated the MOSAIC2 have 0's and on
clicking classify, 0 is also listed for them.
Can someone help me understand why only 1,3 are listed for MOSAIC2 inspite
of it having 0,1,3 values.




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/openev-py-classify-option-tp5061559.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From scott at agi.com  Fri Jun 21 08:50:34 2013
From: scott at agi.com (Reynolds, Scott)
Date: Fri, 21 Jun 2013 15:50:34 +0000
Subject: [gdal-dev] ERDAS/Intergraph ECW/JP2 compile problem in 1.10.0
Message-ID: <E1110E7296E25A4FB3DE0B680FC4EF921D45E31C@CH1PRD0711MB408.namprd07.prod.outlook.com>

Hi,

I'm having trouble compiling GDAL 1.10.0 on Windows with the ERDAS ECW/JP2 Read/Write SDK v4.3.6.25.

Thanks,
Scott


jp2userbox.cpp
jp2userbox.cpp(133) : error C2664: 'NCS::JP2::CBox::UnParse' : cannot convert parameter 1 from 'NCS::SDK::CFileBase' to 'NCS::JP2::CFile &'
NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\cl.EXE"' : return code '0x2'
Stop.
NMAKE : fatal error U1077: 'for' : return code '0x1'
Stop.
NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\nmake.EXE"' : return code '0x2'
Stop.



I've also made changes to a couple of files to eliminate warnings in VS2008:

ecwcreatecopy.cpp
944c944
<         m_OStream.Access( fpVSIL, TRUE, bSeekable, pszFilename, 0, -1 );
---
>         m_OStream.Access( fpVSIL, TRUE, (BOOLEAN)bSeekable, pszFilename, 0, -1 );

gdal_ecw.h
370c370
<                 GByte prevBuffer[] = { nCOMLength >> 8, nCOMLength & 0xff };
---
>                 GByte prevBuffer[] = { (GByte)(nCOMLength >> 8), (GByte)(nCOMLength & 0xff) };
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130621/072b8033/attachment.html>

From warmerdam at pobox.com  Fri Jun 21 11:32:00 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 21 Jun 2013 11:32:00 -0700
Subject: [gdal-dev] ERDAS/Intergraph ECW/JP2 compile problem in 1.10.0
In-Reply-To: <E1110E7296E25A4FB3DE0B680FC4EF921D45E31C@CH1PRD0711MB408.namprd07.prod.outlook.com>
References: <E1110E7296E25A4FB3DE0B680FC4EF921D45E31C@CH1PRD0711MB408.namprd07.prod.outlook.com>
Message-ID: <CA+YzLBdWMVE8koHw1TRJqw5tOumBzgjaFBp5mgwyVKSMmsWivg@mail.gmail.com>

Scott,

It worked fine for me with trunk.  At that point I see:

if ECWSDK_VERSION<50
    Error = CNCSJP2Box::UnParse(JP2File, Stream);
#else
    Error = CNCSSDKBox::UnParse(JP2File, Stream);
#endif

In my nmake.local file I have:


ECWDIR  =       "c:/build/pkg/ERDAS ECW JPEG2000 Read 4.3 SDK"
ECWFLAGS =      -DECWSDK_VERSION=43 \
                -I$(ECWDIR)\include \
                -I$(ECWDIR)\include/NCSECW/api
-I$(ECWDIR)\include/NCSECW/jp2 \
                -I$(ECWDIR)\include/NCSECW/ecw
ECWLIB  =       $(ECWDIR)\lib\vc90\win32\NCSEcw4_RO.lib \
                $(ECWDIR)\lib\vc90\win32\NCSUtil4.lib \
                $(ECWDIR)\lib\vc90\win32\NCScnet4.lib
ECW_PLUGIN = YES

I'd suggest confirming that you have ECWSDK_VERSION=43 set in the ECWFLAGS
setting you are using.

I'll try and incorporate the warning fixes into trunk.

Best regards,
Frank



On Fri, Jun 21, 2013 at 8:50 AM, Reynolds, Scott <scott at agi.com> wrote:

>  Hi,****
>
> ** **
>
> I?m having trouble compiling GDAL 1.10.0 on Windows with the ERDAS ECW/JP2
> Read/Write SDK v4.3.6.25.****
>
> ** **
>
> Thanks,****
>
> Scott****
>
> ** **
>
> ** **
>
> jp2userbox.cpp****
>
> jp2userbox.cpp(133) : error C2664: 'NCS::JP2::CBox::UnParse' : cannot
> convert parameter 1 from 'NCS::SDK::CFileBase' to 'NCS::JP2::CFile &'****
>
> NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual
> Studio 9.0\VC\BIN\cl.EXE"' : return code '0x2'****
>
> Stop.****
>
> NMAKE : fatal error U1077: 'for' : return code '0x1'****
>
> Stop.****
>
> NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual
> Studio 9.0\VC\BIN\nmake.EXE"' : return code '0x2'****
>
> Stop.****
>
> ** **
>
> ** **
>
> ** **
>
> I?ve also made changes to a couple of files to eliminate warnings in
> VS2008:****
>
> ** **
>
> ecwcreatecopy.cpp****
>
> 944c944****
>
> <         m_OStream.Access( fpVSIL, TRUE, bSeekable, pszFilename, 0, -1 );
> ****
>
> ---****
>
> >         m_OStream.Access( fpVSIL, TRUE, (BOOLEAN)bSeekable, pszFilename,
> 0, -1 );****
>
> ** **
>
> gdal_ecw.h****
>
> 370c370****
>
> <                 GByte prevBuffer[] = { nCOMLength >> 8, nCOMLength &
> 0xff };****
>
> ---****
>
> >                 GByte prevBuffer[] = { (GByte)(nCOMLength >> 8),
> (GByte)(nCOMLength & 0xff) };****
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130621/06ddfc3d/attachment-0001.html>

From a.r1993 at gmail.com  Fri Jun 21 15:38:51 2013
From: a.r1993 at gmail.com (alireza93)
Date: Fri, 21 Jun 2013 15:38:51 -0700 (PDT)
Subject: [gdal-dev] Using ogr in TAB2SHP app
Message-ID: <1371854331954-5061695.post@n6.nabble.com>

Hi

Im trying to use ogr library for convert tabfile to shapfile. and I need it
to be very small in size.
but my app so far is around 4mb. is there any way to just use some part of
library instead of all of it?
and Im completly new to this library.

Thanks



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Using-ogr-in-TAB2SHP-app-tp5061695.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From wonic at t-online.de  Sat Jun 22 11:21:26 2013
From: wonic at t-online.de (Wolfgang16)
Date: Sat, 22 Jun 2013 11:21:26 -0700 (PDT)
Subject: [gdal-dev] gcps2wld not finding GCPs
Message-ID: <1371925286877-5061752.post@n6.nabble.com>

Hi,

I am a beginner in GDAL and try to find out what works and what does not
work. I have installed the new ver. 1.10 on Windows XP SP3 and I am
especially interested in the new MAP driver. With the gcps2wld.py utility I
found a behaviour which I cannot explain. On some .map files it prints out
an worldfile as expected, on others it does not:

If I do

gcps2wld.py L-37-143-A.map 

the answer is

No GCPs found on file C:\maps\50000\L-37-143-A.map

In contrast to this

gdalinfo -noct L-37-143-A.map 

prints out a geotransform

GeoTransform =
  4563916.403948909, 4.777318174663853, 4.051208486634609e-013
  5487310.512072737, -8.102416973269218e-013, -4.760840630639994

gdal_translate -of PNG -co WORLDFILE=YES L-37-143-A.map dummy.png

results in a worldfile


4.7773181747
-0.0000000000
0.0000000000
-4.7608406306
4563918.7926079957
5487308.1316524222


which differs by half a pixel, but this is not my point. May be it can be
explained by point vs area style.
My question is: why doesn't gcps2wld find any gcps in the appended map file? 

Thanks
Wolfgang
----------------------------------------------------------------

OziExplorer Map Data File Version 2.2
L-37-143-A.png
C:\maps\50000\L-37-143-A.png
1 ,Map Code,
WGS 84,,   0.0000,   0.0000,WGS 84
Reserved 1
Reserved 2
Magnetic Variation,,,E
Map Projection,Mercator,PolyCal,No,AutoCalOnly,No,BSBUseWPX,No
Point01,xy,    0,    0,in, deg,  44, 20.0037,N,  40, 59.9015,E, grid,   ,          
,           ,N
Point02,xy, 5826, 5424,in, deg,  44,  9.9996,N,  41, 14.9030,E, grid,   ,          
,           ,N
Point03,xy,    0, 5424,in, deg,  44,  9.9996,N,  40, 59.9015,E, grid,   ,          
,           ,N
Point04,xy, 5826,    0,in, deg,  44, 20.0037,N,  41, 14.9030,E, grid,   ,          
,           ,N
Point05,xy, 2913, 2712,in, deg,  44, 15.0052,N,  41,  7.4023,E, grid,   ,          
,           ,N
Point06,xy, 2913,    0,in, deg,  44, 20.0037,N,  41,  7.4023,E, grid,   ,          
,           ,N
Point07,xy,    0, 2712,in, deg,  44, 15.0052,N,  40, 59.9015,E, grid,   ,          
,           ,N
Point08,xy, 5826, 2712,in, deg,  44, 15.0052,N,  41, 14.9030,E, grid,   ,          
,           ,N
Point09,xy, 2913, 5424,in, deg,  44,  9.9996,N,  41,  7.4023,E, grid,   ,          
,           ,N
Point10,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point11,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point12,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point13,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point14,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point15,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point16,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point17,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point18,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point19,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point20,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point21,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point22,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point23,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point24,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point25,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point26,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point27,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point28,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point29,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point30,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Projection Setup,,,,,,,,,,
Map Feature = MF ; Map Comment = MC     These follow if they exist
Track File = TF      These follow if they exist
Moving Map Parameters = MM?    These follow if they exist
MM0,Yes
MMPNUM,4
MMPXY,1,0,0
MMPXY,2,5826,0
MMPXY,3,5826,5424
MMPXY,4,0,5424
MMPLL,1,  40.998359,  44.333395
MMPLL,2,  41.248384,  44.333395
MMPLL,3,  41.248384,  44.166660
MMPLL,4,  40.998359,  44.166660
MM1B,3.426282
LL Grid Setup
LLGRID,No,No Grid,Yes,255,16711680,0,No Labels,0,16777215,7,1,Yes,x
Other Grid Setup
GRGRID,No,No Grid,Yes,255,16711680,No Labels,0,16777215,8,1,Yes,No,No,x
MOP,Map Open Position,0,0
IWH,Map Image Width/Height,5826,5424




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gcps2wld-not-finding-GCPs-tp5061752.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From moiarcsan at gmail.com  Mon Jun 24 05:12:40 2013
From: moiarcsan at gmail.com (Moises Arcos)
Date: Mon, 24 Jun 2013 14:12:40 +0200
Subject: [gdal-dev] gdal_translate and gdal_retile
Message-ID: <CAGfwTcySd2_f9t36W7yCouB6TmhmTX1eU7jnum7sTpzxxiBgcw@mail.gmail.com>

Hi all,

I'm trying to fix a problem that I have.

I have created an Image Pyramid with Geoserver 2.3.0 but when I try to see
the layer on OpenLayers, the layer borders appear in black, so I can't see
correctly the layer, because of thats black borders.

I have done the next:

First I have execute the next command on tiles to convert to Image Pyramid:

*gdal_translate -a_nodata 0 <origin.tif> <target.tif>*

When I have executede this command, I executed the next one:

 *gdal_retile.py -levels 3 -ps 2048 2048 -co "TILED=YES" -co
"BLOCKXSIZE=256" -co "TILED=YES" -co "BLOCKXSIZE=256" -co "BLOCKYSIZE=256"
-targetDir tiles --optfile tiles.txt -s_srs EPSG:32719 -targetDir tiles
--optfile tiles.txt*

After that I try to make the Image Pyramid with Geoserver, but the result
is the same that at first, I preview the layer on Openlayers and it appears
with black borders.

I don't know what I must to do.

Any help, please???

Thank you
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130624/14038186/attachment.html>

From oyvind.idland at gmail.com  Mon Jun 24 14:03:38 2013
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Mon, 24 Jun 2013 23:03:38 +0200
Subject: [gdal-dev] Errors reading jpegs
Message-ID: <CAEVk4t2LizT9WvD3R8CnchUfN4KZbLvLCGspki-NGgbBtiXYwg@mail.gmail.com>

I got a tiled dataset from a client, consisting of 8 jpegs + jpw's.

These are used in a .vrt, and I get the following error: "IReadBlock failed
at X offset 0, Y offset 73".

I get the same errors when testing the .jpegs individually aswell. When
stepping into the GDAL code, I can see that the first band is being read,
while the second (green) fails. I didn't go any further.

When opening them in GIMP, and saving back, they work fine.

GDAL version is 1.8.0.

Here is a sample dataset that fails:
https://dl.dropboxusercontent.com/u/32561725/data.tgz



- Oyvind
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130624/31146080/attachment.html>

From jrepetto at free.fr  Mon Jun 24 14:57:44 2013
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon, 24 Jun 2013 23:57:44 +0200
Subject: [gdal-dev] Errors reading jpegs
In-Reply-To: <CAEVk4t2LizT9WvD3R8CnchUfN4KZbLvLCGspki-NGgbBtiXYwg@mail.gmail.com>
References: <CAEVk4t2LizT9WvD3R8CnchUfN4KZbLvLCGspki-NGgbBtiXYwg@mail.gmail.com>
Message-ID: <51C8C0D8.5050700@free.fr>

On 24/06/2013 23:03, Oyvind Idland wrote:
> I got a tiled dataset from a client, consisting of 8 jpegs + jpw's.
>
> These are used in a .vrt, and I get the following error: "IReadBlock
> failed at X offset 0, Y offset 73".
>
> Here is a sample dataset that fails:
> https://dl.dropboxusercontent.com/u/32561725/data.tgz
>


Hello,

I"m not using GDAL 1.8 anymore, but I had no problem to read neither the 
JPEG file nor the VRT with GDAL 1.10.

Jean-Claude


From dbakeman at comcast.net  Mon Jun 24 16:20:19 2013
From: dbakeman at comcast.net (David J. Bakeman)
Date: Mon, 24 Jun 2013 16:20:19 -0700
Subject: [gdal-dev] Errors reading jpegs
In-Reply-To: <51C8C0D8.5050700@free.fr>
References: <CAEVk4t2LizT9WvD3R8CnchUfN4KZbLvLCGspki-NGgbBtiXYwg@mail.gmail.com>
	<51C8C0D8.5050700@free.fr>
Message-ID: <51C8D433.1050304@comcast.net>

On 06/24/2013 02:57 PM, Jean-Claude Repetto wrote:
> On 24/06/2013 23:03, Oyvind Idland wrote:
>> I got a tiled dataset from a client, consisting of 8 jpegs + jpw's.
>>
>> These are used in a .vrt, and I get the following error: "IReadBlock
>> failed at X offset 0, Y offset 73".
>>
>> Here is a sample dataset that fails:
>> https://dl.dropboxusercontent.com/u/32561725/data.tgz
>>
>
>
> Hello,
>
> I"m not using GDAL 1.8 anymore, but I had no problem to read neither
> the JPEG file nor the VRT with GDAL 1.10.
Same here with 1.9 I can read both no problems.
>
> Jean-Claude
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From j.l.h.hartmann at uva.nl  Tue Jun 25 02:12:41 2013
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Tue, 25 Jun 2013 11:12:41 +0200
Subject: [gdal-dev] NTV2 Grid Shift files and gdalwarp
In-Reply-To: <CA+YzLBeiCSvYpmwdGHPgbntce_aFOzRgk54puUOOeAP26BjRvw@mail.gmail.com>
References: <CAMH-RbZax0b=Qz4RcgSoBmfqGg2nQ8=WGBJcNEueQ7h4nx7RpA@mail.gmail.com>
	<CA+YzLBfQh=jJSMRo5PvQxYW1WsQHOvKpD0roJ9b10-=-u=PdJQ@mail.gmail.com>
	<CA+TxYvPH=+HhABzN6uYwseRdrP-whk2Ve30jj_fNPthmLmnbqQ@mail.gmail.com>
	<CAMH-RbZ9-FfXDoKvWJXfboGNqrX1i7D28R6cwyo=c2RsjVmG8A@mail.gmail.com>
	<CA+YzLBeiCSvYpmwdGHPgbntce_aFOzRgk54puUOOeAP26BjRvw@mail.gmail.com>
Message-ID: <51C95F09.2010900@uva.nl>

Hi all,

I've been experimenting with grid-shift files in ntv2 format to 
rubbersheet old maps. I created a working ntv2-file as described in

http://lists.maptools.org/pipermail/proj/2013-January/006539.html

and added an epsg definition for PROJ and PostGIS. The thing works with 
cs2cs and with vector transforms in PostGIS, but when I try to warp a 
raster file I get lots of errors like:

  Inverse grid shift iterator failed to converge.
pj_apply_gridshift(): failed to find a grid shift table for
                       location (6.7638472dW,53.0926086dN)
    tried: MIN03001A01.ntv2

and an output file with rubbish

The location is within the grid.

The source raster has epsg:28992, without the +towgs84 parameters but 
with the ntv2 file, the output raster has epsg:28992 with the towgs84 
numbers. Essentially, the ntv2 file contains the distances between the 
scanned map locations translated to an approximate position in 
epsg:28992, and the correct ones. I computed the grid with boundaries 
far outside the mapped regions, but this does not seem to make a difference.

Can anyone help?

Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130625/7991c05b/attachment.html>

From daniele.romagnoli at geo-solutions.it  Tue Jun 25 04:02:03 2013
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Tue, 25 Jun 2013 13:02:03 +0200
Subject: [gdal-dev] Does GDAL MrSID driver (with encoding support enabled)
 supports metadata options?
Message-ID: <CAJaHrDzqnKrziRTyaT0VX1t4qw--eZeBe+YnWA9FcbDjdR2okQ@mail.gmail.com>

Hi everybody.
As per subject, does the GDAL MrSID driver supports metadata options?

I mean something like this:
gdal_translate -OF MrSID input.tif output.sid -mo "COPYRIGHT=copyright"

Cheers,
Daniele

==
Our support, Your Success! Visit http://opensdi.geo-solutions.it for more
information.
==
Ing. Daniele Romagnoli
Senior Software Engineer

GeoSolutions S.A.S.
Via Poggio alle Viti 1187
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130625/fb1ba354/attachment.html>

From jrepetto at free.fr  Tue Jun 25 04:42:51 2013
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue, 25 Jun 2013 13:42:51 +0200
Subject: [gdal-dev] gcps2wld not finding GCPs
In-Reply-To: <1371925286877-5061752.post@n6.nabble.com>
References: <1371925286877-5061752.post@n6.nabble.com>
Message-ID: <51C9823B.2000906@free.fr>

Le 22/06/2013 20:21, Wolfgang16 a ?crit :
> Hi,
>
> I am a beginner in GDAL and try to find out what works and what does not
> work. I have installed the new ver. 1.10 on Windows XP SP3 and I am
> especially interested in the new MAP driver. With the gcps2wld.py utility I
> found a behaviour which I cannot explain. On some .map files it prints out
> an worldfile as expected, on others it does not:

Please could you post a .map file that prints out a worldfile, so that 
we can compare the results ?

Jean-Claude



From andre+joost at nurfuerspam.de  Tue Jun 25 07:36:52 2013
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Tue, 25 Jun 2013 16:36:52 +0200
Subject: [gdal-dev] NTV2 Grid Shift files and gdalwarp
In-Reply-To: <51C95F09.2010900@uva.nl>
References: <CAMH-RbZax0b=Qz4RcgSoBmfqGg2nQ8=WGBJcNEueQ7h4nx7RpA@mail.gmail.com>
	<CA+YzLBfQh=jJSMRo5PvQxYW1WsQHOvKpD0roJ9b10-=-u=PdJQ@mail.gmail.com>
	<CA+TxYvPH=+HhABzN6uYwseRdrP-whk2Ve30jj_fNPthmLmnbqQ@mail.gmail.com>
	<CAMH-RbZ9-FfXDoKvWJXfboGNqrX1i7D28R6cwyo=c2RsjVmG8A@mail.gmail.com>
	<CA+YzLBeiCSvYpmwdGHPgbntce_aFOzRgk54puUOOeAP26BjRvw@mail.gmail.com>
	<51C95F09.2010900@uva.nl>
Message-ID: <kqca02$u1$1@ger.gmane.org>

Hi Jan,

what strikes me is that

> pj_apply_gridshift(): failed to find a grid shift table for
> location (6.7638472dW,53.0926086dN)

and

> The source raster has epsg:28992

does not fit together. The first is in Ireland, and EPSG:28992 is valid 
in the Netherlands. Should it not rather be 6.76 East?

Greetings,
Andr? Joost


From j.l.h.hartmann at uva.nl  Tue Jun 25 09:04:24 2013
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Tue, 25 Jun 2013 18:04:24 +0200
Subject: [gdal-dev] NTV2 Grid Shift files and gdalwarp
In-Reply-To: <kqca02$u1$1@ger.gmane.org>
References: <CAMH-RbZax0b=Qz4RcgSoBmfqGg2nQ8=WGBJcNEueQ7h4nx7RpA@mail.gmail.com>
	<CA+YzLBfQh=jJSMRo5PvQxYW1WsQHOvKpD0roJ9b10-=-u=PdJQ@mail.gmail.com>
	<CA+TxYvPH=+HhABzN6uYwseRdrP-whk2Ve30jj_fNPthmLmnbqQ@mail.gmail.com>
	<CAMH-RbZ9-FfXDoKvWJXfboGNqrX1i7D28R6cwyo=c2RsjVmG8A@mail.gmail.com>
	<CA+YzLBeiCSvYpmwdGHPgbntce_aFOzRgk54puUOOeAP26BjRvw@mail.gmail.com>
	<51C95F09.2010900@uva.nl> <kqca02$u1$1@ger.gmane.org>
Message-ID: <51C9BF88.4050201@uva.nl>

Hi Andre,

As far as I know, the transformation from one coordinate system to 
another goes as follow:

- convert source coordinate to latlon
- compute grid shift,  either with +towgs84 parameters or by a grid 
shift raster
- convert resulting latlon to target coordinate

Ntv2 is a Canadian format, where longitudes west of Greenwich are 
positive, and east negative. This is horrible, but that is what things are

So this coordinate is really East. And it works for cs2cs and vector 
data. Could it be that Gdal makes a mistake about this Canadian aspect 
of ntv2?

On 06/25/2013 04:36 PM, Andre Joost wrote:
> Hi Jan,
>
> what strikes me is that
>
>> pj_apply_gridshift(): failed to find a grid shift table for
>> location (6.7638472dW,53.0926086dN)
>
> and
>
>> The source raster has epsg:28992
>
> does not fit together. The first is in Ireland, and EPSG:28992 is 
> valid in the Netherlands. Should it not rather be 6.76 East?
>
> Greetings,
> Andr? Joost
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130625/a8abdde4/attachment.html>

From wonic at t-online.de  Tue Jun 25 11:48:39 2013
From: wonic at t-online.de (Wolfgang16)
Date: Tue, 25 Jun 2013 11:48:39 -0700 (PDT)
Subject: [gdal-dev] gcps2wld not finding GCPs
In-Reply-To: <51C9823B.2000906@free.fr>
References: <1371925286877-5061752.post@n6.nabble.com>
	<51C9823B.2000906@free.fr>
Message-ID: <1372186119111-5062168.post@n6.nabble.com>

I did some further research. I have appended a .map file at which gcps2wld.py
prints out a worldfile. With this however gdalinfo and gdal_translate do NOT
do a geotransform. When I
SET OZI_APPROX_GEOTRANSFORM=YES
they do, but then gcps2wld.py finds no gcps. So its just the other way
around as one would expect. 


I checked a few other files and my guess is that gcps2wld.py prints out a
worldfile when there is no proper geotransform and when there is a
geotransform then it claims it doesn't find gcps.

Thanks
Wolfgang
-------------------------------------------

OziExplorer Map Data File Version 2.2
K-37-024-B.png
C:\maps\50000\K-37-024-B.png
1 ,Map Code,
WGS 84,,   0.0000,   0.0000,WGS 84
Reserved 1
Reserved 2
Magnetic Variation,,,E
Map Projection,Mercator,PolyCal,No,AutoCalOnly,No,BSBUseWPX,No
Point01,xy,    0,    0,in, deg,  43, 39.9941,N,  41, 44.9240,E, grid,   ,          
,           ,N
Point02,xy, 5827, 5361,in, deg,  43, 29.9947,N,  41, 59.9281,E, grid,   ,          
,           ,N
Point03,xy,    0, 5361,in, deg,  43, 29.9947,N,  41, 44.9240,E, grid,   ,          
,           ,N
Point04,xy, 5827,    0,in, deg,  43, 39.9941,N,  41, 59.9281,E, grid,   ,          
,           ,N
Point05,xy, 2913, 2680,in, deg,  43, 34.9969,N,  41, 52.4273,E, grid,   ,          
,           ,N
Point06,xy, 2913,    0,in, deg,  43, 39.9941,N,  41, 52.4273,E, grid,   ,          
,           ,N
Point07,xy,    0, 2680,in, deg,  43, 34.9969,N,  41, 44.9240,E, grid,   ,          
,           ,N
Point08,xy, 5827, 2680,in, deg,  43, 34.9969,N,  41, 59.9281,E, grid,   ,          
,           ,N
Point09,xy, 2913, 5361,in, deg,  43, 29.9947,N,  41, 52.4273,E, grid,   ,          
,           ,N
Point10,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point11,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point12,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point13,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point14,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point15,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point16,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point17,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point18,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point19,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point20,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point21,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point22,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point23,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point24,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point25,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point26,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point27,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point28,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point29,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Point30,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,          
,           ,N
Projection Setup,,,,,,,,,,
Map Feature = MF ; Map Comment = MC     These follow if they exist
Track File = TF      These follow if they exist
Moving Map Parameters = MM?    These follow if they exist
MM0,Yes
MMPNUM,4
MMPXY,1,0,0
MMPXY,2,5827,0
MMPXY,3,5827,5361
MMPXY,4,0,5361
MMPLL,1,  41.748747,  43.666558
MMPLL,2,  41.998816,  43.666558
MMPLL,3,  41.998816,  43.499901
MMPLL,4,  41.748747,  43.499901
MM1B,3.464919
LL Grid Setup
LLGRID,No,No Grid,Yes,255,16711680,0,No Labels,0,16777215,7,1,Yes,x
Other Grid Setup
GRGRID,No,No Grid,Yes,255,16711680,No Labels,0,16777215,8,1,Yes,No,No,x
MOP,Map Open Position,0,0
IWH,Map Image Width/Height,5827,5361




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gcps2wld-not-finding-GCPs-tp5061752p5062168.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From daniele.romagnoli at geo-solutions.it  Wed Jun 26 08:22:29 2013
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Wed, 26 Jun 2013 17:22:29 +0200
Subject: [gdal-dev] MrSID ESDK minimal version requirements
Message-ID: <CAJaHrDynha993nWUtJ4rdvYLR-91ZT6RA4sg3LHpsHp_aoMF5A@mail.gmail.com>

Hi,
I'm trying to build GDAL 1.9.2 with MrSID ESDK (Encoder) but I'm getting
several undefined reference to LizardTech:: .... errors

I'm building against Lizardtech Geo_ESDK-7.0.0.2167.
Do anyone knows whether that ESDK version is too old for GDAL 1.9.2?
(Probably I need to go for a newest version of the ESDK)
That may potentially explain the undefined references.

Please, let me know.
Regards,
Daniele

==
Our support, Your Success! Visit http://opensdi.geo-solutions.it for more
information.
==
Ing. Daniele Romagnoli
Senior Software Engineer

GeoSolutions S.A.S.
Via Poggio alle Viti 1187
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130626/b845ad1f/attachment.html>

From GChen at camsys.com  Wed Jun 26 13:49:39 2013
From: GChen at camsys.com (Genhan Chen)
Date: Wed, 26 Jun 2013 13:49:39 -0700
Subject: [gdal-dev] C# version of ogr2ogr function
Message-ID: <OF4A02C11C.BA52A963-ON88257B96.00720DE1-88257B96.007268C0@camsys.com>

Hello,

I need a function (similar to ogr2ogr) to convert Shapefile into GeoJson 
format. 

How can I implement this function using C#, in .NET framework?

Any help is really appreciated! 

Genhan Chen
Cambridge Systematics, Inc.
555 12th Street, Suite 1600
Oakland CA 94607
tel  510 873 8700
fax  510 873 8701
e-mail gchen at camsys.com
www.camsys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130626/1308c4ec/attachment.html>

From GChen at camsys.com  Wed Jun 26 13:45:41 2013
From: GChen at camsys.com (Genhan Chen)
Date: Wed, 26 Jun 2013 13:45:41 -0700
Subject: [gdal-dev] Integrate GDAL APIs in .NET framework
Message-ID: <OF09DC4B90.52DACC1D-ON88257B96.007135CF-88257B96.00720BC1@camsys.com>

Hello,

I do not have experience using GDAL modules on .NET server. I have two 
basic questions:

1) Where can I download C# version package?
2) How can I utilize them in my .NET server apps?

Thanks,

Genhan Chen
Cambridge Systematics, Inc.
555 12th Street, Suite 1600
Oakland CA 94607
tel  510 873 8700
fax  510 873 8701
e-mail gchen at camsys.com
www.camsys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130626/75b8e8ab/attachment.html>

From gdal at stripfamily.net  Wed Jun 26 22:44:17 2013
From: gdal at stripfamily.net (David Strip)
Date: Wed, 26 Jun 2013 23:44:17 -0600
Subject: [gdal-dev] pcs.csv values don't match spatialreference.org
Message-ID: <51CBD131.8090001@stripfamily.net>

I'm working with some files in Maryland State Plane (US foot), and 
autoIdentifyEPSG is failing. I tracked it down to what I suspect is the 
problem -

my files and spatialreference.org show the standard parallels as 38.3 
and 39.45, with a latitude of origin at 37.66666666
the pcs.csv file shows values of 38.18 and 39.27, with a latitude of 
origin at 37.4 (I don't actually know how to match the csv columns to 
the parameters, but these are the closest matching values).

Why does the pcs.csv differ from spatialreference.org, and what is the 
appropriate strategy for fixing this?

Thanks

(and apologies for a cross-posting to stackexchange, which I posted 
before I realized the difference between the two sources)

David

From szekerest at gmail.com  Wed Jun 26 23:20:25 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu, 27 Jun 2013 08:20:25 +0200
Subject: [gdal-dev] Integrate GDAL APIs in .NET framework
In-Reply-To: <OF09DC4B90.52DACC1D-ON88257B96.007135CF-88257B96.00720BC1@camsys.com>
References: <OF09DC4B90.52DACC1D-ON88257B96.007135CF-88257B96.00720BC1@camsys.com>
Message-ID: <CACALY+Swei9N5btjhQOgmaXrWTOVOqfJ9LKvWcf-LLy1abzUEQ@mail.gmail.com>

Hi,

For reference see http://trac.osgeo.org/gdal/wiki/GdalOgrInCsharp

Best regards,

Tamas



2013/6/26 Genhan Chen <GChen at camsys.com>

> Hello,
>
> I do not have experience using GDAL modules on .NET server. I have two
> basic questions:
>
> 1) Where can I download C# version package?
> 2) How can I utilize them in my .NET server apps?
>
> Thanks,
>
> Genhan Chen
> Cambridge Systematics, Inc.
> 555 12th Street, Suite 1600
> Oakland CA 94607
> tel  510 873 8700
> fax  510 873 8701
> e-mail gchen at camsys.com
> www.camsys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130627/c2a547f9/attachment.html>

From szekerest at gmail.com  Wed Jun 26 23:28:16 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu, 27 Jun 2013 08:28:16 +0200
Subject: [gdal-dev] C# version of ogr2ogr function
In-Reply-To: <OF4A02C11C.BA52A963-ON88257B96.00720DE1-88257B96.007268C0@camsys.com>
References: <OF4A02C11C.BA52A963-ON88257B96.00720DE1-88257B96.007268C0@camsys.com>
Message-ID: <CACALY+Q6wYz7i-qrp25191Josv0u_qbCx+hifRq5M-574-miZw@mail.gmail.com>

Please refer to this thread for further information:
http://lists.osgeo.org/pipermail/gdal-dev/2009-March/020130.html

Best regards,

Tamas



2013/6/26 Genhan Chen <GChen at camsys.com>

> Hello,
>
> I need a function (similar to ogr2ogr) to convert Shapefile into GeoJson
> format.
>
> How can I implement this function using C#, in .NET framework?
>
> Any help is really appreciated!
>
> Genhan Chen
> Cambridge Systematics, Inc.
> 555 12th Street, Suite 1600
> Oakland CA 94607
> tel  510 873 8700
> fax  510 873 8701
> e-mail gchen at camsys.com
> www.camsys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130627/d831bb97/attachment.html>

From alobolistas at gmail.com  Thu Jun 27 01:26:22 2013
From: alobolistas at gmail.com (Agustin Lobo)
Date: Thu, 27 Jun 2013 10:26:22 +0200
Subject: [gdal-dev] gdalwarp for affine transformation?
Message-ID: <CAG4NReL6auA6Q3FYVwAJWV9qibhpKRFzx_9t4mS+u_yZsD72DA@mail.gmail.com>

Is it possible to warp a raster using a 6 parameters transformation? I've found
that I can set gcp and the order of the polynomial in gdal_transform
and then use
gdalwarp to apply the polynomial, but is it possible to set the
transformation matrix?

Thanks

Agus

From gdal at stripfamily.net  Thu Jun 27 07:13:30 2013
From: gdal at stripfamily.net (David Strip)
Date: Thu, 27 Jun 2013 08:13:30 -0600
Subject: [gdal-dev] pcs.csv values don't match spatialreference.org
In-Reply-To: <51CBD131.8090001@stripfamily.net>
References: <51CBD131.8090001@stripfamily.net>
Message-ID: <51CC488A.3040100@stripfamily.net>

SInce posting this, I've learned that the pcs.csv is in degree.minutes, 
while the wkt is in decimal degrees, so that explains the pcs.csv. This 
still leaves the question as to why autoIdentifyEPSG won't return the value.

On 6/26/2013 11:44 PM, David Strip wrote:
> I'm working with some files in Maryland State Plane (US foot), and 
> autoIdentifyEPSG is failing. I tracked it down to what I suspect is 
> the problem -
>
> my files and spatialreference.org show the standard parallels as 38.3 
> and 39.45, with a latitude of origin at 37.66666666
> the pcs.csv file shows values of 38.18 and 39.27, with a latitude of 
> origin at 37.4 (I don't actually know how to match the csv columns to 
> the parameters, but these are the closest matching values).
>
> Why does the pcs.csv differ from spatialreference.org, and what is the 
> appropriate strategy for fixing this?
>
> Thanks
>
> (and apologies for a cross-posting to stackexchange, which I posted 
> before I realized the difference between the two sources)
>
> David
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From gdal at stripfamily.net  Thu Jun 27 13:11:06 2013
From: gdal at stripfamily.net (David Strip)
Date: Thu, 27 Jun 2013 14:11:06 -0600
Subject: [gdal-dev] OGRSpatialReference::autoIdentifyEPSG and the pcs.csv
	table
Message-ID: <51CC9C5A.2040806@stripfamily.net>

After an admittedly quick skim of the code base, it appears that the 
pcs.csv file is used only to go from an EPSG to the parameters for a 
spatial reference. If my reading is right, then it is not used to go 
from a WKT to an EPSG. The autoIdentifyEPSG works for a few special 
cases, but otherwise relies on the presence of an authority node for the 
projection's EPSG. Is that correct? If so, that would explain my earlier 
question about the WKT for Maryland State Plane not being recognized 
even though it's in the pcs.csv file.

David


From GChen at camsys.com  Thu Jun 27 17:40:07 2013
From: GChen at camsys.com (Genhan Chen)
Date: Thu, 27 Jun 2013 17:40:07 -0700
Subject: [gdal-dev] C# version of ogr2ogr function
In-Reply-To: <CACALY+Q6wYz7i-qrp25191Josv0u_qbCx+hifRq5M-574-miZw@mail.gmail.com>
References: <OF4A02C11C.BA52A963-ON88257B96.00720DE1-88257B96.007268C0@camsys.com>
	<CACALY+Q6wYz7i-qrp25191Josv0u_qbCx+hifRq5M-574-miZw@mail.gmail.com>
Message-ID: <OFC70230A1.E54DD599-ON88257B98.00002D8F-88257B98.0003AC75@camsys.com>

Hi Tamas,

I am using pre-compiled ogr_csharp.dll, downloaded from 
http://vbkto.dyndns.org/sdk/ . I added "using OSGeo.OGR" in front of the 
class. and did not see any error during build process.

However, I got the following error message if any Ogr method (e.g. "
Ogr.RegisterAll();") was added in the program.:

{"The type initializer for 'OSGeo.OGR.OgrPINVOKE' threw an exception."} 
System.Exception {System.TypeInitializationException}

Do you know what caused this error?

Thanks a lot,

Genhan Chen
Cambridge Systematics, Inc.
555 12th Street, Suite 1600
Oakland CA 94607
tel  510 873 8700
fax  510 873 8701
e-mail gchen at camsys.com
www.camsys.com



From:   Tamas Szekeres <szekerest at gmail.com>
To:     Genhan Chen <GChen at camsys.com>, 
Cc:     gdal-dev at lists.osgeo.org
Date:   06/26/2013 11:28 PM
Subject:        Re: [gdal-dev] C# version of ogr2ogr function



Please refer to this thread for further information: 
http://lists.osgeo.org/pipermail/gdal-dev/2009-March/020130.html

Best regards,

Tamas



2013/6/26 Genhan Chen <GChen at camsys.com>
Hello, 

I need a function (similar to ogr2ogr) to convert Shapefile into GeoJson 
format. 

How can I implement this function using C#, in .NET framework? 

Any help is really appreciated! 

Genhan Chen
Cambridge Systematics, Inc.
555 12th Street, Suite 1600
Oakland CA 94607
tel  510 873 8700
fax  510 873 8701
e-mail gchen at camsys.com
www.camsys.com
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130627/b6c4c225/attachment.html>

From GChen at camsys.com  Thu Jun 27 18:02:54 2013
From: GChen at camsys.com (Genhan Chen)
Date: Thu, 27 Jun 2013 18:02:54 -0700
Subject: [gdal-dev] Need solution for C# exception: OSGeo.OGR.OgrPINVOKE
Message-ID: <OFD0FD6582.FF6F71C2-ON88257B98.0004BB55-88257B98.0005C26B@camsys.com>

I am using ogr_csharp.dll in my c# program. See the following code 
snippet:

using OSGeo.OGR;

namespace Test
{
    public class Test
    {
        public Test()
        {
                ...
                Ogr.RegisterAll();
        } 
    }
}

Then the following exception message was thrown out when the program is 
executed:

{"The type initializer for 'OSGeo.OGR.OgrPINVOKE' threw an exception."} 
System.Exception {System.TypeInitializationException}

Does anyone know how to resolve this issue?

Many thanks,

Genhan Chen
Cambridge Systematics, Inc.
555 12th Street, Suite 1600
Oakland CA 94607
tel  510 873 8700
fax  510 873 8701
e-mail gchen at camsys.com
www.camsys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130627/4d49e92a/attachment.html>

From szekerest at gmail.com  Thu Jun 27 23:17:53 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri, 28 Jun 2013 08:17:53 +0200
Subject: [gdal-dev] C# version of ogr2ogr function
In-Reply-To: <OFC70230A1.E54DD599-ON88257B98.00002D8F-88257B98.0003AC75@camsys.com>
References: <OF4A02C11C.BA52A963-ON88257B96.00720DE1-88257B96.007268C0@camsys.com>
	<CACALY+Q6wYz7i-qrp25191Josv0u_qbCx+hifRq5M-574-miZw@mail.gmail.com>
	<OFC70230A1.E54DD599-ON88257B98.00002D8F-88257B98.0003AC75@camsys.com>
Message-ID: <CACALY+QjSWqZnEX0fMdMvRNVXsOrjZhV8VC_ifQ10Y9krtj0Tg@mail.gmail.com>

Make sure to copy all the dll-s from the /bin and /bin/gdal/csharp
directories into you application directory, or make the location of this
files available in the PATH environment variable.

Best regards,

Tamas




2013/6/28 Genhan Chen <GChen at camsys.com>

> Hi Tamas,
>
> I am using pre-compiled *ogr_csharp.dl*l, downloaded from *
> http://vbkto.dyndns.org/sdk/* <http://vbkto.dyndns.org/sdk/> . I added "*using
> OSGeo.OGR*" in front of the class. and did not see any error during build
> process.
>
> However, I got the following error message if any Ogr method (e.g. "*
> Ogr.RegisterAll()*;") was added in the program.:
>
> *{"The type initializer for 'OSGeo.OGR.OgrPINVOKE' threw an exception."}
>        *
> *System.Exception {System.TypeInitializationException}*
>
> Do you know what caused this error?
>
> Thanks a lot,
>
> Genhan Chen
> Cambridge Systematics, Inc.
> 555 12th Street, Suite 1600
> Oakland CA 94607
> tel  510 873 8700
> fax  510 873 8701
> e-mail gchen at camsys.com
> www.camsys.com
>
>
>
> From:        Tamas Szekeres <szekerest at gmail.com>
> To:        Genhan Chen <GChen at camsys.com>,
> Cc:        gdal-dev at lists.osgeo.org
> Date:        06/26/2013 11:28 PM
> Subject:        Re: [gdal-dev] C# version of ogr2ogr function
> ------------------------------
>
>
>
> Please refer to this thread for further information: *
> http://lists.osgeo.org/pipermail/gdal-dev/2009-March/020130.html*<http://lists.osgeo.org/pipermail/gdal-dev/2009-March/020130.html>
>
> Best regards,
>
> Tamas
>
>
>
> 2013/6/26 Genhan Chen <*GChen at camsys.com* <GChen at camsys.com>>
> Hello,
>
> I need a function (similar to ogr2ogr) to convert Shapefile into GeoJson
> format.
>
> How can I implement this function using C#, in .NET framework?
>
> Any help is really appreciated!
>
> Genhan Chen
> Cambridge Systematics, Inc.
> 555 12th Street, Suite 1600
> Oakland CA 94607
> tel  *510 873 8700* <510%20873%208700>
> fax  *510 873 8701* <510%20873%208701>
> e-mail *gchen at camsys.com* <gchen at camsys.com>*
> **www.camsys.com* <http://www.camsys.com/>
> _______________________________________________
> gdal-dev mailing list*
> **gdal-dev at lists.osgeo.org* <gdal-dev at lists.osgeo.org>*
> **http://lists.osgeo.org/mailman/listinfo/gdal-dev*<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130628/44e6fd39/attachment.html>

From GChen at camsys.com  Fri Jun 28 15:15:22 2013
From: GChen at camsys.com (Genhan Chen)
Date: Fri, 28 Jun 2013 15:15:22 -0700
Subject: [gdal-dev] C# version of ogr2ogr function
In-Reply-To: <CACALY+QjSWqZnEX0fMdMvRNVXsOrjZhV8VC_ifQ10Y9krtj0Tg@mail.gmail.com>
References: <OF4A02C11C.BA52A963-ON88257B96.00720DE1-88257B96.007268C0@camsys.com>	<CACALY+Q6wYz7i-qrp25191Josv0u_qbCx+hifRq5M-574-miZw@mail.gmail.com>
	<OFC70230A1.E54DD599-ON88257B98.00002D8F-88257B98.0003AC75@camsys.com>
	<CACALY+QjSWqZnEX0fMdMvRNVXsOrjZhV8VC_ifQ10Y9krtj0Tg@mail.gmail.com>
Message-ID: <OFA8A24649.11F49C03-ON88257B98.0079E79D-88257B98.007A4199@camsys.com>

Thank you very much, Tamas! 

Do you know which dll files are the dependencies of ogr_csharp.dll. It 
will be nice if I do not have to put all dll files into my project.

Best,

Genhan Chen
Cambridge Systematics, Inc.
555 12th Street, Suite 1600
Oakland CA 94607
tel  510 873 8700
fax  510 873 8701
e-mail gchen at camsys.com
www.camsys.com



From:   Tamas Szekeres <szekerest at gmail.com>
To:     Genhan Chen <GChen at camsys.com>, 
Cc:     gdal-dev at lists.osgeo.org
Date:   06/27/2013 11:17 PM
Subject:        Re: [gdal-dev] C# version of ogr2ogr function



Make sure to copy all the dll-s from the /bin and /bin/gdal/csharp 
directories into you application directory, or make the location of this 
files available in the PATH environment variable.

Best regards,

Tamas




2013/6/28 Genhan Chen <GChen at camsys.com>
Hi Tamas, 

I am using pre-compiled ogr_csharp.dll, downloaded from 
http://vbkto.dyndns.org/sdk/ . I added "using OSGeo.OGR" in front of the 
class. and did not see any error during build process. 

However, I got the following error message if any Ogr method (e.g. "
Ogr.RegisterAll();") was added in the program.: 

{"The type initializer for 'OSGeo.OGR.OgrPINVOKE' threw an exception."}   
      
System.Exception {System.TypeInitializationException} 

Do you know what caused this error? 

Thanks a lot, 

Genhan Chen
Cambridge Systematics, Inc.
555 12th Street, Suite 1600
Oakland CA 94607
tel  510 873 8700
fax  510 873 8701
e-mail gchen at camsys.com
www.camsys.com 



From:        Tamas Szekeres <szekerest at gmail.com> 
To:        Genhan Chen <GChen at camsys.com>, 
Cc:        gdal-dev at lists.osgeo.org 
Date:        06/26/2013 11:28 PM 
Subject:        Re: [gdal-dev] C# version of ogr2ogr function 




Please refer to this thread for further information: 
http://lists.osgeo.org/pipermail/gdal-dev/2009-March/020130.html 

Best regards, 

Tamas 



2013/6/26 Genhan Chen <GChen at camsys.com> 
Hello, 

I need a function (similar to ogr2ogr) to convert Shapefile into GeoJson 
format. 

How can I implement this function using C#, in .NET framework? 

Any help is really appreciated! 

Genhan Chen
Cambridge Systematics, Inc.
555 12th Street, Suite 1600
Oakland CA 94607
tel  510 873 8700
fax  510 873 8701
e-mail gchen at camsys.com
www.camsys.com
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130628/154f45ef/attachment.html>

From truong_pham_minh at yahoo.com  Sat Jun 29 19:55:04 2013
From: truong_pham_minh at yahoo.com (Truong Pham Minh)
Date: Sun, 30 Jun 2013 10:55:04 +0800 (SGT)
Subject: [gdal-dev] Set Attribute for dgn file when convert from shapefile
In-Reply-To: <1372560208.83626.YahooMailNeo@web193604.mail.sg3.yahoo.com>
References: <1372560208.83626.YahooMailNeo@web193604.mail.sg3.yahoo.com>
Message-ID: <1372560904.89557.YahooMailNeo@web193604.mail.sg3.yahoo.com>

Hi list,

I try convert shapefile to dgn file with following command: 
"ogr2ogr.exe -skipfailures -f "DGN" ..\..\..\te
st\data\test1.dgn ..\..\..\test\data\gridshape.shp -dsco SEED=..\data\seed_2d.dg
n"

the dgn file output always have level=0 in attribute field.
How could i set level=2 in dgn output?
Tks 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130630/9e45678c/attachment.html>

