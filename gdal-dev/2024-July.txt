From jesse.r.meyer at nasa.gov  Mon Jul  1 09:40:18 2024
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Mon, 1 Jul 2024 16:40:18 +0000
Subject: [gdal-dev] Expected runtime of polygonize (GDAL 3.9.0) for few very
 large features.
Message-ID: <MN2PR09MB5932834D78C863A6F0BCC7C0C9D32@MN2PR09MB5932.namprd09.prod.outlook.com>

Hi,

We?ve encountered a few images with what seems like pathological performance problems with polygonise.  The details below are a report from another developer that I haven?t yet independently verified.

We threshold a raster image to a binary mask in a memory dataset, use that as its own mask to mask out the background.
gdal.Polygonize(nn_mem_band, nn_mem_band, ogr_mem_lyr, -1)

We have a number of 32k x 32k raster images that feature number of very large same-valued regions (some as large as 80% of the entire raster).  We?re seeing ~10hrs on a modern workstation to complete the line of code above.  OpenCV can apparently construct a connected components list in mere seconds, on the same workstation and image, so we?re considering constructing the OGR geometries directly from those as a temporary work around.

Is this situation a known pitfall with the current algorithm / data structures behind Polygonize?

I?m able to share the problematic tile(s) if of interest,
Best
Jesse
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240701/5a5b3a43/attachment.htm>

From michkowalczuk at gmail.com  Mon Jul  1 09:49:55 2024
From: michkowalczuk at gmail.com (=?UTF-8?Q?Micha=C5=82_Kowalczuk?=)
Date: Mon, 1 Jul 2024 18:49:55 +0200
Subject: [gdal-dev] Fwd: WMTS huge difference in performance - cache issue
In-Reply-To: <CAP+FqQA2R=8wsKQuzW3KQ7NuiRvOg38zAHUj+g61Dvz=2ZDb=w@mail.gmail.com>
References: <CAP+FqQA2R=8wsKQuzW3KQ7NuiRvOg38zAHUj+g61Dvz=2ZDb=w@mail.gmail.com>
Message-ID: <CAP+FqQDvZ58V-+oghJet_cpVGhi4svf_toFppQ_SLc3R00UX5Q@mail.gmail.com>

Did my email reached gdal mailing list?

Regards
Michal
------ Wiadomo?? przekazana dalej ------
Od: Micha? Kowalczuk <michkowalczuk at gmail.com>
Data: pt., 28.06.2024 o 14:59
Temat: WMTS huge difference in performance - cache issue
Do: <gdal-dev at lists.osgeo.org>


Hi,
I have two sample WMTS servers.
The first is a Polish geoportal:
https://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500
and the second is German:
https://basemap.de/dienste/wmts_capabilities_web_raster.xml
Both work well in QGIS.
I use C API for creating bitmaps in my area of interest.
I use GDALDatasetRasterIO function directly with WMTS dataset and
appropriate arguments.
The first Polish server works smoothly for different extents, different
widths and heights of my output image. Unfortunately, the second one
(German) lasts forever.
During debugging I concluded the thesis that every GDALDatasetRasterIO in
my loop over raster lines, GDAL do not use cache but redownload the same
tiles.

Below is a fragment from GDAL log for well-working Polish server:












*[Fri Jun 28 13:06:16 2024].5430, 66.7590: HTTP: Requesting [1/3]
http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=0
<http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=0>[Fri
Jun 28 13:06:16 2024].5430, 66.7590: HTTP: Requesting [2/3]
http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=1
<http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=1>[Fri
Jun 28 13:06:16 2024].6670, 66.8830: HTTP: Requesting [3/3]
http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=2
<http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=2>[Fri
Jun 28 13:06:16 2024].8230, 67.0390: HTTP: Request [0]
http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=0
<http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=0>
: status = 200, type = image/png, error = (null)[Fri Jun 28 13:06:16
2024].8230, 67.0390: HTTP: Request [1]
http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=1
<http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=1>
: status = 200, type = image/png, error = (null)[Fri Jun 28 13:06:16
2024].8230, 67.0390: HTTP: Request [2]
http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=2
<http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=2>
: status = 200, type = image/png, error = (null)[Fri Jun 28 13:06:16
2024].8240, 67.0400: GDAL:
GDALOpen(/vsimem/wms/0000022663367550/wmsresult.dat, this=000002266059B0E0)
succeeds as PNG.[Fri Jun 28 13:06:16 2024].8260, 67.0420: GDAL:
GDALClose(/vsimem/wms/0000022663367550/wmsresult.dat,
this=000002266059B0E0)[Fri Jun 28 13:06:16 2024].8270, 67.0430: GDAL:
GDALOpen(/vsimem/wms/00000226632272D0/wmsresult.dat, this=000002266059B0E0)
succeeds as PNG.[Fri Jun 28 13:06:16 2024].8300, 67.0460: GDAL:
GDALClose(/vsimem/wms/00000226632272D0/wmsresult.dat,
this=000002266059B0E0)[Fri Jun 28 13:06:16 2024].8300, 67.0460: GDAL:
GDALOpen(/vsimem/wms/0000022661BEC8D0/wmsresult.dat, this=000002266059B0E0)
succeeds as PNG.[Fri Jun 28 13:06:16 2024].8330, 67.0490: GDAL:
GDALClose(/vsimem/wms/0000022661BEC8D0/wmsresult.dat,
this=000002266059B0E0) *
And here is log snippet for German server:




























































































*[Fri Jun 28 13:16:02 2024].0840, 652.3000: HTTP: Requesting [1/5]
https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/0.png
<https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/0.png>[Fri
Jun 28 13:16:02 2024].0840, 652.3000: HTTP: Requesting [2/5]
https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/1.png
<https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/1.png>[Fri
Jun 28 13:16:02 2024].2690, 652.4850: HTTP: Requesting [3/5]
https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/2.png
<https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/2.png>[Fri
Jun 28 13:16:02 2024].2870, 652.5030: HTTP: Requesting [4/5]
https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/3.png
<https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/3.png>[Fri
Jun 28 13:16:02 2024].3140, 652.5300: HTTP: Requesting [5/5]
https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png
<https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png>[Fri
Jun 28 13:16:02 2024].5970, 652.8130: HTTP: Request [0]
https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/0.png
<https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/0.png>
: status = 200, type = image/png, error = (null)[Fri Jun 28 13:16:02
2024].5970, 652.8130: HTTP: Request [1]
https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/1.png
<https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/1.png>
: status = 200, type = image/png, error = (null)[Fri Jun 28 13:16:02
2024].5970, 652.8130: HTTP: Request [2]
https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/2.png
<https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/2.png>
: status = 200, type = image/png, error = (null)[Fri Jun 28 13:16:02
2024].5970, 652.8130: HTTP: Request [3]
https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/3.png
<https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/3.png>
: status = 200, type = image/png, error = (null)[Fri Jun 28 13:16:02
2024].5970, 652.8130: HTTP: Request [4]
https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png
<https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png>
: status = 0, type = (null), error = (null)[Fri Jun 28 13:16:02 2024].5970,
652.8130: GDAL: GDALOpen(/vsimem/wms/0000022661D59690/wmsresult.dat,
this=000002266059B0E0) succeeds as PNG.[Fri Jun 28 13:16:02 2024].5990,
652.8150: GDAL: GDALClose(/vsimem/wms/0000022661D59690/wmsresult.dat,
this=000002266059B0E0)[Fri Jun 28 13:16:02 2024].6190, 652.8350: WMS: Clean
cache[Fri Jun 28 13:16:02 2024].6190, 652.8350: GDAL:
GDALOpen(/vsimem/wms/000002266237A190/wmsresult.dat, this=000002266059B0E0)
succeeds as PNG.[Fri Jun 28 13:16:02 2024].6200, 652.8360: GDAL:
GDALClose(/vsimem/wms/000002266237A190/wmsresult.dat,
this=000002266059B0E0)[Fri Jun 28 13:16:02 2024].6340, 652.8500: GDAL:
GDALOpen(/vsimem/wms/0000022662340E00/wmsresult.dat, this=000002266059B0E0)
succeeds as PNG.[Fri Jun 28 13:16:02 2024].6340, 652.8500: GDAL:
GDALClose(/vsimem/wms/0000022662340E00/wmsresult.dat,
this=000002266059B0E0)[Fri Jun 28 13:16:02 2024].6350, 652.8510: GDAL:
GDALOpen(/vsimem/wms/00000226605A35B0/wmsresult.dat, this=000002266059B0E0)
succeeds as PNG.[Fri Jun 28 13:16:02 2024].6360, 652.8520: GDAL:
GDALClose(/vsimem/wms/00000226605A35B0/wmsresult.dat,
this=000002266059B0E0)[Fri Jun 28 13:16:02 2024].6360, 652.8520: WMS:
ReadBlockFromCache[Fri Jun 28 13:16:02 2024].6370, 652.8530: CPLError:
./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/0/b/0bab9c0d45a96010ec0092c98e78a52d:
No such file or directoryERROR 4:
./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/0/b/0bab9c0d45a96010ec0092c98e78a52d:
No such file or directory[Fri Jun 28 13:16:02 2024].6370, 652.8530:
CPLError: GDALWMS: Unable to open downloaded block.ERROR 1: GDALWMS: Unable
to open downloaded block.[Fri Jun 28 13:16:02 2024].6370, 652.8530: WMS:
After ReadBlockFromCache[Fri Jun 28 13:16:02 2024].6370, 652.8530:
CPLError: GDALWMS: Unable to download block 4, 0.URL:   HTTP status code:
0, error: (null).Add the HTTP status code to <ZeroBlockHttpCodes> to ignore
this error (see http://www.gdal.org/frmt_wms.html
<http://www.gdal.org/frmt_wms.html>).ERROR 1: GDALWMS: Unable to download
block 4, 0.URL:   HTTP status code: 0, error: (null).Add the HTTP status
code to <ZeroBlockHttpCodes> to ignore this error (see
http://www.gdal.org/frmt_wms.html <http://www.gdal.org/frmt_wms.html>).[Fri
Jun 28 13:16:02 2024].6370, 652.8530: CPLError: GDAL_WMS>, band 3:
IReadBlock failed at X offset 0, Y offset 0: GDALWMS: Unable to download
block 4, 0.URL:   HTTP status code: 0, error: (null).Add the HTTP status
code to <ZeroBlockHttpCodes> to ignore this error (see
http://www.gdal.org/frmt_wms.html
<http://www.gdal.org/frmt_wms.html>).ERROR 1: GDAL_WMS>, band 3: IReadBlock
failed at X offset 0, Y offset 0: GDALWMS: Unable to download block 4,
0.URL:   HTTP status code: 0, error: (null).Add the HTTP status code to
<ZeroBlockHttpCodes> to ignore this error (see
http://www.gdal.org/frmt_wms.html <http://www.gdal.org/frmt_wms.html>).[Fri
Jun 28 13:16:02 2024].6380, 652.8540: GDAL:
GDALOpen(./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/1/5/15b3159bb18ea6f97264bd4d0bac680e,
this=000002266059B0E0) succeeds as PNG.[Fri Jun 28 13:16:02 2024].6380,
652.8540: GDAL:
GDALClose(./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/1/5/15b3159bb18ea6f97264bd4d0bac680e,
this=000002266059B0E0)[Fri Jun 28 13:16:02 2024].6390, 652.8550: HTTP:
Requesting [1/1]
https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png
<https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png>[Fri
Jun 28 13:16:02 2024].8540, 653.0700: HTTP: Request [0]
https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png
<https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png>
: status = 0, type = (null), error = (null)[Fri Jun 28 13:16:02 2024].8540,
653.0700: WMS: ReadBlockFromCache[Fri Jun 28 13:16:02 2024].8550, 653.0710:
CPLError:
./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/0/b/0bab9c0d45a96010ec0092c98e78a52d:
No such file or directoryERROR 4:
./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/0/b/0bab9c0d45a96010ec0092c98e78a52d:
No such file or directory[Fri Jun 28 13:16:02 2024].8550, 653.0710:
CPLError: GDALWMS: Unable to open downloaded block.ERROR 1: GDALWMS: Unable
to open downloaded block.[Fri Jun 28 13:16:02 2024].8550, 653.0710: WMS:
After ReadBlockFromCache[Fri Jun 28 13:16:02 2024].8550, 653.0710:
CPLError: GDALWMS: Unable to download block 4, 0.URL:   HTTP status code:
0, error: (null).Add the HTTP status code to <ZeroBlockHttpCodes> to ignore
this error (see http://www.gdal.org/frmt_wms.html
<http://www.gdal.org/frmt_wms.html>).ERROR 1: GDALWMS: Unable to download
block 4, 0.URL:   HTTP status code: 0, error: (null).Add the HTTP status
code to <ZeroBlockHttpCodes> to ignore this error (see
http://www.gdal.org/frmt_wms.html <http://www.gdal.org/frmt_wms.html>).[Fri
Jun 28 13:16:02 2024].8550, 653.0710: CPLError: GDAL_WMS>, band 3:
IReadBlock failed at X offset 0, Y offset 0: GDALWMS: Unable to download
block 4, 0.URL:   HTTP status code: 0, error: (null).Add the HTTP status
code to <ZeroBlockHttpCodes> to ignore this error (see
http://www.gdal.org/frmt_wms.html
<http://www.gdal.org/frmt_wms.html>).ERROR 1: GDAL_WMS>, band 3: IReadBlock
failed at X offset 0, Y offset 0: GDALWMS: Unable to download block 4,
0.URL:   HTTP status code: 0, error: (null).Add the HTTP status code to
<ZeroBlockHttpCodes> to ignore this error (see
http://www.gdal.org/frmt_wms.html <http://www.gdal.org/frmt_wms.html>).[Fri
Jun 28 13:16:02 2024].8560, 653.0720: GDAL:
GDALOpen(./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/1/5/15b3159bb18ea6f97264bd4d0bac680e,
this=000002266059B0E0) succeeds as PNG.[Fri Jun 28 13:16:02 2024].8560,
653.0720: GDAL:
GDALClose(./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/1/5/15b3159bb18ea6f97264bd4d0bac680e,
this=000002266059B0E0)[Fri Jun 28 13:16:02 2024].8570, 653.0730: HTTP:
Requesting [1/1]
https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png
<https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png>[Fri
Jun 28 13:16:03 2024].0760, 653.2920: HTTP: Request [0]
https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png
<https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png>
: status = 0, type = (null), error = (null)[Fri Jun 28 13:16:03 2024].0760,
653.2920: WMS: ReadBlockFromCache[Fri Jun 28 13:16:03 2024].0760, 653.2920:
CPLError:
./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/0/b/0bab9c0d45a96010ec0092c98e78a52d:
No such file or directoryERROR 4:
./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/0/b/0bab9c0d45a96010ec0092c98e78a52d:
No such file or directory[Fri Jun 28 13:16:03 2024].0760, 653.2920:
CPLError: GDALWMS: Unable to open downloaded block.ERROR 1: GDALWMS: Unable
to open downloaded block.[Fri Jun 28 13:16:03 2024].0760, 653.2920: WMS:
After ReadBlockFromCache[Fri Jun 28 13:16:03 2024].0760, 653.2920:
CPLError: GDALWMS: Unable to download block 4, 0.URL:   HTTP status code:
0, error: (null).Add the HTTP status code to <ZeroBlockHttpCodes> to ignore
this error (see http://www.gdal.org/frmt_wms.html
<http://www.gdal.org/frmt_wms.html>).ERROR 1: GDALWMS: Unable to download
block 4, 0.URL:   HTTP status code: 0, error: (null).Add the HTTP status
code to <ZeroBlockHttpCodes> to ignore this error (see
http://www.gdal.org/frmt_wms.html <http://www.gdal.org/frmt_wms.html>).[Fri
Jun 28 13:16:03 2024].0760, 653.2920: CPLError: GDAL_WMS>, band 3:
IReadBlock failed at X offset 0, Y offset 0: GDALWMS: Unable to download
block 4, 0.URL:   HTTP status code: 0, error: (null).Add the HTTP status
code to <ZeroBlockHttpCodes> to ignore this error (see
http://www.gdal.org/frmt_wms.html
<http://www.gdal.org/frmt_wms.html>).ERROR 1: GDAL_WMS>, band 3: IReadBlock
failed at X offset 0, Y offset 0: GDALWMS: Unable to download block 4,
0.URL:   HTTP status code: 0, error: (null).Add the HTTP status code to
<ZeroBlockHttpCodes> to ignore this error (see
http://www.gdal.org/frmt_wms.html <http://www.gdal.org/frmt_wms.html>).*

How you see, GDAL tries to open cache that does not exist.
But in fact, it exist. I found all necessary tile for full extent map
request in gdalwmscache folder.
I can not send it in this email because of message size limits.

Regards,
Micha?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240701/47283a92/attachment-0001.htm>

From even.rouault at spatialys.com  Mon Jul  1 10:00:03 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 1 Jul 2024 19:00:03 +0200
Subject: [gdal-dev] Expected runtime of polygonize (GDAL 3.9.0) for few
 very large features.
In-Reply-To: <MN2PR09MB5932834D78C863A6F0BCC7C0C9D32@MN2PR09MB5932.namprd09.prod.outlook.com>
References: <MN2PR09MB5932834D78C863A6F0BCC7C0C9D32@MN2PR09MB5932.namprd09.prod.outlook.com>
Message-ID: <8e5b89f9-9fae-4d58-988b-1d7753daa048@spatialys.com>

> I?m able to share the problematic tile(s) if of interest,
>
Yes, please do

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240701/e5a068d9/attachment.htm>

From even.rouault at spatialys.com  Mon Jul  1 10:13:51 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 1 Jul 2024 19:13:51 +0200
Subject: [gdal-dev] Fwd: WMTS huge difference in performance - cache
 issue
In-Reply-To: <CAP+FqQDvZ58V-+oghJet_cpVGhi4svf_toFppQ_SLc3R00UX5Q@mail.gmail.com>
References: <CAP+FqQA2R=8wsKQuzW3KQ7NuiRvOg38zAHUj+g61Dvz=2ZDb=w@mail.gmail.com>
 <CAP+FqQDvZ58V-+oghJet_cpVGhi4svf_toFppQ_SLc3R00UX5Q@mail.gmail.com>
Message-ID: <1b3bed3f-77c9-4d96-a77b-670f24577a15@spatialys.com>

Micha?,

Le 01/07/2024 ? 18:49, Micha? Kowalczuk via gdal-dev a ?crit?:
> Did my email reached gdal mailing list?

yes, it did. I just had a look

There's indeed an issue in the WMTS driver which I've ticketed at 
https://github.com/OSGeo/gdal/issues/10348 . See bottom of the ticket 
for a workaround.

Even

>
> Regards
> Michal
> ------ Wiadomo?? przekazana dalej ------
> Od: *Micha? Kowalczuk* <michkowalczuk at gmail.com>
> Data: pt., 28.06.2024 o 14:59
> Temat: WMTS huge difference in performance - cache issue
> Do: <gdal-dev at lists.osgeo.org>
>
>
> Hi,
> I have two sample WMTS servers.
> The first is a Polish geoportal:
> https://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500
> and the second is German:
> https://basemap.de/dienste/wmts_capabilities_web_raster.xml
> Both work well in QGIS.
> I use C API for creating bitmaps in my area of interest.
> I use GDALDatasetRasterIO function directly with WMTS dataset and 
> appropriate arguments.
> The first Polish server works smoothly for different extents, 
> different widths and heights of my output image. Unfortunately, the 
> second one (German) lasts forever.
> During debugging I concluded the thesis that every GDALDatasetRasterIO 
> in my loop over raster lines, GDAL do not use cache but redownload the 
> same tiles.
>
> Below is a fragment from GDAL log for well-working Polish server:
> /[Fri Jun 28 13:06:16 2024].5430, 66.7590: HTTP: Requesting [1/3] 
> http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=0 
> <http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=0>
> [Fri Jun 28 13:06:16 2024].5430, 66.7590: HTTP: Requesting [2/3] 
> http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=1 
> <http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=1>
> [Fri Jun 28 13:06:16 2024].6670, 66.8830: HTTP: Requesting [3/3] 
> http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=2 
> <http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=2>
> [Fri Jun 28 13:06:16 2024].8230, 67.0390: HTTP: Request [0] 
> http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=0 
> <http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=0> 
> : status = 200, type = image/png, error = (null)
> [Fri Jun 28 13:06:16 2024].8230, 67.0390: HTTP: Request [1] 
> http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=1 
> <http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=1> 
> : status = 200, type = image/png, error = (null)
> [Fri Jun 28 13:06:16 2024].8230, 67.0390: HTTP: Request [2] 
> http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=2 
> <http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=2> 
> : status = 200, type = image/png, error = (null)
> [Fri Jun 28 13:06:16 2024].8240, 67.0400: GDAL: 
> GDALOpen(/vsimem/wms/0000022663367550/wmsresult.dat, 
> this=000002266059B0E0) succeeds as PNG.
> [Fri Jun 28 13:06:16 2024].8260, 67.0420: GDAL: 
> GDALClose(/vsimem/wms/0000022663367550/wmsresult.dat, 
> this=000002266059B0E0)
> [Fri Jun 28 13:06:16 2024].8270, 67.0430: GDAL: 
> GDALOpen(/vsimem/wms/00000226632272D0/wmsresult.dat, 
> this=000002266059B0E0) succeeds as PNG.
> [Fri Jun 28 13:06:16 2024].8300, 67.0460: GDAL: 
> GDALClose(/vsimem/wms/00000226632272D0/wmsresult.dat, 
> this=000002266059B0E0)
> [Fri Jun 28 13:06:16 2024].8300, 67.0460: GDAL: 
> GDALOpen(/vsimem/wms/0000022661BEC8D0/wmsresult.dat, 
> this=000002266059B0E0) succeeds as PNG.
> [Fri Jun 28 13:06:16 2024].8330, 67.0490: GDAL: 
> GDALClose(/vsimem/wms/0000022661BEC8D0/wmsresult.dat, 
> this=000002266059B0E0)
> /
> And here is log snippet for German server:
> /[Fri Jun 28 13:16:02 2024].0840, 652.3000: HTTP: Requesting [1/5] 
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/0.png
> [Fri Jun 28 13:16:02 2024].0840, 652.3000: HTTP: Requesting [2/5] 
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/1.png
> [Fri Jun 28 13:16:02 2024].2690, 652.4850: HTTP: Requesting [3/5] 
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/2.png
> [Fri Jun 28 13:16:02 2024].2870, 652.5030: HTTP: Requesting [4/5] 
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/3.png
> [Fri Jun 28 13:16:02 2024].3140, 652.5300: HTTP: Requesting [5/5] 
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png
> [Fri Jun 28 13:16:02 2024].5970, 652.8130: HTTP: Request [0] 
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/0.png 
> : status = 200, type = image/png, error = (null)
> [Fri Jun 28 13:16:02 2024].5970, 652.8130: HTTP: Request [1] 
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/1.png 
> : status = 200, type = image/png, error = (null)
> [Fri Jun 28 13:16:02 2024].5970, 652.8130: HTTP: Request [2] 
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/2.png 
> : status = 200, type = image/png, error = (null)
> [Fri Jun 28 13:16:02 2024].5970, 652.8130: HTTP: Request [3] 
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/3.png 
> : status = 200, type = image/png, error = (null)
> [Fri Jun 28 13:16:02 2024].5970, 652.8130: HTTP: Request [4] 
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png 
> : status = 0, type = (null), error = (null)
> [Fri Jun 28 13:16:02 2024].5970, 652.8130: GDAL: 
> GDALOpen(/vsimem/wms/0000022661D59690/wmsresult.dat, 
> this=000002266059B0E0) succeeds as PNG.
> [Fri Jun 28 13:16:02 2024].5990, 652.8150: GDAL: 
> GDALClose(/vsimem/wms/0000022661D59690/wmsresult.dat, 
> this=000002266059B0E0)
> [Fri Jun 28 13:16:02 2024].6190, 652.8350: WMS: Clean cache
> [Fri Jun 28 13:16:02 2024].6190, 652.8350: GDAL: 
> GDALOpen(/vsimem/wms/000002266237A190/wmsresult.dat, 
> this=000002266059B0E0) succeeds as PNG.
> [Fri Jun 28 13:16:02 2024].6200, 652.8360: GDAL: 
> GDALClose(/vsimem/wms/000002266237A190/wmsresult.dat, 
> this=000002266059B0E0)
> [Fri Jun 28 13:16:02 2024].6340, 652.8500: GDAL: 
> GDALOpen(/vsimem/wms/0000022662340E00/wmsresult.dat, 
> this=000002266059B0E0) succeeds as PNG.
> [Fri Jun 28 13:16:02 2024].6340, 652.8500: GDAL: 
> GDALClose(/vsimem/wms/0000022662340E00/wmsresult.dat, 
> this=000002266059B0E0)
> [Fri Jun 28 13:16:02 2024].6350, 652.8510: GDAL: 
> GDALOpen(/vsimem/wms/00000226605A35B0/wmsresult.dat, 
> this=000002266059B0E0) succeeds as PNG.
> [Fri Jun 28 13:16:02 2024].6360, 652.8520: GDAL: 
> GDALClose(/vsimem/wms/00000226605A35B0/wmsresult.dat, 
> this=000002266059B0E0)
> [Fri Jun 28 13:16:02 2024].6360, 652.8520: WMS: ReadBlockFromCache
> [Fri Jun 28 13:16:02 2024].6370, 652.8530: CPLError: 
> ./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/0/b/0bab9c0d45a96010ec0092c98e78a52d: 
> No such file or directory
> ERROR 4: 
> ./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/0/b/0bab9c0d45a96010ec0092c98e78a52d: 
> No such file or directory
> [Fri Jun 28 13:16:02 2024].6370, 652.8530: CPLError: GDALWMS: Unable 
> to open downloaded block.
> ERROR 1: GDALWMS: Unable to open downloaded block.
> [Fri Jun 28 13:16:02 2024].6370, 652.8530: WMS: After ReadBlockFromCache
> [Fri Jun 28 13:16:02 2024].6370, 652.8530: CPLError: GDALWMS: Unable 
> to download block 4, 0.
> URL:
> ? HTTP status code: 0, error: (null).
> Add the HTTP status code to <ZeroBlockHttpCodes> to ignore this error 
> (see http://www.gdal.org/frmt_wms.html).
> ERROR 1: GDALWMS: Unable to download block 4, 0.
> URL:
> ? HTTP status code: 0, error: (null).
> Add the HTTP status code to <ZeroBlockHttpCodes> to ignore this error 
> (see http://www.gdal.org/frmt_wms.html).
> [Fri Jun 28 13:16:02 2024].6370, 652.8530: CPLError: GDAL_WMS>, band 
> 3: IReadBlock failed at X offset 0, Y offset 0: GDALWMS: Unable to 
> download block 4, 0.
> URL:
> ? HTTP status code: 0, error: (null).
> Add the HTTP status code to <ZeroBlockHttpCodes> to ignore this error 
> (see http://www.gdal.org/frmt_wms.html).
> ERROR 1: GDAL_WMS>, band 3: IReadBlock failed at X offset 0, Y offset 
> 0: GDALWMS: Unable to download block 4, 0.
> URL:
> ? HTTP status code: 0, error: (null).
> Add the HTTP status code to <ZeroBlockHttpCodes> to ignore this error 
> (see http://www.gdal.org/frmt_wms.html).
> [Fri Jun 28 13:16:02 2024].6380, 652.8540: GDAL: 
> GDALOpen(./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/1/5/15b3159bb18ea6f97264bd4d0bac680e, 
> this=000002266059B0E0) succeeds as PNG.
> [Fri Jun 28 13:16:02 2024].6380, 652.8540: GDAL: 
> GDALClose(./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/1/5/15b3159bb18ea6f97264bd4d0bac680e, 
> this=000002266059B0E0)
> [Fri Jun 28 13:16:02 2024].6390, 652.8550: HTTP: Requesting [1/1] 
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png
> [Fri Jun 28 13:16:02 2024].8540, 653.0700: HTTP: Request [0] 
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png 
> : status = 0, type = (null), error = (null)
> [Fri Jun 28 13:16:02 2024].8540, 653.0700: WMS: ReadBlockFromCache
> [Fri Jun 28 13:16:02 2024].8550, 653.0710: CPLError: 
> ./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/0/b/0bab9c0d45a96010ec0092c98e78a52d: 
> No such file or directory
> ERROR 4: 
> ./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/0/b/0bab9c0d45a96010ec0092c98e78a52d: 
> No such file or directory
> [Fri Jun 28 13:16:02 2024].8550, 653.0710: CPLError: GDALWMS: Unable 
> to open downloaded block.
> ERROR 1: GDALWMS: Unable to open downloaded block.
> [Fri Jun 28 13:16:02 2024].8550, 653.0710: WMS: After ReadBlockFromCache
> [Fri Jun 28 13:16:02 2024].8550, 653.0710: CPLError: GDALWMS: Unable 
> to download block 4, 0.
> URL:
> ? HTTP status code: 0, error: (null).
> Add the HTTP status code to <ZeroBlockHttpCodes> to ignore this error 
> (see http://www.gdal.org/frmt_wms.html).
> ERROR 1: GDALWMS: Unable to download block 4, 0.
> URL:
> ? HTTP status code: 0, error: (null).
> Add the HTTP status code to <ZeroBlockHttpCodes> to ignore this error 
> (see http://www.gdal.org/frmt_wms.html).
> [Fri Jun 28 13:16:02 2024].8550, 653.0710: CPLError: GDAL_WMS>, band 
> 3: IReadBlock failed at X offset 0, Y offset 0: GDALWMS: Unable to 
> download block 4, 0.
> URL:
> ? HTTP status code: 0, error: (null).
> Add the HTTP status code to <ZeroBlockHttpCodes> to ignore this error 
> (see http://www.gdal.org/frmt_wms.html).
> ERROR 1: GDAL_WMS>, band 3: IReadBlock failed at X offset 0, Y offset 
> 0: GDALWMS: Unable to download block 4, 0.
> URL:
> ? HTTP status code: 0, error: (null).
> Add the HTTP status code to <ZeroBlockHttpCodes> to ignore this error 
> (see http://www.gdal.org/frmt_wms.html).
> [Fri Jun 28 13:16:02 2024].8560, 653.0720: GDAL: 
> GDALOpen(./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/1/5/15b3159bb18ea6f97264bd4d0bac680e, 
> this=000002266059B0E0) succeeds as PNG.
> [Fri Jun 28 13:16:02 2024].8560, 653.0720: GDAL: 
> GDALClose(./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/1/5/15b3159bb18ea6f97264bd4d0bac680e, 
> this=000002266059B0E0)
> [Fri Jun 28 13:16:02 2024].8570, 653.0730: HTTP: Requesting [1/1] 
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png
> [Fri Jun 28 13:16:03 2024].0760, 653.2920: HTTP: Request [0] 
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png 
> : status = 0, type = (null), error = (null)
> [Fri Jun 28 13:16:03 2024].0760, 653.2920: WMS: ReadBlockFromCache
> [Fri Jun 28 13:16:03 2024].0760, 653.2920: CPLError: 
> ./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/0/b/0bab9c0d45a96010ec0092c98e78a52d: 
> No such file or directory
> ERROR 4: 
> ./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/0/b/0bab9c0d45a96010ec0092c98e78a52d: 
> No such file or directory
> [Fri Jun 28 13:16:03 2024].0760, 653.2920: CPLError: GDALWMS: Unable 
> to open downloaded block.
> ERROR 1: GDALWMS: Unable to open downloaded block.
> [Fri Jun 28 13:16:03 2024].0760, 653.2920: WMS: After ReadBlockFromCache
> [Fri Jun 28 13:16:03 2024].0760, 653.2920: CPLError: GDALWMS: Unable 
> to download block 4, 0.
> URL:
> ? HTTP status code: 0, error: (null).
> Add the HTTP status code to <ZeroBlockHttpCodes> to ignore this error 
> (see http://www.gdal.org/frmt_wms.html).
> ERROR 1: GDALWMS: Unable to download block 4, 0.
> URL:
> ? HTTP status code: 0, error: (null).
> Add the HTTP status code to <ZeroBlockHttpCodes> to ignore this error 
> (see http://www.gdal.org/frmt_wms.html).
> [Fri Jun 28 13:16:03 2024].0760, 653.2920: CPLError: GDAL_WMS>, band 
> 3: IReadBlock failed at X offset 0, Y offset 0: GDALWMS: Unable to 
> download block 4, 0.
> URL:
> ? HTTP status code: 0, error: (null).
> Add the HTTP status code to <ZeroBlockHttpCodes> to ignore this error 
> (see http://www.gdal.org/frmt_wms.html).
> ERROR 1: GDAL_WMS>, band 3: IReadBlock failed at X offset 0, Y offset 
> 0: GDALWMS: Unable to download block 4, 0.
> URL:
> ? HTTP status code: 0, error: (null).
> Add the HTTP status code to <ZeroBlockHttpCodes> to ignore this error 
> (see http://www.gdal.org/frmt_wms.html)./
>
> How you see, GDAL tries to open cache that does not exist.
> But in fact, it exist. I found all necessary tile for full extent map 
> request in gdalwmscache folder.
> I can not send it in this email because of message size limits.
>
> Regards,
> Micha?
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240701/0265dd25/attachment-0001.htm>

From craig.destigter at koordinates.com  Mon Jul  1 21:04:54 2024
From: craig.destigter at koordinates.com (Craig de Stigter)
Date: Tue, 2 Jul 2024 16:04:54 +1200
Subject: [gdal-dev] GDAL 3.9: How to pass negative flag values to
 GDALArgumentParser?
Message-ID: <CAF1M8pdD2PNO0XBkswwA1c+iWvo3pQde7ea+M1JEen2xTdCLxg@mail.gmail.com>

While trying to upgrade to GDAL 3.9 i'm hitting this error:

$ gdalwarp '-dstnodata' '-inf' ...
ERROR 1: Too few arguments for '-dstnodata'.
...

The same happens with `gdalbuildvrt -vrtnodata '-1 -1 -1' ...`

We use negative values for NODATA in a few places because they're unlikely
to already be used by the source data. Is there a way to pass negative
values to these options with GDAL 3.9?

Thanks

-- 
Regards,
Craig

Platform Engineer
Koordinates

+64 21 256 9488 <+64%2021%20256%209488> / koordinates.com / @koordinates
<https://twitter.com/koordinates>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240702/8d8b2e18/attachment.htm>

From craig.destigter at koordinates.com  Mon Jul  1 21:39:21 2024
From: craig.destigter at koordinates.com (Craig de Stigter)
Date: Tue, 2 Jul 2024 16:39:21 +1200
Subject: [gdal-dev] GDAL 3.9: How to pass negative flag values to
 GDALArgumentParser?
In-Reply-To: <CAF1M8pdD2PNO0XBkswwA1c+iWvo3pQde7ea+M1JEen2xTdCLxg@mail.gmail.com>
References: <CAF1M8pdD2PNO0XBkswwA1c+iWvo3pQde7ea+M1JEen2xTdCLxg@mail.gmail.com>
Message-ID: <CAF1M8peG-KNmieRsb_GQOSkikBGDOuvvcdx08_s-WFBVcb_OOQ@mail.gmail.com>

A colleague has noticed a workaround: prefix the argument with a space:

$ gdalwarp '-dstnodata' ' -inf' ...


On Tue, 2 Jul 2024 at 16:04, Craig de Stigter <
craig.destigter at koordinates.com> wrote:

> While trying to upgrade to GDAL 3.9 i'm hitting this error:
>
> $ gdalwarp '-dstnodata' '-inf' ...
> ERROR 1: Too few arguments for '-dstnodata'.
> ...
>
> The same happens with `gdalbuildvrt -vrtnodata '-1 -1 -1' ...`
>
> We use negative values for NODATA in a few places because they're unlikely
> to already be used by the source data. Is there a way to pass negative
> values to these options with GDAL 3.9?
>
> Thanks
>
> --
> Regards,
> Craig
>
> Platform Engineer
> Koordinates
>
> +64 21 256 9488 <+64%2021%20256%209488> / koordinates.com / @koordinates
> <https://twitter.com/koordinates>
>


-- 
Regards,
Craig

Platform Engineer
Koordinates

+64 21 256 9488 <+64%2021%20256%209488> / koordinates.com / @koordinates
<https://twitter.com/koordinates>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240702/82f27a40/attachment.htm>

From michkowalczuk at gmail.com  Tue Jul  2 00:49:31 2024
From: michkowalczuk at gmail.com (=?UTF-8?Q?Micha=C5=82_Kowalczuk?=)
Date: Tue, 2 Jul 2024 09:49:31 +0200
Subject: [gdal-dev] Fwd: WMTS huge difference in performance - cache
 issue
In-Reply-To: <1b3bed3f-77c9-4d96-a77b-670f24577a15@spatialys.com>
References: <CAP+FqQA2R=8wsKQuzW3KQ7NuiRvOg38zAHUj+g61Dvz=2ZDb=w@mail.gmail.com>
 <CAP+FqQDvZ58V-+oghJet_cpVGhi4svf_toFppQ_SLc3R00UX5Q@mail.gmail.com>
 <1b3bed3f-77c9-4d96-a77b-670f24577a15@spatialys.com>
Message-ID: <CAP+FqQB99qGtH4CDx6rOyEhc76OhLzHKEPm=EaN_tg_pfw6Vog@mail.gmail.com>

Great to hear:-)
Thank you!

Micha?

pon., 1 lip 2024 o 19:13 Even Rouault <even.rouault at spatialys.com>
napisa?(a):

> Micha?,
> Le 01/07/2024 ? 18:49, Micha? Kowalczuk via gdal-dev a ?crit :
>
> Did my email reached gdal mailing list?
>
> yes, it did. I just had a look
>
> There's indeed an issue in the WMTS driver which I've ticketed at
> https://github.com/OSGeo/gdal/issues/10348 . See bottom of the ticket for
> a workaround.
>
> Even
>
>
> Regards
> Michal
> ------ Wiadomo?? przekazana dalej ------
> Od: Micha? Kowalczuk <michkowalczuk at gmail.com>
> Data: pt., 28.06.2024 o 14:59
> Temat: WMTS huge difference in performance - cache issue
> Do: <gdal-dev at lists.osgeo.org>
>
>
> Hi,
> I have two sample WMTS servers.
> The first is a Polish geoportal:
> https://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500
> and the second is German:
> https://basemap.de/dienste/wmts_capabilities_web_raster.xml
> Both work well in QGIS.
> I use C API for creating bitmaps in my area of interest.
> I use GDALDatasetRasterIO function directly with WMTS dataset and
> appropriate arguments.
> The first Polish server works smoothly for different extents, different
> widths and heights of my output image. Unfortunately, the second one
> (German) lasts forever.
> During debugging I concluded the thesis that every GDALDatasetRasterIO in
> my loop over raster lines, GDAL do not use cache but redownload the same
> tiles.
>
> Below is a fragment from GDAL log for well-working Polish server:
>
>
>
>
>
>
>
>
>
>
>
>
> *[Fri Jun 28 13:06:16 2024].5430, 66.7590: HTTP: Requesting [1/3]
> http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=0
> <http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=0>
> [Fri Jun 28 13:06:16 2024].5430, 66.7590: HTTP: Requesting [2/3]
> http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=1
> <http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=1>
> [Fri Jun 28 13:06:16 2024].6670, 66.8830: HTTP: Requesting [3/3]
> http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=2
> <http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=2>
> [Fri Jun 28 13:06:16 2024].8230, 67.0390: HTTP: Request [0]
> http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=0
> <http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=0>
> : status = 200, type = image/png, error = (null) [Fri Jun 28 13:06:16
> 2024].8230, 67.0390: HTTP: Request [1]
> http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=1
> <http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=1>
> : status = 200, type = image/png, error = (null) [Fri Jun 28 13:06:16
> 2024].8230, 67.0390: HTTP: Request [2]
> http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=2
> <http://mapy.geoportal.gov.pl/wss/service/WMTS/guest/wmts/G2_MOBILE_500?service=WMTS&request=GetTile&version=1.0.0&layer=G2_MOBILE_500&style=default&format=image/png&TileMatrixSet=EPSG:2180&TileMatrix=EPSG:2180:4&TileRow=2&TileCol=2>
> : status = 200, type = image/png, error = (null) [Fri Jun 28 13:06:16
> 2024].8240, 67.0400: GDAL:
> GDALOpen(/vsimem/wms/0000022663367550/wmsresult.dat, this=000002266059B0E0)
> succeeds as PNG. [Fri Jun 28 13:06:16 2024].8260, 67.0420: GDAL:
> GDALClose(/vsimem/wms/0000022663367550/wmsresult.dat,
> this=000002266059B0E0) [Fri Jun 28 13:06:16 2024].8270, 67.0430: GDAL:
> GDALOpen(/vsimem/wms/00000226632272D0/wmsresult.dat, this=000002266059B0E0)
> succeeds as PNG. [Fri Jun 28 13:06:16 2024].8300, 67.0460: GDAL:
> GDALClose(/vsimem/wms/00000226632272D0/wmsresult.dat,
> this=000002266059B0E0) [Fri Jun 28 13:06:16 2024].8300, 67.0460: GDAL:
> GDALOpen(/vsimem/wms/0000022661BEC8D0/wmsresult.dat, this=000002266059B0E0)
> succeeds as PNG. [Fri Jun 28 13:06:16 2024].8330, 67.0490: GDAL:
> GDALClose(/vsimem/wms/0000022661BEC8D0/wmsresult.dat,
> this=000002266059B0E0) *
> And here is log snippet for German server:
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> *[Fri Jun 28 13:16:02 2024].0840, 652.3000: HTTP: Requesting [1/5]
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/0.png
> <https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/0.png>
> [Fri Jun 28 13:16:02 2024].0840, 652.3000: HTTP: Requesting [2/5]
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/1.png
> <https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/1.png>
> [Fri Jun 28 13:16:02 2024].2690, 652.4850: HTTP: Requesting [3/5]
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/2.png
> <https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/2.png>
> [Fri Jun 28 13:16:02 2024].2870, 652.5030: HTTP: Requesting [4/5]
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/3.png
> <https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/3.png>
> [Fri Jun 28 13:16:02 2024].3140, 652.5300: HTTP: Requesting [5/5]
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png
> <https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png>
> [Fri Jun 28 13:16:02 2024].5970, 652.8130: HTTP: Request [0]
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/0.png
> <https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/0.png>
> : status = 200, type = image/png, error = (null) [Fri Jun 28 13:16:02
> 2024].5970, 652.8130: HTTP: Request [1]
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/1.png
> <https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/1.png>
> : status = 200, type = image/png, error = (null) [Fri Jun 28 13:16:02
> 2024].5970, 652.8130: HTTP: Request [2]
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/2.png
> <https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/2.png>
> : status = 200, type = image/png, error = (null) [Fri Jun 28 13:16:02
> 2024].5970, 652.8130: HTTP: Request [3]
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/3.png
> <https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/3.png>
> : status = 200, type = image/png, error = (null) [Fri Jun 28 13:16:02
> 2024].5970, 652.8130: HTTP: Request [4]
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png
> <https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png>
> : status = 0, type = (null), error = (null) [Fri Jun 28 13:16:02
> 2024].5970, 652.8130: GDAL:
> GDALOpen(/vsimem/wms/0000022661D59690/wmsresult.dat, this=000002266059B0E0)
> succeeds as PNG. [Fri Jun 28 13:16:02 2024].5990, 652.8150: GDAL:
> GDALClose(/vsimem/wms/0000022661D59690/wmsresult.dat,
> this=000002266059B0E0) [Fri Jun 28 13:16:02 2024].6190, 652.8350: WMS:
> Clean cache [Fri Jun 28 13:16:02 2024].6190, 652.8350: GDAL:
> GDALOpen(/vsimem/wms/000002266237A190/wmsresult.dat, this=000002266059B0E0)
> succeeds as PNG. [Fri Jun 28 13:16:02 2024].6200, 652.8360: GDAL:
> GDALClose(/vsimem/wms/000002266237A190/wmsresult.dat,
> this=000002266059B0E0) [Fri Jun 28 13:16:02 2024].6340, 652.8500: GDAL:
> GDALOpen(/vsimem/wms/0000022662340E00/wmsresult.dat, this=000002266059B0E0)
> succeeds as PNG. [Fri Jun 28 13:16:02 2024].6340, 652.8500: GDAL:
> GDALClose(/vsimem/wms/0000022662340E00/wmsresult.dat,
> this=000002266059B0E0) [Fri Jun 28 13:16:02 2024].6350, 652.8510: GDAL:
> GDALOpen(/vsimem/wms/00000226605A35B0/wmsresult.dat, this=000002266059B0E0)
> succeeds as PNG. [Fri Jun 28 13:16:02 2024].6360, 652.8520: GDAL:
> GDALClose(/vsimem/wms/00000226605A35B0/wmsresult.dat,
> this=000002266059B0E0) [Fri Jun 28 13:16:02 2024].6360, 652.8520: WMS:
> ReadBlockFromCache [Fri Jun 28 13:16:02 2024].6370, 652.8530: CPLError:
> ./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/0/b/0bab9c0d45a96010ec0092c98e78a52d:
> No such file or directory ERROR 4:
> ./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/0/b/0bab9c0d45a96010ec0092c98e78a52d:
> No such file or directory [Fri Jun 28 13:16:02 2024].6370, 652.8530:
> CPLError: GDALWMS: Unable to open downloaded block. ERROR 1: GDALWMS:
> Unable to open downloaded block. [Fri Jun 28 13:16:02 2024].6370, 652.8530:
> WMS: After ReadBlockFromCache [Fri Jun 28 13:16:02 2024].6370, 652.8530:
> CPLError: GDALWMS: Unable to download block 4, 0. URL:   HTTP status code:
> 0, error: (null). Add the HTTP status code to <ZeroBlockHttpCodes> to
> ignore this error (see http://www.gdal.org/frmt_wms.html
> <http://www.gdal.org/frmt_wms.html>). ERROR 1: GDALWMS: Unable to download
> block 4, 0. URL:   HTTP status code: 0, error: (null). Add the HTTP status
> code to <ZeroBlockHttpCodes> to ignore this error (see
> http://www.gdal.org/frmt_wms.html <http://www.gdal.org/frmt_wms.html>).
> [Fri Jun 28 13:16:02 2024].6370, 652.8530: CPLError: GDAL_WMS>, band 3:
> IReadBlock failed at X offset 0, Y offset 0: GDALWMS: Unable to download
> block 4, 0. URL:   HTTP status code: 0, error: (null). Add the HTTP status
> code to <ZeroBlockHttpCodes> to ignore this error (see
> http://www.gdal.org/frmt_wms.html <http://www.gdal.org/frmt_wms.html>).
> ERROR 1: GDAL_WMS>, band 3: IReadBlock failed at X offset 0, Y offset 0:
> GDALWMS: Unable to download block 4, 0. URL:   HTTP status code: 0, error:
> (null). Add the HTTP status code to <ZeroBlockHttpCodes> to ignore this
> error (see http://www.gdal.org/frmt_wms.html
> <http://www.gdal.org/frmt_wms.html>). [Fri Jun 28 13:16:02 2024].6380,
> 652.8540: GDAL:
> GDALOpen(./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/1/5/15b3159bb18ea6f97264bd4d0bac680e,
> this=000002266059B0E0) succeeds as PNG. [Fri Jun 28 13:16:02 2024].6380,
> 652.8540: GDAL:
> GDALClose(./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/1/5/15b3159bb18ea6f97264bd4d0bac680e,
> this=000002266059B0E0) [Fri Jun 28 13:16:02 2024].6390, 652.8550: HTTP:
> Requesting [1/1]
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png
> <https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png>
> [Fri Jun 28 13:16:02 2024].8540, 653.0700: HTTP: Request [0]
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png
> <https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png>
> : status = 0, type = (null), error = (null) [Fri Jun 28 13:16:02
> 2024].8540, 653.0700: WMS: ReadBlockFromCache [Fri Jun 28 13:16:02
> 2024].8550, 653.0710: CPLError:
> ./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/0/b/0bab9c0d45a96010ec0092c98e78a52d:
> No such file or directory ERROR 4:
> ./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/0/b/0bab9c0d45a96010ec0092c98e78a52d:
> No such file or directory [Fri Jun 28 13:16:02 2024].8550, 653.0710:
> CPLError: GDALWMS: Unable to open downloaded block. ERROR 1: GDALWMS:
> Unable to open downloaded block. [Fri Jun 28 13:16:02 2024].8550, 653.0710:
> WMS: After ReadBlockFromCache [Fri Jun 28 13:16:02 2024].8550, 653.0710:
> CPLError: GDALWMS: Unable to download block 4, 0. URL:   HTTP status code:
> 0, error: (null). Add the HTTP status code to <ZeroBlockHttpCodes> to
> ignore this error (see http://www.gdal.org/frmt_wms.html
> <http://www.gdal.org/frmt_wms.html>). ERROR 1: GDALWMS: Unable to download
> block 4, 0. URL:   HTTP status code: 0, error: (null). Add the HTTP status
> code to <ZeroBlockHttpCodes> to ignore this error (see
> http://www.gdal.org/frmt_wms.html <http://www.gdal.org/frmt_wms.html>).
> [Fri Jun 28 13:16:02 2024].8550, 653.0710: CPLError: GDAL_WMS>, band 3:
> IReadBlock failed at X offset 0, Y offset 0: GDALWMS: Unable to download
> block 4, 0. URL:   HTTP status code: 0, error: (null). Add the HTTP status
> code to <ZeroBlockHttpCodes> to ignore this error (see
> http://www.gdal.org/frmt_wms.html <http://www.gdal.org/frmt_wms.html>).
> ERROR 1: GDAL_WMS>, band 3: IReadBlock failed at X offset 0, Y offset 0:
> GDALWMS: Unable to download block 4, 0. URL:   HTTP status code: 0, error:
> (null). Add the HTTP status code to <ZeroBlockHttpCodes> to ignore this
> error (see http://www.gdal.org/frmt_wms.html
> <http://www.gdal.org/frmt_wms.html>). [Fri Jun 28 13:16:02 2024].8560,
> 653.0720: GDAL:
> GDALOpen(./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/1/5/15b3159bb18ea6f97264bd4d0bac680e,
> this=000002266059B0E0) succeeds as PNG. [Fri Jun 28 13:16:02 2024].8560,
> 653.0720: GDAL:
> GDALClose(./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/1/5/15b3159bb18ea6f97264bd4d0bac680e,
> this=000002266059B0E0) [Fri Jun 28 13:16:02 2024].8570, 653.0730: HTTP:
> Requesting [1/1]
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png
> <https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png>
> [Fri Jun 28 13:16:03 2024].0760, 653.2920: HTTP: Request [0]
> https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png
> <https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/DE_EPSG_25832_ADV/02/0/4.png>
> : status = 0, type = (null), error = (null) [Fri Jun 28 13:16:03
> 2024].0760, 653.2920: WMS: ReadBlockFromCache [Fri Jun 28 13:16:03
> 2024].0760, 653.2920: CPLError:
> ./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/0/b/0bab9c0d45a96010ec0092c98e78a52d:
> No such file or directory ERROR 4:
> ./gdalwmscache\76ac5c8f3010af4e1a17a26a53e6ac32/0/b/0bab9c0d45a96010ec0092c98e78a52d:
> No such file or directory [Fri Jun 28 13:16:03 2024].0760, 653.2920:
> CPLError: GDALWMS: Unable to open downloaded block. ERROR 1: GDALWMS:
> Unable to open downloaded block. [Fri Jun 28 13:16:03 2024].0760, 653.2920:
> WMS: After ReadBlockFromCache [Fri Jun 28 13:16:03 2024].0760, 653.2920:
> CPLError: GDALWMS: Unable to download block 4, 0. URL:   HTTP status code:
> 0, error: (null). Add the HTTP status code to <ZeroBlockHttpCodes> to
> ignore this error (see http://www.gdal.org/frmt_wms.html
> <http://www.gdal.org/frmt_wms.html>). ERROR 1: GDALWMS: Unable to download
> block 4, 0. URL:   HTTP status code: 0, error: (null). Add the HTTP status
> code to <ZeroBlockHttpCodes> to ignore this error (see
> http://www.gdal.org/frmt_wms.html <http://www.gdal.org/frmt_wms.html>).
> [Fri Jun 28 13:16:03 2024].0760, 653.2920: CPLError: GDAL_WMS>, band 3:
> IReadBlock failed at X offset 0, Y offset 0: GDALWMS: Unable to download
> block 4, 0. URL:   HTTP status code: 0, error: (null). Add the HTTP status
> code to <ZeroBlockHttpCodes> to ignore this error (see
> http://www.gdal.org/frmt_wms.html <http://www.gdal.org/frmt_wms.html>).
> ERROR 1: GDAL_WMS>, band 3: IReadBlock failed at X offset 0, Y offset 0:
> GDALWMS: Unable to download block 4, 0. URL:   HTTP status code: 0, error:
> (null). Add the HTTP status code to <ZeroBlockHttpCodes> to ignore this
> error (see http://www.gdal.org/frmt_wms.html
> <http://www.gdal.org/frmt_wms.html>).*
>
> How you see, GDAL tries to open cache that does not exist.
> But in fact, it exist. I found all necessary tile for full extent map
> request in gdalwmscache folder.
> I can not send it in this email because of message size limits.
>
> Regards,
> Micha?
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240702/a67646ba/attachment-0001.htm>

From even.rouault at spatialys.com  Tue Jul  2 02:15:54 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 2 Jul 2024 11:15:54 +0200
Subject: [gdal-dev] GDAL 3.9: How to pass negative flag values to
 GDALArgumentParser?
In-Reply-To: <CAF1M8peG-KNmieRsb_GQOSkikBGDOuvvcdx08_s-WFBVcb_OOQ@mail.gmail.com>
References: <CAF1M8pdD2PNO0XBkswwA1c+iWvo3pQde7ea+M1JEen2xTdCLxg@mail.gmail.com>
 <CAF1M8peG-KNmieRsb_GQOSkikBGDOuvvcdx08_s-WFBVcb_OOQ@mail.gmail.com>
Message-ID: <ef54aaa2-b69f-43bb-9671-f7e4af2af28a@spatialys.com>

Hi Craig,

this is indeed a regression. I'm on it

Even

Le 02/07/2024 ? 06:39, Craig de Stigter via gdal-dev a ?crit?:
> A colleague has noticed a workaround: prefix the argument with a space:
>
> $ gdalwarp '-dstnodata' ' -inf' ...
>
>
> On Tue, 2 Jul 2024 at 16:04, Craig de Stigter 
> <craig.destigter at koordinates.com> wrote:
>
>     While trying to upgrade to GDAL 3.9 i'm hitting this error:
>
>     $ gdalwarp '-dstnodata' '-inf' ...
>     ERROR 1: Too few arguments for '-dstnodata'.
>     ...
>
>     The same happens with `gdalbuildvrt -vrtnodata '-1 -1 -1' ...`
>
>     We use negative values for NODATA in a few places because they're
>     unlikely to already be used by the source data. Is there a way to
>     pass negative values to these options with GDAL 3.9?
>
>     Thanks
>
>     -- 
>     Regards,
>     Craig
>
>     Platform Engineer
>     Koordinates
>
>     +64 21 256 9488 <tel:+64%2021%20256%209488>?/ koordinates.com
>     <http://koordinates.com/>?/ @koordinates
>     <https://twitter.com/koordinates>
>
>
>
> -- 
> Regards,
> Craig
>
> Platform Engineer
> Koordinates
>
> +64 21 256 9488 <tel:+64%2021%20256%209488>?/ koordinates.com 
> <http://koordinates.com/>?/ @koordinates <https://twitter.com/koordinates>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240702/591a5f75/attachment.htm>

From robin at rtwilson.com  Tue Jul  2 08:18:10 2024
From: robin at rtwilson.com (Robin Wilson)
Date: Tue, 2 Jul 2024 16:18:10 +0100
Subject: [gdal-dev] Issues specifying PostGIS connection details - possibly
 related to special characters in passwords?
Message-ID: <etPan.66841a38.23ced03a.1ff@rtwilson.com>

Hi,

I?m using ogr2ogr to load a GeoPackage file into a PostGIS database. I initially tried using a command like this:

ogr2ogr --debug ON -f PostgreSQL PG:"host=<IP> user=<user> password=robin$42 dbname=data sslmode=require" file.gpkg -nln table_name

However, this doesn?t work, and I always get an error:

FATAL: ?password authentication failed for user ?<user>"

If I restructure the command to use the alternative postgresql:// connection string like this, then it works:

ogr2ogr --debug ON -f PostgreSQL 'postgresql://<user>:robin$42@<IP>/data?sslmode=require? file.gpkg -nln table_name

I don?t remember running into this problem before when connecting to PostGIS databases using the PG: connection string, so I?m wondering whether my shell is doing something strange with my password? Obviously I don?t want to share my actual password, but it has a $ in it, and I wonder whether somehow this is causing problems - but only when using the PG: connection string.

Any suggestions welcome,

Best regards,

Robin


Dr Robin Wilson
www.rtwilson.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240702/d6494243/attachment.htm>

From daniel.fred.evans at gmail.com  Tue Jul  2 09:08:01 2024
From: daniel.fred.evans at gmail.com (Daniel Evans)
Date: Tue, 2 Jul 2024 17:08:01 +0100
Subject: [gdal-dev] Issues specifying PostGIS connection details -
 possibly related to special characters in passwords?
In-Reply-To: <etPan.66841a38.23ced03a.1ff@rtwilson.com>
References: <etPan.66841a38.23ced03a.1ff@rtwilson.com>
Message-ID: <CANnaQaYVQpLKrB5rs4dvuLx+_ftnUMGamgm1TpB9xPFO0JGvDg@mail.gmail.com>

Hi Robin,

Is this a shell issue, rather than a GDAL one? The dollar sign makes me
suspect that a Unix shell is interpreting "robin$42" as "the string 'robin'
and the value of variable $42" before it gets into GDAL. My terminal would
interpret it as the following:
$ echo robin$42
robin

and I'd need to escape the dollar symbol to get the text verbatim:
$ echo robin\$42
robin$42

Cheers,
Daniel

On Tue, 2 Jul 2024 at 16:35, Robin Wilson via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> I?m using ogr2ogr to load a GeoPackage file into a PostGIS database. I
> initially tried using a command like this:
>
> ogr2ogr --debug ON -f PostgreSQL PG:"host=<IP> user=<user>
> password=robin$42 dbname=data sslmode=require" file.gpkg -nln table_name
>
> However, this doesn?t work, and I always get an error:
>
> FATAL:  password authentication failed for user ?<user>"
>
> If I restructure the command to use the alternative postgresql://
> connection string like this, then it works:
>
> ogr2ogr --debug ON -f PostgreSQL 'postgresql://<user>:robin$42@<IP>/data?sslmode=require?
> file.gpkg -nln table_name
>
> I don?t remember running into this problem before when connecting to
> PostGIS databases using the PG: connection string, so I?m wondering whether
> my shell is doing something strange with my password? Obviously I don?t
> want to share my actual password, but it has a $ in it, and I wonder
> whether somehow this is causing problems - but only when using the PG:
> connection string.
>
> Any suggestions welcome,
>
> Best regards,
>
> Robin
>
>
> Dr Robin Wilson
> www.rtwilson.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240702/424b66dd/attachment.htm>

From robin at rtwilson.com  Tue Jul  2 09:13:42 2024
From: robin at rtwilson.com (Robin Wilson)
Date: Tue, 2 Jul 2024 17:13:42 +0100
Subject: [gdal-dev] Issues specifying PostGIS connection details -
 possibly related to special characters in passwords?
In-Reply-To: <CANnaQaYVQpLKrB5rs4dvuLx+_ftnUMGamgm1TpB9xPFO0JGvDg@mail.gmail.com>
References: <etPan.66841a38.23ced03a.1ff@rtwilson.com>
 <CANnaQaYVQpLKrB5rs4dvuLx+_ftnUMGamgm1TpB9xPFO0JGvDg@mail.gmail.com>
Message-ID: <etPan.6684273b.1ca2d0b7.1ff@rtwilson.com>

Hi,

Hmm, I?m sure I tried escaping it before - but putting a \ in front of it fixed it - obviously I didn?t try properly before. Possibly I only tried quoting it in various ways. Thanks for the solution!

Now the thing I?m intrigued about is why it was working with the postgresql:// connection string but not the PG connection string?

Best regards,

Robin

On 2 July 2024 at 17:08:18, Daniel Evans (daniel.fred.evans at gmail.com) wrote:

Hi Robin,

Is this a shell issue, rather than a GDAL one? The dollar sign makes me suspect that a Unix shell is interpreting "robin$42" as "the string 'robin' and the value of variable $42" before it gets into GDAL. My terminal would interpret it as the following:
$ echo robin$42
robin

and I'd need to escape the dollar symbol to get the text verbatim:
$ echo robin\$42
robin$42

Cheers,
Daniel

On Tue, 2 Jul 2024 at 16:35, Robin Wilson via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
Hi,

I?m using ogr2ogr to load a GeoPackage file into a PostGIS database. I initially tried using a command like this:

ogr2ogr --debug ON -f PostgreSQL PG:"host=<IP> user=<user> password=robin$42 dbname=data sslmode=require" file.gpkg -nln table_name

However, this doesn?t work, and I always get an error:

FATAL: ?password authentication failed for user ?<user>"

If I restructure the command to use the alternative postgresql:// connection string like this, then it works:

ogr2ogr --debug ON -f PostgreSQL 'postgresql://<user>:robin$42@<IP>/data?sslmode=require? file.gpkg -nln table_name

I don?t remember running into this problem before when connecting to PostGIS databases using the PG: connection string, so I?m wondering whether my shell is doing something strange with my password? Obviously I don?t want to share my actual password, but it has a $ in it, and I wonder whether somehow this is causing problems - but only when using the PG: connection string.

Any suggestions welcome,

Best regards,

Robin


Dr Robin Wilson
www.rtwilson.com

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240702/4aaa5bee/attachment-0001.htm>

From daniel.fred.evans at gmail.com  Tue Jul  2 09:15:42 2024
From: daniel.fred.evans at gmail.com (Daniel Evans)
Date: Tue, 2 Jul 2024 17:15:42 +0100
Subject: [gdal-dev] Issues specifying PostGIS connection details -
 possibly related to special characters in passwords?
In-Reply-To: <etPan.6684273b.1ca2d0b7.1ff@rtwilson.com>
References: <etPan.66841a38.23ced03a.1ff@rtwilson.com>
 <CANnaQaYVQpLKrB5rs4dvuLx+_ftnUMGamgm1TpB9xPFO0JGvDg@mail.gmail.com>
 <etPan.6684273b.1ca2d0b7.1ff@rtwilson.com>
Message-ID: <CANnaQaa4-Nhg-pp6CM8ths1+iCWTPVpT1MBXvh_4tT=OqHY3Qg@mail.gmail.com>

I think the trick there is that single quotes make most shells consider a
string verbatim - I'd forgotten that part! That's probably the more
desirable solution, actually.

Cheers,
Daniel

On Tue, 2 Jul 2024, 17:13 Robin Wilson, <robin at rtwilson.com> wrote:

> Hi,
>
> Hmm, I?m sure I tried escaping it before - but putting a \ in front of it
> fixed it - obviously I didn?t try properly before. Possibly I only tried
> quoting it in various ways. Thanks for the solution!
>
> Now the thing I?m intrigued about is why it was working with the
> postgresql:// connection string but not the PG connection string?
>
> Best regards,
>
> Robin
>
> On 2 July 2024 at 17:08:18, Daniel Evans (daniel.fred.evans at gmail.com)
> wrote:
>
> Hi Robin,
>
> Is this a shell issue, rather than a GDAL one? The dollar sign makes me
> suspect that a Unix shell is interpreting "robin$42" as "the string 'robin'
> and the value of variable $42" before it gets into GDAL. My terminal would
> interpret it as the following:
> $ echo robin$42
> robin
>
> and I'd need to escape the dollar symbol to get the text verbatim:
> $ echo robin\$42
> robin$42
>
> Cheers,
> Daniel
>
> On Tue, 2 Jul 2024 at 16:35, Robin Wilson via gdal-dev <
> gdal-dev at lists.osgeo.org> wrote:
>
>> Hi,
>>
>> I?m using ogr2ogr to load a GeoPackage file into a PostGIS database. I
>> initially tried using a command like this:
>>
>> ogr2ogr --debug ON -f PostgreSQL PG:"host=<IP> user=<user>
>> password=robin$42 dbname=data sslmode=require" file.gpkg -nln table_name
>>
>> However, this doesn?t work, and I always get an error:
>>
>> FATAL:  password authentication failed for user ?<user>"
>>
>> If I restructure the command to use the alternative postgresql://
>> connection string like this, then it works:
>>
>> ogr2ogr --debug ON -f PostgreSQL 'postgresql://<user>:robin$42@<IP>/data?sslmode=require?
>> file.gpkg -nln table_name
>>
>> I don?t remember running into this problem before when connecting to
>> PostGIS databases using the PG: connection string, so I?m wondering whether
>> my shell is doing something strange with my password? Obviously I don?t
>> want to share my actual password, but it has a $ in it, and I wonder
>> whether somehow this is causing problems - but only when using the PG:
>> connection string.
>>
>> Any suggestions welcome,
>>
>> Best regards,
>>
>> Robin
>>
>>
>> Dr Robin Wilson
>> www.rtwilson.com
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240702/a033d506/attachment.htm>

From mwtoews at gmail.com  Tue Jul  2 15:12:09 2024
From: mwtoews at gmail.com (Mike Taves)
Date: Wed, 3 Jul 2024 10:12:09 +1200
Subject: [gdal-dev] Issues specifying PostGIS connection details -
 possibly related to special characters in passwords?
In-Reply-To: <etPan.66841a38.23ced03a.1ff@rtwilson.com>
References: <etPan.66841a38.23ced03a.1ff@rtwilson.com>
Message-ID: <CAM2FmMoMNwJ2GPVp+QKV0zk_+memCK7-LS1UGExn6KzkkSSs+g@mail.gmail.com>

On Wed, 3 Jul 2024 at 03:36, Robin Wilson via gdal-dev
<gdal-dev at lists.osgeo.org> wrote:
> Any suggestions welcome,

If you routinely access a specific database, a reliable method is to
create a .pgpass file:
https://www.postgresql.org/docs/current/libpq-pgpass.html

This way you never need to provide a password.

From andreaerdna at libero.it  Tue Jul  2 22:25:16 2024
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Wed, 3 Jul 2024 07:25:16 +0200
Subject: [gdal-dev] ogrinfo behaviour with -al and -json options
Message-ID: <1c01ce67-b741-490d-94f6-b71eeb256fd3@libero.it>

Hi all,
IIUC, the documentation states that with the -al option, ogrinfo should 
output the info of all layers in a container (e.g. a GPKG file). Anyway, 
when a layer name is provided in the command line string alongside the 
-al option, than it looks like the -al option is overridden and not 
taken in consideration.

Is this the expected behaviour?

The same behaviour occurs with the -json option, where the documentation 
states than in such case the -al option is also implicit.

If those are the correct and expected behaviour, maybe it would be 
useful to clarify it in the documentation.

Regards.

Andrea

From even.rouault at spatialys.com  Wed Jul  3 15:02:51 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 4 Jul 2024 00:02:51 +0200
Subject: [gdal-dev] ogrinfo behaviour with -al and -json options
In-Reply-To: <1c01ce67-b741-490d-94f6-b71eeb256fd3@libero.it>
References: <1c01ce67-b741-490d-94f6-b71eeb256fd3@libero.it>
Message-ID: <827465f1-6a07-491d-bef6-c44842832b97@spatialys.com>

Hi,

Le 03/07/2024 ? 07:25, Andrea Giudiceandrea via gdal-dev a ?crit?:
> Hi all,
> IIUC, the documentation states that with the -al option, ogrinfo 
> should output the info of all layers in a container (e.g. a GPKG 
> file). Anyway, when a layer name is provided in the command line 
> string alongside the -al option, than it looks like the -al option is 
> overridden and not taken in consideration.
>
> Is this the expected behaviour?
Problably more in unspecified territory than really intended/designed. 
-al and giving a layer name should probably be mutually exclusive. Not 
clear if at that point of history it would be worth changing that to 
error out and breaking existing user workflows...
>
> The same behaviour occurs with the -json option, where the 
> documentation states than in such case the -al option is also implicit.

-json is a bit specific in the way that you mostly use to feed other 
code and so you don't necessarily need to have as many different level 
of details as for for the text / human friendly output.

>
> If those are the correct and expected behaviour, maybe it would be 
> useful to clarify it in the documentation.

It would probably wouldn't hurt mentioning in the documentation that if 
both -al and layer name(s) are specified, the later will override the 
former (but that users shouldn't rely on that, in case we change our 
mind at some later point)

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From eric at knudstrup.org  Wed Jul  3 23:01:30 2024
From: eric at knudstrup.org (Eric Knudstrup)
Date: Wed, 3 Jul 2024 23:01:30 -0700
Subject: [gdal-dev] Building GDAL on Ubuntu 22.04
Message-ID: <e0930239-3b5c-46a0-9a42-43ed0ad575f2@knudstrup.org>

I'm using WEBP, so the 3.4.1 release of GDAL that Ubuntu has won't work 
for me.

Is there a workaround for this?

cmake ..
-- The CXX compiler identification is Clang 13.0.0
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - failed
-- Check for working CXX compiler: /usr/bin/clang++
-- Check for working CXX compiler: /usr/bin/clang++ - broken
CMake Error at 
/snap/cmake/1403/share/cmake-3.30/Modules/CMakeTestCXXCompiler.cmake:73 
(message):
 ? The C++ compiler

 ??? "/usr/bin/clang++"

 ? is not able to compile a simple test program.

 ? It fails with the following output:

 ??? Change Dir: 
'/home/me/gdal-3.9.1/build/CMakeFiles/CMakeScratch/TryCompile-hpEoYa'

 ??? Run Build Command(s): /snap/cmake/1403/bin/cmake -E env VERBOSE=1 
/usr/bin/gmake -f Makefile cmTC_8efcd/fast
 ??? /usr/bin/gmake? -f CMakeFiles/cmTC_8efcd.dir/build.make 
CMakeFiles/cmTC_8efcd.dir/build
 ??? gmake[1]: Entering directory 
'/home/me/gdal-3.9.1/build/CMakeFiles/CMakeScratch/TryCompile-hpEoYa'
 ??? Building CXX object CMakeFiles/cmTC_8efcd.dir/testCXXCompiler.cxx.o
 ??? /usr/bin/clang++??? -MD -MT 
CMakeFiles/cmTC_8efcd.dir/testCXXCompiler.cxx.o -MF 
CMakeFiles/cmTC_8efcd.dir/testCXXCompiler.cxx.o.d -o 
CMakeFiles/cmTC_8efcd.dir/testCXXCompiler.cxx.o -c 
/home/me/gdal-3.9.1/build/CMakeFiles/CMakeScratch/TryCompile-hpEoYa/testCXXCompiler.cxx
 ??? Linking CXX executable cmTC_8efcd
 ??? /snap/cmake/1403/bin/cmake -E cmake_link_script 
CMakeFiles/cmTC_8efcd.dir/link.txt --verbose=1
 ??? /usr/bin/clang++ CMakeFiles/cmTC_8efcd.dir/testCXXCompiler.cxx.o -o 
cmTC_8efcd
 ??? /usr/bin/ld: cannot find -lstdc++: No such file or directory
 ??? clang-13: error: linker command failed with exit code 1 (use -v to 
see invocation)
 ??? gmake[1]: *** [CMakeFiles/cmTC_8efcd.dir/build.make:100: 
cmTC_8efcd] Error 1
 ??? gmake[1]: Leaving directory 
'/home/me/gdal-3.9.1/build/CMakeFiles/CMakeScratch/TryCompile-hpEoYa'
 ??? gmake: *** [Makefile:127: cmTC_8efcd/fast] Error 2





 ? CMake will not be able to correctly generate this project.
Call Stack (most recent call first):
 ? CMakeLists.txt:4 (project)


From silyko at gmail.com  Fri Jul  5 00:16:34 2024
From: silyko at gmail.com (Simon Lyngby Kokkendorff)
Date: Fri, 5 Jul 2024 09:16:34 +0200
Subject: [gdal-dev] Mosaic of multidimensional datasets of varying resolution
Message-ID: <CANzGYpR6heYuOdrWwnTyXhE3BK_zgubwTDNSkCgZQbVr2pYB-w@mail.gmail.com>

Dear list,

  I have a question about mosaicing multidimensional datasets (netCDF,
Zarr etc). These are typically 2 or 3D grids with a time dimension
from weather or ocean models (3 or 4D in total).
  Using a multidimensional VRT:
https://gdal.org/drivers/raster/vrt_multidimensional.html
it is possible to mosaic several arrays with shared dimensions along
the time or spatial dimensions without resampling.
   I have a use case where I want to mosaic several datasets with
varying spatial resolution, and possibly different dimension names and
reference systems, both along the time dimension and the spatial
dimensions (onto a common spatial 'grid'). The goal is to combine
global models with local models of higher resolution and get a common
combined multidimensional array (2 or 3D + time).
   This is more like a mixture of a classic 2D VRT:
https://gdal.org/drivers/raster/vrt.html and the multidimensional VRT.
I see that there is some new functionality for combining 2D parts of
multidimensional datasets, with reprojection / resampling, in a
"classic" VRT:
https://gdal.org/drivers/raster/vrt.html#arraysource
   But this does not seem to exactly cover my use case. I would like
to be able to do the 2D (or even 3D) mosaicing for the spatial part
with reprojection / resampling to a common grid while also combining,
and keeping, the time dimension. Bottom line, I guess, is that I would
like to be able to use the functionality of <DerivedArray> on a
2D-part inside the <Source> element of <Array> in a multidimensional
VRT (https://gdal.org/drivers/raster/vrt_multidimensional.html#vrt-multidimensional).
  Am I right in assuming that this is not possible "out of the box"
with the current options provided by VRTDataset, so that I would need
to write some code to cover the use case myself?

Best regards,
Simon Kokkendorff
Joint GEOMETOC Support Centre

From even.rouault at spatialys.com  Sat Jul  6 00:59:24 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 6 Jul 2024 09:59:24 +0200
Subject: [gdal-dev] Building GDAL on Ubuntu 22.04
In-Reply-To: <e0930239-3b5c-46a0-9a42-43ed0ad575f2@knudstrup.org>
References: <e0930239-3b5c-46a0-9a42-43ed0ad575f2@knudstrup.org>
Message-ID: <ed1ca76c-249e-41a4-bc91-8912db6efa5a@spatialys.com>

Hi,

when using CLang, GDAL forces the use of libstdc++ for linking, so 
seeing "cannot find -lstdc++", I suspect you might lack the installation 
of libstdc++-11-dev package

Even

Le 04/07/2024 ? 08:01, Eric Knudstrup via gdal-dev a ?crit?:
> I'm using WEBP, so the 3.4.1 release of GDAL that Ubuntu has won't 
> work for me.
>
> Is there a workaround for this?
>
> cmake ..
> -- The CXX compiler identification is Clang 13.0.0
> -- Detecting CXX compiler ABI info
> -- Detecting CXX compiler ABI info - failed
> -- Check for working CXX compiler: /usr/bin/clang++
> -- Check for working CXX compiler: /usr/bin/clang++ - broken
> CMake Error at 
> /snap/cmake/1403/share/cmake-3.30/Modules/CMakeTestCXXCompiler.cmake:73 
> (message):
> ? The C++ compiler
>
> ??? "/usr/bin/clang++"
>
> ? is not able to compile a simple test program.
>
> ? It fails with the following output:
>
> ??? Change Dir: 
> '/home/me/gdal-3.9.1/build/CMakeFiles/CMakeScratch/TryCompile-hpEoYa'
>
> ??? Run Build Command(s): /snap/cmake/1403/bin/cmake -E env VERBOSE=1 
> /usr/bin/gmake -f Makefile cmTC_8efcd/fast
> ??? /usr/bin/gmake? -f CMakeFiles/cmTC_8efcd.dir/build.make 
> CMakeFiles/cmTC_8efcd.dir/build
> ??? gmake[1]: Entering directory 
> '/home/me/gdal-3.9.1/build/CMakeFiles/CMakeScratch/TryCompile-hpEoYa'
> ??? Building CXX object CMakeFiles/cmTC_8efcd.dir/testCXXCompiler.cxx.o
> ??? /usr/bin/clang++??? -MD -MT 
> CMakeFiles/cmTC_8efcd.dir/testCXXCompiler.cxx.o -MF 
> CMakeFiles/cmTC_8efcd.dir/testCXXCompiler.cxx.o.d -o 
> CMakeFiles/cmTC_8efcd.dir/testCXXCompiler.cxx.o -c 
> /home/me/gdal-3.9.1/build/CMakeFiles/CMakeScratch/TryCompile-hpEoYa/testCXXCompiler.cxx
> ??? Linking CXX executable cmTC_8efcd
> ??? /snap/cmake/1403/bin/cmake -E cmake_link_script 
> CMakeFiles/cmTC_8efcd.dir/link.txt --verbose=1
> ??? /usr/bin/clang++ CMakeFiles/cmTC_8efcd.dir/testCXXCompiler.cxx.o 
> -o cmTC_8efcd
> ??? /usr/bin/ld: cannot find -lstdc++: No such file or directory
> ??? clang-13: error: linker command failed with exit code 1 (use -v to 
> see invocation)
> ??? gmake[1]: *** [CMakeFiles/cmTC_8efcd.dir/build.make:100: 
> cmTC_8efcd] Error 1
> ??? gmake[1]: Leaving directory 
> '/home/me/gdal-3.9.1/build/CMakeFiles/CMakeScratch/TryCompile-hpEoYa'
> ??? gmake: *** [Makefile:127: cmTC_8efcd/fast] Error 2
>
>
>
>
>
> ? CMake will not be able to correctly generate this project.
> Call Stack (most recent call first):
> ? CMakeLists.txt:4 (project)
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Sat Jul  6 01:17:55 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 6 Jul 2024 10:17:55 +0200
Subject: [gdal-dev] Mosaic of multidimensional datasets of varying
 resolution
In-Reply-To: <CANzGYpR6heYuOdrWwnTyXhE3BK_zgubwTDNSkCgZQbVr2pYB-w@mail.gmail.com>
References: <CANzGYpR6heYuOdrWwnTyXhE3BK_zgubwTDNSkCgZQbVr2pYB-w@mail.gmail.com>
Message-ID: <e7b7cd15-b81f-4e85-b057-c7626469ff8f@spatialys.com>

Hi,
> Dear list,
>
>    I have a question about mosaicing multidimensional datasets (netCDF,
> Zarr etc). These are typically 2 or 3D grids with a time dimension
> from weather or ocean models (3 or 4D in total).
>    Using a multidimensional VRT:
> https://gdal.org/drivers/raster/vrt_multidimensional.html
> it is possible to mosaic several arrays with shared dimensions along
> the time or spatial dimensions without resampling.
>     I have a use case where I want to mosaic several datasets with
> varying spatial resolution, and possibly different dimension names and
> reference systems, both along the time dimension and the spatial
> dimensions (onto a common spatial 'grid'). The goal is to combine
> global models with local models of higher resolution and get a common
> combined multidimensional array (2 or 3D + time).
>     This is more like a mixture of a classic 2D VRT:
> https://gdal.org/drivers/raster/vrt.html and the multidimensional VRT.
> I see that there is some new functionality for combining 2D parts of
> multidimensional datasets, with reprojection / resampling, in a
> "classic" VRT:
> https://gdal.org/drivers/raster/vrt.html#arraysource
>     But this does not seem to exactly cover my use case. I would like
> to be able to do the 2D (or even 3D) mosaicing for the spatial part
> with reprojection / resampling to a common grid while also combining,
> and keeping, the time dimension. Bottom line, I guess, is that I would
> like to be able to use the functionality of <DerivedArray> on a
> 2D-part inside the <Source> element of <Array> in a multidimensional
> VRT (https://gdal.org/drivers/raster/vrt_multidimensional.html#vrt-multidimensional).
>    Am I right in assuming that this is not possible "out of the box"
> with the current options provided by VRTDataset, so that I would need
> to write some code to cover the use case myself?

yes, you are right. What you want to do isn't currently possible out of 
the box. Just porting the DerivedArray in a multidimensional VRT would 
not be enough as GDALMDArray::GetResampled() only supports resampling to 
a common grid on the 2D space. Resampling along the time dimension would 
require extra development.

Even

>
> Best regards,
> Simon Kokkendorff
> Joint GEOMETOC Support Centre
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From dg0yt at darc.de  Sat Jul  6 03:02:36 2024
From: dg0yt at darc.de (Kai Pastor, DG0YT)
Date: Sat, 6 Jul 2024 12:02:36 +0200
Subject: [gdal-dev] Building GDAL on Ubuntu 22.04
In-Reply-To: <ed1ca76c-249e-41a4-bc91-8912db6efa5a@spatialys.com>
References: <e0930239-3b5c-46a0-9a42-43ed0ad575f2@knudstrup.org>
 <ed1ca76c-249e-41a4-bc91-8912db6efa5a@spatialys.com>
Message-ID: <711b0866-e6f1-4b49-9a91-787fc120bd01@darc.de>

Why does it have to force anything at all? CMake normally knows how to 
setup CMAKE_CXX_IMPLICIT_LINK_LIBRARIES.

(Right now fixing hard-coded libstdc++ assumptions in ffmpeg and 
dependencies in vcpkg, breaking Android.)

Kai

Am 06.07.24 um 09:59 schrieb Even Rouault via gdal-dev:
> Hi,
>
> when using CLang, GDAL forces the use of libstdc++ for linking, so 
> seeing "cannot find -lstdc++", I suspect you might lack the 
> installation of libstdc++-11-dev package
>
> Even
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240706/ae207618/attachment.htm>

From even.rouault at spatialys.com  Sat Jul  6 03:39:12 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 6 Jul 2024 12:39:12 +0200
Subject: [gdal-dev] Building GDAL on Ubuntu 22.04
In-Reply-To: <711b0866-e6f1-4b49-9a91-787fc120bd01@darc.de>
References: <e0930239-3b5c-46a0-9a42-43ed0ad575f2@knudstrup.org>
 <ed1ca76c-249e-41a4-bc91-8912db6efa5a@spatialys.com>
 <711b0866-e6f1-4b49-9a91-787fc120bd01@darc.de>
Message-ID: <7cddc00b-b5fd-4348-8e49-f04f1b63c01b@spatialys.com>

I definitely ran into build issues in that past related to missing 
libstdc++ (perhaps related to using older CMake and/or clang?). But 
looking closer, we only add -lstdc++ when building a test program fails 
without this explicit addition. Cf 
https://github.com/OSGeo/gdal/blob/master/cmake/helpers/GdalCompilationFlags.cmake#L165 
to L183

Le 06/07/2024 ? 12:02, Kai Pastor, DG0YT via gdal-dev a ?crit?:
> Why does it have to force anything at all? CMake normally knows how to 
> setup CMAKE_CXX_IMPLICIT_LINK_LIBRARIES.
>
> (Right now fixing hard-coded libstdc++ assumptions in ffmpeg and 
> dependencies in vcpkg, breaking Android.)
>
> Kai
>
> Am 06.07.24 um 09:59 schrieb Even Rouault via gdal-dev:
>> Hi,
>>
>> when using CLang, GDAL forces the use of libstdc++ for linking, so 
>> seeing "cannot find -lstdc++", I suspect you might lack the 
>> installation of libstdc++-11-dev package
>>
>> Even
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From dg0yt at darc.de  Sat Jul  6 03:58:49 2024
From: dg0yt at darc.de (Kai Pastor, DG0YT)
Date: Sat, 6 Jul 2024 12:58:49 +0200
Subject: [gdal-dev] Building GDAL on Ubuntu 22.04
In-Reply-To: <7cddc00b-b5fd-4348-8e49-f04f1b63c01b@spatialys.com>
References: <e0930239-3b5c-46a0-9a42-43ed0ad575f2@knudstrup.org>
 <ed1ca76c-249e-41a4-bc91-8912db6efa5a@spatialys.com>
 <711b0866-e6f1-4b49-9a91-787fc120bd01@darc.de>
 <7cddc00b-b5fd-4348-8e49-f04f1b63c01b@spatialys.com>
Message-ID: <7490a953-aeef-4890-b1f5-4774714f8148@darc.de>

The original post/current issue really points at a missing libstdc++ dev 
package.

For the past build issues, it is almost never exactly "missing 
libstdc++" but actually needing the C++ linker. Recognizing C++ linkage 
is a problem when you cannot rely on CMake config files for static 
library linkage. The library which needs C++ linkage can be behind a 
library with C interface, and subject to configuration.
Example: lerc behind tiff.

(In vpckg ports, I add the difference of 
CMAKE_CXX_IMPLICIT_LINK_LIBRARIES and CMAKE_C_IMPLICIT_LINK_LIBRARIES to 
the pkg-config file when I need to pass on C++ linkage. Resolving it at 
the root. But I know a lot of ugly hacks downstream...)

Am 06.07.24 um 12:39 schrieb Even Rouault:
> I definitely ran into build issues in that past related to missing 
> libstdc++ (perhaps related to using older CMake and/or clang?). But 
> looking closer, we only add -lstdc++ when building a test program 
> fails without this explicit addition. Cf 
> https://github.com/OSGeo/gdal/blob/master/cmake/helpers/GdalCompilationFlags.cmake#L165 
> to L183
>
> Le 06/07/2024 ? 12:02, Kai Pastor, DG0YT via gdal-dev a ?crit?:
>> Why does it have to force anything at all? CMake normally knows how 
>> to setup CMAKE_CXX_IMPLICIT_LINK_LIBRARIES.
>>
>> (Right now fixing hard-coded libstdc++ assumptions in ffmpeg and 
>> dependencies in vcpkg, breaking Android.)
>>
>> Kai
>>
>> Am 06.07.24 um 09:59 schrieb Even Rouault via gdal-dev:
>>> Hi,
>>>
>>> when using CLang, GDAL forces the use of libstdc++ for linking, so 
>>> seeing "cannot find -lstdc++", I suspect you might lack the 
>>> installation of libstdc++-11-dev package
>>>
>>> Even
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240706/017d69dd/attachment.htm>

From stephenwoodbridge37 at gmail.com  Sun Jul  7 19:14:46 2024
From: stephenwoodbridge37 at gmail.com (Stephen Woodbridge)
Date: Sun, 7 Jul 2024 22:14:46 -0400
Subject: [gdal-dev] Moving from GDAL 2.2.3 to GDAL 3.4.1
Message-ID: <8C1474AD-5CB9-46A1-B0AA-CDAE1C16D316@gmail.com>

Hi all,

I?m migrating some apps from Ubuntu 18.04 to Ubuntu 22.04 which means from GDAL 2.2.3 to GDAL 3.4.1. 

I having problems rendering so tiff files that go through a couple of VRT files before getting rendered via mapserver. 

Sorry there are a lot of moving pieces and I?m trying to narrow down where I should be looking for a problem. I wondering if there were changes in the VRT file system. I can display other files with a problem. 

I have a directory of a days worth of SST tiff files. The first VRT collects all these into a single file. The second VRT then applies a color table to the first VRT. 

I can post an example if that would help. The works on 18.04 but not 22.04. 

Thoughts?

Steve W

Sent from my iPhone

From jesse.r.meyer at nasa.gov  Mon Jul  8 11:57:18 2024
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Mon, 8 Jul 2024 18:57:18 +0000
Subject: [gdal-dev] GetPoint API listing
Message-ID: <MN2PR09MB5932746D3C6BF47498153020C9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>

Hi,

When looking up documentation for OGR vector operations like AddPoint, they pop right up in the vector_c_api.html, but after digging for about 10 minutes, and through the API tutorial section, I could find no reference to the equivalent function for C++.

Where might I find them?

Best,
Jesse
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240708/daf97009/attachment.htm>

From lnicola at dend.ro  Mon Jul  8 12:01:56 2024
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Mon, 08 Jul 2024 22:01:56 +0300
Subject: [gdal-dev] GetPoint API listing
In-Reply-To: <MN2PR09MB5932746D3C6BF47498153020C9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>
References: <MN2PR09MB5932746D3C6BF47498153020C9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>
Message-ID: <6f42062f-96af-4d12-83f6-1d9712759289@betaapp.fastmail.com>

Hi,

You can find methods like addPoint and getPoint in the derived geometry classes like https://gdal.org/doxygen/classOGRLineString.html#a49c349d567436a1101017b1e71771ba3.

Laurentiu

On Mon, Jul 8, 2024, at 21:57, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev wrote:
> Hi,
>  
> When looking up documentation for OGR vector operations like AddPoint, they pop right up in the vector_c_api.html, but after digging for about 10 minutes, and through the API tutorial section, I could find no reference to the equivalent function for C++.
>  
> Where might I find them?
>  
> Best,
> Jesse
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240708/193b3e20/attachment.htm>

From jesse.r.meyer at nasa.gov  Mon Jul  8 12:15:06 2024
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Mon, 8 Jul 2024 19:15:06 +0000
Subject: [gdal-dev] [EXTERNAL] [BULK] Re:  GetPoint API listing
In-Reply-To: <6f42062f-96af-4d12-83f6-1d9712759289@betaapp.fastmail.com>
References: <MN2PR09MB5932746D3C6BF47498153020C9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>
 <6f42062f-96af-4d12-83f6-1d9712759289@betaapp.fastmail.com>
Message-ID: <MN2PR09MB593202850D4789383B000803C9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>

Thanks!

Are these methods discoverable at the docs listing ?C++ API? landing page under ?Vector API??
https://gdal.org/api/index.html

Best,
Jesse

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Lauren?iu Nicola via gdal-dev <gdal-dev at lists.osgeo.org>
Date: Monday, July 8, 2024 at 3:12?PM
To: gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: [EXTERNAL] [BULK] Re: [gdal-dev] GetPoint API listing
CAUTION: This email originated from outside of NASA.  Please take care when clicking links or opening attachments.  Use the "Report Message" button to report suspicious messages to the NASA SOC.


Hi,

You can find methods like addPoint and getPoint in the derived geometry classes like https://gdal.org/doxygen/classOGRLineString.html#a49c349d567436a1101017b1e71771ba3.

Laurentiu

On Mon, Jul 8, 2024, at 21:57, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev wrote:

Hi,



When looking up documentation for OGR vector operations like AddPoint, they pop right up in the vector_c_api.html, but after digging for about 10 minutes, and through the API tutorial section, I could find no reference to the equivalent function for C++.



Where might I find them?



Best,

Jesse
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240708/d086e36b/attachment.htm>

From lnicola at dend.ro  Mon Jul  8 12:29:19 2024
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Mon, 08 Jul 2024 22:29:19 +0300
Subject: [gdal-dev] [EXTERNAL] [BULK] Re:  GetPoint API listing
In-Reply-To: <MN2PR09MB593202850D4789383B000803C9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>
References: <MN2PR09MB5932746D3C6BF47498153020C9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>
 <6f42062f-96af-4d12-83f6-1d9712759289@betaapp.fastmail.com>
 <MN2PR09MB593202850D4789383B000803C9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>
Message-ID: <8dcc481a-6ebc-4f52-abd8-af3777b0bfcf@app.fastmail.com>

Sure, click on OGRGeometry, then on a derived class (but those only seem to show up on desktop).

Laurentiu

On Mon, Jul 8, 2024, at 22:15, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] wrote:
> Thanks!
>  
> Are these methods discoverable at the docs listing ?C++ API? landing page under ?Vector API??
> https://gdal.org/api/index.html
>  
> Best,
> Jesse
>  
> *From: *gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Lauren?iu Nicola via gdal-dev <gdal-dev at lists.osgeo.org>
> *Date: *Monday, July 8, 2024 at 3:12?PM
> *To: *gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
> *Subject: *[EXTERNAL] [BULK] Re: [gdal-dev] GetPoint API listing
> *CAUTION:* This email originated from outside of NASA.  Please take care when clicking links or opening attachments.  Use the "Report Message" button to report suspicious messages to the NASA SOC.
> 
> 
> Hi,
>  
> You can find methods like addPoint and getPoint in the derived geometry classes like https://gdal.org/doxygen/classOGRLineString.html#a49c349d567436a1101017b1e71771ba3.
>  
> Laurentiu
>  
> On Mon, Jul 8, 2024, at 21:57, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev wrote:
>> Hi,
>> 
>>  
>> 
>> When looking up documentation for OGR vector operations like AddPoint, they pop right up in the vector_c_api.html, but after digging for about 10 minutes, and through the API tutorial section, I could find no reference to the equivalent function for C++.
>> 
>>  
>> 
>> Where might I find them?
>> 
>>  
>> 
>> Best,
>> 
>> Jesse
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>  
>  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240708/02f34d0c/attachment-0001.htm>

From jesse.r.meyer at nasa.gov  Mon Jul  8 12:59:14 2024
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Mon, 8 Jul 2024 19:59:14 +0000
Subject: [gdal-dev] [EXTERNAL] [BULK] Re:  GetPoint API listing
In-Reply-To: <8dcc481a-6ebc-4f52-abd8-af3777b0bfcf@app.fastmail.com>
References: <MN2PR09MB5932746D3C6BF47498153020C9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>
 <6f42062f-96af-4d12-83f6-1d9712759289@betaapp.fastmail.com>
 <MN2PR09MB593202850D4789383B000803C9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>
 <8dcc481a-6ebc-4f52-abd8-af3777b0bfcf@app.fastmail.com>
Message-ID: <MN2PR09MB59326B414E4A2DC0E58AEA1AC9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>

I am on desktop.  Using OGRLineString as an example, I see no relationship in the docs that connect it to addPoint or vise versa.

https://gdal.org/api/ogrgeometry_cpp.html#classOGRLineString

After faffing about a bit, no hyperlinks appear to go beyond the *cpp_html document.  So I?m not quite sure how to interpret your directions.

From: Lauren?iu Nicola <lnicola at dend.ro>
Date: Monday, July 8, 2024 at 3:29?PM
To: Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] <jesse.r.meyer at nasa.gov>, gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [EXTERNAL] [BULK] Re: [gdal-dev] GetPoint API listing
CAUTION: This email originated from outside of NASA.  Please take care when clicking links or opening attachments.  Use the "Report Message" button to report suspicious messages to the NASA SOC.


Sure, click on OGRGeometry, then on a derived class (but those only seem to show up on desktop).

Laurentiu

On Mon, Jul 8, 2024, at 22:15, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] wrote:

Thanks!



Are these methods discoverable at the docs listing ?C++ API? landing page under ?Vector API??

https://gdal.org/api/index.html



Best,

Jesse



From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Lauren?iu Nicola via gdal-dev <gdal-dev at lists.osgeo.org>
Date: Monday, July 8, 2024 at 3:12?PM
To: gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: [EXTERNAL] [BULK] Re: [gdal-dev] GetPoint API listing

CAUTION: This email originated from outside of NASA.  Please take care when clicking links or opening attachments.  Use the "Report Message" button to report suspicious messages to the NASA SOC.


Hi,



You can find methods like addPoint and getPoint in the derived geometry classes like https://gdal.org/doxygen/classOGRLineString.html#a49c349d567436a1101017b1e71771ba3.



Laurentiu



On Mon, Jul 8, 2024, at 21:57, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev wrote:

Hi,



When looking up documentation for OGR vector operations like AddPoint, they pop right up in the vector_c_api.html, but after digging for about 10 minutes, and through the API tutorial section, I could find no reference to the equivalent function for C++.



Where might I find them?



Best,

Jesse

_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240708/1a0fe21f/attachment.htm>

From even.rouault at spatialys.com  Mon Jul  8 13:17:11 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 8 Jul 2024 22:17:11 +0200
Subject: [gdal-dev] [EXTERNAL] [BULK] Re: GetPoint API listing
In-Reply-To: <MN2PR09MB59326B414E4A2DC0E58AEA1AC9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>
References: <MN2PR09MB5932746D3C6BF47498153020C9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>
 <6f42062f-96af-4d12-83f6-1d9712759289@betaapp.fastmail.com>
 <MN2PR09MB593202850D4789383B000803C9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>
 <8dcc481a-6ebc-4f52-abd8-af3777b0bfcf@app.fastmail.com>
 <MN2PR09MB59326B414E4A2DC0E58AEA1AC9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>
Message-ID: <871feff9-c784-4d45-94b6-6d02a41f6283@spatialys.com>

The doc for the OGRSimpleCurve class, which is the parent class of 
OGRLineString, where addPoint / setPoint are defined, was missing in 
that page. Should appear online in ~ 1 hour or so.

The Doxygen output at https://gdal.org/doxygen/classOGRLineString.html 
might be easier to navigate.

Le 08/07/2024 ? 21:59, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND 
APPLICATIONS INC] via gdal-dev a ?crit?:
>
> I am on desktop.? Using OGRLineString as an example, I see no 
> relationship in the docs that connect it to addPoint or vise versa.
>
> https://gdal.org/api/ogrgeometry_cpp.html#classOGRLineString
>
> After faffing about a bit, no hyperlinks appear to go beyond the 
> *cpp_html document.? So I?m not quite sure how to interpret your 
> directions.
>
> *From: *Lauren?iu Nicola <lnicola at dend.ro>
> *Date: *Monday, July 8, 2024 at 3:29?PM
> *To: *Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS 
> INC] <jesse.r.meyer at nasa.gov>, gdal-dev at lists.osgeo.org 
> <gdal-dev at lists.osgeo.org>
> *Subject: *Re: [EXTERNAL] [BULK] Re: [gdal-dev] GetPoint API listing
>
> *CAUTION:*This email originated from outside of NASA.? Please take 
> care when clicking links or opening attachments.? Use the "Report 
> Message" button to report suspicious messages to the NASA?SOC.
>
>
>
> Sure, click on OGRGeometry, then on a derived class (but those only 
> seem to show up on desktop).
>
> Laurentiu
>
> On Mon, Jul 8, 2024, at 22:15, Meyer, Jesse R. (GSFC-618.0)[SCIENCE 
> SYSTEMS AND APPLICATIONS INC] wrote:
>
>     Thanks!
>
>     Are these methods discoverable at the docs listing ?C++ API?
>     landing page under ?Vector API??
>
>     https://gdal.org/api/index.html
>
>     Best,
>
>     Jesse
>
>     *From: *gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of
>     Lauren?iu Nicola via gdal-dev <gdal-dev at lists.osgeo.org>
>     *Date: *Monday, July 8, 2024 at 3:12?PM
>     *To: *gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
>     *Subject: *[EXTERNAL] [BULK] Re: [gdal-dev] GetPoint API listing
>
>     *CAUTION:*This email originated from outside of NASA.? Please take
>     care when clicking links or opening attachments.? Use the "Report
>     Message" button to report suspicious messages to the NASA?SOC.
>
>     Hi,
>
>     You can find methods like addPointand getPointin the derived
>     geometry classes like
>     https://gdal.org/doxygen/classOGRLineString.html#a49c349d567436a1101017b1e71771ba3.
>
>     Laurentiu
>
>     On Mon, Jul 8, 2024, at 21:57, Meyer, Jesse R.
>     (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev wrote:
>
>         Hi,
>
>         When looking up documentation for OGR vector operations like
>         AddPoint, they pop right up in the vector_c_api.html, but
>         after digging for about 10 minutes, and through the API
>         tutorial section, I could find no reference to the equivalent
>         function for C++.
>
>         Where might I find them?
>
>         Best,
>
>         Jesse
>
>         _______________________________________________
>
>         gdal-dev mailing list
>
>         gdal-dev at lists.osgeo.org
>
>         https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240708/6419b01d/attachment-0001.htm>

From jesse.r.meyer at nasa.gov  Mon Jul  8 13:45:34 2024
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Mon, 8 Jul 2024 20:45:34 +0000
Subject: [gdal-dev] [EXTERNAL] [BULK] Re: GetPoint API listing
In-Reply-To: <871feff9-c784-4d45-94b6-6d02a41f6283@spatialys.com>
References: <MN2PR09MB5932746D3C6BF47498153020C9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>
 <6f42062f-96af-4d12-83f6-1d9712759289@betaapp.fastmail.com>
 <MN2PR09MB593202850D4789383B000803C9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>
 <8dcc481a-6ebc-4f52-abd8-af3777b0bfcf@app.fastmail.com>
 <MN2PR09MB59326B414E4A2DC0E58AEA1AC9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>
 <871feff9-c784-4d45-94b6-6d02a41f6283@spatialys.com>
Message-ID: <MN2PR09MB5932B9406A176214C61AECBBC9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>

Thanks!

From: Even Rouault <even.rouault at spatialys.com>
Date: Monday, July 8, 2024 at 4:17?PM
To: Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] <jesse.r.meyer at nasa.gov>, Lauren?iu Nicola <lnicola at dend.ro>, gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] [EXTERNAL] [BULK] Re: GetPoint API listing
CAUTION: This email originated from outside of NASA.  Please take care when clicking links or opening attachments.  Use the "Report Message" button to report suspicious messages to the NASA SOC.



The doc for the OGRSimpleCurve class, which is the parent class of OGRLineString, where addPoint / setPoint are defined, was missing in that page. Should appear online in ~ 1 hour or so.

The Doxygen output at https://gdal.org/doxygen/classOGRLineString.html might be easier to navigate.
Le 08/07/2024 ? 21:59, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev a ?crit :
I am on desktop.  Using OGRLineString as an example, I see no relationship in the docs that connect it to addPoint or vise versa.

https://gdal.org/api/ogrgeometry_cpp.html#classOGRLineString

After faffing about a bit, no hyperlinks appear to go beyond the *cpp_html document.  So I?m not quite sure how to interpret your directions.

From: Lauren?iu Nicola <lnicola at dend.ro><mailto:lnicola at dend.ro>
Date: Monday, July 8, 2024 at 3:29?PM
To: Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] <jesse.r.meyer at nasa.gov><mailto:jesse.r.meyer at nasa.gov>, gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org> <gdal-dev at lists.osgeo.org><mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [EXTERNAL] [BULK] Re: [gdal-dev] GetPoint API listing
CAUTION: This email originated from outside of NASA.  Please take care when clicking links or opening attachments.  Use the "Report Message" button to report suspicious messages to the NASA SOC.

Sure, click on OGRGeometry, then on a derived class (but those only seem to show up on desktop).

Laurentiu

On Mon, Jul 8, 2024, at 22:15, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] wrote:

Thanks!



Are these methods discoverable at the docs listing ?C++ API? landing page under ?Vector API??

https://gdal.org/api/index.html



Best,

Jesse



From: gdal-dev <gdal-dev-bounces at lists.osgeo.org><mailto:gdal-dev-bounces at lists.osgeo.org> on behalf of Lauren?iu Nicola via gdal-dev <gdal-dev at lists.osgeo.org><mailto:gdal-dev at lists.osgeo.org>
Date: Monday, July 8, 2024 at 3:12?PM
To: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org> <gdal-dev at lists.osgeo.org><mailto:gdal-dev at lists.osgeo.org>
Subject: [EXTERNAL] [BULK] Re: [gdal-dev] GetPoint API listing

CAUTION: This email originated from outside of NASA.  Please take care when clicking links or opening attachments.  Use the "Report Message" button to report suspicious messages to the NASA SOC.


Hi,



You can find methods like addPoint and getPoint in the derived geometry classes like https://gdal.org/doxygen/classOGRLineString.html#a49c349d567436a1101017b1e71771ba3.



Laurentiu



On Mon, Jul 8, 2024, at 21:57, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev wrote:

Hi,



When looking up documentation for OGR vector operations like AddPoint, they pop right up in the vector_c_api.html, but after digging for about 10 minutes, and through the API tutorial section, I could find no reference to the equivalent function for C++.



Where might I find them?



Best,

Jesse

_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev







_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com<http://www.spatialys.com/>

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240708/c396fdce/attachment-0001.htm>

From mdsumner at gmail.com  Mon Jul  8 14:31:24 2024
From: mdsumner at gmail.com (Michael Sumner)
Date: Tue, 9 Jul 2024 07:31:24 +1000
Subject: [gdal-dev] can GDAL render two images as if over-plotted?
Message-ID: <CAAcGz998nrxScyH_xhXmL6rkmHaFQBQTTVRgCBx4Co9AqOY5Mg@mail.gmail.com>

Is it possible to "layer" one image over another, the first at full
transparency and the second with partial transparency?

I'm thinking of combining a hillshade and a (partially) transparent
color-relief image, a visual enhancement technique.   (I know how to do
this downstream in R and Python or similar, I'd like to stay in C++'s warm
embrace. )

I can go and find out what "over plot" means when it comes to colour
imagery, just wondering if there's anything in-built already.   This might
be a nice additional mode to gdaldem (and is what I thought "color-relief"
meant,  at first).

Cheers, Mike


-- 
Michael Sumner
Research Software Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240709/fc40e3b4/attachment.htm>

From mdsumner at gmail.com  Mon Jul  8 18:12:23 2024
From: mdsumner at gmail.com (Michael Sumner)
Date: Tue, 9 Jul 2024 11:12:23 +1000
Subject: [gdal-dev] can GDAL render two images as if over-plotted?
In-Reply-To: <CAAcGz998nrxScyH_xhXmL6rkmHaFQBQTTVRgCBx4Co9AqOY5Mg@mail.gmail.com>
References: <CAAcGz998nrxScyH_xhXmL6rkmHaFQBQTTVRgCBx4Co9AqOY5Mg@mail.gmail.com>
Message-ID: <CAAcGz996woYN6fDhwURSPVx7euQqHf0FXTmSjaRuzpdsrfnHOA@mail.gmail.com>

Just an update, I have found out how to do this numerically.    Will
consider a PR for gdaldem if I can make it work at some point.

Thanks, Mike



On Tue, Jul 9, 2024 at 7:31?AM Michael Sumner <mdsumner at gmail.com> wrote:

> Is it possible to "layer" one image over another, the first at full
> transparency and the second with partial transparency?
>
> I'm thinking of combining a hillshade and a (partially) transparent
> color-relief image, a visual enhancement technique.   (I know how to do
> this downstream in R and Python or similar, I'd like to stay in C++'s warm
> embrace. )
>
> I can go and find out what "over plot" means when it comes to colour
> imagery, just wondering if there's anything in-built already.   This might
> be a nice additional mode to gdaldem (and is what I thought "color-relief"
> meant,  at first).
>
> Cheers, Mike
>
>
> --
> Michael Sumner
> Research Software Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>


-- 
Michael Sumner
Research Software Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240709/21a51906/attachment.htm>

From lnicola at dend.ro  Mon Jul  8 21:37:19 2024
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Tue, 09 Jul 2024 07:37:19 +0300
Subject: [gdal-dev] [EXTERNAL] [BULK] Re:  GetPoint API listing
In-Reply-To: <MN2PR09MB59326B414E4A2DC0E58AEA1AC9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>
References: <MN2PR09MB5932746D3C6BF47498153020C9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>
 <6f42062f-96af-4d12-83f6-1d9712759289@betaapp.fastmail.com>
 <MN2PR09MB593202850D4789383B000803C9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>
 <8dcc481a-6ebc-4f52-abd8-af3777b0bfcf@app.fastmail.com>
 <MN2PR09MB59326B414E4A2DC0E58AEA1AC9DA2@MN2PR09MB5932.namprd09.prod.outlook.com>
Message-ID: <57c80f4f-005e-4ab6-a9fd-c96a9e2dbeab@betaapp.fastmail.com>

Yeah, sorry, I must have ended up looking at the Doxygen docs: https://gdal.org/doxygen/classOGRGeometry.html. There's a link to them on https://gdal.org/api/index.html, you can use those if you run into missing classes again.

Laurentiu

On Mon, Jul 8, 2024, at 22:59, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] wrote:
> I am on desktop.  Using OGRLineString as an example, I see no relationship in the docs that connect it to addPoint or vise versa.
>  
> https://gdal.org/api/ogrgeometry_cpp.html#classOGRLineString
>  
> After faffing about a bit, no hyperlinks appear to go beyond the *cpp_html document.  So I?m not quite sure how to interpret your directions.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240709/ee779ea1/attachment.htm>

From even.rouault at spatialys.com  Tue Jul  9 02:25:58 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 9 Jul 2024 11:25:58 +0200
Subject: [gdal-dev] can GDAL render two images as if over-plotted?
In-Reply-To: <CAAcGz996woYN6fDhwURSPVx7euQqHf0FXTmSjaRuzpdsrfnHOA@mail.gmail.com>
References: <CAAcGz998nrxScyH_xhXmL6rkmHaFQBQTTVRgCBx4Co9AqOY5Mg@mail.gmail.com>
 <CAAcGz996woYN6fDhwURSPVx7euQqHf0FXTmSjaRuzpdsrfnHOA@mail.gmail.com>
Message-ID: <da3cc4bb-f30d-4673-8c1d-251dd9fbc7d2@spatialys.com>

Michael,

I'm not totally sure if image composition really belongs to gdaldem. It 
feels it is more generic than that, although making nice looking DEM 
rendering is definitely a common use case. There's this long existing 
Python script at 
https://github.com/OSGeo/gdal/blob/master/swig/python/gdal-utils/osgeo_utils/samples/hsv_merge.py 
that combines the hillshade and color-relief together.

In the ecosystem at large, ImageMagick has also a lot of compositing 
operators: https://imagemagick.org/Usage/compose/

If we added a utility in GDAL, it would have to be decided if it allows 
different georeferencing/extent of images to be composed together. That 
would likely brings a bit of complexity, although using on-the-fly VRT 
underneath could help making images with the same size, resolution, extent.

There's also the question of if we would need this to be able to operate 
in a VRT-ish way (a new subset of VRT would then be needed), because 
that would have a strong impact on the design, compared to having a 
utility that materializes the output in a regular file format.

Even


Le 09/07/2024 ? 03:12, Michael Sumner via gdal-dev a ?crit?:
> Just an update, I have found out how to do this numerically.? ? Will 
> consider a PR for gdaldem if I can make it work at some point.
>
> Thanks, Mike
>
>
>
> On Tue, Jul 9, 2024 at 7:31?AM Michael Sumner <mdsumner at gmail.com> wrote:
>
>     Is it possible to "layer" one image over another, the first at
>     full transparency and the second with partial?transparency?
>
>     I'm thinking of combining a hillshade and a (partially)
>     transparent color-relief image,?a visual enhancement technique.?
>     ?(I know how to do this downstream in R and Python or similar, I'd
>     like to stay in C++'s warm embrace. )
>
>     I can go and find out what "over plot" means when it comes to
>     colour imagery, just wondering if there's anything in-built
>     already.? ?This might be a nice additional mode to gdaldem (and is
>     what I thought "color-relief" meant,? at first).
>
>     Cheers, Mike
>
>
>     -- 
>     Michael Sumner
>     Research Software Engineer
>     Australian Antarctic Division
>     Hobart, Australia
>     e-mail: mdsumner at gmail.com
>
>
>
> -- 
> Michael Sumner
> Research Software Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240709/29f1aafb/attachment.htm>

From stephenwoodbridge37 at gmail.com  Tue Jul  9 08:33:39 2024
From: stephenwoodbridge37 at gmail.com (Stephen Woodbridge)
Date: Tue, 9 Jul 2024 11:33:39 -0400
Subject: [gdal-dev] Moving from GDAL 2.2.3 to GDAL 3.4.1
In-Reply-To: <8C1474AD-5CB9-46A1-B0AA-CDAE1C16D316@gmail.com>
References: <8C1474AD-5CB9-46A1-B0AA-CDAE1C16D316@gmail.com>
Message-ID: <4AEDBEFC-C207-4F75-9148-9A85FA2AA7BC@gmail.com>

Please ignore this query. It turns out the new version of NASA OCSSW software is the issue. It has multiple values near -32768 that is no data. I cleaned up the file with gdal_calc and things seem to be working ok now. 

Thanks,
  -Steve W

Sent from my iPhone

> On Jul 7, 2024, at 10:14?PM, Stephen Woodbridge <stephenwoodbridge37 at gmail.com> wrote:
> 
> ?Hi all,
> 
> I?m migrating some apps from Ubuntu 18.04 to Ubuntu 22.04 which means from GDAL 2.2.3 to GDAL 3.4.1.
> 
> I having problems rendering so tiff files that go through a couple of VRT files before getting rendered via mapserver.
> 
> Sorry there are a lot of moving pieces and I?m trying to narrow down where I should be looking for a problem. I wondering if there were changes in the VRT file system. I can display other files with a problem.
> 
> I have a directory of a days worth of SST tiff files. The first VRT collects all these into a single file. The second VRT then applies a color table to the first VRT.
> 
> I can post an example if that would help. The works on 18.04 but not 22.04.
> 
> Thoughts?
> 
> Steve W
> 
> Sent from my iPhone

From michkowalczuk at gmail.com  Wed Jul 10 04:36:02 2024
From: michkowalczuk at gmail.com (=?UTF-8?Q?Micha=C5=82_Kowalczuk?=)
Date: Wed, 10 Jul 2024 13:36:02 +0200
Subject: [gdal-dev] WMTS cache
Message-ID: <CAP+FqQDsa9-_+O=dp3u+=XaMS+oZAV6rG8nyUy07haiAPbvKgA@mail.gmail.com>

Hi,
Is there another way to specify *gdalwmscache *folder beside using local
service description XML file? I use direct url
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240710/e18ec1af/attachment.htm>

From even.rouault at spatialys.com  Wed Jul 10 05:02:09 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 10 Jul 2024 14:02:09 +0200
Subject: [gdal-dev] WMTS cache
In-Reply-To: <CAP+FqQDsa9-_+O=dp3u+=XaMS+oZAV6rG8nyUy07haiAPbvKgA@mail.gmail.com>
References: <CAP+FqQDsa9-_+O=dp3u+=XaMS+oZAV6rG8nyUy07haiAPbvKgA@mail.gmail.com>
Message-ID: <943f974f-5f9f-49ad-b2a9-9918ec6ceb1b@spatialys.com>

yes, you can set the GDAL_DEFAULT_WMS_CACHE_PATH configuration option. 
It is already mentioned at https://gdal.org/drivers/raster/wmts.html, 
although not that much visible.

I've submitted https://github.com/OSGeo/gdal/pull/10398 to improve that.

In the meantime, you can refer to 
https://gdal.org/drivers/raster/wms.html#configuration-options since the 
WMS driver is unused underneath of the WMTS one.

Even

Le 10/07/2024 ? 13:36, Micha? Kowalczuk via gdal-dev a ?crit?:
> Hi,
> Is there another way to specify *gdalwmscache *folder beside using 
> local service description XML file? I use direct url
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240710/2bcabf80/attachment.htm>

From michkowalczuk at gmail.com  Wed Jul 10 06:23:51 2024
From: michkowalczuk at gmail.com (=?UTF-8?Q?Micha=C5=82_Kowalczuk?=)
Date: Wed, 10 Jul 2024 15:23:51 +0200
Subject: [gdal-dev] WMTS cache
In-Reply-To: <943f974f-5f9f-49ad-b2a9-9918ec6ceb1b@spatialys.com>
References: <CAP+FqQDsa9-_+O=dp3u+=XaMS+oZAV6rG8nyUy07haiAPbvKgA@mail.gmail.com>
 <943f974f-5f9f-49ad-b2a9-9918ec6ceb1b@spatialys.com>
Message-ID: <CAP+FqQDjQ7=+UyYxE12KBpAUB5+60pdvv7LpBJf8bJGqODLSiA@mail.gmail.com>

I didn?t check the WMS documentation page. There this option is more
visible.
Thank you for the solution ?

Regards
Micha?

W dniu ?r., 10.07.2024 o 14:02 Even Rouault <even.rouault at spatialys.com>
napisa?(a):

> yes, you can set the GDAL_DEFAULT_WMS_CACHE_PATH configuration option. It
> is already mentioned at https://gdal.org/drivers/raster/wmts.html,
> although not that much visible.
>
> I've submitted https://github.com/OSGeo/gdal/pull/10398 to improve that.
>
> In the meantime, you can refer to
> https://gdal.org/drivers/raster/wms.html#configuration-options since the
> WMS driver is unused underneath of the WMTS one.
>
> Even
> Le 10/07/2024 ? 13:36, Micha? Kowalczuk via gdal-dev a ?crit :
>
> Hi,
> Is there another way to specify *gdalwmscache *folder beside using local
> service description XML file? I use direct url
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240710/303a5a50/attachment.htm>

From eric at knudstrup.org  Fri Jul 12 01:12:47 2024
From: eric at knudstrup.org (Eric Knudstrup)
Date: Fri, 12 Jul 2024 01:12:47 -0700
Subject: [gdal-dev] Building GDAL on Ubuntu 22.04
In-Reply-To: <ed1ca76c-249e-41a4-bc91-8912db6efa5a@spatialys.com>
References: <e0930239-3b5c-46a0-9a42-43ed0ad575f2@knudstrup.org>
 <ed1ca76c-249e-41a4-bc91-8912db6efa5a@spatialys.com>
Message-ID: <a91d6eac-951f-4306-a032-92ee9ff6edad@knudstrup.org>


On 7/6/24 12:59 AM, Even Rouault wrote:
> Hi,
>
> when using CLang, GDAL forces the use of libstdc++ for linking, so 
> seeing "cannot find -lstdc++", I suspect you might lack the 
> installation of libstdc++-11-dev package
>
When I tried to install that package I got:
~# apt-get install libstdc++-11-dev
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 ?libstdc++-11-dev : Depends: gcc-11-base (= 11.4.0-1ubuntu1~22.04) but 
11.4.0-2ubuntu1~18.04 is to be installed
 ??????????????????? Depends: libgcc-11-dev (= 11.4.0-1ubuntu1~22.04) 
but it is not going to be installed
E: Unable to correct problems, you have held broken packages.


I have upgraded this system twice, so there were several old packages.? 
After I removed gcc-11-base and retried that command it worked, 
reinstalling the gcc packages.? It made it through the configuration and 
is now chewing through the build.

Thanks!

Eric


From schut at satelligence.com  Fri Jul 12 07:00:46 2024
From: schut at satelligence.com (Vincent Schut)
Date: Fri, 12 Jul 2024 16:00:46 +0200
Subject: [gdal-dev] gdal docker with numpy2-compatible python bindings
Message-ID: <a1e66443-d941-4c42-aea9-479006c2e00f@satelligence.com>

Hi, the current gdal-ubuntu-small docker (3.9.1) appears to have python 
bindings that are not compatible with numpy 2.0.0. If I pip install 
--upgrade numpy==2.0.0 and then try `from osgeo import gdal, gdal_array` 
I get an error:

In [4]: from osgeo import gdal, gdal_array

A module that was compiled using NumPy 1.x cannot be run in
NumPy 2.0.0 as it may crash. To support both 1.x and 2.x
versions of NumPy, modules must be compiled with NumPy 2.0.
Some module may need to rebuild instead e.g. with 'pybind11>=2.12'.

If you are a user of the module, the easiest solution will be to
downgrade to 'numpy<2' or try to upgrade the affected module.
We expect that some modules will need time to support NumPy 2.

Traceback (most recent call last):? File "/root/.local/bin/ipython", 
line 8, in <module>
 ??? sys.exit(start_ipython())
 ? File "/root/.local/lib/python3.12/site-packages/IPython/__init__.py", 
line 130, in start_ipython
 ??? return launch_new_instance(argv=argv, **kwargs)
 ? File 
"/root/.local/lib/python3.12/site-packages/traitlets/config/application.py", 
line 1075, in launch_instance
 ??? app.start()
 ? File 
"/root/.local/lib/python3.12/site-packages/IPython/terminal/ipapp.py", 
line 317, in start
 ??? self.shell.mainloop()
 ? File 
"/root/.local/lib/python3.12/site-packages/IPython/terminal/interactiveshell.py", 
line 917, in mainloop
 ??? self.interact()
 ? File 
"/root/.local/lib/python3.12/site-packages/IPython/terminal/interactiveshell.py", 
line 910, in interact
 ??? self.run_cell(code, store_history=True)
 ? File 
"/root/.local/lib/python3.12/site-packages/IPython/core/interactiveshell.py", 
line 3075, in run_cell
 ??? result = self._run_cell(
 ? File 
"/root/.local/lib/python3.12/site-packages/IPython/core/interactiveshell.py", 
line 3130, in _run_cell
 ??? result = runner(coro)
 ? File 
"/root/.local/lib/python3.12/site-packages/IPython/core/async_helpers.py", 
line 128, in _pseudo_sync_runner
 ??? coro.send(None)
 ? File 
"/root/.local/lib/python3.12/site-packages/IPython/core/interactiveshell.py", 
line 3334, in run_cell_async
 ??? has_raised = await self.run_ast_nodes(code_ast.body, cell_name,
 ? File 
"/root/.local/lib/python3.12/site-packages/IPython/core/interactiveshell.py", 
line 3517, in run_ast_nodes
 ??? if await self.run_code(code, result, async_=asy):
 ? File 
"/root/.local/lib/python3.12/site-packages/IPython/core/interactiveshell.py", 
line 3577, in run_code
 ??? exec(code_obj, self.user_global_ns, self.user_ns)
 ? File "<ipython-input-4-dd0a9b2f852a>", line 1, in <module>
 ??? from osgeo import gdal, gdal_array
 ? File "/usr/lib/python3/dist-packages/osgeo/gdal_array.py", line 10, 
in <module>
 ??? from . import _gdal_array

I hoped that the python bindings in the docker image would be compatible 
with both numpy 1 and 2, but apparently they're not? Would it be 
possible to create docker images with bindings that are compatible with 
numpy2? Or would you rather wait until the official ubuntu numpy package 
moves to 2.0?

Thanks,
-- 

	

Vincent Schut

Remote Sensing Software Engineer

+31 302272679 ~ Maliebaan 22 | 3581CP | Utrecht | Netherlands

Linkedin <https://www.linkedin.com/company/satelligence/>~ 
satelligence.com <http://www.satelligence.com><http://www.satelligence.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240712/a0551b4c/attachment.htm>

From even.rouault at spatialys.com  Fri Jul 12 07:26:14 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 12 Jul 2024 16:26:14 +0200
Subject: [gdal-dev] gdal docker with numpy2-compatible python bindings
In-Reply-To: <a1e66443-d941-4c42-aea9-479006c2e00f@satelligence.com>
References: <a1e66443-d941-4c42-aea9-479006c2e00f@satelligence.com>
Message-ID: <a29acf5d-bb60-4f3d-971b-815f3eed986f@spatialys.com>

Hi,
> I hoped that the python bindings in the docker image would be 
> compatible with both numpy 1 and 2, but apparently they're not? Would 
> it be possible to create docker images with bindings that are 
> compatible with numpy2? Or would you rather wait until the official 
> ubuntu numpy package moves to 2.0?

That seems reasonable at first sight (although I'm not totally sure what 
would happen if you would install and use in the same process other 
python modules built against numpy 1.x. I assume this works?). If you 
want to contribute that improvement, I guess this is mostly a matter of 
pip install numpy==2.0.0 in the builder image before building GDAL

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240712/f357e195/attachment.htm>

From schut at satelligence.com  Fri Jul 12 07:29:10 2024
From: schut at satelligence.com (Vincent Schut)
Date: Fri, 12 Jul 2024 16:29:10 +0200
Subject: [gdal-dev] gdal docker with numpy2-compatible python bindings
In-Reply-To: <a29acf5d-bb60-4f3d-971b-815f3eed986f@spatialys.com>
References: <a1e66443-d941-4c42-aea9-479006c2e00f@satelligence.com>
 <a29acf5d-bb60-4f3d-971b-815f3eed986f@spatialys.com>
Message-ID: <d995e51c-7787-4c14-a24b-cf58c4f8230d@satelligence.com>

On 12/07/2024 16:26, Even Rouault wrote:
> Hi,
>> I hoped that the python bindings in the docker image would be 
>> compatible with both numpy 1 and 2, but apparently they're not? Would 
>> it be possible to create docker images with bindings that are 
>> compatible with numpy2? Or would you rather wait until the official 
>> ubuntu numpy package moves to 2.0?
>
> That seems reasonable at first sight (although I'm not totally sure 
> what would happen if you would install and use in the same process 
> other python modules built against numpy 1.x. I assume this works?). 
> If you want to contribute that improvement, I guess this is mostly a 
> matter of pip install numpy==2.0.0 in the builder image before 
> building GDAL
>
Alright, fair enough. I'm on holidays for the next 3 1/2 weeks, but if 
nobody picked it up before that, I might pick it up.
>
> Even
>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.

-- 

	

Vincent Schut

Remote Sensing Software Engineer

+31 302272679 ~ Maliebaan 22 | 3581CP | Utrecht | Netherlands

Linkedin <https://www.linkedin.com/company/satelligence/>~ 
satelligence.com <http://www.satelligence.com><http://www.satelligence.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240712/a4ca9c52/attachment-0001.htm>

From eric at knudstrup.org  Fri Jul 12 23:38:20 2024
From: eric at knudstrup.org (Eric Knudstrup)
Date: Fri, 12 Jul 2024 23:38:20 -0700
Subject: [gdal-dev] Building GDAL on Ubuntu 22.04
In-Reply-To: <a91d6eac-951f-4306-a032-92ee9ff6edad@knudstrup.org>
References: <e0930239-3b5c-46a0-9a42-43ed0ad575f2@knudstrup.org>
 <ed1ca76c-249e-41a4-bc91-8912db6efa5a@spatialys.com>
 <a91d6eac-951f-4306-a032-92ee9ff6edad@knudstrup.org>
Message-ID: <19d21ee0-82a0-458f-995a-b62b829adaea@knudstrup.org>

I'm still having trouble with getting it to build osgeo:


[ 96%] Generating osgeo/_gdal.cpython-310-x86_64-linux-gnu.so, 
osgeo/_gdalconst.cpython-310-x86_64-linux-gnu.so, 
osgeo/_gnm.cpython-310-x86_64-linux-gnu.so, 
osgeo/_ogr.cpython-310-x86_64-linux-gnu.so, 
osgeo/_osr.cpython-310-x86_64-linux-gnu.so, 
osgeo/_gdal_array.cpython-310-x86_64-linux-gnu.so
Using numpy 1.21.5
running build_ext
x86_64-linux-gnu-gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g 
-fwrapv -O2 -Wall -g -fstack-protector-strong -Wformat 
-Werror=format-security -g -fwrapv -O2 -g -fstack-protector-strong 
-Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC 
-I/home/ek/gdal-3.9.1/build/port -I/home/ek/gdal-3.9.1/port 
-I/home/ek/gdal-3.9.1/build/gcore -I/home/ek/gdal-3.9.1/gcore 
-I/home/ek/gdal-3.9.1/alg -I/home/ek/gdal-3.9.1/ogr/ 
-I/home/ek/gdal-3.9.1/ogr/ogrsf_frmts -I/home/ek/gdal-3.9.1/gnm 
-I/home/ek/gdal-3.9.1/apps -I/usr/include/python3.10 
-I/usr/lib/python3/dist-packages/numpy/core/include -c 
gdal_python_cxx11_test.cpp -o gdal_python_cxx11_test.o
x86_64-linux-gnu-gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g 
-fwrapv -O2 -Wall -g -fstack-protector-strong -Wformat 
-Werror=format-security -g -fwrapv -O2 -g -fstack-protector-strong 
-Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC 
-I/home/ek/gdal-3.9.1/build/port -I/home/ek/gdal-3.9.1/port 
-I/home/ek/gdal-3.9.1/build/gcore -I/home/ek/gdal-3.9.1/gcore 
-I/home/ek/gdal-3.9.1/alg -I/home/ek/gdal-3.9.1/ogr/ 
-I/home/ek/gdal-3.9.1/ogr/ogrsf_frmts -I/home/ek/gdal-3.9.1/gnm 
-I/home/ek/gdal-3.9.1/apps -I/usr/include/python3.10 
-I/usr/lib/python3/dist-packages/numpy/core/include -c 
gdal_python_cxx11_test.cpp -o gdal_python_cxx11_test.o -std=c++11
building 'osgeo._gdal' extension
creating build
creating build/temp.linux-x86_64-3.10
creating build/temp.linux-x86_64-3.10/extensions
x86_64-linux-gnu-gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g 
-fwrapv -O2 -Wall -g -fstack-protector-strong -Wformat 
-Werror=format-security -g -fwrapv -O2 -g -fstack-protector-strong 
-Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC 
-I/home/ek/gdal-3.9.1/build/port -I/home/ek/gdal-3.9.1/port 
-I/home/ek/gdal-3.9.1/build/gcore -I/home/ek/gdal-3.9.1/gcore 
-I/home/ek/gdal-3.9.1/alg -I/home/ek/gdal-3.9.1/ogr/ 
-I/home/ek/gdal-3.9.1/ogr/ogrsf_frmts -I/home/ek/gdal-3.9.1/gnm 
-I/home/ek/gdal-3.9.1/apps -I/usr/include/python3.10 
-I/usr/lib/python3/dist-packages/numpy/core/include -c 
extensions/gdal_wrap.cpp -o 
build/temp.linux-x86_64-3.10/extensions/gdal_wrap.o
building 'osgeo._gdalconst' extension
x86_64-linux-gnu-gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g 
-fwrapv -O2 -Wall -g -fstack-protector-strong -Wformat 
-Werror=format-security -g -fwrapv -O2 -g -fstack-protector-strong 
-Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC 
-I/home/ek/gdal-3.9.1/build/port -I/home/ek/gdal-3.9.1/port 
-I/home/ek/gdal-3.9.1/build/gcore -I/home/ek/gdal-3.9.1/gcore 
-I/home/ek/gdal-3.9.1/alg -I/home/ek/gdal-3.9.1/ogr/ 
-I/home/ek/gdal-3.9.1/ogr/ogrsf_frmts -I/home/ek/gdal-3.9.1/gnm 
-I/home/ek/gdal-3.9.1/apps -I/usr/include/python3.10 
-I/usr/lib/python3/dist-packages/numpy/core/include -c 
extensions/gdalconst_wrap.c -o 
build/temp.linux-x86_64-3.10/extensions/gdalconst_wrap.o
building 'osgeo._osr' extension
x86_64-linux-gnu-gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g 
-fwrapv -O2 -Wall -g -fstack-protector-strong -Wformat 
-Werror=format-security -g -fwrapv -O2 -g -fstack-protector-strong 
-Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC 
-I/home/ek/gdal-3.9.1/build/port -I/home/ek/gdal-3.9.1/port 
-I/home/ek/gdal-3.9.1/build/gcore -I/home/ek/gdal-3.9.1/gcore 
-I/home/ek/gdal-3.9.1/alg -I/home/ek/gdal-3.9.1/ogr/ 
-I/home/ek/gdal-3.9.1/ogr/ogrsf_frmts -I/home/ek/gdal-3.9.1/gnm 
-I/home/ek/gdal-3.9.1/apps -I/usr/include/python3.10 
-I/usr/lib/python3/dist-packages/numpy/core/include -c 
extensions/osr_wrap.cpp -o 
build/temp.linux-x86_64-3.10/extensions/osr_wrap.o
building 'osgeo._ogr' extension
x86_64-linux-gnu-gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g 
-fwrapv -O2 -Wall -g -fstack-protector-strong -Wformat 
-Werror=format-security -g -fwrapv -O2 -g -fstack-protector-strong 
-Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC 
-I/home/ek/gdal-3.9.1/build/port -I/home/ek/gdal-3.9.1/port 
-I/home/ek/gdal-3.9.1/build/gcore -I/home/ek/gdal-3.9.1/gcore 
-I/home/ek/gdal-3.9.1/alg -I/home/ek/gdal-3.9.1/ogr/ 
-I/home/ek/gdal-3.9.1/ogr/ogrsf_frmts -I/home/ek/gdal-3.9.1/gnm 
-I/home/ek/gdal-3.9.1/apps -I/usr/include/python3.10 
-I/usr/lib/python3/dist-packages/numpy/core/include -c 
extensions/ogr_wrap.cpp -o 
build/temp.linux-x86_64-3.10/extensions/ogr_wrap.o
building 'osgeo._gnm' extension
x86_64-linux-gnu-gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g 
-fwrapv -O2 -Wall -g -fstack-protector-strong -Wformat 
-Werror=format-security -g -fwrapv -O2 -g -fstack-protector-strong 
-Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC 
-I/home/ek/gdal-3.9.1/build/port -I/home/ek/gdal-3.9.1/port 
-I/home/ek/gdal-3.9.1/build/gcore -I/home/ek/gdal-3.9.1/gcore 
-I/home/ek/gdal-3.9.1/alg -I/home/ek/gdal-3.9.1/ogr/ 
-I/home/ek/gdal-3.9.1/ogr/ogrsf_frmts -I/home/ek/gdal-3.9.1/gnm 
-I/home/ek/gdal-3.9.1/apps -I/usr/include/python3.10 
-I/usr/lib/python3/dist-packages/numpy/core/include -c 
extensions/gnm_wrap.cpp -o 
build/temp.linux-x86_64-3.10/extensions/gnm_wrap.o
building 'osgeo._gdal_array' extension
x86_64-linux-gnu-gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g 
-fwrapv -O2 -Wall -g -fstack-protector-strong -Wformat 
-Werror=format-security -g -fwrapv -O2 -g -fstack-protector-strong 
-Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC 
-I/home/ek/gdal-3.9.1/build/port -I/home/ek/gdal-3.9.1/port 
-I/home/ek/gdal-3.9.1/build/gcore -I/home/ek/gdal-3.9.1/gcore 
-I/home/ek/gdal-3.9.1/alg -I/home/ek/gdal-3.9.1/ogr/ 
-I/home/ek/gdal-3.9.1/ogr/ogrsf_frmts -I/home/ek/gdal-3.9.1/gnm 
-I/home/ek/gdal-3.9.1/apps -I/usr/include/python3.10 
-I/usr/lib/python3/dist-packages/numpy/core/include -c 
extensions/gdal_array_wrap.cpp -o 
build/temp.linux-x86_64-3.10/extensions/gdal_array_wrap.o
error: command 'x86_64-linux-gnu-gcc' failed: No such file or directory
CMake Error at build_ext.cmake:5 (message):
 ? setup.py bdist_wheel failed


gmake[2]: *** [swig/python/CMakeFiles/python_binding.dir/build.make:405: 
swig/python/osgeo/_gdal.cpython-310-x86_64-linux-gnu.so] Error 1
gmake[1]: *** [CMakeFiles/Makefile2:9397: 
swig/python/CMakeFiles/python_binding.dir/all] Error 2
gmake: *** [Makefile:146: all] Error 2


From mrvelle at gmail.com  Sun Jul 14 12:57:58 2024
From: mrvelle at gmail.com (Thomas Larsen Wessel)
Date: Sun, 14 Jul 2024 21:57:58 +0200
Subject: [gdal-dev] Documentation/explanation on repository structure
Message-ID: <CAKKm1vG_OHXgQUCGpKMYdzENNfkcE0QrrHxTZnOS2p2YO2KPUA@mail.gmail.com>

It's hard for me to understand the structure of the repository. Is there
any documentation on this?

For instance. I see python scripts (able to be run from command line, not
just modules/packages) in a few places:

./scripts
./swig/python/gdal-utils/scripts
./swig/python/gdal-utils/osgeo_utils
./swig/python/gdal-utils/osgeo_utils/auxiliary
./swig/python/gdal-utils/osgeo_utils/samples

I don't see/understand the structure. But maybe, with some help, I could?

To be concrete, lets consider validate_gpkg.py. Why is it in "samples", and
not in any of the others? Why does it belong in that folder?

Some scripts seem to be in more than one place (though not identical, at
least not in formatting) e.g.:
 - ./swig/python/gdal-utils/scripts/gdal2tiles.py
 - ./swig/python/gdal-utils/osgeo_utils/gdal2tiles.py

Is there any documentation that will help me understand the structure,
including the questions above?

Sincerely, Thomas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240714/9efa2fe1/attachment.htm>

From dklaus at carlsonsw.com  Mon Jul 15 07:16:10 2024
From: dklaus at carlsonsw.com (David Klaus)
Date: Mon, 15 Jul 2024 10:16:10 -0400
Subject: [gdal-dev] GDAL 3.7.0 Proj 6.3.1 strange behavior when performing
 NAD83(EPSG:4152) to NAD83 HARN(EPSG:4269) realization transformation
Message-ID: <CAJNrnBUQv4RDBMmNws=Uiw29jqaCD6B6KNCOpOai-UmXmJrx=Q@mail.gmail.com>

Hello,

I apologize if this is not the correct forum for this question. I am
currently trying to determine the cause of some strange behavior I've
encountered when running  a custom build of GDAL that my company uses. To
be clear I don't think the behavior is a bug on GDAL's part, but I think
that we may be doing something wrong.

First a few details. The company I work for targets GDAL 3.7.0 for our
custom build. Pertinent to this issue: we use Proj4 6.3.1 and we include in
our installation the grid files available in the proj-datumgrid-1.7 package.

So, here is a description of the strange behavior I mentioned. When I
attempt to perform the realization transformation from EPSG:4152 to
EPSG:4269 in my code, there is no change. When I attempt to perform this
same transformation using the ogr2ogr.exe built during our Custom GDAL
3.7.0 build, I see some sort of transformation applied. That said, I can't
square the change in lat/lon that ogr2ogr.exe produces with the results of
an equivalent coordinate transformation from either the epsg.io or the
https://www.ngs.noaa.gov/NCAT/ websites.

I tried to dive a bit deeper and I took a look at the information reported
when PROJ_DEBUG is set to 3. Using this I was able to verify that Proj4 is
successfully finding the HPGN grid files needed to implement the NAD83 1986
to NAD83 HARN realization transformation in both ogr2ogr.exe and in my
code. I was also able to verify that in both places the proj.db database
was found and opened.

In fact almost all of the debug printouts are identical between my code and
ogr2ogr.exe. However once it comes time to select a coordinate
transformation, my code makes the following choice:

*"PROJ: Using coordinate operation Ballpark geographic offset from NAD83 to
NAD83(HARN)"*

ogr2ogr.exe on the other hand makes this choice:



*"PROJ: Using coordinate operation NAD83 to NAD83(HARN) (3)PROJ_TRACE: NTv2
- loading grid cn      PROJ: pj_open_lib(cnhpgn.gsb): call
fopen(c:/users/dklau/appdata/roaming/carlson
software/carlson2025/icad12_1_x64/sup/GDAL370/proj-data/\cnhpgn.gsb) -
succeeded"*

If I'm not mistaken, cnhpgn.gsb is the grid file used to implement the
NAD83 1986 to NAD83 HARN transformation for Connecticut. Now the coordinate
points I am transforming are in San Francisco, California
(lon:-122.419416000000000, lat:37.774929000000000). So, the fact that
ogr2ogr.exe is using a Connecticut grid file is strange and as I mentioned
before the result (lon:-122.419417091077321 lat:37.774930105493752) does
not seem correct.

I thought that perhaps my code was correctly detecting that there were no
good grid files to cover the San Francisco transformation. But I know that
I have grid files that should apply to Pennsylvania, "pahpgn.gsb." So, I
tried a transformation for coordinate points in Philadelphia, Pennsylvania
(lon:-75.165147 lat:39.952673). However, here too my code chose to use the
"Ballpark" geographic offset method. ogr2ogr on the other hand performed a
transformation that seems very close to the correct transformation (down to
perhaps a matter of millimeters):

   - Input:
      - lon: -75.165147
      - lat: 39.952673
   - My code results "ballpark":
      - lon: -75.165147
      - lat: 39.952673
   - ogr2ogr results:
      - lon: -75.165145360841308\
      - lat: 39.952674501581825
   - NGS results:
      - lon: -75.1651458936
      - lat: 39.9526745470


Looking at the PROJ_DEBUG output in ogr2ogr.exe seems to confirm that
ogr2ogr.exe is finding and applying the pahpgn.gsb file as I expected:


*"PROJ: Using coordinate operation NAD83 to NAD83(HARN) (46)PROJ_TRACE:
NTv2 - loading grid paPROJ: pj_open_lib(pahpgn.gsb): call
fopen(c:/users/dklau/appdata/roaming/carlson
software/carlson2025/icad12_1_x64/sup/GDAL370/proj-data/\pahpgn.gsb) -
succeeded"*

So, I'm not sure exactly what I'm doing wrong. To me it appears ogr2ogr is
doing an okay job of selecting a grid file when determining how to perform
this coordinate transformation while my code is not using any grid files at
all regardless of correctness. I suspect this is due to some GDAL or PROJ
setting that I've overlooked, but I can't determine what setting could
cause this.

Hopefully this is the correct forum for this question. Any help would be
greatly appreciated. Thank you,

P.P.S. Judging from the grid files available in the proj-datumgrid-1.7
package, it looks like realization transformations such as NAD83 HARN to
NAD83 FBN (or any other NAD83 realization shift besides NAD83 1986 to NAD83
HARN) aren't available in the package we're using. Do I understand this
correctly? If so, does anyone know which version of Proj4 is needed to
correctly implement the various NAD83 realization transformations? I know
that this is not strictly a GDAL question, but I thought someone here might
know the answer.


-- 
David Klaus
Carlson Software

Disclaimer

The information contained in this communication from the sender is confidential. It is intended solely for use by the recipient and others authorized to receive it. If you are not the recipient, you are hereby notified that any disclosure, copying, distribution or taking action in relation of the contents of this information is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240715/40186a78/attachment.htm>

From gdt at lexort.com  Mon Jul 15 08:06:06 2024
From: gdt at lexort.com (Greg Troxel)
Date: Mon, 15 Jul 2024 11:06:06 -0400
Subject: [gdal-dev] GDAL 3.7.0 Proj 6.3.1 strange behavior when
 performing NAD83(EPSG:4152) to NAD83 HARN(EPSG:4269) realization
 transformation
In-Reply-To: <CAJNrnBUQv4RDBMmNws=Uiw29jqaCD6B6KNCOpOai-UmXmJrx=Q@mail.gmail.com>
 (David Klaus via gdal-dev's message of "Mon, 15 Jul 2024 10:16:10
 -0400")
References: <CAJNrnBUQv4RDBMmNws=Uiw29jqaCD6B6KNCOpOai-UmXmJrx=Q@mail.gmail.com>
Message-ID: <rmio76y1yqp.fsf@s1.lexort.com>

You didn't, as far as I can tell, post the code that is not doing what
you want.  Or perhaps turn that code into a small test case program.
People reading that would be able to be more helpful, and the code
example could help others.

Proj 6.3 is quite old.   I recommend you update to the latest release
and the latest gridshift package before debugging further.   I am not a
gdal or proj maintainer, but I am packager for both, and often rant
about NAD83 and WGS84 issues.   In general, proj has a hard time dealing
reasonably with WGS84 (which you aren't at the moment), and the
transforms among the various NAD83 are complicated.  I am not the least
bit sure they are all in the epsg dataset.

You should very likely be using projinfo, and also thinking about how
you are conveying the area of applicability when setting up the
transform.

From dklaus at carlsonsw.com  Mon Jul 15 08:33:34 2024
From: dklaus at carlsonsw.com (David Klaus)
Date: Mon, 15 Jul 2024 11:33:34 -0400
Subject: [gdal-dev] GDAL 3.7.0 Proj 6.3.1 strange behavior when
 performing NAD83(EPSG:4152) to NAD83 HARN(EPSG:4269) realization
 transformation
In-Reply-To: <rmio76y1yqp.fsf@s1.lexort.com>
References: <CAJNrnBUQv4RDBMmNws=Uiw29jqaCD6B6KNCOpOai-UmXmJrx=Q@mail.gmail.com>
 <rmio76y1yqp.fsf@s1.lexort.com>
Message-ID: <CAJNrnBXc9kEtcmt0djXuZmBYBn8B9Hi8T5jwfFE3vGX=K1xNVA@mail.gmail.com>

Greg,

Thank you for that information. I'll put together some example code and
post that shortly.

As far as upgrading Proj4; because we build Proj4 statically in our custom
build, it's not a trivial task to upgrade versions. Also, I think there
might be compatibility reasons why we've stuck with 6.3.1 up until now.

But if NAD83 realization transformation functionality has been expanded and
improved in later versions, it might be worth it for us to upgrade. I was
wondering, judging by the contents of the proj-datumgrid packages I've
found online, it looks like Proj4 did not support any NAD83 realization
transformations besides 1986->HARN before at least Proj4 7.0.

Do you happen to know if this is true or not? I'm having trouble confirming
this online,

On Mon, Jul 15, 2024 at 11:06?AM Greg Troxel via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> You didn't, as far as I can tell, post the code that is not doing what
> you want.  Or perhaps turn that code into a small test case program.
> People reading that would be able to be more helpful, and the code
> example could help others.
>
> Proj 6.3 is quite old.   I recommend you update to the latest release
> and the latest gridshift package before debugging further.   I am not a
> gdal or proj maintainer, but I am packager for both, and often rant
> about NAD83 and WGS84 issues.   In general, proj has a hard time dealing
> reasonably with WGS84 (which you aren't at the moment), and the
> transforms among the various NAD83 are complicated.  I am not the least
> bit sure they are all in the epsg dataset.
>
> You should very likely be using projinfo, and also thinking about how
> you are conveying the area of applicability when setting up the
> transform.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-- 
David Klaus
Carlson Software

Disclaimer

The information contained in this communication from the sender is confidential. It is intended solely for use by the recipient and others authorized to receive it. If you are not the recipient, you are hereby notified that any disclosure, copying, distribution or taking action in relation of the contents of this information is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240715/f811977c/attachment-0001.htm>

From gdt at lexort.com  Mon Jul 15 08:40:26 2024
From: gdt at lexort.com (Greg Troxel)
Date: Mon, 15 Jul 2024 11:40:26 -0400
Subject: [gdal-dev] GDAL 3.7.0 Proj 6.3.1 strange behavior when
 performing NAD83(EPSG:4152) to NAD83 HARN(EPSG:4269) realization
 transformation
In-Reply-To: <CAJNrnBXc9kEtcmt0djXuZmBYBn8B9Hi8T5jwfFE3vGX=K1xNVA@mail.gmail.com>
 (David Klaus's message of "Mon, 15 Jul 2024 11:33:34 -0400")
References: <CAJNrnBUQv4RDBMmNws=Uiw29jqaCD6B6KNCOpOai-UmXmJrx=Q@mail.gmail.com>
 <rmio76y1yqp.fsf@s1.lexort.com>
 <CAJNrnBXc9kEtcmt0djXuZmBYBn8B9Hi8T5jwfFE3vGX=K1xNVA@mail.gmail.com>
Message-ID: <rmi1q3u1x5h.fsf@s1.lexort.com>

David Klaus <dklaus at carlsonsw.com> writes:

> As far as upgrading Proj4; because we build Proj4 statically in our custom
> build, it's not a trivial task to upgrade versions. Also, I think there
> might be compatibility reasons why we've stuck with 6.3.1 up until now.
>
> But if NAD83 realization transformation functionality has been expanded and
> improved in later versions, it might be worth it for us to upgrade. I was
> wondering, judging by the contents of the proj-datumgrid packages I've
> found online, it looks like Proj4 did not support any NAD83 realization
> transformations besides 1986->HARN before at least Proj4 7.0.

I maintain an unrelated (not geo) software package, and there my
practice is not to engage in debugging old versions.  It takes a lot of
time and in the cases the problem has been resolved already, it is
entirely not useful (to the project).

I am not saying NAD83 is better specifically if you udpate.  I really
don't know.


From dklaus at carlsonsw.com  Mon Jul 15 08:46:57 2024
From: dklaus at carlsonsw.com (David Klaus)
Date: Mon, 15 Jul 2024 11:46:57 -0400
Subject: [gdal-dev] GDAL 3.7.0 Proj 6.3.1 strange behavior when
 performing NAD83(EPSG:4152) to NAD83 HARN(EPSG:4269) realization
 transformation
In-Reply-To: <rmi1q3u1x5h.fsf@s1.lexort.com>
References: <CAJNrnBUQv4RDBMmNws=Uiw29jqaCD6B6KNCOpOai-UmXmJrx=Q@mail.gmail.com>
 <rmio76y1yqp.fsf@s1.lexort.com>
 <CAJNrnBXc9kEtcmt0djXuZmBYBn8B9Hi8T5jwfFE3vGX=K1xNVA@mail.gmail.com>
 <rmi1q3u1x5h.fsf@s1.lexort.com>
Message-ID: <CAJNrnBV6s_GheHLV6xXON0VEUBSzf+-Qf_n9mEn_Xr8k=O0oDw@mail.gmail.com>

Greg,

Thank you for that information. I will post my example code shortly.
Hopefully there is an obvious mistake in my code that is not related to
Proj4 or GDAL version,

On Mon, Jul 15, 2024 at 11:40?AM Greg Troxel <gdt at lexort.com> wrote:

> David Klaus <dklaus at carlsonsw.com> writes:
>
> > As far as upgrading Proj4; because we build Proj4 statically in our
> custom
> > build, it's not a trivial task to upgrade versions. Also, I think there
> > might be compatibility reasons why we've stuck with 6.3.1 up until now.
> >
> > But if NAD83 realization transformation functionality has been expanded
> and
> > improved in later versions, it might be worth it for us to upgrade. I was
> > wondering, judging by the contents of the proj-datumgrid packages I've
> > found online, it looks like Proj4 did not support any NAD83 realization
> > transformations besides 1986->HARN before at least Proj4 7.0.
>
> I maintain an unrelated (not geo) software package, and there my
> practice is not to engage in debugging old versions.  It takes a lot of
> time and in the cases the problem has been resolved already, it is
> entirely not useful (to the project).
>
> I am not saying NAD83 is better specifically if you udpate.  I really
> don't know.
>
>

-- 
David Klaus
Carlson Software

Disclaimer

The information contained in this communication from the sender is confidential. It is intended solely for use by the recipient and others authorized to receive it. If you are not the recipient, you are hereby notified that any disclosure, copying, distribution or taking action in relation of the contents of this information is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240715/70a30d45/attachment.htm>

From even.rouault at spatialys.com  Mon Jul 15 09:30:11 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 15 Jul 2024 18:30:11 +0200
Subject: [gdal-dev] GDAL 3.7.0 Proj 6.3.1 strange behavior when
 performing NAD83(EPSG:4152) to NAD83 HARN(EPSG:4269) realization
 transformation
In-Reply-To: <CAJNrnBV6s_GheHLV6xXON0VEUBSzf+-Qf_n9mEn_Xr8k=O0oDw@mail.gmail.com>
References: <CAJNrnBUQv4RDBMmNws=Uiw29jqaCD6B6KNCOpOai-UmXmJrx=Q@mail.gmail.com>
 <rmio76y1yqp.fsf@s1.lexort.com>
 <CAJNrnBXc9kEtcmt0djXuZmBYBn8B9Hi8T5jwfFE3vGX=K1xNVA@mail.gmail.com>
 <rmi1q3u1x5h.fsf@s1.lexort.com>
 <CAJNrnBV6s_GheHLV6xXON0VEUBSzf+-Qf_n9mEn_Xr8k=O0oDw@mail.gmail.com>
Message-ID: <2e1e565c-163d-4f1b-8fd0-5f53946c6f70@spatialys.com>

Support for US datum transformations has been vastly improved in PROJ 
9.2.0 with NADCON5 grid based transformations

Le 15/07/2024 ? 17:46, David Klaus via gdal-dev a ?crit?:
> Greg,
>
> Thank you for that information. I will post my example code shortly. 
> Hopefully there is an obvious mistake in my code that is not related 
> to Proj4 or GDAL version,
>
> On Mon, Jul 15, 2024 at 11:40?AM Greg Troxel <gdt at lexort.com> wrote:
>
>     David Klaus <dklaus at carlsonsw.com> writes:
>
>     > As far as upgrading Proj4; because we build Proj4 statically in
>     our custom
>     > build, it's not a trivial task to upgrade versions. Also, I
>     think there
>     > might be compatibility reasons why we've stuck with 6.3.1 up
>     until now.
>     >
>     > But if NAD83 realization transformation functionality has been
>     expanded and
>     > improved in later versions, it might be worth it for us to
>     upgrade. I was
>     > wondering, judging by the contents of the proj-datumgrid
>     packages I've
>     > found online, it looks like Proj4 did not support any NAD83
>     realization
>     > transformations besides 1986->HARN before at least Proj4 7.0.
>
>     I maintain an unrelated (not geo) software package, and there my
>     practice is not to engage in debugging old versions.? It takes a
>     lot of
>     time and in the cases the problem has been resolved already, it is
>     entirely not useful (to the project).
>
>     I am not saying NAD83 is better specifically if you udpate.? I really
>     don't know.
>
>
>
> -- 
> David Klaus
> Carlson Software
>
>
> *Disclaimer*
>
> The information contained in this communication from the sender is 
> confidential. It is intended solely for use by the recipient and 
> others authorized to receive it. If you are not the recipient, you are 
> hereby notified that any disclosure, copying, distribution or taking 
> action in relation of the contents of this information is strictly 
> prohibited and may be unlawful.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240715/ede78570/attachment.htm>

From dklaus at carlsonsw.com  Mon Jul 15 09:57:07 2024
From: dklaus at carlsonsw.com (David Klaus)
Date: Mon, 15 Jul 2024 12:57:07 -0400
Subject: [gdal-dev] GDAL 3.7.0 Proj 6.3.1 strange behavior when
 performing NAD83(EPSG:4152) to NAD83 HARN(EPSG:4269) realization
 transformation
In-Reply-To: <2e1e565c-163d-4f1b-8fd0-5f53946c6f70@spatialys.com>
References: <CAJNrnBUQv4RDBMmNws=Uiw29jqaCD6B6KNCOpOai-UmXmJrx=Q@mail.gmail.com>
 <rmio76y1yqp.fsf@s1.lexort.com>
 <CAJNrnBXc9kEtcmt0djXuZmBYBn8B9Hi8T5jwfFE3vGX=K1xNVA@mail.gmail.com>
 <rmi1q3u1x5h.fsf@s1.lexort.com>
 <CAJNrnBV6s_GheHLV6xXON0VEUBSzf+-Qf_n9mEn_Xr8k=O0oDw@mail.gmail.com>
 <2e1e565c-163d-4f1b-8fd0-5f53946c6f70@spatialys.com>
Message-ID: <CAJNrnBUoSt7yv8DsnQd85AVRvpj5W3E4+fRQNOAtpa=knuDdsQ@mail.gmail.com>

Even,

Thank you for the input. You don't happen to know where I can find
documentation on these NADCON5 related changes?

On Mon, Jul 15, 2024 at 12:30?PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Support for US datum transformations has been vastly improved in PROJ
> 9.2.0 with NADCON5 grid based transformations
> Le 15/07/2024 ? 17:46, David Klaus via gdal-dev a ?crit :
>
> Greg,
>
> Thank you for that information. I will post my example code shortly.
> Hopefully there is an obvious mistake in my code that is not related to
> Proj4 or GDAL version,
>
> On Mon, Jul 15, 2024 at 11:40?AM Greg Troxel <gdt at lexort.com> wrote:
>
>> David Klaus <dklaus at carlsonsw.com> writes:
>>
>> > As far as upgrading Proj4; because we build Proj4 statically in our
>> custom
>> > build, it's not a trivial task to upgrade versions. Also, I think there
>> > might be compatibility reasons why we've stuck with 6.3.1 up until now.
>> >
>> > But if NAD83 realization transformation functionality has been expanded
>> and
>> > improved in later versions, it might be worth it for us to upgrade. I
>> was
>> > wondering, judging by the contents of the proj-datumgrid packages I've
>> > found online, it looks like Proj4 did not support any NAD83 realization
>> > transformations besides 1986->HARN before at least Proj4 7.0.
>>
>> I maintain an unrelated (not geo) software package, and there my
>> practice is not to engage in debugging old versions.  It takes a lot of
>> time and in the cases the problem has been resolved already, it is
>> entirely not useful (to the project).
>>
>> I am not saying NAD83 is better specifically if you udpate.  I really
>> don't know.
>>
>>
>
> --
> David Klaus
> Carlson Software
>
>
> *Disclaimer*
>
> The information contained in this communication from the sender is
> confidential. It is intended solely for use by the recipient and others
> authorized to receive it. If you are not the recipient, you are hereby
> notified that any disclosure, copying, distribution or taking action in
> relation of the contents of this information is strictly prohibited and may
> be unlawful.
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
> -- http://www.spatialys.com <http://www.spatialys.com>
> My software is free, but my time generally not.
>
>

-- 
David Klaus
Carlson Software

Disclaimer

The information contained in this communication from the sender is confidential. It is intended solely for use by the recipient and others authorized to receive it. If you are not the recipient, you are hereby notified that any disclosure, copying, distribution or taking action in relation of the contents of this information is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240715/c52139c6/attachment-0001.htm>

From gdt at lexort.com  Mon Jul 15 10:03:12 2024
From: gdt at lexort.com (Greg Troxel)
Date: Mon, 15 Jul 2024 13:03:12 -0400
Subject: [gdal-dev] GDAL 3.7.0 Proj 6.3.1 strange behavior when
 performing NAD83(EPSG:4152) to NAD83 HARN(EPSG:4269) realization
 transformation
In-Reply-To: <CAJNrnBUoSt7yv8DsnQd85AVRvpj5W3E4+fRQNOAtpa=knuDdsQ@mail.gmail.com>
 (David Klaus's message of "Mon, 15 Jul 2024 12:57:07 -0400")
References: <CAJNrnBUQv4RDBMmNws=Uiw29jqaCD6B6KNCOpOai-UmXmJrx=Q@mail.gmail.com>
 <rmio76y1yqp.fsf@s1.lexort.com>
 <CAJNrnBXc9kEtcmt0djXuZmBYBn8B9Hi8T5jwfFE3vGX=K1xNVA@mail.gmail.com>
 <rmi1q3u1x5h.fsf@s1.lexort.com>
 <CAJNrnBV6s_GheHLV6xXON0VEUBSzf+-Qf_n9mEn_Xr8k=O0oDw@mail.gmail.com>
 <2e1e565c-163d-4f1b-8fd0-5f53946c6f70@spatialys.com>
 <CAJNrnBUoSt7yv8DsnQd85AVRvpj5W3E4+fRQNOAtpa=knuDdsQ@mail.gmail.com>
Message-ID: <rmiwmlmziy7.fsf@s1.lexort.com>

David Klaus <dklaus at carlsonsw.com> writes:

> Thank you for the input. You don't happen to know where I can find
> documentation on these NADCON5 related changes?

I would suggest reading the 9.2.0 release notes.
There is a link to a merged PR which has further discussion.

The tl;dr; is that proj matches NGS tools.  Which is a pretty stunning
result.

From even.rouault at spatialys.com  Mon Jul 15 10:05:11 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 15 Jul 2024 19:05:11 +0200
Subject: [gdal-dev] Documentation/explanation on repository structure
In-Reply-To: <CAKKm1vG_OHXgQUCGpKMYdzENNfkcE0QrrHxTZnOS2p2YO2KPUA@mail.gmail.com>
References: <CAKKm1vG_OHXgQUCGpKMYdzENNfkcE0QrrHxTZnOS2p2YO2KPUA@mail.gmail.com>
Message-ID: <ab168bda-9057-4732-a631-608b4a78c257@spatialys.com>

Hi,

hopefully this proposed improvement of the developer doc 
https://github.com/OSGeo/gdal/pull/10427 should answer your questions

Even

Le 14/07/2024 ? 21:57, Thomas Larsen Wessel via gdal-dev a ?crit?:
> It's hard for me to understand the structure of the repository. Is 
> there any documentation on this?
>
> For instance. I see python scripts (able to be run from command line, 
> not just modules/packages) in a few places:
>
> ./scripts
> ./swig/python/gdal-utils/scripts
> ./swig/python/gdal-utils/osgeo_utils
> ./swig/python/gdal-utils/osgeo_utils/auxiliary
> ./swig/python/gdal-utils/osgeo_utils/samples
>
> I don't see/understand the structure. But maybe, with some help, I could?
>
> To be concrete, lets consider validate_gpkg.py. Why is it in 
> "samples", and not in any of the others? Why does it belong in that 
> folder?
>
> Some scripts seem to be in more than one place (though not identical, 
> at least not in formatting) e.g.:
> ?- ./swig/python/gdal-utils/scripts/gdal2tiles.py
> ?- ./swig/python/gdal-utils/osgeo_utils/gdal2tiles.py
>
> Is there any documentation that will help me understand the structure, 
> including the questions above?
>
> Sincerely, Thomas
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From dklaus at carlsonsw.com  Mon Jul 15 10:30:28 2024
From: dklaus at carlsonsw.com (David Klaus)
Date: Mon, 15 Jul 2024 13:30:28 -0400
Subject: [gdal-dev] GDAL 3.7.0 Proj 6.3.1 strange behavior when
 performing NAD83(EPSG:4152) to NAD83 HARN(EPSG:4269) realization
 transformation
In-Reply-To: <rmiwmlmziy7.fsf@s1.lexort.com>
References: <CAJNrnBUQv4RDBMmNws=Uiw29jqaCD6B6KNCOpOai-UmXmJrx=Q@mail.gmail.com>
 <rmio76y1yqp.fsf@s1.lexort.com>
 <CAJNrnBXc9kEtcmt0djXuZmBYBn8B9Hi8T5jwfFE3vGX=K1xNVA@mail.gmail.com>
 <rmi1q3u1x5h.fsf@s1.lexort.com>
 <CAJNrnBV6s_GheHLV6xXON0VEUBSzf+-Qf_n9mEn_Xr8k=O0oDw@mail.gmail.com>
 <2e1e565c-163d-4f1b-8fd0-5f53946c6f70@spatialys.com>
 <CAJNrnBUoSt7yv8DsnQd85AVRvpj5W3E4+fRQNOAtpa=knuDdsQ@mail.gmail.com>
 <rmiwmlmziy7.fsf@s1.lexort.com>
Message-ID: <CAJNrnBUc0w5Qs7OprShiFjHKjKOv5NcBrn_bEJJ8Mr3uhYkrhQ@mail.gmail.com>

All,

If I understand correctly. Before we do anything else, we should try to
rebuilt our GDAL solution such that it uses at least Proj4 9.2.0, do I have
that right? Does anyone happen to know the minimum GDAL version compatible
with Proj4 9.2.0?

P.S. I am still working on the code example to repeat the issue I ran into.

On Mon, Jul 15, 2024 at 1:03?PM Greg Troxel <gdt at lexort.com> wrote:

> David Klaus <dklaus at carlsonsw.com> writes:
>
> > Thank you for the input. You don't happen to know where I can find
> > documentation on these NADCON5 related changes?
>
> I would suggest reading the 9.2.0 release notes.
> There is a link to a merged PR which has further discussion.
>
> The tl;dr; is that proj matches NGS tools.  Which is a pretty stunning
> result.
>
>

-- 
David Klaus
Carlson Software

Disclaimer

The information contained in this communication from the sender is confidential. It is intended solely for use by the recipient and others authorized to receive it. If you are not the recipient, you are hereby notified that any disclosure, copying, distribution or taking action in relation of the contents of this information is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240715/30ad2ee1/attachment.htm>

From dklaus at carlsonsw.com  Mon Jul 15 11:29:39 2024
From: dklaus at carlsonsw.com (David Klaus)
Date: Mon, 15 Jul 2024 14:29:39 -0400
Subject: [gdal-dev] GDAL 3.7.0 Proj 6.3.1 strange behavior when
 performing NAD83(EPSG:4152) to NAD83 HARN(EPSG:4269) realization
 transformation
In-Reply-To: <CAJNrnBUc0w5Qs7OprShiFjHKjKOv5NcBrn_bEJJ8Mr3uhYkrhQ@mail.gmail.com>
References: <CAJNrnBUQv4RDBMmNws=Uiw29jqaCD6B6KNCOpOai-UmXmJrx=Q@mail.gmail.com>
 <rmio76y1yqp.fsf@s1.lexort.com>
 <CAJNrnBXc9kEtcmt0djXuZmBYBn8B9Hi8T5jwfFE3vGX=K1xNVA@mail.gmail.com>
 <rmi1q3u1x5h.fsf@s1.lexort.com>
 <CAJNrnBV6s_GheHLV6xXON0VEUBSzf+-Qf_n9mEn_Xr8k=O0oDw@mail.gmail.com>
 <2e1e565c-163d-4f1b-8fd0-5f53946c6f70@spatialys.com>
 <CAJNrnBUoSt7yv8DsnQd85AVRvpj5W3E4+fRQNOAtpa=knuDdsQ@mail.gmail.com>
 <rmiwmlmziy7.fsf@s1.lexort.com>
 <CAJNrnBUc0w5Qs7OprShiFjHKjKOv5NcBrn_bEJJ8Mr3uhYkrhQ@mail.gmail.com>
Message-ID: <CAJNrnBVQQqvkdgZSwVc_Or3qa01HoAzau-75TQ9WQvp43VLGkQ@mail.gmail.com>

All,

I've cleaned up the code I have as best I can. I removed all the code
specific to our codebase and tried to remove a lot of extraneous settings.
This will still require that the user set a few environment variables that
will be specific to their system. Hopefully the comments I added make it
clear what path folders are required on your system.

Even sent me the following link: https://github.com/OSGeo/PROJ/pull/3510.
The following line from this update stuck out to me:

NAD83 to NAD83(2011) is no longer a null transformation, but actually
chains 4 successive NADCON5 grid based transformations

To me, this suggests that most NAD83 realization transformations were not
implemented until at least Proj4 9.2.0. It does seem like some form of the
NAD83 1986 to NAD83 HARN realization transformation was implemented prior
to this through the HPGN files in the  proj-datumgrid package. But, I
suspect this implementation is inferior to the implementation after Proj4
9.2.0.

So, I suspect Greg is on the right track when he told us to upgrade to the
latest version of Proj4. I'm still not clear which min version of GDAL
would is necessary for compatibility with Proj4 9.2.0+. If anyone knows off
the top of their head, please let me know.

But, I can do some research on this as well,

On Mon, Jul 15, 2024 at 1:30?PM David Klaus <dklaus at carlsonsw.com> wrote:

> All,
>
> If I understand correctly. Before we do anything else, we should try to
> rebuilt our GDAL solution such that it uses at least Proj4 9.2.0, do I have
> that right? Does anyone happen to know the minimum GDAL version compatible
> with Proj4 9.2.0?
>
> P.S. I am still working on the code example to repeat the issue I ran into.
>
> On Mon, Jul 15, 2024 at 1:03?PM Greg Troxel <gdt at lexort.com> wrote:
>
>> David Klaus <dklaus at carlsonsw.com> writes:
>>
>> > Thank you for the input. You don't happen to know where I can find
>> > documentation on these NADCON5 related changes?
>>
>> I would suggest reading the 9.2.0 release notes.
>> There is a link to a merged PR which has further discussion.
>>
>> The tl;dr; is that proj matches NGS tools.  Which is a pretty stunning
>> result.
>>
>>
>
> --
> David Klaus
> Carlson Software
>


-- 
David Klaus
Carlson Software

Disclaimer

The information contained in this communication from the sender is confidential. It is intended solely for use by the recipient and others authorized to receive it. If you are not the recipient, you are hereby notified that any disclosure, copying, distribution or taking action in relation of the contents of this information is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240715/6a1cdbe9/attachment-0001.htm>
-------------- next part --------------
#include "gdal_priv.h"
#include "ogr_api.h"
#include "ogr_spatialref.h"
#include "cpl_conv.h"

namespace{ // anonymous namespace for functions specific to CsGdalSettings

  // Error handler for redirecting error/debug messages to Output.
  void TestCplErrorHandlerRedirectToOutput(CPLErr cplErr, int errNumber, const char* msgSz){
    std::string cpl_err_str="CE_Unknown";
    switch(cplErr)
    {
    case CE_None:
      cpl_err_str="CE_None";
      break;
    case CE_Debug:
      cpl_err_str="CE_Debug";
      break;
    case CE_Warning:
      cpl_err_str="CE_Warning";
      break;
    case CE_Failure:
      cpl_err_str="CE_Failure";
      break;
    case CE_Fatal:
      cpl_err_str="CE_Fatal";
      break;
    default:
      break;
    }
    char test_message_sz[2056]={'\0'};
    std::snprintf(test_message_sz, 2055, "Error class: %s,\tError no: %d,\tMessage: %s\n", cpl_err_str.c_str(), errNumber, msgSz);
    OutputDebugString(test_message_sz); // Redirect the error message to the global stringstream
  }

  // GETENV_NOTE: _putenv_s() is used to ensure compatibility with getenv(). getenv() operates on environment variables loaded into _environ global (loaded at loads at "process startup.")
  //              SetEnvironmentVariable() affects the environment variables set for this process but does not change _environ. _putenv_s() updates _environ and ensures compatibility w/
  //              genenv().
  void TestSetEnvironmentVariable(const csString& varNameStr, const csString& varValueStr){
    SetEnvironmentVariable(varNameStr, varValueStr);
    _putenv_s(varNameStr, varValueStr); // (See: GETENV_NOTE)
  }

  // Returns path to folder containing all gdal data/proj-data and executables for the current GDAL build.
  const char* TestGetInstallationSharedDataFolder(){
    // Your code here.
    // return .... path to gdal data and proj-data and executables for your GDAL build
  }

  // Returns path to folder to the proj-data folder.
  const char* TestGetInstallationProj4DataFolder(){
    // Your code here.
    // return .... path to proj-data folder
  }

  // Second location that Proj4 can use to look up proj-data information. We use this second folder to
  // store information downloaded from the internet. These files aren't included in our installation.
  // The contents of the proj-datumgrid-1.7 are stored here.
  const char* TestGetDownloadableProj4DataFolder()
  {
    // Your code here
    // return .... path to second proj-data location (not strictly necessary)
  }
}

void TestGdal()
{
  // set environment variables
  std::string shared_data_root_install_path_str=TestGetInstallationSharedDataFolder();
  std::string proj4_data_install_path_str=TestGetInstallationProj4DataFolder();
  csString proj4_data_downloadable_path_str=TestGetDownloadableProj4DataFolder();
  CPLSetConfigOption("GDAL_DATA", shared_data_root_install_path_str.c_str());
  CPLSetConfigOption("GEOTIFF_CSV", shared_data_root_install_path_str.c_str());
  //CPLSetConfigOption("CURL_CA_BUNDLE", CsGdalSettings::GdalConfiguration::GetCurlCABundleFile());
  TestSetEnvironmentVariable("GDAL_DATA", shared_data_root_install_path_str.c_str()); // https://trac.osgeo.org/gdal/wiki/FAQInstallationAndBuilding#WhatisGDAL_DATAenvironmentvariable
  char proj_lib_paths_sz[MAX_PATH*3]={'\0'};
  std::snprintf(proj_lib_paths_sz, MAX_PATH*3-1, "%s;%s", proj4_data_install_path_str.c_str(), proj4_data_downloadable_path_str.Get());
  TestSetEnvironmentVariable("PROJ_LIB", proj_lib_paths_sz);
  CPLSetConfigOption("CPL_DEBUG", "ON");
  TestSetEnvironmentVariable("CPL_DEBUG", "ON"); // This may not be strictly necessary. Defensive coding.
  TestSetEnvironmentVariable("PROJ_DEBUG", "3");
  CPLSetErrorHandler(TestCplErrorHandlerRedirectToOutput); // Redirect debug/error messages to output

  // Register all GDAL drivers
  GDALAllRegister();

  //Generate coordinate transformation from NAD83 1986 to NAD83 HARN.
  OGRSpatialReference nad83_1986_srs;
  nad83_1986_srs.importFromEPSG(4269); // NAD83 1986
  OGRSpatialReference nad83_harn_srs;
  nad83_harn_srs.importFromEPSG(4152); // NAD83 HARN
  OGRCoordinateTransformation* nad83_1986_to_nad83_harn_ct=OGRCreateCoordinateTransformation(&nad83_1986_srs, &nad83_harn_srs);

  // Perform coordinate transformation
  if(nad83_1986_to_nad83_harn_ct!=nullptr){

    // Perform NAD83 1986 to NAD83 HARN for coordiantes in Philadelphia, PA
    double in_philadelphia_lon=-75.165147;
    double in_philadelphia_lat=39.952673;
    double in_philadelphia_elv=0.0;
    double out_philadelphia_lon=in_philadelphia_lon;
    double out_philadelphia_lat=in_philadelphia_lat;
    double out_philadelphia_elv=in_philadelphia_elv;
    nad83_1986_to_nad83_harn_ct->Transform(1, &out_philadelphia_lon, &out_philadelphia_lat, &out_philadelphia_elv); // Results in the following output: "Error class: CE_Debug,	Error no: 0,	Message: PROJ: Using coordinate operation Ballpark geographic offset from NAD83 to NAD83(HARN)"

    // Output results
    char results_sz[2056]={'\0'};
    snprintf(
      results_sz,
      2055,
      "\nIn:   (%.10f,%.10f,%.10f)"
      "\nOut:  (%.10f,%.10f,%.10f)",
      in_philadelphia_lon, in_philadelphia_lat, in_philadelphia_elv,
      out_philadelphia_lon, out_philadelphia_lat, out_philadelphia_elv
    );
    OutputDebugString(results_sz);
    
    // cleanup
    OGRCoordinateTransformation::DestroyCT(nad83_1986_to_nad83_harn_ct);
  }
  
  // cleanup
  CPLFreeConfig();
}

From realoption11 at gmail.com  Mon Jul 15 18:00:56 2024
From: realoption11 at gmail.com (Open Land LLC)
Date: Mon, 15 Jul 2024 21:00:56 -0400
Subject: [gdal-dev] How to add labels to DEM contour lines
Message-ID: <CAAzaJGdZsa7t0R0TFwYydj5bbRW3Unvbm421=wbYHsN1TBeANA@mail.gmail.com>

Hi everyone, this is my first post. I've also posted this to
https://stackoverflow.com/questions/78751101/labelling-contour-lines-with-ogr-style

I'm trying to add labels to DEM contour lines.

I'm working with GDAL 3.6.2. , which I installed using Anaconda . I have
some DEM data from USGS which I wrote as a contour map to a KML file using:

    gdal_contour small.tif /home/ubuntu/node/geotools/contour.kml -i 3.0 -f
KML -a ELEVATION

When I open contour.kml in vim, I can see that its made up of features like:

<Placemark>
<Style><LineStyle><color>ff0000ff</color></LineStyle><PolyStyle><fill>0</fill></PolyStyle></Style>
<ExtendedData><SchemaData schemaUrl="#contour">
<SimpleData name="ID">39</SimpleData>
<SimpleData name="ELEVATION">525</SimpleData>
</SchemaData></ExtendedData>
<LineString><coordinates>-89.2626638689733,46.1525006611575
-89.262663868958,46.1525469572921 -89.2627325352002,46.152622208059
-89.2628251277396,46.1526266807347 -89.2629177202847,46.1526141000471
-89.2629982621728,46.1525469573863
-89.2629982621882,46.1525006612516</coordinates></LineString>
</Placemark>

Clearly there is a style component available , but I'm not sure how to work
with it to add elevation labels or custom colours. My suspicion is that
OGR_STYLE is used to do things like this (
https://github.com/OSGeo/gdal/issues/835)(https://gdal.org/user/ogr_sql_dialect.html#ogr-style
), but I can't find any examples. How can this be done?

Thank you very much,

KC
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240715/ac571453/attachment.htm>

From mrvelle at gmail.com  Tue Jul 16 00:04:26 2024
From: mrvelle at gmail.com (Thomas Larsen Wessel)
Date: Tue, 16 Jul 2024 09:04:26 +0200
Subject: [gdal-dev] Documentation/explanation on repository structure
In-Reply-To: <ab168bda-9057-4732-a631-608b4a78c257@spatialys.com>
References: <CAKKm1vG_OHXgQUCGpKMYdzENNfkcE0QrrHxTZnOS2p2YO2KPUA@mail.gmail.com>
 <ab168bda-9057-4732-a631-608b4a78c257@spatialys.com>
Message-ID: <CAKKm1vFWKnBYfEBsHHWFbXwktGqG=K11xRAEOYVNOdDHmgUztg@mail.gmail.com>

Looks great :) Thanks.

On Mon, Jul 15, 2024 at 7:05?PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> hopefully this proposed improvement of the developer doc
> https://github.com/OSGeo/gdal/pull/10427 should answer your questions
>
> Even
>
> Le 14/07/2024 ? 21:57, Thomas Larsen Wessel via gdal-dev a ?crit :
> > It's hard for me to understand the structure of the repository. Is
> > there any documentation on this?
> >
> > For instance. I see python scripts (able to be run from command line,
> > not just modules/packages) in a few places:
> >
> > ./scripts
> > ./swig/python/gdal-utils/scripts
> > ./swig/python/gdal-utils/osgeo_utils
> > ./swig/python/gdal-utils/osgeo_utils/auxiliary
> > ./swig/python/gdal-utils/osgeo_utils/samples
> >
> > I don't see/understand the structure. But maybe, with some help, I could?
> >
> > To be concrete, lets consider validate_gpkg.py. Why is it in
> > "samples", and not in any of the others? Why does it belong in that
> > folder?
> >
> > Some scripts seem to be in more than one place (though not identical,
> > at least not in formatting) e.g.:
> >  - ./swig/python/gdal-utils/scripts/gdal2tiles.py
> >  - ./swig/python/gdal-utils/osgeo_utils/gdal2tiles.py
> >
> > Is there any documentation that will help me understand the structure,
> > including the questions above?
> >
> > Sincerely, Thomas
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240716/8633da0a/attachment.htm>

From j1 at jimenezshaw.com  Tue Jul 16 02:09:06 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Tue, 16 Jul 2024 11:09:06 +0200
Subject: [gdal-dev] NEWS.md for last release
Message-ID: <CADRrdKuX29CDzhdLF-akPo+1jeu2Ju=CWbpVUjpxiJfd7+raZQ@mail.gmail.com>

Hi

I noticed that https://github.com/OSGeo/gdal/blob/master/NEWS.md is telling
about 3.9.0, while the last release is 3.9.1

Is that intentional?

Cheers,
Javier
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240716/b9bf1acf/attachment.htm>

From lnicola at dend.ro  Tue Jul 16 02:12:23 2024
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Tue, 16 Jul 2024 12:12:23 +0300
Subject: [gdal-dev] NEWS.md for last release
In-Reply-To: <CADRrdKuX29CDzhdLF-akPo+1jeu2Ju=CWbpVUjpxiJfd7+raZQ@mail.gmail.com>
References: <CADRrdKuX29CDzhdLF-akPo+1jeu2Ju=CWbpVUjpxiJfd7+raZQ@mail.gmail.com>
Message-ID: <b9b75492-6f15-406d-8f27-48c49863f502@betaapp.fastmail.com>

Try https://github.com/OSGeo/gdal/blob/release/3.9/NEWS.md, I think the patch release changes either get folded into the next minor changelogs or don't get included at all. But the release branch always has the full set of changes.

Laurentiu

On Tue, Jul 16, 2024, at 12:09, Javier Jimenez Shaw via gdal-dev wrote:
> Hi
> 
> I noticed that https://github.com/OSGeo/gdal/blob/master/NEWS.md is telling about 3.9.0, while the last release is 3.9.1
> 
> Is that intentional?
> 
> Cheers,
> Javier
> 
> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240716/b087c5f6/attachment.htm>

From j1 at jimenezshaw.com  Wed Jul 17 00:49:24 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 17 Jul 2024 09:49:24 +0200
Subject: [gdal-dev] NEWS.md for last release
In-Reply-To: <b9b75492-6f15-406d-8f27-48c49863f502@betaapp.fastmail.com>
References: <CADRrdKuX29CDzhdLF-akPo+1jeu2Ju=CWbpVUjpxiJfd7+raZQ@mail.gmail.com>
 <b9b75492-6f15-406d-8f27-48c49863f502@betaapp.fastmail.com>
Message-ID: <CADRrdKu7FVCr9QXfzUyd_tnFwW5c=DEqw5F-7VAYr6xvbFGPVQ@mail.gmail.com>

I find it strange. There is a long list of news ... but it covers only
things that were added exactly in the x.y.0 releases. All the changes that
happened in "bugfix releases" (that is x.y.z for z>0) is only on that
branch.
You can compare these two pages
https://github.com/OSGeo/gdal/blob/release/3.8/NEWS.md
https://github.com/OSGeo/gdal/blob/release/3.9/NEWS.md

However most of the changes are done in master and some back-ported to the
current release branch. That is, if I do a PR in master today that is not
breaking any API, it will be probably backported to 3.9, and released in
3.9.2. It will appear in the news for 3.9... but it will not appear in the
long list of news for 3.10 and later releases.
Is that what is happening? If yes, do we want to change that?

Javier

On Tue, 16 Jul 2024 at 11:12, Lauren?iu Nicola <lnicola at dend.ro> wrote:

> Try https://github.com/OSGeo/gdal/blob/release/3.9/NEWS.md, I think the
> patch release changes either get folded into the next minor changelogs or
> don't get included at all. But the release branch always has the full set
> of changes.
>
> Laurentiu
>
> On Tue, Jul 16, 2024, at 12:09, Javier Jimenez Shaw via gdal-dev wrote:
>
> Hi
>
> I noticed that https://github.com/OSGeo/gdal/blob/master/NEWS.md is
> telling about 3.9.0, while the last release is 3.9.1
>
> Is that intentional?
>
> Cheers,
> Javier
>
> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240717/a03944e2/attachment.htm>

From craig.destigter at koordinates.com  Wed Jul 17 00:59:12 2024
From: craig.destigter at koordinates.com (Craig de Stigter)
Date: Wed, 17 Jul 2024 19:59:12 +1200
Subject: [gdal-dev] Adding external overviews for a VRT whose source tiles
 already have overviews
Message-ID: <CAF1M8pdx-jH6wLFL4FXZNiPvcrXr3he381wG92skAHi0Y3Mr6Q@mail.gmail.com>

Hi folks

I have a VRT which is a mosaic of several thousand s3-stored COGs. Doing
any kind of low-res downsampling from this VRT causes very slow performance
and high memory usage because it causes requests to all the individual
source tiles.

I'd like to add external overviews to the VRT via a `.vrt.ovr` file ? and
it appears I can do this with gdaladdo.

However, a naive call to gdaladdo seems to ignore the overviews on all the
source files, rendering the overviews by downloading every pixel from the
full-size sources. This is a nonstarter in this environment where the full
set of source tiles is enormous and remote.

So, two questions:
1. Is there a way to force gdaladdo to use the COG overviews from the
source VRT's source tiles?
2. If not, are there any other ways to generate a `.vrt.ovr` file which
would use the source overviews? I have tried using gdal_translate to
produce a .tif of the right pixel size and then renaming it to `.vrt.ovr`,
but it doesn't seem to be used by GDAL ? so I guess there's more to `ovr`
files than just TIF files with the right name!

-- 
Regards,
Craig

Platform Engineer
Koordinates

+64 21 256 9488 <+64%2021%20256%209488> / koordinates.com / @koordinates
<https://twitter.com/koordinates>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240717/1389aeaf/attachment.htm>

From lnicola at dend.ro  Wed Jul 17 01:04:14 2024
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Wed, 17 Jul 2024 11:04:14 +0300
Subject: [gdal-dev] NEWS.md for last release
In-Reply-To: <CADRrdKu7FVCr9QXfzUyd_tnFwW5c=DEqw5F-7VAYr6xvbFGPVQ@mail.gmail.com>
References: <CADRrdKuX29CDzhdLF-akPo+1jeu2Ju=CWbpVUjpxiJfd7+raZQ@mail.gmail.com>
 <b9b75492-6f15-406d-8f27-48c49863f502@betaapp.fastmail.com>
 <CADRrdKu7FVCr9QXfzUyd_tnFwW5c=DEqw5F-7VAYr6xvbFGPVQ@mail.gmail.com>
Message-ID: <f99da9d0-fb53-405f-86aa-6cde24d3a6fd@betaapp.fastmail.com>



On Wed, Jul 17, 2024, at 10:49, Javier Jimenez Shaw wrote:
> I find it strange. There is a long list of news ... but it covers only things that were added exactly in the x.y.0 releases. All the changes that happened in "bugfix releases" (that is x.y.z for z>0) is only on that branch.
> You can compare these two pages
> https://github.com/OSGeo/gdal/blob/release/3.8/NEWS.md
> https://github.com/OSGeo/gdal/blob/release/3.9/NEWS.md
> 
> However most of the changes are done in master and some back-ported to the current release branch. That is, if I do a PR in master today that is not breaking any API, it will be probably backported to 3.9, and released in 3.9.2. It will appear in the news for 3.9... but it will not appear in the long list of news for 3.10 and later releases.
Right, I thought it would appear in the 3.10 release notes, but you proved it won't.

> Is that what is happening? If yes, do we want to change that?
Well, I don't know. It's good to keep the release notes to a reasonable size (otherwise nobody will read them), and the GDAL changelog is pretty large already, but I'll defer to the maintainers on this one.

What I can say is that GitHub used to have trouble rendering large Markdown documents, and GDAL is larger than that one already: https://github.com/rust-lang/rust/issues/101714. But it seems fixed now, I suppose they've increased the limit. Still, at some point we'll probably have to split it into NEWS-1.x.md, NEWS-2.x.md etc.

Laurentiu
> On Tue, 16 Jul 2024 at 11:12, Lauren?iu Nicola <lnicola at dend.ro> wrote:
>> __
>> Try https://github.com/OSGeo/gdal/blob/release/3.9/NEWS.md, I think the patch release changes either get folded into the next minor changelogs or don't get included at all. But the release branch always has the full set of changes.
>> 
>> Laurentiu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240717/30db9dd9/attachment.htm>

From a.pau at creaf.cat  Wed Jul 17 08:59:31 2024
From: a.pau at creaf.cat (Abel Pau)
Date: Wed, 17 Jul 2024 15:59:31 +0000
Subject: [gdal-dev] Problems compiling the project
In-Reply-To: <PAXPR07MB777502A2671370695DCE0217FAA32@PAXPR07MB7775.eurprd07.prod.outlook.com>
References: <PAXPR07MB777502A2671370695DCE0217FAA32@PAXPR07MB7775.eurprd07.prod.outlook.com>
Message-ID: <PAXPR07MB7775398BEB725AAE362C4071FAA32@PAXPR07MB7775.eurprd07.prod.outlook.com>

Hi,
I'm trying to compile the project using the two lines that always have worked:
cmake -B build -S . -DCMAKE_TOOLCHAIN_FILE=C:/dev/vcpkg/vcpkg/scripts/buildsystems/vcpkg.cmake -DCMAKE_BUILD_TYPE=Debug
cmake --build build

Before starting I deleted the build folder.
The first line is ok and creates the projects... but the second one gives me some red errors.

I'm using windows and Visual Studio 2019

Is there something I'm missing?

Thanks!

Generating Code...
  shapelib.vcxproj -> D:\GitHub-repository\gdal\build\ogr\ogrsf_frmts\shape\shapelib.dir\Debug\shapelib.lib
  Building Custom Rule D:/GitHub-repository/gdal/CMakeLists.txt
poppler.lib(Error.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2
' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(Error.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match
value 'MDd_DynamicDebug' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(Object.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '
2' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(Object.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't matc
h value 'MDd_DynamicDebug' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(Catalog.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value
'2' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(Catalog.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't mat
ch value 'MDd_DynamicDebug' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(XRef.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2'
in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(XRef.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match
value 'MDd_DynamicDebug' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(OptionalContent.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't matc
h value '2' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]


Abel Pau Garcia
[https://www.creaf.cat/sites/default/files/logo-creaf-small.jpg]<https://www.creaf.cat/>
GIS developer
a.pau at creaf.uab.cat <mailto:a.pau at creaf.uab.cat>
[https://www.creaf.cat/sites/default/files/cap_0.png]
Let's chat on Teams! <https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
Tel. +34 934814277
[https://www.creaf.cat/sites/default/files/x_30.png]<https://twitter.com/CREAF_ecologia>[https://www.creaf.cat/sites/default/files/linkedin_30.png]<https://www.linkedin.com/company/creaf/>[https://www.creaf.cat/sites/default/files/youtube_30.png]<https://www.youtube.com/c/creafecologia>[https://www.creaf.cat/sites/default/files/instagram_30.png]<https://www.instagram.com/CREAF_ecologia/>
www.creaf.cat <http://www.creaf.cat> | http://blog.creaf.cat
CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona) <https://www.openstreetmap.org/way/123379060>

Pol?tica de privacitat <https://www.creaf.cat/ca/politica-de-privacitat>
[https://www.creaf.cat/sites/default/files/corner_right_0.png]
Abans d'imprimir aquest missatge electr?nic penseu en el medi ambient.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240717/50e1f798/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 10974 bytes
Desc: image001.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240717/50e1f798/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 154 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240717/50e1f798/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 3946 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240717/50e1f798/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 3678 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240717/50e1f798/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 3646 bytes
Desc: image005.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240717/50e1f798/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 4056 bytes
Desc: image006.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240717/50e1f798/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.png
Type: image/png
Size: 640 bytes
Desc: image007.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240717/50e1f798/attachment-0011.png>

From craig.destigter at koordinates.com  Wed Jul 17 14:11:56 2024
From: craig.destigter at koordinates.com (Craig de Stigter)
Date: Thu, 18 Jul 2024 09:11:56 +1200
Subject: [gdal-dev] Adding external overviews for a VRT whose source
 tiles already have overviews
In-Reply-To: <CAF1M8pdx-jH6wLFL4FXZNiPvcrXr3he381wG92skAHi0Y3Mr6Q@mail.gmail.com>
References: <CAF1M8pdx-jH6wLFL4FXZNiPvcrXr3he381wG92skAHi0Y3Mr6Q@mail.gmail.com>
Message-ID: <CAF1M8pfZyTSm50vhUiUK9D8MDLn2VeFDUuFCw=TfyLrM2pwARQ@mail.gmail.com>

This was my mistake. I had set `GDAL_DISABLE_READDIR_ON_OPEN=EMPTY_DIR`,
which was preventing GDAL from noticing the .vrt.ovr file I had generated.

So, the answer is that the .vrt.ovr is just a TIF file, and it can be
generated via gdal_translate and additional overviews added to it via
gdaladdo ?

Thanks :)

On Wed, 17 Jul 2024 at 19:59, Craig de Stigter <
craig.destigter at koordinates.com> wrote:

> Hi folks
>
> I have a VRT which is a mosaic of several thousand s3-stored COGs. Doing
> any kind of low-res downsampling from this VRT causes very slow performance
> and high memory usage because it causes requests to all the individual
> source tiles.
>
> I'd like to add external overviews to the VRT via a `.vrt.ovr` file ? and
> it appears I can do this with gdaladdo.
>
> However, a naive call to gdaladdo seems to ignore the overviews on all the
> source files, rendering the overviews by downloading every pixel from the
> full-size sources. This is a nonstarter in this environment where the full
> set of source tiles is enormous and remote.
>
> So, two questions:
> 1. Is there a way to force gdaladdo to use the COG overviews from the
> source VRT's source tiles?
> 2. If not, are there any other ways to generate a `.vrt.ovr` file which
> would use the source overviews? I have tried using gdal_translate to
> produce a .tif of the right pixel size and then renaming it to `.vrt.ovr`,
> but it doesn't seem to be used by GDAL ? so I guess there's more to `ovr`
> files than just TIF files with the right name!
>
> --
> Regards,
> Craig
>
> Platform Engineer
> Koordinates
>
> +64 21 256 9488 <+64%2021%20256%209488> / koordinates.com / @koordinates
> <https://twitter.com/koordinates>
>


-- 
Regards,
Craig

Platform Engineer
Koordinates

+64 21 256 9488 <+64%2021%20256%209488> / koordinates.com / @koordinates
<https://twitter.com/koordinates>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240718/2831a2ba/attachment.htm>

From even.rouault at spatialys.com  Thu Jul 18 03:16:44 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 18 Jul 2024 12:16:44 +0200
Subject: [gdal-dev] Problems compiling the project
In-Reply-To: <PAXPR07MB7775398BEB725AAE362C4071FAA32@PAXPR07MB7775.eurprd07.prod.outlook.com>
References: <PAXPR07MB777502A2671370695DCE0217FAA32@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <PAXPR07MB7775398BEB725AAE362C4071FAA32@PAXPR07MB7775.eurprd07.prod.outlook.com>
Message-ID: <40b818c3-04b6-4399-a09f-697685ed6fbc@spatialys.com>

Hi Abel,

the error message indicates that the build is trying to link a release 
version of poppler.lib, whereas your build is a debug one.

For multi-config generators like Visual Studio builds, I'm not sure how 
-DCMAKE_BUILD_TYPE=Debug is effective. You perhaps need to do the 
following instead:

cmake --build build --config Debug

Even

Le 17/07/2024 ? 17:59, Abel Pau via gdal-dev a ?crit?:
>
> Hi,
>
> I?m trying to compile the project using the two lines that always have 
> worked:
>
> cmake -B build -S . 
> -DCMAKE_TOOLCHAIN_FILE=C:/dev/vcpkg/vcpkg/scripts/buildsystems/vcpkg.cmake 
> -DCMAKE_BUILD_TYPE=Debug
>
> cmake --build build
>
> Before starting I deleted the build folder.
>
> The first line is ok and creates the projects... but the second one 
> gives me some red errors.
>
> I?m using windows and Visual Studio 2019
>
> Is there something I?m missing?
>
> Thanks!
>
> Generating Code...
>
> ? shapelib.vcxproj -> 
> D:\GitHub-repository\gdal\build\ogr\ogrsf_frmts\shape\shapelib.dir\Debug\shapelib.lib
>
> ? Building Custom Rule D:/GitHub-repository/gdal/CMakeLists.txt
>
> poppler.lib(Error.obj) : error LNK2038: mismatch detected for 
> '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2
>
> ' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
>
> poppler.lib(Error.obj) : error LNK2038: mismatch detected for 
> 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match
>
> value 'MDd_DynamicDebug' in cpl_alibaba_oss.obj 
> [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
>
> poppler.lib(Object.obj) : error LNK2038: mismatch detected for 
> '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '
>
> 2' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
>
> poppler.lib(Object.obj) : error LNK2038: mismatch detected for 
> 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't matc
>
> h value 'MDd_DynamicDebug' in cpl_alibaba_oss.obj 
> [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
>
> poppler.lib(Catalog.obj) : error LNK2038: mismatch detected for 
> '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value
>
> '2' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
>
> poppler.lib(Catalog.obj) : error LNK2038: mismatch detected for 
> 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't mat
>
> ch value 'MDd_DynamicDebug' in cpl_alibaba_oss.obj 
> [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
>
> poppler.lib(XRef.obj) : error LNK2038: mismatch detected for 
> '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2'
>
> in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
>
> poppler.lib(XRef.obj) : error LNK2038: mismatch detected for 
> 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match
>
> value 'MDd_DynamicDebug' in cpl_alibaba_oss.obj 
> [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
>
> poppler.lib(OptionalContent.obj) : error LNK2038: mismatch detected 
> for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't matc
>
> h value '2' in cpl_alibaba_oss.obj 
> [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
>
> *Abel Pau Garcia*
>
> 	
>
> https://www.creaf.cat/sites/default/files/logo-creaf-small.jpg 
> <https://www.creaf.cat/>
>
> *GIS developer***
>
> *a.pau at creaf.uab.cat*<mailto:a.pau at creaf.uab.cat>
>
> 	
>
> https://www.creaf.cat/sites/default/files/cap_0.png
>
> *Let's chat on 
> Teams!*<https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
>
> *Tel. +34 934814277__*
>
>
> https://www.creaf.cat/sites/default/files/x_30.png 
> <https://twitter.com/CREAF_ecologia>https://www.creaf.cat/sites/default/files/linkedin_30.png 
> <https://www.linkedin.com/company/creaf/>https://www.creaf.cat/sites/default/files/youtube_30.png 
> <https://www.youtube.com/c/creafecologia>https://www.creaf.cat/sites/default/files/instagram_30.png 
> <https://www.instagram.com/CREAF_ecologia/>
> *www.creaf.cat*<http://www.creaf.cat>*| 
> **http://blog.creaf.cat*<http://blog.creaf.cat>
>
> CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona) 
> <https://www.openstreetmap.org/way/123379060>
>
> *Pol?tica de privacitat*<https://www.creaf.cat/ca/politica-de-privacitat>
>
> 	
>
> https://www.creaf.cat/sites/default/files/corner_right_0.png
>
> Abans d'imprimir aquest missatge electr?nic penseu en el medi ambient.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240718/7db5955a/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 10974 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240718/7db5955a/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 154 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240718/7db5955a/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 3946 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240718/7db5955a/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 3678 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240718/7db5955a/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 3646 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240718/7db5955a/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 4056 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240718/7db5955a/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.png
Type: image/png
Size: 640 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240718/7db5955a/attachment-0011.png>

From even.rouault at spatialys.com  Thu Jul 18 03:20:49 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 18 Jul 2024 12:20:49 +0200
Subject: [gdal-dev] NEWS.md for last release
In-Reply-To: <CADRrdKu7FVCr9QXfzUyd_tnFwW5c=DEqw5F-7VAYr6xvbFGPVQ@mail.gmail.com>
References: <CADRrdKuX29CDzhdLF-akPo+1jeu2Ju=CWbpVUjpxiJfd7+raZQ@mail.gmail.com>
 <b9b75492-6f15-406d-8f27-48c49863f502@betaapp.fastmail.com>
 <CADRrdKu7FVCr9QXfzUyd_tnFwW5c=DEqw5F-7VAYr6xvbFGPVQ@mail.gmail.com>
Message-ID: <b977061f-813d-4959-adef-4f025a01b99a@spatialys.com>

Hi Javier,

Just a logical consequence of how the release process works. Bug fixes 
releases are done from the release/3.9 branch, so the NEWS.md file for a 
3.9.x release is edited there, and not in master. And we don't forward 
port the changes of the NEWS.md from release/* branches to master. There 
are pros & cons in doing that:
- pros: having the full list of changes of all releases
- cons: having the full list of changes of all releases ! :-)

Even

Le 17/07/2024 ? 09:49, Javier Jimenez Shaw via gdal-dev a ?crit?:
> I find it strange. There is a long list of news ... but it covers only 
> things that were added exactly in the x.y.0 releases. All the changes 
> that happened in "bugfix releases" (that is x.y.z for z>0) is only on 
> that branch.
> You can compare these two pages
> https://github.com/OSGeo/gdal/blob/release/3.8/NEWS.md
> https://github.com/OSGeo/gdal/blob/release/3.9/NEWS.md
>
> However most of the changes are done in master and some back-ported to 
> the current release branch. That is, if I do a PR in master today that 
> is not breaking any API, it will be probably backported to 3.9, and 
> released in 3.9.2. It will appear in the news for 3.9... but it will 
> not appear in the long list of news for 3.10 and later releases.
> Is that what is happening? If yes, do we want to change that?
>
> Javier
>
> On Tue, 16 Jul 2024 at 11:12, Lauren?iu Nicola <lnicola at dend.ro> wrote:
>
>     Try https://github.com/OSGeo/gdal/blob/release/3.9/NEWS.md, I
>     think the patch release changes either get folded into the next
>     minor changelogs or don't get included at all. But the release
>     branch always has the full set of changes.
>
>     Laurentiu
>
>     On Tue, Jul 16, 2024, at 12:09, Javier Jimenez Shaw via gdal-dev
>     wrote:
>>     Hi
>>
>>     I noticed that https://github.com/OSGeo/gdal/blob/master/NEWS.md
>>     is telling about 3.9.0, while the last release is 3.9.1
>>
>>     Is that intentional?
>>
>>     Cheers,
>>     Javier
>>
>>     .___ ._ ..._ .. . ._.? .___ .. __ . _. . __..? ... .... ._ .__
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org
>>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240718/83e93beb/attachment.htm>

From realoption11 at gmail.com  Thu Jul 18 08:50:26 2024
From: realoption11 at gmail.com (Open Land LLC)
Date: Thu, 18 Jul 2024 11:50:26 -0400
Subject: [gdal-dev] Fwd: How to add labels to DEM contour lines
In-Reply-To: <CAAzaJGdZsa7t0R0TFwYydj5bbRW3Unvbm421=wbYHsN1TBeANA@mail.gmail.com>
References: <CAAzaJGdZsa7t0R0TFwYydj5bbRW3Unvbm421=wbYHsN1TBeANA@mail.gmail.com>
Message-ID: <CAAzaJGf=2d+C6XXKDC_XiZ-2gCgum8LeKEjg7bran_p42-p1eA@mail.gmail.com>

Hi Everyone,

I just wanted to ask - Is this the right place to post questions? I put in
a post several days ago, and just want to make sure I'm putting it in the
right place, because I have not posted to this group before. Thank you - KC

---------- Forwarded message ---------
From: Open Land LLC <realoption11 at gmail.com>
Date: Mon, Jul 15, 2024 at 9:00?PM
Subject: How to add labels to DEM contour lines
To: <gdal-dev at lists.osgeo.org>


Hi everyone, this is my first post. I've also posted this to
https://stackoverflow.com/questions/78751101/labelling-contour-lines-with-ogr-style

I'm trying to add labels to DEM contour lines.

I'm working with GDAL 3.6.2. , which I installed using Anaconda . I have
some DEM data from USGS which I wrote as a contour map to a KML file using:

    gdal_contour small.tif /home/ubuntu/node/geotools/contour.kml -i 3.0 -f
KML -a ELEVATION

When I open contour.kml in vim, I can see that its made up of features like:

<Placemark>
<Style><LineStyle><color>ff0000ff</color></LineStyle><PolyStyle><fill>0</fill></PolyStyle></Style>
<ExtendedData><SchemaData schemaUrl="#contour">
<SimpleData name="ID">39</SimpleData>
<SimpleData name="ELEVATION">525</SimpleData>
</SchemaData></ExtendedData>
<LineString><coordinates>-89.2626638689733,46.1525006611575
-89.262663868958,46.1525469572921 -89.2627325352002,46.152622208059
-89.2628251277396,46.1526266807347 -89.2629177202847,46.1526141000471
-89.2629982621728,46.1525469573863
-89.2629982621882,46.1525006612516</coordinates></LineString>
</Placemark>

Clearly there is a style component available , but I'm not sure how to work
with it to add elevation labels or custom colours. My suspicion is that
OGR_STYLE is used to do things like this (
https://github.com/OSGeo/gdal/issues/835)(https://gdal.org/user/ogr_sql_dialect.html#ogr-style
), but I can't find any examples. How can this be done?

Thank you very much,

KC
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240718/a651ed13/attachment.htm>

From rupestre.campos at gmail.com  Thu Jul 18 09:22:11 2024
From: rupestre.campos at gmail.com (=?UTF-8?Q?Cain=C3=A3_K=2E_Campos?=)
Date: Thu, 18 Jul 2024 13:22:11 -0300
Subject: [gdal-dev] Fwd: How to add labels to DEM contour lines
In-Reply-To: <CAAzaJGf=2d+C6XXKDC_XiZ-2gCgum8LeKEjg7bran_p42-p1eA@mail.gmail.com>
References: <CAAzaJGdZsa7t0R0TFwYydj5bbRW3Unvbm421=wbYHsN1TBeANA@mail.gmail.com>
 <CAAzaJGf=2d+C6XXKDC_XiZ-2gCgum8LeKEjg7bran_p42-p1eA@mail.gmail.com>
Message-ID: <CAAvXUUrZ-39QNuGQ02JeGdfr3w8Gt1MXq1J0PpYCMnBKDr8cDw@mail.gmail.com>

Hi  KC,

I believe it is the right place for your question, maybe no one could
really check it out.
While I have not relied on OGR_STYLE on the command line, I have read a lot
of practical examples looking for how to create a geoPDF a few days ago.
So check out this guides and try to change only the format from PDF to KML

https://spatialthoughts.com/2015/10/25/geopdf-gdal/
http://latuviitta.org/documents/Geospatial_PDF_maps_from_OSM_with_GDAL.pdf

For me what worked for PDF was to use feature.SetStyleString(style_string)
and add to output data source using python, may work for KML too below a
minimal example.
I created a KMZ on the project but I used another library for it, not gdal
itself but I will provide it here also if it helps .

Also I noticed that the PDF Label is not showing up on the result as I
expected neither I used the label on the KML so cannot help you on this for
now, just the styling and popup on the kml, but if I get any progress I
report to you.

My Best,
Cain? K. Campos

import json
from osgeo import ogr, osr, gdal
import matplotlib.colors as mcolors
import simplekml

def get_style_rules():
return {
"hidrografia": {"color": "blue", "fillColor": "blue", "fillOpacity": 0.6,
"opacity":0.5, "weight":0},
"area_imovel": {"color": "yellow", "fillColor": "white", "fillOpacity":0.01,
"weight":3, "opacity":0.8},
"apps": {"color": "red", "fillColor": "red", "fillOpacity": 0.3, "opacity":
0.5, "weight":0}
}

def color_name_to_hex_with_alpha(color_name, alpha=1.0, invert_alpha=False,
bgr=False):
"""
Convert a color name to a hex value with alpha (transparency).
Alpha should be a float between 0.0 (fully transparent) and 1.0 (fully
opaque).
"""
try:
# Get the hex color code without the '#' and convert to RGBA
hex_color = mcolors.to_hex(color_name)[1:]

# Scale alpha to 255 and convert to hex
alpha_hex = f"{int(alpha * 255):02X}"
if bgr:
hex_color = f"{hex_color[-2:]}{hex_color[2:4]}{hex_color[:2]}"
if invert_alpha:
return f"#{alpha_hex}{hex_color}"
return f"#{hex_color}{alpha_hex}"
except ValueError:
return "#000000FF" # Default to black with full opacity if color name not
found

def create_styled_layer_from_geojson(geojson_data, output_pdf):
# Create a temporary file to store the GeoJSON data
temp_geojson_file = '/tmp/temp_geojson.json'
with open(temp_geojson_file, 'w') as f:
json.dump(geojson_data, f)

# Open the GeoJSON file with OGR
driver = ogr.GetDriverByName('GeoJSON')
dataSource = driver.Open(temp_geojson_file, 0) # 0 means read-only

if dataSource is None:
print('Could not open file')
return

# Create a spatial reference
spatialRef = osr.SpatialReference()
spatialRef.ImportFromEPSG(4326) # Assuming WGS84

# Create the output PDF driver
driver_pdf = gdal.GetDriverByName('PDF')
if driver_pdf is None:
print('PDF driver is not available.')
return

# Create the PDF file
output_ds = driver_pdf.Create(output_pdf, 0, 0, 0, gdal.GDT_Unknown)

if output_ds is None:
print('Could not create PDF file')
return

output_layer = output_ds.CreateLayer('layer', srs=spatialRef, geom_type=ogr.
wkbUnknown)
in_lyr = dataSource.GetLayerByIndex(0)
lyr_def = in_lyr.GetLayerDefn ()
for i in range(lyr_def.GetFieldCount()):
output_layer.CreateField ( lyr_def.GetFieldDefn(i) )

# Iterate through features and style them
for feature in dataSource.GetLayer():
geom = feature.GetGeometryRef()
cod_tema = feature.GetField('cod_tema')
car_code = feature.GetField('cod_imovel')

style = get_style_cod_theme(cod_tema)
fillOpacity = style.get('fillOpacity', 0.5)
# Apply the style to the feature
color = color_name_to_hex_with_alpha(style['color'], style.get("opacity",
0.5))
fillColor = color_name_to_hex_with_alpha(style.get('fillColor', 'none'),
fillOpacity)
line_width = style.get("weight", 1)
# Create a new feature with the same geometry
new_feature = ogr.Feature(output_layer.GetLayerDefn())
new_feature.SetGeometry(geom.Clone())

# Set the style of the new feature
style_string = f"PEN(c:{color},w:{line_width}mm)"
if fillColor != 'none':
style_string += f";BRUSH(fc:{fillColor})"
style_string += f';LABEL(f:"Arial, Helvetica", s:26pt, t:"{car_code}")'
new_feature.SetStyleString(style_string)

# Add all attributes to the feature
for i in range(feature.GetFieldCount()):
field_name = feature.GetFieldDefnRef(i).GetName()
field_value = feature.GetField(field_name)
new_feature.SetField(field_name, field_value)

output_layer.CreateFeature(new_feature)

# Destroy the feature to free resources
new_feature = None

# Close the data sources
dataSource = None
output_ds = None

def create_kmz_from_geojson(geojson_data, output_kmz):
# Create a KML object
kml = simplekml.Kml()

# Iterate through features and style them
for feature in geojson_data['features']:
cod_tema = feature['properties'].get('cod_tema')
style = get_style_cod_theme(cod_tema)

# Extract geometry and properties
geom = feature['geometry']
properties = feature['properties']

# Create a KML placemark for the feature
placemark = kml.newmultigeometry(name=cod_tema)
for coords in geom['coordinates']:
if geom['type'] == 'Polygon':
placemark.newpolygon(outerboundaryis=coords)
elif geom['type'] == 'MultiPolygon':
for polygon_coords in coords:
placemark.newpolygon(outerboundaryis=polygon_coords)

# Apply style to the placemark
color = color_name_to_hex_with_alpha(
style['color'],
style.get("opacity",0.5),
invert_alpha=True,
bgr=True
).upper()

fillColor = style.get('fillColor', 'none')
if fillColor != 'none':
fillColor = color_name_to_hex_with_alpha(
fillColor,
style.get("fillOpacity",0.5),
invert_alpha=True,
bgr=True
).upper()

placemark.style.linestyle.color = color.replace("#","")
placemark.style.linestyle.width = style.get('weight', 1)
if fillColor != 'none':
placemark.style.polystyle.color = fillColor.replace("#","")

# Add attributes as description
description = "<br>".join(f"<b>{key}</b>: {value}" for key, value in
properties.items())
placemark.description = description

# Save KML to a KMZ file
kml.savekmz(output_kmz)


On Thu, Jul 18, 2024 at 12:51?PM Open Land LLC via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi Everyone,
>
> I just wanted to ask - Is this the right place to post questions? I put in
> a post several days ago, and just want to make sure I'm putting it in the
> right place, because I have not posted to this group before. Thank you - KC
>
> ---------- Forwarded message ---------
> From: Open Land LLC <realoption11 at gmail.com>
> Date: Mon, Jul 15, 2024 at 9:00?PM
> Subject: How to add labels to DEM contour lines
> To: <gdal-dev at lists.osgeo.org>
>
>
> Hi everyone, this is my first post. I've also posted this to
> https://stackoverflow.com/questions/78751101/labelling-contour-lines-with-ogr-style
>
> I'm trying to add labels to DEM contour lines.
>
> I'm working with GDAL 3.6.2. , which I installed using Anaconda . I have
> some DEM data from USGS which I wrote as a contour map to a KML file using:
>
>     gdal_contour small.tif /home/ubuntu/node/geotools/contour.kml -i 3.0
> -f KML -a ELEVATION
>
> When I open contour.kml in vim, I can see that its made up of features
> like:
>
> <Placemark>
>
> <Style><LineStyle><color>ff0000ff</color></LineStyle><PolyStyle><fill>0</fill></PolyStyle></Style>
> <ExtendedData><SchemaData schemaUrl="#contour">
> <SimpleData name="ID">39</SimpleData>
> <SimpleData name="ELEVATION">525</SimpleData>
> </SchemaData></ExtendedData>
> <LineString><coordinates>-89.2626638689733,46.1525006611575
> -89.262663868958,46.1525469572921 -89.2627325352002,46.152622208059
> -89.2628251277396,46.1526266807347 -89.2629177202847,46.1526141000471
> -89.2629982621728,46.1525469573863
> -89.2629982621882,46.1525006612516</coordinates></LineString>
> </Placemark>
>
> Clearly there is a style component available , but I'm not sure how to
> work with it to add elevation labels or custom colours. My suspicion is
> that OGR_STYLE is used to do things like this (
> https://github.com/OSGeo/gdal/issues/835)(https://gdal.org/user/ogr_sql_dialect.html#ogr-style
> ), but I can't find any examples. How can this be done?
>
> Thank you very much,
>
> KC
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240718/efbc89e2/attachment-0001.htm>

From kirk.waters at noaa.gov  Thu Jul 18 09:31:34 2024
From: kirk.waters at noaa.gov (Kirk Waters - NOAA Federal)
Date: Thu, 18 Jul 2024 12:31:34 -0400
Subject: [gdal-dev] Fwd: How to add labels to DEM contour lines
In-Reply-To: <CAAzaJGf=2d+C6XXKDC_XiZ-2gCgum8LeKEjg7bran_p42-p1eA@mail.gmail.com>
References: <CAAzaJGdZsa7t0R0TFwYydj5bbRW3Unvbm421=wbYHsN1TBeANA@mail.gmail.com>
 <CAAzaJGf=2d+C6XXKDC_XiZ-2gCgum8LeKEjg7bran_p42-p1eA@mail.gmail.com>
Message-ID: <CADm=QrTqykseXiwZsKNGmCVujOiVvU87POnx5jg8ZGYM80YXRQ@mail.gmail.com>

KC,
I looked into this a few years ago, so things may have changed. A write-up
of what I did with both kmz and pdf is at
https://geozoneblog.wordpress.com/2021/12/09/dav-new-products/ with the
details toward the bottom. It might be that you'd need to add a layer to
the kmz with a point and label where you want them.

Kirk Waters, PhD
NOAA Office for Coastal Management
Applied Sciences Program
coast.noaa.gov/digitalcoast




On Thu, Jul 18, 2024 at 11:50?AM Open Land LLC via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi Everyone,
>
> I just wanted to ask - Is this the right place to post questions? I put in
> a post several days ago, and just want to make sure I'm putting it in the
> right place, because I have not posted to this group before. Thank you - KC
>
> ---------- Forwarded message ---------
> From: Open Land LLC <realoption11 at gmail.com>
> Date: Mon, Jul 15, 2024 at 9:00?PM
> Subject: How to add labels to DEM contour lines
> To: <gdal-dev at lists.osgeo.org>
>
>
> Hi everyone, this is my first post. I've also posted this to
> https://stackoverflow.com/questions/78751101/labelling-contour-lines-with-ogr-style
>
> I'm trying to add labels to DEM contour lines.
>
> I'm working with GDAL 3.6.2. , which I installed using Anaconda . I have
> some DEM data from USGS which I wrote as a contour map to a KML file using:
>
>     gdal_contour small.tif /home/ubuntu/node/geotools/contour.kml -i 3.0
> -f KML -a ELEVATION
>
> When I open contour.kml in vim, I can see that its made up of features
> like:
>
> <Placemark>
>
> <Style><LineStyle><color>ff0000ff</color></LineStyle><PolyStyle><fill>0</fill></PolyStyle></Style>
> <ExtendedData><SchemaData schemaUrl="#contour">
> <SimpleData name="ID">39</SimpleData>
> <SimpleData name="ELEVATION">525</SimpleData>
> </SchemaData></ExtendedData>
> <LineString><coordinates>-89.2626638689733,46.1525006611575
> -89.262663868958,46.1525469572921 -89.2627325352002,46.152622208059
> -89.2628251277396,46.1526266807347 -89.2629177202847,46.1526141000471
> -89.2629982621728,46.1525469573863
> -89.2629982621882,46.1525006612516</coordinates></LineString>
> </Placemark>
>
> Clearly there is a style component available , but I'm not sure how to
> work with it to add elevation labels or custom colours. My suspicion is
> that OGR_STYLE is used to do things like this (
> https://github.com/OSGeo/gdal/issues/835)(https://gdal.org/user/ogr_sql_dialect.html#ogr-style
> ), but I can't find any examples. How can this be done?
>
> Thank you very much,
>
> KC
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240718/e4786a52/attachment.htm>

From rupestre.campos at gmail.com  Thu Jul 18 10:20:23 2024
From: rupestre.campos at gmail.com (=?UTF-8?Q?Cain=C3=A3_K=2E_Campos?=)
Date: Thu, 18 Jul 2024 14:20:23 -0300
Subject: [gdal-dev] Fwd: How to add labels to DEM contour lines
In-Reply-To: <CADm=QrTqykseXiwZsKNGmCVujOiVvU87POnx5jg8ZGYM80YXRQ@mail.gmail.com>
References: <CAAzaJGdZsa7t0R0TFwYydj5bbRW3Unvbm421=wbYHsN1TBeANA@mail.gmail.com>
 <CAAzaJGf=2d+C6XXKDC_XiZ-2gCgum8LeKEjg7bran_p42-p1eA@mail.gmail.com>
 <CADm=QrTqykseXiwZsKNGmCVujOiVvU87POnx5jg8ZGYM80YXRQ@mail.gmail.com>
Message-ID: <CAAvXUUqfoo-uz5251OHSrevcvjarkMo1C7sPAi4YpOH+Hgmp_Q@mail.gmail.com>

While OGR_STYLE works for setting the color I have not seen it working for
setting LABEL neither with pdf nor with kml (not sure how it would appear
thought)
I attach a small.tif elevation raster and bellow commands used to create
contour and try to set style via OGR_STYLE.
Could anyone more experienced check if LABEL is indeed working and how to
do it?

gdal_contour small.tif small_contour.geojson -i 50.0 -f GeoJSON -a ELEVATION

ogr2ogr -f KML small_contour_label.kml small_contour.geojson -sql "SELECT
ELEVATION, 'PEN(c:#FFFF00FF);LABEL(t:{ELEVATION})' AS OGR_STYLE FROM
contour"

The PEN is correctly applied but Label I could not make to work. :'(


On Thu, Jul 18, 2024 at 1:32?PM Kirk Waters - NOAA Federal via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> KC,
> I looked into this a few years ago, so things may have changed. A write-up
> of what I did with both kmz and pdf is at
> https://geozoneblog.wordpress.com/2021/12/09/dav-new-products/ with the
> details toward the bottom. It might be that you'd need to add a layer to
> the kmz with a point and label where you want them.
>
> Kirk Waters, PhD
> NOAA Office for Coastal Management
> Applied Sciences Program
> coast.noaa.gov/digitalcoast
>
>
>
>
> On Thu, Jul 18, 2024 at 11:50?AM Open Land LLC via gdal-dev <
> gdal-dev at lists.osgeo.org> wrote:
>
>> Hi Everyone,
>>
>> I just wanted to ask - Is this the right place to post questions? I put
>> in a post several days ago, and just want to make sure I'm putting it in
>> the right place, because I have not posted to this group before. Thank you
>> - KC
>>
>> ---------- Forwarded message ---------
>> From: Open Land LLC <realoption11 at gmail.com>
>> Date: Mon, Jul 15, 2024 at 9:00?PM
>> Subject: How to add labels to DEM contour lines
>> To: <gdal-dev at lists.osgeo.org>
>>
>>
>> Hi everyone, this is my first post. I've also posted this to
>> https://stackoverflow.com/questions/78751101/labelling-contour-lines-with-ogr-style
>>
>> I'm trying to add labels to DEM contour lines.
>>
>> I'm working with GDAL 3.6.2. , which I installed using Anaconda . I have
>> some DEM data from USGS which I wrote as a contour map to a KML file using:
>>
>>     gdal_contour small.tif /home/ubuntu/node/geotools/contour.kml -i 3.0
>> -f KML -a ELEVATION
>>
>> When I open contour.kml in vim, I can see that its made up of features
>> like:
>>
>> <Placemark>
>>
>> <Style><LineStyle><color>ff0000ff</color></LineStyle><PolyStyle><fill>0</fill></PolyStyle></Style>
>> <ExtendedData><SchemaData schemaUrl="#contour">
>> <SimpleData name="ID">39</SimpleData>
>> <SimpleData name="ELEVATION">525</SimpleData>
>> </SchemaData></ExtendedData>
>> <LineString><coordinates>-89.2626638689733,46.1525006611575
>> -89.262663868958,46.1525469572921 -89.2627325352002,46.152622208059
>> -89.2628251277396,46.1526266807347 -89.2629177202847,46.1526141000471
>> -89.2629982621728,46.1525469573863
>> -89.2629982621882,46.1525006612516</coordinates></LineString>
>> </Placemark>
>>
>> Clearly there is a style component available , but I'm not sure how to
>> work with it to add elevation labels or custom colours. My suspicion is
>> that OGR_STYLE is used to do things like this (
>> https://github.com/OSGeo/gdal/issues/835)(https://gdal.org/user/ogr_sql_dialect.html#ogr-style
>> ), but I can't find any examples. How can this be done?
>>
>> Thank you very much,
>>
>> KC
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240718/53853423/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: small.tif
Type: image/tiff
Size: 54768 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240718/53853423/attachment-0001.tif>

From a.pau at creaf.cat  Fri Jul 19 07:30:01 2024
From: a.pau at creaf.cat (Abel Pau)
Date: Fri, 19 Jul 2024 14:30:01 +0000
Subject: [gdal-dev] Problems compiling the project
In-Reply-To: <40b818c3-04b6-4399-a09f-697685ed6fbc@spatialys.com>
References: <PAXPR07MB777502A2671370695DCE0217FAA32@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <PAXPR07MB7775398BEB725AAE362C4071FAA32@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <40b818c3-04b6-4399-a09f-697685ed6fbc@spatialys.com>
Message-ID: <PAXPR07MB777571993AEDBE6198BFCAB9FAAD2@PAXPR07MB7775.eurprd07.prod.outlook.com>

Hi Even,
I tried at some point using the --config Debug option.
It makes no difference.

I don?t understand the difference between now and some months ago.

I?ll keep looking for a solution.
Thanks!

De: Even Rouault <even.rouault at spatialys.com>
Enviado el: dijous, 18 de juliol de 2024 12:17
Para: Abel Pau <a.pau at creaf.cat>; gdal-dev at lists.osgeo.org
Asunto: Re: [gdal-dev] Problems compiling the project


Hi Abel,

the error message indicates that the build is trying to link a release version of poppler.lib, whereas your build is a debug one.

For multi-config generators like Visual Studio builds, I'm not sure how -DCMAKE_BUILD_TYPE=Debug is effective. You perhaps need to do the following instead:

cmake --build build --config Debug

Even
Le 17/07/2024 ? 17:59, Abel Pau via gdal-dev a ?crit :
Hi,
I?m trying to compile the project using the two lines that always have worked:
cmake -B build -S . -DCMAKE_TOOLCHAIN_FILE=C:/dev/vcpkg/vcpkg/scripts/buildsystems/vcpkg.cmake -DCMAKE_BUILD_TYPE=Debug
cmake --build build

Before starting I deleted the build folder.
The first line is ok and creates the projects... but the second one gives me some red errors.

I?m using windows and Visual Studio 2019

Is there something I?m missing?

Thanks!

Generating Code...
  shapelib.vcxproj -> D:\GitHub-repository\gdal\build\ogr\ogrsf_frmts\shape\shapelib.dir\Debug\shapelib.lib
  Building Custom Rule D:/GitHub-repository/gdal/CMakeLists.txt
poppler.lib(Error.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2
' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(Error.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match
value 'MDd_DynamicDebug' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(Object.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '
2' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(Object.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't matc
h value 'MDd_DynamicDebug' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(Catalog.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value
'2' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(Catalog.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't mat
ch value 'MDd_DynamicDebug' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(XRef.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2'
in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(XRef.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match
value 'MDd_DynamicDebug' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(OptionalContent.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't matc
h value '2' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]


Abel Pau Garcia
[https://www.creaf.cat/sites/default/files/logo-creaf-small.jpg]<https://www.creaf.cat/>
GIS developer
a.pau at creaf.uab.cat <mailto:a.pau at creaf.uab.cat>
[https://www.creaf.cat/sites/default/files/cap_0.png]
Let's chat on Teams! <https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
Tel. +34 934814277
[https://www.creaf.cat/sites/default/files/x_30.png]<https://twitter.com/CREAF_ecologia>[https://www.creaf.cat/sites/default/files/linkedin_30.png]<https://www.linkedin.com/company/creaf/>[https://www.creaf.cat/sites/default/files/youtube_30.png]<https://www.youtube.com/c/creafecologia>[https://www.creaf.cat/sites/default/files/instagram_30.png]<https://www.instagram.com/CREAF_ecologia/>
www.creaf.cat <http://www.creaf.cat> | http://blog.creaf.cat
CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona) <https://www.openstreetmap.org/way/123379060>

Pol?tica de privacitat <https://www.creaf.cat/ca/politica-de-privacitat>
[https://www.creaf.cat/sites/default/files/corner_right_0.png]
Abans d'imprimir aquest missatge electr?nic penseu en el medi ambient.





_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240719/161a0faf/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 10974 bytes
Desc: image001.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240719/161a0faf/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 154 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240719/161a0faf/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 3946 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240719/161a0faf/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 3678 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240719/161a0faf/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 3646 bytes
Desc: image005.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240719/161a0faf/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 4056 bytes
Desc: image006.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240719/161a0faf/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.png
Type: image/png
Size: 640 bytes
Desc: image007.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240719/161a0faf/attachment-0011.png>

From jluis at ualg.pt  Fri Jul 19 07:58:14 2024
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Fri, 19 Jul 2024 14:58:14 +0000
Subject: [gdal-dev] Extracting data from a parquet file
Message-ID: <GVXPR04MB99263661C7DD2D2CB056C316A6AD2@GVXPR04MB9926.eurprd04.prod.outlook.com>

Hi,

I finally managed to build a working GDAL with the arrow/parquet driver and I'm now trying to convert this file
(https://public.opendatasoft.com/api/explore/v2.1/catalog/datasets/world-administrative-boundaries/exports/parquet?lang=en&timezone=Europe%2FLondon)
but can only extract the "Point", not the "Multi polygon"

ogrinfo world-administrative-boundaries.parquet
INFO: Open of `world-administrative-boundaries.parquet'
      using driver `Parquet' successful.
1: world-administrative-boundaries (Point, Multi Polygon)

This gets only the points

ogr2ogr lixo.gpkg world-administrative-boundaries.parquet

The same happens if I open the file in QGis. Points only, no polygons.

But if I do an ogrinfo -al, it prints all data in file.

ogrinfo -al world-administrative-boundaries.parquet

....

OGRFeature(world-administrative-boundaries):255
  iso3 (String) = GIB
  status (String) = UK Non-Self-Governing Territory
  color_code (String) = GBR
  name (String) = Gibraltar
...

So, how can we select in ogr2ogr to extract the polygons?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240719/df2a7329/attachment.htm>

From thomas.bonfort at gmail.com  Mon Jul 22 03:08:57 2024
From: thomas.bonfort at gmail.com (thomas bonfort)
Date: Mon, 22 Jul 2024 12:08:57 +0200
Subject: [gdal-dev] GTI datasets: overview usage question
Message-ID: <CAOM3y2hS=YzZ09M3pKui5-Uj_PQ2JJq9hnTURUQVbxE9_K0C_g@mail.gmail.com>

Hi list,
I'm experimenting with the GTI driver and hitting an issue when trying to
add overviews.
I'm compiling a large number of adjacent non-overlapping tiles, each of
which has is own bundled overviews:

gdalinfo /*snip*/tile-1377-471.tif

Size is 32768, 32768
Origin = (3.057607090103000,48.420794507110998)
Pixel Size = (0.000004056990000,-0.000002694048000)
Band 1 Block=512x512 Type=Byte, ColorInterp=Red
  NoData Value=0
  Overviews: 16384x16384, 8192x8192, 4096x4096, 2048x2048, 1024x1024,
512x512, 256x256
Band 2 Block=512x512 Type=Byte, ColorInterp=Green
  NoData Value=0
  Overviews: 16384x16384, 8192x8192, 4096x4096, 2048x2048, 1024x1024,
512x512, 256x256
Band 3 Block=512x512 Type=Byte, ColorInterp=Blue
  NoData Value=0
  Overviews: 16384x16384, 8192x8192, 4096x4096, 2048x2048, 1024x1024,
512x512, 256x256

I also have a very low resolution "hat" file that covers the whole work
area:

gdalinfo /*snip*/lr.tif
Size is 2100, 1792
Origin = (1.413084112150000,49.303580186365998)
Pixel Size = (0.001045206663490,-0.000689676288000)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
  NoData Value=0
  Overviews: 1050x896, 525x448, 263x224, 132x112
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
  NoData Value=0
  Overviews: 1050x896, 525x448, 263x224, 132x112
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
  NoData Value=0
  Overviews: 1050x896, 525x448, 263x224, 132x112

I would like to create a GTI dataset referencing all these tiles, and the
"hat" dataset, and have created it like so:

ogrinfo -so -al mosaic.gti.fgb:

Layer name: tileindex
Metadata:
  BAND_COUNT=3
  DATA_TYPE=Byte
  NODATA=0
  OVERVIEW_0_FACTOR=2
  OVERVIEW_1_FACTOR=4
  OVERVIEW_2_FACTOR=8
  OVERVIEW_3_FACTOR=16
  OVERVIEW_4_FACTOR=32
  OVERVIEW_5_FACTOR=64
  OVERVIEW_6_FACTOR=128
  OVERVIEW_7_DATASET=/*snip*/lr.tif
  RESAMPLING=bilinear
  RESX=0.00000269495773407954
  RESY=0.00000269495773407954

However when I inspect the gti dataset, the overview count is not what I
expect:

gdalinfo mosaic.gti.fgb:

Size is 814460, 458598
Origin = (1.413084000000000,49.303579999999997)
Pixel Size = (0.000002694957734,-0.000002694957734)
Band 1 Block=256x256 Type=Byte, ColorInterp=Undefined
  NoData Value=0
  Overviews: 203615x114650, 101808x57325, 50904x28663, 25452x14332,
12726x7166, 6363x3583, 2100x1792

Note the overview list, which I would have expected to be:

407230x229299, 203615x114650, 101808x57325, 50904x28663, 25452x14332,
12726x7166, 6363x3583, 2100x1792, 1050x896, 525x448, 263x224, 132x112

but is not, i.e. it is missing the first overview level of the individual
tiles, and the overviews of the hat dataset.
Is this a configuration issue on my end ?

Thanks,
Thomas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240722/ca785a53/attachment.htm>

From even.rouault at spatialys.com  Mon Jul 22 06:20:54 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 22 Jul 2024 15:20:54 +0200
Subject: [gdal-dev] GTI datasets: overview usage question
In-Reply-To: <CAOM3y2hS=YzZ09M3pKui5-Uj_PQ2JJq9hnTURUQVbxE9_K0C_g@mail.gmail.com>
References: <CAOM3y2hS=YzZ09M3pKui5-Uj_PQ2JJq9hnTURUQVbxE9_K0C_g@mail.gmail.com>
Message-ID: <63c80baa-b3c3-4485-8322-41464a588b97@spatialys.com>

Salut Thomas,

There were actually 2 issues:

- contrary to what the documentation stated, OVERVIEW_0_xxxx metadata 
items were simply ignored, hence you only got overviews starting at the 
1/4 reduction

- and the documentation also lied when implying that it would 
automatically add overviews of overview datasets

Both issues are now fixed per https://github.com/OSGeo/gdal/pull/10465.

You can workaround both issues by:

- starting your OVERVIEW_{idx} at 1? (this will be compatible of GDAL 
3.9.2, that will be tolerant to {idx} starting at 0 or 1)

- and you can explicitly add overviews of your hat dataset by specifying 
OVERVIEW_{idx}_OPEN_OPTIONS=OVERVIEW_LEVEL=NONE to gets its full 
resolution, OVERVIEW_{idx+1}_OPEN_OPTIONS=OVERVIEW_LEVEL=0 to get its 
first overview, etc. (this will also be compatible of GDAL 3.9.2, since 
specifying the OVERVIEW_LEVEL open option prevents other overviews to be 
added)

So something like:

 ? OVERVIEW_1_FACTOR=2
 ? OVERVIEW_2_FACTOR=4
 ? OVERVIEW_3_FACTOR=8
 ? OVERVIEW_4_FACTOR=16
 ? OVERVIEW_5_FACTOR=32
 ? OVERVIEW_6_FACTOR=64
 ? OVERVIEW_7_FACTOR=128
 ? OVERVIEW_8_DATASET=/*snip*/lr.tif
 ? OVERVIEW_8_OPEN_OPTIONS=OVERVIEW_LEVEL=NONE
 ? OVERVIEW_9_DATASET=/*snip*/lr.tif
 ? OVERVIEW_9_OPEN_OPTIONS=OVERVIEW_LEVEL=0
 ? OVERVIEW_10_DATASET=/*snip*/lr.tif
 ? OVERVIEW_10_OPEN_OPTIONS=OVERVIEW_LEVEL=1

Even


Hi list,
> I'm experimenting with the GTI driver and hitting an issue when trying 
> to add overviews.
> I'm compiling a large number of adjacent non-overlapping tiles, each 
> of which has is own bundled overviews:
>
> gdalinfo /*snip*/tile-1377-471.tif
>
> Size is 32768, 32768
> Origin = (3.057607090103000,48.420794507110998)
> Pixel Size = (0.000004056990000,-0.000002694048000)
> Band 1 Block=512x512 Type=Byte, ColorInterp=Red
> ? NoData Value=0
> ? Overviews: 16384x16384, 8192x8192, 4096x4096, 2048x2048, 1024x1024, 
> 512x512, 256x256
> Band 2 Block=512x512 Type=Byte, ColorInterp=Green
> ? NoData Value=0
> ? Overviews: 16384x16384, 8192x8192, 4096x4096, 2048x2048, 1024x1024, 
> 512x512, 256x256
> Band 3 Block=512x512 Type=Byte, ColorInterp=Blue
> ? NoData Value=0
> ? Overviews: 16384x16384, 8192x8192, 4096x4096, 2048x2048, 1024x1024, 
> 512x512, 256x256
>
> I also have a very low resolution "hat" file that covers the whole 
> work area:
>
> gdalinfo /*snip*/lr.tif
> Size is 2100, 1792
> Origin = (1.413084112150000,49.303580186365998)
> Pixel Size = (0.001045206663490,-0.000689676288000)
> Band 1 Block=256x256 Type=Byte, ColorInterp=Red
> ? NoData Value=0
> ? Overviews: 1050x896, 525x448, 263x224, 132x112
> Band 2 Block=256x256 Type=Byte, ColorInterp=Green
> ? NoData Value=0
> ? Overviews: 1050x896, 525x448, 263x224, 132x112
> Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
> ? NoData Value=0
> ? Overviews: 1050x896, 525x448, 263x224, 132x112
>
> I would like to create a GTI dataset referencing all these tiles, and 
> the "hat" dataset, and have created it like so:
>
> ogrinfo -so -al mosaic.gti.fgb:
>
> Layer name: tileindex
> Metadata:
> ? BAND_COUNT=3
> ? DATA_TYPE=Byte
> ? NODATA=0
> ? OVERVIEW_0_FACTOR=2
> ? OVERVIEW_1_FACTOR=4
> ? OVERVIEW_2_FACTOR=8
> ? OVERVIEW_3_FACTOR=16
> ? OVERVIEW_4_FACTOR=32
> ? OVERVIEW_5_FACTOR=64
> ? OVERVIEW_6_FACTOR=128
> ? OVERVIEW_7_DATASET=/*snip*/lr.tif
> ? RESAMPLING=bilinear
> ? RESX=0.00000269495773407954
> ? RESY=0.00000269495773407954
>
> However when I inspect the gti dataset, the overview count is not what 
> I expect:
>
> gdalinfo mosaic.gti.fgb:
>
> Size is 814460, 458598
> Origin = (1.413084000000000,49.303579999999997)
> Pixel Size = (0.000002694957734,-0.000002694957734)
> Band 1 Block=256x256 Type=Byte, ColorInterp=Undefined
> ? NoData Value=0
> ? Overviews: 203615x114650, 101808x57325, 50904x28663, 25452x14332, 
> 12726x7166, 6363x3583, 2100x1792
>
> Note the overview list, which I would have expected to be:
>
> 407230x229299, 203615x114650, 101808x57325, 50904x28663, 25452x14332, 
> 12726x7166, 6363x3583, 2100x1792, 1050x896, 525x448, 263x224, 132x112
>
> but is not, i.e. it is missing the first overview level of the 
> individual tiles, and the overviews of the hat dataset.
> Is this a configuration issue on my end ?
>
> Thanks,
> Thomas
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Mon Jul 22 06:29:06 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 22 Jul 2024 15:29:06 +0200
Subject: [gdal-dev] Extracting data from a parquet file
In-Reply-To: <GVXPR04MB99263661C7DD2D2CB056C316A6AD2@GVXPR04MB9926.eurprd04.prod.outlook.com>
References: <GVXPR04MB99263661C7DD2D2CB056C316A6AD2@GVXPR04MB9926.eurprd04.prod.outlook.com>
Message-ID: <8da1b7e8-056c-4fb9-955e-2c87e48e7e3c@spatialys.com>

Joaquim,

The GeoPackage format only supports one geometry field per layer. and 
the QGIS OGR provider doesn't know currently how to handle several 
geometry fields per layer too

To do what you want, you need to explictly select the desired geometry 
field name with:

ogr2ogr out.gpkg world-administrative-boundaries.parquet -sql "select 
geo_shape, * from \"world-administrative-boundaries\""

Actually if you outputted to a format that supports several geometry 
fields per layer (let's say PostGIS), the above wouldn't work. You would 
need to exclude the geometry fields from the wildcard * selection with:

ogr2ogr out.gpkg? world-administrative-boundaries.parquet -sql "select 
geo_shape, * exclude (geo_point_2D, geo_shape) from 
\"world-administrative-boundaries\""

Even

Le 19/07/2024 ? 16:58, Joaquim Manuel Freire Lu?s via gdal-dev a ?crit?:
>
> Hi,
>
> I finally managed to build a working GDAL with the arrow/parquet 
> driver and I?m now trying to convert this file
>
> (https://public.opendatasoft.com/api/explore/v2.1/catalog/datasets/world-administrative-boundaries/exports/parquet?lang=en&timezone=Europe%2FLondon 
> <https://public.opendatasoft.com/api/explore/v2.1/catalog/datasets/world-administrative-boundaries/exports/parquet?lang=en&timezone=Europe%2FLondon>)
>
> but can only extract the ?Point?, not the ?Multi polygon?
>
> ogrinfo world-administrative-boundaries.parquet
>
> INFO: Open of `world-administrative-boundaries.parquet'
>
> ????? using driver `Parquet' successful.
>
> 1: world-administrative-boundaries (Point, Multi Polygon)
>
> This gets only the points
>
> ogr2ogr lixo.gpkg world-administrative-boundaries.parquet
>
> The same happens if I open the file in QGis. Points only, no polygons.
>
> But if I do an ogrinfo -al, it prints all data in file.
>
> ogrinfo -al world-administrative-boundaries.parquet
>
> ?.
>
> OGRFeature(world-administrative-boundaries):255
>
> ? iso3 (String) = GIB
>
> ? status (String) = UK Non-Self-Governing Territory
>
> ? color_code (String) = GBR
>
> ? name (String) = Gibraltar
>
> ?
>
> So, how can we select in ogr2ogr to extract the polygons?
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240722/908ae6b4/attachment.htm>

From thomas.bonfort at gmail.com  Mon Jul 22 07:31:34 2024
From: thomas.bonfort at gmail.com (thomas bonfort)
Date: Mon, 22 Jul 2024 16:31:34 +0200
Subject: [gdal-dev] GTI datasets: overview usage question
In-Reply-To: <63c80baa-b3c3-4485-8322-41464a588b97@spatialys.com>
References: <CAOM3y2hS=YzZ09M3pKui5-Uj_PQ2JJq9hnTURUQVbxE9_K0C_g@mail.gmail.com>
 <63c80baa-b3c3-4485-8322-41464a588b97@spatialys.com>
Message-ID: <CAOM3y2jRfdroYGjK=CTiwQA2Nbr_kBzg80eZ6-T7GcETKZ6CXg@mail.gmail.com>

Merci Even,
I can confirm that the workaround you suggested works correctly.
>From the performance I was getting beforehand, I strongly believe that the
mixup happening on the overview levels was causing my hat/lr dataset to
never be used at all.
Thank you for the quick response,
Thomas

On Mon, Jul 22, 2024 at 3:21?PM Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Salut Thomas,
>
> There were actually 2 issues:
>
> - contrary to what the documentation stated, OVERVIEW_0_xxxx metadata
> items were simply ignored, hence you only got overviews starting at the
> 1/4 reduction
>
> - and the documentation also lied when implying that it would
> automatically add overviews of overview datasets
>
> Both issues are now fixed per https://github.com/OSGeo/gdal/pull/10465.
>
> You can workaround both issues by:
>
> - starting your OVERVIEW_{idx} at 1  (this will be compatible of GDAL
> 3.9.2, that will be tolerant to {idx} starting at 0 or 1)
>
> - and you can explicitly add overviews of your hat dataset by specifying
> OVERVIEW_{idx}_OPEN_OPTIONS=OVERVIEW_LEVEL=NONE to gets its full
> resolution, OVERVIEW_{idx+1}_OPEN_OPTIONS=OVERVIEW_LEVEL=0 to get its
> first overview, etc. (this will also be compatible of GDAL 3.9.2, since
> specifying the OVERVIEW_LEVEL open option prevents other overviews to be
> added)
>
> So something like:
>
>    OVERVIEW_1_FACTOR=2
>    OVERVIEW_2_FACTOR=4
>    OVERVIEW_3_FACTOR=8
>    OVERVIEW_4_FACTOR=16
>    OVERVIEW_5_FACTOR=32
>    OVERVIEW_6_FACTOR=64
>    OVERVIEW_7_FACTOR=128
>    OVERVIEW_8_DATASET=/*snip*/lr.tif
>    OVERVIEW_8_OPEN_OPTIONS=OVERVIEW_LEVEL=NONE
>    OVERVIEW_9_DATASET=/*snip*/lr.tif
>    OVERVIEW_9_OPEN_OPTIONS=OVERVIEW_LEVEL=0
>    OVERVIEW_10_DATASET=/*snip*/lr.tif
>    OVERVIEW_10_OPEN_OPTIONS=OVERVIEW_LEVEL=1
>
> Even
>
>
> Hi list,
> > I'm experimenting with the GTI driver and hitting an issue when trying
> > to add overviews.
> > I'm compiling a large number of adjacent non-overlapping tiles, each
> > of which has is own bundled overviews:
> >
> > gdalinfo /*snip*/tile-1377-471.tif
> >
> > Size is 32768, 32768
> > Origin = (3.057607090103000,48.420794507110998)
> > Pixel Size = (0.000004056990000,-0.000002694048000)
> > Band 1 Block=512x512 Type=Byte, ColorInterp=Red
> >   NoData Value=0
> >   Overviews: 16384x16384, 8192x8192, 4096x4096, 2048x2048, 1024x1024,
> > 512x512, 256x256
> > Band 2 Block=512x512 Type=Byte, ColorInterp=Green
> >   NoData Value=0
> >   Overviews: 16384x16384, 8192x8192, 4096x4096, 2048x2048, 1024x1024,
> > 512x512, 256x256
> > Band 3 Block=512x512 Type=Byte, ColorInterp=Blue
> >   NoData Value=0
> >   Overviews: 16384x16384, 8192x8192, 4096x4096, 2048x2048, 1024x1024,
> > 512x512, 256x256
> >
> > I also have a very low resolution "hat" file that covers the whole
> > work area:
> >
> > gdalinfo /*snip*/lr.tif
> > Size is 2100, 1792
> > Origin = (1.413084112150000,49.303580186365998)
> > Pixel Size = (0.001045206663490,-0.000689676288000)
> > Band 1 Block=256x256 Type=Byte, ColorInterp=Red
> >   NoData Value=0
> >   Overviews: 1050x896, 525x448, 263x224, 132x112
> > Band 2 Block=256x256 Type=Byte, ColorInterp=Green
> >   NoData Value=0
> >   Overviews: 1050x896, 525x448, 263x224, 132x112
> > Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
> >   NoData Value=0
> >   Overviews: 1050x896, 525x448, 263x224, 132x112
> >
> > I would like to create a GTI dataset referencing all these tiles, and
> > the "hat" dataset, and have created it like so:
> >
> > ogrinfo -so -al mosaic.gti.fgb:
> >
> > Layer name: tileindex
> > Metadata:
> >   BAND_COUNT=3
> >   DATA_TYPE=Byte
> >   NODATA=0
> >   OVERVIEW_0_FACTOR=2
> >   OVERVIEW_1_FACTOR=4
> >   OVERVIEW_2_FACTOR=8
> >   OVERVIEW_3_FACTOR=16
> >   OVERVIEW_4_FACTOR=32
> >   OVERVIEW_5_FACTOR=64
> >   OVERVIEW_6_FACTOR=128
> >   OVERVIEW_7_DATASET=/*snip*/lr.tif
> >   RESAMPLING=bilinear
> >   RESX=0.00000269495773407954
> >   RESY=0.00000269495773407954
> >
> > However when I inspect the gti dataset, the overview count is not what
> > I expect:
> >
> > gdalinfo mosaic.gti.fgb:
> >
> > Size is 814460, 458598
> > Origin = (1.413084000000000,49.303579999999997)
> > Pixel Size = (0.000002694957734,-0.000002694957734)
> > Band 1 Block=256x256 Type=Byte, ColorInterp=Undefined
> >   NoData Value=0
> >   Overviews: 203615x114650, 101808x57325, 50904x28663, 25452x14332,
> > 12726x7166, 6363x3583, 2100x1792
> >
> > Note the overview list, which I would have expected to be:
> >
> > 407230x229299, 203615x114650, 101808x57325, 50904x28663, 25452x14332,
> > 12726x7166, 6363x3583, 2100x1792, 1050x896, 525x448, 263x224, 132x112
> >
> > but is not, i.e. it is missing the first overview level of the
> > individual tiles, and the overviews of the hat dataset.
> > Is this a configuration issue on my end ?
> >
> > Thanks,
> > Thomas
> >
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240722/756ee2a3/attachment-0001.htm>

From j1 at jimenezshaw.com  Mon Jul 22 09:17:36 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 22 Jul 2024 18:17:36 +0200
Subject: [gdal-dev] Unknown ASCII raster format
Message-ID: <CADRrdKtdHWRJ3eAdj7xGt8sr+dfzC9dU_fLunWskX7N8MSMQFg@mail.gmail.com>

Hi

I have seen some raster files with this format

-4.983333 14.983333 -79.983333 -66.016667 0.03333333333333333
0.03333333333333333
-5.258 -5.301 -5.345 -5.393 -5.444 -5.499 -5.555 -5.615 -5.682 -5.752
-5.823 -5.886 -5.938 -5.986 -6.036 -6.093 -6.157 -6.226 -6.296 -6.358
-6.413 -6.462 -6.516 -6.574 -6.636 -6.700 -6.761 -6.819 -6.868 -6.901
-6.933 -6.962 -7.004 -7.069 -7.156 -7.263 -7.374 -7.479 -7.581 -7.669
-7.748 -7.814 -7.873 -7.923 -7.973 -8.027 -8.084 -8.143 -8.208 -8.278
-8.355 -8.447 -8.552 -8.670 -8.790 -8.911
...
The first line (six numbers) is the bounding box (4) and the grid steps
(2), all in degrees.
Then all the pixel values (as in AAIGrid format).

If I try to run gdalinfo, I get

ERROR 1: Maximum number of characters allowed reached.
ERROR 1: Couldn't determine X spacing
gdalinfo failed - unable to open 'file.txt'.

However, if I change the first line with this command to convert it into a
https://gdal.org/drivers/raster/aaigrid.html , is works

awk 'NR==1 {print "NCOLS "($4-$3)/$6+1 "\nNROWS "($2-$1)/$5+1 "\nXLLCENTER
"$3 "\nYLLCENTER "$1  "\nCELLSIZE "$6} NR>1 {print $0}' <source_file>

Producing something like this:

NCOLS 420
NROWS 600
XLLCENTER -79.983333
YLLCENTER -4.983333
CELLSIZE 0.03333333333333333
-5.258 -5.301 -5.345 -5.393 -5.444 -5.499 -5.555 -5.615 -5.682 -5.752
-5.823 -5.886 -5.938 -5.986 -6.036 -6.093 -6.157 -6.226 -6.296 -6.358
-6.413 -6.462 -6.516 -6.574 -6.636 -6.700 -6.761 -6.819 -6.868 -6.901
-6.933 -6.962 -7.004 -7.069 -7.156 -7.263 -7.374 -7.479 -7.581 -7.669
-7.748 -7.814 -7.873 -7.923 -7.973 -8.027 -8.084 -8.143 -8.208 -8.278
-8.355 -8.447 -8.552 -8.670 -8.790 -8.91
...

See that I am assuming that the coordinates in the first line are at the
pixel center.

Do you know what is that initial format? Is it a "variation" of "AAIGrid --
Arc/Info ASCII Grid"? Something else? Is it worth it to add it to GDAL?
(maybe the awk script is enough)

Thanks
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240722/825ccc19/attachment.htm>

From even.rouault at spatialys.com  Mon Jul 22 10:15:59 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 22 Jul 2024 19:15:59 +0200
Subject: [gdal-dev] Unknown ASCII raster format
In-Reply-To: <CADRrdKtdHWRJ3eAdj7xGt8sr+dfzC9dU_fLunWskX7N8MSMQFg@mail.gmail.com>
References: <CADRrdKtdHWRJ3eAdj7xGt8sr+dfzC9dU_fLunWskX7N8MSMQFg@mail.gmail.com>
Message-ID: <b7e3765f-8978-484d-9901-cde2c3a335fd@spatialys.com>

Javier,

yes I've came across similarly looking grid files occasionally. I'm not 
quite sure which ancestor format is behind. This is a bit similar to the 
IGN France ASCII grid .mnt format documented at 
https://geodesie.ign.fr/contenu/fichiers/documentation/grilles/notices/Grilles-MNT-TXT_Formats.pdf, 
except it has extra fields in the header to document the number of 
values per node, etc. Or actually, the closest would be the .gra format 
that was used at a time for older IGNF grids (like 
https://geodesie.ign.fr/contenu/fichiers/documentation/grilles/outremer/RAR07_bl.gra), 
which is identical to your sample, except that the values of the header 
in .gra are split on 3 lines... and the order of longitudes and 
latitudes are switched... Both were handled by the IGNFHeightASCIIGrid 
driver that was retired in 
https://github.com/OSGeo/gdal/commit/87721936b700b7e6a1ce52fba33d24c995c12472 
and moved to?OSGeo/gdal-extra-drivers in 
https://github.com/OSGeo/gdal-extra-drivers/commit/3db74a53b6ee6a0eb6645a0e4ecab31af7215600 
. Reason being that IGNF releases one grid every few years, so I'm fine 
spending 1 minute to build an out of tree driver when needed.? Given the 
lack of any metadata key, it is quite difficult to write a reliable 
automatic driver because of all the potential variants on the header 
field order.

Even


Le 22/07/2024 ? 18:17, Javier Jimenez Shaw via gdal-dev a ?crit?:
> Hi
>
> I have seen some raster files with this format
>
> -4.983333 14.983333 -79.983333 -66.016667 0.03333333333333333 
> 0.03333333333333333
> -5.258 -5.301 -5.345 -5.393 -5.444 -5.499 -5.555 -5.615 -5.682 -5.752 
> -5.823 -5.886 -5.938 -5.986 -6.036 -6.093 -6.157 -6.226 -6.296 -6.358 
> -6.413 -6.462 -6.516 -6.574 -6.636 -6.700 -6.761 -6.819 -6.868 -6.901 
> -6.933 -6.962 -7.004 -7.069 -7.156 -7.263 -7.374 -7.479 -7.581 -7.669 
> -7.748 -7.814 -7.873 -7.923 -7.973 -8.027 -8.084 -8.143 -8.208 -8.278 
> -8.355 -8.447 -8.552 -8.670 -8.790 -8.911
> ...
> The first line (six numbers) is the bounding box (4) and the grid 
> steps (2), all in degrees.
> Then all the pixel values (as in AAIGrid format).
>
> If I try to run gdalinfo, I get
>
> ERROR 1: Maximum number of characters allowed reached.
> ERROR 1: Couldn't determine X spacing
> gdalinfo failed - unable to open 'file.txt'.
>
> However, if I change the first line with this command to convert it 
> into a https://gdal.org/drivers/raster/aaigrid.html , is works
>
> awk 'NR==1 {print "NCOLS "($4-$3)/$6+1 "\nNROWS "($2-$1)/$5+1 
> "\nXLLCENTER "$3 "\nYLLCENTER "$1 ?"\nCELLSIZE "$6} NR>1 {print $0}' 
> <source_file>
>
> Producing something like this:
>
> NCOLS 420
> NROWS 600
> XLLCENTER -79.983333
> YLLCENTER -4.983333
> CELLSIZE 0.03333333333333333
> -5.258 -5.301 -5.345 -5.393 -5.444 -5.499 -5.555 -5.615 -5.682 -5.752 
> -5.823 -5.886 -5.938 -5.986 -6.036 -6.093 -6.157 -6.226 -6.296 -6.358 
> -6.413 -6.462 -6.516 -6.574 -6.636 -6.700 -6.761 -6.819 -6.868 -6.901 
> -6.933 -6.962 -7.004 -7.069 -7.156 -7.263 -7.374 -7.479 -7.581 -7.669 
> -7.748 -7.814 -7.873 -7.923 -7.973 -8.027 -8.084 -8.143 -8.208 -8.278 
> -8.355 -8.447 -8.552 -8.670 -8.790 -8.91
> ...
>
> See that I am assuming that the coordinates in the first line are at 
> the pixel center.
>
> Do you know what is that initial format? Is it a "variation" of 
> "AAIGrid -- Arc/Info ASCII Grid"? Something else? Is it worth it to 
> add it to GDAL? (maybe the awk script is enough)
>
> Thanks
> .___ ._ ..._ .. . ._.? .___ .. __ . _. . __..? ... .... ._ .__
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240722/774f7225/attachment.htm>

From j1 at jimenezshaw.com  Mon Jul 22 10:34:05 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 22 Jul 2024 19:34:05 +0200
Subject: [gdal-dev] Unknown ASCII raster format
In-Reply-To: <b7e3765f-8978-484d-9901-cde2c3a335fd@spatialys.com>
References: <CADRrdKtdHWRJ3eAdj7xGt8sr+dfzC9dU_fLunWskX7N8MSMQFg@mail.gmail.com>
 <b7e3765f-8978-484d-9901-cde2c3a335fd@spatialys.com>
Message-ID: <CADRrdKvJq+GD2HATeFwRNFv+4yJ-zxG9xQzNFoB+x22uxSvURA@mail.gmail.com>

Thanks Even

Then I think that the awk command is enough if anybody (including me) needs
it.
(note for future users: if step size is different in both directions, use
dx and dy keys. Check AAIGrid code)

On Mon, 22 Jul 2024 at 19:15, Even Rouault <even.rouault at spatialys.com>
wrote:

> Javier,
>
> yes I've came across similarly looking grid files occasionally. I'm not
> quite sure which ancestor format is behind. This is a bit similar to the
> IGN France ASCII grid .mnt format documented at
> https://geodesie.ign.fr/contenu/fichiers/documentation/grilles/notices/Grilles-MNT-TXT_Formats.pdf,
> except it has extra fields in the header to document the number of values
> per node, etc. Or actually, the closest would be the .gra format that was
> used at a time for older IGNF grids (like
> https://geodesie.ign.fr/contenu/fichiers/documentation/grilles/outremer/RAR07_bl.gra),
> which is identical to your sample, except that the values of the header in
> .gra are split on 3 lines... and the order of longitudes and latitudes are
> switched... Both were handled by the IGNFHeightASCIIGrid driver that was
> retired in
> https://github.com/OSGeo/gdal/commit/87721936b700b7e6a1ce52fba33d24c995c12472
> and moved to OSGeo/gdal-extra-drivers in
> https://github.com/OSGeo/gdal-extra-drivers/commit/3db74a53b6ee6a0eb6645a0e4ecab31af7215600
> . Reason being that IGNF releases one grid every few years, so I'm fine
> spending 1 minute to build an out of tree driver when needed.  Given the
> lack of any metadata key, it is quite difficult to write a reliable
> automatic driver because of all the potential variants on the header field
> order.
>
> Even
>
>
> Le 22/07/2024 ? 18:17, Javier Jimenez Shaw via gdal-dev a ?crit :
>
> Hi
>
> I have seen some raster files with this format
>
> -4.983333 14.983333 -79.983333 -66.016667 0.03333333333333333
> 0.03333333333333333
> -5.258 -5.301 -5.345 -5.393 -5.444 -5.499 -5.555 -5.615 -5.682 -5.752
> -5.823 -5.886 -5.938 -5.986 -6.036 -6.093 -6.157 -6.226 -6.296 -6.358
> -6.413 -6.462 -6.516 -6.574 -6.636 -6.700 -6.761 -6.819 -6.868 -6.901
> -6.933 -6.962 -7.004 -7.069 -7.156 -7.263 -7.374 -7.479 -7.581 -7.669
> -7.748 -7.814 -7.873 -7.923 -7.973 -8.027 -8.084 -8.143 -8.208 -8.278
> -8.355 -8.447 -8.552 -8.670 -8.790 -8.911
> ...
> The first line (six numbers) is the bounding box (4) and the grid steps
> (2), all in degrees.
> Then all the pixel values (as in AAIGrid format).
>
> If I try to run gdalinfo, I get
>
> ERROR 1: Maximum number of characters allowed reached.
> ERROR 1: Couldn't determine X spacing
> gdalinfo failed - unable to open 'file.txt'.
>
> However, if I change the first line with this command to convert it into a
> https://gdal.org/drivers/raster/aaigrid.html , is works
>
> awk 'NR==1 {print "NCOLS "($4-$3)/$6+1 "\nNROWS "($2-$1)/$5+1 "\nXLLCENTER
> "$3 "\nYLLCENTER "$1  "\nCELLSIZE "$6} NR>1 {print $0}' <source_file>
>
> Producing something like this:
>
> NCOLS 420
> NROWS 600
> XLLCENTER -79.983333
> YLLCENTER -4.983333
> CELLSIZE 0.03333333333333333
> -5.258 -5.301 -5.345 -5.393 -5.444 -5.499 -5.555 -5.615 -5.682 -5.752
> -5.823 -5.886 -5.938 -5.986 -6.036 -6.093 -6.157 -6.226 -6.296 -6.358
> -6.413 -6.462 -6.516 -6.574 -6.636 -6.700 -6.761 -6.819 -6.868 -6.901
> -6.933 -6.962 -7.004 -7.069 -7.156 -7.263 -7.374 -7.479 -7.581 -7.669
> -7.748 -7.814 -7.873 -7.923 -7.973 -8.027 -8.084 -8.143 -8.208 -8.278
> -8.355 -8.447 -8.552 -8.670 -8.790 -8.91
> ...
>
> See that I am assuming that the coordinates in the first line are at the
> pixel center.
>
> Do you know what is that initial format? Is it a "variation" of "AAIGrid
> -- Arc/Info ASCII Grid"? Something else? Is it worth it to add it to GDAL?
> (maybe the awk script is enough)
>
> Thanks
> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240722/a90c58a5/attachment-0001.htm>

From jluis at ualg.pt  Mon Jul 22 12:10:51 2024
From: jluis at ualg.pt (=?utf-8?B?Sm9hcXVpbSBNYW51ZWwgRnJlaXJlIEx1w61z?=)
Date: Mon, 22 Jul 2024 19:10:51 +0000
Subject: [gdal-dev] Extracting data from a parquet file
In-Reply-To: <8da1b7e8-056c-4fb9-955e-2c87e48e7e3c@spatialys.com>
References: <GVXPR04MB99263661C7DD2D2CB056C316A6AD2@GVXPR04MB9926.eurprd04.prod.outlook.com>
 <8da1b7e8-056c-4fb9-955e-2c87e48e7e3c@spatialys.com>
Message-ID: <GVXPR04MB9926739628FEFD67550F5AB2A6A82@GVXPR04MB9926.eurprd04.prod.outlook.com>

Even,

Thanks for the explanation. But how did you find the name of the geometries (geo_point_2D and geo_shape)? Loading the ?world-administrative-boundaries.parquet? in a binary editor I can see them there, but that?s certainly not the way to find these things.

Joaquim

From: Even Rouault <even.rouault at spatialys.com>
Sent: Monday, July 22, 2024 2:29 PM
To: Joaquim Manuel Freire Lu?s <jluis at ualg.pt>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Extracting data from a parquet file


Joaquim,

The GeoPackage format only supports one geometry field per layer. and the QGIS OGR provider doesn't know currently how to handle several geometry fields per layer too

To do what you want, you need to explictly select the desired geometry field name with:

ogr2ogr out.gpkg world-administrative-boundaries.parquet -sql "select geo_shape, * from \"world-administrative-boundaries\""

Actually if you outputted to a format that supports several geometry fields per layer (let's say PostGIS), the above wouldn't work. You would need to exclude the geometry fields from the wildcard * selection with:

ogr2ogr out.gpkg  world-administrative-boundaries.parquet -sql "select geo_shape, * exclude (geo_point_2D, geo_shape) from \"world-administrative-boundaries\""

Even
Le 19/07/2024 ? 16:58, Joaquim Manuel Freire Lu?s via gdal-dev a ?crit :
Hi,

I finally managed to build a working GDAL with the arrow/parquet driver and I?m now trying to convert this file
(https://public.opendatasoft.com/api/explore/v2.1/catalog/datasets/world-administrative-boundaries/exports/parquet?lang=en&timezone=Europe%2FLondon)
but can only extract the ?Point?, not the ?Multi polygon?

ogrinfo world-administrative-boundaries.parquet
INFO: Open of `world-administrative-boundaries.parquet'
      using driver `Parquet' successful.
1: world-administrative-boundaries (Point, Multi Polygon)

This gets only the points

ogr2ogr lixo.gpkg world-administrative-boundaries.parquet

The same happens if I open the file in QGis. Points only, no polygons.

But if I do an ogrinfo -al, it prints all data in file.

ogrinfo -al world-administrative-boundaries.parquet

?.

OGRFeature(world-administrative-boundaries):255
  iso3 (String) = GIB
  status (String) = UK Non-Self-Governing Territory
  color_code (String) = GBR
  name (String) = Gibraltar
?

So, how can we select in ogr2ogr to extract the polygons?



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240722/fb32cec8/attachment.htm>

From even.rouault at spatialys.com  Mon Jul 22 12:29:35 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 22 Jul 2024 21:29:35 +0200
Subject: [gdal-dev] Extracting data from a parquet file
In-Reply-To: <GVXPR04MB9926739628FEFD67550F5AB2A6A82@GVXPR04MB9926.eurprd04.prod.outlook.com>
References: <GVXPR04MB99263661C7DD2D2CB056C316A6AD2@GVXPR04MB9926.eurprd04.prod.outlook.com>
 <8da1b7e8-056c-4fb9-955e-2c87e48e7e3c@spatialys.com>
 <GVXPR04MB9926739628FEFD67550F5AB2A6A82@GVXPR04MB9926.eurprd04.prod.outlook.com>
Message-ID: <67a1a19b-0802-4423-898b-0a5048581627@spatialys.com>


Le 22/07/2024 ? 21:10, Joaquim Manuel Freire Lu?s a ?crit?:
>
> Even,
>
> Thanks for the explanation. But how did you find the name of the 
> geometries (geo_point_2D and geo_shape)? Loading the 
> ?world-administrative-boundaries.parquet? in a binary editor I can see 
> them there, but that?s certainly not the way to find these things.
>
$ ogrinfo world-administrative-boundaries.parquet -al -so | grep 
"Geometry Column"
Geometry Column 1 = geo_point_2d
Geometry Column 2 = geo_shape

> Joaquim
>
> *From:*Even Rouault <even.rouault at spatialys.com>
> *Sent:* Monday, July 22, 2024 2:29 PM
> *To:* Joaquim Manuel Freire Lu?s <jluis at ualg.pt>; gdal-dev at lists.osgeo.org
> *Subject:* Re: [gdal-dev] Extracting data from a parquet file
>
> Joaquim,
>
> The GeoPackage format only supports one geometry field per layer. and 
> the QGIS OGR provider doesn't know currently how to handle several 
> geometry fields per layer too
>
> To do what you want, you need to explictly select the desired geometry 
> field name with:
>
> ogr2ogr out.gpkg world-administrative-boundaries.parquet -sql "select 
> geo_shape, * from \"world-administrative-boundaries\""
>
> Actually if you outputted to a format that supports several geometry 
> fields per layer (let's say PostGIS), the above wouldn't work. You 
> would need to exclude the geometry fields from the wildcard * 
> selection with:
>
> ogr2ogr out.gpkg world-administrative-boundaries.parquet -sql "select 
> geo_shape, * exclude (geo_point_2D, geo_shape) from 
> \"world-administrative-boundaries\""
>
> Even
>
> Le 19/07/2024 ? 16:58, Joaquim Manuel Freire Lu?s via gdal-dev a ?crit?:
>
>     Hi,
>
>     I finally managed to build a working GDAL with the arrow/parquet
>     driver and I?m now trying to convert this file
>
>     (https://public.opendatasoft.com/api/explore/v2.1/catalog/datasets/world-administrative-boundaries/exports/parquet?lang=en&timezone=Europe%2FLondon
>     <https://public.opendatasoft.com/api/explore/v2.1/catalog/datasets/world-administrative-boundaries/exports/parquet?lang=en&timezone=Europe%2FLondon>)
>
>     but can only extract the ?Point?, not the ?Multi polygon?
>
>     ogrinfo world-administrative-boundaries.parquet
>
>     INFO: Open of `world-administrative-boundaries.parquet'
>
>     ????? using driver `Parquet' successful.
>
>     1: world-administrative-boundaries (Point, Multi Polygon)
>
>     This gets only the points
>
>     ogr2ogr lixo.gpkg world-administrative-boundaries.parquet
>
>     The same happens if I open the file in QGis. Points only, no polygons.
>
>     But if I do an ogrinfo -al, it prints all data in file.
>
>     ogrinfo -al world-administrative-boundaries.parquet
>
>     ?.
>
>     OGRFeature(world-administrative-boundaries):255
>
>     ? iso3 (String) = GIB
>
>     ? status (String) = UK Non-Self-Governing Territory
>
>     ? color_code (String) = GBR
>
>     ? name (String) = Gibraltar
>
>     ?
>
>     So, how can we select in ogr2ogr to extract the polygons?
>
>
>
>     _______________________________________________
>
>     gdal-dev mailing list
>
>     gdal-dev at lists.osgeo.org
>
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240722/58cef890/attachment-0001.htm>

From jluis at ualg.pt  Mon Jul 22 14:21:30 2024
From: jluis at ualg.pt (=?utf-8?B?Sm9hcXVpbSBNYW51ZWwgRnJlaXJlIEx1w61z?=)
Date: Mon, 22 Jul 2024 21:21:30 +0000
Subject: [gdal-dev] Extracting data from a parquet file
In-Reply-To: <67a1a19b-0802-4423-898b-0a5048581627@spatialys.com>
References: <GVXPR04MB99263661C7DD2D2CB056C316A6AD2@GVXPR04MB9926.eurprd04.prod.outlook.com>
 <8da1b7e8-056c-4fb9-955e-2c87e48e7e3c@spatialys.com>
 <GVXPR04MB9926739628FEFD67550F5AB2A6A82@GVXPR04MB9926.eurprd04.prod.outlook.com>
 <67a1a19b-0802-4423-898b-0a5048581627@spatialys.com>
Message-ID: <GVXPR04MB99263F578A82F4B98D420494A6A82@GVXPR04MB9926.eurprd04.prod.outlook.com>

Ah, easy ?

From: Even Rouault <even.rouault at spatialys.com>
Sent: Monday, July 22, 2024 8:30 PM
To: Joaquim Manuel Freire Lu?s <jluis at ualg.pt>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Extracting data from a parquet file



Le 22/07/2024 ? 21:10, Joaquim Manuel Freire Lu?s a ?crit :
Even,

Thanks for the explanation. But how did you find the name of the geometries (geo_point_2D and geo_shape)? Loading the ?world-administrative-boundaries.parquet? in a binary editor I can see them there, but that?s certainly not the way to find these things.
$ ogrinfo world-administrative-boundaries.parquet -al -so | grep "Geometry Column"
Geometry Column 1 = geo_point_2d
Geometry Column 2 = geo_shape



Joaquim

From: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>
Sent: Monday, July 22, 2024 2:29 PM
To: Joaquim Manuel Freire Lu?s <jluis at ualg.pt><mailto:jluis at ualg.pt>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Extracting data from a parquet file


Joaquim,

The GeoPackage format only supports one geometry field per layer. and the QGIS OGR provider doesn't know currently how to handle several geometry fields per layer too

To do what you want, you need to explictly select the desired geometry field name with:

ogr2ogr out.gpkg world-administrative-boundaries.parquet -sql "select geo_shape, * from \"world-administrative-boundaries\""

Actually if you outputted to a format that supports several geometry fields per layer (let's say PostGIS), the above wouldn't work. You would need to exclude the geometry fields from the wildcard * selection with:

ogr2ogr out.gpkg  world-administrative-boundaries.parquet -sql "select geo_shape, * exclude (geo_point_2D, geo_shape) from \"world-administrative-boundaries\""

Even
Le 19/07/2024 ? 16:58, Joaquim Manuel Freire Lu?s via gdal-dev a ?crit :
Hi,

I finally managed to build a working GDAL with the arrow/parquet driver and I?m now trying to convert this file
(https://public.opendatasoft.com/api/explore/v2.1/catalog/datasets/world-administrative-boundaries/exports/parquet?lang=en&timezone=Europe%2FLondon)
but can only extract the ?Point?, not the ?Multi polygon?

ogrinfo world-administrative-boundaries.parquet
INFO: Open of `world-administrative-boundaries.parquet'
      using driver `Parquet' successful.
1: world-administrative-boundaries (Point, Multi Polygon)

This gets only the points

ogr2ogr lixo.gpkg world-administrative-boundaries.parquet

The same happens if I open the file in QGis. Points only, no polygons.

But if I do an ogrinfo -al, it prints all data in file.

ogrinfo -al world-administrative-boundaries.parquet

?.

OGRFeature(world-administrative-boundaries):255
  iso3 (String) = GIB
  status (String) = UK Non-Self-Governing Territory
  color_code (String) = GBR
  name (String) = Gibraltar
?

So, how can we select in ogr2ogr to extract the polygons?




_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com

My software is free, but my time generally not.

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240722/66466f21/attachment.htm>

From a.pau at creaf.cat  Tue Jul 23 00:57:55 2024
From: a.pau at creaf.cat (Abel Pau)
Date: Tue, 23 Jul 2024 07:57:55 +0000
Subject: [gdal-dev] Problems compiling the project
In-Reply-To: <PAXPR07MB777571993AEDBE6198BFCAB9FAAD2@PAXPR07MB7775.eurprd07.prod.outlook.com>
References: <PAXPR07MB777502A2671370695DCE0217FAA32@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <PAXPR07MB7775398BEB725AAE362C4071FAA32@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <40b818c3-04b6-4399-a09f-697685ed6fbc@spatialys.com>
 <PAXPR07MB777571993AEDBE6198BFCAB9FAAD2@PAXPR07MB7775.eurprd07.prod.outlook.com>
Message-ID: <PAXPR07MB7775FA668A496F5D196C2FF4FAA92@PAXPR07MB7775.eurprd07.prod.outlook.com>

I found the problem.
As always I has an environment variable pointing to a folder with a release popler.lib (this environment variable has nothing to do with the GDAL driver I was trying to compile).
So, all right, thanks!

De: gdal-dev <gdal-dev-bounces at lists.osgeo.org> En nombre de Abel Pau via gdal-dev
Enviado el: divendres, 19 de juliol de 2024 16:30
Para: Even Rouault <even.rouault at spatialys.com>; gdal-dev at lists.osgeo.org
Asunto: Re: [gdal-dev] Problems compiling the project

Hi Even,
I tried at some point using the --config Debug option.
It makes no difference.

I don?t understand the difference between now and some months ago.

I?ll keep looking for a solution.
Thanks!

De: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>
Enviado el: dijous, 18 de juliol de 2024 12:17
Para: Abel Pau <a.pau at creaf.cat<mailto:a.pau at creaf.cat>>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] Problems compiling the project


Hi Abel,

the error message indicates that the build is trying to link a release version of poppler.lib, whereas your build is a debug one.

For multi-config generators like Visual Studio builds, I'm not sure how -DCMAKE_BUILD_TYPE=Debug is effective. You perhaps need to do the following instead:

cmake --build build --config Debug

Even
Le 17/07/2024 ? 17:59, Abel Pau via gdal-dev a ?crit :
Hi,
I?m trying to compile the project using the two lines that always have worked:
cmake -B build -S . -DCMAKE_TOOLCHAIN_FILE=C:/dev/vcpkg/vcpkg/scripts/buildsystems/vcpkg.cmake -DCMAKE_BUILD_TYPE=Debug
cmake --build build

Before starting I deleted the build folder.
The first line is ok and creates the projects... but the second one gives me some red errors.

I?m using windows and Visual Studio 2019

Is there something I?m missing?

Thanks!

Generating Code...
  shapelib.vcxproj -> D:\GitHub-repository\gdal\build\ogr\ogrsf_frmts\shape\shapelib.dir\Debug\shapelib.lib
  Building Custom Rule D:/GitHub-repository/gdal/CMakeLists.txt
poppler.lib(Error.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2
' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(Error.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match
value 'MDd_DynamicDebug' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(Object.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '
2' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(Object.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't matc
h value 'MDd_DynamicDebug' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(Catalog.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value
'2' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(Catalog.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't mat
ch value 'MDd_DynamicDebug' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(XRef.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2'
in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(XRef.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match
value 'MDd_DynamicDebug' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]
poppler.lib(OptionalContent.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't matc
h value '2' in cpl_alibaba_oss.obj [D:\GitHub-repository\gdal\build\GDAL.vcxproj]


Abel Pau Garcia
[https://www.creaf.cat/sites/default/files/logo-creaf-small.jpg]<https://www.creaf.cat/>
GIS developer
a.pau at creaf.uab.cat <mailto:a.pau at creaf.uab.cat>
[https://www.creaf.cat/sites/default/files/cap_0.png]
Let's chat on Teams! <https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
Tel. +34 934814277
[https://www.creaf.cat/sites/default/files/x_30.png]<https://twitter.com/CREAF_ecologia>[https://www.creaf.cat/sites/default/files/linkedin_30.png]<https://www.linkedin.com/company/creaf/>[https://www.creaf.cat/sites/default/files/youtube_30.png]<https://www.youtube.com/c/creafecologia>[https://www.creaf.cat/sites/default/files/instagram_30.png]<https://www.instagram.com/CREAF_ecologia/>
www.creaf.cat <http://www.creaf.cat> | http://blog.creaf.cat
CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona) <https://www.openstreetmap.org/way/123379060>

Pol?tica de privacitat <https://www.creaf.cat/ca/politica-de-privacitat>
[https://www.creaf.cat/sites/default/files/corner_right_0.png]
Abans d'imprimir aquest missatge electr?nic penseu en el medi ambient.




_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240723/a41e5af0/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 10974 bytes
Desc: image001.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240723/a41e5af0/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 154 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240723/a41e5af0/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 3946 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240723/a41e5af0/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 3678 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240723/a41e5af0/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 3646 bytes
Desc: image005.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240723/a41e5af0/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 4056 bytes
Desc: image006.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240723/a41e5af0/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.png
Type: image/png
Size: 640 bytes
Desc: image007.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240723/a41e5af0/attachment-0011.png>

From j1 at jimenezshaw.com  Tue Jul 23 01:57:03 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Tue, 23 Jul 2024 10:57:03 +0200
Subject: [gdal-dev] r option in gdaladdo
Message-ID: <CADRrdKspEgMBuVdmC=9A-0jaq1e7QMGeaqCP73CxRSkY8GyTFw@mail.gmail.com>

Reading carefully https://gdal.org/programs/gdaladdo.html
I saw that the summary mentions

[-r
{nearest|average|rms|gauss|cubic|cubicspline|lanczos|average_mp|average_magphase|mode}]

but later in the options "bilinear" is included. Either it should be in
both or in none.

In addition to that, in the summary there are "average_magphase" and
"average_mp", but in the later description, only average_magphase. It is
not clear if they are the same or different. Looking at the code I think
they are not the same thing.

Should that be changed? if yes, how?

Cheers
Javier
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240723/8d9c3b23/attachment.htm>

From even.rouault at spatialys.com  Tue Jul 23 02:38:36 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 23 Jul 2024 11:38:36 +0200
Subject: [gdal-dev] r option in gdaladdo
In-Reply-To: <CADRrdKspEgMBuVdmC=9A-0jaq1e7QMGeaqCP73CxRSkY8GyTFw@mail.gmail.com>
References: <CADRrdKspEgMBuVdmC=9A-0jaq1e7QMGeaqCP73CxRSkY8GyTFw@mail.gmail.com>
Message-ID: <05aed3fd-7f19-4fff-b423-36cb646bf30d@spatialys.com>

Javier,

I've just advertized bilinear.

For average_mp vs average_magphase, they are indeed different code paths.

My understanding of the code is that:

- average_magphase is only available for the complex data types

- for the complex?data types, average_magphase makes sure that the norm 
of the output pixel is the average of the norms of the contributing 
input pixels, for each pixel. Whereas average_mp (according to 
4d678d358354497813c2933ad1c18a924a3859e3, this stands for Magnitude 
Preserving averaging) does first standard averaging on the real and 
imaginary parts, but then multiply both components by gain = 
standard_deviation_of_input_band / 
standard_deviation_of_overview_band_before_correction.

- average_mp is also available for the non-complex data types, but then 
it modifies the output pixels such that output_pixel = 
(output_pixel_before_correction - 
mean_of_overview_band_before_correction) * gain + mean_of_input_band.

Feel free to experiment a bit to confirm my reading, and provide doc 
enhancements. As far as I can see, there is zero regression testing of 
those 2 methods (they date back to 2001, not sure the autotest framework 
was available at that time).

Even

Le 23/07/2024 ? 10:57, Javier Jimenez Shaw via gdal-dev a ?crit?:
> Reading carefully https://gdal.org/programs/gdaladdo.html
> I saw that the summary mentions
>
> [-r 
> {nearest|average|rms|gauss|cubic|cubicspline|lanczos|average_mp|average_magphase|mode}]
>
> but later in the options "bilinear" is included. Either it should be 
> in both or in none.
>
> In addition to that, in the summary there are "average_magphase" and 
> "average_mp", but in the later description, only average_magphase. It 
> is not clear if they are the same or different. Looking at the code I 
> think they are not the same thing.
>
> Should that be changed? if yes, how?
>
> Cheers
> Javier
> .___ ._ ..._ .. . ._.? .___ .. __ . _. . __..? ... .... ._ .__
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240723/5f0ba9f7/attachment.htm>

From dbaston at gmail.com  Tue Jul 23 09:14:40 2024
From: dbaston at gmail.com (Daniel Baston)
Date: Tue, 23 Jul 2024 12:14:40 -0400
Subject: [gdal-dev] Building GDAL documentation with ReadTheDocs
Message-ID: <CA+K_q_o5bak036c8VcB4hi-2y5ti9-uebu8T2kvO0H=deLOFkQ@mail.gmail.com>

Hello,

I've put together a configuration to build GDAL's documentation using
ReadTheDocs. As far as I know, this is the simplest way of publishing
version-specific documentation and rending documentation for pull
requests. A current build of the documentation can be viewed at
https://gdal.readthedocs.io/en/latest/. A pull request with the
proposed configuration is available at
https://github.com/OSGeo/gdal/pull/10434.

If anyone has feedback about using ReadTheDocs for this project, or
the specifics of the proposed configuration, please share it here or
as a comment on the pull request.

Thanks,
Dan

From gdt at lexort.com  Tue Jul 23 10:18:16 2024
From: gdt at lexort.com (Greg Troxel)
Date: Tue, 23 Jul 2024 13:18:16 -0400
Subject: [gdal-dev] Building GDAL documentation with ReadTheDocs
In-Reply-To: <CA+K_q_o5bak036c8VcB4hi-2y5ti9-uebu8T2kvO0H=deLOFkQ@mail.gmail.com>
 (Daniel Baston via gdal-dev's message of "Tue, 23 Jul 2024 12:14:40
 -0400")
References: <CA+K_q_o5bak036c8VcB4hi-2y5ti9-uebu8T2kvO0H=deLOFkQ@mail.gmail.com>
Message-ID: <rmizfq8do2v.fsf@s1.lexort.com>

Daniel Baston via gdal-dev <gdal-dev at lists.osgeo.org> writes:

> Hello,
>
> I've put together a configuration to build GDAL's documentation using
> ReadTheDocs. As far as I know, this is the simplest way of publishing
> version-specific documentation and rending documentation for pull
> requests. A current build of the documentation can be viewed at
> https://gdal.readthedocs.io/en/latest/. A pull request with the
> proposed configuration is available at
> https://github.com/OSGeo/gdal/pull/10434.
>
> If anyone has feedback about using ReadTheDocs for this project, or
> the specifics of the proposed configuration, please share it here or
> as a comment on the pull request.

I agree that version-specific doc publication and docs on PRs is nice.

With things that feel like hosted services, I always want to ask:

  1) Is the toolchain that we will be using 100% open source?

  2) Could we, if readthedocs.io shut down, or if we felt like it, easily
  switch to doing this all on an osgeo website?  Could we easily have
  downloads of browseable tarballs?  Could a random user easily check
  out the docs repo and (with 100% open source tooling) generate the
  docs?

  3) The website loads ads from "ethicalads.io":

    https://media.ethicalads.io/media/client/beta/ethicalads.min.js

  which is hard to read.  It loads something else that uBlock Origin
  objects to:

    https://readthedocs.org/api/v2/sustainability/data/?callback=jQuery360005151577479217162_1721754548069&format=jsonp&project=gdal&_=1721754548070

  which results in

    jQuery360005151577479217162_1721754548069({"ad_free":false,"campaign_types":["community","house","paid"],"keywords":["only words","readthedocs-project-1031375","readthedocs-project-gdal"],"publisher":"readthedocs"});

  and also loads self-hosted analytics:

    https://gdal.readthedocs.io/_/api/v2/analytics/?project=gdal&version=latest&absolute_uri=https%3A%2F%2Fgdal.readthedocs.io%2Fen%2Flatest%2F
    https://gdal.readthedocs.io/_/static/javascript/readthedocs-analytics.js

  I do not find a doc site privacy policy in a footer.  There is no GDPR
  cookie consent -- those can be dreadful, I know -- but I doubt "no
  cookies are set" is really how it is.   I have no fundamental problem
  with cookies -- I'm thinking about tracking.

I would say that if 1 or 2 is not ok, then I see this as problematic,
but I'm hoping they are both fine.

For 3, not sure what the community wants to do, but I'm mildly
uncomfortable.  It seems less bad than using github, but that doesn't
automatically make it ok :-)

In my view, docs should be part of a package build and installed so they
are available on the computer with the software.  If it's just sphinx,
that can just be part of the gdal build and installed to
$prefix/share/doc/gdal/html, optionally off, or buildable separately to
make the gdal-doc package.  This could be the same toolchain as RTD of
course.


From public at postholer.com  Tue Jul 23 10:21:31 2024
From: public at postholer.com (Scott)
Date: Tue, 23 Jul 2024 10:21:31 -0700
Subject: [gdal-dev] Building GDAL documentation with ReadTheDocs
In-Reply-To: <rmizfq8do2v.fsf@s1.lexort.com>
References: <CA+K_q_o5bak036c8VcB4hi-2y5ti9-uebu8T2kvO0H=deLOFkQ@mail.gmail.com>
 <rmizfq8do2v.fsf@s1.lexort.com>
Message-ID: <57a62111-7dca-4761-91ce-d6f11c83ce6e@postholer.com>

This is wildly important for systems without internet access.

On 7/23/24 10:18, Greg Troxel via gdal-dev wrote:
> In my view, docs should be part of a package build and installed so they
> are available on the computer with the software.

From even.rouault at spatialys.com  Tue Jul 23 10:28:47 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 23 Jul 2024 19:28:47 +0200
Subject: [gdal-dev] Building GDAL documentation with ReadTheDocs
In-Reply-To: <rmizfq8do2v.fsf@s1.lexort.com>
References: <CA+K_q_o5bak036c8VcB4hi-2y5ti9-uebu8T2kvO0H=deLOFkQ@mail.gmail.com>
 <rmizfq8do2v.fsf@s1.lexort.com>
Message-ID: <679d89d8-603b-4f76-8c13-0f8f514c6c6e@spatialys.com>


Le 23/07/2024 ? 19:18, Greg Troxel via gdal-dev a ?crit?:
> Daniel Baston via gdal-dev<gdal-dev at lists.osgeo.org>  writes:
>
>> Hello,
>>
>> I've put together a configuration to build GDAL's documentation using
>> ReadTheDocs. As far as I know, this is the simplest way of publishing
>> version-specific documentation and rending documentation for pull
>> requests. A current build of the documentation can be viewed at
>> https://gdal.readthedocs.io/en/latest/. A pull request with the
>> proposed configuration is available at
>> https://github.com/OSGeo/gdal/pull/10434.
>>
>> If anyone has feedback about using ReadTheDocs for this project, or
>> the specifics of the proposed configuration, please share it here or
>> as a comment on the pull request.
> I agree that version-specific doc publication and docs on PRs is nice.
>
> With things that feel like hosted services, I always want to ask:

We already had that discussion when PROJ migrated to RTD hosting last 
year. So 
https://lists.osgeo.org/pipermail/proj/2023-February/010919.html should 
equally apply

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240723/d8b62e0e/attachment.htm>

From dbaston at gmail.com  Tue Jul 23 11:07:40 2024
From: dbaston at gmail.com (Daniel Baston)
Date: Tue, 23 Jul 2024 14:07:40 -0400
Subject: [gdal-dev] Building GDAL documentation with ReadTheDocs
In-Reply-To: <rmizfq8do2v.fsf@s1.lexort.com>
References: <CA+K_q_o5bak036c8VcB4hi-2y5ti9-uebu8T2kvO0H=deLOFkQ@mail.gmail.com>
 <rmizfq8do2v.fsf@s1.lexort.com>
Message-ID: <CA+K_q_qZ1u0oz9RdNQYfGh5FZkpRKRsswJ1WAthL=0iOJxks6g@mail.gmail.com>

> Could a random user easily check
> out the docs repo and (with 100% open source tooling) generate the
> docs?

Yes, we are currently and would continue to use Sphinx for the
documentation build.

Dan



On Tue, Jul 23, 2024 at 1:18?PM Greg Troxel via gdal-dev
<gdal-dev at lists.osgeo.org> wrote:
>
> Daniel Baston via gdal-dev <gdal-dev at lists.osgeo.org> writes:
>
> > Hello,
> >
> > I've put together a configuration to build GDAL's documentation using
> > ReadTheDocs. As far as I know, this is the simplest way of publishing
> > version-specific documentation and rending documentation for pull
> > requests. A current build of the documentation can be viewed at
> > https://gdal.readthedocs.io/en/latest/. A pull request with the
> > proposed configuration is available at
> > https://github.com/OSGeo/gdal/pull/10434.
> >
> > If anyone has feedback about using ReadTheDocs for this project, or
> > the specifics of the proposed configuration, please share it here or
> > as a comment on the pull request.
>
> I agree that version-specific doc publication and docs on PRs is nice.
>
> With things that feel like hosted services, I always want to ask:
>
>   1) Is the toolchain that we will be using 100% open source?
>
>   2) Could we, if readthedocs.io shut down, or if we felt like it, easily
>   switch to doing this all on an osgeo website?  Could we easily have
>   downloads of browseable tarballs?  Could a random user easily check
>   out the docs repo and (with 100% open source tooling) generate the
>   docs?
>
>   3) The website loads ads from "ethicalads.io":
>
>     https://media.ethicalads.io/media/client/beta/ethicalads.min.js
>
>   which is hard to read.  It loads something else that uBlock Origin
>   objects to:
>
>     https://readthedocs.org/api/v2/sustainability/data/?callback=jQuery360005151577479217162_1721754548069&format=jsonp&project=gdal&_=1721754548070
>
>   which results in
>
>     jQuery360005151577479217162_1721754548069({"ad_free":false,"campaign_types":["community","house","paid"],"keywords":["only words","readthedocs-project-1031375","readthedocs-project-gdal"],"publisher":"readthedocs"});
>
>   and also loads self-hosted analytics:
>
>     https://gdal.readthedocs.io/_/api/v2/analytics/?project=gdal&version=latest&absolute_uri=https%3A%2F%2Fgdal.readthedocs.io%2Fen%2Flatest%2F
>     https://gdal.readthedocs.io/_/static/javascript/readthedocs-analytics.js
>
>   I do not find a doc site privacy policy in a footer.  There is no GDPR
>   cookie consent -- those can be dreadful, I know -- but I doubt "no
>   cookies are set" is really how it is.   I have no fundamental problem
>   with cookies -- I'm thinking about tracking.
>
> I would say that if 1 or 2 is not ok, then I see this as problematic,
> but I'm hoping they are both fine.
>
> For 3, not sure what the community wants to do, but I'm mildly
> uncomfortable.  It seems less bad than using github, but that doesn't
> automatically make it ok :-)
>
> In my view, docs should be part of a package build and installed so they
> are available on the computer with the software.  If it's just sphinx,
> that can just be part of the gdal build and installed to
> $prefix/share/doc/gdal/html, optionally off, or buildable separately to
> make the gdal-doc package.  This could be the same toolchain as RTD of
> course.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Tue Jul 23 12:00:32 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 23 Jul 2024 21:00:32 +0200
Subject: [gdal-dev] Expected runtime of polygonize (GDAL 3.9.0) for few
 very large features.
In-Reply-To: <MN2PR09MB5932834D78C863A6F0BCC7C0C9D32@MN2PR09MB5932.namprd09.prod.outlook.com>
References: <MN2PR09MB5932834D78C863A6F0BCC7C0C9D32@MN2PR09MB5932.namprd09.prod.outlook.com>
Message-ID: <3793f19f-620f-4c43-970d-bc48d89cf611@spatialys.com>

Hi,

I've got a chance to have a look at your test dataset. In 
https://github.com/OSGeo/gdal/pull/10477, I've reduced the runtime to 8 
minutes (with GeoParquet output, without spatial sorting), by optimizing 
some implementation details. I believe this could be further reduced as 
most of the time is still spent in malloc/free of temporary objects (the 
output is 90 million polygons!) and some objects could be reused, but 
that would be more extensive changes

Even

Le 01/07/2024 ? 18:40, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND 
APPLICATIONS INC] via gdal-dev a ?crit?:
>
> Hi,
>
> We?ve encountered a few images with what seems like pathological 
> performance problems with polygonise. The details below are a report 
> from another developer that I haven?t yet independently verified.
>
> We threshold a raster image to a binary mask in a memory dataset, use 
> that as its own mask to mask out the background.
>
> gdal.Polygonize(nn_mem_band, nn_mem_band, ogr_mem_lyr, -1)
>
> We have a number of 32k x 32k raster images that feature number of 
> very large same-valued regions (some as large as 80% of the entire 
> raster). ?We?re seeing ~10hrs on a modern workstation to complete the 
> line of code above.? OpenCV can apparently construct a connected 
> components list in mere seconds, on the same workstation and image, so 
> we?re considering constructing the OGR geometries directly from those 
> as a temporary work around.
>
> Is this situation a known pitfall with the current algorithm / data 
> structures behind Polygonize?
>
> I?m able to share the problematic tile(s) if of interest,
>
> Best
>
> Jesse
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240723/6f7544c7/attachment.htm>

From jesse.r.meyer at nasa.gov  Tue Jul 23 12:08:30 2024
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Tue, 23 Jul 2024 19:08:30 +0000
Subject: [gdal-dev] [EXTERNAL] Re: Expected runtime of polygonize (GDAL
 3.9.0) for few very large features.
In-Reply-To: <3793f19f-620f-4c43-970d-bc48d89cf611@spatialys.com>
References: <MN2PR09MB5932834D78C863A6F0BCC7C0C9D32@MN2PR09MB5932.namprd09.prod.outlook.com>
 <3793f19f-620f-4c43-970d-bc48d89cf611@spatialys.com>
Message-ID: <MN2PR09MB593200969465335E9E7EA6B9C9A92@MN2PR09MB5932.namprd09.prod.outlook.com>

Excellent, thanks Even!  Do you recall what the runtime was before these changes on your test system?

From: Even Rouault <even.rouault at spatialys.com>
Date: Tuesday, July 23, 2024 at 3:00?PM
To: Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] <jesse.r.meyer at nasa.gov>, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev <gdal-dev at lists.osgeo.org>
Subject: [EXTERNAL] Re: [gdal-dev] Expected runtime of polygonize (GDAL 3.9.0) for few very large features.
CAUTION: This email originated from outside of NASA.  Please take care when clicking links or opening attachments.  Use the "Report Message" button to report suspicious messages to the NASA SOC.



Hi,

I've got a chance to have a look at your test dataset. In https://github.com/OSGeo/gdal/pull/10477, I've reduced the runtime to 8 minutes (with GeoParquet output, without spatial sorting), by optimizing some implementation details. I believe this could be further reduced as most of the time is still spent in malloc/free of temporary objects (the output is 90 million polygons!) and some objects could be reused, but that would be more extensive changes

Even
Le 01/07/2024 ? 18:40, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev a ?crit :
Hi,

We?ve encountered a few images with what seems like pathological performance problems with polygonise.  The details below are a report from another developer that I haven?t yet independently verified.

We threshold a raster image to a binary mask in a memory dataset, use that as its own mask to mask out the background.
gdal.Polygonize(nn_mem_band, nn_mem_band, ogr_mem_lyr, -1)

We have a number of 32k x 32k raster images that feature number of very large same-valued regions (some as large as 80% of the entire raster).  We?re seeing ~10hrs on a modern workstation to complete the line of code above.  OpenCV can apparently construct a connected components list in mere seconds, on the same workstation and image, so we?re considering constructing the OGR geometries directly from those as a temporary work around.

Is this situation a known pitfall with the current algorithm / data structures behind Polygonize?

I?m able to share the problematic tile(s) if of interest,
Best
Jesse



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com<http://www.spatialys.com/>

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240723/b732c8c2/attachment-0001.htm>

From even.rouault at spatialys.com  Tue Jul 23 12:32:04 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 23 Jul 2024 21:32:04 +0200
Subject: [gdal-dev] [EXTERNAL] Re: Expected runtime of polygonize (GDAL
 3.9.0) for few very large features.
In-Reply-To: <MN2PR09MB593200969465335E9E7EA6B9C9A92@MN2PR09MB5932.namprd09.prod.outlook.com>
References: <MN2PR09MB5932834D78C863A6F0BCC7C0C9D32@MN2PR09MB5932.namprd09.prod.outlook.com>
 <3793f19f-620f-4c43-970d-bc48d89cf611@spatialys.com>
 <MN2PR09MB593200969465335E9E7EA6B9C9A92@MN2PR09MB5932.namprd09.prod.outlook.com>
Message-ID: <7e038583-4f5f-4659-9ae7-677d7207aa97@spatialys.com>


Le 23/07/2024 ? 21:08, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND 
APPLICATIONS INC] a ?crit?:
>
> Excellent, thanks Even!? Do you recall what the runtime was before 
> these changes on your test system?
>
I killed the process at about half an hour. Don't recall the progress it 
reached, maybe 40%-50%.
>
> *From: *Even Rouault <even.rouault at spatialys.com>
> *Date: *Tuesday, July 23, 2024 at 3:00?PM
> *To: *Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS 
> INC] <jesse.r.meyer at nasa.gov>, Meyer, Jesse R. (GSFC-618.0)[SCIENCE 
> SYSTEMS AND APPLICATIONS INC] via gdal-dev <gdal-dev at lists.osgeo.org>
> *Subject: *[EXTERNAL] Re: [gdal-dev] Expected runtime of polygonize 
> (GDAL 3.9.0) for few very large features.
>
> *CAUTION:*This email originated from outside of NASA.? Please take 
> care when clicking links or opening attachments.? Use the "Report 
> Message" button to report suspicious messages to the NASA?SOC.
>
>
>
> Hi,
>
> I've got a chance to have a look at your test dataset. In 
> https://github.com/OSGeo/gdal/pull/10477, I've reduced the runtime to 
> 8 minutes (with GeoParquet output, without spatial sorting), by 
> optimizing some implementation details. I believe this could be 
> further reduced as most of the time is still spent in malloc/free of 
> temporary objects (the output is 90 million polygons!) and some 
> objects could be reused, but that would be more extensive changes
>
> Even
>
> Le 01/07/2024 ? 18:40, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS 
> AND APPLICATIONS INC] via gdal-dev a ?crit?:
>
>     Hi,
>
>     We?ve encountered a few images with what seems like pathological
>     performance problems with polygonise.? The details below are a
>     report from another developer that I haven?t yet independently
>     verified.
>
>     We threshold a raster image to a binary mask in a memory dataset,
>     use that as its own mask to mask out the background.
>
>     gdal.Polygonize(nn_mem_band, nn_mem_band, ogr_mem_lyr, -1)
>
>     We have a number of 32k x 32k raster images that feature number of
>     very large same-valued regions (some as large as 80% of the entire
>     raster). ?We?re seeing ~10hrs on a modern workstation to complete
>     the line of code above. OpenCV can apparently construct a
>     connected components list in mere seconds, on the same workstation
>     and image, so we?re considering constructing the OGR geometries
>     directly from those as a temporary work around.
>
>     Is this situation a known pitfall with the current algorithm /
>     data structures behind Polygonize?
>
>     I?m able to share the problematic tile(s) if of interest,
>
>     Best
>
>     Jesse
>
>
>
>     _______________________________________________
>
>     gdal-dev mailing list
>
>     gdal-dev at lists.osgeo.org
>
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240723/357895b6/attachment.htm>

From mdsumner at gmail.com  Tue Jul 23 15:37:18 2024
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 24 Jul 2024 08:37:18 +1000
Subject: [gdal-dev] kerchunk
Message-ID: <CAAcGz99qQow2Y-h2XeNM0nAckipio4-cNN4P5_eyyHTfk+VY4g@mail.gmail.com>

Hi, is there any effort or thought into something like Python's kerchunk in
GDAL?   (my summary of kerchunk is below)

https://github.com/fsspec/kerchunk

I'll be exploring the python outputs in detail and looking for hooks into
where we might bring some of this tighter into GDAL.  This would work
nicely inside the GTI driver, for example. But,  a *kerchunk-driver*? That
would be in the family of raw/ drivers, my skillset won't have much to
offer but I'm going to explore with some simpler examples.   It could even
bring old HDF4 files into the fold, I think.

It's a bit weird from a GDAL perspective to map the chunks in a format for
which we have a driver, but there's definitely performance advantages and
convenience for virtualizing huge disparate collections (even the simplest
time-series-of-files in netcdf is nicely abstracted here for xarray, a
super-charged VRT for xarray).

Interested in any thoughts, feedback, pointers to related efforts ...
thanks!

(my take on) A description of kerchunk:

kerchunk replaces the actual binary blobs on file in a Zarr with json
references to a file/uri/object and the byte start and end values, in this
way kerchunk brings formats like hdf/netcdf/grib into the fold of "cloud
readiness" by having a complete separation of metadata from the actual
storage. The information about those chunks (compression, type, orientation
etc is stored in json also).

(a Zarr  is a multidimensional version of a single-zoom-level image tiling,
imagine every image tile as a potentially n-dimensional child block of a
larger array. The blobs are stored like one zoom of an z/y/x tile server
[[[v/]w/]y/]x way (with a position for each dimension of the array,  1, 2,
3, 4, or n, and z is not special, and with more general encoding
possibilities than tif/png/jpeg provide.)  This scheme is extremely
general,  literally a virtualized array-like abstraction on any storage,
and with kerchunk you can transcend many legacy issues with actual formats.

Cheers, Mike


-- 
Michael Sumner
Research Software Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240724/b55281b3/attachment.htm>

From hyoklee at hdfgroup.org  Tue Jul 23 19:30:13 2024
From: hyoklee at hdfgroup.org (Joe Lee)
Date: Wed, 24 Jul 2024 02:30:13 +0000
Subject: [gdal-dev] kerchunk
In-Reply-To: <CAAcGz99qQow2Y-h2XeNM0nAckipio4-cNN4P5_eyyHTfk+VY4g@mail.gmail.com>
References: <CAAcGz99qQow2Y-h2XeNM0nAckipio4-cNN4P5_eyyHTfk+VY4g@mail.gmail.com>
Message-ID: <MW5PR17MB5893BB256A69FFA741EA1A6EC2AA2@MW5PR17MB5893.namprd17.prod.outlook.com>

Hi, Michael!

It's an interesting idea since Kerchunk can't handle HDF4 yet [1].
OPeNDAP DMR++ now can handle HDF4 
so I think Kerchunk can do, too.

For GDAL, is there C++ binding for Kerchunk?
I think that will be the main blocker for GDAL driver development.

[1] https://github.com/hyoklee/kerchunk/wiki

?---
Reality is hierarchical. Store scientific reality in HDF for Spatial Computing.



________________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Michael Sumner via gdal-dev <gdal-dev at lists.osgeo.org>
Sent: Tuesday, July 23, 2024 17:37
To: gdal-dev
Subject: [gdal-dev] kerchunk

Hi, is there any effort or thought into something like Python's kerchunk in GDAL?   (my summary of kerchunk is below)

https://github.com/fsspec/kerchunk

I'll be exploring the python outputs in detail and looking for hooks into where we might bring some of this tighter into GDAL.  This would work nicely inside the GTI driver, for example. But,  a *kerchunk-driver*? That would be in the family of raw/ drivers, my skillset won't have much to offer but I'm going to explore with some simpler examples.   It could even bring old HDF4 files into the fold, I think.

It's a bit weird from a GDAL perspective to map the chunks in a format for which we have a driver, but there's definitely performance advantages and convenience for virtualizing huge disparate collections (even the simplest time-series-of-files in netcdf is nicely abstracted here for xarray, a super-charged VRT for xarray).

Interested in any thoughts, feedback, pointers to related efforts ... thanks!

(my take on) A description of kerchunk:

kerchunk replaces the actual binary blobs on file in a Zarr with json references to a file/uri/object and the byte start and end values, in this way kerchunk brings formats like hdf/netcdf/grib into the fold of "cloud readiness" by having a complete separation of metadata from the actual storage. The information about those chunks (compression, type, orientation etc is stored in json also).

(a Zarr  is a multidimensional version of a single-zoom-level image tiling, imagine every image tile as a potentially n-dimensional child block of a larger array. The blobs are stored like one zoom of an z/y/x tile server [[[v/]w/]y/]x way (with a position for each dimension of the array,  1, 2, 3, 4, or n, and z is not special, and with more general encoding possibilities than tif/png/jpeg provide.)  This scheme is extremely general,  literally a virtualized array-like abstraction on any storage, and with kerchunk you can transcend many legacy issues with actual formats.

Cheers, Mike


--
Michael Sumner
Research Software Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com<mailto:mdsumner at gmail.com>

From mdsumner at gmail.com  Tue Jul 23 23:02:51 2024
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 24 Jul 2024 16:02:51 +1000
Subject: [gdal-dev] kerchunk
In-Reply-To: <MW5PR17MB5893BB256A69FFA741EA1A6EC2AA2@MW5PR17MB5893.namprd17.prod.outlook.com>
References: <CAAcGz99qQow2Y-h2XeNM0nAckipio4-cNN4P5_eyyHTfk+VY4g@mail.gmail.com>
 <MW5PR17MB5893BB256A69FFA741EA1A6EC2AA2@MW5PR17MB5893.namprd17.prod.outlook.com>
Message-ID: <CAAcGz9_vK8BSZSqeqccoYi0-ZqwQ9HzdJWMpnVJcfQHdw9ca_g@mail.gmail.com>

Thanks Joe, will check this out

On Wed, Jul 24, 2024 at 12:30?PM Joe Lee <hyoklee at hdfgroup.org> wrote:

> Hi, Michael!
>
> It's an interesting idea since Kerchunk can't handle HDF4 yet [1].
> OPeNDAP DMR++ now can handle HDF4
> so I think Kerchunk can do, too.
>
> For GDAL, is there C++ binding for Kerchunk?
> I think that will be the main blocker for GDAL driver development.
>
> [1] https://github.com/hyoklee/kerchunk/wiki
>
> ?---
> Reality is hierarchical. Store scientific reality in HDF for Spatial
> Computing.
>
>
>
> ________________________________________
> From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Michael
> Sumner via gdal-dev <gdal-dev at lists.osgeo.org>
> Sent: Tuesday, July 23, 2024 17:37
> To: gdal-dev
> Subject: [gdal-dev] kerchunk
>
> Hi, is there any effort or thought into something like Python's kerchunk
> in GDAL?   (my summary of kerchunk is below)
>
> https://github.com/fsspec/kerchunk
>
> I'll be exploring the python outputs in detail and looking for hooks into
> where we might bring some of this tighter into GDAL.  This would work
> nicely inside the GTI driver, for example. But,  a *kerchunk-driver*? That
> would be in the family of raw/ drivers, my skillset won't have much to
> offer but I'm going to explore with some simpler examples.   It could even
> bring old HDF4 files into the fold, I think.
>
> It's a bit weird from a GDAL perspective to map the chunks in a format for
> which we have a driver, but there's definitely performance advantages and
> convenience for virtualizing huge disparate collections (even the simplest
> time-series-of-files in netcdf is nicely abstracted here for xarray, a
> super-charged VRT for xarray).
>
> Interested in any thoughts, feedback, pointers to related efforts ...
> thanks!
>
> (my take on) A description of kerchunk:
>
> kerchunk replaces the actual binary blobs on file in a Zarr with json
> references to a file/uri/object and the byte start and end values, in this
> way kerchunk brings formats like hdf/netcdf/grib into the fold of "cloud
> readiness" by having a complete separation of metadata from the actual
> storage. The information about those chunks (compression, type, orientation
> etc is stored in json also).
>
> (a Zarr  is a multidimensional version of a single-zoom-level image
> tiling, imagine every image tile as a potentially n-dimensional child block
> of a larger array. The blobs are stored like one zoom of an z/y/x tile
> server [[[v/]w/]y/]x way (with a position for each dimension of the array,
> 1, 2, 3, 4, or n, and z is not special, and with more general encoding
> possibilities than tif/png/jpeg provide.)  This scheme is extremely
> general,  literally a virtualized array-like abstraction on any storage,
> and with kerchunk you can transcend many legacy issues with actual formats.
>
> Cheers, Mike
>
>
> --
> Michael Sumner
> Research Software Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com<mailto:mdsumner at gmail.com>
>


-- 
Michael Sumner
Research Software Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240724/496f78b6/attachment.htm>

From mdsumner at gmail.com  Tue Jul 23 23:10:15 2024
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 24 Jul 2024 16:10:15 +1000
Subject: [gdal-dev] kerchunk
In-Reply-To: <CAAcGz99qQow2Y-h2XeNM0nAckipio4-cNN4P5_eyyHTfk+VY4g@mail.gmail.com>
References: <CAAcGz99qQow2Y-h2XeNM0nAckipio4-cNN4P5_eyyHTfk+VY4g@mail.gmail.com>
Message-ID: <CAAcGz99GNnxZ=6Vb1r0eR6fzezkR_tORTyH5SK2m2pqWhMshRg@mail.gmail.com>

On Wed, Jul 24, 2024 at 8:37?AM Michael Sumner <mdsumner at gmail.com> wrote:

> Hi, is there any effort or thought into something like Python's kerchunk
> in GDAL?   (my summary of kerchunk is below)
>
> https://github.com/fsspec/kerchunk
>
> I'll be exploring the python outputs in detail and looking for hooks into
> where we might bring some of this tighter into GDAL.  This would work
> nicely inside the GTI driver, for example. But,  a *kerchunk-driver*? That
> would be in the family of raw/ drivers, my skillset won't have much to
> offer but I'm going to explore with some simpler examples.   It could even
> bring old HDF4 files into the fold, I think.
>
> It's a bit weird from a GDAL perspective to map the chunks in a format for
> which we have a driver, but there's definitely performance advantages and
> convenience for virtualizing huge disparate collections (even the simplest
> time-series-of-files in netcdf is nicely abstracted here for xarray, a
> super-charged VRT for xarray).
>
>
I realized after posting that the ZARR driver is already geared to this
(!). I don't know if that is able to work with  "references to byte ranges
in remote files", but I'll recast and explore what's there.

Cheers, Mike
.

Interested in any thoughts, feedback, pointers to related efforts ...
> thanks!
>
> (my take on) A description of kerchunk:
>
> kerchunk replaces the actual binary blobs on file in a Zarr with json
> references to a file/uri/object and the byte start and end values, in this
> way kerchunk brings formats like hdf/netcdf/grib into the fold of "cloud
> readiness" by having a complete separation of metadata from the actual
> storage. The information about those chunks (compression, type, orientation
> etc is stored in json also).
>
> (a Zarr  is a multidimensional version of a single-zoom-level image
> tiling, imagine every image tile as a potentially n-dimensional child block
> of a larger array. The blobs are stored like one zoom of an z/y/x tile
> server [[[v/]w/]y/]x way (with a position for each dimension of the array,
> 1, 2, 3, 4, or n, and z is not special, and with more general encoding
> possibilities than tif/png/jpeg provide.)  This scheme is extremely
> general,  literally a virtualized array-like abstraction on any storage,
> and with kerchunk you can transcend many legacy issues with actual formats.
>
> Cheers, Mike
>
>
> --
> Michael Sumner
> Research Software Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>


-- 
Michael Sumner
Research Software Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240724/9089bfcf/attachment.htm>

From robert.coup at koordinates.com  Wed Jul 24 02:11:55 2024
From: robert.coup at koordinates.com (Robert Coup)
Date: Wed, 24 Jul 2024 10:11:55 +0100
Subject: [gdal-dev] Building GDAL documentation with ReadTheDocs
In-Reply-To: <CA+K_q_o5bak036c8VcB4hi-2y5ti9-uebu8T2kvO0H=deLOFkQ@mail.gmail.com>
References: <CA+K_q_o5bak036c8VcB4hi-2y5ti9-uebu8T2kvO0H=deLOFkQ@mail.gmail.com>
Message-ID: <CAFLLRpL3VkHvCdZtpzc1ODnGGxHkmp33rriCdjLxjnU3-rTFEw@mail.gmail.com>

Hi Dan,

On Tue, 23 Jul 2024 at 17:16, Daniel Baston via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

>
> If anyone has feedback about using ReadTheDocs for this project, or
> the specifics of the proposed configuration, please share it here or
> as a comment on the pull request.
>

My only suggestion would be to check/ensure that non-latest-version docs
are "no-indexed" for search crawlers, either via /robots.txt, headers or
meta tags. I don't know if it's a RTD setting these days, but it's really
frustrating to land on historic doc versions from a search engine without
realising. For example, PostgreSQL has been historically awful for this,
but I think it's better now (not that they use RTD).

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240724/fc039e6d/attachment.htm>

From even.rouault at spatialys.com  Wed Jul 24 02:59:51 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 24 Jul 2024 11:59:51 +0200
Subject: [gdal-dev] kerchunk
In-Reply-To: <CAAcGz99qQow2Y-h2XeNM0nAckipio4-cNN4P5_eyyHTfk+VY4g@mail.gmail.com>
References: <CAAcGz99qQow2Y-h2XeNM0nAckipio4-cNN4P5_eyyHTfk+VY4g@mail.gmail.com>
Message-ID: <8a49b78c-f81a-4651-b085-6f94ca986df4@spatialys.com>

Michael,

I don't think this would be a frmts/raw driver, but rather a 
/vsikerchunk virtual file system that you would combine with the Zarr driver

So you would open a dataset with "/vsikerchunk/{path/to.json}", and the 
ZARR driver would then issue a ReadDir() operation on 
/vsikerchunk/{path/to.json}, which would return the top level keys of 
the JSON. Then the Zarr driver would issue a Open() operation on 
"/vsikerchunk/{path/to.json}/.zmetadata", and so on. The Zarr driver 
could be essentially unmodified. This is I believe essentially how the 
Python implementation works when combining the Kerchunk specific part 
with the Python Zarr module (except it passes file system objects and 
not strings).

Where things don't get pretty is for big datasets, where that JSON file 
can become so big that parsing it and holding it in memory becomes an 
annoyance. They have come apparently to using a hierarchy of Parquet 
files to store the references to the blocks: 
https://fsspec.github.io/kerchunk/spec.html#parquet-references . That's 
becoming a bit messy. Should be implementable though

There are also subtelties in Kerchunk v1 with jinja substitution, and 
generators of keys, all tricks to decrease the size of the JSON, that 
would complicate an implementation.

On Kerchunk itself, I don't have any experience, but I feel there might 
be limitations to what it can handle due to the underlying raster 
formats. For example, if you have a GeoTIFF file using JPEG compression, 
with the quantization tables being stored in the TIFF JpegTables tag 
(i.e. shared for all tiles), which is the formulation that GDAL would 
use by default on creation, then I don't see how Kerchunk can deal with 
that, since that would be 2 distincts chunks in the file, and the 
recombination is slightly more complicated than just appending them 
together before passing them to a JPEG codec. Similarly if you wanted to 
Kerchunk a GeoPackage raster, you couldn't, because a single tile in 
SQLite3 generally spans over multiple SQLite3 pages (of size 4096), with 
a few "header" bytes at the beginning of each tile. For GRIB2, there are 
certainly limitations to some formulations because some GRIB2 encoding 
for arrays are really particular. It must work only with the most simple 
raw encoding.

Kerchunk can potentially do virtual tiling, but I believe that all tiles 
must have the same dimensions, and their internal tiling to be a 
multiple of that dimension, so you can create a Zarr compatible 
representation of them.

And obviously one strong assumption of Kerchunk is that the files 
referenced by a Kerchunk index are immutable. If for some reason, tiles 
are moved internally because of updates, chaos will arise due to 
(offset, size) tuples being out of sync.

Even


Le 24/07/2024 ? 00:37, Michael Sumner via gdal-dev a ?crit?:
> Hi, is there any effort or thought into something?like Python's 
> kerchunk in GDAL?? ?(my summary of kerchunk is below)
>
> https://github.com/fsspec/kerchunk
>
> I'll be exploring the python outputs in detail and looking for hooks 
> into where we might bring some of this tighter into GDAL.? This would 
> work nicely inside the GTI driver, for example. But,? a 
> *kerchunk-driver*? That would be in the family of raw/ drivers, my 
> skillset?won't have much to offer but I'm going to explore with some 
> simpler examples.? ?It could even bring old HDF4 files into the fold, 
> I think.
>
> It's a bit weird from a GDAL perspective to map the chunks in a format 
> for which we have a driver, but there's definitely performance 
> advantages and convenience for virtualizing huge disparate collections 
> (even the simplest time-series-of-files in netcdf is nicely abstracted 
> here for xarray, a super-charged VRT for xarray).
>
> Interested in any thoughts, feedback, pointers to related efforts ... 
> thanks!
>
> (my take on) A description of kerchunk:
>
> kerchunk replaces the actual binary blobs on file in a Zarr with json 
> references to a file/uri/object and the byte start and end values, in 
> this way kerchunk brings formats like hdf/netcdf/grib into the fold of 
> "cloud readiness" by having a complete separation of metadata from the 
> actual storage. The information about those chunks (compression, type, 
> orientation etc is stored in json also).
>
> (a Zarr? is a multidimensional version of a single-zoom-level image 
> tiling, imagine every image tile as a potentially n-dimensional child 
> block of a larger array. The blobs are stored like one zoom of an 
> z/y/x tile server [[[v/]w/]y/]x way (with a position for each 
> dimension of the array,? 1, 2, 3, 4, or n, and z is not special, and 
> with more general encoding possibilities than tif/png/jpeg provide.) 
> This scheme is extremely general,? literally a virtualized array-like 
> abstraction on any storage, and with kerchunk you can transcend many 
> legacy issues with actual formats.
>
> Cheers, Mike
>
>
> -- 
> Michael Sumner
> Research Software Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240724/5f0df2a0/attachment-0001.htm>

From j1 at jimenezshaw.com  Wed Jul 24 03:33:43 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 24 Jul 2024 12:33:43 +0200
Subject: [gdal-dev] Building GDAL documentation with ReadTheDocs
In-Reply-To: <CAFLLRpL3VkHvCdZtpzc1ODnGGxHkmp33rriCdjLxjnU3-rTFEw@mail.gmail.com>
References: <CA+K_q_o5bak036c8VcB4hi-2y5ti9-uebu8T2kvO0H=deLOFkQ@mail.gmail.com>
 <CAFLLRpL3VkHvCdZtpzc1ODnGGxHkmp33rriCdjLxjnU3-rTFEw@mail.gmail.com>
Message-ID: <CADRrdKvfNxYPtB7L0w+B-kPqGM7V7aP_Kxd2o04_+Zh6XrmN+Q@mail.gmail.com>

I see the point, and I agree... but I don't know if it will work
RTD redirects to whatever we configure. In proj.org it is going directly to
9.4 (current latest release).
So every 6 months it points to something different. Telling in robots.txt
that the full page has a different URL is not good for seo and history (if
I understand correctly how it works, that I am not sure).

Maybe the solution is that proj.org default be "stable" and not "9.4".

On Wed, 24 Jul 2024, 11:11 Robert Coup via gdal-dev, <
gdal-dev at lists.osgeo.org> wrote:

> Hi Dan,
>
> On Tue, 23 Jul 2024 at 17:16, Daniel Baston via gdal-dev <
> gdal-dev at lists.osgeo.org> wrote:
>
>>
>> If anyone has feedback about using ReadTheDocs for this project, or
>> the specifics of the proposed configuration, please share it here or
>> as a comment on the pull request.
>>
>
> My only suggestion would be to check/ensure that non-latest-version docs
> are "no-indexed" for search crawlers, either via /robots.txt, headers or
> meta tags. I don't know if it's a RTD setting these days, but it's really
> frustrating to land on historic doc versions from a search engine without
> realising. For example, PostgreSQL has been historically awful for this,
> but I think it's better now (not that they use RTD).
>
> Rob :)
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240724/114ac34c/attachment.htm>

From even.rouault at spatialys.com  Wed Jul 24 04:27:10 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 24 Jul 2024 13:27:10 +0200
Subject: [gdal-dev] Building GDAL documentation with ReadTheDocs
In-Reply-To: <CADRrdKvfNxYPtB7L0w+B-kPqGM7V7aP_Kxd2o04_+Zh6XrmN+Q@mail.gmail.com>
References: <CA+K_q_o5bak036c8VcB4hi-2y5ti9-uebu8T2kvO0H=deLOFkQ@mail.gmail.com>
 <CAFLLRpL3VkHvCdZtpzc1ODnGGxHkmp33rriCdjLxjnU3-rTFEw@mail.gmail.com>
 <CADRrdKvfNxYPtB7L0w+B-kPqGM7V7aP_Kxd2o04_+Zh6XrmN+Q@mail.gmail.com>
Message-ID: <cac13793-c310-44bf-a057-444626150913@spatialys.com>


Le 24/07/2024 ? 12:33, Javier Jimenez Shaw via gdal-dev a ?crit?:
> I see the point, and I agree... but I don't know if it will work
> RTD redirects to whatever we configure. In proj.org <http://proj.org> 
> it is going directly to 9.4 (current latest release).

Seems like a good idea and something that can be easily be tuned by 
editing https://readthedocs.org/dashboard/osgeo-proj/edit/ . But when 
looking at https://proj.org/en/stable/about.html for example, the only 
thing that is missing to me is a hint of what "stable" alias to. So you 
have on the top left, under the PROJ logo, a "stable" text. It would be 
nice if that would be "stable (9.4)". Not sure if that can be tuned.

> So every 6 months it points to something different. Telling in 
> robots.txt that the full page has a different URL is not good for seo 
> and history (if I understand correctly how it works, that I am not sure).

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240724/3a1f999c/attachment.htm>

From robert.coup at koordinates.com  Wed Jul 24 04:43:55 2024
From: robert.coup at koordinates.com (Robert Coup)
Date: Wed, 24 Jul 2024 12:43:55 +0100
Subject: [gdal-dev] Building GDAL documentation with ReadTheDocs
In-Reply-To: <cac13793-c310-44bf-a057-444626150913@spatialys.com>
References: <CA+K_q_o5bak036c8VcB4hi-2y5ti9-uebu8T2kvO0H=deLOFkQ@mail.gmail.com>
 <CAFLLRpL3VkHvCdZtpzc1ODnGGxHkmp33rriCdjLxjnU3-rTFEw@mail.gmail.com>
 <CADRrdKvfNxYPtB7L0w+B-kPqGM7V7aP_Kxd2o04_+Zh6XrmN+Q@mail.gmail.com>
 <cac13793-c310-44bf-a057-444626150913@spatialys.com>
Message-ID: <CAFLLRpLNi8Y8cOnb3Ej0OgG9+MFC3pXXGDqirN5smWJTV9q0bQ@mail.gmail.com>

On Wed, 24 Jul 2024 at 12:27, Even Rouault <even.rouault at spatialys.com>
wrote:
>
>
> Le 24/07/2024 ? 12:33, Javier Jimenez Shaw via gdal-dev a ?crit :
>
>> I see the point, and I agree... but I don't know if it will work
>> RTD redirects to whatever we configure. In proj.org it is going directly
to 9.4 (current latest release).
>
> Seems like a good idea and something that can be easily be tuned by
editing https://readthedocs.org/dashboard/osgeo-proj/edit/ . But when
looking at https://proj.org/en/stable/about.html for example, the only
thing that is missing to me is a hint of what "stable" alias to. So you
have on the top left, under the PROJ logo, a "stable" text. It would be
nice if that would be "stable (9.4)". Not sure if that can be tuned.
>
> So every 6 months it points to something different. Telling in robots.txt
that the full page has a different URL is not good for seo and history (if
I understand correctly how it works, that I am not sure).

I think using `/en/stable/` (or /latest) as the default URL redirect is the
thing ? as a new release gets promoted, google/etc will keep using/crawling
that, and that link doesn't change.

I think the robots thing would need something a bit like:

allow: /en/stable/
disallow: /en/

Though in principle, no-index would be preferable to "do not crawl". Not
sure what levers RTD has in that regard, if /stable/ and /9.4/ are actually
different sets of html files then adding in an HTML <meta> tag for noindex
might be simple enough for !=stable ?

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240724/e86a3eb2/attachment.htm>

From dbaston at gmail.com  Wed Jul 24 07:16:45 2024
From: dbaston at gmail.com (Daniel Baston)
Date: Wed, 24 Jul 2024 10:16:45 -0400
Subject: [gdal-dev] Building GDAL documentation with ReadTheDocs
In-Reply-To: <CAFLLRpLNi8Y8cOnb3Ej0OgG9+MFC3pXXGDqirN5smWJTV9q0bQ@mail.gmail.com>
References: <CA+K_q_o5bak036c8VcB4hi-2y5ti9-uebu8T2kvO0H=deLOFkQ@mail.gmail.com>
 <CAFLLRpL3VkHvCdZtpzc1ODnGGxHkmp33rriCdjLxjnU3-rTFEw@mail.gmail.com>
 <CADRrdKvfNxYPtB7L0w+B-kPqGM7V7aP_Kxd2o04_+Zh6XrmN+Q@mail.gmail.com>
 <cac13793-c310-44bf-a057-444626150913@spatialys.com>
 <CAFLLRpLNi8Y8cOnb3Ej0OgG9+MFC3pXXGDqirN5smWJTV9q0bQ@mail.gmail.com>
Message-ID: <CA+K_q_owCZvoGOgQ2GLwADhhnUjw-KHkmP0yxfT0fbniAZ6aNA@mail.gmail.com>

Thanks, Rob. I've added a robots.txt to the PR (using /en/latest/,
since /en/stable/ is not yet published)

Dan

On Wed, Jul 24, 2024 at 7:44?AM Robert Coup via gdal-dev
<gdal-dev at lists.osgeo.org> wrote:
>
> On Wed, 24 Jul 2024 at 12:27, Even Rouault <even.rouault at spatialys.com> wrote:
> >
> >
> > Le 24/07/2024 ? 12:33, Javier Jimenez Shaw via gdal-dev a ?crit :
> >
> >> I see the point, and I agree... but I don't know if it will work
> >> RTD redirects to whatever we configure. In proj.org it is going directly to 9.4 (current latest release).
> >
> > Seems like a good idea and something that can be easily be tuned by editing https://readthedocs.org/dashboard/osgeo-proj/edit/ . But when looking at https://proj.org/en/stable/about.html for example, the only thing that is missing to me is a hint of what "stable" alias to. So you have on the top left, under the PROJ logo, a "stable" text. It would be nice if that would be "stable (9.4)". Not sure if that can be tuned.
> >
> > So every 6 months it points to something different. Telling in robots.txt that the full page has a different URL is not good for seo and history (if I understand correctly how it works, that I am not sure).
>
> I think using `/en/stable/` (or /latest) as the default URL redirect is the thing ? as a new release gets promoted, google/etc will keep using/crawling that, and that link doesn't change.
>
> I think the robots thing would need something a bit like:
>
> allow: /en/stable/
> disallow: /en/
>
> Though in principle, no-index would be preferable to "do not crawl". Not sure what levers RTD has in that regard, if /stable/ and /9.4/ are actually different sets of html files then adding in an HTML <meta> tag for noindex might be simple enough for !=stable ?
>
> Rob :)
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Wed Jul 24 12:22:10 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 24 Jul 2024 21:22:10 +0200
Subject: [gdal-dev] Changes in conda-forge packaging for GDAL 3.9.1
Message-ID: <08a02955-73c8-4e8d-be2d-ffcff56e2139@spatialys.com>

Hi,

I just wanted to mention recent work done on the GDAL (and PDAL) 
packaging on conda-forge that may impact your use of the packages for 
GDAL >= 3.9.1.

All details at 
https://quansight.com/post/introducing-lightweight-versions-of-gdal-and-pdal/

TL;DR version:

- new package libgdal-core with a reduced number of dependencies (and 
thus drivers)

- libgdal is now a meta package that installs libgdal-core and 
libgdal-XXXX driver packages (where XXXX=hdf4, hdf5, netcdf, pdf, pg, 
tiledb, etc.)

- gdal (python bindings + utilities) now depend just on libgdal-core, 
and not libgdal

The full list of packages is at gdhttps://gdal.org/download.html#conda

Credits to Quansight for the actual work and Hobu, Inc for funding it.

Even

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From michkowalczuk at gmail.com  Wed Jul 24 13:19:31 2024
From: michkowalczuk at gmail.com (=?UTF-8?Q?Micha=C5=82_Kowalczuk?=)
Date: Wed, 24 Jul 2024 22:19:31 +0200
Subject: [gdal-dev] Changes in conda-forge packaging for GDAL 3.9.1
In-Reply-To: <08a02955-73c8-4e8d-be2d-ffcff56e2139@spatialys.com>
References: <08a02955-73c8-4e8d-be2d-ffcff56e2139@spatialys.com>
Message-ID: <CAP+FqQCwHWyZgrxZJfTV7vxFkTz3uFMG_qPiPoQf0TPMPdNstQ@mail.gmail.com>

Hi,
I've just updated GDAL with conda and I was surprised about number of
dependencies that disappeared.
It's quite a big change and should be mentioned in the Release Notes, not
only here...
Don't you think so?

Regards,
Micha?

?r., 24 lip 2024 o 22:00 Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org>
napisa?(a):

> Hi,
>
> I just wanted to mention recent work done on the GDAL (and PDAL)
> packaging on conda-forge that may impact your use of the packages for
> GDAL >= 3.9.1.
>
> All details at
>
> https://quansight.com/post/introducing-lightweight-versions-of-gdal-and-pdal/
>
> TL;DR version:
>
> - new package libgdal-core with a reduced number of dependencies (and
> thus drivers)
>
> - libgdal is now a meta package that installs libgdal-core and
> libgdal-XXXX driver packages (where XXXX=hdf4, hdf5, netcdf, pdf, pg,
> tiledb, etc.)
>
> - gdal (python bindings + utilities) now depend just on libgdal-core,
> and not libgdal
>
> The full list of packages is at gdhttps://gdal.org/download.html#conda
>
> Credits to Quansight for the actual work and Hobu, Inc for funding it.
>
> Even
>
> --
>
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240724/64599931/attachment.htm>

From even.rouault at spatialys.com  Wed Jul 24 13:48:17 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 24 Jul 2024 22:48:17 +0200
Subject: [gdal-dev] Changes in conda-forge packaging for GDAL 3.9.1
In-Reply-To: <CAP+FqQCwHWyZgrxZJfTV7vxFkTz3uFMG_qPiPoQf0TPMPdNstQ@mail.gmail.com>
References: <08a02955-73c8-4e8d-be2d-ffcff56e2139@spatialys.com>
 <CAP+FqQCwHWyZgrxZJfTV7vxFkTz3uFMG_qPiPoQf0TPMPdNstQ@mail.gmail.com>
Message-ID: <b8d55890-fe0e-48fe-a494-ae38c6d52426@spatialys.com>


Le 24/07/2024 ? 22:19, Micha? Kowalczuk a ?crit?:
> Hi,
> I've just updated GDAL with conda and I was surprised about number of 
> dependencies that disappeared.
> It's quite a big change and should be mentioned in the Release Notes, 
> not only here...
> Don't you think so?

The release notes are only about changes that occur at the source code 
level. They are tens of packaging solutions, which are all independent 
from the source delivery, and happen after the source release. Just 
mentioned Conda as it is quite popular.

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From mdsumner at gmail.com  Wed Jul 24 14:37:46 2024
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 25 Jul 2024 07:37:46 +1000
Subject: [gdal-dev] kerchunk
In-Reply-To: <8a49b78c-f81a-4651-b085-6f94ca986df4@spatialys.com>
References: <CAAcGz99qQow2Y-h2XeNM0nAckipio4-cNN4P5_eyyHTfk+VY4g@mail.gmail.com>
 <8a49b78c-f81a-4651-b085-6f94ca986df4@spatialys.com>
Message-ID: <CAAcGz98cWLcr3kcQODYtCsdMPmX_ajL3TuH23GTzyKL4AcyjhQ@mail.gmail.com>

Amazing guidance, thanks so much Even.

You've answered a lot of hanging questions I had that I didn't know where
to ask.  I'll be exploring all of this.

Cheers, Mike


On Wed, Jul 24, 2024 at 7:59?PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Michael,
>
> I don't think this would be a frmts/raw driver, but rather a /vsikerchunk
> virtual file system that you would combine with the Zarr driver
>
> So you would open a dataset with "/vsikerchunk/{path/to.json}", and the
> ZARR driver would then issue a ReadDir() operation on
> /vsikerchunk/{path/to.json}, which would return the top level keys of the
> JSON. Then the Zarr driver would issue a Open() operation on
> "/vsikerchunk/{path/to.json}/.zmetadata", and so on. The Zarr driver could
> be essentially unmodified. This is I believe essentially how the Python
> implementation works when combining the Kerchunk specific part with the
> Python Zarr module (except it passes file system objects and not strings).
>
> Where things don't get pretty is for big datasets, where that JSON file
> can become so big that parsing it and holding it in memory becomes an
> annoyance. They have come apparently to using a hierarchy of Parquet files
> to store the references to the blocks:
> https://fsspec.github.io/kerchunk/spec.html#parquet-references . That's
> becoming a bit messy. Should be implementable though
>
> There are also subtelties in Kerchunk v1 with jinja substitution, and
> generators of keys, all tricks to decrease the size of the JSON, that would
> complicate an implementation.
>
> On Kerchunk itself, I don't have any experience, but I feel there might be
> limitations to what it can handle due to the underlying raster formats. For
> example, if you have a GeoTIFF file using JPEG compression, with the
> quantization tables being stored in the TIFF JpegTables tag (i.e. shared
> for all tiles), which is the formulation that GDAL would use by default on
> creation, then I don't see how Kerchunk can deal with that, since that
> would be 2 distincts chunks in the file, and the recombination is slightly
> more complicated than just appending them together before passing them to a
> JPEG codec. Similarly if you wanted to Kerchunk a GeoPackage raster, you
> couldn't, because a single tile in SQLite3 generally spans over multiple
> SQLite3 pages (of size 4096), with a few "header" bytes at the beginning of
> each tile. For GRIB2, there are certainly limitations to some formulations
> because some GRIB2 encoding for arrays are really particular. It must work
> only with the most simple raw encoding.
>
> Kerchunk can potentially do virtual tiling, but I believe that all tiles
> must have the same dimensions, and their internal tiling to be a multiple
> of that dimension, so you can create a Zarr compatible representation of
> them.
>
> And obviously one strong assumption of Kerchunk is that the files
> referenced by a Kerchunk index are immutable. If for some reason, tiles are
> moved internally because of updates, chaos will arise due to (offset, size)
> tuples being out of sync.
>
> Even
>
>
> Le 24/07/2024 ? 00:37, Michael Sumner via gdal-dev a ?crit :
>
> Hi, is there any effort or thought into something like Python's kerchunk
> in GDAL?   (my summary of kerchunk is below)
>
> https://github.com/fsspec/kerchunk
>
> I'll be exploring the python outputs in detail and looking for hooks into
> where we might bring some of this tighter into GDAL.  This would work
> nicely inside the GTI driver, for example. But,  a *kerchunk-driver*? That
> would be in the family of raw/ drivers, my skillset won't have much to
> offer but I'm going to explore with some simpler examples.   It could even
> bring old HDF4 files into the fold, I think.
>
> It's a bit weird from a GDAL perspective to map the chunks in a format for
> which we have a driver, but there's definitely performance advantages and
> convenience for virtualizing huge disparate collections (even the simplest
> time-series-of-files in netcdf is nicely abstracted here for xarray, a
> super-charged VRT for xarray).
>
> Interested in any thoughts, feedback, pointers to related efforts ...
> thanks!
>
> (my take on) A description of kerchunk:
>
> kerchunk replaces the actual binary blobs on file in a Zarr with json
> references to a file/uri/object and the byte start and end values, in this
> way kerchunk brings formats like hdf/netcdf/grib into the fold of "cloud
> readiness" by having a complete separation of metadata from the actual
> storage. The information about those chunks (compression, type, orientation
> etc is stored in json also).
>
> (a Zarr  is a multidimensional version of a single-zoom-level image
> tiling, imagine every image tile as a potentially n-dimensional child block
> of a larger array. The blobs are stored like one zoom of an z/y/x tile
> server [[[v/]w/]y/]x way (with a position for each dimension of the array,
> 1, 2, 3, 4, or n, and z is not special, and with more general encoding
> possibilities than tif/png/jpeg provide.)  This scheme is extremely
> general,  literally a virtualized array-like abstraction on any storage,
> and with kerchunk you can transcend many legacy issues with actual formats.
>
> Cheers, Mike
>
>
> --
> Michael Sumner
> Research Software Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>

-- 
Michael Sumner
Research Software Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240725/bbcb69b8/attachment.htm>

From mwtoews at gmail.com  Wed Jul 24 18:30:38 2024
From: mwtoews at gmail.com (Mike Taves)
Date: Thu, 25 Jul 2024 13:30:38 +1200
Subject: [gdal-dev] Building GDAL documentation with ReadTheDocs
In-Reply-To: <CADRrdKvfNxYPtB7L0w+B-kPqGM7V7aP_Kxd2o04_+Zh6XrmN+Q@mail.gmail.com>
References: <CA+K_q_o5bak036c8VcB4hi-2y5ti9-uebu8T2kvO0H=deLOFkQ@mail.gmail.com>
 <CAFLLRpL3VkHvCdZtpzc1ODnGGxHkmp33rriCdjLxjnU3-rTFEw@mail.gmail.com>
 <CADRrdKvfNxYPtB7L0w+B-kPqGM7V7aP_Kxd2o04_+Zh6XrmN+Q@mail.gmail.com>
Message-ID: <CAM2FmMqaJ0jiPLcJaf9-yYTRNqJn8vM8HQ_bdRCW2AkUzE8KJQ@mail.gmail.com>

On Wed, 24 Jul 2024 at 22:34, Javier Jimenez Shaw via gdal-dev
<gdal-dev at lists.osgeo.org> wrote:
> Maybe the solution is that proj.org default be "stable" and not "9.4".

The reason why PROJ's RTD is configured this way is that "stable" is
set at one commit (currently 875a485f) for the most recent release, as
described by
https://docs.readthedocs.io/en/stable/versions.html

PROJ instead configures the default version as "9.4" for the 9.4
maintenance branch, which allows backports for documentation
updates/improvements for the most recent release, which precede the
release marked as "stable".

>From what I see, robots.txt is automatically configured for the default version:
https://docs.readthedocs.io/en/stable/reference/robots.html

Also worth looking at their SEO guide:
https://docs.readthedocs.io/en/stable/guides/technical-docs-seo-guide.html

From michkowalczuk at gmail.com  Wed Jul 24 23:43:51 2024
From: michkowalczuk at gmail.com (=?UTF-8?Q?Micha=C5=82_Kowalczuk?=)
Date: Thu, 25 Jul 2024 08:43:51 +0200
Subject: [gdal-dev] Changes in conda-forge packaging for GDAL 3.9.1
In-Reply-To: <b8d55890-fe0e-48fe-a494-ae38c6d52426@spatialys.com>
References: <08a02955-73c8-4e8d-be2d-ffcff56e2139@spatialys.com>
 <CAP+FqQCwHWyZgrxZJfTV7vxFkTz3uFMG_qPiPoQf0TPMPdNstQ@mail.gmail.com>
 <b8d55890-fe0e-48fe-a494-ae38c6d52426@spatialys.com>
Message-ID: <CAP+FqQDqLjGwgqQh2YFmMdFDccxwQ-pxRjAawf4_q0NSOJA8Lg@mail.gmail.com>

OK, I got it.
I do not know who is the conda "maintainer" but it would be nice to give
more descriptive summary for *gdal*, *libgdal *and *libgdal-core* packages,
because now they are the same:
*GDAL is a translator library for raster and vector geospatial data formats
that is released under an X/MIT style Open Source license by the Open
Source Geospatial Foundation.*

Micha?

?r., 24 lip 2024 o 22:48 Even Rouault <even.rouault at spatialys.com>
napisa?(a):

>
> Le 24/07/2024 ? 22:19, Micha? Kowalczuk a ?crit :
> > Hi,
> > I've just updated GDAL with conda and I was surprised about number of
> > dependencies that disappeared.
> > It's quite a big change and should be mentioned in the Release Notes,
> > not only here...
> > Don't you think so?
>
> The release notes are only about changes that occur at the source code
> level. They are tens of packaging solutions, which are all independent
> from the source delivery, and happen after the source release. Just
> mentioned Conda as it is quite popular.
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240725/a603dff3/attachment.htm>

From j1 at jimenezshaw.com  Wed Jul 24 23:48:49 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 25 Jul 2024 08:48:49 +0200
Subject: [gdal-dev] Building GDAL documentation with ReadTheDocs
In-Reply-To: <CAM2FmMqaJ0jiPLcJaf9-yYTRNqJn8vM8HQ_bdRCW2AkUzE8KJQ@mail.gmail.com>
References: <CA+K_q_o5bak036c8VcB4hi-2y5ti9-uebu8T2kvO0H=deLOFkQ@mail.gmail.com>
 <CAFLLRpL3VkHvCdZtpzc1ODnGGxHkmp33rriCdjLxjnU3-rTFEw@mail.gmail.com>
 <CADRrdKvfNxYPtB7L0w+B-kPqGM7V7aP_Kxd2o04_+Zh6XrmN+Q@mail.gmail.com>
 <CAM2FmMqaJ0jiPLcJaf9-yYTRNqJn8vM8HQ_bdRCW2AkUzE8KJQ@mail.gmail.com>
Message-ID: <CADRrdKucqMc8Obq_q8gdkcRTnxRh=Y0V8+xnL2+aQmncSg8Bfg@mail.gmail.com>

Interesting report from "google search console" I got today. This is just
one example, there are many pages like this one:

Page is not indexed: Duplicate without user-selected canonical
URL: https://proj.org/en/stable/operations/projections/putp6.html (This
page is not indexed. Pages that aren't indexed can't be served on Google)
Google-selected canonical:
https://proj.org/en/9.4/operations/projections/putp6.html

On Thu, 25 Jul 2024 at 03:30, Mike Taves <mwtoews at gmail.com> wrote:

> On Wed, 24 Jul 2024 at 22:34, Javier Jimenez Shaw via gdal-dev
> <gdal-dev at lists.osgeo.org> wrote:
> > Maybe the solution is that proj.org default be "stable" and not "9.4".
>
> The reason why PROJ's RTD is configured this way is that "stable" is
> set at one commit (currently 875a485f) for the most recent release, as
> described by
> https://docs.readthedocs.io/en/stable/versions.html
>
> PROJ instead configures the default version as "9.4" for the 9.4
> maintenance branch, which allows backports for documentation
> updates/improvements for the most recent release, which precede the
> release marked as "stable".
>
> From what I see, robots.txt is automatically configured for the default
> version:
> https://docs.readthedocs.io/en/stable/reference/robots.html
>
> Also worth looking at their SEO guide:
> https://docs.readthedocs.io/en/stable/guides/technical-docs-seo-guide.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240725/e9ac41e3/attachment.htm>

From michkowalczuk at gmail.com  Thu Jul 25 02:58:38 2024
From: michkowalczuk at gmail.com (=?UTF-8?Q?Micha=C5=82_Kowalczuk?=)
Date: Thu, 25 Jul 2024 11:58:38 +0200
Subject: [gdal-dev] Changes in conda-forge packaging for GDAL 3.9.1
In-Reply-To: <CAP+FqQDqLjGwgqQh2YFmMdFDccxwQ-pxRjAawf4_q0NSOJA8Lg@mail.gmail.com>
References: <08a02955-73c8-4e8d-be2d-ffcff56e2139@spatialys.com>
 <CAP+FqQCwHWyZgrxZJfTV7vxFkTz3uFMG_qPiPoQf0TPMPdNstQ@mail.gmail.com>
 <b8d55890-fe0e-48fe-a494-ae38c6d52426@spatialys.com>
 <CAP+FqQDqLjGwgqQh2YFmMdFDccxwQ-pxRjAawf4_q0NSOJA8Lg@mail.gmail.com>
Message-ID: <CAP+FqQBr6+-vdFENY9vRFNR5fM-sxqWW6BJz6MHsET8=zUttuw@mail.gmail.com>

Continuing this topic...
What should I do if I want to use lightweight version od GDAL
(libgdal-corel) only with JP2 driver. Putting libgdal_-jp2openjpg.dll with
gdal.dll is not sufficient.
Thanks,
Micha?

czw., 25 lip 2024 o 08:43 Micha? Kowalczuk <michkowalczuk at gmail.com>
napisa?(a):

> OK, I got it.
> I do not know who is the conda "maintainer" but it would be nice to give
> more descriptive summary for *gdal*, *libgdal *and *libgdal-core*
> packages, because now they are the same:
> *GDAL is a translator library for raster and vector geospatial data
> formats that is released under an X/MIT style Open Source license by the
> Open Source Geospatial Foundation.*
>
> Micha?
>
> ?r., 24 lip 2024 o 22:48 Even Rouault <even.rouault at spatialys.com>
> napisa?(a):
>
>>
>> Le 24/07/2024 ? 22:19, Micha? Kowalczuk a ?crit :
>> > Hi,
>> > I've just updated GDAL with conda and I was surprised about number of
>> > dependencies that disappeared.
>> > It's quite a big change and should be mentioned in the Release Notes,
>> > not only here...
>> > Don't you think so?
>>
>> The release notes are only about changes that occur at the source code
>> level. They are tens of packaging solutions, which are all independent
>> from the source delivery, and happen after the source release. Just
>> mentioned Conda as it is quite popular.
>>
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240725/bd0f42d4/attachment.htm>

From even.rouault at spatialys.com  Thu Jul 25 03:09:19 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 25 Jul 2024 12:09:19 +0200
Subject: [gdal-dev] Changes in conda-forge packaging for GDAL 3.9.1
In-Reply-To: <CAP+FqQBr6+-vdFENY9vRFNR5fM-sxqWW6BJz6MHsET8=zUttuw@mail.gmail.com>
References: <08a02955-73c8-4e8d-be2d-ffcff56e2139@spatialys.com>
 <CAP+FqQCwHWyZgrxZJfTV7vxFkTz3uFMG_qPiPoQf0TPMPdNstQ@mail.gmail.com>
 <b8d55890-fe0e-48fe-a494-ae38c6d52426@spatialys.com>
 <CAP+FqQDqLjGwgqQh2YFmMdFDccxwQ-pxRjAawf4_q0NSOJA8Lg@mail.gmail.com>
 <CAP+FqQBr6+-vdFENY9vRFNR5fM-sxqWW6BJz6MHsET8=zUttuw@mail.gmail.com>
Message-ID: <a8ca2926-ccd3-4afb-a830-e017278e85c3@spatialys.com>


Le 25/07/2024 ? 11:58, Micha? Kowalczuk a ?crit?:
> Continuing this topic...
> What should I do if I want to use lightweight version od GDAL 
> (libgdal-corel) only with JP2 driver. Putting libgdal_-jp2openjpg.dll 
> with gdal.dll is not sufficient.

If you use conda installation commands (conda install -c conda-forge 
libgdal-core libgdal-jp2openjpeg) and activate the environment, things 
should run just fine. The plugin must be in the gdalplugins/ 
subdirectory of your conda env

On my Linux system:

/home/even/miniconda3/envs/gdal_3.9.1/lib/libgdal.so.35.3.9.1
/home/even/miniconda3/envs/gdal_3.9.1/lib/gdalplugins/gdal_JP2OpenJPEG.so

Even

> Thanks,
> Micha?
>
> czw., 25 lip 2024 o 08:43?Micha? Kowalczuk <michkowalczuk at gmail.com> 
> napisa?(a):
>
>     OK, I got it.
>     I do not know who is the conda "maintainer" but it would be nice
>     to give more descriptive summary for *gdal*, *libgdal *and
>     *libgdal-core* packages, because now they are the same:
>     /GDAL is a translator library for raster and vector geospatial
>     data formats that is released under an X/MIT style Open Source
>     license by the Open Source Geospatial Foundation./
>
>     Micha?
>
>     ?r., 24 lip 2024 o 22:48?Even Rouault <even.rouault at spatialys.com>
>     napisa?(a):
>
>
>         Le 24/07/2024 ? 22:19, Micha? Kowalczuk a ?crit?:
>         > Hi,
>         > I've just updated GDAL with conda and I was surprised about
>         number of
>         > dependencies that disappeared.
>         > It's quite a big change and should be mentioned in the
>         Release Notes,
>         > not only here...
>         > Don't you think so?
>
>         The release notes are only about changes that occur at the
>         source code
>         level. They are tens of packaging solutions, which are all
>         independent
>         from the source delivery, and happen after the source release.
>         Just
>         mentioned Conda as it is quite popular.
>
>         -- 
>         http://www.spatialys.com
>         My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240725/dfa66544/attachment.htm>

From michael.smith.erdc at gmail.com  Thu Jul 25 03:12:50 2024
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Thu, 25 Jul 2024 06:12:50 -0400
Subject: [gdal-dev] Changes in conda-forge packaging for GDAL 3.9.1
In-Reply-To: <CAP+FqQBr6+-vdFENY9vRFNR5fM-sxqWW6BJz6MHsET8=zUttuw@mail.gmail.com>
References: <08a02955-73c8-4e8d-be2d-ffcff56e2139@spatialys.com>
 <CAP+FqQCwHWyZgrxZJfTV7vxFkTz3uFMG_qPiPoQf0TPMPdNstQ@mail.gmail.com>
 <b8d55890-fe0e-48fe-a494-ae38c6d52426@spatialys.com>
 <CAP+FqQDqLjGwgqQh2YFmMdFDccxwQ-pxRjAawf4_q0NSOJA8Lg@mail.gmail.com>
 <CAP+FqQBr6+-vdFENY9vRFNR5fM-sxqWW6BJz6MHsET8=zUttuw@mail.gmail.com>
Message-ID: <0F127C24-FA15-4602-888E-346B93E415B0@gmail.com>

It would be just 

 

mamba install -c conda-forge libgdal-core libgdal-jp2openjpeg

 

Mike

 

 

-- 

Michael Smith

Remote Sensing/GIS Center

US Army Corps of Engineers

 

 

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Micha? Kowalczuk via gdal-dev <gdal-dev at lists.osgeo.org>
Reply-To: Micha? Kowalczuk <michkowalczuk at gmail.com>
Date: Thursday, July 25, 2024 at 6:00?AM
To: Even Rouault <even.rouault at spatialys.com>
Cc: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Changes in conda-forge packaging for GDAL 3.9.1

 

Continuing this topic...

What should I do if I want to use lightweight version od GDAL (libgdal-corel) only with JP2 driver. Putting libgdal_-jp2openjpg.dll with gdal.dll is not sufficient.

Thanks,

Micha?

 

czw., 25 lip 2024 o 08:43 Micha? Kowalczuk <michkowalczuk at gmail.com> napisa?(a):

OK, I got it.

I do not know who is the conda "maintainer" but it would be nice to give more descriptive summary for gdal, libgdal and libgdal-core packages, because now they are the same:
GDAL is a translator library for raster and vector geospatial data formats that is released under an X/MIT style Open Source license by the Open Source Geospatial Foundation.

 

Micha?

 

?r., 24 lip 2024 o 22:48 Even Rouault <even.rouault at spatialys.com> napisa?(a):


Le 24/07/2024 ? 22:19, Micha? Kowalczuk a ?crit :
> Hi,
> I've just updated GDAL with conda and I was surprised about number of 
> dependencies that disappeared.
> It's quite a big change and should be mentioned in the Release Notes, 
> not only here...
> Don't you think so?

The release notes are only about changes that occur at the source code 
level. They are tens of packaging solutions, which are all independent 
from the source delivery, and happen after the source release. Just 
mentioned Conda as it is quite popular.

-- 
http://www.spatialys.com
My software is free, but my time generally not.

_______________________________________________ gdal-dev mailing list gdal-dev at lists.osgeo.org https://lists.osgeo.org/mailman/listinfo/gdal-dev 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240725/9c2e406c/attachment-0001.htm>

From dbaston at gmail.com  Thu Jul 25 03:52:32 2024
From: dbaston at gmail.com (Daniel Baston)
Date: Thu, 25 Jul 2024 06:52:32 -0400
Subject: [gdal-dev] Building GDAL documentation with ReadTheDocs
In-Reply-To: <CAM2FmMqaJ0jiPLcJaf9-yYTRNqJn8vM8HQ_bdRCW2AkUzE8KJQ@mail.gmail.com>
References: <CA+K_q_o5bak036c8VcB4hi-2y5ti9-uebu8T2kvO0H=deLOFkQ@mail.gmail.com>
 <CAFLLRpL3VkHvCdZtpzc1ODnGGxHkmp33rriCdjLxjnU3-rTFEw@mail.gmail.com>
 <CADRrdKvfNxYPtB7L0w+B-kPqGM7V7aP_Kxd2o04_+Zh6XrmN+Q@mail.gmail.com>
 <CAM2FmMqaJ0jiPLcJaf9-yYTRNqJn8vM8HQ_bdRCW2AkUzE8KJQ@mail.gmail.com>
Message-ID: <CA+K_q_rKE65WXiqCMiLg4bbpbvSYpFkVXxTWjavBrf9yKM=dxw@mail.gmail.com>

> From what I see, robots.txt is automatically configured for the default version:
> https://docs.readthedocs.io/en/stable/reference/robots.html

I read this as saying that the robots.txt published by the default
branch will be served from the top level of the domain
(https://proj.org/robots.txt) and that a robots.txt associated with
any other branch will be ignored.

If no robots.txt is provided, ReadTheDocs uses a default which allows
indexing of all non-hidden branches. PROJ does not appear to have any
branches that are hidden with RTD, so all versions >= 5.0 would be
indexed.

User-agent: *

Disallow: # Allow everything

Sitemap: https://proj.org/sitemap.xml

Dan

From howard at hobu.co  Thu Jul 25 08:01:41 2024
From: howard at hobu.co (Howard Butler)
Date: Thu, 25 Jul 2024 10:01:41 -0500
Subject: [gdal-dev] Motion: Migrate gdal.org to ReadTheDocs
Message-ID: <AC15F350-EE08-4A83-9C02-F1DA34825967@hobu.co>

All,

I would like to motion to migrate gdal.org <http://gdal.org/> from our self-managed GitHub Pages infrastructure to ReadTheDocs. You can read specific details about the migration in the ticket at https://github.com/OSGeo/gdal/pull/10434 

This migration will provide some significant positive improvements to our documentation management. They include: hosted multi-version documentation, convenient build validation on PRs, and distributed management of the documentation setup through the website. There may be some growing pains as a result of the migration in terms of search indexing and management of those multi-version documentation sets. 

Over the next month or so, Dan, Even, and Javier will coordinate with the OSGeo SAC to move the DNS pointer to RTD and react with any updates that might need to be made as a result. They already have the experience of the proj.org <http://proj.org/> migration, so the migration is expected to go smoothly.

/me starts with +1

Howard 

From michkowalczuk at gmail.com  Thu Jul 25 13:44:05 2024
From: michkowalczuk at gmail.com (=?UTF-8?Q?Micha=C5=82_Kowalczuk?=)
Date: Thu, 25 Jul 2024 22:44:05 +0200
Subject: [gdal-dev] Changes in conda-forge packaging for GDAL 3.9.1
In-Reply-To: <0F127C24-FA15-4602-888E-346B93E415B0@gmail.com>
References: <08a02955-73c8-4e8d-be2d-ffcff56e2139@spatialys.com>
 <CAP+FqQCwHWyZgrxZJfTV7vxFkTz3uFMG_qPiPoQf0TPMPdNstQ@mail.gmail.com>
 <b8d55890-fe0e-48fe-a494-ae38c6d52426@spatialys.com>
 <CAP+FqQDqLjGwgqQh2YFmMdFDccxwQ-pxRjAawf4_q0NSOJA8Lg@mail.gmail.com>
 <CAP+FqQBr6+-vdFENY9vRFNR5fM-sxqWW6BJz6MHsET8=zUttuw@mail.gmail.com>
 <0F127C24-FA15-4602-888E-346B93E415B0@gmail.com>
Message-ID: <CAP+FqQCd1zH3diWz9tp_4rdTJTGw1rqGy6o=zzJKJVxoWNDukg@mail.gmail.com>

This is my DLL files structure:

archive.dll
blosc.dll
charset.dll
deflate.dll
freexl.dll
*gdal.dll*
geos.dll
geos_c.dll
geotiff.dll
iconv.dll
jpeg8.dll
krb5_64.dll
Lerc.dll
libbz2.dll
libcrypto-3-x64.dll
libcurl.dll
libexpat.dll
liblz4.dll
liblzma.dll
libminizip.dll
libpng16.dll
libsharpyuv.dll
libssh2.dll
libssl-3-x64.dll
libwebp.dll
libxml2.dll
openjp2.dll
pcre2-8.dll
proj_9_4.dll
snappy.dll
spatialite.dll
sqlite3.dll
tiff.dll
xerces-c_3_2.dll
zlib.dll
zstd.dll
*gdalplugins\gdal_JP2OpenJPEG.dll*
gdalplugins\drivers.ini

When I try to open jp2 file I get the following CPL error:

*'GDAL CPL Error 4: `D:\GisData\Formats\jp2\balloon.jp2' not recognized as
being in a supported file format. It could have been recognized by driver
JP2OpenJPEG, but plugin gdal_JP2OpenJPEG.dll is not available in your
installation. You may install it with 'conda install -c conda-forge
libgdal-jp2openjpeg'. The GDAL_DRIVER_PATH configuration option is not set.
(CE_Failure)'.*

I use conda to install libgdal-core and jp2 but later I moved necessary
dlls to different location. Maybe i missed something?

Regards,
Micha?

czw., 25 lip 2024 o 12:12 Michael Smith <michael.smith.erdc at gmail.com>
napisa?(a):

> It would be just
>
>
>
> mamba install -c conda-forge libgdal-core libgdal-jp2openjpeg
>
>
>
> Mike
>
>
>
>
>
> --
>
> Michael Smith
>
> Remote Sensing/GIS Center
>
> US Army Corps of Engineers
>
>
>
>
>
> *From: *gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Micha?
> Kowalczuk via gdal-dev <gdal-dev at lists.osgeo.org>
> *Reply-To: *Micha? Kowalczuk <michkowalczuk at gmail.com>
> *Date: *Thursday, July 25, 2024 at 6:00?AM
> *To: *Even Rouault <even.rouault at spatialys.com>
> *Cc: *"gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
> *Subject: *Re: [gdal-dev] Changes in conda-forge packaging for GDAL 3.9.1
>
>
>
> Continuing this topic...
>
> What should I do if I want to use lightweight version od GDAL
> (libgdal-corel) only with JP2 driver. Putting libgdal_-jp2openjpg.dll with
> gdal.dll is not sufficient.
>
> Thanks,
>
> Micha?
>
>
>
> czw., 25 lip 2024 o 08:43 Micha? Kowalczuk <michkowalczuk at gmail.com>
> napisa?(a):
>
> OK, I got it.
>
> I do not know who is the conda "maintainer" but it would be nice to give
> more descriptive summary for *gdal*, *libgdal *and *libgdal-core*
> packages, because now they are the same:
> *GDAL is a translator library for raster and vector geospatial data
> formats that is released under an X/MIT style Open Source license by the
> Open Source Geospatial Foundation.*
>
>
>
> Micha?
>
>
>
> ?r., 24 lip 2024 o 22:48 Even Rouault <even.rouault at spatialys.com>
> napisa?(a):
>
>
> Le 24/07/2024 ? 22:19, Micha? Kowalczuk a ?crit :
> > Hi,
> > I've just updated GDAL with conda and I was surprised about number of
> > dependencies that disappeared.
> > It's quite a big change and should be mentioned in the Release Notes,
> > not only here...
> > Don't you think so?
>
> The release notes are only about changes that occur at the source code
> level. They are tens of packaging solutions, which are all independent
> from the source delivery, and happen after the source release. Just
> mentioned Conda as it is quite popular.
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________ gdal-dev mailing list
> gdal-dev at lists.osgeo.org https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240725/6fe008a8/attachment.htm>

From even.rouault at spatialys.com  Thu Jul 25 14:05:55 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 25 Jul 2024 23:05:55 +0200
Subject: [gdal-dev] Motion: Migrate gdal.org to ReadTheDocs
In-Reply-To: <AC15F350-EE08-4A83-9C02-F1DA34825967@hobu.co>
References: <AC15F350-EE08-4A83-9C02-F1DA34825967@hobu.co>
Message-ID: <a884a9c0-b912-48bf-85d1-431fd0245a14@spatialys.com>

+1 Even

Le 25/07/2024 ? 17:01, Howard Butler via gdal-dev a ?crit?:
> All,
>
> I would like to motion to migrate gdal.org <http://gdal.org/> from our self-managed GitHub Pages infrastructure to ReadTheDocs. You can read specific details about the migration in the ticket at https://github.com/OSGeo/gdal/pull/10434
>
> This migration will provide some significant positive improvements to our documentation management. They include: hosted multi-version documentation, convenient build validation on PRs, and distributed management of the documentation setup through the website. There may be some growing pains as a result of the migration in terms of search indexing and management of those multi-version documentation sets.
>
> Over the next month or so, Dan, Even, and Javier will coordinate with the OSGeo SAC to move the DNS pointer to RTD and react with any updates that might need to be made as a result. They already have the experience of the proj.org <http://proj.org/> migration, so the migration is expected to go smoothly.
>
> /me starts with +1
>
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From j1 at jimenezshaw.com  Fri Jul 26 00:32:20 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Fri, 26 Jul 2024 09:32:20 +0200
Subject: [gdal-dev] Motion: Migrate gdal.org to ReadTheDocs
In-Reply-To: <a884a9c0-b912-48bf-85d1-431fd0245a14@spatialys.com>
References: <AC15F350-EE08-4A83-9C02-F1DA34825967@hobu.co>
 <a884a9c0-b912-48bf-85d1-431fd0245a14@spatialys.com>
Message-ID: <CADRrdKtCj8E7taB6xTXyXQJ1FfU6ZWSGFpmXQi0vzrXbgBCGaw@mail.gmail.com>

+1 Javier

On Thu, 25 Jul 2024 at 23:05, Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> +1 Even
>
> Le 25/07/2024 ? 17:01, Howard Butler via gdal-dev a ?crit :
> > All,
> >
> > I would like to motion to migrate gdal.org <http://gdal.org/> from our
> self-managed GitHub Pages infrastructure to ReadTheDocs. You can read
> specific details about the migration in the ticket at
> https://github.com/OSGeo/gdal/pull/10434
> >
> > This migration will provide some significant positive improvements to
> our documentation management. They include: hosted multi-version
> documentation, convenient build validation on PRs, and distributed
> management of the documentation setup through the website. There may be
> some growing pains as a result of the migration in terms of search indexing
> and management of those multi-version documentation sets.
> >
> > Over the next month or so, Dan, Even, and Javier will coordinate with
> the OSGeo SAC to move the DNS pointer to RTD and react with any updates
> that might need to be made as a result. They already have the experience of
> the proj.org <http://proj.org/> migration, so the migration is expected
> to go smoothly.
> >
> > /me starts with +1
> >
> > Howard
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240726/5c5ffd79/attachment.htm>

From mauceri at actgate.com  Fri Jul 26 00:49:00 2024
From: mauceri at actgate.com (Calogero Mauceri)
Date: Fri, 26 Jul 2024 09:49:00 +0200
Subject: [gdal-dev] Bad gdalwarp interpolation
Message-ID: <CAFYMBm--Zzee8JoSaUQVXgqEObaLgB+CsERWK2HjQj7jKKUUoA@mail.gmail.com>

Hi,

I'm rendering a 256x256 tile from a mercury dem. I noticed the gdalwarp is
producing a bad output when using interpolation with the following command

gdalwarp -of PNG -r bilinear -t_srs '+proj=eqc +a=2439700 +b=2439700
+lon_0=0.000000 +lat_0=0.000000 +x_0=0 +y_0=0 +units=m +no_defs' -ts 256
256 -te -958067.949620 -958067.950079 0.000460 0.000000 -overwrite
msgr_dem_low_res.tif tile.png

The output image is kind of blurred/low resolution
[image: tile.png]

On the other side, it looks good if nearest interpolation is used

gdalwarp -of PNG -t_srs '+proj=eqc +a=2439700 +b=2439700 +lon_0=0.000000
+lat_0=0.000000 +x_0=0 +y_0=0 +units=m +no_defs' -ts 256 256 -te
-958067.949620 -958067.950079 0.000460 0.000000 -overwrite
msgr_dem_low_res.tif tile.png

[image: tile.png]


The problem seems related to the fact that the right edge of the tile is
around longitude 0, while the source image is a full globe/360 degrees
image centered at 180 longitude

If I reduce the tile size to 255x255 for avoiding the 0 longitude at the
edge, then the interpolated output file looks much better

gdalwarp -of PNG -r bilinear -t_srs '+proj=eqc +a=2439700 +b=2439700
+lon_0=0.000000 +lat_0=0.000000 +x_0=0 +y_0=0 +units=m +no_defs' -ts 255
255 -te -958067.949620 -950583.044220 -7484.905400 0.000000 -overwrite
msgr_dem_low_res.tif tile_255.png

[image: tile_255.png]

Am I doing something wrong or is this a bug in GDAL?

I'm using the mercury dem from here
https://pdsimage2.wr.usgs.gov/Messenger/MESSDEM_1001/DEM/GLOBAL/IMG/
Here is a lower resolution of the same dem for testing purpose
https://
<https://pdsimage2.wr.usgs.gov/Messenger/MESSDEM_1001/DEM/GLOBAL/IMG/>
files.actgate.com/terrain/mercury/msgr_dem_low_res.tif

Thanks in advance for your help,
Calogero Mauceri

-- 
Calogero Mauceri
Software Engineer

Applied Coherent Technology Corporation (ACT)
www.actgate.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240726/4317c904/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tile.png
Type: image/png
Size: 15874 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240726/4317c904/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tile.png
Type: image/png
Size: 8573 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240726/4317c904/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tile_255.png
Type: image/png
Size: 23708 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240726/4317c904/attachment-0005.png>

From j1 at jimenezshaw.com  Fri Jul 26 03:26:32 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Fri, 26 Jul 2024 12:26:32 +0200
Subject: [gdal-dev] Bad gdalwarp interpolation
In-Reply-To: <CAFYMBm--Zzee8JoSaUQVXgqEObaLgB+CsERWK2HjQj7jKKUUoA@mail.gmail.com>
References: <CAFYMBm--Zzee8JoSaUQVXgqEObaLgB+CsERWK2HjQj7jKKUUoA@mail.gmail.com>
Message-ID: <CADRrdKvyDJ1v_WWayvRjV+cDFncAHuNzhhFRUuCvtUik_NBiYA@mail.gmail.com>

Hi

I do not know if there is anything wrong in GDAL. It looks like

As a workaround, you can first convert the projection to be centred at
lon=0 with something like this (I kept the same radius as the original to
minimize distortion). You can add bilinear interpolation or not, as you
wish.
gdalwarp -t_srs '+proj=eqc +a=2439400 +b=2439400 +lon_0=0.000000
+lat_0=0.000000 +x_0=0 +y_0=0 +units=m +no_defs'-overwrite
msgr_dem_low_res.tif centred.tif
And then cut with your command.

I know it is not optimal because it is converting the full image. But the
output is not blur.

Cheers,
Javier.



On Fri, 26 Jul 2024 at 09:49, Calogero Mauceri via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> I'm rendering a 256x256 tile from a mercury dem. I noticed the gdalwarp is
> producing a bad output when using interpolation with the following command
>
> gdalwarp -of PNG -r bilinear -t_srs '+proj=eqc +a=2439700 +b=2439700
> +lon_0=0.000000 +lat_0=0.000000 +x_0=0 +y_0=0 +units=m +no_defs' -ts 256
> 256 -te -958067.949620 -958067.950079 0.000460 0.000000 -overwrite
> msgr_dem_low_res.tif tile.png
>
> The output image is kind of blurred/low resolution
> [image: tile.png]
>
> On the other side, it looks good if nearest interpolation is used
>
> gdalwarp -of PNG -t_srs '+proj=eqc +a=2439700 +b=2439700 +lon_0=0.000000
> +lat_0=0.000000 +x_0=0 +y_0=0 +units=m +no_defs' -ts 256 256 -te
> -958067.949620 -958067.950079 0.000460 0.000000 -overwrite
> msgr_dem_low_res.tif tile.png
>
> [image: tile.png]
>
>
> The problem seems related to the fact that the right edge of the tile is
> around longitude 0, while the source image is a full globe/360 degrees
> image centered at 180 longitude
>
> If I reduce the tile size to 255x255 for avoiding the 0 longitude at the
> edge, then the interpolated output file looks much better
>
> gdalwarp -of PNG -r bilinear -t_srs '+proj=eqc +a=2439700 +b=2439700
> +lon_0=0.000000 +lat_0=0.000000 +x_0=0 +y_0=0 +units=m +no_defs' -ts 255
> 255 -te -958067.949620 -950583.044220 -7484.905400 0.000000 -overwrite
> msgr_dem_low_res.tif tile_255.png
>
> [image: tile_255.png]
>
> Am I doing something wrong or is this a bug in GDAL?
>
> I'm using the mercury dem from here
> https://pdsimage2.wr.usgs.gov/Messenger/MESSDEM_1001/DEM/GLOBAL/IMG/
> Here is a lower resolution of the same dem for testing purpose
> https://
> <https://pdsimage2.wr.usgs.gov/Messenger/MESSDEM_1001/DEM/GLOBAL/IMG/>
> files.actgate.com/terrain/mercury/msgr_dem_low_res.tif
>
> Thanks in advance for your help,
> Calogero Mauceri
>
> --
> Calogero Mauceri
> Software Engineer
>
> Applied Coherent Technology Corporation (ACT)
> www.actgate.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240726/368de4d2/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tile.png
Type: image/png
Size: 15874 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240726/368de4d2/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tile.png
Type: image/png
Size: 8573 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240726/368de4d2/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tile_255.png
Type: image/png
Size: 23708 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240726/368de4d2/attachment-0005.png>

From mauceri at actgate.com  Fri Jul 26 03:42:03 2024
From: mauceri at actgate.com (Calogero Mauceri)
Date: Fri, 26 Jul 2024 12:42:03 +0200
Subject: [gdal-dev] Bad gdalwarp interpolation
In-Reply-To: <CADRrdKvyDJ1v_WWayvRjV+cDFncAHuNzhhFRUuCvtUik_NBiYA@mail.gmail.com>
References: <CAFYMBm--Zzee8JoSaUQVXgqEObaLgB+CsERWK2HjQj7jKKUUoA@mail.gmail.com>
 <CADRrdKvyDJ1v_WWayvRjV+cDFncAHuNzhhFRUuCvtUik_NBiYA@mail.gmail.com>
Message-ID: <CAFYMBm8usbzkjESrT5ch0sg7=zPJ0zOcXR7QD_BuRgDWTMnQTQ@mail.gmail.com>

Thanks Javier for your reply.

I'd like to avoid changing the source file work around.
We are using gdalwarp C++ API as part of a general application that can
open any kind of file.



On Fri, Jul 26, 2024 at 12:26?PM Javier Jimenez Shaw <j1 at jimenezshaw.com>
wrote:

> Hi
>
> I do not know if there is anything wrong in GDAL. It looks like
>
> As a workaround, you can first convert the projection to be centred at
> lon=0 with something like this (I kept the same radius as the original to
> minimize distortion). You can add bilinear interpolation or not, as you
> wish.
> gdalwarp -t_srs '+proj=eqc +a=2439400 +b=2439400 +lon_0=0.000000
> +lat_0=0.000000 +x_0=0 +y_0=0 +units=m +no_defs'-overwrite
> msgr_dem_low_res.tif centred.tif
> And then cut with your command.
>
> I know it is not optimal because it is converting the full image. But the
> output is not blur.
>
> Cheers,
> Javier.
>
>
>
> On Fri, 26 Jul 2024 at 09:49, Calogero Mauceri via gdal-dev <
> gdal-dev at lists.osgeo.org> wrote:
>
>> Hi,
>>
>> I'm rendering a 256x256 tile from a mercury dem. I noticed the gdalwarp
>> is producing a bad output when using interpolation with the following
>> command
>>
>> gdalwarp -of PNG -r bilinear -t_srs '+proj=eqc +a=2439700 +b=2439700
>> +lon_0=0.000000 +lat_0=0.000000 +x_0=0 +y_0=0 +units=m +no_defs' -ts 256
>> 256 -te -958067.949620 -958067.950079 0.000460 0.000000 -overwrite
>> msgr_dem_low_res.tif tile.png
>>
>> The output image is kind of blurred/low resolution
>> [image: tile.png]
>>
>> On the other side, it looks good if nearest interpolation is used
>>
>> gdalwarp -of PNG -t_srs '+proj=eqc +a=2439700 +b=2439700 +lon_0=0.000000
>> +lat_0=0.000000 +x_0=0 +y_0=0 +units=m +no_defs' -ts 256 256 -te
>> -958067.949620 -958067.950079 0.000460 0.000000 -overwrite
>> msgr_dem_low_res.tif tile.png
>>
>> [image: tile.png]
>>
>>
>> The problem seems related to the fact that the right edge of the tile is
>> around longitude 0, while the source image is a full globe/360 degrees
>> image centered at 180 longitude
>>
>> If I reduce the tile size to 255x255 for avoiding the 0 longitude at the
>> edge, then the interpolated output file looks much better
>>
>> gdalwarp -of PNG -r bilinear -t_srs '+proj=eqc +a=2439700 +b=2439700
>> +lon_0=0.000000 +lat_0=0.000000 +x_0=0 +y_0=0 +units=m +no_defs' -ts 255
>> 255 -te -958067.949620 -950583.044220 -7484.905400 0.000000 -overwrite
>> msgr_dem_low_res.tif tile_255.png
>>
>> [image: tile_255.png]
>>
>> Am I doing something wrong or is this a bug in GDAL?
>>
>> I'm using the mercury dem from here
>> https://pdsimage2.wr.usgs.gov/Messenger/MESSDEM_1001/DEM/GLOBAL/IMG/
>> Here is a lower resolution of the same dem for testing purpose
>> https://
>> <https://pdsimage2.wr.usgs.gov/Messenger/MESSDEM_1001/DEM/GLOBAL/IMG/>
>> files.actgate.com/terrain/mercury/msgr_dem_low_res.tif
>>
>> Thanks in advance for your help,
>> Calogero Mauceri
>>
>> --
>> Calogero Mauceri
>> Software Engineer
>>
>> Applied Coherent Technology Corporation (ACT)
>> www.actgate.com
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>

-- 
Calogero Mauceri
Software Engineer

Applied Coherent Technology Corporation (ACT)
www.actgate.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240726/30b5abe2/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tile.png
Type: image/png
Size: 15874 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240726/30b5abe2/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tile.png
Type: image/png
Size: 8573 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240726/30b5abe2/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tile_255.png
Type: image/png
Size: 23708 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240726/30b5abe2/attachment-0005.png>

From Girmala at photomap.sk  Fri Jul 26 04:58:16 2024
From: Girmala at photomap.sk (Michal Girmala)
Date: Fri, 26 Jul 2024 11:58:16 +0000
Subject: [gdal-dev] Forcing -vshift in Gdal Python API
In-Reply-To: <ede36badb45847b386c0deb91f708980@photomap.sk>
References: <ede36badb45847b386c0deb91f708980@photomap.sk>
Message-ID: <402fc61b3ee24eb49de09fd9e40ea3cb@photomap.sk>

Hello all,

I am trying to reproject elevation raster with gdalwarp in python Gdal API using a transformation defined by -ct string

kwargs = {
        "format": 'GTiff',
        "resampleAlg": "cubic",
        "multithread":True
}

kwargs.update({"coordinateOperation":"+proj=pipeline +step +inv +proj=utm +zone=34 +ellps=GRS80 +step +proj=push +v_3 +step +proj=cart +ellps=GRS80 +step +inv +proj=helmert +x=485.021 +y=169.465 +z=483.839 +rx=-7.786342 +ry=-4.397554 +rz=-4.102655 +s=0 +convention=coordinate_frame +step +inv +proj=cart
+ellps=bessel +step +proj=pop +v_3 +step +proj=hgridshift +grids=.\\pipeline\\Slovakia_JTSK03_to_JTSK.gsb +step +proj=vgridshift +grids=.\\pipeline\\Slovakia_ETRS89h_to_Baltic1957.gtx +step +proj=krovak +lat_0=49.5 +lon_0=24.8333333333333 +alpha=30.2881397527778 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel" })
kwargs.update({"srcSRS":"EPSG:25834","dstSRS":"EPSG:5514"})

warp = gdal.Warp(out_raster,in_raster,**kwargs)


The horizontal reprojection works fine but I can?t force the Gdal to use an elevation shift grid file, because my CRS does not have a vertical system defined.

In the Gdal utility, I can easily do this by using -vshift parameter, but I don?t know how to do this with Python API since osgeo.gdal.WarpOptions does not contain this parameter.

Is there a way, how to force vertical transformation?


Thank you.

Best regards,
Ing. Michal Girmala

+421 908 133 793             girmala at photomap.sk<mailto:girmala at photomap.sk>
+421 55 685 4396             www.photomap.sk<https://photomap.photomap.sk/owa/redir.aspx?C=TkX_pwO3Cdy8-2srzfDp5ctFQ587EpI-9faJi0uprt0fCrd688PWCA..&URL=http%3a%2f%2fwww.photomap.sk%2f>
_ _

P Pred vytla?en?m tohto mailu pros?m zv??te dopad na ?ivotn? prostredie.<https://photomap.photomap.sk/owa/redir.aspx?C=tvo5neA_o2nG-tVUhKJQSd_SbCbRRCf3YD7l8laI8Q4fCrd688PWCA..&URL=http%3a%2f%2fthinkbeforeprinting.org%2f>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240726/37f4d192/attachment.htm>

From mauceri at actgate.com  Fri Jul 26 06:19:32 2024
From: mauceri at actgate.com (Calogero Mauceri)
Date: Fri, 26 Jul 2024 15:19:32 +0200
Subject: [gdal-dev] Bad gdalwarp interpolation
In-Reply-To: <CAFYMBm8usbzkjESrT5ch0sg7=zPJ0zOcXR7QD_BuRgDWTMnQTQ@mail.gmail.com>
References: <CAFYMBm--Zzee8JoSaUQVXgqEObaLgB+CsERWK2HjQj7jKKUUoA@mail.gmail.com>
 <CADRrdKvyDJ1v_WWayvRjV+cDFncAHuNzhhFRUuCvtUik_NBiYA@mail.gmail.com>
 <CAFYMBm8usbzkjESrT5ch0sg7=zPJ0zOcXR7QD_BuRgDWTMnQTQ@mail.gmail.com>
Message-ID: <CAFYMBm8SJUochNUrLSaO_mXX4B2bpfPVCupjZ=GWeQddCkfknA@mail.gmail.com>

I just submitted a bugreport for this issue
https://github.com/OSGeo/gdal/issues/10512

On Fri, Jul 26, 2024 at 12:42?PM Calogero Mauceri <mauceri at actgate.com>
wrote:

> Thanks Javier for your reply.
>
> I'd like to avoid changing the source file work around.
> We are using gdalwarp C++ API as part of a general application that can
> open any kind of file.
>
>
>
> On Fri, Jul 26, 2024 at 12:26?PM Javier Jimenez Shaw <j1 at jimenezshaw.com>
> wrote:
>
>> Hi
>>
>> I do not know if there is anything wrong in GDAL. It looks like
>>
>> As a workaround, you can first convert the projection to be centred at
>> lon=0 with something like this (I kept the same radius as the original to
>> minimize distortion). You can add bilinear interpolation or not, as you
>> wish.
>> gdalwarp -t_srs '+proj=eqc +a=2439400 +b=2439400 +lon_0=0.000000
>> +lat_0=0.000000 +x_0=0 +y_0=0 +units=m +no_defs'-overwrite
>> msgr_dem_low_res.tif centred.tif
>> And then cut with your command.
>>
>> I know it is not optimal because it is converting the full image. But the
>> output is not blur.
>>
>> Cheers,
>> Javier.
>>
>>
>>
>> On Fri, 26 Jul 2024 at 09:49, Calogero Mauceri via gdal-dev <
>> gdal-dev at lists.osgeo.org> wrote:
>>
>>> Hi,
>>>
>>> I'm rendering a 256x256 tile from a mercury dem. I noticed the gdalwarp
>>> is producing a bad output when using interpolation with the following
>>> command
>>>
>>> gdalwarp -of PNG -r bilinear -t_srs '+proj=eqc +a=2439700 +b=2439700
>>> +lon_0=0.000000 +lat_0=0.000000 +x_0=0 +y_0=0 +units=m +no_defs' -ts 256
>>> 256 -te -958067.949620 -958067.950079 0.000460 0.000000 -overwrite
>>> msgr_dem_low_res.tif tile.png
>>>
>>> The output image is kind of blurred/low resolution
>>> [image: tile.png]
>>>
>>> On the other side, it looks good if nearest interpolation is used
>>>
>>> gdalwarp -of PNG -t_srs '+proj=eqc +a=2439700 +b=2439700 +lon_0=0.000000
>>> +lat_0=0.000000 +x_0=0 +y_0=0 +units=m +no_defs' -ts 256 256 -te
>>> -958067.949620 -958067.950079 0.000460 0.000000 -overwrite
>>> msgr_dem_low_res.tif tile.png
>>>
>>> [image: tile.png]
>>>
>>>
>>> The problem seems related to the fact that the right edge of the tile is
>>> around longitude 0, while the source image is a full globe/360 degrees
>>> image centered at 180 longitude
>>>
>>> If I reduce the tile size to 255x255 for avoiding the 0 longitude at the
>>> edge, then the interpolated output file looks much better
>>>
>>> gdalwarp -of PNG -r bilinear -t_srs '+proj=eqc +a=2439700 +b=2439700
>>> +lon_0=0.000000 +lat_0=0.000000 +x_0=0 +y_0=0 +units=m +no_defs' -ts 255
>>> 255 -te -958067.949620 -950583.044220 -7484.905400 0.000000 -overwrite
>>> msgr_dem_low_res.tif tile_255.png
>>>
>>> [image: tile_255.png]
>>>
>>> Am I doing something wrong or is this a bug in GDAL?
>>>
>>> I'm using the mercury dem from here
>>> https://pdsimage2.wr.usgs.gov/Messenger/MESSDEM_1001/DEM/GLOBAL/IMG/
>>> Here is a lower resolution of the same dem for testing purpose
>>> https://
>>> <https://pdsimage2.wr.usgs.gov/Messenger/MESSDEM_1001/DEM/GLOBAL/IMG/>
>>> files.actgate.com/terrain/mercury/msgr_dem_low_res.tif
>>>
>>> Thanks in advance for your help,
>>> Calogero Mauceri
>>>
>>> --
>>> Calogero Mauceri
>>> Software Engineer
>>>
>>> Applied Coherent Technology Corporation (ACT)
>>> www.actgate.com
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>
> --
> Calogero Mauceri
> Software Engineer
>
> Applied Coherent Technology Corporation (ACT)
> www.actgate.com
>


-- 
Calogero Mauceri
Software Engineer

Applied Coherent Technology Corporation (ACT)
www.actgate.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240726/c16bf58f/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tile.png
Type: image/png
Size: 15874 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240726/c16bf58f/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tile.png
Type: image/png
Size: 8573 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240726/c16bf58f/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tile_255.png
Type: image/png
Size: 23708 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240726/c16bf58f/attachment-0005.png>

From dmbaker at cox.net  Fri Jul 26 06:28:45 2024
From: dmbaker at cox.net (David Baker)
Date: Fri, 26 Jul 2024 13:28:45 +0000 (UTC)
Subject: [gdal-dev] Forcing -vshift in Gdal Python API
In-Reply-To: <402fc61b3ee24eb49de09fd9e40ea3cb@photomap.sk>
References: <ede36badb45847b386c0deb91f708980@photomap.sk>
 <402fc61b3ee24eb49de09fd9e40ea3cb@photomap.sk>
Message-ID: <875536047.123518.1722000525433@mail.yahoo.com>

Michal,
This may be becuase of an issue with the conda-forge install of pyproj. ?The grid shift files do not get installed.
Please see this thread for details:
NAD27 to NAD83 Conversions ? pyproj4 pyproj ? Discussion #1409?
  
|  
|   
|   
|   |    |

   |

  |
|  
|    |  
NAD27 to NAD83 Conversions ? pyproj4 pyproj ? Discussion #1409
 
In previous versions of pyproj, I was able to convert points between different datums. Specifically, NAD27 to NAD83 with both geographic and Cartesian coordinates. Is there a setting that needs to ...
  |   |

  |

  |

  


David


Sent from Yahoo Mail


On pyproj4 pyproj6, 2024, 6:58 AM, Michal Girmala via gdal-dev <gdal-dev at lists.osgeo.org> wrote:

 <!--#yiv3625194537 filtered {}#yiv3625194537 filtered {}#yiv3625194537 filtered {}#yiv3625194537 p.yiv3625194537MsoNormal, #yiv3625194537 li.yiv3625194537MsoNormal, #yiv3625194537 div.yiv3625194537MsoNormal {margin:0cm;font-size:11.0pt;font-family:"Calibri", sans-serif;}#yiv3625194537 a:link, #yiv3625194537 span.yiv3625194537MsoHyperlink {color:#0563C1;text-decoration:underline;}#yiv3625194537 span.yiv3625194537EmailStyle19 {font-family:"Calibri", sans-serif;color:windowtext;}#yiv3625194537 .yiv3625194537MsoChpDefault {font-size:10.0pt;}#yiv3625194537 filtered {}#yiv3625194537 div.yiv3625194537WordSection1 {}-->
Hello all,
 
 ?
 
I am trying to reproject elevation raster with gdalwarp in python Gdal API using a transformation defined by -ct string
 
 ?
 
kwargs = {
 
??????? "format": 'GTiff', 
 
????????"resampleAlg": "cubic",
 
??????? "multithread":True 
 
}
 
 ?
 
kwargs.update({"coordinateOperation":"+proj=pipeline +step +inv +proj=utm +zone=34 +ellps=GRS80 +step +proj=push +v_3 +step +proj=cart +ellps=GRS80 +step +inv +proj=helmert +x=485.021 +y=169.465 +z=483.839 +rx=-7.786342 +ry=-4.397554 +rz=-4.102655 +s=0 +convention=coordinate_frame +step +inv +proj=cart 
 
+ellps=bessel +step +proj=pop +v_3 +step +proj=hgridshift +grids=.\\pipeline\\Slovakia_JTSK03_to_JTSK.gsb +step +proj=vgridshift +grids=.\\pipeline\\Slovakia_ETRS89h_to_Baltic1957.gtx +step +proj=krovak +lat_0=49.5 +lon_0=24.8333333333333 +alpha=30.2881397527778 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel" })
 
kwargs.update({"srcSRS":"EPSG:25834","dstSRS":"EPSG:5514"})
 
 ?
 
warp = gdal.Warp(out_raster,in_raster,**kwargs)
 
 ?
 
 ?
 
The horizontal reprojection works fine but I can?t force the Gdal to use an elevation shift grid file, because my CRS does not have a vertical system defined.
 
 ?
 
In the Gdal utility, I can easily do this by using -vshift parameter, but I don?t know how to do this with Python API since osgeo.gdal.WarpOptions does not contain this parameter.
 
 ?
 
Is there a way, how to force vertical transformation?
 
 ?
 
 ?
 
Thank you.
 
 ?
 
Best regards,
 
Ing. Michal Girmala
 
?
 
+421?908?133 793? ? ? ? ? ? ?girmala at photomap.sk
 
+421 55 685 4396?????????????www.photomap.sk
 
_ _
 
?
 
P?Pred vytla?en?m tohto mailu pros?m zv??te dopad na ?ivotn? prostredie.
 
 ?
 _______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240726/da85d64f/attachment.htm>

From schwehr at gmail.com  Fri Jul 26 09:56:11 2024
From: schwehr at gmail.com (Kurt Schwehr)
Date: Fri, 26 Jul 2024 09:56:11 -0700
Subject: [gdal-dev] Motion: Migrate gdal.org to ReadTheDocs
In-Reply-To: <AC15F350-EE08-4A83-9C02-F1DA34825967@hobu.co>
References: <AC15F350-EE08-4A83-9C02-F1DA34825967@hobu.co>
Message-ID: <CACmBxyujmAO6-S_dojQyrybZaDA1aS-A2H7JivSEt_rgFOBE-Q@mail.gmail.com>

+1 KurtS

On Thu, Jul 25, 2024 at 8:03?AM Howard Butler via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> All,
>
> I would like to motion to migrate gdal.org <http://gdal.org/> from our
> self-managed GitHub Pages infrastructure to ReadTheDocs. You can read
> specific details about the migration in the ticket at
> https://github.com/OSGeo/gdal/pull/10434
>
> This migration will provide some significant positive improvements to our
> documentation management. They include: hosted multi-version documentation,
> convenient build validation on PRs, and distributed management of the
> documentation setup through the website. There may be some growing pains as
> a result of the migration in terms of search indexing and management of
> those multi-version documentation sets.
>
> Over the next month or so, Dan, Even, and Javier will coordinate with the
> OSGeo SAC to move the DNS pointer to RTD and react with any updates that
> might need to be made as a result. They already have the experience of the
> proj.org <http://proj.org/> migration, so the migration is expected to go
> smoothly.
>
> /me starts with +1
>
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240726/83f02018/attachment.htm>

From j1 at jimenezshaw.com  Sat Jul 27 04:16:46 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Sat, 27 Jul 2024 13:16:46 +0200
Subject: [gdal-dev] dealing with complex (a+ib) images
Message-ID: <CADRrdKtvUFxH6hagAuADdVoffksqJB8jkc1iN5JB3xSOqimFdQ@mail.gmail.com>

Hi

I have to create a complex number (real and imaginary part) image out of
two "normal" images or bands.
How can I do it?

Next I want to split the complex image in two, real and imaginary. How can
I do it?

Unfortunately there is no way to show the complex image in QGIS (to check
that I am doing it rightly).

Thanks
Javier.
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240727/cf844bb0/attachment.htm>

From gdt at lexort.com  Sat Jul 27 04:35:30 2024
From: gdt at lexort.com (Greg Troxel)
Date: Sat, 27 Jul 2024 07:35:30 -0400
Subject: [gdal-dev] dealing with complex (a+ib) images
In-Reply-To: <CADRrdKtvUFxH6hagAuADdVoffksqJB8jkc1iN5JB3xSOqimFdQ@mail.gmail.com>
 (Javier Jimenez Shaw via gdal-dev's message of "Sat, 27 Jul 2024
 13:16:46 +0200")
References: <CADRrdKtvUFxH6hagAuADdVoffksqJB8jkc1iN5JB3xSOqimFdQ@mail.gmail.com>
Message-ID: <rmi7cd7m5j1.fsf@s1.lexort.com>

Javier Jimenez Shaw via gdal-dev <gdal-dev at lists.osgeo.org> writes:

> I have to create a complex number (real and imaginary part) image out of
> two "normal" images or bands.
> How can I do it?

I don't know, but it would be great if you explained what that means.
I did a quick web search and didn't find anything.

There is multispectral where there are N pixel values for each x/y
position, like RGB or many more bands.  But I am almost certain you
don't mean that.

Complex implies a magnitude and phase of a return signal and this makes
me think about LIDAR, except the wavelength is tiny compared to features
and ambiguity resolution seems infeasible.

From daniel.fred.evans at gmail.com  Sat Jul 27 04:49:49 2024
From: daniel.fred.evans at gmail.com (Daniel Evans)
Date: Sat, 27 Jul 2024 12:49:49 +0100
Subject: [gdal-dev] dealing with complex (a+ib) images
In-Reply-To: <rmi7cd7m5j1.fsf@s1.lexort.com>
References: <CADRrdKtvUFxH6hagAuADdVoffksqJB8jkc1iN5JB3xSOqimFdQ@mail.gmail.com>
 <rmi7cd7m5j1.fsf@s1.lexort.com>
Message-ID: <CANnaQabgTpksvga1687oDowBxGX2-8Yy7=+gqTpT+TQvAVBJgw@mail.gmail.com>

I would presume that Javier is intending to use one of the several Complex
data types that GDAL supports natively - CInt16, CInt32, CFloat32, CFloat64.

It seems that VRTs appear to have the capability to create a complex band
from two separate bands, and vice versa - the "complex", "imag", and "real"
pixel functions for "Derived Bands":
https://gdal.org/drivers/raster/vrt.html#default-pixel-functions

Cheers,
Daniel

On Sat, 27 Jul 2024 at 12:35, Greg Troxel via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Javier Jimenez Shaw via gdal-dev <gdal-dev at lists.osgeo.org> writes:
>
> > I have to create a complex number (real and imaginary part) image out of
> > two "normal" images or bands.
> > How can I do it?
>
> I don't know, but it would be great if you explained what that means.
> I did a quick web search and didn't find anything.
>
> There is multispectral where there are N pixel values for each x/y
> position, like RGB or many more bands.  But I am almost certain you
> don't mean that.
>
> Complex implies a magnitude and phase of a return signal and this makes
> me think about LIDAR, except the wavelength is tiny compared to features
> and ambiguity resolution seems infeasible.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240727/ec157ce1/attachment.htm>

From j1 at jimenezshaw.com  Sat Jul 27 05:24:20 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Sat, 27 Jul 2024 14:24:20 +0200
Subject: [gdal-dev] dealing with complex (a+ib) images
In-Reply-To: <CANnaQabgTpksvga1687oDowBxGX2-8Yy7=+gqTpT+TQvAVBJgw@mail.gmail.com>
References: <CADRrdKtvUFxH6hagAuADdVoffksqJB8jkc1iN5JB3xSOqimFdQ@mail.gmail.com>
 <rmi7cd7m5j1.fsf@s1.lexort.com>
 <CANnaQabgTpksvga1687oDowBxGX2-8Yy7=+gqTpT+TQvAVBJgw@mail.gmail.com>
Message-ID: <CADRrdKubWOYJDACKpAxX-=jAB+KYS9S3z6nc2_iNwyKWgqBV1w@mail.gmail.com>

Exactly Daniel. I want to use those types.
VRT seems to be the simpler way.

Thanks.

On Sat, 27 Jul 2024 at 13:49, Daniel Evans via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> I would presume that Javier is intending to use one of the several Complex
> data types that GDAL supports natively - CInt16, CInt32, CFloat32, CFloat64.
>
> It seems that VRTs appear to have the capability to create a complex band
> from two separate bands, and vice versa - the "complex", "imag", and "real"
> pixel functions for "Derived Bands":
> https://gdal.org/drivers/raster/vrt.html#default-pixel-functions
>
> Cheers,
> Daniel
>
> On Sat, 27 Jul 2024 at 12:35, Greg Troxel via gdal-dev <
> gdal-dev at lists.osgeo.org> wrote:
>
>> Javier Jimenez Shaw via gdal-dev <gdal-dev at lists.osgeo.org> writes:
>>
>> > I have to create a complex number (real and imaginary part) image out of
>> > two "normal" images or bands.
>> > How can I do it?
>>
>> I don't know, but it would be great if you explained what that means.
>> I did a quick web search and didn't find anything.
>>
>> There is multispectral where there are N pixel values for each x/y
>> position, like RGB or many more bands.  But I am almost certain you
>> don't mean that.
>>
>> Complex implies a magnitude and phase of a return signal and this makes
>> me think about LIDAR, except the wavelength is tiny compared to features
>> and ambiguity resolution seems infeasible.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240727/4da0e168/attachment.htm>

From Martin.Spott at mgras.net  Sat Jul 27 09:32:06 2024
From: Martin.Spott at mgras.net (Martin Spott)
Date: Sat, 27 Jul 2024 16:32:06 -0000 (UTC)
Subject: [gdal-dev] Motion: Migrate gdal.org to ReadTheDocs
References: <AC15F350-EE08-4A83-9C02-F1DA34825967@hobu.co>
Message-ID: <v837e6$8mqo$1@news.mgras.de>

+1  ;-)

	Martin

Howard Butler via gdal-dev wrote:
> All,
> 
> I would like to motion to migrate gdal.org <http://gdal.org/> from our self-managed GitHub Pages infrastructure to ReadTheDocs. You can read specific details about the migration in the ticket at https://github.com/OSGeo/gdal/pull/10434 
> 
> This migration will provide some significant positive improvements to our documentation management. They include: hosted multi-version documentation, convenient build validation on PRs, and distributed management of the documentation setup through the website. There may be some growing pains as a result of the migration in terms of search indexing and management of those multi-version documentation sets. 
> 
> Over the next month or so, Dan, Even, and Javier will coordinate with the OSGeo SAC to move the DNS pointer to RTD and react with any updates that might need to be made as a result. They already have the experience of the proj.org <http://proj.org/> migration, so the migration is expected to go smoothly.
> 
> /me starts with +1
> 
> Howard 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From howard at hobu.co  Sun Jul 28 09:04:56 2024
From: howard at hobu.co (Howard Butler)
Date: Sun, 28 Jul 2024 11:04:56 -0500
Subject: [gdal-dev] GDAL Maintainers Meeting Minutes
Message-ID: <D3F8D4FF-BD8B-4718-8404-05C3C8A53960@hobu.co>

Howard Butler, Even Rouault, Dan Baston, Michael Sumner, and Javier Jimenez Shaw held the monthly GDAL Maintainers Meeting on 07/25/2024. The following items were discussed and reported upon:

Discussion Items
----------------------------

* Esri has committed and been invoiced of three years of gold sponsorship of GDAL through the GDAL Sponsorship Program. Thanks again to Esri for its multi-year commitment! Sustained institutional support from organizations like Esri in the GDAL Sponsorship Program directly supports maintenance of GDAL continuous integration activity, ticket reviews, build system updates, bug fixing, and security fuzz testing.
* Discussion about modifying the current CHANGELOG layout of maintenance versus major releases
* Even and Javier discussed epsg.io <http://epsg.io/> with MapTiler folks at FOSS4GE Tartuu about improvements to update and eliminate mis-specified projection parameters for some coordinate systems.

Maintenance activities update
------------------------------------------

Alessandro
* GDALArgument parser implementation for gdal_manage
* Remove fixed level option conflicted with -i and -e in gdal_contour
* Geopackage driver PR reviews and testing
* PR reviews
 
Dan

* ReadTheDocs configuration and deployment. It was tough to get the Python bindings building and loading as part of the documentation build setup on RTD
* robots.txt indexing configuration (thanks for suggestions from Rob Coup)
* web stats showing ~33k hits/day to gdal.org <http://gdal.org/> with 2600 unique clicks/day

Even

* 90+ PR, ticket, and review activities
* Reaction and investigation resulting of GitHub rolling a somewhat broken Windows SDK
* Additional STANDALONE driver build configurations in support of RFC 96 (Arrow, OpenJPEG, TileDB, Georaster, etc)
* Multithreading read support for VRT and gdalvrtindex (non-overlapping scenarios)
* Additional "simplified" RasterIO interface that sizes and fills a buffer to provide a convenient alternative invocation
 
Javier

* Point interpolation method improvements https://github.com/OSGeo/gdal/pull/10506

Michel

* gdalraster bindings in R bringin VSI and expanded capability to R
* discussion about kerchunk and GDAL

Howard

* I'll see you at FOSS4GNA in September where I will be presenting about the GDAL Sponsorship Program https://whova.com/embedded/session/yES4SgdEKaaEK0AD6y4YnM1DD3NRWjkPECkzqJQHhCY%3D/4005895/?widget=primary 

The next GDAL Maintainers Meeting is 08/22/2024 at 13:00 UTC. Any GDAL PR contributors are welcome to join by reaching out to me for an invite.

Howard

From howard at hobu.co  Sun Jul 28 09:08:26 2024
From: howard at hobu.co (Howard Butler)
Date: Sun, 28 Jul 2024 11:08:26 -0500
Subject: [gdal-dev] Motion: Migrate gdal.org to ReadTheDocs
In-Reply-To: <CACmBxyujmAO6-S_dojQyrybZaDA1aS-A2H7JivSEt_rgFOBE-Q@mail.gmail.com>
References: <AC15F350-EE08-4A83-9C02-F1DA34825967@hobu.co>
 <CACmBxyujmAO6-S_dojQyrybZaDA1aS-A2H7JivSEt_rgFOBE-Q@mail.gmail.com>
Message-ID: <135CD3CB-8B9C-42AE-8229-4FECDAC66372@hobu.co>


>> /me starts with +1

Declaring this one passed with +1s from Howard, Javier, Even, and Kurt.

Dan and Even will coordinate the migration with OSGeo SAC.

Howard

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240728/c4cd076d/attachment.htm>

From michkowalczuk at gmail.com  Sun Jul 28 23:14:16 2024
From: michkowalczuk at gmail.com (=?UTF-8?Q?Micha=C5=82_Kowalczuk?=)
Date: Mon, 29 Jul 2024 08:14:16 +0200
Subject: [gdal-dev] Changes in conda-forge packaging for GDAL 3.9.1
In-Reply-To: <CAP+FqQCd1zH3diWz9tp_4rdTJTGw1rqGy6o=zzJKJVxoWNDukg@mail.gmail.com>
References: <08a02955-73c8-4e8d-be2d-ffcff56e2139@spatialys.com>
 <CAP+FqQCwHWyZgrxZJfTV7vxFkTz3uFMG_qPiPoQf0TPMPdNstQ@mail.gmail.com>
 <b8d55890-fe0e-48fe-a494-ae38c6d52426@spatialys.com>
 <CAP+FqQDqLjGwgqQh2YFmMdFDccxwQ-pxRjAawf4_q0NSOJA8Lg@mail.gmail.com>
 <CAP+FqQBr6+-vdFENY9vRFNR5fM-sxqWW6BJz6MHsET8=zUttuw@mail.gmail.com>
 <0F127C24-FA15-4602-888E-346B93E415B0@gmail.com>
 <CAP+FqQCd1zH3diWz9tp_4rdTJTGw1rqGy6o=zzJKJVxoWNDukg@mail.gmail.com>
Message-ID: <CAP+FqQDkwokSkaNjGCD82sYso-9uN8SGJ6zFVnRrnKoPBNFQ+A@mail.gmail.com>

Returning to changes conda packaging:
My conda installation is ligdal-core +  libgdal-jp2openjpeg using miniconda
on Windows.
.
If my *gdal.dll* and dependencies are in *\root *folder and
*gdal_JP2OpenJPEG.dll* is in *\root\gdalplugins* folder I need to set
*GDAL_DRIVER_PATH
*to *\root\gdalplugins *to work with jp2 files.
I'm not sure that this is the proper way - rather workaround...

Before 3.9.1 i did not have to use GDAL_DRIVER_PATH

Regards
Micha?




czw., 25 lip 2024 o 22:44 Micha? Kowalczuk <michkowalczuk at gmail.com>
napisa?(a):

> This is my DLL files structure:
>
> archive.dll
> blosc.dll
> charset.dll
> deflate.dll
> freexl.dll
> *gdal.dll*
> geos.dll
> geos_c.dll
> geotiff.dll
> iconv.dll
> jpeg8.dll
> krb5_64.dll
> Lerc.dll
> libbz2.dll
> libcrypto-3-x64.dll
> libcurl.dll
> libexpat.dll
> liblz4.dll
> liblzma.dll
> libminizip.dll
> libpng16.dll
> libsharpyuv.dll
> libssh2.dll
> libssl-3-x64.dll
> libwebp.dll
> libxml2.dll
> openjp2.dll
> pcre2-8.dll
> proj_9_4.dll
> snappy.dll
> spatialite.dll
> sqlite3.dll
> tiff.dll
> xerces-c_3_2.dll
> zlib.dll
> zstd.dll
> *gdalplugins\gdal_JP2OpenJPEG.dll*
> gdalplugins\drivers.ini
>
> When I try to open jp2 file I get the following CPL error:
>
> *'GDAL CPL Error 4: `D:\GisData\Formats\jp2\balloon.jp2' not recognized as
> being in a supported file format. It could have been recognized by driver
> JP2OpenJPEG, but plugin gdal_JP2OpenJPEG.dll is not available in your
> installation. You may install it with 'conda install -c conda-forge
> libgdal-jp2openjpeg'. The GDAL_DRIVER_PATH configuration option is not set.
> (CE_Failure)'.*
>
> I use conda to install libgdal-core and jp2 but later I moved necessary
> dlls to different location. Maybe i missed something?
>
> Regards,
> Micha?
>
> czw., 25 lip 2024 o 12:12 Michael Smith <michael.smith.erdc at gmail.com>
> napisa?(a):
>
>> It would be just
>>
>>
>>
>> mamba install -c conda-forge libgdal-core libgdal-jp2openjpeg
>>
>>
>>
>> Mike
>>
>>
>>
>>
>>
>> --
>>
>> Michael Smith
>>
>> Remote Sensing/GIS Center
>>
>> US Army Corps of Engineers
>>
>>
>>
>>
>>
>> *From: *gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Micha?
>> Kowalczuk via gdal-dev <gdal-dev at lists.osgeo.org>
>> *Reply-To: *Micha? Kowalczuk <michkowalczuk at gmail.com>
>> *Date: *Thursday, July 25, 2024 at 6:00?AM
>> *To: *Even Rouault <even.rouault at spatialys.com>
>> *Cc: *"gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
>> *Subject: *Re: [gdal-dev] Changes in conda-forge packaging for GDAL 3.9.1
>>
>>
>>
>> Continuing this topic...
>>
>> What should I do if I want to use lightweight version od GDAL
>> (libgdal-corel) only with JP2 driver. Putting libgdal_-jp2openjpg.dll with
>> gdal.dll is not sufficient.
>>
>> Thanks,
>>
>> Micha?
>>
>>
>>
>> czw., 25 lip 2024 o 08:43 Micha? Kowalczuk <michkowalczuk at gmail.com>
>> napisa?(a):
>>
>> OK, I got it.
>>
>> I do not know who is the conda "maintainer" but it would be nice to give
>> more descriptive summary for *gdal*, *libgdal *and *libgdal-core*
>> packages, because now they are the same:
>> *GDAL is a translator library for raster and vector geospatial data
>> formats that is released under an X/MIT style Open Source license by the
>> Open Source Geospatial Foundation.*
>>
>>
>>
>> Micha?
>>
>>
>>
>> ?r., 24 lip 2024 o 22:48 Even Rouault <even.rouault at spatialys.com>
>> napisa?(a):
>>
>>
>> Le 24/07/2024 ? 22:19, Micha? Kowalczuk a ?crit :
>> > Hi,
>> > I've just updated GDAL with conda and I was surprised about number of
>> > dependencies that disappeared.
>> > It's quite a big change and should be mentioned in the Release Notes,
>> > not only here...
>> > Don't you think so?
>>
>> The release notes are only about changes that occur at the source code
>> level. They are tens of packaging solutions, which are all independent
>> from the source delivery, and happen after the source release. Just
>> mentioned Conda as it is quite popular.
>>
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> _______________________________________________ gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240729/af6bdffc/attachment.htm>

From andrew.bell.ia at gmail.com  Mon Jul 29 08:29:21 2024
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 29 Jul 2024 11:29:21 -0400
Subject: [gdal-dev] Band Initialization
Message-ID: <CACJ51z1Zy2=0RQWr0-xaUzTDaBb_0nMsS+DXrKiv5Z1oOtsHYA@mail.gmail.com>

Hi,

Is a newly created raster band initialized to zero? If not, is there some
trivial way to perform such an initialization (this is a MEM driver raster,
if that matters).

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240729/1c6c32ae/attachment.htm>

From even.rouault at spatialys.com  Mon Jul 29 09:44:23 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 29 Jul 2024 18:44:23 +0200
Subject: [gdal-dev] Band Initialization
In-Reply-To: <CACJ51z1Zy2=0RQWr0-xaUzTDaBb_0nMsS+DXrKiv5Z1oOtsHYA@mail.gmail.com>
References: <CACJ51z1Zy2=0RQWr0-xaUzTDaBb_0nMsS+DXrKiv5Z1oOtsHYA@mail.gmail.com>
Message-ID: <74e75eb5-7714-4cb5-ae8f-59db04e532b1@spatialys.com>

Andrew,

>
> Is a newly created raster band initialized to zero? If not, is there 
> some trivial way to perform such an initialization (this is a MEM 
> driver raster, if that matters).

This might be indeed driver dependent. Drivers will generally initialize 
to zero or the nodata value. As far as I can see, the MEM driver uses 
calloc() to initialize the buffer, so that should be zero. Otherwise you 
can use GDALRasterBand::Fill() to initialize at the value of your choice

Even

>
> -- 
> Andrew Bell
> andrew.bell.ia at gmail.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240729/f12fb67d/attachment.htm>

From even.rouault at spatialys.com  Mon Jul 29 09:46:54 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 29 Jul 2024 18:46:54 +0200
Subject: [gdal-dev] Changes in conda-forge packaging for GDAL 3.9.1
In-Reply-To: <CAP+FqQDkwokSkaNjGCD82sYso-9uN8SGJ6zFVnRrnKoPBNFQ+A@mail.gmail.com>
References: <08a02955-73c8-4e8d-be2d-ffcff56e2139@spatialys.com>
 <CAP+FqQCwHWyZgrxZJfTV7vxFkTz3uFMG_qPiPoQf0TPMPdNstQ@mail.gmail.com>
 <b8d55890-fe0e-48fe-a494-ae38c6d52426@spatialys.com>
 <CAP+FqQDqLjGwgqQh2YFmMdFDccxwQ-pxRjAawf4_q0NSOJA8Lg@mail.gmail.com>
 <CAP+FqQBr6+-vdFENY9vRFNR5fM-sxqWW6BJz6MHsET8=zUttuw@mail.gmail.com>
 <0F127C24-FA15-4602-888E-346B93E415B0@gmail.com>
 <CAP+FqQCd1zH3diWz9tp_4rdTJTGw1rqGy6o=zzJKJVxoWNDukg@mail.gmail.com>
 <CAP+FqQDkwokSkaNjGCD82sYso-9uN8SGJ6zFVnRrnKoPBNFQ+A@mail.gmail.com>
Message-ID: <9ac995fd-0dd4-435e-8100-b7704fee229d@spatialys.com>


Le 29/07/2024 ? 08:14, Micha? Kowalczuk a ?crit?:
> Returning to changes conda packaging:
> My conda installation is ligdal-core?+ libgdal-jp2openjpeg using 
> miniconda on Windows.
> .
> If my *gdal.dll* and dependencies are in *\root *folder and 
> *gdal_JP2OpenJPEG.dll* is in *\root\gdalplugins* folder I need to set 
> *GDAL_DRIVER_PATH *to *\root\gdalplugins *to work with jp2 files.
> I'm not sure that this is the proper way - rather workaround...
conda install should patch gdal.dll to automatically refer to the 
gdalplugins subdirectory of the conda env, but if you move things 
manually to other places, that will obviously not work.
>
> Before 3.9.1 i did not have to use GDAL_DRIVER_PATH
Yes, because the driver was part of the core library
>
> Regards
> Micha?
>
>
>
> czw., 25 lip 2024 o 22:44?Micha? Kowalczuk <michkowalczuk at gmail.com> 
> napisa?(a):
>
>     This is my DLL files structure:
>
>     archive.dll
>     blosc.dll
>     charset.dll
>     deflate.dll
>     freexl.dll
>     *gdal.dll*
>     geos.dll
>     geos_c.dll
>     geotiff.dll
>     iconv.dll
>     jpeg8.dll
>     krb5_64.dll
>     Lerc.dll
>     libbz2.dll
>     libcrypto-3-x64.dll
>     libcurl.dll
>     libexpat.dll
>     liblz4.dll
>     liblzma.dll
>     libminizip.dll
>     libpng16.dll
>     libsharpyuv.dll
>     libssh2.dll
>     libssl-3-x64.dll
>     libwebp.dll
>     libxml2.dll
>     openjp2.dll
>     pcre2-8.dll
>     proj_9_4.dll
>     snappy.dll
>     spatialite.dll
>     sqlite3.dll
>     tiff.dll
>     xerces-c_3_2.dll
>     zlib.dll
>     zstd.dll
>     *gdalplugins\gdal_JP2OpenJPEG.dll*
>     gdalplugins\drivers.ini
>
>     When I try to open jp2 file I get the following CPL error:
>
>     /'GDAL CPL Error 4: `D:\GisData\Formats\jp2\balloon.jp2' not
>     recognized as being in a supported file format. It could have been
>     recognized by driver JP2OpenJPEG, but plugin gdal_JP2OpenJPEG.dll
>     is not available in your installation. You may install it with
>     'conda install -c conda-forge libgdal-jp2openjpeg'. The
>     GDAL_DRIVER_PATH configuration option is not set. (CE_Failure)'./
>
>     I use conda to install libgdal-core and jp2 but later I moved
>     necessary dlls to different location. Maybe i missed something?
>
>     Regards,
>     Micha?
>
>     czw., 25 lip 2024 o 12:12?Michael Smith
>     <michael.smith.erdc at gmail.com> napisa?(a):
>
>         It would be just
>
>         mamba install -c conda-forge libgdal-core libgdal-jp2openjpeg
>
>         Mike
>
>         -- 
>
>         Michael Smith
>
>         Remote Sensing/GIS Center
>
>         US Army Corps of Engineers
>
>         *From: *gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf
>         of Micha? Kowalczuk via gdal-dev <gdal-dev at lists.osgeo.org>
>         *Reply-To: *Micha? Kowalczuk <michkowalczuk at gmail.com>
>         *Date: *Thursday, July 25, 2024 at 6:00?AM
>         *To: *Even Rouault <even.rouault at spatialys.com>
>         *Cc: *"gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
>         *Subject: *Re: [gdal-dev] Changes in conda-forge packaging for
>         GDAL 3.9.1
>
>         Continuing this topic...
>
>         What should I do if I want to use lightweight version od GDAL
>         (libgdal-corel) only with JP2 driver. Putting
>         libgdal_-jp2openjpg.dll with gdal.dll is not sufficient.
>
>         Thanks,
>
>         Micha?
>
>         czw., 25 lip 2024 o 08:43?Micha? Kowalczuk
>         <michkowalczuk at gmail.com> napisa?(a):
>
>             OK, I got it.
>
>             I do not know who is the conda "maintainer" but it would
>             be nice to give more descriptive summary for *gdal*,
>             *libgdal *and *libgdal-core* packages, because now they
>             are the same:
>             /GDAL is a translator library for raster and vector
>             geospatial data formats that is released under an X/MIT
>             style Open Source license by the Open Source Geospatial
>             Foundation./
>
>             Micha?
>
>             ?r., 24 lip 2024 o 22:48?Even Rouault
>             <even.rouault at spatialys.com> napisa?(a):
>
>
>                 Le 24/07/2024 ? 22:19, Micha? Kowalczuk a ?crit?:
>                 > Hi,
>                 > I've just updated GDAL with conda and I was
>                 surprised about number of
>                 > dependencies that disappeared.
>                 > It's quite a big change and should be mentioned in
>                 the Release Notes,
>                 > not only here...
>                 > Don't you think so?
>
>                 The release notes are only about changes that occur at
>                 the source code
>                 level. They are tens of packaging solutions, which are
>                 all independent
>                 from the source delivery, and happen after the source
>                 release. Just
>                 mentioned Conda as it is quite popular.
>
>                 -- 
>                 http://www.spatialys.com
>                 My software is free, but my time generally not.
>
>         _______________________________________________ gdal-dev
>         mailing list gdal-dev at lists.osgeo.org
>         https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240729/24dcbccc/attachment-0001.htm>

From hkfrei at karten-werk.ch  Tue Jul 30 01:57:05 2024
From: hkfrei at karten-werk.ch (Hanskaspar Frei)
Date: Tue, 30 Jul 2024 08:57:05 +0000
Subject: [gdal-dev] ogr2ogr postgres index generation
Message-ID: <b2b05d57-4e9c-4ffc-9615-ee8d5fa19f33@karten-werk.ch>

Hi everybody

We used an old GDAL Version (3.2.1) to load data to a postgis db with
ogr2ogr.
There was an automatic spatial index generation taking place, which
seemed to have a logic to avoid duplicated index names.

Examples with GDAL 3.2.1:

For a table with the name
"ch059_liegenschaften_grundstueckpos_hilfslinien" a index named
"ch059_liegenschaften_grundstueckpos_hilfs_wkb_geometry_geom_idx" got
created.
For a table with the name
"ch059_liegenschaften_grundstueckpos_hilfslinien_proj" a index named
"ch059_liegenschaften_grundstueckpos_hilfslinien_proj_wkb_geomet" got
created.


Examples with GDAL 3.9.1:
For a table with the name
"ch059_liegenschaften_grundstueckpos_hilfslinien" a index named
"ch059_liegenschaften_grundstueckpos_hilfs_wkb_geometry_geom_idx" got
created.(equal like GDAL 3.2.1)
For a table with the name
"ch059_liegenschaften_grundstueckpos_hilfslinien_proj" it tries to
create an index named
"ch059_liegenschaften_grundstueckpos_hilfs_wkb_geometry_geom_idx" which
is equal to the one of the table above and therefore not valid in postgres

I am aware that the the maximum identifier length in postgis is 63 Bytes
and therefore the index names get cutted.

But why is this change in the index naming happening between GDAL
Version 3.2.1 and 3.9.1?

We don't want to downgrade to the old GDAL Version, but Is there a way
to go back to the old naming system which avoided duplicated names?




Thanks and best regards

Hanskaspar Frei

--
[logo]
Karten-Werk GmbH
Hanskaspar Frei
Via Vincenzo Dalberti 13
6718 Olivone

Phone: +41 79 360 72 83
Web: https://karten-werk.ch | E-Mail: hkfrei at karten-werk.ch<mailto:hkfrei at karten-werk.ch>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240730/3f0680d5/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: logomarker.png
Type: image/png
Size: 2456 bytes
Desc: logomarker.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240730/3f0680d5/attachment.png>

From lists at home.gofferje.net  Tue Jul 30 02:03:13 2024
From: lists at home.gofferje.net (Stefan Gofferje)
Date: Tue, 30 Jul 2024 09:03:13 +0000
Subject: [gdal-dev] Python-GDAL - How do I create a GeoTIFF from this array?
Message-ID: <0107019102e11de9-fc989f77-4e56-433e-a182-a0f9670aaacf-000000@eu-central-1.amazonses.com>

Hi all,

I'm still learning Python and GDAL.

I'm pulling the NOAA Aurora forecast in Python and create an array from 
it in this format:

[ [lon, lat, value], [lon, lat, value], [lon, lat, value] ...]

like

[ [-180,-90,0], [-180,-89,0], ... , [359, 89, 0], [359, 90, 0] ]

I would like to write this into a 1 band GeoTIFF but I'm missing some 
understanding of data types apparently.
I was wondering if somebody could point me in the right direction...

-Stefan

-- 
  (o_   Stefan Gofferje            | SCLT, MCP, CCSA
  //\   Reg'd Linux User #247167   | VCP #2263
  V_/_  https://www.gofferje.net   | https://www.saakeskus.fi


From mirza.nawandish at haritaevi.com  Tue Jul 30 04:04:39 2024
From: mirza.nawandish at haritaevi.com (Shahrukh Mirza Nawandish)
Date: Tue, 30 Jul 2024 14:04:39 +0300
Subject: [gdal-dev] Issue with GeoJSON to DGN Conversion and Back
Message-ID: <327921722337401@mail.yandex.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240730/8fd52840/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: converter_from_dgn.geojson
Type: application/json
Size: 6893 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240730/8fd52840/attachment-0002.json>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: peak_sample_data_UTM_EPSG_32643.dgn
Type: application/octet-stream
Size: 2658 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240730/8fd52840/attachment-0001.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: peak_sample_data.GeoJSON
Type: application/json
Size: 3081 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240730/8fd52840/attachment-0003.json>

From j1 at jimenezshaw.com  Tue Jul 30 05:43:49 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Tue, 30 Jul 2024 14:43:49 +0200
Subject: [gdal-dev] Python-GDAL - How do I create a GeoTIFF from this
 array?
In-Reply-To: <0107019102e11de9-fc989f77-4e56-433e-a182-a0f9670aaacf-000000@eu-central-1.amazonses.com>
References: <0107019102e11de9-fc989f77-4e56-433e-a182-a0f9670aaacf-000000@eu-central-1.amazonses.com>
Message-ID: <CADRrdKs1dqr6Tbf9ymNb7sTM7=1vfG84O0cE2CAFfTsH=gHK0w@mail.gmail.com>

That seems to be an XYZ raster format
https://gdal.org/drivers/raster/xyz.html

Maybe some of the tests could help you:
gdal/autotest/gdrivers/xyz.py

Cheers

On Tue, 30 Jul 2024 at 11:03, Stefan Gofferje via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi all,
>
> I'm still learning Python and GDAL.
>
> I'm pulling the NOAA Aurora forecast in Python and create an array from
> it in this format:
>
> [ [lon, lat, value], [lon, lat, value], [lon, lat, value] ...]
>
> like
>
> [ [-180,-90,0], [-180,-89,0], ... , [359, 89, 0], [359, 90, 0] ]
>
> I would like to write this into a 1 band GeoTIFF but I'm missing some
> understanding of data types apparently.
> I was wondering if somebody could point me in the right direction...
>
> -Stefan
>
> --
>   (o_   Stefan Gofferje            | SCLT, MCP, CCSA
>   //\   Reg'd Linux User #247167   | VCP #2263
>   V_/_  https://www.gofferje.net   | https://www.saakeskus.fi
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240730/f1b6ad6d/attachment.htm>

From even.rouault at spatialys.com  Tue Jul 30 07:10:52 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 30 Jul 2024 16:10:52 +0200
Subject: [gdal-dev] ogr2ogr postgres index generation
In-Reply-To: <b2b05d57-4e9c-4ffc-9615-ee8d5fa19f33@karten-werk.ch>
References: <b2b05d57-4e9c-4ffc-9615-ee8d5fa19f33@karten-werk.ch>
Message-ID: <8c203a9d-9157-40d5-903d-bf4c63a58128@spatialys.com>

Please file at ticket about that at https://github.com/OSGeo/gdal/issues

Le 30/07/2024 ? 10:57, Hanskaspar Frei via gdal-dev a ?crit?:
> Hi everybody
>
> We used an old GDAL Version (3.2.1) to load data to a postgis db with
> ogr2ogr.
> There was an automatic spatial index generation taking place, which
> seemed to have a logic to avoid duplicated index names.
>
> Examples with GDAL 3.2.1:
>
> For a table with the name
> "ch059_liegenschaften_grundstueckpos_hilfslinien" a index named
> "ch059_liegenschaften_grundstueckpos_hilfs_wkb_geometry_geom_idx" got
> created.
> For a table with the name
> "ch059_liegenschaften_grundstueckpos_hilfslinien_proj" a index named
> "ch059_liegenschaften_grundstueckpos_hilfslinien_proj_wkb_geomet" got
> created.
>
>
> Examples with GDAL 3.9.1:
> For a table with the name
> "ch059_liegenschaften_grundstueckpos_hilfslinien" a index named
> "ch059_liegenschaften_grundstueckpos_hilfs_wkb_geometry_geom_idx" got
> created.(equal like GDAL 3.2.1)
> For a table with the name
> "ch059_liegenschaften_grundstueckpos_hilfslinien_proj" it tries to
> create an index named
> "ch059_liegenschaften_grundstueckpos_hilfs_wkb_geometry_geom_idx" which
> is equal to the one of the table above and therefore not valid in postgres
>
> I am aware that the the maximum identifier length in postgis is 63 Bytes
> and therefore the index names get cutted.
>
> But why is this change in the index naming happening between GDAL
> Version 3.2.1 and 3.9.1?
>
> We don't want to downgrade to the old GDAL Version, but Is there a way
> to go back to the old naming system which avoided duplicated names?
>
>
>
>
> Thanks and best regards
>
> Hanskaspar Frei
> -- 
> logo
> *K**a**rten-Werk GmbH*
> Hanskaspar Frei
> Via Vincenzo Dalberti 13
> 6718 Olivone
>
> Phone: +41 79 360 72 83
> Web: https://karten-werk.ch | E-Mail: hkfrei at karten-werk.ch
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240730/4d24dbf4/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: logomarker.png
Type: image/png
Size: 2456 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240730/4d24dbf4/attachment.png>

From jmcglinchy at hydrosat.com  Tue Jul 30 07:11:36 2024
From: jmcglinchy at hydrosat.com (Joseph McGlinchy)
Date: Tue, 30 Jul 2024 14:11:36 +0000
Subject: [gdal-dev] Python-GDAL - How do I create a GeoTIFF from this
 array?
In-Reply-To: <mailman.211653.1722338090.32175.gdal-dev@lists.osgeo.org>
References: <mailman.211653.1722338090.32175.gdal-dev@lists.osgeo.org>
Message-ID: <AM9PR07MB7106B65F7527D35A6853AFB9A1B02@AM9PR07MB7106.eurprd07.prod.outlook.com>

I think you want to


  *
Create a dataset with the geotiff driver with appropriate data type, and 1 band
  *
Construct geotransform from the longitude/latitude arrays (google: gdal python geotransform)
  *
Write the 3rd band (values) of your array to that dataset

Otherwise, yeah the XYZ approach looks good since if you create a numpy array from that list, it should be shape [number of pixels, 3]

________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of gdal-dev-request at lists.osgeo.org <gdal-dev-request at lists.osgeo.org>
Sent: Tuesday, July 30, 2024 5:14 AM
To: gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: gdal-dev Digest, Vol 242, Issue 48

Send gdal-dev mailing list submissions to
        gdal-dev at lists.osgeo.org

To subscribe or unsubscribe via the World Wide Web, visit
        https://lists.osgeo.org/mailman/listinfo/gdal-dev
or, via email, send a message with subject or body 'help' to
        gdal-dev-request at lists.osgeo.org

You can reach the person managing the list at
        gdal-dev-owner at lists.osgeo.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of gdal-dev digest..."


Today's Topics:

   1. ogr2ogr postgres index generation (Hanskaspar Frei)
   2. Python-GDAL - How do I create a GeoTIFF from this array?
      (Stefan Gofferje)
   3. Issue with GeoJSON to DGN Conversion and Back
      (Shahrukh Mirza Nawandish)


----------------------------------------------------------------------

Message: 1
Date: Tue, 30 Jul 2024 08:57:05 +0000
From: Hanskaspar Frei <hkfrei at karten-werk.ch>
To: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Subject: [gdal-dev] ogr2ogr postgres index generation
Message-ID: <b2b05d57-4e9c-4ffc-9615-ee8d5fa19f33 at karten-werk.ch>
Content-Type: text/plain; charset="utf-8"

Hi everybody

We used an old GDAL Version (3.2.1) to load data to a postgis db with
ogr2ogr.
There was an automatic spatial index generation taking place, which
seemed to have a logic to avoid duplicated index names.

Examples with GDAL 3.2.1:

For a table with the name
"ch059_liegenschaften_grundstueckpos_hilfslinien" a index named
"ch059_liegenschaften_grundstueckpos_hilfs_wkb_geometry_geom_idx" got
created.
For a table with the name
"ch059_liegenschaften_grundstueckpos_hilfslinien_proj" a index named
"ch059_liegenschaften_grundstueckpos_hilfslinien_proj_wkb_geomet" got
created.


Examples with GDAL 3.9.1:
For a table with the name
"ch059_liegenschaften_grundstueckpos_hilfslinien" a index named
"ch059_liegenschaften_grundstueckpos_hilfs_wkb_geometry_geom_idx" got
created.(equal like GDAL 3.2.1)
For a table with the name
"ch059_liegenschaften_grundstueckpos_hilfslinien_proj" it tries to
create an index named
"ch059_liegenschaften_grundstueckpos_hilfs_wkb_geometry_geom_idx" which
is equal to the one of the table above and therefore not valid in postgres

I am aware that the the maximum identifier length in postgis is 63 Bytes
and therefore the index names get cutted.

But why is this change in the index naming happening between GDAL
Version 3.2.1 and 3.9.1?

We don't want to downgrade to the old GDAL Version, but Is there a way
to go back to the old naming system which avoided duplicated names?




Thanks and best regards

Hanskaspar Frei

--
[logo]
Karten-Werk GmbH
Hanskaspar Frei
Via Vincenzo Dalberti 13
6718 Olivone

Phone: +41 79 360 72 83
Web: https://karten-werk.ch | E-Mail: hkfrei at karten-werk.ch<mailto:hkfrei at karten-werk.ch>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240730/3f0680d5/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: logomarker.png
Type: image/png
Size: 2456 bytes
Desc: logomarker.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240730/3f0680d5/attachment-0001.png>

------------------------------

Message: 2
Date: Tue, 30 Jul 2024 09:03:13 +0000
From: Stefan Gofferje <lists at home.gofferje.net>
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Python-GDAL - How do I create a GeoTIFF from this
        array?
Message-ID:
        <0107019102e11de9-fc989f77-4e56-433e-a182-a0f9670aaacf-000000 at eu-central-1.amazonses.com>

Content-Type: text/plain; charset=UTF-8; format=flowed

Hi all,

I'm still learning Python and GDAL.

I'm pulling the NOAA Aurora forecast in Python and create an array from
it in this format:

[ [lon, lat, value], [lon, lat, value], [lon, lat, value] ...]

like

[ [-180,-90,0], [-180,-89,0], ... , [359, 89, 0], [359, 90, 0] ]

I would like to write this into a 1 band GeoTIFF but I'm missing some
understanding of data types apparently.
I was wondering if somebody could point me in the right direction...

-Stefan

--
  (o_   Stefan Gofferje            | SCLT, MCP, CCSA
  //\   Reg'd Linux User #247167   | VCP #2263
  V_/_  https://www.gofferje.net   | https://www.saakeskus.fi



------------------------------

Message: 3
Date: Tue, 30 Jul 2024 14:04:39 +0300
From: Shahrukh Mirza Nawandish <mirza.nawandish at haritaevi.com>
To: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Subject: [gdal-dev] Issue with GeoJSON to DGN Conversion and Back
Message-ID: <327921722337401 at mail.yandex.com>
Content-Type: text/plain; charset="us-ascii"

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240730/8fd52840/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: converter_from_dgn.geojson
Type: application/json
Size: 6893 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240730/8fd52840/attachment.json>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: peak_sample_data_UTM_EPSG_32643.dgn
Type: application/octet-stream
Size: 2658 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240730/8fd52840/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: peak_sample_data.GeoJSON
Type: application/json
Size: 3081 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240730/8fd52840/attachment-0001.json>

------------------------------

Subject: Digest Footer

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev


------------------------------

End of gdal-dev Digest, Vol 242, Issue 48
*****************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240730/b361ba9b/attachment-0001.htm>

From michael.smith.erdc at gmail.com  Tue Jul 30 11:37:25 2024
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Tue, 30 Jul 2024 14:37:25 -0400
Subject: [gdal-dev] Issue converting geo parquet data
Message-ID: <A717A0A7-75F2-4064-935C-A5AA8589F294@gmail.com>

Hi all,

 

I was converting the overture maps parquet data to geopackage and got this error using gdal master (via conda).

 

GDAL_NUM_THREADS=ALL_CPUS CPL_TMPDIR=/data2 ogr2ogr -f gpkg /data/overture_buildings.gpkg /vsis3/overturemaps-us-west-2/release/2024-07-22.0/theme=buildings "theme=buildings"? -progress? -nlt PROMOTE_TO_MULTI -nln buildings -skipfailures

ERROR 1: ReadNext() failed: Couldn't deserialize thrift: TProtocolException: Exceeded size limit

 

Not sure what size limit it exceeded? I?ve had this happen several times but at very different points in the process. 

 

Ideas?

 

Mike

 

 

-- 

Michael Smith

US Army Corps of Engineers

Remote Sensing/GIS Center

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240730/99b61c9b/attachment.htm>

From even.rouault at spatialys.com  Tue Jul 30 12:38:34 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 30 Jul 2024 21:38:34 +0200
Subject: [gdal-dev] Issue converting geo parquet data
In-Reply-To: <A717A0A7-75F2-4064-935C-A5AA8589F294@gmail.com>
References: <A717A0A7-75F2-4064-935C-A5AA8589F294@gmail.com>
Message-ID: <1cc3eab3-5c98-43ca-a009-32e855d735e6@spatialys.com>

Hi Michael,

This error comes very deep inside libparquet, actually in libthrift. The 
more natural assumption would be that it would be due to a corrupted 
Parquet file. If you disabled multithreading (GDAL_NUM_THREADS=1) and 
enabled --debug on, perhaps this would happen on the same file ? I was 
wondering also if that couldn't come from RAM exhaustion, but that 
doesn't seem likely (did you monitor the RAM consumption?). It would be 
interesting to see if that would also occur after fetching locally the 
files under overturemaps-us-west-2/release/2024-07-22.0/theme=buildings 
and running the conversion from the local files

Even

Le 30/07/2024 ? 20:37, Michael Smith via gdal-dev a ?crit?:
>
> Hi all,
>
> I was converting the overture maps parquet data to geopackage and got 
> this error using gdal master (via conda).
>
> GDAL_NUM_THREADS=ALL_CPUS CPL_TMPDIR=/data2 ogr2ogr -f gpkg 
> /data/overture_buildings.gpkg 
> /vsis3/overturemaps-us-west-2/release/2024-07-22.0/theme=buildings 
> "theme=buildings"? -progress? -nlt PROMOTE_TO_MULTI -nln buildings 
> -skipfailures
>
> ERROR 1: ReadNext() failed: Couldn't deserialize thrift: 
> TProtocolException: Exceeded size limit
>
> Not sure what size limit it exceeded? I?ve had this happen several 
> times but at very different points in the process.
>
> Ideas?
>
> Mike
>
> -- 
>
> Michael Smith
>
> US Army Corps of Engineers
>
> Remote Sensing/GIS Center
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240730/19d47e57/attachment.htm>

From j1 at jimenezshaw.com  Wed Jul 31 01:19:17 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 31 Jul 2024 10:19:17 +0200
Subject: [gdal-dev] pixel class
Message-ID: <CADRrdKs3CF4ZNQO0q9H8e2gotZrK5UkqmdXnqo5s4rWEvtMLHw@mail.gmail.com>

Hi

I am working in an algorithm that uses a lot of pixel positions both as int
and double, offset of pixels, etc.
Is there any class that avoids me to use a variable for the x and another
for the y... for everything? It would make the code much simpler.
Something where I can multiply by a factor (all the components), or sum
another pixel (as an offset), and so on. Of course, set and get each
component.

I have used in other projects Eigen::Vector2i and Vector2d. I do not mean
that we add Eigen3 as a dependency for such a minor thing, but maybe we
have already something similar.

Also I do not want to use it in any API. Just an internal tool to make code
easier to read.

Thanks.
Javier
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240731/418f37b0/attachment.htm>

From even.rouault at spatialys.com  Wed Jul 31 09:48:04 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 31 Jul 2024 18:48:04 +0200
Subject: [gdal-dev] pixel class
In-Reply-To: <CADRrdKs3CF4ZNQO0q9H8e2gotZrK5UkqmdXnqo5s4rWEvtMLHw@mail.gmail.com>
References: <CADRrdKs3CF4ZNQO0q9H8e2gotZrK5UkqmdXnqo5s4rWEvtMLHw@mail.gmail.com>
Message-ID: <ce5caf46-f01c-4aca-8f46-dcd41c9febba@spatialys.com>


Le 31/07/2024 ? 10:19, Javier Jimenez Shaw via gdal-dev a ?crit?:
> Hi
>
> I am working in an algorithm that uses a lot of pixel positions both 
> as int and double, offset of pixels, etc.
> Is there any class that avoids me to use a variable for the x and 
> another for the y... for everything? It would make the code much simpler.
> Something where I can multiply by a factor (all the components), or 
> sum another pixel (as an offset), and so on. Of course, set and get 
> each component.

We have OGRRawPoint in ogr_geometry.h for x,y double.

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240731/36ba2762/attachment.htm>

