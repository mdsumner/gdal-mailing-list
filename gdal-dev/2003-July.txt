From jluis at ualg.pt  Tue Jul  1 20:53:12 2003
From: jluis at ualg.pt (jluis@ualg.pt)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] Problem building 1.1.9 on Windows
Message-ID: <1057107192.3f022cf81ad88@wmail.ualg.pt>

Hi,
First, in the file nmake.opt the "INC" line 
INC	=	-I$(GDAL_ROOT)\port -I$(GDAL_ROOT)\ogr -I$(GDAL_ROOT)\core
needs to be changed to 
INC	=	-I$(GDAL_ROOT)\port -I$(GDAL_ROOT)\ogr -I$(GDAL_ROOT)\gcore

Now my (very strange) problem. I'm just not able to build because gdal.lib is 
not created. Compiling goes through this makefile section
lib:
	if exist gdal.lib del gdal.lib
	lib /out:gdal.lib $(LIBOBJ)
without creating the library. What makes it more odd is that if I run this 
outside the makefile (decomposing $(LIBOBJ)), things work.
Note. I built 1.1.8 without problems.

Is it possible to have an "official" compiled windows release? The last 
available one is 1.1.5, I think.

Thanks

J. Luis

From ben at vterrain.org  Tue Jul  1 21:27:11 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] Problem building 1.1.9 on Windows
In-Reply-To: <1057107192.3f022cf81ad88@wmail.ualg.pt>
Message-ID: <018b01c34039$0fd3fb10$f400fe0a@TOPP2>

> Is it possible to have an "official" compiled windows 
> release? The last available one is 1.1.5, I think.

If you don't mind an 'unofficial' release, i have compiled one and put
it here:
ftp://ftp.vterrain.org/pub/vterrain/dist/gdal-119-ntbin.zip

(I do this with each release so that the VTP users don't have to build
it themselves, so i've gotten pretty good at getting GDAL to build on
Windows..)

This is built with MSVC6SP5 and includes both release and debug versions
of the .lib/.dll.  The debug versions have an extra 'd' in their name.

It is also built with support for XML/GML turned on, so you may need to
grab Xerces 2.1.0 to link with as well.

-Ben


From dron at ak4719.spb.edu  Wed Jul  2 03:53:09 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] Problem building 1.1.9 on Windows
In-Reply-To: <1057107192.3f022cf81ad88@wmail.ualg.pt>
References: <1057107192.3f022cf81ad88@wmail.ualg.pt>
Message-ID: <20030702075309.GA19323@ak4719.spb.edu>

On Wed, Jul 02, 2003 at 01:53:12AM +0100, jluis@ualg.pt wrote:
> First, in the file nmake.opt the "INC" line 
> INC	=	-I$(GDAL_ROOT)\port -I$(GDAL_ROOT)\ogr -I$(GDAL_ROOT)\core
> needs to be changed to 
> INC	=	-I$(GDAL_ROOT)\port -I$(GDAL_ROOT)\ogr -I$(GDAL_ROOT)\gcore

Thanks for report, fixed.

> Now my (very strange) problem. I'm just not able to build because gdal.lib is 
> not created. Compiling goes through this makefile section
> lib:
> 	if exist gdal.lib del gdal.lib
> 	lib /out:gdal.lib $(LIBOBJ)
> without creating the library. What makes it more odd is that if I run this 
> outside the makefile (decomposing $(LIBOBJ)), things work.

It is strange... I will try to test this soon.

> Is it possible to have an "official" compiled windows release? The last 
> available one is 1.1.5, I think.

On of the ways to get latest GDAL binaries is grab Frank's OpenEV build.
It contain GDAL .dll and tools.


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From jluis at ualg.pt  Wed Jul  2 09:02:25 2003
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] Problem building 1.1.9 on Windows
References: <018b01c34039$0fd3fb10$f400fe0a@TOPP2>
Message-ID: <3F02D7E1.AB8EC916@ualg.pt>


Ben Discoe wrote:

> > Is it possible to have an "official" compiled windows
> > release? The last available one is 1.1.5, I think.
>
> If you don't mind an 'unofficial' release, i have compiled one and put
> it here:
> ftp://ftp.vterrain.org/pub/vterrain/dist/gdal-119-ntbin.zip

Thank you Ben and Andrey (I have OpenEV and didn't remember to look at it).
But Ben, this means that you didn't have the problem I described?

BTW, if anyone is interested I wrote a Matlab mex that is a kind of gdal2raw

but only for real (not complex) data.


From ben at vterrain.org  Wed Jul  2 10:23:54 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] Problem building 1.1.9 on Windows
In-Reply-To: <3F02D7E1.AB8EC916@ualg.pt>
Message-ID: <01de01c340a5$91e96740$f400fe0a@TOPP2>

> From: Joaquim Luis
> 
> Thank you Ben and Andrey (I have OpenEV and didn't remember 
> to look at it).
> But Ben, this means that you didn't have the problem I described?

Indeed, i haven't ever seen that sort of problem, but keep in mind that
i made plenty of changes to the makefiles in order to get it to build
debug and release builds cleanly, to support spaces in the development
paths, etc.  (Roger James is the guy who mostly did the work on making
these makefile changes in the build i'm using now).  Roger & i have
offered our makefiles changes here before.

-Ben


From mathieu_gdal at yahoo.fr  Thu Jul  3 05:10:14 2003
From: mathieu_gdal at yahoo.fr (mathieu_gdal)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] UTM to Lat/Lon
Message-ID: <000101c34142$eca83740$3b00000a@informatiquemer.fr>

Dear All,

 

I am a GDAL beginner, and I have a very basic question.

(It is probably a FAQ)

 

I have some TIF file defined in UTM (zone 19N), NAD27.

I can retrieve from those tif :

       - The ProjectionRef (PROJCS["NAD27 / UTM zone
19N",GEOGCS["NAD27", . and so on.)

       - And the 6 affine transformation coefficients 

 

I would like to implement to raster projection: Converting a pixel
coordinate (in the bitmap) into a position in Lat/Lon coord system (in
WGS84 for example)

 

I guess the way to do it is:

1) Convert from pixel coordinate to the geotiff file coordinate system,
ie in my case UTM zone 19, in meters. (There is no problem for that, I
will use the affine coefficients)

2) Convert from the geotiff file coordinate system to lat/lon system.

 

(u,v)Pixel ---------1----------> UTM(x,y) meters ---------2---------->
(Lat,Lon)radians

 

How to do 2) ??

Am I on the right way?

Do you have a sample doing this kind of projection?

 

 

Note : I have tried to create a OGRCoordinateTransformation with my
file's OGRSpatialReference and a simple lat/lon OGRSpatialReference. It
does not work, even if the transformation seems to be well created.

 

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030703/e99ce546/attachment.html
From schut at sarvision.com  Thu Jul  3 05:48:46 2003
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] SRTM data and GDAL
In-Reply-To: <20030307104327.G4435@itc.it>
References: <20030306170001.15376.78522.Mailman@yoda.imagelinks.com> <20030307104327.G4435@itc.it>
Message-ID: <200307031148.46206.schut@sarvision.com>

Dear GDAL developers & users,

any news on a more sophisticated/automagicated way to open/convert SRTM data 
now South America is publicly available too?

Cheers,
Vincent.

On Friday 07 March 2003 10:43, Markus Neteler wrote:
> Dear GDAL users,
>
> since yesterday a SRTM shuttle elevation data are available
> for Northern America at around 90m resolution (0:00:03 deg):
>
> http://www.jpl.nasa.gov/srtm/cbanddataproducts.html
> ftp://srtm.usgs.gov/pub/data/srtm/North_America/3arcsec/
>
> The trick to use them with GDAL is as follows:
>
> - unpack the .zip file
> - mv NXXWYYY.hgt NXXWYYY.bil
> - create a .hdr file (ARC/INFO style) from the file name:
>
> Example for N18W077.bil
>
> BYTEORDER     M
> LAYOUT        BIL
> NROWS         1201
> NCOLS         1201
> NBANDS        1
> NBITS         16
> BANDROWBYTES  2402
> TOTALROWBYTES 2402
> BANDGAPBYTES  0
> NODATA        -32768
> ULXMAP        -76.9995833333        <- WYYY - 0.0004166667
> ULYMAP        19.00041666666667     <- NXX  + 1.0004166667
> XDIM          0.000833333333333
> YDIM          0.000833333333333
>
>
> Then gdalinfo then accepts the file and reports:
>
> gdalinfo -mm N18W077.bil
> Driver: EHdr/ESRI .hdr Labelled
> Size is 1201, 1201
> Coordinate System is '
> Origin = (-77.000000,19.000833)
> Pixel Size = (0.000833,-0.000833)
> Corner Coordinates:
> Upper Left  ( -77.0000000,  19.0008333)
> Lower Left  ( -77.0000000,  18.0000000)
> Upper Right ( -75.9991667,  19.0008333)
> Lower Right ( -75.9991667,  18.0000000)
> Center      ( -76.4995833,  18.5004167)
> Band 1 Block=1201x1 Type=Int16, ColorInterp=Undefined
>     Computed Min/Max=-10.000,2024.000
>   NoData Value=-32768
>
> Maybe the GDAL authors could add a simple HGT driver which
> automagically constructs the .hdr file internally on the fly.
>
> Anyway, with above method you can easily import/convert
> the data (also tested with GRASS).
>
> Cheers
>
>  Markus

-- 
______________________________________
Vincent Schut
Sarvision B.V.
Wageningen, The Netherlands
www.sarvision.com

From dron at ak4719.spb.edu  Thu Jul  3 06:23:13 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] UTM to Lat/Lon
In-Reply-To: <000101c34142$eca83740$3b00000a@informatiquemer.fr>
References: <000101c34142$eca83740$3b00000a@informatiquemer.fr>
Message-ID: <20030703102313.GA29846@ak4719.spb.edu>

On Thu, Jul 03, 2003 at 11:10:14AM +0200, mathieu_gdal wrote:
> I would like to implement to raster projection: Converting a pixel
> coordinate (in the bitmap) into a position in Lat/Lon coord system (in
> WGS84 for example)
> 
> I guess the way to do it is:
> 
> 1) Convert from pixel coordinate to the geotiff file coordinate system,
> ie in my case UTM zone 19, in meters. (There is no problem for that, I
> will use the affine coefficients)
> 
> 2) Convert from the geotiff file coordinate system to lat/lon system.
> 
> (u,v)Pixel ---------1----------> UTM(x,y) meters ---------2---------->
> (Lat,Lon)radians
> 
> How to do 2) ??

There is a simple Python script attached to read geographic information
from the GDAL supported file and convert specified pixel/line
coordinates into lat/long ones. It is pretty self-explanatory and will
be added to gdal/pymod/samples soon.

> Note : I have tried to create a OGRCoordinateTransformation with my
> file's OGRSpatialReference and a simple lat/lon OGRSpatialReference. It
> does not work, even if the transformation seems to be well created.

It works ;-) If you need working C code, look into gdailnfo.c sources,
GDALInfoReportCorner() function.


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517
-------------- next part --------------
#!/usr/bin/env python

import gdal
from gdalconst import *
import osr
import sys

# =============================================================================
def Usage():
    print
    print 'Read coordinate system and geotransformation matrix from input'
    print 'file and print latitude/longitude coordinates for the specified'
    print 'pixel.'
    print
    print 'Usage: tolatlong.py pixel line infile'
    print
    sys.exit( 1 )

# =============================================================================

infile = None
pixel = None
line = None

# =============================================================================
# Parse command line arguments.
# =============================================================================
i = 1
while i < len(sys.argv):
    arg = sys.argv[i]

    if pixel is None:
	pixel = float(arg)

    elif line is None:
	line = float(arg)

    elif infile is None:
	infile = arg

    else:
	Usage()

    i = i + 1

if infile is None:
    Usage()
if pixel is None:
    Usage()
if line is None:
    Usage()

indataset = gdal.Open( infile, GA_ReadOnly )

geomatrix = indataset.GetGeoTransform()
X = geomatrix[0] + geomatrix[1] * pixel + geomatrix[2] * line
Y = geomatrix[3] + geomatrix[4] * pixel + geomatrix[5] * line

srs = osr.SpatialReference()
srs.ImportFromWkt(indataset.GetProjection())

srsLatLong = srs.CloneGeogCS()
ct = osr.CoordinateTransformation(srs, srsLatLong)
(long, lat, height) = ct.TransformPoint(X, Y)

print 'pixel: %g, line: %g' % (pixel, line)
print 'latitude: %g, longitude: %g (in degrees)' % (long, lat)

From warmerdam at pobox.com  Thu Jul  3 08:36:32 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] VERSION file still reports 1.1.8
In-Reply-To: <200306282028.04283.alexamici@tiscali.it>
References: <200306281313.41253.alexamici@tiscali.it> <200306282028.04283.alexamici@tiscali.it>
Message-ID: <3F042350.5020507@pobox.com>

Alessandro Amici wrote:
> to be more precise: the current cvs VERSION file is ok (1.1.9), but the 
> revision tagged gdal_1_1_9 still reports 1.1.8.
> 
> i don't know the status of the actual release since i didn't download the 
> tarball yet (i simply did a cvs up -r gdal_1_1_9). so this might just be a 
> problem with tha cvs tag.

Alessandro,

I have fixed the tag on the VERSION file in CVS, unfortunately, I also
accidentally set the 1.1.9 tag on all the commits since I left last week.

Just starting to dig through my email ...

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From schut at sarvision.com  Thu Jul  3 08:49:43 2003
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] SRTM data and GDAL
In-Reply-To: <200307031148.46206.schut@sarvision.com>
References: <20030306170001.15376.78522.Mailman@yoda.imagelinks.com> <20030307104327.G4435@itc.it> <200307031148.46206.schut@sarvision.com>
Message-ID: <200307031449.43629.schut@sarvision.com>

Sorry, lept behind...
GDAL seems already able to read the SRTM files I downloaded, apparently. 
gdalinfo shows the right coordinates, at leas, etcetera.

Cheers,
Vincent.

On Thursday 03 July 2003 11:48, Vincent Schut wrote:
> Dear GDAL developers & users,
>
> any news on a more sophisticated/automagicated way to open/convert SRTM
> data now South America is publicly available too?
>
> Cheers,
> Vincent.
>
> On Friday 07 March 2003 10:43, Markus Neteler wrote:
> > Dear GDAL users,
> >
> > since yesterday a SRTM shuttle elevation data are available
> > for Northern America at around 90m resolution (0:00:03 deg):
> >
> > http://www.jpl.nasa.gov/srtm/cbanddataproducts.html
> > ftp://srtm.usgs.gov/pub/data/srtm/North_America/3arcsec/
> >
> > The trick to use them with GDAL is as follows:
> >
> > - unpack the .zip file
> > - mv NXXWYYY.hgt NXXWYYY.bil
> > - create a .hdr file (ARC/INFO style) from the file name:
> >
> > Example for N18W077.bil
> >
> > BYTEORDER     M
> > LAYOUT        BIL
> > NROWS         1201
> > NCOLS         1201
> > NBANDS        1
> > NBITS         16
> > BANDROWBYTES  2402
> > TOTALROWBYTES 2402
> > BANDGAPBYTES  0
> > NODATA        -32768
> > ULXMAP        -76.9995833333        <- WYYY - 0.0004166667
> > ULYMAP        19.00041666666667     <- NXX  + 1.0004166667
> > XDIM          0.000833333333333
> > YDIM          0.000833333333333
> >
> >
> > Then gdalinfo then accepts the file and reports:
> >
> > gdalinfo -mm N18W077.bil
> > Driver: EHdr/ESRI .hdr Labelled
> > Size is 1201, 1201
> > Coordinate System is '
> > Origin = (-77.000000,19.000833)
> > Pixel Size = (0.000833,-0.000833)
> > Corner Coordinates:
> > Upper Left  ( -77.0000000,  19.0008333)
> > Lower Left  ( -77.0000000,  18.0000000)
> > Upper Right ( -75.9991667,  19.0008333)
> > Lower Right ( -75.9991667,  18.0000000)
> > Center      ( -76.4995833,  18.5004167)
> > Band 1 Block=1201x1 Type=Int16, ColorInterp=Undefined
> >     Computed Min/Max=-10.000,2024.000
> >   NoData Value=-32768
> >
> > Maybe the GDAL authors could add a simple HGT driver which
> > automagically constructs the .hdr file internally on the fly.
> >
> > Anyway, with above method you can easily import/convert
> > the data (also tested with GRASS).
> >
> > Cheers
> >
> >  Markus

-- 
______________________________________
Vincent Schut
Sarvision B.V.
Wageningen, The Netherlands
www.sarvision.com

From ben at vterrain.org  Thu Jul  3 11:47:07 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] SRTM data and GDAL
In-Reply-To: <200307031449.43629.schut@sarvision.com>
Message-ID: <005401c3417a$5b9c95b0$f400fe0a@TOPP2>

Vincent,

Also, it is no longer necessary to acquire and mosaic the raw SRTM
tiles, since the seamless server (http://seamless.usgs.gov/ and click
"International") lets you specify the exact area you want and download
it as an ArcInfo grid which reads right into GDAL easily.

-Ben

> -----Original Message-----
> From: Vincent Schut
> 
> Sorry, lept behind...
> GDAL seems already able to read the SRTM files I downloaded, 
> apparently. 
> gdalinfo shows the right coordinates, at leas, etcetera.
> 
> Cheers,
> Vincent.
> 
> On Thursday 03 July 2003 11:48, Vincent Schut wrote:
> > Dear GDAL developers & users,
> >
> > any news on a more sophisticated/automagicated way to 
> open/convert SRTM
> > data now South America is publicly available too?
> >
> > Cheers,
> > Vincent.


From simon at petrosys.com.au  Fri Jul  4 04:00:17 2003
From: simon at petrosys.com.au (Simon Ronald)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] GDAL shape file comes up with spurious lines using GDAL library
Message-ID: <5.1.0.14.0.20030704172453.01a569a8@psadl7>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030704/2a3aa447/attachment.html
From simon at petrosys.com.au  Fri Jul  4 04:02:32 2003
From: simon at petrosys.com.au (Simon Ronald)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] The Gif Attachment of Australia with lots of spurious lines
Message-ID: <5.1.0.14.0.20030704173135.01aa3df0@psadl7>

ta,

simon
-------------- next part --------------
A non-text attachment was scrubbed...
Name: problem.gif
Type: image/gif
Size: 25406 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030704/ce1cb935/problem.gif
From warmerdam at pobox.com  Fri Jul  4 08:49:22 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] GDAL shape file comes up with spurious lines using
 GDAL library
In-Reply-To: <5.1.0.14.0.20030704172453.01a569a8@psadl7>
References: <5.1.0.14.0.20030704172453.01a569a8@psadl7>
Message-ID: <3F0577D2.9030400@pobox.com>

Simon Ronald wrote:
> Hi guys,
> 
> I am a developer from Petrosys in Australia, we make mapping software 
> for the oil & gas industry.  We are using GDAL to read in
> ESRI Shape files.  There is one shape file that looks ok when viewed in 
> the Arc Explorer program, but when read using GDAL the
> multiple line segments come through as a single LINESTRING with 55,000 
> points.  This means there are spurious connecting lines when viewed; 
> attached is a gif file of the way it looks :- a very strange impression 
> of the continent of Australia!
> 
> I was wondering if any of you guys have come across this before and if 
> so if you can point me in the right direction for a fix.  I
> don't mind hacking GDAL - but if anyone has any sagely advice before I 
> hack forth.

Simon,

On February 25th, 2003 I corrected a problem in the OGR shapefile driver
so that multi-part arcs would be read as MULTILINESTRING instead of as
a LINESTRING.  On June 10th I fixed it so they would also be written
properly.   I would suggest you upgrade to GDAL/OGR 1.1.9 and see if the
problem persists.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Fri Jul  4 10:42:04 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] Re: gdalwarp transparent fill
In-Reply-To: <5FA1CFB7.34FF44D5.00066B75@netscape.net>
References: <5FA1CFB7.34FF44D5.00066B75@netscape.net>
Message-ID: <3F05923C.1020306@pobox.com>

list67@netscape.net wrote:
> Mr. Warmerdam,
> 
> Hello.  Yesterday, I sent the attatched message to the gdal-dev mailing list, 
 > and it has not appeared yet on the mailing list web page.  Do you know if
 > messages from @netscape.net are filtered from the list?  Thanks.

Mike,

I don't know what happened to your email.  It didn't come through on the list
either.  I don't think there is any filtering on the list other than to bounce
messages from folks that are not members.

> Subject: gdalwarp transparent fill From: list67 Date: Wed, 02 Jul 2003 20:00:20 -0400 To: gdal-dev@remotesensing.org
> 
> 
> Hello.  I've been using the gdalwarp program to reproject some geotiff files.  It works great.  The reprojected
> geotiffs usually (maybe always) have some black areas around the edges due to the reprojection.  Instead of the black
> pixels, I would like the pixels to be transparent.  I've been using GIMP to add an alpha channel and cut out the
> black areas.  So, I was hoping that gdal_warp might be able to do all of this for me.  Has anyone used gdal_warp in
> this way?  If it is not too complicated, would you tell me what I need to do in order to use gdal_warp in this way?

Gdalwarp won't do this, but I would like to modify gdalwarptest (the next
generation warper to do it) though it doesn't yet.  Are you willing to test
it if I implementing it in CVS?  Are you setup to be able to build GDAL from
CVS or a CVS snapshot?

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From schut at sarvision.com  Mon Jul  7 03:11:31 2003
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] SRTM data and GDAL
In-Reply-To: <005401c3417a$5b9c95b0$f400fe0a@TOPP2>
References: <005401c3417a$5b9c95b0$f400fe0a@TOPP2>
Message-ID: <200307070911.31837.schut@sarvision.com>

On Thursday 03 July 2003 17:47, Ben Discoe wrote:
> Vincent,
>
> Also, it is no longer necessary to acquire and mosaic the raw SRTM
> tiles, since the seamless server (http://seamless.usgs.gov/ and click
> "International") lets you specify the exact area you want and download
> it as an ArcInfo grid which reads right into GDAL easily.
>
> -Ben

Yeah, found that out straigh after sending my question to the list... Kind of 
stupid of me to first ask and then try...
Thanks anyway.

Vincent.
>
> > -----Original Message-----
> > From: Vincent Schut
> >
> > Sorry, lept behind...
> > GDAL seems already able to read the SRTM files I downloaded,
> > apparently.
> > gdalinfo shows the right coordinates, at leas, etcetera.
> >
> > Cheers,
> > Vincent.
> >
> > On Thursday 03 July 2003 11:48, Vincent Schut wrote:
> > > Dear GDAL developers & users,
> > >
> > > any news on a more sophisticated/automagicated way to
> >
> > open/convert SRTM
> >
> > > data now South America is publicly available too?
> > >
> > > Cheers,
> > > Vincent.
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev

-- 
______________________________________
Vincent Schut
Sarvision B.V.
Wageningen, The Netherlands
www.sarvision.com

From neteler at itc.it  Mon Jul  7 07:52:49 2003
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] gdalwarp shift problem
Message-ID: <20030707135249.T4388@itc.it>

Dear list members,

at time I struggle to reproject a LANDSAT TM 5 subscene with
gdalwarp (from UTM to Gauss-Boaga). The resulting map is
shifted around 920km to West and also slightly distorted.

The input map 'lsat1_utm.tif' was created with gdal_translate from
the original LANDSAT TM 5 scene (from Geotiff to Geotiff). The
smaller subscene is located in Nothern Italy and looks like this:

gdalinfo lsat1_utm.tif
Driver: GTiff/GeoTIFF
Size is 3816, 3461
Coordinate System is:
PROJCS["WGS 84 / UTM zone 32N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235629972,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",9],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32632"]]
Origin = (636861.000000,5152686.000000)
Pixel Size = (28.500000,-28.500000)
Corner Coordinates:
Upper Left  (  636861.000, 5152686.000) ( 10d47'2.74"E, 46d30'49.78"N)
Lower Left  (  636861.000, 5054047.500) ( 10d45'20.60"E, 45d37'35.33"N)
Upper Right (  745617.000, 5152686.000) ( 12d12'0.22"E, 46d28'58.64"N)
Lower Right (  745617.000, 5054047.500) ( 12d 8'57.27"E, 45d35'47.57"N)
Center      (  691239.000, 5103366.750) ( 11d28'20.39"E, 46d 3'25.67"N)
Band 1 Block=3816x2 Type=Byte, ColorInterp=Gray


The Lat/Long corners look o.k. But then, after gdalwarp:

#26591: Monte Mario (Rome) / Italy zone 1
gdalwarp -t_srs '+init=epsg:26591 +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68' \
  lsat1_utm.tif lsat1_gb.tif

The datum comes from the official site:
http://crs.ifag.de/

gdalinfo lsat1_gb2.tif
Driver: GTiff/GeoTIFF
Size is 4311, 4015
Coordinate System is:
PROJCS["Monte Mario (Rome) / Italy zone 1",
    GEOGCS["Monte Mario (Rome)",
        DATUM["Monte_Mario_Rome",
            SPHEROID["International 1924",6378388,297.000000000005,
                AUTHORITY["EPSG","7022"]],
            AUTHORITY["EPSG","6806"]],
        PRIMEM["Rome",12.45233333333333],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4806"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-3.45233333333333],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",1500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","26591"]]
Origin = (666266.468468,5206815.783256)
Pixel Size = (28.697167,-28.697167)
Corner Coordinates:
Upper Left  (  666266.468, 5206815.783) ( 14d19'12.01"W, 46d29'41.38"N)
Lower Left  (  666266.468, 5091596.659) ( 14d 7'12.46"W, 45d28'34.07"N)
Upper Right (  789979.954, 5206815.783) ( 12d43'50.79"W, 46d38'10.47"N)
Lower Right (  789979.954, 5091596.659) ( 12d33'32.53"W, 45d36'45.44"N)
Center      (  728123.211, 5149206.221) ( 13d25'57.64"W, 46d 3'27.81"N)
Band 1 Block=4311x1 Type=Byte, ColorInterp=Gray

Looking at LatLong here, it is heavily misplaced (especially shifted to
West).

To me "Central Meridian" in the Gauss-Boaga file looks wrong.

Looking into
/usr/local/share/proj/epsg
I am not sure if
+lon_0=21.45233333333333
is right. Shouldn't it be 
+lon_0=9.0
?

Thanks for any hint,

 Markus Neteler

From rogerjames99 at btinternet.com  Mon Jul  7 13:34:58 2003
From: rogerjames99 at btinternet.com (Roger James)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] gtiif reader broken when datum.csv replaced by gdal_datum.csv
Message-ID: <000001c344ae$2156a2b0$fe0aa8c0@lancaster.beardandsandals.co.uk>

int GTIFGetDatumInfo( int nDatumCode, char ** ppszName, short *
pnEllipsoid )

 

{

    char szSearchKey[24];

    int                 nEllipsoid;

    const char *pszFilename = CSVFilename( "datum.csv" );

 
==========     Ouch!!!

 

This one took me a while took work out what was happening. My workaround
is to copy gdal_datum.csv and rename it back to the old datum.csv.

 

Roger

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030707/a92f5738/attachment.html
From neteler at itc.it  Mon Jul  7 17:03:24 2003
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] gdalwarp shift problem
In-Reply-To: <20030707135249.T4388@itc.it>; from neteler@itc.it on Mon, Jul 07, 2003 at 01:52:49PM +0200
References: <20030707135249.T4388@itc.it>
Message-ID: <20030707230324.A11102@itc.it>

The related file I have stored here (the GDAL ftp incoming seems to
be blocked):

http://mpa.itc.it/markus/gdalwarp/
lsat1_utm.tif.bz2

Any hint is welcome to reproject this LANDSAT subscene.

Best regards
 Markus Neteler

On Mon, Jul 07, 2003 at 01:52:49PM +0200, Markus Neteler wrote:
> Dear list members,
> 
> at time I struggle to reproject a LANDSAT TM 5 subscene with
> gdalwarp (from UTM to Gauss-Boaga). The resulting map is
> shifted around 920km to West and also slightly distorted.
> 
> The input map 'lsat1_utm.tif' was created with gdal_translate from
> the original LANDSAT TM 5 scene (from Geotiff to Geotiff). The
> smaller subscene is located in Nothern Italy and looks like this:
> 
> gdalinfo lsat1_utm.tif
> Driver: GTiff/GeoTIFF
> Size is 3816, 3461
> Coordinate System is:
> PROJCS["WGS 84 / UTM zone 32N",
>     GEOGCS["WGS 84",
>         DATUM["WGS_1984",
>             SPHEROID["WGS 84",6378137,298.2572235629972,
>                 AUTHORITY["EPSG","7030"]],
>             AUTHORITY["EPSG","6326"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4326"]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",9],
>     PARAMETER["scale_factor",0.9996],
>     PARAMETER["false_easting",500000],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     AUTHORITY["EPSG","32632"]]
> Origin = (636861.000000,5152686.000000)
> Pixel Size = (28.500000,-28.500000)
> Corner Coordinates:
> Upper Left  (  636861.000, 5152686.000) ( 10d47'2.74"E, 46d30'49.78"N)
> Lower Left  (  636861.000, 5054047.500) ( 10d45'20.60"E, 45d37'35.33"N)
> Upper Right (  745617.000, 5152686.000) ( 12d12'0.22"E, 46d28'58.64"N)
> Lower Right (  745617.000, 5054047.500) ( 12d 8'57.27"E, 45d35'47.57"N)
> Center      (  691239.000, 5103366.750) ( 11d28'20.39"E, 46d 3'25.67"N)
> Band 1 Block=3816x2 Type=Byte, ColorInterp=Gray
> 
> 
> The Lat/Long corners look o.k. But then, after gdalwarp:
> 
> #26591: Monte Mario (Rome) / Italy zone 1
> gdalwarp -t_srs '+init=epsg:26591 +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68' \
>   lsat1_utm.tif lsat1_gb.tif
> 
> The datum comes from the official site:
> http://crs.ifag.de/
> 
> gdalinfo lsat1_gb2.tif
> Driver: GTiff/GeoTIFF
> Size is 4311, 4015
> Coordinate System is:
> PROJCS["Monte Mario (Rome) / Italy zone 1",
>     GEOGCS["Monte Mario (Rome)",
>         DATUM["Monte_Mario_Rome",
>             SPHEROID["International 1924",6378388,297.000000000005,
>                 AUTHORITY["EPSG","7022"]],
>             AUTHORITY["EPSG","6806"]],
>         PRIMEM["Rome",12.45233333333333],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4806"]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",-3.45233333333333],
>     PARAMETER["scale_factor",0.9996],
>     PARAMETER["false_easting",1500000],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     AUTHORITY["EPSG","26591"]]
> Origin = (666266.468468,5206815.783256)
> Pixel Size = (28.697167,-28.697167)
> Corner Coordinates:
> Upper Left  (  666266.468, 5206815.783) ( 14d19'12.01"W, 46d29'41.38"N)
> Lower Left  (  666266.468, 5091596.659) ( 14d 7'12.46"W, 45d28'34.07"N)
> Upper Right (  789979.954, 5206815.783) ( 12d43'50.79"W, 46d38'10.47"N)
> Lower Right (  789979.954, 5091596.659) ( 12d33'32.53"W, 45d36'45.44"N)
> Center      (  728123.211, 5149206.221) ( 13d25'57.64"W, 46d 3'27.81"N)
> Band 1 Block=4311x1 Type=Byte, ColorInterp=Gray
> 
> Looking at LatLong here, it is heavily misplaced (especially shifted to
> West).
> 
> To me "Central Meridian" in the Gauss-Boaga file looks wrong.
> 
> Looking into
> /usr/local/share/proj/epsg
> I am not sure if
> +lon_0=21.45233333333333
> is right. Shouldn't it be 
> +lon_0=9.0
> ?
> 
> Thanks for any hint,
> 
>  Markus Neteler

From rogerjames99 at btinternet.com  Tue Jul  8 05:51:24 2003
From: rogerjames99 at btinternet.com (Roger James)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] Negative values returned by GetRasterYSize()
Message-ID: <000001c34536$7ed7faa0$fe0aa8c0@lancaster.beardandsandals.co.uk>

Is there a convention for raster orientation in GDAL and if so is it
stated somewhere.

 

I am having some trouble with images that return negative values for
RasterYSize., and could do with some guidance on how to interpret this.

 

I assume that a negative value means that the raster should be
accessed/affined with a bottom up cell (pixel, display etc.) co-ordinate
system? If so I think this should be documented.

 

If it already is then please accept my apologies and tell me where to
look.

 

Is this handled consistently. I am getting images that display the right
way up but when I use the affine co-efficients the y geo co-ordinate is
flipped.

 

I realise that this is a problem in my code but I just cannot seem to
get the correct mapping between the window co-ord system and the image
co-ord system.

 

Thanks.

 

Roger

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030708/05ad24e6/attachment.html
From warmerdam at pobox.com  Tue Jul  8 08:23:57 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] Negative values returned by GetRasterYSize()
In-Reply-To: <000001c34536$7ed7faa0$fe0aa8c0@lancaster.beardandsandals.co.uk>
References: <000001c34536$7ed7faa0$fe0aa8c0@lancaster.beardandsandals.co.uk>
Message-ID: <3F0AB7DD.2020706@pobox.com>

Roger James wrote:
> Is there a convention for raster orientation in GDAL and if so is it 
> stated somewhere.
> 
>  
> 
> I am having some trouble with images that return negative values for 
> RasterYSize., and could do with some guidance on how to interpret this.

Roger,

To clarify the GDALGetRasterYSize() function, or GDALDataset::GetRasterYSize()
method is returning a negative value?  This should never occur, and persumably
indicates a buggy format driver, or a corrupt dataset.   Can you provide an
example?

However, if you mean that the y pixel size component of the geotransform is
negative then that is the normal convention for georeferenced images.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From harj at geo.vu.nl  Tue Jul  8 08:48:05 2003
From: harj at geo.vu.nl (Nico Hardebol)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] FW: ogr: create? new geometries
Message-ID: <000301c3454f$2ccf9380$9c422582@LAPTOPNico>


Hello,

It's my first time to this list, I'm a geology/geophysics student and
getting experience in GIS and programming c++.
I want to transform/displace geometries with which I don't mean reproject
data into a different coordinate system, but to apply plate tectonic
rotations to geometries that represent tectonic plates.
I've written - as starting point - a small script with the use of the
Shapelib library by which an individual polygon is rotated and want to
extend this into a routine by which a bunch of geometries are rotated along
several rotation poles with the use of queries on their attributes
ultimately with postgis functionality).
I must admit I'm yet not an experienced programmer, but I'm investing lately
with the use of several GIS related api's.
I considered the ogr simple feature library to be a more convenient solution
since different object types can be more proper managed.
But is it possible to  fetch the coordinates of the several geometry types
(not only points - C++ class Point::GetX() but also for Polygon and
Polyline.
And can new geometries be built?
something like:
transform (Ingeom, OUTgeom)
{ ......
	Xin=Ingeom->GetX();
	Yin=Ingeom->GetY();
	Xout=transform(Xin);
	Yout=transform(Yin);

	OUTgeom(Xout, Yout, ......); whatever...
}
Within the shapelib this could be easily done with the use of:
SHPReadObject(), SHPCreateObject() and SHPCreate()....

but within ogr I can only find OGRGeometryFactory in which new geometries
objects can be created from well known bin/txt. But no double arrays of X
and Y coord. can be offered from which a new geometry is built - true?
Possibly I'm missing something important, I can imagine that this type of
functionaly is not included since may major problems with spatial
relationships / topology arises.
Do I have to build a new geometry with the use of creatFromWKB/WKT() - but
then I can't find a c++ api with some basic functions to build (opengis
OLE/COM specifications?).
OR do you advice me to keep it simple and continue with shapelib - without
the great advantages of ogr (e.a. reading several file formats / postgis
PostgreSQL functionality).

thanking in advance,

Nico


From warmerdam at pobox.com  Tue Jul  8 09:35:09 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] FW: ogr: create? new geometries
In-Reply-To: <000301c3454f$2ccf9380$9c422582@LAPTOPNico>
References: <000301c3454f$2ccf9380$9c422582@LAPTOPNico>
Message-ID: <3F0AC88D.8020104@pobox.com>

Nico Hardebol wrote:
> but within ogr I can only find OGRGeometryFactory in which new geometries
> objects can be created from well known bin/txt. But no double arrays of X
> and Y coord. can be offered from which a new geometry is built - true?
> Possibly I'm missing something important, I can imagine that this type of
> functionaly is not included since may major problems with spatial
> relationships / topology arises.
> Do I have to build a new geometry with the use of creatFromWKB/WKT() - but
> then I can't find a c++ api with some basic functions to build (opengis
> OLE/COM specifications?).
> OR do you advice me to keep it simple and continue with shapelib - without
> the great advantages of ogr (e.a. reading several file formats / postgis
> PostgreSQL functionality).

Nico,

There is no general approach to getting all the vertices and modifying them
for any geometry type.  For complete generality you will need to implement
support for points, linestrings, polygons, and collections.  Each class has
specific methods for getting the points, or child objects.

For OGRPoint:
     // IPoint
     double      getX() { return x; }
     double      getY() { return y; }
     double      getZ() { return z; }

     // Non standard
     void        setX( double xIn ) { x = xIn; }
     void        setY( double yIn ) { y = yIn; }
     void        setZ( double zIn ) { z = zIn; }

For LineString (and LinearRing):

     // ILineString methods
     int         getNumPoints() { return nPointCount; }
     void        getPoint( int, OGRPoint * );
     double      getX( int i ) { return paoPoints[i].x; }
     double      getY( int i ) { return paoPoints[i].y; }
     double      getZ( int i );

     // non standard.
     void        setNumPoints( int );
     void        setPoint( int, OGRPoint * );
     void        setPoint( int, double, double, double = 0.0 );
     void        setPoints( int, OGRRawPoint *, double * = NULL );
     void        setPoints( int, double * padfX, double * padfY,
                            double *padfZ = NULL );
     void        addPoint( OGRPoint * );
     void        addPoint( double, double, double = 0.0 );

For OGRPolygon:

     // Non standard
     void        addRing( OGRLinearRing * );
     void        addRingDirectly( OGRLinearRing * );

     OGRLinearRing *getExteriorRing();
     int         getNumInteriorRings();
     OGRLinearRing *getInteriorRing( int );

and for OGRGeometryCollection (and all the specific types):

     // IGeometryCollection
     int         getNumGeometries();
     OGRGeometry *getGeometryRef( int );

     // Non standard
     virtual OGRErr addGeometry( OGRGeometry * );
     virtual OGRErr addGeometryDirectly( OGRGeometry * );
     virtual OGRErr removeGeometry( int iIndex, int bDelete = TRUE );

To create new empty geometries of a particular class you can either
instantiate them directly (ie. new OGRLineString()) or use the
geometry factory (ie. OGRGeometryFactory::createGeometry(wkbLineString)).
Also, you may find it more convenient to just clone your source geometries
with the OGRGeometry::clone() method and then update the new copy in place.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From rogerjames99 at btinternet.com  Tue Jul  8 13:40:30 2003
From: rogerjames99 at btinternet.com (Roger James)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] Negative values returned by GetRasterYSize()
In-Reply-To: <3F0AB7DD.2020706@pobox.com>
Message-ID: <000001c34578$06e949d0$fe0aa8c0@lancaster.beardandsandals.co.uk>

Frank,

A thousand apologies. It was getting late and I was chasing my own tail.
I have just looked at it again and realised that I had left in an old
hack to handle some images with bad transforms. I had forgotten all
about it.

Mea culpa.

Roger





> -----Original Message-----
> From: gdal-dev-admin@remotesensing.org [mailto:gdal-dev-
> admin@remotesensing.org] On Behalf Of Frank Warmerdam
> Sent: 08 July 2003 13:24
> To: gdal-dev@remotesensing.org
> Subject: Re: [Gdal-dev] Negative values returned by GetRasterYSize()
> 
> Roger James wrote:
> > Is there a convention for raster orientation in GDAL and if so is it
> > stated somewhere.
> >
> >
> >
> > I am having some trouble with images that return negative values for
> > RasterYSize., and could do with some guidance on how to interpret
this.
> 
> Roger,
> 
> To clarify the GDALGetRasterYSize() function, or
> GDALDataset::GetRasterYSize()
> method is returning a negative value?  This should never occur, and
> persumably
> indicates a buggy format driver, or a corrupt dataset.   Can you
provide
> an
> example?
> 
> However, if you mean that the y pixel size component of the
geotransform
> is
> negative then that is the normal convention for georeferenced images.
> 
> Best regards,
> --
>
---------------------------------------+--------------------------------
--
> ----
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for
Rent
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev



From Rich at GreenwoodMap.com  Thu Jul 10 00:18:46 2003
From: Rich at GreenwoodMap.com (Richard Greenwood)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] gdal w/ grass support
In-Reply-To: <000001c34578$06e949d0$fe0aa8c0@lancaster.beardandsandals.c
 o.uk>
References: <3F0AB7DD.2020706@pobox.com>
Message-ID: <5.2.0.9.0.20030709221035.00a7fff0@mail.GreenwoodMap.com>

I am having trouble getting gdal going with grass support. I built and 
installed libgrass without any apparent errors. The I built gdal (configure 
--with-grass=/usr/local/lib) without any apparent errors. But when I run 
gdalinfo I get
"error while loading shared libraries: libgrass5.so.0: cannot open shared 
object file: No such file or directory".

libgrass5.so.0 is a symbolic link in /usr/local/lib and  /usr/local/lib is 
in my path.

Sorry for what I suspect is a pretty trivial question.

Thanks,
Rich


Richard W. Greenwood, PLS
Greenwood Mapping, Inc.
Rich <at> GreenwoodMap <dot> com
(307) 733-0203
http://www.GreenwoodMap.com 
From schut at sarvision.com  Thu Jul 10 03:34:22 2003
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] gdal w/ grass support
In-Reply-To: <5.2.0.9.0.20030709221035.00a7fff0@mail.GreenwoodMap.com>
References: <3F0AB7DD.2020706@pobox.com> <5.2.0.9.0.20030709221035.00a7fff0@mail.GreenwoodMap.com>
Message-ID: <200307100934.22551.schut@sarvision.com>

On Thursday 10 July 2003 06:18, Richard Greenwood wrote:
> I am having trouble getting gdal going with grass support. I built and
> installed libgrass without any apparent errors. The I built gdal (configure
> --with-grass=/usr/local/lib) without any apparent errors. But when I run
> gdalinfo I get
> "error while loading shared libraries: libgrass5.so.0: cannot open shared
> object file: No such file or directory".
>
> libgrass5.so.0 is a symbolic link in /usr/local/lib and  /usr/local/lib is
> in my path.

It should not be in your path, but in your dynamic library path. You can set 
this by adding /usr/local/lib to the environment variable LD_LIBRARY_PATH, or 
add it to the file /etd/ld.so.conf (which you might prefer because this will 
add /usr/local/lib to the standard places where the dynamic linker will look 
for libraries). After that, run ldconfig as root.

Cheers,
Vincent.
>
> Sorry for what I suspect is a pretty trivial question.
>
> Thanks,
> Rich
>
>
> Richard W. Greenwood, PLS
> Greenwood Mapping, Inc.
> Rich <at> GreenwoodMap <dot> com
> (307) 733-0203
> http://www.GreenwoodMap.com

-- 
______________________________________
Vincent Schut
Sarvision B.V.
Wageningen, The Netherlands
www.sarvision.com

From mathieu_gdal at yahoo.fr  Thu Jul 10 05:24:52 2003
From: mathieu_gdal at yahoo.fr (mathieu_gdal)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] projection, geodesy and csv files
Message-ID: <000601c346c5$2046ac30$3b00000a@informatiquemer.fr>

Dear all,

 

I use GDAL to display and geo-reference GeoTiff files.

 

I have noticed that the geo-referencement procedures I use fail if the
.csv files (ellipsoid.csv, gpc.csv, .) are not installed with the app. 

 

-          Where could I get a definition of each .csv files?

 

-          Are those .csv files specific to GDAL, or LiGeoTiff?

 

-          Where in the GDAL could could I find sample for accessing
those tables? cpl_csv.h is for parsing csv files, is there a layer on
top of this to access a list of projections and datums?

 

Thank you

Mathieu

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030710/0c61f1dd/attachment.html
From warmerdam at pobox.com  Thu Jul 10 08:56:04 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] projection, geodesy and csv files
In-Reply-To: <000601c346c5$2046ac30$3b00000a@informatiquemer.fr>
References: <000601c346c5$2046ac30$3b00000a@informatiquemer.fr>
Message-ID: <3F0D6264.5000000@pobox.com>

mathieu_gdal wrote:
> Dear all,
> 
> I use GDAL to display and geo-reference GeoTiff files.
> 
> I have noticed that the geo-referencement procedures I use fail if the 
> .csv files (ellipsoid.csv, gpc.csv, ?) are not installed with the app.
> 
>  
> 
> -          Where could I get a definition of each .csv files?

Mathieu,

The files required by GDAL should be available from the gdal/data directory
in the CVS source tree.  Are you asking what each file is used for?  That
is somewhat complicated to answer.  In short most of them are derived from
specific tables in the EPSG database so reviewing information from the EPSG
site might be helpful.

   http://www.epsg.org/

> -          Are those .csv files specific to GDAL, or LiGeoTiff?

The .csv files were created by me based on a simple dump of EPSG .mdb
tables to .csv format primarily for the use of GDAL and libgeotiff.  Other
packages also use either my .csv files, or other dumps of the same tables,
in order to implement EPSG support.

> -          Where in the GDAL could could I find sample for accessing 
> those tables? cpl_csv.h is for parsing csv files, is there a layer on 
> top of this to access a list of projections and datums?

Specific places where they are used are:

   gdal/frmts/gtiff/libgeotiff/geo_normalize.c - GeoTIFF support
   gdal/ogr/ogr_fromepsg.cpp - Translate EPSG coordsys to WKT format.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From Rich at GreenwoodMap.com  Thu Jul 10 09:37:23 2003
From: Rich at GreenwoodMap.com (Richard Greenwood)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] gdal w/ grass support
In-Reply-To: <200307100934.22551.schut@sarvision.com>
References: <5.2.0.9.0.20030709221035.00a7fff0@mail.GreenwoodMap.com>
 <3F0AB7DD.2020706@pobox.com>
 <5.2.0.9.0.20030709221035.00a7fff0@mail.GreenwoodMap.com>
Message-ID: <5.2.0.9.0.20030710073556.00ac8970@mail.GreenwoodMap.com>

That was it. Thanks so much. Sorry to clutter the list with such a basic 
problem.

Rich

At 09:34 AM 7/10/2003 +0200, you wrote:

>On Thursday 10 July 2003 06:18, Richard Greenwood wrote:
> > I am having trouble getting gdal going with grass support. I built and
> > installed libgrass without any apparent errors. The I built gdal (configure
> > --with-grass=/usr/local/lib) without any apparent errors. But when I run
> > gdalinfo I get
> > "error while loading shared libraries: libgrass5.so.0: cannot open shared
> > object file: No such file or directory".
> >
> > libgrass5.so.0 is a symbolic link in /usr/local/lib and  /usr/local/lib is
> > in my path.
>
>It should not be in your path, but in your dynamic library path. You can set
>this by adding /usr/local/lib to the environment variable LD_LIBRARY_PATH, or
>add it to the file /etd/ld.so.conf (which you might prefer because this will
>add /usr/local/lib to the standard places where the dynamic linker will look
>for libraries). After that, run ldconfig as root.
>
>Cheers,
>Vincent.
> >
> > Sorry for what I suspect is a pretty trivial question.
> >
> > Thanks,
> > Rich
> >
> >
> > Richard W. Greenwood, PLS
> > Greenwood Mapping, Inc.
> > Rich <at> GreenwoodMap <dot> com
> > (307) 733-0203
> > http://www.GreenwoodMap.com
>
>--
>______________________________________
>Vincent Schut
>Sarvision B.V.
>Wageningen, The Netherlands
>www.sarvision.com
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@remotesensing.org
>http://remotesensing.org/mailman/listinfo/gdal-dev


Richard W. Greenwood, PLS
Greenwood Mapping, Inc.
Rich <at> GreenwoodMap <dot> com
(307) 733-0203
http://www.GreenwoodMap.com 
From harj at geo.vu.nl  Tue Jul  8 05:47:52 2003
From: harj at geo.vu.nl (Nico Hardebol)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] ogr: create? new geometries
Message-ID: <000101c34536$020d4340$9c422582@LAPTOPNico>

Hello,

It's my first time to this list, I'm a geology/geophysics student and
getting experience in GIS and programming c++.
I want to transform/displace geometries with which I don't mean reproject
data into a different coordinate system, but to apply plate tectonic
rotations to geometries that represent tectonic plates.
I've written - as starting point - a small script with the use of the
Shapelib library by which an individual polygon is rotated and want to
extend this into a routine by which a bunch of geometries are rotated along
several rotation poles with the use of queries on their attributes
ultimately with postgis functionality).
I must admit I'm yet not an experienced programmer, but I'm investing lately
with the use of several GIS related api's.
I considered the ogr simple feature library to be a more convenient solution
since different object types can be more proper managed.
But is it possible to  fetch the coordinates of the several geometry types
(not only points - C++ class Point::GetX() but also for Polygon and
Polyline.
And can new geometries be built?
something like:
transform (Ingeom, OUTgeom)
{ ......
	Xin=Ingeom->GetX();
	Yin=Ingeom->GetY();
	Xout=transform(Xin);
	Yout=transform(Yin);

	OUTgeom(Xout, Yout, ......); whatever...
}
Within the shapelib this could be easily done with the use of:
SHPReadObject(), SHPCreateObject() and SHPCreate()....

but within ogr I can only find OGRGeometryFactory in which new geometries
objects can be created from well known bin/txt. But no double arrays of X
and Y coord. can be offered from which a new geometry is built - true?
Possibly I'm missing something important, I can imagine that this type of
functionaly is not included since may major problems with spatial
relationships / topology arises.
Do I have to build a new geometry with the use of creatFromWKB/WKT() - but
then I can't find a c++ api with some basic functions to build (opengis
OLE/COM specifications?).
OR do you advice me to keep it simple and continue with shapelib - without
the great advantages of ogr (e.a. reading several file formats / postgis
PostgreSQL functionality).

thanking in advance,

Nico


From warmerdam at pobox.com  Thu Jul 10 11:48:08 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] List Administrivia
Message-ID: <3F0D8AB8.2000803@pobox.com>

Folks,

I discovered I had the administrative email address for gdal-dev set
improperly, so admin requests held for my approval were being discarded.
I have discarded the 100 or so requests (mostly posts by non-members, or
posts over 100K) from the last seven months or so.  I appologise for the
inconvenience of anyone wondering where their email was disappearing to.

I have corrected the address now, and tweaked a few other options.

I have had complaints that some people are unable to subscribe to the list.
I haven't figure out why that is yet, and I haven't seen anything in the
admin request lists about it.  Please let me know directly if you have
any admin problems with the list.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From alexamici at tiscali.it  Thu Jul 10 15:52:34 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] GNUmakefile cleanups (libtool related)
Message-ID: <200307102152.37703.alexamici@tiscali.it>


Frank,

i investigated a bit more the possibility of using libtool in the gdal build 
and i think i can counter most of the comments you raised in your last email 
on the subject. in the meantime, i managed to actually build (a seemingly 
correct) libgdal.so with libtool. unfortunately the current incarnation of 
the patch is ugly enough to be embarrassing ;).

part of the integration problem is due to the duplication of makefile snippets 
that move object file around (thus breaking the libtool build).
i.e. inside frmts/ we have 37 instances of:

../o/%.o:	%.o
	cp $*.o ../o

that need to be changed to something like:

../o/%.o:	%.o
	cp $*.o ../o
	-cp $*.lo ../o


IMHO makefile code duplication is a problem independently of the use of 
libtool, so i started looking into the possibility of a substantial makefile 
cleanup, that will be a 'must' for trying integrating libtool, but is a good 
thing in itself. note that, since all GNUmakefile's already include 
GDALmake.opt it is very easy to cut most of the redundancy just moving the 
rules inside GDALmake.opt (or by creating a new GNUmakefile.lib included by 
GDALmakefile.opt). attached is an example implementation.

if you judge overloading GDALmake.opt with a small library of common rules is 
ok, i volunteer to work on that and on some other possible makefile cleanups 
that i spotted (BTW: any specific reason for using 'cp $*.o ../o' instead of 
just 'cp $< $@'?).

as soon as the build system is libtool-friendly enough, i'll also submit the 
libtool patch for review (hopefully it will add the libtool build as a 
configure option without affecting the gdal-native build).

cheers,
alessandro
-------------- next part --------------
A non-text attachment was scrubbed...
Name: frmts-o.diff
Type: text/x-diff
Size: 12700 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030710/95ca4aec/frmts-o.bin
From s.perkins at lanl.gov  Thu Jul 10 16:27:52 2003
From: s.perkins at lanl.gov (Simon Perkins)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] GNUmakefile cleanups (libtool related)
In-Reply-To: <200307102152.37703.alexamici@tiscali.it>
References: <200307102152.37703.alexamici@tiscali.it>
Message-ID: <1057868871.15816.145.camel@afreet.lanl.gov>

On Thu, 2003-07-10 at 13:52, Alessandro Amici wrote:
> i investigated a bit more the possibility of using libtool in the gdal build 
> and i think i can counter most of the comments you raised in your last email 
> on the subject. in the meantime, i managed to actually build (a seemingly 
> correct) libgdal.so with libtool. unfortunately the current incarnation of 
> the patch is ugly enough to be embarrassing ;).

I don't think I saw Frank's earlier e-mail, unless you're talking about
a very old one, but I have a few comments...

I've used libtool, automake and autoconf for a few projects, but my
personal feeling is that, while autoconf is usually a good thing, and
automake is often a good thing, libtool is usually a pain in the butt,
for the following reasons:

- Obscuration of the build process: although libtool is nominally only
involved with making shared libraries, it's approach is to completely
take over the entire build process and do all kinds of stuff that is
strange and mysterious. For instance, you will discover that the
executables you build are now just scripts which do a bunch of stuff and
then call the real executable which is actually living in some hidden
sub-directory of the build directory. If you do everything within
libtool then things probably work OK, but anytime you try to customize
the build process at all, you run into this obstacle of trying to work
out what the hell libtool has done with all your object files and so on.

- Doesn't work all that well with C++: The autotools suite has a
definite C bias. A year or so ago, I found that libtool was unable to
build a C++ library on solaris without platform specific hacking, which
of course is exactly what libtool is supposed to save you from! GDAL is
a C++ library at heart.

- Compatibility issues: the three components of autotools are not always
updated in sync. We have run into problems where we upgrade, say,
automake to get better java support, and then find that the latest
version of libtool won't speak to it anymore. In addition, backwards
compatibility doesn't seem to be a huge priority on the autotools
developers' minds. Although my main gripe here is with autoconf, which
seems to redefine major macros on almost every release.

- Efficiency: libtool pretty much insists on building every object
twice. Once for the shared library and once of the static library. Or is
there a way to stop it doing this?

- The Need: For me the big question is: what does libtool give us that
we don't have already? Sure there are a couple of things that could do
with tidying up in the current process, but I can guarantee that libtool
will require at least as much effort to get going. Particularly if the
use of C++ means that you have to write special rules for each platform
anyway.



In my own code, I stopped using libtool a year or so ago (where I had
that option). I still use autconf and automake which are generally
great, but I write my own rules for generating shared libraries. Yes, I
have to do something new for every new platform (admittedly that's not
really a big issue for the packages I work on, and I've only ever
bothered supporting linux and solaris), but I feel that I have a much
greater level of control over and understanding of the build process.


For my next project though, I'm seriously considering the use of an free
software autotools replacement called SCONS. This seems to be a single
tool that has all the major functionality of autoconf, automake and
libtool (and more), but in addition has a much nicer syntax since it
uses python as its implementation layer rather than the horrible mixture
of shellscript and m4 that autotools uses. It also apparently works
nicely on windows. Anyone out there used it? (http://www.scons.org/).


Rant off,

Sy





From warmerdam at pobox.com  Thu Jul 10 16:38:56 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] GNUmakefile cleanups (libtool related)
In-Reply-To: <200307102152.37703.alexamici@tiscali.it>
References: <200307102152.37703.alexamici@tiscali.it>
Message-ID: <3F0DCEE0.7080905@pobox.com>

Alessandro Amici wrote:
> Frank,
> 
> i investigated a bit more the possibility of using libtool in the gdal build 
> and i think i can counter most of the comments you raised in your last email 
> on the subject. in the meantime, i managed to actually build (a seemingly 
> correct) libgdal.so with libtool. unfortunately the current incarnation of 
> the patch is ugly enough to be embarrassing ;).
> 
> part of the integration problem is due to the duplication of makefile snippets 
> that move object file around (thus breaking the libtool build).
> i.e. inside frmts/ we have 37 instances of:
> 
> ../o/%.o:	%.o
> 	cp $*.o ../o
> 
> that need to be changed to something like:
> 
> ../o/%.o:	%.o
> 	cp $*.o ../o
> 	-cp $*.lo ../o

Alessandro,

Go ahead and commit these changes as you need.  Just drop the list a note
indicating what you have change so we have some warning what we might encounter
in our next cvs update, and who to complain to.

Note that in a few cases, like the gtiff/libtiff/GNUmakefile the relative
path for object file dependence is different.

> IMHO makefile code duplication is a problem independently of the use of 
> libtool, so i started looking into the possibility of a substantial makefile 
> cleanup, that will be a 'must' for trying integrating libtool, but is a good 
> thing in itself. note that, since all GNUmakefile's already include 
> GDALmake.opt it is very easy to cut most of the redundancy just moving the 
> rules inside GDALmake.opt (or by creating a new GNUmakefile.lib included by 
> GDALmakefile.opt). attached is an example implementation.
> 
> if you judge overloading GDALmake.opt with a small library of common rules is 
> ok, i volunteer to work on that and on some other possible makefile cleanups 
> that i spotted (BTW: any specific reason for using 'cp $*.o ../o' instead of 
> just 'cp $< $@'?).

There is no specific reason why 'cp $< $@' was not used.

> as soon as the build system is libtool-friendly enough, i'll also submit the 
> libtool patch for review (hopefully it will add the libtool build as a 
> configure option without affecting the gdal-native build).

Hopefully building without libtool will continue to work smoothly so we don't
have to regress the changes.  But do go ahead and commit them when you are
reasonable confident in them.

For the next release (which I would like to call 1.2.0) I want to move to more
normal library naming convensions when the library is installed.  If you are
willing to do some of the heavy lifting on that I would be very appreciative.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From alexamici at tiscali.it  Thu Jul 10 17:21:10 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] GNUmakefile cleanups (libtool related)
In-Reply-To: <1057868871.15816.145.camel@afreet.lanl.gov>
References: <200307102152.37703.alexamici@tiscali.it> <1057868871.15816.145.camel@afreet.lanl.gov>
Message-ID: <200307102321.10550.alexamici@tiscali.it>

Simon,

thanks for joining the discussion :) 

> I don't think I saw Frank's earlier e-mail, unless you're talking about
> a very old one, but I have a few comments...

yes it is an old one, where he had concerns similar to yours. i had holidays 
and a lot of work since then!

this is not meant to be an exaustive answer to all the point you raise, but 
just an ACK: i'll try to keep in mind all the things you all come up with and 
this will help me and Frank making the right chioces (i'm no libtool fanatic 
after all).

as i said, i plan to add a configure libtool option at first (it's quite easy) 
so people may test it on all the platforms and find weaknesses without being 
completely screwed.

[snip]

> - Doesn't work all that well with C++: The autotools suite has a
> definite C bias. A year or so ago, I found that libtool was unable to
> build a C++ library on solaris without platform specific hacking, which
> of course is exactly what libtool is supposed to save you from! GDAL is
> a C++ library at heart.

this is probably the major point i overlooked up to now (but it works for me).

> - Compatibility issues: the three components of autotools are not always
> updated in sync. We have run into problems where we upgrade, say,
> automake to get better java support, and then find that the latest
> version of libtool won't speak to it anymore. In addition, backwards
> compatibility doesn't seem to be a huge priority on the autotools
> developers' minds. Although my main gripe here is with autoconf, which
> seems to redefine major macros on almost every release.

as far as i am concerned gdal will still use its current GNUmakefile build 
structure (that is: no out-of-sync automake).

> - Efficiency: libtool pretty much insists on building every object
> twice. Once for the shared library and once of the static library. Or is
> there a way to stop it doing this?

there are several standard work-arounds, i.e.:
./configure --with-pic
builds the static lib with pic code as well.

> - The Need: For me the big question is: what does libtool give us that
> we don't have already? Sure there are a couple of things that could do
> with tidying up in the current process, but I can guarantee that libtool
> will require at least as much effort to get going. Particularly if the
> use of C++ means that you have to write special rules for each platform
> anyway.

did you realize how much of the build system is dedicated to the shared-static 
problem? a whole lot!
and how fragile it is? i already hit a couple of really non-trivial behaviors 
of the current build system while building the debian package.

> For my next project though, I'm seriously considering the use of an free
> software autotools replacement called SCONS. This seems to be a single
> tool that has all the major functionality of autoconf, automake and
> libtool (and more), but in addition has a much nicer syntax since it
> uses python as its implementation layer rather than the horrible mixture
> of shellscript and m4 that autotools uses. It also apparently works
> nicely on windows. Anyone out there used it? (http://www.scons.org/).

will look into it :)

> Rant off,

no problem! keep an eye on what i do and shout when i screw up!

cheers,
alessandro


From s.perkins at lanl.gov  Thu Jul 10 17:30:10 2003
From: s.perkins at lanl.gov (Simon Perkins)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] GNUmakefile cleanups (libtool related)
In-Reply-To: <200307102321.10550.alexamici@tiscali.it>
References: <200307102152.37703.alexamici@tiscali.it>
	 <1057868871.15816.145.camel@afreet.lanl.gov>
	 <200307102321.10550.alexamici@tiscali.it>
Message-ID: <1057872610.15817.153.camel@afreet.lanl.gov>

On Thu, 2003-07-10 at 15:21, Alessandro Amici wrote:

> this is not meant to be an exaustive answer to all the point you raise, but 
> just an ACK: i'll try to keep in mind all the things you all come up with and 
> this will help me and Frank making the right chioces (i'm no libtool fanatic 
> after all).

Thanks for the reply - sounds like you've thought about all the issues I
was concerned with. Apologies if my original mail was a little...
critical...

Cheers,

Sy



From alexamici at tiscali.it  Thu Jul 10 17:33:51 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] GNUmakefile cleanups (libtool related)
In-Reply-To: <3F0DCEE0.7080905@pobox.com>
References: <200307102152.37703.alexamici@tiscali.it> <3F0DCEE0.7080905@pobox.com>
Message-ID: <200307102333.51346.alexamici@tiscali.it>

Frank,

On Thursday 10 July 2003 22:38, Frank Warmerdam wrote:
> Alessandro,
>
> Go ahead and commit these changes as you need.  Just drop the list a note
> indicating what you have change so we have some warning what we might
> encounter in our next cvs update, and who to complain to.

ok. and be aware that i can test only on linux and i can't build all the 
supported drivers (expecially the commercial ones). so keep an eye on corner 
cases!

> Note that in a few cases, like the gtiff/libtiff/GNUmakefile the relative
> path for object file dependence is different.

i know (indeed i didn't change them).

[snip]

> > as soon as the build system is libtool-friendly enough, i'll also submit
> > the libtool patch for review (hopefully it will add the libtool build as
> > a configure option without affecting the gdal-native build).
>
> Hopefully building without libtool will continue to work smoothly so we
> don't have to regress the changes.  But do go ahead and commit them when
> you are reasonable confident in them.

will do.

> For the next release (which I would like to call 1.2.0) I want to move to
> more normal library naming convensions when the library is installed.  If
> you are willing to do some of the heavy lifting on that I would be very
> appreciative.

judging from my experience with the gdal debian package, i don't expect the 
name change to be such an heavy change, expecially if you plan to completely 
drop the current libgdal.1.1.so scheme on all platforms.

cheers,
alessandro


From alexamici at tiscali.it  Thu Jul 10 19:36:35 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] GNUmakefile cleanups (libtool related)
In-Reply-To: <3F0DCEE0.7080905@pobox.com>
References: <200307102152.37703.alexamici@tiscali.it> <3F0DCEE0.7080905@pobox.com>
Message-ID: <200307110136.35671.alexamici@tiscali.it>

Frank,

now i'm working on ogr/ogrsf_frmts/.
the procedure for building ogrsf_frmts.a is quite unusual (and extremely 
libtool-unfriendly). IMO the easiest would be to port ogr/ogrsf_frmts/* to 
use the same o-directory trick as frmts/.
the only difficulty is the sdts/ directory:
do we really need the instal-libs target in ogr/ogrsf_frmts/GNUmakefile? 
(it only fetches object files from inside frmts/)
do we really need these objects in both gdal.a and ogrsf_frmts.a?

if not i'd:
diff -ur ../gdal-current/ogr/ogrsf_frmts/GNUmakefile ./ogr/ogrsf_frmts/GNUmakefile
--- ../gdal-current/ogr/ogrsf_frmts/GNUmakefile	2003-05-14 19:12:35.000000000 +0200
+++ ./ogr/ogrsf_frmts/GNUmakefile	2003-07-11 01:12:22.000000000 +0200
@@ -4,7 +4,7 @@
 	(cd generic; $(MAKE) $*)
 	(cd shape; $(MAKE) $*)
 	(cd ntf; $(MAKE) $*)
-	(cd sdts; $(MAKE) $* default install-libs)
+	(cd sdts; $(MAKE) $*)
 	(cd tiger; $(MAKE) $*)
 	(cd s57; $(MAKE) $*)
 	(cd mitab; $(MAKE) $*)


cheers,
alessandro


From markusrei at yahoo.com  Mon Jul 14 09:42:07 2003
From: markusrei at yahoo.com (Markus Reichert)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] What's necessary to use GDAL/OGR Libery!
Message-ID: <20030714134207.61307.qmail@web20405.mail.yahoo.com>

Hi!
For my seminar paper I want to conceptualize a tool,
which is able to use, read and write several raster
data and vector formats. I have some experience with c
and c++ but not with large projekts and makefiles
etc...so I have to ask you a basic question:

I want to use GDAL/OGR-library for my project and have
 already downloaded the gdal source files (version
1.1.9) I also compiled successfully the sources with
Visual Studio 6.0. 

But now, I ask myself, which of all the libs, dlls and
header files I really need to build a program that is
using GDAL/OGR functionality and how to build them in
one dirctory so I can use them easily in another
Visual Studio project (best without using a
makefile)?? 
In the online documentation I have not found
information about such "simple" problems - sorry!

Thanks a lot!
Markus Reichert


__________________________________
Do you Yahoo!?
SBC Yahoo! DSL - Now only $29.95 per month!
http://sbc.yahoo.com

From warmerdam at pobox.com  Mon Jul 14 10:13:38 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] What's necessary to use GDAL/OGR Libery!
In-Reply-To: <20030714134207.61307.qmail@web20405.mail.yahoo.com>
References: <20030714134207.61307.qmail@web20405.mail.yahoo.com>
Message-ID: <3F12BA92.90807@pobox.com>

Markus Reichert wrote:
> But now, I ask myself, which of all the libs, dlls and
> header files I really need to build a program that is
> using GDAL/OGR functionality and how to build them in
> one dirctory so I can use them easily in another
> Visual Studio project (best without using a
> makefile)?? 
> In the online documentation I have not found
> information about such "simple" problems - sorry!

Markus,

In order to build projects that build and link against GDAL/OGR it is
generally easiest to "install" GDAL.  This will copy the required include
files, DLLs and so forth into a seperate set of directories.  To configure
this modify the following variables in the gdal\nmake.opt file to your
liking ... the defaults are really just what I do on my machine and not
that great for general use:

BINDIR = D:\bin
PY_INST_DIR = D:\bin\pymod
LIBDIR = D:\bin\lib
INCDIR = D:\bin\include
DATADIR = D:\bin\data

Now when building a project your should include the INCDIR in your include
path, the LIBDIR in your libpath, and BINDIR in your path. All the include
files you need should be installed intot he INCDIR directory for instance.
The only library you should need to link against is gdal_i.lib, the stub
library for gdal11.dll.  Depending on your build options there may be
lots of other DLLs also required, but you will need to track that yourself.
For instance the DLLs for ECW, Oracle, OGDI, etc.

I hope this helps.  I have updated the GDAL building page in CVS to reflect
some of this information.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From rogerjames99 at btinternet.com  Mon Jul 14 11:39:50 2003
From: rogerjames99 at btinternet.com (Roger James)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] What's necessary to use GDAL/OGR Libery!
In-Reply-To: <3F12BA92.90807@pobox.com>
Message-ID: <000701c34a1e$29f62f60$fe0aa8c0@lancaster.beardandsandals.co.uk>

Markus,

I have found nmake -f makefile.vc devinstall works better than just
"install". If you have built with vc this also copies the header files
into the include directory.

You may also have to change the

lib:

line in makefile.vc to

lib: $(LIBOBJ)

to stop some complaints.

Roger

> -----Original Message-----
> From: gdal-dev-admin@remotesensing.org [mailto:gdal-dev-
> admin@remotesensing.org] On Behalf Of Frank Warmerdam
> Sent: 14 July 2003 15:14
> To: gdal-dev@remotesensing.org
> Subject: Re: [Gdal-dev] What's necessary to use GDAL/OGR Libery!
> 
> Markus Reichert wrote:
> > But now, I ask myself, which of all the libs, dlls and
> > header files I really need to build a program that is
> > using GDAL/OGR functionality and how to build them in
> > one dirctory so I can use them easily in another
> > Visual Studio project (best without using a
> > makefile)??
> > In the online documentation I have not found
> > information about such "simple" problems - sorry!
> 
> Markus,
> 
> In order to build projects that build and link against GDAL/OGR it is
> generally easiest to "install" GDAL.  This will copy the required
include
> files, DLLs and so forth into a seperate set of directories.  To
configure
> this modify the following variables in the gdal\nmake.opt file to your
> liking ... the defaults are really just what I do on my machine and
not
> that great for general use:
> 
> BINDIR = D:\bin
> PY_INST_DIR = D:\bin\pymod
> LIBDIR = D:\bin\lib
> INCDIR = D:\bin\include
> DATADIR = D:\bin\data
> 
> Now when building a project your should include the INCDIR in your
include
> path, the LIBDIR in your libpath, and BINDIR in your path. All the
include
> files you need should be installed intot he INCDIR directory for
instance.
> The only library you should need to link against is gdal_i.lib, the
stub
> library for gdal11.dll.  Depending on your build options there may be
> lots of other DLLs also required, but you will need to track that
> yourself.
> For instance the DLLs for ECW, Oracle, OGDI, etc.
> 
> I hope this helps.  I have updated the GDAL building page in CVS to
> reflect
> some of this information.
> 
> Best regards,
> --
>
---------------------------------------+--------------------------------
--
> ----
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for
Rent
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev



From jonathan at intevation.de  Mon Jul 14 12:20:21 2003
From: jonathan at intevation.de (Jonathan Coles)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] projected bounding box
Message-ID: <1058199620.10745.71.camel@reisen>

hi,

I'm using gdal to project a geotiff image to be displayed underneath
vector map data. The extents that I use for the warping are the
projected coordinates of the window corners. Sometimes the image only
represents a small portion of the overall map and so the resulting image
that is generated contains lots of essentially useless data, but it can
take a very long time to render. To fix this problem I would like to
only render that portion of the image that is truly important by setting
the extents to the projected bounding box of the image's bounding box.
My problem is now this: how do I calculate an accurate projected
bounding box? I've found that simply projecting the corner coordinates
is not enough because sometimes the maximum extents are beyond the
corners, resulting in clipped images.

I was hoping that GDAL/PROJ would have a function for this, but I
couldn't find one. Any help will be much appreciated.

Thanks.

--jonathan

-- 
======================================================================
 Jonathan Coles                                jonathan@intevation.de
 Intevation GmbH                             http://www.intevation.de
======================================================================

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030714/80e7b3f8/attachment.bin
From ed at topozone.com  Mon Jul 14 12:39:19 2003
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] projected bounding box
Message-ID: <13858AA1A74F30419F319ACB66A9D1222BFD0D@mercator.topozone.com>

Jonathan -

This is a tricky problem to solve in a general case, and has been the source of a number of software bugs I've met along the way!

To do it right, you need to take EACH POINT along each of the edges of the output bounding box (rectangle) and reproject it back into the source projection.  For each edge you calculate the appropriate minimum/maximum value in the input projection.

You can probably get away with using fewer points (resampling along the line), but it might be easier for you to take your specific application and calculate a "buffer" value.  You can then do something like calculate the four corner points and use the buffer value to expand them so you choose an input area that's less than the whole file but big enough for your purposes.  This is obviously a special-case solution, but it's probably a lot simpler and faster than trying to solve the general problem.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 

-----Original Message-----
From: Jonathan Coles [mailto:jonathan@intevation.de]
Sent: Monday, July 14, 2003 12:20 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] projected bounding box


hi,

I'm using gdal to project a geotiff image to be displayed underneath
vector map data. The extents that I use for the warping are the
projected coordinates of the window corners. Sometimes the image only
represents a small portion of the overall map and so the resulting image
that is generated contains lots of essentially useless data, but it can
take a very long time to render. To fix this problem I would like to
only render that portion of the image that is truly important by setting
the extents to the projected bounding box of the image's bounding box.
My problem is now this: how do I calculate an accurate projected
bounding box? I've found that simply projecting the corner coordinates
is not enough because sometimes the maximum extents are beyond the
corners, resulting in clipped images.

I was hoping that GDAL/PROJ would have a function for this, but I
couldn't find one. Any help will be much appreciated.

Thanks.

--jonathan

-- 
======================================================================
 Jonathan Coles                                jonathan@intevation.de
 Intevation GmbH                             http://www.intevation.de
======================================================================


From jonathan at intevation.de  Mon Jul 14 12:51:46 2003
From: jonathan at intevation.de (Jonathan Coles)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] projected bounding box
In-Reply-To: <13858AA1A74F30419F319ACB66A9D1222BFD0D@mercator.topozone.com>
References: <13858AA1A74F30419F319ACB66A9D1222BFD0D@mercator.topozone.com>
Message-ID: <1058201506.11185.98.camel@reisen>

On Mon, 2003-07-14 at 18:39, Ed McNierney wrote:
> This is a tricky problem to solve in a general case, 
> and has been the source of a number of software bugs 
> I've met along the way!

Hopefully, in the future, not with Thuban ;)

> 
> To do it right, you need to take EACH POINT along
> each of the edges of the output bounding box (rectangle)
> and reproject it back into the source projection.  For 
> each edge you calculate the appropriate minimum/maximum 
> value in the input projection.

I was afraid of this response.

> 
> it might be easier for you to take your specific application and calculate
> a "buffer" value.  
> This is obviously a special-case solution, but it's 
> probably a lot simpler and faster than trying to solve 
> the general problem.
> 

That's the problem, this isn't a special case situation. It should
really work with any projection anywhere on the globe. It certainly is
something for me to think about though. Perhaps I can come up with a way
that will guarantee a good buffer value. Thanks for your thoughts.

--jonathan

-- 
======================================================================
 Jonathan Coles                                jonathan@intevation.de
 Intevation GmbH                             http://www.intevation.de
======================================================================

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030714/c107a4d7/attachment.bin
From ed at topozone.com  Mon Jul 14 13:03:57 2003
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] projected bounding box
Message-ID: <13858AA1A74F30419F319ACB66A9D1222BFD0F@mercator.topozone.com>

Jonathan -

Sorry - your first message made it sound like a specific application.  If you're building a general-purpose tool, you need to solve the general case <g>.  If you need to handle arbitrary map scales and projections, I can't think of way to select a good buffer value automatically (or at least, not a way that would be easier than projecting along the entire line).

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 

-----Original Message-----
From: Jonathan Coles [mailto:jonathan@intevation.de]
Sent: Monday, July 14, 2003 12:52 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] projected bounding box


On Mon, 2003-07-14 at 18:39, Ed McNierney wrote:
> This is a tricky problem to solve in a general case, 
> and has been the source of a number of software bugs 
> I've met along the way!

Hopefully, in the future, not with Thuban ;)

> 
> To do it right, you need to take EACH POINT along
> each of the edges of the output bounding box (rectangle)
> and reproject it back into the source projection.  For 
> each edge you calculate the appropriate minimum/maximum 
> value in the input projection.

I was afraid of this response.

> 
> it might be easier for you to take your specific application and calculate
> a "buffer" value.  
> This is obviously a special-case solution, but it's 
> probably a lot simpler and faster than trying to solve 
> the general problem.
> 

That's the problem, this isn't a special case situation. It should
really work with any projection anywhere on the globe. It certainly is
something for me to think about though. Perhaps I can come up with a way
that will guarantee a good buffer value. Thanks for your thoughts.

--jonathan

-- 
======================================================================
 Jonathan Coles                                jonathan@intevation.de
 Intevation GmbH                             http://www.intevation.de
======================================================================


From nhv at cape.com  Mon Jul 14 13:45:15 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] projected bounding box
In-Reply-To: <1058201506.11185.98.camel@reisen>
Message-ID: <EKEJIKAILPONGGENMBGACEJOEAAA.nhv@cape.com>

Jonathan Coles writes:
> > 
> > To do it right, you need to take EACH POINT along
> > each of the edges of the output bounding box (rectangle)
> > and reproject it back into the source projection.  For 
> > each edge you calculate the appropriate minimum/maximum 
> > value in the input projection.
> 
> I was afraid of this response.
> 
> > 
> > it might be easier for you to take your specific application and calculate
> > a "buffer" value.  
> > This is obviously a special-case solution, but it's 
> > probably a lot simpler and faster than trying to solve 
> > the general problem.
> > 
> 
> That's the problem, this isn't a special case situation. It should
> really work with any projection anywhere on the globe. It certainly is
> something for me to think about though. Perhaps I can come up with a way
> that will guarantee a good buffer value.

FWIW
The *only* way I know of that will do this correctly in the 'general case'
is to back project every point in your new image into the src raster

This works, but unfortunately isn't very quick.

A good case to demonstrate some of the problems involved is going 
from a sub-rectangle of a cylndrical projection to a good fitting rectangle 
in an azimuthal projection of the same area.

ie try to come up with the projection parameters for an azimuthal projection
that 'fits' the rectangle defined by a zoom box on a mercator projected map
for any zoom box

Note that what is rectangular in one projection is probably not in another
unless they both happen to be cykndrical projections

Hint:
Try using the center point and the actual 'earth size' of the pixel at CP 
as primary projection parameters and don't even think about ellipsoidal
variants untill you have a spherical solution

HTH

Norman


From warmerdam at pobox.com  Mon Jul 14 14:29:36 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] projected bounding box
In-Reply-To: <1058199620.10745.71.camel@reisen>
References: <1058199620.10745.71.camel@reisen>
Message-ID: <3F12F690.4080707@pobox.com>

Jonathan Coles wrote:
> hi,
> 
> I'm using gdal to project a geotiff image to be displayed underneath
> vector map data. The extents that I use for the warping are the
> projected coordinates of the window corners. Sometimes the image only
> represents a small portion of the overall map and so the resulting image
> that is generated contains lots of essentially useless data, but it can
> take a very long time to render. To fix this problem I would like to
> only render that portion of the image that is truly important by setting
> the extents to the projected bounding box of the image's bounding box.
> My problem is now this: how do I calculate an accurate projected
> bounding box? I've found that simply projecting the corner coordinates
> is not enough because sometimes the maximum extents are beyond the
> corners, resulting in clipped images.
> 
> I was hoping that GDAL/PROJ would have a function for this, but I
> couldn't find one. Any help will be much appreciated.

Jonathan,

As Ed mentions this is hard to do completely correctly.   The
GDALSuggestedWarpOutput() is where I have it implemented for the image
warper applications.  This code basically samples 20 points along each edge
to transform and compute a bounding box.  This generally gives good results,
but objects it can be off a bit or even alot in degenerate situations.

You might want to glance at gdal/alg/gdaltransformer.cpp::GDALSuggsestedWarpOutput().

Best regards,

---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From alexamici at tiscali.it  Mon Jul 14 18:21:12 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] new build strategy for org/orgsf_frmts/
Message-ID: <200307150021.12317.alexamici@tiscali.it>

Frank,

i just moved the ogr/ogrsf_frmts/ in cvs to use a build strategy similar to 
the frmts/. note that ogrsf_frmts.a now only contains object files from 
ogr/ogrsf_frmts/*.
that is, the sdts format is not self contained any more into ogrsf_frmts.a, in 
fact a few object files are now only found into gdal.a (they where copied 
into ogrsf_frmts.a before).

as far as i can say nothing should change unless someone is linking statically 
against ogrsf_frmts.a, but not against gdal.a (?).

if needed i can restore the old behavior.

cheers,
alessandro


From warmerdam at pobox.com  Mon Jul 14 18:31:05 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] new build strategy for org/orgsf_frmts/
In-Reply-To: <200307150021.12317.alexamici@tiscali.it>
References: <200307150021.12317.alexamici@tiscali.it>
Message-ID: <3F132F29.5020404@pobox.com>

Alessandro Amici wrote:
> Frank,
> 
> i just moved the ogr/ogrsf_frmts/ in cvs to use a build strategy similar to 
> the frmts/. note that ogrsf_frmts.a now only contains object files from 
> ogr/ogrsf_frmts/*.
> that is, the sdts format is not self contained any more into ogrsf_frmts.a, in 
> fact a few object files are now only found into gdal.a (they where copied 
> into ogrsf_frmts.a before).
> 
> as far as i can say nothing should change unless someone is linking statically 
> against ogrsf_frmts.a, but not against gdal.a (?).
> 
> if needed i can restore the old behavior.

Alessandro,

I think a few things like MapServer used to sometimes statically link against
the OGR libraries and may have some quirks with this change, but likely just
best to deal with it there.   Is there any point to having a variety of
static libraries now?  Is there any reason to not just fold ogr.a and
ogrsf_frmts.a directly into gdal.a?

If we were to do this we would have an issue with how the object file list
from the ogr directory is maintained.  We can't trivially pull all .o files
from the ogr directory into gdal.a (like we do with most other directories)
because there could be .o files from OGR utility programs.  Perhaps those
should just be moved to gdal/apps for uniformity?

Despite my conservative nature, I am willing to suffer a little disruption
at this point if it will be helpful in the future.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From alexamici at tiscali.it  Mon Jul 14 19:35:36 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] new build strategy for org/orgsf_frmts/
In-Reply-To: <3F132F29.5020404@pobox.com>
References: <200307150021.12317.alexamici@tiscali.it> <3F132F29.5020404@pobox.com>
Message-ID: <200307150135.36164.alexamici@tiscali.it>

Frank,

> Alessandro,
>
> I think a few things like MapServer used to sometimes statically link
> against the OGR libraries and may have some quirks with this change, but
> likely just best to deal with it there.   Is there any point to having a
> variety of static libraries now?  Is there any reason to not just fold
> ogr.a and ogrsf_frmts.a directly into gdal.a?

actually this would have been _my_ next question ;). i'm working on that.

> If we were to do this we would have an issue with how the object file list
> from the ogr directory is maintained. We can't trivially pull all .o files
> from the ogr directory into gdal.a (like we do with most other directories)
> because there could be .o files from OGR utility programs.  Perhaps those
> should just be moved to gdal/apps for uniformity?

i think a list is already maintained in ogr/GNUmakefile and i plan to use that 
one. a cleaner solution is certainly welcome (but i'm not working on that at 
the moment).

> Despite my conservative nature, I am willing to suffer a little disruption
> at this point if it will be helpful in the future.

ok, i'll prepare a patch for the unification of the various static libraries 
in the next few days.
if you agree i'd also take the chance to change the static library name to the 
more standard libgdal.a. better one big application build breakage than two 
:).

cheers,
alessandro


From bwragg at tpg.com.au  Tue Jul 15 04:43:03 2003
From: bwragg at tpg.com.au (Benjamin Wragg)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] Gdalinfo error
Message-ID: <000101c34aad$1be620d0$0a00a8c0@mapping12>

Hi list,
 
I'm currently using gadl1.1.8 and I've got a problem with a geotiff and
running gdalinfo on the file. When I run "gdalinfo filename.tif" I get
the following error repeated 5 times:
 
ERROR 6: Unable to load PROJ.4 library (libproj.so), creation of
OGRCoordinateTransformation failed.
 
I found the following links on the web
<http://remotesensing.org/pipermail/gdal-dev/2003-February/000238.html>
http://remotesensing.org/pipermail/gdal-dev/2003-February/000238.html
and
http://lists.gis.umn.edu/pipermail/mapserver-users/2003-April/003420.htm
l where people have similar errors. In the one from the gdal list Roni
Zanolli responeded saying that the problem is with gcc3.2 and configure
and suggested grabbing the nightly snapshot. Is this fixed in 1.1.9 or
is there something else I need to do to fix this?
 
Thanks,
 
Benjamin Wragg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030715/8b378771/attachment.html
From warmerdam at pobox.com  Tue Jul 15 09:18:20 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] Gdalinfo error
In-Reply-To: <000101c34aad$1be620d0$0a00a8c0@mapping12>
References: <000101c34aad$1be620d0$0a00a8c0@mapping12>
Message-ID: <3F13FF1C.401@pobox.com>

Benjamin Wragg wrote:
> Hi list,
>  
> I'm currently using gadl1.1.8 and I've got a problem with a geotiff and 
> running gdalinfo on the file. When I run "gdalinfo filename.tif" I get 
> the following error repeated 5 times:
>  
> ERROR 6: Unable to load PROJ.4 library (libproj.so), creation of 
> OGRCoordinateTransformation failed.
>  
> I found the following links on the web 
> http://remotesensing.org/pipermail/gdal-dev/2003-February/000238.html and 
> http://lists.gis.umn.edu/pipermail/mapserver-users/2003-April/003420.html where 
> people have similar errors. In the one from the gdal list Roni Zanolli 
> responeded saying that the problem is with gcc3.2 and configure and 
> suggested grabbing the nightly snapshot. Is this fixed in 1.1.9 or is 
> there something else I need to do to fix this?

Benjamin,

The problem in question related to configure getting mixed up on systems
where /usr/local/include was already in the include path.  I believe this
quirk is addressed by the GDAL 1.1.9 configure.  However, you should also
confirm that you actually have PROJ.4 installed.  It is a separate package
from GDAL.  I would also note that it isn't required for most GDAL operations,
though without it you won't get lat/long bounds reported for gdal datasets, and
the gdal warping reprojection support would not be operational.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Tue Jul 15 09:34:56 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] new build strategy for org/orgsf_frmts/
In-Reply-To: <200307150135.36164.alexamici@tiscali.it>
References: <200307150021.12317.alexamici@tiscali.it> <3F132F29.5020404@pobox.com> <200307150135.36164.alexamici@tiscali.it>
Message-ID: <3F140300.9060702@pobox.com>

Alessandro Amici wrote:
> i think a list is already maintained in ogr/GNUmakefile and i plan to use that 
> one. a cleaner solution is certainly welcome (but i'm not working on that at 
> the moment).

Alessandro,

But how do we take advantage of that list from the top level GNUmakefile?

>>Despite my conservative nature, I am willing to suffer a little disruption
>>at this point if it will be helpful in the future.
> 
> 
> ok, i'll prepare a patch for the unification of the various static libraries 
> in the next few days.
> if you agree i'd also take the chance to change the static library name to the 
> more standard libgdal.a. better one big application build breakage than two 
> :).

Sigh.  Yes, I suppose you are right.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From bwragg at tpg.com.au  Tue Jul 15 18:07:59 2003
From: bwragg at tpg.com.au (Benjamin Wragg)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] Gdalinfo error
In-Reply-To: <3F13FF1C.401@pobox.com>
Message-ID: <001601c34b1d$8e9f86a0$0a00a8c0@mapping12>

Thanks Frank. I have proj.4 installed and working with other programs
like postgis and mapserver, so I don't think it's proj.4. I'll recompile
with gdal 1.1.9. To be safe should I remove /usr/local/include from the
ld.so.conf file just before I compile 1.1.9? Is the ld.so.conf file
contain what you describe as the "include path"?

Thanks,

Benjamin

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Tuesday, 15 July 2003 10:48 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Gdalinfo error


Benjamin Wragg wrote:
> Hi list,
>  
> I'm currently using gadl1.1.8 and I've got a problem with a geotiff 
> and
> running gdalinfo on the file. When I run "gdalinfo filename.tif" I get

> the following error repeated 5 times:
>  
> ERROR 6: Unable to load PROJ.4 library (libproj.so), creation of
> OGRCoordinateTransformation failed.
>  
> I found the following links on the web
> http://remotesensing.org/pipermail/gdal-dev/2003-February/000238.html
and 
>
http://lists.gis.umn.edu/pipermail/mapserver-users/2003-April/003420.htm
l where 
> people have similar errors. In the one from the gdal list Roni Zanolli

> responeded saying that the problem is with gcc3.2 and configure and 
> suggested grabbing the nightly snapshot. Is this fixed in 1.1.9 or is 
> there something else I need to do to fix this?

Benjamin,

The problem in question related to configure getting mixed up on systems
where /usr/local/include was already in the include path.  I believe
this quirk is addressed by the GDAL 1.1.9 configure.  However, you
should also confirm that you actually have PROJ.4 installed.  It is a
separate package from GDAL.  I would also note that it isn't required
for most GDAL operations, though without it you won't get lat/long
bounds reported for gdal datasets, and the gdal warping reprojection
support would not be operational.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Tue Jul 15 18:35:04 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] Gdalinfo error
In-Reply-To: <001601c34b1d$8e9f86a0$0a00a8c0@mapping12>
References: <001601c34b1d$8e9f86a0$0a00a8c0@mapping12>
Message-ID: <3F148198.7070607@pobox.com>

Benjamin Wragg wrote:
> Thanks Frank. I have proj.4 installed and working with other programs
> like postgis and mapserver, so I don't think it's proj.4. I'll recompile
> with gdal 1.1.9. To be safe should I remove /usr/local/include from the
> ld.so.conf file just before I compile 1.1.9? Is the ld.so.conf file
> contain what you describe as the "include path"?

Benjamin,

There is no need to worry about the /usr/local/include.  It isn't something
that appears in ld.so.conf ... it is one of the places the compiler looks
for include files.  It should *just work*.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From bwragg at tpg.com.au  Tue Jul 15 22:24:08 2003
From: bwragg at tpg.com.au (Benjamin Wragg)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] viewing gdaladdo overlays
Message-ID: <000101c34b41$5710c4a0$0a00a8c0@mapping12>

Hi list,
 
If I built 4 overlays in a geotiff using gdaladdo, is it possible to
view each overlay in some type of GIS/Graphical program? If so what
programs support this?
 
Thanks,
 
Benjamin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030716/79e67baf/attachment.html
From warmerdam at pobox.com  Tue Jul 15 23:23:32 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] viewing gdaladdo overlays
In-Reply-To: <000101c34b41$5710c4a0$0a00a8c0@mapping12>
References: <000101c34b41$5710c4a0$0a00a8c0@mapping12>
Message-ID: <3F14C534.1030402@pobox.com>

Benjamin Wragg wrote:
> Hi list,
>  
> If I built 4 overlays in a geotiff using gdaladdo, is it possible to 
> view each overlay in some type of GIS/Graphical program? If so what 
> programs support this?

Benjamin,

Some programs that support TIFF will let you look at specific sub-images
but this if fairly rare.  An alternative is to use the "tiffsplit"
utility distributed with libtiff to split each TIFF directory into a
seperate file.  That would mean the base image, and each overview would
be a seperate TIFF file. Some information (like the geotiff tags) might be
lost in this process.

Of course, applications that support overviews in TIFF will presumably let
you see the overview levels implicitly.  For instance, if you load an
image in OpenEV that has overviews, go to 1:1 resolution, and then
page out each step should show a different power of 2 overview (assuming
you built your overviews on powers of two).  But it can be hard to be sure
you are getting what you think you should be getting.  I assume you are wanting
to do some quality assurance on the overviews?

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From bwragg at tpg.com.au  Tue Jul 15 23:56:08 2003
From: bwragg at tpg.com.au (Benjamin Wragg)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] viewing gdaladdo overlays
In-Reply-To: <3F14C534.1030402@pobox.com>
Message-ID: <000001c34b4e$30c205e0$0a00a8c0@mapping12>

Frank,

Thanks for the quick response. Yes I want to check that the overviews
we've built look OK. I'm currently building overviews using GDAL to
increase raster serving performance in Mapserver. The source raster we
are serving is a high resolution digital copy of a map which is
published on paper, so it is filled with place names, etc. When
mapserver serves out the image all the text looks terrible. I know this
problem will never be completely solved as mapserver has to resample the
image for a web browser client and it doesn't know not too drop pixels
which make up the text, but I'm trying to make sure that the overview
being built are as good as they can be.

Cheers,

Benjamin
-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Wednesday, 16 July 2003 12:54 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] viewing gdaladdo overlays


Benjamin Wragg wrote:
> Hi list,
>  
> If I built 4 overlays in a geotiff using gdaladdo, is it possible to
> view each overlay in some type of GIS/Graphical program? If so what 
> programs support this?

Benjamin,

Some programs that support TIFF will let you look at specific sub-images
but this if fairly rare.  An alternative is to use the "tiffsplit"
utility distributed with libtiff to split each TIFF directory into a
seperate file.  That would mean the base image, and each overview would
be a seperate TIFF file. Some information (like the geotiff tags) might
be lost in this process.

Of course, applications that support overviews in TIFF will presumably
let you see the overview levels implicitly.  For instance, if you load
an image in OpenEV that has overviews, go to 1:1 resolution, and then
page out each step should show a different power of 2 overview (assuming
you built your overviews on powers of two).  But it can be hard to be
sure you are getting what you think you should be getting.  I assume you
are wanting to do some quality assurance on the overviews?

Best regards,

-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From dron at ak4719.spb.edu  Wed Jul 16 02:39:18 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] viewing gdaladdo overlays
In-Reply-To: <000101c34b41$5710c4a0$0a00a8c0@mapping12>
References: <000101c34b41$5710c4a0$0a00a8c0@mapping12>
Message-ID: <20030716063918.GA3872@ak4719.spb.edu>

On Wed, Jul 16, 2003 at 11:54:08AM +0930, Benjamin Wragg wrote:
> If I built 4 overlays in a geotiff using gdaladdo, is it possible to
> view each overlay in some type of GIS/Graphical program? If so what
> programs support this?

There is a viewer called ida (http://bytesex.org/ida/) capable to
display different pages in TIFF file. It don't support 16-bit images,
but for 8-bit it works well.

Viewer from ImageMagick package also supports multiple pages per TIFF
file.

						Regards,
						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From jonathan at intevation.de  Wed Jul 16 04:03:14 2003
From: jonathan at intevation.de (Jonathan Coles)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] projected bounding box
In-Reply-To: <3F12F690.4080707@pobox.com>
References: <1058199620.10745.71.camel@reisen>  <3F12F690.4080707@pobox.com>
Message-ID: <1058342593.10745.133.camel@reisen>

On Mon, 2003-07-14 at 20:29, Frank Warmerdam wrote:
> Jonathan,
> 
> As Ed mentions this is hard to do completely correctly.   The
> GDALSuggestedWarpOutput() is where I have it implemented for the image
> warper applications.  This code basically samples 20 points along each edge
> to transform and compute a bounding box.  This generally gives good results,
> but objects it can be off a bit or even alot in degenerate situations.
> 
> You might want to glance at gdal/alg/gdaltransformer.cpp::GDALSuggsestedWarpOutput().
> 

Thanks, I'm looking into playing around with different amounts of
sampling in my own code. Seems to be working alright for my test cases.
I'll have to watch out for extreme situations.

--jonathan

-- 
======================================================================
 Jonathan Coles                                jonathan@intevation.de
 Intevation GmbH                             http://www.intevation.de
======================================================================

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030716/54fafe6d/attachment.bin
From warmerdam at pobox.com  Wed Jul 16 15:36:44 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] Re: gdal overviews
In-Reply-To: <3F156079.1070607@atlantis-scientific.com>
References: <3F156079.1070607@atlantis-scientific.com>
Message-ID: <3F15A94C.4050107@pobox.com>

Gillian Walter wrote:
> Hi Frank,
> 
> I tried sending a message to gdal-dev about this a while ago, but it 
> didn't go through.  Lately I have been noticing that openev/gdal from 
> the main CVS does not seem to use overviews for formats other than 
> geotiff (ie. formats that store overviews in .ovr files).  I tried ceos 
> and envisat files.  I looked in gvraster.c/gvrasterlayer.c and did not 
> see any changes that should affect this.  Has something changed recently 
> in the way that gdal handles overviews?  Do you run into this problem on 
> your machine?

Gillian,

I have investigated and discovered that overview support was effectively
disabled for any RasterIO() call against formats built on top of the
RawRasterBand class, such as the CEOS, MFF, Envi, and various other formats.
This occured when the RawRasterBand class was optimized at my request by
Andrey on May 2, 2003.  The optimization was to do direct IO, instead of
read and caching whole-scanline blocks so that small subwindow loads didn't
cause so much cache thrashing and potentially extra read activity.  Note,
that means overview use was effectively disabled in the GDAL 1.1.9 release
for many formats.

I have modified the gdal/frmts/rawdataset.cpp class to use overviews now
if present, and the change is committed.

I think Andrey and I will need to do some further review on the cases where
direct IO is done vs. cases where block (ie. scanline) based access is
appropriate.  At the very least, if most of a scanline is being accessed we
might as well go through the caching mechanism.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Wed Jul 16 15:55:16 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] rawdataset.cpp
Message-ID: <3F15ADA4.4040809@pobox.com>

Andrey,

We need to fine tune the rules for RawRasterBand's decision on whether
to do "direct io" to satisfy a request vs. passing it off to the default
logic based on caching blocks (whole scanlines in the case of RawRasterBand).

There are a few applications, like MapServer where we know there will be
essentially one RasterIO() request made for a given dataset for the whole
map area that we want to render.  For these kinds of applications it may
be helpful skip any caching of data.  To address this I would like to give
applications (or users via the environment) to indicate to GDAL that IO
will take the form of a single big request.  In RawRasterBand::IRasterIO()
I would like you to check using the new CPLGetConfigOptions() call with
a symbol named "GDAL_ONE_BIG_READ".  If this is not set, or is "NO" then
we use a normal strategy that would tend towards caching data.  If this is
anything else we would tend towards satisfying this single request as
efficiently as possible.

Within RawRasterBand::IRasterIO() I would like the following decision
rules:

Use direct IO (the current implementation) if:

   GDAL_ONE_BIG_READ is enabled

   or

   the length of a scanline on disk is more than 50000 bytes, and
   the width of the requested chunk is less than 40% of the whole
   scanline and none of the requested scanlines are already in the cache.

Otherwise just call GDALRasterBand::IRasterIO() forcing things to go through
the default caching logic.  Also, please ensure you keep the case for
overviews that I added even if the above conditions are satisified.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From alexamici at tiscali.it  Wed Jul 16 19:58:27 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] new build strategy for org/orgsf_frmts/
In-Reply-To: <3F140300.9060702@pobox.com>
References: <200307150021.12317.alexamici@tiscali.it> <200307150135.36164.alexamici@tiscali.it> <3F140300.9060702@pobox.com>
Message-ID: <200307170158.27049.alexamici@tiscali.it>


Frank,

On Tuesday 15 July 2003 15:34, Frank Warmerdam wrote:
> Alessandro Amici wrote:
> > i think a list is already maintained in ogr/GNUmakefile and i plan to use
> > that one. a cleaner solution is certainly welcome (but i'm not working on
> > that at the moment).
>
> Alessandro,
>
> But how do we take advantage of that list from the top level GNUmakefile?
>

my plan is to use partial linking (ld -r) for sub-directory dependencies.
with the attached patch i fase out ogrsf_frmts.a which is inserted into ogr.a 
as a single object (ogrsf_frmts.o).
the idea is to leave the detailed info on the files to be build in only one 
directory and treat inter directory dependecies via a standard mechanism. 
this technique is used in the linux kernel build system for the build-in.o 
partially linked objects.

i need to do the thing in steps, because there are a lot of non-trivial 
dependencies. however, the idea is to link the content of every subdir via 
$(subdir)/$(subdir).o. so next step would be to convert ogr.a to ogr.o and 
link it into gdal.a.

this procedure should be libtool friendly (and libtool should take care to 
issue an 'ld -r' in the correct unix dialect)

another possibility is to add to an ar archive the content of another archive 
(i.e. in oder to insert ogrsf_frmts.a into ogr.a), but i didn't find a nice 
way to do it.

> >>Despite my conservative nature, I am willing to suffer a little
> >> disruption at this point if it will be helpful in the future.

after battling with the subtle details i fully understand where your 
'conservative nature' come from ;).

> > ok, i'll prepare a patch for the unification of the various static
> > libraries in the next few days.
> > if you agree i'd also take the chance to change the static library name
> > to the more standard libgdal.a. better one big application build breakage
> > than two
> >
> > :).
>
> Sigh.  Yes, I suppose you are right.
>

this is a rather big choice to be made, so i'll refrain from committing this 
patch to cvs until you give the ok. BTW the full patch is actually bigger due 
to the removal into the ogrsf_frmts/*/GNUmakefile of the ar-after-compile 
rules.

NOTE: that the current patch has been tested on linux, but it assumes that 'ld 
-r' works on all supported plattorms!

cheers,
alessandro
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ogrsf_frmts-partial-linking.diff
Type: text/x-diff
Size: 2831 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030717/55be3d1f/ogrsf_frmts-partial-linking.bin
From nhv at cape.com  Wed Jul 16 21:03:23 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] new build strategy for org/orgsf_frmts/
In-Reply-To: <200307170158.27049.alexamici@tiscali.it>
Message-ID: <EKEJIKAILPONGGENMBGAMECGEBAA.nhv@cape.com>

Alessandro Amici writes:
> 
> my plan is to use partial linking (ld -r) for sub-directory dependencies.
 
> NOTE: that the current patch has been tested on linux, but it assumes that 'ld 
> -r' works on all supported plattorms!
 

On WIn32  < Cygwin, MingW32 >   it is a bit simpler  :-)
to get a single link library for my current GDAL config all I do is

$(GDAL_SLIB):  $(GDAL_LIB)
	$(CXX) -shared -o $(GDAL_SLIB) \
	-Wl,--out-implib=libgdal.$(GDAL_VER).dll.a \
	-Wl,--export-all-symbols \
            -Wl,--allow-multiple-definition \
	-Wl,--enable-auto-import \
	-Wl,--whole-archive $(GDAL_LIB) $(CPL_LIB) $(OGR_LIB) \
	-Wl,--no-whole-archive $(OGRFRMTS_LIB) \
            -Wl,--no-whole-archive $(PG_LIB) $(LIBS) $(HDF_LIBS)

Cheers

Norman

From s.perkins at lanl.gov  Wed Jul 16 23:44:58 2003
From: s.perkins at lanl.gov (Simon Perkins)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] Windows makefile update
Message-ID: <1058413498.23602.4.camel@afreet.lanl.gov>

Hi,

I just checked in some minor changes to the windows makefiles and
nmake.opt, mainly to add the option of FITS support to windows.

I also updated gdalbridge.cpp to include the recently added
GDALFillRaster function. Can someone tell me what the role of the bridge
stuff is?

Any problems, let me know.

Cheers,

Sy



From dron at ak4719.spb.edu  Thu Jul 17 09:00:49 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] rawdataset.cpp
In-Reply-To: <3F15ADA4.4040809@pobox.com>
References: <3F15ADA4.4040809@pobox.com>
Message-ID: <20030717130049.GA8258@ak4719.spb.edu>

On Wed, Jul 16, 2003 at 03:55:16PM -0400, Frank Warmerdam wrote:
> Within RawRasterBand::IRasterIO() I would like the following decision
> rules:
> 
> Use direct IO (the current implementation) if:
> 
>   GDAL_ONE_BIG_READ is enabled
> 
>   or
> 
>   the length of a scanline on disk is more than 50000 bytes, and
>   the width of the requested chunk is less than 40% of the whole
>   scanline and none of the requested scanlines are already in the cache.
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Frank,

What do you mean in this case: main GDAL's cache or local RawRasterBand
buffer, referenced by the nLoadedScanline variable? In the first case we
need special function which goes through the cached blocks and checks
GDALRasterBlock properties (GDALRasterBlock::nXOff and
GDALRasterBlock::nYOff). Something like
GDALRasterBlock::IsLoaded(nXOff, nYOff).


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From warmerdam at pobox.com  Thu Jul 17 09:38:35 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] rawdataset.cpp
In-Reply-To: <20030717130049.GA8258@ak4719.spb.edu>
References: <3F15ADA4.4040809@pobox.com> <20030717130049.GA8258@ak4719.spb.edu>
Message-ID: <3F16A6DB.6050900@pobox.com>

Andrey Kiselev wrote:
>>  the length of a scanline on disk is more than 50000 bytes, and
>>  the width of the requested chunk is less than 40% of the whole
>>  scanline and none of the requested scanlines are already in the cache.
> 
>                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> Frank,
> 
> What do you mean in this case: main GDAL's cache or local RawRasterBand
> buffer, referenced by the nLoadedScanline variable? In the first case we
> need special function which goes through the cached blocks and checks
> GDALRasterBlock properties (GDALRasterBlock::nXOff and
> GDALRasterBlock::nYOff). Something like
> GDALRasterBlock::IsLoaded(nXOff, nYOff).

Andrey,

I mean the main GDAL cache.  Yes, please add the IsLoaded() method you
suggested ... actually I see it as a virtual method on the GDALRasterBand.
Normally it would indicate if the internal main cache has the indicated block,
but some formats might overload it to indicate if their custom caching
mechanism has the data available.

Eventually I would like to implement a mechanism where an application can
post a desire to load a particular region asynchronously and check back later
to see if it is loaded (or receive a message indicating it is ready), and this
might be useful for that as well.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From s.perkins at lanl.gov  Fri Jul 18 00:57:14 2003
From: s.perkins at lanl.gov (Simon Perkins)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] nmake.opt
Message-ID: <1058504233.21552.139.camel@afreet.lanl.gov>

Hi Frank,

What's your advice on how to handle nmake.opt and CVS? Whenever anybody
compiles GDAL on windows they have to edit nmake.opt to configure the
build process properly. Trouble is, whenever I do a 'cvs commit', the
changes I've made to that file get copied to the CVS repository. Even
worse, when anyone else who has modified their nmake.opt to build on
windows does a subsequent 'cvs update', they will get a merge conflict.
Is there some way to minimize the pain?

Some possibilities:

- Avoid committing nmake.opt except when absolutely necessary. Conflicts
will still occur now and again though.

- Maintain a pristine make-template.opt in CVS, then have people copy
that file to nmake.opt (which would be removed from CVS control) as part
of the build preparation process (along with inserting the correct
config values into the new file).

Cheers,

Sy



From ben at vterrain.org  Fri Jul 18 02:03:29 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] GeoTIFF file which crashes GDAL?
In-Reply-To: <000001c344ae$2156a2b0$fe0aa8c0@lancaster.beardandsandals.co.uk>
Message-ID: <000001c34cf2$4ff4dd70$f400fe0a@TOPP2>

I have a GeoTIFF which was output from the MultiSpec remote-sensing
analysis program (http://www.ece.purdue.edu/~biehl/MultiSpec/).  It
crashes in GDAL (on Windows) when i try to load it.  Tested it with
gdalinfo, and that crashes too.

I've uploaded it here: http://vterrain.org/Temp/problem.zip

It loads fine in PhotoShop, so there must be something about the
non-picture TIF elements in it.  It would be fine if GDAL gave an error
and refused to load it, but a crash is not good..

Thanks,
Ben


From schut at sarvision.com  Fri Jul 18 04:00:12 2003
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] GeoTIFF file which crashes GDAL?
In-Reply-To: <000001c34cf2$4ff4dd70$f400fe0a@TOPP2>
References: <000001c34cf2$4ff4dd70$f400fe0a@TOPP2>
Message-ID: <200307181000.12509.schut@sarvision.com>

FYI,

tried gdalinfo on this file on my linux with gdal-cvs. Gives a bunch of errors 
before segfaulting:

[vincent@lowresbox problem]$ gdalinfo problem.tif 
Warning 1: TIFFReadDirectory:problem.tif: invalid TIFF directory; tags are not 
sorted in ascending order
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 7540 for "Tag 3596"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 5450 for "Tag 5401"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 4458 for "Tag 7441"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 4458 for "Tag 5397"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 106 for "Tag 3601"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 6516 for "Tag 5397"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 127 for "Tag 7449"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 5461 for "Tag 
11029"; tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 5471 for "Tag 5388"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 4458 for "Tag 5401"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 5482 for "Tag 5410"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 5471 for "Tag 7441"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 3157 for "Tag 5393"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 2133 for "Tag 7436"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 4490 for "Tag 3601"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 8799 for "Tag 3609"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 2154 for "Tag 5393"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 4447 for "Tag 5405"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 5492 for "Tag 7449"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 4437 for "Tag 3592"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 5461 for "Tag 5397"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 2186 for "Tag 5401"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 6495 for "Tag 7449"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 4426 for "Tag 7445"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 6485 for "Tag 5388"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 6485 for "Tag 7449"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 4458 for "Tag 7449"; 
tag ignored
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 5461 for "Tag 5393"; 
tag ignored
<snap> lots more of these... </snap>
Warning 1: TIFFReadDirectory:problem.tif: wrong data type 65535 for "Tag 
65279"; tag ignored
Segmentation fault (core dumped)

gdb sais:
(gdb) backtrace
#0  0x40124cac in TIFFReadDirectory () from /usr/local/lib/libgdal.1.1.so
#1  0x400db303 in GTiffDataset::OpenOffset(tiff*, unsigned long, int, 
GDALAccess) () from /usr/local/lib/libgdal.1.1.so
#2  0x400dafbf in GTiffDataset::Open(GDALOpenInfo*) () from 
/usr/local/lib/libgdal.1.1.so
#3  0x40151933 in GDALOpen () from /usr/local/lib/libgdal.1.1.so
#4  0x08049737 in main ()
#5  0x404f6082 in __libc_start_main () from /lib/i686/libc.so.6

I'd say the tiff is illegal and photoshop is not so strict... But I'd like to 
hear Frank's opinion on this.

Cheers,
Vincent.


On Friday 18 July 2003 08:03, Ben Discoe wrote:
> I have a GeoTIFF which was output from the MultiSpec remote-sensing
> analysis program (http://www.ece.purdue.edu/~biehl/MultiSpec/).  It
> crashes in GDAL (on Windows) when i try to load it.  Tested it with
> gdalinfo, and that crashes too.
>
> I've uploaded it here: http://vterrain.org/Temp/problem.zip
>
> It loads fine in PhotoShop, so there must be something about the
> non-picture TIF elements in it.  It would be fine if GDAL gave an error
> and refused to load it, but a crash is not good..
>
> Thanks,
> Ben
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev

-- 
______________________________________
Vincent Schut
Sarvision B.V.
Wageningen, The Netherlands
www.sarvision.com

From schut at sarvision.com  Fri Jul 18 04:08:17 2003
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] GeoTIFF file which crashes GDAL?
In-Reply-To: <000001c34cf2$4ff4dd70$f400fe0a@TOPP2>
References: <000001c34cf2$4ff4dd70$f400fe0a@TOPP2>
Message-ID: <200307181008.17158.schut@sarvision.com>

FYI 2:
tried to open it with gimp: besides unknown tag errors, also this one: 
'resolution unit meaningless'. Loads image, upper part looks fine but after 
pixel 470 (more or less) a small stroke is continuously repeated. Is this how 
the image should look like?

Regards,
Vincent.

On Friday 18 July 2003 08:03, Ben Discoe wrote:
> I have a GeoTIFF which was output from the MultiSpec remote-sensing
> analysis program (http://www.ece.purdue.edu/~biehl/MultiSpec/).  It
> crashes in GDAL (on Windows) when i try to load it.  Tested it with
> gdalinfo, and that crashes too.
>
> I've uploaded it here: http://vterrain.org/Temp/problem.zip
>
> It loads fine in PhotoShop, so there must be something about the
> non-picture TIF elements in it.  It would be fine if GDAL gave an error
> and refused to load it, but a crash is not good..
>
> Thanks,
> Ben
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev

-- 
______________________________________
Vincent Schut
Sarvision B.V.
Wageningen, The Netherlands
www.sarvision.com

From warmerdam at pobox.com  Fri Jul 18 08:54:00 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] nmake.opt
In-Reply-To: <1058504233.21552.139.camel@afreet.lanl.gov>
References: <1058504233.21552.139.camel@afreet.lanl.gov>
Message-ID: <3F17EDE8.4030202@pobox.com>

Simon Perkins wrote:
> Hi Frank,
> 
> What's your advice on how to handle nmake.opt and CVS? Whenever anybody
> compiles GDAL on windows they have to edit nmake.opt to configure the
> build process properly. Trouble is, whenever I do a 'cvs commit', the
> changes I've made to that file get copied to the CVS repository. Even
> worse, when anyone else who has modified their nmake.opt to build on
> windows does a subsequent 'cvs update', they will get a merge conflict.
> Is there some way to minimize the pain?
> 
> Some possibilities:
> 
> - Avoid committing nmake.opt except when absolutely necessary. Conflicts
> will still occur now and again though.

Simon,

It has been my policy to only commit nmake.opt files when strictly
necessary, and rather than committing my "working" version, I generally
get a clean copy from CVS, make my additions, and commit that reducing
merge/conflict issues.  Problems will sometimes still occur.

> - Maintain a pristine make-template.opt in CVS, then have people copy
> that file to nmake.opt (which would be removed from CVS control) as part
> of the build preparation process (along with inserting the correct
> config values into the new file).

My issue with this is aI don't want to add a manual step for users starting
new with GDAL. I link that the "nmake /f makefile.vc" command will generally
work out of the box for basic builds of GDAL on windows.   If it were
possible to have a makefile (for NMAKE) which could copy a template
nmake.opt.in to nmake.opt if nmake.opt didn't exist, before including it, then
I would be glad to make the change but I don't know of any way to accomplish
this.

In short, for now I would just ask that people be careful committing changes
to nmake.opt to change the bare minimum.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From s.perkins at lanl.gov  Fri Jul 18 10:33:50 2003
From: s.perkins at lanl.gov (Simon J Perkins)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] nmake.opt
References: <1058504233.21552.139.camel@afreet.lanl.gov> <3F17EDE8.4030202@pobox.com>
Message-ID: <3F18054E.4010207@lanl.gov>


Frank Warmerdam wrote:

>>
>> - Avoid committing nmake.opt except when absolutely necessary. Conflicts
>> will still occur now and again though.
>
>
> Simon,
>
> It has been my policy to only commit nmake.opt files when strictly
> necessary, and rather than committing my "working" version, I generally
> get a clean copy from CVS, make my additions, and commit that reducing
> merge/conflict issues.  Problems will sometimes still occur. 

Fair enough. Unfortunately I did just commit some changes to nmake.opt a 
day or two ago. They were in the necessary category I think though since 
I was adding support for an additional format.  But I probably changed 
more than was necessary since the nmake.opt contains my modified install 
and python paths. Sorry about that to all windows users!

>
>>  Maintain a pristine make-template.opt in CVS, then have people copy
>> that file to nmake.opt (which would be removed from CVS control) as part
>> of the build preparation process (along with inserting the correct
>> config values into the new file).
>
>
> My issue with this is aI don't want to add a manual step for users 
> starting
> new with GDAL. I link that the "nmake /f makefile.vc" command will 
> generally
> work out of the box for basic builds of GDAL on windows.   If it were
> possible to have a makefile (for NMAKE) which could copy a template
> nmake.opt.in to nmake.opt if nmake.opt didn't exist, before including 
> it, then
> I would be glad to make the change but I don't know of any way to 
> accomplish
> this. 

This seems like the correct way to do things - analgous to the configure 
"template" that gets shipped with the linux version that is then used to 
generate various user-specific files. On linux, the user has to type 
"configure" before doing a make, and has to specify the configuration 
options they want. What would be wrong with having a .bat file or VB 
script, called, say, win-config, that did a similar thing to generate 
nmake.opt  on windows? win-config by itself would generate a default 
nmake.opt that would work fine for most people. Then various options 
would be specified to change the default install path, include various 
formats, and so forth. win-config itself could be a fairly generic 
program that reads nmake.opt.in (or even win-config.in) to define what 
options it handles and what defaults it writes out and to where. Does 
anything like this exist already? If not I'll look into maybe creating 
one... I don't suppose I can assume that people building GDAL from 
source on windows have python installed, can I? What do people use for 
scripting on windows these days? Surely there's something more advanced 
than .bat files? Otherwise the win-config script might have to be a 
compiled thing that gets shipped with GDAL...


Cheers,

Sy




From warmerdam at pobox.com  Fri Jul 18 11:11:44 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] GeoTIFF file which crashes GDAL?
In-Reply-To: <000001c34cf2$4ff4dd70$f400fe0a@TOPP2>
References: <000001c34cf2$4ff4dd70$f400fe0a@TOPP2>
Message-ID: <3F180E30.1080300@pobox.com>

Ben Discoe wrote:

> I have a GeoTIFF which was output from the MultiSpec remote-sensing
> analysis program (http://www.ece.purdue.edu/~biehl/MultiSpec/).  It
> crashes in GDAL (on Windows) when i try to load it.  Tested it with
> gdalinfo, and that crashes too.
> 
> I've uploaded it here: http://vterrain.org/Temp/problem.zip
> 
> It loads fine in PhotoShop, so there must be something about the
> non-picture TIF elements in it.  It would be fine if GDAL gave an error
> and refused to load it, but a crash is not good..

Ben,

I checked the image, and run into similar problems.  The tiffdump reports:

problem.tif:
Magic: 0x4949 <little-endian> Version: 0x2a
Directory 0: offset 8 (0x8) next 524296 (0x80008)
SubFileType (254) LONG (4) 1<0>
ImageWidth (256) LONG (4) 1<1702>
ImageLength (257) LONG (4) 1<1405>
BitsPerSample (258) SHORT (3) 3<8 8 8>
Compression (259) SHORT (3) 1<1>
Photometric (262) SHORT (3) 1<2>
StripOffsets (273) LONG (4) 1<366>
SamplesPerPixel (277) SHORT (3) 1<3>
RowsPerStrip (278) LONG (4) 1<1405>
StripByteCounts (279) LONG (4) 1<2391310>
XResolution (282) RATIONAL (5) 1<1>
YResolution (283) RATIONAL (5) 1<1>
PlanarConfig (284) SHORT (3) 1<1>
ResolutionUnit (296) SHORT (3) 1<1>
SampleFormat (339) SHORT (3) 3<1 1 1>
33550 (0x830e) DOUBLE (12) 3<28.5 28.5 0>
33922 (0x8482) DOUBLE (12) 6<0 0 0 397931 847177 0>
34735 (0x87af) SHORT (3) 20<1 1 0 4 1024 0 1 1 1025 0 1 1 2052 0 1 9001 3072 0 1 
32617>

Directory 1: offset 524296 (0x80008) next 490688554 (0x1d3f502a)
5401 (0x1519) 4447 (0x115f) 236019477<>
3601 (0xe11) 6506 (0x196a) 604793365<>
...

So the main problem seems to be that the second directory starts
at 524296 which is in the middle of the first image (2391310 bytes
starting at 366).  Given the mess that is the second directory I
would guess the image was written over the directory.  So GDAL
and some of the libtiff tools crash trying to read the second
directory.

I tried hacking up version of GDAL that would just read the first
directory, and it still resulted in corruption part way down the image.
I don't really know why, but having spent an hour or two on this image
I am ready to throw in the towel.

Later,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From ben at vterrain.org  Fri Jul 18 13:32:58 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] GeoTIFF file which crashes GDAL?
In-Reply-To: <3F180E30.1080300@pobox.com>
Message-ID: <001601c34d52$a25eba80$f400fe0a@TOPP2>

Hi Frank and Vincent,

Thanks for spending the time looking into the problems with the file...
but i think the question i'm asking is... is it possible to GDAL to just
return an error instead of crashing?  I'm not asking for GDAL to read
messy/problematic files, that is understandably not worth effort, just
if it could not crash..

Thanks,
Ben

> -----Original Message-----
> From: gdal-dev-admin@remotesensing.org 
> [mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
> Sent: Friday, July 18, 2003 10:12 AM
> To: gdal-dev@remotesensing.org
> Subject: Re: [Gdal-dev] GeoTIFF file which crashes GDAL?
> 
> 
> Ben Discoe wrote:
> 
> > I have a GeoTIFF which was output from the MultiSpec remote-sensing
> > analysis program (http://www.ece.purdue.edu/~biehl/MultiSpec/).  It
> > crashes in GDAL (on Windows) when i try to load it.  Tested it with
> > gdalinfo, and that crashes too.
> > 
> > I've uploaded it here: http://vterrain.org/Temp/problem.zip
> > 
> > It loads fine in PhotoShop, so there must be something about the
> > non-picture TIF elements in it.  It would be fine if GDAL 
> gave an error
> > and refused to load it, but a crash is not good..
> 
> Ben,
> 
> I checked the image, and run into similar problems.  The 
> tiffdump reports:
> 
> problem.tif:
> Magic: 0x4949 <little-endian> Version: 0x2a
> Directory 0: offset 8 (0x8) next 524296 (0x80008)
> SubFileType (254) LONG (4) 1<0>
> ImageWidth (256) LONG (4) 1<1702>
> ImageLength (257) LONG (4) 1<1405>
> BitsPerSample (258) SHORT (3) 3<8 8 8>
> Compression (259) SHORT (3) 1<1>
> Photometric (262) SHORT (3) 1<2>
> StripOffsets (273) LONG (4) 1<366>
> SamplesPerPixel (277) SHORT (3) 1<3>
> RowsPerStrip (278) LONG (4) 1<1405>
> StripByteCounts (279) LONG (4) 1<2391310>
> XResolution (282) RATIONAL (5) 1<1>
> YResolution (283) RATIONAL (5) 1<1>
> PlanarConfig (284) SHORT (3) 1<1>
> ResolutionUnit (296) SHORT (3) 1<1>
> SampleFormat (339) SHORT (3) 3<1 1 1>
> 33550 (0x830e) DOUBLE (12) 3<28.5 28.5 0>
> 33922 (0x8482) DOUBLE (12) 6<0 0 0 397931 847177 0>
> 34735 (0x87af) SHORT (3) 20<1 1 0 4 1024 0 1 1 1025 0 1 1 
> 2052 0 1 9001 3072 0 1 
> 32617>
> 
> Directory 1: offset 524296 (0x80008) next 490688554 (0x1d3f502a)
> 5401 (0x1519) 4447 (0x115f) 236019477<>
> 3601 (0xe11) 6506 (0x196a) 604793365<>
> ...
> 
> So the main problem seems to be that the second directory starts
> at 524296 which is in the middle of the first image (2391310 bytes
> starting at 366).  Given the mess that is the second directory I
> would guess the image was written over the directory.  So GDAL
> and some of the libtiff tools crash trying to read the second
> directory.
> 
> I tried hacking up version of GDAL that would just read the first
> directory, and it still resulted in corruption part way down 
> the image.
> I don't really know why, but having spent an hour or two on this image
> I am ready to throw in the towel.
> 
> Later,
> 
> -- 
> ---------------------------------------+----------------------
> ----------------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial 
> Programmer for Rent
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev
> 


From warmerdam at pobox.com  Fri Jul 18 13:40:42 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] GeoTIFF file which crashes GDAL?
In-Reply-To: <001601c34d52$a25eba80$f400fe0a@TOPP2>
References: <001601c34d52$a25eba80$f400fe0a@TOPP2>
Message-ID: <3F18311A.4090805@pobox.com>

Ben Discoe wrote:

> Hi Frank and Vincent,
> 
> Thanks for spending the time looking into the problems with the file...
> but i think the question i'm asking is... is it possible to GDAL to just
> return an error instead of crashing?  I'm not asking for GDAL to read
> messy/problematic files, that is understandably not worth effort, just
> if it could not crash..

Ben,

File a bug against libtiff and I will have Andrey dig into it.  The second
directory is very corrupt, but you are right ... it should not crash.  By
the way, you can get to the libtiff bugzilla from www.libtiff.org.  Same
bugzilla as GDAL - just a different project name.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From alexamici at tiscali.it  Fri Jul 18 13:46:14 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] new build strategy for org/orgsf_frmts/
In-Reply-To: <200307170158.27049.alexamici@tiscali.it>
References: <200307150021.12317.alexamici@tiscali.it> <3F140300.9060702@pobox.com> <200307170158.27049.alexamici@tiscali.it>
Message-ID: <200307181946.14277.alexamici@tiscali.it>

Frank,

> my plan is to use partial linking (ld -r) for sub-directory dependencies.
> with the attached patch i fase out ogrsf_frmts.a which is inserted into
> ogr.a as a single object (ogrsf_frmts.o).

as a metter of fact there is an easier way to roll ogrsf_frmts.a into ogr.a: 
just use .o/*.o :-/.
this is what i just committed to cvs.

so heads up, ogrsf_frmts.a is no more!
you'll find all the ogr formats into ogr.a.

cheers,
alessandro


From ben at vterrain.org  Fri Jul 18 14:07:18 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] GeoTIFF file which crashes GDAL?
In-Reply-To: <3F18311A.4090805@pobox.com>
Message-ID: <001c01c34d57$6e185dd0$f400fe0a@TOPP2>

> From: Frank Warmerdam
> 
> Ben,
> File a bug against libtiff and I will have Andrey dig into 
> it.  The second directory is very corrupt, but you are right
> ... it should not crash.

I tried to file a bug
(http://bugzilla.remotesensing.org/enter_bug.cgi?product=libtiff) and it
wants a password... can someone with a password log it, or should i try
to figure out to get one?

-Ben


From warmerdam at pobox.com  Fri Jul 18 14:18:42 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] GeoTIFF file which crashes GDAL?
In-Reply-To: <001c01c34d57$6e185dd0$f400fe0a@TOPP2>
References: <001c01c34d57$6e185dd0$f400fe0a@TOPP2>
Message-ID: <3F183A02.2050302@pobox.com>

Ben Discoe wrote:

>>From: Frank Warmerdam
>>
>>Ben,
>>File a bug against libtiff and I will have Andrey dig into 
>>it.  The second directory is very corrupt, but you are right
>>... it should not crash.
> 
> 
> I tried to file a bug
> (http://bugzilla.remotesensing.org/enter_bug.cgi?product=libtiff) and it
> wants a password... can someone with a password log it, or should i try
> to figure out to get one?

Ben,

You need to setup an account with bugzilla.  It should be pretty easy to do,
though it has been a long time since I did it.  I would encourage you to
set one up.  If you log a bug yourself you will get email updates when the
status changes.  Even if you would be happy to fire and forget this bug,
you do reports lots of other bugs.

PS. you can use the same account for libtiff, and gdal, and proj ...

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dron at ak4719.spb.edu  Fri Jul 18 16:05:22 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] GeoTIFF file which crashes GDAL?
In-Reply-To: <001c01c34d57$6e185dd0$f400fe0a@TOPP2>
References: <3F18311A.4090805@pobox.com> <001c01c34d57$6e185dd0$f400fe0a@TOPP2>
Message-ID: <20030718200522.GA2180@ak4719.spb.edu>

On Fri, Jul 18, 2003 at 02:07:18PM -0400, Ben Discoe wrote:
> > File a bug against libtiff and I will have Andrey dig into 
> > it.  The second directory is very corrupt, but you are right
> > ... it should not crash.
> 
> I tried to file a bug
> (http://bugzilla.remotesensing.org/enter_bug.cgi?product=libtiff) and it
> wants a password... can someone with a password log it, or should i try
> to figure out to get one?

Ben,

I'm already digging into this issue, but creating a Bugzilla entry will
be good anyway. Place my e-mail (dron@remotesensing.org) into ``Owner''
field.

You should register yourself with Bugzilla before filling report. This
step requires your name and e-mail only.

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Fri Jul 18 16:22:51 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] nmake.opt
In-Reply-To: <3F18054E.4010207@lanl.gov>
References: <1058504233.21552.139.camel@afreet.lanl.gov> <3F17EDE8.4030202@pobox.com> <3F18054E.4010207@lanl.gov>
Message-ID: <20030718202251.GB2180@ak4719.spb.edu>

On Fri, Jul 18, 2003 at 08:33:50AM -0600, Simon J Perkins wrote:
> This seems like the correct way to do things - analgous to the configure 
> "template" that gets shipped with the linux version that is then used to 
> generate various user-specific files. On linux, the user has to type 
> "configure" before doing a make, and has to specify the configuration 
> options they want. What would be wrong with having a .bat file or VB 
> script, called, say, win-config, that did a similar thing to generate 
> nmake.opt  on windows? win-config by itself would generate a default 
> nmake.opt that would work fine for most people. Then various options 
> would be specified to change the default install path, include various 
> formats, and so forth. win-config itself could be a fairly generic 
> program that reads nmake.opt.in (or even win-config.in) to define what 
> options it handles and what defaults it writes out and to where. Does 
> anything like this exist already? If not I'll look into maybe creating 
> one... I don't suppose I can assume that people building GDAL from 
> source on windows have python installed, can I? What do people use for 
> scripting on windows these days? Surely there's something more advanced 
> than .bat files? Otherwise the win-config script might have to be a 
> compiled thing that gets shipped with GDAL...

Simon,

Did you note, that current configure script is 7316 lines long and
written in shell language, which is much more feature rich than Windows
cmd? I think writing similar tools for Windows will be a big pain.

Besides of this, you will need to scan all directories to find where is
libraries installed, because there is no predefined places in Windows
environment. And you should run a set of tests in every place, where
you found library, which looks like what you need. All of this will take
a long time without warranty that you really found the right library
installation.

				Regards,
				Andrey


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From s.perkins at lanl.gov  Fri Jul 18 17:29:43 2003
From: s.perkins at lanl.gov (Simon Perkins)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] nmake.opt
In-Reply-To: <20030718202251.GB2180@ak4719.spb.edu>
References: <1058504233.21552.139.camel@afreet.lanl.gov>
	 <3F17EDE8.4030202@pobox.com> <3F18054E.4010207@lanl.gov>
	 <20030718202251.GB2180@ak4719.spb.edu>
Message-ID: <1058563782.16688.33.camel@afreet.lanl.gov>

On Fri, 2003-07-18 at 14:22, Andrey Kiselev wrote:
> Simon,
> 
> Did you note, that current configure script is 7316 lines long and
> written in shell language, which is much more feature rich than Windows
> cmd? I think writing similar tools for Windows will be a big pain.
> 
> Besides of this, you will need to scan all directories to find where is
> libraries installed, because there is no predefined places in Windows
> environment. And you should run a set of tests in every place, where
> you found library, which looks like what you need. All of this will take
> a long time without warranty that you really found the right library
> installation.

All good points, and I certainly don't intend to reproduce all of
autoconf/configure's capabilities. Automatic library/program detection
is definitely out, at least for a first stab. My principle aim is just
to make nmake.opt work better with CVS and so I think something simpler
will suffice.

At the simplest level, win-config could be just a script that copies
nmake.opt.in to nmake.opt, and fills in the blanks with fixed default
values. The user then edits nmake.opt as they see fit. You would only
ever run a win-config like this once, just after checking out the code,
since running win-config again would reset your configuration.

More complex, and probably the level I'll aim for, is where the
win-config script looks at the previously generated nmake.opt and uses
the values filled in there as defaults for filling in the blanks, when
copying from nmake.opt.in to nmake.opt. This win-config could be run as
many times as you like without destroying your existing configuration.
In addition, if changes are made to the nmake.opt.in template, these
changes will be merged into the existing nmake.opt.

Does that sound more feasible?

As far as I can see, the main issue with this approach is that there is
no interpreted scripting language that comes standard with windows that
is more powerful than cmd.exe. So win-config would probably have to be a
compiled, say C, program itself. So I'd probably add two files to CVS:
win-config.c and make-win-config, which is just a bat file that compiles
winconfig.c to win-config.exe. For simplicitly, we could also check thet
win-config.exe script into CVS as a binary file as well.


Then the windows build process would amount to:

- After checking out the code for the first time ever:

> make-win-config  (optional if we stick win-config.exe in CVS)

edit nmake.opt if required.


- After each cvs update:

> win-config

edit nmake.opt if required (usually not necessary)


- Every time you build:

> make /f makefile.vc

as usual...



Sy



From rogerjames99 at btinternet.com  Fri Jul 18 19:22:46 2003
From: rogerjames99 at btinternet.com (Roger James)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] nmake.opt
In-Reply-To: <1058563782.16688.33.camel@afreet.lanl.gov>
Message-ID: <000001c34d83$7f74ee50$fe0aa8c0@lancaster.beardandsandals.co.uk>

>As far as I can see, the main issue with this approach is that there is
no >interpreted scripting language that comes standard with windows that
is >more powerful than cmd.exe. So win-config would probably have to be
a >compiled, say C, program itself. So I'd probably add two files to
CVS: win->config.c and make-win-config, which is just a bat file that
compiles >winconfig.c to win-config.exe. For simplicitly, we could also
check thet >win-config.exe script into CVS as a binary file as well.

Have you tried typing "cscript" at a windows command prompt and seeing
what you get. Most windows recent windows installations support jscript
and vbscript via this method.

Roger





From s.perkins at lanl.gov  Fri Jul 18 19:52:41 2003
From: s.perkins at lanl.gov (Simon Perkins)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] nmake.opt
In-Reply-To: <000001c34d83$7f74ee50$fe0aa8c0@lancaster.beardandsandals.co.uk>
References: <000001c34d83$7f74ee50$fe0aa8c0@lancaster.beardandsandals.co.uk>
Message-ID: <1058572360.16703.140.camel@afreet.lanl.gov>

On Fri, 2003-07-18 at 17:22, Roger James wrote:
> Have you tried typing "cscript" at a windows command prompt and seeing
> what you get. Most windows recent windows installations support jscript
> and vbscript via this method.

Thanks for the tip - I'll look into it. Although I'm just off on
travel/vacation for a couple of weeks first...

Later,

Sy



From paul-grass at stjohnspoint.co.uk  Mon Jul 21 14:37:19 2003
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] Re: [GRASSLIST:757] FIX: gdal/v.in.dgn support with grass 5.0.2
In-Reply-To: <1058811329.3f1c2dc1ed23d@imp.pro.proxad.net>
References: <Pine.LNX.4.10.10307202143170.11250-100000@sjp.clara.co.uk>
 <1058811329.3f1c2dc1ed23d@imp.pro.proxad.net>
Message-ID: <Pine.LNX.4.53.0307211934290.13430@agrippa.ukshells.co.uk>


On Mon, 21 Jul 2003 tlaronde@polynum.org wrote:

> Hello,
>
> Quoting Paul Kelly <paul-grass@stjohnspoint.co.uk>:
>
...
> > > One problem with `gdal' is that the dgn* headers are not installed. I
> > > have so added the relevant headers directly in v.in.dgn subdirectory,
> > > but the "right" solution should be the installation of these by gdal.
> >
> > I think that is the main problem. Everything else seems fairly simple
> > to
> > tidy up. It looks like you need to have a full GDAL source installation
> > if
> > you want to compile this, or maybe the headers for the DGN functions
> > could
> > be included in the installed GDAL headers instead of GDAL installing
> > even
> > more header files. A temporary solution would be to include copies of
> > the
> > dgnlib.h and dgnlibp.h with GRASS, depending on what other developers
> > think.
> >
...
>
> I agree, the main problem is that, at least, we must verify that the library
> we are just about to link against matches the API use by the code, i.e. that
> the prototypes are correct but this can only be achieved if this the gdal
> package which installs the headers needed (it should be so since gdal installs
> also statically linked library which are typically used when compiling...).

Well we can only ask the GDAL developers what the situation is or how it's
supposed to be done [message copied to that list]...


From warmerdam at pobox.com  Mon Jul 21 15:01:52 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] Re: [GRASSLIST:770] Re: FIX: gdal/v.in.dgn support with grass 5.0.2
In-Reply-To: <Pine.LNX.4.53.0307211934290.13430@agrippa.ukshells.co.uk>
References: <Pine.LNX.4.10.10307202143170.11250-100000@sjp.clara.co.uk> <1058811329.3f1c2dc1ed23d@imp.pro.proxad.net> <Pine.LNX.4.53.0307211934290.13430@agrippa.ukshells.co.uk>
Message-ID: <3F1C38A0.8030904@pobox.com>

Paul Kelly wrote:
>>I agree, the main problem is that, at least, we must verify that the library
>>we are just about to link against matches the API use by the code, i.e. that
>>the prototypes are correct but this can only be achieved if this the gdal
>>package which installs the headers needed (it should be so since gdal installs
>>also statically linked library which are typically used when compiling...).
> 
> 
> Well we can only ask the GDAL developers what the situation is or how it's
> supposed to be done [message copied to that list]...

Paul, and others,

It isn't generally my intention that GDAL should by default install the
include files for component libraries like dgnlib when it is being installed.
I feel that as the number of drivers grows this will introduce alot of clutter.
Also, I don't necessarily guarantee that all the sublibrary entry points will
be exposed externally from the main gdal library on platforms like Windows
where this must be explictly done.

I would be willing to add a "devinstall" target in the gdal/ogr/ogrsf_frmts/dgn
directory that installs all the dgnlib specific include files if you wish,
and also make some effort to ensure that the dgnlib API is properly exported
from the GDAL library on windows.  However, this would still mean that
users installing dgnlib would need to do an extra step for use by GRASS,
I would imagine this would be frequently forgotten leading to lots of
additional problems.  Of course, those preparing distributions could
presumably deal with this.

A similar issue came up a while ago with shapelib, and I somewhat reluctantly
agreed to install the shapelib include files, and ensure that the entry
points are exported from GDAL DLLs.  (I think I did anyways)  However, I
am not keen on following that example for all sorts of other libraries.

My *suggestion* would be to make v.in.dgn optional, dependent on whether
the appropriate components are installed, and to try to deal with DGN
primariliy via the OGR link in the new GRASS.

Let me know if you want me to add the dgnlib devinstall target in time
for GDAL 1.2.0.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From paul-grass at stjohnspoint.co.uk  Mon Jul 21 15:49:11 2003
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] Re: [GRASSLIST:770] Re: FIX: gdal/v.in.dgn support with grass 5.0.2
In-Reply-To: <3F1C38A0.8030904@pobox.com>
References: <Pine.LNX.4.10.10307202143170.11250-100000@sjp.clara.co.uk>
 <1058811329.3f1c2dc1ed23d@imp.pro.proxad.net>
 <Pine.LNX.4.53.0307211934290.13430@agrippa.ukshells.co.uk> <3F1C38A0.8030904@pobox.com>
Message-ID: <Pine.LNX.4.53.0307212042210.13430@agrippa.ukshells.co.uk>

Hello Frank

On Mon, 21 Jul 2003, Frank Warmerdam wrote:

> My *suggestion* would be to make v.in.dgn optional, dependent on whether
> the appropriate components are installed, and to try to deal with DGN
> primariliy via the OGR link in the new GRASS.

Yes you are right; I see now that the most elegant way of accessing the
dgn format is through OGR and that external programs like GRASS should not
bother with the component libraries that are helpers to OGR.
Makes sense to me now, thank you for the insight.

We could just add --with-dgn and --with-dgn-includes as options to the
GRASS configure script then to help the people who want to use this older
module.

Paul

From ben at vterrain.org  Tue Jul 22 03:47:07 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] Re: [GRASSLIST:770] Re: FIX: gdal/v.in.dgn support with grass 5.0.2
In-Reply-To: <3F1C38A0.8030904@pobox.com>
Message-ID: <00f101c35025$73c75080$f400fe0a@TOPP2>

> From: Frank Warmerdam
>
> A similar issue came up a while ago with shapelib, and I 
> somewhat reluctantly agreed to install the shapelib
> include files, and ensure that the entry points are
> exported from GDAL DLLs.  (I think I did anyways)

Just to refresh your memory, the shapelib methods were exposed, but the
header was not added to the GDAL distribution.  That's why the VTP ships
a copy of shapefil.h, so that people can build with it and link with
GDAL..

-Ben


From alexamici at tiscali.it  Tue Jul 22 14:31:52 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] static libraries revamped (was: new build strategy for org/orgsf_frmts/)
In-Reply-To: <200307150135.36164.alexamici@tiscali.it>
References: <200307150021.12317.alexamici@tiscali.it> <3F132F29.5020404@pobox.com> <200307150135.36164.alexamici@tiscali.it>
Message-ID: <200307222031.52766.alexamici@tiscali.it>

folks,

Alessandro Amici wrote:
> Frank Warmerdam wrote:
> >  Is there any point to having a
> > variety of static libraries now?  Is there any reason to not just fold
> > ogr.a and ogrsf_frmts.a directly into gdal.a?
>
> actually this would have been _my_ next question ;). i'm working on that.
>

> > Despite my conservative nature, I am willing to suffer a little
> > disruption at this point if it will be helpful in the future.
>
> ok, i'll prepare a patch for the unification of the various static
> libraries in the next few days.
> if you agree i'd also take the chance to change the static library name to
> the more standard libgdal.a. better one big application build breakage than
> two

HEADS UP, this is disruption time!

i just committed the last remaining bit of the static library unification.
now all object files that were fonund in gdal.a, ogr.a, orgsf_frmts.a and 
cpl.a are linked into the new libgdal.a. gdal.a disappeared and the other old 
static libraries will follow soon.

the ogr directory is treated using partial linking (ld -r) which should work 
on most unix flavours (tested on linux and i checked the man pages of IRIX, 
HP-UX and SunOS). please report to the list any problem related to ogr/ogr.o.

anybody building applications statically against gdal is invited to test the 
new unified library lingdal.a, and report any problem (hopefully none ;)

cheers,
alessandro


From nhv at cape.com  Tue Jul 22 15:40:20 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] static libraries revamped (was: new build strategy for org/orgsf_frmts/)
In-Reply-To: <200307222031.52766.alexamici@tiscali.it>
Message-ID: <EKEJIKAILPONGGENMBGAKECDECAA.nhv@cape.com>

Alessandro Amici writes:
>
> HEADS UP, this is disruption time!
>
> i just committed the last remaining bit of the static library unification.
> now all object files that were fonund in gdal.a, ogr.a, orgsf_frmts.a and
> cpl.a are linked into the new libgdal.a. gdal.a disappeared and the other old
> static libraries will follow soon.

FYI

$ uname -a
CYGWIN_NT-5.0 sfdev3 1.3.22(0.78/3/2) 2003-03-18 09:20 i686 unknown unknown Cygwin

$ gcc --version
gcc (GCC) 3.2 20020927 (prerelease)

$ ld --version
GNU ld version 2.13.90 20030308


ld -r -o ogr.o ogrgeometryfactory.o ogrpoint.o ogrcurve.o ogrlinestring.o ogrlinearring.o ogrpolygon.o ogrutils.o ogrgeometry.o
ogrgeometrycollection.o ogrmultipolygon.o ogrsurface.o ogrmultipoint.o ogrmultilinestring.o ogr_api.o ogrfeature.o ogrfeaturedefn.o
ogrfeaturestyle.o ogrfielddefn.o ogrspatialreference.o ogr_srsnode.o ogr_srs_proj4.o ogr_fromepsg.o ogrct.o ogr_opt.o ogr_srs_esri.o
ogrfeaturequery.o swq.o ogr_srs_validate.o ogr_srs_xml.o ograssemblepolygon.o ogr2gmlgeometry.o gml2ogrgeometry.o
ogrsf_frmts/o/avc_bin.o ogrsf_frmts/o/avc_binwr.o ogrsf_frmts/o/avc_e00gen.o ogrsf_frmts/o/avc_e00parse.o
ogrsf_frmts/o/avc_e00read.o ogrsf_frmts/o/avc_e00write.o ogrsf_frmts/o/avc_mbyte.o ogrsf_frmts/o/avc_misc.o
ogrsf_frmts/o/avc_rawbin.o ogrsf_frmts/o/dbfopen.o ogrsf_frmts/o/ddfrecordindex.o ogrsf_frmts/o/dgnfloat.o ogrsf_frmts/o/dgnhelp.o
ogrsf_frmts/o/dgnopen.o ogrsf_frmts/o/dgnread.o ogrsf_frmts/o/dgnstroke.o ogrsf_frmts/o/dgnwrite.o ogrsf_frmts/o/gmlfeature.o
ogrsf_frmts/o/gmlfeatureclass.o ogrsf_frmts/o/gmlpropertydefn.o ogrsf_frmts/o/gmlreader.o ogrsf_frmts/o/ll_recio.o
ogrsf_frmts/o/mitab_bounds.o ogrsf_frmts/o/mitab_coordsys.o ogrsf_frmts/o/mitab_datfile.o ogrsf_frmts/o/mitab_feature.o
ogrsf_frmts/o/mitab_feature_mif.o ogrsf_frmts/o/mitab_geometry.o ogrsf_frmts/o/mitab_idfile.o ogrsf_frmts/o/mitab_imapinfofile.o
ogrsf_frmts/o/mitab_indfile.o ogrsf_frmts/o/mitab_mapcoordblock.o ogrsf_frmts/o/mitab_mapfile.o ogrsf_frmts/o/mitab_mapheaderblock.o
ogrsf_frmts/o/mitab_mapindexblock.o ogrsf_frmts/o/mitab_mapobjectblock.o ogrsf_frmts/o/mitab_maptoolblock.o
ogrsf_frmts/o/mitab_middatafile.o ogrsf_frmts/o/mitab_miffile.o ogrsf_frmts/o/mitab_ogr_datasource.o
ogrsf_frmts/o/mitab_ogr_driver.o ogrsf_frmts/o/mitab_rawbinblock.o ogrsf_frmts/o/mitab_spatialref.o ogrsf_frmts/o/mitab_tabfile.o
ogrsf_frmts/o/mitab_tabseamless.o ogrsf_frmts/o/mitab_tabview.o ogrsf_frmts/o/mitab_tooldef.o ogrsf_frmts/o/mitab_utils.o
ogrsf_frmts/o/ntf_codelist.o ogrsf_frmts/o/ntf_estlayers.o ogrsf_frmts/o/ntf_generic.o ogrsf_frmts/o/ntf_raster.o
ogrsf_frmts/o/ntffilereader.o ogrsf_frmts/o/ntfrecord.o ogrsf_frmts/o/ntfstroke.o ogrsf_frmts/o/ogr_attrind.o
ogrsf_frmts/o/ogr_gensql.o ogrsf_frmts/o/ogr_miattrind.o ogrsf_frmts/o/ogravcbindatasource.o ogrsf_frmts/o/ogravcbindriver.o
ogrsf_frmts/o/ogravcbinlayer.o ogrsf_frmts/o/ogravcdatasource.o ogrsf_frmts/o/ogravclayer.o ogrsf_frmts/o/ogrdatasource.o
ogrsf_frmts/o/ogrdgndatasource.o ogrsf_frmts/o/ogrdgndriver.o ogrsf_frmts/o/ogrdgnlayer.o ogrsf_frmts/o/ogrgmldatasource.o
ogrsf_frmts/o/ogrgmldriver.o ogrsf_frmts/o/ogrgmllayer.o ogrsf_frmts/o/ogrlayer.o ogrsf_frmts/o/ogrmemdatasource.o
ogrsf_frmts/o/ogrmemdriver.o ogrsf_frmts/o/ogrmemlayer.o ogrsf_frmts/o/ogrntfdatasource.o ogrsf_frmts/o/ogrntfdriver.o
ogrsf_frmts/o/ogrntffeatureclasslayer.o ogrsf_frmts/o/ogrntflayer.o ogrsf_frmts/o/ogrpgdatasource.o ogrsf_frmts/o/ogrpgdriver.o
ogrsf_frmts/o/ogrpglayer.o ogrsf_frmts/o/ogrpgresultlayer.o ogrsf_frmts/o/ogrpgtablelayer.o ogrsf_frmts/o/ogrrecdatasource.o
ogrsf_frmts/o/ogrrecdriver.o ogrsf_frmts/o/ogrreclayer.o ogrsf_frmts/o/ogrregisterall.o ogrsf_frmts/o/ogrs57datasource.o
ogrsf_frmts/o/ogrs57driver.o ogrsf_frmts/o/ogrs57layer.o ogrsf_frmts/o/ogrsdtsdatasource.o ogrsf_frmts/o/ogrsdtsdriver.o
ogrsf_frmts/o/ogrsdtslayer.o ogrsf_frmts/o/ogrsfdriver.o ogrsf_frmts/o/ogrsfdriverregistrar.o ogrsf_frmts/o/ogrshapedatasource.o
ogrsf_frmts/o/ogrshapedriver.o ogrsf_frmts/o/ogrshapelayer.o ogrsf_frmts/o/ogrtigerdatasource.o ogrsf_frmts/o/ogrtigerdriver.o
ogrsf_frmts/o/ogrtigerlayer.o ogrsf_frmts/o/s57classregistrar.o ogrsf_frmts/o/s57filecollector.o ogrsf_frmts/o/s57reader.o
ogrsf_frmts/o/shape2ogr.o ogrsf_frmts/o/shpopen.o ogrsf_frmts/o/shptree.o ogrsf_frmts/o/tigeraltname.o
ogrsf_frmts/o/tigerarealandmarks.o ogrsf_frmts/o/tigercompletechain.o ogrsf_frmts/o/tigerentitynames.o
ogrsf_frmts/o/tigerfeatureids.o ogrsf_frmts/o/tigerfilebase.o ogrsf_frmts/o/tigeridhistory.o ogrsf_frmts/o/tigerkeyfeatures.o
ogrsf_frmts/o/tigerlandmarks.o ogrsf_frmts/o/tigeroverunder.o ogrsf_frmts/o/tigerpip.o ogrsf_frmts/o/tigerpoint.o
ogrsf_frmts/o/tigerpolychainlink.o ogrsf_frmts/o/tigerpolygon.o ogrsf_frmts/o/tigerpolygoncorrections.o
ogrsf_frmts/o/tigerpolygoneconomic.o ogrsf_frmts/o/tigertlidrange.o ogrsf_frmts/o/tigerzerocellid.o ogrsf_frmts/o/tigerzipcodes.o
ogrsf_frmts/o/tigerzipplus4.o
ogrlinestring.o(.eh_frame+0xd2c):ogrlinestring.cpp: reloc refers to symbol `.text$_ZN8OGRCurveD0Ev' which is not being output
ogrlinestring.o(.eh_frame+0xd58):ogrlinestring.cpp: reloc refers to symbol `.text$_ZN8OGRCurveD1Ev' which is not being output
ogrmultipolygon.o(.eh_frame+0x1e7c):ogrmultipolygon.cpp: reloc refers to symbol `.text$_ZN15OGRMultiPolygonD1Ev' which is not being
output
ogrmultipolygon.o(.eh_frame+0x1ea4):ogrmultipolygon.cpp: reloc refers to symbol `.text$_ZN15OGRMultiPolygonD0Ev' which is not being
output
ogrmultipoint.o(.eh_frame+0x2038):ogrmultipoint.cpp: reloc refers to symbol `.text$_ZN13OGRMultiPointD1Ev' which is not being output
ogrmultipoint.o(.eh_frame+0x2060):ogrmultipoint.cpp: reloc refers to symbol `.text$_ZN13OGRMultiPointD0Ev' which is not being output
ogrmultilinestring.o(.eh_frame+0x21d4):ogrmultilinestring.cpp: reloc refers to symbol `.text$_ZN18OGRMultiLineStringD1Ev' which is
not being output
ogrmultilinestring.o(.eh_frame+0x21fc):ogrmultilinestring.cpp: reloc refers to symbol `.text$_ZN18OGRMultiLineStringD0Ev' which is
not being output
gml2ogrgeometry.o(.eh_frame+0x733c):gml2ogrgeometry.cpp: reloc refers to symbol `.text$_ZN15OGRMultiPolygonD0Ev' which is not being
output
gml2ogrgeometry.o(.eh_frame+0x7368):gml2ogrgeometry.cpp: reloc refers to symbol `.text$_ZN15OGRMultiPolygonD1Ev' which is not being
output
ogrsf_frmts/o/mitab_feature.o(.eh_frame+0xa50c):mitab_feature.cpp: reloc refers to symbol `.text$_ZN15OGRMultiPolygonD1Ev' which is
not being output
ogrsf_frmts/o/mitab_feature.o(.eh_frame+0xa534):mitab_feature.cpp: reloc refers to symbol `.text$_ZN15OGRMultiPolygonD0Ev' which is
not being output
ogrsf_frmts/o/mitab_feature.o(.eh_frame+0xa560):mitab_feature.cpp: reloc refers to symbol `.text$_ZN13OGRMultiPointD1Ev' which is
not being output
ogrsf_frmts/o/mitab_feature.o(.eh_frame+0xa588):mitab_feature.cpp: reloc refers to symbol `.text$_ZN13OGRMultiPointD0Ev' which is
not being output
ogrsf_frmts/o/mitab_feature.o(.eh_frame+0xa5b4):mitab_feature.cpp: reloc refers to symbol `.text$_ZN18OGRMultiLineStringD1Ev' which
is not being output
ogrsf_frmts/o/mitab_feature.o(.eh_frame+0xa5dc):mitab_feature.cpp: reloc refers to symbol `.text$_ZN18OGRMultiLineStringD0Ev' which
is not being output
ogrsf_frmts/o/mitab_feature_mif.o(.eh_frame+0xaafc):mitab_feature_mif.cpp: reloc refers to symbol `.text$_ZN15OGRMultiPolygonD1Ev'
which is not being output
ogrsf_frmts/o/mitab_feature_mif.o(.eh_frame+0xab24):mitab_feature_mif.cpp: reloc refers to symbol `.text$_ZN15OGRMultiPolygonD0Ev'
which is not being output
ogrsf_frmts/o/mitab_feature_mif.o(.eh_frame+0xab50):mitab_feature_mif.cpp: reloc refers to symbol `.text$_ZN13OGRMultiPointD1Ev'
which is not being output
ogrsf_frmts/o/mitab_feature_mif.o(.eh_frame+0xab78):mitab_feature_mif.cpp: reloc refers to symbol `.text$_ZN13OGRMultiPointD0Ev'
which is not being output
ogrsf_frmts/o/mitab_feature_mif.o(.eh_frame+0xaba4):mitab_feature_mif.cpp: reloc refers to symbol
`.text$_ZN18OGRMultiLineStringD1Ev' which is not being output
ogrsf_frmts/o/mitab_feature_mif.o(.eh_frame+0xabcc):mitab_feature_mif.cpp: reloc refers to symbol
`.text$_ZN18OGRMultiLineStringD0Ev' which is not being output
ogrsf_frmts/o/ogrdgnlayer.o(.eh_frame+0x12738):ogrdgnlayer.cpp: reloc refers to symbol `.text$_ZN18OGRMultiLineStringD0Ev' which is
not being output
ogrsf_frmts/o/ogrdgnlayer.o(.eh_frame+0x12764):ogrdgnlayer.cpp: reloc refers to symbol `.text$_ZN18OGRMultiLineStringD1Ev' which is
not being output
ogrsf_frmts/o/s57reader.o(.eh_frame+0x1795c):s57reader.cpp: reloc refers to symbol `.text$_ZN13OGRMultiPointD1Ev' which is not being
output
ogrsf_frmts/o/s57reader.o(.eh_frame+0x17984):s57reader.cpp: reloc refers to symbol `.text$_ZN13OGRMultiPointD0Ev' which is not being
output
ogrsf_frmts/o/shape2ogr.o(.eh_frame+0x17af0):shape2ogr.cpp: reloc refers to symbol `.text$_ZN13OGRMultiPointD1Ev' which is not being
output
ogrsf_frmts/o/shape2ogr.o(.eh_frame+0x17b18):shape2ogr.cpp: reloc refers to symbol `.text$_ZN13OGRMultiPointD0Ev' which is not being
output
ogrsf_frmts/o/shape2ogr.o(.eh_frame+0x17b44):shape2ogr.cpp: reloc refers to symbol `.text$_ZN18OGRMultiLineStringD0Ev' which is not
being output
ogrsf_frmts/o/shape2ogr.o(.eh_frame+0x17b70):shape2ogr.cpp: reloc refers to symbol `.text$_ZN18OGRMultiLineStringD1Ev' which is not
being output
ogrsf_frmts/o/tigeroverunder.o(.eh_frame+0x18f9c):tigeroverunder.cpp: reloc refers to symbol `.text$_ZN10TigerPointD0Ev' which is
not being output
ogrsf_frmts/o/tigeroverunder.o(.eh_frame+0x18fc8):tigeroverunder.cpp: reloc refers to symbol `.text$_ZN10TigerPointD1Ev' which is
not being output
ogrsf_frmts/o/tigerpip.o(.eh_frame+0x19198):tigerpip.cpp: reloc refers to symbol `.text$_ZN10TigerPointD0Ev' which is not being
output
ogrsf_frmts/o/tigerpip.o(.eh_frame+0x191c4):tigerpip.cpp: reloc refers to symbol `.text$_ZN10TigerPointD1Ev' which is not being
output
ogrsf_frmts/o/tigerpoint.o(.eh_frame+0x1932c):tigerpoint.cpp: reloc refers to symbol `.text$_ZN10TigerPointD1Ev' which is not being
output
ogrsf_frmts/o/tigerpoint.o(.eh_frame+0x19354):tigerpoint.cpp: reloc refers to symbol `.text$_ZN10TigerPointD0Ev' which is not being
output

FWIW I really don't understand why you didin't just use the
`--whole-archive' option to LD as I pointed out in my last email

What are we gaining with this ?

Norman


From alexamici at tiscali.it  Tue Jul 22 22:25:38 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] static libraries revamped (was: new build strategy for org/orgsf_frmts/)
In-Reply-To: <EKEJIKAILPONGGENMBGAKECDECAA.nhv@cape.com>
References: <EKEJIKAILPONGGENMBGAKECDECAA.nhv@cape.com>
Message-ID: <200307230425.38221.alexamici@tiscali.it>

Norman,

On Tuesday 22 July 2003 21:40, Norman Vine wrote:
> FYI
>
> $ uname -a
> CYGWIN_NT-5.0 sfdev3 1.3.22(0.78/3/2) 2003-03-18 09:20 i686 unknown unknown
> Cygwin

i'll investigate the cygwin case ASAP.

> FWIW I really don't understand why you didin't just use the
> `--whole-archive' option to LD as I pointed out in my last email
>
> What are we gaining with this ?

what you suggeted in your e-mail referred to the way to build GDAL_SLIB, but 
the problem i'm trying to work around is how to build GDAL_LIB.

what i'd need as a good alternativeto partial linking is a way to dump the 
content of ogr/ogr.a into libgdal.a, possibly without another o-directory 
trick. any idea?

cheers,
alessandro

BTW, i remember i answered to your email, but apparently it didn't get to the 
list ?! sorry.



From Brian.Mcdonald at ca.com  Wed Jul 23 12:45:32 2003
From: Brian.Mcdonald at ca.com (McDonald, Brian J)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] supported formats list
Message-ID: <039E46C3C030AE4E871CEEBC686806390264099B@usilms24.ca.com>

Hi there,

I'm a newbie here and we are thinking of using GDAL for some additional format support.  I was wondering though if there is a method available to get the list of supported formats at run time (and their extension(s))?

thanks!

brian

Brian McDonald
Multigen Paradigm, a Computer Associates company
brian.mcdonald@ca.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030723/a868e01e/attachment.html
From jeanhri4 at ifrance.com  Wed Jul 23 12:50:07 2003
From: jeanhri4 at ifrance.com (Jean)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] ADO driver based on OpenGIS SQL specification in OGR ?
Message-ID: <200307231650.0749@th00.opsion.fr>

The document ? OpenGIS Simple features specification for SQL rev1.1 ?
describes the SQL92 implementation of features tables (www.opengis.org).

As the Microsoft jet database engine is free on the Windows' system,
this could be a good way to have a Read/Write driver with a "performant"
SQL engine.

Indeed, I believe that these specifications are enough to create an
Read/Write OGR driver with Geometries stored in wkb format. Am i wrong ?
and is it interessting in OGR ?

Jean.

_____________________________________________________________________
MSN Messenger, nouvelle version ! Personnalisez vos messages, jouez en
ligne et communiquez en temps r?el par vid?o! http://ifrance.com/_reloc/m



From alexamici at tiscali.it  Wed Jul 23 19:21:39 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] static libraries revamped (was: new build strategy for org/orgsf_frmts/)
In-Reply-To: <EKEJIKAILPONGGENMBGAKECDECAA.nhv@cape.com>
References: <EKEJIKAILPONGGENMBGAKECDECAA.nhv@cape.com>
Message-ID: <200307240121.39916.alexamici@tiscali.it>

Norman,

i investigated a bit what's going on, but i still don't understand what is the 
difference between cygwin and the other gnu targets.

as far as i could see the problem is not partial linking per se, since i could 
build without errors ogr/ogr.o if i omited a few object files. the problem 
seem to be linked with the weak symbols associated with default destructors 
of a few classes.

i have to admit that my knowledge of the c++ linking rules is far too flebile 
to understand the origin of the problem :-(. i will try a couple more idea 
tomorrow.

unless someone figures out what's going on in the cygwin case, i'll need to 
implement a different strategy for linking all the objects into libgdal.a.

Frank, in that case the cleaner way would be to move the ogr executables into 
a ogr/apps directory :-/. what's your opinion? is it feasible?

cheers,
alessandro


From warmerdam at pobox.com  Wed Jul 23 22:18:42 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] supported formats list
In-Reply-To: <039E46C3C030AE4E871CEEBC686806390264099B@usilms24.ca.com>
References: <039E46C3C030AE4E871CEEBC686806390264099B@usilms24.ca.com>
Message-ID: <3F1F4202.4090209@pobox.com>

McDonald, Brian J wrote:
> Hi there,
> 
> I'm a newbie here and we are thinking of using GDAL for some additional 
> format support.  I was wondering though if there is a method available 
> to get the list of supported formats at run time (and their extension(s))?

Brian,

Yes.  The following C code from gdalinfo shows how to visit all the drivers.

         else if( EQUAL(argv[i], "--formats") )
         {
             int iDr;

             printf( "Supported Formats:\n" );
             for( iDr = 0; iDr < GDALGetDriverCount(); iDr++ )
             {
                 GDALDriverH hDriver = GDALGetDriver(iDr);

                 printf( "  %s: %s\n",
                         GDALGetDriverShortName( hDriver ),
                         GDALGetDriverLongName( hDriver ) );
             }

             exit( 0 );
         }

The extension, for format drivers for which it is available, can be fetched
from the driver metadata with a call something like this (untested):

   const cha* pszExtension;

   pszExtension = GDALGetMetadataItem( hDriver, GDAL_DMD_EXTENSION, "" );

The returned extension would either be NULL (if there isn't an obvious
preferred extension), or the extension text itself, such as "tif" for the
GTiff driver.  It is primarily intended for applications that wish to
auto-add format appropriate extensions to filenames.  It isn't very good
for detecting formats.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From nhv at cape.com  Thu Jul 24 07:45:57 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] static libraries revamped (was: new build strategy for org/orgsf_frmts/)
In-Reply-To: <200307240121.39916.alexamici@tiscali.it>
Message-ID: <EKEJIKAILPONGGENMBGAEEIDECAA.nhv@cape.com>

Alessandro Amici writes:
> 
> i investigated a bit what's going on, but i still don't understand what is the 
> difference between cygwin and the other gnu targets.

I think that it is related to Windows DLLs being different then Unix dynamic
libraries. 
ie all references for an object have to be resolvable before a object is used

This is often described as 'link order' matters on Win32
 
I am hoping to get some time to investigate this within a couple of days

Cheers

Norman

From alessandro_amici at telespazio.it  Thu Jul 24 08:21:18 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:52 2007
Subject: R: [Gdal-dev] static libraries revamped (was: new build strategy 
	for org/orgsf_frmts/)
Message-ID: <A183DF60AC72D5119B990002A5749CB304891385@ROMADG-MAIL01>

Norman,

> Alessandro Amici writes:
> > 
> > i investigated a bit what's going on, but i still don't understand what
is the 
> > difference between cygwin and the other gnu targets.
> 
> I think that it is related to Windows DLLs being different then Unix
dynamic
> libraries. 
> ie all references for an object have to be resolvable before a object is
used
>
> This is often described as 'link order' matters on Win32

beware that the problem appears _before_ the dll build. ogr.o is not
supposed to be
a dll, it should just be a big object file that contains the symbols of
other object
files. undefined referenceies are ok, both on unix and on windows.
furthermore all problematic symbols i looked at are classified as 'W' by nm,
not 'U'.
  
> I am hoping to get some time to investigate this within a couple of days

FYI, the problematic symbols (i.e. _ZN8OGRCurveD0Ev) refer to the
destructurs
of a class (i.e. OGRCurve). they are not defined or declared anywhere in the
code.
note that sometimes the error is raised by the time another class
OGRLineString
(with OGRCurve as a parent) is being resolved.

some examples:
$ ld -r -o ogr.o ogrcurve.o

$ ld -r -o ogr.o ogrcurve.o ogrmultipoint.o

$ ld -r -o ogr.o ogrcurve.o ogrlinestring.o
ogrlinestring.o(.eh_frame+0x688):ogrlinestring.cpp: reloc refers to symbol
`.text$_ZN8OGRCurveD0Ev' which is not being output
ogrlinestring.o(.eh_frame+0x6b4):ogrlinestring.cpp: reloc refers to symbol
`.text$_ZN8OGRCurveD1Ev' which is not being output

$ ld -r -o ogr.o ogrlinestring.o ogrcurve.o
ogrcurve.o(.eh_frame+0x688):ogrcurve.cpp: reloc refers to symbol
`.text$_ZN8OGRCurveD1Ev' which is not being output
ogrcurve.o(.eh_frame+0x6b0):ogrcurve.cpp: reloc refers to symbol
`.text$_ZN8OGRCurveD0Ev' which is not being output

i'm puzzled!

thanks, for looking into the issue. i'll do a couple more thing myself.
alessandro

From nhv at cape.com  Thu Jul 24 08:42:40 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] static libraries revamped (was: new build strategy for org/orgsf_frmts/)
In-Reply-To: <A183DF60AC72D5119B990002A5749CB304891385@ROMADG-MAIL01>
Message-ID: <EKEJIKAILPONGGENMBGAEEIHECAA.nhv@cape.com>

Amici Alessandro writes:
>  
> FYI, the problematic symbols (i.e. _ZN8OGRCurveD0Ev) refer to the
> destructurs
> of a class (i.e. OGRCurve). they are not defined or declared anywhere in the
> code.
> note that sometimes the error is raised by the time another class
> OGRLineString
> (with OGRCurve as a parent) is being resolved.
> 
> some examples:
> $ ld -r -o ogr.o ogrcurve.o

I don't have Cygwin on this machine or I would try this

what happens if you use c++ and not ld

ie 

c++ -Wl,--relocatable -o ogr.o ogrcurve.o

Norman

From alessandro_amici at telespazio.it  Thu Jul 24 09:31:00 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:52 2007
Subject: R: [Gdal-dev] static libraries revamped (was: new build strategy 
	for org/orgsf_frmts/)
Message-ID: <A183DF60AC72D5119B990002A5749CB304891502@ROMADG-MAIL01>

> what happens if you use c++ and not ld
> 
> ie 
> 
> c++ -Wl,--relocatable -o ogr.o ogrcurve.o

you mean:

$ g++ -Wl,--relocateable -o ogr.o ogrcurve.o ogrlinestring.o
ogrlinestring.o(.eh_frame+0x67c):ogrlinestring.cpp: reloc refers to symbol
`.text$_ZN8OGRCurveD0Ev' which is not being output
ogrlinestring.o(.eh_frame+0x6a8):ogrlinestring.cpp: reloc refers to symbol
`.text$_ZN8OGRCurveD1Ev' which is not being output
collect2: ld returned 1 exit status

no luck :(

From warmerdam at pobox.com  Thu Jul 24 09:53:53 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: R: [Gdal-dev] static libraries revamped (was: new build strategy
 	for org/orgsf_frmts/)
In-Reply-To: <A183DF60AC72D5119B990002A5749CB304891385@ROMADG-MAIL01>
References: <A183DF60AC72D5119B990002A5749CB304891385@ROMADG-MAIL01>
Message-ID: <3F1FE4F1.9070302@pobox.com>

Alessandro,

While I don't quite understand the approach, my impression is this
use of "ld -r" for partial linking is going to be problematic on
some platforms.  As such, I do not think we should be making the GDAL
build mechanism depend on it.

Can be find another approach?

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From nhv at cape.com  Thu Jul 24 10:38:37 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] static libraries revamped (was: new build strategy for org/orgsf_frmts/)
In-Reply-To: <A183DF60AC72D5119B990002A5749CB304891502@ROMADG-MAIL01>
Message-ID: <EKEJIKAILPONGGENMBGAGEIMECAA.nhv@cape.com>

Amici Alessandro writes:
> > 
> you mean:
> 
> $ g++ -Wl,--relocateable -o ogr.o ogrcurve.o ogrlinestring.o
> ogrlinestring.o(.eh_frame+0x67c):ogrlinestring.cpp: reloc refers to symbol
> `.text$_ZN8OGRCurveD0Ev' which is not being output
> ogrlinestring.o(.eh_frame+0x6a8):ogrlinestring.cpp: reloc refers to symbol
> `.text$_ZN8OGRCurveD1Ev' which is not being output
> collect2: ld returned 1 exit status
> 
> no luck :(

Oh well it was worth a try

Hmm....  I just noticed this in the ld docs

`-Ur'
     For anything other than C++ programs, this option is equivalent to
     `-r': it generates relocatable output--i.e., an output file that
     can in turn serve as input to `ld'.  When linking C++ programs,
     `-Ur' _does_ resolve references to constructors, unlike `-r'.  It
     does not work to use `-Ur' on files that were themselves linked
     with `-Ur'; once the constructor table has been built, it cannot
     be added to.  Use `-Ur' only for the last partial link, and `-r'
     for the others.

so maybe

ld -Ur -o ogr.o ogrcurve.o ogrlinestring.o

If that doesn't work maybe a question to gcc-help@gcc.gnu.org
is in order

Cheers

Norman

From alessandro_amici at telespazio.it  Thu Jul 24 10:49:56 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:52 2007
Subject: R: [Gdal-dev] static libraries revamped (was: new build strategy 
	for org/orgsf_frmts/)
Message-ID: <A183DF60AC72D5119B990002A5749CB30489165B@ROMADG-MAIL01>

Norman,

> Hmm....  I just noticed this in the ld docs
> 
> `-Ur'

i noticed that as well (i really tried hard to figure out what's going on!)
guess... it doesn't work either :(

> If that doesn't work maybe a question to gcc-help@gcc.gnu.org
> is in order

looks more like a binutils hickup. but i don't know if i'll have the time to
follow
the issue further.

i will follow Frank advice and just leave 'ld -r' alone :(.
see the following email.

cheers,
alessandro

From alessandro_amici at telespazio.it  Thu Jul 24 10:56:56 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] static libraries revamped (was: new build strategy
	 for org/orgsf_frmts/)
Message-ID: <A183DF60AC72D5119B990002A5749CB304891676@ROMADG-MAIL01>

> Alessandro,
> 
> While I don't quite understand the approach, my impression is this
> use of "ld -r" for partial linking is going to be problematic on
> some platforms.  As such, I do not think we should be making the GDAL
> build mechanism depend on it.
>  
> Can be find another approach?

sigh!

i see two possibilities:
1 - create an 'ogr/o' directory and move the library object there (same
trick used
	in the frmts directories) -> GDAL_OBJ += ogr/o/*.o
2 - move the executables into an 'apps' directory and probably the library
objects
	in a 'ocore' (or something like that) directory -> GDAL_OBJ +=
ogr/ocore/*.o

i wuold prefer the second solution, but moving the files in cvs is not nice,
however
you do. so, i'll bite the dust and implement solution n. 1 ASAP.

the reason i preferred the partial linking approach is that you avoid the
'*' wild
card in the dependencies. note that all the '$(MAKE) check-lib' logic is due
to *.o
having different meaning at the beginning and at the end of the build.
furthermore,
changing the configuration and rebuilding may result in stale object files
going
inside the libray if you don't 'make clean' properly.

so i think it has been a valuable quest... :(

ok, back to work:
- a libtool patch is in the works
- since i put my hands on a 4-way itanium2, i have the strong feeling that
building
	with -j 4 is a good thing (read: gdal parallel build is broken!
looking into it)

cheers,
alessandro

From alessandro_amici at telespazio.it  Thu Jul 24 11:08:39 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] gdal to proj4 translation
Message-ID: <A183DF60AC72D5119B990002A5749CB30489169A@ROMADG-MAIL01>

Frank,

i'm working on a DEM reader and i wuold be glad to use gdal and proj4
as fromat and projection engines. my question is: is there an easy way to
convert the gdal representation of the projections (the opengis format
if i understand correctly) and the proj4 strings?

digging into the docs i found the OGRSpatialReference class, which looks
like
a good starting point, but is it the shortest path?

thanks,
alessandro

From warmerdam at pobox.com  Thu Jul 24 11:17:39 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] static libraries revamped (was: new build strategy
  for org/orgsf_frmts/)
In-Reply-To: <A183DF60AC72D5119B990002A5749CB304891676@ROMADG-MAIL01>
References: <A183DF60AC72D5119B990002A5749CB304891676@ROMADG-MAIL01>
Message-ID: <3F1FF893.1030507@pobox.com>

Amici Alessandro wrote:
> i wuold prefer the second solution, but moving the files in cvs is not nice,
> however
> you do. so, i'll bite the dust and implement solution n. 1 ASAP.
> 
> the reason i preferred the partial linking approach is that you avoid the
> '*' wild
> card in the dependencies. note that all the '$(MAKE) check-lib' logic is due
> to *.o
> having different meaning at the beginning and at the end of the build.
> furthermore,
> changing the configuration and rebuilding may result in stale object files
> going
> inside the libray if you don't 'make clean' properly.
> 
> so i think it has been a valuable quest... :(
> 
> ok, back to work:
> - a libtool patch is in the works
> - since i put my hands on a 4-way itanium2, i have the strong feeling that
> building
> 	with -j 4 is a good thing (read: gdal parallel build is broken!
> looking into it)

Alessandro,

I think perhaps it is time we moved the file list for into a seperate file
that can be included from different places.  So for instance, in gdal/ogr
we would have a file with a list of the basename of all source files to
be compiled into object.

The gdal/ogr/GNUmakefile would include this and use it to build it's object
list.  gdal/GNUmakefile could also include this to build the list of object
files to be pulled from gdal/ogr and to recognise dependencies better.

Ideally this file would also be used as the file list for the NMAKE files
somehow.  Perhaps the file should look like:

OGR_OBJLIST = ogrcore.obj \
               ogrspatialreference.obj \
               ...

This can be directly included on Windows in the NMAKE file, and used.
With GNUmakefiles we can pretty easily transform the variable list into
other forms.

I would suggest we start doing this with gdal/ogr, and if it works out
well, it can be applied to gdal/port, gdal/gcore, gdal/alg, and
gdal/ogr/ogrsf_frmts/.  I think for the near future we might still use
the object file directory hack for the actual raster and vector format
drivers, though the same approach could be applied there too eventually,
with some sort of rules to compose stuff based on the drivers actually
being built.

If you would like to implement the above, then proceed otherwise let
me know and I will take a crack at it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Thu Jul 24 11:25:03 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] gdal to proj4 translation
In-Reply-To: <A183DF60AC72D5119B990002A5749CB30489169A@ROMADG-MAIL01>
References: <A183DF60AC72D5119B990002A5749CB30489169A@ROMADG-MAIL01>
Message-ID: <3F1FFA4F.4060107@pobox.com>

Amici Alessandro wrote:

> Frank,
> 
> i'm working on a DEM reader and i wuold be glad to use gdal and proj4
> as fromat and projection engines. my question is: is there an easy way to
> convert the gdal representation of the projections (the opengis format
> if i understand correctly) and the proj4 strings?
> 
> digging into the docs i found the OGRSpatialReference class, which looks
> like
> a good starting point, but is it the shortest path?

Alessandro,

A short path (in C++) from WKT string to PROJ.4 string would be:

#include "ogr_spatialref.h"

...

	OGRSpatialReference oSRS;
         char *pszWKT = pszWKTOriginal;
         char *pszProj4 = NULL;

         oSRS.importFromWkt( &pszWKT );
         if( oSRS.exportToProj4( &pszProj4 ) == CE_None )
         {
         }

Note that instead of explicitly handling PROJ.4 strings, you can just
instantiate an OGRCoordinateTransformation object with two coordinate systems
and it will take care of creating the PROJ.4 representations internally
where needed.  I would suggest you review the OGR Projections Tutorial:

   http://gdal.velocet.ca/projects/opengis/ogrhtml/osr_tutorial.html

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From alexamici at tiscali.it  Thu Jul 24 14:09:37 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] gdal to proj4 translation
In-Reply-To: <3F1FFA4F.4060107@pobox.com>
References: <A183DF60AC72D5119B990002A5749CB30489169A@ROMADG-MAIL01> <3F1FFA4F.4060107@pobox.com>
Message-ID: <200307242009.37069.alexamici@tiscali.it>

Frank,

> Note that instead of explicitly handling PROJ.4 strings, you can just
> instantiate an OGRCoordinateTransformation object with two coordinate
> systems and it will take care of creating the PROJ.4 representations
> internally where needed.  I would suggest you review the OGR Projections
> Tutorial:
>
>    http://gdal.velocet.ca/projects/opengis/ogrhtml/osr_tutorial.html
>

did i mention already that i love gdal and co.? especially the python 
bindings?

BTW wuold the projection '+proj=geocent' be a special case for gdal/ogr?

cheers,
alessandro


From alexamici at tiscali.it  Thu Jul 24 14:21:18 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] static libraries revamped (was: new build strategy  for org/orgsf_frmts/)
In-Reply-To: <3F1FF893.1030507@pobox.com>
References: <A183DF60AC72D5119B990002A5749CB304891676@ROMADG-MAIL01> <3F1FF893.1030507@pobox.com>
Message-ID: <200307242021.18476.alexamici@tiscali.it>

Frank,

> I think perhaps it is time we moved the file list for into a seperate file
> that can be included from different places.  So for instance, in gdal/ogr
> we would have a file with a list of the basename of all source files to
> be compiled into object.
>

> Ideally this file would also be used as the file list for the NMAKE files
> somehow.  Perhaps the file should look like:
>
> OGR_OBJLIST = ogrcore.obj \
>                ogrspatialreference.obj \

in the perfect 'gnu world' i'd oppose this solution, but since gdal is forced 
to support two build systems this could actually simply maintainance.

i'll give it a spin. how do i call the file? ogr.dep?

cheers,
alessandro


From warmerdam at pobox.com  Thu Jul 24 14:26:24 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] gdal to proj4 translation
In-Reply-To: <200307242009.37069.alexamici@tiscali.it>
References: <A183DF60AC72D5119B990002A5749CB30489169A@ROMADG-MAIL01> <3F1FFA4F.4060107@pobox.com> <200307242009.37069.alexamici@tiscali.it>
Message-ID: <3F2024D0.8060804@pobox.com>

Alessandro Amici wrote:

> Frank,
> 
> 
>>Note that instead of explicitly handling PROJ.4 strings, you can just
>>instantiate an OGRCoordinateTransformation object with two coordinate
>>systems and it will take care of creating the PROJ.4 representations
>>internally where needed.  I would suggest you review the OGR Projections
>>Tutorial:
>>
>>   http://gdal.velocet.ca/projects/opengis/ogrhtml/osr_tutorial.html
>>
> 
> 
> did i mention already that i love gdal and co.? especially the python 
> bindings?

Alessandro,

Good to hear.

> BTW wuold the projection '+proj=geocent' be a special case for gdal/ogr?

Limited geocentric support was recently introduced in PROJ.4.  I don't
believe that OGRSpatialReference handles the geocentric WKT case for
mapping to/from PROJ.4 or other uses.  It would be logical to add this
at some point, though I generally have no use for it.   It would be a bit
of work, perhaps 4 hours, to do this properly though.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Thu Jul 24 20:16:37 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] ADO driver based on OpenGIS SQL specification in OGR
 ?
In-Reply-To: <200307231650.0749@th00.opsion.fr>
References: <200307231650.0749@th00.opsion.fr>
Message-ID: <3F2076E5.3020404@pobox.com>

Jean wrote:
> The document ? OpenGIS Simple features specification for SQL rev1.1 ?
> describes the SQL92 implementation of features tables (www.opengis.org).
> 
> As the Microsoft jet database engine is free on the Windows' system,
> this could be a good way to have a Read/Write driver with a "performant"
> SQL engine.
> 
> Indeed, I believe that these specifications are enough to create an
> Read/Write OGR driver with Geometries stored in wkb format. Am i wrong ?
> and is it interessting in OGR ?

Jean,

Sorry for not replying sooner.  I have been working hard on a couple projects
trying to get them out of the way before I take a week off next week.

Implementing OGC Simple Features for SQL (including the functions and datatypes)
is a pretty big job even with an existing full function SQL implementation
to build on.  The Refractions guys did it for Postgres, but they had access
to the full source so they could update the database core.  That would really
be practical (as far as I know) with the jet engine.

We could implement support storing geometry in WKB in using Jet, and have
OGR understand this, but with the database just treating the geometry as
a generic binary field.  This would be somewhat useful, but not something
I am all the keen on spending alot of time on.  Doing this in a way that it
would work with any ODBC supported database might be worthwhile, and a bit
more general.  I would like to see this happen, but I don't know what all
the gotchas are.  It is also not something I have funded or large amounts of
free time to work on.   If it were to happen, it might well be done in such
a way as to be compatible with ESRI (or MapInfos?) use of access databasees
as lightweight spatial databases.

What we do have now is a solid PostGIS driver in OGR, and PostGIS implements
good and improving OGC compliance on a full featured database engine *with*
good spatial search performance.  PostGIS/Postgres works quite well on
Windows (as well as unix of course), and is free.  So I don't see a compelling
reason to search for another solution.

Now, I may have missed part of your point.  Is there some advantage to using
ADO?  Is the intent to implement on a database that is easily accessable from
VB?  Do you think the Jet database is more performant than Postgres?  It is,
no doubt, faster than the builtin OGR SQL implementation.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From morissette at dmsolutions.ca  Fri Jul 25 00:40:50 2003
From: morissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] MITAB 1.2.4 release - and new homepage
Message-ID: <3F20B4D2.80501@dmsolutions.ca>

Hi,

Sorry for the cross-posting, this is a note for users of the MITAB 
library that aren't following the MITAB users list.

Since yesterday MITAB has moved to a new home.  The new URL is

	http://mitab.maptools.org/

A redirection page has been put on the old website 
(http://pages.infinit.net/danmo/e00/index-mitab.html) but this site may 
be taken down any time, so please update your bookmarks.

Thanks

Daniel
-- 
------------------------------------------------------------
  Daniel Morissette               morissette@dmsolutions.ca
  DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------



From berserker_21 at hotmail.com  Fri Jul 25 04:24:12 2003
From: berserker_21 at hotmail.com (Adrien)
Date: Wed Nov 21 11:48:52 2007
Subject: [Gdal-dev] jp2kak compression
Message-ID: <Law14-OE50jTmn3JY3A0000260c@hotmail.com>

Hi,
I know that it is possible to specify the number of layers when compressing files in jpeg2000 using kakadu driver but can we choose the rates of each layers ?

thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030725/2cf64035/attachment.html
From alessandro_amici at telespazio.it  Fri Jul 25 04:34:29 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:53 2007
Subject: R: [Gdal-dev] gdal to proj4 translation
Message-ID: <A183DF60AC72D5119B990002A5749CB3048919C6@ROMADG-MAIL01>

> 
> > BTW wuold the projection '+proj=geocent' be a special case for gdal/ogr?
> 
> Limited geocentric support was recently introduced in PROJ.4.  I don't
> believe that OGRSpatialReference handles the geocentric WKT case for
> mapping to/from PROJ.4 or other uses.  It would be logical to add this
> at some point, though I generally have no use for it.   It would be a bit
> of work, perhaps 4 hours, to do this properly though.

no problem. gdal and osr will be used in the input layer, where we 
expect to handle DEMs with standard projections.
we've alredy implemented the transformation directly with proj4,
and the output of the 'geocent' data is done by hand (without gdal).

so i don't need any additional feature at the moment.

thanks,
alessandro

From jeanhri4 at ifrance.com  Fri Jul 25 05:55:51 2003
From: jeanhri4 at ifrance.com (Jean)
Date: Wed Nov 21 11:48:53 2007
Subject: TR : [Gdal-dev] ADO driver based on OpenGIS SQL specification in OGR ?
Message-ID: <200307250955.3359@th00.opsion.fr>

Jean wrote:
> The document ? OpenGIS Simple features specification for SQL rev1.1 ?
> describes the SQL92 implementation of features tables
(www.opengis.org).
> 
> As the Microsoft jet database engine is free on the Windows' system,
> this could be a good way to have a Read/Write driver with a
"performant"
> SQL engine.
> 
> Indeed, I believe that these specifications are enough to create an
> Read/Write OGR driver with Geometries stored in wkb format. Am i wrong
?
> and is it interessting in OGR ?

Franck wrote
>Jean,
>
>Sorry for not replying sooner.  I have been working hard on a couple
>projects
>trying to get them out of the way before I take a week off next week.
>
>Implementing OGC Simple Features for SQL (including the functions and
>datatypes)
>is a pretty big job even with an existing full function SQL
>implementation
>to build on.  The Refractions guys did it for Postgres, but they had
>access
>to the full source so they could update the database core.  That >would
really
>be practical (as far as I know) with the jet engine.
>
>We could implement support storing geometry in WKB in using Jet, and
>have
>OGR understand this, but with the database just treating the geometry
>as
>a generic binary field.  This would be somewhat useful, but not
>something
>I am all the keen on spending alot of time on.  Doing this in a way
>that it
>would work with any ODBC supported database might be worthwhile, and >a
bit
>more general.  I would like to see this happen, but I don't know what
>all
>the gotchas are.  It is also not something I have funded or large
>amounts of
>free time to work on.   If it were to happen, it might well be done >in
such
>a way as to be compatible with ESRI (or MapInfos?) use of access
>databasees
>as lightweight spatial databases.
>
>What we do have now is a solid PostGIS driver in OGR, and PostGIS
>implements
>good and improving OGC compliance on a full featured database engine
>*with*
>good spatial search performance.  PostGIS/Postgres works quite well on
>Windows (as well as unix of course), and is free.  So I don't see a
>compelling
>reason to search for another solution.
>
>Now, I may have missed part of your point.  Is there some advantage >to
using
>ADO?  Is the intent to implement on a database that is easily
>accessable from
>VB?  Do you think the Jet database is more performant than Postgres? 
>It is,
>no doubt, faster than the builtin OGR SQL implementation.
>
>Best regards,

About ADO : Althought less general than ODBC, ADO is much more
efficient. 

About Jet : The good point of such format is that it is
free(distribution). However, it is only a relational database that
implies that no query is available on binaries field (geometry). The
only query availables are based on simple attributes of features (long,
double .)
In my opinion jet was good to store wkb geometry to do queries on simple
attributes and to create relation beetwen feature (Foreign key/Primary
key).
It's indeed not enough to justify such a development.

About PostGIS : It looks perfect ! But the GNU GPL license of PostGis
raises a problem. Our software that would use PostGIS through OGR, will
must be distribued under GPL licence too. Or, we can not published our
source code(however no problem about PostGres's source code) neither
allowed our users to redistribute our software for free.
Is that the real application of the GNU GPL license ? I may be wrong.

Thanks for all,

Best regards,

Jean.


_____________________________________________________________________
MSN Messenger, nouvelle version ! Personnalisez vos messages, jouez en
ligne et communiquez en temps r?el par vid?o! http://ifrance.com/_reloc/m



From warmerdam at pobox.com  Fri Jul 25 08:40:05 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:53 2007
Subject: [Gdal-dev] jp2kak compression
In-Reply-To: <Law14-OE50jTmn3JY3A0000260c@hotmail.com>
References: <Law14-OE50jTmn3JY3A0000260c@hotmail.com>
Message-ID: <3F212525.6030703@pobox.com>

Adrien wrote:
> Hi,
> I know that it is possible to specify the number of layers when 
> compressing files in jpeg2000 using kakadu driver but can we choose the 
> rates of each layers ?

Adrien,

No, that is not currently accessable to the user.   We could conceivably
make it available as a creation time option but it isn't really clear to
me that this would have broad utility.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Fri Jul 25 08:47:11 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:53 2007
Subject: TR : [Gdal-dev] ADO driver based on OpenGIS SQL specification
 in OGR ?
In-Reply-To: <200307250955.3359@th00.opsion.fr>
References: <200307250955.3359@th00.opsion.fr>
Message-ID: <3F2126CF.6000704@pobox.com>

Jean wrote:
> About PostGIS : It looks perfect ! But the GNU GPL license of PostGis
> raises a problem. Our software that would use PostGIS through OGR, will
> must be distribued under GPL licence too. Or, we can not published our
> source code(however no problem about PostGres's source code) neither
> allowed our users to redistribute our software for free.
> Is that the real application of the GNU GPL license ? I may be wrong.

Jean,

My understanding is that the GPL in this case only applies to the PostGIS
module that loads into the Postgresql server process.  It does not impact
OGR or applications using OGR since they interact through with Postgres
but are not part of the same application.

If you were still concerned about this you might want to raise the issue
on the PostGIS list, but I really don't see that the license of PostGIS
would apply as broadly as affecting your application too.  Of course, it
is exactly these sorts of complications and concerns that I try to avoid
by using the MIT/X license.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dron at ak4719.spb.edu  Mon Jul 28 05:33:21 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:53 2007
Subject: [Gdal-dev] gdalwarptest, compilers and optimizations
Message-ID: <20030728093321.GA1055@ak4719.spb.edu>

Hello, folks,

I have made a few tests to discover how different compilers and
CPU-specific optimization options impact GDAL perfomance. I have used
gdalwarptest utility, because warp API is most CPU intensive.

Tests was performed on two ASTER datasets: Level 1B one (4200x4980 8-bit
integer) and DEM (2588x2526 floating point). Bicubic B-spline interpolation
scheme was used, because it is the hardest one from the four GDAL supported
schemes (-rcs option).

I'm not pretend to cover too many optimisation issues, it is mostly an
express analisis, but I have tried to achieve some level of
correctness.

I have a single AthlonXP 2000 processor (1670 MHz). GDAL was compiled
--with-libtiff=internal and --with-geotiff=internal.

There are results:

Compiler	Options						Time, s

ASTER Level 1B scene (4200x4980 8-bit integer)
gcc 2.95.4	-O3						41.211
gcc 2.95.4	-O3 -march=pentiumpro -mcpu=pentiumpro		31.812
gcc 3.0		-O3						24.836
gcc 3.0		-O3 -mcpu=athlon -march=athlon			22.986
gcc 3.2		-O3						21.415
gcc 3.2		-O3 -mcpu=athlon-xp -march=athlon-xp		19.832
gcc 3.3		-O3						21.236
gcc 3.3		-O3 -mcpu=athlon-xp -march=athlon-xp		20.023
icc 7.0		-O3 -mcpu=pentiumpro -march=pentiumiii		31.772

ASTER DEM scene (2588x2526 floating point)
gcc 2.95.4	-O3						19.191
gcc 2.95.4	-O3 -march=pentiumpro -mcpu=pentiumpro		14.616
gcc 3.0		-O3						14.787
gcc 3.0		-O3 -mcpu=athlon -march=athlon			12.547
gcc 3.2		-O3						14.084
gcc 3.2		-O3 -mcpu=athlon-xp -march=athlon-xp		11.223
gcc 3.3		-O3						13.262
gcc 3.3		-O3 -mcpu=athlon-xp -march=athlon-xp		11.209
icc 7.0		-O3 -mcpu=pentiumpro -march=pentiumiii		14.716

45 ++-------+--------+--------+--------+-------+--------+--------+-------++
   +        +        +        +        +       "ASTER Level 1B" ******    +
40 *****                                                                 ++
   *   *                                                                  |
35 *+  *                                                                 ++
   *   *                                                                  |
   *   **********                                                     *****
30 *+  *        *                                                     *  +*
   *   *        *                                                     *   *
25 *+  *        **********                                            *  +*
   *   *        *        *******************                          *   *
20 *+  *        *        *        *        ****************************  +*
   *   *        *        *        *        *        *        *        *   *
15 *+  *        *        *        *        *        *        *        *  +*
   *   *        *        *        *        *        *        *        *   *
   *   *        *        *        *        *        *        *        *   *
10 *+  *        *        *        *        *        *        *        *  +*
   *   *        *        *        *        *        *        *        *   *
 5 *+  *        *        *        *        *        *        *        *  +*
   *   *    +   *    +   *    +   *    +   *   +    *   +    *   +    *   *
 0 ************************************************************************
  2.95.4 2.95.4     3.0      3.0      3.2     3.2      3.3      3.3.   7.0
   -O3  -O3+cpu     -O3   -O3+cpu     -O3   -O3+cpu    -O3   -O3+cpu -O3+cpu

20 ++-------+--------+--------+--------+-------+--------+--------+-------++
   *****    +        +        +        +       "ASTER DEM" ******         +
   *   *                                                                  |
   *   *                                                                  |
   *   *                                                                  |
15 *+  *******************                                            *****
   *   *        *        *        **********                          *   *
   *   *        *        **********        *        **********        *   *
   *   *        *        *        *        *        *        *        *   *
   *   *        *        *        *        **********        **********   *
10 *+  *        *        *        *        *        *        *        *  +*
   *   *        *        *        *        *        *        *        *   *
   *   *        *        *        *        *        *        *        *   *
   *   *        *        *        *        *        *        *        *   *
   *   *        *        *        *        *        *        *        *   *
 5 *+  *        *        *        *        *        *        *        *  +*
   *   *        *        *        *        *        *        *        *   *
   *   *        *        *        *        *        *        *        *   *
   *   *        *        *        *        *        *        *        *   *
   *   *    +   *    +   *    +   *    +   *   +    *   +    *   +    *   *
 0 ************************************************************************
  2.95.4 2.95.4     3.0      3.0      3.2     3.2      3.3      3.3.   7.0
   -O3  -O3+cpu     -O3   -O3+cpu     -O3   -O3+cpu    -O3   -O3+cpu -O3+cpu

There is no big difference between modern GCCs from the 3.x branch, but
2.95.4 stays far behind. Intel Compiler also not very good choice (at
least for AMD CPUs and gdalwarp task).

So switching to the newest GCCs may be a very good factor to gain
additional perfomance and to save the time. Personally, I can't do this,
because I should link GDAL against proprietary C++ library which is
compiled with gcc 2.95, but CPU-specific optimizations shows a good
improvement even with this compiler.

					Regards,
					Andrey


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From nfarah at hotmail.com  Mon Jul 28 11:26:42 2003
From: nfarah at hotmail.com (N. Farah)
Date: Wed Nov 21 11:48:53 2007
Subject: [Gdal-dev] Exception thrown in GDALOpen() function
Message-ID: <BAY8-F126kSmLAztxc10000c304@hotmail.com>

Hi,

I have built GDAL-1.1.9 binaries on windows and start using it to open and 
read some tif files. After registering the requisted driver (here tif), i 
called "GDALOpen() to open the tif file. But an exception is thrown. After 
diging into code, the opening went fine, but the exception is risen in the 
destructor of GDALOpenInfo object. More exactly in the line "CPLFree( 
pszFilename )". My understanding is that pszFilename is allocated by 
duplicating the input file name passed in GDALOpen() function.

I'm wondering if there are some incompatibilities between the functions of 
memory allocation and memory deallocation..?

Or another reason that cause the failure of memory deallocation ?

Noureddine Farah

_________________________________________________________________
Tired of spam? Get advanced junk mail protection with MSN 8.  
http://join.msn.com/?page=features/junkmail


From ben at vterrain.org  Mon Jul 28 11:38:55 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:53 2007
Subject: [Gdal-dev] Exception thrown in GDALOpen() function
In-Reply-To: <BAY8-F126kSmLAztxc10000c304@hotmail.com>
Message-ID: <00f401c3551e$5b09bad0$f400fe0a@TOPP2>

Noureddine,

It is quite likely that you are using the debug-mode GDAL with your
release-mode applications, or vice-versa.  They must match.  This means
that in order to develop application in both debug and release mode, you
need to build GDAL both ways.

The changes to the makefiles to make this easy (including giving the
debug library a different name so that it can be distinguished at link
time) has been made by myself and others and has been offered on this
list, but has not yet been accepted into the GDAL build.

In the meantime, may i suggest that rather than build GDAL on Windows,
you simply use these precompiled binaries:

http://vterrain.org/dist/gdal-119-ntbin.zip  (2.3 MB)

It contains the necessary Debug and Release .lib/.dll

-Ben

> -----Original Message-----
> From: gdal-dev-admin@remotesensing.org 
> [mailto:gdal-dev-admin@remotesensing.org] On Behalf Of N. Farah
> Sent: Monday, July 28, 2003 10:27 AM
> To: gdal-dev@remotesensing.org
> Subject: [Gdal-dev] Exception thrown in GDALOpen() function
> 
> Hi,
> 
> I have built GDAL-1.1.9 binaries on windows and start using 
> it to open and 
> read some tif files. After registering the requisted driver 
> (here tif), i 
> called "GDALOpen() to open the tif file. But an exception is 
> thrown. After 
> diging into code, the opening went fine, but the exception is 
> risen in the 
> destructor of GDALOpenInfo object. More exactly in the line "CPLFree( 
> pszFilename )". My understanding is that pszFilename is allocated by 
> duplicating the input file name passed in GDALOpen() function.
> 
> I'm wondering if there are some incompatibilities between the 
> functions of 
> memory allocation and memory deallocation..?
> 
> Or another reason that cause the failure of memory deallocation ?
> 
> Noureddine Farah


From nfarah at hotmail.com  Mon Jul 28 14:12:36 2003
From: nfarah at hotmail.com (N. Farah)
Date: Wed Nov 21 11:48:53 2007
Subject: [Gdal-dev] Exception thrown in GDALOpen() function
Message-ID: <BAY8-F31sylnnokmQaq00011b95@hotmail.com>

Ben,

Thank you for your quick reply. I downloaded The binaries from the suggested 
link and started my application. I had an error about a missing dll: 
"xerces-c_2_1_0.dll". It's seems that binaries has been built with the 
Xerces feature.

I went back to rebuild GDAL-1.1.9 on debug mode, i had built the lib but the 
dll and used them in my project, I have an an access violation exception 
with VSIFClose( fp ) in the destructor of GDALOpenInfo object .

Noureddine Farah



Noureddine,

It is quite likely that you are using the debug-mode GDAL with your
release-mode applications, or vice-versa.  They must match.  This means
that in order to develop application in both debug and release mode, you
need to build GDAL both ways.

The changes to the makefiles to make this easy (including giving the
debug library a different name so that it can be distinguished at link
time) has been made by myself and others and has been offered on this
list, but has not yet been accepted into the GDAL build.

In the meantime, may i suggest that rather than build GDAL on Windows,
you simply use these precompiled binaries:

http://vterrain.org/dist/gdal-119-ntbin.zip  (2.3 MB)

It contains the necessary Debug and Release .lib/.dll

-Ben

>-----Original Message-----
>From: gdal-dev-admin@remotesensing.org 
>[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of N. Farah
>Sent: Monday, July 28, 2003 10:27 AM
>To: gdal-dev@remotesensing.org
>Subject: [Gdal-dev] Exception thrown in GDALOpen() function
>
>Hi,
>
>I have built GDAL-1.1.9 binaries on windows and start using it to open and 
>read some tif files. After registering the requisted driver (here tif), i 
>called "GDALOpen() to open the tif file. But an exception is thrown. After 
>diging into code, the opening went fine, but the exception is risen in the 
>destructor of GDALOpenInfo object. More exactly in the line "CPLFree( 
>pszFilename )". My understanding is that pszFilename is allocated by 
>duplicating the input file name passed in GDALOpen() function.
>
>I'm wondering if there are some incompatibilities between the functions of 
>memory allocation and memory deallocation..?
>
>Or another reason that cause the failure of memory deallocation ?
>
>Noureddine Farah

_________________________________________________________________
Protect your PC - get McAfee.com VirusScan Online  
http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963


From bmarchand at ara.com  Mon Jul 28 14:59:45 2003
From: bmarchand at ara.com (Brian Marchand)
Date: Wed Nov 21 11:48:53 2007
Subject: [Gdal-dev] creating shape files
Message-ID: <B3CB5AFD4126584AB4CF3DD45B267A530A4019@thorin.sed.ara.com>

Hello,

 

I am new at using the OGR classes in GDAL and I'm attempting to read a
shape file, change the projection, and then write the modified data to a
new file. When the new shape files get created the dbf file has no
fields in it. When I trace through the code I see that the dbf file gets
populated from a OGRFeatureDefn object in the OGRShapeLayer class. This
seems to get initialized when the layer is created but it never gets
set. Even after creating multiple features in the layer. Then when
reading the shape file it fails because the nRecords member in the
DBFHandle class is zero.

 

How do I apply a feature definition to a newly created layer?

 

Since the layer has an association to just one OGRFeatureDefn object,
can I assume that all the features in a layer are required to have the
same feature definition?

 

Thanks in advance,

 

Brian Marchand

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030728/360e5391/attachment.html
From ben at vterrain.org  Mon Jul 28 15:51:13 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:53 2007
Subject: [Gdal-dev] Exception thrown in GDALOpen() function
In-Reply-To: <BAY8-F31sylnnokmQaq00011b95@hotmail.com>
Message-ID: <010601c35541$9996add0$f400fe0a@TOPP2>

> -----Original Message-----
> From: N. Farah
> Sent: Monday, July 28, 2003 1:13 PM
> 
> missing dll: 
> "xerces-c_2_1_0.dll". It's seems that binaries has been built 
> with the Xerces feature.

Yes, this is easy to get from http://xml.apache.org/xerces-c/

> I went back to rebuild GDAL-1.1.9 on debug mode, i had built 
> the lib but the dll and used them in my project, I have an
> an access violation exception with VSIFClose( fp ) in the
> destructor of GDALOpenInfo object .

It also possible that is it is a problem with your application :) but
please do try our binaries first.

-Ben

> 
> In the meantime, may i suggest that rather than build GDAL on Windows,
> you simply use these precompiled binaries:
> 
http://vterrain.org/dist/gdal-119-ntbin.zip  (2.3 MB)

It contains the necessary Debug and Release .lib/.dll

-Ben


From nfarah at hotmail.com  Mon Jul 28 16:45:09 2003
From: nfarah at hotmail.com (N. Farah)
Date: Wed Nov 21 11:48:53 2007
Subject: [Gdal-dev] Exception thrown in GDALOpen() function
Message-ID: <BAY8-F102eZuZh60L3k0001220b@hotmail.com>

Ben,

My call to GDALOpen() is now working after having the binaries in debug mode 
as my program is in debug mode. I'm opening a tif file and translating it to 
erdase imagine for testing purposes (i'm aware that a program already exist 
for that operation). I'm kind of exploring GDAL now.

My steps are simple:
- Drivers registration (here tiff and imagine),
- GDALOpen()..
- GDALGetDriverByName()
- GDALCreateCopy().

All the steps went fine except the last one. The .img file is created and 
seems to be ok.
The exception is risen in the cleaning phase. GDALOpenInfo object is being 
destructed and an exception is risen when trying to close the .img file.

After a bit of investigation, i found out that .img is opened (in the source 
code) using VSIFOpenL function (in the HFAOpen() method), then the file 
pointer is passed back to the GDALOpenInfo  object.

Once the destructed of GDALOpenInfo  is called, the file is being closed 
with VSIFClose. In the imagine case the closing would be done using 
VSIFCloseL and not VSIFClose. I guess that this is what causing the 
exception. It appears that GDALOpenInfo assume that the file is always 
opened using VSIFOpen.


Noureddine Farah

_________________________________________________________________
Help STOP SPAM with the new MSN 8 and get 2 months FREE*   
http://join.msn.com/?page=features/junkmail


From nfarah at hotmail.com  Mon Jul 28 17:05:21 2003
From: nfarah at hotmail.com (N. Farah)
Date: Wed Nov 21 11:48:53 2007
Subject: [Gdal-dev] Exception thrown in GDALOpen() function
Message-ID: <BAY8-F508opyFvfkWL900005048@hotmail.com>

Ben,

I fixed the problem and no exception is risen now. Thanks for your useful 
replies.

Regards,

Noureddine Farah

_________________________________________________________________
Protect your PC - get McAfee.com VirusScan Online  
http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963


From alexamici at tiscali.it  Mon Jul 28 19:06:00 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:53 2007
Subject: [Gdal-dev] [ANN] new gdal debian packages
Message-ID: <200307290106.00786.alexamici@tiscali.it>

folks,

a new debian package is available at:
http://mentors.debian.net/debian/dists/unstable/main/binary-i386/gdal/

from the changelog:
  * New upstream release with a lot of new formats and features.
  * Fix the --libs option of the installed gdal-config.
  * Many correctness and style fixes to debian/rules. The aim is to have
    the source package to build cleanly on woody as well.
  * Change the build dependencies to present a woody alternative to sid-only
    packages.

the bigger news is that the source package now supports woody out-of-the box 
(with just minor warnings).
the suggested way to build the debs from source is:
# apt-get instal devscripts
$ tar -xzvf gda-1.1.9.tar.gz
$ gunzip -c gdal_1.1.9-1.diff.gz | patch -p0
$ cd gdal-1.1.9
$ debuild -us -uc
(if debuild complains about missing depencencies
# apt-get install whatever-is-missing
and retry)
# dpkg -i ../*gdal*.deb

cheers,
alessandro


From bmarchand at ara.com  Tue Jul 29 08:29:34 2003
From: bmarchand at ara.com (Brian Marchand)
Date: Wed Nov 21 11:48:53 2007
Subject: [Gdal-dev] creating shape files
Message-ID: <B3CB5AFD4126584AB4CF3DD45B267A530A7FD3@thorin.sed.ara.com>

I'm going to answer my own questions starting with the second one. Yes
it appears that all features in a layer must all be using the same
feature definition. You can set this in the OGRLayer by, iterating
through the field definitions of the appropriate feature definition and
calling the CreateField method of the OGRLayer with each field
definition. This must be done before calling the CreateFeature method of
the layer otherwise the fields of the feature will not be added to the
dbf file. If this is not the preferred way to handle writing out
features please let me know.

 

Brian 

 

-----Original Message-----
From: Brian Marchand 
Sent: Monday, July 28, 2003 3:00 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] creating shape files

 

Hello,

 

I am new at using the OGR classes in GDAL and I'm attempting to read a
shape file, change the projection, and then write the modified data to a
new file. When the new shape files get created the dbf file has no
fields in it. When I trace through the code I see that the dbf file gets
populated from a OGRFeatureDefn object in the OGRShapeLayer class. This
seems to get initialized when the layer is created but it never gets
set. Even after creating multiple features in the layer. Then when
reading the shape file it fails because the nRecords member in the
DBFHandle class is zero.

 

How do I apply a feature definition to a newly created layer?

 

Since the layer has an association to just one OGRFeatureDefn object,
can I assume that all the features in a layer are required to have the
same feature definition?

 

Thanks in advance,

 

Brian Marchand

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030729/5900c3b0/attachment.html
From fulton at cmu.edu  Tue Jul 29 10:51:39 2003
From: fulton at cmu.edu (Sean Fulton)
Date: Wed Nov 21 11:48:53 2007
Subject: [Gdal-dev] GDAL on OS X
Message-ID: <28D95DC4-C1D4-11D7-B59C-003065D5F140@cmu.edu>

I'm trying to compile GDAL on OS X. The compile seems to fail at the 
linking stage. Can anyone suggest what the problem might be?

Thanks.

	Sean

ranlib ./gdal.a
ranlib: file: ./gdal.a(pnggccrd.o) has no symbols
ranlib: file: ./gdal.a(pngvcrd.o) has no symbols
ranlib: file: ./gdal.a(tif_pixarlog.o) has no symbols
ranlib: file: ./gdal.a(cpl_vsil_unix_stdio_64.o) has no symbols
make ./libgdal.1.1.dylib
gcc -dynamiclib  ./frmts/o/*.o ./gcore/*.o ./port/*.o ./alg/*.o 
./ogr/ogrct.o ./ogr/ogr_opt.o ./ogr/ogr_fromepsg.o 
./ogr/ogr_srs_validate.o ./ogr/ogrutils.o ./ogr/ogr_srs_proj4.o 
./ogr/ograssemblepolygon.o ./ogr/ogr_api.o 
./ogr/ogrsf_frmts/generic/ogrregisterall.o ./ogr/ogrfeaturestyle.o 
./ogr/ogrsf_frmts/ogrsf_frmts.a   ./gdal.a ./ogr/ogr.a ./gdal.a 
./port/cpl.a -lz -lm -lm \
         -o ./libgdal.1.1.dylib
ld: Undefined symbols:
/usr/bin/libtool: internal link edit command failed
vtable for __cxxabiv1::__class_type_info
vtable for __cxxabiv1::__si_class_type_info
operator delete(void*)
operator new(unsigned long)
___gxx_personality_v0
operator delete[](void*)
operator new[](unsigned long)
___cxa_pure_virtual
vtable for __cxxabiv1::__vmi_class_type_info
make[1]: *** [libgdal.1.1.dylib] Error 1
make: *** [check-lib] Error 2


From alexamici at tiscali.it  Tue Jul 29 10:58:19 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:53 2007
Subject: [Gdal-dev] static libraries revamped
Message-ID: <200307291658.19195.alexamici@tiscali.it>


-------------- next part --------------
An embedded message was scrubbed...
From: Alessandro Amici <alexamici@tiscali.it>
Subject: Re: [Gdal-dev] static libraries revamped
Date: Tue, 29 Jul 2003 16:06:31 +0200
Size: 1202
Url: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030729/b1baed16/attachment.mht
From alexamici at tiscali.it  Wed Jul 30 18:55:10 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:53 2007
Subject: [Gdal-dev] static libraries revamped
In-Reply-To: <200307291658.19195.alexamici@tiscali.it>
References: <200307291658.19195.alexamici@tiscali.it>
Message-ID: <200307310055.10285.alexamici@tiscali.it>

hi,

the last possibly-traumatic bit in the static libraries cleanup is in into cvs 
now: cpl.a is no more, all cpl* objects are into libgdal.a.

cheers,
alessandro


From Matt.Wilkie at gov.yk.ca  Thu Jul 31 16:03:03 2003
From: Matt.Wilkie at gov.yk.ca (Matt.Wilkie)
Date: Wed Nov 21 11:48:53 2007
Subject: [Gdal-dev] Windows binary w/ ECW write support?
Message-ID: <6DD7370C9452D31192A10008C75D07531A0A01DA@raptor.ynet.gov.yk.ca>

Hi,

Does anybody have a windows binary (native win32 or cygwin) of the gdal
utilities with ECW-write support enabled that I can download?

Thanks in advance,

-matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
--------------------------------------------  

