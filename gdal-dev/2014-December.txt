From even.rouault at spatialys.com  Mon Dec  1 10:48:32 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 1 Dec 2014 19:48:32 +0100
Subject: [gdal-dev] Motion: Adopt RFC 51: RasterIO() improvements :
	resampling and progress callback
Message-ID: <201412011948.32704.even.rouault@spatialys.com>

Hi,

I think that the points raised in the discussion have been answered.

Since the call for discussion, I've made a change in the RFC and proposed 
implementation so that the GDALRasterIOExtraArg* psExtraArg argument of 
RasterIO() remains optional for out-of-tree C++ code, but compulsory for in-
tree code :
http://trac.osgeo.org/gdal/wiki/rfc51_rasterio_resampling_progress?action=diff&version=4&old_version=3
https://github.com/rouault/gdal2/commit/31a814acd091c93bd498b4b8c219b83bb40bb3ae

So:

Motion : I move to adopt RFC 51: RasterIO() improvements : resampling and 
progress callback

http://trac.osgeo.org/gdal/wiki/rfc51_rasterio_resampling_progress

Starting with my +1

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From warmerdam at pobox.com  Mon Dec  1 11:37:33 2014
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 1 Dec 2014 11:37:33 -0800
Subject: [gdal-dev] Motion: Adopt RFC 51: RasterIO() improvements :
 resampling and progress callback
In-Reply-To: <201412011948.32704.even.rouault@spatialys.com>
References: <201412011948.32704.even.rouault@spatialys.com>
Message-ID: <CA+YzLBd8TchxYzpraOYSo74kbA6jGrBhoRAgyPVQFDyn6kLUuQ@mail.gmail.com>

+1 Frank


On Mon, Dec 1, 2014 at 10:48 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> I think that the points raised in the discussion have been answered.
>
> Since the call for discussion, I've made a change in the RFC and proposed
> implementation so that the GDALRasterIOExtraArg* psExtraArg argument of
> RasterIO() remains optional for out-of-tree C++ code, but compulsory for
> in-
> tree code :
>
> http://trac.osgeo.org/gdal/wiki/rfc51_rasterio_resampling_progress?action=diff&version=4&old_version=3
>
> https://github.com/rouault/gdal2/commit/31a814acd091c93bd498b4b8c219b83bb40bb3ae
>
> So:
>
> Motion : I move to adopt RFC 51: RasterIO() improvements : resampling and
> progress callback
>
> http://trac.osgeo.org/gdal/wiki/rfc51_rasterio_resampling_progress
>
> Starting with my +1
>
> Best regards,
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141201/f09328af/attachment.html>

From jukka.rahkonen at mmmtike.fi  Mon Dec  1 12:53:05 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 1 Dec 2014 20:53:05 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Motion=3A_Adopt_RFC_51=3A_RasterIO=28=29_imp?=
	=?utf-8?q?rovements_=3A=09resampling_and_progress_callback?=
References: <201412011948.32704.even.rouault@spatialys.com>
Message-ID: <loom.20141201T215232-81@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

 
> Motion : I move to adopt RFC 51: RasterIO() improvements : resampling and 
> progress callback
> 
> http://trac.osgeo.org/gdal/wiki/rfc51_rasterio_resampling_progress
> 
> Starting with my +1

+1

-Jukka Rahkonen-



From howard at hobu.co  Tue Dec  2 07:16:15 2014
From: howard at hobu.co (Howard Butler)
Date: Tue, 2 Dec 2014 09:16:15 -0600
Subject: [gdal-dev] Motion: Adopt RFC 51: RasterIO() improvements
	:	resampling and progress callback
In-Reply-To: <loom.20141201T215232-81@post.gmane.org>
References: <201412011948.32704.even.rouault@spatialys.com>
	<loom.20141201T215232-81@post.gmane.org>
Message-ID: <7628C00C-F397-4E6F-B519-6B12F0872454@hobu.co>


> On Dec 1, 2014, at 2:53 PM, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi> wrote:
> 
> Even Rouault <even.rouault <at> spatialys.com> writes:
> 
> 
>> Motion : I move to adopt RFC 51: RasterIO() improvements : resampling and 
>> progress callback
>> 
>> http://trac.osgeo.org/gdal/wiki/rfc51_rasterio_resampling_progress
>> 
>> Starting with my +1
> 
> +1

+1

From dmorissette at mapgears.com  Tue Dec  2 09:40:44 2014
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue, 02 Dec 2014 12:40:44 -0500
Subject: [gdal-dev] Motion: Adopt RFC 51: RasterIO() improvements
 :	resampling and progress callback
In-Reply-To: <7628C00C-F397-4E6F-B519-6B12F0872454@hobu.co>
References: <201412011948.32704.even.rouault@spatialys.com>	<loom.20141201T215232-81@post.gmane.org>
	<7628C00C-F397-4E6F-B519-6B12F0872454@hobu.co>
Message-ID: <547DF99C.90601@mapgears.com>

On 14-12-02 10:16 AM, Howard Butler wrote:
>
>> On Dec 1, 2014, at 2:53 PM, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi> wrote:
>>
>> Even Rouault <even.rouault <at> spatialys.com> writes:
>>
>>
>>> Motion : I move to adopt RFC 51: RasterIO() improvements : resampling and
>>> progress callback
>>>
>>> http://trac.osgeo.org/gdal/wiki/rfc51_rasterio_resampling_progress
>>>
>>> Starting with my +1
>>
>> +1
>
> +1

+1

Daniel
-- 
Daniel Morissette
T: +1 418-696-5056 #201
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From szekerest at gmail.com  Tue Dec  2 11:14:56 2014
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue, 2 Dec 2014 20:14:56 +0100
Subject: [gdal-dev] Motion: Adopt RFC 51: RasterIO() improvements :
 resampling and progress callback
In-Reply-To: <201412011948.32704.even.rouault@spatialys.com>
References: <201412011948.32704.even.rouault@spatialys.com>
Message-ID: <CACALY+SgHDQpVVuRwdLancWktde+YecFwY32k63NTK-wf7e2Ng@mail.gmail.com>

+1

Tamas


2014-12-01 19:48 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:

> Hi,
>
> I think that the points raised in the discussion have been answered.
>
> Since the call for discussion, I've made a change in the RFC and proposed
> implementation so that the GDALRasterIOExtraArg* psExtraArg argument of
> RasterIO() remains optional for out-of-tree C++ code, but compulsory for
> in-
> tree code :
>
> http://trac.osgeo.org/gdal/wiki/rfc51_rasterio_resampling_progress?action=diff&version=4&old_version=3
>
> https://github.com/rouault/gdal2/commit/31a814acd091c93bd498b4b8c219b83bb40bb3ae
>
> So:
>
> Motion : I move to adopt RFC 51: RasterIO() improvements : resampling and
> progress callback
>
> http://trac.osgeo.org/gdal/wiki/rfc51_rasterio_resampling_progress
>
> Starting with my +1
>
> Best regards,
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141202/6d5b55be/attachment.html>

From hrz at geodata.soton.ac.uk  Wed Dec  3 01:31:03 2014
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Wed, 3 Dec 2014 09:31:03 +0000
Subject: [gdal-dev] Problem using gdalbuildvrt with a large number of source
	datasets
Message-ID: <547ED857.4020300@geodata.soton.ac.uk>

Hello,

I've come up against a problem with `gdalbuildvrt` taking a long time to 
create
a VRT when it is passed a large number of source datasets. I am trying 
to create
a VRT file for a zoom level in a TMS structure containing JPEG tiles.  The
command I'm using is:

gdalbuildvrt output.vrt `find ./tiles/18 -iname *.jpg -printf "%p "`

where the number of tiles is:

$ find ./tiles/18 -iname *.jpg | wc -l
767104

The processing seemed to progress reasonably quickly with the progress bar
outputing '0... etc ...100 - done'.  However `gdalbuildvrt` continued 
running
until I killed it 8 hours later.  Looking at `output.vrt` just before I 
killed
the program showed it remained empty (0 bytes).

Before digging any deeper is there something I'm missing? Am I expecting too
much of `gdalbuildvrt`, or indeed the VRT format, in processing this 
many source
datasets?

Conceptually in this instance it seems as if it would be useful for a 
VRT file
(and `gdalbuildvrt`) to reference the output of `gdaltindex` or something
similar.  I'm not sure how efficiently source datasets are indexed in 
VRTs and
whether this might be contributing to the problem?

Best regards,

Homme Zwaagstra

From jukka.rahkonen at mmmtike.fi  Wed Dec  3 02:13:12 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 3 Dec 2014 10:13:12 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Problem_using_gdalbuildvrt_with_a_large_numb?=
	=?utf-8?q?er_of_source=09datasets?=
References: <547ED857.4020300@geodata.soton.ac.uk>
Message-ID: <loom.20141203T110509-228@post.gmane.org>

Homme Zwaagstra <hrz <at> geodata.soton.ac.uk> writes:

> 
> Hello,
> 
> I've come up against a problem with `gdalbuildvrt` taking a long time to 
> create
> a VRT when it is passed a large number of source datasets. I am trying 
> to create
> a VRT file for a zoom level in a TMS structure containing JPEG tiles.  The
> command I'm using is:
> 
> gdalbuildvrt output.vrt `find ./tiles/18 -iname *.jpg -printf "%p "`
> 
> where the number of tiles is:
> 
> $ find ./tiles/18 -iname *.jpg | wc -l
> 767104

I would say that you are doing all wrong thing. First, the jpeg tiles in
tile service directory structure are not referenced with world files (.jgw)
or anything and your .vrt file would be useless.

The right thing to do is to study the file naming schema that the cache is
using. When the schema is known the right tile can be found directly because
the logic knows how the tile directory structure is like and which names are
used for the tiles. If it is an OSGeo TMS schema it is described here
http://wiki.osgeo.org/wiki/Tile_Map_Service_Specification#TileMapService_Resource

If it is using the Google/Bing tile naming schema then you can find examples
here http://www.gdal.org/frmt_wms.html. But if it is a GeoWebCache tile
cache you may be out of luck because I haven't seen so far any configuration
file that would make GWC tilecache usable for GDAL.

-Jukka Rahkonen-


From even.rouault at spatialys.com  Wed Dec  3 02:24:07 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 3 Dec 2014 11:24:07 +0100
Subject: [gdal-dev] Problem using gdalbuildvrt with a large number of
	source datasets
In-Reply-To: <547ED857.4020300@geodata.soton.ac.uk>
References: <547ED857.4020300@geodata.soton.ac.uk>
Message-ID: <201412031124.07923.even.rouault@spatialys.com>

Homme,

> 
> I've come up against a problem with `gdalbuildvrt` taking a long time to
> create
> a VRT when it is passed a large number of source datasets. I am trying
> to create
> a VRT file for a zoom level in a TMS structure containing JPEG tiles.  The
> command I'm using is:
> 
> gdalbuildvrt output.vrt `find ./tiles/18 -iname *.jpg -printf "%p "`
> 
> where the number of tiles is:
> 
> $ find ./tiles/18 -iname *.jpg | wc -l
> 767104
> 
> The processing seemed to progress reasonably quickly with the progress bar
> outputing '0... etc ...100 - done'.  However `gdalbuildvrt` continued
> running
> until I killed it 8 hours later.  Looking at `output.vrt` just before I
> killed
> the program showed it remained empty (0 bytes).

I've looked up a bit at the code, and I spotted a potential performance 
problem when serialing the in-memory VRT into the XML with a big number of 
sources. I've just committed an improvement into trunk that will make the 
complexity of source serialization linear instead of quadratic.

> 
> Before digging any deeper is there something I'm missing? Am I expecting
> too much of `gdalbuildvrt`, or indeed the VRT format, in processing this
> many source
> datasets?
> 
> Conceptually in this instance it seems as if it would be useful for a
> VRT file
> (and `gdalbuildvrt`) to reference the output of `gdaltindex` or something
> similar.  I'm not sure how efficiently source datasets are indexed in
> VRTs and
> whether this might be contributing to the problem?

There's no indexing in VRT. So yes for that big number of sources, there might 
be performance problems since each RasterIO() request will have to go test if 
each source interstects the requested area of interest. Adding an in-memory 
spatial index after opening the VRT would likely be possible, provided that 
the non neglectable size of the VRT/XML doesn't make opening it too slow. That 
depends on the use cases.

Yes, perhaps referencing a shapefile tile index could be a possible 
enhancement.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From landa.martin at gmail.com  Wed Dec  3 02:23:15 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 3 Dec 2014 11:23:15 +0100
Subject: [gdal-dev] shp - inconsistent extent
Message-ID: <CA+Ei1OcoD2S+iaubFQmcnjgMAZtDnH_LsxNrRFatBavKF9E10g@mail.gmail.com>

Hi all,

some shapefiles produced by my scripts based on GDAL library are hard
to display in Esri ArcGIS. It complains something about "Inconsistent
extent". Any idea what is missing in my script to avoid this warning?

Thanks a lot in advance! Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.eu/mentors/landa

From hrz at geodata.soton.ac.uk  Wed Dec  3 02:24:22 2014
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Wed, 3 Dec 2014 10:24:22 +0000
Subject: [gdal-dev] Problem using gdalbuildvrt with a large number of
 source datasets
In-Reply-To: <loom.20141203T110509-228@post.gmane.org>
References: <547ED857.4020300@geodata.soton.ac.uk>
	<loom.20141203T110509-228@post.gmane.org>
Message-ID: <547EE4D6.4000102@geodata.soton.ac.uk>

Hello Jukka,

On 03/12/14 10:13, Jukka Rahkonen wrote:
> Homme Zwaagstra <hrz  <at> geodata.soton.ac.uk> writes:
 >
 >>
 >> Hello,
 >>
 >> I've come up against a problem with `gdalbuildvrt` taking a long 
time to
 >> create
 >> a VRT when it is passed a large number of source datasets. I am trying
 >> to create
 >> a VRT file for a zoom level in a TMS structure containing JPEG 
tiles.  The
 >> command I'm using is:
 >>
 >> gdalbuildvrt output.vrt `find ./tiles/18 -iname *.jpg -printf "%p "`
 >>
 >> where the number of tiles is:
 >>
 >> $ find ./tiles/18 -iname *.jpg | wc -l
 >> 767104
 >
 > I would say that you are doing all wrong thing. First, the jpeg tiles in
 > tile service directory structure are not referenced with world files 
(.jgw)
 > or anything and your .vrt file would be useless.

Sorry, I should have said: each of the JPEG tiles has an accompanying
`*.aux.xml` file.  The files were created under the hood by GDAL using
<https://github.com/geo-data/cesium-terrain-builder#ctb-tile>.

> The right thing to do is to  study the file naming schema that the cache is
 > using. When the schema is known the right tile can be found directly 
because
 > the logic knows how the tile directory structure is like and which 
names are
 > used for the tiles. If it is an OSGeo TMS schema it is described here
 > 
http://wiki.osgeo.org/wiki/Tile_Map_Service_Specification#TileMapService_Resource

The on-disk tiling scheme conforms to
<http://wiki.osgeo.org/wiki/Tile_Map_Service_Specification#global-mercator> 
with
the tile directory structure matching `{zoom}/{x}/{y}.jpg`.

Best regards,

Homme

>
 > If it is using the Google/Bing tile naming schema then you can find 
examples
 > here http://www.gdal.org/frmt_wms.html. But if it is a GeoWebCache tile
 > cache you may be out of luck because I haven't seen so far any 
configuration
 > file that would make GWC tilecache usable for GDAL.
 >
 > -Jukka Rahkonen-
 >
 > _______________________________________________
 > gdal-dev mailing list
 > gdal-dev at lists.osgeo.org
 > http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141203/51dedad7/attachment.html>

From hrz at geodata.soton.ac.uk  Wed Dec  3 02:31:21 2014
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Wed, 3 Dec 2014 10:31:21 +0000
Subject: [gdal-dev] Problem using gdalbuildvrt with a large number of
 source datasets
In-Reply-To: <201412031124.07923.even.rouault@spatialys.com>
References: <547ED857.4020300@geodata.soton.ac.uk>
	<201412031124.07923.even.rouault@spatialys.com>
Message-ID: <547EE679.9070007@geodata.soton.ac.uk>

Even,

On 03/12/14 10:24, Even Rouault wrote:
> Homme,
 >
 >>
 >> I've come up against a problem with `gdalbuildvrt` taking a long time to
 >> create
 >> a VRT when it is passed a large number of source datasets. I am trying
 >> to create
 >> a VRT file for a zoom level in a TMS structure containing JPEG 
tiles.  The
 >> command I'm using is:
 >>
 >> gdalbuildvrt output.vrt `find ./tiles/18 -iname *.jpg -printf "%p "`
 >>
 >> where the number of tiles is:
 >>
 >> $ find ./tiles/18 -iname *.jpg | wc -l
 >> 767104
 >>
 >> The processing seemed to progress reasonably quickly with the 
progress bar
 >> outputing '0... etc ...100 - done'.  However `gdalbuildvrt` continued
 >> running
 >> until I killed it 8 hours later.  Looking at `output.vrt` just before I
 >> killed
 >> the program showed it remained empty (0 bytes).
 >
 > I've looked up a bit at the code, and I spotted a potential performance
 > problem when serialing the in-memory VRT into the XML with a big 
number of
 > sources. I've just committed an improvement into trunk that will make 
the
 > complexity of source serialization linear instead of quadratic.

Many thanks! I will give it a spin and report back...

>
 >>
 >> Before digging any deeper is there something I'm missing? Am I expecting
 >> too much of `gdalbuildvrt`, or indeed the VRT format, in processing this
 >> many source
 >> datasets?
 >>
 >> Conceptually in this instance it seems as if it would be useful for a
 >> VRT file
 >> (and `gdalbuildvrt`) to reference the output of `gdaltindex` or 
something
 >> similar.  I'm not sure how efficiently source datasets are indexed in
 >> VRTs and
 >> whether this might be contributing to the problem?
 >
 > There's no indexing in VRT. So yes for that big number of sources, 
there might
 > be performance problems since each RasterIO() request will have to go 
test if
 > each source interstects the requested area of interest. Adding an 
in-memory
 > spatial index after opening the VRT would likely be possible, 
provided that
 > the non neglectable size of the VRT/XML doesn't make opening it too 
slow. That
 > depends on the use cases.
 >
 > Yes, perhaps referencing a shapefile tile index could be a possible
 > enhancement.

Ok, that's useful to know, thanks.  Unless I hear back otherwise, I'll 
submit an
enhancement request on the issue tracker to bookmark the issue.

Best regards,

Homme

>
 >
 > Even
 >


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141203/2bb831ff/attachment-0001.html>

From landa.martin at gmail.com  Wed Dec  3 02:34:37 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 3 Dec 2014 11:34:37 +0100
Subject: [gdal-dev] shp - inconsistent extent
In-Reply-To: <CA+Ei1OcoD2S+iaubFQmcnjgMAZtDnH_LsxNrRFatBavKF9E10g@mail.gmail.com>
References: <CA+Ei1OcoD2S+iaubFQmcnjgMAZtDnH_LsxNrRFatBavKF9E10g@mail.gmail.com>
Message-ID: <CA+Ei1Od1aRKtFCF8viFyQ1Cmq3Qf-y1zDDjsfN_aT9dwW3K0rg@mail.gmail.com>

Hi,

2014-12-03 11:23 GMT+01:00 Martin Landa <landa.martin at gmail.com>:
> some shapefiles produced by my scripts based on GDAL library are hard
> to display in Esri ArcGIS. It complains something about "Inconsistent
> extent". Any idea what is missing in my script to avoid this warning?

BTW, ogrinfo reports reasonable extent for this layer...

Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.eu/mentors/landa

From even.rouault at spatialys.com  Wed Dec  3 02:44:30 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 3 Dec 2014 11:44:30 +0100
Subject: [gdal-dev] shp - inconsistent extent
In-Reply-To: <CA+Ei1OcoD2S+iaubFQmcnjgMAZtDnH_LsxNrRFatBavKF9E10g@mail.gmail.com>
References: <CA+Ei1OcoD2S+iaubFQmcnjgMAZtDnH_LsxNrRFatBavKF9E10g@mail.gmail.com>
Message-ID: <201412031144.30492.even.rouault@spatialys.com>

Le mercredi 03 d?cembre 2014 11:23:15, Martin Landa a ?crit :
> Hi all,
> 
> some shapefiles produced by my scripts based on GDAL library are hard
> to display in Esri ArcGIS. It complains something about "Inconsistent
> extent". Any idea what is missing in my script to avoid this warning?

Martin,

If your script only does CreateFeature() to build a shapefile from scratch, 
then it is really annoying that ArcGIS protests, and we should fix that. But no 
idea what would cause it.

If your script does edits with SetFeature() or DeleteFeature(), then the 
extent advertized in the shapefile might be larger than the actual extent of 
the shapes in it. I'm not sure how ArcGIS could detect that without iterating 
over the whole shapefile to make the comparison. If you're in that case, you 
can try issuing "RECOMPUTE EXTENT ON layername" with ExecuteSQL() / ogrinfo -
sql. See "Spatial extent" paragraph of http://gdal.org/drv_shapefile.html

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From landa.martin at gmail.com  Wed Dec  3 02:42:29 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 3 Dec 2014 11:42:29 +0100
Subject: [gdal-dev] shp - inconsistent extent
In-Reply-To: <CA+Ei1Od1aRKtFCF8viFyQ1Cmq3Qf-y1zDDjsfN_aT9dwW3K0rg@mail.gmail.com>
References: <CA+Ei1OcoD2S+iaubFQmcnjgMAZtDnH_LsxNrRFatBavKF9E10g@mail.gmail.com>
	<CA+Ei1Od1aRKtFCF8viFyQ1Cmq3Qf-y1zDDjsfN_aT9dwW3K0rg@mail.gmail.com>
Message-ID: <CA+Ei1OcwrZ24Fu0z=tiyp+xFoY0Vno8Y0eK+TzBc8zq5sUR5iw@mail.gmail.com>

2014-12-03 11:34 GMT+01:00 Martin Landa <landa.martin at gmail.com>:
> BTW, ogrinfo reports reasonable extent for this layer...

some progress: there were some features without geometry, I removed
them from the output, but it didn't help...

Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.eu/mentors/landa

From landa.martin at gmail.com  Wed Dec  3 02:43:28 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 3 Dec 2014 11:43:28 +0100
Subject: [gdal-dev] shp - inconsistent extent
In-Reply-To: <201412031144.30492.even.rouault@spatialys.com>
References: <CA+Ei1OcoD2S+iaubFQmcnjgMAZtDnH_LsxNrRFatBavKF9E10g@mail.gmail.com>
	<201412031144.30492.even.rouault@spatialys.com>
Message-ID: <CA+Ei1Ofd-1J52Ou6_dREPxF_KriVpTVRUp2QNgUJnbHmFCiLcA@mail.gmail.com>

2014-12-03 11:44 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:
> If your script only does CreateFeature() to build a shapefile from scratch,
> then it is really annoying that ArcGIS protests, and we should fix that. But no
> idea what would cause it.

it creates shapefile from scratch... Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.eu/mentors/landa

From even.rouault at spatialys.com  Wed Dec  3 02:49:39 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 3 Dec 2014 11:49:39 +0100
Subject: [gdal-dev] shp - inconsistent extent
In-Reply-To: <CA+Ei1Ofd-1J52Ou6_dREPxF_KriVpTVRUp2QNgUJnbHmFCiLcA@mail.gmail.com>
References: <CA+Ei1OcoD2S+iaubFQmcnjgMAZtDnH_LsxNrRFatBavKF9E10g@mail.gmail.com>
	<201412031144.30492.even.rouault@spatialys.com>
	<CA+Ei1Ofd-1J52Ou6_dREPxF_KriVpTVRUp2QNgUJnbHmFCiLcA@mail.gmail.com>
Message-ID: <201412031149.39773.even.rouault@spatialys.com>

Le mercredi 03 d?cembre 2014 11:43:28, Martin Landa a ?crit :
> 2014-12-03 11:44 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:
> > If your script only does CreateFeature() to build a shapefile from
> > scratch, then it is really annoying that ArcGIS protests, and we should
> > fix that. But no idea what would cause it.
> 
> it creates shapefile from scratch... Martin

Hum, could you "fix" / "repair" / "save as" the shapefile with ArcGIS, whatever 
it offers so it can generate a shapefile on which it doesn't protest anymore ? 
That way we could compare the difference between shapefiles. The 100 first bytes 
of .shp and .shx must be the key.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Robert.Langford at salford.gov.uk  Wed Dec  3 04:57:05 2014
From: Robert.Langford at salford.gov.uk (Langford, Robert)
Date: Wed, 3 Dec 2014 12:57:05 +0000
Subject: [gdal-dev] Using ogrinfo and ogr2ogr Behind Proxy
Message-ID: <e033f56257c74e2eb1a89ef15b9a6ac3@EX13-P-MBX10-W.salford.gov.uk>

All,

I'm wondering how I can access a WFS with ogrinfo and ogr2ogr from behind my proxy at work.

I've searched on Google and have found reference to "GDAL_HTTP_PROXY=host:port" and "GDAL_HTTP_PROXYUSERPWD=user:pass"

But I'm not sure how I'd use them from the CLI?

Any help would be greatly appreciated.

Thanks,

Rob




DISCLAIMER: The information contained in this communication/message from Robert.Langford at salford.gov.uk sent on Wed Dec  3 12:57:06 2014 is confidential. It is intended solely for the addressee(s) gdal-dev at lists.osgeo.org

Access to this message by anyone else is unauthorised. If you are not the intended recipient, any disclosure, copying, or distribution of the message, or any action or omission taken by you in reliance on it, is prohibited and may be unlawful.
As a public body, Salford City Council may be required to disclose this email [or any response to it] under the Freedom of Information Act 2000, unless the information in it is covered by one of the exemptions in the Act. 
Please immediately contact the sender, Robert.Langford at salford.gov.uk if you have received this message in error. 

For the full disclaimer please access http://www.salford.gov.uk/e-mail.  Thank you.


From even.rouault at spatialys.com  Wed Dec  3 05:09:54 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 3 Dec 2014 14:09:54 +0100
Subject: [gdal-dev] Using ogrinfo and ogr2ogr Behind Proxy
In-Reply-To: <e033f56257c74e2eb1a89ef15b9a6ac3@EX13-P-MBX10-W.salford.gov.uk>
References: <e033f56257c74e2eb1a89ef15b9a6ac3@EX13-P-MBX10-W.salford.gov.uk>
Message-ID: <201412031409.54609.even.rouault@spatialys.com>

Le mercredi 03 d?cembre 2014 13:57:05, Langford, Robert a ?crit :
> All,
> 
> I'm wondering how I can access a WFS with ogrinfo and ogr2ogr from behind
> my proxy at work.
> 
> I've searched on Google and have found reference to
> "GDAL_HTTP_PROXY=host:port" and "GDAL_HTTP_PROXYUSERPWD=user:pass"
> 
> But I'm not sure how I'd use them from the CLI?

Rob,

See http://trac.osgeo.org/gdal/wiki/ConfigOptions

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Robert.Langford at salford.gov.uk  Wed Dec  3 05:19:29 2014
From: Robert.Langford at salford.gov.uk (Langford, Robert)
Date: Wed, 3 Dec 2014 13:19:29 +0000
Subject: [gdal-dev] Using ogrinfo and ogr2ogr Behind Proxy
In-Reply-To: <201412031409.54609.even.rouault@spatialys.com>
References: <e033f56257c74e2eb1a89ef15b9a6ac3@EX13-P-MBX10-W.salford.gov.uk>
	<201412031409.54609.even.rouault@spatialys.com>
Message-ID: <03fb20e8460042a9963678d660c459b4@EX13-P-MBX10-W.salford.gov.uk>

Even,

Thanks, was trying to set on the command line, but managed to set as variable first.  All working now.

Rob

-----Original Message-----
From: Even Rouault [mailto:even.rouault at spatialys.com] 
Sent: 03 December 2014 13:10
To: gdal-dev at lists.osgeo.org
Cc: Langford, Robert
Subject: Re: [gdal-dev] Using ogrinfo and ogr2ogr Behind Proxy

Le mercredi 03 d?cembre 2014 13:57:05, Langford, Robert a ?crit :
> All,
> 
> I'm wondering how I can access a WFS with ogrinfo and ogr2ogr from 
> behind my proxy at work.
> 
> I've searched on Google and have found reference to 
> "GDAL_HTTP_PROXY=host:port" and "GDAL_HTTP_PROXYUSERPWD=user:pass"
> 
> But I'm not sure how I'd use them from the CLI?

Rob,

See http://trac.osgeo.org/gdal/wiki/ConfigOptions

Even

--
Spatialys - Geospatial professional services http://www.spatialys.com
DISCLAIMER: The information contained in this communication/message from Robert.Langford at salford.gov.uk sent on Wed Dec  3 13:19:31 2014 is confidential. It is intended solely for the addressee(s) gdal-dev at lists.osgeo.org;even.rouault at spatialys.com

Access to this message by anyone else is unauthorised. If you are not the intended recipient, any disclosure, copying, or distribution of the message, or any action or omission taken by you in reliance on it, is prohibited and may be unlawful.
As a public body, Salford City Council may be required to disclose this email [or any response to it] under the Freedom of Information Act 2000, unless the information in it is covered by one of the exemptions in the Act. 
Please immediately contact the sender, Robert.Langford at salford.gov.uk if you have received this message in error. 

For the full disclaimer please access http://www.salford.gov.uk/e-mail.  Thank you.


From Bruno.Ledoux at astrium.eads.net  Wed Dec  3 07:16:02 2014
From: Bruno.Ledoux at astrium.eads.net (Ledoux, Bruno)
Date: Wed, 3 Dec 2014 15:16:02 +0000
Subject: [gdal-dev] GDAL Image Viewer supporting extensions
Message-ID: <8F25D7B9D78147488B5CCD8C6D299B42AD325A69@tlswinmbx01.toulouse.spotimage.int>

Hi All,

We have developed a Gdal plug-in that supports our proprietary image file format.
We would now like to use a standard visualizer build on Gdal to view our images with minimum development effort.
>From what I have read about geotools there is a substantial amount of code to write in order to integrate a new format. Are there any other visualization libraries or tools that would do this natively without any development ?

Best Regards,

Bruno







[cid:imagea25d47.JPG at 9e8f00e9.4eb1be96] Please consider the environment before printing this email message.

________________________________

Ce courriel (incluant ses ?ventuelles pi?ces jointes) peut contenir des informations confidentielles et/ou prot?g?es ou dont la diffusion est restreinte. Si vous avez re?u ce courriel par erreur, vous ne devez ni le copier, ni l'utiliser, ni en divulguer le contenu ? quiconque. Merci d'en avertir imm?diatement l'exp?diteur et d'effacer ce courriel de votre syst?me. Airbus DS Geo d?cline toute responsabilit? en cas de corruption par virus, d'alt?ration ou de falsification de ce courriel lors de sa transmission par voie ?lectronique.

This email (including any attachments) may contain confidential and/or privileged information or information otherwise protected from disclosure. If you are not the intended recipient, please notify the sender immediately, do not copy this message or any attachments and do not use it for any purpose or disclose its content to any person, but delete this message and any attachments from your system. Airbus DS Geo disclaims any and all liability if this email transmission was virus corrupted, altered or falsified.

________________________________

Airbus DS Geo SA (325 089 589 RCS Toulouse) - Siege social: 5, rue des Satellites, 31400 Toulouse, France.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141203/d4b2e976/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: imagea25d47.JPG
Type: image/jpeg
Size: 625 bytes
Desc: imagea25d47.JPG
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141203/d4b2e976/attachment-0001.jpe>

From even.rouault at spatialys.com  Wed Dec  3 08:02:45 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 3 Dec 2014 17:02:45 +0100
Subject: [gdal-dev] GDAL Image Viewer supporting extensions
In-Reply-To: <8F25D7B9D78147488B5CCD8C6D299B42AD325A69@tlswinmbx01.toulouse.spotimage.int>
References: <8F25D7B9D78147488B5CCD8C6D299B42AD325A69@tlswinmbx01.toulouse.spotimage.int>
Message-ID: <201412031702.45797.even.rouault@spatialys.com>

Le mercredi 03 d?cembre 2014 16:16:02, Ledoux, Bruno a ?crit :
> Hi All,
> 
> We have developed a Gdal plug-in that supports our proprietary image file
> format. We would now like to use a standard visualizer build on Gdal to
> view our images with minimum development effort. From what I have read
> about geotools there is a substantial amount of code to write in order to
> integrate a new format. Are there any other visualization libraries or
> tools that would do this natively without any development ?

Bruno,

Not sure why you mention Geotools, which is a completely different technical 
code base.
Anyway for GDAL, once your driver is developed, using a GUI that relies on 
GDAL to display your format should be pretty easy. For example you can use 
QGIS. You just have to make sure to compile against the headers of the GDAL 
version used by QGIS, and then add your plugin shared object in the path 
searched by GDAL_DRIVER_PATH. This is how OSGeo4W works for the proprietary 
formats (ECW, MrSID, etc...)
On Linux, you can also completely substitute the GDAL shared object used by 
QGIS with your own, by tweaking LD_LIBRARY_PATH and doing the right symbolic 
links (e.g "ln -s libgdal.so libgdal.so.X.Y.Z" where X.Y.Z is the version 
expected by QGIS)
Same applies for OpenEV, but the latter is probably a bit more difficult to 
build now.

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From yjacolin at free.fr  Wed Dec  3 07:56:52 2014
From: yjacolin at free.fr (Yves Jacolin)
Date: Wed, 03 Dec 2014 16:56:52 +0100
Subject: [gdal-dev] GDAL Image Viewer supporting extensions
In-Reply-To: <8F25D7B9D78147488B5CCD8C6D299B42AD325A69@tlswinmbx01.toulouse.spotimage.int>
References: <8F25D7B9D78147488B5CCD8C6D299B42AD325A69@tlswinmbx01.toulouse.spotimage.int>
Message-ID: <1501133.vzB8DN6lrJ@tatras>

Bruno,

What about using MapServer which can be linked to GDAL for raster reading?

Y.
On Wednesday, December 03, 2014 15:16:02 Ledoux, Bruno wrote:
> Hi All,
> 
> We have developed a Gdal plug-in that supports our proprietary image file
> format. We would now like to use a standard visualizer build on Gdal to
> view our images with minimum development effort. From what I have read
> about geotools there is a substantial amount of code to write in order to
> integrate a new format. Are there any other visualization libraries or
> tools that would do this natively without any development ?
> 
> Best Regards,
> 
> Bruno
> 
> 
> 
> 
> 
> 
> 
> [cid:imagea25d47.JPG at 9e8f00e9.4eb1be96] Please consider the environment
> before printing this email message.
> 
> ________________________________
> 
> Ce courriel (incluant ses ?ventuelles pi?ces jointes) peut contenir des
> informations confidentielles et/ou prot?g?es ou dont la diffusion est
> restreinte. Si vous avez re?u ce courriel par erreur, vous ne devez ni le
> copier, ni l'utiliser, ni en divulguer le contenu ? quiconque. Merci d'en
> avertir imm?diatement l'exp?diteur et d'effacer ce courriel de votre
> syst?me. Airbus DS Geo d?cline toute responsabilit? en cas de corruption
> par virus, d'alt?ration ou de falsification de ce courriel lors de sa
> transmission par voie ?lectronique.
> 
> This email (including any attachments) may contain confidential and/or
> privileged information or information otherwise protected from disclosure.
> If you are not the intended recipient, please notify the sender
> immediately, do not copy this message or any attachments and do not use it
> for any purpose or disclose its content to any person, but delete this
> message and any attachments from your system. Airbus DS Geo disclaims any
> and all liability if this email transmission was virus corrupted, altered
> or falsified.
> 
> ________________________________
> 
> Airbus DS Geo SA (325 089 589 RCS Toulouse) - Siege social: 5, rue des
> Satellites, 31400 Toulouse, France.


From Bruno.Ledoux at astrium.eads.net  Wed Dec  3 10:06:48 2014
From: Bruno.Ledoux at astrium.eads.net (Ledoux, Bruno)
Date: Wed, 3 Dec 2014 18:06:48 +0000
Subject: [gdal-dev] GDAL Image Viewer supporting extensions
In-Reply-To: <201412031702.45797.even.rouault@spatialys.com>
References: <8F25D7B9D78147488B5CCD8C6D299B42AD325A69@tlswinmbx01.toulouse.spotimage.int>
	<201412031702.45797.even.rouault@spatialys.com>
Message-ID: <8F25D7B9D78147488B5CCD8C6D299B42AD325C59@tlswinmbx01.toulouse.spotimage.int>

Thanks for the pointer on QGIS, we will try.

I was mentioning geotools because we already use it in a thick client to display images. Eventually, we will have to integrate our format into geotools but I am looking for an alternate and quick way to do some tests.

Regards,
B. Ledoux




Please consider the environment before printing this email message.
--------------------------------------------------------------------------------
Ce courriel (incluant ses ?ventuelles pi?ces jointes) peut contenir des informations confidentielles et/ou prot?g?es ou dont la diffusion est restreinte. Si vous avez re?u ce courriel par erreur, vous ne devez ni le copier, ni l'utiliser, ni en divulguer le contenu ? quiconque. Merci d'en avertir imm?diatement l'exp?diteur et d'effacer ce courriel de votre syst?me. Spot Image d?cline toute responsabilit? en cas de corruption par virus, d'alt?ration ou de falsification de ce courriel lors de sa transmission par voie ?lectronique.

This email (including any attachments) may contain confidential and/or privileged information or information otherwise protected from disclosure. If you are not the intended
recipient, please notify the sender immediately, do not copy this message or any attachments and do not use it for any purpose or disclose its content to any person, but delete this message and any attachments from your system. Spot Image disclaims any and all liability if this email transmission was virus corrupted, altered or falsified.

Spot Image SA (325 089 589 RCS Toulouse) -
Siege social: 5, rue des Satellites, 31400 Toulouse, France.



-----Message d'origine-----
De : Even Rouault [mailto:even.rouault at spatialys.com]
Envoy? : mercredi 3 d?cembre 2014 17:03
? : gdal-dev at lists.osgeo.org
Cc : Ledoux, Bruno
Objet : Re: [gdal-dev] GDAL Image Viewer supporting extensions

Le mercredi 03 d?cembre 2014 16:16:02, Ledoux, Bruno a ?crit :
> Hi All,
>
> We have developed a Gdal plug-in that supports our proprietary image
> file format. We would now like to use a standard visualizer build on
> Gdal to view our images with minimum development effort. From what I
> have read about geotools there is a substantial amount of code to
> write in order to integrate a new format. Are there any other
> visualization libraries or tools that would do this natively without any development ?

Bruno,

Not sure why you mention Geotools, which is a completely different technical code base.
Anyway for GDAL, once your driver is developed, using a GUI that relies on GDAL to display your format should be pretty easy. For example you can use QGIS. You just have to make sure to compile against the headers of the GDAL version used by QGIS, and then add your plugin shared object in the path searched by GDAL_DRIVER_PATH. This is how OSGeo4W works for the proprietary formats (ECW, MrSID, etc...) On Linux, you can also completely substitute the GDAL shared object used by QGIS with your own, by tweaking LD_LIBRARY_PATH and doing the right symbolic links (e.g "ln -s libgdal.so libgdal.so.X.Y.Z" where X.Y.Z is the version expected by QGIS) Same applies for OpenEV, but the latter is probably a bit more difficult to build now.

Best regards,

Even

--
Spatialys - Geospatial professional services http://www.spatialys.com

From landa.martin at gmail.com  Wed Dec  3 10:11:40 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 3 Dec 2014 19:11:40 +0100
Subject: [gdal-dev] curved polygon -> polygon
In-Reply-To: <201411261243.07247.even.rouault@spatialys.com>
References: <CA+Ei1OcAAJ8MppK-=1USM4G-K6-ZYbTjjLgEndLfs9odKOrLsw@mail.gmail.com>
	<201411261243.07247.even.rouault@spatialys.com>
Message-ID: <CA+Ei1OedeeSSKwUH0yG+p=Dp3pBKfEdga=KMDBMAJdEut+AwxA@mail.gmail.com>

Hi Even,

2014-11-26 12:43 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:
> The PostGIS driver doesn't do automatic conversion of geometry types as it can
> support all (you would get similar errors if inserting polygons into a
> multipolygon layer, or the reverse). This is kind of historic behaviour.
> You can fix the error by specifying either -nlt CONVERT_TO_LINEAR (or -nlt
> POLYGON), or -nlt CURVEPOLYGON
>
> Actually digging more, I was convinced that in my work related to curve
> geometries, I had make sure that the GML reader does its best to convert each
> geometry to the layer declared geometry type. This indeed worked for single
> geometry column layers, but not for multiple geometry such as yours. I've just
> fixed that.

now it works, thanks a lot for your great job on curves! Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.eu/mentors/landa

From ustroetz at gmail.com  Wed Dec  3 10:53:44 2014
From: ustroetz at gmail.com (=?utf-8?Q?Ulrich_Str=C3=B6tz?=)
Date: Wed, 3 Dec 2014 12:53:44 -0600
Subject: [gdal-dev] OGR support for Google Latitude KML output
Message-ID: <8DD4CEEA-CF4B-4905-89F6-2E8E08952E0A@gmail.com>

Hi everyone,

I am trying to use ogr2ogr with a KML file generated by Google My Tracks <https://play.google.com/store/apps/details?id=com.google.android.maps.mytracks&hl=en>.

There was a ticket #5095 <http://trac.osgeo.org/gdal/ticket/5095> about this which is marked as fixed, but it still does not work properly.

I use GDAL 1.11.1, released 2014/09/24 and the following command:
ogr2ogr -f "GeoJSON" out.geojson in.kml

It does create only the start and end points of the track, but not the points in between.

The sample file can be found here.
https://www.dropbox.com/s/ilafup4m0vcvmxj/in.kml?dl=0 <https://www.dropbox.com/s/ilafup4m0vcvmxj/in.kml?dl=0>

Any help on how to get this to work is appreciated.

Thanks,

Uli



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141203/bf12bff2/attachment.html>

From even.rouault at spatialys.com  Wed Dec  3 11:07:31 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 3 Dec 2014 20:07:31 +0100
Subject: [gdal-dev] GDAL Image Viewer supporting extensions
In-Reply-To: <8F25D7B9D78147488B5CCD8C6D299B42AD325C59@tlswinmbx01.toulouse.spotimage.int>
References: <8F25D7B9D78147488B5CCD8C6D299B42AD325A69@tlswinmbx01.toulouse.spotimage.int>
	<201412031702.45797.even.rouault@spatialys.com>
	<8F25D7B9D78147488B5CCD8C6D299B42AD325C59@tlswinmbx01.toulouse.spotimage.int>
Message-ID: <201412032007.31947.even.rouault@spatialys.com>

Le mercredi 03 d?cembre 2014 19:06:48, Ledoux, Bruno a ?crit :
> Thanks for the pointer on QGIS, we will try.
> 
> I was mentioning geotools because we already use it in a thick client to
> display images. Eventually, we will have to integrate our format into
> geotools but I am looking for an alternate and quick way to do some tests.

Ah right, I didn't think to the geotools <--> GDAL bridge. Yes, it is 
unfortunate that the design of geotools (ImageIOExt actually AFAIR) for image 
format requires new code to be written each time. I haven't yet looked at the 
code to understand why it is such. However a possibility would be to write a 
VRT ImageIOExt plugins, and that way you could open any supported GDAL dataset 
by priorly "wrapping" it in a VRT.

> 
> Regards,
> B. Ledoux
> 
> 
> 
> 
> Please consider the environment before printing this email message.
> ---------------------------------------------------------------------------
> ----- Ce courriel (incluant ses ?ventuelles pi?ces jointes) peut contenir
> des informations confidentielles et/ou prot?g?es ou dont la diffusion est
> restreinte. Si vous avez re?u ce courriel par erreur, vous ne devez ni le
> copier, ni l'utiliser, ni en divulguer le contenu ? quiconque. Merci d'en
> avertir imm?diatement l'exp?diteur et d'effacer ce courriel de votre
> syst?me. Spot Image d?cline toute responsabilit? en cas de corruption par
> virus, d'alt?ration ou de falsification de ce courriel lors de sa
> transmission par voie ?lectronique.
> 
> This email (including any attachments) may contain confidential and/or
> privileged information or information otherwise protected from disclosure.
> If you are not the intended recipient, please notify the sender
> immediately, do not copy this message or any attachments and do not use it
> for any purpose or disclose its content to any person, but delete this
> message and any attachments from your system. Spot Image disclaims any and
> all liability if this email transmission was virus corrupted, altered or
> falsified.
> 
> Spot Image SA (325 089 589 RCS Toulouse) -
> Siege social: 5, rue des Satellites, 31400 Toulouse, France.
> 
> 
> 
> -----Message d'origine-----
> De : Even Rouault [mailto:even.rouault at spatialys.com]
> Envoy? : mercredi 3 d?cembre 2014 17:03
> ? : gdal-dev at lists.osgeo.org
> Cc : Ledoux, Bruno
> Objet : Re: [gdal-dev] GDAL Image Viewer supporting extensions
> 
> Le mercredi 03 d?cembre 2014 16:16:02, Ledoux, Bruno a ?crit :
> > Hi All,
> > 
> > We have developed a Gdal plug-in that supports our proprietary image
> > file format. We would now like to use a standard visualizer build on
> > Gdal to view our images with minimum development effort. From what I
> > have read about geotools there is a substantial amount of code to
> > write in order to integrate a new format. Are there any other
> > visualization libraries or tools that would do this natively without any
> > development ?
> 
> Bruno,
> 
> Not sure why you mention Geotools, which is a completely different
> technical code base. Anyway for GDAL, once your driver is developed, using
> a GUI that relies on GDAL to display your format should be pretty easy.
> For example you can use QGIS. You just have to make sure to compile
> against the headers of the GDAL version used by QGIS, and then add your
> plugin shared object in the path searched by GDAL_DRIVER_PATH. This is how
> OSGeo4W works for the proprietary formats (ECW, MrSID, etc...) On Linux,
> you can also completely substitute the GDAL shared object used by QGIS
> with your own, by tweaking LD_LIBRARY_PATH and doing the right symbolic
> links (e.g "ln -s libgdal.so libgdal.so.X.Y.Z" where X.Y.Z is the version
> expected by QGIS) Same applies for OpenEV, but the latter is probably a
> bit more difficult to build now.
> 
> Best regards,
> 
> Even
> 
> --
> Spatialys - Geospatial professional services http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu Dec  4 00:57:06 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 4 Dec 2014 09:57:06 +0100
Subject: [gdal-dev] Motion: Adopt RFC 51: RasterIO() improvements :
	resampling and progress callback
In-Reply-To: <201412011948.32704.even.rouault@spatialys.com>
References: <201412011948.32704.even.rouault@spatialys.com>
Message-ID: <201412040957.06988.even.rouault@spatialys.com>

> Motion : I move to adopt RFC 51: RasterIO() improvements : resampling and
> progress callback
> 
> http://trac.osgeo.org/gdal/wiki/rfc51_rasterio_resampling_progress
> 
> Starting with my +1

I declare this motion passed with support from FrankW, JukkaR, HowardB, 
DanielM, TamasS and myself. I 
will proceed soon in merging the implementation into trunk.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gangwism at informatik.uni-freiburg.de  Thu Dec  4 06:38:41 2014
From: gangwism at informatik.uni-freiburg.de (Marcel Gangwisch)
Date: Thu, 04 Dec 2014 15:38:41 +0100
Subject: [gdal-dev] GDAL rasterize C# bindings
Message-ID: <548071F1.7040108@informatik.uni-freiburg.de>

Dear *,

I want to use the gdal function rasterizelayer in order to transform my 
shape into a ascii grid.
I'm using the C# bindings and GDAL 1.11.
Now I'm stuck with the SWIGType which I has to pass to rasterize.
I can neither create nor cast it from int[] but it appears to be obligious.

On 
http://gis.stackexchange.com/questions/37270/gdal-rasterizelayer-not-ported-to-the-c-bindings 
I found this old discussion about missing SWIGType Support in C# - bindings.
"Tamas Szekeres states that methods requesting |SWIGTYPE| parameters, 
cannot be used (yet)." - Has SWIGType Support been implemented in the 
meantime?

Best regards,
Marcel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141204/aff1a283/attachment.html>

From hrz at geodata.soton.ac.uk  Thu Dec  4 07:15:03 2014
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Thu, 4 Dec 2014 15:15:03 +0000
Subject: [gdal-dev] Problem using gdalbuildvrt with a large number of
 source datasets
In-Reply-To: <547EE679.9070007@geodata.soton.ac.uk>
References: <547ED857.4020300@geodata.soton.ac.uk>
	<201412031124.07923.even.rouault@spatialys.com>
	<547EE679.9070007@geodata.soton.ac.uk>
Message-ID: <54807A77.30602@geodata.soton.ac.uk>

Hello Even,

I've had a chance to test the fix in trunk and can report that it works 
very well: the `gdalbuildvrt` completed in just over an hour with the 
progress meter giving a much more accurate report on progress.

I have submitted an enhancement request regarding the VRT indexing at 
<http://trac.osgeo.org/gdal/ticket/5762>.

Many thanks and best regards,

Homme

On 03/12/14 10:31, Homme Zwaagstra wrote:
> Even,
>
> On 03/12/14 10:24, Even Rouault wrote:
> > Homme,
> >
> >>
> >> I've come up against a problem with `gdalbuildvrt` taking a long 
> time to
> >> create
> >> a VRT when it is passed a large number of source datasets. I am trying
> >> to create
> >> a VRT file for a zoom level in a TMS structure containing JPEG 
> tiles.  The
> >> command I'm using is:
> >>
> >> gdalbuildvrt output.vrt `find ./tiles/18 -iname *.jpg -printf "%p "`
> >>
> >> where the number of tiles is:
> >>
> >> $ find ./tiles/18 -iname *.jpg | wc -l
> >> 767104
> >>
> >> The processing seemed to progress reasonably quickly with the 
> progress bar
> >> outputing '0... etc ...100 - done'.  However `gdalbuildvrt` continued
> >> running
> >> until I killed it 8 hours later.  Looking at `output.vrt` just before I
> >> killed
> >> the program showed it remained empty (0 bytes).
> >
> > I've looked up a bit at the code, and I spotted a potential performance
> > problem when serialing the in-memory VRT into the XML with a big 
> number of
> > sources. I've just committed an improvement into trunk that will 
> make the
> > complexity of source serialization linear instead of quadratic.
>
> Many thanks! I will give it a spin and report back...
>
> >
> >>
> >> Before digging any deeper is there something I'm missing? Am I 
> expecting
> >> too much of `gdalbuildvrt`, or indeed the VRT format, in processing 
> this
> >> many source
> >> datasets?
> >>
> >> Conceptually in this instance it seems as if it would be useful for a
> >> VRT file
> >> (and `gdalbuildvrt`) to reference the output of `gdaltindex` or 
> something
> >> similar.  I'm not sure how efficiently source datasets are indexed in
> >> VRTs and
> >> whether this might be contributing to the problem?
> >
> > There's no indexing in VRT. So yes for that big number of sources, 
> there might
> > be performance problems since each RasterIO() request will have to 
> go test if
> > each source interstects the requested area of interest. Adding an 
> in-memory
> > spatial index after opening the VRT would likely be possible, 
> provided that
> > the non neglectable size of the VRT/XML doesn't make opening it too 
> slow. That
> > depends on the use cases.
> >
> > Yes, perhaps referencing a shapefile tile index could be a possible
> > enhancement.
>
> Ok, that's useful to know, thanks.  Unless I hear back otherwise, I'll 
> submit an
> enhancement request on the issue tracker to bookmark the issue.
>
> Best regards,
>
> Homme
>
> >
> >
> > Even
> >
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141204/fd1d34aa/attachment.html>

From even.rouault at spatialys.com  Thu Dec  4 08:07:45 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 4 Dec 2014 17:07:45 +0100
Subject: [gdal-dev] OGR support for Google Latitude KML output
In-Reply-To: <8DD4CEEA-CF4B-4905-89F6-2E8E08952E0A@gmail.com>
References: <8DD4CEEA-CF4B-4905-89F6-2E8E08952E0A@gmail.com>
Message-ID: <201412041707.45450.even.rouault@spatialys.com>

Le mercredi 03 d?cembre 2014 19:53:44, Ulrich Str?tz a ?crit :
> Hi everyone,
> 
> I am trying to use ogr2ogr with a KML file generated by Google My Tracks
> <https://play.google.com/store/apps/details?id=com.google.android.maps.myt
> racks&hl=en>.
> 
> There was a ticket #5095 <http://trac.osgeo.org/gdal/ticket/5095> about
> this which is marked as fixed, but it still does not work properly.
> 
> I use GDAL 1.11.1, released 2014/09/24 and the following command:
> ogr2ogr -f "GeoJSON" out.geojson in.kml
> 
> It does create only the start and end points of the track, but not the
> points in between.
> 
> The sample file can be found here.
> https://www.dropbox.com/s/ilafup4m0vcvmxj/in.kml?dl=0
> <https://www.dropbox.com/s/ilafup4m0vcvmxj/in.kml?dl=0>
> 
> Any help on how to get this to work is appreciated.

Ulrich,

Ticket 5095 was about gx:Track, but the geometry in your file is a 
gx:MultiTrack. I've just added support for the later in the LIBKML driver in 
GDAL trunk.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From kmichael.aye at gmail.com  Thu Dec  4 11:12:03 2014
From: kmichael.aye at gmail.com (=?UTF-8?Q?K=2E-Michael_Aye?=)
Date: Thu, 04 Dec 2014 11:12:03 -0800 (PST)
Subject: [gdal-dev] VICAR format
Message-ID: <9006F0D2-33A0-4738-AE6E-771541E40394@gmail.com>

  Hello all,


Has anybody worked on implementing a VICAR reader yet??


http://www-mipl.jpl.nasa.gov/external/vicar.html


It?s pretty important for a bit older NASA data.


Regards,
Michael


  ??Michael Aye
Cassini UVIS and MAVEN IUVS team
LASP, Boulder CO


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141204/8c7dfcc3/attachment.html>

From warmerdam at pobox.com  Thu Dec  4 11:21:15 2014
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 4 Dec 2014 11:21:15 -0800
Subject: [gdal-dev] VICAR format
In-Reply-To: <9006F0D2-33A0-4738-AE6E-771541E40394@gmail.com>
References: <9006F0D2-33A0-4738-AE6E-771541E40394@gmail.com>
Message-ID: <CA+YzLBeFp+8TXEpfiDmsJin15+waq=4fuLA3-eDQL=dmKSPBug@mail.gmail.com>

Michael,

I thought it existed, but digging around in the formats directory it
appears not to.  It would be nice to add.

Best regards,
Frank



On Thu, Dec 4, 2014 at 11:12 AM, K.-Michael Aye <kmichael.aye at gmail.com>
wrote:

>  Hello all,
>
> Has anybody worked on implementing a VICAR reader yet?
>
> http://www-mipl.jpl.nasa.gov/external/vicar.html
>
> It?s pretty important for a bit older NASA data.
>
> Regards,
> Michael
>
>  ?
> Michael Aye
> Cassini UVIS and MAVEN IUVS team
> LASP, Boulder CO
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141204/576c57ff/attachment.html>

From thare at usgs.gov  Thu Dec  4 11:23:39 2014
From: thare at usgs.gov (Hare, Trent)
Date: Thu, 4 Dec 2014 12:23:39 -0700
Subject: [gdal-dev] VICAR format
In-Reply-To: <CA+YzLBeFp+8TXEpfiDmsJin15+waq=4fuLA3-eDQL=dmKSPBug@mail.gmail.com>
References: <9006F0D2-33A0-4738-AE6E-771541E40394@gmail.com>
	<CA+YzLBeFp+8TXEpfiDmsJin15+waq=4fuLA3-eDQL=dmKSPBug@mail.gmail.com>
Message-ID: <CAB6t5t9UK7DaE5_nSBWbHaL_yC=RS1-v2mmU0W+hF+CmjCgkGw@mail.gmail.com>

Michael,
   Yes - Sebastian Walters created one. I'm not clear if the driver will be
pushed into the public version of GDAL? I know it is being used by the HRSC
Team to convert to their VICAR products to GeoTiff (DEMs) and
Jpeg2000.(images). If it does get pushed into GDAL then I would recommend
the gdal/frmts/pds/ directory alongside other like formats.

see page: 185
http://pubs.usgs.gov/of/2014/1056/pdf/ofr2014-1056.pdf
from: http://pubs.er.usgs.gov/publication/ofr20141056

Probably worth asking Sebastian his intentions.

Regards,
Trent

On Thu, Dec 4, 2014 at 12:21 PM, Frank Warmerdam <warmerdam at pobox.com>
wrote:

> Michael,
>
> I thought it existed, but digging around in the formats directory it
> appears not to.  It would be nice to add.
>
> Best regards,
> Frank
>
>
>
> On Thu, Dec 4, 2014 at 11:12 AM, K.-Michael Aye <kmichael.aye at gmail.com>
> wrote:
>
>>  Hello all,
>>
>> Has anybody worked on implementing a VICAR reader yet?
>>
>> http://www-mipl.jpl.nasa.gov/external/vicar.html
>>
>> It?s pretty important for a bit older NASA data.
>>
>> Regards,
>> Michael
>>
>>  ?
>> Michael Aye
>> Cassini UVIS and MAVEN IUVS team
>> LASP, Boulder CO
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141204/5cec6868/attachment-0001.html>

From kmichael.aye at gmail.com  Thu Dec  4 13:47:36 2014
From: kmichael.aye at gmail.com (=?UTF-8?Q?K=2E-Michael_Aye?=)
Date: Thu, 04 Dec 2014 13:47:36 -0800 (PST)
Subject: [gdal-dev] VICAR format
In-Reply-To: <CAB6t5t9UK7DaE5_nSBWbHaL_yC=RS1-v2mmU0W+hF+CmjCgkGw@mail.gmail.com>
References: <9006F0D2-33A0-4738-AE6E-771541E40394@gmail.com>
	<CA+YzLBeFp+8TXEpfiDmsJin15+waq=4fuLA3-eDQL=dmKSPBug@mail.gmail.com>
	<CAB6t5t9UK7DaE5_nSBWbHaL_yC=RS1-v2mmU0W+hF+CmjCgkGw@mail.gmail.com>
Message-ID: <F8CFB2CF-F46C-4F1D-898A-5780CA1D6893@gmail.com>

  Apparently, the PDS reader works in this case, not sure if it would work on all VICAR images?


Currently I?m trying to read Cassini ISS images and before I made the mistake to provide the .IMG file instead of the .LBL file to the reader.
Opening the .LBL label file (that links to the .IMG file) is successful and I get the image out of it. I have confirmed via ds.GetDriver().GetDescription() that the PDS GDAL driver opened the file.


Michael
  ??Michael Aye
Cassini UVIS and MAVEN IUVS team
LASP, Boulder CO



> On Dec 4, 2014, at 12:23 PM, Hare, Trent <thare at usgs.gov> wrote:
> 
> 
> Michael,? ?Yes - Sebastian Walters created one. I'm not clear if the driver will be pushed into the public version of GDAL? I know it is being used by the HRSC Team to convert to their VICAR products to GeoTiff (DEMs) and Jpeg2000.(images). If it does get pushed into GDAL then I would recommend the gdal/frmts/pds/ directory alongside other like formats.
> 
> see page: 185
> http://pubs.usgs.gov/of/2014/1056/pdf/ofr2014-1056.pdf
> 
> 
> from:?http://pubs.er.usgs.gov/publication/ofr20141056
> 
> 
> 
> Probably worth asking Sebastian his intentions.
> 
> 
> Regards,
> Trent
> 
> 
> 
> 
> On Thu, Dec 4, 2014 at 12:21 PM, Frank Warmerdam<warmerdam at pobox.com
>>wrote:
>> Michael,
>> 
>> I thought it existed, but digging around in the formats directory it appears not to.? It would be nice to add.
>> 
>> 
>> Best regards,
>> Frank
>> 
>> 
>> 
>> 
>> 
>> 
>> On Thu, Dec 4, 2014 at 11:12 AM, K.-Michael Aye<kmichael.aye at gmail.com
>>>wrote:
>> 
>> 
>>> 
>>> Hello all,
>>> 
>>> 
>>> Has anybody worked on implementing a VICAR reader yet??
>>> 
>>> 
>>> http://www-mipl.jpl.nasa.gov/external/vicar.html
>>> 
>>> 
>>> 
>>> It?s pretty important for a bit older NASA data.
>>> 
>>> 
>>> Regards,
>>> Michael
>>> 
>>> 
>>> ??Michael Aye
>>> Cassini UVIS and MAVEN IUVS team
>>> LASP, Boulder CO
>>> 
>>> 
>>> 
>>> 
>>> 
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> 
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>> 
>>> 
>> 
>> 
>> 
>> 
>> --
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up?? | Frank Warmerdam,warmerdam at pobox.com
>> 
>> light and sound - activate the windows |http://pobox.com/~warmerdam
>> 
>> and watch the world go round - Rush? ? | Geospatial Software Developer
>> 
>> 
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> 
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> 
> 
> 
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141204/a4357509/attachment.html>

From manisandro at gmail.com  Thu Dec  4 13:50:05 2014
From: manisandro at gmail.com (Sandro Mani)
Date: Thu, 04 Dec 2014 22:50:05 +0100
Subject: [gdal-dev] QGIS crashes in
	ogrsqlitevirtualogr.cpp::OGR2SQLITE_Register
Message-ID: <5480D70D.1020703@gmail.com>

Hi,

QGIS is currently crashing in Fedora 21+ when listing the supported ogr 
drivers. In QgsVectorFileWriter::ogrDriverList, there is a portion of code

// Unfortunately it seems that there is no simple way to detect if
// OGR SQLite driver is compiled with SpatiaLite support.
// We have HAVE_SPATIALITE in QGIS, but that may differ from OGR
// http://lists.osgeo.org/pipermail/gdal-dev/2012-November/034580.html
// -> test if creation failes
[...]
OGRDataSourceH ds = OGR_Dr_CreateDataSource( poDriver, TO8F( QString( 
"/vsimem/spatialitetest.sqlite" ) ), options );

which then (see stack trace below) ends up calling OGR2SQLITE_Register, 
which itself calls sqlite3_auto_extension which is a macro defined as 
sqlite3_api->auto_extension. This last call crashes because sqlite3_api 
is null.

Reading the code it looks like the only way for sqlite3_api to be 
initialized is via ogrsqlitevirtualogr.cpp::sqlite3_extension_init, 
which is supposedly called when loading the extension via SQLite. I 
don't see sqlite3_extension_init being called otherwise, so I wonder 
whether this is a bug in ogr, or whether QGIS is doing something it 
shouldn't.

The backtrace is:

(gdb) bt
#0  0x00007ffff4ad36ce in OGR2SQLITE_Register() () at 
ogrsqlitevirtualogr.cpp:2460
#1  0x00007ffff4ab0148 in OGRSQLiteDataSource::OpenOrCreateDB(int) 
(this=this at entry=0x4278780, flags=flags at entry=6) at 
ogrsqlitedatasource.cpp:455
#2  0x00007ffff4ab473e in OGRSQLiteDataSource::Create(char const*, 
char**) (this=this at entry=0x4278780, pszNameIn=pszNameIn at entry=0x42786d8 
"/vsimem/spatialitetest.sqlite", 
papszOptions=papszOptions at entry=0x1e695d0) at ogrsqlitedatasource.cpp:610
#3  0x00007ffff4ab8666 in OGRSQLiteDriver::CreateDataSource(char const*, 
char**) (this=<optimized out>, pszName=0x42786d8 
"/vsimem/spatialitetest.sqlite", papszOptions=0x1e695d0)
     at ogrsqlitedriver.cpp:203
#4  0x00007ffff4aa5f82 in OGR_Dr_CreateDataSource(OGRSFDriverH, char 
const*, char**) (hDriver=0x11f4b80, pszName=<optimized out>, 
papszOptions=<optimized out>) at ogrsfdriver.cpp:74
#5  0x00007ffff3d2477e in QgsVectorFileWriter::ogrDriverList() () at 
/usr/src/debug/qgis-2.6.0/src/core/qgsvectorfilewriter.cpp:2127

(gdb) frame 0
#0  0x00007ffff4ad36ce in OGR2SQLITE_Register () at 
ogrsqlitevirtualogr.cpp:2460
2460        sqlite3_auto_extension ((void (*)(void)) 
OGR2SQLITE_static_register);

(gdb) print sqlite3_api
$1 = (const sqlite3_api_routines *) 0x0


Thanks for any inputs.

Best,
Sandro

From even.rouault at spatialys.com  Thu Dec  4 14:07:07 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 4 Dec 2014 23:07:07 +0100
Subject: [gdal-dev] QGIS crashes in
	ogrsqlitevirtualogr.cpp::OGR2SQLITE_Register
In-Reply-To: <5480D70D.1020703@gmail.com>
References: <5480D70D.1020703@gmail.com>
Message-ID: <201412042307.07319.even.rouault@spatialys.com>

Le jeudi 04 d?cembre 2014 22:50:05, Sandro Mani a ?crit :
> Hi,
> 
> QGIS is currently crashing in Fedora 21+ when listing the supported ogr
> drivers. In QgsVectorFileWriter::ogrDriverList, there is a portion of code

Sandro,

Does Fedora 21+ use sqlite 3.8.7 ? If so, see 
http://trac.osgeo.org/gdal/ticket/5725#comment:14

Even
-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From kyle at pobox.com  Thu Dec  4 14:04:56 2014
From: kyle at pobox.com (Kyle Shannon)
Date: Thu, 4 Dec 2014 15:04:56 -0700
Subject: [gdal-dev] QGIS crashes in
	ogrsqlitevirtualogr.cpp::OGR2SQLITE_Register
In-Reply-To: <5480D70D.1020703@gmail.com>
References: <5480D70D.1020703@gmail.com>
Message-ID: <CAJ0mEz0HiF_Qr82P0h2zSPO19dLZZXNatYosctGp8AUCuO6WYw@mail.gmail.com>

Sandro,

On Thu, Dec 4, 2014 at 2:50 PM, Sandro Mani <manisandro at gmail.com> wrote:
> Hi,
>
> QGIS is currently crashing in Fedora 21+ when listing the supported ogr
> drivers. In QgsVectorFileWriter::ogrDriverList, there is a portion of code
>
> // Unfortunately it seems that there is no simple way to detect if
> // OGR SQLite driver is compiled with SpatiaLite support.
> // We have HAVE_SPATIALITE in QGIS, but that may differ from OGR
> // http://lists.osgeo.org/pipermail/gdal-dev/2012-November/034580.html
> // -> test if creation failes
> [...]
> OGRDataSourceH ds = OGR_Dr_CreateDataSource( poDriver, TO8F( QString(
> "/vsimem/spatialitetest.sqlite" ) ), options );
>
> which then (see stack trace below) ends up calling OGR2SQLITE_Register,
> which itself calls sqlite3_auto_extension which is a macro defined as
> sqlite3_api->auto_extension. This last call crashes because sqlite3_api is
> null.
>
> Reading the code it looks like the only way for sqlite3_api to be
> initialized is via ogrsqlitevirtualogr.cpp::sqlite3_extension_init, which is
> supposedly called when loading the extension via SQLite. I don't see
> sqlite3_extension_init being called otherwise, so I wonder whether this is a
> bug in ogr, or whether QGIS is doing something it shouldn't.
>
> The backtrace is:
>
> (gdb) bt
> #0  0x00007ffff4ad36ce in OGR2SQLITE_Register() () at
> ogrsqlitevirtualogr.cpp:2460
> #1  0x00007ffff4ab0148 in OGRSQLiteDataSource::OpenOrCreateDB(int)
> (this=this at entry=0x4278780, flags=flags at entry=6) at
> ogrsqlitedatasource.cpp:455
> #2  0x00007ffff4ab473e in OGRSQLiteDataSource::Create(char const*, char**)
> (this=this at entry=0x4278780, pszNameIn=pszNameIn at entry=0x42786d8
> "/vsimem/spatialitetest.sqlite", papszOptions=papszOptions at entry=0x1e695d0)
> at ogrsqlitedatasource.cpp:610
> #3  0x00007ffff4ab8666 in OGRSQLiteDriver::CreateDataSource(char const*,
> char**) (this=<optimized out>, pszName=0x42786d8
> "/vsimem/spatialitetest.sqlite", papszOptions=0x1e695d0)
>     at ogrsqlitedriver.cpp:203
> #4  0x00007ffff4aa5f82 in OGR_Dr_CreateDataSource(OGRSFDriverH, char const*,
> char**) (hDriver=0x11f4b80, pszName=<optimized out>, papszOptions=<optimized
> out>) at ogrsfdriver.cpp:74
> #5  0x00007ffff3d2477e in QgsVectorFileWriter::ogrDriverList() () at
> /usr/src/debug/qgis-2.6.0/src/core/qgsvectorfilewriter.cpp:2127
>
> (gdb) frame 0
> #0  0x00007ffff4ad36ce in OGR2SQLITE_Register () at
> ogrsqlitevirtualogr.cpp:2460
> 2460        sqlite3_auto_extension ((void (*)(void))
> OGR2SQLITE_static_register);
>
> (gdb) print sqlite3_api
> $1 = (const sqlite3_api_routines *) 0x0
>
>
> Thanks for any inputs.
>
> Best,
> Sandro
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

It looks like this may be the issue:
http://trac.osgeo.org/gdal/ticket/5725, and a fix has been committed.
I think this has to do with more recent versions of sqlite.  What
version are you using?

-- 
Kyle

From kmichael.aye at gmail.com  Thu Dec  4 14:13:40 2014
From: kmichael.aye at gmail.com (=?UTF-8?Q?K=2E-Michael_Aye?=)
Date: Thu, 04 Dec 2014 14:13:40 -0800 (PST)
Subject: [gdal-dev] VICAR format
In-Reply-To: <F8CFB2CF-F46C-4F1D-898A-5780CA1D6893@gmail.com>
References: <9006F0D2-33A0-4738-AE6E-771541E40394@gmail.com>
	<CA+YzLBeFp+8TXEpfiDmsJin15+waq=4fuLA3-eDQL=dmKSPBug@mail.gmail.com>
	<CAB6t5t9UK7DaE5_nSBWbHaL_yC=RS1-v2mmU0W+hF+CmjCgkGw@mail.gmail.com>
	<F8CFB2CF-F46C-4F1D-898A-5780CA1D6893@gmail.com>
Message-ID: <95456402-646C-49EF-A31B-A5BA0A9DC265@gmail.com>

  I?m not sure now if this image (?N1467346388_2_CALIB.IMG?) is actually a VICAR image.
The unix `file` command recognizes it as a VICAR image:


? file N1467346388_2_CALIB.IMG ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? [3:12:31 PM]
N1467346388_2_CALIB.IMG: VICAR image data



but NASAView?s full label view shows me this:


OBJECT = IMAGE_HEADER<CR><LF>
? ? ? INTERCHANGE_FORMAT = ASCII<CR><LF>
? ? ? HEADER_TYPE = VICAR2<CR><LF>
? ? ? BYTES = 4096<CR><LF>
? ? ? RECORDS = 1<CR><LF>
? ? ? DESCRIPTION = "Original VICAR2 header, updated by CISSCAL.?<CR><LF>



So this sounds like maybe a previous VICAR image has been converted to a more standard PDS format?
Maybe Trent knows more about this.


Michael


  ??Michael Aye
Cassini UVIS and MAVEN IUVS team
LASP, Boulder CO



> On Dec 4, 2014, at 2:47 PM, K.-Michael Aye <kmichael.aye at gmail.com> wrote:
> 
> 
> Apparently, the PDS reader works in this case, not sure if it would work on all VICAR images?
> 
> 
> Currently I?m trying to read Cassini ISS images and before I made the mistake to provide the .IMG file instead of the .LBL file to the reader.
> Opening the .LBL label file (that links to the .IMG file) is successful and I get the image out of it. I have confirmed via ds.GetDriver().GetDescription() that the PDS GDAL driver opened the file.
> 
> 
> Michael
> ??Michael Aye
> Cassini UVIS and MAVEN IUVS team
> LASP, Boulder CO
> 
> 
> 
>> On Dec 4, 2014, at 12:23 PM, Hare, Trent <thare at usgs.gov> wrote:
>> 
>> 
>> Michael,? ?Yes - Sebastian Walters created one. I'm not clear if the driver will be pushed into the public version of GDAL? I know it is being used by the HRSC Team to convert to their VICAR products to GeoTiff (DEMs) and Jpeg2000.(images). If it does get pushed into GDAL then I would recommend the gdal/frmts/pds/ directory alongside other like formats.
>> 
>> see page: 185
>> http://pubs.usgs.gov/of/2014/1056/pdf/ofr2014-1056.pdf
>> 
>> 
>> from:?http://pubs.er.usgs.gov/publication/ofr20141056
>> 
>> 
>> 
>> Probably worth asking Sebastian his intentions.
>> 
>> 
>> Regards,
>> Trent
>> 
>> 
>> 
>> 
>> On Thu, Dec 4, 2014 at 12:21 PM, Frank Warmerdam<warmerdam at pobox.com
>>>wrote:
>>> Michael,
>>> 
>>> I thought it existed, but digging around in the formats directory it appears not to.? It would be nice to add.
>>> 
>>> 
>>> Best regards,
>>> Frank
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> On Thu, Dec 4, 2014 at 11:12 AM, K.-Michael Aye<kmichael.aye at gmail.com
>>>>wrote:
>>> 
>>> 
>>>> 
>>>> Hello all,
>>>> 
>>>> 
>>>> Has anybody worked on implementing a VICAR reader yet??
>>>> 
>>>> 
>>>> http://www-mipl.jpl.nasa.gov/external/vicar.html
>>>> 
>>>> 
>>>> 
>>>> It?s pretty important for a bit older NASA data.
>>>> 
>>>> 
>>>> Regards,
>>>> Michael
>>>> 
>>>> 
>>>> ??Michael Aye
>>>> Cassini UVIS and MAVEN IUVS team
>>>> LASP, Boulder CO
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> 
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>> 
>>>> 
>>> 
>>> 
>>> 
>>> 
>>> --
>>> ---------------------------------------+--------------------------------------
>>> I set the clouds in motion - turn up?? | Frank Warmerdam,warmerdam at pobox.com
>>> 
>>> light and sound - activate the windows |http://pobox.com/~warmerdam
>>> 
>>> and watch the world go round - Rush? ? | Geospatial Software Developer
>>> 
>>> 
>>> 
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> 
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>> 
>>> 
>> 
>> 
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141204/82aff286/attachment-0001.html>

From manisandro at gmail.com  Thu Dec  4 14:29:01 2014
From: manisandro at gmail.com (Sandro Mani)
Date: Thu, 04 Dec 2014 23:29:01 +0100
Subject: [gdal-dev] QGIS crashes in
	ogrsqlitevirtualogr.cpp::OGR2SQLITE_Register
In-Reply-To: <CAJ0mEz0HiF_Qr82P0h2zSPO19dLZZXNatYosctGp8AUCuO6WYw@mail.gmail.com>
References: <5480D70D.1020703@gmail.com>
	<CAJ0mEz0HiF_Qr82P0h2zSPO19dLZZXNatYosctGp8AUCuO6WYw@mail.gmail.com>
Message-ID: <5480E02D.1040308@gmail.com>


On 04.12.2014 23:04, Kyle Shannon wrote:
> It looks like this may be the issue:
> http://trac.osgeo.org/gdal/ticket/5725, and a fix has been committed.
> I think this has to do with more recent versions of sqlite.  What
> version are you using?
>
(Ah right, forgot to mention: gdal-1.11.1 sqlite-3.8.7.2)

In any case rebuilt with the patch you mentioned, and things work again.

Thanks for the prompt reply!
Sandro

From thare at usgs.gov  Thu Dec  4 14:53:31 2014
From: thare at usgs.gov (Hare, Trent)
Date: Thu, 4 Dec 2014 15:53:31 -0700
Subject: [gdal-dev] VICAR format
In-Reply-To: <95456402-646C-49EF-A31B-A5BA0A9DC265@gmail.com>
References: <9006F0D2-33A0-4738-AE6E-771541E40394@gmail.com>
	<CA+YzLBeFp+8TXEpfiDmsJin15+waq=4fuLA3-eDQL=dmKSPBug@mail.gmail.com>
	<CAB6t5t9UK7DaE5_nSBWbHaL_yC=RS1-v2mmU0W+hF+CmjCgkGw@mail.gmail.com>
	<F8CFB2CF-F46C-4F1D-898A-5780CA1D6893@gmail.com>
	<95456402-646C-49EF-A31B-A5BA0A9DC265@gmail.com>
Message-ID: <CAB6t5t8uF0siiRdXp3jjZhh4WcwZmBJsTp9EP9=vfrz9DF3rKg@mail.gmail.com>

Michael,
   For some PDS releases, you may find a PDS detached label (*.lbl)
pointing at a Vicar file. The PDS label contains a calculate-able
"skipbytes" amount to jump over the original vicar label so that it can get
to the start of the pixel stream. For your case, indeed the *.lbl is a PDS
label pointing inside the vicar image. The *.img is actually a fully formed
vicar file also renamed to a normal *.img extension. The Vicar file may
have originally had no extension, a *.img extension, or I have seen the
extension *.02 also.

Anyway, the GDAL PDS should be able to open this file using *.lbl but...

For others not familiar with planetary data, the image you mentioned is not
map projected (see gdalinfo run below). The PDS and ISIS readers were
really written for derived (map projected -- aka GIS-ready) images. The use
of "raw" even if calibrated images in GDAL may have limited uses besides
access to the pixels. Don't expect GDAL to be able to map project (or
orthorectify) this image. That is why ISIS and VICAR exist which contain
the camera models for many of the instruments used in planetary research.

-Trent


ast{86}> gdalinfo N1466584989_1_CALIB.LBL
Driver: PDS/NASA Planetary Data System
Files: N1466584989_1_CALIB.LBL
       N1466584989_1_CALIB.IMG
Size is 1024, 1024
Coordinate System is `'
Metadata:
  BANDWIDTH=
  CENTER_FILTER_WAVELENGTH=
  DATA_SET_ID="CO-S-ISSNA/ISSWA-2-EDR-V1.0"
  FILTER_NAME=("CL1","CL2")
  INSTRUMENT_ID="ISSNA"
  INSTRUMENT_NAME="IMAGING SCIENCE SUBSYSTEM NARROW ANGLE"
  MISSION_NAME="CASSINI-HUYGENS"
  NOTE=
  PRODUCER_INSTITUTION_NAME=
  PRODUCT_CREATION_TIME=2011-01-20T00:33:43
  PRODUCT_ID="1_N1466584989.132"
  PRODUCT_TYPE=
  SPACECRAFT_NAME=
  TARGET_NAME="MIMAS"
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 1024.0)
Upper Right ( 1024.0,    0.0)
Lower Right ( 1024.0, 1024.0)
Center      (  512.0,  512.0)
Band 1 Block=1024x1 Type=Float32, ColorInterp=Undefined
  NoData Value=-3.40282265508890445e+38












On Thu, Dec 4, 2014 at 3:13 PM, K.-Michael Aye <kmichael.aye at gmail.com>
wrote:

>  I?m not sure now if this image (?N1467346388_2_CALIB.IMG?) is actually a
> VICAR image.
> The unix `file` command recognizes it as a VICAR image:
>
>  ? file N1467346388_2_CALIB.IMG
>                 [3:12:31 PM]
> N1467346388_2_CALIB.IMG: VICAR image data
>
> but NASAView?s full label view shows me this:
>
>  OBJECT = IMAGE_HEADER<CR><LF>
>       INTERCHANGE_FORMAT = ASCII<CR><LF>
>       HEADER_TYPE = VICAR2<CR><LF>
>       BYTES = 4096<CR><LF>
>       RECORDS = 1<CR><LF>
>       DESCRIPTION = "Original VICAR2 header, updated by CISSCAL.?<CR><LF>
>
> So this sounds like maybe a previous VICAR image has been converted to a
> more standard PDS format?
> Maybe Trent knows more about this.
>
> Michael
>
>  ?
> Michael Aye
> Cassini UVIS and MAVEN IUVS team
> LASP, Boulder CO
>
>  On Dec 4, 2014, at 2:47 PM, K.-Michael Aye <kmichael.aye at gmail.com>
> wrote:
>
> Apparently, the PDS reader works in this case, not sure if it would work
> on all VICAR images?
>
> Currently I?m trying to read Cassini ISS images and before I made the
> mistake to provide the .IMG file instead of the .LBL file to the reader.
> Opening the .LBL label file (that links to the .IMG file) is successful
> and I get the image out of it. I have confirmed via
> ds.GetDriver().GetDescription() that the PDS GDAL driver opened the file.
>
> Michael
> ?
> Michael Aye
> Cassini UVIS and MAVEN IUVS team
> LASP, Boulder CO
>
>  On Dec 4, 2014, at 12:23 PM, Hare, Trent <thare at usgs.gov> wrote:
>
> Michael,
>    Yes - Sebastian Walters created one. I'm not clear if the driver will
> be pushed into the public version of GDAL? I know it is being used by the
> HRSC Team to convert to their VICAR products to GeoTiff (DEMs) and
> Jpeg2000.(images). If it does get pushed into GDAL then I would recommend
> the gdal/frmts/pds/ directory alongside other like formats.
>
> see page: 185
>  http://pubs.usgs.gov/of/2014/1056/pdf/ofr2014-1056.pdf
>  from: http://pubs.er.usgs.gov/publication/ofr20141056
>
> Probably worth asking Sebastian his intentions.
>
> Regards,
> Trent
>
> On Thu, Dec 4, 2014 at 12:21 PM, Frank Warmerdam<warmerdam at pobox.com>
> wrote:
>
>> Michael,
>>
>> I thought it existed, but digging around in the formats directory it
>> appears not to.  It would be nice to add.
>>
>> Best regards,
>> Frank
>>
>>
>>
>> On Thu, Dec 4, 2014 at 11:12 AM, K.-Michael Aye<kmichael.aye at gmail.com>
>> wrote:
>>
>>>   Hello all,
>>>
>>> Has anybody worked on implementing a VICAR reader yet?
>>>
>>> http://www-mipl.jpl.nasa.gov/external/vicar.html
>>>
>>> It?s pretty important for a bit older NASA data.
>>>
>>> Regards,
>>> Michael
>>>
>>> ?
>>> Michael Aye
>>> Cassini UVIS and MAVEN IUVS team
>>> LASP, Boulder CO
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>>
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam,
>> warmerdam at pobox.com
>> light and sound - activate the windows |http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Software Developer
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141204/f92724ab/attachment.html>

From ustroetz at gmail.com  Thu Dec  4 15:11:44 2014
From: ustroetz at gmail.com (=?utf-8?Q?Ulrich_Str=C3=B6tz?=)
Date: Thu, 4 Dec 2014 17:11:44 -0600
Subject: [gdal-dev] OGR support for Google Latitude KML output
In-Reply-To: <201412041707.45450.even.rouault@spatialys.com>
References: <8DD4CEEA-CF4B-4905-89F6-2E8E08952E0A@gmail.com>
	<201412041707.45450.even.rouault@spatialys.com>
Message-ID: <8F07868E-042A-464F-A570-49D3E81F2A35@gmail.com>

Thanks Even for getting on this so quickly!

I built GDAL from source after you committed your changes, though I still only get the start and end point. 
Did you try it with my sample file?

Thanks,

Uli


> On Dec 4, 2014, at 10:07, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Le mercredi 03 d?cembre 2014 19:53:44, Ulrich Str?tz a ?crit :
>> Hi everyone,
>> 
>> I am trying to use ogr2ogr with a KML file generated by Google My Tracks
>> <https://play.google.com/store/apps/details?id=com.google.android.maps.myt
>> racks&hl=en>.
>> 
>> There was a ticket #5095 <http://trac.osgeo.org/gdal/ticket/5095> about
>> this which is marked as fixed, but it still does not work properly.
>> 
>> I use GDAL 1.11.1, released 2014/09/24 and the following command:
>> ogr2ogr -f "GeoJSON" out.geojson in.kml
>> 
>> It does create only the start and end points of the track, but not the
>> points in between.
>> 
>> The sample file can be found here.
>> https://www.dropbox.com/s/ilafup4m0vcvmxj/in.kml?dl=0
>> <https://www.dropbox.com/s/ilafup4m0vcvmxj/in.kml?dl=0>
>> 
>> Any help on how to get this to work is appreciated.
> 
> Ulrich,
> 
> Ticket 5095 was about gx:Track, but the geometry in your file is a 
> gx:MultiTrack. I've just added support for the later in the LIBKML driver in 
> GDAL trunk.
> 
> Even
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com


From even.rouault at spatialys.com  Thu Dec  4 15:17:12 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 5 Dec 2014 00:17:12 +0100
Subject: [gdal-dev] OGR support for Google Latitude KML output
In-Reply-To: <8F07868E-042A-464F-A570-49D3E81F2A35@gmail.com>
References: <8DD4CEEA-CF4B-4905-89F6-2E8E08952E0A@gmail.com>
	<201412041707.45450.even.rouault@spatialys.com>
	<8F07868E-042A-464F-A570-49D3E81F2A35@gmail.com>
Message-ID: <201412050017.12331.even.rouault@spatialys.com>

Le vendredi 05 d?cembre 2014 00:11:44, Ulrich Str?tz a ?crit :
> Thanks Even for getting on this so quickly!
> 
> I built GDAL from source after you committed your changes, though I still
> only get the start and end point. Did you try it with my sample file?

Yes, I did. Are you compiling against libkml ? 

When running ogrinfo on the file it should display :
INFO: Open of `in.kml'
      using driver `LIBKML' successful.

If it displays "using driver `KML' successful", then you're using the 'old' 
KML driver, and gx:Track/MultiTrack won't be recognized.

Even

> 
> Thanks,
> 
> Uli
> 
> > On Dec 4, 2014, at 10:07, Even Rouault <even.rouault at spatialys.com>
> > wrote:
> > 
> > Le mercredi 03 d?cembre 2014 19:53:44, Ulrich Str?tz a ?crit :
> >> Hi everyone,
> >> 
> >> I am trying to use ogr2ogr with a KML file generated by Google My Tracks
> >> <https://play.google.com/store/apps/details?id=com.google.android.maps.m
> >> yt racks&hl=en>.
> >> 
> >> There was a ticket #5095 <http://trac.osgeo.org/gdal/ticket/5095> about
> >> this which is marked as fixed, but it still does not work properly.
> >> 
> >> I use GDAL 1.11.1, released 2014/09/24 and the following command:
> >> ogr2ogr -f "GeoJSON" out.geojson in.kml
> >> 
> >> It does create only the start and end points of the track, but not the
> >> points in between.
> >> 
> >> The sample file can be found here.
> >> https://www.dropbox.com/s/ilafup4m0vcvmxj/in.kml?dl=0
> >> <https://www.dropbox.com/s/ilafup4m0vcvmxj/in.kml?dl=0>
> >> 
> >> Any help on how to get this to work is appreciated.
> > 
> > Ulrich,
> > 
> > Ticket 5095 was about gx:Track, but the geometry in your file is a
> > gx:MultiTrack. I've just added support for the later in the LIBKML driver
> > in GDAL trunk.
> > 
> > Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ustroetz at gmail.com  Thu Dec  4 17:37:04 2014
From: ustroetz at gmail.com (=?utf-8?Q?Ulrich_Str=C3=B6tz?=)
Date: Thu, 4 Dec 2014 19:37:04 -0600
Subject: [gdal-dev] OGR support for Google Latitude KML output
In-Reply-To: <201412050017.12331.even.rouault@spatialys.com>
References: <8DD4CEEA-CF4B-4905-89F6-2E8E08952E0A@gmail.com>
	<201412041707.45450.even.rouault@spatialys.com>
	<8F07868E-042A-464F-A570-49D3E81F2A35@gmail.com>
	<201412050017.12331.even.rouault@spatialys.com>
Message-ID: <E467F5DA-0FFA-48F5-971B-3D8C887C5FC5@gmail.com>

I didn?t compile against libkml. I compiled again against libkml and now it works perfect.

Thanks again for this great fix! Makes my work a lot easier :)

Uli


> On Dec 4, 2014, at 17:17, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Le vendredi 05 d?cembre 2014 00:11:44, Ulrich Str?tz a ?crit :
>> Thanks Even for getting on this so quickly!
>> 
>> I built GDAL from source after you committed your changes, though I still
>> only get the start and end point. Did you try it with my sample file?
> 
> Yes, I did. Are you compiling against libkml ? 
> 
> When running ogrinfo on the file it should display :
> INFO: Open of `in.kml'
>      using driver `LIBKML' successful.
> 
> If it displays "using driver `KML' successful", then you're using the 'old' 
> KML driver, and gx:Track/MultiTrack won't be recognized.
> 
> Even
> 
>> 
>> Thanks,
>> 
>> Uli
>> 
>>> On Dec 4, 2014, at 10:07, Even Rouault <even.rouault at spatialys.com>
>>> wrote:
>>> 
>>> Le mercredi 03 d?cembre 2014 19:53:44, Ulrich Str?tz a ?crit :
>>>> Hi everyone,
>>>> 
>>>> I am trying to use ogr2ogr with a KML file generated by Google My Tracks
>>>> <https://play.google.com/store/apps/details?id=com.google.android.maps.m
>>>> yt racks&hl=en>.
>>>> 
>>>> There was a ticket #5095 <http://trac.osgeo.org/gdal/ticket/5095> about
>>>> this which is marked as fixed, but it still does not work properly.
>>>> 
>>>> I use GDAL 1.11.1, released 2014/09/24 and the following command:
>>>> ogr2ogr -f "GeoJSON" out.geojson in.kml
>>>> 
>>>> It does create only the start and end points of the track, but not the
>>>> points in between.
>>>> 
>>>> The sample file can be found here.
>>>> https://www.dropbox.com/s/ilafup4m0vcvmxj/in.kml?dl=0
>>>> <https://www.dropbox.com/s/ilafup4m0vcvmxj/in.kml?dl=0>
>>>> 
>>>> Any help on how to get this to work is appreciated.
>>> 
>>> Ulrich,
>>> 
>>> Ticket 5095 was about gx:Track, but the geometry in your file is a
>>> gx:MultiTrack. I've just added support for the later in the LIBKML driver
>>> in GDAL trunk.
>>> 
>>> Even
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com


From ustroetz at gmail.com  Thu Dec  4 18:11:24 2014
From: ustroetz at gmail.com (=?utf-8?Q?Ulrich_Str=C3=B6tz?=)
Date: Thu, 4 Dec 2014 20:11:24 -0600
Subject: [gdal-dev] OGR support for Google Latitude KML output
In-Reply-To: <E467F5DA-0FFA-48F5-971B-3D8C887C5FC5@gmail.com>
References: <8DD4CEEA-CF4B-4905-89F6-2E8E08952E0A@gmail.com>
	<201412041707.45450.even.rouault@spatialys.com>
	<8F07868E-042A-464F-A570-49D3E81F2A35@gmail.com>
	<201412050017.12331.even.rouault@spatialys.com>
	<E467F5DA-0FFA-48F5-971B-3D8C887C5FC5@gmail.com>
Message-ID: <7F695C68-6ED6-41B7-B204-8557C488B73D@gmail.com>

Though another thing I just noted is that the attributes aren?t kept. I think this is already mentioned in the ticket #5095 <http://trac.osgeo.org/gdal/ticket/5095> and you said it requires a lot more development. Is this still the same status?

Uli



> On Dec 4, 2014, at 19:37, Ulrich Str?tz <ustroetz at gmail.com> wrote:
> 
> I didn?t compile against libkml. I compiled again against libkml and now it works perfect.
> 
> Thanks again for this great fix! Makes my work a lot easier :)
> 
> Uli
> 
> 
>> On Dec 4, 2014, at 17:17, Even Rouault <even.rouault at spatialys.com> wrote:
>> 
>> Le vendredi 05 d?cembre 2014 00:11:44, Ulrich Str?tz a ?crit :
>>> Thanks Even for getting on this so quickly!
>>> 
>>> I built GDAL from source after you committed your changes, though I still
>>> only get the start and end point. Did you try it with my sample file?
>> 
>> Yes, I did. Are you compiling against libkml ? 
>> 
>> When running ogrinfo on the file it should display :
>> INFO: Open of `in.kml'
>>     using driver `LIBKML' successful.
>> 
>> If it displays "using driver `KML' successful", then you're using the 'old' 
>> KML driver, and gx:Track/MultiTrack won't be recognized.
>> 
>> Even
>> 
>>> 
>>> Thanks,
>>> 
>>> Uli
>>> 
>>>> On Dec 4, 2014, at 10:07, Even Rouault <even.rouault at spatialys.com>
>>>> wrote:
>>>> 
>>>> Le mercredi 03 d?cembre 2014 19:53:44, Ulrich Str?tz a ?crit :
>>>>> Hi everyone,
>>>>> 
>>>>> I am trying to use ogr2ogr with a KML file generated by Google My Tracks
>>>>> <https://play.google.com/store/apps/details?id=com.google.android.maps.m
>>>>> yt racks&hl=en>.
>>>>> 
>>>>> There was a ticket #5095 <http://trac.osgeo.org/gdal/ticket/5095> about
>>>>> this which is marked as fixed, but it still does not work properly.
>>>>> 
>>>>> I use GDAL 1.11.1, released 2014/09/24 and the following command:
>>>>> ogr2ogr -f "GeoJSON" out.geojson in.kml
>>>>> 
>>>>> It does create only the start and end points of the track, but not the
>>>>> points in between.
>>>>> 
>>>>> The sample file can be found here.
>>>>> https://www.dropbox.com/s/ilafup4m0vcvmxj/in.kml?dl=0
>>>>> <https://www.dropbox.com/s/ilafup4m0vcvmxj/in.kml?dl=0>
>>>>> 
>>>>> Any help on how to get this to work is appreciated.
>>>> 
>>>> Ulrich,
>>>> 
>>>> Ticket 5095 was about gx:Track, but the geometry in your file is a
>>>> gx:MultiTrack. I've just added support for the later in the LIBKML driver
>>>> in GDAL trunk.
>>>> 
>>>> Even
>> 
>> -- 
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141204/d4935d83/attachment.html>

From ychemin at gmail.com  Thu Dec  4 21:30:12 2014
From: ychemin at gmail.com (Yann Chemin)
Date: Fri, 5 Dec 2014 11:00:12 +0530
Subject: [gdal-dev] VICAR format
In-Reply-To: <F8CFB2CF-F46C-4F1D-898A-5780CA1D6893@gmail.com>
References: <9006F0D2-33A0-4738-AE6E-771541E40394@gmail.com>
	<CA+YzLBeFp+8TXEpfiDmsJin15+waq=4fuLA3-eDQL=dmKSPBug@mail.gmail.com>
	<CAB6t5t9UK7DaE5_nSBWbHaL_yC=RS1-v2mmU0W+hF+CmjCgkGw@mail.gmail.com>
	<F8CFB2CF-F46C-4F1D-898A-5780CA1D6893@gmail.com>
Message-ID: <CALTpO6BFaqLM=b+ZnAVD80hqQFb0CrBjppLPU0n5CVjPK1NKMQ@mail.gmail.com>

Yes I can confirm it also works through r.in.gdal in GRASS

On 5 December 2014 at 03:17, K.-Michael Aye <kmichael.aye at gmail.com> wrote:

>  Apparently, the PDS reader works in this case, not sure if it would work
> on all VICAR images?
>
> Currently I?m trying to read Cassini ISS images and before I made the
> mistake to provide the .IMG file instead of the .LBL file to the reader.
> Opening the .LBL label file (that links to the .IMG file) is successful
> and I get the image out of it. I have confirmed via
> ds.GetDriver().GetDescription() that the PDS GDAL driver opened the file.
>
> Michael
>  ?
> Michael Aye
> Cassini UVIS and MAVEN IUVS team
> LASP, Boulder CO
>
>  On Dec 4, 2014, at 12:23 PM, Hare, Trent <thare at usgs.gov> wrote:
>
> Michael,
>    Yes - Sebastian Walters created one. I'm not clear if the driver will
> be pushed into the public version of GDAL? I know it is being used by the
> HRSC Team to convert to their VICAR products to GeoTiff (DEMs) and
> Jpeg2000.(images). If it does get pushed into GDAL then I would recommend
> the gdal/frmts/pds/ directory alongside other like formats.
>
> see page: 185
>  http://pubs.usgs.gov/of/2014/1056/pdf/ofr2014-1056.pdf
>  from: http://pubs.er.usgs.gov/publication/ofr20141056
>
> Probably worth asking Sebastian his intentions.
>
> Regards,
> Trent
>
> On Thu, Dec 4, 2014 at 12:21 PM, Frank Warmerdam<warmerdam at pobox.com>
> wrote:
>
>> Michael,
>>
>> I thought it existed, but digging around in the formats directory it
>> appears not to.  It would be nice to add.
>>
>> Best regards,
>> Frank
>>
>>
>>
>> On Thu, Dec 4, 2014 at 11:12 AM, K.-Michael Aye<kmichael.aye at gmail.com>
>> wrote:
>>
>>>   Hello all,
>>>
>>> Has anybody worked on implementing a VICAR reader yet?
>>>
>>> http://www-mipl.jpl.nasa.gov/external/vicar.html
>>>
>>> It?s pretty important for a bit older NASA data.
>>>
>>> Regards,
>>> Michael
>>>
>>> ?
>>> Michael Aye
>>> Cassini UVIS and MAVEN IUVS team
>>> LASP, Boulder CO
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>>
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam,
>> warmerdam at pobox.com
>> light and sound - activate the windows |http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Software Developer
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
----
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141205/ab76d72f/attachment.html>

From ychemin at gmail.com  Thu Dec  4 21:37:34 2014
From: ychemin at gmail.com (Yann Chemin)
Date: Fri, 5 Dec 2014 11:07:34 +0530
Subject: [gdal-dev] Update of EPSG database to v8.4
In-Reply-To: <CA+TxYvPiQetU+vL8qBo0cmRMDucabn-Ny4UKjBQgXBWHdxP9aw@mail.gmail.com>
References: <201405141253.32397.even.rouault@mines-paris.org>
	<CALTpO6BiRtz57RAZnP0EGqmUAv513WsgmoHizE7JY45LVR=3nA@mail.gmail.com>
	<1400154618.5374a9fa66d70@imp.free.fr>
	<CALTpO6BPeCYGEp1wQ0=YPMfvMUoKfBOf3ZWd4KQvX3m2vxdfpw@mail.gmail.com>
	<CA+TxYvPiQetU+vL8qBo0cmRMDucabn-Ny4UKjBQgXBWHdxP9aw@mail.gmail.com>
Message-ID: <CALTpO6BYDB4Od3c8Du5mGbzDa8p2FFYhw8LXn=uGTzk_5u-S1g@mail.gmail.com>

Hi all,

just want to pick up the status of this, anything new/started somewhere I
could help with?

Trent, anything happened on your side about planetary proj support?

I am going to have a nother look about it, once answers/comments reach.
Cheers,
Yann

On 16 May 2014 at 04:46, Etienne Tourigny <etourigny.dev at gmail.com> wrote:

> You might be able to gzip compress the file
> GDAL can read gzip files transparently, but I am not sure that the csv
>  reading code in GDAL works with compressed files.
>
>
>
> On Thu, May 15, 2014 at 9:00 AM, Yann Chemin <ychemin at gmail.com> wrote:
>
>> Hi Even,
>>
>> I would be interested to include it. But I see that the 1Mb
>> uncompressed text is an issue.
>>
>> If it was OK for the additional Mb in the source code,
>> what would be the place to look into gdal code to create the patch needed?
>>
>> Thanks,
>> Yann
>>
>> PS: did not copy other lists as I am not a member, registered to proj
>> ML today though.
>>
>> On 15/05/2014, Even Rouault <even.rouault at mines-paris.org> wrote:
>> > Selon Yann Chemin <ychemin at gmail.com>:
>> >
>> >> Hi,
>> >>
>> >> is there planetary datum support in this new version (i.e. Moon 2000,
>> or
>> >> etc.)?
>> >
>> > No, I don't think that the EPSG folks are interested in other planets
>> yet
>> > ;-)
>> > But Frank mentionned some time ago (
>> >
>> http://osgeo-org.1560.x6.nabble.com/IAU-2000-Coordinate-System-Dictionary-td3750798.html
>> > ) that he wanted to investigate how to deliver the IAU set of planetary
>> > coordinate systems , but this hasn't been pursued further AFAIK.
>> >
>> > I see there's a version of this file here :
>> > http://svn.osgeo.org/metacrs/sr.org/srsbrowser/data/IAU2000.wkt
>> >
>> > Even
>> >
>> >>
>> >> Yann
>> >>
>> >> On 14/05/2014, Even Rouault <even.rouault at mines-paris.org> wrote:
>> >> > Hi,
>> >> >
>> >> > I've followed the update process of the EPSG SRS database to latest
>> >> > v8.4,
>> >> > and
>> >> > just committed the updated files into libgeotiff, GDAL and PROJ
>> trunk.
>> >> > Also
>> >> >
>> >> > submitted to PostGIS.
>> >> >
>> >> > From what I can see, among many changes and additions, 2 new
>> projection
>> >> > methods have been added:
>> >> > * 1051,Lambert Conic Conformal (2SP Michigan)
>> >> > --> looks very close to standard "Lambert Conic Conformal (2SP)",
>> with
>> >> > the
>> >> > addition of a new parameter K, the ellipsoid scaling factor.
>> >> > * 1052,Colombia Urban
>> >> >
>> >> > I don't think any of those 2 new methods are currently handled by
>> PROJ,
>> >> > so
>> >> > the
>> >> > new PCS based on those projection methods (3 Michigan SRS, and
>> several
>> >> > dozains
>> >> > of Colombia PCS) will not be handled by GDAL nor PROJ.
>> >> >
>> >> > Regarding GDAL, I've improved the add_esri_column.py script (see
>> >> > http://trac.osgeo.org/geotiff/changeset/2446), so that we have more
>> >> > ESRI
>> >> > DATUM
>> >> > names. That should make morphing from/to ESRI .prj files a bit
>> better.
>> >> >
>> >> > Regarding PROJ.4 'espg' and PostGIS spatial_ref_sys.sql files, I've
>> >> > also
>> >> > added
>> >> > the list of SRS that are GEOCCS (GeoCentric) and COMPD_CS (Compound
>> >> > Horizontal
>> >> > + Vertical).
>> >> >
>> >> > Please let me know if you see issues.
>> >> >
>> >> > libgeotiff:
>> >> > http://trac.osgeo.org/geotiff/ticket/63
>> >> > http://trac.osgeo.org/geotiff/changeset/2447
>> >> >
>> >> > GDAL:
>> >> > http://trac.osgeo.org/gdal/ticket/5462
>> >> > http://trac.osgeo.org/gdal/changeset/27322
>> >> >
>> >> > PROJ:
>> >> > http://trac.osgeo.org/proj/ticket/236
>> >> > http://trac.osgeo.org/proj/changeset/2448
>> >> >
>> >> > Submitted for PostGIS :
>> >> > http://trac.osgeo.org/postgis/ticket/2737
>> >> >
>> >> > Best regards,
>> >> >
>> >> > Even
>> >> >
>> >> > --
>> >> > Geospatial professional services
>> >> > http://even.rouault.free.fr/services.html
>> >> > _______________________________________________
>> >> > gdal-dev mailing list
>> >> > gdal-dev at lists.osgeo.org
>> >> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >> >
>> >>
>> >>
>> >> --
>> >> ----
>> >>
>> >
>> >
>> >
>>
>>
>> --
>> ----
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>


-- 
----
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141205/c8173156/attachment-0001.html>

From even.rouault at spatialys.com  Fri Dec  5 00:25:02 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 5 Dec 2014 09:25:02 +0100
Subject: [gdal-dev] OGR support for Google Latitude KML output
In-Reply-To: <7F695C68-6ED6-41B7-B204-8557C488B73D@gmail.com>
References: <8DD4CEEA-CF4B-4905-89F6-2E8E08952E0A@gmail.com>
	<E467F5DA-0FFA-48F5-971B-3D8C887C5FC5@gmail.com>
	<7F695C68-6ED6-41B7-B204-8557C488B73D@gmail.com>
Message-ID: <201412050925.02383.even.rouault@spatialys.com>

Le vendredi 05 d?cembre 2014 03:11:24, Ulrich Str?tz a ?crit :
> Though another thing I just noted is that the attributes aren?t kept. I
> think this is already mentioned in the ticket #5095
> <http://trac.osgeo.org/gdal/ticket/5095> and you said it requires a lot
> more development. Is this still the same status?

Yes

> 
> Uli
> 
> > On Dec 4, 2014, at 19:37, Ulrich Str?tz <ustroetz at gmail.com> wrote:
> > 
> > I didn?t compile against libkml. I compiled again against libkml and now
> > it works perfect.
> > 
> > Thanks again for this great fix! Makes my work a lot easier :)
> > 
> > Uli
> > 
> >> On Dec 4, 2014, at 17:17, Even Rouault <even.rouault at spatialys.com>
> >> wrote:
> >> 
> >> Le vendredi 05 d?cembre 2014 00:11:44, Ulrich Str?tz a ?crit :
> >>> Thanks Even for getting on this so quickly!
> >>> 
> >>> I built GDAL from source after you committed your changes, though I
> >>> still only get the start and end point. Did you try it with my sample
> >>> file?
> >> 
> >> Yes, I did. Are you compiling against libkml ?
> >> 
> >> When running ogrinfo on the file it should display :
> >> INFO: Open of `in.kml'
> >> 
> >>     using driver `LIBKML' successful.
> >> 
> >> If it displays "using driver `KML' successful", then you're using the
> >> 'old' KML driver, and gx:Track/MultiTrack won't be recognized.
> >> 
> >> Even
> >> 
> >>> Thanks,
> >>> 
> >>> Uli
> >>> 
> >>>> On Dec 4, 2014, at 10:07, Even Rouault <even.rouault at spatialys.com>
> >>>> wrote:
> >>>> 
> >>>> Le mercredi 03 d?cembre 2014 19:53:44, Ulrich Str?tz a ?crit :
> >>>>> Hi everyone,
> >>>>> 
> >>>>> I am trying to use ogr2ogr with a KML file generated by Google My
> >>>>> Tracks
> >>>>> <https://play.google.com/store/apps/details?id=com.google.android.ma
> >>>>> ps.m yt racks&hl=en>.
> >>>>> 
> >>>>> There was a ticket #5095 <http://trac.osgeo.org/gdal/ticket/5095>
> >>>>> about this which is marked as fixed, but it still does not work
> >>>>> properly.
> >>>>> 
> >>>>> I use GDAL 1.11.1, released 2014/09/24 and the following command:
> >>>>> ogr2ogr -f "GeoJSON" out.geojson in.kml
> >>>>> 
> >>>>> It does create only the start and end points of the track, but not
> >>>>> the points in between.
> >>>>> 
> >>>>> The sample file can be found here.
> >>>>> https://www.dropbox.com/s/ilafup4m0vcvmxj/in.kml?dl=0
> >>>>> <https://www.dropbox.com/s/ilafup4m0vcvmxj/in.kml?dl=0>
> >>>>> 
> >>>>> Any help on how to get this to work is appreciated.
> >>>> 
> >>>> Ulrich,
> >>>> 
> >>>> Ticket 5095 was about gx:Track, but the geometry in your file is a
> >>>> gx:MultiTrack. I've just added support for the later in the LIBKML
> >>>> driver in GDAL trunk.
> >>>> 
> >>>> Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Dec  5 00:46:26 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 5 Dec 2014 09:46:26 +0100
Subject: [gdal-dev] Update of EPSG database to v8.4
In-Reply-To: <CALTpO6BYDB4Od3c8Du5mGbzDa8p2FFYhw8LXn=uGTzk_5u-S1g@mail.gmail.com>
References: <201405141253.32397.even.rouault@mines-paris.org>
	<CA+TxYvPiQetU+vL8qBo0cmRMDucabn-Ny4UKjBQgXBWHdxP9aw@mail.gmail.com>
	<CALTpO6BYDB4Od3c8Du5mGbzDa8p2FFYhw8LXn=uGTzk_5u-S1g@mail.gmail.com>
Message-ID: <201412050946.26746.even.rouault@spatialys.com>

Le vendredi 05 d?cembre 2014 06:37:34, Yann Chemin a ?crit :
> Hi all,
> 
> just want to pick up the status of this, anything new/started somewhere I
> could help with?

Not that I'm aware of.

Looking more closely at 
http://svn.osgeo.org/metacrs/sr.org/srsbrowser/data/IAU2000.wkt, I see that 
each SRS is duplicated. For example 19900 and 19901 have the same WKT, 19910 
and 19911 also, and so on until the end of file. Does anyone know the reason 
for that ?
And the header of the file says "This file derived from the naif ID Codes.txt 
file distributed by  USGS for NASA/IAU/NAIF (http://naif.jpl.nasa.gov/)", so is 
IAU2000.wkt still up-to-date and what is the process/script to regenerate it ?

> 
> Trent, anything happened on your side about planetary proj support?
> 
> I am going to have a nother look about it, once answers/comments reach.
> Cheers,
> Yann
> 
> On 16 May 2014 at 04:46, Etienne Tourigny <etourigny.dev at gmail.com> wrote:
> > You might be able to gzip compress the file
> > GDAL can read gzip files transparently, but I am not sure that the csv
> > 
> >  reading code in GDAL works with compressed files.
> > 
> > On Thu, May 15, 2014 at 9:00 AM, Yann Chemin <ychemin at gmail.com> wrote:
> >> Hi Even,
> >> 
> >> I would be interested to include it. But I see that the 1Mb
> >> uncompressed text is an issue.
> >> 
> >> If it was OK for the additional Mb in the source code,
> >> what would be the place to look into gdal code to create the patch
> >> needed?
> >> 
> >> Thanks,
> >> Yann
> >> 
> >> PS: did not copy other lists as I am not a member, registered to proj
> >> ML today though.
> >> 
> >> On 15/05/2014, Even Rouault <even.rouault at mines-paris.org> wrote:
> >> > Selon Yann Chemin <ychemin at gmail.com>:
> >> >> Hi,
> >> >> 
> >> >> is there planetary datum support in this new version (i.e. Moon 2000,
> >> 
> >> or
> >> 
> >> >> etc.)?
> >> > 
> >> > No, I don't think that the EPSG folks are interested in other planets
> >> 
> >> yet
> >> 
> >> > ;-)
> >> > But Frank mentionned some time ago (
> >> 
> >> http://osgeo-org.1560.x6.nabble.com/IAU-2000-Coordinate-System-Dictionar
> >> y-td3750798.html
> >> 
> >> > ) that he wanted to investigate how to deliver the IAU set of
> >> > planetary coordinate systems , but this hasn't been pursued further
> >> > AFAIK.
> >> > 
> >> > I see there's a version of this file here :
> >> > http://svn.osgeo.org/metacrs/sr.org/srsbrowser/data/IAU2000.wkt
> >> > 
> >> > Even
> >> > 
> >> >> Yann
> >> >> 
> >> >> On 14/05/2014, Even Rouault <even.rouault at mines-paris.org> wrote:
> >> >> > Hi,
> >> >> > 
> >> >> > I've followed the update process of the EPSG SRS database to latest
> >> >> > v8.4,
> >> >> > and
> >> >> > just committed the updated files into libgeotiff, GDAL and PROJ
> >> 
> >> trunk.
> >> 
> >> >> > Also
> >> >> > 
> >> >> > submitted to PostGIS.
> >> >> > 
> >> >> > From what I can see, among many changes and additions, 2 new
> >> 
> >> projection
> >> 
> >> >> > methods have been added:
> >> >> > * 1051,Lambert Conic Conformal (2SP Michigan)
> >> >> > --> looks very close to standard "Lambert Conic Conformal (2SP)",
> >> 
> >> with
> >> 
> >> >> > the
> >> >> > addition of a new parameter K, the ellipsoid scaling factor.
> >> >> > * 1052,Colombia Urban
> >> >> > 
> >> >> > I don't think any of those 2 new methods are currently handled by
> >> 
> >> PROJ,
> >> 
> >> >> > so
> >> >> > the
> >> >> > new PCS based on those projection methods (3 Michigan SRS, and
> >> 
> >> several
> >> 
> >> >> > dozains
> >> >> > of Colombia PCS) will not be handled by GDAL nor PROJ.
> >> >> > 
> >> >> > Regarding GDAL, I've improved the add_esri_column.py script (see
> >> >> > http://trac.osgeo.org/geotiff/changeset/2446), so that we have more
> >> >> > ESRI
> >> >> > DATUM
> >> >> > names. That should make morphing from/to ESRI .prj files a bit
> >> 
> >> better.
> >> 
> >> >> > Regarding PROJ.4 'espg' and PostGIS spatial_ref_sys.sql files, I've
> >> >> > also
> >> >> > added
> >> >> > the list of SRS that are GEOCCS (GeoCentric) and COMPD_CS (Compound
> >> >> > Horizontal
> >> >> > + Vertical).
> >> >> > 
> >> >> > Please let me know if you see issues.
> >> >> > 
> >> >> > libgeotiff:
> >> >> > http://trac.osgeo.org/geotiff/ticket/63
> >> >> > http://trac.osgeo.org/geotiff/changeset/2447
> >> >> > 
> >> >> > GDAL:
> >> >> > http://trac.osgeo.org/gdal/ticket/5462
> >> >> > http://trac.osgeo.org/gdal/changeset/27322
> >> >> > 
> >> >> > PROJ:
> >> >> > http://trac.osgeo.org/proj/ticket/236
> >> >> > http://trac.osgeo.org/proj/changeset/2448
> >> >> > 
> >> >> > Submitted for PostGIS :
> >> >> > http://trac.osgeo.org/postgis/ticket/2737
> >> >> > 
> >> >> > Best regards,
> >> >> > 
> >> >> > Even
> >> >> > 
> >> >> > --
> >> >> > Geospatial professional services
> >> >> > http://even.rouault.free.fr/services.html
> >> >> > _______________________________________________
> >> >> > gdal-dev mailing list
> >> >> > gdal-dev at lists.osgeo.org
> >> >> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >> >> 
> >> >> --
> >> >> ----
> >> 
> >> --
> >> ----
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From niels.k.h at gmail.com  Fri Dec  5 02:02:00 2014
From: niels.k.h at gmail.com (=?ISO-8859-1?Q?Niels_Kj=F8ller_Hansen?=)
Date: Fri, 5 Dec 2014 11:02:00 +0100
Subject: [gdal-dev] Appending to MSSQL-tables
Message-ID: <CABjvV9E=PZ=2seuc7KBQJQFALZJSd63by=gyKQpfa-s4+gmp9A@mail.gmail.com>

Hi all

I have been running a script daily, which worked with GDAL 1.10

ogr2ogr -append -lco GEOM_NAME="geometry" -f "MSSQLSpatial"
"MSSQL:server=YYYYYY;database=XXXXXX;trusted_connection=yes"
lokalplaner_vedtaget.gml -a_srs "EPSG:25832" -lco SCHEMA=ZZZZ -nln
lokalplaner_vedtaget --debug ON

But, now it seems that it does not. What can I do?:
"GML: Using Expat reader
HTTP: Fetch(
http://geoservice.plansystem.dk:80/wfs?service=WFS&version=1.0.0&request=DescribeFeatureType&typeName=pdk%3Atheme_pdk_lokalplan_vedtaget_v
)
GML: Using /vsimem/tmp_gml_xsd_000000000082F870.xsd
OGR: OGROpen(lokalplaner_vedtaget.gml/000000000082F870) succeeded as GML.
OGR_MSSQLSpatial:
EstablishSession(Connection:"server=YYYYYYY;database=XXXXXX;trusted_connection=yes")
ODBC: SQLDriverConnect(DRIVER=SQL
Server;server=YYYYYY;database=XXXXXX;trusted_connection=yes)
OGR:
OGROpen(MSSQL:server=YYYYYYY;database=XXXXX;trusted_connection=yes/000000000035EE10)
succeeded as MSSQLSpatial
.
ERROR 1: Layer lokalplaner_vedtaget already exists, CreateLayer failed. Use
the layer creation option OVERWRITE=YES to replace it.
GML: ResetReading()
ERROR 1: Terminating translation prematurely after failed translation of
layer theme_pdk_lokalplan_vedtaget_v (use -skipfailures to skip errors)

ODBC: SQLDisconnect()"

The gml file is downloaded from a WFS for debugging purposes, could that
make a difference?

What is the difference between the -overwrite flag and the "OVERWRITE=YES"
layer creation option? Is an lco "APPEND=YES" a possibility?

Thanks,
Niels :-)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141205/09b023b4/attachment.html>

From sebastian.walter at fu-berlin.de  Fri Dec  5 06:00:06 2014
From: sebastian.walter at fu-berlin.de (Sebastian Walter)
Date: Fri, 05 Dec 2014 15:00:06 +0100
Subject: [gdal-dev] VICAR format
Message-ID: <5481BA66.1070008@fu-berlin.de>

Hi,

As I wasn't allowed to commit via SVN I've just created an enhancement
ticket (#5763) on trac.osgeo.org with the driver code as attachments.

The driver is based on the PDS driver and could be located in the PDS
directory, as Trent suggested.

Many regards,
Sebastian

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 5826 bytes
Desc: S/MIME Cryptographic Signature
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141205/15a9c95b/attachment.bin>

From even.rouault at spatialys.com  Fri Dec  5 06:18:50 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 5 Dec 2014 15:18:50 +0100
Subject: [gdal-dev] VICAR format
In-Reply-To: <5481BA66.1070008@fu-berlin.de>
References: <5481BA66.1070008@fu-berlin.de>
Message-ID: <201412051518.50490.even.rouault@spatialys.com>

Le vendredi 05 d?cembre 2014 15:00:06, Sebastian Walter a ?crit :
> Hi,
> 
> As I wasn't allowed to commit via SVN I've just created an enhancement
> ticket (#5763) on trac.osgeo.org with the driver code as attachments.
> 
> The driver is based on the PDS driver and could be located in the PDS
> directory, as Trent suggested.

Sebastian,

To ease a future integration, could you update the files with the appropriate 
copyright notice and the standard X/MIT licence text used by other GDAL files 
(provided you're allowed to release the code under that licence) ?

Thanks,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From thare at usgs.gov  Fri Dec  5 06:43:48 2014
From: thare at usgs.gov (Hare, Trent)
Date: Fri, 5 Dec 2014 07:43:48 -0700
Subject: [gdal-dev] Update of EPSG database to v8.4
In-Reply-To: <201412050946.26746.even.rouault@spatialys.com>
References: <201405141253.32397.even.rouault@mines-paris.org>
	<CA+TxYvPiQetU+vL8qBo0cmRMDucabn-Ny4UKjBQgXBWHdxP9aw@mail.gmail.com>
	<CALTpO6BYDB4Od3c8Du5mGbzDa8p2FFYhw8LXn=uGTzk_5u-S1g@mail.gmail.com>
	<201412050946.26746.even.rouault@spatialys.com>
Message-ID: <CAB6t5t9bbejx8AcRMqcZ3qRtPMDyqq0uEJkweg0Wsrq3m-Rzvg@mail.gmail.com>

Even,
   I agree we can probably purge the duplication. This was introduced
because I couldn't find a method to designate "ographic" latitudes versus
"ocentric" latitude systems within the WKT standard (still not clear on
that). Thus *even values* (e.g. 49900 Mars) are ocentric and *odd
values* (49901
Mars) are ographic... Argh - the original "proposal
<http://www.lpi.usra.edu/meetings/lpsc2006/pdf/1931.pdf>" is almost 10
years old but *any feedback* is still welcome.

   There are a few bodies that need updates in that list. In short, when a
body is defined as tri-axial, the IAU determines a best fit single
spherical value (unfortunately this is not just the average of the three
but can be different for each. Thus I have to manually pull the radius
value from a published paper
<http://astrogeology.usgs.gov/groups/IAU-WGCCRE>). I have been meaning to
do that for sometime but since they are generally minor bodies, which we
don't have much data for, there wasn't much pressure in getting it done.

*Let me take a stab at "version 2" over the weekend*. These were based on
the IAU 2000 NAIF codes and IAU 2000 published report. I will tweak, where
needed, the "IAU2000" codes since those codes are being used in some
WMS/WCS servers, spatial ref, QGIS, etc. there are some which so now be
tagged IAU2009 (or 2012, e.g. Mercury was recently updated). Not sure using
that method, updated namespace based on the year, was the best idea either.

Just in case, the very simple script to convert Naif to WKT codes still
lives here: ftp://pdsimage2.wr.usgs.gov/pub/pigpen/ogc/ (but as stated
above, this original code doesn't fully address the tri-axial issue yet).

thanks for continuing to help with this!

Regards,
Trent


On Fri, Dec 5, 2014 at 1:46 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le vendredi 05 d?cembre 2014 06:37:34, Yann Chemin a ?crit :
> > Hi all,
> >
> > just want to pick up the status of this, anything new/started somewhere I
> > could help with?
>
> Not that I'm aware of.
>
> Looking more closely at
> http://svn.osgeo.org/metacrs/sr.org/srsbrowser/data/IAU2000.wkt, I see
> that
> each SRS is duplicated. For example 19900 and 19901 have the same WKT,
> 19910
> and 19911 also, and so on until the end of file. Does anyone know the
> reason
> for that ?
> And the header of the file says "This file derived from the naif ID
> Codes.txt
> file distributed by  USGS for NASA/IAU/NAIF (http://naif.jpl.nasa.gov/)",
> so is
> IAU2000.wkt still up-to-date and what is the process/script to regenerate
> it ?
>
> >
> > Trent, anything happened on your side about planetary proj support?
> >
> > I am going to have a nother look about it, once answers/comments reach.
> > Cheers,
> > Yann
> >
> > On 16 May 2014 at 04:46, Etienne Tourigny <etourigny.dev at gmail.com>
> wrote:
> > > You might be able to gzip compress the file
> > > GDAL can read gzip files transparently, but I am not sure that the csv
> > >
> > >  reading code in GDAL works with compressed files.
> > >
> > > On Thu, May 15, 2014 at 9:00 AM, Yann Chemin <ychemin at gmail.com>
> wrote:
> > >> Hi Even,
> > >>
> > >> I would be interested to include it. But I see that the 1Mb
> > >> uncompressed text is an issue.
> > >>
> > >> If it was OK for the additional Mb in the source code,
> > >> what would be the place to look into gdal code to create the patch
> > >> needed?
> > >>
> > >> Thanks,
> > >> Yann
> > >>
> > >> PS: did not copy other lists as I am not a member, registered to proj
> > >> ML today though.
> > >>
> > >> On 15/05/2014, Even Rouault <even.rouault at mines-paris.org> wrote:
> > >> > Selon Yann Chemin <ychemin at gmail.com>:
> > >> >> Hi,
> > >> >>
> > >> >> is there planetary datum support in this new version (i.e. Moon
> 2000,
> > >>
> > >> or
> > >>
> > >> >> etc.)?
> > >> >
> > >> > No, I don't think that the EPSG folks are interested in other
> planets
> > >>
> > >> yet
> > >>
> > >> > ;-)
> > >> > But Frank mentionned some time ago (
> > >>
> > >>
> http://osgeo-org.1560.x6.nabble.com/IAU-2000-Coordinate-System-Dictionar
> > >> y-td3750798.html
> > >>
> > >> > ) that he wanted to investigate how to deliver the IAU set of
> > >> > planetary coordinate systems , but this hasn't been pursued further
> > >> > AFAIK.
> > >> >
> > >> > I see there's a version of this file here :
> > >> > http://svn.osgeo.org/metacrs/sr.org/srsbrowser/data/IAU2000.wkt
> > >> >
> > >> > Even
> > >> >
> > >> >> Yann
> > >> >>
> > >> >> On 14/05/2014, Even Rouault <even.rouault at mines-paris.org> wrote:
> > >> >> > Hi,
> > >> >> >
> > >> >> > I've followed the update process of the EPSG SRS database to
> latest
> > >> >> > v8.4,
> > >> >> > and
> > >> >> > just committed the updated files into libgeotiff, GDAL and PROJ
> > >>
> > >> trunk.
> > >>
> > >> >> > Also
> > >> >> >
> > >> >> > submitted to PostGIS.
> > >> >> >
> > >> >> > From what I can see, among many changes and additions, 2 new
> > >>
> > >> projection
> > >>
> > >> >> > methods have been added:
> > >> >> > * 1051,Lambert Conic Conformal (2SP Michigan)
> > >> >> > --> looks very close to standard "Lambert Conic Conformal (2SP)",
> > >>
> > >> with
> > >>
> > >> >> > the
> > >> >> > addition of a new parameter K, the ellipsoid scaling factor.
> > >> >> > * 1052,Colombia Urban
> > >> >> >
> > >> >> > I don't think any of those 2 new methods are currently handled by
> > >>
> > >> PROJ,
> > >>
> > >> >> > so
> > >> >> > the
> > >> >> > new PCS based on those projection methods (3 Michigan SRS, and
> > >>
> > >> several
> > >>
> > >> >> > dozains
> > >> >> > of Colombia PCS) will not be handled by GDAL nor PROJ.
> > >> >> >
> > >> >> > Regarding GDAL, I've improved the add_esri_column.py script (see
> > >> >> > http://trac.osgeo.org/geotiff/changeset/2446), so that we have
> more
> > >> >> > ESRI
> > >> >> > DATUM
> > >> >> > names. That should make morphing from/to ESRI .prj files a bit
> > >>
> > >> better.
> > >>
> > >> >> > Regarding PROJ.4 'espg' and PostGIS spatial_ref_sys.sql files,
> I've
> > >> >> > also
> > >> >> > added
> > >> >> > the list of SRS that are GEOCCS (GeoCentric) and COMPD_CS
> (Compound
> > >> >> > Horizontal
> > >> >> > + Vertical).
> > >> >> >
> > >> >> > Please let me know if you see issues.
> > >> >> >
> > >> >> > libgeotiff:
> > >> >> > http://trac.osgeo.org/geotiff/ticket/63
> > >> >> > http://trac.osgeo.org/geotiff/changeset/2447
> > >> >> >
> > >> >> > GDAL:
> > >> >> > http://trac.osgeo.org/gdal/ticket/5462
> > >> >> > http://trac.osgeo.org/gdal/changeset/27322
> > >> >> >
> > >> >> > PROJ:
> > >> >> > http://trac.osgeo.org/proj/ticket/236
> > >> >> > http://trac.osgeo.org/proj/changeset/2448
> > >> >> >
> > >> >> > Submitted for PostGIS :
> > >> >> > http://trac.osgeo.org/postgis/ticket/2737
> > >> >> >
> > >> >> > Best regards,
> > >> >> >
> > >> >> > Even
> > >> >> >
> > >> >> > --
> > >> >> > Geospatial professional services
> > >> >> > http://even.rouault.free.fr/services.html
> > >> >> > _______________________________________________
> > >> >> > gdal-dev mailing list
> > >> >> > gdal-dev at lists.osgeo.org
> > >> >> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >> >>
> > >> >> --
> > >> >> ----
> > >>
> > >> --
> > >> ----
> > >> _______________________________________________
> > >> gdal-dev mailing list
> > >> gdal-dev at lists.osgeo.org
> > >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141205/fdffa016/attachment.html>

From even.rouault at spatialys.com  Fri Dec  5 07:03:54 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 5 Dec 2014 16:03:54 +0100
Subject: [gdal-dev] Update of EPSG database to v8.4
In-Reply-To: <CAB6t5t9bbejx8AcRMqcZ3qRtPMDyqq0uEJkweg0Wsrq3m-Rzvg@mail.gmail.com>
References: <201405141253.32397.even.rouault@mines-paris.org>
	<201412050946.26746.even.rouault@spatialys.com>
	<CAB6t5t9bbejx8AcRMqcZ3qRtPMDyqq0uEJkweg0Wsrq3m-Rzvg@mail.gmail.com>
Message-ID: <201412051603.54458.even.rouault@spatialys.com>

Le vendredi 05 d?cembre 2014 15:43:48, Hare, Trent a ?crit :
> Even,
>    I agree we can probably purge the duplication. This was introduced
> because I couldn't find a method to designate "ographic" latitudes versus
> "ocentric" latitude systems within the WKT standard (still not clear on
> that). Thus *even values* (e.g. 49900 Mars) are ocentric and *odd
> values* (49901
> Mars) are ographic... Argh - the original "proposal
> <http://www.lpi.usra.edu/meetings/lpsc2006/pdf/1931.pdf>" is almost 10
> years old but *any feedback* is still welcome.
> 
>    There are a few bodies that need updates in that list. In short, when a
> body is defined as tri-axial, the IAU determines a best fit single
> spherical value (unfortunately this is not just the average of the three
> but can be different for each. Thus I have to manually pull the radius
> value from a published paper
> <http://astrogeology.usgs.gov/groups/IAU-WGCCRE>). I have been meaning to
> do that for sometime but since they are generally minor bodies, which we
> don't have much data for, there wasn't much pressure in getting it done.
> 
> *Let me take a stab at "version 2" over the weekend*. These were based on
> the IAU 2000 NAIF codes and IAU 2000 published report. I will tweak, where
> needed, the "IAU2000" codes since those codes are being used in some
> WMS/WCS servers, spatial ref, QGIS, etc. there are some which so now be
> tagged IAU2009 (or 2012, e.g. Mercury was recently updated). Not sure using
> that method, updated namespace based on the year, was the best idea either.
> 
> Just in case, the very simple script to convert Naif to WKT codes still
> lives here: ftp://pdsimage2.wr.usgs.gov/pub/pigpen/ogc/ (but as stated
> above, this original code doesn't fully address the tri-axial issue yet).
> 
> thanks for continuing to help with this!

Trent,

is my understanding correct that IAU2000.wkt is the result of a 20 KB Python 
script (create_IAU2000_wkt.py) run on a 3.8KB text file (naifcodes_radii_m.txt) 
?

So I can see 2 other alternatives instead of directly including IAU2000.wkt :
- either include the 2 above files in GDAL SVN, and run the python script in a 
make step of GDAL to generate  IAU2000.wkt
- include naifcodes_radii_m.txt in GDAL SVN, and "port" the python script to a 
method in the OGRSpatialReference class. The logic would have to be reversed 
(division and modulo by 100): from an EPSG-like code, find the body code and 
projection method. This would likely be more efficient too instead of ingesting 
the IAU2000.wkt file.

Even

> 
> Regards,
> Trent
> 
> 
> On Fri, Dec 5, 2014 at 1:46 AM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Le vendredi 05 d?cembre 2014 06:37:34, Yann Chemin a ?crit :
> > > Hi all,
> > > 
> > > just want to pick up the status of this, anything new/started somewhere
> > > I could help with?
> > 
> > Not that I'm aware of.
> > 
> > Looking more closely at
> > http://svn.osgeo.org/metacrs/sr.org/srsbrowser/data/IAU2000.wkt, I see
> > that
> > each SRS is duplicated. For example 19900 and 19901 have the same WKT,
> > 19910
> > and 19911 also, and so on until the end of file. Does anyone know the
> > reason
> > for that ?
> > And the header of the file says "This file derived from the naif ID
> > Codes.txt
> > file distributed by  USGS for NASA/IAU/NAIF (http://naif.jpl.nasa.gov/)",
> > so is
> > IAU2000.wkt still up-to-date and what is the process/script to regenerate
> > it ?
> > 
> > > Trent, anything happened on your side about planetary proj support?
> > > 
> > > I am going to have a nother look about it, once answers/comments reach.
> > > Cheers,
> > > Yann
> > > 
> > > On 16 May 2014 at 04:46, Etienne Tourigny <etourigny.dev at gmail.com>
> > 
> > wrote:
> > > > You might be able to gzip compress the file
> > > > GDAL can read gzip files transparently, but I am not sure that the
> > > > csv
> > > > 
> > > >  reading code in GDAL works with compressed files.
> > > > 
> > > > On Thu, May 15, 2014 at 9:00 AM, Yann Chemin <ychemin at gmail.com>
> > 
> > wrote:
> > > >> Hi Even,
> > > >> 
> > > >> I would be interested to include it. But I see that the 1Mb
> > > >> uncompressed text is an issue.
> > > >> 
> > > >> If it was OK for the additional Mb in the source code,
> > > >> what would be the place to look into gdal code to create the patch
> > > >> needed?
> > > >> 
> > > >> Thanks,
> > > >> Yann
> > > >> 
> > > >> PS: did not copy other lists as I am not a member, registered to
> > > >> proj ML today though.
> > > >> 
> > > >> On 15/05/2014, Even Rouault <even.rouault at mines-paris.org> wrote:
> > > >> > Selon Yann Chemin <ychemin at gmail.com>:
> > > >> >> Hi,
> > > >> >> 
> > > >> >> is there planetary datum support in this new version (i.e. Moon
> > 
> > 2000,
> > 
> > > >> or
> > > >> 
> > > >> >> etc.)?
> > > >> > 
> > > >> > No, I don't think that the EPSG folks are interested in other
> > 
> > planets
> > 
> > > >> yet
> > > >> 
> > > >> > ;-)
> > > >> > But Frank mentionned some time ago (
> > 
> > http://osgeo-org.1560.x6.nabble.com/IAU-2000-Coordinate-System-Dictionar
> > 
> > > >> y-td3750798.html
> > > >> 
> > > >> > ) that he wanted to investigate how to deliver the IAU set of
> > > >> > planetary coordinate systems , but this hasn't been pursued
> > > >> > further AFAIK.
> > > >> > 
> > > >> > I see there's a version of this file here :
> > > >> > http://svn.osgeo.org/metacrs/sr.org/srsbrowser/data/IAU2000.wkt
> > > >> > 
> > > >> > Even
> > > >> > 
> > > >> >> Yann
> > > >> >> 
> > > >> >> On 14/05/2014, Even Rouault <even.rouault at mines-paris.org> wrote:
> > > >> >> > Hi,
> > > >> >> > 
> > > >> >> > I've followed the update process of the EPSG SRS database to
> > 
> > latest
> > 
> > > >> >> > v8.4,
> > > >> >> > and
> > > >> >> > just committed the updated files into libgeotiff, GDAL and PROJ
> > > >> 
> > > >> trunk.
> > > >> 
> > > >> >> > Also
> > > >> >> > 
> > > >> >> > submitted to PostGIS.
> > > >> >> > 
> > > >> >> > From what I can see, among many changes and additions, 2 new
> > > >> 
> > > >> projection
> > > >> 
> > > >> >> > methods have been added:
> > > >> >> > * 1051,Lambert Conic Conformal (2SP Michigan)
> > > >> >> > --> looks very close to standard "Lambert Conic Conformal
> > > >> >> > (2SP)",
> > > >> 
> > > >> with
> > > >> 
> > > >> >> > the
> > > >> >> > addition of a new parameter K, the ellipsoid scaling factor.
> > > >> >> > * 1052,Colombia Urban
> > > >> >> > 
> > > >> >> > I don't think any of those 2 new methods are currently handled
> > > >> >> > by
> > > >> 
> > > >> PROJ,
> > > >> 
> > > >> >> > so
> > > >> >> > the
> > > >> >> > new PCS based on those projection methods (3 Michigan SRS, and
> > > >> 
> > > >> several
> > > >> 
> > > >> >> > dozains
> > > >> >> > of Colombia PCS) will not be handled by GDAL nor PROJ.
> > > >> >> > 
> > > >> >> > Regarding GDAL, I've improved the add_esri_column.py script
> > > >> >> > (see http://trac.osgeo.org/geotiff/changeset/2446), so that we
> > > >> >> > have
> > 
> > more
> > 
> > > >> >> > ESRI
> > > >> >> > DATUM
> > > >> >> > names. That should make morphing from/to ESRI .prj files a bit
> > > >> 
> > > >> better.
> > > >> 
> > > >> >> > Regarding PROJ.4 'espg' and PostGIS spatial_ref_sys.sql files,
> > 
> > I've
> > 
> > > >> >> > also
> > > >> >> > added
> > > >> >> > the list of SRS that are GEOCCS (GeoCentric) and COMPD_CS
> > 
> > (Compound
> > 
> > > >> >> > Horizontal
> > > >> >> > + Vertical).
> > > >> >> > 
> > > >> >> > Please let me know if you see issues.
> > > >> >> > 
> > > >> >> > libgeotiff:
> > > >> >> > http://trac.osgeo.org/geotiff/ticket/63
> > > >> >> > http://trac.osgeo.org/geotiff/changeset/2447
> > > >> >> > 
> > > >> >> > GDAL:
> > > >> >> > http://trac.osgeo.org/gdal/ticket/5462
> > > >> >> > http://trac.osgeo.org/gdal/changeset/27322
> > > >> >> > 
> > > >> >> > PROJ:
> > > >> >> > http://trac.osgeo.org/proj/ticket/236
> > > >> >> > http://trac.osgeo.org/proj/changeset/2448
> > > >> >> > 
> > > >> >> > Submitted for PostGIS :
> > > >> >> > http://trac.osgeo.org/postgis/ticket/2737
> > > >> >> > 
> > > >> >> > Best regards,
> > > >> >> > 
> > > >> >> > Even
> > > >> >> > 
> > > >> >> > --
> > > >> >> > Geospatial professional services
> > > >> >> > http://even.rouault.free.fr/services.html
> > > >> >> > _______________________________________________
> > > >> >> > gdal-dev mailing list
> > > >> >> > gdal-dev at lists.osgeo.org
> > > >> >> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > >> >> 
> > > >> >> --
> > > >> >> ----
> > > >> 
> > > >> --
> > > >> ----
> > > >> _______________________________________________
> > > >> gdal-dev mailing list
> > > >> gdal-dev at lists.osgeo.org
> > > >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sebastian.walter at fu-berlin.de  Fri Dec  5 07:21:45 2014
From: sebastian.walter at fu-berlin.de (Sebastian Walter)
Date: Fri, 05 Dec 2014 16:21:45 +0100
Subject: [gdal-dev] VICAR format
In-Reply-To: <201412051518.50490.even.rouault@spatialys.com>
References: <5481BA66.1070008@fu-berlin.de>
	<201412051518.50490.even.rouault@spatialys.com>
Message-ID: <5481CD89.6060701@fu-berlin.de>

Hi Even,

On 12/05/14 15:18, Even Rouault wrote:

> To ease a future integration, could you update the files with the appropriate 
> copyright notice and the standard X/MIT licence text used by other GDAL files 
> (provided you're allowed to release the code under that licence) ?
> 

Thank you for pointing me on this.

The driver is based on the ISIS and PDS drivers so I hopefully don't
hurt the copyrights of the other author's driver code - as I pasted in
the usual header together with my name.

Regards, Sebastian



-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 5826 bytes
Desc: S/MIME Cryptographic Signature
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141205/974c619b/attachment.bin>

From thare at usgs.gov  Fri Dec  5 07:24:35 2014
From: thare at usgs.gov (Hare, Trent)
Date: Fri, 5 Dec 2014 08:24:35 -0700
Subject: [gdal-dev] Update of EPSG database to v8.4
In-Reply-To: <201412051603.54458.even.rouault@spatialys.com>
References: <201405141253.32397.even.rouault@mines-paris.org>
	<201412050946.26746.even.rouault@spatialys.com>
	<CAB6t5t9bbejx8AcRMqcZ3qRtPMDyqq0uEJkweg0Wsrq3m-Rzvg@mail.gmail.com>
	<201412051603.54458.even.rouault@spatialys.com>
Message-ID: <CAB6t5t84x45Y_rTH97cKp+totjsTojUGXhoNnratYbL6-Ug4kA@mail.gmail.com>

*>is my understanding correct that IAU2000.wkt is the result of a 20 KB
Python>script (create_IAU2000_wkt.py) run on a 3.8KB text file
(naifcodes_radii_m.txt)?*

Yes - but needs a couple minor tweaks.


*>So I can see 2 other alternatives instead of directly including
IAU2000.wkt :*

Both good ideas. I like to keep things as simple as possible so I will
defer to your judgment as what you think is best. I will fix the script
then we can decide if it should be included or ported.

-Trent


On Fri, Dec 5, 2014 at 8:03 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le vendredi 05 d?cembre 2014 15:43:48, Hare, Trent a ?crit :
> > Even,
> >    I agree we can probably purge the duplication. This was introduced
> > because I couldn't find a method to designate "ographic" latitudes versus
> > "ocentric" latitude systems within the WKT standard (still not clear on
> > that). Thus *even values* (e.g. 49900 Mars) are ocentric and *odd
> > values* (49901
> > Mars) are ographic... Argh - the original "proposal
> > <http://www.lpi.usra.edu/meetings/lpsc2006/pdf/1931.pdf>" is almost 10
> > years old but *any feedback* is still welcome.
> >
> >    There are a few bodies that need updates in that list. In short, when
> a
> > body is defined as tri-axial, the IAU determines a best fit single
> > spherical value (unfortunately this is not just the average of the three
> > but can be different for each. Thus I have to manually pull the radius
> > value from a published paper
> > <http://astrogeology.usgs.gov/groups/IAU-WGCCRE>). I have been meaning
> to
> > do that for sometime but since they are generally minor bodies, which we
> > don't have much data for, there wasn't much pressure in getting it done.
> >
> > *Let me take a stab at "version 2" over the weekend*. These were based on
> > the IAU 2000 NAIF codes and IAU 2000 published report. I will tweak,
> where
> > needed, the "IAU2000" codes since those codes are being used in some
> > WMS/WCS servers, spatial ref, QGIS, etc. there are some which so now be
> > tagged IAU2009 (or 2012, e.g. Mercury was recently updated). Not sure
> using
> > that method, updated namespace based on the year, was the best idea
> either.
> >
> > Just in case, the very simple script to convert Naif to WKT codes still
> > lives here: ftp://pdsimage2.wr.usgs.gov/pub/pigpen/ogc/ (but as stated
> > above, this original code doesn't fully address the tri-axial issue yet).
> >
> > thanks for continuing to help with this!
>
> Trent,
>
> is my understanding correct that IAU2000.wkt is the result of a 20 KB
> Python
> script (create_IAU2000_wkt.py) run on a 3.8KB text file
> (naifcodes_radii_m.txt)
> ?
>
> So I can see 2 other alternatives instead of directly including
> IAU2000.wkt :
> - either include the 2 above files in GDAL SVN, and run the python script
> in a
> make step of GDAL to generate  IAU2000.wkt
> - include naifcodes_radii_m.txt in GDAL SVN, and "port" the python script
> to a
> method in the OGRSpatialReference class. The logic would have to be
> reversed
> (division and modulo by 100): from an EPSG-like code, find the body code
> and
> projection method. This would likely be more efficient too instead of
> ingesting
> the IAU2000.wkt file.
>
> Even
>
> >
> > Regards,
> > Trent
> >
> >
> > On Fri, Dec 5, 2014 at 1:46 AM, Even Rouault <even.rouault at spatialys.com
> >
> >
> > wrote:
> > > Le vendredi 05 d?cembre 2014 06:37:34, Yann Chemin a ?crit :
> > > > Hi all,
> > > >
> > > > just want to pick up the status of this, anything new/started
> somewhere
> > > > I could help with?
> > >
> > > Not that I'm aware of.
> > >
> > > Looking more closely at
> > > http://svn.osgeo.org/metacrs/sr.org/srsbrowser/data/IAU2000.wkt, I see
> > > that
> > > each SRS is duplicated. For example 19900 and 19901 have the same WKT,
> > > 19910
> > > and 19911 also, and so on until the end of file. Does anyone know the
> > > reason
> > > for that ?
> > > And the header of the file says "This file derived from the naif ID
> > > Codes.txt
> > > file distributed by  USGS for NASA/IAU/NAIF (http://naif.jpl.nasa.gov/
> )",
> > > so is
> > > IAU2000.wkt still up-to-date and what is the process/script to
> regenerate
> > > it ?
> > >
> > > > Trent, anything happened on your side about planetary proj support?
> > > >
> > > > I am going to have a nother look about it, once answers/comments
> reach.
> > > > Cheers,
> > > > Yann
> > > >
> > > > On 16 May 2014 at 04:46, Etienne Tourigny <etourigny.dev at gmail.com>
> > >
> > > wrote:
> > > > > You might be able to gzip compress the file
> > > > > GDAL can read gzip files transparently, but I am not sure that the
> > > > > csv
> > > > >
> > > > >  reading code in GDAL works with compressed files.
> > > > >
> > > > > On Thu, May 15, 2014 at 9:00 AM, Yann Chemin <ychemin at gmail.com>
> > >
> > > wrote:
> > > > >> Hi Even,
> > > > >>
> > > > >> I would be interested to include it. But I see that the 1Mb
> > > > >> uncompressed text is an issue.
> > > > >>
> > > > >> If it was OK for the additional Mb in the source code,
> > > > >> what would be the place to look into gdal code to create the patch
> > > > >> needed?
> > > > >>
> > > > >> Thanks,
> > > > >> Yann
> > > > >>
> > > > >> PS: did not copy other lists as I am not a member, registered to
> > > > >> proj ML today though.
> > > > >>
> > > > >> On 15/05/2014, Even Rouault <even.rouault at mines-paris.org> wrote:
> > > > >> > Selon Yann Chemin <ychemin at gmail.com>:
> > > > >> >> Hi,
> > > > >> >>
> > > > >> >> is there planetary datum support in this new version (i.e. Moon
> > >
> > > 2000,
> > >
> > > > >> or
> > > > >>
> > > > >> >> etc.)?
> > > > >> >
> > > > >> > No, I don't think that the EPSG folks are interested in other
> > >
> > > planets
> > >
> > > > >> yet
> > > > >>
> > > > >> > ;-)
> > > > >> > But Frank mentionned some time ago (
> > >
> > >
> http://osgeo-org.1560.x6.nabble.com/IAU-2000-Coordinate-System-Dictionar
> > >
> > > > >> y-td3750798.html
> > > > >>
> > > > >> > ) that he wanted to investigate how to deliver the IAU set of
> > > > >> > planetary coordinate systems , but this hasn't been pursued
> > > > >> > further AFAIK.
> > > > >> >
> > > > >> > I see there's a version of this file here :
> > > > >> > http://svn.osgeo.org/metacrs/sr.org/srsbrowser/data/IAU2000.wkt
> > > > >> >
> > > > >> > Even
> > > > >> >
> > > > >> >> Yann
> > > > >> >>
> > > > >> >> On 14/05/2014, Even Rouault <even.rouault at mines-paris.org>
> wrote:
> > > > >> >> > Hi,
> > > > >> >> >
> > > > >> >> > I've followed the update process of the EPSG SRS database to
> > >
> > > latest
> > >
> > > > >> >> > v8.4,
> > > > >> >> > and
> > > > >> >> > just committed the updated files into libgeotiff, GDAL and
> PROJ
> > > > >>
> > > > >> trunk.
> > > > >>
> > > > >> >> > Also
> > > > >> >> >
> > > > >> >> > submitted to PostGIS.
> > > > >> >> >
> > > > >> >> > From what I can see, among many changes and additions, 2 new
> > > > >>
> > > > >> projection
> > > > >>
> > > > >> >> > methods have been added:
> > > > >> >> > * 1051,Lambert Conic Conformal (2SP Michigan)
> > > > >> >> > --> looks very close to standard "Lambert Conic Conformal
> > > > >> >> > (2SP)",
> > > > >>
> > > > >> with
> > > > >>
> > > > >> >> > the
> > > > >> >> > addition of a new parameter K, the ellipsoid scaling factor.
> > > > >> >> > * 1052,Colombia Urban
> > > > >> >> >
> > > > >> >> > I don't think any of those 2 new methods are currently
> handled
> > > > >> >> > by
> > > > >>
> > > > >> PROJ,
> > > > >>
> > > > >> >> > so
> > > > >> >> > the
> > > > >> >> > new PCS based on those projection methods (3 Michigan SRS,
> and
> > > > >>
> > > > >> several
> > > > >>
> > > > >> >> > dozains
> > > > >> >> > of Colombia PCS) will not be handled by GDAL nor PROJ.
> > > > >> >> >
> > > > >> >> > Regarding GDAL, I've improved the add_esri_column.py script
> > > > >> >> > (see http://trac.osgeo.org/geotiff/changeset/2446), so that
> we
> > > > >> >> > have
> > >
> > > more
> > >
> > > > >> >> > ESRI
> > > > >> >> > DATUM
> > > > >> >> > names. That should make morphing from/to ESRI .prj files a
> bit
> > > > >>
> > > > >> better.
> > > > >>
> > > > >> >> > Regarding PROJ.4 'espg' and PostGIS spatial_ref_sys.sql
> files,
> > >
> > > I've
> > >
> > > > >> >> > also
> > > > >> >> > added
> > > > >> >> > the list of SRS that are GEOCCS (GeoCentric) and COMPD_CS
> > >
> > > (Compound
> > >
> > > > >> >> > Horizontal
> > > > >> >> > + Vertical).
> > > > >> >> >
> > > > >> >> > Please let me know if you see issues.
> > > > >> >> >
> > > > >> >> > libgeotiff:
> > > > >> >> > http://trac.osgeo.org/geotiff/ticket/63
> > > > >> >> > http://trac.osgeo.org/geotiff/changeset/2447
> > > > >> >> >
> > > > >> >> > GDAL:
> > > > >> >> > http://trac.osgeo.org/gdal/ticket/5462
> > > > >> >> > http://trac.osgeo.org/gdal/changeset/27322
> > > > >> >> >
> > > > >> >> > PROJ:
> > > > >> >> > http://trac.osgeo.org/proj/ticket/236
> > > > >> >> > http://trac.osgeo.org/proj/changeset/2448
> > > > >> >> >
> > > > >> >> > Submitted for PostGIS :
> > > > >> >> > http://trac.osgeo.org/postgis/ticket/2737
> > > > >> >> >
> > > > >> >> > Best regards,
> > > > >> >> >
> > > > >> >> > Even
> > > > >> >> >
> > > > >> >> > --
> > > > >> >> > Geospatial professional services
> > > > >> >> > http://even.rouault.free.fr/services.html
> > > > >> >> > _______________________________________________
> > > > >> >> > gdal-dev mailing list
> > > > >> >> > gdal-dev at lists.osgeo.org
> > > > >> >> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > > >> >>
> > > > >> >> --
> > > > >> >> ----
> > > > >>
> > > > >> --
> > > > >> ----
> > > > >> _______________________________________________
> > > > >> gdal-dev mailing list
> > > > >> gdal-dev at lists.osgeo.org
> > > > >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141205/6c2c7023/attachment-0001.html>

From even.rouault at spatialys.com  Fri Dec  5 07:49:41 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 5 Dec 2014 16:49:41 +0100
Subject: [gdal-dev] VICAR format
In-Reply-To: <5481CD89.6060701@fu-berlin.de>
References: <5481BA66.1070008@fu-berlin.de>
	<201412051518.50490.even.rouault@spatialys.com>
	<5481CD89.6060701@fu-berlin.de>
Message-ID: <201412051649.41260.even.rouault@spatialys.com>

Le vendredi 05 d?cembre 2014 16:21:45, Sebastian Walter a ?crit :
> Hi Even,
> 
> On 12/05/14 15:18, Even Rouault wrote:
> > To ease a future integration, could you update the files with the
> > appropriate copyright notice and the standard X/MIT licence text used by
> > other GDAL files (provided you're allowed to release the code under that
> > licence) ?
> 
> Thank you for pointing me on this.
> 
> The driver is based on the ISIS and PDS drivers so I hopefully don't
> hurt the copyrights of the other author's driver code - as I pasted in
> the usual header together with my name.

It's fine. Technically you should retain the copyright line(s) if you derive a 
file from an existing one, but as you did is fine.
vicarkeywordhandler.h would also need copyright+licence.


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gdal at zeidlers.de  Mon Dec  8 01:44:41 2014
From: gdal at zeidlers.de (Julian Zeidler)
Date: Mon, 08 Dec 2014 10:44:41 +0100
Subject: [gdal-dev] IO Overhead when reading small subsets from Global Files
Message-ID: <54857309.8050009@zeidlers.de>

Dear Gdal-mailinglist,

I am currently trying to optimize a Global Modell.
The Modell reads small chunks (500x500) from lots (One for each day) of 
Global Datasets (40000x20000)
These Dataset are compressed NetCDFs with a tilling activated (100x100). 
(See output oif gdalinfo attached)
However when I measure the File-IO via NFS i get a Factor of ~10 
compared to the uncompressed Output image when testing with gdal. Inside 
teh Modell using the netCDF library diretyl i measure an even worst 
Factor of ~60 compared to compressed outputs). This is better than using 
untiled Inputs where the overhad was ~80x, but still a larger overhead 
than I expected.
I tested it using gdal_translate in.nc out.tif -srcwin 6000 6000 500 500

Is there anything that can be done to decrease this Overhead?
  For a global Modell Run the Overhead would add up to about 300TB*

*I am thankful for any suggestions.

Cheers Julian




Gdalinfo:

Driver: netCDF/Network Common Data Format

Files: LAI_Y2014_C10.nc

Size is 40320, 20160

Coordinate System is `'

Origin = (-179.999993460545994,90.000001090156800)

Pixel Size = (0.008928571482636,-0.008928571915164)

Metadata:

LAI#Fill_Value=-999

LAI#long_name=Leaf Area Index

LAI#units=m2/m2

LAI#valid_range={1,10}

latitude#long_name=Latitude

latitude#units=degrees_north

longitude#long_name=Longitude

longitude#units=degrees_east

NC_GLOBAL#comment=email:markus.tum at dlr.de

NC_GLOBAL#Conventions=CF-1.4

NC_GLOBAL#institution=DLR-DFD

NC_GLOBAL#title=10 Day LAI Composite based on Geoland2

Corner Coordinates:

Upper Left (-179.9999935,  90.0000011)

Lower Left (-179.9999935, -90.0000087)

Upper Right ( 180.0000087,  90.0000011)

Lower Right ( 180.0000087, -90.0000087)

Center ( 0.0000076,  -0.0000038)

Band 1 Block=100x100 Type=Float32, ColorInterp=Undefined

NoData Value=-999

Metadata:

Fill_Value=-999

long_name=Leaf Area Index

NETCDF_VARNAME=LAI

units=m2/m2

valid_range={1,10}

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141208/1a7fd269/attachment.html>

From even.rouault at spatialys.com  Mon Dec  8 02:10:07 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 8 Dec 2014 11:10:07 +0100
Subject: [gdal-dev] IO Overhead when reading small subsets from Global
	Files
In-Reply-To: <54857309.8050009@zeidlers.de>
References: <54857309.8050009@zeidlers.de>
Message-ID: <201412081110.07970.even.rouault@spatialys.com>

Le lundi 08 d?cembre 2014 10:44:41, Julian Zeidler a ?crit :
> Dear Gdal-mailinglist,
> 
> I am currently trying to optimize a Global Modell.
> The Modell reads small chunks (500x500) from lots (One for each day) of
> Global Datasets (40000x20000)
> These Dataset are compressed NetCDFs with a tilling activated (100x100).
> (See output oif gdalinfo attached)
> However when I measure the File-IO via NFS i get a Factor of ~10
> compared to the uncompressed Output image when testing with gdal. Inside
> teh Modell using the netCDF library diretyl i measure an even worst
> Factor of ~60 compared to compressed outputs). This is better than using
> untiled Inputs where the overhad was ~80x, but still a larger overhead
> than I expected.
> I tested it using gdal_translate in.nc out.tif -srcwin 6000 6000 500 500

Julian,

I'm not sure how chunck indexing works internally in netCDF, but there might 
be an overhead when reading the "index" the first time. So perhaps if you do 
your reads from the same GDAL dataset object, without closing it between 
different requests, the overhead will decrease. If you were already doing that, 
then I'm not sure what you can do, except converting into another format, like 
GTiff.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gdal at zeidlers.de  Mon Dec  8 02:14:04 2014
From: gdal at zeidlers.de (Julian Zeidler)
Date: Mon, 08 Dec 2014 11:14:04 +0100
Subject: [gdal-dev] IO Overhead when reading small subsets from Global
 Files
In-Reply-To: <201412081110.07970.even.rouault@spatialys.com>
References: <54857309.8050009@zeidlers.de>
	<201412081110.07970.even.rouault@spatialys.com>
Message-ID: <548579EC.6010408@zeidlers.de>

Hi Even,

Thanks for the quick reply.

I should have mentioned, that I also tried converting it to a compressed 
tiled Tiff.
There i can see the same kind of overhead. I extract a 1MB Subset from 
the File and depending on the Tiles 1 read between 9-12 MB via the Network.
The Process only reads one 500x500 block from every single File

Cheers Julian



Am 08.12.2014 11:10, schrieb Even Rouault:
> Le lundi 08 d?cembre 2014 10:44:41, Julian Zeidler a ?crit :
>> Dear Gdal-mailinglist,
>>
>> I am currently trying to optimize a Global Modell.
>> The Modell reads small chunks (500x500) from lots (One for each day) of
>> Global Datasets (40000x20000)
>> These Dataset are compressed NetCDFs with a tilling activated (100x100).
>> (See output oif gdalinfo attached)
>> However when I measure the File-IO via NFS i get a Factor of ~10
>> compared to the uncompressed Output image when testing with gdal. Inside
>> teh Modell using the netCDF library diretyl i measure an even worst
>> Factor of ~60 compared to compressed outputs). This is better than using
>> untiled Inputs where the overhad was ~80x, but still a larger overhead
>> than I expected.
>> I tested it using gdal_translate in.nc out.tif -srcwin 6000 6000 500 500
> Julian,
>
> I'm not sure how chunck indexing works internally in netCDF, but there might
> be an overhead when reading the "index" the first time. So perhaps if you do
> your reads from the same GDAL dataset object, without closing it between
> different requests, the overhead will decrease. If you were already doing that,
> then I'm not sure what you can do, except converting into another format, like
> GTiff.
>
> Even
>


From even.rouault at spatialys.com  Mon Dec  8 02:26:12 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 8 Dec 2014 11:26:12 +0100
Subject: [gdal-dev] IO Overhead when reading small subsets from Global
	Files
In-Reply-To: <548579EC.6010408@zeidlers.de>
References: <54857309.8050009@zeidlers.de>
	<201412081110.07970.even.rouault@spatialys.com>
	<548579EC.6010408@zeidlers.de>
Message-ID: <201412081126.12286.even.rouault@spatialys.com>

Le lundi 08 d?cembre 2014 11:14:04, Julian Zeidler a ?crit :
> Hi Even,
> 
> Thanks for the quick reply.
> 
> I should have mentioned, that I also tried converting it to a compressed
> tiled Tiff.
> There i can see the same kind of overhead. I extract a 1MB Subset from
> the File and depending on the Tiles 1 read between 9-12 MB via the Network.
> The Process only reads one 500x500 block from every single File

For GeoTIFF, I would expect the overhead to be the size of the "tags" that 
store the offset and size of each block, so for a 40000x20000 dataset with 
100x100 blocks :
(40000 / 100) * (20000 / 100) * 2 * 4 = 640 000 bytes
I can't explain how it could reach 9-12 MB 

And if you use GDAL >= 1.11 compiled with its internal libtiff, there's a trick 
that avoids reading the full tags, and should only read them by "pages" of 4K, 
resulting in a neglectable overhead.

> 
> Cheers Julian
> 
> Am 08.12.2014 11:10, schrieb Even Rouault:
> > Le lundi 08 d?cembre 2014 10:44:41, Julian Zeidler a ?crit :
> >> Dear Gdal-mailinglist,
> >> 
> >> I am currently trying to optimize a Global Modell.
> >> The Modell reads small chunks (500x500) from lots (One for each day) of
> >> Global Datasets (40000x20000)
> >> These Dataset are compressed NetCDFs with a tilling activated (100x100).
> >> (See output oif gdalinfo attached)
> >> However when I measure the File-IO via NFS i get a Factor of ~10
> >> compared to the uncompressed Output image when testing with gdal. Inside
> >> teh Modell using the netCDF library diretyl i measure an even worst
> >> Factor of ~60 compared to compressed outputs). This is better than using
> >> untiled Inputs where the overhad was ~80x, but still a larger overhead
> >> than I expected.
> >> I tested it using gdal_translate in.nc out.tif -srcwin 6000 6000 500 500
> > 
> > Julian,
> > 
> > I'm not sure how chunck indexing works internally in netCDF, but there
> > might be an overhead when reading the "index" the first time. So perhaps
> > if you do your reads from the same GDAL dataset object, without closing
> > it between different requests, the overhead will decrease. If you were
> > already doing that, then I'm not sure what you can do, except converting
> > into another format, like GTiff.
> > 
> > Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gdal at zeidlers.de  Mon Dec  8 03:21:18 2014
From: gdal at zeidlers.de (Julian Zeidler)
Date: Mon, 08 Dec 2014 12:21:18 +0100
Subject: [gdal-dev] IO Overhead when reading small subsets from Global
 Files
In-Reply-To: <201412081126.12286.even.rouault@spatialys.com>
References: <54857309.8050009@zeidlers.de>
	<201412081110.07970.even.rouault@spatialys.com>
	<548579EC.6010408@zeidlers.de>
	<201412081126.12286.even.rouault@spatialys.com>
Message-ID: <548589AE.9040503@zeidlers.de>

Am 08.12.2014 11:26, schrieb Even Rouault:
> Le lundi 08 d?cembre 2014 11:14:04, Julian Zeidler a ?crit :
>> Hi Even,
>>
>> Thanks for the quick reply.
>>
>> I should have mentioned, that I also tried converting it to a compressed
>> tiled Tiff.
>> There i can see the same kind of overhead. I extract a 1MB Subset from
>> the File and depending on the Tiles 1 read between 9-12 MB via the Network.
>> The Process only reads one 500x500 block from every single File
> For GeoTIFF, I would expect the overhead to be the size of the "tags" that
> store the offset and size of each block, so for a 40000x20000 dataset with
> 100x100 blocks :
> (40000 / 100) * (20000 / 100) * 2 * 4 = 640 000 bytes
> I can't explain how it could reach 9-12 MB
>
> And if you use GDAL >= 1.11 compiled with its internal libtiff, there's a trick
> that avoids reading the full tags, and should only read them by "pages" of 4K,
> resulting in a neglectable overhead.
I just rechecked the versions.
it is

Gdal: 1.11.0 with internal libtiff and

Netcdf: 4.2

I was quite surprised by the overhead myself.  I ran some quick test 
with different blocksizes and output windows.  The overhead decreased 
with size (1000x1000, 2000x2000) but was still significant at 5x output 
size.
I guess we will have to live with the Overhead.

Thanks
Julian


>> Cheers Julian
>>
>> Am 08.12.2014 11:10, schrieb Even Rouault:
>>> Le lundi 08 d?cembre 2014 10:44:41, Julian Zeidler a ?crit :
>>>> Dear Gdal-mailinglist,
>>>>
>>>> I am currently trying to optimize a Global Modell.
>>>> The Modell reads small chunks (500x500) from lots (One for each day) of
>>>> Global Datasets (40000x20000)
>>>> These Dataset are compressed NetCDFs with a tilling activated (100x100).
>>>> (See output oif gdalinfo attached)
>>>> However when I measure the File-IO via NFS i get a Factor of ~10
>>>> compared to the uncompressed Output image when testing with gdal. Inside
>>>> teh Modell using the netCDF library diretyl i measure an even worst
>>>> Factor of ~60 compared to compressed outputs). This is better than using
>>>> untiled Inputs where the overhad was ~80x, but still a larger overhead
>>>> than I expected.
>>>> I tested it using gdal_translate in.nc out.tif -srcwin 6000 6000 500 500
>>> Julian,
>>>
>>> I'm not sure how chunck indexing works internally in netCDF, but there
>>> might be an overhead when reading the "index" the first time. So perhaps
>>> if you do your reads from the same GDAL dataset object, without closing
>>> it between different requests, the overhead will decrease. If you were
>>> already doing that, then I'm not sure what you can do, except converting
>>> into another format, like GTiff.
>>>
>>> Even

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141208/7094a637/attachment-0001.html>

From kmichael.aye at gmail.com  Mon Dec  8 17:39:35 2014
From: kmichael.aye at gmail.com (=?UTF-8?Q?K=2E-Michael_Aye?=)
Date: Mon, 08 Dec 2014 17:39:35 -0800 (PST)
Subject: [gdal-dev] PDS Reader error
Message-ID: <7303A0A7-61CD-47DF-8A92-2649AC660AD0@gmail.com>

  An old bug (or lack of implementation) that supposedly was fixed in GDAL 1.9.0 as mentioned in this message:
http://lists.osgeo.org/pipermail/gdal-dev/2014-July/039508.html




might have crept up again. Or, possibly, it is just another version of the endless parameter space of the format of PDS3 binary files that the PDS reader understandably could not yet account for until somebody tried it on this older data.


I am trying to read the Cassini UVIS data file in this linked zip:
https://dl.dropboxusercontent.com/u/139035/PDSdata-2014-12-08T17-04-46-08-00.zip




and am getting the same errors as mentioned in above forum post:


In [8]: gdal.Open('./FUV2004_183_03_24.LBL')
ERROR 1: Sample_bits of 0 is not supported in this gdal PDS reader.


In [9]: gdal.Open('./FUV2004_183_03_24.DAT')
ERROR 4: `./FUV2004_183_03_24.DAT' not recognised as a supported file format.




In [10]: gdal.VersionInfo()
Out[10]: '1110100'





Regards,
Michael



  ??Michael Aye
Cassini UVIS and MAVEN IUVS team
LASP, Boulder CO


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141208/c9808ec9/attachment.html>

From thare at usgs.gov  Mon Dec  8 20:40:50 2014
From: thare at usgs.gov (Hare, Trent)
Date: Mon, 8 Dec 2014 21:40:50 -0700
Subject: [gdal-dev] PDS Reader error
In-Reply-To: <7303A0A7-61CD-47DF-8A92-2649AC660AD0@gmail.com>
References: <7303A0A7-61CD-47DF-8A92-2649AC660AD0@gmail.com>
Message-ID: <CAB6t5t_=mYWNXiTWwbA91G2iRrP_bTOpBTHJZcAo88g6r=V+EQ@mail.gmail.com>

Michael,
   This is an odd hybrid PDS/ISIS2 label. Before seeing this label I have
only ever seen the "QUBE" label object within an ISIS2 file. This was *not*
one of the PDS label options -- at least when the gdal reader was written.
For rasters files within PDS (v3), as far as I understood, only the
"^IMAGE" or "^SPECTRAL_QUBE" were allowed. I don't know the heritage of
this label or when it was implemented but it is a strange beast. This is
one reason, among many others, that I have always placed a caveat on the
GDAL PDS readers that it probably supports about 70% of PDS images. It
obviously doesn't support this type or if the image section is compressed
(e.g. MOC edrs), and it will always prefer if the image is map projected
and the target is a planetary surface. This PDS label is not only an odd
PDS/ISIS2 hybrid label it is an image of planetary rings(!) -- I think.

As a check, the PDS importer in ISIS3 also fails.
mag{8}> pds2isis from=FUV2004_183_03_24.LBL to=test.cub
**PROGRAMMER ERROR** Unsupported axis order [AXIS_NAME = (BAND, LINE,
SAMPLE)].

Anyway, to possibly read the image you might be able to hack the label but
this seems dangerous and would be probably still be missing something
needed from the label (even though it kind-of works).

change
1.) ^QUBE to ^IMAGE
2.) OBJECT = QUBE to OBJECT = IMAGE
3.) END_OBJECT = QUBE to END_OBJECT = IMAGE

after
1.)  CORE_ITEM_BYTES               = 2
SAMPLE_BITS = 16

Again, gdalinfo will not fail but I have no idea if the data is being read
correctly.

For this hybrid label and the fact I think the target is planetary rings
I'm not sure it would be worth trying to patch GDAL to support it...? Sorry
- I haven't been much help.

good luck!
Trent







On Mon, Dec 8, 2014 at 6:39 PM, K.-Michael Aye <kmichael.aye at gmail.com>
wrote:

>   An old bug (or lack of implementation) that supposedly was fixed in
> GDAL 1.9.0 as mentioned in this message:
>  http://lists.osgeo.org/pipermail/gdal-dev/2014-July/039508.html
>
> might have crept up again. Or, possibly, it is just another version of the
> endless parameter space of the format of PDS3 binary files that the PDS
> reader understandably could not yet account for until somebody tried it on
> this older data.
>
> I am trying to read the Cassini UVIS data file in this linked zip:
>
> https://dl.dropboxusercontent.com/u/139035/PDSdata-2014-12-08T17-04-46-08-00.zip
>
> and am getting the same errors as mentioned in above forum post:
>
> In [8]: gdal.Open('./FUV2004_183_03_24.LBL')
> ERROR 1: Sample_bits of 0 is not supported in this gdal PDS reader.
>
> In [9]: gdal.Open('./FUV2004_183_03_24.DAT')
> ERROR 4: `./FUV2004_183_03_24.DAT' not recognised as a supported file
> format.
>
>
> In [10]: gdal.VersionInfo()
> Out[10]: '1110100'
>
>
> Regards,
> Michael
>
>  ?
> Michael Aye
> Cassini UVIS and MAVEN IUVS team
> LASP, Boulder CO
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141208/2f4e49cc/attachment.html>

From ychemin at gmail.com  Mon Dec  8 20:52:59 2014
From: ychemin at gmail.com (Yann Chemin)
Date: Tue, 9 Dec 2014 10:22:59 +0530
Subject: [gdal-dev] PDS Reader error
In-Reply-To: <CAB6t5t_=mYWNXiTWwbA91G2iRrP_bTOpBTHJZcAo88g6r=V+EQ@mail.gmail.com>
References: <7303A0A7-61CD-47DF-8A92-2649AC660AD0@gmail.com>
	<CAB6t5t_=mYWNXiTWwbA91G2iRrP_bTOpBTHJZcAo88g6r=V+EQ@mail.gmail.com>
Message-ID: <CALTpO6A9sycmK5O2MeirDEbkwbs49B37nmCbr5ihKHDWVzRERA@mail.gmail.com>

Hi Trent,

Just wondering, as even ISIS does not import it, do you know any guys
actually reading the rings images? What software do they use?
It might be worth just clarifying how they actually read them, even just
for the sake of pds2isis and sanitizing the gdal driver ...

Cheers,
Yann

On 9 December 2014 at 10:10, Hare, Trent <thare at usgs.gov> wrote:

> Michael,
>    This is an odd hybrid PDS/ISIS2 label. Before seeing this label I have
> only ever seen the "QUBE" label object within an ISIS2 file. This was
> *not* one of the PDS label options -- at least when the gdal reader was
> written. For rasters files within PDS (v3), as far as I understood, only
> the "^IMAGE" or "^SPECTRAL_QUBE" were allowed. I don't know the heritage of
> this label or when it was implemented but it is a strange beast. This is
> one reason, among many others, that I have always placed a caveat on the
> GDAL PDS readers that it probably supports about 70% of PDS images. It
> obviously doesn't support this type or if the image section is compressed
> (e.g. MOC edrs), and it will always prefer if the image is map projected
> and the target is a planetary surface. This PDS label is not only an odd
> PDS/ISIS2 hybrid label it is an image of planetary rings(!) -- I think.
>
> As a check, the PDS importer in ISIS3 also fails.
> mag{8}> pds2isis from=FUV2004_183_03_24.LBL to=test.cub
> **PROGRAMMER ERROR** Unsupported axis order [AXIS_NAME = (BAND, LINE,
> SAMPLE)].
>
> Anyway, to possibly read the image you might be able to hack the label but
> this seems dangerous and would be probably still be missing something
> needed from the label (even though it kind-of works).
>
> change
> 1.) ^QUBE to ^IMAGE
> 2.) OBJECT = QUBE to OBJECT = IMAGE
> 3.) END_OBJECT = QUBE to END_OBJECT = IMAGE
>
> after
> 1.)  CORE_ITEM_BYTES               = 2
> SAMPLE_BITS = 16
>
> Again, gdalinfo will not fail but I have no idea if the data is being read
> correctly.
>
> For this hybrid label and the fact I think the target is planetary rings
> I'm not sure it would be worth trying to patch GDAL to support it...? Sorry
> - I haven't been much help.
>
> good luck!
> Trent
>
>
>
>
>
>
>
> On Mon, Dec 8, 2014 at 6:39 PM, K.-Michael Aye <kmichael.aye at gmail.com>
> wrote:
>
>>   An old bug (or lack of implementation) that supposedly was fixed in
>> GDAL 1.9.0 as mentioned in this message:
>>  http://lists.osgeo.org/pipermail/gdal-dev/2014-July/039508.html
>>
>> might have crept up again. Or, possibly, it is just another version of
>> the endless parameter space of the format of PDS3 binary files that the PDS
>> reader understandably could not yet account for until somebody tried it on
>> this older data.
>>
>> I am trying to read the Cassini UVIS data file in this linked zip:
>>
>> https://dl.dropboxusercontent.com/u/139035/PDSdata-2014-12-08T17-04-46-08-00.zip
>>
>> and am getting the same errors as mentioned in above forum post:
>>
>> In [8]: gdal.Open('./FUV2004_183_03_24.LBL')
>> ERROR 1: Sample_bits of 0 is not supported in this gdal PDS reader.
>>
>> In [9]: gdal.Open('./FUV2004_183_03_24.DAT')
>> ERROR 4: `./FUV2004_183_03_24.DAT' not recognised as a supported file
>> format.
>>
>>
>> In [10]: gdal.VersionInfo()
>> Out[10]: '1110100'
>>
>>
>> Regards,
>> Michael
>>
>>  ?
>> Michael Aye
>> Cassini UVIS and MAVEN IUVS team
>> LASP, Boulder CO
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
----
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141209/3356deb5/attachment-0001.html>

From landa.martin at gmail.com  Tue Dec  9 01:33:44 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Tue, 9 Dec 2014 10:33:44 +0100
Subject: [gdal-dev] shp - inconsistent extent
In-Reply-To: <201412031149.39773.even.rouault@spatialys.com>
References: <CA+Ei1OcoD2S+iaubFQmcnjgMAZtDnH_LsxNrRFatBavKF9E10g@mail.gmail.com>
	<201412031144.30492.even.rouault@spatialys.com>
	<CA+Ei1Ofd-1J52Ou6_dREPxF_KriVpTVRUp2QNgUJnbHmFCiLcA@mail.gmail.com>
	<201412031149.39773.even.rouault@spatialys.com>
Message-ID: <CA+Ei1OfTs9LOgkgMJFfu7PpXmdC6Nv3Rjn1z6r_6Vg75dYLeGA@mail.gmail.com>

Hi,

2014-12-03 11:49 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:

> Hum, could you "fix" / "repair" / "save as" the shapefile with ArcGIS, whatever
> it offers so it can generate a shapefile on which it doesn't protest anymore ?

unfortunately ArcGIS is not able to fix such shapefile, repair
geometry tool fails with "ERROR 001143: Background server threw an
exception."...

> That way we could compare the difference between shapefiles. The 100 first bytes
> of .shp and .shx must be the key.

Broken shapefile can be found [1]. Thanks, Martin

[1] http://geo1.fsv.cvut.cz/landa/parcely.zip

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.eu/mentors/landa

From andre+joost at nurfuerspam.de  Tue Dec  9 08:22:04 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Tue, 09 Dec 2014 17:22:04 +0100
Subject: [gdal-dev] shp - inconsistent extent
In-Reply-To: <CA+Ei1OfTs9LOgkgMJFfu7PpXmdC6Nv3Rjn1z6r_6Vg75dYLeGA@mail.gmail.com>
References: <CA+Ei1OcoD2S+iaubFQmcnjgMAZtDnH_LsxNrRFatBavKF9E10g@mail.gmail.com>	<201412031144.30492.even.rouault@spatialys.com>	<CA+Ei1Ofd-1J52Ou6_dREPxF_KriVpTVRUp2QNgUJnbHmFCiLcA@mail.gmail.com>	<201412031149.39773.even.rouault@spatialys.com>
	<CA+Ei1OfTs9LOgkgMJFfu7PpXmdC6Nv3Rjn1z6r_6Vg75dYLeGA@mail.gmail.com>
Message-ID: <m677l0$spv$1@ger.gmane.org>

Am 09.12.2014 um 10:33 schrieb Martin Landa:

>
> Broken shapefile can be found [1].
>
> [1] http://geo1.fsv.cvut.cz/landa/parcely.zip
>

The file gets loaded into QGIS without complaints.
Does ARCGIS like the result of an ogr2ogr transformation of the file?

Greetings,
Andr? Joost


From gdal at stripfamily.net  Tue Dec  9 08:48:26 2014
From: gdal at stripfamily.net (David Strip)
Date: Tue, 09 Dec 2014 09:48:26 -0700
Subject: [gdal-dev] shp - inconsistent extent
In-Reply-To: <CA+Ei1OfTs9LOgkgMJFfu7PpXmdC6Nv3Rjn1z6r_6Vg75dYLeGA@mail.gmail.com>
References: <CA+Ei1OcoD2S+iaubFQmcnjgMAZtDnH_LsxNrRFatBavKF9E10g@mail.gmail.com>	<201412031144.30492.even.rouault@spatialys.com>	<CA+Ei1Ofd-1J52Ou6_dREPxF_KriVpTVRUp2QNgUJnbHmFCiLcA@mail.gmail.com>	<201412031149.39773.even.rouault@spatialys.com>
	<CA+Ei1OfTs9LOgkgMJFfu7PpXmdC6Nv3Rjn1z6r_6Vg75dYLeGA@mail.gmail.com>
Message-ID: <548727DA.9050607@stripfamily.net>

The linked file opens without warning or error in ArcGIS 10.2.2 and qgis
2.0.1 for me.
Windows 7.


From landa.martin at gmail.com  Tue Dec  9 08:55:16 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Tue, 9 Dec 2014 17:55:16 +0100
Subject: [gdal-dev] shp - inconsistent extent
In-Reply-To: <54870F15.5070901@stripfamily.net>
References: <CA+Ei1OcoD2S+iaubFQmcnjgMAZtDnH_LsxNrRFatBavKF9E10g@mail.gmail.com>
	<201412031144.30492.even.rouault@spatialys.com>
	<CA+Ei1Ofd-1J52Ou6_dREPxF_KriVpTVRUp2QNgUJnbHmFCiLcA@mail.gmail.com>
	<201412031149.39773.even.rouault@spatialys.com>
	<CA+Ei1OfTs9LOgkgMJFfu7PpXmdC6Nv3Rjn1z6r_6Vg75dYLeGA@mail.gmail.com>
	<54870F15.5070901@stripfamily.net>
Message-ID: <CA+Ei1OfVxiiDU6ez1X-kdmw94+XXqYPHTjeZrumnB1K6+Wgy6w@mail.gmail.com>

Hi,

2014-12-09 16:02 GMT+01:00 David Strip <gdal at stripfamily.net>:
> The linked file opens without warning or error in ArcGIS 10.2.2 and qgis
> 2.0.1 for me.
> Windows 7.

it's strange, 10.2.1.3497, see the attached screenshot. QGIS has no
problem. Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.eu/mentors/landa
-------------- next part --------------
A non-text attachment was scrubbed...
Name: arcgis-warning.png
Type: image/png
Size: 7121 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141209/6e32e8a5/attachment.png>

From joem at hiltonsoftware.com  Tue Dec  9 12:09:59 2014
From: joem at hiltonsoftware.com (joem at hiltonsoftware.com)
Date: Tue, 9 Dec 2014 15:09:59 -0500
Subject: [gdal-dev] GDALSuggestedWarpOutput() problem
Message-ID: <001101d013ec$1d97ed90$58c7c8b0$@hiltonsoftware.com>

Hey everyone,


I am working on a tool to project FAA charts from Lambert Conformal Conic to
Web Mercator (EPSG 900913).  It seems to be producing correct output except
for a FAA chart of the East Aleutian Islands.    When I traced the problem
in my code, it appears that GDALSuggestedWarpOutput() is giving me a width
and height far too small given the input tiff had larger dimensions.  The
source GeoTiff has dimensions of 15555x5786 but GDALSuggestedWarpOutput()
gives a suggested width of 17050  and a height of 178.  A height of 178
pixels surely has to be wrong.    I have added the well-known text and
proj.4  output from gdalinfo.exe of the input tiff below.   Although I am
not entirely sure if I should, I have been using the values supplied by
GDALSuggestedWarpOutput() for creating my output Geotiff as if the output
will always be valid.  

* Why is GDALSuggestedWarpOutput() giving bad values for the width and
height of the output tiff?
* Is this incorrect usage of GDALSuggestedWarpOutput() or is it a bug?


PROJ.4 : '+proj=lcc +lat_1=54.66666666666666 +lat_2=49.33333333333334
+lat_0=52.16666666666666 +lon_0=-177.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m
+no_defs '

OGC WKT :
PROJCS["unnamed",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",54.66666666666666],
    PARAMETER["standard_parallel_2",49.33333333333334],
    PARAMETER["latitude_of_origin",52.16666666666666],
    PARAMETER["central_meridian",-177.5],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]




From MWilson at edrnet.com  Tue Dec  9 11:37:26 2014
From: MWilson at edrnet.com (MWilson Matthew)
Date: Tue, 9 Dec 2014 19:37:26 +0000
Subject: [gdal-dev] gdalwarp/info failure on jp2 in secure AWS environment
Message-ID: <CY1PR0701MB120996BD4833B959FA8D6F4CD4650@CY1PR0701MB1209.namprd07.prod.outlook.com>

Good afternoon,
  I've been trying to track down some intermittent failures and I believe I've come across something.  I was able to run the gdalinfo command on imagery on s3 using a presigned url, vsicurl, and the following options:
--config GDAL_HTTP_UNSAFESSL YES --config GDAL_DISABLE_READDIR_ON_OPEN EMPTY_DIR --config CPL_VSIL_CURL_USE_HEAD NO

  However, I did note today that running the gdalinfo command on a jp2 did not return the coordinate information against an s3 image that required a presigned url.  Running it against another s3 instance that does not require a presigned url resulted in the full coordinate/projection information being visible.

  As another test, I ran the gdalinfo command against a tif file on the presigned url instance, and that also worked.

  To me, this means that there is a limitation in how gdal is reading the images on s3 when a presigned url is required to get at them, specifically, the auxiliary files aren't being read.  This does kind of make sense because the geotiff would have that information in the header if I'm not mistaken, and the jp2 would not.

  Would anyone on the list have come across this before?  Does this make sense?

Thanks,
Matthew
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141209/994b6fe4/attachment.html>

From robert.coup at koordinates.com  Tue Dec  9 15:08:35 2014
From: robert.coup at koordinates.com (Robert Coup)
Date: Wed, 10 Dec 2014 12:08:35 +1300
Subject: [gdal-dev] gdalwarp/info failure on jp2 in secure AWS
	environment
In-Reply-To: <CY1PR0701MB120996BD4833B959FA8D6F4CD4650@CY1PR0701MB1209.namprd07.prod.outlook.com>
References: <CY1PR0701MB120996BD4833B959FA8D6F4CD4650@CY1PR0701MB1209.namprd07.prod.outlook.com>
Message-ID: <CAFLLRpJes10K2q=pObUPnWLBcS3B5oAiR_k8Werk1D7yriqaHw@mail.gmail.com>

Does "gdalinfo --debug on --config CPL_CURL_VERBOSE YES ..." show 2x
requests?

I think the problem likely is the S3 signature is only valid for one
file/url, not the corresponding .jp2.aux.xml file, so the request for the
latter fails. Not sure of an easy way to fix that without writing a
vsicurls3 module that can do the signing...

Though JP2 supports storing coordinate information (bounds) in the file,
just not the projection details - not sure if you could work around that?

Rob :)


On Wed, Dec 10, 2014 at 8:37 AM, MWilson Matthew <MWilson at edrnet.com> wrote:

>  Good afternoon,
>
>   I?ve been trying to track down some intermittent failures and I believe
> I?ve come across something.  I was able to run the gdalinfo command on
> imagery on s3 using a presigned url, vsicurl, and the following options:
>
>  --config GDAL_HTTP_UNSAFESSL YES --config GDAL_DISABLE_READDIR_ON_OPEN
> EMPTY_DIR --config CPL_VSIL_CURL_USE_HEAD NO
>
>
>
>   However, I did note today that running the gdalinfo command on a jp2 did
> not return the coordinate information against an s3 image that required a
> presigned url.  Running it against another s3 instance that does not
> require a presigned url resulted in the full coordinate/projection
> information being visible.
>
>
>
>   As another test, I ran the gdalinfo command against a tif file on the
> presigned url instance, and that also worked.
>
>
>
>   To me, this means that there is a limitation in how gdal is reading the
> images on s3 when a presigned url is required to get at them, specifically,
> the auxiliary files aren?t being read.  This does kind of make sense
> because the geotiff would have that information in the header if I?m not
> mistaken, and the jp2 would not.
>
>
>
>   Would anyone on the list have come across this before?  Does this make
> sense?
>
>
>
> Thanks,
>
> Matthew
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 

*Koordinates*PO Box 1604, Shortland St, Auckland 1140, New Zealand
Phone +64-9-966 0433 koordinates.com <https://koordinates.com/about>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141210/f9310184/attachment.html>

From norman at cloudant.com  Tue Dec  9 18:38:45 2014
From: norman at cloudant.com (Norman Barker)
Date: Tue, 9 Dec 2014 19:38:45 -0700
Subject: [gdal-dev] EPSG codes
Message-ID: <CACSHx9nuD-Vefcur-WdfoLmTReJJ_sPeXQ9zkRHWJv2tiQmxCQ@mail.gmail.com>

Hi,

I am trying to extract the EPSG code from the SpatialReference object as
follow;

            const char * pszEpsg;
            char **papszTokens;

            if (poSpatialRef->IsProjected())
                pszEpsg =
poSpatialRef->GetAttrNode("projcs")->GetNode("authority")->GetValue();
            else
                pszEpsg =
poSpatialRef->GetAttrNode("geogcs")->GetNode("authority")->GetValue();

It seems that GetAttrNode returns NULL even ogrinfo -so reports that this
is present.

Any ideas?

Thanks,

Norman
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141209/1198105e/attachment.html>

From even.rouault at spatialys.com  Wed Dec 10 01:51:07 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 10 Dec 2014 10:51:07 +0100
Subject: [gdal-dev] gdalwarp/info failure on jp2 in secure AWS
	environment
In-Reply-To: <CAFLLRpJes10K2q=pObUPnWLBcS3B5oAiR_k8Werk1D7yriqaHw@mail.gmail.com>
References: <CY1PR0701MB120996BD4833B959FA8D6F4CD4650@CY1PR0701MB1209.namprd07.prod.outlook.com>
	<CAFLLRpJes10K2q=pObUPnWLBcS3B5oAiR_k8Werk1D7yriqaHw@mail.gmail.com>
Message-ID: <201412101051.08199.even.rouault@spatialys.com>

Le mercredi 10 d?cembre 2014 00:08:35, Robert Coup a ?crit :
> Does "gdalinfo --debug on --config CPL_CURL_VERBOSE YES ..." show 2x
> requests?
> 
> I think the problem likely is the S3 signature is only valid for one
> file/url, not the corresponding .jp2.aux.xml file, so the request for the
> latter fails. Not sure of an easy way to fix that without writing a
> vsicurls3 module that can do the signing...
> 
> Though JP2 supports storing coordinate information (bounds) in the file,
> just not the projection details - not sure if you could work around that?

The problem might also be the use of "--config GDAL_DISABLE_READDIR_ON_OPEN 
EMPTY_DIR". As its name (hopefully) implies it means that the listing of the 
directory where the main file is will be returned as empty. So no .aux.xml file, 
or any auxiliary side files, will be ever tried to be read.

Even

> 
> Rob :)
> 
> On Wed, Dec 10, 2014 at 8:37 AM, MWilson Matthew <MWilson at edrnet.com> wrote:
> >  Good afternoon,
> >  
> >   I?ve been trying to track down some intermittent failures and I believe
> > 
> > I?ve come across something.  I was able to run the gdalinfo command on
> > 
> > imagery on s3 using a presigned url, vsicurl, and the following options:
> >  --config GDAL_HTTP_UNSAFESSL YES --config GDAL_DISABLE_READDIR_ON_OPEN
> > 
> > EMPTY_DIR --config CPL_VSIL_CURL_USE_HEAD NO
> > 
> >   However, I did note today that running the gdalinfo command on a jp2
> >   did
> > 
> > not return the coordinate information against an s3 image that required a
> > presigned url.  Running it against another s3 instance that does not
> > require a presigned url resulted in the full coordinate/projection
> > information being visible.
> > 
> >   As another test, I ran the gdalinfo command against a tif file on the
> > 
> > presigned url instance, and that also worked.
> > 
> >   To me, this means that there is a limitation in how gdal is reading the
> > 
> > images on s3 when a presigned url is required to get at them,
> > specifically, the auxiliary files aren?t being read.  This does kind of
> > make sense because the geotiff would have that information in the header
> > if I?m not mistaken, and the jp2 would not.
> > 
> >   Would anyone on the list have come across this before?  Does this make
> > 
> > sense?
> > 
> > 
> > 
> > Thanks,
> > 
> > Matthew
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Dec 10 02:01:04 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 10 Dec 2014 11:01:04 +0100
Subject: [gdal-dev] GDALSuggestedWarpOutput() problem
In-Reply-To: <001101d013ec$1d97ed90$58c7c8b0$@hiltonsoftware.com>
References: <001101d013ec$1d97ed90$58c7c8b0$@hiltonsoftware.com>
Message-ID: <201412101101.05005.even.rouault@spatialys.com>

"joem",

It seems that your input dataset is very close to the dateline, and very 
likely crossing it. I'm not that surprised that GDALSuggestedWarpOutput() has 
issues at that discontinuity. But I think it might have indeed operated 
correctly. If the extent of the dataset crosses the dateline the resulting 
eastings in Web Mercator coordinates will go from about -20 million to about 
20 million. A huge width. GDALSuggestedWarpOutput() tries to scale the 
computed dimensions so that the result has roughly the same number of pixels 
as the input. So the huge width becomes a reasonable width, and the reasonable 
height becomes a small height.
In that situation, you could try using modified input and output proj.4 strings 
by adding +over to the normal proj.4 definition. See 
https://trac.osgeo.org/proj/wiki/GenParms
This should produce an output datasets with eastings that go beyond the 20 
million limit. You might want to cut it into 2 parts afterwards.

Best regards,

Even

> 
> 
> I am working on a tool to project FAA charts from Lambert Conformal Conic
> to Web Mercator (EPSG 900913).  It seems to be producing correct output
> except for a FAA chart of the East Aleutian Islands.    When I traced the
> problem in my code, it appears that GDALSuggestedWarpOutput() is giving me
> a width and height far too small given the input tiff had larger
> dimensions.  The source GeoTiff has dimensions of 15555x5786 but
> GDALSuggestedWarpOutput() gives a suggested width of 17050  and a height
> of 178.  A height of 178 pixels surely has to be wrong.    I have added
> the well-known text and proj.4  output from gdalinfo.exe of the input tiff
> below.   Although I am not entirely sure if I should, I have been using
> the values supplied by GDALSuggestedWarpOutput() for creating my output
> Geotiff as if the output will always be valid.
> 
> * Why is GDALSuggestedWarpOutput() giving bad values for the width and
> height of the output tiff?
> * Is this incorrect usage of GDALSuggestedWarpOutput() or is it a bug?
> 
> 
> PROJ.4 : '+proj=lcc +lat_1=54.66666666666666 +lat_2=49.33333333333334
> +lat_0=52.16666666666666 +lon_0=-177.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m
> +no_defs '
> 
> OGC WKT :
> PROJCS["unnamed",
>     GEOGCS["NAD83",
>         DATUM["North_American_Datum_1983",
>             SPHEROID["GRS 1980",6378137,298.2572221010002,
>                 AUTHORITY["EPSG","7019"]],
>             AUTHORITY["EPSG","6269"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4269"]],
>     PROJECTION["Lambert_Conformal_Conic_2SP"],
>     PARAMETER["standard_parallel_1",54.66666666666666],
>     PARAMETER["standard_parallel_2",49.33333333333334],
>     PARAMETER["latitude_of_origin",52.16666666666666],
>     PARAMETER["central_meridian",-177.5],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]]]
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Dec 10 02:05:37 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 10 Dec 2014 11:05:37 +0100
Subject: [gdal-dev] EPSG codes
In-Reply-To: <CACSHx9nuD-Vefcur-WdfoLmTReJJ_sPeXQ9zkRHWJv2tiQmxCQ@mail.gmail.com>
References: <CACSHx9nuD-Vefcur-WdfoLmTReJJ_sPeXQ9zkRHWJv2tiQmxCQ@mail.gmail.com>
Message-ID: <201412101105.37323.even.rouault@spatialys.com>

Le mercredi 10 d?cembre 2014 03:38:45, Norman Barker a ?crit :
> Hi,
> 
> I am trying to extract the EPSG code from the SpatialReference object as
> follow;
> 
>             const char * pszEpsg;
>             char **papszTokens;
> 
>             if (poSpatialRef->IsProjected())
>                 pszEpsg =
> poSpatialRef->GetAttrNode("projcs")->GetNode("authority")->GetValue();
>             else
>                 pszEpsg =
> poSpatialRef->GetAttrNode("geogcs")->GetNode("authority")->GetValue();
> 
> It seems that GetAttrNode returns NULL even ogrinfo -so reports that this
> is present.
> 
> Any ideas?

Norman,

Use GetAuthorityCode(NULL) :
http://gdal.org/classOGRSpatialReference.html#a178f4593ef4ee661f2df9d221feaa803

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From tomerlieber at gmail.com  Wed Dec 10 08:12:27 2014
From: tomerlieber at gmail.com (Tomer)
Date: Wed, 10 Dec 2014 08:12:27 -0800 (PST)
Subject: [gdal-dev] How to get information on JPEG 2000 files such as layers
 and precints?
Message-ID: <1418227947596-5177266.post@n6.nabble.com>

hey,

I'm using the C# bindings and GDAL 1.11.
I built the gdal with ECW and JPEG2000 read support (5.1 readonly SDK).

I tried to read information on JPEG 2000 files such as layers, precints,
but I couldn't read it the from any class (Dataset, Driver, Gdal).
Is it possible to read the information I was looking for with c# bindings of
gdal?

Best regards,
Tomer



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/How-to-get-information-on-JPEG-2000-files-such-as-layers-and-precints-tp5177266.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Wed Dec 10 08:32:00 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 10 Dec 2014 17:32:00 +0100
Subject: [gdal-dev] How to get information on JPEG 2000 files such as
	layers and precints?
In-Reply-To: <1418227947596-5177266.post@n6.nabble.com>
References: <1418227947596-5177266.post@n6.nabble.com>
Message-ID: <201412101732.01124.even.rouault@spatialys.com>

Le mercredi 10 d?cembre 2014 17:12:27, Tomer a ?crit :
> hey,
> 
> I'm using the C# bindings and GDAL 1.11.
> I built the gdal with ECW and JPEG2000 read support (5.1 readonly SDK).
> 
> I tried to read information on JPEG 2000 files such as layers, precints,
> but I couldn't read it the from any class (Dataset, Driver, Gdal).
> Is it possible to read the information I was looking for with c# bindings
> of gdal?

Tomer,

I've already answered on that to you recently ( 
http://lists.osgeo.org/pipermail/gdal-dev/2014-November/040540.html ). But 
perhaps I wasn't clear enough. No, there's currently no way to get that 
information. If it was avaialble, that would be through the metadata 
mechanism.

Even

> 
> Best regards,
> Tomer
> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/How-to-get-information-on-JPEG-2000-fi
> les-such-as-layers-and-precints-tp5177266.html Sent from the GDAL - Dev
> mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From norman at cloudant.com  Wed Dec 10 11:01:25 2014
From: norman at cloudant.com (Norman Barker)
Date: Wed, 10 Dec 2014 12:01:25 -0700
Subject: [gdal-dev] How to get information on JPEG 2000 files such as
 layers and precints?
In-Reply-To: <201412101732.01124.even.rouault@spatialys.com>
References: <1418227947596-5177266.post@n6.nabble.com>
	<201412101732.01124.even.rouault@spatialys.com>
Message-ID: <CACSHx9=pRWVgkxFGexffkfugJUiF2uoX4a1ys+rKhpfYY+hVzw@mail.gmail.com>

Tomer,

precincts, layers etc can be dumped with jj2000, OpenJPEG and Jasper and it
can be programatically retrieved with kakadu.

It is not available in GDAL as Even says, but I might be adding a PR for it
shortly.

Norman

On Wed, Dec 10, 2014 at 9:32 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le mercredi 10 d?cembre 2014 17:12:27, Tomer a ?crit :
> > hey,
> >
> > I'm using the C# bindings and GDAL 1.11.
> > I built the gdal with ECW and JPEG2000 read support (5.1 readonly SDK).
> >
> > I tried to read information on JPEG 2000 files such as layers, precints,
> > but I couldn't read it the from any class (Dataset, Driver, Gdal).
> > Is it possible to read the information I was looking for with c# bindings
> > of gdal?
>
> Tomer,
>
> I've already answered on that to you recently (
> http://lists.osgeo.org/pipermail/gdal-dev/2014-November/040540.html ). But
> perhaps I wasn't clear enough. No, there's currently no way to get that
> information. If it was avaialble, that would be through the metadata
> mechanism.
>
> Even
>
> >
> > Best regards,
> > Tomer
> >
> >
> >
> > --
> > View this message in context:
> >
> http://osgeo-org.1560.x6.nabble.com/How-to-get-information-on-JPEG-2000-fi
> > les-such-as-layers-and-precints-tp5177266.html Sent from the GDAL - Dev
> > mailing list archive at Nabble.com.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141210/4adcfc84/attachment.html>

From federicojurio at suremptec.com.ar  Wed Dec 10 13:28:48 2014
From: federicojurio at suremptec.com.ar (Federico Jurio)
Date: Wed, 10 Dec 2014 18:28:48 -0300
Subject: [gdal-dev] Snap point to vertex/segment
Message-ID: <CADmC3awLiiz_fyD1rcatwqaU8axVxcP6qZ96wzHbAV4o7CaTPQ@mail.gmail.com>

Dear all, i'm trying to make a snapping tool to project new points in a
layer to the nearest geometry. First of all, when i activate my tool i make
a buffer of all the geometries in the layer. If the point that i'm trying
to add in the layer is within the buffer i want to move this point to the
nearest vertex/segment in that geometry but i don't know how to find the
new coordinates.
It would be helpful if someone could help me!

Regards

-- 
Federico Jurio
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
federicojurio at suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141210/877728aa/attachment.html>

From even.rouault at spatialys.com  Wed Dec 10 13:56:18 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 10 Dec 2014 22:56:18 +0100
Subject: [gdal-dev] Snap point to vertex/segment
In-Reply-To: <CADmC3awLiiz_fyD1rcatwqaU8axVxcP6qZ96wzHbAV4o7CaTPQ@mail.gmail.com>
References: <CADmC3awLiiz_fyD1rcatwqaU8axVxcP6qZ96wzHbAV4o7CaTPQ@mail.gmail.com>
Message-ID: <201412102256.18629.even.rouault@spatialys.com>

Le mercredi 10 d?cembre 2014 22:28:48, Federico Jurio a ?crit :
> Dear all, i'm trying to make a snapping tool to project new points in a
> layer to the nearest geometry. First of all, when i activate my tool i make
> a buffer of all the geometries in the layer. If the point that i'm trying
> to add in the layer is within the buffer i want to move this point to the
> nearest vertex/segment in that geometry but i don't know how to find the
> new coordinates.
> It would be helpful if someone could help me!

Frederico,

Available as ST_Snap in PostGIS (http://postgis.org/docs/ST_Snap.html), that 
relies on GEOSSnap : http://geos.osgeo.org/doxygen/geos__c_8h_source.html

Would be easy to add in OGR geometry class as well (relying on GEOSSnap)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Dec 10 14:52:33 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 10 Dec 2014 23:52:33 +0100
Subject: [gdal-dev] GDAL GeoPackage raster support
Message-ID: <201412102352.33108.even.rouault@spatialys.com>

Hi,

I've committed in GDAL trunk the final pieces of the code needed to support 
GeoPackage rasters in read/creation/update modes. Feedback from early testers 
would be much appreciated, particularly regarding interoperability with other 
software stacks (1), as I could basically only test round-tripping with GDAL.

Documentation can be found at :
http://www.gdal.org/drv_geopackage_raster.html

Small samples generated by GDAL can be found at:
http://download.osgeo.org/gdal/data/geopackage/

This also includes the script that generated them.

Unless I've missed something, we now have support for all of the GeoPackage 
specification regarding regarding raster, including its extensions.

On the vector part, the support is also rather complete, with spatial index 
and curve geometries added some time ago.
What is missing :
- reading/writing vector layer level metadata. This should now be possible 
with the GDAL-OGR unification. Would require an update in ogrinfo to display 
such metadata, and in ogr2ogr to define and propagate them.
- use of schema/column constraints in vector layers. We could likely check 
that the constraints are met when creating/update a feature, but we don't have 
yet the matching concepts in the OGR abstraction to create the constraints 
(although this can be done at hand with simple SQL inserts)
- creating the triggers that correspond to the gpkg_geometry_type_trigger and 
gpkg_srs_id_trigger extensions (we should already behave OK with them if those 
triggers are defined, since we have the support SQL functions)


Best regards,

Even

(1) A report of my experiments with the GeoServer community GeoPackage plugin 
: http://sourceforge.net/p/geoserver/mailman/message/33136750/

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bishop.dev at gmail.com  Wed Dec 10 17:12:47 2014
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Thu, 11 Dec 2014 05:12:47 +0400
Subject: [gdal-dev] Snap point to vertex/segment
In-Reply-To: <201412102256.18629.even.rouault@spatialys.com>
References: <CADmC3awLiiz_fyD1rcatwqaU8axVxcP6qZ96wzHbAV4o7CaTPQ@mail.gmail.com>
	<201412102256.18629.even.rouault@spatialys.com>
Message-ID: <CAD=YRECXPNd64wL8PZKFyZZ-SN2kDEJrWUAAdy4-yHkC+SPg1Q@mail.gmail.com>

Hi Federico,
Does the Project method of OGRLineString not suits you? The point snap to
nearest point, the point on line via the project, and point on polygon via
cast the outer or inner rings to line and project too.
Best regards,
Dmitry
11 ???. 2014 ?. 0:56 ???????????? "Even Rouault" <even.rouault at spatialys.com>
???????:

> Le mercredi 10 d?cembre 2014 22:28:48, Federico Jurio a ?crit :
> > Dear all, i'm trying to make a snapping tool to project new points in a
> > layer to the nearest geometry. First of all, when i activate my tool i
> make
> > a buffer of all the geometries in the layer. If the point that i'm trying
> > to add in the layer is within the buffer i want to move this point to the
> > nearest vertex/segment in that geometry but i don't know how to find the
> > new coordinates.
> > It would be helpful if someone could help me!
>
> Frederico,
>
> Available as ST_Snap in PostGIS (http://postgis.org/docs/ST_Snap.html),
> that
> relies on GEOSSnap : http://geos.osgeo.org/doxygen/geos__c_8h_source.html
>
> Would be easy to add in OGR geometry class as well (relying on GEOSSnap)
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141211/4fe66387/attachment.html>

From cavallini at faunalia.it  Thu Dec 11 07:31:41 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 11 Dec 2014 16:31:41 +0100
Subject: [gdal-dev] GDAL GeoPackage raster support
In-Reply-To: <201412102352.33108.even.rouault@spatialys.com>
References: <201412102352.33108.even.rouault@spatialys.com>
Message-ID: <5489B8DD.6020203@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi Even,

Il 10/12/2014 23:52, Even Rouault ha scritto:
> I've committed in GDAL trunk the final pieces of the code needed to
> support GeoPackage rasters in read/creation/update modes. Feedback
> from early testers would be much appreciated, particularly
> regarding interoperability with other software stacks (1), as I
> could basically only test round-tripping with GDAL.

unfortunately, QGIS does not seem yet able to load .gpkg, either
through load vector or through the Browser, so I cannot thest this.
I think I've already opened tickets about it.
All the best.

- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlSJuNwACgkQ/NedwLUzIr5mhACgitpy9z4m4+SdpfVdpmaq7zwJ
2jkAoLEurJbwLyaruFbmNxcv60AnN1Zo
=ee81
-----END PGP SIGNATURE-----

From even.rouault at spatialys.com  Thu Dec 11 07:37:27 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 11 Dec 2014 16:37:27 +0100
Subject: [gdal-dev] GDAL GeoPackage raster support
In-Reply-To: <5489B8DD.6020203@faunalia.it>
References: <201412102352.33108.even.rouault@spatialys.com>
	<5489B8DD.6020203@faunalia.it>
Message-ID: <201412111637.28153.even.rouault@spatialys.com>

Le jeudi 11 d?cembre 2014 16:31:41, Paolo Cavallini a ?crit :
> Hi Even,
> 
> Il 10/12/2014 23:52, Even Rouault ha scritto:
> > I've committed in GDAL trunk the final pieces of the code needed to
> > support GeoPackage rasters in read/creation/update modes. Feedback
> > from early testers would be much appreciated, particularly
> > regarding interoperability with other software stacks (1), as I
> > could basically only test round-tripping with GDAL.
> 
> unfortunately, QGIS does not seem yet able to load .gpkg, either
> through load vector or through the Browser, so I cannot thest this.
> I think I've already opened tickets about it.

Paolo,

I'm confused by your comment :
- are you trying to load a raster geopackage through "load vector"... ? That 
will not do it. You should open it with "load raster". That works with my 
antique QGIS 1.8 linked against GDAL trunk ;-)
- are you using GDAL trunk ? This is necessary for raster support. Vector 
support should mostly work with GDAL 1.11

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From cavallini at faunalia.it  Thu Dec 11 07:40:38 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 11 Dec 2014 16:40:38 +0100
Subject: [gdal-dev] GDAL GeoPackage raster support
In-Reply-To: <201412111637.28153.even.rouault@spatialys.com>
References: <201412102352.33108.even.rouault@spatialys.com>
	<5489B8DD.6020203@faunalia.it>
	<201412111637.28153.even.rouault@spatialys.com>
Message-ID: <5489BAF6.6060809@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi Even,

Il 11/12/2014 16:37, Even Rouault ha scritto:

> I'm confused by your comment :

sorry I was unclear:

> - are you trying to load a raster geopackage through "load
> vector"... ? That will not do it. You should open it with "load
> raster". That works with my antique QGIS 1.8 linked against GDAL
> trunk ;-) - are you using GDAL trunk ? This is necessary for raster
> support. Vector support should mostly work with GDAL 1.11

I'm saying that QGIS cannot load .gpkg, therefore I cannot do more
tests. When fixed, I'm available for testing.

All the best.

- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlSJuvYACgkQ/NedwLUzIr5YrACgsVW3i48tsZqJTeFfA8iWPjhj
OXYAnRZWgxCAUZWm9qmstCyjbUOw7XMa
=qq+j
-----END PGP SIGNATURE-----

From manvscode at gmail.com  Thu Dec 11 09:06:10 2014
From: manvscode at gmail.com (Joe Marrero)
Date: Thu, 11 Dec 2014 12:06:10 -0500
Subject: [gdal-dev] GDALSuggestedWarpOutput() problem
In-Reply-To: <201412101101.05005.even.rouault@spatialys.com>
References: <001101d013ec$1d97ed90$58c7c8b0$@hiltonsoftware.com>
	<201412101101.05005.even.rouault@spatialys.com>
Message-ID: <CAAt0HByuBGgNioqOa6Xwg3mkHp5HJ+TKLc78dnVqESAw3cExuA@mail.gmail.com>

Thank you for your response Even.

Unfortunately when I split the chart down the 180 degree longitude line,
GDALSuggestedWarpOutput() still produces smaller chart dimensions than the
dimensions of the inputs.  I think this would rule out any wrapping problem
because the split pieces exhibited the same behavior despite never crossing
the dateline.

I am going to try and step through the GDALSuggestedWarpOutput() function
and examine it's logic more closely.

-- Joe




On Wed, Dec 10, 2014 at 5:01 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> "joem",
>
> It seems that your input dataset is very close to the dateline, and very
> likely crossing it. I'm not that surprised that GDALSuggestedWarpOutput()
> has
> issues at that discontinuity. But I think it might have indeed operated
> correctly. If the extent of the dataset crosses the dateline the resulting
> eastings in Web Mercator coordinates will go from about -20 million to
> about
> 20 million. A huge width. GDALSuggestedWarpOutput() tries to scale the
> computed dimensions so that the result has roughly the same number of
> pixels
> as the input. So the huge width becomes a reasonable width, and the
> reasonable
> height becomes a small height.
> In that situation, you could try using modified input and output proj.4
> strings
> by adding +over to the normal proj.4 definition. See
> https://trac.osgeo.org/proj/wiki/GenParms
> This should produce an output datasets with eastings that go beyond the 20
> million limit. You might want to cut it into 2 parts afterwards.
>
> Best regards,
>
> Even
>
> >
> >
> > I am working on a tool to project FAA charts from Lambert Conformal Conic
> > to Web Mercator (EPSG 900913).  It seems to be producing correct output
> > except for a FAA chart of the East Aleutian Islands.    When I traced the
> > problem in my code, it appears that GDALSuggestedWarpOutput() is giving
> me
> > a width and height far too small given the input tiff had larger
> > dimensions.  The source GeoTiff has dimensions of 15555x5786 but
> > GDALSuggestedWarpOutput() gives a suggested width of 17050  and a height
> > of 178.  A height of 178 pixels surely has to be wrong.    I have added
> > the well-known text and proj.4  output from gdalinfo.exe of the input
> tiff
> > below.   Although I am not entirely sure if I should, I have been using
> > the values supplied by GDALSuggestedWarpOutput() for creating my output
> > Geotiff as if the output will always be valid.
> >
> > * Why is GDALSuggestedWarpOutput() giving bad values for the width and
> > height of the output tiff?
> > * Is this incorrect usage of GDALSuggestedWarpOutput() or is it a bug?
> >
> >
> > PROJ.4 : '+proj=lcc +lat_1=54.66666666666666 +lat_2=49.33333333333334
> > +lat_0=52.16666666666666 +lon_0=-177.5 +x_0=0 +y_0=0 +datum=NAD83
> +units=m
> > +no_defs '
> >
> > OGC WKT :
> > PROJCS["unnamed",
> >     GEOGCS["NAD83",
> >         DATUM["North_American_Datum_1983",
> >             SPHEROID["GRS 1980",6378137,298.2572221010002,
> >                 AUTHORITY["EPSG","7019"]],
> >             AUTHORITY["EPSG","6269"]],
> >         PRIMEM["Greenwich",0],
> >         UNIT["degree",0.0174532925199433],
> >         AUTHORITY["EPSG","4269"]],
> >     PROJECTION["Lambert_Conformal_Conic_2SP"],
> >     PARAMETER["standard_parallel_1",54.66666666666666],
> >     PARAMETER["standard_parallel_2",49.33333333333334],
> >     PARAMETER["latitude_of_origin",52.16666666666666],
> >     PARAMETER["central_meridian",-177.5],
> >     PARAMETER["false_easting",0],
> >     PARAMETER["false_northing",0],
> >     UNIT["metre",1,
> >         AUTHORITY["EPSG","9001"]]]
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141211/f0eccd8d/attachment-0001.html>

From stefan.ziegler.de at gmail.com  Fri Dec 12 01:10:46 2014
From: stefan.ziegler.de at gmail.com (Stefan Ziegler)
Date: Fri, 12 Dec 2014 10:10:46 +0100
Subject: [gdal-dev] compile error on master
Message-ID: <CAJvo+1-8MnpA3S3ZkY165YWcJ5hA24wqz4PfXTRKcpChW10D1w@mail.gmail.com>

Hi

I have troubles compiling gdal on Ubuntu 10.04 and 12.04 (worked few weeks
ago):

make[1]: Entering directory `/usr/local/src/gdal/gdal-dev/gdal'
make[1]: `libgdal.la' is up to date.
make[1]: Leaving directory `/usr/local/src/gdal/gdal-dev/gdal'
(cd apps; make)
make[1]: Entering directory `/usr/local/src/gdal/gdal-dev/gdal/apps'
/bin/bash /usr/local/src/gdal/gdal-dev/gdal/libtool --mode=link    g++
gdalinfo.lo commonutils.lo  /usr/local/src/gdal/gdal-dev/gdal/libgdal.la -o
gdalinfo
libtool: link: g++ .libs/gdalinfo.o .libs/commonutils.o -o .libs/gdalinfo
/usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so -L/usr/lib -lgeos_c
/usr/lib/libodbc.so /usr/lib/libodbcinst.so /usr/lib/libexpat.so
/usr/lib/libxerces-c.so -lnsl -licui18n -licuuc -licudata
/usr/lib/libjasper.so -lnetcdf /usr/lib/libhdf5.so /usr/lib/libmfhdfalt.so
/usr/lib/libdfalt.so -lm /usr/lib/libgif.so /usr/lib/libjpeg.so -lpng -lpq
-lrt -lspatialite /usr/lib/libsqlite3.so -lpthread -ldl -lpcre
/usr/lib/libcurl-gnutls.so /usr/lib/libxml2.so -lz  -Wl,-rpath
-Wl,/usr/local/gdal/gdal-dev/lib
/usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so: undefined reference to
`GDALProxyRasterBand::IRasterIO(GDALRWFlag, int, int, int, int, void*, int,
int, GDALDataType, int, int)'
/usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so: undefined reference to
`GDALRasterBand::IRasterIO(GDALRWFlag, int, int, int, int, void*, int, int,
GDALDataType, int, int)'
/usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so: undefined reference to
`VRTDataset::IRasterIO(GDALRWFlag, int, int, int, int, void*, int, int,
GDALDataType, int, int*, int, int, int)'
/usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so: undefined reference to
`GDALProxyDataset::IRasterIO(GDALRWFlag, int, int, int, int, void*, int,
int, GDALDataType, int, int*, int, int, int)'
/usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so: undefined reference to
`RawDataset::IRasterIO(GDALRWFlag, int, int, int, int, void*, int, int,
GDALDataType, int, int*, int, int, int)'
/usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so: undefined reference to
`RawRasterBand::IRasterIO(GDALRWFlag, int, int, int, int, void*, int, int,
GDALDataType, int, int)'
/usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so: undefined reference to
`GDALDataset::IRasterIO(GDALRWFlag, int, int, int, int, void*, int, int,
GDALDataType, int, int*, int, int, int)'
collect2: ld returned 1 exit status
make[1]: *** [gdalinfo] Error 1
make[1]: Leaving directory `/usr/local/src/gdal/gdal-dev/gdal/apps'
make: *** [apps-target] Error 2
stefan at Ubuntu-1004-lucid-64-minimal:/usr/local/src/gdal/gdal-dev/gdal$

Any ideas?

regards
Stefan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141212/3acff0ba/attachment.html>

From even.rouault at spatialys.com  Fri Dec 12 03:40:27 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 12 Dec 2014 12:40:27 +0100
Subject: [gdal-dev] compile error on master
In-Reply-To: <CAJvo+1-8MnpA3S3ZkY165YWcJ5hA24wqz4PfXTRKcpChW10D1w@mail.gmail.com>
References: <CAJvo+1-8MnpA3S3ZkY165YWcJ5hA24wqz4PfXTRKcpChW10D1w@mail.gmail.com>
Message-ID: <201412121240.28015.even.rouault@spatialys.com>

Le vendredi 12 d?cembre 2014 10:10:46, Stefan Ziegler a ?crit :
> Hi
> 
> I have troubles compiling gdal on Ubuntu 10.04 and 12.04 (worked few weeks
> ago):

Stefan,

Did you "make clean" before ? GDAL makefiles have not the dependencies to the 
headers, so changes in them do not automatically trigger necessary 
recompilations.

Even

> 
> make[1]: Entering directory `/usr/local/src/gdal/gdal-dev/gdal'
> make[1]: `libgdal.la' is up to date.
> make[1]: Leaving directory `/usr/local/src/gdal/gdal-dev/gdal'
> (cd apps; make)
> make[1]: Entering directory `/usr/local/src/gdal/gdal-dev/gdal/apps'
> /bin/bash /usr/local/src/gdal/gdal-dev/gdal/libtool --mode=link    g++
> gdalinfo.lo commonutils.lo  /usr/local/src/gdal/gdal-dev/gdal/libgdal.la -o
> gdalinfo
> libtool: link: g++ .libs/gdalinfo.o .libs/commonutils.o -o .libs/gdalinfo
> /usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so -L/usr/lib -lgeos_c
> /usr/lib/libodbc.so /usr/lib/libodbcinst.so /usr/lib/libexpat.so
> /usr/lib/libxerces-c.so -lnsl -licui18n -licuuc -licudata
> /usr/lib/libjasper.so -lnetcdf /usr/lib/libhdf5.so /usr/lib/libmfhdfalt.so
> /usr/lib/libdfalt.so -lm /usr/lib/libgif.so /usr/lib/libjpeg.so -lpng -lpq
> -lrt -lspatialite /usr/lib/libsqlite3.so -lpthread -ldl -lpcre
> /usr/lib/libcurl-gnutls.so /usr/lib/libxml2.so -lz  -Wl,-rpath
> -Wl,/usr/local/gdal/gdal-dev/lib
> /usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so: undefined reference to
> `GDALProxyRasterBand::IRasterIO(GDALRWFlag, int, int, int, int, void*, int,
> int, GDALDataType, int, int)'
> /usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so: undefined reference to
> `GDALRasterBand::IRasterIO(GDALRWFlag, int, int, int, int, void*, int, int,
> GDALDataType, int, int)'
> /usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so: undefined reference to
> `VRTDataset::IRasterIO(GDALRWFlag, int, int, int, int, void*, int, int,
> GDALDataType, int, int*, int, int, int)'
> /usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so: undefined reference to
> `GDALProxyDataset::IRasterIO(GDALRWFlag, int, int, int, int, void*, int,
> int, GDALDataType, int, int*, int, int, int)'
> /usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so: undefined reference to
> `RawDataset::IRasterIO(GDALRWFlag, int, int, int, int, void*, int, int,
> GDALDataType, int, int*, int, int, int)'
> /usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so: undefined reference to
> `RawRasterBand::IRasterIO(GDALRWFlag, int, int, int, int, void*, int, int,
> GDALDataType, int, int)'
> /usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so: undefined reference to
> `GDALDataset::IRasterIO(GDALRWFlag, int, int, int, int, void*, int, int,
> GDALDataType, int, int*, int, int, int)'
> collect2: ld returned 1 exit status
> make[1]: *** [gdalinfo] Error 1
> make[1]: Leaving directory `/usr/local/src/gdal/gdal-dev/gdal/apps'
> make: *** [apps-target] Error 2
> stefan at Ubuntu-1004-lucid-64-minimal:/usr/local/src/gdal/gdal-dev/gdal$
> 
> Any ideas?
> 
> regards
> Stefan

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From stefan.ziegler.de at gmail.com  Fri Dec 12 04:11:14 2014
From: stefan.ziegler.de at gmail.com (Stefan Ziegler)
Date: Fri, 12 Dec 2014 13:11:14 +0100
Subject: [gdal-dev] compile error on master
In-Reply-To: <201412121240.28015.even.rouault@spatialys.com>
References: <CAJvo+1-8MnpA3S3ZkY165YWcJ5hA24wqz4PfXTRKcpChW10D1w@mail.gmail.com>
	<201412121240.28015.even.rouault@spatialys.com>
Message-ID: <CAJvo+19+VjTT4ioxrwTYCuw3rUjNtTz03WqyAcJBgW0wHfEX8Q@mail.gmail.com>

Hi Even

thanks. I was pretty sure I've cleaned before. Now it works... (perhaps
forgot sudo before).

regards
Stefan

On Fri, Dec 12, 2014 at 12:40 PM, Even Rouault <even.rouault at spatialys.com>
wrote:
>
> Le vendredi 12 d?cembre 2014 10:10:46, Stefan Ziegler a ?crit :
> > Hi
> >
> > I have troubles compiling gdal on Ubuntu 10.04 and 12.04 (worked few
> weeks
> > ago):
>
> Stefan,
>
> Did you "make clean" before ? GDAL makefiles have not the dependencies to
> the
> headers, so changes in them do not automatically trigger necessary
> recompilations.
>
> Even
>
> >
> > make[1]: Entering directory `/usr/local/src/gdal/gdal-dev/gdal'
> > make[1]: `libgdal.la' is up to date.
> > make[1]: Leaving directory `/usr/local/src/gdal/gdal-dev/gdal'
> > (cd apps; make)
> > make[1]: Entering directory `/usr/local/src/gdal/gdal-dev/gdal/apps'
> > /bin/bash /usr/local/src/gdal/gdal-dev/gdal/libtool --mode=link    g++
> > gdalinfo.lo commonutils.lo  /usr/local/src/gdal/gdal-dev/gdal/libgdal.la
> -o
> > gdalinfo
> > libtool: link: g++ .libs/gdalinfo.o .libs/commonutils.o -o .libs/gdalinfo
> > /usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so -L/usr/lib -lgeos_c
> > /usr/lib/libodbc.so /usr/lib/libodbcinst.so /usr/lib/libexpat.so
> > /usr/lib/libxerces-c.so -lnsl -licui18n -licuuc -licudata
> > /usr/lib/libjasper.so -lnetcdf /usr/lib/libhdf5.so
> /usr/lib/libmfhdfalt.so
> > /usr/lib/libdfalt.so -lm /usr/lib/libgif.so /usr/lib/libjpeg.so -lpng
> -lpq
> > -lrt -lspatialite /usr/lib/libsqlite3.so -lpthread -ldl -lpcre
> > /usr/lib/libcurl-gnutls.so /usr/lib/libxml2.so -lz  -Wl,-rpath
> > -Wl,/usr/local/gdal/gdal-dev/lib
> > /usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so: undefined reference
> to
> > `GDALProxyRasterBand::IRasterIO(GDALRWFlag, int, int, int, int, void*,
> int,
> > int, GDALDataType, int, int)'
> > /usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so: undefined reference
> to
> > `GDALRasterBand::IRasterIO(GDALRWFlag, int, int, int, int, void*, int,
> int,
> > GDALDataType, int, int)'
> > /usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so: undefined reference
> to
> > `VRTDataset::IRasterIO(GDALRWFlag, int, int, int, int, void*, int, int,
> > GDALDataType, int, int*, int, int, int)'
> > /usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so: undefined reference
> to
> > `GDALProxyDataset::IRasterIO(GDALRWFlag, int, int, int, int, void*, int,
> > int, GDALDataType, int, int*, int, int, int)'
> > /usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so: undefined reference
> to
> > `RawDataset::IRasterIO(GDALRWFlag, int, int, int, int, void*, int, int,
> > GDALDataType, int, int*, int, int, int)'
> > /usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so: undefined reference
> to
> > `RawRasterBand::IRasterIO(GDALRWFlag, int, int, int, int, void*, int,
> int,
> > GDALDataType, int, int)'
> > /usr/local/src/gdal/gdal-dev/gdal/.libs/libgdal.so: undefined reference
> to
> > `GDALDataset::IRasterIO(GDALRWFlag, int, int, int, int, void*, int, int,
> > GDALDataType, int, int*, int, int, int)'
> > collect2: ld returned 1 exit status
> > make[1]: *** [gdalinfo] Error 1
> > make[1]: Leaving directory `/usr/local/src/gdal/gdal-dev/gdal/apps'
> > make: *** [apps-target] Error 2
> > stefan at Ubuntu-1004-lucid-64-minimal:/usr/local/src/gdal/gdal-dev/gdal$
> >
> > Any ideas?
> >
> > regards
> > Stefan
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141212/40ed863d/attachment.html>

From even.rouault at spatialys.com  Fri Dec 12 06:48:35 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 12 Dec 2014 15:48:35 +0100
Subject: [gdal-dev] Wiki whist list page ?
Message-ID: <201412121548.35587.even.rouault@spatialys.com>

Hi,

Seeing Jukka's effort those last days to clean dust from GDAL Trac tickets 
(folks, please give him a huge thank, as this is one of the most tedious task 
possible !), I was wondering if enhancement tickets shouldn't be migrated to a 
single, and structured, page, especially when there are really under the whish 
list form, without any proposed patch or data, where the ticket system doesn't 
bring much value.
I'm not sure this will solve or improve anything either. Just the feeling that 
those enhancement tickets are burried forever (and sometimes ideas expressed 
in those tickets have been finally implemented independantly), so I was 
wondering about an alternative. At least a few issues I can anticipate:
- will users know that this page exists and use it appropriately ? (e.g. we 
wouldn't want bug reports to go here, or would we ?)
- can we assume that they will be willing/able to edit a wiki page ?

On the plus side, it could be a nice entry point for people who want to start 
contributing something (GSoC students) and don't have precise ideas (although 
your own ideas are generally a better motivation than the ones of somebody 
else)

So here's my proposed skeleton :
http://trac.osgeo.org/gdal/wiki/WishList

Another variation would be to keep it just as a skeleton and use Trac requests 
by keywords to fill the various categories (like done in 
http://trac.osgeo.org/gdal/wiki/ECW and similar pages for example)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From federicojurio at suremptec.com.ar  Fri Dec 12 07:01:46 2014
From: federicojurio at suremptec.com.ar (Federico Jurio)
Date: Fri, 12 Dec 2014 12:01:46 -0300
Subject: [gdal-dev] Snap point to vertex/segment
In-Reply-To: <CAD=YRECXPNd64wL8PZKFyZZ-SN2kDEJrWUAAdy4-yHkC+SPg1Q@mail.gmail.com>
References: <CADmC3awLiiz_fyD1rcatwqaU8axVxcP6qZ96wzHbAV4o7CaTPQ@mail.gmail.com>
	<201412102256.18629.even.rouault@spatialys.com>
	<CAD=YRECXPNd64wL8PZKFyZZ-SN2kDEJrWUAAdy4-yHkC+SPg1Q@mail.gmail.com>
Message-ID: <CADmC3awFoyuRe-daiAW6rbp6bZw+6p=wKTqWY-xDw5nkr7iGzw@mail.gmail.com>

Thank you for the answers guys.
My system only have gdal/ogr so i can't use PostGIS. I tried to use the
Project
<http://www.gdal.org/classOGRSimpleCurve.html#aed4f22dceb31894dd1b12cdf9f4bb645>
method from OGRSimpleCurve
class but always return -1 because i'm creating the geometry using OGR
instead of GEOS library.
Regards

On Wed, Dec 10, 2014 at 10:12 PM, Dmitry Baryshnikov <bishop.dev at gmail.com>
wrote:
>
> Hi Federico,
> Does the Project method of OGRLineString not suits you? The point snap to
> nearest point, the point on line via the project, and point on polygon via
> cast the outer or inner rings to line and project too.
> Best regards,
> Dmitry
> 11 ???. 2014 ?. 0:56 ???????????? "Even Rouault" <
> even.rouault at spatialys.com> ???????:
>
>> Le mercredi 10 d?cembre 2014 22:28:48, Federico Jurio a ?crit :
>> > Dear all, i'm trying to make a snapping tool to project new points in a
>> > layer to the nearest geometry. First of all, when i activate my tool i
>> make
>> > a buffer of all the geometries in the layer. If the point that i'm
>> trying
>> > to add in the layer is within the buffer i want to move this point to
>> the
>> > nearest vertex/segment in that geometry but i don't know how to find the
>> > new coordinates.
>> > It would be helpful if someone could help me!
>>
>> Frederico,
>>
>> Available as ST_Snap in PostGIS (http://postgis.org/docs/ST_Snap.html),
>> that
>> relies on GEOSSnap : http://geos.osgeo.org/doxygen/geos__c_8h_source.html
>>
>> Would be easy to add in OGR geometry class as well (relying on GEOSSnap)
>>
>> Even
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-- 
Federico Jurio
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
federicojurio at suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141212/c353cf1a/attachment-0001.html>

From p.halls at york.ac.uk  Fri Dec 12 07:28:18 2014
From: p.halls at york.ac.uk (Peter Halls)
Date: Fri, 12 Dec 2014 15:28:18 +0000
Subject: [gdal-dev] Wiki whist list page ?
In-Reply-To: <201412121548.35587.even.rouault@spatialys.com>
References: <201412121548.35587.even.rouault@spatialys.com>
Message-ID: <CADEnnOM6j075bws-mFw0mG5P+QPHQFM091K_5AC7-BnR3_iJYA@mail.gmail.com>

Many thanks, Jukka.

I agree that separating bugs from enhancements could be useful -
especially as the enhancements list would represent tasks not yet
attainable in the GDAL Suite and if there is an opportunity to add a
'me too' flag.  This latter could help indicate enhancement requests
with a broader interest.  Of course, there will be a need for periodic
review: some enhancement requests will reflect existing functionality
or recently added facilities.  It might be usefull to annotate
fulfilled enhancement requests with the version number in which it was
delivered.  There may be times when a submitted bug becomes an
enhancement request, perhaps due to the scale of the changes
necessary.

Best wishes,

Peter Halls

On 12 December 2014 at 14:48, Even Rouault <even.rouault at spatialys.com> wrote:
> Hi,
>
> Seeing Jukka's effort those last days to clean dust from GDAL Trac tickets
> (folks, please give him a huge thank, as this is one of the most tedious task
> possible !), I was wondering if enhancement tickets shouldn't be migrated to a
> single, and structured, page, especially when there are really under the whish
> list form, without any proposed patch or data, where the ticket system doesn't
> bring much value.
> I'm not sure this will solve or improve anything either. Just the feeling that
> those enhancement tickets are burried forever (and sometimes ideas expressed
> in those tickets have been finally implemented independantly), so I was
> wondering about an alternative. At least a few issues I can anticipate:
> - will users know that this page exists and use it appropriately ? (e.g. we
> wouldn't want bug reports to go here, or would we ?)
> - can we assume that they will be willing/able to edit a wiki page ?
>
> On the plus side, it could be a nice entry point for people who want to start
> contributing something (GSoC students) and don't have precise ideas (although
> your own ideas are generally a better motivation than the ones of somebody
> else)
>
> So here's my proposed skeleton :
> http://trac.osgeo.org/gdal/wiki/WishList
>
> Another variation would be to keep it just as a skeleton and use Trac requests
> by keywords to fill the various categories (like done in
> http://trac.osgeo.org/gdal/wiki/ECW and similar pages for example)
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
----------------------------------------------------------------------------------------------------------------
Peter J Halls, PhD Student, Post-war Reconstruction and Development Unit (PRDU)
                     Department of Politics, University of York

Snail mail: PRDU, Derwent College, University of York,
                Heslington, York YO10 5DD
This message has the status of a private and personal communication
----------------------------------------------------------------------------------------------------------------

From Steve.Toutant at inspq.qc.ca  Fri Dec 12 11:35:29 2014
From: Steve.Toutant at inspq.qc.ca (Steve.Toutant at inspq.qc.ca)
Date: Fri, 12 Dec 2014 14:35:29 -0500
Subject: [gdal-dev] Parse GML without geometry
Message-ID: <OFDDC2D2EC.DCBA7926-ON85257DAC.006AEE4B-85257DAC.006B9E53@isn.rtss.qc.ca>

Hi,
I need to parse the GML returned by this query, to make a list of unique 
value of NA2DESC tag using python
http://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&REQUEST=GetFeature&version=1.1.0&Typename=continents&maxfeatures=10&propertyname=(NA2DESC) 

I could not make it with a XML parser yet. I consider using ogr API but 
can I use it even if there is no geometry?
If ogr api is a good option, any link to examples or tutorial would be 
appreciated since I never used the API.
Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141212/c5c7988c/attachment.html>

From kyle at pobox.com  Fri Dec 12 11:47:47 2014
From: kyle at pobox.com (Kyle Shannon)
Date: Fri, 12 Dec 2014 12:47:47 -0700
Subject: [gdal-dev] Parse GML without geometry
In-Reply-To: <OFDDC2D2EC.DCBA7926-ON85257DAC.006AEE4B-85257DAC.006B9E53@isn.rtss.qc.ca>
References: <OFDDC2D2EC.DCBA7926-ON85257DAC.006AEE4B-85257DAC.006B9E53@isn.rtss.qc.ca>
Message-ID: <CAJ0mEz2=Ep37UtXP8hunKrf-iX2jgJ_xK=a4Jbw90qQVnxaY6g@mail.gmail.com>

Steve,

On Fri, Dec 12, 2014 at 12:35 PM,  <Steve.Toutant at inspq.qc.ca> wrote:
> Hi,
> I need to parse the GML returned by this query, to make a list of unique
> value of NA2DESC tag using python
> http://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&REQUEST=GetFeature&version=1.1.0&Typename=continents&maxfeatures=10&propertyname=(NA2DESC)
>
> I could not make it with a XML parser yet. I consider using ogr API but can
> I use it even if there is no geometry?

This one has a geometry, or so ogr thinks so:

kyle at kyle-workstation:~$ ogrinfo -so -al -ro
"/vsicurl_streaming/http://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&REQUEST=GetFeature&version=1.1.0&Typename=continents&maxfeatures=10&propertyname=(NA2DESC)"
INFO: Open of `/vsicurl_streaming/http://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&REQUEST=GetFeature&version=1.1.0&Typename=continents&maxfeatures=10&propertyname=(NA2DESC)'
      using driver `GML' successful.

Layer name: continents
Geometry: Unknown (any)
Feature Count: 10
Extent: (-90.000000, -180.000000) - (83.627419, 180.000000)
Layer SRS WKT:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4326"]]
Geometry Column = msGeometry
gml_id: String (0.0)
NA2DESC: String (0.0)
NA3DESC: String (0.0)

>
> If ogr api is a good option, any link to examples or tutorial would be
> appreciated since I never used the API.

API tutorials:

For gdal 2.x:

http://gdal.org/ogr_apitut.html

For gdal 1.x (the vector side is ogr):

http://gdal.org/1.11/ogr/ogr_apitut.html

>
> Thanks!
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

kss

-- 
Kyle

From Steve.Toutant at inspq.qc.ca  Fri Dec 12 12:38:06 2014
From: Steve.Toutant at inspq.qc.ca (Steve.Toutant at inspq.qc.ca)
Date: Fri, 12 Dec 2014 15:38:06 -0500
Subject: [gdal-dev] Parse GML without geometry
In-Reply-To: <CAJ0mEz2=Ep37UtXP8hunKrf-iX2jgJ_xK=a4Jbw90qQVnxaY6g@mail.gmail.com>
References: <OFDDC2D2EC.DCBA7926-ON85257DAC.006AEE4B-85257DAC.006B9E53@isn.rtss.qc.ca>
	<CAJ0mEz2=Ep37UtXP8hunKrf-iX2jgJ_xK=a4Jbw90qQVnxaY6g@mail.gmail.com>
Message-ID: <OF46F775AD.C2AB64C9-ON85257DAC.0070F1ED-85257DAC.00715A08@isn.rtss.qc.ca>

thanks Kyle

I ended up with 
geom=osgeo.ogr.CreateGeometryFromGML(wfs_response)
Returns ERROR 1: Unrecognised geometry type <FeatureCollection>

If I understand well, I think my question now is
How do I parse the feature collection with ogr?







Kyle Shannon <kyle at pobox.com> 
2014-12-12 14:47

A
Steve.Toutant at inspq.qc.ca
cc
GDAL Developers <gdal-dev at lists.osgeo.org>
Objet
Re: [gdal-dev] Parse GML without geometry








Steve,

On Fri, Dec 12, 2014 at 12:35 PM,  <Steve.Toutant at inspq.qc.ca> wrote:
> Hi,
> I need to parse the GML returned by this query, to make a list of unique
> value of NA2DESC tag using python
> 
http://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&REQUEST=GetFeature&version=1.1.0&Typename=continents&maxfeatures=10&propertyname=(NA2DESC)

>
> I could not make it with a XML parser yet. I consider using ogr API but 
can
> I use it even if there is no geometry?

This one has a geometry, or so ogr thinks so:

kyle at kyle-workstation:~$ ogrinfo -so -al -ro
"/vsicurl_streaming/http://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&REQUEST=GetFeature&version=1.1.0&Typename=continents&maxfeatures=10&propertyname=(NA2DESC)"
INFO: Open of 
`/vsicurl_streaming/http://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&REQUEST=GetFeature&version=1.1.0&Typename=continents&maxfeatures=10&propertyname=(NA2DESC)'
      using driver `GML' successful.

Layer name: continents
Geometry: Unknown (any)
Feature Count: 10
Extent: (-90.000000, -180.000000) - (83.627419, 180.000000)
Layer SRS WKT:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4326"]]
Geometry Column = msGeometry
gml_id: String (0.0)
NA2DESC: String (0.0)
NA3DESC: String (0.0)

>
> If ogr api is a good option, any link to examples or tutorial would be
> appreciated since I never used the API.

API tutorials:

For gdal 2.x:

http://gdal.org/ogr_apitut.html

For gdal 1.x (the vector side is ogr):

http://gdal.org/1.11/ogr/ogr_apitut.html

>
> Thanks!
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

kss

-- 
Kyle



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141212/d76dccd3/attachment.html>

From even.rouault at spatialys.com  Fri Dec 12 12:42:18 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 12 Dec 2014 21:42:18 +0100
Subject: [gdal-dev] Parse GML without geometry
In-Reply-To: <OF46F775AD.C2AB64C9-ON85257DAC.0070F1ED-85257DAC.00715A08@isn.rtss.qc.ca>
References: <OFDDC2D2EC.DCBA7926-ON85257DAC.006AEE4B-85257DAC.006B9E53@isn.rtss.qc.ca>
	<CAJ0mEz2=Ep37UtXP8hunKrf-iX2jgJ_xK=a4Jbw90qQVnxaY6g@mail.gmail.com>
	<OF46F775AD.C2AB64C9-ON85257DAC.0070F1ED-85257DAC.00715A08@isn.rtss.qc.ca>
Message-ID: <201412122142.18762.even.rouault@spatialys.com>

Le vendredi 12 d?cembre 2014 21:38:06, Steve.Toutant at inspq.qc.ca a ?crit :
> thanks Kyle
> 
> I ended up with
> geom=osgeo.ogr.CreateGeometryFromGML(wfs_response)
> Returns ERROR 1: Unrecognised geometry type <FeatureCollection>
> 
> If I understand well, I think my question now is
> How do I parse the feature collection with ogr?

With the WFS driver:

ogrinfo "WFS:http://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&REQUEST=GetFeature&version=1.1.0&Typename=continents&maxfeatures=10&propertyname=(NA2DESC) " -ro -al

You can read the OGR API tutorial to see how to use a OGR datasource, layer, feature

Regarding gemetry or not geometry, it won't matter. Actually as generated by mapserver, there's a geometry column declared, but not filled. Won't be an issue:

$ wget "http://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&REQUEST=DescribeFeatureType&VERSION=1.1.0&TYPENAME=continents&" -O -

<schema
   targetNamespace="http://mapserver.gis.umn.edu/mapserver" 
   xmlns:ms="http://mapserver.gis.umn.edu/mapserver" 
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:xsd="http://www.w3.org/2001/XMLSchema"
   xmlns="http://www.w3.org/2001/XMLSchema"
   xmlns:gml="http://www.opengis.net/gml"
   elementFormDefault="qualified" version="0.1" >

  <import namespace="http://www.opengis.net/gml"
          schemaLocation="http://schemas.opengis.net/gml/3.1.1/base/gml.xsd" />

  <element name="continents" 
           type="ms:continentsType" 
           substitutionGroup="gml:_Feature" />

  <complexType name="continentsType">
    <complexContent>
      <extension base="gml:AbstractFeatureType">
        <sequence>
          <element name="msGeometry" type="gml:GeometryPropertyType" minOccurs="0" maxOccurs="1"/>
          <element name="NA2DESC" type="string"/>
          <element name="NA3DESC" type="string"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>

</schema>


> 
> 
> 
> 
> 
> 
> 
> Kyle Shannon <kyle at pobox.com>
> 2014-12-12 14:47
> 
> A
> Steve.Toutant at inspq.qc.ca
> cc
> GDAL Developers <gdal-dev at lists.osgeo.org>
> Objet
> Re: [gdal-dev] Parse GML without geometry
> 
> 
> 
> 
> 
> 
> 
> 
> Steve,
> 
> On Fri, Dec 12, 2014 at 12:35 PM,  <Steve.Toutant at inspq.qc.ca> wrote:
> > Hi,
> > I need to parse the GML returned by this query, to make a list of unique
> > value of NA2DESC tag using python
> 
> http://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&REQUEST=GetFeature&versio
> n=1.1.0&Typename=continents&maxfeatures=10&propertyname=(NA2DESC)
> 
> > I could not make it with a XML parser yet. I consider using ogr API but
> 
> can
> 
> > I use it even if there is no geometry?
> 
> This one has a geometry, or so ogr thinks so:
> 
> kyle at kyle-workstation:~$ ogrinfo -so -al -ro
> "/vsicurl_streaming/http://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&REQUE
> ST=GetFeature&version=1.1.0&Typename=continents&maxfeatures=10&propertyname
> =(NA2DESC)" INFO: Open of
> `/vsicurl_streaming/http://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&REQUE
> ST=GetFeature&version=1.1.0&Typename=continents&maxfeatures=10&propertyname
> =(NA2DESC)' using driver `GML' successful.
> 
> Layer name: continents
> Geometry: Unknown (any)
> Feature Count: 10
> Extent: (-90.000000, -180.000000) - (83.627419, 180.000000)
> Layer SRS WKT:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9122"]],
>     AUTHORITY["EPSG","4326"]]
> Geometry Column = msGeometry
> gml_id: String (0.0)
> NA2DESC: String (0.0)
> NA3DESC: String (0.0)
> 
> > If ogr api is a good option, any link to examples or tutorial would be
> > appreciated since I never used the API.
> 
> API tutorials:
> 
> For gdal 2.x:
> 
> http://gdal.org/ogr_apitut.html
> 
> For gdal 1.x (the vector side is ogr):
> 
> http://gdal.org/1.11/ogr/ogr_apitut.html
> 
> > Thanks!
> > 
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> kss

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Steve.Toutant at inspq.qc.ca  Fri Dec 12 13:13:02 2014
From: Steve.Toutant at inspq.qc.ca (Steve.Toutant at inspq.qc.ca)
Date: Fri, 12 Dec 2014 16:13:02 -0500
Subject: [gdal-dev] Parse GML without geometry
In-Reply-To: <201412122142.18762.even.rouault@spatialys.com>
References: <OFDDC2D2EC.DCBA7926-ON85257DAC.006AEE4B-85257DAC.006B9E53@isn.rtss.qc.ca>
	<CAJ0mEz2=Ep37UtXP8hunKrf-iX2jgJ_xK=a4Jbw90qQVnxaY6g@mail.gmail.com>	<OF46F775AD.C2AB64C9-ON85257DAC.0070F1ED-85257DAC.00715A08@isn.rtss.qc.ca>
	<201412122142.18762.even.rouault@spatialys.com>
Message-ID: <OF05241519.C513F73F-ON85257DAC.00745B98-85257DAC.00748CA6@isn.rtss.qc.ca>

Got it! Lots of fun!
Good links for python
http://pcjericks.github.io/py-gdalogr-cookbook/vector_layers.html#get-wfs-layer-and-iterate-over-features

Thousand thanks






Even Rouault <even.rouault at spatialys.com>@lists.osgeo.org 
Envoy? par : gdal-dev-bounces at lists.osgeo.org
2014-12-12 15:42

A
gdal-dev at lists.osgeo.org
cc
Steve.Toutant at inspq.qc.ca
Objet
Re: [gdal-dev] Parse GML without geometry








Le vendredi 12 d?cembre 2014 21:38:06, Steve.Toutant at inspq.qc.ca a ?crit :
> thanks Kyle
> 
> I ended up with
> geom=osgeo.ogr.CreateGeometryFromGML(wfs_response)
> Returns ERROR 1: Unrecognised geometry type <FeatureCollection>
> 
> If I understand well, I think my question now is
> How do I parse the feature collection with ogr?

With the WFS driver:

ogrinfo "WFS:
http://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&REQUEST=GetFeature&version=1.1.0&Typename=continents&maxfeatures=10&propertyname=(NA2DESC) 
" -ro -al

You can read the OGR API tutorial to see how to use a OGR datasource, 
layer, feature

Regarding gemetry or not geometry, it won't matter. Actually as generated 
by mapserver, there's a geometry column declared, but not filled. Won't be 
an issue:

$ wget "
http://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&REQUEST=DescribeFeatureType&VERSION=1.1.0&TYPENAME=continents&
" -O -

<schema
   targetNamespace="http://mapserver.gis.umn.edu/mapserver" 
   xmlns:ms="http://mapserver.gis.umn.edu/mapserver" 
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:xsd="http://www.w3.org/2001/XMLSchema"
   xmlns="http://www.w3.org/2001/XMLSchema"
   xmlns:gml="http://www.opengis.net/gml"
   elementFormDefault="qualified" version="0.1" >

  <import namespace="http://www.opengis.net/gml"
          schemaLocation="
http://schemas.opengis.net/gml/3.1.1/base/gml.xsd" />

  <element name="continents" 
           type="ms:continentsType" 
           substitutionGroup="gml:_Feature" />

  <complexType name="continentsType">
    <complexContent>
      <extension base="gml:AbstractFeatureType">
        <sequence>
          <element name="msGeometry" type="gml:GeometryPropertyType" 
minOccurs="0" maxOccurs="1"/>
          <element name="NA2DESC" type="string"/>
          <element name="NA3DESC" type="string"/>
        </sequence>
      </extension>
    </complexContent>
  </complexType>

</schema>


> 
> 
> 
> 
> 
> 
> 
> Kyle Shannon <kyle at pobox.com>
> 2014-12-12 14:47
> 
> A
> Steve.Toutant at inspq.qc.ca
> cc
> GDAL Developers <gdal-dev at lists.osgeo.org>
> Objet
> Re: [gdal-dev] Parse GML without geometry
> 
> 
> 
> 
> 
> 
> 
> 
> Steve,
> 
> On Fri, Dec 12, 2014 at 12:35 PM,  <Steve.Toutant at inspq.qc.ca> wrote:
> > Hi,
> > I need to parse the GML returned by this query, to make a list of 
unique
> > value of NA2DESC tag using python
> 
> 
http://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&REQUEST=GetFeature&versio

> n=1.1.0&Typename=continents&maxfeatures=10&propertyname=(NA2DESC)
> 
> > I could not make it with a XML parser yet. I consider using ogr API 
but
> 
> can
> 
> > I use it even if there is no geometry?
> 
> This one has a geometry, or so ogr thinks so:
> 
> kyle at kyle-workstation:~$ ogrinfo -so -al -ro
> 
"/vsicurl_streaming/http://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&REQUE
> 
ST=GetFeature&version=1.1.0&Typename=continents&maxfeatures=10&propertyname
> =(NA2DESC)" INFO: Open of
> 
`/vsicurl_streaming/http://demo.mapserver.org/cgi-bin/wfs?SERVICE=WFS&REQUE
> 
ST=GetFeature&version=1.1.0&Typename=continents&maxfeatures=10&propertyname
> =(NA2DESC)' using driver `GML' successful.
> 
> Layer name: continents
> Geometry: Unknown (any)
> Feature Count: 10
> Extent: (-90.000000, -180.000000) - (83.627419, 180.000000)
> Layer SRS WKT:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9122"]],
>     AUTHORITY["EPSG","4326"]]
> Geometry Column = msGeometry
> gml_id: String (0.0)
> NA2DESC: String (0.0)
> NA3DESC: String (0.0)
> 
> > If ogr api is a good option, any link to examples or tutorial would be
> > appreciated since I never used the API.
> 
> API tutorials:
> 
> For gdal 2.x:
> 
> http://gdal.org/ogr_apitut.html
> 
> For gdal 1.x (the vector side is ogr):
> 
> http://gdal.org/1.11/ogr/ogr_apitut.html
> 
> > Thanks!
> > 
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> kss

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141212/4cebc88b/attachment-0001.html>

From meme at eaku.net  Fri Dec 12 22:18:46 2014
From: meme at eaku.net (Karen Pease)
Date: Sat, 13 Dec 2014 06:18:46 +0000
Subject: [gdal-dev] Can't get gdal_rasterize to work... with anything.
Message-ID: <1418451526.30286.4.camel@eaku.net>

Hi all,

I'm running Fedora 21 with a fresh built gdal-1.9.2. Try as I might, I
can't get gdal_rasterize to output anything other than purely
transparent images, purely white images, or purely black images.  

I want to use it on this dataset - "Elevation data. GDB og SHP.
ISN2004":

http://atlas.lmi.is/LmiData/index.php?id=1079838344912

I've spent maybe 8 hours on this, including trying all sorts of
different commandlines. After finding that I couldn't get that to work,
I found some sample tutorials that includes a shp file and some command
lines to use it with gdal_rasterize:

http://disc.sci.gsfc.nasa.gov/dataholdings/?q=recipes/How-to-Obtain-a-Shapefile-based-Data-Subset-with-GrADS
http://www.openforis.org/OFwiki/index.php/Special:WhatLinksHere/Example_data_set

None of these work for me either (using it exactly as they say to), so I
don't think it's my shp files that's the problem; I think it's
gdal_rasterize or something it depends on. I know the problem isn't an
image viewer problem either - I've tried multiple viewers, and I've
tried saving the files to PNM to allow for manual inspection - they all
contain only the same data value repeated over and over, no variation,
just pure one color.

What should I do? I really need to make a heightmap out of this
landscape data for inclusion into a 3d model...

 - kv, Karen





From ari.jolma at gmail.com  Sat Dec 13 01:18:08 2014
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sat, 13 Dec 2014 09:18:08 +0000
Subject: [gdal-dev] Can't get gdal_rasterize to work... with anything.
In-Reply-To: <1418451526.30286.4.camel@eaku.net>
References: <1418451526.30286.4.camel@eaku.net>
Message-ID: <548C0450.60601@gmail.com>

Karen,

For example this command on my computer

gdal_rasterize -burn 1 -l is50v_mannvirki_flakar_24122013 -of GTiff -ts 
1000 1000 is50v_mannvirki_flakar_24122013.shp x.tiff

produces a 1000 x 1000 geotiff which is mostly zeros except ones where 
the polygons are.

Can you tell us what command did you use?

Ari

ps: the website was a bit difficult to use for non-icelanders.

13.12.2014, 06:18, Karen Pease kirjoitti:
> Hi all,
>
> I'm running Fedora 21 with a fresh built gdal-1.9.2. Try as I might, I
> can't get gdal_rasterize to output anything other than purely
> transparent images, purely white images, or purely black images.
>
> I want to use it on this dataset - "Elevation data. GDB og SHP.
> ISN2004":
>
> http://atlas.lmi.is/LmiData/index.php?id=1079838344912
>
> I've spent maybe 8 hours on this, including trying all sorts of
> different commandlines. After finding that I couldn't get that to work,
> I found some sample tutorials that includes a shp file and some command
> lines to use it with gdal_rasterize:
>
> http://disc.sci.gsfc.nasa.gov/dataholdings/?q=recipes/How-to-Obtain-a-Shapefile-based-Data-Subset-with-GrADS
> http://www.openforis.org/OFwiki/index.php/Special:WhatLinksHere/Example_data_set
>
> None of these work for me either (using it exactly as they say to), so I
> don't think it's my shp files that's the problem; I think it's
> gdal_rasterize or something it depends on. I know the problem isn't an
> image viewer problem either - I've tried multiple viewers, and I've
> tried saving the files to PNM to allow for manual inspection - they all
> contain only the same data value repeated over and over, no variation,
> just pure one color.
>
> What should I do? I really need to make a heightmap out of this
> landscape data for inclusion into a 3d model...
>
>   - kv, Karen
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From meme at eaku.net  Sat Dec 13 10:07:37 2014
From: meme at eaku.net (Karen Pease)
Date: Sat, 13 Dec 2014 18:07:37 +0000
Subject: [gdal-dev] Can't get gdal_rasterize to work... with anything.
In-Reply-To: <548C0450.60601@gmail.com>
References: <1418451526.30286.4.camel@eaku.net> <548C0450.60601@gmail.com>
Message-ID: <1418494057.30286.11.camel@eaku.net>

Okay, so, I think this may be getting me a bit closer to a solution.

The output image of your command still wasn't viewable to me, either in
gimp or gwenview. However, when I used ImageMagick to convert it to a
PNG or other format, for the first time I saw some detail, so I guess
it's a tif format that the former two can't read. I tried this approach
on the actual dataset I want to use - IS50V_HAEDARGOGN_24122013_ISN2004.
And indeed, the two stage process worked - to get height lines. But what
I actually want is a 3d height map image, where dark colors are low and
bright colors are high and so forth. So I switched from -burn 1 to the
-3d flag. Now it started outputting 64 bit float files, however; convert
couldn't handle them, nor tifftopnm. So I went back to specifying -ot
Byte or -ot UInt16 so I can use convert. However, the images just come
out all black. This is the same result I get if output directly to pnm
with -of PNM. 

	- kv, Karen



On lau, 2014-12-13 at 09:18 +0000, Ari Jolma wrote:
> Karen,
> 
> For example this command on my computer
> 
> gdal_rasterize -burn 1 -l is50v_mannvirki_flakar_24122013 -of GTiff -ts 
> 1000 1000 is50v_mannvirki_flakar_24122013.shp x.tiff
> 
> produces a 1000 x 1000 geotiff which is mostly zeros except ones where 
> the polygons are.
> 
> Can you tell us what command did you use?
> 
> Ari
> 
> ps: the website was a bit difficult to use for non-icelanders.
> 
> 13.12.2014, 06:18, Karen Pease kirjoitti:
> > Hi all,
> >
> > I'm running Fedora 21 with a fresh built gdal-1.9.2. Try as I might, I
> > can't get gdal_rasterize to output anything other than purely
> > transparent images, purely white images, or purely black images.
> >
> > I want to use it on this dataset - "Elevation data. GDB og SHP.
> > ISN2004":
> >
> > http://atlas.lmi.is/LmiData/index.php?id=1079838344912
> >
> > I've spent maybe 8 hours on this, including trying all sorts of
> > different commandlines. After finding that I couldn't get that to work,
> > I found some sample tutorials that includes a shp file and some command
> > lines to use it with gdal_rasterize:
> >
> > http://disc.sci.gsfc.nasa.gov/dataholdings/?q=recipes/How-to-Obtain-a-Shapefile-based-Data-Subset-with-GrADS
> > http://www.openforis.org/OFwiki/index.php/Special:WhatLinksHere/Example_data_set
> >
> > None of these work for me either (using it exactly as they say to), so I
> > don't think it's my shp files that's the problem; I think it's
> > gdal_rasterize or something it depends on. I know the problem isn't an
> > image viewer problem either - I've tried multiple viewers, and I've
> > tried saving the files to PNM to allow for manual inspection - they all
> > contain only the same data value repeated over and over, no variation,
> > just pure one color.
> >
> > What should I do? I really need to make a heightmap out of this
> > landscape data for inclusion into a 3d model...
> >
> >   - kv, Karen
> >
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From ari.jolma at gmail.com  Sat Dec 13 11:09:10 2014
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sat, 13 Dec 2014 19:09:10 +0000
Subject: [gdal-dev] Can't get gdal_rasterize to work... with anything.
In-Reply-To: <1418494057.30286.11.camel@eaku.net>
References: <1418451526.30286.4.camel@eaku.net> <548C0450.60601@gmail.com>
	<1418494057.30286.11.camel@eaku.net>
Message-ID: <548C8ED6.2030706@gmail.com>

13.12.2014, 18:07, Karen Pease kirjoitti:
> Okay, so, I think this may be getting me a bit closer to a solution.
>
> The output image of your command still wasn't viewable to me, either in
> gimp or gwenview. However, when I used ImageMagick to convert it to a
> PNG or other format, for the first time I saw some detail, so I guess
> it's a tif format that the former two can't read. I tried this approach
> on the actual dataset I want to use - IS50V_HAEDARGOGN_24122013_ISN2004.
> And indeed, the two stage process worked - to get height lines. But what
> I actually want is a 3d height map image, where dark colors are low and
> bright colors are high and so forth. So I switched from -burn 1 to the
> -3d flag. Now it started outputting 64 bit float files, however; convert
> couldn't handle them, nor tifftopnm. So I went back to specifying -ot
> Byte or -ot UInt16 so I can use convert. However, the images just come
> out all black. This is the same result I get if output directly to pnm
> with -of PNM.
Karen,

GeoTIFFs are usually only for GIS programs, not for general image viewers.

I downloaded the elevation data (~500 MB) and to me it looks like it is 
elevation points and lines. To make a DEM (raster where cell values are 
elevations) you would need to use a tool like gdal_grid with the point file.

Best,

Ari

>
> 	- kv, Karen
>
>
>
> On lau, 2014-12-13 at 09:18 +0000, Ari Jolma wrote:
>> Karen,
>>
>> For example this command on my computer
>>
>> gdal_rasterize -burn 1 -l is50v_mannvirki_flakar_24122013 -of GTiff -ts
>> 1000 1000 is50v_mannvirki_flakar_24122013.shp x.tiff
>>
>> produces a 1000 x 1000 geotiff which is mostly zeros except ones where
>> the polygons are.
>>
>> Can you tell us what command did you use?
>>
>> Ari
>>
>> ps: the website was a bit difficult to use for non-icelanders.
>>
>> 13.12.2014, 06:18, Karen Pease kirjoitti:
>>> Hi all,
>>>
>>> I'm running Fedora 21 with a fresh built gdal-1.9.2. Try as I might, I
>>> can't get gdal_rasterize to output anything other than purely
>>> transparent images, purely white images, or purely black images.
>>>
>>> I want to use it on this dataset - "Elevation data. GDB og SHP.
>>> ISN2004":
>>>
>>> http://atlas.lmi.is/LmiData/index.php?id=1079838344912
>>>
>>> I've spent maybe 8 hours on this, including trying all sorts of
>>> different commandlines. After finding that I couldn't get that to work,
>>> I found some sample tutorials that includes a shp file and some command
>>> lines to use it with gdal_rasterize:
>>>
>>> http://disc.sci.gsfc.nasa.gov/dataholdings/?q=recipes/How-to-Obtain-a-Shapefile-based-Data-Subset-with-GrADS
>>> http://www.openforis.org/OFwiki/index.php/Special:WhatLinksHere/Example_data_set
>>>
>>> None of these work for me either (using it exactly as they say to), so I
>>> don't think it's my shp files that's the problem; I think it's
>>> gdal_rasterize or something it depends on. I know the problem isn't an
>>> image viewer problem either - I've tried multiple viewers, and I've
>>> tried saving the files to PNM to allow for manual inspection - they all
>>> contain only the same data value repeated over and over, no variation,
>>> just pure one color.
>>>
>>> What should I do? I really need to make a heightmap out of this
>>> landscape data for inclusion into a 3d model...
>>>
>>>    - kv, Karen
>>>
>>>
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From meme at eaku.net  Sat Dec 13 11:32:11 2014
From: meme at eaku.net (Karen Pease)
Date: Sat, 13 Dec 2014 19:32:11 +0000
Subject: [gdal-dev] Can't get gdal_rasterize to work... with anything.
In-Reply-To: <548C8ED6.2030706@gmail.com>
References: <1418451526.30286.4.camel@eaku.net> <548C0450.60601@gmail.com>
	<1418494057.30286.11.camel@eaku.net> <548C8ED6.2030706@gmail.com>
Message-ID: <1418499131.30286.16.camel@eaku.net>

The problem exists when I output straight to a PNM as well, not just
with geotiff.

Can you give me an example gdal_grid command which actually works to
create a heightmap image that your average program can read? Because I'm
getting nowhere. :( For example, as a test:

gdal_grid -ot Byte -of PNM -l is50v_haedarpunktar_24122013 -outsize 800
500 is50v_haedarpunktar_24122013.shp y.pnm

y.pnm comes up as black. od shows that y.pnm is truly blank:

0000000 032520 034012 030060 032440 030060 031012 032465 000012
0000020 000000 000000 000000 000000 000000 000000 000000 000000
*
1415200 000000 000000 000000 000000 000000 000000 000000 000000
1415217

	- kv, Karen



On lau, 2014-12-13 at 19:09 +0000, Ari Jolma wrote:
> 13.12.2014, 18:07, Karen Pease kirjoitti:
> > Okay, so, I think this may be getting me a bit closer to a solution.
> >
> > The output image of your command still wasn't viewable to me, either in
> > gimp or gwenview. However, when I used ImageMagick to convert it to a
> > PNG or other format, for the first time I saw some detail, so I guess
> > it's a tif format that the former two can't read. I tried this approach
> > on the actual dataset I want to use - IS50V_HAEDARGOGN_24122013_ISN2004.
> > And indeed, the two stage process worked - to get height lines. But what
> > I actually want is a 3d height map image, where dark colors are low and
> > bright colors are high and so forth. So I switched from -burn 1 to the
> > -3d flag. Now it started outputting 64 bit float files, however; convert
> > couldn't handle them, nor tifftopnm. So I went back to specifying -ot
> > Byte or -ot UInt16 so I can use convert. However, the images just come
> > out all black. This is the same result I get if output directly to pnm
> > with -of PNM.
> Karen,
> 
> GeoTIFFs are usually only for GIS programs, not for general image viewers.
> 
> I downloaded the elevation data (~500 MB) and to me it looks like it is 
> elevation points and lines. To make a DEM (raster where cell values are 
> elevations) you would need to use a tool like gdal_grid with the point file.
> 
> Best,
> 
> Ari
> 
> >
> > 	- kv, Karen
> >
> >
> >
> > On lau, 2014-12-13 at 09:18 +0000, Ari Jolma wrote:
> >> Karen,
> >>
> >> For example this command on my computer
> >>
> >> gdal_rasterize -burn 1 -l is50v_mannvirki_flakar_24122013 -of GTiff -ts
> >> 1000 1000 is50v_mannvirki_flakar_24122013.shp x.tiff
> >>
> >> produces a 1000 x 1000 geotiff which is mostly zeros except ones where
> >> the polygons are.
> >>
> >> Can you tell us what command did you use?
> >>
> >> Ari
> >>
> >> ps: the website was a bit difficult to use for non-icelanders.
> >>
> >> 13.12.2014, 06:18, Karen Pease kirjoitti:
> >>> Hi all,
> >>>
> >>> I'm running Fedora 21 with a fresh built gdal-1.9.2. Try as I might, I
> >>> can't get gdal_rasterize to output anything other than purely
> >>> transparent images, purely white images, or purely black images.
> >>>
> >>> I want to use it on this dataset - "Elevation data. GDB og SHP.
> >>> ISN2004":
> >>>
> >>> http://atlas.lmi.is/LmiData/index.php?id=1079838344912
> >>>
> >>> I've spent maybe 8 hours on this, including trying all sorts of
> >>> different commandlines. After finding that I couldn't get that to work,
> >>> I found some sample tutorials that includes a shp file and some command
> >>> lines to use it with gdal_rasterize:
> >>>
> >>> http://disc.sci.gsfc.nasa.gov/dataholdings/?q=recipes/How-to-Obtain-a-Shapefile-based-Data-Subset-with-GrADS
> >>> http://www.openforis.org/OFwiki/index.php/Special:WhatLinksHere/Example_data_set
> >>>
> >>> None of these work for me either (using it exactly as they say to), so I
> >>> don't think it's my shp files that's the problem; I think it's
> >>> gdal_rasterize or something it depends on. I know the problem isn't an
> >>> image viewer problem either - I've tried multiple viewers, and I've
> >>> tried saving the files to PNM to allow for manual inspection - they all
> >>> contain only the same data value repeated over and over, no variation,
> >>> just pure one color.
> >>>
> >>> What should I do? I really need to make a heightmap out of this
> >>> landscape data for inclusion into a 3d model...
> >>>
> >>>    - kv, Karen
> >>>
> >>>
> >>>
> >>>
> >>> _______________________________________________
> >>> gdal-dev mailing list
> >>> gdal-dev at lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From ari.jolma at gmail.com  Sat Dec 13 15:33:40 2014
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sat, 13 Dec 2014 23:33:40 +0000
Subject: [gdal-dev] Can't get gdal_rasterize to work... with anything.
In-Reply-To: <1418499131.30286.16.camel@eaku.net>
References: <1418451526.30286.4.camel@eaku.net> <548C0450.60601@gmail.com>	
	<1418494057.30286.11.camel@eaku.net> <548C8ED6.2030706@gmail.com>
	<1418499131.30286.16.camel@eaku.net>
Message-ID: <548CCCD4.7020304@gmail.com>

Karen,

What is the field with the elevations? I tried with HAEDDYPIME:

  gdal_grid -of GTiff -l is50v_haedarpunktar_24122013 -outsize 1000 1000 
-zfield HAEDDYPIME is50v_haedarpunktar_24122013.shp x.tiff
Grid data type is "Float64"
Grid size = (1000 1000).
Corner coordinates = (248491.242441 674738.882768)-(757263.099390 
311759.059646).
Grid cell size = (508.263593 362.617206).
Source point count = 10298.
Algorithm name: "invdist".
Options are 
"power=2.000000:smoothing=0.000000:radius1=0.000000:radius2=0.000000:angle=0.000000:max_points=0:min_points=0:nodata=0.000000"

0...10...20...30...40...50...60...70...80...90...100 - done.

The result is not very good.

I suggest you install for example QGIS for looking at the result.

Best,

Ari

13.12.2014, 19:32, Karen Pease kirjoitti:
> The problem exists when I output straight to a PNM as well, not just
> with geotiff.
>
> Can you give me an example gdal_grid command which actually works to
> create a heightmap image that your average program can read? Because I'm
> getting nowhere. :( For example, as a test:
>
> gdal_grid -ot Byte -of PNM -l is50v_haedarpunktar_24122013 -outsize 800
> 500 is50v_haedarpunktar_24122013.shp y.pnm
>
> y.pnm comes up as black. od shows that y.pnm is truly blank:
>
> 0000000 032520 034012 030060 032440 030060 031012 032465 000012
> 0000020 000000 000000 000000 000000 000000 000000 000000 000000
> *
> 1415200 000000 000000 000000 000000 000000 000000 000000 000000
> 1415217
>
> 	- kv, Karen
>
>
>
> On lau, 2014-12-13 at 19:09 +0000, Ari Jolma wrote:
>> 13.12.2014, 18:07, Karen Pease kirjoitti:
>>> Okay, so, I think this may be getting me a bit closer to a solution.
>>>
>>> The output image of your command still wasn't viewable to me, either in
>>> gimp or gwenview. However, when I used ImageMagick to convert it to a
>>> PNG or other format, for the first time I saw some detail, so I guess
>>> it's a tif format that the former two can't read. I tried this approach
>>> on the actual dataset I want to use - IS50V_HAEDARGOGN_24122013_ISN2004.
>>> And indeed, the two stage process worked - to get height lines. But what
>>> I actually want is a 3d height map image, where dark colors are low and
>>> bright colors are high and so forth. So I switched from -burn 1 to the
>>> -3d flag. Now it started outputting 64 bit float files, however; convert
>>> couldn't handle them, nor tifftopnm. So I went back to specifying -ot
>>> Byte or -ot UInt16 so I can use convert. However, the images just come
>>> out all black. This is the same result I get if output directly to pnm
>>> with -of PNM.
>> Karen,
>>
>> GeoTIFFs are usually only for GIS programs, not for general image viewers.
>>
>> I downloaded the elevation data (~500 MB) and to me it looks like it is
>> elevation points and lines. To make a DEM (raster where cell values are
>> elevations) you would need to use a tool like gdal_grid with the point file.
>>
>> Best,
>>
>> Ari
>>
>>> 	- kv, Karen
>>>
>>>
>>>
>>> On lau, 2014-12-13 at 09:18 +0000, Ari Jolma wrote:
>>>> Karen,
>>>>
>>>> For example this command on my computer
>>>>
>>>> gdal_rasterize -burn 1 -l is50v_mannvirki_flakar_24122013 -of GTiff -ts
>>>> 1000 1000 is50v_mannvirki_flakar_24122013.shp x.tiff
>>>>
>>>> produces a 1000 x 1000 geotiff which is mostly zeros except ones where
>>>> the polygons are.
>>>>
>>>> Can you tell us what command did you use?
>>>>
>>>> Ari
>>>>
>>>> ps: the website was a bit difficult to use for non-icelanders.
>>>>
>>>> 13.12.2014, 06:18, Karen Pease kirjoitti:
>>>>> Hi all,
>>>>>
>>>>> I'm running Fedora 21 with a fresh built gdal-1.9.2. Try as I might, I
>>>>> can't get gdal_rasterize to output anything other than purely
>>>>> transparent images, purely white images, or purely black images.
>>>>>
>>>>> I want to use it on this dataset - "Elevation data. GDB og SHP.
>>>>> ISN2004":
>>>>>
>>>>> http://atlas.lmi.is/LmiData/index.php?id=1079838344912
>>>>>
>>>>> I've spent maybe 8 hours on this, including trying all sorts of
>>>>> different commandlines. After finding that I couldn't get that to work,
>>>>> I found some sample tutorials that includes a shp file and some command
>>>>> lines to use it with gdal_rasterize:
>>>>>
>>>>> http://disc.sci.gsfc.nasa.gov/dataholdings/?q=recipes/How-to-Obtain-a-Shapefile-based-Data-Subset-with-GrADS
>>>>> http://www.openforis.org/OFwiki/index.php/Special:WhatLinksHere/Example_data_set
>>>>>
>>>>> None of these work for me either (using it exactly as they say to), so I
>>>>> don't think it's my shp files that's the problem; I think it's
>>>>> gdal_rasterize or something it depends on. I know the problem isn't an
>>>>> image viewer problem either - I've tried multiple viewers, and I've
>>>>> tried saving the files to PNM to allow for manual inspection - they all
>>>>> contain only the same data value repeated over and over, no variation,
>>>>> just pure one color.
>>>>>
>>>>> What should I do? I really need to make a heightmap out of this
>>>>> landscape data for inclusion into a 3d model...
>>>>>
>>>>>     - kv, Karen
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From meme at eaku.net  Sat Dec 13 16:02:06 2014
From: meme at eaku.net (Karen Pease)
Date: Sun, 14 Dec 2014 00:02:06 +0000
Subject: [gdal-dev] Can't get gdal_rasterize to work... with anything.
In-Reply-To: <548CCCD4.7020304@gmail.com>
References: <1418451526.30286.4.camel@eaku.net> <548C0450.60601@gmail.com>
	<1418494057.30286.11.camel@eaku.net> <548C8ED6.2030706@gmail.com>
	<1418499131.30286.16.camel@eaku.net> <548CCCD4.7020304@gmail.com>
Message-ID: <1418515326.30286.24.camel@eaku.net>

I'm installing qgis right now to try, hopefully it's not too
complicated. 

I think haedarpunkar is just mountain peaks, not full details providing
the contour like the polygons are - when I rendered it out with
gdal_rasterize the points were very sparse. I know nothing about the
internal details of these files, though. My only prior experience with
GIS was years ago working with SRTM data, and my copy of the data came
pre-rasterized.

There's so many data files here of different formats on the site that I
provided you (including in the dataset you already downloaded), surely
there's something that contains something I can work with. For example,
there's 211 megs of data in IS50V_HAEDARGOGN.gdb, which I would assume
is GDB format, which gdal says it supports, but I can't figure out how
use it because there's no single ".gdb" file, it's a bunch of tables.
And there's also the whole different dataset HAEDARLIKAN_LMI which
contains an img and a 1 gig ige file, but it looks like they're not
supported by gdal.

I'm getting so desperate here that I've started trying to color in and
shade the curves from haedarlinur by hand  :(  As you might expect, it's
taking forever and not going very well.

 - kv, Karen



On lau, 2014-12-13 at 23:33 +0000, Ari Jolma wrote:
> Karen,
> 
> What is the field with the elevations? I tried with HAEDDYPIME:
> 
>   gdal_grid -of GTiff -l is50v_haedarpunktar_24122013 -outsize 1000 1000 
> -zfield HAEDDYPIME is50v_haedarpunktar_24122013.shp x.tiff
> Grid data type is "Float64"
> Grid size = (1000 1000).
> Corner coordinates = (248491.242441 674738.882768)-(757263.099390 
> 311759.059646).
> Grid cell size = (508.263593 362.617206).
> Source point count = 10298.
> Algorithm name: "invdist".
> Options are 
> "power=2.000000:smoothing=0.000000:radius1=0.000000:radius2=0.000000:angle=0.000000:max_points=0:min_points=0:nodata=0.000000"
> 
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> The result is not very good.
> 
> I suggest you install for example QGIS for looking at the result.
> 
> Best,
> 
> Ari
> 
> 13.12.2014, 19:32, Karen Pease kirjoitti:
> > The problem exists when I output straight to a PNM as well, not just
> > with geotiff.
> >
> > Can you give me an example gdal_grid command which actually works to
> > create a heightmap image that your average program can read? Because I'm
> > getting nowhere. :( For example, as a test:
> >
> > gdal_grid -ot Byte -of PNM -l is50v_haedarpunktar_24122013 -outsize 800
> > 500 is50v_haedarpunktar_24122013.shp y.pnm
> >
> > y.pnm comes up as black. od shows that y.pnm is truly blank:
> >
> > 0000000 032520 034012 030060 032440 030060 031012 032465 000012
> > 0000020 000000 000000 000000 000000 000000 000000 000000 000000
> > *
> > 1415200 000000 000000 000000 000000 000000 000000 000000 000000
> > 1415217
> >
> > 	- kv, Karen
> >
> >
> >
> > On lau, 2014-12-13 at 19:09 +0000, Ari Jolma wrote:
> >> 13.12.2014, 18:07, Karen Pease kirjoitti:
> >>> Okay, so, I think this may be getting me a bit closer to a solution.
> >>>
> >>> The output image of your command still wasn't viewable to me, either in
> >>> gimp or gwenview. However, when I used ImageMagick to convert it to a
> >>> PNG or other format, for the first time I saw some detail, so I guess
> >>> it's a tif format that the former two can't read. I tried this approach
> >>> on the actual dataset I want to use - IS50V_HAEDARGOGN_24122013_ISN2004.
> >>> And indeed, the two stage process worked - to get height lines. But what
> >>> I actually want is a 3d height map image, where dark colors are low and
> >>> bright colors are high and so forth. So I switched from -burn 1 to the
> >>> -3d flag. Now it started outputting 64 bit float files, however; convert
> >>> couldn't handle them, nor tifftopnm. So I went back to specifying -ot
> >>> Byte or -ot UInt16 so I can use convert. However, the images just come
> >>> out all black. This is the same result I get if output directly to pnm
> >>> with -of PNM.
> >> Karen,
> >>
> >> GeoTIFFs are usually only for GIS programs, not for general image viewers.
> >>
> >> I downloaded the elevation data (~500 MB) and to me it looks like it is
> >> elevation points and lines. To make a DEM (raster where cell values are
> >> elevations) you would need to use a tool like gdal_grid with the point file.
> >>
> >> Best,
> >>
> >> Ari
> >>
> >>> 	- kv, Karen
> >>>
> >>>
> >>>
> >>> On lau, 2014-12-13 at 09:18 +0000, Ari Jolma wrote:
> >>>> Karen,
> >>>>
> >>>> For example this command on my computer
> >>>>
> >>>> gdal_rasterize -burn 1 -l is50v_mannvirki_flakar_24122013 -of GTiff -ts
> >>>> 1000 1000 is50v_mannvirki_flakar_24122013.shp x.tiff
> >>>>
> >>>> produces a 1000 x 1000 geotiff which is mostly zeros except ones where
> >>>> the polygons are.
> >>>>
> >>>> Can you tell us what command did you use?
> >>>>
> >>>> Ari
> >>>>
> >>>> ps: the website was a bit difficult to use for non-icelanders.
> >>>>
> >>>> 13.12.2014, 06:18, Karen Pease kirjoitti:
> >>>>> Hi all,
> >>>>>
> >>>>> I'm running Fedora 21 with a fresh built gdal-1.9.2. Try as I might, I
> >>>>> can't get gdal_rasterize to output anything other than purely
> >>>>> transparent images, purely white images, or purely black images.
> >>>>>
> >>>>> I want to use it on this dataset - "Elevation data. GDB og SHP.
> >>>>> ISN2004":
> >>>>>
> >>>>> http://atlas.lmi.is/LmiData/index.php?id=1079838344912
> >>>>>
> >>>>> I've spent maybe 8 hours on this, including trying all sorts of
> >>>>> different commandlines. After finding that I couldn't get that to work,
> >>>>> I found some sample tutorials that includes a shp file and some command
> >>>>> lines to use it with gdal_rasterize:
> >>>>>
> >>>>> http://disc.sci.gsfc.nasa.gov/dataholdings/?q=recipes/How-to-Obtain-a-Shapefile-based-Data-Subset-with-GrADS
> >>>>> http://www.openforis.org/OFwiki/index.php/Special:WhatLinksHere/Example_data_set
> >>>>>
> >>>>> None of these work for me either (using it exactly as they say to), so I
> >>>>> don't think it's my shp files that's the problem; I think it's
> >>>>> gdal_rasterize or something it depends on. I know the problem isn't an
> >>>>> image viewer problem either - I've tried multiple viewers, and I've
> >>>>> tried saving the files to PNM to allow for manual inspection - they all
> >>>>> contain only the same data value repeated over and over, no variation,
> >>>>> just pure one color.
> >>>>>
> >>>>> What should I do? I really need to make a heightmap out of this
> >>>>> landscape data for inclusion into a 3d model...
> >>>>>
> >>>>>     - kv, Karen
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>> _______________________________________________
> >>>>> gdal-dev mailing list
> >>>>> gdal-dev at lists.osgeo.org
> >>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>>> _______________________________________________
> >>>> gdal-dev mailing list
> >>>> gdal-dev at lists.osgeo.org
> >>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >



From andre+joost at nurfuerspam.de  Sun Dec 14 00:08:10 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Sun, 14 Dec 2014 09:08:10 +0100
Subject: [gdal-dev] Can't get gdal_rasterize to work... with anything.
In-Reply-To: <1418515326.30286.24.camel@eaku.net>
References: <1418451526.30286.4.camel@eaku.net>
	<548C0450.60601@gmail.com>	<1418494057.30286.11.camel@eaku.net>
	<548C8ED6.2030706@gmail.com>	<1418499131.30286.16.camel@eaku.net>
	<548CCCD4.7020304@gmail.com> <1418515326.30286.24.camel@eaku.net>
Message-ID: <m6jgia$b8j$1@ger.gmane.org>

Am 14.12.2014 um 01:02 schrieb Karen Pease:

> And there's also the whole different dataset HAEDARLIKAN_LMI which
> contains an img and a 1 gig ige file, but it looks like they're not
> supported by gdal.
>

You are right that the .ige file is not supported, but take the .img and 
you get the DEM data you want:

gdalinfo haedarlikan__LMI__isn93.img

Driver: HFA/Erdas Imagine Images (.img)
Files: haedarlikan__LMI_isn93.img
        haedarlikan__LMI_isn93.img.aux.xml
        haedarlikan__LMI_isn93.ige
        haedarlikan__LMI_isn93.rrd
Size is 29411, 21251
Coordinate System is:
PROJCS["ISN_1993_Lambert_Conformal_Conic",
     GEOGCS["GCS_ISN_1993",
         DATUM["Islands_Net_1993",
             SPHEROID["GRS_1980",6378137.0,298.257222101]],
         PRIMEM["Greenwich",0.0],
         UNIT["Degree",0.0174532925199433]],
     PROJECTION["Lambert_Conformal_Conic_2SP"],
     PARAMETER["False_Easting",500000.0],
     PARAMETER["False_Northing",500000.0],
     PARAMETER["Central_Meridian",-19.0],
     PARAMETER["Standard_Parallel_1",64.25],
     PARAMETER["Standard_Parallel_2",65.75],
     PARAMETER["Latitude_Of_Origin",65.0],
     UNIT["Meter",1.0]]
Origin = (211793.041244542460000,705010.000000003840000)
Pixel Size = (20.000000000000000,-20.000000000000000)
Corner Coordinates:
Upper Left  (  211793.041,  705010.000) ( 25d32'14.67"W, 66d42'16.91"N)
Lower Left  (  211793.041,  279990.000) ( 24d40'28.86"W, 62d54'38.03"N)
Upper Right (  800013.041,  705010.000) ( 12d11'48.54"W, 66d41'36.78"N)
Lower Right (  800013.041,  279990.000) ( 13d 5'39.06"W, 62d54' 3.17"N)
Center      (  505903.041,  492500.000) ( 18d52'30.63"W, 64d55'57.62"N)
Band 1 Block=64x64 Type=Float32, ColorInterp=Undefined
   Description = Layer_1
   Min=0.000 Max=2107.338
   Minimum=0.000, Maximum=2107.338, Mean=262.838, StdDev=368.478
   NoData Value=-3.4028234663852886e+038
   Overviews: 14706x10626, 7353x5313, 3677x2657, 1839x1329, 920x665, 
460x333, 230x167
   Metadata:
     LAYER_TYPE=athematic
     STATISTICS_COVARIANCES=135776,249299189
     STATISTICS_EXCLUDEDVALUES=
     STATISTICS_MAXIMUM=2107,3381347656
     STATISTICS_MEAN=262,83767652617
     STATISTICS_MEDIAN=0
     STATISTICS_MINIMUM=0
     STATISTICS_MODE=0
     STATISTICS_SKIPFACTORX=1
     STATISTICS_SKIPFACTORY=1
     STATISTICS_STDDEV=368,47828877586

The file is rather small, but the data is in the .rrd file.

HTH,
Andr? Joost



From andre+joost at nurfuerspam.de  Sun Dec 14 01:09:38 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Sun, 14 Dec 2014 10:09:38 +0100
Subject: [gdal-dev] Can't get gdal_rasterize to work... with anything.
In-Reply-To: <1418451526.30286.4.camel@eaku.net>
References: <1418451526.30286.4.camel@eaku.net>
Message-ID: <m6jk91$u86$1@ger.gmane.org>

I guess you are getting an empty image because you have not told gdal 
which field includes the height data. I was successful with

gdal_rasterize -a HAEDDYPIME -ts 5000 3000 -l is50v_haedarlinur_24122013 
D:/Download/NEU/IS50V_HAEDARGOGN_24122013_ISN2004/IS50V_HAEDARGOGN_SHP/is50v_haedarlinur_24122013.shp 
D:/Karten/shp/Laender/Island/DEM.tif

You can import the shapefiles into QGIS, label them and look into the 
attribute table. You will find that headarlinur has the contour lines, 
with the height value in haeddypime. headarpunktar has only peaky, so it 
is not usefiul for generating a height map of the whole island.

HTH,
Andr? Joost

Am 13.12.2014 um 07:18 schrieb Karen Pease:
> Hi all,
>
> I'm running Fedora 21 with a fresh built gdal-1.9.2. Try as I might, I
> can't get gdal_rasterize to output anything other than purely
> transparent images, purely white images, or purely black images.
>
> I want to use it on this dataset - "Elevation data. GDB og SHP.
> ISN2004":
>
> http://atlas.lmi.is/LmiData/index.php?id=1079838344912
>
> I've spent maybe 8 hours on this, including trying all sorts of
> different commandlines. After finding that I couldn't get that to work,
> I found some sample tutorials that includes a shp file and some command
> lines to use it with gdal_rasterize:
>
> http://disc.sci.gsfc.nasa.gov/dataholdings/?q=recipes/How-to-Obtain-a-Shapefile-based-Data-Subset-with-GrADS
> http://www.openforis.org/OFwiki/index.php/Special:WhatLinksHere/Example_data_set
>
> None of these work for me either (using it exactly as they say to), so I
> don't think it's my shp files that's the problem; I think it's
> gdal_rasterize or something it depends on. I know the problem isn't an
> image viewer problem either - I've tried multiple viewers, and I've
> tried saving the files to PNM to allow for manual inspection - they all
> contain only the same data value repeated over and over, no variation,
> just pure one color.
>
> What should I do? I really need to make a heightmap out of this
> landscape data for inclusion into a 3d model...
>
>   - kv, Karen
>



From zoltans at geograph.co.za  Mon Dec 15 02:27:13 2014
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Mon, 15 Dec 2014 12:27:13 +0200
Subject: [gdal-dev] GDAL Utilities: Keeping output format identical to input
	format
Message-ID: <548EB781.3000101@geograph.co.za>

Hi,
I've got a few GeoTiffs which have malformed projection/CRS data in them.
I also have ones with the correct data in them.

I would like to replace the malformed projection info with the correct 
one, _without having the original bands re-sampled in any way whatsoever_.
If I use gdal_translate -a_srs +proj="tmerc wadda wadda" tiffbad 
tiffgood, is there a way to keep the bands identical to the input tiff file?
(Maybe someone has written a utility to strip this info out of a 'good' 
image, and set it for use in gdal_translate?)


In a similar vein, using gdaladdo to build pyramids does leave the 
original bands untouched and simply adds the newly calculated overviews 
to the tiff image, does it not?

TIA,
Regards,
Zoltan



-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Services

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323     www.geograph.co.za
===========================================

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141215/dce01c63/attachment.html>

From even.rouault at spatialys.com  Mon Dec 15 02:53:51 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 15 Dec 2014 11:53:51 +0100
Subject: [gdal-dev] GDAL Utilities: Keeping output format identical to
	input format
In-Reply-To: <548EB781.3000101@geograph.co.za>
References: <548EB781.3000101@geograph.co.za>
Message-ID: <201412151153.51700.even.rouault@spatialys.com>

Zoltan,

> Hi,
> I've got a few GeoTiffs which have malformed projection/CRS data in them.
> I also have ones with the correct data in them.
> 
> I would like to replace the malformed projection info with the correct
> one, _without having the original bands re-sampled in any way whatsoever_.
> If I use gdal_translate -a_srs +proj="tmerc wadda wadda" tiffbad
> tiffgood, is there a way to keep the bands identical to the input tiff
> file? (Maybe someone has written a utility to strip this info out of a
> 'good' image, and set it for use in gdal_translate?)

See http://www.gdal.org/gdal_edit.html

> 
> 
> In a similar vein, using gdaladdo to build pyramids does leave the
> original bands untouched and simply adds the newly calculated overviews
> to the tiff image, does it not?

Unspecified pyramid levels are kept untouched.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From zoltans at geograph.co.za  Mon Dec 15 03:27:34 2014
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Mon, 15 Dec 2014 13:27:34 +0200
Subject: [gdal-dev] GDAL Utilities: Keeping output format identical to
 input format
In-Reply-To: <201412151153.51700.even.rouault@spatialys.com>
References: <548EB781.3000101@geograph.co.za>
	<201412151153.51700.even.rouault@spatialys.com>
Message-ID: <548EC5A6.4070105@geograph.co.za>

On 2014/12/15 12:53, Even Rouault wrote:
> See http://www.gdal.org/gdal_edit.html

Hi Even,
I had a look at gdal_edit but could not get it to work on the server as 
it is Ubuntu 12.04, so first I need to work out how to fix the gdal 
installation on there.

    *zls at gs0:/mnt/geo_lvm0/gisdata/raster/orthos$* gdalinfo --version
    GDAL 1.9.1, released 2012/05/15
    *zls at gs0:/mnt/geo_lvm0/gisdata/raster/orthos$* gdal_edit.py --version
    Traceback (most recent call last):
       File "/usr/bin/gdal_edit.py", line 33, in <module>
         from osgeo import gdal
       File "/usr/lib/python2.6/dist-packages/osgeo/__init__.py", line
    21, in <module>
         _gdal = swig_import_helper()
       File "/usr/lib/python2.6/dist-packages/osgeo/__init__.py", line
    17, in swig_import_helper
         _mod = imp.load_module('_gdal', fp, pathname, description)
    ImportError: /usr/local/lib/libgdal.so.1: undefined symbol: GEOSSimplify
    *zls at gs0:/mnt/geo_lvm0/gisdata/raster/orthos$*

and:

    *root at gs0:/usr/share/proj#*apt-get update | grep -i gis
    *Ign* http://ppa.launchpad.net/ubuntugis/ubuntugis-unstable/ubuntu/
    lucid/main Translation-en_ZA
    *root at gs0:/usr/share/proj#*uname -a
    Linux gs0 2.6.32-41-generic #94-Ubuntu SMP Fri Jul 6 18:00:34 UTC
    2012 x86_64 GNU/Linux
    *root at gs0:/usr/share/proj#*


To get back to this thread topic, then "Bad" TIFF is:

    zls at gs0:/mnt/geo_lvm0/gisdata/raster/orthos$ gdalinfo
    ngi_20141205/3121DA/3121DA_09_2011_407_RGB_RECT.TIF
    Driver: GTiff/GeoTIFF
    Files: ngi_20141205/3121DA/3121DA_09_2011_407_RGB_RECT.TIF
    ngi_20141205/3121DA/3121DA_09_2011_407_RGB_RECT.TFW
    Size is 10881, 11781
    Coordinate System is:
    LOCAL_CS["IMAGINE GeoTIFF Support ERDAS IMAGINE 2013 13.0.0.92
    Geocoding information not available Projection Name = Unknown Units
    = meters GeoTIFF Units = meters",
         UNIT["metre",1,
             AUTHORITY["EPSG","9001"]]]
    Origin = (61356.750000000000000,-3491979.750000000000000)
    Pixel Size = (0.500000000000000,-0.500000000000000)
    Metadata:
       AREA_OR_POINT=Area
       TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
       TIFFTAG_XRESOLUTION=1
       TIFFTAG_YRESOLUTION=1
    Image Structure Metadata:
       COMPRESSION=YCbCr JPEG
       INTERLEAVE=PIXEL
       SOURCE_COLOR_SPACE=YCbCr
    Corner Coordinates:
    Upper Left  (   61356.750,-3491979.750)
    Lower Left  (   61356.750,-3497870.250)
    Upper Right (   66797.250,-3491979.750)
    Lower Right (   66797.250,-3497870.250)
    Center      (   64077.000,-3494925.000)
    Band 1 Block=256x256 Type=Byte, ColorInterp=Red
       Overviews: 5440x5890, 2720x2945, 1360x1472, 680x736, 340x368,
    170x184, 85x92, 42x46, 21x23
    Band 2 Block=256x256 Type=Byte, ColorInterp=Green
       Overviews: 5440x5890, 2720x2945, 1360x1472, 680x736, 340x368,
    170x184, 85x92, 42x46, 21x23
    Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
       Overviews: 5440x5890, 2720x2945, 1360x1472, 680x736, 340x368,
    170x184, 85x92, 42x46, 21x23
    zls at gs0:/mnt/geo_lvm0/gisdata/raster/orthos$

and the good version (tile next to this tile) is:

    zls at gs0:/mnt/geo_lvm0/gisdata/raster/orthos$ gdalinfo
    ngi_20141205/3121DA/3121DA_10_2011_407_RGB_RECT.TIF
    Driver: GTiff/GeoTIFF
    Files: ngi_20141205/3121DA/3121DA_10_2011_407_RGB_RECT.TIF
    ngi_20141205/3121DA/3121DA_10_2011_407_RGB_RECT.TFW
    Size is 10881, 11781
    Coordinate System is:
    PROJCS["WG21",
         GEOGCS["GCS_Hartebeesthoek_1994",
             DATUM["Hartebeesthoek94",
                 SPHEROID["WGS_1984",6378137,298.257223563,
                     AUTHORITY["EPSG","7030"]],
                 AUTHORITY["EPSG","6148"]],
             PRIMEM["Greenwich",0],
             UNIT["degree",0.0174532925199433]],
         PROJECTION["Transverse_Mercator"],
         PARAMETER["latitude_of_origin",0],
         PARAMETER["central_meridian",21],
         PARAMETER["scale_factor",1],
         PARAMETER["false_easting",0],
         PARAMETER["false_northing",0],
         UNIT["metre",1,
             AUTHORITY["EPSG","9001"]]]
    Origin = (66102.750000000000000,-3492009.750000000000000)
    Pixel Size = (0.500000000000000,-0.500000000000000)
    Metadata:
       AREA_OR_POINT=Area
       TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
       TIFFTAG_XRESOLUTION=1
       TIFFTAG_YRESOLUTION=1
    Image Structure Metadata:
       COMPRESSION=YCbCr JPEG
       INTERLEAVE=PIXEL
       SOURCE_COLOR_SPACE=YCbCr
    Corner Coordinates:
    Upper Left  (   66102.750,-3492009.750) ( 21d41'46.15"E, 31d32'54.95"S)
    Lower Left  (   66102.750,-3497900.250) ( 21d41'47.58"E, 31d36' 6.19"S)
    Upper Right (   71543.250,-3492009.750) ( 21d45'12.41"E, 31d32'53.78"S)
    Lower Right (   71543.250,-3497900.250) ( 21d45'13.94"E, 31d36' 5.02"S)
    Center      (   68823.000,-3494955.000) ( 21d43'30.02"E, 31d34'30.00"S)
    Band 1 Block=256x256 Type=Byte, ColorInterp=Red
       Overviews: 5440x5890, 2720x2945, 1360x1472, 680x736, 340x368,
    170x184, 85x92, 42x46, 21x23
    Band 2 Block=256x256 Type=Byte, ColorInterp=Green
       Overviews: 5440x5890, 2720x2945, 1360x1472, 680x736, 340x368,
    170x184, 85x92, 42x46, 21x23
    Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
       Overviews: 5440x5890, 2720x2945, 1360x1472, 680x736, 340x368,
    170x184, 85x92, 42x46, 21x23
    zls at gs0:/mnt/geo_lvm0/gisdata/raster/orthos$

I am using the following (instead of gdal_edit) but was wondering if my 
band pixels were being altered.

    gdal_translate -a_srs +proj="tmerc +lat_0=0 +lon_0=19 +k=1 +x_0=0
    +y_0=0 +axis=wsu +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m
    +no_defs" -co "COMPRESS=JPEG" -co "PHOTOMETRIC=YCBCR"
    3121DA_09_2011_407_RGB_RECT.tif 3121da09.tif

Then because the gdal_translate strips out the overviews:

      gdaladdo --config COMPRESS_OVERVIEW JPEG --config
    PHOTOMETRIC_OVERVIEW YCBCR --config INTERLEAVE_OVERVIEW PIXEL
    3121da09.tif 2 4 8 16 32 64 128 256 512

So, I was looking at a 1-step way of doing the above, ideally without 
having to manually peek into an adjoining sheet to get the correct proj.
*This is what I am aiming at:*
I have about 40000 of these images, and I have written a BASH with awk 
script  to go through all the images and pull out certain info to build 
a CSV file so that I can create attributed polygons to have info about 
the underlying raster image. When this awk script fails to find embedded 
proj info, it would be nice to make it peek into the adjoining ortho, 
extract the relevant info, and edit it into the 'bad' ortho.

Thanks again for your help.
Kind regards,
Zoltan

-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Services

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323     www.geograph.co.za
===========================================

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141215/43773468/attachment.html>

From even.rouault at spatialys.com  Mon Dec 15 03:36:40 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 15 Dec 2014 12:36:40 +0100
Subject: [gdal-dev] GDAL Utilities: Keeping output format identical to
	input format
In-Reply-To: <548EC5A6.4070105@geograph.co.za>
References: <548EB781.3000101@geograph.co.za>
	<201412151153.51700.even.rouault@spatialys.com>
	<548EC5A6.4070105@geograph.co.za>
Message-ID: <201412151236.40697.even.rouault@spatialys.com>

Le lundi 15 d?cembre 2014 12:27:34, Zoltan Szecsei a ?crit :
> On 2014/12/15 12:53, Even Rouault wrote:
> > See http://www.gdal.org/gdal_edit.html
> 
> Hi Even,
> I had a look at gdal_edit but could not get it to work on the server as
> it is Ubuntu 12.04, so first I need to work out how to fix the gdal
> installation on there.
> 
>     *zls at gs0:/mnt/geo_lvm0/gisdata/raster/orthos$* gdalinfo --version
>     GDAL 1.9.1, released 2012/05/15
>     *zls at gs0:/mnt/geo_lvm0/gisdata/raster/orthos$* gdal_edit.py --version
>     Traceback (most recent call last):
>        File "/usr/bin/gdal_edit.py", line 33, in <module>
>          from osgeo import gdal
>        File "/usr/lib/python2.6/dist-packages/osgeo/__init__.py", line
>     21, in <module>
>          _gdal = swig_import_helper()
>        File "/usr/lib/python2.6/dist-packages/osgeo/__init__.py", line
>     17, in swig_import_helper
>          _mod = imp.load_module('_gdal', fp, pathname, description)
>     ImportError: /usr/local/lib/libgdal.so.1: undefined symbol:
> GEOSSimplify *zls at gs0:/mnt/geo_lvm0/gisdata/raster/orthos$*

Looks like your GDAL has been compiled against a GEOS version and you run it 
against another (older) one.
Or you have a mix of GDAL versions.

> I am using the following (instead of gdal_edit) but was wondering if my
> band pixels were being altered.

Yes they will as you use a lossy compression.

> 
>     gdal_translate -a_srs +proj="tmerc +lat_0=0 +lon_0=19 +k=1 +x_0=0
>     +y_0=0 +axis=wsu +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m
>     +no_defs" -co "COMPRESS=JPEG" -co "PHOTOMETRIC=YCBCR"
>     3121DA_09_2011_407_RGB_RECT.tif 3121da09.tif
> 
> Then because the gdal_translate strips out the overviews:
> 
>       gdaladdo --config COMPRESS_OVERVIEW JPEG --config
>     PHOTOMETRIC_OVERVIEW YCBCR --config INTERLEAVE_OVERVIEW PIXEL
>     3121da09.tif 2 4 8 16 32 64 128 256 512
> 
> So, I was looking at a 1-step way of doing the above, ideally without
> having to manually peek into an adjoining sheet to get the correct proj.
> *This is what I am aiming at:*
> I have about 40000 of these images, and I have written a BASH with awk
> script  to go through all the images and pull out certain info to build
> a CSV file so that I can create attributed polygons to have info about
> the underlying raster image. When this awk script fails to find embedded
> proj info, it would be nice to make it peek into the adjoining ortho,
> extract the relevant info, and edit it into the 'bad' ortho.

gdal_edit is really what you want. Will be much faster than 
gdal_translate+gdaladdo and will not alter pixel values.

> 
> Thanks again for your help.
> Kind regards,
> Zoltan

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From zoltans at geograph.co.za  Mon Dec 15 03:44:30 2014
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Mon, 15 Dec 2014 13:44:30 +0200
Subject: [gdal-dev] GDAL Utilities: Keeping output format identical to
 input format
In-Reply-To: <201412151236.40697.even.rouault@spatialys.com>
References: <548EB781.3000101@geograph.co.za>
	<201412151153.51700.even.rouault@spatialys.com>
	<548EC5A6.4070105@geograph.co.za>
	<201412151236.40697.even.rouault@spatialys.com>
Message-ID: <548EC99E.1090000@geograph.co.za>

Hi Even,
Thanks for the comment regarding gdal_edit.

Regards,
Zoltan


On 2014/12/15 13:36, Even Rouault wrote:
> Le lundi 15 d?cembre 2014 12:27:34, Zoltan Szecsei a ?crit :
>> On 2014/12/15 12:53, Even Rouault wrote:
>>> See http://www.gdal.org/gdal_edit.html
>> Hi Even,
>> I had a look at gdal_edit but could not get it to work on the server as
>> it is Ubuntu 12.04, so first I need to work out how to fix the gdal
>> installation on there.
>>
>>      *zls at gs0:/mnt/geo_lvm0/gisdata/raster/orthos$* gdalinfo --version
>>      GDAL 1.9.1, released 2012/05/15
>>      *zls at gs0:/mnt/geo_lvm0/gisdata/raster/orthos$* gdal_edit.py --version
>>      Traceback (most recent call last):
>>         File "/usr/bin/gdal_edit.py", line 33, in <module>
>>           from osgeo import gdal
>>         File "/usr/lib/python2.6/dist-packages/osgeo/__init__.py", line
>>      21, in <module>
>>           _gdal = swig_import_helper()
>>         File "/usr/lib/python2.6/dist-packages/osgeo/__init__.py", line
>>      17, in swig_import_helper
>>           _mod = imp.load_module('_gdal', fp, pathname, description)
>>      ImportError: /usr/local/lib/libgdal.so.1: undefined symbol:
>> GEOSSimplify *zls at gs0:/mnt/geo_lvm0/gisdata/raster/orthos$*
> Looks like your GDAL has been compiled against a GEOS version and you run it
> against another (older) one.
> Or you have a mix of GDAL versions.
>
>> I am using the following (instead of gdal_edit) but was wondering if my
>> band pixels were being altered.
> Yes they will as you use a lossy compression.
>
>>      gdal_translate -a_srs +proj="tmerc +lat_0=0 +lon_0=19 +k=1 +x_0=0
>>      +y_0=0 +axis=wsu +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m
>>      +no_defs" -co "COMPRESS=JPEG" -co "PHOTOMETRIC=YCBCR"
>>      3121DA_09_2011_407_RGB_RECT.tif 3121da09.tif
>>
>> Then because the gdal_translate strips out the overviews:
>>
>>        gdaladdo --config COMPRESS_OVERVIEW JPEG --config
>>      PHOTOMETRIC_OVERVIEW YCBCR --config INTERLEAVE_OVERVIEW PIXEL
>>      3121da09.tif 2 4 8 16 32 64 128 256 512
>>
>> So, I was looking at a 1-step way of doing the above, ideally without
>> having to manually peek into an adjoining sheet to get the correct proj.
>> *This is what I am aiming at:*
>> I have about 40000 of these images, and I have written a BASH with awk
>> script  to go through all the images and pull out certain info to build
>> a CSV file so that I can create attributed polygons to have info about
>> the underlying raster image. When this awk script fails to find embedded
>> proj info, it would be nice to make it peek into the adjoining ortho,
>> extract the relevant info, and edit it into the 'bad' ortho.
> gdal_edit is really what you want. Will be much faster than
> gdal_translate+gdaladdo and will not alter pixel values.
>
>> Thanks again for your help.
>> Kind regards,
>> Zoltan


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Services

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323     www.geograph.co.za
===========================================


From piotrpachol at gmail.com  Mon Dec 15 05:46:06 2014
From: piotrpachol at gmail.com (=?UTF-8?B?UGlvdHIgUGFjaMOzxYI=?=)
Date: Mon, 15 Dec 2014 14:46:06 +0100
Subject: [gdal-dev] importing GML with geometry of many parts
Message-ID: <548EE61E.7070101@gmail.com>

Hello,

I have gml file with  geometries of different types (Points, Lines, 
Polygons)
I try to import it into PostGIS with this command:
ogr2ogr -a_srs EPSG:2180 -f "PostgreSQL" PG:"host=localhost 
user=postgres dbname=test password=*** port=5432" c:\test.xml -nlt 
PROMOTE_TO_MULTI

Almost everything works OK except  objects like that:

<gml:featureMember>
   <KR>
     <bt:kod>0010_803</bt:kod>
     <bt:geometria>
       <gml:LineString gml_id="ID_1" srsName="EPSG:2180" srsDimension="2">
             <gml:posList>479444.04 317832.37 479447.99 317823.28 
</gml:posList>
       </gml:LineString>
     </bt:geometria>
     <bt:geometria>
       <gml:LineString gml_id="ID_2" srsName="EPSG:2180" srsDimension="2">
             <gml:posList>479659.15 318668.28 479695.28 318671.1 
</gml:posList>
       </gml:LineString>
     </bt:geometria>
   </KR>
</gml:featureMember>

In above example object consists of 2 parts and only second part of 
geometry(gml_id="ID_2") is imported to PostGIS.
What should I do to import all the parts of the geometry of an object?

Regards,
Piotr


From even.rouault at spatialys.com  Mon Dec 15 05:57:37 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 15 Dec 2014 14:57:37 +0100
Subject: [gdal-dev] importing GML with geometry of many parts
In-Reply-To: <548EE61E.7070101@gmail.com>
References: <548EE61E.7070101@gmail.com>
Message-ID: <201412151457.37291.even.rouault@spatialys.com>

Le lundi 15 d?cembre 2014 14:46:06, Piotr Pach?? a ?crit :
> Hello,
> 
> I have gml file with  geometries of different types (Points, Lines,
> Polygons)
> I try to import it into PostGIS with this command:
> ogr2ogr -a_srs EPSG:2180 -f "PostgreSQL" PG:"host=localhost
> user=postgres dbname=test password=*** port=5432" c:\test.xml -nlt
> PROMOTE_TO_MULTI
> 
> Almost everything works OK except  objects like that:
> 
> <gml:featureMember>
>    <KR>
>      <bt:kod>0010_803</bt:kod>
>      <bt:geometria>
>        <gml:LineString gml_id="ID_1" srsName="EPSG:2180" srsDimension="2">
>              <gml:posList>479444.04 317832.37 479447.99 317823.28
> </gml:posList>
>        </gml:LineString>
>      </bt:geometria>
>      <bt:geometria>
>        <gml:LineString gml_id="ID_2" srsName="EPSG:2180" srsDimension="2">
>              <gml:posList>479659.15 318668.28 479695.28 318671.1
> </gml:posList>
>        </gml:LineString>
>      </bt:geometria>
>    </KR>
> </gml:featureMember>
> 

Piotr,

Hum, this is an annoying form of GML with several geometry fields AND with the 
same name... GDAL 1.11 should normally be able to support multiple geometry 
fields, but in that case, that will not work as they have the same name.

In fact, you might want to try instead an older trick, quite experimental and 
not officially documented. Try setting GML_FETCH_ALL_GEOMETRIES=YES as 
configuration option/environment variable

<!--
OGR 1.8.0 adds support to "merge" the multiple geometries found in a feature 
by
setting the configuration option <b>GML_FETCH_ALL_GEOMETRIES</b> to <b>YES</b>. 
The geometries
will be collected into a GeometryCollection (or Multipolygon if individual 
geometries
are polygons or multipolygons). This can be useful when reading some GML 
application profiles.
If a &lt;GeometryElementPath&gt; element is specified in the .gfs, the fetching 
will be limited
to paths that match the value of &lt;GeometryElementPath&gt;.<p>
-->

Even

> In above example object consists of 2 parts and only second part of
> geometry(gml_id="ID_2") is imported to PostGIS.
> What should I do to import all the parts of the geometry of an object?
> 
> Regards,
> Piotr
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Dec 15 09:49:41 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 15 Dec 2014 18:49:41 +0100
Subject: [gdal-dev] Unnecessary bigger JPEG-compressed TIFF
Message-ID: <201412151849.41073.even.rouault@spatialys.com>

Hi,

Just to notify that I've just fixed in libtiff HEAD a regression dating back 
from 2010 (libtiff 3.9.3 and 4.0.X) that caused JPEG quantization tables to be 
unnecessarily emitted in each strip/tile, even in the JPEGTABLESMODE_QUANT 
mode where they are supposed to be only emitted in the global 
TIFFTAG_JPEGTABLE tag.

Note however that this complicates the case where one updates an existing 
JPEG-compressed TIFF. One advantage of the previous behaviour is that it made 
that relatively safe. Now, one must properly set the JPEG quality to be the 
one used when generating TIFFTAG_JPEGTABLE. I've implemented in GDAL the logic 
to retrieve the quality fom the JPEGTABLE (quite ugly: by iterating from 1 to 
100 until the computed table and serialized tables match), and if no match 
(shouldn't happen if the file has been created with libtiff), I go in 
TIFFTAG_JPEGTABLESMODE = 0 mode where tables will be emitted for each 
tile/strip. Probably this should be done in libtiff itself, when one detects a 
switch between TIFF directories (or at the first write in a directory), and by 
using the libjpeg decompressor so as to retrive the tables directly, without 
needing the quality value, but this didn't really seem straightforward to do 
in libtiff the compressor and decompressor structures being exclusive. Hum...

So, hopefully the new situation is better in the nominal case where one just 
create a JPEG-compressed file without updating it, by going back to the libtiff 
3.8.X behaviour. And in the update scenarios, one must be careful of setting 
TIFFTAG_JPEGQUALITY to the right value.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Dec 15 12:17:36 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 15 Dec 2014 21:17:36 +0100
Subject: [gdal-dev] [Tiff] Unnecessary bigger JPEG-compressed TIFF
In-Reply-To: <CA+NZCsS0LYQRyJ=Hvf4HJGmEsK8kb8L1VgwrJrWW-17ck-B12A@mail.gmail.com>
References: <201412151849.41073.even.rouault@spatialys.com>
	<CA+NZCsS0LYQRyJ=Hvf4HJGmEsK8kb8L1VgwrJrWW-17ck-B12A@mail.gmail.com>
Message-ID: <201412152117.36105.even.rouault@spatialys.com>

Le lundi 15 d?cembre 2014 20:53:40, Joris Van Damme (AWare Systems) a ?crit :
> Even,
> 
> > Note however that this complicates the case where one updates an existing
> > JPEG-compressed TIFF.
> 
> I'm not sure I completely understand every detail of the complicated
> path in implementing these things in the LibTiff/LibJpeg combo. Here's
> just a few thoughts of mine, for you to evaluate whether or not they
> are even relevant.

Joris,

thanks for you thoughts.

> 
> 1) The JpegTables tag data can be present, even when JPEG tables are
> included in some or all of the JPEG compressed strips or tiles. If
> this is the case, the JPEG tables included in the JPEG compressed
> strip or tile, overrides the global JpegTables tag data for this
> particular strip or tile. Therefore, updating a single strip or tile
> should actually not be that hard. If the encoder is unwilling to go
> through the trouble of "adopting" the JpegTables tag data, it's
> perfectly free to locally override with whatever tables it sees fit,

Hum http://www.remotesensing.org/libtiff/TIFFTechNote2.html mentions "An image 
segment may not redefine any table defined in JPEGTables.", so my understanding 
is that a strip/tiff that would want to have custom tables should use different 
table numbers.

> for whatever strips or tiles it wishes to update, but still leave the
> tag as is to apply to any other strip or tile that may not override
> it.

Yes I agree the JPEG-in-TIFF specification allows this, but my understanding 
libtiff has never really supported this. It would require comparing the tables 
generated with the current quality setting with the ones in JpegTables tag, 
and if they do not match, install new tables and reference them in the libjpeg 
component definition.

> 
> 2) Any codepath that depends on notions like LibJpeg quality, better
> be optional. The quality concept in LibJpeg is an implementation
> detail, not a part of the JPEG specification. The same goes for the
> default tables that correspond to different quality settings. Other
> TIFF/JPEG combo codecs are very likely to come up with default tables,
> if any, that do not match any LibJpeg quality setting. If what you aim
> to do depends on correctly deriving LibJpeg quality settings, from
> files produced by other codecs, it will likely fail.

Yes I'm well aware that my current solution does not cover all cases. Doing 
the right thing with only libtiff + libjpeg itself was already tricky enough. 
My motivation was mainly to fix the size regression, and ensuring that 
reasonably simple update use cases would still work.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Dec 15 14:49:08 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 15 Dec 2014 23:49:08 +0100
Subject: [gdal-dev] [Tiff] Unnecessary bigger JPEG-compressed TIFF
In-Reply-To: <CA+NZCsS8Om-hNsSTH6h_n3GEATD3t+qcVgJDa0UcLw--4ewSAQ@mail.gmail.com>
References: <201412151849.41073.even.rouault@spatialys.com>
	<201412152117.36105.even.rouault@spatialys.com>
	<CA+NZCsS8Om-hNsSTH6h_n3GEATD3t+qcVgJDa0UcLw--4ewSAQ@mail.gmail.com>
Message-ID: <201412152349.08894.even.rouault@spatialys.com>

Le lundi 15 d?cembre 2014 23:09:17, Joris Van Damme (AWare Systems) a ?crit :
> Even,
> 
> > Hum http://www.remotesensing.org/libtiff/TIFFTechNote2.html mentions "An
> > image segment may not redefine any table defined in JPEGTables.", so my
> > understanding is that a strip/tiff that would want to have custom tables
> > should use different table numbers.
> 
> Yes, that is correct. My choice of words was unfortunate. From your
> next comments however, I can see you understood my bad choice of words
> hardly matters, using different tables number rather then overriding
> the same number, doesn't change anything.

Agreed

> 
> >> for whatever strips or tiles it wishes to update, but still leave the
> >> tag as is to apply to any other strip or tile that may not override
> >> it.
> > 
> > Yes I agree the JPEG-in-TIFF specification allows this, but my
> > understanding libtiff has never really supported this. It would require
> > comparing the tables generated with the current quality setting with the
> > ones in JpegTables tag, and if they do not match, install new tables and
> > reference them in the libjpeg component definition.
> 
> I'm not sure I understand correctly. Are you talking about what is
> required in the encoder changing a separate strip or tile this way, or
> the decoder handling the resulting file? Either case, I don't think I
> agree, but I may be missing something.

Was only about the encoder. I believe the decoder should work OK already.  
Obviously it did since for 4 years, it has produced files with redefined 
quantization tables in strip/tiles, and actually with the same table number as 
in the JpegTable tag...
I'm not sure however if it works in conformant files where the redefined tables 
would have different numbers (perhaps it does, just haven't a test example 
handy)

> 
> In the encoder, it should not be required to compare any tables at
> all, in order to use this updating scheme. The only reason why an
> encoder that proceeds this way, would even read the JpegTables data,
> would be so as to make sure it does indeed use different table
> numbers.
> 
> This is exactly the reason why I regard this "overriding with
> different table numbers" the most intuitive way to update single
> strips or tiles in a JPEG-in-TIFF file.
> 
> In the decoder; strictly speaking, what is required is to load the
> JpegTables data into the JPEG subcodec before decoding the first strip
> or tile data with the same said subcodec. At least, that's how it
> would work with LibJpeg, there's some level of implementation detail
> involved in the fact that fully decoding a tables-only stream is the
> standard way to "infuse" LibJpeg with those tables.
> 
> In a more robust implementation of the decoder, one may want to
> protect against a strip/tile redefining tables and mistakenly using
> the same table numbers. That would be reasonably simple, the way to do
> this would be to load the JpegTables data into the JPEG subcodec
> before decoding *any* strip or tile, instead of merely doing it before
> decoding *the first* strip or tile. That's how my codec does it. This
> more robust implementation is actually a requirement anyway for a
> decoder that wishes to support decoding different strips or tiles in
> different thread contexts, for better multicore usage, like mine.
> 
> If full decoding of a tables-only JPEG stream is the only way to
> infuse the JPEG subcodec with tables, I can see there may be a need to
> quantify the possible overhead involved in this before deciding upon
> this "more robust" implementation. In my own JPEG codec, I decided to
> make the tables a separate class for this exact reason, with the
> caller level being able to simply "transplant and reuse" decoded
> tables into other JPEG decoder objects. Maybe this feature got added
> to LibJpeg, I don't know anything about LibJpeg beyond version 6b.
> 
> So I'm unsure why any table comparison would be required with the
> scheme of strip/tile updating, anywhere.
> 
> Unless you're  specifically talking about space-saving in strip/tile
> updating, by comparing the planned "local overriding" tables with the
> default tables in the JpegTables tag, and not overriding at all if
> equal? I wasn't thinking along those lines in my implementation. With
> tables being implementation specific, possibly image-specific,
> possibly specific to other factors like LibJpeg quality inside the
> same single implementation, etc, I chose to regard matching tables as
> astronomically improbable. Besides, my reasoning is, if table size
> does contribute even remotely significantly to the file size, then
> RowsPerStrip or TileWidth+TileHeight is very badly chosen. 

Well, I think the intent of TIFFTAG_JPEGTABLESMODE = 3 (the default mode) is 
to avoid writing quantization&huffman tables in tiles/strips when it is not 
necessary. And more generally achieving the smallest binary size seems to be a 
reasonable objective.

> I can see
> how it may be justified to regard matching tables a legit and way more
> probable concept, though, in your part of the world. Working with
> LibTiff and LibJpeg you sort-off have the luxury you can assume 98% of
> the planet sharing your implementation so the words
> "implementation-specific" almost loose their meaning. If next you're
> able to work around the "libjpeg-implementation-specific
> quality-specific" issue as well... Still, there's the "image-specific"
> issue, at least for huffman tables, when huffman optimization is
> applied, isn't there? Or does LibTiff+LibJpeg not support huffman
> optimization in this context?

AFAICS, in JPEGTABLESMODE_HUFF mode, huffman optimization is disabled.

> 
> > libtiff + libjpeg... tricky
> 
> Absolutely. There's a humongous amount of detail to keep in your head
> wherever LibTiff and LibJpeg mix. I'm sorry if I added to it.

One of the issue that was encountered in the past and lead to the regression I 
fixed (tried to fix...) was when switching back and forth between directories 
that might have different current JPEG tables. Each time you do this, the JPEG 
state is reset, so you have to reload the tables in case the quality settings 
were different between the directories, and in the current state of tif_jpeg.c 
the easiest solution is to call jpeg_set_quality().

I'm not saying doing something better is impossible, it is just that I don't 
feel pursuing that right now ;-) Trivial changes in that code have a high 
chance of causing issues in some cases, so non-trivial changes, and especially 
since I don't think the test suite actually tests that a lot.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From schut at sarvision.nl  Tue Dec 16 02:06:14 2014
From: schut at sarvision.nl (Vincent Schut)
Date: Tue, 16 Dec 2014 11:06:14 +0100
Subject: [gdal-dev] gdal trunk compatibility
Message-ID: <54900416.5060407@sarvision.nl>

Folks,

I'd like to use gdal-trunk (e.g. 2.0) for all the new features and 
improvements, but I wonder about its compatibility with other software. 
Is gdal 2.0 supposed to work transparently with libraries/programs that 
used to link against gdal 1.11, e.g. qgis, postgis, etc.?


Reason I ask is I get a configure error with postgis trying to find gdal:

RASTER: Raster support requested
checking for gdal-config... /usr/local/bin/gdal-config
checking GDAL version... 2.0.0
checking for OGR enabled... yes
checking gdal.h usability... yes
checking gdal.h presence... yes
checking for gdal.h... yes
checking ogr_api.h usability... yes
checking ogr_api.h presence... yes
checking for ogr_api.h... yes
checking cpl_conv.h usability... yes
checking cpl_conv.h presence... yes
checking for cpl_conv.h... yes
checking for library containing GDALAllRegister... no
configure: error: could not find GDAL

the last line ("checking for library containing GDALAllRegister...") 
takes a long time and then fails...

Thanks,
Vincent.

From even.rouault at spatialys.com  Tue Dec 16 02:27:28 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 16 Dec 2014 11:27:28 +0100
Subject: [gdal-dev] gdal trunk compatibility
In-Reply-To: <54900416.5060407@sarvision.nl>
References: <54900416.5060407@sarvision.nl>
Message-ID: <201412161127.28122.even.rouault@spatialys.com>

Le mardi 16 d?cembre 2014 11:06:14, Vincent Schut a ?crit :
> Folks,
> 
> I'd like to use gdal-trunk (e.g. 2.0) for all the new features and
> improvements, but I wonder about its compatibility with other software.
> Is gdal 2.0 supposed to work transparently with libraries/programs that
> used to link against gdal 1.11, e.g. qgis, postgis, etc.?

Vincent,

They mostly work unmodified, although you could run into a few problems if 
opening a dataset with curve geometries in QGIS for example (but there be some 
work to use OGR curve geometries in QGIS soon)

> 
> 
> Reason I ask is I get a configure error with postgis trying to find gdal:
> 
> RASTER: Raster support requested
> checking for gdal-config... /usr/local/bin/gdal-config
> checking GDAL version... 2.0.0
> checking for OGR enabled... yes
> checking gdal.h usability... yes
> checking gdal.h presence... yes
> checking for gdal.h... yes
> checking ogr_api.h usability... yes
> checking ogr_api.h presence... yes
> checking for ogr_api.h... yes
> checking cpl_conv.h usability... yes
> checking cpl_conv.h presence... yes
> checking for cpl_conv.h... yes
> checking for library containing GDALAllRegister... no
> configure: error: could not find GDAL
> 
> the last line ("checking for library containing GDALAllRegister...")
> takes a long time and then fails...

I know PostGIS has a continuous testing system tracking GDAL trunk, so I'd say 
the issue is more on your side. GDALAllRegister is definitely a symbol that 
still exists in GDAL 2.0dev

http://debbie.postgis.net:8080/job/GDAL_PostGIS_Regress/2074/consoleFull

Even

> 
> Thanks,
> Vincent.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bishop.dev at gmail.com  Tue Dec 16 02:51:25 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Tue, 16 Dec 2014 13:51:25 +0300
Subject: [gdal-dev] gdal trunk compatibility
In-Reply-To: <201412161127.28122.even.rouault@spatialys.com>
References: <54900416.5060407@sarvision.nl>
	<201412161127.28122.even.rouault@spatialys.com>
Message-ID: <54900EAD.9070707@gmail.com>

Hi,

As for me - 2.0 works fine. Also QGIS build with 1.10.1 works on 2.0 
very stable. Sorry screenshot on Russian, but I highlight the GDAL 
versions line

Best regards,
     Dmitry

16.12.2014 13:27, Even Rouault ?????:
> Le mardi 16 d?cembre 2014 11:06:14, Vincent Schut a ?crit :
>> Folks,
>>
>> I'd like to use gdal-trunk (e.g. 2.0) for all the new features and
>> improvements, but I wonder about its compatibility with other software.
>> Is gdal 2.0 supposed to work transparently with libraries/programs that
>> used to link against gdal 1.11, e.g. qgis, postgis, etc.?
> Vincent,
>
> They mostly work unmodified, although you could run into a few problems if
> opening a dataset with curve geometries in QGIS for example (but there be some
> work to use OGR curve geometries in QGIS soon)
>
>>
>> Reason I ask is I get a configure error with postgis trying to find gdal:
>>
>> RASTER: Raster support requested
>> checking for gdal-config... /usr/local/bin/gdal-config
>> checking GDAL version... 2.0.0
>> checking for OGR enabled... yes
>> checking gdal.h usability... yes
>> checking gdal.h presence... yes
>> checking for gdal.h... yes
>> checking ogr_api.h usability... yes
>> checking ogr_api.h presence... yes
>> checking for ogr_api.h... yes
>> checking cpl_conv.h usability... yes
>> checking cpl_conv.h presence... yes
>> checking for cpl_conv.h... yes
>> checking for library containing GDALAllRegister... no
>> configure: error: could not find GDAL
>>
>> the last line ("checking for library containing GDALAllRegister...")
>> takes a long time and then fails...
> I know PostGIS has a continuous testing system tracking GDAL trunk, so I'd say
> the issue is more on your side. GDALAllRegister is definitely a symbol that
> still exists in GDAL 2.0dev
>
> http://debbie.postgis.net:8080/job/GDAL_PostGIS_Regress/2074/consoleFull
>
> Even
>
>> Thanks,
>> Vincent.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
A non-text attachment was scrubbed...
Name: qgis.jpg
Type: image/jpeg
Size: 30227 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141216/f08e16ff/attachment-0001.jpg>

From piotrpachol at gmail.com  Tue Dec 16 07:03:16 2014
From: piotrpachol at gmail.com (=?UTF-8?B?UGlvdHIgUGFjaMOzxYI=?=)
Date: Tue, 16 Dec 2014 16:03:16 +0100
Subject: [gdal-dev] importing GML with geometry of many parts
In-Reply-To: <201412151457.37291.even.rouault@spatialys.com>
References: <548EE61E.7070101@gmail.com>
	<201412151457.37291.even.rouault@spatialys.com>
Message-ID: <549049B4.5040700@gmail.com>

W dniu 2014-12-15 14:57, Even Rouault pisze:
> Le lundi 15 d?cembre 2014 14:46:06, Piotr Pach?? a ?crit :
>> Hello,
>>
>> I have gml file with  geometries of different types (Points, Lines,
>> Polygons)
>> I try to import it into PostGIS with this command:
>> ogr2ogr -a_srs EPSG:2180 -f "PostgreSQL" PG:"host=localhost
>> user=postgres dbname=test password=*** port=5432" c:\test.xml -nlt
>> PROMOTE_TO_MULTI
>>
>> Almost everything works OK except  objects like that:
>>
>> <gml:featureMember>
>>     <KR>
>>       <bt:kod>0010_803</bt:kod>
>>       <bt:geometria>
>>         <gml:LineString gml_id="ID_1" srsName="EPSG:2180" srsDimension="2">
>>               <gml:posList>479444.04 317832.37 479447.99 317823.28
>> </gml:posList>
>>         </gml:LineString>
>>       </bt:geometria>
>>       <bt:geometria>
>>         <gml:LineString gml_id="ID_2" srsName="EPSG:2180" srsDimension="2">
>>               <gml:posList>479659.15 318668.28 479695.28 318671.1
>> </gml:posList>
>>         </gml:LineString>
>>       </bt:geometria>
>>     </KR>
>> </gml:featureMember>
>>
> Piotr,
>
> Hum, this is an annoying form of GML with several geometry fields AND with the
> same name... GDAL 1.11 should normally be able to support multiple geometry
> fields, but in that case, that will not work as they have the same name.
>
> In fact, you might want to try instead an older trick, quite experimental and
> not officially documented. Try setting GML_FETCH_ALL_GEOMETRIES=YES as
> configuration option/environment variable
>
> <!--
> OGR 1.8.0 adds support to "merge" the multiple geometries found in a feature
> by
> setting the configuration option <b>GML_FETCH_ALL_GEOMETRIES</b> to <b>YES</b>.
> The geometries
> will be collected into a GeometryCollection (or Multipolygon if individual
> geometries
> are polygons or multipolygons). This can be useful when reading some GML
> application profiles.
> If a &lt;GeometryElementPath&gt; element is specified in the .gfs, the fetching
> will be limited
> to paths that match the value of &lt;GeometryElementPath&gt;.<p>
> -->
>
> Even
Even,
Thank you very much.
With setting GML_FETCH_ALL_GEOMETRIES=YES all parts of geometry
are imported correctly creating in PostGIS "GeometryCollection" type.

Regards,
Piotr
>> In above example object consists of 2 parts and only second part of
>> geometry(gml_id="ID_2") is imported to PostGIS.
>> What should I do to import all the parts of the geometry of an object?
>>
>> Regards,
>> Piotr
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From stefan.ziegler.de at gmail.com  Wed Dec 17 02:00:37 2014
From: stefan.ziegler.de at gmail.com (Stefan Ziegler)
Date: Wed, 17 Dec 2014 11:00:37 +0100
Subject: [gdal-dev] GDAL GeoPackage raster support
In-Reply-To: <5489BAF6.6060809@faunalia.it>
References: <201412102352.33108.even.rouault@spatialys.com>
	<5489B8DD.6020203@faunalia.it>
	<201412111637.28153.even.rouault@spatialys.com>
	<5489BAF6.6060809@faunalia.it>
Message-ID: <CAJvo+1-rdYZiACU9ZaaZHx3TOKvLoxPo=B-VaxfPhENGwP6KBw@mail.gmail.com>

Hi

I'm playing with the new Geopackage raster support which is really nice.
Thanks for that. Some feedback so far:

* Loading in QGIS is instant when overviews are added with gdaladdo [1] but
really slow when there are no  overviews [2].
* Adding overviews to some areal images is really slow: gdaladdo only eats
< 10 % of the cpu. Is this some slow storage medium issue (harddisk)?

[1]: http://catais.org/tmp/hoehen.gpkg
[2]: http://catais.org/tmp/hoehen_ohne.gpkg

best regards
Stefan




On Thu, Dec 11, 2014 at 4:40 PM, Paolo Cavallini <cavallini at faunalia.it>
wrote:
>
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Hi Even,
>
> Il 11/12/2014 16:37, Even Rouault ha scritto:
>
> > I'm confused by your comment :
>
> sorry I was unclear:
>
> > - are you trying to load a raster geopackage through "load
> > vector"... ? That will not do it. You should open it with "load
> > raster". That works with my antique QGIS 1.8 linked against GDAL
> > trunk ;-) - are you using GDAL trunk ? This is necessary for raster
> > support. Vector support should mostly work with GDAL 1.11
>
> I'm saying that QGIS cannot load .gpkg, therefore I cannot do more
> tests. When fixed, I'm available for testing.
>
> All the best.
>
> - --
> Paolo Cavallini - www.faunalia.eu
> QGIS & PostGIS courses: http://www.faunalia.eu/training.html
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1
>
> iEYEARECAAYFAlSJuvYACgkQ/NedwLUzIr5YrACgsVW3i48tsZqJTeFfA8iWPjhj
> OXYAnRZWgxCAUZWm9qmstCyjbUOw7XMa
> =qq+j
> -----END PGP SIGNATURE-----
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141217/092e8e12/attachment.html>

From even.rouault at spatialys.com  Wed Dec 17 02:18:57 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 17 Dec 2014 11:18:57 +0100
Subject: [gdal-dev] GDAL GeoPackage raster support
In-Reply-To: <CAJvo+1-rdYZiACU9ZaaZHx3TOKvLoxPo=B-VaxfPhENGwP6KBw@mail.gmail.com>
References: <201412102352.33108.even.rouault@spatialys.com>
	<5489BAF6.6060809@faunalia.it>
	<CAJvo+1-rdYZiACU9ZaaZHx3TOKvLoxPo=B-VaxfPhENGwP6KBw@mail.gmail.com>
Message-ID: <201412171118.57604.even.rouault@spatialys.com>

Stefan,

> 
> I'm playing with the new Geopackage raster support which is really nice.
> Thanks for that. Some feedback so far:
> 
> * Loading in QGIS is instant when overviews are added with gdaladdo [1] but
> really slow when there are no  overviews [2].

As will other formats with a dataset of the same size I guess ?

> * Adding overviews to some areal images is really slow: gdaladdo only eats
> < 10 % of the cpu. Is this some slow storage medium issue (harddisk)?

In the update scenario like gdaladdo, an optimization that is used when 
creating the file from scratch (gdal_translate) isn't applied. You can try 
adding "--config OGR_SQLITE_SYNCHRONOUS OFF" on the gdaladdo command line. I 
suspect this must be the issue. I was a bit hesitant to apply it by default in 
update cases since it means that a interruption of the process (ctrl-c) could 
damage the database. But this is generally the case for other formats, so we 
probably could apply it too.

Even

> 
> [1]: http://catais.org/tmp/hoehen.gpkg
> [2]: http://catais.org/tmp/hoehen_ohne.gpkg
> 
> best regards
> Stefan
> 
> 
> 
> 
> On Thu, Dec 11, 2014 at 4:40 PM, Paolo Cavallini <cavallini at faunalia.it>
> 
> wrote:
> > -----BEGIN PGP SIGNED MESSAGE-----
> > Hash: SHA1
> > 
> > Hi Even,
> > 
> > Il 11/12/2014 16:37, Even Rouault ha scritto:
> > > I'm confused by your comment :
> > sorry I was unclear:
> > > - are you trying to load a raster geopackage through "load
> > > vector"... ? That will not do it. You should open it with "load
> > > raster". That works with my antique QGIS 1.8 linked against GDAL
> > > trunk ;-) - are you using GDAL trunk ? This is necessary for raster
> > > support. Vector support should mostly work with GDAL 1.11
> > 
> > I'm saying that QGIS cannot load .gpkg, therefore I cannot do more
> > tests. When fixed, I'm available for testing.
> > 
> > All the best.
> > 
> > - --
> > Paolo Cavallini - www.faunalia.eu
> > QGIS & PostGIS courses: http://www.faunalia.eu/training.html
> > -----BEGIN PGP SIGNATURE-----
> > Version: GnuPG v1
> > 
> > iEYEARECAAYFAlSJuvYACgkQ/NedwLUzIr5YrACgsVW3i48tsZqJTeFfA8iWPjhj
> > OXYAnRZWgxCAUZWm9qmstCyjbUOw7XMa
> > =qq+j
> > -----END PGP SIGNATURE-----
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From pepijn at vaneeckhoudt.net  Wed Dec 17 04:03:13 2014
From: pepijn at vaneeckhoudt.net (Pepijn Van Eeckhoudt)
Date: Wed, 17 Dec 2014 13:03:13 +0100
Subject: [gdal-dev] GDAL GeoPackage raster support
In-Reply-To: <201412171118.57604.even.rouault@spatialys.com>
References: <201412102352.33108.even.rouault@spatialys.com>	<5489BAF6.6060809@faunalia.it>	<CAJvo+1-rdYZiACU9ZaaZHx3TOKvLoxPo=B-VaxfPhENGwP6KBw@mail.gmail.com>
	<201412171118.57604.even.rouault@spatialys.com>
Message-ID: <54917101.3080208@vaneeckhoudt.net>

On 17/12/14 11:18, Even Rouault wrote:
> In the update scenario like gdaladdo, an optimization that is used when
> creating the file from scratch (gdal_translate) isn't applied. You can try
> adding "--config OGR_SQLITE_SYNCHRONOUS OFF" on the gdaladdo command line. I
> suspect this must be the issue. I was a bit hesitant to apply it by default in
> update cases since it means that a interruption of the process (ctrl-c) could
> damage the database. But this is generally the case for other formats, so we
> probably could apply it too.
Not sure if this is feasible in GDAL, but what I did in my own code is 
to use transactions to speed things up. All the tile inserts are batched 
in transactions of 100 tiles or so.
I had a look at the driver code, but it wasn't immediately clear to me 
if this is already happening or not. Doesn't look like it though.

Pepijn

From even.rouault at spatialys.com  Wed Dec 17 04:18:16 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 17 Dec 2014 13:18:16 +0100
Subject: [gdal-dev] GDAL GeoPackage raster support
In-Reply-To: <54917101.3080208@vaneeckhoudt.net>
References: <201412102352.33108.even.rouault@spatialys.com>
	<201412171118.57604.even.rouault@spatialys.com>
	<54917101.3080208@vaneeckhoudt.net>
Message-ID: <201412171318.16073.even.rouault@spatialys.com>

Le mercredi 17 d?cembre 2014 13:03:13, Pepijn Van Eeckhoudt a ?crit :
> On 17/12/14 11:18, Even Rouault wrote:
> > In the update scenario like gdaladdo, an optimization that is used when
> > creating the file from scratch (gdal_translate) isn't applied. You can
> > try adding "--config OGR_SQLITE_SYNCHRONOUS OFF" on the gdaladdo command
> > line. I suspect this must be the issue. I was a bit hesitant to apply it
> > by default in update cases since it means that a interruption of the
> > process (ctrl-c) could damage the database. But this is generally the
> > case for other formats, so we probably could apply it too.
> 
> Not sure if this is feasible in GDAL, but what I did in my own code is
> to use transactions to speed things up. All the tile inserts are batched
> in transactions of 100 tiles or so.
> I had a look at the driver code, but it wasn't immediately clear to me
> if this is already happening or not. Doesn't look like it though.

No, it doesn't for now. Could indeed be a potential optimization.

> 
> Pepijn
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From simlangen at gmail.com  Wed Dec 17 04:42:10 2014
From: simlangen at gmail.com (Simen Langseth)
Date: Wed, 17 Dec 2014 21:42:10 +0900
Subject: [gdal-dev] ECW support for GDAL binding
Message-ID: <CAHOqc_qfpTuSJhdLQFa-=hXvkn9vAOVvh6GaKpUXajKNnZ20AA@mail.gmail.com>

Dear GDAL developers:

I have been using the following GDAL binding:

http://www.lfd.uci.edu/~gohlke/pythonlibs/#gdal

Lately I required to use ECW driver.

But the current binding is not supported for that.

What should I do to use ECW driver with this binding?

Thanks.

Simen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141217/b2c94034/attachment.html>

From jrepetto at free.fr  Wed Dec 17 05:02:13 2014
From: jrepetto at free.fr (jrepetto at free.fr)
Date: Wed, 17 Dec 2014 14:02:13 +0100
Subject: [gdal-dev] ECW support for GDAL binding
In-Reply-To: <CAHOqc_qfpTuSJhdLQFa-=hXvkn9vAOVvh6GaKpUXajKNnZ20AA@mail.gmail.com>
References: <CAHOqc_qfpTuSJhdLQFa-=hXvkn9vAOVvh6GaKpUXajKNnZ20AA@mail.gmail.com>
Message-ID: <1418821333.54917ed581c40@imp.free.fr>

Selon Simen Langseth <simlangen at gmail.com>:

> Dear GDAL developers:
> I have been using the following GDAL binding:
> http://www.lfd.uci.edu/~gohlke/pythonlibs/#gdal
> Lately I required to use ECW driver.
> But the current binding is not supported for that.
> What should I do to use ECW driver with this binding?
> Thanks.
> Simen

Hi,
Do you need read-only or read-write support for the ECW format ?
Jean-Claude


From simlangen at gmail.com  Wed Dec 17 05:15:57 2014
From: simlangen at gmail.com (Simen Langseth)
Date: Wed, 17 Dec 2014 22:15:57 +0900
Subject: [gdal-dev] ECW support for GDAL binding
In-Reply-To: <1418821333.54917ed581c40@imp.free.fr>
References: <CAHOqc_qfpTuSJhdLQFa-=hXvkn9vAOVvh6GaKpUXajKNnZ20AA@mail.gmail.com>
	<1418821333.54917ed581c40@imp.free.fr>
Message-ID: <CAHOqc_qbqsM79JwrBqPO=ximigVZFZYRUpG3qGLuG3CucobjVQ@mail.gmail.com>

Dear Jean-Claude:

I am looking for both read and write support.

On Wed, Dec 17, 2014 at 10:02 PM, <jrepetto at free.fr> wrote:
>
> Selon Simen Langseth <simlangen at gmail.com>:
>
> > Dear GDAL developers:
> > I have been using the following GDAL binding:
> > http://www.lfd.uci.edu/~gohlke/pythonlibs/#gdal
> > Lately I required to use ECW driver.
> > But the current binding is not supported for that.
> > What should I do to use ECW driver with this binding?
> > Thanks.
> > Simen
>
> Hi,
> Do you need read-only or read-write support for the ECW format ?
> Jean-Claude
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141217/675e7d70/attachment.html>

From simlangen at gmail.com  Wed Dec 17 05:42:43 2014
From: simlangen at gmail.com (Simen Langseth)
Date: Wed, 17 Dec 2014 22:42:43 +0900
Subject: [gdal-dev] Maximum compression parameters
Message-ID: <CAHOqc_qyoj5rnC6vJsf8uY_Sqh_uG0vvmR1KwdxR68u4=BCuPw@mail.gmail.com>

Dear GDAL developers:

I want to compress 32bit Geotiff file with maximum compression method
available with out lossing data. What are the best parameters?

['COMPRESS=LZW', 'PREDICTOR=3']
Please suggest me.

Simen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141217/59f9baea/attachment.html>

From jukka.rahkonen at mmmtike.fi  Wed Dec 17 07:42:18 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 17 Dec 2014 15:42:18 +0000 (UTC)
Subject: [gdal-dev] Maximum compression parameters
References: <CAHOqc_qyoj5rnC6vJsf8uY_Sqh_uG0vvmR1KwdxR68u4=BCuPw@mail.gmail.com>
Message-ID: <loom.20141217T163246-935@post.gmane.org>

Simen Langseth <simlangen <at> gmail.com> writes:

> 
> Dear GDAL developers:I want to compress 32bit Geotiff file with maximum
compression method available with out lossing data. What are the best
parameters?['COMPRESS=LZW', 'PREDICTOR=3']Please suggest me.Simen

Hi Simen,

It depends so much on the data you have that you can get the best, fastest
and most reliable answer by doing a series of tests with different
parameters. And do not believe that you could find any useful information
from the internet. Of course you can make a survey once your own results are
ready.

Please report your results here and remember to add some info about your
data as well as all the parameters you used.

Lossless JPEG2000 might give good results also.

-Jukka Rahkonen-


From even.rouault at spatialys.com  Wed Dec 17 08:17:27 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 17 Dec 2014 17:17:27 +0100
Subject: [gdal-dev] GDAL GeoPackage raster support
In-Reply-To: <201412171318.16073.even.rouault@spatialys.com>
References: <201412102352.33108.even.rouault@spatialys.com>
	<54917101.3080208@vaneeckhoudt.net>
	<201412171318.16073.even.rouault@spatialys.com>
Message-ID: <201412171717.27983.even.rouault@spatialys.com>

Le mercredi 17 d?cembre 2014 13:18:16, Even Rouault a ?crit :
> Le mercredi 17 d?cembre 2014 13:03:13, Pepijn Van Eeckhoudt a ?crit :
> > On 17/12/14 11:18, Even Rouault wrote:
> > > In the update scenario like gdaladdo, an optimization that is used when
> > > creating the file from scratch (gdal_translate) isn't applied. You can
> > > try adding "--config OGR_SQLITE_SYNCHRONOUS OFF" on the gdaladdo
> > > command line. I suspect this must be the issue. I was a bit hesitant
> > > to apply it by default in update cases since it means that a
> > > interruption of the process (ctrl-c) could damage the database. But
> > > this is generally the case for other formats, so we probably could
> > > apply it too.
> > 
> > Not sure if this is feasible in GDAL, but what I did in my own code is
> > to use transactions to speed things up. All the tile inserts are batched
> > in transactions of 100 tiles or so.
> > I had a look at the driver code, but it wasn't immediately clear to me
> > if this is already happening or not. Doesn't look like it though.
> 
> No, it doesn't for now. Could indeed be a potential optimization.

Implemented now. Greatly improves performance of overview creation indeed.

> 
> > Pepijn
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Steve.Toutant at inspq.qc.ca  Wed Dec 17 08:37:15 2014
From: Steve.Toutant at inspq.qc.ca (Steve.Toutant at inspq.qc.ca)
Date: Wed, 17 Dec 2014 11:37:15 -0500
Subject: [gdal-dev] OGR read WFS collection
Message-ID: <OFEAC058C9.7B8F028A-ON85257DB1.005AC60E-85257DB1.005B4CE7@isn.rtss.qc.ca>

Hello
I successfully used this code to create a datasource from a URL
step 1- wfs_drv = ogr.GetDriverByName('WFS')
step 2- wfs_ds = wfs_drv.Open('WFS:' + url)
step 3- Then I parsed the result

I need to create another script but in input I get the result of a WFS 
query. So I need to parse this result (Wfs: FeatureCollection)

I tried to create a DataSource from the WFS:FeatureCollection without 
success.
I see that ogr.Open needs a filename, not a string.

How do I create that kind of DataSource?
thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141217/d5ad1e08/attachment.html>

From Andreas.Schmid at bd.so.ch  Wed Dec 17 08:29:00 2014
From: Andreas.Schmid at bd.so.ch (Schmid Andreas)
Date: Wed, 17 Dec 2014 16:29:00 +0000
Subject: [gdal-dev] Request for reintroduction of an override line into
	gcs.override.csv
Message-ID: <50FFCD4FD2A0A948A16AFC67888052C637F30171@srsofaioi16256.verw.rootso.org>

Hi

I hope this is the right mailing list to ask the following:

I've realized that in GDAL 1.9.2 the "towgs84" parameters of the Swiss "CH1903" GCS (EPSG:4149) appear incorrectly. According to [1], they should be
674.374,15.056,405.346,,,,
instead of
674.4,15.1,405.3,,,,
It seems that the origin of these rounded values is the EPSG database. In order to override them, I had to add the following line to the gcs.override.csv file:
4149,CH1903,6149,CH1903,6149,9122,7004,8901,1,0,6422,1766,1,9603,674.374,15.056,405.346,,,,

The same (almost same) line used to be included in the gcs.override.csv file until GDAL 1.7.3: [2]
Would it be possible to re-include this override line into the gcs.override.csv?

Thank you,
Andy


[1]: Formulas and constants for the calculation of the Swiss conformal cylindrical projection and for the transformation between coordinate systems, chapter 1.4: http://www.swisstopo.admin.ch/internet/swisstopo/en/home/topics/survey/sys/refsys.parsysrelated1.2487.downloadList.82881.DownloadFile.tmp/swissprojectionen.pdf
[2]: https://github.com/OSGeo/gdal/blob/733829bf6f88530a92c25457a0f4d0ef0eb5f03a/gdal/data/gcs.override.csv#L29-L31


Andreas Schmid
GIS-Informatiker


Amt f?r Geoinformation
SO!GIS-Koordination
R?tistrasse 4
4501 Solothurn

Telefon +41 32 627 75 93
Telefax +41 32 627 75 98
andreas.schmid at bd.so.ch
http://www.so.ch



From mani.iiit123 at gmail.com  Wed Dec 17 10:33:42 2014
From: mani.iiit123 at gmail.com (Manikanta Kondeti)
Date: Thu, 18 Dec 2014 00:03:42 +0530
Subject: [gdal-dev] Reg: Error while running Kartograph which uses gdal
Message-ID: <CAMxCCEaiXZVkUuuD3kQHk1y8U58yDBE+G6_A4TpDw+Rk+f9DXQ@mail.gmail.com>

Hi all,

I'm trying to install kartograph, it's a library which converts shapefiles
to svg.  Everything is installed without errors. While running kartograph
I'm getting this following error - [1] which is related to gdal.


[1] -- * ImportError: /usr/lib/python2.7/dist-packages/osgeo/_gdal.so:
symbol GOA2GetRefreshToken, version GDAL_1.8 not defined in file
libgdal.so.1 with link time reference*

I will be happy if anyone can guide me or explain me the reason

Thanks,
Manikanta
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141218/612b9951/attachment.html>

From pierre.mauduit at camptocamp.com  Thu Dec 18 07:55:00 2014
From: pierre.mauduit at camptocamp.com (Pierre Mauduit)
Date: Thu, 18 Dec 2014 16:55:00 +0100
Subject: [gdal-dev] Reg: Error while running Kartograph which uses gdal
In-Reply-To: <CAMxCCEaiXZVkUuuD3kQHk1y8U58yDBE+G6_A4TpDw+Rk+f9DXQ@mail.gmail.com>
References: <CAMxCCEaiXZVkUuuD3kQHk1y8U58yDBE+G6_A4TpDw+Rk+f9DXQ@mail.gmail.com>
Message-ID: <CAHTJp2Ta7NzGHMz1pGQHg9FBhVNTbXm=gSMq-99v-f+NQapL_g@mail.gmail.com>

Hi,

>
> I'm trying to install kartograph, it's a library which converts shapefiles
> to svg.  Everything is installed without errors. While running kartograph
> I'm getting this following error - [1] which is related to gdal.
>
>
> [1] -- * ImportError: /usr/lib/python2.7/dist-packages/osgeo/_gdal.so:
> symbol GOA2GetRefreshToken, version GDAL_1.8 not defined in file
> libgdal.so.1 with link time reference*
>
>

Where does this _gdal.so come from ? What does the following command give ?
:

ldd /usr/lib/python2.7/dist-packages/osgeo/_gdal.so


It seems that whatever generated this _gdal.so, it has been linked against
a specific version of libgdal.so (1.8 probably), which does not seem to
correspond with the one currently installed in your environment.

Hope that helps,

-- Pierre
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141218/2886bad1/attachment.html>

From jorge at cartodb.com  Thu Dec 18 14:23:36 2014
From: jorge at cartodb.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Thu, 18 Dec 2014 23:23:36 +0100
Subject: [gdal-dev] Can't make GME driver work
Message-ID: <549353E8.50305@cartodb.com>

Hello,

I'm having problems making the GDAL GME driver work 
(http://trac.osgeo.org/gdal/wiki/GMEDriver). I've defined CLIENT_API and 
CLIENT_SECRET in Google API console, and I successfully used them with 
the QGIS GME plugin 
(https://plugins.qgis.org/plugins/GoogleMapsEngineConnector/) and with 
the example Python script of the doc page: 
https://developers.google.com/maps-engine/documentation/oauth/installedapplication. 
But, for some reason, I keep getting HTTP 401 error when trying to read 
from my GME account using the GDAL driver.

I've used gdal_auth.py to get the access token and the refresh token. 
Passed the config options, as stated in the driver's page. Always 
getting HTTP 401.

Do you have any working example using GDAL GME driver? More info about 
my problem here: 
http://gis.stackexchange.com/questions/127065/i-cant-configure-authentication-with-google-maps-engine-driver-from-gdal

Many thanks in advance!

-- 
Jorge

Sent using Postbox:
http://www.getpostbox.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141218/2be86fb6/attachment.html>

From cavallini at faunalia.it  Fri Dec 19 07:27:44 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Fri, 19 Dec 2014 16:27:44 +0100
Subject: [gdal-dev] Garmin .img data?
Message-ID: <549443F0.6020600@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi all.
AFAIK the format is not supported in GDAL, whereas it is so by smaller
GPL projects:
https://bitbucket.org/maproom/qmapshack/wiki/Home
Any special reason we do not have that support?
All the best.
- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlSUQ/AACgkQ/NedwLUzIr7ongCfe6Ms9yiXw+Om8KaIXTgz/lee
7qoAni1VZuf09NhxcILRU9rFjDbJv7NH
=d0JD
-----END PGP SIGNATURE-----

From even.rouault at spatialys.com  Fri Dec 19 08:01:48 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 19 Dec 2014 17:01:48 +0100
Subject: [gdal-dev] Garmin .img data?
In-Reply-To: <549443F0.6020600@faunalia.it>
References: <549443F0.6020600@faunalia.it>
Message-ID: <201412191701.48790.even.rouault@spatialys.com>

Hi Paolo,

> Hi all.
> AFAIK the format is not supported in GDAL, whereas it is so by smaller
> GPL projects:
> https://bitbucket.org/maproom/qmapshack/wiki/Home
> Any special reason we do not have that support?

Probably perhaps nobody has written it. The link you gave doesn't link much 
information about the format.
Is it the vector format described at http://sourceforge.net/projects/garmin-
img/?source=typ_redirect ?
If so, a quick skimming of it would lend me thinking that read support should 
be possible, although likely not a trivial effort (41 pages for an unformal 
specification is quite significant). Write support and interoperability with 
Garmin devices would probably be harder as I can see quite a few ??? in the 
document.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From cavallini at faunalia.it  Fri Dec 19 08:39:40 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Fri, 19 Dec 2014 17:39:40 +0100
Subject: [gdal-dev] Garmin .img data?
In-Reply-To: <201412191701.48790.even.rouault@spatialys.com>
References: <549443F0.6020600@faunalia.it>
	<201412191701.48790.even.rouault@spatialys.com>
Message-ID: <549454CC.6060002@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi Even,

Il 19/12/2014 17:01, Even Rouault ha scritto:
> Probably perhaps nobody has written it. The link you gave doesn't
> link much information about the format. Is it the vector format
> described at http://sourceforge.net/projects/garmin- 
> img/?source=typ_redirect ? If so, a quick skimming of it would lend
> me thinking that read support should be possible, although likely
> not a trivial effort (41 pages for an unformal specification is
> quite significant). Write support and interoperability with Garmin
> devices would probably be harder as I can see quite a few ??? in
> the document.

thanks for your reply. I imagined this, but I was surprised by the
fact that apparently small projects were able to read the format
without much difficulty.
Going to ask qmapshack dev.
All the best.
- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlSUVMsACgkQ/NedwLUzIr5giQCfYPrUmAapyobGIMzMQg/oN7Su
3GsAoJrfbXiCJGezXuzy7jeTAPyQlDzV
=qovP
-----END PGP SIGNATURE-----

From wolf+grass at bergenheim.net  Fri Dec 19 09:33:35 2014
From: wolf+grass at bergenheim.net (Wolf Bergenheim)
Date: Fri, 19 Dec 2014 18:33:35 +0100
Subject: [gdal-dev] Can't make GME driver work
In-Reply-To: <549353E8.50305@cartodb.com>
References: <549353E8.50305@cartodb.com>
Message-ID: <CAJhTkW4Lut7aBv6bu=hSi83JDinFC+F0jkUBjCSm7p8uS3EoUg@mail.gmail.com>

Hi Jorge.

I noticed some issues with it earlier this week. I'll see if I have some
spare time over the weekend to see what I can do about it. Are you using
the trunk version or an earlier release?

On 18 December 2014 at 23:23, Jorge Ar?valo <jorge at cartodb.com> wrote:

>  Hello,
>
> I'm having problems making the GDAL GME driver work (
> http://trac.osgeo.org/gdal/wiki/GMEDriver). I've defined CLIENT_API and
> CLIENT_SECRET in Google API console, and I successfully used them with the
> QGIS GME plugin (
> https://plugins.qgis.org/plugins/GoogleMapsEngineConnector/) and with the
> example Python script of the doc page:
> https://developers.google.com/maps-engine/documentation/oauth/installedapplication.
> But, for some reason, I keep getting HTTP 401 error when trying to read
> from my GME account using the GDAL driver.
>
> I've used gdal_auth.py to get the access token and the refresh token.
> Passed the config options, as stated in the driver's page. Always getting
> HTTP 401.
>
> Do you have any working example using GDAL GME driver? More info about my
> problem here:
> http://gis.stackexchange.com/questions/127065/i-cant-configure-authentication-with-google-maps-engine-driver-from-gdal
>
> Many thanks in advance!
>
> --
> Jorge
>
> Sent using Postbox:
> http://www.getpostbox.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141219/93196b71/attachment.html>

From andre+joost at nurfuerspam.de  Fri Dec 19 09:40:13 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Fri, 19 Dec 2014 18:40:13 +0100
Subject: [gdal-dev] Garmin .img data?
In-Reply-To: <549454CC.6060002@faunalia.it>
References: <549443F0.6020600@faunalia.it>	<201412191701.48790.even.rouault@spatialys.com>
	<549454CC.6060002@faunalia.it>
Message-ID: <m71nvo$3mh$1@ger.gmane.org>

Am 19.12.2014 um 17:39 schrieb Paolo Cavallini:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Hi Even,
>
> Il 19/12/2014 17:01, Even Rouault ha scritto:
>> Probably perhaps nobody has written it. The link you gave doesn't
>> link much information about the format. Is it the vector format
>> described at http://sourceforge.net/projects/garmin-
>> img/?source=typ_redirect ? If so, a quick skimming of it would lend
>> me thinking that read support should be possible, although likely
>> not a trivial effort (41 pages for an unformal specification is
>> quite significant). Write support and interoperability with Garmin
>> devices would probably be harder as I can see quite a few ??? in
>> the document.
>
> thanks for your reply. I imagined this, but I was surprised by the
> fact that apparently small projects were able to read the format
> without much difficulty.
> Going to ask qmapshack dev.

Just for the record:

The Garmin img format has been inofficially reverse engineered, and used 
to create own maps. This page gives an overview of the software that is 
used to make Garmin maps from OSM data:

http://wiki.openstreetmap.org/wiki/OSM_Map_On_Garmin#Software

Greetings,
Andr? Joost



From laebe at geomapping.de  Fri Dec 19 12:26:21 2014
From: laebe at geomapping.de (Holger)
Date: Fri, 19 Dec 2014 12:26:21 -0800 (PST)
Subject: [gdal-dev] OGR VRT with DMS possible ?
Message-ID: <1419020781475-5178611.post@n6.nabble.com>

Hi,

I want to setup a VRT source like this
<OGRVRTDataSource>
<OGRVRTLayer name="Marks">
    <SrcDataSource relativeToVRT="1">Marks.xlsx</SrcDataSource>    
    <GeometryType>wkbPoint</GeometryType>    
    <GeometryField encoding="PointFromColumns" reportSrcColumn="FALSE"
x="Field8" y="Field7"/>   
	<LayerSRS>EPSG:4326</LayerSRS>
</OGRVRTLayer>
</OGRVRTDataSource>

The problem is that the coordinates are specified like 
    
24d23'23.6" 44d12'23.78

It looks like OGR doesn't interpret this well, because 

ogrinfo -al marks.vrt

shows 

POINT(240000000000000000000001111, 44.0)

as geometry. I couldn't find a hint whether or how this works.

TIA,
 Holger




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/OGR-VRT-with-DMS-possible-tp5178611.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jorge at cartodb.com  Sat Dec 20 03:25:39 2014
From: jorge at cartodb.com (=?UTF-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Sat, 20 Dec 2014 12:25:39 +0100
Subject: [gdal-dev] Can't make GME driver work
In-Reply-To: <CAJhTkW4Lut7aBv6bu=hSi83JDinFC+F0jkUBjCSm7p8uS3EoUg@mail.gmail.com>
References: <549353E8.50305@cartodb.com>
	<CAJhTkW4Lut7aBv6bu=hSi83JDinFC+F0jkUBjCSm7p8uS3EoUg@mail.gmail.com>
Message-ID: <CAPRx4nR5TacN4+r4nZEyZJS4UFQqKrst_uxAkgBCZ_rptNueQQ@mail.gmail.com>

Hi Wolf

I already fixed it. I had to follow these steps:

- Define GOA2_CLIENT_ID, GOA2_CLIENT_SECRET, GME_APIKEY

- Define GME_REFRESH_TOKEN, which allow the app to refresh the token

No problem, so far. Just followed this
http://trac.osgeo.org/gdal/wiki/GMEDriver

- Define GME_AUTH (or provide 'auth' in the query string). This is not
specified in the wiki page, but can be found here:
https://github.com/OSGeo/gdal/blob/trunk/gdal/ogr/ogrsf_frmts/gme/ogrgmedatasource.cpp#L140

The steps to get those environment vars are:

- GOA2_CLIENT_ID, GOA2_CLIENT_SECRET, GME_APIKEY --> from Google API console

- GME_AUTH, GME_REFRESH_TOKEN --> execute gdal_auth.py. Also stated in the
wiki page. Just use the interactive option.

gdal_auth.py -s gme

So, the wiki page is basically correct. But just need to add the part about
GME_AUTH :-)

Best regards,

Jorge







El 19/12/2014 18:33, "Wolf Bergenheim" <wolf+grass at bergenheim.net> escribi?:

> Hi Jorge.
>
> I noticed some issues with it earlier this week. I'll see if I have some
> spare time over the weekend to see what I can do about it. Are you using
> the trunk version or an earlier release?
>
> On 18 December 2014 at 23:23, Jorge Ar?valo <jorge at cartodb.com> wrote:
>
>>  Hello,
>>
>> I'm having problems making the GDAL GME driver work (
>> http://trac.osgeo.org/gdal/wiki/GMEDriver). I've defined CLIENT_API and
>> CLIENT_SECRET in Google API console, and I successfully used them with the
>> QGIS GME plugin (
>> https://plugins.qgis.org/plugins/GoogleMapsEngineConnector/) and with
>> the example Python script of the doc page:
>> https://developers.google.com/maps-engine/documentation/oauth/installedapplication.
>> But, for some reason, I keep getting HTTP 401 error when trying to read
>> from my GME account using the GDAL driver.
>>
>> I've used gdal_auth.py to get the access token and the refresh token.
>> Passed the config options, as stated in the driver's page. Always getting
>> HTTP 401.
>>
>> Do you have any working example using GDAL GME driver? More info about my
>> problem here:
>> http://gis.stackexchange.com/questions/127065/i-cant-configure-authentication-with-google-maps-engine-driver-from-gdal
>>
>> Many thanks in advance!
>>
>> --
>> Jorge
>>
>> Sent using Postbox:
>> http://www.getpostbox.com
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141220/96867cd3/attachment.html>

From wolf+grass at bergenheim.net  Sat Dec 20 06:26:52 2014
From: wolf+grass at bergenheim.net (Wolf Bergenheim)
Date: Sat, 20 Dec 2014 15:26:52 +0100
Subject: [gdal-dev] Can't make GME driver work
In-Reply-To: <CAPRx4nR5TacN4+r4nZEyZJS4UFQqKrst_uxAkgBCZ_rptNueQQ@mail.gmail.com>
References: <549353E8.50305@cartodb.com>
	<CAJhTkW4Lut7aBv6bu=hSi83JDinFC+F0jkUBjCSm7p8uS3EoUg@mail.gmail.com>
	<CAPRx4nR5TacN4+r4nZEyZJS4UFQqKrst_uxAkgBCZ_rptNueQQ@mail.gmail.com>
Message-ID: <CAJhTkW7VhK8veECXsQdeX+FhXy0xebbw5wTypmn-mr2YJapvpQ@mail.gmail.com>

Cool! Thanks for the feedback. I'll update the wiki page :)

--Wolf on Android
The usual disclaimer goes here
On 20 Dec 2014 12:25, "Jorge Ar?valo" <jorge at cartodb.com> wrote:

> Hi Wolf
>
> I already fixed it. I had to follow these steps:
>
> - Define GOA2_CLIENT_ID, GOA2_CLIENT_SECRET, GME_APIKEY
>
> - Define GME_REFRESH_TOKEN, which allow the app to refresh the token
>
> No problem, so far. Just followed this
> http://trac.osgeo.org/gdal/wiki/GMEDriver
>
> - Define GME_AUTH (or provide 'auth' in the query string). This is not
> specified in the wiki page, but can be found here:
> https://github.com/OSGeo/gdal/blob/trunk/gdal/ogr/ogrsf_frmts/gme/ogrgmedatasource.cpp#L140
>
> The steps to get those environment vars are:
>
> - GOA2_CLIENT_ID, GOA2_CLIENT_SECRET, GME_APIKEY --> from Google API
> console
>
> - GME_AUTH, GME_REFRESH_TOKEN --> execute gdal_auth.py. Also stated in the
> wiki page. Just use the interactive option.
>
> gdal_auth.py -s gme
>
> So, the wiki page is basically correct. But just need to add the part
> about GME_AUTH :-)
>
> Best regards,
>
> Jorge
>
>
>
>
>
>
>
> El 19/12/2014 18:33, "Wolf Bergenheim" <wolf+grass at bergenheim.net>
> escribi?:
>
>> Hi Jorge.
>>
>> I noticed some issues with it earlier this week. I'll see if I have some
>> spare time over the weekend to see what I can do about it. Are you using
>> the trunk version or an earlier release?
>>
>> On 18 December 2014 at 23:23, Jorge Ar?valo <jorge at cartodb.com> wrote:
>>
>>>  Hello,
>>>
>>> I'm having problems making the GDAL GME driver work (
>>> http://trac.osgeo.org/gdal/wiki/GMEDriver). I've defined CLIENT_API and
>>> CLIENT_SECRET in Google API console, and I successfully used them with the
>>> QGIS GME plugin (
>>> https://plugins.qgis.org/plugins/GoogleMapsEngineConnector/) and with
>>> the example Python script of the doc page:
>>> https://developers.google.com/maps-engine/documentation/oauth/installedapplication.
>>> But, for some reason, I keep getting HTTP 401 error when trying to read
>>> from my GME account using the GDAL driver.
>>>
>>> I've used gdal_auth.py to get the access token and the refresh token.
>>> Passed the config options, as stated in the driver's page. Always getting
>>> HTTP 401.
>>>
>>> Do you have any working example using GDAL GME driver? More info about
>>> my problem here:
>>> http://gis.stackexchange.com/questions/127065/i-cant-configure-authentication-with-google-maps-engine-driver-from-gdal
>>>
>>> Many thanks in advance!
>>>
>>> --
>>> Jorge
>>>
>>> Sent using Postbox:
>>> http://www.getpostbox.com
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141220/29565d92/attachment.html>

From bontepaarden at gmail.com  Sat Dec 20 06:56:30 2014
From: bontepaarden at gmail.com (Paul Meems)
Date: Sat, 20 Dec 2014 15:56:30 +0100
Subject: [gdal-dev] [Windows] GDAL plug-ins are not found
Message-ID: <CAHNf2YRAozfrRrdrBQG-dF9i7+2OneQBjfTZZiL_DTbDvVWH-w@mail.gmail.com>

With our ActiveX control (MapWinGIS) written in C++ we use GDAL v2.
We use the pre-build binaries from GISInternals.com.

We have two C# applications that use our ActiveX control. One does some
testing and its executable is in the same folder as our ocx and the gdal
dlls. This folder also has the gdalplugins folder with the ECW, MrSid en
NetCDF plug-ins.

When I open an ECW file in the testapplication I get this error:
GDAL FAILURE: `[..]\ECW-ERMapper-Compressed-Wavelets.ecw' not recognised as
a supported file format. But we can open the file and it is shown properly
in our map.

Our second C# application is a demo and has its executables in its own
folder.
I've set the GDAL_DRIVER_PATH env. variable to the gdalplugins folder.
When I now open the ECW file in this application I get this error:
GDAL FAILURE: Can't load requested DLL:
D:\dev\MapwinGIS\MapWinGIS\trunk\bin\Win32\gdalplugins\gdal_ECW_JP2ECW.dll
But that is the location of the dll. I've double checked. Even the casing
is correct.
I also get this warning: GDAL WARNING: Failed to open
[..]\ECW-ERMapper-Compressed-Wavelets.ecw

All GDAL binaries were downloaded yesterday, but I believe we had the same
issue with prior versions of GDALv2 as well. But because the test
application did show the image we ignored it.
But the demo is a bit more strict ;)

Any suggestion is much appreciated.

Thanks,

Paul

*Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl



*The English presentations of the MapWindow GIS Conference 2014 are online.
<http://www.slideshare.net/mapwindow>*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141220/03d44a1f/attachment-0001.html>

From even.rouault at spatialys.com  Sat Dec 20 07:09:30 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 20 Dec 2014 16:09:30 +0100
Subject: [gdal-dev] [Windows] GDAL plug-ins are not found
In-Reply-To: <CAHNf2YRAozfrRrdrBQG-dF9i7+2OneQBjfTZZiL_DTbDvVWH-w@mail.gmail.com>
References: <CAHNf2YRAozfrRrdrBQG-dF9i7+2OneQBjfTZZiL_DTbDvVWH-w@mail.gmail.com>
Message-ID: <201412201609.30505.even.rouault@spatialys.com>

Le samedi 20 d?cembre 2014 15:56:30, Paul Meems a ?crit :
> With our ActiveX control (MapWinGIS) written in C++ we use GDAL v2.
> We use the pre-build binaries from GISInternals.com.
> 
> We have two C# applications that use our ActiveX control. One does some
> testing and its executable is in the same folder as our ocx and the gdal
> dlls. This folder also has the gdalplugins folder with the ECW, MrSid en
> NetCDF plug-ins.
> 
> When I open an ECW file in the testapplication I get this error:
> GDAL FAILURE: `[..]\ECW-ERMapper-Compressed-Wavelets.ecw' not recognised as
> a supported file format. But we can open the file and it is shown properly
> in our map.

That's really surprising ! Almost a miracle, but I don't believe in miracles. 
The only explanation I can see is that there are 2 opening attempts, one 
before calling GDALAllRegister() and the second one afterwards... What would 
be weird code... So that must be something else.

> 
> Our second C# application is a demo and has its executables in its own
> folder.
> I've set the GDAL_DRIVER_PATH env. variable to the gdalplugins folder.
> When I now open the ECW file in this application I get this error:
> GDAL FAILURE: Can't load requested DLL:
> D:\dev\MapwinGIS\MapWinGIS\trunk\bin\Win32\gdalplugins\gdal_ECW_JP2ECW.dll

There should be another line afterwards with an error code and an error 
message, but perhaps your error handler "eats" that extra line.

> But that is the location of the dll. I've double checked. Even the casing
> is correct.

Perhaps a dependency problem. Can the ECW SDK dll be reachable and/or in the 
path ?

> I also get this warning: GDAL WARNING: Failed to open
> [..]\ECW-ERMapper-Compressed-Wavelets.ecw
> 
> All GDAL binaries were downloaded yesterday, but I believe we had the same
> issue with prior versions of GDALv2 as well. But because the test
> application did show the image we ignored it.
> But the demo is a bit more strict ;)
> 
> Any suggestion is much appreciated.
> 
> Thanks,
> 
> Paul
> 
> *Paul Meems *
> Release manager, configuration manager
> and forum moderator of MapWindow GIS.
> www.mapwindow.org
> 
> Owner of MapWindow.nl - Support for
> Dutch speaking users.
> www.mapwindow.nl
> 
> 
> 
> *The English presentations of the MapWindow GIS Conference 2014 are online.
> <http://www.slideshare.net/mapwindow>*

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bontepaarden at gmail.com  Sat Dec 20 07:35:51 2014
From: bontepaarden at gmail.com (Paul Meems)
Date: Sat, 20 Dec 2014 16:35:51 +0100
Subject: [gdal-dev] [Windows] GDAL plug-ins are not found
In-Reply-To: <201412201609.30505.even.rouault@spatialys.com>
References: <CAHNf2YRAozfrRrdrBQG-dF9i7+2OneQBjfTZZiL_DTbDvVWH-w@mail.gmail.com>
	<201412201609.30505.even.rouault@spatialys.com>
Message-ID: <CAHNf2YRt5BoTAu7hn9c8zfQcj0VYn5s8g7jZTy_8fqsvkAqnsQ@mail.gmail.com>

Thanks Even for your quick reaction.

I have indeed another error line, but because it was translated to Dutch I
assumed it was not relevant.
This is that line translated to English:
126: Cannot find the mentioned module

When I use dependency walker on the gdal_ECW_JP2ECW.dll in my plug-ins
folder I get errors about missing gdal200.dll, etc.
When I copy the dll into the folder with gdal200.dll dependency walker has
no problems.
When I remove this dll again and copy gdalinfo.exe into this folder and use
it on the ecw-file I get the expected meta data of the file.
So it seems gdal is not the problem, right?

Any suggestions what could be the problem?

Thanks,




Paul

*Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl



*The English presentations of the MapWindow GIS Conference 2014 are online.
<http://www.slideshare.net/mapwindow>*

2014-12-20 16:09 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:

> Le samedi 20 d?cembre 2014 15:56:30, Paul Meems a ?crit :
> > With our ActiveX control (MapWinGIS) written in C++ we use GDAL v2.
> > We use the pre-build binaries from GISInternals.com.
> >
> > We have two C# applications that use our ActiveX control. One does some
> > testing and its executable is in the same folder as our ocx and the gdal
> > dlls. This folder also has the gdalplugins folder with the ECW, MrSid en
> > NetCDF plug-ins.
> >
> > When I open an ECW file in the testapplication I get this error:
> > GDAL FAILURE: `[..]\ECW-ERMapper-Compressed-Wavelets.ecw' not recognised
> as
> > a supported file format. But we can open the file and it is shown
> properly
> > in our map.
>
> That's really surprising ! Almost a miracle, but I don't believe in
> miracles.
> The only explanation I can see is that there are 2 opening attempts, one
> before calling GDALAllRegister() and the second one afterwards... What
> would
> be weird code... So that must be something else.
>
> >
> > Our second C# application is a demo and has its executables in its own
> > folder.
> > I've set the GDAL_DRIVER_PATH env. variable to the gdalplugins folder.
> > When I now open the ECW file in this application I get this error:
> > GDAL FAILURE: Can't load requested DLL:
> >
> D:\dev\MapwinGIS\MapWinGIS\trunk\bin\Win32\gdalplugins\gdal_ECW_JP2ECW.dll
>
> There should be another line afterwards with an error code and an error
> message, but perhaps your error handler "eats" that extra line.
>
> > But that is the location of the dll. I've double checked. Even the casing
> > is correct.
>
> Perhaps a dependency problem. Can the ECW SDK dll be reachable and/or in
> the
> path ?
>
> > I also get this warning: GDAL WARNING: Failed to open
> > [..]\ECW-ERMapper-Compressed-Wavelets.ecw
> >
> > All GDAL binaries were downloaded yesterday, but I believe we had the
> same
> > issue with prior versions of GDALv2 as well. But because the test
> > application did show the image we ignored it.
> > But the demo is a bit more strict ;)
> >
> > Any suggestion is much appreciated.
> >
> > Thanks,
> >
> > Paul
> >
> > *Paul Meems *
> > Release manager, configuration manager
> > and forum moderator of MapWindow GIS.
> > www.mapwindow.org
> >
> > Owner of MapWindow.nl - Support for
> > Dutch speaking users.
> > www.mapwindow.nl
> >
> >
> >
> > *The English presentations of the MapWindow GIS Conference 2014 are
> online.
> > <http://www.slideshare.net/mapwindow>*
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141220/59eeea3a/attachment.html>

From oliver.eichler at gmx.de  Sat Dec 20 08:01:16 2014
From: oliver.eichler at gmx.de (Oliver Eichler)
Date: Sat, 20 Dec 2014 17:01:16 +0100
Subject: [gdal-dev] Garmin .img data?
In-Reply-To: <549454CC.6060002@faunalia.it>
References: <549443F0.6020600@faunalia.it>
	<201412191701.48790.even.rouault@spatialys.com>
	<549454CC.6060002@faunalia.it>
Message-ID: <1720507.QHo2pcZAhY@linux-okdp.site>

Hi,

The Garmin vector format is well known to a certain extend. Garmin developed it further, but the reverse 
engineering stopped at a point where it was possible to create own maps without any obvious loss of 
functionality. So up to that point the format is known. The document on sf.net is very old and not complete. 
But there is enough open source to learn the details. However the coding of newer maps used by Garmin is 
not known. As long as you stick to maps created by the open source tools that is of no concern.

The format is very complex and has many very proprietary features, that are hard to handle in a multi-
purpose library like GDAL. I don't think I would want to use GDAL as a replacement for my own render code, 
because it would not give me the API I need. With raster maps it's different. I really appreciate GDAL for 
that. However raster maps do not have single elements you want to search for, nor routing information or 
the need of skin files.

So from my point of view I do not see a real benefit in GDAL supporting Garmin's proprietary format. It's a 
lot of work to implement and in the end you do not get 100% of what you want. Scientifically the nutritional 
value of those maps is against zero. You better use the raw data in that case.


just my 2 cents

Oliver




> Hi Even,
> 
> Il 19/12/2014 17:01, Even Rouault ha scritto:
> > Probably perhaps nobody has written it. The link you gave doesn't
> > link much information about the format. Is it the vector format
> > described at http://sourceforge.net/projects/garmin-> > img/?source=typ_redirect ? If so, a quick skimming of it would lend
> > me thinking that read support should be possible, although likely
> > not a trivial effort (41 pages for an unformal specification is
> > quite significant). Write support and interoperability with Garmin
> > devices would probably be harder as I can see quite a few ??? in
> > the document.
> 
> thanks for your reply. I imagined this, but I was surprised by the
> fact that apparently small projects were able to read the format
> without much difficulty.
> Going to ask qmapshack dev.
> All the best.
> --
> Paolo Cavallini - www.faunalia.eu
> QGIS & PostGIS courses: http://www.faunalia.eu/training.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141220/0ded30be/attachment.html>

From cavallini at faunalia.it  Sat Dec 20 11:01:51 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sat, 20 Dec 2014 20:01:51 +0100
Subject: [gdal-dev] Garmin .img data?
In-Reply-To: <1720507.QHo2pcZAhY@linux-okdp.site>
References: <549443F0.6020600@faunalia.it>	<201412191701.48790.even.rouault@spatialys.com>	<549454CC.6060002@faunalia.it>
	<1720507.QHo2pcZAhY@linux-okdp.site>
Message-ID: <5495C79F.30507@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Il 20/12/2014 17:01, Oliver Eichler ha scritto:
> Hi,
> 
> 
> 
> The Garmin vector format is well known to a certain extend. Garmin

Thanks Oliver for the thorough explanation.
All the best.

- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlSVx54ACgkQ/NedwLUzIr6t+wCghqNw9jaG9NuVSaC9Uz2uj2o0
CWQAmwaS1QG51uN9ZQKe7uKUgcDfwvHl
=tHuX
-----END PGP SIGNATURE-----

From bontepaarden at gmail.com  Sun Dec 21 12:42:48 2014
From: bontepaarden at gmail.com (Paul Meems)
Date: Sun, 21 Dec 2014 21:42:48 +0100
Subject: [gdal-dev] [Windows] GDAL plug-ins are not found
In-Reply-To: <CAHNf2YRt5BoTAu7hn9c8zfQcj0VYn5s8g7jZTy_8fqsvkAqnsQ@mail.gmail.com>
References: <CAHNf2YRAozfrRrdrBQG-dF9i7+2OneQBjfTZZiL_DTbDvVWH-w@mail.gmail.com>
	<201412201609.30505.even.rouault@spatialys.com>
	<CAHNf2YRt5BoTAu7hn9c8zfQcj0VYn5s8g7jZTy_8fqsvkAqnsQ@mail.gmail.com>
Message-ID: <CAHNf2YR1AZjGDzx-7PxPLoFQbt=ZE3ON_Dtq8oAUVEV11k+g5A@mail.gmail.com>

Getting back on our issue.
We've solved it now. It was a combination of design flaws at our end.

First we opened all GDAL datasets in update mode and if it failed we opened
it in read-only mode.
That's why we got the error but was the image still shown. We changed this
strategy.

Secondly we relied on the GDAL_DRIVER_PATH environment variable to find the
GDAL plug-ins.
We changed that by using CPLSetConfigOption on startup.

Now out test application is no longer reporting errors and our demo
application can also load ECW files.

Thanks,


Paul

*Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl



*The English presentations of the MapWindow GIS Conference 2014 are online.
<http://www.slideshare.net/mapwindow>*

2014-12-20 16:35 GMT+01:00 Paul Meems <bontepaarden at gmail.com>:

> Thanks Even for your quick reaction.
>
> I have indeed another error line, but because it was translated to Dutch I
> assumed it was not relevant.
> This is that line translated to English:
> 126: Cannot find the mentioned module
>
> When I use dependency walker on the gdal_ECW_JP2ECW.dll in my plug-ins
> folder I get errors about missing gdal200.dll, etc.
> When I copy the dll into the folder with gdal200.dll dependency walker has
> no problems.
> When I remove this dll again and copy gdalinfo.exe into this folder and
> use it on the ecw-file I get the expected meta data of the file.
> So it seems gdal is not the problem, right?
>
> Any suggestions what could be the problem?
>
> Thanks,
>
>
>
>
> Paul
>
> *Paul Meems *
> Release manager, configuration manager
> and forum moderator of MapWindow GIS.
> www.mapwindow.org
>
> Owner of MapWindow.nl - Support for
> Dutch speaking users.
> www.mapwindow.nl
>
>
>
> *The English presentations of the MapWindow GIS Conference 2014 are
> online. <http://www.slideshare.net/mapwindow>*
>
> 2014-12-20 16:09 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:
>
>> Le samedi 20 d?cembre 2014 15:56:30, Paul Meems a ?crit :
>> > With our ActiveX control (MapWinGIS) written in C++ we use GDAL v2.
>> > We use the pre-build binaries from GISInternals.com.
>> >
>> > We have two C# applications that use our ActiveX control. One does some
>> > testing and its executable is in the same folder as our ocx and the gdal
>> > dlls. This folder also has the gdalplugins folder with the ECW, MrSid en
>> > NetCDF plug-ins.
>> >
>> > When I open an ECW file in the testapplication I get this error:
>> > GDAL FAILURE: `[..]\ECW-ERMapper-Compressed-Wavelets.ecw' not
>> recognised as
>> > a supported file format. But we can open the file and it is shown
>> properly
>> > in our map.
>>
>> That's really surprising ! Almost a miracle, but I don't believe in
>> miracles.
>> The only explanation I can see is that there are 2 opening attempts, one
>> before calling GDALAllRegister() and the second one afterwards... What
>> would
>> be weird code... So that must be something else.
>>
>> >
>> > Our second C# application is a demo and has its executables in its own
>> > folder.
>> > I've set the GDAL_DRIVER_PATH env. variable to the gdalplugins folder.
>> > When I now open the ECW file in this application I get this error:
>> > GDAL FAILURE: Can't load requested DLL:
>> >
>> D:\dev\MapwinGIS\MapWinGIS\trunk\bin\Win32\gdalplugins\gdal_ECW_JP2ECW.dll
>>
>> There should be another line afterwards with an error code and an error
>> message, but perhaps your error handler "eats" that extra line.
>>
>> > But that is the location of the dll. I've double checked. Even the
>> casing
>> > is correct.
>>
>> Perhaps a dependency problem. Can the ECW SDK dll be reachable and/or in
>> the
>> path ?
>>
>> > I also get this warning: GDAL WARNING: Failed to open
>> > [..]\ECW-ERMapper-Compressed-Wavelets.ecw
>> >
>> > All GDAL binaries were downloaded yesterday, but I believe we had the
>> same
>> > issue with prior versions of GDALv2 as well. But because the test
>> > application did show the image we ignored it.
>> > But the demo is a bit more strict ;)
>> >
>> > Any suggestion is much appreciated.
>> >
>> > Thanks,
>> >
>> > Paul
>> >
>> > *Paul Meems *
>> > Release manager, configuration manager
>> > and forum moderator of MapWindow GIS.
>> > www.mapwindow.org
>> >
>> > Owner of MapWindow.nl - Support for
>> > Dutch speaking users.
>> > www.mapwindow.nl
>> >
>> >
>> >
>> > *The English presentations of the MapWindow GIS Conference 2014 are
>> online.
>> > <http://www.slideshare.net/mapwindow>*
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141221/4cb7f028/attachment.html>

From jukka.rahkonen at mmmtike.fi  Mon Dec 22 01:29:49 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 22 Dec 2014 09:29:49 +0000 (UTC)
Subject: [gdal-dev] Dead links to home.gdal.org
Message-ID: <loom.20141222T102636-657@post.gmane.org>

Hi,

There are dead links here and there in GDAL documentation pointing to
home.gdal.org/projects. For example the HFA driver page
http://www.gdal.org/frmt_hfa.html has a link to
http://home.gdal.org/projects/imagine/hfa_index.html

-Jukka Rahkonen-



From federicojurio at suremptec.com.ar  Tue Dec 23 05:33:39 2014
From: federicojurio at suremptec.com.ar (Federico Jurio)
Date: Tue, 23 Dec 2014 10:33:39 -0300
Subject: [gdal-dev] Gdal and SQLite
Message-ID: <CADmC3azxJjgut+3nSRVp3wRTUPkS2BvV_QjDV=LiV424-NAYFw@mail.gmail.com>

Hi guys, i'm trying to make a simple query using sqlite through gdal
library ( http://www.gdal.org/ogr_sql.html )

I have a simple table with two columns: ID and (asd*) (both columns have
integer values)

I want the minimun value of this columns

My first attempt was successful

E:\Pruebas>ogrinfo -sql "select min(id) MINID from Geo1" Geo1.shp
INFO: Open of `Geo1.shp'
      using driver `ESRI Shapefile' successful.

Layer name: Geo1
Geometry: None
Feature Count: 1
Layer SRS WKT:
(unknown)
MINID: Integer (10.0)
OGRFeature(Geo1):0
  MINID (Integer) = 2

My second attempt was unsuccessful

E:\Pruebas>ogrinfo -sql "select min((asd*)) MINASD from Geo1" Geo1.shp
INFO: Open of `Geo1.shp'
      using driver `ESRI Shapefile' successful.
ERROR 1: SQL Expression Parsing Error: syntax error, unexpected ')'.
Occured around :
select min((asd*)) MINASD from Geo1

E:\Pruebas>ogrinfo -sql "select min("(asd*)") MINASD from Geo1" Geo1.shp
INFO: Open of `Geo1.shp'
      using driver `ESRI Shapefile' successful.
ERROR 1: SQL Expression Parsing Error: syntax error, unexpected ')'.
Occured around :
select min((asd*)) MINASD from Geo1

Can someone help me with the correct expression?
Thanks in advance!

Regards

-- 
Federico Jurio
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
federicojurio at suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141223/1f05a380/attachment.html>

From even.rouault at spatialys.com  Tue Dec 23 09:41:56 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 23 Dec 2014 18:41:56 +0100
Subject: [gdal-dev] Gdal and SQLite
In-Reply-To: <CADmC3azxJjgut+3nSRVp3wRTUPkS2BvV_QjDV=LiV424-NAYFw@mail.gmail.com>
References: <CADmC3azxJjgut+3nSRVp3wRTUPkS2BvV_QjDV=LiV424-NAYFw@mail.gmail.com>
Message-ID: <201412231841.56712.even.rouault@spatialys.com>

Le mardi 23 d?cembre 2014 14:33:39, Federico Jurio a ?crit :
> Hi guys, i'm trying to make a simple query using sqlite through gdal
> library ( http://www.gdal.org/ogr_sql.html )
> 
> I have a simple table with two columns: ID and (asd*) (both columns have
> integer values)
> 
> I want the minimun value of this columns
> 
> My first attempt was successful
> 
> E:\Pruebas>ogrinfo -sql "select min(id) MINID from Geo1" Geo1.shp
> INFO: Open of `Geo1.shp'
>       using driver `ESRI Shapefile' successful.
> 
> Layer name: Geo1
> Geometry: None
> Feature Count: 1
> Layer SRS WKT:
> (unknown)
> MINID: Integer (10.0)
> OGRFeature(Geo1):0
>   MINID (Integer) = 2
> 
> My second attempt was unsuccessful
> 
> E:\Pruebas>ogrinfo -sql "select min((asd*)) MINASD from Geo1" Geo1.shp
> INFO: Open of `Geo1.shp'
>       using driver `ESRI Shapefile' successful.
> ERROR 1: SQL Expression Parsing Error: syntax error, unexpected ')'.
> Occured around :
> select min((asd*)) MINASD from Geo1
> 
> E:\Pruebas>ogrinfo -sql "select min("(asd*)") MINASD from Geo1" Geo1.shp
> INFO: Open of `Geo1.shp'
>       using driver `ESRI Shapefile' successful.
> ERROR 1: SQL Expression Parsing Error: syntax error, unexpected ')'.
> Occured around :
> select min((asd*)) MINASD from Geo1

Federico,

A column name like (asd*) is asking for trouble.... For some reason the 
grammar of the OGR SQL parser rejects that as an argument for MIN.

I'd note that in your message you are mentionning that you want to use the 
SQLite engine, but in the above, you won't. For that you must add "-dialect 
sqlite" to your command line. And if you do so, it will work actually.

$ ogrinfo test.csv -sql 'select min("(asd*)") from test' -dialect sqlite
INFO: Open of `test.csv'
      using driver `CSV' successful.

Layer name: SELECT
Geometry: None
Feature Count: 1
Layer SRS WKT:
(unknown)
min("(asd*)"): Integer (0.0)
OGRFeature(SELECT):0
  min("(asd*)") (Integer) = 3

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Bin.Zhao at nasa.gov  Tue Dec 23 12:56:15 2014
From: Bin.Zhao at nasa.gov (Bin Zhao)
Date: Tue, 23 Dec 2014 15:56:15 -0500
Subject: [gdal-dev] gdalwarp reporjection issue
Message-ID: <5499D6EF.8020206@nasa.gov>

Hi,

First time gdal user here.

I am trying to use gdalwarp to reproject a raster file from polar stereo 
to WGS84. The original raster has nodata value 127 and 0's and 1's as 
real data values. After warping,  the file contains only nodata values, 
i.e., all real data got lost. Could anyone help me with it.

The data comes from 
https://secure.antarctica.ac.uk/data/bedmap2/bedmap2_tiff.zip

The raster file is bedmap2_icemask_grounded_and_shelves.tif from that 
zip file.

gdalinfo --version
GDAL 1.10.0, released 2013/04/24

I am using the command line below

gdalwarp --config GDAL_CACHEMAX 500 -wm 500 -t_srs EPSG:4326 -te -180 
-90 180 90 -multi -srcnodata 127 -dstnodata 127 
bedmap2_icemask_grounded_and_shelves.tif 
bedmap2_icemask_grounded_and_shelves_reproj.tif

Some information for the original raster:
gdalinfo -stats bedmap2_icemask_grounded_and_shelves.tif
Driver: GTiff/GeoTIFF
Files: bedmap2_icemask_grounded_and_shelves.tif
        bedmap2_icemask_grounded_and_shelves.tif.ovr
        bedmap2_icemask_grounded_and_shelves.tfw
        bedmap2_icemask_grounded_and_shelves.tif.aux.xml
Size is 6667, 6667
Coordinate System is:
PROJCS["WGS_1984_Stereographic_South_Pole",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.257223563,
                 AUTHORITY["EPSG","7030"]],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4326"]],
     PROJECTION["Polar_Stereographic"],
     PARAMETER["latitude_of_origin",-71],
     PARAMETER["central_meridian",0],
     PARAMETER["scale_factor",1],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]
Origin = (-3333500.000000000000000,3333500.000000000000000)
Pixel Size = (1000.000000000000000,-1000.000000000000000)
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-3333500.000, 3333500.000) ( 45d 0' 0.00"W, 48d27'31.20"S)
Lower Left  (-3333500.000,-3333500.000) (135d 0' 0.00"W, 48d27'31.20"S)
Upper Right ( 3333500.000, 3333500.000) ( 45d 0' 0.00"E, 48d27'31.20"S)
Lower Right ( 3333500.000,-3333500.000) (135d 0' 0.00"E, 48d27'31.20"S)
Center      (   0.0000000,   0.0000000) (  0d 0' 0.01"E, 90d 0' 0.00"S)
Band 1 Block=128x128 Type=Byte, ColorInterp=Gray
   Min=0.000 Max=1.000
   Minimum=0.000, Maximum=1.000, Mean=0.112, StdDev=0.315
   NoData Value=127
   Overviews: 3334x3334, 1667x1667, 834x834, 417x417, 209x209
   Metadata:
     STATISTICS_MAXIMUM=1
     STATISTICS_MEAN=0.11176160412634
     STATISTICS_MINIMUM=0
     STATISTICS_STDDEV=0.31507293640332
   Image Structure Metadata:
     PIXELTYPE=SIGNEDBYTE
<GDALRasterAttributeTable>
   <FieldDefn index="0">
     <Name>OBJECTID</Name>
     <Type>0</Type>
     <Usage>0</Usage>
   </FieldDefn>
   <FieldDefn index="1">
     <Name>Value</Name>
     <Type>0</Type>
     <Usage>0</Usage>
   </FieldDefn>
   <FieldDefn index="2">
     <Name>Count</Name>
     <Type>1</Type>
     <Usage>0</Usage>
   </FieldDefn>
   <Row index="0">
     <F>1</F>
     <F>0</F>
     <F>12104872</F>
   </Row>
   <Row index="1">
     <F>2</F>
     <F>1</F>
     <F>1523082</F>
   </Row>
</GDALRasterAttributeTable>


Thanks,

Bin Zhao


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141223/0561481e/attachment.html>

From simlangen at gmail.com  Tue Dec 23 21:05:50 2014
From: simlangen at gmail.com (Simen Langseth)
Date: Wed, 24 Dec 2014 14:05:50 +0900
Subject: [gdal-dev] What is the maximum '-wm' I can use with 64bit gdalwarp?
Message-ID: <CAHOqc_qUSVPHemcvjzXaJ5NaW42Robes+eXfAc2Mia6n=Ac1uQ@mail.gmail.com>

What is the maximum '-wm' I can use with 64bit gdalwarp?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141224/d9ced63d/attachment.html>

From even.rouault at spatialys.com  Wed Dec 24 01:50:23 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 24 Dec 2014 10:50:23 +0100
Subject: [gdal-dev] What is the maximum '-wm' I can use with 64bit
	gdalwarp?
In-Reply-To: <CAHOqc_qUSVPHemcvjzXaJ5NaW42Robes+eXfAc2Mia6n=Ac1uQ@mail.gmail.com>
References: <CAHOqc_qUSVPHemcvjzXaJ5NaW42Robes+eXfAc2Mia6n=Ac1uQ@mail.gmail.com>
Message-ID: <201412241050.24039.even.rouault@spatialys.com>

Le mercredi 24 d?cembre 2014 06:05:50, Simen Langseth a ?crit :
> What is the maximum '-wm' I can use with 64bit gdalwarp?

Simen,

Up to 9999 for 9999 MB. And if you want more, you have to specified the value 
in bytes instead of megabytes.
But putting more warp memory will not necessarily need to more performance, 
especially if you mosaic many small images into a big one.

See 
https://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp#WillincreasingRAMincreasethespeedofgdalwarp

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Dec 24 02:30:46 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 24 Dec 2014 11:30:46 +0100
Subject: [gdal-dev] What is the maximum '-wm' I can use with 64bit
	gdalwarp?
In-Reply-To: <CAHOqc_pYTrT-2=py1GMG3mxpDDw5ox-h15W9CvEun_T=24mwKA@mail.gmail.com>
References: <CAHOqc_qUSVPHemcvjzXaJ5NaW42Robes+eXfAc2Mia6n=Ac1uQ@mail.gmail.com>
	<201412241050.24039.even.rouault@spatialys.com>
	<CAHOqc_pYTrT-2=py1GMG3mxpDDw5ox-h15W9CvEun_T=24mwKA@mail.gmail.com>
Message-ID: <201412241130.46205.even.rouault@spatialys.com>

Le mercredi 24 d?cembre 2014 11:19:14, Simen Langseth a ?crit :
> Dear Even Rouault
> 
> Thanks for your answer.
> 
> When I used more than 1024 mb for sub-sampling an image, strangely with in
> few minutes, a completely black image is produced.

Hum, I'm just fixing a but wher putting more in -wm caused issue but it was 
very specific : http://trac.osgeo.org/gdal/ticket/5789

> Using 1024 is not sufficient because my input file is around 300GB. 

Eh, read again what I wrote : "putting more warp memory will not necessarily 
need to more performance". -wm is the size of individual chunks that will be 
warped. Working on very big chunks is actually detrimental if you want to use 
-multi since there will be less opportunity to parallelize I/O and CPU bound 
operations.
If not already done, you'll get probably much more performance by for example 
ensuring you output to a tiled GeoTIFF, by adding -co TILED=YES

> I could
> not figure out the problem. I am also using '-multi' parameter.
> There is no problem if I do not use '-wm' and '-multi' parameters or just
> use 1024 with '-wm' and '-multi' except very slowness.
> 
> I hope you can help me.
> 
> Simen
> 
> 
> 
> On Wed, Dec 24, 2014 at 6:50 PM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Le mercredi 24 d?cembre 2014 06:05:50, Simen Langseth a ?crit :
> > > What is the maximum '-wm' I can use with 64bit gdalwarp?
> > 
> > Simen,
> > 
> > Up to 9999 for 9999 MB. And if you want more, you have to specified the
> > value
> > in bytes instead of megabytes.
> > But putting more warp memory will not necessarily need to more
> > performance, especially if you mosaic many small images into a big one.
> > 
> > See
> > 
> > https://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp#WillincreasingRAMincre
> > asethespeedofgdalwarp
> > 
> > Even
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Dec 24 02:36:31 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 24 Dec 2014 11:36:31 +0100
Subject: [gdal-dev] gdalwarp reporjection issue
In-Reply-To: <5499D6EF.8020206@nasa.gov>
References: <5499D6EF.8020206@nasa.gov>
Message-ID: <201412241136.31750.even.rouault@spatialys.com>

Bin Zhao,

Problem reproduced, identified and fixed per 
http://trac.osgeo.org/gdal/ticket/5789

You can use two workarounds :
- remove "-wm 500"
- use a target extent that matches more closely the original bounds. For 
example -te -180 -90 180 -45

Both will avoid coordinates that are very far from the south pole (e.g. in the 
northern hemisphere) to be reprojected to non-sense values, which triggered 
the bug.

Best regards,

Even

Le mardi 23 d?cembre 2014 21:56:15, Bin Zhao a ?crit :
> Hi,
> 
> First time gdal user here.
> 
> I am trying to use gdalwarp to reproject a raster file from polar stereo
> to WGS84. The original raster has nodata value 127 and 0's and 1's as
> real data values. After warping,  the file contains only nodata values,
> i.e., all real data got lost. Could anyone help me with it.
> 
> The data comes from
> https://secure.antarctica.ac.uk/data/bedmap2/bedmap2_tiff.zip
> 
> The raster file is bedmap2_icemask_grounded_and_shelves.tif from that
> zip file.
> 
> gdalinfo --version
> GDAL 1.10.0, released 2013/04/24
> 
> I am using the command line below
> 
> gdalwarp --config GDAL_CACHEMAX 500 -wm 500 -t_srs EPSG:4326 -te -180
> -90 180 90 -multi -srcnodata 127 -dstnodata 127
> bedmap2_icemask_grounded_and_shelves.tif
> bedmap2_icemask_grounded_and_shelves_reproj.tif
> 
> Some information for the original raster:
> gdalinfo -stats bedmap2_icemask_grounded_and_shelves.tif
> Driver: GTiff/GeoTIFF
> Files: bedmap2_icemask_grounded_and_shelves.tif
>         bedmap2_icemask_grounded_and_shelves.tif.ovr
>         bedmap2_icemask_grounded_and_shelves.tfw
>         bedmap2_icemask_grounded_and_shelves.tif.aux.xml
> Size is 6667, 6667
> Coordinate System is:
> PROJCS["WGS_1984_Stereographic_South_Pole",
>      GEOGCS["WGS 84",
>          DATUM["WGS_1984",
>              SPHEROID["WGS 84",6378137,298.257223563,
>                  AUTHORITY["EPSG","7030"]],
>              AUTHORITY["EPSG","6326"]],
>          PRIMEM["Greenwich",0],
>          UNIT["degree",0.0174532925199433],
>          AUTHORITY["EPSG","4326"]],
>      PROJECTION["Polar_Stereographic"],
>      PARAMETER["latitude_of_origin",-71],
>      PARAMETER["central_meridian",0],
>      PARAMETER["scale_factor",1],
>      PARAMETER["false_easting",0],
>      PARAMETER["false_northing",0],
>      UNIT["metre",1,
>          AUTHORITY["EPSG","9001"]]]
> Origin = (-3333500.000000000000000,3333500.000000000000000)
> Pixel Size = (1000.000000000000000,-1000.000000000000000)
> Metadata:
>    AREA_OR_POINT=Area
> Image Structure Metadata:
>    INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (-3333500.000, 3333500.000) ( 45d 0' 0.00"W, 48d27'31.20"S)
> Lower Left  (-3333500.000,-3333500.000) (135d 0' 0.00"W, 48d27'31.20"S)
> Upper Right ( 3333500.000, 3333500.000) ( 45d 0' 0.00"E, 48d27'31.20"S)
> Lower Right ( 3333500.000,-3333500.000) (135d 0' 0.00"E, 48d27'31.20"S)
> Center      (   0.0000000,   0.0000000) (  0d 0' 0.01"E, 90d 0' 0.00"S)
> Band 1 Block=128x128 Type=Byte, ColorInterp=Gray
>    Min=0.000 Max=1.000
>    Minimum=0.000, Maximum=1.000, Mean=0.112, StdDev=0.315
>    NoData Value=127
>    Overviews: 3334x3334, 1667x1667, 834x834, 417x417, 209x209
>    Metadata:
>      STATISTICS_MAXIMUM=1
>      STATISTICS_MEAN=0.11176160412634
>      STATISTICS_MINIMUM=0
>      STATISTICS_STDDEV=0.31507293640332
>    Image Structure Metadata:
>      PIXELTYPE=SIGNEDBYTE
> <GDALRasterAttributeTable>
>    <FieldDefn index="0">
>      <Name>OBJECTID</Name>
>      <Type>0</Type>
>      <Usage>0</Usage>
>    </FieldDefn>
>    <FieldDefn index="1">
>      <Name>Value</Name>
>      <Type>0</Type>
>      <Usage>0</Usage>
>    </FieldDefn>
>    <FieldDefn index="2">
>      <Name>Count</Name>
>      <Type>1</Type>
>      <Usage>0</Usage>
>    </FieldDefn>
>    <Row index="0">
>      <F>1</F>
>      <F>0</F>
>      <F>12104872</F>
>    </Row>
>    <Row index="1">
>      <F>2</F>
>      <F>1</F>
>      <F>1523082</F>
>    </Row>
> </GDALRasterAttributeTable>
> 
> 
> Thanks,
> 
> Bin Zhao

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From michael.katz at noaa.gov  Thu Dec 25 02:02:49 2014
From: michael.katz at noaa.gov (Michael Katz - NOAA Affiliate)
Date: Thu, 25 Dec 2014 02:02:49 -0800
Subject: [gdal-dev] problem projecting "Merchich" to WGS84
Message-ID: <CALx5Kqb7s2s2LFjR6xqx0QYU2mPKSGe8n7-xa30cqOLzDOXAKA@mail.gmail.com>

I have a certain .tif file that I open with GDALOpen() and then call
GDALGetProjectionRef(), which returns:

srs = GEOGCS["Merchich",DATUM["Merchich",SPHEROID["Clarke 1880
(IGN)",6378249.2,293.4660212936265,AUTHORITY["EPSG","7011"]],AUTHORITY["EPSG","6261"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4261"]]


I make this into a projection with:

OGRSpatialReference oSRS;
oSRS.importFromWkt( &srs );
char *sP = NULL;
oSRS.exportToProj4( &sP );
sourceProjection = pj_init_plus( sP );
CPLFree( sP );


(here, sP = "+proj=longlat +a=6378249.2 +b=6356515
+towgs84=31,146,47,0,0,0,0 +no_defs")

I think make another projection with:

targetProjection = pj_init_plus( "+proj=latlong +datum=WGS84" );


I use GDALApplyGeoTransform() to convert the top-left (0, 0) point of the
.tif file to geo coordinates, which gives me a lat/lon value of (lon = -7,
lat = 34).

pj_is_latlong( sourceProjection ) returns 1, which confirms that this file
has a lat/lon projection, and the (-7, 34) seems to be correct (at least in
the right area). (The actual numbers from my file are not exact values like
this, so I'm rounding here, but it shouldn't matter for the purpose of this
discussion.)

The problem is that when I call

pj_transform( sourceProjection, targetProjection, 1, 1, &lon, &lat, NULL );


it returns both the lon and lat as -infinity (i.e., the double
representation of negative infinity).

I don't understand why it's returning invalid values like that. I believe
I've used pj_transform() with other lat/lon projections (going from these
other lat/lon projections to WGS84 as above) and it's acted basically as a
no-op.

However, my concern is that it's not quite a no-op, but may slightly change
the lat/lon values to account for differences in the datum and so on. So, I
*could* just not do the pj_transform() when pj_is_latlong( sourceProjection
) == 1, but it seems like I *do* want to do transform in general, because
of datum differences and so on.

So my question is:

(a) Is it misguided to try to call pj_transform() to go from one lat/lon
projection (as in this "Merchich" projection) to a WGS84?

(b) If not, do you know why it seems to be failing? I found this:
http://trac.osgeo.org/osgeo4w/ticket/320. But I don't believe it's related.

Thanks for any help.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141225/385b78a0/attachment.html>

From simlangen at gmail.com  Thu Dec 25 22:03:41 2014
From: simlangen at gmail.com (Simen Langseth)
Date: Fri, 26 Dec 2014 15:03:41 +0900
Subject: [gdal-dev] What is the maximum '-wm' I can use with 64bit
	gdalwarp?
In-Reply-To: <201412241130.46205.even.rouault@spatialys.com>
References: <CAHOqc_qUSVPHemcvjzXaJ5NaW42Robes+eXfAc2Mia6n=Ac1uQ@mail.gmail.com>
	<201412241050.24039.even.rouault@spatialys.com>
	<CAHOqc_pYTrT-2=py1GMG3mxpDDw5ox-h15W9CvEun_T=24mwKA@mail.gmail.com>
	<201412241130.46205.even.rouault@spatialys.com>
Message-ID: <CAHOqc_o1Ka4_RrNrvFrLKrM9PDS3EHaYE81m8EUHQoGx+mk0cw@mail.gmail.com>

Dear Even Rouault

Whether I use '-multi' or not, '-wm 1024' works, but '-wm 3024' does not
work in my PC.

I re-tested it, and again with in a very few minutes, a completely black
image is produced.

Thanks for your support.


On Wed, Dec 24, 2014 at 7:30 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le mercredi 24 d?cembre 2014 11:19:14, Simen Langseth a ?crit :
> > Dear Even Rouault
> >
> > Thanks for your answer.
> >
> > When I used more than 1024 mb for sub-sampling an image, strangely with
> in
> > few minutes, a completely black image is produced.
>
> Hum, I'm just fixing a but wher putting more in -wm caused issue but it was
> very specific : http://trac.osgeo.org/gdal/ticket/5789
>
> > Using 1024 is not sufficient because my input file is around 300GB.
>
> Eh, read again what I wrote : "putting more warp memory will not
> necessarily
> need to more performance". -wm is the size of individual chunks that will
> be
> warped. Working on very big chunks is actually detrimental if you want to
> use
> -multi since there will be less opportunity to parallelize I/O and CPU
> bound
> operations.
> If not already done, you'll get probably much more performance by for
> example
> ensuring you output to a tiled GeoTIFF, by adding -co TILED=YES
>
> > I could
> > not figure out the problem. I am also using '-multi' parameter.
> > There is no problem if I do not use '-wm' and '-multi' parameters or just
> > use 1024 with '-wm' and '-multi' except very slowness.
> >
> > I hope you can help me.
> >
> > Simen
> >
> >
> >
> > On Wed, Dec 24, 2014 at 6:50 PM, Even Rouault <
> even.rouault at spatialys.com>
> >
> > wrote:
> > > Le mercredi 24 d?cembre 2014 06:05:50, Simen Langseth a ?crit :
> > > > What is the maximum '-wm' I can use with 64bit gdalwarp?
> > >
> > > Simen,
> > >
> > > Up to 9999 for 9999 MB. And if you want more, you have to specified the
> > > value
> > > in bytes instead of megabytes.
> > > But putting more warp memory will not necessarily need to more
> > > performance, especially if you mosaic many small images into a big one.
> > >
> > > See
> > >
> > >
> https://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp#WillincreasingRAMincre
> > > asethespeedofgdalwarp
> > >
> > > Even
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141226/f3ce5113/attachment.html>

From jukka.rahkonen at mmmtike.fi  Fri Dec 26 03:00:33 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 26 Dec 2014 11:00:33 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?What_is_the_maximum_=27-wm=27_I_can_use_with?=
	=?utf-8?q?_64bit=09gdalwarp=3F?=
References: <CAHOqc_qUSVPHemcvjzXaJ5NaW42Robes+eXfAc2Mia6n=Ac1uQ@mail.gmail.com>
	<201412241050.24039.even.rouault@spatialys.com>
	<CAHOqc_pYTrT-2=py1GMG3mxpDDw5ox-h15W9CvEun_T=24mwKA@mail.gmail.com>
	<201412241130.46205.even.rouault@spatialys.com>
	<CAHOqc_o1Ka4_RrNrvFrLKrM9PDS3EHaYE81m8EUHQoGx+mk0cw@mail.gmail.com>
Message-ID: <loom.20141226T115118-367@post.gmane.org>

Simen Langseth <simlangen <at> gmail.com> writes:

> 
> 
> 
> Dear Even Rouault
> Whether I use '-multi' or not, '-wm 1024' works, but '-wm 3024' does not
work in my PC.
> 
> 
> I re-tested it, and again?with in a very?few minutes, a completely black
image is produced.
> 

Hi,

Because -wm 1024 works for you I consider this is mainly a documentation
issue. With gdalwarp and -wm bigger is not necessarily better but
documentation about how -wm parameter behaves is sparse in
http://www.gdal.org/gdalwarp.html. I think I will add a link to
http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp which tries to explain it.

-Jukka Rahkonen-


From jukka.rahkonen at mmmtike.fi  Fri Dec 26 03:09:29 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 26 Dec 2014 11:09:29 +0000 (UTC)
Subject: [gdal-dev] Is user document about gdalwarp still good?
Message-ID: <loom.20141226T120438-584@post.gmane.org>

Hi,

There is a user document about gdalwarp in the wiki
http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp. However, it is a bit old
with references to GDAL 1.7.2. I would like to add a link to this document
into gdalwarp manual page http://www.gdal.org/gdalwarp.html but I wonder if
there is something to update in the wiki document first.

It would be nice is gdalwarp specialists could check the wiki doc and
comment if it contains some outdated information.

-Jukka Rahkonen-


From even.rouault at spatialys.com  Fri Dec 26 03:27:52 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 26 Dec 2014 12:27:52 +0100
Subject: [gdal-dev] What is the maximum '-wm' I can use with 64bit
	gdalwarp?
In-Reply-To: <CAHOqc_o1Ka4_RrNrvFrLKrM9PDS3EHaYE81m8EUHQoGx+mk0cw@mail.gmail.com>
References: <CAHOqc_qUSVPHemcvjzXaJ5NaW42Robes+eXfAc2Mia6n=Ac1uQ@mail.gmail.com>
	<201412241130.46205.even.rouault@spatialys.com>
	<CAHOqc_o1Ka4_RrNrvFrLKrM9PDS3EHaYE81m8EUHQoGx+mk0cw@mail.gmail.com>
Message-ID: <201412261227.52504.even.rouault@spatialys.com>

Le vendredi 26 d?cembre 2014 07:03:41, Simen Langseth a ?crit :
> Dear Even Rouault
> 
> Whether I use '-multi' or not, '-wm 1024' works, but '-wm 3024' does not
> work in my PC.

You don't give enough details so that we can understand what "does not work". 
See http://lists.osgeo.org/pipermail/gdal-dev/2014-December/040706.html as an 
example how to do a good report.

In theory, specifying big values of -wm can :
- fail if the process cannot allocate the memory
- or increase speed
- or decrease speed
- or have no impact

It shouldn't alter the result, ideally. But there are complex situations where 
bigger chunks cause coordinate transformations to be more problematic for the 
warper, as the bug I mentionned in my previous message.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Dec 26 03:42:49 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 26 Dec 2014 12:42:49 +0100
Subject: [gdal-dev] Is user document about gdalwarp still good?
In-Reply-To: <loom.20141226T120438-584@post.gmane.org>
References: <loom.20141226T120438-584@post.gmane.org>
Message-ID: <201412261242.49150.even.rouault@spatialys.com>

Le vendredi 26 d?cembre 2014 12:09:29, Jukka Rahkonen a ?crit :
> Hi,
> 
> There is a user document about gdalwarp in the wiki
> http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp. However, it is a bit old
> with references to GDAL 1.7.2. I would like to add a link to this document
> into gdalwarp manual page http://www.gdal.org/gdalwarp.html but I wonder if
> there is something to update in the wiki document first.
> 
> It would be nice is gdalwarp specialists could check the wiki doc and
> comment if it contains some outdated information.

Was mostly good. I've done some small updates.
Some behaviours slightly change/improve between versions.

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Dec 26 03:50:23 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 26 Dec 2014 12:50:23 +0100
Subject: [gdal-dev] problem projecting "Merchich" to WGS84
In-Reply-To: <CALx5Kqb7s2s2LFjR6xqx0QYU2mPKSGe8n7-xa30cqOLzDOXAKA@mail.gmail.com>
References: <CALx5Kqb7s2s2LFjR6xqx0QYU2mPKSGe8n7-xa30cqOLzDOXAKA@mail.gmail.com>
Message-ID: <201412261250.23613.even.rouault@spatialys.com>

Le jeudi 25 d?cembre 2014 11:02:49, Michael Katz - NOAA Affiliate a ?crit :
> I have a certain .tif file that I open with GDALOpen() and then call
> GDALGetProjectionRef(), which returns:
> 
> srs = GEOGCS["Merchich",DATUM["Merchich",SPHEROID["Clarke 1880
> (IGN)",6378249.2,293.4660212936265,AUTHORITY["EPSG","7011"]],AUTHORITY["EPS
> G","6261"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORI
> TY["EPSG","4261"]]
> 
> 
> I make this into a projection with:
> 
> OGRSpatialReference oSRS;
> oSRS.importFromWkt( &srs );
> char *sP = NULL;
> oSRS.exportToProj4( &sP );
> sourceProjection = pj_init_plus( sP );
> CPLFree( sP );
> 
> 
> (here, sP = "+proj=longlat +a=6378249.2 +b=6356515
> +towgs84=31,146,47,0,0,0,0 +no_defs")
> 
> I think make another projection with:
> 
> targetProjection = pj_init_plus( "+proj=latlong +datum=WGS84" );
> 
> 
> I use GDALApplyGeoTransform() to convert the top-left (0, 0) point of the
> .tif file to geo coordinates, which gives me a lat/lon value of (lon = -7,
> lat = 34).
> 
> pj_is_latlong( sourceProjection ) returns 1, which confirms that this file
> has a lat/lon projection, and the (-7, 34) seems to be correct (at least in
> the right area). (The actual numbers from my file are not exact values like
> this, so I'm rounding here, but it shouldn't matter for the purpose of this
> discussion.)
> 
> The problem is that when I call
> 
> pj_transform( sourceProjection, targetProjection, 1, 1, &lon, &lat, NULL );

Michael,

pj_transform expects radians when the input projection is geodetic (and output 
radians when the output projection is geodetic) : 
https://trac.osgeo.org/proj/wiki/ProjAPI

Instead of using directly proj.4, you could use the OSR API that will take 
care of that annoying conversion: http://gdal.org/osr_tutorial.html

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at mmmtike.fi  Fri Dec 26 06:09:23 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 26 Dec 2014 14:09:23 +0000 (UTC)
Subject: [gdal-dev] Is user document about gdalwarp still good?
References: <loom.20141226T120438-584@post.gmane.org>
	<201412261242.49150.even.rouault@spatialys.com>
Message-ID: <loom.20141226T150611-992@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

> 
> Le vendredi 26 d?cembre 2014 12:09:29, Jukka Rahkonen a ?crit :
> > Hi,
> > 
> > There is a user document about gdalwarp in the wiki
> > http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp. However, it is a bit old
> > with references to GDAL 1.7.2. I would like to add a link to this document
> > into gdalwarp manual page http://www.gdal.org/gdalwarp.html but I wonder if
> > there is something to update in the wiki document first.
> > 
> > It would be nice is gdalwarp specialists could check the wiki doc and
> > comment if it contains some outdated information.
> 
> Was mostly good. I've done some small updates.
> Some behaviours slightly change/improve between versions.


Thanks. I have to say that after browsing the sources for a good while I
have still no idea what to edit for adding section "See also" and a link to
the wiki document to gdalwarp utility page http://www.gdal.org/gdalwarp.html.

-Jukka-




From even.rouault at spatialys.com  Fri Dec 26 06:16:34 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 26 Dec 2014 15:16:34 +0100
Subject: [gdal-dev] Is user document about gdalwarp still good?
In-Reply-To: <loom.20141226T150611-992@post.gmane.org>
References: <loom.20141226T120438-584@post.gmane.org>
	<201412261242.49150.even.rouault@spatialys.com>
	<loom.20141226T150611-992@post.gmane.org>
Message-ID: <201412261516.34804.even.rouault@spatialys.com>

Le vendredi 26 d?cembre 2014 15:09:23, Jukka Rahkonen a ?crit :
> Even Rouault <even.rouault <at> spatialys.com> writes:
> > Le vendredi 26 d?cembre 2014 12:09:29, Jukka Rahkonen a ?crit :
> > > Hi,
> > > 
> > > There is a user document about gdalwarp in the wiki
> > > http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp. However, it is a bit
> > > old with references to GDAL 1.7.2. I would like to add a link to this
> > > document into gdalwarp manual page http://www.gdal.org/gdalwarp.html
> > > but I wonder if there is something to update in the wiki document
> > > first.
> > > 
> > > It would be nice is gdalwarp specialists could check the wiki doc and
> > > comment if it contains some outdated information.
> > 
> > Was mostly good. I've done some small updates.
> > Some behaviours slightly change/improve between versions.
> 
> Thanks. I have to say that after browsing the sources for a good while I
> have still no idea what to edit for adding section "See also" and a link to
> the wiki document to gdalwarp utility page
> http://www.gdal.org/gdalwarp.html.

Ah indeed, the documentation of that utility is located in the source file 
itself of gdalwarp (quite an exception) in apps/gdalwarp.cpp

Links can be done with the standard HTML <a> tag

> 
> -Jukka-
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at mmmtike.fi  Fri Dec 26 07:01:04 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 26 Dec 2014 15:01:04 +0000 (UTC)
Subject: [gdal-dev] Is user document about gdalwarp still good?
References: <loom.20141226T120438-584@post.gmane.org>
	<201412261242.49150.even.rouault@spatialys.com>
	<loom.20141226T150611-992@post.gmane.org>
	<201412261516.34804.even.rouault@spatialys.com>
Message-ID: <loom.20141226T155609-715@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:


> Ah indeed, the documentation of that utility is located in the source file 
> itself of gdalwarp (quite an exception) in apps/gdalwarp.cpp
> 
> Links can be done with the standard HTML <a> tag

Hi,

I found the documentation section from gdalwarp.cpp but adding new items
there does not make me feel comfortable so that is "wontfix" from my part.

-Jukka-


From even.rouault at spatialys.com  Fri Dec 26 08:56:04 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 26 Dec 2014 17:56:04 +0100
Subject: [gdal-dev] Is user document about gdalwarp still good?
In-Reply-To: <loom.20141226T155609-715@post.gmane.org>
References: <loom.20141226T120438-584@post.gmane.org>
	<201412261516.34804.even.rouault@spatialys.com>
	<loom.20141226T155609-715@post.gmane.org>
Message-ID: <201412261756.04707.even.rouault@spatialys.com>

Le vendredi 26 d?cembre 2014 16:01:04, Jukka Rahkonen a ?crit :
> Even Rouault <even.rouault <at> spatialys.com> writes:
> > Ah indeed, the documentation of that utility is located in the source
> > file itself of gdalwarp (quite an exception) in apps/gdalwarp.cpp
> > 
> > Links can be done with the standard HTML <a> tag
> 
> Hi,
> 
> I found the documentation section from gdalwarp.cpp but adding new items
> there does not make me feel comfortable so that is "wontfix" from my part.

No problem. I just did it.

Indeed without a dev environment under Linux, it isn't easy to check the 
correctness.
Well, in case you, or anyone, wants to try it, it would be a matter of
- having a Linux VM with a checkout of GDAL. You could probably do that from 
Windows (64 bit) with Vagrant. See https://trac.osgeo.org/gdal/wiki/Vagrant 
(I've just fixed the Vagrant setup)
- when the VM is setup, go to the root of the GDAL source tree ( cd /vagrant )
- do any change from your host filesystem
- "make man" generates manual page in the man subdirectory. Can be seen with 
for example "man man/man1/gdalwarp.1"
- "make docs" generates HTML documentation in the html subdirectory. Result 
can be seen with your host web browser.

Even

> 
> -Jukka-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Sat Dec 27 08:34:43 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 27 Dec 2014 17:34:43 +0100
Subject: [gdal-dev] [PATCH v2] Support Mercator_2SP in GeoTIFF
In-Reply-To: <1383905914.527cba7aa01ab@imp.free.fr>
References: <201311042012.56445.even.rouault@mines-paris.org>
	<1383875184-8839-1-git-send-email-tpiepho@gmail.com>
	<1383905914.527cba7aa01ab@imp.free.fr>
Message-ID: <201412271734.43267.even.rouault@spatialys.com>

Le vendredi 08 novembre 2013 11:18:34, Even Rouault a ?crit :
> Selon Trent Piepho <tpiepho at gmail.com>:
> 
> Thanks. Would you mind attaching it in a ticket in GDAL trac :
> http://trac.osgeo.org/gdal/newticket ?
> I see you've created the ticket for the corresponding libgeotiff part.
> Before applying the GDAL part, I think we should wait for Frank having
> reviewed and applied the libgeotiff part, so that we can have
> round-tripping.

Trent,

Revisiting recent libgeotiff activity, it seems that the GDAL ticket wasn't 
created (or I couldn't find it) nor the fix applied. Was close to be 
forgotten...
I've applied your patch in http://trac.osgeo.org/gdal/ticket/5791 and also did 
a complementary fix in libgeotiff.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From pratap.chelamilla at amigooptima.in  Sun Dec 28 22:12:31 2014
From: pratap.chelamilla at amigooptima.in (Pratap Chelamilla)
Date: Mon, 29 Dec 2014 11:42:31 +0530
Subject: [gdal-dev] Buffering Right and Buffering Left Using Gdal/OGR
Message-ID: <CAOv6TkZRT6WUPhiy3nZu9oXBB614FqpA5d=HmFVLfzwPqxjCyA@mail.gmail.com>

*Hi,*


*I am trying to buffer polyline to its right / left , Is there any way to
buffer right/left using GDAL/OGR. OGRGeometry *bufGeometry =
geometry->Buffer(buffer);*





*I have tried providing buffer value with positive and negative, but
unable to see any buffering around the polyline.Please provideus
solution to solve this problem. *


-- 
Regards,
Pratap.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141229/4d42cc70/attachment.html>

From bontepaarden at gmail.com  Mon Dec 29 03:05:42 2014
From: bontepaarden at gmail.com (Paul Meems)
Date: Mon, 29 Dec 2014 12:05:42 +0100
Subject: [gdal-dev] Buffering Right and Buffering Left Using Gdal/OGR
In-Reply-To: <CAOv6TkZRT6WUPhiy3nZu9oXBB614FqpA5d=HmFVLfzwPqxjCyA@mail.gmail.com>
References: <CAOv6TkZRT6WUPhiy3nZu9oXBB614FqpA5d=HmFVLfzwPqxjCyA@mail.gmail.com>
Message-ID: <CAHNf2YTbjkw7MVHxrdpH+mj5b8SQx4MQ7==aG0V__Ad+4s7kNQ@mail.gmail.com>

Hi Pratap,

You need to use BufferParameters. Then you can set SingleSided to true.

Here's some code we use in MapWinGIS:
GEOSBufferParams_create();
GEOSBufferParams_setSingleSided();
GEOSBufferWithParams();
I'm not sure if you can use the above code, I'm not a C++ developer ;)
But it should give you some pointer were to look.

Cheers,

Paul

*Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl



*The English presentations of the MapWindow GIS Conference 2014 are online.
<http://www.slideshare.net/mapwindow>*

2014-12-29 7:12 GMT+01:00 Pratap Chelamilla <
pratap.chelamilla at amigooptima.in>:

>
>
> *Hi,*
>
>
> *I am trying to buffer polyline to its right / left , Is there any way to
> buffer right/left using GDAL/OGR. OGRGeometry *bufGeometry =
> geometry->Buffer(buffer);*
>
>
>
>
>
> *I have tried providing buffer value with positive and negative, but  unable to see any buffering around the polyline.Please provideus solution to solve this problem. *
>
>
> --
> Regards,
> Pratap.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141229/34f060db/attachment.html>

From ari.jolma at gmail.com  Tue Dec 30 02:40:47 2014
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue, 30 Dec 2014 12:40:47 +0200
Subject: [gdal-dev] Buffering Right and Buffering Left Using Gdal/OGR
In-Reply-To: <CAOv6TkZRT6WUPhiy3nZu9oXBB614FqpA5d=HmFVLfzwPqxjCyA@mail.gmail.com>
References: <CAOv6TkZRT6WUPhiy3nZu9oXBB614FqpA5d=HmFVLfzwPqxjCyA@mail.gmail.com>
Message-ID: <54A2812F.7070803@gmail.com>

Dear Pratap,

You're really using GEOS with GDAL just as a middleware, so perhaps 
you'd better try GEOS or PostGIS lists. I don't think there is a simple 
solution to this problem, you might try perhaps to extend the line and 
make a polygon out of it and then do an intersection with the buffer(?).

Best regards,

Ari

29.12.2014, 08:12, Pratap Chelamilla kirjoitti:
> /Hi,
>
> /
> /I am trying to buffer polyline to its right / left , Is there any way 
> to buffer right/left using GDAL/OGR.
>
> OGRGeometry*bufGeometry=geometry->Buffer(buffer);/
>
> /I have tried providing buffer value with positive and negative, but
> unable to see any buffering around the polyline.Please provide
> us solution to solve this problem./
>
> -- 
> Regards,
> Pratap.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20141230/20ee6b68/attachment.html>

From jukka.rahkonen at mmmtike.fi  Tue Dec 30 12:24:53 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 30 Dec 2014 20:24:53 +0000 (UTC)
Subject: [gdal-dev] Buffering Right and Buffering Left Using Gdal/OGR
References: <CAOv6TkZRT6WUPhiy3nZu9oXBB614FqpA5d=HmFVLfzwPqxjCyA@mail.gmail.com>
Message-ID: <loom.20141230T202159-126@post.gmane.org>

Pratap Chelamilla <pratap.chelamilla <at> amigooptima.in> writes:

> 
> 
> Hi,
> I am trying to buffer polyline to its right / left , Is there any way to
buffer right/left using GDAL/OGR.        OGRGeometry *bufGeometry =
geometry->Buffer(buffer);
> I have tried providing buffer value with positive and negative, but 
unable to see any buffering around the polyline.Please provideus solution to
solve this problem. -- Regards,Pratap.

Hi,

I believe that if GDAL is compiled with a brand new Spatialite that contains
SingleSidedBuffer function it should be doable with SQLite SQL dialect.

I tested that this works with a Windows build from gisinternals:

ogrinfo foo.sqlite -sql "select buffer(geomfromtext('linestring
 (0 0, 1 1)'),1)"
INFO: Open of `foo.sqlite'
      using driver `SQLite' successful.

Layer name: SELECT
Geometry: Unknown (any)
Feature Count: 1
Extent: (-1.000000, -1.000000) - (2.000000, 2.000000)
Layer SRS WKT:
(unknown)
Geometry Column = buffer(geomfromtext('linestring (0 0, 1 1)'),1)
OGRFeature(SELECT):0
  POLYGON ((0.292893218813453 1.707106781186548,0.330869393641143 1.743144825477
395,0.370679608950164 1.777145961456972,0.412214747707528 1.809016994374948,0.45

This build gives an error with SingleSidedBuffer:
 no such function: SingleSidedBuffer

However, with recent Spatialite-gui I can do with success:
select singlesidedbuffer(geometryfromtext('LINESTRING (0 0, 1 1)'),1,-1)

-Jukka Rahkonen-





From jukka.rahkonen at mmmtike.fi  Wed Dec 31 14:50:33 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 31 Dec 2014 22:50:33 +0000 (UTC)
Subject: [gdal-dev] 268 tickets closed in December
Message-ID: <loom.20141231T162104-450@post.gmane.org>

Hi,

An unofficial ticket closing rally in December 2014 was quite a success with
about 268 closed tickets. None of those were closed only because they were
so old and still not fixed. Thanks to everybody involved and especially to Even.

-Jukka Rahkonen-


