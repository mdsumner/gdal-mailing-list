From ahmettemiz88 at gmail.com  Thu Apr  1 09:33:42 2021
From: ahmettemiz88 at gmail.com (Ahmet Temiz)
Date: Thu, 1 Apr 2021 19:33:42 +0300
Subject: [gdal-dev] Hi,
Message-ID: <CAJKO1YuupCiK0xoFnPJdx4VF0i=S1WP3pjy-HGoqO5v_AkaZkg@mail.gmail.com>

How can I create a mask using C++ GDAL_API?
regards




-- 
Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Deprem  Dairesi Ba?kanl???


________________________

Ahmet Temiz
Geological Eng.

Disaster and Emergency Management
of Presidency
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210401/8a33399f/attachment-0001.html>

From andrew.bell.ia at gmail.com  Thu Apr  1 10:08:56 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 1 Apr 2021 13:08:56 -0400
Subject: [gdal-dev] Hi,
In-Reply-To: <CAJKO1YuupCiK0xoFnPJdx4VF0i=S1WP3pjy-HGoqO5v_AkaZkg@mail.gmail.com>
References: <CAJKO1YuupCiK0xoFnPJdx4VF0i=S1WP3pjy-HGoqO5v_AkaZkg@mail.gmail.com>
Message-ID: <CACJ51z2-OLx3E242f292JNQJrw2eiAtrahbOfVGk207+ViB-yQ@mail.gmail.com>

On Thu, Apr 1, 2021 at 12:34 PM Ahmet Temiz <ahmettemiz88 at gmail.com> wrote:

> How can I create a mask using C++ GDAL_API?
> regards
>

It's not clear what you're asking, but you might start here:

https://gdal.org/api/gdalrasterband_cpp.html#classGDALRasterBand_1a021cde274591f3e44c1fadea6914d0e8

--
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210401/1534ba36/attachment.html>

From paul.malm at lfv.se  Tue Apr  6 01:41:33 2021
From: paul.malm at lfv.se (paul.malm at lfv.se)
Date: Tue, 6 Apr 2021 08:41:33 +0000
Subject: [gdal-dev] Shall I continue trying to get gdal java bindings to
 work?
Message-ID: <2d74e3db3e2146f3a64876036c1fc885@lfv.se>

Hi,
is it possible to get Gdal java bindings to work in Windows 10? If not to whom do I report the error?
I've downloaded release-1928-x64-gdal-3-2-1-mapserver-7-6-2.zip
and can't get gdalalljni.dll to load. I've tried to get help from here and from the them creating the zip -file. But without any luck.
I just want to know if it is possible at all, since I've tried to get it to work for four weeks now.
Has anyone at all got gdalalljni.dll to load?

Kind regards,
Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210406/9e4530e6/attachment.html>

From even.rouault at spatialys.com  Tue Apr  6 05:43:25 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 6 Apr 2021 14:43:25 +0200
Subject: [gdal-dev] Does OGR support GeoPackage enums in write mode (or
 at all?)
In-Reply-To: <CA+nxMTtX5rpUdS+BSV7Ethwd4Vk0y9R6pDoauw5eGLRoZwrRxA@mail.gmail.com>
References: <CA+nxMTtX5rpUdS+BSV7Ethwd4Vk0y9R6pDoauw5eGLRoZwrRxA@mail.gmail.com>
Message-ID: <60911369-268d-fe70-dd2d-f5ec7c2d7c57@spatialys.com>

Hi,

as as follow-up, the mentioned below capacity is now in GDAL master per 
https://github.com/OSGeo/gdal/pull/3638

This is implemented curretly for FileGeodatabase (reading-only, could be 
extended on the write side in the FileGDB) and GeoPackage (read/write).

I guess this could be extended to PostgreSQL too by storing the enums in 
an auxiliary table linked through a foreign key.

Even

Le 15/04/2020 ? 11:05, Andrea Aime a ?crit?:
> Hi,
> I'm trying to dump a large PostGIS database into a GeoPackage. In the 
> original?database some columns
> are strings, but could be more efficiently represented as enums, as 
> they have a small set of values.
>
> GeoPackage has a native notion of enums, check the spec and search for 
> "table 27" for an example:
> http://www.geopackage.org/spec/ <http://www.geopackage.org/spec/>
>
> However I cannot find mention of them in the GPKG driver documentation:
> https://gdal.org/drivers/vector/gpkg.html 
> <https://gdal.org/drivers/vector/gpkg.html>
> I quickly?grepped into the geopackage sources for "enum", could not 
> find it in the geopackage sources.
>
> Also looked at the "mapFieldType" ogr2ogr parameter?and at OGR SQL, 
> did not find anything there either.
>
> So I'm wondering, is there direct?support for enum fields? Any way to 
> map a string column to enum during
> a ogr2ogr call?
>
> Best Regards,
>
> Andrea Aime== GeoServer Professional Services from the experts! Visit 
> http://goo.gl/it488V <http://goo.gl/it488V> for more information. == 
> Ing. Andrea Aime @geowolf Technical Lead GeoSolutions S.A.S. Via di 
> Montramito 3/A 55054 Massarosa (LU) phone: +39 0584 962313 fax: +39 
> 0584 1660272 mob: +39 339 8844549 http://www.geo-solutions.it 
> <http://www.geo-solutions.it> http://twitter.com/geosolutions_it 
> <http://twitter.com/geosolutions_it> 
> ------------------------------------------------------- /Con 
> riferimento alla normativa sul trattamento dei dati personali (Reg. UE 
> 2016/679 - Regolamento generale sulla protezione dei dati ?GDPR?), si 
> precisa che ogni circostanza inerente alla presente email (il suo 
> contenuto, gli eventuali allegati, etc.) ? un dato la cui conoscenza ? 
> riservata al/i solo/i destinatario/i indicati dallo scrivente. Se il 
> messaggio Le ? giunto per errore, ? tenuta/o a cancellarlo, ogni altra 
> operazione ? illecita. Le sarei comunque grato se potesse darmene 
> notizia. This email is intended only for the person or entity to which 
> it is addressed and may contain information that is privileged, 
> confidential or otherwise protected from disclosure. We remind that - 
> as provided by European Regulation 2016/679 ?GDPR? - copying, 
> dissemination or use of this e-mail or the information herein by 
> anyone other than the intended recipient is prohibited. If you have 
> received this email by mistake, please notify us immediately by 
> telephone or e-mail./
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210406/66e03069/attachment.html>

From andrea.aime at geo-solutions.it  Tue Apr  6 05:50:34 2021
From: andrea.aime at geo-solutions.it (Andrea Aime)
Date: Tue, 6 Apr 2021 14:50:34 +0200
Subject: [gdal-dev] Does OGR support GeoPackage enums in write mode (or
 at all?)
In-Reply-To: <60911369-268d-fe70-dd2d-f5ec7c2d7c57@spatialys.com>
References: <CA+nxMTtX5rpUdS+BSV7Ethwd4Vk0y9R6pDoauw5eGLRoZwrRxA@mail.gmail.com>
 <60911369-268d-fe70-dd2d-f5ec7c2d7c57@spatialys.com>
Message-ID: <CA+nxMTtTab+uRLcDnC0g5NpMQCXso7zuYorZu4GERumim2WocA@mail.gmail.com>

Nice! Thanks!

Cheers
Andrea

On Tue, Apr 6, 2021 at 2:43 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> as as follow-up, the mentioned below capacity is now in GDAL master per
> https://github.com/OSGeo/gdal/pull/3638
>
> This is implemented curretly for FileGeodatabase (reading-only, could be
> extended on the write side in the FileGDB) and GeoPackage (read/write).
>
> I guess this could be extended to PostgreSQL too by storing the enums in
> an auxiliary table linked through a foreign key.
>
> Even
> Le 15/04/2020 ? 11:05, Andrea Aime a ?crit :
>
> Hi,
> I'm trying to dump a large PostGIS database into a GeoPackage. In the
> original database some columns
> are strings, but could be more efficiently represented as enums, as they
> have a small set of values.
>
> GeoPackage has a native notion of enums, check the spec and search for
> "table 27" for an example:
> http://www.geopackage.org/spec/
>
> However I cannot find mention of them in the GPKG driver documentation:
> https://gdal.org/drivers/vector/gpkg.html
> I quickly grepped into the geopackage sources for "enum", could not find
> it in the geopackage sources.
>
> Also looked at the "mapFieldType" ogr2ogr parameter and at OGR SQL, did
> not find anything there either.
>
> So I'm wondering, is there direct support for enum fields? Any way to map
> a string column to enum during
> a ogr2ogr call?
>
> Best Regards,
>
> Andrea Aime == GeoServer Professional Services from the experts! Visit
> http://goo.gl/it488V for more information. == Ing. Andrea Aime @geowolf
> Technical Lead GeoSolutions S.A.S. Via di Montramito 3/A 55054 Massarosa
> (LU) phone: +39 0584 962313 fax: +39 0584 1660272 mob: +39 339 8844549
> http://www.geo-solutions.it http://twitter.com/geosolutions_it
> ------------------------------------------------------- *Con riferimento
> alla normativa sul trattamento dei dati personali (Reg. UE 2016/679 -
> Regolamento generale sulla protezione dei dati ?GDPR?), si precisa che ogni
> circostanza inerente alla presente email (il suo contenuto, gli eventuali
> allegati, etc.) ? un dato la cui conoscenza ? riservata al/i solo/i
> destinatario/i indicati dallo scrivente. Se il messaggio Le ? giunto per
> errore, ? tenuta/o a cancellarlo, ogni altra operazione ? illecita. Le
> sarei comunque grato se potesse darmene notizia. This email is intended
> only for the person or entity to which it is addressed and may contain
> information that is privileged, confidential or otherwise protected from
> disclosure. We remind that - as provided by European Regulation 2016/679
> ?GDPR? - copying, dissemination or use of this e-mail or the information
> herein by anyone other than the intended recipient is prohibited. If you
> have received this email by mistake, please notify us immediately by
> telephone or e-mail.*
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>

-- 

Regards, Andrea Aime

== GeoServer Professional Services from the experts! Visit
http://goo.gl/it488V for more information. == Ing. Andrea Aime @geowolf
Technical Lead GeoSolutions S.A.S. Via di Montramito 3/A 55054 Massarosa
(LU) phone: +39 0584 962313 fax: +39 0584 1660272 mob: +39 339 8844549
http://www.geo-solutions.it http://twitter.com/geosolutions_it
------------------------------------------------------- *Con riferimento
alla normativa sul trattamento dei dati personali (Reg. UE 2016/679 -
Regolamento generale sulla protezione dei dati ?GDPR?), si precisa che ogni
circostanza inerente alla presente email (il suo contenuto, gli eventuali
allegati, etc.) ? un dato la cui conoscenza ? riservata al/i solo/i
destinatario/i indicati dallo scrivente. Se il messaggio Le ? giunto per
errore, ? tenuta/o a cancellarlo, ogni altra operazione ? illecita. Le
sarei comunque grato se potesse darmene notizia. This email is intended
only for the person or entity to which it is addressed and may contain
information that is privileged, confidential or otherwise protected from
disclosure. We remind that - as provided by European Regulation 2016/679
?GDPR? - copying, dissemination or use of this e-mail or the information
herein by anyone other than the intended recipient is prohibited. If you
have received this email by mistake, please notify us immediately by
telephone or e-mail.*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210406/24d96ee9/attachment-0001.html>

From ni_hao88 at hotmail.com  Tue Apr  6 10:35:10 2021
From: ni_hao88 at hotmail.com (ni hao)
Date: Tue, 6 Apr 2021 17:35:10 +0000
Subject: [gdal-dev] NITF Int16 image size limit
Message-ID: <DM5PR02MB386273411D974BB984C1364CF1769@DM5PR02MB3862.namprd02.prod.outlook.com>

Hi list,


I encountered problem ingesting a large NITF Int16 image with GDAL:

NITF 2-band image in Int16 format, 4.3 GB. It has 19690 lines x 61180 pixels.   The upper 90% of the image looks fine.   But the last 2000 lines fail to load by GDAL.   That coincides with the 32-bit boundary.


Note that another larger NITF in 32-bit float, 10.1 GB file loads fine.


Is there a hard limit on NITF Int16 file size?


Thanks,
Shawn

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210406/fd5c7a3a/attachment.html>

From even.rouault at spatialys.com  Tue Apr  6 10:46:13 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 6 Apr 2021 19:46:13 +0200
Subject: [gdal-dev] NITF Int16 image size limit
In-Reply-To: <DM5PR02MB386273411D974BB984C1364CF1769@DM5PR02MB3862.namprd02.prod.outlook.com>
References: <DM5PR02MB386273411D974BB984C1364CF1769@DM5PR02MB3862.namprd02.prod.outlook.com>
Message-ID: <216795e0-7c45-a1ce-75f7-3f5a0d58c0de@spatialys.com>

Shawn,

This sounds more like a unwanted integer overflow somewhere in the NITF 
driver.? Is this with a recent GDAL ? If so, please file a bug at 
https://github.com/OSGeo/gdal/issues/new with all the details needed. A 
link to the dataset would be ideal, but otherwise please provide in the 
ticket description the output of "gdalinfo your.nitf"

Even

Le 06/04/2021 ? 19:35, ni hao a ?crit?:
>
> Hi list,
>
>
> I encountered problem ingesting a large?NITF Int16 image with GDAL:
>
> NITF 2-band image in Int16 format, 4.3 GB. It has 19690 lines x 61180 
> pixels.? ?The upper 90% of the image looks fine.? ?But the last 2000 
> lines fail to load by GDAL.? ?That coincides with the 32-bit boundary.
>
>
> Note that another?larger NITF?in 32-bit float, 10.1 GB file loads?fine.
>
>
> Is there a hard limit on NITF Int16 file?size?
>
> Thanks,
> Shawn
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210406/46f86c0b/attachment.html>

From even.rouault at spatialys.com  Tue Apr  6 11:00:06 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 6 Apr 2021 20:00:06 +0200
Subject: [gdal-dev] NITF Int16 image size limit
In-Reply-To: <DM5PR02MB3862B1E9DED38A11D9E1A4B2F1769@DM5PR02MB3862.namprd02.prod.outlook.com>
References: <DM5PR02MB386273411D974BB984C1364CF1769@DM5PR02MB3862.namprd02.prod.outlook.com>
 <216795e0-7c45-a1ce-75f7-3f5a0d58c0de@spatialys.com>
 <DM5PR02MB3862B1E9DED38A11D9E1A4B2F1769@DM5PR02MB3862.namprd02.prod.outlook.com>
Message-ID: <dfc9881f-ad6a-a1da-c92b-43d90d436923@spatialys.com>

Please keep the mailing list copied (I re-added it)

This is not the most recent one (3.2.2 is), but skimming quickly through 
release notes, I can't see anything directly related, so it might still 
be current with the recent versions. Altough I see that a bunch of 
"avoid unsigned integer overflow" type of fixes have been done since 
2.4, so some of them might have accidentally fixed the issue.

If you can try with the latest version ( Docker images mentioned at 
https://github.com/OSGeo/gdal/tree/master/gdal/docker, Conda, etc .), 
that could be interesting.


Le 06/04/2021 ? 19:51, ni hao a ?crit?:
> Hi Even,
>
> The version is 2.4.4.
> ------------------------------------------------------------------------
> *From:* Even Rouault <even.rouault at spatialys.com>
> *Sent:* April 6, 2021 2:46 PM
> *To:* ni hao <ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org 
> <gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] NITF Int16 image size limit
>
> Shawn,
>
> This sounds more like a unwanted integer overflow somewhere in the 
> NITF driver.? Is this with a recent GDAL ? If so, please file a bug at 
> https://github.com/OSGeo/gdal/issues/new 
> <https://github.com/OSGeo/gdal/issues/new> with all the details 
> needed. A link to the dataset would be ideal, but otherwise please 
> provide in the ticket description the output of "gdalinfo your.nitf"
>
> Even
>
> Le 06/04/2021 ? 19:35, ni hao a ?crit?:
>>
>> Hi list,
>>
>>
>> I encountered problem ingesting a large?NITF Int16 image with GDAL:
>>
>> NITF 2-band image in Int16 format, 4.3 GB. It has 19690 lines x 61180 
>> pixels.? ?The upper 90% of the image looks fine.? ?But the last 2000 
>> lines fail to load by GDAL. ?That coincides with the 32-bit boundary.
>>
>>
>> Note that another?larger NITF?in 32-bit float, 10.1 GB file loads?fine.
>>
>>
>> Is there a hard limit on NITF Int16 file?size?
>>
>> Thanks,
>> Shawn
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev  <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
> -- 
> http://www.spatialys.com  <http://www.spatialys.com>
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210406/7ac41fd1/attachment.html>

From j1 at jimenezshaw.com  Tue Apr  6 13:11:26 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Tue, 6 Apr 2021 22:11:26 +0200
Subject: [gdal-dev] Detect alpha or nodata in tiff
Message-ID: <CADRrdKv_LjtBKhJmVEbd=JaRiQCpiZDRgUg2X=k=FggxbNWyhQ@mail.gmail.com>

Hi all

I am running "gdal2tiles" over input GeoTIFF from the command line.
Some times those geotiff may have an alpha band (usually and RGBA uint8
image), or nodata value (usually a float32 image), or sometimes none of
them. In the last case I will add the option "-a 0,0,0" or "-a 0" (yes,
black is the new transparent), but on the other two cases I shouldn't add
that option.

Is there any efficient way via the command line to detect if a file has
some kind of transparency mask, apart for parsing the output of gdalinfo?

Thanks
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210406/ee516800/attachment.html>

From j1 at jimenezshaw.com  Tue Apr  6 13:40:38 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Tue, 6 Apr 2021 22:40:38 +0200
Subject: [gdal-dev] COG + javascript + openlayers
Message-ID: <CADRrdKsKo++F4WVMC-jYri3jzg+suMNZohvmV8CpEL5FsdFL+Q@mail.gmail.com>

Hi

While I was reading about COG format, I thought it was great to replace
"gdal2tiles" if the COG was properly generated (I mean, using the option
TILING_SCHEME=GoogleMapsCompatible , and maybe something else I miss. I am
generating it, so I can optimize that).
Then I was expecting that geotiff.js (or any other client js library) will
be able to do the proper RANGE request to produce the tiling that libraries
like openlayers of leaflet is expecting. Yes, in Web Mercator projection
with aligned tiles, so no transformation is needed.

My initial target is just for RGBA uint8 images... plain vanilla. Storing
the COG file in S3, without any proxy in between doing any conversion. Just
relying on the RANGE request to get the needed area. My initial idea is to
keep the openlayers/leaflet 256x256 tiles. This allows parallel requests to
the server, and is very fast (and I do not have to refactor all my js
code). But maybe there is a better/faster solution (again, with S3 direct
access, no proxy in the server side. That would require deploying the
"proxy" on every geographical region).

However I have not found any proper solution (my search-fu is not the best,
to be honest). I would like something that performs *at least* as fast as
the tiles produced by gdal2tiles.

Do you know any solution/example?

Thanks
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210406/dad47029/attachment.html>

From bradh at frogmouth.net  Tue Apr  6 16:17:26 2021
From: bradh at frogmouth.net (bradh at frogmouth.net)
Date: Wed, 07 Apr 2021 09:17:26 +1000
Subject: [gdal-dev] NITF Int16 image size limit
In-Reply-To: <dfc9881f-ad6a-a1da-c92b-43d90d436923@spatialys.com>
Message-ID: <64b23631-9c1c-450a-b01d-94ee9c29f7f7@email.android.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/3425ca65/attachment.html>

From ni_hao88 at hotmail.com  Tue Apr  6 17:09:41 2021
From: ni_hao88 at hotmail.com (ni hao)
Date: Wed, 7 Apr 2021 00:09:41 +0000
Subject: [gdal-dev] NITF Int16 image size limit
In-Reply-To: <64b23631-9c1c-450a-b01d-94ee9c29f7f7@email.android.com>
References: <dfc9881f-ad6a-a1da-c92b-43d90d436923@spatialys.com>,
 <64b23631-9c1c-450a-b01d-94ee9c29f7f7@email.android.com>
Message-ID: <DM5PR02MB3862B203427D3340A0D439C7F1759@DM5PR02MB3862.namprd02.prod.outlook.com>

gdalinfo output i:
Driver: NITF/National Imagery Transmission Format
Files: ##CH_CV_GRD\imagery\12499.ntf
Size is 61180, 19694
Coordinate System is `'
GCP Projection =
GEOGCS["WGS 84",   ... ]
Band 1 Block=1024x1024 Type=UInt16, ColorInterp=Gray
Band 2 Block=1024x1024 Type=UInt16, ColorInterp=Gray

Also I am sure it is the UInt16 overflow, as the message is:
ERROR 3: Unable to read 4194302 byte block from 4324329780
and 2**32 = 4294967296

________________________________
From: bradh at frogmouth.net <bradh at frogmouth.net>
Sent: April 6, 2021 8:17 PM
To: Even Rouault <even.rouault at spatialys.com>; ni hao <ni_hao88 at hotmail.com>
Cc: gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] NITF Int16 image size limit

Also if you can show the headers (e.g. from gdalinfo), that might provide indication of exactly which value is the issue.

Brad

On 7 Apr. 2021 04:00, Even Rouault <even.rouault at spatialys.com> wrote:

Please keep the mailing list copied (I re-added it)

This is not the most recent one (3.2.2 is), but skimming quickly through release notes, I can't see anything directly related, so it might still be current with the recent versions. Altough I see that a bunch of "avoid unsigned integer overflow" type of fixes have been done since 2.4, so some of them might have accidentally fixed the issue.

If you can try with the latest version ( Docker images mentioned at https://github.com/OSGeo/gdal/tree/master/gdal/docker, Conda, etc .), that could be interesting.


Le 06/04/2021 ? 19:51, ni hao a ?crit :
Hi Even,

The version is 2.4.4.
________________________________
From: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>
Sent: April 6, 2021 2:46 PM
To: ni hao <ni_hao88 at hotmail.com><mailto:ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org> <gdal-dev at lists.osgeo.org><mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] NITF Int16 image size limit


Shawn,

This sounds more like a unwanted integer overflow somewhere in the NITF driver.  Is this with a recent GDAL ? If so, please file a bug at https://github.com/OSGeo/gdal/issues/new with all the details needed. A link to the dataset would be ideal, but otherwise please provide in the ticket description the output of "gdalinfo your.nitf"

Even

Le 06/04/2021 ? 19:35, ni hao a ?crit :

Hi list,


I encountered problem ingesting a large NITF Int16 image with GDAL:

NITF 2-band image in Int16 format, 4.3 GB. It has 19690 lines x 61180 pixels.   The upper 90% of the image looks fine.   But the last 2000 lines fail to load by GDAL.   That coincides with the 32-bit boundary.


Note that another larger NITF in 32-bit float, 10.1 GB file loads fine.


Is there a hard limit on NITF Int16 file size?


Thanks,
Shawn




_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.

--
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/b44911c9/attachment-0001.html>

From bradh at frogmouth.net  Tue Apr  6 17:51:52 2021
From: bradh at frogmouth.net (bradh at frogmouth.net)
Date: Wed, 07 Apr 2021 10:51:52 +1000
Subject: [gdal-dev] NITF Int16 image size limit
In-Reply-To: <DM5PR02MB3862B203427D3340A0D439C7F1759@DM5PR02MB3862.namprd02.prod.outlook.com>
Message-ID: <20961f18-d691-4c62-8f14-38b390a5af43@email.android.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/bbb47a4c/attachment.html>

From paul.malm at lfv.se  Tue Apr  6 22:17:15 2021
From: paul.malm at lfv.se (paul.malm at lfv.se)
Date: Wed, 7 Apr 2021 05:17:15 +0000
Subject: [gdal-dev] Shall I continue trying to get gdal java bindings to
 work?
Message-ID: <ebe702db9d934a82b73aeff32b248ec0@lfv.se>

When I copy ALL the dll-files in gdal\bin (geos.dll, geos_c.dll etc.) to my java-jre\bin folder (where I also copied the gdalalljni.dll) it seems to work. Couldn't this be added in the installation instructions some were?

Kind regards,
Paul


Fr?n: Malm, Paul (Operations AIM)
Skickat: den 6 april 2021 10:42
Till: 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org>
?mne: Shall I continue trying to get gdal java bindings to work?

Hi,
is it possible to get Gdal java bindings to work in Windows 10? If not to whom do I report the error?
I've downloaded release-1928-x64-gdal-3-2-1-mapserver-7-6-2.zip
and can't get gdalalljni.dll to load. I've tried to get help from here and from the them creating the zip -file. But without any luck.
I just want to know if it is possible at all, since I've tried to get it to work for four weeks now.
Has anyone at all got gdalalljni.dll to load?

Kind regards,
Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/0427ac0a/attachment.html>

From paul.malm at lfv.se  Tue Apr  6 22:18:55 2021
From: paul.malm at lfv.se (paul.malm at lfv.se)
Date: Wed, 7 Apr 2021 05:18:55 +0000
Subject: [gdal-dev] Gdal Java
References: <23683a0b2f7b48f9bb2c8b160fcefd2f@lfv.se>
 <AM6PR06MB4549146EB226380D8DFA008BED639@AM6PR06MB4549.eurprd06.prod.outlook.com>
 <09fd12c3f9b943a3af3fd44c373f37e8@lfv.se>
 <1617190143707-0.post@n6.nabble.com> 
Message-ID: <c9e55d8713be4f21b47ab13e9998a52e@lfv.se>

When I copy ALL the dll-files in gdal\bin (geos.dll, geos_c.dll etc.) to my java-jre\bin folder (where I also copied the gdalalljni.dll) it seems to work. Couldn?t this be added in the installation instructions some were?

Kind regards,
Paul

-----Ursprungligt meddelande-----
Fr?n: Malm, Paul (Operations AIM) 
Skickat: den 31 mars 2021 14:48
Till: 'jratike80' <jukka.rahkonen at maanmittauslaitos.fi>
?mne: SV: [gdal-dev] Gdal Java

Thanks for the tips, I've now sent a mail to GeoTools.
/Paul

-----Ursprungligt meddelande-----
Fr?n: gdal-dev <gdal-dev-bounces at lists.osgeo.org> F?r jratike80
Skickat: den 31 mars 2021 13:29
Till: gdal-dev at lists.osgeo.org
?mne: Re: [gdal-dev] Gdal Java

Klicka bara p  l nkar och  ppna bilagor om du litar p  avs ndaren och vet att inneh llet  r s kert.
Hi,

Perhaps you could ask from the Geotools/Geoserver teams how they manage to get their GDAL plugin https://docs.geotools.org/stable/userguide/library/coverage/imageio.html
https://docs.geoserver.org/stable/en/user/data/raster/gdal.html to work.

-Jukka Rahkonen-


paul.malm wrote
> Hi,
> further additional information.
> 
> I'm using
> Windows 11 64-bit with x64 based processor
> PROCESSOR_ARCHITECTURE=AMD64
> PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 158 Stepping 13, 
> GenuineIntel
> PROCESSOR_LEVEL=6
> The Java I'm using is: OpenJDK's 8u262-b1, x86 64bit JRE.
> /Paul
> 
> 
> Fr?n: Malm, Paul (Operations AIM)
> Skickat: den 31 mars 2021 10:50
> Till: 'Stefan Moebius' &lt;

> Stefan.Moebius@

> &gt;; '

> gdal-dev at .osgeo

> ' &lt;

> gdal-dev at .osgeo

> &gt;
> ?mne: SV: Gdal Java
> 
> Hi, additional information.
> All DLL-files in Dependency Walker under the tree of GDALALLJNI.dll 
> that are placed in C:\program 
> files\openjdk\jdk-8.0.262.10-hotspot\jre\bin\
> are marked with a red "frame" icon.
> /Paul
> 
> Fr?n: Malm, Paul (Operations AIM)
> Skickat: den 31 mars 2021 10:00
> Till: 'Stefan Moebius' &lt;

> Stefan.Moebius@

> &gt;; '

> gdal-dev at .osgeo

> ' &lt;

> gdal-dev at .osgeo

> &gt;
> ?mne: SV: Gdal Java
> 
> Hi,
> I've installed dependency Walker 22_x64.
> I don't know how to use it, but when I load gdalalljni.dll I get the 
> following errorcodes:
> Error: At least one required implicit or forwarded dependency was not 
> found.
> Error: At least one module has an unresolved import due to a missing 
> export function in an implicitly dependent module.
> Error: Modules with different CPU types were found.
> Error: A circular dependency was detected.
> Warning: At least one delay-load dependency module was not found.
> Warning: At least one module has an unresolved import due to a missing 
> export function in a delay-load dependent module.
> 
> I can also see that a lot of DLL-files are not found e.g.
> EXT-MS-WINDOWSCORE-DEVICEINFO-L1-1-0.DLL...
> 
> In the module window of dependency walker I can see that there is 2 
> different CPU types, the DLL-files with x86 are marked red while the
> x64 are written in black (CPU-column).
> E.g. c:\program
> files\openjdk\jdk-8.0.262.10-hotspot\jre\bin\API-MS-WIN-CORE-DEBUG-L1-
> 1-0.DLL are marked with red text x86 in the CPU column.
> 
> In the "tree" under GDALALLJNI.DLL some DLLs are marked with a red 
> icon, e.g API-MS-WIN-CRT-HEAP-L1-1-0.DLL.
> When I search for that DLL-file in my computer it is found under 
> several libraries e.g C:\Windows\System32\downlevel, C:\Program Files 
> (x86)\Citrix\ICA Client\Receiver, C:\Program 
> Files\OpenJDK\jdk-8.0.262.10-hotspot\jre\bin\bin
> and a lot of other places...
> 
> My JAVA_HOME points to C:\Program
> Files\OpenJDK\jdk-8.0.262.10-hotspot\jre\bin. It is a x64 Java version.
> My OS is windows10 with a x64 based processor.
> 
> Can this be any help finding the solution on my run time error:
> Native library load failed.
> java.lang.UnsatisfiedLinkError: C:\Program
> Files\OpenJDK\jdk-8.0.262.10-hotspot\jre\bin\gdalalljni.dll: The 
> specified procedure cannot be found
> 
> Kind regards,
> Paul
> Fr?n: gdal-dev &lt;

> gdal-dev-bounces at .osgeo

> &gt; F?r Stefan Moebius via gdal-dev
> Skickat: den 24 mars 2021 09:42
> Till: 

> gdal-dev at .osgeo

> ?mne: Re: [gdal-dev] Gdal Java
> 
> 
> Klicka bara p? l?nkar och ?ppna bilagor om du litar p? avs?ndaren och 
> vet att inneh?llet ?r s?kert.
> Hi Paul,
> I find the binaries provided at
> https://url11.mailanyone.net/v1/?m=1lOzCg-0001ww-4L&i=57e1b682&c=9fNL_
> OAF8vCIgrjZs9aaEB2UNNImM6gI8GCzoqAnKNimVVkylHGA07tBJv6IOWRHGmUKKXljtta
> lb7-9fSKoJRXHVHgZZReNymWKG_G2PNsxEfzkrdsDLJ5OCUF6GOAknKU4asXym3XgQgeOG
> IjYq6tb5x-KYwQMeTZwonVcJUyaCE6P24h0b-tnGHxFOYo8tTg_FMbjprD8DaPQsY7871S
> A4Agmh43T_JQ3BjKFdtcr_ELXZdLivAPNafJvPSW6
> the easiest to use. If you click on one build, e.g.
> release-1928-x64-gdal-3-2-1-mapserver-7-6-2, you get a number of 
> download options, including several installers. If you use the first 
> one (Compiled binaries in a single .zip package), you get an archive 
> which you need to extract, and which contains a folder bin\gdal\java.
> In there you find gdal.jar and gdalalljni.dll. Now in order to use 
> this, you need to have
> 
>   *   Gdal.jar in your Java Classpath
>   *   The extracted bin\gdal\java and bin folders in your Path (in
> Eclipse: Run Configuration -> Environment -> Select -> Path, then edit 
> the value, or set in the system) If that doesn't work, you'll need to 
> provide some more detailed description of what issue you are facing.
> 
> --
> Stefan
> 
> From: gdal-dev &lt;

> gdal-dev-bounces at .osgeo

> &gt; On Behalf Of

> paul.malm@

> Sent: Dienstag, 23. M?rz 2021 08:26
> To: 

> gdal-dev at .osgeo

> Subject: [gdal-dev] Gdal Java
> 
> Hi list,
> is there someone out there who has succeeded in installing Gdal 
> Javabindings in Windows?
> I've tried for some weeks now :( and I can't find very much 
> information how to do it I Windows.
> gdalalljni.dll is not found for starters (Gdal 3.2.0) but it is there, 
> as installed by the installation process.
> I've been asking around on internet, but without any luck.
> If these is someone who knows how to do it in Windows with Eclipse, it 
> would be much appreciated to get some info...
> It would be nice to have a bullet list (for dummies), from where to 
> get the correct download files, installation, setting environment, 
> what is needed to be set in Eclipse etc. I don't have any experience 
> with javabindings or C++...
> 
> Kind regards,
> Paul
> This email and the information contained herein is proprietary and 
> confidential and subject to the Amdocs Email Terms of Service, which 
> you may review at 
> https://www.amdocs.com/about/email-terms-of-service&lt;https://url11.m
> ailanyone.net/v1/?m=1lOzCg-0001ww-4L&amp;i=57e1b682&amp;c=5keNkrDjrvzw
> cRXVWHrZdauN_ulzs2IpwrQsOrckW4xafxj1rhUsAUZgKUKb10efCNBee9dHzyBWSkhO6c
> jwaclASZKpkYv1WRfY9vsqTOkHQyXS0dczjdTZu3MRIofEcvljG4mwYuABAqCuSItDekmh
> YOUgTI8aLLcAwPM7y1M1vZ2hLYnNkVKEKopxHH8RC1eRVKCFSdNWtP4Q41XCZZJPHH_4RM
> ryRb-6kS1GOYaP0Z02s9CcGMNfK1Rhoem-ADgDfyNZoG7HlIiRc0OQ7w&gt;
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From jukka.rahkonen at maanmittauslaitos.fi  Tue Apr  6 23:08:24 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Tue, 6 Apr 2021 23:08:24 -0700 (MST)
Subject: [gdal-dev] Gdal Java
In-Reply-To: <23683a0b2f7b48f9bb2c8b160fcefd2f@lfv.se>
References: <23683a0b2f7b48f9bb2c8b160fcefd2f@lfv.se>
Message-ID: <1617775704717-0.post@n6.nabble.com>

Hi,

>From this resolved issue I can see that somebody has had success a couple of
years ago https://github.com/OSGeo/gdal/issues/1333. The bug report is
extraordinary good with build instructions and test program.

-Jukka Rahkonen-


paul.malm wrote
> Hi list,
> is there someone out there who has succeeded in installing Gdal
> Javabindings in Windows?
> I've tried for some weeks now :( and I can't find very much information
> how to do it I Windows.
> gdalalljni.dll is not found for starters (Gdal 3.2.0) but it is there, as
> installed by the installation process.
> I've been asking around on internet, but without any luck.
> If these is someone who knows how to do it in Windows with Eclipse, it
> would be much appreciated to get some info...
> It would be nice to have a bullet list (for dummies), from where to get
> the correct download files, installation, setting environment, what is
> needed to be set in Eclipse etc. I don't have any experience with
> javabindings or C++...
> 
> Kind regards,
> Paul
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Wed Apr  7 01:23:47 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 7 Apr 2021 10:23:47 +0200
Subject: [gdal-dev] NITF Int16 image size limit
In-Reply-To: <DM5PR02MB3862B203427D3340A0D439C7F1759@DM5PR02MB3862.namprd02.prod.outlook.com>
References: <dfc9881f-ad6a-a1da-c92b-43d90d436923@spatialys.com>
 <64b23631-9c1c-450a-b01d-94ee9c29f7f7@email.android.com>
 <DM5PR02MB3862B203427D3340A0D439C7F1759@DM5PR02MB3862.namprd02.prod.outlook.com>
Message-ID: <aec9676b-638c-719d-3bb9-ad891fa19999@spatialys.com>

Hi,

Actually the error message doesn't look like there's a uint32 overflow 
as it displays a file offset that is beyond the 4 GB limit.

Did you check that your file size is at least 4324329780 + 4194302 = 4 
328 524 082 bytes ? I guess it is not, or then there's some mysterious 
error in the low level GDAL I/O layer.

So if your file is smaller than that,

- either it is corrupted (would be good if you could check that with a 
non-GDAL implementation)

- or there's a bug in the NITF driver in how it computes offsets. Could 
you report the values of the NITF_ABPP, NITF_IC and NITF_IMODE metadata 
reported by gdalinfo ?

Even

Le 07/04/2021 ? 02:09, ni hao a ?crit?:
> gdalinfo output i:
> Driver: NITF/National Imagery Transmission Format
> Files: ##CH_CV_GRD\imagery\12499.ntf
> Size is 61180, 19694
> Coordinate System is `'
> GCP Projection =
> GEOGCS["WGS 84",? ?... ]
> Band 1 Block=1024x1024 Type=UInt16, ColorInterp=Gray
> Band 2 Block=1024x1024 Type=UInt16, ColorInterp=Gray
>
> Also I am sure it is the UInt16 overflow, as the message is:
> ERROR 3: Unable to read 4194302 byte block from 4324329780
> and 2**32 = 4294967296
>
> ------------------------------------------------------------------------
> *From:* bradh at frogmouth.net <bradh at frogmouth.net>
> *Sent:* April 6, 2021 8:17 PM
> *To:* Even Rouault <even.rouault at spatialys.com>; ni hao 
> <ni_hao88 at hotmail.com>
> *Cc:* gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] NITF Int16 image size limit
> Also if you can show the headers (e.g. from gdalinfo), that might 
> provide indication of exactly which value is the issue.
>
> Brad
>
> On 7 Apr. 2021 04:00, Even Rouault <even.rouault at spatialys.com> wrote:
>
>     Please keep the mailing list copied (I re-added it)
>
>     This is not the most recent one (3.2.2 is), but skimming quickly
>     through release notes, I can't see anything directly related, so
>     it might still be current with the recent versions. Altough I see
>     that a bunch of "avoid unsigned integer overflow" type of fixes
>     have been done since 2.4, so some of them might have accidentally
>     fixed the issue.
>
>     If you can try with the latest version ( Docker images mentioned
>     at https://github.com/OSGeo/gdal/tree/master/gdal/docker
>     <https://github.com/OSGeo/gdal/tree/master/gdal/docker>, Conda,
>     etc .), that could be interesting.
>
>
>     Le 06/04/2021 ? 19:51, ni hao a ?crit?:
>
>         Hi Even,
>
>         The version is 2.4.4.
>         ------------------------------------------------------------------------
>         *From:* Even Rouault <even.rouault at spatialys.com>
>         <mailto:even.rouault at spatialys.com>
>         *Sent:* April 6, 2021 2:46 PM
>         *To:* ni hao <ni_hao88 at hotmail.com>
>         <mailto:ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org
>         <mailto:gdal-dev at lists.osgeo.org> <gdal-dev at lists.osgeo.org>
>         <mailto:gdal-dev at lists.osgeo.org>
>         *Subject:* Re: [gdal-dev] NITF Int16 image size limit
>
>         Shawn,
>
>         This sounds more like a unwanted integer overflow somewhere in
>         the NITF driver.? Is this with a recent GDAL ? If so, please
>         file a bug at https://github.com/OSGeo/gdal/issues/new
>         <https://github.com/OSGeo/gdal/issues/new> with all the
>         details needed. A link to the dataset would be ideal, but
>         otherwise please provide in the ticket description the output
>         of "gdalinfo your.nitf"
>
>         Even
>
>         Le 06/04/2021 ? 19:35, ni hao a ?crit?:
>
>             Hi list,
>
>
>             I encountered problem ingesting a large?NITF Int16 image
>             with GDAL:
>
>             NITF 2-band image in Int16 format,?4.3 GB. It has?19690
>             lines x 61180 pixels.? ?The upper 90% of the image looks
>             fine.? ?But the last 2000 lines fail to load by GDAL.?
>             ?That coincides with the 32-bit boundary.
>
>
>             Note that another?larger?NITF?in?32-bit float, 10.1 GB
>             file loads?fine.
>
>
>             Is there a hard limit on NITF Int16 file?size?
>
>             Thanks,
>             Shawn
>
>
>             _______________________________________________
>             gdal-dev mailing list
>             gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>             https://lists.osgeo.org/mailman/listinfo/gdal-dev  <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>         -- 
>         http://www.spatialys.com  <http://www.spatialys.com>
>         My software is free, but my time generally not.
>
>     -- 
>     http://www.spatialys.com  <http://www.spatialys.com>
>     My software is free, but my time generally not.
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/6384b48a/attachment.html>

From even.rouault at spatialys.com  Wed Apr  7 01:25:29 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 7 Apr 2021 10:25:29 +0200
Subject: [gdal-dev] Shall I continue trying to get gdal java bindings to
 work?
In-Reply-To: <ebe702db9d934a82b73aeff32b248ec0@lfv.se>
References: <ebe702db9d934a82b73aeff32b248ec0@lfv.se>
Message-ID: <5b774aaf-fde3-bd92-718b-89a84c0cbaf8@spatialys.com>

Paul,

you're kindly invited to help improving the documentation of 
https://gdal.org/api/java.html. See the "Edit on GitHub" button on the 
top right of the page to submit a contribution

Even

Le 07/04/2021 ? 07:17, paul.malm at lfv.se a ?crit?:
>
> When I copy ALL the dll-files in gdal\bin (geos.dll, geos_c.dll etc.) 
> to my java-jre\bin folder (where I also copied the gdalalljni.dll) it 
> seems to work. Couldn?t this be added in the installation instructions 
> some were?
>
> Kind regards,
>
> Paul
>
> *Fr?n:*Malm, Paul (Operations AIM)
> *Skickat:* den 6 april 2021 10:42
> *Till:* 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org>
> *?mne:* Shall I continue trying to get gdal java bindings to work?
>
> Hi,
>
> is it possible to get Gdal java bindings to work in Windows 10? If not 
> to whom do I report the error?
>
> I?ve downloaded release-1928-x64-gdal-3-2-1-mapserver-7-6-2.zip
>
> and can?t get gdalalljni.dll to load. I?ve tried to get help from here 
> and from the them creating the zip ?file. But without any luck.
>
> I just want to know if it is possible at all, since I?ve tried to get 
> it to work for four weeks now.
>
> Has anyone at all got gdalalljni.dll to load?
>
> Kind regards,
>
> Paul
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/df244690/attachment.html>

From even.rouault at spatialys.com  Wed Apr  7 02:24:06 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 7 Apr 2021 11:24:06 +0200
Subject: [gdal-dev] Proposed GDAL 3.3 release schedule
Message-ID: <1b482dac-e296-7586-8aa5-9a7383bd9020@spatialys.com>

Hi,

We haven't yet talked about it. Given the changes on the Python bindings 
side with moving of script files around (see 
https://github.com/OSGeo/gdal/pull/3635), I think we should go for a 
beta to give a chance to packagers to check that everything is OK before 
we proceed further. Hopefully the changes to packaging scripts should 
consist just in changing a few file paths .

Proposed schedule:

- April 19: beta1

- April 26: RC1

- May 3: final release

Comments?

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From idan at miara.com  Wed Apr  7 03:34:09 2021
From: idan at miara.com (Idan Miara)
Date: Wed, 7 Apr 2021 13:34:09 +0300
Subject: [gdal-dev] Proposed GDAL 3.3 release schedule
In-Reply-To: <1b482dac-e296-7586-8aa5-9a7383bd9020@spatialys.com>
References: <1b482dac-e296-7586-8aa5-9a7383bd9020@spatialys.com>
Message-ID: <CAEDrt3_R3cKhN957uzNYQd-1NPLhNpjz_vmDvuy3dmezU1gZBw@mail.gmail.com>

Hi Even and all,

I think that the schedule makes sense.

What is the policy for accepting feature PRs (not bug fixes) ?
I mean do all new features from when beta/RC is published will be merged
only to the next minor version, i.e. 3.4 ?

Because we cannot release gdal-utils <https://pypi.org/project/gdal-utils/>
version 3.3.0 for that version number had been used (and deleted to avoid
further confusion), I suggest we declare that:
gdal 3.3.0 + gdal_utils 3.3.0.x are beta (x>6);
gdal 3.3.1 + gdal_utils 3.3.1 will be the final release,
Does it make sense or is it too confusing ?

Idan

On Wed, 7 Apr 2021 at 12:24, Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> We haven't yet talked about it. Given the changes on the Python bindings
> side with moving of script files around (see
> https://github.com/OSGeo/gdal/pull/3635), I think we should go for a
> beta to give a chance to packagers to check that everything is OK before
> we proceed further. Hopefully the changes to packaging scripts should
> consist just in changing a few file paths .
>
> Proposed schedule:
>
> - April 19: beta1
>
> - April 26: RC1
>
> - May 3: final release
>
> Comments?
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/d0d0664a/attachment-0001.html>

From even.rouault at spatialys.com  Wed Apr  7 03:44:57 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 7 Apr 2021 12:44:57 +0200
Subject: [gdal-dev] Proposed GDAL 3.3 release schedule
In-Reply-To: <CAEDrt3_R3cKhN957uzNYQd-1NPLhNpjz_vmDvuy3dmezU1gZBw@mail.gmail.com>
References: <1b482dac-e296-7586-8aa5-9a7383bd9020@spatialys.com>
 <CAEDrt3_R3cKhN957uzNYQd-1NPLhNpjz_vmDvuy3dmezU1gZBw@mail.gmail.com>
Message-ID: <6105dc9f-3576-2dda-4f21-430a6b5b062f@spatialys.com>

Idan,
> What is the policy for accepting feature?PRs (not bug fixes) ?
> I mean do all new features from when beta/RC is published will be 
> merged only to the next minor version, i.e. 3.4 ?

Between beta1 and RC1, some feature PRs might be accepted, but not ones 
with strong impacts (typically should not require any change in 
packaging build recipees)

At time RC1 is created, master becomes 3.4dev, and feature PRs are only 
for master, and release/3.3 is branched. Bug fixes go in master and 
release/3.3. If a severe enough bugfix is found after RC1 and before 
final, then a RC2 might be issued.

>
> Because we cannot release gdal-utils 
> <https://pypi.org/project/gdal-utils/> version 3.3.0 for that version 
> number had been used (and deleted to avoid further confusion), I 
> suggest we declare that:
> gdal 3.3.0?+ gdal_utils 3.3.0.x are beta (x>6);
> gdal 3.3.1 + gdal_utils 3.3.1 will be the final release,
> Does it make sense or is it too confusing ?

A bit confusing. I do want a 3.3.0 final production ready GDAL release. 
That the new gdal_utils pip package starts at 3.3.0.6 is a bit 
unfortunate, but I can live with that. That will not break anyone.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/ac89bc9d/attachment.html>

From jgomezdans at gmail.com  Wed Apr  7 04:10:36 2021
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Wed, 7 Apr 2021 13:10:36 +0200
Subject: [gdal-dev] "New" style import
Message-ID: <CAMWde5rSbvGB1Dox=NMsL9Mp_nCrYpZniFLA0vu9rneNs2wgLw@mail.gmail.com>

Hi,
I've recently updated GDAL to 3.2.1. I mostly use it from Python, and have
oodles of scripts from the past that use "import gdal" somewhere. With the
newer versions of GDAL, this is deprecated and is now "from osgeo import
gdal".

Is there some hacky workaround/sacrifice to the technical debt gods to
carry on using "import gdal" for legacy codes?

Thanks!
Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/e3d4b756/attachment.html>

From pedrongvenancio at gmail.com  Wed Apr  7 04:16:05 2021
From: pedrongvenancio at gmail.com (=?UTF-8?Q?Pedro_Ven=C3=A2ncio?=)
Date: Wed, 7 Apr 2021 12:16:05 +0100
Subject: [gdal-dev] MSSQLSpatial driver from GDAL 3.2.2 does not export data
Message-ID: <CAMCJChtV939xshk2+NTcVXJc3Kbd8xt2ub-ieBSPJkPB4pTGrg@mail.gmail.com>

Hi,

I'm trying to export some data from shapefile to a MSSQLServer database
with the MSSQLSpatial driver, but I'm getting an error when doing it with
ogr2ogr from GDAL 3.2.2:

ogr2ogr --version
GDAL 3.2.2, released 2021/03/05

ogr2ogr.exe -progress -f MSSQLSpatial "MSSQL:server=HP-OMEN\SQLEXPRESS;
driver={ODBC Driver 17 for SQL Server}; database=TEST_DB; uid=user;
pwd=pass; active_schema=dbo" -lco DIM=2 D:\CAOP_Distritos_2020_4326.shp
CAOP_Distritos_2020_4326 -overwrite -nlt MULTIPOLYGON -lco
GEOMETRY_NAME=geom -lco FID=id -nln dbo.caop_2020_distritos_4326_novo
-s_srs EPSG:4326 -a_srs EPSG:4326 -nlt PROMOTE_TO_MULTI

GDAL command output:
Process was unexpectedly terminated
Execution failed after 2.84 seconds

This procedure creates the table structure, lists the new table in
geometry_columns, but no data is exported. So, the new table is just empty.


Doing exactly the same with ogr2ogr from GDAL 3.1.4, all goes fine:

ogr2ogr --version
GDAL 3.1.4, released 2020/10/20

ogr2ogr.exe -progress -f MSSQLSpatial "MSSQL:server=HP-OMEN\SQLEXPRESS;
driver={ODBC Driver 17 for SQL Server}; database=TEST_DB; uid=user;
pwd=pass; active_schema=dbo" -lco DIM=2 D:\CAOP_Distritos_2020_4326.shp
CAOP_Distritos_2020_4326 -overwrite -nlt MULTIPOLYGON -lco
GEOMETRY_NAME=geom -lco FID=id -nln dbo.caop_2020_distritos_4326 -s_srs
EPSG:4326 -a_srs EPSG:4326 -nlt PROMOTE_TO_MULTI
0...10...20...30...40...50...60...70...80...90...100 - done.


Had something changed between those two versions that can justify this
behaviour?

Thank you very much!

Best regards,
Pedro Ven?ncio
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/8af92e65/attachment.html>

From Daniel.Evans at jbarisk.com  Wed Apr  7 04:20:35 2021
From: Daniel.Evans at jbarisk.com (Daniel Evans)
Date: Wed, 7 Apr 2021 11:20:35 +0000
Subject: [gdal-dev] "New" style import
In-Reply-To: <CAMWde5rSbvGB1Dox=NMsL9Mp_nCrYpZniFLA0vu9rneNs2wgLw@mail.gmail.com>
References: <CAMWde5rSbvGB1Dox=NMsL9Mp_nCrYpZniFLA0vu9rneNs2wgLw@mail.gmail.com>
Message-ID: <LO2P123MB4652F908912C79BFE441F74695759@LO2P123MB4652.GBRP123.PROD.OUTLOOK.COM>

In 3.1 and earlier, GDAL had short helper scripts to allow the deprecated imports, named ?gdal.py?, ?osr.py?, and ?ogr.py?, with contents like:

```
# import osgeo.gdal as a convenience
from osgeo.gdal import deprecation_warn
deprecation_warn('gdal')

from osgeo.gdal import *
```

You could create such very short modules on your local machine (presumably not bothering to include the deprecation warning!). Using PYTHONPATH to point to a directory with them in is probably the simplest way.

The source for the Python wrappers in GDAL 3.1 can be found at: https://github.com/OSGeo/gdal/tree/release/3.1/gdal/swig/python

(Alternatively, I?d argue it wouldn?t be too hard to do some global search and replace for ?import gdal?->?from osgeo import gdal?, using your IDE or some command line tools, but I presume you?re not tempted by that idea!)

Dr Daniel Evans
Software Developer


e: Daniel.Evans at jbarisk.com
t: +44 (0)1756 799919
www.jbarisk.com
All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system. 
JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, England.
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Jose Gomez-Dans
Sent: 07 April 2021 12:11
To: gdal-dev <gdal-dev at lists.osgeo.org>
Subject: [gdal-dev] "New" style import

Hi,
I've recently updated GDAL to 3.2.1. I mostly use it from Python, and have oodles of scripts from the past that use "import gdal" somewhere. With the newer versions of GDAL, this is deprecated and is now "from osgeo import gdal".

Is there some hacky workaround/sacrifice to the technical debt gods to carry on using "import gdal" for legacy codes?

Thanks!
Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/71470cbb/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image609265.png
Type: image/png
Size: 9886 bytes
Desc: image609265.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/71470cbb/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image464149.png
Type: image/png
Size: 651 bytes
Desc: image464149.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/71470cbb/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image605237.png
Type: image/png
Size: 715 bytes
Desc: image605237.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/71470cbb/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image663108.png
Type: image/png
Size: 966 bytes
Desc: image663108.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/71470cbb/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image903814.png
Type: image/png
Size: 784 bytes
Desc: image903814.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/71470cbb/attachment-0009.png>

From ni_hao88 at hotmail.com  Wed Apr  7 05:59:09 2021
From: ni_hao88 at hotmail.com (ni hao)
Date: Wed, 7 Apr 2021 12:59:09 +0000
Subject: [gdal-dev] NITF Int16 image size limit
In-Reply-To: <aec9676b-638c-719d-3bb9-ad891fa19999@spatialys.com>
References: <dfc9881f-ad6a-a1da-c92b-43d90d436923@spatialys.com>
 <64b23631-9c1c-450a-b01d-94ee9c29f7f7@email.android.com>
 <DM5PR02MB3862B203427D3340A0D439C7F1759@DM5PR02MB3862.namprd02.prod.outlook.com>,
 <aec9676b-638c-719d-3bb9-ad891fa19999@spatialys.com>
Message-ID: <DM5PR02MB38628A04E03E4A902261FF12F1759@DM5PR02MB3862.namprd02.prod.outlook.com>

Hi Even,

I am using GDAL 2.4.4. I may try the latest version as you suggested.

The NITF file size is 4,294,967,295 bytes

The vendor used a non-GDAL implementation, and was able to display all image.

Metadata:
  NITF_ABPP=16
  NITF_BLOCKA_BLOCK_COUNT=01
  NITF_BLOCKA_BLOCK_INSTANCE_01=01
  NITF_BLOCKA_FRFC_LOC_01=
  NITF_BLOCKA_FRLC_LOC_01=
  NITF_BLOCKA_LAYOVER_ANGLE_01=000
  NITF_BLOCKA_LRFC_LOC_01=
  NITF_BLOCKA_LRLC_LOC_01=
  NITF_BLOCKA_L_LINES_01=19694
  NITF_BLOCKA_N_GRAY_01=00000
  NITF_BLOCKA_SHADOW_ANGLE_01=180
  NITF_CCS_COLUMN=0
  NITF_CCS_ROW=0
  NITF_CLEVEL=07
  NITF_ENCRYP=0
  NITF_FBKGC=  0,  0,  0
  NITF_FDT=
  NITF_FHDR=NITF02.10
  NITF_FSCATP=
  NITF_FSCAUT=
  NITF_FSCLAS=U
  NITF_FSCLSY=CA
  NITF_FSCLTX=
  NITF_FSCODE=
  NITF_FSCOP=00000
  NITF_FSCPYS=00000
  NITF_FSCRSN=
  NITF_FSCTLH=
  NITF_FSCTLN=
  NITF_FSDCDT=
  NITF_FSDCTP=
  NITF_FSDCXM=
  NITF_FSDG=
  NITF_FSDGDT=
  NITF_FSREL=
  NITF_FSSRDT=
  NITF_FTITLE=
  NITF_IALVL=0
  NITF_IC=NC
  NITF_ICAT=SAR
  NITF_ICORDS=G
  NITF_IDATIM=
  NITF_IDLVL=
  NITF_IGEOLO=
  NITF_IID1=P1
  NITF_IID2=
  NITF_ILOC_COLUMN=0
  NITF_ILOC_ROW=0
  NITF_IMAG=1.0
  NITF_IMODE=P
  NITF_IREP=MULTI
  NITF_ISCATP=
  NITF_ISCAUT=
  NITF_ISCLAS=U
  NITF_ISCLSY=CA
  NITF_ISCLTX=
  NITF_ISCODE=
  NITF_ISCRSN=
  NITF_ISCTLH=
  NITF_ISCTLN=
  NITF_ISDCDT=
  NITF_ISDCTP=
  NITF_ISDCXM=
  NITF_ISDG=
  NITF_ISDGDT=
  NITF_ISORCE=
  NITF_ISREL=
  NITF_ISSRDT=
  NITF_ONAME=
  NITF_OPHONE=
  NITF_OSTAID=CSA
  NITF_PJUST=R
  NITF_PVTYPE=INT
  NITF_STYPE=BF01
  NITF_TGTID=
________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: April 7, 2021 5:23 AM
To: ni hao <ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] NITF Int16 image size limit


Hi,

Actually the error message doesn't look like there's a uint32 overflow as it displays a file offset that is beyond the 4 GB limit.

Did you check that your file size is at least 4324329780 + 4194302 = 4 328 524 082 bytes ? I guess it is not, or then there's some mysterious error in the low level GDAL I/O layer.

So if your file is smaller than that,

- either it is corrupted (would be good if you could check that with a non-GDAL implementation)

- or there's a bug in the NITF driver in how it computes offsets. Could you report the values of the NITF_ABPP, NITF_IC and NITF_IMODE metadata reported by gdalinfo ?

Even

Le 07/04/2021 ? 02:09, ni hao a ?crit :
gdalinfo output i:
Driver: NITF/National Imagery Transmission Format
Files: ##CH_CV_GRD\imagery\12499.ntf
Size is 61180, 19694
Coordinate System is `'
GCP Projection =
GEOGCS["WGS 84",   ... ]
Band 1 Block=1024x1024 Type=UInt16, ColorInterp=Gray
Band 2 Block=1024x1024 Type=UInt16, ColorInterp=Gray

Also I am sure it is the UInt16 overflow, as the message is:
ERROR 3: Unable to read 4194302 byte block from 4324329780
and 2**32 = 4294967296

________________________________
From: bradh at frogmouth.net<mailto:bradh at frogmouth.net> <bradh at frogmouth.net><mailto:bradh at frogmouth.net>
Sent: April 6, 2021 8:17 PM
To: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>; ni hao <ni_hao88 at hotmail.com><mailto:ni_hao88 at hotmail.com>
Cc: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org> <gdal-dev at lists.osgeo.org><mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] NITF Int16 image size limit

Also if you can show the headers (e.g. from gdalinfo), that might provide indication of exactly which value is the issue.

Brad

On 7 Apr. 2021 04:00, Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com> wrote:

Please keep the mailing list copied (I re-added it)

This is not the most recent one (3.2.2 is), but skimming quickly through release notes, I can't see anything directly related, so it might still be current with the recent versions. Altough I see that a bunch of "avoid unsigned integer overflow" type of fixes have been done since 2.4, so some of them might have accidentally fixed the issue.

If you can try with the latest version ( Docker images mentioned at https://github.com/OSGeo/gdal/tree/master/gdal/docker, Conda, etc .), that could be interesting.


Le 06/04/2021 ? 19:51, ni hao a ?crit :
Hi Even,

The version is 2.4.4.
________________________________
From: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>
Sent: April 6, 2021 2:46 PM
To: ni hao <ni_hao88 at hotmail.com><mailto:ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org> <gdal-dev at lists.osgeo.org><mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] NITF Int16 image size limit


Shawn,

This sounds more like a unwanted integer overflow somewhere in the NITF driver.  Is this with a recent GDAL ? If so, please file a bug at https://github.com/OSGeo/gdal/issues/new with all the details needed. A link to the dataset would be ideal, but otherwise please provide in the ticket description the output of "gdalinfo your.nitf"

Even

Le 06/04/2021 ? 19:35, ni hao a ?crit :

Hi list,


I encountered problem ingesting a large NITF Int16 image with GDAL:

NITF 2-band image in Int16 format, 4.3 GB. It has 19690 lines x 61180 pixels.   The upper 90% of the image looks fine.   But the last 2000 lines fail to load by GDAL.   That coincides with the 32-bit boundary.


Note that another larger NITF in 32-bit float, 10.1 GB file loads fine.


Is there a hard limit on NITF Int16 file size?


Thanks,
Shawn




_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.

--
http://www.spatialys.com
My software is free, but my time generally not.




_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/0947346b/attachment-0001.html>

From jgomezdans at gmail.com  Wed Apr  7 06:26:14 2021
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Wed, 7 Apr 2021 15:26:14 +0200
Subject: [gdal-dev] "New" style import
In-Reply-To: <LO2P123MB4652F908912C79BFE441F74695759@LO2P123MB4652.GBRP123.PROD.OUTLOOK.COM>
References: <CAMWde5rSbvGB1Dox=NMsL9Mp_nCrYpZniFLA0vu9rneNs2wgLw@mail.gmail.com>
 <LO2P123MB4652F908912C79BFE441F74695759@LO2P123MB4652.GBRP123.PROD.OUTLOOK.COM>
Message-ID: <CAMWde5pLPyE7vcMkr58r28WFFpXzN6JR+c5j9kUSKcoFWdKhLA@mail.gmail.com>

Hi Daniel,

On Wed, 7 Apr 2021 at 13:20, Daniel Evans <Daniel.Evans at jbarisk.com> wrote:

> In 3.1 and earlier, GDAL had short helper scripts to allow the deprecated
> imports, named ?gdal.py?, ?osr.py?, and ?ogr.py?
>

Thanks, this is a good idea. I have packages installed all over the place
(different environments, in development, dodgy includes, ...), so it is
hard to just search around for things. Thanks!

Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/c3e70787/attachment.html>

From even.rouault at spatialys.com  Wed Apr  7 06:41:22 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 7 Apr 2021 15:41:22 +0200
Subject: [gdal-dev] NITF Int16 image size limit
In-Reply-To: <DM5PR02MB38628A04E03E4A902261FF12F1759@DM5PR02MB3862.namprd02.prod.outlook.com>
References: <dfc9881f-ad6a-a1da-c92b-43d90d436923@spatialys.com>
 <64b23631-9c1c-450a-b01d-94ee9c29f7f7@email.android.com>
 <DM5PR02MB3862B203427D3340A0D439C7F1759@DM5PR02MB3862.namprd02.prod.outlook.com>
 <aec9676b-638c-719d-3bb9-ad891fa19999@spatialys.com>
 <DM5PR02MB38628A04E03E4A902261FF12F1759@DM5PR02MB3862.namprd02.prod.outlook.com>
Message-ID: <cf645f16-607b-0a32-bcb8-b214def44a1e@spatialys.com>

Hum, 4294967295 = 0xffffffff = max uint32 value. This really a 
suspicious file size that looks like truncation at the 4 GB limit. Are 
you really really sure that you tested the non-GDAL implementation with 
that exact file, and not another version that might have been truncated 
later ?

Le 07/04/2021 ? 14:59, ni hao a ?crit?:
> Hi Even,
>
> I am using GDAL 2.4.4. I may try the latest version as you suggested.
>
> The NITF file size is 4,294,967,295 bytes
>
> The vendor used a non-GDAL implementation, and was able to display all 
> image.
>
> Metadata:
> ? NITF_ABPP=16
> ? NITF_BLOCKA_BLOCK_COUNT=01
> ? NITF_BLOCKA_BLOCK_INSTANCE_01=01
> ? NITF_BLOCKA_FRFC_LOC_01=
> ? NITF_BLOCKA_FRLC_LOC_01=
> ? NITF_BLOCKA_LAYOVER_ANGLE_01=000
> ? NITF_BLOCKA_LRFC_LOC_01=
> ? NITF_BLOCKA_LRLC_LOC_01=
> ? NITF_BLOCKA_L_LINES_01=19694
> ? NITF_BLOCKA_N_GRAY_01=00000
> ? NITF_BLOCKA_SHADOW_ANGLE_01=180
> ? NITF_CCS_COLUMN=0
> ? NITF_CCS_ROW=0
> ? NITF_CLEVEL=07
> ? NITF_ENCRYP=0
> ? NITF_FBKGC= ?0, ?0, ?0
> ? NITF_FDT=
> ? NITF_FHDR=NITF02.10
> ? NITF_FSCATP=
> ? NITF_FSCAUT=
> ? NITF_FSCLAS=U
> ? NITF_FSCLSY=CA
> ? NITF_FSCLTX=
> ? NITF_FSCODE=
> ? NITF_FSCOP=00000
> ? NITF_FSCPYS=00000
> ? NITF_FSCRSN=
> ? NITF_FSCTLH=
> ? NITF_FSCTLN=
> ? NITF_FSDCDT=
> ? NITF_FSDCTP=
> ? NITF_FSDCXM=
> ? NITF_FSDG=
> ? NITF_FSDGDT=
> ? NITF_FSREL=
> ? NITF_FSSRDT=
> ? NITF_FTITLE=
> ? NITF_IALVL=0
> ? NITF_IC=NC
> ? NITF_ICAT=SAR
> ? NITF_ICORDS=G
> ? NITF_IDATIM=
> ? NITF_IDLVL=
> ? NITF_IGEOLO=
> ? NITF_IID1=P1
> ? NITF_IID2=
> ? NITF_ILOC_COLUMN=0
> ? NITF_ILOC_ROW=0
> ? NITF_IMAG=1.0
> ? NITF_IMODE=P
> ? NITF_IREP=MULTI
> ? NITF_ISCATP=
> ? NITF_ISCAUT=
> ? NITF_ISCLAS=U
> ? NITF_ISCLSY=CA
> ? NITF_ISCLTX=
> ? NITF_ISCODE=
> ? NITF_ISCRSN=
> ? NITF_ISCTLH=
> ? NITF_ISCTLN=
> ? NITF_ISDCDT=
> ? NITF_ISDCTP=
> ? NITF_ISDCXM=
> ? NITF_ISDG=
> ? NITF_ISDGDT=
> ? NITF_ISORCE=
> ? NITF_ISREL=
> ? NITF_ISSRDT=
> ? NITF_ONAME=
> ? NITF_OPHONE=
> ? NITF_OSTAID=CSA
> ? NITF_PJUST=R
> ? NITF_PVTYPE=INT
> ? NITF_STYPE=BF01
> ? NITF_TGTID=
> ------------------------------------------------------------------------
> *From:* Even Rouault <even.rouault at spatialys.com>
> *Sent:* April 7, 2021 5:23 AM
> *To:* ni hao <ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org 
> <gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] NITF Int16 image size limit
>
> Hi,
>
> Actually the error message doesn't look like there's a uint32 overflow 
> as it displays a file offset that is beyond the 4 GB limit.
>
> Did you check that your file size is at least 4324329780 + 4194302 = 4 
> 328 524 082 bytes ? I guess it is not, or then there's some mysterious 
> error in the low level GDAL I/O layer.
>
> So if your file is smaller than that,
>
> - either it is corrupted (would be good if you could check that with a 
> non-GDAL implementation)
>
> - or there's a bug in the NITF driver in how it computes offsets. 
> Could you report the values of the NITF_ABPP, NITF_IC and NITF_IMODE 
> metadata reported by gdalinfo ?
>
> Even
>
> Le 07/04/2021 ? 02:09, ni hao a ?crit?:
>> gdalinfo output i:
>> Driver: NITF/National Imagery Transmission Format
>> Files: ##CH_CV_GRD\imagery\12499.ntf
>> Size is 61180, 19694
>> Coordinate System is `'
>> GCP Projection =
>> GEOGCS["WGS 84",? ?... ]
>> Band 1 Block=1024x1024 Type=UInt16, ColorInterp=Gray
>> Band 2 Block=1024x1024 Type=UInt16, ColorInterp=Gray
>>
>> Also I am sure it is the UInt16 overflow, as the message is:
>> ERROR 3: Unable to read 4194302 byte block from 4324329780
>> and 2**32 = 4294967296
>>
>> ------------------------------------------------------------------------
>> *From:* bradh at frogmouth.net <mailto:bradh at frogmouth.net> 
>> <bradh at frogmouth.net> <mailto:bradh at frogmouth.net>
>> *Sent:* April 6, 2021 8:17 PM
>> *To:* Even Rouault <even.rouault at spatialys.com> 
>> <mailto:even.rouault at spatialys.com>; ni hao <ni_hao88 at hotmail.com> 
>> <mailto:ni_hao88 at hotmail.com>
>> *Cc:* gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org> 
>> <gdal-dev at lists.osgeo.org> <mailto:gdal-dev at lists.osgeo.org>
>> *Subject:* Re: [gdal-dev] NITF Int16 image size limit
>> Also if you can show the headers (e.g. from gdalinfo), that might 
>> provide indication of exactly which value is the issue.
>>
>> Brad
>>
>> On 7 Apr. 2021 04:00, Even Rouault <even.rouault at spatialys.com> 
>> <mailto:even.rouault at spatialys.com> wrote:
>>
>>     Please keep the mailing list copied (I re-added it)
>>
>>     This is not the most recent one (3.2.2 is), but skimming quickly
>>     through release notes, I can't see anything directly related, so
>>     it might still be current with the recent versions. Altough I see
>>     that a bunch of "avoid unsigned integer overflow" type of fixes
>>     have been done since 2.4, so some of them might have accidentally
>>     fixed the issue.
>>
>>     If you can try with the latest version ( Docker images mentioned
>>     at https://github.com/OSGeo/gdal/tree/master/gdal/docker
>>     <https://github.com/OSGeo/gdal/tree/master/gdal/docker>, Conda,
>>     etc .), that could be interesting.
>>
>>
>>     Le 06/04/2021 ? 19:51, ni hao a ?crit?:
>>
>>         Hi Even,
>>
>>         The version is 2.4.4.
>>         ------------------------------------------------------------------------
>>         *From:* Even Rouault <even.rouault at spatialys.com>
>>         <mailto:even.rouault at spatialys.com>
>>         *Sent:* April 6, 2021 2:46 PM
>>         *To:* ni hao <ni_hao88 at hotmail.com>
>>         <mailto:ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org
>>         <mailto:gdal-dev at lists.osgeo.org> <gdal-dev at lists.osgeo.org>
>>         <mailto:gdal-dev at lists.osgeo.org>
>>         *Subject:* Re: [gdal-dev] NITF Int16 image size limit
>>
>>         Shawn,
>>
>>         This sounds more like a unwanted integer overflow somewhere
>>         in the NITF driver.? Is this with a recent GDAL ? If so,
>>         please file a bug at https://github.com/OSGeo/gdal/issues/new
>>         <https://github.com/OSGeo/gdal/issues/new> with all the
>>         details needed. A link to the dataset would be ideal, but
>>         otherwise please provide in the ticket description the output
>>         of "gdalinfo your.nitf"
>>
>>         Even
>>
>>         Le 06/04/2021 ? 19:35, ni hao a ?crit?:
>>
>>             Hi list,
>>
>>
>>             I encountered problem ingesting a large?NITF Int16 image
>>             with GDAL:
>>
>>             NITF 2-band image in Int16 format,?4.3 GB. It has?19690
>>             lines x 61180 pixels. ?The upper 90% of the image looks
>>             fine. ?But the last 2000 lines fail to load by GDAL.?
>>             ?That coincides with the 32-bit boundary.
>>
>>
>>             Note that another?larger?NITF?in?32-bit float, 10.1 GB
>>             file loads?fine.
>>
>>
>>             Is there a hard limit on NITF Int16 file?size?
>>
>>             Thanks,
>>             Shawn
>>
>>
>>             _______________________________________________
>>             gdal-dev mailing list
>>             gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>>             https://lists.osgeo.org/mailman/listinfo/gdal-dev  <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>
>>         -- 
>>         http://www.spatialys.com  <http://www.spatialys.com>
>>         My software is free, but my time generally not.
>>
>>     -- 
>>     http://www.spatialys.com  <http://www.spatialys.com>
>>     My software is free, but my time generally not.
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev  <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
> -- 
> http://www.spatialys.com  <http://www.spatialys.com>
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/8b9a6862/attachment-0001.html>

From ni_hao88 at hotmail.com  Wed Apr  7 06:52:53 2021
From: ni_hao88 at hotmail.com (ni hao)
Date: Wed, 7 Apr 2021 13:52:53 +0000
Subject: [gdal-dev] NITF Int16 image size limit
In-Reply-To: <cf645f16-607b-0a32-bcb8-b214def44a1e@spatialys.com>
References: <dfc9881f-ad6a-a1da-c92b-43d90d436923@spatialys.com>
 <64b23631-9c1c-450a-b01d-94ee9c29f7f7@email.android.com>
 <DM5PR02MB3862B203427D3340A0D439C7F1759@DM5PR02MB3862.namprd02.prod.outlook.com>
 <aec9676b-638c-719d-3bb9-ad891fa19999@spatialys.com>
 <DM5PR02MB38628A04E03E4A902261FF12F1759@DM5PR02MB3862.namprd02.prod.outlook.com>,
 <cf645f16-607b-0a32-bcb8-b214def44a1e@spatialys.com>
Message-ID: <DM5PR02MB3862C492B379689739123DA5F1759@DM5PR02MB3862.namprd02.prod.outlook.com>

Hi Even,

It was CSA using their own software. They said that it was fine access the last 2000 lines.
But I could not confirm.


________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: April 7, 2021 10:41 AM
To: ni hao <ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] NITF Int16 image size limit


Hum, 4294967295 = 0xffffffff = max uint32 value. This really a suspicious file size that looks like truncation at the 4 GB limit. Are you really really sure that you tested the non-GDAL implementation with that exact file, and not another version that might have been truncated later ?

Le 07/04/2021 ? 14:59, ni hao a ?crit :
Hi Even,

I am using GDAL 2.4.4. I may try the latest version as you suggested.

The NITF file size is 4,294,967,295 bytes

The vendor used a non-GDAL implementation, and was able to display all image.

Metadata:
  NITF_ABPP=16
  NITF_BLOCKA_BLOCK_COUNT=01
  NITF_BLOCKA_BLOCK_INSTANCE_01=01
  NITF_BLOCKA_FRFC_LOC_01=
  NITF_BLOCKA_FRLC_LOC_01=
  NITF_BLOCKA_LAYOVER_ANGLE_01=000
  NITF_BLOCKA_LRFC_LOC_01=
  NITF_BLOCKA_LRLC_LOC_01=
  NITF_BLOCKA_L_LINES_01=19694
  NITF_BLOCKA_N_GRAY_01=00000
  NITF_BLOCKA_SHADOW_ANGLE_01=180
  NITF_CCS_COLUMN=0
  NITF_CCS_ROW=0
  NITF_CLEVEL=07
  NITF_ENCRYP=0
  NITF_FBKGC=  0,  0,  0
  NITF_FDT=
  NITF_FHDR=NITF02.10
  NITF_FSCATP=
  NITF_FSCAUT=
  NITF_FSCLAS=U
  NITF_FSCLSY=CA
  NITF_FSCLTX=
  NITF_FSCODE=
  NITF_FSCOP=00000
  NITF_FSCPYS=00000
  NITF_FSCRSN=
  NITF_FSCTLH=
  NITF_FSCTLN=
  NITF_FSDCDT=
  NITF_FSDCTP=
  NITF_FSDCXM=
  NITF_FSDG=
  NITF_FSDGDT=
  NITF_FSREL=
  NITF_FSSRDT=
  NITF_FTITLE=
  NITF_IALVL=0
  NITF_IC=NC
  NITF_ICAT=SAR
  NITF_ICORDS=G
  NITF_IDATIM=
  NITF_IDLVL=
  NITF_IGEOLO=
  NITF_IID1=P1
  NITF_IID2=
  NITF_ILOC_COLUMN=0
  NITF_ILOC_ROW=0
  NITF_IMAG=1.0
  NITF_IMODE=P
  NITF_IREP=MULTI
  NITF_ISCATP=
  NITF_ISCAUT=
  NITF_ISCLAS=U
  NITF_ISCLSY=CA
  NITF_ISCLTX=
  NITF_ISCODE=
  NITF_ISCRSN=
  NITF_ISCTLH=
  NITF_ISCTLN=
  NITF_ISDCDT=
  NITF_ISDCTP=
  NITF_ISDCXM=
  NITF_ISDG=
  NITF_ISDGDT=
  NITF_ISORCE=
  NITF_ISREL=
  NITF_ISSRDT=
  NITF_ONAME=
  NITF_OPHONE=
  NITF_OSTAID=CSA
  NITF_PJUST=R
  NITF_PVTYPE=INT
  NITF_STYPE=BF01
  NITF_TGTID=
________________________________
From: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>
Sent: April 7, 2021 5:23 AM
To: ni hao <ni_hao88 at hotmail.com><mailto:ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org> <gdal-dev at lists.osgeo.org><mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] NITF Int16 image size limit


Hi,

Actually the error message doesn't look like there's a uint32 overflow as it displays a file offset that is beyond the 4 GB limit.

Did you check that your file size is at least 4324329780 + 4194302 = 4 328 524 082 bytes ? I guess it is not, or then there's some mysterious error in the low level GDAL I/O layer.

So if your file is smaller than that,

- either it is corrupted (would be good if you could check that with a non-GDAL implementation)

- or there's a bug in the NITF driver in how it computes offsets. Could you report the values of the NITF_ABPP, NITF_IC and NITF_IMODE metadata reported by gdalinfo ?

Even

Le 07/04/2021 ? 02:09, ni hao a ?crit :
gdalinfo output i:
Driver: NITF/National Imagery Transmission Format
Files: ##CH_CV_GRD\imagery\12499.ntf
Size is 61180, 19694
Coordinate System is `'
GCP Projection =
GEOGCS["WGS 84",   ... ]
Band 1 Block=1024x1024 Type=UInt16, ColorInterp=Gray
Band 2 Block=1024x1024 Type=UInt16, ColorInterp=Gray

Also I am sure it is the UInt16 overflow, as the message is:
ERROR 3: Unable to read 4194302 byte block from 4324329780
and 2**32 = 4294967296

________________________________
From: bradh at frogmouth.net<mailto:bradh at frogmouth.net> <bradh at frogmouth.net><mailto:bradh at frogmouth.net>
Sent: April 6, 2021 8:17 PM
To: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>; ni hao <ni_hao88 at hotmail.com><mailto:ni_hao88 at hotmail.com>
Cc: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org> <gdal-dev at lists.osgeo.org><mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] NITF Int16 image size limit

Also if you can show the headers (e.g. from gdalinfo), that might provide indication of exactly which value is the issue.

Brad

On 7 Apr. 2021 04:00, Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com> wrote:

Please keep the mailing list copied (I re-added it)

This is not the most recent one (3.2.2 is), but skimming quickly through release notes, I can't see anything directly related, so it might still be current with the recent versions. Altough I see that a bunch of "avoid unsigned integer overflow" type of fixes have been done since 2.4, so some of them might have accidentally fixed the issue.

If you can try with the latest version ( Docker images mentioned at https://github.com/OSGeo/gdal/tree/master/gdal/docker, Conda, etc .), that could be interesting.


Le 06/04/2021 ? 19:51, ni hao a ?crit :
Hi Even,

The version is 2.4.4.
________________________________
From: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>
Sent: April 6, 2021 2:46 PM
To: ni hao <ni_hao88 at hotmail.com><mailto:ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org> <gdal-dev at lists.osgeo.org><mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] NITF Int16 image size limit


Shawn,

This sounds more like a unwanted integer overflow somewhere in the NITF driver.  Is this with a recent GDAL ? If so, please file a bug at https://github.com/OSGeo/gdal/issues/new with all the details needed. A link to the dataset would be ideal, but otherwise please provide in the ticket description the output of "gdalinfo your.nitf"

Even

Le 06/04/2021 ? 19:35, ni hao a ?crit :

Hi list,


I encountered problem ingesting a large NITF Int16 image with GDAL:

NITF 2-band image in Int16 format, 4.3 GB. It has 19690 lines x 61180 pixels.   The upper 90% of the image looks fine.   But the last 2000 lines fail to load by GDAL.   That coincides with the 32-bit boundary.


Note that another larger NITF in 32-bit float, 10.1 GB file loads fine.


Is there a hard limit on NITF Int16 file size?


Thanks,
Shawn




_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.

--
http://www.spatialys.com
My software is free, but my time generally not.




_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.

--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/a669d6a5/attachment.html>

From ni_hao88 at hotmail.com  Wed Apr  7 07:08:47 2021
From: ni_hao88 at hotmail.com (ni hao)
Date: Wed, 7 Apr 2021 14:08:47 +0000
Subject: [gdal-dev] NITF Int16 image size limit
In-Reply-To: <DM5PR02MB3862C492B379689739123DA5F1759@DM5PR02MB3862.namprd02.prod.outlook.com>
References: <dfc9881f-ad6a-a1da-c92b-43d90d436923@spatialys.com>
 <64b23631-9c1c-450a-b01d-94ee9c29f7f7@email.android.com>
 <DM5PR02MB3862B203427D3340A0D439C7F1759@DM5PR02MB3862.namprd02.prod.outlook.com>
 <aec9676b-638c-719d-3bb9-ad891fa19999@spatialys.com>
 <DM5PR02MB38628A04E03E4A902261FF12F1759@DM5PR02MB3862.namprd02.prod.outlook.com>,
 <cf645f16-607b-0a32-bcb8-b214def44a1e@spatialys.com>,
 <DM5PR02MB3862C492B379689739123DA5F1759@DM5PR02MB3862.namprd02.prod.outlook.com>
Message-ID: <DM5PR02MB3862A57A1EC3333E0BD66121F1759@DM5PR02MB3862.namprd02.prod.outlook.com>

I took a closer look at the files. It looks like they maxed out the byte size and were truncated.
Several NITF images have different rows * columns, but the same byte size.

May not be a GDAL issue.
________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of ni hao <ni_hao88 at hotmail.com>
Sent: April 7, 2021 10:52 AM
To: Even Rouault <even.rouault at spatialys.com>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] NITF Int16 image size limit

Hi Even,

It was CSA using their own software. They said that it was fine access the last 2000 lines.
But I could not confirm.


________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: April 7, 2021 10:41 AM
To: ni hao <ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] NITF Int16 image size limit


Hum, 4294967295 = 0xffffffff = max uint32 value. This really a suspicious file size that looks like truncation at the 4 GB limit. Are you really really sure that you tested the non-GDAL implementation with that exact file, and not another version that might have been truncated later ?

Le 07/04/2021 ? 14:59, ni hao a ?crit :
Hi Even,

I am using GDAL 2.4.4. I may try the latest version as you suggested.

The NITF file size is 4,294,967,295 bytes

The vendor used a non-GDAL implementation, and was able to display all image.

Metadata:
  NITF_ABPP=16
  NITF_BLOCKA_BLOCK_COUNT=01
  NITF_BLOCKA_BLOCK_INSTANCE_01=01
  NITF_BLOCKA_FRFC_LOC_01=
  NITF_BLOCKA_FRLC_LOC_01=
  NITF_BLOCKA_LAYOVER_ANGLE_01=000
  NITF_BLOCKA_LRFC_LOC_01=
  NITF_BLOCKA_LRLC_LOC_01=
  NITF_BLOCKA_L_LINES_01=19694
  NITF_BLOCKA_N_GRAY_01=00000
  NITF_BLOCKA_SHADOW_ANGLE_01=180
  NITF_CCS_COLUMN=0
  NITF_CCS_ROW=0
  NITF_CLEVEL=07
  NITF_ENCRYP=0
  NITF_FBKGC=  0,  0,  0
  NITF_FDT=
  NITF_FHDR=NITF02.10
  NITF_FSCATP=
  NITF_FSCAUT=
  NITF_FSCLAS=U
  NITF_FSCLSY=CA
  NITF_FSCLTX=
  NITF_FSCODE=
  NITF_FSCOP=00000
  NITF_FSCPYS=00000
  NITF_FSCRSN=
  NITF_FSCTLH=
  NITF_FSCTLN=
  NITF_FSDCDT=
  NITF_FSDCTP=
  NITF_FSDCXM=
  NITF_FSDG=
  NITF_FSDGDT=
  NITF_FSREL=
  NITF_FSSRDT=
  NITF_FTITLE=
  NITF_IALVL=0
  NITF_IC=NC
  NITF_ICAT=SAR
  NITF_ICORDS=G
  NITF_IDATIM=
  NITF_IDLVL=
  NITF_IGEOLO=
  NITF_IID1=P1
  NITF_IID2=
  NITF_ILOC_COLUMN=0
  NITF_ILOC_ROW=0
  NITF_IMAG=1.0
  NITF_IMODE=P
  NITF_IREP=MULTI
  NITF_ISCATP=
  NITF_ISCAUT=
  NITF_ISCLAS=U
  NITF_ISCLSY=CA
  NITF_ISCLTX=
  NITF_ISCODE=
  NITF_ISCRSN=
  NITF_ISCTLH=
  NITF_ISCTLN=
  NITF_ISDCDT=
  NITF_ISDCTP=
  NITF_ISDCXM=
  NITF_ISDG=
  NITF_ISDGDT=
  NITF_ISORCE=
  NITF_ISREL=
  NITF_ISSRDT=
  NITF_ONAME=
  NITF_OPHONE=
  NITF_OSTAID=CSA
  NITF_PJUST=R
  NITF_PVTYPE=INT
  NITF_STYPE=BF01
  NITF_TGTID=
________________________________
From: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>
Sent: April 7, 2021 5:23 AM
To: ni hao <ni_hao88 at hotmail.com><mailto:ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org> <gdal-dev at lists.osgeo.org><mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] NITF Int16 image size limit


Hi,

Actually the error message doesn't look like there's a uint32 overflow as it displays a file offset that is beyond the 4 GB limit.

Did you check that your file size is at least 4324329780 + 4194302 = 4 328 524 082 bytes ? I guess it is not, or then there's some mysterious error in the low level GDAL I/O layer.

So if your file is smaller than that,

- either it is corrupted (would be good if you could check that with a non-GDAL implementation)

- or there's a bug in the NITF driver in how it computes offsets. Could you report the values of the NITF_ABPP, NITF_IC and NITF_IMODE metadata reported by gdalinfo ?

Even

Le 07/04/2021 ? 02:09, ni hao a ?crit :
gdalinfo output i:
Driver: NITF/National Imagery Transmission Format
Files: ##CH_CV_GRD\imagery\12499.ntf
Size is 61180, 19694
Coordinate System is `'
GCP Projection =
GEOGCS["WGS 84",   ... ]
Band 1 Block=1024x1024 Type=UInt16, ColorInterp=Gray
Band 2 Block=1024x1024 Type=UInt16, ColorInterp=Gray

Also I am sure it is the UInt16 overflow, as the message is:
ERROR 3: Unable to read 4194302 byte block from 4324329780
and 2**32 = 4294967296

________________________________
From: bradh at frogmouth.net<mailto:bradh at frogmouth.net> <bradh at frogmouth.net><mailto:bradh at frogmouth.net>
Sent: April 6, 2021 8:17 PM
To: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>; ni hao <ni_hao88 at hotmail.com><mailto:ni_hao88 at hotmail.com>
Cc: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org> <gdal-dev at lists.osgeo.org><mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] NITF Int16 image size limit

Also if you can show the headers (e.g. from gdalinfo), that might provide indication of exactly which value is the issue.

Brad

On 7 Apr. 2021 04:00, Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com> wrote:

Please keep the mailing list copied (I re-added it)

This is not the most recent one (3.2.2 is), but skimming quickly through release notes, I can't see anything directly related, so it might still be current with the recent versions. Altough I see that a bunch of "avoid unsigned integer overflow" type of fixes have been done since 2.4, so some of them might have accidentally fixed the issue.

If you can try with the latest version ( Docker images mentioned at https://github.com/OSGeo/gdal/tree/master/gdal/docker, Conda, etc .), that could be interesting.


Le 06/04/2021 ? 19:51, ni hao a ?crit :
Hi Even,

The version is 2.4.4.
________________________________
From: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>
Sent: April 6, 2021 2:46 PM
To: ni hao <ni_hao88 at hotmail.com><mailto:ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org> <gdal-dev at lists.osgeo.org><mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] NITF Int16 image size limit


Shawn,

This sounds more like a unwanted integer overflow somewhere in the NITF driver.  Is this with a recent GDAL ? If so, please file a bug at https://github.com/OSGeo/gdal/issues/new with all the details needed. A link to the dataset would be ideal, but otherwise please provide in the ticket description the output of "gdalinfo your.nitf"

Even

Le 06/04/2021 ? 19:35, ni hao a ?crit :

Hi list,


I encountered problem ingesting a large NITF Int16 image with GDAL:

NITF 2-band image in Int16 format, 4.3 GB. It has 19690 lines x 61180 pixels.   The upper 90% of the image looks fine.   But the last 2000 lines fail to load by GDAL.   That coincides with the 32-bit boundary.


Note that another larger NITF in 32-bit float, 10.1 GB file loads fine.


Is there a hard limit on NITF Int16 file size?


Thanks,
Shawn




_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.

--
http://www.spatialys.com
My software is free, but my time generally not.




_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.

--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/b6711fb2/attachment-0001.html>

From andrew at aitchison.me.uk  Wed Apr  7 07:24:55 2021
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Wed, 7 Apr 2021 15:24:55 +0100 (BST)
Subject: [gdal-dev] stricmp in cpl_port.h
Message-ID: <ef5f7820-8021-ac5-445-5954f1e1d7a2@aitchison.me.uk>


I have developed a gdal driver plugin on Linux and am now attempting to 
build it on Windows.
I am using the conda gdal, WIN10 SDK and the mingw-m64 clang11 compiler
(all installed this week, latest versions I believe), but am open to
other suggestions for building a windows gdal driver plugin.

I get a deprecation warning from cpl_port.h when I use the EQUALS macro:
----------------------------------------------------------------------
qed.cpp:569:31: warning: 'stricmp' is deprecated: The POSIX name for this 
item is deprecated. Instead, use the ISO C and
        C++ conformant name: _stricmp. See online help for details. 
[-Wdeprecated-declarations]
      if( magic == qed_magic && 
EQUAL(CPLGetExtension(poOpenInfo->pszFilename),"qed")) {
                                ^
C:\ProgramData\Miniconda3\Library\include/cpl_port.h:576:36: note: 
expanded from macro 'EQUAL'
#  define EQUAL(a,b)              (STRCASECMP(a,b)==0)
                                     ^
C:\ProgramData\Miniconda3\Library\include/cpl_port.h:565:38: note: 
expanded from macro 'STRCASECMP'
#    define STRCASECMP(a,b)         (stricmp(a,b))
                                       ^
C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\string.h:544:20: note: 'stricmp' has 
been explicitly
        marked deprecated here
      _Check_return_ _CRT_NONSTDC_DEPRECATE(_stricmp)
                     ^
C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\corecrt.h:414:50: note: expanded from 
macro
        '_CRT_NONSTDC_DEPRECATE'
          #define _CRT_NONSTDC_DEPRECATE(_NewName) _CRT_DEPRECATE_TEXT( 
\
                                                   ^
C:\Program Files (x86)\Microsoft Visual 
Studio\2019\Community\VC\Tools\MSVC\14.28.29910\include\vcruntime.h:310:47: 
note:
        expanded from macro '_CRT_DEPRECATE_TEXT'
#define _CRT_DEPRECATE_TEXT(_Text) __declspec(deprecated(_Text))
                                                ^
1 warning generated.
-----------------------------------------------------------------------

Should cpl_port be updated to use _stricmp or is there a better 
alternative (I wondered about strcasecmp but don't see it) ?

I see that
  	frmts/mrsid_lidar/makefile.vc
sets
  	EXTRAFLAGS = $(MRSID_INCLUDE) -D_CRT_SECURE_NO_WARNINGS /Zc:wchar_t-
but I would rather not turn off warnings, since my code is clean enough to 
use  -Wall -Wextra -Weverything on linux.

Thanks.

-- 
Andrew C. Aitchison					 Kendal, UK
  			andrew at aitchison.me.uk

From andrew.bell.ia at gmail.com  Wed Apr  7 07:33:12 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 7 Apr 2021 10:33:12 -0400
Subject: [gdal-dev] stricmp in cpl_port.h
In-Reply-To: <ef5f7820-8021-ac5-445-5954f1e1d7a2@aitchison.me.uk>
References: <ef5f7820-8021-ac5-445-5954f1e1d7a2@aitchison.me.uk>
Message-ID: <CACJ51z3FO+sCXCiotwQh=1QPmFWAcRrB0zXnaiigEaapSf6B_g@mail.gmail.com>

Dare I suggest getting rid of EQUAL?

On Wed, Apr 7, 2021 at 10:25 AM Andrew C Aitchison <andrew at aitchison.me.uk>
wrote:

>
> I have developed a gdal driver plugin on Linux and am now attempting to
> build it on Windows.
> I am using the conda gdal, WIN10 SDK and the mingw-m64 clang11 compiler
> (all installed this week, latest versions I believe), but am open to
> other suggestions for building a windows gdal driver plugin.
>
> I get a deprecation warning from cpl_port.h when I use the EQUALS macro:
> ----------------------------------------------------------------------
> qed.cpp:569:31: warning: 'stricmp' is deprecated: The POSIX name for this
> item is deprecated. Instead, use the ISO C and
>         C++ conformant name: _stricmp. See online help for details.
> [-Wdeprecated-declarations]
>       if( magic == qed_magic &&
> EQUAL(CPLGetExtension(poOpenInfo->pszFilename),"qed")) {
>                                 ^
> C:\ProgramData\Miniconda3\Library\include/cpl_port.h:576:36: note:
> expanded from macro 'EQUAL'
> #  define EQUAL(a,b)              (STRCASECMP(a,b)==0)
>                                      ^
> C:\ProgramData\Miniconda3\Library\include/cpl_port.h:565:38: note:
> expanded from macro 'STRCASECMP'
> #    define STRCASECMP(a,b)         (stricmp(a,b))
>                                        ^
> C:\Program Files (x86)\Windows
> Kits\10\Include\10.0.19041.0\ucrt\string.h:544:20: note: 'stricmp' has
> been explicitly
>         marked deprecated here
>       _Check_return_ _CRT_NONSTDC_DEPRECATE(_stricmp)
>                      ^
> C:\Program Files (x86)\Windows
> Kits\10\Include\10.0.19041.0\ucrt\corecrt.h:414:50: note: expanded from
> macro
>         '_CRT_NONSTDC_DEPRECATE'
>           #define _CRT_NONSTDC_DEPRECATE(_NewName) _CRT_DEPRECATE_TEXT(
> \
>                                                    ^
> C:\Program Files (x86)\Microsoft Visual
> Studio\2019\Community\VC\Tools\MSVC\14.28.29910\include\vcruntime.h:310:47:
>
> note:
>         expanded from macro '_CRT_DEPRECATE_TEXT'
> #define _CRT_DEPRECATE_TEXT(_Text) __declspec(deprecated(_Text))
>                                                 ^
> 1 warning generated.
> -----------------------------------------------------------------------
>
> Should cpl_port be updated to use _stricmp or is there a better
> alternative (I wondered about strcasecmp but don't see it) ?
>
> I see that
>         frmts/mrsid_lidar/makefile.vc
> sets
>         EXTRAFLAGS = $(MRSID_INCLUDE) -D_CRT_SECURE_NO_WARNINGS
> /Zc:wchar_t-
> but I would rather not turn off warnings, since my code is clean enough to
> use  -Wall -Wextra -Weverything on linux.
>
> Thanks.
>
> --
> Andrew C. Aitchison                                      Kendal, UK
>                         andrew at aitchison.me.uk
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/30ce3b93/attachment.html>

From andrew at aitchison.me.uk  Wed Apr  7 08:47:54 2021
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Wed, 7 Apr 2021 16:47:54 +0100 (BST)
Subject: [gdal-dev] stricmp in cpl_port.h
In-Reply-To: <CACJ51z3FO+sCXCiotwQh=1QPmFWAcRrB0zXnaiigEaapSf6B_g@mail.gmail.com>
References: <ef5f7820-8021-ac5-445-5954f1e1d7a2@aitchison.me.uk>
 <CACJ51z3FO+sCXCiotwQh=1QPmFWAcRrB0zXnaiigEaapSf6B_g@mail.gmail.com>
Message-ID: <e86b565-4dcb-96fd-8149-a4ac4316387e@aitchison.me.uk>


On Wed, 7 Apr 2021, Andrew Bell wrote:

> Dare I suggest getting rid of EQUAL?

Since the purpose of EQUALS is to compare two strings, that would
be passing the buck. Without it developers would have to solve this
issue for each platform each time, making it more likely that someone
would break a platform that they don't use.


> On Wed, Apr 7, 2021 at 10:25 AM Andrew C Aitchison <andrew at aitchison.me.uk>
> wrote:
>
>>
>> I have developed a gdal driver plugin on Linux and am now attempting to
>> build it on Windows.
>> I am using the conda gdal, WIN10 SDK and the mingw-m64 clang11 compiler
>> (all installed this week, latest versions I believe), but am open to
>> other suggestions for building a windows gdal driver plugin.
>>
>> I get a deprecation warning from cpl_port.h when I use the EQUALS macro:
>> ----------------------------------------------------------------------
>> qed.cpp:569:31: warning: 'stricmp' is deprecated: The POSIX name for this
>> item is deprecated. Instead, use the ISO C and
>>         C++ conformant name: _stricmp. See online help for details.
>> [-Wdeprecated-declarations]
>>       if( magic == qed_magic &&
>> EQUAL(CPLGetExtension(poOpenInfo->pszFilename),"qed")) {
>>                                 ^
>> C:\ProgramData\Miniconda3\Library\include/cpl_port.h:576:36: note:
>> expanded from macro 'EQUAL'
>> #  define EQUAL(a,b)              (STRCASECMP(a,b)==0)
>>                                      ^
>> C:\ProgramData\Miniconda3\Library\include/cpl_port.h:565:38: note:
>> expanded from macro 'STRCASECMP'
>> #    define STRCASECMP(a,b)         (stricmp(a,b))
>>                                        ^
>> C:\Program Files (x86)\Windows
>> Kits\10\Include\10.0.19041.0\ucrt\string.h:544:20: note: 'stricmp' has
>> been explicitly
>>         marked deprecated here
>>       _Check_return_ _CRT_NONSTDC_DEPRECATE(_stricmp)
>>                      ^
>> C:\Program Files (x86)\Windows
>> Kits\10\Include\10.0.19041.0\ucrt\corecrt.h:414:50: note: expanded from
>> macro
>>         '_CRT_NONSTDC_DEPRECATE'
>>           #define _CRT_NONSTDC_DEPRECATE(_NewName) _CRT_DEPRECATE_TEXT(
>> \
>>                                                    ^
>> C:\Program Files (x86)\Microsoft Visual
>> Studio\2019\Community\VC\Tools\MSVC\14.28.29910\include\vcruntime.h:310:47:
>>
>> note:
>>         expanded from macro '_CRT_DEPRECATE_TEXT'
>> #define _CRT_DEPRECATE_TEXT(_Text) __declspec(deprecated(_Text))
>>                                                 ^
>> 1 warning generated.
>> -----------------------------------------------------------------------
>>
>> Should cpl_port be updated to use _stricmp or is there a better
>> alternative (I wondered about strcasecmp but don't see it) ?
>>
>> I see that
>>         frmts/mrsid_lidar/makefile.vc
>> sets
>>         EXTRAFLAGS = $(MRSID_INCLUDE) -D_CRT_SECURE_NO_WARNINGS
>> /Zc:wchar_t-
>> but I would rather not turn off warnings, since my code is clean enough to
>> use  -Wall -Wextra -Weverything on linux.
>>
>> Thanks.
>>
>> --
>> Andrew C. Aitchison                                      Kendal, UK
>>                         andrew at aitchison.me.uk
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> -- 
> Andrew Bell
> andrew.bell.ia at gmail.com
>

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From even.rouault at spatialys.com  Wed Apr  7 08:54:34 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 7 Apr 2021 17:54:34 +0200
Subject: [gdal-dev] stricmp in cpl_port.h
In-Reply-To: <ef5f7820-8021-ac5-445-5954f1e1d7a2@aitchison.me.uk>
References: <ef5f7820-8021-ac5-445-5954f1e1d7a2@aitchison.me.uk>
Message-ID: <c30d69dc-be7a-5b6d-ed74-a405faf5564d@spatialys.com>

You're welcome to submit a pull request changing stricmp by _stricmp so 
that we can check that our CI is happy with that. Given than we only 
support MSVC >= 2015 nowadays, I'd expect this to run smoothly.

Le 07/04/2021 ? 16:24, Andrew C Aitchison a ?crit?:
>
> I have developed a gdal driver plugin on Linux and am now attempting 
> to build it on Windows.
> I am using the conda gdal, WIN10 SDK and the mingw-m64 clang11 compiler
> (all installed this week, latest versions I believe), but am open to
> other suggestions for building a windows gdal driver plugin.
>
> I get a deprecation warning from cpl_port.h when I use the EQUALS macro:
> ----------------------------------------------------------------------
> qed.cpp:569:31: warning: 'stricmp' is deprecated: The POSIX name for 
> this item is deprecated. Instead, use the ISO C and
> ?????? C++ conformant name: _stricmp. See online help for details. 
> [-Wdeprecated-declarations]
> ???? if( magic == qed_magic && 
> EQUAL(CPLGetExtension(poOpenInfo->pszFilename),"qed")) {
> ?????????????????????????????? ^
> C:\ProgramData\Miniconda3\Library\include/cpl_port.h:576:36: note: 
> expanded from macro 'EQUAL'
> #? define EQUAL(a,b)????????????? (STRCASECMP(a,b)==0)
> ??????????????????????????????????? ^
> C:\ProgramData\Miniconda3\Library\include/cpl_port.h:565:38: note: 
> expanded from macro 'STRCASECMP'
> #??? define STRCASECMP(a,b)???????? (stricmp(a,b))
> ????????????????????????????????????? ^
> C:\Program Files (x86)\Windows 
> Kits\10\Include\10.0.19041.0\ucrt\string.h:544:20: note: 'stricmp' has 
> been explicitly
> ?????? marked deprecated here
> ???? _Check_return_ _CRT_NONSTDC_DEPRECATE(_stricmp)
> ??????????????????? ^
> C:\Program Files (x86)\Windows 
> Kits\10\Include\10.0.19041.0\ucrt\corecrt.h:414:50: note: expanded 
> from macro
> ?????? '_CRT_NONSTDC_DEPRECATE'
> ???????? #define _CRT_NONSTDC_DEPRECATE(_NewName) _CRT_DEPRECATE_TEXT( \
> ????????????????????????????????????????????????? ^
> C:\Program Files (x86)\Microsoft Visual 
> Studio\2019\Community\VC\Tools\MSVC\14.28.29910\include\vcruntime.h:310:47: 
> note:
> ?????? expanded from macro '_CRT_DEPRECATE_TEXT'
> #define _CRT_DEPRECATE_TEXT(_Text) __declspec(deprecated(_Text))
> ?????????????????????????????????????????????? ^
> 1 warning generated.
> -----------------------------------------------------------------------
>
> Should cpl_port be updated to use _stricmp or is there a better 
> alternative (I wondered about strcasecmp but don't see it) ?
>
> I see that
> ???? frmts/mrsid_lidar/makefile.vc
> sets
> ???? EXTRAFLAGS = $(MRSID_INCLUDE) -D_CRT_SECURE_NO_WARNINGS /Zc:wchar_t-
> but I would rather not turn off warnings, since my code is clean 
> enough to use? -Wall -Wextra -Weverything on linux.
>
> Thanks.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From andrew.bell.ia at gmail.com  Wed Apr  7 09:07:16 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 7 Apr 2021 12:07:16 -0400
Subject: [gdal-dev] stricmp in cpl_port.h
In-Reply-To: <e86b565-4dcb-96fd-8149-a4ac4316387e@aitchison.me.uk>
References: <ef5f7820-8021-ac5-445-5954f1e1d7a2@aitchison.me.uk>
 <CACJ51z3FO+sCXCiotwQh=1QPmFWAcRrB0zXnaiigEaapSf6B_g@mail.gmail.com>
 <e86b565-4dcb-96fd-8149-a4ac4316387e@aitchison.me.uk>
Message-ID: <CACJ51z0Q2ZU9DszWHypOzOeqH_WRbwem+3En=vfff+2yTHnRbQ@mail.gmail.com>

On Wed, Apr 7, 2021, 11:48 AM Andrew C Aitchison <andrew at aitchison.me.uk>
wrote:

>
> On Wed, 7 Apr 2021, Andrew Bell wrote:
>
> > Dare I suggest getting rid of EQUAL?
>
> Since the purpose of EQUALS is to compare two strings, that would
> be passing the buck. Without it developers would have to solve this
> issue for each platform each time, making it more likely that someone
> would break a platform that they don't use.
>

You could write something generic that wouldn't need specialization for
different architectures, eliminating this kind of problem. That's all I was
meaning.

>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210407/e3cecce8/attachment-0001.html>

From rlelamer at hotmail.fr  Wed Apr  7 10:50:24 2021
From: rlelamer at hotmail.fr (Hotmail)
Date: Wed, 7 Apr 2021 19:50:24 +0200
Subject: [gdal-dev] Merging TIFF files creates offset / deformation
In-Reply-To: <e86b565-4dcb-96fd-8149-a4ac4316387e@aitchison.me.uk>
References: <ef5f7820-8021-ac5-445-5954f1e1d7a2@aitchison.me.uk>
 <CACJ51z3FO+sCXCiotwQh=1QPmFWAcRrB0zXnaiigEaapSf6B_g@mail.gmail.com>
 <e86b565-4dcb-96fd-8149-a4ac4316387e@aitchison.me.uk>
Message-ID: <PR3P193MB0507312F9259C83B28E6E8CDB6759@PR3P193MB0507.EURP193.PROD.OUTLOOK.COM>

Hi,

I have a PNG library (524288 tiles of 256px * 256px) which I georeferenced via GDAL.

# This first part works correctly.
?  ullr:

> ulx = (360 * (column / 1024)) - 180
> uly = 90 - (180 * (line / 512))
> lrx = ulx + 0.3515625
> lry = uly - 0.3515625
> ULLR = ulx + '' + uly + '' + lrx + '' + lry

> gdal_translate -of VRT -a_srs EPSG:4326 -co NBITS=1 Path/Of/Input.png Path/Of/Output.vrt -a_ullr + ULLR
>
> gdalwarp -s_srs EPSG:4326 -t_srs EPSG:3857 -co NBITS=1 Path/Of/Input.vrt Path/Of/Output.tiff

# The second part works correctly too
I merge the tiles of a row (1024 TIFF tiles) using a VRT then from it I create the TIFF file

> #!/bin/bash
>
> for i in `seq 0 1 511`;
> do
>         gdalbuildvrt Path/Of/lines_vrt/map_$i.vrt Path/Of/tiff/map_11_*_$i.tiff
>         gdal_translate -co NBITS=1 Path/Of/lines_vrt/map_$i.vrt Path/Of/lines_tiff/map_$i.tiff
> done

Here if I use gdal_merge.py, either I get an invalid file (1.xMo while the lines are approx 60Mo) or I observe a offset / deformation ... (In QGIS)

# The last part doesn't work properly (and I don't know why ...)
Here I am merging all the lines (TIFF files) into a global TIFF file using the same method as before. (with a list.txt file)

> #!/bin/bash
>
> gdalbuildvrt -input_file_list Path/Of/lines_tiff/list.txt Path/Of/global_vrt/map_global.vrt
> gdal_translate -co NBITS=1 Path/Of/global_vrt/map_global.vrt Path/Of/map_global.tiff

and I observe a offset / deformation. (In QGIS again)

I wonder what am I doing that is wrong

My final goal is to use the global file (TIFF) with gdal2tiles.py (Tiles overlay on GMaps / OSM)

Thanks

From eruiz at aplitop.com  Thu Apr  8 01:51:26 2021
From: eruiz at aplitop.com (Elena Ruiz)
Date: Thu, 8 Apr 2021 08:51:26 +0000
Subject: [gdal-dev] HTTP 401 error with WMS
References: <3d652b5c-aa92-4a2a-85be-25316f1f7b0b.ba94d704-e79f-4907-b4e6-7c540f2b307c.fc8edc89-57af-4a95-990a-fda276937bf8@emailsignatures365.codetwo.com>
Message-ID: <AS8P192MB13839DA2A62CDE623ACA2A1EBB749@AS8P192MB1383.EURP192.PROD.OUTLOOK.COM>

Hello, I trying a WMS web service with gdal, but I have different results depend on I use a url in a web browser or I use the gdal commands.
If I put this url in Crome:
https://wms.mapa.gob.es/sigpac/ows?FORMAT=image/jpeg&HEIGHT=99&LAYERS=EEPP&WIDTH=183&SERVICE=WMS&BBOX=413276.0389803443,4066482.0439935336,675346.7028941214,4208125.2305295570&REQUEST=GetMap&TRANSPARENT=FALSE&STYLES=&VERSION=1.3.0&CRS=EPSG:25830

I get an image:

[cid:image002.jpg at 01D72C65.1B877460]

But If I use the same parameters in a XML file, like as this:

<GDAL_WMS>
  <Service name="WMS">
    <Version>1.3.0</Version>
    <ServerUrl>https://wms.mapa.gob.es/sigpac/ows?SERVICE=WMS&amp;username=&amp;password=</ServerUrl>
    <Layers>EEPP</Layers>
    <CRS>EPSG:25830</CRS>
    <ImageFormat>image/jpeg</ImageFormat>
    <Transparent>FALSE</Transparent>
    <BBoxOrder>xyXY</BBoxOrder>
  </Service>
  <DataWindow>
    <UpperLeftX>413276.0389803443</UpperLeftX>
    <UpperLeftY>4208125.2305295570</UpperLeftY>
    <LowerRightX>675346.7028941214</LowerRightX>
    <LowerRightY>4066482.0439935336</LowerRightY>
    <SizeX>183</SizeX>
    <SizeY>99</SizeY>
  </DataWindow>
  <Timeout>1600</Timeout>
  <BandsCount>3</BandsCount>
  <BlockSizeX>1024</BlockSizeX>
  <BlockSizeY>1024</BlockSizeY>
  <OverviewCount>20</OverviewCount>
  <UserPwd>:</UserPwd>
  <UnsafeSSL>true</UnsafeSSL>
  <ZeroBlockHttpCodes></ZeroBlockHttpCodes>
</GDAL_WMS>


And then I run the next gdal command: gdal_translate -of JPEG -outsize 183 99 C:\Users\elena\AppData\Local\Temp\tmpnuevo.xml C:\Users\elena\AppData\Local\Temp\miimagen.jpeg
The result is :

Input file size is 183, 99
0ERROR 1: GDALWMS: Unable to download block 0, 0.
URL: <!doctype html><html lang="es"><head><title>Estado HTTP 401 ??? No autorizado</title><style type="text/css">body {font-family:Tahoma,Arial,sans-serif;} h1, h2, h3, b {color:white;background-color:#525D76;} h1 {font-size:22px;} h2 {font-size:16px;} h3 {font-size:14px;} p {font-size:12px;} a {color:black;} .line {height:1px;background-color:#525D76;border:none;}</style></head><body><h1>Estado HTTP 401 ??? No autorizado</h1><hr class="line" /><p><b>Tipo</b> Informe de estado</p><p><b>mensaje</b> Unauthorized</p><p><b>Descripci??n</b> Este requerimiento requiere autenticaci??n HTTP.</p><hr class="line" /><h3>Apache Tomcat/9.0.37</h3></body></html>
  HTTP status code: 401, error: <!doctype html><html lang="es"><head><title>Estado HTTP 401 ??? No autorizado</title><style type="text/css">body {font-family:Tahoma,Arial,sans-serif;} h1, h2, h3, b {color:white;background-color:#525D76;} h1 {font-size:22px;} h2 {font-size:16px;} h3 {font-size:14px;} p {font-size:12px;} a {color:black;} .line {height:1px;background-color:#525D76;border:none;}</style></head><body><h1>Estado HTTP 401 ??? No autorizado</h1><hr class="line" /><p><b>Tipo</b> Informe de estado</p><p><b>mensaje</b> Unauthorized</p><p><b>Descripci??n</b> Este requerimiento requiere autenticaci??n HTTP.</p><hr class="line" /><h3>Apache Tomcat/9.0.37</h3></body></html>.
Add the HTTP status code to <ZeroBlockHttpCodes> to ignore this error (see http://www.gdal.org/frmt_wms.html).
ERROR 1: C:\Users\elena\AppData\Local\Temp\tmpnuevo.xml, band 1: IReadBlock failed at X offset 0, Y offset 0: GDALWMS: Unable to download block 0, 0.
URL: <!doctype html><html lang="es"><head><title>Estado HTTP 401 ??? No autorizado</title><style type="text/css">body {font-family:Tahoma,Arial,sans-serif;} h1, h2, h3, b {color:white;background-color:#525D76;} h1 {font-size:22px;} h2 {font-size:16px;} h3 {font-size:14px;} p {font-size:12px;} a {color:black;} .line {height:1px;background-color:#525D76;border:none;}</style></head><body><h1>Estado HTTP 401 ??? No autorizado</h1><hr class="line" /><p><b>Tipo</b> Informe de estado</p><p><b>mensaje</b> Unauthorized</p><p><b>Descripci??n</b> Este requerimiento requiere autenticaci??n HTTP.</p><hr class="line" /><h3>Apache Tomcat/9.0.37</h3></body></html>
  HTTP status code: 401, error: <!doctype html><html lang="es"><head><title>Estado HTTP 401 ??? No autorizado</title><style type="text/css">body {font-family:Tahoma,Arial,sans-serif;} h1, h2, h3, b {color:white;background-color:#525D76;} h1 {font-size:22px;} h2 {font-size:16px;} h3 {font-size:14px;} p {font-size:12px;} a {color:black;} .line {height:1px;background-color:#525D76;border:none;}</style></head><body><h1>Estado HTTP 401 ??? No autorizado</h1><hr class="line" /><p><b>Tipo</b> Informe de estado</p><p><b>mensaje</b> Unauthorized</p><p><b>Descripci??n</b> Este requerimiento requiere autenticaci??n HTTP.</p><hr class="line" /><h3>Apache Tomcat/9.0.37</h3></body></html>.
Add the HTTP status code to <ZeroBlockHttpCodes> to ignore this error (see http://www.gdal.org/frmt_wms.html).

And there are not any image.
I?m using gdal 3.0, and I don?t understand why works at web browser and don?t works with gdal, I am doing something wrong? Thank you very much and regards
________________________________

[https://www.aplitop.com/descargas/firma1.jpg]


Elena Ruiz
Sofware Development & Technical Support
Tel. +34 952 43 97 71
eruiz at aplitop.com
Sumatra, 9 - 29190 M?laga (Spain)
www.aplitop.com

[cid:SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png]<https://www.facebook.com/AplitopSL/>   [cid:SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png] <https://twitter.com/aplitop>    [cid:SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png] <https://www.linkedin.com/company/aplitop>    [cid:SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png] <https://www.youtube.com/user/aplitop>


In accordance with the provisions of the European Regulation of Data Protection 2016/679 (Reglamento Europeo de Protecci?n de Datos 2016/679), we inform you that the data and the information you provide us through this medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with address at C / Sumatra, 9, Malaga, 29190, in order to answer your questions and inform you about our products. The data provided will be kept as long as it does not request its cessation and will not be transferred to third parties except in cases where there is a legal obligation. You have the right to access your personal data, correct inaccurate data or request its deletion when the data is no longer necessary for the purposes that were collected, as well as any rights recognized in the RGPD 2016/679

<https://www.aplitop.com/Event/en/358/intergeo-2019>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210408/fdb4ac1b/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 21862 bytes
Desc: image002.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210408/fdb4ac1b/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png
Type: image/png
Size: 365 bytes
Desc: SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210408/fdb4ac1b/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png
Type: image/png
Size: 619 bytes
Desc: SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210408/fdb4ac1b/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png
Type: image/png
Size: 468 bytes
Desc: SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210408/fdb4ac1b/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png
Type: image/png
Size: 817 bytes
Desc: SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210408/fdb4ac1b/attachment-0007.png>

From daniele.romagnoli at geo-solutions.it  Thu Apr  8 03:23:49 2021
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Thu, 8 Apr 2021 12:23:49 +0200
Subject: [gdal-dev] HTTP 401 error with WMS
In-Reply-To: <AS8P192MB13839DA2A62CDE623ACA2A1EBB749@AS8P192MB1383.EURP192.PROD.OUTLOOK.COM>
References: <3d652b5c-aa92-4a2a-85be-25316f1f7b0b.ba94d704-e79f-4907-b4e6-7c540f2b307c.fc8edc89-57af-4a95-990a-fda276937bf8@emailsignatures365.codetwo.com>
 <AS8P192MB13839DA2A62CDE623ACA2A1EBB749@AS8P192MB1383.EURP192.PROD.OUTLOOK.COM>
Message-ID: <CAJaHrDzbgtd-kq+eL2uQBy7X+fkFHM=UZ0R6U1_fN1ZyLhdp9A@mail.gmail.com>

Hello Elena,
the error messages report "Unauthorized".
I would try by modifying the ServerlUrl, removing the user and password
empty parameters, so that it just contains the base WMS url:

<ServerUrl>https://wms.mapa.gob.es/sigpac/ows?SERVICE=WMS</ServerUrl>

and also removing the <UserPwd>:</UserPwd> tag at the bottom of your xml.

Let us know if that works.

Regards,
Daniele








On Thu, Apr 8, 2021 at 10:51 AM Elena Ruiz <eruiz at aplitop.com> wrote:

> Hello, I trying a WMS web service with gdal, but I have different results
> depend on I use a url in a web browser or I use the gdal commands.
>
> If I put this url in Crome:
>
>
> https://wms.mapa.gob.es/sigpac/ows?FORMAT=image/jpeg&HEIGHT=99&LAYERS=EEPP&WIDTH=183&SERVICE=WMS&BBOX=413276.0389803443,4066482.0439935336,675346.7028941214,4208125.2305295570&REQUEST=GetMap&TRANSPARENT=FALSE&STYLES=&VERSION=1.3.0&CRS=EPSG:25830
>
>
>
> I get an image:
>
>
>
>
>
> But If I use the same parameters in a XML file, like as this:
>
>
>
> <GDAL_WMS>
>
>   <Service name="WMS">
>
>     <Version>1.3.0</Version>
>
>     <ServerUrl>
> https://wms.mapa.gob.es/sigpac/ows?SERVICE=WMS&amp;username=&amp;password=
> </ServerUrl>
>
>     <Layers>EEPP</Layers>
>
>     <CRS>EPSG:25830</CRS>
>
>     <ImageFormat>image/jpeg</ImageFormat>
>
>     <Transparent>FALSE</Transparent>
>
>     <BBoxOrder>xyXY</BBoxOrder>
>
>   </Service>
>
>   <DataWindow>
>
>     <UpperLeftX>413276.0389803443</UpperLeftX>
>
>     <UpperLeftY>4208125.2305295570</UpperLeftY>
>
>     <LowerRightX>675346.7028941214</LowerRightX>
>
>     <LowerRightY>4066482.0439935336</LowerRightY>
>
>     <SizeX>183</SizeX>
>
>     <SizeY>99</SizeY>
>
>   </DataWindow>
>
>   <Timeout>1600</Timeout>
>
>   <BandsCount>3</BandsCount>
>
>   <BlockSizeX>1024</BlockSizeX>
>
>   <BlockSizeY>1024</BlockSizeY>
>
>   <OverviewCount>20</OverviewCount>
>
>   <UserPwd>:</UserPwd>
>
>   <UnsafeSSL>true</UnsafeSSL>
>
>   <ZeroBlockHttpCodes></ZeroBlockHttpCodes>
>
> </GDAL_WMS>
>
>
>
>
>
> And then I run the next gdal command: gdal_translate -of JPEG -outsize 183
> 99 C:\Users\elena\AppData\Local\Temp\tmpnuevo.xml
> C:\Users\elena\AppData\Local\Temp\miimagen.jpeg
>
> The result is :
>
>
>
> Input file size is 183, 99
>
> 0ERROR 1: GDALWMS: Unable to download block 0, 0.
>
> URL: <!doctype html><html lang="es"><head><title>Estado HTTP 401 ??? No
> autorizado</title><style type="text/css">body
> {font-family:Tahoma,Arial,sans-serif;} h1, h2, h3, b
> {color:white;background-color:#525D76;} h1 {font-size:22px;} h2
> {font-size:16px;} h3 {font-size:14px;} p {font-size:12px;} a {color:black;}
> .line
> {height:1px;background-color:#525D76;border:none;}</style></head><body><h1>Estado
> HTTP 401 ??? No autorizado</h1><hr class="line" /><p><b>Tipo</b> Informe de
> estado</p><p><b>mensaje</b> Unauthorized</p><p><b>Descripci??n</b> Este
> requerimiento requiere autenticaci??n HTTP.</p><hr class="line"
> /><h3>Apache Tomcat/9.0.37</h3></body></html>
>
>   HTTP status code: 401, error: <!doctype html><html
> lang="es"><head><title>Estado HTTP 401 ??? No autorizado</title><style
> type="text/css">body {font-family:Tahoma,Arial,sans-serif;} h1, h2, h3, b
> {color:white;background-color:#525D76;} h1 {font-size:22px;} h2
> {font-size:16px;} h3 {font-size:14px;} p {font-size:12px;} a {color:black;}
> .line
> {height:1px;background-color:#525D76;border:none;}</style></head><body><h1>Estado
> HTTP 401 ??? No autorizado</h1><hr class="line" /><p><b>Tipo</b> Informe de
> estado</p><p><b>mensaje</b> Unauthorized</p><p><b>Descripci??n</b> Este
> requerimiento requiere autenticaci??n HTTP.</p><hr class="line"
> /><h3>Apache Tomcat/9.0.37</h3></body></html>.
>
> Add the HTTP status code to <ZeroBlockHttpCodes> to ignore this error (see
> http://www.gdal.org/frmt_wms.html).
>
> ERROR 1: C:\Users\elena\AppData\Local\Temp\tmpnuevo.xml, band 1:
> IReadBlock failed at X offset 0, Y offset 0: GDALWMS: Unable to download
> block 0, 0.
>
> URL: <!doctype html><html lang="es"><head><title>Estado HTTP 401 ??? No
> autorizado</title><style type="text/css">body
> {font-family:Tahoma,Arial,sans-serif;} h1, h2, h3, b
> {color:white;background-color:#525D76;} h1 {font-size:22px;} h2
> {font-size:16px;} h3 {font-size:14px;} p {font-size:12px;} a {color:black;}
> .line
> {height:1px;background-color:#525D76;border:none;}</style></head><body><h1>Estado
> HTTP 401 ??? No autorizado</h1><hr class="line" /><p><b>Tipo</b> Informe de
> estado</p><p><b>mensaje</b> Unauthorized</p><p><b>Descripci??n</b> Este
> requerimiento requiere autenticaci??n HTTP.</p><hr class="line"
> /><h3>Apache Tomcat/9.0.37</h3></body></html>
>
>   HTTP status code: 401, error: <!doctype html><html
> lang="es"><head><title>Estado HTTP 401 ??? No autorizado</title><style
> type="text/css">body {font-family:Tahoma,Arial,sans-serif;} h1, h2, h3, b
> {color:white;background-color:#525D76;} h1 {font-size:22px;} h2
> {font-size:16px;} h3 {font-size:14px;} p {font-size:12px;} a {color:black;}
> .line
> {height:1px;background-color:#525D76;border:none;}</style></head><body><h1>Estado
> HTTP 401 ??? No autorizado</h1><hr class="line" /><p><b>Tipo</b> Informe de
> estado</p><p><b>mensaje</b> Unauthorized</p><p><b>Descripci??n</b> Este
> requerimiento requiere autenticaci??n HTTP.</p><hr class="line"
> /><h3>Apache Tomcat/9.0.37</h3></body></html>.
>
> Add the HTTP status code to <ZeroBlockHttpCodes> to ignore this error (see
> http://www.gdal.org/frmt_wms.html).
>
>
>
> And there are not any image.
>
> I?m using gdal 3.0, and I don?t understand why works at web browser and
> don?t works with gdal, I am doing something wrong? Thank you very much and
> regards
> ------------------------------
>
> *Elena Ruiz *
> Sofware Development & Technical Support
> Tel. +34 952 43 97 71
> eruiz at aplitop.com
> Sumatra, 9 - 29190 M?laga (Spain)
>
>
> *www.aplitop.com <http://www.aplitop.com>
> <https://www.facebook.com/AplitopSL/>   <https://twitter.com/aplitop>
> <https://www.linkedin.com/company/aplitop>
> <https://www.youtube.com/user/aplitop>*
>
> In accordance with the provisions of the European Regulation of Data
> Protection 2016/679 (Reglamento Europeo de Protecci?n de Datos 2016/679),
> we inform you that the data and the information you provide us through this
> medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with
> address at C / Sumatra, 9, Malaga, 29190, in order to answer your questions
> and inform you about our products. The data provided will be kept as long
> as it does not request its cessation and will not be transferred to third
> parties except in cases where there is a legal obligation. You have the
> right to access your personal data, correct inaccurate data or request its
> deletion when the data is no longer necessary for the purposes that were
> collected, as well as any rights recognized in the RGPD 2016/679
>
> <https://www.aplitop.com/Event/en/358/intergeo-2019>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Regards,
Daniele Romagnoli
==
GeoServer Professional Services from the experts! Visit http://goo.gl/it488V
for more information.
==

Ing. Daniele Romagnoli
Senior Software Engineer

GeoSolutions S.A.S.
Via di Montramito 3/A
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------

Con riferimento alla normativa sul trattamento dei dati personali (Reg. UE
2016/679 - Regolamento generale sulla protezione dei dati ?GDPR?), si
precisa che ogni circostanza inerente alla presente email (il suo
contenuto, gli eventuali allegati, etc.) ? un dato la cui conoscenza ?
riservata al/i solo/i destinatario/i indicati dallo scrivente. Se il
messaggio Le ? giunto per errore, ? tenuta/o a cancellarlo, ogni altra
operazione ? illecita. Le sarei comunque grato se potesse darmene notizia.

This email is intended only for the person or entity to which it is
addressed and may contain information that is privileged, confidential or
otherwise protected from disclosure. We remind that - as provided by
European Regulation 2016/679 ?GDPR? - copying, dissemination or use of this
e-mail or the information herein by anyone other than the intended
recipient is prohibited. If you have received this email by mistake, please
notify us immediately by telephone or e-mail.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210408/76f1766e/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 21862 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210408/76f1766e/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png
Type: image/png
Size: 365 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210408/76f1766e/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png
Type: image/png
Size: 619 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210408/76f1766e/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png
Type: image/png
Size: 468 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210408/76f1766e/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png
Type: image/png
Size: 817 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210408/76f1766e/attachment-0007.png>

From eruiz at aplitop.com  Thu Apr  8 03:33:36 2021
From: eruiz at aplitop.com (Elena Ruiz)
Date: Thu, 8 Apr 2021 10:33:36 +0000
Subject: [gdal-dev] gdal-dev Digest, Vol 203, Issue 15
In-Reply-To: <mailman.34457.1617877458.26371.gdal-dev@lists.osgeo.org>
References: <mailman.34457.1617877458.26371.gdal-dev@lists.osgeo.org>
 <3d652b5c-aa92-4a2a-85be-25316f1f7b0b.ba94d704-e79f-4907-b4e6-7c540f2b307c.78ce0dcc-2a55-4292-b036-54667726a336@emailsignatures365.codetwo.com>
Message-ID: <AS8P192MB1383B4598BF72F8B6592E59CBB749@AS8P192MB1383.EURP192.PROD.OUTLOOK.COM>

Thank Daniele, I have tried your recommendations, and now works... I had tried hundreds of examples of  web services that included the empty fields of the user and password, and they worked perfectly, but from what it seems this service does not support it, thank you very much again

-----Mensaje original-----
De: gdal-dev <gdal-dev-bounces at lists.osgeo.org> En nombre de gdal-dev-request at lists.osgeo.org
Enviado el: jueves, 8 de abril de 2021 12:24
Para: gdal-dev at lists.osgeo.org
Asunto: gdal-dev Digest, Vol 203, Issue 15

Send gdal-dev mailing list submissions to
	gdal-dev at lists.osgeo.org

To subscribe or unsubscribe via the World Wide Web, visit
	https://lists.osgeo.org/mailman/listinfo/gdal-dev
or, via email, send a message with subject or body 'help' to
	gdal-dev-request at lists.osgeo.org

You can reach the person managing the list at
	gdal-dev-owner at lists.osgeo.org

When replying, please edit your Subject line so it is more specific than "Re: Contents of gdal-dev digest..."


Today's Topics:

   1. Re: HTTP 401 error with WMS (Daniele Romagnoli)


----------------------------------------------------------------------

Message: 1
Date: Thu, 8 Apr 2021 12:23:49 +0200
From: Daniele Romagnoli <daniele.romagnoli at geo-solutions.it>
To: Elena Ruiz <eruiz at aplitop.com>
Cc: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] HTTP 401 error with WMS
Message-ID:
	<CAJaHrDzbgtd-kq+eL2uQBy7X+fkFHM=UZ0R6U1_fN1ZyLhdp9A at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Hello Elena,
the error messages report "Unauthorized".
I would try by modifying the ServerlUrl, removing the user and password empty parameters, so that it just contains the base WMS url:

<ServerUrl>https://wms.mapa.gob.es/sigpac/ows?SERVICE=WMS</ServerUrl>

and also removing the <UserPwd>:</UserPwd> tag at the bottom of your xml.

Let us know if that works.

Regards,
Daniele








On Thu, Apr 8, 2021 at 10:51 AM Elena Ruiz <eruiz at aplitop.com> wrote:

> Hello, I trying a WMS web service with gdal, but I have different 
> results depend on I use a url in a web browser or I use the gdal commands.
>
> If I put this url in Crome:
>
>
> https://wms.mapa.gob.es/sigpac/ows?FORMAT=image/jpeg&HEIGHT=99&LAYERS=
> EEPP&WIDTH=183&SERVICE=WMS&BBOX=413276.0389803443,4066482.0439935336,6
> 75346.7028941214,4208125.2305295570&REQUEST=GetMap&TRANSPARENT=FALSE&S
> TYLES=&VERSION=1.3.0&CRS=EPSG:25830
>
>
>
> I get an image:
>
>
>
>
>
> But If I use the same parameters in a XML file, like as this:
>
>
>
> <GDAL_WMS>
>
>   <Service name="WMS">
>
>     <Version>1.3.0</Version>
>
>     <ServerUrl>
> https://wms.mapa.gob.es/sigpac/ows?SERVICE=WMS&amp;username=&amp;passw
> ord=
> </ServerUrl>
>
>     <Layers>EEPP</Layers>
>
>     <CRS>EPSG:25830</CRS>
>
>     <ImageFormat>image/jpeg</ImageFormat>
>
>     <Transparent>FALSE</Transparent>
>
>     <BBoxOrder>xyXY</BBoxOrder>
>
>   </Service>
>
>   <DataWindow>
>
>     <UpperLeftX>413276.0389803443</UpperLeftX>
>
>     <UpperLeftY>4208125.2305295570</UpperLeftY>
>
>     <LowerRightX>675346.7028941214</LowerRightX>
>
>     <LowerRightY>4066482.0439935336</LowerRightY>
>
>     <SizeX>183</SizeX>
>
>     <SizeY>99</SizeY>
>
>   </DataWindow>
>
>   <Timeout>1600</Timeout>
>
>   <BandsCount>3</BandsCount>
>
>   <BlockSizeX>1024</BlockSizeX>
>
>   <BlockSizeY>1024</BlockSizeY>
>
>   <OverviewCount>20</OverviewCount>
>
>   <UserPwd>:</UserPwd>
>
>   <UnsafeSSL>true</UnsafeSSL>
>
>   <ZeroBlockHttpCodes></ZeroBlockHttpCodes>
>
> </GDAL_WMS>
>
>
>
>
>
> And then I run the next gdal command: gdal_translate -of JPEG -outsize 
> 183
> 99 C:\Users\elena\AppData\Local\Temp\tmpnuevo.xml
> C:\Users\elena\AppData\Local\Temp\miimagen.jpeg
>
> The result is :
>
>
>
> Input file size is 183, 99
>
> 0ERROR 1: GDALWMS: Unable to download block 0, 0.
>
> URL: <!doctype html><html lang="es"><head><title>Estado HTTP 401 ??? 
> No autorizado</title><style type="text/css">body 
> {font-family:Tahoma,Arial,sans-serif;} h1, h2, h3, b 
> {color:white;background-color:#525D76;} h1 {font-size:22px;} h2 
> {font-size:16px;} h3 {font-size:14px;} p {font-size:12px;} a 
> {color:black;} .line 
> {height:1px;background-color:#525D76;border:none;}</style></head><body
> ><h1>Estado HTTP 401 ??? No autorizado</h1><hr class="line" 
> /><p><b>Tipo</b> Informe de estado</p><p><b>mensaje</b> 
> Unauthorized</p><p><b>Descripci??n</b> Este requerimiento requiere 
> autenticaci??n HTTP.</p><hr class="line"
> /><h3>Apache Tomcat/9.0.37</h3></body></html>
>
>   HTTP status code: 401, error: <!doctype html><html 
> lang="es"><head><title>Estado HTTP 401 ??? No autorizado</title><style 
> type="text/css">body {font-family:Tahoma,Arial,sans-serif;} h1, h2, 
> h3, b {color:white;background-color:#525D76;} h1 {font-size:22px;} h2 
> {font-size:16px;} h3 {font-size:14px;} p {font-size:12px;} a 
> {color:black;} .line 
> {height:1px;background-color:#525D76;border:none;}</style></head><body
> ><h1>Estado HTTP 401 ??? No autorizado</h1><hr class="line" 
> /><p><b>Tipo</b> Informe de estado</p><p><b>mensaje</b> 
> Unauthorized</p><p><b>Descripci??n</b> Este requerimiento requiere 
> autenticaci??n HTTP.</p><hr class="line"
> /><h3>Apache Tomcat/9.0.37</h3></body></html>.
>
> Add the HTTP status code to <ZeroBlockHttpCodes> to ignore this error 
> (see http://www.gdal.org/frmt_wms.html).
>
> ERROR 1: C:\Users\elena\AppData\Local\Temp\tmpnuevo.xml, band 1:
> IReadBlock failed at X offset 0, Y offset 0: GDALWMS: Unable to 
> download block 0, 0.
>
> URL: <!doctype html><html lang="es"><head><title>Estado HTTP 401 ??? 
> No autorizado</title><style type="text/css">body 
> {font-family:Tahoma,Arial,sans-serif;} h1, h2, h3, b 
> {color:white;background-color:#525D76;} h1 {font-size:22px;} h2 
> {font-size:16px;} h3 {font-size:14px;} p {font-size:12px;} a 
> {color:black;} .line 
> {height:1px;background-color:#525D76;border:none;}</style></head><body
> ><h1>Estado HTTP 401 ??? No autorizado</h1><hr class="line" 
> /><p><b>Tipo</b> Informe de estado</p><p><b>mensaje</b> 
> Unauthorized</p><p><b>Descripci??n</b> Este requerimiento requiere 
> autenticaci??n HTTP.</p><hr class="line"
> /><h3>Apache Tomcat/9.0.37</h3></body></html>
>
>   HTTP status code: 401, error: <!doctype html><html 
> lang="es"><head><title>Estado HTTP 401 ??? No autorizado</title><style 
> type="text/css">body {font-family:Tahoma,Arial,sans-serif;} h1, h2, 
> h3, b {color:white;background-color:#525D76;} h1 {font-size:22px;} h2 
> {font-size:16px;} h3 {font-size:14px;} p {font-size:12px;} a 
> {color:black;} .line 
> {height:1px;background-color:#525D76;border:none;}</style></head><body
> ><h1>Estado HTTP 401 ??? No autorizado</h1><hr class="line" 
> /><p><b>Tipo</b> Informe de estado</p><p><b>mensaje</b> 
> Unauthorized</p><p><b>Descripci??n</b> Este requerimiento requiere 
> autenticaci??n HTTP.</p><hr class="line"
> /><h3>Apache Tomcat/9.0.37</h3></body></html>.
>
> Add the HTTP status code to <ZeroBlockHttpCodes> to ignore this error 
> (see http://www.gdal.org/frmt_wms.html).
>
>
>
> And there are not any image.
>
> I?m using gdal 3.0, and I don?t understand why works at web browser 
> and don?t works with gdal, I am doing something wrong? Thank you very 
> much and regards
> ------------------------------
>
> *Elena Ruiz *
> Sofware Development & Technical Support Tel. +34 952 43 97 71 
> eruiz at aplitop.com Sumatra, 9 - 29190 M?laga (Spain)
>
>
> *www.aplitop.com <http://www.aplitop.com>
> <https://www.facebook.com/AplitopSL/>   <https://twitter.com/aplitop>
> <https://www.linkedin.com/company/aplitop>
> <https://www.youtube.com/user/aplitop>*
>
> In accordance with the provisions of the European Regulation of Data 
> Protection 2016/679 (Reglamento Europeo de Protecci?n de Datos 
> 2016/679), we inform you that the data and the information you provide 
> us through this medium will be used by APLITOP, S.L., with C.I.F. 
> B-92543396 and with address at C / Sumatra, 9, Malaga, 29190, in order 
> to answer your questions and inform you about our products. The data 
> provided will be kept as long as it does not request its cessation and 
> will not be transferred to third parties except in cases where there 
> is a legal obligation. You have the right to access your personal 
> data, correct inaccurate data or request its deletion when the data is 
> no longer necessary for the purposes that were collected, as well as 
> any rights recognized in the RGPD 2016/679
>
> <https://www.aplitop.com/Event/en/358/intergeo-2019>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


--
Regards,
Daniele Romagnoli
==
GeoServer Professional Services from the experts! Visit http://goo.gl/it488V for more information.
==

Ing. Daniele Romagnoli
Senior Software Engineer

GeoSolutions S.A.S.
Via di Montramito 3/A
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------

Con riferimento alla normativa sul trattamento dei dati personali (Reg. UE
2016/679 - Regolamento generale sulla protezione dei dati ?GDPR?), si precisa che ogni circostanza inerente alla presente email (il suo contenuto, gli eventuali allegati, etc.) ? un dato la cui conoscenza ?
riservata al/i solo/i destinatario/i indicati dallo scrivente. Se il messaggio Le ? giunto per errore, ? tenuta/o a cancellarlo, ogni altra operazione ? illecita. Le sarei comunque grato se potesse darmene notizia.

This email is intended only for the person or entity to which it is addressed and may contain information that is privileged, confidential or otherwise protected from disclosure. We remind that - as provided by European Regulation 2016/679 ?GDPR? - copying, dissemination or use of this e-mail or the information herein by anyone other than the intended recipient is prohibited. If you have received this email by mistake, please notify us immediately by telephone or e-mail.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210408/76f1766e/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 21862 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210408/76f1766e/attachment.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png
Type: image/png
Size: 365 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210408/76f1766e/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png
Type: image/png
Size: 619 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210408/76f1766e/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png
Type: image/png
Size: 468 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210408/76f1766e/attachment-0002.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png
Type: image/png
Size: 817 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210408/76f1766e/attachment-0003.png>

------------------------------

Subject: Digest Footer

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev


------------------------------

End of gdal-dev Digest, Vol 203, Issue 15
*****************************************

From rlelamer at hotmail.fr  Thu Apr  8 03:39:55 2021
From: rlelamer at hotmail.fr (Hotmail)
Date: Thu, 8 Apr 2021 12:39:55 +0200
Subject: [gdal-dev] Merging TIFF files creates offset / deformation
Message-ID: <PR3P193MB0507705E6C2443CE673E62B2B6749@PR3P193MB0507.EURP193.PROD.OUTLOOK.COM>

Hi,

I have a PNG library (524288 tiles of 256px * 256px) which I georeferenced via GDAL.

# This first part works correctly.
?  ullr:

> ulx = (360 * (column / 1024)) - 180
> uly = 90 - (180 * (line / 512))
> lrx = ulx + 0.3515625
> lry = uly - 0.3515625
> ULLR = ulx + '' + uly + '' + lrx + '' + lry

> gdal_translate -of VRT -a_srs EPSG:4326 -co NBITS=1 Path/Of/Input.png Path/Of/Output.vrt -a_ullr + ULLR
> 
> gdalwarp -s_srs EPSG:4326 -t_srs EPSG:3857 -co NBITS=1 Path/Of/Input.vrt Path/Of/Output.tiff

# The second part works correctly too
I merge the tiles of a row (1024 TIFF tiles) using a VRT then from it I create the TIFF file

> #!/bin/bash
> 
> for i in `seq 0 1 511`;
> do
>        gdalbuildvrt Path/Of/lines_vrt/map_$i.vrt Path/Of/tiff/map_11_*_$i.tiff
>        gdal_translate -co NBITS=1 Path/Of/lines_vrt/map_$i.vrt Path/Of/lines_tiff/map_$i.tiff
> done

Here if I use gdal_merge.py, either I get an invalid file (1.xMo while the lines are approx 60Mo) or I observe a offset / deformation ... (In QGIS)

# The last part doesn't work properly (and I don't know why ...)
Here I am merging all the lines (TIFF files) into a global TIFF file using the same method as before. (with a list.txt file)

> #!/bin/bash
> 
> gdalbuildvrt -input_file_list Path/Of/lines_tiff/list.txt Path/Of/global_vrt/map_global.vrt
> gdal_translate -co NBITS=1 Path/Of/global_vrt/map_global.vrt Path/Of/map_global.tiff

and I observe a offset / deformation. (In QGIS again)

I wonder what am I doing that is wrong

My final goal is to use the global file (TIFF) with gdal2tiles.py (Tiles overlay on GMaps / OSM)

Thanks



From loridigia at gmail.com  Thu Apr  8 04:31:58 2021
From: loridigia at gmail.com (Lorenzo Di Giacomo)
Date: Thu, 8 Apr 2021 13:31:58 +0200
Subject: [gdal-dev] "gdalbuildvrt does not support rotated geo transforms"
Message-ID: <CAERmyNQTQsWBbrATH2kMafurVgCTX_Y1OnfUpKpK5wN6FVpXpw@mail.gmail.com>

Hi, do you know why this happens when i try to merge tiles of a specific
tiff?
How can check if a tiff had a rotated geo transforms? And how can i fix it
before merging it?
Here are some QGIS info about the tiff:
SR EPSG:4326 - WGS 84 - Geografico
Estensione -179.9999999999999716,-90.0040001037068436 :
180.0080002074136871,89.9999999999999858
Unit? gradi
Larghezza 54000
Altezza 27000
Tipo di dato Byte- intero senza segno di 8 bit
Descrizione Driver GDAL GTiff
Metadato Driver GDAL GeoTIFF
Descrizione dell'insieme di dati
Compressione
Banda 1

   - STATISTICS_APPROXIMATE=YES
   - STATISTICS_MAXIMUM=255
   - STATISTICS_MEAN=5.3210525813876
   - STATISTICS_MINIMUM=0
   - STATISTICS_STDDEV=18.136379276344
   - STATISTICS_VALID_PERCENT=100

Banda 2

   - STATISTICS_APPROXIMATE=YES
   - STATISTICS_MAXIMUM=255
   - STATISTICS_MEAN=10.134402838017
   - STATISTICS_MINIMUM=1
   - STATISTICS_STDDEV=17.628760932834
   - STATISTICS_VALID_PERCENT=100

Banda 3

   - STATISTICS_APPROXIMATE=YES
   - STATISTICS_MAXIMUM=255
   - STATISTICS_MEAN=41.73256634051
   - STATISTICS_MINIMUM=28
   - STATISTICS_STDDEV=20.687348771707
   - STATISTICS_VALID_PERCENT=100

Maggiori informazioni
Dimensioni X: 54000 Y:.27000 Bande: 3
Origine -180,90
Dimensione pixel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210408/9604d859/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Apr  8 05:30:31 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 8 Apr 2021 05:30:31 -0700 (MST)
Subject: [gdal-dev] "gdalbuildvrt does not support rotated geo
 transforms"
In-Reply-To: <CAERmyNQTQsWBbrATH2kMafurVgCTX_Y1OnfUpKpK5wN6FVpXpw@mail.gmail.com>
References: <CAERmyNQTQsWBbrATH2kMafurVgCTX_Y1OnfUpKpK5wN6FVpXpw@mail.gmail.com>
Message-ID: <1617885031511-0.post@n6.nabble.com>

Hi,

Try with gdalinfo, it should reveal the rotation. And with gdalwarp you can
convert the image into north-up.

-Jukka Rahkonen-


Lorenzo Di Giacomo wrote
> Hi, do you know why this happens when i try to merge tiles of a specific
> tiff?
> How can check if a tiff had a rotated geo transforms? And how can i fix it
> before merging it?





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From runette at gmail.com  Sun Apr 11 03:06:50 2021
From: runette at gmail.com (Paul Harwood)
Date: Sun, 11 Apr 2021 11:06:50 +0100
Subject: [gdal-dev] Broken Link to buildbot.osgeo.org
Message-ID: <CAE8nN5NjT+WiXWnry4d5yUyFXqNQmSFvDHKGmuSumBPBTC8h8w@mail.gmail.com>

The new page for the c# bindings - i.e. https://gdal.org/api/csharp.html
includes a link to buildbot.osgeo.org.

This link does not work. Neither does any port on that server that I can
think of.

I am more than willing to create a PR to fix this but I have no idea what
the correct version should be.

Does anyone know?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210411/2d58e41c/attachment.html>

From even.rouault at spatialys.com  Sun Apr 11 03:11:57 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 11 Apr 2021 12:11:57 +0200
Subject: [gdal-dev] Broken Link to buildbot.osgeo.org
In-Reply-To: <CAE8nN5NjT+WiXWnry4d5yUyFXqNQmSFvDHKGmuSumBPBTC8h8w@mail.gmail.com>
References: <CAE8nN5NjT+WiXWnry4d5yUyFXqNQmSFvDHKGmuSumBPBTC8h8w@mail.gmail.com>
Message-ID: <8f65de52-16ef-3527-75eb-f2249caafe1e@spatialys.com>

You can safely remove that sentence about buildbot. The C# bindings are 
tested in some config(s) of our current CI, but I don't see the point of 
mentioning that

Le 11/04/2021 ? 12:06, Paul Harwood a ?crit?:
> The new page for the c# bindings - i.e. 
> https://gdal.org/api/csharp.html <https://gdal.org/api/csharp.html> 
> includes a link to buildbot.osgeo.org <http://buildbot.osgeo.org>.
>
> This link does not work. Neither does any port on that server that I 
> can think of.
>
> I am more than willing to create a PR to fix this but I have no idea 
> what the correct version should be.
>
> Does anyone know?
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210411/d6989d8c/attachment.html>

From runette at gmail.com  Sun Apr 11 03:15:50 2021
From: runette at gmail.com (Paul Harwood)
Date: Sun, 11 Apr 2021 11:15:50 +0100
Subject: [gdal-dev] Broken Link to buildbot.osgeo.org
In-Reply-To: <8f65de52-16ef-3527-75eb-f2249caafe1e@spatialys.com>
References: <CAE8nN5NjT+WiXWnry4d5yUyFXqNQmSFvDHKGmuSumBPBTC8h8w@mail.gmail.com>
 <8f65de52-16ef-3527-75eb-f2249caafe1e@spatialys.com>
Message-ID: <CAE8nN5MOBfeWuUXb59qo0dwTY3=0tqbAr-yfGxYgq_zNzbW2qQ@mail.gmail.com>

I thought that might be the answer - I will create a PR.

I have some wider questions about the c# compilation which led me there but
I will create a new thread for that.

On Sun, 11 Apr 2021 at 11:12, Even Rouault <even.rouault at spatialys.com>
wrote:

> You can safely remove that sentence about buildbot. The C# bindings are
> tested in some config(s) of our current CI, but I don't see the point of
> mentioning that
> Le 11/04/2021 ? 12:06, Paul Harwood a ?crit :
>
> The new page for the c# bindings - i.e. https://gdal.org/api/csharp.html
> includes a link to buildbot.osgeo.org.
>
> This link does not work. Neither does any port on that server that I can
> think of.
>
> I am more than willing to create a PR to fix this but I have no idea what
> the correct version should be.
>
> Does anyone know?
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210411/3b05daba/attachment.html>

From runette at gmail.com  Sun Apr 11 04:08:48 2021
From: runette at gmail.com (Paul Harwood)
Date: Sun, 11 Apr 2021 12:08:48 +0100
Subject: [gdal-dev] Wiki page with current maintainers per sub-system
In-Reply-To: <83791e74-2b70-f9be-f209-d5daa1738639@osgeopt.pt>
References: <30e033a1-621b-c8d2-a8fc-ee9e9b78018b@spatialys.com>
 <83791e74-2b70-f9be-f209-d5daa1738639@osgeopt.pt>
Message-ID: <CAE8nN5P37xXKwYjBFngvBwXP339yMWwHq29o0z0+xuQtMkbPoQ@mail.gmail.com>

It is a bit worrying to see the C# bings with no maintainer since I have a
project that is totally dependent on them.

I would put my name there but I know approximately nothing about SWIG. I
would be willing to do this jointly, as a supporter etc.

On Tue, 9 Mar 2021 at 20:27, Jorge Gustavo Rocha <jgr at osgeopt.pt> wrote:

> Hi,
>
> This table a good way to distribute issues and tasks among the
> contributors, preserving the core developers.
>
> Add myself to maintain DWG and DGNv8 support, since I've made a very
> small contribution to them. I can keep the compilation with ODA
> libraries in sync, since I have such license (although I'm limited to
> linux).
>
> Regards,
>
> Jorge Gustavo
>
> ?s 18:31 de 05/03/21, Even Rouault escreveu:
> > Hi,
> >
> > following recent discussions about maintenance, I've initiated
> >
> > https://github.com/OSGeo/gdal/wiki/Maintainers-per-sub-system
> >
> > with "just" drivers and binding languages
> >
> > You're invited to check (I've put a few names that I had in mind in
> > front of a few items) and update it.
> >
> > Even
> >
>
> --
> OSGeo Portugal
> NIF: 509588190
> email: geral at osgeopt.pt
> https://www.osgeopt.pt/
>
> Pr?ximo evento: SASIG 2017, 20 a 22 de novembro, Porto
> Mais informa??es: http://osgeopt.pt/sasig2017/
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210411/96edcaac/attachment.html>

From runette at gmail.com  Sun Apr 11 08:47:54 2021
From: runette at gmail.com (Paul Harwood)
Date: Sun, 11 Apr 2021 16:47:54 +0100
Subject: [gdal-dev] C# bindings compilation
Message-ID: <CAE8nN5NVNWHu6xm25hu2Wd9_SMp6-BotZ2vZ6kfAmoyhwtChEg@mail.gmail.com>

This going to be a relatively long email probably only of interest to a few
people .. so

TL;DR

- I want to create a Conda Forge package for the C# bindings. Should I
create an RFC for that?
- Can anyone help with the error running the C# bindings on Mac and Linux
(see RUNTIME ERROR about halfway down)
- Can anyone help with the compilation issues - particularly around
libgdal.la (See COMPILE TIME PROBLEMS at the bottom)

BACKGROUND

I needed to get more experience of the C# bindings and particularly need to
work out a way to get them built correctly for Linux and OSX. I decided to
do the experimentation in Conda-Build because it is the preferred solution
for GDAL and for my project and I know it.

This was partly motivated by HoBu's previous comments about separating out
the bindings from the main package - this was a sort of investigation of
the concept.

I would actually like to take this and create a Conda-Forge package for the
C# bindings. Does this make sense? Should I push that through an RFC? The
build scripts I have at the moment are no more than proof of concept. There
is a lot of work to do to productize them (including the issues listed at
the bottom).

It is also true that while Conda is a natural choice for doing GDAL based
compilation (i.e. creating the DLLs) it is not the natural choice for .NET
or Mono distribution. I think that a little work will get around that.

*WINDOWS *
I repurposed the GDAL conda build scripts as follows  based on the docs:
<https://trac.osgeo.org/gdal/wiki/GdalOgrCsharpCompile>
meta.yml
<https://github.com/ViRGIS-Team/staged-recipes/blob/master/recipes/Gdal_CSharp/meta.yaml>
build.bat
<https://github.com/ViRGIS-Team/staged-recipes/blob/master/recipes/Gdal_CSharp/bld.bat>

This *works well* for Windows and I am getting DLLs that work.

*MAC / LINUX*
I used the same approach for mac/ linux although there is no docs onthe
Gdal side on these platforms.
meta.yml
<https://github.com/ViRGIS-Team/staged-recipes/blob/master/recipes/Gdal_CSharp/meta.yaml>
(same
as above)
build.sh
<https://github.com/ViRGIS-Team/staged-recipes/blob/master/recipes/Gdal_CSharp/build.sh>

After some fiddling (see below) I have this working on both platforms  and
it *produces all of the files that it is supposed* ... BUT

*RUNTIME PROBLEM :*

I can create and successfully compile a mono app using GDAL classes and the
GDAL DLL wrapper initializes but fails with errors like

Unhandled Exception:

System.EntryPointNotFoundException: CSharp_OSGeofGDAL_UseExceptions___
assembly:<unknown assembly> type:<unknown type> member:(null)

  at (wrapper managed-to-native) OSGeo.GDAL.GdalPINVOKE.UseExceptions()

  at OSGeo.GDAL.Gdal.UseExceptions () [0x00001] in
<032df0f4cffc4438b8ab5d2bc8d96a7e>:0

  at testapp.Program.Main (System.String[] args) [0x0000a] in
<2cfd8628af524a47a3df8aa28348af7f>:0

[ERROR] FATAL UNHANDLED EXCEPTION: System.EntryPointNotFoundException:
CSharp_OSGeofGDAL_UseExceptions___ assembly:<unknown assembly>
type:<unknown type> member:(null)

  at (wrapper managed-to-native) OSGeo.GDAL.GdalPINVOKE.UseExceptions()

  at OSGeo.GDAL.Gdal.UseExceptions () [0x00001] in
<032df0f4cffc4438b8ab5d2bc8d96a7e>:0

  at testapp.Program.Main (System.String[] args) [0x0000a] in
<2cfd8628af524a47a3df8aa28348af7f>:0

This is actually not surprising - since if I run dependency Walker on Mac I
get something like this (look at the EntryPOint highlighted)

[image: Screenshot 2021-04-10 at 16.38.44-min.png]

But on Windows I get this (which matches the request listed in the error
message

[image: Screenshot (52)-min.png]

It looks like SWIG on Mac / Linix is building the library without the
namespace? Does anyone have any ideas where I should be looking to solve
this problem.

*COMPILE TIME PROBLEMS*

There are also a couple of compile-time problems that I could do with some
help with :

- At the moment the csharp makefiles seem to be hardcoded about where to
look for the gdal include files so in each case I have to copy the Conda
distributables to the place where the makefile expects them to be. Is there
a way to put the makefile directly at the Conda env. Is there a way to do
this? I could not find anything.

- More seriously, on mac & Linux the compile script needs the libgdal.la file
and this is not distributed in the Conda package. To make this work - I had
to run a complete GDAl compile on each platform to get a copy of the
libgdal.la file and manually add that to the csharp build package. That is
not a production-ready approach! Does anyone know a way around this?

If you got this far - thanks for your time

P
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210411/83f7177b/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screenshot 2021-04-10 at 16.38.44-min.png
Type: image/png
Size: 20594 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210411/83f7177b/attachment-0002.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screenshot (52)-min.png
Type: image/png
Size: 23009 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210411/83f7177b/attachment-0003.png>

From even.rouault at spatialys.com  Sun Apr 11 11:17:25 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 11 Apr 2021 20:17:25 +0200
Subject: [gdal-dev] C# bindings compilation
In-Reply-To: <CAE8nN5NVNWHu6xm25hu2Wd9_SMp6-BotZ2vZ6kfAmoyhwtChEg@mail.gmail.com>
References: <CAE8nN5NVNWHu6xm25hu2Wd9_SMp6-BotZ2vZ6kfAmoyhwtChEg@mail.gmail.com>
Message-ID: <1f52b716-fcbf-8272-2361-e62d8d4beb37@spatialys.com>

Paul,

RFCs are only required for substantial changes that affect the 
OSGeo/GDAL repository. People who contribute to Conda Forge are free to 
do so (hopefully in good faith, that is not defacing too much the GDAL 
"brand"). If we decided to retire the C# bindings from OSGeo/GDAL this 
should probably go through some motion

Regarding build issues on Linux, I could reproduce that, but was like 
"worked half time". I finally realized that you had to run "make" twice 
because of oddities in the Makefile dependency rules. And there was the 
base swig/SWIGmake.base file generating .cpp files in swig/csharp 
whereas swig/csharp/GNUmakefile generated them in 
swig/csharp/gdal|const|ogr|osr. I've hopefully addressed and 
rationalized that in https://github.com/OSGeo/gdal/pull/3670. At least 
now on my local machine (ubuntu 20.04), one a clean swig/csharp, "cd 
swig/csharp && make && make test" works. The error you got was similar 
to the one I got

Regarding your compilation issues with your current recipee, I'd expect 
you to have to rather copy most of the content of swig/include, 
swig/include/csharp and swig/csharp in your own repository and adapt 
them to a standalone build where you include and link against an 
installed prefix of the native libgdal.

Even

Le 11/04/2021 ? 17:47, Paul Harwood a ?crit?:
> This going to be a relatively?long email probably only of interest?to 
> a few people .. so
>
> TL;DR
>
> - I want to create a Conda Forge package for the C# bindings. Should I 
> create an RFC for that?
> - Can anyone help with the error?running the C# bindings on Mac and 
> Linux (see RUNTIME ERROR about halfway down)
> - Can anyone?help with the compilation issues - particularly around 
> libgdal.la <http://libgdal.la/>?(See COMPILE TIME PROBLEMS at the bottom)
>
> BACKGROUND
>
> I needed to get more experience of the C# bindings and 
> particularly?need to work out a way to get them built correctly for 
> Linux and OSX. I decided to do the experimentation?in Conda-Build 
> because it is the preferred solution for GDAL and for my project and I 
> know it.
> This was partly motivated by HoBu's previous comments about 
> separating?out the bindings from the main package - this was a sort of 
> investigation of the concept.
>
> I would actually like to take this and create a Conda-Forge package 
> for the C# bindings. Does this make sense? Should I push that through 
> an RFC? The build scripts I have at the moment are no more than proof 
> of concept. There is a lot of work to do to productize them (including 
> the issues listed at the bottom).
>
> It is also true that while Conda is a natural choice for doing GDAL 
> based compilation (i.e. creating the DLLs) it is not the natural 
> choice for .NET or Mono distribution. I think that a little work will 
> get around that.
>
> *WINDOWS *
> I repurposed the GDAL conda build scripts as follows? based on the 
> docs: <https://trac.osgeo.org/gdal/wiki/GdalOgrCsharpCompile>
> meta.yml 
> <https://github.com/ViRGIS-Team/staged-recipes/blob/master/recipes/Gdal_CSharp/meta.yaml>
> build.bat 
> <https://github.com/ViRGIS-Team/staged-recipes/blob/master/recipes/Gdal_CSharp/bld.bat>
>
> This *works well*?for Windows and I am getting DLLs that work.
>
> *MAC / LINUX*
> I used the same approach for mac/ linux although there is no docs 
> onthe Gdal side on these platforms.
> meta.yml 
> <https://github.com/ViRGIS-Team/staged-recipes/blob/master/recipes/Gdal_CSharp/meta.yaml>?(same 
> as above)
> build.sh 
> <https://github.com/ViRGIS-Team/staged-recipes/blob/master/recipes/Gdal_CSharp/build.sh>
>
> After some fiddling (see below) I have this working on both platforms? 
> and it *produces all of the files that it is supposed*?... BUT
>
> *RUNTIME PROBLEM :*
>
> I can create and successfully compile a mono app using GDAL classes 
> and the GDAL DLL wrapper initializes but fails with errors like
>
> Unhandled Exception:
>
> System.EntryPointNotFoundException: CSharp_OSGeofGDAL_UseExceptions___ 
> assembly:<unknown assembly> type:<unknown type> member:(null)
>
> at (wrapper managed-to-native) OSGeo.GDAL.GdalPINVOKE.UseExceptions()
>
> at OSGeo.GDAL.Gdal.UseExceptions () [0x00001] in 
> <032df0f4cffc4438b8ab5d2bc8d96a7e>:0
>
> at testapp.Program.Main (System.String[] args) [0x0000a] in 
> <2cfd8628af524a47a3df8aa28348af7f>:0
>
> [ERROR] FATAL UNHANDLED EXCEPTION: System.EntryPointNotFoundException: 
> CSharp_OSGeofGDAL_UseExceptions___ assembly:<unknown assembly> 
> type:<unknown type> member:(null)
>
> at (wrapper managed-to-native) OSGeo.GDAL.GdalPINVOKE.UseExceptions()
>
> at OSGeo.GDAL.Gdal.UseExceptions () [0x00001] in 
> <032df0f4cffc4438b8ab5d2bc8d96a7e>:0
>
> at testapp.Program.Main (System.String[] args) [0x0000a] in 
> <2cfd8628af524a47a3df8aa28348af7f>:0
>
>
> This is actually not surprising - since if I run dependency Walker on 
> Mac I get something like this (look at the EntryPOint highlighted)
>
> Screenshot 2021-04-10 at 16.38.44-min.png
>
> But on Windows I get this (which matches the request listed in the 
> error message
>
> Screenshot (52)-min.png
>
> It looks like SWIG on Mac / Linix is building the library without the 
> namespace? Does anyone have any ideas where I should be looking to 
> solve this problem.
>
> *COMPILE TIME PROBLEMS*
>
> There are also a couple of compile-time problems that I could do with 
> some help with :
>
> - At the moment the csharp makefiles seem to be hardcoded about where 
> to look for the gdal include files so in each case I have to copy the 
> Conda distributables to the place where the makefile?expects them to 
> be. Is there a way to put the makefile directly at the Conda env. Is 
> there a way to do this? I could not find anything.
>
> - More seriously, on mac & Linux the compile script needs the 
> libgdal.la <http://libgdal.la/>?file and this is not distributed in 
> the Conda package. To make this work - I had to run a complete GDAl 
> compile on each platform to get a copy of the libgdal.la 
> <http://libgdal.la/>?file and manually add that to the csharp build 
> package. That is not a production-ready?approach! Does anyone know a 
> way around this?
>
> If you got this far - thanks for your time
>
> P
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210411/9f2f5a84/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screenshot 2021-04-10 at 16.38.44-min.png
Type: image/png
Size: 20594 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210411/9f2f5a84/attachment-0002.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screenshot (52)-min.png
Type: image/png
Size: 23009 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210411/9f2f5a84/attachment-0003.png>

From runette at gmail.com  Mon Apr 12 00:59:44 2021
From: runette at gmail.com (Paul Harwood)
Date: Mon, 12 Apr 2021 08:59:44 +0100
Subject: [gdal-dev] C# bindings compilation
In-Reply-To: <1f52b716-fcbf-8272-2361-e62d8d4beb37@spatialys.com>
References: <CAE8nN5NVNWHu6xm25hu2Wd9_SMp6-BotZ2vZ6kfAmoyhwtChEg@mail.gmail.com>
 <1f52b716-fcbf-8272-2361-e62d8d4beb37@spatialys.com>
Message-ID: <CAE8nN5NoOaXVYdPLMUfir-=tS=1MAXNK9rsucdbwhzkqbxPMBA@mail.gmail.com>

Thanks Even

On Sun, 11 Apr 2021 at 19:17, Even Rouault <even.rouault at spatialys.com>
wrote:

> Paul,
>
> RFCs are only required for substantial changes that affect the OSGeo/GDAL
> repository. People who contribute to Conda Forge are free to do so
> (hopefully in good faith, that is not defacing too much the GDAL "brand").
> If we decided to retire the C# bindings from OSGeo/GDAL this should
> probably go through some motion
>

Cool. I will do that then.

I would prefer if the result is at least semi-official and to have some
other people from the community listed as maintainers/owners on the package
in case something happens to me. There are too many zombie packages out
there already!

Would that be you?

> Regarding build issues on Linux, I could reproduce that, but was like
> "worked half time". I finally realized that you had to run "make" twice
> because of oddities in the Makefile dependency rules. And there was the
> base swig/SWIGmake.base file generating .cpp files in swig/csharp whereas
> swig/csharp/GNUmakefile generated them in swig/csharp/gdal|const|ogr|osr.
> I've hopefully addressed and rationalized that in
> https://github.com/OSGeo/gdal/pull/3670. At least now on my local machine
> (ubuntu 20.04), one a clean swig/csharp, "cd swig/csharp && make && make
> test" works. The error you got was similar to the one I got
>
It is good to able to see that it works and a working example. I will work
with what you have in 3670

> Regarding your compilation issues with your current recipee, I'd expect
> you to have to rather copy most of the content of swig/include,
> swig/include/csharp and swig/csharp in your own repository and adapt them
> to a standalone build where you include and link against an installed
> prefix of the native libgdal.
>

 That is sort of where I am heading. I want to avoid having anything
between the conda feedstock and the root GDAL repo (unless and until there
is any change to the way that the GDAL project manages bindings) for
maintenance reasons and to avoid creating more zombies. I.e. there is only
one definition of the SWIG objects but I have my own makefiles.

>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210412/6c23e40b/attachment.html>

From runette at gmail.com  Mon Apr 12 12:47:52 2021
From: runette at gmail.com (Paul Harwood)
Date: Mon, 12 Apr 2021 20:47:52 +0100
Subject: [gdal-dev] C# bindings compilation
In-Reply-To: <CAE8nN5NoOaXVYdPLMUfir-=tS=1MAXNK9rsucdbwhzkqbxPMBA@mail.gmail.com>
References: <CAE8nN5NVNWHu6xm25hu2Wd9_SMp6-BotZ2vZ6kfAmoyhwtChEg@mail.gmail.com>
 <1f52b716-fcbf-8272-2361-e62d8d4beb37@spatialys.com>
 <CAE8nN5NoOaXVYdPLMUfir-=tS=1MAXNK9rsucdbwhzkqbxPMBA@mail.gmail.com>
Message-ID: <CAE8nN5PP5AeeFwJc5-2TdPBHb_yOWgOeEwuF2ya=s0kHECa9dA@mail.gmail.com>

Even et al.

Just to update - your latest changes as per 3670 have done the trick. I can
now build C# bindings on top of the GDAL3.2.2 conda distribution on
Windows, Mac and Linux and have successfully run them in .NET / mono.

I solved the compile time problems with a little judicious adjusting of the
compile-time environment and now have the basis for a package. I just need
a few more adjustments to make it more production-grade and then I will
submit it - particularly around tests and around run-time paths.

I don't expect a fast turn around from conda-forge. This package does not
exactly fall into one of their normal teams :)

Does anyone else want to volunteer to be on the maintainer list for the
package? Absolutely no work needed, you just the ability to deprecate if
the package gets very out of date.

On Mon, 12 Apr 2021 at 08:59, Paul Harwood <runette at gmail.com> wrote:

> Thanks Even
>
> On Sun, 11 Apr 2021 at 19:17, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Paul,
>>
>> RFCs are only required for substantial changes that affect the OSGeo/GDAL
>> repository. People who contribute to Conda Forge are free to do so
>> (hopefully in good faith, that is not defacing too much the GDAL "brand").
>> If we decided to retire the C# bindings from OSGeo/GDAL this should
>> probably go through some motion
>>
>
> Cool. I will do that then.
>
> I would prefer if the result is at least semi-official and to have some
> other people from the community listed as maintainers/owners on the package
> in case something happens to me. There are too many zombie packages out
> there already!
>
> Would that be you?
>
>> Regarding build issues on Linux, I could reproduce that, but was like
>> "worked half time". I finally realized that you had to run "make" twice
>> because of oddities in the Makefile dependency rules. And there was the
>> base swig/SWIGmake.base file generating .cpp files in swig/csharp whereas
>> swig/csharp/GNUmakefile generated them in swig/csharp/gdal|const|ogr|osr.
>> I've hopefully addressed and rationalized that in
>> https://github.com/OSGeo/gdal/pull/3670. At least now on my local
>> machine (ubuntu 20.04), one a clean swig/csharp, "cd swig/csharp && make &&
>> make test" works. The error you got was similar to the one I got
>>
> It is good to able to see that it works and a working example. I will work
> with what you have in 3670
>
>> Regarding your compilation issues with your current recipee, I'd expect
>> you to have to rather copy most of the content of swig/include,
>> swig/include/csharp and swig/csharp in your own repository and adapt them
>> to a standalone build where you include and link against an installed
>> prefix of the native libgdal.
>>
>
>  That is sort of where I am heading. I want to avoid having anything
> between the conda feedstock and the root GDAL repo (unless and until there
> is any change to the way that the GDAL project manages bindings) for
> maintenance reasons and to avoid creating more zombies. I.e. there is only
> one definition of the SWIG objects but I have my own makefiles.
>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210412/77f77505/attachment.html>

From bjorn.harrtell at gmail.com  Mon Apr 12 13:37:41 2021
From: bjorn.harrtell at gmail.com (=?UTF-8?Q?Bj=C3=B6rn_Harrtell?=)
Date: Mon, 12 Apr 2021 22:37:41 +0200
Subject: [gdal-dev] C# bindings compilation
In-Reply-To: <CAE8nN5PP5AeeFwJc5-2TdPBHb_yOWgOeEwuF2ya=s0kHECa9dA@mail.gmail.com>
References: <CAE8nN5NVNWHu6xm25hu2Wd9_SMp6-BotZ2vZ6kfAmoyhwtChEg@mail.gmail.com>
 <1f52b716-fcbf-8272-2361-e62d8d4beb37@spatialys.com>
 <CAE8nN5NoOaXVYdPLMUfir-=tS=1MAXNK9rsucdbwhzkqbxPMBA@mail.gmail.com>
 <CAE8nN5PP5AeeFwJc5-2TdPBHb_yOWgOeEwuF2ya=s0kHECa9dA@mail.gmail.com>
Message-ID: <CANhDX=a+0VBdesxYKeDvvbG9JQ3NLdcpVwmriX+Xq2DS5_g9jA@mail.gmail.com>

Interesting. I've as of yet only had success with using what is essentially
a fork at https://github.com/MaxRev-Dev/gdal.netcore. I've in turn forked
that to enable additional drivers and made my own nuget packages that are
compatible with Debian 10 + .NET Core 3.1 which was my deployment target
and it works like a charm.

/Bj?rn

Den m?n 12 apr. 2021 kl 21:48 skrev Paul Harwood <runette at gmail.com>:

> Even et al.
>
> Just to update - your latest changes as per 3670 have done the trick. I
> can now build C# bindings on top of the GDAL3.2.2 conda distribution on
> Windows, Mac and Linux and have successfully run them in .NET / mono.
>
> I solved the compile time problems with a little judicious adjusting of
> the compile-time environment and now have the basis for a package. I just
> need a few more adjustments to make it more production-grade and then I
> will submit it - particularly around tests and around run-time paths.
>
> I don't expect a fast turn around from conda-forge. This package does not
> exactly fall into one of their normal teams :)
>
> Does anyone else want to volunteer to be on the maintainer list for the
> package? Absolutely no work needed, you just the ability to deprecate if
> the package gets very out of date.
>
> On Mon, 12 Apr 2021 at 08:59, Paul Harwood <runette at gmail.com> wrote:
>
>> Thanks Even
>>
>> On Sun, 11 Apr 2021 at 19:17, Even Rouault <even.rouault at spatialys.com>
>> wrote:
>>
>>> Paul,
>>>
>>> RFCs are only required for substantial changes that affect the
>>> OSGeo/GDAL repository. People who contribute to Conda Forge are free to do
>>> so (hopefully in good faith, that is not defacing too much the GDAL
>>> "brand"). If we decided to retire the C# bindings from OSGeo/GDAL this
>>> should probably go through some motion
>>>
>>
>> Cool. I will do that then.
>>
>> I would prefer if the result is at least semi-official and to have some
>> other people from the community listed as maintainers/owners on the package
>> in case something happens to me. There are too many zombie packages out
>> there already!
>>
>> Would that be you?
>>
>>> Regarding build issues on Linux, I could reproduce that, but was like
>>> "worked half time". I finally realized that you had to run "make" twice
>>> because of oddities in the Makefile dependency rules. And there was the
>>> base swig/SWIGmake.base file generating .cpp files in swig/csharp whereas
>>> swig/csharp/GNUmakefile generated them in swig/csharp/gdal|const|ogr|osr.
>>> I've hopefully addressed and rationalized that in
>>> https://github.com/OSGeo/gdal/pull/3670. At least now on my local
>>> machine (ubuntu 20.04), one a clean swig/csharp, "cd swig/csharp && make &&
>>> make test" works. The error you got was similar to the one I got
>>>
>> It is good to able to see that it works and a working example. I will
>> work with what you have in 3670
>>
>>> Regarding your compilation issues with your current recipee, I'd expect
>>> you to have to rather copy most of the content of swig/include,
>>> swig/include/csharp and swig/csharp in your own repository and adapt them
>>> to a standalone build where you include and link against an installed
>>> prefix of the native libgdal.
>>>
>>
>>  That is sort of where I am heading. I want to avoid having anything
>> between the conda feedstock and the root GDAL repo (unless and until there
>> is any change to the way that the GDAL project manages bindings) for
>> maintenance reasons and to avoid creating more zombies. I.e. there is only
>> one definition of the SWIG objects but I have my own makefiles.
>>
>>> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210412/85b5e5a2/attachment.html>

From runette at gmail.com  Mon Apr 12 14:08:13 2021
From: runette at gmail.com (Paul Harwood)
Date: Mon, 12 Apr 2021 22:08:13 +0100
Subject: [gdal-dev] C# bindings compilation
In-Reply-To: <CANhDX=a+0VBdesxYKeDvvbG9JQ3NLdcpVwmriX+Xq2DS5_g9jA@mail.gmail.com>
References: <CAE8nN5NVNWHu6xm25hu2Wd9_SMp6-BotZ2vZ6kfAmoyhwtChEg@mail.gmail.com>
 <1f52b716-fcbf-8272-2361-e62d8d4beb37@spatialys.com>
 <CAE8nN5NoOaXVYdPLMUfir-=tS=1MAXNK9rsucdbwhzkqbxPMBA@mail.gmail.com>
 <CAE8nN5PP5AeeFwJc5-2TdPBHb_yOWgOeEwuF2ya=s0kHECa9dA@mail.gmail.com>
 <CANhDX=a+0VBdesxYKeDvvbG9JQ3NLdcpVwmriX+Xq2DS5_g9jA@mail.gmail.com>
Message-ID: <CAE8nN5OciUC-4x0mW+KJECVKmptu9zhTgivG1OijENUtaEK=5Q@mail.gmail.com>

I must admit that I needed to do it through conda.

I am no great fan of NuGet but this is not a "package war" thing. My target
platform is Unity and that is mono based and does not use NuGet - so if I
am going to have to do some handwork to integrate the package management I
would rather do it to conda which has vastly superior cross-platform
capabilities.

But, that aside, let me make a case why this approach is better. This
approach only builds the c# bindings and runs these on top of the factory
default gdal runtime package from conda on all platforms. This means that
the available gdal version is always up to date and the drivers are the
default set of drivers. There is a small amount of manual work on the c#
package when there is a new version of gdal - in most cases it will be of
the order of "run trial compile, look at the result, accept it" in which
case the c# package will only be a few days behind the latest gdal release.
And it runs across a wider range of platforms - including Mac and Windows.

On Mon, 12 Apr 2021 at 21:37, Bj?rn Harrtell <bjorn.harrtell at gmail.com>
wrote:

> Interesting. I've as of yet only had success with using what is
> essentially a fork at https://github.com/MaxRev-Dev/gdal.netcore. I've in
> turn forked that to enable additional drivers and made my own nuget
> packages that are compatible with Debian 10 + .NET Core 3.1 which was my
> deployment target and it works like a charm.
>
> /Bj?rn
>
> Den m?n 12 apr. 2021 kl 21:48 skrev Paul Harwood <runette at gmail.com>:
>
>> Even et al.
>>
>> Just to update - your latest changes as per 3670 have done the trick. I
>> can now build C# bindings on top of the GDAL3.2.2 conda distribution on
>> Windows, Mac and Linux and have successfully run them in .NET / mono.
>>
>> I solved the compile time problems with a little judicious adjusting of
>> the compile-time environment and now have the basis for a package. I just
>> need a few more adjustments to make it more production-grade and then I
>> will submit it - particularly around tests and around run-time paths.
>>
>> I don't expect a fast turn around from conda-forge. This package does not
>> exactly fall into one of their normal teams :)
>>
>> Does anyone else want to volunteer to be on the maintainer list for the
>> package? Absolutely no work needed, you just the ability to deprecate if
>> the package gets very out of date.
>>
>> On Mon, 12 Apr 2021 at 08:59, Paul Harwood <runette at gmail.com> wrote:
>>
>>> Thanks Even
>>>
>>> On Sun, 11 Apr 2021 at 19:17, Even Rouault <even.rouault at spatialys.com>
>>> wrote:
>>>
>>>> Paul,
>>>>
>>>> RFCs are only required for substantial changes that affect the
>>>> OSGeo/GDAL repository. People who contribute to Conda Forge are free to do
>>>> so (hopefully in good faith, that is not defacing too much the GDAL
>>>> "brand"). If we decided to retire the C# bindings from OSGeo/GDAL this
>>>> should probably go through some motion
>>>>
>>>
>>> Cool. I will do that then.
>>>
>>> I would prefer if the result is at least semi-official and to have some
>>> other people from the community listed as maintainers/owners on the package
>>> in case something happens to me. There are too many zombie packages out
>>> there already!
>>>
>>> Would that be you?
>>>
>>>> Regarding build issues on Linux, I could reproduce that, but was like
>>>> "worked half time". I finally realized that you had to run "make" twice
>>>> because of oddities in the Makefile dependency rules. And there was the
>>>> base swig/SWIGmake.base file generating .cpp files in swig/csharp whereas
>>>> swig/csharp/GNUmakefile generated them in swig/csharp/gdal|const|ogr|osr.
>>>> I've hopefully addressed and rationalized that in
>>>> https://github.com/OSGeo/gdal/pull/3670. At least now on my local
>>>> machine (ubuntu 20.04), one a clean swig/csharp, "cd swig/csharp && make &&
>>>> make test" works. The error you got was similar to the one I got
>>>>
>>> It is good to able to see that it works and a working example. I will
>>> work with what you have in 3670
>>>
>>>> Regarding your compilation issues with your current recipee, I'd expect
>>>> you to have to rather copy most of the content of swig/include,
>>>> swig/include/csharp and swig/csharp in your own repository and adapt them
>>>> to a standalone build where you include and link against an installed
>>>> prefix of the native libgdal.
>>>>
>>>
>>>  That is sort of where I am heading. I want to avoid having anything
>>> between the conda feedstock and the root GDAL repo (unless and until there
>>> is any change to the way that the GDAL project manages bindings) for
>>> maintenance reasons and to avoid creating more zombies. I.e. there is only
>>> one definition of the SWIG objects but I have my own makefiles.
>>>
>>>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210412/1178b064/attachment-0001.html>

From eduardo.kanegae at gmail.com  Mon Apr 12 17:21:55 2021
From: eduardo.kanegae at gmail.com (Eduardo Kanegae)
Date: Mon, 12 Apr 2021 21:21:55 -0300
Subject: [gdal-dev] gdal2tiles - re-generate tiles only for updated regions
 of a map
Message-ID: <CAF_a5S+tXkj8QACL5hggMhVNTR+C0RQ52Y3GjaYDBszEqtVE9w@mail.gmail.com>

hi,

I'm running MapServer 7 and GDAL 2.2.1, using gdal2tiles for tile
generation tilesets for Leaflet applications.
XML files was defined as WMS datasource for gdal2tiles scripts which
contains XML/DataWindow parameters for the whole extent for the
WMS/MapServer map. A XML file is defined for each zoom level to be rendered.

Most of layers, do not have many frequent geometry updates - such as
rivers, bridges, blocks. But street lines or bus stops, sometimes have
geometry updates that could change the location of a bus stop or the
length/shape of a given street line part.

Before the tiling process, current street line layer and the new street
line layer( containing line changes or new lines or deleted ones) will be
stored in PostGIS database. Then, using spatial PostGIS functions I think
will be fine on finding locations wich contains changed objects.

But how could I update my entire tileset (from 10 to 19 zoom level) without
running re-tiling process for all zoom levels? I'd like to update only the
tile blocks which really contains updated objects.

ST_TileEnvelope could be a help for that?

thanks for any help.

Eduardo Patto Kanegae
http://www.webmapit.com.br | @webmapit

---XML
<GDAL_WMS>
<Service name="WMS">
        <Version>1.1.1</Version>
        <ServerUrl>http://myserver/myservoce?</ServerUrl>
        <SRS>EPSG:3857</SRS>
        <ImageFormat>image/png</ImageFormat>
        <Transparent>TRUE</Transparent>
        <Layers>layers2render</Layers>
</Service>
<DataWindow>
<UpperLeftX>-5260672.7616002392023802</UpperLeftX>
        <UpperLeftY>-2598374.5154764326289296</UpperLeftY>
        <LowerRightX>-5210889.5665233032777905</LowerRightX>
<LowerRightY>-2640567.8293181271292269</LowerRightY>
<SizeX>716</SizeX><SizeY>602</SizeY>
</DataWindow>
 <BandsCount>4</BandsCount>
 <ZeroBlockOnServerException>true</ZeroBlockOnServerException>
</GDAL_WMS>

--- script
gdal2tiles.py -s EPSG:3857 -z 10 -v  -u
http://myserver/tilelayers/layers2render -t
"/var/www/html/tilelayers/newlayer/" $wms_xmlfile
/var/www/html/tilelayers/$outputlayer/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210412/c19c47ab/attachment.html>

From jeannie_may at trimble.com  Mon Apr 12 19:44:46 2021
From: jeannie_may at trimble.com (Jeannie May)
Date: Tue, 13 Apr 2021 14:44:46 +1200
Subject: [gdal-dev] Gdal.Open on S3 using IAM roles
Message-ID: <CAC25Q6trTNWg4qL5uOSUxR_DVUNjmvWCrjmjNxS=zmcDd=_gHA@mail.gmail.com>

I'm new to using Gdal. How do I configure gdal to use an IAM role, rather
than defining an aws-Profile?

I get a timeout doing a gdal.Open() on a tiff file on S3 using vsis3, while
trying to use an IAM role.

I'm using MaxRev.Gdal.Core 3.2.0.250. Netcore 3.1 c#, running in a Linux
container.

Note that defining an AWS_Profile etc works ok, but I need to use IAM
roles. Prior to trying to open the file with gdal, I successfully upload
using s3Client (which uses the IAM role), so it's something specific to the
Gdal.Open().

using GetConfigOption() I can see that none of the following are set
AWS_PROFILE; AWS_ACCESS_KEY_ID; AWS_SECRET_ACCESS_KEY; AWS_SESSION_TOKEN;
AWS_NO_SIGN_REQUEST; AWS_DEFAULT_PROFILE


-- 
*Jeannie May*
Senior Software Engineer
11 Birmingham Drive, Christchurch | 963 5305 Office
www.trimble.com

Connect with us!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210413/aa41cf68/attachment.html>

From j1 at jimenezshaw.com  Tue Apr 13 01:31:00 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Tue, 13 Apr 2021 10:31:00 +0200
Subject: [gdal-dev] COG + javascript + openlayers
In-Reply-To: <CADRrdKsKo++F4WVMC-jYri3jzg+suMNZohvmV8CpEL5FsdFL+Q@mail.gmail.com>
References: <CADRrdKsKo++F4WVMC-jYri3jzg+suMNZohvmV8CpEL5FsdFL+Q@mail.gmail.com>
Message-ID: <CADRrdKuss+LRN-ERYKqiKFEn3A33Mw9=jr-Zvbu=HD=cL-892Q@mail.gmail.com>

Maybe this channel is not the best place for this question. Do you know a
better place to ask?

Thank you
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Tue, 6 Apr 2021 at 22:40, Javier Jimenez Shaw <j1 at jimenezshaw.com> wrote:

> Hi
>
> While I was reading about COG format, I thought it was great to replace
> "gdal2tiles" if the COG was properly generated (I mean, using the option
> TILING_SCHEME=GoogleMapsCompatible , and maybe something else I miss. I am
> generating it, so I can optimize that).
> Then I was expecting that geotiff.js (or any other client js library) will
> be able to do the proper RANGE request to produce the tiling that libraries
> like openlayers of leaflet is expecting. Yes, in Web Mercator projection
> with aligned tiles, so no transformation is needed.
>
> My initial target is just for RGBA uint8 images... plain vanilla. Storing
> the COG file in S3, without any proxy in between doing any conversion. Just
> relying on the RANGE request to get the needed area. My initial idea is to
> keep the openlayers/leaflet 256x256 tiles. This allows parallel requests to
> the server, and is very fast (and I do not have to refactor all my js
> code). But maybe there is a better/faster solution (again, with S3 direct
> access, no proxy in the server side. That would require deploying the
> "proxy" on every geographical region).
>
> However I have not found any proper solution (my search-fu is not the
> best, to be honest). I would like something that performs *at least* as
> fast as the tiles produced by gdal2tiles.
>
> Do you know any solution/example?
>
> Thanks
> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210413/f4dd09de/attachment.html>

From patrick.mckendree.young at gmail.com  Tue Apr 13 08:35:29 2021
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Tue, 13 Apr 2021 09:35:29 -0600
Subject: [gdal-dev] COG + javascript + openlayers
In-Reply-To: <CADRrdKuss+LRN-ERYKqiKFEn3A33Mw9=jr-Zvbu=HD=cL-892Q@mail.gmail.com>
References: <CADRrdKsKo++F4WVMC-jYri3jzg+suMNZohvmV8CpEL5FsdFL+Q@mail.gmail.com>
 <CADRrdKuss+LRN-ERYKqiKFEn3A33Mw9=jr-Zvbu=HD=cL-892Q@mail.gmail.com>
Message-ID: <CADXYQQ6GRsRmznU-Hu8FitL65tZEXR_iWShj-QieC6o7KMLEKg@mail.gmail.com>

There is a COG mailing list (not very active from the looks of it):

https://lists.osgeo.org/mailman/listinfo/cog

You might ping Vincent https://github.com/vincentsarago too!

P

On Tue, Apr 13, 2021 at 2:31 AM Javier Jimenez Shaw <j1 at jimenezshaw.com>
wrote:

> Maybe this channel is not the best place for this question. Do you know a
> better place to ask?
>
> Thank you
> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
>
> On Tue, 6 Apr 2021 at 22:40, Javier Jimenez Shaw <j1 at jimenezshaw.com>
> wrote:
>
>> Hi
>>
>> While I was reading about COG format, I thought it was great to replace
>> "gdal2tiles" if the COG was properly generated (I mean, using the option
>> TILING_SCHEME=GoogleMapsCompatible , and maybe something else I miss. I am
>> generating it, so I can optimize that).
>> Then I was expecting that geotiff.js (or any other client js library)
>> will be able to do the proper RANGE request to produce the tiling that
>> libraries like openlayers of leaflet is expecting. Yes, in Web Mercator
>> projection with aligned tiles, so no transformation is needed.
>>
>> My initial target is just for RGBA uint8 images... plain vanilla. Storing
>> the COG file in S3, without any proxy in between doing any conversion. Just
>> relying on the RANGE request to get the needed area. My initial idea is to
>> keep the openlayers/leaflet 256x256 tiles. This allows parallel requests to
>> the server, and is very fast (and I do not have to refactor all my js
>> code). But maybe there is a better/faster solution (again, with S3 direct
>> access, no proxy in the server side. That would require deploying the
>> "proxy" on every geographical region).
>>
>> However I have not found any proper solution (my search-fu is not the
>> best, to be honest). I would like something that performs *at least* as
>> fast as the tiles produced by gdal2tiles.
>>
>> Do you know any solution/example?
>>
>> Thanks
>> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
>> Entre dos pensamientos racionales
>> hay infinitos pensamientos irracionales.
>>
>> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210413/026405f0/attachment-0001.html>

From patrick.mckendree.young at gmail.com  Tue Apr 13 08:47:03 2021
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Tue, 13 Apr 2021 09:47:03 -0600
Subject: [gdal-dev] Gdal.Open on S3 using IAM roles
In-Reply-To: <CAC25Q6trTNWg4qL5uOSUxR_DVUNjmvWCrjmjNxS=zmcDd=_gHA@mail.gmail.com>
References: <CAC25Q6trTNWg4qL5uOSUxR_DVUNjmvWCrjmjNxS=zmcDd=_gHA@mail.gmail.com>
Message-ID: <CADXYQQ78qUtWRB3cWVtojvVGnYg3wLvtCqGnrNXBOz1b2q+3Dg@mail.gmail.com>

See
https://aws.amazon.com/premiumsupport/knowledge-center/iam-assume-role-cli/ ,
they describe how to assume a role and set the usual AWS_*
environment variables that GDAL should pick up.

There's discussion on vsis3 related stuff (e.g. authentication) here:
https://gdal.org/user/virtual_file_systems.html#vsis3

P

On Mon, Apr 12, 2021 at 8:45 PM Jeannie May <jeannie_may at trimble.com> wrote:

> I'm new to using Gdal. How do I configure gdal to use an IAM role, rather
> than defining an aws-Profile?
>
> I get a timeout doing a gdal.Open() on a tiff file on S3 using vsis3,
> while trying to use an IAM role.
>
> I'm using MaxRev.Gdal.Core 3.2.0.250. Netcore 3.1 c#, running in a Linux
> container.
>
> Note that defining an AWS_Profile etc works ok, but I need to use IAM
> roles. Prior to trying to open the file with gdal, I successfully upload
> using s3Client (which uses the IAM role), so it's something specific to the
> Gdal.Open().
>
> using GetConfigOption() I can see that none of the following are set
> AWS_PROFILE; AWS_ACCESS_KEY_ID; AWS_SECRET_ACCESS_KEY; AWS_SESSION_TOKEN;
> AWS_NO_SIGN_REQUEST; AWS_DEFAULT_PROFILE
>
>
> --
> *Jeannie May*
> Senior Software Engineer
> 11 Birmingham Drive, Christchurch | 963 5305 Office
> www.trimble.com
>
> Connect with us!
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210413/3a6bdba8/attachment.html>

From vincent.sarago at gmail.com  Tue Apr 13 08:55:26 2021
From: vincent.sarago at gmail.com (Vincent Sarago)
Date: Tue, 13 Apr 2021 11:55:26 -0400
Subject: [gdal-dev] COG + javascript + openlayers
In-Reply-To: <CADXYQQ6GRsRmznU-Hu8FitL65tZEXR_iWShj-QieC6o7KMLEKg@mail.gmail.com>
References: <CADRrdKsKo++F4WVMC-jYri3jzg+suMNZohvmV8CpEL5FsdFL+Q@mail.gmail.com>
 <CADRrdKuss+LRN-ERYKqiKFEn3A33Mw9=jr-Zvbu=HD=cL-892Q@mail.gmail.com>
 <CADXYQQ6GRsRmznU-Hu8FitL65tZEXR_iWShj-QieC6o7KMLEKg@mail.gmail.com>
Message-ID: <9D5BC315-BD78-438D-831A-69CAF9022063@gmail.com>

:-) 

Sorry Javier, and thanks for the ping Patrick. 

Javier, I?ve invited you to the cogeotiff slack channel, which might just be easier to contact people working on COG and dynamic tiling.

https://developmentseed.org/titiler/dynamic_tiling/ <https://developmentseed.org/titiler/dynamic_tiling/> might also be of interest for you.

Regards,

Vincent 


> On Apr 13, 2021, at 11:35 AM, Patrick Young <patrick.mckendree.young at gmail.com> wrote:
> 
> There is a COG mailing list (not very active from the looks of it):
> 
> https://lists.osgeo.org/mailman/listinfo/cog <https://lists.osgeo.org/mailman/listinfo/cog>
> 
> You might ping Vincent https://github.com/vincentsarago <https://github.com/vincentsarago> too!
> 
> P
> 
> On Tue, Apr 13, 2021 at 2:31 AM Javier Jimenez Shaw <j1 at jimenezshaw.com <mailto:j1 at jimenezshaw.com>> wrote:
> Maybe this channel is not the best place for this question. Do you know a better place to ask?
> 
> Thank you
> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
> Entre dos pensamientos racionales 
> hay infinitos pensamientos irracionales.
> 
> 
> 
> On Tue, 6 Apr 2021 at 22:40, Javier Jimenez Shaw <j1 at jimenezshaw.com <mailto:j1 at jimenezshaw.com>> wrote:
> Hi
> 
> While I was reading about COG format, I thought it was great to replace "gdal2tiles" if the COG was properly generated (I mean, using the option TILING_SCHEME=GoogleMapsCompatible , and maybe something else I miss. I am generating it, so I can optimize that).
> Then I was expecting that geotiff.js (or any other client js library) will be able to do the proper RANGE request to produce the tiling that libraries like openlayers of leaflet is expecting. Yes, in Web Mercator projection with aligned tiles, so no transformation is needed.
> 
> My initial target is just for RGBA uint8 images... plain vanilla. Storing the COG file in S3, without any proxy in between doing any conversion. Just relying on the RANGE request to get the needed area. My initial idea is to keep the openlayers/leaflet 256x256 tiles. This allows parallel requests to the server, and is very fast (and I do not have to refactor all my js code). But maybe there is a better/faster solution (again, with S3 direct access, no proxy in the server side. That would require deploying the "proxy" on every geographical region).
> 
> However I have not found any proper solution (my search-fu is not the best, to be honest). I would like something that performs at least as fast as the tiles produced by gdal2tiles.
> 
> Do you know any solution/example?
> 
> Thanks
> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
> Entre dos pensamientos racionales 
> hay infinitos pensamientos irracionales.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210413/0515cb7c/attachment.html>

From marty.sullivan at cornell.edu  Tue Apr 13 10:02:20 2021
From: marty.sullivan at cornell.edu (Marty J. Sullivan)
Date: Tue, 13 Apr 2021 17:02:20 +0000
Subject: [gdal-dev] COG + javascript + openlayers
In-Reply-To: <CADXYQQ6GRsRmznU-Hu8FitL65tZEXR_iWShj-QieC6o7KMLEKg@mail.gmail.com>
References: <CADRrdKsKo++F4WVMC-jYri3jzg+suMNZohvmV8CpEL5FsdFL+Q@mail.gmail.com>
 <CADRrdKuss+LRN-ERYKqiKFEn3A33Mw9=jr-Zvbu=HD=cL-892Q@mail.gmail.com>
 <CADXYQQ6GRsRmznU-Hu8FitL65tZEXR_iWShj-QieC6o7KMLEKg@mail.gmail.com>
Message-ID: <AA9B5F74-8A26-4CE2-9956-E47AF1914124@cornell.edu>

You might also try reporting your issues to geotiff.js project on GitHub. I?m fairly certain that library decodes tiles using JavaScript so it is probably that which is slowing it down over simply downloading the tiles. I?ve been going back and forth on an issue related to WebP support, where the project maintainer is adding a feature for browser-based decoding. This happens to work for the way GDAL produces COGs with WebP encoding, where each tile is stored as a standalone WebP file, and might be true for other compression schemes as well. However, if for example, each encoded tile is not standalone and requires information from the GeoTIFF headers, then this won?t be possible.

Marty Sullivan
Cornell University

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Patrick Young <patrick.mckendree.young at gmail.com>
Date: Tuesday, April 13, 2021 at 11:35 AM
To: Javier Jimenez Shaw <j1 at jimenezshaw.com>
Cc: gdal dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] COG + javascript + openlayers

There is a COG mailing list (not very active from the looks of it):

https://lists.osgeo.org/mailman/listinfo/cog

You might ping Vincent https://github.com/vincentsarago too!

P

On Tue, Apr 13, 2021 at 2:31 AM Javier Jimenez Shaw <j1 at jimenezshaw.com<mailto:j1 at jimenezshaw.com>> wrote:
Maybe this channel is not the best place for this question. Do you know a better place to ask?

Thank you
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.


On Tue, 6 Apr 2021 at 22:40, Javier Jimenez Shaw <j1 at jimenezshaw.com<mailto:j1 at jimenezshaw.com>> wrote:
Hi

While I was reading about COG format, I thought it was great to replace "gdal2tiles" if the COG was properly generated (I mean, using the option TILING_SCHEME=GoogleMapsCompatible , and maybe something else I miss. I am generating it, so I can optimize that).
Then I was expecting that geotiff.js (or any other client js library) will be able to do the proper RANGE request to produce the tiling that libraries like openlayers of leaflet is expecting. Yes, in Web Mercator projection with aligned tiles, so no transformation is needed.

My initial target is just for RGBA uint8 images... plain vanilla. Storing the COG file in S3, without any proxy in between doing any conversion. Just relying on the RANGE request to get the needed area. My initial idea is to keep the openlayers/leaflet 256x256 tiles. This allows parallel requests to the server, and is very fast (and I do not have to refactor all my js code). But maybe there is a better/faster solution (again, with S3 direct access, no proxy in the server side. That would require deploying the "proxy" on every geographical region).

However I have not found any proper solution (my search-fu is not the best, to be honest). I would like something that performs at least as fast as the tiles produced by gdal2tiles.

Do you know any solution/example?

Thanks
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210413/aeb1594f/attachment-0001.html>

From sowon at postech.ac.kr  Wed Apr 14 05:53:18 2021
From: sowon at postech.ac.kr (=?ks_c_5601-1987?B?udq80r/4?=)
Date: Wed, 14 Apr 2021 12:53:18 +0000
Subject: [gdal-dev] [ gdal ImportError undefined symbol ]
In-Reply-To: <SL2P216MB0585879BAC6FF209BA5D85E7FD4E9@SL2P216MB0585.KORP216.PROD.OUTLOOK.COM>
References: <SL2P216MB0585879BAC6FF209BA5D85E7FD4E9@SL2P216MB0585.KORP216.PROD.OUTLOOK.COM>
Message-ID: <E371575A-4CE5-4BF6-B283-572F75641842@postech.ac.kr>

I use the python 3.8 in cluster server.
In this server richdem (0.3.4) and GDAL (2.4.3) is installed.

But this function do not work probably due to the gdal import error.
(when using richdem.LoadGDAL()) Exception: richdem.LoadGDAL() requires GDAL.

But when I import gdal, I got this error message as below
(import gdal)
ImportError: /usr/local/jupyter/envs/jupyter/lib/python3.8/site-packages/osgeo/_osr.cpython-38-x86_64-linux-gnu.so: undefined symbol: OPTGetParameterInfo


Could you give any comments?
Thanks


Sincerely,
Sowon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210414/b1397297/attachment.html>

From patrick.mckendree.young at gmail.com  Wed Apr 14 14:11:05 2021
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Wed, 14 Apr 2021 15:11:05 -0600
Subject: [gdal-dev] Gdal.Open on S3 using IAM roles
In-Reply-To: <CAC25Q6uFqN7UC3tJvxn2mTkXB23M5CwB6t6t9jG5uia0iXti3w@mail.gmail.com>
References: <CAC25Q6twk3qpWu9s0U__uN0Y-ixqsoLrpo+bGAFN4OpbE7mAdQ@mail.gmail.com>
 <CAC25Q6uFqN7UC3tJvxn2mTkXB23M5CwB6t6t9jG5uia0iXti3w@mail.gmail.com>
Message-ID: <CADXYQQ7snSkdc64bcsc6TXOJ9d1W4XxU_pk4Z1eALaKnQaDiiQ@mail.gmail.com>

That should be the behavior, and I use it all the time so I am confident it
works...

Is it possible you have set any of the AWS_* variables in your
EC2/container environment? I think that could spoil it for you.

You can set CPL_CURL_VERBOSE to YES and get an idea of the network requests
GDAL is doing.   If things are just slow, you might need to set
GDAL_DISABLE_READDIR_ON_OPEN=YES
and CPL_VSIL_CURL_ALLOWED_EXTENSIONS=tif  as described here:

https://trac.osgeo.org/gdal/wiki/CloudOptimizedGeoTIFF

On Wed, Apr 14, 2021 at 3:01 PM Jeannie May <jeannie_may at trimble.com> wrote:

> Further to this discussion, I guess we had hoped that GDal would pick up
> the EC2 instance profile credentials as the s3Client upload does as per:
>
> https://gdal.org/user/virtual_file_systems.html#vsis3
>     5. If none of the above method succeeds, instance profile credentials
> will be retrieved when GDAL is used on EC2 instances.
>
> On Thu, Apr 15, 2021 at 8:58 AM Jeannie May <jeannie_may at trimble.com>
> wrote:
>
>> Thank you Patrick for your prompt reply.
>>
>> Our app runs on an EC2 instance and has no user context. It uses the
>> s3Client SDK upload, utilizing the existing IAM role/policy already setup.
>>
>> Are you saying here that I need to as a 1-time process generate a secret
>> and access key for our existing policy/role, store it in environment
>> variables (AWS_SECRET_ACCESS_KEY and AWS_ACCESS_KEY_ID only?) and the
>> gdal SDK will use that?
>>
>> Jeannie May
>>
>>
>>
>> Jeannie M
>>
>>
>>
>> ay <jeannie_may at trimble.com>
>> Tue, Apr 13, 2:44 PM (2 days ago)
>> Reply
>> to gdal-dev
>> I'm new to using Gdal. How do I configure gdal to use an IAM role, rather
>> than defining an aws-Profile?
>>
>> I get a timeout doing a gdal.Open() on a tiff file on S3 using vsis3,
>> while trying to use an IAM role.
>>
>> I'm using MaxRev.Gdal.Core 3.2.0.250. Netcore 3.1 c#, running in a Linux
>> container.
>>
>> Note that defining an AWS_Profile etc works ok, but I need to use IAM
>> roles. Prior to trying to open the file with gdal, I successfully upload
>> using s3Client (which uses the IAM role), so it's something specific to the
>> Gdal.Open().
>>
>> using GetConfigOption() I can see that none of the following are set
>> AWS_PROFILE; AWS_ACCESS_KEY_ID; AWS_SECRET_ACCESS_KEY; AWS_SESSION_TOKEN;
>> AWS_NO_SIGN_REQUEST; AWS_DEFAULT_PROFILE
>>
>>
>> --
>> *Jeannie May*
>> Senior Software Engineer
>> 11 Birmingham Drive, Christchurch | 963 5305 Office
>> www.trimble.com
>>
>> Connect with us!
>> Patrick Young <patrick.mckendree.young at gmail.com>
>> Wed, Apr 14, 3:47 AM (1 day ago)
>> Reply
>> to me, gdal
>> See
>> https://aws.amazon.com/premiumsupport/knowledge-center/iam-assume-role-cli/ ,
>> they describe how to assume a role and set the usual AWS_*
>> environment variables that GDAL should pick up.
>>
>> There's discussion on vsis3 related stuff (e.g. authentication) here:
>> https://gdal.org/user/virtual_file_systems.html#vsis3
>>
>> P
>>
>>
>>
>>
>>
>
> --
> *Jeannie May*
> Senior Software Engineer
> 11 Birmingham Drive, Christchurch | 963 5305 Office
> www.trimble.com
>
> Connect with us!
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210414/fbe3af7c/attachment-0001.html>

From jeannie_may at trimble.com  Wed Apr 14 14:20:45 2021
From: jeannie_may at trimble.com (Jeannie May)
Date: Thu, 15 Apr 2021 09:20:45 +1200
Subject: [gdal-dev] Gdal.Open on S3 using IAM roles
In-Reply-To: <CADXYQQ7snSkdc64bcsc6TXOJ9d1W4XxU_pk4Z1eALaKnQaDiiQ@mail.gmail.com>
References: <CAC25Q6twk3qpWu9s0U__uN0Y-ixqsoLrpo+bGAFN4OpbE7mAdQ@mail.gmail.com>
 <CAC25Q6uFqN7UC3tJvxn2mTkXB23M5CwB6t6t9jG5uia0iXti3w@mail.gmail.com>
 <CADXYQQ7snSkdc64bcsc6TXOJ9d1W4XxU_pk4Z1eALaKnQaDiiQ@mail.gmail.com>
Message-ID: <CAC25Q6vPbiEOYCYO48QQkHga6vQ6BP_6oaPqp_ocG6PrZ7vkgw@mail.gmail.com>

This is the gdal setup. None of the AWS keys are set excep region (could
that be an issue). Where would I expect to see the logging - none is
showing up in our logs. Do we need to configure the output to our log?

    public GdalClient(IConfigurationStore configStore, ILoggerFactory
loggerFactory)
    {
      _log = loggerFactory.CreateLogger<GdalClient>();
      GdalBase.ConfigureAll();
      Gdal.AllRegister();

      //For debugging s3 access problems
      Gdal.SetConfigOption("CPL_CURL_VERBOSE", "YES");
      Gdal.SetConfigOption("CPL_DEBUG", "YES");
      Gdal.SetConfigOption("AWS_REGION", "us-west-2");

      _log.LogDebug($"#{nameof(GdalClient)} AWS_PROFILE: {
Gdal.GetConfigOption("AWS_PROFILE", "NotFound")} " +
                    $"AWS_ACCESS_KEY_ID: {
Gdal.GetConfigOption("AWS_ACCESS_KEY_ID", "NotFound")} " +
                    $"AWS_SECRET_ACCESS_KEY: {
Gdal.GetConfigOption("AWS_SECRET_ACCESS_KEY", "NotFound")} " +
                    $"AWS_SESSION_TOKEN: {
Gdal.GetConfigOption("AWS_SESSION_TOKEN", "NotFound")} " +
                    $"AWS_NO_SIGN_REQUEST: {
Gdal.GetConfigOption("AWS_NO_SIGN_REQUEST", "NotFound")} " +
                    $"AWS_DEFAULT_PROFILE: {
Gdal.GetConfigOption("AWS_DEFAULT_PROFILE", "NotFound")} ");
      _awsBucketName =
configStore.GetValueString("AWS_DESIGNIMPORT_BUCKET_NAME");
    }

and this is the open which times out:
 public string GetMetadata(string fileName, bool s3=true)
    {
      var path = s3 ? $"/vsis3/{_awsBucketName}/{fileName}" : fileName;
      var dataset = Gdal.Open(path, Access.GA_ReadOnly);
.........

On Thu, Apr 15, 2021 at 9:11 AM Patrick Young <
patrick.mckendree.young at gmail.com> wrote:

> That should be the behavior, and I use it all the time so I am confident
> it works...
>
> Is it possible you have set any of the AWS_* variables in your
> EC2/container environment? I think that could spoil it for you.
>
> You can set CPL_CURL_VERBOSE to YES and get an idea of the network
> requests GDAL is doing.   If things are just slow, you might need to set GDAL_DISABLE_READDIR_ON_OPEN=YES
> and CPL_VSIL_CURL_ALLOWED_EXTENSIONS=tif  as described here:
>
> https://trac.osgeo.org/gdal/wiki/CloudOptimizedGeoTIFF
>
> On Wed, Apr 14, 2021 at 3:01 PM Jeannie May <jeannie_may at trimble.com>
> wrote:
>
>> Further to this discussion, I guess we had hoped that GDal would pick up
>> the EC2 instance profile credentials as the s3Client upload does as per:
>>
>> https://gdal.org/user/virtual_file_systems.html#vsis3
>>     5. If none of the above method succeeds, instance profile credentials
>> will be retrieved when GDAL is used on EC2 instances.
>>
>> On Thu, Apr 15, 2021 at 8:58 AM Jeannie May <jeannie_may at trimble.com>
>> wrote:
>>
>>> Thank you Patrick for your prompt reply.
>>>
>>> Our app runs on an EC2 instance and has no user context. It uses the
>>> s3Client SDK upload, utilizing the existing IAM role/policy already setup.
>>>
>>> Are you saying here that I need to as a 1-time process generate a secret
>>> and access key for our existing policy/role, store it in environment
>>> variables (AWS_SECRET_ACCESS_KEY and AWS_ACCESS_KEY_ID only?) and the
>>> gdal SDK will use that?
>>>
>>> Jeannie May
>>>
>>>
>>>
>>> Jeannie M
>>>
>>>
>>>
>>> ay <jeannie_may at trimble.com>
>>> Tue, Apr 13, 2:44 PM (2 days ago)
>>> Reply
>>> to gdal-dev
>>> I'm new to using Gdal. How do I configure gdal to use an IAM role,
>>> rather than defining an aws-Profile?
>>>
>>> I get a timeout doing a gdal.Open() on a tiff file on S3 using vsis3,
>>> while trying to use an IAM role.
>>>
>>> I'm using MaxRev.Gdal.Core 3.2.0.250. Netcore 3.1 c#, running in a Linux
>>> container.
>>>
>>> Note that defining an AWS_Profile etc works ok, but I need to use IAM
>>> roles. Prior to trying to open the file with gdal, I successfully upload
>>> using s3Client (which uses the IAM role), so it's something specific to the
>>> Gdal.Open().
>>>
>>> using GetConfigOption() I can see that none of the following are set
>>> AWS_PROFILE; AWS_ACCESS_KEY_ID; AWS_SECRET_ACCESS_KEY; AWS_SESSION_TOKEN;
>>> AWS_NO_SIGN_REQUEST; AWS_DEFAULT_PROFILE
>>>
>>>
>>> --
>>> *Jeannie May*
>>> Senior Software Engineer
>>> 11 Birmingham Drive, Christchurch | 963 5305 Office
>>> www.trimble.com
>>>
>>> Connect with us!
>>> Patrick Young <patrick.mckendree.young at gmail.com>
>>> Wed, Apr 14, 3:47 AM (1 day ago)
>>> Reply
>>> to me, gdal
>>> See
>>> https://aws.amazon.com/premiumsupport/knowledge-center/iam-assume-role-cli/ ,
>>> they describe how to assume a role and set the usual AWS_*
>>> environment variables that GDAL should pick up.
>>>
>>> There's discussion on vsis3 related stuff (e.g. authentication) here:
>>> https://gdal.org/user/virtual_file_systems.html#vsis3
>>>
>>> P
>>>
>>>
>>>
>>>
>>>
>>
>> --
>> *Jeannie May*
>> Senior Software Engineer
>> 11 Birmingham Drive, Christchurch | 963 5305 Office
>> www.trimble.com
>>
>> Connect with us!
>>
>

-- 
*Jeannie May*
Senior Software Engineer
11 Birmingham Drive, Christchurch | 963 5305 Office
www.trimble.com

Connect with us!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210415/02dcc771/attachment-0001.html>

From patrick.mckendree.young at gmail.com  Wed Apr 14 14:28:21 2021
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Wed, 14 Apr 2021 15:28:21 -0600
Subject: [gdal-dev] Gdal.Open on S3 using IAM roles
In-Reply-To: <CAC25Q6vPbiEOYCYO48QQkHga6vQ6BP_6oaPqp_ocG6PrZ7vkgw@mail.gmail.com>
References: <CAC25Q6twk3qpWu9s0U__uN0Y-ixqsoLrpo+bGAFN4OpbE7mAdQ@mail.gmail.com>
 <CAC25Q6uFqN7UC3tJvxn2mTkXB23M5CwB6t6t9jG5uia0iXti3w@mail.gmail.com>
 <CADXYQQ7snSkdc64bcsc6TXOJ9d1W4XxU_pk4Z1eALaKnQaDiiQ@mail.gmail.com>
 <CAC25Q6vPbiEOYCYO48QQkHga6vQ6BP_6oaPqp_ocG6PrZ7vkgw@mail.gmail.com>
Message-ID: <CADXYQQ4EeW=mftBwfCFhaBH+xh=ODoMe+n69hO9y+YUKmjGFrw@mail.gmail.com>

AWS_REGION shouldn't cause problems.

If it was me, I'd just hop onto the box and test by running gdalinfo
/vsis3/... with verbose curl config options set and so on and make sure I
could get that working as a sanity check.

On Wed, Apr 14, 2021 at 3:21 PM Jeannie May <jeannie_may at trimble.com> wrote:

> This is the gdal setup. None of the AWS keys are set excep region (could
> that be an issue). Where would I expect to see the logging - none is
> showing up in our logs. Do we need to configure the output to our log?
>
>     public GdalClient(IConfigurationStore configStore, ILoggerFactory
> loggerFactory)
>     {
>       _log = loggerFactory.CreateLogger<GdalClient>();
>       GdalBase.ConfigureAll();
>       Gdal.AllRegister();
>
>       //For debugging s3 access problems
>       Gdal.SetConfigOption("CPL_CURL_VERBOSE", "YES");
>       Gdal.SetConfigOption("CPL_DEBUG", "YES");
>       Gdal.SetConfigOption("AWS_REGION", "us-west-2");
>
>       _log.LogDebug($"#{nameof(GdalClient)} AWS_PROFILE: {
> Gdal.GetConfigOption("AWS_PROFILE", "NotFound")} " +
>                     $"AWS_ACCESS_KEY_ID: {
> Gdal.GetConfigOption("AWS_ACCESS_KEY_ID", "NotFound")} " +
>                     $"AWS_SECRET_ACCESS_KEY: {
> Gdal.GetConfigOption("AWS_SECRET_ACCESS_KEY", "NotFound")} " +
>                     $"AWS_SESSION_TOKEN: {
> Gdal.GetConfigOption("AWS_SESSION_TOKEN", "NotFound")} " +
>                     $"AWS_NO_SIGN_REQUEST: {
> Gdal.GetConfigOption("AWS_NO_SIGN_REQUEST", "NotFound")} " +
>                     $"AWS_DEFAULT_PROFILE: {
> Gdal.GetConfigOption("AWS_DEFAULT_PROFILE", "NotFound")} ");
>       _awsBucketName =
> configStore.GetValueString("AWS_DESIGNIMPORT_BUCKET_NAME");
>     }
>
> and this is the open which times out:
>  public string GetMetadata(string fileName, bool s3=true)
>     {
>       var path = s3 ? $"/vsis3/{_awsBucketName}/{fileName}" : fileName;
>       var dataset = Gdal.Open(path, Access.GA_ReadOnly);
> .........
>
> On Thu, Apr 15, 2021 at 9:11 AM Patrick Young <
> patrick.mckendree.young at gmail.com> wrote:
>
>> That should be the behavior, and I use it all the time so I am confident
>> it works...
>>
>> Is it possible you have set any of the AWS_* variables in your
>> EC2/container environment? I think that could spoil it for you.
>>
>> You can set CPL_CURL_VERBOSE to YES and get an idea of the network
>> requests GDAL is doing.   If things are just slow, you might need to set GDAL_DISABLE_READDIR_ON_OPEN=YES
>> and CPL_VSIL_CURL_ALLOWED_EXTENSIONS=tif  as described here:
>>
>> https://trac.osgeo.org/gdal/wiki/CloudOptimizedGeoTIFF
>>
>> On Wed, Apr 14, 2021 at 3:01 PM Jeannie May <jeannie_may at trimble.com>
>> wrote:
>>
>>> Further to this discussion, I guess we had hoped that GDal would pick up
>>> the EC2 instance profile credentials as the s3Client upload does as per:
>>>
>>> https://gdal.org/user/virtual_file_systems.html#vsis3
>>>     5. If none of the above method succeeds, instance profile
>>> credentials will be retrieved when GDAL is used on EC2 instances.
>>>
>>> On Thu, Apr 15, 2021 at 8:58 AM Jeannie May <jeannie_may at trimble.com>
>>> wrote:
>>>
>>>> Thank you Patrick for your prompt reply.
>>>>
>>>> Our app runs on an EC2 instance and has no user context. It uses the
>>>> s3Client SDK upload, utilizing the existing IAM role/policy already setup.
>>>>
>>>> Are you saying here that I need to as a 1-time process generate a
>>>> secret and access key for our existing policy/role, store it in environment
>>>> variables (AWS_SECRET_ACCESS_KEY and AWS_ACCESS_KEY_ID only?) and the
>>>> gdal SDK will use that?
>>>>
>>>> Jeannie May
>>>>
>>>>
>>>>
>>>> Jeannie M
>>>>
>>>>
>>>>
>>>> ay <jeannie_may at trimble.com>
>>>> Tue, Apr 13, 2:44 PM (2 days ago)
>>>> Reply
>>>> to gdal-dev
>>>> I'm new to using Gdal. How do I configure gdal to use an IAM role,
>>>> rather than defining an aws-Profile?
>>>>
>>>> I get a timeout doing a gdal.Open() on a tiff file on S3 using vsis3,
>>>> while trying to use an IAM role.
>>>>
>>>> I'm using MaxRev.Gdal.Core 3.2.0.250. Netcore 3.1 c#, running in a
>>>> Linux container.
>>>>
>>>> Note that defining an AWS_Profile etc works ok, but I need to use IAM
>>>> roles. Prior to trying to open the file with gdal, I successfully upload
>>>> using s3Client (which uses the IAM role), so it's something specific to the
>>>> Gdal.Open().
>>>>
>>>> using GetConfigOption() I can see that none of the following are set
>>>> AWS_PROFILE; AWS_ACCESS_KEY_ID; AWS_SECRET_ACCESS_KEY; AWS_SESSION_TOKEN;
>>>> AWS_NO_SIGN_REQUEST; AWS_DEFAULT_PROFILE
>>>>
>>>>
>>>> --
>>>> *Jeannie May*
>>>> Senior Software Engineer
>>>> 11 Birmingham Drive, Christchurch | 963 5305 Office
>>>> www.trimble.com
>>>>
>>>> Connect with us!
>>>> Patrick Young <patrick.mckendree.young at gmail.com>
>>>> Wed, Apr 14, 3:47 AM (1 day ago)
>>>> Reply
>>>> to me, gdal
>>>> See
>>>> https://aws.amazon.com/premiumsupport/knowledge-center/iam-assume-role-cli/ ,
>>>> they describe how to assume a role and set the usual AWS_*
>>>> environment variables that GDAL should pick up.
>>>>
>>>> There's discussion on vsis3 related stuff (e.g. authentication) here:
>>>> https://gdal.org/user/virtual_file_systems.html#vsis3
>>>>
>>>> P
>>>>
>>>>
>>>>
>>>>
>>>>
>>>
>>> --
>>> *Jeannie May*
>>> Senior Software Engineer
>>> 11 Birmingham Drive, Christchurch | 963 5305 Office
>>> www.trimble.com
>>>
>>> Connect with us!
>>>
>>
>
> --
> *Jeannie May*
> Senior Software Engineer
> 11 Birmingham Drive, Christchurch | 963 5305 Office
> www.trimble.com
>
> Connect with us!
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210414/32fa98f2/attachment-0001.html>

From even.rouault at spatialys.com  Thu Apr 15 06:31:52 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 15 Apr 2021 15:31:52 +0200
Subject: [gdal-dev] Sustainable GDAL initiative and fundraising
Message-ID: <abcdbd13-bc8a-f4ab-8693-84d2d998d39a@spatialys.com>

All,

I wanted to inform you about an initiative that the PSC recently 
started, and which is now sufficiently advanced to share and develop 
further publicly along with the larger GDAL community. As you all know, 
GDAL is a foundational piece of the open-source and proprietary 
geospatial software ecosystem. While the project has successfully 
attracted contributions for adding new features and capabilities, it 
lacked financial capacity and a vehicle to support difficult-to-fund 
maintenance and infrastructure.

The PSC recently applied to be fiscally hosted by NumFOCUS 
(https://numfocus.org) to receive donations to provide that vehicle (*). 
I should underline that GDAL is and will continue to remain a OSGeo 
project for all other concerns.

We approached a first round of potential sponsors and received 
substantial multi-year pledges, which make us confident that our minimum 
target, of being able to fund the equivalent of a full-time senior 
engineer for three years, will eventually be reached. These resources 
will help fund *several* co-maintainers, enable increasing the bus 
factor of the project, and address the many tasks (ticket triaging and 
addressing, CI maintenance, pull request reviews, release management, 
etc.) needed to make it even better.

The sponsorship funding will be entirely used for activities that 
benefit the project and its associated dependencies such as PROJ, 
libgeotiff, and libtiff. The PSC will be developing procedures and 
details of how the sponsorship resources will be allocated, and we will 
update the GDAL website with them as they are finalized.

Finally, we would like to thank our initial sponsors, who have provided 
the project with generous three-year pledges of support:
- Platinium (50k USD/yr): Microsoft and Planet
- Gold (25k USD/yr): Esri, Google, Safe Software
- Silver (10k USD/yr): Koordinates, Sparkgeo, Mapgears

On behalf of the PSC,

Even

(*) NumFocus being a 501(c)3 organization, donations from US companies 
and persons are tax deductible.

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: initial_sponsors.png
Type: image/png
Size: 147521 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210415/3224acb7/attachment-0001.png>

From cavallini at faunalia.it  Thu Apr 15 06:58:03 2021
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 15 Apr 2021 15:58:03 +0200
Subject: [gdal-dev] Sustainable GDAL initiative and fundraising
In-Reply-To: <abcdbd13-bc8a-f4ab-8693-84d2d998d39a@spatialys.com>
References: <abcdbd13-bc8a-f4ab-8693-84d2d998d39a@spatialys.com>
Message-ID: <497b265f-e7eb-aaec-70c8-f7ae928a317e@faunalia.it>

Great news, thanks Even!
Long life GDAL.

Il 15/04/21 15:31, Even Rouault ha scritto:
> All,
> 
> I wanted to inform you about an initiative that the PSC recently
> started, and which is now sufficiently advanced to share and develop
> further publicly along with the larger GDAL community. As you all know,
> GDAL is a foundational piece of the open-source and proprietary
> geospatial software ecosystem. While the project has successfully
> attracted contributions for adding new features and capabilities, it
> lacked financial capacity and a vehicle to support difficult-to-fund
> maintenance and infrastructure.
> 
> The PSC recently applied to be fiscally hosted by NumFOCUS
> (https://numfocus.org) to receive donations to provide that vehicle (*).
> I should underline that GDAL is and will continue to remain a OSGeo
> project for all other concerns.
> 
> We approached a first round of potential sponsors and received
> substantial multi-year pledges, which make us confident that our minimum
> target, of being able to fund the equivalent of a full-time senior
> engineer for three years, will eventually be reached. These resources
> will help fund *several* co-maintainers, enable increasing the bus
> factor of the project, and address the many tasks (ticket triaging and
> addressing, CI maintenance, pull request reviews, release management,
> etc.) needed to make it even better.
> 
> The sponsorship funding will be entirely used for activities that
> benefit the project and its associated dependencies such as PROJ,
> libgeotiff, and libtiff. The PSC will be developing procedures and
> details of how the sponsorship resources will be allocated, and we will
> update the GDAL website with them as they are finalized.
> 
> Finally, we would like to thank our initial sponsors, who have provided
> the project with generous three-year pledges of support:
> - Platinium (50k USD/yr): Microsoft and Planet
> - Gold (25k USD/yr): Esri, Google, Safe Software
> - Silver (10k USD/yr): Koordinates, Sparkgeo, Mapgears
> 
> On behalf of the PSC,
> 
> Even
> 
> (*) NumFocus being a 501(c)3 organization, donations from US companies
> and persons are tax deductible.
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

-- 
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more

From warmerdam at pobox.com  Thu Apr 15 07:08:35 2021
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 15 Apr 2021 10:08:35 -0400
Subject: [gdal-dev] Sustainable GDAL initiative and fundraising
In-Reply-To: <497b265f-e7eb-aaec-70c8-f7ae928a317e@faunalia.it>
References: <abcdbd13-bc8a-f4ab-8693-84d2d998d39a@spatialys.com>
 <497b265f-e7eb-aaec-70c8-f7ae928a317e@faunalia.it>
Message-ID: <CA+YzLBdBUQz+YkBt98STRAjWUsOVB_MspLmKgsFTJXm--WVgjQ@mail.gmail.com>

PSC Folks,

Has work started on an RFC formalizing the NumFocus relationship, and the
sponsorship program?  I'd be interested in helping, though somewhat less in
leading it.  It feels like an important step to make a formal decision via
our PSC procedures.  Potentially we might want to do two RFCs, one for the
relationship with NumFocus (and perhaps with the application being tied to
the RFC), and one defining the sponsorship program.

The use of sponsorship money for maintenance may fall under
https://gdal.org/development/rfc/rfc9_maintainer.html or perhaps we will
want to supersede that.

For those interested, there has been extensive informal discussion of this
effort with the PSC and a few other parties already, but no formal decision
making yet.

Best regards,
Frank


On Thu, Apr 15, 2021 at 9:58 AM Paolo Cavallini <cavallini at faunalia.it>
wrote:

> Great news, thanks Even!
> Long life GDAL.
>
> Il 15/04/21 15:31, Even Rouault ha scritto:
> > All,
> >
> > I wanted to inform you about an initiative that the PSC recently
> > started, and which is now sufficiently advanced to share and develop
> > further publicly along with the larger GDAL community. As you all know,
> > GDAL is a foundational piece of the open-source and proprietary
> > geospatial software ecosystem. While the project has successfully
> > attracted contributions for adding new features and capabilities, it
> > lacked financial capacity and a vehicle to support difficult-to-fund
> > maintenance and infrastructure.
> >
> > The PSC recently applied to be fiscally hosted by NumFOCUS
> > (https://numfocus.org) to receive donations to provide that vehicle (*).
> > I should underline that GDAL is and will continue to remain a OSGeo
> > project for all other concerns.
> >
> > We approached a first round of potential sponsors and received
> > substantial multi-year pledges, which make us confident that our minimum
> > target, of being able to fund the equivalent of a full-time senior
> > engineer for three years, will eventually be reached. These resources
> > will help fund *several* co-maintainers, enable increasing the bus
> > factor of the project, and address the many tasks (ticket triaging and
> > addressing, CI maintenance, pull request reviews, release management,
> > etc.) needed to make it even better.
> >
> > The sponsorship funding will be entirely used for activities that
> > benefit the project and its associated dependencies such as PROJ,
> > libgeotiff, and libtiff. The PSC will be developing procedures and
> > details of how the sponsorship resources will be allocated, and we will
> > update the GDAL website with them as they are finalized.
> >
> > Finally, we would like to thank our initial sponsors, who have provided
> > the project with generous three-year pledges of support:
> > - Platinium (50k USD/yr): Microsoft and Planet
> > - Gold (25k USD/yr): Esri, Google, Safe Software
> > - Silver (10k USD/yr): Koordinates, Sparkgeo, Mapgears
> >
> > On behalf of the PSC,
> >
> > Even
> >
> > (*) NumFocus being a 501(c)3 organization, donations from US companies
> > and persons are tax deductible.
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
> --
> Paolo Cavallini
> www.faunalia.eu - QGIS.org
> training, support, development on QGIS, PostGIS and more
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210415/099e17fb/attachment.html>

From ijturton at gmail.com  Thu Apr 15 07:22:42 2021
From: ijturton at gmail.com (Ian Turton)
Date: Thu, 15 Apr 2021 15:22:42 +0100
Subject: [gdal-dev] Sustainable GDAL initiative and fundraising
In-Reply-To: <abcdbd13-bc8a-f4ab-8693-84d2d998d39a@spatialys.com>
References: <abcdbd13-bc8a-f4ab-8693-84d2d998d39a@spatialys.com>
Message-ID: <CA+=cGJkpY+oZLPzcetzw_LJi4FeWC__P=E8RY=vRsOF=HnKkrA@mail.gmail.com>

Is there a link to a web page that discusses this and provides a point to
donate at?

Ian

On Thu, 15 Apr 2021 at 14:33, Even Rouault <even.rouault at spatialys.com>
wrote:

> All,
>
> I wanted to inform you about an initiative that the PSC recently
> started, and which is now sufficiently advanced to share and develop
> further publicly along with the larger GDAL community. As you all know,
> GDAL is a foundational piece of the open-source and proprietary
> geospatial software ecosystem. While the project has successfully
> attracted contributions for adding new features and capabilities, it
> lacked financial capacity and a vehicle to support difficult-to-fund
> maintenance and infrastructure.
>
> The PSC recently applied to be fiscally hosted by NumFOCUS
> (https://numfocus.org) to receive donations to provide that vehicle (*).
> I should underline that GDAL is and will continue to remain a OSGeo
> project for all other concerns.
>
> We approached a first round of potential sponsors and received
> substantial multi-year pledges, which make us confident that our minimum
> target, of being able to fund the equivalent of a full-time senior
> engineer for three years, will eventually be reached. These resources
> will help fund *several* co-maintainers, enable increasing the bus
> factor of the project, and address the many tasks (ticket triaging and
> addressing, CI maintenance, pull request reviews, release management,
> etc.) needed to make it even better.
>
> The sponsorship funding will be entirely used for activities that
> benefit the project and its associated dependencies such as PROJ,
> libgeotiff, and libtiff. The PSC will be developing procedures and
> details of how the sponsorship resources will be allocated, and we will
> update the GDAL website with them as they are finalized.
>
> Finally, we would like to thank our initial sponsors, who have provided
> the project with generous three-year pledges of support:
> - Platinium (50k USD/yr): Microsoft and Planet
> - Gold (25k USD/yr): Esri, Google, Safe Software
> - Silver (10k USD/yr): Koordinates, Sparkgeo, Mapgears
>
> On behalf of the PSC,
>
> Even
>
> (*) NumFocus being a 501(c)3 organization, donations from US companies
> and persons are tax deductible.
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Ian Turton
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210415/083291e0/attachment.html>

From even.rouault at spatialys.com  Thu Apr 15 08:08:17 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 15 Apr 2021 17:08:17 +0200
Subject: [gdal-dev] Sustainable GDAL initiative and fundraising
In-Reply-To: <CA+YzLBdBUQz+YkBt98STRAjWUsOVB_MspLmKgsFTJXm--WVgjQ@mail.gmail.com>
References: <abcdbd13-bc8a-f4ab-8693-84d2d998d39a@spatialys.com>
 <497b265f-e7eb-aaec-70c8-f7ae928a317e@faunalia.it>
 <CA+YzLBdBUQz+YkBt98STRAjWUsOVB_MspLmKgsFTJXm--WVgjQ@mail.gmail.com>
Message-ID: <d9b1fc6f-2c36-21fe-bdae-a99a6b8f4ded@spatialys.com>

Frank,

I'm not aware of anyone having started writing new RFCs. I believe the 
NumFocus relationship is the most urgent topic, to be effectively in a 
position to accept donations, already pledged or new ones. There's a 
document with the proposed answers to the application form at 
https://docs.google.com/document/d/1bc5jdpCe1axdyBHxbJnun7e0DTyDoZI_eFYgJYnOhB8/edit 
and we'd ideally send it soon. I'm willing to initiate that RFC.

The way the sponsorship program operates has indeed to be defined. RFC9 
can serve as a basis. We'd need to extend it to who can apply for 
sponsorship and how. In our past informal exchanges, I had drafted a few 
ideas about that. I'd appreciate if someone else want to take the lead 
on that.

Even

Le 15/04/2021 ? 16:08, Frank Warmerdam a ?crit?:
> PSC Folks,
>
> Has work started on an RFC formalizing the NumFocus relationship, and 
> the sponsorship program?? I'd be interested in helping, though 
> somewhat less in leading it.? It feels like an important step to make 
> a formal decision via our PSC procedures.? Potentially we might want 
> to do two RFCs, one for the relationship with NumFocus (and perhaps 
> with the application being tied to the RFC), and one defining the 
> sponsorship program.
>
> The use of sponsorship money for maintenance may fall under 
> https://gdal.org/development/rfc/rfc9_maintainer.html 
> <https://gdal.org/development/rfc/rfc9_maintainer.html> or perhaps we 
> will want to supersede that.
>
> For those interested, there has been extensive informal discussion of 
> this effort with the PSC and a few other parties already, but no 
> formal decision making yet.
>
> Best regards,
> Frank
>
>
> On Thu, Apr 15, 2021 at 9:58 AM Paolo Cavallini <cavallini at faunalia.it 
> <mailto:cavallini at faunalia.it>> wrote:
>
>     Great news, thanks Even!
>     Long life GDAL.
>
>     Il 15/04/21 15:31, Even Rouault ha scritto:
>     > All,
>     >
>     > I wanted to inform you about an initiative that the PSC recently
>     > started, and which is now sufficiently advanced to share and develop
>     > further publicly along with the larger GDAL community. As you
>     all know,
>     > GDAL is a foundational piece of the open-source and proprietary
>     > geospatial software ecosystem. While the project has successfully
>     > attracted contributions for adding new features and capabilities, it
>     > lacked financial capacity and a vehicle to support difficult-to-fund
>     > maintenance and infrastructure.
>     >
>     > The PSC recently applied to be fiscally hosted by NumFOCUS
>     > (https://numfocus.org <https://numfocus.org>) to receive
>     donations to provide that vehicle (*).
>     > I should underline that GDAL is and will continue to remain a OSGeo
>     > project for all other concerns.
>     >
>     > We approached a first round of potential sponsors and received
>     > substantial multi-year pledges, which make us confident that our
>     minimum
>     > target, of being able to fund the equivalent of a full-time senior
>     > engineer for three years, will eventually be reached. These
>     resources
>     > will help fund *several* co-maintainers, enable increasing the bus
>     > factor of the project, and address the many tasks (ticket
>     triaging and
>     > addressing, CI maintenance, pull request reviews, release
>     management,
>     > etc.) needed to make it even better.
>     >
>     > The sponsorship funding will be entirely used for activities that
>     > benefit the project and its associated dependencies such as PROJ,
>     > libgeotiff, and libtiff. The PSC will be developing procedures and
>     > details of how the sponsorship resources will be allocated, and
>     we will
>     > update the GDAL website with them as they are finalized.
>     >
>     > Finally, we would like to thank our initial sponsors, who have
>     provided
>     > the project with generous three-year pledges of support:
>     > - Platinium (50k USD/yr): Microsoft and Planet
>     > - Gold (25k USD/yr): Esri, Google, Safe Software
>     > - Silver (10k USD/yr): Koordinates, Sparkgeo, Mapgears
>     >
>     > On behalf of the PSC,
>     >
>     > Even
>     >
>     > (*) NumFocus being a 501(c)3 organization, donations from US
>     companies
>     > and persons are tax deductible.
>     >
>     >
>     > _______________________________________________
>     > gdal-dev mailing list
>     > gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>     <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>     >
>
>     -- 
>     Paolo Cavallini
>     www.faunalia.eu <http://www.faunalia.eu> - QGIS.org
>     training, support, development on QGIS, PostGIS and more
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>     <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>
>
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam, 
> warmerdam at pobox.com <mailto:warmerdam at pobox.com>
> light and sound - activate the windows | +1 650-701-7823
> and watch the world go round - Rush ? ?| Geospatial Software Developer
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210415/8231306b/attachment-0001.html>

From even.rouault at spatialys.com  Thu Apr 15 08:26:22 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 15 Apr 2021 17:26:22 +0200
Subject: [gdal-dev] Sustainable GDAL initiative and fundraising
In-Reply-To: <CA+=cGJkpY+oZLPzcetzw_LJi4FeWC__P=E8RY=vRsOF=HnKkrA@mail.gmail.com>
References: <abcdbd13-bc8a-f4ab-8693-84d2d998d39a@spatialys.com>
 <CA+=cGJkpY+oZLPzcetzw_LJi4FeWC__P=E8RY=vRsOF=HnKkrA@mail.gmail.com>
Message-ID: <e5a9536d-8395-d5f3-c8ef-e5ea643b8ed0@spatialys.com>

Hi Ian,

> Is there a link to a web page that discusses this and provides a point 
> to donate at?

Not yet. We are still in the process of completing our application with 
NumFOCUS. Eventually there will be a page on their website dedicated to 
the GDAL project with instructions how to donate, and the GDAL website 
will point to that. We considered waiting for that to be ready before 
this announcement, but keeping all those discussions private began to be 
against the spirit of how we operate. We'll also setup an email alias so 
that new sponsors can contact us with questions & pledges.

==> PSC: should we ask for a gdal-sponsors at osgeo.org email alias ? Who 
want to be in it ? I'd suggest we open it to Chris Holmes too who could 
potentially be interested to help on the sponsoring side (pending his 
confirmation)

Even

>
> Ian
>
> On Thu, 15 Apr 2021 at 14:33, Even Rouault <even.rouault at spatialys.com 
> <mailto:even.rouault at spatialys.com>> wrote:
>
>     All,
>
>     I wanted to inform you about an initiative that the PSC recently
>     started, and which is now sufficiently advanced to share and develop
>     further publicly along with the larger GDAL community. As you all
>     know,
>     GDAL is a foundational piece of the open-source and proprietary
>     geospatial software ecosystem. While the project has successfully
>     attracted contributions for adding new features and capabilities, it
>     lacked financial capacity and a vehicle to support difficult-to-fund
>     maintenance and infrastructure.
>
>     The PSC recently applied to be fiscally hosted by NumFOCUS
>     (https://numfocus.org <https://numfocus.org>) to receive donations
>     to provide that vehicle (*).
>     I should underline that GDAL is and will continue to remain a OSGeo
>     project for all other concerns.
>
>     We approached a first round of potential sponsors and received
>     substantial multi-year pledges, which make us confident that our
>     minimum
>     target, of being able to fund the equivalent of a full-time senior
>     engineer for three years, will eventually be reached. These resources
>     will help fund *several* co-maintainers, enable increasing the bus
>     factor of the project, and address the many tasks (ticket triaging
>     and
>     addressing, CI maintenance, pull request reviews, release management,
>     etc.) needed to make it even better.
>
>     The sponsorship funding will be entirely used for activities that
>     benefit the project and its associated dependencies such as PROJ,
>     libgeotiff, and libtiff. The PSC will be developing procedures and
>     details of how the sponsorship resources will be allocated, and we
>     will
>     update the GDAL website with them as they are finalized.
>
>     Finally, we would like to thank our initial sponsors, who have
>     provided
>     the project with generous three-year pledges of support:
>     - Platinium (50k USD/yr): Microsoft and Planet
>     - Gold (25k USD/yr): Esri, Google, Safe Software
>     - Silver (10k USD/yr): Koordinates, Sparkgeo, Mapgears
>
>     On behalf of the PSC,
>
>     Even
>
>     (*) NumFocus being a 501(c)3 organization, donations from US
>     companies
>     and persons are tax deductible.
>
>     -- 
>     http://www.spatialys.com <http://www.spatialys.com>
>     My software is free, but my time generally not.
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>     <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>
>
> -- 
> Ian Turton

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210415/76064168/attachment.html>

From even.rouault at spatialys.com  Thu Apr 15 09:32:01 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 15 Apr 2021 18:32:01 +0200
Subject: [gdal-dev] "RFC 80: NumFOCUS relationship and sponsorship program"
 open for discussion
Message-ID: <93cab622-e820-0698-df4b-dc2cc92eb8d2@spatialys.com>

Hi,

as discussed in previous thread, please find

https://github.com/OSGeo/gdal/pull/3682

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From vincent.sarago at gmail.com  Thu Apr 15 15:00:48 2021
From: vincent.sarago at gmail.com (Vincent Sarago)
Date: Thu, 15 Apr 2021 18:00:48 -0400
Subject: [gdal-dev] Supported Overview resampling for COG
Message-ID: <DA622D75-EFA8-4A30-B3F9-9892B6602F56@gmail.com>

Bonjour/Hi,

While I was working on https://github.com/mapbox/rasterio/issues/2153 <https://github.com/mapbox/rasterio/issues/2153> (add missing RMS resampling method for overviews in rasterio) I wanted to double check which resampling methods were actually supported. 

In gdaladdo, the doc says: ?nearest,average,gauss,cubic,cubicspline,lanczos,average_mp,average_magphase,mode? but in the COG docs <https://github.com/OSGeo/gdal/blob/master/gdal/doc/source/drivers/raster/cog.rst> only `NEAREST/AVERAGE/BILINEAR/CUBIC/CUBICSPLINE/LANCZOS` are mentioned. 

I haven?t tested but looking at the code it seems that all methods supported in gdaladdo should be supported in the COG driver?

Thanks,

Vincent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210415/0be34792/attachment.html>

From jeannie_may at trimble.com  Thu Apr 15 15:10:09 2021
From: jeannie_may at trimble.com (Jeannie May)
Date: Fri, 16 Apr 2021 10:10:09 +1200
Subject: [gdal-dev] Gdal.Open on S3 using IAM roles
In-Reply-To: <CADXYQQ4EeW=mftBwfCFhaBH+xh=ODoMe+n69hO9y+YUKmjGFrw@mail.gmail.com>
References: <CAC25Q6twk3qpWu9s0U__uN0Y-ixqsoLrpo+bGAFN4OpbE7mAdQ@mail.gmail.com>
 <CAC25Q6uFqN7UC3tJvxn2mTkXB23M5CwB6t6t9jG5uia0iXti3w@mail.gmail.com>
 <CADXYQQ7snSkdc64bcsc6TXOJ9d1W4XxU_pk4Z1eALaKnQaDiiQ@mail.gmail.com>
 <CAC25Q6vPbiEOYCYO48QQkHga6vQ6BP_6oaPqp_ocG6PrZ7vkgw@mail.gmail.com>
 <CADXYQQ4EeW=mftBwfCFhaBH+xh=ODoMe+n69hO9y+YUKmjGFrw@mail.gmail.com>
Message-ID: <CAC25Q6u34BpNiXns+qWTY_v64imKmYxLPNE2LqZaw3GYE69DJA@mail.gmail.com>

  I'll try to get to this this afternoon. What gdalinfo commands would be
best to reveal the issue?

On Thu, Apr 15, 2021 at 9:28 AM Patrick Young <
patrick.mckendree.young at gmail.com> wrote:

> AWS_REGION shouldn't cause problems.
>
> If it was me, I'd just hop onto the box and test by running gdalinfo
> /vsis3/... with verbose curl config options set and so on and make sure I
> could get that working as a sanity check.
>
> On Wed, Apr 14, 2021 at 3:21 PM Jeannie May <jeannie_may at trimble.com>
> wrote:
>
>> This is the gdal setup. None of the AWS keys are set excep region (could
>> that be an issue). Where would I expect to see the logging - none is
>> showing up in our logs. Do we need to configure the output to our log?
>>
>>     public GdalClient(IConfigurationStore configStore, ILoggerFactory
>> loggerFactory)
>>     {
>>       _log = loggerFactory.CreateLogger<GdalClient>();
>>       GdalBase.ConfigureAll();
>>       Gdal.AllRegister();
>>
>>       //For debugging s3 access problems
>>       Gdal.SetConfigOption("CPL_CURL_VERBOSE", "YES");
>>       Gdal.SetConfigOption("CPL_DEBUG", "YES");
>>       Gdal.SetConfigOption("AWS_REGION", "us-west-2");
>>
>>       _log.LogDebug($"#{nameof(GdalClient)} AWS_PROFILE: {
>> Gdal.GetConfigOption("AWS_PROFILE", "NotFound")} " +
>>                     $"AWS_ACCESS_KEY_ID: {
>> Gdal.GetConfigOption("AWS_ACCESS_KEY_ID", "NotFound")} " +
>>                     $"AWS_SECRET_ACCESS_KEY: {
>> Gdal.GetConfigOption("AWS_SECRET_ACCESS_KEY", "NotFound")} " +
>>                     $"AWS_SESSION_TOKEN: {
>> Gdal.GetConfigOption("AWS_SESSION_TOKEN", "NotFound")} " +
>>                     $"AWS_NO_SIGN_REQUEST: {
>> Gdal.GetConfigOption("AWS_NO_SIGN_REQUEST", "NotFound")} " +
>>                     $"AWS_DEFAULT_PROFILE: {
>> Gdal.GetConfigOption("AWS_DEFAULT_PROFILE", "NotFound")} ");
>>       _awsBucketName =
>> configStore.GetValueString("AWS_DESIGNIMPORT_BUCKET_NAME");
>>     }
>>
>> and this is the open which times out:
>>  public string GetMetadata(string fileName, bool s3=true)
>>     {
>>       var path = s3 ? $"/vsis3/{_awsBucketName}/{fileName}" : fileName;
>>       var dataset = Gdal.Open(path, Access.GA_ReadOnly);
>> .........
>>
>> On Thu, Apr 15, 2021 at 9:11 AM Patrick Young <
>> patrick.mckendree.young at gmail.com> wrote:
>>
>>> That should be the behavior, and I use it all the time so I am confident
>>> it works...
>>>
>>> Is it possible you have set any of the AWS_* variables in your
>>> EC2/container environment? I think that could spoil it for you.
>>>
>>> You can set CPL_CURL_VERBOSE to YES and get an idea of the network
>>> requests GDAL is doing.   If things are just slow, you might need to set GDAL_DISABLE_READDIR_ON_OPEN=YES
>>> and CPL_VSIL_CURL_ALLOWED_EXTENSIONS=tif  as described here:
>>>
>>> https://trac.osgeo.org/gdal/wiki/CloudOptimizedGeoTIFF
>>>
>>> On Wed, Apr 14, 2021 at 3:01 PM Jeannie May <jeannie_may at trimble.com>
>>> wrote:
>>>
>>>> Further to this discussion, I guess we had hoped that GDal would pick
>>>> up the EC2 instance profile credentials as the s3Client upload does as per:
>>>>
>>>> https://gdal.org/user/virtual_file_systems.html#vsis3
>>>>     5. If none of the above method succeeds, instance profile
>>>> credentials will be retrieved when GDAL is used on EC2 instances.
>>>>
>>>> On Thu, Apr 15, 2021 at 8:58 AM Jeannie May <jeannie_may at trimble.com>
>>>> wrote:
>>>>
>>>>> Thank you Patrick for your prompt reply.
>>>>>
>>>>> Our app runs on an EC2 instance and has no user context. It uses the
>>>>> s3Client SDK upload, utilizing the existing IAM role/policy already setup.
>>>>>
>>>>> Are you saying here that I need to as a 1-time process generate a
>>>>> secret and access key for our existing policy/role, store it in environment
>>>>> variables (AWS_SECRET_ACCESS_KEY and AWS_ACCESS_KEY_ID only?) and the
>>>>> gdal SDK will use that?
>>>>>
>>>>> Jeannie May
>>>>>
>>>>>
>>>>>
>>>>> Jeannie M
>>>>>
>>>>>
>>>>>
>>>>> ay <jeannie_may at trimble.com>
>>>>> Tue, Apr 13, 2:44 PM (2 days ago)
>>>>> Reply
>>>>> to gdal-dev
>>>>> I'm new to using Gdal. How do I configure gdal to use an IAM role,
>>>>> rather than defining an aws-Profile?
>>>>>
>>>>> I get a timeout doing a gdal.Open() on a tiff file on S3 using vsis3,
>>>>> while trying to use an IAM role.
>>>>>
>>>>> I'm using MaxRev.Gdal.Core 3.2.0.250. Netcore 3.1 c#, running in a
>>>>> Linux container.
>>>>>
>>>>> Note that defining an AWS_Profile etc works ok, but I need to use IAM
>>>>> roles. Prior to trying to open the file with gdal, I successfully upload
>>>>> using s3Client (which uses the IAM role), so it's something specific to the
>>>>> Gdal.Open().
>>>>>
>>>>> using GetConfigOption() I can see that none of the following are set
>>>>> AWS_PROFILE; AWS_ACCESS_KEY_ID; AWS_SECRET_ACCESS_KEY; AWS_SESSION_TOKEN;
>>>>> AWS_NO_SIGN_REQUEST; AWS_DEFAULT_PROFILE
>>>>>
>>>>>
>>>>> --
>>>>> *Jeannie May*
>>>>> Senior Software Engineer
>>>>> 11 Birmingham Drive, Christchurch | 963 5305 Office
>>>>> www.trimble.com
>>>>>
>>>>> Connect with us!
>>>>> Patrick Young <patrick.mckendree.young at gmail.com>
>>>>> Wed, Apr 14, 3:47 AM (1 day ago)
>>>>> Reply
>>>>> to me, gdal
>>>>> See
>>>>> https://aws.amazon.com/premiumsupport/knowledge-center/iam-assume-role-cli/ ,
>>>>> they describe how to assume a role and set the usual AWS_*
>>>>> environment variables that GDAL should pick up.
>>>>>
>>>>> There's discussion on vsis3 related stuff (e.g. authentication) here:
>>>>> https://gdal.org/user/virtual_file_systems.html#vsis3
>>>>>
>>>>> P
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>> --
>>>> *Jeannie May*
>>>> Senior Software Engineer
>>>> 11 Birmingham Drive, Christchurch | 963 5305 Office
>>>> www.trimble.com
>>>>
>>>> Connect with us!
>>>>
>>>
>>
>> --
>> *Jeannie May*
>> Senior Software Engineer
>> 11 Birmingham Drive, Christchurch | 963 5305 Office
>> www.trimble.com
>>
>> Connect with us!
>>
>

-- 
*Jeannie May*
Senior Software Engineer
11 Birmingham Drive, Christchurch | 963 5305 Office
www.trimble.com

Connect with us!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210416/cab67cb2/attachment-0001.html>

From even.rouault at spatialys.com  Fri Apr 16 02:20:33 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 16 Apr 2021 11:20:33 +0200
Subject: [gdal-dev] Finalizing online documentation wrt sponsoring
Message-ID: <eef9a5d7-f0ac-5e6d-ae49-5e05593231f7@spatialys.com>

PSC,

There's some momentum building on the public announcement. We already 
got several people asking how they could join.

It would be good if we could quickly move and finalize the sponsoring 
documentation that will be on the website.

So there's this pull request https://github.com/OSGeo/gdal/pull/3681 
that matches the preview of the website I showed recently. So with a 
front page listing the sponsors, and then a link to the FAQ and another 
one to the sponsorship prospectus. For the later, in the PR it is still 
as a .rst/.html page, but ultimately we'll just replace it with a 
standalone PDF file stored and linked from the website: the idea is that 
people can circulate it within their org to the decision-making level.

The prospectus will be a PDF version of 
https://docs.google.com/document/d/1yhMWeI_LgEXPUkngqOitqcKfp7ov6WsS41v5ulz-kd0/edit?ts=60777468 
, once we have finalized it.

I believe the main source of discussions is to decide what to put behind 
the "GDAL Advisory board" of sponsors. A discussion was started at 
https://github.com/OSGeo/gdal/pull/3682#discussion_r614274074

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Fri Apr 16 02:33:05 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 16 Apr 2021 11:33:05 +0200
Subject: [gdal-dev] Supported Overview resampling for COG
In-Reply-To: <DA622D75-EFA8-4A30-B3F9-9892B6602F56@gmail.com>
References: <DA622D75-EFA8-4A30-B3F9-9892B6602F56@gmail.com>
Message-ID: <0a856a75-8c36-c179-1a77-d1d375b02f2f@spatialys.com>

Vincent,

Le 16/04/2021 ? 00:00, Vincent Sarago a ?crit?:
> Bonjour/Hi,
>
> While I was working on https://github.com/mapbox/rasterio/issues/2153 
> <https://github.com/mapbox/rasterio/issues/2153>?(add missing RMS 
> resampling method for overviews in rasterio) I wanted to double check 
> which resampling methods were actually supported.
>
> In gdaladdo, the doc says: 
> ?nearest,average,gauss,cubic,cubicspline,lanczos,average_mp,average_magphase,mode? 
> but in the COG docs 
> <https://github.com/OSGeo/gdal/blob/master/gdal/doc/source/drivers/raster/cog.rst>?only 
> `NEAREST/AVERAGE/BILINEAR/CUBIC/CUBICSPLINE/LANCZOS` are mentioned.
>
> I haven?t tested but looking at the code it seems that all methods 
> supported in gdaladdo should be supported in the COG driver?

For the OVERVIEW_RESAMPLING creation option, all methods supported by 
gdaladdo should be supported

For the WARP_RESAMPLING? creation option, all methods supported by gdalwarp

For the RESAMPLING one (shortcut to set both above), the intersections 
of both

Perhaps the doc should just point to the list of methods of the relevant 
utility page to make maintenance easier.

Or alternatively have a .rst file we can include in both (similarly to 
some of the common options between utilities stored in 
doc/source/programs/options/ and then included )

We'd welcome your doc enhancement regarding this :-)

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210416/3d40c5a9/attachment.html>

From even.rouault at spatialys.com  Fri Apr 16 07:50:36 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 16 Apr 2021 16:50:36 +0200
Subject: [gdal-dev] Motion: adopt RFC80
Message-ID: <4545f1ae-67ec-0099-5fbb-a1fe773177d2@spatialys.com>

Hi,

I hereby motion to adopt RFC 80:

https://github.com/OSGeo/gdal/pull/3682

This also implies adopting the "GDAL Sponsorship Prospectus"? at

https://docs.google.com/document/d/1yhMWeI_LgEXPUkngqOitqcKfp7ov6WsS41v5ulz-kd0/edit?ts=60777468# 
whose a PDF version will be uploaded on the website 
(https://github.com/OSGeo/gdal/pull/3681 to be updated)

and the proposed answers to the NumFOCUS application form are at:
https://docs.google.com/document/d/1bc5jdpCe1axdyBHxbJnun7e0DTyDoZI_eFYgJYnOhB8/edit

which will be submitted consequently.

Starting with my +1

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From schwehr at gmail.com  Fri Apr 16 09:53:03 2021
From: schwehr at gmail.com (Kurt Schwehr)
Date: Fri, 16 Apr 2021 09:53:03 -0700
Subject: [gdal-dev] Motion: adopt RFC80
In-Reply-To: <4545f1ae-67ec-0099-5fbb-a1fe773177d2@spatialys.com>
References: <4545f1ae-67ec-0099-5fbb-a1fe773177d2@spatialys.com>
Message-ID: <CACmBxytiQUEB-ZGntC47xMALukOA63PcuSawHOeHpObbycMv7w@mail.gmail.com>

+1 KurtS

On Fri, Apr 16, 2021 at 7:50 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> I hereby motion to adopt RFC 80:
>
> https://github.com/OSGeo/gdal/pull/3682
>
> This also implies adopting the "GDAL Sponsorship Prospectus"  at
>
>
> https://docs.google.com/document/d/1yhMWeI_LgEXPUkngqOitqcKfp7ov6WsS41v5ulz-kd0/edit?ts=60777468#
> whose a PDF version will be uploaded on the website
> (https://github.com/OSGeo/gdal/pull/3681 to be updated)
>
> and the proposed answers to the NumFOCUS application form are at:
>
> https://docs.google.com/document/d/1bc5jdpCe1axdyBHxbJnun7e0DTyDoZI_eFYgJYnOhB8/edit
>
> which will be submitted consequently.
>
> Starting with my +1
>
> Even
>
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210416/f5e13b61/attachment.html>

From warmerdam at pobox.com  Fri Apr 16 10:09:37 2021
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 16 Apr 2021 13:09:37 -0400
Subject: [gdal-dev] Motion: adopt RFC80
In-Reply-To: <CACmBxytiQUEB-ZGntC47xMALukOA63PcuSawHOeHpObbycMv7w@mail.gmail.com>
References: <4545f1ae-67ec-0099-5fbb-a1fe773177d2@spatialys.com>
 <CACmBxytiQUEB-ZGntC47xMALukOA63PcuSawHOeHpObbycMv7w@mail.gmail.com>
Message-ID: <CA+YzLBdat_3d87ausuhwgyCUEFK0cSwTa0cKQB9RKyUuC_BjVQ@mail.gmail.com>

+1 FrankW

On Fri, Apr 16, 2021 at 12:53 PM Kurt Schwehr <schwehr at gmail.com> wrote:

> +1 KurtS
>
> On Fri, Apr 16, 2021 at 7:50 AM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Hi,
>>
>> I hereby motion to adopt RFC 80:
>>
>> https://github.com/OSGeo/gdal/pull/3682
>>
>> This also implies adopting the "GDAL Sponsorship Prospectus"  at
>>
>>
>> https://docs.google.com/document/d/1yhMWeI_LgEXPUkngqOitqcKfp7ov6WsS41v5ulz-kd0/edit?ts=60777468#
>> whose a PDF version will be uploaded on the website
>> (https://github.com/OSGeo/gdal/pull/3681 to be updated)
>>
>> and the proposed answers to the NumFOCUS application form are at:
>>
>> https://docs.google.com/document/d/1bc5jdpCe1axdyBHxbJnun7e0DTyDoZI_eFYgJYnOhB8/edit
>>
>> which will be submitted consequently.
>>
>> Starting with my +1
>>
>> Even
>>
>>
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210416/3b46a3ed/attachment.html>

From mateusz at loskot.net  Fri Apr 16 10:50:52 2021
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 16 Apr 2021 19:50:52 +0200
Subject: [gdal-dev] Motion: adopt RFC80
In-Reply-To: <4545f1ae-67ec-0099-5fbb-a1fe773177d2@spatialys.com>
References: <4545f1ae-67ec-0099-5fbb-a1fe773177d2@spatialys.com>
Message-ID: <CABUeae-QgFqXu25iXcDvahhZ_yEFON+9kRfE6B=u=hKQCVokZg@mail.gmail.com>

+1 Mateusz

On Fri, 16 Apr 2021 at 16:50, Even Rouault <even.rouault at spatialys.com> wrote:
>
> Hi,
>
> I hereby motion to adopt RFC 80:
>
> https://github.com/OSGeo/gdal/pull/3682
>
> This also implies adopting the "GDAL Sponsorship Prospectus"  at
>
> https://docs.google.com/document/d/1yhMWeI_LgEXPUkngqOitqcKfp7ov6WsS41v5ulz-kd0/edit?ts=60777468#
> whose a PDF version will be uploaded on the website
> (https://github.com/OSGeo/gdal/pull/3681 to be updated)
>
> and the proposed answers to the NumFOCUS application form are at:
> https://docs.google.com/document/d/1bc5jdpCe1axdyBHxbJnun7e0DTyDoZI_eFYgJYnOhB8/edit
>
> which will be submitted consequently.
>
> Starting with my +1
>
> Even
>
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Mateusz Loskot, http://mateusz.loskot.net

From dmorissette at mapgears.com  Fri Apr 16 10:55:52 2021
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri, 16 Apr 2021 13:55:52 -0400
Subject: [gdal-dev] Motion: adopt RFC80
In-Reply-To: <4545f1ae-67ec-0099-5fbb-a1fe773177d2@spatialys.com>
References: <4545f1ae-67ec-0099-5fbb-a1fe773177d2@spatialys.com>
Message-ID: <91a3d5b6-6ba5-5bff-2ed2-a7bd14e18682@mapgears.com>

+1

Daniel


On 2021-04-16 10:50, Even Rouault wrote:
> Hi,
> 
> I hereby motion to adopt RFC 80:
> 
> https://github.com/OSGeo/gdal/pull/3682
> 
> This also implies adopting the "GDAL Sponsorship Prospectus"? at
> 
> https://docs.google.com/document/d/1yhMWeI_LgEXPUkngqOitqcKfp7ov6WsS41v5ulz-kd0/edit?ts=60777468# 
> whose a PDF version will be uploaded on the website 
> (https://github.com/OSGeo/gdal/pull/3681 to be updated)
> 
> and the proposed answers to the NumFOCUS application form are at:
> https://docs.google.com/document/d/1bc5jdpCe1axdyBHxbJnun7e0DTyDoZI_eFYgJYnOhB8/edit 
> 
> 
> which will be submitted consequently.
> 
> Starting with my +1
> 
> Even
> 
> 


-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201

From jmckenna at gatewaygeomatics.com  Fri Apr 16 11:24:30 2021
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Fri, 16 Apr 2021 15:24:30 -0300
Subject: [gdal-dev] Motion: adopt RFC80
In-Reply-To: <4545f1ae-67ec-0099-5fbb-a1fe773177d2@spatialys.com>
References: <4545f1ae-67ec-0099-5fbb-a1fe773177d2@spatialys.com>
Message-ID: <ca798c6f-a4fa-1c13-4f2b-2eb137166dc7@gatewaygeomatics.com>

+1 jeff

(very minor comment: regarding the NumFocus application, today's count 
on GDAL-users mailing list subscriptions is 2524 and for GDAL-announce 
is 1023, I was just verifying that for you now)






-- 
Jeff McKenna
GatewayGeo: Developers of MS4W, MapServer Consulting and Training
co-founder of FOSS4G
http://gatewaygeo.com/



On 2021-04-16 11:50 a.m., Even Rouault wrote:
> Hi,
> 
> I hereby motion to adopt RFC 80:
> 
> https://github.com/OSGeo/gdal/pull/3682
> 
> This also implies adopting the "GDAL Sponsorship Prospectus"? at
> 
> https://docs.google.com/document/d/1yhMWeI_LgEXPUkngqOitqcKfp7ov6WsS41v5ulz-kd0/edit?ts=60777468# 
> whose a PDF version will be uploaded on the website 
> (https://github.com/OSGeo/gdal/pull/3681 to be updated)
> 
> and the proposed answers to the NumFOCUS application form are at:
> https://docs.google.com/document/d/1bc5jdpCe1axdyBHxbJnun7e0DTyDoZI_eFYgJYnOhB8/edit 
> 
> 
> which will be submitted consequently.
> 
> Starting with my +1
> 
> Even
> 
> 


From howard at hobu.co  Fri Apr 16 11:49:28 2021
From: howard at hobu.co (Howard Butler)
Date: Fri, 16 Apr 2021 13:49:28 -0500
Subject: [gdal-dev] Motion: adopt RFC80
In-Reply-To: <91a3d5b6-6ba5-5bff-2ed2-a7bd14e18682@mapgears.com>
References: <4545f1ae-67ec-0099-5fbb-a1fe773177d2@spatialys.com>
 <91a3d5b6-6ba5-5bff-2ed2-a7bd14e18682@mapgears.com>
Message-ID: <57BAC22C-1CEE-49AC-A2BF-FA69D536E11A@hobu.co>

+1

Howard

> On Apr 16, 2021, at 12:55 PM, Daniel Morissette <dmorissette at mapgears.com> wrote:
> 
> +1
> 
> Daniel
> 
> 
> On 2021-04-16 10:50, Even Rouault wrote:
>> Hi,
>> I hereby motion to adopt RFC 80:
>> https://github.com/OSGeo/gdal/pull/3682
>> This also implies adopting the "GDAL Sponsorship Prospectus"  at
>> https://docs.google.com/document/d/1yhMWeI_LgEXPUkngqOitqcKfp7ov6WsS41v5ulz-kd0/edit?ts=60777468# whose a PDF version will be uploaded on the website (https://github.com/OSGeo/gdal/pull/3681 to be updated)
>> and the proposed answers to the NumFOCUS application form are at:
>> https://docs.google.com/document/d/1bc5jdpCe1axdyBHxbJnun7e0DTyDoZI_eFYgJYnOhB8/edit which will be submitted consequently.
>> Starting with my +1
>> Even
> 
> 
> -- 
> Daniel Morissette
> Mapgears Inc
> T: +1 418-696-5056 #201
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From jukka.rahkonen at maanmittauslaitos.fi  Fri Apr 16 12:14:41 2021
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Fri, 16 Apr 2021 19:14:41 +0000
Subject: [gdal-dev] Motion: adopt RFC80
Message-ID: <2258e3f7237e4bd3ab00f89c381c517e@maanmittauslaitos.fi>

+1

-Jukka Rahkonen-

> Hi,

> I hereby motion to adopt RFC 80:
> https://github.com/OSGeo/gdal/pull/3682
> This also implies adopting the "GDAL Sponsorship Prospectus"? at
> https://docs.google.com/document/d/1yhMWeI_LgEXPUkngqOitqcKfp7ov6WsS41v5ulz-kd0/edit?ts=60777468 
> whose a PDF version will be uploaded on the website  >(https://github.com/OSGeo/gdal/pull/3681 to be updated)
> and the proposed answers to the NumFOCUS application form are at:
> https://docs.google.com/document/d/1bc5jdpCe1axdyBHxbJnun7e0DTyDoZI_eFYgJYnOhB8/edit
> which will be submitted consequently.

> Starting with my +1

> Even


From even.rouault at spatialys.com  Mon Apr 19 06:07:16 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 19 Apr 2021 15:07:16 +0200
Subject: [gdal-dev] GDAL 3.3.0beta1 available
Message-ID: <aacb98b9-ea44-ac13-7f89-1199f6e63cb1@spatialys.com>

Hi,

I've prepared a beta1 of GDAL 3.3.0, hoping for RC1 next week. This 
beta1 is especially aimed at giving packagers a chance to adapt for the 
changes that have occurred in this cycle in the Python bindings area 
with moving of scripts in the source tree, and report about potential 
related issues. More details in 
https://github.com/OSGeo/gdal/blob/master/gdal/MIGRATION_GUIDE.TXT

Source archives:

- http://download.osgeo.org/gdal/3.3.0/gdal-3.3.0beta1.tar.gz

- or http://download.osgeo.org/gdal/3.3.0/gdal-3.3.0beta1.tar.xz

- or http://download.osgeo.org/gdal/3.3.0/gdal330beta1.zip

GRASS plugin:

- http://download.osgeo.org/gdal/3.3.0/gdal-grass-3.3.0beta1.tar.gz

Autotest suite:

- http://download.osgeo.org/gdal/3.3.0/gdalautotest-3.3.0beta1.tar.gz

- or http://download.osgeo.org/gdal/3.3.0/gdalautotest-3.3.0beta1.zip


The preliminary NEWS file is at 
https://github.com/OSGeo/gdal/blob/master/gdal/NEWS

Developers: take a chance at reviewing it and fixing/enhancing it where 
appropriate.

master branch remains for 3.3.0 until RC1, but extra care should be 
taken at what gets merged from now.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From howard at hobu.co  Mon Apr 19 06:58:12 2021
From: howard at hobu.co (Howard Butler)
Date: Mon, 19 Apr 2021 08:58:12 -0500
Subject: [gdal-dev] Registered Content-Type for VRT?
Message-ID: <B2089E9F-8685-433C-8929-8A384ADD6C17@hobu.co>

Is there a content being used in the wild for VRT? What would be a reasonable one to register?

The scenario where I would find this useful is to have an application such as QGIS be able to register to open VRTs that were downloaded from a server. 

From sean at mapbox.com  Mon Apr 19 10:04:33 2021
From: sean at mapbox.com (Sean Gillies)
Date: Mon, 19 Apr 2021 11:04:33 -0600
Subject: [gdal-dev] Registered Content-Type for VRT?
In-Reply-To: <B2089E9F-8685-433C-8929-8A384ADD6C17@hobu.co>
References: <B2089E9F-8685-433C-8929-8A384ADD6C17@hobu.co>
Message-ID: <CADPhZXxyVS5ko0VRkbp-ZwWeWkJU5OcHcr4m9QN55UX1Ai_Q0A@mail.gmail.com>

I haven't seen a VRT media type in the wild, nor is there one on
https://www.iana.org/assignments/media-types/media-types.xhtml.

Maybe application/gdalvrt+xml? As far as I know, GDAL is the only software
that plays VRTs, and probably the only software that ever can, considering
the extensions and embedded Python stuff.

On Mon, Apr 19, 2021 at 7:58 AM Howard Butler <howard at hobu.co> wrote:

> Is there a content being used in the wild for VRT? What would be a
> reasonable one to register?
>
> The scenario where I would find this useful is to have an application such
> as QGIS be able to register to open VRTs that were downloaded from a
> server.
>

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210419/b8c40bbe/attachment.html>

From sean at mapbox.com  Mon Apr 19 10:18:12 2021
From: sean at mapbox.com (Sean Gillies)
Date: Mon, 19 Apr 2021 11:18:12 -0600
Subject: [gdal-dev] Motion: adopt RFC80
In-Reply-To: <4545f1ae-67ec-0099-5fbb-a1fe773177d2@spatialys.com>
References: <4545f1ae-67ec-0099-5fbb-a1fe773177d2@spatialys.com>
Message-ID: <CADPhZXwomqinzj9HHJNgek7fmrnp8CUrg0tW=SRg4qOfYNvQ4w@mail.gmail.com>

Hi all,

I was unable to comment on https://github.com/OSGeo/gdal/pull/3682 until
now. Sorry about that.

I think we should consider removing the 2nd paragraph under "Advisory
Board" to help keep the maintenance sponsorship and new feature development
concerns separated. It would be enough, I think, for GDAL maintainers to
present to a board several times a year to keep themselves accountable to
sponsors, and that new feature brainstorming -- which is out of scope --
could be done elsewhere.

On Fri, Apr 16, 2021 at 8:50 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> I hereby motion to adopt RFC 80:
>
> https://github.com/OSGeo/gdal/pull/3682
>
> This also implies adopting the "GDAL Sponsorship Prospectus"  at
>
>
> https://docs.google.com/document/d/1yhMWeI_LgEXPUkngqOitqcKfp7ov6WsS41v5ulz-kd0/edit?ts=60777468#
> whose a PDF version will be uploaded on the website
> (https://github.com/OSGeo/gdal/pull/3681 to be updated)
>
> and the proposed answers to the NumFOCUS application form are at:
>
> https://docs.google.com/document/d/1bc5jdpCe1axdyBHxbJnun7e0DTyDoZI_eFYgJYnOhB8/edit
>
> which will be submitted consequently.
>
> Starting with my +1
>
> Even
>


-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210419/d4edcdf9/attachment.html>

From even.rouault at spatialys.com  Mon Apr 19 10:40:27 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 19 Apr 2021 19:40:27 +0200
Subject: [gdal-dev] Motion: adopt RFC80
In-Reply-To: <CADPhZXwomqinzj9HHJNgek7fmrnp8CUrg0tW=SRg4qOfYNvQ4w@mail.gmail.com>
References: <4545f1ae-67ec-0099-5fbb-a1fe773177d2@spatialys.com>
 <CADPhZXwomqinzj9HHJNgek7fmrnp8CUrg0tW=SRg4qOfYNvQ4w@mail.gmail.com>
Message-ID: <b16133ec-00f7-ae0f-ada6-8f03e2b0a168@spatialys.com>

Sean,

I think the intent here was to kill two birds with one stone. Do the 
reporting related to the maintenance sponsorship, and take advantage of 
that time to also give us a chance to hear from some users who don't 
necessarily track day-to-day GDAL activity through our usual channels. I 
think the exact format of the GDAL advisory board will iterate a bit, 
and here we give a few ideas of how it might work.

Even

Le 19/04/2021 ? 19:18, Sean Gillies via gdal-dev a ?crit?:
> Hi all,
>
> I was unable to comment on https://github.com/OSGeo/gdal/pull/3682 
> <https://github.com/OSGeo/gdal/pull/3682> until now. Sorry about that.
>
> I think we should consider removing the 2nd paragraph under "Advisory 
> Board" to help keep the maintenance sponsorship and new feature 
> development concerns separated. It would be enough, I think, for GDAL 
> maintainers to present to a board several times a year to keep 
> themselves accountable to sponsors, and that new feature brainstorming 
> -- which is out of scope -- could be done elsewhere.
>
> On Fri, Apr 16, 2021 at 8:50 AM Even Rouault 
> <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>> wrote:
>
>     Hi,
>
>     I hereby motion to adopt RFC 80:
>
>     https://github.com/OSGeo/gdal/pull/3682
>     <https://github.com/OSGeo/gdal/pull/3682>
>
>     This also implies adopting the "GDAL Sponsorship Prospectus"? at
>
>     https://docs.google.com/document/d/1yhMWeI_LgEXPUkngqOitqcKfp7ov6WsS41v5ulz-kd0/edit?ts=60777468#
>     <https://docs.google.com/document/d/1yhMWeI_LgEXPUkngqOitqcKfp7ov6WsS41v5ulz-kd0/edit?ts=60777468#>
>
>     whose a PDF version will be uploaded on the website
>     (https://github.com/OSGeo/gdal/pull/3681
>     <https://github.com/OSGeo/gdal/pull/3681> to be updated)
>
>     and the proposed answers to the NumFOCUS application form are at:
>     https://docs.google.com/document/d/1bc5jdpCe1axdyBHxbJnun7e0DTyDoZI_eFYgJYnOhB8/edit
>     <https://docs.google.com/document/d/1bc5jdpCe1axdyBHxbJnun7e0DTyDoZI_eFYgJYnOhB8/edit>
>
>     which will be submitted consequently.
>
>     Starting with my +1
>
>     Even
>
>
>
> -- 
> Sean Gillies
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210419/e30cfd6c/attachment.html>

From howard at hobu.co  Mon Apr 19 11:06:38 2021
From: howard at hobu.co (Howard Butler)
Date: Mon, 19 Apr 2021 13:06:38 -0500
Subject: [gdal-dev] Registered Content-Type for VRT?
In-Reply-To: <CADPhZXxyVS5ko0VRkbp-ZwWeWkJU5OcHcr4m9QN55UX1Ai_Q0A@mail.gmail.com>
References: <B2089E9F-8685-433C-8929-8A384ADD6C17@hobu.co>
 <CADPhZXxyVS5ko0VRkbp-ZwWeWkJU5OcHcr4m9QN55UX1Ai_Q0A@mail.gmail.com>
Message-ID: <49DE2282-A338-4CFB-A501-96C50906D909@hobu.co>



> On Apr 19, 2021, at 12:04 PM, Sean Gillies via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
> 
> I haven't seen a VRT media type in the wild, nor is there one on https://www.iana.org/assignments/media-types/media-types.xhtml.
> 
> Maybe application/gdalvrt+xml?

So application/gdalvrt+json could then still happen ;)

> As far as I know, GDAL is the only software that plays VRTs, and probably the only software that ever can, considering the extensions and embedded Python stuff.

Good point. I was mostly considering its use as a tiling and data resource pointer more than the processing configuration aspects of it.

Howard



From norman.barker at gmail.com  Mon Apr 19 11:48:21 2021
From: norman.barker at gmail.com (Norman Barker)
Date: Mon, 19 Apr 2021 13:48:21 -0500
Subject: [gdal-dev] Motion: adopt RFC80
In-Reply-To: <57BAC22C-1CEE-49AC-A2BF-FA69D536E11A@hobu.co>
References: <4545f1ae-67ec-0099-5fbb-a1fe773177d2@spatialys.com>
 <91a3d5b6-6ba5-5bff-2ed2-a7bd14e18682@mapgears.com>
 <57BAC22C-1CEE-49AC-A2BF-FA69D536E11A@hobu.co>
Message-ID: <CAN_Dn-EVpdFt5tQeZ5nDJKZFtGKCr3G4=0enaYFwKVbkTBnGfQ@mail.gmail.com>

+1

Norman

On Fri, Apr 16, 2021 at 1:49 PM Howard Butler <howard at hobu.co> wrote:

> +1
>
> Howard
>
> > On Apr 16, 2021, at 12:55 PM, Daniel Morissette <
> dmorissette at mapgears.com> wrote:
> >
> > +1
> >
> > Daniel
> >
> >
> > On 2021-04-16 10:50, Even Rouault wrote:
> >> Hi,
> >> I hereby motion to adopt RFC 80:
> >> https://github.com/OSGeo/gdal/pull/3682
> >> This also implies adopting the "GDAL Sponsorship Prospectus"  at
> >>
> https://docs.google.com/document/d/1yhMWeI_LgEXPUkngqOitqcKfp7ov6WsS41v5ulz-kd0/edit?ts=60777468#
> whose a PDF version will be uploaded on the website (
> https://github.com/OSGeo/gdal/pull/3681 to be updated)
> >> and the proposed answers to the NumFOCUS application form are at:
> >>
> https://docs.google.com/document/d/1bc5jdpCe1axdyBHxbJnun7e0DTyDoZI_eFYgJYnOhB8/edit
> which will be submitted consequently.
> >> Starting with my +1
> >> Even
> >
> >
> > --
> > Daniel Morissette
> > Mapgears Inc
> > T: +1 418-696-5056 #201
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210419/bba7c7b7/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Apr 19 15:01:10 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Mon, 19 Apr 2021 15:01:10 -0700 (MST)
Subject: [gdal-dev] Registered Content-Type for VRT?
In-Reply-To: <CADPhZXxyVS5ko0VRkbp-ZwWeWkJU5OcHcr4m9QN55UX1Ai_Q0A@mail.gmail.com>
References: <B2089E9F-8685-433C-8929-8A384ADD6C17@hobu.co>
 <CADPhZXxyVS5ko0VRkbp-ZwWeWkJU5OcHcr4m9QN55UX1Ai_Q0A@mail.gmail.com>
Message-ID: <1618869670093-0.post@n6.nabble.com>

Hi,

Do you count ArcMap or ArcGIS Pro as self standing software or rather as
applications that use GDAL? They read VRTs pretty well but for writing some
developer tools are required
https://pro.arcgis.com/en/pro-app/latest/help/data/imagery/supported-raster-dataset-file-formats.htm.

-Jukka Rahkonen-


GDAL - Dev mailing list wrote
> Maybe application/gdalvrt+xml? As far as I know, GDAL is the only software
> that plays VRTs, and probably the only software that ever can, considering
> the extensions and embedded Python stuff.
> 
> -- 
> Sean Gillies





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From gdt at lexort.com  Mon Apr 19 15:10:09 2021
From: gdt at lexort.com (Greg Troxel)
Date: Mon, 19 Apr 2021 18:10:09 -0400
Subject: [gdal-dev] GDAL 3.3.0beta1 available
In-Reply-To: <aacb98b9-ea44-ac13-7f89-1199f6e63cb1@spatialys.com> (Even
 Rouault's message of "Mon, 19 Apr 2021 15:07:16 +0200")
References: <aacb98b9-ea44-ac13-7f89-1199f6e63cb1@spatialys.com>
Message-ID: <rmituo253jy.fsf@s1.lexort.com>


I locally updated pkgsrc from 3.2.2 to 3.3.0beta1, and it built ok
(without python bindings; that's next).

I noticed a shlib major version bump, which wasn't mentioned in NEWS.
So I wonder if there is truly and ABI break and that should be noted, or
if it shouldn't have been bumped, or something else.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210419/4e48f80a/attachment.sig>

From even.rouault at spatialys.com  Mon Apr 19 15:16:18 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 20 Apr 2021 00:16:18 +0200
Subject: [gdal-dev] GDAL 3.3.0beta1 available
In-Reply-To: <rmituo253jy.fsf@s1.lexort.com>
References: <aacb98b9-ea44-ac13-7f89-1199f6e63cb1@spatialys.com>
 <rmituo253jy.fsf@s1.lexort.com>
Message-ID: <04ceeb1f-8e6b-29d3-69d7-4d0e37343e8f@spatialys.com>

This is intended. All GDAL feature versions change at least some parts 
of the C++ ABI

Le 20/04/2021 ? 00:10, Greg Troxel a ?crit?:
> I locally updated pkgsrc from 3.2.2 to 3.3.0beta1, and it built ok
> (without python bindings; that's next).
>
> I noticed a shlib major version bump, which wasn't mentioned in NEWS.
> So I wonder if there is truly and ABI break and that should be noted, or
> if it shouldn't have been bumped, or something else.

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From pepanpeter at gmail.com  Tue Apr 20 06:59:11 2021
From: pepanpeter at gmail.com (Peter P)
Date: Tue, 20 Apr 2021 15:59:11 +0200
Subject: [gdal-dev] GDAL question
Message-ID: <CAFY+pqnHtXUBMXEK9p+-QG3qoyF6fWUxJrfpJvO-fos9L3qsxw@mail.gmail.com>

Hello

I use GDAL(https://github.com/OSGeo/gdal) with python bindings. I am
importing GeoJSON to PostgreSQL (PostGIS). I know how to import only
geometry to the table. I dont know how to import geometry with others
columns to one table. I need to import geometry to "wkt_geometry" column
and his name to "name" column.
Can you help me please?

Here is how I import only geometry column:
* ogr2ogr.main(["", "-f", "PostgreSQL", "-s_srs", * *"+proj=longlat
+datum=WGS84 +no_defs", "-t_srs", "EPSG:3857", "PG:dbname='test'
host='127.0.0.1' port='5432' user='user1' password='password1'", "-nln",
"table1"])*

Thanks

Best Regards
Peter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210420/badc468e/attachment.html>

From eruiz at aplitop.com  Tue Apr 20 07:50:47 2021
From: eruiz at aplitop.com (Elena Ruiz)
Date: Tue, 20 Apr 2021 14:50:47 +0000
Subject: [gdal-dev] WCS server error. Coverage not found
References: <3d652b5c-aa92-4a2a-85be-25316f1f7b0b.ba94d704-e79f-4907-b4e6-7c540f2b307c.c4a51317-e145-4263-9f82-78ca4ac83366@emailsignatures365.codetwo.com>
Message-ID: <AS8P192MB138331E6A03C2D30DF5CEB02BB489@AS8P192MB1383.EURP192.PROD.OUTLOOK.COM>

Hello I am testing the WCS service but I have a error that I don?t understand.

If I put in a web server this:

http://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&COVERAGE= Modelo%20Digital%20de%20Elevaciones%20(MDE)%20de%20Andalucia%2010%20m&CRS=EPSG:25830&FORMAT=GTiff&BBOX=531006.299122,4100120.659408,544263.630224,4112381.66471&WIDTH=1325&HEIGHT=1226&OUTPUTCRS=C:\Users\elena\AppData\Local\Temp\imagen.tif

this works ok and download a TIFF image.

But if I try to do this in gdal:

>gdal_translate -oo CACHE=wcs_cache -oo CLEAR_CACHE -oo INTERLEAVE=PIXEL -projwin 531006.299122 4100120.659408 544263.630224 4112381.66471 -outsize 1325 1226 "WCS:http://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?VERSION=1.0.0&COVERAGE=Modelo%20Digital%20de%20Elevaciones%20(MDE)%20de%20Andalucia%2010%20m" "C:\Users\elena\AppData\Local\Temp\imagen.tif"

The result is:

ERROR 1: msWCSGetCoverage(): WCS server error. COVERAGE=Modelo%20Digital%20de%20Elevaciones%20(MDE)%20de%20Andalucia%2010%20m not found, not in supported layer list. A layer might be disabled for this request. Check wcs/ows_enable_request settings.

I have tried with other version of service WCS, version 1.1.2 and 2.0.1, the difference is the name of layer, in this cases is ?mdt_10?, but the result in gdal is the same.

>gdalinfo "WCS:https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?version=2.0.1"

Driver: WCS/OGC Web Coverage Service
Files: C:\Users\elena\.gdal\wcs_cache\Zatax.aux.xml
Size is 512, 512
Origin = (0.000000000000000,0.000000000000000)
Pixel Size = (1.000000000000000,1.000000000000000)
Metadata:
  WCS_GLOBAL#crsSupported=http://www.opengis.net/def/crs/EPSG/0/3042,EPSG:3042
  WCS_GLOBAL#formatSupported=image/png,image/jpeg
  WCS_GLOBAL#InterpolationSupported=NEAREST,AVERAGE,BILINEAR
  WCS_GLOBAL#Keywords=WCS,MDT
  WCS_GLOBAL#Profiles=WCS/2.0/conf/core,WCS_protocol-binding_get-kvp/1.0/conf/get-kvp,WCS_protocol-binding_post-xml/1.0/conf/post-xml,GMLCOV/1.0/conf/gml-coverage,GMLCOV/1.0/conf/multipart,GMLCOV/1.0/conf/special-format,GMLCOV_geotiff-coverages/1.0/conf/geotiff-coverage,WCS_service-extension_crs/1.0/conf/crs,WCS_service-extension_scaling/1.0/conf/scaling,WCS_service-extension_range-subsetting/1.0/conf/record-subsetting,WCS_service-extension_interpolation/1.0/conf/interpolation
  WCS_GLOBAL#ServiceIdentification.Abstract=Nodo de la Red de Informacion Ambiental de Andalucia. Junta de Andalucia. Servicio WCS del Modelo Digital de Elevaciones (MDE) de Andalucia de 10 m de resolucion generado a partir de los vuelos realizados en 2010 (cuadrantes Sureste (SE) Suroeste (SW)) y 2011 (cuadrantes Noreste (NE) y Noroeste (NW)). Tambien se muestra el Modelo Digital de Elevaciones de Andalucia de 100 m generado a partir de MDE por cuadrantes (resolucion 10x10 y 5x5m) remuestreados procedentes de los proyectos de produccion de Ortofotos regionales de Andalucia y del PNOA. Integrado en la Infraestructura de Datos Espaciales de Andalucia, siguiendo las directrices del Sistema Cartografico de Andalucia.
  WCS_GLOBAL#ServiceIdentification.AccessConstraints=Este servicio se puede usar de modo libre y gratuito siempre que se mencione a los autores y propietarios de la informacion
  WCS_GLOBAL#ServiceIdentification.Fees=Gratuito
  WCS_GLOBAL#ServiceIdentification.Title=REDIAM. WCS Modelo Digital de Elevaciones (MDE) de Andalucia
  WCS_GLOBAL#ServiceProvider.ProviderName=Consejer??a de Agricultura, Ganader??a, Pesca y Desarrollo Sostenible. Junta de Andaluc??a
  WCS_GLOBAL#ServiceProvider.ProviderSite=https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt
  WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Address.AdministrativeArea=Sevilla
  WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Address.City=Sevilla
  WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Address.Country=Spain
  WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Address.DeliveryPoint=Avda. Manuel Siurot,50
  WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Address.PostalCode=41071
  WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.ContactInstructions=--
  WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.HoursOfService=--
  WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Phone.Facsimile=--
  WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Phone.Voice=+34955003400
  WCS_GLOBAL#ServiceProvider.ServiceContact.IndividualName=--
  WCS_GLOBAL#ServiceProvider.ServiceContact.PositionName=Servicio de Informacion y Analisis Ambiental
  WCS_GLOBAL#ServiceProvider.ServiceContact.Role=--
  WCS_GLOBAL#version=2.0.1
Subdatasets:
  SUBDATASET_1_NAME=WCS:https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?version=2.0.1&coverage=mdt_10
  SUBDATASET_1_DESC=mdt_10
  SUBDATASET_2_NAME=WCS:https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?version=2.0.1&coverage=mdt_100
  SUBDATASET_2_DESC=mdt_100
Corner Coordinates:
Upper Left  (   0.0000000,   0.0000000)
Lower Left  (       0.000,     512.000)
Upper Right (     512.000,       0.000)
Lower Right (     512.000,     512.000)
Center      (     256.000,     256.000)

>gdalinfo "WCS:https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?version=2.0.1&coverage=mdt_10"

ERROR 1: HTTP error code : 404
ERROR 1: NoSuchCoverage: msWCSGetCoverage20(): WCS server error. COVERAGEID=mdt_10 not found, not in supported layer list. A layer might be disabled for this request. Check wcs/ows_enable_request settings.
gdalinfo failed - unable to open 'WCS:https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?version=2.0.1&coverage=mdt_10'.

Can anyone help me? Thank you very much and regards
________________________________

[https://www.aplitop.com/descargas/firma1.jpg]


Elena Ruiz
Sofware Development & Technical Support
Tel. +34 952 43 97 71
eruiz at aplitop.com
Sumatra, 9 - 29190 Malaga (Spain)
www.aplitop.com

[cid:SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png]<https://www.facebook.com/AplitopSL/>   [cid:SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png] <https://twitter.com/aplitop>    [cid:SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png] <https://www.linkedin.com/company/aplitop>    [cid:SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png] <https://www.youtube.com/user/aplitop>


In accordance with the provisions of the European Regulation of Data Protection 2016/679 (Reglamento Europeo de Proteccion de Datos 2016/679), we inform you that the data and the information you provide us through this medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with address at C / Sumatra, 9, Malaga, 29190, in order to answer your questions and inform you about our products. The data provided will be kept as long as it does not request its cessation and will not be transferred to third parties except in cases where there is a legal obligation. You have the right to access your personal data, correct inaccurate data or request its deletion when the data is no longer necessary for the purposes that were collected, as well as any rights recognized in the RGPD 2016/679

<https://www.aplitop.com/Event/en/358/intergeo-2019>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210420/6cf8e4ba/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png
Type: image/png
Size: 365 bytes
Desc: SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210420/6cf8e4ba/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png
Type: image/png
Size: 619 bytes
Desc: SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210420/6cf8e4ba/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png
Type: image/png
Size: 468 bytes
Desc: SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210420/6cf8e4ba/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png
Type: image/png
Size: 817 bytes
Desc: SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210420/6cf8e4ba/attachment-0007.png>

From even.rouault at spatialys.com  Tue Apr 20 07:53:10 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 20 Apr 2021 16:53:10 +0200
Subject: [gdal-dev] Motion: adopt RFC80
In-Reply-To: <4545f1ae-67ec-0099-5fbb-a1fe773177d2@spatialys.com>
References: <4545f1ae-67ec-0099-5fbb-a1fe773177d2@spatialys.com>
Message-ID: <def790a0-1cf3-4a53-5823-2b8c116f07cd@spatialys.com>

Hi,

I declare this motion passed with +1 from PSC members EvenR, KurtS, 
FrankW, MateuszL, DanielM, HowardB and NormanB

Even

Le 16/04/2021 ? 16:50, Even Rouault a ?crit?:
> Hi,
>
> I hereby motion to adopt RFC 80:
>
> https://github.com/OSGeo/gdal/pull/3682
>
> This also implies adopting the "GDAL Sponsorship Prospectus"? at
>
> https://docs.google.com/document/d/1yhMWeI_LgEXPUkngqOitqcKfp7ov6WsS41v5ulz-kd0/edit?ts=60777468# 
> whose a PDF version will be uploaded on the website 
> (https://github.com/OSGeo/gdal/pull/3681 to be updated)
>
> and the proposed answers to the NumFOCUS application form are at:
> https://docs.google.com/document/d/1bc5jdpCe1axdyBHxbJnun7e0DTyDoZI_eFYgJYnOhB8/edit 
>
>
> which will be submitted consequently.
>
> Starting with my +1
>
> Even
>
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jukka.rahkonen at maanmittauslaitos.fi  Tue Apr 20 08:25:48 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Tue, 20 Apr 2021 08:25:48 -0700 (MST)
Subject: [gdal-dev] GDAL question
In-Reply-To: <CAFY+pqnHtXUBMXEK9p+-QG3qoyF6fWUxJrfpJvO-fos9L3qsxw@mail.gmail.com>
References: <CAFY+pqnHtXUBMXEK9p+-QG3qoyF6fWUxJrfpJvO-fos9L3qsxw@mail.gmail.com>
Message-ID: <1618932348826-0.post@n6.nabble.com>

Hi,

Ogr2ogr by default converts all the columns so you should not need to do
anything. Test first ogr2ogr from the command line without mixing Python
into the soup. If you still do not get your "name" attribute converted you
may have something special in your data, like a few first features in the
GeoJSON missing the name attribute.

Do you really mean "wkt_geometry" or is it possibly "wkb_geometry"?

If you will still have troubles please share some test data.

-Jukka Rahkonen- 



Peter P wrote
> Hello
> 
> I use GDAL(https://github.com/OSGeo/gdal) with python bindings. I am
> importing GeoJSON to PostgreSQL (PostGIS). I know how to import only
> geometry to the table. I dont know how to import geometry with others
> columns to one table. I need to import geometry to "wkt_geometry" column
> and his name to "name" column.
> Can you help me please?
> 
> Here is how I import only geometry column:
> * ogr2ogr.main(["", "-f", "PostgreSQL", "-s_srs", * *"+proj=longlat
> +datum=WGS84 +no_defs", "-t_srs", "EPSG:3857", "PG:dbname='test'
> host='127.0.0.1' port='5432' user='user1' password='password1'", "-nln",
> "table1"])*
> 
> Thanks
> 
> Best Regards
> Peter
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Tue Apr 20 08:52:49 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Tue, 20 Apr 2021 08:52:49 -0700 (MST)
Subject: [gdal-dev] WCS server error. Coverage not found
In-Reply-To: <AS8P192MB138331E6A03C2D30DF5CEB02BB489@AS8P192MB1383.EURP192.PROD.OUTLOOK.COM>
References: <AS8P192MB138331E6A03C2D30DF5CEB02BB489@AS8P192MB1383.EURP192.PROD.OUTLOOK.COM>
Message-ID: <1618933969087-0.post@n6.nabble.com>

Hi Elena,

Check the service with direct http calls from the browser:
1) The capabilities
https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?SERVICE=WCS&version=2.0.1&request=GetCapabilities
Result: OK

2) Describe one coverage
https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?SERVICE=WCS&version=2.0.1&request=DescribeCoverage&coverageID=mdt_10
Result: OK

3) Try to get the coverage 
https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?SERVICE=WCS&version=2.0.1&request=GetCoverage&coverageID=mdt_10

Result:
<ows:Exception exceptionCode="NoSuchCoverage" locator="coverageid">
<ows:ExceptionText>msWCSGetCoverage20(): WCS server error. COVERAGEID=mdt_10
not found, not in supported layer list. A layer might be disabled for this
request. Check wcs/ows_enable_request settings.</ows:ExceptionText>
</ows:Exception>

The server just does not send data with GetCoverage. Ask the service
provider if that is intentional.

The error message gives a hint. Service seems to be running on MapServer and
now it is not configured to support GetCoverage request. If service probider
wants to support it their should edit their mapfile where the
"wcs_enable_request" metadata item is set. Of course there are other ways to
misconfigure the server.


-Jukka Rahkonen-



Elena Ruiz wrote
> Hello I am testing the WCS service but I have a error that I don?t
> understand.
> 
> If I put in a web server this:
> 
> http://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&COVERAGE=
> Modelo%20Digital%20de%20Elevaciones%20(MDE)%20de%20Andalucia%2010%20m&CRS=EPSG:25830&FORMAT=GTiff&BBOX=531006.299122,4100120.659408,544263.630224,4112381.66471&WIDTH=1325&HEIGHT=1226&OUTPUTCRS=C:\Users\elena\AppData\Local\Temp\imagen.tif
> 
> this works ok and download a TIFF image.
> 
> But if I try to do this in gdal:
> 
>>gdal_translate -oo CACHE=wcs_cache -oo CLEAR_CACHE -oo INTERLEAVE=PIXEL
-projwin 531006.299122 4100120.659408 544263.630224 4112381.66471 -outsize
1325 1226
"WCS:http://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?VERSION=1.0.0&COVERAGE=Modelo%20Digital%20de%20Elevaciones%20(MDE)%20de%20Andalucia%2010%20m"
"C:\Users\elena\AppData\Local\Temp\imagen.tif"
> 
> The result is:
> 
> ERROR 1: msWCSGetCoverage(): WCS server error.
> COVERAGE=Modelo%20Digital%20de%20Elevaciones%20(MDE)%20de%20Andalucia%2010%20m
> not found, not in supported layer list. A layer might be disabled for this
> request. Check wcs/ows_enable_request settings.
> 
> I have tried with other version of service WCS, version 1.1.2 and 2.0.1,
> the difference is the name of layer, in this cases is ?mdt_10?, but the
> result in gdal is the same.
> 
>>gdalinfo
"WCS:https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?version=2.0.1"
> 
> Driver: WCS/OGC Web Coverage Service
> Files: C:\Users\elena\.gdal\wcs_cache\Zatax.aux.xml
> Size is 512, 512
> Origin = (0.000000000000000,0.000000000000000)
> Pixel Size = (1.000000000000000,1.000000000000000)
> Metadata:
>  
> WCS_GLOBAL#crsSupported=http://www.opengis.net/def/crs/EPSG/0/3042,EPSG:3042
>   WCS_GLOBAL#formatSupported=image/png,image/jpeg
>   WCS_GLOBAL#InterpolationSupported=NEAREST,AVERAGE,BILINEAR
>   WCS_GLOBAL#Keywords=WCS,MDT
>  
> WCS_GLOBAL#Profiles=WCS/2.0/conf/core,WCS_protocol-binding_get-kvp/1.0/conf/get-kvp,WCS_protocol-binding_post-xml/1.0/conf/post-xml,GMLCOV/1.0/conf/gml-coverage,GMLCOV/1.0/conf/multipart,GMLCOV/1.0/conf/special-format,GMLCOV_geotiff-coverages/1.0/conf/geotiff-coverage,WCS_service-extension_crs/1.0/conf/crs,WCS_service-extension_scaling/1.0/conf/scaling,WCS_service-extension_range-subsetting/1.0/conf/record-subsetting,WCS_service-extension_interpolation/1.0/conf/interpolation
>   WCS_GLOBAL#ServiceIdentification.Abstract=Nodo de la Red de Informacion
> Ambiental de Andalucia. Junta de Andalucia. Servicio WCS del Modelo
> Digital de Elevaciones (MDE) de Andalucia de 10 m de resolucion generado a
> partir de los vuelos realizados en 2010 (cuadrantes Sureste (SE) Suroeste
> (SW)) y 2011 (cuadrantes Noreste (NE) y Noroeste (NW)). Tambien se muestra
> el Modelo Digital de Elevaciones de Andalucia de 100 m generado a partir
> de MDE por cuadrantes (resolucion 10x10 y 5x5m) remuestreados procedentes
> de los proyectos de produccion de Ortofotos regionales de Andalucia y del
> PNOA. Integrado en la Infraestructura de Datos Espaciales de Andalucia,
> siguiendo las directrices del Sistema Cartografico de Andalucia.
>   WCS_GLOBAL#ServiceIdentification.AccessConstraints=Este servicio se
> puede usar de modo libre y gratuito siempre que se mencione a los autores
> y propietarios de la informacion
>   WCS_GLOBAL#ServiceIdentification.Fees=Gratuito
>   WCS_GLOBAL#ServiceIdentification.Title=REDIAM. WCS Modelo Digital de
> Elevaciones (MDE) de Andalucia
>   WCS_GLOBAL#ServiceProvider.ProviderName=Consejer??a de Agricultura,
> Ganader??a, Pesca y Desarrollo Sostenible. Junta de Andaluc??a
>  
> WCS_GLOBAL#ServiceProvider.ProviderSite=https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt
>  
> WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Address.AdministrativeArea=Sevilla
>  
> WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Address.City=Sevilla
>  
> WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Address.Country=Spain
>  
> WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Address.DeliveryPoint=Avda.
> Manuel Siurot,50
>  
> WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Address.PostalCode=41071
>  
> WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.ContactInstructions=--
>   WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.HoursOfService=--
>   WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Phone.Facsimile=--
>  
> WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Phone.Voice=+34955003400
>   WCS_GLOBAL#ServiceProvider.ServiceContact.IndividualName=--
>   WCS_GLOBAL#ServiceProvider.ServiceContact.PositionName=Servicio de
> Informacion y Analisis Ambiental
>   WCS_GLOBAL#ServiceProvider.ServiceContact.Role=--
>   WCS_GLOBAL#version=2.0.1
> Subdatasets:
>  
> SUBDATASET_1_NAME=WCS:https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?version=2.0.1&coverage=mdt_10
>   SUBDATASET_1_DESC=mdt_10
>  
> SUBDATASET_2_NAME=WCS:https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?version=2.0.1&coverage=mdt_100
>   SUBDATASET_2_DESC=mdt_100
> Corner Coordinates:
> Upper Left  (   0.0000000,   0.0000000)
> Lower Left  (       0.000,     512.000)
> Upper Right (     512.000,       0.000)
> Lower Right (     512.000,     512.000)
> Center      (     256.000,     256.000)
> 
>>gdalinfo
"WCS:https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?version=2.0.1&coverage=mdt_10"
> 
> ERROR 1: HTTP error code : 404
> ERROR 1: NoSuchCoverage: msWCSGetCoverage20(): WCS server error.
> COVERAGEID=mdt_10 not found, not in supported layer list. A layer might be
> disabled for this request. Check wcs/ows_enable_request settings.
> gdalinfo failed - unable to open
> 'WCS:https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?version=2.0.1&coverage=mdt_10'.
> 
> Can anyone help me? Thank you very much and regards
> ________________________________
> 
> [https://www.aplitop.com/descargas/firma1.jpg]
> 
> 
> Elena Ruiz
> Sofware Development & Technical Support
> Tel. +34 952 43 97 71

> eruiz@

> Sumatra, 9 - 29190 Malaga (Spain)
> www.aplitop.com
> 
> [cid:SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png]&lt;https://www.facebook.com/AplitopSL/&gt;  
> [cid:SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png]
> &lt;https://twitter.com/aplitop&gt;   
> [cid:SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png]
> &lt;https://www.linkedin.com/company/aplitop&gt;   
> [cid:SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png]
> &lt;https://www.youtube.com/user/aplitop&gt;
> 
> 
> In accordance with the provisions of the European Regulation of Data
> Protection 2016/679 (Reglamento Europeo de Proteccion de Datos 2016/679),
> we inform you that the data and the information you provide us through
> this medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with
> address at C / Sumatra, 9, Malaga, 29190, in order to answer your
> questions and inform you about our products. The data provided will be
> kept as long as it does not request its cessation and will not be
> transferred to third parties except in cases where there is a legal
> obligation. You have the right to access your personal data, correct
> inaccurate data or request its deletion when the data is no longer
> necessary for the purposes that were collected, as well as any rights
> recognized in the RGPD 2016/679
> 
> &lt;https://www.aplitop.com/Event/en/358/intergeo-2019&gt;
> 
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png (502
> bytes)
> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5485329/0/SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png&gt;
> SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png (850
> bytes)
> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5485329/1/SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png&gt;
> SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png (642
> bytes)
> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5485329/2/SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png&gt;
> SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png (1K)
> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5485329/3/SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png&gt;





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From sean at mapbox.com  Tue Apr 20 09:04:44 2021
From: sean at mapbox.com (Sean Gillies)
Date: Tue, 20 Apr 2021 10:04:44 -0600
Subject: [gdal-dev] Registered Content-Type for VRT?
In-Reply-To: <1618869670093-0.post@n6.nabble.com>
References: <B2089E9F-8685-433C-8929-8A384ADD6C17@hobu.co>
 <CADPhZXxyVS5ko0VRkbp-ZwWeWkJU5OcHcr4m9QN55UX1Ai_Q0A@mail.gmail.com>
 <1618869670093-0.post@n6.nabble.com>
Message-ID: <CADPhZXyG820yCB+_yKVC166QczvPCoCKHjif3O=fGG1ARvDUpA@mail.gmail.com>

Hi Jukka,

It's possible that ArcGIS has independently implemented VRT, but I think
it's more likely that it delegates to GDAL. I think it would be possible to
craft a VRT doc that would reveal some details -- such as one that uses
GDAL's embedded Python pixel functions to dump some system information --
but I don't have access to ArcGIS to try it.

On Mon, Apr 19, 2021 at 4:01 PM jratike80 <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> Hi,
>
> Do you count ArcMap or ArcGIS Pro as self standing software or rather as
> applications that use GDAL? They read VRTs pretty well but for writing some
> developer tools are required
>
> https://pro.arcgis.com/en/pro-app/latest/help/data/imagery/supported-raster-dataset-file-formats.htm
> .
>
> -Jukka Rahkonen-
>
>
> GDAL - Dev mailing list wrote
> > Maybe application/gdalvrt+xml? As far as I know, GDAL is the only
> software
> > that plays VRTs, and probably the only software that ever can,
> considering
> > the extensions and embedded Python stuff.
> >
>

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210420/1afe7df2/attachment.html>

From even.rouault at spatialys.com  Tue Apr 20 09:09:41 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 20 Apr 2021 18:09:41 +0200
Subject: [gdal-dev] Registered Content-Type for VRT?
In-Reply-To: <CADPhZXyG820yCB+_yKVC166QczvPCoCKHjif3O=fGG1ARvDUpA@mail.gmail.com>
References: <B2089E9F-8685-433C-8929-8A384ADD6C17@hobu.co>
 <CADPhZXxyVS5ko0VRkbp-ZwWeWkJU5OcHcr4m9QN55UX1Ai_Q0A@mail.gmail.com>
 <1618869670093-0.post@n6.nabble.com>
 <CADPhZXyG820yCB+_yKVC166QczvPCoCKHjif3O=fGG1ARvDUpA@mail.gmail.com>
Message-ID: <4f6c2f72-2b1e-180b-22d4-6375e45170ca@spatialys.com>

application/gdalvrt+xml would just mean what the organization that defines the format is. People could reimplement that from scratch

Note that there is potentially the OGR VRT format (that could go as application/ogrvrt+xml), but that is a separate schema and likely less used than its raster counterpart.

Le 20/04/2021 ? 18:04, Sean Gillies via gdal-dev a ?crit?:

> Hi Jukka,
>
> It's possible that ArcGIS has independently implemented VRT, but I 
> think it's more likely that it delegates to GDAL. I think it would be 
> possible to craft a VRT doc that would reveal some details -- such as 
> one that uses GDAL's embedded Python pixel functions to dump some 
> system information -- but I don't have access to ArcGIS to try it.
>
> On Mon, Apr 19, 2021 at 4:01 PM jratike80 
> <jukka.rahkonen at maanmittauslaitos.fi 
> <mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
>
>     Hi,
>
>     Do you count ArcMap or ArcGIS Pro as self standing software or
>     rather as
>     applications that use GDAL? They read VRTs pretty well but for
>     writing some
>     developer tools are required
>     https://pro.arcgis.com/en/pro-app/latest/help/data/imagery/supported-raster-dataset-file-formats.htm
>     <https://pro.arcgis.com/en/pro-app/latest/help/data/imagery/supported-raster-dataset-file-formats.htm>.
>
>     -Jukka Rahkonen-
>
>
>     GDAL - Dev mailing list wrote
>     > Maybe application/gdalvrt+xml? As far as I know, GDAL is the
>     only software
>     > that plays VRTs, and probably the only software that ever can,
>     considering
>     > the extensions and embedded Python stuff.
>     >
>
> -- 
> Sean Gillies
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210420/d4f413f4/attachment-0001.html>

From eruiz at aplitop.com  Tue Apr 20 09:25:27 2021
From: eruiz at aplitop.com (Elena Ruiz)
Date: Tue, 20 Apr 2021 16:25:27 +0000
Subject: [gdal-dev] gdal-dev Digest, Vol 203, Issue 38
In-Reply-To: <mailman.37729.1618934988.26371.gdal-dev@lists.osgeo.org>
References: <mailman.37729.1618934988.26371.gdal-dev@lists.osgeo.org>
 <3d652b5c-aa92-4a2a-85be-25316f1f7b0b.ba94d704-e79f-4907-b4e6-7c540f2b307c.63120239-568f-4b44-8ff0-4b6b5a07a81b@emailsignatures365.codetwo.com>
Message-ID: <AS8P192MB13830EAE1FDFCD76900E196BBB489@AS8P192MB1383.EURP192.PROD.OUTLOOK.COM>



Hello and thank you very much for your answer, I understand what you are telling me, but this happens with version 2.0.1, if you try with the version 1.0.0 and with the layer "Model% 20Digital% 20de% 20Elevaciones% 20 (MDE)% 20de% 20Andalucia% 2010% 20m" the server returns a response and in fact, if all the parameters are completed, it returns an image. Why doesn't gdal work with WCS version 1.0.0 either?

Example:
http://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&COVERAGE=Modelo%20Digital%20de%20Elevaciones%20(MDE)%20de%20Andalucia%2010%20m&CRS=EPSG:25830&FORMAT=GTiff&BBOX=531006.299122,4100120.659408,544263.630224,4112381.66471&WIDTH=1325&HEIGHT=1226&OUTPUTCRS=C:\Users\elena\AppData\Local\Temp\imagen.tif

Regards

------------------------------

Message: 3
Date: Tue, 20 Apr 2021 08:52:49 -0700 (MST)
From: jratike80 <jukka.rahkonen at maanmittauslaitos.fi>
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] WCS server error. Coverage not found
Message-ID: <1618933969087-0.post at n6.nabble.com>
Content-Type: text/plain; charset=UTF-8

Hi Elena,

Check the service with direct http calls from the browser:
1) The capabilities
https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?SERVICE=WCS&version=2.0.1&request=GetCapabilities
Result: OK

2) Describe one coverage
https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?SERVICE=WCS&version=2.0.1&request=DescribeCoverage&coverageID=mdt_10
Result: OK

3) Try to get the coverage 
https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?SERVICE=WCS&version=2.0.1&request=GetCoverage&coverageID=mdt_10

Result:
<ows:Exception exceptionCode="NoSuchCoverage" locator="coverageid">
<ows:ExceptionText>msWCSGetCoverage20(): WCS server error. COVERAGEID=mdt_10
not found, not in supported layer list. A layer might be disabled for this
request. Check wcs/ows_enable_request settings.</ows:ExceptionText>
</ows:Exception>

The server just does not send data with GetCoverage. Ask the service
provider if that is intentional.

The error message gives a hint. Service seems to be running on MapServer and
now it is not configured to support GetCoverage request. If service probider
wants to support it their should edit their mapfile where the
"wcs_enable_request" metadata item is set. Of course there are other ways to
misconfigure the server.


-Jukka Rahkonen-



Elena Ruiz wrote
> Hello I am testing the WCS service but I have a error that I don?t
> understand.
> 
> If I put in a web server this:
> 
> http://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&COVERAGE=
> Modelo%20Digital%20de%20Elevaciones%20(MDE)%20de%20Andalucia%2010%20m&CRS=EPSG:25830&FORMAT=GTiff&BBOX=531006.299122,4100120.659408,544263.630224,4112381.66471&WIDTH=1325&HEIGHT=1226&OUTPUTCRS=C:\Users\elena\AppData\Local\Temp\imagen.tif
> 
> this works ok and download a TIFF image.
> 
> But if I try to do this in gdal:
> 
>>gdal_translate -oo CACHE=wcs_cache -oo CLEAR_CACHE -oo INTERLEAVE=PIXEL
-projwin 531006.299122 4100120.659408 544263.630224 4112381.66471 -outsize
1325 1226
"WCS:http://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?VERSION=1.0.0&COVERAGE=Modelo%20Digital%20de%20Elevaciones%20(MDE)%20de%20Andalucia%2010%20m"
"C:\Users\elena\AppData\Local\Temp\imagen.tif"
> 
> The result is:
> 
> ERROR 1: msWCSGetCoverage(): WCS server error.
> COVERAGE=Modelo%20Digital%20de%20Elevaciones%20(MDE)%20de%20Andalucia%2010%20m
> not found, not in supported layer list. A layer might be disabled for this
> request. Check wcs/ows_enable_request settings.
> 
> I have tried with other version of service WCS, version 1.1.2 and 2.0.1,
> the difference is the name of layer, in this cases is ?mdt_10?, but the
> result in gdal is the same.
> 
>>gdalinfo
"WCS:https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?version=2.0.1"
> 
> Driver: WCS/OGC Web Coverage Service
> Files: C:\Users\elena\.gdal\wcs_cache\Zatax.aux.xml
> Size is 512, 512
> Origin = (0.000000000000000,0.000000000000000)
> Pixel Size = (1.000000000000000,1.000000000000000)
> Metadata:
>  
> WCS_GLOBAL#crsSupported=http://www.opengis.net/def/crs/EPSG/0/3042,EPSG:3042
>   WCS_GLOBAL#formatSupported=image/png,image/jpeg
>   WCS_GLOBAL#InterpolationSupported=NEAREST,AVERAGE,BILINEAR
>   WCS_GLOBAL#Keywords=WCS,MDT
>  
> WCS_GLOBAL#Profiles=WCS/2.0/conf/core,WCS_protocol-binding_get-kvp/1.0/conf/get-kvp,WCS_protocol-binding_post-xml/1.0/conf/post-xml,GMLCOV/1.0/conf/gml-coverage,GMLCOV/1.0/conf/multipart,GMLCOV/1.0/conf/special-format,GMLCOV_geotiff-coverages/1.0/conf/geotiff-coverage,WCS_service-extension_crs/1.0/conf/crs,WCS_service-extension_scaling/1.0/conf/scaling,WCS_service-extension_range-subsetting/1.0/conf/record-subsetting,WCS_service-extension_interpolation/1.0/conf/interpolation
>   WCS_GLOBAL#ServiceIdentification.Abstract=Nodo de la Red de Informacion
> Ambiental de Andalucia. Junta de Andalucia. Servicio WCS del Modelo
> Digital de Elevaciones (MDE) de Andalucia de 10 m de resolucion generado a
> partir de los vuelos realizados en 2010 (cuadrantes Sureste (SE) Suroeste
> (SW)) y 2011 (cuadrantes Noreste (NE) y Noroeste (NW)). Tambien se muestra
> el Modelo Digital de Elevaciones de Andalucia de 100 m generado a partir
> de MDE por cuadrantes (resolucion 10x10 y 5x5m) remuestreados procedentes
> de los proyectos de produccion de Ortofotos regionales de Andalucia y del
> PNOA. Integrado en la Infraestructura de Datos Espaciales de Andalucia,
> siguiendo las directrices del Sistema Cartografico de Andalucia.
>   WCS_GLOBAL#ServiceIdentification.AccessConstraints=Este servicio se
> puede usar de modo libre y gratuito siempre que se mencione a los autores
> y propietarios de la informacion
>   WCS_GLOBAL#ServiceIdentification.Fees=Gratuito
>   WCS_GLOBAL#ServiceIdentification.Title=REDIAM. WCS Modelo Digital de
> Elevaciones (MDE) de Andalucia
>   WCS_GLOBAL#ServiceProvider.ProviderName=Consejer??a de Agricultura,
> Ganader??a, Pesca y Desarrollo Sostenible. Junta de Andaluc??a
>  
> WCS_GLOBAL#ServiceProvider.ProviderSite=https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt
>  
> WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Address.AdministrativeArea=Sevilla
>  
> WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Address.City=Sevilla
>  
> WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Address.Country=Spain
>  
> WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Address.DeliveryPoint=Avda.
> Manuel Siurot,50
>  
> WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Address.PostalCode=41071
>  
> WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.ContactInstructions=--
>   WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.HoursOfService=--
>   WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Phone.Facsimile=--
>  
> WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Phone.Voice=+34955003400
>   WCS_GLOBAL#ServiceProvider.ServiceContact.IndividualName=--
>   WCS_GLOBAL#ServiceProvider.ServiceContact.PositionName=Servicio de
> Informacion y Analisis Ambiental
>   WCS_GLOBAL#ServiceProvider.ServiceContact.Role=--
>   WCS_GLOBAL#version=2.0.1
> Subdatasets:
>  
> SUBDATASET_1_NAME=WCS:https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?version=2.0.1&coverage=mdt_10
>   SUBDATASET_1_DESC=mdt_10
>  
> SUBDATASET_2_NAME=WCS:https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?version=2.0.1&coverage=mdt_100
>   SUBDATASET_2_DESC=mdt_100
> Corner Coordinates:
> Upper Left  (   0.0000000,   0.0000000)
> Lower Left  (       0.000,     512.000)
> Upper Right (     512.000,       0.000)
> Lower Right (     512.000,     512.000)
> Center      (     256.000,     256.000)
> 
>>gdalinfo
"WCS:https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?version=2.0.1&coverage=mdt_10"
> 
> ERROR 1: HTTP error code : 404
> ERROR 1: NoSuchCoverage: msWCSGetCoverage20(): WCS server error.
> COVERAGEID=mdt_10 not found, not in supported layer list. A layer might be
> disabled for this request. Check wcs/ows_enable_request settings.
> gdalinfo failed - unable to open
> 'WCS:https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?version=2.0.1&coverage=mdt_10'.
> 
> Can anyone help me? Thank you very much and regards
> ________________________________
> 
> [https://www.aplitop.com/descargas/firma1.jpg]
> 
> 
> Elena Ruiz
> Sofware Development & Technical Support
> Tel. +34 952 43 97 71

> eruiz@

> Sumatra, 9 - 29190 Malaga (Spain)
> www.aplitop.com
> 
> [cid:SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png]&lt;https://www.facebook.com/AplitopSL/&gt;  
> [cid:SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png]
> &lt;https://twitter.com/aplitop&gt;   
> [cid:SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png]
> &lt;https://www.linkedin.com/company/aplitop&gt;   
> [cid:SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png]
> &lt;https://www.youtube.com/user/aplitop&gt;
> 
> 
> In accordance with the provisions of the European Regulation of Data
> Protection 2016/679 (Reglamento Europeo de Proteccion de Datos 2016/679),
> we inform you that the data and the information you provide us through
> this medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with
> address at C / Sumatra, 9, Malaga, 29190, in order to answer your
> questions and inform you about our products. The data provided will be
> kept as long as it does not request its cessation and will not be
> transferred to third parties except in cases where there is a legal
> obligation. You have the right to access your personal data, correct
> inaccurate data or request its deletion when the data is no longer
> necessary for the purposes that were collected, as well as any rights
> recognized in the RGPD 2016/679
> 
> &lt;https://www.aplitop.com/Event/en/358/intergeo-2019&gt;
> 
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png (502
> bytes)
> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5485329/0/SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png&gt;
> SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png (850
> bytes)
> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5485329/1/SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png&gt;
> SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png (642
> bytes)
> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5485329/2/SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png&gt;
> SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png (1K)
> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5485329/3/SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png&gt;





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html


------------------------------

Message: 4
Date: Tue, 20 Apr 2021 10:04:44 -0600
From: Sean Gillies <sean at mapbox.com>
To: gdal dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Registered Content-Type for VRT?
Message-ID:
	<CADPhZXyG820yCB+_yKVC166QczvPCoCKHjif3O=fGG1ARvDUpA at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Hi Jukka,

It's possible that ArcGIS has independently implemented VRT, but I think
it's more likely that it delegates to GDAL. I think it would be possible to
craft a VRT doc that would reveal some details -- such as one that uses
GDAL's embedded Python pixel functions to dump some system information --
but I don't have access to ArcGIS to try it.

On Mon, Apr 19, 2021 at 4:01 PM jratike80 <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> Hi,
>
> Do you count ArcMap or ArcGIS Pro as self standing software or rather as
> applications that use GDAL? They read VRTs pretty well but for writing some
> developer tools are required
>
> https://pro.arcgis.com/en/pro-app/latest/help/data/imagery/supported-raster-dataset-file-formats.htm
> .
>
> -Jukka Rahkonen-
>
>
> GDAL - Dev mailing list wrote
> > Maybe application/gdalvrt+xml? As far as I know, GDAL is the only
> software
> > that plays VRTs, and probably the only software that ever can,
> considering
> > the extensions and embedded Python stuff.
> >
>

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210420/1afe7df2/attachment-0001.html>

------------------------------

Message: 5
Date: Tue, 20 Apr 2021 18:09:41 +0200
From: Even Rouault <even.rouault at spatialys.com>
To: Sean Gillies <sean at mapbox.com>, gdal dev
	<gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Registered Content-Type for VRT?
Message-ID: <4f6c2f72-2b1e-180b-22d4-6375e45170ca at spatialys.com>
Content-Type: text/plain; charset="utf-8"; Format="flowed"

application/gdalvrt+xml would just mean what the organization that defines the format is. People could reimplement that from scratch

Note that there is potentially the OGR VRT format (that could go as application/ogrvrt+xml), but that is a separate schema and likely less used than its raster counterpart.

Le 20/04/2021 ? 18:04, Sean Gillies via gdal-dev a ?crit?:

> Hi Jukka,
>
> It's possible that ArcGIS has independently implemented VRT, but I 
> think it's more likely that it delegates to GDAL. I think it would be 
> possible to craft a VRT doc that would reveal some details -- such as 
> one that uses GDAL's embedded Python pixel functions to dump some 
> system information -- but I don't have access to ArcGIS to try it.
>
> On Mon, Apr 19, 2021 at 4:01 PM jratike80 
> <jukka.rahkonen at maanmittauslaitos.fi 
> <mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
>
>     Hi,
>
>     Do you count ArcMap or ArcGIS Pro as self standing software or
>     rather as
>     applications that use GDAL? They read VRTs pretty well but for
>     writing some
>     developer tools are required
>     https://pro.arcgis.com/en/pro-app/latest/help/data/imagery/supported-raster-dataset-file-formats.htm
>     <https://pro.arcgis.com/en/pro-app/latest/help/data/imagery/supported-raster-dataset-file-formats.htm>.
>
>     -Jukka Rahkonen-
>
>
>     GDAL - Dev mailing list wrote
>     > Maybe application/gdalvrt+xml? As far as I know, GDAL is the
>     only software
>     > that plays VRTs, and probably the only software that ever can,
>     considering
>     > the extensions and embedded Python stuff.
>     >
>
> -- 
> Sean Gillies
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210420/d4f413f4/attachment.html>

------------------------------

Subject: Digest Footer

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev


------------------------------

End of gdal-dev Digest, Vol 203, Issue 38
*****************************************

From sean at mapbox.com  Tue Apr 20 09:41:54 2021
From: sean at mapbox.com (Sean Gillies)
Date: Tue, 20 Apr 2021 10:41:54 -0600
Subject: [gdal-dev] Registered Content-Type for VRT?
In-Reply-To: <4f6c2f72-2b1e-180b-22d4-6375e45170ca@spatialys.com>
References: <B2089E9F-8685-433C-8929-8A384ADD6C17@hobu.co>
 <CADPhZXxyVS5ko0VRkbp-ZwWeWkJU5OcHcr4m9QN55UX1Ai_Q0A@mail.gmail.com>
 <1618869670093-0.post@n6.nabble.com>
 <CADPhZXyG820yCB+_yKVC166QczvPCoCKHjif3O=fGG1ARvDUpA@mail.gmail.com>
 <4f6c2f72-2b1e-180b-22d4-6375e45170ca@spatialys.com>
Message-ID: <CADPhZXwYN2Ejgy=5MN7zPGVKvtyAki+9PYGWw0s+Jj898W18qg@mail.gmail.com>

After re-reading https://tools.ietf.org/html/rfc6838, I remember that
"applications/gdalvrt+xml" would necessarily be a "standards tree" media
type and would need to be published in an RFC. The "vendor tree" is more
open. So something like "application/vnd.gdalvrt+xml" is more appropriate.
If you want this, Howard, you should fill out the form linked in RFC 6838.
It doesn't take long to get feedback and approval on vendor tree media
types.

On Tue, Apr 20, 2021 at 10:09 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> application/gdalvrt+xml would just mean what the organization that defines the format is. People could reimplement that from scratch
>
> Note that there is potentially the OGR VRT format (that could go as application/ogrvrt+xml), but that is a separate schema and likely less used than its raster counterpart.
>
> Le 20/04/2021 ? 18:04, Sean Gillies via gdal-dev a ?crit :
>
> Hi Jukka,
>
> It's possible that ArcGIS has independently implemented VRT, but I think
> it's more likely that it delegates to GDAL. I think it would be possible to
> craft a VRT doc that would reveal some details -- such as one that uses
> GDAL's embedded Python pixel functions to dump some system information --
> but I don't have access to ArcGIS to try it.
>
> On Mon, Apr 19, 2021 at 4:01 PM jratike80 <
> jukka.rahkonen at maanmittauslaitos.fi> wrote:
>
>> Hi,
>>
>> Do you count ArcMap or ArcGIS Pro as self standing software or rather as
>> applications that use GDAL? They read VRTs pretty well but for writing
>> some
>> developer tools are required
>>
>> https://pro.arcgis.com/en/pro-app/latest/help/data/imagery/supported-raster-dataset-file-formats.htm
>> .
>>
>> -Jukka Rahkonen-
>>
>>
>> GDAL - Dev mailing list wrote
>> > Maybe application/gdalvrt+xml? As far as I know, GDAL is the only
>> software
>> > that plays VRTs, and probably the only software that ever can,
>> considering
>> > the extensions and embedded Python stuff.
>> >
>
>
-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210420/6d2c0250/attachment-0001.html>

From schwehr at gmail.com  Tue Apr 20 10:33:10 2021
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 20 Apr 2021 10:33:10 -0700
Subject: [gdal-dev] Registered Content-Type for VRT?
In-Reply-To: <CADPhZXwYN2Ejgy=5MN7zPGVKvtyAki+9PYGWw0s+Jj898W18qg@mail.gmail.com>
References: <B2089E9F-8685-433C-8929-8A384ADD6C17@hobu.co>
 <CADPhZXxyVS5ko0VRkbp-ZwWeWkJU5OcHcr4m9QN55UX1Ai_Q0A@mail.gmail.com>
 <1618869670093-0.post@n6.nabble.com>
 <CADPhZXyG820yCB+_yKVC166QczvPCoCKHjif3O=fGG1ARvDUpA@mail.gmail.com>
 <4f6c2f72-2b1e-180b-22d4-6375e45170ca@spatialys.com>
 <CADPhZXwYN2Ejgy=5MN7zPGVKvtyAki+9PYGWw0s+Jj898W18qg@mail.gmail.com>
Message-ID: <CACmBxyvf4XKFAroHs0S1NjoQk57tV44pi_9QEsFkcQJ5GWvQkA@mail.gmail.com>

I was talking a bit with George Percivall back in November about MIME types
for Earth Engine w.r.t. STAC which is sorta similar.  He pointed me to
Panagiotis (Peter) A. Vretanos.  That chat wasn't public, but I can forward
to anyone interested.

And a similar discussion:

Link rel type for links to run an example script
https://github.com/radiantearth/stac-spec/issues/992

On Tue, Apr 20, 2021 at 9:42 AM Sean Gillies via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> After re-reading https://tools.ietf.org/html/rfc6838, I remember that
> "applications/gdalvrt+xml" would necessarily be a "standards tree" media
> type and would need to be published in an RFC. The "vendor tree" is more
> open. So something like "application/vnd.gdalvrt+xml" is more appropriate.
> If you want this, Howard, you should fill out the form linked in RFC 6838.
> It doesn't take long to get feedback and approval on vendor tree media
> types.
>
> On Tue, Apr 20, 2021 at 10:09 AM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> application/gdalvrt+xml would just mean what the organization that defines the format is. People could reimplement that from scratch
>>
>> Note that there is potentially the OGR VRT format (that could go as application/ogrvrt+xml), but that is a separate schema and likely less used than its raster counterpart.
>>
>> Le 20/04/2021 ? 18:04, Sean Gillies via gdal-dev a ?crit :
>>
>> Hi Jukka,
>>
>> It's possible that ArcGIS has independently implemented VRT, but I think
>> it's more likely that it delegates to GDAL. I think it would be possible to
>> craft a VRT doc that would reveal some details -- such as one that uses
>> GDAL's embedded Python pixel functions to dump some system information --
>> but I don't have access to ArcGIS to try it.
>>
>> On Mon, Apr 19, 2021 at 4:01 PM jratike80 <
>> jukka.rahkonen at maanmittauslaitos.fi> wrote:
>>
>>> Hi,
>>>
>>> Do you count ArcMap or ArcGIS Pro as self standing software or rather as
>>> applications that use GDAL? They read VRTs pretty well but for writing
>>> some
>>> developer tools are required
>>>
>>> https://pro.arcgis.com/en/pro-app/latest/help/data/imagery/supported-raster-dataset-file-formats.htm
>>> .
>>>
>>> -Jukka Rahkonen-
>>>
>>>
>>> GDAL - Dev mailing list wrote
>>> > Maybe application/gdalvrt+xml? As far as I know, GDAL is the only
>>> software
>>> > that plays VRTs, and probably the only software that ever can,
>>> considering
>>> > the extensions and embedded Python stuff.
>>> >
>>
>>
> --
> Sean Gillies
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210420/3d12c483/attachment.html>

From ni_hao88 at hotmail.com  Tue Apr 20 11:53:23 2021
From: ni_hao88 at hotmail.com (ni hao)
Date: Tue, 20 Apr 2021 18:53:23 +0000
Subject: [gdal-dev] Python create BigTIFF image
Message-ID: <DM5PR02MB38625D936B33DC37123A4CFDF1489@DM5PR02MB3862.namprd02.prod.outlook.com>

Hi list,

I use Python to create GeoTiff image, and I get the error because it exceeds 4GB.
ds = gdal.GetDriverByName('GTiff').Create(output_magnitude, xsize, ysize, 1, gdal.GDT_Float32)

   ERROR 1: TIFFReadDirectory:Failed to read directory at offset 4294957836
   ERROR 1: TIFFWriteDirectoryTagData:Maximum TIFF file size exceeded. Use BIGTIFF=YES creation option.

I need to turn on BIGTIFF=YES
https://gdal.org/drivers/raster/gtiff.html

But I don't do know how. I tried:
ds = gdal.GetDriverByName('GTiff').Create(output_magnitude, xsize, ysize, 1, gdal.GDT_Float32, BIGTIFF=YES)
but it didn't work.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210420/66682589/attachment.html>

From even.rouault at spatialys.com  Tue Apr 20 11:56:53 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 20 Apr 2021 20:56:53 +0200
Subject: [gdal-dev] Python create BigTIFF image
In-Reply-To: <DM5PR02MB38625D936B33DC37123A4CFDF1489@DM5PR02MB3862.namprd02.prod.outlook.com>
References: <DM5PR02MB38625D936B33DC37123A4CFDF1489@DM5PR02MB3862.namprd02.prod.outlook.com>
Message-ID: <8dc0e239-e3b6-300d-d4fe-e3296167585b@spatialys.com>


Le 20/04/2021 ? 20:53, ni hao a ?crit?:
> Hi list,
>
> I use?Python to create GeoTiff image, and I get the error because it 
> exceeds 4GB.
> ds = gdal.GetDriverByName('GTiff').Create(output_magnitude, xsize, 
> ysize, 1, gdal.GDT_Float32)
>
> ? ?ERROR 1: TIFFReadDirectory:Failed to read directory at offset 
> 4294957836
> ? ?ERROR 1: TIFFWriteDirectoryTagData:Maximum TIFF file size exceeded. 
> Use BIGTIFF=YES creation option.
>
> I need to turn on *BIGTIFF=YES*
> https://gdal.org/drivers/raster/gtiff.html 
> <https://gdal.org/drivers/raster/gtiff.html>
>
> But I don't do know how. I tried:
> ds = gdal.GetDriverByName('GTiff').Create(output_magnitude, xsize, 
> ysize, 1, gdal.GDT_Float32, BIGTIFF=YES)

ds = gdal.GetDriverByName('GTiff').Create(output_magnitude, xsize, 
ysize, 1, gdal.GDT_Float32, options=['BIGTIFF=YES'])

But as you didn't specify compression, it should have done that 
automatically. Can you indicate the exact values of xsize and ysize you 
use ?


> but it didn't work.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210420/28f0af49/attachment.html>

From ni_hao88 at hotmail.com  Tue Apr 20 12:37:24 2021
From: ni_hao88 at hotmail.com (ni hao)
Date: Tue, 20 Apr 2021 19:37:24 +0000
Subject: [gdal-dev] Python create BigTIFF image
In-Reply-To: <8dc0e239-e3b6-300d-d4fe-e3296167585b@spatialys.com>
References: <DM5PR02MB38625D936B33DC37123A4CFDF1489@DM5PR02MB3862.namprd02.prod.outlook.com>,
 <8dc0e239-e3b6-300d-d4fe-e3296167585b@spatialys.com>
Message-ID: <DM5PR02MB386258F2E9A856FC277BF1F0F1489@DM5PR02MB3862.namprd02.prod.outlook.com>

Even,

Thank you for your reply.
You are right: ds = gdal.GetDriverByName('GTiff').Create( ) is under 4GB.
It was the next command pushes GTiff over 4GB:
  ds.BuildOverviews('AVERAGE_MAGPHASE', [2,4,8,16])

Is there a way to specify BIGTIFF in ds.BuildOverviews() ?

________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: April 20, 2021 3:56 PM
To: ni hao <ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Python create BigTIFF image



Le 20/04/2021 ? 20:53, ni hao a ?crit :
Hi list,

I use Python to create GeoTiff image, and I get the error because it exceeds 4GB.
ds = gdal.GetDriverByName('GTiff').Create(output_magnitude, xsize, ysize, 1, gdal.GDT_Float32)

   ERROR 1: TIFFReadDirectory:Failed to read directory at offset 4294957836
   ERROR 1: TIFFWriteDirectoryTagData:Maximum TIFF file size exceeded. Use BIGTIFF=YES creation option.

I need to turn on BIGTIFF=YES
https://gdal.org/drivers/raster/gtiff.html

But I don't do know how. I tried:
ds = gdal.GetDriverByName('GTiff').Create(output_magnitude, xsize, ysize, 1, gdal.GDT_Float32, BIGTIFF=YES)

ds = gdal.GetDriverByName('GTiff').Create(output_magnitude, xsize, ysize, 1, gdal.GDT_Float32, options=['BIGTIFF=YES'])

But as you didn't specify compression, it should have done that automatically. Can you indicate the exact values of xsize and ysize you use ?


but it didn't work.




_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210420/128e743c/attachment.html>

From j1 at jimenezshaw.com  Tue Apr 20 12:41:44 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Tue, 20 Apr 2021 21:41:44 +0200
Subject: [gdal-dev] Python create BigTIFF image
In-Reply-To: <DM5PR02MB386258F2E9A856FC277BF1F0F1489@DM5PR02MB3862.namprd02.prod.outlook.com>
References: <DM5PR02MB38625D936B33DC37123A4CFDF1489@DM5PR02MB3862.namprd02.prod.outlook.com>
 <8dc0e239-e3b6-300d-d4fe-e3296167585b@spatialys.com>
 <DM5PR02MB386258F2E9A856FC277BF1F0F1489@DM5PR02MB3862.namprd02.prod.outlook.com>
Message-ID: <CADRrdKupxbd7_vLbXB8oSYNHh=N_ev8yVG25-q3k=Yhk3omOTQ@mail.gmail.com>

I don't think so. Bigtiff is a creation option, that defines the format of
the file.

ni hao <ni_hao88 at hotmail.com> schrieb am Di., 20. Apr. 2021, 21:37:

> Even,
>
> Thank you for your reply.
> You are right: ds = gdal.GetDriverByName('GTiff').Create( ) is under 4GB.
> It was the next command pushes GTiff over 4GB:
>   ds.BuildOverviews('AVERAGE_MAGPHASE', [2,4,8,16])
>
> Is there a way to specify BIGTIFF in ds.BuildOverviews() ?
>
> ------------------------------
> *From:* Even Rouault <even.rouault at spatialys.com>
> *Sent:* April 20, 2021 3:56 PM
> *To:* ni hao <ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org <
> gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] Python create BigTIFF image
>
>
>
> Le 20/04/2021 ? 20:53, ni hao a ?crit :
>
> Hi list,
>
> I use Python to create GeoTiff image, and I get the error because it
> exceeds 4GB.
> ds = gdal.GetDriverByName('GTiff').Create(output_magnitude, xsize, ysize,
> 1, gdal.GDT_Float32)
>
>    ERROR 1: TIFFReadDirectory:Failed to read directory at offset 4294957836
>    ERROR 1: TIFFWriteDirectoryTagData:Maximum TIFF file size exceeded. Use
> BIGTIFF=YES creation option.
>
> I need to turn on *BIGTIFF=YES*
> https://gdal.org/drivers/raster/gtiff.html
>
> But I don't do know how. I tried:
> ds = gdal.GetDriverByName('GTiff').Create(output_magnitude, xsize, ysize,
> 1, gdal.GDT_Float32, BIGTIFF=YES)
>
> ds = gdal.GetDriverByName('GTiff').Create(output_magnitude, xsize, ysize,
> 1, gdal.GDT_Float32, options=['BIGTIFF=YES'])
>
> But as you didn't specify compression, it should have done that
> automatically. Can you indicate the exact values of xsize and ysize you use
> ?
>
>
> but it didn't work.
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210420/1f38bb39/attachment.html>

From even.rouault at spatialys.com  Tue Apr 20 13:03:30 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 20 Apr 2021 22:03:30 +0200
Subject: [gdal-dev] Python create BigTIFF image
In-Reply-To: <DM5PR02MB386258F2E9A856FC277BF1F0F1489@DM5PR02MB3862.namprd02.prod.outlook.com>
References: <DM5PR02MB38625D936B33DC37123A4CFDF1489@DM5PR02MB3862.namprd02.prod.outlook.com>
 <8dc0e239-e3b6-300d-d4fe-e3296167585b@spatialys.com>
 <DM5PR02MB386258F2E9A856FC277BF1F0F1489@DM5PR02MB3862.namprd02.prod.outlook.com>
Message-ID: <2a44db21-40a3-8cf6-91f5-2c00539b8a8c@spatialys.com>

Ah ok that explains it then. The heuristics in the Create() method only 
takes into account the full resolution image, not potential overviews 
you might add. So you have to go with the explict option = 
['BIGTIFF=YES'] argument I suggested


Le 20/04/2021 ? 21:37, ni hao a ?crit?:
> Even,
>
> Thank you?for your reply.
> You are right:?ds = gdal.GetDriverByName('GTiff').Create( ) is under 4GB.
> It was the next command pushes GTiff over 4GB:
> ? ds.BuildOverviews('AVERAGE_MAGPHASE', [2,4,8,16])
>
> Is there a way to specify BIGTIFF in ds.BuildOverviews() ?
>
> ------------------------------------------------------------------------
> *From:* Even Rouault <even.rouault at spatialys.com>
> *Sent:* April 20, 2021 3:56 PM
> *To:* ni hao <ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org 
> <gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] Python create BigTIFF image
>
>
> Le 20/04/2021 ? 20:53, ni hao a ?crit?:
>> Hi list,
>>
>> I use?Python to create GeoTiff image, and I get the error because it 
>> exceeds 4GB.
>> ds = gdal.GetDriverByName('GTiff').Create(output_magnitude, xsize, 
>> ysize, 1, gdal.GDT_Float32)
>>
>> ? ?ERROR 1: TIFFReadDirectory:Failed to read directory at offset 
>> 4294957836
>> ? ?ERROR 1: TIFFWriteDirectoryTagData:Maximum TIFF file size 
>> exceeded. Use BIGTIFF=YES creation option.
>>
>> I need to turn on *BIGTIFF=YES*
>> https://gdal.org/drivers/raster/gtiff.html 
>> <https://gdal.org/drivers/raster/gtiff.html>
>>
>> But I don't do know how. I tried:
>> ds = gdal.GetDriverByName('GTiff').Create(output_magnitude, xsize, 
>> ysize, 1, gdal.GDT_Float32, BIGTIFF=YES)
>
> ds = gdal.GetDriverByName('GTiff').Create(output_magnitude, xsize, 
> ysize, 1, gdal.GDT_Float32, options=['BIGTIFF=YES'])
>
> But as you didn't specify compression, it should have done that 
> automatically. Can you indicate the exact values of xsize and ysize 
> you use ?
>
>
>> but it didn't work.
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev  <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
> -- 
> http://www.spatialys.com  <http://www.spatialys.com>
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210420/6e0c5a75/attachment-0001.html>

From ni_hao88 at hotmail.com  Tue Apr 20 13:10:01 2021
From: ni_hao88 at hotmail.com (ni hao)
Date: Tue, 20 Apr 2021 20:10:01 +0000
Subject: [gdal-dev] Python create BigTIFF image
In-Reply-To: <2a44db21-40a3-8cf6-91f5-2c00539b8a8c@spatialys.com>
References: <DM5PR02MB38625D936B33DC37123A4CFDF1489@DM5PR02MB3862.namprd02.prod.outlook.com>
 <8dc0e239-e3b6-300d-d4fe-e3296167585b@spatialys.com>
 <DM5PR02MB386258F2E9A856FC277BF1F0F1489@DM5PR02MB3862.namprd02.prod.outlook.com>,
 <2a44db21-40a3-8cf6-91f5-2c00539b8a8c@spatialys.com>
Message-ID: <DM5PR02MB38629085F5EB3486CEF10FF5F1489@DM5PR02MB3862.namprd02.prod.outlook.com>

Thank you Even and Javier for your help.
GDAL list is great!!



________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: April 20, 2021 5:03 PM
To: ni hao <ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Python create BigTIFF image


Ah ok that explains it then. The heuristics in the Create() method only takes into account the full resolution image, not potential overviews you might add. So you have to go with the explict option = ['BIGTIFF=YES'] argument I suggested


Le 20/04/2021 ? 21:37, ni hao a ?crit :
Even,

Thank you for your reply.
You are right: ds = gdal.GetDriverByName('GTiff').Create( ) is under 4GB.
It was the next command pushes GTiff over 4GB:
  ds.BuildOverviews('AVERAGE_MAGPHASE', [2,4,8,16])

Is there a way to specify BIGTIFF in ds.BuildOverviews() ?

________________________________
From: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>
Sent: April 20, 2021 3:56 PM
To: ni hao <ni_hao88 at hotmail.com><mailto:ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org> <gdal-dev at lists.osgeo.org><mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Python create BigTIFF image



Le 20/04/2021 ? 20:53, ni hao a ?crit :
Hi list,

I use Python to create GeoTiff image, and I get the error because it exceeds 4GB.
ds = gdal.GetDriverByName('GTiff').Create(output_magnitude, xsize, ysize, 1, gdal.GDT_Float32)

   ERROR 1: TIFFReadDirectory:Failed to read directory at offset 4294957836
   ERROR 1: TIFFWriteDirectoryTagData:Maximum TIFF file size exceeded. Use BIGTIFF=YES creation option.

I need to turn on BIGTIFF=YES
https://gdal.org/drivers/raster/gtiff.html

But I don't do know how. I tried:
ds = gdal.GetDriverByName('GTiff').Create(output_magnitude, xsize, ysize, 1, gdal.GDT_Float32, BIGTIFF=YES)

ds = gdal.GetDriverByName('GTiff').Create(output_magnitude, xsize, ysize, 1, gdal.GDT_Float32, options=['BIGTIFF=YES'])

But as you didn't specify compression, it should have done that automatically. Can you indicate the exact values of xsize and ysize you use ?


but it didn't work.




_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.

--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210420/bf4457b5/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Apr 20 13:38:35 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Tue, 20 Apr 2021 13:38:35 -0700 (MST)
Subject: [gdal-dev] gdal-dev Digest, Vol 203, Issue 38
In-Reply-To: <AS8P192MB13830EAE1FDFCD76900E196BBB489@AS8P192MB1383.EURP192.PROD.OUTLOOK.COM>
References: <AS8P192MB13830EAE1FDFCD76900E196BBB489@AS8P192MB1383.EURP192.PROD.OUTLOOK.COM>
Message-ID: <1618951115939-0.post@n6.nabble.com>

Hi,

The reason is that by the GetCapabilities and DescribeCoverage requests GDAL
is unable to create GetCoverage request that works. There may be a bug in
GDAL, or missing special handling that the combination of WCS 1.0.x or 1.1.x
+ MapServer would require. Different WCS versions are handled by different
code as you can see from the contents of
https://github.com/OSGeo/gdal/tree/master/gdal/frmts/wcs with version
specific "wcsdataset..." files.

Unfortunately it is not very easy to analyze what goes wrong. I myself have
not touched WCS versions 1.0.x and 1.1.x for some years. MapServer as a WCS
server is also rather uncommon and it is easy to configure it wrong with the
handwritten mapfiles. There seem to be some special rules for MapServer in
the wcs driver code but I know that the author who improved the driver a lot
was testing it more with GeoServer.

I suggest still to contact the service provider and ask if they could try to
correct the configuration of their MapServer for WCS 2.0.1. That is also the
version that can be used for INSPIRE download services.

-Jukka Rahkonen-



Elena Ruiz wrote
> Hello and thank you very much for your answer, I understand what you are
> telling me, but this happens with version 2.0.1, if you try with the
> version 1.0.0 and with the layer "Model% 20Digital% 20de% 20Elevaciones%
> 20 (MDE)% 20de% 20Andalucia% 2010% 20m" the server returns a response and
> in fact, if all the parameters are completed, it returns an image. Why
> doesn't gdal work with WCS version 1.0.0 either?
> 
> Example:
> http://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&COVERAGE=Modelo%20Digital%20de%20Elevaciones%20(MDE)%20de%20Andalucia%2010%20m&CRS=EPSG:25830&FORMAT=GTiff&BBOX=531006.299122,4100120.659408,544263.630224,4112381.66471&WIDTH=1325&HEIGHT=1226&OUTPUTCRS=C:\Users\elena\AppData\Local\Temp\imagen.tif
> 
> Regards





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jeannie_may at trimble.com  Tue Apr 20 22:03:28 2021
From: jeannie_may at trimble.com (Jeannie May)
Date: Wed, 21 Apr 2021 17:03:28 +1200
Subject: [gdal-dev] gdal.open fails from C#
Message-ID: <CAC25Q6sEzoTT5YacXmrTn5E_pH-Xk7Vq=iyz7VjVP4oZiTrLhw@mail.gmail.com>

We're unable to get this working from our c# code on the EC2 instance. It
appears to be an issue related to c# and curl. Attached is a sample c# and
log:

The open works fine from our container using bash, but not python. It's a
real mixed bag. BTW Its linux and using an IAM role.






-- 
*Jeannie May*
Senior Software Engineer
11 Birmingham Drive, Christchurch | 963 5305 Office
www.trimble.com

Connect with us!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210421/f29e3b8f/attachment-0001.html>
-------------- next part --------------
using System;
using OSGeo.GDAL;
using MaxRev.Gdal.Core;

namespace root
{
    class Program
    {
        static void Main(string[] args)
        {
			GdalBase.ConfigureAll();
			Gdal.AllRegister();
			Gdal.SetConfigOption("CPL_DEBUG","ON");
			Gdal.SetConfigOption("CPL_CURL_VERBOSE","ON");
			Gdal.SetConfigOption("GDAL_HTTP_TIMEOUT","30");
			Gdal.SetConfigOption("AWS_REGION","us-west-2");
			Gdal.SetConfigOption("AWS_HTTPS","NO");
			var path = "/vsis3/s3-pdxa-rpd-trex-designfiles/projectSvcIntegrationTests/637540489051794065_SmallGeotiff300kb.tif";
			var opts = new GDALInfoOptions(new[] { "-json" });
			var dataset = Gdal.Open(path, Access.GA_ReadOnly);
			var metadataJson = Gdal.GDALInfo(dataset, opts);
			Console.WriteLine(metadataJson);

        }
    }
}
-------------- next part --------------
A non-text attachment was scrubbed...
Name: output.log
Type: application/octet-stream
Size: 4702 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210421/f29e3b8f/attachment-0001.obj>

From pepanpeter at gmail.com  Wed Apr 21 01:14:30 2021
From: pepanpeter at gmail.com (Peter P)
Date: Wed, 21 Apr 2021 01:14:30 -0700 (MST)
Subject: [gdal-dev] GDAL question
In-Reply-To: <1618932348826-0.post@n6.nabble.com>
References: <CAFY+pqnHtXUBMXEK9p+-QG3qoyF6fWUxJrfpJvO-fos9L3qsxw@mail.gmail.com>
 <1618932348826-0.post@n6.nabble.com>
Message-ID: <1618992870247-0.post@n6.nabble.com>

PostgreSQL "table1" columns:
Name Data Type
Id integer
Name text
TestGeometry geometry

Example geojson - this will be one row in table:
jsonVariable = {"type": "FeatureCollection", "Name": "testName", "features":
[{"type": "Feature", "geometry": {"type": "Polygon", "coordinates":
[[[26.54296875,64.73664139557683],[26.630859375,63.6267446447533],[29.091796875,63.97596090918338],[26.54296875,64.73664139557683]]]}}]}

Example python
ogr2ogr.main(["", "-f", "PostgreSQL", "-s_srs", "+proj=longlat +datum=WGS84
+no_defs", "-t_srs", "EPSG:3857", "PG:dbname='test' host='127.0.0.1'
port='5432' user='user1' password='password1'", "-nln", "table1", "-append",
json.dumps(jsonVariable)])




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From ari.jolma at gmail.com  Wed Apr 21 02:26:04 2021
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 21 Apr 2021 12:26:04 +0300
Subject: [gdal-dev] gdal-dev Digest, Vol 203, Issue 38
In-Reply-To: <AS8P192MB13830EAE1FDFCD76900E196BBB489@AS8P192MB1383.EURP192.PROD.OUTLOOK.COM>
References: <mailman.37729.1618934988.26371.gdal-dev@lists.osgeo.org>
 <3d652b5c-aa92-4a2a-85be-25316f1f7b0b.ba94d704-e79f-4907-b4e6-7c540f2b307c.63120239-568f-4b44-8ff0-4b6b5a07a81b@emailsignatures365.codetwo.com>
 <AS8P192MB13830EAE1FDFCD76900E196BBB489@AS8P192MB1383.EURP192.PROD.OUTLOOK.COM>
Message-ID: <69547b85-25fa-67ca-2034-b8d6ba61e5c3@gmail.com>

Elena,

It seems that the 2 x 2 image which GDAL first fetches to get 
information about the data (BBOX=101082,4289059,101102,4289079) triggers 
an error on the server. I don't know at this point if that is an error 
on the server side (wrong extent) or on the client side (gdal).

Best regards,

Ari

Elena Ruiz kirjoitti 20.4.2021 klo 19.25:
>
> Hello and thank you very much for your answer, I understand what you are telling me, but this happens with version 2.0.1, if you try with the version 1.0.0 and with the layer "Model% 20Digital% 20de% 20Elevaciones% 20 (MDE)% 20de% 20Andalucia% 2010% 20m" the server returns a response and in fact, if all the parameters are completed, it returns an image. Why doesn't gdal work with WCS version 1.0.0 either?
>
> Example:
> http://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&COVERAGE=Modelo%20Digital%20de%20Elevaciones%20(MDE)%20de%20Andalucia%2010%20m&CRS=EPSG:25830&FORMAT=GTiff&BBOX=531006.299122,4100120.659408,544263.630224,4112381.66471&WIDTH=1325&HEIGHT=1226&OUTPUTCRS=C:\Users\elena\AppData\Local\Temp\imagen.tif
>
> Regards
>
> ------------------------------
>
> Message: 3
> Date: Tue, 20 Apr 2021 08:52:49 -0700 (MST)
> From: jratike80 <jukka.rahkonen at maanmittauslaitos.fi>
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] WCS server error. Coverage not found
> Message-ID: <1618933969087-0.post at n6.nabble.com>
> Content-Type: text/plain; charset=UTF-8
>
> Hi Elena,
>
> Check the service with direct http calls from the browser:
> 1) The capabilities
> https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?SERVICE=WCS&version=2.0.1&request=GetCapabilities
> Result: OK
>
> 2) Describe one coverage
> https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?SERVICE=WCS&version=2.0.1&request=DescribeCoverage&coverageID=mdt_10
> Result: OK
>
> 3) Try to get the coverage
> https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?SERVICE=WCS&version=2.0.1&request=GetCoverage&coverageID=mdt_10
>
> Result:
> <ows:Exception exceptionCode="NoSuchCoverage" locator="coverageid">
> <ows:ExceptionText>msWCSGetCoverage20(): WCS server error. COVERAGEID=mdt_10
> not found, not in supported layer list. A layer might be disabled for this
> request. Check wcs/ows_enable_request settings.</ows:ExceptionText>
> </ows:Exception>
>
> The server just does not send data with GetCoverage. Ask the service
> provider if that is intentional.
>
> The error message gives a hint. Service seems to be running on MapServer and
> now it is not configured to support GetCoverage request. If service probider
> wants to support it their should edit their mapfile where the
> "wcs_enable_request" metadata item is set. Of course there are other ways to
> misconfigure the server.
>
>
> -Jukka Rahkonen-
>
>
>
> Elena Ruiz wrote
>> Hello I am testing the WCS service but I have a error that I don?t
>> understand.
>>
>> If I put in a web server this:
>>
>> http://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&COVERAGE=
>> Modelo%20Digital%20de%20Elevaciones%20(MDE)%20de%20Andalucia%2010%20m&CRS=EPSG:25830&FORMAT=GTiff&BBOX=531006.299122,4100120.659408,544263.630224,4112381.66471&WIDTH=1325&HEIGHT=1226&OUTPUTCRS=C:\Users\elena\AppData\Local\Temp\imagen.tif
>>
>> this works ok and download a TIFF image.
>>
>> But if I try to do this in gdal:
>>
>>> gdal_translate -oo CACHE=wcs_cache -oo CLEAR_CACHE -oo INTERLEAVE=PIXEL
> -projwin 531006.299122 4100120.659408 544263.630224 4112381.66471 -outsize
> 1325 1226
> "WCS:http://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?VERSION=1.0.0&COVERAGE=Modelo%20Digital%20de%20Elevaciones%20(MDE)%20de%20Andalucia%2010%20m"
> "C:\Users\elena\AppData\Local\Temp\imagen.tif"
>> The result is:
>>
>> ERROR 1: msWCSGetCoverage(): WCS server error.
>> COVERAGE=Modelo%20Digital%20de%20Elevaciones%20(MDE)%20de%20Andalucia%2010%20m
>> not found, not in supported layer list. A layer might be disabled for this
>> request. Check wcs/ows_enable_request settings.
>>
>> I have tried with other version of service WCS, version 1.1.2 and 2.0.1,
>> the difference is the name of layer, in this cases is ?mdt_10?, but the
>> result in gdal is the same.
>>
>>> gdalinfo
> "WCS:https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?version=2.0.1"
>> Driver: WCS/OGC Web Coverage Service
>> Files: C:\Users\elena\.gdal\wcs_cache\Zatax.aux.xml
>> Size is 512, 512
>> Origin = (0.000000000000000,0.000000000000000)
>> Pixel Size = (1.000000000000000,1.000000000000000)
>> Metadata:
>>   
>> WCS_GLOBAL#crsSupported=http://www.opengis.net/def/crs/EPSG/0/3042,EPSG:3042
>>    WCS_GLOBAL#formatSupported=image/png,image/jpeg
>>    WCS_GLOBAL#InterpolationSupported=NEAREST,AVERAGE,BILINEAR
>>    WCS_GLOBAL#Keywords=WCS,MDT
>>   
>> WCS_GLOBAL#Profiles=WCS/2.0/conf/core,WCS_protocol-binding_get-kvp/1.0/conf/get-kvp,WCS_protocol-binding_post-xml/1.0/conf/post-xml,GMLCOV/1.0/conf/gml-coverage,GMLCOV/1.0/conf/multipart,GMLCOV/1.0/conf/special-format,GMLCOV_geotiff-coverages/1.0/conf/geotiff-coverage,WCS_service-extension_crs/1.0/conf/crs,WCS_service-extension_scaling/1.0/conf/scaling,WCS_service-extension_range-subsetting/1.0/conf/record-subsetting,WCS_service-extension_interpolation/1.0/conf/interpolation
>>    WCS_GLOBAL#ServiceIdentification.Abstract=Nodo de la Red de Informacion
>> Ambiental de Andalucia. Junta de Andalucia. Servicio WCS del Modelo
>> Digital de Elevaciones (MDE) de Andalucia de 10 m de resolucion generado a
>> partir de los vuelos realizados en 2010 (cuadrantes Sureste (SE) Suroeste
>> (SW)) y 2011 (cuadrantes Noreste (NE) y Noroeste (NW)). Tambien se muestra
>> el Modelo Digital de Elevaciones de Andalucia de 100 m generado a partir
>> de MDE por cuadrantes (resolucion 10x10 y 5x5m) remuestreados procedentes
>> de los proyectos de produccion de Ortofotos regionales de Andalucia y del
>> PNOA. Integrado en la Infraestructura de Datos Espaciales de Andalucia,
>> siguiendo las directrices del Sistema Cartografico de Andalucia.
>>    WCS_GLOBAL#ServiceIdentification.AccessConstraints=Este servicio se
>> puede usar de modo libre y gratuito siempre que se mencione a los autores
>> y propietarios de la informacion
>>    WCS_GLOBAL#ServiceIdentification.Fees=Gratuito
>>    WCS_GLOBAL#ServiceIdentification.Title=REDIAM. WCS Modelo Digital de
>> Elevaciones (MDE) de Andalucia
>>    WCS_GLOBAL#ServiceProvider.ProviderName=Consejer??a de Agricultura,
>> Ganader??a, Pesca y Desarrollo Sostenible. Junta de Andaluc??a
>>   
>> WCS_GLOBAL#ServiceProvider.ProviderSite=https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt
>>   
>> WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Address.AdministrativeArea=Sevilla
>>   
>> WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Address.City=Sevilla
>>   
>> WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Address.Country=Spain
>>   
>> WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Address.DeliveryPoint=Avda.
>> Manuel Siurot,50
>>   
>> WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Address.PostalCode=41071
>>   
>> WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.ContactInstructions=--
>>    WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.HoursOfService=--
>>    WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Phone.Facsimile=--
>>   
>> WCS_GLOBAL#ServiceProvider.ServiceContact.ContactInfo.Phone.Voice=+34955003400
>>    WCS_GLOBAL#ServiceProvider.ServiceContact.IndividualName=--
>>    WCS_GLOBAL#ServiceProvider.ServiceContact.PositionName=Servicio de
>> Informacion y Analisis Ambiental
>>    WCS_GLOBAL#ServiceProvider.ServiceContact.Role=--
>>    WCS_GLOBAL#version=2.0.1
>> Subdatasets:
>>   
>> SUBDATASET_1_NAME=WCS:https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?version=2.0.1&coverage=mdt_10
>>    SUBDATASET_1_DESC=mdt_10
>>   
>> SUBDATASET_2_NAME=WCS:https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?version=2.0.1&coverage=mdt_100
>>    SUBDATASET_2_DESC=mdt_100
>> Corner Coordinates:
>> Upper Left  (   0.0000000,   0.0000000)
>> Lower Left  (       0.000,     512.000)
>> Upper Right (     512.000,       0.000)
>> Lower Right (     512.000,     512.000)
>> Center      (     256.000,     256.000)
>>
>>> gdalinfo
> "WCS:https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?version=2.0.1&coverage=mdt_10"
>> ERROR 1: HTTP error code : 404
>> ERROR 1: NoSuchCoverage: msWCSGetCoverage20(): WCS server error.
>> COVERAGEID=mdt_10 not found, not in supported layer list. A layer might be
>> disabled for this request. Check wcs/ows_enable_request settings.
>> gdalinfo failed - unable to open
>> 'WCS:https://www.juntadeandalucia.es/medioambiente/mapwms/REDIAM_WCS_mdt?version=2.0.1&coverage=mdt_10'.
>>
>> Can anyone help me? Thank you very much and regards
>> ________________________________
>>
>> [https://www.aplitop.com/descargas/firma1.jpg]
>>
>>
>> Elena Ruiz
>> Sofware Development & Technical Support
>> Tel. +34 952 43 97 71
>> eruiz@
>> Sumatra, 9 - 29190 Malaga (Spain)
>> www.aplitop.com
>>
>> [cid:SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png]&lt;https://www.facebook.com/AplitopSL/&gt;
>> [cid:SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png]
>> &lt;https://twitter.com/aplitop&gt;
>> [cid:SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png]
>> &lt;https://www.linkedin.com/company/aplitop&gt;
>> [cid:SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png]
>> &lt;https://www.youtube.com/user/aplitop&gt;
>>
>>
>> In accordance with the provisions of the European Regulation of Data
>> Protection 2016/679 (Reglamento Europeo de Proteccion de Datos 2016/679),
>> we inform you that the data and the information you provide us through
>> this medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with
>> address at C / Sumatra, 9, Malaga, 29190, in order to answer your
>> questions and inform you about our products. The data provided will be
>> kept as long as it does not request its cessation and will not be
>> transferred to third parties except in cases where there is a legal
>> obligation. You have the right to access your personal data, correct
>> inaccurate data or request its deletion when the data is no longer
>> necessary for the purposes that were collected, as well as any rights
>> recognized in the RGPD 2016/679
>>
>> &lt;https://www.aplitop.com/Event/en/358/intergeo-2019&gt;
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at .osgeo
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>> SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png (502
>> bytes)
>> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5485329/0/SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png&gt;
>> SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png (850
>> bytes)
>> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5485329/1/SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png&gt;
>> SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png (642
>> bytes)
>> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5485329/2/SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png&gt;
>> SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png (1K)
>> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5485329/3/SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png&gt;
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
>
>
> ------------------------------
>
> Message: 4
> Date: Tue, 20 Apr 2021 10:04:44 -0600
> From: Sean Gillies <sean at mapbox.com>
> To: gdal dev <gdal-dev at lists.osgeo.org>
> Subject: Re: [gdal-dev] Registered Content-Type for VRT?
> Message-ID:
> 	<CADPhZXyG820yCB+_yKVC166QczvPCoCKHjif3O=fGG1ARvDUpA at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Hi Jukka,
>
> It's possible that ArcGIS has independently implemented VRT, but I think
> it's more likely that it delegates to GDAL. I think it would be possible to
> craft a VRT doc that would reveal some details -- such as one that uses
> GDAL's embedded Python pixel functions to dump some system information --
> but I don't have access to ArcGIS to try it.
>
> On Mon, Apr 19, 2021 at 4:01 PM jratike80 <
> jukka.rahkonen at maanmittauslaitos.fi> wrote:
>
>> Hi,
>>
>> Do you count ArcMap or ArcGIS Pro as self standing software or rather as
>> applications that use GDAL? They read VRTs pretty well but for writing some
>> developer tools are required
>>
>> https://pro.arcgis.com/en/pro-app/latest/help/data/imagery/supported-raster-dataset-file-formats.htm
>> .
>>
>> -Jukka Rahkonen-
>>
>>
>> GDAL - Dev mailing list wrote
>>> Maybe application/gdalvrt+xml? As far as I know, GDAL is the only
>> software
>>> that plays VRTs, and probably the only software that ever can,
>> considering
>>> the extensions and embedded Python stuff.
>>>

From pepanpeter at gmail.com  Wed Apr 21 02:33:19 2021
From: pepanpeter at gmail.com (Peter P)
Date: Wed, 21 Apr 2021 02:33:19 -0700 (MST)
Subject: [gdal-dev] GDAL question
In-Reply-To: <1618932348826-0.post@n6.nabble.com>
References: <CAFY+pqnHtXUBMXEK9p+-QG3qoyF6fWUxJrfpJvO-fos9L3qsxw@mail.gmail.com>
 <1618932348826-0.post@n6.nabble.com>
Message-ID: <1618997599910-0.post@n6.nabble.com>

PostgreSQL "table1" columns:
Name Data Type
Id integer
Name text
TestGeometry geometry

Example geojson - this will be one row in table:
jsonVariable = {"type": "FeatureCollection", "Name": "testName", "features":
[{"type": "Feature", "geometry": {"type": "Polygon", "coordinates":
[[[26.54296875,64.73664139557683],[26.630859375,63.6267446447533],[29.091796875,63.97596090918338],[26.54296875,64.73664139557683]]]}}]}

Example python
ogr2ogr.main(["", "-f", "PostgreSQL", "-s_srs", "+proj=longlat +datum=WGS84
+no_defs", "-t_srs", "EPSG:3857", "PG:dbname='test' host='127.0.0.1'
port='5432' user='user1' password='password1'", "-nln", "table1", "-append",
json.dumps(jsonVariable)])


jratike80 wrote
> Hi,
> 
> Ogr2ogr by default converts all the columns so you should not need to do
> anything. Test first ogr2ogr from the command line without mixing Python
> into the soup. If you still do not get your "name" attribute converted you
> may have something special in your data, like a few first features in the
> GeoJSON missing the name attribute.
> 
> Do you really mean "wkt_geometry" or is it possibly "wkb_geometry"?
> 
> If you will still have troubles please share some test data.
> 
> -Jukka Rahkonen- 
> 
> 
> 
> Peter P wrote
>> Hello
>> 
>> I use GDAL(https://github.com/OSGeo/gdal) with python bindings. I am
>> importing GeoJSON to PostgreSQL (PostGIS). I know how to import only
>> geometry to the table. I dont know how to import geometry with others
>> columns to one table. I need to import geometry to "wkt_geometry" column
>> and his name to "name" column.
>> Can you help me please?
>> 
>> Here is how I import only geometry column:
>> * ogr2ogr.main(["", "-f", "PostgreSQL", "-s_srs", * *"+proj=longlat
>> +datum=WGS84 +no_defs", "-t_srs", "EPSG:3857", "PG:dbname='test'
>> host='127.0.0.1' port='5432' user='user1' password='password1'", "-nln",
>> "table1"])*
>> 
>> Thanks
>> 
>> Best Regards
>> Peter
>> 
>> _______________________________________________
>> gdal-dev mailing list
> 
>> gdal-dev at .osgeo
> 
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From pepanpeter at gmail.com  Wed Apr 21 02:38:15 2021
From: pepanpeter at gmail.com (Peter P)
Date: Wed, 21 Apr 2021 11:38:15 +0200
Subject: [gdal-dev] gdal-dev Digest, Vol 203, Issue 38
In-Reply-To: <mailman.37729.1618934988.26371.gdal-dev@lists.osgeo.org>
References: <mailman.37729.1618934988.26371.gdal-dev@lists.osgeo.org>
Message-ID: <CAFY+pqmhUYmK9tY0Jm6xpQZBrcF-Uk2TcCY+TTe=dBnSx1179A@mail.gmail.com>

>
>
> Send gdal-dev mailing list submissions to
>         gdal-dev at lists.osgeo.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         https://lists.osgeo.org/mailman/listinfo/gdal-dev
> or, via email, send a message with subject or body 'help' to
>         gdal-dev-request at lists.osgeo.org
>
> You can reach the person managing the list at
>         gdal-dev-owner at lists.osgeo.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of gdal-dev digest..."
>
>
> Today's Topics:
>
>    1. Re: GDAL question (Peter P)
>
> ----------------------------------------------------------------------
>
> Message: 1
>

PostgreSQL "table1" columns:
Name Data Type
Id integer
Name text
TestGeometry geometry

Example geojson - this will be one row in table:
jsonVariable = {"type": "FeatureCollection", "Name": "testName",
"features": [{"type": "Feature", "geometry": {"type": "Polygon",
"coordinates":
[[[26.54296875,64.73664139557683],[26.630859375,63.6267446447533],[29.091796875,63.97596090918338],[26.54296875,64.73664139557683]]]}}]}

Example python
ogr2ogr.main(["", "-f", "PostgreSQL", "-s_srs", "+proj=longlat +datum=WGS84
+no_defs", "-t_srs", "EPSG:3857", "PG:dbname='test' host='127.0.0.1'
port='5432' user='user1' password='password1'", "-nln", "table1",
"-append", json.dumps(jsonVariable)])


> <quote author="jratike80">
> Hi,
>
> Ogr2ogr by default converts all the columns so you should not need to do
> anything. Test first ogr2ogr from the command line without mixing Python
> into the soup. If you still do not get your "name" attribute converted you
> may have something special in your data, like a few first features in the
> GeoJSON missing the name attribute.
>
> Do you really mean "wkt_geometry" or is it possibly "wkb_geometry"?
>
> If you will still have troubles please share some test data.
>
> -Jukka Rahkonen-
>
>
>
> Peter P wrote
> > Hello
> >
> > I use GDAL(https://github.com/OSGeo/gdal) with python bindings. I am
> > importing GeoJSON to PostgreSQL (PostGIS). I know how to import only
> > geometry to the table. I dont know how to import geometry with others
> > columns to one table. I need to import geometry to "wkt_geometry" column
> > and his name to "name" column.
> > Can you help me please?
> >
> > Here is how I import only geometry column:
> > * ogr2ogr.main(["", "-f", "PostgreSQL", "-s_srs", * *"+proj=longlat
> > +datum=WGS84 +no_defs", "-t_srs", "EPSG:3857", "PG:dbname='test'
> > host='127.0.0.1' port='5432' user='user1' password='password1'", "-nln",
> > "table1"])*
> >
> > Thanks
> >
> > Best Regards
> > Peter
> >
> > _______________________________________________
> > gdal-dev mailing list
>
> > gdal-dev at .osgeo
>
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> <email>gdal-dev at .osgeo</email>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> </quote>
>
> End of gdal-dev Digest, Vol 203, Issue 38
> *****************************************
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210421/ea8b1889/attachment-0001.html>

From runette at gmail.com  Wed Apr 21 02:58:52 2021
From: runette at gmail.com (Paul Harwood)
Date: Wed, 21 Apr 2021 10:58:52 +0100
Subject: [gdal-dev] gdal.open fails from C#
In-Reply-To: <CAC25Q6sEzoTT5YacXmrTn5E_pH-Xk7Vq=iyz7VjVP4oZiTrLhw@mail.gmail.com>
References: <CAC25Q6sEzoTT5YacXmrTn5E_pH-Xk7Vq=iyz7VjVP4oZiTrLhw@mail.gmail.com>
Message-ID: <CAE8nN5MfeEgSV_R_aKpmLbb=CiupoGjeREG0KkwTC6tW3Q3zbw@mail.gmail.com>

If I parse your email correctly:

- You CAN open that uri in the gdalinfo bash command
- you CANNOT open it in Python
- You CANNOT open it in c#

Is this correct?

That, together with your trace that suggests that the C# bindings (and
therefore presumably also the Python bindings) are doing their job and GDAL
is opening the correct URI - and getting the first 16k chunk back - but
there is a timeout.

have you tried increasing the 16k chunk size to see if that is related to
the problem - I think that is this :

Partial downloads (requires the HTTP server to support random reading)
are done with a 16 KB granularity by default. Starting with GDAL 2.3,
the chunk size can be configured with the CPL_VSIL_CURL_CHUNK_SIZE
configuration option, with a value in bytes. If the driver detects
sequential reading it will progressively increase the chunk size up to
2 MB to improve download performance. Starting with GDAL 2.3, the
GDAL_INGESTED_BYTES_AT_OPEN configuration option can be set to impose
the number of bytes read in one GET call at file opening (can help
performance to read Cloud optimized geotiff with a large header).
>
>
from https://gdal.org/user/virtual_file_systems.html

I would ask the wider community if the GDAL_HTTP_TIMEOUT option is real and
current - it is only mentioned in the older documentation and not the
current documentation.

On Wed, 21 Apr 2021 at 06:04, Jeannie May <jeannie_may at trimble.com> wrote:

> We're unable to get this working from our c# code on the EC2 instance. It
> appears to be an issue related to c# and curl. Attached is a sample c# and
> log:
>
> The open works fine from our container using bash, but not python. It's a
> real mixed bag. BTW Its linux and using an IAM role.
>
>
>
>
>
>
> --
> *Jeannie May*
> Senior Software Engineer
> 11 Birmingham Drive, Christchurch | 963 5305 Office
> www.trimble.com
>
> Connect with us!
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210421/ed0e4cc9/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Apr 21 03:33:20 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 21 Apr 2021 03:33:20 -0700 (MST)
Subject: [gdal-dev] GDAL question
In-Reply-To: <1618997599910-0.post@n6.nabble.com>
References: <CAFY+pqnHtXUBMXEK9p+-QG3qoyF6fWUxJrfpJvO-fos9L3qsxw@mail.gmail.com>
 <1618932348826-0.post@n6.nabble.com> <1618997599910-0.post@n6.nabble.com>
Message-ID: <1619001200374-0.post@n6.nabble.com>

Hi,

Please check your GeoJSON before fighting with Python. "Name" placed into
here
 {"type": "FeatureCollection", "Name": "testName",

will probably be just skipped. If you used lower case "name"
{"type": "FeatureCollection", "name": "testName",

then "testName would be used as a name of the layer.

If your aim is to use Name as an attribute place it into feature properties:

{"type": "FeatureCollection", "name": "LayerName", "features":
[{"type": "Feature", 
"properties": {"Name":"testName"},
"geometry": {"type": "Polygon", "coordinates":
[[[26.54296875,64.73664139557683],[26.630859375,63.6267446447533],[29.091796875,63.97596090918338],[26.54296875,64.73664139557683]]]}}]}

Test with ogrinfo:

ogrinfo name.json -al
INFO: Open of `name.json'
      using driver `GeoJSON' successful.

Layer name: LayerName
Geometry: Polygon
Feature Count: 1
...
Name: String (0.0)
OGRFeature(LayerName):0
  Name (String) = testName
  POLYGON ((26.54296875 64.7366413955768,26.630859375
63.6267446447533,29.091796875 63.9759609091834,26.54296875
64.7366413955768))


-Jukka Rahkonen-




Peter P wrote
> PostgreSQL "table1" columns:
> Name Data Type
> Id integer
> Name text
> TestGeometry geometry
> 
> Example geojson - this will be one row in table:
> jsonVariable = {"type": "FeatureCollection", "Name": "testName",
> "features":
> [{"type": "Feature", "geometry": {"type": "Polygon", "coordinates":
> [[[26.54296875,64.73664139557683],[26.630859375,63.6267446447533],[29.091796875,63.97596090918338],[26.54296875,64.73664139557683]]]}}]}
> 
> Example python
> ogr2ogr.main(["", "-f", "PostgreSQL", "-s_srs", "+proj=longlat
> +datum=WGS84
> +no_defs", "-t_srs", "EPSG:3857", "PG:dbname='test' host='127.0.0.1'
> port='5432' user='user1' password='password1'", "-nln", "table1",
> "-append",
> json.dumps(jsonVariable)])





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From andrew.bell.ia at gmail.com  Wed Apr 21 07:31:27 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 21 Apr 2021 10:31:27 -0400
Subject: [gdal-dev] exportToPrettyWkt and simplify
Message-ID: <CACJ51z3Z3cCQ5G5oL5GOZ1_Yoqct_mH6TuDD5qckaC9u8dyiBQ@mail.gmail.com>

exportToPrettyWkt() takes an argument called simplify. If it's set, the
FORMAT option is set to WKT1_SIMPLE before a call is made to exportToWkt().
But it seems that WKT1_SIMPLE is also the default format value for
exportToWkt(). Perhaps I'm misreading, but it seems like the simplify
argument is potentially a no-op, depending on the SRS.

Can someone explain what this argument is supposed to do and how I might
get WKT2 text out of this function?  I'm currently getting an error:

PROJ: proj_as_wkt: DatumEnsemble can only be exported to WKT2:2019

Thanks,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210421/1fc9a45a/attachment.html>

From even.rouault at spatialys.com  Wed Apr 21 07:49:45 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 21 Apr 2021 16:49:45 +0200
Subject: [gdal-dev] exportToPrettyWkt and simplify
In-Reply-To: <CACJ51z3Z3cCQ5G5oL5GOZ1_Yoqct_mH6TuDD5qckaC9u8dyiBQ@mail.gmail.com>
References: <CACJ51z3Z3cCQ5G5oL5GOZ1_Yoqct_mH6TuDD5qckaC9u8dyiBQ@mail.gmail.com>
Message-ID: <beb2622b-5ade-eb74-f11b-78a174ea718f@spatialys.com>

Andrew,

Le 21/04/2021 ? 16:31, Andrew Bell a ?crit?:
> exportToPrettyWkt()?takes an argument called simplify. If it's set, 
> the FORMAT option is set to WKT1_SIMPLE before a call is made to 
> exportToWkt(). But it seems that WKT1_SIMPLE is also the default 
> format value for exportToWkt(). Perhaps I'm misreading, but it seems 
> like the simplify argument is potentially a no-op,?depending on the SRS.

The default format value for exportToWkt() is "WKT1" (with axis and 
authority)

$ python -c "from osgeo import osr; srs = osr.SpatialReference(); 
srs.ImportFromEPSG(4326); print(srs.ExportToWkt(['FORMAT=WKT1_SIMPLE']))"
GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 
84",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]

$ python -c "from osgeo import osr; srs = osr.SpatialReference(); 
srs.ImportFromEPSG(4326); print(srs.ExportToWkt(['FORMAT=WKT1']))"
GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]

$ python -c "from osgeo import osr; srs = osr.SpatialReference(); 
srs.ImportFromEPSG(4326); print(srs.ExportToWkt())"

GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]

Depending on how the SRS has been built, you might get less differences 
between WKT1 and WKT1_SIMPLE, but the omission of AXIS should still be 
observed for the later

>
> Can someone explain what this argument is supposed to do and how I 
> might get WKT2 text out of this function?? I'm currently getting an error:
>
> PROJ: proj_as_wkt: DatumEnsemble can only be exported to WKT2:2019

Which GDAL and PROJ versions do you use ? and what is the reproducer for 
this issue ?

I suspect you might ingest a SRS from a WKT that contains a DATUM[] node 
and try to export that as WKT1something with PROJ < 7.2 (if I remember 
well). PROJ 7.2 got changes to automatically turn a DatumEnsemble as a 
Datum when exporting to WKT1.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Wed Apr 21 07:53:07 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 21 Apr 2021 16:53:07 +0200
Subject: [gdal-dev] exportToPrettyWkt and simplify
In-Reply-To: <beb2622b-5ade-eb74-f11b-78a174ea718f@spatialys.com>
References: <CACJ51z3Z3cCQ5G5oL5GOZ1_Yoqct_mH6TuDD5qckaC9u8dyiBQ@mail.gmail.com>
 <beb2622b-5ade-eb74-f11b-78a174ea718f@spatialys.com>
Message-ID: <eecc392d-b7d1-b5ed-8f98-3c391fba79dd@spatialys.com>


> that contains a DATUM[] node 

I meant a ENSEMBLE[] node

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From michael.smith.erdc at gmail.com  Wed Apr 21 07:55:54 2021
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Wed, 21 Apr 2021 10:55:54 -0400
Subject: [gdal-dev] exportToPrettyWkt and simplify
In-Reply-To: <eecc392d-b7d1-b5ed-8f98-3c391fba79dd@spatialys.com>
References: <CACJ51z3Z3cCQ5G5oL5GOZ1_Yoqct_mH6TuDD5qckaC9u8dyiBQ@mail.gmail.com>
 <beb2622b-5ade-eb74-f11b-78a174ea718f@spatialys.com>
 <eecc392d-b7d1-b5ed-8f98-3c391fba79dd@spatialys.com>
Message-ID: <27F5999A-2C76-401C-8A81-B0322C718323@gmail.com>

A 3d srs would have to be demoted to 2d first before exporting to wkt1, correct?

sr.SetFromUserInput("epsg:4979")
sr.ExportToWkt(['FORMAT=WKT1_SIMPLE'])

RuntimeError: PROJ: proj_as_wkt: WKT1 does not support Geographic 3D CRS.

Mike


-- 
Michael Smith
US Army Corps of Engineers
Remote Sensing/GIS Center


?On 4/21/21, 10:53 AM, "gdal-dev on behalf of Even Rouault" <gdal-dev-bounces at lists.osgeo.org on behalf of even.rouault at spatialys.com> wrote:


    > that contains a DATUM[] node 

    I meant a ENSEMBLE[] node

    -- 

    http://www.spatialys.com
    My software is free, but my time generally not.

    _______________________________________________
    gdal-dev mailing list
    gdal-dev at lists.osgeo.org
    https://lists.osgeo.org/mailman/listinfo/gdal-dev



From andrew.bell.ia at gmail.com  Wed Apr 21 09:04:55 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 21 Apr 2021 12:04:55 -0400
Subject: [gdal-dev] exportToPrettyWkt and simplify
In-Reply-To: <beb2622b-5ade-eb74-f11b-78a174ea718f@spatialys.com>
References: <CACJ51z3Z3cCQ5G5oL5GOZ1_Yoqct_mH6TuDD5qckaC9u8dyiBQ@mail.gmail.com>
 <beb2622b-5ade-eb74-f11b-78a174ea718f@spatialys.com>
Message-ID: <CACJ51z2Bwk5hynJ76Rc3ULO_z-Cgcf9OYE4bgPDiHc5Bmbk5Uw@mail.gmail.com>

On Wed, Apr 21, 2021 at 10:49 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Andrew,
>
> Le 21/04/2021 ? 16:31, Andrew Bell a ?crit :
> > exportToPrettyWkt() takes an argument called simplify. If it's set,
> > the FORMAT option is set to WKT1_SIMPLE before a call is made to
> > exportToWkt(). But it seems that WKT1_SIMPLE is also the default
> > format value for exportToWkt(). Perhaps I'm misreading, but it seems
> > like the simplify argument is potentially a no-op, depending on the SRS.
>
> The default format value for exportToWkt() is "WKT1" (with axis and
> authority)
>

Ah. This bit of code makes it seem that they are all synonyms:

     auto wktFormat = PJ_WKT1_GDAL;
    const char* pszFormat = CSLFetchNameValueDef(papszOptions, "FORMAT",
                                    CPLGetConfigOption("OSR_WKT_FORMAT",
""));
    if( EQUAL(pszFormat, "WKT1_ESRI" ) || d->m_bMorphToESRI )
    {
        wktFormat = PJ_WKT1_ESRI;
    }
    else if( EQUAL(pszFormat, "WKT1") ||
             EQUAL(pszFormat, "WKT1_GDAL") ||
             EQUAL(pszFormat, "WKT1_SIMPLE") ||
             EQUAL(pszFormat, "SFSQL") )
    {
        wktFormat = PJ_WKT1_GDAL;
    }

But the code goes on to use both pszFormat and wktFormat. My mistake.


> Which GDAL and PROJ versions do you use ? and what is the reproducer for
> this issue ?
>
> I suspect you might ingest a SRS from a WKT that contains a DATUM[] node
> and try to export that as WKT1something with PROJ < 7.2 (if I remember
> well). PROJ 7.2 got changes to automatically turn a DatumEnsemble as a
> Datum when exporting to WKT1.
>

I'm using PROJ 7.1, which I guess explains the behavior.

Still, it seems like there's no support to get WKT2 from the
exportToPretty() function. Is this correct?

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210421/1392d336/attachment-0001.html>

From loridigia at gmail.com  Wed Apr 21 09:23:34 2021
From: loridigia at gmail.com (Lorenzo Di Giacomo)
Date: Wed, 21 Apr 2021 18:23:34 +0200
Subject: [gdal-dev] gdal_retile JAVA bindings
Message-ID: <CAERmyNSBTYYsvCzd=tK2rSzSxijcp4wc9+tRnVGVKkNrLPWxcw@mail.gmail.com>

Hi, i can't find the gdal_retile porting on java, is there a class /
method? If not, which is the best workaround?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210421/e3c08c2d/attachment.html>

From even.rouault at spatialys.com  Wed Apr 21 10:04:46 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 21 Apr 2021 19:04:46 +0200
Subject: [gdal-dev] exportToPrettyWkt and simplify
In-Reply-To: <CACJ51z2Bwk5hynJ76Rc3ULO_z-Cgcf9OYE4bgPDiHc5Bmbk5Uw@mail.gmail.com>
References: <CACJ51z3Z3cCQ5G5oL5GOZ1_Yoqct_mH6TuDD5qckaC9u8dyiBQ@mail.gmail.com>
 <beb2622b-5ade-eb74-f11b-78a174ea718f@spatialys.com>
 <CACJ51z2Bwk5hynJ76Rc3ULO_z-Cgcf9OYE4bgPDiHc5Bmbk5Uw@mail.gmail.com>
Message-ID: <8d8e43eb-c987-51a1-2232-735489fb21f2@spatialys.com>



> Still, it seems like there's no support to get WKT2 from the 
> exportToPretty() function. Is this correct?

$ python -c "from osgeo import osr; srs = osr.SpatialReference(); 
srs.ImportFromEPSG(4326); print(srs.ExportToWkt(['FORMAT=WKT2']))"


GEOGCRS["WGS 84",ENSEMBLE["World Geodetic System 1984 
ensemble",MEMBER["World Geodetic System 1984 (Transit)"],MEMBER["World 
Geodetic System 1984 (G730)"],MEMBER["World Geodetic System 1984 
(G873)"],MEMBER["World Geodetic System 1984 (G1150)"],MEMBER["World 
Geodetic System 1984 (G1674)"],MEMBER["World Geodetic System 1984 
(G1762)"],ELLIPSOID["WGS 
84",6378137,298.257223563,LENGTHUNIT["metre",1]],ENSEMBLEACCURACY[2.0]],PRIMEM["Greenwich",0,ANGLEUNIT["degree",0.0174532925199433]],CS[ellipsoidal,2],AXIS["geodetic 
latitude 
(Lat)",north,ORDER[1],ANGLEUNIT["degree",0.0174532925199433]],AXIS["geodetic 
longitude 
(Lon)",east,ORDER[2],ANGLEUNIT["degree",0.0174532925199433]],USAGE[SCOPE["Horizontal 
component of 3D 
system."],AREA["World."],BBOX[-90,-180,90,180]],ID["EPSG",4326]]

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210421/478f4971/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Apr 21 10:52:16 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 21 Apr 2021 10:52:16 -0700 (MST)
Subject: [gdal-dev] gdal_retile JAVA bindings
In-Reply-To: <CAERmyNSBTYYsvCzd=tK2rSzSxijcp4wc9+tRnVGVKkNrLPWxcw@mail.gmail.com>
References: <CAERmyNSBTYYsvCzd=tK2rSzSxijcp4wc9+tRnVGVKkNrLPWxcw@mail.gmail.com>
Message-ID: <1619027536749-0.post@n6.nabble.com>

Hi,

The gdal_retile.py utility is a Python script and as far as I know nobody
has ported it into Java so far. Even the GeoServer documents advice to use
it as it stands
https://docs.geoserver.org/stable/en/user/tutorials/imagepyramid/imagepyramid.html.
It is about 1000 lines of Python code
https://github.com/OSGeo/gdal/blob/master/gdal/swig/python/gdal-utils/osgeo_utils/gdal_retile.py
and I guess that it could be re-written if there is an ultimate need for
that. Workaround could be to call Python from Java but I do not know if it
makes sense.

-Jukka Rahkonen-



Lorenzo Di Giacomo wrote
> Hi, i can't find the gdal_retile porting on java, is there a class /
> method? If not, which is the best workaround?
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From andrea.aime at geo-solutions.it  Thu Apr 22 03:59:07 2021
From: andrea.aime at geo-solutions.it (Andrea Aime)
Date: Thu, 22 Apr 2021 12:59:07 +0200
Subject: [gdal-dev] Creating a GeotTIFF in big endian order?
Message-ID: <CA+nxMTufKL4GOgvP14Ty+3VKvr93QLd86n1E=DK98xFPRbqZvg@mail.gmail.com>

Hi,
in order to write some tests, I would like to create a 32bit GeoTIFF in big
endian order.
I looked at gdal_translate generation operations, and the GeoTIFF creation
options, but could not find
a suitable option.

Did I overlook something?

Cheers
Andrea

== GeoServer Professional Services from the experts! Visit
http://goo.gl/it488V for more information. == Ing. Andrea Aime @geowolf
Technical Lead GeoSolutions S.A.S. Via di Montramito 3/A 55054 Massarosa
(LU) phone: +39 0584 962313 fax: +39 0584 1660272 mob: +39 339 8844549
http://www.geo-solutions.it http://twitter.com/geosolutions_it
------------------------------------------------------- *Con riferimento
alla normativa sul trattamento dei dati personali (Reg. UE 2016/679 -
Regolamento generale sulla protezione dei dati ?GDPR?), si precisa che ogni
circostanza inerente alla presente email (il suo contenuto, gli eventuali
allegati, etc.) ? un dato la cui conoscenza ? riservata al/i solo/i
destinatario/i indicati dallo scrivente. Se il messaggio Le ? giunto per
errore, ? tenuta/o a cancellarlo, ogni altra operazione ? illecita. Le
sarei comunque grato se potesse darmene notizia. This email is intended
only for the person or entity to which it is addressed and may contain
information that is privileged, confidential or otherwise protected from
disclosure. We remind that - as provided by European Regulation 2016/679
?GDPR? - copying, dissemination or use of this e-mail or the information
herein by anyone other than the intended recipient is prohibited. If you
have received this email by mistake, please notify us immediately by
telephone or e-mail.*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210422/1bbaa41e/attachment.html>

From even.rouault at spatialys.com  Thu Apr 22 04:21:06 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 22 Apr 2021 13:21:06 +0200
Subject: [gdal-dev] Creating a GeotTIFF in big endian order?
In-Reply-To: <CA+nxMTufKL4GOgvP14Ty+3VKvr93QLd86n1E=DK98xFPRbqZvg@mail.gmail.com>
References: <CA+nxMTufKL4GOgvP14Ty+3VKvr93QLd86n1E=DK98xFPRbqZvg@mail.gmail.com>
Message-ID: <764b6f5b-e0b5-46b2-6a67-4bda1119817f@spatialys.com>

Hi Andrea,

There's an option for that, but it's undocumented as mostly only useful 
for debugging / unit testing

Use the GDAL_TIFF_ENDIANNESS = BIG configuration option

Like in:

gdal_translate ../autotest/gcore/data/byte.tif wrk/out.tif --config 
GDAL_TIFF_ENDIANNESS BIG

Even

Le 22/04/2021 ? 12:59, Andrea Aime a ?crit?:
> Hi,
> in order to write some tests, I would like to create a 32bit GeoTIFF 
> in big endian order.
> I looked at gdal_translate generation operations, and the GeoTIFF 
> creation options, but could not find
> a suitable option.
>
> Did I overlook something?
>
> Cheers
> Andrea
>
> == GeoServer Professional Services from the experts! Visit 
> http://goo.gl/it488V <http://goo.gl/it488V> for more information. == 
> Ing. Andrea Aime @geowolf Technical Lead GeoSolutions S.A.S. Via di 
> Montramito 3/A 55054 Massarosa (LU) phone: +39 0584 962313 fax: +39 
> 0584 1660272 mob: +39 339 8844549 http://www.geo-solutions.it 
> <http://www.geo-solutions.it> http://twitter.com/geosolutions_it 
> <http://twitter.com/geosolutions_it> 
> ------------------------------------------------------- /Con 
> riferimento alla normativa sul trattamento dei dati personali (Reg. UE 
> 2016/679 - Regolamento generale sulla protezione dei dati ?GDPR?), si 
> precisa che ogni circostanza inerente alla presente email (il suo 
> contenuto, gli eventuali allegati, etc.) ? un dato la cui conoscenza ? 
> riservata al/i solo/i destinatario/i indicati dallo scrivente. Se il 
> messaggio Le ? giunto per errore, ? tenuta/o a cancellarlo, ogni altra 
> operazione ? illecita. Le sarei comunque grato se potesse darmene 
> notizia. This email is intended only for the person or entity to which 
> it is addressed and may contain information that is privileged, 
> confidential or otherwise protected from disclosure. We remind that - 
> as provided by European Regulation 2016/679 ?GDPR? - copying, 
> dissemination or use of this e-mail or the information herein by 
> anyone other than the intended recipient is prohibited. If you have 
> received this email by mistake, please notify us immediately by 
> telephone or e-mail./
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210422/d1755bd0/attachment.html>

From andrea.aime at geo-solutions.it  Thu Apr 22 09:24:03 2021
From: andrea.aime at geo-solutions.it (Andrea Aime)
Date: Thu, 22 Apr 2021 18:24:03 +0200
Subject: [gdal-dev] Creating a GeotTIFF in big endian order?
In-Reply-To: <764b6f5b-e0b5-46b2-6a67-4bda1119817f@spatialys.com>
References: <CA+nxMTufKL4GOgvP14Ty+3VKvr93QLd86n1E=DK98xFPRbqZvg@mail.gmail.com>
 <764b6f5b-e0b5-46b2-6a67-4bda1119817f@spatialys.com>
Message-ID: <CA+nxMTtjJDqPBRKMFeOX7n0ekZY9v8Vcms=Q5tpW+NPCxNmKXQ@mail.gmail.com>

Yup, works fine, thank you!

Cheers
Andrea

On Thu, Apr 22, 2021 at 1:21 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi Andrea,
>
> There's an option for that, but it's undocumented as mostly only useful
> for debugging / unit testing
>
> Use the GDAL_TIFF_ENDIANNESS = BIG configuration option
>
> Like in:
>
> gdal_translate ../autotest/gcore/data/byte.tif wrk/out.tif --config
> GDAL_TIFF_ENDIANNESS BIG
>
> Even
> Le 22/04/2021 ? 12:59, Andrea Aime a ?crit :
>
> Hi,
> in order to write some tests, I would like to create a 32bit GeoTIFF in
> big endian order.
> I looked at gdal_translate generation operations, and the GeoTIFF creation
> options, but could not find
> a suitable option.
>
> Did I overlook something?
>
> Cheers
> Andrea
>
> == GeoServer Professional Services from the experts! Visit
> http://goo.gl/it488V for more information. == Ing. Andrea Aime @geowolf
> Technical Lead GeoSolutions S.A.S. Via di Montramito 3/A 55054 Massarosa
> (LU) phone: +39 0584 962313 fax: +39 0584 1660272 mob: +39 339 8844549
> http://www.geo-solutions.it http://twitter.com/geosolutions_it
> ------------------------------------------------------- *Con riferimento
> alla normativa sul trattamento dei dati personali (Reg. UE 2016/679 -
> Regolamento generale sulla protezione dei dati ?GDPR?), si precisa che ogni
> circostanza inerente alla presente email (il suo contenuto, gli eventuali
> allegati, etc.) ? un dato la cui conoscenza ? riservata al/i solo/i
> destinatario/i indicati dallo scrivente. Se il messaggio Le ? giunto per
> errore, ? tenuta/o a cancellarlo, ogni altra operazione ? illecita. Le
> sarei comunque grato se potesse darmene notizia. This email is intended
> only for the person or entity to which it is addressed and may contain
> information that is privileged, confidential or otherwise protected from
> disclosure. We remind that - as provided by European Regulation 2016/679
> ?GDPR? - copying, dissemination or use of this e-mail or the information
> herein by anyone other than the intended recipient is prohibited. If you
> have received this email by mistake, please notify us immediately by
> telephone or e-mail.*
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>

-- 

Regards, Andrea Aime

== GeoServer Professional Services from the experts! Visit
http://goo.gl/it488V for more information. == Ing. Andrea Aime @geowolf
Technical Lead GeoSolutions S.A.S. Via di Montramito 3/A 55054 Massarosa
(LU) phone: +39 0584 962313 fax: +39 0584 1660272 mob: +39 339 8844549
http://www.geo-solutions.it http://twitter.com/geosolutions_it
------------------------------------------------------- *Con riferimento
alla normativa sul trattamento dei dati personali (Reg. UE 2016/679 -
Regolamento generale sulla protezione dei dati ?GDPR?), si precisa che ogni
circostanza inerente alla presente email (il suo contenuto, gli eventuali
allegati, etc.) ? un dato la cui conoscenza ? riservata al/i solo/i
destinatario/i indicati dallo scrivente. Se il messaggio Le ? giunto per
errore, ? tenuta/o a cancellarlo, ogni altra operazione ? illecita. Le
sarei comunque grato se potesse darmene notizia. This email is intended
only for the person or entity to which it is addressed and may contain
information that is privileged, confidential or otherwise protected from
disclosure. We remind that - as provided by European Regulation 2016/679
?GDPR? - copying, dissemination or use of this e-mail or the information
herein by anyone other than the intended recipient is prohibited. If you
have received this email by mistake, please notify us immediately by
telephone or e-mail.*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210422/80e84fa2/attachment-0001.html>

From rlelamer at hotmail.fr  Thu Apr 22 11:25:27 2021
From: rlelamer at hotmail.fr (Hotmail)
Date: Thu, 22 Apr 2021 20:25:27 +0200
Subject: [gdal-dev] Modify original ColorTable in VRT & TIFF files
Message-ID: <PR3P193MB050721FAA4CE41341D97993BB6469@PR3P193MB0507.EURP193.PROD.OUTLOOK.COM>

Hi all,

I'm looking to modify the original ColorTable, when georeferencing, PNG => gdal_translate + gdalwarp => TIFF.

> gdal_translate -of VRT -a_srs EPSG:4326 file_png file_vrt -a_ullr xxxx
> gdalwarp -s_srs EPSG:4326 -t_srs EPSG:3857 file_vrt file_tiff

If I open the VRT file and do the edit manually, the output TIFF file is correct.
The problem is that I have 524288 files ... so I would like to do the modification automatically, via gdal_translate.
But I don't quite understand using the parameters of the command ...

? Original VRT & TIFF files

# VRT
  <VRTRasterBand dataType="Byte" band="1">
    <ColorInterp>Palette</ColorInterp>
    <ColorTable>
      <Entry c1="0" c2="0" c3="255" c4="255" />
      <Entry c1="255" c2="255" c3="255" c4="255" />
      <Entry c1="0" c2="0" c3="0" c4="255" />
        [...]
      <Entry c1="0" c2="0" c3="0" c4="255" />
    </ColorTable>
  </VRTRasterBand>

# TIFF
  Band 1 Block=63153x1 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 256 entries)
    0: 0,0,0,255
    1: 255,255,255,255
    2: 0,0,0,255
      [...]
  255: 0,0,0,255


I want this :
? Modified VRT and TIFF files

# VRT
  <VRTRasterBand dataType="Byte" band="1">
    <ColorInterp>Palette</ColorInterp>
    <ColorTable>
      <Entry c1="0" c2="0" c3="255" c4="255" />
      <Entry c1="0" c2="255" c3="0" c4="255" />
      <Entry c1="255" c2="0" c3="0" c4="255" />
        [...]
      <Entry c1="255" c2="0" c3="0" c4="255" />
    </ColorTable>
  </VRTRasterBand>

# TIFF
  Band 1 Block=63153x1 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 256 entries)
    0: 0,0,255,255
    1: 0,255,0,255
    2: 255,0,0,255
      [...]
  255: 255,0,0,255

Whatever I find, redirects me to gdaldem (which I can't use). In gdal_translate, it seems to me that the parameter -colorinterp_X might be suitable
but I can't find any concrete examples (or I have not looked in the right place).

I want to impose the following parameters:
Band 1
Type = Byte
ColorInterp = Palette
Color Table (RGB with 256 entries)

In ColorTable:
Entry 0 = 0,0,255,255
Entry 1 = 0,255,0,255
Entries 2 to 255 = 255,0,0,255

From lars.schylberg at blixtmail.se  Thu Apr 22 13:44:05 2021
From: lars.schylberg at blixtmail.se (lars.schylberg at blixtmail.se)
Date: Thu, 22 Apr 2021 20:44:05 +0000
Subject: [gdal-dev] Modify original ColorTable in VRT & TIFF files
In-Reply-To: <PR3P193MB050721FAA4CE41341D97993BB6469@PR3P193MB0507.EURP193.PROD.OUTLOOK.COM>
References: <PR3P193MB050721FAA4CE41341D97993BB6469@PR3P193MB0507.EURP193.PROD.OUTLOOK.COM>
Message-ID: <0fccc165ebc77c6598830816f36fcce5@blixtmail.se>

Hi, 

I had to deal a lot with palette tiff images a couple of years ago.

What I did was that edited the vrt files with sed inline editing:

Some examples:

Insert a text file after the row that is: /VRTRasterBand dataType="Byte" band="1" The inserted file here is orig_colortable_vrt.txt:

sed -i -e '/VRTRasterBand dataType="Byte" band="1"/r orig_colortable_vrt.txt' image_6.vrt


Remove a certain line that contains "NoDataValue"

sed -i -e '/NoDataValue/d' image_6.vrt
 
There a also a sed commands to delete certain rows. Just read many sed examples.

Have fun / Lars Schylberg


22 april 2021 kl. 20:25, "Hotmail" <rlelamer at hotmail.fr> skrev:

> Hi all,
> 
> I'm looking to modify the original ColorTable, when georeferencing, PNG => gdal_translate +
> gdalwarp => TIFF.
> 
>> gdal_translate -of VRT -a_srs EPSG:4326 file_png file_vrt -a_ullr xxxx
>> gdalwarp -s_srs EPSG:4326 -t_srs EPSG:3857 file_vrt file_tiff
> 
> If I open the VRT file and do the edit manually, the output TIFF file is correct.
> The problem is that I have 524288 files ... so I would like to do the modification automatically,
> via gdal_translate.
> But I don't quite understand using the parameters of the command ...
> 
> ? Original VRT & TIFF files
> 
> # VRT
> <VRTRasterBand dataType="Byte" band="1">
> <ColorInterp>Palette</ColorInterp>
> <ColorTable>
> <Entry c1="0" c2="0" c3="255" c4="255" />
> <Entry c1="255" c2="255" c3="255" c4="255" />
> <Entry c1="0" c2="0" c3="0" c4="255" />
> [...]
> <Entry c1="0" c2="0" c3="0" c4="255" />
> </ColorTable>
> </VRTRasterBand>
> 
> # TIFF
> Band 1 Block=63153x1 Type=Byte, ColorInterp=Palette
> Color Table (RGB with 256 entries)
> 0: 0,0,0,255
> 1: 255,255,255,255
> 2: 0,0,0,255
> [...]
> 255: 0,0,0,255
> 
> I want this :
> ? Modified VRT and TIFF files
> 
> # VRT
> <VRTRasterBand dataType="Byte" band="1">
> <ColorInterp>Palette</ColorInterp>
> <ColorTable>
> <Entry c1="0" c2="0" c3="255" c4="255" />
> <Entry c1="0" c2="255" c3="0" c4="255" />
> <Entry c1="255" c2="0" c3="0" c4="255" />
> [...]
> <Entry c1="255" c2="0" c3="0" c4="255" />
> </ColorTable>
> </VRTRasterBand>
> 
> # TIFF
> Band 1 Block=63153x1 Type=Byte, ColorInterp=Palette
> Color Table (RGB with 256 entries)
> 0: 0,0,255,255
> 1: 0,255,0,255
> 2: 255,0,0,255
> [...]
> 255: 255,0,0,255
> 
> Whatever I find, redirects me to gdaldem (which I can't use). In gdal_translate, it seems to me
> that the parameter -colorinterp_X might be suitable
> but I can't find any concrete examples (or I have not looked in the right place).
> 
> I want to impose the following parameters:
> Band 1
> Type = Byte
> ColorInterp = Palette
> Color Table (RGB with 256 entries)
> 
> In ColorTable:
> Entry 0 = 0,0,255,255
> Entry 1 = 0,255,0,255
> Entries 2 to 255 = 255,0,0,255
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From ejovenitti at gmail.com  Thu Apr 22 17:07:32 2021
From: ejovenitti at gmail.com (jovajova24)
Date: Thu, 22 Apr 2021 17:07:32 -0700 (MST)
Subject: [gdal-dev] Accessing a Nitf DES
Message-ID: <1619136452661-0.post@n6.nabble.com>

So I found this issue that never got merged i.e., 
https://github.com/OSGeo/gdal/pull/2336

I'm assuming this means that GDAL doesn't support accessing GLAS\GFM DES
right now? If not, could I finsh this PR?

Also, can someone point me to any sudo c++ example code in how to access a
DES? 
Thanks.




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Fri Apr 23 01:24:42 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 23 Apr 2021 10:24:42 +0200
Subject: [gdal-dev] Accessing a Nitf DES
In-Reply-To: <1619136452661-0.post@n6.nabble.com>
References: <1619136452661-0.post@n6.nabble.com>
Message-ID: <6185c8b5-8e2f-8207-520b-49402f86ab02@spatialys.com>

https://github.com/OSGeo/gdal/pull/3153 should cover this need

Le 23/04/2021 ? 02:07, jovajova24 a ?crit?:
> So I found this issue that never got merged i.e.,
> https://github.com/OSGeo/gdal/pull/2336
>
> I'm assuming this means that GDAL doesn't support accessing GLAS\GFM DES
> right now? If not, could I finsh this PR?
>
> Also, can someone point me to any sudo c++ example code in how to access a
> DES?
> Thanks.
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From lars.schylberg at blixtmail.se  Fri Apr 23 02:31:13 2021
From: lars.schylberg at blixtmail.se (lars.schylberg at blixtmail.se)
Date: Fri, 23 Apr 2021 09:31:13 +0000
Subject: [gdal-dev] Modify original ColorTable in VRT & TIFF files
In-Reply-To: <0fccc165ebc77c6598830816f36fcce5@blixtmail.se>
References: <0fccc165ebc77c6598830816f36fcce5@blixtmail.se>
 <PR3P193MB050721FAA4CE41341D97993BB6469@PR3P193MB0507.EURP193.PROD.OUTLOOK.COM>
Message-ID: <ea707a59c8d8bd7b8af5443f653dabe5@blixtmail.se>

Hi again,

Some other tricks.  To extract the color table from a PNG I often use pngcheck.

pngcheck -p /data/tests/500K_large_pct.png \
| sed '1,2d' \
| awk 'NR < 257' \
| sed 's/[=].*$//' \
| sed 's/[(:)]//g' \
| sed 's/,/ /g' \
| sed 's/...//' > color.txt


You could add an extra print command if you want to write it in other format:
| awk -F, '{printf "%d,%d,%d,255\n", $1, $2, $3}'

To assemble a vrt and a tif I have used gdalbuildvrt command with the argument "-separate".
You get a new vrt that You then convert with gdal_translate.

Have fun / Lars Schylberg


22 april 2021 kl. 22:50, lars.schylberg at blixtmail.se skrev:

> Hi, 
> 
> I had to deal a lot with palette tiff images a couple of years ago.
> 
> What I did was that edited the vrt files with sed inline editing:
> 
> Some examples:
> 
> Insert a text file after the row that is: /VRTRasterBand dataType="Byte" band="1" The inserted file
> here is orig_colortable_vrt.txt:
> 
> sed -i -e '/VRTRasterBand dataType="Byte" band="1"/r orig_colortable_vrt.txt' image_6.vrt
> 
> Remove a certain line that contains "NoDataValue"
> 
> sed -i -e '/NoDataValue/d' image_6.vrt
> 
> There a also a sed commands to delete certain rows. Just read many sed examples.
> 
> Have fun / Lars Schylberg
> 
> 22 april 2021 kl. 20:25, "Hotmail" <rlelamer at hotmail.fr> skrev:
> 
>> Hi all,
>> 
>> I'm looking to modify the original ColorTable, when georeferencing, PNG => gdal_translate +
>> gdalwarp => TIFF.
>> 
>>> gdal_translate -of VRT -a_srs EPSG:4326 file_png file_vrt -a_ullr xxxx
>>> gdalwarp -s_srs EPSG:4326 -t_srs EPSG:3857 file_vrt file_tiff
>> 
>> If I open the VRT file and do the edit manually, the output TIFF file is correct.
>> The problem is that I have 524288 files ... so I would like to do the modification automatically,
>> via gdal_translate.
>> But I don't quite understand using the parameters of the command ...
>> 
>> ? Original VRT & TIFF files
>> 
>> # VRT
>> <VRTRasterBand dataType="Byte" band="1">
>> <ColorInterp>Palette</ColorInterp>
>> <ColorTable>
>> <Entry c1="0" c2="0" c3="255" c4="255" />
>> <Entry c1="255" c2="255" c3="255" c4="255" />
>> <Entry c1="0" c2="0" c3="0" c4="255" />
>> [...]
>> <Entry c1="0" c2="0" c3="0" c4="255" />
>> </ColorTable>
>> </VRTRasterBand>
>> 
>> # TIFF
>> Band 1 Block=63153x1 Type=Byte, ColorInterp=Palette
>> Color Table (RGB with 256 entries)
>> 0: 0,0,0,255
>> 1: 255,255,255,255
>> 2: 0,0,0,255
>> [...]
>> 255: 0,0,0,255
>> 
>> I want this :
>> ? Modified VRT and TIFF files
>> 
>> # VRT
>> <VRTRasterBand dataType="Byte" band="1">
>> <ColorInterp>Palette</ColorInterp>
>> <ColorTable>
>> <Entry c1="0" c2="0" c3="255" c4="255" />
>> <Entry c1="0" c2="255" c3="0" c4="255" />
>> <Entry c1="255" c2="0" c3="0" c4="255" />
>> [...]
>> <Entry c1="255" c2="0" c3="0" c4="255" />
>> </ColorTable>
>> </VRTRasterBand>
>> 
>> # TIFF
>> Band 1 Block=63153x1 Type=Byte, ColorInterp=Palette
>> Color Table (RGB with 256 entries)
>> 0: 0,0,255,255
>> 1: 0,255,0,255
>> 2: 255,0,0,255
>> [...]
>> 255: 255,0,0,255
>> 
>> Whatever I find, redirects me to gdaldem (which I can't use). In gdal_translate, it seems to me
>> that the parameter -colorinterp_X might be suitable
>> but I can't find any concrete examples (or I have not looked in the right place).
>> 
>> I want to impose the following parameters:
>> Band 1
>> Type = Byte
>> ColorInterp = Palette
>> Color Table (RGB with 256 entries)
>> 
>> In ColorTable:
>> Entry 0 = 0,0,255,255
>> Entry 1 = 0,255,0,255
>> Entries 2 to 255 = 255,0,0,255
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From pepanpeter at gmail.com  Fri Apr 23 02:54:44 2021
From: pepanpeter at gmail.com (Peter P)
Date: Fri, 23 Apr 2021 02:54:44 -0700 (MST)
Subject: [gdal-dev] GDAL question
In-Reply-To: <1619001200374-0.post@n6.nabble.com>
References: <CAFY+pqnHtXUBMXEK9p+-QG3qoyF6fWUxJrfpJvO-fos9L3qsxw@mail.gmail.com>
 <1618932348826-0.post@n6.nabble.com> <1618997599910-0.post@n6.nabble.com>
 <1619001200374-0.post@n6.nabble.com>
Message-ID: <1619171684233-0.post@n6.nabble.com>

It is works, Thanks

Now I trying update row.
In SQL will be: /UPDATE "table1" SET "TestGeometry"=.... WHERE "Name" =
'testname'/
How is this possible in ogr2ogr? I use -update, -append not work... 


jratike80 wrote
> Hi,
> 
> Please check your GeoJSON before fighting with Python. "Name" placed into
> here
>  {"type": "FeatureCollection", "Name": "testName",
> 
> will probably be just skipped. If you used lower case "name"
> {"type": "FeatureCollection", "name": "testName",
> 
> then "testName would be used as a name of the layer.
> 
> If your aim is to use Name as an attribute place it into feature
> properties:
> 
> {"type": "FeatureCollection", "name": "LayerName", "features":
> [{"type": "Feature", 
> "properties": {"Name":"testName"},
> "geometry": {"type": "Polygon", "coordinates":
> [[[26.54296875,64.73664139557683],[26.630859375,63.6267446447533],[29.091796875,63.97596090918338],[26.54296875,64.73664139557683]]]}}]}
> 
> Test with ogrinfo:
> 
> ogrinfo name.json -al
> INFO: Open of `name.json'
>       using driver `GeoJSON' successful.
> 
> Layer name: LayerName
> Geometry: Polygon
> Feature Count: 1
> ...
> Name: String (0.0)
> OGRFeature(LayerName):0
>   Name (String) = testName
>   POLYGON ((26.54296875 64.7366413955768,26.630859375
> 63.6267446447533,29.091796875 63.9759609091834,26.54296875
> 64.7366413955768))
> 
> 
> -Jukka Rahkonen-
> 
> 
> 
> 
> Peter P wrote
>> PostgreSQL "table1" columns:
>> Name Data Type
>> Id integer
>> Name text
>> TestGeometry geometry
>> 
>> Example geojson - this will be one row in table:
>> jsonVariable = {"type": "FeatureCollection", "Name": "testName",
>> "features":
>> [{"type": "Feature", "geometry": {"type": "Polygon", "coordinates":
>> [[[26.54296875,64.73664139557683],[26.630859375,63.6267446447533],[29.091796875,63.97596090918338],[26.54296875,64.73664139557683]]]}}]}
>> 
>> Example python
>> ogr2ogr.main(["", "-f", "PostgreSQL", "-s_srs", "+proj=longlat
>> +datum=WGS84
>> +no_defs", "-t_srs", "EPSG:3857", "PG:dbname='test' host='127.0.0.1'
>> port='5432' user='user1' password='password1'", "-nln", "table1",
>> "-append",
>> json.dumps(jsonVariable)])
> 
> 
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From schut at satelligence.com  Fri Apr 23 05:17:56 2021
From: schut at satelligence.com (Vincent Schut)
Date: Fri, 23 Apr 2021 14:17:56 +0200
Subject: [gdal-dev] how to use tiledb datasets on gcs?
Message-ID: <05a1d396-d242-5c0f-3dd8-532f95d22dcc@satelligence.com>

Hi, how should I specify a tiledb dataset's url that resides on gcs 
(google cloud storage) to gdal? I've tried several combinations of 
gcs://, /vsigs/, prefixed with TILEDB:// or not, but no luck. I've 
looked in the driver source, and apparently there is only a /vsis3/ -> 
tiledb uri translation, but no equivalent gcs one?

Vincent.

-- 

	

Vincent Schut

Remote Sensing Software Engineer

+31 302272679 ~ Maliebaan 22 | 3581CP | Utrecht | Netherlands

Linkedin <https://www.linkedin.com/company/satelligence/>~ 
satelligence.com <http://www.satelligence.com><http://www.satelligence.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210423/93e4cf3a/attachment-0001.html>

From schut at satelligence.com  Fri Apr 23 05:59:12 2021
From: schut at satelligence.com (Vincent Schut)
Date: Fri, 23 Apr 2021 14:59:12 +0200
Subject: [gdal-dev] how to use tiledb datasets on gcs?
In-Reply-To: <05a1d396-d242-5c0f-3dd8-532f95d22dcc@satelligence.com>
References: <05a1d396-d242-5c0f-3dd8-532f95d22dcc@satelligence.com>
Message-ID: <102d2637-7f76-f4ac-02e4-8a056d6ed6c9@satelligence.com>

On 4/23/21 2:17 PM, Vincent Schut wrote:
> Hi, how should I specify a tiledb dataset's url that resides on gcs 
> (google cloud storage) to gdal? I've tried several combinations of 
> gcs://, /vsigs/, prefixed with TILEDB:// or not, but no luck. I've 
> looked in the driver source, and apparently there is only a /vsis3/ -> 
> tiledb uri translation, but no equivalent gcs one?
>
To clarify this a bit: writing works:

gdal_translate -of tiledb -co COMPRESSION=ZSTD 
S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tif 
gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb

and the file is correctly created in the bucket. However, when I want to 
open it, it fails:

gdalinfo -if tiledb 
gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb
ERROR 4: 
gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb: 
No such file or directory
gdalinfo failed - unable to open 
'gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb'.

Is there any way to correctly specify this tiledb url on gcs for gdal?

Vincent.
>
> -- 
>
> 	
>
> Vincent Schut
>
> Remote Sensing Software Engineer
>
> +31 302272679 ~ Maliebaan 22 | 3581CP | Utrecht | Netherlands
>
> Linkedin <https://www.linkedin.com/company/satelligence/>~ 
> satelligence.com 
> <http://www.satelligence.com><http://www.satelligence.com>
>

-- 

	

Vincent Schut

Remote Sensing Software Engineer

+31 302272679 ~ Maliebaan 22 | 3581CP | Utrecht | Netherlands

Linkedin <https://www.linkedin.com/company/satelligence/>~ 
satelligence.com <http://www.satelligence.com><http://www.satelligence.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210423/d7a892f6/attachment.html>

From even.rouault at spatialys.com  Fri Apr 23 06:09:16 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 23 Apr 2021 15:09:16 +0200
Subject: [gdal-dev] how to use tiledb datasets on gcs?
In-Reply-To: <102d2637-7f76-f4ac-02e4-8a056d6ed6c9@satelligence.com>
References: <05a1d396-d242-5c0f-3dd8-532f95d22dcc@satelligence.com>
 <102d2637-7f76-f4ac-02e4-8a056d6ed6c9@satelligence.com>
Message-ID: <97f29146-ffaa-9d6e-cd8e-9121c089d6b8@spatialys.com>

I guess you should add something similar to 
https://github.com/OSGeo/gdal/commit/3623f9c91a2c513af204d30fe25314dbe5c7b9be 
for /vsigs

Le 23/04/2021 ? 14:59, Vincent Schut a ?crit?:
> On 4/23/21 2:17 PM, Vincent Schut wrote:
>> Hi, how should I specify a tiledb dataset's url that resides on gcs 
>> (google cloud storage) to gdal? I've tried several combinations of 
>> gcs://, /vsigs/, prefixed with TILEDB:// or not, but no luck. I've 
>> looked in the driver source, and apparently there is only a /vsis3/ 
>> -> tiledb uri translation, but no equivalent gcs one?
>>
> To clarify this a bit: writing works:
>
> gdal_translate -of tiledb -co COMPRESSION=ZSTD 
> S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tif 
> gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb
>
> and the file is correctly created in the bucket. However, when I want 
> to open it, it fails:
>
> gdalinfo -if tiledb 
> gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb
> ERROR 4: 
> gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb: 
> No such file or directory
> gdalinfo failed - unable to open 
> 'gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb'.
>
> Is there any way to correctly specify this tiledb url on gcs for gdal?
>
> Vincent.
>>
>> -- 
>>
>> 	
>>
>> Vincent Schut
>>
>> Remote Sensing Software Engineer
>>
>> +31 302272679 ~ Maliebaan 22 | 3581CP | Utrecht | Netherlands
>>
>> Linkedin <https://www.linkedin.com/company/satelligence/>~ 
>> satelligence.com 
>> <http://www.satelligence.com><http://www.satelligence.com>
>>
>
> -- 
>
> 	
>
> Vincent Schut
>
> Remote Sensing Software Engineer
>
> +31 302272679 ~ Maliebaan 22 | 3581CP | Utrecht | Netherlands
>
> Linkedin <https://www.linkedin.com/company/satelligence/>~ 
> satelligence.com 
> <http://www.satelligence.com><http://www.satelligence.com>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210423/d33e02b8/attachment-0001.html>

From schut at satelligence.com  Fri Apr 23 06:34:17 2021
From: schut at satelligence.com (Vincent Schut)
Date: Fri, 23 Apr 2021 15:34:17 +0200
Subject: [gdal-dev] how to use tiledb datasets on gcs?
In-Reply-To: <97f29146-ffaa-9d6e-cd8e-9121c089d6b8@spatialys.com>
References: <05a1d396-d242-5c0f-3dd8-532f95d22dcc@satelligence.com>
 <102d2637-7f76-f4ac-02e4-8a056d6ed6c9@satelligence.com>
 <97f29146-ffaa-9d6e-cd8e-9121c089d6b8@spatialys.com>
Message-ID: <8c9d4fde-b2f2-da13-0de1-a6546736953b@satelligence.com>

Thanks for confirming, Even. That doesn't look too difficult. I'll give 
it a try.

On 4/23/21 3:09 PM, Even Rouault wrote:
>
> I guess you should add something similar to 
> https://github.com/OSGeo/gdal/commit/3623f9c91a2c513af204d30fe25314dbe5c7b9be 
> for /vsigs
>
> Le 23/04/2021 ? 14:59, Vincent Schut a ?crit?:
>> On 4/23/21 2:17 PM, Vincent Schut wrote:
>>> Hi, how should I specify a tiledb dataset's url that resides on gcs 
>>> (google cloud storage) to gdal? I've tried several combinations of 
>>> gcs://, /vsigs/, prefixed with TILEDB:// or not, but no luck. I've 
>>> looked in the driver source, and apparently there is only a /vsis3/ 
>>> -> tiledb uri translation, but no equivalent gcs one?
>>>
>> To clarify this a bit: writing works:
>>
>> gdal_translate -of tiledb -co COMPRESSION=ZSTD 
>> S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tif 
>> gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb
>>
>> and the file is correctly created in the bucket. However, when I want 
>> to open it, it fails:
>>
>> gdalinfo -if tiledb 
>> gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb
>> ERROR 4: 
>> gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb: 
>> No such file or directory
>> gdalinfo failed - unable to open 
>> 'gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb'.
>>
>> Is there any way to correctly specify this tiledb url on gcs for gdal?
>>
>> Vincent.
>>>
>>> -- 
>>>
>>> 	
>>>
>>> Vincent Schut
>>>
>>> Remote Sensing Software Engineer
>>>
>>> +31 302272679 ~ Maliebaan 22 | 3581CP | Utrecht | Netherlands
>>>
>>> Linkedin <https://www.linkedin.com/company/satelligence/>~ 
>>> satelligence.com 
>>> <http://www.satelligence.com><http://www.satelligence.com>
>>>
>>
>> -- 
>>
>> 	
>>
>> Vincent Schut
>>
>> Remote Sensing Software Engineer
>>
>> +31 302272679 ~ Maliebaan 22 | 3581CP | Utrecht | Netherlands
>>
>> Linkedin <https://www.linkedin.com/company/satelligence/>~ 
>> satelligence.com 
>> <http://www.satelligence.com><http://www.satelligence.com>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.

-- 

	

Vincent Schut

Remote Sensing Software Engineer

+31 302272679 ~ Maliebaan 22 | 3581CP | Utrecht | Netherlands

Linkedin <https://www.linkedin.com/company/satelligence/>~ 
satelligence.com <http://www.satelligence.com><http://www.satelligence.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210423/6064ec70/attachment.html>

From sean at mapbox.com  Fri Apr 23 07:14:37 2021
From: sean at mapbox.com (Sean Gillies)
Date: Fri, 23 Apr 2021 08:14:37 -0600
Subject: [gdal-dev] how to use tiledb datasets on gcs?
In-Reply-To: <8c9d4fde-b2f2-da13-0de1-a6546736953b@satelligence.com>
References: <05a1d396-d242-5c0f-3dd8-532f95d22dcc@satelligence.com>
 <102d2637-7f76-f4ac-02e4-8a056d6ed6c9@satelligence.com>
 <97f29146-ffaa-9d6e-cd8e-9121c089d6b8@spatialys.com>
 <8c9d4fde-b2f2-da13-0de1-a6546736953b@satelligence.com>
Message-ID: <CADPhZXythax5J6bzURc+H6Nq=5-N3hQCm=B3C1mptOWxzonBzg@mail.gmail.com>

Hi Vincent, Even.

Why would we do this when /vsigcs/... should work? Letting individual
drivers set their own conventions for dataset names seems, to me, to hurt
long-term maintenance and interoperability.

On Fri, Apr 23, 2021 at 7:34 AM Vincent Schut <schut at satelligence.com>
wrote:

> Thanks for confirming, Even. That doesn't look too difficult. I'll give it
> a try.
>
> On 4/23/21 3:09 PM, Even Rouault wrote:
>
> I guess you should add something similar to
> https://github.com/OSGeo/gdal/commit/3623f9c91a2c513af204d30fe25314dbe5c7b9be
> for /vsigs
> Le 23/04/2021 ? 14:59, Vincent Schut a ?crit :
>
> On 4/23/21 2:17 PM, Vincent Schut wrote:
>
> Hi, how should I specify a tiledb dataset's url that resides on gcs
> (google cloud storage) to gdal? I've tried several combinations of gcs://,
> /vsigs/, prefixed with TILEDB:// or not, but no luck. I've looked in the
> driver source, and apparently there is only a /vsis3/ -> tiledb uri
> translation, but no equivalent gcs one?
>
> To clarify this a bit: writing works:
>
> gdal_translate -of tiledb -co COMPRESSION=ZSTD
> S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tif
> gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb
>
> and the file is correctly created in the bucket. However, when I want to
> open it, it fails:
>
> gdalinfo -if tiledb
> gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb
> ERROR 4:
> gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb:
> No such file or directory
> gdalinfo failed - unable to open
> 'gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb'.
>
> Is there any way to correctly specify this tiledb url on gcs for gdal?
>
> Vincent.
>
> --
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210423/9df98fd5/attachment.html>

From even.rouault at spatialys.com  Fri Apr 23 07:20:07 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 23 Apr 2021 16:20:07 +0200
Subject: [gdal-dev] how to use tiledb datasets on gcs?
In-Reply-To: <CADPhZXythax5J6bzURc+H6Nq=5-N3hQCm=B3C1mptOWxzonBzg@mail.gmail.com>
References: <05a1d396-d242-5c0f-3dd8-532f95d22dcc@satelligence.com>
 <102d2637-7f76-f4ac-02e4-8a056d6ed6c9@satelligence.com>
 <97f29146-ffaa-9d6e-cd8e-9121c089d6b8@spatialys.com>
 <8c9d4fde-b2f2-da13-0de1-a6546736953b@satelligence.com>
 <CADPhZXythax5J6bzURc+H6Nq=5-N3hQCm=B3C1mptOWxzonBzg@mail.gmail.com>
Message-ID: <7eb80e57-8040-73cc-fdf9-0c6074631ad1@spatialys.com>

Sean,

my understanding of the commit is that internally the tiledb SDK handles 
cloud storage by itself (ie not relying on GDAL virtual file systems) 
and using s3:// / gcs:// naming conventions, and the purpose of the 
below referenced commit is, for the GDALOpen() code path, to remap 
/vsis3/ to s3:// , since that's what tiledb SDK expects. But Norman 
might better comment on.

Even

Le 23/04/2021 ? 16:14, Sean Gillies a ?crit?:
> Hi Vincent, Even.
>
> Why would we do this when /vsigcs/... should work? Letting individual 
> drivers set their own conventions for dataset names seems, to me, to 
> hurt long-term maintenance and interoperability.
>
> On Fri, Apr 23, 2021 at 7:34 AM Vincent Schut <schut at satelligence.com 
> <mailto:schut at satelligence.com>> wrote:
>
>     Thanks for confirming, Even. That doesn't look too difficult. I'll
>     give it a try.
>
>     On 4/23/21 3:09 PM, Even Rouault wrote:
>>
>>     I guess you should add something similar to
>>     https://github.com/OSGeo/gdal/commit/3623f9c91a2c513af204d30fe25314dbe5c7b9be
>>     <https://github.com/OSGeo/gdal/commit/3623f9c91a2c513af204d30fe25314dbe5c7b9be>
>>     for /vsigs
>>
>>     Le 23/04/2021 ? 14:59, Vincent Schut a ?crit?:
>>>     On 4/23/21 2:17 PM, Vincent Schut wrote:
>>>>     Hi, how should I specify a tiledb dataset's url that resides on
>>>>     gcs (google cloud storage) to gdal? I've tried several
>>>>     combinations of gcs://, /vsigs/, prefixed with TILEDB:// or
>>>>     not, but no luck. I've looked in the driver source, and
>>>>     apparently there is only a /vsis3/ -> tiledb uri translation,
>>>>     but no equivalent gcs one?
>>>>
>>>     To clarify this a bit: writing works:
>>>
>>>     gdal_translate -of tiledb -co COMPRESSION=ZSTD
>>>     S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tif
>>>     gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb
>>>
>>>     and the file is correctly created in the bucket. However, when I
>>>     want to open it, it fails:
>>>
>>>     gdalinfo -if tiledb
>>>     gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb
>>>     ERROR 4:
>>>     gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb:
>>>     No such file or directory
>>>     gdalinfo failed - unable to open
>>>     'gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb'.
>>>
>>>     Is there any way to correctly specify this tiledb url on gcs for
>>>     gdal?
>>>
>>>     Vincent.
>
> -- 
> Sean Gillies

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210423/1f06fece/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Apr 23 07:21:09 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Fri, 23 Apr 2021 07:21:09 -0700 (MST)
Subject: [gdal-dev] GDAL question
In-Reply-To: <1619171684233-0.post@n6.nabble.com>
References: <CAFY+pqnHtXUBMXEK9p+-QG3qoyF6fWUxJrfpJvO-fos9L3qsxw@mail.gmail.com>
 <1618932348826-0.post@n6.nabble.com> <1618997599910-0.post@n6.nabble.com>
 <1619001200374-0.post@n6.nabble.com> <1619171684233-0.post@n6.nabble.com>
Message-ID: <1619187669620-0.post@n6.nabble.com>

Hi,

You can't update with ogr2ogr. Use ogrinfo instead. I believe that you will
find good examples from gis.stackexchange
https://gis.stackexchange.com/search?q=ogrinfo+update

-Jukka Rahkonen-


Peter P wrote
> It is works, Thanks
> 
> Now I trying update row.
> In SQL will be: /UPDATE "table1" SET "TestGeometry"=.... WHERE "Name" =
> 'testname'/
> How is this possible in ogr2ogr? I use -update, -append not work... 





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From schut at satelligence.com  Fri Apr 23 07:30:16 2021
From: schut at satelligence.com (Vincent Schut)
Date: Fri, 23 Apr 2021 16:30:16 +0200
Subject: [gdal-dev] how to use tiledb datasets on gcs?
In-Reply-To: <7eb80e57-8040-73cc-fdf9-0c6074631ad1@spatialys.com>
References: <05a1d396-d242-5c0f-3dd8-532f95d22dcc@satelligence.com>
 <102d2637-7f76-f4ac-02e4-8a056d6ed6c9@satelligence.com>
 <97f29146-ffaa-9d6e-cd8e-9121c089d6b8@spatialys.com>
 <8c9d4fde-b2f2-da13-0de1-a6546736953b@satelligence.com>
 <CADPhZXythax5J6bzURc+H6Nq=5-N3hQCm=B3C1mptOWxzonBzg@mail.gmail.com>
 <7eb80e57-8040-73cc-fdf9-0c6074631ad1@spatialys.com>
Message-ID: <71d2bff1-2f3a-62eb-994d-317b6302a6e4@satelligence.com>

Even's understanding is correct. I've made a small PR to add this 
functionality: https://github.com/OSGeo/gdal/pull/3728. I'm not an 
experienced c++ programmer, so I hope I've done things the right way. At 
least it works here.

Let's move the rest of the discussion - if any - to the PR.

Vincent.

On 4/23/21 4:20 PM, Even Rouault wrote:
>
> Sean,
>
> my understanding of the commit is that internally the tiledb SDK 
> handles cloud storage by itself (ie not relying on GDAL virtual file 
> systems) and using s3:// / gcs:// naming conventions, and the purpose 
> of the below referenced commit is, for the GDALOpen() code path, to 
> remap /vsis3/ to s3:// , since that's what tiledb SDK expects. But 
> Norman might better comment on.
>
> Even
>
> Le 23/04/2021 ? 16:14, Sean Gillies a ?crit?:
>> Hi Vincent, Even.
>>
>> Why would we do this when /vsigcs/... should work? Letting individual 
>> drivers set their own conventions for dataset names seems, to me, to 
>> hurt long-term maintenance and interoperability.
>>
>> On Fri, Apr 23, 2021 at 7:34 AM Vincent Schut <schut at satelligence.com 
>> <mailto:schut at satelligence.com>> wrote:
>>
>>     Thanks for confirming, Even. That doesn't look too difficult.
>>     I'll give it a try.
>>
>>     On 4/23/21 3:09 PM, Even Rouault wrote:
>>>
>>>     I guess you should add something similar to
>>>     https://github.com/OSGeo/gdal/commit/3623f9c91a2c513af204d30fe25314dbe5c7b9be
>>>     <https://github.com/OSGeo/gdal/commit/3623f9c91a2c513af204d30fe25314dbe5c7b9be>
>>>     for /vsigs
>>>
>>>     Le 23/04/2021 ? 14:59, Vincent Schut a ?crit?:
>>>>     On 4/23/21 2:17 PM, Vincent Schut wrote:
>>>>>     Hi, how should I specify a tiledb dataset's url that resides
>>>>>     on gcs (google cloud storage) to gdal? I've tried several
>>>>>     combinations of gcs://, /vsigs/, prefixed with TILEDB:// or
>>>>>     not, but no luck. I've looked in the driver source, and
>>>>>     apparently there is only a /vsis3/ -> tiledb uri translation,
>>>>>     but no equivalent gcs one?
>>>>>
>>>>     To clarify this a bit: writing works:
>>>>
>>>>     gdal_translate -of tiledb -co COMPRESSION=ZSTD
>>>>     S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tif
>>>>     gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb
>>>>
>>>>     and the file is correctly created in the bucket. However, when
>>>>     I want to open it, it fails:
>>>>
>>>>     gdalinfo -if tiledb
>>>>     gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb
>>>>     ERROR 4:
>>>>     gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb:
>>>>     No such file or directory
>>>>     gdalinfo failed - unable to open
>>>>     'gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb'.
>>>>
>>>>     Is there any way to correctly specify this tiledb url on gcs
>>>>     for gdal?
>>>>
>>>>     Vincent.
>>
>> -- 
>> Sean Gillies
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.

-- 

	

Vincent Schut

Remote Sensing Software Engineer

+31 302272679 ~ Maliebaan 22 | 3581CP | Utrecht | Netherlands

Linkedin <https://www.linkedin.com/company/satelligence/>~ 
satelligence.com <http://www.satelligence.com><http://www.satelligence.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210423/97d6e25d/attachment.html>

From changliao.climate at gmail.com  Fri Apr 23 08:58:08 2021
From: changliao.climate at gmail.com (Chang Liao)
Date: Fri, 23 Apr 2021 09:58:08 -0600
Subject: [gdal-dev] Python GDAL split polyline by intersection
Message-ID: <CAOkqVM2ir-B-6tKzpSShbruPPHv-ervP9=iZ86oaGbnZ_Tg1aw@mail.gmail.com>

Hi, GDALers,

I have a GDAL Python API question, i want to find some function similar to
the ArcGIS tool:
https://desktop.arcgis.com/en/arcmap/10.3/manage-data/editing-existing-features/splitting-lines-at-intersections.htm

But it seems there is no such existing function ready for use. I put some
details of the question on the GIS stackexchange here:
https://gis.stackexchange.com/questions/394732/python-gdal-split-polyline-by-intersection
Can anyone provide some suggestions?

Thank you!

Best Regards!


*Chang Liao, PhD*
*Earth Scientist, Atmospheric Sciences & Global Change Division*
*Pacific Northwest National Laboratory, WA, USA.*
*Email: changliao.climate at gmail.com <changliao.climate at gmail.com>  or
 chang.liao at pnnl.gov <chang.liao at pnnl.gov>*
*Personal Website: https://www.changliao.us <https://www.changliao.us/>*
*Lab Website: www.pnnl.gov
<https://www.pnnl.gov/science/staff/staff_info.asp?staff_num=9326>*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210423/a27ea7e4/attachment.html>

From HonZhu at clarku.edu  Fri Apr 23 08:59:32 2021
From: HonZhu at clarku.edu (Hongmei Zhu)
Date: Fri, 23 Apr 2021 15:59:32 +0000
Subject: [gdal-dev] How to incorporate driver updates into GDAL?
Message-ID: <MN2PR03MB523234B014F5ACC9183FEE96AC459@MN2PR03MB5232.namprd03.prod.outlook.com>

Hi all,

I join the mailing list just now to ask a question for help.

IDRISI driver in GDAL doesn't support Cylindrical Equal Area (CEA) so far. Since IDRISI GIS software has added the CEA to its supported reference system, the GDAL IDRISI driver needs to be updated. So, I added the support of CEA in the driver, and we have tested it within IDRISI in Clark Labs, and it passed all tests. Now I want to incorporate the updated version into GDAL. How to do that? Can I send it to Even Rouault? That was the way I did before -- I directly sent the code to Frank Warmerdam when I updated it a few years ago.

Thank you very much for any help.

Hongmei
GIS developer at Clark Labs
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210423/d387368d/attachment-0001.html>

From even.rouault at spatialys.com  Fri Apr 23 09:05:13 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 23 Apr 2021 18:05:13 +0200
Subject: [gdal-dev] How to incorporate driver updates into GDAL?
In-Reply-To: <MN2PR03MB523234B014F5ACC9183FEE96AC459@MN2PR03MB5232.namprd03.prod.outlook.com>
References: <MN2PR03MB523234B014F5ACC9183FEE96AC459@MN2PR03MB5232.namprd03.prod.outlook.com>
Message-ID: <90d1db88-2515-fa30-bd5a-1e33b1c745f5@spatialys.com>

Hongmei,

GDAL has now been using github as its main way for code contributions 
since a few years.

Please fork https://github.com/OSGeo/gdal/ , apply your modifications to 
your clone and submit them as a pull request

A few hints are 
athttps://github.com/OSGeo/gdal/blob/master/CONTRIBUTING.md but if 
you're not familiar with the git / github way, you may need to consult a 
few generic tutorials about this workflow.

Best regards,

Even

Le 23/04/2021 ? 17:59, Hongmei Zhu a ?crit?:
> Hi all,
>
> I join the mailing list just now to ask a question for help.
>
> IDRISI driver in GDAL doesn't support Cylindrical Equal Area (CEA) so 
> far. Since IDRISI GIS software has added the CEA to its supported 
> reference system, the GDAL IDRISI driver needs to be updated. So, I 
> added the support of CEA in the driver, and we have tested it within 
> IDRISI in Clark Labs, and it passed all tests.?Now I want to 
> incorporate the updated version into GDAL. How to do that? Can I send 
> it to Even Rouault? That was the way I did before -- I?directly sent 
> the code to Frank Warmerdam when I updated it a few years ago.
>
> Thank you very much for any help.
>
> Hongmei
> GIS developer at Clark Labs
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210423/b60e28ed/attachment.html>

From ivan.lucena at outlook.com  Fri Apr 23 09:16:42 2021
From: ivan.lucena at outlook.com (Ivan Lucena)
Date: Fri, 23 Apr 2021 16:16:42 +0000
Subject: [gdal-dev] How to incorporate driver updates into GDAL?
In-Reply-To: <90d1db88-2515-fa30-bd5a-1e33b1c745f5@spatialys.com>
References: <MN2PR03MB523234B014F5ACC9183FEE96AC459@MN2PR03MB5232.namprd03.prod.outlook.com>,
 <90d1db88-2515-fa30-bd5a-1e33b1c745f5@spatialys.com>
Message-ID: <MN2PR04MB5693731E3A4BFFC4D9C0B845F2459@MN2PR04MB5693.namprd04.prod.outlook.com>

Hi Hongmei,

I am the original author of the RST driver. I can help if you need.

Regards,
Ivan
________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Even Rouault <even.rouault at spatialys.com>
Sent: Friday, April 23, 2021 12:05 PM
To: Hongmei Zhu <HonZhu at clarku.edu>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] How to incorporate driver updates into GDAL?


Hongmei,

GDAL has now been using github as its main way for code contributions since a few years.

Please fork https://github.com/OSGeo/gdal/ , apply your modifications to your clone and submit them as a pull request

A few hints are  athttps://github.com/OSGeo/gdal/blob/master/CONTRIBUTING.md but if you're not familiar with the git / github way, you may need to consult a few generic tutorials about this workflow.

Best regards,

Even

Le 23/04/2021 ? 17:59, Hongmei Zhu a ?crit :
Hi all,

I join the mailing list just now to ask a question for help.

IDRISI driver in GDAL doesn't support Cylindrical Equal Area (CEA) so far. Since IDRISI GIS software has added the CEA to its supported reference system, the GDAL IDRISI driver needs to be updated. So, I added the support of CEA in the driver, and we have tested it within IDRISI in Clark Labs, and it passed all tests. Now I want to incorporate the updated version into GDAL. How to do that? Can I send it to Even Rouault? That was the way I did before -- I directly sent the code to Frank Warmerdam when I updated it a few years ago.

Thank you very much for any help.

Hongmei
GIS developer at Clark Labs



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210423/508def7d/attachment.html>

From patrick.mckendree.young at gmail.com  Fri Apr 23 11:25:21 2021
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Fri, 23 Apr 2021 12:25:21 -0600
Subject: [gdal-dev] Python GDAL split polyline by intersection
In-Reply-To: <CAOkqVM2ir-B-6tKzpSShbruPPHv-ervP9=iZ86oaGbnZ_Tg1aw@mail.gmail.com>
References: <CAOkqVM2ir-B-6tKzpSShbruPPHv-ervP9=iZ86oaGbnZ_Tg1aw@mail.gmail.com>
Message-ID: <CADXYQQ7H_PBhsZD8Xt9yXg6CieUO-UKegkE=W8YqEuaY2JHs3A@mail.gmail.com>

You might check out the Python library Shapely (which wraps GEOS), it has a
split method in it:

https://shapely.readthedocs.io/en/stable/manual.html#splitting

P

On Fri, Apr 23, 2021 at 9:59 AM Chang Liao <changliao.climate at gmail.com>
wrote:

> Hi, GDALers,
>
> I have a GDAL Python API question, i want to find some function similar to
> the ArcGIS tool:
>
> https://desktop.arcgis.com/en/arcmap/10.3/manage-data/editing-existing-features/splitting-lines-at-intersections.htm
>
> But it seems there is no such existing function ready for use. I put some
> details of the question on the GIS stackexchange here:
>
> https://gis.stackexchange.com/questions/394732/python-gdal-split-polyline-by-intersection
> Can anyone provide some suggestions?
>
> Thank you!
>
> Best Regards!
>
>
> *Chang Liao, PhD*
> *Earth Scientist, Atmospheric Sciences & Global Change Division*
> *Pacific Northwest National Laboratory, WA, USA.*
> *Email: changliao.climate at gmail.com <changliao.climate at gmail.com>  or
>  chang.liao at pnnl.gov <chang.liao at pnnl.gov>*
> *Personal Website: https://www.changliao.us <https://www.changliao.us/>*
> *Lab Website: www.pnnl.gov
> <https://www.pnnl.gov/science/staff/staff_info.asp?staff_num=9326>*
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210423/7e6eacfa/attachment.html>

From norman.barker at gmail.com  Fri Apr 23 12:40:36 2021
From: norman.barker at gmail.com (Norman Barker)
Date: Fri, 23 Apr 2021 14:40:36 -0500
Subject: [gdal-dev] how to use tiledb datasets on gcs?
In-Reply-To: <71d2bff1-2f3a-62eb-994d-317b6302a6e4@satelligence.com>
References: <05a1d396-d242-5c0f-3dd8-532f95d22dcc@satelligence.com>
 <102d2637-7f76-f4ac-02e4-8a056d6ed6c9@satelligence.com>
 <97f29146-ffaa-9d6e-cd8e-9121c089d6b8@spatialys.com>
 <8c9d4fde-b2f2-da13-0de1-a6546736953b@satelligence.com>
 <CADPhZXythax5J6bzURc+H6Nq=5-N3hQCm=B3C1mptOWxzonBzg@mail.gmail.com>
 <7eb80e57-8040-73cc-fdf9-0c6074631ad1@spatialys.com>
 <71d2bff1-2f3a-62eb-994d-317b6302a6e4@satelligence.com>
Message-ID: <CAN_Dn-H5o84ZdXC9F=_zCkZMY94UpYEaV7-k7apTwnEZLX5p=Q@mail.gmail.com>

Yes, internally the GDAL TileDB driver remaps vsis3 requests to s3 requests
within the TileDB library. To a user the vsi notation still works the same.

I will look over the PR, thanks Vincent!

Norman


On Fri, Apr 23, 2021 at 9:30 AM Vincent Schut <schut at satelligence.com>
wrote:

> Even's understanding is correct. I've made a small PR to add this
> functionality: https://github.com/OSGeo/gdal/pull/3728. I'm not an
> experienced c++ programmer, so I hope I've done things the right way. At
> least it works here.
>
> Let's move the rest of the discussion - if any - to the PR.
>
> Vincent.
>
> On 4/23/21 4:20 PM, Even Rouault wrote:
>
> Sean,
>
> my understanding of the commit is that internally the tiledb SDK handles
> cloud storage by itself (ie not relying on GDAL virtual file systems) and
> using s3:// / gcs:// naming conventions, and the purpose of the below
> referenced commit is, for the GDALOpen() code path, to remap /vsis3/ to
> s3:// , since that's what tiledb SDK expects. But Norman might better
> comment on.
>
> Even
> Le 23/04/2021 ? 16:14, Sean Gillies a ?crit :
>
> Hi Vincent, Even.
>
> Why would we do this when /vsigcs/... should work? Letting individual
> drivers set their own conventions for dataset names seems, to me, to hurt
> long-term maintenance and interoperability.
>
> On Fri, Apr 23, 2021 at 7:34 AM Vincent Schut <schut at satelligence.com>
> wrote:
>
>> Thanks for confirming, Even. That doesn't look too difficult. I'll give
>> it a try.
>>
>> On 4/23/21 3:09 PM, Even Rouault wrote:
>>
>> I guess you should add something similar to
>> https://github.com/OSGeo/gdal/commit/3623f9c91a2c513af204d30fe25314dbe5c7b9be
>> for /vsigs
>> Le 23/04/2021 ? 14:59, Vincent Schut a ?crit :
>>
>> On 4/23/21 2:17 PM, Vincent Schut wrote:
>>
>> Hi, how should I specify a tiledb dataset's url that resides on gcs
>> (google cloud storage) to gdal? I've tried several combinations of gcs://,
>> /vsigs/, prefixed with TILEDB:// or not, but no luck. I've looked in the
>> driver source, and apparently there is only a /vsis3/ -> tiledb uri
>> translation, but no equivalent gcs one?
>>
>> To clarify this a bit: writing works:
>>
>> gdal_translate -of tiledb -co COMPRESSION=ZSTD
>> S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tif
>> gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb
>>
>> and the file is correctly created in the bucket. However, when I want to
>> open it, it fails:
>>
>> gdalinfo -if tiledb
>> gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb
>> ERROR 4:
>> gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb:
>> No such file or directory
>> gdalinfo failed - unable to open
>> 'gcs://s11-dev-vincent-tiledb-test-public/S2B_MSIL1C_20210227T032659_N0209_R018_T47MQV_20210227T072433.tiledb'.
>>
>> Is there any way to correctly specify this tiledb url on gcs for gdal?
>>
>> Vincent.
>>
>> --
> Sean Gillies
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
> --
>
> Vincent Schut
>
> Remote Sensing Software Engineer
>
> +31 302272679 ~ Maliebaan 22 | 3581CP | Utrecht | Netherlands
> Linkedin <https://www.linkedin.com/company/satelligence/> ~
> satelligence.com <http://www.satelligence.com>
> <http://www.satelligence.com>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210423/f56c5ed1/attachment.html>

From rlelamer at hotmail.fr  Fri Apr 23 17:00:17 2021
From: rlelamer at hotmail.fr (Hotmail)
Date: Sat, 24 Apr 2021 02:00:17 +0200
Subject: [gdal-dev] Modify original ColorTable in VRT & TIFF files
In-Reply-To: <ea707a59c8d8bd7b8af5443f653dabe5@blixtmail.se>
References: <0fccc165ebc77c6598830816f36fcce5@blixtmail.se>
 <PR3P193MB050721FAA4CE41341D97993BB6469@PR3P193MB0507.EURP193.PROD.OUTLOOK.COM>
 <ea707a59c8d8bd7b8af5443f653dabe5@blixtmail.se>
Message-ID: <PR3P193MB0507F5FDFAF90DF86EC3822DB6449@PR3P193MB0507.EURP193.PROD.OUTLOOK.COM>

Hi Lars,
Thanks a lot for the tip with sed, it works fine.

> sed -i '/<Metadata domain="IMAGE_STRUCTURE">/,/<\/Metadata>/d; /<Entry c1="0" c2="0" c3="0" c4="255" \/>/,/<Entry c1="255" c2="255" c3="255" c4="255" \/>/d; /<ColorTable>/r COLORTABLE.txt' $F_VRT

> Le 23 avr. 2021 ? 11:31, lars.schylberg at blixtmail.se a ?crit :
> 
> Hi again,
> 
> Some other tricks.  To extract the color table from a PNG I often use pngcheck.
> 
> pngcheck -p /data/tests/500K_large_pct.png \
> | sed '1,2d' \
> | awk 'NR < 257' \
> | sed 's/[=].*$//' \
> | sed 's/[(:)]//g' \
> | sed 's/,/ /g' \
> | sed 's/...//' > color.txt
> 
> 
> You could add an extra print command if you want to write it in other format:
> | awk -F, '{printf "%d,%d,%d,255\n", $1, $2, $3}'
> 
> To assemble a vrt and a tif I have used gdalbuildvrt command with the argument "-separate".
> You get a new vrt that You then convert with gdal_translate.
> 
> Have fun / Lars Schylberg
> 
> 
> 22 april 2021 kl. 22:50, lars.schylberg at blixtmail.se skrev:
> 
>> Hi, 
>> 
>> I had to deal a lot with palette tiff images a couple of years ago.
>> 
>> What I did was that edited the vrt files with sed inline editing:
>> 
>> Some examples:
>> 
>> Insert a text file after the row that is: /VRTRasterBand dataType="Byte" band="1" The inserted file
>> here is orig_colortable_vrt.txt:
>> 
>> sed -i -e '/VRTRasterBand dataType="Byte" band="1"/r orig_colortable_vrt.txt' image_6.vrt
>> 
>> Remove a certain line that contains "NoDataValue"
>> 
>> sed -i -e '/NoDataValue/d' image_6.vrt
>> 
>> There a also a sed commands to delete certain rows. Just read many sed examples.
>> 
>> Have fun / Lars Schylberg
>> 
>> 22 april 2021 kl. 20:25, "Hotmail" <rlelamer at hotmail.fr> skrev:
>> 
>>> Hi all,
>>> 
>>> I'm looking to modify the original ColorTable, when georeferencing, PNG => gdal_translate +
>>> gdalwarp => TIFF.
>>> 
>>>> gdal_translate -of VRT -a_srs EPSG:4326 file_png file_vrt -a_ullr xxxx
>>>> gdalwarp -s_srs EPSG:4326 -t_srs EPSG:3857 file_vrt file_tiff
>>> 
>>> If I open the VRT file and do the edit manually, the output TIFF file is correct.
>>> The problem is that I have 524288 files ... so I would like to do the modification automatically,
>>> via gdal_translate.
>>> But I don't quite understand using the parameters of the command ...
>>> 
>>> ? Original VRT & TIFF files
>>> 
>>> # VRT
>>> <VRTRasterBand dataType="Byte" band="1">
>>> <ColorInterp>Palette</ColorInterp>
>>> <ColorTable>
>>> <Entry c1="0" c2="0" c3="255" c4="255" />
>>> <Entry c1="255" c2="255" c3="255" c4="255" />
>>> <Entry c1="0" c2="0" c3="0" c4="255" />
>>> [...]
>>> <Entry c1="0" c2="0" c3="0" c4="255" />
>>> </ColorTable>
>>> </VRTRasterBand>
>>> 
>>> # TIFF
>>> Band 1 Block=63153x1 Type=Byte, ColorInterp=Palette
>>> Color Table (RGB with 256 entries)
>>> 0: 0,0,0,255
>>> 1: 255,255,255,255
>>> 2: 0,0,0,255
>>> [...]
>>> 255: 0,0,0,255
>>> 
>>> I want this :
>>> ? Modified VRT and TIFF files
>>> 
>>> # VRT
>>> <VRTRasterBand dataType="Byte" band="1">
>>> <ColorInterp>Palette</ColorInterp>
>>> <ColorTable>
>>> <Entry c1="0" c2="0" c3="255" c4="255" />
>>> <Entry c1="0" c2="255" c3="0" c4="255" />
>>> <Entry c1="255" c2="0" c3="0" c4="255" />
>>> [...]
>>> <Entry c1="255" c2="0" c3="0" c4="255" />
>>> </ColorTable>
>>> </VRTRasterBand>
>>> 
>>> # TIFF
>>> Band 1 Block=63153x1 Type=Byte, ColorInterp=Palette
>>> Color Table (RGB with 256 entries)
>>> 0: 0,0,255,255
>>> 1: 0,255,0,255
>>> 2: 255,0,0,255
>>> [...]
>>> 255: 255,0,0,255
>>> 
>>> Whatever I find, redirects me to gdaldem (which I can't use). In gdal_translate, it seems to me
>>> that the parameter -colorinterp_X might be suitable
>>> but I can't find any concrete examples (or I have not looked in the right place).
>>> 
>>> I want to impose the following parameters:
>>> Band 1
>>> Type = Byte
>>> ColorInterp = Palette
>>> Color Table (RGB with 256 entries)
>>> 
>>> In ColorTable:
>>> Entry 0 = 0,0,255,255
>>> Entry 1 = 0,255,0,255
>>> Entries 2 to 255 = 255,0,0,255
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From gdt at lexort.com  Sat Apr 24 07:39:00 2021
From: gdt at lexort.com (Greg Troxel)
Date: Sat, 24 Apr 2021 10:39:00 -0400
Subject: [gdal-dev] GDAL 3.3.0beta1 available
In-Reply-To: <aacb98b9-ea44-ac13-7f89-1199f6e63cb1@spatialys.com> (Even
 Rouault's message of "Mon, 19 Apr 2021 15:07:16 +0200")
References: <aacb98b9-ea44-ac13-7f89-1199f6e63cb1@spatialys.com>
Message-ID: <rmimttniw6z.fsf@s1.lexort.com>


Even Rouault <even.rouault at spatialys.com> writes:

> - http://download.osgeo.org/gdal/3.3.0/gdal-3.3.0beta1.tar.gz

The tl;dr is:

  - I'm seeing bad transforms NAD83/ITRF with 3.3.0beta1 but I do not
    have any basis to blame 3.3.0 because a lot of other things are in
    flux.

  - If you are using 3.3.0beta1 and transforms I suggest looking at your
    output data.



I have noticed a problem but I have little idea where it is.  I will be
looking into it myself but I wanted to mention it so that others could
be on the lookout.

Besides updating to gdal, I'm doing a general software freshening and
rebuilding lots of things, but aside from the gdal beta my geo packages
haven't changed versions.  I have proj 6.3.2 with installed grids, which
was just rebuilt.

The background is that I'm mostly working in EPSG:6319 which is
NAD83(2011).

I transform to EPSG:7912 which is ITRF2014 to display the data on
leaflet webmaps (as a proxy for WGS84 to avoid null transforms).

I noticed that my points on the webmap were very far off, displaced very
roughly 35m ESE.  I then put an NAD83 version in the webspace, and that
made things look ok (with the ~1 meter error from treating NAD83 and
ITRF2014 as equal, surely).

I'm extracting things from a geopackage in 6319 like

    ogr2ogr -f GeoJSON -t_srs "EPSG:7912" -s_srs "EPSG:6319" FOO/issues.geojson foo.gpkg issues
    ogr2ogr -f GeoJSON -t_srs "EPSG:6319" -s_srs "EPSG:6319" FOO/issues-nad83.geojson foo.gpkg issues

which has previously been fine.  I'm definitely getting very large
offsets from two files extracted seconds apart from the very same
geopackage.

So this is not a request for help, but if you are using ogr2ogr to
transform datums, and you are using gdal 3.3.0beta1 especially with proj
6, I'd suggest a quick look at your output data to see if it seems ok.

I will be retesting after all the software rebuilds are done, and
rolling back to released gdal.  (Yes, I know proj 6.3 is old and that I
should update.)

Thanks,
Greg
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210424/a348e74d/attachment-0001.sig>

From even.rouault at spatialys.com  Sat Apr 24 07:58:05 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 24 Apr 2021 16:58:05 +0200
Subject: [gdal-dev] GDAL 3.3.0beta1 available
In-Reply-To: <rmimttniw6z.fsf@s1.lexort.com>
References: <aacb98b9-ea44-ac13-7f89-1199f6e63cb1@spatialys.com>
 <rmimttniw6z.fsf@s1.lexort.com>
Message-ID: <ae0d0f97-b0b9-17d1-7a25-7cccdd5c0e4a@spatialys.com>

Greg,

There's a high chance for this to be completely PROJ behavior. GDAL 
hardly knows about CRS those days :-)

Could you share your input and output files ?

Also set CPL_DEBUG=PROJ and PROJ_DEBUG=2 as environment variables to see 
which transformations PROJ pickup : look for lines starting with "PROJ: 
Using coordinate operation ..."

With latest PROJ master (and also 6.3.2), I see that

projinfo -s EPSG:6319 -t EPSG:7912 -o PROJ

Candidate operations found: 1
-------------------------------------
Operation No. 1:

unknown id, Conversion from NAD83(2011) (geog3D) to NAD83(2011) 
(geocentric) + Inverse of ITRF2014 to NAD83(2011) (1) + Conversion from 
ITRF2014 (geocentric) to ITRF2014 (geog3D), 0 m, Puerto Rico - onshore 
and offshore. United States (USA) onshore and offshore - Alabama; 
Alaska; Arizona; Arkansas; California; Colorado; Connecticut; Delaware; 
Florida; Georgia; Idaho; Illinois; Indiana; Iowa; Kansas; Kentucky; 
Louisiana; Maine; Maryland; Massachusetts; Michigan; Minnesota; 
Mississippi; Missouri; Montana; Nebraska; Nevada; New Hampshire; New 
Jersey; New Mexico; New York; North Carolina; North Dakota; Ohio; 
Oklahoma; Oregon; Pennsylvania; Rhode Island; South Carolina; South 
Dakota; Tennessee; Texas; Utah; Vermont; Virginia; Washington; West 
Virginia; Wisconsin; Wyoming. US Virgin Islands - onshore and offshore.

PROJ string:
+proj=pipeline
 ? +step +proj=axisswap +order=2,1
 ? +step +proj=unitconvert +xy_in=deg +z_in=m +xy_out=rad +z_out=m
 ? +step +proj=cart +ellps=GRS80
 ? +step +inv +proj=helmert +x=1.0053 +y=-1.9092 +z=-0.5416 +rx=0.0267814
 ??????? +ry=-0.0004203 +rz=0.0109321 +s=0.00037 +dx=0.0008 +dy=-0.0006
 ??????? +dz=-0.0014 +drx=6.67e-05 +dry=-0.0007574 +drz=-5.13e-05 +ds=-7e-05
 ??????? +t_epoch=2010 +convention=coordinate_frame
 ? +step +inv +proj=cart +ellps=GRS80
 ? +step +proj=unitconvert +xy_in=rad +z_in=m +xy_out=deg +z_out=m
 ? +step +proj=axisswap +order=2,1

So it applies a time-dependent Helmert transformation, which has also 
non-time dependent terms.

However trying a bit, the transformation seems to introduce a shift of 
about ~1 m or so, not 35 m

$ echo 50 -100 0 | cs2cs -d 8 EPSG:6319 EPSG:7912
50.00000754??? -100.00001400 -0.68652183

$ echo 50 -100 50.00000754 -100.00001400 | geod -I +ellps=GRS80
-50d7'11.377"??? 129d52'48.584"??? 1.308

Even

Le 24/04/2021 ? 16:39, Greg Troxel a ?crit?:
> Even Rouault <even.rouault at spatialys.com> writes:
>
>> - http://download.osgeo.org/gdal/3.3.0/gdal-3.3.0beta1.tar.gz
> The tl;dr is:
>
>    - I'm seeing bad transforms NAD83/ITRF with 3.3.0beta1 but I do not
>      have any basis to blame 3.3.0 because a lot of other things are in
>      flux.
>
>    - If you are using 3.3.0beta1 and transforms I suggest looking at your
>      output data.
>
>
>
> I have noticed a problem but I have little idea where it is.  I will be
> looking into it myself but I wanted to mention it so that others could
> be on the lookout.
>
> Besides updating to gdal, I'm doing a general software freshening and
> rebuilding lots of things, but aside from the gdal beta my geo packages
> haven't changed versions.  I have proj 6.3.2 with installed grids, which
> was just rebuilt.
>
> The background is that I'm mostly working in EPSG:6319 which is
> NAD83(2011).
>
> I transform to EPSG:7912 which is ITRF2014 to display the data on
> leaflet webmaps (as a proxy for WGS84 to avoid null transforms).
>
> I noticed that my points on the webmap were very far off, displaced very
> roughly 35m ESE.  I then put an NAD83 version in the webspace, and that
> made things look ok (with the ~1 meter error from treating NAD83 and
> ITRF2014 as equal, surely).
>
> I'm extracting things from a geopackage in 6319 like
>
>      ogr2ogr -f GeoJSON -t_srs "EPSG:7912" -s_srs "EPSG:6319" FOO/issues.geojson foo.gpkg issues
>      ogr2ogr -f GeoJSON -t_srs "EPSG:6319" -s_srs "EPSG:6319" FOO/issues-nad83.geojson foo.gpkg issues
>
> which has previously been fine.  I'm definitely getting very large
> offsets from two files extracted seconds apart from the very same
> geopackage.
>
> So this is not a request for help, but if you are using ogr2ogr to
> transform datums, and you are using gdal 3.3.0beta1 especially with proj
> 6, I'd suggest a quick look at your output data to see if it seems ok.
>
> I will be retesting after all the software rebuilds are done, and
> rolling back to released gdal.  (Yes, I know proj 6.3 is old and that I
> should update.)
>
> Thanks,
> Greg

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From j1 at jimenezshaw.com  Sat Apr 24 08:13:39 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Sat, 24 Apr 2021 17:13:39 +0200
Subject: [gdal-dev] GDAL 3.3.0beta1 available
In-Reply-To: <ae0d0f97-b0b9-17d1-7a25-7cccdd5c0e4a@spatialys.com>
References: <aacb98b9-ea44-ac13-7f89-1199f6e63cb1@spatialys.com>
 <rmimttniw6z.fsf@s1.lexort.com>
 <ae0d0f97-b0b9-17d1-7a25-7cccdd5c0e4a@spatialys.com>
Message-ID: <CADRrdKv84QbbYFWanAE4QoYsrEzu8gxKTZZ4QoYpEcpgQn=vVA@mail.gmail.com>

Just one idea: which time is setting GDAL (and/or PROJ understanding) on
the transformation if nothing is specified? Is it the same as in cs2cs?
That transformation is time dependent.
I read somewhere that the "default" value is not the same (but my memory is
not very reliable).

Cheers.
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Sat, 24 Apr 2021 at 16:58, Even Rouault <even.rouault at spatialys.com>
wrote:

> Greg,
>
> There's a high chance for this to be completely PROJ behavior. GDAL
> hardly knows about CRS those days :-)
>
> Could you share your input and output files ?
>
> Also set CPL_DEBUG=PROJ and PROJ_DEBUG=2 as environment variables to see
> which transformations PROJ pickup : look for lines starting with "PROJ:
> Using coordinate operation ..."
>
> With latest PROJ master (and also 6.3.2), I see that
>
> projinfo -s EPSG:6319 -t EPSG:7912 -o PROJ
>
> Candidate operations found: 1
> -------------------------------------
> Operation No. 1:
>
> unknown id, Conversion from NAD83(2011) (geog3D) to NAD83(2011)
> (geocentric) + Inverse of ITRF2014 to NAD83(2011) (1) + Conversion from
> ITRF2014 (geocentric) to ITRF2014 (geog3D), 0 m, Puerto Rico - onshore
> and offshore. United States (USA) onshore and offshore - Alabama;
> Alaska; Arizona; Arkansas; California; Colorado; Connecticut; Delaware;
> Florida; Georgia; Idaho; Illinois; Indiana; Iowa; Kansas; Kentucky;
> Louisiana; Maine; Maryland; Massachusetts; Michigan; Minnesota;
> Mississippi; Missouri; Montana; Nebraska; Nevada; New Hampshire; New
> Jersey; New Mexico; New York; North Carolina; North Dakota; Ohio;
> Oklahoma; Oregon; Pennsylvania; Rhode Island; South Carolina; South
> Dakota; Tennessee; Texas; Utah; Vermont; Virginia; Washington; West
> Virginia; Wisconsin; Wyoming. US Virgin Islands - onshore and offshore.
>
> PROJ string:
> +proj=pipeline
>    +step +proj=axisswap +order=2,1
>    +step +proj=unitconvert +xy_in=deg +z_in=m +xy_out=rad +z_out=m
>    +step +proj=cart +ellps=GRS80
>    +step +inv +proj=helmert +x=1.0053 +y=-1.9092 +z=-0.5416 +rx=0.0267814
>          +ry=-0.0004203 +rz=0.0109321 +s=0.00037 +dx=0.0008 +dy=-0.0006
>          +dz=-0.0014 +drx=6.67e-05 +dry=-0.0007574 +drz=-5.13e-05
> +ds=-7e-05
>          +t_epoch=2010 +convention=coordinate_frame
>    +step +inv +proj=cart +ellps=GRS80
>    +step +proj=unitconvert +xy_in=rad +z_in=m +xy_out=deg +z_out=m
>    +step +proj=axisswap +order=2,1
>
> So it applies a time-dependent Helmert transformation, which has also
> non-time dependent terms.
>
> However trying a bit, the transformation seems to introduce a shift of
> about ~1 m or so, not 35 m
>
> $ echo 50 -100 0 | cs2cs -d 8 EPSG:6319 EPSG:7912
> 50.00000754    -100.00001400 -0.68652183
>
> $ echo 50 -100 50.00000754 -100.00001400 | geod -I +ellps=GRS80
> -50d7'11.377"    129d52'48.584"    1.308
>
> Even
>
> Le 24/04/2021 ? 16:39, Greg Troxel a ?crit :
> > Even Rouault <even.rouault at spatialys.com> writes:
> >
> >> - http://download.osgeo.org/gdal/3.3.0/gdal-3.3.0beta1.tar.gz
> > The tl;dr is:
> >
> >    - I'm seeing bad transforms NAD83/ITRF with 3.3.0beta1 but I do not
> >      have any basis to blame 3.3.0 because a lot of other things are in
> >      flux.
> >
> >    - If you are using 3.3.0beta1 and transforms I suggest looking at your
> >      output data.
> >
> >
> >
> > I have noticed a problem but I have little idea where it is.  I will be
> > looking into it myself but I wanted to mention it so that others could
> > be on the lookout.
> >
> > Besides updating to gdal, I'm doing a general software freshening and
> > rebuilding lots of things, but aside from the gdal beta my geo packages
> > haven't changed versions.  I have proj 6.3.2 with installed grids, which
> > was just rebuilt.
> >
> > The background is that I'm mostly working in EPSG:6319 which is
> > NAD83(2011).
> >
> > I transform to EPSG:7912 which is ITRF2014 to display the data on
> > leaflet webmaps (as a proxy for WGS84 to avoid null transforms).
> >
> > I noticed that my points on the webmap were very far off, displaced very
> > roughly 35m ESE.  I then put an NAD83 version in the webspace, and that
> > made things look ok (with the ~1 meter error from treating NAD83 and
> > ITRF2014 as equal, surely).
> >
> > I'm extracting things from a geopackage in 6319 like
> >
> >      ogr2ogr -f GeoJSON -t_srs "EPSG:7912" -s_srs "EPSG:6319"
> FOO/issues.geojson foo.gpkg issues
> >      ogr2ogr -f GeoJSON -t_srs "EPSG:6319" -s_srs "EPSG:6319"
> FOO/issues-nad83.geojson foo.gpkg issues
> >
> > which has previously been fine.  I'm definitely getting very large
> > offsets from two files extracted seconds apart from the very same
> > geopackage.
> >
> > So this is not a request for help, but if you are using ogr2ogr to
> > transform datums, and you are using gdal 3.3.0beta1 especially with proj
> > 6, I'd suggest a quick look at your output data to see if it seems ok.
> >
> > I will be retesting after all the software rebuilds are done, and
> > rolling back to released gdal.  (Yes, I know proj 6.3 is old and that I
> > should update.)
> >
> > Thanks,
> > Greg
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210424/da24cb71/attachment.html>

From even.rouault at spatialys.com  Sat Apr 24 08:38:19 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 24 Apr 2021 17:38:19 +0200
Subject: [gdal-dev] GDAL 3.3.0beta1 available
In-Reply-To: <CADRrdKv84QbbYFWanAE4QoYsrEzu8gxKTZZ4QoYpEcpgQn=vVA@mail.gmail.com>
References: <aacb98b9-ea44-ac13-7f89-1199f6e63cb1@spatialys.com>
 <rmimttniw6z.fsf@s1.lexort.com>
 <ae0d0f97-b0b9-17d1-7a25-7cccdd5c0e4a@spatialys.com>
 <CADRrdKv84QbbYFWanAE4QoYsrEzu8gxKTZZ4QoYpEcpgQn=vVA@mail.gmail.com>
Message-ID: <f6c2f3ec-37ac-73d6-ea31-7a588e6e6940@spatialys.com>

oh.... so I was wrong and you've spotted the reason for what Greg 
notices. So this is (was) a GDAL 3.3 specific bug (3.2 is fine).

GDAL should have passed HUGE_VAL when no explicit time is specified, 
which would be interpreted by PROJ as ignoring the time-dependent parts 
(or equivalently using the reference epoch of the transformation, which 
nullifies the effect of those time-dependent parts), but it incorrectly 
passes 0 currently

Transformation at epoch 0:

$ echo 100 -50 0 0 | gdaltransform -s_srs EPSG:6319 -t_srs EPSG:7912
100.000520678775 -49.9999650963593 1.20454746671021

==> ~ 100 m shift

Transformation at epoch 2010;

$ echo 100 -50 0 2010? | gdaltransform -s_srs EPSG:6319 -t_srs EPSG:7912
100.00001055598 -49.9999754213041 0.900845746509731

Current incorrect behavior is the same as at epoch 0

$ echo 100 -50 | gdaltransform -s_srs EPSG:6319 -t_srs EPSG:7912
100.000520678775 -49.9999650963593 1.20454746671021

With fix queued in https://github.com/OSGeo/gdal/pull/3738

we now get the same as epoch 2010

$ echo 100 -50 | gdaltransform -s_srs EPSG:6319 -t_srs EPSG:7912
100.00001055598 -49.9999754213041 0.900845746509731

Even

Le 24/04/2021 ? 17:13, Javier Jimenez Shaw a ?crit?:
> Just one idea: which time is setting GDAL (and/or PROJ understanding) 
> on the transformation if nothing is specified? Is it the same as in cs2cs?
> That transformation is time dependent.
> I read somewhere that the "default" value is not the same (but my 
> memory is not very reliable).
>
> Cheers.
> .___ ._ ..._ .. . ._. .___ .. __ . _. . __..? ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
>
> On Sat, 24 Apr 2021 at 16:58, Even Rouault <even.rouault at spatialys.com 
> <mailto:even.rouault at spatialys.com>> wrote:
>
>     Greg,
>
>     There's a high chance for this to be completely PROJ behavior. GDAL
>     hardly knows about CRS those days :-)
>
>     Could you share your input and output files ?
>
>     Also set CPL_DEBUG=PROJ and PROJ_DEBUG=2 as environment variables
>     to see
>     which transformations PROJ pickup : look for lines starting with
>     "PROJ:
>     Using coordinate operation ..."
>
>     With latest PROJ master (and also 6.3.2), I see that
>
>     projinfo -s EPSG:6319 -t EPSG:7912 -o PROJ
>
>     Candidate operations found: 1
>     -------------------------------------
>     Operation No. 1:
>
>     unknown id, Conversion from NAD83(2011) (geog3D) to NAD83(2011)
>     (geocentric) + Inverse of ITRF2014 to NAD83(2011) (1) + Conversion
>     from
>     ITRF2014 (geocentric) to ITRF2014 (geog3D), 0 m, Puerto Rico -
>     onshore
>     and offshore. United States (USA) onshore and offshore - Alabama;
>     Alaska; Arizona; Arkansas; California; Colorado; Connecticut;
>     Delaware;
>     Florida; Georgia; Idaho; Illinois; Indiana; Iowa; Kansas; Kentucky;
>     Louisiana; Maine; Maryland; Massachusetts; Michigan; Minnesota;
>     Mississippi; Missouri; Montana; Nebraska; Nevada; New Hampshire; New
>     Jersey; New Mexico; New York; North Carolina; North Dakota; Ohio;
>     Oklahoma; Oregon; Pennsylvania; Rhode Island; South Carolina; South
>     Dakota; Tennessee; Texas; Utah; Vermont; Virginia; Washington; West
>     Virginia; Wisconsin; Wyoming. US Virgin Islands - onshore and
>     offshore.
>
>     PROJ string:
>     +proj=pipeline
>     ?? +step +proj=axisswap +order=2,1
>     ?? +step +proj=unitconvert +xy_in=deg +z_in=m +xy_out=rad +z_out=m
>     ?? +step +proj=cart +ellps=GRS80
>     ?? +step +inv +proj=helmert +x=1.0053 +y=-1.9092 +z=-0.5416
>     +rx=0.0267814
>     ???????? +ry=-0.0004203 +rz=0.0109321 +s=0.00037 +dx=0.0008
>     +dy=-0.0006
>     ???????? +dz=-0.0014 +drx=6.67e-05 +dry=-0.0007574 +drz=-5.13e-05
>     +ds=-7e-05
>     ???????? +t_epoch=2010 +convention=coordinate_frame
>     ?? +step +inv +proj=cart +ellps=GRS80
>     ?? +step +proj=unitconvert +xy_in=rad +z_in=m +xy_out=deg +z_out=m
>     ?? +step +proj=axisswap +order=2,1
>
>     So it applies a time-dependent Helmert transformation, which has also
>     non-time dependent terms.
>
>     However trying a bit, the transformation seems to introduce a
>     shift of
>     about ~1 m or so, not 35 m
>
>     $ echo 50 -100 0 | cs2cs -d 8 EPSG:6319 EPSG:7912
>     50.00000754??? -100.00001400 -0.68652183
>
>     $ echo 50 -100 50.00000754 -100.00001400 | geod -I +ellps=GRS80
>     -50d7'11.377"??? 129d52'48.584"??? 1.308
>
>     Even
>
>     Le 24/04/2021 ? 16:39, Greg Troxel a ?crit?:
>     > Even Rouault <even.rouault at spatialys.com
>     <mailto:even.rouault at spatialys.com>> writes:
>     >
>     >> - http://download.osgeo.org/gdal/3.3.0/gdal-3.3.0beta1.tar.gz
>     <http://download.osgeo.org/gdal/3.3.0/gdal-3.3.0beta1.tar.gz>
>     > The tl;dr is:
>     >
>     >? ? - I'm seeing bad transforms NAD83/ITRF with 3.3.0beta1 but I
>     do not
>     >? ? ? have any basis to blame 3.3.0 because a lot of other things
>     are in
>     >? ? ? flux.
>     >
>     >? ? - If you are using 3.3.0beta1 and transforms I suggest
>     looking at your
>     >? ? ? output data.
>     >
>     >
>     >
>     > I have noticed a problem but I have little idea where it is.? I
>     will be
>     > looking into it myself but I wanted to mention it so that others
>     could
>     > be on the lookout.
>     >
>     > Besides updating to gdal, I'm doing a general software
>     freshening and
>     > rebuilding lots of things, but aside from the gdal beta my geo
>     packages
>     > haven't changed versions.? I have proj 6.3.2 with installed
>     grids, which
>     > was just rebuilt.
>     >
>     > The background is that I'm mostly working in EPSG:6319 which is
>     > NAD83(2011).
>     >
>     > I transform to EPSG:7912 which is ITRF2014 to display the data on
>     > leaflet webmaps (as a proxy for WGS84 to avoid null transforms).
>     >
>     > I noticed that my points on the webmap were very far off,
>     displaced very
>     > roughly 35m ESE.? I then put an NAD83 version in the webspace,
>     and that
>     > made things look ok (with the ~1 meter error from treating NAD83 and
>     > ITRF2014 as equal, surely).
>     >
>     > I'm extracting things from a geopackage in 6319 like
>     >
>     >? ? ? ogr2ogr -f GeoJSON -t_srs "EPSG:7912" -s_srs "EPSG:6319"
>     FOO/issues.geojson foo.gpkg issues
>     >? ? ? ogr2ogr -f GeoJSON -t_srs "EPSG:6319" -s_srs "EPSG:6319"
>     FOO/issues-nad83.geojson foo.gpkg issues
>     >
>     > which has previously been fine.? I'm definitely getting very large
>     > offsets from two files extracted seconds apart from the very same
>     > geopackage.
>     >
>     > So this is not a request for help, but if you are using ogr2ogr to
>     > transform datums, and you are using gdal 3.3.0beta1 especially
>     with proj
>     > 6, I'd suggest a quick look at your output data to see if it
>     seems ok.
>     >
>     > I will be retesting after all the software rebuilds are done, and
>     > rolling back to released gdal.? (Yes, I know proj 6.3 is old and
>     that I
>     > should update.)
>     >
>     > Thanks,
>     > Greg
>
>     -- 
>     http://www.spatialys.com <http://www.spatialys.com>
>     My software is free, but my time generally not.
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>     <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210424/f2076a21/attachment-0001.html>

From shen_yi_hong at outlook.com  Sat Apr 24 09:45:36 2021
From: shen_yi_hong at outlook.com (Yi Hong Shen)
Date: Sat, 24 Apr 2021 16:45:36 +0000
Subject: [gdal-dev] access failed error while parsing HFA files
Message-ID: <SI2PR06MB4140DE5BE346ED89288DFB46D2449@SI2PR06MB4140.apcprd06.prod.outlook.com>

Hi there,

I have a unique use case whereby I would like to parse ERDAS Imagine .ovr files (otherwise referred to as ERDAS annotation files) using the HFA driver implemented in GDAL. I understand that the HFA implementation is mainly for .img raster images and it is not meant to support other HFA files like .ovr.

However, I would just like to understand the cause behind the access failed output while using the DumpInstValue method in HFAField to inspect the .ovr file. The problem only seems to occur when it reaches the StyleLibrary node as it tries to parse its children.

StyleLibrary(StyleLibrary_Eant) @ 743 + 6907 @ 871
   + lineStyles[0] =
   +     useCount = 0
   +     styleName = `Medium solid blackline'
   +     description = (no values)
   +     baseStyle = (no values)
   +     mask = 14
   +     styleUnits =
   +         coordSys = EEVG_OUTPUT
   +         units = `points'
   +     overLines =
   +         color = 0
   +         width = 2.000000
   +     linePattern =
   +         lineMark = 1.000000
   +         lineSpace = 0.000000
   + lineStyles[1] =
   +     useCount = 0
   +     styleName = `thin solid'
   +     description = `thin single color solid line'
   +     baseStyle = (no values)
   +     mask = 12
   +     styleUnits = (no values)
   +     overLines =
   +         color = -1
   +         width = 0.700000
   +     linePattern[0] =
   +         lineMark = 10.000000
   +         lineSpace = 0.000000
   +     linePattern[1] =
   +         lineMark = 0.000000
   +         lineSpace = 0.000000

       .
       .
       .

   + fillStyles[0] =
   +     useCount = 0
   +     styleName = `Filled black'
   +     description = (no values)
   +     baseStyle = (no values)
   +     mask = 30
   +     fill = EMSC_TRUE
   +     trace = EMSC_FALSE
   +     pattern =
   +         color = 0
   +     traceStyle = -1
   + fillStyles[1] =
   +     useCount = 17
   +     styleName = `Text fill style'
   +     description = (no values)
   +     baseStyle = (no values)
   +     mask = 6
   +     fill = EMSC_TRUE
   +     trace = EMSC_FALSE
   +     pattern = (no values)
   +     traceStyle = 1
   + fillStyles[2] =
   +     useCount = 16
   +     styleName = ` fill style'
   +     description = `kerville, no shadow or underline'
   + fillStyles[3] = (access failed)
   + fillStyles[4] = (access failed)
   + fillStyles[5] = (access failed)
   + fillStyles[6] = (access failed)
   + fillStyles[7] = (access failed)
   + fillStyles[8] = (access failed)
   + fillStyles[9] = (access failed)
   + fillStyles[10] = (access failed)
   + fillStyles[11] = (access failed)
   + fillStyles[12] = (access failed)
   + fillStyles[13] = (access failed)
   + fillStyles[14] = (access failed)
   + fillStyles[15] = (access failed)
   +  ... remaining instances omitted ...


Thank you!

gdal version: 3.2.2
operating system: fedora 30 x86_64

Regards,
Shen Yi Hong
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210424/734a1e96/attachment.html>

From gdt at lexort.com  Sat Apr 24 09:59:40 2021
From: gdt at lexort.com (Greg Troxel)
Date: Sat, 24 Apr 2021 16:59:40 +0000
Subject: [gdal-dev] GDAL 3.3.0beta1 available
In-Reply-To: <f6c2f3ec-37ac-73d6-ea31-7a588e6e6940@spatialys.com>
References: <aacb98b9-ea44-ac13-7f89-1199f6e63cb1@spatialys.com>
 <rmimttniw6z.fsf@s1.lexort.com>
 <ae0d0f97-b0b9-17d1-7a25-7cccdd5c0e4a@spatialys.com>
 <CADRrdKv84QbbYFWanAE4QoYsrEzu8gxKTZZ4QoYpEcpgQn=vVA@mail.gmail.com>
 <f6c2f3ec-37ac-73d6-ea31-7a588e6e6940@spatialys.com>
Message-ID: <FE0C3FBE-BD26-4594-AF8B-AF1E967632D9@lexort.com>

Thanks!  That was fast.   I will test as soon as my software update stabilizes.

From ejovenitti at gmail.com  Sat Apr 24 13:53:58 2021
From: ejovenitti at gmail.com (jovajova24)
Date: Sat, 24 Apr 2021 13:53:58 -0700 (MST)
Subject: [gdal-dev] Accessing a Nitf DES
In-Reply-To: <6185c8b5-8e2f-8207-520b-49402f86ab02@spatialys.com>
References: <1619136452661-0.post@n6.nabble.com>
 <6185c8b5-8e2f-8207-520b-49402f86ab02@spatialys.com>
Message-ID: <1619297638747-0.post@n6.nabble.com>

Ok thank you very much for your response. I'm so confused now. 
The link you sent me uses objects like:
        NITFSegmentInfo 

Which when you download 3.2.1 for Windows, none of the specific NITF objects
headers are included. 

I've been trying to build GDAL all morning, but there's an issue building on
VS 2019 with trying to set the correct version of PROJ >= 6. 

I don't understand why any of the Windows builds I'm find don't have objects
like NITFSegmentInfo .

Is there a complete build of GDAL for windows anywhere, or am i wrong that
you don't need to use NITFSegmentInfo  to parse DES(S)?

Thanks again. 






--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From gdt at lexort.com  Sun Apr 25 04:38:34 2021
From: gdt at lexort.com (Greg Troxel)
Date: Sun, 25 Apr 2021 07:38:34 -0400
Subject: [gdal-dev] GDAL 3.3.0beta1 available
In-Reply-To: <f6c2f3ec-37ac-73d6-ea31-7a588e6e6940@spatialys.com> (Even
 Rouault's message of "Sat, 24 Apr 2021 17:38:19 +0200")
References: <aacb98b9-ea44-ac13-7f89-1199f6e63cb1@spatialys.com>
 <rmimttniw6z.fsf@s1.lexort.com>
 <ae0d0f97-b0b9-17d1-7a25-7cccdd5c0e4a@spatialys.com>
 <CADRrdKv84QbbYFWanAE4QoYsrEzu8gxKTZZ4QoYpEcpgQn=vVA@mail.gmail.com>
 <f6c2f3ec-37ac-73d6-ea31-7a588e6e6940@spatialys.com>
Message-ID: <rmiczuifvb9.fsf@s1.lexort.com>


Even Rouault <even.rouault at spatialys.com> writes:

> oh.... so I was wrong and you've spotted the reason for what Greg
> notices. So this is (was) a GDAL 3.3 specific bug (3.2 is fine).
>
> GDAL should have passed HUGE_VAL when no explicit time is specified,
> which would be interpreted by PROJ as ignoring the time-dependent
> parts (or equivalently using the reference epoch of the
> transformation, which nullifies the effect of those time-dependent
> parts), but it incorrectly passes 0 currently
>
> With fix queued in https://github.com/OSGeo/gdal/pull/3738

I applied that patch to beta1 and reinstalled and now the output seems
correct.  Thanks for the quick analysis and fix.

Probably a proj issue, but it would seem that using an epoch of 0 (== 1
BCE?) is well outside the domain of validity of the transform velocity
models.  But it's hard to draw the line and not really a useful
exercise.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210425/3fde3db3/attachment.sig>

From ejovenitti at gmail.com  Sun Apr 25 10:52:44 2021
From: ejovenitti at gmail.com (jovajova24)
Date: Sun, 25 Apr 2021 10:52:44 -0700 (MST)
Subject: [gdal-dev] Nitf Metadata parsing
Message-ID: <1619373164474-0.post@n6.nabble.com>

I found this,
http://osgeo-org.1560.x6.nabble.com/gdal-dev-NITF-DES-Data-td5448580.html (
and other threads) -- so it sounds like to parse a NITF DES you need to
rebuild GDAl with the ESRI_BUILD flag. Is this correct ?

Mover-over, I've been trying to find some c++ sample code to parse a NITF
DES. 
Via this thread:
http://osgeo-org.1560.x6.nabble.com/gdal-dev-Accessing-a-Nitf-DES-td5485537.html

Even pointed me to this link:
https://github.com/OSGeo/gdal/pull/3153  ( and thank you for that) but these
examples use objects like:
 NITFSegmentInfo
 NITFDESGetXml

Which when you download 3.2.1 for Windows, none of these specific NITF
objects
are included in the compilation.

Ok DUMB question (and I apologize for this) how do you get access to the
listed above nitf specific objects? 

Is there a way to parse NITF DES data without using these objects?

So, now I'm trying to build GDAL myself and I run into the following issue: 

On VS 2019 it's complaining about the correct version of PROJ >= 6, even
though I've set it to version 7.2. 

Can any one build the latest GDAL on windows outside the CI loop? 
If so can you post your setup?


Thanks again.

 



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From bradh at frogmouth.net  Sun Apr 25 20:37:38 2021
From: bradh at frogmouth.net (Brad Hards)
Date: Mon, 26 Apr 2021 13:37:38 +1000
Subject: [gdal-dev] Nitf Metadata parsing
In-Reply-To: <1619373164474-0.post@n6.nabble.com>
References: <1619373164474-0.post@n6.nabble.com>
Message-ID: <044201d73a4d$813cd7a0$83b686e0$@frogmouth.net>

I'm not sure what you mean by "objects" in this context. Do you mean methods and structures? 

It seems like you are referring to a lot of older mailing list threads. It is probably better to read the code.

For the DES case, you can see how GDAL does it through gdalinfo, with a command like:

./apps/gdalinfo -mdd xml:DES ~/20200723-RIP1B_BIP_Final_Released/07APR2005_Hyperion_331406N0442000E_SWIR172_001_L1R-01B-BIP-GLAS.ntf

Which produces:

Driver: NITF/National Imagery Transmission Format
Files: /home/bradh/20200723-RIP1B_BIP_Final_Released/07APR2005_Hyperion_331406N0442000E_SWIR172_001_L1R-01B-BIP-GLAS.ntf
Size is 64, 838
Coordinate System is:
GEOGCRS["WGS 84",
    DATUM["World Geodetic System 1984",
        ELLIPSOID["WGS 84",6378137,298.257223563,
            LENGTHUNIT["metre",1]]],
    PRIMEM["Greenwich",0,
        ANGLEUNIT["degree",0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS["geodetic latitude (Lat)",north,
            ORDER[1],
            ANGLEUNIT["degree",0.0174532925199433]],
        AXIS["geodetic longitude (Lon)",east,
            ORDER[2],
            ANGLEUNIT["degree",0.0174532925199433]],
    ID["EPSG",4326]]
Data axis to CRS axis mapping: 2,1
GeoTransform =
  44.41283704082986, 0.001278659611993035, -0.0002860746050710144
  33.69168768134494, -0.0002182539682539298, -0.001073775388291513
Metadata:
  NITF_ABPP=08
  NITF_CCS_COLUMN=0
  NITF_CCS_ROW=0
  NITF_CLEVEL=05
  NITF_ENCRYP=0
  NITF_FBKGC=  0,  0,  0
  NITF_FDT=20200723130601
  NITF_FHDR=NITF02.10
  NITF_FSCATP=
  NITF_FSCAUT=
  NITF_FSCLAS=U
  NITF_FSCLSY=
  NITF_FSCLTX=
  NITF_FSCODE=
  NITF_FSCOP=00000
  NITF_FSCPYS=00000
.....
  NITF_PVTYPE=INT
  NITF_STYPE=BF01
  NITF_TGTID=
Metadata (xml:DES):
<des_list>
  <des name="CSEPHB">
    <field name="NITF_DESVER" value="01" />
    <field name="NITF_DECLAS" value="U" />
    <field name="NITF_DESCLSY" value="" />
    <field name="NITF_DESCODE" value="" />
    <field name="NITF_DESCTLH" value="" />
    <field name="NITF_DESREL" value="" />
    <field name="NITF_DESDCTP" value="" />
    <field name="NITF_DESDCDT" value="" />
    <field name="NITF_DESDCXM" value="" />
    <field name="NITF_DESDG" value="" />
    <field name="NITF_DESDGDT" value="" />
    <field name="NITF_DESCLTX" value="" />
    <field name="NITF_DESCATP" value="" />
    <field name="NITF_DESCAUT" value="" />
    <field name="NITF_DESCRSN" value="" />
    <field name="NITF_DESSRDT" value="" />
    <field name="NITF_DESCTLN" value="" />
    <field name="NITF_DESSHL" value="0085" />
    <field name="NITF_DESSHF" value="cf306a0b-c47c-44fa-af63-463549f6bf98001002001824ecf8e-1041-4cce-9edb-bc92d88624ca0000" />
    <field name="NITF_DESDATA"
value="MTI1MDEwMDEuMDAwMDAwMDAwMjAwNTA0MDcwNzI0MDUuODg5MDAwMDAwMDAwMjQrMDQxNDg0NDQuMjUrMDQxODIwMDkuODQrMDM5MjM1NzMuODcrMDQxNTI1NTQuN
TMrMDQxODM3MTQuMzMrMDM5MTc0MjIuNjYrMDQxNTY2NjAuMzMrMDQxODU0MTMuNTErMDM5MTEyNjYuOTUrMDQxNjA3NjEuNzIrMDQxODcxMDcuNDkrMDM5MDUxMDYuOTMrM
DQxNjQ4NTguNzErMDQxODg3OTYuMTgrMDM4OTg5NDIuNDMrMDQxNjg5NTEuMjkrMDQxOTA0NzkuNTcrMDM4OTI3NzMuNjErMDQxNzMwMzkuNDgrMDQxOTIxNTcuNjYrMDM4O
DY2MDAuNDArMDQxNzcxMjMuMjcrMDQxOTM4MzAuNDQrMDM4ODA0MjIuNzgrMDQxODEyMDIuNTcrMDQxOTU0OTguMDIrMDM4NzQyNDAuODcrMDQxODUyNzcuNDYrMDQxOTcxN
jAuMzIrMDM4NjgwNTQuNDYrMDQxODkzNDcuOTUrMDQxOTg4MTcuMjErMDM4NjE4NjMuODMrMDQxOTM0MTMuOTUrMDQyMDA0NjguODkrMDM4NTU2NjguNzMrMDQxOTc0NzUuN
TQrMDQyMDIxMTUuMjgrMDM4NDk0NjkuMzArMDQyMDE1MzIuNjQrMDQyMDM3NTYuMzcrMDM4NDMyNjUuNTgrMDQyMDU1ODUuMzMrMDQyMDUzOTIuMTUrMDM4MzcwNTcuNTYrM
DQyMDk2MzMuNTMrMDQyMDcwMjIuNzMrMDM4MzA4NDUuMTQrMDQyMTM2NzcuMjIrMDQyMDg2NDcuOTMrMDM4MjQ2MjguNTErMDQyMTc3MTYuNTIrMDQyMTAyNjcuODErMDM4M
Tg0MDcuNTArMDQyMjE3NTEuMjIrMDQyMTE4ODIuNTArMDM4MTIxODIuMTgrMDQyMjU3ODEuNTErMDQyMTM0OTEuODArMDM4MDU5NTIuNTUrMDQyMjk4MDcuMzErMDQyMTUwO
TUuNzgrMDM3OTk3MTguNzIrMDQyMzM4MjguNjErMDQyMTY2OTQuNTYrMDM3OTM0ODAuNTErMDQyMzc4NDUuNDErMDQyMTgyODcuOTYrMDM3ODcyMzguMDcrMDQyNDE4NTcuN
zIrMDQyMTk4NzYuMDQrMDM3ODA5OTEuMzUwMDAwMDAwMDA=" />
  </des>
  <des name="CSCSDB">
....

Clearly you'll need to parse out the DESDATA part of the segment, using STDI-0002 as a guide.

Brad

-----Original Message-----
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of jovajova24
Sent: Monday, 26 April 2021 3:53 AM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Nitf Metadata parsing

I found this,
http://osgeo-org.1560.x6.nabble.com/gdal-dev-NITF-DES-Data-td5448580.html ( and other threads) -- so it sounds like to parse a NITF
DES you need to rebuild GDAl with the ESRI_BUILD flag. Is this correct ?

Mover-over, I've been trying to find some c++ sample code to parse a NITF DES. 
Via this thread:
http://osgeo-org.1560.x6.nabble.com/gdal-dev-Accessing-a-Nitf-DES-td5485537.html

Even pointed me to this link:
https://github.com/OSGeo/gdal/pull/3153  ( and thank you for that) but these examples use objects like:
 NITFSegmentInfo
 NITFDESGetXml

Which when you download 3.2.1 for Windows, none of these specific NITF objects are included in the compilation.

Ok DUMB question (and I apologize for this) how do you get access to the listed above nitf specific objects? 

Is there a way to parse NITF DES data without using these objects?

So, now I'm trying to build GDAL myself and I run into the following issue: 

On VS 2019 it's complaining about the correct version of PROJ >= 6, even though I've set it to version 7.2. 

Can any one build the latest GDAL on windows outside the CI loop? 
If so can you post your setup?


Thanks again.

 



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at spatialys.com  Mon Apr 26 05:57:18 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 26 Apr 2021 14:57:18 +0200
Subject: [gdal-dev] GDAL 3.3.0 RC1 available
Message-ID: <7c03844b-f590-e1ba-1f66-b4c85cf6b187@spatialys.com>

Hi,

I have prepared a GDAL/OGR 3.3.0 release candidate. The feedback on beta1 was useful to spot and fix a few bugs.

The changes between beta1 and RC1 are identified in:
https://github.com/OSGeo/gdal/commit/a882173d688e6042c9dc7b1b57d8d169b04abe2b
Note a potential impact on packaging recipees regarding a few esoteric untested/undocumented python scripts,
now moved as "samples" scripts of the gdal-utils package
  
Pick up an archive among the following ones (by ascending size):

   https://download.osgeo.org/gdal/3.3.0/gdal-3.3.0rc1.tar.xz
   https://download.osgeo.org/gdal/3.3.0/gdal-3.3.0rc1.tar.gz
   https://download.osgeo.org/gdal/3.3.0/gdal330rc1.zip

A snapshot of the gdalautotest suite is also available :

   https://download.osgeo.org/gdal/3.3.0/gdalautotest-3.3.0rc1.tar.gz
   https://download.osgeo.org/gdal/3.3.0/gdalautotest-3.3.0rc1.zip

A snapshot of the documentation is at:

   https://download.osgeo.org/gdal/3.3.0/gdal330doc.zip

GDAL-GRASS plugin:

   https://download.osgeo.org/gdal/3.3.0/gdal-grass-3.3.0.tar.gz

NEWS at:

   https://github.com/OSGeo/gdal/blob/v3.3.0RC1/gdal/NEWS

I'll call for a vote promoting it to final later this week if no
serious problems are reported before.

release/3.3 branch has been created for bug fixes and master is now 3.4.0dev

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From andrew.bell.ia at gmail.com  Mon Apr 26 07:12:41 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 26 Apr 2021 10:12:41 -0400
Subject: [gdal-dev] Test Data
Message-ID: <CACJ51z2dXVNVMMzWHB=ynjCZch+my=VBV+2g9xAC9v3eW+E50w@mail.gmail.com>

Hi,

I'm trying to run autotests and am failing to find data. For instance, I
get the error:

    def test_ogr_arcgen_points():

        ds = ogr.Open('data/arcgen/points.gen')
>       assert ds is not None, 'cannot open dataset'
E       AssertionError: cannot open dataset
E       assert None is not None

I see that this file is in the directory autotest/ogr/data/arcgen

I tried including this directory in GDAL_DATA, but the error persists. My
command line is:

DYLD_LIBRARY_PATH=../gdal/.libs
PYTHONPATH=/Users/acbell/gdal/gdal/swig/python/build/lib.macosx-10.9-x86_64-3.9
GDAL_DATA=../gdal/data:./ogr pytest ogr/ogr_arcgen.py
Does anyone have information on how to I might resolve this?

Thanks,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210426/7c87c97d/attachment.html>

From even.rouault at spatialys.com  Mon Apr 26 07:18:13 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 26 Apr 2021 16:18:13 +0200
Subject: [gdal-dev] Test Data
In-Reply-To: <CACJ51z2dXVNVMMzWHB=ynjCZch+my=VBV+2g9xAC9v3eW+E50w@mail.gmail.com>
References: <CACJ51z2dXVNVMMzWHB=ynjCZch+my=VBV+2g9xAC9v3eW+E50w@mail.gmail.com>
Message-ID: <15213559-d725-dbe4-4405-d900a9e1d20a@spatialys.com>

Andrew,

you don't need to add autotest/ogr to GDAL_DATA.

ARCGEN is now a deprecated driver and must be explictly enabled with 
GDAL_ENABLE_DEPRECATED_DRIVER_ARCGEN=YES env variable.

Normally this is done in autotest/pytest.ini

I suspect you don't have the pytest-env python module installed.

You should probably just run:

pip3 install -U -r autotest/requirements.txt

which will install it

Even

Le 26/04/2021 ? 16:12, Andrew Bell a ?crit?:
> Hi,
>
> I'm trying to run autotests and am failing to find data. For instance, 
> I get the error:
>
> ? ? def test_ogr_arcgen_points():
>
> ? ? ? ? ds = ogr.Open('data/arcgen/points.gen')
> > ? ? ? assert ds is not None, 'cannot open dataset'
> E ? ? ? AssertionError: cannot open dataset
> E ? ? ? assert None is not None
>
> I see that this file is in the directory autotest/ogr/data/arcgen
>
> I tried including this directory in GDAL_DATA, but the error persists. 
> My command line is:
>
> DYLD_LIBRARY_PATH=../gdal/.libs 
> PYTHONPATH=/Users/acbell/gdal/gdal/swig/python/build/lib.macosx-10.9-x86_64-3.9 
> GDAL_DATA=../gdal/data:./ogr pytest ogr/ogr_arcgen.py
> Does anyone have information on how to I might resolve this?
>
> Thanks,
>
> -- 
> Andrew Bell
> andrew.bell.ia at gmail.com <mailto:andrew.bell.ia at gmail.com>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210426/d23f9ff7/attachment.html>

From andrew.bell.ia at gmail.com  Mon Apr 26 07:38:38 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 26 Apr 2021 10:38:38 -0400
Subject: [gdal-dev] Test Data
In-Reply-To: <15213559-d725-dbe4-4405-d900a9e1d20a@spatialys.com>
References: <CACJ51z2dXVNVMMzWHB=ynjCZch+my=VBV+2g9xAC9v3eW+E50w@mail.gmail.com>
 <15213559-d725-dbe4-4405-d900a9e1d20a@spatialys.com>
Message-ID: <CACJ51z2AwDH7GHK6NMg8gihdPuoRnqqrNshUsNveyObzJihDdQ@mail.gmail.com>

On Mon, Apr 26, 2021 at 10:18 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Andrew,
>
> you don't need to add autotest/ogr to GDAL_DATA.
>
> Normally this is done in autotest/pytest.ini
>
Thanks. I missed that.

> I suspect you don't have the pytest-env python module installed.
>
> You should probably just run:
>
> pip3 install -U -r autotest/requirements.txt
>
I'm using conda and pip often interacts badly with it, so I've just been
using conda.

I'm still getting an error that *seems* as if it might be related to
finding test data. Is there any setting/variable I might still need to
check?

___________________________________________ test_ogr_dgn_7
___________________________________________

    def test_ogr_dgn_7():

        co_opts = ['UOR_PER_SUB_UNIT=100', 'SUB_UNITS_PER_MASTER_UNIT=100',
                   'ORIGIN=-50,-50,0']

        dgn2_ds =
ogr.GetDriverByName('DGN').CreateDataSource('tmp/dgn7.dgn',

options=co_opts)

        dgn2_lyr = dgn2_ds.CreateLayer('elements')

        dgn_ds = ogr.Open('data/dgn/smalltest.dgn')
        dgn_lyr = dgn_ds.GetLayer(0)

>       dst_feat = ogr.Feature(feature_def=dgn2_lyr.GetLayerDefn())
E       AttributeError: 'NoneType' object has no attribute 'GetLayerDefn'

Thanks,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210426/00420cd8/attachment.html>

From even.rouault at spatialys.com  Mon Apr 26 07:44:37 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 26 Apr 2021 16:44:37 +0200
Subject: [gdal-dev] Test Data
In-Reply-To: <CACJ51z2AwDH7GHK6NMg8gihdPuoRnqqrNshUsNveyObzJihDdQ@mail.gmail.com>
References: <CACJ51z2dXVNVMMzWHB=ynjCZch+my=VBV+2g9xAC9v3eW+E50w@mail.gmail.com>
 <15213559-d725-dbe4-4405-d900a9e1d20a@spatialys.com>
 <CACJ51z2AwDH7GHK6NMg8gihdPuoRnqqrNshUsNveyObzJihDdQ@mail.gmail.com>
Message-ID: <781a7c4c-3de1-8aff-ae46-efd3670f2fec@spatialys.com>

DGN writing indeeds need GDAL_DATA to be set and point to the directory 
that contains seed_2d.dgn

You can source scripts/setdevenv.sh to set the appropriate environment 
variables for a dev env.

Le 26/04/2021 ? 16:38, Andrew Bell a ?crit?:
>
>
> On Mon, Apr 26, 2021 at 10:18 AM Even Rouault 
> <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>> wrote:
>
>     Andrew,
>
>     you don't need to add autotest/ogr to GDAL_DATA.
>
>     Normally this is done in autotest/pytest.ini
>
> Thanks. I missed that.
>
>     I suspect you don't have the pytest-env python module installed.
>
>     You should probably just run:
>
>     pip3 install -U -r autotest/requirements.txt
>
> I'm using conda and pip often interacts badly with it, so I've just 
> been using conda.
>
> I'm still getting an error that *seems* as if it might be related to 
> finding test data. Is there any setting/variable I might still need to 
> check?
>
> ___________________________________________ test_ogr_dgn_7 
> ___________________________________________
>
> ? ? def test_ogr_dgn_7():
>
> ? ? ? ? co_opts = ['UOR_PER_SUB_UNIT=100', 
> 'SUB_UNITS_PER_MASTER_UNIT=100',
> ? ? ? ? ? ? ? ? ? ?'ORIGIN=-50,-50,0']
>
> ? ? ? ? dgn2_ds = 
> ogr.GetDriverByName('DGN').CreateDataSource('tmp/dgn7.dgn',
> ? options=co_opts)
>
> ? ? ? ? dgn2_lyr = dgn2_ds.CreateLayer('elements')
>
> ? ? ? ? dgn_ds = ogr.Open('data/dgn/smalltest.dgn')
> ? ? ? ? dgn_lyr = dgn_ds.GetLayer(0)
>
> > ? ? ? dst_feat = ogr.Feature(feature_def=dgn2_lyr.GetLayerDefn())
> E ? ? ? AttributeError: 'NoneType' object has no attribute 'GetLayerDefn'
>
> Thanks,
>
> -- 
> Andrew Bell
> andrew.bell.ia at gmail.com <mailto:andrew.bell.ia at gmail.com>

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210426/795982a4/attachment-0001.html>

From ejovenitti at gmail.com  Mon Apr 26 11:45:20 2021
From: ejovenitti at gmail.com (jovajova24)
Date: Mon, 26 Apr 2021 11:45:20 -0700 (MST)
Subject: [gdal-dev] Nitf Metadata parsing
In-Reply-To: <044201d73a4d$813cd7a0$83b686e0$@frogmouth.net>
References: <1619373164474-0.post@n6.nabble.com>
 <044201d73a4d$813cd7a0$83b686e0$@frogmouth.net>
Message-ID: <1619462720719-0.post@n6.nabble.com>

Brad,

Thanks for the reply!
The objects I'm referring to are what I have listed i.e.,

?NITFSegmentInfo
?NITFDESGetXml

These objects were changed in the PR I have listed i.e.,
https://github.com/OSGeo/gdal/pull/3153/files#diff-084e5d55477ff6b3acacb5bf240281a52d778c07106fb1fb2b53f1275988a25eR2476-R2488

This PR (PR 3153) was merged in Nov 6 2020 so it does not appear to be old
code.

But, none of these Nitf specific objects are in any releases and I don't
understand why. The include/frmt directory is where they are in the source
code, but I can never find include/frmt in any Windows build.

Can I ask what makes you think it's old code? 

Also did you create that output with a GDAL build that has the ESRI_NITF
flag set?

Thanks again!






--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From j1 at jimenezshaw.com  Mon Apr 26 12:03:45 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 26 Apr 2021 21:03:45 +0200
Subject: [gdal-dev] GetAxesCount returns a wrong value
Message-ID: <CADRrdKsfZ5rRzMeZe8o8_=9dAB9=AaT_14O0AKV=cSM4T+1L+w@mail.gmail.com>

If I try to get the number of axes in C++ from the srs "EPSG:29901+5773", I
get different values depending on how I create the wkt.
I am using the method "OGRSpatialReference::GetAxesCount()"

If I create it with projinfo with the option "--boundcrs-to-wgs84", the
number of axis is 0.
and the error message twice
ERROR 1: PROJ: proj_crs_get_coordinate_system: Object is not a SingleCRS

projinfo EPSG:29901+5773 -o WKT1:GDAL --boundcrs-to-wgs84
WKT1:GDAL string:
COMPD_CS["OSNI 1952 / Irish National Grid + EGM96 height",
    PROJCS["OSNI 1952 / Irish National Grid",
        GEOGCS["OSNI 1952",
            DATUM["OSNI_1952",
                SPHEROID["Airy 1830",6377563.396,299.3249646,
                    AUTHORITY["EPSG","7001"]],
                TOWGS84[482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15],
                AUTHORITY["EPSG","6188"]],
            PRIMEM["Greenwich",0,
                AUTHORITY["EPSG","8901"]],
            UNIT["degree",0.0174532925199433,
                AUTHORITY["EPSG","9122"]],
            AUTHORITY["EPSG","4188"]],
        PROJECTION["Transverse_Mercator"],
        PARAMETER["latitude_of_origin",53.5],
        PARAMETER["central_meridian",-8],
        PARAMETER["scale_factor",1],
        PARAMETER["false_easting",200000],
        PARAMETER["false_northing",250000],
        UNIT["metre",1,
            AUTHORITY["EPSG","9001"]],
        AXIS["Easting",EAST],
        AXIS["Northing",NORTH],
        AUTHORITY["EPSG","29901"]],
    VERT_CS["EGM96 height",
        VERT_DATUM["EGM96 geoid",2005,
            EXTENSION["PROJ4_GRIDS","us_nga_egm96_15.tif"],
            AUTHORITY["EPSG","5171"]],
        UNIT["metre",1,
            AUTHORITY["EPSG","9001"]],
        AXIS["Gravity-related height",UP],
        AUTHORITY["EPSG","5773"]]]



When I remove the lines EXTENSION or TOWGS84 (that are the only difference)
from the WKT string, I get 1, 2 or 3 (depending on the combination of
deletion),

Doing more tests, I have the same behaviour with EPSG:25836+5773

Environment: Ubuntu 18.04. Compiled GDAL 3.2.0 and PROJ 7.2.0

Is this a know bug? Maybe fixed in PROJ 8.0.0? (I had not time to test it
there yet)

I do not like TOWGS84 either, but still many people is using it, and
provides WKT including it.

Thanks,
Javier.
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210426/0aac04c1/attachment.html>

From even.rouault at spatialys.com  Mon Apr 26 12:09:29 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 26 Apr 2021 21:09:29 +0200
Subject: [gdal-dev] GetAxesCount returns a wrong value
In-Reply-To: <CADRrdKsfZ5rRzMeZe8o8_=9dAB9=AaT_14O0AKV=cSM4T+1L+w@mail.gmail.com>
References: <CADRrdKsfZ5rRzMeZe8o8_=9dAB9=AaT_14O0AKV=cSM4T+1L+w@mail.gmail.com>
Message-ID: <7de9128d-8333-bf61-f621-708791999372@spatialys.com>


> Is this a know bug?
Now, yes :-)
> Maybe fixed in PROJ 8.0.0? (I had not time to test it there yet)

No, it is GDAL specific. You'll need to patch 
OGRSpatialReference::GetAxesCount() in the ( d->m_pjType == 
PJ_TYPE_COMPOUND_CRS ) case, to test if a component of the compound CRS 
is a bound CRS, and if so, call proj_crs_get_coordinate_system() on the 
source CRS of the bound CRS ( with proj_get_source_crs() ) and not the 
bound CRS itself

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From andrew.bell.ia at gmail.com  Mon Apr 26 14:51:37 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 26 Apr 2021 17:51:37 -0400
Subject: [gdal-dev] Test Data
In-Reply-To: <781a7c4c-3de1-8aff-ae46-efd3670f2fec@spatialys.com>
References: <CACJ51z2dXVNVMMzWHB=ynjCZch+my=VBV+2g9xAC9v3eW+E50w@mail.gmail.com>
 <15213559-d725-dbe4-4405-d900a9e1d20a@spatialys.com>
 <CACJ51z2AwDH7GHK6NMg8gihdPuoRnqqrNshUsNveyObzJihDdQ@mail.gmail.com>
 <781a7c4c-3de1-8aff-ae46-efd3670f2fec@spatialys.com>
Message-ID: <CACJ51z0zoFqAwVB1U96pHoV7-VQzwy_hrRWT=6qh7WZ8gJjgvA@mail.gmail.com>

On Mon, Apr 26, 2021 at 10:44 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> DGN writing indeeds need GDAL_DATA to be set and point to the directory
> that contains seed_2d.dgn
>
Is it the case that GDAL_DATA is relative to the directory containing the
test rather than the test driver directory (autotest)? Changing a relative
path to an absolute one allowed the seed file to be found. This seemed
strange because the provided pytest.ini contains a relative path. Is there
some other variable that sets the base path to be used?

Thanks,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210426/5e7bdb65/attachment.html>

From even.rouault at spatialys.com  Mon Apr 26 15:03:28 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 27 Apr 2021 00:03:28 +0200
Subject: [gdal-dev] Test Data
In-Reply-To: <CACJ51z0zoFqAwVB1U96pHoV7-VQzwy_hrRWT=6qh7WZ8gJjgvA@mail.gmail.com>
References: <CACJ51z2dXVNVMMzWHB=ynjCZch+my=VBV+2g9xAC9v3eW+E50w@mail.gmail.com>
 <15213559-d725-dbe4-4405-d900a9e1d20a@spatialys.com>
 <CACJ51z2AwDH7GHK6NMg8gihdPuoRnqqrNshUsNveyObzJihDdQ@mail.gmail.com>
 <781a7c4c-3de1-8aff-ae46-efd3670f2fec@spatialys.com>
 <CACJ51z0zoFqAwVB1U96pHoV7-VQzwy_hrRWT=6qh7WZ8gJjgvA@mail.gmail.com>
Message-ID: <b65eb870-8a6c-cbfd-8795-8acaedcf0eed@spatialys.com>

GDAL_DATA is evaluated as the argument of fopen(), so if it is relative, 
you need to be a current directory consistent with the relative path for 
it to work. You'd generally want ot use an absolute path for GDAL_DATA

I see that in pytest.ini a commented line with #GDAL_DATA = 
../gdal/data. And autotest/conftest.py has logic to chdir() in the 
directory where each test is run, and it happens our arborescence of 
test is autotest/foo, so the value of ../gdal/data does not work. It 
should rather be ../../gdal/data . We should probably fix that line, but 
I'm wondering if it is a good idea to set it at all in pytest.ini. A dev 
environment without GDAL_DATA set wouldn't be functional outside of 
pytest. A nice improvement would be to detect that we run from a dev 
environment and automatically figure out the GDAL_DATA directory from 
that (qgis has some magic for similar situation), but that might be 
fragile and need a bit of rework if some day we use another build system :-)

Le 26/04/2021 ? 23:51, Andrew Bell a ?crit?:
>
>
> On Mon, Apr 26, 2021 at 10:44 AM Even Rouault 
> <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>> wrote:
>
>     DGN writing indeeds need GDAL_DATA to be set and point to the
>     directory that contains seed_2d.dgn
>
> Is it the case that GDAL_DATA is relative to the directory containing 
> the test rather than the test driver directory (autotest)? Changing a 
> relative path to an absolute one allowed the seed file to be found. 
> This seemed strange because the provided pytest.ini contains a 
> relative path. Is there some other variable that sets the base path to 
> be used?
>
> Thanks,
>
> -- 
> Andrew Bell
> andrew.bell.ia at gmail.com <mailto:andrew.bell.ia at gmail.com>

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210427/0cad3adf/attachment.html>

From bradh at frogmouth.net  Mon Apr 26 21:06:44 2021
From: bradh at frogmouth.net (bradh at frogmouth.net)
Date: Tue, 27 Apr 2021 14:06:44 +1000
Subject: [gdal-dev] Nitf Metadata parsing
In-Reply-To: <1619462720719-0.post@n6.nabble.com>
Message-ID: <c7e9ab8a-97a6-4e73-a0b5-c668772f4453@email.android.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210427/5c6e306a/attachment.html>

From ejovenitti at gmail.com  Mon Apr 26 21:10:37 2021
From: ejovenitti at gmail.com (Eric Jovenitti)
Date: Tue, 27 Apr 2021 00:10:37 -0400
Subject: [gdal-dev] Nitf Metadata parsing
In-Reply-To: <c7e9ab8a-97a6-4e73-a0b5-c668772f4453@email.android.com>
References: <1619462720719-0.post@n6.nabble.com>
 <c7e9ab8a-97a6-4e73-a0b5-c668772f4453@email.android.com>
Message-ID: <CAE=ck=-7odfa0fpDkXoAEXE5jgcVo+g0qaUS3TWgcPOEJ28suw@mail.gmail.com>

?
On Tue, Apr 27, 2021 at 12:08 AM <bradh at frogmouth.net> wrote:

> Ok. Have a nice day.
>
> On 27 Apr. 2021 04:45, jovajova24 <ejovenitti at gmail.com> wrote:
>
> Brad,
>
> Thanks for the reply!
> The objects I'm referring to are what I have listed i.e.,
>
>  NITFSegmentInfo
>  NITFDESGetXml
>
> These objects were changed in the PR I have listed i.e.,
>
> https://github.com/OSGeo/gdal/pull/3153/files#diff-084e5d55477ff6b3acacb5bf240281a52d778c07106fb1fb2b53f1275988a25eR2476-R2488
>
> This PR (PR 3153) was merged in Nov 6 2020 so it does not appear to be old
> code.
>
> But, none of these Nitf specific objects are in any releases and I don't
> understand why. The include/frmt directory is where they are in the source
> code, but I can never find include/frmt in any Windows build.
>
> Can I ask what makes you think it's old code?
>
> Also did you create that output with a GDAL build that has the ESRI_NITF
> flag set?
>
> Thanks again!
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210427/b161e175/attachment-0001.html>

From even.rouault at spatialys.com  Tue Apr 27 02:56:54 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 27 Apr 2021 11:56:54 +0200
Subject: [gdal-dev] GDAL 3.2.3 RC1 available
Message-ID: <988573d3-a7f3-ca40-d2f7-f9bd4d9da01c@spatialys.com>

Hi,

I have prepared a GDAL/OGR 3.2.3 release candidate. This will be the 
last release in the 3.2 series

Pick up an archive among the following ones (by ascending size):

 ? https://download.osgeo.org/gdal/3.2.3/gdal-3.2.3rc1.tar.xz
 ? https://download.osgeo.org/gdal/3.2.3/gdal-3.2.3rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.2.3/gdal323rc1.zip

A snapshot of the gdalautotest suite is also available :

https://download.osgeo.org/gdal/3.2.3/gdalautotest-3.2.3rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.2.3/gdalautotest-3.2.3rc1.zip

GDAL-GRASS plugin:

 ? https://download.osgeo.org/gdal/3.2.3/gdal-grass-3.2.3.tar.gz

The NEWS file is here :

 ? https://github.com/OSGeo/gdal/blob/v3.2.3RC1/gdal/NEWS

I'll call for a vote promoting it to final later this week if no
serious problems are reported before.

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From matthew.f.cechini at nasa.gov  Tue Apr 27 07:04:04 2021
From: matthew.f.cechini at nasa.gov (Cechini, Matthew F. (GSFC-423.0)[Science Systems & Applications, Inc.])
Date: Tue, 27 Apr 2021 14:04:04 +0000
Subject: [gdal-dev] vsis3 worldfile support?
Message-ID: <34917F2F-5CAF-4B3D-A004-A4F18C762ADC@nasa.gov>

Using GDAL 2.4.4, I?m attempting to read a PNG file in S3 with this prefix: /vsis3/bucket/prefix/image.png.  Alongside that object are also image.pgw an image.wld objects (same content).  When I run gdalinfo on the /vsis3 path, I?m not seeing the geolocation information.  Am I doing something wrong? Do I need a new version? Is this a known limitation?

Thanks,
Matt
.................................................................
Matthew Cechini
Contractor, Science Systems and Applications, Inc.
NASA GIBS Systems/Software Engineer
410.205.6272
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210427/dba8fa45/attachment.html>

From even.rouault at spatialys.com  Tue Apr 27 07:20:21 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 27 Apr 2021 16:20:21 +0200
Subject: [gdal-dev] vsis3 worldfile support?
In-Reply-To: <34917F2F-5CAF-4B3D-A004-A4F18C762ADC@nasa.gov>
References: <34917F2F-5CAF-4B3D-A004-A4F18C762ADC@nasa.gov>
Message-ID: <59637e4b-5807-3575-1fe4-87efebf1bebf@spatialys.com>

Matt,

I've just tested and this works for me. Can't think of a reason besides 
a permission problem with the .pgw/.wld files, or if you've set the 
CPL_VSIL_CURL_ALLOWED_EXTENSIONS configuration option to "png"

Even

Le 27/04/2021 ? 16:04, Cechini, Matthew F. (GSFC-423.0)[Science Systems 
& Applications, Inc.] via gdal-dev a ?crit?:
>
> Using GDAL 2.4.4, I?m attempting to read a PNG file in S3 with this 
> prefix: /vsis3/bucket/prefix/image.png.? Alongside that object are 
> also image.pgw an image.wld objects (same content).? When I run 
> gdalinfo on the /vsis3 path, I?m not seeing the geolocation 
> information.? Am I doing something wrong? Do I need a new version? Is 
> this a known limitation?
>
> Thanks,
>
> Matt
>
> .................................................................
>
> Matthew Cechini
>
> Contractor, Science Systems and Applications, Inc.
>
> NASA GIBS Systems/Software Engineer
>
> 410.205.6272
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210427/9309b3dc/attachment.html>

From matthew.f.cechini at nasa.gov  Tue Apr 27 07:53:53 2021
From: matthew.f.cechini at nasa.gov (Cechini, Matthew F. (GSFC-423.0)[Science Systems & Applications, Inc.])
Date: Tue, 27 Apr 2021 14:53:53 +0000
Subject: [gdal-dev] [EXTERNAL] Re:  vsis3 worldfile support?
In-Reply-To: <59637e4b-5807-3575-1fe4-87efebf1bebf@spatialys.com>
References: <34917F2F-5CAF-4B3D-A004-A4F18C762ADC@nasa.gov>
 <59637e4b-5807-3575-1fe4-87efebf1bebf@spatialys.com>
Message-ID: <7A7166D9-F015-4525-BD0D-F4F76D965D13@nasa.gov>

Ah, I found the problem. Looks like it was loading the world file, but the file had an error in it.  Using that CPL_VSIL? parameter helped verify that the file was being read:


$ gdalinfo --config CPL_VSIL_CURL_ALLOWED_EXTENSIONS ".png" /vsis3/bucket/prefix/test_pal.png


ERROR 4: CSLLoad2("/vsis3/bucket/prefix/test_pal.pgw") failed: unable to open file.

ERROR 4: CSLLoad2("/vsis3/bucket/prefix/test_pal.wld") failed: unable to open file.

Thanks,
Matt
.................................................................
Matthew Cechini
Contractor, Science Systems and Applications, Inc.
NASA GIBS Systems/Software Engineer
410.205.6272

From: Even Rouault <even.rouault at spatialys.com>
Date: Tuesday, April 27, 2021 at 10:20 AM
To: Matthew Cechini <matthew.f.cechini at nasa.gov>, "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Subject: [EXTERNAL] Re: [gdal-dev] vsis3 worldfile support?


Matt,

I've just tested and this works for me. Can't think of a reason besides a permission problem with the .pgw/.wld files, or if you've set the CPL_VSIL_CURL_ALLOWED_EXTENSIONS configuration option to "png"

Even
Le 27/04/2021 ? 16:04, Cechini, Matthew F. (GSFC-423.0)[Science Systems & Applications, Inc.] via gdal-dev a ?crit :
Using GDAL 2.4.4, I?m attempting to read a PNG file in S3 with this prefix: /vsis3/bucket/prefix/image.png.  Alongside that object are also image.pgw an image.wld objects (same content).  When I run gdalinfo on the /vsis3 path, I?m not seeing the geolocation information.  Am I doing something wrong? Do I need a new version? Is this a known limitation?

Thanks,
Matt
.................................................................
Matthew Cechini
Contractor, Science Systems and Applications, Inc.
NASA GIBS Systems/Software Engineer
410.205.6272



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev<https://gcc02.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-dev&data=04%7C01%7Cmatthew.f.cechini%40nasa.gov%7C7d5262a53a684312f10b08d909879f10%7C7005d45845be48ae8140d43da96dd17b%7C0%7C0%7C637551300362703001%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=70fKEFPR3jwFrlWWnPm3bDmdWjoFGQSJsg5skTYHgzo%3D&reserved=0>

--

http://www.spatialys.com<https://gcc02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.spatialys.com%2F&data=04%7C01%7Cmatthew.f.cechini%40nasa.gov%7C7d5262a53a684312f10b08d909879f10%7C7005d45845be48ae8140d43da96dd17b%7C0%7C0%7C637551300362703001%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=Q%2BufPEWlgujx2z39abr07BsxEC7eqWZqLY3zepYI%2Bd0%3D&reserved=0>

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210427/382657e3/attachment-0001.html>

From pierre at chachatelier.fr  Tue Apr 27 05:52:29 2021
From: pierre at chachatelier.fr (Pierre Chatelier)
Date: Tue, 27 Apr 2021 14:52:29 +0200
Subject: [gdal-dev] Global min/max
Message-ID: <6600526e-0efd-dcb6-fb07-babb932b5605@chachatelier.fr>

I have found the GetStatistics 
<https://gdal.org/doxygen/classGDALRasterBand.html#a6aa58b6f0a0c17722b9bf763a96ff069>() 
method of GDALRasterBand(), but I did not find any GetStatistics() 
available for the whole dataset at a glance.
While it is pretty obvious that it can be achieved by calling 
GetStatictics() for all bands and gather the results, I am concerned 
about performance.
In my case, I use an ENVI driver with BIL or BIP data interleaving. 
Calling GetStatictics() on bands will induce an overhead of data 
de-interleaving to gather band raw values, but it is a pity since I will 
process all data anyway. I would expect to benefit from memory locality.

Did I miss something ?


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210427/5aee6ec6/attachment.html>

From j1 at jimenezshaw.com  Tue Apr 27 09:01:22 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Tue, 27 Apr 2021 18:01:22 +0200
Subject: [gdal-dev] GetAxesCount returns a wrong value
In-Reply-To: <7de9128d-8333-bf61-f621-708791999372@spatialys.com>
References: <CADRrdKsfZ5rRzMeZe8o8_=9dAB9=AaT_14O0AKV=cSM4T+1L+w@mail.gmail.com>
 <7de9128d-8333-bf61-f621-708791999372@spatialys.com>
Message-ID: <CADRrdKsSM2C9bdYw3dn2RmL0skFkNKgbXSPe3_ZjH+LMnpNA9g@mail.gmail.com>

Thanks Even.

In the mean time (it is not easy to me patching and rebuilding now) I will
use this helper workaround function (I hope I understood correctly GetAxis
behaviour)

int getAxesCount(const OGRSpatialReference& sr)
{
    int axesCount = 0;
    while (nullptr != sr.GetAxis(nullptr, axesCount, nullptr))
    {
        axesCount++;
    }
    return axesCount;
}

Cheers
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Mon, 26 Apr 2021 at 21:09, Even Rouault <even.rouault at spatialys.com>
wrote:

>
> > Is this a know bug?
> Now, yes :-)
> > Maybe fixed in PROJ 8.0.0? (I had not time to test it there yet)
>
> No, it is GDAL specific. You'll need to patch
> OGRSpatialReference::GetAxesCount() in the ( d->m_pjType ==
> PJ_TYPE_COMPOUND_CRS ) case, to test if a component of the compound CRS
> is a bound CRS, and if so, call proj_crs_get_coordinate_system() on the
> source CRS of the bound CRS ( with proj_get_source_crs() ) and not the
> bound CRS itself
>
> Even
>
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210427/b203a7ec/attachment.html>

From gdt at lexort.com  Tue Apr 27 10:20:36 2021
From: gdt at lexort.com (Greg Troxel)
Date: Tue, 27 Apr 2021 13:20:36 -0400
Subject: [gdal-dev] GDAL 3.3.0 RC1 available
In-Reply-To: <7c03844b-f590-e1ba-1f66-b4c85cf6b187@spatialys.com> (Even
 Rouault's message of "Mon, 26 Apr 2021 14:57:18 +0200")
References: <7c03844b-f590-e1ba-1f66-b4c85cf6b187@spatialys.com>
Message-ID: <rmi35vb4paz.fsf@s1.lexort.com>


I updated from beta1 to rc1.  The transform issue appears fixed.

In building python builds, I saw a large number of differences from my
beta1 build and my rc1 build.  I think this is the "esoteric scripts"
cleanup, but if antyhing in this diff seems off, let me know.

--- PLIST.beta	2021-04-25 11:01:56.864454375 -0400
+++ PLIST	2021-04-27 13:15:14.169682455 -0400
@@ -2,4 +1,0 @@
-bin/epsg_tr.py
-bin/esri2wkt.py
-bin/gcps2vec.py
-bin/gcps2wld.py
@@ -8 +3,0 @@
-bin/gdal_auth.py
@@ -19 +13,0 @@
-bin/gdalchksum.py
@@ -21,2 +14,0 @@
-bin/gdalident.py
-bin/gdalimport.py
@@ -24 +15,0 @@
-bin/mkgraticule.py
@@ -71,0 +63,2 @@
+${PYSITELIB}/osgeo_utils/auxiliary/gdal_argparse.py
+${PYSITELIB}/osgeo_utils/auxiliary/gdal_argparse.pyc
@@ -84,8 +76,0 @@
-${PYSITELIB}/osgeo_utils/epsg_tr.py
-${PYSITELIB}/osgeo_utils/epsg_tr.pyc
-${PYSITELIB}/osgeo_utils/esri2wkt.py
-${PYSITELIB}/osgeo_utils/esri2wkt.pyc
-${PYSITELIB}/osgeo_utils/gcps2vec.py
-${PYSITELIB}/osgeo_utils/gcps2vec.pyc
-${PYSITELIB}/osgeo_utils/gcps2wld.py
-${PYSITELIB}/osgeo_utils/gcps2wld.pyc
@@ -96,2 +80,0 @@
-${PYSITELIB}/osgeo_utils/gdal_auth.py
-${PYSITELIB}/osgeo_utils/gdal_auth.pyc
@@ -118,2 +100,0 @@
-${PYSITELIB}/osgeo_utils/gdalchksum.py
-${PYSITELIB}/osgeo_utils/gdalchksum.pyc
@@ -122,4 +102,0 @@
-${PYSITELIB}/osgeo_utils/gdalident.py
-${PYSITELIB}/osgeo_utils/gdalident.pyc
-${PYSITELIB}/osgeo_utils/gdalimport.py
-${PYSITELIB}/osgeo_utils/gdalimport.pyc
@@ -128,2 +104,0 @@
-${PYSITELIB}/osgeo_utils/mkgraticule.py
-${PYSITELIB}/osgeo_utils/mkgraticule.pyc
@@ -149,0 +125,4 @@
+${PYSITELIB}/osgeo_utils/samples/epsg_tr.py
+${PYSITELIB}/osgeo_utils/samples/epsg_tr.pyc
+${PYSITELIB}/osgeo_utils/samples/esri2wkt.py
+${PYSITELIB}/osgeo_utils/samples/esri2wkt.pyc
@@ -155,0 +135,4 @@
+${PYSITELIB}/osgeo_utils/samples/gcps2vec.py
+${PYSITELIB}/osgeo_utils/samples/gcps2vec.pyc
+${PYSITELIB}/osgeo_utils/samples/gcps2wld.py
+${PYSITELIB}/osgeo_utils/samples/gcps2wld.pyc
@@ -157,0 +141,2 @@
+${PYSITELIB}/osgeo_utils/samples/gdal_auth.py
+${PYSITELIB}/osgeo_utils/samples/gdal_auth.pyc
@@ -177,0 +163,2 @@
+${PYSITELIB}/osgeo_utils/samples/gdalchksum.py
+${PYSITELIB}/osgeo_utils/samples/gdalchksum.pyc
@@ -181,0 +169,4 @@
+${PYSITELIB}/osgeo_utils/samples/gdalident.py
+${PYSITELIB}/osgeo_utils/samples/gdalident.pyc
+${PYSITELIB}/osgeo_utils/samples/gdalimport.py
+${PYSITELIB}/osgeo_utils/samples/gdalimport.pyc
@@ -201,0 +193,2 @@
+${PYSITELIB}/osgeo_utils/samples/mkgraticule.py
+${PYSITELIB}/osgeo_utils/samples/mkgraticule.pyc
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210427/14a92665/attachment.sig>

From idan at miara.com  Tue Apr 27 10:24:15 2021
From: idan at miara.com (Idan Miara)
Date: Tue, 27 Apr 2021 20:24:15 +0300
Subject: [gdal-dev] GDAL 3.3.0 RC1 available
In-Reply-To: <rmi35vb4paz.fsf@s1.lexort.com>
References: <7c03844b-f590-e1ba-1f66-b4c85cf6b187@spatialys.com>
 <rmi35vb4paz.fsf@s1.lexort.com>
Message-ID: <CAEDrt39BBDo2bHKvKVZBkN6hD8U3cvrhG9K9PFLVfrimXN-h_g@mail.gmail.com>

I can confirm that these scripts are indeed the samples that were moved,
Plus the arg_parser.py improvements file.


On Tue, 27 Apr 2021, 20:20 Greg Troxel, <gdt at lexort.com> wrote:

>
> I updated from beta1 to rc1.  The transform issue appears fixed.
>
> In building python builds, I saw a large number of differences from my
> beta1 build and my rc1 build.  I think this is the "esoteric scripts"
> cleanup, but if antyhing in this diff seems off, let me know.
>
> --- PLIST.beta  2021-04-25 11:01:56.864454375 -0400
> +++ PLIST       2021-04-27 13:15:14.169682455 -0400
> @@ -2,4 +1,0 @@
> -bin/epsg_tr.py
> -bin/esri2wkt.py
> -bin/gcps2vec.py
> -bin/gcps2wld.py
> @@ -8 +3,0 @@
> -bin/gdal_auth.py
> @@ -19 +13,0 @@
> -bin/gdalchksum.py
> @@ -21,2 +14,0 @@
> -bin/gdalident.py
> -bin/gdalimport.py
> @@ -24 +15,0 @@
> -bin/mkgraticule.py
> @@ -71,0 +63,2 @@
> +${PYSITELIB}/osgeo_utils/auxiliary/gdal_argparse.py
> +${PYSITELIB}/osgeo_utils/auxiliary/gdal_argparse.pyc
> @@ -84,8 +76,0 @@
> -${PYSITELIB}/osgeo_utils/epsg_tr.py
> -${PYSITELIB}/osgeo_utils/epsg_tr.pyc
> -${PYSITELIB}/osgeo_utils/esri2wkt.py
> -${PYSITELIB}/osgeo_utils/esri2wkt.pyc
> -${PYSITELIB}/osgeo_utils/gcps2vec.py
> -${PYSITELIB}/osgeo_utils/gcps2vec.pyc
> -${PYSITELIB}/osgeo_utils/gcps2wld.py
> -${PYSITELIB}/osgeo_utils/gcps2wld.pyc
> @@ -96,2 +80,0 @@
> -${PYSITELIB}/osgeo_utils/gdal_auth.py
> -${PYSITELIB}/osgeo_utils/gdal_auth.pyc
> @@ -118,2 +100,0 @@
> -${PYSITELIB}/osgeo_utils/gdalchksum.py
> -${PYSITELIB}/osgeo_utils/gdalchksum.pyc
> @@ -122,4 +102,0 @@
> -${PYSITELIB}/osgeo_utils/gdalident.py
> -${PYSITELIB}/osgeo_utils/gdalident.pyc
> -${PYSITELIB}/osgeo_utils/gdalimport.py
> -${PYSITELIB}/osgeo_utils/gdalimport.pyc
> @@ -128,2 +104,0 @@
> -${PYSITELIB}/osgeo_utils/mkgraticule.py
> -${PYSITELIB}/osgeo_utils/mkgraticule.pyc
> @@ -149,0 +125,4 @@
> +${PYSITELIB}/osgeo_utils/samples/epsg_tr.py
> +${PYSITELIB}/osgeo_utils/samples/epsg_tr.pyc
> +${PYSITELIB}/osgeo_utils/samples/esri2wkt.py
> +${PYSITELIB}/osgeo_utils/samples/esri2wkt.pyc
> @@ -155,0 +135,4 @@
> +${PYSITELIB}/osgeo_utils/samples/gcps2vec.py
> +${PYSITELIB}/osgeo_utils/samples/gcps2vec.pyc
> +${PYSITELIB}/osgeo_utils/samples/gcps2wld.py
> +${PYSITELIB}/osgeo_utils/samples/gcps2wld.pyc
> @@ -157,0 +141,2 @@
> +${PYSITELIB}/osgeo_utils/samples/gdal_auth.py
> +${PYSITELIB}/osgeo_utils/samples/gdal_auth.pyc
> @@ -177,0 +163,2 @@
> +${PYSITELIB}/osgeo_utils/samples/gdalchksum.py
> +${PYSITELIB}/osgeo_utils/samples/gdalchksum.pyc
> @@ -181,0 +169,4 @@
> +${PYSITELIB}/osgeo_utils/samples/gdalident.py
> +${PYSITELIB}/osgeo_utils/samples/gdalident.pyc
> +${PYSITELIB}/osgeo_utils/samples/gdalimport.py
> +${PYSITELIB}/osgeo_utils/samples/gdalimport.pyc
> @@ -201,0 +193,2 @@
> +${PYSITELIB}/osgeo_utils/samples/mkgraticule.py
> +${PYSITELIB}/osgeo_utils/samples/mkgraticule.pyc
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210427/9b532223/attachment.html>

From andrew.bell.ia at gmail.com  Tue Apr 27 11:17:21 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 27 Apr 2021 14:17:21 -0400
Subject: [gdal-dev] Test Failures
Message-ID: <CACJ51z3so6MDEfRq06HPBpSekg5GR7Z5Yy-VHUkRu1imJ+5xoA@mail.gmail.com>

Hi,

I'm having a few test failures with gdal master on OSX. They seem related
to transformations. I notice that the CI build is using PROJ 7.1. I'm
linking PROJ 8.0. An example failure follows. Can this be explained by PROJ
versions or are there other issues that I might need to investigate?

==============

>           assert got_cs == [26293, 23439, 14955]
E           assert [26228, 22085, 12992] == [26293, 23439, 14955]
E             At index 0 diff: 26228 != 26293
E             Use -v to get the full diff

/Users/acbell/gdal/autotest/gcore/cog.py:392: AssertionError
--------------------------------------- Captured stderr call
---------------------------------------
ERROR 1: PROJ: webmerc: Invalid latitude
ERROR 1: PROJ: webmerc: Invalid latitude
ERROR 1: PROJ: webmerc: Invalid latitude

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210427/d4a0f761/attachment-0001.html>

From even.rouault at spatialys.com  Tue Apr 27 11:27:07 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 27 Apr 2021 20:27:07 +0200
Subject: [gdal-dev] Test Failures
In-Reply-To: <CACJ51z3so6MDEfRq06HPBpSekg5GR7Z5Yy-VHUkRu1imJ+5xoA@mail.gmail.com>
References: <CACJ51z3so6MDEfRq06HPBpSekg5GR7Z5Yy-VHUkRu1imJ+5xoA@mail.gmail.com>
Message-ID: <2a505ec9-e8b1-b644-747e-ac37e5c86b2e@spatialys.com>

Andrew,

This could be due to the PROJ version, but as I'm running with 8.0 too 
(and one of the CI config runs PROJ master), I suspect you just need to 
install the "conus" grid for NAD27 to WGS84 transformations into 
{proj_prefix}/share/proj . Unpack 
http://download.osgeo.org/proj/proj-datumgrid-1.8.tar.gz

Even

Le 27/04/2021 ? 20:17, Andrew Bell a ?crit?:
> Hi,
>
> I'm having a few test failures with gdal master on OSX. They seem 
> related to transformations. I notice that the CI build is using PROJ 
> 7.1. I'm linking PROJ 8.0. An example failure follows. Can this be 
> explained by PROJ versions or are there other issues that I might need 
> to investigate?
>
> ==============
>
> > ? ? ? ? ? assert got_cs == [26293, 23439, 14955]
> E ? ? ? ? ? assert [26228, 22085, 12992] == [26293, 23439, 14955]
> E ? ? ? ? ? ? At index 0 diff: 26228 != 26293
> E ? ? ? ? ? ? Use -v to get the full diff
>
> /Users/acbell/gdal/autotest/gcore/cog.py:392: AssertionError
> --------------------------------------- Captured stderr call 
> ---------------------------------------
> ERROR 1: PROJ: webmerc: Invalid latitude
> ERROR 1: PROJ: webmerc: Invalid latitude
> ERROR 1: PROJ: webmerc: Invalid latitude
>
> -- 
> Andrew Bell
> andrew.bell.ia at gmail.com <mailto:andrew.bell.ia at gmail.com>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210427/5cb75bbd/attachment.html>

From neil.walker.1973 at gmail.com  Tue Apr 27 11:46:34 2021
From: neil.walker.1973 at gmail.com (Neil Walker)
Date: Tue, 27 Apr 2021 19:46:34 +0100
Subject: [gdal-dev] very slow sql ogr2ogr conversion
Message-ID: <CAJa31BfRCx6b686Fu-yVUR3mMvFAL5sEq_wT8miZoGQkO-VSHg@mail.gmail.com>

Hello,

First time user, I hope this is the right mailing list :)



I have a fairly small (37mb - 160,000 linestrings) shp file and it loads
into QGIS in a couple of seconds. I want to import this into sql server, so
used the following ogr2ogr command:



ogr2ogr -f "MSSQLSpatial"
"MSSQL:server=myserver;database=mydatabase;Trusted_Connection=True;"
"NZ_RoadLink.shp" -a_srs "EPSG:27700" -nln "neilshape" -progress -lco
UPLOAD_GEOM_FORMAT=wkt



It's UK Ordnance Survey open roads data if anyone is interested. After 40
minutes it got to 3% complete then I gave up.


So I instead saved it as a CSV and it took about 1 minute, I then imported
this CSV into sql server and that took 1 minute too.



I then ran the following command and it worked ok too after a few seconds,
I don't know if it's right or not but looks ok...



alter table add geom GEOMETRY

update table set geom=replace(wkt,'Z','')



So, can anyone let me know what could be causing this massive slowdown
because my database connection is fast and there are no network issues. I
have tried using all the available sql server drivers (SQL Server, default
ODBC) but it's still this slow. I actually also have 'sql server native
11.0' but ogr2ogr refused to use this.


If nobody has a clue can you confirm if my removal of 'Z' in this command
is ok or what a better way is?


Also, I don't know if it's just the way it is but I kept getting 'invalid
database object mydatabase' until I entered the UPLOAD_GEOM_FORMAT=wkt
parameter. Clearly 'mydatabase' has nothing to do with the error...


Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210427/56d563ad/attachment.html>

From andrew.bell.ia at gmail.com  Tue Apr 27 11:49:39 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 27 Apr 2021 14:49:39 -0400
Subject: [gdal-dev] Test Failures
In-Reply-To: <2a505ec9-e8b1-b644-747e-ac37e5c86b2e@spatialys.com>
References: <CACJ51z3so6MDEfRq06HPBpSekg5GR7Z5Yy-VHUkRu1imJ+5xoA@mail.gmail.com>
 <2a505ec9-e8b1-b644-747e-ac37e5c86b2e@spatialys.com>
Message-ID: <CACJ51z1vc-WUCtHz-jzgO0FY1850whhMU=ZUwa89k5wPFvX9XA@mail.gmail.com>

On Tue, Apr 27, 2021 at 2:27 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Andrew,
>
> This could be due to the PROJ version, but as I'm running with 8.0 too
> (and one of the CI config runs PROJ master), I suspect you just need to
> install the "conus" grid for NAD27 to WGS84 transformations into
> {proj_prefix}/share/proj . Unpack
> http://download.osgeo.org/proj/proj-datumgrid-1.8.tar.gz
>
I have PROJ_NETWORK set to ON. I was under the impression that this would
cause PROJ to find whatever grids shift files it needed at runtime. Is
there more configuration that's necessary to get this to happen or do I
misunderstand the PROJ_NETWORK setting?

Thanks,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210427/5da3bc5f/attachment.html>

From even.rouault at spatialys.com  Tue Apr 27 12:02:57 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 27 Apr 2021 21:02:57 +0200
Subject: [gdal-dev] Test Failures
In-Reply-To: <CACJ51z1vc-WUCtHz-jzgO0FY1850whhMU=ZUwa89k5wPFvX9XA@mail.gmail.com>
References: <CACJ51z3so6MDEfRq06HPBpSekg5GR7Z5Yy-VHUkRu1imJ+5xoA@mail.gmail.com>
 <2a505ec9-e8b1-b644-747e-ac37e5c86b2e@spatialys.com>
 <CACJ51z1vc-WUCtHz-jzgO0FY1850whhMU=ZUwa89k5wPFvX9XA@mail.gmail.com>
Message-ID: <eacc8ee5-16ab-c3da-7fac-daffaa2a5ef0@spatialys.com>


Le 27/04/2021 ? 20:49, Andrew Bell a ?crit?:
>
>
> On Tue, Apr 27, 2021 at 2:27 PM Even Rouault 
> <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>> wrote:
>
>     Andrew,
>
>     This could be due to the PROJ version, but as I'm running with 8.0
>     too (and one of the CI config runs PROJ master), I suspect you
>     just need to install the "conus" grid for NAD27 to WGS84
>     transformations into {proj_prefix}/share/proj . Unpack
>     http://download.osgeo.org/proj/proj-datumgrid-1.8.tar.gz
>     <http://download.osgeo.org/proj/proj-datumgrid-1.8.tar.gz>
>
> I have PROJ_NETWORK set to ON. I was under the impression that this 
> would cause PROJ to find whatever grids shift files it needed at 
> runtime. Is there more configuration that's necessary to get this to 
> happen or do I misunderstand the PROJ_NETWORK setting?

That should be fine. Actually I was wrong. This test case doesn't 
involve any datum shift / grids as it is EPSG:4326 to EPSG:3857 
reprojection.

That might then just be a subtle different rounding issue in 
computations in GDAL and/or PROJ, or more likely, due to using a 
different JPEG library as this test case involves JPEG compression. If 
that was the case, you might add your checksums as an alternative 
expected output. We do that in a number of places.

Looking a few lines before the failure, I actually see that the CI got 
that issue and we worked around it with:

 ??? if sys.platform == 'darwin' and gdal.GetConfigOption('TRAVIS', 
None) is not None:
 ??????? assert got_cs != [0, 0, 0]
 ??? else:

Could you run

gdal_translate ../autotest/gdrivers/data/small_world.tif out.tif -of COG 
co TILING_SCHEME=GoogleMapsCompatible -co COMPRESS=JPEG

and attach the resulting file ?

>
> Thanks,
> -- 
> Andrew Bell
> andrew.bell.ia at gmail.com <mailto:andrew.bell.ia at gmail.com>

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210427/3780f992/attachment.html>

From ejovenitti at gmail.com  Tue Apr 27 18:01:53 2021
From: ejovenitti at gmail.com (jovajova24)
Date: Tue, 27 Apr 2021 18:01:53 -0700 (MST)
Subject: [gdal-dev] Nitf Metadata parsing
In-Reply-To: <c7e9ab8a-97a6-4e73-a0b5-c668772f4453@email.android.com>
References: <1619373164474-0.post@n6.nabble.com>
 <044201d73a4d$813cd7a0$83b686e0$@frogmouth.net>
 <1619462720719-0.post@n6.nabble.com>
 <c7e9ab8a-97a6-4e73-a0b5-c668772f4453@email.android.com>
Message-ID: <1619571713234-0.post@n6.nabble.com>

Brad, sorry for pushing but I'm going in circles here. It looks like you and
Even had this discussion i.e., 
http://osgeo-org.1560.x6.nabble.com/gdal-dev-Accessing-DES-in-NITF-through-GDAL-td5434141.html

You gave me the example of how to output the DES's  from the command line,
but the builds I'm pulling can't actually get access to the DES data on
Windows. 

Was your build that you showed the output from above complied with the
ESRI_NITF flagged as Even suggested? 

If yes, I can't figure out how to set the ESRI_NITF build flagged, any
thoughts?

Thanks again.





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From andrew.bell.ia at gmail.com  Tue Apr 27 18:30:00 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 27 Apr 2021 21:30:00 -0400
Subject: [gdal-dev] PROJ context and threads
Message-ID: <CACJ51z0TCYhNXOodHi1i2WL1sZ0w7LO=2wx91v+Oz_NYis_-ow@mail.gmail.com>

Hi,

I have a process with a large thread pool. The threads occasionally make a
GDAL call that in turn calls a PROJ function. From what I can tell, this
causes the opening of a PROJ context that holds a handle/descriptor to the
PROJ database. I believe that this file descriptor is held open in TLS
until the thread is destroyed. This ends up keeping enough files open for
my application that I run out of file descriptors.

Am I properly understanding the PROJ context behavior? Is there any way to
force the deallocation of the PROJ context so that the file descriptor for
the database can be closed?

Thanks,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210427/ef437743/attachment.html>

From matthewsbaran at gmail.com  Tue Apr 27 18:45:31 2021
From: matthewsbaran at gmail.com (Matthew Baran)
Date: Tue, 27 Apr 2021 21:45:31 -0400
Subject: [gdal-dev] Nitf Metadata parsing
In-Reply-To: <1619571713234-0.post@n6.nabble.com>
References: <1619373164474-0.post@n6.nabble.com>
 <044201d73a4d$813cd7a0$83b686e0$@frogmouth.net>
 <1619462720719-0.post@n6.nabble.com>
 <c7e9ab8a-97a6-4e73-a0b5-c668772f4453@email.android.com>
 <1619571713234-0.post@n6.nabble.com>
Message-ID: <CAM2JLFk=_=dX1fXsJwVCSdRhTDFgpM8HJWdH6Weuyj9waSWGYw@mail.gmail.com>

Hi,

Please note that the DES related PR was merged after the 3.2 release -
hence no 3.2.x packages will have the xml:DES metadata domain or the DES
related objects.

To access the xml:DES metadata domain you will either have to build the
source code from the current master branch, or use the nightly docker
build, or wait for 3.3 packages to be released.

If you use the latest source from master you do not need to enable the
ESRI_BUILD flag to access DESs.  You can simply use
GDALDataset::GetMetadata() or command line as Brad demonstrated - no
special build settings required.

Hope that helps-

Matt

On Tue, Apr 27, 2021 at 9:02 PM jovajova24 <ejovenitti at gmail.com> wrote:

> Brad, sorry for pushing but I'm going in circles here. It looks like you
> and
> Even had this discussion i.e.,
>
> http://osgeo-org.1560.x6.nabble.com/gdal-dev-Accessing-DES-in-NITF-through-GDAL-td5434141.html
>
> You gave me the example of how to output the DES's  from the command line,
> but the builds I'm pulling can't actually get access to the DES data on
> Windows.
>
> Was your build that you showed the output from above complied with the
> ESRI_NITF flagged as Even suggested?
>
> If yes, I can't figure out how to set the ESRI_NITF build flagged, any
> thoughts?
>
> Thanks again.
>
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Matthew S. Baran
matthewsbaran at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210427/db16993f/attachment.html>

From sean.gillies at gmail.com  Tue Apr 27 18:59:41 2021
From: sean.gillies at gmail.com (Sean Gillies)
Date: Tue, 27 Apr 2021 19:59:41 -0600
Subject: [gdal-dev] GDAL 3.3.0 RC1 available
In-Reply-To: <7c03844b-f590-e1ba-1f66-b4c85cf6b187@spatialys.com>
References: <7c03844b-f590-e1ba-1f66-b4c85cf6b187@spatialys.com>
Message-ID: <CAOodmJriDU6zVAyCyG7yN5Xva0oY1NkJVgh6ZqO_CwzkCS51VQ@mail.gmail.com>

Hi Even,

I see that there's also a 3.2.3 candidate. Usually we discontinue the
previous minor version, right? Why in this case are we have a 3.3.0rc1 and
a 3.2.3rc1?

On Mon, Apr 26, 2021 at 6:57 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> I have prepared a GDAL/OGR 3.3.0 release candidate. The feedback on beta1
> was useful to spot and fix a few bugs.
>
> The changes between beta1 and RC1 are identified in:
>
> https://github.com/OSGeo/gdal/commit/a882173d688e6042c9dc7b1b57d8d169b04abe2b
> Note a potential impact on packaging recipees regarding a few esoteric
> untested/undocumented python scripts,
> now moved as "samples" scripts of the gdal-utils package
>
> Pick up an archive among the following ones (by ascending size):
>
>    https://download.osgeo.org/gdal/3.3.0/gdal-3.3.0rc1.tar.xz
>    https://download.osgeo.org/gdal/3.3.0/gdal-3.3.0rc1.tar.gz
>    https://download.osgeo.org/gdal/3.3.0/gdal330rc1.zip
>
> A snapshot of the gdalautotest suite is also available :
>
>    https://download.osgeo.org/gdal/3.3.0/gdalautotest-3.3.0rc1.tar.gz
>    https://download.osgeo.org/gdal/3.3.0/gdalautotest-3.3.0rc1.zip
>
> A snapshot of the documentation is at:
>
>    https://download.osgeo.org/gdal/3.3.0/gdal330doc.zip
>
> GDAL-GRASS plugin:
>
>    https://download.osgeo.org/gdal/3.3.0/gdal-grass-3.3.0.tar.gz
>
> NEWS at:
>
>    https://github.com/OSGeo/gdal/blob/v3.3.0RC1/gdal/NEWS
>
> I'll call for a vote promoting it to final later this week if no
> serious problems are reported before.
>
> release/3.3 branch has been created for bug fixes and master is now
> 3.4.0dev
>
> Best regards,
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210427/2a09736c/attachment-0001.html>

From alansnow21 at gmail.com  Tue Apr 27 20:35:43 2021
From: alansnow21 at gmail.com (Alan Snow)
Date: Tue, 27 Apr 2021 22:35:43 -0500
Subject: [gdal-dev] PROJ context and threads
In-Reply-To: <CACJ51z0TCYhNXOodHi1i2WL1sZ0w7LO=2wx91v+Oz_NYis_-ow@mail.gmail.com>
References: <CACJ51z0TCYhNXOodHi1i2WL1sZ0w7LO=2wx91v+Oz_NYis_-ow@mail.gmail.com>
Message-ID: <CAGybdFRdznXe+u-SYtmHOtDf79d=q-XejWM7rm8w1vfnAgKMfg@mail.gmail.com>

You are correct. Here is the related issue:
https://github.com/OSGeo/PROJ/issues/1565

The solution would be to use proj_context_set_autoclose_database. This can
reduce performance for single threaded applications, so it would probably
be good to have a way to toggle it on for multi-threaded applications.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210427/909d7eb8/attachment.html>

From alansnow21 at gmail.com  Tue Apr 27 20:43:52 2021
From: alansnow21 at gmail.com (Alan Snow)
Date: Tue, 27 Apr 2021 22:43:52 -0500
Subject: [gdal-dev] PROJ context and threads
In-Reply-To: <CAGybdFRdznXe+u-SYtmHOtDf79d=q-XejWM7rm8w1vfnAgKMfg@mail.gmail.com>
References: <CACJ51z0TCYhNXOodHi1i2WL1sZ0w7LO=2wx91v+Oz_NYis_-ow@mail.gmail.com>
 <CAGybdFRdznXe+u-SYtmHOtDf79d=q-XejWM7rm8w1vfnAgKMfg@mail.gmail.com>
Message-ID: <CAGybdFS=teN25xWYpd15yWh4L-xFx+81U5Qh8tQAOGz1YM5jUA@mail.gmail.com>

By default pyproj uses the autoclose option and provides this option for
users who want better performance and know they have a single threaded
application: https://pyproj4.github.io/pyproj/stable/api/global_context.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210427/d325adbe/attachment.html>

From muro.hector at gmail.com  Wed Apr 28 00:17:34 2021
From: muro.hector at gmail.com (Hector muro)
Date: Wed, 28 Apr 2021 08:17:34 +0100
Subject: [gdal-dev] very slow sql ogr2ogr conversion
In-Reply-To: <CAJa31BfRCx6b686Fu-yVUR3mMvFAL5sEq_wT8miZoGQkO-VSHg@mail.gmail.com>
References: <CAJa31BfRCx6b686Fu-yVUR3mMvFAL5sEq_wT8miZoGQkO-VSHg@mail.gmail.com>
Message-ID: <CAKdB_X5w-92trtvqZadcyLeJKzOui1UXf-YrgximrD=4fPa+AQ@mail.gmail.com>

Hi Neil,

I found a similar situation once. Are you using Linux? If so, I think the
ogr2ogr MSSQLSpatial driver for Linux does not use BCP (for multiple
inserts, which is why the CSV goes so fast).

If not, have you tried using the MSSQLSpatial Configuration Options for the
command? I don't remember exactly what they are but it's well documented.
It was something on the lines of "MSSQLSPATIAL_USE_BCP" and
"MSSQLSPATIAL_BCP_SIZE"

Another thing I found useful was to check the SSMS Profiler to see what's
going on as you run.

Finally, I was forced by circumstances to use SQL Server, but if that's not
your case, I strongly recommend you to get away from it :)

Hope this helps,

Hector


On Tue, 27 Apr 2021, 19:47 Neil Walker, <neil.walker.1973 at gmail.com> wrote:

> Hello,
>
> First time user, I hope this is the right mailing list :)
>
>
>
> I have a fairly small (37mb - 160,000 linestrings) shp file and it loads
> into QGIS in a couple of seconds. I want to import this into sql server, so
> used the following ogr2ogr command:
>
>
>
> ogr2ogr -f "MSSQLSpatial"
> "MSSQL:server=myserver;database=mydatabase;Trusted_Connection=True;"
> "NZ_RoadLink.shp" -a_srs "EPSG:27700" -nln "neilshape" -progress -lco
> UPLOAD_GEOM_FORMAT=wkt
>
>
>
> It's UK Ordnance Survey open roads data if anyone is interested. After 40
> minutes it got to 3% complete then I gave up.
>
>
> So I instead saved it as a CSV and it took about 1 minute, I then imported
> this CSV into sql server and that took 1 minute too.
>
>
>
> I then ran the following command and it worked ok too after a few seconds,
> I don't know if it's right or not but looks ok...
>
>
>
> alter table add geom GEOMETRY
>
> update table set geom=replace(wkt,'Z','')
>
>
>
> So, can anyone let me know what could be causing this massive slowdown
> because my database connection is fast and there are no network issues. I
> have tried using all the available sql server drivers (SQL Server, default
> ODBC) but it's still this slow. I actually also have 'sql server native
> 11.0' but ogr2ogr refused to use this.
>
>
> If nobody has a clue can you confirm if my removal of 'Z' in this command
> is ok or what a better way is?
>
>
> Also, I don't know if it's just the way it is but I kept getting 'invalid
> database object mydatabase' until I entered the UPLOAD_GEOM_FORMAT=wkt
> parameter. Clearly 'mydatabase' has nothing to do with the error...
>
>
> Thanks.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210428/e33cd8c9/attachment.html>

From bradh at frogmouth.net  Wed Apr 28 00:34:18 2021
From: bradh at frogmouth.net (bradh at frogmouth.net)
Date: Wed, 28 Apr 2021 17:34:18 +1000
Subject: [gdal-dev] Nitf Metadata parsing
In-Reply-To: <1619571713234-0.post@n6.nabble.com>
Message-ID: <a676d9eb-cdcd-4404-b110-d6cbe4dac6bd@email.android.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210428/777eb59f/attachment.html>

From neil.walker.1973 at gmail.com  Wed Apr 28 00:49:48 2021
From: neil.walker.1973 at gmail.com (Neil Walker)
Date: Wed, 28 Apr 2021 08:49:48 +0100
Subject: [gdal-dev] very slow sql ogr2ogr conversion
In-Reply-To: <CAKdB_X5w-92trtvqZadcyLeJKzOui1UXf-YrgximrD=4fPa+AQ@mail.gmail.com>
References: <CAJa31BfRCx6b686Fu-yVUR3mMvFAL5sEq_wT8miZoGQkO-VSHg@mail.gmail.com>
 <CAKdB_X5w-92trtvqZadcyLeJKzOui1UXf-YrgximrD=4fPa+AQ@mail.gmail.com>
Message-ID: <CAJa31BemHxjPF3nu5f2nJ0wA+eicE2VAQG7Ya3iSLQtKK4qhxg@mail.gmail.com>

Thanks, this is Windows 10. I turned debug on and noticed it said BCP 0.
BCP is available and I use it so not sure why it says 0?

However, I will test using that flag to see if it works or enables it. Like
I said, the other odd thing is it told me to try one of three drivers
(odbc, sql server, sql server native client). I have and use all 3 but when
I tried to use native client ogr2ogr failed to run with an error.

On Wed, 28 Apr 2021 at 08:17, Hector muro <muro.hector at gmail.com> wrote:

> Hi Neil,
>
> I found a similar situation once. Are you using Linux? If so, I think the
> ogr2ogr MSSQLSpatial driver for Linux does not use BCP (for multiple
> inserts, which is why the CSV goes so fast).
>
> If not, have you tried using the MSSQLSpatial Configuration Options for
> the command? I don't remember exactly what they are but it's well
> documented. It was something on the lines of "MSSQLSPATIAL_USE_BCP" and
> "MSSQLSPATIAL_BCP_SIZE"
>
> Another thing I found useful was to check the SSMS Profiler to see what's
> going on as you run.
>
> Finally, I was forced by circumstances to use SQL Server, but if that's
> not your case, I strongly recommend you to get away from it :)
>
> Hope this helps,
>
> Hector
>
>
> On Tue, 27 Apr 2021, 19:47 Neil Walker, <neil.walker.1973 at gmail.com>
> wrote:
>
>> Hello,
>>
>> First time user, I hope this is the right mailing list :)
>>
>>
>>
>> I have a fairly small (37mb - 160,000 linestrings) shp file and it loads
>> into QGIS in a couple of seconds. I want to import this into sql server, so
>> used the following ogr2ogr command:
>>
>>
>>
>> ogr2ogr -f "MSSQLSpatial"
>> "MSSQL:server=myserver;database=mydatabase;Trusted_Connection=True;"
>> "NZ_RoadLink.shp" -a_srs "EPSG:27700" -nln "neilshape" -progress -lco
>> UPLOAD_GEOM_FORMAT=wkt
>>
>>
>>
>> It's UK Ordnance Survey open roads data if anyone is interested. After 40
>> minutes it got to 3% complete then I gave up.
>>
>>
>> So I instead saved it as a CSV and it took about 1 minute, I then
>> imported this CSV into sql server and that took 1 minute too.
>>
>>
>>
>> I then ran the following command and it worked ok too after a few
>> seconds, I don't know if it's right or not but looks ok...
>>
>>
>>
>> alter table add geom GEOMETRY
>>
>> update table set geom=replace(wkt,'Z','')
>>
>>
>>
>> So, can anyone let me know what could be causing this massive slowdown
>> because my database connection is fast and there are no network issues. I
>> have tried using all the available sql server drivers (SQL Server, default
>> ODBC) but it's still this slow. I actually also have 'sql server native
>> 11.0' but ogr2ogr refused to use this.
>>
>>
>> If nobody has a clue can you confirm if my removal of 'Z' in this command
>> is ok or what a better way is?
>>
>>
>> Also, I don't know if it's just the way it is but I kept getting 'invalid
>> database object mydatabase' until I entered the UPLOAD_GEOM_FORMAT=wkt
>> parameter. Clearly 'mydatabase' has nothing to do with the error...
>>
>>
>> Thanks.
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210428/51f7e9f8/attachment-0001.html>

From neil.walker.1973 at gmail.com  Wed Apr 28 01:47:12 2021
From: neil.walker.1973 at gmail.com (Neil Walker)
Date: Wed, 28 Apr 2021 09:47:12 +0100
Subject: [gdal-dev] very slow sql ogr2ogr conversion
In-Reply-To: <CAKdB_X5w-92trtvqZadcyLeJKzOui1UXf-YrgximrD=4fPa+AQ@mail.gmail.com>
References: <CAJa31BfRCx6b686Fu-yVUR3mMvFAL5sEq_wT8miZoGQkO-VSHg@mail.gmail.com>
 <CAKdB_X5w-92trtvqZadcyLeJKzOui1UXf-YrgximrD=4fPa+AQ@mail.gmail.com>
Message-ID: <CAJa31BeAexWq1+w9GuCs0ab-9OZnytJoyZdGkO6cUChhNLKsPg@mail.gmail.com>

The problem is bcp.

The docs says bcp is only enabled for suitable drivers like native 11.0.

I have this because ssms uses it and its in my odbc list.

However when I try to use it as a driver, ogr2ogr fails. Only the default
driver works, which I presume does not support bcp.

So how can I get it to work when I know the driver is there but ogr refused
to use it?

Thanks.



On Wed, 28 Apr 2021, 08:17 Hector muro, <muro.hector at gmail.com> wrote:

> Hi Neil,
>
> I found a similar situation once. Are you using Linux? If so, I think the
> ogr2ogr MSSQLSpatial driver for Linux does not use BCP (for multiple
> inserts, which is why the CSV goes so fast).
>
> If not, have you tried using the MSSQLSpatial Configuration Options for
> the command? I don't remember exactly what they are but it's well
> documented. It was something on the lines of "MSSQLSPATIAL_USE_BCP" and
> "MSSQLSPATIAL_BCP_SIZE"
>
> Another thing I found useful was to check the SSMS Profiler to see what's
> going on as you run.
>
> Finally, I was forced by circumstances to use SQL Server, but if that's
> not your case, I strongly recommend you to get away from it :)
>
> Hope this helps,
>
> Hector
>
>
> On Tue, 27 Apr 2021, 19:47 Neil Walker, <neil.walker.1973 at gmail.com>
> wrote:
>
>> Hello,
>>
>> First time user, I hope this is the right mailing list :)
>>
>>
>>
>> I have a fairly small (37mb - 160,000 linestrings) shp file and it loads
>> into QGIS in a couple of seconds. I want to import this into sql server, so
>> used the following ogr2ogr command:
>>
>>
>>
>> ogr2ogr -f "MSSQLSpatial"
>> "MSSQL:server=myserver;database=mydatabase;Trusted_Connection=True;"
>> "NZ_RoadLink.shp" -a_srs "EPSG:27700" -nln "neilshape" -progress -lco
>> UPLOAD_GEOM_FORMAT=wkt
>>
>>
>>
>> It's UK Ordnance Survey open roads data if anyone is interested. After 40
>> minutes it got to 3% complete then I gave up.
>>
>>
>> So I instead saved it as a CSV and it took about 1 minute, I then
>> imported this CSV into sql server and that took 1 minute too.
>>
>>
>>
>> I then ran the following command and it worked ok too after a few
>> seconds, I don't know if it's right or not but looks ok...
>>
>>
>>
>> alter table add geom GEOMETRY
>>
>> update table set geom=replace(wkt,'Z','')
>>
>>
>>
>> So, can anyone let me know what could be causing this massive slowdown
>> because my database connection is fast and there are no network issues. I
>> have tried using all the available sql server drivers (SQL Server, default
>> ODBC) but it's still this slow. I actually also have 'sql server native
>> 11.0' but ogr2ogr refused to use this.
>>
>>
>> If nobody has a clue can you confirm if my removal of 'Z' in this command
>> is ok or what a better way is?
>>
>>
>> Also, I don't know if it's just the way it is but I kept getting 'invalid
>> database object mydatabase' until I entered the UPLOAD_GEOM_FORMAT=wkt
>> parameter. Clearly 'mydatabase' has nothing to do with the error...
>>
>>
>> Thanks.
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210428/6299c09e/attachment.html>

From even.rouault at spatialys.com  Wed Apr 28 01:59:23 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 28 Apr 2021 10:59:23 +0200
Subject: [gdal-dev] GDAL 3.3.0 RC1 available
In-Reply-To: <CAOodmJriDU6zVAyCyG7yN5Xva0oY1NkJVgh6ZqO_CwzkCS51VQ@mail.gmail.com>
References: <7c03844b-f590-e1ba-1f66-b4c85cf6b187@spatialys.com>
 <CAOodmJriDU6zVAyCyG7yN5Xva0oY1NkJVgh6ZqO_CwzkCS51VQ@mail.gmail.com>
Message-ID: <f3a19a2c-ba46-639b-355a-c83dc4c6d9e2@spatialys.com>

Sean,

This was the trend of the previous cycles. I see I also produced a 3.1.4 
at about the same time of 3.2.0. This offers 6 month of support for a 
given feature release. Otherwise that cuts it to 4 months.

Even

Le 28/04/2021 ? 03:59, Sean Gillies a ?crit?:
> Hi Even,
>
> I see that there's also a 3.2.3 candidate. Usually we discontinue the 
> previous minor version, right? Why in this case are we have a 3.3.0rc1 
> and a 3.2.3rc1?
>
> On Mon, Apr 26, 2021 at 6:57 AM Even Rouault 
> <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>> wrote:
>
>     Hi,
>
>     I have prepared a GDAL/OGR 3.3.0 release candidate. The feedback
>     on beta1 was useful to spot and fix a few bugs.
>
>     The changes between beta1 and RC1 are identified in:
>     https://github.com/OSGeo/gdal/commit/a882173d688e6042c9dc7b1b57d8d169b04abe2b
>     <https://github.com/OSGeo/gdal/commit/a882173d688e6042c9dc7b1b57d8d169b04abe2b>
>     Note a potential impact on packaging recipees regarding a few
>     esoteric untested/undocumented python scripts,
>     now moved as "samples" scripts of the gdal-utils package
>
>     Pick up an archive among the following ones (by ascending size):
>
>     https://download.osgeo.org/gdal/3.3.0/gdal-3.3.0rc1.tar.xz
>     <https://download.osgeo.org/gdal/3.3.0/gdal-3.3.0rc1.tar.xz>
>     https://download.osgeo.org/gdal/3.3.0/gdal-3.3.0rc1.tar.gz
>     <https://download.osgeo.org/gdal/3.3.0/gdal-3.3.0rc1.tar.gz>
>     https://download.osgeo.org/gdal/3.3.0/gdal330rc1.zip
>     <https://download.osgeo.org/gdal/3.3.0/gdal330rc1.zip>
>
>     A snapshot of the gdalautotest suite is also available :
>
>     https://download.osgeo.org/gdal/3.3.0/gdalautotest-3.3.0rc1.tar.gz
>     <https://download.osgeo.org/gdal/3.3.0/gdalautotest-3.3.0rc1.tar.gz>
>     https://download.osgeo.org/gdal/3.3.0/gdalautotest-3.3.0rc1.zip
>     <https://download.osgeo.org/gdal/3.3.0/gdalautotest-3.3.0rc1.zip>
>
>     A snapshot of the documentation is at:
>
>     https://download.osgeo.org/gdal/3.3.0/gdal330doc.zip
>     <https://download.osgeo.org/gdal/3.3.0/gdal330doc.zip>
>
>     GDAL-GRASS plugin:
>
>     https://download.osgeo.org/gdal/3.3.0/gdal-grass-3.3.0.tar.gz
>     <https://download.osgeo.org/gdal/3.3.0/gdal-grass-3.3.0.tar.gz>
>
>     NEWS at:
>
>     https://github.com/OSGeo/gdal/blob/v3.3.0RC1/gdal/NEWS
>     <https://github.com/OSGeo/gdal/blob/v3.3.0RC1/gdal/NEWS>
>
>     I'll call for a vote promoting it to final later this week if no
>     serious problems are reported before.
>
>     release/3.3 branch has been created for bug fixes and master is
>     now 3.4.0dev
>
>     Best regards,
>
>     Even
>
>     -- 
>     http://www.spatialys.com <http://www.spatialys.com>
>     My software is free, but my time generally not.
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>     <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>
>
> -- 
> Sean Gillies

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210428/5cf1faa8/attachment.html>

From andrew.bell.ia at gmail.com  Wed Apr 28 05:20:47 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 28 Apr 2021 08:20:47 -0400
Subject: [gdal-dev] Test Failures
In-Reply-To: <eacc8ee5-16ab-c3da-7fac-daffaa2a5ef0@spatialys.com>
References: <CACJ51z3so6MDEfRq06HPBpSekg5GR7Z5Yy-VHUkRu1imJ+5xoA@mail.gmail.com>
 <2a505ec9-e8b1-b644-747e-ac37e5c86b2e@spatialys.com>
 <CACJ51z1vc-WUCtHz-jzgO0FY1850whhMU=ZUwa89k5wPFvX9XA@mail.gmail.com>
 <eacc8ee5-16ab-c3da-7fac-daffaa2a5ef0@spatialys.com>
Message-ID: <CACJ51z3n9mgOLsK16d55E6N31mmU9hbLEKhyp53MQg9qc2d6Vg@mail.gmail.com>

Here is the output tif file along with the command and its terminal output.

On Tue, Apr 27, 2021 at 3:02 PM Even Rouault <even.rouault at spatialys.com>
wrote:

>
> Le 27/04/2021 ? 20:49, Andrew Bell a ?crit :
>
>
>
> On Tue, Apr 27, 2021 at 2:27 PM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Andrew,
>>
>> This could be due to the PROJ version, but as I'm running with 8.0 too
>> (and one of the CI config runs PROJ master), I suspect you just need to
>> install the "conus" grid for NAD27 to WGS84 transformations into
>> {proj_prefix}/share/proj . Unpack
>> http://download.osgeo.org/proj/proj-datumgrid-1.8.tar.gz
>>
> I have PROJ_NETWORK set to ON. I was under the impression that this would
> cause PROJ to find whatever grids shift files it needed at runtime. Is
> there more configuration that's necessary to get this to happen or do I
> misunderstand the PROJ_NETWORK setting?
>
> That should be fine. Actually I was wrong. This test case doesn't involve
> any datum shift / grids as it is EPSG:4326 to EPSG:3857 reprojection.
>
> That might then just be a subtle different rounding issue in computations
> in GDAL and/or PROJ, or more likely, due to using a different JPEG library
> as this test case involves JPEG compression. If that was the case, you
> might add your checksums as an alternative expected output. We do that in a
> number of places.
>
> Looking a few lines before the failure, I actually see that the CI got
> that issue and we worked around it with:
>
>     if sys.platform == 'darwin' and gdal.GetConfigOption('TRAVIS', None)
> is not None:
>         assert got_cs != [0, 0, 0]
>     else:
>
> Could you run
>
> gdal_translate ../autotest/gdrivers/data/small_world.tif out.tif -of COG
> co TILING_SCHEME=GoogleMapsCompatible -co COMPRESS=JPEG
>
> and attach the resulting file ?
>
>
> Thanks,
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210428/a75f6cb9/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdal_translate.tar.gz
Type: application/x-gzip
Size: 11851 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210428/a75f6cb9/attachment-0001.bin>

From even.rouault at spatialys.com  Wed Apr 28 05:35:00 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 28 Apr 2021 14:35:00 +0200
Subject: [gdal-dev] Test Failures
In-Reply-To: <CACJ51z3n9mgOLsK16d55E6N31mmU9hbLEKhyp53MQg9qc2d6Vg@mail.gmail.com>
References: <CACJ51z3so6MDEfRq06HPBpSekg5GR7Z5Yy-VHUkRu1imJ+5xoA@mail.gmail.com>
 <2a505ec9-e8b1-b644-747e-ac37e5c86b2e@spatialys.com>
 <CACJ51z1vc-WUCtHz-jzgO0FY1850whhMU=ZUwa89k5wPFvX9XA@mail.gmail.com>
 <eacc8ee5-16ab-c3da-7fac-daffaa2a5ef0@spatialys.com>
 <CACJ51z3n9mgOLsK16d55E6N31mmU9hbLEKhyp53MQg9qc2d6Vg@mail.gmail.com>
Message-ID: <916494ea-e710-e8ed-fa68-7e488ce11f74@spatialys.com>

Andew,

visually the difference between your image and the one generated on my 
PC are almost indistinguishable (no spatial shift at least). Please 
submit a PR adding your checksums as alternate accepted ones. You may 
just remove the "if sys.platform == 'darwin'" case. Hopefully adding 
your checksums should fix the OSX CI too

Even

Le 28/04/2021 ? 14:20, Andrew Bell a ?crit?:
> Here is the output tif file along with the command and its terminal 
> output.
>
> On Tue, Apr 27, 2021 at 3:02 PM Even Rouault 
> <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>> wrote:
>
>
>     Le 27/04/2021 ? 20:49, Andrew Bell a ?crit?:
>>
>>
>>     On Tue, Apr 27, 2021 at 2:27 PM Even Rouault
>>     <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>>
>>     wrote:
>>
>>         Andrew,
>>
>>         This could be due to the PROJ version, but as I'm running
>>         with 8.0 too (and one of the CI config runs PROJ master), I
>>         suspect you just need to install the "conus" grid for NAD27
>>         to WGS84 transformations into {proj_prefix}/share/proj .
>>         Unpack
>>         http://download.osgeo.org/proj/proj-datumgrid-1.8.tar.gz
>>         <http://download.osgeo.org/proj/proj-datumgrid-1.8.tar.gz>
>>
>>     I have PROJ_NETWORK set to ON. I was under the impression that
>>     this would cause PROJ to find whatever grids shift files it
>>     needed at runtime. Is there more configuration that's necessary
>>     to get this to happen or do I misunderstand the PROJ_NETWORK setting?
>
>     That should be fine. Actually I was wrong. This test case doesn't
>     involve any datum shift / grids as it is EPSG:4326 to EPSG:3857
>     reprojection.
>
>     That might then just be a subtle different rounding issue in
>     computations in GDAL and/or PROJ, or more likely, due to using a
>     different JPEG library as this test case involves JPEG
>     compression. If that was the case, you might add your checksums as
>     an alternative expected output. We do that in a number of places.
>
>     Looking a few lines before the failure, I actually see that the CI
>     got that issue and we worked around it with:
>
>     ??? if sys.platform == 'darwin' and gdal.GetConfigOption('TRAVIS',
>     None) is not None:
>     ??????? assert got_cs != [0, 0, 0]
>     ??? else:
>
>     Could you run
>
>     gdal_translate ../autotest/gdrivers/data/small_world.tif out.tif
>     -of COG co TILING_SCHEME=GoogleMapsCompatible -co COMPRESS=JPEG
>
>     and attach the resulting file ?
>
>>
>>     Thanks,
>>     -- 
>>     Andrew Bell
>>     andrew.bell.ia at gmail.com <mailto:andrew.bell.ia at gmail.com>
>
>     -- 
>     http://www.spatialys.com  <http://www.spatialys.com>
>     My software is free, but my time generally not.
>
>
>
> -- 
> Andrew Bell
> andrew.bell.ia at gmail.com <mailto:andrew.bell.ia at gmail.com>

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210428/ba0ce9a2/attachment.html>

From andrew.bell.ia at gmail.com  Wed Apr 28 06:06:55 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 28 Apr 2021 09:06:55 -0400
Subject: [gdal-dev] Test Failures
In-Reply-To: <916494ea-e710-e8ed-fa68-7e488ce11f74@spatialys.com>
References: <CACJ51z3so6MDEfRq06HPBpSekg5GR7Z5Yy-VHUkRu1imJ+5xoA@mail.gmail.com>
 <2a505ec9-e8b1-b644-747e-ac37e5c86b2e@spatialys.com>
 <CACJ51z1vc-WUCtHz-jzgO0FY1850whhMU=ZUwa89k5wPFvX9XA@mail.gmail.com>
 <eacc8ee5-16ab-c3da-7fac-daffaa2a5ef0@spatialys.com>
 <CACJ51z3n9mgOLsK16d55E6N31mmU9hbLEKhyp53MQg9qc2d6Vg@mail.gmail.com>
 <916494ea-e710-e8ed-fa68-7e488ce11f74@spatialys.com>
Message-ID: <CACJ51z2R6tx1sHfkj=Skjr4vg_J+D9SbWpt4aXh5OGCY8ni5Qg@mail.gmail.com>

Even,

Do you have any idea why the differences exist? Is it worth investigating?

On Wed, Apr 28, 2021 at 8:35 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Andew,
>
> visually the difference between your image and the one generated on my PC
> are almost indistinguishable (no spatial shift at least). Please submit a
> PR adding your checksums as alternate accepted ones. You may just remove
> the "if sys.platform == 'darwin'" case. Hopefully adding your checksums
> should fix the OSX CI too
>

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210428/4a1afad7/attachment.html>

From even.rouault at spatialys.com  Wed Apr 28 06:15:51 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 28 Apr 2021 15:15:51 +0200
Subject: [gdal-dev] Test Failures
In-Reply-To: <CACJ51z2R6tx1sHfkj=Skjr4vg_J+D9SbWpt4aXh5OGCY8ni5Qg@mail.gmail.com>
References: <CACJ51z3so6MDEfRq06HPBpSekg5GR7Z5Yy-VHUkRu1imJ+5xoA@mail.gmail.com>
 <2a505ec9-e8b1-b644-747e-ac37e5c86b2e@spatialys.com>
 <CACJ51z1vc-WUCtHz-jzgO0FY1850whhMU=ZUwa89k5wPFvX9XA@mail.gmail.com>
 <eacc8ee5-16ab-c3da-7fac-daffaa2a5ef0@spatialys.com>
 <CACJ51z3n9mgOLsK16d55E6N31mmU9hbLEKhyp53MQg9qc2d6Vg@mail.gmail.com>
 <916494ea-e710-e8ed-fa68-7e488ce11f74@spatialys.com>
 <CACJ51z2R6tx1sHfkj=Skjr4vg_J+D9SbWpt4aXh5OGCY8ni5Qg@mail.gmail.com>
Message-ID: <05b86127-76d2-9f40-48f4-2d896648ce31@spatialys.com>


> Do you have any idea why the differences exist? Is it worth investigating?

Quite likely subtle differences in behavior of the JPEG compression 
library. Mine on ubuntu 20.04 is libjpeg-turbo 2.0.3 with IJG libjpeg 8 
ABI. I presume if you built if from source and linked it against GDAL, 
you'd get the same checksums.

We should try to minimize tests using JPEG for that reason, but in that 
instance, this test is really meant to check JPEG specific code paths in 
the COG driver. Or use some kind of perceptualdiff test for such test, 
but the "perceptualdiff" utility does consider "your" and "mine" image 
to be different, so that wouldn't help. We'd probably need something 
clever that tolerates pixel values differences that can be quite 
important (the max here is a difference of 19 units) but detects there's 
no spatial shift.

>
> On Wed, Apr 28, 2021 at 8:35 AM Even Rouault 
> <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>> wrote:
>
>     Andew,
>
>     visually the difference between your image and the one generated
>     on my PC are almost indistinguishable (no spatial shift at least).
>     Please submit a PR adding your checksums as alternate accepted
>     ones. You may just remove the "if sys.platform == 'darwin'" case.
>     Hopefully adding your checksums should fix the OSX CI too
>
>
> -- 
> Andrew Bell
> andrew.bell.ia at gmail.com <mailto:andrew.bell.ia at gmail.com>

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210428/5dd26b81/attachment.html>

From andrew.bell.ia at gmail.com  Wed Apr 28 06:30:19 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 28 Apr 2021 09:30:19 -0400
Subject: [gdal-dev] PROJ context and threads
In-Reply-To: <CAGybdFS=teN25xWYpd15yWh4L-xFx+81U5Qh8tQAOGz1YM5jUA@mail.gmail.com>
References: <CACJ51z0TCYhNXOodHi1i2WL1sZ0w7LO=2wx91v+Oz_NYis_-ow@mail.gmail.com>
 <CAGybdFRdznXe+u-SYtmHOtDf79d=q-XejWM7rm8w1vfnAgKMfg@mail.gmail.com>
 <CAGybdFS=teN25xWYpd15yWh4L-xFx+81U5Qh8tQAOGz1YM5jUA@mail.gmail.com>
Message-ID: <CACJ51z3eybKc8SPoSOH9+zymRMBLt57d6F8dAGgPPiLk_8=sFA@mail.gmail.com>

On Tue, Apr 27, 2021 at 11:44 PM Alan Snow <alansnow21 at gmail.com> wrote:

> By default pyproj uses the autoclose option and provides this option for
> users who want better performance and know they have a single threaded
> application:
> https://pyproj4.github.io/pyproj/stable/api/global_context.html
>

Thanks for this!  But it appears that the PROJ context held by a thread
using GDAL is private, so I don't think I can call
proj_context_set_autoclose_database(). I think I'm going to have to make
sure that the thread actually terminates in order to release the context.

If someone has other suggestions, I'd be happy to hear them.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210428/a589529c/attachment.html>

From even.rouault at spatialys.com  Wed Apr 28 06:38:51 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 28 Apr 2021 15:38:51 +0200
Subject: [gdal-dev] PROJ context and threads
In-Reply-To: <CACJ51z3eybKc8SPoSOH9+zymRMBLt57d6F8dAGgPPiLk_8=sFA@mail.gmail.com>
References: <CACJ51z0TCYhNXOodHi1i2WL1sZ0w7LO=2wx91v+Oz_NYis_-ow@mail.gmail.com>
 <CAGybdFRdznXe+u-SYtmHOtDf79d=q-XejWM7rm8w1vfnAgKMfg@mail.gmail.com>
 <CAGybdFS=teN25xWYpd15yWh4L-xFx+81U5Qh8tQAOGz1YM5jUA@mail.gmail.com>
 <CACJ51z3eybKc8SPoSOH9+zymRMBLt57d6F8dAGgPPiLk_8=sFA@mail.gmail.com>
Message-ID: <4a58131d-9a45-5e3e-8a71-694b944d2700@spatialys.com>

We could have a OSRSetAutoclosePROJDatabase() global function that would 
call proj_context_set_autoclose_database() when it creates the 
per-thread PROJ context

==> ogr/ogr_proj_p.cpp

An alternative would be to enhance PROJ to have a mode where the SQLite3 
db handle would be shared amongst several contexts. In theory that could 
be possible as you can invoke sqlite3_open_v2() with 
SQLITE_OPEN_FULLMUTEX. But would require non completely trivial changes

Le 28/04/2021 ? 15:30, Andrew Bell a ?crit?:
> On Tue, Apr 27, 2021 at 11:44 PM Alan Snow <alansnow21 at gmail.com 
> <mailto:alansnow21 at gmail.com>> wrote:
>
>     By default pyproj uses the autoclose option and provides this
>     option for users who want better performance and know they have a
>     single threaded application:
>     https://pyproj4.github.io/pyproj/stable/api/global_context.html
>     <https://pyproj4.github.io/pyproj/stable/api/global_context.html>
>
>
> Thanks for this!? But it appears that the PROJ context held by a 
> thread using GDAL is private, so I don't think I can call 
> proj_context_set_autoclose_database(). I think I'm going to have to 
> make sure that the thread actually terminates in order to release the 
> context.
>
> If someone has other suggestions, I'd be happy to hear them.
>
> -- 
> Andrew Bell
> andrew.bell.ia at gmail.com <mailto:andrew.bell.ia at gmail.com>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210428/b89a791f/attachment-0001.html>

From andrew.bell.ia at gmail.com  Wed Apr 28 06:56:49 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 28 Apr 2021 09:56:49 -0400
Subject: [gdal-dev] PROJ context and threads
In-Reply-To: <4a58131d-9a45-5e3e-8a71-694b944d2700@spatialys.com>
References: <CACJ51z0TCYhNXOodHi1i2WL1sZ0w7LO=2wx91v+Oz_NYis_-ow@mail.gmail.com>
 <CAGybdFRdznXe+u-SYtmHOtDf79d=q-XejWM7rm8w1vfnAgKMfg@mail.gmail.com>
 <CAGybdFS=teN25xWYpd15yWh4L-xFx+81U5Qh8tQAOGz1YM5jUA@mail.gmail.com>
 <CACJ51z3eybKc8SPoSOH9+zymRMBLt57d6F8dAGgPPiLk_8=sFA@mail.gmail.com>
 <4a58131d-9a45-5e3e-8a71-694b944d2700@spatialys.com>
Message-ID: <CACJ51z313gMn21GYeDK1avNcvEtkwDTPW8P6iTHLu+0qDhktqA@mail.gmail.com>

On Wed, Apr 28, 2021 at 9:38 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> We could have a OSRSetAutoclosePROJDatabase() global function that would
> call proj_context_set_autoclose_database() when it creates the per-thread
> PROJ context
>
> ==> ogr/ogr_proj_p.cpp
>
> An alternative would be to enhance PROJ to have a mode where the SQLite3
> db handle would be shared amongst several contexts. In theory that could be
> possible as you can invoke sqlite3_open_v2() with SQLITE_OPEN_FULLMUTEX.
> But would require non completely trivial changes.
>
Thanks. I can work around this issue for now.

Changes in GDAL might be nice, but I need to work with what's available
today. I could certainly PR the first suggestion if there is interest.
Perhaps I'm at the point where I should be using PROJ directly rather than
as wrapped by GDAL.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210428/7492ea50/attachment.html>

From sean at mapbox.com  Wed Apr 28 08:57:33 2021
From: sean at mapbox.com (Sean Gillies)
Date: Wed, 28 Apr 2021 09:57:33 -0600
Subject: [gdal-dev] GDAL 3.3.0 RC1 available
In-Reply-To: <f3a19a2c-ba46-639b-355a-c83dc4c6d9e2@spatialys.com>
References: <7c03844b-f590-e1ba-1f66-b4c85cf6b187@spatialys.com>
 <CAOodmJriDU6zVAyCyG7yN5Xva0oY1NkJVgh6ZqO_CwzkCS51VQ@mail.gmail.com>
 <f3a19a2c-ba46-639b-355a-c83dc4c6d9e2@spatialys.com>
Message-ID: <CADPhZXy9s0uJC+y9S0EreQMNUUGFC2dnVKT=MKYDX7oM=4MDtA@mail.gmail.com>

Thanks for explaining, Even. Makes sense to me.

On Wed, Apr 28, 2021 at 2:59 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Sean,
>
> This was the trend of the previous cycles. I see I also produced a 3.1.4
> at about the same time of 3.2.0. This offers 6 month of support for a given
> feature release. Otherwise that cuts it to 4 months.
>
> Even
> Le 28/04/2021 ? 03:59, Sean Gillies a ?crit :
>
> Hi Even,
>
> I see that there's also a 3.2.3 candidate. Usually we discontinue the
> previous minor version, right? Why in this case are we have a 3.3.0rc1 and
> a 3.2.3rc1?
>
> On Mon, Apr 26, 2021 at 6:57 AM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Hi,
>>
>> I have prepared a GDAL/OGR 3.3.0 release candidate. The feedback on beta1
>> was useful to spot and fix a few bugs.
>
>
-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210428/09e05afb/attachment.html>

From pepanpeter at gmail.com  Thu Apr 29 02:03:54 2021
From: pepanpeter at gmail.com (Peter P)
Date: Thu, 29 Apr 2021 02:03:54 -0700 (MST)
Subject: [gdal-dev] GDAL question
In-Reply-To: <1619187669620-0.post@n6.nabble.com>
References: <CAFY+pqnHtXUBMXEK9p+-QG3qoyF6fWUxJrfpJvO-fos9L3qsxw@mail.gmail.com>
 <1618932348826-0.post@n6.nabble.com> <1618997599910-0.post@n6.nabble.com>
 <1619001200374-0.post@n6.nabble.com> <1619171684233-0.post@n6.nabble.com>
 <1619187669620-0.post@n6.nabble.com>
Message-ID: <1619687034212-0.post@n6.nabble.com>

When I use in cmd: ogrinfo -so PG:"dbname='test' host='127.0.0.1'
port='5432' user='user1' password='password1'" table1

Output is:

Layer name: table1
Geometry: Unknown (any)
Feature Count: 8
Extend: (...,...) - (....,...)
Layer SRS WKT:
(unknown)
FID Column = Id
Geometry Column = TestGeometry
Name = String (0.0)

Why is Geometry and Layer SRS WKT values Unknown? I using correct EPSG:3857.
It is bad or why ogr2ogr not put SRS to postgresql?

If run this command without -so
feature is correct
OGRFeature(table1):1
  Name(String) = testName
  POLYGON ((.....))

When I do update, so syntax is in cmd?: ogrinfo PG:"dbname='test'
host='127.0.0.1'
port='5432' user='user1' password='password1'" -sql "UPDATE table1 SET
Name='name2', TestGeometry='{"type": "Feature", "geometry": ....' WHERE
Id='1'"

In column geometry put geojson file or how?


jratike80 wrote
> Hi,
> 
> You can't update with ogr2ogr. Use ogrinfo instead. I believe that you
> will
> find good examples from gis.stackexchange
> https://gis.stackexchange.com/search?q=ogrinfo+update
> 
> -Jukka Rahkonen-
> 
> 
> Peter P wrote
>> It is works, Thanks
>> 
>> Now I trying update row.
>> In SQL will be: /UPDATE "table1" SET "TestGeometry"=.... WHERE "Name" =
>> 'testname'/
>> How is this possible in ogr2ogr? I use -update, -append not work... 
> 
> 
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Thu Apr 29 02:56:02 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 29 Apr 2021 11:56:02 +0200
Subject: [gdal-dev] Motion: promote GDAL 3.3.0 RC1
Message-ID: <f1f82be5-d806-fb30-f693-a60328bee619@spatialys.com>

Hi,

Having heard no issues being reported regarding RC1

Motion:

Adopt GDAL 3.3.0 RC1 as final 3.3.0 release

Starting with my +1

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From howard at hobu.co  Thu Apr 29 04:41:29 2021
From: howard at hobu.co (Howard Butler)
Date: Thu, 29 Apr 2021 06:41:29 -0500
Subject: [gdal-dev] Motion: promote GDAL 3.3.0 RC1
In-Reply-To: <f1f82be5-d806-fb30-f693-a60328bee619@spatialys.com>
References: <f1f82be5-d806-fb30-f693-a60328bee619@spatialys.com>
Message-ID: <18F560FE-82A2-4EE9-AF5B-0A90643F679A@hobu.co>



> On Apr 29, 2021, at 4:56 AM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Hi,
> 
> Having heard no issues being reported regarding RC1
> 
> Motion:
> 
> Adopt GDAL 3.3.0 RC1 as final 3.3.0 release
> 
> Starting with my +1

+1

Howard


From gulnihalkurtt at gmail.com  Thu Apr 29 05:35:47 2021
From: gulnihalkurtt at gmail.com (gnihalk)
Date: Thu, 29 Apr 2021 05:35:47 -0700 (MST)
Subject: [gdal-dev] Gdal_translate batch processing
Message-ID: <1619699747135-0.post@n6.nabble.com>

Hi you all. I have a huge MODIS dataset and I need to translate them to tiff
but each data is in a different sub-folder.
C:\Users\HP\Desktop\modis\5000000889913\5000000889913\88258783\MOD10A2.2016322095024.hdf
C:\Users\HP\Desktop\modis\5000000889913\5000000889913\96113659\MOD10A2.A2016321.h20v05.006.2016340133152.hdf
....
.....
the dataset sub-folders go like this...

and the code that im trying to run is:
for /R C:\Users\HP\Desktop\modis\5000000889913\5000000889913\88258783 %f IN
(MOD10A2.2016322095024.hdf) do gdal_translate.exe -sds -of gtiff %f
C:\Users\HP\Desktop\modis\5000000889913\5000000889913\88258783\MOD10A2.2016322095024.tiff

I tried to make a loop for all subfolders that I have but I got an error
massage. I would appreciate it if I can take your opinions about it. I am
also not sure that I post this question in true title/section.
Thank you,
Gulnihal




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From dmorissette at mapgears.com  Thu Apr 29 05:43:09 2021
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu, 29 Apr 2021 08:43:09 -0400
Subject: [gdal-dev] Motion: promote GDAL 3.3.0 RC1
In-Reply-To: <f1f82be5-d806-fb30-f693-a60328bee619@spatialys.com>
References: <f1f82be5-d806-fb30-f693-a60328bee619@spatialys.com>
Message-ID: <fbffa27b-7221-2193-3a93-214925126f93@mapgears.com>

+1

Daniel

On 2021-04-29 05:56, Even Rouault wrote:
> Hi,
> 
> Having heard no issues being reported regarding RC1
> 
> Motion:
> 
> Adopt GDAL 3.3.0 RC1 as final 3.3.0 release
> 
> Starting with my +1
> 
> Even
> 


-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201

From gdt at lexort.com  Thu Apr 29 05:53:20 2021
From: gdt at lexort.com (Greg Troxel)
Date: Thu, 29 Apr 2021 08:53:20 -0400
Subject: [gdal-dev] ODBC and configure
Message-ID: <rmiczuds14v.fsf@s1.lexort.com>


I have a report from a pkgsrc user of the ODBC library being missing
from gdal.so.   pkgsrc doesn't declare a dependency so this is intended
to be hidden from the build evironment.

I went looking for docs and found:

  https://gdal.org/drivers/vector/odbc.html

which says

  ODBC support is potentially available on Unix and Windows platforms,
  but is only included in unix builds by special configuration options.

however when I build gdal I see in the output:

  check for unixODBC
  checking for SQLConnect in -lodbc... no

which makes it look like the build is looking for ODBC in the build
environment even though it was not explicitly requested.  Reading
configure.ac, it's clear that absent --without-odbc, ODBC libs are
looked for and used if found.


So I'm not sure if this is a build bug or a doc bug.
Either way, I'll just add --without-odbc.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210429/23bed0fc/attachment.sig>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Apr 29 06:37:01 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 29 Apr 2021 06:37:01 -0700 (MST)
Subject: [gdal-dev] Motion: promote GDAL 3.3.0 RC1
In-Reply-To: <f1f82be5-d806-fb30-f693-a60328bee619@spatialys.com>
References: <f1f82be5-d806-fb30-f693-a60328bee619@spatialys.com>
Message-ID: <1619703421055-0.post@n6.nabble.com>

+1

-Jukka Rahkonen-


Even Rouault-2 wrote
> Hi,
> 
> Having heard no issues being reported regarding RC1
> 
> Motion:
> 
> Adopt GDAL 3.3.0 RC1 as final 3.3.0 release
> 
> Starting with my +1
> 
> Even
> 
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From andrew at aitchison.me.uk  Thu Apr 29 06:44:25 2021
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Thu, 29 Apr 2021 14:44:25 +0100 (BST)
Subject: [gdal-dev] Degree symbols
Message-ID: <49cad437-7f66-71c0-7dbe-c75fbbff4931@aitchison.me.uk>


Now that PROJ data includes "AREA" descriptions with degree symbols,
what to people think about the attached patch which makes CPLDecToDMS
report angles with the degree symbol too ?

Sadly, the reverse function CPLDMSToDec will need more work as we
cannot fudge the fact that the degree symbol is a wchar there.

----- Sample output from
-----     gdalinfo ./swig/java/test_data/byte.tif
Driver: GTiff/GeoTIFF
Files: ./swig/java/test_data/byte.tif
Size is 20, 20
Coordinate System is:
PROJCRS["NAD27 / UTM zone 11N",
     BASEGEOGCRS["NAD27",
 	...	...
     USAGE[
         SCOPE["Engineering survey, topographic mapping."],
         AREA["North America - between 120??W and 114??W - onshore. Canada - Alberta; British Columbia; Northwest Territories; Nunavut. Mexico. United States (USA) - California; Idaho; Nevada; Oregon; Washington."],
         BBOX[26.93,-120,78.13,-114]],
     ID["EPSG",26711]]
Data axis to CRS axis mapping: 1,2
Origin = (440720.000000000000000,3751320.000000000000000)
Pixel Size = (60.000000000000000,-60.000000000000000)
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  440720.000, 3751320.000) (117??38'28.21"W, 33??54' 8.47"N)
Lower Left  (  440720.000, 3750120.000) (117??38'27.92"W, 33??53'29.51"N)
Upper Right (  441920.000, 3751320.000) (117??37'41.48"W, 33??54' 8.71"N)
Lower Right (  441920.000, 3750120.000) (117??37'41.20"W, 33??53'29.75"N)
Center      (  441320.000, 3750720.000) (117??38' 4.70"W, 33??53'49.11"N)
Band 1 Block=20x20 Type=Byte, ColorInterp=Gray

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk
-------------- next part --------------
A non-text attachment was scrubbed...
Name: degreesymbol.patch
Type: text/x-diff
Size: 634 bytes
Desc: 
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210429/64717124/attachment.patch>

From even.rouault at spatialys.com  Thu Apr 29 06:56:32 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 29 Apr 2021 15:56:32 +0200
Subject: [gdal-dev] Degree symbols
In-Reply-To: <49cad437-7f66-71c0-7dbe-c75fbbff4931@aitchison.me.uk>
References: <49cad437-7f66-71c0-7dbe-c75fbbff4931@aitchison.me.uk>
Message-ID: <60312a74-d5c6-a4d0-e04e-1f88a7d81bd4@spatialys.com>

Why not. AFAICS CPLDecToDMS isn't used by GDAL anywhere else than in 
gdalinfo. But we'd need CPLDMSToDec() to be adapted to accept the old 
and new variants. you'll need to match the 2 bytes 0xC2 0xB0 for the UTF-8 ?

Le 29/04/2021 ? 15:44, Andrew C Aitchison a ?crit?:
>
> Now that PROJ data includes "AREA" descriptions with degree symbols,
> what to people think about the attached patch which makes CPLDecToDMS
> report angles with the degree symbol too ?
>
> Sadly, the reverse function CPLDMSToDec will need more work as we
> cannot fudge the fact that the degree symbol is a wchar there.
>
> ----- Sample output from
> -----???? gdalinfo ./swig/java/test_data/byte.tif
> Driver: GTiff/GeoTIFF
> Files: ./swig/java/test_data/byte.tif
> Size is 20, 20
> Coordinate System is:
> PROJCRS["NAD27 / UTM zone 11N",
> ??? BASEGEOGCRS["NAD27",
> ????...??? ...
> ??? USAGE[
> ??????? SCOPE["Engineering survey, topographic mapping."],
> ??????? AREA["North America - between 120??W and 114??W - onshore. 
> Canada - Alberta; British Columbia; Northwest Territories; Nunavut. 
> Mexico. United States (USA) - California; Idaho; Nevada; Oregon; 
> Washington."],
> ??????? BBOX[26.93,-120,78.13,-114]],
> ??? ID["EPSG",26711]]
> Data axis to CRS axis mapping: 1,2
> Origin = (440720.000000000000000,3751320.000000000000000)
> Pixel Size = (60.000000000000000,-60.000000000000000)
> Metadata:
> ? AREA_OR_POINT=Area
> Image Structure Metadata:
> ? INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left? (? 440720.000, 3751320.000) (117??38'28.21"W, 33??54' 8.47"N)
> Lower Left? (? 440720.000, 3750120.000) (117??38'27.92"W, 33??53'29.51"N)
> Upper Right (? 441920.000, 3751320.000) (117??37'41.48"W, 33??54' 8.71"N)
> Lower Right (? 441920.000, 3750120.000) (117??37'41.20"W, 33??53'29.75"N)
> Center????? (? 441320.000, 3750720.000) (117??38' 4.70"W, 33??53'49.11"N)
> Band 1 Block=20x20 Type=Byte, ColorInterp=Gray
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210429/e3f0377c/attachment-0001.html>

From steve_wealands at essolutions.com.au  Thu Apr 29 22:13:39 2021
From: steve_wealands at essolutions.com.au (srweal)
Date: Thu, 29 Apr 2021 22:13:39 -0700 (MST)
Subject: [gdal-dev] Reading binary data from FileGDB
Message-ID: <1619759619194-0.post@n6.nabble.com>

Hi,

I'm after advice. I need to read a BLOB field from various features within a
FileGDB. I need to work with this data either in C# code (via the GDAL C#
bindings), or else have it directly read into a SQL database (e.g. via
ogr2ogr). 

I've hit up against a couple of problems doing this that I don't know how to
fix in the GDAL source which I've documented here but had no feedback on:
https://github.com/OSGeo/gdal/issues/3040
https://github.com/OSGeo/gdal/issues/3041

Am wondering if anyone on the list can suggest a better approach that would
work? 

Thanks. Have been stuck on this for a while now with no real way forward.

Steve




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Fri Apr 30 02:54:46 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 30 Apr 2021 11:54:46 +0200
Subject: [gdal-dev] Motion: promote GDAL 3.2.3 RC1
Message-ID: <9ae93e39-360e-cac2-84c1-98ed81dededf@spatialys.com>

Hi,

Not sure if anyone has given this a try, but anyway:

Motion:

Adopt GDAL 3.2.3 RC1 as final 3.2.3 release

Starting with my +1

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From runette at gmail.com  Fri Apr 30 08:18:40 2021
From: runette at gmail.com (Paul Harwood)
Date: Fri, 30 Apr 2021 16:18:40 +0100
Subject: [gdal-dev] Reading binary data from FileGDB
In-Reply-To: <1619759619194-0.post@n6.nabble.com>
References: <1619759619194-0.post@n6.nabble.com>
Message-ID: <CAE8nN5Pz8qXJTroJVS=z19YoTu8aeh1KQcMKLuM+3JC39SpDeA@mail.gmail.com>

I am going to go out on a couple of limbs here :

- About 3041 - it is what it is!

As it happens I have been thinking about learning more about the SWIG side
of things and I had a quick look. Not a trivial issue - that method was
excluded for a reason. There is some complicated marshalling to do.

Even if it was easy - especially with 3.3.0 in the launch tubes it would be
months before anything would come out in a release.

- About 3040 - looks like a bug. But you have the same problem with launch
timetables even once someone fixes it (unless you fix it and then create
your own temp build).

So - the best suggestion I can think of is probably facile (so don't take
it the wrong way ) - but is there no way that you could do it in Python?

On Fri, 30 Apr 2021 at 06:14, srweal <steve_wealands at essolutions.com.au>
wrote:

> Hi,
>
> I'm after advice. I need to read a BLOB field from various features within
> a
> FileGDB. I need to work with this data either in C# code (via the GDAL C#
> bindings), or else have it directly read into a SQL database (e.g. via
> ogr2ogr).
>
> I've hit up against a couple of problems doing this that I don't know how
> to
> fix in the GDAL source which I've documented here but had no feedback on:
> https://github.com/OSGeo/gdal/issues/3040
> https://github.com/OSGeo/gdal/issues/3041
>
> Am wondering if anyone on the list can suggest a better approach that would
> work?
>
> Thanks. Have been stuck on this for a while now with no real way forward.
>
> Steve
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210430/ef839514/attachment.html>

