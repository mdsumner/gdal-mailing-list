From jukka.rahkonen at maanmittauslaitos.fi  Sat Aug  1 06:35:30 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Sat, 1 Aug 2015 13:35:30 +0000 (UTC)
Subject: [gdal-dev] Non-standard characters in GeoPackage table names
Message-ID: <loom.20150801T152227-343@post.gmane.org>

Hi,

Have a look at this QGIS issue https://hub.qgis.org/issues/13140.

Problem it that QGIS can't create tables with names like "test-table" into
GeoPackage. I think that the reason is that SQLite requires double quotes
around such name.
This command works:

create table "test-t" (id, value);

while this one does not:

create table test-t (id, value);

GeoPackage standard does not seem to limit the table names. However, all the
tests in the standard are using SQL without double quotes around the
identifiers which means that tests would fail with tables having names like
"test-table".

What to do? If I could I would edit the standard and tell which characters
are allowed in table names and possibly the same with attribute names.
Because that is not possible, should we consider to write such
recommendation into GDAL documents? I think it would be a bad idea to make
GDAL capable to create tables with whichever names at least without hearing
the opinion of OGC GeoPackage group first.

-Jukka Rahkonen-






From even.rouault at spatialys.com  Sat Aug  1 09:50:11 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 01 Aug 2015 18:50:11 +0200
Subject: [gdal-dev] Non-standard characters in GeoPackage table names
In-Reply-To: <loom.20150801T152227-343@post.gmane.org>
References: <loom.20150801T152227-343@post.gmane.org>
Message-ID: <1619899.2F72VoRG2t@even-n550jk>

On Saturday 01 August 2015 13:35:30 Jukka Rahkonen wrote:
> Hi,
> 
> Have a look at this QGIS issue https://hub.qgis.org/issues/13140.

Jukka,

I guess this report must be a QGIS running against GDAL 1.11. There has been a 
bug fix in GDAL 2.0 to always quote identifiers ( 
https://trac.osgeo.org/gdal/ticket/5472 ), so now "test-table" is a valid 
table name.

I guess the applicable standard is SQL-92, with which SQLite is largely 
conformant, which allows unusual characters to be used in identifiers provided 
the identifier is properly quoted. I doubt the GeoPackage standard would want 
to specify over that, but you could potentially raise it to 
https://lists.opengeospatial.org/mailman/listinfo/geopackage

Another possibility would be for GDAL to "launder" identifiers by default like 
it does in a few drivers like PostGIS. The laundering as implemented in that 
driver consists in converting to lowercase (works properly only on ASCII 
characters as currently implemented) and replacing single quote, dash and 
sharp characters by underscore.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Sun Aug  2 04:52:53 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Sun, 2 Aug 2015 11:52:53 +0000 (UTC)
Subject: [gdal-dev] Non-standard characters in GeoPackage table names
References: <loom.20150801T152227-343@post.gmane.org>
	<1619899.2F72VoRG2t@even-n550jk>
Message-ID: <loom.20150802T133759-468@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

> 
> On Saturday 01 August 2015 13:35:30 Jukka Rahkonen wrote:
> > Hi,
> > 
> > Have a look at this QGIS issue https://hub.qgis.org/issues/13140.
> 
> Jukka,
> 
> I guess this report must be a QGIS running against GDAL 1.11. There has
been a 
> bug fix in GDAL 2.0 to always quote identifiers ( 
> https://trac.osgeo.org/gdal/ticket/5472 ), so now "test-table" is a valid 
> table name.
> 
> I guess the applicable standard is SQL-92, with which SQLite is largely 
> conformant, which allows unusual characters to be used in identifiers
provided 
> the identifier is properly quoted. I doubt the GeoPackage standard would want 
> to specify over that, but you could potentially raise it to 
> https://lists.opengeospatial.org/mailman/listinfo/geopackage
> 
> Another possibility would be for GDAL to "launder" identifiers by default
like 
> it does in a few drivers like PostGIS. The laundering as implemented in that 
> driver consists in converting to lowercase (works properly only on ASCII 
> characters as currently implemented) and replacing single quote, dash and 
> sharp characters by underscore.

Third and and perhaps best possibility might be to edit the "Annex A
Conformance / Abstract Test Suite (Normative)" part of the GeoPackage
standard to use quoted identifiers everywhere. Now the first test in the
test suite that fails with "test-table" seems to be already the third one:

 A.1.1.1.1.3 File Contents
Test Case ID: /base/core/container/data/file_contents
Test Purpose: Verify that the Geopackage only contains specified contents
Test Method:
1) For each gpkg_* table_name
a) PRAGMA table_info(table_name)
...

Should be written as PRAGMA table_info("table_name")...
There must be quite many other tests which can fail in a similar way with
unquoted table names.

Anyway, good to know that GDAL 2.0 behaves right.

-Jukka-





From even.rouault at spatialys.com  Sun Aug  2 08:14:54 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 02 Aug 2015 17:14:54 +0200
Subject: [gdal-dev] Fwd: [MetaCRS] Common SQLite-based dictionaries
Message-ID: <2272638.Wxu2K65OaN@even-n550jk>

Forwarding to a few lists that might be interested in the below proposal as 
metacrs is perhaps not widely followed. But please keep the discussion to 
metacrs to avoid cross postings.

----------  Forwarded Message  ----------

Subject: [MetaCRS] Common SQLite-based dictionaries
Date: Sunday 02 August 2015, 08:15:12
From: Howard Butler <howard at hobu.co>
To: metacrs at lists.osgeo.org

All,

libgeotiff and GDAL all use a system of bespoke CSV files for their coordinate 
system dictionaries. proj.4 uses derived dictionaries made from GDAL's. Each 
is a slightly different subset and/or mix of the EPSG db along with other 
catalogs, customizations, and overrides. The situation is messy, fragile, and 
incomplete, especially for folks like me, who are interested in support of 
ever more complex systems of horizontal and vertical datums, time epochs 
associated with them, and direct transformation.

There have been multiple attempts to build a C tribe API that handles the 
coordinate system description problem, but all have failed for various 
reasons.The one true library to rule them all is probably a pipe dream, but 
maybe it is possible to collaborate in a slightly messier way -- at the 
dictionary level.

One significant technology that was not widely available when GDAL, proj.4, and 
libgeotiff all originated is SQLite. The idea of a single file, sql'able 
database is a standard assumption in today's software, especially in things 
like HTML5 (wars between WebSQL and IndexedDB), just about every significant 
phone application, and your favorite OGC super format [1]. 

I'd like to propose an attempt to standardize the GDAL, proj.4, and libgeotiff 
SRS coordinate system handling dictionaries on a SQLite database that starts 
with EPSG, with each project adding its own auxiliary tables as necessary. I 
am writing this message to MetaCRS to see if there is support for such an 
effort, and to determine if there are other related projects who would like to 
collaborate at this level. 

For the GDAL stack, the benefits of this approach are significant. Multiply-
defined, potentially conflicting definitions no longer need to be resolved. The 
dictionaries could release on their own schedule, rather than with each 
individual project. Powerful new functionality would be much closer to 
software developers instead of hidden behind a rather opaque and fragile CSV 
dictionary generating process. Mundane but important details like 
multithreaded access get handed off to a library and project who do that stuff 
all the time instead of one-off implementations inside of each individual 
project. 

Database views/queries could be standardized for common lookups across. 
Lookups would be faster due to indexed query access. Transformation 
validation, based on EPSG or other databases, could be provided across all 
three projects. More complex topics, like those described above, could be 
developed in a way that have impact across all three projects without tedious 
implementation. 

Consider this email a mix of 

1) is this a good idea? What other benefits do you see this approach providing?
2) Does your project want to collaborate on this?
3) Does this belong in MetaCRS?
4) What are the pitfalls that make this untenable?

windmill-tilting'ly yours,

Howard

[1] http://www.geopackage.org/
_______________________________________________
MetaCRS mailing list
MetaCRS at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/metacrs

-----------------------------------------
-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Sun Aug  2 09:49:03 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 02 Aug 2015 18:49:03 +0200
Subject: [gdal-dev] Non-standard characters in GeoPackage table names
In-Reply-To: <loom.20150802T133759-468@post.gmane.org>
References: <loom.20150801T152227-343@post.gmane.org>
	<1619899.2F72VoRG2t@even-n550jk>
	<loom.20150802T133759-468@post.gmane.org>
Message-ID: <9856639.RP0GjEg0Hi@even-n550jk>

On Sunday 02 August 2015 11:52:53 Jukka Rahkonen wrote:
> Even Rouault <even.rouault <at> spatialys.com> writes:
> > On Saturday 01 August 2015 13:35:30 Jukka Rahkonen wrote:
> > > Hi,
> > > 
> > > Have a look at this QGIS issue https://hub.qgis.org/issues/13140.
> > 
> > Jukka,
> > 
> > I guess this report must be a QGIS running against GDAL 1.11. There has
> 
> been a
> 
> > bug fix in GDAL 2.0 to always quote identifiers (
> > https://trac.osgeo.org/gdal/ticket/5472 ), so now "test-table" is a valid
> > table name.
> > 
> > I guess the applicable standard is SQL-92, with which SQLite is largely
> > conformant, which allows unusual characters to be used in identifiers
> 
> provided
> 
> > the identifier is properly quoted. I doubt the GeoPackage standard would
> > want to specify over that, but you could potentially raise it to
> > https://lists.opengeospatial.org/mailman/listinfo/geopackage
> > 
> > Another possibility would be for GDAL to "launder" identifiers by default
> 
> like
> 
> > it does in a few drivers like PostGIS. The laundering as implemented in
> > that driver consists in converting to lowercase (works properly only on
> > ASCII characters as currently implemented) and replacing single quote,
> > dash and sharp characters by underscore.
> 
> Third and and perhaps best possibility might be to edit the "Annex A
> Conformance / Abstract Test Suite (Normative)" part of the GeoPackage
> standard to use quoted identifiers everywhere. Now the first test in the
> test suite that fails with "test-table" seems to be already the third one:
> 
>  A.1.1.1.1.3 File Contents
> Test Case ID: /base/core/container/data/file_contents
> Test Purpose: Verify that the Geopackage only contains specified contents
> Test Method:
> 1) For each gpkg_* table_name
> a) PRAGMA table_info(table_name)
> ...
> 
> Should be written as PRAGMA table_info("table_name")...

In the above, table_name is intended to be a variable / symbolic name. If the 
test was written  PRAGMA table_info("table_name"), it could potentially be 
confused with the "table_name" identifier.
I guess this is the reason for this test suite to be qualified as "Abstract", 
because it only gives the intent of the test, but the actual test suite has to 
be implemented in a programming language.

> There must be quite many other tests which can fail in a similar way with
> unquoted table names.
> 
> Anyway, good to know that GDAL 2.0 behaves right.
> 
> -Jukka-
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mohammedrashadkm at gmail.com  Sun Aug  2 11:05:23 2015
From: mohammedrashadkm at gmail.com (Rashad M)
Date: Sun, 2 Aug 2015 20:05:23 +0200
Subject: [gdal-dev] Regarding libkml driver
Message-ID: <CANNqv9e5LR_oQ9AVj9Kgr1AiSg4ASG0CSUY+tUXNHxQiDv0cVA@mail.gmail.com>

Hello all,

We have been working on a new fork of libkml library on github. The primary
interest to detach from google/libkml was that various modification in the
library are fragmented in the github forks and nothing gets merged. There
is no activity or interest by original authors and all efforts to contact
them failed. You can find more details on why it forked here -
https://github.com/google/libkml/issues/4 . We had clearly explained this
also in the readme of the fork.  As the library is used in many open source
gis tools, we thought it might be worth to unify the efforts in one place.
Fix bugs, submit patches, publish new releases and so on.

Would it be possible to have gdal kml driver to use this version?  If so
what will be the preferred way, submit a patch on trac will be
sufficient?.  There are lot of enhancements and bug fixes in the fork. Most
of them are towards build system.

https://github.com/libkml/libkml

-- 
Regards,
   Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150802/4b52af88/attachment.html>

From even.rouault at spatialys.com  Sun Aug  2 11:12:28 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 02 Aug 2015 20:12:28 +0200
Subject: [gdal-dev] Regarding libkml driver
In-Reply-To: <CANNqv9e5LR_oQ9AVj9Kgr1AiSg4ASG0CSUY+tUXNHxQiDv0cVA@mail.gmail.com>
References: <CANNqv9e5LR_oQ9AVj9Kgr1AiSg4ASG0CSUY+tUXNHxQiDv0cVA@mail.gmail.com>
Message-ID: <1724406.vKdNWo3mXU@even-n550jk>

Rashad,

> Hello all,
> 
> We have been working on a new fork of libkml library on github. The primary
> interest to detach from google/libkml was that various modification in the
> library are fragmented in the github forks and nothing gets merged. There
> is no activity or interest by original authors and all efforts to contact
> them failed. You can find more details on why it forked here -
> https://github.com/google/libkml/issues/4 . We had clearly explained this
> also in the readme of the fork.  As the library is used in many open source
> gis tools, we thought it might be worth to unify the efforts in one place.
> Fix bugs, submit patches, publish new releases and so on.

It would be great to have a lively libkml indeed, especially since the GDAL 
libkml driver depends on a unreleased version of the libkml code.

Any plan/timeline to produce an "official" release of your fork ?

> 
> Would it be possible to have gdal kml driver to use this version?  If so
> what will be the preferred way, submit a patch on trac will be
> sufficient?. 

Does the GDAL libkml driver actually need changes ? Are there been API changes 
?

> There are lot of enhancements and bug fixes in the fork. Most
> of them are towards build system.
> 
> https://github.com/libkml/libkml

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mohammedrashadkm at gmail.com  Sun Aug  2 11:45:59 2015
From: mohammedrashadkm at gmail.com (Rashad M)
Date: Sun, 2 Aug 2015 20:45:59 +0200
Subject: [gdal-dev] Regarding libkml driver
In-Reply-To: <1724406.vKdNWo3mXU@even-n550jk>
References: <CANNqv9e5LR_oQ9AVj9Kgr1AiSg4ASG0CSUY+tUXNHxQiDv0cVA@mail.gmail.com>
	<1724406.vKdNWo3mXU@even-n550jk>
Message-ID: <CANNqv9ddN_wmPesmFNno_dLvXr9dfxHQNfu1kCUKVScJS4giTA@mail.gmail.com>

On Sun, Aug 2, 2015 at 8:12 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Rashad,
>
> > Hello all,
> >
> > We have been working on a new fork of libkml library on github. The
> primary
> > interest to detach from google/libkml was that various modification in
> the
> > library are fragmented in the github forks and nothing gets merged. There
> > is no activity or interest by original authors and all efforts to contact
> > them failed. You can find more details on why it forked here -
> > https://github.com/google/libkml/issues/4 . We had clearly explained
> this
> > also in the readme of the fork.  As the library is used in many open
> source
> > gis tools, we thought it might be worth to unify the efforts in one
> place.
> > Fix bugs, submit patches, publish new releases and so on.
>
> It would be great to have a lively libkml indeed, especially since the GDAL
> libkml driver depends on a unreleased version of the libkml code.
>
> Any plan/timeline to produce an "official" release of your fork ?
>

I had tagged 1.3.0-rc0 on github. https://github.com/libkml/libkml/releases

>
> >
> > Would it be possible to have gdal kml driver to use this version?  If so
> > what will be the preferred way, submit a patch on trac will be
> > sufficient?.
>
> Does the GDAL libkml driver actually need changes ? Are there been API
> changes
> ?
>

No API changes. it make building and configuring libkml easier!

Correct me If I am wrong, I guess with a pkg-config would be easier to find
and configure libkml libs.


> > There are lot of enhancements and bug fixes in the fork. Most
> > of them are towards build system.
> >
> > https://github.com/libkml/libkml
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
Regards,
   Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150802/eefe8f16/attachment.html>

From even.rouault at spatialys.com  Sun Aug  2 12:05:10 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 02 Aug 2015 21:05:10 +0200
Subject: [gdal-dev] Regarding libkml driver
In-Reply-To: <CANNqv9ddN_wmPesmFNno_dLvXr9dfxHQNfu1kCUKVScJS4giTA@mail.gmail.com>
References: <CANNqv9e5LR_oQ9AVj9Kgr1AiSg4ASG0CSUY+tUXNHxQiDv0cVA@mail.gmail.com>
	<1724406.vKdNWo3mXU@even-n550jk>
	<CANNqv9ddN_wmPesmFNno_dLvXr9dfxHQNfu1kCUKVScJS4giTA@mail.gmail.com>
Message-ID: <8994555.TqCugiCv4k@even-n550jk>

> 
> No API changes. it make building and configuring libkml easier!
> 
> Correct me If I am wrong, I guess with a pkg-config would be easier to find
> and configure libkml libs.

Yes, that would probably be better. That said my experience with GDAL configure 
--with-libkml has been good up to now. But having a pkg-config script could 
simplify the current detection and configuration logic.

Another action would be to change the documentation page of the libkml driver 
and related Trac wiki pages to point to your fork.

By the way, did you try running the ogr_libkml.py tests from GDAL autotest 
suite with your fork ? 

What is the Windows status of the fork ? And with a Windows build of GDAL ?

To answer your initial question, yes, changes should go as a patch to a Trac 
ticket.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mohammedrashadkm at gmail.com  Sun Aug  2 12:22:56 2015
From: mohammedrashadkm at gmail.com (Rashad M)
Date: Sun, 2 Aug 2015 21:22:56 +0200
Subject: [gdal-dev] Regarding libkml driver
In-Reply-To: <8994555.TqCugiCv4k@even-n550jk>
References: <CANNqv9e5LR_oQ9AVj9Kgr1AiSg4ASG0CSUY+tUXNHxQiDv0cVA@mail.gmail.com>
	<1724406.vKdNWo3mXU@even-n550jk>
	<CANNqv9ddN_wmPesmFNno_dLvXr9dfxHQNfu1kCUKVScJS4giTA@mail.gmail.com>
	<8994555.TqCugiCv4k@even-n550jk>
Message-ID: <CANNqv9e6Y75PLZcHue3G93124whFN8ZoSthS962yQT=svUy=iQ@mail.gmail.com>

On Sun, Aug 2, 2015 at 9:05 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> >
> > No API changes. it make building and configuring libkml easier!
> >
> > Correct me If I am wrong, I guess with a pkg-config would be easier to
> find
> > and configure libkml libs.
>
> Yes, that would probably be better. That said my experience with GDAL
> configure
> --with-libkml has been good up to now. But having a pkg-config script could
> simplify the current detection and configuration logic.
>
> Another action would be to change the documentation page of the libkml
> driver
> and related Trac wiki pages to point to your fork.
>
> By the way, did you try running the ogr_libkml.py tests from GDAL autotest
> suite with your fork ?
>
> What is the Windows status of the fork ? And with a Windows build of GDAL ?
>

I had tested on VS2010 on windows7 and works fine. with a gdal windows
built, I haven't tested yet. I will get back to you on that and also on
ogr_libkml.py test

>
> To answer your initial question, yes, changes should go as a patch to a
> Trac
> ticket.
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
Regards,
   Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150802/e553f722/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Aug  3 01:15:17 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Mon, 3 Aug 2015 08:15:17 +0000 (UTC)
Subject: [gdal-dev] Non-standard characters in GeoPackage table names
References: <loom.20150801T152227-343@post.gmane.org>
	<1619899.2F72VoRG2t@even-n550jk>
	<loom.20150802T133759-468@post.gmane.org>
	<9856639.RP0GjEg0Hi@even-n550jk>
Message-ID: <loom.20150803T094933-358@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:


> > Third and and perhaps best possibility might be to edit the "Annex A
> > Conformance / Abstract Test Suite (Normative)" part of the GeoPackage
> > standard to use quoted identifiers everywhere. Now the first test in the
> > test suite that fails with "test-table" seems to be already the third one:
> > 
> >  A.1.1.1.1.3 File Contents
> > Test Case ID: /base/core/container/data/file_contents
> > Test Purpose: Verify that the Geopackage only contains specified contents
> > Test Method:
> > 1) For each gpkg_* table_name
> > a) PRAGMA table_info(table_name)
> > ...
> > 
> > Should be written as PRAGMA table_info("table_name")...
> 
> In the above, table_name is intended to be a variable / symbolic name. If the 
> test was written  PRAGMA table_info("table_name"), it could potentially be 
> confused with the "table_name" identifier.
> I guess this is the reason for this test suite to be qualified as "Abstract", 
> because it only gives the intent of the test, but the actual test suite
has to 
> be implemented in a programming language.


Ok, I agree.  However, I would recommend for everybody who is making
GeoPackage software or running interoperability tests also to test if it is
possible to create and use tables which are named so that using quotes in
the SQL is necessary. I have a feeling that there is a high risk of
non-interoperability in here. At least I am lazy and I do not usually write
identifiers as quoted in my SQL queries. I would not be surprised if
programmers are lazy too and there can already exist GeoPackage programs
which do simply

SELECT attribute FROM table; instead of

SELECT "attribute" FROM "table"; 

even the latter syntax is necessary for example in case like

SELECT "attribute-with-dash" FROM "table-with-dash";

-Jukka Rahkonen-


From ysagarminaga at azti.es  Mon Aug  3 01:23:39 2015
From: ysagarminaga at azti.es (ysagarminaga)
Date: Mon, 3 Aug 2015 01:23:39 -0700 (PDT)
Subject: [gdal-dev] Getting warning when opening NetCDF file using gdal?
In-Reply-To: <3B970FB76033264EB34479EC8A365E1101BA340E47@vwiexc030.acri.local>
References: <1435632519375-5213484.post@n6.nabble.com>
	<55924804.5050307@nersc.no>
	<3B970FB76033264EB34479EC8A365E1101BA340E47@vwiexc030.acri.local>
Message-ID: <1438590219217-5218254.post@n6.nabble.com>

Hi!
I have a problem warping the new MODIS L2 files from oceancolour with
gdalwarp
I came across this list and made changes in my gdal-bin (1.11.2 from
ubuntuGis repository)  and now I am able to read the files and subdatasets
with gdalinfo but when trying to apply gdalwarp I get this error

ERROR 1: Unable to compute a GEOLOC_ARRAY based transformation between
pixel/line
and georeferenced coordinates for HDF5:

I guess I need something like the patch you talk about?

Is this patch(es) available somewhere in gdal repository? and
the new gdal 2.0.0 already includes these patches?

Thanks a lot for your help,
Yolanda Sagarminaga
AZTI, Spain



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Getting-warning-when-opening-NetCDF-file-using-gdal-tp5213484p5218254.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at maanmittauslaitos.fi  Mon Aug  3 09:20:44 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Mon, 3 Aug 2015 16:20:44 +0000 (UTC)
Subject: [gdal-dev] Additon to r29598
Message-ID: <loom.20150803T181631-683@post.gmane.org>

Hi Even,

By browsing what you have done with
https://trac.osgeo.org/gdal/changeset/29598, should I understand that there
is also a need for an additional edit in
http://www.gdal.org/drv_elasticsearch.html, here:

"However, the driver is limited in the geometry it handles: even if polygons
are provided as input, they are stored as geo point and the "center" of the
polygon is used as value of the point."

-Jukka Rahkonen- 


From even.rouault at spatialys.com  Mon Aug  3 11:18:56 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 03 Aug 2015 20:18:56 +0200
Subject: [gdal-dev] Additon to r29598
In-Reply-To: <loom.20150803T181631-683@post.gmane.org>
References: <loom.20150803T181631-683@post.gmane.org>
Message-ID: <22838998.rfWgIl5Xco@even-n550jk>

On Monday 03 August 2015 16:20:44 Jukka Rahkonen wrote:
> Hi Even,
> 
> By browsing what you have done with
> https://trac.osgeo.org/gdal/changeset/29598, should I understand that there
> is also a need for an additional edit in
> http://www.gdal.org/drv_elasticsearch.html, here:
> 
> "However, the driver is limited in the geometry it handles: even if polygons
> are provided as input, they are stored as geo point and the "center" of the
> polygon is used as value of the point."

Hi Jukka,

thanks for the note. I've just fixed the doc. This is work in progress since 
I'll add soon the read side of the driver.

Even

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From lukepinnerau at gmail.com  Mon Aug  3 17:20:15 2015
From: lukepinnerau at gmail.com (Luke)
Date: Mon, 3 Aug 2015 17:20:15 -0700 (PDT)
Subject: [gdal-dev] Piping VRT to gdal_translate with /vsistdout
Message-ID: <1438647615749-5218386.post@n6.nabble.com>

Hi List,

To avoid temporary files when warping to VRT and compressing with
gdal_translate, I was playing around with piping gdalwarp VRT output to
gdal_translate but couldn't get it to work on Windows (7) or Linux (Ubuntu
14.04). GDAL version is 1.11.1

The command I used was gdalwarp -q -t_srs EPSG:32611 -of vrt byte.tif
/vsistdout/ | gdal_translate -co compress=lzw  /vsistdin/ byte_wgs84.tif

byte.tif is from the autotest suite -
https://svn.osgeo.org/gdal/trunk/autotest/gcore/data/byte.tif

Windows generates the following error (command was run in cmd.exe):
ERROR 1: Parse error at EOF, not all elements have been closed,
starting with Co

GDALOpen failed - 1
Parse error at EOF, not all elements have been closed,
starting with Co

The linux error is similar with "ColorInte" instead of "Co". Command was run
in default bash shell using gnome terminal.

Redirecting /vsistdout/ to a file and running gdalinfo/gdal_translate on
that file works as expected.

Is there a way to pipe VRT between GDAL utilities?


Regards
Luke



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Piping-VRT-to-gdal-translate-with-vsistdout-tp5218386.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From lukepinnerau at gmail.com  Mon Aug  3 18:17:47 2015
From: lukepinnerau at gmail.com (Luke)
Date: Mon, 3 Aug 2015 18:17:47 -0700 (PDT)
Subject: [gdal-dev] Piping VRT to gdal_translate with /vsistdout
In-Reply-To: <1438647615749-5218386.post@n6.nabble.com>
References: <1438647615749-5218386.post@n6.nabble.com>
Message-ID: <1438651067418-5218388.post@n6.nabble.com>

Luke wrote
> ...
> Windows generates the following error (command was run in cmd.exe):
> ERROR 1: Parse error at EOF, not all elements have been closed,
> starting with Co
> ...
> The linux error is similar with "ColorInte" instead of "Co". Command was
> run in default bash shell using gnome terminal.

Ahhh... only the first 1024 characters are being read.  The difference in
the win->linux output is caused by \r\n and \n linebreaks respectively.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Piping-VRT-to-gdal-translate-with-vsistdout-tp5218386p5218388.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From schwehr at gmail.com  Tue Aug  4 21:59:19 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 4 Aug 2015 21:59:19 -0700
Subject: [gdal-dev] Regarding libkml driver
In-Reply-To: <CANNqv9e6Y75PLZcHue3G93124whFN8ZoSthS962yQT=svUy=iQ@mail.gmail.com>
References: <CANNqv9e5LR_oQ9AVj9Kgr1AiSg4ASG0CSUY+tUXNHxQiDv0cVA@mail.gmail.com>
	<1724406.vKdNWo3mXU@even-n550jk>
	<CANNqv9ddN_wmPesmFNno_dLvXr9dfxHQNfu1kCUKVScJS4giTA@mail.gmail.com>
	<8994555.TqCugiCv4k@even-n550jk>
	<CANNqv9e6Y75PLZcHue3G93124whFN8ZoSthS962yQT=svUy=iQ@mail.gmail.com>
Message-ID: <CACmBxyst6La80mEZ0NgAAfkmiQ3VtE15ejQ6-Zipd9rGBUfF3Q@mail.gmail.com>

Hi Rashad,

I am starting to look into libkml from the Google side.  I will chat with
mashbridge in next week and see if we can get some motion on libkml.

-kurt
Engineer at Google

On Sun, Aug 2, 2015 at 12:22 PM, Rashad M <mohammedrashadkm at gmail.com>
wrote:

>
>
> On Sun, Aug 2, 2015 at 9:05 PM, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> >
>> > No API changes. it make building and configuring libkml easier!
>> >
>> > Correct me If I am wrong, I guess with a pkg-config would be easier to
>> find
>> > and configure libkml libs.
>>
>> Yes, that would probably be better. That said my experience with GDAL
>> configure
>> --with-libkml has been good up to now. But having a pkg-config script
>> could
>> simplify the current detection and configuration logic.
>>
>> Another action would be to change the documentation page of the libkml
>> driver
>> and related Trac wiki pages to point to your fork.
>>
>> By the way, did you try running the ogr_libkml.py tests from GDAL autotest
>> suite with your fork ?
>>
>> What is the Windows status of the fork ? And with a Windows build of GDAL
>> ?
>>
>
> I had tested on VS2010 on windows7 and works fine. with a gdal windows
> built, I haven't tested yet. I will get back to you on that and also on
> ogr_libkml.py test
>
>>
>> To answer your initial question, yes, changes should go as a patch to a
>> Trac
>> ticket.
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>>
>
>
>
> --
> Regards,
>    Rashad
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150804/4991a61c/attachment.html>

From darrel.maddy at newcastle.ac.uk  Wed Aug  5 05:24:06 2015
From: darrel.maddy at newcastle.ac.uk (Darrel Maddy)
Date: Wed, 5 Aug 2015 12:24:06 +0000
Subject: [gdal-dev] problem assigning EPSG:27700
Message-ID: <5861D45D06923A40B3B14CB30660762163B6783D@EXMBDB03.campus.ncl.ac.uk>

Apologies if this is not the right place to ask this.

I use gdal to read and write datafiles for my landscape evolution model. I have been trying to get the output rasters to include the appropriate spatial referencing, in this case the OS National Grid (EPSG 27700).  I used the guidance in the raster api tutorial and my code has the following line:

        OSRSetWellKnownGeogCS( hSRS, "EPSG:27700" );

Alas this is clearly not recognised as nothing is written in the header i.e. using gdalinfo I just get Coordinate System is ' ' .  If I substitute EPSG:4227 then the information appears - but is, of course in the wrong place!

If I use gdalsrsinfo EPSG:27700 I get the correct information.

I am clearly doing something wrong and would appreciate any suggestion.

Many thanks

Darrel

Prof Darrel Maddy
Chair of Quaternary Science
Newcastle University


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150805/a1efa0e5/attachment.html>

From even.rouault at spatialys.com  Wed Aug  5 06:04:12 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 05 Aug 2015 15:04:12 +0200
Subject: [gdal-dev] problem assigning EPSG:27700
In-Reply-To: <5861D45D06923A40B3B14CB30660762163B6783D@EXMBDB03.campus.ncl.ac.uk>
References: <5861D45D06923A40B3B14CB30660762163B6783D@EXMBDB03.campus.ncl.ac.uk>
Message-ID: <4443847.gUa2ntcEtN@even-n550jk>

On Wednesday 05 August 2015 12:24:06 Darrel Maddy wrote:
> Apologies if this is not the right place to ask this.
> 
> I use gdal to read and write datafiles for my landscape evolution model. I
> have been trying to get the output rasters to include the appropriate
> spatial referencing, in this case the OS National Grid (EPSG 27700).  I
> used the guidance in the raster api tutorial and my code has the following
> line:
> 
>         OSRSetWellKnownGeogCS( hSRS, "EPSG:27700" );

Darrel,

use OSRImportFromEPSG(hSRS, 27700) instead

Even

> 
> Alas this is clearly not recognised as nothing is written in the header i.e.
> using gdalinfo I just get Coordinate System is ' ' .  If I substitute
> EPSG:4227 then the information appears - but is, of course in the wrong
> place!
> 
> If I use gdalsrsinfo EPSG:27700 I get the correct information.
> 
> I am clearly doing something wrong and would appreciate any suggestion.
> 
> Many thanks
> 
> Darrel
> 
> Prof Darrel Maddy
> Chair of Quaternary Science
> Newcastle University

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From kyle at pobox.com  Wed Aug  5 13:41:29 2015
From: kyle at pobox.com (Kyle Shannon)
Date: Wed, 5 Aug 2015 14:41:29 -0600
Subject: [gdal-dev] Increase width and change offset of the shape file
	rasterized
In-Reply-To: <CALMrLdDKaG8q1LsmqRM=M09pFnDGUjM2x9BXSDB-uLYnjc_DCw@mail.gmail.com>
References: <CALMrLdDKaG8q1LsmqRM=M09pFnDGUjM2x9BXSDB-uLYnjc_DCw@mail.gmail.com>
Message-ID: <CAJ0mEz36utDOzd3tYoqE8hfNwjr-icNJ6t1x1Xon5AP+Jzg5wA@mail.gmail.com>

Gane,

Something similar came up on irc yesterday.  I've recently checked in
a commit that allows the -dialect option in gdal_rasterize.  I don't
think it solves you problem completely, but may help.  Excuse the
verbosity, but a quick example of how to increase your width using the
sqlite dialect and ST_Buffer() on a linestring:

kyle at kyle-bsu-workstation:~/Desktop/tmp$ cat in.csv
WKT,value
"LINESTRING (0 0, 5 5, 10 0, 10 10)",1

kyle at kyle-bsu-workstation:~/Desktop/tmp$ gdal_rasterize -burn 1 -init
0 in.csv -tr 1 1 nobuff.tif
0...10...20...30...40...50...60...70...80...90...100 - done.

kyle at kyle-bsu-workstation:~/Desktop/tmp$ gdal_translate -of aaigrid
nobuff.tif nobuff.asc
Input file size is 10, 10
0...10...20...30...40...50...60...70...80...90...100 - done.

kyle at kyle-bsu-workstation:~/Desktop/tmp$ cat nobuff.asc
ncols        10
nrows        10
xllcorner    0.000000000000
yllcorner    0.000000000000
cellsize     1.000000000000
 0 0 0 0 0 0 0 0 0 0
 0 0 0 0 0 0 0 0 0 0
 0 0 0 0 0 0 0 0 0 0
 0 0 0 0 0 0 0 0 0 0
 0 0 0 0 0 0 0 0 0 0
 0 0 0 0 0 1 0 0 0 0
 0 0 0 0 1 0 1 0 0 0
 0 0 0 1 0 0 0 1 0 0
 0 0 1 0 0 0 0 0 1 0
 0 1 0 0 0 0 0 0 0 1

kyle at kyle-bsu-workstation:~/Desktop/tmp$ gdal_rasterize -burn 1 -init
0 -sql "SELECT ST_Buffer(GEOMETRY, 2) FROM 'in'" -dialect sqlite
in.csv -tr 1 1 buff.tif
0...10...20...30...40...50...60...70...80...90...100 - done.

kyle at kyle-bsu-workstation:~/Desktop/tmp$ gdal_translate -of aaigrid
buff.tif buff.asc
Input file size is 14, 14
0...10...20...30...40...50...60...70...80...90...100 - done.

kyle at kyle-bsu-workstation:~/Desktop/tmp$ cat buff.asc
ncols        14
nrows        14
xllcorner    -2.000000000000
yllcorner    -2.000000000000
cellsize     1.000000000000
 0 0 0 0 0 0 0 0 0 0 0 1 1 0
 0 0 0 0 0 0 0 0 0 0 1 1 1 1
 0 0 0 0 0 0 0 0 0 0 1 1 1 1
 0 0 0 0 0 0 0 0 0 0 1 1 1 1
 0 0 0 0 0 0 0 0 0 0 1 1 1 1
 0 0 0 0 0 0 1 1 0 0 1 1 1 1
 0 0 0 0 0 1 1 1 1 0 1 1 1 1
 0 0 0 0 1 1 1 1 1 1 1 1 1 1
 0 0 0 1 1 1 1 1 1 1 1 1 1 1
 0 0 1 1 1 1 1 1 1 1 1 1 1 1
 0 1 1 1 1 1 0 0 1 1 1 1 1 1
 1 1 1 1 1 0 0 0 0 1 1 1 1 1
 1 1 1 1 0 0 0 0 0 0 1 1 1 1
 0 1 1 0 0 0 0 0 0 0 0 1 1 0

On Fri, Jul 3, 2015 at 6:18 AM, Gane R <gane.prog at gmail.com> wrote:
> Questions: 1. How can I change the width of the vector (shapefile) and
> change the offset.
>
> I see GDALdllImageLine calling - pfnPointFunc - calling gvBurnPoint
>
> Questions: 2.  gdalrasterize generate transparent png of the raster
>
> i know the png driver doesn't support create but create copy.
>
> How about the buffer written to MEM driver and then to PNG driver. But I
> want it to transparent and not black ?
>
> Thanks for your previous replies.
>
> Gane
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Kyle

From immanuel.weber at gmail.com  Thu Aug  6 08:29:06 2015
From: immanuel.weber at gmail.com (Immanuel Weber)
Date: Thu, 06 Aug 2015 17:29:06 +0200
Subject: [gdal-dev] GDAL performance compared with libtiff
Message-ID: <a3882590-aa2c-481a-98a4-7f83c12910e3@getmailbird.com>

Hi all,

I'm working on an application where lots of images have to be written. Until now I'm using libtiff for that task. But as I want to add georeferencing and the like I'm having a look at GDAL right now. I did a quick evaluation of its performance related to libtiff and unfortunately it has quite a lot of overhead.
I first tested GDAL 1.10 and it was a factor of 6-7 slower than the direct write with libtiff. With GDAL 2.0 it got a little better with a factor of 4. (I took a 1,5 MP image and wrote for a few hundred times to the disk and libtiff takes about 3 ms for that, where as GDAL?around?12 ms). I read about a performance issue with GDALDataSet::RasterIO vs?GDALRasterBand::ReadBlock and?tried to implement the storage using GDALRasterBand::WriteBlock* but that almost took more time than the?GDALDataSet::RasterIO version.

Is there any other way to write tiffs quickly with GDAL, or is that kind of overhead expected for the added functionality?

Thanks and best regards,
Immanuel

*I wasn't really?successful?in doing that, because I didn't find a way to write pixel interleaved images with that (but the amount of data written was the same as with RasterIO. Is there a way to write images like these correctly with WriteBlock? My code for that looks like this (image is an opencv cv::Mat)
auto type = (image.elemSize1() == 2)? GDT_UInt16 : GDT_Byte;
auto dataset = driver->Create(filename.data(), image.cols, image.rows, image.channels(), type, nullptr);
auto band = dataset->GetRasterBand(1);
auto xBlockSize = 0;
auto yBlockSize = 0;
band->GetBlockSize(&xBlockSize, &yBlockSize);
auto xNumBlocks = (band->GetXSize() + xBlockSize - 1) / xBlockSize;
auto yNumBlocks = (band->GetYSize() + yBlockSize - 1) / yBlockSize;
for (auto bI = 1; bI <= dataset->GetRasterCount(); ++bI) {
auto band = dataset->GetRasterBand(bI);
for (auto yI = 0; yI < yNumBlocks; ++yI) {
for (auto xI = 0; xI < xNumBlocks; ++xI) {
band->WriteBlock(xI, yI, image.data);
}
}
}
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150806/f72d5c47/attachment.html>

From lukepinnerau at gmail.com  Thu Aug  6 21:17:04 2015
From: lukepinnerau at gmail.com (Luke)
Date: Thu, 6 Aug 2015 21:17:04 -0700 (PDT)
Subject: [gdal-dev] Piping VRT to gdal_translate with /vsistdout
In-Reply-To: <1438647615749-5218386.post@n6.nabble.com>
References: <1438647615749-5218386.post@n6.nabble.com>
Message-ID: <1438921024392-5218872.post@n6.nabble.com>

https://trac.osgeo.org/gdal/ticket/6061
Thanks Even


Regards
Luke





--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Piping-VRT-to-gdal-translate-with-vsistdout-tp5218386p5218872.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From ewenger at ara.com  Fri Aug  7 03:52:18 2015
From: ewenger at ara.com (ewenger)
Date: Fri, 7 Aug 2015 03:52:18 -0700 (PDT)
Subject: [gdal-dev] JasPer vs OpenJPEG performance
Message-ID: <1438944738449-5218901.post@n6.nabble.com>

I'm building GDAL 2.0 with JPEG-2000 support for my current project and I was
surprised about the performance differences I saw between JasPer and
OpenJPEG.  Using JasPer, gdal_translate is able to decompress a 465 MB NITF
C8 file in 2.3 minutes (wall clock) even though JasPer runs single-threaded. 
OpenJPEG took 4.4 minutes (wall clock) and used 24.5 minutes in CPU time
across the four threads that were spawned.  Is there some trick to building
OpenJPEG that I'm not following or has anyone tried to multithread JasPer?

Thanks in advance,
--Eric



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/JasPer-vs-OpenJPEG-performance-tp5218901.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at maanmittauslaitos.fi  Fri Aug  7 04:17:56 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Fri, 7 Aug 2015 11:17:56 +0000 (UTC)
Subject: [gdal-dev] JasPer vs OpenJPEG performance
References: <1438944738449-5218901.post@n6.nabble.com>
Message-ID: <loom.20150807T130128-707@post.gmane.org>

ewenger <ewenger <at> ara.com> writes:

> 
> I'm building GDAL 2.0 with JPEG-2000 support for my current project and I was
> surprised about the performance differences I saw between JasPer and
> OpenJPEG.  Using JasPer, gdal_translate is able to decompress a 465 MB NITF
> C8 file in 2.3 minutes (wall clock) even though JasPer runs single-threaded. 
> OpenJPEG took 4.4 minutes (wall clock) and used 24.5 minutes in CPU time
> across the four threads that were spawned.  Is there some trick to building
> OpenJPEG that I'm not following or has anyone tried to multithread JasPer?

Hi,

Could you point us any similar sample image for testing?

Based on your timings both drivers are actually unusable for any real work
with your images.  OpenJPEG is usually rather fast and much better than
JasPer but it can't handle any bigger images which are compressed into
JPEG2000 as one tile. NITF requires either that the tile size must not be
bigger that 1024x1024, or that the whole file is written as one single tile.
I believe you have such single-tile NITF file. 

-Jukka Rahkonen-





From ewenger at ara.com  Fri Aug  7 04:59:30 2015
From: ewenger at ara.com (ewenger)
Date: Fri, 7 Aug 2015 04:59:30 -0700 (PDT)
Subject: [gdal-dev] JasPer vs OpenJPEG performance
In-Reply-To: <loom.20150807T130128-707@post.gmane.org>
References: <1438944738449-5218901.post@n6.nabble.com>
	<loom.20150807T130128-707@post.gmane.org>
Message-ID: <1438948770299-5218906.post@n6.nabble.com>

Jukka, 

Thank you for your response.  I can't provide the image, but we're working
with 8-band MSI from Worldview-2 so the images are larger than 1024x1024. 
Given your information, it sounds like compiler flags aren't going to help. 
Do you think I'll see better performance on these tiles using either the
Kakadu or the ECW driver?

Regards,
--Eric



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/JasPer-vs-OpenJPEG-performance-tp5218901p5218906.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Fri Aug  7 05:16:16 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 07 Aug 2015 14:16:16 +0200
Subject: [gdal-dev] JasPer vs OpenJPEG performance
In-Reply-To: <loom.20150807T130128-707@post.gmane.org>
References: <1438944738449-5218901.post@n6.nabble.com>
	<loom.20150807T130128-707@post.gmane.org>
Message-ID: <4463107.gy50pJlCKr@even-n550jk>

On Friday 07 August 2015 11:17:56 Jukka Rahkonen wrote:
> ewenger <ewenger <at> ara.com> writes:
> > I'm building GDAL 2.0 with JPEG-2000 support for my current project and I
> > was surprised about the performance differences I saw between JasPer and
> > OpenJPEG.  Using JasPer, gdal_translate is able to decompress a 465 MB
> > NITF C8 file in 2.3 minutes (wall clock) even though JasPer runs
> > single-threaded. OpenJPEG took 4.4 minutes (wall clock) and used 24.5
> > minutes in CPU time across the four threads that were spawned.  Is there
> > some trick to building OpenJPEG that I'm not following or has anyone
> > tried to multithread JasPer?
> Hi,
> 
> Could you point us any similar sample image for testing?
> 
> Based on your timings both drivers are actually unusable for any real work
> with your images.  OpenJPEG is usually rather fast and much better than
> JasPer but it can't handle any bigger images which are compressed into
> JPEG2000 as one tile. NITF requires either that the tile size must not be
> bigger that 1024x1024, or that the whole file is written as one single tile.


> I believe you have such single-tile NITF file.

I'm not sure of this, since the multi-threaded decoding of the OpenJPEG driver 
can only be triggered with multiple JPEG2000 tiles.

I've created a test 4096x4096 C8 NITF 3 bands with 1024x1024 tiles

With that, gdal_translate to GTiff takes :
- 2.5s with Jasper
- 2.1s with OpenJPEG single threaded
- 1.2s with OpenJPEG 4 threads

Eric, are you sure you have built openjpeg in release mode ?


> 
> -Jukka Rahkonen-
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Fri Aug  7 05:16:36 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Fri, 7 Aug 2015 12:16:36 +0000 (UTC)
Subject: [gdal-dev] JasPer vs OpenJPEG performance
References: <1438944738449-5218901.post@n6.nabble.com>
	<loom.20150807T130128-707@post.gmane.org>
	<1438948770299-5218906.post@n6.nabble.com>
Message-ID: <loom.20150807T140638-279@post.gmane.org>

ewenger <ewenger <at> ara.com> writes:

> 
> Jukka, 
> 
> Thank you for your response.  I can't provide the image, but we're working
> with 8-band MSI from Worldview-2 so the images are larger than 1024x1024. 
> Given your information, it sounds like compiler flags aren't going to help. 
> Do you think I'll see better performance on these tiles using either the
> Kakadu or the ECW driver?

Hi,

The tiled image can be however large, tiling means only that the JPEG2000
codestream is internally split into max. 1024x1024 sized parts. But if your
image is having only one tile I fear you are out of luck with OpenJPEG. If
you know Kakadu then you probably has also kdu_view application available.
File-Properties shows you all the details about the file. You should get
more info also with these GDAL utilities
https://trac.osgeo.org/gdal/wiki/UserDocs/JPEG2000Utils

With Kakadu or ECW driver you will get an enormous boost.

-Jukka Rahkonen-




From hrz at geodata.soton.ac.uk  Fri Aug  7 05:46:17 2015
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Fri, 7 Aug 2015 13:46:17 +0100
Subject: [gdal-dev] gdaldem color-relief geotiff alpha band nv value not
 working (take 2)
Message-ID: <55C4A899.20509@geodata.soton.ac.uk>

Hi all,

This is a similar question to that posed in 
<https://lists.osgeo.org/pipermail/gdal-dev/2011-November/030880.html>, 
which didn't seem to be resolved on the mailing list.

Basically, I am running the following command:

gdaldem color-relief dhaka.tif colour-relief.ramp 
dhaka-colour-relief.tif -alpha -of GTiff -co COMPRESS=DEFLATE -co 
PREDICTOR=1 -co ZLEVEL=9 -co TILED=YES

colour-relief.ramp is as follows:

500    0   1   36
300    12  15  118
75     33  109 158
30     63  184 105
3      120 234 50
0      254 255 125
nv     0   0   0   0

dhaka.tif is as follows:

Driver: GTiff/GeoTIFF
Files: dhaka.tif
Size is 443, 217
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0],
     UNIT["degree",0.0174532925199433],
     AUTHORITY["EPSG","4326"]]
Origin = (90.314286342329481,23.848152313769823)
Pixel Size = (0.000833292764088,-0.000833299630454)
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   COMPRESSION=DEFLATE
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  90.3142863,  23.8481523) ( 90d18'51.43"E, 23d50'53.35"N)
Lower Left  (  90.3142863,  23.6673263) ( 90d18'51.43"E, 23d40' 2.37"N)
Upper Right (  90.6834350,  23.8481523) ( 90d41' 0.37"E, 23d50'53.35"N)
Lower Right (  90.6834350,  23.6673263) ( 90d41' 0.37"E, 23d40' 2.37"N)
Center      (  90.4988607,  23.7577393) ( 90d29'55.90"E, 23d45'27.86"N)
Band 1 Block=256x256 Type=Float32, ColorInterp=Gray
   NoData Value=nan

All files are available at <http://dropcanvas.com/yazx9>.

I find that the NODATA values are assigned the maximum colour value in 
dhaka-colour-relief.tif i.e. RGBA 0 1 36 255.

Changing the NODATA to -1 using `gdal_translate -a_nodata -1` does not 
seem to affect this outcome.  I have tested this using both GDAL 1.11.2 
and a recent trunk build on Linux.

Does anyone have any ideas on making the nodata value transparent in the 
colour relief output?

Many thanks,

Homme.


From robert.coup at koordinates.com  Fri Aug  7 06:14:32 2015
From: robert.coup at koordinates.com (Robert Coup)
Date: Fri, 7 Aug 2015 14:14:32 +0100
Subject: [gdal-dev] JasPer vs OpenJPEG performance
In-Reply-To: <loom.20150807T140638-279@post.gmane.org>
References: <1438944738449-5218901.post@n6.nabble.com>
	<loom.20150807T130128-707@post.gmane.org>
	<1438948770299-5218906.post@n6.nabble.com>
	<loom.20150807T140638-279@post.gmane.org>
Message-ID: <CAFLLRpL9bovor9=3Lq=4XnWpnH+wpmT15u8kOOXxnDJTZkLadg@mail.gmail.com>

On 7 August 2015 at 13:16, Jukka Rahkonen <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> ewenger <ewenger <at> ara.com> writes:
>
> > Do you think I'll see better performance on these tiles using either the
> > Kakadu or the ECW driver?
>
> With Kakadu or ECW driver you will get an enormous boost.
>

As a *very* rough indication, we found Kakadu was magnitudes faster than
OpenJPEG or Jasper (and not prone to crashing) -- 10-100x for JP2 decoding
and 100-1000x for JP2 encoding of RGB(A) images . This was 2-3 years ago,
so I'd expect the gap to have closed somewhat by now.

FWIW, the Kakadu folks will give you an evaluation license to play with and
check your particular images/use case before committing to anything.

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150807/38091543/attachment.html>

From even.rouault at spatialys.com  Fri Aug  7 11:25:28 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 7 Aug 2015 20:25:28 +0200
Subject: [gdal-dev] GDAL performance compared with libtiff
In-Reply-To: <a3882590-aa2c-481a-98a4-7f83c12910e3@getmailbird.com>
References: <a3882590-aa2c-481a-98a4-7f83c12910e3@getmailbird.com>
Message-ID: <201508072025.28994.even.rouault@spatialys.com>

Le jeudi 06 ao?t 2015 17:29:06, Immanuel Weber a ?crit :
> Hi all,
> 
> I'm working on an application where lots of images have to be written.
> Until now I'm using libtiff for that task. But as I want to add
> georeferencing and the like I'm having a look at GDAL right now. I did a
> quick evaluation of its performance related to libtiff and unfortunately
> it has quite a lot of overhead. I first tested GDAL 1.10 and it was a
> factor of 6-7 slower than the direct write with libtiff. With GDAL 2.0 it
> got a little better with a factor of 4. (I took a 1,5 MP image and wrote
> for a few hundred times to the disk and libtiff takes about 3 ms for that,
> where as GDAL around 12 ms). I read about a performance issue with
> GDALDataSet::RasterIO vs GDALRasterBand::ReadBlock and tried to implement
> the storage using GDALRasterBand::WriteBlock* but that almost took more
> time than the GDALDataSet::RasterIO version.
> 
> Is there any other way to write tiffs quickly with GDAL, or is that kind of
> overhead expected for the added functionality?

Immanuel,

WriteBlock() with a INTERLEAVE=BAND file should be really close to pure libtiff 
performance. Other cases will involve a few extra buffer copies.

Another option is to write the imagery with libtiff as you did, and then open 
the file in update mode with GDAL to add the georeferencing. This will just 
rewrite the TIFF header.

> 
> Thanks and best regards,
> Immanuel
> 
> *I wasn't really successful in doing that, because I didn't find a way to
> write pixel interleaved images with that

GDAL blocks are per band. But GDAL will take care of combining several blocks 
of same (x,y) for a INTERLEAVE=PIXEL TIFF. To get the best performance, in 
INTERLEAVE=PIXEL, you should do (pseudo-code):

for y in yblocks:
	for x in xblocs:
		for b in bands:
			GetRasterBand(b)->WriteBlock(x,y, buffer)

to avoid partial TIFF tiles/strips to be written, read and re-written when the 
data for the band comes.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Aug  7 13:16:10 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 7 Aug 2015 22:16:10 +0200
Subject: [gdal-dev] gdaldem color-relief geotiff alpha band nv value not
	working (take 2)
In-Reply-To: <55C4A899.20509@geodata.soton.ac.uk>
References: <55C4A899.20509@geodata.soton.ac.uk>
Message-ID: <201508072216.10923.even.rouault@spatialys.com>

Homme,

> Band 1 Block=256x256 Type=Float32, ColorInterp=Gray
>    NoData Value=nan
> 
> All files are available at <http://dropcanvas.com/yazx9>.

Fixed by https://trac.osgeo.org/gdal/ticket/6066
The issue was that gdaldem didn't have the needed code to correctly deal with 
nan as the nodata value.

> 
> I find that the NODATA values are assigned the maximum colour value in
> dhaka-colour-relief.tif i.e. RGBA 0 1 36 255.
> 
> Changing the NODATA to -1 using `gdal_translate -a_nodata -1` does not
> seem to affect this outcome.  I have tested this using both GDAL 1.11.2
> and a recent trunk build on Linux.

That only changes the nodata *metadata* value, not the actual pixels. For that 
you could do "gdalwarp -dstnodata -1" instead.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Thomas.Joseph at awtwater.com  Fri Aug  7 16:22:36 2015
From: Thomas.Joseph at awtwater.com (tom)
Date: Fri, 7 Aug 2015 16:22:36 -0700 (PDT)
Subject: [gdal-dev] Specify the geometry column name when appending data
	- PostGIS
In-Reply-To: <1437529931501-5216416.post@n6.nabble.com>
References: <1437529931501-5216416.post@n6.nabble.com>
Message-ID: <1438989756432-5219001.post@n6.nabble.com>

I found a solution to my issue for anyone else looking to append data to an
existing Postgre table with multiple geometry columns.  The syntax was
relatively straightforward and was found after re-reading
http://www.gdal.org/drv_pg_advanced.html.  My working example is shown
below:

ogr2ogr -update -append -f "PostgreSQL" PG:"host=192.168.1.xxx port=5432
user=foo password=bar dbname=database" -nln schema.table(geom_column_name)
C:/Temp/stuff.sqlite Nodes 

The trick was using -nln schema.table(geom_column_name) which explicitly
specifies the name of the existing table and geometry column we want to
import into.




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Specify-the-geometry-column-name-when-appending-data-PostGIS-tp5216416p5219001.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From hrz at geodata.soton.ac.uk  Mon Aug 10 01:53:32 2015
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Mon, 10 Aug 2015 09:53:32 +0100
Subject: [gdal-dev] gdaldem color-relief geotiff alpha band nv value not
 working (take 2)
In-Reply-To: <201508072216.10923.even.rouault@spatialys.com>
References: <55C4A899.20509@geodata.soton.ac.uk>
	<201508072216.10923.even.rouault@spatialys.com>
Message-ID: <55C8668C.5090304@geodata.soton.ac.uk>


Hello Even,

On 07/08/15 21:16, Even Rouault wrote:
> Homme,
 >
 >> Band 1 Block=256x256 Type=Float32, ColorInterp=Gray
 >>    NoData Value=nan
 >>
 >> All files are available at <http://dropcanvas.com/yazx9>.
 >
 > Fixed by https://trac.osgeo.org/gdal/ticket/6066
 > The issue was that gdaldem didn't have the needed code to correctly 
deal with
 > nan as the nodata value.

That's fantastic, many thanks.  I've tested it and the output looks great.
Those pesky nans again...

>>
 >> I find that the NODATA values are assigned the maximum colour value in
 >> dhaka-colour-relief.tif i.e. RGBA 0 1 36 255.
 >>
 >> Changing the NODATA to -1 using `gdal_translate -a_nodata -1` does not
 >> seem to affect this outcome.  I have tested this using both GDAL 1.11.2
 >> and a recent trunk build on Linux.
 >
 > That only changes the nodata *metadata* value, not the actual pixels. 
For that
 > you could do "gdalwarp -dstnodata -1" instead.

Thanks, and I note it is well documented in the manual.

Homme.

> Even
 >


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150810/a9d2e90d/attachment.html>

From v1adehec at staffmail.ed.ac.uk  Mon Aug 10 03:27:49 2015
From: v1adehec at staffmail.ed.ac.uk (Amaury Dehecq)
Date: Mon, 10 Aug 2015 12:27:49 +0200
Subject: [gdal-dev] OGR behaves differently after matplotlib call
Message-ID: <55C87CA5.8090902@staffmail.ed.ac.uk>

Hi all,

I noticed that osgeo.ogr.Feature.GetField behaves differently when a 
matplotlib function is called. In particular, fields of type "Real" 
don't return the same value when called before or after the use of 
matplotlib functions. See for example the script below that extract the 
fields values from an ESRI shapefile :

"""
import matplotlib.pyplot as plt
from osgeo import ogr

#Read ESRI shapefile
filename='/disk/L0data/GLIMS/RGI_5.0/all_asia.shp'
ds = ogr.Open(filename,0)
layer = ds.GetLayer()

#Comment/uncomment this line
#plt.figure()
#plt.show()

#Extract field number 5 information (central longitude)
index=5
layerDefinition = layer.GetLayerDefn()
name= layerDefinition.GetFieldDefn(index).GetName()
print "Name : %s " %name
fieldTypeCode = layerDefinition.GetFieldDefn(index).GetType()
print "Type : %s" 
%layerDefinition.GetFieldDefn(index).GetFieldTypeName(fieldTypeCode)
print "Width : %i" %layerDefinition.GetFieldDefn(index).GetWidth()

#Extract feature field values
for i in xrange(5):
     feat = layer.GetNextFeature()
     print feat.GetField(name)
"""

This script returns :

/Name : CenLon //
//Type : Real//
//Width : 14//
//79.4939//
//77.9513//
//77.9295//
//77.9237//
//77.9141/


But when the 2 matplotlib lines are uncommented, it returns :

/Name : CenLon //
//Type : Real//
//Width : 14//
//79.0//
//77.0//
//77.0//
//77.0//
//77.0//
/
It seems that the values are truncated. Has anyone observed the same 
problem? Are there any incompatibilities between matplotlib and OGR?
I use :
Python 2.6.6
osgeo 1.6.3
matplotlib 1.3.1

Thank you,
Amaury
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150810/ea470e6a/attachment.html>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150810/ea470e6a/attachment.ksh>

From bradh at frogmouth.net  Mon Aug 10 03:56:27 2015
From: bradh at frogmouth.net (Brad Hards)
Date: Mon, 10 Aug 2015 20:56:27 +1000
Subject: [gdal-dev] JasPer vs OpenJPEG performance
In-Reply-To: <loom.20150807T130128-707@post.gmane.org>
References: <1438944738449-5218901.post@n6.nabble.com>
	<loom.20150807T130128-707@post.gmane.org>
Message-ID: <9228182.WvvUTkyPTZ@saxicola>

On Fri, 7 Aug 2015 11:17:56 AM Jukka Rahkonen wrote:
> NITF requires either that the tile size must not be
> bigger that 1024x1024, or that the whole file is written as one single tile.
> I believe you have such single-tile NITF file.
I don't believe this is true (at least in NITF 2.1 - MIL-STD-2500C) for two 
reasons:
1. Tiling is mandatory above 8192 x 8192 (See Table A-10 Complexity Level 7 or 
higher)
2. Tiles are allowed to be up to 2048 x 2048 (Complexity level 3) or 8192 x 
8192 (Complexity level 5 or higher).

Brad


From even.rouault at spatialys.com  Mon Aug 10 05:18:57 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 10 Aug 2015 14:18:57 +0200
Subject: [gdal-dev] OGR behaves differently after matplotlib call
In-Reply-To: <55C87CA5.8090902@staffmail.ed.ac.uk>
References: <55C87CA5.8090902@staffmail.ed.ac.uk>
Message-ID: <201508101418.57418.even.rouault@spatialys.com>

Le lundi 10 ao?t 2015 12:27:49, Amaury Dehecq a ?crit :
> Hi all,
> 
> I noticed that osgeo.ogr.Feature.GetField behaves differently when a
> matplotlib function is called. In particular, fields of type "Real"
> don't return the same value when called before or after the use of
> matplotlib functions. See for example the script below that extract the
> fields values from an ESRI shapefile :
> 
> """
> import matplotlib.pyplot as plt
> from osgeo import ogr
> 
> #Read ESRI shapefile
> filename='/disk/L0data/GLIMS/RGI_5.0/all_asia.shp'
> ds = ogr.Open(filename,0)
> layer = ds.GetLayer()
> 
> #Comment/uncomment this line
> #plt.figure()
> #plt.show()
> 
> #Extract field number 5 information (central longitude)
> index=5
> layerDefinition = layer.GetLayerDefn()
> name= layerDefinition.GetFieldDefn(index).GetName()
> print "Name : %s " %name
> fieldTypeCode = layerDefinition.GetFieldDefn(index).GetType()
> print "Type : %s"
> %layerDefinition.GetFieldDefn(index).GetFieldTypeName(fieldTypeCode)
> print "Width : %i" %layerDefinition.GetFieldDefn(index).GetWidth()
> 
> #Extract feature field values
> for i in xrange(5):
>      feat = layer.GetNextFeature()
>      print feat.GetField(name)
> """
> 
> This script returns :
> 
> /Name : CenLon //
> //Type : Real//
> //Width : 14//
> //79.4939//
> //77.9513//
> //77.9295//
> //77.9237//
> //77.9141/
> 
> 
> But when the 2 matplotlib lines are uncommented, it returns :
> 
> /Name : CenLon //
> //Type : Real//
> //Width : 14//
> //79.0//
> //77.0//
> //77.0//
> //77.0//
> //77.0//
> /
> It seems that the values are truncated. Has anyone observed the same
> problem? Are there any incompatibilities between matplotlib and OGR?

Amaury,

This looks like a locale related problem where matplotlib would install a non 
C locale with a decimal separator that isn't point. There have been a lot of 
work done in GDAL 2.0 to be immune to the locale. However the shapefile driver 
in reading should have been immune to non C locales for even a longer time, so 
I'm not sure why you see this.

As a potential workaround you could try to do the following:

import locale
locale.setlocale(locale.LC_ALL, 'C')

just after the matplotlib calls.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From v1adehec at staffmail.ed.ac.uk  Mon Aug 10 05:46:24 2015
From: v1adehec at staffmail.ed.ac.uk (Amaury Dehecq)
Date: Mon, 10 Aug 2015 14:46:24 +0200
Subject: [gdal-dev] OGR behaves differently after matplotlib call
In-Reply-To: <201508101418.57418.even.rouault@spatialys.com>
References: <55C87CA5.8090902@staffmail.ed.ac.uk>
	<201508101418.57418.even.rouault@spatialys.com>
Message-ID: <55C89D20.6080404@staffmail.ed.ac.uk>

Hi Evan,

thank you very much, this is indeed a problem related to locale.
Adding the 2 lines you recommended solved the problem. I looked for a 
more permanent way to solve this problem and found this post : 
http://stefaanlippens.net/pylabllocaleproblem

A way to fix the problem more permanently is to set the environment 
variable LC_NUMERIC to C :
 > export LC_NUMERIC="C"
for example in the .bashrc.
It solves the problem for this script, now I hope it won't create other 
problems!

Amaury





Le 10/08/2015 14:18, Even Rouault a ?crit :
> Le lundi 10 ao?t 2015 12:27:49, Amaury Dehecq a ?crit :
>> Hi all,
>>
>> I noticed that osgeo.ogr.Feature.GetField behaves differently when a
>> matplotlib function is called. In particular, fields of type "Real"
>> don't return the same value when called before or after the use of
>> matplotlib functions. See for example the script below that extract the
>> fields values from an ESRI shapefile :
>>
>> """
>> import matplotlib.pyplot as plt
>> from osgeo import ogr
>>
>> #Read ESRI shapefile
>> filename='/disk/L0data/GLIMS/RGI_5.0/all_asia.shp'
>> ds = ogr.Open(filename,0)
>> layer = ds.GetLayer()
>>
>> #Comment/uncomment this line
>> #plt.figure()
>> #plt.show()
>>
>> #Extract field number 5 information (central longitude)
>> index=5
>> layerDefinition = layer.GetLayerDefn()
>> name= layerDefinition.GetFieldDefn(index).GetName()
>> print "Name : %s " %name
>> fieldTypeCode = layerDefinition.GetFieldDefn(index).GetType()
>> print "Type : %s"
>> %layerDefinition.GetFieldDefn(index).GetFieldTypeName(fieldTypeCode)
>> print "Width : %i" %layerDefinition.GetFieldDefn(index).GetWidth()
>>
>> #Extract feature field values
>> for i in xrange(5):
>>       feat = layer.GetNextFeature()
>>       print feat.GetField(name)
>> """
>>
>> This script returns :
>>
>> /Name : CenLon //
>> //Type : Real//
>> //Width : 14//
>> //79.4939//
>> //77.9513//
>> //77.9295//
>> //77.9237//
>> //77.9141/
>>
>>
>> But when the 2 matplotlib lines are uncommented, it returns :
>>
>> /Name : CenLon //
>> //Type : Real//
>> //Width : 14//
>> //79.0//
>> //77.0//
>> //77.0//
>> //77.0//
>> //77.0//
>> /
>> It seems that the values are truncated. Has anyone observed the same
>> problem? Are there any incompatibilities between matplotlib and OGR?
> Amaury,
>
> This looks like a locale related problem where matplotlib would install a non
> C locale with a decimal separator that isn't point. There have been a lot of
> work done in GDAL 2.0 to be immune to the locale. However the shapefile driver
> in reading should have been immune to non C locales for even a longer time, so
> I'm not sure why you see this.
>
> As a potential workaround you could try to do the following:
>
> import locale
> locale.setlocale(locale.LC_ALL, 'C')
>
> just after the matplotlib calls.
>
> Even
>


-- 
The University of Edinburgh is a charitable body, registered in
Scotland, with registration number SC005336.


From jukka.rahkonen at maanmittauslaitos.fi  Mon Aug 10 05:58:59 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Mon, 10 Aug 2015 12:58:59 +0000 (UTC)
Subject: [gdal-dev] JasPer vs OpenJPEG performance
References: <1438944738449-5218901.post@n6.nabble.com>
	<loom.20150807T130128-707@post.gmane.org>
	<9228182.WvvUTkyPTZ@saxicola>
Message-ID: <loom.20150810T134220-94@post.gmane.org>

Brad Hards <bradh <at> frogmouth.net> writes:

> 
> On Fri, 7 Aug 2015 11:17:56 AM Jukka Rahkonen wrote:
> > NITF requires either that the tile size must not be
> > bigger that 1024x1024, or that the whole file is written as one single tile.
> > I believe you have such single-tile NITF file.

> I don't believe this is true (at least in NITF 2.1 - MIL-STD-2500C) for two 
> reasons:
> 1. Tiling is mandatory above 8192 x 8192 (See Table A-10 Complexity Level
7 or 
> higher)
> 2. Tiles are allowed to be up to 2048 x 2048 (Complexity level 3) or 8192 x 
> 8192 (Complexity level 5 or higher).

Hi Brad, 

I read the NITF 2.1 - MIL-STD-2500C
http://www.gwg.nga.mil/ntb/baseline/docs/2500c/2500C.pdf in the same way
than you do. However, I wrote my comments after reading another (older)
document:
"NATIONAL IMAGERY TRANSMISSION FORMAT (NITF) VERSION 2.1 COMMERCIAL DATASET
REQUIREMENTS DOCUMENT (NCDRD)"
http://www.gwg.nga.mil/ntb/baseline/docs/stdi0006/NCDRD_18February2010.pdf

And especially part 
2.3.2	JPEG 2000 Image Geometry Segmentation
Commercial datasets shall be organized in JPEG 2000 tiles as described in
BPJ2K01.00 Section 8.

I believe that the referred document is this:
http://www.gwg.nga.mil/ntb/baseline/docs/bpj2k01/ISOJ2K_profile.pdf

Appendix C  JPEG 2000 Commercial Profiles (ISO/IEC IS 15444-1 
Annex A.10)  , Table C-1. Codestream Restrictions:

Profile-0:
Tiles of a dimension 128x128: 
YTsiz=XTsiz=128 
or one tile for the whole 
image: 
YTsiz+YTOsiz>=Ysiz 
XTsiz+XTOsiz>=Xsiz  

Profile-1
XTsiz/min(XRsiz, YRsiz)<=1024 
XTsiz=YTsiz 
 or one tile for the whole image: 
YTsiz+YTOsiz>=Ysiz 
XTsiz+XTOsiz>=Xsiz 


It may be that tiling is mandatory for images bigger than 8192 x 8192
because of the baseline standard. On the other hand is seems that commercial
vendors are not allowed to use multiple tiles if they are larger than 1024 x
1024. I did not dig too deep into the black hole between 1024 x 1024 and
8192 x 8192.

BTW. In the Inspire guidelines for orthoimagery the same "one tile or max
1024 x 1024 tiles regulations in
http://inspire.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_OI_v3.0.pdf:

"JPEG 2000 allows internal tiling within the codestream. Profile 1 of ISO
15444 - 1 already requires no tiling (i.e.  the  image  =  1  tile)  or 
tiling  with  tiles  size [no] bigger  than  1024x1024  pixels.  There  is 
no  further requirement"

I have added [no] into the quotation. The Inspire text does not have the
word which makes the the sentence to mean the opposite but it must be a
typo. See comment 8 in https://trac.osgeo.org/gdal/ticket/5697.


-Jukka Rahkonen-






From even.rouault at spatialys.com  Mon Aug 10 06:33:08 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 10 Aug 2015 15:33:08 +0200
Subject: [gdal-dev] JasPer vs OpenJPEG performance
In-Reply-To: <loom.20150810T134220-94@post.gmane.org>
References: <1438944738449-5218901.post@n6.nabble.com>
	<9228182.WvvUTkyPTZ@saxicola>
	<loom.20150810T134220-94@post.gmane.org>
Message-ID: <201508101533.08324.even.rouault@spatialys.com>

Le lundi 10 ao?t 2015 14:58:59, Jukka Rahkonen a ?crit :
> Brad Hards <bradh <at> frogmouth.net> writes:
> > On Fri, 7 Aug 2015 11:17:56 AM Jukka Rahkonen wrote:
> > > NITF requires either that the tile size must not be
> > > bigger that 1024x1024, or that the whole file is written as one single
> > > tile. I believe you have such single-tile NITF file.
> > 
> > I don't believe this is true (at least in NITF 2.1 - MIL-STD-2500C) for
> > two reasons:
> > 1. Tiling is mandatory above 8192 x 8192 (See Table A-10 Complexity Level
> 
> 7 or
> 
> > higher)
> > 2. Tiles are allowed to be up to 2048 x 2048 (Complexity level 3) or 8192
> > x 8192 (Complexity level 5 or higher).
> 
> Hi Brad,
> 
> I read the NITF 2.1 - MIL-STD-2500C
> http://www.gwg.nga.mil/ntb/baseline/docs/2500c/2500C.pdf in the same way
> than you do. However, I wrote my comments after reading another (older)
> document:
> "NATIONAL IMAGERY TRANSMISSION FORMAT (NITF) VERSION 2.1 COMMERCIAL DATASET
> REQUIREMENTS DOCUMENT (NCDRD)"
> http://www.gwg.nga.mil/ntb/baseline/docs/stdi0006/NCDRD_18February2010.pdf
> 
> And especially part
> 2.3.2	JPEG 2000 Image Geometry Segmentation
> Commercial datasets shall be organized in JPEG 2000 tiles as described in
> BPJ2K01.00 Section 8.
> 
> I believe that the referred document is this:
> http://www.gwg.nga.mil/ntb/baseline/docs/bpj2k01/ISOJ2K_profile.pdf
> 
> Appendix C  JPEG 2000 Commercial Profiles (ISO/IEC IS 15444-1
> Annex A.10)  , Table C-1. Codestream Restrictions:
> 
> Profile-0:
> Tiles of a dimension 128x128:
> YTsiz=XTsiz=128
> or one tile for the whole
> image:
> YTsiz+YTOsiz>=Ysiz
> XTsiz+XTOsiz>=Xsiz
> 
> Profile-1
> XTsiz/min(XRsiz, YRsiz)<=1024
> XTsiz=YTsiz
>  or one tile for the whole image:
> YTsiz+YTOsiz>=Ysiz
> XTsiz+XTOsiz>=Xsiz
> 
> 
> It may be that tiling is mandatory for images bigger than 8192 x 8192
> because of the baseline standard. On the other hand is seems that
> commercial vendors are not allowed to use multiple tiles if they are
> larger than 1024 x 1024. I did not dig too deep into the black hole
> between 1024 x 1024 and 8192 x 8192.

Nice hunt through standards ;-)

If the image is tiled, no issue.

Found in the documents you mentionned :
- http://www.gwg.nga.mil/ntb/baseline/docs/bpj2k01/ISOJ2K_profile.pdf at 
paragraph 9.2.1.2 Tiling "It is recommended that the image be tiled with
in a JPEG 2000 codestream."
- http://www.gwg.nga.mil/ntb/baseline/docs/bpj2k01/ISOJ2K_profile.pdf at 
paragraph 8.1 "The following JPEG 2000 parameter choices are recommended [...] 
Images are tiled with JPEG 2000 at a tile size of 1024x1024"

So I think that the single-tile scheme that is theoretically possible by the 
Profile-1 of the JPEG2000 standard is not to be used in JPEG2000 compressed 
NITF.

Looking at a NITF sample from a commercial provider, I can see it uses 
1024x1024 tiles for example.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sfkeller at gmail.com  Mon Aug 10 09:02:52 2015
From: sfkeller at gmail.com (Stefan Keller)
Date: Mon, 10 Aug 2015 18:02:52 +0200
Subject: [gdal-dev] Attempting to access an ArcGIS REST API through a
 WMS format minidriver
In-Reply-To: <559D0ED3.5020304@gmail.com>
References: <DBXPR06MB432D3FE2F78962D966878F9EB920@DBXPR06MB432.eurprd06.prod.outlook.com>
	<559D0ED3.5020304@gmail.com>
Message-ID: <CAFcOn2_oir5t9xM9WOf25v2A86r8QVncQw2H4Lfxj-arCaOdOA@mail.gmail.com>

Hi Dmitry

When testing your example I get "No mini-driver registered for 'AGS'.":

>gdal_translate -of PNG ags.xml ags_test.png --config CPL_DEBUG ON
ERROR 1: GDALWMS: No mini-driver registered for 'AGS'.
GDALOpen failed - 1
GDALWMS: No mini-driver registered for 'AGS'.

Do you know if this AGS mini-driver code is made publicly available i.e.
being pushed to the GDAL source/trunk?

Yours, Stefan



2015-07-08 13:51 GMT+02:00 Dmitry Baryshnikov <bishop.dev at gmail.com>:

> Hi James,
>
> As the server didn't provide information about levels, some help needed to
> calculate this values. Also the all layers switched off, so we need to tell
> which layers should be shown.
> I create such xml file based on information from here:
> https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer?f=json&pretty=true
>
>  <GDAL_WMS>
>     <Service name="AGS">
>         <ServerUrl>
> https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer
> </ServerUrl>
>         <ImageFormat>png</ImageFormat>
>         <Layers>show:1,2,3</Layers>
>         <BBoxOrder>xyXY</BBoxOrder>
>         <SRS>3857</SRS>
>     </Service>
>     <DataWindow>
>         <UpperLeftX>-1821098.1612395868</UpperLeftX>
>         <UpperLeftY>9441422.428028269</UpperLeftY>
>         <LowerRightX>1157719.0542395862</LowerRightX>
>         <LowerRightY>6462605.212549096</LowerRightY>
>         <SizeX>1024</SizeX>
>         <SizeY>1024</SizeY>
>     </DataWindow>
> </GDAL_WMS>
>
> $ gdal_translate -of PNG ~/tmp/ags.xml ~/tmp/ags_test.png --config
> CPL_DEBUG ON
> GDAL: GDALOpen(/home/bishop/tmp/ags.xml, this=0x15138c0) succeeds as WMS.
> Input file size is 512, 512
> AGS: URL =
> https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer/export?f=image&bbox=-1821098.16123959,6462605.21254910,1157719.05423959,9441422.42802827&size=512,512&dpi=&imageSR=3857&bboxSR=3857&format=png&layerdefs=&layers=show:1,2,3&transparent=false&time=&layerTimeOptions=&dynamicLayers=
>
> HTTP: Requesting [1/1]
> https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer/export?f=image&bbox=-1821098.16123959,6462605.21254910,1157719.05423959,9441422.42802827&size=512,512&dpi=&imageSR=3857&bboxSR=3857&format=png&layerdefs=&layers=show:1,2,3&transparent=false&time=&layerTimeOptions=&dynamicLayers=
> HTTP: Request [0]
> https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer/export?f=image&bbox=-1821098.16123959,6462605.21254910,1157719.05423959,9441422.42802827&size=512,512&dpi=&imageSR=3857&bboxSR=3857&format=png&layerdefs=&layers=show:1,2,3&transparent=false&time=&layerTimeOptions=&dynamicLayers=
> : status = 200, content type = image/png, error = (null)
> GDAL: GDALOpen(/vsimem/wms/0x15dc720/wmsresult.dat, this=0x15c3d00)
> succeeds as PNG.
> GDAL: GDALClose(/vsimem/wms/0x15dc720/wmsresult.dat, this=0x15c3d00)
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> GDAL: GDALClose(/home/bishop/tmp/ags_test.png, this=0x1599830)
> GDAL: GDALClose(/home/bishop/tmp/ags.xml, this=0x15138c0)
>
>
>
>
> Also I test this xml in QGIS - works fine.
>
> Best regards,
>     Dmitry
>
> 07.07.2015 18:42, Passmore, James H. ?????:
>
> >From http://www.gdal.org/frmt_wms.html  I see you can access an ArcGIS REST API like:
>
> gdalinfo "http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer?f=json&pretty=true" <http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer?f=json&pretty=true>
>
> and
>
> gdal_translate "http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer?f=json" <http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer?f=json> wms.xml -of WMS
>
> These above examples work for me.
>
> When I try on a BGS service it fails as below:
>
> ...:\>gdalinfo "https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer?f=json&pretty=true" <https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer?f=json&pretty=true>
> gdalinfo failed - unable to open 'https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer?f=json&pretty=
> true'.
>
> And:
>
> ..:\>gdal_translate "https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer?f=json&pretty=true" <https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer?f=json&pretty=true> bgs.xml -of WMS --debug ON
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_BAG.dll using GDALRegister_BAG.
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_ECW_JP2ECW.dll using GDALRegister_ECW_JP2ECW.
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_FITS.dll using GDALRegister_FITS.
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_GMT.dll using GDALRegister_GMT.
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_HDF4.dll using GDALRegister_HDF4.
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_HDF4Image.dll using GDALRegister_HDF4Image.
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_HDF5.dll using GDALRegister_HDF5.
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_HDF5Image.dll using GDALRegister_HDF5Image.
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_KEA.dll using GDALRegister_KEA.
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_MG4Lidar.dll using GDALRegister_MG4Lidar.
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_MrSID.dll using GDALRegister_MrSID.
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_netCDF.dll using GDALRegister_netCDF.
> HTTP: Fetch(https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer?f=json&pretty=true)
> WMS: Did not get levels
> HTTP: Fetch(https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer?f=json&pretty=true)
> GDALOpen failed - 0
>
> Is the reason that HTTPS is not supported here at all, or if not what might be wrong with the service/request/ configuration?
>
> Thanks
>
> James
>
>
>
> ________________________________
>  This message (and any attachments) is for the recipient only. NERC is subject to the Freedom of Information Act 2000 and the contents of this email and any reply you make may be disclosed by NERC unless it is exempt from release under the Act. Any material supplied to NERC may be stored in an electronic records management system.
> ________________________________
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150810/2f5d8863/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: dejjcaed.
Type: image/png
Size: 24212 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150810/2f5d8863/attachment-0001.png>

From bishop.dev at gmail.com  Mon Aug 10 09:55:40 2015
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Mon, 10 Aug 2015 19:55:40 +0300
Subject: [gdal-dev] Attempting to access an ArcGIS REST API through a
 WMS format minidriver
In-Reply-To: <CAFcOn2_oir5t9xM9WOf25v2A86r8QVncQw2H4Lfxj-arCaOdOA@mail.gmail.com>
References: <DBXPR06MB432D3FE2F78962D966878F9EB920@DBXPR06MB432.eurprd06.prod.outlook.com>	<559D0ED3.5020304@gmail.com>
	<CAFcOn2_oir5t9xM9WOf25v2A86r8QVncQw2H4Lfxj-arCaOdOA@mail.gmail.com>
Message-ID: <55C8D78C.6060907@gmail.com>

Hi Stefan,

The ArcGIS REST API was introduced in GDAL 2.0 (see 
http://gdal.org/frmt_wms.html). What is you GDAL version?

Best regards,
     Dmitry

10.08.2015 19:02, Stefan Keller ?????:
> Hi Dmitry
>
> When testing your example I get "No mini-driver registered for 'AGS'.":
>
> >gdal_translate -of PNG ags.xml ags_test.png --config CPL_DEBUG ON
> ERROR 1: GDALWMS: No mini-driver registered for 'AGS'.
> GDALOpen failed - 1
> GDALWMS: No mini-driver registered for 'AGS'.
>
> Do you know if this AGS mini-driver code is made publicly available 
> i.e. being pushed to the GDAL source/trunk?
>
> Yours, Stefan
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150810/28e2302f/attachment.html>

From damian.dixon at gmail.com  Mon Aug 10 22:59:09 2015
From: damian.dixon at gmail.com (Damian Bruce Leslie Dixon)
Date: Tue, 11 Aug 2015 06:59:09 +0100
Subject: [gdal-dev] JasPer vs OpenJPEG performance
Message-ID: <mnmmxdld5ev5wy63yf7vjk1q.1439271740798@email.android.com>

Hi,

Even's interpretation of the NITF/NSIF standard is correct.

My experience is that Jasper reads all NITF test images so does Kakadu.

Kakadu is very fast however I've had problems with too many threads being used affecting overall system performance.

I've not tried openjpeg for a couple of years now... I'm hoping it has improved. When I tried it last there were problems reading the test images, some of which are badly formed on purpose. 

Jasper is slow but does not have problems reading the test images.

Regards Damian



On 10 August 2015, at 2:34 pm, Even Rouault <even.rouault at spatialys.com> wrote:

Le lundi 10 ao?t 2015 14:58:59, Jukka Rahkonen a ?crit :
> Brad Hards <bradh <at> frogmouth.net> writes:
> > On Fri, 7 Aug 2015 11:17:56 AM Jukka Rahkonen wrote:
> > > NITF requires either that the tile size must not be
> > > bigger that 1024x1024, or that the whole file is written as one single
> > > tile. I believe you have such single-tile NITF file.
> > 
> > I don't believe this is true (at least in NITF 2.1 - MIL-STD-2500C) for
> > two reasons:
> > 1. Tiling is mandatory above 8192 x 8192 (See Table A-10 Complexity Level
> 
> 7 or
> 
> > higher)
> > 2. Tiles are allowed to be up to 2048 x 2048 (Complexity level 3) or 8192
> > x 8192 (Complexity level 5 or higher).
> 
> Hi Brad,
> 
> I read the NITF 2.1 - MIL-STD-2500C
> http://www.gwg.nga.mil/ntb/baseline/docs/2500c/2500C.pdf in the same way
> than you do. However, I wrote my comments after reading another (older)
> document:
> "NATIONAL IMAGERY TRANSMISSION FORMAT (NITF) VERSION 2.1 COMMERCIAL DATASET
> REQUIREMENTS DOCUMENT (NCDRD)"
> http://www.gwg.nga.mil/ntb/baseline/docs/stdi0006/NCDRD_18February2010.pdf
> 
> And especially part
> 2.3.2	JPEG 2000 Image Geometry Segmentation
> Commercial datasets shall be organized in JPEG 2000 tiles as described in
> BPJ2K01.00 Section 8.
> 
> I believe that the referred document is this:
> http://www.gwg.nga.mil/ntb/baseline/docs/bpj2k01/ISOJ2K_profile.pdf
> 
> Appendix C  JPEG 2000 Commercial Profiles (ISO/IEC IS 15444-1
> Annex A.10)  , Table C-1. Codestream Restrictions:
> 
> Profile-0:
> Tiles of a dimension 128x128:
> YTsiz=XTsiz=128
> or one tile for the whole
> image:
> YTsiz+YTOsiz>=Ysiz
> XTsiz+XTOsiz>=Xsiz
> 
> Profile-1
> XTsiz/min(XRsiz, YRsiz)<=1024
> XTsiz=YTsiz
>  or one tile for the whole image:
> YTsiz+YTOsiz>=Ysiz
> XTsiz+XTOsiz>=Xsiz
> 
> 
> It may be that tiling is mandatory for images bigger than 8192 x 8192
> because of the baseline standard. On the other hand is seems that
> commercial vendors are not allowed to use multiple tiles if they are
> larger than 1024 x 1024. I did not dig too deep into the black hole
> between 1024 x 1024 and 8192 x 8192.

Nice hunt through standards ;-)

If the image is tiled, no issue.

Found in the documents you mentionned :
- http://www.gwg.nga.mil/ntb/baseline/docs/bpj2k01/ISOJ2K_profile.pdf at 
paragraph 9.2.1.2 Tiling "It is recommended that the image be tiled with
in a JPEG 2000 codestream."
- http://www.gwg.nga.mil/ntb/baseline/docs/bpj2k01/ISOJ2K_profile.pdf at 
paragraph 8.1 "The following JPEG 2000 parameter choices are recommended [...] 
Images are tiled with JPEG 2000 at a tile size of 1024x1024"

So I think that the single-tile scheme that is theoretically possible by the 
Profile-1 of the JPEG2000 standard is not to be used in JPEG2000 compressed 
NITF.

Looking at a NITF sample from a commercial provider, I can see it uses 
1024x1024 tiles for example.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From sfkeller at gmail.com  Tue Aug 11 00:15:33 2015
From: sfkeller at gmail.com (Stefan Keller)
Date: Tue, 11 Aug 2015 09:15:33 +0200
Subject: [gdal-dev] Attempting to access an ArcGIS REST API through a
 WMS format minidriver
In-Reply-To: <55C8D78C.6060907@gmail.com>
References: <DBXPR06MB432D3FE2F78962D966878F9EB920@DBXPR06MB432.eurprd06.prod.outlook.com>
	<559D0ED3.5020304@gmail.com>
	<CAFcOn2_oir5t9xM9WOf25v2A86r8QVncQw2H4Lfxj-arCaOdOA@mail.gmail.com>
	<55C8D78C.6060907@gmail.com>
Message-ID: <CAFcOn2-A=Eh+ignTVCpS5W8j8ud+aFdx79eSbyPGP3xO6W-D+Q@mail.gmail.com>

Dmitry

Oh, thanks.

Do you know BTW somebody from QuickMapServices (which also seems to
support some of ArcGIS REST API for QGIS)?
I'd like to know if this plugin only works with ArcGIS MapServer (or
also ImageService of static MapService/WMS) and I'd like configure an
own MapServer (and it shows nothing).

Yours, Stefan


2015-08-10 18:55 GMT+02:00 Dmitry Baryshnikov <bishop.dev at gmail.com>:
> Hi Stefan,
>
> The ArcGIS REST API was introduced in GDAL 2.0 (see
> http://gdal.org/frmt_wms.html). What is you GDAL version?
>
> Best regards,
>     Dmitry
>
> 10.08.2015 19:02, Stefan Keller ?????:
>
> Hi Dmitry
>
> When testing your example I get "No mini-driver registered for 'AGS'.":
>
>>gdal_translate -of PNG ags.xml ags_test.png --config CPL_DEBUG ON
> ERROR 1: GDALWMS: No mini-driver registered for 'AGS'.
> GDALOpen failed - 1
> GDALWMS: No mini-driver registered for 'AGS'.
>
> Do you know if this AGS mini-driver code is made publicly available i.e.
> being pushed to the GDAL source/trunk?
>
> Yours, Stefan
>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>

From bishop.dev at gmail.com  Tue Aug 11 01:14:32 2015
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Tue, 11 Aug 2015 11:14:32 +0300
Subject: [gdal-dev] Attempting to access an ArcGIS REST API through a
 WMS format minidriver
In-Reply-To: <CAFcOn2-A=Eh+ignTVCpS5W8j8ud+aFdx79eSbyPGP3xO6W-D+Q@mail.gmail.com>
References: <DBXPR06MB432D3FE2F78962D966878F9EB920@DBXPR06MB432.eurprd06.prod.outlook.com>	<559D0ED3.5020304@gmail.com>	<CAFcOn2_oir5t9xM9WOf25v2A86r8QVncQw2H4Lfxj-arCaOdOA@mail.gmail.com>	<55C8D78C.6060907@gmail.com>
	<CAFcOn2-A=Eh+ignTVCpS5W8j8ud+aFdx79eSbyPGP3xO6W-D+Q@mail.gmail.com>
Message-ID: <55C9AEE8.5050101@gmail.com>

Hi Stefan,

The QMS (QuickMapServices) plugin uses the GDAL AGS capability to work 
with ArcGIS MapServe, so if gdal works with you ImageService, th QMS 
will work too.

Best regards,
     Dmitry

11.08.2015 10:15, Stefan Keller ?????:
> Dmitry
>
> Oh, thanks.
>
> Do you know BTW somebody from QuickMapServices (which also seems to
> support some of ArcGIS REST API for QGIS)?
> I'd like to know if this plugin only works with ArcGIS MapServer (or
> also ImageService of static MapService/WMS) and I'd like configure an
> own MapServer (and it shows nothing).
>
> Yours, Stefan
>
>
> 2015-08-10 18:55 GMT+02:00 Dmitry Baryshnikov <bishop.dev at gmail.com>:
>> Hi Stefan,
>>
>> The ArcGIS REST API was introduced in GDAL 2.0 (see
>> http://gdal.org/frmt_wms.html). What is you GDAL version?
>>
>> Best regards,
>>      Dmitry
>>
>> 10.08.2015 19:02, Stefan Keller ?????:
>>
>> Hi Dmitry
>>
>> When testing your example I get "No mini-driver registered for 'AGS'.":
>>
>>> gdal_translate -of PNG ags.xml ags_test.png --config CPL_DEBUG ON
>> ERROR 1: GDALWMS: No mini-driver registered for 'AGS'.
>> GDALOpen failed - 1
>> GDALWMS: No mini-driver registered for 'AGS'.
>>
>> Do you know if this AGS mini-driver code is made publicly available i.e.
>> being pushed to the GDAL source/trunk?
>>
>> Yours, Stefan
>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>


From even.rouault at spatialys.com  Tue Aug 11 02:12:00 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 11 Aug 2015 11:12:00 +0200
Subject: [gdal-dev] JasPer vs OpenJPEG performance
In-Reply-To: <mnmmxdld5ev5wy63yf7vjk1q.1439271740798@email.android.com>
References: <mnmmxdld5ev5wy63yf7vjk1q.1439271740798@email.android.com>
Message-ID: <201508111112.00423.even.rouault@spatialys.com>

Le mardi 11 ao?t 2015 07:59:09, Damian Bruce Leslie Dixon a ?crit :
> Hi,
> 
> Even's interpretation of the NITF/NSIF standard is correct.
> 
> My experience is that Jasper reads all NITF test images so does Kakadu.
> 
> Kakadu is very fast however I've had problems with too many threads being
> used affecting overall system performance.

This can be controlled with the JP2KAK_THREADS env variable.

> 
> I've not tried openjpeg for a couple of years now... I'm hoping it has
> improved. When I tried it last there were problems reading the test
> images, some of which are badly formed on purpose.

I think I've read in one of their changelogs, probably openjpeg v2.1, that 
they made fixes to pass some compliance test suites.

> 
> Jasper is slow but does not have problems reading the test images.
> 
> Regards Damian
> 
> 
> 
> On 10 August 2015, at 2:34 pm, Even Rouault <even.rouault at spatialys.com>
> wrote:
> 
> Le lundi 10 ao?t 2015 14:58:59, Jukka Rahkonen a ?crit :
> > Brad Hards <bradh <at> frogmouth.net> writes:
> > > On Fri, 7 Aug 2015 11:17:56 AM Jukka Rahkonen wrote:
> > > > NITF requires either that the tile size must not be
> > > > bigger that 1024x1024, or that the whole file is written as one
> > > > single tile. I believe you have such single-tile NITF file.
> > > 
> > > I don't believe this is true (at least in NITF 2.1 - MIL-STD-2500C) for
> > > two reasons:
> > > 1. Tiling is mandatory above 8192 x 8192 (See Table A-10 Complexity
> > > Level
> > 
> > 7 or
> > 
> > > higher)
> > > 2. Tiles are allowed to be up to 2048 x 2048 (Complexity level 3) or
> > > 8192 x 8192 (Complexity level 5 or higher).
> > 
> > Hi Brad,
> > 
> > I read the NITF 2.1 - MIL-STD-2500C
> > http://www.gwg.nga.mil/ntb/baseline/docs/2500c/2500C.pdf in the same way
> > than you do. However, I wrote my comments after reading another (older)
> > document:
> > "NATIONAL IMAGERY TRANSMISSION FORMAT (NITF) VERSION 2.1 COMMERCIAL
> > DATASET REQUIREMENTS DOCUMENT (NCDRD)"
> > http://www.gwg.nga.mil/ntb/baseline/docs/stdi0006/NCDRD_18February2010.pd
> > f
> > 
> > And especially part
> > 2.3.2	JPEG 2000 Image Geometry Segmentation
> > Commercial datasets shall be organized in JPEG 2000 tiles as described in
> > BPJ2K01.00 Section 8.
> > 
> > I believe that the referred document is this:
> > http://www.gwg.nga.mil/ntb/baseline/docs/bpj2k01/ISOJ2K_profile.pdf
> > 
> > Appendix C  JPEG 2000 Commercial Profiles (ISO/IEC IS 15444-1
> > Annex A.10)  , Table C-1. Codestream Restrictions:
> > 
> > Profile-0:
> > Tiles of a dimension 128x128:
> > YTsiz=XTsiz=128
> > or one tile for the whole
> > image:
> > YTsiz+YTOsiz>=Ysiz
> > XTsiz+XTOsiz>=Xsiz
> > 
> > Profile-1
> > XTsiz/min(XRsiz, YRsiz)<=1024
> > XTsiz=YTsiz
> > 
> >  or one tile for the whole image:
> > YTsiz+YTOsiz>=Ysiz
> > XTsiz+XTOsiz>=Xsiz
> > 
> > 
> > It may be that tiling is mandatory for images bigger than 8192 x 8192
> > because of the baseline standard. On the other hand is seems that
> > commercial vendors are not allowed to use multiple tiles if they are
> > larger than 1024 x 1024. I did not dig too deep into the black hole
> > between 1024 x 1024 and 8192 x 8192.
> 
> Nice hunt through standards ;-)
> 
> If the image is tiled, no issue.
> 
> Found in the documents you mentionned :
> - http://www.gwg.nga.mil/ntb/baseline/docs/bpj2k01/ISOJ2K_profile.pdf at
> paragraph 9.2.1.2 Tiling "It is recommended that the image be tiled with
> in a JPEG 2000 codestream."
> - http://www.gwg.nga.mil/ntb/baseline/docs/bpj2k01/ISOJ2K_profile.pdf at
> paragraph 8.1 "The following JPEG 2000 parameter choices are recommended
> [...] Images are tiled with JPEG 2000 at a tile size of 1024x1024"
> 
> So I think that the single-tile scheme that is theoretically possible by
> the Profile-1 of the JPEG2000 standard is not to be used in JPEG2000
> compressed NITF.
> 
> Looking at a NITF sample from a commercial provider, I can see it uses
> 1024x1024 tiles for example.
> 
> Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From silyko at gmail.com  Tue Aug 11 02:36:32 2015
From: silyko at gmail.com (Simon Lyngby Kokkendorff)
Date: Tue, 11 Aug 2015 11:36:32 +0200
Subject: [gdal-dev] Burn 3d-lines from python
Message-ID: <CANzGYpRkwp41PtpKUbQheaD+0sZuNE_ikFkAcv19vREZPdqkDw@mail.gmail.com>

Hello list,

  I'm trying to rasterize some 3d-lines programtically from python. Using
gdal 1.11.2 from the osgeo4w64 environment. Seems to work fine, except that
I get a z-offset of 255 (one byte) in my output raster. Works fine if I use
gdal_rasterize with the -3d option.

 The following python code should reproduce the problem:

from osgeo import ogr,gdal
print gdal.__version__
georef=[0,1.0,0,10.5,0,-1.0]
m_drv_ogr=ogr.GetDriverByName("Memory")
line_ds = m_drv_ogr.CreateDataSource( "dummy")
layer = line_ds.CreateLayer( "lines", None, ogr.wkbLineString25D)
layerdefn=layer.GetLayerDefn()
line=ogr.Geometry(ogr.wkbLineString25D)
line.AddPoint(0,5.5,0)
line.AddPoint(10,5.5,10)
feature=ogr.Feature(layerdefn)
feature.SetGeometry(line)
res=layer.CreateFeature(feature)
layer.ResetReading()
m_drv_gdal=gdal.GetDriverByName("MEM")
raster_ds=m_drv_gdal.Create("dummy",10,10,1,gdal.GDT_Float64)
raster_ds.SetGeoTransform(georef)
ok=gdal.RasterizeLayer(raster_ds,[1], layer, options=["BURN_VALUE_FROM=Z"])
A=raster_ds.ReadAsArray()
print A

Will output:

[[   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
 [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
 [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
 [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
 [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
 [ 255.  256.  257.  258.  259.  260.  261.  262.  263.  264.]
 [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
 [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
 [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
 [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]]

Cheers,
Simon Kokkendorff, Dansish Geodata Agency
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150811/d6d4a8a1/attachment.html>

From damian.dixon at gmail.com  Tue Aug 11 03:15:34 2015
From: damian.dixon at gmail.com (Damian Dixon)
Date: Tue, 11 Aug 2015 10:15:34 +0000
Subject: [gdal-dev] JasPer vs OpenJPEG performance
In-Reply-To: <201508111112.00423.even.rouault@spatialys.com>
References: <mnmmxdld5ev5wy63yf7vjk1q.1439271740798@email.android.com>
	<201508111112.00423.even.rouault@spatialys.com>
Message-ID: <CAJjdW1yQCOStm8nSCDrJrQc6-M-KsdqZLe7U1tiG0vmCt6Oc+w@mail.gmail.com>

I'm already using JP2KAK_THREADS :>>

It's nice to know that openjpeg passes the compliance tests.

I will be hopefully be using openjpeg in the next couple of months as I'be
problems with the change in the Kakadu license and the cost implications
with upgrading from 6.4 to the latest.

On Tue, 11 Aug 2015 10:13 am Even Rouault <even.rouault at spatialys.com>
wrote:

> Le mardi 11 ao?t 2015 07:59:09, Damian Bruce Leslie Dixon a ?crit :
> > Hi,
> >
> > Even's interpretation of the NITF/NSIF standard is correct.
> >
> > My experience is that Jasper reads all NITF test images so does Kakadu.
> >
> > Kakadu is very fast however I've had problems with too many threads being
> > used affecting overall system performance.
>
> This can be controlled with the JP2KAK_THREADS env variable.
>
> >
> > I've not tried openjpeg for a couple of years now... I'm hoping it has
> > improved. When I tried it last there were problems reading the test
> > images, some of which are badly formed on purpose.
>
> I think I've read in one of their changelogs, probably openjpeg v2.1, that
> they made fixes to pass some compliance test suites.
>
> >
> > Jasper is slow but does not have problems reading the test images.
> >
> > Regards Damian
> >
> >
> >
> > On 10 August 2015, at 2:34 pm, Even Rouault <even.rouault at spatialys.com>
> > wrote:
> >
> > Le lundi 10 ao?t 2015 14:58:59, Jukka Rahkonen a ?crit :
> > > Brad Hards <bradh <at> frogmouth.net> writes:
> > > > On Fri, 7 Aug 2015 11:17:56 AM Jukka Rahkonen wrote:
> > > > > NITF requires either that the tile size must not be
> > > > > bigger that 1024x1024, or that the whole file is written as one
> > > > > single tile. I believe you have such single-tile NITF file.
> > > >
> > > > I don't believe this is true (at least in NITF 2.1 - MIL-STD-2500C)
> for
> > > > two reasons:
> > > > 1. Tiling is mandatory above 8192 x 8192 (See Table A-10 Complexity
> > > > Level
> > >
> > > 7 or
> > >
> > > > higher)
> > > > 2. Tiles are allowed to be up to 2048 x 2048 (Complexity level 3) or
> > > > 8192 x 8192 (Complexity level 5 or higher).
> > >
> > > Hi Brad,
> > >
> > > I read the NITF 2.1 - MIL-STD-2500C
> > > http://www.gwg.nga.mil/ntb/baseline/docs/2500c/2500C.pdf in the same
> way
> > > than you do. However, I wrote my comments after reading another (older)
> > > document:
> > > "NATIONAL IMAGERY TRANSMISSION FORMAT (NITF) VERSION 2.1 COMMERCIAL
> > > DATASET REQUIREMENTS DOCUMENT (NCDRD)"
> > >
> http://www.gwg.nga.mil/ntb/baseline/docs/stdi0006/NCDRD_18February2010.pd
> > > f
> > >
> > > And especially part
> > > 2.3.2       JPEG 2000 Image Geometry Segmentation
> > > Commercial datasets shall be organized in JPEG 2000 tiles as described
> in
> > > BPJ2K01.00 Section 8.
> > >
> > > I believe that the referred document is this:
> > > http://www.gwg.nga.mil/ntb/baseline/docs/bpj2k01/ISOJ2K_profile.pdf
> > >
> > > Appendix C  JPEG 2000 Commercial Profiles (ISO/IEC IS 15444-1
> > > Annex A.10)  , Table C-1. Codestream Restrictions:
> > >
> > > Profile-0:
> > > Tiles of a dimension 128x128:
> > > YTsiz=XTsiz=128
> > > or one tile for the whole
> > > image:
> > > YTsiz+YTOsiz>=Ysiz
> > > XTsiz+XTOsiz>=Xsiz
> > >
> > > Profile-1
> > > XTsiz/min(XRsiz, YRsiz)<=1024
> > > XTsiz=YTsiz
> > >
> > >  or one tile for the whole image:
> > > YTsiz+YTOsiz>=Ysiz
> > > XTsiz+XTOsiz>=Xsiz
> > >
> > >
> > > It may be that tiling is mandatory for images bigger than 8192 x 8192
> > > because of the baseline standard. On the other hand is seems that
> > > commercial vendors are not allowed to use multiple tiles if they are
> > > larger than 1024 x 1024. I did not dig too deep into the black hole
> > > between 1024 x 1024 and 8192 x 8192.
> >
> > Nice hunt through standards ;-)
> >
> > If the image is tiled, no issue.
> >
> > Found in the documents you mentionned :
> > - http://www.gwg.nga.mil/ntb/baseline/docs/bpj2k01/ISOJ2K_profile.pdf at
> > paragraph 9.2.1.2 Tiling "It is recommended that the image be tiled with
> > in a JPEG 2000 codestream."
> > - http://www.gwg.nga.mil/ntb/baseline/docs/bpj2k01/ISOJ2K_profile.pdf at
> > paragraph 8.1 "The following JPEG 2000 parameter choices are recommended
> > [...] Images are tiled with JPEG 2000 at a tile size of 1024x1024"
> >
> > So I think that the single-tile scheme that is theoretically possible by
> > the Profile-1 of the JPEG2000 standard is not to be used in JPEG2000
> > compressed NITF.
> >
> > Looking at a NITF sample from a commercial provider, I can see it uses
> > 1024x1024 tiles for example.
> >
> > Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150811/66a4dc92/attachment-0001.html>

From fabian.schindler at eox.at  Tue Aug 11 07:35:48 2015
From: fabian.schindler at eox.at (Fabian Schindler)
Date: Tue, 11 Aug 2015 16:35:48 +0200
Subject: [gdal-dev] Cascaded VRTs
Message-ID: <ED304D15-836E-452B-85FF-F1606A6D182E@eox.at>

Hi list,

Premise: I?m tinkering to add support for datasets from multiple sources (like different subdatasets) in EOxServer (Python, MapScript, ?)

Versions: GDAL 1.9.2, MapServer 6.2.2

The sample dataset I try visualize is a MODIS/HDF 4 file with 7+ subdatasets (see [1] for a description for the whole file HDF 4 and [2] for a description of one of the subdatasets).

The subdatasets are not georeferenced, but are supplied with GCPs (and geolocation arrays, which I have not yet tried).


The bands from the dataset are coming from different subdatasets, so I create a VRT where I collect all the subdatasets and add them as bands to the VRT [3]. Since MapServer is not capable of dealing with GCPs I need to create a rectified VRT (created with the CreateWarpedVRT function) [4].


This works quite well, unless I?m in a multithreaded environment (I tested with both apache mod_wsgi with 1 process and 10 threads and Djangos dev server). In this case, when I request more than one WMS request at once I get the error message:

`HDF4_EOS:EOS_SWATH:"/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf":MOD_Swath_LST:Emis_32' does not exist in the file system, and is not recognised as a supported dataset name.

Once I get this error message, ALL further requests are also running into this error and I don?t get any reasonable response unless I restart the server.

Further details: We used the WarpedVRT method earlier to great success when all the sources come from a single dataset (TIFF with GCPs) and I never ran into this problem.

My questions:

	* Is this approach feasible?
	* Is it possible to just have a single VRT for both collecting the datasets into a single VRT and having the warping instructions?
	* Any ideas why I get the error message? Any chance to get around this?

Regards,
Fabian


[1]

$ gdalinfo /var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf
Driver: HDF4/Hierarchical Data Format Release 4
Files: /var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf
Size is 512, 512
Coordinate System is `'
Metadata:
 ...
Subdatasets:
  SUBDATASET_1_NAME=HDF4_EOS:EOS_SWATH:"/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf":MOD_Swath_LST:LST
  SUBDATASET_1_DESC=[2030x1354] LST MOD_Swath_LST (16-bit unsigned integer)
  SUBDATASET_2_NAME=HDF4_EOS:EOS_SWATH:"/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf":MOD_Swath_LST:QC
  SUBDATASET_2_DESC=[2030x1354] QC MOD_Swath_LST (16-bit unsigned integer)
  SUBDATASET_3_NAME=HDF4_EOS:EOS_SWATH:"/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf":MOD_Swath_LST:Error_LST
  SUBDATASET_3_DESC=[2030x1354] Error_LST MOD_Swath_LST (8-bit unsigned integer)
  SUBDATASET_4_NAME=HDF4_EOS:EOS_SWATH:"/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf":MOD_Swath_LST:Emis_31
  SUBDATASET_4_DESC=[2030x1354] Emis_31 MOD_Swath_LST (8-bit unsigned integer)
  SUBDATASET_5_NAME=HDF4_EOS:EOS_SWATH:"/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf":MOD_Swath_LST:Emis_32
  SUBDATASET_5_DESC=[2030x1354] Emis_32 MOD_Swath_LST (8-bit unsigned integer)
  SUBDATASET_6_NAME=HDF4_EOS:EOS_SWATH:"/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf":MOD_Swath_LST:View_angle
  SUBDATASET_6_DESC=[2030x1354] View_angle MOD_Swath_LST (8-bit unsigned integer)
  SUBDATASET_7_NAME=HDF4_EOS:EOS_SWATH:"/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf":MOD_Swath_LST:View_time
  SUBDATASET_7_DESC=[2030x1354] View_time MOD_Swath_LST (8-bit unsigned integer)
  SUBDATASET_8_NAME=HDF4_SDS:UNKNOWN:"/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf":0
  SUBDATASET_8_DESC=[406x271] Latitude (32-bit floating-point)
  SUBDATASET_9_NAME=HDF4_SDS:UNKNOWN:"/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf":1
  SUBDATASET_9_DESC=[406x271] Longitude (32-bit floating-point)
  SUBDATASET_10_NAME=HDF4_SDS:UNKNOWN:"/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf":2
  SUBDATASET_10_DESC=[2030x1354] LST (16-bit unsigned integer)
...
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)

[2]

$ gdalinfo HDF4_EOS:EOS_SWATH:"/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf":MOD_Swath_LST:Emis_32
Driver: HDF4Image/HDF4 Dataset
Files: /var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf
       /var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf.aux.xml
Size is 1354, 2030
Coordinate System is `'
GCP[  0]: Id=, Info=
          (2.5,2.5) -> (-17.7197341918945,16.5706329345703,0)
GCP[  1]: Id=, Info=
          (122.5,2.5) -> (-21.4628753662109,16.2001628875732,0)
GCP[  2]: Id=, Info=
          (242.5,2.5) -> (-23.6760387420654,15.9492874145508,0)
...
GCP[143]: Id=, Info=
          (1322.5,1982.5) -> (-43.3567504882812,30.9182910919189,0)
Metadata:
  ...
Geolocation:
  LINE_OFFSET=2
  LINE_STEP=5
  PIXEL_OFFSET=2
  PIXEL_STEP=5
  X_BAND=1
  X_DATASET=HDF4_EOS:EOS_SWATH_GEOL:"/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf":MOD_Swath_LST:Longitude
  Y_BAND=1
  Y_DATASET=HDF4_EOS:EOS_SWATH_GEOL:"/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf":MOD_Swath_LST:Latitude
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 2030.0)
Upper Right ( 1354.0,    0.0)
Lower Right ( 1354.0, 2030.0)
Center      (  677.0, 1015.0)
Band 1 Block=1354x738 Type=Byte, ColorInterp=Gray
  Description = Band 32 emissivity
  NoData Value=0
  Offset: 0.49,   Scale:0.002

[3]

<VRTDataset rasterXSize="1354" rasterYSize="2030">
  <GCPList>
    <GCP Id="" Pixel="2.5000" Line="2.5000" X="-1.771973419189E+01" Y="1.657063293457E+01" />
    <GCP Id="" Pixel="122.5000" Line="2.5000" X="-2.146287536621E+01" Y="1.620016288757E+01" />
...
    <GCP Id="" Pixel="1322.5000" Line="1982.5000" X="-4.335675048828E+01" Y="3.091829109192E+01" />
  </GCPList>
  <VRTRasterBand dataType="UInt16" band="1">
    <SimpleSource>
      <SourceFilename relativeToVRT="0">HDF4_EOS:EOS_SWATH:&quot;/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf&quot;:MOD_Swath_LST:LST</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="1354" RasterYSize="2030" DataType="UInt16" BlockXSize="1354" BlockYSize="738" />
    </SimpleSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="UInt16" band="2">
    <SimpleSource>
      <SourceFilename relativeToVRT="0">HDF4_EOS:EOS_SWATH:&quot;/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf&quot;:MOD_Swath_LST:QC</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="1354" RasterYSize="2030" DataType="UInt16" BlockXSize="1354" BlockYSize="738" />
    </SimpleSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="3">
    <SimpleSource>
      <SourceFilename relativeToVRT="0">HDF4_EOS:EOS_SWATH:&quot;/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf&quot;:MOD_Swath_LST:Error_LST</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="1354" RasterYSize="2030" DataType="Byte" BlockXSize="1354" BlockYSize="738" />
    </SimpleSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="4">
    <SimpleSource>
      <SourceFilename relativeToVRT="0">HDF4_EOS:EOS_SWATH:&quot;/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf&quot;:MOD_Swath_LST:Emis_31</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="1354" RasterYSize="2030" DataType="Byte" BlockXSize="1354" BlockYSize="738" />
    </SimpleSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="5">
    <SimpleSource>
      <SourceFilename relativeToVRT="0">HDF4_EOS:EOS_SWATH:&quot;/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf&quot;:MOD_Swath_LST:Emis_32</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="1354" RasterYSize="2030" DataType="Byte" BlockXSize="1354" BlockYSize="738" />
    </SimpleSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="6">
    <SimpleSource>
      <SourceFilename relativeToVRT="0">HDF4_EOS:EOS_SWATH:&quot;/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf&quot;:MOD_Swath_LST:View_angle</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="1354" RasterYSize="2030" DataType="Byte" BlockXSize="1354" BlockYSize="738" />
    </SimpleSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="7">
    <SimpleSource>
      <SourceFilename relativeToVRT="0">HDF4_EOS:EOS_SWATH:&quot;/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf&quot;:MOD_Swath_LST:View_time</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="1354" RasterYSize="2030" DataType="Byte" BlockXSize="1354" BlockYSize="738" />
    </SimpleSource>
  </VRTRasterBand>
</VRTDataset>

[4]

<VRTDataset rasterXSize="2029" rasterYSize="1820" subClass="VRTWarpedDataset">
  <GeoTransform> -4.2266212922257814e+01,  1.1322693568940058e-02,  0.0000000000000000e+00,  3.4413385891072409e+01,  0.0000000000000000e+00, -1.1322693568940058e-02</GeoTransform>
  <VRTRasterBand dataType="UInt16" band="1" subClass="VRTWarpedRasterBand">
    <Metadata />
  </VRTRasterBand>
  <VRTRasterBand dataType="UInt16" band="2" subClass="VRTWarpedRasterBand">
    <Metadata />
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="3" subClass="VRTWarpedRasterBand">
    <Metadata />
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="4" subClass="VRTWarpedRasterBand">
    <Metadata />
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="5" subClass="VRTWarpedRasterBand">
    <Metadata />
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="6" subClass="VRTWarpedRasterBand">
    <Metadata />
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="7" subClass="VRTWarpedRasterBand">
    <Metadata />
  </VRTRasterBand>
  <BlockXSize>512</BlockXSize>
  <BlockYSize>128</BlockYSize>
  <GDALWarpOptions>
    <WarpMemoryLimit>6.71089e+07</WarpMemoryLimit>
    <ResampleAlg>NearestNeighbour</ResampleAlg>
    <WorkingDataType>UInt16</WorkingDataType>
    <SourceDataset relativeToVRT="1">ff71b2c70ab940d6b35ecaa6c4b100e6</SourceDataset>
    <Transformer>
      <ApproxTransformer>
        <MaxError>0.125</MaxError>
        <BaseTransformer>
          <GenImgProjTransformer>
            <SrcGCPTransformer>
              <GCPTransformer>
                <Order>2</Order>
                <Reversed>0</Reversed>
                <GCPList>
                  <GCP Id="" Pixel="2.5000" Line="2.5000" X="-1.771973419189E+01" Y="1.657063293457E+01" />
                  <GCP Id="" Pixel="122.5000" Line="2.5000" X="-2.146287536621E+01" Y="1.620016288757E+01" />
                  ...
                  <GCP Id="" Pixel="1322.5000" Line="1982.5000" X="-4.335675048828E+01" Y="3.091829109192E+01" />
                </GCPList>
              </GCPTransformer>
            </SrcGCPTransformer>
            <DstGeoTransform>-42.26621292225781,0.01132269356894006,0,34.41338589107241,0,-0.01132269356894006</DstGeoTransform>
            <DstInvGeoTransform>3732.876162806413,88.31820749288477,0,3039.328555660446,0,-88.31820749288477</DstInvGeoTransform>
          </GenImgProjTransformer>
        </BaseTransformer>
      </ApproxTransformer>
    </Transformer>
    <BandList>
      <BandMapping src="1" dst="1" />
      <BandMapping src="2" dst="2" />
      <BandMapping src="3" dst="3" />
      <BandMapping src="4" dst="4" />
      <BandMapping src="5" dst="5" />
      <BandMapping src="6" dst="6" />
      <BandMapping src="7" dst="7" />
    </BandList>
  </GDALWarpOptions>
</VRTDataset>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150811/3acd2b63/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150811/3acd2b63/attachment-0001.pgp>

From myoung at pyxisinnovation.com  Tue Aug 11 09:17:00 2015
From: myoung at pyxisinnovation.com (Mark Young)
Date: Tue, 11 Aug 2015 09:17:00 -0700 (PDT)
Subject: [gdal-dev] how to build dwg driver?
In-Reply-To: <BLU173-W93CD073DD54384D8CA2E390830@phx.gbl>
References: <BLU173-W93CD073DD54384D8CA2E390830@phx.gbl>
Message-ID: <1439309820835-5219383.post@n6.nabble.com>

Hello Ivan,

I am running into a similar issue trying to build the DWG driver with the
latest Teigha libraries. Did you get your issue resolved? If I learn
anything I will post it here.

Mark



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-how-to-build-dwg-driver-tp5216555p5219383.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From schwehr at gmail.com  Tue Aug 11 09:37:27 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 11 Aug 2015 09:37:27 -0700
Subject: [gdal-dev] Regarding libkml driver
In-Reply-To: <CACmBxyst6La80mEZ0NgAAfkmiQ3VtE15ejQ6-Zipd9rGBUfF3Q@mail.gmail.com>
References: <CANNqv9e5LR_oQ9AVj9Kgr1AiSg4ASG0CSUY+tUXNHxQiDv0cVA@mail.gmail.com>
	<1724406.vKdNWo3mXU@even-n550jk>
	<CANNqv9ddN_wmPesmFNno_dLvXr9dfxHQNfu1kCUKVScJS4giTA@mail.gmail.com>
	<8994555.TqCugiCv4k@even-n550jk>
	<CANNqv9e6Y75PLZcHue3G93124whFN8ZoSthS962yQT=svUy=iQ@mail.gmail.com>
	<CACmBxyst6La80mEZ0NgAAfkmiQ3VtE15ejQ6-Zipd9rGBUfF3Q@mail.gmail.com>
Message-ID: <CACmBxyu2YBQdzXtfBe0aX72NqXRR_7sjMhKGd2A5XQVgJvyCow@mail.gmail.com>

Hi Rashad and all,

Wolf and I have joined in working on libkml.  We will be getting more
transitioned from the old code.google.com site to
https://github.com/google/libkml, will be pushing some general maintanence
patches and will be getting the pull request processed.  We look forward to
collaborating on future development of libkml.

-kurt

On Tue, Aug 4, 2015 at 9:59 PM, Kurt Schwehr <schwehr at gmail.com> wrote:

> Hi Rashad,
>
> I am starting to look into libkml from the Google side.  I will chat with
> mashbridge in next week and see if we can get some motion on libkml.
>
> -kurt
> Engineer at Google
>
> On Sun, Aug 2, 2015 at 12:22 PM, Rashad M <mohammedrashadkm at gmail.com>
> wrote:
>
>>
>>
>> On Sun, Aug 2, 2015 at 9:05 PM, Even Rouault <even.rouault at spatialys.com>
>> wrote:
>>
>>> >
>>> > No API changes. it make building and configuring libkml easier!
>>> >
>>> > Correct me If I am wrong, I guess with a pkg-config would be easier to
>>> find
>>> > and configure libkml libs.
>>>
>>> Yes, that would probably be better. That said my experience with GDAL
>>> configure
>>> --with-libkml has been good up to now. But having a pkg-config script
>>> could
>>> simplify the current detection and configuration logic.
>>>
>>> Another action would be to change the documentation page of the libkml
>>> driver
>>> and related Trac wiki pages to point to your fork.
>>>
>>> By the way, did you try running the ogr_libkml.py tests from GDAL
>>> autotest
>>> suite with your fork ?
>>>
>>> What is the Windows status of the fork ? And with a Windows build of
>>> GDAL ?
>>>
>>
>> I had tested on VS2010 on windows7 and works fine. with a gdal windows
>> built, I haven't tested yet. I will get back to you on that and also on
>> ogr_libkml.py test
>>
>>>
>>> To answer your initial question, yes, changes should go as a patch to a
>>> Trac
>>> ticket.
>>>
>>> --
>>> Spatialys - Geospatial professional services
>>> http://www.spatialys.com
>>>
>>
>>
>>
>> --
>> Regards,
>>    Rashad
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> --
> http://schwehr.org
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150811/fb8bfe53/attachment.html>

From lucena_ivan at hotmail.com  Tue Aug 11 09:48:17 2015
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Tue, 11 Aug 2015 12:48:17 -0400
Subject: [gdal-dev] how to build dwg driver?
In-Reply-To: <1439309820835-5219383.post@n6.nabble.com>
References: <BLU173-W93CD073DD54384D8CA2E390830@phx.gbl>,
	<1439309820835-5219383.post@n6.nabble.com>
Message-ID: <BLU173-W36002049E3D2952F154619907F0@phx.gbl>

Hi Mark,

I am far from a Windows machine, so I can't give you much details.

After loading the sample project for VS 2010, I build the libs and then I was able to build the OGR/DWG plugin.

But when I tried to run it, I got a error message saying that a .dll was missing.

That missing .dll doesn't come with the SDK, so I am stuck at that point.

I tried with the latest SDK and with some older versions and got the same result.

I will keep you posted too.

Thanks,

Ivan

> Date: Tue, 11 Aug 2015 09:17:00 -0700
> From: myoung at pyxisinnovation.com
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] how to build dwg driver?
> 
> Hello Ivan,
> 
> I am running into a similar issue trying to build the DWG driver with the
> latest Teigha libraries. Did you get your issue resolved? If I learn
> anything I will post it here.
> 
> Mark
> 
> 
> 
> --
> View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-how-to-build-dwg-driver-tp5216555p5219383.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150811/38129ee5/attachment.html>

From sebastic at xs4all.nl  Tue Aug 11 09:56:23 2015
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Tue, 11 Aug 2015 18:56:23 +0200
Subject: [gdal-dev] Regarding libkml driver
In-Reply-To: <CACmBxyu2YBQdzXtfBe0aX72NqXRR_7sjMhKGd2A5XQVgJvyCow@mail.gmail.com>
References: <CANNqv9e5LR_oQ9AVj9Kgr1AiSg4ASG0CSUY+tUXNHxQiDv0cVA@mail.gmail.com>
	<1724406.vKdNWo3mXU@even-n550jk>
	<CANNqv9ddN_wmPesmFNno_dLvXr9dfxHQNfu1kCUKVScJS4giTA@mail.gmail.com>
	<8994555.TqCugiCv4k@even-n550jk>
	<CANNqv9e6Y75PLZcHue3G93124whFN8ZoSthS962yQT=svUy=iQ@mail.gmail.com>
	<CACmBxyst6La80mEZ0NgAAfkmiQ3VtE15ejQ6-Zipd9rGBUfF3Q@mail.gmail.com>
	<CACmBxyu2YBQdzXtfBe0aX72NqXRR_7sjMhKGd2A5XQVgJvyCow@mail.gmail.com>
Message-ID: <55CA2937.80908@xs4all.nl>

On 11-08-15 18:37, Kurt Schwehr wrote:
> Wolf and I have joined in working on libkml.  We will be getting more
> transitioned from the old code.google.com site to
> https://github.com/google/libkml, will be pushing some general maintanence
> patches and will be getting the pull request processed.  We look forward to
> collaborating on future development of libkml.

The renewed interest in libkml from Google sounds promising.

What are your views on merging the work in the libkml/libkml fork back
into google/libkml?

The switch to CMake and removal of the third party dependencies in favor
of linking to system provided libraries solve the issues that required
patches in the libkml Debian package in the past. I'd like to see these
changes merged back into google/libkml to not loose these gains.

Most importantly the final 1.3.0 libkml release is long overdue, it has
been required for GDAL for many years now but many distributions still
ship libkml 1.2 (Fedora removed libkml even because it was abandoned
upstream). What do you think needs to be done to get the 1.3.0 release out?

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From sault.don at gmail.com  Tue Aug 11 09:59:23 2015
From: sault.don at gmail.com (Donovan Cameron)
Date: Tue, 11 Aug 2015 09:59:23 -0700
Subject: [gdal-dev] Regarding libkml driver
In-Reply-To: <55CA2937.80908@xs4all.nl>
References: <CANNqv9e5LR_oQ9AVj9Kgr1AiSg4ASG0CSUY+tUXNHxQiDv0cVA@mail.gmail.com>
	<1724406.vKdNWo3mXU@even-n550jk>
	<CANNqv9ddN_wmPesmFNno_dLvXr9dfxHQNfu1kCUKVScJS4giTA@mail.gmail.com>
	<8994555.TqCugiCv4k@even-n550jk>
	<CANNqv9e6Y75PLZcHue3G93124whFN8ZoSthS962yQT=svUy=iQ@mail.gmail.com>
	<CACmBxyst6La80mEZ0NgAAfkmiQ3VtE15ejQ6-Zipd9rGBUfF3Q@mail.gmail.com>
	<CACmBxyu2YBQdzXtfBe0aX72NqXRR_7sjMhKGd2A5XQVgJvyCow@mail.gmail.com>
	<55CA2937.80908@xs4all.nl>
Message-ID: <55CA29EB.8080105@gmail.com>

I've compiled libkml from the libkml/libkml git repo and really like 
that minizip for example is an external dependency.
This makes it so that other applications that require minizip can be 
compiled easily now.



Donovan

On 11/08/15 09:56 AM, Sebastiaan Couwenberg wrote:
> On 11-08-15 18:37, Kurt Schwehr wrote:
>> Wolf and I have joined in working on libkml.  We will be getting more
>> transitioned from the old code.google.com site to
>> https://github.com/google/libkml, will be pushing some general maintanence
>> patches and will be getting the pull request processed.  We look forward to
>> collaborating on future development of libkml.
> The renewed interest in libkml from Google sounds promising.
>
> What are your views on merging the work in the libkml/libkml fork back
> into google/libkml?
>
> The switch to CMake and removal of the third party dependencies in favor
> of linking to system provided libraries solve the issues that required
> patches in the libkml Debian package in the past. I'd like to see these
> changes merged back into google/libkml to not loose these gains.
>
> Most importantly the final 1.3.0 libkml release is long overdue, it has
> been required for GDAL for many years now but many distributions still
> ship libkml 1.2 (Fedora removed libkml even because it was abandoned
> upstream). What do you think needs to be done to get the 1.3.0 release out?
>
> Kind Regards,
>
> Bas
>

-- 
Kind regards,

Donovan


From jmckenna at gatewaygeomatics.com  Tue Aug 11 10:00:24 2015
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue, 11 Aug 2015 14:00:24 -0300
Subject: [gdal-dev] how to build dwg driver?
In-Reply-To: <BLU173-W36002049E3D2952F154619907F0@phx.gbl>
References: <BLU173-W93CD073DD54384D8CA2E390830@phx.gbl>,
	<1439309820835-5219383.post@n6.nabble.com>
	<BLU173-W36002049E3D2952F154619907F0@phx.gbl>
Message-ID: <55CA2A28.90805@gatewaygeomatics.com>

On 2015-08-11 1:48 PM, Ivan Lucena wrote:
> Hi Mark,
>
> I am far from a Windows machine, so I can't give you much details.
>
> After loading the sample project for VS 2010, I build the libs and then
> I was able to build the OGR/DWG plugin.
>
> But when I tried to run it, I got a error message saying that a .dll was
> missing.

I'm in this exact situation often; I find the best thing to do is to 
download DependencyWalker (http://www.dependencywalker.com/), click on 
"depends.exe" and open "ogrinfo.exe" inside that, and look closely at 
the dll files it lists in the top left panel (hint: enable full paths by 
menu View/Full Paths).

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/






From even.rouault at spatialys.com  Tue Aug 11 10:08:26 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 11 Aug 2015 19:08:26 +0200
Subject: [gdal-dev] Cascaded VRTs
In-Reply-To: <ED304D15-836E-452B-85FF-F1606A6D182E@eox.at>
References: <ED304D15-836E-452B-85FF-F1606A6D182E@eox.at>
Message-ID: <201508111908.26653.even.rouault@spatialys.com>

Le mardi 11 ao?t 2015 16:35:48, Fabian Schindler a ?crit :
> Hi list,
> 
> Premise: I?m tinkering to add support for datasets from multiple sources
> (like different subdatasets) in EOxServer (Python, MapScript, ?)
> 
> Versions: GDAL 1.9.2, MapServer 6.2.2
> 
> The sample dataset I try visualize is a MODIS/HDF 4 file with 7+
> subdatasets (see [1] for a description for the whole file HDF 4 and [2]
> for a description of one of the subdatasets).
> 
> The subdatasets are not georeferenced, but are supplied with GCPs (and
> geolocation arrays, which I have not yet tried).
> 
> 
> The bands from the dataset are coming from different subdatasets, so I
> create a VRT where I collect all the subdatasets and add them as bands to
> the VRT [3]. Since MapServer is not capable of dealing with GCPs I need to
> create a rectified VRT (created with the CreateWarpedVRT function) [4].
> 
> 
> This works quite well, unless I?m in a multithreaded environment (I tested
> with both apache mod_wsgi with 1 process and 10 threads and Djangos dev
> server). In this case, when I request more than one WMS request at once I
> get the error message:
> 
> `HDF4_EOS:EOS_SWATH:"/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.201
> 5005162430.hdf":MOD_Swath_LST:Emis_32' does not exist in the file system,
> and is not recognised as a supported dataset name.
> 
> Once I get this error message, ALL further requests are also running into
> this error and I don?t get any reasonable response unless I restart the
> server.
> 
> Further details: We used the WarpedVRT method earlier to great success when
> all the sources come from a single dataset (TIFF with GCPs) and I never
> ran into this problem.
> 
> My questions:
> 
> 	* Is this approach feasible?
> 	* Is it possible to just have a single VRT for both collecting the
> datasets into a single VRT and having the warping instructions? * Any
> ideas why I get the error message? Any chance to get around this?

Hi Fabian,

recently I discovered an issue with how VRT and multi-threading played 
together. A first fix was pushed in GDAL 2.0.0. See following news entry :
"""
 * add handling of a shared='0' attribute on <SourceFilename> to open sources 
in non-shared mode, and VRT_SHARED_SOURCE config option that can be set to 0 in 
case the shared attribute isn't there (#5992)
"""

I pushed although a related completementary fix in the 2.0 branch after 2.0.0 
release. So I'd recommend you to try the 2.0 branch and define  
VRT_SHARED_SOURCE=0 as configuration option (or add a shared='0' attribute on 
all SourceFilename elements of your VRT)

I'd note that the HDF4 libraries aren't thread-safe, so in recent GDAL 
versions (1.11 for sure), there's a global GDAL mutex in the HDF4 driver to 
hopefully avoid issues (this hasn't been strongly checked, so I wouldn't 
exclude there are remaining issues).

Regarding how to have a single VRT for both collecting the datasets into a 
single VRT and having the warping instructions, you could try to put as text 
of the SourceDataset element of the warped VRT the XML escaped text of the 
"collecting VRT". Something like 

<SourceDataset>&lt;VRTDataset rasterXSize=1354" 
rasterYSize="2030"&gt;.....&lt;/VRTDataset&gt;</SourceDataset>

![CDATA[...]]> syntax also works.

Even

> 
> Regards,
> Fabian
> 
> 
> [1]
> 
> $ gdalinfo
> /var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf
> Driver: HDF4/Hierarchical Data Format Release 4
> Files: /var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf
> Size is 512, 512
> Coordinate System is `'
> Metadata:
>  ...
> Subdatasets:
>  
> SUBDATASET_1_NAME=HDF4_EOS:EOS_SWATH:"/var/eoxserver/autotest/MOD11_L2.A20
> 15001.0015.005.2015005162430.hdf":MOD_Swath_LST:LST
> SUBDATASET_1_DESC=[2030x1354] LST MOD_Swath_LST (16-bit unsigned integer)
> SUBDATASET_2_NAME=HDF4_EOS:EOS_SWATH:"/var/eoxserver/autotest/MOD11_L2.A20
> 15001.0015.005.2015005162430.hdf":MOD_Swath_LST:QC
> SUBDATASET_2_DESC=[2030x1354] QC MOD_Swath_LST (16-bit unsigned integer)
> SUBDATASET_3_NAME=HDF4_EOS:EOS_SWATH:"/var/eoxserver/autotest/MOD11_L2.A20
> 15001.0015.005.2015005162430.hdf":MOD_Swath_LST:Error_LST
> SUBDATASET_3_DESC=[2030x1354] Error_LST MOD_Swath_LST (8-bit unsigned
> integer)
> SUBDATASET_4_NAME=HDF4_EOS:EOS_SWATH:"/var/eoxserver/autotest/MOD11_L2.A20
> 15001.0015.005.2015005162430.hdf":MOD_Swath_LST:Emis_31
> SUBDATASET_4_DESC=[2030x1354] Emis_31 MOD_Swath_LST (8-bit unsigned
> integer)
> SUBDATASET_5_NAME=HDF4_EOS:EOS_SWATH:"/var/eoxserver/autotest/MOD11_L2.A20
> 15001.0015.005.2015005162430.hdf":MOD_Swath_LST:Emis_32
> SUBDATASET_5_DESC=[2030x1354] Emis_32 MOD_Swath_LST (8-bit unsigned
> integer)
> SUBDATASET_6_NAME=HDF4_EOS:EOS_SWATH:"/var/eoxserver/autotest/MOD11_L2.A20
> 15001.0015.005.2015005162430.hdf":MOD_Swath_LST:View_angle
> SUBDATASET_6_DESC=[2030x1354] View_angle MOD_Swath_LST (8-bit unsigned
> integer)
> SUBDATASET_7_NAME=HDF4_EOS:EOS_SWATH:"/var/eoxserver/autotest/MOD11_L2.A20
> 15001.0015.005.2015005162430.hdf":MOD_Swath_LST:View_time
> SUBDATASET_7_DESC=[2030x1354] View_time MOD_Swath_LST (8-bit unsigned
> integer)
> SUBDATASET_8_NAME=HDF4_SDS:UNKNOWN:"/var/eoxserver/autotest/MOD11_L2.A2015
> 001.0015.005.2015005162430.hdf":0 SUBDATASET_8_DESC=[406x271] Latitude
> (32-bit floating-point)
>  
> SUBDATASET_9_NAME=HDF4_SDS:UNKNOWN:"/var/eoxserver/autotest/MOD11_L2.A2015
> 001.0015.005.2015005162430.hdf":1 SUBDATASET_9_DESC=[406x271] Longitude
> (32-bit floating-point)
>  
> SUBDATASET_10_NAME=HDF4_SDS:UNKNOWN:"/var/eoxserver/autotest/MOD11_L2.A201
> 5001.0015.005.2015005162430.hdf":2 SUBDATASET_10_DESC=[2030x1354] LST
> (16-bit unsigned integer)
> ...
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  512.0)
> Upper Right (  512.0,    0.0)
> Lower Right (  512.0,  512.0)
> Center      (  256.0,  256.0)
> 
> [2]
> 
> $ gdalinfo
> HDF4_EOS:EOS_SWATH:"/var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.201
> 5005162430.hdf":MOD_Swath_LST:Emis_32 Driver: HDF4Image/HDF4 Dataset
> Files: /var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf
>       
> /var/eoxserver/autotest/MOD11_L2.A2015001.0015.005.2015005162430.hdf.aux.x
> ml Size is 1354, 2030
> Coordinate System is `'
> GCP[  0]: Id=, Info=
>           (2.5,2.5) -> (-17.7197341918945,16.5706329345703,0)
> GCP[  1]: Id=, Info=
>           (122.5,2.5) -> (-21.4628753662109,16.2001628875732,0)
> GCP[  2]: Id=, Info=
>           (242.5,2.5) -> (-23.6760387420654,15.9492874145508,0)
> ...
> GCP[143]: Id=, Info=
>           (1322.5,1982.5) -> (-43.3567504882812,30.9182910919189,0)
> Metadata:
>   ...
> Geolocation:
>   LINE_OFFSET=2
>   LINE_STEP=5
>   PIXEL_OFFSET=2
>   PIXEL_STEP=5
>   X_BAND=1
>  
> X_DATASET=HDF4_EOS:EOS_SWATH_GEOL:"/var/eoxserver/autotest/MOD11_L2.A20150
> 01.0015.005.2015005162430.hdf":MOD_Swath_LST:Longitude Y_BAND=1
>  
> Y_DATASET=HDF4_EOS:EOS_SWATH_GEOL:"/var/eoxserver/autotest/MOD11_L2.A20150
> 01.0015.005.2015005162430.hdf":MOD_Swath_LST:Latitude Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0, 2030.0)
> Upper Right ( 1354.0,    0.0)
> Lower Right ( 1354.0, 2030.0)
> Center      (  677.0, 1015.0)
> Band 1 Block=1354x738 Type=Byte, ColorInterp=Gray
>   Description = Band 32 emissivity
>   NoData Value=0
>   Offset: 0.49,   Scale:0.002
> 
> [3]
> 
> <VRTDataset rasterXSize="1354" rasterYSize="2030">
>   <GCPList>
>     <GCP Id="" Pixel="2.5000" Line="2.5000" X="-1.771973419189E+01"
> Y="1.657063293457E+01" /> <GCP Id="" Pixel="122.5000" Line="2.5000"
> X="-2.146287536621E+01" Y="1.620016288757E+01" /> ...
>     <GCP Id="" Pixel="1322.5000" Line="1982.5000" X="-4.335675048828E+01"
> Y="3.091829109192E+01" /> </GCPList>
>   <VRTRasterBand dataType="UInt16" band="1">
>     <SimpleSource>
>       <SourceFilename
> relativeToVRT="0">HDF4_EOS:EOS_SWATH:&quot;/var/eoxserver/autotest/MOD11_L
> 2.A2015001.0015.005.2015005162430.hdf&quot;:MOD_Swath_LST:LST</SourceFilena
> me> <SourceBand>1</SourceBand>
>       <SourceProperties RasterXSize="1354" RasterYSize="2030"
> DataType="UInt16" BlockXSize="1354" BlockYSize="738" /> </SimpleSource>
>   </VRTRasterBand>
>   <VRTRasterBand dataType="UInt16" band="2">
>     <SimpleSource>
>       <SourceFilename
> relativeToVRT="0">HDF4_EOS:EOS_SWATH:&quot;/var/eoxserver/autotest/MOD11_L
> 2.A2015001.0015.005.2015005162430.hdf&quot;:MOD_Swath_LST:QC</SourceFilenam
> e> <SourceBand>1</SourceBand>
>       <SourceProperties RasterXSize="1354" RasterYSize="2030"
> DataType="UInt16" BlockXSize="1354" BlockYSize="738" /> </SimpleSource>
>   </VRTRasterBand>
>   <VRTRasterBand dataType="Byte" band="3">
>     <SimpleSource>
>       <SourceFilename
> relativeToVRT="0">HDF4_EOS:EOS_SWATH:&quot;/var/eoxserver/autotest/MOD11_L
> 2.A2015001.0015.005.2015005162430.hdf&quot;:MOD_Swath_LST:Error_LST</Source
> Filename> <SourceBand>1</SourceBand>
>       <SourceProperties RasterXSize="1354" RasterYSize="2030"
> DataType="Byte" BlockXSize="1354" BlockYSize="738" /> </SimpleSource>
>   </VRTRasterBand>
>   <VRTRasterBand dataType="Byte" band="4">
>     <SimpleSource>
>       <SourceFilename
> relativeToVRT="0">HDF4_EOS:EOS_SWATH:&quot;/var/eoxserver/autotest/MOD11_L
> 2.A2015001.0015.005.2015005162430.hdf&quot;:MOD_Swath_LST:Emis_31</SourceFi
> lename> <SourceBand>1</SourceBand>
>       <SourceProperties RasterXSize="1354" RasterYSize="2030"
> DataType="Byte" BlockXSize="1354" BlockYSize="738" /> </SimpleSource>
>   </VRTRasterBand>
>   <VRTRasterBand dataType="Byte" band="5">
>     <SimpleSource>
>       <SourceFilename
> relativeToVRT="0">HDF4_EOS:EOS_SWATH:&quot;/var/eoxserver/autotest/MOD11_L
> 2.A2015001.0015.005.2015005162430.hdf&quot;:MOD_Swath_LST:Emis_32</SourceFi
> lename> <SourceBand>1</SourceBand>
>       <SourceProperties RasterXSize="1354" RasterYSize="2030"
> DataType="Byte" BlockXSize="1354" BlockYSize="738" /> </SimpleSource>
>   </VRTRasterBand>
>   <VRTRasterBand dataType="Byte" band="6">
>     <SimpleSource>
>       <SourceFilename
> relativeToVRT="0">HDF4_EOS:EOS_SWATH:&quot;/var/eoxserver/autotest/MOD11_L
> 2.A2015001.0015.005.2015005162430.hdf&quot;:MOD_Swath_LST:View_angle</Sourc
> eFilename> <SourceBand>1</SourceBand>
>       <SourceProperties RasterXSize="1354" RasterYSize="2030"
> DataType="Byte" BlockXSize="1354" BlockYSize="738" /> </SimpleSource>
>   </VRTRasterBand>
>   <VRTRasterBand dataType="Byte" band="7">
>     <SimpleSource>
>       <SourceFilename
> relativeToVRT="0">HDF4_EOS:EOS_SWATH:&quot;/var/eoxserver/autotest/MOD11_L
> 2.A2015001.0015.005.2015005162430.hdf&quot;:MOD_Swath_LST:View_time</Source
> Filename> <SourceBand>1</SourceBand>
>       <SourceProperties RasterXSize="1354" RasterYSize="2030"
> DataType="Byte" BlockXSize="1354" BlockYSize="738" /> </SimpleSource>
>   </VRTRasterBand>
> </VRTDataset>
> 
> [4]
> 
> <VRTDataset rasterXSize="2029" rasterYSize="1820"
> subClass="VRTWarpedDataset"> <GeoTransform> -4.2266212922257814e+01, 
> 1.1322693568940058e-02,  0.0000000000000000e+00,  3.4413385891072409e+01, 
> 0.0000000000000000e+00, -1.1322693568940058e-02</GeoTransform>
> <VRTRasterBand dataType="UInt16" band="1" subClass="VRTWarpedRasterBand">
> <Metadata />
>   </VRTRasterBand>
>   <VRTRasterBand dataType="UInt16" band="2" subClass="VRTWarpedRasterBand">
>     <Metadata />
>   </VRTRasterBand>
>   <VRTRasterBand dataType="Byte" band="3" subClass="VRTWarpedRasterBand">
>     <Metadata />
>   </VRTRasterBand>
>   <VRTRasterBand dataType="Byte" band="4" subClass="VRTWarpedRasterBand">
>     <Metadata />
>   </VRTRasterBand>
>   <VRTRasterBand dataType="Byte" band="5" subClass="VRTWarpedRasterBand">
>     <Metadata />
>   </VRTRasterBand>
>   <VRTRasterBand dataType="Byte" band="6" subClass="VRTWarpedRasterBand">
>     <Metadata />
>   </VRTRasterBand>
>   <VRTRasterBand dataType="Byte" band="7" subClass="VRTWarpedRasterBand">
>     <Metadata />
>   </VRTRasterBand>
>   <BlockXSize>512</BlockXSize>
>   <BlockYSize>128</BlockYSize>
>   <GDALWarpOptions>
>     <WarpMemoryLimit>6.71089e+07</WarpMemoryLimit>
>     <ResampleAlg>NearestNeighbour</ResampleAlg>
>     <WorkingDataType>UInt16</WorkingDataType>
>     <SourceDataset
> relativeToVRT="1">ff71b2c70ab940d6b35ecaa6c4b100e6</SourceDataset>
> <Transformer>
>       <ApproxTransformer>
>         <MaxError>0.125</MaxError>
>         <BaseTransformer>
>           <GenImgProjTransformer>
>             <SrcGCPTransformer>
>               <GCPTransformer>
>                 <Order>2</Order>
>                 <Reversed>0</Reversed>
>                 <GCPList>
>                   <GCP Id="" Pixel="2.5000" Line="2.5000"
> X="-1.771973419189E+01" Y="1.657063293457E+01" /> <GCP Id=""
> Pixel="122.5000" Line="2.5000" X="-2.146287536621E+01"
> Y="1.620016288757E+01" /> ...
>                   <GCP Id="" Pixel="1322.5000" Line="1982.5000"
> X="-4.335675048828E+01" Y="3.091829109192E+01" /> </GCPList>
>               </GCPTransformer>
>             </SrcGCPTransformer>
>            
> <DstGeoTransform>-42.26621292225781,0.01132269356894006,0,34.4133858910724
> 1,0,-0.01132269356894006</DstGeoTransform>
> <DstInvGeoTransform>3732.876162806413,88.31820749288477,0,3039.32855566044
> 6,0,-88.31820749288477</DstInvGeoTransform> </GenImgProjTransformer>
>         </BaseTransformer>
>       </ApproxTransformer>
>     </Transformer>
>     <BandList>
>       <BandMapping src="1" dst="1" />
>       <BandMapping src="2" dst="2" />
>       <BandMapping src="3" dst="3" />
>       <BandMapping src="4" dst="4" />
>       <BandMapping src="5" dst="5" />
>       <BandMapping src="6" dst="6" />
>       <BandMapping src="7" dst="7" />
>     </BandList>
>   </GDALWarpOptions>
> </VRTDataset>

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From lucena_ivan at hotmail.com  Tue Aug 11 14:55:37 2015
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Tue, 11 Aug 2015 17:55:37 -0400
Subject: [gdal-dev] how to build dwg driver?
In-Reply-To: <55CA2A28.90805@gatewaygeomatics.com>
References: <BLU173-W93CD073DD54384D8CA2E390830@phx.gbl>, ,
	<1439309820835-5219383.post@n6.nabble.com>,
	<BLU173-W36002049E3D2952F154619907F0@phx.gbl>,
	<55CA2A28.90805@gatewaygeomatics.com>
Message-ID: <BLU173-W354D77F37F4754DCE3DAB2907F0@phx.gbl>

Hi Jeff,

I usually go withe Microsoft Process Monitor but thanks for the tip.

The missing dll name is "TD_Alloc_4.0.01_10.dll" (or "TD_Alloc_3.09.1.0.dll", depending on the TX_SDK version I tried).

The question is, should that dll be created when I run the sample-project or should it be distributed pre-build with the TX_SDK zip download?

Another possibility would be to build the plugin against the static version of TD_Alloc.lib without run-time dependence on the dll. 

But I don't know if that is possible either.

Regards,

Ivan

> Date: Tue, 11 Aug 2015 14:00:24 -0300
> From: jmckenna at gatewaygeomatics.com
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] how to build dwg driver?
> 
> On 2015-08-11 1:48 PM, Ivan Lucena wrote:
> > Hi Mark,
> >
> > I am far from a Windows machine, so I can't give you much details.
> >
> > After loading the sample project for VS 2010, I build the libs and then
> > I was able to build the OGR/DWG plugin.
> >
> > But when I tried to run it, I got a error message saying that a .dll was
> > missing.
> 
> I'm in this exact situation often; I find the best thing to do is to 
> download DependencyWalker (http://www.dependencywalker.com/), click on 
> "depends.exe" and open "ogrinfo.exe" inside that, and look closely at 
> the dll files it lists in the top left panel (hint: enable full paths by 
> menu View/Full Paths).
> 
> -jeff
> 
> 
> 
> -- 
> Jeff McKenna
> MapServer Consulting and Training Services
> http://www.gatewaygeomatics.com/
> 
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150811/0643517c/attachment.html>

From wolf+grass at bergenheim.net  Tue Aug 11 15:55:03 2015
From: wolf+grass at bergenheim.net (Wolf Bergenheim)
Date: Wed, 12 Aug 2015 00:55:03 +0200
Subject: [gdal-dev] Regarding libkml driver
In-Reply-To: <55CA2937.80908@xs4all.nl>
References: <CANNqv9e5LR_oQ9AVj9Kgr1AiSg4ASG0CSUY+tUXNHxQiDv0cVA@mail.gmail.com>
	<1724406.vKdNWo3mXU@even-n550jk>
	<CANNqv9ddN_wmPesmFNno_dLvXr9dfxHQNfu1kCUKVScJS4giTA@mail.gmail.com>
	<8994555.TqCugiCv4k@even-n550jk>
	<CANNqv9e6Y75PLZcHue3G93124whFN8ZoSthS962yQT=svUy=iQ@mail.gmail.com>
	<CACmBxyst6La80mEZ0NgAAfkmiQ3VtE15ejQ6-Zipd9rGBUfF3Q@mail.gmail.com>
	<CACmBxyu2YBQdzXtfBe0aX72NqXRR_7sjMhKGd2A5XQVgJvyCow@mail.gmail.com>
	<55CA2937.80908@xs4all.nl>
Message-ID: <CAJhTkW5Dd3hrZtFUqyxBqHkAvkav1wFvs2-o+x7cqb1oxSi9=A@mail.gmail.com>

On 11 August 2015 at 18:56, Sebastiaan Couwenberg <sebastic at xs4all.nl>
wrote:

> On 11-08-15 18:37, Kurt Schwehr wrote:
> > Wolf and I have joined in working on libkml.  We will be getting more
> > transitioned from the old code.google.com site to
> > https://github.com/google/libkml, will be pushing some general
> maintanence
> > patches and will be getting the pull request processed.  We look forward
> to
> > collaborating on future development of libkml.
>
> The renewed interest in libkml from Google sounds promising.
>
> Glad to hear it!


> What are your views on merging the work in the libkml/libkml fork back
> into google/libkml?
>
>
I'd like to merge back as much of the work that has gone into libkml/libkml
to google/libkml. Especially externalizing libraries.


> The switch to CMake and removal of the third party dependencies in favor
> of linking to system provided libraries solve the issues that required
> patches in the libkml Debian package in the past. I'd like to see these
> changes merged back into google/libkml to not loose these gains.
>
> These sound very interesting, and I'll look at them more closely, but on
the surface it looks good.


> Most importantly the final 1.3.0 libkml release is long overdue, it has
> been required for GDAL for many years now but many distributions still
> ship libkml 1.2 (Fedora removed libkml even because it was abandoned
> upstream). What do you think needs to be done to get the 1.3.0 release out?
>
>
Hmm. I think that we should first get to the point where we can merge the
libkml/libkml stuff back to google/libkml before we push out a new release,
in order to avoid confusion and mess.
Also we might want to call it libkml 2.0.0 so we don't really need to worry
about backwards compatibility.

--Wolf
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150812/9b009951/attachment.html>

From even.rouault at spatialys.com  Wed Aug 12 02:25:49 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 12 Aug 2015 11:25:49 +0200
Subject: [gdal-dev] Burn 3d-lines from python
In-Reply-To: <CANzGYpRkwp41PtpKUbQheaD+0sZuNE_ikFkAcv19vREZPdqkDw@mail.gmail.com>
References: <CANzGYpRkwp41PtpKUbQheaD+0sZuNE_ikFkAcv19vREZPdqkDw@mail.gmail.com>
Message-ID: <201508121125.50000.even.rouault@spatialys.com>

Le mardi 11 ao?t 2015 11:36:32, Simon Lyngby Kokkendorff a ?crit :
> Hello list,
> 
>   I'm trying to rasterize some 3d-lines programtically from python. Using
> gdal 1.11.2 from the osgeo4w64 environment. Seems to work fine, except that
> I get a z-offset of 255 (one byte) in my output raster. Works fine if I use
> gdal_rasterize with the -3d option.
> 
>  The following python code should reproduce the problem:
> 
> from osgeo import ogr,gdal
> print gdal.__version__
> georef=[0,1.0,0,10.5,0,-1.0]
> m_drv_ogr=ogr.GetDriverByName("Memory")
> line_ds = m_drv_ogr.CreateDataSource( "dummy")
> layer = line_ds.CreateLayer( "lines", None, ogr.wkbLineString25D)
> layerdefn=layer.GetLayerDefn()
> line=ogr.Geometry(ogr.wkbLineString25D)
> line.AddPoint(0,5.5,0)
> line.AddPoint(10,5.5,10)
> feature=ogr.Feature(layerdefn)
> feature.SetGeometry(line)
> res=layer.CreateFeature(feature)
> layer.ResetReading()
> m_drv_gdal=gdal.GetDriverByName("MEM")
> raster_ds=m_drv_gdal.Create("dummy",10,10,1,gdal.GDT_Float64)
> raster_ds.SetGeoTransform(georef)
> ok=gdal.RasterizeLayer(raster_ds,[1], layer, options=["BURN_VALUE_FROM=Z"])
> A=raster_ds.ReadAsArray()
> print A
> 
> Will output:
> 
> [[   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
>  [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
>  [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
>  [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
>  [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
>  [ 255.  256.  257.  258.  259.  260.  261.  262.  263.  264.]
>  [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
>  [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
>  [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
>  [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]]

Simon,

looking closer, the issue is that the Python bindings of gdal.RasterizeLayer() 
have a default constant burn value of 255 if not explicitly specified. This 
constant burn value comes in addition to the other source of burning, such as 
Z.
So the fix is to add burn_values = [0] as a keyword of gdal.RasterizeLayer()

I guess the rationale of that was that without any option, the rasterizing 
would burn 255, which is a reasonable default. But it is true that it is 
rather unexpected if you specify BURN_VALUE_FROM=Z

Even


> 
> Cheers,
> Simon Kokkendorff, Dansish Geodata Agency

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From silyko at gmail.com  Wed Aug 12 03:54:17 2015
From: silyko at gmail.com (Simon Lyngby Kokkendorff)
Date: Wed, 12 Aug 2015 12:54:17 +0200
Subject: [gdal-dev] Burn 3d-lines from python
In-Reply-To: <201508121125.50000.even.rouault@spatialys.com>
References: <CANzGYpRkwp41PtpKUbQheaD+0sZuNE_ikFkAcv19vREZPdqkDw@mail.gmail.com>
	<201508121125.50000.even.rouault@spatialys.com>
Message-ID: <CANzGYpS=-EKLQqRaZ4tsVcJcQYh+3AW9fj0AkzfXGDSHJDGLGw@mail.gmail.com>

Hi Even,

   Thanks a lot for the explanation - will modify as needed! Yes, the
behviour was a little surprising, as it is not present with e.g.
'ATTRIBUTE=<something>' .

Cheers,
Simon

On Wed, Aug 12, 2015 at 11:25 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le mardi 11 ao?t 2015 11:36:32, Simon Lyngby Kokkendorff a ?crit :
> > Hello list,
> >
> >   I'm trying to rasterize some 3d-lines programtically from python. Using
> > gdal 1.11.2 from the osgeo4w64 environment. Seems to work fine, except
> that
> > I get a z-offset of 255 (one byte) in my output raster. Works fine if I
> use
> > gdal_rasterize with the -3d option.
> >
> >  The following python code should reproduce the problem:
> >
> > from osgeo import ogr,gdal
> > print gdal.__version__
> > georef=[0,1.0,0,10.5,0,-1.0]
> > m_drv_ogr=ogr.GetDriverByName("Memory")
> > line_ds = m_drv_ogr.CreateDataSource( "dummy")
> > layer = line_ds.CreateLayer( "lines", None, ogr.wkbLineString25D)
> > layerdefn=layer.GetLayerDefn()
> > line=ogr.Geometry(ogr.wkbLineString25D)
> > line.AddPoint(0,5.5,0)
> > line.AddPoint(10,5.5,10)
> > feature=ogr.Feature(layerdefn)
> > feature.SetGeometry(line)
> > res=layer.CreateFeature(feature)
> > layer.ResetReading()
> > m_drv_gdal=gdal.GetDriverByName("MEM")
> > raster_ds=m_drv_gdal.Create("dummy",10,10,1,gdal.GDT_Float64)
> > raster_ds.SetGeoTransform(georef)
> > ok=gdal.RasterizeLayer(raster_ds,[1], layer,
> options=["BURN_VALUE_FROM=Z"])
> > A=raster_ds.ReadAsArray()
> > print A
> >
> > Will output:
> >
> > [[   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
> >  [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
> >  [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
> >  [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
> >  [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
> >  [ 255.  256.  257.  258.  259.  260.  261.  262.  263.  264.]
> >  [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
> >  [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
> >  [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]
> >  [   0.    0.    0.    0.    0.    0.    0.    0.    0.    0.]]
>
> Simon,
>
> looking closer, the issue is that the Python bindings of
> gdal.RasterizeLayer()
> have a default constant burn value of 255 if not explicitly specified. This
> constant burn value comes in addition to the other source of burning, such
> as
> Z.
> So the fix is to add burn_values = [0] as a keyword of
> gdal.RasterizeLayer()
>
> I guess the rationale of that was that without any option, the rasterizing
> would burn 255, which is a reasonable default. But it is true that it is
> rather unexpected if you specify BURN_VALUE_FROM=Z
>
> Even
>
>
> >
> > Cheers,
> > Simon Kokkendorff, Dansish Geodata Agency
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150812/8480fc46/attachment.html>

From sebastic at xs4all.nl  Wed Aug 12 04:04:16 2015
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Wed, 12 Aug 2015 13:04:16 +0200
Subject: [gdal-dev] Regarding libkml driver
In-Reply-To: <CAJhTkW5Dd3hrZtFUqyxBqHkAvkav1wFvs2-o+x7cqb1oxSi9=A@mail.gmail.com>
References: <CANNqv9e5LR_oQ9AVj9Kgr1AiSg4ASG0CSUY+tUXNHxQiDv0cVA@mail.gmail.com>
	<1724406.vKdNWo3mXU@even-n550jk>
	<CANNqv9ddN_wmPesmFNno_dLvXr9dfxHQNfu1kCUKVScJS4giTA@mail.gmail.com>
	<8994555.TqCugiCv4k@even-n550jk>
	<CANNqv9e6Y75PLZcHue3G93124whFN8ZoSthS962yQT=svUy=iQ@mail.gmail.com>
	<CACmBxyst6La80mEZ0NgAAfkmiQ3VtE15ejQ6-Zipd9rGBUfF3Q@mail.gmail.com>
	<CACmBxyu2YBQdzXtfBe0aX72NqXRR_7sjMhKGd2A5XQVgJvyCow@mail.gmail.com>
	<55CA2937.80908@xs4all.nl>
	<CAJhTkW5Dd3hrZtFUqyxBqHkAvkav1wFvs2-o+x7cqb1oxSi9=A@mail.gmail.com>
Message-ID: <55CB2830.7080003@xs4all.nl>

On 12-08-15 00:55, Wolf Bergenheim wrote:
> On 11 August 2015 at 18:56, Sebastiaan Couwenberg wrote:
>> On 11-08-15 18:37, Kurt Schwehr wrote:
>>> Wolf and I have joined in working on libkml.  We will be getting more
>>> transitioned from the old code.google.com site to
>>> https://github.com/google/libkml, will be pushing some general
>>> maintanence
>>> patches and will be getting the pull request processed.  We look forward
>>> to
>>> collaborating on future development of libkml.
>>
>> The renewed interest in libkml from Google sounds promising.
>
> Glad to hear it!

I've also commented on the Project status GitHub issue:
https://github.com/google/libkml/issues/4

As I wrote in an earlier comment:

"
 I'd love to see all GIS developers rally around the new preferred
 repository to collaboratively maintain libkml, breathing new life into
 this useful library because there are no good alternatives.
"

The community involvement in libkml development is essential in my
opinion to prevent the project from dying again when the Google
engineers loose interest or otherwise move on.

What are your thoughts about that?

Maybe it would make sense to form libkml into an OSGeo project?

>> What are your views on merging the work in the libkml/libkml fork back
>> into google/libkml?
>>
>>
> I'd like to merge back as much of the work that has gone into libkml/libkml
> to google/libkml. Especially externalizing libraries.

That's great, very much what we need.

>> The switch to CMake and removal of the third party dependencies in favor
>> of linking to system provided libraries solve the issues that required
>> patches in the libkml Debian package in the past. I'd like to see these
>> changes merged back into google/libkml to not loose these gains.
>
> These sound very interesting, and I'll look at them more closely, but on
> the surface it looks good.
> 
>> Most importantly the final 1.3.0 libkml release is long overdue, it has
>> been required for GDAL for many years now but many distributions still
>> ship libkml 1.2 (Fedora removed libkml even because it was abandoned
>> upstream). What do you think needs to be done to get the 1.3.0 release out?
>
> Hmm. I think that we should first get to the point where we can merge the
> libkml/libkml stuff back to google/libkml before we push out a new release,
> in order to avoid confusion and mess.

We definitely need to sort out how to continue libkml development, what
to do with the forks (Kitware has many changes in their fork too that
should be considered).

> Also we might want to call it libkml 2.0.0 so we don't really need to worry
> about backwards compatibility.

The libkml 1.3.0-rc0 release from libkml/libkml already includes a
SONAME bump to account for the minizip changes.

Bumping the version to 2.0.0 makes sense if more drastic changes are
included, otherwise it seems better to follow the 1.2 release with 1.3.0.

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From wolf+grass at bergenheim.net  Wed Aug 12 06:13:21 2015
From: wolf+grass at bergenheim.net (Wolf Bergenheim)
Date: Wed, 12 Aug 2015 15:13:21 +0200
Subject: [gdal-dev] Regarding libkml driver
In-Reply-To: <55CB2830.7080003@xs4all.nl>
References: <CANNqv9e5LR_oQ9AVj9Kgr1AiSg4ASG0CSUY+tUXNHxQiDv0cVA@mail.gmail.com>
	<1724406.vKdNWo3mXU@even-n550jk>
	<CANNqv9ddN_wmPesmFNno_dLvXr9dfxHQNfu1kCUKVScJS4giTA@mail.gmail.com>
	<8994555.TqCugiCv4k@even-n550jk>
	<CANNqv9e6Y75PLZcHue3G93124whFN8ZoSthS962yQT=svUy=iQ@mail.gmail.com>
	<CACmBxyst6La80mEZ0NgAAfkmiQ3VtE15ejQ6-Zipd9rGBUfF3Q@mail.gmail.com>
	<CACmBxyu2YBQdzXtfBe0aX72NqXRR_7sjMhKGd2A5XQVgJvyCow@mail.gmail.com>
	<55CA2937.80908@xs4all.nl>
	<CAJhTkW5Dd3hrZtFUqyxBqHkAvkav1wFvs2-o+x7cqb1oxSi9=A@mail.gmail.com>
	<55CB2830.7080003@xs4all.nl>
Message-ID: <CAJhTkW7GqJEL_1bCOEgeawh0N+8k3MGHcZAJOoZFJk4UyeXh1g@mail.gmail.com>

On 12 August 2015 at 13:04, Sebastiaan Couwenberg <sebastic at xs4all.nl>
wrote:
>
>
> I've also commented on the Project status GitHub issue:
> https://github.com/google/libkml/issues/4
>
> As I wrote in an earlier comment:
>
> "
>  I'd love to see all GIS developers rally around the new preferred
>  repository to collaboratively maintain libkml, breathing new life into
>  this useful library because there are no good alternatives.
> "
>
> The community involvement in libkml development is essential in my
> opinion to prevent the project from dying again when the Google
> engineers loose interest or otherwise move on.
>
> What are your thoughts about that?
>
>
I fully agree with mashbridge, that we should welcome non-google Committers
to the project.


> Maybe it would make sense to form libkml into an OSGeo project?
>

That's probably not going to happen, as that would mean giving away libkml,
which we don't want to do, at this point in time at least. It is, and will
continue to be a Google owned project.

>> Most importantly the final 1.3.0 libkml release is long overdue, it has
> >> been required for GDAL for many years now but many distributions still
> >> ship libkml 1.2 (Fedora removed libkml even because it was abandoned
> >> upstream). What do you think needs to be done to get the 1.3.0 release
> out?
> >
> > Hmm. I think that we should first get to the point where we can merge the
> > libkml/libkml stuff back to google/libkml before we push out a new
> release,
> > in order to avoid confusion and mess.
>
> We definitely need to sort out how to continue libkml development, what
> to do with the forks (Kitware has many changes in their fork too that
> should be considered).
>
>
Agreed. It's good to see that we seem to be in agreement on how to
continue. I'd say that the next steps would be to start getting those


> > Also we might want to call it libkml 2.0.0 so we don't really need to
> worry
> > about backwards compatibility.
>
> The libkml 1.3.0-rc0 release from libkml/libkml already includes a
> SONAME bump to account for the minizip changes.
>
> Bumping the version to 2.0.0 makes sense if more drastic changes are
> included, otherwise it seems better to follow the 1.2 release with 1.3.0.
>
>
Yea, I suppose that  would work. Just thinking less technically on this. :)
I don't have any strong opinions on the version number.

I'm beginning to wonder if we should have our own libkml mailinglist, since
all this talk is strictly not GDAL... But as long as no-one objects. But
that's also something to think about for the future.

--Wolf
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150812/be2eb070/attachment.html>

From sebastic at xs4all.nl  Wed Aug 12 06:31:33 2015
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Wed, 12 Aug 2015 15:31:33 +0200
Subject: [gdal-dev] Regarding libkml driver
In-Reply-To: <CAJhTkW7GqJEL_1bCOEgeawh0N+8k3MGHcZAJOoZFJk4UyeXh1g@mail.gmail.com>
References: <CANNqv9e5LR_oQ9AVj9Kgr1AiSg4ASG0CSUY+tUXNHxQiDv0cVA@mail.gmail.com>
	<1724406.vKdNWo3mXU@even-n550jk>
	<CANNqv9ddN_wmPesmFNno_dLvXr9dfxHQNfu1kCUKVScJS4giTA@mail.gmail.com>
	<8994555.TqCugiCv4k@even-n550jk>
	<CANNqv9e6Y75PLZcHue3G93124whFN8ZoSthS962yQT=svUy=iQ@mail.gmail.com>
	<CACmBxyst6La80mEZ0NgAAfkmiQ3VtE15ejQ6-Zipd9rGBUfF3Q@mail.gmail.com>
	<CACmBxyu2YBQdzXtfBe0aX72NqXRR_7sjMhKGd2A5XQVgJvyCow@mail.gmail.com>
	<55CA2937.80908@xs4all.nl>
	<CAJhTkW5Dd3hrZtFUqyxBqHkAvkav1wFvs2-o+x7cqb1oxSi9=A@mail.gmail.com>
	<55CB2830.7080003@xs4all.nl>
	<CAJhTkW7GqJEL_1bCOEgeawh0N+8k3MGHcZAJOoZFJk4UyeXh1g@mail.gmail.com>
Message-ID: <55CB4AB5.3000401@xs4all.nl>

On 12-08-15 15:13, Wolf Bergenheim wrote:
> I'm beginning to wonder if we should have our own libkml mailinglist, since
> all this talk is strictly not GDAL... But as long as no-one objects. But
> that's also something to think about for the future.

Most of this discussion can be continued in the 'Project status' issue
on GitHub: https://github.com/google/libkml/issues/4

A dedicated libkml mailinglist is very welcome too, preferably mailman
based, not Google Groups

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From wolf+grass at bergenheim.net  Wed Aug 12 08:22:08 2015
From: wolf+grass at bergenheim.net (Wolf Bergenheim)
Date: Wed, 12 Aug 2015 17:22:08 +0200
Subject: [gdal-dev] Regarding libkml driver
In-Reply-To: <55CB4AB5.3000401@xs4all.nl>
References: <CANNqv9e5LR_oQ9AVj9Kgr1AiSg4ASG0CSUY+tUXNHxQiDv0cVA@mail.gmail.com>
	<1724406.vKdNWo3mXU@even-n550jk>
	<CANNqv9ddN_wmPesmFNno_dLvXr9dfxHQNfu1kCUKVScJS4giTA@mail.gmail.com>
	<8994555.TqCugiCv4k@even-n550jk>
	<CANNqv9e6Y75PLZcHue3G93124whFN8ZoSthS962yQT=svUy=iQ@mail.gmail.com>
	<CACmBxyst6La80mEZ0NgAAfkmiQ3VtE15ejQ6-Zipd9rGBUfF3Q@mail.gmail.com>
	<CACmBxyu2YBQdzXtfBe0aX72NqXRR_7sjMhKGd2A5XQVgJvyCow@mail.gmail.com>
	<55CA2937.80908@xs4all.nl>
	<CAJhTkW5Dd3hrZtFUqyxBqHkAvkav1wFvs2-o+x7cqb1oxSi9=A@mail.gmail.com>
	<55CB2830.7080003@xs4all.nl>
	<CAJhTkW7GqJEL_1bCOEgeawh0N+8k3MGHcZAJOoZFJk4UyeXh1g@mail.gmail.com>
	<55CB4AB5.3000401@xs4all.nl>
Message-ID: <CAJhTkW5nfdsvGGyAmhveWFV_hUKsHwYWh2+aMUKtqa8fYDBSSQ@mail.gmail.com>

Sounds good. Let's move this discussion to
https://github.com/google/libkml/issues/4

On 12 August 2015 at 15:31, Sebastiaan Couwenberg <sebastic at xs4all.nl>
wrote:

> On 12-08-15 15:13, Wolf Bergenheim wrote:
> > I'm beginning to wonder if we should have our own libkml mailinglist,
> since
> > all this talk is strictly not GDAL... But as long as no-one objects. But
> > that's also something to think about for the future.
>
> Most of this discussion can be continued in the 'Project status' issue
> on GitHub: https://github.com/google/libkml/issues/4
>
> A dedicated libkml mailinglist is very welcome too, preferably mailman
> based, not Google Groups
>
> Kind Regards,
>
> Bas
>
> --
>  GPG Key ID: 4096R/6750F10AE88D4AF1
> Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150812/90c05b56/attachment.html>

From federicojurio at suremptec.com.ar  Thu Aug 13 12:23:14 2015
From: federicojurio at suremptec.com.ar (Federico)
Date: Thu, 13 Aug 2015 12:23:14 -0700 (PDT)
Subject: [gdal-dev] Build libecwj2 3.3 with GCC 4.9
Message-ID: <1439493794753-5219716.post@n6.nabble.com>

Hello list,

I'm trying to libecwj2 3.3 for GDAL 1.11.0
Under Ubuntu 14.04 i386 i have not compilation problems after applying  this
<https://trac.osgeo.org/gdal/ticket/4868>   patch. But i have troubles when
i try to compile on Windows XP x86 and Windows 7 x64 using GCC 4.9
I've read several tickets mentioned in the ECW article from the GDAL Wiki
but i cannot solve my compilation error.

Someone have to deal with this problem?

$ make
Making all in Source
make[1]: Entering directory `/c/stable-environment/src/libecwj2-3.3/Source'
Making all in NCSBuildGnu
make[2]: Entering directory
`/c/stable-environment/src/libecwj2-3.3/Source/NCSBuildGnu'
make  all-am
make[3]: Entering directory
`/c/stable-environment/src/libecwj2-3.3/Source/NCSBuildGnu'
if g++ -DHAVE_CONFIG_H -I. -I. -I.  -D_GNU_SOURCE -D_REENTRANT -DLIBECWJ2
-DPOSIX -I/c/stable-environment/src/libecwj2-3.3/Source/include
-I/c/stable-environment/src/libecwj2-3.3/Source/C/NCSEcw/lcms/
include -Wall -Wno-long-long -fno-common   -g -O2 -MT
______lib_libecwj2_a-NCSJP2.o -MD -MP -MF
".deps/______lib_libecwj2_a-NCSJP2.Tpo" \
          -c -o ______lib_libecwj2_a-NCSJP2.o `test -f
'../C/NCSEcw/NCSJP2/NCSJP2.cpp' || echo './'`../C/NCSEcw/NCSJP2/NCSJP2.cpp;
\
        then mv -f ".deps/______lib_libecwj2_a-NCSJP2.Tpo"
".deps/______lib_libecwj2_a-NCSJP2.Po"; \
        else rm -f ".deps/______lib_libecwj2_a-NCSJP2.Tpo"; exit 1; \
        fi
In file included from
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSPrefs.h:130:0,
                 from
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSUtil.h:86,
                 from
c:/stable-environment/src/libecwj2-3.3/Source/include/ECW.h:137,
                 from
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSEcw.h:73,
                 from ../C/NCSEcw/NCSJP2/NCSJP2.cpp:24:
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSString.h:6:0:
warning: ignoring #pragma warning  [-Wunknown-pragmas]
  #pragma warning(disable:4786)
 ^
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSString.h:7:0:
warning: ignoring #pragma warning  [-Wunknown-pragmas]
  #pragma warning(disable:4251)
 ^
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSString.h:8:0:
warning: ignoring #pragma warning  [-Wunknown-pragmas]
  #pragma warning(disable:4275)
 ^
In file included from
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSEcw.h:53:0,
                 from ../C/NCSEcw/NCSJP2/NCSJP2.cpp:24:
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSDefs.h: In function
'int wcsnicmp(const wchar_t*, const wchar_t*, int)':
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSDefs.h:407:80:
error: conflicting declaration of C function 'int wcsnicmp(const wchar_t*,
const wchar_t*, int)'
 static NCS_INLINE int wcsnicmp(const wchar_t *s1, const wchar_t *s2, int
nChars)
                                                                               
^
In file included from
C:/mingw-w64/i686-4.9.0-release-posix-sjlj-rt_v3-rev2/mingw32/i686-w64-mingw32/include/guiddef.h:148:0,
                 from
C:/mingw-w64/i686-4.9.0-release-posix-sjlj-rt_v3-rev2/mingw32/i686-w64-mingw32/include/winnt.h:602,
                 from
C:/mingw-w64/i686-4.9.0-release-posix-sjlj-rt_v3-rev2/mingw32/i686-w64-mingw32/include/minwindef.h:146,
                 from
C:/mingw-w64/i686-4.9.0-release-posix-sjlj-rt_v3-rev2/mingw32/i686-w64-mingw32/include/windef.h:8,
                 from
C:/mingw-w64/i686-4.9.0-release-posix-sjlj-rt_v3-rev2/mingw32/i686-w64-mingw32/include/windows.h:69,
                 from
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSTypes.h:78,
                 from
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSDefs.h:38,
                 from
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSEcw.h:53,
                 from ../C/NCSEcw/NCSJP2/NCSJP2.cpp:24:
C:/mingw-w64/i686-4.9.0-release-posix-sjlj-rt_v3-rev2/mingw32/i686-w64-mingw32/include/string.h:162:15:
note: previous declaration 'int wcsnicmp(const wchar_t*, const wchar_t*,
size_t)'
   int __cdecl wcsnicmp(const wchar_t *_Str1,const wchar_t *_Str2,size_t
_MaxCount) __MINGW_ATTRIB_DEPRECATED_MSVC2005;
               ^
In file included from
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSString.h:14:0,
                 from
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSPrefs.h:130,
                 from
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSUtil.h:86,
                 from
c:/stable-environment/src/libecwj2-3.3/Source/include/ECW.h:137,
                 from
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSEcw.h:73,
                 from ../C/NCSEcw/NCSJP2/NCSJP2.cpp:24:
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSMisc.h: In function
'INT32 NCSfloatToInt32_RM(IEEE4)':
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSMisc.h:89:3: error:
expected '(' before '{' token
   {                                       \
   ^
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSMisc.h:128:2: note:
in expansion of macro 'FLT_TO_INT32'
  FLT_TO_INT32(i32, f);
  ^
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSMisc.h:90:10:
error: expected '(' before 'fld'
    __asm fld dword ptr [b]             \
          ^
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSMisc.h:128:2: note:
in expansion of macro 'FLT_TO_INT32'
  FLT_TO_INT32(i32, f);
  ^
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSMisc.h:90:10:
error: 'fld' was not declared in this scope
    __asm fld dword ptr [b]             \
          ^
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSMisc.h:128:2: note:
in expansion of macro 'FLT_TO_INT32'
  FLT_TO_INT32(i32, f);
  ^
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSMisc.h: In function
'INT32 NCSfloatToInt32_0_1(IEEE4)':
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSMisc.h:140:24:
warning: dereferencing type-punned pointer will break strict-aliasing rules
[-Wstrict-aliasing]
     return((*(INT32 *)&y) & 0x7FFFFF); // last 23 bits
                        ^
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSMisc.h: In function
'INT32 NCSfloatToInt32(IEEE4)':
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSMisc.h:146:28:
warning: dereferencing type-punned pointer will break strict-aliasing rules
[-Wstrict-aliasing]
  INT32 FltInt = *(INT32 *)&x;
                            ^
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSMisc.h: In function
'INT32 NCSdoubleToInt32(IEEE8)':
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSMisc.h:169:28:
warning: dereferencing type-punned pointer will break strict-aliasing rules
[-Wstrict-aliasing]
  INT64 DblInt = *(INT64 *)&x;
                            ^
In file included from
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSPrefs.h:131:0,
                 from
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSUtil.h:86,
                 from
c:/stable-environment/src/libecwj2-3.3/Source/include/ECW.h:137,
                 from
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSEcw.h:73,
                 from ../C/NCSEcw/NCSJP2/NCSJP2.cpp:24:
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSError.h: At global
scope:
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSError.h:53:63:
warning: deprecated conversion from string constant to 'char*'
[-Wwrite-strings]
  CNCSError(const NCSError eError = NCS_SUCCESS, char *pFile = ""
/*__FILE__*/, int nLine = 0 /*__LINE__*/, CNCSLog::NCSLogLevel eLevel =
CNCSLog::LOG_LEVEL1, const char *pText = (char*)NULL);
                                                               ^
In file included from ../C/NCSEcw/NCSJP2/NCSJP2.cpp:26:0:
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSJPCFileIOStream.h:
In member function 'virtual void CNCSJPCFileIOStream::WriteFlush()':
c:/stable-environment/src/libecwj2-3.3/Source/include/NCSJPCFileIOStream.h:180:24:
warning: deprecated conversion from string constant to 'char*'
[-Wwrite-strings]
      *(CNCSError*)this = eError;
                        ^
make[3]: *** [______lib_libecwj2_a-NCSJP2.o] Error 1
make[3]: Leaving directory
`/c/stable-environment/src/libecwj2-3.3/Source/NCSBuildGnu'
make[2]: *** [all] Error 2
make[2]: Leaving directory
`/c/stable-environment/src/libecwj2-3.3/Source/NCSBuildGnu'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/c/stable-environment/src/libecwj2-3.3/Source'
make: *** [all-recursive] Error 1

Thanks in advance!



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Build-libecwj2-3-3-with-GCC-4-9-tp5219716.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Thu Aug 13 13:29:31 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 13 Aug 2015 22:29:31 +0200
Subject: [gdal-dev] 2.0.1 (and 1.11.3) release schedule ?
Message-ID: <201508132229.31148.even.rouault@spatialys.com>

Hi,

I was wondering if we couldn't prepare RCs of 2.0.1 and 1.11.3 for the week of 
September 14th. That would be 3 months after 2.0.0 release. There are ~ 30 
tickets closed in both branches. Nothing dramatically critical I can think of, 
but going beyond the .0.0 of 2.0.0 will probably make it more psychologically 
attractive for wider adoption.

Does that sound OK ?
Anybody interested in tackling that ? Otherwise I guess I have some idea for a 
volunteer...

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ivanc.vidal at gmail.com  Fri Aug 14 08:17:34 2015
From: ivanc.vidal at gmail.com (Ivan Castellucci Vidal)
Date: Fri, 14 Aug 2015 12:17:34 -0300
Subject: [gdal-dev] Georeference without rotation of output image
Message-ID: <CAKCMXx3Zz=2NEEMnk5StYt2mBb_+ZZjsWMvWYO_Y+nB1mKKiug@mail.gmail.com>

Hi, list

First of all, I searched on the list but I hadn't found anyone with the
same issue as me.

I'm working with aerial images of fields that I use as input to my program
which needs to process the images and find some visual patterns and then
give some output for the users.

I use georeferenced images because I need to extract geographic data after
my program process the image. So, when I warp my image with gdalwarp it
rotates the image and as a consequence of northing up the image, it rotates
the raster and adds 4 black triangles to make it rectangular.

The problem is, when I run my program, this "borders" are messing with my
algorithm and are a source of inaccuracy on the image processing. I can get
rid of them with more image processing but any extra step is
computationally heavy, specially when using large images.

I would need to avoid the rotation of the raster after gdalwarp is used to
implant the geotransformation on the destination image. I don't really care
if the image is not north up after warping it so I may not need gdalwarp
and instead I may be able to use some other solution based on the C API if
needed.

If it's relevant, the source images are in JPEG format and the destination
are in GeoTiff format, the transformation is done by using 3 (sometimes
more) GCPs and I'm using EPSG:4326 projection.

I didn't explained details of the pattern recognition process because I
think it's irrelevant to my problem and it will be confusing but if you
need any, just let me know.


Any help is appreciated,

Thanks in advance
-- 
Iv?n Castellucci Vidal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150814/73464a62/attachment.html>

From aperi2007 at gmail.com  Fri Aug 14 08:43:12 2015
From: aperi2007 at gmail.com (Andrea Peri)
Date: Fri, 14 Aug 2015 17:43:12 +0200
Subject: [gdal-dev] Retrieving the bounding box of a shapefile using python
	API
Message-ID: <CABqTJk9KoBaH3rKRXfMvAKxbcThn5QhKmDx7fjkQE7aJ+Thi5g@mail.gmail.com>

Hi,

I'm try to use the ogr python api to retrieve some information from a shapefile.
I see this documentation, http://gdal.org/python/
But I find nothing to retrieve directly the Bounding box of an entire shapefile.

Is this possible or is need to calculate it feature by feature ?

Thx,

-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From even.rouault at spatialys.com  Fri Aug 14 09:11:47 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 14 Aug 2015 18:11:47 +0200
Subject: [gdal-dev] Retrieving the bounding box of a shapefile using
	python API
In-Reply-To: <CABqTJk9KoBaH3rKRXfMvAKxbcThn5QhKmDx7fjkQE7aJ+Thi5g@mail.gmail.com>
References: <CABqTJk9KoBaH3rKRXfMvAKxbcThn5QhKmDx7fjkQE7aJ+Thi5g@mail.gmail.com>
Message-ID: <201508141811.47708.even.rouault@spatialys.com>

Le vendredi 14 ao?t 2015 17:43:12, Andrea Peri a ?crit :
> Hi,
> 
> I'm try to use the ogr python api to retrieve some information from a
> shapefile. I see this documentation, http://gdal.org/python/
> But I find nothing to retrieve directly the Bounding box of an entire
> shapefile.
> 
> Is this possible

Yes, see the python snippet at 
http://download.osgeo.org/gdal/workshop/foss4ge2015/workshop_gdal.html#__RefHeading__6005_1333016408


> or is need to calculate it feature by feature ?
> 
> Thx,

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Aug 14 09:19:37 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 14 Aug 2015 18:19:37 +0200
Subject: [gdal-dev] Georeference without rotation of output image
In-Reply-To: <CAKCMXx3Zz=2NEEMnk5StYt2mBb_+ZZjsWMvWYO_Y+nB1mKKiug@mail.gmail.com>
References: <CAKCMXx3Zz=2NEEMnk5StYt2mBb_+ZZjsWMvWYO_Y+nB1mKKiug@mail.gmail.com>
Message-ID: <201508141819.37404.even.rouault@spatialys.com>

Le vendredi 14 ao?t 2015 17:17:34, Ivan Castellucci Vidal a ?crit :
> Hi, list
> 
> First of all, I searched on the list but I hadn't found anyone with the
> same issue as me.
> 
> I'm working with aerial images of fields that I use as input to my program
> which needs to process the images and find some visual patterns and then
> give some output for the users.
> 
> I use georeferenced images because I need to extract geographic data after
> my program process the image. So, when I warp my image with gdalwarp it
> rotates the image and as a consequence of northing up the image, it rotates
> the raster and adds 4 black triangles to make it rectangular.
> 
> The problem is, when I run my program, this "borders" are messing with my
> algorithm and are a source of inaccuracy on the image processing. I can get
> rid of them with more image processing but any extra step is
> computationally heavy, specially when using large images.

During the warping, you could add an alpha channel or set a destination nodata 
value so as to be able to identify the generated transparent areas

> 
> I would need to avoid the rotation of the raster after gdalwarp is used to
> implant the geotransformation on the destination image. I don't really care
> if the image is not north up after warping it so I may not need gdalwarp
> and instead I may be able to use some other solution based on the C API if
> needed.
> 
> If it's relevant, the source images are in JPEG format and the destination
> are in GeoTiff format, the transformation is done by using 3 (sometimes
> more) GCPs and I'm using EPSG:4326 projection.

Instead of warping the image, you could compute a geotransformation matrix 
that would include rotational terms with GDALGCPsToGeoTransform()

http://www.gdal.org/gdal_8h.html#ae44b32f08d61072dddbdd30ac8ca962b

and set it to your geotiff with GDALSetGCPs()

http://www.gdal.org/gdal_8h.html#acd47aa85ca5751fbe9ea09c1a2341ef8

> 
> I didn't explained details of the pattern recognition process because I
> think it's irrelevant to my problem and it will be confusing but if you
> need any, just let me know.
> 
> 
> Any help is appreciated,
> 
> Thanks in advance

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Aug 14 09:22:55 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 14 Aug 2015 18:22:55 +0200
Subject: [gdal-dev] Georeference without rotation of output image
In-Reply-To: <201508141819.37404.even.rouault@spatialys.com>
References: <CAKCMXx3Zz=2NEEMnk5StYt2mBb_+ZZjsWMvWYO_Y+nB1mKKiug@mail.gmail.com>
	<201508141819.37404.even.rouault@spatialys.com>
Message-ID: <201508141822.55483.even.rouault@spatialys.com>


> Instead of warping the image, you could compute a geotransformation matrix
> that would include rotational terms with GDALGCPsToGeoTransform()
> 
> http://www.gdal.org/gdal_8h.html#ae44b32f08d61072dddbdd30ac8ca962b
> 
> and set it to your geotiff with GDALSetGCPs()
> 
> http://www.gdal.org/gdal_8h.html#acd47aa85ca5751fbe9ea09c1a2341ef8
> 

Arg, sorry I meant with GDALSetGeoTransform() of course :
http://www.gdal.org/gdal_8h.html#ae93448112c1a7e69f2764c1aa3c6c8b5()

GDALSetGCPs() is to set the "raw" GCPs.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ivanc.vidal at gmail.com  Fri Aug 14 10:15:44 2015
From: ivanc.vidal at gmail.com (Ivan Castellucci Vidal)
Date: Fri, 14 Aug 2015 14:15:44 -0300
Subject: [gdal-dev] Georeference without rotation of output image
In-Reply-To: <201508141822.55483.even.rouault@spatialys.com>
References: <CAKCMXx3Zz=2NEEMnk5StYt2mBb_+ZZjsWMvWYO_Y+nB1mKKiug@mail.gmail.com>
	<201508141819.37404.even.rouault@spatialys.com>
	<201508141822.55483.even.rouault@spatialys.com>
Message-ID: <CAKCMXx0ZCYcwEZGifmJf86B94Cg=JMcWRHGFZV0McxM3ThvCRw@mail.gmail.com>

Thanks Even!

That's exactly what I was looking for and I just have one question about it.
GDAL documentation states: "Due to imprecision in the calculations the fit
algorithm will often return non-zero rotational coefficients even if given
perfectly non-rotated inputs"

Is there a way to use a more precise algorithm? It's not a requirement by
now since this program is in development but at some point I'll need to
count with the maximum possible precision to make it work in a production
release.


On Fri, Aug 14, 2015 at 1:22 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

>
> > Instead of warping the image, you could compute a geotransformation
> matrix
> > that would include rotational terms with GDALGCPsToGeoTransform()
> >
> > http://www.gdal.org/gdal_8h.html#ae44b32f08d61072dddbdd30ac8ca962b
> >
> > and set it to your geotiff with GDALSetGCPs()
> >
> > http://www.gdal.org/gdal_8h.html#acd47aa85ca5751fbe9ea09c1a2341ef8
> >
>
> Arg, sorry I meant with GDALSetGeoTransform() of course :
> http://www.gdal.org/gdal_8h.html#ae93448112c1a7e69f2764c1aa3c6c8b5()
>
> GDALSetGCPs() is to set the "raw" GCPs.
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Iv?n Castellucci Vidal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150814/12aa563c/attachment-0001.html>

From even.rouault at spatialys.com  Fri Aug 14 10:23:26 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 14 Aug 2015 19:23:26 +0200
Subject: [gdal-dev] Georeference without rotation of output image
In-Reply-To: <CAKCMXx0ZCYcwEZGifmJf86B94Cg=JMcWRHGFZV0McxM3ThvCRw@mail.gmail.com>
References: <CAKCMXx3Zz=2NEEMnk5StYt2mBb_+ZZjsWMvWYO_Y+nB1mKKiug@mail.gmail.com>
	<201508141822.55483.even.rouault@spatialys.com>
	<CAKCMXx0ZCYcwEZGifmJf86B94Cg=JMcWRHGFZV0McxM3ThvCRw@mail.gmail.com>
Message-ID: <201508141923.26993.even.rouault@spatialys.com>

Le vendredi 14 ao?t 2015 19:15:44, Ivan Castellucci Vidal a ?crit :
> Thanks Even!
> 
> That's exactly what I was looking for and I just have one question about
> it. GDAL documentation states: "Due to imprecision in the calculations the
> fit algorithm will often return non-zero rotational coefficients even if
> given perfectly non-rotated inputs"
> 
> Is there a way to use a more precise algorithm?

The algorithm is mostly a least square regression. There are also a few 
heuristics to force the rotational coefficients to 0 in a few situations, like 
when there are 4 GCPs that form a rectangle. But since you mentionned that 
your images would have rotation, that shouldn't be much of a concern I think.
Anyway in cases where the theory should be perfect 0, the values got in 
practice should be sufficiently close to zero for most practical purposes.


> It's not a requirement by
> now since this program is in development but at some point I'll need to
> count with the maximum possible precision to make it work in a production
> release.
> 
> 
> On Fri, Aug 14, 2015 at 1:22 PM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > > Instead of warping the image, you could compute a geotransformation
> > 
> > matrix
> > 
> > > that would include rotational terms with GDALGCPsToGeoTransform()
> > > 
> > > http://www.gdal.org/gdal_8h.html#ae44b32f08d61072dddbdd30ac8ca962b
> > > 
> > > and set it to your geotiff with GDALSetGCPs()
> > > 
> > > http://www.gdal.org/gdal_8h.html#acd47aa85ca5751fbe9ea09c1a2341ef8
> > 
> > Arg, sorry I meant with GDALSetGeoTransform() of course :
> > http://www.gdal.org/gdal_8h.html#ae93448112c1a7e69f2764c1aa3c6c8b5()
> > 
> > GDALSetGCPs() is to set the "raw" GCPs.
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ivanc.vidal at gmail.com  Fri Aug 14 10:29:53 2015
From: ivanc.vidal at gmail.com (Ivan Castellucci Vidal)
Date: Fri, 14 Aug 2015 14:29:53 -0300
Subject: [gdal-dev] Georeference without rotation of output image
In-Reply-To: <201508141923.26993.even.rouault@spatialys.com>
References: <CAKCMXx3Zz=2NEEMnk5StYt2mBb_+ZZjsWMvWYO_Y+nB1mKKiug@mail.gmail.com>
	<201508141822.55483.even.rouault@spatialys.com>
	<CAKCMXx0ZCYcwEZGifmJf86B94Cg=JMcWRHGFZV0McxM3ThvCRw@mail.gmail.com>
	<201508141923.26993.even.rouault@spatialys.com>
Message-ID: <CAKCMXx1kZ6y6hypMRjW851jasdim1kYJr9qESnpWcox6XcQfVA@mail.gmail.com>

On Fri, Aug 14, 2015 at 2:23 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le vendredi 14 ao?t 2015 19:15:44, Ivan Castellucci Vidal a ?crit :
> > Thanks Even!
> >
> > That's exactly what I was looking for and I just have one question about
> > it. GDAL documentation states: "Due to imprecision in the calculations
> the
> > fit algorithm will often return non-zero rotational coefficients even if
> > given perfectly non-rotated inputs"
> >
> > Is there a way to use a more precise algorithm?
>
> The algorithm is mostly a least square regression. There are also a few
> heuristics to force the rotational coefficients to 0 in a few situations,
> like
> when there are 4 GCPs that form a rectangle. But since you mentionned that
> your images would have rotation, that shouldn't be much of a concern I
> think.
> Anyway in cases where the theory should be perfect 0, the values got in
> practice should be sufficiently close to zero for most practical purposes.
>
>
Thanks for your help, Even

Your help was really valuable


>
> > It's not a requirement by
> > now since this program is in development but at some point I'll need to
> > count with the maximum possible precision to make it work in a production
> > release.
> >
> >
> > On Fri, Aug 14, 2015 at 1:22 PM, Even Rouault <
> even.rouault at spatialys.com>
> >
> > wrote:
> > > > Instead of warping the image, you could compute a geotransformation
> > >
> > > matrix
> > >
> > > > that would include rotational terms with GDALGCPsToGeoTransform()
> > > >
> > > > http://www.gdal.org/gdal_8h.html#ae44b32f08d61072dddbdd30ac8ca962b
> > > >
> > > > and set it to your geotiff with GDALSetGCPs()
> > > >
> > > > http://www.gdal.org/gdal_8h.html#acd47aa85ca5751fbe9ea09c1a2341ef8
> > >
> > > Arg, sorry I meant with GDALSetGeoTransform() of course :
> > > http://www.gdal.org/gdal_8h.html#ae93448112c1a7e69f2764c1aa3c6c8b5()
> > >
> > > GDALSetGCPs() is to set the "raw" GCPs.
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
Iv?n Castellucci Vidal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150814/9131d0ca/attachment.html>

From aperi2007 at gmail.com  Fri Aug 14 14:50:59 2015
From: aperi2007 at gmail.com (Andrea Peri)
Date: Fri, 14 Aug 2015 23:50:59 +0200
Subject: [gdal-dev] Retrieving the bounding box of a shapefile using
 python API
In-Reply-To: <201508141811.47708.even.rouault@spatialys.com>
References: <CABqTJk9KoBaH3rKRXfMvAKxbcThn5QhKmDx7fjkQE7aJ+Thi5g@mail.gmail.com>
	<201508141811.47708.even.rouault@spatialys.com>
Message-ID: <CABqTJk8RduZmrML6UJ=2hVStUnruD4bqGbk5FanV-oRzEaY-=Q@mail.gmail.com>

Hi Even,

thx for link.
It is exactly what I need.

A.


2015-08-14 18:11 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:
> Le vendredi 14 ao?t 2015 17:43:12, Andrea Peri a ?crit :
>> Hi,
>>
>> I'm try to use the ogr python api to retrieve some information from a
>> shapefile. I see this documentation, http://gdal.org/python/
>> But I find nothing to retrieve directly the Bounding box of an entire
>> shapefile.
>>
>> Is this possible
>
> Yes, see the python snippet at
> http://download.osgeo.org/gdal/workshop/foss4ge2015/workshop_gdal.html#__RefHeading__6005_1333016408
>
>
>> or is need to calculate it feature by feature ?
>>
>> Thx,
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com



-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From 24dakenlo at gmail.com  Sat Aug 15 02:15:33 2015
From: 24dakenlo at gmail.com (NASAHARA Kenlo)
Date: Sat, 15 Aug 2015 18:15:33 +0900
Subject: [gdal-dev] Making a thumbnail truecolor jpeg from a 4-band GeoTiff
Message-ID: <20150815181533.2c93f4d152c11df4ea729976@gmail.com>

Hi, GDAL people,

I am trying to make a thumbnail from a GeoTIFF image 
using gdaladdo and am confronting a problem.
My GeoTIFF file is ALOS AVNIR2 file (4 bands).

After browsing the mannual (http://www.gdal.org/gdaladdo.html), 
I tried the following command:
$ gdaladdo -ro --config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW YCBCR --config INTERLEAVE_OVERVIEW PIXEL ALAV2A273212850-OORIRFU.RCRefG.GEO.tif 16

then I got the following errors:
ERROR 6: PHOTOMETRIC_OVERVIEW=YCBCR requires a source raster with only 3 bands (RGB)
Overview building failed.

All I want to do is create a small true-color jpeg image (RGB=321)
from the 4 band satellite image in GeoTIFF format. I appreciate
your suggestions.

-- 
Kenlo Nishida Nasahara
Faculty of Life and Environmental Sciences
University of Tsukuba, Japan 305-8572
24dakenlo at gmail.com

From even.rouault at spatialys.com  Sat Aug 15 02:27:28 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 15 Aug 2015 11:27:28 +0200
Subject: [gdal-dev] Making a thumbnail truecolor jpeg from a 4-band
	GeoTiff
In-Reply-To: <20150815181533.2c93f4d152c11df4ea729976@gmail.com>
References: <20150815181533.2c93f4d152c11df4ea729976@gmail.com>
Message-ID: <201508151127.28542.even.rouault@spatialys.com>

Le samedi 15 ao?t 2015 11:15:33, NASAHARA Kenlo a ?crit :
> Hi, GDAL people,
> 
> I am trying to make a thumbnail from a GeoTIFF image
> using gdaladdo and am confronting a problem.
> My GeoTIFF file is ALOS AVNIR2 file (4 bands).
> 
> After browsing the mannual (http://www.gdal.org/gdaladdo.html),
> I tried the following command:
> $ gdaladdo -ro --config COMPRESS_OVERVIEW JPEG --config
> PHOTOMETRIC_OVERVIEW YCBCR --config INTERLEAVE_OVERVIEW PIXEL
> ALAV2A273212850-OORIRFU.RCRefG.GEO.tif 16
> 
> then I got the following errors:
> ERROR 6: PHOTOMETRIC_OVERVIEW=YCBCR requires a source raster with only 3
> bands (RGB) Overview building failed.
> 
> All I want to do is create a small true-color jpeg image (RGB=321)
> from the 4 band satellite image in GeoTIFF format. I appreciate
> your suggestions.

Kenlo,

Try instead:
gdal_translate -of JPEG -b 3 -b 2 -b 1 in.tif out.jpg -outsize 6.25% 6.25% 

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From johan at vandewauw.be  Sun Aug 16 14:14:17 2015
From: johan at vandewauw.be (Johan Van de Wauw)
Date: Sun, 16 Aug 2015 23:14:17 +0200
Subject: [gdal-dev] GDALDatasetRasterIO - different results between i386 and
	amd64
Message-ID: <55D0FD29.50609@vandewauw.be>

Hello,

While investigating why one of the unit tests of rasterio fails on i386
[1], I think that the actual cause is a different result from gdal when
using GDALDatasetRasterIO.

When opening the test file [2] I get different results when using i386.
I could reproduce this behaviour when using only C code (attached).
i386:
0 8 5 7 0 0 0 0
0 6 61 15 27 15 24 128
0 20 152 23 15 19 28 0
0 18 255 21 129 24 32 0
9 7 14 16 19 18 36 0
6 27 43 207 38 31 73 0
0 0 0 0 74 23 0 0

AMD64 and other architectures:
0 8 5 7 0 0 0 0
0 6 61 15 27 15 24 128
0 20 152 23 15 19 28 0
**0 17 255 25 255 22 32 0 **
9 7 14 16 19 18 36 0
6 27 43 207 38 31 73 0
0 0 0 0 74 23 0 0


Note that the difference only occurs on i386: on other debian
architectures[3,] (including 32 bit like mips, arm) the same result was
found.

Kind Regards,
Johan

[1] https://github.com/mapbox/rasterio/issues/229
[2] https://github.com/mapbox/rasterio/blob/master/tests/data/RGB.byte.tif
[3] https://buildd.debian.org/status/package.php?p=rasterio&suite=unstable
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdal-i386.c
Type: text/x-csrc
Size: 736 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150816/64f6d1b7/attachment.c>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 819 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150816/64f6d1b7/attachment.pgp>

From even.rouault at spatialys.com  Sun Aug 16 15:11:45 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 17 Aug 2015 00:11:45 +0200
Subject: [gdal-dev] GDALDatasetRasterIO - different results between i386
	and amd64
In-Reply-To: <55D0FD29.50609@vandewauw.be>
References: <55D0FD29.50609@vandewauw.be>
Message-ID: <55397408.gZbgxd6yie@even-n550jk>

On Sunday 16 August 2015 23:14:17 Johan Van de Wauw wrote:
> Hello,
> 
> While investigating why one of the unit tests of rasterio fails on i386
> [1], I think that the actual cause is a different result from gdal when
> using GDALDatasetRasterIO.
> 
> When opening the test file [2] I get different results when using i386.
> I could reproduce this behaviour when using only C code (attached).
> i386:
> 0 8 5 7 0 0 0 0
> 0 6 61 15 27 15 24 128
> 0 20 152 23 15 19 28 0
> 0 18 255 21 129 24 32 0
> 9 7 14 16 19 18 36 0
> 6 27 43 207 38 31 73 0
> 0 0 0 0 74 23 0 0
> 
> AMD64 and other architectures:
> 0 8 5 7 0 0 0 0
> 0 6 61 15 27 15 24 128
> 0 20 152 23 15 19 28 0
> **0 17 255 25 255 22 32 0 **
> 9 7 14 16 19 18 36 0
> 6 27 43 207 38 31 73 0
> 0 0 0 0 74 23 0 0
> 
> 
> Note that the difference only occurs on i386: on other debian
> architectures[3,] (including 32 bit like mips, arm) the same result was
> found.

Johan,

I can also reproduce. However when using -g, or -fpmath=sse -msse2 (to avoid 
i387 fpu), I get the same result as AMD64.

When adding the following debug traces:

Index: gcore/rasterio.cpp
===================================================================
--- gcore/rasterio.cpp	(r?vision 29662)
+++ gcore/rasterio.cpp	(copie de travail)
@@ -595,6 +595,7 @@
             dfSrcY = (iBufYOff+0.5) * dfSrcYInc + dfYOff;
             dfSrcX = 0.5 * dfSrcXInc + dfXOff;
             iSrcY = (int) dfSrcY;
+            printf("%d %d %.18g %.18g\n", iBufYOff, iSrcY, dfSrcY, dfSrcY - 
359);
 
             iBufOffset = (GPtrDiff_t)iBufYOff * (GPtrDiff_t)nLineSpace;


I get in the AMD64 case:
0 51 51.2857142857142847 -307.714285714285722
1 153 153.857142857142861 -205.142857142857139
2 256 256.428571428571445 -102.571428571428584
3 358 359 -7.10542735760100186e-15
4 461 461.571428571428555 102.571428571428555
5 564 564.14285714285711 205.142857142857139
6 666 666.714285714285666 307.714285714285722

and in the default i386 case:
0 51 51.2857142857142847 -307.714285714285722
1 153 153.857142857142861 -205.142857142857139
2 256 256.428571428571445 -102.571428571428555
3 359 359 0
4 461 461.571428571428555 102.571428571428555
5 564 564.14285714285711 205.14285714285711
6 666 666.714285714285666 307.714285714285666


Note the difference of rounding of 359 to 358 vs 359 . This must be due to i387 
computations done on 80 bits being more precise and actually correctly 
rounding, whereas AMD64 computations are done on 64 bits.

I've tried the following code (test_round_error.c) that tries to replicate the 
computation

#include <stdlib.h>
#include <stdio.h>

int main(int argc, char* argv[])
{
    int nSrcYSize = atoi(argv[1]);
    int nBufYSize = atoi(argv[2]);
    double dfYOff = atof(argv[3]);
    int nSrcYOff = atoi(argv[4]);
    double dfSrcYSize = nSrcYSize;
    double dfSrcYInc = dfSrcYSize / (double)nBufYSize;
    double d = (nSrcYOff + 0.5) * dfSrcYInc + dfYOff;
    printf("%d\n", (int)d);
    return 0;
}

and "./test_rounding_error 718 7 0.0 3" always prints 359 on AMD64 or i386, in 
-O2 or in -O0, so there's some mystery involved...

I'm not sure what could be done. Adding a small ellipson in the truncation 
might help for that case, but it could potentially move the issue to other 
cases.

Changing very slightly the test case should hopefully hide that annoyance.

Even

> 
> Kind Regards,
> Johan
> 
> [1] https://github.com/mapbox/rasterio/issues/229
> [2] https://github.com/mapbox/rasterio/blob/master/tests/data/RGB.byte.tif
> [3] https://buildd.debian.org/status/package.php?p=rasterio&suite=unstable

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From schut at sarvision.nl  Tue Aug 18 03:00:46 2015
From: schut at sarvision.nl (Vincent Schut)
Date: Tue, 18 Aug 2015 12:00:46 +0200
Subject: [gdal-dev] build error
Message-ID: <55D3024E.4020309@sarvision.nl>

Hi,

this morning I wanted to refresh my gdal build, so I did an svn update (and later a fresh svn checkout to be sure), but I get an error when make wants to build gdalserver:

make[1]: Entering directory '/usr/local/src/gdal/apps'
/bin/sh /usr/local/src/gdal/libtool --mode=link	g++ -lsz -ljpeg gdalinfo.lo commonutils.lo  /usr/local/src/gdal/libgdal.la -o gdalinfo
libtool: link: g++ .libs/gdalinfo.o .libs/commonutils.o -o .libs/gdalinfo  /usr/local/src/gdal/.libs/libgdal.so -L/usr/lib -L/usr/local/lib /usr/lib/libsz.so -lm -ljson-c -lfreexl -lgeos_c -lsqlite3 /usr/local/lib/libkmldom.so /usr/local/lib/libkmlengine.so /usr/local/lib/libkmlbase.so /usr/local/lib/libminizip.so /usr/local/lib/libkmlconvenience.so -lminizip /usr/local/lib/liburiparser.so -lexpat -lxerces-c -lopenjp2 -ljasper -lnetcdf -lmfhdf -ldf -ljpeg -lpng -lcfitsio -lpq -lpthread -lrt -lpcre -lcurl -lxml2 -lz -ldl -lkea -lhdf5 -lhdf5_hl -lhdf5_cpp
/bin/sh /usr/local/src/gdal/libtool --mode=compile --tag=CC gcc -I/usr/local/src/gdal/port -I/usr/local/src/gdal/gcore -I/usr/local/src/gdal/alg -I/usr/local/src/gdal/ogr -I/usr/local/src/gdal/ogr/ogrsf_frmts -I/usr/local/src/gdal/gnm -g -O2 -fvisibility=hidden  -Wall -Wdeclaration-after-statement -Wunused-parameter  -I/usr/local/src/gdal/frmts/vrt -DOGR_ENABLED -I/usr/local/src/gdal/port -I/usr/local/include -I/usr/include  -DGDAL_COMPILATION -I/usr/include/json-c -I/usr/local/src/gdal/ogr/ogrsf_frmts/geojson -DHAVE_GEOS=1 -I/usr/include -c -o gdalserver.lo gdalserver.c
libtool: compile:  gcc -I/usr/local/src/gdal/port -I/usr/local/src/gdal/gcore -I/usr/local/src/gdal/alg -I/usr/local/src/gdal/ogr -I/usr/local/src/gdal/ogr/ogrsf_frmts -I/usr/local/src/gdal/gnm -g -O2 -fvisibility=hidden -Wall -Wdeclaration-after-statement -Wunused-parameter -I/usr/local/src/gdal/frmts/vrt -DOGR_ENABLED -I/usr/local/src/gdal/port -I/usr/local/include -I/usr/include -DGDAL_COMPILATION -I/usr/include/json-c -I/usr/local/src/gdal/ogr/ogrsf_frmts/geojson -DHAVE_GEOS=1 -I/usr/include -c gdalserver.c  -fPIC -DPIC -o .libs/gdalserver.o
gdalserver.c: In function ?CreateSocketAndBindAndListen?:
gdalserver.c:137:21: error: storage size of ?sHints? isn?t known
      struct addrinfo sHints;
                      ^
gdalserver.c:139:31: error: invalid application of ?sizeof? to incomplete type ?struct addrinfo?
      memset(&sHints, 0, sizeof(struct addrinfo));
                                ^
gdalserver.c:142:23: error: ?AI_PASSIVE? undeclared (first use in this function)
      sHints.ai_flags = AI_PASSIVE;
                        ^
gdalserver.c:142:23: note: each undeclared identifier is reported only once for each function it appears in
gdalserver.c:145:12: warning: implicit declaration of function ?getaddrinfo? [-Wimplicit-function-declaration]
      nRet = getaddrinfo(NULL, pszService, &sHints, &psResults);
             ^
gdalserver.c:148:48: warning: implicit declaration of function ?gai_strerror? [-Wimplicit-function-declaration]
          fprintf(stderr, "getaddrinfo(): %s\n", gai_strerror(nRet));
                                                 ^
gdalserver.c:148:25: warning: format ?%s? expects argument of type ?char *?, but argument 3 has type ?int? [-Wformat=]
          fprintf(stderr, "getaddrinfo(): %s\n", gai_strerror(nRet));
                          ^
gdalserver.c:154:39: error: dereferencing pointer to incomplete type ?struct addrinfo?
           psResultsIter = psResultsIter->ai_next)
                                        ^
gdalserver.c:175:5: warning: implicit declaration of function ?freeaddrinfo? [-Wimplicit-function-declaration]
      freeaddrinfo(psResults);
      ^
gdalserver.c:137:21: warning: unused variable ?sHints? [-Wunused-variable]
      struct addrinfo sHints;
                      ^
../GDALmake.opt:597: recipe for target 'gdalserver.lo' failed
make[1]: *** [gdalserver.lo] Error 1
make[1]: Leaving directory '/usr/local/src/gdal/apps'
GNUmakefile:78: recipe for target 'apps-target' failed
make: *** [apps-target] Error 2


info:
arch linux, up-to-date (updated today)
gcc 5.2.0
gdal svn trunk


Any ideas?

Thanks in advance,
Vincent.

From Alexander.Jacob at eurac.edu  Tue Aug 18 07:19:15 2015
From: Alexander.Jacob at eurac.edu (Jacob Alexander)
Date: Tue, 18 Aug 2015 14:19:15 +0000
Subject: [gdal-dev] Trouble reading some MODIS rasterbands in
 HDF4_EOS:EOS_GRID format using gdal 2.0.0 on linux 64bit
Message-ID: <1391DD31F652F74089464DD17C0EA7494AAC80@SDCEMB02.unibz.it>

Hi there,

I have some trouble reading from some particular MODIS files giving me the following error message:

ERROR 1: GDreadfield() failed for block.
ERROR 1: HDF4_EOS:EOS_GRID:"/mnt/MODIS/MOD10/2014/MOD10A1.A2014139.h18v04.005.2014141065636.hdf":MOD_Grid_Snow_500m:Snow_Cover_Daily_Tile, band 1: IReadBlock failed at X offset 0, Y offset 0
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0

The reading in my case only fails for MOD10 products, MOD09 products work fine.
This error occurs both when using gdal distributed tools like gdal_translate or when writing my own code reading a rasterband via the RasterIO method.
The general dataset access works fine, for extracting metadata and retrieving geocoding etc.

I found that a similar issue was reported back in 2009 but I couldn't find any solution that works for me.
I have, as suggested in the old threads, compiled GDAL from scratch including many of the external libraries.
I have used the following libraries and compiled all of them on my CENTOS 7 64bit installation using configure and gmake:

szip-2.1.tar.gz
zlib-1.2.8.tar.gz
tiff-4.0.4.tar.gz
jpegsrc.v9a.tar.gz
proj.4-master.zip
hdf4.2.11.tar.gz
hdf5-1.8.15-patch1.tar.gz
netcdf-c-4.3.3.1.tar.gz
gdal-2.0.0.tar.gz

szip        -> ./configure --prefix=/usr/local
zlib         -> ./configure
tiff          -> ./configure
jpeg       -> ./configure
proj4     -> ./configure
hdf4       -> ./configure --prefix=/usr/local --with-szlib=/usr/local/lib--with-jpeg=/usr/local/lib --enable-shared=yes --disable-fortran --disable-netcdf
hdf5       -> ./configure --prefix=/usr/local
netcdf   -> ./configure
gdal        -> ./configure

For each library in the order presented here I then executed gmake install. This finished without error messages. When looking in the summary of the gdal build I can see that all libraries are found correctly.

I ran a test on my windows x64 machine, where I also have compiled gdal2.0.0 x64 . There I can read the raster band without problem when running e.g.:
gdal_translate -of GTiFF HDF4_EOS:EOS_GRID:"M:\MOD10\2014\MOD10A1.A2014001.h18v04.005.2014003062628.hdf":MOD_Grid_Snow_500m:Snow_Cover_Daily_Tile output=test.tif
The same command however fails on my linux machine.

Any help in this matter would be greatly appreciated.

Thanks and kind regards,

Alex
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150818/e818bdff/attachment.html>

From even.rouault at spatialys.com  Tue Aug 18 10:30:37 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 18 Aug 2015 19:30:37 +0200
Subject: [gdal-dev] build error
In-Reply-To: <55D3024E.4020309@sarvision.nl>
References: <55D3024E.4020309@sarvision.nl>
Message-ID: <1901693.QocWx1B4eh@even-n550jk>

On Tuesday 18 August 2015 12:00:46 Vincent Schut wrote:
> Hi,
> 
> this morning I wanted to refresh my gdal build, so I did an svn update (and
> later a fresh svn checkout to be sure), but I get an error when make wants
> to build gdalserver:

This might be related to the following that is perhaps too restrictive

#if defined(__STDC_VERSION__)
#define _XOPEN_SOURCE
#endif

Could you try remonving the #if defined / #endif, so that #define _XOPEN_SOURCE 
is defined ?

Perhaps you need #define _XOPEN_SOURCE 500

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sault.don at gmail.com  Tue Aug 18 11:47:07 2015
From: sault.don at gmail.com (Donovan Cameron)
Date: Tue, 18 Aug 2015 11:47:07 -0700
Subject: [gdal-dev] build error
In-Reply-To: <1901693.QocWx1B4eh@even-n550jk>
References: <55D3024E.4020309@sarvision.nl> <1901693.QocWx1B4eh@even-n550jk>
Message-ID: <55D37DAB.1060302@gmail.com>

I made those changes but same error.

Tried once with,

#define _XOPEN_SOURCE

And a second time with,

#define _XOPEN_SOURCE 500



Donovan

On 18/08/15 10:30 AM, Even Rouault wrote:
> On Tuesday 18 August 2015 12:00:46 Vincent Schut wrote:
>> Hi,
>>
>> this morning I wanted to refresh my gdal build, so I did an svn update (and
>> later a fresh svn checkout to be sure), but I get an error when make wants
>> to build gdalserver:
> This might be related to the following that is perhaps too restrictive
>
> #if defined(__STDC_VERSION__)
> #define _XOPEN_SOURCE
> #endif
>
> Could you try remonving the #if defined / #endif, so that #define _XOPEN_SOURCE
> is defined ?
>
> Perhaps you need #define _XOPEN_SOURCE 500
>
> Even
>

-- 
Kind regards,

Donovan


From even.rouault at spatialys.com  Tue Aug 18 14:06:22 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 18 Aug 2015 23:06:22 +0200
Subject: [gdal-dev] build error
In-Reply-To: <55D37DAB.1060302@gmail.com>
References: <55D3024E.4020309@sarvision.nl> <1901693.QocWx1B4eh@even-n550jk>
	<55D37DAB.1060302@gmail.com>
Message-ID: <1447294.PaoVBlT4u8@even-n550jk>

On Tuesday 18 August 2015 11:47:07 Donovan Cameron wrote:
> I made those changes but same error.
> 
> Tried once with,
> 
> #define _XOPEN_SOURCE
> 
> And a second time with,
> 
> #define _XOPEN_SOURCE 500

What is your config: OS + gcc ?

I can't reproduce with Ubuntu 14.04 with gcc 4.8

Could you intercept the gcc command line of gdalserver.c and replace the -c -o 
gdalserver.o by -E to have the preprocessor output ?

Providing the /usr/include/netdb.h of your system might also give some clue, 
since it is in this file that getaddrinfo is defined.

> 
> 
> 
> Donovan
> 
> On 18/08/15 10:30 AM, Even Rouault wrote:
> > On Tuesday 18 August 2015 12:00:46 Vincent Schut wrote:
> >> Hi,
> >> 
> >> this morning I wanted to refresh my gdal build, so I did an svn update
> >> (and
> >> later a fresh svn checkout to be sure), but I get an error when make
> >> wants
> > 
> >> to build gdalserver:
> > This might be related to the following that is perhaps too restrictive
> > 
> > #if defined(__STDC_VERSION__)
> > #define _XOPEN_SOURCE
> > #endif
> > 
> > Could you try remonving the #if defined / #endif, so that #define
> > _XOPEN_SOURCE is defined ?
> > 
> > Perhaps you need #define _XOPEN_SOURCE 500
> > 
> > Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sault.don at gmail.com  Tue Aug 18 14:51:36 2015
From: sault.don at gmail.com (Donovan Cameron)
Date: Tue, 18 Aug 2015 14:51:36 -0700
Subject: [gdal-dev] build error
In-Reply-To: <1447294.PaoVBlT4u8@even-n550jk>
References: <55D3024E.4020309@sarvision.nl> <1901693.QocWx1B4eh@even-n550jk>
	<55D37DAB.1060302@gmail.com> <1447294.PaoVBlT4u8@even-n550jk>
Message-ID: <55D3A8E8.7030907@gmail.com>

I updated the ticket [1] too.

OS: Arch Linux 64-bit (Kernel 4.1.5), GCC 5.2.0

I put a paste of the netdb.h file up [2].

I'm not sure how to change those flags for gcc to -E, sorry, never done 
that before.

On Arch Linux, I checked the contents of /etc/makepkg.conf where a lot 
of compiler defaults are and didn't notice where I could place those.

Is there an environment variable I can set to help do that like CXXFLAGS 
or CFLAGS?



[1] https://trac.osgeo.org/gdal/ticket/6073
[2] http://www.pastebin.ca/3112701

Donovan

On 18/08/15 02:06 PM, Even Rouault wrote:
> On Tuesday 18 August 2015 11:47:07 Donovan Cameron wrote:
>> I made those changes but same error.
>>
>> Tried once with,
>>
>> #define _XOPEN_SOURCE
>>
>> And a second time with,
>>
>> #define _XOPEN_SOURCE 500
> What is your config: OS + gcc ?
>
> I can't reproduce with Ubuntu 14.04 with gcc 4.8
>
> Could you intercept the gcc command line of gdalserver.c and replace the -c -o
> gdalserver.o by -E to have the preprocessor output ?
>
> Providing the /usr/include/netdb.h of your system might also give some clue,
> since it is in this file that getaddrinfo is defined.
>
>>
>>
>> Donovan
>>
>> On 18/08/15 10:30 AM, Even Rouault wrote:
>>> On Tuesday 18 August 2015 12:00:46 Vincent Schut wrote:
>>>> Hi,
>>>>
>>>> this morning I wanted to refresh my gdal build, so I did an svn update
>>>> (and
>>>> later a fresh svn checkout to be sure), but I get an error when make
>>>> wants
>>>> to build gdalserver:
>>> This might be related to the following that is perhaps too restrictive
>>>
>>> #if defined(__STDC_VERSION__)
>>> #define _XOPEN_SOURCE
>>> #endif
>>>
>>> Could you try remonving the #if defined / #endif, so that #define
>>> _XOPEN_SOURCE is defined ?
>>>
>>> Perhaps you need #define _XOPEN_SOURCE 500
>>>
>>> Even

-- 
Kind regards,

Donovan


From even.rouault at spatialys.com  Tue Aug 18 15:15:13 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 19 Aug 2015 00:15:13 +0200
Subject: [gdal-dev] build error
In-Reply-To: <55D3A8E8.7030907@gmail.com>
References: <55D3024E.4020309@sarvision.nl> <1447294.PaoVBlT4u8@even-n550jk>
	<55D3A8E8.7030907@gmail.com>
Message-ID: <1580177.Od9A3gEBmm@even-n550jk>

On Tuesday 18 August 2015 14:51:36 Donovan Cameron wrote:
> I updated the ticket [1] too.
> 
> OS: Arch Linux 64-bit (Kernel 4.1.5), GCC 5.2.0
> 
> I put a paste of the netdb.h file up [2].
> 
> I'm not sure how to change those flags for gcc to -E, sorry, never done
> that before.
> 
> On Arch Linux, I checked the contents of /etc/makepkg.conf where a lot
> of compiler defaults are and didn't notice where I could place those.
> 
> Is there an environment variable I can set to help do that like CXXFLAGS
> or CFLAGS?

The content of netdb.h was interesting.

Try #define _XOPEN_SOURCE 600
so that __USE_XOPEN2K is defined.

> 
> 
> 
> [1] https://trac.osgeo.org/gdal/ticket/6073
> [2] http://www.pastebin.ca/3112701
> 
> Donovan
> 
> On 18/08/15 02:06 PM, Even Rouault wrote:
> > On Tuesday 18 August 2015 11:47:07 Donovan Cameron wrote:
> >> I made those changes but same error.
> >> 
> >> Tried once with,
> >> 
> >> #define _XOPEN_SOURCE
> >> 
> >> And a second time with,
> >> 
> >> #define _XOPEN_SOURCE 500
> > 
> > What is your config: OS + gcc ?
> > 
> > I can't reproduce with Ubuntu 14.04 with gcc 4.8
> > 
> > Could you intercept the gcc command line of gdalserver.c and replace the
> > -c -o gdalserver.o by -E to have the preprocessor output ?
> > 
> > Providing the /usr/include/netdb.h of your system might also give some
> > clue, since it is in this file that getaddrinfo is defined.
> > 
> >> Donovan
> >> 
> >> On 18/08/15 10:30 AM, Even Rouault wrote:
> >>> On Tuesday 18 August 2015 12:00:46 Vincent Schut wrote:
> >>>> Hi,
> >>>> 
> >>>> this morning I wanted to refresh my gdal build, so I did an svn update
> >>>> (and
> >>>> later a fresh svn checkout to be sure), but I get an error when make
> >>>> wants
> >>> 
> >>>> to build gdalserver:
> >>> This might be related to the following that is perhaps too restrictive
> >>> 
> >>> #if defined(__STDC_VERSION__)
> >>> #define _XOPEN_SOURCE
> >>> #endif
> >>> 
> >>> Could you try remonving the #if defined / #endif, so that #define
> >>> _XOPEN_SOURCE is defined ?
> >>> 
> >>> Perhaps you need #define _XOPEN_SOURCE 500
> >>> 
> >>> Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sault.don at gmail.com  Tue Aug 18 15:25:27 2015
From: sault.don at gmail.com (Donovan Cameron)
Date: Tue, 18 Aug 2015 15:25:27 -0700
Subject: [gdal-dev] build error
In-Reply-To: <1580177.Od9A3gEBmm@even-n550jk>
References: <55D3024E.4020309@sarvision.nl> <1447294.PaoVBlT4u8@even-n550jk>
	<55D3A8E8.7030907@gmail.com> <1580177.Od9A3gEBmm@even-n550jk>
Message-ID: <55D3B0D7.7030208@gmail.com>

That did the trick!

Thanks.

Is that a patch that would be applied upstream or should I apply it 
locally instead?




Donovan

On 18/08/15 03:15 PM, Even Rouault wrote:
> On Tuesday 18 August 2015 14:51:36 Donovan Cameron wrote:
>> I updated the ticket [1] too.
>>
>> OS: Arch Linux 64-bit (Kernel 4.1.5), GCC 5.2.0
>>
>> I put a paste of the netdb.h file up [2].
>>
>> I'm not sure how to change those flags for gcc to -E, sorry, never done
>> that before.
>>
>> On Arch Linux, I checked the contents of /etc/makepkg.conf where a lot
>> of compiler defaults are and didn't notice where I could place those.
>>
>> Is there an environment variable I can set to help do that like CXXFLAGS
>> or CFLAGS?
> The content of netdb.h was interesting.
>
> Try #define _XOPEN_SOURCE 600
> so that __USE_XOPEN2K is defined.
>
>>
>>
>> [1] https://trac.osgeo.org/gdal/ticket/6073
>> [2] http://www.pastebin.ca/3112701
>>
>> Donovan
>>
>> On 18/08/15 02:06 PM, Even Rouault wrote:
>>> On Tuesday 18 August 2015 11:47:07 Donovan Cameron wrote:
>>>> I made those changes but same error.
>>>>
>>>> Tried once with,
>>>>
>>>> #define _XOPEN_SOURCE
>>>>
>>>> And a second time with,
>>>>
>>>> #define _XOPEN_SOURCE 500
>>> What is your config: OS + gcc ?
>>>
>>> I can't reproduce with Ubuntu 14.04 with gcc 4.8
>>>
>>> Could you intercept the gcc command line of gdalserver.c and replace the
>>> -c -o gdalserver.o by -E to have the preprocessor output ?
>>>
>>> Providing the /usr/include/netdb.h of your system might also give some
>>> clue, since it is in this file that getaddrinfo is defined.
>>>
>>>> Donovan
>>>>
>>>> On 18/08/15 10:30 AM, Even Rouault wrote:
>>>>> On Tuesday 18 August 2015 12:00:46 Vincent Schut wrote:
>>>>>> Hi,
>>>>>>
>>>>>> this morning I wanted to refresh my gdal build, so I did an svn update
>>>>>> (and
>>>>>> later a fresh svn checkout to be sure), but I get an error when make
>>>>>> wants
>>>>>> to build gdalserver:
>>>>> This might be related to the following that is perhaps too restrictive
>>>>>
>>>>> #if defined(__STDC_VERSION__)
>>>>> #define _XOPEN_SOURCE
>>>>> #endif
>>>>>
>>>>> Could you try remonving the #if defined / #endif, so that #define
>>>>> _XOPEN_SOURCE is defined ?
>>>>>
>>>>> Perhaps you need #define _XOPEN_SOURCE 500
>>>>>
>>>>> Even

-- 
Kind regards,

Donovan


From paulopires16 at gmail.com  Tue Aug 18 16:08:49 2015
From: paulopires16 at gmail.com (paulopires16)
Date: Tue, 18 Aug 2015 16:08:49 -0700 (PDT)
Subject: [gdal-dev] custom coordinate systems to authority epsg???
Message-ID: <1439939329732-5220246.post@n6.nabble.com>

Hello

Since the FileGDB SDK doesn't support "custom coordinate systems", is
possible to change a line in esri_extra.wkt, to make my custom crs like
authority epsg?

31491,custom coordinate systems,AUTHORITY["EPSG","31491"]]

Thanks



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/custom-coordinate-systems-to-authority-epsg-tp5220246.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From schut at sarvision.nl  Tue Aug 18 23:18:03 2015
From: schut at sarvision.nl (Vincent Schut)
Date: Wed, 19 Aug 2015 08:18:03 +0200
Subject: [gdal-dev] build error
In-Reply-To: <1901693.QocWx1B4eh@even-n550jk>
References: <55D3024E.4020309@sarvision.nl> <1901693.QocWx1B4eh@even-n550jk>
Message-ID: <55D41F9B.3090107@sarvision.nl>



On 08/18/2015 07:30 PM, Even Rouault wrote:
> On Tuesday 18 August 2015 12:00:46 Vincent Schut wrote:
>> Hi,
>>
>> this morning I wanted to refresh my gdal build, so I did an svn update (and
>> later a fresh svn checkout to be sure), but I get an error when make wants
>> to build gdalserver:
>
> This might be related to the following that is perhaps too restrictive
>
> #if defined(__STDC_VERSION__)
> #define _XOPEN_SOURCE
> #endif
>
> Could you try remonving the #if defined / #endif, so that #define _XOPEN_SOURCE
> is defined ?
>
> Perhaps you need #define _XOPEN_SOURCE 500
>
> Even
>

I tried both (with and without "500"), but it makes no difference. Any other hints?

Best,
Vincent

From schut at sarvision.nl  Tue Aug 18 23:20:13 2015
From: schut at sarvision.nl (Vincent Schut)
Date: Wed, 19 Aug 2015 08:20:13 +0200
Subject: [gdal-dev] build error
In-Reply-To: <55D41F9B.3090107@sarvision.nl>
References: <55D3024E.4020309@sarvision.nl> <1901693.QocWx1B4eh@even-n550jk>
	<55D41F9B.3090107@sarvision.nl>
Message-ID: <55D4201D.40107@sarvision.nl>

On 08/19/2015 08:18 AM, Vincent Schut wrote:
>
>
> On 08/18/2015 07:30 PM, Even Rouault wrote:
>> On Tuesday 18 August 2015 12:00:46 Vincent Schut wrote:
>>> Hi,
>>>
>>> this morning I wanted to refresh my gdal build, so I did an svn update (and
>>> later a fresh svn checkout to be sure), but I get an error when make wants
>>> to build gdalserver:
>>
>> This might be related to the following that is perhaps too restrictive
>>
>> #if defined(__STDC_VERSION__)
>> #define _XOPEN_SOURCE
>> #endif
>>
>> Could you try remonving the #if defined / #endif, so that #define _XOPEN_SOURCE
>> is defined ?
>>
>> Perhaps you need #define _XOPEN_SOURCE 500
>>
>> Even
>>
>
> I tried both (with and without "500"), but it makes no difference. Any other hints?

sorry, replied before seeing the other messages. Will wait until the "600" makes it into svn.

>
> Best,
> Vincent
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From paulopires16 at gmail.com  Wed Aug 19 00:31:43 2015
From: paulopires16 at gmail.com (paulopires16)
Date: Wed, 19 Aug 2015 00:31:43 -0700 (PDT)
Subject: [gdal-dev] custom coordinate systems to authority epsg???
In-Reply-To: <1439947141763-5220250.post@n6.nabble.com>
References: <1439939329732-5220246.post@n6.nabble.com>
	<1439947141763-5220250.post@n6.nabble.com>
Message-ID: <1439969503207-5220269.post@n6.nabble.com>

Hello Lance Shipman

With that version of the API, can I read and write GDB with QGIS?

Thanks



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/custom-coordinate-systems-to-authority-epsg-tp5220246p5220269.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From userofgdal at gmail.com  Wed Aug 19 03:31:32 2015
From: userofgdal at gmail.com (user gdal)
Date: Wed, 19 Aug 2015 16:01:32 +0530
Subject: [gdal-dev] A Problem with GDALWarp
Message-ID: <CAJnZZa+ftZ5eF+1rHN5e308e2trhrkvqFuWTO9BYzNnga6dKMA@mail.gmail.com>

Dear friends,
                   I have to programmatically clip (using Visual C++) with
GDALWarp. I proceeded like this:

GDALDataset *outimg;

outimg->(GDALDataset *) GDALOpen(filename, GA_Update);
/* I also tried, instead of the above, outimg=driver->Create(filename,
NewCol, NewRow, Band, DataType, NULL); */

GDALWarpOptions *WO=GDALCreateWarpOptions( );

if(WO)
{
  WO->hSrcDS=inimg; WO->nBandCount=Band;

  WO->hDstDS=(GDALDatasetH)(outimg); WO->hCutline=myshp;

  WO->panSrcBands=(int *) CPLMalloc(sizeof(int)*Band);
WO->panSrcBands[0]=Band;
  WO->panDstBands=(int *) CPLMalloc(sizeof(int)*Band);
WO->panDstBands[0]=Band;

  WO->pfnProgress=GDALTermProgress;

  GDALWarpOperation *operation=new GDALWarpOperation;

  if(operation)
  {
    operation->Initialize(WO);
    operation->ChunkAndWarpImage(0, 0, NewCol, NewRow);

    GDALDestroyWarpOptions(WO); WO=NULL; delete operation; operation=NULL;

   }

   GDALClose((GDALDatasetH) outimg); outimg=NULL;

  }

The system quit the execution of the program just after
operation->Initialize (the Debug revealed so). The problem is with
WO->hDstDS(...). The outimg is surprisingly NULL though there are no
unusual characters in the 'filename'. I also tried to change outimg from
GDALDataset to GDALDatasetH, but to no advantage.

How to overcome these problems? Are there any additional issues in the code?


With many thanks,


Yours sincerely,

B. Ramesh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150819/f65397de/attachment-0001.html>

From bradh at frogmouth.net  Wed Aug 19 03:40:41 2015
From: bradh at frogmouth.net (Brad Hards)
Date: Wed, 19 Aug 2015 20:40:41 +1000
Subject: [gdal-dev] A Problem with GDALWarp
In-Reply-To: <CAJnZZa+ftZ5eF+1rHN5e308e2trhrkvqFuWTO9BYzNnga6dKMA@mail.gmail.com>
References: <CAJnZZa+ftZ5eF+1rHN5e308e2trhrkvqFuWTO9BYzNnga6dKMA@mail.gmail.com>
Message-ID: <1892271.mUAFINzqLK@saxicola>

On Wed, 19 Aug 2015 04:01:32 PM user gdal wrote:
> Dear friends,
>                    I have to programmatically clip (using Visual C++) with
> GDALWarp. I proceeded like this:
> 
> GDALDataset *outimg;
> 
> outimg->(GDALDataset *) GDALOpen(filename, GA_Update);
> /* I also tried, instead of the above, outimg=driver->Create(filename,
> NewCol, NewRow, Band, DataType, NULL); */
> 
> GDALWarpOptions *WO=GDALCreateWarpOptions( );
> 
> if(WO)
> {
>   WO->hSrcDS=inimg; WO->nBandCount=Band;
What is inimg? 

What (exactly) are you passing as filename?

Can you try posting an actual, compilable example? 

Does the tutorial (just by itself, exactly as written) work on your machine?

Brad

From jukka.rahkonen at maanmittauslaitos.fi  Wed Aug 19 03:56:06 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Wed, 19 Aug 2015 10:56:06 +0000 (UTC)
Subject: [gdal-dev] 2.0.1 (and 1.11.3) release schedule ?
References: <201508132229.31148.even.rouault@spatialys.com>
Message-ID: <loom.20150819T125243-173@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

> 
> Hi,
> 
> I was wondering if we couldn't prepare RCs of 2.0.1 and 1.11.3 for the
week of 
> September 14th. That would be 3 months after 2.0.0 release. There are ~ 30 
> tickets closed in both branches. Nothing dramatically critical I can think
of, 
> but going beyond the .0.0 of 2.0.0 will probably make it more psychologically 
> attractive for wider adoption.
> 
> Does that sound OK ?
> Anybody interested in tackling that ? Otherwise I guess I have some idea
for a 
> volunteer...


+1 for making releases.

I doubt you get too many volunteers, for our team even casting votes is
sometimes too heavy a task.

-Jukka Rahkonen-




From dmorissette at mapgears.com  Wed Aug 19 05:01:19 2015
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed, 19 Aug 2015 08:01:19 -0400
Subject: [gdal-dev] 2.0.1 (and 1.11.3) release schedule ?
In-Reply-To: <loom.20150819T125243-173@post.gmane.org>
References: <201508132229.31148.even.rouault@spatialys.com>
	<loom.20150819T125243-173@post.gmane.org>
Message-ID: <55D4700F.3030905@mapgears.com>

On 2015-08-19 6:56 AM, Jukka Rahkonen wrote:
> Even Rouault <even.rouault <at> spatialys.com> writes:
>
>>
>> Hi,
>>
>> I was wondering if we couldn't prepare RCs of 2.0.1 and 1.11.3 for the
> week of
>> September 14th. That would be 3 months after 2.0.0 release. There are ~ 30
>> tickets closed in both branches. Nothing dramatically critical I can think
> of,
>> but going beyond the .0.0 of 2.0.0 will probably make it more psychologically
>> attractive for wider adoption.
>>
>> Does that sound OK ?
>> Anybody interested in tackling that ? Otherwise I guess I have some idea
> for a
>> volunteer...
>
>
> +1 for making releases.
>
> I doubt you get too many volunteers, for our team even casting votes is
> sometimes too heavy a task.
>


+1 for the release and another +1 for the volunteer you have in mind.


-- 
Daniel Morissette
http://www.mapgears.com/
T: +1 418-696-5056 #201

http://evouala.com/ - Location Intelligence Made Easy

From lavanya.aws at gmail.com  Wed Aug 19 07:44:05 2015
From: lavanya.aws at gmail.com (Lavanya Subramaniam)
Date: Wed, 19 Aug 2015 10:44:05 -0400
Subject: [gdal-dev] gdal static library build
Message-ID: <CAKNrYiy6Vt1aA2GxeycVBk=cnjzRjFXZkwznjU8O7RgNHaLy2A@mail.gmail.com>

Hi there,

I have an application from which I am trying to access gdal library.
Everything works fine when I use the dynamic library and the dll but we
would like for it to work with static build, as it would help the delivery
of the software. The problem is the current application already uses
different libraries for tif, png and jpeg. So I am trying to avoid them in
the gdal static build as they cause linker errors because of duplication.
Has anyone done it? I am trying to build on a windows machine with vs10.
The software has to work on cross-platforms. I tried to manipulate the
nmake.opt file, to ignore tif, png and jpeg. Should I always provide the
external library location and include files for them as well? If anyone has
succeeded in doing something similar, please provide some directions.

Thanks,
lavanya
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150819/4ab259d1/attachment.html>

From even.rouault at spatialys.com  Wed Aug 19 09:44:47 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 19 Aug 2015 18:44:47 +0200
Subject: [gdal-dev] build error
In-Reply-To: <55D4201D.40107@sarvision.nl>
References: <55D3024E.4020309@sarvision.nl> <55D41F9B.3090107@sarvision.nl>
	<55D4201D.40107@sarvision.nl>
Message-ID: <1445918.cNV3aRqabT@even-n550jk>


> sorry, replied before seeing the other messages. Will wait until the "600"
> makes it into svn.

Applied in trunk, branches/2.0 and 1.11 per #6073

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ml at mariochiari.net  Wed Aug 19 12:51:17 2015
From: ml at mariochiari.net (mario60)
Date: Wed, 19 Aug 2015 12:51:17 -0700 (PDT)
Subject: [gdal-dev] Fedora 20,
 fatal error: gdal/ogrsf_frmts.h: No such file or directory
Message-ID: <1440013877135-5220370.post@n6.nabble.com>

Himy first post.I am trying to install mysql-workbench from source on a 32
bit Fedora 22 machine.I get the following error msg:
In file included from
/root/rpmbuild/BUILD/mysql-workbench-community-6.3.4-src/backend/wbpublic/grt/spatial_handler.cpp:20:0:/root/rpmbuild/BUILD/mysql-workbench-community-6.3.4-src/backend/wbpublic/grt/spatial_handler.h:23:30:
fatal error: *gdal/ogrsf_frmts.h*: No such file or directory compilation
terminated.
Google does not help, and I am not sure what to look for. 
Could you help somehow?
I appreciate
mario
[root at localhost bin]# locate
gdal/usr/bin/gdal_contour/usr/bin/gdal_grid/usr/bin/gdal_rasterize/usr/bin/gdal_translate/usr/bin/gdaladdo/usr/bin/gdalbuildvrt/usr/bin/gdaldem/usr/bin/gdalenhance/usr/bin/gdalinfo/usr/bin/gdallocationinfo/usr/bin/gdalmanage/usr/bin/gdalserver/usr/bin/gdalsrsinfo/usr/bin/gdaltindex/usr/bin/gdaltransform/usr/bin/gdalwarp/usr/lib/gdalplugins/usr/lib/libgdal.so.1/usr/lib/libgdal.so.1.18.2/usr/lib/ogdi/libgdal.so/usr/share/gdal/usr/share/aclocal/ax_lib_gdal.m4/usr/share/doc/gdal-libs/usr/share/doc/gdal-libs/COMMITERS/usr/share/doc/gdal-libs/LICENSE.TXT/usr/share/doc/gdal-libs/NEWS/usr/share/doc/gdal-libs/PROVENANCE.TXT/usr/share/doc/gdal-libs/PROVENANCE.TXT-fedora/usr/share/gdal/GDALLogoBW.svg/usr/share/gdal/GDALLogoColor.svg/usr/share/gdal/GDALLogoGS.svg/usr/share/gdal/compdcs.csv/usr/share/gdal/coordinate_axis.csv/usr/share/gdal/datum_shift.csv/usr/share/gdal/ellipsoid.csv/usr/share/gdal/epsg.wkt/usr/share/gdal/gcs.csv/usr/share/gdal/gcs.override.csv/usr/share/gdal/gdal_datum.csv/usr/share/gdal/gdalicon.png/usr/share/gdal/geoccs.csv/usr/share/gdal/gml_registry.xml/usr/share/gdal/gt_datum.csv/usr/share/gdal/gt_ellips.csv/usr/share/gdal/header.dxf/usr/share/gdal/inspire_cp_BasicPropertyUnit.gfs/usr/share/gdal/inspire_cp_CadastralBoundary.gfs/usr/share/gdal/inspire_cp_CadastralParcel.gfs/usr/share/gdal/inspire_cp_CadastralZoning.gfs/usr/share/gdal/nitf_spec.xml/usr/share/gdal/nitf_spec.xsd/usr/share/gdal/ogrvrt.xsd/usr/share/gdal/osmconf.ini/usr/share/gdal/ozi_datum.csv/usr/share/gdal/ozi_ellips.csv/usr/share/gdal/pci_datum.txt/usr/share/gdal/pci_ellips.txt/usr/share/gdal/pcs.csv/usr/share/gdal/pcs.override.csv/usr/share/gdal/prime_meridian.csv/usr/share/gdal/projop_wparm.csv/usr/share/gdal/ruian_vf_ob_v1.gfs/usr/share/gdal/ruian_vf_st_uvoh_v1.gfs/usr/share/gdal/ruian_vf_st_v1.gfs/usr/share/gdal/ruian_vf_v1.gfs/usr/share/gdal/s57agencies.csv/usr/share/gdal/s57attributes.csv/usr/share/gdal/s57attributes_aml.csv/usr/share/gdal/s57attributes_iw.csv/usr/share/gdal/s57expectedinput.csv/usr/share/gdal/s57objectclasses.csv/usr/share/gdal/s57objectclasses_aml.csv/usr/share/gdal/s57objectclasses_iw.csv/usr/share/gdal/seed_2d.dgn/usr/share/gdal/seed_3d.dgn/usr/share/gdal/stateplane.csv/usr/share/gdal/trailer.dxf/usr/share/gdal/unit_of_measure.csv/usr/share/gdal/vertcs.csv/usr/share/gdal/vertcs.override.csv/usr/share/man/man1/gdal_calc.1.gz/usr/share/man/man1/gdal_contour.1.gz/usr/share/man/man1/gdal_edit.1.gz/usr/share/man/man1/gdal_grid.1.gz/usr/share/man/man1/gdal_polygonize.1.gz/usr/share/man/man1/gdal_proximity.1.gz/usr/share/man/man1/gdal_rasterize.1.gz/usr/share/man/man1/gdal_translate.1.gz/usr/share/man/man1/gdal_utilities.1.gz/usr/share/man/man1/gdaladdo.1.gz/usr/share/man/man1/gdalbuildvrt.1.gz/usr/share/man/man1/gdalcompare.1.gz/usr/share/man/man1/gdaldem.1.gz/usr/share/man/man1/gdalinfo.1.gz/usr/share/man/man1/gdallocationinfo.1.gz/usr/share/man/man1/gdalmanage.1.gz/usr/share/man/man1/gdalmove.1.gz/usr/share/man/man1/gdalsrsinfo.1.gz/usr/share/man/man1/gdaltindex.1.gz/usr/share/man/man1/gdaltransform.1.gz/usr/share/man/man1/gdalwarp.1.gz




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Fedora-20-fatal-error-gdal-ogrsf-frmts-h-No-such-file-or-directory-tp5220370.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150819/2567340a/attachment.html>

From kyle at pobox.com  Wed Aug 19 13:02:10 2015
From: kyle at pobox.com (Kyle Shannon)
Date: Wed, 19 Aug 2015 14:02:10 -0600
Subject: [gdal-dev] Fedora 20,
 fatal error: gdal/ogrsf_frmts.h: No such file or directory
In-Reply-To: <1440013877135-5220370.post@n6.nabble.com>
References: <1440013877135-5220370.post@n6.nabble.com>
Message-ID: <CAJ0mEz3dmZ3fOyAr9S0o52MiqipT4FXm1tDq232fawZ_j1z40w@mail.gmail.com>

mario,

On Wed, Aug 19, 2015 at 1:51 PM, mario60 <ml at mariochiari.net> wrote:
> Hi my first post. I am trying to install mysql-workbench from source on a 32
> bit Fedora 22 machine. I get the following error msg:
>
> In file included from
> /root/rpmbuild/BUILD/mysql-workbench-community-6.3.4-src/backend/wbpublic/grt/spatial_handler.cpp:20:0:
> /root/rpmbuild/BUILD/mysql-workbench-community-6.3.4-src/backend/wbpublic/grt/spatial_handler.h:23:30:
> fatal error: gdal/ogrsf_frmts.h: No such file or directory compilation
> terminated.
>
> Google does not help, and I am not sure what to look for.
> Could you help somehow?
> I appreciate
> mario
> ________________________________
>
> [root at localhost bin]# locate gdal
> /usr/bin/gdal_contour
> /usr/bin/gdal_grid
> /usr/bin/gdal_rasterize
> /usr/bin/gdal_translate
> /usr/bin/gdaladdo
> /usr/bin/gdalbuildvrt
> /usr/bin/gdaldem
> /usr/bin/gdalenhance
> /usr/bin/gdalinfo
> /usr/bin/gdallocationinfo
> /usr/bin/gdalmanage
> /usr/bin/gdalserver
> /usr/bin/gdalsrsinfo
> /usr/bin/gdaltindex
> /usr/bin/gdaltransform
> /usr/bin/gdalwarp
> /usr/lib/gdalplugins
> /usr/lib/libgdal.so.1
> /usr/lib/libgdal.so.1.18.2
> /usr/lib/ogdi/libgdal.so
> /usr/share/gdal
> /usr/share/aclocal/ax_lib_gdal.m4
> /usr/share/doc/gdal-libs
> /usr/share/doc/gdal-libs/COMMITERS
> /usr/share/doc/gdal-libs/LICENSE.TXT
> /usr/share/doc/gdal-libs/NEWS
> /usr/share/doc/gdal-libs/PROVENANCE.TXT
> /usr/share/doc/gdal-libs/PROVENANCE.TXT-fedora
> /usr/share/gdal/GDALLogoBW.svg
> /usr/share/gdal/GDALLogoColor.svg
> /usr/share/gdal/GDALLogoGS.svg
> /usr/share/gdal/compdcs.csv
> /usr/share/gdal/coordinate_axis.csv
> /usr/share/gdal/datum_shift.csv
> /usr/share/gdal/ellipsoid.csv
> /usr/share/gdal/epsg.wkt
> /usr/share/gdal/gcs.csv
> /usr/share/gdal/gcs.override.csv
> /usr/share/gdal/gdal_datum.csv
> /usr/share/gdal/gdalicon.png
> /usr/share/gdal/geoccs.csv
> /usr/share/gdal/gml_registry.xml
> /usr/share/gdal/gt_datum.csv
> /usr/share/gdal/gt_ellips.csv
> /usr/share/gdal/header.dxf
> /usr/share/gdal/inspire_cp_BasicPropertyUnit.gfs
> /usr/share/gdal/inspire_cp_CadastralBoundary.gfs
> /usr/share/gdal/inspire_cp_CadastralParcel.gfs
> /usr/share/gdal/inspire_cp_CadastralZoning.gfs
> /usr/share/gdal/nitf_spec.xml
> /usr/share/gdal/nitf_spec.xsd
> /usr/share/gdal/ogrvrt.xsd
> /usr/share/gdal/osmconf.ini
> /usr/share/gdal/ozi_datum.csv
> /usr/share/gdal/ozi_ellips.csv
> /usr/share/gdal/pci_datum.txt
> /usr/share/gdal/pci_ellips.txt
> /usr/share/gdal/pcs.csv
> /usr/share/gdal/pcs.override.csv
> /usr/share/gdal/prime_meridian.csv
> /usr/share/gdal/projop_wparm.csv
> /usr/share/gdal/ruian_vf_ob_v1.gfs
> /usr/share/gdal/ruian_vf_st_uvoh_v1.gfs
> /usr/share/gdal/ruian_vf_st_v1.gfs
> /usr/share/gdal/ruian_vf_v1.gfs
> /usr/share/gdal/s57agencies.csv
> /usr/share/gdal/s57attributes.csv
> /usr/share/gdal/s57attributes_aml.csv
> /usr/share/gdal/s57attributes_iw.csv
> /usr/share/gdal/s57expectedinput.csv
> /usr/share/gdal/s57objectclasses.csv
> /usr/share/gdal/s57objectclasses_aml.csv
> /usr/share/gdal/s57objectclasses_iw.csv
> /usr/share/gdal/seed_2d.dgn
> /usr/share/gdal/seed_3d.dgn
> /usr/share/gdal/stateplane.csv
> /usr/share/gdal/trailer.dxf
> /usr/share/gdal/unit_of_measure.csv
> /usr/share/gdal/vertcs.csv
> /usr/share/gdal/vertcs.override.csv
> /usr/share/man/man1/gdal_calc.1.gz
> /usr/share/man/man1/gdal_contour.1.gz
> /usr/share/man/man1/gdal_edit.1.gz
> /usr/share/man/man1/gdal_grid.1.gz
> /usr/share/man/man1/gdal_polygonize.1.gz
> /usr/share/man/man1/gdal_proximity.1.gz
> /usr/share/man/man1/gdal_rasterize.1.gz
> /usr/share/man/man1/gdal_translate.1.gz
> /usr/share/man/man1/gdal_utilities.1.gz
> /usr/share/man/man1/gdaladdo.1.gz
> /usr/share/man/man1/gdalbuildvrt.1.gz
> /usr/share/man/man1/gdalcompare.1.gz
> /usr/share/man/man1/gdaldem.1.gz
> /usr/share/man/man1/gdalinfo.1.gz
> /usr/share/man/man1/gdallocationinfo.1.gz
> /usr/share/man/man1/gdalmanage.1.gz
> /usr/share/man/man1/gdalmove.1.gz
> /usr/share/man/man1/gdalsrsinfo.1.gz
> /usr/share/man/man1/gdaltindex.1.gz
> /usr/share/man/man1/gdaltransform.1.gz
> /usr/share/man/man1/gdalwarp.1.gz
>
>
> ________________________________
> View this message in context: Fedora 20, fatal error: gdal/ogrsf_frmts.h: No
> such file or directory
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

You need the include files for gdal, I am not on a fedora machine, but
something like:

yum install gdal-devel

Will get the files needed to compile against.

-- 
Kyle

From ml at mariochiari.net  Wed Aug 19 13:37:42 2015
From: ml at mariochiari.net (mario chiari)
Date: Wed, 19 Aug 2015 22:37:42 +0200
Subject: [gdal-dev] Fedora 20,
 fatal error: gdal/ogrsf_frmts.h: No such file or directory
In-Reply-To: <CAJ0mEz3dmZ3fOyAr9S0o52MiqipT4FXm1tDq232fawZ_j1z40w@mail.gmail.com>
References: <1440013877135-5220370.post@n6.nabble.com>
	<CAJ0mEz3dmZ3fOyAr9S0o52MiqipT4FXm1tDq232fawZ_j1z40w@mail.gmail.com>
Message-ID: <1440016662.3797.15.camel@mariochiari.net>

Kyle

Yes,  now I see /usr/include/gdal/ogrsf_frmts.h

Perfect! 
Thanks so much
mario




Il giorno mer, 19/08/2015 alle 14.02 -0600, Kyle Shannon ha scritto:
> mario,
> 
> On Wed, Aug 19, 2015 at 1:51 PM, mario60 <ml at mariochiari.net> wrote:
> > Hi my first post. I am trying to install mysql-workbench from 
> > source on a 32
> > bit Fedora 22 machine. I get the following error msg:
> > 
...
> > fatal error: gdal/ogrsf_frmts.h: No such file or directory 
> > compilation
> > terminated.
> > 
> > ....
> 
> You need the include files for gdal, I am not on a fedora machine, 
> but
> something like:
> 
> yum install gdal-devel

# dnf install gdal-devel


# dnf info gdal-devel
Last metadata expiration check performed 1:19:42 ago on Wed Aug 19
21:16:32 2015.
Pacchetti installati
Nome        : gdal-devel
Arch        : i686
Epoch       : 0
Versione    : 1.11.2
Rilascio    : 4.fc22
Dim.        : 667 k
Repo        : @System
Dal repo    : updates
Sommario    : Development files for the GDAL file format library
URL         : http://www.gdal.org
Licenza     : MIT
Descrizione : This package contains development files for GDAL.




From ml at mariochiari.net  Wed Aug 19 14:44:11 2015
From: ml at mariochiari.net (mario chiari)
Date: Wed, 19 Aug 2015 23:44:11 +0200
Subject: [gdal-dev] Fedora 22,
 fatal error: gdal/ogrsf_frmts.h: No such file or directory
In-Reply-To: <1440016662.3797.15.camel@mariochiari.net>
References: <1440013877135-5220370.post@n6.nabble.com>
	<CAJ0mEz3dmZ3fOyAr9S0o52MiqipT4FXm1tDq232fawZ_j1z40w@mail.gmail.com>
	<1440016662.3797.15.camel@mariochiari.net>
Message-ID: <1440020651.12710.7.camel@mariochiari.net>

Hi

Il giorno mer, 19/08/2015 alle 22.37 +0200, mario chiari ha scritto:
> Kyle
> 
> Yes,  now I see /usr/include/gdal/ogrsf_frmts.h
> 

Still, I am not able to built.
I am not sure whether it is a issue about gdal, but maybe you know how
to fix.

Now the msg is:

>>>make[2]: *** No rule to make target '/root/linux-res
-6.3/gdal/lib/libgdal.so', needed by
'backend/wbpublic/libwbpublic.so.6.3.4'.  Stop.<<<

what does it mean?

I appreciate your help
mario

ps
mysql-workbench.spec states:
# Directory where iodbc and pyodbc binaries are located. Build both
using the build_iodbc.sh script
# If using distribution provided ODBC manager lib and pyodbc, then
comment out this
%define odbc_home        $HOME/linux-res-6.3/usr
%define linuxres_home    $HOME/linux-res-6.3
%define vsqlite_dir      $HOME/linux-res-6.3/vsqlite
%define ctemplate_dir    $HOME/linux-res-6.3
%define gdal_dir         $HOME/linux-res-6.3/gdal

ps 
# locate libgdal.so
/usr/lib/libgdal.so
/usr/lib/libgdal.so.1
/usr/lib/libgdal.so.1.18.2

From paulopires16 at gmail.com  Wed Aug 19 16:05:43 2015
From: paulopires16 at gmail.com (paulopires16)
Date: Wed, 19 Aug 2015 16:05:43 -0700 (PDT)
Subject: [gdal-dev] Where can I find ogr_FileGDB.dll v1.4 compilled for
	Windows?
Message-ID: <1440025543226-5220386.post@n6.nabble.com>

Since v1.3 do not have custom CRS support, where can I find the*
ogr_FileGDB.dl*l v1.4 compiled for Windows?

Thanks



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Where-can-I-find-ogr-FileGDB-dll-v1-4-compilled-for-Windows-tp5220386.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From seth.osc at gmail.com  Wed Aug 19 20:38:58 2015
From: seth.osc at gmail.com (Priya Seth)
Date: Thu, 20 Aug 2015 09:08:58 +0530
Subject: [gdal-dev] gdal test failures
Message-ID: <CAN+g16fvPbOKJN+DzEqUrU1Ls9YuC2bPTDrt2DMFPS-msUqAdQ@mail.gmail.com>

Hi All,

I have built  gdal from source on RHEL 7.1  and when I run the
autotest, the following HF2 driver tests are failing:
Script: gdrivers/hf2.py
  TEST: hf2_1 ... fail
    line 506: Did not get expected checksum on still-open file.
    Got 4716 instead of 4672.
  TEST: hf2_2 ... fail
    line 506: Did not get expected checksum on still-open file.
    Got 4796 instead of 4672.
  TEST: hf2_4 ... fail
    line 506: Did not get expected checksum on still-open file.
    Got 44135 instead of 49187.
I have tried with multiple versions/branches of gdal, but I am still
getting the same issues.
Any suggestions on why this might be happening?

Thanks!
Priya

From seth.osc at gmail.com  Wed Aug 19 21:34:42 2015
From: seth.osc at gmail.com (Priya Seth)
Date: Thu, 20 Aug 2015 10:04:42 +0530
Subject: [gdal-dev] gdal test failures
In-Reply-To: <CAN+g16fvPbOKJN+DzEqUrU1Ls9YuC2bPTDrt2DMFPS-msUqAdQ@mail.gmail.com>
References: <CAN+g16fvPbOKJN+DzEqUrU1Ls9YuC2bPTDrt2DMFPS-msUqAdQ@mail.gmail.com>
Message-ID: <CAN+g16c3ja29uiVBigVpTE_XvPdu6GWqb2fmvM8m2e+Mgjg7YA@mail.gmail.com>

I am getting the same issue when I run this command
gdal_translate -of HF2 data/byte.tif data/byte.tif.tst
Could this be some issue with translation from different formats to
the HF2 format?

Thanks!

On Thu, Aug 20, 2015 at 9:08 AM, Priya Seth <seth.osc at gmail.com> wrote:
> Hi All,
>
> I have built  gdal from source on RHEL 7.1  and when I run the
> autotest, the following HF2 driver tests are failing:
> Script: gdrivers/hf2.py
>   TEST: hf2_1 ... fail
>     line 506: Did not get expected checksum on still-open file.
>     Got 4716 instead of 4672.
>   TEST: hf2_2 ... fail
>     line 506: Did not get expected checksum on still-open file.
>     Got 4796 instead of 4672.
>   TEST: hf2_4 ... fail
>     line 506: Did not get expected checksum on still-open file.
>     Got 44135 instead of 49187.
> I have tried with multiple versions/branches of gdal, but I am still
> getting the same issues.
> Any suggestions on why this might be happening?
>
> Thanks!
> Priya

From ari.jolma at gmail.com  Thu Aug 20 00:17:35 2015
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu, 20 Aug 2015 10:17:35 +0300
Subject: [gdal-dev] Fedora 22,
 fatal error: gdal/ogrsf_frmts.h: No such file or directory
In-Reply-To: <1440020651.12710.7.camel@mariochiari.net>
References: <1440013877135-5220370.post@n6.nabble.com>	<CAJ0mEz3dmZ3fOyAr9S0o52MiqipT4FXm1tDq232fawZ_j1z40w@mail.gmail.com>	<1440016662.3797.15.camel@mariochiari.net>
	<1440020651.12710.7.camel@mariochiari.net>
Message-ID: <55D57F0F.6020008@gmail.com>

mario,

I think you should ask this on a list where there are Fedora packagers.

Best regards,

Ari

On 20.08.2015 00:44, mario chiari wrote:
> Hi
>
> Il giorno mer, 19/08/2015 alle 22.37 +0200, mario chiari ha scritto:
>> Kyle
>>
>> Yes,  now I see /usr/include/gdal/ogrsf_frmts.h
>>
> Still, I am not able to built.
> I am not sure whether it is a issue about gdal, but maybe you know how
> to fix.
>
> Now the msg is:
>
>>>> make[2]: *** No rule to make target '/root/linux-res
> -6.3/gdal/lib/libgdal.so', needed by
> 'backend/wbpublic/libwbpublic.so.6.3.4'.  Stop.<<<
>
> what does it mean?
>
> I appreciate your help
> mario
>
> ps
> mysql-workbench.spec states:
> # Directory where iodbc and pyodbc binaries are located. Build both
> using the build_iodbc.sh script
> # If using distribution provided ODBC manager lib and pyodbc, then
> comment out this
> %define odbc_home        $HOME/linux-res-6.3/usr
> %define linuxres_home    $HOME/linux-res-6.3
> %define vsqlite_dir      $HOME/linux-res-6.3/vsqlite
> %define ctemplate_dir    $HOME/linux-res-6.3
> %define gdal_dir         $HOME/linux-res-6.3/gdal
>
> ps
> # locate libgdal.so
> /usr/lib/libgdal.so
> /usr/lib/libgdal.so.1
> /usr/lib/libgdal.so.1.18.2
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From userofgdal at gmail.com  Thu Aug 20 01:39:28 2015
From: userofgdal at gmail.com (user gdal)
Date: Thu, 20 Aug 2015 14:09:28 +0530
Subject: [gdal-dev] (no subject)
Message-ID: <CAJnZZaL5x6b325xUrTQhErhgQN=66hDuWMntK7yGcxhGnbu=1g@mail.gmail.com>

Dear Dr. Brad, Thanks for your kind and prompt reply. Below are my
answers/clarifications.

On Wed, 19 Aug 2015 04:01:32 PM user gdal wrote:
> Dear friends,
>                    I have to programmatically clip (using Visual C++) with
> GDALWarp. I proceeded like this:
>
> GDALDataset *outimg;
>
> outimg->(GDALDataset *) GDALOpen(filename, GA_Update);
> /* I also tried, instead of the above, outimg=driver->Create(filename,
> NewCol, NewRow, Band, DataType, NULL); */
>
> GDALWarpOptions *WO=GDALCreateWarpOptions( );
>
> if(WO)
> {
>   WO->hSrcDS=inimg; WO->nBandCount=Band;

What is inimg?
Ans. The bigger input image from which I want to draw subset (i.e., clip)
with the help of a vector layer myshp. It' (inimg) is of type GDALDataset
*. In the declaration of variables, it would appear as GDALDataset *inimg
Also, in WO->hCutline (pl. see below), I am passing myshp (which has
strictly polygon topology), of the type OGRLayer * (i.e., OGRLayer *myshp).
Of course the shape file and inimg have the same projection.


What (exactly) are you passing as filename?
Ans. char *filename (such as e:\sub\subimage.img. There are no other
characters in the 'filename')

Can you try posting an actual, compilable example?
Ans. There is a GUI from which I extract parameters which can give us a lot
of inconvenience. The program compiles without 'abusing' me. What I am
getting is a run time (or debug time) error.

----------------------------------------------------------------------------------------------------------------------------------------------
GDALDataset *inimg, *outimg;

outimg->(GDALDataset *) GDALOpen(filename, GA_Update);
/* I also tried, instead of the above, outimg=driver->Create(filename,
NewCol, NewRow, Band, DataType, NULL); NewCol and NewRow, have values of
the range 30 each */

GDALWarpOptions *WO=GDALCreateWarpOptions( );

if(WO)
{
  WO->hSrcDS=inimg; WO->nBandCount=Band;

  // In a sample image I wish to use, Band =3, checked

  WO->hDstDS=(GDALDatasetH)(outimg); WO->hCutline=myshp;

  WO->panSrcBands=(int *) CPLMalloc(sizeof(int)*Band);
WO->panSrcBands[0]=Band;
  WO->panDstBands=(int *) CPLMalloc(sizeof(int)*Band);
WO->panDstBands[0]=Band;

  WO->pfnProgress=GDALTermProgress;

  GDALWarpOperation *operation=new GDALWarpOperation;

  if(operation)
  {
    operation->Initialize(WO);
    operation->ChunkAndWarpImage(0, 0, NewCol, NewRow);

    GDALDestroyWarpOptions(WO); WO=NULL; delete operation; operation=NULL;

   }

   GDALClose((GDALDatasetH) outimg); outimg=NULL;

  }

----------------------------------------------------------------------------------------------------------------------------------------------
Does the tutorial (just by itself, exactly as written) work on your machine?
Ans. To be honest I haven't checked. I, however, have gone through the
tutorial and after convincing myself that I have understood what to do, I
wrote the program.

______________________________
__________________________________________________

With many thanks,
Yours sincerely,
 T.S. Prasad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150820/a2a350d8/attachment.html>

From monshi2+nn at gmail.com  Thu Aug 20 02:09:01 2015
From: monshi2+nn at gmail.com (TomasR)
Date: Thu, 20 Aug 2015 11:09:01 +0200
Subject: [gdal-dev] Gdal 2.0,
	supported raster/vector formats (RIK in particular)
Message-ID: <mr45f4$v0a$1@ger.gmane.org>

Hi

Have compiled Gdal 2.0 (for x86, with swig and linked to Csharp, .net2) 
and is trying it out. I have some map data in RIK-file format that, 
according to
http://www.gdal.org/formats_list.html
Gdal should, still, support.
Earlier versions of Gdal I have had no problem with. This gets me to 
wonder if the list on the site needs to be updated, is the list still 
valid? Are there other file formats that may be deprecated in this 
version, others that now are supported?

Is there anything I can do, anything I have missed, in  my compilation 
that can remedy the support for RIK?

or should I, simply, revert back to gdal 1.#?

Best regards
Tomas


From ml at mariochiari.net  Thu Aug 20 03:11:35 2015
From: ml at mariochiari.net (mario chiari)
Date: Thu, 20 Aug 2015 12:11:35 +0200
Subject: [gdal-dev] Fedora 22,
 fatal error: gdal/ogrsf_frmts.h: No such file or directory
In-Reply-To: <55D57F0F.6020008@gmail.com>
References: <1440013877135-5220370.post@n6.nabble.com>
	<CAJ0mEz3dmZ3fOyAr9S0o52MiqipT4FXm1tDq232fawZ_j1z40w@mail.gmail.com>
	<1440016662.3797.15.camel@mariochiari.net>
	<1440020651.12710.7.camel@mariochiari.net> <55D57F0F.6020008@gmail.com>
Message-ID: <1440065495.16291.2.camel@mariochiari.net>

Il giorno gio, 20/08/2015 alle 10.17 +0300, Ari Jolma ha scritto:
> mario,
> 
> I think you should ask this on a list where there are Fedora 
> packagers.
> 
> Best regards,
> 
> Ari
> 

yes, I did.
It was suggested to "set gdal_dir enviroment variable to point to
proper location". 

I am not sure how to do so, your advise is welcome.
thanks
mario


> On 20.08.2015 00:44, mario chiari wrote:
> > Hi
> > 
> > Il giorno mer, 19/08/2015 alle 22.37 +0200, mario chiari ha 
> > scritto:
> > > Kyle
> > > 
> > > Yes,  now I see /usr/include/gdal/ogrsf_frmts.h
> > > 
> > Still, I am not able to built.
> > I am not sure whether it is a issue about gdal, but maybe you know 
> > how
> > to fix.
> > 
> > Now the msg is:
> > 
> > > > > make[2]: *** No rule to make target '/root/linux-res
> > -6.3/gdal/lib/libgdal.so', needed by
> > 'backend/wbpublic/libwbpublic.so.6.3.4'.  Stop.<<<
> > 
> > what does it mean?
> > 
> > I appreciate your help
> > mario
> > 
> > ps
> > mysql-workbench.spec states:
> > # Directory where iodbc and pyodbc binaries are located. Build both
> > using the build_iodbc.sh script
> > # If using distribution provided ODBC manager lib and pyodbc, then
> > comment out this
> > %define odbc_home        $HOME/linux-res-6.3/usr
> > %define linuxres_home    $HOME/linux-res-6.3
> > %define vsqlite_dir      $HOME/linux-res-6.3/vsqlite
> > %define ctemplate_dir    $HOME/linux-res-6.3
> > %define gdal_dir         $HOME/linux-res-6.3/gdal
> > 
> > ps
> > # locate libgdal.so
> > /usr/lib/libgdal.so
> > /usr/lib/libgdal.so.1
> > /usr/lib/libgdal.so.1.18.2
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From ari.jolma at gmail.com  Thu Aug 20 03:28:27 2015
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu, 20 Aug 2015 13:28:27 +0300
Subject: [gdal-dev] Fedora 22,
 fatal error: gdal/ogrsf_frmts.h: No such file or directory
In-Reply-To: <1440065495.16291.2.camel@mariochiari.net>
References: <1440013877135-5220370.post@n6.nabble.com>	<CAJ0mEz3dmZ3fOyAr9S0o52MiqipT4FXm1tDq232fawZ_j1z40w@mail.gmail.com>	<1440016662.3797.15.camel@mariochiari.net>	<1440020651.12710.7.camel@mariochiari.net>
	<55D57F0F.6020008@gmail.com>
	<1440065495.16291.2.camel@mariochiari.net>
Message-ID: <55D5ABCB.1080309@gmail.com>



On 20.08.2015 13:11, mario chiari wrote:
> Il giorno gio, 20/08/2015 alle 10.17 +0300, Ari Jolma ha scritto:
>> mario,
>>
>> I think you should ask this on a list where there are Fedora
>> packagers.
>>
>> Best regards,
>>
>> Ari
>>
> yes, I did.
> It was suggested to "set gdal_dir enviroment variable to point to
> proper location".

Hm. I'm guessing, you have

%define gdal_dir         $HOME/linux-res-6.3/gdal

and the error message is

-6.3/gdal/lib/libgdal.so', needed by
'backend/wbpublic/libwbpublic.so.6.3.4'.

So is the string "$HOME/linux-res-6.3/gdal" somehow not good since it is 
broken in the message? Maybe it should not have "-" (at least three of 
them)?

Ari

>
> I am not sure how to do so, your advise is welcome.
> thanks
> mario
>
>
>> On 20.08.2015 00:44, mario chiari wrote:
>>> Hi
>>>
>>> Il giorno mer, 19/08/2015 alle 22.37 +0200, mario chiari ha
>>> scritto:
>>>> Kyle
>>>>
>>>> Yes,  now I see /usr/include/gdal/ogrsf_frmts.h
>>>>
>>> Still, I am not able to built.
>>> I am not sure whether it is a issue about gdal, but maybe you know
>>> how
>>> to fix.
>>>
>>> Now the msg is:
>>>
>>>>>> make[2]: *** No rule to make target '/root/linux-res
>>> -6.3/gdal/lib/libgdal.so', needed by
>>> 'backend/wbpublic/libwbpublic.so.6.3.4'.  Stop.<<<
>>>
>>> what does it mean?
>>>
>>> I appreciate your help
>>> mario
>>>
>>> ps
>>> mysql-workbench.spec states:
>>> # Directory where iodbc and pyodbc binaries are located. Build both
>>> using the build_iodbc.sh script
>>> # If using distribution provided ODBC manager lib and pyodbc, then
>>> comment out this
>>> %define odbc_home        $HOME/linux-res-6.3/usr
>>> %define linuxres_home    $HOME/linux-res-6.3
>>> %define vsqlite_dir      $HOME/linux-res-6.3/vsqlite
>>> %define ctemplate_dir    $HOME/linux-res-6.3
>>> %define gdal_dir         $HOME/linux-res-6.3/gdal
>>>
>>> ps
>>> # locate libgdal.so
>>> /usr/lib/libgdal.so
>>> /usr/lib/libgdal.so.1
>>> /usr/lib/libgdal.so.1.18.2
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at spatialys.com  Thu Aug 20 04:29:44 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 20 Aug 2015 13:29:44 +0200
Subject: [gdal-dev] RE :  Gdal 2.0,
 supported raster/vector formats (RIK in particular)
Message-ID: <pfxagty65w1dur6gwpn9uucl.1440070184053@email.android.com>

RIK should be supported in 2.0 as well as in previous versions. could you share a file that no longer work??


---
Spatialys - Geospatial professional services
http://www.spatialys.com

<div>-------- Message d'origine --------</div><div>De : TomasR <monshi2+nn at gmail.com> </div><div>Date :20/08/2015  11:09  (GMT+01:00) </div><div>? : gdal-dev at lists.osgeo.org </div><div>Cc :  </div><div>Objet : [gdal-dev] Gdal 2.0,
 	supported raster/vector formats (RIK in particular) </div><div>
</div>Hi

Have compiled Gdal 2.0 (for x86, with swig and linked to Csharp, .net2) 
and is trying it out. I have some map data in RIK-file format that, 
according to
http://www.gdal.org/formats_list.html
Gdal should, still, support.
Earlier versions of Gdal I have had no problem with. This gets me to 
wonder if the list on the site needs to be updated, is the list still 
valid? Are there other file formats that may be deprecated in this 
version, others that now are supported?

Is there anything I can do, anything I have missed, in  my compilation 
that can remedy the support for RIK?

or should I, simply, revert back to gdal 1.#?

Best regards
Tomas

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150820/48067ffb/attachment-0001.html>

From ml at mariochiari.net  Thu Aug 20 04:28:29 2015
From: ml at mariochiari.net (mario60)
Date: Thu, 20 Aug 2015 04:28:29 -0700 (PDT)
Subject: [gdal-dev] Fedora 22,
 fatal error: gdal/ogrsf_frmts.h: No such file or directory
In-Reply-To: <55D5ABCB.1080309@gmail.com>
References: <1440013877135-5220370.post@n6.nabble.com>
	<1440016662.3797.15.camel@mariochiari.net>
	<1440020651.12710.7.camel@mariochiari.net>
	<55D57F0F.6020008@gmail.com>
	<1440065495.16291.2.camel@mariochiari.net>
	<55D5ABCB.1080309@gmail.com>
Message-ID: <1440070431.16291.5.camel@mariochiari.net>

Il giorno gio, 20/08/2015 alle 03.22 -0700, Ari Jolma-2 [via OSGeo.org]
ha scritto:
> 
> 

> Hm. I'm guessing, you have 
> 
> %define gdal_dir         $HOME/linux-res-6.3/gdal 
> 
> and the error message is 
> 
> -6.3/gdal/lib/libgdal.so', needed by 
> 'backend/wbpublic/libwbpublic.so.6.3.4'.

>> make[2]: 
*** No rule to make target '/root/linux-res -6.3/gdal/lib/libgdal.so',
needed by 'backend/wbpublic/libwbpublic.so.6.3.4'.  Stop. <

m.





--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Fedora-20-fatal-error-gdal-ogrsf-frmts-h-No-such-file-or-directory-tp5220370p5220423.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150820/8deed24f/attachment.html>

From sebastic at xs4all.nl  Thu Aug 20 04:46:52 2015
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Thu, 20 Aug 2015 13:46:52 +0200
Subject: [gdal-dev] Regarding libkml driver
In-Reply-To: <8994555.TqCugiCv4k@even-n550jk>
References: <CANNqv9e5LR_oQ9AVj9Kgr1AiSg4ASG0CSUY+tUXNHxQiDv0cVA@mail.gmail.com>
	<1724406.vKdNWo3mXU@even-n550jk>
	<CANNqv9ddN_wmPesmFNno_dLvXr9dfxHQNfu1kCUKVScJS4giTA@mail.gmail.com>
	<8994555.TqCugiCv4k@even-n550jk>
Message-ID: <55D5BE2C.8080303@xs4all.nl>

On 02-08-15 21:05, Even Rouault wrote:
> On 02-08-15 20:45, Rashad M wrote:
>> No API changes. it make building and configuring libkml easier!
>>
>> Correct me If I am wrong, I guess with a pkg-config would be easier to find
>> and configure libkml libs.
> 
> Yes, that would probably be better. That said my experience with GDAL configure 
> --with-libkml has been good up to now. But having a pkg-config script could 
> simplify the current detection and configuration logic.

The current m4/ax_lib_libkml.m4 doesn't detect the new libkml because it
still expects the thirdparty boost headers.

We should probably keep this as a fallback for the old libkml, but
prefer pkgconfig if that's available as is the case for the new libkml.

As part of the ongoing GCC 5 transitions we've switched to the new
libkml in Debian, with the geos & gdal transitions soon to follow, and
gdal now builds without KML support because it doesn't detect the new
libkml properly.

I'm working on a patch to try and support both the old Automake based &
new CMake based libkml by adding support for libkml.pc.

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From ari.jolma at gmail.com  Thu Aug 20 05:17:05 2015
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu, 20 Aug 2015 15:17:05 +0300
Subject: [gdal-dev] Fedora 22,
 fatal error: gdal/ogrsf_frmts.h: No such file or directory
In-Reply-To: <1440070431.16291.5.camel@mariochiari.net>
References: <1440013877135-5220370.post@n6.nabble.com>	<1440016662.3797.15.camel@mariochiari.net>	<1440020651.12710.7.camel@mariochiari.net>	<55D57F0F.6020008@gmail.com>	<1440065495.16291.2.camel@mariochiari.net>	<55D5ABCB.1080309@gmail.com>
	<1440070431.16291.5.camel@mariochiari.net>
Message-ID: <55D5C541.5000402@gmail.com>



On 20.08.2015 14:28, mario60 wrote:
> Il giorno gio, 20/08/2015 alle 03.22 -0700, Ari Jolma-2 [via OSGeo.org]
> ha scritto:
> >
> >
>
> > Hm. I'm guessing, you have
> >
> > %define gdal_dir         $HOME/linux-res-6.3/gdal
> >
> > and the error message is
> >
> > -6.3/gdal/lib/libgdal.so', needed by
> > 'backend/wbpublic/libwbpublic.so.6.3.4'.
>
> >> make[2]:
> *** No rule to make target '/root/linux-res -6.3/gdal/lib/libgdal.so',
> needed by 'backend/wbpublic/libwbpublic.so.6.3.4'.  Stop. <

ok, then, do you have the file /root/linux-res -6.3/gdal/lib/libgdal.so?

Ari

>
> m.
>
>
> ------------------------------------------------------------------------
> View this message in context: Re: Fedora 22, fatal error: 
> gdal/ogrsf_frmts.h: No such file or directory 
> <http://osgeo-org.1560.x6.nabble.com/Fedora-20-fatal-error-gdal-ogrsf-frmts-h-No-such-file-or-directory-tp5220370p5220423.html>
> Sent from the GDAL - Dev mailing list archive 
> <http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html> at 
> Nabble.com.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150820/07988e05/attachment.html>

From aperi2007 at gmail.com  Thu Aug 20 07:47:16 2015
From: aperi2007 at gmail.com (Andrea Peri)
Date: Thu, 20 Aug 2015 16:47:16 +0200
Subject: [gdal-dev] Calculate histogram using pyramids instead of tiff
Message-ID: <CABqTJk_0ZhURt9aNte9c4dMED-Nt8DvdBcQnDfsPQjwc=qkV8Q@mail.gmail.com>

Hi,

I need to retrieve the histogram of a set of rasters.
To do this I use the
gdalinfo for every raster using the parameter "-hist".

But this process take a long time because the rasters are huge and
have 11 bands each of them.

For my need the histogram informations should be sufficient at a
middle level pyramid.

So my question is if is possible with gdalinfo create the histogram
from an intermediate pyramid level.

Thx for any hints.


-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From even.rouault at spatialys.com  Thu Aug 20 07:48:13 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 20 Aug 2015 16:48:13 +0200
Subject: [gdal-dev] Regarding libkml driver
In-Reply-To: <55D5BE2C.8080303@xs4all.nl>
References: <CANNqv9e5LR_oQ9AVj9Kgr1AiSg4ASG0CSUY+tUXNHxQiDv0cVA@mail.gmail.com>
	<8994555.TqCugiCv4k@even-n550jk> <55D5BE2C.8080303@xs4all.nl>
Message-ID: <12417530.BmSKsLtJ32@even-n550jk>

On Thursday 20 August 2015 13:46:52 Sebastiaan Couwenberg wrote:
> On 02-08-15 21:05, Even Rouault wrote:
> > On 02-08-15 20:45, Rashad M wrote:
> >> No API changes. it make building and configuring libkml easier!
> >> 
> >> Correct me If I am wrong, I guess with a pkg-config would be easier to
> >> find
> >> and configure libkml libs.
> > 
> > Yes, that would probably be better. That said my experience with GDAL
> > configure --with-libkml has been good up to now. But having a pkg-config
> > script could simplify the current detection and configuration logic.
> 
> The current m4/ax_lib_libkml.m4 doesn't detect the new libkml because it
> still expects the thirdparty boost headers.
> 
> We should probably keep this as a fallback for the old libkml, but
> prefer pkgconfig if that's available as is the case for the new libkml.

Sounds good to me. 

> 
> As part of the ongoing GCC 5 transitions we've switched to the new
> libkml in Debian, with the geos & gdal transitions soon to follow, and
> gdal now builds without KML support because it doesn't detect the new
> libkml properly.
> 
> I'm working on a patch to try and support both the old Automake based &
> new CMake based libkml by adding support for libkml.pc.

Are there differences in the installed files from libkml whether you use 
automake or cmake ? Or did you mean that you're attempting to remove those 
differences ?

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu Aug 20 08:15:55 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 20 Aug 2015 17:15:55 +0200
Subject: [gdal-dev] Calculate histogram using pyramids instead of tiff
In-Reply-To: <CABqTJk_0ZhURt9aNte9c4dMED-Nt8DvdBcQnDfsPQjwc=qkV8Q@mail.gmail.com>
References: <CABqTJk_0ZhURt9aNte9c4dMED-Nt8DvdBcQnDfsPQjwc=qkV8Q@mail.gmail.com>
Message-ID: <3344291.e2UN8WVmWU@even-n550jk>

On Thursday 20 August 2015 16:47:16 Andrea Peri wrote:
> Hi,
> 
> I need to retrieve the histogram of a set of rasters.
> To do this I use the
> gdalinfo for every raster using the parameter "-hist".
> 
> But this process take a long time because the rasters are huge and
> have 11 bands each of them.
> 
> For my need the histogram informations should be sufficient at a
> middle level pyramid.
> 
> So my question is if is possible with gdalinfo create the histogram
> from an intermediate pyramid level.

Not directly. At the API level, it is possible to require for approximate 
histogram (and this will select a overview level that is close to 1 / 50 th of 
the original raster size.

Otherwise a trick would be to extract the desired overview level with 
gdal_translate -outsize (possibly as a VRT) and run gdalinfo -hist on it

> 
> Thx for any hints.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sebastic at xs4all.nl  Thu Aug 20 08:16:09 2015
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Thu, 20 Aug 2015 17:16:09 +0200
Subject: [gdal-dev] Regarding libkml driver
In-Reply-To: <12417530.BmSKsLtJ32@even-n550jk>
References: <CANNqv9e5LR_oQ9AVj9Kgr1AiSg4ASG0CSUY+tUXNHxQiDv0cVA@mail.gmail.com>
	<8994555.TqCugiCv4k@even-n550jk> <55D5BE2C.8080303@xs4all.nl>
	<12417530.BmSKsLtJ32@even-n550jk>
Message-ID: <55D5EF39.8090909@xs4all.nl>

On 20-08-15 16:48, Even Rouault wrote:
> On Thursday 20 August 2015 13:46:52 Sebastiaan Couwenberg wrote:
>> I'm working on a patch to try and support both the old Automake based &
>> new CMake based libkml by adding support for libkml.pc.
> 
> Are there differences in the installed files from libkml whether you use 
> automake or cmake ? Or did you mean that you're attempting to remove those 
> differences ?

Both are significant changes between the old and new libkml upstreams.

The old libkml that originated on code.google.com, and is now maintained
on github.com/google/libkml, uses Automake to build the libraries and
swig bindings. It relies on embedded copies of 3rd party libraries.

The new libkml that forked from code.google.com, and is now maintained
on github.com/libkml/libkml, uses CMake to build the libraries and swig
bindings. It prefers system installed copies of the 3rd party libraries,
but can also download the required versions to use during the build.

The changes for the third_party code in libkml/libkml fork is one of it
strong points. The switch from Automake to CMake also helped get rid of
patches required to keep Automake working with recent versions.

With the renewed activity around google/libkml with the new engineers
joining the project, I'm hopefull we can get the libkml/libkml changes
back into google/libkml. If libkml development remains active in
google/libkml the libkml/libkml fork won't be required anymore.

Until google/libkml becomes a viable alternative to libkml/libkml, I'm
using the latter as upstream for the libkml Debian package that is
primarily required for gdal.

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From aperi2007 at gmail.com  Thu Aug 20 09:18:28 2015
From: aperi2007 at gmail.com (aperi2007)
Date: Thu, 20 Aug 2015 18:18:28 +0200
Subject: [gdal-dev] Calculate histogram using pyramids instead of tiff
In-Reply-To: <3344291.e2UN8WVmWU@even-n550jk>
References: <CABqTJk_0ZhURt9aNte9c4dMED-Nt8DvdBcQnDfsPQjwc=qkV8Q@mail.gmail.com>
	<3344291.e2UN8WVmWU@even-n550jk>
Message-ID: <55D5FDD4.5000906@gmail.com>

Hi Even, thx for hint.

Is this possible using the python API ?

Thx ,

A.


Il 20/08/2015 17:15, Even Rouault ha scritto:
> Not directly. At the API level, it is possible to require for approximate
> histogram (and this will select a overview level that is close to 1 / 50 th of
> the original raster size.


From even.rouault at spatialys.com  Thu Aug 20 09:44:30 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 20 Aug 2015 18:44:30 +0200
Subject: [gdal-dev] Calculate histogram using pyramids instead of tiff
In-Reply-To: <55D5FDD4.5000906@gmail.com>
References: <CABqTJk_0ZhURt9aNte9c4dMED-Nt8DvdBcQnDfsPQjwc=qkV8Q@mail.gmail.com>
	<3344291.e2UN8WVmWU@even-n550jk> <55D5FDD4.5000906@gmail.com>
Message-ID: <3792738.Ok1mVPRkOl@even-n550jk>

On Thursday 20 August 2015 18:18:28 aperi2007 wrote:
> Hi Even, thx for hint.
> 
> Is this possible using the python API ?

Sure

ds.GetRasterBand(1).GetHistogram(approx_ok = 1)

Other keywords possible: min, max, buckets to define respectively the minimum 
value of the histogram, the maximum, and the number of buckets. Defaults are 
respectively -0.5, 255.5 and 256 (buckets have a width, hence the 0.5)

> 
> Thx ,
> 
> A.
> 
> Il 20/08/2015 17:15, Even Rouault ha scritto:
> > Not directly. At the API level, it is possible to require for approximate
> > histogram (and this will select a overview level that is close to 1 / 50
> > th of the original raster size.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From monshi2+nn at gmail.com  Thu Aug 20 11:43:16 2015
From: monshi2+nn at gmail.com (TomasR)
Date: Thu, 20 Aug 2015 20:43:16 +0200
Subject: [gdal-dev] RE : Gdal 2.0,
 supported raster/vector formats (RIK in particular)
In-Reply-To: <pfxagty65w1dur6gwpn9uucl.1440070184053@email.android.com>
References: <pfxagty65w1dur6gwpn9uucl.1440070184053@email.android.com>
Message-ID: <mr573q$t3b$1@ger.gmane.org>

Hi
This made me to try a bit more and found that gdal2 works with some 
files but not with other files.

This small file
https://www.dropbox.com/s/5k86qh3g24wrb8r/ab-del.rik?dl=0
gdalinfo.exe can read and give data about.

This file
https://www.dropbox.com/s/a2dlnvgy5ckxu5b/testkarta.rik?dl=0
which is a bit bigger (25 MB) gdalinfo cannot read. The same for my app 
in C#.


Yours
Tomas


Den 2015-08-20 kl. 13:29, skrev Even Rouault:
> RIK should be supported in 2.0 as well as in previous versions. could
> you share a file that no longer work?
>
>
> ---
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
>
> -------- Message d'origine --------
> De : TomasR <monshi2+nn at gmail.com>
> Date :20/08/2015 11:09 (GMT+01:00)
> ? : gdal-dev at lists.osgeo.org
> Cc :
> Objet : [gdal-dev] Gdal 2.0, supported raster/vector formats (RIK in
> particular)
>



From schwehr at gmail.com  Thu Aug 20 11:58:18 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 20 Aug 2015 11:58:18 -0700
Subject: [gdal-dev] autotest/ogr_mitab.py in trunk_mingw_w64
Message-ID: <CACmBxysTVVcOa8rfLo5f8mWPFuszCbfDzdPCjzLz9epgTsceXA@mail.gmail.com>

Even (or anyone else),

Any idea what is up with the trunk_mingw_w64 failures with ogr_mitab?  I'm
worried that I somehow caused this, but can't come up with how.

https://trac.osgeo.org/gdal/ticket/6076

-kurt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150820/d9f579dc/attachment.html>

From aperi2007 at gmail.com  Thu Aug 20 13:26:34 2015
From: aperi2007 at gmail.com (Andrea Peri)
Date: Thu, 20 Aug 2015 22:26:34 +0200
Subject: [gdal-dev] gdalinfo dont see the overview of tiffs listed in a
	virtual-datasource
Message-ID: <CABqTJk__6qyfizG3guQf1EKQ0JJpBs35HrJtd1H1DiWq9-FoOA@mail.gmail.com>

Hi,
I notice that the gdalinfo of a vrt datasource dont report the
overview or stats of a set of tiff (that have stats and overvies)
listed inside it.

Instead is I create an overview of the vrt himself it is reported by gdalinfo.

Is correct this or could be an issue ?

Thx.

-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From sebastic at xs4all.nl  Thu Aug 20 13:49:18 2015
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Thu, 20 Aug 2015 22:49:18 +0200
Subject: [gdal-dev] Regarding libkml driver
In-Reply-To: <55D5BE2C.8080303@xs4all.nl>
References: <CANNqv9e5LR_oQ9AVj9Kgr1AiSg4ASG0CSUY+tUXNHxQiDv0cVA@mail.gmail.com>
	<1724406.vKdNWo3mXU@even-n550jk>
	<CANNqv9ddN_wmPesmFNno_dLvXr9dfxHQNfu1kCUKVScJS4giTA@mail.gmail.com>
	<8994555.TqCugiCv4k@even-n550jk> <55D5BE2C.8080303@xs4all.nl>
Message-ID: <55D63D4E.8010905@xs4all.nl>

On 20-08-15 13:46, Sebastiaan Couwenberg wrote:
> I'm working on a patch to try and support both the old Automake based &
> new CMake based libkml by adding support for libkml.pc.

I've got a working patch for the Debian package, forwarded in:

https://trac.osgeo.org/gdal/ticket/6077

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From even.rouault at spatialys.com  Thu Aug 20 15:20:45 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 21 Aug 2015 00:20:45 +0200
Subject: [gdal-dev] gdalinfo dont see the overview of tiffs listed in a
	virtual-datasource
In-Reply-To: <CABqTJk__6qyfizG3guQf1EKQ0JJpBs35HrJtd1H1DiWq9-FoOA@mail.gmail.com>
References: <CABqTJk__6qyfizG3guQf1EKQ0JJpBs35HrJtd1H1DiWq9-FoOA@mail.gmail.com>
Message-ID: <2133369.oLYKtYs1ic@even-n550jk>

On Thursday 20 August 2015 22:26:34 Andrea Peri wrote:
> Hi,
> I notice that the gdalinfo of a vrt datasource dont report the
> overview or stats of a set of tiff (that have stats and overvies)
> listed inside it.
> 
> Instead is I create an overview of the vrt himself it is reported by
> gdalinfo.
> 
> Is correct this or could be an issue ?

Andrea,

In the general case, it would not be possible to expose overviews of a VRT 
made of several sources, or sources that are shifted, etc...

In trunk, in the particular case of a single source that is wraped in a VRT 
without any transform and has overviews, then the VRT will expose overviews.

Even

> 
> Thx.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu Aug 20 15:59:23 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 21 Aug 2015 00:59:23 +0200
Subject: [gdal-dev] autotest/ogr_mitab.py in trunk_mingw_w64
In-Reply-To: <CACmBxysTVVcOa8rfLo5f8mWPFuszCbfDzdPCjzLz9epgTsceXA@mail.gmail.com>
References: <CACmBxysTVVcOa8rfLo5f8mWPFuszCbfDzdPCjzLz9epgTsceXA@mail.gmail.com>
Message-ID: <1440111563.55d65bcb81bf2@imp.free.fr>

Selon Kurt Schwehr <schwehr at gmail.com>:

> Even (or anyone else),
>
> Any idea what is up with the trunk_mingw_w64 failures with ogr_mitab?  I'm
> worried that I somehow caused this, but can't come up with how.
>
> https://trac.osgeo.org/gdal/ticket/6076
>

Kurt,

My first thinking would have been that it is due to
https://trac.osgeo.org/gdal/changeset/29535#file15
since the random failures started to appear at that point

But
1) I don't see anything wrong in the changes in ogr_mitab.py
2) when running isolated under Valgrind, I get nothing interesting
3) the error appears randomly

All that combined makes me think that it might be due to the tests running in
different order from one run to another one due to files being listed in
different order from one git clone to another one ( the tests are run in
os.listdir() order )

So I think the issue is in another test that doesn't properly close a dataset
/ cleanup after itself and let a ghost file in autotest/ogr/tmp which causes
the mitab driver to fail to open it afterwards, due to the presence of a file
that might be detected by another driver. The fact that it is only seen on
mingw targets is likely due to an attempt of deleting a file which isn't closed
before.

The error is perhaps in r29535 elsewhere...
If you don't find it by review, perhaps you could a debug trace to list the
files in tmp/ at the beginning ogr_mitab_3 ? That should give a good hint of
the test that cause that issue.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gawade.oefp at gmail.com  Thu Aug 20 22:01:41 2015
From: gawade.oefp at gmail.com (Gawade P)
Date: Fri, 21 Aug 2015 10:31:41 +0530
Subject: [gdal-dev] Issue with gdalchksum on Fedora 21 ppc64le?
Message-ID: <CAPS4ckoC9SkGUCsZdvC53cSRrOaVHhNv-EHA8x9d-_Vb=KuqkA@mail.gmail.com>

 Hi All,

I am performing the following operation on a Fedora 21 ppc64le machine:

gdal_translate -of HF2 byte.tif byte.tif.tst

Here byte.tiff is TIFF image data
[root at pts0433-vm12 test]# file byte.tif
byte.tif: TIFF image data, little-endian, direntries=15, height=20,
bps=8, compression=none, PhotometricIntepretation=BlackIsZero,
width=20

The operation completes without issues.

However,
gdalchksum.py byte.tif
 gives me 4672

and
gdalchksum.py byte.tif.tst
give me 4716

I have installed gdal and gdal-python using the following rpm packages:
gdal-1.11.2-4.fc21.ppc64le.rpm
gdal-python-1.11.2-4.fc21.ppc64le.rpm

The above commands give the same output on Intel (x86) platform i.e. 4672.
Also, if I transfer the output file byte.tif.tst to an x86 machine, I
get the correct output, i.e. 4672.

Can anyone please guide me on what is the expected output

Thanks in advance!

From jamessramm at gmail.com  Fri Aug 21 08:29:26 2015
From: jamessramm at gmail.com (jramm)
Date: Fri, 21 Aug 2015 08:29:26 -0700 (PDT)
Subject: [gdal-dev] Where can I find ogr_FileGDB.dll v1.4 compilled for
	Windows?
In-Reply-To: <1440025543226-5220386.post@n6.nabble.com>
References: <1440025543226-5220386.post@n6.nabble.com>
Message-ID: <1440170966275-5220558.post@n6.nabble.com>

You can get full binary distributions for windows (including) ogr_FileGDB.dll
from http://www.gisinternals.com/
They dont seem to have it in msvc_1800 releases, but in 1700 and 1600.

You will also need the FileGDB API dll from ESRI. You can get this from the
ESRI website (you will need to register, but it is free)



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Where-can-I-find-ogr-FileGDB-dll-v1-4-compilled-for-Windows-tp5220386p5220558.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jamessramm at gmail.com  Fri Aug 21 08:32:09 2015
From: jamessramm at gmail.com (jramm)
Date: Fri, 21 Aug 2015 08:32:09 -0700 (PDT)
Subject: [gdal-dev] memory leak in gdal program
Message-ID: <1440171129495-5220559.post@n6.nabble.com>

I'm using GDAL 201 to iterate features in a geodatabase feature class and add
a new text field, whose value depends on the integer value in another
field.It gives a fairly large memory leak (approx 1GB for every 1m features
iterated). I'm not sure where the leak is....any ideas?The full code:int
main(int argc, char *argv[]){	// Get the input arguments	char *path =
argv[1];	char *layer = argv[2];	char *field = argv[3];	// Open the dataset
in update mode	GDALAllRegister();	GDALDatasetH hDS;	hDS = GDALOpenEx(path,
GDAL_OF_VECTOR | GDAL_OF_UPDATE , NULL, NULL, NULL);	if( hDS == NULL )	{	
printf( "Open failed.\n" );		exit( 1 );	}	// Get the layer	OGRLayerH hLayer;
hLayer = GDALDatasetGetLayerByName(hDS, layer);	OGRFeatureDefnH hFDefn =
OGR_L_GetLayerDefn(hLayer);	// Get the field index	int index =
OGR_FD_GetFieldIndex(hFDefn, field);	// Create the new field	OGRFieldDefnH
hFieldDefn;	hFieldDefn = OGR_Fld_Create("depth_band", OFTString);
OGR_Fld_SetWidth(hFieldDefn, 32);    if( OGR_L_CreateField( hLayer,
hFieldDefn, TRUE ) != OGRERR_NONE )    {        printf( "Creating depth_band
field failed.\n" );        exit( 1 );    }    OGR_Fld_Destroy(hFieldDefn);
int value; // Field value	char depth_band[32]; //New attribute	// Loop
through all features	OGRFeatureH hFeature;	OGR_L_ResetReading(hLayer);	int
count = 0;	while( (hFeature = OGR_L_GetNextFeature(hLayer)) != NULL)	{		//
Get the depth band value and map it to the depth band description text	
value = OGR_F_GetFieldAsInteger(hFeature, index);		switch(value){			case 1:			
depth_band = "x <= 0.3m";				break;			case 2:				depth_band = "0.3 < x <=
1m";				break;			case 3:				depth_band = "1 < x <= 3m";				break;			case 4:			
depth_band = "3 < x <= 6m";				break;			case 5:				depth_band = "6 < x <=
9m";				break;			case 6:				depth_band = "x > 9m";				break;		}		// Set the
new field value		OGR_F_SetFieldString(hFeature,
OGR_F_GetFieldIndex(hFeature, "depth_band"), depth_band);		count++;	
printf("%d features processed\r", count);	}	GDALClose(hDS);
printf("\nProcessing complete!\n");}



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/memory-leak-in-gdal-program-tp5220559.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150821/ba0f6fe2/attachment.html>

From even.rouault at spatialys.com  Fri Aug 21 10:51:39 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 21 Aug 2015 19:51:39 +0200
Subject: [gdal-dev] memory leak in gdal program
In-Reply-To: <1440171129495-5220559.post@n6.nabble.com>
References: <1440171129495-5220559.post@n6.nabble.com>
Message-ID: <201508211951.39253.even.rouault@spatialys.com>

Le vendredi 21 ao?t 2015 17:32:09, jramm a ?crit :
> I'm using GDAL 201 to iterate features in a geodatabase feature class and
> add a new text field, whose value depends on the integer value in another
> field.It gives a fairly large memory leak (approx 1GB for every 1m
> features iterated). I'm not sure where the leak is....any ideas?

Hi,

Yes, 2 things to add at the end of the loop:
- OGR_L_SetFeature(hLayer, hFeature) to actually update the feature
- OGR_F_Destroy(hFeature) to free the memory taken by the feature (will fix the 
memory leak)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Aug 21 13:27:21 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 21 Aug 2015 22:27:21 +0200
Subject: [gdal-dev] Issue with gdalchksum on Fedora 21 ppc64le?
In-Reply-To: <CAPS4ckoC9SkGUCsZdvC53cSRrOaVHhNv-EHA8x9d-_Vb=KuqkA@mail.gmail.com>
References: <CAPS4ckoC9SkGUCsZdvC53cSRrOaVHhNv-EHA8x9d-_Vb=KuqkA@mail.gmail.com>
Message-ID: <201508212227.21430.even.rouault@spatialys.com>

Le vendredi 21 ao?t 2015 07:01:41, Gawade P a ?crit :
>  Hi All,
> 
> I am performing the following operation on a Fedora 21 ppc64le machine:
> 
> gdal_translate -of HF2 byte.tif byte.tif.tst
> 
> Here byte.tiff is TIFF image data
> [root at pts0433-vm12 test]# file byte.tif
> byte.tif: TIFF image data, little-endian, direntries=15, height=20,
> bps=8, compression=none, PhotometricIntepretation=BlackIsZero,
> width=20
> 
> The operation completes without issues.
> 
> However,
> gdalchksum.py byte.tif
>  gives me 4672
> 
> and
> gdalchksum.py byte.tif.tst
> give me 4716
> 
> I have installed gdal and gdal-python using the following rpm packages:
> gdal-1.11.2-4.fc21.ppc64le.rpm
> gdal-python-1.11.2-4.fc21.ppc64le.rpm
> 
> The above commands give the same output on Intel (x86) platform i.e. 4672.
> Also, if I transfer the output file byte.tif.tst to an x86 machine, I
> get the correct output, i.e. 4672.
> 
> Can anyone please guide me on what is the expected output

In theory this should be 4672 on all platforms. The behaviour you get would 
mean that the writing side is OK on PPC64LE, but the reading side is not. 

The issue is probably in HF2RasterBand::IReadBlock() in 
frmts/hf2/hf2dataset.cpp if you want to give a try to debug it.

A quick way of having an overview of the differences would be to run the 
following on x86 and PPC64LE and compare out.asc:

gdal_translate byte.tif.tst out.asc -of aaigrid

> 
> Thanks in advance!
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Aug 21 13:30:35 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 21 Aug 2015 22:30:35 +0200
Subject: [gdal-dev] gdal test failures
In-Reply-To: <CAN+g16c3ja29uiVBigVpTE_XvPdu6GWqb2fmvM8m2e+Mgjg7YA@mail.gmail.com>
References: <CAN+g16fvPbOKJN+DzEqUrU1Ls9YuC2bPTDrt2DMFPS-msUqAdQ@mail.gmail.com>
	<CAN+g16c3ja29uiVBigVpTE_XvPdu6GWqb2fmvM8m2e+Mgjg7YA@mail.gmail.com>
Message-ID: <201508212230.35211.even.rouault@spatialys.com>

Le jeudi 20 ao?t 2015 06:34:42, Priya Seth a ?crit :
> I am getting the same issue when I run this command
> gdal_translate -of HF2 data/byte.tif data/byte.tif.tst
> Could this be some issue with translation from different formats to
> the HF2 format?

Hum is there a relationship in this report with 
https://lists.osgeo.org/pipermail/gdal-dev/2015-August/042427.html ?

Which architecture (x86, amd64, ... ) are you running ? Which compiler version 
?

Might be due to some subtle difference in floating point rounding.

> 
> Thanks!
> 
> On Thu, Aug 20, 2015 at 9:08 AM, Priya Seth <seth.osc at gmail.com> wrote:
> > Hi All,
> > 
> > I have built  gdal from source on RHEL 7.1  and when I run the
> > autotest, the following HF2 driver tests are failing:
> > Script: gdrivers/hf2.py
> > 
> >   TEST: hf2_1 ... fail
> >   
> >     line 506: Did not get expected checksum on still-open file.
> >     Got 4716 instead of 4672.
> >   
> >   TEST: hf2_2 ... fail
> >   
> >     line 506: Did not get expected checksum on still-open file.
> >     Got 4796 instead of 4672.
> >   
> >   TEST: hf2_4 ... fail
> >   
> >     line 506: Did not get expected checksum on still-open file.
> >     Got 44135 instead of 49187.
> > 
> > I have tried with multiple versions/branches of gdal, but I am still
> > getting the same issues.
> > Any suggestions on why this might be happening?
> > 
> > Thanks!
> > Priya
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Aug 21 14:00:48 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 21 Aug 2015 23:00:48 +0200
Subject: [gdal-dev] RE : Gdal 2.0,
	supported raster/vector formats (RIK in particular)
In-Reply-To: <mr573q$t3b$1@ger.gmane.org>
References: <pfxagty65w1dur6gwpn9uucl.1440070184053@email.android.com>
	<mr573q$t3b$1@ger.gmane.org>
Message-ID: <201508212300.48602.even.rouault@spatialys.com>

Tomas,

I confirm the issue for RIK v1 and RIK v2 datasets. RIK v3 were fine. I've filed 
https://trac.osgeo.org/gdal/ticket/6078 and committed a fix for trunk and 2.0 
branch to restore support for RIK v1 and v2.

Even

Le jeudi 20 ao?t 2015 20:43:16, TomasR a ?crit :
> Hi
> This made me to try a bit more and found that gdal2 works with some
> files but not with other files.
> 
> This small file
> https://www.dropbox.com/s/5k86qh3g24wrb8r/ab-del.rik?dl=0
> gdalinfo.exe can read and give data about.
> 
> This file
> https://www.dropbox.com/s/a2dlnvgy5ckxu5b/testkarta.rik?dl=0
> which is a bit bigger (25 MB) gdalinfo cannot read. The same for my app
> in C#.
> 
> 
> Yours
> Tomas
> 
> Den 2015-08-20 kl. 13:29, skrev Even Rouault:
> > RIK should be supported in 2.0 as well as in previous versions. could
> > you share a file that no longer work?
> > 
> > 
> > ---
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com
> > 
> > 
> > -------- Message d'origine --------
> > De : TomasR <monshi2+nn at gmail.com>
> > Date :20/08/2015 11:09 (GMT+01:00)
> > ? : gdal-dev at lists.osgeo.org
> > Cc :
> > Objet : [gdal-dev] Gdal 2.0, supported raster/vector formats (RIK in
> > particular)
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From paulopires16 at gmail.com  Fri Aug 21 15:00:00 2015
From: paulopires16 at gmail.com (paulopires16)
Date: Fri, 21 Aug 2015 15:00:00 -0700 (PDT)
Subject: [gdal-dev] Where can I find ogr_FileGDB.dll v1.4 compilled for
	Windows?
In-Reply-To: <1440170966275-5220558.post@n6.nabble.com>
References: <1440025543226-5220386.post@n6.nabble.com>
	<1440170966275-5220558.post@n6.nabble.com>
Message-ID: <1440194400842-5220606.post@n6.nabble.com>

Hello jramm

I cant see the *gdal-111-1800-filegdb.msi* option... they dont make it yet 



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Where-can-I-find-ogr-FileGDB-dll-v1-4-compilled-for-Windows-tp5220386p5220606.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From monshi2+nn at gmail.com  Sat Aug 22 00:31:26 2015
From: monshi2+nn at gmail.com (TomasR)
Date: Sat, 22 Aug 2015 09:31:26 +0200
Subject: [gdal-dev] RE : Gdal 2.0,
 supported raster/vector formats (RIK in particular)
In-Reply-To: <201508212300.48602.even.rouault@spatialys.com>
References: <pfxagty65w1dur6gwpn9uucl.1440070184053@email.android.com>
	<mr573q$t3b$1@ger.gmane.org>
	<201508212300.48602.even.rouault@spatialys.com>
Message-ID: <mr98gd$bbt$1@ger.gmane.org>

Ok

I will remove the files above since they are protected by copyrights 
(still, I think).

Yours
Tomas

Den 2015-08-21 kl. 23:00, skrev Even Rouault:
> Tomas,
>
> I confirm the issue for RIK v1 and RIK v2 datasets. RIK v3 were fine. I've filed
> https://trac.osgeo.org/gdal/ticket/6078 and committed a fix for trunk and 2.0
> branch to restore support for RIK v1 and v2.
>
> Even
>




From paulopires16 at gmail.com  Sat Aug 22 03:44:53 2015
From: paulopires16 at gmail.com (paulopires16)
Date: Sat, 22 Aug 2015 03:44:53 -0700 (PDT)
Subject: [gdal-dev] Where can I find ogr_FileGDB.dll v1.4 compilled for
	Windows?
In-Reply-To: <1440194400842-5220606.post@n6.nabble.com>
References: <1440025543226-5220386.post@n6.nabble.com>
	<1440170966275-5220558.post@n6.nabble.com>
	<1440194400842-5220606.post@n6.nabble.com>
Message-ID: <1440240293612-5220627.post@n6.nabble.com>

I ask them if they can do it 



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Where-can-I-find-ogr-FileGDB-dll-v1-4-compilled-for-Windows-tp5220386p5220627.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From aperi2007 at gmail.com  Sat Aug 22 22:43:03 2015
From: aperi2007 at gmail.com (Andrea Peri)
Date: Sun, 23 Aug 2015 07:43:03 +0200
Subject: [gdal-dev] The vrt datasource from gdalbuildvrt report a wrong
	block of 128x128
Message-ID: <CABqTJk-UxzaDUf6UnGKKrAGQ2Ap7akn6dpekCt8sBe5RCZPHZg@mail.gmail.com>

Hi,
I have a tiff tiled with tile size 1024 x 1024.

When I try to build a vrt-datasource on it using the gdalbuildvrt.
I see the result vrt file report a
block of 128x128 instead of 1024x1024.

I dont know if this is correct by the gdalbuildvrt oint of view

Also I like to know if is preferrably to correct manually  the vrt
result to report the right value 1024
or is also acceptable to maintain the 128 size reported for the right
work of the gdal utilities in the vrt file.

Thx,


-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From even.rouault at spatialys.com  Sun Aug 23 01:51:36 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 23 Aug 2015 10:51:36 +0200
Subject: [gdal-dev] The vrt datasource from gdalbuildvrt report a wrong
	block of 128x128
In-Reply-To: <CABqTJk-UxzaDUf6UnGKKrAGQ2Ap7akn6dpekCt8sBe5RCZPHZg@mail.gmail.com>
References: <CABqTJk-UxzaDUf6UnGKKrAGQ2Ap7akn6dpekCt8sBe5RCZPHZg@mail.gmail.com>
Message-ID: <201508231051.37188.even.rouault@spatialys.com>

Le dimanche 23 ao?t 2015 07:43:03, Andrea Peri a ?crit :
> Hi,
> I have a tiff tiled with tile size 1024 x 1024.
> 
> When I try to build a vrt-datasource on it using the gdalbuildvrt.
> I see the result vrt file report a
> block of 128x128 instead of 1024x1024.
> 
> I dont know if this is correct by the gdalbuildvrt oint of view
> 
> Also I like to know if is preferrably to correct manually  the vrt
> result to report the right value 1024
> or is also acceptable to maintain the 128 size reported for the right
> work of the gdal utilities in the vrt file.

Andrea,

the 128x128 block size is currently hardcoded in the VRT driver. We could 
imagine extending the VRT syntax to have user defined block size.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From aperi2007 at gmail.com  Sun Aug 23 02:28:21 2015
From: aperi2007 at gmail.com (Andrea Peri)
Date: Sun, 23 Aug 2015 11:28:21 +0200
Subject: [gdal-dev] The vrt datasource from gdalbuildvrt report a wrong
 block of 128x128
In-Reply-To: <201508231051.37188.even.rouault@spatialys.com>
References: <CABqTJk-UxzaDUf6UnGKKrAGQ2Ap7akn6dpekCt8sBe5RCZPHZg@mail.gmail.com>
	<201508231051.37188.even.rouault@spatialys.com>
Message-ID: <CABqTJk-o_3r0HgvLCUd8cNNP3ThcGtR1K3RUGP63hpCm_1mbQw@mail.gmail.com>

Hi Even,
thx for reply.

So actually a tiff born to be used with vrt datasource be better if
you was with a tile=128x128 instead of tile=1024x1024
 right ?

A.


2015-08-23 10:51 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:
> Le dimanche 23 ao?t 2015 07:43:03, Andrea Peri a ?crit :
>> Hi,
>> I have a tiff tiled with tile size 1024 x 1024.
>>
>> When I try to build a vrt-datasource on it using the gdalbuildvrt.
>> I see the result vrt file report a
>> block of 128x128 instead of 1024x1024.
>>
>> I dont know if this is correct by the gdalbuildvrt oint of view
>>
>> Also I like to know if is preferrably to correct manually  the vrt
>> result to report the right value 1024
>> or is also acceptable to maintain the 128 size reported for the right
>> work of the gdal utilities in the vrt file.
>
> Andrea,
>
> the 128x128 block size is currently hardcoded in the VRT driver. We could
> imagine extending the VRT syntax to have user defined block size.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com



-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From even.rouault at spatialys.com  Sun Aug 23 02:40:08 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 23 Aug 2015 11:40:08 +0200
Subject: [gdal-dev] The vrt datasource from gdalbuildvrt report a wrong
	block of 128x128
In-Reply-To: <CABqTJk-o_3r0HgvLCUd8cNNP3ThcGtR1K3RUGP63hpCm_1mbQw@mail.gmail.com>
References: <CABqTJk-UxzaDUf6UnGKKrAGQ2Ap7akn6dpekCt8sBe5RCZPHZg@mail.gmail.com>
	<201508231051.37188.even.rouault@spatialys.com>
	<CABqTJk-o_3r0HgvLCUd8cNNP3ThcGtR1K3RUGP63hpCm_1mbQw@mail.gmail.com>
Message-ID: <201508231140.08903.even.rouault@spatialys.com>

Le dimanche 23 ao?t 2015 11:28:21, Andrea Peri a ?crit :
> Hi Even,
> thx for reply.
> 
> So actually a tiff born to be used with vrt datasource be better if
> you was with a tile=128x128 instead of tile=1024x1024
>  right ?

I guess that should help in most cases, but almost due to the reduced tile 
size than the matching between TIFF and VRT block size. For example, if the 
VRT is read by an algorithm that processes line by line, a reduced tile size 
will cause less data to be read.
Increasing GDAL_CACHEMAX can also be an alternative

> 
> A.
> 
> 2015-08-23 10:51 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:
> > Le dimanche 23 ao?t 2015 07:43:03, Andrea Peri a ?crit :
> >> Hi,
> >> I have a tiff tiled with tile size 1024 x 1024.
> >> 
> >> When I try to build a vrt-datasource on it using the gdalbuildvrt.
> >> I see the result vrt file report a
> >> block of 128x128 instead of 1024x1024.
> >> 
> >> I dont know if this is correct by the gdalbuildvrt oint of view
> >> 
> >> Also I like to know if is preferrably to correct manually  the vrt
> >> result to report the right value 1024
> >> or is also acceptable to maintain the 128 size reported for the right
> >> work of the gdal utilities in the vrt file.
> > 
> > Andrea,
> > 
> > the 128x128 block size is currently hardcoded in the VRT driver. We could
> > imagine extending the VRT syntax to have user defined block size.
> > 
> > Even
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From aperi2007 at gmail.com  Sun Aug 23 05:18:03 2015
From: aperi2007 at gmail.com (Andrea Peri)
Date: Sun, 23 Aug 2015 14:18:03 +0200
Subject: [gdal-dev] The vrt datasource from gdalbuildvrt report a wrong
 block of 128x128
In-Reply-To: <201508231140.08903.even.rouault@spatialys.com>
References: <CABqTJk-UxzaDUf6UnGKKrAGQ2Ap7akn6dpekCt8sBe5RCZPHZg@mail.gmail.com>
	<201508231051.37188.even.rouault@spatialys.com>
	<CABqTJk-o_3r0HgvLCUd8cNNP3ThcGtR1K3RUGP63hpCm_1mbQw@mail.gmail.com>
	<201508231140.08903.even.rouault@spatialys.com>
Message-ID: <CABqTJk94Y1AqhoYQrTjxfDHGKuXEt+-J-ma6HQPoaadpryBOrg@mail.gmail.com>

Hi Even,

I just notice that in the page
http://www.gdal.org/gdalinfo.html

In the sample reported is write a bloc size of 512x16:

>Band 1 Block=512x16 Type=Byte, ColorInterp=Gray

Should it be a typo error ?

A.


2015-08-23 11:40 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:
> Le dimanche 23 ao?t 2015 11:28:21, Andrea Peri a ?crit :
>> Hi Even,
>> thx for reply.
>>
>> So actually a tiff born to be used with vrt datasource be better if
>> you was with a tile=128x128 instead of tile=1024x1024
>>  right ?
>
> I guess that should help in most cases, but almost due to the reduced tile
> size than the matching between TIFF and VRT block size. For example, if the
> VRT is read by an algorithm that processes line by line, a reduced tile size
> will cause less data to be read.
> Increasing GDAL_CACHEMAX can also be an alternative
>
>>
>> A.
>>
>> 2015-08-23 10:51 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:
>> > Le dimanche 23 ao?t 2015 07:43:03, Andrea Peri a ?crit :
>> >> Hi,
>> >> I have a tiff tiled with tile size 1024 x 1024.
>> >>
>> >> When I try to build a vrt-datasource on it using the gdalbuildvrt.
>> >> I see the result vrt file report a
>> >> block of 128x128 instead of 1024x1024.
>> >>
>> >> I dont know if this is correct by the gdalbuildvrt oint of view
>> >>
>> >> Also I like to know if is preferrably to correct manually  the vrt
>> >> result to report the right value 1024
>> >> or is also acceptable to maintain the 128 size reported for the right
>> >> work of the gdal utilities in the vrt file.
>> >
>> > Andrea,
>> >
>> > the 128x128 block size is currently hardcoded in the VRT driver. We could
>> > imagine extending the VRT syntax to have user defined block size.
>> >
>> > Even
>> >
>> > --
>> > Spatialys - Geospatial professional services
>> > http://www.spatialys.com
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com



-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From even.rouault at spatialys.com  Sun Aug 23 05:26:38 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 23 Aug 2015 14:26:38 +0200
Subject: [gdal-dev] The vrt datasource from gdalbuildvrt report a wrong
	block of 128x128
In-Reply-To: <CABqTJk94Y1AqhoYQrTjxfDHGKuXEt+-J-ma6HQPoaadpryBOrg@mail.gmail.com>
References: <CABqTJk-UxzaDUf6UnGKKrAGQ2Ap7akn6dpekCt8sBe5RCZPHZg@mail.gmail.com>
	<201508231140.08903.even.rouault@spatialys.com>
	<CABqTJk94Y1AqhoYQrTjxfDHGKuXEt+-J-ma6HQPoaadpryBOrg@mail.gmail.com>
Message-ID: <201508231426.39007.even.rouault@spatialys.com>

Le dimanche 23 ao?t 2015 14:18:03, Andrea Peri a ?crit :
> Hi Even,
> 
> I just notice that in the page
> http://www.gdal.org/gdalinfo.html
> 
> In the sample reported is write a bloc size of 512x16:
> >Band 1 Block=512x16 Type=Byte, ColorInterp=Gray
> 
> Should it be a typo error ?

There's no typo. It is a TIFF with strip organization since the block width is 
the raster width.

There are various shapes of blocks :
- rectangular (typically square) blocks. e.g a tiled TIFF
- blocks whose width is the raster width. e.g. a stripped TIFF
- blocks whose height is the raster height. This is far less common, but 
occurs in some formats like DTED.

> 
> A.
> 
> 2015-08-23 11:40 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:
> > Le dimanche 23 ao?t 2015 11:28:21, Andrea Peri a ?crit :
> >> Hi Even,
> >> thx for reply.
> >> 
> >> So actually a tiff born to be used with vrt datasource be better if
> >> you was with a tile=128x128 instead of tile=1024x1024
> >> 
> >>  right ?
> > 
> > I guess that should help in most cases, but almost due to the reduced
> > tile size than the matching between TIFF and VRT block size. For
> > example, if the VRT is read by an algorithm that processes line by line,
> > a reduced tile size will cause less data to be read.
> > Increasing GDAL_CACHEMAX can also be an alternative
> > 
> >> A.
> >> 
> >> 2015-08-23 10:51 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:
> >> > Le dimanche 23 ao?t 2015 07:43:03, Andrea Peri a ?crit :
> >> >> Hi,
> >> >> I have a tiff tiled with tile size 1024 x 1024.
> >> >> 
> >> >> When I try to build a vrt-datasource on it using the gdalbuildvrt.
> >> >> I see the result vrt file report a
> >> >> block of 128x128 instead of 1024x1024.
> >> >> 
> >> >> I dont know if this is correct by the gdalbuildvrt oint of view
> >> >> 
> >> >> Also I like to know if is preferrably to correct manually  the vrt
> >> >> result to report the right value 1024
> >> >> or is also acceptable to maintain the 128 size reported for the right
> >> >> work of the gdal utilities in the vrt file.
> >> > 
> >> > Andrea,
> >> > 
> >> > the 128x128 block size is currently hardcoded in the VRT driver. We
> >> > could imagine extending the VRT syntax to have user defined block
> >> > size.
> >> > 
> >> > Even
> >> > 
> >> > --
> >> > Spatialys - Geospatial professional services
> >> > http://www.spatialys.com
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gawade.oefp at gmail.com  Sun Aug 23 20:16:50 2015
From: gawade.oefp at gmail.com (Gawade P)
Date: Mon, 24 Aug 2015 08:46:50 +0530
Subject: [gdal-dev] Issue with gdalchksum on Fedora 21 ppc64le?
In-Reply-To: <201508212227.21430.even.rouault@spatialys.com>
References: <CAPS4ckoC9SkGUCsZdvC53cSRrOaVHhNv-EHA8x9d-_Vb=KuqkA@mail.gmail.com>
	<201508212227.21430.even.rouault@spatialys.com>
Message-ID: <CAPS4ckqZTPFi-80fWzUaO+nK0i4ZPOmq67LoUF7T8Pb84etYOQ@mail.gmail.com>

Thanks a lot for you response Even
out.asc is clearly different on the two platforms (x86 and ppc64le).

On x86 the content is as follows:
ncols        20
nrows        20
xllcorner    440720.000000000000
yllcorner    3750120.000000000000
cellsize     60.000000000000
 107 123 132 115 132 132 140 132 132 132 107 132 107 132 132 107 123 115 156 148
 115 132 107 123 148 115 165 115 140 107 123 123 99 132 123 132 132 132 99 156
 115 132 140 132 123 115 140 107 140 115 132 123 107 132 132 115 115 107 115 107
 148 132 123 123 115 132 132 123 115 123 115 123 107 115 148 107 115 140 115 132
 132 156 132 140 132 132 115 115 115 123 148 123 165 123 132 107 107 132 156 123
 189 173 173 148 148 115 148 123 107 132 115 132 156 99 123 115 132 132 206 107
 197 173 148 140 140 132 99 132 123 115 140 132 132 99 132 123 132 173 123 115
 148 123 148 115 148 123 140 123 107 115 132 115 107 115 99 123 99 181 99 107
 123 115 132 115 123 132 115 132 132 123 123 132 99 115 99 123 132 115 115 107
 140 140 99 140 99 115 123 107 132 107 115 107 115 123 132 123 107 123 132 132
 132 132 132 123 99 132 123 107 148 99 115 123 140 173 123 107 123 123 123 107
 123 123 123 107 140 123 123 115 115 90 107 173 107 107 107 107 99 132 123 115
 173 148 99 123 123 107 123 99 107 189 173 107 115 115 107 99 140 107 173 140
 148 132 132 107 123 99 99 115 99 132 99 140 115 148 123 99 132 123 148 140
 140 107 140 90 107 115 107 90 99 123 115 115 115 123 123 148 115 148 99 132
 165 148 156 123 107 107 107 115 140 99 115 99 99 107 115 132 115 90 123 115
 189 173 140 140 165 115 132 90 99 115 90 99 99 107 99 132 99 107 132 132
 156 181 140 173 123 132 99 115 123 74 115 99 123 140 156 132 165 140 140 99
 173 247 255 206 132 107 140 123 148 132 165 165 148 140 132 123 107 123 107 123
 181 181 156 148 156 156 156 181 132 148 115 132 107 107 107 107 107 115 99 107

On ppc64le:
ncols        20
nrows        20
xllcorner    440720.000000000000
yllcorner    3750120.000000000000
cellsize     60.000000000000
 107 123 132 371 388 388 396 644 644 644 875 900 1131 1156 1156 1387
1403 1651 1692 1940
 115 132 363 379 404 627 677 883 908 1131 1147 1147 1379 1412 1659
1668 1668 1668 1891 1948
 115 132 140 388 635 883 908 1131 1164 1395 1412 1659 1899 1924 1924
2163 2163 2411 2419 2667
 148 388 635 635 883 900 900 1147 1395 1403 1651 1659 1899 1907 1940
2155 2163 2188 2419 2436
 132 156 388 396 644 644 883 883 883 891 916 1147 1189 1403 1412 1643
1643 1668 1692 1915
 189 429 429 660 660 883 916 1147 1387 1412 1651 1668 1692 1891 1915
2163 2180 2180 2254 2411
 197 429 660 908 908 1156 1379 1412 1659 1907 1932 2180 2180 2403 2436
2683 2692 2733 2939 3187
 148 379 404 627 660 891 908 1147 1387 1395 1412 1651 1899 1907 2147
2171 2403 2485 2659 2667
 123 371 388 627 635 644 883 900 900 1147 1147 1156 1379 1395 1635
1659 1668 1907 1907 2155
 140 140 355 396 611 627 635 875 900 1131 1139 1387 1395 1403 1412
1659 1899 1915 1924 1924
 132 132 132 379 611 644 891 1131 1172 1379 1395 1403 1420 1453 1659
1899 1915 1915 1915 2155
 123 123 123 363 396 635 635 883 883 1114 1131 1197 1387 1387 1387
1387 1635 1668 1915 2163
 173 404 611 635 635 875 891 1123 1131 1213 1453 1643 1651 1651 1899
2147 2188 2411 2477 2700
 148 388 388 619 635 867 867 883 1123 1156 1379 1420 1651 1684 1915
2147 2180 2427 2452 2700
 140 363 396 602 619 627 875 1114 1123 1147 1395 1395 1395 1403 1403
1428 1651 1684 1891 1924
 165 404 412 635 875 875 875 883 908 1123 1139 1379 1379 1387 1395
1412 1651 1882 1915 2163
 189 429 652 652 677 883 900 1114 1123 1139 1370 1379 1379 1387 1635
1668 1891 1899 1924 1924
 156 181 396 429 635 644 867 883 891 1098 1139 1379 1403 1420 1436
1668 1701 1932 1932 2147
 173 247 255 462 644 875 908 1147 1172 1412 1445 1445 1684 1932 2180
2427 2667 2683 2923 2939
 181 181 412 660 668 668 668 693 900 916 1139 1156 1387 1387 1387 1387
1387 1395 1635 1643

I will try to dig into this more. Thanks!

On Sat, Aug 22, 2015 at 1:57 AM, Even Rouault
<even.rouault at spatialys.com> wrote:
> Le vendredi 21 ao?t 2015 07:01:41, Gawade P a ?crit :
>>  Hi All,
>>
>> I am performing the following operation on a Fedora 21 ppc64le machine:
>>
>> gdal_translate -of HF2 byte.tif byte.tif.tst
>>
>> Here byte.tiff is TIFF image data
>> [root at pts0433-vm12 test]# file byte.tif
>> byte.tif: TIFF image data, little-endian, direntries=15, height=20,
>> bps=8, compression=none, PhotometricIntepretation=BlackIsZero,
>> width=20
>>
>> The operation completes without issues.
>>
>> However,
>> gdalchksum.py byte.tif
>>  gives me 4672
>>
>> and
>> gdalchksum.py byte.tif.tst
>> give me 4716
>>
>> I have installed gdal and gdal-python using the following rpm packages:
>> gdal-1.11.2-4.fc21.ppc64le.rpm
>> gdal-python-1.11.2-4.fc21.ppc64le.rpm
>>
>> The above commands give the same output on Intel (x86) platform i.e. 4672.
>> Also, if I transfer the output file byte.tif.tst to an x86 machine, I
>> get the correct output, i.e. 4672.
>>
>> Can anyone please guide me on what is the expected output
>
> In theory this should be 4672 on all platforms. The behaviour you get would
> mean that the writing side is OK on PPC64LE, but the reading side is not.
>
> The issue is probably in HF2RasterBand::IReadBlock() in
> frmts/hf2/hf2dataset.cpp if you want to give a try to debug it.
>
> A quick way of having an overview of the differences would be to run the
> following on x86 and PPC64LE and compare out.asc:
>
> gdal_translate byte.tif.tst out.asc -of aaigrid
>
>>
>> Thanks in advance!
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From mike.manning at ewn.com.au  Sun Aug 23 21:35:53 2015
From: mike.manning at ewn.com.au (Mike Manning)
Date: Mon, 24 Aug 2015 14:35:53 +1000
Subject: [gdal-dev] gdal2tile
Message-ID: <003701d0de26$5e1fcbd0$1a5f6370$@ewn.com.au>

Hi guys,

 

I've got an interesting one - I have some GeoTIFF Files that I've converted
to EPSG:3857 from GeoStationary as follows:

 

# gdalwarp -tr 2000 2000 -co tfw=yes -t_srs epsg:3857 -te 10018754.17
-7361866.11 20037508.34 -0.00
/storage/sat_data/20150824/IDE00422.201508240100.tif
/storage/tmp/IDE00422.201508240100.tif

 

Using gdalinfo reveals the following about the newly created GeoTIFF file:

 

# gdalinfo IDE00422.201508240100.tif

Driver: GTiff/GeoTIFF

Files: IDE00422.201508240100.tif

Size is 5009, 3681

Coordinate System is:

PROJCS["WGS 84 / Pseudo-Mercator",

    GEOGCS["WGS 84",

        DATUM["WGS_1984",

            SPHEROID["WGS 84",6378137,298.257223563,

                AUTHORITY["EPSG","7030"]],

            AUTHORITY["EPSG","6326"]],

        PRIMEM["Greenwich",0],

        UNIT["degree",0.0174532925199433],

        AUTHORITY["EPSG","4326"]],

    PROJECTION["Mercator_1SP"],

    PARAMETER["central_meridian",0],

    PARAMETER["scale_factor",1],

    PARAMETER["false_easting",0],

    PARAMETER["false_northing",0],

    UNIT["metre",1,

        AUTHORITY["EPSG","9001"]],

    EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0
+lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext
+no_defs"],

    AUTHORITY["EPSG","3857"]]

Origin = (10018754.169999999925494,0.000000000000000)

Pixel Size = (2000.000000000000000,-2000.000000000000000)

Metadata:

  AREA_OR_POINT=Area

Image Structure Metadata:

  INTERLEAVE=BAND

Corner Coordinates:

Upper Left  (10018754.170,       0.000) ( 90d 0' 0.00"E,  0d 0' 0.01"N)

Lower Left  (10018754.170,-7362000.000) ( 90d 0' 0.00"E, 55d 0' 2.48"S)

Upper Right (20036754.170,       0.000) (179d59'35.61"E,  0d 0' 0.01"N)

Lower Right (20036754.170,-7362000.000) (179d59'35.61"E, 55d 0' 2.48"S)

Center      (15027754.170,-3681000.000) (134d59'47.81"E, 31d22'14.91"S)

Band 1 Block=5009x1 Type=Byte, ColorInterp=Gray

 

It looks like the map has the correct coordinates however when I run the
gdal2tiles program it errors out:

 

gdal2tiles.py -k -g <api_key> IDE00422.201508240100.tif mercour

 

ERROR 6: EPSG PCS/GCS code 900913 not found in EPSG support files.  Is this
a valid

EPSG coordinate system?

ERROR 6: No translation for an empty SRS to PROJ.4 format is known.

ERROR 6: No translation for an empty SRS to PROJ.4 format is known.

Generating Base Tiles:

ERROR 5: Illegal values for buffer size

ERROR 5: Illegal values for buffer size

Traceback (most recent call last):

  File "/usr/bin/gdal2tiles.py", line 2262, in <module>

    gdal2tiles.process()

  File "/usr/bin/gdal2tiles.py", line 478, in process

    self.generate_base_tiles()

  File "/usr/bin/gdal2tiles.py", line 1276, in generate_base_tiles

    dsquery.WriteRaster(wx, wy, wxsize, wysize, data,
band_list=list(range(1,self.dataBandsCount+1)))

  File "/usr/lib/python2.7/dist-packages/osgeo/gdal.py", line 796, in
WriteRaster

    buf_pixel_space, buf_line_space, buf_band_space )

TypeError: not a string

 

I'm running "GDAL 1.10.1, released 2013/08/26" on Debian Jessie.  I've read
that version 1.6 had this issue as it didn't know what EPSG:3857 is but I'm
running 1.10 so it can't be that.

 

Cheers, Mike

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150824/5f0ef8c1/attachment.html>

From even.rouault at spatialys.com  Mon Aug 24 00:48:25 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 24 Aug 2015 09:48:25 +0200
Subject: [gdal-dev] Issue with gdalchksum on Fedora 21 ppc64le?
In-Reply-To: <CAPS4ckqZTPFi-80fWzUaO+nK0i4ZPOmq67LoUF7T8Pb84etYOQ@mail.gmail.com>
References: <CAPS4ckoC9SkGUCsZdvC53cSRrOaVHhNv-EHA8x9d-_Vb=KuqkA@mail.gmail.com>
	<201508212227.21430.even.rouault@spatialys.com>
	<CAPS4ckqZTPFi-80fWzUaO+nK0i4ZPOmq67LoUF7T8Pb84etYOQ@mail.gmail.com>
Message-ID: <201508240948.25744.even.rouault@spatialys.com>

Hi,

Looking at the first difference, 371 - 115 = 256. Those gaps of +256 appear each 
time a value at col n+1 is lesser than the value at col n (when looking the 
reference x86 data). Knowing that HF2 data is delta encoded and that for this 
row the delta between consecutive values is in the [-128,127] range, so 
elligible for 1 byte delta encoding, I think I've found the issue. Apparently 
(according to https://ajax.fedorapeople.org/is-char-signed-or-not.txt), "char" 
on ppc (and other platforms) is "unsigned char", whereas it is "signed char" 
on x86...

Could you try changing line 201 from :
                        nVal += ((char*)pabyData)[i-1];
to
                        nVal += ((signed char*)pabyData)[i-1];


For clarity, on the encoding side, lines 963 and 1032 that have
                            char chDiff = (char)nDiff;
should be changed to
                            signed char chDiff = (signed char)nDiff;
Although in that case, it apparently doesn't make difference on the end result.

I wouldn't be surprised that similar issues would appear elsewhere in the code 
base.

Even

Le lundi 24 ao?t 2015 05:16:50, vous avez ?crit :
> Thanks a lot for you response Even
> out.asc is clearly different on the two platforms (x86 and ppc64le).
> 
> On x86 the content is as follows:
> ncols        20
> nrows        20
> xllcorner    440720.000000000000
> yllcorner    3750120.000000000000
> cellsize     60.000000000000
>  107 123 132 115 132 132 140 132 132 132 107 132 107 132 132 107 123 115
> 156 148 115 132 107 123 148 115 165 115 140 107 123 123 99 132 123 132 132
> 132 99 156 115 132 140 132 123 115 140 107 140 115 132 123 107 132 132 115
> 115 107 115 107 148 132 123 123 115 132 132 123 115 123 115 123 107 115
> 148 107 115 140 115 132 132 156 132 140 132 132 115 115 115 123 148 123
> 165 123 132 107 107 132 156 123 189 173 173 148 148 115 148 123 107 132
> 115 132 156 99 123 115 132 132 206 107 197 173 148 140 140 132 99 132 123
> 115 140 132 132 99 132 123 132 173 123 115 148 123 148 115 148 123 140 123
> 107 115 132 115 107 115 99 123 99 181 99 107 123 115 132 115 123 132 115
> 132 132 123 123 132 99 115 99 123 132 115 115 107 140 140 99 140 99 115
> 123 107 132 107 115 107 115 123 132 123 107 123 132 132 132 132 132 123 99
> 132 123 107 148 99 115 123 140 173 123 107 123 123 123 107 123 123 123 107
> 140 123 123 115 115 90 107 173 107 107 107 107 99 132 123 115 173 148 99
> 123 123 107 123 99 107 189 173 107 115 115 107 99 140 107 173 140 148 132
> 132 107 123 99 99 115 99 132 99 140 115 148 123 99 132 123 148 140 140 107
> 140 90 107 115 107 90 99 123 115 115 115 123 123 148 115 148 99 132 165
> 148 156 123 107 107 107 115 140 99 115 99 99 107 115 132 115 90 123 115
> 189 173 140 140 165 115 132 90 99 115 90 99 99 107 99 132 99 107 132 132
> 156 181 140 173 123 132 99 115 123 74 115 99 123 140 156 132 165 140 140
> 99 173 247 255 206 132 107 140 123 148 132 165 165 148 140 132 123 107 123
> 107 123 181 181 156 148 156 156 156 181 132 148 115 132 107 107 107 107
> 107 115 99 107
> 
> On ppc64le:
> ncols        20
> nrows        20
> xllcorner    440720.000000000000
> yllcorner    3750120.000000000000
> cellsize     60.000000000000
>  107 123 132 371 388 388 396 644 644 644 875 900 1131 1156 1156 1387
> 1403 1651 1692 1940
>  115 132 363 379 404 627 677 883 908 1131 1147 1147 1379 1412 1659
> 1668 1668 1668 1891 1948
>  115 132 140 388 635 883 908 1131 1164 1395 1412 1659 1899 1924 1924
> 2163 2163 2411 2419 2667
>  148 388 635 635 883 900 900 1147 1395 1403 1651 1659 1899 1907 1940
> 2155 2163 2188 2419 2436
>  132 156 388 396 644 644 883 883 883 891 916 1147 1189 1403 1412 1643
> 1643 1668 1692 1915
>  189 429 429 660 660 883 916 1147 1387 1412 1651 1668 1692 1891 1915
> 2163 2180 2180 2254 2411
>  197 429 660 908 908 1156 1379 1412 1659 1907 1932 2180 2180 2403 2436
> 2683 2692 2733 2939 3187
>  148 379 404 627 660 891 908 1147 1387 1395 1412 1651 1899 1907 2147
> 2171 2403 2485 2659 2667
>  123 371 388 627 635 644 883 900 900 1147 1147 1156 1379 1395 1635
> 1659 1668 1907 1907 2155
>  140 140 355 396 611 627 635 875 900 1131 1139 1387 1395 1403 1412
> 1659 1899 1915 1924 1924
>  132 132 132 379 611 644 891 1131 1172 1379 1395 1403 1420 1453 1659
> 1899 1915 1915 1915 2155
>  123 123 123 363 396 635 635 883 883 1114 1131 1197 1387 1387 1387
> 1387 1635 1668 1915 2163
>  173 404 611 635 635 875 891 1123 1131 1213 1453 1643 1651 1651 1899
> 2147 2188 2411 2477 2700
>  148 388 388 619 635 867 867 883 1123 1156 1379 1420 1651 1684 1915
> 2147 2180 2427 2452 2700
>  140 363 396 602 619 627 875 1114 1123 1147 1395 1395 1395 1403 1403
> 1428 1651 1684 1891 1924
>  165 404 412 635 875 875 875 883 908 1123 1139 1379 1379 1387 1395
> 1412 1651 1882 1915 2163
>  189 429 652 652 677 883 900 1114 1123 1139 1370 1379 1379 1387 1635
> 1668 1891 1899 1924 1924
>  156 181 396 429 635 644 867 883 891 1098 1139 1379 1403 1420 1436
> 1668 1701 1932 1932 2147
>  173 247 255 462 644 875 908 1147 1172 1412 1445 1445 1684 1932 2180
> 2427 2667 2683 2923 2939
>  181 181 412 660 668 668 668 693 900 916 1139 1156 1387 1387 1387 1387
> 1387 1395 1635 1643
> 
> I will try to dig into this more. Thanks!
> 
> On Sat, Aug 22, 2015 at 1:57 AM, Even Rouault
> 
> <even.rouault at spatialys.com> wrote:
> > Le vendredi 21 ao?t 2015 07:01:41, Gawade P a ?crit :
> >>  Hi All,
> >> 
> >> I am performing the following operation on a Fedora 21 ppc64le machine:
> >> 
> >> gdal_translate -of HF2 byte.tif byte.tif.tst
> >> 
> >> Here byte.tiff is TIFF image data
> >> [root at pts0433-vm12 test]# file byte.tif
> >> byte.tif: TIFF image data, little-endian, direntries=15, height=20,
> >> bps=8, compression=none, PhotometricIntepretation=BlackIsZero,
> >> width=20
> >> 
> >> The operation completes without issues.
> >> 
> >> However,
> >> gdalchksum.py byte.tif
> >> 
> >>  gives me 4672
> >> 
> >> and
> >> gdalchksum.py byte.tif.tst
> >> give me 4716
> >> 
> >> I have installed gdal and gdal-python using the following rpm packages:
> >> gdal-1.11.2-4.fc21.ppc64le.rpm
> >> gdal-python-1.11.2-4.fc21.ppc64le.rpm
> >> 
> >> The above commands give the same output on Intel (x86) platform i.e.
> >> 4672. Also, if I transfer the output file byte.tif.tst to an x86
> >> machine, I get the correct output, i.e. 4672.
> >> 
> >> Can anyone please guide me on what is the expected output
> > 
> > In theory this should be 4672 on all platforms. The behaviour you get
> > would mean that the writing side is OK on PPC64LE, but the reading side
> > is not.
> > 
> > The issue is probably in HF2RasterBand::IReadBlock() in
> > frmts/hf2/hf2dataset.cpp if you want to give a try to debug it.
> > 
> > A quick way of having an overview of the differences would be to run the
> > following on x86 and PPC64LE and compare out.asc:
> > 
> > gdal_translate byte.tif.tst out.asc -of aaigrid
> > 
> >> Thanks in advance!
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Aug 24 01:04:04 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 24 Aug 2015 10:04:04 +0200
Subject: [gdal-dev] gdal2tile
In-Reply-To: <003701d0de26$5e1fcbd0$1a5f6370$@ewn.com.au>
References: <003701d0de26$5e1fcbd0$1a5f6370$@ewn.com.au>
Message-ID: <201508241004.04605.even.rouault@spatialys.com>

Le lundi 24 ao?t 2015 06:35:53, Mike Manning a ?crit :
> Hi guys,
> 
> 
> 
> I've got an interesting one - I have some GeoTIFF Files that I've converted
> to EPSG:3857 from GeoStationary as follows:
> 
> 
> 
> # gdalwarp -tr 2000 2000 -co tfw=yes -t_srs epsg:3857 -te 10018754.17
> -7361866.11 20037508.34 -0.00
> /storage/sat_data/20150824/IDE00422.201508240100.tif
> /storage/tmp/IDE00422.201508240100.tif
> 
> 
> 
> Using gdalinfo reveals the following about the newly created GeoTIFF file:
> 
> 
> 
> # gdalinfo IDE00422.201508240100.tif
> 
> Driver: GTiff/GeoTIFF
> 
> Files: IDE00422.201508240100.tif
> 
> Size is 5009, 3681
> 
> Coordinate System is:
> 
> PROJCS["WGS 84 / Pseudo-Mercator",
> 
>     GEOGCS["WGS 84",
> 
>         DATUM["WGS_1984",
> 
>             SPHEROID["WGS 84",6378137,298.257223563,
> 
>                 AUTHORITY["EPSG","7030"]],
> 
>             AUTHORITY["EPSG","6326"]],
> 
>         PRIMEM["Greenwich",0],
> 
>         UNIT["degree",0.0174532925199433],
> 
>         AUTHORITY["EPSG","4326"]],
> 
>     PROJECTION["Mercator_1SP"],
> 
>     PARAMETER["central_meridian",0],
> 
>     PARAMETER["scale_factor",1],
> 
>     PARAMETER["false_easting",0],
> 
>     PARAMETER["false_northing",0],
> 
>     UNIT["metre",1,
> 
>         AUTHORITY["EPSG","9001"]],
> 
>     EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0
> +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext
> +no_defs"],
> 
>     AUTHORITY["EPSG","3857"]]
> 
> Origin = (10018754.169999999925494,0.000000000000000)
> 
> Pixel Size = (2000.000000000000000,-2000.000000000000000)
> 
> Metadata:
> 
>   AREA_OR_POINT=Area
> 
> Image Structure Metadata:
> 
>   INTERLEAVE=BAND
> 
> Corner Coordinates:
> 
> Upper Left  (10018754.170,       0.000) ( 90d 0' 0.00"E,  0d 0' 0.01"N)
> 
> Lower Left  (10018754.170,-7362000.000) ( 90d 0' 0.00"E, 55d 0' 2.48"S)
> 
> Upper Right (20036754.170,       0.000) (179d59'35.61"E,  0d 0' 0.01"N)
> 
> Lower Right (20036754.170,-7362000.000) (179d59'35.61"E, 55d 0' 2.48"S)
> 
> Center      (15027754.170,-3681000.000) (134d59'47.81"E, 31d22'14.91"S)
> 
> Band 1 Block=5009x1 Type=Byte, ColorInterp=Gray
> 
> 
> 
> It looks like the map has the correct coordinates however when I run the
> gdal2tiles program it errors out:
> 
> 
> 
> gdal2tiles.py -k -g <api_key> IDE00422.201508240100.tif mercour
> 
> 
> 
> ERROR 6: EPSG PCS/GCS code 900913 not found in EPSG support files.  Is this
> a valid
> 
> EPSG coordinate system?
> 
> ERROR 6: No translation for an empty SRS to PROJ.4 format is known.
> 
> ERROR 6: No translation for an empty SRS to PROJ.4 format is known.
> 
> Generating Base Tiles:
> 
> ERROR 5: Illegal values for buffer size
> 
> ERROR 5: Illegal values for buffer size
> 
> Traceback (most recent call last):
> 
>   File "/usr/bin/gdal2tiles.py", line 2262, in <module>
> 
>     gdal2tiles.process()
> 
>   File "/usr/bin/gdal2tiles.py", line 478, in process
> 
>     self.generate_base_tiles()
> 
>   File "/usr/bin/gdal2tiles.py", line 1276, in generate_base_tiles
> 
>     dsquery.WriteRaster(wx, wy, wxsize, wysize, data,
> band_list=list(range(1,self.dataBandsCount+1)))
> 
>   File "/usr/lib/python2.7/dist-packages/osgeo/gdal.py", line 796, in
> WriteRaster
> 
>     buf_pixel_space, buf_line_space, buf_band_space )
> 
> TypeError: not a string
> 
> 
> 
> I'm running "GDAL 1.10.1, released 2013/08/26" on Debian Jessie.  I've read
> that version 1.6 had this issue as it didn't know what EPSG:3857 is but I'm
> running 1.10 so it can't be that.

Mike,

apparently this is due to Debian packaging of GDAL where one ressource file 
that contains the definition of EPSG:900913 has been removed. See
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=745702 and confirmed by 
https://packages.debian.org/jessie/i386/libgdal1h/filelist

2 possible workarounds :
- download https://svn.osgeo.org/gdal/trunk/gdal/data/cubewerx_extra.wkt and 
copy it to /usr/share/gdal/1.10 so as to get 900913
- edit /usr/bin/gdal2tiles.py and replace all occurences of 900913 by 3857

Even

> 
> 
> 
> Cheers, Mike

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Mon Aug 24 01:11:54 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Mon, 24 Aug 2015 08:11:54 +0000 (UTC)
Subject: [gdal-dev] gdal2tile
References: <003701d0de26$5e1fcbd0$1a5f6370$@ewn.com.au>
	<201508241004.04605.even.rouault@spatialys.com>
Message-ID: <loom.20150824T100852-22@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:


> 
> 2 possible workarounds :
> - download https://svn.osgeo.org/gdal/trunk/gdal/data/cubewerx_extra.wkt and 
> copy it to /usr/share/gdal/1.10 so as to get 900913
> - edit /usr/bin/gdal2tiles.py and replace all occurences of 900913 by 3857

Hi,

Wouldn't it be time to bury 900913 permenently? There is also an open ticket
about that https://trac.osgeo.org/gdal/ticket/5622

-Jukka Rahkonen-






From jrepetto at free.fr  Mon Aug 24 01:28:38 2015
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon, 24 Aug 2015 10:28:38 +0200
Subject: [gdal-dev] gdal2tile
In-Reply-To: <loom.20150824T100852-22@post.gmane.org>
References: <003701d0de26$5e1fcbd0$1a5f6370$@ewn.com.au>
	<201508241004.04605.even.rouault@spatialys.com>
	<loom.20150824T100852-22@post.gmane.org>
Message-ID: <55DAD5B6.2020104@free.fr>

Le 2015-08-24 10:11, Jukka Rahkonen a ?crit :

> 
> Wouldn't it be time to bury 900913 permenently? There is also an open 
> ticket
> about that https://trac.osgeo.org/gdal/ticket/5622
> 
> -Jukka Rahkonen-
> 

+1

Jean-Claude

From gawade.oefp at gmail.com  Mon Aug 24 01:58:49 2015
From: gawade.oefp at gmail.com (Gawade P)
Date: Mon, 24 Aug 2015 14:28:49 +0530
Subject: [gdal-dev] Issue with gdalchksum on Fedora 21 ppc64le?
In-Reply-To: <201508240948.25744.even.rouault@spatialys.com>
References: <CAPS4ckoC9SkGUCsZdvC53cSRrOaVHhNv-EHA8x9d-_Vb=KuqkA@mail.gmail.com>
	<201508212227.21430.even.rouault@spatialys.com>
	<CAPS4ckqZTPFi-80fWzUaO+nK0i4ZPOmq67LoUF7T8Pb84etYOQ@mail.gmail.com>
	<201508240948.25744.even.rouault@spatialys.com>
Message-ID: <CAPS4ckofihZ2UTCjgRoRYnzXQmQ0CGtZ7N607sd=MgGF04mgqg@mail.gmail.com>

Thanks, Even!
This change solved the issue I was seeing. Appreciate your help on this!

On Mon, Aug 24, 2015 at 1:18 PM, Even Rouault
<even.rouault at spatialys.com> wrote:
> Hi,
>
> Looking at the first difference, 371 - 115 = 256. Those gaps of +256 appear each
> time a value at col n+1 is lesser than the value at col n (when looking the
> reference x86 data). Knowing that HF2 data is delta encoded and that for this
> row the delta between consecutive values is in the [-128,127] range, so
> elligible for 1 byte delta encoding, I think I've found the issue. Apparently
> (according to https://ajax.fedorapeople.org/is-char-signed-or-not.txt), "char"
> on ppc (and other platforms) is "unsigned char", whereas it is "signed char"
> on x86...
>
> Could you try changing line 201 from :
>                         nVal += ((char*)pabyData)[i-1];
> to
>                         nVal += ((signed char*)pabyData)[i-1];
>
>
> For clarity, on the encoding side, lines 963 and 1032 that have
>                             char chDiff = (char)nDiff;
> should be changed to
>                             signed char chDiff = (signed char)nDiff;
> Although in that case, it apparently doesn't make difference on the end result.
>
> I wouldn't be surprised that similar issues would appear elsewhere in the code
> base.
>
> Even
>
> Le lundi 24 ao?t 2015 05:16:50, vous avez ?crit :
>> Thanks a lot for you response Even
>> out.asc is clearly different on the two platforms (x86 and ppc64le).
>>
>> On x86 the content is as follows:
>> ncols        20
>> nrows        20
>> xllcorner    440720.000000000000
>> yllcorner    3750120.000000000000
>> cellsize     60.000000000000
>>  107 123 132 115 132 132 140 132 132 132 107 132 107 132 132 107 123 115
>> 156 148 115 132 107 123 148 115 165 115 140 107 123 123 99 132 123 132 132
>> 132 99 156 115 132 140 132 123 115 140 107 140 115 132 123 107 132 132 115
>> 115 107 115 107 148 132 123 123 115 132 132 123 115 123 115 123 107 115
>> 148 107 115 140 115 132 132 156 132 140 132 132 115 115 115 123 148 123
>> 165 123 132 107 107 132 156 123 189 173 173 148 148 115 148 123 107 132
>> 115 132 156 99 123 115 132 132 206 107 197 173 148 140 140 132 99 132 123
>> 115 140 132 132 99 132 123 132 173 123 115 148 123 148 115 148 123 140 123
>> 107 115 132 115 107 115 99 123 99 181 99 107 123 115 132 115 123 132 115
>> 132 132 123 123 132 99 115 99 123 132 115 115 107 140 140 99 140 99 115
>> 123 107 132 107 115 107 115 123 132 123 107 123 132 132 132 132 132 123 99
>> 132 123 107 148 99 115 123 140 173 123 107 123 123 123 107 123 123 123 107
>> 140 123 123 115 115 90 107 173 107 107 107 107 99 132 123 115 173 148 99
>> 123 123 107 123 99 107 189 173 107 115 115 107 99 140 107 173 140 148 132
>> 132 107 123 99 99 115 99 132 99 140 115 148 123 99 132 123 148 140 140 107
>> 140 90 107 115 107 90 99 123 115 115 115 123 123 148 115 148 99 132 165
>> 148 156 123 107 107 107 115 140 99 115 99 99 107 115 132 115 90 123 115
>> 189 173 140 140 165 115 132 90 99 115 90 99 99 107 99 132 99 107 132 132
>> 156 181 140 173 123 132 99 115 123 74 115 99 123 140 156 132 165 140 140
>> 99 173 247 255 206 132 107 140 123 148 132 165 165 148 140 132 123 107 123
>> 107 123 181 181 156 148 156 156 156 181 132 148 115 132 107 107 107 107
>> 107 115 99 107
>>
>> On ppc64le:
>> ncols        20
>> nrows        20
>> xllcorner    440720.000000000000
>> yllcorner    3750120.000000000000
>> cellsize     60.000000000000
>>  107 123 132 371 388 388 396 644 644 644 875 900 1131 1156 1156 1387
>> 1403 1651 1692 1940
>>  115 132 363 379 404 627 677 883 908 1131 1147 1147 1379 1412 1659
>> 1668 1668 1668 1891 1948
>>  115 132 140 388 635 883 908 1131 1164 1395 1412 1659 1899 1924 1924
>> 2163 2163 2411 2419 2667
>>  148 388 635 635 883 900 900 1147 1395 1403 1651 1659 1899 1907 1940
>> 2155 2163 2188 2419 2436
>>  132 156 388 396 644 644 883 883 883 891 916 1147 1189 1403 1412 1643
>> 1643 1668 1692 1915
>>  189 429 429 660 660 883 916 1147 1387 1412 1651 1668 1692 1891 1915
>> 2163 2180 2180 2254 2411
>>  197 429 660 908 908 1156 1379 1412 1659 1907 1932 2180 2180 2403 2436
>> 2683 2692 2733 2939 3187
>>  148 379 404 627 660 891 908 1147 1387 1395 1412 1651 1899 1907 2147
>> 2171 2403 2485 2659 2667
>>  123 371 388 627 635 644 883 900 900 1147 1147 1156 1379 1395 1635
>> 1659 1668 1907 1907 2155
>>  140 140 355 396 611 627 635 875 900 1131 1139 1387 1395 1403 1412
>> 1659 1899 1915 1924 1924
>>  132 132 132 379 611 644 891 1131 1172 1379 1395 1403 1420 1453 1659
>> 1899 1915 1915 1915 2155
>>  123 123 123 363 396 635 635 883 883 1114 1131 1197 1387 1387 1387
>> 1387 1635 1668 1915 2163
>>  173 404 611 635 635 875 891 1123 1131 1213 1453 1643 1651 1651 1899
>> 2147 2188 2411 2477 2700
>>  148 388 388 619 635 867 867 883 1123 1156 1379 1420 1651 1684 1915
>> 2147 2180 2427 2452 2700
>>  140 363 396 602 619 627 875 1114 1123 1147 1395 1395 1395 1403 1403
>> 1428 1651 1684 1891 1924
>>  165 404 412 635 875 875 875 883 908 1123 1139 1379 1379 1387 1395
>> 1412 1651 1882 1915 2163
>>  189 429 652 652 677 883 900 1114 1123 1139 1370 1379 1379 1387 1635
>> 1668 1891 1899 1924 1924
>>  156 181 396 429 635 644 867 883 891 1098 1139 1379 1403 1420 1436
>> 1668 1701 1932 1932 2147
>>  173 247 255 462 644 875 908 1147 1172 1412 1445 1445 1684 1932 2180
>> 2427 2667 2683 2923 2939
>>  181 181 412 660 668 668 668 693 900 916 1139 1156 1387 1387 1387 1387
>> 1387 1395 1635 1643
>>
>> I will try to dig into this more. Thanks!
>>
>> On Sat, Aug 22, 2015 at 1:57 AM, Even Rouault
>>
>> <even.rouault at spatialys.com> wrote:
>> > Le vendredi 21 ao?t 2015 07:01:41, Gawade P a ?crit :
>> >>  Hi All,
>> >>
>> >> I am performing the following operation on a Fedora 21 ppc64le machine:
>> >>
>> >> gdal_translate -of HF2 byte.tif byte.tif.tst
>> >>
>> >> Here byte.tiff is TIFF image data
>> >> [root at pts0433-vm12 test]# file byte.tif
>> >> byte.tif: TIFF image data, little-endian, direntries=15, height=20,
>> >> bps=8, compression=none, PhotometricIntepretation=BlackIsZero,
>> >> width=20
>> >>
>> >> The operation completes without issues.
>> >>
>> >> However,
>> >> gdalchksum.py byte.tif
>> >>
>> >>  gives me 4672
>> >>
>> >> and
>> >> gdalchksum.py byte.tif.tst
>> >> give me 4716
>> >>
>> >> I have installed gdal and gdal-python using the following rpm packages:
>> >> gdal-1.11.2-4.fc21.ppc64le.rpm
>> >> gdal-python-1.11.2-4.fc21.ppc64le.rpm
>> >>
>> >> The above commands give the same output on Intel (x86) platform i.e.
>> >> 4672. Also, if I transfer the output file byte.tif.tst to an x86
>> >> machine, I get the correct output, i.e. 4672.
>> >>
>> >> Can anyone please guide me on what is the expected output
>> >
>> > In theory this should be 4672 on all platforms. The behaviour you get
>> > would mean that the writing side is OK on PPC64LE, but the reading side
>> > is not.
>> >
>> > The issue is probably in HF2RasterBand::IReadBlock() in
>> > frmts/hf2/hf2dataset.cpp if you want to give a try to debug it.
>> >
>> > A quick way of having an overview of the differences would be to run the
>> > following on x86 and PPC64LE and compare out.asc:
>> >
>> > gdal_translate byte.tif.tst out.asc -of aaigrid
>> >
>> >> Thanks in advance!
>> >> _______________________________________________
>> >> gdal-dev mailing list
>> >> gdal-dev at lists.osgeo.org
>> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>> > --
>> > Spatialys - Geospatial professional services
>> > http://www.spatialys.com
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From even.rouault at spatialys.com  Mon Aug 24 02:02:09 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 24 Aug 2015 11:02:09 +0200
Subject: [gdal-dev] Issue with gdalchksum on Fedora 21 ppc64le?
In-Reply-To: <CAPS4ckofihZ2UTCjgRoRYnzXQmQ0CGtZ7N607sd=MgGF04mgqg@mail.gmail.com>
References: <CAPS4ckoC9SkGUCsZdvC53cSRrOaVHhNv-EHA8x9d-_Vb=KuqkA@mail.gmail.com>
	<201508240948.25744.even.rouault@spatialys.com>
	<CAPS4ckofihZ2UTCjgRoRYnzXQmQ0CGtZ7N607sd=MgGF04mgqg@mail.gmail.com>
Message-ID: <201508241102.09914.even.rouault@spatialys.com>

Le lundi 24 ao?t 2015 10:58:49, Gawade P a ?crit :
> Thanks, Even!
> This change solved the issue I was seeing. Appreciate your help on this!

Great. Could you please file a ticket about that on 
https://trac.osgeo.org/gdal/newticket ?

> 
> On Mon, Aug 24, 2015 at 1:18 PM, Even Rouault
> 
> <even.rouault at spatialys.com> wrote:
> > Hi,
> > 
> > Looking at the first difference, 371 - 115 = 256. Those gaps of +256
> > appear each time a value at col n+1 is lesser than the value at col n
> > (when looking the reference x86 data). Knowing that HF2 data is delta
> > encoded and that for this row the delta between consecutive values is in
> > the [-128,127] range, so elligible for 1 byte delta encoding, I think
> > I've found the issue. Apparently (according to
> > https://ajax.fedorapeople.org/is-char-signed-or-not.txt), "char" on ppc
> > (and other platforms) is "unsigned char", whereas it is "signed char" on
> > x86...
> > 
> > Could you try changing line 201 from :
> >                         nVal += ((char*)pabyData)[i-1];
> > 
> > to
> > 
> >                         nVal += ((signed char*)pabyData)[i-1];
> > 
> > For clarity, on the encoding side, lines 963 and 1032 that have
> > 
> >                             char chDiff = (char)nDiff;
> > 
> > should be changed to
> > 
> >                             signed char chDiff = (signed char)nDiff;
> > 
> > Although in that case, it apparently doesn't make difference on the end
> > result.
> > 
> > I wouldn't be surprised that similar issues would appear elsewhere in the
> > code base.
> > 
> > Even
> > 
> > Le lundi 24 ao?t 2015 05:16:50, vous avez ?crit :
> >> Thanks a lot for you response Even
> >> out.asc is clearly different on the two platforms (x86 and ppc64le).
> >> 
> >> On x86 the content is as follows:
> >> ncols        20
> >> nrows        20
> >> xllcorner    440720.000000000000
> >> yllcorner    3750120.000000000000
> >> cellsize     60.000000000000
> >> 
> >>  107 123 132 115 132 132 140 132 132 132 107 132 107 132 132 107 123 115
> >> 
> >> 156 148 115 132 107 123 148 115 165 115 140 107 123 123 99 132 123 132
> >> 132 132 99 156 115 132 140 132 123 115 140 107 140 115 132 123 107 132
> >> 132 115 115 107 115 107 148 132 123 123 115 132 132 123 115 123 115 123
> >> 107 115 148 107 115 140 115 132 132 156 132 140 132 132 115 115 115 123
> >> 148 123 165 123 132 107 107 132 156 123 189 173 173 148 148 115 148 123
> >> 107 132 115 132 156 99 123 115 132 132 206 107 197 173 148 140 140 132
> >> 99 132 123 115 140 132 132 99 132 123 132 173 123 115 148 123 148 115
> >> 148 123 140 123 107 115 132 115 107 115 99 123 99 181 99 107 123 115
> >> 132 115 123 132 115 132 132 123 123 132 99 115 99 123 132 115 115 107
> >> 140 140 99 140 99 115 123 107 132 107 115 107 115 123 132 123 107 123
> >> 132 132 132 132 132 123 99 132 123 107 148 99 115 123 140 173 123 107
> >> 123 123 123 107 123 123 123 107 140 123 123 115 115 90 107 173 107 107
> >> 107 107 99 132 123 115 173 148 99 123 123 107 123 99 107 189 173 107
> >> 115 115 107 99 140 107 173 140 148 132 132 107 123 99 99 115 99 132 99
> >> 140 115 148 123 99 132 123 148 140 140 107 140 90 107 115 107 90 99 123
> >> 115 115 115 123 123 148 115 148 99 132 165 148 156 123 107 107 107 115
> >> 140 99 115 99 99 107 115 132 115 90 123 115 189 173 140 140 165 115 132
> >> 90 99 115 90 99 99 107 99 132 99 107 132 132 156 181 140 173 123 132 99
> >> 115 123 74 115 99 123 140 156 132 165 140 140 99 173 247 255 206 132
> >> 107 140 123 148 132 165 165 148 140 132 123 107 123 107 123 181 181 156
> >> 148 156 156 156 181 132 148 115 132 107 107 107 107 107 115 99 107
> >> 
> >> On ppc64le:
> >> ncols        20
> >> nrows        20
> >> xllcorner    440720.000000000000
> >> yllcorner    3750120.000000000000
> >> cellsize     60.000000000000
> >> 
> >>  107 123 132 371 388 388 396 644 644 644 875 900 1131 1156 1156 1387
> >> 
> >> 1403 1651 1692 1940
> >> 
> >>  115 132 363 379 404 627 677 883 908 1131 1147 1147 1379 1412 1659
> >> 
> >> 1668 1668 1668 1891 1948
> >> 
> >>  115 132 140 388 635 883 908 1131 1164 1395 1412 1659 1899 1924 1924
> >> 
> >> 2163 2163 2411 2419 2667
> >> 
> >>  148 388 635 635 883 900 900 1147 1395 1403 1651 1659 1899 1907 1940
> >> 
> >> 2155 2163 2188 2419 2436
> >> 
> >>  132 156 388 396 644 644 883 883 883 891 916 1147 1189 1403 1412 1643
> >> 
> >> 1643 1668 1692 1915
> >> 
> >>  189 429 429 660 660 883 916 1147 1387 1412 1651 1668 1692 1891 1915
> >> 
> >> 2163 2180 2180 2254 2411
> >> 
> >>  197 429 660 908 908 1156 1379 1412 1659 1907 1932 2180 2180 2403 2436
> >> 
> >> 2683 2692 2733 2939 3187
> >> 
> >>  148 379 404 627 660 891 908 1147 1387 1395 1412 1651 1899 1907 2147
> >> 
> >> 2171 2403 2485 2659 2667
> >> 
> >>  123 371 388 627 635 644 883 900 900 1147 1147 1156 1379 1395 1635
> >> 
> >> 1659 1668 1907 1907 2155
> >> 
> >>  140 140 355 396 611 627 635 875 900 1131 1139 1387 1395 1403 1412
> >> 
> >> 1659 1899 1915 1924 1924
> >> 
> >>  132 132 132 379 611 644 891 1131 1172 1379 1395 1403 1420 1453 1659
> >> 
> >> 1899 1915 1915 1915 2155
> >> 
> >>  123 123 123 363 396 635 635 883 883 1114 1131 1197 1387 1387 1387
> >> 
> >> 1387 1635 1668 1915 2163
> >> 
> >>  173 404 611 635 635 875 891 1123 1131 1213 1453 1643 1651 1651 1899
> >> 
> >> 2147 2188 2411 2477 2700
> >> 
> >>  148 388 388 619 635 867 867 883 1123 1156 1379 1420 1651 1684 1915
> >> 
> >> 2147 2180 2427 2452 2700
> >> 
> >>  140 363 396 602 619 627 875 1114 1123 1147 1395 1395 1395 1403 1403
> >> 
> >> 1428 1651 1684 1891 1924
> >> 
> >>  165 404 412 635 875 875 875 883 908 1123 1139 1379 1379 1387 1395
> >> 
> >> 1412 1651 1882 1915 2163
> >> 
> >>  189 429 652 652 677 883 900 1114 1123 1139 1370 1379 1379 1387 1635
> >> 
> >> 1668 1891 1899 1924 1924
> >> 
> >>  156 181 396 429 635 644 867 883 891 1098 1139 1379 1403 1420 1436
> >> 
> >> 1668 1701 1932 1932 2147
> >> 
> >>  173 247 255 462 644 875 908 1147 1172 1412 1445 1445 1684 1932 2180
> >> 
> >> 2427 2667 2683 2923 2939
> >> 
> >>  181 181 412 660 668 668 668 693 900 916 1139 1156 1387 1387 1387 1387
> >> 
> >> 1387 1395 1635 1643
> >> 
> >> I will try to dig into this more. Thanks!
> >> 
> >> On Sat, Aug 22, 2015 at 1:57 AM, Even Rouault
> >> 
> >> <even.rouault at spatialys.com> wrote:
> >> > Le vendredi 21 ao?t 2015 07:01:41, Gawade P a ?crit :
> >> >>  Hi All,
> >> >> 
> >> >> I am performing the following operation on a Fedora 21 ppc64le
> >> >> machine:
> >> >> 
> >> >> gdal_translate -of HF2 byte.tif byte.tif.tst
> >> >> 
> >> >> Here byte.tiff is TIFF image data
> >> >> [root at pts0433-vm12 test]# file byte.tif
> >> >> byte.tif: TIFF image data, little-endian, direntries=15, height=20,
> >> >> bps=8, compression=none, PhotometricIntepretation=BlackIsZero,
> >> >> width=20
> >> >> 
> >> >> The operation completes without issues.
> >> >> 
> >> >> However,
> >> >> gdalchksum.py byte.tif
> >> >> 
> >> >>  gives me 4672
> >> >> 
> >> >> and
> >> >> gdalchksum.py byte.tif.tst
> >> >> give me 4716
> >> >> 
> >> >> I have installed gdal and gdal-python using the following rpm
> >> >> packages: gdal-1.11.2-4.fc21.ppc64le.rpm
> >> >> gdal-python-1.11.2-4.fc21.ppc64le.rpm
> >> >> 
> >> >> The above commands give the same output on Intel (x86) platform i.e.
> >> >> 4672. Also, if I transfer the output file byte.tif.tst to an x86
> >> >> machine, I get the correct output, i.e. 4672.
> >> >> 
> >> >> Can anyone please guide me on what is the expected output
> >> > 
> >> > In theory this should be 4672 on all platforms. The behaviour you get
> >> > would mean that the writing side is OK on PPC64LE, but the reading
> >> > side is not.
> >> > 
> >> > The issue is probably in HF2RasterBand::IReadBlock() in
> >> > frmts/hf2/hf2dataset.cpp if you want to give a try to debug it.
> >> > 
> >> > A quick way of having an overview of the differences would be to run
> >> > the following on x86 and PPC64LE and compare out.asc:
> >> > 
> >> > gdal_translate byte.tif.tst out.asc -of aaigrid
> >> > 
> >> >> Thanks in advance!
> >> >> _______________________________________________
> >> >> gdal-dev mailing list
> >> >> gdal-dev at lists.osgeo.org
> >> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >> > 
> >> > --
> >> > Spatialys - Geospatial professional services
> >> > http://www.spatialys.com
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gawade.oefp at gmail.com  Mon Aug 24 02:35:58 2015
From: gawade.oefp at gmail.com (Gawade P)
Date: Mon, 24 Aug 2015 15:05:58 +0530
Subject: [gdal-dev] Issue with gdalchksum on Fedora 21 ppc64le?
In-Reply-To: <201508241102.09914.even.rouault@spatialys.com>
References: <CAPS4ckoC9SkGUCsZdvC53cSRrOaVHhNv-EHA8x9d-_Vb=KuqkA@mail.gmail.com>
	<201508240948.25744.even.rouault@spatialys.com>
	<CAPS4ckofihZ2UTCjgRoRYnzXQmQ0CGtZ7N607sd=MgGF04mgqg@mail.gmail.com>
	<201508241102.09914.even.rouault@spatialys.com>
Message-ID: <CAPS4ckq_GapLycDgL9TO1DJnf1KdBshkdkGmRX=MGqGYFxKe=g@mail.gmail.com>

Raised ticket at: https://trac.osgeo.org/gdal/ticket/6082#ticket

On Mon, Aug 24, 2015 at 2:32 PM, Even Rouault
<even.rouault at spatialys.com> wrote:
> Le lundi 24 ao?t 2015 10:58:49, Gawade P a ?crit :
>> Thanks, Even!
>> This change solved the issue I was seeing. Appreciate your help on this!
>
> Great. Could you please file a ticket about that on
> https://trac.osgeo.org/gdal/newticket ?
>
>>
>> On Mon, Aug 24, 2015 at 1:18 PM, Even Rouault
>>
>> <even.rouault at spatialys.com> wrote:
>> > Hi,
>> >
>> > Looking at the first difference, 371 - 115 = 256. Those gaps of +256
>> > appear each time a value at col n+1 is lesser than the value at col n
>> > (when looking the reference x86 data). Knowing that HF2 data is delta
>> > encoded and that for this row the delta between consecutive values is in
>> > the [-128,127] range, so elligible for 1 byte delta encoding, I think
>> > I've found the issue. Apparently (according to
>> > https://ajax.fedorapeople.org/is-char-signed-or-not.txt), "char" on ppc
>> > (and other platforms) is "unsigned char", whereas it is "signed char" on
>> > x86...
>> >
>> > Could you try changing line 201 from :
>> >                         nVal += ((char*)pabyData)[i-1];
>> >
>> > to
>> >
>> >                         nVal += ((signed char*)pabyData)[i-1];
>> >
>> > For clarity, on the encoding side, lines 963 and 1032 that have
>> >
>> >                             char chDiff = (char)nDiff;
>> >
>> > should be changed to
>> >
>> >                             signed char chDiff = (signed char)nDiff;
>> >
>> > Although in that case, it apparently doesn't make difference on the end
>> > result.
>> >
>> > I wouldn't be surprised that similar issues would appear elsewhere in the
>> > code base.
>> >
>> > Even
>> >
>> > Le lundi 24 ao?t 2015 05:16:50, vous avez ?crit :
>> >> Thanks a lot for you response Even
>> >> out.asc is clearly different on the two platforms (x86 and ppc64le).
>> >>
>> >> On x86 the content is as follows:
>> >> ncols        20
>> >> nrows        20
>> >> xllcorner    440720.000000000000
>> >> yllcorner    3750120.000000000000
>> >> cellsize     60.000000000000
>> >>
>> >>  107 123 132 115 132 132 140 132 132 132 107 132 107 132 132 107 123 115
>> >>
>> >> 156 148 115 132 107 123 148 115 165 115 140 107 123 123 99 132 123 132
>> >> 132 132 99 156 115 132 140 132 123 115 140 107 140 115 132 123 107 132
>> >> 132 115 115 107 115 107 148 132 123 123 115 132 132 123 115 123 115 123
>> >> 107 115 148 107 115 140 115 132 132 156 132 140 132 132 115 115 115 123
>> >> 148 123 165 123 132 107 107 132 156 123 189 173 173 148 148 115 148 123
>> >> 107 132 115 132 156 99 123 115 132 132 206 107 197 173 148 140 140 132
>> >> 99 132 123 115 140 132 132 99 132 123 132 173 123 115 148 123 148 115
>> >> 148 123 140 123 107 115 132 115 107 115 99 123 99 181 99 107 123 115
>> >> 132 115 123 132 115 132 132 123 123 132 99 115 99 123 132 115 115 107
>> >> 140 140 99 140 99 115 123 107 132 107 115 107 115 123 132 123 107 123
>> >> 132 132 132 132 132 123 99 132 123 107 148 99 115 123 140 173 123 107
>> >> 123 123 123 107 123 123 123 107 140 123 123 115 115 90 107 173 107 107
>> >> 107 107 99 132 123 115 173 148 99 123 123 107 123 99 107 189 173 107
>> >> 115 115 107 99 140 107 173 140 148 132 132 107 123 99 99 115 99 132 99
>> >> 140 115 148 123 99 132 123 148 140 140 107 140 90 107 115 107 90 99 123
>> >> 115 115 115 123 123 148 115 148 99 132 165 148 156 123 107 107 107 115
>> >> 140 99 115 99 99 107 115 132 115 90 123 115 189 173 140 140 165 115 132
>> >> 90 99 115 90 99 99 107 99 132 99 107 132 132 156 181 140 173 123 132 99
>> >> 115 123 74 115 99 123 140 156 132 165 140 140 99 173 247 255 206 132
>> >> 107 140 123 148 132 165 165 148 140 132 123 107 123 107 123 181 181 156
>> >> 148 156 156 156 181 132 148 115 132 107 107 107 107 107 115 99 107
>> >>
>> >> On ppc64le:
>> >> ncols        20
>> >> nrows        20
>> >> xllcorner    440720.000000000000
>> >> yllcorner    3750120.000000000000
>> >> cellsize     60.000000000000
>> >>
>> >>  107 123 132 371 388 388 396 644 644 644 875 900 1131 1156 1156 1387
>> >>
>> >> 1403 1651 1692 1940
>> >>
>> >>  115 132 363 379 404 627 677 883 908 1131 1147 1147 1379 1412 1659
>> >>
>> >> 1668 1668 1668 1891 1948
>> >>
>> >>  115 132 140 388 635 883 908 1131 1164 1395 1412 1659 1899 1924 1924
>> >>
>> >> 2163 2163 2411 2419 2667
>> >>
>> >>  148 388 635 635 883 900 900 1147 1395 1403 1651 1659 1899 1907 1940
>> >>
>> >> 2155 2163 2188 2419 2436
>> >>
>> >>  132 156 388 396 644 644 883 883 883 891 916 1147 1189 1403 1412 1643
>> >>
>> >> 1643 1668 1692 1915
>> >>
>> >>  189 429 429 660 660 883 916 1147 1387 1412 1651 1668 1692 1891 1915
>> >>
>> >> 2163 2180 2180 2254 2411
>> >>
>> >>  197 429 660 908 908 1156 1379 1412 1659 1907 1932 2180 2180 2403 2436
>> >>
>> >> 2683 2692 2733 2939 3187
>> >>
>> >>  148 379 404 627 660 891 908 1147 1387 1395 1412 1651 1899 1907 2147
>> >>
>> >> 2171 2403 2485 2659 2667
>> >>
>> >>  123 371 388 627 635 644 883 900 900 1147 1147 1156 1379 1395 1635
>> >>
>> >> 1659 1668 1907 1907 2155
>> >>
>> >>  140 140 355 396 611 627 635 875 900 1131 1139 1387 1395 1403 1412
>> >>
>> >> 1659 1899 1915 1924 1924
>> >>
>> >>  132 132 132 379 611 644 891 1131 1172 1379 1395 1403 1420 1453 1659
>> >>
>> >> 1899 1915 1915 1915 2155
>> >>
>> >>  123 123 123 363 396 635 635 883 883 1114 1131 1197 1387 1387 1387
>> >>
>> >> 1387 1635 1668 1915 2163
>> >>
>> >>  173 404 611 635 635 875 891 1123 1131 1213 1453 1643 1651 1651 1899
>> >>
>> >> 2147 2188 2411 2477 2700
>> >>
>> >>  148 388 388 619 635 867 867 883 1123 1156 1379 1420 1651 1684 1915
>> >>
>> >> 2147 2180 2427 2452 2700
>> >>
>> >>  140 363 396 602 619 627 875 1114 1123 1147 1395 1395 1395 1403 1403
>> >>
>> >> 1428 1651 1684 1891 1924
>> >>
>> >>  165 404 412 635 875 875 875 883 908 1123 1139 1379 1379 1387 1395
>> >>
>> >> 1412 1651 1882 1915 2163
>> >>
>> >>  189 429 652 652 677 883 900 1114 1123 1139 1370 1379 1379 1387 1635
>> >>
>> >> 1668 1891 1899 1924 1924
>> >>
>> >>  156 181 396 429 635 644 867 883 891 1098 1139 1379 1403 1420 1436
>> >>
>> >> 1668 1701 1932 1932 2147
>> >>
>> >>  173 247 255 462 644 875 908 1147 1172 1412 1445 1445 1684 1932 2180
>> >>
>> >> 2427 2667 2683 2923 2939
>> >>
>> >>  181 181 412 660 668 668 668 693 900 916 1139 1156 1387 1387 1387 1387
>> >>
>> >> 1387 1395 1635 1643
>> >>
>> >> I will try to dig into this more. Thanks!
>> >>
>> >> On Sat, Aug 22, 2015 at 1:57 AM, Even Rouault
>> >>
>> >> <even.rouault at spatialys.com> wrote:
>> >> > Le vendredi 21 ao?t 2015 07:01:41, Gawade P a ?crit :
>> >> >>  Hi All,
>> >> >>
>> >> >> I am performing the following operation on a Fedora 21 ppc64le
>> >> >> machine:
>> >> >>
>> >> >> gdal_translate -of HF2 byte.tif byte.tif.tst
>> >> >>
>> >> >> Here byte.tiff is TIFF image data
>> >> >> [root at pts0433-vm12 test]# file byte.tif
>> >> >> byte.tif: TIFF image data, little-endian, direntries=15, height=20,
>> >> >> bps=8, compression=none, PhotometricIntepretation=BlackIsZero,
>> >> >> width=20
>> >> >>
>> >> >> The operation completes without issues.
>> >> >>
>> >> >> However,
>> >> >> gdalchksum.py byte.tif
>> >> >>
>> >> >>  gives me 4672
>> >> >>
>> >> >> and
>> >> >> gdalchksum.py byte.tif.tst
>> >> >> give me 4716
>> >> >>
>> >> >> I have installed gdal and gdal-python using the following rpm
>> >> >> packages: gdal-1.11.2-4.fc21.ppc64le.rpm
>> >> >> gdal-python-1.11.2-4.fc21.ppc64le.rpm
>> >> >>
>> >> >> The above commands give the same output on Intel (x86) platform i.e.
>> >> >> 4672. Also, if I transfer the output file byte.tif.tst to an x86
>> >> >> machine, I get the correct output, i.e. 4672.
>> >> >>
>> >> >> Can anyone please guide me on what is the expected output
>> >> >
>> >> > In theory this should be 4672 on all platforms. The behaviour you get
>> >> > would mean that the writing side is OK on PPC64LE, but the reading
>> >> > side is not.
>> >> >
>> >> > The issue is probably in HF2RasterBand::IReadBlock() in
>> >> > frmts/hf2/hf2dataset.cpp if you want to give a try to debug it.
>> >> >
>> >> > A quick way of having an overview of the differences would be to run
>> >> > the following on x86 and PPC64LE and compare out.asc:
>> >> >
>> >> > gdal_translate byte.tif.tst out.asc -of aaigrid
>> >> >
>> >> >> Thanks in advance!
>> >> >> _______________________________________________
>> >> >> gdal-dev mailing list
>> >> >> gdal-dev at lists.osgeo.org
>> >> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >> >
>> >> > --
>> >> > Spatialys - Geospatial professional services
>> >> > http://www.spatialys.com
>> >
>> > --
>> > Spatialys - Geospatial professional services
>> > http://www.spatialys.com
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From even.rouault at spatialys.com  Mon Aug 24 02:41:57 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 24 Aug 2015 11:41:57 +0200
Subject: [gdal-dev] gdal2tile
In-Reply-To: <55DAD5B6.2020104@free.fr>
References: <003701d0de26$5e1fcbd0$1a5f6370$@ewn.com.au>
	<loom.20150824T100852-22@post.gmane.org> <55DAD5B6.2020104@free.fr>
Message-ID: <201508241141.57335.even.rouault@spatialys.com>

Le lundi 24 ao?t 2015 10:28:38, Jean-Claude Repetto a ?crit :
> Le 2015-08-24 10:11, Jukka Rahkonen a ?crit :
> > Wouldn't it be time to bury 900913 permenently? There is also an open
> > ticket
> > about that https://trac.osgeo.org/gdal/ticket/5622
> > 
> > -Jukka Rahkonen-
> 
> +1

I've just modified gdal2tiles to use EPSG:3857.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From aperi2007 at gmail.com  Mon Aug 24 03:34:57 2015
From: aperi2007 at gmail.com (Andrea Peri)
Date: Mon, 24 Aug 2015 12:34:57 +0200
Subject: [gdal-dev] gdalbuildvrt overwrite always the vrt file
Message-ID: <CABqTJk9=0VMaqSpS3U+3o_g+DLuvV4rXXtSGddDgE7BCao53QQ@mail.gmail.com>

Hi,

I try to create a vrt-datasource using this sintax:

gdalbuildvrt /path-to/dataset.vrt \
    /path-ti-tiffs/tiff_1.tif

It was correctly created.

After,
I do this other command:

gdalbuildvrt /path-to/dataset.vrt \
    /path-ti-tiffs/tiff_2.tif

The new dataset.vrt I notice is containing the only tiff-2 file and
lost the tiff-1 file.

More probably I miss something,
infact the documention of the gdalbuildvrt report a parameter:
"-overwrite" that mean:

>Overwrite the VRT if it already exists.

So I guess , without this option, the gdalbuildvrt should append the
tiff-2 and maintain the tiff-1 or alternatively raise an exception,
but not overwrite however the file.

I understand correctly ?

Thx.


-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From mike.manning at ewn.com.au  Mon Aug 24 15:31:26 2015
From: mike.manning at ewn.com.au (Mike Manning)
Date: Tue, 25 Aug 2015 08:31:26 +1000
Subject: [gdal-dev] gdal2tile
In-Reply-To: <201508241004.04605.even.rouault@spatialys.com>
References: <003701d0de26$5e1fcbd0$1a5f6370$@ewn.com.au>
	<201508241004.04605.even.rouault@spatialys.com>
Message-ID: <006301d0debc$9ef57a10$dce06e30$@ewn.com.au>

Hi Even,

Fantastic, thank you very much! I'll give this a go and let you know how I go.

Cheers, Mike

-----Original Message-----
From: Even Rouault [mailto:even.rouault at spatialys.com] 
Sent: Monday, 24 August 2015 6:04 PM
To: gdal-dev at lists.osgeo.org
Cc: Mike Manning
Subject: Re: [gdal-dev] gdal2tile

Le lundi 24 ao?t 2015 06:35:53, Mike Manning a ?crit :
> Hi guys,
> 
> 
> 
> I've got an interesting one - I have some GeoTIFF Files that I've 
> converted to EPSG:3857 from GeoStationary as follows:
> 
> 
> 
> # gdalwarp -tr 2000 2000 -co tfw=yes -t_srs epsg:3857 -te 10018754.17
> -7361866.11 20037508.34 -0.00
> /storage/sat_data/20150824/IDE00422.201508240100.tif
> /storage/tmp/IDE00422.201508240100.tif
> 
> 
> 
> Using gdalinfo reveals the following about the newly created GeoTIFF file:
> 
> 
> 
> # gdalinfo IDE00422.201508240100.tif
> 
> Driver: GTiff/GeoTIFF
> 
> Files: IDE00422.201508240100.tif
> 
> Size is 5009, 3681
> 
> Coordinate System is:
> 
> PROJCS["WGS 84 / Pseudo-Mercator",
> 
>     GEOGCS["WGS 84",
> 
>         DATUM["WGS_1984",
> 
>             SPHEROID["WGS 84",6378137,298.257223563,
> 
>                 AUTHORITY["EPSG","7030"]],
> 
>             AUTHORITY["EPSG","6326"]],
> 
>         PRIMEM["Greenwich",0],
> 
>         UNIT["degree",0.0174532925199433],
> 
>         AUTHORITY["EPSG","4326"]],
> 
>     PROJECTION["Mercator_1SP"],
> 
>     PARAMETER["central_meridian",0],
> 
>     PARAMETER["scale_factor",1],
> 
>     PARAMETER["false_easting",0],
> 
>     PARAMETER["false_northing",0],
> 
>     UNIT["metre",1,
> 
>         AUTHORITY["EPSG","9001"]],
> 
>     EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0
> +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext 
> +no_defs"],
> 
>     AUTHORITY["EPSG","3857"]]
> 
> Origin = (10018754.169999999925494,0.000000000000000)
> 
> Pixel Size = (2000.000000000000000,-2000.000000000000000)
> 
> Metadata:
> 
>   AREA_OR_POINT=Area
> 
> Image Structure Metadata:
> 
>   INTERLEAVE=BAND
> 
> Corner Coordinates:
> 
> Upper Left  (10018754.170,       0.000) ( 90d 0' 0.00"E,  0d 0' 0.01"N)
> 
> Lower Left  (10018754.170,-7362000.000) ( 90d 0' 0.00"E, 55d 0' 
> 2.48"S)
> 
> Upper Right (20036754.170,       0.000) (179d59'35.61"E,  0d 0' 0.01"N)
> 
> Lower Right (20036754.170,-7362000.000) (179d59'35.61"E, 55d 0' 
> 2.48"S)
> 
> Center      (15027754.170,-3681000.000) (134d59'47.81"E, 31d22'14.91"S)
> 
> Band 1 Block=5009x1 Type=Byte, ColorInterp=Gray
> 
> 
> 
> It looks like the map has the correct coordinates however when I run 
> the gdal2tiles program it errors out:
> 
> 
> 
> gdal2tiles.py -k -g <api_key> IDE00422.201508240100.tif mercour
> 
> 
> 
> ERROR 6: EPSG PCS/GCS code 900913 not found in EPSG support files.  Is 
> this a valid
> 
> EPSG coordinate system?
> 
> ERROR 6: No translation for an empty SRS to PROJ.4 format is known.
> 
> ERROR 6: No translation for an empty SRS to PROJ.4 format is known.
> 
> Generating Base Tiles:
> 
> ERROR 5: Illegal values for buffer size
> 
> ERROR 5: Illegal values for buffer size
> 
> Traceback (most recent call last):
> 
>   File "/usr/bin/gdal2tiles.py", line 2262, in <module>
> 
>     gdal2tiles.process()
> 
>   File "/usr/bin/gdal2tiles.py", line 478, in process
> 
>     self.generate_base_tiles()
> 
>   File "/usr/bin/gdal2tiles.py", line 1276, in generate_base_tiles
> 
>     dsquery.WriteRaster(wx, wy, wxsize, wysize, data,
> band_list=list(range(1,self.dataBandsCount+1)))
> 
>   File "/usr/lib/python2.7/dist-packages/osgeo/gdal.py", line 796, in 
> WriteRaster
> 
>     buf_pixel_space, buf_line_space, buf_band_space )
> 
> TypeError: not a string
> 
> 
> 
> I'm running "GDAL 1.10.1, released 2013/08/26" on Debian Jessie.  I've 
> read that version 1.6 had this issue as it didn't know what EPSG:3857 
> is but I'm running 1.10 so it can't be that.

Mike,

apparently this is due to Debian packaging of GDAL where one ressource file that contains the definition of EPSG:900913 has been removed. See
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=745702 and confirmed by https://packages.debian.org/jessie/i386/libgdal1h/filelist

2 possible workarounds :
- download https://svn.osgeo.org/gdal/trunk/gdal/data/cubewerx_extra.wkt and copy it to /usr/share/gdal/1.10 so as to get 900913
- edit /usr/bin/gdal2tiles.py and replace all occurences of 900913 by 3857

Even

> 
> 
> 
> Cheers, Mike

--
Spatialys - Geospatial professional services http://www.spatialys.com


From gawade.oefp at gmail.com  Mon Aug 24 22:28:46 2015
From: gawade.oefp at gmail.com (Gawade P)
Date: Tue, 25 Aug 2015 10:58:46 +0530
Subject: [gdal-dev] Issue with gdalchksum on Fedora 21 ppc64le?
In-Reply-To: <CAPS4ckq_GapLycDgL9TO1DJnf1KdBshkdkGmRX=MGqGYFxKe=g@mail.gmail.com>
References: <CAPS4ckoC9SkGUCsZdvC53cSRrOaVHhNv-EHA8x9d-_Vb=KuqkA@mail.gmail.com>
	<201508240948.25744.even.rouault@spatialys.com>
	<CAPS4ckofihZ2UTCjgRoRYnzXQmQ0CGtZ7N607sd=MgGF04mgqg@mail.gmail.com>
	<201508241102.09914.even.rouault@spatialys.com>
	<CAPS4ckq_GapLycDgL9TO1DJnf1KdBshkdkGmRX=MGqGYFxKe=g@mail.gmail.com>
Message-ID: <CAPS4ckqXHMeLX=i4Aob=XeJDWnMkJpO1npkQiR=HtAYtHZ6F8g@mail.gmail.com>

Hi Even,
It looks like I am running into another checksum issue on ppc64le.

Output on ppc64le:
gdalchksum.py ../autotest/gdrivers/data/nwt_grd.grd
28093
32304
19624
25856

Output on x86:
gdalchksum.py ../autotest/gdrivers/data/nwt_grd.grd
28093
33626
20260
25856

There is a mismatch for bands 2 and 3. I am looking at the code in
frmts/northwood/grddataset.cpp. Would this be the right place?
Would you recommend raising an issue for this one as well? Please suggest.
Thanks !


On Mon, Aug 24, 2015 at 3:05 PM, Gawade P <gawade.oefp at gmail.com> wrote:
> Raised ticket at: https://trac.osgeo.org/gdal/ticket/6082#ticket
>
> On Mon, Aug 24, 2015 at 2:32 PM, Even Rouault
> <even.rouault at spatialys.com> wrote:
>> Le lundi 24 ao?t 2015 10:58:49, Gawade P a ?crit :
>>> Thanks, Even!
>>> This change solved the issue I was seeing. Appreciate your help on this!
>>
>> Great. Could you please file a ticket about that on
>> https://trac.osgeo.org/gdal/newticket ?
>>
>>>
>>> On Mon, Aug 24, 2015 at 1:18 PM, Even Rouault
>>>
>>> <even.rouault at spatialys.com> wrote:
>>> > Hi,
>>> >
>>> > Looking at the first difference, 371 - 115 = 256. Those gaps of +256
>>> > appear each time a value at col n+1 is lesser than the value at col n
>>> > (when looking the reference x86 data). Knowing that HF2 data is delta
>>> > encoded and that for this row the delta between consecutive values is in
>>> > the [-128,127] range, so elligible for 1 byte delta encoding, I think
>>> > I've found the issue. Apparently (according to
>>> > https://ajax.fedorapeople.org/is-char-signed-or-not.txt), "char" on ppc
>>> > (and other platforms) is "unsigned char", whereas it is "signed char" on
>>> > x86...
>>> >
>>> > Could you try changing line 201 from :
>>> >                         nVal += ((char*)pabyData)[i-1];
>>> >
>>> > to
>>> >
>>> >                         nVal += ((signed char*)pabyData)[i-1];
>>> >
>>> > For clarity, on the encoding side, lines 963 and 1032 that have
>>> >
>>> >                             char chDiff = (char)nDiff;
>>> >
>>> > should be changed to
>>> >
>>> >                             signed char chDiff = (signed char)nDiff;
>>> >
>>> > Although in that case, it apparently doesn't make difference on the end
>>> > result.
>>> >
>>> > I wouldn't be surprised that similar issues would appear elsewhere in the
>>> > code base.
>>> >
>>> > Even
>>> >
>>> > Le lundi 24 ao?t 2015 05:16:50, vous avez ?crit :
>>> >> Thanks a lot for you response Even
>>> >> out.asc is clearly different on the two platforms (x86 and ppc64le).
>>> >>
>>> >> On x86 the content is as follows:
>>> >> ncols        20
>>> >> nrows        20
>>> >> xllcorner    440720.000000000000
>>> >> yllcorner    3750120.000000000000
>>> >> cellsize     60.000000000000
>>> >>
>>> >>  107 123 132 115 132 132 140 132 132 132 107 132 107 132 132 107 123 115
>>> >>
>>> >> 156 148 115 132 107 123 148 115 165 115 140 107 123 123 99 132 123 132
>>> >> 132 132 99 156 115 132 140 132 123 115 140 107 140 115 132 123 107 132
>>> >> 132 115 115 107 115 107 148 132 123 123 115 132 132 123 115 123 115 123
>>> >> 107 115 148 107 115 140 115 132 132 156 132 140 132 132 115 115 115 123
>>> >> 148 123 165 123 132 107 107 132 156 123 189 173 173 148 148 115 148 123
>>> >> 107 132 115 132 156 99 123 115 132 132 206 107 197 173 148 140 140 132
>>> >> 99 132 123 115 140 132 132 99 132 123 132 173 123 115 148 123 148 115
>>> >> 148 123 140 123 107 115 132 115 107 115 99 123 99 181 99 107 123 115
>>> >> 132 115 123 132 115 132 132 123 123 132 99 115 99 123 132 115 115 107
>>> >> 140 140 99 140 99 115 123 107 132 107 115 107 115 123 132 123 107 123
>>> >> 132 132 132 132 132 123 99 132 123 107 148 99 115 123 140 173 123 107
>>> >> 123 123 123 107 123 123 123 107 140 123 123 115 115 90 107 173 107 107
>>> >> 107 107 99 132 123 115 173 148 99 123 123 107 123 99 107 189 173 107
>>> >> 115 115 107 99 140 107 173 140 148 132 132 107 123 99 99 115 99 132 99
>>> >> 140 115 148 123 99 132 123 148 140 140 107 140 90 107 115 107 90 99 123
>>> >> 115 115 115 123 123 148 115 148 99 132 165 148 156 123 107 107 107 115
>>> >> 140 99 115 99 99 107 115 132 115 90 123 115 189 173 140 140 165 115 132
>>> >> 90 99 115 90 99 99 107 99 132 99 107 132 132 156 181 140 173 123 132 99
>>> >> 115 123 74 115 99 123 140 156 132 165 140 140 99 173 247 255 206 132
>>> >> 107 140 123 148 132 165 165 148 140 132 123 107 123 107 123 181 181 156
>>> >> 148 156 156 156 181 132 148 115 132 107 107 107 107 107 115 99 107
>>> >>
>>> >> On ppc64le:
>>> >> ncols        20
>>> >> nrows        20
>>> >> xllcorner    440720.000000000000
>>> >> yllcorner    3750120.000000000000
>>> >> cellsize     60.000000000000
>>> >>
>>> >>  107 123 132 371 388 388 396 644 644 644 875 900 1131 1156 1156 1387
>>> >>
>>> >> 1403 1651 1692 1940
>>> >>
>>> >>  115 132 363 379 404 627 677 883 908 1131 1147 1147 1379 1412 1659
>>> >>
>>> >> 1668 1668 1668 1891 1948
>>> >>
>>> >>  115 132 140 388 635 883 908 1131 1164 1395 1412 1659 1899 1924 1924
>>> >>
>>> >> 2163 2163 2411 2419 2667
>>> >>
>>> >>  148 388 635 635 883 900 900 1147 1395 1403 1651 1659 1899 1907 1940
>>> >>
>>> >> 2155 2163 2188 2419 2436
>>> >>
>>> >>  132 156 388 396 644 644 883 883 883 891 916 1147 1189 1403 1412 1643
>>> >>
>>> >> 1643 1668 1692 1915
>>> >>
>>> >>  189 429 429 660 660 883 916 1147 1387 1412 1651 1668 1692 1891 1915
>>> >>
>>> >> 2163 2180 2180 2254 2411
>>> >>
>>> >>  197 429 660 908 908 1156 1379 1412 1659 1907 1932 2180 2180 2403 2436
>>> >>
>>> >> 2683 2692 2733 2939 3187
>>> >>
>>> >>  148 379 404 627 660 891 908 1147 1387 1395 1412 1651 1899 1907 2147
>>> >>
>>> >> 2171 2403 2485 2659 2667
>>> >>
>>> >>  123 371 388 627 635 644 883 900 900 1147 1147 1156 1379 1395 1635
>>> >>
>>> >> 1659 1668 1907 1907 2155
>>> >>
>>> >>  140 140 355 396 611 627 635 875 900 1131 1139 1387 1395 1403 1412
>>> >>
>>> >> 1659 1899 1915 1924 1924
>>> >>
>>> >>  132 132 132 379 611 644 891 1131 1172 1379 1395 1403 1420 1453 1659
>>> >>
>>> >> 1899 1915 1915 1915 2155
>>> >>
>>> >>  123 123 123 363 396 635 635 883 883 1114 1131 1197 1387 1387 1387
>>> >>
>>> >> 1387 1635 1668 1915 2163
>>> >>
>>> >>  173 404 611 635 635 875 891 1123 1131 1213 1453 1643 1651 1651 1899
>>> >>
>>> >> 2147 2188 2411 2477 2700
>>> >>
>>> >>  148 388 388 619 635 867 867 883 1123 1156 1379 1420 1651 1684 1915
>>> >>
>>> >> 2147 2180 2427 2452 2700
>>> >>
>>> >>  140 363 396 602 619 627 875 1114 1123 1147 1395 1395 1395 1403 1403
>>> >>
>>> >> 1428 1651 1684 1891 1924
>>> >>
>>> >>  165 404 412 635 875 875 875 883 908 1123 1139 1379 1379 1387 1395
>>> >>
>>> >> 1412 1651 1882 1915 2163
>>> >>
>>> >>  189 429 652 652 677 883 900 1114 1123 1139 1370 1379 1379 1387 1635
>>> >>
>>> >> 1668 1891 1899 1924 1924
>>> >>
>>> >>  156 181 396 429 635 644 867 883 891 1098 1139 1379 1403 1420 1436
>>> >>
>>> >> 1668 1701 1932 1932 2147
>>> >>
>>> >>  173 247 255 462 644 875 908 1147 1172 1412 1445 1445 1684 1932 2180
>>> >>
>>> >> 2427 2667 2683 2923 2939
>>> >>
>>> >>  181 181 412 660 668 668 668 693 900 916 1139 1156 1387 1387 1387 1387
>>> >>
>>> >> 1387 1395 1635 1643
>>> >>
>>> >> I will try to dig into this more. Thanks!
>>> >>
>>> >> On Sat, Aug 22, 2015 at 1:57 AM, Even Rouault
>>> >>
>>> >> <even.rouault at spatialys.com> wrote:
>>> >> > Le vendredi 21 ao?t 2015 07:01:41, Gawade P a ?crit :
>>> >> >>  Hi All,
>>> >> >>
>>> >> >> I am performing the following operation on a Fedora 21 ppc64le
>>> >> >> machine:
>>> >> >>
>>> >> >> gdal_translate -of HF2 byte.tif byte.tif.tst
>>> >> >>
>>> >> >> Here byte.tiff is TIFF image data
>>> >> >> [root at pts0433-vm12 test]# file byte.tif
>>> >> >> byte.tif: TIFF image data, little-endian, direntries=15, height=20,
>>> >> >> bps=8, compression=none, PhotometricIntepretation=BlackIsZero,
>>> >> >> width=20
>>> >> >>
>>> >> >> The operation completes without issues.
>>> >> >>
>>> >> >> However,
>>> >> >> gdalchksum.py byte.tif
>>> >> >>
>>> >> >>  gives me 4672
>>> >> >>
>>> >> >> and
>>> >> >> gdalchksum.py byte.tif.tst
>>> >> >> give me 4716
>>> >> >>
>>> >> >> I have installed gdal and gdal-python using the following rpm
>>> >> >> packages: gdal-1.11.2-4.fc21.ppc64le.rpm
>>> >> >> gdal-python-1.11.2-4.fc21.ppc64le.rpm
>>> >> >>
>>> >> >> The above commands give the same output on Intel (x86) platform i.e.
>>> >> >> 4672. Also, if I transfer the output file byte.tif.tst to an x86
>>> >> >> machine, I get the correct output, i.e. 4672.
>>> >> >>
>>> >> >> Can anyone please guide me on what is the expected output
>>> >> >
>>> >> > In theory this should be 4672 on all platforms. The behaviour you get
>>> >> > would mean that the writing side is OK on PPC64LE, but the reading
>>> >> > side is not.
>>> >> >
>>> >> > The issue is probably in HF2RasterBand::IReadBlock() in
>>> >> > frmts/hf2/hf2dataset.cpp if you want to give a try to debug it.
>>> >> >
>>> >> > A quick way of having an overview of the differences would be to run
>>> >> > the following on x86 and PPC64LE and compare out.asc:
>>> >> >
>>> >> > gdal_translate byte.tif.tst out.asc -of aaigrid
>>> >> >
>>> >> >> Thanks in advance!
>>> >> >> _______________________________________________
>>> >> >> gdal-dev mailing list
>>> >> >> gdal-dev at lists.osgeo.org
>>> >> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>> >> >
>>> >> > --
>>> >> > Spatialys - Geospatial professional services
>>> >> > http://www.spatialys.com
>>> >
>>> > --
>>> > Spatialys - Geospatial professional services
>>> > http://www.spatialys.com
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com

From even.rouault at spatialys.com  Tue Aug 25 01:18:53 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 25 Aug 2015 10:18:53 +0200
Subject: [gdal-dev] Issue with gdalchksum on Fedora 21 ppc64le?
In-Reply-To: <CAPS4ckqXHMeLX=i4Aob=XeJDWnMkJpO1npkQiR=HtAYtHZ6F8g@mail.gmail.com>
References: <CAPS4ckoC9SkGUCsZdvC53cSRrOaVHhNv-EHA8x9d-_Vb=KuqkA@mail.gmail.com>
	<CAPS4ckq_GapLycDgL9TO1DJnf1KdBshkdkGmRX=MGqGYFxKe=g@mail.gmail.com>
	<CAPS4ckqXHMeLX=i4Aob=XeJDWnMkJpO1npkQiR=HtAYtHZ6F8g@mail.gmail.com>
Message-ID: <201508251018.53980.even.rouault@spatialys.com>

Le mardi 25 ao?t 2015 07:28:46, Gawade P a ?crit :
> Hi Even,
> It looks like I am running into another checksum issue on ppc64le.
> 
> Output on ppc64le:
> gdalchksum.py ../autotest/gdrivers/data/nwt_grd.grd
> 28093
> 32304
> 19624
> 25856
> 
> Output on x86:
> gdalchksum.py ../autotest/gdrivers/data/nwt_grd.grd
> 28093
> 33626
> 20260
> 25856
> 
> There is a mismatch for bands 2 and 3. I am looking at the code in
> frmts/northwood/grddataset.cpp. Would this be the right place?

Yes.

From a quick look it doesn't appear to be the same issue as for HF2. And I've 
actually recompiled GDAL with -fsigned-char on x86_64 to simulate ppc64le 
behaviour regarding char, and the good news is that the autotest suite pass 
fine, so it seems this class of problem isn't widespread in the code base.

Perhaps slighlty different floating-point rounding in the way the colormap is 
computed by nwt_LoadColors() ? Hard to tell.

> Would you recommend raising an issue for this one as well? Please suggest.

You can always open a ticket, at least to keep track of the issue, but that 
doesn't mean it will be automagically adressed. Especially since PPC64LE isn't 
a commonly used platform I guess.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gawade.oefp at gmail.com  Tue Aug 25 01:42:48 2015
From: gawade.oefp at gmail.com (Gawade P)
Date: Tue, 25 Aug 2015 14:12:48 +0530
Subject: [gdal-dev] Issue with gdalchksum on Fedora 21 ppc64le?
In-Reply-To: <201508251018.53980.even.rouault@spatialys.com>
References: <CAPS4ckoC9SkGUCsZdvC53cSRrOaVHhNv-EHA8x9d-_Vb=KuqkA@mail.gmail.com>
	<CAPS4ckq_GapLycDgL9TO1DJnf1KdBshkdkGmRX=MGqGYFxKe=g@mail.gmail.com>
	<CAPS4ckqXHMeLX=i4Aob=XeJDWnMkJpO1npkQiR=HtAYtHZ6F8g@mail.gmail.com>
	<201508251018.53980.even.rouault@spatialys.com>
Message-ID: <CAPS4ckptT-HVPfyY-C+u60AwG2tTrSVvxutaXS42PrW_jZEiFA@mail.gmail.com>

 Thanks, Even. I will dig into this more based on your inputs.

On Tue, Aug 25, 2015 at 1:48 PM, Even Rouault
<even.rouault at spatialys.com> wrote:
> Le mardi 25 ao?t 2015 07:28:46, Gawade P a ?crit :
>> Hi Even,
>> It looks like I am running into another checksum issue on ppc64le.
>>
>> Output on ppc64le:
>> gdalchksum.py ../autotest/gdrivers/data/nwt_grd.grd
>> 28093
>> 32304
>> 19624
>> 25856
>>
>> Output on x86:
>> gdalchksum.py ../autotest/gdrivers/data/nwt_grd.grd
>> 28093
>> 33626
>> 20260
>> 25856
>>
>> There is a mismatch for bands 2 and 3. I am looking at the code in
>> frmts/northwood/grddataset.cpp. Would this be the right place?
>
> Yes.
>
> From a quick look it doesn't appear to be the same issue as for HF2. And I've
> actually recompiled GDAL with -fsigned-char on x86_64 to simulate ppc64le
> behaviour regarding char, and the good news is that the autotest suite pass
> fine, so it seems this class of problem isn't widespread in the code base.
>
> Perhaps slighlty different floating-point rounding in the way the colormap is
> computed by nwt_LoadColors() ? Hard to tell.
>
>> Would you recommend raising an issue for this one as well? Please suggest.
>
> You can always open a ticket, at least to keep track of the issue, but that
> doesn't mean it will be automagically adressed. Especially since PPC64LE isn't
> a commonly used platform I guess.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From even.rouault at spatialys.com  Tue Aug 25 06:17:01 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 25 Aug 2015 15:17:01 +0200
Subject: [gdal-dev] Issue with gdalchksum on Fedora 21 ppc64le?
In-Reply-To: <201508251018.53980.even.rouault@spatialys.com>
References: <CAPS4ckoC9SkGUCsZdvC53cSRrOaVHhNv-EHA8x9d-_Vb=KuqkA@mail.gmail.com>
	<CAPS4ckqXHMeLX=i4Aob=XeJDWnMkJpO1npkQiR=HtAYtHZ6F8g@mail.gmail.com>
	<201508251018.53980.even.rouault@spatialys.com>
Message-ID: <201508251517.01702.even.rouault@spatialys.com>


> 
> From a quick look it doesn't appear to be the same issue as for HF2. And
> I've actually recompiled GDAL with -fsigned-char on x86_64 to simulate
> ppc64le behaviour regarding char,

I was obviously not well awoken this morning, since I should rather have used 
-funsigned-char to make char behave like unsigned char. Anyway after trying 
this switch, the conclusion is the same...

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gghiggini at gec-it.com  Wed Aug 26 05:34:11 2015
From: gghiggini at gec-it.com (Giorgio Ghiggini)
Date: Wed, 26 Aug 2015 14:34:11 +0200
Subject: [gdal-dev] Question
Message-ID: <05f101d0dffb$83006190$890124b0$@com>

Hello,

 

I am trying to use GDAL ogr2ogr.exe but I am having problems with
osmconf.ini file configuration.

 

I tried using different binaries for Windows (QGIS, Gisinternals, OSGeo4W
and MapServer) but I am not able to get all tags from a PBF or OSM file.

 

Probably I am not able to configure properly the ini file (here attached),
but all changes I do, have no impact on the result.

 

Here is the command line I use: 

 

ogr2ogr -f "ESRI Shapefile" -skipfailures -sql "select * from points where
other_tags LIKE '%peak%'" F:\GEC\Sources\OSM\Italy
F:\GEC\Sources\OSM\italy-latest.osm.pbf

 

With this configuration I would like to export the "ele" attribute for
"natural=peak", but I am not able to get it in my shapefile.

 

Any suggestion is very appreciated.

 

Best regards,

 

Giorgio

 

 

Giorgio Ghiggini

 

GEC di Ghiggini Giorgio

Via Monte Matanna 1/C

55049 Viareggio (LU)

Italy

P.Iva: 01381570116

cell.: +39 331 141 9315

email: gghiggini at gec-it.com

www.gec-it.com

 <http://www.globalterramaps.com/> www.globalterramaps.com

www.globalaquamaps.com <http://www.globalaquamaps.com/> 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150826/fed9d87e/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: osmconf.ini
Type: application/octet-stream
Size: 3569 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150826/fed9d87e/attachment.obj>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Aug 26 07:34:02 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Wed, 26 Aug 2015 14:34:02 +0000 (UTC)
Subject: [gdal-dev] Question
References: <05f101d0dffb$83006190$890124b0$@com>
Message-ID: <loom.20150826T162815-926@post.gmane.org>

Giorgio Ghiggini <gghiggini <at> gec-it.com> writes:


> Hello,

> I am trying to use GDAL ogr2ogr.exe but I
> am having problems with osmconf.ini file configuration.

> I tried using different binaries for
> Windows (QGIS, Gisinternals, OSGeo4W and MapServer) but I am not able to get
> all tags from a PBF or OSM file.

> Probably I am not able to configure
> properly the ini file (here attached), but all changes I do, have no impact on
> the result.
> 
> Here is the command line I use: 
> 
> ?
> 
> ogr2ogr -f "ESRI
> Shapefile" -skipfailures -sql "select * from points where other_tags
> LIKE '%peak%'" F:\GEC\Sources\OSM\Italy
> F:\GEC\Sources\OSM\italy-latest.osm.pbf
> 
 
> With this configuration I would like to
> export the ?ele? attribute for ?natural=peak?, but I am
> not able to get it in my shapefile.
 
> Any suggestion is very appreciated.


Hi,

Check first the effect of your osmconf.ini with ogrinfo:

ogrinfo hamburg-latest.osm.pbf points -so

With your osmconf.ini I can see attributes:
osm_id: String (0.0)
name: String (0.0)
barrier: String (0.0)
highway: String (0.0)
ref: String (0.0)
address: String (0.0)
is_in: String (0.0)
natural: String (0.0)
place: String (0.0)
man_made: String (0.0)
ele: String (0.0)
all_tags: String (0.0)

You have "all_tags=yes" in osmconf.ini which means at the same that you do
not have other_tags.

Now the following command works for me:

ogrinfo hamburg-latest.osm.pbf  
-sql "select * from points where all_tags like '%collection%'"

-Jukka Rahkonen-

From gghiggini at gec-it.com  Wed Aug 26 08:09:34 2015
From: gghiggini at gec-it.com (Giorgio Ghiggini)
Date: Wed, 26 Aug 2015 17:09:34 +0200
Subject: [gdal-dev] R:  Question
In-Reply-To: <loom.20150826T162815-926@post.gmane.org>
References: <05f101d0dffb$83006190$890124b0$@com>
	<loom.20150826T162815-926@post.gmane.org>
Message-ID: <060301d0e011$3827c260$a8774720$@com>

Hi,

thanks a lot for the prompt response.

I am using GISINTERNALS installation, and when I run the ogrinfo app it returns an error saying "all_tags not recognized as a valid field".

I am not sure this installation is working well, my feeling is that any change I apply to the osmconf.ini are simply not used. Maybe the ogr2ogr and ogrinfo are not using the right path to get the osmconf.ini.

Could you suggest me a Windows GDAL binary to install?

Best regards,
Giorgio

-----Messaggio originale-----
Da: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] Per conto di Jukka Rahkonen
Inviato: Wednesday, August 26, 2015 4:34 PM
A: gdal-dev at lists.osgeo.org
Oggetto: Re: [gdal-dev] Question

Giorgio Ghiggini <gghiggini <at> gec-it.com> writes:


> Hello,

> I am trying to use GDAL ogr2ogr.exe but I
> am having problems with osmconf.ini file configuration.

> I tried using different binaries for
> Windows (QGIS, Gisinternals, OSGeo4W and MapServer) but I am not able to get
> all tags from a PBF or OSM file.

> Probably I am not able to configure
> properly the ini file (here attached), but all changes I do, have no impact on
> the result.
> 
> Here is the command line I use: 
> 
>  
> 
> ogr2ogr -f "ESRI
> Shapefile" -skipfailures -sql "select * from points where other_tags
> LIKE '%peak%'" F:\GEC\Sources\OSM\Italy
> F:\GEC\Sources\OSM\italy-latest.osm.pbf
> 
 
> With this configuration I would like to
> export the ?ele? attribute for ?natural=peak?, but I am
> not able to get it in my shapefile.
 
> Any suggestion is very appreciated.


Hi,

Check first the effect of your osmconf.ini with ogrinfo:

ogrinfo hamburg-latest.osm.pbf points -so

With your osmconf.ini I can see attributes:
osm_id: String (0.0)
name: String (0.0)
barrier: String (0.0)
highway: String (0.0)
ref: String (0.0)
address: String (0.0)
is_in: String (0.0)
natural: String (0.0)
place: String (0.0)
man_made: String (0.0)
ele: String (0.0)
all_tags: String (0.0)

You have "all_tags=yes" in osmconf.ini which means at the same that you do
not have other_tags.

Now the following command works for me:

ogrinfo hamburg-latest.osm.pbf  
-sql "select * from points where all_tags like '%collection%'"

-Jukka Rahkonen-
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jukka.rahkonen at maanmittauslaitos.fi  Wed Aug 26 08:27:28 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Wed, 26 Aug 2015 15:27:28 +0000
Subject: [gdal-dev] Question
Message-ID: <b59987c02018480587058a1a8bb3769f@C119S212VM022.msvyvi.vaha.local>

Hi,

I made my test with GDAL 2.0 binaries from gisinternals by placing your osmconf.ini into \bin\gdal-data. Any change you do for the selected tags in osmconf.ini will have on effect on " ogrinfo hamburg-latest.osm.pbf points -so ". Don't do anything before you see that your osmconf.ini is used. I noticed right now while I was testing that I have several GDAL installations in my PATH, perhaps you have the same situation. Write PATH into your command line for checking it.


-Jukka-



Giorgio Ghiggini wrote:

> Hi,

> thanks a lot for the prompt response.

> I am using GISINTERNALS installation, and when I run the ogrinfo app it returns an error saying "all_tags not recognized as a valid field".

> I am not sure this installation is working well, my feeling is that any change I apply to the osmconf.ini are simply not used. Maybe the ogr2ogr and ogrinfo are not using the right path to get the osmconf.ini.

> Could you suggest me a Windows GDAL binary to install?

> Best regards,
> Giorgio

From andre+joost at nurfuerspam.de  Wed Aug 26 10:14:41 2015
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Wed, 26 Aug 2015 19:14:41 +0200
Subject: [gdal-dev] Question
In-Reply-To: <b59987c02018480587058a1a8bb3769f@C119S212VM022.msvyvi.vaha.local>
References: <b59987c02018480587058a1a8bb3769f@C119S212VM022.msvyvi.vaha.local>
Message-ID: <mrks8e$3bh$1@ger.gmane.org>

Am 26.08.2015 um 17:27 schrieb Rahkonen Jukka (MML):
> I noticed right now while I was
> testing that I have several GDAL installations in my PATH, perhaps
> you have the same situation. Write PATH into your command line for
> checking it.

To avoid those PATH assignments, I use the zip versions from 
Gisinternals, and expand it into a folder manually. When I run the 
SDKshell.bat, the path is set to that installation for all command line 
tasks, until the command window is closed.

QGIS and OSGEO4W work the same, so I have no GDAL in my PATH at all. And 
I can run GDAL versions from 1.6 to 2.0 on the same computer in 
parallel. I assume this is not possible on Linux.

HTH,
Andr? Joost




From even.rouault at spatialys.com  Wed Aug 26 10:22:19 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 26 Aug 2015 19:22:19 +0200
Subject: [gdal-dev] Question
In-Reply-To: <mrks8e$3bh$1@ger.gmane.org>
References: <b59987c02018480587058a1a8bb3769f@C119S212VM022.msvyvi.vaha.local>
	<mrks8e$3bh$1@ger.gmane.org>
Message-ID: <201508261922.19362.even.rouault@spatialys.com>

Le mercredi 26 ao?t 2015 19:14:41, Andre Joost a ?crit :
> Am 26.08.2015 um 17:27 schrieb Rahkonen Jukka (MML):
> > I noticed right now while I was
> > testing that I have several GDAL installations in my PATH, perhaps
> > you have the same situation. Write PATH into your command line for
> > checking it.
> 
> To avoid those PATH assignments, I use the zip versions from
> Gisinternals, and expand it into a folder manually. When I run the
> SDKshell.bat, the path is set to that installation for all command line
> tasks, until the command window is closed.
> 
> QGIS and OSGEO4W work the same, so I have no GDAL in my PATH at all. 

That depends on what you can "your" PATH. SDKshell or OSGeo4W define a 
temporary PATH (but indeed do not touch the user default PATH)

> And
> I can run GDAL versions from 1.6 to 2.0 on the same computer in
> parallel.

> I assume this is not possible on Linux.

Something that would be possible on Windows, but not on Linux?, come on ;-) Of 
course, it is possible to run several GDAL versions on Linux. PATH, 
LD_LIBRARY_PATH, GDAL_DATA, PYTHONPATH are used for that

> 
> HTH,
> Andr? Joost
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From hellik at web.de  Wed Aug 26 11:16:15 2015
From: hellik at web.de (Helmut Kudrnovsky)
Date: Wed, 26 Aug 2015 11:16:15 -0700 (PDT)
Subject: [gdal-dev] vector VRT: Warning 1: Line 2: Attribute value should be
 single or double quoted.
Message-ID: <1440612975809-5221290.post@n6.nabble.com>

hi,

I have a vector VRT which refers to a CSV.

both files are attached to the mail:

chondrilla.vrt
<http://osgeo-org.1560.x6.nabble.com/file/n5221290/chondrilla.vrt>  
chondrilla.csv
<http://osgeo-org.1560.x6.nabble.com/file/n5221290/chondrilla.csv>  

when I do ogrinfo on the VRT, I get following warning:

>ogrinfo chondrilla.vrt
>Warning 1: Line 2: Attribute value should be single or double quoted. Going
on,
>but this is invalid XML that might be rejected in future versions.
>INFO: Open of `chondrilla.vrt'
>      using driver `VRT' successful.
>1: chondrilla (Point)

a look into the CSV file:

"gbifid","datasetkey","occurrenceid",...
"895176382","834a4794-f762-11e1-a439-00145eb45e9a","",...
...

any idea what should be changed in the VRT or in CSV, as the attribute
values are quoted?

thanks








-----
best regards
Helmut
--
View this message in context: http://osgeo-org.1560.x6.nabble.com/vector-VRT-Warning-1-Line-2-Attribute-value-should-be-single-or-double-quoted-tp5221290.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Wed Aug 26 11:27:32 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 26 Aug 2015 20:27:32 +0200
Subject: [gdal-dev] Call for discussion on RFC 59 (v2): GDAL/OGR utilities
	as a library
Message-ID: <201508262027.32814.even.rouault@spatialys.com>

Hi,

Summer of code 2015 being finished now, Faza's work now include librarification 
of gdalinfo, gdal_translate, gdalwarp and ogr2ogr. Faza will continue working 
on some other utilities.

We'd be happy to hear about your comments, especially on the API. So speak now 
please.

The overview of the work is there:
https://trac.osgeo.org/gdal/wiki/rfc59_utilities_as_a_library

I'd like to call for a vote soon as I'd want that to be merged as soon as 
possible, so it gets more widely tested and to avoid increasing merge 
difficulties.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From kyle at pobox.com  Wed Aug 26 11:32:08 2015
From: kyle at pobox.com (Kyle Shannon)
Date: Wed, 26 Aug 2015 12:32:08 -0600
Subject: [gdal-dev] vector VRT: Warning 1: Line 2: Attribute value
 should be single or double quoted.
In-Reply-To: <1440612975809-5221290.post@n6.nabble.com>
References: <1440612975809-5221290.post@n6.nabble.com>
Message-ID: <CAJ0mEz3=ga2HbkFJ3J+BeOT_udrqw3eCjkr0abd6mfqyzmAKAw@mail.gmail.com>

Helmut,


On Wed, Aug 26, 2015 at 12:16 PM, Helmut Kudrnovsky <hellik at web.de> wrote:
> hi,
>
> I have a vector VRT which refers to a CSV.
>
> both files are attached to the mail:
>
> chondrilla.vrt
> <http://osgeo-org.1560.x6.nabble.com/file/n5221290/chondrilla.vrt>
> chondrilla.csv
> <http://osgeo-org.1560.x6.nabble.com/file/n5221290/chondrilla.csv>
>
> when I do ogrinfo on the VRT, I get following warning:
>
>>ogrinfo chondrilla.vrt
>>Warning 1: Line 2: Attribute value should be single or double quoted. Going
> on,
>>but this is invalid XML that might be rejected in future versions.
>>INFO: Open of `chondrilla.vrt'
>>      using driver `VRT' successful.
>>1: chondrilla (Point)
>
> a look into the CSV file:
>
> "gbifid","datasetkey","occurrenceid",...
> "895176382","834a4794-f762-11e1-a439-00145eb45e9a","",...
> ...
>
> any idea what should be changed in the VRT or in CSV, as the attribute
> values are quoted?

Quote the '1' in relativeToVRT:

<SrcDataSource relativeToVRT="1">chondrilla.csv</SrcDataSource>

>
> thanks
>
>
>
>
>
>
>
>
> -----
> best regards
> Helmut
> --
> View this message in context: http://osgeo-org.1560.x6.nabble.com/vector-VRT-Warning-1-Line-2-Attribute-value-should-be-single-or-double-quoted-tp5221290.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Kyle

From kyle at pobox.com  Wed Aug 26 12:44:10 2015
From: kyle at pobox.com (Kyle Shannon)
Date: Wed, 26 Aug 2015 13:44:10 -0600
Subject: [gdal-dev] Call for discussion on RFC 59 (v2): GDAL/OGR
 utilities as a library
In-Reply-To: <201508262027.32814.even.rouault@spatialys.com>
References: <201508262027.32814.even.rouault@spatialys.com>
Message-ID: <CAJ0mEz0kmYLX2YaMew2Leog7r1V9eqxw1nX+6mwV9Kf=ChnjQA@mail.gmail.com>

Hi,

On Wed, Aug 26, 2015 at 12:27 PM, Even Rouault
<even.rouault at spatialys.com> wrote:
> Hi,
>
> Summer of code 2015 being finished now, Faza's work now include librarification
> of gdalinfo, gdal_translate, gdalwarp and ogr2ogr. Faza will continue working
> on some other utilities.

Which other utilities are being considered?  Has there been any
discussion or thoughts on this?

>
> We'd be happy to hear about your comments, especially on the API. So speak now
> please.

The API looks good to me.

How does documentation work for utilities now?  I guess changes should
be documented in the *_lib.cpp or *_lib.h and also gdal_utilities.dox,
similar to how the utilities closely coupled with certain alg/ APIs
(gdalgrid for example).

>
> The overview of the work is there:
> https://trac.osgeo.org/gdal/wiki/rfc59_utilities_as_a_library

If I am reading correctly, a separate lib will now be created.  Is
this to keep the building cleaner? Is there a problem with just adding
it to the libgdal C API?

>
> I'd like to call for a vote soon as I'd want that to be merged as soon as
> possible, so it gets more widely tested and to avoid increasing merge
> difficulties.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

Thanks.

-- 
Kyle

From even.rouault at spatialys.com  Wed Aug 26 12:55:14 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 26 Aug 2015 21:55:14 +0200
Subject: [gdal-dev] Call for discussion on RFC 59 (v2): GDAL/OGR
	utilities as a library
In-Reply-To: <CAJ0mEz0kmYLX2YaMew2Leog7r1V9eqxw1nX+6mwV9Kf=ChnjQA@mail.gmail.com>
References: <201508262027.32814.even.rouault@spatialys.com>
	<CAJ0mEz0kmYLX2YaMew2Leog7r1V9eqxw1nX+6mwV9Kf=ChnjQA@mail.gmail.com>
Message-ID: <201508262155.14564.even.rouault@spatialys.com>

Le mercredi 26 ao?t 2015 21:44:10, Kyle Shannon a ?crit :
> Hi,
> 
> On Wed, Aug 26, 2015 at 12:27 PM, Even Rouault
> 
> <even.rouault at spatialys.com> wrote:
> > Hi,
> > 
> > Summer of code 2015 being finished now, Faza's work now include
> > librarification of gdalinfo, gdal_translate, gdalwarp and ogr2ogr. Faza
> > will continue working on some other utilities.
> 
> Which other utilities are being considered?  Has there been any
> discussion or thoughts on this?

I think we discussed with Faza about pursuing with gdalbuildvrt. gdaldem would 
probably be interesting too. Anyone interested can contribute to the effort.

> 
> > We'd be happy to hear about your comments, especially on the API. So
> > speak now please.
> 
> The API looks good to me.
> 
> How does documentation work for utilities now? 

You mean for the binaries ? Well, it is unchanged. Mainly in 
gdal_utilities.dox, and for some of them (gdalwarp at least), in the .cpp.

> I guess changes should
> be documented in the *_lib.cpp or *_lib.h and also gdal_utilities.dox,
> similar to how the utilities closely coupled with certain alg/ APIs
> (gdalgrid for example).
> 
> > The overview of the work is there:
> > https://trac.osgeo.org/gdal/wiki/rfc59_utilities_as_a_library
> 
> If I am reading correctly, a separate lib will now be created.  Is
> this to keep the building cleaner? Is there a problem with just adding
> it to the libgdal C API?

The idea was to be a bit more modular, and avoid growing the core library.

> 
> > I'd like to call for a vote soon as I'd want that to be merged as soon as
> > possible, so it gets more widely tested and to avoid increasing merge
> > difficulties.
> > 
> > Even
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> Thanks.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From kyle at pobox.com  Wed Aug 26 12:56:37 2015
From: kyle at pobox.com (Kyle Shannon)
Date: Wed, 26 Aug 2015 13:56:37 -0600
Subject: [gdal-dev] Call for discussion on RFC 59 (v2): GDAL/OGR
 utilities as a library
In-Reply-To: <201508262155.14564.even.rouault@spatialys.com>
References: <201508262027.32814.even.rouault@spatialys.com>
	<CAJ0mEz0kmYLX2YaMew2Leog7r1V9eqxw1nX+6mwV9Kf=ChnjQA@mail.gmail.com>
	<201508262155.14564.even.rouault@spatialys.com>
Message-ID: <CAJ0mEz1E92W0MnpBmLgL5nZA+WugRz+ZjmDmx1cY_6MVhqgcXg@mail.gmail.com>

On Wed, Aug 26, 2015 at 1:55 PM, Even Rouault
<even.rouault at spatialys.com> wrote:
> Le mercredi 26 ao?t 2015 21:44:10, Kyle Shannon a ?crit :
>> Hi,
>>
>> On Wed, Aug 26, 2015 at 12:27 PM, Even Rouault
>>
>> <even.rouault at spatialys.com> wrote:
>> > Hi,
>> >
>> > Summer of code 2015 being finished now, Faza's work now include
>> > librarification of gdalinfo, gdal_translate, gdalwarp and ogr2ogr. Faza
>> > will continue working on some other utilities.
>>
>> Which other utilities are being considered?  Has there been any
>> discussion or thoughts on this?
>
> I think we discussed with Faza about pursuing with gdalbuildvrt. gdaldem would
> probably be interesting too. Anyone interested can contribute to the effort.
>
>>
>> > We'd be happy to hear about your comments, especially on the API. So
>> > speak now please.
>>
>> The API looks good to me.
>>
>> How does documentation work for utilities now?
>
> You mean for the binaries ? Well, it is unchanged. Mainly in
> gdal_utilities.dox, and for some of them (gdalwarp at least), in the .cpp.
>
>> I guess changes should
>> be documented in the *_lib.cpp or *_lib.h and also gdal_utilities.dox,
>> similar to how the utilities closely coupled with certain alg/ APIs
>> (gdalgrid for example).
>>
>> > The overview of the work is there:
>> > https://trac.osgeo.org/gdal/wiki/rfc59_utilities_as_a_library
>>
>> If I am reading correctly, a separate lib will now be created.  Is
>> this to keep the building cleaner? Is there a problem with just adding
>> it to the libgdal C API?
>
> The idea was to be a bit more modular, and avoid growing the core library.
>
>>
>> > I'd like to call for a vote soon as I'd want that to be merged as soon as
>> > possible, so it gets more widely tested and to avoid increasing merge
>> > difficulties.
>> >
>> > Even
>> >
>> > --
>> > Spatialys - Geospatial professional services
>> > http://www.spatialys.com
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev at lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> Thanks.
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

Thanks Even...

-- 
Kyle

From schwehr at gmail.com  Wed Aug 26 17:12:38 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 26 Aug 2015 17:12:38 -0700
Subject: [gdal-dev] Call for discussion on RFC 59 (v2): GDAL/OGR
 utilities as a library
In-Reply-To: <CAJ0mEz1E92W0MnpBmLgL5nZA+WugRz+ZjmDmx1cY_6MVhqgcXg@mail.gmail.com>
References: <201508262027.32814.even.rouault@spatialys.com>
	<CAJ0mEz0kmYLX2YaMew2Leog7r1V9eqxw1nX+6mwV9Kf=ChnjQA@mail.gmail.com>
	<201508262155.14564.even.rouault@spatialys.com>
	<CAJ0mEz1E92W0MnpBmLgL5nZA+WugRz+ZjmDmx1cY_6MVhqgcXg@mail.gmail.com>
Message-ID: <CACmBxyvOdKwB32R+h+U-kDUxAF=o4zCzDmZqrOeW7tdNhcY7WA@mail.gmail.com>

+1 from a non-voting person.  It will definitely make testing a lot cleaner
/ easier without having to run a separate binary to get most of the testing
done.  There is also an enormous amount of python code that runs os.system
/ subprocess.  That code is very error prone / a pain to maintain.

General thoughts / questions:  (I only skimmed, so apologies for dumb
comments)

- Will this stuff be thread safe?
- Is it possible to have an optional ptr to an error return?  This would
make thread safety easier.  Or is that *bUsageError?
- If the argument parsing to options data structure was also a part of the
library, we could test the arg parsing in C++ without having to shell out
to a program.
- Can we get away from 0/FALSE and TRUE/1 for bools in in C++.  e.g.
psOptions->bQuiet

-kurt


On Wed, Aug 26, 2015 at 12:56 PM, Kyle Shannon <kyle at pobox.com> wrote:

> On Wed, Aug 26, 2015 at 1:55 PM, Even Rouault
> <even.rouault at spatialys.com> wrote:
> > Le mercredi 26 ao?t 2015 21:44:10, Kyle Shannon a ?crit :
> >> Hi,
> >>
> >> On Wed, Aug 26, 2015 at 12:27 PM, Even Rouault
> >>
> >> <even.rouault at spatialys.com> wrote:
> >> > Hi,
> >> >
> >> > Summer of code 2015 being finished now, Faza's work now include
> >> > librarification of gdalinfo, gdal_translate, gdalwarp and ogr2ogr.
> Faza
> >> > will continue working on some other utilities.
> >>
> >> Which other utilities are being considered?  Has there been any
> >> discussion or thoughts on this?
> >
> > I think we discussed with Faza about pursuing with gdalbuildvrt. gdaldem
> would
> > probably be interesting too. Anyone interested can contribute to the
> effort.
> >
> >>
> >> > We'd be happy to hear about your comments, especially on the API. So
> >> > speak now please.
> >>
> >> The API looks good to me.
> >>
> >> How does documentation work for utilities now?
> >
> > You mean for the binaries ? Well, it is unchanged. Mainly in
> > gdal_utilities.dox, and for some of them (gdalwarp at least), in the
> .cpp.
> >
> >> I guess changes should
> >> be documented in the *_lib.cpp or *_lib.h and also gdal_utilities.dox,
> >> similar to how the utilities closely coupled with certain alg/ APIs
> >> (gdalgrid for example).
> >>
> >> > The overview of the work is there:
> >> > https://trac.osgeo.org/gdal/wiki/rfc59_utilities_as_a_library
> >>
> >> If I am reading correctly, a separate lib will now be created.  Is
> >> this to keep the building cleaner? Is there a problem with just adding
> >> it to the libgdal C API?
> >
> > The idea was to be a bit more modular, and avoid growing the core
> library.
> >
> >>
> >> > I'd like to call for a vote soon as I'd want that to be merged as
> soon as
> >> > possible, so it gets more widely tested and to avoid increasing merge
> >> > difficulties.
> >> >
> >> > Even
> >> >
> >> > --
> >> > Spatialys - Geospatial professional services
> >> > http://www.spatialys.com
> >> > _______________________________________________
> >> > gdal-dev mailing list
> >> > gdal-dev at lists.osgeo.org
> >> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >> Thanks.
> >
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com
>
> Thanks Even...
>
> --
> Kyle
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150826/3737cb1e/attachment.html>

From warmerdam at pobox.com  Wed Aug 26 18:26:39 2015
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 26 Aug 2015 18:26:39 -0700
Subject: [gdal-dev] Call for discussion on RFC 59 (v2): GDAL/OGR
 utilities as a library
In-Reply-To: <201508262027.32814.even.rouault@spatialys.com>
References: <201508262027.32814.even.rouault@spatialys.com>
Message-ID: <CA+YzLBeF9LyVbAFvRhQwXup+e6qKqizZqNaN5_BjAn2kjfjJ+g@mail.gmail.com>

Even / Faza,

I clearly should have been commenting sooner.

I am concerned that having messy structures of options for each
program is going to complicate maintaining the actually commandline
programs, and that it will still be a fragile and complicated point of
entry as commandline arguments evolve over time.

I'd prefer if the approach had just been to embed the main()'s in a
library and to still pass the exact same vector of arguments (in the
char **argv format) to these functions instead of shelling out a
program.

I'd also have (as usual) preferred this to be embedded in libgdal.so
so there weren't additional library layers to keep track of.  We are
clearly a "kitchen sink" style library - lets own that. :-)

I would love to be able to replace many places where I shell out to
run gdal command line programs with a library call with essentially
the same arguments.

PS. One benefit of built-in "programs" is that I can do things like
invoke gdal_translate on an in memory data by using the right name for
it since it is in the same process space.  Lack of that has frequently
frustrated me.  It would also mean you could register new formats
without having deploy plugin .so's, or register VRT plugin functions
more easily.

Best regards,
Frank


On Wed, Aug 26, 2015 at 11:27 AM, Even Rouault
<even.rouault at spatialys.com> wrote:
> Hi,
>
> Summer of code 2015 being finished now, Faza's work now include librarification
> of gdalinfo, gdal_translate, gdalwarp and ogr2ogr. Faza will continue working
> on some other utilities.
>
> We'd be happy to hear about your comments, especially on the API. So speak now
> please.
>
> The overview of the work is there:
> https://trac.osgeo.org/gdal/wiki/rfc59_utilities_as_a_library
>
> I'd like to call for a vote soon as I'd want that to be merged as soon as
> possible, so it gets more widely tested and to avoid increasing merge
> difficulties.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From gawade.oefp at gmail.com  Wed Aug 26 21:20:41 2015
From: gawade.oefp at gmail.com (Gawade P)
Date: Thu, 27 Aug 2015 09:50:41 +0530
Subject: [gdal-dev] Issue with gdalchksum on Fedora 21 ppc64le?
In-Reply-To: <201508251517.01702.even.rouault@spatialys.com>
References: <CAPS4ckoC9SkGUCsZdvC53cSRrOaVHhNv-EHA8x9d-_Vb=KuqkA@mail.gmail.com>
	<CAPS4ckqXHMeLX=i4Aob=XeJDWnMkJpO1npkQiR=HtAYtHZ6F8g@mail.gmail.com>
	<201508251018.53980.even.rouault@spatialys.com>
	<201508251517.01702.even.rouault@spatialys.com>
Message-ID: <CAPS4ckrnVmtpc6x5RMPgiRvPO3eJ0t514tM_+reVZKP5jb6Hyg@mail.gmail.com>

Good Morning, Even.
I debugged this more, focusing, as you suggested, on the  computation
of the colormap and looks like the difference in the value of the
checksum is due to the difference in calculation of the color map
values for negative slopes. The following lines of code in
frmts/northwood/northwood.cpp, createIP() function are exhibiting
different behavior on intel and ppc:
     for( i = wm + 1; i < index; i++)
    {
        map[i].r = map[wm].r + (unsigned char)(((i - wm) * rslope) + 0.5);
        map[i].g = map[wm].g + (unsigned char)(((i - wm) * gslope) + 0.5);
        map[i].b = map[wm].b + (unsigned char)(((i - wm) * bslope) + 0.5);
    }
primarily, because of the (unsigned char) casting of the second
operand. Looks like the behavior could be undefined if the float value
resulting from the computation of the expression (((i - wm) * bslope)
+ 0.5) is negative, as would be the case for negative slope.
For ppc, the expression  (unsigned char)(((i - wm) * bslope) + 0.5) is
evaluating to zero, whenever the result of (((i - wm) * bslope) + 0.5)
is -ve i.e. for -ve slope

I printed the values of the map in this loop and this is the output on
ppc when bslope is -ve.:
createIP: index = 1760,  wm = 1369
createIP: rslope = 0.652174, gslope = 0.000000, bslope = -0.652174
createIP: map[i].r = 1,  map[i].g = 255,  map[i].b = 255
createIP: map[i].r = 1,  map[i].g = 255,  map[i].b = 255
createIP: map[i].r = 2,  map[i].g = 255,  map[i].b = 255
createIP: map[i].r = 3,  map[i].g = 255,  map[i].b = 255
createIP: map[i].r = 3,  map[i].g = 255,  map[i].b = 255
createIP: map[i].r = 4,  map[i].g = 255,  map[i].b = 255
createIP: map[i].r = 5,  map[i].g = 255,  map[i].b = 255
createIP: map[i].r = 5,  map[i].g = 255,  map[i].b = 255
createIP: map[i].r = 6,  map[i].g = 255,  map[i].b = 255
createIP: map[i].r = 7,  map[i].g = 255,  map[i].b = 255

map[I].b remains constant.

The corresponding output on intel x86_64 is:
createIP: rslope = 0.652174, gslope = 0.000000, bslope = -0.652174
createIP: map[i].r = 1,  map[i].g = 255,  map[i].b = 255
createIP: map[i].r = 1,  map[i].g = 255,  map[i].b = 255
createIP: map[i].r = 2,  map[i].g = 255,  map[i].b = 254
createIP: map[i].r = 3,  map[i].g = 255,  map[i].b = 253
createIP: map[i].r = 3,  map[i].g = 255,  map[i].b = 253
createIP: map[i].r = 4,  map[i].g = 255,  map[i].b = 252
createIP: map[i].r = 5,  map[i].g = 255,  map[i].b = 251
createIP: map[i].r = 5,  map[i].g = 255,  map[i].b = 251
createIP: map[i].r = 6,  map[i].g = 255,  map[i].b = 250
createIP: map[i].r = 7,  map[i].g = 255,  map[i].b = 249

map[I].b shows a constant downward trend, as expected.

To confirm the analysis, I changed the type-casting from (unsigned
char) to (signed char) as follows on ppc and got the expected result:
        map[i].r = map[wm].r + (signed char)(((i - wm) * rslope) + 0.5);
        map[i].g = map[wm].g + (signed char)(((i - wm) * gslope) + 0.5);
        map[i].b = map[wm].b + (signed char)(((i - wm) * bslope) + 0.5);

bash-4.2# gdalchksum.py nwt_grd.grd
28093
33626
20260
25856

I am trying to work on a fix that could correct the behavior on ppc
without impacting the behavior on x86.
Please let me know if you have any thoughts on this.
Thanks!

On Tue, Aug 25, 2015 at 6:47 PM, Even Rouault
<even.rouault at spatialys.com> wrote:
>
>>
>> From a quick look it doesn't appear to be the same issue as for HF2. And
>> I've actually recompiled GDAL with -fsigned-char on x86_64 to simulate
>> ppc64le behaviour regarding char,
>
> I was obviously not well awoken this morning, since I should rather have used
> -funsigned-char to make char behave like unsigned char. Anyway after trying
> this switch, the conclusion is the same...
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From gghiggini at gec-it.com  Wed Aug 26 23:42:34 2015
From: gghiggini at gec-it.com (Giorgio Ghiggini)
Date: Thu, 27 Aug 2015 08:42:34 +0200
Subject: [gdal-dev] R:  Question
In-Reply-To: <201508261922.19362.even.rouault@spatialys.com>
References: <b59987c02018480587058a1a8bb3769f@C119S212VM022.msvyvi.vaha.local>	<mrks8e$3bh$1@ger.gmane.org>
	<201508261922.19362.even.rouault@spatialys.com>
Message-ID: <061901d0e093$8f47dc10$add79430$@com>

Thanks to all I know understood the problem.

I thought the SDKShell.bat was setting the variable permanently, while it is
not.

So running the ogrinfo and ogr2ogr within the SDKShell window it works
perfectly.

Thanks again for your help.

Best regards,
Giorgio


-----Messaggio originale-----
Da: gdal-dev-bounces at lists.osgeo.org
[mailto:gdal-dev-bounces at lists.osgeo.org] Per conto di Even Rouault
Inviato: Wednesday, August 26, 2015 7:22 PM
A: gdal-dev at lists.osgeo.org
Cc: Andre Joost
Oggetto: Re: [gdal-dev] Question

Le mercredi 26 ao?t 2015 19:14:41, Andre Joost a ?crit :
> Am 26.08.2015 um 17:27 schrieb Rahkonen Jukka (MML):
> > I noticed right now while I was
> > testing that I have several GDAL installations in my PATH, perhaps
> > you have the same situation. Write PATH into your command line for
> > checking it.
> 
> To avoid those PATH assignments, I use the zip versions from
> Gisinternals, and expand it into a folder manually. When I run the
> SDKshell.bat, the path is set to that installation for all command line
> tasks, until the command window is closed.
> 
> QGIS and OSGEO4W work the same, so I have no GDAL in my PATH at all. 

That depends on what you can "your" PATH. SDKshell or OSGeo4W define a 
temporary PATH (but indeed do not touch the user default PATH)

> And
> I can run GDAL versions from 1.6 to 2.0 on the same computer in
> parallel.

> I assume this is not possible on Linux.

Something that would be possible on Windows, but not on Linux?, come on ;-)
Of 
course, it is possible to run several GDAL versions on Linux. PATH, 
LD_LIBRARY_PATH, GDAL_DATA, PYTHONPATH are used for that

> 
> HTH,
> Andr? Joost
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


From massi488 at gmail.com  Thu Aug 27 00:41:33 2015
From: massi488 at gmail.com (massimiliano)
Date: Thu, 27 Aug 2015 00:41:33 -0700 (PDT)
Subject: [gdal-dev] Shapefile to Oracle Spatial with OGR2OGR - Unique
 constraint on ID field
Message-ID: <1440661293319-5221365.post@n6.nabble.com>

Hi
I'm trying to load a test shapefile into Oracle using this syntax:

ogr2ogr -f "OCI" OCI:user/pwd at service test.shp -lco dim=2 -lco srid=3003
-nln test

Shapefile contains a non-nullable FID field, which I wish to be used as
unique constraint on the oracle table being created.
However, this unique constraint is not created on Oracle, resulting in the
OGR_FID column being nullable and not unique.
Is this a known behaviour? Of course I could write a simple SQL script as a
workaround, but one would think OGR2OGR should do this automatically.
Thanks.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Shapefile-to-Oracle-Spatial-with-OGR2OGR-Unique-constraint-on-ID-field-tp5221365.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Thu Aug 27 00:54:09 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 27 Aug 2015 09:54:09 +0200
Subject: [gdal-dev] Call for discussion on RFC 59 (v2): GDAL/OGR
	utilities as a library
In-Reply-To: <CACmBxyvOdKwB32R+h+U-kDUxAF=o4zCzDmZqrOeW7tdNhcY7WA@mail.gmail.com>
References: <201508262027.32814.even.rouault@spatialys.com>
	<CAJ0mEz1E92W0MnpBmLgL5nZA+WugRz+ZjmDmx1cY_6MVhqgcXg@mail.gmail.com>
	<CACmBxyvOdKwB32R+h+U-kDUxAF=o4zCzDmZqrOeW7tdNhcY7WA@mail.gmail.com>
Message-ID: <201508270954.09720.even.rouault@spatialys.com>

Hi Kurt,

> +1 from a non-voting person.  It will definitely make testing a lot cleaner
> / easier without having to run a separate binary to get most of the testing
> done.  There is also an enormous amount of python code that runs os.system
> / subprocess.  That code is very error prone / a pain to maintain.
> 
> General thoughts / questions:  (I only skimmed, so apologies for dumb
> comments)
> 
> - Will this stuff be thread safe?

It should. Normally all static stuff from program code is supposed to have been 
removed

> - Is it possible to have an optional ptr to an error return?  This would
> make thread safety easier.  Or is that *bUsageError?

The functions will emit CPLError(). *bUsageError is a flag mainly to be used by 
the command line utilities to display the usage message in case conflicting 
options have been set.

> - If the argument parsing to options data structure was also a part of the
> library, we could test the arg parsing in C++ without having to shell out
> to a program.

Ah you mean something like :

options = GDALTranslateParseOptions("-outsize 150% 150%");
outDS = GDALTranslate("out.tif", inDS, options)

Hum yes maybe that could ease the conversion, but that would also put in stone 
the current syntax of the utilities at the library level.

> - Can we get away from 0/FALSE and TRUE/1 for bools in in C++.  e.g.
> psOptions->bQuiet

The API is intended to be C callable, so bool isn't possible as a type.

Even

> 
> -kurt
> 
> On Wed, Aug 26, 2015 at 12:56 PM, Kyle Shannon <kyle at pobox.com> wrote:
> > On Wed, Aug 26, 2015 at 1:55 PM, Even Rouault
> > 
> > <even.rouault at spatialys.com> wrote:
> > > Le mercredi 26 ao?t 2015 21:44:10, Kyle Shannon a ?crit :
> > >> Hi,
> > >> 
> > >> On Wed, Aug 26, 2015 at 12:27 PM, Even Rouault
> > >> 
> > >> <even.rouault at spatialys.com> wrote:
> > >> > Hi,
> > >> > 
> > >> > Summer of code 2015 being finished now, Faza's work now include
> > >> > librarification of gdalinfo, gdal_translate, gdalwarp and ogr2ogr.
> > 
> > Faza
> > 
> > >> > will continue working on some other utilities.
> > >> 
> > >> Which other utilities are being considered?  Has there been any
> > >> discussion or thoughts on this?
> > > 
> > > I think we discussed with Faza about pursuing with gdalbuildvrt.
> > > gdaldem
> > 
> > would
> > 
> > > probably be interesting too. Anyone interested can contribute to the
> > 
> > effort.
> > 
> > >> > We'd be happy to hear about your comments, especially on the API. So
> > >> > speak now please.
> > >> 
> > >> The API looks good to me.
> > >> 
> > >> How does documentation work for utilities now?
> > > 
> > > You mean for the binaries ? Well, it is unchanged. Mainly in
> > > gdal_utilities.dox, and for some of them (gdalwarp at least), in the
> > 
> > .cpp.
> > 
> > >> I guess changes should
> > >> be documented in the *_lib.cpp or *_lib.h and also gdal_utilities.dox,
> > >> similar to how the utilities closely coupled with certain alg/ APIs
> > >> (gdalgrid for example).
> > >> 
> > >> > The overview of the work is there:
> > >> > https://trac.osgeo.org/gdal/wiki/rfc59_utilities_as_a_library
> > >> 
> > >> If I am reading correctly, a separate lib will now be created.  Is
> > >> this to keep the building cleaner? Is there a problem with just adding
> > >> it to the libgdal C API?
> > > 
> > > The idea was to be a bit more modular, and avoid growing the core
> > 
> > library.
> > 
> > >> > I'd like to call for a vote soon as I'd want that to be merged as
> > 
> > soon as
> > 
> > >> > possible, so it gets more widely tested and to avoid increasing
> > >> > merge difficulties.
> > >> > 
> > >> > Even
> > >> > 
> > >> > --
> > >> > Spatialys - Geospatial professional services
> > >> > http://www.spatialys.com
> > >> > _______________________________________________
> > >> > gdal-dev mailing list
> > >> > gdal-dev at lists.osgeo.org
> > >> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >> 
> > >> Thanks.
> > > 
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
> > 
> > Thanks Even...
> > 
> > --
> > Kyle
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu Aug 27 02:10:15 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 27 Aug 2015 11:10:15 +0200
Subject: [gdal-dev] Call for discussion on RFC 59 (v2): GDAL/OGR
	utilities as a library
In-Reply-To: <CA+YzLBeF9LyVbAFvRhQwXup+e6qKqizZqNaN5_BjAn2kjfjJ+g@mail.gmail.com>
References: <201508262027.32814.even.rouault@spatialys.com>
	<CA+YzLBeF9LyVbAFvRhQwXup+e6qKqizZqNaN5_BjAn2kjfjJ+g@mail.gmail.com>
Message-ID: <201508271110.15411.even.rouault@spatialys.com>

Hi Frank,

> 
> I clearly should have been commenting sooner.
> 
> I am concerned that having messy structures of options for each
> program is going to complicate maintaining the actually commandline
> programs, and that it will still be a fragile and complicated point of
> entry as commandline arguments evolve over time.

Is your concern that adding a new switch could cause some members of the 
option structure to be removed ?

> 
> I'd prefer if the approach had just been to embed the main()'s in a
> library and to still pass the exact same vector of arguments (in the
> char **argv format) to these functions instead of shelling out a
> program.

That was one of the initial idea, but I remember a few people pointed that 
they would prefer an approach with explicit options over the string approach. 
Also, if done strictly like that and also embedding dataset names, we would 
loose the possibility of working with GDAL MEM & OGR Memory datasets for 
example.

One another advantage of the approach of Faza's work is that if you want to 
set a spatial filter (for ogr2ogr) and have already a OGRGeometryH, you can 
assign it to the OGR2OGROptions structure (making it then more powerful than 
currently where you can only pass a rectangle. Althoug we could also make the 
-spat switch to recognize a WKT geometry)

The option structure also contain (at least that's the plan) progress 
functions for progress report / cancellation.

Would the addition of what I mentionned in my previous answer to Kurt, ie a 
function to fill the option structure from the option part of the string 
(excluding dataset names) would be a possible compromise ?

So, they are several possible approaches:

1)

char* args[] = {"-outsize", "150%", "150%", NULL }
options = GDALTranslateOptionsParse(argv);
( and possibly also with a helper to split a single string :
papszArgv = CSLFromCommandLine("-outsize 150% 150%");
options = GDALTranslateOptionsParse(papszArgv);
)

GDALTranslateOptionsSetProgress(options, pfnProgress, pProgressData);
or
options->pfnProgress = pfnProgress;
options->pProgressData = pProgressData;

outDS = GDALTranslate("out.tif", inDS, options)

The question would be if we expose the content of the options structure to 
client code or not.

2) If not, we could as well do:

outDS = GDALTranslate("out.tif", inDS, papszArgv, pfnProgress, pProgressData);

3) and if we drop the possibility of working with GDAL MEM & OGR Memory 
drivers,

error_code = GDALTranslate(papszArgv, pfnProgress, pProgressData);

There's the special case of GDALInfo() where returning a string, especially in 
JSon format, rather than outputing on stdout, is definitely an advantage, so we 
might still want to have ret_string = GDALInfo(papszArgv)

> 
> I'd also have (as usual) preferred this to be embedded in libgdal.so
> so there weren't additional library layers to keep track of.  We are
> clearly a "kitchen sink" style library - lets own that. :-)

OK, I've not a strong opinion on that. That'd be easy to go back on the single 
library approach.

> 
> I would love to be able to replace many places where I shell out to
> run gdal command line programs with a library call with essentially
> the same arguments.
> 
> PS. One benefit of built-in "programs" is that I can do things like
> invoke gdal_translate on an in memory data by using the right name for
> it since it is in the same process space.

Ah you mean /vsimem/ datasets. Yes they would work with the "string approach". 
Above, when I mentionned in-memory datasets, I thought to datasets of the GDAL 
MEM & OGR Memory drivers that you can only create but not open with a name.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu Aug 27 02:40:52 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 27 Aug 2015 11:40:52 +0200
Subject: [gdal-dev] Issue with gdalchksum on Fedora 21 ppc64le?
In-Reply-To: <CAPS4ckrnVmtpc6x5RMPgiRvPO3eJ0t514tM_+reVZKP5jb6Hyg@mail.gmail.com>
References: <CAPS4ckoC9SkGUCsZdvC53cSRrOaVHhNv-EHA8x9d-_Vb=KuqkA@mail.gmail.com>
	<201508251517.01702.even.rouault@spatialys.com>
	<CAPS4ckrnVmtpc6x5RMPgiRvPO3eJ0t514tM_+reVZKP5jb6Hyg@mail.gmail.com>
Message-ID: <201508271140.52512.even.rouault@spatialys.com>

Le jeudi 27 ao?t 2015 06:20:41, Gawade P a ?crit :
> Good Morning, Even.
> I debugged this more, focusing, as you suggested, on the  computation
> of the colormap and looks like the difference in the value of the
> checksum is due to the difference in calculation of the color map
> values for negative slopes. The following lines of code in
> frmts/northwood/northwood.cpp, createIP() function are exhibiting
> different behavior on intel and ppc:
>      for( i = wm + 1; i < index; i++)
>     {
>         map[i].r = map[wm].r + (unsigned char)(((i - wm) * rslope) + 0.5);
>         map[i].g = map[wm].g + (unsigned char)(((i - wm) * gslope) + 0.5);
>         map[i].b = map[wm].b + (unsigned char)(((i - wm) * bslope) + 0.5);
>     }
> primarily, because of the (unsigned char) casting of the second
> operand. Looks like the behavior could be undefined if the float value
> resulting from the computation of the expression (((i - wm) * bslope)
> + 0.5) is negative, as would be the case for negative slope.
> For ppc, the expression  (unsigned char)(((i - wm) * bslope) + 0.5) is
> evaluating to zero, whenever the result of (((i - wm) * bslope) + 0.5)
> is -ve i.e. for -ve slope

Interesting. It is likely that the result of the cast (unsigned 
char)negative_floating_point_value is undefined by the C standard and there 
might be differences in behaviour according to the CPU here (seems to be 
confirmed by http://stackoverflow.com/questions/2490600/iphone-floats-cast-to-
unsigned-ints-get-set-to-0-if-they-are-negative)

I think the following should be portable:

map[i].r = (unsigned char)(map[wm].r + (i - wm) * rslope + 0.5);
map[i].g = (unsigned char)(map[wm].g + (i - wm) * gslope + 0.5);
map[i].b = (unsigned char)(map[wm].b + (i - wm) * bslope + 0.5);

Could you confirm ?

W might want to explictly clamp to [0,255] before casting, but according to 
the formulas of the slope, I'm confident the result should already be in 
[0,255.X] range.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gawade.oefp at gmail.com  Thu Aug 27 03:23:07 2015
From: gawade.oefp at gmail.com (Gawade P)
Date: Thu, 27 Aug 2015 15:53:07 +0530
Subject: [gdal-dev] Issue with gdalchksum on Fedora 21 ppc64le?
In-Reply-To: <201508271140.52512.even.rouault@spatialys.com>
References: <CAPS4ckoC9SkGUCsZdvC53cSRrOaVHhNv-EHA8x9d-_Vb=KuqkA@mail.gmail.com>
	<201508251517.01702.even.rouault@spatialys.com>
	<CAPS4ckrnVmtpc6x5RMPgiRvPO3eJ0t514tM_+reVZKP5jb6Hyg@mail.gmail.com>
	<201508271140.52512.even.rouault@spatialys.com>
Message-ID: <CAPS4ckpQf-1JuwtfEu-bS0BWB5cjtdkM049d-hJV9G6FUkOrzA@mail.gmail.com>

Thanks, Even.I have tried this change on ppc and there were some
differences in the map values resulting in a small deviation in the
final checksum value compared to the current output on x86
The output on ppc with this change is:
bash-4.2# gdalchksum.py nwt_grd.grd
28093
33690
20365
25856
The expected values for band 2 and 3 are :
33626
20260
I have not tried this change on x86, will try and let you know. Could
there be any implications of these changed values elsewhere in the
code (Assuming that they will change on x86 as well)? I believe some
test cases might fail as well...

On Thu, Aug 27, 2015 at 3:10 PM, Even Rouault
<even.rouault at spatialys.com> wrote:
> Le jeudi 27 ao?t 2015 06:20:41, Gawade P a ?crit :
>> Good Morning, Even.
>> I debugged this more, focusing, as you suggested, on the  computation
>> of the colormap and looks like the difference in the value of the
>> checksum is due to the difference in calculation of the color map
>> values for negative slopes. The following lines of code in
>> frmts/northwood/northwood.cpp, createIP() function are exhibiting
>> different behavior on intel and ppc:
>>      for( i = wm + 1; i < index; i++)
>>     {
>>         map[i].r = map[wm].r + (unsigned char)(((i - wm) * rslope) + 0.5);
>>         map[i].g = map[wm].g + (unsigned char)(((i - wm) * gslope) + 0.5);
>>         map[i].b = map[wm].b + (unsigned char)(((i - wm) * bslope) + 0.5);
>>     }
>> primarily, because of the (unsigned char) casting of the second
>> operand. Looks like the behavior could be undefined if the float value
>> resulting from the computation of the expression (((i - wm) * bslope)
>> + 0.5) is negative, as would be the case for negative slope.
>> For ppc, the expression  (unsigned char)(((i - wm) * bslope) + 0.5) is
>> evaluating to zero, whenever the result of (((i - wm) * bslope) + 0.5)
>> is -ve i.e. for -ve slope
>
> Interesting. It is likely that the result of the cast (unsigned
> char)negative_floating_point_value is undefined by the C standard and there
> might be differences in behaviour according to the CPU here (seems to be
> confirmed by http://stackoverflow.com/questions/2490600/iphone-floats-cast-to-
> unsigned-ints-get-set-to-0-if-they-are-negative)
>
> I think the following should be portable:
>
> map[i].r = (unsigned char)(map[wm].r + (i - wm) * rslope + 0.5);
> map[i].g = (unsigned char)(map[wm].g + (i - wm) * gslope + 0.5);
> map[i].b = (unsigned char)(map[wm].b + (i - wm) * bslope + 0.5);
>
> Could you confirm ?
>
> W might want to explictly clamp to [0,255] before casting, but according to
> the formulas of the slope, I'm confident the result should already be in
> [0,255.X] range.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From even.rouault at spatialys.com  Thu Aug 27 03:30:15 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 27 Aug 2015 12:30:15 +0200
Subject: [gdal-dev] Issue with gdalchksum on Fedora 21 ppc64le?
In-Reply-To: <CAPS4ckpQf-1JuwtfEu-bS0BWB5cjtdkM049d-hJV9G6FUkOrzA@mail.gmail.com>
References: <CAPS4ckoC9SkGUCsZdvC53cSRrOaVHhNv-EHA8x9d-_Vb=KuqkA@mail.gmail.com>
	<201508271140.52512.even.rouault@spatialys.com>
	<CAPS4ckpQf-1JuwtfEu-bS0BWB5cjtdkM049d-hJV9G6FUkOrzA@mail.gmail.com>
Message-ID: <201508271230.15352.even.rouault@spatialys.com>

Le jeudi 27 ao?t 2015 12:23:07, Gawade P a ?crit :
> Thanks, Even.I have tried this change on ppc and there were some
> differences in the map values resulting in a small deviation in the
> final checksum value compared to the current output on x86
> The output on ppc with this change is:
> bash-4.2# gdalchksum.py nwt_grd.grd
> 28093
> 33690
> 20365
> 25856
> The expected values for band 2 and 3 are :
> 33626
> 20260

Interesting, I wouldn't have thought this to change the result of the 
rounding, but who knows... Could you compare the color tables to check that 
the differences are just within a +/- 1 amplitude ?

Thinking more, a cause for a difference of rounding should happen with negative 
values, since casting truncates to the upper integer in case of negative 
value. I'd think my proposed formula to be (slightly) more accurate in case of 
negative slope, since it will only cast positive values.

> I have not tried this change on x86, will try and let you know. Could
> there be any implications of these changed values elsewhere in the
> code (Assuming that they will change on x86 as well)? I believe some
> test cases might fail as well...

Yes, once we get same results on both platforms, adjusting the expected 
checksums of nwt_grd.py / nwt_grc.py scripts might be needed.

> 
> On Thu, Aug 27, 2015 at 3:10 PM, Even Rouault
> 
> <even.rouault at spatialys.com> wrote:
> > Le jeudi 27 ao?t 2015 06:20:41, Gawade P a ?crit :
> >> Good Morning, Even.
> >> I debugged this more, focusing, as you suggested, on the  computation
> >> of the colormap and looks like the difference in the value of the
> >> checksum is due to the difference in calculation of the color map
> >> values for negative slopes. The following lines of code in
> >> frmts/northwood/northwood.cpp, createIP() function are exhibiting
> >> 
> >> different behavior on intel and ppc:
> >>      for( i = wm + 1; i < index; i++)
> >>     
> >>     {
> >>     
> >>         map[i].r = map[wm].r + (unsigned char)(((i - wm) * rslope) +
> >>         0.5); map[i].g = map[wm].g + (unsigned char)(((i - wm) *
> >>         gslope) + 0.5); map[i].b = map[wm].b + (unsigned char)(((i -
> >>         wm) * bslope) + 0.5);
> >>     
> >>     }
> >> 
> >> primarily, because of the (unsigned char) casting of the second
> >> operand. Looks like the behavior could be undefined if the float value
> >> resulting from the computation of the expression (((i - wm) * bslope)
> >> + 0.5) is negative, as would be the case for negative slope.
> >> For ppc, the expression  (unsigned char)(((i - wm) * bslope) + 0.5) is
> >> evaluating to zero, whenever the result of (((i - wm) * bslope) + 0.5)
> >> is -ve i.e. for -ve slope
> > 
> > Interesting. It is likely that the result of the cast (unsigned
> > char)negative_floating_point_value is undefined by the C standard and
> > there might be differences in behaviour according to the CPU here (seems
> > to be confirmed by
> > http://stackoverflow.com/questions/2490600/iphone-floats-cast-to-
> > unsigned-ints-get-set-to-0-if-they-are-negative)
> > 
> > I think the following should be portable:
> > 
> > map[i].r = (unsigned char)(map[wm].r + (i - wm) * rslope + 0.5);
> > map[i].g = (unsigned char)(map[wm].g + (i - wm) * gslope + 0.5);
> > map[i].b = (unsigned char)(map[wm].b + (i - wm) * bslope + 0.5);
> > 
> > Could you confirm ?
> > 
> > W might want to explictly clamp to [0,255] before casting, but according
> > to the formulas of the slope, I'm confident the result should already be
> > in [0,255.X] range.
> > 
> > Even
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From robert.coup at koordinates.com  Thu Aug 27 04:19:02 2015
From: robert.coup at koordinates.com (Robert Coup)
Date: Thu, 27 Aug 2015 12:19:02 +0100
Subject: [gdal-dev] Call for discussion on RFC 59 (v2): GDAL/OGR
 utilities as a library
In-Reply-To: <CA+YzLBeF9LyVbAFvRhQwXup+e6qKqizZqNaN5_BjAn2kjfjJ+g@mail.gmail.com>
References: <201508262027.32814.even.rouault@spatialys.com>
	<CA+YzLBeF9LyVbAFvRhQwXup+e6qKqizZqNaN5_BjAn2kjfjJ+g@mail.gmail.com>
Message-ID: <CAFLLRpLMP88Jcj_GVnCqcdJUCDp3RGOZ5whwHZ8ABtZcLFzW0Q@mail.gmail.com>

Hi Frank,

I was one of the original people who argued against the "array of strings"
approach...

On 27 August 2015 at 02:26, Frank Warmerdam <warmerdam at pobox.com> wrote:

> I clearly should have been commenting sooner.
>

Several months ago :p


>
> I am concerned that having messy structures of options for each
> program is going to complicate maintaining the actually commandline
> programs, and that it will still be a fragile and complicated point of
> entry as commandline arguments evolve over time.
>

The commandline tools eventually become string-parsing and wrapping of the
corresponding library tool - I'm not sure that makes it fragile &
complicated? Means that the library-ified apps are *at least as*
flexible/expressive/powerful
as the command-line tools.


>
> I'd prefer if the approach had just been to embed the main()'s in a
> library and to still pass the exact same vector of arguments (in the
> char **argv format) to these functions instead of shelling out a
> program.
>

That kinda defeats the whole point - a huge array of complex string-ified
arguments is what we're all doing at the moment, wrapped in an subprocess
call. Some options take multiple arguments in multiple strings, others take
multiple arguments in single strings, it's massively confusing. And we all
have big pipelines of chained gdalwarp/gdal_translate/etc code...

What we were striving for was to make it distinctly *better*:

   - progress/logging/error handling
   - options that accept geometries or SRS or in-memory datasets without
   having to re-serialize them and/or utilise tempfiles
   - easily applying the same operations over multiple datasets
   - configuration option defaults



>
> I would love to be able to replace many places where I shell out to
> run gdal command line programs with a library call with essentially
> the same arguments.
>

Sure, so it should be straightforward to do that *as well*, though besides
in-memory data (as you mention) you're getting very little benefit.

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150827/a553986d/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Aug 27 05:26:00 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Thu, 27 Aug 2015 12:26:00 +0000 (UTC)
Subject: [gdal-dev] How to read ElasticSearch filters from file?
Message-ID: <loom.20150827T135353-815@post.gmane.org>

Hi,

I was trying the new read capabilities of the ElasticSearch driver
http://www.gdal.org/drv_elasticsearch.html and I found it extraordinary hard
to use the json filters from the command line on Windows. It is hard also 
with curl so I saved the filters on disk and read them as -d @file.json and
that worked well for me.

I tried if I could re-use those proved filters with ogrinfo and ogr2ogr by
using --optfile but with poor success.

Could it be possible to add a new --config option or perhaps -oo open option
"ES_QUERY" for reading the json query/filter from a file just like curl does
with -d @file.json? The same file should work unmodified for both software.
I think especially newlines which make the filters more readable and also
most  filter examples in the net are formatted with newlines. See the
examples at
https://www.elastic.co/guide/en/elasticsearch/guide/current/search-in-depth.html


-Jukka Rahkonen-


From even.rouault at spatialys.com  Thu Aug 27 05:43:39 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 27 Aug 2015 14:43:39 +0200
Subject: [gdal-dev] How to read ElasticSearch filters from file?
In-Reply-To: <loom.20150827T135353-815@post.gmane.org>
References: <loom.20150827T135353-815@post.gmane.org>
Message-ID: <201508271443.39427.even.rouault@spatialys.com>

Le jeudi 27 ao?t 2015 14:26:00, Jukka Rahkonen a ?crit :
> Hi,
> 
> I was trying the new read capabilities of the ElasticSearch driver
> http://www.gdal.org/drv_elasticsearch.html and I found it extraordinary
> hard to use the json filters from the command line on Windows. It is hard
> also with curl so I saved the filters on disk and read them as -d
> @file.json and that worked well for me.
> 
> I tried if I could re-use those proved filters with ogrinfo and ogr2ogr by
> using --optfile but with poor success.
> 
> Could it be possible to add a new --config option or perhaps -oo open
> option "ES_QUERY" for reading the json query/filter from a file just like
> curl does with -d @file.json? The same file should work unmodified for
> both software. I think especially newlines which make the filters more
> readable and also most  filter examples in the net are formatted with
> newlines. See the examples at
> https://www.elastic.co/guide/en/elasticsearch/guide/current/search-in-depth
> .html

Hi Jukka,

Ah, might be true. The Unix shell allows to paste things like:

$ ogrinfo es: poly2 -where '{ "filter" :
  { "term" :
    { 
       "EAS_ID": 166
    }
  }
}'

And --optfile indeed will consider stuff on several lines as different options.

What about "ogrinfo ES: the_layer -where @filter.json" ?

Iniitally, I though this could be a hack specific to the ES driver. But there's 
the same thing with the mongodb driver. So perhaps an extended behaviour of 
the -where options of ogrinfo / ogr2ogr that would do the file reading and 
transmit the expanded filter to the driver ? Could be usefull for -sql as well 
I guess.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Thu Aug 27 06:20:31 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Thu, 27 Aug 2015 13:20:31 +0000 (UTC)
Subject: [gdal-dev] How to read ElasticSearch filters from file?
References: <loom.20150827T135353-815@post.gmane.org>
	<201508271443.39427.even.rouault@spatialys.com>
Message-ID: <loom.20150827T150632-758@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:


> 
> Hi Jukka,
> 
> Ah, might be true. The Unix shell allows to paste things like:
> 
> What about "ogrinfo ES: the_layer -where  <at> filter.json" ?
> 
> Iniitally, I though this could be a hack specific to the ES driver. But
there's 
> the same thing with the mongodb driver. So perhaps an extended behaviour of 
> the -where options of ogrinfo / ogr2ogr that would do the file reading and 
> transmit the expanded filter to the driver ? Could be usefull for -sql as
well 
> I guess.

Hi,

I can't invent anything better than -where <at> filter.json and <at> is also
 used for the same purpose by curl and Oracle PL/SQL so we could call it as
a  de facto standard.

Which one should win if -spat and -where @... are both feeding a spatial
filter? Should it be "either-or", or "both" as a combined filter with AND in
between?

-Jukka Rahkonen-




From even.rouault at spatialys.com  Thu Aug 27 06:38:53 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 27 Aug 2015 15:38:53 +0200
Subject: [gdal-dev] How to read ElasticSearch filters from file?
In-Reply-To: <loom.20150827T150632-758@post.gmane.org>
References: <loom.20150827T135353-815@post.gmane.org>
	<201508271443.39427.even.rouault@spatialys.com>
	<loom.20150827T150632-758@post.gmane.org>
Message-ID: <201508271538.53507.even.rouault@spatialys.com>

> 
> Which one should win if -spat and -where @... are both feeding a spatial
> filter? Should it be "either-or", or "both" as a combined filter with AND
> in between?

This is driver specific.
* For MongoDB, the -spat and -where filters are combined with a AND, which is I 
guess the more logical behaviour.
* For ES, if -where is specified, -spat is ignored. This is mainly because it 
looked technically harder to create a valid combined filter. Could perhaps be 
improved. I dunno. This behaviour is at least documented in the driver doc 
page.

> 
> -Jukka Rahkonen-
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From schwehr at gmail.com  Thu Aug 27 09:19:30 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 27 Aug 2015 09:19:30 -0700
Subject: [gdal-dev] Call for discussion on RFC 59 (v2): GDAL/OGR
 utilities as a library
In-Reply-To: <201508270954.09720.even.rouault@spatialys.com>
References: <201508262027.32814.even.rouault@spatialys.com>
	<CAJ0mEz1E92W0MnpBmLgL5nZA+WugRz+ZjmDmx1cY_6MVhqgcXg@mail.gmail.com>
	<CACmBxyvOdKwB32R+h+U-kDUxAF=o4zCzDmZqrOeW7tdNhcY7WA@mail.gmail.com>
	<201508270954.09720.even.rouault@spatialys.com>
Message-ID: <CACmBxys46r5i71K=MdKvmUWAt2k6ShGntnci5VUtMvyd6vC8Zw@mail.gmail.com>

Oh.. https://en.wikipedia.org/wiki/C_(programming_language)#Keywords  ->
 C99 added _Bool.  Yuck.  I thought that C matched C++ with bool.  So never
mind this comment on bool.


> > - Can we get away from 0/FALSE and TRUE/1 for bools in in C++.  e.g.
> > psOptions->bQuiet
>
> The API is intended to be C callable, so bool isn't possible as a type.
>
> Even
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150827/9a74edf5/attachment.html>

From gawade.oefp at gmail.com  Thu Aug 27 21:44:28 2015
From: gawade.oefp at gmail.com (Gawade P)
Date: Fri, 28 Aug 2015 10:14:28 +0530
Subject: [gdal-dev] Issue with gdalchksum on Fedora 21 ppc64le?
In-Reply-To: <201508271230.15352.even.rouault@spatialys.com>
References: <CAPS4ckoC9SkGUCsZdvC53cSRrOaVHhNv-EHA8x9d-_Vb=KuqkA@mail.gmail.com>
	<201508271140.52512.even.rouault@spatialys.com>
	<CAPS4ckpQf-1JuwtfEu-bS0BWB5cjtdkM049d-hJV9G6FUkOrzA@mail.gmail.com>
	<201508271230.15352.even.rouault@spatialys.com>
Message-ID: <CAPS4ckqc5ZqP8eBiNSowaoKPdeU_1CsT=q1+haGQEK9sC3rh6g@mail.gmail.com>

Hi Even,
Please find my response below:
>Interesting, I wouldn't have thought this to change the result of the
>rounding, but who knows... Could you compare the color tables to check that
>the differences are just within a +/- 1 amplitude ?
Yes. The map does not change for +ve slope values. For -ve slope
values there is a consistent deviation of -1 through all values
Attaching a sample data set for your reference.

>Yes, once we get same results on both platforms, adjusting the expected
>checksums of nwt_grd.py / nwt_grc.py scripts might be needed.
Confirmed that we are getting the same results on both platforms.
Looks like no changes are needed in nwt_grc.py. It still passes and
checksum value is still same.
Updated nwt_grd.py as follows, and it passes:
    tst2 = gdaltest.GDALTest( 'NWT_GRD', 'nwt_grd.grd', 2, 33690 )
    status2 = tst2.testOpen()
    tst3 = gdaltest.GDALTest( 'NWT_GRD', 'nwt_grd.grd', 3, 20365 )
    status3 = tst3.testOpen()

Please let me know if any more verification is required. Thanks!


On Thu, Aug 27, 2015 at 4:00 PM, Even Rouault
<even.rouault at spatialys.com> wrote:
> Le jeudi 27 ao?t 2015 12:23:07, Gawade P a ?crit :
>> Thanks, Even.I have tried this change on ppc and there were some
>> differences in the map values resulting in a small deviation in the
>> final checksum value compared to the current output on x86
>> The output on ppc with this change is:
>> bash-4.2# gdalchksum.py nwt_grd.grd
>> 28093
>> 33690
>> 20365
>> 25856
>> The expected values for band 2 and 3 are :
>> 33626
>> 20260
>
> Interesting, I wouldn't have thought this to change the result of the
> rounding, but who knows... Could you compare the color tables to check that
> the differences are just within a +/- 1 amplitude ?
>
> Thinking more, a cause for a difference of rounding should happen with negative
> values, since casting truncates to the upper integer in case of negative
> value. I'd think my proposed formula to be (slightly) more accurate in case of
> negative slope, since it will only cast positive values.
>
>> I have not tried this change on x86, will try and let you know. Could
>> there be any implications of these changed values elsewhere in the
>> code (Assuming that they will change on x86 as well)? I believe some
>> test cases might fail as well...
>
> Yes, once we get same results on both platforms, adjusting the expected
> checksums of nwt_grd.py / nwt_grc.py scripts might be needed.
>
>>
>> On Thu, Aug 27, 2015 at 3:10 PM, Even Rouault
>>
>> <even.rouault at spatialys.com> wrote:
>> > Le jeudi 27 ao?t 2015 06:20:41, Gawade P a ?crit :
>> >> Good Morning, Even.
>> >> I debugged this more, focusing, as you suggested, on the  computation
>> >> of the colormap and looks like the difference in the value of the
>> >> checksum is due to the difference in calculation of the color map
>> >> values for negative slopes. The following lines of code in
>> >> frmts/northwood/northwood.cpp, createIP() function are exhibiting
>> >>
>> >> different behavior on intel and ppc:
>> >>      for( i = wm + 1; i < index; i++)
>> >>
>> >>     {
>> >>
>> >>         map[i].r = map[wm].r + (unsigned char)(((i - wm) * rslope) +
>> >>         0.5); map[i].g = map[wm].g + (unsigned char)(((i - wm) *
>> >>         gslope) + 0.5); map[i].b = map[wm].b + (unsigned char)(((i -
>> >>         wm) * bslope) + 0.5);
>> >>
>> >>     }
>> >>
>> >> primarily, because of the (unsigned char) casting of the second
>> >> operand. Looks like the behavior could be undefined if the float value
>> >> resulting from the computation of the expression (((i - wm) * bslope)
>> >> + 0.5) is negative, as would be the case for negative slope.
>> >> For ppc, the expression  (unsigned char)(((i - wm) * bslope) + 0.5) is
>> >> evaluating to zero, whenever the result of (((i - wm) * bslope) + 0.5)
>> >> is -ve i.e. for -ve slope
>> >
>> > Interesting. It is likely that the result of the cast (unsigned
>> > char)negative_floating_point_value is undefined by the C standard and
>> > there might be differences in behaviour according to the CPU here (seems
>> > to be confirmed by
>> > http://stackoverflow.com/questions/2490600/iphone-floats-cast-to-
>> > unsigned-ints-get-set-to-0-if-they-are-negative)
>> >
>> > I think the following should be portable:
>> >
>> > map[i].r = (unsigned char)(map[wm].r + (i - wm) * rslope + 0.5);
>> > map[i].g = (unsigned char)(map[wm].g + (i - wm) * gslope + 0.5);
>> > map[i].b = (unsigned char)(map[wm].b + (i - wm) * bslope + 0.5);
>> >
>> > Could you confirm ?
>> >
>> > W might want to explictly clamp to [0,255] before casting, but according
>> > to the formulas of the slope, I'm confident the result should already be
>> > in [0,255.X] range.
>> >
>> > Even
>> >
>> > --
>> > Spatialys - Geospatial professional services
>> > http://www.spatialys.com
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rgb_map.xls
Type: application/vnd.ms-excel
Size: 33792 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150828/f45c2570/attachment-0001.xls>

From even.rouault at spatialys.com  Fri Aug 28 00:22:18 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 28 Aug 2015 09:22:18 +0200
Subject: [gdal-dev] Issue with gdalchksum on Fedora 21 ppc64le?
In-Reply-To: <CAPS4ckqc5ZqP8eBiNSowaoKPdeU_1CsT=q1+haGQEK9sC3rh6g@mail.gmail.com>
References: <CAPS4ckoC9SkGUCsZdvC53cSRrOaVHhNv-EHA8x9d-_Vb=KuqkA@mail.gmail.com>
	<201508271230.15352.even.rouault@spatialys.com>
	<CAPS4ckqc5ZqP8eBiNSowaoKPdeU_1CsT=q1+haGQEK9sC3rh6g@mail.gmail.com>
Message-ID: <201508280922.19563.even.rouault@spatialys.com>

Gawade,

Looks good to me. Could you prepare a patch for the changes and attach it to a 
ticket ? Thanks

Even

> Hi Even,
> 
> Please find my response below:
> >Interesting, I wouldn't have thought this to change the result of the
> >rounding, but who knows... Could you compare the color tables to check
> >that the differences are just within a +/- 1 amplitude ?
> 
> Yes. The map does not change for +ve slope values. For -ve slope
> values there is a consistent deviation of -1 through all values
> Attaching a sample data set for your reference.
> 
> >Yes, once we get same results on both platforms, adjusting the expected
> >checksums of nwt_grd.py / nwt_grc.py scripts might be needed.
> 
> Confirmed that we are getting the same results on both platforms.
> Looks like no changes are needed in nwt_grc.py. It still passes and
> checksum value is still same.
> Updated nwt_grd.py as follows, and it passes:
>     tst2 = gdaltest.GDALTest( 'NWT_GRD', 'nwt_grd.grd', 2, 33690 )
>     status2 = tst2.testOpen()
>     tst3 = gdaltest.GDALTest( 'NWT_GRD', 'nwt_grd.grd', 3, 20365 )
>     status3 = tst3.testOpen()
> 
> Please let me know if any more verification is required. Thanks!
> 
> 
> On Thu, Aug 27, 2015 at 4:00 PM, Even Rouault
> 
> <even.rouault at spatialys.com> wrote:
> > Le jeudi 27 ao?t 2015 12:23:07, Gawade P a ?crit :
> >> Thanks, Even.I have tried this change on ppc and there were some
> >> differences in the map values resulting in a small deviation in the
> >> final checksum value compared to the current output on x86
> >> The output on ppc with this change is:
> >> bash-4.2# gdalchksum.py nwt_grd.grd
> >> 28093
> >> 33690
> >> 20365
> >> 25856
> >> The expected values for band 2 and 3 are :
> >> 33626
> >> 20260
> > 
> > Interesting, I wouldn't have thought this to change the result of the
> > rounding, but who knows... Could you compare the color tables to check
> > that the differences are just within a +/- 1 amplitude ?
> > 
> > Thinking more, a cause for a difference of rounding should happen with
> > negative values, since casting truncates to the upper integer in case of
> > negative value. I'd think my proposed formula to be (slightly) more
> > accurate in case of negative slope, since it will only cast positive
> > values.
> > 
> >> I have not tried this change on x86, will try and let you know. Could
> >> there be any implications of these changed values elsewhere in the
> >> code (Assuming that they will change on x86 as well)? I believe some
> >> test cases might fail as well...
> > 
> > Yes, once we get same results on both platforms, adjusting the expected
> > checksums of nwt_grd.py / nwt_grc.py scripts might be needed.
> > 
> >> On Thu, Aug 27, 2015 at 3:10 PM, Even Rouault
> >> 
> >> <even.rouault at spatialys.com> wrote:
> >> > Le jeudi 27 ao?t 2015 06:20:41, Gawade P a ?crit :
> >> >> Good Morning, Even.
> >> >> I debugged this more, focusing, as you suggested, on the  computation
> >> >> of the colormap and looks like the difference in the value of the
> >> >> checksum is due to the difference in calculation of the color map
> >> >> values for negative slopes. The following lines of code in
> >> >> frmts/northwood/northwood.cpp, createIP() function are exhibiting
> >> >> 
> >> >> different behavior on intel and ppc:
> >> >>      for( i = wm + 1; i < index; i++)
> >> >>     
> >> >>     {
> >> >>     
> >> >>         map[i].r = map[wm].r + (unsigned char)(((i - wm) * rslope) +
> >> >>         0.5); map[i].g = map[wm].g + (unsigned char)(((i - wm) *
> >> >>         gslope) + 0.5); map[i].b = map[wm].b + (unsigned char)(((i -
> >> >>         wm) * bslope) + 0.5);
> >> >>     
> >> >>     }
> >> >> 
> >> >> primarily, because of the (unsigned char) casting of the second
> >> >> operand. Looks like the behavior could be undefined if the float
> >> >> value resulting from the computation of the expression (((i - wm) *
> >> >> bslope) + 0.5) is negative, as would be the case for negative slope.
> >> >> For ppc, the expression  (unsigned char)(((i - wm) * bslope) + 0.5)
> >> >> is evaluating to zero, whenever the result of (((i - wm) * bslope) +
> >> >> 0.5) is -ve i.e. for -ve slope
> >> > 
> >> > Interesting. It is likely that the result of the cast (unsigned
> >> > char)negative_floating_point_value is undefined by the C standard and
> >> > there might be differences in behaviour according to the CPU here
> >> > (seems to be confirmed by
> >> > http://stackoverflow.com/questions/2490600/iphone-floats-cast-to-
> >> > unsigned-ints-get-set-to-0-if-they-are-negative)
> >> > 
> >> > I think the following should be portable:
> >> > 
> >> > map[i].r = (unsigned char)(map[wm].r + (i - wm) * rslope + 0.5);
> >> > map[i].g = (unsigned char)(map[wm].g + (i - wm) * gslope + 0.5);
> >> > map[i].b = (unsigned char)(map[wm].b + (i - wm) * bslope + 0.5);
> >> > 
> >> > Could you confirm ?
> >> > 
> >> > W might want to explictly clamp to [0,255] before casting, but
> >> > according to the formulas of the slope, I'm confident the result
> >> > should already be in [0,255.X] range.
> >> > 
> >> > Even
> >> > 
> >> > --
> >> > Spatialys - Geospatial professional services
> >> > http://www.spatialys.com
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Fri Aug 28 01:48:45 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Fri, 28 Aug 2015 08:48:45 +0000 (UTC)
Subject: [gdal-dev] CSV driver does not understand allCountries.txt
Message-ID: <loom.20150828T103947-785@post.gmane.org>

Hi,

I have understood that CSV driver should automatically recognize the
allCountries.txt file from geonames.org. However, my GDAL 2.0 on Windows
does not find any fields from the file. What is the expected output of

ogrinfo -al -so -nocount -noextent allCountries.txt

For me it only
Geometry: None
Layer SRS WKT: (unknown)
[the first line of the allCountries.txt file]


-Jukka Rahkonen-


From jukka.rahkonen at maanmittauslaitos.fi  Fri Aug 28 02:04:26 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Fri, 28 Aug 2015 09:04:26 +0000 (UTC)
Subject: [gdal-dev] CSV driver does not understand allCountries.txt
References: <loom.20150828T103947-785@post.gmane.org>
Message-ID: <loom.20150828T105900-650@post.gmane.org>

Jukka Rahkonen <jukka.rahkonen <at> maanmittauslaitos.fi> writes:


> Hi,
> 
> I have understood that CSV driver should automatically recognize the
> allCountries.txt file from geonames.org. However, my GDAL 2.0 on Windows
> does not find any fields from the file. What is the expected output of
> 
> ogrinfo -al -so -nocount -noextent allCountries.txt
> 
> For me it only
> Geometry: None
> Layer SRS WKT: (unknown)
> [the first line of the allCountries.txt file]

By closer look it is not exactly that way. However, I guess that the
structure of data is changed.
http://download.geonames.org/export/dump/readme.txt is listing fields
"name", "asciiname", "alternatenames" but the data sample that we have in 
autotest/ogr/data/allCountries.txt?rev=27748
seems to have just one name field.



> 
> -Jukka Rahkonen-
> 





From gawade.oefp at gmail.com  Fri Aug 28 02:18:00 2015
From: gawade.oefp at gmail.com (Gawade P)
Date: Fri, 28 Aug 2015 14:48:00 +0530
Subject: [gdal-dev] Issue with gdalchksum on Fedora 21 ppc64le?
In-Reply-To: <201508280922.19563.even.rouault@spatialys.com>
References: <CAPS4ckoC9SkGUCsZdvC53cSRrOaVHhNv-EHA8x9d-_Vb=KuqkA@mail.gmail.com>
	<201508271230.15352.even.rouault@spatialys.com>
	<CAPS4ckqc5ZqP8eBiNSowaoKPdeU_1CsT=q1+haGQEK9sC3rh6g@mail.gmail.com>
	<201508280922.19563.even.rouault@spatialys.com>
Message-ID: <CAPS4cko8S2762BUcB+C7=LOiVqb1wqmLQK4MeV5OqOMkJF9MYQ@mail.gmail.com>

Thanks, Even. Sure, I will run the full test suite, prepare the patch,
raise a ticket and update it.

On Fri, Aug 28, 2015 at 12:52 PM, Even Rouault
<even.rouault at spatialys.com> wrote:
> Gawade,
>
> Looks good to me. Could you prepare a patch for the changes and attach it to a
> ticket ? Thanks
>
> Even
>
>> Hi Even,
>>
>> Please find my response below:
>> >Interesting, I wouldn't have thought this to change the result of the
>> >rounding, but who knows... Could you compare the color tables to check
>> >that the differences are just within a +/- 1 amplitude ?
>>
>> Yes. The map does not change for +ve slope values. For -ve slope
>> values there is a consistent deviation of -1 through all values
>> Attaching a sample data set for your reference.
>>
>> >Yes, once we get same results on both platforms, adjusting the expected
>> >checksums of nwt_grd.py / nwt_grc.py scripts might be needed.
>>
>> Confirmed that we are getting the same results on both platforms.
>> Looks like no changes are needed in nwt_grc.py. It still passes and
>> checksum value is still same.
>> Updated nwt_grd.py as follows, and it passes:
>>     tst2 = gdaltest.GDALTest( 'NWT_GRD', 'nwt_grd.grd', 2, 33690 )
>>     status2 = tst2.testOpen()
>>     tst3 = gdaltest.GDALTest( 'NWT_GRD', 'nwt_grd.grd', 3, 20365 )
>>     status3 = tst3.testOpen()
>>
>> Please let me know if any more verification is required. Thanks!
>>
>>
>> On Thu, Aug 27, 2015 at 4:00 PM, Even Rouault
>>
>> <even.rouault at spatialys.com> wrote:
>> > Le jeudi 27 ao?t 2015 12:23:07, Gawade P a ?crit :
>> >> Thanks, Even.I have tried this change on ppc and there were some
>> >> differences in the map values resulting in a small deviation in the
>> >> final checksum value compared to the current output on x86
>> >> The output on ppc with this change is:
>> >> bash-4.2# gdalchksum.py nwt_grd.grd
>> >> 28093
>> >> 33690
>> >> 20365
>> >> 25856
>> >> The expected values for band 2 and 3 are :
>> >> 33626
>> >> 20260
>> >
>> > Interesting, I wouldn't have thought this to change the result of the
>> > rounding, but who knows... Could you compare the color tables to check
>> > that the differences are just within a +/- 1 amplitude ?
>> >
>> > Thinking more, a cause for a difference of rounding should happen with
>> > negative values, since casting truncates to the upper integer in case of
>> > negative value. I'd think my proposed formula to be (slightly) more
>> > accurate in case of negative slope, since it will only cast positive
>> > values.
>> >
>> >> I have not tried this change on x86, will try and let you know. Could
>> >> there be any implications of these changed values elsewhere in the
>> >> code (Assuming that they will change on x86 as well)? I believe some
>> >> test cases might fail as well...
>> >
>> > Yes, once we get same results on both platforms, adjusting the expected
>> > checksums of nwt_grd.py / nwt_grc.py scripts might be needed.
>> >
>> >> On Thu, Aug 27, 2015 at 3:10 PM, Even Rouault
>> >>
>> >> <even.rouault at spatialys.com> wrote:
>> >> > Le jeudi 27 ao?t 2015 06:20:41, Gawade P a ?crit :
>> >> >> Good Morning, Even.
>> >> >> I debugged this more, focusing, as you suggested, on the  computation
>> >> >> of the colormap and looks like the difference in the value of the
>> >> >> checksum is due to the difference in calculation of the color map
>> >> >> values for negative slopes. The following lines of code in
>> >> >> frmts/northwood/northwood.cpp, createIP() function are exhibiting
>> >> >>
>> >> >> different behavior on intel and ppc:
>> >> >>      for( i = wm + 1; i < index; i++)
>> >> >>
>> >> >>     {
>> >> >>
>> >> >>         map[i].r = map[wm].r + (unsigned char)(((i - wm) * rslope) +
>> >> >>         0.5); map[i].g = map[wm].g + (unsigned char)(((i - wm) *
>> >> >>         gslope) + 0.5); map[i].b = map[wm].b + (unsigned char)(((i -
>> >> >>         wm) * bslope) + 0.5);
>> >> >>
>> >> >>     }
>> >> >>
>> >> >> primarily, because of the (unsigned char) casting of the second
>> >> >> operand. Looks like the behavior could be undefined if the float
>> >> >> value resulting from the computation of the expression (((i - wm) *
>> >> >> bslope) + 0.5) is negative, as would be the case for negative slope.
>> >> >> For ppc, the expression  (unsigned char)(((i - wm) * bslope) + 0.5)
>> >> >> is evaluating to zero, whenever the result of (((i - wm) * bslope) +
>> >> >> 0.5) is -ve i.e. for -ve slope
>> >> >
>> >> > Interesting. It is likely that the result of the cast (unsigned
>> >> > char)negative_floating_point_value is undefined by the C standard and
>> >> > there might be differences in behaviour according to the CPU here
>> >> > (seems to be confirmed by
>> >> > http://stackoverflow.com/questions/2490600/iphone-floats-cast-to-
>> >> > unsigned-ints-get-set-to-0-if-they-are-negative)
>> >> >
>> >> > I think the following should be portable:
>> >> >
>> >> > map[i].r = (unsigned char)(map[wm].r + (i - wm) * rslope + 0.5);
>> >> > map[i].g = (unsigned char)(map[wm].g + (i - wm) * gslope + 0.5);
>> >> > map[i].b = (unsigned char)(map[wm].b + (i - wm) * bslope + 0.5);
>> >> >
>> >> > Could you confirm ?
>> >> >
>> >> > W might want to explictly clamp to [0,255] before casting, but
>> >> > according to the formulas of the slope, I'm confident the result
>> >> > should already be in [0,255.X] range.
>> >> >
>> >> > Even
>> >> >
>> >> > --
>> >> > Spatialys - Geospatial professional services
>> >> > http://www.spatialys.com
>> >
>> > --
>> > Spatialys - Geospatial professional services
>> > http://www.spatialys.com
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Fri Aug 28 02:31:39 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Fri, 28 Aug 2015 09:31:39 +0000 (UTC)
Subject: [gdal-dev] CSV driver does not understand allCountries.txt
References: <loom.20150828T103947-785@post.gmane.org>
	<loom.20150828T105900-650@post.gmane.org>
Message-ID: <loom.20150828T112248-58@post.gmane.org>

Jukka Rahkonen <jukka.rahkonen <at> maanmittauslaitos.fi> writes:


> By closer look it is not exactly that way. However, I guess that the
> structure of data is changed.
> http://download.geonames.org/export/dump/readme.txt is listing fields
> "name", "asciiname", "alternatenames" but the data sample 
that we have in 
> autotest/ogr/data/allCountries.txt?rev=27748
> seems to have just one name field.


The schema in
trunk/gdal/ogr/ogrsf_frmts/csv/ogrcsvlayer.cpp?rev=27748
looks correct under
asGeonamesFieldDesc[] =

but what probably happens is that the code truncates "alternatenames"
when it meets comma that is separating the list entries. Here is an 
example about what I have in "alternatenames"

"Pic de Font Blanca,Pic du Port"
 
-Jukka-


From even.rouault at spatialys.com  Fri Aug 28 02:35:29 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 28 Aug 2015 11:35:29 +0200
Subject: [gdal-dev] CSV driver does not understand allCountries.txt
In-Reply-To: <loom.20150828T105900-650@post.gmane.org>
References: <loom.20150828T103947-785@post.gmane.org>
	<loom.20150828T105900-650@post.gmane.org>
Message-ID: <201508281135.29717.even.rouault@spatialys.com>

Le vendredi 28 ao?t 2015 11:04:26, Jukka Rahkonen a ?crit :
> Jukka Rahkonen <jukka.rahkonen <at> maanmittauslaitos.fi> writes:
> > Hi,
> > 
> > I have understood that CSV driver should automatically recognize the
> > allCountries.txt file from geonames.org. However, my GDAL 2.0 on Windows
> > does not find any fields from the file. What is the expected output of
> > 
> > ogrinfo -al -so -nocount -noextent allCountries.txt
> > 
> > For me it only
> > Geometry: None
> > Layer SRS WKT: (unknown)
> > [the first line of the allCountries.txt file]
> 
> By closer look it is not exactly that way. However, I guess that the
> structure of data is changed.
> http://download.geonames.org/export/dump/readme.txt is listing fields
> "name", "asciiname", "alternatenames" but the data sample that we have in
> autotest/ogr/data/allCountries.txt?rev=27748
> seems to have just one name field.

Hi Jukka,

The structure hasn't changed. In autotest, there is an empty field (so 2 
consecutive tab delimiters), which is OK
The issue is with the latest allCountries.txt files where the first line has 
both tab as field delimiters, and one field has a comma. The autodetection of 
the delimiter is then confused and pick up wrongly comma.

Fixed by https://trac.osgeo.org/gdal/ticket/6086

A workaround is to rename allCountries.txt to allCountries.tsv

Even

> 
> > -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andre+joost at nurfuerspam.de  Fri Aug 28 12:15:00 2015
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Fri, 28 Aug 2015 21:15:00 +0200
Subject: [gdal-dev] Question
In-Reply-To: <201508261922.19362.even.rouault@spatialys.com>
References: <b59987c02018480587058a1a8bb3769f@C119S212VM022.msvyvi.vaha.local>	<mrks8e$3bh$1@ger.gmane.org>
	<201508261922.19362.even.rouault@spatialys.com>
Message-ID: <mrqc2p$i7r$1@ger.gmane.org>

Am 26.08.2015 um 19:22 schrieb Even Rouault:

> Something that would be possible on Windows, but not on Linux?, come on ;-)

ECW and MrSid support out-of-the-box ? ;-)

SCNR,
Andr? Joost



From even.rouault at spatialys.com  Fri Aug 28 12:38:56 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 28 Aug 2015 21:38:56 +0200
Subject: [gdal-dev] Question
In-Reply-To: <mrqc2p$i7r$1@ger.gmane.org>
References: <b59987c02018480587058a1a8bb3769f@C119S212VM022.msvyvi.vaha.local>
	<201508261922.19362.even.rouault@spatialys.com>
	<mrqc2p$i7r$1@ger.gmane.org>
Message-ID: <2535958.BSVt3i3dVy@even-n550jk>

On Friday 28 August 2015 21:15:00 Andre Joost wrote:
> Am 26.08.2015 um 19:22 schrieb Even Rouault:
> > Something that would be possible on Windows, but not on Linux?, come on
> > ;-)
> 
> ECW and MrSid support out-of-the-box ? ;-)

You could have the same as OSGeo4W on Linux. It is just that Linux 
distributions have more restrictive standards regarding redistribution of 
proprietary software, and the licenses of the SDK are (were) not very clear 
regarding redistribution. But you could very well roll your own OSGeo4Linux 
with the plugins already compiled.

> 
> SCNR,
> Andr? Joost
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ealpert at digitalglobe.com  Fri Aug 28 13:02:38 2015
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Fri, 28 Aug 2015 20:02:38 +0000
Subject: [gdal-dev] Do any of the utilities (gdalwarp,
 gdal_translate) allow for assigment of ColorInterp?
Message-ID: <5830a4d7a21c4dc6919c5eb3a31b56df@PW00INFMAI023.ent.ad.dg.local>

I'm running in to a problem with gdalbuildvrt.

I started getting the following error from gdalbuildvrt.

Warning 6: gdalbuildvrt does not support heterogenous band characteristics. Skipping ....

I'm using 1.10

I've isolated the problem to some of my files in DTED2 format have the following:

Band 1 Block=1x3601 Type=Int16, ColorInterp=Undefined

The other data in my build VRT looks like:

Band 1 Block=1201x6 Type=Int16, ColorInterp=Gray


To fix this I translated the DTED2 to VRT's and manually inserted <ColorInterp>Gray</ColorInterp> to the VRTRasterBand.

I need a better way to do this. Any ideas?


This electronic communication and any attachments may contain confidential and proprietary information of DigitalGlobe, Inc. If you are not the intended recipient, or an agent or employee responsible for delivering this communication to the intended recipient, or if you have received this communication in error, please do not print, copy, retransmit, disseminate or otherwise use the information. Please indicate to the sender that you have received this communication in error, and delete the copy you received.

DigitalGlobe reserves the right to monitor any electronic communication sent or received by its employees, agents or representatives.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150828/885a83c2/attachment.html>

From even.rouault at spatialys.com  Fri Aug 28 13:54:42 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 28 Aug 2015 22:54:42 +0200
Subject: [gdal-dev] Do any of the utilities (gdalwarp,
	gdal_translate) allow for assigment of ColorInterp?
In-Reply-To: <5830a4d7a21c4dc6919c5eb3a31b56df@PW00INFMAI023.ent.ad.dg.local>
References: <5830a4d7a21c4dc6919c5eb3a31b56df@PW00INFMAI023.ent.ad.dg.local>
Message-ID: <2948375.L5D7lo2b3T@even-n550jk>

On Friday 28 August 2015 20:02:38 Ethan Alpert wrote:
> I'm running in to a problem with gdalbuildvrt.
> 
> I started getting the following error from gdalbuildvrt.
> 
> Warning 6: gdalbuildvrt does not support heterogenous band characteristics.
> Skipping ....
> 
> I'm using 1.10
> 
> I've isolated the problem to some of my files in DTED2 format have the
> following:
> 
> Band 1 Block=1x3601 Type=Int16, ColorInterp=Undefined
> 
> The other data in my build VRT looks like:
> 
> Band 1 Block=1201x6 Type=Int16, ColorInterp=Gray
> 
> 
> To fix this I translated the DTED2 to VRT's and manually inserted
> <ColorInterp>Gray</ColorInterp> to the VRTRasterBand.
> 
> I need a better way to do this. Any ideas?

Yep

1) Remove the test at line 706 of gdalbuildvrt.cpp:
pasBandProperties[j].colorInterpretation != 
GDALGetRasterColorInterpretation(hRasterBand) ||


2) Or for each some.dt2, creates a some.dt2.aux.xml file with following 
content:

<PAMDataset>
  <PAMRasterBand band="1">
    <ColorInterp>Gray</ColorInterp>
  </PAMRasterBand>
</PAMDataset>

which will override the default color interpretation

3) Or modify the DTED driver to report gray

> 
> 
> This electronic communication and any attachments may contain confidential
> and proprietary information of DigitalGlobe, Inc. If you are not the
> intended recipient, or an agent or employee responsible for delivering this
> communication to the intended recipient, or if you have received this
> communication in error, please do not print, copy, retransmit, disseminate
> or otherwise use the information. Please indicate to the sender that you
> have received this communication in error, and delete the copy you
> received.
> 
> DigitalGlobe reserves the right to monitor any electronic communication sent
> or received by its employees, agents or representatives.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ealpert at digitalglobe.com  Fri Aug 28 14:13:37 2015
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Fri, 28 Aug 2015 21:13:37 +0000
Subject: [gdal-dev] Do any of the utilities (gdalwarp,
 gdal_translate) allow for assigment of ColorInterp?
In-Reply-To: <2948375.L5D7lo2b3T@even-n550jk>
References: <5830a4d7a21c4dc6919c5eb3a31b56df@PW00INFMAI023.ent.ad.dg.local>
	<2948375.L5D7lo2b3T@even-n550jk>
Message-ID: <88caa2e81f6b4224aa36126540f3dc4e@PW00INFMAI023.ent.ad.dg.local>

Thank you! Looks like Option 2 for me.

-----Original Message-----
From: Even Rouault [mailto:even.rouault at spatialys.com]
Sent: Friday, August 28, 2015 2:55 PM
To: gdal-dev at lists.osgeo.org
Cc: Ethan Alpert
Subject: Re: [gdal-dev] Do any of the utilities (gdalwarp, gdal_translate) allow for assigment of ColorInterp?

On Friday 28 August 2015 20:02:38 Ethan Alpert wrote:
> I'm running in to a problem with gdalbuildvrt.
>
> I started getting the following error from gdalbuildvrt.
>
> Warning 6: gdalbuildvrt does not support heterogenous band characteristics.
> Skipping ....
>
> I'm using 1.10
>
> I've isolated the problem to some of my files in DTED2 format have the
> following:
>
> Band 1 Block=1x3601 Type=Int16, ColorInterp=Undefined
>
> The other data in my build VRT looks like:
>
> Band 1 Block=1201x6 Type=Int16, ColorInterp=Gray
>
>
> To fix this I translated the DTED2 to VRT's and manually inserted
> <ColorInterp>Gray</ColorInterp> to the VRTRasterBand.
>
> I need a better way to do this. Any ideas?

Yep

1) Remove the test at line 706 of gdalbuildvrt.cpp:
pasBandProperties[j].colorInterpretation !=
GDALGetRasterColorInterpretation(hRasterBand) ||


2) Or for each some.dt2, creates a some.dt2.aux.xml file with following
content:

<PAMDataset>
  <PAMRasterBand band="1">
    <ColorInterp>Gray</ColorInterp>
  </PAMRasterBand>
</PAMDataset>

which will override the default color interpretation

3) Or modify the DTED driver to report gray

>
>
> This electronic communication and any attachments may contain confidential
> and proprietary information of DigitalGlobe, Inc. If you are not the
> intended recipient, or an agent or employee responsible for delivering this
> communication to the intended recipient, or if you have received this
> communication in error, please do not print, copy, retransmit, disseminate
> or otherwise use the information. Please indicate to the sender that you
> have received this communication in error, and delete the copy you
> received.
>
> DigitalGlobe reserves the right to monitor any electronic communication sent
> or received by its employees, agents or representatives.

--
Spatialys - Geospatial professional services
http://www.spatialys.com


This electronic communication and any attachments may contain confidential and proprietary information of DigitalGlobe, Inc. If you are not the intended recipient, or an agent or employee responsible for delivering this communication to the intended recipient, or if you have received this communication in error, please do not print, copy, retransmit, disseminate or otherwise use the information. Please indicate to the sender that you have received this communication in error, and delete the copy you received.

DigitalGlobe reserves the right to monitor any electronic communication sent or received by its employees, agents or representatives.

From aperi2007 at gmail.com  Sat Aug 29 10:42:28 2015
From: aperi2007 at gmail.com (Andrea Peri)
Date: Sat, 29 Aug 2015 19:42:28 +0200
Subject: [gdal-dev] Storing the histogram of a virtual-datastore
Message-ID: <CABqTJk8EWjPQhLJC5V5Xk=ctSDuh5rL8VkYmyUWa26GSZrguuQ@mail.gmail.com>

Hi,

I see the
gdalinfo ... -hist
do not store the results in the vrt.

is this right ?

Thx.

-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From even.rouault at spatialys.com  Sat Aug 29 12:39:45 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 29 Aug 2015 21:39:45 +0200
Subject: [gdal-dev] Storing the histogram of a virtual-datastore
In-Reply-To: <CABqTJk8EWjPQhLJC5V5Xk=ctSDuh5rL8VkYmyUWa26GSZrguuQ@mail.gmail.com>
References: <CABqTJk8EWjPQhLJC5V5Xk=ctSDuh5rL8VkYmyUWa26GSZrguuQ@mail.gmail.com>
Message-ID: <201508292139.45767.even.rouault@spatialys.com>

Le samedi 29 ao?t 2015 19:42:28, Andrea Peri a ?crit :
> Hi,
> 
> I see the
> gdalinfo ... -hist
> do not store the results in the vrt.
> 
> is this right ?

No. Fixed by https://trac.osgeo.org/gdal/ticket/6088

> 
> Thx.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Ori.Bar at elbitsystems.com  Mon Aug 31 01:34:25 2015
From: Ori.Bar at elbitsystems.com (Bar Ori)
Date: Mon, 31 Aug 2015 08:34:25 +0000
Subject: [gdal-dev] NSIF with GDAL
Message-ID: <538E9F517DECA94A86A940F00577EACDDC677C97@MXHFA01.esl.corp.elbit.co.il>

Hello,
I have a purpose to create a file in format of NSIF.
As far as understood, I need to use the NITF driver and set the metadata which is relevant to NSIF.
I tried to work with GDAL to make it, but noticed that the metadata is saved on a "aux.xml" file.
When I remove this file or when set the GDAL_PAM_ENABLED as NO, so I lose all metadata I set (return to default or deleted).
My goal is to create one file (.nsf) containing all the relevant metadata.
My question is whether it is possible to create one file as I want. In case that yes, how to do it?

P.S. I am using GDAL in C#

Hope for a for a quick response.
Thanks,


Ori Bar | Software Developer

T +972-9-8898900 | M +972-504-734296

@ Ori.Bar at Elbitsystems.com<mailto:Ori.Bar at Elbitsystems.com>


[Description: Description: Logo]


The information in this e-mail transmission contains proprietary and business 
sensitive information.  Unauthorized interception of this e-mail may constitute 
a violation of law. If you are not the intended recipient, you are hereby 
notified that any review, dissemination, distribution or duplication of this 
communication is strictly prohibited. You are also asked to contact the sender 
by reply email and immediately destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150831/8e87ea92/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 16487 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150831/8e87ea92/attachment-0001.png>

From even.rouault at spatialys.com  Mon Aug 31 02:13:15 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 31 Aug 2015 11:13:15 +0200
Subject: [gdal-dev] NSIF with GDAL
In-Reply-To: <538E9F517DECA94A86A940F00577EACDDC677C97@MXHFA01.esl.corp.elbit.co.il>
References: <538E9F517DECA94A86A940F00577EACDDC677C97@MXHFA01.esl.corp.elbit.co.il>
Message-ID: <201508311113.16227.even.rouault@spatialys.com>

Le lundi 31 ao?t 2015 10:34:25, Bar Ori a ?crit :
> Hello,
> I have a purpose to create a file in format of NSIF.
> As far as understood, I need to use the NITF driver and set the metadata
> which is relevant to NSIF. I tried to work with GDAL to make it, but
> noticed that the metadata is saved on a "aux.xml" file. When I remove this
> file or when set the GDAL_PAM_ENABLED as NO, so I lose all metadata I set
> (return to default or deleted). My goal is to create one file (.nsf)
> containing all the relevant metadata. My question is whether it is
> possible to create one file as I want. In case that yes, how to do it?
> 
> P.S. I am using GDAL in C#

Ori,

Quoting http://gdal.org/frmt_nitf.html:
"""
 Creation Options:

    * Most file header, imagery header metadata and security fields can be set 
with appropriate creation options (although they are reported as metadata 
item, but must not be set as metadata). For instance setting "FTITLE=Image of 
abandoned missle silo south west of Karsk" in the creation option list would 
result in setting of the FTITLE field in the NITF file header. Use the official 
field names from the NITF specification document; do not put the "NITF_" prefix 
that is reported when asking the metadata list.
"""

The full list of creation options is given by:
gdalinfo --format nitf

In C#, that would be something like

string[] options = new string [] {"FTITLE=mytitle"};

Dataset out_ds = drv.CreateCopy("out.ntf", src_ds, 0, options, null, null);
or
Dataset out_ds = drv.Create("out.ntf", width, height, bands,
                                             DataType.GDT_Byte, options);

Even

> 
> Hope for a for a quick response.
> Thanks,
> 
> 
> Ori Bar | Software Developer
> 
> T +972-9-8898900 | M +972-504-734296
> 
> @ Ori.Bar at Elbitsystems.com<mailto:Ori.Bar at Elbitsystems.com>
> 
> 
> [Description: Description: Logo]
> 
> 
> The information in this e-mail transmission contains proprietary and
> business sensitive information.  Unauthorized interception of this e-mail
> may constitute a violation of law. If you are not the intended recipient,
> you are hereby notified that any review, dissemination, distribution or
> duplication of this communication is strictly prohibited. You are also
> asked to contact the sender by reply email and immediately destroy all
> copies of the original message.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Ori.Bar at elbitsystems.com  Mon Aug 31 02:21:51 2015
From: Ori.Bar at elbitsystems.com (Bar Ori)
Date: Mon, 31 Aug 2015 09:21:51 +0000
Subject: [gdal-dev] NSIF with GDAL
In-Reply-To: <201508311113.16227.even.rouault@spatialys.com>
References: <538E9F517DECA94A86A940F00577EACDDC677C97@MXHFA01.esl.corp.elbit.co.il>
	<201508311113.16227.even.rouault@spatialys.com>
Message-ID: <538E9F517DECA94A86A940F00577EACDDC677CCD@MXHFA01.esl.corp.elbit.co.il>

Hi Even,
Thanks for your quick response.
I have already read and worked according to this document  (http://gdal.org/frmt_nitf.html)
Still, after removing the aux.xml file, the data is gone with it.
Moreover, this document talks about specific info which is relevant to NITF header, but I have an additional information that is not part of NITF (my metadata is relevant to NSIF - STANAG 4545).

-----Original Message-----
From: Even Rouault [mailto:even.rouault at spatialys.com] 
Sent: Monday, 31 August 2015 12:13
To: gdal-dev at lists.osgeo.org
Cc: Bar Ori; Ben Saraf Omer
Subject: Re: [gdal-dev] NSIF with GDAL

Le lundi 31 ao?t 2015 10:34:25, Bar Ori a ?crit :
> Hello,
> I have a purpose to create a file in format of NSIF.
> As far as understood, I need to use the NITF driver and set the 
> metadata which is relevant to NSIF. I tried to work with GDAL to make 
> it, but noticed that the metadata is saved on a "aux.xml" file. When I 
> remove this file or when set the GDAL_PAM_ENABLED as NO, so I lose all 
> metadata I set (return to default or deleted). My goal is to create 
> one file (.nsf) containing all the relevant metadata. My question is 
> whether it is possible to create one file as I want. In case that yes, how to do it?
> 
> P.S. I am using GDAL in C#

Ori,

Quoting http://gdal.org/frmt_nitf.html:
"""
 Creation Options:

    * Most file header, imagery header metadata and security fields can be set with appropriate creation options (although they are reported as metadata item, but must not be set as metadata). For instance setting "FTITLE=Image of abandoned missle silo south west of Karsk" in the creation option list would result in setting of the FTITLE field in the NITF file header. Use the official field names from the NITF specification document; do not put the "NITF_" prefix that is reported when asking the metadata list.
"""

The full list of creation options is given by:
gdalinfo --format nitf

In C#, that would be something like

string[] options = new string [] {"FTITLE=mytitle"};

Dataset out_ds = drv.CreateCopy("out.ntf", src_ds, 0, options, null, null); or Dataset out_ds = drv.Create("out.ntf", width, height, bands,
                                             DataType.GDT_Byte, options);

Even

> 
> Hope for a for a quick response.
> Thanks,
> 
> 
> Ori Bar | Software Developer
> 
> T +972-9-8898900 | M +972-504-734296
> 
> @ Ori.Bar at Elbitsystems.com<mailto:Ori.Bar at Elbitsystems.com>
> 
> 
> [Description: Description: Logo]
> 
> 
> The information in this e-mail transmission contains proprietary and 
> business sensitive information.  Unauthorized interception of this 
> e-mail may constitute a violation of law. If you are not the intended 
> recipient, you are hereby notified that any review, dissemination, 
> distribution or duplication of this communication is strictly 
> prohibited. You are also asked to contact the sender by reply email 
> and immediately destroy all copies of the original message.

--
Spatialys - Geospatial professional services http://www.spatialys.com

The information in this e-mail transmission contains proprietary and business 
sensitive information.  Unauthorized interception of this e-mail may constitute 
a violation of law. If you are not the intended recipient, you are hereby 
notified that any review, dissemination, distribution or duplication of this 
communication is strictly prohibited. You are also asked to contact the sender 
by reply email and immediately destroy all copies of the original message.

From even.rouault at spatialys.com  Mon Aug 31 02:42:16 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 31 Aug 2015 11:42:16 +0200
Subject: [gdal-dev] NSIF with GDAL
In-Reply-To: <538E9F517DECA94A86A940F00577EACDDC677CCD@MXHFA01.esl.corp.elbit.co.il>
References: <538E9F517DECA94A86A940F00577EACDDC677C97@MXHFA01.esl.corp.elbit.co.il>
	<201508311113.16227.even.rouault@spatialys.com>
	<538E9F517DECA94A86A940F00577EACDDC677CCD@MXHFA01.esl.corp.elbit.co.il>
Message-ID: <201508311142.16250.even.rouault@spatialys.com>

Le lundi 31 ao?t 2015 11:21:51, vous avez ?crit :
> Hi Even,
> Thanks for your quick response.
> I have already read and worked according to this document 
> (http://gdal.org/frmt_nitf.html) Still, after removing the aux.xml file,
> the data is gone with it.

That's a bit surprising. See:

$ gdal_translate -q byte.tif byte.ntf -of NITF -co FTITLE=foo -a_srs EPSG:32611
$ rm byte.ntf.aux.xml
$ gdalinfo byte.ntf | grep FTITLE
  NITF_FTITLE=foo


> Moreover, this document talks about specific info which is relevant to NITF
> header, but I have an additional information that is not part of NITF (my
> metadata is relevant to NSIF - STANAG 4545).

It is a bit difficult to comment as you're not very specific about which
exact info you're trying to write.

You've the possibility to write content of TREs (for most of them you'll have to compose
it manually) in file or image subheaders with the TRE= and FILE_TRE= creation options.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Ori.Bar at elbitsystems.com  Mon Aug 31 03:17:17 2015
From: Ori.Bar at elbitsystems.com (Bar Ori)
Date: Mon, 31 Aug 2015 10:17:17 +0000
Subject: [gdal-dev] NSIF with GDAL
In-Reply-To: <201508311142.16250.even.rouault@spatialys.com>
References: <538E9F517DECA94A86A940F00577EACDDC677C97@MXHFA01.esl.corp.elbit.co.il>
	<201508311113.16227.even.rouault@spatialys.com>
	<538E9F517DECA94A86A940F00577EACDDC677CCD@MXHFA01.esl.corp.elbit.co.il>
	<201508311142.16250.even.rouault@spatialys.com>
Message-ID: <538E9F517DECA94A86A940F00577EACDDC677CEF@MXHFA01.esl.corp.elbit.co.il>

The metadata I am trying to add is according to " STANAG 4545 /AEDP-4 NATO Secondary Imagery Format (NSIF)" (http://www.nato.int/structur/ac/224/standard/4545/4545_documents/4545_ed1_amd1.pdf)
I read about the TRE at http://gdal.org/frmt_nitf_advanced.html but didn't understood exactly how to work with it in my code.
But again, will it be saved on the file itself or on external file? My goal is to have all in one nsf file.

P.S. for viewing the metadata, I am using the FWTool, do you think maybe there is the problem? Maybe this tool cannot read it from the file even when exists?

Thanks, Ori.

-----Original Message-----
From: Even Rouault [mailto:even.rouault at spatialys.com] 
Sent: Monday, 31 August 2015 12:42
To: Bar Ori
Cc: gdal-dev at lists.osgeo.org; Ben Saraf Omer
Subject: Re: [gdal-dev] NSIF with GDAL

Le lundi 31 ao?t 2015 11:21:51, vous avez ?crit :
> Hi Even,
> Thanks for your quick response.
> I have already read and worked according to this document
> (http://gdal.org/frmt_nitf.html) Still, after removing the aux.xml 
> file, the data is gone with it.

That's a bit surprising. See:

$ gdal_translate -q byte.tif byte.ntf -of NITF -co FTITLE=foo -a_srs EPSG:32611 $ rm byte.ntf.aux.xml $ gdalinfo byte.ntf | grep FTITLE
  NITF_FTITLE=foo


> Moreover, this document talks about specific info which is relevant to 
> NITF header, but I have an additional information that is not part of 
> NITF (my metadata is relevant to NSIF - STANAG 4545).

It is a bit difficult to comment as you're not very specific about which exact info you're trying to write.

You've the possibility to write content of TREs (for most of them you'll have to compose it manually) in file or image subheaders with the TRE= and FILE_TRE= creation options.

Even

--
Spatialys - Geospatial professional services http://www.spatialys.com

The information in this e-mail transmission contains proprietary and business 
sensitive information.  Unauthorized interception of this e-mail may constitute 
a violation of law. If you are not the intended recipient, you are hereby 
notified that any review, dissemination, distribution or duplication of this 
communication is strictly prohibited. You are also asked to contact the sender 
by reply email and immediately destroy all copies of the original message.

From even.rouault at spatialys.com  Mon Aug 31 03:24:41 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 31 Aug 2015 12:24:41 +0200
Subject: [gdal-dev] NSIF with GDAL
In-Reply-To: <538E9F517DECA94A86A940F00577EACDDC677CEF@MXHFA01.esl.corp.elbit.co.il>
References: <538E9F517DECA94A86A940F00577EACDDC677C97@MXHFA01.esl.corp.elbit.co.il>
	<201508311142.16250.even.rouault@spatialys.com>
	<538E9F517DECA94A86A940F00577EACDDC677CEF@MXHFA01.esl.corp.elbit.co.il>
Message-ID: <201508311224.41547.even.rouault@spatialys.com>

Le lundi 31 ao?t 2015 12:17:17, Bar Ori a ?crit :
> The metadata I am trying to add is according to " STANAG 4545 /AEDP-4 NATO
> Secondary Imagery Format (NSIF)"
> (http://www.nato.int/structur/ac/224/standard/4545/4545_documents/4545_ed1
> _amd1.pdf) 

Pointing at a 160 page long document isn't really what I'm calling to be 
"specific" ;-) Which fields are you trying to write ?

> I read about the TRE at http://gdal.org/frmt_nitf_advanced.html
> but didn't understood exactly how to work with it in my code. But again,
> will it be saved on the file itself or on external file? My goal is to
> have all in one nsf file.

It will be written in the file. Composing TRE isn't admitedly obvious. It 
requires 

> 
> P.S. for viewing the metadata, I am using the FWTool, do you think maybe
> there is the problem? Maybe this tool cannot read it from the file even
> when exists?

Hum, FWTools is really deprecated and hasn't been updated in years, although I 
would think it should be able to read, at least the main metadata fields.

I'd recommend using up-to-date builds at http://gisinternals.com/ rather. 
Especially for the writing part, since some of the improvements in the NITF 
driver must be posterior to the latest FWTools version.

> 
> Thanks, Ori.
> 
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault at spatialys.com]
> Sent: Monday, 31 August 2015 12:42
> To: Bar Ori
> Cc: gdal-dev at lists.osgeo.org; Ben Saraf Omer
> Subject: Re: [gdal-dev] NSIF with GDAL
> 
> Le lundi 31 ao?t 2015 11:21:51, vous avez ?crit :
> > Hi Even,
> > Thanks for your quick response.
> > I have already read and worked according to this document
> > (http://gdal.org/frmt_nitf.html) Still, after removing the aux.xml
> > file, the data is gone with it.
> 
> That's a bit surprising. See:
> 
> $ gdal_translate -q byte.tif byte.ntf -of NITF -co FTITLE=foo -a_srs
> EPSG:32611 $ rm byte.ntf.aux.xml $ gdalinfo byte.ntf | grep FTITLE
> NITF_FTITLE=foo
> 
> > Moreover, this document talks about specific info which is relevant to
> > NITF header, but I have an additional information that is not part of
> > NITF (my metadata is relevant to NSIF - STANAG 4545).
> 
> It is a bit difficult to comment as you're not very specific about which
> exact info you're trying to write.
> 
> You've the possibility to write content of TREs (for most of them you'll
> have to compose it manually) in file or image subheaders with the TRE= and
> FILE_TRE= creation options.
> 
> Even
> 
> --
> Spatialys - Geospatial professional services http://www.spatialys.com
> 
> The information in this e-mail transmission contains proprietary and
> business sensitive information.  Unauthorized interception of this e-mail
> may constitute a violation of law. If you are not the intended recipient,
> you are hereby notified that any review, dissemination, distribution or
> duplication of this communication is strictly prohibited. You are also
> asked to contact the sender by reply email and immediately destroy all
> copies of the original message.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Ori.Bar at elbitsystems.com  Mon Aug 31 03:51:17 2015
From: Ori.Bar at elbitsystems.com (Bar Ori)
Date: Mon, 31 Aug 2015 10:51:17 +0000
Subject: [gdal-dev] NSIF with GDAL
In-Reply-To: <201508311224.41547.even.rouault@spatialys.com>
References: <538E9F517DECA94A86A940F00577EACDDC677C97@MXHFA01.esl.corp.elbit.co.il>
	<201508311142.16250.even.rouault@spatialys.com>
	<538E9F517DECA94A86A940F00577EACDDC677CEF@MXHFA01.esl.corp.elbit.co.il>
	<201508311224.41547.even.rouault@spatialys.com>
Message-ID: <538E9F517DECA94A86A940F00577EACDDC677D11@MXHFA01.esl.corp.elbit.co.il>

First, thank you for the information about the FWTool, I will try the gisinternals as suggested.

Second, Sorry, yes...
This huge document has table with the metadata needed.
For example (not in the document) , I want to add a field named "CNRTYCODE" with the value "US". How do I add it as part of my nsf file without any aux.xml file?
Is there any documentation how to work with the TRE?

-----Original Message-----
From: Even Rouault [mailto:even.rouault at spatialys.com] 
Sent: Monday, 31 August 2015 13:25
To: Bar Ori
Cc: gdal-dev at lists.osgeo.org; Ben Saraf Omer
Subject: Re: [gdal-dev] NSIF with GDAL

Le lundi 31 ao?t 2015 12:17:17, Bar Ori a ?crit :
> The metadata I am trying to add is according to " STANAG 4545 /AEDP-4 
> NATO Secondary Imagery Format (NSIF)"
> (http://www.nato.int/structur/ac/224/standard/4545/4545_documents/4545
> _ed1
> _amd1.pdf)

Pointing at a 160 page long document isn't really what I'm calling to be "specific" ;-) Which fields are you trying to write ?

> I read about the TRE at http://gdal.org/frmt_nitf_advanced.html
> but didn't understood exactly how to work with it in my code. But 
> again, will it be saved on the file itself or on external file? My 
> goal is to have all in one nsf file.

It will be written in the file. Composing TRE isn't admitedly obvious. It requires 

> 
> P.S. for viewing the metadata, I am using the FWTool, do you think 
> maybe there is the problem? Maybe this tool cannot read it from the 
> file even when exists?

Hum, FWTools is really deprecated and hasn't been updated in years, although I would think it should be able to read, at least the main metadata fields.

I'd recommend using up-to-date builds at http://gisinternals.com/ rather. 
Especially for the writing part, since some of the improvements in the NITF driver must be posterior to the latest FWTools version.

> 
> Thanks, Ori.
> 
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault at spatialys.com]
> Sent: Monday, 31 August 2015 12:42
> To: Bar Ori
> Cc: gdal-dev at lists.osgeo.org; Ben Saraf Omer
> Subject: Re: [gdal-dev] NSIF with GDAL
> 
> Le lundi 31 ao?t 2015 11:21:51, vous avez ?crit :
> > Hi Even,
> > Thanks for your quick response.
> > I have already read and worked according to this document
> > (http://gdal.org/frmt_nitf.html) Still, after removing the aux.xml 
> > file, the data is gone with it.
> 
> That's a bit surprising. See:
> 
> $ gdal_translate -q byte.tif byte.ntf -of NITF -co FTITLE=foo -a_srs
> EPSG:32611 $ rm byte.ntf.aux.xml $ gdalinfo byte.ntf | grep FTITLE 
> NITF_FTITLE=foo
> 
> > Moreover, this document talks about specific info which is relevant 
> > to NITF header, but I have an additional information that is not 
> > part of NITF (my metadata is relevant to NSIF - STANAG 4545).
> 
> It is a bit difficult to comment as you're not very specific about 
> which exact info you're trying to write.
> 
> You've the possibility to write content of TREs (for most of them 
> you'll have to compose it manually) in file or image subheaders with 
> the TRE= and FILE_TRE= creation options.
> 
> Even
> 
> --
> Spatialys - Geospatial professional services http://www.spatialys.com
> 
> The information in this e-mail transmission contains proprietary and 
> business sensitive information.  Unauthorized interception of this 
> e-mail may constitute a violation of law. If you are not the intended 
> recipient, you are hereby notified that any review, dissemination, 
> distribution or duplication of this communication is strictly 
> prohibited. You are also asked to contact the sender by reply email 
> and immediately destroy all copies of the original message.

--
Spatialys - Geospatial professional services http://www.spatialys.com

The information in this e-mail transmission contains proprietary and business 
sensitive information.  Unauthorized interception of this e-mail may constitute 
a violation of law. If you are not the intended recipient, you are hereby 
notified that any review, dissemination, distribution or duplication of this 
communication is strictly prohibited. You are also asked to contact the sender 
by reply email and immediately destroy all copies of the original message.

From even.rouault at spatialys.com  Mon Aug 31 04:01:07 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 31 Aug 2015 13:01:07 +0200
Subject: [gdal-dev] NSIF with GDAL
In-Reply-To: <538E9F517DECA94A86A940F00577EACDDC677D11@MXHFA01.esl.corp.elbit.co.il>
References: <538E9F517DECA94A86A940F00577EACDDC677C97@MXHFA01.esl.corp.elbit.co.il>
	<201508311224.41547.even.rouault@spatialys.com>
	<538E9F517DECA94A86A940F00577EACDDC677D11@MXHFA01.esl.corp.elbit.co.il>
Message-ID: <201508311301.07538.even.rouault@spatialys.com>

Le lundi 31 ao?t 2015 12:51:17, Bar Ori a ?crit :
> First, thank you for the information about the FWTool, I will try the
> gisinternals as suggested.
> 
> Second, Sorry, yes...
> This huge document has table with the metadata needed.
> For example (not in the document) , I want to add a field named "CNRTYCODE"
> with the value "US".
> How do I add it as part of my nsf file without any
> aux.xml file?

I'm not sure to understand: do you mean you want to add a new item of 
metadata, not specified by the NITF/NISF standards ? Hum, as far as I know, 
there's no standard way of doing that with NSIF. You could potentially add a 
custom TRE, or use various user-data areas for that, but this wouldn't be very 
operatable with non aware readers since basically in NITF only the values of 
the metadata are written, not the name.

> Is there any documentation how to work with the TRE?

At that point I'm not sure you need TRE. What you're attempting to do is still 
a bit too vague for me.

Basically to compose a TRE you must look at the doc that specifies its 
structure and put the values of the field one after the other, with the 
documented format and padding. The values can then be used as a GDAL creation 
option. 

In the GDAL autotest suite, you've a few (fake) examples of how to write TRE :

https://trac.osgeo.org/gdal/browser/trunk/autotest/gdrivers/nitf.py#L1500

> 
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault at spatialys.com]
> Sent: Monday, 31 August 2015 13:25
> To: Bar Ori
> Cc: gdal-dev at lists.osgeo.org; Ben Saraf Omer
> Subject: Re: [gdal-dev] NSIF with GDAL
> 
> Le lundi 31 ao?t 2015 12:17:17, Bar Ori a ?crit :
> > The metadata I am trying to add is according to " STANAG 4545 /AEDP-4
> > NATO Secondary Imagery Format (NSIF)"
> > (http://www.nato.int/structur/ac/224/standard/4545/4545_documents/4545
> > _ed1
> > _amd1.pdf)
> 
> Pointing at a 160 page long document isn't really what I'm calling to be
> "specific" ;-) Which fields are you trying to write ?
> 
> > I read about the TRE at http://gdal.org/frmt_nitf_advanced.html
> > but didn't understood exactly how to work with it in my code. But
> > again, will it be saved on the file itself or on external file? My
> > goal is to have all in one nsf file.
> 
> It will be written in the file. Composing TRE isn't admitedly obvious. It
> requires
> 
> > P.S. for viewing the metadata, I am using the FWTool, do you think
> > maybe there is the problem? Maybe this tool cannot read it from the
> > file even when exists?
> 
> Hum, FWTools is really deprecated and hasn't been updated in years,
> although I would think it should be able to read, at least the main
> metadata fields.
> 
> I'd recommend using up-to-date builds at http://gisinternals.com/ rather.
> Especially for the writing part, since some of the improvements in the NITF
> driver must be posterior to the latest FWTools version.
> 
> > Thanks, Ori.
> > 
> > -----Original Message-----
> > From: Even Rouault [mailto:even.rouault at spatialys.com]
> > Sent: Monday, 31 August 2015 12:42
> > To: Bar Ori
> > Cc: gdal-dev at lists.osgeo.org; Ben Saraf Omer
> > Subject: Re: [gdal-dev] NSIF with GDAL
> > 
> > Le lundi 31 ao?t 2015 11:21:51, vous avez ?crit :
> > > Hi Even,
> > > Thanks for your quick response.
> > > I have already read and worked according to this document
> > > (http://gdal.org/frmt_nitf.html) Still, after removing the aux.xml
> > > file, the data is gone with it.
> > 
> > That's a bit surprising. See:
> > 
> > $ gdal_translate -q byte.tif byte.ntf -of NITF -co FTITLE=foo -a_srs
> > EPSG:32611 $ rm byte.ntf.aux.xml $ gdalinfo byte.ntf | grep FTITLE
> > NITF_FTITLE=foo
> > 
> > > Moreover, this document talks about specific info which is relevant
> > > to NITF header, but I have an additional information that is not
> > > part of NITF (my metadata is relevant to NSIF - STANAG 4545).
> > 
> > It is a bit difficult to comment as you're not very specific about
> > which exact info you're trying to write.
> > 
> > You've the possibility to write content of TREs (for most of them
> > you'll have to compose it manually) in file or image subheaders with
> > the TRE= and FILE_TRE= creation options.
> > 
> > Even
> > 
> > --
> > Spatialys - Geospatial professional services http://www.spatialys.com
> > 
> > The information in this e-mail transmission contains proprietary and
> > business sensitive information.  Unauthorized interception of this
> > e-mail may constitute a violation of law. If you are not the intended
> > recipient, you are hereby notified that any review, dissemination,
> > distribution or duplication of this communication is strictly
> > prohibited. You are also asked to contact the sender by reply email
> > and immediately destroy all copies of the original message.
> 
> --
> Spatialys - Geospatial professional services http://www.spatialys.com
> 
> The information in this e-mail transmission contains proprietary and
> business sensitive information.  Unauthorized interception of this e-mail
> may constitute a violation of law. If you are not the intended recipient,
> you are hereby notified that any review, dissemination, distribution or
> duplication of this communication is strictly prohibited. You are also
> asked to contact the sender by reply email and immediately destroy all
> copies of the original message.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Ori.Bar at elbitsystems.com  Mon Aug 31 04:35:21 2015
From: Ori.Bar at elbitsystems.com (Bar Ori)
Date: Mon, 31 Aug 2015 11:35:21 +0000
Subject: [gdal-dev] NSIF with GDAL
In-Reply-To: <201508311301.07538.even.rouault@spatialys.com>
References: <538E9F517DECA94A86A940F00577EACDDC677C97@MXHFA01.esl.corp.elbit.co.il>
	<201508311224.41547.even.rouault@spatialys.com>
	<538E9F517DECA94A86A940F00577EACDDC677D11@MXHFA01.esl.corp.elbit.co.il>
	<201508311301.07538.even.rouault@spatialys.com>
Message-ID: <538E9F517DECA94A86A940F00577EACDDC677D2E@MXHFA01.esl.corp.elbit.co.il>

What am I trying to do is to create a NSIF file using GDAL and its NITF driver.
When I do it, the file which created looks like having just part of what I need in according to the NSIF standard (I also need few fields which are out of standard).
Moreover, When I am trying to edit this data whether using the creation options, as written at the document, or using setting metadata with the "SetMetadataItem" method of the data set object,
So what happens is that an aux.xml file is created. Then I open my file using FWTool and all metadata is there, but when I remove the xml, all is gone, at least by opening with FWTool.

-----Original Message-----
From: Even Rouault [mailto:even.rouault at spatialys.com] 
Sent: Monday, 31 August 2015 14:01
To: Bar Ori
Cc: gdal-dev at lists.osgeo.org; Ben Saraf Omer
Subject: Re: [gdal-dev] NSIF with GDAL

Le lundi 31 ao?t 2015 12:51:17, Bar Ori a ?crit :
> First, thank you for the information about the FWTool, I will try the 
> gisinternals as suggested.
> 
> Second, Sorry, yes...
> This huge document has table with the metadata needed.
> For example (not in the document) , I want to add a field named "CNRTYCODE"
> with the value "US".
> How do I add it as part of my nsf file without any aux.xml file?

I'm not sure to understand: do you mean you want to add a new item of metadata, not specified by the NITF/NISF standards ? Hum, as far as I know, there's no standard way of doing that with NSIF. You could potentially add a custom TRE, or use various user-data areas for that, but this wouldn't be very operatable with non aware readers since basically in NITF only the values of the metadata are written, not the name.

> Is there any documentation how to work with the TRE?

At that point I'm not sure you need TRE. What you're attempting to do is still a bit too vague for me.

Basically to compose a TRE you must look at the doc that specifies its structure and put the values of the field one after the other, with the documented format and padding. The values can then be used as a GDAL creation option. 

In the GDAL autotest suite, you've a few (fake) examples of how to write TRE :

https://trac.osgeo.org/gdal/browser/trunk/autotest/gdrivers/nitf.py#L1500

> 
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault at spatialys.com]
> Sent: Monday, 31 August 2015 13:25
> To: Bar Ori
> Cc: gdal-dev at lists.osgeo.org; Ben Saraf Omer
> Subject: Re: [gdal-dev] NSIF with GDAL
> 
> Le lundi 31 ao?t 2015 12:17:17, Bar Ori a ?crit :
> > The metadata I am trying to add is according to " STANAG 4545 
> > /AEDP-4 NATO Secondary Imagery Format (NSIF)"
> > (http://www.nato.int/structur/ac/224/standard/4545/4545_documents/45
> > 45
> > _ed1
> > _amd1.pdf)
> 
> Pointing at a 160 page long document isn't really what I'm calling to 
> be "specific" ;-) Which fields are you trying to write ?
> 
> > I read about the TRE at http://gdal.org/frmt_nitf_advanced.html
> > but didn't understood exactly how to work with it in my code. But 
> > again, will it be saved on the file itself or on external file? My 
> > goal is to have all in one nsf file.
> 
> It will be written in the file. Composing TRE isn't admitedly obvious. 
> It requires
> 
> > P.S. for viewing the metadata, I am using the FWTool, do you think 
> > maybe there is the problem? Maybe this tool cannot read it from the 
> > file even when exists?
> 
> Hum, FWTools is really deprecated and hasn't been updated in years, 
> although I would think it should be able to read, at least the main 
> metadata fields.
> 
> I'd recommend using up-to-date builds at http://gisinternals.com/ rather.
> Especially for the writing part, since some of the improvements in the 
> NITF driver must be posterior to the latest FWTools version.
> 
> > Thanks, Ori.
> > 
> > -----Original Message-----
> > From: Even Rouault [mailto:even.rouault at spatialys.com]
> > Sent: Monday, 31 August 2015 12:42
> > To: Bar Ori
> > Cc: gdal-dev at lists.osgeo.org; Ben Saraf Omer
> > Subject: Re: [gdal-dev] NSIF with GDAL
> > 
> > Le lundi 31 ao?t 2015 11:21:51, vous avez ?crit :
> > > Hi Even,
> > > Thanks for your quick response.
> > > I have already read and worked according to this document
> > > (http://gdal.org/frmt_nitf.html) Still, after removing the aux.xml 
> > > file, the data is gone with it.
> > 
> > That's a bit surprising. See:
> > 
> > $ gdal_translate -q byte.tif byte.ntf -of NITF -co FTITLE=foo -a_srs
> > EPSG:32611 $ rm byte.ntf.aux.xml $ gdalinfo byte.ntf | grep FTITLE 
> > NITF_FTITLE=foo
> > 
> > > Moreover, this document talks about specific info which is 
> > > relevant to NITF header, but I have an additional information that 
> > > is not part of NITF (my metadata is relevant to NSIF - STANAG 4545).
> > 
> > It is a bit difficult to comment as you're not very specific about 
> > which exact info you're trying to write.
> > 
> > You've the possibility to write content of TREs (for most of them 
> > you'll have to compose it manually) in file or image subheaders with 
> > the TRE= and FILE_TRE= creation options.
> > 
> > Even
> > 
> > --
> > Spatialys - Geospatial professional services 
> > http://www.spatialys.com
> > 
> > The information in this e-mail transmission contains proprietary and 
> > business sensitive information.  Unauthorized interception of this 
> > e-mail may constitute a violation of law. If you are not the 
> > intended recipient, you are hereby notified that any review, 
> > dissemination, distribution or duplication of this communication is 
> > strictly prohibited. You are also asked to contact the sender by 
> > reply email and immediately destroy all copies of the original message.
> 
> --
> Spatialys - Geospatial professional services http://www.spatialys.com
> 
> The information in this e-mail transmission contains proprietary and 
> business sensitive information.  Unauthorized interception of this 
> e-mail may constitute a violation of law. If you are not the intended 
> recipient, you are hereby notified that any review, dissemination, 
> distribution or duplication of this communication is strictly 
> prohibited. You are also asked to contact the sender by reply email 
> and immediately destroy all copies of the original message.

--
Spatialys - Geospatial professional services http://www.spatialys.com

From gawade.oefp at gmail.com  Mon Aug 31 20:52:31 2015
From: gawade.oefp at gmail.com (Gawade P)
Date: Tue, 1 Sep 2015 09:22:31 +0530
Subject: [gdal-dev] Issue with gdalchksum on Fedora 21 ppc64le?
In-Reply-To: <CAPS4cko8S2762BUcB+C7=LOiVqb1wqmLQK4MeV5OqOMkJF9MYQ@mail.gmail.com>
References: <CAPS4ckoC9SkGUCsZdvC53cSRrOaVHhNv-EHA8x9d-_Vb=KuqkA@mail.gmail.com>
	<201508271230.15352.even.rouault@spatialys.com>
	<CAPS4ckqc5ZqP8eBiNSowaoKPdeU_1CsT=q1+haGQEK9sC3rh6g@mail.gmail.com>
	<201508280922.19563.even.rouault@spatialys.com>
	<CAPS4cko8S2762BUcB+C7=LOiVqb1wqmLQK4MeV5OqOMkJF9MYQ@mail.gmail.com>
Message-ID: <CAPS4ckogD7PWPfShb=snEUkLAhbToBAy2Qr6kUh+40+E1La2Sw@mail.gmail.com>

Hi Even,

I have raised the ticket: https://trac.osgeo.org/gdal/ticket/6091
and attached the patch to it.

Thanks.

On Fri, Aug 28, 2015 at 2:48 PM, Gawade P <gawade.oefp at gmail.com> wrote:
> Thanks, Even. Sure, I will run the full test suite, prepare the patch,
> raise a ticket and update it.
>
> On Fri, Aug 28, 2015 at 12:52 PM, Even Rouault
> <even.rouault at spatialys.com> wrote:
>> Gawade,
>>
>> Looks good to me. Could you prepare a patch for the changes and attach it to a
>> ticket ? Thanks
>>
>> Even
>>
>>> Hi Even,
>>>
>>> Please find my response below:
>>> >Interesting, I wouldn't have thought this to change the result of the
>>> >rounding, but who knows... Could you compare the color tables to check
>>> >that the differences are just within a +/- 1 amplitude ?
>>>
>>> Yes. The map does not change for +ve slope values. For -ve slope
>>> values there is a consistent deviation of -1 through all values
>>> Attaching a sample data set for your reference.
>>>
>>> >Yes, once we get same results on both platforms, adjusting the expected
>>> >checksums of nwt_grd.py / nwt_grc.py scripts might be needed.
>>>
>>> Confirmed that we are getting the same results on both platforms.
>>> Looks like no changes are needed in nwt_grc.py. It still passes and
>>> checksum value is still same.
>>> Updated nwt_grd.py as follows, and it passes:
>>>     tst2 = gdaltest.GDALTest( 'NWT_GRD', 'nwt_grd.grd', 2, 33690 )
>>>     status2 = tst2.testOpen()
>>>     tst3 = gdaltest.GDALTest( 'NWT_GRD', 'nwt_grd.grd', 3, 20365 )
>>>     status3 = tst3.testOpen()
>>>
>>> Please let me know if any more verification is required. Thanks!
>>>
>>>
>>> On Thu, Aug 27, 2015 at 4:00 PM, Even Rouault
>>>
>>> <even.rouault at spatialys.com> wrote:
>>> > Le jeudi 27 ao?t 2015 12:23:07, Gawade P a ?crit :
>>> >> Thanks, Even.I have tried this change on ppc and there were some
>>> >> differences in the map values resulting in a small deviation in the
>>> >> final checksum value compared to the current output on x86
>>> >> The output on ppc with this change is:
>>> >> bash-4.2# gdalchksum.py nwt_grd.grd
>>> >> 28093
>>> >> 33690
>>> >> 20365
>>> >> 25856
>>> >> The expected values for band 2 and 3 are :
>>> >> 33626
>>> >> 20260
>>> >
>>> > Interesting, I wouldn't have thought this to change the result of the
>>> > rounding, but who knows... Could you compare the color tables to check
>>> > that the differences are just within a +/- 1 amplitude ?
>>> >
>>> > Thinking more, a cause for a difference of rounding should happen with
>>> > negative values, since casting truncates to the upper integer in case of
>>> > negative value. I'd think my proposed formula to be (slightly) more
>>> > accurate in case of negative slope, since it will only cast positive
>>> > values.
>>> >
>>> >> I have not tried this change on x86, will try and let you know. Could
>>> >> there be any implications of these changed values elsewhere in the
>>> >> code (Assuming that they will change on x86 as well)? I believe some
>>> >> test cases might fail as well...
>>> >
>>> > Yes, once we get same results on both platforms, adjusting the expected
>>> > checksums of nwt_grd.py / nwt_grc.py scripts might be needed.
>>> >
>>> >> On Thu, Aug 27, 2015 at 3:10 PM, Even Rouault
>>> >>
>>> >> <even.rouault at spatialys.com> wrote:
>>> >> > Le jeudi 27 ao?t 2015 06:20:41, Gawade P a ?crit :
>>> >> >> Good Morning, Even.
>>> >> >> I debugged this more, focusing, as you suggested, on the  computation
>>> >> >> of the colormap and looks like the difference in the value of the
>>> >> >> checksum is due to the difference in calculation of the color map
>>> >> >> values for negative slopes. The following lines of code in
>>> >> >> frmts/northwood/northwood.cpp, createIP() function are exhibiting
>>> >> >>
>>> >> >> different behavior on intel and ppc:
>>> >> >>      for( i = wm + 1; i < index; i++)
>>> >> >>
>>> >> >>     {
>>> >> >>
>>> >> >>         map[i].r = map[wm].r + (unsigned char)(((i - wm) * rslope) +
>>> >> >>         0.5); map[i].g = map[wm].g + (unsigned char)(((i - wm) *
>>> >> >>         gslope) + 0.5); map[i].b = map[wm].b + (unsigned char)(((i -
>>> >> >>         wm) * bslope) + 0.5);
>>> >> >>
>>> >> >>     }
>>> >> >>
>>> >> >> primarily, because of the (unsigned char) casting of the second
>>> >> >> operand. Looks like the behavior could be undefined if the float
>>> >> >> value resulting from the computation of the expression (((i - wm) *
>>> >> >> bslope) + 0.5) is negative, as would be the case for negative slope.
>>> >> >> For ppc, the expression  (unsigned char)(((i - wm) * bslope) + 0.5)
>>> >> >> is evaluating to zero, whenever the result of (((i - wm) * bslope) +
>>> >> >> 0.5) is -ve i.e. for -ve slope
>>> >> >
>>> >> > Interesting. It is likely that the result of the cast (unsigned
>>> >> > char)negative_floating_point_value is undefined by the C standard and
>>> >> > there might be differences in behaviour according to the CPU here
>>> >> > (seems to be confirmed by
>>> >> > http://stackoverflow.com/questions/2490600/iphone-floats-cast-to-
>>> >> > unsigned-ints-get-set-to-0-if-they-are-negative)
>>> >> >
>>> >> > I think the following should be portable:
>>> >> >
>>> >> > map[i].r = (unsigned char)(map[wm].r + (i - wm) * rslope + 0.5);
>>> >> > map[i].g = (unsigned char)(map[wm].g + (i - wm) * gslope + 0.5);
>>> >> > map[i].b = (unsigned char)(map[wm].b + (i - wm) * bslope + 0.5);
>>> >> >
>>> >> > Could you confirm ?
>>> >> >
>>> >> > W might want to explictly clamp to [0,255] before casting, but
>>> >> > according to the formulas of the slope, I'm confident the result
>>> >> > should already be in [0,255.X] range.
>>> >> >
>>> >> > Even
>>> >> >
>>> >> > --
>>> >> > Spatialys - Geospatial professional services
>>> >> > http://www.spatialys.com
>>> >
>>> > --
>>> > Spatialys - Geospatial professional services
>>> > http://www.spatialys.com
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com

From userofgdal at gmail.com  Mon Aug 31 23:12:22 2015
From: userofgdal at gmail.com (user gdal)
Date: Tue, 1 Sep 2015 11:42:22 +0530
Subject: [gdal-dev] Problem with GDALWarp
Message-ID: <CAJnZZa+TrT-xTB7Cx1XK-=aiZwkNpE2rL+YLea+cdN=yM=hTOQ@mail.gmail.com>

Dear Dr. Brad/all, Thanks for your kind and prompt reply. Below are my
answers/clarifications. It may also be said that the program stops
execution just after the 'operation->Initialize(WO)' step. Can someone help
me solve this problem.

On Wed, 19 Aug 2015 04:01:32 PM user gdal wrote:

Dear friends,
I have to programmatically clip (using Visual C++) with GDALWarp. I
proceeded like this:

GDALDataset *outimg;

outimg=driver->Create(filename, NewCol, NewRow, Band, DataType, NULL);

GDALWarpOptions *WO=GDALCreateWarpOptions( );

if(WO)
{
  WO->hSrcDS=inimg; WO->nBandCount=Band;

What is inimg?

Ans. The bigger input image from which I want to draw subset (i.e., clip)
with the help of a vector layer myshp. It' (inimg) is of type GDALDataset
*. In the declaration of variables, it would appear as GDALDataset *inimg
Also, in WO->hCutline (pl. see below), I am passing myshp (which has
strictly polygon topology), of the type OGRLayer * (i.e., OGRLayer *myshp).
Of course the shape file and inimg have the same projection.


What (exactly) are you passing as filename?
Ans. char *filename (such as e:\sub\subimage.img. There are no other
characters in the 'filename')

Can you try posting an actual, compilable example?
Ans. There is a GUI from which I extract parameters which can give us a lot
of inconvenience. The program compiles without 'abusing' me. What I am
getting is a run time (or debug time) error.

----------------------------------------------------------------------------------------------------------------------------------------------
GDALDataset *inimg, *outimg;

outimg->(GDALDataset *) GDALOpen(filename, GA_Update);
/* I also tried, instead of the above, outimg=driver->Create(filename,
NewCol, NewRow, Band, DataType, NULL); NewCol and NewRow, have values of
the range 30 each */

GDALWarpOptions *WO=GDALCreateWarpOptions( );

if(WO)
{
  WO->hSrcDS=inimg; WO->nBandCount=Band;

  // In a sample image I wish to use, Band =3, checked

  WO->hDstDS=(GDALDatasetH)(outimg); WO->hCutline=myshp;

  WO->panSrcBands=(int *) CPLMalloc(sizeof(int)*Band);
WO->panSrcBands[0]=Band;
  WO->panDstBands=(int *) CPLMalloc(sizeof(int)*Band);
WO->panDstBands[0]=Band;

  WO->pfnProgress=GDALTermProgress;

  GDALWarpOperation *operation=new GDALWarpOperation;

  if(operation)
  {
    operation->Initialize(WO);  // the speed breaker
    operation->ChunkAndWarpImage(0, 0, NewCol, NewRow);

    GDALDestroyWarpOptions(WO); WO=NULL; delete operation; operation=NULL;

   }

   GDALClose((GDALDatasetH) outimg); outimg=NULL;

  }

----------------------------------------------------------------------------------------------------------------------------------------------
Does the tutorial (just by itself, exactly as written) work on your machine?
Ans. To be honest I haven't checked. I, however, have gone through the
tutorial and after convincing myself that I have understood what to do, I
wrote the program.

With many thanks,

Yours sincerely,
 B. Ramesh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150901/5b286aa2/attachment.html>

