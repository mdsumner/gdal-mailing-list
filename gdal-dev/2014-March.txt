From even.rouault at mines-paris.org  Sat Mar  1 02:18:10 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 1 Mar 2014 11:18:10 +0100
Subject: [gdal-dev] Bus Error (memory error)
In-Reply-To: <1393636089994-5106728.post@n6.nabble.com>
References: <1393636089994-5106728.post@n6.nabble.com>
Message-ID: <201403011118.10303.even.rouault@mines-paris.org>

Le samedi 01 mars 2014 02:08:09, Gpetr a ?crit :
> Hello,
> 
> I was trying to process a raster image via Gdal when it's happened an
> unexpected error. A Bus Error. After that, QGIS can not start. Also I
> recieve the same error when I'm trying to execute any of the GDAL commands
> via terminal.
> I know that this error happens when a process is trying to access memory
> that the CPU cannot physically address.

Gpetr,

Well, you could give a few more details, for example :
- the GDAL version used
- what kind of raster (which GDAL driver) are you trying to open ?
- which GDAL command do you try: gdalinfo, gdal_translate ?
- type of CPU: Intel-like ? (bus error can happen more frequently on other 
hardware architectures such as Sparc)
- a link to the file you try to open or provide it as an attachment to a ticket 
to http://trac.osgeo.org/gdal/newticket
- if you have the gdb utility installed, a stacktrace of the GDAL utility when 
the bus error occurs (and/or the same with the valgrind utility)

> 
> I checked my log files and the output of the error is the following:

Hum, well perhaps hard disk failure could give a crash in portion of code that 
don't properly check the return code of I/O operations. But difficult to know 
and fix without knowing where the crash occurs within GDAL.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jef at norbit.de  Sat Mar  1 03:38:29 2014
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Sat, 1 Mar 2014 12:38:29 +0100
Subject: [gdal-dev] Bus Error (memory error)
In-Reply-To: <201403011118.10303.even.rouault@mines-paris.org>
References: <1393636089994-5106728.post@n6.nabble.com>
	<201403011118.10303.even.rouault@mines-paris.org>
Message-ID: <20140301113829.GA15781@norbit.de>

Hi Even,

On Sat, 01. Mar 2014 at 11:18:10 +0100, Even Rouault wrote:
> Hum, well perhaps hard disk failure could give a crash in portion of code
> that don't properly check the return code of I/O operations. But difficult to
> know and fix without knowing where the crash occurs within GDAL.

Maybe the disk errors aren't even on the data, but on the binaries.


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de
QGIS PSC member (RM)      Germany                      IRC: jef on FreeNode                         

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From even.rouault at mines-paris.org  Sat Mar  1 03:58:20 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 1 Mar 2014 12:58:20 +0100
Subject: [gdal-dev] Bus Error (memory error)
In-Reply-To: <20140301113829.GA15781@norbit.de>
References: <1393636089994-5106728.post@n6.nabble.com>
	<201403011118.10303.even.rouault@mines-paris.org>
	<20140301113829.GA15781@norbit.de>
Message-ID: <201403011258.21035.even.rouault@mines-paris.org>

Le samedi 01 mars 2014 12:38:29, J?rgen E. Fischer a ?crit :
> Hi Even,
> 
> On Sat, 01. Mar 2014 at 11:18:10 +0100, Even Rouault wrote:
> > Hum, well perhaps hard disk failure could give a crash in portion of code
> > that don't properly check the return code of I/O operations. But
> > difficult to know and fix without knowing where the crash occurs within
> > GDAL.
> 
> Maybe the disk errors aren't even on the data, but on the binaries.

Eh, that would be the 0.1% case where the software isn't the cause of the 
failure ;-)

> 
> 
> J?rgen

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jef at norbit.de  Sat Mar  1 05:03:48 2014
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Sat, 1 Mar 2014 14:03:48 +0100
Subject: [gdal-dev] Bus Error (memory error)
In-Reply-To: <201403011258.21035.even.rouault@mines-paris.org>
References: <1393636089994-5106728.post@n6.nabble.com>
	<201403011118.10303.even.rouault@mines-paris.org>
	<20140301113829.GA15781@norbit.de>
	<201403011258.21035.even.rouault@mines-paris.org>
Message-ID: <20140301130348.GA25594@norbit.de>

Hi Even,

On Sat, 01. Mar 2014 at 12:58:20 +0100, Even Rouault wrote:
> > Maybe the disk errors aren't even on the data, but on the binaries.
 
> Eh, that would be the 0.1% case where the software isn't the cause of the
> failure ;-)

hehe.  but sda might be the system disk that is dying - high sector, but maybe
dual boot.  And if gdal binaries are not yet affected (QGIS already doesn't
start anymore), I figure the probability that it will happen soon is raising
with every access.

Not sure if it's a must to work correctly under such circumstances, but if so
[1] could be used to test.


J?rgen 


[1] http://stackoverflow.com/questions/1870696/simulate-a-faulty-block-device-with-read-errors

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de
QGIS PSC member (RM)      Germany                      IRC: jef on FreeNode                         

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From gkpetrak at gmail.com  Sat Mar  1 07:20:55 2014
From: gkpetrak at gmail.com (Gpetr)
Date: Sat, 1 Mar 2014 07:20:55 -0800 (PST)
Subject: [gdal-dev] Bus Error (memory error)
In-Reply-To: <20140301130348.GA25594@norbit.de>
References: <1393636089994-5106728.post@n6.nabble.com>
	<201403011118.10303.even.rouault@mines-paris.org>
	<20140301113829.GA15781@norbit.de>
	<201403011258.21035.even.rouault@mines-paris.org>
	<20140301130348.GA25594@norbit.de>
Message-ID: <1393687255924-5106779.post@n6.nabble.com>

Hello Even and J?rgen, 
thank you for your quick replies.

I'll try to give you more details about the error and my system.
My system:
Architecture: x86_64
CPU: Intel(R) Core(TM) i5-2450M CPU @ 2.50GHz
Disk: ST9500325AS (/dev/sda)
Os: OpenSuse 12.3

I'm using GDAL 1.10.1 - 1.37 and QGIS 2.2 and I process GeoTIFFs raster
images.
The bus error occured for first time, when I executed the *nearblack* gdal
command. I typed exactly the following:
--> nearblack -of GTiff -setalpha -o Natural_Color_432_2.tif
Natural_Color_432.tif
After that, the bus error is everywhere on Gdal. 

I checked the bus error with gdb and I receive the following outputs:
On QGIS:
Starting program: /usr/bin/qgis 
Missing separate debuginfo for /lib64/ld-linux-x86-64.so.2
Try: zypper install -C
"debuginfo(build-id)=0a23c4e8300b31613d800697d835b384e921407e"
Program received signal SIGBUS, Bus error.
0x00007ffff7de5fbc in _dl_relocate_object () from
/lib64/ld-linux-x86-64.so.2

On Gdal (gdalinfo command):

Starting program: /usr/bin/gdalinfo 
Missing separate debuginfo for /lib64/ld-linux-x86-64.so.2
Try: zypper install -C
"debuginfo(build-id)=0a23c4e8300b31613d800697d835b384e921407e"

Program received signal SIGBUS, Bus error.
0x00007ffff7de5fbc in _dl_relocate_object () from
/lib64/ld-linux-x86-64.so.2

(gdb) bt
#0  0x00007ffff7de5fbc in _dl_relocate_object () from
/lib64/ld-linux-x86-64.so.2
#1  0x00007ffff7ddec52 in dl_main () from /lib64/ld-linux-x86-64.so.2
#2  0x00007ffff7df00be in _dl_sysdep_start () from
/lib64/ld-linux-x86-64.so.2
#3  0x00007ffff7ddfd86 in _dl_start () from /lib64/ld-linux-x86-64.so.2
#4  0x00007ffff7ddc528 in _start () from /lib64/ld-linux-x86-64.so.2
#5  0x0000000000000001 in ?? ()
#6  0x00007fffffffe191 in ?? ()
#7  0x0000000000000000 in ?? ()

I think that a  C part of code contrasts with a python part of code. Today I
realized that my Django's development server which is a python program too,
can not start and I receive a bus error again.

Any ideas ?

Thank you in advance,
George









--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Bus-Error-memory-error-tp5106728p5106779.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From boxerab at gmail.com  Sat Mar  1 07:27:45 2014
From: boxerab at gmail.com (Aaron Boxer)
Date: Sat, 1 Mar 2014 10:27:45 -0500
Subject: [gdal-dev] New compression library based on gdal design
Message-ID: <CAK8GPyCvMju+3zrmiCEeBHvKvYhKp_h2NVp7d+E0_GTvAiywzA@mail.gmail.com>

Hello,

I recently started developing an open source jpeg2000 compression library
using opencl.
I would like to base the library design on the very successful gdal library
design.
Can anyone recomend any resources to help me to grok the high level design
of gdal?

Thanks so much,
Aaron
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140301/6e625896/attachment.html>

From nhv at cape.com  Sat Mar  1 07:37:10 2014
From: nhv at cape.com (Norman Vine)
Date: Sat, 1 Mar 2014 10:37:10 -0500
Subject: [gdal-dev] New compression library based on gdal design
In-Reply-To: <CAK8GPyCvMju+3zrmiCEeBHvKvYhKp_h2NVp7d+E0_GTvAiywzA@mail.gmail.com>
References: <CAK8GPyCvMju+3zrmiCEeBHvKvYhKp_h2NVp7d+E0_GTvAiywzA@mail.gmail.com>
Message-ID: <8DD391C3-7DDB-4F0E-BEDD-60FBABF054C9@cape.com>

These should help

http://gdal.org/gdal_drivertut.html
http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/openjpeg/openjpegdataset.cpp

On Mar 1, 2014, at 10:27 AM, Aaron Boxer <boxerab at gmail.com> wrote:

> Hello,
> 
> I recently started developing an open source jpeg2000 compression library using opencl.
> I would like to base the library design on the very successful gdal library design.
> Can anyone recomend any resources to help me to grok the high level design of gdal?
> 
> Thanks so much,
> Aaron
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140301/27cb1e12/attachment.html>

From boxerab at gmail.com  Sat Mar  1 08:07:23 2014
From: boxerab at gmail.com (Aaron Boxer)
Date: Sat, 1 Mar 2014 11:07:23 -0500
Subject: [gdal-dev] New compression library based on gdal design
In-Reply-To: <8DD391C3-7DDB-4F0E-BEDD-60FBABF054C9@cape.com>
References: <CAK8GPyCvMju+3zrmiCEeBHvKvYhKp_h2NVp7d+E0_GTvAiywzA@mail.gmail.com>
	<8DD391C3-7DDB-4F0E-BEDD-60FBABF054C9@cape.com>
Message-ID: <CAK8GPyCP3TQS=8u4SRGPcWLjizE=LNc_DGVmfNXv6KoAtpFikA@mail.gmail.com>

Thanks, Norman!  That is very useful.
I haven't decided yet whether to use C or C++ for the library language.
Is the gdal core C or C++?  I am tending to C over C++, just for
portability.
But I want to avoid the spaghetti code I see in OpenJPEG.

Any comments on this?

Thanks again,
Aaron


On Sat, Mar 1, 2014 at 10:37 AM, Norman Vine <nhv at cape.com> wrote:

> These should help
>
> http://gdal.org/gdal_drivertut.html
>
> http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/openjpeg/openjpegdataset.cpp
>
> On Mar 1, 2014, at 10:27 AM, Aaron Boxer <boxerab at gmail.com> wrote:
>
> Hello,
>
> I recently started developing an open source jpeg2000 compression library
> using opencl.
> I would like to base the library design on the very successful gdal
> library design.
> Can anyone recomend any resources to help me to grok the high level design
> of gdal?
>
> Thanks so much,
> Aaron
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140301/4e143df1/attachment.html>

From nhv at cape.com  Sat Mar  1 08:11:49 2014
From: nhv at cape.com (Norman Vine)
Date: Sat, 1 Mar 2014 11:11:49 -0500
Subject: [gdal-dev] New compression library based on gdal design
In-Reply-To: <CAK8GPyCP3TQS=8u4SRGPcWLjizE=LNc_DGVmfNXv6KoAtpFikA@mail.gmail.com>
References: <CAK8GPyCvMju+3zrmiCEeBHvKvYhKp_h2NVp7d+E0_GTvAiywzA@mail.gmail.com>
	<8DD391C3-7DDB-4F0E-BEDD-60FBABF054C9@cape.com>
	<CAK8GPyCP3TQS=8u4SRGPcWLjizE=LNc_DGVmfNXv6KoAtpFikA@mail.gmail.com>
Message-ID: <9015AD35-B12C-4F53-A91A-DBF1038F6ED1@cape.com>

GDAL core is mostly C++
but it is exposed thru a 'C' interface for stability reasons

e.g. the 'C API' is stable thru major releases whereas the
underlying implementation may change

 
On Mar 1, 2014, at 11:07 AM, Aaron Boxer <boxerab at gmail.com> wrote:

> Thanks, Norman!  That is very useful. 
> I haven't decided yet whether to use C or C++ for the library language.
> Is the gdal core C or C++?  I am tending to C over C++, just for portability.
> But I want to avoid the spaghetti code I see in OpenJPEG.
> 
> Any comments on this?
> 
> Thanks again,
> Aaron
> 
> 
> On Sat, Mar 1, 2014 at 10:37 AM, Norman Vine <nhv at cape.com> wrote:
> These should help
> 
> http://gdal.org/gdal_drivertut.html
> http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/openjpeg/openjpegdataset.cpp
> 
> On Mar 1, 2014, at 10:27 AM, Aaron Boxer <boxerab at gmail.com> wrote:
> 
>> Hello,
>> 
>> I recently started developing an open source jpeg2000 compression library using opencl.
>> I would like to base the library design on the very successful gdal library design.
>> Can anyone recomend any resources to help me to grok the high level design of gdal?
>> 
>> Thanks so much,
>> Aaron
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140301/2b11b98f/attachment.html>

From boxerab at gmail.com  Sat Mar  1 08:21:14 2014
From: boxerab at gmail.com (Aaron Boxer)
Date: Sat, 1 Mar 2014 11:21:14 -0500
Subject: [gdal-dev] New compression library based on gdal design
In-Reply-To: <3817C102-5585-49D9-9385-B3D44A39B254@pricepages.org>
References: <CAK8GPyCvMju+3zrmiCEeBHvKvYhKp_h2NVp7d+E0_GTvAiywzA@mail.gmail.com>
	<3817C102-5585-49D9-9385-B3D44A39B254@pricepages.org>
Message-ID: <CAK8GPyCYe6ZjRDW-LXAoSOKyAQk6Myt332ZT+G=0qdYorHmSQQ@mail.gmail.com>

Hey Seth,

I would love to have some help!  Currently I have gathered all the relevant
open-source GPU accelerated code
I could find here:

https://github.com/OpenCodec

My plan is to port an existing CUDA jpeg 2000 library to OpenCL:

https://github.com/OpenCodec/gpu_jpeg2k

My library will be called "ThousandthChicken", after the Seymour Cray quote:

If you were plowing a field, which would you rather use? Two strong oxen or
1024 chickens?<http://www.brainyquote.com/quotes/quotes/s/seymourcra103779.html>

Have a look a the code, if you have some time, and let me know your
thoughts.

Cheers,
Aaron




On Sat, Mar 1, 2014 at 11:06 AM, Seth Price <seth at pricepages.org> wrote:

> I am interested in seeing an OpenCL JPEG2000 decoder/encoder developed. I
> have a bit of experience writing OpenCL kernels. Please contact me if you
> need help.
> ~Seth
>
> via iPhone
>
> > On Mar 1, 2014, at 7:27 AM, Aaron Boxer <boxerab at gmail.com> wrote:
> >
> > Hello,
> >
> > I recently started developing an open source jpeg2000 compression
> library using opencl.
> > I would like to base the library design on the very successful gdal
> library design.
> > Can anyone recomend any resources to help me to grok the high level
> design of gdal?
> >
> > Thanks so much,
> > Aaron
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140301/24335830/attachment.html>

From seth at pricepages.org  Sat Mar  1 08:06:42 2014
From: seth at pricepages.org (Seth Price)
Date: Sat, 1 Mar 2014 08:06:42 -0800
Subject: [gdal-dev] New compression library based on gdal design
In-Reply-To: <CAK8GPyCvMju+3zrmiCEeBHvKvYhKp_h2NVp7d+E0_GTvAiywzA@mail.gmail.com>
References: <CAK8GPyCvMju+3zrmiCEeBHvKvYhKp_h2NVp7d+E0_GTvAiywzA@mail.gmail.com>
Message-ID: <3817C102-5585-49D9-9385-B3D44A39B254@pricepages.org>

I am interested in seeing an OpenCL JPEG2000 decoder/encoder developed. I have a bit of experience writing OpenCL kernels. Please contact me if you need help.
~Seth

via iPhone

> On Mar 1, 2014, at 7:27 AM, Aaron Boxer <boxerab at gmail.com> wrote:
> 
> Hello,
> 
> I recently started developing an open source jpeg2000 compression library using opencl.
> I would like to base the library design on the very successful gdal library design.
> Can anyone recomend any resources to help me to grok the high level design of gdal?
> 
> Thanks so much,
> Aaron
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jef at norbit.de  Sat Mar  1 08:54:44 2014
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Sat, 1 Mar 2014 17:54:44 +0100
Subject: [gdal-dev] Bus Error (memory error)
In-Reply-To: <1393687255924-5106779.post@n6.nabble.com>
References: <1393636089994-5106728.post@n6.nabble.com>
	<201403011118.10303.even.rouault@mines-paris.org>
	<20140301113829.GA15781@norbit.de>
	<201403011258.21035.even.rouault@mines-paris.org>
	<20140301130348.GA25594@norbit.de>
	<1393687255924-5106779.post@n6.nabble.com>
Message-ID: <20140301165444.GA27376@norbit.de>

Hi Gpetr,

IMHO all that is evidence that the disk failures are in the binaries.  It crash
while it still loading the shared libraries.  Bus errors on Linux on Intel
point to paging problems.  Unaligned accesses don't apply there.

And I'd expect the disk failures to spread and backup as much as I can while I
still can and replace the disk...


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de
QGIS PSC member (RM)      Germany                      IRC: jef on FreeNode                         

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From gkpetrak at gmail.com  Sat Mar  1 09:29:35 2014
From: gkpetrak at gmail.com (Gpetr)
Date: Sat, 1 Mar 2014 09:29:35 -0800 (PST)
Subject: [gdal-dev] Bus Error (memory error)
In-Reply-To: <20140301165444.GA27376@norbit.de>
References: <1393636089994-5106728.post@n6.nabble.com>
	<201403011118.10303.even.rouault@mines-paris.org>
	<20140301113829.GA15781@norbit.de>
	<201403011258.21035.even.rouault@mines-paris.org>
	<20140301130348.GA25594@norbit.de>
	<1393687255924-5106779.post@n6.nabble.com>
	<20140301165444.GA27376@norbit.de>
Message-ID: <1393694975560-5106803.post@n6.nabble.com>

Hello J?rgen, thanks for your reply

I hoped that I could fix it. 
I have to present a project (in which I was working with Gdal) at the end of
April. I think
that the most reliable solution is to replace the disk, right ?

Regards,
George



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Bus-Error-memory-error-tp5106728p5106803.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Sat Mar  1 14:31:06 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 1 Mar 2014 23:31:06 +0100
Subject: [gdal-dev] New compression library based on gdal design
In-Reply-To: <CAK8GPyCYe6ZjRDW-LXAoSOKyAQk6Myt332ZT+G=0qdYorHmSQQ@mail.gmail.com>
References: <CAK8GPyCvMju+3zrmiCEeBHvKvYhKp_h2NVp7d+E0_GTvAiywzA@mail.gmail.com>
	<3817C102-5585-49D9-9385-B3D44A39B254@pricepages.org>
	<CAK8GPyCYe6ZjRDW-LXAoSOKyAQk6Myt332ZT+G=0qdYorHmSQQ@mail.gmail.com>
Message-ID: <201403012331.06933.even.rouault@mines-paris.org>

Aaron,

I'm a bit surprised about your qualifying of the openjpeg code base as 
"spaghetti code". I've not spent a lot of time in it, just fixing a few bugs 
here or there, but this was not my feeling at all. I can't remember having 
seen goto's.

Anyway just seeing that gpu_jpeg2k is licenced under Affero GPL, so if you plan 
to port it, you will also be bound by that licence, which might limit the 
potential audience for your library.

What would be cool is to have GPU accelerated backend in an existing library 
such as OpenJPEG to avoid having to write yet another GDAL JPEG2000 driver. We 
have already 5 of them ! And I think people have started experimented about 
acceleration routines in OpenJPEG so that might be a good idea to exchange on 
their mailing list about what already exists.

Best regards,

Even

> Hey Seth,
> 
> I would love to have some help!  Currently I have gathered all the relevant
> open-source GPU accelerated code
> I could find here:
> 
> https://github.com/OpenCodec
> 
> My plan is to port an existing CUDA jpeg 2000 library to OpenCL:
> 
> https://github.com/OpenCodec/gpu_jpeg2k
> 
> My library will be called "ThousandthChicken", after the Seymour Cray
> quote:
> 
> If you were plowing a field, which would you rather use? Two strong oxen or
> 1024
> chickens?<http://www.brainyquote.com/quotes/quotes/s/seymourcra103779.html
> >
> 
> Have a look a the code, if you have some time, and let me know your
> thoughts.
> 
> Cheers,
> Aaron
> 
> On Sat, Mar 1, 2014 at 11:06 AM, Seth Price <seth at pricepages.org> wrote:
> > I am interested in seeing an OpenCL JPEG2000 decoder/encoder developed. I
> > have a bit of experience writing OpenCL kernels. Please contact me if you
> > need help.
> > ~Seth
> > 
> > via iPhone
> > 
> > > On Mar 1, 2014, at 7:27 AM, Aaron Boxer <boxerab at gmail.com> wrote:
> > > 
> > > Hello,
> > > 
> > > I recently started developing an open source jpeg2000 compression
> > 
> > library using opencl.
> > 
> > > I would like to base the library design on the very successful gdal
> > 
> > library design.
> > 
> > > Can anyone recomend any resources to help me to grok the high level
> > 
> > design of gdal?
> > 
> > > Thanks so much,
> > > Aaron
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From boxerab at gmail.com  Sat Mar  1 16:33:59 2014
From: boxerab at gmail.com (Aaron Boxer)
Date: Sat, 1 Mar 2014 19:33:59 -0500
Subject: [gdal-dev] New compression library based on gdal design
In-Reply-To: <201403012331.06933.even.rouault@mines-paris.org>
References: <CAK8GPyCvMju+3zrmiCEeBHvKvYhKp_h2NVp7d+E0_GTvAiywzA@mail.gmail.com>
	<3817C102-5585-49D9-9385-B3D44A39B254@pricepages.org>
	<CAK8GPyCYe6ZjRDW-LXAoSOKyAQk6Myt332ZT+G=0qdYorHmSQQ@mail.gmail.com>
	<201403012331.06933.even.rouault@mines-paris.org>
Message-ID: <CAK8GPyD68RKyx4UbA8HOcUpG_08OuU6k=x=03OgkYX9GvA=JvQ@mail.gmail.com>

Hi Even,


> I'm a bit surprised about your qualifying of the openjpeg code base as
> "spaghetti code". I've not spent a lot of time in it, just fixing a few
> bugs
> here or there, but this was not my feeling at all. I can't remember having
> seen goto's.
>

Thanks for your feedback. Perhaps I was being overly harsh. I didn't mean
to imply that *all* of the OpenJpeg code is low quality,
but the code I did see looked like spaghetti. And what exactly is wrong
with goto ??? !!!!!  :):)
Goto has its place.


> Anyway just seeing that gpu_jpeg2k is licenced under Affero GPL, so if you
> plan
> to port it, you will also be bound by that licence, which might limit the
> potential audience for your library.
>
>
Good point. Once I do the port, and the code is working, I am planning on a
complete re-write,
so I will be able to choose the license for the library. But you bring up
an interesting point: which license
to choose.  I like to gpl v2 license, so perhaps that is what I will
choose.



> What would be cool is to have GPU accelerated backend in an existing
> library
> such as OpenJPEG to avoid having to write yet another GDAL JPEG2000
> driver. We
> have already 5 of them ! And I think people have started experimented about
> acceleration routines in OpenJPEG so that might be a good idea to exchange
> on
> their mailing list about what already exists.
>

Good idea. In fact, I have spent the last year or so on the OpenJPEG
mailing list, practically begging
people to help work on this. The response has been quite dismal. (In fact,
the entire OpenJPEG project has been dormant
for the last year, although it seems to be waking up over the last few
months)  One developer has mentioned that he would like to open source the
opencl additions to OpenJPEG that he has been working on for a few years,
but nothing seems to come of this.

Frustrated with the lack of progress, I decided to write my own. I would
like to integrate it back into OpenJPEG eventually,
if there is support from OpenJPEG developers to do this.

Best,
Aaron



>
> Best regards,
>
> Even
>
> > Hey Seth,
> >
> > I would love to have some help!  Currently I have gathered all the
> relevant
> > open-source GPU accelerated code
> > I could find here:
> >
> > https://github.com/OpenCodec
> >
> > My plan is to port an existing CUDA jpeg 2000 library to OpenCL:
> >
> > https://github.com/OpenCodec/gpu_jpeg2k
> >
> > My library will be called "ThousandthChicken", after the Seymour Cray
> > quote:
> >
> > If you were plowing a field, which would you rather use? Two strong oxen
> or
> > 1024
> > chickens?<
> http://www.brainyquote.com/quotes/quotes/s/seymourcra103779.html
> > >
> >
> > Have a look a the code, if you have some time, and let me know your
> > thoughts.
> >
> > Cheers,
> > Aaron
> >
> > On Sat, Mar 1, 2014 at 11:06 AM, Seth Price <seth at pricepages.org> wrote:
> > > I am interested in seeing an OpenCL JPEG2000 decoder/encoder
> developed. I
> > > have a bit of experience writing OpenCL kernels. Please contact me if
> you
> > > need help.
> > > ~Seth
> > >
> > > via iPhone
> > >
> > > > On Mar 1, 2014, at 7:27 AM, Aaron Boxer <boxerab at gmail.com> wrote:
> > > >
> > > > Hello,
> > > >
> > > > I recently started developing an open source jpeg2000 compression
> > >
> > > library using opencl.
> > >
> > > > I would like to base the library design on the very successful gdal
> > >
> > > library design.
> > >
> > > > Can anyone recomend any resources to help me to grok the high level
> > >
> > > design of gdal?
> > >
> > > > Thanks so much,
> > > > Aaron
> > > > _______________________________________________
> > > > gdal-dev mailing list
> > > > gdal-dev at lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140301/5ae5740d/attachment.html>

From arno at agerrius.nl  Sun Mar  2 06:47:37 2014
From: arno at agerrius.nl (agerrius)
Date: Sun, 2 Mar 2014 06:47:37 -0800 (PST)
Subject: [gdal-dev] C# OGR reading OSM features "stalls"
Message-ID: <1393771657536-5106937.post@n6.nabble.com>

Hi all,

I'm using the OGR libraries from a C# application to read OSM data. But I
have a problem now, with a certain file the reading of the features
"stalls". It seems GetNextFeature() never returns anything.

When I use ogrinfo -al on the same file it also seems to stall (probably at
the same point, but not sure about that).

Using this simple code I can reproduce the issue, it stops after 19404
features being read:

            Ogr.RegisterAll();
            DataSource ds =
Ogr.Open(@"C:\flightsim\work\nantucket\source\geo\osm\nantucket.osm", 0);
            for (int i = 0; i < ds.GetLayerCount(); i++)
            {
                Layer lay = ds.GetLayerByIndex(i);
                Console.WriteLine("Reading layer " + lay.GetName());
                int count = 0;
                Feature feat = lay.GetNextFeature();
                while (feat != null)
                {
                    Console.WriteLine("feature " + count);
                    count++;
                    feat = lay.GetNextFeature();
                }
                Console.WriteLine(String.Format("Contains {0} features",
count));
            }

The OSM file was extracted from a bigger file using osmosis, not sure if
that could be part of the issue. I have uploaded the OSM file for testing:

http://www.scenerydesign.org/tmp/nantucket.zip

Is there anything I'm doing wrong here? If the file had some issue I would
expect to get an error thrown.

Thanks,

Arno



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/C-OGR-reading-OSM-features-stalls-tp5106937.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Sun Mar  2 08:18:38 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 2 Mar 2014 17:18:38 +0100
Subject: [gdal-dev] C# OGR reading OSM features "stalls"
In-Reply-To: <1393771657536-5106937.post@n6.nabble.com>
References: <1393771657536-5106937.post@n6.nabble.com>
Message-ID: <201403021718.38427.even.rouault@mines-paris.org>

Le dimanche 02 mars 2014 15:47:37, agerrius a ?crit :
> Hi all,
> 
> I'm using the OGR libraries from a C# application to read OSM data. But I
> have a problem now, with a certain file the reading of the features
> "stalls". It seems GetNextFeature() never returns anything.
> 
> When I use ogrinfo -al on the same file it also seems to stall (probably at
> the same point, but not sure about that).

Arno,

Ok, I've reproduced and fixed the issue : 
http://trac.osgeo.org/gdal/ticket/5404

Anyway, with OSM data, the recommended way of reading data is to use 
interleaved reading. See "interleaved reading" paragraph at 
http://gdal.org/ogr/drv_osm.html

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From arno at agerrius.nl  Sun Mar  2 08:59:49 2014
From: arno at agerrius.nl (agerrius)
Date: Sun, 2 Mar 2014 08:59:49 -0800 (PST)
Subject: [gdal-dev] C# OGR reading OSM features "stalls"
In-Reply-To: <201403021718.38427.even.rouault@mines-paris.org>
References: <1393771657536-5106937.post@n6.nabble.com>
	<201403021718.38427.even.rouault@mines-paris.org>
Message-ID: <1393779589860-5106948.post@n6.nabble.com>

Even,

Thanks for the quick reply and the quick fix.

I'm looking at implementing the interleaved reading in my code as well,
since some files throw an error with the normal reading mode. Are you saying
this issue will not happen with interleaved reading mode?

Arno



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/C-OGR-reading-OSM-features-stalls-tp5106937p5106948.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Sun Mar  2 10:29:53 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 2 Mar 2014 19:29:53 +0100
Subject: [gdal-dev] C# OGR reading OSM features "stalls"
In-Reply-To: <1393779589860-5106948.post@n6.nabble.com>
References: <1393771657536-5106937.post@n6.nabble.com>
	<201403021718.38427.even.rouault@mines-paris.org>
	<1393779589860-5106948.post@n6.nabble.com>
Message-ID: <201403021929.53284.even.rouault@mines-paris.org>

Le dimanche 02 mars 2014 17:59:49, agerrius a ?crit :
> Even,
> 
> Thanks for the quick reply and the quick fix.
> 
> I'm looking at implementing the interleaved reading in my code as well,
> since some files throw an error with the normal reading mode. Are you
> saying this issue will not happen with interleaved reading mode?

Yes the issue was specific to the non-interleaved mode, which is not usable 
with real-world data. The interleaved reading mode is what is tested with 
ogr2ogr, so it should work fine.

> 
> Arno
> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/C-OGR-reading-OSM-features-stalls-tp51
> 06937p5106948.html Sent from the GDAL - Dev mailing list archive at
> Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From arno at agerrius.nl  Sun Mar  2 12:26:39 2014
From: arno at agerrius.nl (agerrius)
Date: Sun, 2 Mar 2014 12:26:39 -0800 (PST)
Subject: [gdal-dev] C# OGR reading OSM features "stalls"
In-Reply-To: <201403021929.53284.even.rouault@mines-paris.org>
References: <1393771657536-5106937.post@n6.nabble.com>
	<201403021718.38427.even.rouault@mines-paris.org>
	<1393779589860-5106948.post@n6.nabble.com>
	<201403021929.53284.even.rouault@mines-paris.org>
Message-ID: <1393791999403-5106982.post@n6.nabble.com>

Thanks for the answer.

I do have a question about the interleaved mode. I have trouble to combine
it with the SetAttributeFilter command on a layer. I have the impression
that when the first "slice" of the interleaved reading doesn't contain any
features that match the filter, that the reading stops (I followed the
pattern from the documentation, but if no features match bHasLayersNonEmpty
is never set to TRUE of course). So sometimes I get no features, while I
know they are there.

Is there any example on how to combine those two?

Arno



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/C-OGR-reading-OSM-features-stalls-tp5106937p5106982.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Sun Mar  2 12:37:24 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 2 Mar 2014 21:37:24 +0100
Subject: [gdal-dev] C# OGR reading OSM features "stalls"
In-Reply-To: <1393791999403-5106982.post@n6.nabble.com>
References: <1393771657536-5106937.post@n6.nabble.com>
	<201403021929.53284.even.rouault@mines-paris.org>
	<1393791999403-5106982.post@n6.nabble.com>
Message-ID: <201403022137.24090.even.rouault@mines-paris.org>

Le dimanche 02 mars 2014 21:26:39, agerrius a ?crit :
> Thanks for the answer.
> 
> I do have a question about the interleaved mode. I have trouble to combine
> it with the SetAttributeFilter command on a layer. I have the impression
> that when the first "slice" of the interleaved reading doesn't contain any
> features that match the filter, that the reading stops (I followed the
> pattern from the documentation, but if no features match bHasLayersNonEmpty
> is never set to TRUE of course). So sometimes I get no features, while I
> know they are there.
> 
> Is there any example on how to combine those two?

hum, is it different from the issue we discussed in 
http://lists.osgeo.org/pipermail/gdal-dev/2014-January/037801.html and that 
was fixed by 
http://trac.osgeo.org/gdal/changeset/26784/trunk/gdal/ogr/ogrsf_frmts/osm ?

> Arno
> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/C-OGR-reading-OSM-features-stalls-tp51
> 06937p5106982.html Sent from the GDAL - Dev mailing list archive at
> Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From nixanz at nixanz.com  Sun Mar  2 15:12:19 2014
From: nixanz at nixanz.com (Nik Sands)
Date: Mon, 3 Mar 2014 10:12:19 +1100
Subject: [gdal-dev] Cannot compile GDAL 1.10.1 for iOS with spatialite
	(2, 3 or 4)
In-Reply-To: <1393588947.53107ad39c7dc@imp.free.fr>
References: <32E4E482-6540-43D6-98CD-EB77A3F0323F@nixanz.com>
	<0D231EA9-61D9-4DFB-9757-B508FBAE8B0B@nixanz.com>
	<1393588947.53107ad39c7dc@imp.free.fr>
Message-ID: <401F1BA7-8744-40D4-B5BC-7AF2C3631617@nixanz.com>

Thanks Even, that seems to have done the trick.

Although I've now got a lot of features missing when using a spatial filter to decide what to display.  But that's a whole other issue, and I'll need to do more investigation about that before deciding if I need to ask about it here.  :-)

Cheers,
Nik.


On 28 Feb 2014, at 11:02 pm, Even Rouault <even.rouault at mines-paris.org> wrote:

> Selon Nik Sands <nixanz at nixanz.com>:
> 
>> For reference, when I add:
>> 
>> 	LDFLAGS="-liconv -lsqlite3"
>> 
>> And configure says that spatialite is going to be included OK, I eventually
>> get the error:
>> 
>> libtool: link: /Applications/Xcode.app/Contents/Developer/usr/bin/g++ -arch
>> i386 -isysroot
>> 
> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk
>> gdalinfo.o commonutils.o -o gdalinfo -Wl,-bind_at_load
>> /Users/nsands/Documents/Nik/Development/gdal-1.10.1/.libs/libgdal.a
>> 
> -L/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/lib
>> -liconv -lsqlite3 -lproj -lexpat -lz -lpthread -ldl -lspatialite -lxml2
>> duplicate symbol _sqlite3_api in:
>> 
>> 
> /Users/nsands/Documents/Nik/Development/gdal-1.10.1/.libs/libgdal.a(ogrsqlitevirtualogr.o)
>> 
>> 
> /Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/lib/libspatialite.a(libsplite_la-spatialite_init.o)
>> duplicate symbol _sqlite3_extension_init in:
>> 
>> 
> /Users/nsands/Documents/Nik/Development/gdal-1.10.1/.libs/libgdal.a(ogrsqlitevirtualogr.o)
>> 
>> 
> /Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/lib/libspatialite.a(libsplite_la-spatialite_init.o)
>> ld: 2 duplicate symbols for architecture i386
>> clang: error: linker command failed with exit code 1 (use -v to see
>> invocation)
>> make[1]: *** [gdalinfo] Error 1
>> make: *** [apps-target] Error 2
>> 
> 
> iOS only does static linking, not dynamic right ? Well, in that case, the
> problem is that both libspatialite and libgdal define sqlite3 extensions, hence
> the symbol conflict. If you don't need OGR SQLITE SQL dialect, then you can try
> editing ogr/ogrsf_frmts/sqlite/ogr_sqlite.h to comment #define HAVE_SQLITE_VFS
> and rebuilding GDAL.
> 
>> 
>> On 28 Feb 2014, at 4:47 pm, Nik Sands <nixanz at nixanz.com> wrote:
>> 
>>> Hi all,
>>> 
>>> I can compile GDAL 1.10.1 for iOS OK, including SQLite.  However, I've been
>> unable to include spatialite which I think need to get the performance
>> increase I'm expecting from proper spatial indexing.
>>> 
>>> My 'configure' line is:
>>> 
>>> ./configure
>> 
> --prefix=/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk
>> 
> --libdir=/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/i386/lib
>> --host=i386-apple-darwin --disable-shared --enable-static
>> --with-unix-stdio-64=no --without-pg --without-grass --without-libgrass
>> --without-cfitsio --without-pcraster --without-netcdf --without-ogdi
>> --without-fme --without-hdf4 --without-hdf5 --without-jasper --without-kakadu
>> --without-bsb --without-grib --without-mysql --without-ingres
>> --without-xerces --without-odbc --without-curl --without-idb --without-sde
>> --without-sse
>> 
> --with-expat=/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk
>> 
> --with-static-proj4=/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/
>> SD
>>> Ks/iPhon
>>> eSimulator7.0.sdk
>> 
> --with-sqlite3=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/usr
>> 
> --with-spatialite=/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk
>>> 
>>> But the output of configure includes:
>>> 
>>> ...
>>> SQLite support:            yes
>>> ...
>>> SpatiaLite support:        no
>>> ...
>>> 
>>> The config.log includes the reasons why (see a large section of it further
>> below).  It is a LOT of undefined symbols related to sqlite3 (and a few from
>> iconv).
>>> 
>>> I've had the same results with Spatialite versions 2, 3 and 4.
>>> 
>>> Initially, I thought the problem might be related to
>> https://trac.osgeo.org/gdal/ticket/5122 however, neither of the work arounds
>> there worked for me.  At least not completely.  If I use the LDFLags work
>> around to force linking against iconv and sqlite3, then the configure appears
>> to work OK and does include spatialite.  However, it then fails to compile
>> with "Duplicate symbol" errors.
>>> 
>>> Could anybody help me to resolve this problem?
>>> 
>>> Cheers,
>>> Nik.
>>> 
>>> 
>>> ------------------
>>> config.log extract
>>> ------------------
>>> 
>>> configure:24960: checking for spatialite_init in -lspatialite
>>> configure:24985: /Applications/Xcode.app/Contents/Developer/usr/bin/gcc -o
>> conftest -arch i386 -pipe -Os -gdwarf-2 -isysroot
>> 
> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk
>> -D__IPHONE_OS_VERSION_MIN_REQUIRED=70000  -arch i386 -isysroot
>> 
> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk
>> conftest.c -lspatialite
>> 
> -L/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/lib
>> -lspatialite
>> 
> -L/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/lib
>> -lexpat -lz -lpthread -ldl  >&5
>>> Undefined symbols for architecture i386:
>>> "_iconv", referenced from:
>>>    _gaiaOpenShpRead in libspatialite.a(gg_shape.o)
>>>    _gaiaOpenShpWrite in libspatialite.a(gg_shape.o)
>>>    _parseDbfField in libspatialite.a(gg_shape.o)
>>>    _gaiaWriteShpEntity in libspatialite.a(gg_shape.o)
>>>    _gaiaOpenDbfRead in libspatialite.a(gg_shape.o)
>>>    _gaiaOpenDbfWrite in libspatialite.a(gg_shape.o)
>>>    _gaiaWriteDbfEntity in libspatialite.a(gg_shape.o)
>>>    ...
>>> "_iconv_close", referenced from:
>>>    _gaiaFreeShapefile in libspatialite.a(gg_shape.o)
>>>    _gaiaFreeDbf in libspatialite.a(gg_shape.o)
>>>    _gaiaConvertCharset in libspatialite.a(gg_utf8.o)
>>>    _gaiaFreeDbf in libspatialite.a(gg_shape.o)
>>>    _gaiaConvertCharset in libspatialite.a(gg_utf8.o)
>>>    _gaiaFreeUTF8Converter in libspatialite.a(gg_utf8.o)
>>> "_iconv_open", referenced from:
>>>    _gaiaOpenShpRead in libspatialite.a(gg_shape.o)
>>>    _gaiaOpenShpWrite in libspatialite.a(gg_shape.o)
>>>    _gaiaOpenDbfRead in libspatialite.a(gg_shape.o)
>>>    _gaiaOpenDbfWrite in libspatialite.a(gg_shape.o)
>>>    _gaiaConvertCharset in libspatialite.a(gg_utf8.o)
>>>    _gaiaCreateUTF8Converter in libspatialite.a(gg_utf8.o)
>>> "_sqlite3_aggregate_context", referenced from:
>>>    _fnct_MD5TotalChecksum_step in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_MD5TotalChecksum_final in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_Extent_step in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_Extent_final in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_MakeLine_step in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_MakeLine_final in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_Collect_step in libspatialite.a(libsplite_la-spatialite.o)
>>>    ...
>>> "_sqlite3_auto_extension", referenced from:
>>>    _spatialite_init in libspatialite.a(libsplite_la-spatialite_init.o)
>>> "_sqlite3_bind_blob", referenced from:
>>>    _gaiaExportDxf in libspatialite.a(dxf_writer.o)
>>>    _vfdo_update in libspatialite.a(libsplite_la-virtualfdo.o)
>>> "_sqlite3_bind_double", referenced from:
>>>    _doComputeFieldInfos in libspatialite.a(libsplite_la-statistics.o)
>>>    _do_compute_layer_statistics in
>> libspatialite.a(libsplite_la-statistics.o)
>>>    _vspidx_filter in libspatialite.a(libsplite_la-virtualspatialindex.o)
>>>    _vfdo_update in libspatialite.a(libsplite_la-virtualfdo.o)
>>> "_sqlite3_bind_int", referenced from:
>>>    _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _spatial_ref_sys_init2 in libspatialite.a(libsrsinit_la-srs_init.o)
>>>    _insert_epsg_srid in libspatialite.a(libsrsinit_la-srs_init.o)
>>>    _doComputeFieldInfos in libspatialite.a(libsplite_la-statistics.o)
>>>    _do_compute_layer_statistics in
>> libspatialite.a(libsplite_la-statistics.o)
>>> "_sqlite3_bind_int64", referenced from:
>>>    _vfdo_update in libspatialite.a(libsplite_la-virtualfdo.o)
>>>    _vfdo_read_row in libspatialite.a(libsplite_la-virtualfdo.o)
>>>    _build_solution in libspatialite.a(libsplite_la-virtualnetwork.o)
>>> "_sqlite3_bind_null", referenced from:
>>>    _updateSpatiaLiteHistory in libspatialite.a(libsplite_la-metatables.o)
>>>    _doComputeFieldInfos in libspatialite.a(libsplite_la-statistics.o)
>>>    _do_compute_layer_statistics in
>> libspatialite.a(libsplite_la-statistics.o)
>>>    _vfdo_update in libspatialite.a(libsplite_la-virtualfdo.o)
>>> "_sqlite3_bind_parameter_count", referenced from:
>>>    _gaiaExportDxf in libspatialite.a(dxf_writer.o)
>>> "_sqlite3_bind_text", referenced from:
>>>    _gaiaExportDxf in libspatialite.a(dxf_writer.o)
>>> "_sqlite3_bind_text", referenced from:
>>>    _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_DiscardGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _updateSpatiaLiteHistory in libspatialite.a(libsplite_la-metatables.o)
>>>    _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
>>>    _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
>>>    _spatial_ref_sys_init2 in libspatialite.a(libsrsinit_la-srs_init.o)
>>>    ...
>>> "_sqlite3_busy_timeout", referenced from:
>>>    _spatialite_init_ex in libspatialite.a(libsplite_la-spatialite.o)
>>> "_sqlite3_changes", referenced from:
>>>    _fnct_CreateSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_CreateMbrCache in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_DisableSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>>> "_sqlite3_clear_bindings", referenced from:
>>>    _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_DiscardGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _updateSpatiaLiteHistory in libspatialite.a(libsplite_la-metatables.o)
>>>    _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
>>>    _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
>>>    _gaiaExportDxf in libspatialite.a(dxf_writer.o)
>>>    ...
>>> "_sqlite3_column_blob", referenced from:
>>>    _fnct_RecoverFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _gaiaExportDxf in libspatialite.a(dxf_writer.o)
>>>    _vfdo_read_row in libspatialite.a(libsplite_la-virtualfdo.o)
>>>    _vnet_create in libspatialite.a(libsplite_la-virtualnetwork.o)
>>>    _build_solution in libspatialite.a(libsplite_la-virtualnetwork.o)
>>> "_sqlite3_column_bytes", referenced from:
>>>    _fnct_RecoverFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
>>>    _gaiaExportDxf in libspatialite.a(dxf_writer.o)
>>>    _vspidx_filter in libspatialite.a(libsplite_la-virtualspatialindex.o)
>>>    _vfdo_read_row in libspatialite.a(libsplite_la-virtualfdo.o)
>>>    ...
>>> "_sqlite3_column_count", referenced from:
>>>    _fnct_RecoverFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _gaiaExportDxf in libspatialite.a(dxf_writer.o)
>>>    _fnct_RecoverGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _gaiaExportDxf in libspatialite.a(dxf_writer.o)
>>> "_sqlite3_column_double", referenced from:
>>>    _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
>>>    _gaiaGetVectorLayersList in libspatialite.a(libsplite_la-metatables.o)
>>>    _gaiaExportDxf in libspatialite.a(dxf_writer.o)
>>>    _cache_load in libspatialite.a(libsplite_la-mbrcache.o)
>>>    _do_compute_layer_statistics in
>> libspatialite.a(libsplite_la-statistics.o)
>>>    _vfdo_read_row in libspatialite.a(libsplite_la-virtualfdo.o)
>>> "_sqlite3_column_int", referenced from:
>>>    _fnct_RecoverGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
>>>    _recover_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
>>>    _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
>>>    _gaiaGetVectorLayersList in libspatialite.a(libsplite_la-metatables.o)
>>>    _gaiaExportDxf in libspatialite.a(dxf_writer.o)
>>>    _cache_load in libspatialite.a(libsplite_la-mbrcache.o)
>>>    ...
>>> "_sqlite3_column_int64", referenced from:
>>>    _gaiaGetVectorLayersList in libspatialite.a(libsplite_la-metatables.o)
>>>    _vspidx_filter in libspatialite.a(libsplite_la-virtualspatialindex.o)
>>>    _vspidx_next in libspatialite.a(libsplite_la-virtualspatialindex.o)
>>>    _vfdo_read_row in libspatialite.a(libsplite_la-virtualfdo.o)
>>>    _build_solution in libspatialite.a(libsplite_la-virtualnetwork.o)
>>> "_sqlite3_column_name", referenced from:
>>>    _gaiaExportDxf in libspatialite.a(dxf_writer.o)
>>> "_sqlite3_column_text", referenced from:
>>>    _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>>>    _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
>>>    _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
>>>    _gaiaGetVectorLayersList in libspatialite.a(libsplite_la-metatables.o)
>>>    ...
>>> "_sqlite3_column_type", referenced from:
>>>    _fnct_RecoverFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
>>>    _gaiaGetVectorLayersList in libspatialite.a(libsplite_la-metatables.o)
>>>    _gaiaExportDxf in libspatialite.a(dxf_writer.o)
>>>    _cache_load in libspatialite.a(libsplite_la-mbrcache.o)
>>>    _do_compute_layer_statistics in
>> libspatialite.a(libsplite_la-statistics.o)
>>>    ...
>>> "_sqlite3_context_db_handle", referenced from:
>>>    _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_IsPopulatedCoverage in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_IsPopulatedCoverage in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_CheckSpatialMetaData in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_InitFDOSpatialMetaData in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AddFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    ...
>>> "_sqlite3_create_function", referenced from:
>>>    _register_spatialite_sql_functions in
>> libspatialite.a(libsplite_la-spatialite.o)
>>> "_sqlite3_create_module_v2", referenced from:
>>>    _sqlite3MbrCacheInit in libspatialite.a(libsplite_la-mbrcache.o)
>>>    _sqlite3VirtualSpatialIndexInit in
>> libspatialite.a(libsplite_la-virtualspatialindex.o)
>>>    _sqlite3VirtualDbfInit in libspatialite.a(libsplite_la-virtualdbf.o)
>>>    _sqlite3VirtualFDOInit in libspatialite.a(libsplite_la-virtualfdo.o)
>>>    _sqlite3VirtualNetworkInit in
>> libspatialite.a(libsplite_la-virtualnetwork.o)
>>>    _sqlite3VirtualShapeInit in
>> libspatialite.a(libsplite_la-virtualshape.o)
>>>    _sqlite3VirtualTextInit in libspatialite.a(virtualtext.o)
>>>    ...
>>> "_sqlite3_declare_vtab", referenced from:
>>>    _mbrc_create in libspatialite.a(libsplite_la-mbrcache.o)
>>>    _vspidx_create in libspatialite.a(libsplite_la-virtualspatialindex.o)
>>>    _vdbf_create in libspatialite.a(libsplite_la-virtualdbf.o)
>>>    _vfdo_create in libspatialite.a(libsplite_la-virtualfdo.o)
>>>    _vnet_create in libspatialite.a(libsplite_la-virtualnetwork.o)
>>>    _vshp_create in libspatialite.a(libsplite_la-virtualshape.o)
>>>    _vtxt_create in libspatialite.a(virtualtext.o)
>>>    ...
>>> "_sqlite3_errcode", referenced from:
>>>    _fnct_RecoverFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
>>>    _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
>>> "_sqlite3_errmsg", referenced from:
>>>    _fnct_RecoverFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_DiscardGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>>>    _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
>>>    ...
>>> "_sqlite3_exec", referenced from:
>>>    ...
>>> "_sqlite3_exec", referenced from:
>>>    _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_InitFDOSpatialMetaData in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AddFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_DiscardFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    ...
>>> "_sqlite3_finalize", referenced from:
>>>    _fnct_RecoverFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_DiscardGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>>>    _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
>>>    ...
>>> "_sqlite3_free", referenced from:
>>>    _getProjParams in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_InitFDOSpatialMetaData in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AddFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    ...
>>> "_sqlite3_free_table", referenced from:
>>>    _checkSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
>>>    _getProjParams in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AddFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RegisterVirtualGeometry in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    ...
>>> "_sqlite3_get_table", referenced from:
>>>    _checkSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
>>>    _getProjParams in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AddFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RegisterVirtualGeometry in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    ...
>>> "_sqlite3_last_insert_rowid", referenced from:
>>>    _gaiaInsertIntoSqlLog in libspatialite.a(gg_sqlaux.o)
>>>    _vfdo_update in libspatialite.a(libsplite_la-virtualfdo.o)
>>> "_sqlite3_limit", referenced from:
>>>    _fnct_BlobFromFile in libspatialite.a(libsplite_la-spatialite.o)
>>> "_sqlite3_malloc", referenced from:
>>>    _mbrc_create in libspatialite.a(libsplite_la-mbrcache.o)
>>>    _mbrc_open in libspatialite.a(libsplite_la-mbrcache.o)
>>>    _vspidx_create in libspatialite.a(libsplite_la-virtualspatialindex.o)
>>>    _vspidx_open in libspatialite.a(libsplite_la-virtualspatialindex.o)
>>>    _vdbf_create in libspatialite.a(libsplite_la-virtualdbf.o)
>>>    _vdbf_open in libspatialite.a(libsplite_la-virtualdbf.o)
>>>    _vdbf_filter in libspatialite.a(libsplite_la-virtualdbf.o)
>>>    ...
>>> "_sqlite3_mprintf", referenced from:
>>>    _getProjParams in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AddFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_DiscardFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    ...
>>> "_sqlite3_prepare_v2", referenced from:
>>>    _fnct_RecoverFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_DiscardGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>>>    _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
>>>    ...
>>> "_sqlite3_randomness", referenced from:
>>>    _fnct_CreateUUID in libspatialite.a(libsplite_la-spatialite.o)
>>> "_sqlite3_reset", referenced from:
>>>    _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_DiscardGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _updateSpatiaLiteHistory in libspatialite.a(libsplite_la-metatables.o)
>>>    _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
>>>    _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
>>>    _gaiaExportDxf in libspatialite.a(dxf_writer.o)
>>>    ...
>>> "_sqlite3_reset_auto_extension", referenced from:
>>>    _spatialite_cleanup in libspatialite.a(libsplite_la-spatialite_init.o)
>>>    _spatialite_cleanup_ex in libspatialite.a(libsplite_la-spatialite.o)
>>> "_sqlite3_result_blob", referenced from:
>>>    _fnct_GetLayerExtent in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_FromGml in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_FromGeoJSON in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_FromKml in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AsFGF in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_FromEWKB in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_FromEWKT in libspatialite.a(libsplite_la-spatialite.o)
>>>    ...
>>> "_sqlite3_result_double", referenced from:
>>>    _fnct_CastToDouble in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_ForceAsNull in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_X in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_Y in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_Z in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_M in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_MbrMinX in libspatialite.a(libsplite_la-spatialite.o)
>>>    ...
>>> "_sqlite3_result_int", referenced from:
>>>    _fnct_has_proj in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_has_geos in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_has_geos_advanced in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_has_geos_trunk in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_has_lwgeom in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_has_math_sql in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_has_geo_callbacks in libspatialite.a(libsplite_la-spatialite.o)
>>>    ...
>>> "_sqlite3_result_int64", referenced from:
>>>    _fnct_CastToInteger in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_ForceAsNull in libspatialite.a(libsplite_la-spatialite.o)
>>>    _mbrc_column in libspatialite.a(libsplite_la-mbrcache.o)
>>>    _vdbf_column in libspatialite.a(libsplite_la-virtualdbf.o)
>>>    _vfdo_column in libspatialite.a(libsplite_la-virtualfdo.o)
>>>    _vnet_column in libspatialite.a(libsplite_la-virtualnetwork.o)
>>>    _vshp_column in libspatialite.a(libsplite_la-virtualshape.o)
>>>    ...
>>> "_sqlite3_result_null", referenced from:
>>>    ...
>>> "_sqlite3_result_null", referenced from:
>>>    _fnct_proj4_version in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_geos_version in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_lwgeom_version in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_libxml2_version in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_GetLayerExtent in libspatialite.a(libsplite_la-spatialite.o)
>>>    ...
>>> "_sqlite3_result_text", referenced from:
>>>    _fnct_spatialite_version in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AsText in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AsWkt in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AsGml in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AsGeoJSON in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_ToEWKB in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_ToEWKT in libspatialite.a(libsplite_la-spatialite.o)
>>>    ...
>>> "_sqlite3_step", referenced from:
>>>    _fnct_RecoverFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_DiscardGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>>>    _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
>>>    ...
>>> "_sqlite3_value_blob", referenced from:
>>>    _fnct_GeometryConstraints in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AsText in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AsWkt in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AsGml in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AsGeoJSON in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AsFGF in libspatialite.a(libsplite_la-spatialite.o)
>>>    ...
>>> "_sqlite3_value_bytes", referenced from:
>>>    _fnct_GeometryConstraints in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AsText in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AsWkt in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AsGml in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AsGeoJSON in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AsFGF in libspatialite.a(libsplite_la-spatialite.o)
>>>    ...
>>> "_sqlite3_value_double", referenced from:
>>>    ...
>>> "_sqlite3_value_double", referenced from:
>>>    _fnct_CastToInteger in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_CastToDouble in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_CastToText in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_ForceAsNull in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_Expand in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_EnvIntersects in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_ShiftCoords in libspatialite.a(libsplite_la-spatialite.o)
>>>    ...
>>> "_sqlite3_value_int", referenced from:
>>>    _fnct_GeometryConstraints in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AddFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_InitSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_InsertEpsgSrid in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    ...
>>> "_sqlite3_value_int64", referenced from:
>>>    _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_CastToInteger in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_CastToDouble in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_CastToText in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_ForceAsNull in libspatialite.a(libsplite_la-spatialite.o)
>>>    _mbrc_filter in libspatialite.a(libsplite_la-mbrcache.o)
>>>    _mbrc_update in libspatialite.a(libsplite_la-mbrcache.o)
>>>    ...
>>> "_sqlite3_value_text", referenced from:
>>>    _fnct_GeometryConstraints in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_IsPopulatedCoverage in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AddFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_DiscardFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_InitSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
>>>    ...
>>> "_sqlite3_value_type", referenced from:
>>>    _fnct_GeometryConstraints in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_IsValidNoDataPixel in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_IsPopulatedCoverage in libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AddFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_AddFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_RecoverFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    _fnct_DiscardFDOGeometryColumn in
>> libspatialite.a(libsplite_la-spatialite.o)
>>>    ...
>>> ld: symbol(s) not found for architecture i386
>>> clang: error: linker command failed with exit code 1 (use -v to see
>> invocation)
>>> configure:24985: $? = 1
>>> configure: failed program was:
>>> | /* confdefs.h */
>>> | #define PACKAGE_NAME ""
>>> | #define PACKAGE_TARNAME ""
>>> | #define PACKAGE_VERSION ""
>>> | #define PACKAGE_STRING ""
>>> | #define PACKAGE_BUGREPORT ""
>>> | #define PACKAGE_URL ""
>>> | #define STDC_HEADERS 1
>>> | #define HAVE_SYS_TYPES_H 1
>>> | #define HAVE_SYS_STAT_H 1
>>> | #define HAVE_STDLIB_H 1
>>> | #define HAVE_STRING_H 1
>>> | #define HAVE_MEMORY_H 1
>>> | #define HAVE_STRINGS_H 1
>>> | #define HAVE_INTTYPES_H 1
>>> | #define HAVE_STDINT_H 1
>>> | #define HAVE_UNISTD_H 1
>>> | #define HAVE_DLFCN_H 1
>>> | #define LT_OBJDIR ".libs/"
>>> | #define HAVE_LIBDL 1
>>> | #define STDC_HEADERS 1
>>> | #define HAVE_ASSERT_H 1
>>> | #define HAVE_FCNTL_H 1
>>> | #define HAVE_UNISTD_H 1
>>> | #define HAVE_DLFCN_H 1
>>> | #define HAVE_STDINT_H 1
>>> | #define HAVE_LIMITS_H 1
>>> | #define HAVE_LOCALE_H 1
>>> | #define HAVE_FLOAT_H 1
>>> | #define HAVE_ERRNO_H 1
>>> | #define SIZEOF_INT 4
>>> | #define SIZEOF_UNSIGNED_LONG 4
>>> | #define SIZEOF_VOIDP 4
>>> | #define HAVE_IEEEFP 1
>>> | #define HOST_FILLORDER FILLORDER_LSB2MSB
>>> | #define HAVE_VPRINTF 1
>>> | #define HAVE_SNPRINTF 1
>>> | #define HAVE_VSNPRINTF 1
>>> | #define HAVE_SNPRINTF 1
>>> | #define HAVE_VSNPRINTF 1
>>> | #define HAVE_ATOLL 1
>>> | #define HAVE_STRTOF 1
>>> | #define HAVE_GETCWD 1
>>> | #define HAVE_DECL_STRTOF 1
>>> | #define HAVE_READLINK 1
>>> | #define HAVE_LSTAT 1
>>> | #define HAVE_POSIX_SPAWNP 1
>>> | #define HAVE_VFORK 1
>>> | #define HAVE_GETADDRINFO 1
>>> | #define HAVE_PTHREAD_MUTEX_RECURSIVE 1
>>> | #define CPL_MULTIPROC_PTHREAD 1
>>> | #define HAVE_ICONV 1
>>> | #define ICONV_CONST
>>> | #define ICONV_CPP_CONST
>>> | /* end confdefs.h.  */
>>> |
>>> | /* Override any GCC internal prototype to avoid an error.
>>> |    Use char because int might match the return type of a GCC
>>> |    builtin and then its argument prototype would still apply.  */
>>> | #ifdef __cplusplus
>>> | extern "C"
>>> | #endif
>>> | char spatialite_init ();
>>> | int
>>> | main ()
>>> | {
>>> | return spatialite_init ();
>>> |   ;
>>> |   return 0;
>>> | }
>>> configure:24994: result: no
>>> configure:25042: result: disabled
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From nixanz at nixanz.com  Sun Mar  2 17:18:18 2014
From: nixanz at nixanz.com (Nik Sands)
Date: Mon, 3 Mar 2014 12:18:18 +1100
Subject: [gdal-dev] Missing features after copying layers from Shapefiles to
	SQLite
Message-ID: <11381BD9-118A-4C06-885A-A764846BD728@nixanz.com>

Hi all,

I'm planning to switch from using a standard file format of Shapefiles to Spatialite for internal storage of spatial data.

When importing from other formats, the app attempts to convert these to SQLite (Spatialite) using 'OGR_DS_CopyLayer' to copy each layer from the source data set to a new layer in the new SQLite dataset.

However, when converting Shapefiles to SQLite, it only copies across about a third of the features for many of the layers and therefore the new data set is of no use.

The relevant code and output is below.

I'm at a loss to figure out what is going wrong here and I'd be grateful is somebody could assist in getting this to work as expected (or am I doing the wrong thing completely?).

NB:  This is using Spatialite on iOS (simulator).

When I use ogr2ogr on Mac OS X with SQLite (without Spatialite) it works fine and doesn't miss any features.

Cheers,
Nik.


CODE:

	OGRLayerH sourceLayer = OGR_DS_GetLayer(ds, i);
	int sourceFeatureCount = OGR_L_GetFeatureCount(sourceLayer, YES);

	OGR_DS_CopyLayer(destDS, sourceLayer, OGR_L_GetName(sourceLayer), NULL);

	OGRLayerH destLayer = OGR_DS_GetLayerByName(destDS, OGR_L_GetName(sourceLayer));
	printf("sourceFeatureCount:  %d\n", sourceFeatureCount);
	printf("  destFeatureCount:  %d\n", OGR_L_GetFeatureCount(destLayer, YES));

OUTPUT:

	sourceFeatureCount:  3882
	  destFeatureCount:  1200

From jukka.rahkonen at mmmtike.fi  Sun Mar  2 21:37:39 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 3 Mar 2014 05:37:39 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Missing_features_after_copying_layers_from_S?=
	=?utf-8?q?hapefiles_to=09SQLite?=
References: <11381BD9-118A-4C06-885A-A764846BD728@nixanz.com>
Message-ID: <loom.20140303T061517-381@post.gmane.org>

Nik Sands <nixanz <at> nixanz.com> writes:

> 
> Hi all,
> 
> I'm planning to switch from using a standard file format of Shapefiles to
Spatialite for internal storage
> of spatial data.
> 
> When importing from other formats, the app attempts to convert these to
SQLite (Spatialite) using
> 'OGR_DS_CopyLayer' to copy each layer from the source data set to a new
layer in the new SQLite dataset.
> 
> However, when converting Shapefiles to SQLite, it only copies across about
a third of the features for many
> of the layers and therefore the new data set is of no use.
> 
> The relevant code and output is below.
> 
> I'm at a loss to figure out what is going wrong here and I'd be grateful
is somebody could assist in getting
> this to work as expected (or am I doing the wrong thing completely?).
> 
> NB:  This is using Spatialite on iOS (simulator).
> 
> When I use ogr2ogr on Mac OS X with SQLite (without Spatialite) it works
fine and doesn't miss any features.
> 
> Cheers,
> Nik.
> 
> CODE:
> 
> 	OGRLayerH sourceLayer = OGR_DS_GetLayer(ds, i);
> 	int sourceFeatureCount = OGR_L_GetFeatureCount(sourceLayer, YES);
> 
> 	OGR_DS_CopyLayer(destDS, sourceLayer, OGR_L_GetName(sourceLayer), NULL);
> 
> 	OGRLayerH destLayer = OGR_DS_GetLayerByName(destDS,
OGR_L_GetName(sourceLayer));
> 	printf("sourceFeatureCount:  %d\n", sourceFeatureCount);
> 	printf("  destFeatureCount:  %d\n", OGR_L_GetFeatureCount(destLayer, YES));
> 
> OUTPUT:
> 
> 	sourceFeatureCount:  3882
> 	  destFeatureCount:  1200
> 

Hi,

My guess is that CopyLayer is making 200 feature sized transactions and only
6 transactions are accepted by Spatialite which makes 1200 features. The
rest transactions are not accepted for some reason. With Spatialite my guess
is that it complains about constraints and some of the features do not share
the same geometry type and SRID. Perhaps trying to write multipolygons into
a layer that accepts only polygons or vice versa.

-Jukka Rahkonen-




From arno at agerrius.nl  Sun Mar  2 23:27:58 2014
From: arno at agerrius.nl (agerrius)
Date: Sun, 2 Mar 2014 23:27:58 -0800 (PST)
Subject: [gdal-dev] C# OGR reading OSM features "stalls"
In-Reply-To: <201403022137.24090.even.rouault@mines-paris.org>
References: <1393771657536-5106937.post@n6.nabble.com>
	<201403021718.38427.even.rouault@mines-paris.org>
	<1393779589860-5106948.post@n6.nabble.com>
	<201403021929.53284.even.rouault@mines-paris.org>
	<1393791999403-5106982.post@n6.nabble.com>
	<201403022137.24090.even.rouault@mines-paris.org>
Message-ID: <1393831678672-5107036.post@n6.nabble.com>

Even,

No, this is not the same problem as before. With the changes we discussed
before I did get the filter to work perfectly. But now when I add the
do-while loop around it for the interleaved reading I get unexpected results
again.

I'll try to isolate the problem in a small sample program tonight when I'm
back from work.

Arno



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/C-OGR-reading-OSM-features-stalls-tp5106937p5107036.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From arno at agerrius.nl  Mon Mar  3 12:40:25 2014
From: arno at agerrius.nl (agerrius)
Date: Mon, 3 Mar 2014 12:40:25 -0800 (PST)
Subject: [gdal-dev] C# OGR reading OSM features "stalls"
In-Reply-To: <1393831678672-5107036.post@n6.nabble.com>
References: <1393771657536-5106937.post@n6.nabble.com>
	<201403021718.38427.even.rouault@mines-paris.org>
	<1393779589860-5106948.post@n6.nabble.com>
	<201403021929.53284.even.rouault@mines-paris.org>
	<1393791999403-5106982.post@n6.nabble.com>
	<201403022137.24090.even.rouault@mines-paris.org>
	<1393831678672-5107036.post@n6.nabble.com>
Message-ID: <1393879225578-5107214.post@n6.nabble.com>

Arno,

I have made a small sample to show my problem. It uses the same OSM file as
I mentioned above. Hopefully you can see what I did wrong from my code.

If I read the data in non-interleaved mode it all works fine, I find 298
features on the layer:

                Ogr.RegisterAll();
                DataSource ds =
Ogr.Open(@"C:\flightsim\work\nantucket\source\geo\osm\nantucket.osm", 0);
                int count = 0;

                Layer lay = ds.GetLayerByName("multipolygons");
                Feature feat;

                Console.WriteLine("Reading layer " + lay.GetName());

                lay.SetAttributeFilter("landuse IS NOT NULL");
                feat = lay.GetNextFeature();     // work around for the
issue we discussed before
                lay.ResetReading();

                feat = lay.GetNextFeature();
                while (feat != null)
                {
                    count++;
                    feat = lay.GetNextFeature();
                }
                Console.WriteLine(String.Format("Contains {0} features",
count));

Now if I enable interleaved reading and add the extra do-while loop around
my code I get 0 features returned. I only apply the filter to the layer the
first time I go through the loop.

                Ogr.RegisterAll();
                Gdal.SetConfigOption("OGR_INTERLEAVED_READING", "YES");
                DataSource ds =
Ogr.Open(@"C:\flightsim\work\nantucket\source\geo\osm\nantucket.osm", 0);
                bool nonEmpty = false;
                bool firstRun = true;
                int count = 0;

                do
                {
                    nonEmpty = false;

                    Layer lay = ds.GetLayerByName("multipolygons");
                    Feature feat;

                    if (firstRun)
                    {
                        Console.WriteLine("Reading layer " + lay.GetName());

                        lay.SetAttributeFilter("landuse IS NOT NULL");
                        feat = lay.GetNextFeature();
                        lay.ResetReading();
                    }

                    feat = lay.GetNextFeature();
                    while (feat != null)
                    {
                        nonEmpty = true;
                        count++;
                        feat = lay.GetNextFeature();
                    }
                    firstRun = false;
                } while (nonEmpty);
                Console.WriteLine(String.Format("Contains {0} features",
count));
            }

I think the problem is that no features are found in the first "slice of the
interleaved reading. So therefore nonEmpty is never set to true and the do
loop stops directly, while the features that match the filter are probably
later in the OSM file. But I'm not sure if this assumption is OK.

Do you see any mistakes in my code?

Thanks,

Arno



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/C-OGR-reading-OSM-features-stalls-tp5106937p5107214.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Mon Mar  3 14:39:45 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 3 Mar 2014 23:39:45 +0100
Subject: [gdal-dev] C# OGR reading OSM features "stalls"
In-Reply-To: <1393879225578-5107214.post@n6.nabble.com>
References: <1393771657536-5106937.post@n6.nabble.com>
	<1393831678672-5107036.post@n6.nabble.com>
	<1393879225578-5107214.post@n6.nabble.com>
Message-ID: <201403032339.45954.even.rouault@mines-paris.org>

Arno,

> 
> Now if I enable interleaved reading and add the extra do-while loop around
> my code I get 0 features returned. I only apply the filter to the layer the
> first time I go through the loop.
> 
>                 Ogr.RegisterAll();
>                 Gdal.SetConfigOption("OGR_INTERLEAVED_READING", "YES");
>                 DataSource ds =
> Ogr.Open(@"C:\flightsim\work\nantucket\source\geo\osm\nantucket.osm", 0);
>                 bool nonEmpty = false;
>                 bool firstRun = true;
>                 int count = 0;
> 
>                 do
>                 {
>                     nonEmpty = false;
> 
>                     Layer lay = ds.GetLayerByName("multipolygons");
>                     Feature feat;
> 
>                     if (firstRun)
>                     {
>                         Console.WriteLine("Reading layer " +
> lay.GetName());
> 
>                         lay.SetAttributeFilter("landuse IS NOT NULL");
>                         feat = lay.GetNextFeature();
>                         lay.ResetReading();
>                     }
> 
>                     feat = lay.GetNextFeature();
>                     while (feat != null)
>                     {
>                         nonEmpty = true;
>                         count++;
>                         feat = lay.GetNextFeature();
>                     }
>                     firstRun = false;
>                 } while (nonEmpty);
>                 Console.WriteLine(String.Format("Contains {0} features",
> count));
>             }
> 
> I think the problem is that no features are found in the first "slice of
> the interleaved reading. So therefore nonEmpty is never set to true and
> the do loop stops directly, while the features that match the filter are
> probably later in the OSM file. But I'm not sure if this assumption is OK.
> 
> Do you see any mistakes in my code?

Te issue has nothing to do with the attribute filter (if you remove it, you 
will get 0 results as well), but it is due to the fact that you are not 
implementing properly the pattern which is documented in 
http://gdal.org/ogr/drv_osm.html.... (grrrrrr !!! :-))
In interleaved mode,you need to iterate over ALL layers, and as many times as 
one of them report to have a features, and even on the ones you are not 
interested in.
And to apply an attribute filter, before running that read pattern itself, set 
the filter on the multipolygons layer.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From nixanz at nixanz.com  Mon Mar  3 14:54:59 2014
From: nixanz at nixanz.com (Nik Sands)
Date: Tue, 4 Mar 2014 09:54:59 +1100
Subject: [gdal-dev] Missing features after copying layers from
	Shapefiles to	SQLite
In-Reply-To: <loom.20140303T061517-381@post.gmane.org>
References: <11381BD9-118A-4C06-885A-A764846BD728@nixanz.com>
	<loom.20140303T061517-381@post.gmane.org>
Message-ID: <2414738B-380B-4C56-9998-1ABFC78B1ECB@nixanz.com>

Thanks for this tip.  I think you're on the right track with mixing single line strings with multi line strings and single polygons with multi polygons.

(I don't think the number of features is causing any problems as it happens for some very small groups of features also.)

It appears as though the first time it hits a feature type that is different to all of the others so far, it just bails out silently.

So this implies that it's OK to mix feature types (multi/single) in Shapefiles (at least for reading) but not in Spatialite (at least for writing).  Is this correct?

If this is so, then what is the correct way to convert/copy a layer from Shapefiles to Spatialite?

(Note that is seems to work OK for plain SQLite but not for Spatialite).


On 3 Mar 2014, at 4:37 pm, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi> wrote:

> Nik Sands <nixanz <at> nixanz.com> writes:
> 
>> 
>> Hi all,
>> 
>> I'm planning to switch from using a standard file format of Shapefiles to
> Spatialite for internal storage
>> of spatial data.
>> 
>> When importing from other formats, the app attempts to convert these to
> SQLite (Spatialite) using
>> 'OGR_DS_CopyLayer' to copy each layer from the source data set to a new
> layer in the new SQLite dataset.
>> 
>> However, when converting Shapefiles to SQLite, it only copies across about
> a third of the features for many
>> of the layers and therefore the new data set is of no use.
>> 
>> The relevant code and output is below.
>> 
>> I'm at a loss to figure out what is going wrong here and I'd be grateful
> is somebody could assist in getting
>> this to work as expected (or am I doing the wrong thing completely?).
>> 
>> NB:  This is using Spatialite on iOS (simulator).
>> 
>> When I use ogr2ogr on Mac OS X with SQLite (without Spatialite) it works
> fine and doesn't miss any features.
>> 
>> Cheers,
>> Nik.
>> 
>> CODE:
>> 
>> 	OGRLayerH sourceLayer = OGR_DS_GetLayer(ds, i);
>> 	int sourceFeatureCount = OGR_L_GetFeatureCount(sourceLayer, YES);
>> 
>> 	OGR_DS_CopyLayer(destDS, sourceLayer, OGR_L_GetName(sourceLayer), NULL);
>> 
>> 	OGRLayerH destLayer = OGR_DS_GetLayerByName(destDS,
> OGR_L_GetName(sourceLayer));
>> 	printf("sourceFeatureCount:  %d\n", sourceFeatureCount);
>> 	printf("  destFeatureCount:  %d\n", OGR_L_GetFeatureCount(destLayer, YES));
>> 
>> OUTPUT:
>> 
>> 	sourceFeatureCount:  3882
>> 	  destFeatureCount:  1200
>> 
> 
> Hi,
> 
> My guess is that CopyLayer is making 200 feature sized transactions and only
> 6 transactions are accepted by Spatialite which makes 1200 features. The
> rest transactions are not accepted for some reason. With Spatialite my guess
> is that it complains about constraints and some of the features do not share
> the same geometry type and SRID. Perhaps trying to write multipolygons into
> a layer that accepts only polygons or vice versa.
> 
> -Jukka Rahkonen-
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From nixanz at nixanz.com  Mon Mar  3 16:09:39 2014
From: nixanz at nixanz.com (Nik Sands)
Date: Tue, 04 Mar 2014 11:09:39 +1100
Subject: [gdal-dev] Missing features after copying layers from
 Shapefiles to	SQLite
In-Reply-To: <2414738B-380B-4C56-9998-1ABFC78B1ECB@nixanz.com>
References: <11381BD9-118A-4C06-885A-A764846BD728@nixanz.com>
	<loom.20140303T061517-381@post.gmane.org>
	<2414738B-380B-4C56-9998-1ABFC78B1ECB@nixanz.com>
Message-ID: <97482E33-C078-4F49-B6D6-898D9F3093CC@nixanz.com>

So now, instead of the 'OGR_DS_CopyLayer', I'm using the code below to run SQL queries to split each layer from the source data set into multiple layers in the destination (Spatialite) dataset based on the geometry types.  (The addNewLayerNames: method will not add empty layers).

It appears to be working OK for now (at least the maps LOOK right on screen).

Is this a reasonable approach to overcoming the problem?

Do I need to include more than just the 6 geometry types in the dictionary/hash below?

Cheers,
Nik.


CODE:
-----
	NSDictionary *geomTypeExts = @{
		@"POINT" : @"pt",
		@"MULTIPOINT" : @"mpt",
		@"LINESTRING" : @"ls",
		@"MULTILINESTRING" : @"mls",
		@"POLYGON" : @"pg",
		@"MULTIPOLYGON" : @"mpg",
	};
	
	for ( NSString *geomType in [geomTypeExts allKeys] )
	{
		NSString *sql = [NSString stringWithFormat:@"SELECT * FROM %@ WHERE OGR_GEOMETRY = '%@'", sourceLayerName, geomType];
		NSString *destLayerName = [NSString stringWithFormat:@"%@_%@", sourceLayerName, [geomTypeExts valueForKey:geomType]];
		
		[self addNewLayerNamed:destLayerName withSQL:sql fromDS:ds toDS:destDS];
	}


On 4 Mar 2014, at 9:54 am, Nik Sands <nixanz at nixanz.com> wrote:

> Thanks for this tip.  I think you're on the right track with mixing single line strings with multi line strings and single polygons with multi polygons.
> 
> (I don't think the number of features is causing any problems as it happens for some very small groups of features also.)
> 
> It appears as though the first time it hits a feature type that is different to all of the others so far, it just bails out silently.
> 
> So this implies that it's OK to mix feature types (multi/single) in Shapefiles (at least for reading) but not in Spatialite (at least for writing).  Is this correct?
> 
> If this is so, then what is the correct way to convert/copy a layer from Shapefiles to Spatialite?
> 
> (Note that is seems to work OK for plain SQLite but not for Spatialite).
> 
> 
> On 3 Mar 2014, at 4:37 pm, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi> wrote:
> 
>> Nik Sands <nixanz <at> nixanz.com> writes:
>> 
>>> 
>>> Hi all,
>>> 
>>> I'm planning to switch from using a standard file format of Shapefiles to
>> Spatialite for internal storage
>>> of spatial data.
>>> 
>>> When importing from other formats, the app attempts to convert these to
>> SQLite (Spatialite) using
>>> 'OGR_DS_CopyLayer' to copy each layer from the source data set to a new
>> layer in the new SQLite dataset.
>>> 
>>> However, when converting Shapefiles to SQLite, it only copies across about
>> a third of the features for many
>>> of the layers and therefore the new data set is of no use.
>>> 
>>> The relevant code and output is below.
>>> 
>>> I'm at a loss to figure out what is going wrong here and I'd be grateful
>> is somebody could assist in getting
>>> this to work as expected (or am I doing the wrong thing completely?).
>>> 
>>> NB:  This is using Spatialite on iOS (simulator).
>>> 
>>> When I use ogr2ogr on Mac OS X with SQLite (without Spatialite) it works
>> fine and doesn't miss any features.
>>> 
>>> Cheers,
>>> Nik.
>>> 
>>> CODE:
>>> 
>>> 	OGRLayerH sourceLayer = OGR_DS_GetLayer(ds, i);
>>> 	int sourceFeatureCount = OGR_L_GetFeatureCount(sourceLayer, YES);
>>> 
>>> 	OGR_DS_CopyLayer(destDS, sourceLayer, OGR_L_GetName(sourceLayer), NULL);
>>> 
>>> 	OGRLayerH destLayer = OGR_DS_GetLayerByName(destDS,
>> OGR_L_GetName(sourceLayer));
>>> 	printf("sourceFeatureCount:  %d\n", sourceFeatureCount);
>>> 	printf("  destFeatureCount:  %d\n", OGR_L_GetFeatureCount(destLayer, YES));
>>> 
>>> OUTPUT:
>>> 
>>> 	sourceFeatureCount:  3882
>>> 	  destFeatureCount:  1200
>>> 
>> 
>> Hi,
>> 
>> My guess is that CopyLayer is making 200 feature sized transactions and only
>> 6 transactions are accepted by Spatialite which makes 1200 features. The
>> rest transactions are not accepted for some reason. With Spatialite my guess
>> is that it complains about constraints and some of the features do not share
>> the same geometry type and SRID. Perhaps trying to write multipolygons into
>> a layer that accepts only polygons or vice versa.
>> 
>> -Jukka Rahkonen-
>> 
>> 
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From chaitanya.ch at gmail.com  Mon Mar  3 21:12:04 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 4 Mar 2014 10:42:04 +0530
Subject: [gdal-dev] Missing features after copying layers from
 Shapefiles to SQLite
In-Reply-To: <97482E33-C078-4F49-B6D6-898D9F3093CC@nixanz.com>
References: <11381BD9-118A-4C06-885A-A764846BD728@nixanz.com>
	<loom.20140303T061517-381@post.gmane.org>
	<2414738B-380B-4C56-9998-1ABFC78B1ECB@nixanz.com>
	<97482E33-C078-4F49-B6D6-898D9F3093CC@nixanz.com>
Message-ID: <CAMKgpOaPKOQ9m6e-MqDevNkaAn-iZ9TFboF4diMe_54JjOSAQQ@mail.gmail.com>

Nik,

One option I frequently use when uploading shapefiles to PostGIS is to set
the -nlt option in ogr2ogr. Setting it as
multipolygon/multilinestring/multipoint for a shapefile defined as
polygon/linestring/point usually overcomes the problem.

Check if Spatialite allows adding single geometries when the datasource is
defined as a multigeometry. If not, you can force the geometry to
multigeometry before adding.



On Tue, Mar 4, 2014 at 5:39 AM, Nik Sands <nixanz at nixanz.com> wrote:

> So now, instead of the 'OGR_DS_CopyLayer', I'm using the code below to run
> SQL queries to split each layer from the source data set into multiple
> layers in the destination (Spatialite) dataset based on the geometry types.
>  (The addNewLayerNames: method will not add empty layers).
>
> It appears to be working OK for now (at least the maps LOOK right on
> screen).
>
> Is this a reasonable approach to overcoming the problem?
>
> Do I need to include more than just the 6 geometry types in the
> dictionary/hash below?
>
> Cheers,
> Nik.
>
>
> CODE:
> -----
>         NSDictionary *geomTypeExts = @{
>                 @"POINT" : @"pt",
>                 @"MULTIPOINT" : @"mpt",
>                 @"LINESTRING" : @"ls",
>                 @"MULTILINESTRING" : @"mls",
>                 @"POLYGON" : @"pg",
>                 @"MULTIPOLYGON" : @"mpg",
>         };
>
>         for ( NSString *geomType in [geomTypeExts allKeys] )
>         {
>                 NSString *sql = [NSString stringWithFormat:@"SELECT *
> FROM %@ WHERE OGR_GEOMETRY = '%@'", sourceLayerName, geomType];
>                 NSString *destLayerName = [NSString stringWithFormat:@"%@_%@",
> sourceLayerName, [geomTypeExts valueForKey:geomType]];
>
>                 [self addNewLayerNamed:destLayerName withSQL:sql fromDS:ds
> toDS:destDS];
>         }
>
>
> On 4 Mar 2014, at 9:54 am, Nik Sands <nixanz at nixanz.com> wrote:
>
> > Thanks for this tip.  I think you're on the right track with mixing
> single line strings with multi line strings and single polygons with multi
> polygons.
> >
> > (I don't think the number of features is causing any problems as it
> happens for some very small groups of features also.)
> >
> > It appears as though the first time it hits a feature type that is
> different to all of the others so far, it just bails out silently.
> >
> > So this implies that it's OK to mix feature types (multi/single) in
> Shapefiles (at least for reading) but not in Spatialite (at least for
> writing).  Is this correct?
> >
> > If this is so, then what is the correct way to convert/copy a layer from
> Shapefiles to Spatialite?
> >
> > (Note that is seems to work OK for plain SQLite but not for Spatialite).
> >
> >
> > On 3 Mar 2014, at 4:37 pm, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>
> wrote:
> >
> >> Nik Sands <nixanz <at> nixanz.com> writes:
> >>
> >>>
> >>> Hi all,
> >>>
> >>> I'm planning to switch from using a standard file format of Shapefiles
> to
> >> Spatialite for internal storage
> >>> of spatial data.
> >>>
> >>> When importing from other formats, the app attempts to convert these to
> >> SQLite (Spatialite) using
> >>> 'OGR_DS_CopyLayer' to copy each layer from the source data set to a new
> >> layer in the new SQLite dataset.
> >>>
> >>> However, when converting Shapefiles to SQLite, it only copies across
> about
> >> a third of the features for many
> >>> of the layers and therefore the new data set is of no use.
> >>>
> >>> The relevant code and output is below.
> >>>
> >>> I'm at a loss to figure out what is going wrong here and I'd be
> grateful
> >> is somebody could assist in getting
> >>> this to work as expected (or am I doing the wrong thing completely?).
> >>>
> >>> NB:  This is using Spatialite on iOS (simulator).
> >>>
> >>> When I use ogr2ogr on Mac OS X with SQLite (without Spatialite) it
> works
> >> fine and doesn't miss any features.
> >>>
> >>> Cheers,
> >>> Nik.
> >>>
> >>> CODE:
> >>>
> >>>     OGRLayerH sourceLayer = OGR_DS_GetLayer(ds, i);
> >>>     int sourceFeatureCount = OGR_L_GetFeatureCount(sourceLayer, YES);
> >>>
> >>>     OGR_DS_CopyLayer(destDS, sourceLayer, OGR_L_GetName(sourceLayer),
> NULL);
> >>>
> >>>     OGRLayerH destLayer = OGR_DS_GetLayerByName(destDS,
> >> OGR_L_GetName(sourceLayer));
> >>>     printf("sourceFeatureCount:  %d\n", sourceFeatureCount);
> >>>     printf("  destFeatureCount:  %d\n",
> OGR_L_GetFeatureCount(destLayer, YES));
> >>>
> >>> OUTPUT:
> >>>
> >>>     sourceFeatureCount:  3882
> >>>       destFeatureCount:  1200
> >>>
> >>
> >> Hi,
> >>
> >> My guess is that CopyLayer is making 200 feature sized transactions and
> only
> >> 6 transactions are accepted by Spatialite which makes 1200 features. The
> >> rest transactions are not accepted for some reason. With Spatialite my
> guess
> >> is that it complains about constraints and some of the features do not
> share
> >> the same geometry type and SRID. Perhaps trying to write multipolygons
> into
> >> a layer that accepts only polygons or vice versa.
> >>
> >> -Jukka Rahkonen-
> >>
> >>
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140304/fd2fcc15/attachment-0001.html>

From nixanz at nixanz.com  Mon Mar  3 23:18:59 2014
From: nixanz at nixanz.com (Nik Sands)
Date: Tue, 4 Mar 2014 18:18:59 +1100
Subject: [gdal-dev] Missing features after copying layers from
	Shapefiles to SQLite
In-Reply-To: <CAMKgpOaPKOQ9m6e-MqDevNkaAn-iZ9TFboF4diMe_54JjOSAQQ@mail.gmail.com>
References: <11381BD9-118A-4C06-885A-A764846BD728@nixanz.com>
	<loom.20140303T061517-381@post.gmane.org>
	<2414738B-380B-4C56-9998-1ABFC78B1ECB@nixanz.com>
	<97482E33-C078-4F49-B6D6-898D9F3093CC@nixanz.com>
	<CAMKgpOaPKOQ9m6e-MqDevNkaAn-iZ9TFboF4diMe_54JjOSAQQ@mail.gmail.com>
Message-ID: <B1C5D178-7FFF-4F0C-AD6C-CE9ABECFCB76@nixanz.com>

Thanks Chaitanya,

It's finally dawned on me that this is what the following is about in the OGR SQLite format web page:

Tables with multiple geometries

Starting with OGR 1.10, tables that have multiple geometry columns registered in geometry_columns can be used by OGR. For such tables, there are as many OGR layers exposed as there are geometry columns. They are named "table_name(geometry_column_name)".
Note: this support is limited to read-only operations.

Ah... so multiple geometries are NOT avaiable in this format for writable.

Your idea of forcing all geometries to multies is a good idea.  I'll have to figure out the most efficient way to do this when converting an entire layer at a time, but it's likely to be much better than the way I'm currently doing it and would result in the same number of layers as the original, which is preferable, especially when the user wants to manage drawing styles for layers.

Thanks for your idea.  I'm very grateful.

Cheers,
Nik.


On 4 Mar 2014, at 4:12 pm, Chaitanya kumar CH <chaitanya.ch at gmail.com> wrote:

> Nik,
> 
> One option I frequently use when uploading shapefiles to PostGIS is to set the -nlt option in ogr2ogr. Setting it as multipolygon/multilinestring/multipoint for a shapefile defined as polygon/linestring/point usually overcomes the problem.
> 
> Check if Spatialite allows adding single geometries when the datasource is defined as a multigeometry. If not, you can force the geometry to multigeometry before adding.
> 
> 
> 
> On Tue, Mar 4, 2014 at 5:39 AM, Nik Sands <nixanz at nixanz.com> wrote:
> So now, instead of the 'OGR_DS_CopyLayer', I'm using the code below to run SQL queries to split each layer from the source data set into multiple layers in the destination (Spatialite) dataset based on the geometry types.  (The addNewLayerNames: method will not add empty layers).
> 
> It appears to be working OK for now (at least the maps LOOK right on screen).
> 
> Is this a reasonable approach to overcoming the problem?
> 
> Do I need to include more than just the 6 geometry types in the dictionary/hash below?
> 
> Cheers,
> Nik.
> 
> 
> CODE:
> -----
>         NSDictionary *geomTypeExts = @{
>                 @"POINT" : @"pt",
>                 @"MULTIPOINT" : @"mpt",
>                 @"LINESTRING" : @"ls",
>                 @"MULTILINESTRING" : @"mls",
>                 @"POLYGON" : @"pg",
>                 @"MULTIPOLYGON" : @"mpg",
>         };
> 
>         for ( NSString *geomType in [geomTypeExts allKeys] )
>         {
>                 NSString *sql = [NSString stringWithFormat:@"SELECT * FROM %@ WHERE OGR_GEOMETRY = '%@'", sourceLayerName, geomType];
>                 NSString *destLayerName = [NSString stringWithFormat:@"%@_%@", sourceLayerName, [geomTypeExts valueForKey:geomType]];
> 
>                 [self addNewLayerNamed:destLayerName withSQL:sql fromDS:ds toDS:destDS];
>         }
> 
> 
> On 4 Mar 2014, at 9:54 am, Nik Sands <nixanz at nixanz.com> wrote:
> 
> > Thanks for this tip.  I think you're on the right track with mixing single line strings with multi line strings and single polygons with multi polygons.
> >
> > (I don't think the number of features is causing any problems as it happens for some very small groups of features also.)
> >
> > It appears as though the first time it hits a feature type that is different to all of the others so far, it just bails out silently.
> >
> > So this implies that it's OK to mix feature types (multi/single) in Shapefiles (at least for reading) but not in Spatialite (at least for writing).  Is this correct?
> >
> > If this is so, then what is the correct way to convert/copy a layer from Shapefiles to Spatialite?
> >
> > (Note that is seems to work OK for plain SQLite but not for Spatialite).
> >
> >
> > On 3 Mar 2014, at 4:37 pm, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi> wrote:
> >
> >> Nik Sands <nixanz <at> nixanz.com> writes:
> >>
> >>>
> >>> Hi all,
> >>>
> >>> I'm planning to switch from using a standard file format of Shapefiles to
> >> Spatialite for internal storage
> >>> of spatial data.
> >>>
> >>> When importing from other formats, the app attempts to convert these to
> >> SQLite (Spatialite) using
> >>> 'OGR_DS_CopyLayer' to copy each layer from the source data set to a new
> >> layer in the new SQLite dataset.
> >>>
> >>> However, when converting Shapefiles to SQLite, it only copies across about
> >> a third of the features for many
> >>> of the layers and therefore the new data set is of no use.
> >>>
> >>> The relevant code and output is below.
> >>>
> >>> I'm at a loss to figure out what is going wrong here and I'd be grateful
> >> is somebody could assist in getting
> >>> this to work as expected (or am I doing the wrong thing completely?).
> >>>
> >>> NB:  This is using Spatialite on iOS (simulator).
> >>>
> >>> When I use ogr2ogr on Mac OS X with SQLite (without Spatialite) it works
> >> fine and doesn't miss any features.
> >>>
> >>> Cheers,
> >>> Nik.
> >>>
> >>> CODE:
> >>>
> >>>     OGRLayerH sourceLayer = OGR_DS_GetLayer(ds, i);
> >>>     int sourceFeatureCount = OGR_L_GetFeatureCount(sourceLayer, YES);
> >>>
> >>>     OGR_DS_CopyLayer(destDS, sourceLayer, OGR_L_GetName(sourceLayer), NULL);
> >>>
> >>>     OGRLayerH destLayer = OGR_DS_GetLayerByName(destDS,
> >> OGR_L_GetName(sourceLayer));
> >>>     printf("sourceFeatureCount:  %d\n", sourceFeatureCount);
> >>>     printf("  destFeatureCount:  %d\n", OGR_L_GetFeatureCount(destLayer, YES));
> >>>
> >>> OUTPUT:
> >>>
> >>>     sourceFeatureCount:  3882
> >>>       destFeatureCount:  1200
> >>>
> >>
> >> Hi,
> >>
> >> My guess is that CopyLayer is making 200 feature sized transactions and only
> >> 6 transactions are accepted by Spatialite which makes 1200 features. The
> >> rest transactions are not accepted for some reason. With Spatialite my guess
> >> is that it complains about constraints and some of the features do not share
> >> the same geometry type and SRID. Perhaps trying to write multipolygons into
> >> a layer that accepts only polygons or vice versa.
> >>
> >> -Jukka Rahkonen-
> >>
> >>
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> -- 
> Best regards,
> Chaitanya kumar CH.
> 
> +91-9494447584
> 17.2416N 80.1426E

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140304/76e87255/attachment.html>

From jukka.rahkonen at mmmtike.fi  Tue Mar  4 01:31:47 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 4 Mar 2014 09:31:47 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Missing_features_after_copying_layers_from?=
	=?utf-8?q?=09Shapefiles_to_SQLite?=
References: <11381BD9-118A-4C06-885A-A764846BD728@nixanz.com>
	<loom.20140303T061517-381@post.gmane.org>
	<2414738B-380B-4C56-9998-1ABFC78B1ECB@nixanz.com>
	<97482E33-C078-4F49-B6D6-898D9F3093CC@nixanz.com>
	<CAMKgpOaPKOQ9m6e-MqDevNkaAn-iZ9TFboF4diMe_54JjOSAQQ@mail.gmail.com>
	<B1C5D178-7FFF-4F0C-AD6C-CE9ABECFCB76@nixanz.com>
Message-ID: <loom.20140304T102313-615@post.gmane.org>

Nik Sands <nixanz <at> nixanz.com> writes:

> 
> Thanks Chaitanya,
> It's finally dawned on me that this is what the following is about in the
OGR SQLite format web page:
> 
> 
> Tables with multiple geometries
> Starting with OGR 1.10, tables that have multiple geometry columns
registered in geometry_columns can be used by OGR. For such tables, there
are as many OGR layers exposed as there are geometry columns. They are named
"table_name(geometry_column_name)".Note: this support is limited to
read-only operations.
> 
> Ah... so multiple geometries are NOT avaiable in this format for writable.
> 
> Your idea of forcing all geometries to multies is a good idea. ?I'll have
to figure out the most efficient way to do this when converting an entire
layer at a time, but it's likely to be much better than the way I'm
currently doing it and would result in the same number of layers as the
original, which is preferable, especially when the user wants to manage
drawing styles for layers.
 
> Thanks for your idea. ?I'm very grateful.

Hi,

You perhaps understood wrong what was said about multiple geometries.
Multipolygon is a single geometry. Multiple geometry columns means a
situation when one feature has many geometries, for example a polygon
geometry, simplified polygon geometry and point geometry presenting the
centroid of the polygon. All in one row in a same table but in three
geometry columns.

I think also that a standard solution in to create multilinesting and
multipolygon tables into Spatialite and write also simple geometries as
multivariants. Principally same for multipoints, but at least in data I
usually use such do not exist. But you know your data and can decide. It is
also possible to create a Spatialite table with a generic "GEOMETRY"
geometry type. Such table accepts all kind of geometries but it may me
tricky to use data in applications.

-Jukka Rahkonen-

> 
> Cheers,
> Nik.




From a.furieri at lqt.it  Tue Mar  4 02:50:10 2014
From: a.furieri at lqt.it (a.furieri at lqt.it)
Date: Tue, 04 Mar 2014 11:50:10 +0100
Subject: [gdal-dev]
 =?utf-8?q?Missing_features_after_copying_layers_from?=
 =?utf-8?q?=09Shapefiles_to_SQLite?=
In-Reply-To: <loom.20140304T102313-615@post.gmane.org>
References: <11381BD9-118A-4C06-885A-A764846BD728@nixanz.com>
	<loom.20140303T061517-381@post.gmane.org>
	<2414738B-380B-4C56-9998-1ABFC78B1ECB@nixanz.com>
	<97482E33-C078-4F49-B6D6-898D9F3093CC@nixanz.com>
	<CAMKgpOaPKOQ9m6e-MqDevNkaAn-iZ9TFboF4diMe_54JjOSAQQ@mail.gmail.com>
	<B1C5D178-7FFF-4F0C-AD6C-CE9ABECFCB76@nixanz.com>
	<loom.20140304T102313-615@post.gmane.org>
Message-ID: <1ecc7a81a994df2873e699c83fac3dcb@lqt.it>

Hi all,

just yo better clarify some relevant details:

a Shapefile can legitimately contain one the following shapes:
Point, PolyLine, Polygon and MultiPoint; and there are further
shape-codes intended to support extended XYZ or XYM dimensions,
such as PointZ and PolyLineM

please note: accordingly to the SHP model there is a very strong
distinction between Point and MultiPoint; but a PolyLine can
indifferently contain just a single line or a collection of
many individual lines, and the same is for Polygons.

on the opposite side, the standard OGC-SFS data model supports
the following geometry classes:
Point, Linestring, Polygon, MultiPoint, MultiLinestring,
MultiPolygon and GeometryCollection; in this case too we have
further classes supporting extending XYZ, XYM and XYZM
dimensions, such as PointZ, LinestringM or PolygonZM.

please note: the OGC-SFS model introduces a very sharp distinction
between e.g. Linestring and MultiLinestring; a Linestring can
contain just a single line, a MultiLinestring can contain any
arbitrary number of individual lines ... THIS INCLUDING JUST ONE !!!
and the same is for Point/MultiPoint and Polygon/MultiPolygon.

quick conclusion: SHP geometry types doesn't exactly match
OFC-SFS types, and there is enough room to introduce some
dangerous inconsistency, e.g.:

- the SHP PolyLine type could possibly match the Linestring type
   if (and only if) all PolyLines into the SHP will contain just
   a single line.
- when some SHP PolyLine does actually contain more individual
   lines a MultiLinestring will always be required on the OGC-SFS
   side
- anyway OGC-SFS MultiLinestring will always exactly match the
   SHP PolyLine type, even in the case of "mixed" Polylines
   sometimes being elementary and sometimes being complex.
- the same considerations obviously apply to Polygon/MultiPolygon
- conclusion: always assuming a Multi?? type is the safest approach,
   if you aren't absolutely sure about the actual SHP payload.

ogr2ogr does actually has an argument nicely supporting
all this (just pasted from the ogr2ogr man page):

-nlt type:
     Define the geometry type for the created layer.
     One of NONE, GEOMETRY, POINT, LINESTRING, POLYGON,
     GEOMETRYCOLLECTION, MULTIPOINT, MULTIPOLYGON or
     MULTILINESTRING. Add "25D" to the name to get 2.5D
     versions. Starting with GDAL 1.10, PROMOTE_TO_MULTI
     can be used to automatically promote layers that mix
     polygon or multipolygons to multipolygons, and layers
     that mix linestrings or multilinestrings to multilinestrings.
     Can be usefull when converting shapefiles to PostGIS
     (and other target drivers) that implements strict checks
     for geometry type.

it works for PostGIS, and it works for SpatiaLite as well.

bye Sandro


From nixanz at nixanz.com  Tue Mar  4 02:50:51 2014
From: nixanz at nixanz.com (Nik Sands)
Date: Tue, 4 Mar 2014 21:50:51 +1100
Subject: [gdal-dev] Missing features after copying layers
	from	Shapefiles to SQLite
In-Reply-To: <loom.20140304T102313-615@post.gmane.org>
References: <11381BD9-118A-4C06-885A-A764846BD728@nixanz.com>
	<loom.20140303T061517-381@post.gmane.org>
	<2414738B-380B-4C56-9998-1ABFC78B1ECB@nixanz.com>
	<97482E33-C078-4F49-B6D6-898D9F3093CC@nixanz.com>
	<CAMKgpOaPKOQ9m6e-MqDevNkaAn-iZ9TFboF4diMe_54JjOSAQQ@mail.gmail.com>
	<B1C5D178-7FFF-4F0C-AD6C-CE9ABECFCB76@nixanz.com>
	<loom.20140304T102313-615@post.gmane.org>
Message-ID: <871257F2-4FF3-4A5F-A0A8-D3BB306DAB82@nixanz.com>

You are correct - I did misunderstand.  Thanks for further explaining the multiple geometries to me.  :-)

So it looks like the best option for me is to make a copy of each source layer which may contain both single and multi variants (eg, point and multipoint features) and make the new SQLite layer use the multi variant (eg, multipoint) and perhaps I will need to convert every single variant feature (eg, point) to the multi variant (eg, multipoint).

I've written some code to try to do this but its rather long and clumsy (and doesn't actually work as yet).  I can't help but think there's got to be a better way and that I'm doing it all wrong.  Is there any precedent or preferred way that this should be done?

I think that perhaps my understanding of the API is a bit lacking in this area.


On 4 Mar 2014, at 8:31 pm, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi> wrote:

> Nik Sands <nixanz <at> nixanz.com> writes:
> 
>> 
>> Thanks Chaitanya,
>> It's finally dawned on me that this is what the following is about in the
> OGR SQLite format web page:
>> 
>> 
>> Tables with multiple geometries
>> Starting with OGR 1.10, tables that have multiple geometry columns
> registered in geometry_columns can be used by OGR. For such tables, there
> are as many OGR layers exposed as there are geometry columns. They are named
> "table_name(geometry_column_name)".Note: this support is limited to
> read-only operations.
>> 
>> Ah... so multiple geometries are NOT avaiable in this format for writable.
>> 
>> Your idea of forcing all geometries to multies is a good idea.  I'll have
> to figure out the most efficient way to do this when converting an entire
> layer at a time, but it's likely to be much better than the way I'm
> currently doing it and would result in the same number of layers as the
> original, which is preferable, especially when the user wants to manage
> drawing styles for layers.
> 
>> Thanks for your idea.  I'm very grateful.
> 
> Hi,
> 
> You perhaps understood wrong what was said about multiple geometries.
> Multipolygon is a single geometry. Multiple geometry columns means a
> situation when one feature has many geometries, for example a polygon
> geometry, simplified polygon geometry and point geometry presenting the
> centroid of the polygon. All in one row in a same table but in three
> geometry columns.
> 
> I think also that a standard solution in to create multilinesting and
> multipolygon tables into Spatialite and write also simple geometries as
> multivariants. Principally same for multipoints, but at least in data I
> usually use such do not exist. But you know your data and can decide. It is
> also possible to create a Spatialite table with a generic "GEOMETRY"
> geometry type. Such table accepts all kind of geometries but it may me
> tricky to use data in applications.
> 
> -Jukka Rahkonen-
> 
>> 
>> Cheers,
>> Nik.
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Tue Mar  4 02:57:39 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 04 Mar 2014 11:57:39 +0100
Subject: [gdal-dev] Missing features after copying layers from
	Shapefiles to SQLite
In-Reply-To: <871257F2-4FF3-4A5F-A0A8-D3BB306DAB82@nixanz.com>
References: <11381BD9-118A-4C06-885A-A764846BD728@nixanz.com>
	<loom.20140303T061517-381@post.gmane.org>
	<2414738B-380B-4C56-9998-1ABFC78B1ECB@nixanz.com>
	<97482E33-C078-4F49-B6D6-898D9F3093CC@nixanz.com>
	<CAMKgpOaPKOQ9m6e-MqDevNkaAn-iZ9TFboF4diMe_54JjOSAQQ@mail.gmail.com>
	<B1C5D178-7FFF-4F0C-AD6C-CE9ABECFCB76@nixanz.com>
	<loom.20140304T102313-615@post.gmane.org>
	<871257F2-4FF3-4A5F-A0A8-D3BB306DAB82@nixanz.com>
Message-ID: <1393930659.5315b1a3c8c63@imp.free.fr>

Selon Nik Sands <nixanz at nixanz.com>:

> You are correct - I did misunderstand.  Thanks for further explaining the
> multiple geometries to me.  :-)
>
> So it looks like the best option for me is to make a copy of each source
> layer which may contain both single and multi variants (eg, point and
> multipoint features) and make the new SQLite layer use the multi variant (eg,
> multipoint) and perhaps I will need to convert every single variant feature
> (eg, point) to the multi variant (eg, multipoint).
>
> I've written some code to try to do this but its rather long and clumsy (and
> doesn't actually work as yet).  I can't help but think there's got to be a
> better way and that I'm doing it all wrong.  Is there any precedent or
> preferred way that this should be done?
>
> I think that perhaps my understanding of the API is a bit lacking in this
> area.

Your understanding is OK. The fact is that the ogr2ogr source code offers more
transformations (such as -nlt) than what OGR_DS_CopyDataSource() can currently
do. One option for you would be to use/adapt ogr2ogr source code. It is FOSS too
!

>
>
> On 4 Mar 2014, at 8:31 pm, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi> wrote:
>
> > Nik Sands <nixanz <at> nixanz.com> writes:
> >
> >>
> >> Thanks Chaitanya,
> >> It's finally dawned on me that this is what the following is about in the
> > OGR SQLite format web page:
> >>
> >>
> >> Tables with multiple geometries
> >> Starting with OGR 1.10, tables that have multiple geometry columns
> > registered in geometry_columns can be used by OGR. For such tables, there
> > are as many OGR layers exposed as there are geometry columns. They are
> named
> > "table_name(geometry_column_name)".Note: this support is limited to
> > read-only operations.
> >>
> >> Ah... so multiple geometries are NOT avaiable in this format for writable.
> >>
> >> Your idea of forcing all geometries to multies is a good idea.  I'll have
> > to figure out the most efficient way to do this when converting an entire
> > layer at a time, but it's likely to be much better than the way I'm
> > currently doing it and would result in the same number of layers as the
> > original, which is preferable, especially when the user wants to manage
> > drawing styles for layers.
> >
> >> Thanks for your idea.  I'm very grateful.
> >
> > Hi,
> >
> > You perhaps understood wrong what was said about multiple geometries.
> > Multipolygon is a single geometry. Multiple geometry columns means a
> > situation when one feature has many geometries, for example a polygon
> > geometry, simplified polygon geometry and point geometry presenting the
> > centroid of the polygon. All in one row in a same table but in three
> > geometry columns.
> >
> > I think also that a standard solution in to create multilinesting and
> > multipolygon tables into Spatialite and write also simple geometries as
> > multivariants. Principally same for multipoints, but at least in data I
> > usually use such do not exist. But you know your data and can decide. It is
> > also possible to create a Spatialite table with a generic "GEOMETRY"
> > geometry type. Such table accepts all kind of geometries but it may me
> > tricky to use data in applications.
> >
> > -Jukka Rahkonen-
> >
> >>
> >> Cheers,
> >> Nik.
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From nixanz at nixanz.com  Tue Mar  4 02:58:03 2014
From: nixanz at nixanz.com (Nik Sands)
Date: Tue, 4 Mar 2014 21:58:03 +1100
Subject: [gdal-dev] Missing features after copying layers
	from	Shapefiles to SQLite
In-Reply-To: <1ecc7a81a994df2873e699c83fac3dcb@lqt.it>
References: <11381BD9-118A-4C06-885A-A764846BD728@nixanz.com>
	<loom.20140303T061517-381@post.gmane.org>
	<2414738B-380B-4C56-9998-1ABFC78B1ECB@nixanz.com>
	<97482E33-C078-4F49-B6D6-898D9F3093CC@nixanz.com>
	<CAMKgpOaPKOQ9m6e-MqDevNkaAn-iZ9TFboF4diMe_54JjOSAQQ@mail.gmail.com>
	<B1C5D178-7FFF-4F0C-AD6C-CE9ABECFCB76@nixanz.com>
	<loom.20140304T102313-615@post.gmane.org>
	<1ecc7a81a994df2873e699c83fac3dcb@lqt.it>
Message-ID: <18F89F02-CF0D-4EB2-967E-EE7AEA22AE45@nixanz.com>

Thanks for this information.

I'd like to replicate that ogr2ogr PROMOTE_TO_MULTI functionality in my code, but I'm having trouble figuring out how to do it.  I guess I can take a look at the ogr2ogr code.

(I could also just include the entire ogr2ogr tool bundled into my app and call it from the app, but that seems a bit of overkill for an iOS app, which is best as lean as possible.)


On 4 Mar 2014, at 9:50 pm, a.furieri at lqt.it wrote:

> Hi all,
> 
> just yo better clarify some relevant details:
> 
> a Shapefile can legitimately contain one the following shapes:
> Point, PolyLine, Polygon and MultiPoint; and there are further
> shape-codes intended to support extended XYZ or XYM dimensions,
> such as PointZ and PolyLineM
> 
> please note: accordingly to the SHP model there is a very strong
> distinction between Point and MultiPoint; but a PolyLine can
> indifferently contain just a single line or a collection of
> many individual lines, and the same is for Polygons.
> 
> on the opposite side, the standard OGC-SFS data model supports
> the following geometry classes:
> Point, Linestring, Polygon, MultiPoint, MultiLinestring,
> MultiPolygon and GeometryCollection; in this case too we have
> further classes supporting extending XYZ, XYM and XYZM
> dimensions, such as PointZ, LinestringM or PolygonZM.
> 
> please note: the OGC-SFS model introduces a very sharp distinction
> between e.g. Linestring and MultiLinestring; a Linestring can
> contain just a single line, a MultiLinestring can contain any
> arbitrary number of individual lines ... THIS INCLUDING JUST ONE !!!
> and the same is for Point/MultiPoint and Polygon/MultiPolygon.
> 
> quick conclusion: SHP geometry types doesn't exactly match
> OFC-SFS types, and there is enough room to introduce some
> dangerous inconsistency, e.g.:
> 
> - the SHP PolyLine type could possibly match the Linestring type
>  if (and only if) all PolyLines into the SHP will contain just
>  a single line.
> - when some SHP PolyLine does actually contain more individual
>  lines a MultiLinestring will always be required on the OGC-SFS
>  side
> - anyway OGC-SFS MultiLinestring will always exactly match the
>  SHP PolyLine type, even in the case of "mixed" Polylines
>  sometimes being elementary and sometimes being complex.
> - the same considerations obviously apply to Polygon/MultiPolygon
> - conclusion: always assuming a Multi?? type is the safest approach,
>  if you aren't absolutely sure about the actual SHP payload.
> 
> ogr2ogr does actually has an argument nicely supporting
> all this (just pasted from the ogr2ogr man page):
> 
> -nlt type:
>    Define the geometry type for the created layer.
>    One of NONE, GEOMETRY, POINT, LINESTRING, POLYGON,
>    GEOMETRYCOLLECTION, MULTIPOINT, MULTIPOLYGON or
>    MULTILINESTRING. Add "25D" to the name to get 2.5D
>    versions. Starting with GDAL 1.10, PROMOTE_TO_MULTI
>    can be used to automatically promote layers that mix
>    polygon or multipolygons to multipolygons, and layers
>    that mix linestrings or multilinestrings to multilinestrings.
>    Can be usefull when converting shapefiles to PostGIS
>    (and other target drivers) that implements strict checks
>    for geometry type.
> 
> it works for PostGIS, and it works for SpatiaLite as well.
> 
> bye Sandro
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From nixanz at nixanz.com  Tue Mar  4 04:13:51 2014
From: nixanz at nixanz.com (Nik Sands)
Date: Tue, 4 Mar 2014 23:13:51 +1100
Subject: [gdal-dev] Missing features after copying layers
	from	Shapefiles to SQLite
In-Reply-To: <18F89F02-CF0D-4EB2-967E-EE7AEA22AE45@nixanz.com>
References: <11381BD9-118A-4C06-885A-A764846BD728@nixanz.com>
	<loom.20140303T061517-381@post.gmane.org>
	<2414738B-380B-4C56-9998-1ABFC78B1ECB@nixanz.com>
	<97482E33-C078-4F49-B6D6-898D9F3093CC@nixanz.com>
	<CAMKgpOaPKOQ9m6e-MqDevNkaAn-iZ9TFboF4diMe_54JjOSAQQ@mail.gmail.com>
	<B1C5D178-7FFF-4F0C-AD6C-CE9ABECFCB76@nixanz.com>
	<loom.20140304T102313-615@post.gmane.org>
	<1ecc7a81a994df2873e699c83fac3dcb@lqt.it>
	<18F89F02-CF0D-4EB2-967E-EE7AEA22AE45@nixanz.com>
Message-ID: <3CD7A860-353A-45AB-9F3A-6ACCFB036197@nixanz.com>

Thanks to everybody who helped me towards getting this working - it is now working correctly.  The conversion process is a little slow for large data sets, but the results are excellent, and the Spatialite databases are MUCH faster for spatial filtered lookups than the Shapefiles I had been using before.

In the end it turns out that I had my code very nearly correct before looking at the code in ogr2ogr from which I then corrected my previous cludgy force-to-multi code to the following:

	OGR_F_SetGeometryDirectly(feature, OGR_G_ForceToMultiPoint(OGR_F_StealGeometry(feature)));

(and other variants depending on the geometry type, of course).


On 4 Mar 2014, at 9:58 pm, Nik Sands <nixanz at nixanz.com> wrote:

> Thanks for this information.
> 
> I'd like to replicate that ogr2ogr PROMOTE_TO_MULTI functionality in my code, but I'm having trouble figuring out how to do it.  I guess I can take a look at the ogr2ogr code.
> 
> (I could also just include the entire ogr2ogr tool bundled into my app and call it from the app, but that seems a bit of overkill for an iOS app, which is best as lean as possible.)
> 
> 
> On 4 Mar 2014, at 9:50 pm, a.furieri at lqt.it wrote:
> 
>> Hi all,
>> 
>> just yo better clarify some relevant details:
>> 
>> a Shapefile can legitimately contain one the following shapes:
>> Point, PolyLine, Polygon and MultiPoint; and there are further
>> shape-codes intended to support extended XYZ or XYM dimensions,
>> such as PointZ and PolyLineM
>> 
>> please note: accordingly to the SHP model there is a very strong
>> distinction between Point and MultiPoint; but a PolyLine can
>> indifferently contain just a single line or a collection of
>> many individual lines, and the same is for Polygons.
>> 
>> on the opposite side, the standard OGC-SFS data model supports
>> the following geometry classes:
>> Point, Linestring, Polygon, MultiPoint, MultiLinestring,
>> MultiPolygon and GeometryCollection; in this case too we have
>> further classes supporting extending XYZ, XYM and XYZM
>> dimensions, such as PointZ, LinestringM or PolygonZM.
>> 
>> please note: the OGC-SFS model introduces a very sharp distinction
>> between e.g. Linestring and MultiLinestring; a Linestring can
>> contain just a single line, a MultiLinestring can contain any
>> arbitrary number of individual lines ... THIS INCLUDING JUST ONE !!!
>> and the same is for Point/MultiPoint and Polygon/MultiPolygon.
>> 
>> quick conclusion: SHP geometry types doesn't exactly match
>> OFC-SFS types, and there is enough room to introduce some
>> dangerous inconsistency, e.g.:
>> 
>> - the SHP PolyLine type could possibly match the Linestring type
>> if (and only if) all PolyLines into the SHP will contain just
>> a single line.
>> - when some SHP PolyLine does actually contain more individual
>> lines a MultiLinestring will always be required on the OGC-SFS
>> side
>> - anyway OGC-SFS MultiLinestring will always exactly match the
>> SHP PolyLine type, even in the case of "mixed" Polylines
>> sometimes being elementary and sometimes being complex.
>> - the same considerations obviously apply to Polygon/MultiPolygon
>> - conclusion: always assuming a Multi?? type is the safest approach,
>> if you aren't absolutely sure about the actual SHP payload.
>> 
>> ogr2ogr does actually has an argument nicely supporting
>> all this (just pasted from the ogr2ogr man page):
>> 
>> -nlt type:
>>   Define the geometry type for the created layer.
>>   One of NONE, GEOMETRY, POINT, LINESTRING, POLYGON,
>>   GEOMETRYCOLLECTION, MULTIPOINT, MULTIPOLYGON or
>>   MULTILINESTRING. Add "25D" to the name to get 2.5D
>>   versions. Starting with GDAL 1.10, PROMOTE_TO_MULTI
>>   can be used to automatically promote layers that mix
>>   polygon or multipolygons to multipolygons, and layers
>>   that mix linestrings or multilinestrings to multilinestrings.
>>   Can be usefull when converting shapefiles to PostGIS
>>   (and other target drivers) that implements strict checks
>>   for geometry type.
>> 
>> it works for PostGIS, and it works for SpatiaLite as well.
>> 
>> bye Sandro
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From a.furieri at lqt.it  Tue Mar  4 04:42:38 2014
From: a.furieri at lqt.it (a.furieri at lqt.it)
Date: Tue, 04 Mar 2014 13:42:38 +0100
Subject: [gdal-dev]
 =?utf-8?q?Missing_features_after_copying_layers_from?=
 =?utf-8?q?=09Shapefiles_to_SQLite?=
In-Reply-To: <3CD7A860-353A-45AB-9F3A-6ACCFB036197@nixanz.com>
References: <11381BD9-118A-4C06-885A-A764846BD728@nixanz.com>
	<loom.20140303T061517-381@post.gmane.org>
	<2414738B-380B-4C56-9998-1ABFC78B1ECB@nixanz.com>
	<97482E33-C078-4F49-B6D6-898D9F3093CC@nixanz.com>
	<CAMKgpOaPKOQ9m6e-MqDevNkaAn-iZ9TFboF4diMe_54JjOSAQQ@mail.gmail.com>
	<B1C5D178-7FFF-4F0C-AD6C-CE9ABECFCB76@nixanz.com>
	<loom.20140304T102313-615@post.gmane.org>
	<1ecc7a81a994df2873e699c83fac3dcb@lqt.it>
	<18F89F02-CF0D-4EB2-967E-EE7AEA22AE45@nixanz.com>
	<3CD7A860-353A-45AB-9F3A-6ACCFB036197@nixanz.com>
Message-ID: <abc7b177834a7c1d3c32001da0f53c95@lqt.it>

On Tue, 4 Mar 2014 23:13:51 +1100, Nik Sands wrote:
> The conversion process is a little slow for large data sets
>

Hi Nik,

SQLite is a transactional DBMS and consequently your
approach to transaction handling has a very strong
impact on write performances.

just as a quick and dirty rule-of-the-thumb: performing
a single COMMIT every 64K inserted rows is surely better
than performing 64 distinct COMMITs one every 1K inserted
rows.

an even more aggressive approach: just completely disable
SQLite's journal and transaction support when you are
planning to import a very huge dataset.
you simply have to execute the following PRAGMA directive
before starting your import process:

PRAGMA journal_mode=OFF;

be very careful; completely disabling the journal could
have the very unpleasant consequence that if unhappily
some SQL error occurs during the import your target DB-file
will be quite surely irremediably corrupted.
but this isn't usually a big issue, at least until you
can safely restart the import process from scratch by
creating a brand new empty DB-file.

a further possible optimization; the default SQLite's
cache could be too small to adequately support an huge
number of INSERTs while updating the Spatial Index at
the same time.
in this case explicitly setting a bigger cache usually
have strong performance benefits:

PRAGMA cache_size=-500000;

please note: SQLite intends any *negative* size to
be expressed in KB; so the above directive will cause
SQLite to allocate as much as 500 MB for its cache;
and this will obviously dramatically reduce the number
of physical I/O operations.

bye Sandro


From arno at agerrius.nl  Tue Mar  4 11:56:59 2014
From: arno at agerrius.nl (agerrius)
Date: Tue, 4 Mar 2014 11:56:59 -0800 (PST)
Subject: [gdal-dev] C# OGR reading OSM features "stalls"
In-Reply-To: <201403032339.45954.even.rouault@mines-paris.org>
References: <1393771657536-5106937.post@n6.nabble.com>
	<201403021718.38427.even.rouault@mines-paris.org>
	<1393779589860-5106948.post@n6.nabble.com>
	<201403021929.53284.even.rouault@mines-paris.org>
	<1393791999403-5106982.post@n6.nabble.com>
	<201403022137.24090.even.rouault@mines-paris.org>
	<1393831678672-5107036.post@n6.nabble.com>
	<1393879225578-5107214.post@n6.nabble.com>
	<201403032339.45954.even.rouault@mines-paris.org>
Message-ID: <1393963019732-5107525.post@n6.nabble.com>

Even,

In my actual application I am looping over all layers, but it still doesn't
work.

But from your feedback I now know what is going wrong. My problem is what to
do with layers that don't contain the field I am filtering on. If I apply
the filter to them and error is thrown (ERROR 1: 'landuse' not recognised as
an available field.). What I did now is just skip those layers, but as I
understand now that will interfere with the interleaved reading and
therefore I don't get the features returned from the other layers either.

So how would one get all the OSM features that have an attribute landuse? As
you can see I used "landuse IS NOT NULL" for the attribute filter. But if I
set that on the points layer I get an error, since there are no landuse
points. How can I set the filter so that that layer actually returns no
features?

Thanks for all the help so far,

Arno



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/C-OGR-reading-OSM-features-stalls-tp5106937p5107525.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at mmmtike.fi  Tue Mar  4 12:04:46 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 4 Mar 2014 20:04:46 +0000 (UTC)
Subject: [gdal-dev] C# OGR reading OSM features
References: <1393771657536-5106937.post@n6.nabble.com>
	<201403021718.38427.even.rouault@mines-paris.org>
	<1393779589860-5106948.post@n6.nabble.com>
	<201403021929.53284.even.rouault@mines-paris.org>
	<1393791999403-5106982.post@n6.nabble.com>
	<201403022137.24090.even.rouault@mines-paris.org>
	<1393831678672-5107036.post@n6.nabble.com>
	<1393879225578-5107214.post@n6.nabble.com>
	<201403032339.45954.even.rouault@mines-paris.org>
	<1393963019732-5107525.post@n6.nabble.com>
Message-ID: <loom.20140304T210217-422@post.gmane.org>

agerrius <arno <at> agerrius.nl> writes:


> So how would one get all the OSM features that have an attribute landuse? As
> you can see I used "landuse IS NOT NULL" for the attribute filter. But if I
> set that on the points layer I get an error, since there are no landuse
> points. How can I set the filter so that that layer actually returns no
> features?
>
> Thanks for all the help so far,

Hi,

Attributes for each layer are separately configured in osmconf.ini file.
Perhaps it is missing landuse attribute for points?

-Jukka Rahkonen-
 
> Arno
> 
> --
> View this message in context:
http://osgeo-org.1560.x6.nabble.com/C-OGR-reading-OSM-features-stalls-tp5106937p5107525.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> 





From even.rouault at mines-paris.org  Tue Mar  4 12:30:47 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 4 Mar 2014 21:30:47 +0100
Subject: [gdal-dev] C# OGR reading OSM features "stalls"
In-Reply-To: <1393963019732-5107525.post@n6.nabble.com>
References: <1393771657536-5106937.post@n6.nabble.com>
	<201403032339.45954.even.rouault@mines-paris.org>
	<1393963019732-5107525.post@n6.nabble.com>
Message-ID: <201403042130.47791.even.rouault@mines-paris.org>

Le mardi 04 mars 2014 20:56:59, agerrius a ?crit :
> Even,
> 
> In my actual application I am looping over all layers, but it still doesn't
> work.
> 
> But from your feedback I now know what is going wrong. My problem is what
> to do with layers that don't contain the field I am filtering on. If I
> apply the filter to them and error is thrown (ERROR 1: 'landuse' not
> recognised as an available field.). What I did now is just skip those
> layers, but as I understand now that will interfere with the interleaved
> reading and therefore I don't get the features returned from the other
> layers either.
> 
> So how would one get all the OSM features that have an attribute landuse?
> As you can see I used "landuse IS NOT NULL" for the attribute filter. But
> if I set that on the points layer I get an error, since there are no
> landuse points. How can I set the filter so that that layer actually
> returns no features?

Only set the filter on the multipolygons layer.

> 
> Thanks for all the help so far,
> 
> Arno
> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/C-OGR-reading-OSM-features-stalls-tp51
> 06937p5107525.html Sent from the GDAL - Dev mailing list archive at
> Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From arno at agerrius.nl  Tue Mar  4 12:41:45 2014
From: arno at agerrius.nl (agerrius)
Date: Tue, 4 Mar 2014 12:41:45 -0800 (PST)
Subject: [gdal-dev] C# OGR reading OSM features "stalls"
In-Reply-To: <201403042130.47791.even.rouault@mines-paris.org>
References: <201403021718.38427.even.rouault@mines-paris.org>
	<1393779589860-5106948.post@n6.nabble.com>
	<201403021929.53284.even.rouault@mines-paris.org>
	<1393791999403-5106982.post@n6.nabble.com>
	<201403022137.24090.even.rouault@mines-paris.org>
	<1393831678672-5107036.post@n6.nabble.com>
	<1393879225578-5107214.post@n6.nabble.com>
	<201403032339.45954.even.rouault@mines-paris.org>
	<1393963019732-5107525.post@n6.nabble.com>
	<201403042130.47791.even.rouault@mines-paris.org>
Message-ID: <1393965705293-5107533.post@n6.nabble.com>

> Only set the filter on the multipolygons layer. 

But if I don't set any filter on the other layers I do get all other point
and line features (for example highway, etc). And I don't want them, I for
example only want landuse features. So I want no features to be returned
from layers that don't have landuse features.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/C-OGR-reading-OSM-features-stalls-tp5106937p5107533.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Tue Mar  4 13:03:26 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 4 Mar 2014 22:03:26 +0100
Subject: [gdal-dev] C# OGR reading OSM features "stalls"
In-Reply-To: <1393965705293-5107533.post@n6.nabble.com>
References: <201403021718.38427.even.rouault@mines-paris.org>
	<201403042130.47791.even.rouault@mines-paris.org>
	<1393965705293-5107533.post@n6.nabble.com>
Message-ID: <201403042203.26650.even.rouault@mines-paris.org>

Le mardi 04 mars 2014 21:41:45, agerrius a ?crit :
> > Only set the filter on the multipolygons layer.
> 
> But if I don't set any filter on the other layers I do get all other point
> and line features (for example highway, etc). And I don't want them, I for
> example only want landuse features. So I want no features to be returned
> from layers that don't have landuse features.

Just delete features that you get from layers you are not interested into... 

> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/C-OGR-reading-OSM-features-stalls-tp51
> 06937p5107533.html Sent from the GDAL - Dev mailing list archive at
> Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From ridgewang at gmail.com  Tue Mar  4 21:44:58 2014
From: ridgewang at gmail.com (ridgewang)
Date: Tue, 4 Mar 2014 21:44:58 -0800 (PST)
Subject: [gdal-dev] Fwd: Can not open bigtiff file using gdal1.10
 API	saved by photoshop cs6
In-Reply-To: <loom.20140301T085516-786@post.gmane.org>
References: <D0F81DEA-7D5C-4A5A-839E-1A82F96BB4EC@gmail.com>
	<1393561019253-5106514.post@n6.nabble.com>
	<1393594004.53108e94c0764@imp.free.fr>
	<CAK4ZbRZGieraNBMCMPw79EpRPVs5gGSp0fo9BSGThg64hcaNOA@mail.gmail.com>
	<201402282332.02184.even.rouault@mines-paris.org>
	<622B3499-6EEC-4B6D-9296-608E4DD67C9E@gmail.com>
	<loom.20140301T085516-786@post.gmane.org>
Message-ID: <1393998298577-5107568.post@n6.nabble.com>

thanks. I download the r26999 branch and it works good now.  And I am puzzled
what does the stripsize means. the tiff file i create by gdal is tiled with
blocksize 256x256, and the blocksize will be changed to imagewidthx1 if do
some image editing and saved by photoshop. Does the stripsize means
blockwidthxblockheight or blockwidthximageheight? I wonder why the stripsize
can exceed 2GB with blocksize imagewidthx1.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-Can-not-open-bigtiff-file-using-gdal1-10-API-saved-by-photoshop-cs6-tp5105979p5107568.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From arno at agerrius.nl  Wed Mar  5 00:26:37 2014
From: arno at agerrius.nl (agerrius)
Date: Wed, 5 Mar 2014 00:26:37 -0800 (PST)
Subject: [gdal-dev] C# OGR reading OSM features "stalls"
In-Reply-To: <201403042203.26650.even.rouault@mines-paris.org>
References: <201403021929.53284.even.rouault@mines-paris.org>
	<1393791999403-5106982.post@n6.nabble.com>
	<201403022137.24090.even.rouault@mines-paris.org>
	<1393831678672-5107036.post@n6.nabble.com>
	<1393879225578-5107214.post@n6.nabble.com>
	<201403032339.45954.even.rouault@mines-paris.org>
	<1393963019732-5107525.post@n6.nabble.com>
	<201403042130.47791.even.rouault@mines-paris.org>
	<1393965705293-5107533.post@n6.nabble.com>
	<201403042203.26650.even.rouault@mines-paris.org>
Message-ID: <1394007997314-5107599.post@n6.nabble.com>

OK, I will do that.

I had thought about that before, it is doesn't feel intuitive to read tens
of thousands of features from a layer and then just ignore/delete them. I
had hope that with the filter I could get better performance by not reading
them at all.

But it seems that's not how it works with the interleaved reading, so I'll
implement it like this.

Thanks again for all the help,

Arno



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/C-OGR-reading-OSM-features-stalls-tp5106937p5107599.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Wed Mar  5 01:55:02 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 5 Mar 2014 10:55:02 +0100
Subject: [gdal-dev]
 =?iso-8859-1?q?Fwd=3A_Can_not_open_bigtiff_file_using_?=
 =?iso-8859-1?q?gdal1=2E10_API=09saved_by_photoshop_cs6?=
In-Reply-To: <1393998298577-5107568.post@n6.nabble.com>
References: <D0F81DEA-7D5C-4A5A-839E-1A82F96BB4EC@gmail.com>
	<loom.20140301T085516-786@post.gmane.org>
	<1393998298577-5107568.post@n6.nabble.com>
Message-ID: <201403051055.02907.even.rouault@mines-paris.org>

Le mercredi 05 mars 2014 06:44:58, ridgewang a ?crit :
> thanks. I download the r26999 branch and it works good now.  And I am
> puzzled what does the stripsize means. the tiff file i create by gdal is
> tiled with blocksize 256x256, and the blocksize will be changed to
> imagewidthx1 if do some image editing and saved by photoshop.

Well perhaps photoshop just creates a new image while saving an edited 
image...

> Does the
> stripsize means blockwidthxblockheight or blockwidthximageheight?

strip size is for stripped images (i.e. not blocked/tiled). So it is 
image_width * strip_height * data_type_size.

> I wonder
> why the stripsize can exceed 2GB with blocksize imagewidthx1.

Well, the real stripsize produced by photoshop is really 
imagewidth*imageheight (single strip that covers the whole image), but in the 
GDAL data model, this would be impractical since that would mean the image 
would be one single block and an attempt to read one pixel would cause it to 
be fully read and cached, so GDAL artificially exposes "virtual" strips that 
are one line high.

> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/gdal-dev-Can-not-open-bigtiff-file-usi
> ng-gdal1-10-API-saved-by-photoshop-cs6-tp5105979p5107568.html Sent from the
> GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From schneider.michal at gmail.com  Wed Mar  5 05:30:31 2014
From: schneider.michal at gmail.com (Michal Schneider)
Date: Wed, 5 Mar 2014 14:30:31 +0100
Subject: [gdal-dev] OGR MSSQLSPATIAL encoding
Message-ID: <CANBOXvWergFtgWNxfuTiPhYpjA11zeXiq5dC_Uj_J8Hr2mcUbg@mail.gmail.com>

Hi,

could you give me please advice how to create a new correctly encoded
feature in MS SQL database with C++ API?

I'm using GDAL 1.10 and SQL Server 2008 R2.

 I've got data encoded in UTF-8, which is default encoding for GDAL. I
tried to encode data to UTF-16, UCS-2, but without success :-(

Thans for advice!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140305/57d74c6e/attachment.html>

From vincent.mora at oslandia.com  Thu Mar  6 08:32:32 2014
From: vincent.mora at oslandia.com (Vincent Mora)
Date: Thu, 06 Mar 2014 17:32:32 +0100
Subject: [gdal-dev] WAsP map output for ogr
In-Reply-To: <201402252013.45182.even.rouault@mines-paris.org>
References: <530C77F2.6020305@oslandia.com> <530C8AD7.1040705@oslandia.com>
	<201402252013.45182.even.rouault@mines-paris.org>
Message-ID: <5318A320.2080007@oslandia.com>


> A write-only driver if I understand well ? There are not so many instances of
> such drivers. I can think to the PGDump driver.
I have a write-only driver here: https://github.com/Oslandia/gdal_wasp

It's working but not complete, what I'll add in the next two weeks:

    - unit tests.
    - a line simplification option (probably Douglas?Peucker with
    constrains to avoid contact with other lines)
    - read functions in order to have a read/write driver.

Even if the driver is not complete at the moment and I'm not quite ready 
to submit this contrib as a ticket+patch. I'd like to have 
opinions/comments of those interested. Thanks.

> That's certainly the trickiest part of your task. There's no such algorithm in
> GDAL. I'm not very familiar with that but it sounds a bit like topological
> processing. Perhaps PostGis topology could be used to compute the edges from
> the polygons ? Reading the introduction of
> http://postgis.net/docs/Topology.html,  I can see that you should have in-
> house competences on that ;-)
> There's an idea for GSOC 2014 (Geography network support :
> http://trac.osgeo.org/gdal/wiki/SummerOfCode ) that seems a bit connected with
> your problem and could potentially served as the base for such algorithm.
> But I'm not sure that GDAL alone could solve it. You likely need some
> intermediate storage to store and retrieve the edges from the polygon set
> (unless you have not that many polygons to deal with in which case in-memory
> processing could be OK).
>
No, I won't have that many polygons, in-memory processing is fine.

Since I could not find an ogr interface to geos spatial index, the 
polygon intersection is O(n^2), but thanks to bbox pruning it's only a 
second to process typical input in debug.

From jorgearevalo at libregis.org  Thu Mar  6 09:45:50 2014
From: jorgearevalo at libregis.org (Jorge Arevalo)
Date: Thu, 6 Mar 2014 18:45:50 +0100
Subject: [gdal-dev] CartoDB driver fail because drop sequence sentence fails
Message-ID: <CAMhtMNNLgZv-V1Aothj5c3NO1cV2EOzG60Gh-C58diLijvb3EA@mail.gmail.com>

Hello,

I'm trying to create a new table in CartoDB using the GDAL CartoDB
driver and Python bindings. I'm getting a HTTP 400 error.

This is the source code:

from osgeo import ogr
from osgeo import gdal

gdal.SetConfigOption("CARTODB_API_KEY", MY_API_KEY)
drv = ogr.GetDriverByName("CartoDB")
cartodb_ds = drv.Open('cartodb:%s' % MY_ACCOUNT_NAME, update=1)
if cartodb_ds is None:
    print 'Cannot open CartoDB connection for writing'

cartodb_layer = cartodb_ds.CreateLayer('my_layer',
geom_type=ogr.wkbMultiPolygon)


Activating debug, this is what the driver sends to CartoDB:

q=CREATE TABLE "my_layer" ( cartodb_id SERIAL, the_geom
GEOMETRY(MULTIPOLYGON, 0), the_geom_webmercator GEOMETRY(MULTIPOLYGON,
3857),PRIMARY KEY (cartodb_id) );DROP SEQUENCE IF EXISTS
"my_layer_cartodb_id_seq";CREATE SEQUENCE "my_layer_cartodb_id_seq"
START 1;ALTER TABLE my_layer ALTER COLUMN cartodb_id SET DEFAULT
nextval('my_layer_cartodb_id_seq')&api_key=1f1464a7f041a39568046b858af425abab4fefc6


And the response error message (HTTP error 400):

CARTODB: RunSQL Response:{"error":["cannot drop sequence
my_layer_cartodb_id_seq because other objects depend on it"]}

If I get rid of all the SQL after the create table sentence itself, it
works, and the table is created. I guess I could modify the driver to
avoid this, but I'd like to know if someone is using it and having
this problem.

BTW, the tables created via SQL API don't appear in the CartoDB
dashboard, but this is a known issue (
https://github.com/CartoDB/cartodb/issues/115)

Best regards,

-- 
Jorge Arevalo
Freelance developer

http://about.me/jorgeas80

From even.rouault at mines-paris.org  Thu Mar  6 11:05:21 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 6 Mar 2014 20:05:21 +0100
Subject: [gdal-dev] CartoDB driver fail because drop sequence sentence
	fails
In-Reply-To: <CAMhtMNNLgZv-V1Aothj5c3NO1cV2EOzG60Gh-C58diLijvb3EA@mail.gmail.com>
References: <CAMhtMNNLgZv-V1Aothj5c3NO1cV2EOzG60Gh-C58diLijvb3EA@mail.gmail.com>
Message-ID: <201403062005.21510.even.rouault@mines-paris.org>

Le jeudi 06 mars 2014 18:45:50, Jorge Arevalo a ?crit :
> Hello,
> 
> I'm trying to create a new table in CartoDB using the GDAL CartoDB
> driver and Python bindings. I'm getting a HTTP 400 error.
> 
> This is the source code:
> 
> from osgeo import ogr
> from osgeo import gdal
> 
> gdal.SetConfigOption("CARTODB_API_KEY", MY_API_KEY)
> drv = ogr.GetDriverByName("CartoDB")
> cartodb_ds = drv.Open('cartodb:%s' % MY_ACCOUNT_NAME, update=1)
> if cartodb_ds is None:
>     print 'Cannot open CartoDB connection for writing'
> 
> cartodb_layer = cartodb_ds.CreateLayer('my_layer',
> geom_type=ogr.wkbMultiPolygon)
> 
> 
> Activating debug, this is what the driver sends to CartoDB:
> 
> q=CREATE TABLE "my_layer" ( cartodb_id SERIAL, the_geom
> GEOMETRY(MULTIPOLYGON, 0), the_geom_webmercator GEOMETRY(MULTIPOLYGON,
> 3857),PRIMARY KEY (cartodb_id) );DROP SEQUENCE IF EXISTS
> "my_layer_cartodb_id_seq";CREATE SEQUENCE "my_layer_cartodb_id_seq"
> START 1;ALTER TABLE my_layer ALTER COLUMN cartodb_id SET DEFAULT
> nextval('my_layer_cartodb_id_seq')&api_key=1f1464a7f041a39568046b858af425ab
> ab4fefc6
> 
> 
> And the response error message (HTTP error 400):
> 
> CARTODB: RunSQL Response:{"error":["cannot drop sequence
> my_layer_cartodb_id_seq because other objects depend on it"]}

Perhaps use DROP CASCADE intead of DROP ?
Feel free to modify the driver.

> 
> If I get rid of all the SQL after the create table sentence itself, it
> works, and the table is created. I guess I could modify the driver to
> avoid this, but I'd like to know if someone is using it and having
> this problem.
> 
> BTW, the tables created via SQL API don't appear in the CartoDB
> dashboard, but this is a known issue (
> https://github.com/CartoDB/cartodb/issues/115)
> 
> Best regards,

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Thu Mar  6 11:19:30 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 6 Mar 2014 20:19:30 +0100
Subject: [gdal-dev] Heuristics to classify raster data ?
Message-ID: <201403062019.30124.even.rouault@mines-paris.org>

Hi,

I'd be interested in an algorithm to automate the classification of raster data 
between maps (let's say rendering of OpenStreetMap data, or other digital 
maps) one one side and aerial/satellite imagery on the other side, without 
looking at metadata (bare geotiff typically). This is to help in automating 
bulk of import of data from a media and establishing a first level of 
classification.

Has anyone already done that and has code and/or advice to share, or know a 
software project that would do that ?

Some ideas that came to my mind :
- maps have typically a much more reduce number of colors than imagery, but 
you may have imagery that has already been transformed to 256 colors to reduce 
storage space.
- maps have generally a majority color (e.g. white, green), but not in all 
zones (urban zones will have more features)
- maps have higher spatial frequency (lines, text) whereas imagery will be 
more continuous : use of gradient, and compute statistics on it ?

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jluis at ualg.pt  Thu Mar  6 11:50:45 2014
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu, 06 Mar 2014 19:50:45 +0000
Subject: [gdal-dev] Heuristics to classify raster data ?
In-Reply-To: <201403062019.30124.even.rouault@mines-paris.org>
References: <201403062019.30124.even.rouault@mines-paris.org>
Message-ID: <5318D195.3080806@ualg.pt>

Even,

Did not get it all. You want a method that allows you to tell between a 
map and aerial/satellite image?
I believe the k-means algorithm would produce quite good results on maps 
as is expectable that individual clusters would have low variance.

Joaquim

> Hi,
>
> I'd be interested in an algorithm to automate the classification of raster data
> between maps (let's say rendering of OpenStreetMap data, or other digital
> maps) one one side and aerial/satellite imagery on the other side, without
> looking at metadata (bare geotiff typically). This is to help in automating
> bulk of import of data from a media and establishing a first level of
> classification.
>
> Has anyone already done that and has code and/or advice to share, or know a
> software project that would do that ?
>
> Some ideas that came to my mind :
> - maps have typically a much more reduce number of colors than imagery, but
> you may have imagery that has already been transformed to 256 colors to reduce
> storage space.
> - maps have generally a majority color (e.g. white, green), but not in all
> zones (urban zones will have more features)
> - maps have higher spatial frequency (lines, text) whereas imagery will be
> more continuous : use of gradient, and compute statistics on it ?
>
> Even
>


From bishop.dev at gmail.com  Thu Mar  6 12:16:24 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Fri, 07 Mar 2014 00:16:24 +0400
Subject: [gdal-dev] Heuristics to classify raster data ?
In-Reply-To: <201403062019.30124.even.rouault@mines-paris.org>
References: <201403062019.30124.even.rouault@mines-paris.org>
Message-ID: <5318D798.9010305@gmail.com>

Hi Even,

most of all depends what kind of imagery and maps you wish to classify. 
If the maps are classical scanned paper maps, and you want fast 
algorithm - the crosses of meter or degree grid can be the good pattern.
But if we have areal images this will not work, as such images have 
crosses too. But satellites - not. May be some frame of maps can be good 
pattern.

If you have some fragment of maps and images, I think some content 
analysis needed:
- clustering, i.e. http://en.wikipedia.org/wiki/K-means_clustering
-Neural network with learning
-Support vector machine i.e. http://svmlight.joachims.org/ and 
http://en.wikipedia.org/wiki/Support_vector_machine

Also some hash comparison can be used (rather fast)
- perceptual hash compare  i.e. http://www.phash.org/

In all cases input images should be resized to some small sizes and may 
be grayscaled or binarized before analysis.

Best regards,
     Dmitry

06.03.2014 23:19, Even Rouault ?????:
> Hi,
>
> I'd be interested in an algorithm to automate the classification of raster data
> between maps (let's say rendering of OpenStreetMap data, or other digital
> maps) one one side and aerial/satellite imagery on the other side, without
> looking at metadata (bare geotiff typically). This is to help in automating
> bulk of import of data from a media and establishing a first level of
> classification.
>
> Has anyone already done that and has code and/or advice to share, or know a
> software project that would do that ?
>
> Some ideas that came to my mind :
> - maps have typically a much more reduce number of colors than imagery, but
> you may have imagery that has already been transformed to 256 colors to reduce
> storage space.
> - maps have generally a majority color (e.g. white, green), but not in all
> zones (urban zones will have more features)
> - maps have higher spatial frequency (lines, text) whereas imagery will be
> more continuous : use of gradient, and compute statistics on it ?
>
> Even
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140307/f5350d98/attachment.html>

From Ivan.Price at noveltis.fr  Thu Mar  6 23:38:48 2014
From: Ivan.Price at noveltis.fr (Ivan Price)
Date: Fri, 7 Mar 2014 07:38:48 +0000
Subject: [gdal-dev] Heuristics to classify raster data ?
In-Reply-To: <5318D798.9010305@gmail.com>
References: <201403062019.30124.even.rouault@mines-paris.org>
	<5318D798.9010305@gmail.com>
Message-ID: <605C20E40C3B7D4E93E0E804EECE898E1EB6B2B8@GLORFINDEL.noveltis.loc>

if it really is trying to tell the difference between a map and a photograph could you make a decision based on the presence of text, and therefore use an OCR mechanism to judge if there are more than x words found in the image

-i


De : gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de Dmitriy Baryshnikov
Envoy? : Thursday, 6 March 2014 21:16
? : gdal-dev at lists.osgeo.org
Objet : Re: [gdal-dev] Heuristics to classify raster data ?

Hi Even,

most of all depends what kind of imagery and maps you wish to classify. If the maps are classical scanned paper maps, and you want fast algorithm - the crosses of meter or degree grid can be the good pattern.
But if we have areal images this will not work, as such images have crosses too. But satellites - not. May be some frame of maps can be good pattern.

If you have some fragment of maps and images, I think some content analysis needed:
- clustering, i.e. http://en.wikipedia.org/wiki/K-means_clustering
- Neural network with learning
- Support vector machine i.e.  http://svmlight.joachims.org/ and http://en.wikipedia.org/wiki/Support_vector_machine

Also some hash comparison can be used (rather fast)
- perceptual hash compare  i.e. http://www.phash.org/

In all cases input images should be resized to some small sizes and may be grayscaled or binarized before analysis.



Best regards,

    Dmitry
06.03.2014 23:19, Even Rouault ?????:

Hi,



I'd be interested in an algorithm to automate the classification of raster data

between maps (let's say rendering of OpenStreetMap data, or other digital

maps) one one side and aerial/satellite imagery on the other side, without

looking at metadata (bare geotiff typically). This is to help in automating

bulk of import of data from a media and establishing a first level of

classification.



Has anyone already done that and has code and/or advice to share, or know a

software project that would do that ?



Some ideas that came to my mind :

- maps have typically a much more reduce number of colors than imagery, but

you may have imagery that has already been transformed to 256 colors to reduce

storage space.

- maps have generally a majority color (e.g. white, green), but not in all

zones (urban zones will have more features)

- maps have higher spatial frequency (lines, text) whereas imagery will be

more continuous : use of gradient, and compute statistics on it ?



Even



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140307/c52d724d/attachment.html>

From jukka.rahkonen at mmmtike.fi  Fri Mar  7 02:42:13 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 7 Mar 2014 10:42:13 +0000 (UTC)
Subject: [gdal-dev] Something wrong with writing a big raster into PDF
Message-ID: <loom.20140307T112452-162@post.gmane.org>

Hi,

I can't make usable pdf files from some original maps and I do not
understand what goes wrong.
I am testing on Windows 7 and GDAL-dev from gisinternals, both 32 and 64
bit. Images are like this one:

http://kartat.kapsi.fi/files/taustakarttasarja/taustakartta_80/5m/etrs89/png/UM5L.png

Command can be simplified to
gdal_translate -of pdf UM5L.png UM5L.pdf
Everything seems to go alright and gdalinfo shows normal information from
the pdf. However, if I open the UM5L.pdf file with Acrobat Reader it does
not show a map. Everything is just pure white.

I planned to check what happens if read the map back from pdf as
gdal_translate -of gtiff um5l.pdf um5l.tif
After fifteen minutes I estimate that the output will be ready after an hour
or so which is all too slow for a Corei7 CPU and 8GB of RAM.
 
I had another try with the same binaries with a small png file (2000x2000
pixels) and conversion into pdf was fast and successful. Is there perhaps
something that does not scale up properly when the raster size gets bigger?

-Jukka Rahkonen-




From even.rouault at mines-paris.org  Fri Mar  7 05:10:34 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 07 Mar 2014 14:10:34 +0100
Subject: [gdal-dev] Something wrong with writing a big raster into PDF
In-Reply-To: <loom.20140307T112452-162@post.gmane.org>
References: <loom.20140307T112452-162@post.gmane.org>
Message-ID: <1394197834.5319c54ab3888@imp.free.fr>

Hi Jukka,

did you try with -co TILED=YES ?

Even


> Hi,
>
> I can't make usable pdf files from some original maps and I do not
> understand what goes wrong.
> I am testing on Windows 7 and GDAL-dev from gisinternals, both 32 and 64
> bit. Images are like this one:
>
>
http://kartat.kapsi.fi/files/taustakarttasarja/taustakartta_80/5m/etrs89/png/UM5L.png
>
> Command can be simplified to
> gdal_translate -of pdf UM5L.png UM5L.pdf
> Everything seems to go alright and gdalinfo shows normal information from
> the pdf. However, if I open the UM5L.pdf file with Acrobat Reader it does
> not show a map. Everything is just pure white.
>
> I planned to check what happens if read the map back from pdf as
> gdal_translate -of gtiff um5l.pdf um5l.tif
> After fifteen minutes I estimate that the output will be ready after an hour
> or so which is all too slow for a Corei7 CPU and 8GB of RAM.
>
> I had another try with the same binaries with a small png file (2000x2000
> pixels) and conversion into pdf was fast and successful. Is there perhaps
> something that does not scale up properly when the raster size gets bigger?
>
> -Jukka Rahkonen-
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From jukka.rahkonen at mmmtike.fi  Fri Mar  7 05:20:13 2014
From: jukka.rahkonen at mmmtike.fi (Rahkonen Jukka  (Tike))
Date: Fri, 7 Mar 2014 13:20:13 +0000
Subject: [gdal-dev] Something wrong with writing a big raster into PDF
Message-ID: <EFE5D7EE2EC8D3438FE02E356F81E35A03B0A7@FITLK-EXMBX04.msvyvi.vaha.local>

Hi Even,

Yes, that way I can perhaps create an all-white PDF map a bit faster but with no other improvement, unfortunately.

-Jukka-

Even Rouault wrote:
> 
> Hi Jukka,
> 
> did you try with -co TILED=YES ?
> 
> Even
> 
> 
> > Hi,
> >
> > I can't make usable pdf files from some original maps and I do not
> > understand what goes wrong.
> > I am testing on Windows 7 and GDAL-dev from gisinternals, both 32 and
> > 64 bit. Images are like this one:
> >
> >
> http://kartat.kapsi.fi/files/taustakarttasarja/taustakartta_80/5m/etrs89/png/U
> M5L.png
> >
> > Command can be simplified to
> > gdal_translate -of pdf UM5L.png UM5L.pdf Everything seems to go
> > alright and gdalinfo shows normal information from the pdf. However,
> > if I open the UM5L.pdf file with Acrobat Reader it does not show a
> > map. Everything is just pure white.
> >
> > I planned to check what happens if read the map back from pdf as
> > gdal_translate -of gtiff um5l.pdf um5l.tif After fifteen minutes I
> > estimate that the output will be ready after an hour or so which is
> > all too slow for a Corei7 CPU and 8GB of RAM.
> >
> > I had another try with the same binaries with a small png file
> > (2000x2000
> > pixels) and conversion into pdf was fast and successful. Is there
> > perhaps something that does not scale up properly when the raster size gets
> bigger?
> >
> > -Jukka Rahkonen-
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> 


From even.rouault at mines-paris.org  Fri Mar  7 08:32:39 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 07 Mar 2014 17:32:39 +0100
Subject: [gdal-dev] Something wrong with writing a big raster into PDF
In-Reply-To: <EFE5D7EE2EC8D3438FE02E356F81E35A03B0A7@FITLK-EXMBX04.msvyvi.vaha.local>
References: <EFE5D7EE2EC8D3438FE02E356F81E35A03B0A7@FITLK-EXMBX04.msvyvi.vaha.local>
Message-ID: <1394209959.5319f4a7550cb@imp.free.fr>

Selon "Rahkonen Jukka  (Tike)" <jukka.rahkonen at mmmtike.fi>:

> Hi Even,
>
> Yes, that way I can perhaps create an all-white PDF map a bit faster but with
> no other improvement, unfortunately.

Hum, well, perhaps create a ticket on this then

>
> -Jukka-
>
> Even Rouault wrote:
> >
> > Hi Jukka,
> >
> > did you try with -co TILED=YES ?
> >
> > Even
> >
> >
> > > Hi,
> > >
> > > I can't make usable pdf files from some original maps and I do not
> > > understand what goes wrong.
> > > I am testing on Windows 7 and GDAL-dev from gisinternals, both 32 and
> > > 64 bit. Images are like this one:
> > >
> > >
> >
> http://kartat.kapsi.fi/files/taustakarttasarja/taustakartta_80/5m/etrs89/png/U
> > M5L.png
> > >
> > > Command can be simplified to
> > > gdal_translate -of pdf UM5L.png UM5L.pdf Everything seems to go
> > > alright and gdalinfo shows normal information from the pdf. However,
> > > if I open the UM5L.pdf file with Acrobat Reader it does not show a
> > > map. Everything is just pure white.
> > >
> > > I planned to check what happens if read the map back from pdf as
> > > gdal_translate -of gtiff um5l.pdf um5l.tif After fifteen minutes I
> > > estimate that the output will be ready after an hour or so which is
> > > all too slow for a Corei7 CPU and 8GB of RAM.
> > >
> > > I had another try with the same binaries with a small png file
> > > (2000x2000
> > > pixels) and conversion into pdf was fast and successful. Is there
> > > perhaps something that does not scale up properly when the raster size
> gets
> > bigger?
> > >
> > > -Jukka Rahkonen-
> > >
> > >
> > >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> >
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From pepijn at vaneeckhoudt.net  Fri Mar  7 08:43:10 2014
From: pepijn at vaneeckhoudt.net (Pepijn Van Eeckhoudt)
Date: Fri, 07 Mar 2014 17:43:10 +0100
Subject: [gdal-dev] Something wrong with writing a big raster into PDF
In-Reply-To: <loom.20140307T112452-162@post.gmane.org>
References: <loom.20140307T112452-162@post.gmane.org>
Message-ID: <5319F71E.9000509@vaneeckhoudt.net>

On 07-03-14 11:42, Jukka Rahkonen wrote:
> I had another try with the same binaries with a small png file (2000x2000
> pixels) and conversion into pdf was fast and successful. Is there perhaps
> something that does not scale up properly when the raster size gets bigger?
Based on my own experience, Adobe's PDF viewer doesn't handles this type 
of PDF very well. They eventually get displayed but it can take a long time.
Internally raster PDFs are typically structured as a large, single level 
mosaic of small images (jpeg or jpeg2000). There's some fairly large 
examples at 
http://www.agc.army.mil/Missions/Terrain/GeoPDFMaps/GeoPDFGallery.aspx 
that you could have a look at and see how Acrobat copes with those.

Pepijn

From etourigny.dev at gmail.com  Fri Mar  7 09:27:24 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri, 7 Mar 2014 14:27:24 -0300
Subject: [gdal-dev] Something wrong with writing a big raster into PDF
In-Reply-To: <5319F71E.9000509@vaneeckhoudt.net>
References: <loom.20140307T112452-162@post.gmane.org>
	<5319F71E.9000509@vaneeckhoudt.net>
Message-ID: <CA+TxYvOrPqT2E5Sskzy+j=0LEwJCkwdGW4krF==SmenA7TDECQ@mail.gmail.com>

Jukka - have you tried with other pdf viewers?


On Fri, Mar 7, 2014 at 1:43 PM, Pepijn Van Eeckhoudt <
pepijn at vaneeckhoudt.net> wrote:

> On 07-03-14 11:42, Jukka Rahkonen wrote:
>
>> I had another try with the same binaries with a small png file (2000x2000
>> pixels) and conversion into pdf was fast and successful. Is there perhaps
>> something that does not scale up properly when the raster size gets
>> bigger?
>>
> Based on my own experience, Adobe's PDF viewer doesn't handles this type
> of PDF very well. They eventually get displayed but it can take a long time.
> Internally raster PDFs are typically structured as a large, single level
> mosaic of small images (jpeg or jpeg2000). There's some fairly large
> examples at http://www.agc.army.mil/Missions/Terrain/GeoPDFMaps/
> GeoPDFGallery.aspx that you could have a look at and see how Acrobat
> copes with those.
>
> Pepijn
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140307/63ec0b0c/attachment.html>

From even.rouault at mines-paris.org  Fri Mar  7 10:49:49 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 7 Mar 2014 19:49:49 +0100
Subject: [gdal-dev] Heuristics to classify raster data ?
In-Reply-To: <5318D195.3080806@ualg.pt>
References: <201403062019.30124.even.rouault@mines-paris.org>
	<5318D195.3080806@ualg.pt>
Message-ID: <201403071949.50056.even.rouault@mines-paris.org>

Le jeudi 06 mars 2014 20:50:45, Joaquim Luis a ?crit :
> Even,
> 
> Did not get it all. You want a method that allows you to tell between a
> map and aerial/satellite image?

Yes exactly

> I believe the k-means algorithm would produce quite good results on maps
> as is expectable that individual clusters would have low variance.

Hum, I read a bit http://en.wikipedia.org/wiki/K-means_clustering and not 
being familiar with it, it is not obvious how that could lead to the binary 
result I expect ;-) I was hoping for a ready-made solution for my problem. I'm 
kind of demanding tonight ;-) 

Thanks anyway,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From bishop.dev at gmail.com  Fri Mar  7 10:55:59 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Fri, 07 Mar 2014 22:55:59 +0400
Subject: [gdal-dev] Heuristics to classify raster data ?
In-Reply-To: <201403071949.50056.even.rouault@mines-paris.org>
References: <201403062019.30124.even.rouault@mines-paris.org>	<5318D195.3080806@ualg.pt>
	<201403071949.50056.even.rouault@mines-paris.org>
Message-ID: <531A163F.6050906@gmail.com>

Hi Even,

The result of classification the map produce less classes than 
aerial/satellites images. This is the way using k-means for you 
purposes. So you need do set the border count of classes to decide is 
this map or imagery. Less classes count - map, otherwise - imagery.

Best regards,
     Dmitry

07.03.2014 22:49, Even Rouault ?????:
> Le jeudi 06 mars 2014 20:50:45, Joaquim Luis a ?crit :
>> Even,
>>
>> Did not get it all. You want a method that allows you to tell between a
>> map and aerial/satellite image?
> Yes exactly
>
>> I believe the k-means algorithm would produce quite good results on maps
>> as is expectable that individual clusters would have low variance.
> Hum, I read a bit http://en.wikipedia.org/wiki/K-means_clustering and not
> being familiar with it, it is not obvious how that could lead to the binary
> result I expect ;-) I was hoping for a ready-made solution for my problem. I'm
> kind of demanding tonight ;-)
>
> Thanks anyway,
>
> Even
>


From even.rouault at mines-paris.org  Fri Mar  7 12:11:40 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 7 Mar 2014 21:11:40 +0100
Subject: [gdal-dev] Something wrong with writing a big raster into PDF
In-Reply-To: <EFE5D7EE2EC8D3438FE02E356F81E35A03B0A7@FITLK-EXMBX04.msvyvi.vaha.local>
References: <EFE5D7EE2EC8D3438FE02E356F81E35A03B0A7@FITLK-EXMBX04.msvyvi.vaha.local>
Message-ID: <201403072111.41287.even.rouault@mines-paris.org>

Le vendredi 07 mars 2014 14:20:13, Rahkonen Jukka (Tike) a ?crit :
> Hi Even,
> 
> Yes, that way I can perhaps create an all-white PDF map a bit faster but
> with no other improvement, unfortunately.

I've tried "gdal_translate UM5L.png UM5L.pdf -of pdf" on my Linux workstation 
and the the following viewers :
- Adobe Reader 9.4.2 Linux: blank image
- Okular, KDE-based PDF viewer, based on poppler library: can display a fit-to-
page overview in a few seconds, but not the full resolution image since it 
tries to allocate a 15360x15360 buffer
- Evince, GNOME-based PDF viewer, based on poppler library, uses cairo for 
display: blank image with error message "cairo context error: out of memory"
- xpdf, viewer whose code has been forked to build the poppler library: can 
display the PDF at full resolution, and in reasonable time.
- qgis (based on GDAL PDF driver, and poppler backend) : the initial overview 
computation is really really slow. Roughly half an hour. Because there's 
currently no optimization in the GDAL PDF reader to get a lower resolution 
image. Could potentially be dramatically improved by asking a rendering at 
lower DPI for overview levels, instead of querying at best DPI and then 
downsampling. But once that 32x32 overview is computed, if you go to 100% 
scale and pan, the refresh time is around 1 second after each pan.
- command line "rendering" (based on GDAL PDF driver, and poppler backend) : 
gdal_translate UM5L_tiled.pdf out.tif -co TILED=YES : 1 minute 20 sec (less if 
you specify a higher value than the default for GDAL_CACHEMAX)

I've also tried generating a JPEG2000 compressed PDF and Adore Reader is not 
happier.

Conclusion: most PDF viewers assume that a PDF page can fit in memory and don't 
use a tiling strategy to display it.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Fri Mar  7 12:15:02 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 7 Mar 2014 21:15:02 +0100
Subject: [gdal-dev] Something wrong with writing a big raster into PDF
In-Reply-To: <201403072111.41287.even.rouault@mines-paris.org>
References: <EFE5D7EE2EC8D3438FE02E356F81E35A03B0A7@FITLK-EXMBX04.msvyvi.vaha.local>
	<201403072111.41287.even.rouault@mines-paris.org>
Message-ID: <201403072115.02586.even.rouault@mines-paris.org>

Le vendredi 07 mars 2014 21:11:40, Even Rouault a ?crit :
> Le vendredi 07 mars 2014 14:20:13, Rahkonen Jukka (Tike) a ?crit :
> > Hi Even,
> > 
> > Yes, that way I can perhaps create an all-white PDF map a bit faster but
> > with no other improvement, unfortunately.
> 
> I've tried "gdal_translate UM5L.png UM5L.pdf -of pdf" on my Linux
> workstation and the the following viewers :

I forgot to mention the "-co TILED=YES" which was actually used and makes a 
dramatic improvement for xpdf & QGIS use cases, compared to not tiling mode.

> - Adobe Reader 9.4.2 Linux: blank image
> - Okular, KDE-based PDF viewer, based on poppler library: can display a
> fit-to- page overview in a few seconds, but not the full resolution image
> since it tries to allocate a 15360x15360 buffer
> - Evince, GNOME-based PDF viewer, based on poppler library, uses cairo for
> display: blank image with error message "cairo context error: out of
> memory" - xpdf, viewer whose code has been forked to build the poppler
> library: can display the PDF at full resolution, and in reasonable time.
> - qgis (based on GDAL PDF driver, and poppler backend) : the initial
> overview computation is really really slow. Roughly half an hour. Because
> there's currently no optimization in the GDAL PDF reader to get a lower
> resolution image. Could potentially be dramatically improved by asking a
> rendering at lower DPI for overview levels, instead of querying at best
> DPI and then downsampling. But once that 32x32 overview is computed, if
> you go to 100% scale and pan, the refresh time is around 1 second after
> each pan. - command line "rendering" (based on GDAL PDF driver, and
> poppler backend) : gdal_translate UM5L_tiled.pdf out.tif -co TILED=YES : 1
> minute 20 sec (less if you specify a higher value than the default for
> GDAL_CACHEMAX)
> 
> I've also tried generating a JPEG2000 compressed PDF and Adore Reader is
> not happier.
> 
> Conclusion: most PDF viewers assume that a PDF page can fit in memory and
> don't use a tiling strategy to display it.
> 
> Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jukka.rahkonen at mmmtike.fi  Fri Mar  7 14:09:56 2014
From: jukka.rahkonen at mmmtike.fi (Rahkonen Jukka  (Tike))
Date: Fri, 7 Mar 2014 22:09:56 +0000
Subject: [gdal-dev] Something wrong with writing a big raster into PDF
Message-ID: <EFE5D7EE2EC8D3438FE02E356F81E35A03B30D@FITLK-EXMBX04.msvyvi.vaha.local>


Even Rouault wrote:
> 
> Le vendredi 07 mars 2014 21:11:40, Even Rouault a ?crit :
> > Le vendredi 07 mars 2014 14:20:13, Rahkonen Jukka (Tike) a ?crit :
> > > Hi Even,
> > >
> > > Yes, that way I can perhaps create an all-white PDF map a bit faster
> > > but with no other improvement, unfortunately.
> >
> > I've tried "gdal_translate UM5L.png UM5L.pdf -of pdf" on my Linux
> > workstation and the the following viewers :
> 
> I forgot to mention the "-co TILED=YES" which was actually used and makes a
> dramatic improvement for xpdf & QGIS use cases, compared to not tiling mode.
> 
> > - Adobe Reader 9.4.2 Linux: blank image
> > - Okular, KDE-based PDF viewer, based on poppler library: can display
> > a
> > fit-to- page overview in a few seconds, but not the full resolution
> > image since it tries to allocate a 15360x15360 buffer
> > - Evince, GNOME-based PDF viewer, based on poppler library, uses cairo
> > for
> > display: blank image with error message "cairo context error: out of
> > memory" - xpdf, viewer whose code has been forked to build the poppler
> > library: can display the PDF at full resolution, and in reasonable time.
> > - qgis (based on GDAL PDF driver, and poppler backend) : the initial
> > overview computation is really really slow. Roughly half an hour.
> > Because there's currently no optimization in the GDAL PDF reader to
> > get a lower resolution image. Could potentially be dramatically
> > improved by asking a rendering at lower DPI for overview levels,
> > instead of querying at best DPI and then downsampling. But once that
> > 32x32 overview is computed, if you go to 100% scale and pan, the
> > refresh time is around 1 second after each pan. - command line
> > "rendering" (based on GDAL PDF driver, and poppler backend) :
> > gdal_translate UM5L_tiled.pdf out.tif -co TILED=YES : 1 minute 20 sec
> > (less if you specify a higher value than the default for
> > GDAL_CACHEMAX)
> >
> > I've also tried generating a JPEG2000 compressed PDF and Adore Reader
> > is not happier.
> >
> > Conclusion: most PDF viewers assume that a PDF page can fit in memory
> > and don't use a tiling strategy to display it.
> >
> > Even

I  made some tests too by increasing the output size step by step. For my laptop running Windows 7 54 bit with 8 GB RAM and 32-bit Acrobat Reader XI the first failing pdf was made as
gdal_translate -of png -outsize 80% 80% ul4l.png ul4l_80p.png -co tiled=yes
Input file size is 19200, 19200

Output size is then 15360, 15360.
Acrobat Reader shows an empty map but task manager is listing only a nominal memory consumption of 24 MB for the AcroRd32.exe process. From the Reader file properties menu the page size of the failing one is 5080x5080.
For the till 60% reduced version that shows the map the PDF page size is 4064x4064.

Now I wonder if this is really about too big image or something else. 15360 by 15360 pixels is not extremely much. Is there some secret 200 inch limit hiding in the background? See http://indesignsecrets.com/beware-200-limit-for-pdfs.php. 5080 mm is just above 200 inches.
 
-Jukka Rahkonen-

-Jukka Rahkonen-

From jukka.rahkonen at mmmtike.fi  Fri Mar  7 14:16:07 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 7 Mar 2014 22:16:07 +0000 (UTC)
Subject: [gdal-dev] Something wrong with writing a big raster into PDF
References: <EFE5D7EE2EC8D3438FE02E356F81E35A03B30D@FITLK-EXMBX04.msvyvi.vaha.local>
Message-ID: <loom.20140307T231422-336@post.gmane.org>

Rahkonen Jukka  (Tike <jukka.rahkonen <at> mmmtike.fi> writes:


> Now I wonder if this is really about too big image or something else.
15360 by 15360 pixels is not extremely
> much. Is there some secret 200 inch limit hiding in the background? See
> http://indesignsecrets.com/beware-200-limit-for-pdfs.php. 5080 mm is just
above 200 inches.

Wohoo, this makes the pdf image image to show in Acrobat Reader:
gdal_translate -of pdf ul4l.png ul4l.pdf -co tiled=yes -co dpi=300



-Jukka-



From woodbri at swoodbridge.com  Fri Mar  7 14:23:55 2014
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Fri, 07 Mar 2014 17:23:55 -0500
Subject: [gdal-dev] Problem with results on two different versions of
	gdal_wrap
Message-ID: <531A46FB.5030000@swoodbridge.com>

Hi All,

First off, sorry this is really long with all the gdalinfo pasted into 
it, but I thought is might be more useful to have real information to 
look at.

I have been running down a problem caused by upgrading a server to a 
newer version of gdal. Here are the details:

old server: GDAL 1.6.0dev, FWTools 2.0.6, released 2008/02/03
new server: GDAL 1.9.2, released 2012/10/08

My process is:

wget 
'http://cyclops.marine.usf.edu/modis/level3/husf/fullpass/2014/061/1km/pass/final/MODIS.2014061.194420.fullpass.rgb.hdf'

old server:
gdal_translate -of GTiff -ot Int16 -a_srs EPSG:32662 -a_ullr 
-13914936.3491592 6094982.02936303 -5009377.08569731 -560262.454244465 
HDF4_SDS:UNKNOWN:MODIS.2014061.194420.fullpass.rgb.hdf:0 temp.tif

new server:
gdal_translate -of GTiff -ot Int16 -a_srs EPSG:32662 -a_ullr 
-13914936.3491592 6115512.02936303 -5009377.08569731 -539731.454244465 
HDF4_SDS:UNKNOWN:MODIS.2014061.194420.fullpass.rgb.hdf:0 temp.tif

I have verified that gdalinfo -mm -stats temp.tif looks equivalent for 
the two generated temp.tif images. The -a_ullr are different because 
proj4 is shifting the image 20530m south so I'm correcting here for that.

summary old:
Band 1 Block=8800x1 Type=Int16, ColorInterp=Gray
   Min=377.000 Max=32767.000   Computed Min/Max=377.000,32767.000
   Minimum=377.000, Maximum=32767.000, Mean=27526.311, StdDev=11176.835

summary new:
Band 1 Block=8800x1 Type=Int16, ColorInterp=Gray
   Min=377.000 Max=32767.000   Computed Min/Max=377.000,32767.000
   Minimum=377.000, Maximum=32767.000, Mean=27526.311, StdDev=11176.835

---------------------- full output --------------------------------
old server:
# /opt/FWTools/bin_safe/gdalinfo -mm -stats temp.tif
Driver: GTiff/GeoTIFF
Files: temp.tif
Size is 8800, 6600
Coordinate System is:
PROJCS["WGS 84 / Plate Carree",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.2572235629972,
                 AUTHORITY["EPSG","7030"]],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4326"]],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AUTHORITY["EPSG","32662"]]
Origin = (-13914936.349159199744463,6094982.029363029636443)
Pixel Size = (1011.995370847942013,-1008.370376304165802)
Metadata:
   AREA_OR_POINT=Area
   Collection Location=USF Institute for Marine Remote Sensing
   Data Source Type=Direct Broadcast
   Input 
File(s)=/tmp/s4p_run_map_modis_2.3_2HwoEbWy/MYD021KM.2014061.194420.hdf, 
/tmp/s4p_run_map_modis_2.3_2HwoEbWy/MYD021KM.2014061.194650.hdf, 
/tmp/s4p_run_map_modis_2.3_2HwoEbWy/MYD021KM.2014061.194920.hdf, 
/tmp/s4p_run_map_modis_2.3_2HwoEbWy/MYD021KM.2014061.195150.hdf, 
/tmp/s4p_run_map_modis_2.3_2HwoEbWy/MYD021KM.2014061.195420.hdf, 
/tmp/s4p_run_map_modis_2.3_2HwoEbWy/MYD03.2014061.194420.hdf, 
/tmp/s4p_run_map_modis_2.3_2HwoEbWy/MYD03.2014061.194650.hdf, 
/tmp/s4p_run_map_modis_2.3_2HwoEbWy/MYD03.2014061.194920.hdf, 
/tmp/s4p_run_map_modis_2.3_2HwoEbWy/MYD03.2014061.195150.hdf, 
/tmp/s4p_run_map_modis_2.3_2HwoEbWy/MYD03.2014061.195420.hdf
   L3 Software Name=/usr/bin/map_modis.pl
   L3 Software Version=4.2
   Map Limit=-5, -125, 55, -45
   Map Projection Category=Proj 4.4.7
   Map Projection Name=eqc
   Proj Projection Parameters=#Equidistant Cylindrical (Plate Caree)
#       Cyl, Sph
#       lat_ts=
# +proj=eqc +ellps=WGS84
   Processing Status=final
   Satellite=aqua
   Spatial Resolution=1km
   Temporal Resolution=pass
   _FillValue=[65535]
   band_name=1
   corrected_counts_offset=-0
   corrected_counts_scale=0.124973
   corrected_counts_units=counts
   long_name=Earth View 250M Aggregated 1km Reflective Solar Bands 
Scaled Integers Band 1
   radiance_offset=-0
   radiance_scale=0.0246418
   radiance_units=Watts/m^2/micrometer/steradian
   reflectance_offset=-0
   reflectance_scale=4.72967e-05
   reflectance_units=none
   units=none
   valid_range=[0 32767]
Image Structure Metadata:
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-13914936.349, 6094982.029)
Lower Left  (-13914936.349, -560262.454)
Upper Right (-5009377.086, 6094982.029)
Lower Right (-5009377.086, -560262.454)
Center      (-9462156.717, 2767359.788)
Band 1 Block=8800x1 Type=Int16, ColorInterp=Gray
     Computed Min/Max=377.000,32767.000
   Minimum=377.000, Maximum=32767.000, Mean=27526.311, StdDev=11176.835
   Metadata:
     STATISTICS_MINIMUM=377
     STATISTICS_MAXIMUM=32767
     STATISTICS_MEAN=27526.311392114
     STATISTICS_STDDEV=11176.834697473


new server:
# gdalinfo -mm -stats temp.tif
Driver: GTiff/GeoTIFF
Files: temp.tif
        temp.tif.aux.xml
Size is 8800, 6600
Coordinate System is:
LOCAL_CS["WGS 84 / Plate Carree",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.257223563,
                 AUTHORITY["EPSG","7030"]],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4326"]],
     AUTHORITY["EPSG","32662"],
     UNIT["metre",1]]
Origin = (-13914936.349159199744463,6115512.029363029636443)
Pixel Size = (1011.995370847942013,-1008.370224789014287)
Metadata:
   _FillValue=[65535]
   AREA_OR_POINT=Area
   band_name=1
   Collection Location=USF Institute for Marine Remote Sensing
   corrected_counts_offset=-0
   corrected_counts_scale=0.124973
   corrected_counts_units=counts
   Data Source Type=Direct Broadcast
   Input 
File(s)=/tmp/s4p_run_map_modis_2.3_2HwoEbWy/MYD021KM.2014061.194420.hdf, 
/tmp/s4p_run_map_modis_2.3_2HwoEbWy/MYD021KM.2014061.194650.hdf, 
/tmp/s4p_run_map_modis_2.3_2HwoEbWy/MYD021KM.2014061.194920.hdf, 
/tmp/s4p_run_map_modis_2.3_2HwoEbWy/MYD021KM.2014061.195150.hdf, 
/tmp/s4p_run_map_modis_2.3_2HwoEbWy/MYD021KM.2014061.195420.hdf, 
/tmp/s4p_run_map_modis_2.3_2HwoEbWy/MYD03.2014061.194420.hdf, 
/tmp/s4p_run_map_modis_2.3_2HwoEbWy/MYD03.2014061.194650.hdf, 
/tmp/s4p_run_map_modis_2.3_2HwoEbWy/MYD03.2014061.194920.hdf, 
/tmp/s4p_run_map_modis_2.3_2HwoEbWy/MYD03.2014061.195150.hdf, 
/tmp/s4p_run_map_modis_2.3_2HwoEbWy/MYD03.2014061.195420.hdf
   L3 Software Name=/usr/bin/map_modis.pl
   L3 Software Version=4.2
   long_name=Earth View 250M Aggregated 1km Reflective Solar Bands 
Scaled Integers Band 1
   Map Limit=-5, -125, 55, -45
   Map Projection Category=Proj 4.4.7
   Map Projection Name=eqc
   Processing Status=final
   Proj Projection Parameters=#Equidistant Cylindrical (Plate Caree)
#       Cyl, Sph
#       lat_ts=
# +proj=eqc +ellps=WGS84
   radiance_offset=-0
   radiance_scale=0.0246418
   radiance_units=Watts/m^2/micrometer/steradian
   reflectance_offset=-0
   reflectance_scale=4.72967e-05
   reflectance_units=none
   Satellite=aqua
   Spatial Resolution=1km
   Temporal Resolution=pass
   units=none
   valid_range=[0 32767]
Image Structure Metadata:
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-13914936.349, 6115512.029)
Lower Left  (-13914936.349, -539731.454)
Upper Right (-5009377.086, 6115512.029)
Lower Right (-5009377.086, -539731.454)
Center      (-9462156.717, 2787890.288)
Band 1 Block=8800x1 Type=Int16, ColorInterp=Gray
   Min=377.000 Max=32767.000   Computed Min/Max=377.000,32767.000
   Minimum=377.000, Maximum=32767.000, Mean=27526.311, StdDev=11176.835
   Metadata:
     STATISTICS_MAXIMUM=32767
     STATISTICS_MEAN=27526.311392114
     STATISTICS_MINIMUM=377
     STATISTICS_STDDEV=11176.834697473
-------------------------------------------------------------------------


This is the problem step:

gdalwarp -rcs -ts 8800 6600 -s_srs EPSG:32662 -t_srs EPSG:4326 temp.tif 
target.tif

gdalinfo -mm -stats target.tif

is showing that the range of values in the image are dramatically 
different on the two servers!

summary old:
Band 1 Block=8800x1 Type=Int16, ColorInterp=Gray
     Computed Min/Max=-3877.000,32767.000
   Minimum=-3877.000, Maximum=32767.000, Mean=25235.731, StdDev=10612.642


summary new:
Band 1 Block=8800x1 Type=Int16, ColorInterp=Gray
   Min=-9314.000 Max=32561.000   Computed Min/Max=-9314.000,32561.000
   Minimum=-9314.000, Maximum=32561.000, Mean=19166.800, StdDev=7786.806


Ok, so you can see that the values are radically different. My question 
is how do I get values like the old system? These values represent 
temperatures and I need to get the same values.

My one thought on this is that if is another side effrct of proj4 
behaving differently as I had to adjust the position above to get it to 
align. So maybe the gdalwarp is messing up the pixel values when it 
reprojects it also. But I'm totally lost on how make this work correctly.

Any thoughts on how to fix this?


Thanks,
   -Steve

--------------------------- full output -------------------------------
old server:
# /opt/FWTools/bin_safe/gdalinfo -mm -stats target.tif
Driver: GTiff/GeoTIFF
Files: target.tif
Size is 8800, 6600
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.2572235629972,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0],
     UNIT["degree",0.0174532925199433],
     AUTHORITY["EPSG","4326"]]
Origin = (-125.000000000000128,54.752155134106310)
Pixel Size = (0.009090909090909,-0.009058345210874)
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-125.0000000,  54.7521551) (125d 0'0.00"W, 54d45'7.76"N)
Lower Left  (-125.0000000,  -5.0329233) (125d 0'0.00"W,  5d 1'58.52"S)
Upper Right ( -45.0000000,  54.7521551) ( 45d 0'0.00"W, 54d45'7.76"N)
Lower Right ( -45.0000000,  -5.0329233) ( 45d 0'0.00"W,  5d 1'58.52"S)
Center      ( -85.0000000,  24.8596159) ( 85d 0'0.00"W, 24d51'34.62"N)
Band 1 Block=8800x1 Type=Int16, ColorInterp=Gray
     Computed Min/Max=-3877.000,32767.000
   Minimum=-3877.000, Maximum=32767.000, Mean=25235.731, StdDev=10612.642
   Metadata:
     STATISTICS_MINIMUM=-3877
     STATISTICS_MAXIMUM=32767
     STATISTICS_MEAN=25235.730898691
     STATISTICS_STDDEV=10612.642070873



new server:
# gdalinfo -mm -stats target2.tif
Driver: GTiff/GeoTIFF
Files: target2.tif
Size is 8800, 6600
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0],
     UNIT["degree",0.0174532925199433],
     AUTHORITY["EPSG","4326"]]
Origin = (-125.000000000000000,54.936579261935996)
Pixel Size = (0.009090548058866,-0.009058564516722)
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-125.0000000,  54.9365793) (125d 0' 0.00"W, 54d56'11.69"N)
Lower Left  (-125.0000000,  -4.8499465) (125d 0' 0.00"W,  4d50'59.81"S)
Upper Right ( -45.0031771,  54.9365793) ( 45d 0'11.44"W, 54d56'11.69"N)
Lower Right ( -45.0031771,  -4.8499465) ( 45d 0'11.44"W,  4d50'59.81"S)
Center      ( -85.0015885,  25.0433164) ( 85d 0' 5.72"W, 25d 2'35.94"N)
Band 1 Block=8800x1 Type=Int16, ColorInterp=Gray
     Computed Min/Max=-9314.000,32561.000
   Minimum=-9314.000, Maximum=32561.000, Mean=19166.800, StdDev=7786.806
   Metadata:
     STATISTICS_MAXIMUM=32561
     STATISTICS_MEAN=19166.799570351
     STATISTICS_MINIMUM=-9314
     STATISTICS_STDDEV=7786.8063693375

From jluis at ualg.pt  Fri Mar  7 17:22:42 2014
From: jluis at ualg.pt (Joaquim Luis)
Date: Sat, 08 Mar 2014 01:22:42 +0000
Subject: [gdal-dev] Heuristics to classify raster data ?
In-Reply-To: <201403071949.50056.even.rouault@mines-paris.org>
References: <201403062019.30124.even.rouault@mines-paris.org>
	<5318D195.3080806@ualg.pt>
	<201403071949.50056.even.rouault@mines-paris.org>
Message-ID: <531A70E2.6030107@ualg.pt>


> Hum, I read a bit http://en.wikipedia.org/wiki/K-means_clustering and not
> being familiar with it, it is not obvious how that could lead to the binary
> result I expect ;-) I was hoping for a ready-made solution for my problem. I'm
> kind of demanding tonight ;-)

Well, too late for tonight.

I guessed you would want a ready-to-use solution but what I can offer is 
only my Mirone (and actually not mine originally) solution but I know 
that's not what you need. But still, if you want to make a Windows 
detour an play with the  "Image -> k-means classification" you can see 
it action and it's quite instructive.
Apparently the strategy I had in mind is a bit different from 
Dimitriy's. My idea, driven by how it works in Mirone, is that you can 
select in advance the number of clusters, and get them. So you can 
analyze later their degree of uniformity. A map is expected to have few 
well distinct classes so if you ask for, let's say 5 or 6, each one of 
the will be rather coherent, with a low cluster variance (a measure of 
the spreading about the cluster center). An image, on the other hand is 
expected to have a high variance if one only allow a few clusters (the 5 
or 6 above).

Maybe this code can be of use for you. I never tested it but it's a C 
code with Matlab wrap functions to interface with it (a MEX), and the 
guy is good programmer.

http://www.mathworks.com/matlabcentral/fileexchange/33541-fast-k-means-clustering

Joaquim



From vincent.mora at oslandia.com  Sat Mar  8 01:02:09 2014
From: vincent.mora at oslandia.com (Vincent Mora)
Date: Sat, 08 Mar 2014 10:02:09 +0100
Subject: [gdal-dev] Heuristics to classify raster data ?
In-Reply-To: <201403071949.50056.even.rouault@mines-paris.org>
References: <201403062019.30124.even.rouault@mines-paris.org>	<5318D195.3080806@ualg.pt>
	<201403071949.50056.even.rouault@mines-paris.org>
Message-ID: <531ADC91.4090207@oslandia.com>

On 07/03/2014 19:49, Even Rouault wrote:
> Le jeudi 06 mars 2014 20:50:45, Joaquim Luis a ?crit :
>> Even,
>>
>> Did not get it all. You want a method that allows you to tell between a
>> map and aerial/satellite image?
> Yes exactly
>
>> I believe the k-means algorithm would produce quite good results on maps
>> as is expectable that individual clusters would have low variance.
> Hum, I read a bit http://en.wikipedia.org/wiki/K-means_clustering and not
> being familiar with it, it is not obvious how that could lead to the binary
> result I expect ;-) I was hoping for a ready-made solution for my problem. I'm
> kind of demanding tonight ;-)
Are maps better candidates for image compression than natural images ?

> Thanks anyway,
>
> Even
>


From even.rouault at mines-paris.org  Sat Mar  8 02:05:12 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 8 Mar 2014 11:05:12 +0100
Subject: [gdal-dev] Heuristics to classify raster data ?
In-Reply-To: <531ADC91.4090207@oslandia.com>
References: <201403062019.30124.even.rouault@mines-paris.org>
	<201403071949.50056.even.rouault@mines-paris.org>
	<531ADC91.4090207@oslandia.com>
Message-ID: <201403081105.12260.even.rouault@mines-paris.org>

Le samedi 08 mars 2014 10:02:09, Vincent Mora a ?crit :

> Are maps better candidates for image compression than natural images ?

Interesting idea ! For lossless compression methods such as deflate, yes maps 
will likely have a better compression ratio.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Sat Mar  8 02:22:35 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 8 Mar 2014 11:22:35 +0100
Subject: [gdal-dev] Problem with results on two different versions of
	gdal_wrap
In-Reply-To: <531A46FB.5030000@swoodbridge.com>
References: <531A46FB.5030000@swoodbridge.com>
Message-ID: <201403081122.35304.even.rouault@mines-paris.org>

> 
> 
> This is the problem step:
> 
> gdalwarp -rcs -ts 8800 6600 -s_srs EPSG:32662 -t_srs EPSG:4326 temp.tif
> target.tif
> 
> gdalinfo -mm -stats target.tif
> 
> is showing that the range of values in the image are dramatically
> different on the two servers!
> 
> summary old:
> Band 1 Block=8800x1 Type=Int16, ColorInterp=Gray
>      Computed Min/Max=-3877.000,32767.000
>    Minimum=-3877.000, Maximum=32767.000, Mean=25235.731, StdDev=10612.642
> 
> 
> summary new:
> Band 1 Block=8800x1 Type=Int16, ColorInterp=Gray
>    Min=-9314.000 Max=32561.000   Computed Min/Max=-9314.000,32561.000
>    Minimum=-9314.000, Maximum=32561.000, Mean=19166.800, StdDev=7786.806
> 
> 
> Ok, so you can see that the values are radically different. My question
> is how do I get values like the old system? These values represent
> temperatures and I need to get the same values.
> 
> My one thought on this is that if is another side effrct of proj4
> behaving differently as I had to adjust the position above to get it to
> align. So maybe the gdalwarp is messing up the pixel values when it
> reprojects it also. But I'm totally lost on how make this work correctly.
> 
> Any thoughts on how to fix this?

Stephen,

I think we already had a discussion some time ago about differences between 
spherical or ellipsoidal projections, or am I confusing with someone else ?

Well, it is not clear from your experiment if the difference is due to 
reprojection or to the resampling method.

There's a difference between both GDAL versions, but is the new result worse 
than the previous one (from visual inspection) ?

Cubic spline resampling seems to produce overshoot artifacts in both 
situations (since -3877.000 or -9314.000 in output < 377 in input). That's 
probably due to the maths behind.

Maybe just try with the default nearest resampling to see if it is due to the 
resampling kernel or the reprojection.

I'm also wondering if your data doesn't have a nodata value that you should 
explicitely set. As I can only guess, 32767 would be a good candidate given 
that the data type is Int16. But the " _FillValue=[65535]" in the metadata 
makes me wonder if the datatype shouldn't be UInt16 rather than Int16 in your 
initial conversion from netcdf to geotiff, and the nodata would rather be 65535 
?

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From etourigny.dev at gmail.com  Sat Mar  8 06:29:13 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sat, 8 Mar 2014 11:29:13 -0300
Subject: [gdal-dev] Problem with results on two different versions of
	gdal_wrap
In-Reply-To: <201403081122.35304.even.rouault@mines-paris.org>
References: <531A46FB.5030000@swoodbridge.com>
	<201403081122.35304.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvOdgaEbsGyt_kOu6H0CJekTF+Jjxahtc+nYX6MqPv0KWw@mail.gmail.com>

Perhaps differences in the hdf driver between the two versions could
explain differences in output.

Try converting netcdf file to gtiff with gdal_translate (using one gdal
version), then try gdalwarp from that common gtiff file.


On Sat, Mar 8, 2014 at 7:22 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> >
> >
> > This is the problem step:
> >
> > gdalwarp -rcs -ts 8800 6600 -s_srs EPSG:32662 -t_srs EPSG:4326 temp.tif
> > target.tif
> >
> > gdalinfo -mm -stats target.tif
> >
> > is showing that the range of values in the image are dramatically
> > different on the two servers!
> >
> > summary old:
> > Band 1 Block=8800x1 Type=Int16, ColorInterp=Gray
> >      Computed Min/Max=-3877.000,32767.000
> >    Minimum=-3877.000, Maximum=32767.000, Mean=25235.731, StdDev=10612.642
> >
> >
> > summary new:
> > Band 1 Block=8800x1 Type=Int16, ColorInterp=Gray
> >    Min=-9314.000 Max=32561.000   Computed Min/Max=-9314.000,32561.000
> >    Minimum=-9314.000, Maximum=32561.000, Mean=19166.800, StdDev=7786.806
> >
> >
> > Ok, so you can see that the values are radically different. My question
> > is how do I get values like the old system? These values represent
> > temperatures and I need to get the same values.
> >
> > My one thought on this is that if is another side effrct of proj4
> > behaving differently as I had to adjust the position above to get it to
> > align. So maybe the gdalwarp is messing up the pixel values when it
> > reprojects it also. But I'm totally lost on how make this work correctly.
> >
> > Any thoughts on how to fix this?
>
> Stephen,
>
> I think we already had a discussion some time ago about differences between
> spherical or ellipsoidal projections, or am I confusing with someone else ?
>
> Well, it is not clear from your experiment if the difference is due to
> reprojection or to the resampling method.
>
> There's a difference between both GDAL versions, but is the new result
> worse
> than the previous one (from visual inspection) ?
>
> Cubic spline resampling seems to produce overshoot artifacts in both
> situations (since -3877.000 or -9314.000 in output < 377 in input). That's
> probably due to the maths behind.
>
> Maybe just try with the default nearest resampling to see if it is due to
> the
> resampling kernel or the reprojection.
>
> I'm also wondering if your data doesn't have a nodata value that you should
> explicitely set. As I can only guess, 32767 would be a good candidate given
> that the data type is Int16. But the " _FillValue=[65535]" in the metadata
> makes me wonder if the datatype shouldn't be UInt16 rather than Int16 in
> your
> initial conversion from netcdf to geotiff, and the nodata would rather be
> 65535
> ?
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140308/60fb4075/attachment.html>

From francisrayder at yahoo.co.uk  Sat Mar  8 19:29:16 2014
From: francisrayder at yahoo.co.uk (Laskaris)
Date: Sat, 8 Mar 2014 19:29:16 -0800 (PST)
Subject: [gdal-dev] Moving the poles
Message-ID: <1394335756880-5127897.post@n6.nabble.com>

I am trying to do a crazy "What if...?" climate model experiment that
involves changing the location of the poles. So, mind you, I am not merely
trying to change the coordinate display and use a rotated pole grid. I am
actually trying to locate the pole somewhere else (for instance, in
Australia), and transform all the elevation etc. data accordingly to new
coordinates.

Is it possible to transform a geotiff or netcdf file with GDAL to achieve
this?



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Moving-the-poles-tp5127897.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From etourigny.dev at gmail.com  Sun Mar  9 10:12:54 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sun, 9 Mar 2014 14:12:54 -0300
Subject: [gdal-dev] Moving the poles
In-Reply-To: <1394335756880-5127897.post@n6.nabble.com>
References: <1394335756880-5127897.post@n6.nabble.com>
Message-ID: <CA+TxYvPOvcrjo6aZPKg3FMDDo1svyKpF7f-eA4QxmO20JxXVrw@mail.gmail.com>

Not sure about gdal, but cdo [1] can do this on netcdf files.

have a look at the docs and see the section grids.

You would probably have to define a rotated pole grid, then apply that grid
on your file (using setgrid), then regrid to a normal lat/lon grid using
one of the grid operators like interpolate, remapnn, remapbil, depending on
your data.

But I've never done this though...  There us a forum there if you have
questions, someone probably has an answer.

[1] https://code.zmaw.de/projects/*cdo*


On Sun, Mar 9, 2014 at 12:29 AM, Laskaris <francisrayder at yahoo.co.uk> wrote:

> I am trying to do a crazy "What if...?" climate model experiment that
> involves changing the location of the poles. So, mind you, I am not merely
> trying to change the coordinate display and use a rotated pole grid. I am
> actually trying to locate the pole somewhere else (for instance, in
> Australia), and transform all the elevation etc. data accordingly to new
> coordinates.
>
> Is it possible to transform a geotiff or netcdf file with GDAL to achieve
> this?
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Moving-the-poles-tp5127897.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140309/ec8ff488/attachment.html>

From francisrayder at yahoo.co.uk  Sun Mar  9 10:56:31 2014
From: francisrayder at yahoo.co.uk (Laskaris)
Date: Sun, 9 Mar 2014 10:56:31 -0700 (PDT)
Subject: [gdal-dev] Moving the poles
In-Reply-To: <CA+TxYvPOvcrjo6aZPKg3FMDDo1svyKpF7f-eA4QxmO20JxXVrw@mail.gmail.com>
References: <1394335756880-5127897.post@n6.nabble.com>
	<CA+TxYvPOvcrjo6aZPKg3FMDDo1svyKpF7f-eA4QxmO20JxXVrw@mail.gmail.com>
Message-ID: <1394387791388-5127937.post@n6.nabble.com>

Thank you for your reply. However, I have already tried CDO and it does not
work for what I am trying to do.

When you apply a rotated pole grid to a file with CDO, it does not change
any of the data in the fields. It does not do any kind of "reprojection", as
it were. All it does is add info about the location of the rotated pole to
the file header, and then the file gets displayed accordingly by netcdf file
viewers. Then, when you regrid to a normal, regular lat lon grid, the
rotated pole is removed again from the header, and you are left with the
very same file you started with.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Moving-the-poles-tp5127897p5127937.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jluis at ualg.pt  Sun Mar  9 11:43:54 2014
From: jluis at ualg.pt (jluis at ualg.pt)
Date: Sun, 09 Mar 2014 19:43:54 +0100
Subject: [gdal-dev] Moving the poles
In-Reply-To: <1394387791388-5127937.post@n6.nabble.com>
References: <1394335756880-5127897.post@n6.nabble.com>
	<CA+TxYvPOvcrjo6aZPKg3FMDDo1svyKpF7f-eA4QxmO20JxXVrw@mail.gmail.com>
	<1394387791388-5127937.post@n6.nabble.com>
Message-ID: <20140309194354.30932aymgrnyw02w@wmail.ualg.pt>

Not sure if that's what you want but it worth having a look at GMT's  
"grdrotater"

Joaquim

> Thank you for your reply. However, I have already tried CDO and it does not
> work for what I am trying to do.
>
> When you apply a rotated pole grid to a file with CDO, it does not change
> any of the data in the fields. It does not do any kind of "reprojection", as
> it were. All it does is add info about the location of the rotated pole to
> the file header, and then the file gets displayed accordingly by netcdf file
> viewers. Then, when you regrid to a normal, regular lat lon grid, the
> rotated pole is removed again from the header, and you are left with the
> very same file you started with.
>
>
>
> --
> View this message in context:  
> http://osgeo-org.1560.x6.nabble.com/Moving-the-poles-tp5127897p5127937.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From even.rouault at mines-paris.org  Sun Mar  9 11:58:12 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 9 Mar 2014 19:58:12 +0100
Subject: [gdal-dev] WAsP map output for ogr
In-Reply-To: <5318A320.2080007@oslandia.com>
References: <530C77F2.6020305@oslandia.com>
	<201402252013.45182.even.rouault@mines-paris.org>
	<5318A320.2080007@oslandia.com>
Message-ID: <201403091958.12791.even.rouault@mines-paris.org>

Hi,

my quick review :

- ogrwaspdatasource.cpp :
  * change author and copyright to yours
  * why do you need #ifdef _WIN32
# include <windows.h>
#endif
   * GetLayer() : index start at 0, not 1
   * WASP_MERGE: you could use CSLTestBoolean(CSLFetchNameValueDef( 
papszOptions, "WASP_MERGE", "YES" ))

- ogrwasplayer.cpp :
  * change author to yours
  * OGRWAsPLayer::~OGRWAsPLayer(): potential issues with lines with less than 
2 points ? (and probably at other places)
  * OGRWAsPLayer::WriteRoughness(): oErrorRegion.Intersect( oEnvelope ); at 
line 304 is useless
  * OGRWAsPLayer::CreateFeature(): GetFieldAsDouble() will return 0 if the 
field for the feature is NULL. That might be OK for your use case. If not, you 
could use IsFieldSet().
  * OGRWAsPLayer::CreateGeomField(): that's OK (except the assert(false)), but 
you likely did't need to implement it, unless the source feature has several 
geometry fields.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From woodbri at swoodbridge.com  Sun Mar  9 15:16:24 2014
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Sun, 09 Mar 2014 18:16:24 -0400
Subject: [gdal-dev] Fwd: Re: Problem with results on two different versions
 of gdal_wrap
In-Reply-To: <531CBF6F.2030707@swoodbridge.com>
References: <531CBF6F.2030707@swoodbridge.com>
Message-ID: <531CE838.3020209@swoodbridge.com>

Sorry meant to send this to the list.


-------- Original Message --------
Subject: Re: [gdal-dev] Problem with results on two different versions 
of gdal_wrap
Date: Sun, 09 Mar 2014 15:22:23 -0400
From: Stephen Woodbridge <woodbri at swoodbridge.com>
To: Even Rouault <even.rouault at mines-paris.org>

Even, Etienne,

I'm still working on this. Thanks you both for your suggestions. I spent
10-12hr yesterday trying your suggestions and variation on that to make
things work (on this on top of past efforts) with little progress.

Etienne, I tried your suggestion but it did not make a difference so we
can eliminate the hdf reader as the problem.

Since I'm dealing with a multi-step process of downloading MODIS SST
(sea surface temperatures) and mapping them to geotif for display and
query in mapserver that I inherited. I have decided to try and recreate
the process from scratch starting with trying to get documentation from
the USF IMaRS site so I can better understand what I'm working with.

1. download sst hdf
2. convert to geoTiff
3. add color LUT as .vrt
4. render image in mapserver
5. query image and report temps in degrees C and F

I'm waiting on some email response from USF on documentation for the hdf
files. And I need break from banging my head against a wall :)

To be continued ...

Thanks,
   -Steve

On 3/8/2014 5:22 AM, Even Rouault wrote:
>>
>>
>> This is the problem step:
>>
>> gdalwarp -rcs -ts 8800 6600 -s_srs EPSG:32662 -t_srs EPSG:4326 temp.tif
>> target.tif
>>
>> gdalinfo -mm -stats target.tif
>>
>> is showing that the range of values in the image are dramatically
>> different on the two servers!
>>
>> summary old:
>> Band 1 Block=8800x1 Type=Int16, ColorInterp=Gray
>>       Computed Min/Max=-3877.000,32767.000
>>     Minimum=-3877.000, Maximum=32767.000, Mean=25235.731, StdDev=10612.642
>>
>>
>> summary new:
>> Band 1 Block=8800x1 Type=Int16, ColorInterp=Gray
>>     Min=-9314.000 Max=32561.000   Computed Min/Max=-9314.000,32561.000
>>     Minimum=-9314.000, Maximum=32561.000, Mean=19166.800, StdDev=7786.806
>>
>>
>> Ok, so you can see that the values are radically different. My question
>> is how do I get values like the old system? These values represent
>> temperatures and I need to get the same values.
>>
>> My one thought on this is that if is another side effrct of proj4
>> behaving differently as I had to adjust the position above to get it to
>> align. So maybe the gdalwarp is messing up the pixel values when it
>> reprojects it also. But I'm totally lost on how make this work correctly.
>>
>> Any thoughts on how to fix this?
>
> Stephen,
>
> I think we already had a discussion some time ago about differences between
> spherical or ellipsoidal projections, or am I confusing with someone else ?
>
> Well, it is not clear from your experiment if the difference is due to
> reprojection or to the resampling method.
>
> There's a difference between both GDAL versions, but is the new result worse
> than the previous one (from visual inspection) ?
>
> Cubic spline resampling seems to produce overshoot artifacts in both
> situations (since -3877.000 or -9314.000 in output < 377 in input). That's
> probably due to the maths behind.
>
> Maybe just try with the default nearest resampling to see if it is due to the
> resampling kernel or the reprojection.
>
> I'm also wondering if your data doesn't have a nodata value that you should
> explicitely set. As I can only guess, 32767 would be a good candidate given
> that the data type is Int16. But the " _FillValue=[65535]" in the metadata
> makes me wonder if the datatype shouldn't be UInt16 rather than Int16 in your
> initial conversion from netcdf to geotiff, and the nodata would rather be 65535
> ?
>
> Even
>




From woodbri at swoodbridge.com  Sun Mar  9 15:17:13 2014
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Sun, 09 Mar 2014 18:17:13 -0400
Subject: [gdal-dev] Problem with results on two different versions of
 gdal_wrap
In-Reply-To: <201403081122.35304.even.rouault@mines-paris.org>
References: <531A46FB.5030000@swoodbridge.com>
	<201403081122.35304.even.rouault@mines-paris.org>
Message-ID: <531CE869.3040904@swoodbridge.com>

On 3/8/2014 5:22 AM, Even Rouault wrote:
>>
>>
>> This is the problem step:
>>
>> gdalwarp -rcs -ts 8800 6600 -s_srs EPSG:32662 -t_srs EPSG:4326 temp.tif
>> target.tif
>>
>> gdalinfo -mm -stats target.tif
>>
>> is showing that the range of values in the image are dramatically
>> different on the two servers!
>>
>> summary old:
>> Band 1 Block=8800x1 Type=Int16, ColorInterp=Gray
>>       Computed Min/Max=-3877.000,32767.000
>>     Minimum=-3877.000, Maximum=32767.000, Mean=25235.731, StdDev=10612.642
>>
>>
>> summary new:
>> Band 1 Block=8800x1 Type=Int16, ColorInterp=Gray
>>     Min=-9314.000 Max=32561.000   Computed Min/Max=-9314.000,32561.000
>>     Minimum=-9314.000, Maximum=32561.000, Mean=19166.800, StdDev=7786.806
>>
>>
>> Ok, so you can see that the values are radically different. My question
>> is how do I get values like the old system? These values represent
>> temperatures and I need to get the same values.
>>
>> My one thought on this is that if is another side effrct of proj4
>> behaving differently as I had to adjust the position above to get it to
>> align. So maybe the gdalwarp is messing up the pixel values when it
>> reprojects it also. But I'm totally lost on how make this work correctly.
>>
>> Any thoughts on how to fix this?
>
> Stephen,
>
> I think we already had a discussion some time ago about differences between
> spherical or ellipsoidal projections, or am I confusing with someone else ?

Yes this is probably reloaded to the previous discussion sine this is 
the same process that we discussed before. Before I was dealing with the 
projection being misaligned and I fixed that by changing the bbox 
defined for the hdf file so it was aligned.

But now I am realizing that the pixel values are also messed up. So 
maybe changing the bbox was not the right thing to do.

> Well, it is not clear from your experiment if the difference is due to
> reprojection or to the resampling method.

Yeah, I am totally lost on this. My experiment was to compare the 
process steps on each system to see where things we different in the 
hope of understand what is happening.

> There's a difference between both GDAL versions, but is the new result worse
> than the previous one (from visual inspection) ?

The images do look similar.

> Cubic spline resampling seems to produce overshoot artifacts in both
> situations (since -3877.000 or -9314.000 in output < 377 in input). That's
> probably due to the maths behind.

Right, but turning that off and using the default does not resolve the 
issue.

> Maybe just try with the default nearest resampling to see if it is due to the
> resampling kernel or the reprojection.

Tried that, no joy.

> I'm also wondering if your data doesn't have a nodata value that you should
> explicitely set. As I can only guesswould be a good candidate given
> that the data type is Int16. But the " _FillValue=[65535]" in the metadata
> makes me wonder if the datatype shouldn't be UInt16 rather than Int16 in your
> initial conversion from netcdf to geotiff, and the nodata would rather be 65535
> ?

I tried setting setting nodata and tried UInt16. I notice in the hdf 
metadata that there was a valid_range=[0-32767] which might have been 
why the Int16 as being used.

Anyway, as I mentioned in the prior email, I'm waiting on some docs for 
the hdf files and I will try to reconstruct the process from that.

-Steve

> Even
>


From francisrayder at yahoo.co.uk  Sun Mar  9 20:22:21 2014
From: francisrayder at yahoo.co.uk (Laskaris)
Date: Sun, 9 Mar 2014 20:22:21 -0700 (PDT)
Subject: [gdal-dev] Moving the poles
In-Reply-To: <20140309194354.30932aymgrnyw02w@wmail.ualg.pt>
References: <1394335756880-5127897.post@n6.nabble.com>
	<CA+TxYvPOvcrjo6aZPKg3FMDDo1svyKpF7f-eA4QxmO20JxXVrw@mail.gmail.com>
	<1394387791388-5127937.post@n6.nabble.com>
	<20140309194354.30932aymgrnyw02w@wmail.ualg.pt>
Message-ID: <1394421741111-5127988.post@n6.nabble.com>

Thank you, Joaquim. grdrotater seems to be the program for exactly what I am
trying to do.

Unfortunately, I haven't been able to get it to work yet. I am using the
command:
grdrotater topo.nc -T78/30/-4 -Gtopo_rotated.nc

If I understand correctly, this should create an output file,
topo_rotated.nc, where the data has been rotated by 78 longitude east, 30
latitude north and 4 degrees counterclockwise. However, while a file named
topo_rotated is indeed created, no rotation is being done. The output is
still the same as the input file, with the same projection. I have tried
this with several different input .nc files to make sure it is not a problem
with the particular file I am trying to rotate, but I can't get it to work
with any file.

Is anyone familiar with GMT's grdrotater? Does anyone know what I am doing
wrong here?



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Moving-the-poles-tp5127897p5127988.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From ridgewang at gmail.com  Sun Mar  9 21:47:37 2014
From: ridgewang at gmail.com (ridgewang)
Date: Mon, 10 Mar 2014 12:47:37 +0800
Subject: [gdal-dev] gdal_merge.py can not work
Message-ID: <0B573F0E-B2D8-425C-97A3-BDAC61C4A402@gmail.com>

Hi, 
     I want to use gdal_merge.py to merge two image files. But it reports cannot load _gdal library and %1 is not     a valid win32 module. Here the %1 means the _gdal, maybe.  In python CUI, I run 'import osgeo.gdal' or 'import gdal' command, it reports the same error information.
     I use gdal 1.10.1 1400(vc2005) win32 version on win7 64bit OS, and the python version is 2.76. 
    Any suggestions is appreciated.

Ridge



???? iPhone

From francisrayder at yahoo.co.uk  Sun Mar  9 23:06:03 2014
From: francisrayder at yahoo.co.uk (Laskaris)
Date: Sun, 9 Mar 2014 23:06:03 -0700 (PDT)
Subject: [gdal-dev] Moving the poles
In-Reply-To: <1394421741111-5127988.post@n6.nabble.com>
References: <1394335756880-5127897.post@n6.nabble.com>
	<CA+TxYvPOvcrjo6aZPKg3FMDDo1svyKpF7f-eA4QxmO20JxXVrw@mail.gmail.com>
	<1394387791388-5127937.post@n6.nabble.com>
	<20140309194354.30932aymgrnyw02w@wmail.ualg.pt>
	<1394421741111-5127988.post@n6.nabble.com>
Message-ID: <1394431563871-5127999.post@n6.nabble.com>

Never mind, please. I was confused about the way rotations are supposed to
work in grdrotater. I got it working now.

Thank you very much for your help! My problem is solved.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Moving-the-poles-tp5127897p5127999.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From chaitanya.ch at gmail.com  Sun Mar  9 23:13:10 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon, 10 Mar 2014 11:43:10 +0530
Subject: [gdal-dev] gdal_merge.py can not work
In-Reply-To: <0B573F0E-B2D8-425C-97A3-BDAC61C4A402@gmail.com>
References: <0B573F0E-B2D8-425C-97A3-BDAC61C4A402@gmail.com>
Message-ID: <CAMKgpObx-8vPzyNdKoFckUTez1O4y7DuYZxWmb5c5Y1+9ci22Q@mail.gmail.com>

Ridge,

How did you install GDAL?
This usually happens when python cannot find the gdal libraries. Setting
PYTHONPATH env variable may help.


On Mon, Mar 10, 2014 at 10:17 AM, ridgewang <ridgewang at gmail.com> wrote:

> Hi,
>      I want to use gdal_merge.py to merge two image files. But it reports
> cannot load _gdal library and %1 is not     a valid win32 module. Here the
> %1 means the _gdal, maybe.  In python CUI, I run 'import osgeo.gdal' or
> 'import gdal' command, it reports the same error information.
>      I use gdal 1.10.1 1400(vc2005) win32 version on win7 64bit OS, and
> the python version is 2.76.
>     Any suggestions is appreciated.
>
> Ridge
>
>
>
> ???? iPhone
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140310/026b3385/attachment.html>

From jrepetto at free.fr  Mon Mar 10 00:13:40 2014
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon, 10 Mar 2014 08:13:40 +0100
Subject: [gdal-dev] gdal_merge.py can not work
In-Reply-To: <0B573F0E-B2D8-425C-97A3-BDAC61C4A402@gmail.com>
References: <0B573F0E-B2D8-425C-97A3-BDAC61C4A402@gmail.com>
Message-ID: <531D6624.4080508@free.fr>

On 10/03/2014 05:47, ridgewang wrote:
> Hi,
>       I want to use gdal_merge.py to merge two image files. But it reports cannot load _gdal library and %1 is not     a valid win32 module. Here the %1 means the _gdal, maybe.  In python CUI, I run 'import osgeo.gdal' or 'import gdal' command, it reports the same error information.
>       I use gdal 1.10.1 1400(vc2005) win32 version on win7 64bit OS, and the python version is 2.76.
>      Any suggestions is appreciated.
> 
> Ridge
> 

Hi

You can use gdalwarp instead of gdal_merge.py to merge several files.

Jean-Claude


From jukka.rahkonen at mmmtike.fi  Mon Mar 10 05:23:22 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 10 Mar 2014 12:23:22 +0000 (UTC)
Subject: [gdal-dev] Does GDAL use prepared statements with Spatialite?
Message-ID: <loom.20140310T130930-713@post.gmane.org>

Hi,

I saw a blog about using prepared statements for bulk inserts into SQLite
http://blog.quibb.org/2010/08/fast-bulk-inserts-into-sqlite/

Results show that with prepared statements the inserts/second rate in the
test were at least 3 times better than with standard transactions
http://blog.quibb.org/wp-content/uploads/2010/07/inserts_per_second.png

Could prepared statements make similar boost for saving spatial data into
SQLite/Spatialite/GeoPackage? Or does GDAL SQLite/Spatialite driver already
utilize them?

-Jukka Rahkonen-


From even.rouault at mines-paris.org  Mon Mar 10 05:40:18 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 10 Mar 2014 13:40:18 +0100
Subject: [gdal-dev] Does GDAL use prepared statements with Spatialite?
In-Reply-To: <loom.20140310T130930-713@post.gmane.org>
References: <loom.20140310T130930-713@post.gmane.org>
Message-ID: <1394455218.531db2b296ae5@imp.free.fr>


>
> Could prepared statements make similar boost for saving spatial data into
> SQLite/Spatialite/GeoPackage? Or does GDAL SQLite/Spatialite driver already
> utilize them?

Yes, they do already.

Even

From a.furieri at lqt.it  Mon Mar 10 06:06:26 2014
From: a.furieri at lqt.it (a.furieri at lqt.it)
Date: Mon, 10 Mar 2014 14:06:26 +0100
Subject: [gdal-dev]
 =?utf-8?q?Does_GDAL_use_prepared_statements_with_Spati?=
 =?utf-8?q?alite=3F?=
In-Reply-To: <loom.20140310T130930-713@post.gmane.org>
References: <loom.20140310T130930-713@post.gmane.org>
Message-ID: <d5cb76e37466166f10fa685449f0970d@lqt.it>

On Mon, 10 Mar 2014 12:23:22 +0000 (UTC), Jukka Rahkonen wrote:
> Hi,
>
> I saw a blog about using prepared statements for bulk inserts into 
> SQLite
> http://blog.quibb.org/2010/08/fast-bulk-inserts-into-sqlite/
>
> Results show that with prepared statements the inserts/second rate in 
> the
> test were at least 3 times better than with standard transactions
> 
> http://blog.quibb.org/wp-content/uploads/2010/07/inserts_per_second.png
>

Hi Jukka,

that's absolutely not surprising, and it's easy explaining why
all this happens.

a) consider a statement like this:
    INSERT ... VALUES ('alpha', 3, 'beta', 2.5, 'gamma', NULL);

    the SQL engine is then forced to parse the whole input line,
    identifying each token, checking for overall correctness and
    eventually converting values into the most appropriate datatype
    (e.g. 2.5 will internally become a floating point value).
    and all these steps will be repeated yet again for every
    inserted row.


b) now consider how the "prepared statement" works:
    INSERT ... VALUES (?, ?, ?, ?, ?)

    the SQL engine will now evaluate only once the statement,
    just at the very beginning of the process, and will return
    a pointer referencing a persistent sqlite3_stmt object

    sqlite3_bind_text   (stmt, 0, "alpha", -1, SQLITE_STATIC);
    sqlite3_bind_int    (stmt, 1, 3);
    sqlite3_bind_text   (stmt, 2, "beta", -1, SQLITE_STATIC);
    sqlite3_bind_double (stmt, 3, 2.5);
    sqlite3_bind_null   (stmt, 4);

    for each actual INSERTed row now the SQL engine will just
    replace the passed values into the requested ordinal positions.
    there is no further need to parse yet again the statement,
    and there is no type conversion at all, because the caller
    will now take full responsibility about passed values and
    corresponding data-types.
    by far less computations are involved, and this clearly
    explains why it's a much more effective approach.


> Could prepared statements make similar boost for saving spatial
> data into SQLite/Spatialite/GeoPackage?
>

surely yes: e.g. continuously converting back and forth from WKT/WKB
to the internal binary BLOB format certainly imposes a rather heavy
computational load.
directly passing binary BLOB geometries ensures better performances,
has a narrowest memory footprint and fully preserves numeric
precision thus completely avoiding any rounding/truncation.


> Or does GDAL SQLite/Spatialite driver already utilize them?
>

Even already answered to this question: yes.
I can simply add that both SpatiaLite itself and the QGIS/spatialite
data-provider widely adopt the faster "prepared statements" approach
whenever is possible.

bye Sandro

From ridgewang at gmail.com  Mon Mar 10 06:11:18 2014
From: ridgewang at gmail.com (ridgewang)
Date: Mon, 10 Mar 2014 21:11:18 +0800
Subject: [gdal-dev] gdal_merge.py can not work
In-Reply-To: <CAMKgpObx-8vPzyNdKoFckUTez1O4y7DuYZxWmb5c5Y1+9ci22Q@mail.gmail.com>
References: <0B573F0E-B2D8-425C-97A3-BDAC61C4A402@gmail.com>
	<CAMKgpObx-8vPzyNdKoFckUTez1O4y7DuYZxWmb5c5Y1+9ci22Q@mail.gmail.com>
Message-ID: <003BB460-54BA-4333-8D4B-92E81380FCE4@gmail.com>

I run the echo %pythonpath% and it displays the right directions. And I add the system python direction before the gdal python direction, it still reports the same error. I installed by run the gdal-1.10.1.win32-py2.7.msi.

???? iPhone

? 2014-3-10?14:13?Chaitanya kumar CH <chaitanya.ch at gmail.com> ???

> Ridge,
> 
> How did you install GDAL?
> This usually happens when python cannot find the gdal libraries. Setting PYTHONPATH env variable may help.
> 
> 
> On Mon, Mar 10, 2014 at 10:17 AM, ridgewang <ridgewang at gmail.com> wrote:
> Hi,
>      I want to use gdal_merge.py to merge two image files. But it reports cannot load _gdal library and %1 is not     a valid win32 module. Here the %1 means the _gdal, maybe.  In python CUI, I run 'import osgeo.gdal' or 'import gdal' command, it reports the same error information.
>      I use gdal 1.10.1 1400(vc2005) win32 version on win7 64bit OS, and the python version is 2.76.
>     Any suggestions is appreciated.
> 
> Ridge
> 
> 
> 
> ???? iPhone
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> -- 
> Best regards,
> Chaitanya kumar CH.
> 
> +91-9494447584
> 17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140310/51e45e69/attachment.html>

From deshpande.gh at gmail.com  Mon Mar 10 06:17:01 2014
From: deshpande.gh at gmail.com (Girish Deshpande)
Date: Mon, 10 Mar 2014 18:47:01 +0530
Subject: [gdal-dev] regarding s57 colour codes
Message-ID: <CAJXNG3LdCx1PtdEnW9C3WDxZqf4=Uz+6QSfzQZ2jP0Kuf71i7A@mail.gmail.com>

Hello,

I am able to render s57 chart in my application using gdal, i am finding
difficulty in filling the areas with specific colors.
please help me in this regards.

-- 
Thanks & Regards,
Girish Deshpande
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140310/ebca5b28/attachment.html>

From andre.vautour at caris.com  Mon Mar 10 07:52:58 2014
From: andre.vautour at caris.com (Andre Vautour)
Date: Mon, 10 Mar 2014 11:52:58 -0300
Subject: [gdal-dev] ECW proctocol proxy
Message-ID: <531DD1CA.4050602@caris.com>

Hi all,

Is there a way to configure the proxy for opening data through the ECW 
protocol with the ECW driver. For WCS/WMS, I know you can use the 
GDAL_HTTP_PROXY configuration option, but that doesn't seem to work for ECW.

Would it make sense to have something like the following in the ECW driver?
     proxy = CPLGetConfigOption("GDAL_HTTP_PROXY", "");
     NCSecwSetConfig(NCSCFG_ECWP_PROXY, proxy);

Andr?

From even.rouault at mines-paris.org  Mon Mar 10 08:38:44 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 10 Mar 2014 16:38:44 +0100
Subject: [gdal-dev] ECW proctocol proxy
In-Reply-To: <531DD1CA.4050602@caris.com>
References: <531DD1CA.4050602@caris.com>
Message-ID: <1394465924.531ddc840b03a@imp.free.fr>

Andr?,

If you've tested that successfully, you could create a patch in Trac with that.

Should rather be something like :

proxy = CPLGetConfigOption("GDAL_HTTP_PROXY", NULL);
if( proxy != NULL )
    NCSecwSetConfig(NCSCFG_ECWP_PROXY, proxy);

Even

> Hi all,
>
> Is there a way to configure the proxy for opening data through the ECW
> protocol with the ECW driver. For WCS/WMS, I know you can use the
> GDAL_HTTP_PROXY configuration option, but that doesn't seem to work for ECW.
>
> Would it make sense to have something like the following in the ECW driver?
>      proxy = CPLGetConfigOption("GDAL_HTTP_PROXY", "");
>      NCSecwSetConfig(NCSCFG_ECWP_PROXY, proxy);
>
> Andr?
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From jonathanmoules at warwickshire.gov.uk  Mon Mar 10 10:25:50 2014
From: jonathanmoules at warwickshire.gov.uk (Jonathan Moules)
Date: Mon, 10 Mar 2014 17:25:50 +0000
Subject: [gdal-dev] Extra Decimal places added to ASCII gdal_translate
	mosaic
In-Reply-To: <CAA-xNcWwsiB0iP2d7mpv6vavRp5_0BQLQx8Ysr2JdGupo=fo8Q@mail.gmail.com>
References: <CAA-xNcWK8NLi8XfVok2KBNMLDrFzBR3XjZDXvjpDzEx93-fEQQ@mail.gmail.com>
	<254ABF1B-937A-4047-BCE6-2090AA764C3A@cape.com>
	<CAA-xNcWwsiB0iP2d7mpv6vavRp5_0BQLQx8Ysr2JdGupo=fo8Q@mail.gmail.com>
Message-ID: <CAA-xNcXO1P-AEU6v4jXE+MpFg4FFTSEKQqcQ0SWktNzRjOe5HQ@mail.gmail.com>

Hi List,
Bringing back an old thread but with a slight change.

I'm now trying to get GDAL to mosaic and export from the ASCII files to a
GeoTIFF.
But the GeoTIFF writer in GDAL is doing the exact same thing as the ASCII
writer was - it's taking *50.597* (source value) and converting it into
something like *50.596895342423*.

I've tried using both gdal_merge and going via a VRT (gdalbuildvrt -
gdal_translate). The result is the same.

I also tried the *DECIMAL_PRECISION* trick, but gdal informs me:

> Warning 6: Driver GTiff does not support DECIMAL_PRECISION creation option


How do I get GDAL to merge these into a GeoTIFF without altering the data?

Thanks,
Jonathan

On 24 January 2014 16:12, Jonathan Moules <
jonathanmoules at warwickshire.gov.uk> wrote:

> Thanks Norman. I'd already seen that page but failed to read it!
> However, having tested it, it's not functioning as the manual says.
>
> As best I can tell, DECIMAL_PRECISION=3 should give me 3 decimal places.
> But what it instead does it give me 3 significant figures. So 98.354 has
> become 98.3.
> This becomes a problem because many of my heights are hovering around 100.
> So some will either have to be 1 character too long to ensure no data loss
> for the rest.
>
> Is this a bug? The documentation on the page linked to is quite clear it
> should be decimal places.
>
> Less of an issue, but it also didn't make any difference to:
>
>> xllcorner    432000.000000000000
>> yllcorner    242000.000000000000
>> cellsize     2.000000000000
>
>
> GDAL 1.10.1, released 2013/08/26
>
>
> Cheers,
> Jonathan
>
>
>
>
> On 24 January 2014 15:11, Norman Vine <nhv at cape.com> wrote:
>
>> try
>>
>> gdal_translate -of AAIGrid -co DECIMAL_PRECISION=3  abc.vrt abc.asc
>>
>> see http://www.gdal.org/frmt_various.html
>> HTH
>> Norman
>>
>> On Jan 24, 2014, at 10:01 AM, Jonathan Moules <
>> jonathanmoules at warwickshire.gov.uk> wrote:
>>
>> Hi List,
>> I'm trying to mosaic some ASCII grid tiles into a single large ASCII file
>> (which can then easily be handled).
>>
>> I'm using this process:
>>
>>> REM Create list of files
>>> dir /b /s *.asc > asc_list.txt
>>>
>>
>>
>>> REM Turn into VRT
>>> gdalbuildvrt -srcnodata "-9999" -vrtnodata "0" -a_srs "EPSG:27700"
>>> -input_file_list "asc_list.txt" abc.vrt
>>>
>>
>>
>>> REM actual mosaicing
>>> gdal_translate -of AAIGrid abc.vrt abc.asc
>>
>>
>> The input files are like:
>>
>>> ncols         500
>>> nrows         500
>>> xllcorner     432000.000
>>> yllcorner     243000.000
>>> cellsize      2
>>> nodata_value  -9999.0
>>> 98.354 98.449 98.658 98.874 99.038 99.096
>>
>>
>> But the outputs are like:
>>
>> fncols        500
>>> nrows        1000
>>> xllcorner    432000.000000000000
>>> yllcorner    242000.000000000000
>>> cellsize     2.000000000000
>>> NODATA_value  0
>>>  98.353996276855469 98.448997497558594 98.657997131347656
>>> 98.874000549316406
>>
>>
>> Suddenly everything has a dozen extra decimal places. Not only does this
>> induce the False Precision problem (we don't have heights to the
>> femtometer!), it also massively increases the filesize.
>>
>> How can I get this to not happen?
>>
>> Thanks,
>> Jonathan
>>
>>
>> This transmission is intended for the named addressee(s) only and may
>> contain sensitive or protectively marked material up to RESTRICTED and
>> should be handled accordingly. Unless you are the named addressee (or
>> authorised to receive it for the addressee) you may not copy or use it, or
>> disclose it to anyone else. If you have received this transmission in error
>> please notify the sender immediately. All email traffic sent to or from us,
>> including without limitation all GCSX traffic, may be subject to recording
>> and/or monitoring in accordance with relevant legislation.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>

-- 
This transmission is intended for the named addressee(s) only and may 
contain sensitive or protectively marked material up to RESTRICTED and 
should be handled accordingly. Unless you are the named addressee (or 
authorised to receive it for the addressee) you may not copy or use it, or 
disclose it to anyone else. If you have received this transmission in error 
please notify the sender immediately. All email traffic sent to or from us, 
including without limitation all GCSX traffic, may be subject to recording 
and/or monitoring in accordance with relevant legislation.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140310/9bf6f967/attachment-0001.html>

From jorgearevalo at libregis.org  Mon Mar 10 10:38:03 2014
From: jorgearevalo at libregis.org (Jorge Arevalo)
Date: Mon, 10 Mar 2014 18:38:03 +0100
Subject: [gdal-dev] CartoDB driver fail because drop sequence sentence
	fails
In-Reply-To: <201403062005.21510.even.rouault@mines-paris.org>
References: <CAMhtMNNLgZv-V1Aothj5c3NO1cV2EOzG60Gh-C58diLijvb3EA@mail.gmail.com>
	<201403062005.21510.even.rouault@mines-paris.org>
Message-ID: <CAMhtMNNdFQfHuMFuojMbZ96kT=_aN4CdWhY+bBSQJ1pjqtLk9Q@mail.gmail.com>

Hello,

On Thu, Mar 6, 2014 at 8:05 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Le jeudi 06 mars 2014 18:45:50, Jorge Arevalo a ?crit :
>> Hello,
>>
>> I'm trying to create a new table in CartoDB using the GDAL CartoDB
>> driver and Python bindings. I'm getting a HTTP 400 error.
>>
>> This is the source code:
>>
>> from osgeo import ogr
>> from osgeo import gdal
>>
>> gdal.SetConfigOption("CARTODB_API_KEY", MY_API_KEY)
>> drv = ogr.GetDriverByName("CartoDB")
>> cartodb_ds = drv.Open('cartodb:%s' % MY_ACCOUNT_NAME, update=1)
>> if cartodb_ds is None:
>>     print 'Cannot open CartoDB connection for writing'
>>
>> cartodb_layer = cartodb_ds.CreateLayer('my_layer',
>> geom_type=ogr.wkbMultiPolygon)
>>
>>
>> Activating debug, this is what the driver sends to CartoDB:
>>
>> q=CREATE TABLE "my_layer" ( cartodb_id SERIAL, the_geom
>> GEOMETRY(MULTIPOLYGON, 0), the_geom_webmercator GEOMETRY(MULTIPOLYGON,
>> 3857),PRIMARY KEY (cartodb_id) );DROP SEQUENCE IF EXISTS
>> "my_layer_cartodb_id_seq";CREATE SEQUENCE "my_layer_cartodb_id_seq"
>> START 1;ALTER TABLE my_layer ALTER COLUMN cartodb_id SET DEFAULT
>> nextval('my_layer_cartodb_id_seq')&api_key=1f1464a7f041a39568046b858af425ab
>> ab4fefc6
>>
>>
>> And the response error message (HTTP error 400):
>>
>> CARTODB: RunSQL Response:{"error":["cannot drop sequence
>> my_layer_cartodb_id_seq because other objects depend on it"]}
>
> Perhaps use DROP CASCADE intead of DROP ?
> Feel free to modify the driver.
>

I'm waiting until CartoDB team solves this issue:
https://github.com/CartoDB/cartodb/issues/115, because the tables
created via driver won't appear in the Dashboard, and I need them to
appear.

Thanks anyway!

>>
>> If I get rid of all the SQL after the create table sentence itself, it
>> works, and the table is created. I guess I could modify the driver to
>> avoid this, but I'd like to know if someone is using it and having
>> this problem.
>>
>> BTW, the tables created via SQL API don't appear in the CartoDB
>> dashboard, but this is a known issue (
>> https://github.com/CartoDB/cartodb/issues/115)
>>
>> Best regards,
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html



-- 
Jorge Arevalo
Freelance developer

http://about.me/jorgeas80

From etourigny.dev at gmail.com  Mon Mar 10 10:49:22 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 10 Mar 2014 14:49:22 -0300
Subject: [gdal-dev] Extra Decimal places added to ASCII gdal_translate
	mosaic
In-Reply-To: <CAA-xNcXO1P-AEU6v4jXE+MpFg4FFTSEKQqcQ0SWktNzRjOe5HQ@mail.gmail.com>
References: <CAA-xNcWK8NLi8XfVok2KBNMLDrFzBR3XjZDXvjpDzEx93-fEQQ@mail.gmail.com>
	<254ABF1B-937A-4047-BCE6-2090AA764C3A@cape.com>
	<CAA-xNcWwsiB0iP2d7mpv6vavRp5_0BQLQx8Ysr2JdGupo=fo8Q@mail.gmail.com>
	<CAA-xNcXO1P-AEU6v4jXE+MpFg4FFTSEKQqcQ0SWktNzRjOe5HQ@mail.gmail.com>
Message-ID: <CA+TxYvOzpqM_arvLDtvwD78yMYjKMYdm0xNWiuM5fUssqE6BPw@mail.gmail.com>

Have you tried using a 36bit (float) instead of 64bit (double) output?
 double is usually the default output type and has more significant digits
(~16) than your source, so it's representation is "ok" in double format

see [1] for an explanation on floating-point precision

the following argument would do this "-ot Float32"

[1] http://en.wikipedia.org/wiki/Floating_point

Etienne


On Mon, Mar 10, 2014 at 2:25 PM, Jonathan Moules <
jonathanmoules at warwickshire.gov.uk> wrote:

> Hi List,
> Bringing back an old thread but with a slight change.
>
> I'm now trying to get GDAL to mosaic and export from the ASCII files to a
> GeoTIFF.
> But the GeoTIFF writer in GDAL is doing the exact same thing as the ASCII
> writer was - it's taking *50.597* (source value) and converting it into
> something like *50.596895342423*.
>
> I've tried using both gdal_merge and going via a VRT (gdalbuildvrt -
> gdal_translate). The result is the same.
>
> I also tried the *DECIMAL_PRECISION* trick, but gdal informs me:
>
>> Warning 6: Driver GTiff does not support DECIMAL_PRECISION creation option
>
>
> How do I get GDAL to merge these into a GeoTIFF without altering the data?
>
> Thanks,
> Jonathan
>
>
> On 24 January 2014 16:12, Jonathan Moules <
> jonathanmoules at warwickshire.gov.uk> wrote:
>
>> Thanks Norman. I'd already seen that page but failed to read it!
>> However, having tested it, it's not functioning as the manual says.
>>
>> As best I can tell, DECIMAL_PRECISION=3 should give me 3 decimal places.
>> But what it instead does it give me 3 significant figures. So 98.354 has
>> become 98.3.
>> This becomes a problem because many of my heights are hovering around
>> 100. So some will either have to be 1 character too long to ensure no data
>> loss for the rest.
>>
>> Is this a bug? The documentation on the page linked to is quite clear it
>> should be decimal places.
>>
>> Less of an issue, but it also didn't make any difference to:
>>
>>> xllcorner    432000.000000000000
>>> yllcorner    242000.000000000000
>>> cellsize     2.000000000000
>>
>>
>> GDAL 1.10.1, released 2013/08/26
>>
>>
>> Cheers,
>> Jonathan
>>
>>
>>
>>
>> On 24 January 2014 15:11, Norman Vine <nhv at cape.com> wrote:
>>
>>> try
>>>
>>> gdal_translate -of AAIGrid -co DECIMAL_PRECISION=3  abc.vrt abc.asc
>>>
>>> see http://www.gdal.org/frmt_various.html
>>> HTH
>>> Norman
>>>
>>> On Jan 24, 2014, at 10:01 AM, Jonathan Moules <
>>> jonathanmoules at warwickshire.gov.uk> wrote:
>>>
>>> Hi List,
>>> I'm trying to mosaic some ASCII grid tiles into a single large ASCII
>>> file (which can then easily be handled).
>>>
>>> I'm using this process:
>>>
>>>> REM Create list of files
>>>> dir /b /s *.asc > asc_list.txt
>>>>
>>>
>>>
>>>> REM Turn into VRT
>>>> gdalbuildvrt -srcnodata "-9999" -vrtnodata "0" -a_srs "EPSG:27700"
>>>> -input_file_list "asc_list.txt" abc.vrt
>>>>
>>>
>>>
>>>> REM actual mosaicing
>>>> gdal_translate -of AAIGrid abc.vrt abc.asc
>>>
>>>
>>> The input files are like:
>>>
>>>> ncols         500
>>>> nrows         500
>>>> xllcorner     432000.000
>>>> yllcorner     243000.000
>>>> cellsize      2
>>>> nodata_value  -9999.0
>>>> 98.354 98.449 98.658 98.874 99.038 99.096
>>>
>>>
>>> But the outputs are like:
>>>
>>> fncols        500
>>>> nrows        1000
>>>> xllcorner    432000.000000000000
>>>> yllcorner    242000.000000000000
>>>> cellsize     2.000000000000
>>>> NODATA_value  0
>>>>  98.353996276855469 98.448997497558594 98.657997131347656
>>>> 98.874000549316406
>>>
>>>
>>> Suddenly everything has a dozen extra decimal places. Not only does this
>>> induce the False Precision problem (we don't have heights to the
>>> femtometer!), it also massively increases the filesize.
>>>
>>> How can I get this to not happen?
>>>
>>> Thanks,
>>> Jonathan
>>>
>>>
>>> This transmission is intended for the named addressee(s) only and may
>>> contain sensitive or protectively marked material up to RESTRICTED and
>>> should be handled accordingly. Unless you are the named addressee (or
>>> authorised to receive it for the addressee) you may not copy or use it, or
>>> disclose it to anyone else. If you have received this transmission in error
>>> please notify the sender immediately. All email traffic sent to or from us,
>>> including without limitation all GCSX traffic, may be subject to recording
>>> and/or monitoring in accordance with relevant legislation.
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>>
>>
>
> This transmission is intended for the named addressee(s) only and may
> contain sensitive or protectively marked material up to RESTRICTED and
> should be handled accordingly. Unless you are the named addressee (or
> authorised to receive it for the addressee) you may not copy or use it, or
> disclose it to anyone else. If you have received this transmission in error
> please notify the sender immediately. All email traffic sent to or from us,
> including without limitation all GCSX traffic, may be subject to recording
> and/or monitoring in accordance with relevant legislation.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140310/56755b25/attachment.html>

From jonathanmoules at warwickshire.gov.uk  Mon Mar 10 10:55:36 2014
From: jonathanmoules at warwickshire.gov.uk (Jonathan Moules)
Date: Mon, 10 Mar 2014 17:55:36 +0000
Subject: [gdal-dev] Extra Decimal places added to ASCII gdal_translate
	mosaic
In-Reply-To: <CA+TxYvOzpqM_arvLDtvwD78yMYjKMYdm0xNWiuM5fUssqE6BPw@mail.gmail.com>
References: <CAA-xNcWK8NLi8XfVok2KBNMLDrFzBR3XjZDXvjpDzEx93-fEQQ@mail.gmail.com>
	<254ABF1B-937A-4047-BCE6-2090AA764C3A@cape.com>
	<CAA-xNcWwsiB0iP2d7mpv6vavRp5_0BQLQx8Ysr2JdGupo=fo8Q@mail.gmail.com>
	<CAA-xNcXO1P-AEU6v4jXE+MpFg4FFTSEKQqcQ0SWktNzRjOe5HQ@mail.gmail.com>
	<CA+TxYvOzpqM_arvLDtvwD78yMYjKMYdm0xNWiuM5fUssqE6BPw@mail.gmail.com>
Message-ID: <CAA-xNcW_w_EdY4Y_hKR3i52rt1pi3V2RLkukqdg7hM6n4adzdw@mail.gmail.com>

Hi Etienne,
I was looking for something like that but the
http://www.gdal.org/frmt_gtiff.html page didn't list it explicitly.

That said, looking at the gdalinfo now (a little late) I see that it's
already defaulting to Float32. I also tested with the "-ot Float32"
arguement, but there was no change. I'm counting 16 significant figures; I
only want 5 or 6.

Cheers,
Jonathan



On 10 March 2014 17:49, Etienne Tourigny <etourigny.dev at gmail.com> wrote:

> Have you tried using a 36bit (float) instead of 64bit (double) output?
>  double is usually the default output type and has more significant digits
> (~16) than your source, so it's representation is "ok" in double format
>
> see [1] for an explanation on floating-point precision
>
> the following argument would do this "-ot Float32"
>
> [1] http://en.wikipedia.org/wiki/Floating_point
>
> Etienne
>
>
> On Mon, Mar 10, 2014 at 2:25 PM, Jonathan Moules <
> jonathanmoules at warwickshire.gov.uk> wrote:
>
>> Hi List,
>> Bringing back an old thread but with a slight change.
>>
>> I'm now trying to get GDAL to mosaic and export from the ASCII files to a
>> GeoTIFF.
>> But the GeoTIFF writer in GDAL is doing the exact same thing as the ASCII
>> writer was - it's taking *50.597* (source value) and converting it into
>> something like *50.596895342423*.
>>
>> I've tried using both gdal_merge and going via a VRT (gdalbuildvrt -
>> gdal_translate). The result is the same.
>>
>> I also tried the *DECIMAL_PRECISION* trick, but gdal informs me:
>>
>>> Warning 6: Driver GTiff does not support DECIMAL_PRECISION creation
>>> option
>>
>>
>> How do I get GDAL to merge these into a GeoTIFF without altering the data?
>>
>> Thanks,
>> Jonathan
>>
>>
>> On 24 January 2014 16:12, Jonathan Moules <
>> jonathanmoules at warwickshire.gov.uk> wrote:
>>
>>> Thanks Norman. I'd already seen that page but failed to read it!
>>> However, having tested it, it's not functioning as the manual says.
>>>
>>> As best I can tell, DECIMAL_PRECISION=3 should give me 3 decimal places.
>>> But what it instead does it give me 3 significant figures. So 98.354 has
>>> become 98.3.
>>> This becomes a problem because many of my heights are hovering around
>>> 100. So some will either have to be 1 character too long to ensure no data
>>> loss for the rest.
>>>
>>> Is this a bug? The documentation on the page linked to is quite clear it
>>> should be decimal places.
>>>
>>> Less of an issue, but it also didn't make any difference to:
>>>
>>>> xllcorner    432000.000000000000
>>>> yllcorner    242000.000000000000
>>>> cellsize     2.000000000000
>>>
>>>
>>> GDAL 1.10.1, released 2013/08/26
>>>
>>>
>>> Cheers,
>>> Jonathan
>>>
>>>
>>>
>>>
>>> On 24 January 2014 15:11, Norman Vine <nhv at cape.com> wrote:
>>>
>>>> try
>>>>
>>>> gdal_translate -of AAIGrid -co DECIMAL_PRECISION=3  abc.vrt abc.asc
>>>>
>>>> see http://www.gdal.org/frmt_various.html
>>>> HTH
>>>> Norman
>>>>
>>>> On Jan 24, 2014, at 10:01 AM, Jonathan Moules <
>>>> jonathanmoules at warwickshire.gov.uk> wrote:
>>>>
>>>> Hi List,
>>>> I'm trying to mosaic some ASCII grid tiles into a single large ASCII
>>>> file (which can then easily be handled).
>>>>
>>>> I'm using this process:
>>>>
>>>>> REM Create list of files
>>>>> dir /b /s *.asc > asc_list.txt
>>>>>
>>>>
>>>>
>>>>> REM Turn into VRT
>>>>> gdalbuildvrt -srcnodata "-9999" -vrtnodata "0" -a_srs "EPSG:27700"
>>>>> -input_file_list "asc_list.txt" abc.vrt
>>>>>
>>>>
>>>>
>>>>> REM actual mosaicing
>>>>> gdal_translate -of AAIGrid abc.vrt abc.asc
>>>>
>>>>
>>>> The input files are like:
>>>>
>>>>> ncols         500
>>>>> nrows         500
>>>>> xllcorner     432000.000
>>>>> yllcorner     243000.000
>>>>> cellsize      2
>>>>> nodata_value  -9999.0
>>>>> 98.354 98.449 98.658 98.874 99.038 99.096
>>>>
>>>>
>>>> But the outputs are like:
>>>>
>>>> fncols        500
>>>>> nrows        1000
>>>>> xllcorner    432000.000000000000
>>>>> yllcorner    242000.000000000000
>>>>> cellsize     2.000000000000
>>>>> NODATA_value  0
>>>>>  98.353996276855469 98.448997497558594 98.657997131347656
>>>>> 98.874000549316406
>>>>
>>>>
>>>> Suddenly everything has a dozen extra decimal places. Not only does
>>>> this induce the False Precision problem (we don't have heights to the
>>>> femtometer!), it also massively increases the filesize.
>>>>
>>>> How can I get this to not happen?
>>>>
>>>> Thanks,
>>>> Jonathan
>>>>
>>>>
>>>> This transmission is intended for the named addressee(s) only and may
>>>> contain sensitive or protectively marked material up to RESTRICTED and
>>>> should be handled accordingly. Unless you are the named addressee (or
>>>> authorised to receive it for the addressee) you may not copy or use it, or
>>>> disclose it to anyone else. If you have received this transmission in error
>>>> please notify the sender immediately. All email traffic sent to or from us,
>>>> including without limitation all GCSX traffic, may be subject to recording
>>>> and/or monitoring in accordance with relevant legislation.
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>>
>>>>
>>>
>>
>> This transmission is intended for the named addressee(s) only and may
>> contain sensitive or protectively marked material up to RESTRICTED and
>> should be handled accordingly. Unless you are the named addressee (or
>> authorised to receive it for the addressee) you may not copy or use it, or
>> disclose it to anyone else. If you have received this transmission in error
>> please notify the sender immediately. All email traffic sent to or from us,
>> including without limitation all GCSX traffic, may be subject to recording
>> and/or monitoring in accordance with relevant legislation.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>

-- 
This transmission is intended for the named addressee(s) only and may 
contain sensitive or protectively marked material up to RESTRICTED and 
should be handled accordingly. Unless you are the named addressee (or 
authorised to receive it for the addressee) you may not copy or use it, or 
disclose it to anyone else. If you have received this transmission in error 
please notify the sender immediately. All email traffic sent to or from us, 
including without limitation all GCSX traffic, may be subject to recording 
and/or monitoring in accordance with relevant legislation.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140310/a2c6ce0f/attachment-0001.html>

From even.rouault at mines-paris.org  Mon Mar 10 12:21:22 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 10 Mar 2014 20:21:22 +0100
Subject: [gdal-dev] Extra Decimal places added to ASCII gdal_translate
	mosaic
In-Reply-To: <CAA-xNcW_w_EdY4Y_hKR3i52rt1pi3V2RLkukqdg7hM6n4adzdw@mail.gmail.com>
References: <CAA-xNcWK8NLi8XfVok2KBNMLDrFzBR3XjZDXvjpDzEx93-fEQQ@mail.gmail.com>
	<CA+TxYvOzpqM_arvLDtvwD78yMYjKMYdm0xNWiuM5fUssqE6BPw@mail.gmail.com>
	<CAA-xNcW_w_EdY4Y_hKR3i52rt1pi3V2RLkukqdg7hM6n4adzdw@mail.gmail.com>
Message-ID: <201403102021.22822.even.rouault@mines-paris.org>

Le lundi 10 mars 2014 18:55:36, Jonathan Moules a ?crit :
> Hi Etienne,
> I was looking for something like that but the
> http://www.gdal.org/frmt_gtiff.html page didn't list it explicitly.
> 
> That said, looking at the gdalinfo now (a little late) I see that it's
> already defaulting to Float32. I also tested with the "-ot Float32"
> arguement, but there was no change. I'm counting 16 significant figures; I
> only want 5 or 6.

TIFF stores floating point values as IEEE754 floats. Talking about significant 
figures doesn't make much sense. You could test using Float64 with the hope 
that 50.597 can be exactly represented as a Float64. Otherwise you'll have to 
do the rounding when reading back from TIFF.

> 
> Cheers,
> Jonathan
> 
> On 10 March 2014 17:49, Etienne Tourigny <etourigny.dev at gmail.com> wrote:
> > Have you tried using a 36bit (float) instead of 64bit (double) output?
> > 
> >  double is usually the default output type and has more significant
> >  digits
> > 
> > (~16) than your source, so it's representation is "ok" in double format
> > 
> > see [1] for an explanation on floating-point precision
> > 
> > the following argument would do this "-ot Float32"
> > 
> > [1] http://en.wikipedia.org/wiki/Floating_point
> > 
> > Etienne
> > 
> > 
> > On Mon, Mar 10, 2014 at 2:25 PM, Jonathan Moules <
> > 
> > jonathanmoules at warwickshire.gov.uk> wrote:
> >> Hi List,
> >> Bringing back an old thread but with a slight change.
> >> 
> >> I'm now trying to get GDAL to mosaic and export from the ASCII files to
> >> a GeoTIFF.
> >> But the GeoTIFF writer in GDAL is doing the exact same thing as the
> >> ASCII writer was - it's taking *50.597* (source value) and converting
> >> it into something like *50.596895342423*.
> >> 
> >> I've tried using both gdal_merge and going via a VRT (gdalbuildvrt -
> >> gdal_translate). The result is the same.
> >> 
> >> I also tried the *DECIMAL_PRECISION* trick, but gdal informs me:
> >>> Warning 6: Driver GTiff does not support DECIMAL_PRECISION creation
> >>> option
> >> 
> >> How do I get GDAL to merge these into a GeoTIFF without altering the
> >> data?
> >> 
> >> Thanks,
> >> Jonathan
> >> 
> >> 
> >> On 24 January 2014 16:12, Jonathan Moules <
> >> 
> >> jonathanmoules at warwickshire.gov.uk> wrote:
> >>> Thanks Norman. I'd already seen that page but failed to read it!
> >>> However, having tested it, it's not functioning as the manual says.
> >>> 
> >>> As best I can tell, DECIMAL_PRECISION=3 should give me 3 decimal
> >>> places. But what it instead does it give me 3 significant figures. So
> >>> 98.354 has become 98.3.
> >>> This becomes a problem because many of my heights are hovering around
> >>> 100. So some will either have to be 1 character too long to ensure no
> >>> data loss for the rest.
> >>> 
> >>> Is this a bug? The documentation on the page linked to is quite clear
> >>> it should be decimal places.
> >>> 
> >>> Less of an issue, but it also didn't make any difference to:
> >>>> xllcorner    432000.000000000000
> >>>> yllcorner    242000.000000000000
> >>>> cellsize     2.000000000000
> >>> 
> >>> GDAL 1.10.1, released 2013/08/26
> >>> 
> >>> 
> >>> Cheers,
> >>> Jonathan
> >>> 
> >>> On 24 January 2014 15:11, Norman Vine <nhv at cape.com> wrote:
> >>>> try
> >>>> 
> >>>> gdal_translate -of AAIGrid -co DECIMAL_PRECISION=3  abc.vrt abc.asc
> >>>> 
> >>>> see http://www.gdal.org/frmt_various.html
> >>>> HTH
> >>>> Norman
> >>>> 
> >>>> On Jan 24, 2014, at 10:01 AM, Jonathan Moules <
> >>>> jonathanmoules at warwickshire.gov.uk> wrote:
> >>>> 
> >>>> Hi List,
> >>>> I'm trying to mosaic some ASCII grid tiles into a single large ASCII
> >>>> file (which can then easily be handled).
> >>>> 
> >>>> I'm using this process:
> >>>>> REM Create list of files
> >>>>> dir /b /s *.asc > asc_list.txt
> >>>>> 
> >>>>> 
> >>>>> 
> >>>>> REM Turn into VRT
> >>>>> gdalbuildvrt -srcnodata "-9999" -vrtnodata "0" -a_srs "EPSG:27700"
> >>>>> -input_file_list "asc_list.txt" abc.vrt
> >>>>> 
> >>>>> 
> >>>>> 
> >>>>> REM actual mosaicing
> >>>>> gdal_translate -of AAIGrid abc.vrt abc.asc
> >>>> 
> >>>> The input files are like:
> >>>>> ncols         500
> >>>>> nrows         500
> >>>>> xllcorner     432000.000
> >>>>> yllcorner     243000.000
> >>>>> cellsize      2
> >>>>> nodata_value  -9999.0
> >>>>> 98.354 98.449 98.658 98.874 99.038 99.096
> >>>> 
> >>>> But the outputs are like:
> >>>> 
> >>>> fncols        500
> >>>> 
> >>>>> nrows        1000
> >>>>> xllcorner    432000.000000000000
> >>>>> yllcorner    242000.000000000000
> >>>>> cellsize     2.000000000000
> >>>>> NODATA_value  0
> >>>>> 
> >>>>>  98.353996276855469 98.448997497558594 98.657997131347656
> >>>>> 
> >>>>> 98.874000549316406
> >>>> 
> >>>> Suddenly everything has a dozen extra decimal places. Not only does
> >>>> this induce the False Precision problem (we don't have heights to the
> >>>> femtometer!), it also massively increases the filesize.
> >>>> 
> >>>> How can I get this to not happen?
> >>>> 
> >>>> Thanks,
> >>>> Jonathan
> >>>> 
> >>>> 
> >>>> This transmission is intended for the named addressee(s) only and may
> >>>> contain sensitive or protectively marked material up to RESTRICTED and
> >>>> should be handled accordingly. Unless you are the named addressee (or
> >>>> authorised to receive it for the addressee) you may not copy or use
> >>>> it, or disclose it to anyone else. If you have received this
> >>>> transmission in error please notify the sender immediately. All email
> >>>> traffic sent to or from us, including without limitation all GCSX
> >>>> traffic, may be subject to recording and/or monitoring in accordance
> >>>> with relevant legislation.
> >>>> _______________________________________________
> >>>> gdal-dev mailing list
> >>>> gdal-dev at lists.osgeo.org
> >>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >> 
> >> This transmission is intended for the named addressee(s) only and may
> >> contain sensitive or protectively marked material up to RESTRICTED and
> >> should be handled accordingly. Unless you are the named addressee (or
> >> authorised to receive it for the addressee) you may not copy or use it,
> >> or disclose it to anyone else. If you have received this transmission
> >> in error please notify the sender immediately. All email traffic sent
> >> to or from us, including without limitation all GCSX traffic, may be
> >> subject to recording and/or monitoring in accordance with relevant
> >> legislation.
> >> 
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From kyle at pobox.com  Mon Mar 10 12:46:20 2014
From: kyle at pobox.com (Kyle Shannon)
Date: Mon, 10 Mar 2014 13:46:20 -0600
Subject: [gdal-dev] Extra Decimal places added to ASCII gdal_translate
	mosaic
In-Reply-To: <201403102021.22822.even.rouault@mines-paris.org>
References: <CAA-xNcWK8NLi8XfVok2KBNMLDrFzBR3XjZDXvjpDzEx93-fEQQ@mail.gmail.com>
	<CA+TxYvOzpqM_arvLDtvwD78yMYjKMYdm0xNWiuM5fUssqE6BPw@mail.gmail.com>
	<CAA-xNcW_w_EdY4Y_hKR3i52rt1pi3V2RLkukqdg7hM6n4adzdw@mail.gmail.com>
	<201403102021.22822.even.rouault@mines-paris.org>
Message-ID: <CAJ0mEz3iNQ9UC=EQfYzr9uknw1_1AtZFsdmvwti_Ses5ExNdYw@mail.gmail.com>

Hi,
I restored DECIMAL_PRECISION and added SIGNIFICANT_DIGIT and also
reformatted the NODATA_value, although that may or may not be correct
as per Even's remarks.  See:

http://trac.osgeo.org/gdal/ticket/3732

for a review.

On Mon, Mar 10, 2014 at 1:21 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Le lundi 10 mars 2014 18:55:36, Jonathan Moules a ?crit :
>> Hi Etienne,
>> I was looking for something like that but the
>> http://www.gdal.org/frmt_gtiff.html page didn't list it explicitly.
>>
>> That said, looking at the gdalinfo now (a little late) I see that it's
>> already defaulting to Float32. I also tested with the "-ot Float32"
>> arguement, but there was no change. I'm counting 16 significant figures; I
>> only want 5 or 6.
>
> TIFF stores floating point values as IEEE754 floats. Talking about significant
> figures doesn't make much sense. You could test using Float64 with the hope
> that 50.597 can be exactly represented as a Float64. Otherwise you'll have to
> do the rounding when reading back from TIFF.
>
>>
>> Cheers,
>> Jonathan
>>
>> On 10 March 2014 17:49, Etienne Tourigny <etourigny.dev at gmail.com> wrote:
>> > Have you tried using a 36bit (float) instead of 64bit (double) output?
>> >
>> >  double is usually the default output type and has more significant
>> >  digits
>> >
>> > (~16) than your source, so it's representation is "ok" in double format
>> >
>> > see [1] for an explanation on floating-point precision
>> >
>> > the following argument would do this "-ot Float32"
>> >
>> > [1] http://en.wikipedia.org/wiki/Floating_point
>> >
>> > Etienne
>> >
>> >
>> > On Mon, Mar 10, 2014 at 2:25 PM, Jonathan Moules <
>> >
>> > jonathanmoules at warwickshire.gov.uk> wrote:
>> >> Hi List,
>> >> Bringing back an old thread but with a slight change.
>> >>
>> >> I'm now trying to get GDAL to mosaic and export from the ASCII files to
>> >> a GeoTIFF.
>> >> But the GeoTIFF writer in GDAL is doing the exact same thing as the
>> >> ASCII writer was - it's taking *50.597* (source value) and converting
>> >> it into something like *50.596895342423*.
>> >>
>> >> I've tried using both gdal_merge and going via a VRT (gdalbuildvrt -
>> >> gdal_translate). The result is the same.
>> >>
>> >> I also tried the *DECIMAL_PRECISION* trick, but gdal informs me:
>> >>> Warning 6: Driver GTiff does not support DECIMAL_PRECISION creation
>> >>> option
>> >>
>> >> How do I get GDAL to merge these into a GeoTIFF without altering the
>> >> data?
>> >>
>> >> Thanks,
>> >> Jonathan
>> >>
>> >>
>> >> On 24 January 2014 16:12, Jonathan Moules <
>> >>
>> >> jonathanmoules at warwickshire.gov.uk> wrote:
>> >>> Thanks Norman. I'd already seen that page but failed to read it!
>> >>> However, having tested it, it's not functioning as the manual says.
>> >>>
>> >>> As best I can tell, DECIMAL_PRECISION=3 should give me 3 decimal
>> >>> places. But what it instead does it give me 3 significant figures. So
>> >>> 98.354 has become 98.3.
>> >>> This becomes a problem because many of my heights are hovering around
>> >>> 100. So some will either have to be 1 character too long to ensure no
>> >>> data loss for the rest.
>> >>>
>> >>> Is this a bug? The documentation on the page linked to is quite clear
>> >>> it should be decimal places.
>> >>>
>> >>> Less of an issue, but it also didn't make any difference to:
>> >>>> xllcorner    432000.000000000000
>> >>>> yllcorner    242000.000000000000
>> >>>> cellsize     2.000000000000
>> >>>
>> >>> GDAL 1.10.1, released 2013/08/26
>> >>>
>> >>>
>> >>> Cheers,
>> >>> Jonathan
>> >>>
>> >>> On 24 January 2014 15:11, Norman Vine <nhv at cape.com> wrote:
>> >>>> try
>> >>>>
>> >>>> gdal_translate -of AAIGrid -co DECIMAL_PRECISION=3  abc.vrt abc.asc
>> >>>>
>> >>>> see http://www.gdal.org/frmt_various.html
>> >>>> HTH
>> >>>> Norman
>> >>>>
>> >>>> On Jan 24, 2014, at 10:01 AM, Jonathan Moules <
>> >>>> jonathanmoules at warwickshire.gov.uk> wrote:
>> >>>>
>> >>>> Hi List,
>> >>>> I'm trying to mosaic some ASCII grid tiles into a single large ASCII
>> >>>> file (which can then easily be handled).
>> >>>>
>> >>>> I'm using this process:
>> >>>>> REM Create list of files
>> >>>>> dir /b /s *.asc > asc_list.txt
>> >>>>>
>> >>>>>
>> >>>>>
>> >>>>> REM Turn into VRT
>> >>>>> gdalbuildvrt -srcnodata "-9999" -vrtnodata "0" -a_srs "EPSG:27700"
>> >>>>> -input_file_list "asc_list.txt" abc.vrt
>> >>>>>
>> >>>>>
>> >>>>>
>> >>>>> REM actual mosaicing
>> >>>>> gdal_translate -of AAIGrid abc.vrt abc.asc
>> >>>>
>> >>>> The input files are like:
>> >>>>> ncols         500
>> >>>>> nrows         500
>> >>>>> xllcorner     432000.000
>> >>>>> yllcorner     243000.000
>> >>>>> cellsize      2
>> >>>>> nodata_value  -9999.0
>> >>>>> 98.354 98.449 98.658 98.874 99.038 99.096
>> >>>>
>> >>>> But the outputs are like:
>> >>>>
>> >>>> fncols        500
>> >>>>
>> >>>>> nrows        1000
>> >>>>> xllcorner    432000.000000000000
>> >>>>> yllcorner    242000.000000000000
>> >>>>> cellsize     2.000000000000
>> >>>>> NODATA_value  0
>> >>>>>
>> >>>>>  98.353996276855469 98.448997497558594 98.657997131347656
>> >>>>>
>> >>>>> 98.874000549316406
>> >>>>
>> >>>> Suddenly everything has a dozen extra decimal places. Not only does
>> >>>> this induce the False Precision problem (we don't have heights to the
>> >>>> femtometer!), it also massively increases the filesize.
>> >>>>
>> >>>> How can I get this to not happen?
>> >>>>
>> >>>> Thanks,
>> >>>> Jonathan
>> >>>>
>> >>>>
>> >>>> This transmission is intended for the named addressee(s) only and may
>> >>>> contain sensitive or protectively marked material up to RESTRICTED and
>> >>>> should be handled accordingly. Unless you are the named addressee (or
>> >>>> authorised to receive it for the addressee) you may not copy or use
>> >>>> it, or disclose it to anyone else. If you have received this
>> >>>> transmission in error please notify the sender immediately. All email
>> >>>> traffic sent to or from us, including without limitation all GCSX
>> >>>> traffic, may be subject to recording and/or monitoring in accordance
>> >>>> with relevant legislation.
>> >>>> _______________________________________________
>> >>>> gdal-dev mailing list
>> >>>> gdal-dev at lists.osgeo.org
>> >>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >>
>> >> This transmission is intended for the named addressee(s) only and may
>> >> contain sensitive or protectively marked material up to RESTRICTED and
>> >> should be handled accordingly. Unless you are the named addressee (or
>> >> authorised to receive it for the addressee) you may not copy or use it,
>> >> or disclose it to anyone else. If you have received this transmission
>> >> in error please notify the sender immediately. All email traffic sent
>> >> to or from us, including without limitation all GCSX traffic, may be
>> >> subject to recording and/or monitoring in accordance with relevant
>> >> legislation.
>> >>
>> >> _______________________________________________
>> >> gdal-dev mailing list
>> >> gdal-dev at lists.osgeo.org
>> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Kyle

From jorgearevalo at libregis.org  Mon Mar 10 15:32:58 2014
From: jorgearevalo at libregis.org (Jorge Arevalo)
Date: Mon, 10 Mar 2014 23:32:58 +0100
Subject: [gdal-dev] Recommended strategy to handle MIF file with a few big
	multipolygons
Message-ID: <CAMhtMNMfuo9Fmf=E7Eo_WgESySx1V+opLknqWPhBtMUjkW3_uQ@mail.gmail.com>

Hello,

I'm working with a MIF file, contaning just 5 multipolygons (in form
of "regions", in MapInfo terms). But the file weights 700MB. So, the
multipolygons are really big. I'd like to transform my file to SHP or
PostGIS using ogr2ogr, but any operation takes forever.

My current approach is to use -sql flag this way:

ogr2ogr -sql "select * from my_layer where fid = 1" my_layer.shp my_layer.mif

But after 2 hours, it still continues working. I've activated debug,
and last text I've seen is: "Shape: Treating as encoding
'ISO-8859-1'."

All the clip operations I've tried with ogr2ogr have the same
problems: I have to wait hours, and after that, I just get a SHP of
100 Bytes. So, I kill the process.

Should I be more patient? Or is there any smarter approach to handle
this kind of file?

Best regards,

-- 
Jorge Arevalo
Freelance developer

http://about.me/jorgeas80

From zoltans at geograph.co.za  Mon Mar 10 15:39:34 2014
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Tue, 11 Mar 2014 00:39:34 +0200
Subject: [gdal-dev] Field width when converting MID-MIF to SHP
Message-ID: <531E3F26.9070701@geograph.co.za>

Hi OGRers,
(Would that be pronounced "ogres" ?  :-)  )

I need to create _a lot_ of blank SHP files with schemas that I 
currently have in CSV files.

(For me) the easiest way is to create a script that reads the CSV files 
and generates  empty (geometry wise) Mapinfo MID-MIF filesets.
I then use ogr2ogr to batch convert these into empty shapefiles that 
have the correct attribute schema.

But!

In the MIF file I can say "character 36", or Decimal 6,0 or Real.
Can I get any reassurance that the resulting DBF file will contain the 
36 char length character field?
If I look at the table schema in QGIS, I do not know how wide the 
attribute field is.

Likewise for integer and real data types, I need to also nail down the 
field widths.

Thanks in advance,
Zoltan


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Service

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323www.geograph.co.za
===========================================

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140311/bf037a48/attachment.html>

From even.rouault at mines-paris.org  Mon Mar 10 16:05:06 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 11 Mar 2014 00:05:06 +0100
Subject: [gdal-dev] Recommended strategy to handle MIF file with a few
	big multipolygons
In-Reply-To: <CAMhtMNMfuo9Fmf=E7Eo_WgESySx1V+opLknqWPhBtMUjkW3_uQ@mail.gmail.com>
References: <CAMhtMNMfuo9Fmf=E7Eo_WgESySx1V+opLknqWPhBtMUjkW3_uQ@mail.gmail.com>
Message-ID: <201403110005.06482.even.rouault@mines-paris.org>

Well, attach a debugger to the ogr2ogr process and see where the time is 
spent.

your SQL clause could be replaced by "-fid 1", but I'm not sure that the reason 
for the slowness.

> Hello,
> 
> I'm working with a MIF file, contaning just 5 multipolygons (in form
> of "regions", in MapInfo terms). But the file weights 700MB. So, the
> multipolygons are really big. I'd like to transform my file to SHP or
> PostGIS using ogr2ogr, but any operation takes forever.
> 
> My current approach is to use -sql flag this way:
> 
> ogr2ogr -sql "select * from my_layer where fid = 1" my_layer.shp
> my_layer.mif
> 
> But after 2 hours, it still continues working. I've activated debug,
> and last text I've seen is: "Shape: Treating as encoding
> 'ISO-8859-1'."
> 
> All the clip operations I've tried with ogr2ogr have the same
> problems: I have to wait hours, and after that, I just get a SHP of
> 100 Bytes. So, I kill the process.
> 
> Should I be more patient? Or is there any smarter approach to handle
> this kind of file?
> 
> Best regards,

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jonathanmoules at warwickshire.gov.uk  Tue Mar 11 02:06:55 2014
From: jonathanmoules at warwickshire.gov.uk (Jonathan Moules)
Date: Tue, 11 Mar 2014 09:06:55 +0000
Subject: [gdal-dev] Extra Decimal places added to ASCII gdal_translate
	mosaic
In-Reply-To: <201403102021.22822.even.rouault@mines-paris.org>
References: <CAA-xNcWK8NLi8XfVok2KBNMLDrFzBR3XjZDXvjpDzEx93-fEQQ@mail.gmail.com>
	<CA+TxYvOzpqM_arvLDtvwD78yMYjKMYdm0xNWiuM5fUssqE6BPw@mail.gmail.com>
	<CAA-xNcW_w_EdY4Y_hKR3i52rt1pi3V2RLkukqdg7hM6n4adzdw@mail.gmail.com>
	<201403102021.22822.even.rouault@mines-paris.org>
Message-ID: <CAA-xNcWgnwkm43cBx=6BBA5WuOGmRDwjxuf1YOMjo4+1OMBSFA@mail.gmail.com>

>
> TIFF stores floating point values as IEEE754 floats. Talking about
> significant
> figures doesn't make much sense. You could test using Float64 with the hope
> that 50.597 can be exactly represented as a Float64. Otherwise you'll have
> to
> do the rounding when reading back from TIFF.
>


Hi Even,
Thanks for the information. I don't pretend to understand the fine details
of floats, but it does seem counter intuitive that a simple 2 or 3 decimal
places can't be accurately represented.

I tried the Float64 but the values are identical (16 significant figures)
even though the filesize is predictably larger.

I guess I'll have to make do, but it does introduce the problem of False
Precision.

Thanks all,
Jonathan

-- 
This transmission is intended for the named addressee(s) only and may 
contain sensitive or protectively marked material up to RESTRICTED and 
should be handled accordingly. Unless you are the named addressee (or 
authorised to receive it for the addressee) you may not copy or use it, or 
disclose it to anyone else. If you have received this transmission in error 
please notify the sender immediately. All email traffic sent to or from us, 
including without limitation all GCSX traffic, may be subject to recording 
and/or monitoring in accordance with relevant legislation.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140311/e5b43b0e/attachment.html>

From vincent.mora at oslandia.com  Tue Mar 11 02:09:09 2014
From: vincent.mora at oslandia.com (Vincent Mora)
Date: Tue, 11 Mar 2014 10:09:09 +0100
Subject: [gdal-dev] WAsP map output for ogr
In-Reply-To: <201403091958.12791.even.rouault@mines-paris.org>
References: <530C77F2.6020305@oslandia.com>
	<201402252013.45182.even.rouault@mines-paris.org>
	<5318A320.2080007@oslandia.com>
	<201403091958.12791.even.rouault@mines-paris.org>
Message-ID: <531ED2B5.1040701@oslandia.com>

The driver is now R/W.

Thanks for your comments (answer below).

On 09/03/2014 19:58, Even Rouault wrote:
> Hi,
>
> my quick review :
>
> - ogrwaspdatasource.cpp :
>    * change author and copyright to yours
Done.
>    * why do you need #ifdef _WIN32
> # include <windows.h>
> #endif
Not needed indeed, removed.
>     * GetLayer() : index start at 0, not 1
Done.
>     * WASP_MERGE: you could use CSLTestBoolean(CSLFetchNameValueDef(
> papszOptions, "WASP_MERGE", "YES" ))
Done.
>
> - ogrwasplayer.cpp :
>    * change author to yours
Done
>    * OGRWAsPLayer::~OGRWAsPLayer(): potential issues with lines with less than
> 2 points ? (and probably at other places)
I wanted to add IsValid after polygon intersection to take care of that. 
But those lines come from intersection of polygons, so I guess it's a 
bug in geos if lines with no points (i.e. no intersection) or lines with 
one point (i.e. points) come out of intersection.
>    * OGRWAsPLayer::WriteRoughness(): oErrorRegion.Intersect( oEnvelope ); at
> line 304 is useless
Why is it useless ? If the polygons overlap, this should indicate 
roughly the zone where they overlap (no 's'  at the end of Intersect).
>    * OGRWAsPLayer::CreateFeature(): GetFieldAsDouble() will return 0 if the
> field for the feature is NULL. That might be OK for your use case. If not, you
> could use IsFieldSet().
Done.
>    * OGRWAsPLayer::CreateGeomField(): that's OK (except the assert(false)), but
> you likely did't need to implement it, unless the source feature has several
> geometry fields.
This is historical (testing when I though all geom fields were created 
by a call to this).  I prefer to keep it (I removed the assert(false)) 
in order to be able to multi geometry columns (postgis).
>
> Even
>


From even.rouault at mines-paris.org  Tue Mar 11 02:39:00 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 11 Mar 2014 10:39:00 +0100
Subject: [gdal-dev] WAsP map output for ogr
In-Reply-To: <531ED2B5.1040701@oslandia.com>
References: <530C77F2.6020305@oslandia.com>
	<201402252013.45182.even.rouault@mines-paris.org>
	<5318A320.2080007@oslandia.com>
	<201403091958.12791.even.rouault@mines-paris.org>
	<531ED2B5.1040701@oslandia.com>
Message-ID: <1394530740.531ed9b45c748@imp.free.fr>

Hi Vincent,

> The driver is now R/W.

ok I now realize that oErrorRegion.Intersect( oEnvelope ) is on the OGREnvelope
class and not OGRGeometry (in later case it is a boolean operation, hence my
erroneous note).

If you want to test the compliance of your driver (the read part) with the
assumptions of the OGR API, you can go to the apps subdirectory of GDAL and
"make test_ogrsf", and then "test_ogrsf a_wasp_file".

I can see a few things that should be corrected :
- reset iFeatureCount in ResetReading()
- take attribute and spatial filter into account in GetNextFeature(). Actually
you could rename your GetNextFeature() into GetNextRawFeature() and copy and
paste the GetNextFeature() implementation of
ogr/ogrsf_frmts/cartodb/ogrcartodblayer.cpp
- OGRWAsPDriver::Open() : it should be much more restrictive and only return a
non NULL pointer in case a WASP file is found (test typical extension if it
exists, otherwise look at first bytes). Otherwise every file not handled by
other drivers will be reported as a WASP datasource.
- you probably want to have a flag at the layer level to indicate if it is
opened in read-only or write-only mode, and use it in the various operations
(CreateFeature(), GetNextFeature(), TestCapability())

Even



From even.rouault at mines-paris.org  Tue Mar 11 02:44:58 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 11 Mar 2014 10:44:58 +0100
Subject: [gdal-dev] Extra Decimal places added to ASCII gdal_translate
	mosaic
In-Reply-To: <CAA-xNcWgnwkm43cBx=6BBA5WuOGmRDwjxuf1YOMjo4+1OMBSFA@mail.gmail.com>
References: <CAA-xNcWK8NLi8XfVok2KBNMLDrFzBR3XjZDXvjpDzEx93-fEQQ@mail.gmail.com>
	<CA+TxYvOzpqM_arvLDtvwD78yMYjKMYdm0xNWiuM5fUssqE6BPw@mail.gmail.com>
	<CAA-xNcW_w_EdY4Y_hKR3i52rt1pi3V2RLkukqdg7hM6n4adzdw@mail.gmail.com>
	<201403102021.22822.even.rouault@mines-paris.org>
	<CAA-xNcWgnwkm43cBx=6BBA5WuOGmRDwjxuf1YOMjo4+1OMBSFA@mail.gmail.com>
Message-ID: <1394531098.531edb1a9260a@imp.free.fr>

>
> Hi Even,
> Thanks for the information. I don't pretend to understand the fine details
> of floats, but it does seem counter intuitive that a simple 2 or 3 decimal
> places can't be accurately represented.

Yes this is really counter intuitive. I've just tested with the Python console
that 50.597 has no exact representation in Float64, which is not completely
unexpected. It is returned as "50.597000000000001". And

>>> 50.597 == 50.597000000000001
True
>>> 50.597 == 50.597000000000002
True

This doesn't explain however why you get 50.596895342423. So I suspect that it
is your input that has 50.596895342423 as a value.

>
> I tried the Float64 but the values are identical (16 significant figures)
> even though the filesize is predictably larger.
>
> I guess I'll have to make do, but it does introduce the problem of False
> Precision.

Very few formats take into account precision. And the GDAL/OGR model has
currently no explicit support for that.

Even

From jonathanmoules at warwickshire.gov.uk  Tue Mar 11 03:20:33 2014
From: jonathanmoules at warwickshire.gov.uk (Jonathan Moules)
Date: Tue, 11 Mar 2014 10:20:33 +0000
Subject: [gdal-dev] Extra Decimal places added to ASCII gdal_translate
	mosaic
In-Reply-To: <1394531098.531edb1a9260a@imp.free.fr>
References: <CAA-xNcWK8NLi8XfVok2KBNMLDrFzBR3XjZDXvjpDzEx93-fEQQ@mail.gmail.com>
	<CA+TxYvOzpqM_arvLDtvwD78yMYjKMYdm0xNWiuM5fUssqE6BPw@mail.gmail.com>
	<CAA-xNcW_w_EdY4Y_hKR3i52rt1pi3V2RLkukqdg7hM6n4adzdw@mail.gmail.com>
	<201403102021.22822.even.rouault@mines-paris.org>
	<CAA-xNcWgnwkm43cBx=6BBA5WuOGmRDwjxuf1YOMjo4+1OMBSFA@mail.gmail.com>
	<1394531098.531edb1a9260a@imp.free.fr>
Message-ID: <CAA-xNcVYgdLERhU1foE_27xRqbj5C+Yjar1tpZXoR1hDTJ_Eug@mail.gmail.com>

Hi Even,
Thanks for the information.


> >
> > I tried the Float64 but the values are identical (16 significant figures)
> > even though the filesize is predictably larger.
> >
> > I guess I'll have to make do, but it does introduce the problem of False
> > Precision.
>
> Very few formats take into account precision. And the GDAL/OGR model has
> currently no explicit support for that.
>

My comment about False Precision was referring to the engineering/science
problem:
https://en.wikipedia.org/wiki/False_precision

In our case this is height data, so now folks will see heights down to...
femtometres?! You and I know that's obviously wrong, but not all users are
quite so technical.

Thanks again,
Jonathan

-- 
This transmission is intended for the named addressee(s) only and may 
contain sensitive or protectively marked material up to RESTRICTED and 
should be handled accordingly. Unless you are the named addressee (or 
authorised to receive it for the addressee) you may not copy or use it, or 
disclose it to anyone else. If you have received this transmission in error 
please notify the sender immediately. All email traffic sent to or from us, 
including without limitation all GCSX traffic, may be subject to recording 
and/or monitoring in accordance with relevant legislation.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140311/39b8cfe4/attachment.html>

From dragons8mycat at live.co.uk  Tue Mar 11 03:44:18 2014
From: dragons8mycat at live.co.uk (Nicholas Duggan)
Date: Tue, 11 Mar 2014 10:44:18 +0000
Subject: [gdal-dev] Fix for QGIS 2.2+ Projection issue with OSGB36 NTv2
Message-ID: <DUB110-W131A02AFB02C69CB0F958ADC6770@phx.gbl>

Hi all,

I'm trying to get my fix for the OSGB36 to WGS84 using Ordnance Surveys OSTN02 (NTv2) transformation into the QGIS master. Nathan Woodrow recommended I bring it up with you guys who might be able to implement it. 

Essentially I've updated the QGIS srs.db and put the OSTN02_NTv2.gsb in the Share/Proj folder, full description and files are here: http://dragons8mycat.wordpress.com/2014/03/03/gis-tips-getting-ostn02-to-work-with-qgis-2-2/ 

Is this something which can be implemented by yourselves or can you point me in the right direction for getting it put in the master/future releases?

Thanks,

Nick D (@dragons8mycat)
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140311/3a158cf6/attachment.html>

From jonathanmoules at warwickshire.gov.uk  Tue Mar 11 04:19:36 2014
From: jonathanmoules at warwickshire.gov.uk (Jonathan Moules)
Date: Tue, 11 Mar 2014 11:19:36 +0000
Subject: [gdal-dev] Gdal GeoTIFFs in MapInfo
Message-ID: <CAA-xNcUnnJbNEr7hDL-z8PoaOkji4eYq_8isqCK-D4FghK2iMg@mail.gmail.com>

Hi List,
I've created a GeoTIFF with GDAL. It works fine in QGIS and ArcMap, but
MapInfo refuses to load it, giving me a "Image file open error" message.

I've come across several problems and was wondering if anyone else had
experience with GDAL created files in MapInfo.

Problems:
1) MapInfo can't handle compressed overviews ( *--config COMPRESS_OVERVIEW
DEFLATE*) - I can easily get past this one by not compressing them.

2) However, my next problem is that MapInfo can't read the projection
information from within the file. Is GDAL capable of creating a TAB file?

3) Finally, while MapInfo will happily open my small subset sample (above
issues not withstanding), it won't load my full image (about 2GB). Both are
created using the exact same commands:

gdalbuildvrt -srcnodata -9999 -vrtnodata -9999 -input_file_list
> asc_list.txt merged_vrt.vrt

gdal_translate -of GTiff -co TILED=YES -co COMPRESS=DEFLATE -co
> BLOCKXSIZE=512 -co BLOCKYSIZE=512 -a_srs EPSG:27700 merged_vrt.vrt
> DSM_2012-13.tif
> gdaladdo -r average DSM_2012-13.tif 2 4 8 16 32 64


It's not the overviews because it still happens when they're not generated.

Thoughts welcome,
Jonathan

-- 
This transmission is intended for the named addressee(s) only and may 
contain sensitive or protectively marked material up to RESTRICTED and 
should be handled accordingly. Unless you are the named addressee (or 
authorised to receive it for the addressee) you may not copy or use it, or 
disclose it to anyone else. If you have received this transmission in error 
please notify the sender immediately. All email traffic sent to or from us, 
including without limitation all GCSX traffic, may be subject to recording 
and/or monitoring in accordance with relevant legislation.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140311/c8574b59/attachment-0001.html>

From vincent.mora at oslandia.com  Tue Mar 11 06:23:58 2014
From: vincent.mora at oslandia.com (Vincent Mora)
Date: Tue, 11 Mar 2014 14:23:58 +0100
Subject: [gdal-dev] WAsP map output for ogr
In-Reply-To: <1394530740.531ed9b45c748@imp.free.fr>
References: <530C77F2.6020305@oslandia.com>
	<201402252013.45182.even.rouault@mines-paris.org>
	<5318A320.2080007@oslandia.com>
	<201403091958.12791.even.rouault@mines-paris.org>
	<531ED2B5.1040701@oslandia.com>
	<1394530740.531ed9b45c748@imp.free.fr>
Message-ID: <531F0E6E.80008@oslandia.com>


On 11/03/2014 10:39, Even Rouault wrote:
> If you want to test the compliance of your driver (the read part) with the
> assumptions of the OGR API, you can go to the apps subdirectory of GDAL and
> "make test_ogrsf", and then "test_ogrsf a_wasp_file".
Thanks for the tip.

It helped me fix some issues, and raises one question: test_ogrsf now 
fails with 'ExecuteSQL() should have returned a non-NULL result', should 
I implement all the sql queries that are specified in 
http://www.gdal.org/ogr/ogr_sql.html for my driver to be OK ?

> I can see a few things that should be corrected :
> - reset iFeatureCount in ResetReading()
Done.
> - take attribute and spatial filter into account in GetNextFeature(). Actually
> you could rename your GetNextFeature() into GetNextRawFeature() and copy and
> paste the GetNextFeature() implementation of
> ogr/ogrsf_frmts/cartodb/ogrcartodblayer.cpp
Done.
> - OGRWAsPDriver::Open() : it should be much more restrictive and only return a
> non NULL pointer in case a WASP file is found (test typical extension if it
> exists, otherwise look at first bytes). Otherwise every file not handled by
> other drivers will be reported as a WASP datasource.
Done.
> - you probably want to have a flag at the layer level to indicate if it is
> opened in read-only or write-only mode, and use it in the various operations
> (CreateFeature(), GetNextFeature(), TestCapability())
Done.

From even.rouault at mines-paris.org  Tue Mar 11 06:58:31 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 11 Mar 2014 14:58:31 +0100
Subject: [gdal-dev] WAsP map output for ogr
In-Reply-To: <531F0E6E.80008@oslandia.com>
References: <530C77F2.6020305@oslandia.com>
	<201402252013.45182.even.rouault@mines-paris.org>
	<5318A320.2080007@oslandia.com>
	<201403091958.12791.even.rouault@mines-paris.org>
	<531ED2B5.1040701@oslandia.com>
	<1394530740.531ed9b45c748@imp.free.fr>
	<531F0E6E.80008@oslandia.com>
Message-ID: <1394546311.531f1687f0b21@imp.free.fr>

Selon Vincent Mora <vincent.mora at oslandia.com>:

>
> On 11/03/2014 10:39, Even Rouault wrote:
> > If you want to test the compliance of your driver (the read part) with the
> > assumptions of the OGR API, you can go to the apps subdirectory of GDAL and
> > "make test_ogrsf", and then "test_ogrsf a_wasp_file".
> Thanks for the tip.
>
> It helped me fix some issues, and raises one question: test_ogrsf now
> fails with 'ExecuteSQL() should have returned a non-NULL result', should
> I implement all the sql queries that are specified in
> http://www.gdal.org/ogr/ogr_sql.html for my driver to be OK ?

You should completely remove your ExecuteSQL() implementation. The generic one
in OGRDataSource should be sufficient.

From etourigny.dev at gmail.com  Tue Mar 11 10:23:46 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 11 Mar 2014 14:23:46 -0300
Subject: [gdal-dev] Fix for QGIS 2.2+ Projection issue with OSGB36 NTv2
In-Reply-To: <DUB110-W131A02AFB02C69CB0F958ADC6770@phx.gbl>
References: <DUB110-W131A02AFB02C69CB0F958ADC6770@phx.gbl>
Message-ID: <CA+TxYvPbJ1BP9xqDiP2EiBZZyNqGP3iFXTFoYbGjuUwdVAG1GA@mail.gmail.com>

You email should be sent to the qgis-developer list (this is the gdal-dev
list), which I am forwarding this to.


On Tue, Mar 11, 2014 at 7:44 AM, Nicholas Duggan
<dragons8mycat at live.co.uk>wrote:

> Hi all,
>
> I'm trying to get my fix for the OSGB36 to WGS84 using Ordnance Surveys
> OSTN02 (NTv2) transformation into the QGIS master. Nathan Woodrow
> recommended I bring it up with you guys who might be able to implement it.
>
> Essentially I've updated the QGIS srs.db and put the OSTN02_NTv2.gsb in
> the Share/Proj folder, full description and files are here:
> http://dragons8mycat.wordpress.com/2014/03/03/gis-tips-getting-ostn02-to-work-with-qgis-2-2/
>
> Is this something which can be implemented by yourselves or can you point
> me in the right direction for getting it put in the master/future releases?
>
> Thanks,
>
> Nick D (@dragons8mycat)
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140311/9aec4594/attachment.html>

From dbakeman at comcast.net  Tue Mar 11 11:29:05 2014
From: dbakeman at comcast.net (David J. Bakeman)
Date: Tue, 11 Mar 2014 11:29:05 -0700
Subject: [gdal-dev] Extra Decimal places added to ASCII gdal_translate
 mosaic
In-Reply-To: <CAA-xNcWgnwkm43cBx=6BBA5WuOGmRDwjxuf1YOMjo4+1OMBSFA@mail.gmail.com>
References: <CAA-xNcWK8NLi8XfVok2KBNMLDrFzBR3XjZDXvjpDzEx93-fEQQ@mail.gmail.com>	<CA+TxYvOzpqM_arvLDtvwD78yMYjKMYdm0xNWiuM5fUssqE6BPw@mail.gmail.com>	<CAA-xNcW_w_EdY4Y_hKR3i52rt1pi3V2RLkukqdg7hM6n4adzdw@mail.gmail.com>	<201403102021.22822.even.rouault@mines-paris.org>
	<CAA-xNcWgnwkm43cBx=6BBA5WuOGmRDwjxuf1YOMjo4+1OMBSFA@mail.gmail.com>
Message-ID: <531F55F1.600@comcast.net>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140311/f45e1236/attachment.html>

From sylvain_duclos at yahoo.com  Tue Mar 11 14:34:23 2014
From: sylvain_duclos at yahoo.com (s duclos)
Date: Tue, 11 Mar 2014 14:34:23 -0700 (PDT)
Subject: [gdal-dev] regarding s57 colour codes
In-Reply-To: <CAJXNG3LdCx1PtdEnW9C3WDxZqf4=Uz+6QSfzQZ2jP0Kuf71i7A@mail.gmail.com>
References: <CAJXNG3LdCx1PtdEnW9C3WDxZqf4=Uz+6QSfzQZ2jP0Kuf71i7A@mail.gmail.com>
Message-ID: <1394573663.50196.YahooMailNeo@web160503.mail.bf1.yahoo.com>

Girish,

You might find some answer here: 

http://grasswiki.osgeo.org/wiki/S-57_data


rgds,

Sylvain.




On Tuesday, March 11, 2014 4:22:39 PM, Girish Deshpande <deshpande.gh at gmail.com> wrote:
 
Hello,
>
>
>I am able to render s57 chart in my application using gdal, i am finding difficulty in filling the areas with specific colors.
>please help me in this regards.?
>
>
>-- 
>Thanks & Regards,
>Girish Deshpande 
>_______________________________________________
>gdal-dev mailing list
>gdal-dev at lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140311/d7560856/attachment.html>

From vincent.mora at oslandia.com  Wed Mar 12 00:22:00 2014
From: vincent.mora at oslandia.com (Vincent Mora)
Date: Wed, 12 Mar 2014 08:22:00 +0100
Subject: [gdal-dev] WAsP map output for ogr
In-Reply-To: <1394546311.531f1687f0b21@imp.free.fr>
References: <530C77F2.6020305@oslandia.com>
	<201402252013.45182.even.rouault@mines-paris.org>
	<5318A320.2080007@oslandia.com>
	<201403091958.12791.even.rouault@mines-paris.org>
	<531ED2B5.1040701@oslandia.com>
	<1394530740.531ed9b45c748@imp.free.fr>
	<531F0E6E.80008@oslandia.com>
	<1394546311.531f1687f0b21@imp.free.fr>
Message-ID: <53200B18.4030004@oslandia.com>

On 11/03/2014 14:58, Even Rouault wrote:
> Selon Vincent Mora <vincent.mora at oslandia.com>:
>
>> On 11/03/2014 10:39, Even Rouault wrote:
>>> If you want to test the compliance of your driver (the read part) with the
>>> assumptions of the OGR API, you can go to the apps subdirectory of GDAL and
>>> "make test_ogrsf", and then "test_ogrsf a_wasp_file".
>> Thanks for the tip.
>>
>> It helped me fix some issues, and raises one question: test_ogrsf now
>> fails with 'ExecuteSQL() should have returned a non-NULL result', should
>> I implement all the sql queries that are specified in
>> http://www.gdal.org/ogr/ogr_sql.html for my driver to be OK ?
> You should completely remove your ExecuteSQL() implementation. The generic one
> in OGRDataSource should be sufficient.
I found my problem with the default ExecuteSQL() implementation: I was 
naming my layer "filename.map" and the extension was messing with the 
table_name.column_name parsing.

Fixed and pushed now, test_ogrsf passes.

  


From vincent.mora at oslandia.com  Wed Mar 12 00:53:44 2014
From: vincent.mora at oslandia.com (Vincent Mora)
Date: Wed, 12 Mar 2014 08:53:44 +0100
Subject: [gdal-dev] WAsP map output for ogr
In-Reply-To: <1394546311.531f1687f0b21@imp.free.fr>
References: <530C77F2.6020305@oslandia.com>
	<201402252013.45182.even.rouault@mines-paris.org>
	<5318A320.2080007@oslandia.com>
	<201403091958.12791.even.rouault@mines-paris.org>
	<531ED2B5.1040701@oslandia.com>
	<1394530740.531ed9b45c748@imp.free.fr>
	<531F0E6E.80008@oslandia.com>
	<1394546311.531f1687f0b21@imp.free.fr>
Message-ID: <53201288.1000707@oslandia.com>

I've question concerning SRS: what should OGRWAsPLayer::GetSpatialRef() 
for unknown SRS.



Context:

WAsP Map Editor has a couple of SRS that will be written in the first 
line of the .map file. The first line looks like

     +description | srs_name | map_editor version

Since there are very few SRS available, I use the 'description' field to 
write the proj4 of the source SRS when I create a .map file (e.g. with 
ogr2ogr -f WAsP dest.wasp source.shp).

I want to open .map files that where created by other means (e.g. WAsP 
Map Editor). In this case the SRS will be unknown and it's fine since it 
can be defined by other means e.g. with option -s_srs. But I don't wan't 
the driver to do stupid things in this case.


From even.rouault at mines-paris.org  Wed Mar 12 02:57:41 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 12 Mar 2014 10:57:41 +0100
Subject: [gdal-dev] WAsP map output for ogr
In-Reply-To: <53201288.1000707@oslandia.com>
References: <530C77F2.6020305@oslandia.com>
	<1394546311.531f1687f0b21@imp.free.fr>
	<53201288.1000707@oslandia.com>
Message-ID: <201403121057.41125.even.rouault@mines-paris.org>

Le mercredi 12 mars 2014 08:53:44, Vincent Mora a ?crit :
> I've question concerning SRS: what should OGRWAsPLayer::GetSpatialRef()
> for unknown SRS.

NULL would be OK.

> 
> 
> 
> Context:
> 
> WAsP Map Editor has a couple of SRS that will be written in the first
> line of the .map file. The first line looks like
> 
>      +description | srs_name | map_editor version
> 
> Since there are very few SRS available, I use the 'description' field to
> write the proj4 of the source SRS when I create a .map file (e.g. with
> ogr2ogr -f WAsP dest.wasp source.shp).
> 
> I want to open .map files that where created by other means (e.g. WAsP
> Map Editor). In this case the SRS will be unknown and it's fine since it
> can be defined by other means e.g. with option -s_srs. But I don't wan't
> the driver to do stupid things in this case.

Well, you could probably put in your driver the code that will recognize the 
most used srs_name written by the WasP Map Editor and turn them into a valid 
OGRSpatialReference ? and for unknown values, return NULL.


-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From Moses.Gone at t-systems.com  Wed Mar 12 03:22:17 2014
From: Moses.Gone at t-systems.com (Moses.Gone at t-systems.com)
Date: Wed, 12 Mar 2014 11:22:17 +0100
Subject: [gdal-dev] Problem fixing the Starting point of a tiling job
Message-ID: <2D55B4FBCD59D045AC382D3F65435B79038566FF5D06@HE101453.emea1.cds.t-internal.com>

Dear Experts,

When tiling datasets, we want to specifically define custom windows. To do this, we are using -te option during warping. The warped output is then tiled.

The problem though is that after tiling and checking the bbox of the first tile, we have noticed that the starting coordinate is shifted and do not correspond to the defined starting coordinates as illustrated below:


*       The blue grid represent the original dataset with cellsize (a).
*       The black grid represent the new dataset with cellsize (b).
*       The cellsize of both datasets can be the same or not [(a) .eq. (b) or (a) .ne. (b)].
*       The red polygon represent the bbox which fit to the new cellsize and tilesize.

We would like to start tiling exactly at the upper left corner of the red polygon.How we can force gdal to clip the raster exactly according to our well defined bbox?

In some cases, GDAL picks the right Bbox startpoint, in other cases it doesnt. Is this somehow related to the difference in the input and output data resolution(cellsize)?

We can't figure out why it is ignoring our definitions. Could someone help shade some light to what is happening here?

Thanks in advance,
Moses

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140312/6f73b31c/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: BBox_def.png
Type: image/png
Size: 9698 bytes
Desc: BBox_def.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140312/6f73b31c/attachment-0001.png>

From even.rouault at mines-paris.org  Wed Mar 12 03:32:59 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 12 Mar 2014 11:32:59 +0100
Subject: [gdal-dev] Gdal GeoTIFFs in MapInfo
In-Reply-To: <CAA-xNcUnnJbNEr7hDL-z8PoaOkji4eYq_8isqCK-D4FghK2iMg@mail.gmail.com>
References: <CAA-xNcUnnJbNEr7hDL-z8PoaOkji4eYq_8isqCK-D4FghK2iMg@mail.gmail.com>
Message-ID: <201403121132.59886.even.rouault@mines-paris.org>

Le mardi 11 mars 2014 12:19:36, Jonathan Moules a ?crit :
> Hi List,
> I've created a GeoTIFF with GDAL. It works fine in QGIS and ArcMap, but
> MapInfo refuses to load it, giving me a "Image file open error" message.
> 
> I've come across several problems and was wondering if anyone else had
> experience with GDAL created files in MapInfo.
> 
> Problems:
> 1) MapInfo can't handle compressed overviews ( *--config COMPRESS_OVERVIEW
> DEFLATE*) - I can easily get past this one by not compressing them.
> 
> 2) However, my next problem is that MapInfo can't read the projection
> information from within the file. Is GDAL capable of creating a TAB file?

Not currently. It can read them, and it is used in a few drivers such as GTiff. 
Writing is done only in the MapInfo TAB driver for the vector part. The 
writing of .tab for raster files would only be a matter of implementing it...

> 
> 3) Finally, while MapInfo will happily open my small subset sample (above
> issues not withstanding), it won't load my full image (about 2GB). Both are
> created using the exact same commands:
> 
> gdalbuildvrt -srcnodata -9999 -vrtnodata -9999 -input_file_list
> 
> > asc_list.txt merged_vrt.vrt
> 
> gdal_translate -of GTiff -co TILED=YES -co COMPRESS=DEFLATE -co
> 
> > BLOCKXSIZE=512 -co BLOCKYSIZE=512 -a_srs EPSG:27700 merged_vrt.vrt
> > DSM_2012-13.tif
> > gdaladdo -r average DSM_2012-13.tif 2 4 8 16 32 64
> 
> It's not the overviews because it still happens when they're not generated.

Well, I don't know MapInfo limits with raster files. Perhaps is it just big 
raster dimensions that cause problem, or tiling, or .. ?

> 
> Thoughts welcome,
> Jonathan

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From ml at interatlas.fr  Wed Mar 12 04:33:56 2014
From: ml at interatlas.fr (M. LATTES)
Date: Wed, 12 Mar 2014 12:33:56 +0100
Subject: [gdal-dev] Problem fixing the Starting point of a tiling job
In-Reply-To: <2D55B4FBCD59D045AC382D3F65435B79038566FF5D06@HE101453.emea1.cds.t-internal.com>
References: <2D55B4FBCD59D045AC382D3F65435B79038566FF5D06@HE101453.emea1.cds.t-internal.com>
Message-ID: <013e01cf3de6$f4310760$dc931620$@fr>

Hi Moses, 

 

when starting coordinate is shifted, is it a large shift ?

Are you using gdalwarp command only for tiling or did you change SRS
(-t_srs) too ?

 


Regards.

 

Mathieu LATTES

 <http://www.interatlas.fr/> http://www.interatlas.fr
 <http://www.urbimap.com/> http://www.ubick.net

 

 

De : gdal-dev-bounces at lists.osgeo.org
[mailto:gdal-dev-bounces at lists.osgeo.org] De la part de
Moses.Gone at t-systems.com
Envoy? : mercredi 12 mars 2014 11:22
? : gdal-dev at lists.osgeo.org
Objet : [gdal-dev] Problem fixing the Starting point of a tiling job

 

Dear Experts,

 

When tiling datasets, we want to specifically define custom windows. To do
this, we are using -te option during warping. The warped output is then
tiled. 

 

The problem though is that after tiling and checking the bbox of the first
tile, we have noticed that the starting coordinate is shifted and do not
correspond to the defined starting coordinates as illustrated below:

 



*	The blue grid represent the original dataset with cellsize (a).
*	The black grid represent the new dataset with cellsize (b).
*	The cellsize of both datasets can be the same or not [(a) .eq. (b)
or (a) .ne. (b)].
*	The red polygon represent the bbox which fit to the new cellsize and
tilesize.

 

We would like to start tiling exactly at the upper left corner of the red
polygon.How we can force gdal to clip the raster exactly according to our
well defined bbox?

 

In some cases, GDAL picks the right Bbox startpoint, in other cases it
doesnt. Is this somehow related to the difference in the input and output
data resolution(cellsize)?

 

We can?t figure out why it is ignoring our definitions. Could someone help
shade some light to what is happening here?

 

Thanks in advance,

Moses

 



---
Ce courrier ?lectronique ne contient aucun virus ou logiciel malveillant parce que la protection avast! Antivirus est active.
http://www.avast.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140312/d6e2fd68/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 9698 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140312/d6e2fd68/attachment-0001.png>

From fjitiaux at gmail.com  Wed Mar 12 04:59:49 2014
From: fjitiaux at gmail.com (Florent JITIAUX)
Date: Wed, 12 Mar 2014 12:59:49 +0100
Subject: [gdal-dev] Heuristics to classify raster data ?
In-Reply-To: <201403081105.12260.even.rouault@mines-paris.org>
References: <201403062019.30124.even.rouault@mines-paris.org>
	<201403071949.50056.even.rouault@mines-paris.org>
	<531ADC91.4090207@oslandia.com>
	<201403081105.12260.even.rouault@mines-paris.org>
Message-ID: <CAL81ghCtRhZ3Oj9MQRQgydODoBEbD4UfV9c+C-L4qMxmOJtVnA@mail.gmail.com>

Hi all,

I think the fastest and simplest way to class maps and aerial/satellite is
to count number of colors. Generally maps of OSM have a maximum of 20 or
may e 30 colors. I don't think OSM will use all 256 colors in their maps.

About k-means, some people use it to filter aerial/satellite with too much
clouds (or snow). When the cluster of white and bright colors is too
"large" (in histograms) then the raster is considered having too much
clouds.
Because maps must be the most readable, colors are visually separated. It
may be possible by compute each cluster of each band or compare each border
or center of clusters.

Another solution may be to get the quantity or the coverage of some colors.
Generally maps have one or few background colors. If one or two colors are
very dominant than others, the raster may be considered as a map. I think
the minimum is two if a part of the map have some water.

Florent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140312/75ed8342/attachment.html>

From jonathanmoules at warwickshire.gov.uk  Wed Mar 12 05:44:00 2014
From: jonathanmoules at warwickshire.gov.uk (Jonathan Moules)
Date: Wed, 12 Mar 2014 12:44:00 +0000
Subject: [gdal-dev] Gdal GeoTIFFs in MapInfo
In-Reply-To: <201403121132.59886.even.rouault@mines-paris.org>
References: <CAA-xNcUnnJbNEr7hDL-z8PoaOkji4eYq_8isqCK-D4FghK2iMg@mail.gmail.com>
	<201403121132.59886.even.rouault@mines-paris.org>
Message-ID: <CAA-xNcW7pQ9K=0+1mnFYKXT1UN=Sive37uK=9Or7OeezKd5TJg@mail.gmail.com>

Hi Even,


> Well, I don't know MapInfo limits with raster files. Perhaps is it just big
> raster dimensions that cause problem, or tiling, or .. ?
>

I guess it's size. I've tried with no compression, no tiles, and both no
compression or tiling, all fail. So I guess a MapInfo thing then.
Thanks,
Jonathan

-- 
This transmission is intended for the named addressee(s) only and may 
contain sensitive or protectively marked material up to RESTRICTED and 
should be handled accordingly. Unless you are the named addressee (or 
authorised to receive it for the addressee) you may not copy or use it, or 
disclose it to anyone else. If you have received this transmission in error 
please notify the sender immediately. All email traffic sent to or from us, 
including without limitation all GCSX traffic, may be subject to recording 
and/or monitoring in accordance with relevant legislation.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140312/cd08e400/attachment.html>

From egoddard1010 at gmail.com  Wed Mar 12 06:46:45 2014
From: egoddard1010 at gmail.com (Eric Goddard)
Date: Wed, 12 Mar 2014 08:46:45 -0500
Subject: [gdal-dev] Gdal GeoTIFFs in MapInfo
In-Reply-To: <CAA-xNcW7pQ9K=0+1mnFYKXT1UN=Sive37uK=9Or7OeezKd5TJg@mail.gmail.com>
References: <CAA-xNcUnnJbNEr7hDL-z8PoaOkji4eYq_8isqCK-D4FghK2iMg@mail.gmail.com>
	<201403121132.59886.even.rouault@mines-paris.org>
	<CAA-xNcW7pQ9K=0+1mnFYKXT1UN=Sive37uK=9Or7OeezKd5TJg@mail.gmail.com>
Message-ID: <CAMM2+YqZ1RS1ZGLMCGdXxy3ZzEkMo5-Z1xHts+BLudCF3TqkHg@mail.gmail.com>

What about using a world file for the projection info? It is an Esri
thing, but maybe MapInfo will recognize it. Just add a -co TFW=YES to
the gdal_translate command.

Eric

On Wed, Mar 12, 2014 at 7:44 AM, Jonathan Moules
<jonathanmoules at warwickshire.gov.uk> wrote:
> Hi Even,
>
>>
>> Well, I don't know MapInfo limits with raster files. Perhaps is it just
>> big
>> raster dimensions that cause problem, or tiling, or .. ?
>
>
> I guess it's size. I've tried with no compression, no tiles, and both no
> compression or tiling, all fail. So I guess a MapInfo thing then.
> Thanks,
> Jonathan
>
> This transmission is intended for the named addressee(s) only and may
> contain sensitive or protectively marked material up to RESTRICTED and
> should be handled accordingly. Unless you are the named addressee (or
> authorised to receive it for the addressee) you may not copy or use it, or
> disclose it to anyone else. If you have received this transmission in error
> please notify the sender immediately. All email traffic sent to or from us,
> including without limitation all GCSX traffic, may be subject to recording
> and/or monitoring in accordance with relevant legislation.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jonathanmoules at warwickshire.gov.uk  Wed Mar 12 06:58:51 2014
From: jonathanmoules at warwickshire.gov.uk (Jonathan Moules)
Date: Wed, 12 Mar 2014 13:58:51 +0000
Subject: [gdal-dev] Extra Decimal places added to ASCII gdal_translate
	mosaic
In-Reply-To: <531F55F1.600@comcast.net>
References: <CAA-xNcWK8NLi8XfVok2KBNMLDrFzBR3XjZDXvjpDzEx93-fEQQ@mail.gmail.com>
	<CA+TxYvOzpqM_arvLDtvwD78yMYjKMYdm0xNWiuM5fUssqE6BPw@mail.gmail.com>
	<CAA-xNcW_w_EdY4Y_hKR3i52rt1pi3V2RLkukqdg7hM6n4adzdw@mail.gmail.com>
	<201403102021.22822.even.rouault@mines-paris.org>
	<CAA-xNcWgnwkm43cBx=6BBA5WuOGmRDwjxuf1YOMjo4+1OMBSFA@mail.gmail.com>
	<531F55F1.600@comcast.net>
Message-ID: <CAA-xNcU0z3MgYe_E8yZGzyRZvZZE88khne1woU+ndAty4QDbhg@mail.gmail.com>

Hi David,

> Here's a crazy idea could you perhaps use mm and then output to an integer
> raster?  No problem representing 50597mm.
>

I like you thinking! But on reflection suspect that would confound a few
too many of our users. It's certainly a nice lateral-thinking solution to
bear in mind for the future though.
Thanks!
Jonathan

-- 
This transmission is intended for the named addressee(s) only and may 
contain sensitive or protectively marked material up to RESTRICTED and 
should be handled accordingly. Unless you are the named addressee (or 
authorised to receive it for the addressee) you may not copy or use it, or 
disclose it to anyone else. If you have received this transmission in error 
please notify the sender immediately. All email traffic sent to or from us, 
including without limitation all GCSX traffic, may be subject to recording 
and/or monitoring in accordance with relevant legislation.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140312/0cb8a082/attachment.html>

From jukka.rahkonen at mmmtike.fi  Wed Mar 12 08:36:31 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 12 Mar 2014 15:36:31 +0000 (UTC)
Subject: [gdal-dev] Problem fixing the Starting point of a tiling job
References: <2D55B4FBCD59D045AC382D3F65435B79038566FF5D06@HE101453.emea1.cds.t-internal.com>
Message-ID: <loom.20140312T163457-259@post.gmane.org>

 <Moses.Gone <at> t-systems.com> writes:

> 
> 
> 
> Dear Experts,
> ?
> When tiling datasets, we want to specifically define custom windows. To do
this, we are using -te option during warping. The warped output is then tiled. 
> ?
> The problem though is that after tiling and checking the bbox of the first
tile, we have noticed that the starting coordinate is shifted and do not
correspond to the defined starting coordinates as illustrated below:
> ?
> 
> 
> The blue grid represent the original dataset with cellsize (a).
> The black grid represent the new dataset with cellsize (b).
> The cellsize of both datasets can be the same or not [(a) .eq. (b) or (a)
.ne. (b)].
> The red polygon represent the bbox which fit to the new cellsize and tilesize.
> 
> ?
> We would like to start tiling exactly at the upper left corner of the red
polygon.How we can force gdal to clip the raster exactly according to our
well defined bbox?

Option -tap can help at least a bit.
http://www.gdal.org/gdalwarp.html

-Jukka Rahkonen-

> ?
> In some cases, GDAL picks the right Bbox startpoint, in other cases it
doesnt. Is this somehow related to the difference in the input and output
data resolution(cellsize)?
> ?
> We can?t figure out why it is ignoring our definitions. Could someone help
shade some light to what is happening here?

Option -tap can help at least a bit.


?
> Thanks in advance,
> Moses
> ?
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev <at> lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev





From jukka.rahkonen at mmmtike.fi  Wed Mar 12 08:43:07 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 12 Mar 2014 15:43:07 +0000 (UTC)
Subject: [gdal-dev] Gdal GeoTIFFs in MapInfo
References: <CAA-xNcUnnJbNEr7hDL-z8PoaOkji4eYq_8isqCK-D4FghK2iMg@mail.gmail.com>
	<201403121132.59886.even.rouault@mines-paris.org>
	<CAA-xNcW7pQ9K=0+1mnFYKXT1UN=Sive37uK=9Or7OeezKd5TJg@mail.gmail.com>
	<CAMM2+YqZ1RS1ZGLMCGdXxy3ZzEkMo5-Z1xHts+BLudCF3TqkHg@mail.gmail.com>
Message-ID: <loom.20140312T163817-875@post.gmane.org>

Eric Goddard <egoddard1010 <at> gmail.com> writes:

> 
> What about using a world file for the projection info? It is an Esri
> thing, but maybe MapInfo will recognize it. Just add a -co TFW=YES to
> the gdal_translate command.

I may remember wrong and I do not have Mapinfo at hands now, but I bet that
it at least used to be so that you first _import_ GeoTIFFs with Mapinfo and
it creates a tab file. Later you can _open_ the tab. If that fails it may
mean that Mapinfo does not recognize the projection of the GeoTIFF.

-Jukka Rahkonen-





From dbakeman at comcast.net  Wed Mar 12 08:51:00 2014
From: dbakeman at comcast.net (David J. Bakeman)
Date: Wed, 12 Mar 2014 08:51:00 -0700
Subject: [gdal-dev] Extra Decimal places added to ASCII gdal_translate
 mosaic
In-Reply-To: <CAA-xNcU0z3MgYe_E8yZGzyRZvZZE88khne1woU+ndAty4QDbhg@mail.gmail.com>
References: <CAA-xNcWK8NLi8XfVok2KBNMLDrFzBR3XjZDXvjpDzEx93-fEQQ@mail.gmail.com>
	<CA+TxYvOzpqM_arvLDtvwD78yMYjKMYdm0xNWiuM5fUssqE6BPw@mail.gmail.com>
	<CAA-xNcW_w_EdY4Y_hKR3i52rt1pi3V2RLkukqdg7hM6n4adzdw@mail.gmail.com>
	<201403102021.22822.even.rouault@mines-paris.org>
	<CAA-xNcWgnwkm43cBx=6BBA5WuOGmRDwjxuf1YOMjo4+1OMBSFA@mail.gmail.com>
	<531F55F1.600@comcast.net>
	<CAA-xNcU0z3MgYe_E8yZGzyRZvZZE88khne1woU+ndAty4QDbhg@mail.gmail.com>
Message-ID: <53208264.90208@comcast.net>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140312/1a70687b/attachment-0001.html>

From woklist at kyngchaos.com  Wed Mar 12 13:41:02 2014
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed, 12 Mar 2014 15:41:02 -0500
Subject: [gdal-dev] CSV to CSV?
Message-ID: <E82ED740-30AC-47C1-8D2A-387E23CE2149@kyngchaos.com>

I can't get a direct CSV to CSV conversion to work.  Taking one of the NGA geoname country files, I created a csvt for field types and a vrt to assign the SRS.  This:

ogr2ogr -select "ufi,uni,cc1,adm1,dsg,full_name_ro" \
-where "fc = 'P' and (nt = 'N' or nt = 'D' or nt = 'P')" \
-f "CSV" -lco "GEOMETRY=AS_XY" -lco "SEPARATOR=TAB" -lco "CREATE_CSVT=YES" \
ca_pp.csv ca.vrt

tells me that "Layer ca already exists".  But that's the input layer/source!

It will convert to shapefile:

ogr2ogr -select "ufi,uni,cc1,adm1,dsg,full_name_ro" \
-where "fc = 'P' and (nt = 'N' or nt = 'D' or nt = 'P')" \
ca_pp ca.vrt

-> ca_pp/ca.shp

But I can't convert that to CSV, I get the same error "Layer ca already exists".

Converting to postgis, then extracting to CSV works (same select, where and lco options).

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"I ache, therefore I am.  Or in my case - I am, therefore I ache."

- Marvin



From vincent.mora at oslandia.com  Thu Mar 13 01:42:33 2014
From: vincent.mora at oslandia.com (Vincent Mora)
Date: Thu, 13 Mar 2014 09:42:33 +0100
Subject: [gdal-dev] WAsP map output for ogr
In-Reply-To: <201403121057.41125.even.rouault@mines-paris.org>
References: <530C77F2.6020305@oslandia.com>
	<1394546311.531f1687f0b21@imp.free.fr>
	<53201288.1000707@oslandia.com>
	<201403121057.41125.even.rouault@mines-paris.org>
Message-ID: <53216F79.4070205@oslandia.com>

On 12/03/2014 10:57, Even Rouault wrote:
> Le mercredi 12 mars 2014 08:53:44, Vincent Mora a ?crit :
>> I've question concerning SRS: what should OGRWAsPLayer::GetSpatialRef()
>> for unknown SRS.
> NULL would be OK.
The shapefile and postgis drivers don't appear to like NULL values for SRS.

From even.rouault at mines-paris.org  Thu Mar 13 01:56:32 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 13 Mar 2014 09:56:32 +0100
Subject: [gdal-dev] WAsP map output for ogr
In-Reply-To: <53216F79.4070205@oslandia.com>
References: <530C77F2.6020305@oslandia.com>
	<1394546311.531f1687f0b21@imp.free.fr>
	<53201288.1000707@oslandia.com>
	<201403121057.41125.even.rouault@mines-paris.org>
	<53216F79.4070205@oslandia.com>
Message-ID: <1394700992.532172c03e1f6@imp.free.fr>

Selon Vincent Mora <vincent.mora at oslandia.com>:

> On 12/03/2014 10:57, Even Rouault wrote:
> > Le mercredi 12 mars 2014 08:53:44, Vincent Mora a ?crit :
> >> I've question concerning SRS: what should OGRWAsPLayer::GetSpatialRef()
> >> for unknown SRS.
> > NULL would be OK.
> The shapefile and postgis drivers don't appear to like NULL values for SRS.

"don't appear to like" : what do you mean exactly ? This is very surprising.
NULL SRS is a very common situation.

>

From sfkeller at gmail.com  Thu Mar 13 03:03:05 2014
From: sfkeller at gmail.com (Stefan Keller)
Date: Thu, 13 Mar 2014 11:03:05 +0100
Subject: [gdal-dev] Make stdin in OGR/GDAL tools cross-platform?
Message-ID: <CAFcOn2-sYO6qH5huYzTh-AZBTy5eeyr6jZbNkNfT2YiNZ3JjPQ@mail.gmail.com>

In OSM driver [1] there's an example about using stdin in OGR which is
Unix based:

> Reading .osm.bz2 files and/or online files
> .osm.bz2 are not natively recognized, however you can process them (on Unix),
> with the following command :
>
> bzcat my.osm.bz2 | ogr2ogr -f SQLite my.sqlite /vsistdin/
>
> You can convert a .osm or .pbf file without downloading it :
> wget -O - http://www.example.com/some.pbf | ogr2ogr -f SQLite my.sqlite /vsistdin/

Is it possible to do that also under Windows? Like this (untested but
inspired by [2]!)

%wget -O - http://www.example.com/some.pbf | ogr2ogr -f SQLite my.sqlite <1
or
% type singapore.geojson | ogrinfo -al -so  <1

--Stefan

[1] http://www.gdal.org/ogr/drv_osm.html
[2] http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/redirection.mspx?mfr=true

From even.rouault at mines-paris.org  Thu Mar 13 03:10:43 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 13 Mar 2014 11:10:43 +0100
Subject: [gdal-dev] Make stdin in OGR/GDAL tools cross-platform?
In-Reply-To: <CAFcOn2-sYO6qH5huYzTh-AZBTy5eeyr6jZbNkNfT2YiNZ3JjPQ@mail.gmail.com>
References: <CAFcOn2-sYO6qH5huYzTh-AZBTy5eeyr6jZbNkNfT2YiNZ3JjPQ@mail.gmail.com>
Message-ID: <1394705443.53218423e165d@imp.free.fr>

Stefan,

/dev/stdin is indeed Unix specific, but /vsistdin/ is a special filename within
GDAL virtual file system handling. So I believe /vsistdin/ should also work on
Windows, but I'm not sure this has been very much tested. Just try !

Even

> In OSM driver [1] there's an example about using stdin in OGR which is
> Unix based:
>
> > Reading .osm.bz2 files and/or online files
> > .osm.bz2 are not natively recognized, however you can process them (on
> Unix),
> > with the following command :
> >
> > bzcat my.osm.bz2 | ogr2ogr -f SQLite my.sqlite /vsistdin/
> >
> > You can convert a .osm or .pbf file without downloading it :
> > wget -O - http://www.example.com/some.pbf | ogr2ogr -f SQLite my.sqlite
> /vsistdin/
>
> Is it possible to do that also under Windows? Like this (untested but
> inspired by [2]!)
>
> %wget -O - http://www.example.com/some.pbf | ogr2ogr -f SQLite my.sqlite <1
> or
> % type singapore.geojson | ogrinfo -al -so  <1
>
> --Stefan
>
> [1] http://www.gdal.org/ogr/drv_osm.html
> [2]
>
http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/redirection.mspx?mfr=true
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From sfkeller at gmail.com  Thu Mar 13 03:34:15 2014
From: sfkeller at gmail.com (Stefan Keller)
Date: Thu, 13 Mar 2014 11:34:15 +0100
Subject: [gdal-dev] Make stdin in OGR/GDAL tools cross-platform?
In-Reply-To: <1394705443.53218423e165d@imp.free.fr>
References: <CAFcOn2-sYO6qH5huYzTh-AZBTy5eeyr6jZbNkNfT2YiNZ3JjPQ@mail.gmail.com>
	<1394705443.53218423e165d@imp.free.fr>
Message-ID: <CAFcOn2_qeUp7bPJ44fjpgmR43iY6+OEoBJ3ygmvB+ph6nD7Hnw@mail.gmail.com>

Hi Even

Oh, sorry for asking something obvious: It works on my Windows with
curl and "/vsistdin/" like e.g.

> curl http://download.geofabrik.de/europe/liechtenstein-latest.osm.pbf | ogr2ogr -f SQLite liechtenstein.sqlite /vsistdin/

Actually there a spurious error when trying to do that with ogrinfo:

> curl http://download.geofabrik.de/europe/liechtenstein-latest.osm.pbf | ogrinfo -al -so /vsistdin/
...
curl: (23) Failed writing body


--Stefan


2014-03-13 11:10 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:
> Stefan,
>
> /dev/stdin is indeed Unix specific, but /vsistdin/ is a special filename within
> GDAL virtual file system handling. So I believe /vsistdin/ should also work on
> Windows, but I'm not sure this has been very much tested. Just try !
>
> Even
>
>> In OSM driver [1] there's an example about using stdin in OGR which is
>> Unix based:
>>
>> > Reading .osm.bz2 files and/or online files
>> > .osm.bz2 are not natively recognized, however you can process them (on
>> Unix),
>> > with the following command :
>> >
>> > bzcat my.osm.bz2 | ogr2ogr -f SQLite my.sqlite /vsistdin/
>> >
>> > You can convert a .osm or .pbf file without downloading it :
>> > wget -O - http://www.example.com/some.pbf | ogr2ogr -f SQLite my.sqlite
>> /vsistdin/
>>
>> Is it possible to do that also under Windows? Like this (untested but
>> inspired by [2]!)
>>
>> %wget -O - http://www.example.com/some.pbf | ogr2ogr -f SQLite my.sqlite <1
>> or
>> % type singapore.geojson | ogrinfo -al -so  <1
>>
>> --Stefan
>>
>> [1] http://www.gdal.org/ogr/drv_osm.html
>> [2]
>>
> http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/redirection.mspx?mfr=true
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>

From woklist at kyngchaos.com  Thu Mar 13 06:37:06 2014
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Thu, 13 Mar 2014 08:37:06 -0500
Subject: [gdal-dev] CSV to CSV?
In-Reply-To: <CACqBkM_D1MW12YE_FgtzKCD=9QTJb4y3e5fxcZGnJvOoTxC=GQ@mail.gmail.com>
References: <E82ED740-30AC-47C1-8D2A-387E23CE2149@kyngchaos.com>
	<CACqBkM_D1MW12YE_FgtzKCD=9QTJb4y3e5fxcZGnJvOoTxC=GQ@mail.gmail.com>
Message-ID: <1363627D-3BAB-41AC-9D5B-4F3DE5292B42@kyngchaos.com>

Whatever it's doing internally, adding -nln ca_pp makes it work.

On Mar 13, 2014, at 1:50 AM, Eli Adam wrote:

> not too sure here are some long shot guesses.
> 
> 
> On Wed, Mar 12, 2014 at 1:41 PM, William Kyngesburye <woklist at kyngchaos.com> wrote:
> I can't get a direct CSV to CSV conversion to work.  Taking one of the NGA geoname country files, I created a csvt for field types and a vrt to assign the SRS.  This:
> 
> ogr2ogr -select "ufi,uni,cc1,adm1,dsg,full_name_ro" \
> -where "fc = 'P' and (nt = 'N' or nt = 'D' or nt = 'P')" \
> -f "CSV" -lco "GEOMETRY=AS_XY" -lco "SEPARATOR=TAB" -lco "CREATE_CSVT=YES" \
> ca_pp.csv ca.vrt
> 
> tells me that "Layer ca already exists".  But that's the input layer/source!
> 
> 
> If you ogrinfo ca.vrt there is probably a layer "ca"?  I think that ogr2ogr internally uses a vrt, perhaps that is causing trouble (making a "ca" layer in ca_pp.csv and running into conflict before then).
>  
> It will convert to shapefile:
> 
> ogr2ogr -select "ufi,uni,cc1,adm1,dsg,full_name_ro" \
> -where "fc = 'P' and (nt = 'N' or nt = 'D' or nt = 'P')" \
> ca_pp ca.vrt
> 
> -> ca_pp/ca.shp
> 
> So this did create a "ca" output layer.  
> 
> You can probably rewrite your -select statement to a -sql "SELECT blah FROM ca WHERE blah2" statement, perhaps that would work better.  You can also do casting like, -sql "SELECT blah, CAST (blah3 AS character(20)) FROM ca WHERE blah2 = 'something'"  You probably already know about the OGR SQL page, http://www.gdal.org/ogr/ogr_sql.html which I need to reference whenever I do casting in OGR SQL dialect.  
> 
> Best Regards, Eli
>  
> 
> But I can't convert that to CSV, I get the same error "Layer ca already exists".
> 
> Converting to postgis, then extracting to CSV works (same select, where and lco options).
> 
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
> 
> "I ache, therefore I am.  Or in my case - I am, therefore I ache."
> 
> - Marvin
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Theory of the Universe

There is a theory which states that if ever anyone discovers exactly what the universe is for and why it is here, it will instantly disappear and be replaced by something even more bizarrely inexplicable.  There is another theory which states that this has already happened.

-Hitchhiker's Guide to the Galaxy 2nd season intro



From jukka.rahkonen at mmmtike.fi  Thu Mar 13 07:46:50 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 13 Mar 2014 14:46:50 +0000 (UTC)
Subject: [gdal-dev] Make stdin in OGR/GDAL tools cross-platform?
References: <CAFcOn2-sYO6qH5huYzTh-AZBTy5eeyr6jZbNkNfT2YiNZ3JjPQ@mail.gmail.com>
	<1394705443.53218423e165d@imp.free.fr>
	<CAFcOn2_qeUp7bPJ44fjpgmR43iY6+OEoBJ3ygmvB+ph6nD7Hnw@mail.gmail.com>
Message-ID: <loom.20140313T154544-638@post.gmane.org>

Stefan Keller <sfkeller <at> gmail.com> writes:

> 
> Hi Even
> 
> Oh, sorry for asking something obvious: It works on my Windows with
> curl and "/vsistdin/" like e.g.
> 
> > curl http://download.geofabrik.de/europe/liechtenstein-latest.osm.pbf |
ogr2ogr -f SQLite
> liechtenstein.sqlite /vsistdin/

Or through /vsicurl/ simply as

ogrinfo /vsicurl/http://download.geofabrik.de/europe/albania-latest.osm.pbf
 

-Jukka Rahkonen-




From vincent.mora at oslandia.com  Thu Mar 13 12:19:58 2014
From: vincent.mora at oslandia.com (Vincent Mora)
Date: Thu, 13 Mar 2014 20:19:58 +0100
Subject: [gdal-dev] WAsP map output for ogr
In-Reply-To: <1394700992.532172c03e1f6@imp.free.fr>
References: <530C77F2.6020305@oslandia.com>
	<1394546311.531f1687f0b21@imp.free.fr>
	<53201288.1000707@oslandia.com>
	<201403121057.41125.even.rouault@mines-paris.org>
	<53216F79.4070205@oslandia.com>
	<1394700992.532172c03e1f6@imp.free.fr>
Message-ID: <532204DE.4070607@oslandia.com>

Ticket & patch http://trac.osgeo.org/gdal/ticket/5416

On 13/03/2014 09:56, Even Rouault wrote:
> Selon Vincent Mora <vincent.mora at oslandia.com>:
>
>> On 12/03/2014 10:57, Even Rouault wrote:
>>> Le mercredi 12 mars 2014 08:53:44, Vincent Mora a ?crit :
>>>> I've question concerning SRS: what should OGRWAsPLayer::GetSpatialRef()
>>>> for unknown SRS.
>>> NULL would be OK.
>> The shapefile and postgis drivers don't appear to like NULL values for SRS.
> "don't appear to like" : what do you mean exactly ? This is very surprising.
> NULL SRS is a very common situation.
>


From even.rouault at mines-paris.org  Thu Mar 13 14:57:31 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 13 Mar 2014 22:57:31 +0100
Subject: [gdal-dev] WAsP map output for ogr
In-Reply-To: <532204DE.4070607@oslandia.com>
References: <530C77F2.6020305@oslandia.com>
	<1394700992.532172c03e1f6@imp.free.fr>
	<532204DE.4070607@oslandia.com>
Message-ID: <201403132257.31244.even.rouault@mines-paris.org>

Le jeudi 13 mars 2014 20:19:58, Vincent Mora a ?crit :
> Ticket & patch http://trac.osgeo.org/gdal/ticket/5416

Commited. There is however an issue when GEOS isn't available. See ticket.

> 
> On 13/03/2014 09:56, Even Rouault wrote:
> > Selon Vincent Mora <vincent.mora at oslandia.com>:
> >> On 12/03/2014 10:57, Even Rouault wrote:
> >>> Le mercredi 12 mars 2014 08:53:44, Vincent Mora a ?crit :
> >>>> I've question concerning SRS: what should
> >>>> OGRWAsPLayer::GetSpatialRef() for unknown SRS.
> >>> 
> >>> NULL would be OK.
> >> 
> >> The shapefile and postgis drivers don't appear to like NULL values for
> >> SRS.
> > 
> > "don't appear to like" : what do you mean exactly ? This is very
> > surprising. NULL SRS is a very common situation.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jiangpeixuan1 at gmail.com  Thu Mar 13 18:10:51 2014
From: jiangpeixuan1 at gmail.com (Peixuan Jiang)
Date: Thu, 13 Mar 2014 21:10:51 -0400
Subject: [gdal-dev] inquiry about the requirements in the proposal
Message-ID: <CAE2syuECaNmGci34u0u4+hw5V9ubxdp17ODMBSpqEhveiwFOhg@mail.gmail.com>

Deal all:
can any one tell me what specific content should be included in the
proposal according to the GDAL  program except the general requirements of
Google summer code?

Thanks a lot !
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140313/86fecb79/attachment.html>

From mateusz at loskot.net  Fri Mar 14 01:25:09 2014
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Fri, 14 Mar 2014 09:25:09 +0100
Subject: [gdal-dev] FWD: OGC seeks comment on revised GML in JPEG 2000
Message-ID: <CABUeae9up51qsOmg-HNgHj=zZZnk1a7z1A2fe4zRm1YFCr-JeA@mail.gmail.com>

Hi,

I think this may be of interested within the GDAL community:

http://www.opengeospatial.org/pressroom/pressreleases/1965

Best regards,
-- 
Mateusz  ?oskot, http://mateusz.loskot.net

From jukka.rahkonen at mmmtike.fi  Fri Mar 14 05:02:55 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 14 Mar 2014 12:02:55 +0000 (UTC)
Subject: [gdal-dev] FWD: OGC seeks comment on revised GML in JPEG 2000
References: <CABUeae9up51qsOmg-HNgHj=zZZnk1a7z1A2fe4zRm1YFCr-JeA@mail.gmail.com>
Message-ID: <loom.20140314T110343-390@post.gmane.org>

Mateusz ?oskot <mateusz <at> loskot.net> writes:

> Hi,
> 
> I think this may be of interested within the GDAL community:
> 
> http://www.opengeospatial.org/pressroom/pressreleases/1965

Hi,

First time ever I tried to send feedback to OGC. Let's see if my mail went
through. I commented two issues:

1. It looks like OGC has defined that origin in georeferencing means the
centre of pixel in change number 6:
Clarification of the use of CRS and Rectified grid coverage / image
georeference with origin point (at pixel center). Is this interpretation
right and could it be expressed in some fool proof way, like
"Origin of the RectifiedGrid is placed at the centre point of the corner pixel"

2. Throughout the paper srsNames are given in two different ways. 
- srsName="http://www.opengis.net/def/crs/EPSG/0/4326"
- srsName="urn:ogc:def:crs:EPSG::4326"
In one example there is even this.
- srsName="EPSG:4326"

I believe that it means that both http and urn versions can be used but
there was not enough room in the 91 pages long document to tell that.
Perhaps the meaning is to be explicit and therefore there is a reference to
another document with number OGC 07-092r3
http://portal.opengeospatial.org/files/?artifact_id=30575
However, reading OGC 07-092r3 does not help, that document does not mention
at all that srsName="http://www.opengis.net/def/crs/EPSG/0/4326" could be
used but it knows only the urn syntax.

The same thing in with units of measures. There is a table 3 "URIs for
units-of-measure" that gives examples of how to refer to UoM and they are like
- http://www.opengis.net/def/uom/OGC/1.0/metre or
- http://www.opengis.net/def/uom/EPSG/6.3/9001

But in XML examples UoMs are expressed mostly as
- uom="urn:ogc:def:uom:EPSG::9001"

There seems to be also at least one copy-paste error in the examples:
<Envelope srsName="http://www.opengis.net/def/crs/EPSG/0/4326" 
axisLabels="Lat Long" uomLabels="deg deg" srsDimension="2">
<lowerCorner>270379.500 3942462.000</lowerCorner>
<upperCorner>518842.500 3942462.000</upperCorner>
</Envelope>

-Jukka Rahkonen-



From even.rouault at mines-paris.org  Fri Mar 14 06:25:00 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 14 Mar 2014 14:25:00 +0100
Subject: [gdal-dev] FWD: OGC seeks comment on revised GML in JPEG 2000
In-Reply-To: <loom.20140314T110343-390@post.gmane.org>
References: <CABUeae9up51qsOmg-HNgHj=zZZnk1a7z1A2fe4zRm1YFCr-JeA@mail.gmail.com>
	<loom.20140314T110343-390@post.gmane.org>
Message-ID: <1394803500.5323032c2d653@imp.free.fr>

Hi,

I'm also trying to read that - beeeeeeeep - too long document and I guess I
should also read GMLCOV to make sense of it....

One thing among others that is not clear to me is if the coordinates of GML
features that can be embedded in the GMLJP2CoverageCollection are expressed in
pixel coordinates or in georeferenced coordinates. I may have miss something in
the doc... The example at page 47-48 would lead me to think this is pixel
coordinates because of the bounding box of the coverage collection.

At first sight, I'd say that the current GMLJP2 reader in GDAL should be able to
cope with GMLJP2 2.0 (limited to retrieving SRS + geotransformation matrix) with
few, if any, changes (metadata or features left apart). The write part would
need changes of course. "feature 67 in the reader requirements box " seems to be
an extra annoyance to handle. I'm wondering who will really implement such a
chek in the reading part, so it suse is probably just an opportunity to burn a
few extra trees by people printing the spec.

Oh well...

Even

> Mateusz ??oskot <mateusz <at> loskot.net> writes:
>
> > Hi,
> >
> > I think this may be of interested within the GDAL community:
> >
> > http://www.opengeospatial.org/pressroom/pressreleases/1965
>
> Hi,
>
> First time ever I tried to send feedback to OGC. Let's see if my mail went
> through. I commented two issues:
>
> 1. It looks like OGC has defined that origin in georeferencing means the
> centre of pixel in change number 6:
> Clarification of the use of CRS and Rectified grid coverage / image
> georeference with origin point (at pixel center). Is this interpretation
> right and could it be expressed in some fool proof way, like
> "Origin of the RectifiedGrid is placed at the centre point of the corner
> pixel"
>
> 2. Throughout the paper srsNames are given in two different ways.
> - srsName="http://www.opengis.net/def/crs/EPSG/0/4326"
> - srsName="urn:ogc:def:crs:EPSG::4326"
> In one example there is even this.
> - srsName="EPSG:4326"
>
> I believe that it means that both http and urn versions can be used but
> there was not enough room in the 91 pages long document to tell that.
> Perhaps the meaning is to be explicit and therefore there is a reference to
> another document with number OGC 07-092r3
> http://portal.opengeospatial.org/files/?artifact_id=30575
> However, reading OGC 07-092r3 does not help, that document does not mention
> at all that srsName="http://www.opengis.net/def/crs/EPSG/0/4326" could be
> used but it knows only the urn syntax.
>
> The same thing in with units of measures. There is a table 3 "URIs for
> units-of-measure" that gives examples of how to refer to UoM and they are
> like
> - http://www.opengis.net/def/uom/OGC/1.0/metre or
> - http://www.opengis.net/def/uom/EPSG/6.3/9001
>
> But in XML examples UoMs are expressed mostly as
> - uom="urn:ogc:def:uom:EPSG::9001"
>
> There seems to be also at least one copy-paste error in the examples:
> <Envelope srsName="http://www.opengis.net/def/crs/EPSG/0/4326"
> axisLabels="Lat Long" uomLabels="deg deg" srsDimension="2">
> <lowerCorner>270379.500 3942462.000</lowerCorner>
> <upperCorner>518842.500 3942462.000</upperCorner>
> </Envelope>
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From kansal.k at gmail.com  Fri Mar 14 06:28:36 2014
From: kansal.k at gmail.com (Kshitij Kansal)
Date: Fri, 14 Mar 2014 18:58:36 +0530
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <CAKTWcSnjZ0j9uek+QeULFvHpP04wgcWs0Br_kQ7juw0iWnMOZQ@mail.gmail.com>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<1390896882268-5100379.post@n6.nabble.com>
	<CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>
	<201401282101.00768.even.rouault@mines-paris.org>
	<CAKTWcS=CviogV2Kc5hVkqUkSOECwGiVtqVLzdET4zR1xJb2SMA@mail.gmail.com>
	<loom.20140129T084029-6@post.gmane.org>
	<CAKTWcSmH2drpYqYH+J9F37XRNNu7xxXc+ZQ5WGTcmD5qYqC0Vg@mail.gmail.com>
	<CAKTWcSmu1NqwhFjSpu_yTEstK63jyOa_gm4Tp9N+35Dssrpn5w@mail.gmail.com>
	<1391806418.52f547d239b63@imp.free.fr>
	<CAKTWcSkbXgRD=TcOne+=HEyvHDJAPhJGROqWd5MdvYX9k-10+A@mail.gmail.com>
	<52F5ECBB.6010507@gmail.com>
	<CAKTWcSnjZ0j9uek+QeULFvHpP04wgcWs0Br_kQ7juw0iWnMOZQ@mail.gmail.com>
Message-ID: <CAKTWcS=9dfhvBv_fQUP+2T3w3jVtxFcjdrKaCY41k3mFzAyTdg@mail.gmail.com>

Hello everyone

Continuing the previous discussion, I would like to propose something and
the community's suggestions are welcomed/needed. I can understand that this
thread is a little old, so let me remind you that its regarding the
automatic geo-referencer idea. The idea is also proposed on the GDAL ideas
page (http://trac.osgeo.org/gdal/wiki/SummerOfCode).

Based on the previous discussions, what came out was that we can improve
the current implementation of SIMPLE SURF in GDAL which was developed as a
part of 2012 GSOC GDAL Correlator project, to support *large data* and *multi
spectral imagery*. And then apply this *modified* algorithm for the
geo-reference purposes. Now I have been in touch with Chaitanya, who is
willing to mentor this project, and there are some things on which we would
like to know community's suggestions/response.

There are basically two things that can be done regarding this project:

1. As mentioned above, we can modify the SIMPLE SURF algorithm and make it
much better for the geo-reference purposes. Already, a lot had been
discussed on this and we have a fairly good idea about what is to be done.

2. One more thing that can be done is that we can implement BRISK
algorithm[1] instead of SURF along with the FLANN matcher for this purpose.
What advantages this thing offers is that it is fairly fast and gives
comparable outputs along with that it works well with fairly large data
sets. So we do not need to segment the imagery as we would have done in the
case of SURF. Also added to this, this algorithm also has no patent issues.
We had a lot of problem regarding patent issues in SIFT/SURF and we
discussed them at length on the mailing list as well.

One thing that I fell can be done is that  two proposal can be written, one
for each and then community can decide accordingly which one is more
useful. Or we can decide it here itself..?

Kindly provide your valuable comments and suggestion..

With Regards,

Kshitij Kansal

Lab For Spatial Informatics,

IIIT Hyderabad

1. http://www.robots.ox.ac.uk/~vgg/rg/papers/brisk.pdf

On Thu, Feb 13, 2014 at 2:23 PM, Kshitij Kansal <kansal.k at gmail.com> wrote:

> Hello Everyone
>
> I have updated the Summer Of Code Ideas Page for GDAL. I have Introduced
> the above idea in that page also. Mr. Chaitanya Kumar is willing to mentor
> the project.
>
> Please look into this.
>
> Suggestions and Comments are welcomed.
>
> Regards,
>
> Kshitij Kansal
>
> Lab For Spatial Informatics,
>
> IIIT Hyderabad
>
>
>
> On Sat, Feb 8, 2014 at 2:07 PM, Dmitriy Baryshnikov <bishop.dev at gmail.com>wrote:
>
>>  Hi,
>>
>> Even note that you cannot get the code from this projects and merge it to
>> GDAL, but you  free to develop you own implementation of this algorithms as
>> path of GDAL.
>> This is a same situation with correlator. Andrew cannot get code from
>> OpenCV and GRASS as incompatible licenses, so the own (simple)
>> implementation was provided.
>> One can change this implementation to be more advanced: support large
>> datasets, more bands, etc. Everybody  welcome to do it.
>>
>> Best regards,
>>     Dmitry
>>
>> 08.02.2014 2:15, Kshitij Kansal ?????:
>>
>> Sir
>>
>>  I am providing the links for both the algorithms that I talked. I am
>> new to this licence issues thing so I would be highly grateful if you can
>> clarify doubts and if can proceed on working for this idea.
>>
>>  http://www.cs.ubc.ca/~lowe/keypoints/ (SIFT)
>>  http://www.ipol.im/pub/art/2011/my-asift/ (ASIFT) [here source code is
>> provided. It contains license ]
>>  http://www.cmap.polytechnique.fr/~yu/research/ASIFT/demo.html (Demo
>> Page for ASIFT)
>>
>>  The SIFT algorithm in itself is patented. They only provide binaries. I
>> am not sure If we can use those binaries or not.
>> As far as ASIFT is concerned, i think its implementation is only
>> patented.
>>
>>  Kindly clarify this.
>>
>>  Thanking You
>> With Regards,
>>
>>  Kshitij Kansal
>>
>> Lab For Spatial Informatics,
>>
>> IIIT Hyderabad
>>
>>
>>
>> On Sat, Feb 8, 2014 at 2:23 AM, Even Rouault <
>> even.rouault at mines-paris.org> wrote:
>>
>>> Selon Kshitij Kansal <kansal.k at gmail.com>:
>>>
>>> Kshitij,
>>>
>>> I'm surprised that you mention licenses
>>> for algorithms. What are your sources for that?
>>> Only *implementations* can be licensed
>>> not algorithms themselves. So if you
>>> develop your own implementation you are free
>>> to select the license you wish. There
>>> might be issues linked to potential pattents
>>> in some countries but that is acceptable in my opinion
>>> as software parents are not valid in all contries
>>> so mentionning potential issues with them
>>> in the documentation is sufficient .
>>>
>>> > Hello
>>> >
>>> > Based on all suggestion
>>>  ins and comments above, I have come up with one thing.
>>> >
>>> > The most important thing that could have been a road block for this
>>> project
>>> > was licence issues which was pointed by Even Rouault.
>>> >
>>> > I am interested in implementing the SIFT or ASIFT algorithms for
>>> automatic
>>> > geo-referencing which I proposed in above mails. I am interested in
>>> making
>>> > a separate tool which will be completely based on the GDAL and
>>> maintained
>>> > by GDAL community. I looked into the GDAL-correlator idea which was
>>> also
>>>  > implemented as a part of GSoC. That idea uses only *SIMPLE SURF
>>> *algorithm
>>> > for control point detection and is only *limited to small size three
>>> band
>>> > imagery(RGB)*.
>>> >
>>> > I am interested in developing something that is fully automated and
>>> works
>>> > on large multi band imagery.But the above two algorithms that I am
>>> planning
>>> > to use come up with the licence that does not allows the free use for
>>>  > commercial purposes. The free use of above algorithm are restricted
>>> to *"non
>>> > profit research and non profit educational purposes"*(in case of
>>> > ASIFT) and *"research
>>>  > purposes only" *(in case of SIFT).
>>>  >
>>> > This means that the final product as a result of this product will
>>> also be
>>> > bounded by the above licences. It can not go into GDAL's main
>>> distribution
>>> > but can be used as a separate utility of GDAL for non-commercial uses
>>> only.
>>> > Basically the commercial use of the tool won't be allowed without
>>> approval
>>> > from the concerned people.
>>> >
>>> > Your views and suggestions are highly appreciated.
>>> >
>>> > Regards,
>>> >
>>> > Kshitij Kansal
>>> >
>>> > Lab For Spatial Informatics,
>>> >
>>> > IIIT Hyderabad
>>> >
>>> >
>>> >
>>> > On Thu, Jan 30, 2014 at 12:25 PM, Kshitij Kansal <kansal.k at gmail.com>
>>> wrote:
>>> >
>>> > > Hello
>>> > >
>>> > > @Jukka Rahkonen: The OSSIM project (the link you provided) is more of
>>> > > image orthorectification. Although
>>> > > they are doing image co-registration but its as one of the steps of
>>> > > orthorectification(I could only understand this from the manual).
>>> > > Also I am not sure of the techniques they are using for this
>>> purposes.
>>> > > (Its written corner point detection but How?)
>>> > > I am new to OSSIM, so not aware of this thing's functionality and
>>> > > accuracy. I am in the process of estimating it.
>>> > >
>>> > > Thank you for pointing this out.
>>> > >
>>> > > Coming to the Frank Warmerdam's blog (http://fwarmerdam.blogspot.fi/
>>> ).
>>> > > Here the author is talking about writing a code for converting the
>>> GCP's
>>> > > into RPC's. But the next question comes is where is he getting GCP's
>>> from.
>>> > > Now this is the part where I aim to work on and improve.
>>> > >
>>> > > Given two images, if we can automatically extract GCP's from them
>>> then we
>>> > > are in a way speeding up and automating this whole process. Once we
>>> have
>>> > > GCP, there are a lot of things that we can do from them like
>>> > > geo-referencing(which I plan on doing), image stitching etc.
>>> > >
>>>  > > *Also you talked about a "more light weighted system". Can you
>>> please
>>> > > elaborate on this?* I could not understand what you actually meant
>>> from
>>> > > that.
>>> > >
>>> > > If we look into the last year idea's page (
>>> > > http://trac.osgeo.org/gdal/wiki/SummerOfCode), there is one idea
>>> that is
>>> > > proposed regarding the "Raster/Vector geo-referencer on the Web". I
>>> want to
>>> > > modify this idea a little bit and want to automate the whole
>>> process. As
>>> > > far as the automation is concerned, we can develop GDAL functions for
>>> > > that(which will be completely re-usable) and then developing a Web
>>> based
>>> > > geo-referencer would only require calling those functions.
>>> > >
>>>  > > If we do this thing,* two objectives will be fulfilled*.* First*,
>>> GDAL
>>> > > will get a web based geo-referencer. *Secondly*, communities that use
>>>  > > GDAL and have not developed these kind of geo-referencer(Like
>>> QGIS) can
>>> > > directly use the functions developed and then build on that.
>>> > >
>>> > > Suggestions and comments are welcomed.
>>> > >
>>> > > Thank you for your propositions.
>>> > >
>>> > > Regards,
>>> > >
>>> > >  Kshitij Kansal
>>> > >
>>> > > Lab For Spatial Informatics,
>>> > >
>>> > > IIIT Hyderabad
>>> > >
>>> > >
>>> > >
>>> > > On Wed, Jan 29, 2014 at 1:27 PM, Jukka Rahkonen <
>>> jukka.rahkonen at mmmtike.fi
>>> > > > wrote:
>>> > >
>>> > >> Kshitij Kansal <kansal.k <at> gmail.com> writes:
>>> > >>
>>> > >> >
>>> > >> > Even,
>>> > >> > Thank you for pointing out this issue. I will keep this in mind.
>>> > >> >
>>> > >> > I will look into that last year project and try to understand the
>>> > >> implementation.
>>> > >> >
>>> > >>
>>> > >> > More suggestions and comments are always welcomed.
>>> > >>
>>> > >> Hi,
>>> > >>
>>> > >> Another OSGeo project OSSIM has implemented an automatic image to
>>> image
>>> > >> rectification. Isn't that a bit alike your plan?
>>> > >>
>>> http://download.osgeo.org/ossim/docs/OSSIM_Coregistration_UserManual.pdf
>>> > >>
>>> > >> Frank Warmerdam seems to entertain himself with something related
>>> > >> http://fwarmerdam.blogspot.fi/
>>> > >>
>>> > >> This article from 2013 may also give some inspiration
>>> > >>
>>> > >>
>>> >
>>>
>>> http://www.academia.edu/4388853/OrientAL_-_Automatic_geo-referencing_and_ortho-rectification_of_archaeological_aerial_photographs
>>> > >>
>>> > >> All these three aim to very high quality and I am sure that there
>>> is also
>>> > >> need for a more light-weight system.
>>> > >>
>>> > >> -Jukka Rahkonen-
>>> > >>
>>> > >> _______________________________________________
>>> > >> gdal-dev mailing list
>>> > >> gdal-dev at lists.osgeo.org
>>> > >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>> > >>
>>> > >
>>> > >
>>> >
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140314/184128fb/attachment-0001.html>

From even.rouault at mines-paris.org  Fri Mar 14 08:42:29 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 14 Mar 2014 16:42:29 +0100
Subject: [gdal-dev] Motion: Commit Access for Vincent Mora
Message-ID: <1394811749.53232365ab854@imp.free.fr>

Motion: Extend GDAL/OGR commit access to Vincent Mora.

---

I'd like to make it easier for Vincent to maintain and improve the recently
committed OGR WaSP driver, without me being the bottleneck. He has demonstrated
a good knowledge of OGR working, and good interaction with our community.

Vincent, could you answer to this email to state that you have read and agreed
to the GDAL commiter guidelines :
http://trac.osgeo.org/gdal/wiki/rfc3_commiters

I'll start the voting with:

+1 Even

Best regards,

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From vincent.mora at oslandia.com  Fri Mar 14 08:51:13 2014
From: vincent.mora at oslandia.com (Vincent Mora)
Date: Fri, 14 Mar 2014 16:51:13 +0100
Subject: [gdal-dev] Motion: Commit Access for Vincent Mora
In-Reply-To: <1394811749.53232365ab854@imp.free.fr>
References: <1394811749.53232365ab854@imp.free.fr>
Message-ID: <53232571.7070306@oslandia.com>

On 14/03/2014 16:42, Even Rouault wrote:
> Motion: Extend GDAL/OGR commit access to Vincent Mora.
>
> ---
>
> I'd like to make it easier for Vincent to maintain and improve the recently
> committed OGR WaSP driver, without me being the bottleneck. He has demonstrated
> a good knowledge of OGR working, and good interaction with our community.
>
> Vincent, could you answer to this email to state that you have read and agreed
> to the GDAL commiter guidelines :
> http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start the voting with:
>
> +1 Even
>
> Best regards,
>
I have read and agreed to the GDAL commiter guidelines : 
http://trac.osgeo.org/gdal/wiki/rfc3_commiters

From bishop.dev at gmail.com  Fri Mar 14 11:51:45 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Fri, 14 Mar 2014 22:51:45 +0400
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <CAKTWcS=9dfhvBv_fQUP+2T3w3jVtxFcjdrKaCY41k3mFzAyTdg@mail.gmail.com>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>	<1390896882268-5100379.post@n6.nabble.com>	<CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>	<201401282101.00768.even.rouault@mines-paris.org>	<CAKTWcS=CviogV2Kc5hVkqUkSOECwGiVtqVLzdET4zR1xJb2SMA@mail.gmail.com>	<loom.20140129T084029-6@post.gmane.org>	<CAKTWcSmH2drpYqYH+J9F37XRNNu7xxXc+ZQ5WGTcmD5qYqC0Vg@mail.gmail.com>	<CAKTWcSmu1NqwhFjSpu_yTEstK63jyOa_gm4Tp9N+35Dssrpn5w@mail.gmail.com>	<1391806418.52f547d239b63@imp.free.fr>	<CAKTWcSkbXgRD=TcOne+=HEyvHDJAPhJGROqWd5MdvYX9k-10+A@mail.gmail.com>	<52F5ECBB.6010507@gmail.com>	<CAKTWcSnjZ0j9uek+QeULFvHpP04wgcWs0Br_kQ7juw0iWnMOZQ@mail.gmail.com>
	<CAKTWcS=9dfhvBv_fQUP+2T3w3jVtxFcjdrKaCY41k3mFzAyTdg@mail.gmail.com>
Message-ID: <53234FC1.7050503@gmail.com>

Hi,

I think we need to decide it here, not to create lot of proposals. The 
second idea is very interesting. Maybe it worth to create some common 
interface (or API) to add new methods BRISK, SURF, SIFT etc.
You can develop you realisation of BRISK and demonstrate how-to one can 
use it via such common interface.
E.g. in GDALComputeMatchingPoints add enum for algorithms or use exist  
papszOptions.

Best regards,
     Dmitry

14.03.2014 17:28, Kshitij Kansal ?????:
> Hello everyone
>
> Continuing the previous discussion, I would like to propose something 
> and the community's suggestions are welcomed/needed. I can understand 
> that this thread is a little old, so let me remind you that its 
> regarding the automatic geo-referencer idea. The idea is also proposed 
> on the GDAL ideas page (http://trac.osgeo.org/gdal/wiki/SummerOfCode).
>
> Based on the previous discussions, what came out was that we can 
> improve the current implementation of SIMPLE SURF in GDAL which was 
> developed as a part of 2012 GSOC GDAL Correlator project, to support 
> *large data* and *multi spectral imagery*. And then apply this 
> *modified* algorithm for the geo-reference purposes. Now I have been 
> in touch with Chaitanya, who is willing to mentor this project, and 
> there are some things on which we would like to know community's 
> suggestions/response.
>
> There are basically two things that can be done regarding this project:
>
> 1. As mentioned above, we can modify the SIMPLE SURF algorithm and 
> make it much better for the geo-reference purposes. Already, a lot had 
> been discussed on this and we have a fairly good idea about what is to 
> be done.
>
> 2. One more thing that can be done is that we can implement BRISK 
> algorithm[1] instead of SURF along with the FLANN matcher for this 
> purpose. What advantages this thing offers is that it is fairly fast 
> and gives comparable outputs along with that it works well with fairly 
> large data sets. So we do not need to segment the imagery as we would 
> have done in the case of SURF. Also added to this, this algorithm also 
> has no patent issues. We had a lot of problem regarding patent issues 
> in SIFT/SURF and we discussed them at length on the mailing list as well.
>
> One thing that I fell can be done is that  two proposal can be 
> written, one for each and then community can decide accordingly which 
> one is more useful. Or we can decide it here itself..?
>
> Kindly provide your valuable comments and suggestion..
>
> With Regards,
>
>     Kshitij Kansal
>
>     Lab For Spatial Informatics,
>
>     IIIT Hyderabad
>
> 1. http://www.robots.ox.ac.uk/~vgg/rg/papers/brisk.pdf 
> <http://www.robots.ox.ac.uk/%7Evgg/rg/papers/brisk.pdf>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140314/0344501c/attachment.html>

From warmerdam at pobox.com  Fri Mar 14 11:59:03 2014
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 14 Mar 2014 11:59:03 -0700
Subject: [gdal-dev] Motion: Commit Access for Vincent Mora
In-Reply-To: <1394811749.53232365ab854@imp.free.fr>
References: <1394811749.53232365ab854@imp.free.fr>
Message-ID: <CA+YzLBfPosssJ=8bDkpX_isKkA8kJyCC41DCX2CVqksFo+mU+w@mail.gmail.com>

+1 Frank



On Fri, Mar 14, 2014 at 8:42 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Motion: Extend GDAL/OGR commit access to Vincent Mora.
>
> ---
>
> I'd like to make it easier for Vincent to maintain and improve the recently
> committed OGR WaSP driver, without me being the bottleneck. He has
> demonstrated
> a good knowledge of OGR working, and good interaction with our community.
>
> Vincent, could you answer to this email to state that you have read and
> agreed
> to the GDAL commiter guidelines :
> http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start the voting with:
>
> +1 Even
>
> Best regards,
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140314/9fc1d492/attachment.html>

From chaitanya.ch at gmail.com  Fri Mar 14 11:59:37 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat, 15 Mar 2014 00:29:37 +0530
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <53234FC1.7050503@gmail.com>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<1390896882268-5100379.post@n6.nabble.com>
	<CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>
	<201401282101.00768.even.rouault@mines-paris.org>
	<CAKTWcS=CviogV2Kc5hVkqUkSOECwGiVtqVLzdET4zR1xJb2SMA@mail.gmail.com>
	<loom.20140129T084029-6@post.gmane.org>
	<CAKTWcSmH2drpYqYH+J9F37XRNNu7xxXc+ZQ5WGTcmD5qYqC0Vg@mail.gmail.com>
	<CAKTWcSmu1NqwhFjSpu_yTEstK63jyOa_gm4Tp9N+35Dssrpn5w@mail.gmail.com>
	<1391806418.52f547d239b63@imp.free.fr>
	<CAKTWcSkbXgRD=TcOne+=HEyvHDJAPhJGROqWd5MdvYX9k-10+A@mail.gmail.com>
	<52F5ECBB.6010507@gmail.com>
	<CAKTWcSnjZ0j9uek+QeULFvHpP04wgcWs0Br_kQ7juw0iWnMOZQ@mail.gmail.com>
	<CAKTWcS=9dfhvBv_fQUP+2T3w3jVtxFcjdrKaCY41k3mFzAyTdg@mail.gmail.com>
	<53234FC1.7050503@gmail.com>
Message-ID: <CAMKgpOY8SVPZTQzkr_WE+KsOdwD3K8BjkbVXry_kuDpgXf+xKg@mail.gmail.com>

Kshitij,

What is the performance of the proposed algorithms for very large rasters?
If one of them is good with large images that's a cleaner choice without
all the workaround with scaling the rasters.

--
Best regards,
Chaitanya Kumar CH
On 15-Mar-2014 12:22 am, "Dmitriy Baryshnikov" <bishop.dev at gmail.com> wrote:

>  Hi,
>
> I think we need to decide it here, not to create lot of proposals. The
> second idea is very interesting. Maybe it worth to create some common
> interface (or API) to add new methods BRISK, SURF, SIFT etc.
> You can develop you realisation of BRISK and demonstrate how-to one can
> use it via such common interface.
> E.g. in GDALComputeMatchingPoints add enum for algorithms or use exist
> papszOptions.
>
> Best regards,
>     Dmitry
>
> 14.03.2014 17:28, Kshitij Kansal ?????:
>
> Hello everyone
>
>  Continuing the previous discussion, I would like to propose something
> and the community's suggestions are welcomed/needed. I can understand that
> this thread is a little old, so let me remind you that its regarding the
> automatic geo-referencer idea. The idea is also proposed on the GDAL ideas
> page (http://trac.osgeo.org/gdal/wiki/SummerOfCode).
>
>  Based on the previous discussions, what came out was that we can improve
> the current implementation of SIMPLE SURF in GDAL which was developed as a
> part of 2012 GSOC GDAL Correlator project, to support *large data* and *multi
> spectral imagery*. And then apply this *modified* algorithm for the
> geo-reference purposes. Now I have been in touch with Chaitanya, who is
> willing to mentor this project, and there are some things on which we would
> like to know community's suggestions/response.
>
>  There are basically two things that can be done regarding this project:
>
>  1. As mentioned above, we can modify the SIMPLE SURF algorithm and make
> it much better for the geo-reference purposes. Already, a lot had been
> discussed on this and we have a fairly good idea about what is to be done.
>
>  2. One more thing that can be done is that we can implement BRISK
> algorithm[1] instead of SURF along with the FLANN matcher for this purpose.
> What advantages this thing offers is that it is fairly fast and gives
> comparable outputs along with that it works well with fairly large data
> sets. So we do not need to segment the imagery as we would have done in the
> case of SURF. Also added to this, this algorithm also has no patent issues.
> We had a lot of problem regarding patent issues in SIFT/SURF and we
> discussed them at length on the mailing list as well.
>
>  One thing that I fell can be done is that  two proposal can be written,
> one for each and then community can decide accordingly which one is more
> useful. Or we can decide it here itself..?
>
>  Kindly provide your valuable comments and suggestion..
>
>  With Regards,
>
>  Kshitij Kansal
>
> Lab For Spatial Informatics,
>
> IIIT Hyderabad
>
>   1. http://www.robots.ox.ac.uk/~vgg/rg/papers/brisk.pdf
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140315/af89b2af/attachment-0001.html>

From fjitiaux at gmail.com  Sat Mar 15 06:15:23 2014
From: fjitiaux at gmail.com (Florent JITIAUX)
Date: Sat, 15 Mar 2014 14:15:23 +0100
Subject: [gdal-dev]  Gdal Java project / parser
Message-ID: <CAL81ghDJecx5MOX3tXdgKWwmzb-Vg1m+KSN4vb-=HMEFxFgVOQ@mail.gmail.com>

Hi all,

Gdal is a very powerfull project and I use the Java binding. However, even
with the Javadoc, sometimes I need to read the source of the project to
understand how it works. That's why I try to make a parser to help people
(and me) to use Gdal with Java.

The question is I don't really know how to publish my code. Because it's
all based on Gdal, is it possible to publish it on your SVN or do i need to
make a project on Github or Sourceforge ?

The first step of my project is to organize gdal constants in enum : I put
all constants of the same type (color interpretation, error type, data
type, ...) in one enum class. I took all comments from the Javadoc (when
they were available). Here the sources.

I need some advices to improve the code and comments, and maybe how to
organize my whole project. Next I will to list all drivers in enum or maybe
to create a class for each driver.

Florent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140315/1c13e995/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdalconst.zip
Type: application/zip
Size: 16163 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140315/1c13e995/attachment.zip>

From boxerab at gmail.com  Sat Mar 15 07:05:23 2014
From: boxerab at gmail.com (Aaron Boxer)
Date: Sat, 15 Mar 2014 10:05:23 -0400
Subject: [gdal-dev] Enter The Chicken
Message-ID: <CAK8GPyDgZVxMt3NF7=xcECR-Mu0WtfNjM3V-422_=pSwA80nug@mail.gmail.com>

Hello,

For those of you who are interested in high performance JPEG 2000, I have
just
launched my ThousandthChicken OpenCL library.

https://github.com/OpenCodec/ThousandthChicken

My design goals are:

- correctness
- speed
- stability - comprehensive test suite
- well documented :)
- cross platform

Currently, I am only focusing on decompression.

The project can currently not do much: it can parse a jpeg2000 file format,
and there are stubs to decompress, but these stubs are currently designed
for CUDA.

I am using the Intel OpenCL SDK,  and I have added a sample median filter
OpenCL kernel as a guide to start with.

If anyone wants to help out, you could:

0) if you have opencl experience, try porting some of the CUDA code to
OpenCL. The CUDA code is currently ifdef'd out of the compile, using
 #ifdef CUDA.

Note: as CUDA allows C++ constructs such as templates, and Open CL is C99,
the template code must be refactored.

1) document the existing code: I am not that familiar with the standard and
will be learning as I go along, so any comments in the code from people
with codec knowledge would be very very helpful

2) testing: OpenJPEG has a comprehensive test suite. It would be useful to
carve this into a separate project that could work with any jpeg 2000 codec
- just define a compress/decompress interface.  This will also be helpful
for benchmarks.

I am planning on integrating this code into OpenJPEG once it is working and
stable.

Cheers,
Aaron
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140315/c3defe23/attachment-0001.html>

From even.rouault at mines-paris.org  Sat Mar 15 08:50:24 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 15 Mar 2014 16:50:24 +0100
Subject: [gdal-dev] Gdal Java project / parser
In-Reply-To: <CAL81ghDJecx5MOX3tXdgKWwmzb-Vg1m+KSN4vb-=HMEFxFgVOQ@mail.gmail.com>
References: <CAL81ghDJecx5MOX3tXdgKWwmzb-Vg1m+KSN4vb-=HMEFxFgVOQ@mail.gmail.com>
Message-ID: <201403151650.24308.even.rouault@mines-paris.org>

Florent,

I'm not sure we really want to duplicate existing constants. 

I like that the bindings look similar in languages. If I must do GDAL code in 
C, C++, Java or Python, it's pretty much all the same everywhere... But the 
truth is that most non C/C++ folks hate their GDAL bindings, whatever the 
language. Python'ists hate the Python bindings because they don't look like 
Python. Java'ist the samthing. etc...

What about just improving the doc... ? In the GDAL source tree, there's a huge 
file swig/java/javadoc.java that contain all the javadoc comments that appear 
in gdal.org/java
There's a hacky script, swig/java/make_doc.sh, that extracts comments from 
javadoc.java and put them into the SWIG generated java files, so that the 
javadoc utility can make sense of all that. The generated docs are in 
swig/java/java.

You could add missing javadoc for non documented constants, and improving 
existing doc, for example by mentionning which constants can be used as a 
parameter of a method.

For a GDAL 2.0, we could perhaps split the gdalconst module into several ones 
to replicate what you've done in a more straightforward way and that would 
also benefit to other languages.

Even

> Hi all,
> 
> Gdal is a very powerfull project and I use the Java binding. However, even
> with the Javadoc, sometimes I need to read the source of the project to
> understand how it works. That's why I try to make a parser to help people
> (and me) to use Gdal with Java.
> 
> The question is I don't really know how to publish my code. Because it's
> all based on Gdal, is it possible to publish it on your SVN or do i need to
> make a project on Github or Sourceforge ?
> 
> The first step of my project is to organize gdal constants in enum : I put
> all constants of the same type (color interpretation, error type, data
> type, ...) in one enum class. I took all comments from the Javadoc (when
> they were available). Here the sources.
> 
> I need some advices to improve the code and comments, and maybe how to
> organize my whole project. Next I will to list all drivers in enum or maybe
> to create a class for each driver.
> 
> Florent

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From kansal.k at gmail.com  Sat Mar 15 12:50:55 2014
From: kansal.k at gmail.com (Kshitij Kansal)
Date: Sun, 16 Mar 2014 01:20:55 +0530
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <CAMKgpOY8SVPZTQzkr_WE+KsOdwD3K8BjkbVXry_kuDpgXf+xKg@mail.gmail.com>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<1390896882268-5100379.post@n6.nabble.com>
	<CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>
	<201401282101.00768.even.rouault@mines-paris.org>
	<CAKTWcS=CviogV2Kc5hVkqUkSOECwGiVtqVLzdET4zR1xJb2SMA@mail.gmail.com>
	<loom.20140129T084029-6@post.gmane.org>
	<CAKTWcSmH2drpYqYH+J9F37XRNNu7xxXc+ZQ5WGTcmD5qYqC0Vg@mail.gmail.com>
	<CAKTWcSmu1NqwhFjSpu_yTEstK63jyOa_gm4Tp9N+35Dssrpn5w@mail.gmail.com>
	<1391806418.52f547d239b63@imp.free.fr>
	<CAKTWcSkbXgRD=TcOne+=HEyvHDJAPhJGROqWd5MdvYX9k-10+A@mail.gmail.com>
	<52F5ECBB.6010507@gmail.com>
	<CAKTWcSnjZ0j9uek+QeULFvHpP04wgcWs0Br_kQ7juw0iWnMOZQ@mail.gmail.com>
	<CAKTWcS=9dfhvBv_fQUP+2T3w3jVtxFcjdrKaCY41k3mFzAyTdg@mail.gmail.com>
	<53234FC1.7050503@gmail.com>
	<CAMKgpOY8SVPZTQzkr_WE+KsOdwD3K8BjkbVXry_kuDpgXf+xKg@mail.gmail.com>
Message-ID: <CAKTWcSm6OpJWP3ci0=5J=LDvSQfHm=eawmMVvnWna5=hTdWJKw@mail.gmail.com>

Hello Again,

@Dimitriy - Currently the GDALComputeMatchingPoints  is using the
SimpleSurf algorithm for matching points. Are you proposing that, I should
implement the BRISK and then provide user the option of using either this
or SimpleSurf(already implemented)?
This is indeed a very interesting thought but the problem in this is that,
the GDALComputeMatchingPoints is developed with respect to the correlator
project and I feel that SimpleSurf algorithm implemented there won't work
on my Automatic geo-referencer as I would be considering the Multispectral
Imagery and Large Datasets which are not handled in the current
implementation.* So this will require modification to SimpleSurf as well.*
I hope I have made my doubt clear? Please convey your views on this.

@Chaitanya - In comparison to the SURF, BRISK can definitely handle the
large imagery to great extent. But there is going to be some threshold upto
which this algorithm will work because we must not forget that these
algorithms are developed for Normal RGB images for Computer Vision related
work and there usage to Remote Sensing requires some modification. I will
try to look for this thing in more detail and then get back to you.


Also, should I prepare my initial draft of proposal based this BRISK idea
only?
I have already started work in this direction and will soon post it, for
review.

With Regards,

Kshitij Kansal

Lab For Spatial Informatics,

IIIT Hyderabad



On Sat, Mar 15, 2014 at 12:29 AM, Chaitanya kumar CH <chaitanya.ch at gmail.com
> wrote:

> Kshitij,
>
> What is the performance of the proposed algorithms for very large rasters?
> If one of them is good with large images that's a cleaner choice without
> all the workaround with scaling the rasters.
>
> --
> Best regards,
> Chaitanya Kumar CH
> On 15-Mar-2014 12:22 am, "Dmitriy Baryshnikov" <bishop.dev at gmail.com>
> wrote:
>
>>  Hi,
>>
>> I think we need to decide it here, not to create lot of proposals. The
>> second idea is very interesting. Maybe it worth to create some common
>> interface (or API) to add new methods BRISK, SURF, SIFT etc.
>> You can develop you realisation of BRISK and demonstrate how-to one can
>> use it via such common interface.
>> E.g. in GDALComputeMatchingPoints add enum for algorithms or use exist
>> papszOptions.
>>
>> Best regards,
>>     Dmitry
>>
>> 14.03.2014 17:28, Kshitij Kansal ?????:
>>
>> Hello everyone
>>
>>  Continuing the previous discussion, I would like to propose something
>> and the community's suggestions are welcomed/needed. I can understand that
>> this thread is a little old, so let me remind you that its regarding the
>> automatic geo-referencer idea. The idea is also proposed on the GDAL ideas
>> page (http://trac.osgeo.org/gdal/wiki/SummerOfCode).
>>
>>  Based on the previous discussions, what came out was that we can
>> improve the current implementation of SIMPLE SURF in GDAL which was
>> developed as a part of 2012 GSOC GDAL Correlator project, to support *large
>> data* and *multi spectral imagery*. And then apply this *modified* algorithm
>> for the geo-reference purposes. Now I have been in touch with Chaitanya,
>> who is willing to mentor this project, and there are some things on which
>> we would like to know community's suggestions/response.
>>
>>  There are basically two things that can be done regarding this project:
>>
>>  1. As mentioned above, we can modify the SIMPLE SURF algorithm and make
>> it much better for the geo-reference purposes. Already, a lot had been
>> discussed on this and we have a fairly good idea about what is to be done.
>>
>>  2. One more thing that can be done is that we can implement BRISK
>> algorithm[1] instead of SURF along with the FLANN matcher for this purpose.
>> What advantages this thing offers is that it is fairly fast and gives
>> comparable outputs along with that it works well with fairly large data
>> sets. So we do not need to segment the imagery as we would have done in the
>> case of SURF. Also added to this, this algorithm also has no patent issues.
>> We had a lot of problem regarding patent issues in SIFT/SURF and we
>> discussed them at length on the mailing list as well.
>>
>>  One thing that I fell can be done is that  two proposal can be written,
>> one for each and then community can decide accordingly which one is more
>> useful. Or we can decide it here itself..?
>>
>>  Kindly provide your valuable comments and suggestion..
>>
>>  With Regards,
>>
>>  Kshitij Kansal
>>
>> Lab For Spatial Informatics,
>>
>> IIIT Hyderabad
>>
>>   1. http://www.robots.ox.ac.uk/~vgg/rg/papers/brisk.pdf
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140316/b51914a8/attachment.html>

From seth at pricepages.org  Sat Mar 15 14:15:00 2014
From: seth at pricepages.org (Seth Price)
Date: Sat, 15 Mar 2014 14:15:00 -0700
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <CAKTWcSm6OpJWP3ci0=5J=LDvSQfHm=eawmMVvnWna5=hTdWJKw@mail.gmail.com>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<1390896882268-5100379.post@n6.nabble.com>
	<CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>
	<201401282101.00768.even.rouault@mines-paris.org>
	<CAKTWcS=CviogV2Kc5hVkqUkSOECwGiVtqVLzdET4zR1xJb2SMA@mail.gmail.com>
	<loom.20140129T084029-6@post.gmane.org>
	<CAKTWcSmH2drpYqYH+J9F37XRNNu7xxXc+ZQ5WGTcmD5qYqC0Vg@mail.gmail.com>
	<CAKTWcSmu1NqwhFjSpu_yTEstK63jyOa_gm4Tp9N+35Dssrpn5w@mail.gmail.com>
	<1391806418.52f547d239b63@imp.free.fr>
	<CAKTWcSkbXgRD=TcOne+=HEyvHDJAPhJGROqWd5MdvYX9k-10+A@mail.gmail.com>
	<52F5ECBB.6010507@gmail.com>
	<CAKTWcSnjZ0j9uek+QeULFvHpP04wgcWs0Br_kQ7juw0iWnMOZQ@mail.gmail.com>
	<CAKTWcS=9dfhvBv_fQUP+2T3w3jVtxFcjdrKaCY41k3mFzAyTdg@mail.gmail.com>
	<53234FC1.7050503@gmail.com>
	<CAMKgpOY8SVPZTQzkr_WE+KsOdwD3K8BjkbVXry_kuDpgXf+xKg@mail.gmail.com>
	<CAKTWcSm6OpJWP3ci0=5J=LDvSQfHm=eawmMVvnWna5=hTdWJKw@mail.gmail.com>
Message-ID: <9E09F659-945F-438D-B061-91F0E91703D9@pricepages.org>

I have done something like this recently. You would be better off tearing out SURF & linking to OpenCV for all feature detection and extraction. Here is a link to the patch that OpenCV needs to support large & 16 bit imagery.

https://github.com/Itseez/opencv/pull/1932

~Seth

via iPhone

> On Mar 15, 2014, at 12:50 PM, Kshitij Kansal <kansal.k at gmail.com> wrote:
> 
> Hello Again,
> 
> @Dimitriy - Currently the GDALComputeMatchingPoints  is using the SimpleSurf algorithm for matching points. Are you proposing that, I should implement the BRISK and then provide user the option of using either this or SimpleSurf(already implemented)? 
> This is indeed a very interesting thought but the problem in this is that, the GDALComputeMatchingPoints is developed with respect to the correlator project and I feel that SimpleSurf algorithm implemented there won't work on my Automatic geo-referencer as I would be considering the Multispectral Imagery and Large Datasets which are not handled in the current implementation. So this will require modification to SimpleSurf as well.
> I hope I have made my doubt clear? Please convey your views on this.
> 
> @Chaitanya - In comparison to the SURF, BRISK can definitely handle the large imagery to great extent. But there is going to be some threshold upto which this algorithm will work because we must not forget that these algorithms are developed for Normal RGB images for Computer Vision related work and there usage to Remote Sensing requires some modification. I will try to look for this thing in more detail and then get back to you.
> 
> 
> Also, should I prepare my initial draft of proposal based this BRISK idea only? 
> I have already started work in this direction and will soon post it, for review.
> 
> With Regards,
> 
> Kshitij Kansal
> Lab For Spatial Informatics,
> IIIT Hyderabad
> 
> 
>> On Sat, Mar 15, 2014 at 12:29 AM, Chaitanya kumar CH <chaitanya.ch at gmail.com> wrote:
>> Kshitij,
>> 
>> What is the performance of the proposed algorithms for very large rasters? If one of them is good with large images that's a cleaner choice without all the workaround with scaling the rasters.
>> 
>> --
>> Best regards,
>> Chaitanya Kumar CH
>> 
>>> On 15-Mar-2014 12:22 am, "Dmitriy Baryshnikov" <bishop.dev at gmail.com> wrote:
>>> Hi,
>>> 
>>> I think we need to decide it here, not to create lot of proposals. The second idea is very interesting. Maybe it worth to create some common interface (or API) to add new methods BRISK, SURF, SIFT etc. 
>>> You can develop you realisation of BRISK and demonstrate how-to one can use it via such common interface.
>>> E.g. in GDALComputeMatchingPoints add enum for algorithms or use exist  papszOptions.
>>> Best regards,
>>>     Dmitry
>>> 14.03.2014 17:28, Kshitij Kansal ?????:
>>>> Hello everyone
>>>> 
>>>> Continuing the previous discussion, I would like to propose something and the community's suggestions are welcomed/needed. I can understand that this thread is a little old, so let me remind you that its regarding the automatic geo-referencer idea. The idea is also proposed on the GDAL ideas page (http://trac.osgeo.org/gdal/wiki/SummerOfCode). 
>>>> 
>>>> Based on the previous discussions, what came out was that we can improve the current implementation of SIMPLE SURF in GDAL which was developed as a part of 2012 GSOC GDAL Correlator project, to support large data and multi spectral imagery. And then apply this modified algorithm for the geo-reference purposes. Now I have been in touch with Chaitanya, who is willing to mentor this project, and there are some things on which we would like to know community's suggestions/response.
>>>> 
>>>> There are basically two things that can be done regarding this project:
>>>> 
>>>> 1. As mentioned above, we can modify the SIMPLE SURF algorithm and make it much better for the geo-reference purposes. Already, a lot had been discussed on this and we           have a fairly good idea about what is to be done.
>>>> 
>>>> 2. One more thing that can be done is that we can implement BRISK algorithm[1] instead of SURF along with the FLANN matcher for this purpose. What advantages this thing offers is that it is fairly fast and gives comparable outputs along with           that it works well with fairly large data sets. So we do not need to segment the imagery as we would have done in the case of SURF. Also added to this, this algorithm also has no patent issues. We had a lot of problem regarding patent issues in SIFT/SURF and we discussed them at length on the mailing list as well. 
>>>> 
>>>> One thing that I fell can be done is that  two proposal can be written, one for each and then community can decide accordingly which one is more useful. Or we can decide it here itself..? 
>>>> 
>>>> Kindly provide your valuable comments and suggestion..
>>>> 
>>>> With Regards,
>>>> 
>>>> Kshitij Kansal
>>>> Lab For Spatial Informatics,
>>>> IIIT Hyderabad
>>>> 
>>>> 1. http://www.robots.ox.ac.uk/~vgg/rg/papers/brisk.pdf
>>> 
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140315/3bcb669d/attachment-0001.html>

From seth at pricepages.org  Sat Mar 15 14:19:56 2014
From: seth at pricepages.org (Seth Price)
Date: Sat, 15 Mar 2014 14:19:56 -0700
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <CAKTWcSm6OpJWP3ci0=5J=LDvSQfHm=eawmMVvnWna5=hTdWJKw@mail.gmail.com>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<1390896882268-5100379.post@n6.nabble.com>
	<CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>
	<201401282101.00768.even.rouault@mines-paris.org>
	<CAKTWcS=CviogV2Kc5hVkqUkSOECwGiVtqVLzdET4zR1xJb2SMA@mail.gmail.com>
	<loom.20140129T084029-6@post.gmane.org>
	<CAKTWcSmH2drpYqYH+J9F37XRNNu7xxXc+ZQ5WGTcmD5qYqC0Vg@mail.gmail.com>
	<CAKTWcSmu1NqwhFjSpu_yTEstK63jyOa_gm4Tp9N+35Dssrpn5w@mail.gmail.com>
	<1391806418.52f547d239b63@imp.free.fr>
	<CAKTWcSkbXgRD=TcOne+=HEyvHDJAPhJGROqWd5MdvYX9k-10+A@mail.gmail.com>
	<52F5ECBB.6010507@gmail.com>
	<CAKTWcSnjZ0j9uek+QeULFvHpP04wgcWs0Br_kQ7juw0iWnMOZQ@mail.gmail.com>
	<CAKTWcS=9dfhvBv_fQUP+2T3w3jVtxFcjdrKaCY41k3mFzAyTdg@mail.gmail.com>
	<53234FC1.7050503@gmail.com>
	<CAMKgpOY8SVPZTQzkr_WE+KsOdwD3K8BjkbVXry_kuDpgXf+xKg@mail.gmail.com>
	<CAKTWcSm6OpJWP3ci0=5J=LDvSQfHm=eawmMVvnWna5=hTdWJKw@mail.gmail.com>
Message-ID: <47715869-DB18-49D1-B166-4DBB6EBBA623@pricepages.org>

Also, I wouldn't worry much about the multispectral part of the data. You're going to have more trouble with reliably finding the correct key point matches. Use RANSAC, also in OpenCV.

~Seth

via iPhone

> On Mar 15, 2014, at 12:50 PM, Kshitij Kansal <kansal.k at gmail.com> wrote:
> 
> Hello Again,
> 
> @Dimitriy - Currently the GDALComputeMatchingPoints  is using the SimpleSurf algorithm for matching points. Are you proposing that, I should implement the BRISK and then provide user the option of using either this or SimpleSurf(already implemented)? 
> This is indeed a very interesting thought but the problem in this is that, the GDALComputeMatchingPoints is developed with respect to the correlator project and I feel that SimpleSurf algorithm implemented there won't work on my Automatic geo-referencer as I would be considering the Multispectral Imagery and Large Datasets which are not handled in the current implementation. So this will require modification to SimpleSurf as well.
> I hope I have made my doubt clear? Please convey your views on this.
> 
> @Chaitanya - In comparison to the SURF, BRISK can definitely handle the large imagery to great extent. But there is going to be some threshold upto which this algorithm will work because we must not forget that these algorithms are developed for Normal RGB images for Computer Vision related work and there usage to Remote Sensing requires some modification. I will try to look for this thing in more detail and then get back to you.
> 
> 
> Also, should I prepare my initial draft of proposal based this BRISK idea only? 
> I have already started work in this direction and will soon post it, for review.
> 
> With Regards,
> 
> Kshitij Kansal
> Lab For Spatial Informatics,
> IIIT Hyderabad
> 
> 
>> On Sat, Mar 15, 2014 at 12:29 AM, Chaitanya kumar CH <chaitanya.ch at gmail.com> wrote:
>> Kshitij,
>> 
>> What is the performance of the proposed algorithms for very large rasters? If one of them is good with large images that's a cleaner choice without all the workaround with scaling the rasters.
>> 
>> --
>> Best regards,
>> Chaitanya Kumar CH
>> 
>>> On 15-Mar-2014 12:22 am, "Dmitriy Baryshnikov" <bishop.dev at gmail.com> wrote:
>>> Hi,
>>> 
>>> I think we need to decide it here, not to create lot of proposals. The second idea is very interesting. Maybe it worth to create some common interface (or API) to add new methods BRISK, SURF, SIFT etc. 
>>> You can develop you realisation of BRISK and demonstrate how-to one can use it via such common interface.
>>> E.g. in GDALComputeMatchingPoints add enum for algorithms or use exist  papszOptions.
>>> Best regards,
>>>     Dmitry
>>> 14.03.2014 17:28, Kshitij Kansal ?????:
>>>> Hello everyone
>>>> 
>>>> Continuing the previous discussion, I would like to propose something and the community's suggestions are welcomed/needed. I can understand that this thread is a little old, so let me remind you that its regarding the automatic geo-referencer idea. The idea is also proposed on the GDAL ideas page (http://trac.osgeo.org/gdal/wiki/SummerOfCode). 
>>>> 
>>>> Based on the previous discussions, what came out was that we can improve the current implementation of SIMPLE SURF in GDAL which was developed as a part of 2012 GSOC GDAL Correlator project, to support large data and multi spectral imagery. And then apply this modified algorithm for the geo-reference purposes. Now I have been in touch with Chaitanya, who is willing to mentor this project, and there are some things on which we would like to know community's suggestions/response.
>>>> 
>>>> There are basically two things that can be done regarding this project:
>>>> 
>>>> 1. As mentioned above, we can modify the SIMPLE SURF algorithm and make it much better for the geo-reference purposes. Already, a lot had been discussed on this and we           have a fairly good idea about what is to be done.
>>>> 
>>>> 2. One more thing that can be done is that we can implement BRISK algorithm[1] instead of SURF along with the FLANN matcher for this purpose. What advantages this thing offers is that it is fairly fast and gives comparable outputs along with           that it works well with fairly large data sets. So we do not need to segment the imagery as we would have done in the case of SURF. Also added to this, this algorithm also has no patent issues. We had a lot of problem regarding patent issues in SIFT/SURF and we discussed them at length on the mailing list as well. 
>>>> 
>>>> One thing that I fell can be done is that  two proposal can be written, one for each and then community can decide accordingly which one is more useful. Or we can decide it here itself..? 
>>>> 
>>>> Kindly provide your valuable comments and suggestion..
>>>> 
>>>> With Regards,
>>>> 
>>>> Kshitij Kansal
>>>> Lab For Spatial Informatics,
>>>> IIIT Hyderabad
>>>> 
>>>> 1. http://www.robots.ox.ac.uk/~vgg/rg/papers/brisk.pdf
>>> 
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140315/b2c6c9f2/attachment.html>

From bishop.dev at gmail.com  Sat Mar 15 14:28:04 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Sun, 16 Mar 2014 01:28:04 +0400
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <9E09F659-945F-438D-B061-91F0E91703D9@pricepages.org>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>	<1390896882268-5100379.post@n6.nabble.com>	<CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>	<201401282101.00768.even.rouault@mines-paris.org>	<CAKTWcS=CviogV2Kc5hVkqUkSOECwGiVtqVLzdET4zR1xJb2SMA@mail.gmail.com>	<loom.20140129T084029-6@post.gmane.org>	<CAKTWcSmH2drpYqYH+J9F37XRNNu7xxXc+ZQ5WGTcmD5qYqC0Vg@mail.gmail.com>	<CAKTWcSmu1NqwhFjSpu_yTEstK63jyOa_gm4Tp9N+35Dssrpn5w@mail.gmail.com>	<1391806418.52f547d239b63@imp.free.fr>	<CAKTWcSkbXgRD=TcOne+=HEyvHDJAPhJGROqWd5MdvYX9k-10+A@mail.gmail.com>	<52F5ECBB.6010507@gmail.com>	<CAKTWcSnjZ0j9uek+QeULFvHpP04wgcWs0Br_kQ7juw0iWnMOZQ@mail.gmail.com>	<CAKTWcS=9dfhvBv_fQUP+2T3w3jVtxFcjdrKaCY41k3mFzAyTdg@mail.gmail.com>	<53234FC1.7050503@gmail.com>	<CAMKgpOY8SVPZTQzkr_WE+KsOdwD3K8BjkbVXry_kuDpgXf+xKg@mail.gmail.com>	<CAKTWcSm6OpJWP3ci0=5J=LDvSQfHm=eawmMVvnWna5=hTdWJKw@mail.gmail.com>
	<9E09F659-945F-438D-B061-91F0E91703D9@pricepages.org>
Message-ID: <5324C5E4.1030804@gmail.com>

Hi,

I only proposed to use the exist API - GDALComputeMatchingPoints, or 
modify it to support new method BRISK. You have not to modify 
SimpleSurf, but only make it still working as now.
GDAL is library, not the "Automatic geo-referencer utility" and some 
common methods and functions should be developed. This does not deny 
that such a tool can be developed but it must use this
common methods and functions. For example see the console utilities in 
apps folder of GDAL source tree. They use GDAL functions and methods.*
*

Best regards,
     Dmitry

16.03.2014 1:15, Seth Price ?????:
> I have done something like this recently. You would be better off 
> tearing out SURF & linking to OpenCV for all feature detection and 
> extraction. Here is a link to the patch that OpenCV needs to support 
> large & 16 bit imagery.
>
> https://github.com/Itseez/opencv/pull/1932
>
> ~Seth
>
> via iPhone
>
> On Mar 15, 2014, at 12:50 PM, Kshitij Kansal <kansal.k at gmail.com 
> <mailto:kansal.k at gmail.com>> wrote:
>
>> Hello Again,
>>
>> @Dimitriy - Currently the GDALComputeMatchingPoints is using the 
>> SimpleSurf algorithm for matching points. Are you proposing that, I 
>> should implement the BRISK and then provide user the option of using 
>> either this or SimpleSurf(already implemented)?
>> This is indeed a very interesting thought but the problem in this is 
>> that, the GDALComputeMatchingPoints is developed with respect to the 
>> correlator project and I feel that SimpleSurf algorithm implemented 
>> there won't work on my Automatic geo-referencer as I would be 
>> considering the Multispectral Imagery and Large Datasets which are 
>> not handled in the current implementation.*So this will require 
>> modification to SimpleSurf as well.*
>> I hope I have made my doubt clear? Please convey your views on this.
>>
>> @Chaitanya - In comparison to the SURF, BRISK can definitely handle 
>> the large imagery to great extent. But there is going to be some 
>> threshold upto which this algorithm will work because we must not 
>> forget that these algorithms are developed for Normal RGB images for 
>> Computer Vision related work and there usage to Remote Sensing 
>> requires some modification. I will try to look for this thing in more 
>> detail and then get back to you.
>>
>>
>> Also, should I prepare my initial draft of proposal based this BRISK 
>> idea only?
>> I have already started work in this direction and will soon post it, 
>> for review.
>>
>> With Regards,
>>
>>     Kshitij Kansal
>>
>>     Lab For Spatial Informatics,
>>
>>     IIIT Hyderabad
>>
>>
>>
>> On Sat, Mar 15, 2014 at 12:29 AM, Chaitanya kumar CH 
>> <chaitanya.ch at gmail.com <mailto:chaitanya.ch at gmail.com>> wrote:
>>
>>     Kshitij,
>>
>>     What is the performance of the proposed algorithms for very large
>>     rasters? If one of them is good with large images that's a
>>     cleaner choice without all the workaround with scaling the rasters.
>>
>>     --
>>     Best regards,
>>     Chaitanya Kumar CH
>>
>>     On 15-Mar-2014 12:22 am, "Dmitriy Baryshnikov"
>>     <bishop.dev at gmail.com <mailto:bishop.dev at gmail.com>> wrote:
>>
>>         Hi,
>>
>>         I think we need to decide it here, not to create lot of
>>         proposals. The second idea is very interesting. Maybe it
>>         worth to create some common interface (or API) to add new
>>         methods BRISK, SURF, SIFT etc.
>>         You can develop you realisation of BRISK and demonstrate
>>         how-to one can use it via such common interface.
>>         E.g. in GDALComputeMatchingPoints add enum for algorithms or
>>         use exist  papszOptions.
>>
>>         Best regards,
>>              Dmitry
>>
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140316/eb632abc/attachment-0001.html>

From chaitanya.ch at gmail.com  Sat Mar 15 23:16:37 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun, 16 Mar 2014 11:46:37 +0530
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <5324C5E4.1030804@gmail.com>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<1390896882268-5100379.post@n6.nabble.com>
	<CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>
	<201401282101.00768.even.rouault@mines-paris.org>
	<CAKTWcS=CviogV2Kc5hVkqUkSOECwGiVtqVLzdET4zR1xJb2SMA@mail.gmail.com>
	<loom.20140129T084029-6@post.gmane.org>
	<CAKTWcSmH2drpYqYH+J9F37XRNNu7xxXc+ZQ5WGTcmD5qYqC0Vg@mail.gmail.com>
	<CAKTWcSmu1NqwhFjSpu_yTEstK63jyOa_gm4Tp9N+35Dssrpn5w@mail.gmail.com>
	<1391806418.52f547d239b63@imp.free.fr>
	<CAKTWcSkbXgRD=TcOne+=HEyvHDJAPhJGROqWd5MdvYX9k-10+A@mail.gmail.com>
	<52F5ECBB.6010507@gmail.com>
	<CAKTWcSnjZ0j9uek+QeULFvHpP04wgcWs0Br_kQ7juw0iWnMOZQ@mail.gmail.com>
	<CAKTWcS=9dfhvBv_fQUP+2T3w3jVtxFcjdrKaCY41k3mFzAyTdg@mail.gmail.com>
	<53234FC1.7050503@gmail.com>
	<CAMKgpOY8SVPZTQzkr_WE+KsOdwD3K8BjkbVXry_kuDpgXf+xKg@mail.gmail.com>
	<CAKTWcSm6OpJWP3ci0=5J=LDvSQfHm=eawmMVvnWna5=hTdWJKw@mail.gmail.com>
	<9E09F659-945F-438D-B061-91F0E91703D9@pricepages.org>
	<5324C5E4.1030804@gmail.com>
Message-ID: <CAMKgpOapi22gWnctgYeBsLag7u0D2rOKJ=-NyF3g4jb17oYWPw@mail.gmail.com>

Kshitij,

As suggested you should plan to allow user to select the algorithm for key
point detection and matching.

I'll explain how to do that later. But essentially you may get some input
from the user to change the default algorithm to something else. So, all
the steps should be done independent of each other.

--
Best regards,
Chaitanya Kumar CH
On 16-Mar-2014 2:58 am, "Dmitriy Baryshnikov" <bishop.dev at gmail.com> wrote:

>  Hi,
>
> I only proposed to use the exist API - GDALComputeMatchingPoints, or
> modify it to support new method BRISK. You have not to modify SimpleSurf,
> but only make it still working as now.
> GDAL is library, not the "Automatic geo-referencer utility" and some
> common methods and functions should be developed. This does not deny that
> such a tool can be developed but it must use this
> common methods and functions. For example see the console utilities in
> apps folder of GDAL source tree. They use GDAL functions and methods.
>
> Best regards,
>     Dmitry
>
> 16.03.2014 1:15, Seth Price ?????:
>
> I have done something like this recently. You would be better off tearing
> out SURF & linking to OpenCV for all feature detection and extraction. Here
> is a link to the patch that OpenCV needs to support large & 16 bit imagery.
>
>  https://github.com/Itseez/opencv/pull/1932
>
>  ~Seth
>
>  via iPhone
>
> On Mar 15, 2014, at 12:50 PM, Kshitij Kansal <kansal.k at gmail.com> wrote:
>
>   Hello Again,
>
>  @Dimitriy - Currently the GDALComputeMatchingPoints  is using the
> SimpleSurf algorithm for matching points. Are you proposing that, I should
> implement the BRISK and then provide user the option of using either this
> or SimpleSurf(already implemented)?
> This is indeed a very interesting thought but the problem in this is that,
> the GDALComputeMatchingPoints is developed with respect to the correlator
> project and I feel that SimpleSurf algorithm implemented there won't work
> on my Automatic geo-referencer as I would be considering the Multispectral
> Imagery and Large Datasets which are not handled in the current
> implementation.* So this will require modification to SimpleSurf as well.*
>  I hope I have made my doubt clear? Please convey your views on this.
>
>  @Chaitanya - In comparison to the SURF, BRISK can definitely handle the
> large imagery to great extent. But there is going to be some threshold upto
> which this algorithm will work because we must not forget that these
> algorithms are developed for Normal RGB images for Computer Vision related
> work and there usage to Remote Sensing requires some modification. I will
> try to look for this thing in more detail and then get back to you.
>
>
>  Also, should I prepare my initial draft of proposal based this BRISK
> idea only?
> I have already started work in this direction and will soon post it, for
> review.
>
>  With Regards,
>
>   Kshitij Kansal
>
> Lab For Spatial Informatics,
>
> IIIT Hyderabad
>
>
>
> On Sat, Mar 15, 2014 at 12:29 AM, Chaitanya kumar CH <
> chaitanya.ch at gmail.com> wrote:
>
>> Kshitij,
>>
>> What is the performance of the proposed algorithms for very large
>> rasters? If one of them is good with large images that's a cleaner choice
>> without all the workaround with scaling the rasters.
>>
>> --
>> Best regards,
>> Chaitanya Kumar CH
>>  On 15-Mar-2014 12:22 am, "Dmitriy Baryshnikov" <bishop.dev at gmail.com>
>> wrote:
>>
>>>   Hi,
>>>
>>> I think we need to decide it here, not to create lot of proposals. The
>>> second idea is very interesting. Maybe it worth to create some common
>>> interface (or API) to add new methods BRISK, SURF, SIFT etc.
>>> You can develop you realisation of BRISK and demonstrate how-to one can
>>> use it via such common interface.
>>> E.g. in GDALComputeMatchingPoints add enum for algorithms or use exist
>>> papszOptions.
>>>
>>> Best regards,
>>>     Dmitry
>>>
>>>
>>>    _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>    _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140316/5faff36e/attachment.html>

From piero.campa at gmail.com  Sun Mar 16 04:50:39 2014
From: piero.campa at gmail.com (Piero Campalani)
Date: Sun, 16 Mar 2014 12:50:39 +0100
Subject: [gdal-dev] Non-default drivers from packaged installation
Message-ID: <CAMp9JaOtFpoPf29Pcy4=1px5_bBBgDS+7Zo-EW-GL8fBp9=Fmg@mail.gmail.com>

Hi list,

my question is whether the drivers which are /not/ compiled by default in
GDAL (because they depend on some other library) are checked at run time.
I guess no.

I am installing gdal-bin from APT, so if I need to enable a driver
(JP2OpenJPEG in my case) that is not shipped in my precompiled version, I
need to install GDAL from source.

Is that right?

Indeed I installed openjpeg v2, but then the JP2OpenJPEG driver is not
listed (--formats).

thanks,
Piero

http://www.gdal.org/formats_list.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140316/c9699ff5/attachment.html>

From even.rouault at mines-paris.org  Sun Mar 16 05:17:34 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 16 Mar 2014 13:17:34 +0100
Subject: [gdal-dev] Non-default drivers from packaged installation
In-Reply-To: <CAMp9JaOtFpoPf29Pcy4=1px5_bBBgDS+7Zo-EW-GL8fBp9=Fmg@mail.gmail.com>
References: <CAMp9JaOtFpoPf29Pcy4=1px5_bBBgDS+7Zo-EW-GL8fBp9=Fmg@mail.gmail.com>
Message-ID: <201403161317.34551.even.rouault@mines-paris.org>

Le dimanche 16 mars 2014 12:50:39, Piero Campalani a ?crit :
> Hi list,
> 
> my question is whether the drivers which are /not/ compiled by default in
> GDAL (because they depend on some other library) are checked at run time.
> I guess no.
> 
> I am installing gdal-bin from APT, so if I need to enable a driver
> (JP2OpenJPEG in my case) that is not shipped in my precompiled version, I
> need to install GDAL from source.
> 
> Is that right?

Yes

> 
> Indeed I installed openjpeg v2, but then the JP2OpenJPEG driver is not
> listed (--formats).

Yes, you need to compile from source. There's no magic. If at built time of 
the Debian GDAL binary, the openjpeg v2 headers and libraries were not 
available, GDAL will not recompile itself automagically when they are 
available ;-)

> 
> thanks,
> Piero
> 
> http://www.gdal.org/formats_list.html

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From piero.campa at gmail.com  Sun Mar 16 11:23:18 2014
From: piero.campa at gmail.com (Piero Campalani)
Date: Sun, 16 Mar 2014 19:23:18 +0100
Subject: [gdal-dev] GML box in .JP2 image
Message-ID: <CAMp9JaOs-P+v_qZoVWSTCz1qiQm1fJaQU-j_WGp73j+aCipOiQ@mail.gmail.com>

Hi list,

I am using GDAL 1.10 + JP2OpenJPEG driver to encode .JP2 files including a
GML metadata box.
http://www.gdal.org/frmt_jp2openjpeg.html

I used it successfully to gdal_translate a JP2 from a GeoTIFF image, but
then: what are the read/write options for the user with regards to the GML
box?

Can gdalinfo extract the GML information and display it?
When creating a JP2 image, can I specify my own GML fragment?

Best,
Piero
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140316/148f4822/attachment-0001.html>

From even.rouault at mines-paris.org  Sun Mar 16 12:08:59 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 16 Mar 2014 20:08:59 +0100
Subject: [gdal-dev] GML box in .JP2 image
In-Reply-To: <CAMp9JaOs-P+v_qZoVWSTCz1qiQm1fJaQU-j_WGp73j+aCipOiQ@mail.gmail.com>
References: <CAMp9JaOs-P+v_qZoVWSTCz1qiQm1fJaQU-j_WGp73j+aCipOiQ@mail.gmail.com>
Message-ID: <201403162008.59782.even.rouault@mines-paris.org>

Le dimanche 16 mars 2014 19:23:18, Piero Campalani a ?crit :
> Hi list,
> 
> I am using GDAL 1.10 + JP2OpenJPEG driver to encode .JP2 files including a
> GML metadata box.
> http://www.gdal.org/frmt_jp2openjpeg.html
> 
> I used it successfully to gdal_translate a JP2 from a GeoTIFF image, but
> then: what are the read/write options for the user with regards to the GML
> box?

As far as writing is concerned, the GMLJP2 creation option controls whether 
the GML box should be written or not. It defaults to YES, as documented.

> 
> Can gdalinfo extract the GML information and display it?

Yes, this is done automaticaly when trying to get the SRS and 
geotransformation matrix.

With GDAL trunk (not 1.10), you can the GML fragment with the "-mdd all" 
option of gdalinfo.

> When creating a JP2 image, can I specify my own GML fragment?

Yes, you must define the GMLJP2OVERRIDE configuration option to be the name of a 
file that contains the GML fragment. This is admitedly an undocumented feature.

e.g :
gdal_translate my.tif my.jp2 -of JP2OpenJPEG --config GMLJP2OVERRIDE my.gml


> 
> Best,
> Piero

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jorgearevalo at libregis.org  Sun Mar 16 12:55:22 2014
From: jorgearevalo at libregis.org (Jorge Arevalo)
Date: Sun, 16 Mar 2014 20:55:22 +0100
Subject: [gdal-dev] Recommended strategy to handle MIF file with a few
	big multipolygons
In-Reply-To: <201403110005.06482.even.rouault@mines-paris.org>
References: <CAMhtMNMfuo9Fmf=E7Eo_WgESySx1V+opLknqWPhBtMUjkW3_uQ@mail.gmail.com>
	<201403110005.06482.even.rouault@mines-paris.org>
Message-ID: <CAMhtMNONNeOrLLxzg4yNzrpN6eZTM2QuhufMGEef+Xk2hi=PSw@mail.gmail.com>

Hello,

On Tue, Mar 11, 2014 at 12:05 AM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Well, attach a debugger to the ogr2ogr process and see where the time is
> spent.
>
> your SQL clause could be replaced by "-fid 1", but I'm not sure that the reason
> for the slowness.
>

Don't know. I could handle to load it in PostGIS using ogr2ogr and
changing some Postgres parameters. Thanks anyway!


>> Hello,
>>
>> I'm working with a MIF file, contaning just 5 multipolygons (in form
>> of "regions", in MapInfo terms). But the file weights 700MB. So, the
>> multipolygons are really big. I'd like to transform my file to SHP or
>> PostGIS using ogr2ogr, but any operation takes forever.
>>
>> My current approach is to use -sql flag this way:
>>
>> ogr2ogr -sql "select * from my_layer where fid = 1" my_layer.shp
>> my_layer.mif
>>
>> But after 2 hours, it still continues working. I've activated debug,
>> and last text I've seen is: "Shape: Treating as encoding
>> 'ISO-8859-1'."
>>
>> All the clip operations I've tried with ogr2ogr have the same
>> problems: I have to wait hours, and after that, I just get a SHP of
>> 100 Bytes. So, I kill the process.
>>
>> Should I be more patient? Or is there any smarter approach to handle
>> this kind of file?
>>
>> Best regards,
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html



-- 
Jorge Arevalo
Freelance developer

http://about.me/jorgeas80

From piero.campa at gmail.com  Mon Mar 17 03:45:18 2014
From: piero.campa at gmail.com (Piero Campalani)
Date: Mon, 17 Mar 2014 11:45:18 +0100
Subject: [gdal-dev] GML box in .JP2 image
In-Reply-To: <201403162008.59782.even.rouault@mines-paris.org>
References: <CAMp9JaOs-P+v_qZoVWSTCz1qiQm1fJaQU-j_WGp73j+aCipOiQ@mail.gmail.com>
	<201403162008.59782.even.rouault@mines-paris.org>
Message-ID: <CAMp9JaPFBggdxXu9pb=yoLTH02GYgMqH5uPakeopwEF4YNuBLw@mail.gmail.com>

That's just great.

All working as expected here.
Thanks Even for your quick replies.

Piero


On 16 March 2014 20:08, Even Rouault <even.rouault at mines-paris.org> wrote:

> Le dimanche 16 mars 2014 19:23:18, Piero Campalani a ?crit :
> > Hi list,
> >
> > I am using GDAL 1.10 + JP2OpenJPEG driver to encode .JP2 files including
> a
> > GML metadata box.
> > http://www.gdal.org/frmt_jp2openjpeg.html
> >
> > I used it successfully to gdal_translate a JP2 from a GeoTIFF image, but
> > then: what are the read/write options for the user with regards to the
> GML
> > box?
>
> As far as writing is concerned, the GMLJP2 creation option controls whether
> the GML box should be written or not. It defaults to YES, as documented.
>
> >
> > Can gdalinfo extract the GML information and display it?
>
> Yes, this is done automaticaly when trying to get the SRS and
> geotransformation matrix.
>
> With GDAL trunk (not 1.10), you can the GML fragment with the "-mdd all"
> option of gdalinfo.
>
> > When creating a JP2 image, can I specify my own GML fragment?
>
> Yes, you must define the GMLJP2OVERRIDE configuration option to be the
> name of a
> file that contains the GML fragment. This is admitedly an undocumented
> feature.
>
> e.g :
> gdal_translate my.tif my.jp2 -of JP2OpenJPEG --config GMLJP2OVERRIDE my.gml
>
>
> >
> > Best,
> > Piero
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140317/2dc99f4d/attachment.html>

From jukka.rahkonen at mmmtike.fi  Mon Mar 17 04:26:31 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 17 Mar 2014 11:26:31 +0000 (UTC)
Subject: [gdal-dev] Motion: Commit Access for Vincent Mora
References: <1394811749.53232365ab854@imp.free.fr>
Message-ID: <loom.20140317T122615-102@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> Motion: Extend GDAL/OGR commit access to Vincent Mora.

+1

Jukka Rahkonen


From szekerest at gmail.com  Mon Mar 17 04:44:47 2014
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon, 17 Mar 2014 12:44:47 +0100
Subject: [gdal-dev] Motion: Commit Access for Vincent Mora
In-Reply-To: <1394811749.53232365ab854@imp.free.fr>
References: <1394811749.53232365ab854@imp.free.fr>
Message-ID: <CACALY+TnEv_L8q+ha=X+YDyAgRVSUYe-inXMU2exx-fTRMArZw@mail.gmail.com>

+1

Tamas



2014-03-14 16:42 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:

> Motion: Extend GDAL/OGR commit access to Vincent Mora.
>
> ---
>
> I'd like to make it easier for Vincent to maintain and improve the recently
> committed OGR WaSP driver, without me being the bottleneck. He has
> demonstrated
> a good knowledge of OGR working, and good interaction with our community.
>
> Vincent, could you answer to this email to state that you have read and
> agreed
> to the GDAL commiter guidelines :
> http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start the voting with:
>
> +1 Even
>
> Best regards,
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140317/eb81da08/attachment.html>

From howard at hobu.co  Mon Mar 17 05:18:19 2014
From: howard at hobu.co (Howard Butler)
Date: Mon, 17 Mar 2014 07:18:19 -0500
Subject: [gdal-dev] Motion: Commit Access for Vincent Mora
In-Reply-To: <CACALY+TnEv_L8q+ha=X+YDyAgRVSUYe-inXMU2exx-fTRMArZw@mail.gmail.com>
References: <1394811749.53232365ab854@imp.free.fr>
	<CACALY+TnEv_L8q+ha=X+YDyAgRVSUYe-inXMU2exx-fTRMArZw@mail.gmail.com>
Message-ID: <C92AB36E-4499-4542-9236-205410B82DC8@hobu.co>

+1

> On Mar 17, 2014, at 6:44 AM, Tamas Szekeres <szekerest at gmail.com> wrote:
> 
> +1
> 
> Tamas
> 
> 
> 
> 2014-03-14 16:42 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:
>> Motion: Extend GDAL/OGR commit access to Vincent Mora.
>> 
>> ---
>> 
>> I'd like to make it easier for Vincent to maintain and improve the recently
>> committed OGR WaSP driver, without me being the bottleneck. He has demonstrated
>> a good knowledge of OGR working, and good interaction with our community.
>> 
>> Vincent, could you answer to this email to state that you have read and agreed
>> to the GDAL commiter guidelines :
>> http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>> 
>> I'll start the voting with:
>> 
>> +1 Even
>> 
>> Best regards,
>> 
>> --
>> Geospatial professional services
>> http://even.rouault.free.fr/services.html
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140317/477af5c5/attachment.html>

From dmorissette at mapgears.com  Mon Mar 17 06:17:42 2014
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon, 17 Mar 2014 09:17:42 -0400
Subject: [gdal-dev] Motion: Commit Access for Vincent Mora
In-Reply-To: <1394811749.53232365ab854@imp.free.fr>
References: <1394811749.53232365ab854@imp.free.fr>
Message-ID: <5326F5F6.5090608@mapgears.com>

+1

Daniel

On 14-03-14 11:42 AM, Even Rouault wrote:
> Motion: Extend GDAL/OGR commit access to Vincent Mora.
>
> ---
>
> I'd like to make it easier for Vincent to maintain and improve the recently
> committed OGR WaSP driver, without me being the bottleneck. He has demonstrated
> a good knowledge of OGR working, and good interaction with our community.
>
> Vincent, could you answer to this email to state that you have read and agreed
> to the GDAL commiter guidelines :
> http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start the voting with:
>
> +1 Even
>
> Best regards,
>


-- 
Daniel Morissette
T: +1 418-696-5056 #201
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From giampaolo.rebuzzi at i-sti.net  Mon Mar 17 07:13:17 2014
From: giampaolo.rebuzzi at i-sti.net (Giampaolo)
Date: Mon, 17 Mar 2014 07:13:17 -0700 (PDT)
Subject: [gdal-dev]  Error while importing shapefiles to Sql Server
Message-ID: <1395065597921-5129482.post@n6.nabble.com>

Hi, I wrote this batch file to import all the shapefiles in a folder to Sql
Server:

@ECHO OFF
setlocal EnableDelayedExpansion
echo Importing...
for %%f in (*.shp) do (
set filename=%%~nf
set filenametrunc=!filename:~3!
ogr2ogr -append -update -f MSSQLSpatial
"MSSQL:server=.\SQLEXPRESS;database=ShapeFiles;trusted_connection=yes;"
"%%f" -nln !filenametrunc!

echo !filename!
)
echo Completed
PAUSE


Shapefiles are named like this:
001boundary.shp
001grid.shp
002boundary.shp
002grid.shp
...

It works fine while importing 001boundary.shp and 001grid.shp and creating
'boundary' table and 'grid' table, but, when it tries to import
002boundary.shp and 002grid.shp, it gives me this error:

ERROR 1: Layer boundary already exists, CreateLayer failed.
Use the layer creation option OVERWRITE=YES to replace it.
ERROR 1: Terminating translation prematurely after failed
translation of layer 001boundary (use -skipfailures to skip errors)

I think it's because the tables already exists, so, how can I make it append
the new values to existing tables?

Thank you,
Giampaolo




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-Error-while-importing-shapefiles-to-Sql-Server-tp5129482.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From kansal.k at gmail.com  Mon Mar 17 11:05:42 2014
From: kansal.k at gmail.com (Kshitij Kansal)
Date: Mon, 17 Mar 2014 23:35:42 +0530
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <CAMKgpOapi22gWnctgYeBsLag7u0D2rOKJ=-NyF3g4jb17oYWPw@mail.gmail.com>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<1390896882268-5100379.post@n6.nabble.com>
	<CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>
	<201401282101.00768.even.rouault@mines-paris.org>
	<CAKTWcS=CviogV2Kc5hVkqUkSOECwGiVtqVLzdET4zR1xJb2SMA@mail.gmail.com>
	<loom.20140129T084029-6@post.gmane.org>
	<CAKTWcSmH2drpYqYH+J9F37XRNNu7xxXc+ZQ5WGTcmD5qYqC0Vg@mail.gmail.com>
	<CAKTWcSmu1NqwhFjSpu_yTEstK63jyOa_gm4Tp9N+35Dssrpn5w@mail.gmail.com>
	<1391806418.52f547d239b63@imp.free.fr>
	<CAKTWcSkbXgRD=TcOne+=HEyvHDJAPhJGROqWd5MdvYX9k-10+A@mail.gmail.com>
	<52F5ECBB.6010507@gmail.com>
	<CAKTWcSnjZ0j9uek+QeULFvHpP04wgcWs0Br_kQ7juw0iWnMOZQ@mail.gmail.com>
	<CAKTWcS=9dfhvBv_fQUP+2T3w3jVtxFcjdrKaCY41k3mFzAyTdg@mail.gmail.com>
	<53234FC1.7050503@gmail.com>
	<CAMKgpOY8SVPZTQzkr_WE+KsOdwD3K8BjkbVXry_kuDpgXf+xKg@mail.gmail.com>
	<CAKTWcSm6OpJWP3ci0=5J=LDvSQfHm=eawmMVvnWna5=hTdWJKw@mail.gmail.com>
	<9E09F659-945F-438D-B061-91F0E91703D9@pricepages.org>
	<5324C5E4.1030804@gmail.com>
	<CAMKgpOapi22gWnctgYeBsLag7u0D2rOKJ=-NyF3g4jb17oYWPw@mail.gmail.com>
Message-ID: <CAKTWcS=6M4fLxf3h30n0uwhaN+OrudOxcobzqJEbavS9juj71g@mail.gmail.com>

Hello Everyone

I have submitted my proposal at the melange website. My proposal is
available here<https://www.google-melange.com/gsoc/proposal/review/student/google/gsoc2014/kansal/5629499534213120>
.
Please review my proposal and give me some suggestions to make this
proposal even more useful to the organization.

@Dmitriy & Chaitanya - I urge you to please specifically look into the
"common interface to various algorithms using some existing API" part
 apart from the whole proposal, in my timeline. I have devoted 7-8 days for
this work. If you people have some comments regarding this, kindly convey
it to me.

Thanking You all

With Regards,

Kshitij Kansal

Lab For Spatial Informatics,

IIIT Hyderabad



On Sun, Mar 16, 2014 at 11:46 AM, Chaitanya kumar CH <chaitanya.ch at gmail.com
> wrote:

> Kshitij,
>
> As suggested you should plan to allow user to select the algorithm for key
> point detection and matching.
>
> I'll explain how to do that later. But essentially you may get some input
> from the user to change the default algorithm to something else. So, all
> the steps should be done independent of each other.
>
> --
> Best regards,
> Chaitanya Kumar CH
> On 16-Mar-2014 2:58 am, "Dmitriy Baryshnikov" <bishop.dev at gmail.com>
> wrote:
>
>>  Hi,
>>
>> I only proposed to use the exist API - GDALComputeMatchingPoints, or
>> modify it to support new method BRISK. You have not to modify SimpleSurf,
>> but only make it still working as now.
>> GDAL is library, not the "Automatic geo-referencer utility" and some
>> common methods and functions should be developed. This does not deny that
>> such a tool can be developed but it must use this
>> common methods and functions. For example see the console utilities in
>> apps folder of GDAL source tree. They use GDAL functions and methods.
>>
>> Best regards,
>>     Dmitry
>>
>> 16.03.2014 1:15, Seth Price ?????:
>>
>> I have done something like this recently. You would be better off tearing
>> out SURF & linking to OpenCV for all feature detection and extraction. Here
>> is a link to the patch that OpenCV needs to support large & 16 bit imagery.
>>
>>  https://github.com/Itseez/opencv/pull/1932
>>
>>  ~Seth
>>
>>  via iPhone
>>
>> On Mar 15, 2014, at 12:50 PM, Kshitij Kansal <kansal.k at gmail.com> wrote:
>>
>>   Hello Again,
>>
>>  @Dimitriy - Currently the GDALComputeMatchingPoints  is using the
>> SimpleSurf algorithm for matching points. Are you proposing that, I should
>> implement the BRISK and then provide user the option of using either this
>> or SimpleSurf(already implemented)?
>> This is indeed a very interesting thought but the problem in this is
>> that, the GDALComputeMatchingPoints is developed with respect to the
>> correlator project and I feel that SimpleSurf algorithm implemented there
>> won't work on my Automatic geo-referencer as I would be considering the
>> Multispectral Imagery and Large Datasets which are not handled in the
>> current implementation.* So this will require modification to SimpleSurf
>> as well.*
>>  I hope I have made my doubt clear? Please convey your views on this.
>>
>>  @Chaitanya - In comparison to the SURF, BRISK can definitely handle the
>> large imagery to great extent. But there is going to be some threshold upto
>> which this algorithm will work because we must not forget that these
>> algorithms are developed for Normal RGB images for Computer Vision related
>> work and there usage to Remote Sensing requires some modification. I will
>> try to look for this thing in more detail and then get back to you.
>>
>>
>>  Also, should I prepare my initial draft of proposal based this BRISK
>> idea only?
>> I have already started work in this direction and will soon post it, for
>> review.
>>
>>  With Regards,
>>
>>   Kshitij Kansal
>>
>> Lab For Spatial Informatics,
>>
>> IIIT Hyderabad
>>
>>
>>
>> On Sat, Mar 15, 2014 at 12:29 AM, Chaitanya kumar CH <
>> chaitanya.ch at gmail.com> wrote:
>>
>>> Kshitij,
>>>
>>> What is the performance of the proposed algorithms for very large
>>> rasters? If one of them is good with large images that's a cleaner choice
>>> without all the workaround with scaling the rasters.
>>>
>>> --
>>> Best regards,
>>> Chaitanya Kumar CH
>>>  On 15-Mar-2014 12:22 am, "Dmitriy Baryshnikov" <bishop.dev at gmail.com>
>>> wrote:
>>>
>>>>   Hi,
>>>>
>>>> I think we need to decide it here, not to create lot of proposals. The
>>>> second idea is very interesting. Maybe it worth to create some common
>>>> interface (or API) to add new methods BRISK, SURF, SIFT etc.
>>>> You can develop you realisation of BRISK and demonstrate how-to one can
>>>> use it via such common interface.
>>>> E.g. in GDALComputeMatchingPoints add enum for algorithms or use exist
>>>> papszOptions.
>>>>
>>>> Best regards,
>>>>     Dmitry
>>>>
>>>>
>>>>    _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>    _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140317/b5e831bc/attachment.html>

From piotr at cgis.pl  Mon Mar 17 06:11:13 2014
From: piotr at cgis.pl (Piotr Tracz)
Date: Mon, 17 Mar 2014 14:11:13 +0100
Subject: [gdal-dev] Enter The Chicken
In-Reply-To: <CAK8GPyDgZVxMt3NF7=xcECR-Mu0WtfNjM3V-422_=pSwA80nug@mail.gmail.com>
References: <CAK8GPyDgZVxMt3NF7=xcECR-Mu0WtfNjM3V-422_=pSwA80nug@mail.gmail.com>
Message-ID: <5326F471.1060408@cgis.pl>

W dniu 2014-03-15 15:05, Aaron Boxer pisze:
> Hello,
>
> For those of you who are interested in high performance JPEG 2000, I 
> have just
> launched my ThousandthChicken OpenCL library.
>
> https://github.com/OpenCodec/ThousandthChicken
>
>
If you are using OpenCL don't forget to make your code OpenCL ICD Loader 
compatible. I'm preparing patches to GDAL to make it ICD compatible...

More info about  OpenCL Installable Client Driver Loader:
http://www.khronos.org/registry/cl/

/Piotr

From sandeepkumar7489 at gmail.com  Tue Mar 18 03:07:10 2014
From: sandeepkumar7489 at gmail.com (sandeep)
Date: Tue, 18 Mar 2014 03:07:10 -0700 (PDT)
Subject: [gdal-dev] How to find the geoextents in a netCDF file
Message-ID: <1395137230854-5129619.post@n6.nabble.com>

hi,

i had run gdalinfo on .nc file. it doesnt have subdatsets. it is rainfall
data. it has 122 bands. how can i get geoextents of this file. and how do i
extract each band from it if i want display band according to the time? how
can i access those variables? i am writing this in C so i want to know how
to access the variables in this file?



thanks
sandeep



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/How-to-find-the-geoextents-in-a-netCDF-file-tp5129619.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at mmmtike.fi  Tue Mar 18 03:28:31 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 18 Mar 2014 10:28:31 +0000 (UTC)
Subject: [gdal-dev] Error while importing shapefiles to Sql Server
References: <1395065597921-5129482.post@n6.nabble.com>
Message-ID: <loom.20140318T111605-749@post.gmane.org>

Giampaolo <giampaolo.rebuzzi <at> i-sti.net> writes:

> 
> Hi, I wrote this batch file to import all the shapefiles in a folder to Sql
> Server:
> 
>  <at> ECHO OFF
> setlocal EnableDelayedExpansion
> echo Importing...
> for %%f in (*.shp) do (
> set filename=%%~nf
> set filenametrunc=!filename:~3!
> ogr2ogr -append -update -f MSSQLSpatial
> "MSSQL:server=.\SQLEXPRESS;database=ShapeFiles;trusted_connection=yes;"
> "%%f" -nln !filenametrunc!
> 
> echo !filename!
> )
> echo Completed
> PAUSE
> 
> Shapefiles are named like this:
> 001boundary.shp
> 001grid.shp
> 002boundary.shp
> 002grid.shp
> ...
> 
> It works fine while importing 001boundary.shp and 001grid.shp and creating
> 'boundary' table and 'grid' table, but, when it tries to import
> 002boundary.shp and 002grid.shp, it gives me this error:
> 
> ERROR 1: Layer boundary already exists, CreateLayer failed.
> Use the layer creation option OVERWRITE=YES to replace it.
> ERROR 1: Terminating translation prematurely after failed
> translation of layer 001boundary (use -skipfailures to skip errors)
> 
> I think it's because the tables already exists, so, how can I make it append
> the new values to existing tables?

Hi,

The trouble may come from the -nln parameter. I had a try with Spatialite
and it did accept -nln also when appending but I am remembering that I have
experienced perhaps with Oracle that -nln was accepted only when the table
was really created. You may have success by removing -nln beginning from the
second file but I do not know what is the right syntax for giving the
existing table name for GDAL MSSQL driver.

Myself I thing I would not bother to think too much but just convert
everything into one Spatialite table and then send it into MSSQL with a
single ogr2ogr command.

-Jukka Rahkonen-

> 
> Thank you,
> Giampaolo
> 
> --
> View this message in context:
http://osgeo-org.1560.x6.nabble.com/gdal-dev-Error-while-importing-shapefiles-to-Sql-Server-tp5129482.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> 





From even.rouault at mines-paris.org  Tue Mar 18 03:38:33 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 18 Mar 2014 11:38:33 +0100
Subject: [gdal-dev] How to find the geoextents in a netCDF file
In-Reply-To: <1395137230854-5129619.post@n6.nabble.com>
References: <1395137230854-5129619.post@n6.nabble.com>
Message-ID: <1395139113.5328222987482@imp.free.fr>

It looks like you need to read http://gdal.org/gdal_tutorial.html

> hi,
>
> i had run gdalinfo on .nc file. it doesnt have subdatsets. it is rainfall
> data. it has 122 bands. how can i get geoextents of this file. and how do i
> extract each band from it if i want display band according to the time? how
> can i access those variables? i am writing this in C so i want to know how
> to access the variables in this file?
>
>
>
> thanks
> sandeep
>
>
>
> --
> View this message in context:
>
http://osgeo-org.1560.x6.nabble.com/How-to-find-the-geoextents-in-a-netCDF-file-tp5129619.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From giampaolo.rebuzzi at i-sti.net  Tue Mar 18 04:36:20 2014
From: giampaolo.rebuzzi at i-sti.net (Giampaolo)
Date: Tue, 18 Mar 2014 04:36:20 -0700 (PDT)
Subject: [gdal-dev] Error while importing shapefiles to Sql Server
In-Reply-To: <loom.20140318T111605-749@post.gmane.org>
References: <1395065597921-5129482.post@n6.nabble.com>
	<loom.20140318T111605-749@post.gmane.org>
Message-ID: <1395142580321-5129637.post@n6.nabble.com>

Hi, thank you for your answer.
I already thought to create the tables with the first set of files and then
removing -nln but, with the succeeding sets (I don't have only 2 sets, but
250), ogr2ogr would create new tables with the original file names.
It would be nice to have a parameter similar to -nln that permits to specify
the layer name to append data to.

In the meanwhile I found Shape2Sql software that works as needed:

@ECHO OFF
setlocal EnableDelayedExpansion
echo Importing... 
for %%f in (*.shp) do (
set filename=%%~nf
set filenametrunc=!filename:~3!
Shape2Sql -shp="%%~dpnxf" -connstr="Data Source=.\SQLEXPRESS;Initial
Catalog=ShapeFiles;" -table=!filenametrunc! -srid=4326 -append=true
-geography=true
echo !filename! 
)
echo Completed
PAUSE

It puts data in the specified table and if the table doesn't exist, it first
create it.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-Error-while-importing-shapefiles-to-Sql-Server-tp5129482p5129637.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From ckoplay at gmail.com  Tue Mar 18 05:08:39 2014
From: ckoplay at gmail.com (Cemal Koplay)
Date: Tue, 18 Mar 2014 14:08:39 +0200
Subject: [gdal-dev] mapinfo driver - polygon geometries
Message-ID: <CAFTBHvtLzYapgcZFdBo+goXUeEzc4MO8AhgHDVfW9bo_GOjYFA@mail.gmail.com>

Hi,

I want to ask a question for the mapinfo(mitab) driver. When i try to open
a .tab file whose geometry type is polygon, OGRFeatureDefn::GetGeomType
method for layer object return wkbUnknown instead of wkbPolygon. When i
search for the mitab_tabfile.cpp for the geometry type parsing code, i
encounter with this block of code in the TABFile::Open method .

        int numPoints=0, numRegions=0, numTexts=0, numLines=0;

        GetFeatureCountByType( numPoints, numLines, numRegions, numTexts);

        numPoints += numTexts;
        if( numPoints > 0 && numLines == 0 && numRegions == 0 )
            m_poDefn->SetGeomType( wkbPoint );
        else if( numPoints == 0 && numLines > 0 && numRegions == 0 )
            m_poDefn->SetGeomType( wkbLineString );
  else
            /* we leave it unknown indicating a mixture */;

the case for  the "numPoints == 0 && numLines == 0 && numRegions > 0" is
missing. So polygon support is missing. When i add this case to code and
set the geomtype as polygon, the driver works fine for polygon files. Is
this a bug or is it intentionally missing?

Thanx.

cemal.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140318/bb455a4b/attachment.html>

From even.rouault at mines-paris.org  Tue Mar 18 05:18:27 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 18 Mar 2014 13:18:27 +0100
Subject: [gdal-dev] mapinfo driver - polygon geometries
In-Reply-To: <CAFTBHvtLzYapgcZFdBo+goXUeEzc4MO8AhgHDVfW9bo_GOjYFA@mail.gmail.com>
References: <CAFTBHvtLzYapgcZFdBo+goXUeEzc4MO8AhgHDVfW9bo_GOjYFA@mail.gmail.com>
Message-ID: <1395145107.5328399368191@imp.free.fr>

Cemal,

I guess the reason might be that regions can be according to cases Polygons (one
outer ring with 0 or more inner rings) or MultiPolygons (several outer rings
with 0 or more inner rings), which are 2 directinct geometry types in OGR model
(following Simple Features specifications). Well, other drivers such as
Shapefile don't do that distinction and advertize Polygon, but this cause
problems when converting to PostGIS or Spatialite for example (that strictly
enforce geometry types).

Even

> Hi,
>
> I want to ask a question for the mapinfo(mitab) driver. When i try to open
> a .tab file whose geometry type is polygon, OGRFeatureDefn::GetGeomType
> method for layer object return wkbUnknown instead of wkbPolygon. When i
> search for the mitab_tabfile.cpp for the geometry type parsing code, i
> encounter with this block of code in the TABFile::Open method .
>
>         int numPoints=0, numRegions=0, numTexts=0, numLines=0;
>
>         GetFeatureCountByType( numPoints, numLines, numRegions, numTexts);
>
>         numPoints += numTexts;
>         if( numPoints > 0 && numLines == 0 && numRegions == 0 )
>             m_poDefn->SetGeomType( wkbPoint );
>         else if( numPoints == 0 && numLines > 0 && numRegions == 0 )
>             m_poDefn->SetGeomType( wkbLineString );
>   else
>             /* we leave it unknown indicating a mixture */;
>
> the case for  the "numPoints == 0 && numLines == 0 && numRegions > 0" is
> missing. So polygon support is missing. When i add this case to code and
> set the geomtype as polygon, the driver works fine for polygon files. Is
> this a bug or is it intentionally missing?
>
> Thanx.
>
> cemal.
>



From Ivan.Price at noveltis.fr  Tue Mar 18 05:43:45 2014
From: Ivan.Price at noveltis.fr (Ivan Price)
Date: Tue, 18 Mar 2014 12:43:45 +0000
Subject: [gdal-dev] How to find the geoextents in a netCDF file
In-Reply-To: <1395139113.5328222987482@imp.free.fr>
References: <1395137230854-5129619.post@n6.nabble.com>,
	<1395139113.5328222987482@imp.free.fr>
Message-ID: <605C20E40C3B7D4E93E0E804EECE898E1EB71C70@GLORFINDEL.noveltis.loc>


and make sure you'r using gdal 1.10.. the netcdf driver is more functional

-i

________________________________________
From: gdal-dev-bounces at lists.osgeo.org [gdal-dev-bounces at lists.osgeo.org] on behalf of Even Rouault [even.rouault at mines-paris.org]
Sent: Tuesday, 18 March 2014 11:38
To: sandeep
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] How to find the geoextents in a netCDF file

It looks like you need to read http://gdal.org/gdal_tutorial.html

> hi,
>
> i had run gdalinfo on .nc file. it doesnt have subdatsets. it is rainfall
> data. it has 122 bands. how can i get geoextents of this file. and how do i
> extract each band from it if i want display band according to the time? how
> can i access those variables? i am writing this in C so i want to know how
> to access the variables in this file?
>
>
>
> thanks
> sandeep
>
>
>
> --
> View this message in context:
>
http://osgeo-org.1560.x6.nabble.com/How-to-find-the-geoextents-in-a-netCDF-file-tp5129619.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jukka.rahkonen at mmmtike.fi  Tue Mar 18 05:56:06 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 18 Mar 2014 12:56:06 +0000 (UTC)
Subject: [gdal-dev] Error while importing shapefiles to Sql Server
References: <1395065597921-5129482.post@n6.nabble.com>
	<loom.20140318T111605-749@post.gmane.org>
	<1395142580321-5129637.post@n6.nabble.com>
Message-ID: <loom.20140318T135303-375@post.gmane.org>

Giampaolo <giampaolo.rebuzzi <at> i-sti.net> writes:

> 
> Hi, thank you for your answer.
> I already thought to create the tables with the first set of files and then
> removing -nln but, with the succeeding sets (I don't have only 2 sets, but
> 250), ogr2ogr would create new tables with the original file names.
> It would be nice to have a parameter similar to -nln that permits to specify
> the layer name to append data to.

There may be already. Parameter -nln stands for "new layer name" and it is
obviously originally made for initializing a layer that does not exist yet.
With MSSQL I would have a try with the "tables=" parameter. 

 "MSSQL:server=.\MSSQLSERVER2008;database=geodb;tables=rivers;trusted_connection=yes"

-Jukka Rahkonen-


From piotr at cgis.pl  Tue Mar 18 07:02:10 2014
From: piotr at cgis.pl (Piotr Tracz)
Date: Tue, 18 Mar 2014 15:02:10 +0100
Subject: [gdal-dev] Enter The Chicken
In-Reply-To: <CAK8GPyAJMqMeR8-FGqwFpdDoHcFXnz6ME=C3co+XM1Jd5WrTSg@mail.gmail.com>
References: <CAK8GPyDgZVxMt3NF7=xcECR-Mu0WtfNjM3V-422_=pSwA80nug@mail.gmail.com>	<5326F471.1060408@cgis.pl>
	<CAK8GPyAJMqMeR8-FGqwFpdDoHcFXnz6ME=C3co+XM1Jd5WrTSg@mail.gmail.com>
Message-ID: <532851E2.2000507@cgis.pl>

W dniu 2014-03-18 13:52, Aaron Boxer pisze:
>
> Thanks for the heads up. What types of changes did you need to make to 
> GDAL to make it ICD compatible?
>

1. NMake build script
2. Linking aganist ICD lib instead of OpenCL SDK (ATI)
3. Config params, which can set OpenCL device runtime (CPLSetConfigOption)
4. OpenCL warp kernel source which can use above changes

Its still work under progress... no ETA.

/Piotr

From landa.martin at gmail.com  Tue Mar 18 08:18:57 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Tue, 18 Mar 2014 16:18:57 +0100
Subject: [gdal-dev] GML / NAS code redundancy
Message-ID: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>

Hi all,

recently I started to write a new OGR driver for specific national
exchange format which based on GML. I started studying code of GML and
NAS driver which are both based on IGMLDriver. I discovered that part
of the code is duplicated in NASDriver compared to GMLDriver. The
differencies are usually little and 99% of the code is identical, for
example - SaveClass() - NAS [1] and GML [2]. There could be probably a
middle class same for NAS and GML driver (and probably also for the
driver I am currently writing) - at least when loading or saving
classes into GFS file...

What do you think?

Martin

[1] http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/gml/gmlreader.cpp#L1247
[2] http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/nas/nasreader.cpp#L804

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From even.rouault at mines-paris.org  Tue Mar 18 08:35:13 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 18 Mar 2014 16:35:13 +0100
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
Message-ID: <1395156913.532867b14703d@imp.free.fr>

Martin,

Yes I agree that there's code duplication, and some of it could have been
avoided. I guess this was to avoid to make the GML driver too dirty with NAS
stuff, or regress.
Personnaly  I've hacked a lot in the GML driver over the past few years to add
support for various application schemas and well, yes, it has gotten a bit
messy. But I've also added recently generic stuff which should make support for
some categories of application schemas easier. See the "Registry for GML
application schemas" paragraph of http://gdal.org/ogr/drv_gml.html. Perhaps your
use case could fit into that.

Even

> Hi all,
>
> recently I started to write a new OGR driver for specific national
> exchange format which based on GML. I started studying code of GML and
> NAS driver which are both based on IGMLDriver. I discovered that part
> of the code is duplicated in NASDriver compared to GMLDriver. The
> differencies are usually little and 99% of the code is identical, for
> example - SaveClass() - NAS [1] and GML [2]. There could be probably a
> middle class same for NAS and GML driver (and probably also for the
> driver I am currently writing) - at least when loading or saving
> classes into GFS file...
>
> What do you think?
>
> Martin
>
> [1]
>
http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/gml/gmlreader.cpp#L1247
> [2]
>
http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/nas/nasreader.cpp#L804
>
> --
> Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From landa.martin at gmail.com  Tue Mar 18 09:17:17 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Tue, 18 Mar 2014 17:17:17 +0100
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <1395156913.532867b14703d@imp.free.fr>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<1395156913.532867b14703d@imp.free.fr>
Message-ID: <CA+Ei1Ofdnc1Z82a+jt+oQgastDHGNC5nJZ+sH+8xsAhdNyY+eQ@mail.gmail.com>

Hi,

2014-03-18 16:35 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:
> some categories of application schemas easier. See the "Registry for GML
> application schemas" paragraph of http://gdal.org/ogr/drv_gml.html. Perhaps your
> use case could fit into that.

right, after digging into the code I discovered that `featureType`
from `gml_registry.xml` is checked only in header (first 2048 bytes)
[1]. This check fails in my case because features are not included in
szHeader buffer. Could be that I overlooked something...

Martin

[1] http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/gml/ogrgmldatasource.cpp#L771

From even.rouault at mines-paris.org  Tue Mar 18 09:25:13 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 18 Mar 2014 17:25:13 +0100
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <CA+Ei1Ofdnc1Z82a+jt+oQgastDHGNC5nJZ+sH+8xsAhdNyY+eQ@mail.gmail.com>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<1395156913.532867b14703d@imp.free.fr>
	<CA+Ei1Ofdnc1Z82a+jt+oQgastDHGNC5nJZ+sH+8xsAhdNyY+eQ@mail.gmail.com>
Message-ID: <1395159913.5328736950cba@imp.free.fr>

Selon Martin Landa <landa.martin at gmail.com>:

> Hi,
>
> 2014-03-18 16:35 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:
> > some categories of application schemas easier. See the "Registry for GML
> > application schemas" paragraph of http://gdal.org/ogr/drv_gml.html. Perhaps
> your
> > use case could fit into that.
>
> right, after digging into the code I discovered that `featureType`
> from `gml_registry.xml` is checked only in header (first 2048 bytes)
> [1]. This check fails in my case because features are not included in
> szHeader buffer. Could be that I overlooked something...

Ah, well all of this is heuristics, so you could likely increase the buffer size
if it remains at reasonable size.

Another idea, if the patterns to recognize are much further in the file, since
at that point we know that it is GML, would be to separate the recognition of
whether it is GML or not (that has succeeded since you reached that point) from
the recognition of what stuff there is in the GML, in which case you could
afford to read more. But namespaces declaration are usually rather at the
beginning of the file, so if 2048 doesn't work, perhaps 4096 would do.


>
> Martin
>
> [1]
>
http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/gml/ogrgmldatasource.cpp#L771
>



From etourigny.dev at gmail.com  Tue Mar 18 09:39:30 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 18 Mar 2014 13:39:30 -0300
Subject: [gdal-dev] How to find the geoextents in a netCDF file
In-Reply-To: <1395137230854-5129619.post@n6.nabble.com>
References: <1395137230854-5129619.post@n6.nabble.com>
Message-ID: <CA+TxYvOmGH7x4H9kQWjGkHKu5LGN6CW-ZEg7RNSx2Y0ysLrcoQ@mail.gmail.com>

As Even suggests you should read the tutorial first, most questions will be
answered there.

As for Band extraction, you need to look at the metadata, which you can
inspect with gdalinfo

you should look for metadata like
NETCDF_DIM_time_DEF
NETCDF_DIM_time_VALUES

and band metadata like
NETCDF_DIM_time=1

If you want more fine-grained control on band selection based on a
particular dimension (in this case time), then perhaps you should look into
software that specializes in netcdf format like nco or cdo.




On Tue, Mar 18, 2014 at 7:07 AM, sandeep <sandeepkumar7489 at gmail.com> wrote:

> hi,
>
> i had run gdalinfo on .nc file. it doesnt have subdatsets. it is rainfall
> data. it has 122 bands. how can i get geoextents of this file. and how do i
> extract each band from it if i want display band according to the time? how
> can i access those variables? i am writing this in C so i want to know how
> to access the variables in this file?
>
>
>
> thanks
> sandeep
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/How-to-find-the-geoextents-in-a-netCDF-file-tp5129619.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140318/eeff386e/attachment.html>

From landa.martin at gmail.com  Tue Mar 18 09:40:59 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Tue, 18 Mar 2014 17:40:59 +0100
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <1395159913.5328736950cba@imp.free.fr>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<1395156913.532867b14703d@imp.free.fr>
	<CA+Ei1Ofdnc1Z82a+jt+oQgastDHGNC5nJZ+sH+8xsAhdNyY+eQ@mail.gmail.com>
	<1395159913.5328736950cba@imp.free.fr>
Message-ID: <CA+Ei1Ochr7yh3RPTsbRiY0rd--xKmYC8RNfX+LqERy+FVpWSEg@mail.gmail.com>

Hi,

2014-03-18 17:25 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:

>> right, after digging into the code I discovered that `featureType`
>> from `gml_registry.xml` is checked only in header (first 2048 bytes)
>> [1]. This check fails in my case because features are not included in
>> szHeader buffer. Could be that I overlooked something...
>
> Ah, well all of this is heuristics, so you could likely increase the buffer size
> if it remains at reasonable size.
>
> Another idea, if the patterns to recognize are much further in the file, since
> at that point we know that it is GML, would be to separate the recognition of
> whether it is GML or not (that has succeeded since you reached that point) from
> the recognition of what stuff there is in the GML, in which case you could
> afford to read more. But namespaces declaration are usually rather at the
> beginning of the file, so if 2048 doesn't work, perhaps 4096 would do.

here is a sample data [1]. There are 8 feature types -

feature type -> first occurrence in the file
vf:Obec -> 2383
vf:CastObce -> 27267
vf:KatastralniUzemi -> 27774
vf:Zsj ...
vf:Ulice
vf:Parcela
vf:StavebniObjekt
vf:AdresniMisto

Thanks for clarification in advance... Martin

[1] http://vdp.cuzk.cz/vymenny_format/soucasna/20140131_OB_502405_UKSH.xml.gz

From even.rouault at mines-paris.org  Tue Mar 18 09:50:39 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 18 Mar 2014 17:50:39 +0100
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <CA+Ei1Ochr7yh3RPTsbRiY0rd--xKmYC8RNfX+LqERy+FVpWSEg@mail.gmail.com>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<1395156913.532867b14703d@imp.free.fr>
	<CA+Ei1Ofdnc1Z82a+jt+oQgastDHGNC5nJZ+sH+8xsAhdNyY+eQ@mail.gmail.com>
	<1395159913.5328736950cba@imp.free.fr>
	<CA+Ei1Ochr7yh3RPTsbRiY0rd--xKmYC8RNfX+LqERy+FVpWSEg@mail.gmail.com>
Message-ID: <1395161439.5328795f4d352@imp.free.fr>

Selon Martin Landa <landa.martin at gmail.com>:

> Hi,
>
> 2014-03-18 17:25 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:
>
> >> right, after digging into the code I discovered that `featureType`
> >> from `gml_registry.xml` is checked only in header (first 2048 bytes)
> >> [1]. This check fails in my case because features are not included in
> >> szHeader buffer. Could be that I overlooked something...
> >
> > Ah, well all of this is heuristics, so you could likely increase the buffer
> size
> > if it remains at reasonable size.
> >
> > Another idea, if the patterns to recognize are much further in the file,
> since
> > at that point we know that it is GML, would be to separate the recognition
> of
> > whether it is GML or not (that has succeeded since you reached that point)
> from
> > the recognition of what stuff there is in the GML, in which case you could
> > afford to read more. But namespaces declaration are usually rather at the
> > beginning of the file, so if 2048 doesn't work, perhaps 4096 would do.
>
> here is a sample data [1]. There are 8 feature types -
>
> feature type -> first occurrence in the file
> vf:Obec -> 2383
> vf:CastObce -> 27267
> vf:KatastralniUzemi -> 27774
> vf:Zsj ...
> vf:Ulice
> vf:Parcela
> vf:StavebniObjekt
> vf:AdresniMisto

I haven't looket at the file but from the above, the logic of the application
schema registry would need to be extended since it currently only supports one
feature type per file. You would need to ingest the full file to recognize which
feature types are in it.

>
> Thanks for clarification in advance... Martin
>
> [1] http://vdp.cuzk.cz/vymenny_format/soucasna/20140131_OB_502405_UKSH.xml.gz
>



From landa.martin at gmail.com  Tue Mar 18 09:55:37 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Tue, 18 Mar 2014 17:55:37 +0100
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <1395161439.5328795f4d352@imp.free.fr>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<1395156913.532867b14703d@imp.free.fr>
	<CA+Ei1Ofdnc1Z82a+jt+oQgastDHGNC5nJZ+sH+8xsAhdNyY+eQ@mail.gmail.com>
	<1395159913.5328736950cba@imp.free.fr>
	<CA+Ei1Ochr7yh3RPTsbRiY0rd--xKmYC8RNfX+LqERy+FVpWSEg@mail.gmail.com>
	<1395161439.5328795f4d352@imp.free.fr>
Message-ID: <CA+Ei1OeqEQ7nC_LYn3KPuh4E5KbXX3VCP3cxEv69WyBKJFrHGw@mail.gmail.com>

Hi Even,

2014-03-18 17:50 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:

[...]

> I haven't looket at the file but from the above, the logic of the application
> schema registry would need to be extended since it currently only supports one
> feature type per file. You would need to ingest the full file to recognize which
> feature types are in it.

at this time I am not sure if to follow gml_registry.xml approach or
to write a new specialized driver for this format. I already started
to write a new driver, but it's similar situation to NAS driver. There
will similar duplication of the code compared to NAS...

Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From landa.martin at gmail.com  Tue Mar 18 09:58:29 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Tue, 18 Mar 2014 17:58:29 +0100
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <1395161439.5328795f4d352@imp.free.fr>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<1395156913.532867b14703d@imp.free.fr>
	<CA+Ei1Ofdnc1Z82a+jt+oQgastDHGNC5nJZ+sH+8xsAhdNyY+eQ@mail.gmail.com>
	<1395159913.5328736950cba@imp.free.fr>
	<CA+Ei1Ochr7yh3RPTsbRiY0rd--xKmYC8RNfX+LqERy+FVpWSEg@mail.gmail.com>
	<1395161439.5328795f4d352@imp.free.fr>
Message-ID: <CA+Ei1OfU=iCdNV-GzMP+pMyppDSQFituigX8DwYi-QyzX5GWkw@mail.gmail.com>

Hi,

2014-03-18 17:50 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:
> I haven't looket at the file but from the above, the logic of the application
> schema registry would need to be extended since it currently only supports one
> feature type per file. You would need to ingest the full file to recognize which
> feature types are in it.

there is probably some misunderstanding, at [1] there is mentioned
Finish registry which contains different feature types
(KiinteistorajanSijaintitiedot, PalstanTunnuspisteenSijaintitiedot,
...). It means that in the input file can be only one feature type not
all of them?

Martin

[1] http://gdal.org/ogr/drv_gml.html

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From even.rouault at mines-paris.org  Tue Mar 18 10:04:43 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 18 Mar 2014 18:04:43 +0100
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <CA+Ei1OfU=iCdNV-GzMP+pMyppDSQFituigX8DwYi-QyzX5GWkw@mail.gmail.com>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<1395156913.532867b14703d@imp.free.fr>
	<CA+Ei1Ofdnc1Z82a+jt+oQgastDHGNC5nJZ+sH+8xsAhdNyY+eQ@mail.gmail.com>
	<1395159913.5328736950cba@imp.free.fr>
	<CA+Ei1Ochr7yh3RPTsbRiY0rd--xKmYC8RNfX+LqERy+FVpWSEg@mail.gmail.com>
	<1395161439.5328795f4d352@imp.free.fr>
	<CA+Ei1OfU=iCdNV-GzMP+pMyppDSQFituigX8DwYi-QyzX5GWkw@mail.gmail.com>
Message-ID: <1395162283.53287cabd2f8c@imp.free.fr>

Selon Martin Landa <landa.martin at gmail.com>:

> Hi,
>
> 2014-03-18 17:50 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:
> > I haven't looket at the file but from the above, the logic of the
> application
> > schema registry would need to be extended since it currently only supports
> one
> > feature type per file. You would need to ingest the full file to recognize
> which
> > feature types are in it.
>
> there is probably some misunderstanding, at [1] there is mentioned
> Finish registry which contains different feature types
> (KiinteistorajanSijaintitiedot, PalstanTunnuspisteenSijaintitiedot,
> ...). It means that in the input file can be only one feature type not
> all of them?

Yes, as far as I remember there were only one feature type per file, hence this
(non-fundamental) restriction in the code. I looked at bit at your sample and I
think you could just use the current code without changing it (well perhaps
increase the szHeader size). Add in the GML registry your feature types and make
them point to the same .gfs file that define all the feature types ! The only
drawback is that you could have empty layers if not all feature types are found,
but that should work OK otherwise.

>
> Martin
>
> [1] http://gdal.org/ogr/drv_gml.html
>
> --
> Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa
>



From landa.martin at gmail.com  Tue Mar 18 10:33:21 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Tue, 18 Mar 2014 18:33:21 +0100
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <1395162283.53287cabd2f8c@imp.free.fr>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<1395156913.532867b14703d@imp.free.fr>
	<CA+Ei1Ofdnc1Z82a+jt+oQgastDHGNC5nJZ+sH+8xsAhdNyY+eQ@mail.gmail.com>
	<1395159913.5328736950cba@imp.free.fr>
	<CA+Ei1Ochr7yh3RPTsbRiY0rd--xKmYC8RNfX+LqERy+FVpWSEg@mail.gmail.com>
	<1395161439.5328795f4d352@imp.free.fr>
	<CA+Ei1OfU=iCdNV-GzMP+pMyppDSQFituigX8DwYi-QyzX5GWkw@mail.gmail.com>
	<1395162283.53287cabd2f8c@imp.free.fr>
Message-ID: <CA+Ei1Ofb1m5CAwdipre=SjJNJ3T_a91TTmYG4tJSG=cnUhQA9w@mail.gmail.com>

Hi Even,

2014-03-18 18:04 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:
> increase the szHeader size). Add in the GML registry your feature types and make
> them point to the same .gfs file that define all the feature types ! The only

I do not understand this part, point to the same GFS file? This file
is generated by OGR, why not to use available XSD for given format? I
tried registry file bellow

<gml_registry>
    <!-- VFR -->
    <namespace prefix="vf"
               uri="urn:cz:isvs:ruian:schemas:VymennyFormatTypy:v1
../ruian/xsd/vymenny_format/VymennyFormatTypy.xsd"
               useGlobalSRSName="true">
        <featureType elementName="Obec"
                 schemaLocation="/path/to/xsd/prvky_int/ObecIntTypy.xsd"/>
    </namespace>
</gml_registry>

where ObecIntTypy.xsd is taken from [1], but doesn't work. I would
expect that OGR reports 'Obec' layer with one feature in this case.

Martin

[1] http://www.cuzk.cz/Uvod/Produkty-a-sluzby/RUIAN/2-Poskytovani-udaju-RUIAN-ISUI-VDP/Vymenny-format-RUIAN/Vymenny-format-RUIAN-(VFR)/2013_08_30_vf_xsd.aspx

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From sandeepkumar7489 at gmail.com  Tue Mar 18 10:38:06 2014
From: sandeepkumar7489 at gmail.com (sandeep)
Date: Tue, 18 Mar 2014 10:38:06 -0700 (PDT)
Subject: [gdal-dev] How to find the geoextents in a netCDF file
In-Reply-To: <CA+TxYvOmGH7x4H9kQWjGkHKu5LGN6CW-ZEg7RNSx2Y0ysLrcoQ@mail.gmail.com>
References: <1395137230854-5129619.post@n6.nabble.com>
	<CA+TxYvOmGH7x4H9kQWjGkHKu5LGN6CW-ZEg7RNSx2Y0ysLrcoQ@mail.gmail.com>
Message-ID: <1395164286450-5129724.post@n6.nabble.com>

yes Etienne i need to extract band according to the NETCDF_DIM_time_VALUES.
so i am doing it in C. so i need to access these variable..   



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/How-to-find-the-geoextents-in-a-netCDF-file-tp5129619p5129724.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From etourigny.dev at gmail.com  Tue Mar 18 10:42:12 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 18 Mar 2014 14:42:12 -0300
Subject: [gdal-dev] How to find the geoextents in a netCDF file
In-Reply-To: <1395164286450-5129724.post@n6.nabble.com>
References: <1395137230854-5129619.post@n6.nabble.com>
	<CA+TxYvOmGH7x4H9kQWjGkHKu5LGN6CW-ZEg7RNSx2Y0ysLrcoQ@mail.gmail.com>
	<1395164286450-5129724.post@n6.nabble.com>
Message-ID: <CA+TxYvP1VFnwHrqczWBmRDNkmLW8wf30mb+C50EcFYp0J1Cvjg@mail.gmail.com>

the gdal api tutorial will give you pointers on how to access dataset and
band-level metadata


On Tue, Mar 18, 2014 at 2:38 PM, sandeep <sandeepkumar7489 at gmail.com> wrote:

> yes Etienne i need to extract band according to the NETCDF_DIM_time_VALUES.
> so i am doing it in C. so i need to access these variable..
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/How-to-find-the-geoextents-in-a-netCDF-file-tp5129619p5129724.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140318/22677c0c/attachment.html>

From sandeepkumar7489 at gmail.com  Tue Mar 18 10:42:52 2014
From: sandeepkumar7489 at gmail.com (sandeep)
Date: Tue, 18 Mar 2014 10:42:52 -0700 (PDT)
Subject: [gdal-dev] How to find the geoextents in a netCDF file
In-Reply-To: <1395164286450-5129724.post@n6.nabble.com>
References: <1395137230854-5129619.post@n6.nabble.com>
	<CA+TxYvOmGH7x4H9kQWjGkHKu5LGN6CW-ZEg7RNSx2Y0ysLrcoQ@mail.gmail.com>
	<1395164286450-5129724.post@n6.nabble.com>
Message-ID: <1395164572380-5129725.post@n6.nabble.com>

>From the GetRasterCount() i can find the number of bands and using vrt i am
creating a file for every band. in order to to show them according to the
NETCDF_DIM_time_VALUES how can i do that?





--
View this message in context: http://osgeo-org.1560.x6.nabble.com/How-to-find-the-geoextents-in-a-netCDF-file-tp5129619p5129725.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From etourigny.dev at gmail.com  Tue Mar 18 10:49:22 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 18 Mar 2014 14:49:22 -0300
Subject: [gdal-dev] How to find the geoextents in a netCDF file
In-Reply-To: <1395164572380-5129725.post@n6.nabble.com>
References: <1395137230854-5129619.post@n6.nabble.com>
	<CA+TxYvOmGH7x4H9kQWjGkHKu5LGN6CW-ZEg7RNSx2Y0ysLrcoQ@mail.gmail.com>
	<1395164286450-5129724.post@n6.nabble.com>
	<1395164572380-5129725.post@n6.nabble.com>
Message-ID: <CA+TxYvOEL7jXEhcO1urHoOB0E_ZgEiOMZB3tjfcacd+9trxduA@mail.gmail.com>

loop for each raster as explained in the tutorial, and get the specific
metadataitem like this

const char* md = GDALGetMetadataItem(hBand, "NETCDF_DIM_time_VALUE", "")

md will contain the value of NETCDF_DIM_time_VALUE for that band



On Tue, Mar 18, 2014 at 2:42 PM, sandeep <sandeepkumar7489 at gmail.com> wrote:

> From the GetRasterCount() i can find the number of bands and using vrt i am
> creating a file for every band. in order to to show them according to the
> NETCDF_DIM_time_VALUES how can i do that?
>
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/How-to-find-the-geoextents-in-a-netCDF-file-tp5129619p5129725.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140318/beaf149f/attachment.html>

From even.rouault at mines-paris.org  Tue Mar 18 11:18:23 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 18 Mar 2014 19:18:23 +0100
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <CA+Ei1Ofb1m5CAwdipre=SjJNJ3T_a91TTmYG4tJSG=cnUhQA9w@mail.gmail.com>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<1395162283.53287cabd2f8c@imp.free.fr>
	<CA+Ei1Ofb1m5CAwdipre=SjJNJ3T_a91TTmYG4tJSG=cnUhQA9w@mail.gmail.com>
Message-ID: <201403181918.23835.even.rouault@mines-paris.org>

Le mardi 18 mars 2014 18:33:21, Martin Landa a ?crit :
> Hi Even,
> 
> 2014-03-18 18:04 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:
> > increase the szHeader size). Add in the GML registry your feature types
> > and make them point to the same .gfs file that define all the feature
> > types ! The only
> 
> I do not understand this part, point to the same GFS file? This file
> is generated by OGR, why not to use available XSD for given format? I
> tried registry file bellow

The OGR GML XSD parser is limited and only understands simple feature model. 
The .gfs is indeed generated by OGR but can also be customized (when the 
automatic parser does not work) and used as a template in the GML registry. 
See the "Syntax of .gfs file by example" paragraph of 
http://www.gdal.org/ogr/drv_gml.html with the syntax of ElementPath and 
GeometryElementPath when you want to build a OGR field from a nested XML 
element. You can have a look at data/inspire_cp_CadastralParcel.gfs for a 
practical example.

> 
> <gml_registry>
>     <!-- VFR -->
>     <namespace prefix="vf"
>                uri="urn:cz:isvs:ruian:schemas:VymennyFormatTypy:v1
> ../ruian/xsd/vymenny_format/VymennyFormatTypy.xsd"
>                useGlobalSRSName="true">
>         <featureType elementName="Obec"
>                  schemaLocation="/path/to/xsd/prvky_int/ObecIntTypy.xsd"/>
>     </namespace>
> </gml_registry>
> 
> where ObecIntTypy.xsd is taken from [1], but doesn't work. I would
> expect that OGR reports 'Obec' layer with one feature in this case.
> 
> Martin
> 
> [1]
> http://www.cuzk.cz/Uvod/Produkty-a-sluzby/RUIAN/2-Poskytovani-udaju-RUIAN-
> ISUI-VDP/Vymenny-format-RUIAN/Vymenny-format-RUIAN-(VFR)/2013_08_30_vf_xsd.
> aspx

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From peifer at gmx.eu  Tue Mar 18 11:18:48 2014
From: peifer at gmx.eu (Hermann Peifer)
Date: Tue, 18 Mar 2014 19:18:48 +0100
Subject: [gdal-dev] GML enhancement proposal: Getting all XML attributes as
	OGR fields
Message-ID: <53288E08.4080005@gmx.eu>

Dear All,

I am wondering if someone else would be interested in a config option 
like: GML_ATTRIBUTES_TO_OGR_FIELDS that would enable auto-detection of 
all XML attributes and subsequently write them into the .gfs file, as 
described at http://trac.osgeo.org/gdal/ticket/5418

If there is no broader interest in such a feature, then I should close 
the ticket as invalid, I would guess.

Hermann

From alain.sauter at univ-paris1.fr  Tue Mar 18 12:54:49 2014
From: alain.sauter at univ-paris1.fr (alain Sauter)
Date: Tue, 18 Mar 2014 20:54:49 +0100
Subject: [gdal-dev] gdalwarp _ RPC_DEM ignored ?
Message-ID: <5328A489.9010701@univ-paris1.fr>

Hi all,

I am trying to orthorectify a couple of aerial photos using gdalwarp, 
but i am stuck with the /-to /transformer option. I have seen in archive 
two request concerning this issue, but without any answer for now... so 
hope this 3rd will have a reply ;)

materials :
scan of an old aerial photo, without fly info and, of course, without 
projection, tif format
Dem of the region, tif format

what i've done :
using qgis georeferencer to grab some GPC's on the aerial photo
using gdal_translate to insert GPC's in the aerial photo

what i've try :

using gdalwarp to transform, rectify and project the aerial photo with :
/gdalwarp -to RPC_DEM=dem.tif -t_srs=EPSG:2154 input.tif output.tif/

result:
my file is transformed and projected but not rectified. Option /-to 
RPC_DEM /is ignored by gdalwarp, even if I write wrong option like /-to 
RP_D...

/Am i doing something wrong ?

thanks for reply

Alain
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140318/32fe4022/attachment.html>

From bishop.dev at gmail.com  Tue Mar 18 14:25:05 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Wed, 19 Mar 2014 01:25:05 +0400
Subject: [gdal-dev] gdalwarp _ RPC_DEM ignored ?
In-Reply-To: <5328A489.9010701@univ-paris1.fr>
References: <5328A489.9010701@univ-paris1.fr>
Message-ID: <5328B9B1.50209@gmail.com>

Hi,

the parameter may ignored because the input tiff lack the RPC 
coefficients. Does any of RPC coefficient exist? What is gdalinfo output 
of you aerial photos?

Best regards,
     Dmitry

18.03.2014 23:54, alain Sauter ?????:
> Hi all,
>
> I am trying to orthorectify a couple of aerial photos using gdalwarp, 
> but i am stuck with the /-to /transformer option. I have seen in 
> archive two request concerning this issue, but without any answer for 
> now... so hope this 3rd will have a reply ;)
>
> materials :
> scan of an old aerial photo, without fly info and, of course, without 
> projection, tif format
> Dem of the region, tif format
>
> what i've done :
> using qgis georeferencer to grab some GPC's on the aerial photo
> using gdal_translate to insert GPC's in the aerial photo
>
> what i've try :
>
> using gdalwarp to transform, rectify and project the aerial photo with :
> /gdalwarp -to RPC_DEM=dem.tif -t_srs=EPSG:2154 input.tif output.tif/
>
> result:
> my file is transformed and projected but not rectified. Option /-to 
> RPC_DEM /is ignored by gdalwarp, even if I write wrong option like 
> /-to RP_D...
>
> /Am i doing something wrong ?
>
> thanks for reply
>
> Alain
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140319/74bcc04f/attachment.html>

From jukka.rahkonen at mmmtike.fi  Tue Mar 18 15:04:56 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 18 Mar 2014 22:04:56 +0000 (UTC)
Subject: [gdal-dev] GML / NAS code redundancy
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<1395156913.532867b14703d@imp.free.fr>
	<CA+Ei1Ofdnc1Z82a+jt+oQgastDHGNC5nJZ+sH+8xsAhdNyY+eQ@mail.gmail.com>
	<1395159913.5328736950cba@imp.free.fr>
	<CA+Ei1Ochr7yh3RPTsbRiY0rd--xKmYC8RNfX+LqERy+FVpWSEg@mail.gmail.com>
	<1395161439.5328795f4d352@imp.free.fr>
	<CA+Ei1OfU=iCdNV-GzMP+pMyppDSQFituigX8DwYi-QyzX5GWkw@mail.gmail.com>
	<1395162283.53287cabd2f8c@imp.free.fr>
Message-ID: <loom.20140318T225118-104@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> Selon Martin Landa <landa.martin <at> gmail.com>:
> 
> > Hi,
> >
> > 2014-03-18 17:50 GMT+01:00 Even Rouault <even.rouault <at> mines-paris.org>:
> > > I haven't looket at the file but from the above, the logic of the
> > application
> > > schema registry would need to be extended since it currently only supports
> > one
> > > feature type per file. You would need to ingest the full file to recognize
> > which
> > > feature types are in it.
> >
> > there is probably some misunderstanding, at [1] there is mentioned
> > Finish registry which contains different feature types
> > (KiinteistorajanSijaintitiedot, PalstanTunnuspisteenSijaintitiedot,
> > ...). It means that in the input file can be only one feature type not
> > all of them?
> 
> Yes, as far as I remember there were only one feature type per file, hence
this
> (non-fundamental) restriction in the code. I looked at bit at your sample
and I
> think you could just use the current code without changing it (well perhaps
> increase the szHeader size). Add in the GML registry your feature types
and make
> them point to the same .gfs file that define all the feature types ! The only
> drawback is that you could have empty layers if not all feature types are
found,
> but that should work OK otherwise.

Hi,

If you want to compare the data from National Land Survey of Finland you can
find the schema for each feature type from page
http://www.maanmittauslaitos.fi/aineistot-palvelut/rajapintapalvelut/kiinteistotietojen-kyselypalvelu-wfs/kayttoonotto/aineistot-tuo

Follow links "Tuotteen skeema". Data samples are available from page
http://www.maanmittauslaitos.fi/aineistot-palvelut/rajapintapalvelut/kiinteistotietojen-kyselypalvelu-wfs/kayttoonotto/kyselyt-esime
follow links "GML-vastaussanoma".

Each featuretype is separate but may contain many layers

C:\data\MML-GML>ogrinfo palstan_tietoja.gml
Had to open data source read-only.
INFO: Open of `palstan_tietoja.gml'
      using driver `GML' successful.
1: RekisteriyksikonTietoja (None)
2: RekisteriyksikonPalstanTietoja (Unknown (any), Unknown (any))
3: KiinteistorajanTietoja
4: RajamerkinTietoja

-Jukka Rahkonen-





From htan at hsr.ch  Wed Mar 19 00:46:25 2014
From: htan at hsr.ch (Tan Hao Feng)
Date: Wed, 19 Mar 2014 07:46:25 +0000
Subject: [gdal-dev] Enquiry
In-Reply-To: <005AA85EA35D5F4F94563ADCF29F6C1D0BBE1D14@SID00202.hsr.ch>
References: <005AA85EA35D5F4F94563ADCF29F6C1D0BBE1D14@SID00202.hsr.ch>
Message-ID: <005AA85EA35D5F4F94563ADCF29F6C1D0BBE1D65@SID00202.hsr.ch>

Dear Sir/Madam,

I'm a student in HSR, Rapperswil and I am trying to clip a SQLite file

I converted .osm.pbf file of liechtenstein to a .sqlite file, and then tried to clip it with the following codes, (is it -clipsrc or -clipdst

ogr2ogr -f "SQLite" liechtenstein.sqlite liechtenstein-latest.osm.pbg -skipfailures -dsco SPATIALITE=yes -clipsrc 47.1386361 9.5231616 47.1404971 9.5266377


Also, I tried to clip the map of Singapore but was unsuccessful, the following is the code

ogr2ogr -f "SQLite" singapore.sqlite malaysia-singapore-brunei-latest.osm.pbg -skipfailures -dsco -clipsrc singapore.geojson

Do I have to convert to .shp file?

Do you have any suggestions?

Thank you!
Hao Feng.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140319/85fa6c0b/attachment.html>

From chaitanya.ch at gmail.com  Wed Mar 19 01:01:59 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed, 19 Mar 2014 13:31:59 +0530
Subject: [gdal-dev] Enquiry
In-Reply-To: <005AA85EA35D5F4F94563ADCF29F6C1D0BBE1D65@SID00202.hsr.ch>
References: <005AA85EA35D5F4F94563ADCF29F6C1D0BBE1D14@SID00202.hsr.ch>
	<005AA85EA35D5F4F94563ADCF29F6C1D0BBE1D65@SID00202.hsr.ch>
Message-ID: <CAMKgpOYkPHF_39TK3vZG8oYt4U4dOdORRx2jF1d+weKt9+2T2Q@mail.gmail.com>

Hao,

The extents for -clipsrc have to be represented in the source's reference
system. You can use gdaltransform [1] if you want to convert your lat/long
to the source's ref system.

[1]: http://www.gdal.org/gdaltransform.html


On Wed, Mar 19, 2014 at 1:16 PM, Tan Hao Feng <htan at hsr.ch> wrote:

>  Dear Sir/Madam,
>
> I'm a student in HSR, Rapperswil and I am trying to clip a SQLite file
>
> I converted .osm.pbf file of liechtenstein to a .sqlite file, and then
> tried to clip it with the following codes, (is it -clipsrc or -clipdst
>
> ogr2ogr -f "SQLite" liechtenstein.sqlite liechtenstein-latest.osm.pbg
> -skipfailures -dsco SPATIALITE=yes -clipsrc 47.1386361 9.5231616 47.1404971
> 9.5266377
>
>
> Also, I tried to clip the map of Singapore but was unsuccessful, the
> following is the code
>
> ogr2ogr -f "SQLite" singapore.sqlite
> malaysia-singapore-brunei-latest.osm.pbg -skipfailures -dsco -clipsrc
> singapore.geojson
>
> Do I have to convert to .shp file?
>
> Do you have any suggestions?
>
> Thank you!
> Hao Feng.
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140319/e007449f/attachment.html>

From jukka.rahkonen at mmmtike.fi  Wed Mar 19 01:09:29 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 19 Mar 2014 08:09:29 +0000 (UTC)
Subject: [gdal-dev] Enquiry
References: <005AA85EA35D5F4F94563ADCF29F6C1D0BBE1D14@SID00202.hsr.ch>
	<005AA85EA35D5F4F94563ADCF29F6C1D0BBE1D65@SID00202.hsr.ch>
Message-ID: <loom.20140319T085844-278@post.gmane.org>

Tan Hao Feng <htan <at> hsr.ch> writes:

 
> Dear Sir/Madam,
 
> I'm a student in HSR, Rapperswil and I am trying to clip a SQLite file
> I converted .osm.pbf file of liechtenstein to a .sqlite file, and then
tried to clip it with the following codes, (is it
> -clipsrc or -clipdstogr2ogr -f "SQLite"
> liechtenstein.sqlite
> liechtenstein-latest.osm.pbg -skipfailures -dsco SPATIALITE=yes -clipsrc
47.1386361 9.5231616 47.1404971
>  9.5266377 Also, I tried to clip the map of Singapore but was
unsuccessful, the following is the code
> ogr2ogr -f "SQLite" singapore.sqlite
malaysia-singapore-brunei-latest.osm.pbg -skipfailures -dsco -clipsrc
singapore.geojson
> Do I have to convert to .shp file?
> Do you have any suggestions?
> Thank you!
> Hao Feng.

Hi,

I suggest to check the names of your input files. Are you sure they are .pbg
and not .pbf?

Clipsrc takes coordinates in the source projection, clipdst in target
projection. Both mean the same if you do not use different -s_srs and -t_srs
parameters. Did you not find the information from manual page
http://gdal.org/ogr2ogr.html? Read also the manual page of SQLite/Spatialite
format. I bet that you will want to create Spatialite database and not a
"regular" FDO database.

Here is a fast running query that worked for me:

ogr2ogr -f SQLite -dsco spatialite=yes clip.sqlite finland-latest.pbf 
-gt 20000 -progress --config OGR_SQLITE_SYNCHRONOUS OFF 
--config OSM_COMPRESS_NODES YES -clipsrc 27 65 28 66 

-Jukka Rahkonen-



From jukka.rahkonen at mmmtike.fi  Wed Mar 19 01:13:29 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 19 Mar 2014 08:13:29 +0000 (UTC)
Subject: [gdal-dev] Change SQLite default to -spatialite=yes?
Message-ID: <loom.20140319T091010-165@post.gmane.org>

Hi,

Would it hurt bad if the SQLite/Spatialite driver would use -co
spatialite=yes as a default? Is there anybody really using the "regular" FDO
type SQLite databases?

-Jukka Rahkonen- 


From alain.sauter at univ-paris1.fr  Wed Mar 19 01:18:10 2014
From: alain.sauter at univ-paris1.fr (alain Sauter)
Date: Wed, 19 Mar 2014 09:18:10 +0100
Subject: [gdal-dev] gdalwarp _ RPC_DEM ignored ?
In-Reply-To: <5328B9B1.50209@gmail.com>
References: <5328A489.9010701@univ-paris1.fr> <5328B9B1.50209@gmail.com>
Message-ID: <532952C2.6010104@univ-paris1.fr>

Hi,

thank you for your answer. I probably misunderstood the relation between 
RPC and GPC.
Ivan, thank you for the link,
Dimitriy, I did not define any coefficient (i did'nt know that i have 
to...).

I used to orthorectify my photo with Erdas Imagine, wich was, in a way, 
more easier : only define GPC, link a DEM and it was almost done...

Below is the output of gdalinfo,

regards
Alain


/asauter at Z800:~$ gdalinfo /tmp/photo101.tif //
//Driver: GTiff/GeoTIFF//
//Files: /tmp/photo101.tif//
//Size is 12076, 11206//
//Coordinate System is `'//
//GCP Projection = //
//GCP[  0]: Id=1, Info=//
//          (10346.2,10558.6) -> (996517,6690260,0)//
//GCP[  1]: Id=2, Info=//
//          (10688.7,7989.49) -> (996604,6691840,0)//
//
//// some more GCP's here ////
//
//GCP[ 30]: Id=31, Info=//
//          (3018.4,6207.98) -> (991844,6692570,0)//
//GCP[ 31]: Id=32, Info=//
//          (9443.26,10907.6) -> (6659940,66900000,0)//
//GCP[ 32]: Id=33, Info=//
//          (8409.41,7437.51) -> (995221,6692050,0)//
//Metadata://
//  TIFFTAG_DOCUMENTNAME=/Documents/photo101.tif//
//  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)//
//  TIFFTAG_XRESOLUTION=72//
//  TIFFTAG_YRESOLUTION=72//
//Image Structure Metadata://
//  INTERLEAVE=BAND//
//Corner Coordinates://
//Upper Left  (    0.0,    0.0)//
//Lower Left  (    0.0,11206.0)//
//Upper Right (12076.0,    0.0)//
//Lower Right (12076.0,11206.0)//
//Center      ( 6038.0, 5603.0)//
//Band 1 Block=12076x1 Type=Byte, ColorInterp=Gray/





On 18/03/2014 22:25, Dmitriy Baryshnikov wrote:
> Hi,
>
> the parameter may ignored because the input tiff lack the RPC 
> coefficients. Does any of RPC coefficient exist? What is gdalinfo 
> output of you aerial photos?
> Best regards,
>      Dmitry
> 18.03.2014 23:54, alain Sauter ?????:
>> Hi all,
>>
>> I am trying to orthorectify a couple of aerial photos using gdalwarp, 
>> but i am stuck with the /-to /transformer option. I have seen in 
>> archive two request concerning this issue, but without any answer for 
>> now... so hope this 3rd will have a reply ;)
>>
>> materials :
>> scan of an old aerial photo, without fly info and, of course, without 
>> projection, tif format
>> Dem of the region, tif format
>>
>> what i've done :
>> using qgis georeferencer to grab some GPC's on the aerial photo
>> using gdal_translate to insert GPC's in the aerial photo
>>
>> what i've try :
>>
>> using gdalwarp to transform, rectify and project the aerial photo with :
>> /gdalwarp -to RPC_DEM=dem.tif -t_srs=EPSG:2154 input.tif output.tif/
>>
>> result:
>> my file is transformed and projected but not rectified. Option /-to 
>> RPC_DEM /is ignored by gdalwarp, even if I write wrong option like 
>> /-to RP_D...
>>
>> /Am i doing something wrong ?
>>
>> thanks for reply
>>
>> Alain
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> -- 
> Ce message a ?t? v?rifi? par MailScanner 
> <http://www.mailscanner.info/> pour des virus ou des polluriels et 
> rien de suspect n'a ?t? trouv?.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140319/794b561b/attachment.html>

From jukka.rahkonen at mmmtike.fi  Wed Mar 19 01:34:17 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 19 Mar 2014 08:34:17 +0000 (UTC)
Subject: [gdal-dev] Enquiry
References: <005AA85EA35D5F4F94563ADCF29F6C1D0BBE1D14@SID00202.hsr.ch>
	<005AA85EA35D5F4F94563ADCF29F6C1D0BBE1D65@SID00202.hsr.ch>
	<loom.20140319T085844-278@post.gmane.org>
Message-ID: <loom.20140319T092032-805@post.gmane.org>

Hi,

It may not be a good idea to use -clipsrc with OpenStreetMap data at least
without some thinking. Clipping is cutting linestrings like highways which
intersect the clipping geometry into pieces and that is changing the
geometry type of clipped highway from linestring into multilinestring. Such
a highway cannot be stored into Spatialite table "lines" where it normally
belongs because of geometry type constraint. You can add -nlt
PROMOTE_TO_MULTI parameter into ogr2ogr but then all the highways will be
converted into multilinestrings. It may be OK for you to do so, but think
about that first.

Alternative way for clipping OSM data would be to use special tools like
Osmosis. I believe is has an option that selects the intersecting features
without cutting them into pieces.

-Jukka Rahkonen-


From even.rouault at mines-paris.org  Wed Mar 19 02:48:57 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 19 Mar 2014 10:48:57 +0100
Subject: [gdal-dev] Motion: Commit Access for Vincent Mora
In-Reply-To: <1394811749.53232365ab854@imp.free.fr>
References: <1394811749.53232365ab854@imp.free.fr>
Message-ID: <201403191048.58033.even.rouault@mines-paris.org>

Le vendredi 14 mars 2014 16:42:29, Even Rouault a ?crit :
> Motion: Extend GDAL/OGR commit access to Vincent Mora.

I declare this motion passed with support from PSC members FrankW, JukkaR, 
TamasS, HowardB, DanielM and me. Welcome aboard Vincent !

Vincent, I've added you to the committer list. To check that it works, could 
you add yourself to the COMMITERS file ?

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Wed Mar 19 03:17:35 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 19 Mar 2014 11:17:35 +0100
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <loom.20140318T225118-104@post.gmane.org>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<1395162283.53287cabd2f8c@imp.free.fr>
	<loom.20140318T225118-104@post.gmane.org>
Message-ID: <201403191117.35453.even.rouault@mines-paris.org>

Le mardi 18 mars 2014 23:04:56, Jukka Rahkonen a ?crit :
> Even Rouault <even.rouault <at> mines-paris.org> writes:
> > Selon Martin Landa <landa.martin <at> gmail.com>:
> > > Hi,
> > > 
> > > 2014-03-18 17:50 GMT+01:00 Even Rouault <even.rouault <at> mines-
paris.org>:
> > > > I haven't looket at the file but from the above, the logic of the
> > > 
> > > application
> > > 
> > > > schema registry would need to be extended since it currently only
> > > > supports
> > > 
> > > one
> > > 
> > > > feature type per file. You would need to ingest the full file to
> > > > recognize
> > > 
> > > which
> > > 
> > > > feature types are in it.
> > > 
> > > there is probably some misunderstanding, at [1] there is mentioned
> > > Finish registry which contains different feature types
> > > (KiinteistorajanSijaintitiedot, PalstanTunnuspisteenSijaintitiedot,
> > > ...). It means that in the input file can be only one feature type not
> > > all of them?
> > 
> > Yes, as far as I remember there were only one feature type per file,
> > hence
> 
> this
> 
> > (non-fundamental) restriction in the code. I looked at bit at your sample
> 
> and I
> 
> > think you could just use the current code without changing it (well
> > perhaps increase the szHeader size). Add in the GML registry your
> > feature types
> 
> and make
> 
> > them point to the same .gfs file that define all the feature types ! The
> > only drawback is that you could have empty layers if not all feature
> > types are
> 
> found,
> 
> > but that should work OK otherwise.
> 
> Hi,
> 
> If you want to compare the data from National Land Survey of Finland you
> can find the schema for each feature type from page
> http://www.maanmittauslaitos.fi/aineistot-palvelut/rajapintapalvelut/kiinte
> istotietojen-kyselypalvelu-wfs/kayttoonotto/aineistot-tuo
> 
> Follow links "Tuotteen skeema". Data samples are available from page
> http://www.maanmittauslaitos.fi/aineistot-palvelut/rajapintapalvelut/kiinte
> istotietojen-kyselypalvelu-wfs/kayttoonotto/kyselyt-esime follow links
> "GML-vastaussanoma".
> 
> Each featuretype is separate but may contain many layers
> 
> C:\data\MML-GML>ogrinfo palstan_tietoja.gml
> Had to open data source read-only.
> INFO: Open of `palstan_tietoja.gml'
>       using driver `GML' successful.
> 1: RekisteriyksikonTietoja (None)
> 2: RekisteriyksikonPalstanTietoja (Unknown (any), Unknown (any))
> 3: KiinteistorajanTietoja
> 4: RajamerkinTietoja

Just for Martin's enlightment, the GML driver manages to recognize several 
layers in that case since the RekisteriyksikonTietoja is the top feature 
present in the first bytes of the file, and the other feature types are sub 
feature types, also defined in RekisteriyksikonTietoja.xsd. In the case, the 
schema were simple enough so that the XSD parser could understand them.

For Martin's case, I think that a .gfs will be necessary to extract properties 
in nested XML elements.

> 
> -Jukka Rahkonen-
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Wed Mar 19 06:05:25 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 19 Mar 2014 14:05:25 +0100
Subject: [gdal-dev] Change SQLite default to -spatialite=yes?
In-Reply-To: <loom.20140319T091010-165@post.gmane.org>
References: <loom.20140319T091010-165@post.gmane.org>
Message-ID: <201403191405.25663.even.rouault@mines-paris.org>

Le mercredi 19 mars 2014 09:13:29, Jukka Rahkonen a ?crit :
> Hi,
> 
> Would it hurt bad if the SQLite/Spatialite driver would use -co
> spatialite=yes as a default? 

Yes, I guess that would make sense (when spatialite is available).

Another option would be to have a "spatialite" driver, that would just extend 
the sqlite driver (no real new code), but with a more meaningful name.

So :

ogr2ogr -f spatialite out.db in.shp

would, more or less, internally translate to 

ogr2ogr -f sqlite out.db in.shp -dsco spatialite=yes

The only drawback would be when opening: both the regular (FDO) sqlite driver 
and spatialite driver would have to open and query a bit the DB to figure out 
if it is the kind of SQLite DB they handle. But that shouldn't count for more 
than a few dozains of milliseconds for local files.

> Is there anybody really using the "regular"
> FDO type SQLite databases?
> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Wed Mar 19 06:07:46 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 19 Mar 2014 14:07:46 +0100
Subject: [gdal-dev] GML enhancement proposal: Getting all XML attributes
	as OGR fields
In-Reply-To: <53288E08.4080005@gmx.eu>
References: <53288E08.4080005@gmx.eu>
Message-ID: <201403191407.46816.even.rouault@mines-paris.org>

Le mardi 18 mars 2014 19:18:48, Hermann Peifer a ?crit :
> Dear All,
> 
> I am wondering if someone else would be interested in a config option
> like: GML_ATTRIBUTES_TO_OGR_FIELDS that would enable auto-detection of
> all XML attributes and subsequently write them into the .gfs file, as
> described at http://trac.osgeo.org/gdal/ticket/5418
> 
> If there is no broader interest in such a feature, then I should close
> the ticket as invalid, I would guess.

That could make sense for some GML documents, yes.

> 
> Hermann
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Wed Mar 19 06:11:10 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 19 Mar 2014 14:11:10 +0100
Subject: [gdal-dev] gdalwarp _ RPC_DEM ignored ?
In-Reply-To: <532952C2.6010104@univ-paris1.fr>
References: <5328A489.9010701@univ-paris1.fr> <5328B9B1.50209@gmail.com>
	<532952C2.6010104@univ-paris1.fr>
Message-ID: <201403191411.10402.even.rouault@mines-paris.org>

Le mercredi 19 mars 2014 09:18:10, alain Sauter a ?crit :
> Hi,
> 
> thank you for your answer. I probably misunderstood the relation between
> RPC and GPC.
> Ivan, thank you for the link,
> Dimitriy, I did not define any coefficient (i did'nt know that i have
> to...).
> 
> I used to orthorectify my photo with Erdas Imagine, wich was, in a way,
> more easier : only define GPC, link a DEM and it was almost done...

Alain,

There's currently no warning if you don't use appropriately -to options. So if 
you have no RPC information, but only GCPs, a polynomial fitting of your GCPs 
will be done. And only the RPC warping takes into account DEM.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From lucena_ivan at hotmail.com  Wed Mar 19 07:03:20 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Wed, 19 Mar 2014 10:03:20 -0400
Subject: [gdal-dev] Change SQLite default to -spatialite=yes?
In-Reply-To: <loom.20140319T091010-165@post.gmane.org>
References: <loom.20140319T091010-165@post.gmane.org>
Message-ID: <BLU173-W438057C5C05090444A3E55907F0@phx.gbl>

Hi Jukka,

> To: gdal-dev at lists.osgeo.org
> From: jukka.rahkonen at mmmtike.fi
> Date: Wed, 19 Mar 2014 08:13:29 +0000
> Subject: [gdal-dev] Change SQLite default to -spatialite=yes?
> 
> Hi,
> 
> Would it hurt bad if the SQLite/Spatialite driver would use -co
> spatialite=yes as a default? Is there anybody really using the "regular" FDO
> type SQLite databases?

I don't know how the FDO uses that driver but I once was asked to try to setup and try the Berkeley DB with that OGR driver. Everything works just fine at that moment and I never checked that again. 

A default like you propose might be OK. The problem is if the driver becomes dependent on one or another storage, so next time a user updates GDAL their option doesn't work anymore. For us, developer, it's hard to keep track without autotests that include Berkeley DB (and FDO, I guess).

Regards,

Ivan

 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140319/5489236e/attachment.html>

From lucena_ivan at hotmail.com  Wed Mar 19 07:16:47 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Wed, 19 Mar 2014 10:16:47 -0400
Subject: [gdal-dev] gdalwarp _ RPC_DEM ignored ?
In-Reply-To: <532952C2.6010104@univ-paris1.fr>
References: <5328A489.9010701@univ-paris1.fr>
	<5328B9B1.50209@gmail.com>,<532952C2.6010104@univ-paris1.fr>
Message-ID: <BLU173-W84A40805F1892C8D302EB907F0@phx.gbl>

The link Alain is referring to is Frank's Blog [http://fwarmerdam.blogspot.com/]. I just realized that I reply only to Alain, not to the gdal-dev.

Alain, we can see from your gdalinfo report that don't have RPC's on that file and even the GCP's that you have doesn't have height, so it's impossible to do ortho rectification and use the RPD_DEM parameter appropriately.

Date: Wed, 19 Mar 2014 09:18:10 +0100
From: alain.sauter at univ-paris1.fr
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] gdalwarp _ RPC_DEM ignored ?


  
    
  
  
    Hi,

      

      thank you for your answer. I probably misunderstood the relation
      between RPC and GPC.

      Ivan, thank you for the link, 

      Dimitriy, I did not define any coefficient (i did'nt know that i
      have to...).

      

      I used to orthorectify my photo with Erdas Imagine, wich was, in a
      way, more easier : only define GPC, link a DEM and it was almost
      done... 

      

      Below is the output of gdalinfo,

      

      regards

      Alain

      

      

      asauter at Z800:~$ gdalinfo /tmp/photo101.tif 

      Driver: GTiff/GeoTIFF

      Files: /tmp/photo101.tif

      Size is 12076, 11206

      Coordinate System is `'

      GCP Projection = 

      GCP[  0]: Id=1, Info=

                (10346.2,10558.6) -> (996517,6690260,0)

      GCP[  1]: Id=2, Info=

                (10688.7,7989.49) -> (996604,6691840,0)

      

      // some more GCP's here //

      

      GCP[ 30]: Id=31, Info=

                (3018.4,6207.98) -> (991844,6692570,0)

      GCP[ 31]: Id=32, Info=

                (9443.26,10907.6) -> (6659940,66900000,0)

      GCP[ 32]: Id=33, Info=

                (8409.41,7437.51) -> (995221,6692050,0)

      Metadata:

        TIFFTAG_DOCUMENTNAME=/Documents/photo101.tif

        TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)

        TIFFTAG_XRESOLUTION=72

        TIFFTAG_YRESOLUTION=72

      Image Structure Metadata:

        INTERLEAVE=BAND

      Corner Coordinates:

      Upper Left  (    0.0,    0.0)

      Lower Left  (    0.0,11206.0)

      Upper Right (12076.0,    0.0)

      Lower Right (12076.0,11206.0)

      Center      ( 6038.0, 5603.0)

      Band 1 Block=12076x1 Type=Byte, ColorInterp=Gray

      

      

      

      

      

      On 18/03/2014 22:25, Dmitriy Baryshnikov wrote:

    
    
      
      Hi,

        

        the parameter may ignored because the input tiff lack the RPC
        coefficients. Does any of RPC coefficient exist? What is
        gdalinfo output of you aerial photos?
        Best regards,
    Dmitry
        18.03.2014 23:54, alain Sauter ?????:

      
      
        
        Hi all,

        

        I am trying to orthorectify a couple of aerial photos using
        gdalwarp, but i am stuck with the -to transformer
        option. I have seen in archive two request concerning this
        issue, but without any answer for now... so hope this 3rd will
        have a reply ;)

        

        materials :

        scan of an old aerial photo, without fly info and, of course,
        without projection, tif format

        Dem of the region, tif format

        

        what i've done :

        using qgis georeferencer to grab some GPC's on the aerial photo

        using gdal_translate to insert GPC's in the aerial photo

        

        what i've try :

        

        using gdalwarp to transform, rectify and project the aerial
        photo with :

        gdalwarp -to RPC_DEM=dem.tif -t_srs=EPSG:2154 input.tif
          output.tif

        

        result:

        my file is transformed and projected but not rectified. Option -to



          RPC_DEM is ignored by gdalwarp, even if I write wrong
        option like -to RP_D...

          

        Am i doing something wrong ?

        

        thanks for reply

        

        Alain 

        
        

        _______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
      
      

      

      -- 

      Ce message a ?t? v?rifi? par
      MailScanner
      pour des virus ou des polluriels et rien de
      suspect n'a ?t? trouv?.
      

      
      

      _______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
    
    

  


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140319/6bcce42f/attachment.html>

From even.rouault at mines-paris.org  Wed Mar 19 07:20:47 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 19 Mar 2014 15:20:47 +0100
Subject: [gdal-dev] Change SQLite default to -spatialite=yes?
In-Reply-To: <BLU173-W438057C5C05090444A3E55907F0@phx.gbl>
References: <loom.20140319T091010-165@post.gmane.org>
	<BLU173-W438057C5C05090444A3E55907F0@phx.gbl>
Message-ID: <201403191520.47329.even.rouault@mines-paris.org>

Le mercredi 19 mars 2014 15:03:20, Ivan Lucena a ?crit :
> Hi Jukka,
> 
> > To: gdal-dev at lists.osgeo.org
> > From: jukka.rahkonen at mmmtike.fi
> > Date: Wed, 19 Mar 2014 08:13:29 +0000
> > Subject: [gdal-dev] Change SQLite default to -spatialite=yes?
> > 
> > Hi,
> > 
> > Would it hurt bad if the SQLite/Spatialite driver would use -co
> > spatialite=yes as a default? Is there anybody really using the "regular"
> > FDO type SQLite databases?
> 
> I don't know how the FDO uses that driver but I once was asked to try to
> setup and try the Berkeley DB with that OGR driver. Everything works just
> fine at that moment and I never checked that again.
> 
> A default like you propose might be OK. The problem is if the driver
> becomes dependent on one or another storage, so next time a user updates
> GDAL their option doesn't work anymore. For us, developer, it's hard to
> keep track without autotests that include Berkeley DB (and FDO, I guess).

Ivan,

I'm not sure what Jukka's proposal has to do with using regular sqlite backend 
or Berkeley DB. I thought the impact was only to linking to Berkely DB, no ?

Spatialite has little to do with that : it is just a SQLite extension (I don't 
know Berkeley DB, but perhaps you could have spatialite working with Berkeley 
DB, but that would imply that Berkely DB offers the same extension API than 
SQLite3, which is not obvious), and if your GDAL build doesn't link against 
spatialite, then this would steal produce FDO-style SQLITE DB.

Both FDO-style and Spatialite-style DBs are tested in autotests.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Wed Mar 19 08:02:43 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 19 Mar 2014 16:02:43 +0100
Subject: [gdal-dev] Fwd: [OSGeo-Discuss] Any one is interested in the
	support of GDAL for MongoDB?
Message-ID: <201403191602.43353.even.rouault@mines-paris.org>

Fowarding to gdal-dev where this might raise more interest.

----------  Message transmis  ----------

Sujet : [OSGeo-Discuss] Any one is interested in the support of GDAL for 
MongoDB?
Date : mercredi 19 mars 2014, 15:25:46
De : "Zhang, Shuai" <shuai at illinois.edu>
? : OSGeo Google Summer of Code list <soc at lists.osgeo.org>, OSGeo Discuss list 
<discuss at lists.osgeo.org>, OSGeo Education List <edu_discuss at lists.osgeo.org>, 
ICA OSGeo Labs list <ica-osgeo-labs at lists.osgeo.org>

Hi All,

Sorry to bother, but i think we need a mentor for the idea to have GDAL 
support MongoDB.
http://trac.osgeo.org/gdal/wiki/SummerOfCode

I noticed that GDAL has a CouchDB driver which is a good start to have GDAL 
powered by NoSQL Database Technologies. However, I think GDAL community should 
pay attention to MongoDB as well.

MongoDB, which has native support for maintaining geospatial data, using a 
document-oriented model, lies in fifth place in the DB-Engines Ranking 
(http://db-engines.com/en/ranking) of database management systems classed 
according to popularity and the highest rated non-relational system. From 
version 2.4 (released on March 19, 2013), MongoDB introduces Geohash indexes 
support for a subset of GeoJSON geometries including basic shapes like points, 
linestrings, polygons. And quite a number of partners related with big data, 
NoSQL, cloud, mobile and high performance computing join the MongoDB 
ecosystem.


I spent several years developing parallel geo-algorithms to tackle some geo-
problems on the high performance computing platform, and had a burning 
feelings that we need a powerful and distributed spatial database to cooperate 
with the hpc environment running on the large scale Linux cluster. 
Unfortunately we don't have much choices in the GIS fields.  MongoDB and 
CouchDB may be a good ground to start with.


Perhaps, we should make GDAL spinning on MongoDB platform simply because it 
will prevent us from re-invent the wheel and get lots of GIS tools reusable to 
deal with the geo-info maintain in the NoSQL database, and enable the Open 
Source GIS Ecosystem powered by the advanced NoSQL database since GDAL servers 
as the foundation.


Thanks,

shuai

-------------------------------------------------------
-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From piero.campa at gmail.com  Wed Mar 19 10:16:57 2014
From: piero.campa at gmail.com (Piero Campalani)
Date: Wed, 19 Mar 2014 18:16:57 +0100
Subject: [gdal-dev] JP2/J2K codecs in JP2OpenJPEG dataset
Message-ID: <CAMp9JaOjmFjmh9QM6Q7n4gnDgQYhqwVh9nHcfiDLL40mJpO+fQ@mail.gmail.com>

Hi list,

looking at the JP2OpenJPEG format handler (./frmts/openjpegdataset.cpp), it
seems that only the codec JP2 (and not J2K) is accepted in order to enable
extra boxes (eg GMLJP2 or GeoJP2 ones).

Might be wrong, but aren't JP2/J2K equivalent formats?

>>>>>>>>>>>>>>>>>>>
---    if( eCodecFormat == OPJ_CODEC_JP2 &&
+++    if( (eCodecFormat == OPJ_CODEC_JP2 || eCodecFormat == OPJ_CODEC_J2K)
&&
           (CSLFetchBoolean( papszOptions, "GMLJP2", TRUE ) ||
            CSLFetchBoolean( papszOptions, "GeoJP2", TRUE )) )
       {
<<<<<<<<<<<<<<<<<<<

I couldn't find much information about the difference between the two
codecs, but in case I am missing something just forget all this.

cheers,
Piero
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140319/9a1d4a0c/attachment-0001.html>

From even.rouault at mines-paris.org  Wed Mar 19 10:22:05 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 19 Mar 2014 18:22:05 +0100
Subject: [gdal-dev] JP2/J2K codecs in JP2OpenJPEG dataset
In-Reply-To: <CAMp9JaOjmFjmh9QM6Q7n4gnDgQYhqwVh9nHcfiDLL40mJpO+fQ@mail.gmail.com>
References: <CAMp9JaOjmFjmh9QM6Q7n4gnDgQYhqwVh9nHcfiDLL40mJpO+fQ@mail.gmail.com>
Message-ID: <201403191822.05756.even.rouault@mines-paris.org>

Le mercredi 19 mars 2014 18:16:57, Piero Campalani a ?crit :
> Hi list,
> 
> looking at the JP2OpenJPEG format handler (./frmts/openjpegdataset.cpp), it
> seems that only the codec JP2 (and not J2K) is accepted in order to enable
> extra boxes (eg GMLJP2 or GeoJP2 ones).
> 
> Might be wrong, but aren't JP2/J2K equivalent formats?

No, JP2 is J2K plus boxes to add metadata. See "File format and code stream" 
paragraph of http://en.wikipedia.org/wiki/JPEG_2000

> 
> 
> ---    if( eCodecFormat == OPJ_CODEC_JP2 &&
> +++    if( (eCodecFormat == OPJ_CODEC_JP2 || eCodecFormat == OPJ_CODEC_J2K)
> &&
>            (CSLFetchBoolean( papszOptions, "GMLJP2", TRUE ) ||
>             CSLFetchBoolean( papszOptions, "GeoJP2", TRUE )) )
>        {
> <<<<<<<<<<<<<<<<<<<
> 
> I couldn't find much information about the difference between the two
> codecs, but in case I am missing something just forget all this.
> 
> cheers,
> Piero

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From bishop.dev at gmail.com  Wed Mar 19 12:57:42 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Wed, 19 Mar 2014 23:57:42 +0400
Subject: [gdal-dev] Fwd: [OSGeo-Discuss] Any one is interested in the
 support of GDAL for MongoDB?
In-Reply-To: <201403191602.43353.even.rouault@mines-paris.org>
References: <201403191602.43353.even.rouault@mines-paris.org>
Message-ID: <5329F6B6.7000901@gmail.com>

Hi Even,

I plan to mentor Geography Network support, but I can co-mentor one of 
such interesting projects:
- OGR Driver for MongoDB
- Bring up to speed the OGR style support for GDAL
- Implement write support for the PostGIS Raster GDAL driver

Best regards,
     Dmitry

19.03.2014 19:02, Even Rouault ?????:
> Fowarding to gdal-dev where this might raise more interest.
>
> ----------  Message transmis  ----------
>
> Sujet : [OSGeo-Discuss] Any one is interested in the support of GDAL for
> MongoDB?
> Date : mercredi 19 mars 2014, 15:25:46
> De : "Zhang, Shuai" <shuai at illinois.edu>
> ? : OSGeo Google Summer of Code list <soc at lists.osgeo.org>, OSGeo Discuss list
> <discuss at lists.osgeo.org>, OSGeo Education List <edu_discuss at lists.osgeo.org>,
> ICA OSGeo Labs list <ica-osgeo-labs at lists.osgeo.org>
>
> Hi All,
>
> Sorry to bother, but i think we need a mentor for the idea to have GDAL
> support MongoDB.
> http://trac.osgeo.org/gdal/wiki/SummerOfCode
>
> I noticed that GDAL has a CouchDB driver which is a good start to have GDAL
> powered by NoSQL Database Technologies. However, I think GDAL community should
> pay attention to MongoDB as well.
>
> MongoDB, which has native support for maintaining geospatial data, using a
> document-oriented model, lies in fifth place in the DB-Engines Ranking
> (http://db-engines.com/en/ranking) of database management systems classed
> according to popularity and the highest rated non-relational system. From
> version 2.4 (released on March 19, 2013), MongoDB introduces Geohash indexes
> support for a subset of GeoJSON geometries including basic shapes like points,
> linestrings, polygons. And quite a number of partners related with big data,
> NoSQL, cloud, mobile and high performance computing join the MongoDB
> ecosystem.
>
>
> I spent several years developing parallel geo-algorithms to tackle some geo-
> problems on the high performance computing platform, and had a burning
> feelings that we need a powerful and distributed spatial database to cooperate
> with the hpc environment running on the large scale Linux cluster.
> Unfortunately we don't have much choices in the GIS fields.  MongoDB and
> CouchDB may be a good ground to start with.
>
>
> Perhaps, we should make GDAL spinning on MongoDB platform simply because it
> will prevent us from re-invent the wheel and get lots of GIS tools reusable to
> deal with the geo-info maintain in the NoSQL database, and enable the Open
> Source GIS Ecosystem powered by the advanced NoSQL database since GDAL servers
> as the foundation.
>
>
> Thanks,
>
> shuai
>
> -------------------------------------------------------


From bishop.dev at gmail.com  Wed Mar 19 13:04:32 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Thu, 20 Mar 2014 00:04:32 +0400
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <CAKTWcS=6M4fLxf3h30n0uwhaN+OrudOxcobzqJEbavS9juj71g@mail.gmail.com>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<CAKTWcS=CviogV2Kc5hVkqUkSOECwGiVtqVLzdET4zR1xJb2SMA@mail.gmail.com>
	<loom.20140129T084029-6@post.gmane.org>
	<CAKTWcSmH2drpYqYH+J9F37XRNNu7xxXc+ZQ5WGTcmD5qYqC0Vg@mail.gmail.com>
	<CAKTWcSmu1NqwhFjSpu_yTEstK63jyOa_gm4Tp9N+35Dssrpn5w@mail.gmail.com>
	<1391806418.52f547d239b63@imp.free.fr>
	<CAKTWcSkbXgRD=TcOne+=HEyvHDJAPhJGROqWd5MdvYX9k-10+A@mail.gmail.com>
	<52F5ECBB.6010507@gmail.com>
	<CAKTWcSnjZ0j9uek+QeULFvHpP04wgcWs0Br_kQ7juw0iWnMOZQ@mail.gmail.com>
	<CAKTWcS=9dfhvBv_fQUP+2T3w3jVtxFcjdrKaCY41k3mFzAyTdg@mail.gmail.com>
	<53234FC1.7050503@gmail.com>
	<CAMKgpOY8SVPZTQzkr_WE+KsOdwD3K8BjkbVXry_kuDpgXf+xKg@mail.gmail.com>
	<CAKTWcSm6OpJWP3ci0=5J=LDvSQfHm=eawmMVvnWna5=hTdWJKw@mail.gmail.com>
	<9E09F659-945F-438D-B061-91F0E91703D9@pricepages.org>
	<5324C5E4.1030804@gmail.com>
	<CAMKgpOapi22gWnctgYeBsLag7u0D2rOKJ=-NyF3g4jb17oYWPw@mail.gmail.com>
	<CAKTWcS=6M4fLxf3h30n0uwhaN+OrudOxcobzqJEbavS9juj71g@mail.gmail.com>
Message-ID: <5329F850.1070106@gmail.com>

Hi,

I think 7-8 days will be enough. According to you plan this issue will 
raise on 4-5 week then you'll export BRISK algorithm to GDAL. By now I 
don't see any problems - don't worry.

Best regards,
     Dmitry

17.03.2014 22:05, Kshitij Kansal ?????:
> Hello Everyone
>
> I have submitted my proposal at the melange website. My proposal is 
> available here 
> <https://www.google-melange.com/gsoc/proposal/review/student/google/gsoc2014/kansal/5629499534213120>.
> Please review my proposal and give me some suggestions to make this 
> proposal even more useful to the organization.
>
> @Dmitriy & Chaitanya - I urge you to please specifically look into the 
> "common interface to various algorithms using some existing API" part 
>  apart from the whole proposal, in my timeline. I have devoted 7-8 
> days for this work. If you people have some comments regarding this, 
> kindly convey it to me.
>
> Thanking You all
>
> With Regards,
>
>     Kshitij Kansal
>
>     Lab For Spatial Informatics,
>
>     IIIT Hyderabad
>
>
> _______________________________________________
>
>         gdal-dev mailing list
>         gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140320/592d22e4/attachment.html>

From kansal.k at gmail.com  Wed Mar 19 13:17:05 2014
From: kansal.k at gmail.com (Kshitij Kansal)
Date: Thu, 20 Mar 2014 01:47:05 +0530
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <5329F850.1070106@gmail.com>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<CAKTWcS=CviogV2Kc5hVkqUkSOECwGiVtqVLzdET4zR1xJb2SMA@mail.gmail.com>
	<loom.20140129T084029-6@post.gmane.org>
	<CAKTWcSmH2drpYqYH+J9F37XRNNu7xxXc+ZQ5WGTcmD5qYqC0Vg@mail.gmail.com>
	<CAKTWcSmu1NqwhFjSpu_yTEstK63jyOa_gm4Tp9N+35Dssrpn5w@mail.gmail.com>
	<1391806418.52f547d239b63@imp.free.fr>
	<CAKTWcSkbXgRD=TcOne+=HEyvHDJAPhJGROqWd5MdvYX9k-10+A@mail.gmail.com>
	<52F5ECBB.6010507@gmail.com>
	<CAKTWcSnjZ0j9uek+QeULFvHpP04wgcWs0Br_kQ7juw0iWnMOZQ@mail.gmail.com>
	<CAKTWcS=9dfhvBv_fQUP+2T3w3jVtxFcjdrKaCY41k3mFzAyTdg@mail.gmail.com>
	<53234FC1.7050503@gmail.com>
	<CAMKgpOY8SVPZTQzkr_WE+KsOdwD3K8BjkbVXry_kuDpgXf+xKg@mail.gmail.com>
	<CAKTWcSm6OpJWP3ci0=5J=LDvSQfHm=eawmMVvnWna5=hTdWJKw@mail.gmail.com>
	<9E09F659-945F-438D-B061-91F0E91703D9@pricepages.org>
	<5324C5E4.1030804@gmail.com>
	<CAMKgpOapi22gWnctgYeBsLag7u0D2rOKJ=-NyF3g4jb17oYWPw@mail.gmail.com>
	<CAKTWcS=6M4fLxf3h30n0uwhaN+OrudOxcobzqJEbavS9juj71g@mail.gmail.com>
	<5329F850.1070106@gmail.com>
Message-ID: <CAKTWcSkrcgeLPv1AdHKD1rriXs0wpHApr3FzyOJZ3DbpHTa7nA@mail.gmail.com>

Hello Dmitry

Thank you.

Is there anything else you can suggest regarding the proposal or Should I
consider the current draft as the final one?

I have planned it to the best way I could think of. I have tried to give
enough time for testing, documentation and code cleaning also as it is a
completely new implementation. If anything else comes up, please do let me
know.

Thanks for the support and ideas.

With Regards,

Kshitij Kansal

Lab For Spatial Informatics,

IIIT Hyderabad



On Thu, Mar 20, 2014 at 1:34 AM, Dmitriy Baryshnikov
<bishop.dev at gmail.com>wrote:

>  Hi,
>
> I think 7-8 days will be enough. According to you plan this issue will
> raise on 4-5 week then you'll export BRISK algorithm to GDAL. By now I
> don't see any problems - don't worry.
>
> Best regards,
>     Dmitry
>
> 17.03.2014 22:05, Kshitij Kansal ?????:
>
> Hello Everyone
>
>  I have submitted my proposal at the melange website. My proposal is
> available here<https://www.google-melange.com/gsoc/proposal/review/student/google/gsoc2014/kansal/5629499534213120>
> .
> Please review my proposal and give me some suggestions to make this
> proposal even more useful to the organization.
>
>  @Dmitriy & Chaitanya - I urge you to please specifically look into the
> "common interface to various algorithms using some existing API" part
>  apart from the whole proposal, in my timeline. I have devoted 7-8 days for
> this work. If you people have some comments regarding this, kindly convey
> it to me.
>
>  Thanking You all
>
>  With Regards,
>
>  Kshitij Kansal
>
> Lab For Spatial Informatics,
>
> IIIT Hyderabad
>
>
> _______________________________________________
>
>>   gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140320/5abba569/attachment.html>

From shuai at illinois.edu  Wed Mar 19 21:02:33 2014
From: shuai at illinois.edu (Zhang, Shuai)
Date: Thu, 20 Mar 2014 04:02:33 +0000
Subject: [gdal-dev] GSoC proposal looking for mentors and suggestions
Message-ID: <2DAEBB32799F494EBE504E1247CC5E8220E408B4@CHIMBX6.ad.uillinois.edu>

Hi All,

I think i need a mentor working with me and help me make gdal under mongodb support.
Below is the proposal i wrote, hopefully you find it worth a trial.

Thanks,
shuai


Title: OGR Driver for MongoDB

Short description:
MongoDB, a document database that provides high performance, high availability, and easy scalability, can be a good platform for storing extremely large spatial datasets, to support high performance geo-computation and real-time spatial analysis in a large scale.This project aims at developing a OGR Driver for MongoDB to help applications or softwares based on GDAL, such QGIS, Geoserver, Mapserver, and so on, read & write the spatial data in it, and thus enable the Open Source GIS Ecosystem powered by the advanced NoSQL database.

Describe your idea
1. Introduction
MongoDB,  a document database that provides high performance, high availability, and easy scalability, can be a good platform for storing extremely large spatial datasets, to support high performance geo-computation and real-time spatial analysis in a large scale. Yet, there is little attention so far that GIS fields pay to make most of its strength. This project aims at developing a OGR Driver for MongoDB to help applications or softwares based on GDAL read & write the spatial data in it, and thus enable the Open Source GIS Ecosystem powered by the advanced NoSQL database.

 2. Background
Since we are living in the era of big data, tools and equipment today for capturing spatial data both at the mega-scale and the milli-scale are just dreadful. The magnitude of this data volume is well beyond the capability of any mainstream geographic information systems. Yet, we, GIS fields, have no off-the-shelf solutions to manage these massive spatial data. Relational spatial databases have taken in charge for decades but now the situation seems a little different.

A computing pattern shift can be seen throughout the IT industry in recent years and GIS would be no exception. Especially, data analytics may not be achievable within a reasonable amount of time without resorting to high-performance computing strategies. However, relational spatial databases are kind of slow to support these high-performance computing scenarios, and often lack of flexible scalability to handle a growing amount of work in a capable manner.

Fortunately, there are several groups trying to address the problem, and MongoDB is an apparent leader in this direction. MongoDB, which has native support for maintaining geospatial data, using a document-oriented model, lies in fifth place in the DB-Engines Ranking of database management systems classed according to popularity and the highest rated non-relational system. From version 2.4 (released on March 19, 2013), MongoDB introduces support for a subset of GeoJSON geometries including basic shapes like points, linestrings, polygons. And quite a number of partners related with big data, NoSQL, cloud, mobile and high performance computing join the MongoDB ecosystem. Foursquare is featured one of them which benefits from MongoDB?s support for geospatial indexing, allowing it to easily query for large location-based data.

3. The idea
MongoDB employs GeoJSON to store spatial data and concurrently GDAL supports for access to features encoded in GeoJSON format, which can be reusable. This project is trying to implement a MongoDB Driver according to the OGR format driver interfaces with subclasses of OGRSFDriver, OGRDataSource and OGRLayer, and registered with the OGRSFDriverRegistrar at runtime, so that GDAL may use MongoDB as a datasource to access large scale spatial data.

4. Project plan (detailed timeline: how do you plan to spend your summer?)
The first thing in the list is to design the structure inside of MongoDB spatial database. In the context of OGR data model, we got Datasource, Layer and Feature, so accordingly every database in MongoDB is regarded as a Datasource, and the Collections within should be treated as Layers, thus every Document as a Feature. PostGIS and other spatial databases often harness some system tables to maintain the metadata, but since MongoDB is schema free metadata such as spatial reference can be stored within the particular Layer, in this case a Collection.

The most important part of a data format driver is to define how to read and write the data format in the specific driver, especially the Open and Create method in the Datasource Class. As MongoDB organizes its spatial data in GeoJSON model, the GeoJSON driver already supported by current GDAL can be reused to code or decode the GeoJSON fetched from MongoDB database. Therefore, there would be totally four files to implement, including ogr_mongo.h, ogrmongodriver.cpp, ogrmongodatasource.cpp, and ogrmongolayer.cpp.

Test Plan
[1] After the MongoDB Driver is compiled into the OGR framework, the utility ogr2ogr can be used as the test program to import and output spatial data between shapefile and MongoDB.
[2] Conduct a parallel transformation process to find how fast MongoDB Driver can be compared to file system and PostGIS.

Time Line

May 19- June 8 (Coding - Phase 1 - 3 weeks)
Preparing the developing environment and bringing GDAL, MongoDB C++ driver and C++ together, Implementing OGRMongoDriver, OGRMongoDataSource, OGRMongoLayer according to the interfaces defined by OGRSFDriver, OGRDataSource and OGRLayer.
June 9 - June 23 (Coding - Phase 2 - 2 weeks)
Build MongoDB into the OGR framework, and may first support to exchange a small size of spatial data with MongoDB, Simultaneously bug fixing.
July 24 - July 13 (Coding - Phase 3 - 3 weeks)
Passing the query string (a JSON style document) for both spatial and attribute data into MongoDB to select features as requested. Compile all the codes and conduct several tests, fix bugs and make it faster.
July 14 - July 27 (Testing - Phase 1 - 2 weeks)
Transfer large scale spatial data with MongoDB using ogr2ogr to see the driver efficiency. Improve its efficiency and fix bugs.
July 28 - August 10 (Testing - Phase 2 - 2 weeks)
Conduct a parallel transformation experiment to find how fast MongoDB Driver can be compared to file system and PostGIS, and fix bugs.
August 11 - August 18 (pencils down)
Write code documentation, includes doxygen comments and techbase/userbase articles.

5. Future ideas / How can your idea be expanded?
MongoDB is also an ideal platform for storing massive geo-raster data, so next job would be writing a MongoDB Driver for raster dataset.

Explain how your SoC task would benefit the OSGeo member project and more generally the OSGeo Foundation as a whole:
MongoDB can be a distributed and parallel NoSQL spatial database with high performance, high availability, and easy scalability, thus extremely suitable for large scale data-intensive computing. By implementing the MongoDB Driver in the OGR framework, the whole OSGeo ecosystem based on GDAL/OGR will be benefit from it and powered by MongoDB.

Please provide details of general computing experience: (operating systems you use on a day-to-day basis, languages you could write a program in, hardware, networking experience, etc.)
During my college time, I mainly used .NET languages such as C#,VB.net, to build GIS software running on the Windows platform, while after that and my PhD program beginning most of my work were done in standard C++ on Linux environment.

Please provide details of previous GIS experience:
I?m a GIS student ever since I attend college. Right now I'm a Ph.D candidate in Cartography and Geographic Information System, School of Geographic and Oceanographic Sciences, Nanjing University, China, and a visiting scholar at Geography & GIScience and NCSA (The National Center for Supercomputing Applications), UIUC, IL, USA.

Please provide details of any previous involvement with GIS programming and other software programming:
[1] Climate Information Management System of Shanxi Province: Outstanding Award in ESRI Chinese College Student Software Development Contest, 2009.
[2] Forest Fire Simulation Model based on Geographic Cellular Automata: Third Prize in ESRI Chinese College Student Software Development Contest, 2009.
[3] High Performance Geospatial Computing System: HiGIS, (2011-2013)Supported by the National High Technology Research and Development Program of China (863 project), in construction.
[4] NoSQL Expression of Massive Geospatial Information in the era of Big Data, (2013-2015) Supported by the Scientific Research Foundation of Graduate School of Nanjing University, in construction

Please tell us why you are interested in GIS and open source software:
They are powerful and beautiful treasures of humankind, and I want to be part of it.

Please tell us why you are interested in working for OSGeo and the software project you have selected:
It?s part of my research, since I was trying to harness MongoDB to support high performance geo-computing.

Please tell us why you are interested in your specific coding project:
I spent lots of time in the past three years learning how GDAL works and how to employ them into high performance computing applications. So I believe a new GDAL with MongoDB support will do much good to my current research.

Would your application contribute to your ongoing studies/ degree? If so, how?
Yes. MongoDB cluster is a good way to handle large quantities of spatial data, and if OGR provides MongoDB Driver, lots of tools we developed based on GDAL can be reusable, and powered by MongoDB, thus much faster.

Please explain how you intend to continue being an active member of your project and/or OSGeo AFTER the summer is over:
I?ll try my best to keep following this thread to make MongoDB Driver stable and efficient.

Do you understand this is a serious commitment, equivalent to a full-time paid summer internship or summer job?
Yes, I understand. I?ll give my best.

Do you have any known time conflicts during the official coding period? (May 19 to August 19)
No, I don't.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140320/50f06d36/attachment-0001.html>

From vincent.mora at oslandia.com  Thu Mar 20 01:06:22 2014
From: vincent.mora at oslandia.com (Vincent Mora)
Date: Thu, 20 Mar 2014 09:06:22 +0100
Subject: [gdal-dev] Motion: Commit Access for Vincent Mora
In-Reply-To: <201403191048.58033.even.rouault@mines-paris.org>
References: <1394811749.53232365ab854@imp.free.fr>
	<201403191048.58033.even.rouault@mines-paris.org>
Message-ID: <532AA17E.3000101@oslandia.com>

On 19/03/2014 10:48, Even Rouault wrote:
> Le vendredi 14 mars 2014 16:42:29, Even Rouault a ?crit :
>> Motion: Extend GDAL/OGR commit access to Vincent Mora.
> I declare this motion passed with support from PSC members FrankW, JukkaR,
> TamasS, HowardB, DanielM and me. Welcome aboard Vincent !
>
> Vincent, I've added you to the committer list. To check that it works, could
> you add yourself to the COMMITERS file ?
>
> Even
>
Committed revision 27061.

Thank you all.

From even.rouault at mines-paris.org  Thu Mar 20 13:13:41 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 20 Mar 2014 21:13:41 +0100
Subject: [gdal-dev] GSoC proposal looking for mentors and suggestions
In-Reply-To: <2DAEBB32799F494EBE504E1247CC5E8220E408B4@CHIMBX6.ad.uillinois.edu>
References: <2DAEBB32799F494EBE504E1247CC5E8220E408B4@CHIMBX6.ad.uillinois.edu>
Message-ID: <201403202113.41356.even.rouault@mines-paris.org>

Le jeudi 20 mars 2014 05:02:33, Zhang, Shuai a ?crit :
> Hi All,
> 
> I think i need a mentor working with me and help me make gdal under mongodb
> support. Below is the proposal i wrote, hopefully you find it worth a
> trial.

This is something I may potentially mentor, but there are already 2 students 
interested on other subjects. I'm not sure how many will get eventually 
selected by the GSOC program, but I won't be able to mentor 3 people for sure 
!

> 
> Thanks,
> shuai
> 
> 
> Title: OGR Driver for MongoDB
> 
> Short description:
> MongoDB, a document database that provides high performance, high
> availability, and easy scalability, can be a good platform for storing
> extremely large spatial datasets, to support high performance
> geo-computation and real-time spatial analysis in a large scale.This
> project aims at developing a OGR Driver for MongoDB to help applications
> or softwares based on GDAL, such QGIS, Geoserver, Mapserver, and so on,
> read & write the spatial data in it, and thus enable the Open Source GIS
> Ecosystem powered by the advanced NoSQL database.
> 
> Describe your idea
> 1. Introduction
> MongoDB,  a document database that provides high performance, high
> availability, and easy scalability, can be a good platform for storing
> extremely large spatial datasets, to support high performance
> geo-computation and real-time spatial analysis in a large scale. Yet,
> there is little attention so far that GIS fields pay to make most of its
> strength. This project aims at developing a OGR Driver for MongoDB to help
> applications or softwares based on GDAL read & write the spatial data in
> it, and thus enable the Open Source GIS Ecosystem powered by the advanced
> NoSQL database.
> 
>  2. Background
> Since we are living in the era of big data, tools and equipment today for
> capturing spatial data both at the mega-scale and the milli-scale are just
> dreadful. The magnitude of this data volume is well beyond the capability
> of any mainstream geographic information systems. Yet, we, GIS fields,
> have no off-the-shelf solutions to manage these massive spatial data.
> Relational spatial databases have taken in charge for decades but now the
> situation seems a little different.
> 
> A computing pattern shift can be seen throughout the IT industry in recent
> years and GIS would be no exception. Especially, data analytics may not be
> achievable within a reasonable amount of time without resorting to
> high-performance computing strategies. However, relational spatial
> databases are kind of slow to support these high-performance computing
> scenarios, and often lack of flexible scalability to handle a growing
> amount of work in a capable manner.
> 
> Fortunately, there are several groups trying to address the problem, and
> MongoDB is an apparent leader in this direction. MongoDB, which has native
> support for maintaining geospatial data, using a document-oriented model,
> lies in fifth place in the DB-Engines Ranking of database management
> systems classed according to popularity and the highest rated
> non-relational system. From version 2.4 (released on March 19, 2013),
> MongoDB introduces support for a subset of GeoJSON geometries including
> basic shapes like points, linestrings, polygons.

Good to know. Last time I looked, MongoDB had only support for point 
geometries.

> And quite a number of
> partners related with big data, NoSQL, cloud, mobile and high performance
> computing join the MongoDB ecosystem. Foursquare is featured one of them
> which benefits from MongoDB?s support for geospatial indexing, allowing it
> to easily query for large location-based data.
> 
> 3. The idea
> MongoDB employs GeoJSON to store spatial data and concurrently GDAL
> supports for access to features encoded in GeoJSON format, which can be
> reusable. 

As far as I remember, the interface with MongoDB is (was?) a kind of binary 
JSON format. Has this changed ?

> This project is trying to implement a MongoDB Driver according
> to the OGR format driver interfaces with subclasses of OGRSFDriver,
> OGRDataSource and OGRLayer, and registered with the OGRSFDriverRegistrar
> at runtime, so that GDAL may use MongoDB as a datasource to access large
> scale spatial data.
> 
> 4. Project plan (detailed timeline: how do you plan to spend your summer?)
> The first thing in the list is to design the structure inside of MongoDB
> spatial database. In the context of OGR data model, we got Datasource,
> Layer and Feature, so accordingly every database in MongoDB is regarded as
> a Datasource, and the Collections within should be treated as Layers, thus
> every Document as a Feature. 

Yes, sounds a bit similar to what was done with CouchDB

> PostGIS and other spatial databases often
> harness some system tables to maintain the metadata, but since MongoDB is
> schema free metadata such as spatial reference can be stored within the
> particular Layer, in this case a Collection.
> 
> The most important part of a data format driver is to define how to read
> and write the data format in the specific driver, especially the Open and
> Create method in the Datasource Class. As MongoDB organizes its spatial
> data in GeoJSON model, the GeoJSON driver already supported by current
> GDAL can be reused to code or decode the GeoJSON fetched from MongoDB
> database. Therefore, there would be totally four files to implement,
> including ogr_mongo.h, ogrmongodriver.cpp, ogrmongodatasource.cpp, and
> ogrmongolayer.cpp.

The write part should be no problem : a no SQL database can receive documents 
with a fixed structure.
The read part will need to explore all the documents/features to retrieve 
their structure and build a OGR FeatureDefinition. This is done in the CouchDB 
driver.

> 
> Test Plan
> [1] After the MongoDB Driver is compiled into the OGR framework, the
> utility ogr2ogr can be used as the test program to import and output
> spatial data between shapefile and MongoDB. [2] Conduct a parallel
> transformation process to find how fast MongoDB Driver can be compared to
> file system and PostGIS.
> 
> Time Line
> 
> May 19- June 8 (Coding - Phase 1 - 3 weeks)
> Preparing the developing environment and bringing GDAL, MongoDB C++ driver
> and C++ together, Implementing OGRMongoDriver, OGRMongoDataSource,
> OGRMongoLayer according to the interfaces defined by OGRSFDriver,
> OGRDataSource and OGRLayer. June 9 - June 23 (Coding - Phase 2 - 2 weeks)
> Build MongoDB into the OGR framework, and may first support to exchange a
> small size of spatial data with MongoDB, Simultaneously bug fixing. July
> 24 - July 13 (Coding - Phase 3 - 3 weeks)
> Passing the query string (a JSON style document) for both spatial and
> attribute data into MongoDB to select features as requested. Compile all
> the codes and conduct several tests, fix bugs and make it faster. July 14
> - July 27 (Testing - Phase 1 - 2 weeks)
> Transfer large scale spatial data with MongoDB using ogr2ogr to see the
> driver efficiency. Improve its efficiency and fix bugs. July 28 - August
> 10 (Testing - Phase 2 - 2 weeks)
> Conduct a parallel transformation experiment to find how fast MongoDB
> Driver can be compared to file system and PostGIS, and fix bugs. August 11
> - August 18 (pencils down)
> Write code documentation, includes doxygen comments and techbase/userbase
> articles.

You could mention adding support for spatial filtering.

> 
> 5. Future ideas / How can your idea be expanded?
> MongoDB is also an ideal platform for storing massive geo-raster data, so
> next job would be writing a MongoDB Driver for raster dataset.

Hum, I'm not sure if MongoDB is aimed at this... You would probably have to 
tile the raster to avoid sending/retrieving huge blobs at once

> 
> Explain how your SoC task would benefit the OSGeo member project and more
> generally the OSGeo Foundation as a whole: MongoDB can be a distributed
> and parallel NoSQL spatial database with high performance, high
> availability, and easy scalability, thus extremely suitable for large
> scale data-intensive computing. By implementing the MongoDB Driver in the
> OGR framework, the whole OSGeo ecosystem based on GDAL/OGR will be benefit
> from it and powered by MongoDB.
> 
> Please provide details of general computing experience: (operating systems
> you use on a day-to-day basis, languages you could write a program in,
> hardware, networking experience, etc.) During my college time, I mainly
> used .NET languages such as C#,VB.net, to build GIS software running on
> the Windows platform, while after that and my PhD program beginning most
> of my work were done in standard C++ on Linux environment.
> 
> Please provide details of previous GIS experience:
> I?m a GIS student ever since I attend college. Right now I'm a Ph.D
> candidate in Cartography and Geographic Information System, School of
> Geographic and Oceanographic Sciences, Nanjing University, China, and a
> visiting scholar at Geography & GIScience and NCSA (The National Center
> for Supercomputing Applications), UIUC, IL, USA.
> 
> Please provide details of any previous involvement with GIS programming and
> other software programming: [1] Climate Information Management System of
> Shanxi Province: Outstanding Award in ESRI Chinese College Student
> Software Development Contest, 2009. [2] Forest Fire Simulation Model based
> on Geographic Cellular Automata: Third Prize in ESRI Chinese College
> Student Software Development Contest, 2009. [3] High Performance
> Geospatial Computing System: HiGIS, (2011-2013)Supported by the National
> High Technology Research and Development Program of China (863 project),
> in construction. [4] NoSQL Expression of Massive Geospatial Information in
> the era of Big Data, (2013-2015) Supported by the Scientific Research
> Foundation of Graduate School of Nanjing University, in construction
> 
> Please tell us why you are interested in GIS and open source software:
> They are powerful and beautiful treasures of humankind, and I want to be
> part of it.
> 
> Please tell us why you are interested in working for OSGeo and the software
> project you have selected: It?s part of my research, since I was trying to
> harness MongoDB to support high performance geo-computing.
> 
> Please tell us why you are interested in your specific coding project:
> I spent lots of time in the past three years learning how GDAL works and
> how to employ them into high performance computing applications. So I
> believe a new GDAL with MongoDB support will do much good to my current
> research.
> 
> Would your application contribute to your ongoing studies/ degree? If so,
> how? Yes. MongoDB cluster is a good way to handle large quantities of
> spatial data, and if OGR provides MongoDB Driver, lots of tools we
> developed based on GDAL can be reusable, and powered by MongoDB, thus much
> faster.
> 
> Please explain how you intend to continue being an active member of your
> project and/or OSGeo AFTER the summer is over: I?ll try my best to keep
> following this thread to make MongoDB Driver stable and efficient.
> 
> Do you understand this is a serious commitment, equivalent to a full-time
> paid summer internship or summer job? Yes, I understand. I?ll give my
> best.
> 
> Do you have any known time conflicts during the official coding period?
> (May 19 to August 19) No, I don't.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From woodbri at swoodbridge.com  Thu Mar 20 13:50:21 2014
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Thu, 20 Mar 2014 16:50:21 -0400
Subject: [gdal-dev] GSoC proposal looking for mentors and suggestions
In-Reply-To: <201403202113.41356.even.rouault@mines-paris.org>
References: <2DAEBB32799F494EBE504E1247CC5E8220E408B4@CHIMBX6.ad.uillinois.edu>
	<201403202113.41356.even.rouault@mines-paris.org>
Message-ID: <532B548D.9090401@swoodbridge.com>

I believe that OSGeo is expecting every approved student to have a 
mentor and a co-mentor this year.

I have been a mentor for the last 5+ years for pgRouting. We have had 2 
students most of those years and two mentors with each mentor being the 
co-mentor for the other project. This has worked well for us. This 
allows one of us to be gone but to still provide coverage for both projects.

The thing that I have found over the years is that it is important to 
help your students set realistic and conservative goals especially if 
they have not done previous development on the project. If you don't 
know the issues then everything seems trivial, and students are 
wonderfully optimistic but they rapidly get behind and overwhelmed. We 
combat this by having them set minimum goals and stretch goals. The 
minimum are required to get a passing grade. Think of it as "have to 
have" vs "nice to have".

Hope this helps. Feel free to contact me off list if you want to discuss 
mentoring more.

-Steve

On 3/20/2014 4:13 PM, Even Rouault wrote:
> Le jeudi 20 mars 2014 05:02:33, Zhang, Shuai a ?crit :
>> Hi All,
>>
>> I think i need a mentor working with me and help me make gdal under mongodb
>> support. Below is the proposal i wrote, hopefully you find it worth a
>> trial.
>
> This is something I may potentially mentor, but there are already 2 students
> interested on other subjects. I'm not sure how many will get eventually
> selected by the GSOC program, but I won't be able to mentor 3 people for sure
> !
>
>>
>> Thanks,
>> shuai
>>
>>
>> Title: OGR Driver for MongoDB
>>
>> Short description:
>> MongoDB, a document database that provides high performance, high
>> availability, and easy scalability, can be a good platform for storing
>> extremely large spatial datasets, to support high performance
>> geo-computation and real-time spatial analysis in a large scale.This
>> project aims at developing a OGR Driver for MongoDB to help applications
>> or softwares based on GDAL, such QGIS, Geoserver, Mapserver, and so on,
>> read & write the spatial data in it, and thus enable the Open Source GIS
>> Ecosystem powered by the advanced NoSQL database.
>>
>> Describe your idea
>> 1. Introduction
>> MongoDB,  a document database that provides high performance, high
>> availability, and easy scalability, can be a good platform for storing
>> extremely large spatial datasets, to support high performance
>> geo-computation and real-time spatial analysis in a large scale. Yet,
>> there is little attention so far that GIS fields pay to make most of its
>> strength. This project aims at developing a OGR Driver for MongoDB to help
>> applications or softwares based on GDAL read & write the spatial data in
>> it, and thus enable the Open Source GIS Ecosystem powered by the advanced
>> NoSQL database.
>>
>>   2. Background
>> Since we are living in the era of big data, tools and equipment today for
>> capturing spatial data both at the mega-scale and the milli-scale are just
>> dreadful. The magnitude of this data volume is well beyond the capability
>> of any mainstream geographic information systems. Yet, we, GIS fields,
>> have no off-the-shelf solutions to manage these massive spatial data.
>> Relational spatial databases have taken in charge for decades but now the
>> situation seems a little different.
>>
>> A computing pattern shift can be seen throughout the IT industry in recent
>> years and GIS would be no exception. Especially, data analytics may not be
>> achievable within a reasonable amount of time without resorting to
>> high-performance computing strategies. However, relational spatial
>> databases are kind of slow to support these high-performance computing
>> scenarios, and often lack of flexible scalability to handle a growing
>> amount of work in a capable manner.
>>
>> Fortunately, there are several groups trying to address the problem, and
>> MongoDB is an apparent leader in this direction. MongoDB, which has native
>> support for maintaining geospatial data, using a document-oriented model,
>> lies in fifth place in the DB-Engines Ranking of database management
>> systems classed according to popularity and the highest rated
>> non-relational system. From version 2.4 (released on March 19, 2013),
>> MongoDB introduces support for a subset of GeoJSON geometries including
>> basic shapes like points, linestrings, polygons.
>
> Good to know. Last time I looked, MongoDB had only support for point
> geometries.
>
>> And quite a number of
>> partners related with big data, NoSQL, cloud, mobile and high performance
>> computing join the MongoDB ecosystem. Foursquare is featured one of them
>> which benefits from MongoDB?s support for geospatial indexing, allowing it
>> to easily query for large location-based data.
>>
>> 3. The idea
>> MongoDB employs GeoJSON to store spatial data and concurrently GDAL
>> supports for access to features encoded in GeoJSON format, which can be
>> reusable.
>
> As far as I remember, the interface with MongoDB is (was?) a kind of binary
> JSON format. Has this changed ?
>
>> This project is trying to implement a MongoDB Driver according
>> to the OGR format driver interfaces with subclasses of OGRSFDriver,
>> OGRDataSource and OGRLayer, and registered with the OGRSFDriverRegistrar
>> at runtime, so that GDAL may use MongoDB as a datasource to access large
>> scale spatial data.
>>
>> 4. Project plan (detailed timeline: how do you plan to spend your summer?)
>> The first thing in the list is to design the structure inside of MongoDB
>> spatial database. In the context of OGR data model, we got Datasource,
>> Layer and Feature, so accordingly every database in MongoDB is regarded as
>> a Datasource, and the Collections within should be treated as Layers, thus
>> every Document as a Feature.
>
> Yes, sounds a bit similar to what was done with CouchDB
>
>> PostGIS and other spatial databases often
>> harness some system tables to maintain the metadata, but since MongoDB is
>> schema free metadata such as spatial reference can be stored within the
>> particular Layer, in this case a Collection.
>>
>> The most important part of a data format driver is to define how to read
>> and write the data format in the specific driver, especially the Open and
>> Create method in the Datasource Class. As MongoDB organizes its spatial
>> data in GeoJSON model, the GeoJSON driver already supported by current
>> GDAL can be reused to code or decode the GeoJSON fetched from MongoDB
>> database. Therefore, there would be totally four files to implement,
>> including ogr_mongo.h, ogrmongodriver.cpp, ogrmongodatasource.cpp, and
>> ogrmongolayer.cpp.
>
> The write part should be no problem : a no SQL database can receive documents
> with a fixed structure.
> The read part will need to explore all the documents/features to retrieve
> their structure and build a OGR FeatureDefinition. This is done in the CouchDB
> driver.
>
>>
>> Test Plan
>> [1] After the MongoDB Driver is compiled into the OGR framework, the
>> utility ogr2ogr can be used as the test program to import and output
>> spatial data between shapefile and MongoDB. [2] Conduct a parallel
>> transformation process to find how fast MongoDB Driver can be compared to
>> file system and PostGIS.
>>
>> Time Line
>>
>> May 19- June 8 (Coding - Phase 1 - 3 weeks)
>> Preparing the developing environment and bringing GDAL, MongoDB C++ driver
>> and C++ together, Implementing OGRMongoDriver, OGRMongoDataSource,
>> OGRMongoLayer according to the interfaces defined by OGRSFDriver,
>> OGRDataSource and OGRLayer. June 9 - June 23 (Coding - Phase 2 - 2 weeks)
>> Build MongoDB into the OGR framework, and may first support to exchange a
>> small size of spatial data with MongoDB, Simultaneously bug fixing. July
>> 24 - July 13 (Coding - Phase 3 - 3 weeks)
>> Passing the query string (a JSON style document) for both spatial and
>> attribute data into MongoDB to select features as requested. Compile all
>> the codes and conduct several tests, fix bugs and make it faster. July 14
>> - July 27 (Testing - Phase 1 - 2 weeks)
>> Transfer large scale spatial data with MongoDB using ogr2ogr to see the
>> driver efficiency. Improve its efficiency and fix bugs. July 28 - August
>> 10 (Testing - Phase 2 - 2 weeks)
>> Conduct a parallel transformation experiment to find how fast MongoDB
>> Driver can be compared to file system and PostGIS, and fix bugs. August 11
>> - August 18 (pencils down)
>> Write code documentation, includes doxygen comments and techbase/userbase
>> articles.
>
> You could mention adding support for spatial filtering.
>
>>
>> 5. Future ideas / How can your idea be expanded?
>> MongoDB is also an ideal platform for storing massive geo-raster data, so
>> next job would be writing a MongoDB Driver for raster dataset.
>
> Hum, I'm not sure if MongoDB is aimed at this... You would probably have to
> tile the raster to avoid sending/retrieving huge blobs at once
>
>>
>> Explain how your SoC task would benefit the OSGeo member project and more
>> generally the OSGeo Foundation as a whole: MongoDB can be a distributed
>> and parallel NoSQL spatial database with high performance, high
>> availability, and easy scalability, thus extremely suitable for large
>> scale data-intensive computing. By implementing the MongoDB Driver in the
>> OGR framework, the whole OSGeo ecosystem based on GDAL/OGR will be benefit
>> from it and powered by MongoDB.
>>
>> Please provide details of general computing experience: (operating systems
>> you use on a day-to-day basis, languages you could write a program in,
>> hardware, networking experience, etc.) During my college time, I mainly
>> used .NET languages such as C#,VB.net, to build GIS software running on
>> the Windows platform, while after that and my PhD program beginning most
>> of my work were done in standard C++ on Linux environment.
>>
>> Please provide details of previous GIS experience:
>> I?m a GIS student ever since I attend college. Right now I'm a Ph.D
>> candidate in Cartography and Geographic Information System, School of
>> Geographic and Oceanographic Sciences, Nanjing University, China, and a
>> visiting scholar at Geography & GIScience and NCSA (The National Center
>> for Supercomputing Applications), UIUC, IL, USA.
>>
>> Please provide details of any previous involvement with GIS programming and
>> other software programming: [1] Climate Information Management System of
>> Shanxi Province: Outstanding Award in ESRI Chinese College Student
>> Software Development Contest, 2009. [2] Forest Fire Simulation Model based
>> on Geographic Cellular Automata: Third Prize in ESRI Chinese College
>> Student Software Development Contest, 2009. [3] High Performance
>> Geospatial Computing System: HiGIS, (2011-2013)Supported by the National
>> High Technology Research and Development Program of China (863 project),
>> in construction. [4] NoSQL Expression of Massive Geospatial Information in
>> the era of Big Data, (2013-2015) Supported by the Scientific Research
>> Foundation of Graduate School of Nanjing University, in construction
>>
>> Please tell us why you are interested in GIS and open source software:
>> They are powerful and beautiful treasures of humankind, and I want to be
>> part of it.
>>
>> Please tell us why you are interested in working for OSGeo and the software
>> project you have selected: It?s part of my research, since I was trying to
>> harness MongoDB to support high performance geo-computing.
>>
>> Please tell us why you are interested in your specific coding project:
>> I spent lots of time in the past three years learning how GDAL works and
>> how to employ them into high performance computing applications. So I
>> believe a new GDAL with MongoDB support will do much good to my current
>> research.
>>
>> Would your application contribute to your ongoing studies/ degree? If so,
>> how? Yes. MongoDB cluster is a good way to handle large quantities of
>> spatial data, and if OGR provides MongoDB Driver, lots of tools we
>> developed based on GDAL can be reusable, and powered by MongoDB, thus much
>> faster.
>>
>> Please explain how you intend to continue being an active member of your
>> project and/or OSGeo AFTER the summer is over: I?ll try my best to keep
>> following this thread to make MongoDB Driver stable and efficient.
>>
>> Do you understand this is a serious commitment, equivalent to a full-time
>> paid summer internship or summer job? Yes, I understand. I?ll give my
>> best.
>>
>> Do you have any known time conflicts during the official coding period?
>> (May 19 to August 19) No, I don't.
>


From muralikrishna50 at gmail.com  Thu Mar 20 13:57:04 2014
From: muralikrishna50 at gmail.com (Murali Krishna)
Date: Thu, 20 Mar 2014 20:57:04 +0000
Subject: [gdal-dev] Mailing list
Message-ID: <CAND4YNnes=w6cY8CtBh9_dWxV14ObtbjDfiN_yAgNg4Ks=xPjA@mail.gmail.com>

Hi - Can you please remove me from the gdal mailing list.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140320/5eb036eb/attachment.html>

From chaitanya.ch at gmail.com  Fri Mar 21 06:20:52 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri, 21 Mar 2014 18:50:52 +0530
Subject: [gdal-dev] Regarding Raster GDAL driver
In-Reply-To: <CAKTWcSkij4A7VFA-Lhu0Gmx1kgXkN9ANdXe82RZVu4_LZOqAWw@mail.gmail.com>
References: <CAKTWcSkij4A7VFA-Lhu0Gmx1kgXkN9ANdXe82RZVu4_LZOqAWw@mail.gmail.com>
Message-ID: <CAMKgpOYbjeHGF5arHdmsa-9yX=hw1Ovb7oWpqv9bzS2FAzJ9mw@mail.gmail.com>

Kshitij and Varun have good GSoC proposals. Auto georeferencer and PostGIS
raster write support. They are from the same college studying under Dr.
Rajan. Kshitij proposed both ideas.

May I suggest that they work as a team with each being the primary coder of
their respective project?

--
Best regards,
Chaitanya Kumar CH
On 21-Mar-2014 6:24 pm, "Kshitij Kansal" <kansal.k at gmail.com> wrote:

> Hello
>
> I had been working on the Raster GDAL QGIS plugin from December last
> year(Which ultimately got discontinued), and the person, involved, Jorge,
> asked me to write a proposal in this one(Raster Driver). I had told him
> earlier that I was doing it for GDAL, so he said you can give at max 5
> proposals.
>
> Sure, I have withdrawn my proposal, but I need to clarify this.
> I had prepared this last night with the help of Jorge itself. I will
> contact Varun sir. Its not a problem.
>
> With Regards,
>
> Kshitij Kansal
>
> Lab For Spatial Informatics,
>
> IIIT Hyderabad
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140321/db2e7d65/attachment-0001.html>

From jukka.rahkonen at mmmtike.fi  Fri Mar 21 07:26:21 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 21 Mar 2014 14:26:21 +0000 (UTC)
Subject: [gdal-dev] New compression library based on gdal design
References: <CAK8GPyCvMju+3zrmiCEeBHvKvYhKp_h2NVp7d+E0_GTvAiywzA@mail.gmail.com>
Message-ID: <loom.20140321T150513-494@post.gmane.org>

Aaron Boxer <boxerab <at> gmail.com> writes:

> 
> Hello,
> I recently started developing an open source jpeg2000 compression library
using opencl.
> I would like to base the library design on the very successful gdal
library design.
> Can anyone recomend any resources to help me to grok the high level design
of gdal?
> 
> Thanks so much,
> Aaron

Hi,

I would like to see something that is open source and fast with JPEG2000. I
think that it would be OK to support only a subset of JPEG2000 standard if
the basic operations would be super fast. I took just a moment ago some
timings for another purpose but they may be interesting. I converted the
same 12000x12000 pixel image (432 MB uncompressed) with a few different methods:

GDAL (64-bit) from tiff to tiff: 3 seconds
GDAL (64-bit) ECWJP2 (SDK 5.0) from lossless JPEG2000 to tiff: 21 seconds
GDAL (64-bit) JP2KAK (SDK 7.3.2) from lossless JPEG2000 to tiff: 14 seconds
Kakadu 7.3.2 (64-bit) kdu_expand from lossless JPEG2000 to tiff: 7 seconds.

The new library with opencl should be at least as fast as ECWJP2 with GDAL
but the faster the better.

It is interesting to see that native Kakadu application was two times faster
than GDAL with JP2KAK driver of the same Kakadu version. Of course the use
case is very simple.

-Jukka Rahkonen-


From lucena_ivan at hotmail.com  Fri Mar 21 07:37:11 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Fri, 21 Mar 2014 10:37:11 -0400
Subject: [gdal-dev] New compression library based on gdal design
In-Reply-To: <loom.20140321T150513-494@post.gmane.org>
References: <CAK8GPyCvMju+3zrmiCEeBHvKvYhKp_h2NVp7d+E0_GTvAiywzA@mail.gmail.com>,
	<loom.20140321T150513-494@post.gmane.org>
Message-ID: <BLU173-W15E02797DD0D8AE66708C990790@phx.gbl>

Hi Jukka,

> To: gdal-dev at lists.osgeo.org
> From: jukka.rahkonen at mmmtike.fi
> Date: Fri, 21 Mar 2014 14:26:21 +0000
> Subject: Re: [gdal-dev] New compression library based on gdal design
> 
> Aaron Boxer <boxerab <at> gmail.com> writes:
> 
> > 
> > Hello,
> > I recently started developing an open source jpeg2000 compression library
> using opencl.
> > I would like to base the library design on the very successful gdal
> library design.
> > Can anyone recomend any resources to help me to grok the high level design
> of gdal?
> > 
> > Thanks so much,
> > Aaron
> 
> Hi,
> 
> I would like to see something that is open source and fast with JPEG2000. I
> think that it would be OK to support only a subset of JPEG2000 standard if
> the basic operations would be super fast. I took just a moment ago some
> timings for another purpose but they may be interesting. I converted the
> same 12000x12000 pixel image (432 MB uncompressed) with a few different methods:
> 
> GDAL (64-bit) from tiff to tiff: 3 seconds
> GDAL (64-bit) ECWJP2 (SDK 5.0) from lossless JPEG2000 to tiff: 21 seconds
> GDAL (64-bit) JP2KAK (SDK 7.3.2) from lossless JPEG2000 to tiff: 14 seconds
> Kakadu 7.3.2 (64-bit) kdu_expand from lossless JPEG2000 to tiff: 7 seconds.
> 
> The new library with opencl should be at least as fast as ECWJP2 with GDAL
> but the faster the better.
> 
> It is interesting to see that native Kakadu application was two times faster
> than GDAL with JP2KAK driver of the same Kakadu version. Of course the use
> case is very simple.

Your test image was in fact 12000x12000x3 (=432 MB). That might explains why, maybe the GDAL driver is dealing with one band at the time, requesting to run the decompression 2 times more than the other application.

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140321/615bd484/attachment.html>

From boxerab at gmail.com  Fri Mar 21 07:54:58 2014
From: boxerab at gmail.com (Aaron Boxer)
Date: Fri, 21 Mar 2014 10:54:58 -0400
Subject: [gdal-dev] New compression library based on gdal design
In-Reply-To: <loom.20140321T150513-494@post.gmane.org>
References: <CAK8GPyCvMju+3zrmiCEeBHvKvYhKp_h2NVp7d+E0_GTvAiywzA@mail.gmail.com>
	<loom.20140321T150513-494@post.gmane.org>
Message-ID: <CAK8GPyBbid8EXtg5MfRRC_OBt82vfKcaRjf2MUJi18iuRuJreg@mail.gmail.com>

Hi Jukka,


> I would like to see something that is open source and fast with JPEG2000. I
> think that it would be OK to support only a subset of JPEG2000 standard if
> the basic operations would be super fast. I took just a moment ago some
> timings for another purpose but they may be interesting. I converted the
> same 12000x12000 pixel image (432 MB uncompressed) with a few different
> methods:
>
> GDAL (64-bit) from tiff to tiff: 3 seconds
> GDAL (64-bit) ECWJP2 (SDK 5.0) from lossless JPEG2000 to tiff: 21 seconds
> GDAL (64-bit) JP2KAK (SDK 7.3.2) from lossless JPEG2000 to tiff: 14 seconds
> Kakadu 7.3.2 (64-bit) kdu_expand from lossless JPEG2000 to tiff: 7 seconds.
>
> The new library with opencl should be at least as fast as ECWJP2 with GDAL
> but the faster the better.
>
>
Using GPGPU has a potential 10x to 20x speedup over CPU.

My new library is progressing:  now working on the CUDA to OPenCL
conversion.



> It is interesting to see that native Kakadu application was two times
> faster
> than GDAL with JP2KAK driver of the same Kakadu version. Of course the use
> case is very simple.
>

I don't know enough about the GDAL drivers to comment on this, but it does
seem odd.

Aaron
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140321/2541bcf7/attachment.html>

From tom at subblue.com  Sat Mar 22 10:59:54 2014
From: tom at subblue.com (Tom Beddard)
Date: Sat, 22 Mar 2014 10:59:54 -0700 (PDT)
Subject: [gdal-dev] Problem using gdal_contour after gdal_merge.py
Message-ID: <8AC42356-3518-44EE-9EE9-520E2DE00999@subblue.com>

I?m having an issue generating a contour shape file with gdal_contour from a source file that has been merged with gdal_merge.py
I can generate contours from a single unmerged source tif without problems, so it seems something gdal_merge.py is doing is causing an issue.


This is my process:


I?ve downloaded SRTM data for the UK from
http://srtm.csi.cgiar.org/SELECTION/inputCoord.asp




After downloading the tifs I?m using gdal_merge.py to combine them all into a single file like:
gdal_merge.py srtm_*.tif -o uk.tif



I?m then re-projecting it to Google Web Mercator with:
gdalwarp -s_srs EPSG:4326 -t_srs EPSG:3785 -r bilinear uk.tif uk-3785.tif



Finally I?m generating the contours with:
gdal_contour -a elev -snodata 32767 -i uk-3785.tif uk-contour.shp



Generating the contours from a single reprojected tile works fine (takes about 80secs), however even trying it on two tiles that have been merged with gdal_merge.py it seems to process for a very long time (the .shp file quickly rises to a few gigs but then doesn?t change size) until after an age it errors with:
ERROR 1: Failed to write shape object. File size cannot reach 4294964860 + 2696.



It?s strange that a tif combined from two tiles fails when it reaches a ~4GB file size and yet doing just one of them individually only results in a 90MB .shp file.


As a side note I?m also generating hill and slope shading images (for use in TileMill).?
You can see my full script for that here:?https://gist.github.com/subblue/9705999



I?m using gdal v1.10.1 that has been installed via brew on OSX 10.9.2


Are there any tricks to generating contours from merged files or is it just going to be a case of scripting the generation of lots of .shp contour files from each of the elevation tiles?


Thanks for any help, I?m still on the steep bit of the learning curve with all of this :)


Tom




--
Tom Beddard
www.subblue.com

twitter.com/subblue



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140322/52648ebc/attachment.html>

From andre+joost at nurfuerspam.de  Sat Mar 22 23:06:20 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Sun, 23 Mar 2014 07:06:20 +0100
Subject: [gdal-dev] Problem using gdal_contour after gdal_merge.py
In-Reply-To: <8AC42356-3518-44EE-9EE9-520E2DE00999@subblue.com>
References: <8AC42356-3518-44EE-9EE9-520E2DE00999@subblue.com>
Message-ID: <lgltkb$f5j$1@ger.gmane.org>

Am 22.03.2014 18:59, schrieb Tom Beddard:

> Are there any tricks to generating contours from merged files or is
> it just going to be a case of scripting the generation of lots of
> .shp contour files from each of the elevation tiles?
>
>
> Thanks for any help, I?m still on the steep bit of the learning curve
> with all of this :)
>
>


The SRTM data is in EPSG:4326, so I suggest to do the merging and 
contour creating in that CRS. Reprojecting of rasters always causes 
nasty edges, and the contour process might stumble upon that.

HTH,
Andr? Joost


From mikeflan at att.net  Sun Mar 23 09:51:39 2014
From: mikeflan at att.net (Mike Flannigan)
Date: Sun, 23 Mar 2014 11:51:39 -0500
Subject: [gdal-dev] Installing GDAL on Win7
In-Reply-To: <mailman.56.1395428413.1853.gdal-dev@lists.osgeo.org>
References: <mailman.56.1395428413.1853.gdal-dev@lists.osgeo.org>
Message-ID: <532F111B.2050601@att.net>


I see this is the developers list, so maybe this
is the wrong place to ask this question??

I'd like to install GDAL on Win7.  I need to automate
the conversion of thousands of GeoPDF's to GeoTiff's.
I can do the automation part in other software if
necessary, so I just need a basic convert utility.

I'm going to this page:
http://www.gisinternals.com/sdk/
but I don't know which download I need.  I would like a
64 bit version.

Should I use the 2nd item under "GDAL and MapServer",
which is the "MSVC2005 (Win64) -release" one?  Or
should I use the 2nd binary item?



Mike F


From rjhale at northrivergeographic.com  Sun Mar 23 09:55:25 2014
From: rjhale at northrivergeographic.com (Randal Hale)
Date: Sun, 23 Mar 2014 12:55:25 -0400
Subject: [gdal-dev] Installing GDAL on Win7
In-Reply-To: <532F111B.2050601@att.net>
References: <mailman.56.1395428413.1853.gdal-dev@lists.osgeo.org>
	<532F111B.2050601@att.net>
Message-ID: <532F11FD.3020005@northrivergeographic.com>

You could usee the OSGEO installer for windows - 
http://download.osgeo.org/osgeo4w/osgeo4w-setup-x86_64.exe

You can use it to install a whole pile of software (QGIS etc) or just 
gdal which I think is at 1.10 from this install.

Randy

-----------------
Randal Hale, GISP
North River Geographic Systems, Inc
http://www.northrivergeographic.com
423.653.3611 rjhale at northrivergeographic.com
twitter:rjhale
http://about.me/rjhale

On 03/23/2014 12:51 PM, Mike Flannigan wrote:
>
> I see this is the developers list, so maybe this
> is the wrong place to ask this question??
>
> I'd like to install GDAL on Win7.  I need to automate
> the conversion of thousands of GeoPDF's to GeoTiff's.
> I can do the automation part in other software if
> necessary, so I just need a basic convert utility.
>
> I'm going to this page:
> http://www.gisinternals.com/sdk/
> but I don't know which download I need.  I would like a
> 64 bit version.
>
> Should I use the 2nd item under "GDAL and MapServer",
> which is the "MSVC2005 (Win64) -release" one?  Or
> should I use the 2nd binary item?
>
>
>
> Mike F
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From szekerest at gmail.com  Sun Mar 23 10:20:08 2014
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun, 23 Mar 2014 18:20:08 +0100
Subject: [gdal-dev] Installing GDAL on Win7
In-Reply-To: <532F111B.2050601@att.net>
References: <mailman.56.1395428413.1853.gdal-dev@lists.osgeo.org>
	<532F111B.2050601@att.net>
Message-ID: <CACALY+Q7FVTAANKuO69sNwzqeut_FgF=ORF5KP=PPrpZks6bkg@mail.gmail.com>

Regarding to gisinternals you may probably use the msi installers to have
GDAL set up easily. Any of the 64 bit packages can be used, but the
MSVC2010 versions are used most frequently.

Best regards,

Tamas



2014-03-23 17:51 GMT+01:00 Mike Flannigan <mikeflan at att.net>:

>
> I see this is the developers list, so maybe this
> is the wrong place to ask this question??
>
> I'd like to install GDAL on Win7.  I need to automate
> the conversion of thousands of GeoPDF's to GeoTiff's.
> I can do the automation part in other software if
> necessary, so I just need a basic convert utility.
>
> I'm going to this page:
> http://www.gisinternals.com/sdk/
> but I don't know which download I need.  I would like a
> 64 bit version.
>
> Should I use the 2nd item under "GDAL and MapServer",
> which is the "MSVC2005 (Win64) -release" one?  Or
> should I use the 2nd binary item?
>
>
>
> Mike F
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140323/28714526/attachment.html>

From mikeflan at att.net  Sun Mar 23 17:31:57 2014
From: mikeflan at att.net (Mike Flannigan)
Date: Sun, 23 Mar 2014 19:31:57 -0500
Subject: [gdal-dev] Installing GDAL on Win7
In-Reply-To: <532F11FD.3020005@northrivergeographic.com>
References: <mailman.56.1395428413.1853.gdal-dev@lists.osgeo.org>
	<532F111B.2050601@att.net>
	<532F11FD.3020005@northrivergeographic.com>
Message-ID: <532F7CFD.9080302@att.net>


Thank you Randal and Tamas.

I downloaded and unzipped "release-1600-x64-gdal-mapserver.zip 
<http://www.gisinternals.com/sdk/Download.aspx?file=release-1600-x64-gdal-mapserver.zip>" 
(Compiled binaries in a single .zip package)

I see these files in 'C:\Copy\bin\gdal\apps':

gdaladdo.exe
gdalbuildvrt.exe
gdaldem.exe
gdalenhance.exe
gdalinfo.exe
gdallocationinfo.exe
gdalmanage.exe
gdalserver.exe
gdalsrsinfo.exe
gdaltindex.exe
gdaltransform.exe
gdalwarp.exe
gdal_contour.exe
gdal_grid.exe
gdal_rasterize.exe
gdal_translate.exe
nearblack.exe
ogr2ogr.exe
ogrinfo.exe
ogrtindex.exe
testepsg.exe

I went to this site:
http://www.staygeo.com/2013/03/convert-geopdf-maps-to-geotiff-with-gdal.html
and followed the instructions.

I typed:
C:\Copy\bin\gdal\apps>gdal_translate -of GTiff -co "TILED=YES" -co 
"TFW=YES" C:\Copy\wpt.tif --config GDAL_PDF_LAYERS_OFF 
"Map_Collar","Map_Frame.Projection_and_Grids" --config GDAL_PDF_DPI300

It gave an error:
ERROR 1: --config option given without a key and value argument.

I'm still working with it.  I don't want tiled - I want the border
of the drawing included in the GeoTiff.


Thanks to Tamas Szekeres for maintaining this program.


Mike



On 3/23/2014 11:55 AM, Randal Hale wrote:
> You could usee the OSGEO installer for windows - 
> http://download.osgeo.org/osgeo4w/osgeo4w-setup-x86_64.exe
>
> You can use it to install a whole pile of software (QGIS etc) or just 
> gdal which I think is at 1.10 from this install.
>
> Randy
>
> -----------------
> Randal Hale, GISP
> North River Geographic Systems, Inc
> http://www.northrivergeographic.com
> 423.653.3611 rjhale at northrivergeographic.com
> twitter:rjhale
> http://about.me/rjhale


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140323/ea8d2678/attachment.html>

From mikeflan at att.net  Sun Mar 23 18:32:22 2014
From: mikeflan at att.net (Mike Flannigan)
Date: Sun, 23 Mar 2014 20:32:22 -0500
Subject: [gdal-dev] Installing GDAL on Win7
In-Reply-To: <532F7CFD.9080302@att.net>
References: <mailman.56.1395428413.1853.gdal-dev@lists.osgeo.org>
	<532F111B.2050601@att.net>
	<532F11FD.3020005@northrivergeographic.com>
	<532F7CFD.9080302@att.net>
Message-ID: <532F8B26.5010500@att.net>


Thank you all.  I got it to work with the following
command:
gdal_translate -of GTiff -co "TILED=YES" -co "TFW=YES" C:\Copy\wp.pdf 
C:\Copy\wpt.tif --config GDAL_PDF_DPI 300

It works pretty good.  It converts a 11.1 MB PDF into a
96MB Tiff file that zips up into a 57 MB file.  These files
are about 15 times bigger than the ones I am used to, but
they do have quite a bit of detail and don't have the
blank white space that a 7.5 minute topo has.

These Tiffs are very well georeferenced.  I am pleased.




Mike



On 3/23/2014 7:31 PM, Mike Flannigan wrote:
>
> Thank you Randal and Tamas.
>
> I downloaded and unzipped "release-1600-x64-gdal-mapserver.zip 
> <http://www.gisinternals.com/sdk/Download.aspx?file=release-1600-x64-gdal-mapserver.zip>" 
> (Compiled binaries in a single .zip package)
>
> I see these files in 'C:\Copy\bin\gdal\apps':
>
> gdaladdo.exe
> gdalbuildvrt.exe
> gdaldem.exe
> gdalenhance.exe
> gdalinfo.exe
> gdallocationinfo.exe
> gdalmanage.exe
> gdalserver.exe
> gdalsrsinfo.exe
> gdaltindex.exe
> gdaltransform.exe
> gdalwarp.exe
> gdal_contour.exe
> gdal_grid.exe
> gdal_rasterize.exe
> gdal_translate.exe
> nearblack.exe
> ogr2ogr.exe
> ogrinfo.exe
> ogrtindex.exe
> testepsg.exe
>
> I went to this site:
> http://www.staygeo.com/2013/03/convert-geopdf-maps-to-geotiff-with-gdal.html
> and followed the instructions.
>
> I typed:
> C:\Copy\bin\gdal\apps>gdal_translate -of GTiff -co "TILED=YES" -co 
> "TFW=YES" C:\Copy\wpt.tif --config GDAL_PDF_LAYERS_OFF 
> "Map_Collar","Map_Frame.Projection_and_Grids" --config GDAL_PDF_DPI300
>
> It gave an error:
> ERROR 1: --config option given without a key and value argument.
>
> I'm still working with it.  I don't want tiled - I want the border
> of the drawing included in the GeoTiff.
>
>
> Thanks to Tamas Szekeres for maintaining this program.
>
>
> Mike
>
>
>
> On 3/23/2014 11:55 AM, Randal Hale wrote:
>> You could usee the OSGEO installer for windows - 
>> http://download.osgeo.org/osgeo4w/osgeo4w-setup-x86_64.exe
>>
>> You can use it to install a whole pile of software (QGIS etc) or just 
>> gdal which I think is at 1.10 from this install.
>>
>> Randy
>>
>> -----------------
>> Randal Hale, GISP
>> North River Geographic Systems, Inc
>> http://www.northrivergeographic.com
>> 423.653.3611 rjhale at northrivergeographic.com
>> twitter:rjhale
>> http://about.me/rjhale
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140323/41c7921a/attachment.html>

From jukka.rahkonen at mmmtike.fi  Mon Mar 24 01:57:49 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 24 Mar 2014 08:57:49 +0000 (UTC)
Subject: [gdal-dev] Installing GDAL on Win7
References: <mailman.56.1395428413.1853.gdal-dev@lists.osgeo.org>
	<532F111B.2050601@att.net>
	<532F11FD.3020005@northrivergeographic.com>
	<532F7CFD.9080302@att.net> <532F8B26.5010500@att.net>
Message-ID: <loom.20140324T090824-673@post.gmane.org>

Mike Flannigan <mikeflan <at> att.net> writes:

> 
> 
>     
>     Thank you all.? I got it to work with the following 
>     command:
>     gdal_translate -of GTiff -co "TILED=YES" -co "TFW=YES"
>     C:\Copy\wp.pdf C:\Copy\wpt.tif --config GDAL_PDF_DPI 300
>     It works pretty good.? It converts a 11.1 MB PDF into a 
>     96MB Tiff file that zips up into a 57 MB file.? These files 
>     are about 15 times bigger than the ones I am used to, but 
>     they do have quite a bit of detail and don't have the 
>     blank white space that a 7.5 minute topo has.
>     These Tiffs are very well georeferenced.? I am pleased.

Hi,

You should not be pleased yet because you can get better. Start by reading
creation options - compress from http://www.gdal.org/frmt_gtiff.html.

Zipping tiff files is mostly not necessary because you can compress the
image data that is stored into a tiff. That reduces the file size and
removes the need for zipping-unzipping. Some hints about how and when to
compress.

Natural images like aeriel and satellite photos compress best with JPEG
compression. Use parameters 
-co COMPRESS=JPEG -co PHOTOMETRIC=YCBCR For b/w images just
-co COMPRESS=JPEG

Your originals seem to be topo maps. For those JPEG compression may not be
optimal because JPEG compression is blurring sharp edges and topo maps are
full of those because of texts and line drawings. Adding -co JPEG_QUALITY=
with a higher value than the default value 75 makes better quality, test it
and look at the results. However, generally LZW and deflate compression
methods are better for topo maps. Both methods are lossless and keep texts
sharp. At the same time the compression ratio can be very good. The
parameters to use are 
-co COMPRESS=LZW of
-CO COMPRESS=DEFLATE
With deflate you can also use parameter 
-co ZLEVEL=
Big ZLEVEL value gives smaller files but compression is slower. Quality is
the same, lossless.

Scanned old maps are somehow in the middle of computer made topo maps and
aerial images. The old paper gives non-uniform colour to the whole
background and LZW of deflate compression may not give good compression
ratio. Make some tests and consider what suits you best.

There is still one drawback with compressed tiffs: all applications cannot
open all kind of compressed tiffs. If images are for your own use or your
users will use GDAL based applications then all compression alternatives
should be as usable. If you know that some other viewers will be used and
you know what they are then you can make a test and feel relaxed. If you
want the widest possible audience then zipping the uncompressed tiffs is an
option but perhaps I wouldn't go for that myself. Being forced to unzip
images before viewing them is not a pleasure.

-Jukka Rahkonen-






From nhv at cape.com  Mon Mar 24 04:01:00 2014
From: nhv at cape.com (Norman Vine)
Date: Mon, 24 Mar 2014 07:01:00 -0400
Subject: [gdal-dev] Installing GDAL on Win7
In-Reply-To: <532F8B26.5010500@att.net>
References: <mailman.56.1395428413.1853.gdal-dev@lists.osgeo.org>
	<532F111B.2050601@att.net>
	<532F11FD.3020005@northrivergeographic.com>
	<532F7CFD.9080302@att.net> <532F8B26.5010500@att.net>
Message-ID: <2754E9CD-87F7-4B43-8EBB-9CA4617ABD3A@cape.com>


On Mar 23, 2014, at 9:32 PM, Mike Flannigan <mikeflan at att.net> wrote:

> 
> Thank you all.  I got it to work with the following 
> command:
> gdal_translate -of GTiff -co "TILED=YES" -co "TFW=YES" C:\Copy\wp.pdf C:\Copy\wpt.tif --config GDAL_PDF_DPI 300

I would experiment with adding one of these Creation Options
-co "COMPRESS=LZW"
-co "COMPRESS=PACKBITS"
-co "COMPRESS=DEFLATE"

> 
> It works pretty good.  It converts a 11.1 MB PDF into a 
> 96MB Tiff file that zips up into a 57 MB file.  These files 
> are about 15 times bigger than the ones I am used to, but 
> they do have quite a bit of detail and don't have the 
> blank white space that a 7.5 minute topo has.
> 
> These Tiffs are very well georeferenced.  I am pleased.
> 
> Mike


From tom at subblue.com  Mon Mar 24 04:22:33 2014
From: tom at subblue.com (Tom Beddard)
Date: Mon, 24 Mar 2014 04:22:33 -0700 (PDT)
Subject: [gdal-dev] Problem using gdal_contour after gdal_merge.py
In-Reply-To: <lgltkb$f5j$1@ger.gmane.org>
References: <8AC42356-3518-44EE-9EE9-520E2DE00999@subblue.com>
	<lgltkb$f5j$1@ger.gmane.org>
Message-ID: <B34FD530-D303-4037-A50B-3C2EFDB8EF56@subblue.com>

I did try without changing CRS before doing the contour extraction, still no luck.
The strange thing is that a single SRTM tile might generate a contour shape file of ~120MB and take just over a minute to process, however combining just two tiles with gdal_merge.py and then running gdal_contour generates a shape file around 4.1GB and takes about 20 mins, so it does seem that something gdal_merge.py is doing is causing a problem.


I don?t know how the contour algorithm works so I don?t know if you would expect a linear or quadratic relationship between processing time and the size of the area being analysed. To see such a dramatic increase from just doubling the area seems unexpected.


For the moment I?m generating a single contour file for each elevation tile, not ideal as there is a slight visual join of the contours between tiles that I?m having to handle with some careful styling.


Can anyone else confirm this behaviour when extracting contours from merged SRTM tiles?


Tom




> On Mar 23, 2014, at 6:06 AM, Andre Joost <andre+joost at nurfuerspam.de> wrote:
> 
> 
> Am 22.03.2014 18:59, schrieb Tom Beddard:
> 
> 
>> Are there any tricks to generating contours from merged files or is
>> it just going to be a case of scripting the generation of lots of
>> .shp contour files from each of the elevation tiles?
>> 
>> 
>> 
>> 
>> Thanks for any help, I?m still on the steep bit of the learning curve
>> with all of this :)
>> 
>> 
>> 
>> 
>> 
> 
> 
> 
> The SRTM data is in EPSG:4326, so I suggest to do the merging and
> contour creating in that CRS. Reprojecting of rasters always causes
> nasty edges, and the contour process might stumble upon that.
> 
> 
> HTH,
> Andr? Joost
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140324/3cb34079/attachment-0001.html>

From jukka.rahkonen at mmmtike.fi  Mon Mar 24 04:53:29 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 24 Mar 2014 11:53:29 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Problem_using_gdal=5Fcontour_after_gdal=5Fme?=
	=?utf-8?q?rge=2Epy?=
References: <8AC42356-3518-44EE-9EE9-520E2DE00999@subblue.com>
	<lgltkb$f5j$1@ger.gmane.org>
	<B34FD530-D303-4037-A50B-3C2EFDB8EF56@subblue.com>
Message-ID: <loom.20140324T124257-577@post.gmane.org>

Tom Beddard <tom <at> subblue.com> writes:

 
> Can anyone else confirm this behaviour when extracting contours from
merged SRTM tiles?

Hi,

If you can send me a link to your two SRTM tiles then I can have a try. GDAL
told you the very reason for your trouble 
ERROR 1: Failed to write shape object. File size cannot reach 4294964860 + 2696.

The shp part of shapefile cannot be bigger than 4 GB. Why two SRTM tiles
together starts creating such a huge file when 90 MB is enough for one tile
is a mystery. Something in the work flow must be catastrophically wrong. 

-Jukka Rahkonen-


From mikeflan at att.net  Mon Mar 24 05:31:08 2014
From: mikeflan at att.net (Mike Flannigan)
Date: Mon, 24 Mar 2014 07:31:08 -0500
Subject: [gdal-dev] Installing GDAL on Win7
In-Reply-To: <2754E9CD-87F7-4B43-8EBB-9CA4617ABD3A@cape.com>
References: <mailman.56.1395428413.1853.gdal-dev@lists.osgeo.org>
	<532F111B.2050601@att.net>
	<532F11FD.3020005@northrivergeographic.com>
	<532F7CFD.9080302@att.net> <532F8B26.5010500@att.net>
	<2754E9CD-87F7-4B43-8EBB-9CA4617ABD3A@cape.com>
Message-ID: <5330258C.9060801@att.net>


On 3/24/2014 6:01 AM, Norman Vine wrote:
>> Thank you all.  I got it to work with the following
>> command:
>> gdal_translate -of GTiff -co "TILED=YES" -co "TFW=YES" C:\Copy\wp.pdf C:\Copy\wpt.tif --config GDAL_PDF_DPI 300
> I would experiment with adding one of these Creation Options
> -co "COMPRESS=LZW"
> -co "COMPRESS=PACKBITS"
> -co "COMPRESS=DEFLATE"


Excellent suggestions - Thank you.

LZW - 14% Compression
PACKBITS - No Compression
DEFLATE - 36% Compression

However DEFLATE is totally unreadable:
http://www.mflan.com/temp/deflate.jpg
in both Global Mapper and QGIS.

PACKBITS and LZW both look great in GM.


I see the excellent suggestions by Jukka Rahkonen.

Using JPEG at default compression gives:
JPEG - 78% Compression


The quality of the JPEG is very good also.  You can
barely tell the difference from LZW.  It has more
Moliere affect at extreme zoom-in.


Using JPEG at 85% compression gives:
JPEG - 72% Compression
Less Moliere affect at extreme zoom-in.


Using JPEG at 90% compression gives:
JPEG - 66% Compression


Using JPEG at 100% compression gives:
JPEG - 27% Compression


All things considered I think I'm going to go
with the 85% compression.  A 10.1MB PDF turns
into a 26.2MB TIFF, which would zip to 26.0MB
if anybody cared to zip it.


Thanks for all your help.
You guys saved me a lot of time.


Mike



From gdal at stripfamily.net  Mon Mar 24 05:59:55 2014
From: gdal at stripfamily.net (David Strip)
Date: Mon, 24 Mar 2014 06:59:55 -0600
Subject: [gdal-dev] Installing GDAL on Win7
In-Reply-To: <5330258C.9060801@att.net>
References: <mailman.56.1395428413.1853.gdal-dev@lists.osgeo.org>	<532F111B.2050601@att.net>	<532F11FD.3020005@northrivergeographic.com>	<532F7CFD.9080302@att.net>
	<532F8B26.5010500@att.net>	<2754E9CD-87F7-4B43-8EBB-9CA4617ABD3A@cape.com>
	<5330258C.9060801@att.net>
Message-ID: <53302C4B.10102@stripfamily.net>

On 3/24/2014 6:31 AM, Mike Flannigan wrote:
> However DEFLATE is totally unreadable:
> http://www.mflan.com/temp/deflate.jpg
> in both Global Mapper and QGIS. 

Early in the qgis 2.x series one of popular the pre-built Windows
binaries was built without DEFLATE compression. However this has been
fixed, at least on the OSGEO4W downloads.

From jukka.rahkonen at mmmtike.fi  Mon Mar 24 06:41:24 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 24 Mar 2014 13:41:24 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Problem_using_gdal=5Fcontour_after_gdal=5Fme?=
	=?utf-8?q?rge=2Epy?=
References: <8AC42356-3518-44EE-9EE9-520E2DE00999@subblue.com>
	<lgltkb$f5j$1@ger.gmane.org>
	<B34FD530-D303-4037-A50B-3C2EFDB8EF56@subblue.com>
	<loom.20140324T124257-577@post.gmane.org>
Message-ID: <loom.20140324T143013-843@post.gmane.org>

Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:

> 
> Tom Beddard <tom <at> subblue.com> writes:
> 
>  
> > Can anyone else confirm this behaviour when extracting contours from
> merged SRTM tiles?

Can you check this command, it is perhaps not that you actually used:
gdal_contour -a elev -snodata 32767 -i uk-3785.tif uk-contour.shp

My GDAL gives FAILURE: Neither -i nor -fl are specified.
With -i 100 I have managed to run your commands. Result was 620 MB shapefile
with 135020 linestrings and it took several minutes to run it but it worked
for me.

-Jukka Rahkonen-




From tom at subblue.com  Mon Mar 24 07:08:39 2014
From: tom at subblue.com (Tom Beddard)
Date: Mon, 24 Mar 2014 07:08:39 -0700 (PDT)
Subject: [gdal-dev] Problem using gdal_contour after gdal_merge.py
In-Reply-To: <loom.20140324T143013-843@post.gmane.org>
References: <8AC42356-3518-44EE-9EE9-520E2DE00999@subblue.com>
	<lgltkb$f5j$1@ger.gmane.org>
	<B34FD530-D303-4037-A50B-3C2EFDB8EF56@subblue.com>
	<loom.20140324T124257-577@post.gmane.org>
	<loom.20140324T143013-843@post.gmane.org>
Message-ID: <4A5A4DF5-D068-4F04-9520-1F096E6C22BD@subblue.com>

I do specify -i 20 in my scripts (that was a typo just in my original email). Does it still work ok for you with an interval of 20 instead of 100?


I?m actually doing more tests just now. I?ve found that gdal_contour is significantly faster with a far smaller output shape file size if I first reproject to?EPSG:3785 using gdalwarp, e.g
gdalwarp -s_srs EPSG:4326 -t_srs EPSG:3785 -r bilinear srtm_36_02.tif srtm_36_02_rp.tif



Then contour extraction with
gdal_contour -a elev -snodata 32767 -i 20?srtm_36_02_rp.tif?srtm_36_02_contours.shp



Interestingly if I gdalwarp then gdal_merge the contour processing is still pretty fast (but with the artifacts of bilinear warping).?
But if I first merge, then reproject with gdalwarp then the processing is very slow, or fails due to the ~4GB limit


Not entirely sure what is going on, but I?ll put together a script to demonstrate the different issues.


Tom




> On Mar 24, 2014, at 1:41 PM, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi> wrote:
> 
> 
> Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:
> 
> 
>> 
>> 
>> Tom Beddard <tom <at> subblue.com> writes:
>> 
>> 
>> 
>> 
>>> Can anyone else confirm this behaviour when extracting contours from
>>> 
>>> 
>>> merged SRTM tiles?
>> 
>> 
>> 
> 
> Can you check this command, it is perhaps not that you actually used:
> gdal_contour -a elev -snodata 32767 -i uk-3785.tif uk-contour.shp
> 
> 
> My GDAL gives FAILURE: Neither -i nor -fl are specified.
> With -i 100 I have managed to run your commands. Result was 620 MB shapefile
> with 135020 linestrings and it took several minutes to run it but it worked
> for me.
> 
> 
> -Jukka Rahkonen-
> 
> 
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140324/9963c563/attachment.html>

From jukka.rahkonen at mmmtike.fi  Mon Mar 24 07:51:21 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 24 Mar 2014 14:51:21 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Problem_using_gdal=5Fcontour_after_gdal=5Fme?=
	=?utf-8?q?rge=2Epy?=
References: <8AC42356-3518-44EE-9EE9-520E2DE00999@subblue.com>
	<lgltkb$f5j$1@ger.gmane.org>
	<B34FD530-D303-4037-A50B-3C2EFDB8EF56@subblue.com>
	<loom.20140324T124257-577@post.gmane.org>
	<loom.20140324T143013-843@post.gmane.org>
	<4A5A4DF5-D068-4F04-9520-1F096E6C22BD@subblue.com>
Message-ID: <loom.20140324T151940-663@post.gmane.org>

Tom Beddard <tom <at> subblue.com> writes:

> 
> 
> I do specify -i 20 in my scripts (that was a typo just in my original
email). Does it still work ok for you with an interval of 20 instead of 100?

I stopped the test because it was so slow and would probably stopped because
of too big shp filesize.

You must start to study the problem systematically. I took some first steps

E:\demkoe>gdal_contour -a elev -i 20 srtm_36_01.tif small.shp 
E:\demkoe>ogrinfo -al -so small.shp
...
Layer name: small
Geometry: Line String
Feature Count: 44895

Feature Count for srtm_36_01.tif is 73291.

Thus 118186 linestrings are needed for the contour lines of those to
originals. However, it looks like for making the 20 m contour lines from the
merged image creates much much more contour lines. Your challange is to find
out why. I guess I would start by thinking about the nodata values. You use
parameter -snodata 32767 

However, if I run gdalinfo -hist for the merged file I can see
Band 1 Block=6001x1 Type=Int16, ColorInterp=Gray
Min=-32768.000 Max=1309.000

Looks to me that your nodata value does not exist in the data. Instead there
are 35118128 occasions of -32768. It may be that gdal_contour is creating
for you 20 m contours starting from 32 kilometers below the sea level. Do
all the steps one by one first without mosaic, check the statistics and
histogram, open the shapefile with QGIS for visual check and think if the
result is correct.

I an not sure it bilinear sampling can make troubles. Probably nearest would
give about the same end result but you can test that also. Do not change
anything else when making comparisons. Good luck for your experiments.

-Jukka-




From tom at subblue.com  Mon Mar 24 10:30:54 2014
From: tom at subblue.com (Tom Beddard)
Date: Mon, 24 Mar 2014 10:30:54 -0700 (PDT)
Subject: [gdal-dev] Problem using gdal_contour after gdal_merge.py
In-Reply-To: <loom.20140324T151940-663@post.gmane.org>
References: <8AC42356-3518-44EE-9EE9-520E2DE00999@subblue.com>
	<lgltkb$f5j$1@ger.gmane.org>
	<B34FD530-D303-4037-A50B-3C2EFDB8EF56@subblue.com>
	<loom.20140324T124257-577@post.gmane.org>
	<loom.20140324T143013-843@post.gmane.org>
	<4A5A4DF5-D068-4F04-9520-1F096E6C22BD@subblue.com>
	<loom.20140324T151940-663@post.gmane.org>
Message-ID: <EB04F9BA-E8FC-4FC7-98D1-B2D9DBE1A000@subblue.com>

Thanks Jukka.
Good to know about gdalinfo -hist ?as you said the problem was the incorrect setting for the nodata value.?
I was using 32767 as suggested in various wikis, but instead now it works as expected by changing the command to:
gdal_contour -a elev -snodata "-32768" -i src.tif contour.shp

Could this be an issue with how OSX is interpreting the numbers verses Windows or Linux?


I?m also now generating the contours and then reprojecting the shape file to EPSG:900913 using ogr2gor
For those interested my updated script to automate this is now:
https://gist.github.com/subblue/9705999




Thanks very much for your help!
Tom









> On Mar 24, 2014, at 2:51 PM, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi> wrote:
> 
> 
> Tom Beddard <tom <at> subblue.com> writes:
> 
> 
>> 
>> 
>> 
>> 
>> I do specify -i 20 in my scripts (that was a typo just in my original
>> 
>> 
>> email). Does it still work ok for you with an interval of 20 instead of 100?
> 
> 
> I stopped the test because it was so slow and would probably stopped because
> of too big shp filesize.
> 
> 
> You must start to study the problem systematically. I took some first steps
> 
> 
> E:\demkoe>gdal_contour -a elev -i 20 srtm_36_01.tif small.shp
> E:\demkoe>ogrinfo -al -so small.shp
> ...
> Layer name: small
> Geometry: Line String
> Feature Count: 44895
> 
> 
> Feature Count for srtm_36_01.tif is 73291.
> 
> 
> Thus 118186 linestrings are needed for the contour lines of those to
> originals. However, it looks like for making the 20 m contour lines from the
> merged image creates much much more contour lines. Your challange is to find
> out why. I guess I would start by thinking about the nodata values. You use
> parameter -snodata 32767
> 
> 
> However, if I run gdalinfo -hist for the merged file I can see
> Band 1 Block=6001x1 Type=Int16, ColorInterp=Gray
> Min=-32768.000 Max=1309.000
> 
> 
> Looks to me that your nodata value does not exist in the data. Instead there
> are 35118128 occasions of -32768. It may be that gdal_contour is creating
> for you 20 m contours starting from 32 kilometers below the sea level. Do
> all the steps one by one first without mosaic, check the statistics and
> histogram, open the shapefile with QGIS for visual check and think if the
> result is correct.
> 
> 
> I an not sure it bilinear sampling can make troubles. Probably nearest would
> give about the same end result but you can test that also. Do not change
> anything else when making comparisons. Good luck for your experiments.
> 
> 
> -Jukka-
> 
> 
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140324/81cc882b/attachment-0001.html>

From jed.kaplan at unil.ch  Mon Mar 24 11:42:28 2014
From: jed.kaplan at unil.ch (Jed O. Kaplan)
Date: Mon, 24 Mar 2014 19:42:28 +0100
Subject: [gdal-dev] "Times" projection in GDAL
Message-ID: <580CF31B-1F9B-4742-983A-7B1EC320A0E4@unil.ch>

Dear GDAL gurus,

I have some scanned maps in the ?Times" projection that I would like to orthorectify using gdalwarp and other GDAL tools. It appears that this projection is not supported in the version of proj4/GDAL that I have, though it seems to be included in most ESRI software (http://help.arcgis.com/en/arcgisdesktop/10.0/help/index.html#//003r00000045000000).

Would anyone happen to know of free software I could use to rectify scanned maps in the Times projection? Alternatively, I could try programming the projection into proj4 myself, though I?ve never done this before. Snyder provides the formulas for the forward projection in his book ?Flattening the Earth??  (pg. 213). If I would program a new projection in proj4, are there particular issues I need to be aware of?

Many thanks in advance for your help!

Jed Kaplan


From bishop.dev at gmail.com  Mon Mar 24 12:38:14 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Mon, 24 Mar 2014 23:38:14 +0400
Subject: [gdal-dev] "Times" projection in GDAL
In-Reply-To: <580CF31B-1F9B-4742-983A-7B1EC320A0E4@unil.ch>
References: <580CF31B-1F9B-4742-983A-7B1EC320A0E4@unil.ch>
Message-ID: <533089A6.2080502@gmail.com>

Hi Jed,

I'm look for this projection on spatialreference.org. I found this one: 
http://spatialreference.org/ref/sr-org/7670/
Does this one the same or close to the ESRI one?

Best regards,
     Dmitry

24.03.2014 22:42, Jed O. Kaplan ?????:
> Dear GDAL gurus,
>
> I have some scanned maps in the ?Times" projection that I would like to orthorectify using gdalwarp and other GDAL tools. It appears that this projection is not supported in the version of proj4/GDAL that I have, though it seems to be included in most ESRI software (http://help.arcgis.com/en/arcgisdesktop/10.0/help/index.html#//003r00000045000000).
>
> Would anyone happen to know of free software I could use to rectify scanned maps in the Times projection? Alternatively, I could try programming the projection into proj4 myself, though I?ve never done this before. Snyder provides the formulas for the forward projection in his book ?Flattening the Earth??  (pg. 213). If I would program a new projection in proj4, are there particular issues I need to be aware of?
>
> Many thanks in advance for your help!
>
> Jed Kaplan
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


From even.rouault at mines-paris.org  Mon Mar 24 13:46:53 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 24 Mar 2014 21:46:53 +0100
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
Message-ID: <1395694013.533099bdba7cb@imp.free.fr>

Hi,

"Release soon, release early", so for people who like UML diagrams (there is
also a prototype of C++ classes for those who don't like UML very much), here's
a blog entry with the outcome of my thoughts for a possible re-organisation of
the GDAL/OGR class hierarchy

http://erouault.blogspot.ca/2014/03/draft-gdalogr-class-hierarchy-for-gdal.html

Comments, suggestions, ideas greatly welcome. It is really a challenge to revamp
the class hierarchy while avoiding to touch every existing driver in a
non-automated way.

Even

From jed.kaplan at unil.ch  Mon Mar 24 16:01:23 2014
From: jed.kaplan at unil.ch (Jed O. Kaplan)
Date: Tue, 25 Mar 2014 00:01:23 +0100
Subject: [gdal-dev] "Times" projection in GDAL
In-Reply-To: <533089A6.2080502@gmail.com>
References: <580CF31B-1F9B-4742-983A-7B1EC320A0E4@unil.ch>
	<533089A6.2080502@gmail.com>
Message-ID: <B73951F2-3C13-4DA0-A618-3B97BDB01BD3@unil.ch>

Dear Dmitriy,

Yes that is the correct projection code, but the problem is - and hence my original question - that the ?Times? projection referred to on the link you sent me is not defined in proj4. I?m wondering if anyone has programmed it, or if someone would be so kind as to assist me in making my own code for a new map projection for proj4.

Many thanks again,

Jed Kaplan

On 24 Mar 2014, at 20:38, Dmitriy Baryshnikov <bishop.dev at gmail.com> wrote:

> Hi Jed,
> 
> I'm look for this projection on spatialreference.org. I found this one: http://spatialreference.org/ref/sr-org/7670/
> Does this one the same or close to the ESRI one?
> 
> Best regards,
>    Dmitry
> 
> 24.03.2014 22:42, Jed O. Kaplan ?????:
>> Dear GDAL gurus,
>> 
>> I have some scanned maps in the ?Times" projection that I would like to orthorectify using gdalwarp and other GDAL tools. It appears that this projection is not supported in the version of proj4/GDAL that I have, though it seems to be included in most ESRI software (http://help.arcgis.com/en/arcgisdesktop/10.0/help/index.html#//003r00000045000000).
>> 
>> Would anyone happen to know of free software I could use to rectify scanned maps in the Times projection? Alternatively, I could try programming the projection into proj4 myself, though I?ve never done this before. Snyder provides the formulas for the forward projection in his book ?Flattening the Earth??  (pg. 213). If I would program a new projection in proj4, are there particular issues I need to be aware of?
>> 
>> Many thanks in advance for your help!
>> 
>> Jed Kaplan
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jrepetto at free.fr  Tue Mar 25 00:35:53 2014
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue, 25 Mar 2014 08:35:53 +0100
Subject: [gdal-dev] "Times" projection in GDAL
In-Reply-To: <B73951F2-3C13-4DA0-A618-3B97BDB01BD3@unil.ch>
References: <580CF31B-1F9B-4742-983A-7B1EC320A0E4@unil.ch>	<533089A6.2080502@gmail.com>
	<B73951F2-3C13-4DA0-A618-3B97BDB01BD3@unil.ch>
Message-ID: <533131D9.5040508@free.fr>

On 25/03/2014 00:01, Jed O. Kaplan wrote:
> Dear Dmitriy,
>
> Yes that is the correct projection code, but the problem is - and hence my original question - that the ?Times? projection referred to on the link you sent me is not defined in proj4. I?m wondering if anyone has programmed it, or if someone would be so kind as to assist me in making my own code for a new map projection for proj4.
>
> Many thanks again,
>
> Jed Kaplan

Hi
I think you are on the wrong mailing list. Have you tried to post a 
message on the proj4 ML ?

Jean-Claude



From bishop.dev at gmail.com  Tue Mar 25 01:04:35 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Tue, 25 Mar 2014 12:04:35 +0400
Subject: [gdal-dev] "Times" projection in GDAL
In-Reply-To: <B73951F2-3C13-4DA0-A618-3B97BDB01BD3@unil.ch>
References: <580CF31B-1F9B-4742-983A-7B1EC320A0E4@unil.ch>
	<533089A6.2080502@gmail.com>
	<B73951F2-3C13-4DA0-A618-3B97BDB01BD3@unil.ch>
Message-ID: <53313893.7010400@gmail.com>

Hi Jed,

I look at GDAL sources. The Times projection is supported in GDAL/OGR. 
For example, you can user ESRI prj file as input parameter (s_srs, 
t_srs). for gdalwarp/gdal_translate.

Best regards,
     Dmitry

25.03.2014 3:01, Jed O. Kaplan ?????:
> Dear Dmitriy,
>
> Yes that is the correct projection code, but the problem is - and hence my original question - that the ?Times? projection referred to on the link you sent me is not defined in proj4. I?m wondering if anyone has programmed it, or if someone would be so kind as to assist me in making my own code for a new map projection for proj4.
>
> Many thanks again,
>
> Jed Kaplan
>
> On 24 Mar 2014, at 20:38, Dmitriy Baryshnikov <bishop.dev at gmail.com> wrote:
>
>> Hi Jed,
>>
>> I'm look for this projection on spatialreference.org. I found this one: http://spatialreference.org/ref/sr-org/7670/
>> Does this one the same or close to the ESRI one?
>>
>> Best regards,
>>     Dmitry
>>
>> 24.03.2014 22:42, Jed O. Kaplan ?????:
>>> Dear GDAL gurus,
>>>
>>> I have some scanned maps in the ?Times" projection that I would like to orthorectify using gdalwarp and other GDAL tools. It appears that this projection is not supported in the version of proj4/GDAL that I have, though it seems to be included in most ESRI software (http://help.arcgis.com/en/arcgisdesktop/10.0/help/index.html#//003r00000045000000).
>>>
>>> Would anyone happen to know of free software I could use to rectify scanned maps in the Times projection? Alternatively, I could try programming the projection into proj4 myself, though I?ve never done this before. Snyder provides the formulas for the forward projection in his book ?Flattening the Earth??  (pg. 213). If I would program a new projection in proj4, are there particular issues I need to be aware of?
>>>
>>> Many thanks in advance for your help!
>>>
>>> Jed Kaplan
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


From even.rouault at mines-paris.org  Tue Mar 25 01:35:05 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 25 Mar 2014 09:35:05 +0100
Subject: [gdal-dev] "Times" projection in GDAL
In-Reply-To: <53313893.7010400@gmail.com>
References: <580CF31B-1F9B-4742-983A-7B1EC320A0E4@unil.ch>
	<533089A6.2080502@gmail.com>
	<B73951F2-3C13-4DA0-A618-3B97BDB01BD3@unil.ch>
	<53313893.7010400@gmail.com>
Message-ID: <1395736505.53313fb9d5494@imp.free.fr>

Dmitriy,

where did you find reference to the "times" projection in OGR ? I can't find it.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html


Selon Dmitriy Baryshnikov <bishop.dev at gmail.com>:

> Hi Jed,
>
> I look at GDAL sources. The Times projection is supported in GDAL/OGR.
> For example, you can user ESRI prj file as input parameter (s_srs,
> t_srs). for gdalwarp/gdal_translate.
>
> Best regards,
>      Dmitry
>
> 25.03.2014 3:01, Jed O. Kaplan ??????????:
> > Dear Dmitriy,
> >
> > Yes that is the correct projection code, but the problem is - and hence my
> original question - that the ???Times??? projection referred to on the link
> you sent me is not defined in proj4. I???m wondering if anyone has programmed
> it, or if someone would be so kind as to assist me in making my own code for
> a new map projection for proj4.
> >
> > Many thanks again,
> >
> > Jed Kaplan
> >
> > On 24 Mar 2014, at 20:38, Dmitriy Baryshnikov <bishop.dev at gmail.com> wrote:
> >
> >> Hi Jed,
> >>
> >> I'm look for this projection on spatialreference.org. I found this one:
> http://spatialreference.org/ref/sr-org/7670/
> >> Does this one the same or close to the ESRI one?
> >>
> >> Best regards,
> >>     Dmitry
> >>
> >> 24.03.2014 22:42, Jed O. Kaplan ??????????:
> >>> Dear GDAL gurus,
> >>>
> >>> I have some scanned maps in the ???Times" projection that I would like to
> orthorectify using gdalwarp and other GDAL tools. It appears that this
> projection is not supported in the version of proj4/GDAL that I have, though
> it seems to be included in most ESRI software
>
(http://help.arcgis.com/en/arcgisdesktop/10.0/help/index.html#//003r00000045000000).
> >>>
> >>> Would anyone happen to know of free software I could use to rectify
> scanned maps in the Times projection? Alternatively, I could try programming
> the projection into proj4 myself, though I???ve never done this before.
> Snyder provides the formulas for the forward projection in his book
> ???Flattening the Earth??????  (pg. 213). If I would program a new projection
> in proj4, are there particular issues I need to be aware of?
> >>>
> >>> Many thanks in advance for your help!
> >>>
> >>> Jed Kaplan
> >>>
> >>> _______________________________________________
> >>> gdal-dev mailing list
> >>> gdal-dev at lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>>
> >>>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From even.rouault at mines-paris.org  Tue Mar 25 01:46:06 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 25 Mar 2014 09:46:06 +0100
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <1395694013.533099bdba7cb@imp.free.fr>
References: <1395694013.533099bdba7cb@imp.free.fr>
Message-ID: <1395737166.5331424e308c3@imp.free.fr>

Hi,

answering some questions from Dmitry in the comment of
http://erouault.blogspot.ca/2014/03/draft-gdalogr-class-hierarchy-for-gdal.html#comment-form
:

> A few questions:
> 1) Why the need GDALAbstractXXXDataset and GDALEmptyXXXDataset? May be
Abstract will be enouth?

--> The AbstractXXX has the actual code of current GDALDataset or OGRDataSource
that is needed for real implementations. Whereas EmptyXXXX is used to provide a
null implementation of the raster or vector interface for drivers that are
raster of vector only, but that need to expose both interfaces for the
consistance of the unification.

> 2) There is some therminology problem GDALIMajorObject and GDALMajorObject.

Well, the first one is the interface and the other one is the implementation.
The idea is that the 3 classes GDALRasterDataset (raster only),
GDALVectorDataset (vector only) and GDALDataset (raster and vector) can be seen
as MajorObject.

> 3) The metadata may be on dataset level and band/layer level. So it maybe to
do GDALMajorDataset for datasets and GDALMajorLayer for band/layer?

Not sure to follow what you meant.

Even

> Hi,
>
> "Release soon, release early", so for people who like UML diagrams (there is
> also a prototype of C++ classes for those who don't like UML very much),
> here's
> a blog entry with the outcome of my thoughts for a possible re-organisation
> of
> the GDAL/OGR class hierarchy
>
>
http://erouault.blogspot.ca/2014/03/draft-gdalogr-class-hierarchy-for-gdal.html
>
> Comments, suggestions, ideas greatly welcome. It is really a challenge to
> revamp
> the class hierarchy while avoiding to touch every existing driver in a
> non-automated way.
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From vincent.mora at oslandia.com  Tue Mar 25 01:53:26 2014
From: vincent.mora at oslandia.com (Vincent Mora)
Date: Tue, 25 Mar 2014 09:53:26 +0100
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <1395694013.533099bdba7cb@imp.free.fr>
References: <1395694013.533099bdba7cb@imp.free.fr>
Message-ID: <53314406.7090903@oslandia.com>

On 24/03/2014 21:46, Even Rouault wrote:
> Hi,
>
> "Release soon, release early", so for people who like UML diagrams (there is
> also a prototype of C++ classes for those who don't like UML very much), here's
> a blog entry with the outcome of my thoughts for a possible re-organisation of
> the GDAL/OGR class hierarchy
>
> http://erouault.blogspot.ca/2014/03/draft-gdalogr-class-hierarchy-for-gdal.html
I don't understand the need for HandleRasterData() and HandleVectorData().

Isn't inheriting from GDALEmptyRasterDataset or GDALEmptyVectorDataset 
sufficient to convey the information that the class doesn't handle those 
kind of datasets.

A call to GetLayerCount()/GetRasterCount() from the class user is 
sufficient to say "no vector/raster data here", and a dynamic _cast to 
GDALEmptyVectorDataset/GDALEmptyRasterDataset is even clearer to me, so 
HandleRasterData()/HandleVectorData() would be a third way to tell the 
same thing.

Also I'm not sure about the names GDALAbstract* since those are partial 
implementations.

> Comments, suggestions, ideas greatly welcome. It is really a challenge to revamp
> the class hierarchy while avoiding to touch every existing driver in a
> non-automated way.
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From bishop.dev at gmail.com  Tue Mar 25 01:54:49 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Tue, 25 Mar 2014 12:54:49 +0400
Subject: [gdal-dev] "Times" projection in GDAL
In-Reply-To: <1395736505.53313fb9d5494@imp.free.fr>
References: <580CF31B-1F9B-4742-983A-7B1EC320A0E4@unil.ch>
	<533089A6.2080502@gmail.com>
	<B73951F2-3C13-4DA0-A618-3B97BDB01BD3@unil.ch>
	<53313893.7010400@gmail.com> <1395736505.53313fb9d5494@imp.free.fr>
Message-ID: <53314459.5000404@gmail.com>

Hi Even,

hfadataset.cpp near 3686 ln
else if( EQUAL(pszProjName, "Times") )
{
sPro.proNumber = EPRJ_TIMES;
sPro.proName = (char*) "Times";
sPro.proParams[4] = oSRS.GetProjParm(SRS_PP_CENTRAL_MERIDIAN)*D2R;
sPro.proParams[6] = oSRS.GetProjParm(SRS_PP_FALSE_EASTING);
sPro.proParams[7] = oSRS.GetProjParm(SRS_PP_FALSE_NORTHING);
}

also I try this code
OGRSpatialReference pSpaRef;
const char *pszWkt = 
"PROJCS[\"World_Times\",GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Times\"],PARAMETER[\"Central_Meridian\",0.0],UNIT[\"Meter\",1.0]]";
pSpaRef.importFromWkt((char **)&pszWkt);
char *pszPrtWKT = NULL;
pSpaRef.exportToPrettyWkt(&pszPrtWKT );
CPLFree(pszPrtWKT );

And OGRSpatialReference eat this WKT.

Best regards,
     Dmitry

25.03.2014 12:35, Even Rouault ?????:
> Dmitriy,
>
> where did you find reference to the "times" projection in OGR ? I can't find it.
>
> Even
>


From jed.kaplan at unil.ch  Tue Mar 25 02:43:00 2014
From: jed.kaplan at unil.ch (Jed O. Kaplan)
Date: Tue, 25 Mar 2014 10:43:00 +0100
Subject: [gdal-dev] "Times" projection in GDAL
In-Reply-To: <53314459.5000404@gmail.com>
References: <580CF31B-1F9B-4742-983A-7B1EC320A0E4@unil.ch>
	<533089A6.2080502@gmail.com>
	<B73951F2-3C13-4DA0-A618-3B97BDB01BD3@unil.ch>
	<53313893.7010400@gmail.com> <1395736505.53313fb9d5494@imp.free.fr>
	<53314459.5000404@gmail.com>
Message-ID: <52371167-4FD0-4AA6-841B-4E3C221C0C71@unil.ch>

Dear Dmitriy,

Thanks again for your reply. I think you are right, there is support in GDAL for the Times projection, but the projection itself needs to be defined in proj4 somehow. When I try to run ogr2ogr with a simple world coastline file and project it into the Times projection using the wkt you provided or something similar, I get the error message listed below. Using another projection, for example -t_srs EPSG:3395 works properly, so I don?t think this is a problem with my proj4 library.

I will take my question over to the proj4 list and see if anyone can help me to add a new projection.

Thanks again,

Jed

--

jkaplan at xsrv02:~/projections_test > ogr2ogr -f GMT -t_srs 7670.prj times ~/natural_earth_vector.sqlite ne_110m_coastline
ERROR 6: No translation for Times to PROJ.4 format is known.
ERROR 6: No translation for Times to PROJ.4 format is known.
Failed to create coordinate transformation between the
following coordinate systems.  This may be because they
are not transformable, or because projection services
(PROJ.4 DLL/.so) could not be loaded.
Source:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4326"]]
Target:
PROJCS["World_Times",
    GEOGCS["GCS_WGS_1984",
        DATUM["D_WGS_1984",
            SPHEROID["WGS_1984",6378137.0,298.257223563]],
        PRIMEM["Greenwich",0.0],
        UNIT["Degree",0.017453292519943295]],
    PROJECTION["Times"],
    PARAMETER["Central_Meridian",0.0],
    UNIT["Meter",1.0]]
ERROR 1: Terminating translation prematurely after failed
translation of layer ne_110m_coastline (use -skipfailures to skip errors)

--

On 25 Mar 2014, at 09:54, Dmitriy Baryshnikov <bishop.dev at gmail.com> wrote:

> Hi Even,
> 
> hfadataset.cpp near 3686 ln
> else if( EQUAL(pszProjName, "Times") )
> {
> sPro.proNumber = EPRJ_TIMES;
> sPro.proName = (char*) "Times";
> sPro.proParams[4] = oSRS.GetProjParm(SRS_PP_CENTRAL_MERIDIAN)*D2R;
> sPro.proParams[6] = oSRS.GetProjParm(SRS_PP_FALSE_EASTING);
> sPro.proParams[7] = oSRS.GetProjParm(SRS_PP_FALSE_NORTHING);
> }
> 
> also I try this code
> OGRSpatialReference pSpaRef;
> const char *pszWkt = "PROJCS[\"World_Times\",GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Times\"],PARAMETER[\"Central_Meridian\",0.0],UNIT[\"Meter\",1.0]]";
> pSpaRef.importFromWkt((char **)&pszWkt);
> char *pszPrtWKT = NULL;
> pSpaRef.exportToPrettyWkt(&pszPrtWKT );
> CPLFree(pszPrtWKT );
> 
> And OGRSpatialReference eat this WKT.
> 
> Best regards,
>    Dmitry
> 
> 25.03.2014 12:35, Even Rouault ?????:
>> Dmitriy,
>> 
>> where did you find reference to the "times" projection in OGR ? I can't find it.
>> 
>> Even
>> 
> 


From even.rouault at mines-paris.org  Tue Mar 25 03:44:50 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 25 Mar 2014 11:44:50 +0100
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <53314406.7090903@oslandia.com>
References: <1395694013.533099bdba7cb@imp.free.fr>
	<53314406.7090903@oslandia.com>
Message-ID: <1395744290.53315e2221801@imp.free.fr>

Selon Vincent Mora <vincent.mora at oslandia.com>:

> On 24/03/2014 21:46, Even Rouault wrote:
> > Hi,
> >
> > "Release soon, release early", so for people who like UML diagrams (there
> is
> > also a prototype of C++ classes for those who don't like UML very much),
> here's
> > a blog entry with the outcome of my thoughts for a possible re-organisation
> of
> > the GDAL/OGR class hierarchy
> >
> >
>
http://erouault.blogspot.ca/2014/03/draft-gdalogr-class-hierarchy-for-gdal.html
> I don't understand the need for HandleRasterData() and HandleVectorData().
>
> Isn't inheriting from GDALEmptyRasterDataset or GDALEmptyVectorDataset
> sufficient to convey the information that the class doesn't handle those
> kind of datasets.
>
> A call to GetLayerCount()/GetRasterCount() from the class user is
> sufficient to say "no vector/raster data here", and a dynamic _cast to
> GDALEmptyVectorDataset/GDALEmptyRasterDataset is even clearer to me, so
> HandleRasterData()/HandleVectorData() would be a third way to tell the
> same thing.

Actually, when thinking more about this, this kind of information should be at
the driver level, and not at the dataset level. The idea is that there are use
cases where you want to know if a driver can handle only vector, only raster, or
both. For example if you still want to have separate Open dialog boxes for
raster or vector.

>
> Also I'm not sure about the names GDALAbstract* since those are partial
> implementations.

I know I'm not very good at naming. Do you have an alternative proposal ? The
issue is that with my draft we end up with a lot of classes and interfaces, so
it is not obvious to find a good name to reflect their content.

Even


-- 
Geospatial professional services
http://even.rouault.free.fr/services.html



From even.rouault at mines-paris.org  Tue Mar 25 03:49:44 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 25 Mar 2014 11:49:44 +0100
Subject: [gdal-dev] "Times" projection in GDAL
In-Reply-To: <53314459.5000404@gmail.com>
References: <580CF31B-1F9B-4742-983A-7B1EC320A0E4@unil.ch>
	<533089A6.2080502@gmail.com>
	<B73951F2-3C13-4DA0-A618-3B97BDB01BD3@unil.ch>
	<53313893.7010400@gmail.com> <1395736505.53313fb9d5494@imp.free.fr>
	<53314459.5000404@gmail.com>
Message-ID: <1395744584.53315f48d8e7c@imp.free.fr>

Selon Dmitriy Baryshnikov <bishop.dev at gmail.com>:

> Hi Even,
>
> hfadataset.cpp near 3686 ln
> else if( EQUAL(pszProjName, "Times") )
> {
> sPro.proNumber = EPRJ_TIMES;
> sPro.proName = (char*) "Times";
> sPro.proParams[4] = oSRS.GetProjParm(SRS_PP_CENTRAL_MERIDIAN)*D2R;
> sPro.proParams[6] = oSRS.GetProjParm(SRS_PP_FALSE_EASTING);
> sPro.proParams[7] = oSRS.GetProjParm(SRS_PP_FALSE_NORTHING);
> }
>
> also I try this code
> OGRSpatialReference pSpaRef;
> const char *pszWkt =
>
"PROJCS[\"World_Times\",GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Times\"],PARAMETER[\"Central_Meridian\",0.0],UNIT[\"Meter\",1.0]]";
> pSpaRef.importFromWkt((char **)&pszWkt);
> char *pszPrtWKT = NULL;
> pSpaRef.exportToPrettyWkt(&pszPrtWKT );
> CPLFree(pszPrtWKT );
>
> And OGRSpatialReference eat this WKT.

Ah ok, well it is just that it is valid WKT. But we cannot really tell that GDAL
fully supports it currently. For example the Validate() method of
OGRSpatialReference would return FALSE since it doesn't know the Times
projection method, and which projection parameters are valid with it. And we
don't have a OGRSpatialReference.SetTimes() method. And not mentionning
importFromProj4/exportToProj4() (but we would need proj.4 support of it before
of course)

>
> Best regards,
>      Dmitry
>
> 25.03.2014 12:35, Even Rouault ??????????:
> > Dmitriy,
> >
> > where did you find reference to the "times" projection in OGR ? I can't
> find it.
> >
> > Even
> >
>
>



From bishop.dev at gmail.com  Tue Mar 25 04:38:58 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Tue, 25 Mar 2014 15:38:58 +0400
Subject: [gdal-dev] "Times" projection in GDAL
In-Reply-To: <1395744584.53315f48d8e7c@imp.free.fr>
References: <580CF31B-1F9B-4742-983A-7B1EC320A0E4@unil.ch>
	<533089A6.2080502@gmail.com>
	<B73951F2-3C13-4DA0-A618-3B97BDB01BD3@unil.ch>
	<53313893.7010400@gmail.com> <1395736505.53313fb9d5494@imp.free.fr>
	<53314459.5000404@gmail.com> <1395744584.53315f48d8e7c@imp.free.fr>
Message-ID: <53316AD2.5040005@gmail.com>

Ouch, sorry. I think that if HFA driver support this projection it's 
everything is OK.

Best regards,
     Dmitry

25.03.2014 14:49, Even Rouault ?????:
> Selon Dmitriy Baryshnikov <bishop.dev at gmail.com>:
>
>> Hi Even,
>>
>> hfadataset.cpp near 3686 ln
>> else if( EQUAL(pszProjName, "Times") )
>> {
>> sPro.proNumber = EPRJ_TIMES;
>> sPro.proName = (char*) "Times";
>> sPro.proParams[4] = oSRS.GetProjParm(SRS_PP_CENTRAL_MERIDIAN)*D2R;
>> sPro.proParams[6] = oSRS.GetProjParm(SRS_PP_FALSE_EASTING);
>> sPro.proParams[7] = oSRS.GetProjParm(SRS_PP_FALSE_NORTHING);
>> }
>>
>> also I try this code
>> OGRSpatialReference pSpaRef;
>> const char *pszWkt =
>>
> "PROJCS[\"World_Times\",GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Times\"],PARAMETER[\"Central_Meridian\",0.0],UNIT[\"Meter\",1.0]]";
>> pSpaRef.importFromWkt((char **)&pszWkt);
>> char *pszPrtWKT = NULL;
>> pSpaRef.exportToPrettyWkt(&pszPrtWKT );
>> CPLFree(pszPrtWKT );
>>
>> And OGRSpatialReference eat this WKT.
> Ah ok, well it is just that it is valid WKT. But we cannot really tell that GDAL
> fully supports it currently. For example the Validate() method of
> OGRSpatialReference would return FALSE since it doesn't know the Times
> projection method, and which projection parameters are valid with it. And we
> don't have a OGRSpatialReference.SetTimes() method. And not mentionning
> importFromProj4/exportToProj4() (but we would need proj.4 support of it before
> of course)
>
>> Best regards,
>>       Dmitry
>>
>> 25.03.2014 12:35, Even Rouault ??????????:
>>> Dmitriy,
>>>
>>> where did you find reference to the "times" projection in OGR ? I can't
>> find it.
>>> Even
>>>
>>
>
>
>


From vincent.mora at oslandia.com  Tue Mar 25 05:13:31 2014
From: vincent.mora at oslandia.com (Vincent Mora)
Date: Tue, 25 Mar 2014 13:13:31 +0100
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <1395744290.53315e2221801@imp.free.fr>
References: <1395694013.533099bdba7cb@imp.free.fr>
	<53314406.7090903@oslandia.com>
	<1395744290.53315e2221801@imp.free.fr>
Message-ID: <533172EB.9070107@oslandia.com>

On 25/03/2014 11:44, Even Rouault wrote:
> Selon Vincent Mora <vincent.mora at oslandia.com>:
>
>> On 24/03/2014 21:46, Even Rouault wrote:
>>> Hi,
>>>
>>> "Release soon, release early", so for people who like UML diagrams (there
>> is
>>> also a prototype of C++ classes for those who don't like UML very much),
>> here's
>>> a blog entry with the outcome of my thoughts for a possible re-organisation
>> of
>>> the GDAL/OGR class hierarchy
>>>
>>>
> http://erouault.blogspot.ca/2014/03/draft-gdalogr-class-hierarchy-for-gdal.html
>> I don't understand the need for HandleRasterData() and HandleVectorData().
>>
>> Isn't inheriting from GDALEmptyRasterDataset or GDALEmptyVectorDataset
>> sufficient to convey the information that the class doesn't handle those
>> kind of datasets.
>>
>> A call to GetLayerCount()/GetRasterCount() from the class user is
>> sufficient to say "no vector/raster data here", and a dynamic _cast to
>> GDALEmptyVectorDataset/GDALEmptyRasterDataset is even clearer to me, so
>> HandleRasterData()/HandleVectorData() would be a third way to tell the
>> same thing.
> Actually, when thinking more about this, this kind of information should be at
> the driver level, and not at the dataset level. The idea is that there are use
> cases where you want to know if a driver can handle only vector, only raster, or
> both. For example if you still want to have separate Open dialog boxes for
> raster or vector.
>> Also I'm not sure about the names GDALAbstract* since those are partial
>> implementations.
> I know I'm not very good at naming. Do you have an alternative proposal ? The
> issue is that with my draft we end up with a lot of classes and interfaces, so
> it is not obvious to find a good name to reflect their content.
Partial sound ok to me, but I not so good at naming  ?

Considering the number of classes, I gave it some thoughts this morning 
and, like Dmitry, thought of merging the Abtract (Partial) into the 
interface before realizing that, even if it works (you can overload de 
default function in Empty) it's a bit ugly and I ended up preferring 
your solution.

An altenative would be to have a Dataset with both aspects and provide 
three partial specialisations: one for vector (it will behave like empty 
raster) one for raster, and one for both. Code duplications could be 
avoided by implementing protected member functions in the Dataset class 
and simply calling them in the implementations of partial 
specialization. This solution avoid the diamond shaped inheritance 
diagram of hell :)

>   
> Even
>
>


From bishop.dev at gmail.com  Tue Mar 25 05:37:32 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Tue, 25 Mar 2014 16:37:32 +0400
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <533172EB.9070107@oslandia.com>
References: <1395694013.533099bdba7cb@imp.free.fr>	<53314406.7090903@oslandia.com>	<1395744290.53315e2221801@imp.free.fr>
	<533172EB.9070107@oslandia.com>
Message-ID: <5331788C.40502@gmail.com>

According to naming conventions I think, that pure interface classes 
should start with I (e.g. IGDALRasterDataset, IGDALVectorDataset).
For the Abstract class maybe such naming will sute:
GDALEmptyRasterDataset -> GDALRasterDataset
GDALAbstractRasterDataset -> GDALRasterDatasetBase
GDALIRasterDataset -> IGDALRasterDataset

Best regards,
     Dmitry

25.03.2014 16:13, Vincent Mora ?????:
> On 25/03/2014 11:44, Even Rouault wrote:
>> Selon Vincent Mora <vincent.mora at oslandia.com>:
>>
>>> On 24/03/2014 21:46, Even Rouault wrote:
>>>> Hi,
>>>>
>>>> "Release soon, release early", so for people who like UML diagrams 
>>>> (there
>>> is
>>>> also a prototype of C++ classes for those who don't like UML very 
>>>> much),
>>> here's
>>>> a blog entry with the outcome of my thoughts for a possible 
>>>> re-organisation
>>> of
>>>> the GDAL/OGR class hierarchy
>>>>
>>>>
>> http://erouault.blogspot.ca/2014/03/draft-gdalogr-class-hierarchy-for-gdal.html 
>>
>>> I don't understand the need for HandleRasterData() and 
>>> HandleVectorData().
>>>
>>> Isn't inheriting from GDALEmptyRasterDataset or GDALEmptyVectorDataset
>>> sufficient to convey the information that the class doesn't handle 
>>> those
>>> kind of datasets.
>>>
>>> A call to GetLayerCount()/GetRasterCount() from the class user is
>>> sufficient to say "no vector/raster data here", and a dynamic _cast to
>>> GDALEmptyVectorDataset/GDALEmptyRasterDataset is even clearer to me, so
>>> HandleRasterData()/HandleVectorData() would be a third way to tell the
>>> same thing.
>> Actually, when thinking more about this, this kind of information 
>> should be at
>> the driver level, and not at the dataset level. The idea is that 
>> there are use
>> cases where you want to know if a driver can handle only vector, only 
>> raster, or
>> both. For example if you still want to have separate Open dialog 
>> boxes for
>> raster or vector.
>>> Also I'm not sure about the names GDALAbstract* since those are partial
>>> implementations.
>> I know I'm not very good at naming. Do you have an alternative 
>> proposal ? The
>> issue is that with my draft we end up with a lot of classes and 
>> interfaces, so
>> it is not obvious to find a good name to reflect their content.
> Partial sound ok to me, but I not so good at naming ?
>
> Considering the number of classes, I gave it some thoughts this 
> morning and, like Dmitry, thought of merging the Abtract (Partial) 
> into the interface before realizing that, even if it works (you can 
> overload de default function in Empty) it's a bit ugly and I ended up 
> preferring your solution.
>
> An altenative would be to have a Dataset with both aspects and provide 
> three partial specialisations: one for vector (it will behave like 
> empty raster) one for raster, and one for both. Code duplications 
> could be avoided by implementing protected member functions in the 
> Dataset class and simply calling them in the implementations of 
> partial specialization. This solution avoid the diamond shaped 
> inheritance diagram of hell :)
>
>> Even
>>
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


From even.rouault at mines-paris.org  Tue Mar 25 06:30:01 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 25 Mar 2014 14:30:01 +0100
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <533172EB.9070107@oslandia.com>
References: <1395694013.533099bdba7cb@imp.free.fr>
	<53314406.7090903@oslandia.com>
	<1395744290.53315e2221801@imp.free.fr>
	<533172EB.9070107@oslandia.com>
Message-ID: <1395754201.533184d9d5b66@imp.free.fr>

Selon Vincent Mora <vincent.mora at oslandia.com>:

> On 25/03/2014 11:44, Even Rouault wrote:
> > Selon Vincent Mora <vincent.mora at oslandia.com>:
> >
> >> On 24/03/2014 21:46, Even Rouault wrote:
> >>> Hi,
> >>>
> >>> "Release soon, release early", so for people who like UML diagrams (there
> >> is
> >>> also a prototype of C++ classes for those who don't like UML very much),
> >> here's
> >>> a blog entry with the outcome of my thoughts for a possible
> re-organisation
> >> of
> >>> the GDAL/OGR class hierarchy
> >>>
> >>>
> >
>
http://erouault.blogspot.ca/2014/03/draft-gdalogr-class-hierarchy-for-gdal.html
> >> I don't understand the need for HandleRasterData() and HandleVectorData().
> >>
> >> Isn't inheriting from GDALEmptyRasterDataset or GDALEmptyVectorDataset
> >> sufficient to convey the information that the class doesn't handle those
> >> kind of datasets.
> >>
> >> A call to GetLayerCount()/GetRasterCount() from the class user is
> >> sufficient to say "no vector/raster data here", and a dynamic _cast to
> >> GDALEmptyVectorDataset/GDALEmptyRasterDataset is even clearer to me, so
> >> HandleRasterData()/HandleVectorData() would be a third way to tell the
> >> same thing.
> > Actually, when thinking more about this, this kind of information should be
> at
> > the driver level, and not at the dataset level. The idea is that there are
> use
> > cases where you want to know if a driver can handle only vector, only
> raster, or
> > both. For example if you still want to have separate Open dialog boxes for
> > raster or vector.
> >> Also I'm not sure about the names GDALAbstract* since those are partial
> >> implementations.
> > I know I'm not very good at naming. Do you have an alternative proposal ?
> The
> > issue is that with my draft we end up with a lot of classes and interfaces,
> so
> > it is not obvious to find a good name to reflect their content.
> Partial sound ok to me, but I not so good at naming  ?
>
> Considering the number of classes, I gave it some thoughts this morning
> and, like Dmitry, thought of merging the Abtract (Partial) into the
> interface before realizing that, even if it works (you can overload de
> default function in Empty) it's a bit ugly and I ended up preferring
> your solution.
>
> An altenative would be to have a Dataset with both aspects and provide
> three partial specialisations: one for vector (it will behave like empty
> raster) one for raster, and one for both. Code duplications could be
> avoided by implementing protected member functions in the Dataset class
> and simply calling them in the implementations of partial
> specialization. This solution avoid the diamond shaped inheritance
> diagram of hell :)

Actually the diamond shaped inheritance does not work at all (as I somehow
feared ;-)). I must have confused myself with how I would have done things in
Java, but in C++, I can't manage to do it... Here's a self-contained code that
does not compile : https://gist.github.com/rouault/9761494

I think I'm going to try something more plain and stupid. Just "import" methods
from OGRDataSource into GDALDataset, making OGRDataSource extends GDALDataset
and make that compile...

I'm not sure to have understood what you meant with "protected member functions
in the Dataset class and simply calling them in the implementations of partial
specialization". With an example it would be clearer to me.

>
> >
> > Even
> >
> >
>
>



From vincent.mora at oslandia.com  Tue Mar 25 07:26:35 2014
From: vincent.mora at oslandia.com (Vincent Mora)
Date: Tue, 25 Mar 2014 15:26:35 +0100
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <1395754201.533184d9d5b66@imp.free.fr>
References: <1395694013.533099bdba7cb@imp.free.fr>
	<53314406.7090903@oslandia.com>
	<1395744290.53315e2221801@imp.free.fr>
	<533172EB.9070107@oslandia.com>
	<1395754201.533184d9d5b66@imp.free.fr>
Message-ID: <5331921B.6090005@oslandia.com>


>> Partial sound ok to me, but I not so good at naming  ?
>>
>> Considering the number of classes, I gave it some thoughts this morning
>> and, like Dmitry, thought of merging the Abtract (Partial) into the
>> interface before realizing that, even if it works (you can overload de
>> default function in Empty) it's a bit ugly and I ended up preferring
>> your solution.
>>
>> An altenative would be to have a Dataset with both aspects and provide
>> three partial specialisations: one for vector (it will behave like empty
>> raster) one for raster, and one for both. Code duplications could be
>> avoided by implementing protected member functions in the Dataset class
>> and simply calling them in the implementations of partial
>> specialization. This solution avoid the diamond shaped inheritance
>> diagram of hell :)
> Actually the diamond shaped inheritance does not work at all (as I somehow
> feared ;-)). I must have confused myself with how I would have done things in
> Java, but in C++, I can't manage to do it... Here's a self-contained code that
> does not compile : https://gist.github.com/rouault/9761494
>
> I think I'm going to try something more plain and stupid. Just "import" methods
> from OGRDataSource into GDALDataset, making OGRDataSource extends GDALDataset
> and make that compile...
>
> I'm not sure to have understood what you meant with "protected member functions
> in the Dataset class and simply calling them in the implementations of partial
> specialization". With an example it would be clearer to me.
>
Sorry, I mixed up things, what I meant was pure virtual with 
implementation (see below).

(note: I use struct instead of class because it avoid repeating 'public' 
all the time)

struct IGDALDataset
{
     virtual int         HandleRasterData() = 0;
     virtual int         HandleVectorData() = 0;
};

int IGDALDataset::HandleVectorData()
{
     return true;
}

int IGDALDataset::HandleRasterData()
{
     return true;
}

struct GDALVectorDataset: IGDALDataset
{
     int HandleRasterData(){ return false; }
     int HandleVectorData(){ return IGDALDataset::HandleVectorData(); }
};

struct GDALRasterDataset: IGDALDataset
{
     int HandleRasterData(){ return IGDALDataset::HandleRasterData(); }
     int HandleVectorData(){ return false; }
};


struct GDALDataset: IGDALDataset
{
     int HandleRasterData(){ return IGDALDataset::HandleRasterData(); }
     int HandleVectorData(){ return IGDALDataset::HandleVectorData(); }
};






From mateusz at loskot.net  Tue Mar 25 08:47:28 2014
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Tue, 25 Mar 2014 15:47:28 +0000
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <5331788C.40502@gmail.com>
References: <1395694013.533099bdba7cb@imp.free.fr>
	<53314406.7090903@oslandia.com>
	<1395744290.53315e2221801@imp.free.fr> <533172EB.9070107@oslandia.com>
	<5331788C.40502@gmail.com>
Message-ID: <CABUeae88a1B0F7V8d8iFRLDDYxq-m9zOw0RVLE4AvsFSLrsK2Q@mail.gmail.com>

On 25 March 2014 12:37, Dmitriy Baryshnikov <bishop.dev at gmail.com> wrote:
> According to naming conventions I think, that pure interface classes should
> start with I (e.g. IGDALRasterDataset, IGDALVectorDataset).
> For the Abstract class maybe such naming will sute:
> GDALEmptyRasterDataset -> GDALRasterDataset
> GDALAbstractRasterDataset -> GDALRasterDatasetBase
> GDALIRasterDataset -> IGDALRasterDataset

namespace gdal {
class IRasterDataset;
class RasterDataset
class RasterDatasetBase;
}

Best regards,
-- 
Mateusz  ?oskot, http://mateusz.loskot.net

From etourigny.dev at gmail.com  Tue Mar 25 12:12:30 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 25 Mar 2014 16:12:30 -0300
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <533172EB.9070107@oslandia.com>
References: <1395694013.533099bdba7cb@imp.free.fr>
	<53314406.7090903@oslandia.com>
	<1395744290.53315e2221801@imp.free.fr>
	<533172EB.9070107@oslandia.com>
Message-ID: <CA+TxYvNW8RtxVN6NEn4oDsbWVw4YKZG5ZkAqnKnVzyyt1YFubw@mail.gmail.com>

I also (respectfully) think that there are too many classes (mostly the
abstract classes and interfaces) which make it a bit hard to understand.

I like Vincent's second suggestion to have 3 base Dataset classes
(GDALRasterDataset, GDALVectorDataset, GDALHybridDataset) which inherit
from GDALDataset, and an enum (vector,raster,hybrid) to easily query which
type the Dataset is (or which type its driver supports). You then subclass
the relevant Dataset class and it *should* work auto-magically for rasters.
 For example, a given Dataset which subclasses GDALDataset would be
migrated as  a subclass of GDALRasterDataset, which would imply that it
does not have a vector dataset. If the implementation changes to allow
vector, then you would change its parent and implement relevant vector
methods.

My view on this is KISS with a minimum number of classes...

cheers
Etienne



On Tue, Mar 25, 2014 at 9:13 AM, Vincent Mora <vincent.mora at oslandia.com>wrote:

> On 25/03/2014 11:44, Even Rouault wrote:
>
>> Selon Vincent Mora <vincent.mora at oslandia.com>:
>>
>>  On 24/03/2014 21:46, Even Rouault wrote:
>>>
>>>> Hi,
>>>>
>>>> "Release soon, release early", so for people who like UML diagrams
>>>> (there
>>>>
>>> is
>>>
>>>> also a prototype of C++ classes for those who don't like UML very much),
>>>>
>>> here's
>>>
>>>> a blog entry with the outcome of my thoughts for a possible
>>>> re-organisation
>>>>
>>> of
>>>
>>>> the GDAL/OGR class hierarchy
>>>>
>>>>
>>>>  http://erouault.blogspot.ca/2014/03/draft-gdalogr-class-
>> hierarchy-for-gdal.html
>>
>>> I don't understand the need for HandleRasterData() and
>>> HandleVectorData().
>>>
>>> Isn't inheriting from GDALEmptyRasterDataset or GDALEmptyVectorDataset
>>> sufficient to convey the information that the class doesn't handle those
>>> kind of datasets.
>>>
>>> A call to GetLayerCount()/GetRasterCount() from the class user is
>>> sufficient to say "no vector/raster data here", and a dynamic _cast to
>>> GDALEmptyVectorDataset/GDALEmptyRasterDataset is even clearer to me, so
>>> HandleRasterData()/HandleVectorData() would be a third way to tell the
>>> same thing.
>>>
>> Actually, when thinking more about this, this kind of information should
>> be at
>> the driver level, and not at the dataset level. The idea is that there
>> are use
>> cases where you want to know if a driver can handle only vector, only
>> raster, or
>> both. For example if you still want to have separate Open dialog boxes for
>> raster or vector.
>>
>>> Also I'm not sure about the names GDALAbstract* since those are partial
>>> implementations.
>>>
>> I know I'm not very good at naming. Do you have an alternative proposal ?
>> The
>> issue is that with my draft we end up with a lot of classes and
>> interfaces, so
>> it is not obvious to find a good name to reflect their content.
>>
> Partial sound ok to me, but I not so good at naming  ?
>
> Considering the number of classes, I gave it some thoughts this morning
> and, like Dmitry, thought of merging the Abtract (Partial) into the
> interface before realizing that, even if it works (you can overload de
> default function in Empty) it's a bit ugly and I ended up preferring your
> solution.
>
> An altenative would be to have a Dataset with both aspects and provide
> three partial specialisations: one for vector (it will behave like empty
> raster) one for raster, and one for both. Code duplications could be
> avoided by implementing protected member functions in the Dataset class and
> simply calling them in the implementations of partial specialization. This
> solution avoid the diamond shaped inheritance diagram of hell :)
>
>    Even
>>
>>
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140325/cb611b3f/attachment.html>

From even.rouault at mines-paris.org  Tue Mar 25 13:14:05 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 25 Mar 2014 21:14:05 +0100
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <CA+TxYvNW8RtxVN6NEn4oDsbWVw4YKZG5ZkAqnKnVzyyt1YFubw@mail.gmail.com>
References: <1395694013.533099bdba7cb@imp.free.fr>
	<53314406.7090903@oslandia.com>
	<1395744290.53315e2221801@imp.free.fr>
	<533172EB.9070107@oslandia.com>
	<CA+TxYvNW8RtxVN6NEn4oDsbWVw4YKZG5ZkAqnKnVzyyt1YFubw@mail.gmail.com>
Message-ID: <1395778445.5331e38da2d6a@imp.free.fr>

Selon Etienne Tourigny <etourigny.dev at gmail.com>:

> I also (respectfully) think that there are too many classes (mostly the
> abstract classes and interfaces) which make it a bit hard to understand.
>
> I like Vincent's second suggestion to have 3 base Dataset classes
> (GDALRasterDataset, GDALVectorDataset, GDALHybridDataset) which inherit
> from GDALDataset, and an enum (vector,raster,hybrid) to easily query which
> type the Dataset is (or which type its driver supports). You then subclass
> the relevant Dataset class and it *should* work auto-magically for rasters.
>  For example, a given Dataset which subclasses GDALDataset would be
> migrated as  a subclass of GDALRasterDataset, which would imply that it
> does not have a vector dataset. If the implementation changes to allow
> vector, then you would change its parent and implement relevant vector
> methods.
>
> My view on this is KISS with a minimum number of classes...

Yes, the practice shows that the UML brainstorming leads to nowhere (at least
with my current limited knowledge of C++ multi-inheritance)... So actually
instead of creating new classes, I think that eventually there will be less
classes... I'm not even sure about the interest of having subclasses of
GDALDataset to distinguish between raster only, vector only or raster+vector. As
I wrote previously that could be done as a driver metadata instread.

So, for now, I've just "imported" the usefull methods of OGRDataSource into
GDALDataset, and made a few changes here or there so that it works. Well except
ogr_refcount.py, because of a funny discovery was that the ref counting of
GDALDataset and OGRDataSource is (was) not the same. Starts at 1 for GDALDataset
and 0 for OGRDataSource...

The temporary result is in the following branch: 
https://github.com/rouault/gdal-1/commits/unification

OGRDataSource is kept with just that :

class CPL_DLL OGRDataSource : public GDALDataset
{
public:
                        OGRDataSource();

    virtual const char  *GetName() = 0;

    static void         DestroyDataSource( OGRDataSource * );

    OGRSFDriver        *GetOGRDriver() const;
    void                SetOGRDriver( OGRSFDriver *poDriver );
    virtual     const char* GetDriverName();

protected:
    friend class OGRSFDriverRegistrar;

    OGRSFDriver        *m_poOGRDriver;

};

And it could eventually completely disappear (or maybe just remain as a
convenience class if we don't want to touch existing drivers) if I manage to
merge OGRSFDriver into GDALDriver, and get rid of OGRSFDriverRegistrar.

Even

>
> cheers
> Etienne
>
>
>
> On Tue, Mar 25, 2014 at 9:13 AM, Vincent Mora
> <vincent.mora at oslandia.com>wrote:
>
> > On 25/03/2014 11:44, Even Rouault wrote:
> >
> >> Selon Vincent Mora <vincent.mora at oslandia.com>:
> >>
> >>  On 24/03/2014 21:46, Even Rouault wrote:
> >>>
> >>>> Hi,
> >>>>
> >>>> "Release soon, release early", so for people who like UML diagrams
> >>>> (there
> >>>>
> >>> is
> >>>
> >>>> also a prototype of C++ classes for those who don't like UML very much),
> >>>>
> >>> here's
> >>>
> >>>> a blog entry with the outcome of my thoughts for a possible
> >>>> re-organisation
> >>>>
> >>> of
> >>>
> >>>> the GDAL/OGR class hierarchy
> >>>>
> >>>>
> >>>>  http://erouault.blogspot.ca/2014/03/draft-gdalogr-class-
> >> hierarchy-for-gdal.html
> >>
> >>> I don't understand the need for HandleRasterData() and
> >>> HandleVectorData().
> >>>
> >>> Isn't inheriting from GDALEmptyRasterDataset or GDALEmptyVectorDataset
> >>> sufficient to convey the information that the class doesn't handle those
> >>> kind of datasets.
> >>>
> >>> A call to GetLayerCount()/GetRasterCount() from the class user is
> >>> sufficient to say "no vector/raster data here", and a dynamic _cast to
> >>> GDALEmptyVectorDataset/GDALEmptyRasterDataset is even clearer to me, so
> >>> HandleRasterData()/HandleVectorData() would be a third way to tell the
> >>> same thing.
> >>>
> >> Actually, when thinking more about this, this kind of information should
> >> be at
> >> the driver level, and not at the dataset level. The idea is that there
> >> are use
> >> cases where you want to know if a driver can handle only vector, only
> >> raster, or
> >> both. For example if you still want to have separate Open dialog boxes for
> >> raster or vector.
> >>
> >>> Also I'm not sure about the names GDALAbstract* since those are partial
> >>> implementations.
> >>>
> >> I know I'm not very good at naming. Do you have an alternative proposal ?
> >> The
> >> issue is that with my draft we end up with a lot of classes and
> >> interfaces, so
> >> it is not obvious to find a good name to reflect their content.
> >>
> > Partial sound ok to me, but I not so good at naming  ?
> >
> > Considering the number of classes, I gave it some thoughts this morning
> > and, like Dmitry, thought of merging the Abtract (Partial) into the
> > interface before realizing that, even if it works (you can overload de
> > default function in Empty) it's a bit ugly and I ended up preferring your
> > solution.
> >
> > An altenative would be to have a Dataset with both aspects and provide
> > three partial specialisations: one for vector (it will behave like empty
> > raster) one for raster, and one for both. Code duplications could be
> > avoided by implementing protected member functions in the Dataset class and
> > simply calling them in the implementations of partial specialization. This
> > solution avoid the diamond shaped inheritance diagram of hell :)
> >
> >    Even
> >>
> >>
> >>
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>



From even.rouault at mines-paris.org  Tue Mar 25 14:37:16 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 25 Mar 2014 22:37:16 +0100
Subject: [gdal-dev] GDAL 1.11 release plan
Message-ID: <1395783436.5331f70c554f1@imp.free.fr>

Hi,

GDAL 1.10 was released about one year ago, so it is time to think about the next
release. I think we should just call it 1.11 given that there are no major
architectural changes (although there have been non trivial changes in RAT
management and for multiple geometry field support, but that only impacts core &
drivers), and the C API and ABI is still preserved (for those who have looked at
the other thread, my experiments on unification are *not* in trunk). For the
details, I have initiated the preliminary NEWS :
http://trac.osgeo.org/gdal/export/27091/trunk/gdal/NEWS (*)
There are some mentions to 2.0 in the documentation of new features, but I'll
end up fixing them to reflect the 1.11 numbering.

I think we are in a good shape to start the beta phase soon. If people have
features or bug fixes almost ready that they'd like to be in 1.11, please speak
up now. Otherwise I suggest issuing a beta-1 at the end of next week, give it a
week for testing, and depending on the outcome, issue a beta-2, or just try
RC-1. Unless someone volunteers (the process is fairly well documented in
HOWTO-RELEASE), I can be release manager for 1.11.

Any opinion about that plan ?

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From szekerest at gmail.com  Tue Mar 25 14:57:34 2014
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue, 25 Mar 2014 22:57:34 +0100
Subject: [gdal-dev] GDAL 1.11 release plan
In-Reply-To: <1395783436.5331f70c554f1@imp.free.fr>
References: <1395783436.5331f70c554f1@imp.free.fr>
Message-ID: <CACALY+TqNLJCJNjJrU9bnnw2o7DVrZkgMOe+PtTyoR-_bHzXBA@mail.gmail.com>

That sounds good to me.

Best regards,

Tamas



2014-03-25 22:37 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:

> Hi,
>
> GDAL 1.10 was released about one year ago, so it is time to think about
> the next
> release. I think we should just call it 1.11 given that there are no major
> architectural changes (although there have been non trivial changes in RAT
> management and for multiple geometry field support, but that only impacts
> core &
> drivers), and the C API and ABI is still preserved (for those who have
> looked at
> the other thread, my experiments on unification are *not* in trunk). For
> the
> details, I have initiated the preliminary NEWS :
> http://trac.osgeo.org/gdal/export/27091/trunk/gdal/NEWS (*)
> There are some mentions to 2.0 in the documentation of new features, but
> I'll
> end up fixing them to reflect the 1.11 numbering.
>
> I think we are in a good shape to start the beta phase soon. If people have
> features or bug fixes almost ready that they'd like to be in 1.11, please
> speak
> up now. Otherwise I suggest issuing a beta-1 at the end of next week, give
> it a
> week for testing, and depending on the outcome, issue a beta-2, or just try
> RC-1. Unless someone volunteers (the process is fairly well documented in
> HOWTO-RELEASE), I can be release manager for 1.11.
>
> Any opinion about that plan ?
>
> Best regards,
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140325/8990ecd9/attachment.html>

From bishop.dev at gmail.com  Tue Mar 25 15:21:32 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Wed, 26 Mar 2014 02:21:32 +0400
Subject: [gdal-dev] GDAL 1.11 release plan
In-Reply-To: <CACALY+TqNLJCJNjJrU9bnnw2o7DVrZkgMOe+PtTyoR-_bHzXBA@mail.gmail.com>
References: <1395783436.5331f70c554f1@imp.free.fr>
	<CACALY+TqNLJCJNjJrU9bnnw2o7DVrZkgMOe+PtTyoR-_bHzXBA@mail.gmail.com>
Message-ID: <5332016C.6000405@gmail.com>

Good plan!

Best regards,
     Dmitry

26.03.2014 1:57, Tamas Szekeres ?????:
> That sounds good to me.
> Best regards,
> Tamas
>
>
> 2014-03-25 22:37 GMT+01:00 Even Rouault <even.rouault at mines-paris.org 
> <mailto:even.rouault at mines-paris.org>>:
>
>     Hi,
>
>     GDAL 1.10 was released about one year ago, so it is time to think
>     about the next
>     release. I think we should just call it 1.11 given that there are
>     no major
>     architectural changes (although there have been non trivial
>     changes in RAT
>     management and for multiple geometry field support, but that only
>     impacts core &
>     drivers), and the C API and ABI is still preserved (for those who
>     have looked at
>     the other thread, my experiments on unification are *not* in
>     trunk). For the
>     details, I have initiated the preliminary NEWS :
>     http://trac.osgeo.org/gdal/export/27091/trunk/gdal/NEWS (*)
>     There are some mentions to 2.0 in the documentation of new
>     features, but I'll
>     end up fixing them to reflect the 1.11 numbering.
>
>     I think we are in a good shape to start the beta phase soon. If
>     people have
>     features or bug fixes almost ready that they'd like to be in 1.11,
>     please speak
>     up now. Otherwise I suggest issuing a beta-1 at the end of next
>     week, give it a
>     week for testing, and depending on the outcome, issue a beta-2, or
>     just try
>     RC-1. Unless someone volunteers (the process is fairly well
>     documented in
>     HOWTO-RELEASE), I can be release manager for 1.11.
>
>     Any opinion about that plan ?
>
>     Best regards,
>
>     Even
>
>     --
>     Geospatial professional services
>     http://even.rouault.free.fr/services.html
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140326/aa81d55c/attachment-0001.html>

From lhomme.xavier at gmail.com  Tue Mar 25 22:25:46 2014
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Wed, 26 Mar 2014 06:25:46 +0100
Subject: [gdal-dev] GDAL 1.11 release plan
In-Reply-To: <CACALY+TqNLJCJNjJrU9bnnw2o7DVrZkgMOe+PtTyoR-_bHzXBA@mail.gmail.com>
References: <1395783436.5331f70c554f1@imp.free.fr>
	<CACALY+TqNLJCJNjJrU9bnnw2o7DVrZkgMOe+PtTyoR-_bHzXBA@mail.gmail.com>
Message-ID: <CACqzBMyvTt12JbUZh+-aVP4=6ujGvZJPjpm+5DsrngQKDSGmyA@mail.gmail.com>

Hi
  Adding Visual Studio 2012 2013 in GISInternals for Gdal 1.11 should be
great too.
Xav
Le 25 mars 2014 22:57, "Tamas Szekeres" <szekerest at gmail.com> a ?crit :

> That sounds good to me.
>
> Best regards,
>
> Tamas
>
>
>
> 2014-03-25 22:37 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:
>
>> Hi,
>>
>> GDAL 1.10 was released about one year ago, so it is time to think about
>> the next
>> release. I think we should just call it 1.11 given that there are no major
>> architectural changes (although there have been non trivial changes in RAT
>> management and for multiple geometry field support, but that only impacts
>> core &
>> drivers), and the C API and ABI is still preserved (for those who have
>> looked at
>> the other thread, my experiments on unification are *not* in trunk). For
>> the
>> details, I have initiated the preliminary NEWS :
>> http://trac.osgeo.org/gdal/export/27091/trunk/gdal/NEWS (*)
>> There are some mentions to 2.0 in the documentation of new features, but
>> I'll
>> end up fixing them to reflect the 1.11 numbering.
>>
>> I think we are in a good shape to start the beta phase soon. If people
>> have
>> features or bug fixes almost ready that they'd like to be in 1.11, please
>> speak
>> up now. Otherwise I suggest issuing a beta-1 at the end of next week,
>> give it a
>> week for testing, and depending on the outcome, issue a beta-2, or just
>> try
>> RC-1. Unless someone volunteers (the process is fairly well documented in
>> HOWTO-RELEASE), I can be release manager for 1.11.
>>
>> Any opinion about that plan ?
>>
>> Best regards,
>>
>> Even
>>
>> --
>> Geospatial professional services
>> http://even.rouault.free.fr/services.html
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140326/21a85fd4/attachment.html>

From bontepaarden at gmail.com  Wed Mar 26 00:49:45 2014
From: bontepaarden at gmail.com (Paul Meems)
Date: Wed, 26 Mar 2014 08:49:45 +0100
Subject: [gdal-dev] GDAL 1.11 release plan
In-Reply-To: <CACqzBMyvTt12JbUZh+-aVP4=6ujGvZJPjpm+5DsrngQKDSGmyA@mail.gmail.com>
References: <1395783436.5331f70c554f1@imp.free.fr>
	<CACALY+TqNLJCJNjJrU9bnnw2o7DVrZkgMOe+PtTyoR-_bHzXBA@mail.gmail.com>
	<CACqzBMyvTt12JbUZh+-aVP4=6ujGvZJPjpm+5DsrngQKDSGmyA@mail.gmail.com>
Message-ID: <CAHNf2YSwPytnxKWkAvc210hs3LEV=hvFN6KSvMzjmzV=95i4hQ@mail.gmail.com>

+1 for adding VS2013 binaries in GISInternals

Thanks,

Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl



*Join us at the MapWindow GIS Conference 2014
<http://geogis.detek.unideb.hu/TKonferencia/2014/>, in Debrecen Hungary*


2014-03-26 6:25 GMT+01:00 xavier lhomme <lhomme.xavier at gmail.com>:

> Hi
>   Adding Visual Studio 2012 2013 in GISInternals for Gdal 1.11 should be
> great too.
> Xav
> Le 25 mars 2014 22:57, "Tamas Szekeres" <szekerest at gmail.com> a ?crit :
>
> That sounds good to me.
>>
>> Best regards,
>>
>> Tamas
>>
>>
>>
>> 2014-03-25 22:37 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:
>>
>>> Hi,
>>>
>>> GDAL 1.10 was released about one year ago, so it is time to think about
>>> the next
>>> release. I think we should just call it 1.11 given that there are no
>>> major
>>> architectural changes (although there have been non trivial changes in
>>> RAT
>>> management and for multiple geometry field support, but that only
>>> impacts core &
>>> drivers), and the C API and ABI is still preserved (for those who have
>>> looked at
>>> the other thread, my experiments on unification are *not* in trunk). For
>>> the
>>> details, I have initiated the preliminary NEWS :
>>> http://trac.osgeo.org/gdal/export/27091/trunk/gdal/NEWS (*)
>>> There are some mentions to 2.0 in the documentation of new features, but
>>> I'll
>>> end up fixing them to reflect the 1.11 numbering.
>>>
>>> I think we are in a good shape to start the beta phase soon. If people
>>> have
>>> features or bug fixes almost ready that they'd like to be in 1.11,
>>> please speak
>>> up now. Otherwise I suggest issuing a beta-1 at the end of next week,
>>> give it a
>>> week for testing, and depending on the outcome, issue a beta-2, or just
>>> try
>>> RC-1. Unless someone volunteers (the process is fairly well documented in
>>> HOWTO-RELEASE), I can be release manager for 1.11.
>>>
>>> Any opinion about that plan ?
>>>
>>> Best regards,
>>>
>>> Even
>>>
>>> --
>>> Geospatial professional services
>>> http://even.rouault.free.fr/services.html
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140326/b16e3dac/attachment.html>

From barthelemy at geovariances.com  Wed Mar 26 00:56:10 2014
From: barthelemy at geovariances.com (Olivier BARTHELEMY)
Date: Wed, 26 Mar 2014 08:56:10 +0100
Subject: [gdal-dev] GDAL 1.11 release plan
In-Reply-To: <CAHNf2YSwPytnxKWkAvc210hs3LEV=hvFN6KSvMzjmzV=95i4hQ@mail.gmail.com>
References: <1395783436.5331f70c554f1@imp.free.fr>
	<CACALY+TqNLJCJNjJrU9bnnw2o7DVrZkgMOe+PtTyoR-_bHzXBA@mail.gmail.com>
	<CACqzBMyvTt12JbUZh+-aVP4=6ujGvZJPjpm+5DsrngQKDSGmyA@mail.gmail.com>
	<CAHNf2YSwPytnxKWkAvc210hs3LEV=hvFN6KSvMzjmzV=95i4hQ@mail.gmail.com>
Message-ID: <CAK9jXVWPeoeTM94+gBZ4OeVeoq3qCoJjE-zd0QBEPrt6v1GFmQ@mail.gmail.com>

I think you should take a look at what cppcheck finds when scanning GDAL
source before the next release. There are a few tens of small errors.
Mostly, small leaks in particalr cases. Not very important errors, but that
ought to be fixed before doing an release in my opinion


2014-03-26 8:49 GMT+01:00 Paul Meems <bontepaarden at gmail.com>:

> +1 for adding VS2013 binaries in GISInternals
>
> Thanks,
>
> Paul
>
>  *Paul Meems *
> Release manager, configuration manager
> and forum moderator of MapWindow GIS.
> www.mapwindow.org
>
> Owner of MapWindow.nl - Support for
> Dutch speaking users.
> www.mapwindow.nl
>
>
>
> *Join us at the MapWindow GIS Conference 2014
> <http://geogis.detek.unideb.hu/TKonferencia/2014/>, in Debrecen Hungary*
>
>
> 2014-03-26 6:25 GMT+01:00 xavier lhomme <lhomme.xavier at gmail.com>:
>
> Hi
>>   Adding Visual Studio 2012 2013 in GISInternals for Gdal 1.11 should be
>> great too.
>> Xav
>> Le 25 mars 2014 22:57, "Tamas Szekeres" <szekerest at gmail.com> a ?crit :
>>
>> That sounds good to me.
>>>
>>> Best regards,
>>>
>>> Tamas
>>>
>>>
>>>
>>> 2014-03-25 22:37 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:
>>>
>>>> Hi,
>>>>
>>>> GDAL 1.10 was released about one year ago, so it is time to think about
>>>> the next
>>>> release. I think we should just call it 1.11 given that there are no
>>>> major
>>>> architectural changes (although there have been non trivial changes in
>>>> RAT
>>>> management and for multiple geometry field support, but that only
>>>> impacts core &
>>>> drivers), and the C API and ABI is still preserved (for those who have
>>>> looked at
>>>> the other thread, my experiments on unification are *not* in trunk).
>>>> For the
>>>> details, I have initiated the preliminary NEWS :
>>>> http://trac.osgeo.org/gdal/export/27091/trunk/gdal/NEWS (*)
>>>> There are some mentions to 2.0 in the documentation of new features,
>>>> but I'll
>>>> end up fixing them to reflect the 1.11 numbering.
>>>>
>>>> I think we are in a good shape to start the beta phase soon. If people
>>>> have
>>>> features or bug fixes almost ready that they'd like to be in 1.11,
>>>> please speak
>>>> up now. Otherwise I suggest issuing a beta-1 at the end of next week,
>>>> give it a
>>>> week for testing, and depending on the outcome, issue a beta-2, or just
>>>> try
>>>> RC-1. Unless someone volunteers (the process is fairly well documented
>>>> in
>>>> HOWTO-RELEASE), I can be release manager for 1.11.
>>>>
>>>> Any opinion about that plan ?
>>>>
>>>> Best regards,
>>>>
>>>> Even
>>>>
>>>> --
>>>> Geospatial professional services
>>>> http://even.rouault.free.fr/services.html
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
[image: Geovariances]

Olivier BARTHELEMY *Software development engineer*
Geovariances, 49bis avenue Franklin Roosevelt - 77215 AVON CEDEX - FRANCE
| www.geovariances.com <http://link.geovariances.com/eml-home>
Keep posted about Geovariances   <http://link.geovariances.com/eml-geowidget>
    <http://link.geovariances.com/eml-linkedin-gv>
<http://link.geovariances.com/eml-linkedin>
    <http://link.geovariances.com/eml-twitter>
<http://link.geovariances.com/eml-youtube>
    <http://link.geovariances.com/eml-slideshare>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140326/f04e2ae0/attachment-0001.html>

From even.rouault at mines-paris.org  Wed Mar 26 01:15:07 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 26 Mar 2014 09:15:07 +0100
Subject: [gdal-dev] GDAL 1.11 release plan
In-Reply-To: <CAK9jXVWPeoeTM94+gBZ4OeVeoq3qCoJjE-zd0QBEPrt6v1GFmQ@mail.gmail.com>
References: <1395783436.5331f70c554f1@imp.free.fr>
	<CACALY+TqNLJCJNjJrU9bnnw2o7DVrZkgMOe+PtTyoR-_bHzXBA@mail.gmail.com>
	<CACqzBMyvTt12JbUZh+-aVP4=6ujGvZJPjpm+5DsrngQKDSGmyA@mail.gmail.com>
	<CAHNf2YSwPytnxKWkAvc210hs3LEV=hvFN6KSvMzjmzV=95i4hQ@mail.gmail.com>
	<CAK9jXVWPeoeTM94+gBZ4OeVeoq3qCoJjE-zd0QBEPrt6v1GFmQ@mail.gmail.com>
Message-ID: <1395821707.53328c8bde986@imp.free.fr>

Hi Olivier,

If you could share with us the errors that have been reported (and the options
you have used to pass cppcheck on GDAL source), that would be a good
contribution. Even better if you can submit a patch to fix them ;-)
Not saying they shouldn't be fixed, but I don't see that as a blocker point
however, unless they show up in nominal code paths. They have likely existed for
years.
We also have registered GDAL to the Coverity scanner, and we try to fix errors
that are reported in new code.

Even

> I think you should take a look at what cppcheck finds when scanning GDAL
> source before the next release. There are a few tens of small errors.
> Mostly, small leaks in particalr cases. Not very important errors, but that
> ought to be fixed before doing an release in my opinion
>
>
> 2014-03-26 8:49 GMT+01:00 Paul Meems <bontepaarden at gmail.com>:
>
> > +1 for adding VS2013 binaries in GISInternals
> >
> > Thanks,
> >
> > Paul
> >
> >  *Paul Meems *
> > Release manager, configuration manager
> > and forum moderator of MapWindow GIS.
> > www.mapwindow.org
> >
> > Owner of MapWindow.nl - Support for
> > Dutch speaking users.
> > www.mapwindow.nl
> >
> >
> >
> > *Join us at the MapWindow GIS Conference 2014
> > <http://geogis.detek.unideb.hu/TKonferencia/2014/>, in Debrecen Hungary*
> >
> >
> > 2014-03-26 6:25 GMT+01:00 xavier lhomme <lhomme.xavier at gmail.com>:
> >
> > Hi
> >>   Adding Visual Studio 2012 2013 in GISInternals for Gdal 1.11 should be
> >> great too.
> >> Xav
> >> Le 25 mars 2014 22:57, "Tamas Szekeres" <szekerest at gmail.com> a ?crit :
> >>
> >> That sounds good to me.
> >>>
> >>> Best regards,
> >>>
> >>> Tamas
> >>>
> >>>
> >>>
> >>> 2014-03-25 22:37 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:
> >>>
> >>>> Hi,
> >>>>
> >>>> GDAL 1.10 was released about one year ago, so it is time to think about
> >>>> the next
> >>>> release. I think we should just call it 1.11 given that there are no
> >>>> major
> >>>> architectural changes (although there have been non trivial changes in
> >>>> RAT
> >>>> management and for multiple geometry field support, but that only
> >>>> impacts core &
> >>>> drivers), and the C API and ABI is still preserved (for those who have
> >>>> looked at
> >>>> the other thread, my experiments on unification are *not* in trunk).
> >>>> For the
> >>>> details, I have initiated the preliminary NEWS :
> >>>> http://trac.osgeo.org/gdal/export/27091/trunk/gdal/NEWS (*)
> >>>> There are some mentions to 2.0 in the documentation of new features,
> >>>> but I'll
> >>>> end up fixing them to reflect the 1.11 numbering.
> >>>>
> >>>> I think we are in a good shape to start the beta phase soon. If people
> >>>> have
> >>>> features or bug fixes almost ready that they'd like to be in 1.11,
> >>>> please speak
> >>>> up now. Otherwise I suggest issuing a beta-1 at the end of next week,
> >>>> give it a
> >>>> week for testing, and depending on the outcome, issue a beta-2, or just
> >>>> try
> >>>> RC-1. Unless someone volunteers (the process is fairly well documented
> >>>> in
> >>>> HOWTO-RELEASE), I can be release manager for 1.11.
> >>>>
> >>>> Any opinion about that plan ?
> >>>>
> >>>> Best regards,
> >>>>
> >>>> Even
> >>>>
> >>>> --
> >>>> Geospatial professional services
> >>>> http://even.rouault.free.fr/services.html
> >>>> _______________________________________________
> >>>> gdal-dev mailing list
> >>>> gdal-dev at lists.osgeo.org
> >>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>>>
> >>>
> >>>
> >>> _______________________________________________
> >>> gdal-dev mailing list
> >>> gdal-dev at lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>>
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
>
> --
> [image: Geovariances]
>
> Olivier BARTHELEMY *Software development engineer*
> Geovariances, 49bis avenue Franklin Roosevelt - 77215 AVON CEDEX - FRANCE
> | www.geovariances.com <http://link.geovariances.com/eml-home>
> Keep posted about Geovariances   <http://link.geovariances.com/eml-geowidget>
>     <http://link.geovariances.com/eml-linkedin-gv>
> <http://link.geovariances.com/eml-linkedin>
>     <http://link.geovariances.com/eml-twitter>
> <http://link.geovariances.com/eml-youtube>
>     <http://link.geovariances.com/eml-slideshare>
>



From barthelemy at geovariances.com  Wed Mar 26 02:34:27 2014
From: barthelemy at geovariances.com (Olivier BARTHELEMY)
Date: Wed, 26 Mar 2014 10:34:27 +0100
Subject: [gdal-dev] GDAL 1.11 release plan
In-Reply-To: <1395821707.53328c8bde986@imp.free.fr>
References: <1395783436.5331f70c554f1@imp.free.fr>
	<CACALY+TqNLJCJNjJrU9bnnw2o7DVrZkgMOe+PtTyoR-_bHzXBA@mail.gmail.com>
	<CACqzBMyvTt12JbUZh+-aVP4=6ujGvZJPjpm+5DsrngQKDSGmyA@mail.gmail.com>
	<CAHNf2YSwPytnxKWkAvc210hs3LEV=hvFN6KSvMzjmzV=95i4hQ@mail.gmail.com>
	<CAK9jXVWPeoeTM94+gBZ4OeVeoq3qCoJjE-zd0QBEPrt6v1GFmQ@mail.gmail.com>
	<1395821707.53328c8bde986@imp.free.fr>
Message-ID: <CAK9jXVVVy4bYe91GbJ5JCwyPgFtcSxR4-a2Ti5LWNU5MHK7=oQ@mail.gmail.com>

Here is what cppcheck 1.64 reports as 'errors' in gdal-1.10.1:

[frmts\adrg\adrgdataset.cpp:1071]: (error) Memory leak: TILEINDEX
[frmts\coasp\coasp_dataset.cpp:199]: (error) Undefined behavior: Variable
'pszItemValue' is used as parameter and destination in s[n]printf().
[frmts\dted\dted_create.c:181]: (error) Resource leak: fp
[frmts\envisat\EnvisatFile.c:286]: (error) Memory leak: self
[frmts\envisat\EnvisatFile.c:609]: (error) Memory leak: dsd_text
[frmts\envisat\EnvisatFile.c:1776]: (error) Memory leak: entry
[frmts\georaster\georaster_dataset.cpp:188]: (error) Possible null pointer
dereference: poGRD
[frmts\georaster\georaster_dataset.cpp:189]: (error) Possible null pointer
dereference: poGRD
[frmts\georaster\georaster_dataset.cpp:190]: (error) Possible null pointer
dereference: poGRD
[frmts\georaster\georaster_dataset.cpp:191]: (error) Possible null pointer
dereference: poGRD
[frmts\georaster\oci_wrapper.cpp:1590]: (error) Pointer to local array
variable returned.
[frmts\gif\giflib\gifalloc.c:67]: (error) Memory leak: Object
[frmts\grib\degrib18\degrib\clock.c:2071]: (error) Common realloc mistake:
'Stack' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\clock.c:2175]: (error) Common realloc mistake:
'Rel' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\clock.c:2197]: (error) Common realloc mistake:
'Rel' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\clock.c:2209]: (error) Common realloc mistake:
'Rel' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\grib2api.c:594]: (error) Uninitialized
variable: igdstmpl
[frmts\grib\degrib18\degrib\metaparse.cpp:2628]: (error) Common realloc
mistake: 'freq' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\myerror.c:109]: (error) Common realloc mistake:
'buffer' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\myerror.c:126]: (error) Common realloc mistake:
'buffer' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\myerror.c:132]: (error) Common realloc mistake:
'buffer' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\myerror.c:149]: (error) Common realloc mistake:
'buffer' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\myerror.c:158]: (error) Common realloc mistake:
'buffer' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\myerror.c:187]: (error) Common realloc mistake:
'buffer' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\myerror.c:195]: (error) Common realloc mistake:
'buffer' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\myerror.c:203]: (error) Common realloc mistake:
'buffer' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\myerror.c:211]: (error) Common realloc mistake:
'buffer' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\myerror.c:218]: (error) Common realloc mistake:
'buffer' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\myerror.c:229]: (error) Common realloc mistake:
'buffer' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\myerror.c:241]: (error) Common realloc mistake:
'buffer' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\myerror.c:257]: (error) Common realloc mistake:
'buffer' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\myerror.c:442]: (error) Common realloc mistake:
'preBuffer' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\myerror.c:534]: (error) Common realloc mistake:
'buff' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\myutil.c:85]: (error) Common realloc mistake:
'buffer' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\myutil.c:92]: (error) Common realloc mistake:
'buffer' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\myutil.c:99]: (error) Common realloc mistake:
'buffer' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\myutil.c:149]: (error) Common realloc mistake:
'argv' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\tdlpack.cpp:3256]: (error) Common realloc
mistake: 'subGroup' nulled but not freed upon failure
[frmts\grib\degrib18\degrib\tdlpack.cpp:4179]: (error) Read and write
operations without a call to a positioning function (fseek, fsetpos or
rewind) or fflush in between result in undefined behaviour.
[frmts\grib\degrib18\g2clib-1.0.4\compack.c:159]: (error) Uninitialized
variable: ival1
[frmts\grib\degrib18\g2clib-1.0.4\comunpack.c:198]: (error) Memory leak:
ifld
[frmts\grib\degrib18\g2clib-1.0.4\misspack.c:203]: (error) Uninitialized
variable: ival1
[frmts\grib\degrib18\g2clib-1.0.4\misspack.c:118]: (error) Uninitialized
variable: rmisss
[frmts\grib\degrib18\g2clib-1.0.4\pngunpack.c:61]: (error) Memory leak: ifld
[frmts\grib\degrib18\g2clib-1.0.4\pngunpack.c:61]: (error) Memory leak:
ctemp
[frmts\hdf4\hdf-eos\EHapi.c:2315]: (error) Common realloc mistake:
'metabuf' nulled but not freed upon failure
[frmts\hdf4\hdf-eos\EHapi.c:3665]: (error) Common realloc mistake:
'EHXtypeTable' nulled but not freed upon failure
[frmts\hdf4\hdf-eos\EHapi.c:3668]: (error) Common realloc mistake:
'EHXacsTable' nulled but not freed upon failure
[frmts\hdf4\hdf-eos\EHapi.c:3671]: (error) Common realloc mistake:
'EHXfidTable' nulled but not freed upon failure
[frmts\hdf4\hdf-eos\EHapi.c:3674]: (error) Common realloc mistake:
'EHXsdTable' nulled but not freed upon failure
[frmts\hdf4\hdf-eos\GDapi.c:2411]: (error) Array 'HDFcomp[5]' accessed at
index 19, which is out of bounds.
[frmts\hdf4\hdf-eos\GDapi.c:2177]: (error) Array 'originNames[4]' accessed
at index 15, which is out of bounds.
[frmts\hdf4\hdf-eos\GDapi.c:2292]: (error) Array 'pixregNames[2]' accessed
at index 7, which is out of bounds.
[frmts\hdf4\hdf-eos\SWapi.c:4995]: (error) Memory leak: fillbuf
[frmts\hdf4\hdf-eos\SWapi.c:5615]: (error) Memory leak: flag
[frmts\hdf4\hdf-eos\SWapi.c:6239]: (error) Memory leak: flag
[frmts\idrisi\IdrisiDataset.cpp:1886]: (error) syntax error
[frmts\ilwis\ilwisdataset.cpp:1425]: (error) syntax error
[frmts\msg\msgdataset.cpp:532]: (error) Object pointed by an 'auto_ptr' is
destroyed using operator 'delete'. You should not use 'auto_ptr' for
pointers obtained with operator 'new[]'.
[frmts\netcdf\netcdfdataset.cpp:5997]: (error) Uninitialized variable:
strtime
[frmts\pcidsk\sdk\core\pcidsk_utils.cpp:644]: (error) Common realloc
mistake: 'pszWorkBuffer' nulled but not freed upon failure
[frmts\pcidsk\sdk\core\pcidskexception.cpp:170]: (error) Common realloc
mistake: 'pszWorkBuffer' nulled but not freed upon failure
[frmts\png\libpng\pngrutil.c:996]: (error) Uninitialized variable: igamma
[frmts\rasterlite\rasterlitedataset.cpp:1179]: (error) Possible null
pointer dereference: poDS
[frmts\rasterlite\rasterlitedataset.cpp:1185]: (error) Possible null
pointer dereference: poDS
[frmts\rasterlite\rasterlitedataset.cpp:1186]: (error) Possible null
pointer dereference: poDS
[frmts\rasterlite\rasterlitedataset.cpp:1187]: (error) Possible null
pointer dereference: poDS
[frmts\rasterlite\rasterlitedataset.cpp:1188]: (error) Possible null
pointer dereference: poDS
[frmts\rasterlite\rasterlitedataset.cpp:1190]: (error) Possible null
pointer dereference: poDS
[frmts\rasterlite\rasterlitedataset.cpp:1191]: (error) Possible null
pointer dereference: poDS
[frmts\rasterlite\rasterlitedataset.cpp:1192]: (error) Possible null
pointer dereference: poDS
[frmts\rasterlite\rasterlitedataset.cpp:1193]: (error) Possible null
pointer dereference: poDS
[frmts\rasterlite\rasterlitedataset.cpp:1194]: (error) Possible null
pointer dereference: poDS
[frmts\rasterlite\rasterlitedataset.cpp:1195]: (error) Possible null
pointer dereference: poDS
[frmts\rasterlite\rasterlitedataset.cpp:1196]: (error) Possible null
pointer dereference: poDS
[frmts\rasterlite\rasterlitedataset.cpp:1267]: (error) Possible null
pointer dereference: poDS
[frmts\raw\atlsci_spheroid.cpp:122]: (error) syntax error
[frmts\raw\mffdataset.cpp:1451]: (error) syntax error
[frmts\sgi\sgidataset.cpp:523]: (error) Using 'memcpy' on struct that
contains a 'std::string'.
[ogr\ogrsf_frmts\dgn\dgnhelp.cpp:1379]: (error) syntax error
[ogr\ogrsf_frmts\dwg\ogrdwglayer.cpp:323]: (error) Invalid number of
character ({) when these macros are defined: 'notdef'.
[ogr\ogrsf_frmts\filegdb\FGdbLayer.cpp:1914]: (error) syntax error
[ogr\ogrsf_frmts\generic\ogrdatasource.cpp:1425]: (error) Possible null
pointer dereference: papoSrcLayers
[ogr\ogrsf_frmts\mitab\mitab_coordsys.cpp:747]: (error) Buffer is accessed
out of bounds.
[ogr\ogrsf_frmts\mitab\mitab_geometry.cpp:223]: (error) Memory leak:
xintersect
[ogr\ogrsf_frmts\ntf\ntffilereader.cpp:260]: (error) Memory pointed to by
'poRecord' is freed twice.
[ogr\ogrsf_frmts\pg\ogrpgdatasource.cpp:1102]: (error) Memory leak: poLayer
[ogr\ogrsf_frmts\shape\shptree.c:241]: (error) Memory leak: psTree
[port\cpl_minizip_zip.cpp:608]: (error) Memory leak: zi
[port\cpl_strtod.cpp:67]: (error) Division by zero.

I'd be happy to provide fix patches, but i have not much time at the
moment, so it won't be before a 1.11 release.

If you want to see the other 'warnings', and get un updated report on GDAL
trunk, maybe you could ask to those who manage
http://debbie.postgis.net:8080/view/GDAL/ to add the cppcheck plugin to
their Jenkins?


2014-03-26 9:15 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:

> Hi Olivier,
>
> If you could share with us the errors that have been reported (and the
> options
> you have used to pass cppcheck on GDAL source), that would be a good
> contribution. Even better if you can submit a patch to fix them ;-)
> Not saying they shouldn't be fixed, but I don't see that as a blocker point
> however, unless they show up in nominal code paths. They have likely
> existed for
> years.
> We also have registered GDAL to the Coverity scanner, and we try to fix
> errors
> that are reported in new code.
>
> Even
>
> > I think you should take a look at what cppcheck finds when scanning GDAL
> > source before the next release. There are a few tens of small errors.
> > Mostly, small leaks in particalr cases. Not very important errors, but
> that
> > ought to be fixed before doing an release in my opinion
> >
> >
> > 2014-03-26 8:49 GMT+01:00 Paul Meems <bontepaarden at gmail.com>:
> >
> > > +1 for adding VS2013 binaries in GISInternals
> > >
> > > Thanks,
> > >
> > > Paul
> > >
> > >  *Paul Meems *
> > > Release manager, configuration manager
> > > and forum moderator of MapWindow GIS.
> > > www.mapwindow.org
> > >
> > > Owner of MapWindow.nl - Support for
> > > Dutch speaking users.
> > > www.mapwindow.nl
> > >
> > >
> > >
> > > *Join us at the MapWindow GIS Conference 2014
> > > <http://geogis.detek.unideb.hu/TKonferencia/2014/>, in Debrecen
> Hungary*
> > >
> > >
> > > 2014-03-26 6:25 GMT+01:00 xavier lhomme <lhomme.xavier at gmail.com>:
> > >
> > > Hi
> > >>   Adding Visual Studio 2012 2013 in GISInternals for Gdal 1.11 should
> be
> > >> great too.
> > >> Xav
> > >> Le 25 mars 2014 22:57, "Tamas Szekeres" <szekerest at gmail.com> a
> ?crit :
> > >>
> > >> That sounds good to me.
> > >>>
> > >>> Best regards,
> > >>>
> > >>> Tamas
> > >>>
> > >>>
> > >>>
> > >>> 2014-03-25 22:37 GMT+01:00 Even Rouault <
> even.rouault at mines-paris.org>:
> > >>>
> > >>>> Hi,
> > >>>>
> > >>>> GDAL 1.10 was released about one year ago, so it is time to think
> about
> > >>>> the next
> > >>>> release. I think we should just call it 1.11 given that there are no
> > >>>> major
> > >>>> architectural changes (although there have been non trivial changes
> in
> > >>>> RAT
> > >>>> management and for multiple geometry field support, but that only
> > >>>> impacts core &
> > >>>> drivers), and the C API and ABI is still preserved (for those who
> have
> > >>>> looked at
> > >>>> the other thread, my experiments on unification are *not* in trunk).
> > >>>> For the
> > >>>> details, I have initiated the preliminary NEWS :
> > >>>> http://trac.osgeo.org/gdal/export/27091/trunk/gdal/NEWS (*)
> > >>>> There are some mentions to 2.0 in the documentation of new features,
> > >>>> but I'll
> > >>>> end up fixing them to reflect the 1.11 numbering.
> > >>>>
> > >>>> I think we are in a good shape to start the beta phase soon. If
> people
> > >>>> have
> > >>>> features or bug fixes almost ready that they'd like to be in 1.11,
> > >>>> please speak
> > >>>> up now. Otherwise I suggest issuing a beta-1 at the end of next
> week,
> > >>>> give it a
> > >>>> week for testing, and depending on the outcome, issue a beta-2, or
> just
> > >>>> try
> > >>>> RC-1. Unless someone volunteers (the process is fairly well
> documented
> > >>>> in
> > >>>> HOWTO-RELEASE), I can be release manager for 1.11.
> > >>>>
> > >>>> Any opinion about that plan ?
> > >>>>
> > >>>> Best regards,
> > >>>>
> > >>>> Even
> > >>>>
> > >>>> --
> > >>>> Geospatial professional services
> > >>>> http://even.rouault.free.fr/services.html
> > >>>> _______________________________________________
> > >>>> gdal-dev mailing list
> > >>>> gdal-dev at lists.osgeo.org
> > >>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >>>>
> > >>>
> > >>>
> > >>> _______________________________________________
> > >>> gdal-dev mailing list
> > >>> gdal-dev at lists.osgeo.org
> > >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >>>
> > >>
> > >> _______________________________________________
> > >> gdal-dev mailing list
> > >> gdal-dev at lists.osgeo.org
> > >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >>
> > >
> > >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> >
> >
> >
> > --
> > [image: Geovariances]
> >
> > Olivier BARTHELEMY *Software development engineer*
> > Geovariances, 49bis avenue Franklin Roosevelt - 77215 AVON CEDEX - FRANCE
> > | www.geovariances.com <http://link.geovariances.com/eml-home>
> > Keep posted about Geovariances   <
> http://link.geovariances.com/eml-geowidget>
> >     <http://link.geovariances.com/eml-linkedin-gv>
> > <http://link.geovariances.com/eml-linkedin>
> >     <http://link.geovariances.com/eml-twitter>
> > <http://link.geovariances.com/eml-youtube>
> >     <http://link.geovariances.com/eml-slideshare>
> >
>
>
>


-- 
[image: Geovariances]

Olivier BARTHELEMY *Software development engineer*
Geovariances, 49bis avenue Franklin Roosevelt - 77215 AVON CEDEX - FRANCE
| www.geovariances.com <http://link.geovariances.com/eml-home>
Keep posted about Geovariances   <http://link.geovariances.com/eml-geowidget>
    <http://link.geovariances.com/eml-linkedin-gv>
<http://link.geovariances.com/eml-linkedin>
    <http://link.geovariances.com/eml-twitter>
<http://link.geovariances.com/eml-youtube>
    <http://link.geovariances.com/eml-slideshare>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140326/cb6d9d19/attachment-0001.html>

From even.rouault at mines-paris.org  Wed Mar 26 08:16:24 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 26 Mar 2014 16:16:24 +0100
Subject: [gdal-dev] GDAL 1.11 release plan
In-Reply-To: <CAK9jXVVVy4bYe91GbJ5JCwyPgFtcSxR4-a2Ti5LWNU5MHK7=oQ@mail.gmail.com>
References: <1395783436.5331f70c554f1@imp.free.fr>
	<CACALY+TqNLJCJNjJrU9bnnw2o7DVrZkgMOe+PtTyoR-_bHzXBA@mail.gmail.com>
	<CACqzBMyvTt12JbUZh+-aVP4=6ujGvZJPjpm+5DsrngQKDSGmyA@mail.gmail.com>
	<CAHNf2YSwPytnxKWkAvc210hs3LEV=hvFN6KSvMzjmzV=95i4hQ@mail.gmail.com>
	<CAK9jXVWPeoeTM94+gBZ4OeVeoq3qCoJjE-zd0QBEPrt6v1GFmQ@mail.gmail.com>
	<1395821707.53328c8bde986@imp.free.fr>
	<CAK9jXVVVy4bYe91GbJ5JCwyPgFtcSxR4-a2Ti5LWNU5MHK7=oQ@mail.gmail.com>
Message-ID: <1395846984.5332ef48e324c@imp.free.fr>

Selon Olivier BARTHELEMY <barthelemy at geovariances.com>:

I've fixed the one in adrgdataset.cpp.
gifalloc.c, degrib18, hdf-eos are third-party code "imported" into GDAL tree. So
the best way would be to fix the issues upstream (if fix is actually needed) and
then downstream into GDAL.
I've analyze errors reported in rasterlitedataset.cpp, ogrdatasource.cpp,
ogrpgdatasource.cpp and strtod, and they are false positives.  So the rate of
false positives with cppcheck is quite significant.
I haven't looked at the other files that I'm less familiar with.

Even

> Here is what cppcheck 1.64 reports as 'errors' in gdal-1.10.1:
>
> [frmts\adrg\adrgdataset.cpp:1071]: (error) Memory leak: TILEINDEX
> [frmts\coasp\coasp_dataset.cpp:199]: (error) Undefined behavior: Variable
> 'pszItemValue' is used as parameter and destination in s[n]printf().
> [frmts\dted\dted_create.c:181]: (error) Resource leak: fp
> [frmts\envisat\EnvisatFile.c:286]: (error) Memory leak: self
> [frmts\envisat\EnvisatFile.c:609]: (error) Memory leak: dsd_text
> [frmts\envisat\EnvisatFile.c:1776]: (error) Memory leak: entry
> [frmts\georaster\georaster_dataset.cpp:188]: (error) Possible null pointer
> dereference: poGRD
> [frmts\georaster\georaster_dataset.cpp:189]: (error) Possible null pointer
> dereference: poGRD
> [frmts\georaster\georaster_dataset.cpp:190]: (error) Possible null pointer
> dereference: poGRD
> [frmts\georaster\georaster_dataset.cpp:191]: (error) Possible null pointer
> dereference: poGRD
> [frmts\georaster\oci_wrapper.cpp:1590]: (error) Pointer to local array
> variable returned.
> [frmts\gif\giflib\gifalloc.c:67]: (error) Memory leak: Object
> [frmts\grib\degrib18\degrib\clock.c:2071]: (error) Common realloc mistake:
> 'Stack' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\clock.c:2175]: (error) Common realloc mistake:
> 'Rel' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\clock.c:2197]: (error) Common realloc mistake:
> 'Rel' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\clock.c:2209]: (error) Common realloc mistake:
> 'Rel' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\grib2api.c:594]: (error) Uninitialized
> variable: igdstmpl
> [frmts\grib\degrib18\degrib\metaparse.cpp:2628]: (error) Common realloc
> mistake: 'freq' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\myerror.c:109]: (error) Common realloc mistake:
> 'buffer' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\myerror.c:126]: (error) Common realloc mistake:
> 'buffer' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\myerror.c:132]: (error) Common realloc mistake:
> 'buffer' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\myerror.c:149]: (error) Common realloc mistake:
> 'buffer' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\myerror.c:158]: (error) Common realloc mistake:
> 'buffer' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\myerror.c:187]: (error) Common realloc mistake:
> 'buffer' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\myerror.c:195]: (error) Common realloc mistake:
> 'buffer' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\myerror.c:203]: (error) Common realloc mistake:
> 'buffer' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\myerror.c:211]: (error) Common realloc mistake:
> 'buffer' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\myerror.c:218]: (error) Common realloc mistake:
> 'buffer' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\myerror.c:229]: (error) Common realloc mistake:
> 'buffer' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\myerror.c:241]: (error) Common realloc mistake:
> 'buffer' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\myerror.c:257]: (error) Common realloc mistake:
> 'buffer' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\myerror.c:442]: (error) Common realloc mistake:
> 'preBuffer' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\myerror.c:534]: (error) Common realloc mistake:
> 'buff' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\myutil.c:85]: (error) Common realloc mistake:
> 'buffer' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\myutil.c:92]: (error) Common realloc mistake:
> 'buffer' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\myutil.c:99]: (error) Common realloc mistake:
> 'buffer' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\myutil.c:149]: (error) Common realloc mistake:
> 'argv' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\tdlpack.cpp:3256]: (error) Common realloc
> mistake: 'subGroup' nulled but not freed upon failure
> [frmts\grib\degrib18\degrib\tdlpack.cpp:4179]: (error) Read and write
> operations without a call to a positioning function (fseek, fsetpos or
> rewind) or fflush in between result in undefined behaviour.
> [frmts\grib\degrib18\g2clib-1.0.4\compack.c:159]: (error) Uninitialized
> variable: ival1
> [frmts\grib\degrib18\g2clib-1.0.4\comunpack.c:198]: (error) Memory leak:
> ifld
> [frmts\grib\degrib18\g2clib-1.0.4\misspack.c:203]: (error) Uninitialized
> variable: ival1
> [frmts\grib\degrib18\g2clib-1.0.4\misspack.c:118]: (error) Uninitialized
> variable: rmisss
> [frmts\grib\degrib18\g2clib-1.0.4\pngunpack.c:61]: (error) Memory leak: ifld
> [frmts\grib\degrib18\g2clib-1.0.4\pngunpack.c:61]: (error) Memory leak:
> ctemp
> [frmts\hdf4\hdf-eos\EHapi.c:2315]: (error) Common realloc mistake:
> 'metabuf' nulled but not freed upon failure
> [frmts\hdf4\hdf-eos\EHapi.c:3665]: (error) Common realloc mistake:
> 'EHXtypeTable' nulled but not freed upon failure
> [frmts\hdf4\hdf-eos\EHapi.c:3668]: (error) Common realloc mistake:
> 'EHXacsTable' nulled but not freed upon failure
> [frmts\hdf4\hdf-eos\EHapi.c:3671]: (error) Common realloc mistake:
> 'EHXfidTable' nulled but not freed upon failure
> [frmts\hdf4\hdf-eos\EHapi.c:3674]: (error) Common realloc mistake:
> 'EHXsdTable' nulled but not freed upon failure
> [frmts\hdf4\hdf-eos\GDapi.c:2411]: (error) Array 'HDFcomp[5]' accessed at
> index 19, which is out of bounds.
> [frmts\hdf4\hdf-eos\GDapi.c:2177]: (error) Array 'originNames[4]' accessed
> at index 15, which is out of bounds.
> [frmts\hdf4\hdf-eos\GDapi.c:2292]: (error) Array 'pixregNames[2]' accessed
> at index 7, which is out of bounds.
> [frmts\hdf4\hdf-eos\SWapi.c:4995]: (error) Memory leak: fillbuf
> [frmts\hdf4\hdf-eos\SWapi.c:5615]: (error) Memory leak: flag
> [frmts\hdf4\hdf-eos\SWapi.c:6239]: (error) Memory leak: flag
> [frmts\idrisi\IdrisiDataset.cpp:1886]: (error) syntax error
> [frmts\ilwis\ilwisdataset.cpp:1425]: (error) syntax error
> [frmts\msg\msgdataset.cpp:532]: (error) Object pointed by an 'auto_ptr' is
> destroyed using operator 'delete'. You should not use 'auto_ptr' for
> pointers obtained with operator 'new[]'.
> [frmts\netcdf\netcdfdataset.cpp:5997]: (error) Uninitialized variable:
> strtime
> [frmts\pcidsk\sdk\core\pcidsk_utils.cpp:644]: (error) Common realloc
> mistake: 'pszWorkBuffer' nulled but not freed upon failure
> [frmts\pcidsk\sdk\core\pcidskexception.cpp:170]: (error) Common realloc
> mistake: 'pszWorkBuffer' nulled but not freed upon failure
> [frmts\png\libpng\pngrutil.c:996]: (error) Uninitialized variable: igamma
> [frmts\rasterlite\rasterlitedataset.cpp:1179]: (error) Possible null
> pointer dereference: poDS
> [frmts\rasterlite\rasterlitedataset.cpp:1185]: (error) Possible null
> pointer dereference: poDS
> [frmts\rasterlite\rasterlitedataset.cpp:1186]: (error) Possible null
> pointer dereference: poDS
> [frmts\rasterlite\rasterlitedataset.cpp:1187]: (error) Possible null
> pointer dereference: poDS
> [frmts\rasterlite\rasterlitedataset.cpp:1188]: (error) Possible null
> pointer dereference: poDS
> [frmts\rasterlite\rasterlitedataset.cpp:1190]: (error) Possible null
> pointer dereference: poDS
> [frmts\rasterlite\rasterlitedataset.cpp:1191]: (error) Possible null
> pointer dereference: poDS
> [frmts\rasterlite\rasterlitedataset.cpp:1192]: (error) Possible null
> pointer dereference: poDS
> [frmts\rasterlite\rasterlitedataset.cpp:1193]: (error) Possible null
> pointer dereference: poDS
> [frmts\rasterlite\rasterlitedataset.cpp:1194]: (error) Possible null
> pointer dereference: poDS
> [frmts\rasterlite\rasterlitedataset.cpp:1195]: (error) Possible null
> pointer dereference: poDS
> [frmts\rasterlite\rasterlitedataset.cpp:1196]: (error) Possible null
> pointer dereference: poDS
> [frmts\rasterlite\rasterlitedataset.cpp:1267]: (error) Possible null
> pointer dereference: poDS
> [frmts\raw\atlsci_spheroid.cpp:122]: (error) syntax error
> [frmts\raw\mffdataset.cpp:1451]: (error) syntax error
> [frmts\sgi\sgidataset.cpp:523]: (error) Using 'memcpy' on struct that
> contains a 'std::string'.
> [ogr\ogrsf_frmts\dgn\dgnhelp.cpp:1379]: (error) syntax error
> [ogr\ogrsf_frmts\dwg\ogrdwglayer.cpp:323]: (error) Invalid number of
> character ({) when these macros are defined: 'notdef'.
> [ogr\ogrsf_frmts\filegdb\FGdbLayer.cpp:1914]: (error) syntax error
> [ogr\ogrsf_frmts\generic\ogrdatasource.cpp:1425]: (error) Possible null
> pointer dereference: papoSrcLayers
> [ogr\ogrsf_frmts\mitab\mitab_coordsys.cpp:747]: (error) Buffer is accessed
> out of bounds.
> [ogr\ogrsf_frmts\mitab\mitab_geometry.cpp:223]: (error) Memory leak:
> xintersect
> [ogr\ogrsf_frmts\ntf\ntffilereader.cpp:260]: (error) Memory pointed to by
> 'poRecord' is freed twice.
> [ogr\ogrsf_frmts\pg\ogrpgdatasource.cpp:1102]: (error) Memory leak: poLayer
> [ogr\ogrsf_frmts\shape\shptree.c:241]: (error) Memory leak: psTree
> [port\cpl_minizip_zip.cpp:608]: (error) Memory leak: zi
> [port\cpl_strtod.cpp:67]: (error) Division by zero.
>
> I'd be happy to provide fix patches, but i have not much time at the
> moment, so it won't be before a 1.11 release.
>
> If you want to see the other 'warnings', and get un updated report on GDAL
> trunk, maybe you could ask to those who manage
> http://debbie.postgis.net:8080/view/GDAL/ to add the cppcheck plugin to
> their Jenkins?
>
>
> 2014-03-26 9:15 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:
>
> > Hi Olivier,
> >
> > If you could share with us the errors that have been reported (and the
> > options
> > you have used to pass cppcheck on GDAL source), that would be a good
> > contribution. Even better if you can submit a patch to fix them ;-)
> > Not saying they shouldn't be fixed, but I don't see that as a blocker point
> > however, unless they show up in nominal code paths. They have likely
> > existed for
> > years.
> > We also have registered GDAL to the Coverity scanner, and we try to fix
> > errors
> > that are reported in new code.
> >
> > Even
> >
> > > I think you should take a look at what cppcheck finds when scanning GDAL
> > > source before the next release. There are a few tens of small errors.
> > > Mostly, small leaks in particalr cases. Not very important errors, but
> > that
> > > ought to be fixed before doing an release in my opinion
> > >
> > >
> > > 2014-03-26 8:49 GMT+01:00 Paul Meems <bontepaarden at gmail.com>:
> > >
> > > > +1 for adding VS2013 binaries in GISInternals
> > > >
> > > > Thanks,
> > > >
> > > > Paul
> > > >
> > > >  *Paul Meems *
> > > > Release manager, configuration manager
> > > > and forum moderator of MapWindow GIS.
> > > > www.mapwindow.org
> > > >
> > > > Owner of MapWindow.nl - Support for
> > > > Dutch speaking users.
> > > > www.mapwindow.nl
> > > >
> > > >
> > > >
> > > > *Join us at the MapWindow GIS Conference 2014
> > > > <http://geogis.detek.unideb.hu/TKonferencia/2014/>, in Debrecen
> > Hungary*
> > > >
> > > >
> > > > 2014-03-26 6:25 GMT+01:00 xavier lhomme <lhomme.xavier at gmail.com>:
> > > >
> > > > Hi
> > > >>   Adding Visual Studio 2012 2013 in GISInternals for Gdal 1.11 should
> > be
> > > >> great too.
> > > >> Xav
> > > >> Le 25 mars 2014 22:57, "Tamas Szekeres" <szekerest at gmail.com> a
> > ?crit :
> > > >>
> > > >> That sounds good to me.
> > > >>>
> > > >>> Best regards,
> > > >>>
> > > >>> Tamas
> > > >>>
> > > >>>
> > > >>>
> > > >>> 2014-03-25 22:37 GMT+01:00 Even Rouault <
> > even.rouault at mines-paris.org>:
> > > >>>
> > > >>>> Hi,
> > > >>>>
> > > >>>> GDAL 1.10 was released about one year ago, so it is time to think
> > about
> > > >>>> the next
> > > >>>> release. I think we should just call it 1.11 given that there are no
> > > >>>> major
> > > >>>> architectural changes (although there have been non trivial changes
> > in
> > > >>>> RAT
> > > >>>> management and for multiple geometry field support, but that only
> > > >>>> impacts core &
> > > >>>> drivers), and the C API and ABI is still preserved (for those who
> > have
> > > >>>> looked at
> > > >>>> the other thread, my experiments on unification are *not* in trunk).
> > > >>>> For the
> > > >>>> details, I have initiated the preliminary NEWS :
> > > >>>> http://trac.osgeo.org/gdal/export/27091/trunk/gdal/NEWS (*)
> > > >>>> There are some mentions to 2.0 in the documentation of new features,
> > > >>>> but I'll
> > > >>>> end up fixing them to reflect the 1.11 numbering.
> > > >>>>
> > > >>>> I think we are in a good shape to start the beta phase soon. If
> > people
> > > >>>> have
> > > >>>> features or bug fixes almost ready that they'd like to be in 1.11,
> > > >>>> please speak
> > > >>>> up now. Otherwise I suggest issuing a beta-1 at the end of next
> > week,
> > > >>>> give it a
> > > >>>> week for testing, and depending on the outcome, issue a beta-2, or
> > just
> > > >>>> try
> > > >>>> RC-1. Unless someone volunteers (the process is fairly well
> > documented
> > > >>>> in
> > > >>>> HOWTO-RELEASE), I can be release manager for 1.11.
> > > >>>>
> > > >>>> Any opinion about that plan ?
> > > >>>>
> > > >>>> Best regards,
> > > >>>>
> > > >>>> Even
> > > >>>>
> > > >>>> --
> > > >>>> Geospatial professional services
> > > >>>> http://even.rouault.free.fr/services.html
> > > >>>> _______________________________________________
> > > >>>> gdal-dev mailing list
> > > >>>> gdal-dev at lists.osgeo.org
> > > >>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > >>>>
> > > >>>
> > > >>>
> > > >>> _______________________________________________
> > > >>> gdal-dev mailing list
> > > >>> gdal-dev at lists.osgeo.org
> > > >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > >>>
> > > >>
> > > >> _______________________________________________
> > > >> gdal-dev mailing list
> > > >> gdal-dev at lists.osgeo.org
> > > >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > >>
> > > >
> > > >
> > > > _______________________________________________
> > > > gdal-dev mailing list
> > > > gdal-dev at lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > >
> > >
> > >
> > >
> > > --
> > > [image: Geovariances]
> > >
> > > Olivier BARTHELEMY *Software development engineer*
> > > Geovariances, 49bis avenue Franklin Roosevelt - 77215 AVON CEDEX - FRANCE
> > > | www.geovariances.com <http://link.geovariances.com/eml-home>
> > > Keep posted about Geovariances   <
> > http://link.geovariances.com/eml-geowidget>
> > >     <http://link.geovariances.com/eml-linkedin-gv>
> > > <http://link.geovariances.com/eml-linkedin>
> > >     <http://link.geovariances.com/eml-twitter>
> > > <http://link.geovariances.com/eml-youtube>
> > >     <http://link.geovariances.com/eml-slideshare>
> > >
> >
> >
> >
>
>
> --
> [image: Geovariances]
>
> Olivier BARTHELEMY *Software development engineer*
> Geovariances, 49bis avenue Franklin Roosevelt - 77215 AVON CEDEX - FRANCE
> | www.geovariances.com <http://link.geovariances.com/eml-home>
> Keep posted about Geovariances   <http://link.geovariances.com/eml-geowidget>
>     <http://link.geovariances.com/eml-linkedin-gv>
> <http://link.geovariances.com/eml-linkedin>
>     <http://link.geovariances.com/eml-twitter>
> <http://link.geovariances.com/eml-youtube>
>     <http://link.geovariances.com/eml-slideshare>
>



From ridgewang at gmail.com  Wed Mar 26 23:21:33 2014
From: ridgewang at gmail.com (ridgewang)
Date: Thu, 27 Mar 2014 14:21:33 +0800
Subject: [gdal-dev] gdal-dev Digest, Vol 118, Issue 58
In-Reply-To: <mailman.51.1395860419.2488.gdal-dev@lists.osgeo.org>
References: <mailman.51.1395860419.2488.gdal-dev@lists.osgeo.org>
Message-ID: <2A24D704-E31C-4D4B-8EBB-B06D7D9D1F2B@gmail.com>

Hi?
    I have 2 suggestions?
1. supply an option that can build the gdal using the static c++ runtime library, so we can use it not depends on the msvcr80.dll and msvcp80.dll.

2. provide a gdal_merge.exe utility program with the same function as gdal_merge.py.

here are the reasons I raise it:
1. I write a COM component using gdal  library, but I can not register the component correction, maybe the version in my computer is not right and I donot known how to build a static version not using the vc runtime library.

2. I do not known how to run the python utility and it always reports cannot find the _gdal module, and I had tried many times and had set the pythonpath environment variance.

And who can kindly teach me how to solve the first problem. Maybe I can add some switch option to the compile configuration file? 

Ridge

 




? 2014-3-27?3:00?gdal-dev-request at lists.osgeo.org ???

> Send gdal-dev mailing list submissions to
>    gdal-dev at lists.osgeo.org
> 
> To subscribe or unsubscribe via the World Wide Web, visit
>    http://lists.osgeo.org/mailman/listinfo/gdal-dev
> or, via email, send a message with subject or body 'help' to
>    gdal-dev-request at lists.osgeo.org
> 
> You can reach the person managing the list at
>    gdal-dev-owner at lists.osgeo.org
> 
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of gdal-dev digest..."
> 
> 
> Today's Topics:
> 
>   1. Re: GDAL 1.11 release plan (Even Rouault)
> 
> 
> ----------------------------------------------------------------------
> 
> Message: 1
> Date: Wed, 26 Mar 2014 16:16:24 +0100
> From: Even Rouault <even.rouault at mines-paris.org>
> To: Olivier BARTHELEMY <barthelemy at geovariances.com>
> Cc: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] GDAL 1.11 release plan
> Message-ID: <1395846984.5332ef48e324c at imp.free.fr>
> Content-Type: text/plain; charset=ISO-8859-15
> 
> Selon Olivier BARTHELEMY <barthelemy at geovariances.com>:
> 
> I've fixed the one in adrgdataset.cpp.
> gifalloc.c, degrib18, hdf-eos are third-party code "imported" into GDAL tree. So
> the best way would be to fix the issues upstream (if fix is actually needed) and
> then downstream into GDAL.
> I've analyze errors reported in rasterlitedataset.cpp, ogrdatasource.cpp,
> ogrpgdatasource.cpp and strtod, and they are false positives.  So the rate of
> false positives with cppcheck is quite significant.
> I haven't looked at the other files that I'm less familiar with.
> 
> Even
> 
>> Here is what cppcheck 1.64 reports as 'errors' in gdal-1.10.1:
>> 
>> [frmts\adrg\adrgdataset.cpp:1071]: (error) Memory leak: TILEINDEX
>> [frmts\coasp\coasp_dataset.cpp:199]: (error) Undefined behavior: Variable
>> 'pszItemValue' is used as parameter and destination in s[n]printf().
>> [frmts\dted\dted_create.c:181]: (error) Resource leak: fp
>> [frmts\envisat\EnvisatFile.c:286]: (error) Memory leak: self
>> [frmts\envisat\EnvisatFile.c:609]: (error) Memory leak: dsd_text
>> [frmts\envisat\EnvisatFile.c:1776]: (error) Memory leak: entry
>> [frmts\georaster\georaster_dataset.cpp:188]: (error) Possible null pointer
>> dereference: poGRD
>> [frmts\georaster\georaster_dataset.cpp:189]: (error) Possible null pointer
>> dereference: poGRD
>> [frmts\georaster\georaster_dataset.cpp:190]: (error) Possible null pointer
>> dereference: poGRD
>> [frmts\georaster\georaster_dataset.cpp:191]: (error) Possible null pointer
>> dereference: poGRD
>> [frmts\georaster\oci_wrapper.cpp:1590]: (error) Pointer to local array
>> variable returned.
>> [frmts\gif\giflib\gifalloc.c:67]: (error) Memory leak: Object
>> [frmts\grib\degrib18\degrib\clock.c:2071]: (error) Common realloc mistake:
>> 'Stack' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\clock.c:2175]: (error) Common realloc mistake:
>> 'Rel' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\clock.c:2197]: (error) Common realloc mistake:
>> 'Rel' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\clock.c:2209]: (error) Common realloc mistake:
>> 'Rel' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\grib2api.c:594]: (error) Uninitialized
>> variable: igdstmpl
>> [frmts\grib\degrib18\degrib\metaparse.cpp:2628]: (error) Common realloc
>> mistake: 'freq' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\myerror.c:109]: (error) Common realloc mistake:
>> 'buffer' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\myerror.c:126]: (error) Common realloc mistake:
>> 'buffer' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\myerror.c:132]: (error) Common realloc mistake:
>> 'buffer' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\myerror.c:149]: (error) Common realloc mistake:
>> 'buffer' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\myerror.c:158]: (error) Common realloc mistake:
>> 'buffer' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\myerror.c:187]: (error) Common realloc mistake:
>> 'buffer' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\myerror.c:195]: (error) Common realloc mistake:
>> 'buffer' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\myerror.c:203]: (error) Common realloc mistake:
>> 'buffer' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\myerror.c:211]: (error) Common realloc mistake:
>> 'buffer' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\myerror.c:218]: (error) Common realloc mistake:
>> 'buffer' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\myerror.c:229]: (error) Common realloc mistake:
>> 'buffer' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\myerror.c:241]: (error) Common realloc mistake:
>> 'buffer' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\myerror.c:257]: (error) Common realloc mistake:
>> 'buffer' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\myerror.c:442]: (error) Common realloc mistake:
>> 'preBuffer' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\myerror.c:534]: (error) Common realloc mistake:
>> 'buff' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\myutil.c:85]: (error) Common realloc mistake:
>> 'buffer' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\myutil.c:92]: (error) Common realloc mistake:
>> 'buffer' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\myutil.c:99]: (error) Common realloc mistake:
>> 'buffer' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\myutil.c:149]: (error) Common realloc mistake:
>> 'argv' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\tdlpack.cpp:3256]: (error) Common realloc
>> mistake: 'subGroup' nulled but not freed upon failure
>> [frmts\grib\degrib18\degrib\tdlpack.cpp:4179]: (error) Read and write
>> operations without a call to a positioning function (fseek, fsetpos or
>> rewind) or fflush in between result in undefined behaviour.
>> [frmts\grib\degrib18\g2clib-1.0.4\compack.c:159]: (error) Uninitialized
>> variable: ival1
>> [frmts\grib\degrib18\g2clib-1.0.4\comunpack.c:198]: (error) Memory leak:
>> ifld
>> [frmts\grib\degrib18\g2clib-1.0.4\misspack.c:203]: (error) Uninitialized
>> variable: ival1
>> [frmts\grib\degrib18\g2clib-1.0.4\misspack.c:118]: (error) Uninitialized
>> variable: rmisss
>> [frmts\grib\degrib18\g2clib-1.0.4\pngunpack.c:61]: (error) Memory leak: ifld
>> [frmts\grib\degrib18\g2clib-1.0.4\pngunpack.c:61]: (error) Memory leak:
>> ctemp
>> [frmts\hdf4\hdf-eos\EHapi.c:2315]: (error) Common realloc mistake:
>> 'metabuf' nulled but not freed upon failure
>> [frmts\hdf4\hdf-eos\EHapi.c:3665]: (error) Common realloc mistake:
>> 'EHXtypeTable' nulled but not freed upon failure
>> [frmts\hdf4\hdf-eos\EHapi.c:3668]: (error) Common realloc mistake:
>> 'EHXacsTable' nulled but not freed upon failure
>> [frmts\hdf4\hdf-eos\EHapi.c:3671]: (error) Common realloc mistake:
>> 'EHXfidTable' nulled but not freed upon failure
>> [frmts\hdf4\hdf-eos\EHapi.c:3674]: (error) Common realloc mistake:
>> 'EHXsdTable' nulled but not freed upon failure
>> [frmts\hdf4\hdf-eos\GDapi.c:2411]: (error) Array 'HDFcomp[5]' accessed at
>> index 19, which is out of bounds.
>> [frmts\hdf4\hdf-eos\GDapi.c:2177]: (error) Array 'originNames[4]' accessed
>> at index 15, which is out of bounds.
>> [frmts\hdf4\hdf-eos\GDapi.c:2292]: (error) Array 'pixregNames[2]' accessed
>> at index 7, which is out of bounds.
>> [frmts\hdf4\hdf-eos\SWapi.c:4995]: (error) Memory leak: fillbuf
>> [frmts\hdf4\hdf-eos\SWapi.c:5615]: (error) Memory leak: flag
>> [frmts\hdf4\hdf-eos\SWapi.c:6239]: (error) Memory leak: flag
>> [frmts\idrisi\IdrisiDataset.cpp:1886]: (error) syntax error
>> [frmts\ilwis\ilwisdataset.cpp:1425]: (error) syntax error
>> [frmts\msg\msgdataset.cpp:532]: (error) Object pointed by an 'auto_ptr' is
>> destroyed using operator 'delete'. You should not use 'auto_ptr' for
>> pointers obtained with operator 'new[]'.
>> [frmts\netcdf\netcdfdataset.cpp:5997]: (error) Uninitialized variable:
>> strtime
>> [frmts\pcidsk\sdk\core\pcidsk_utils.cpp:644]: (error) Common realloc
>> mistake: 'pszWorkBuffer' nulled but not freed upon failure
>> [frmts\pcidsk\sdk\core\pcidskexception.cpp:170]: (error) Common realloc
>> mistake: 'pszWorkBuffer' nulled but not freed upon failure
>> [frmts\png\libpng\pngrutil.c:996]: (error) Uninitialized variable: igamma
>> [frmts\rasterlite\rasterlitedataset.cpp:1179]: (error) Possible null
>> pointer dereference: poDS
>> [frmts\rasterlite\rasterlitedataset.cpp:1185]: (error) Possible null
>> pointer dereference: poDS
>> [frmts\rasterlite\rasterlitedataset.cpp:1186]: (error) Possible null
>> pointer dereference: poDS
>> [frmts\rasterlite\rasterlitedataset.cpp:1187]: (error) Possible null
>> pointer dereference: poDS
>> [frmts\rasterlite\rasterlitedataset.cpp:1188]: (error) Possible null
>> pointer dereference: poDS
>> [frmts\rasterlite\rasterlitedataset.cpp:1190]: (error) Possible null
>> pointer dereference: poDS
>> [frmts\rasterlite\rasterlitedataset.cpp:1191]: (error) Possible null
>> pointer dereference: poDS
>> [frmts\rasterlite\rasterlitedataset.cpp:1192]: (error) Possible null
>> pointer dereference: poDS
>> [frmts\rasterlite\rasterlitedataset.cpp:1193]: (error) Possible null
>> pointer dereference: poDS
>> [frmts\rasterlite\rasterlitedataset.cpp:1194]: (error) Possible null
>> pointer dereference: poDS
>> [frmts\rasterlite\rasterlitedataset.cpp:1195]: (error) Possible null
>> pointer dereference: poDS
>> [frmts\rasterlite\rasterlitedataset.cpp:1196]: (error) Possible null
>> pointer dereference: poDS
>> [frmts\rasterlite\rasterlitedataset.cpp:1267]: (error) Possible null
>> pointer dereference: poDS
>> [frmts\raw\atlsci_spheroid.cpp:122]: (error) syntax error
>> [frmts\raw\mffdataset.cpp:1451]: (error) syntax error
>> [frmts\sgi\sgidataset.cpp:523]: (error) Using 'memcpy' on struct that
>> contains a 'std::string'.
>> [ogr\ogrsf_frmts\dgn\dgnhelp.cpp:1379]: (error) syntax error
>> [ogr\ogrsf_frmts\dwg\ogrdwglayer.cpp:323]: (error) Invalid number of
>> character ({) when these macros are defined: 'notdef'.
>> [ogr\ogrsf_frmts\filegdb\FGdbLayer.cpp:1914]: (error) syntax error
>> [ogr\ogrsf_frmts\generic\ogrdatasource.cpp:1425]: (error) Possible null
>> pointer dereference: papoSrcLayers
>> [ogr\ogrsf_frmts\mitab\mitab_coordsys.cpp:747]: (error) Buffer is accessed
>> out of bounds.
>> [ogr\ogrsf_frmts\mitab\mitab_geometry.cpp:223]: (error) Memory leak:
>> xintersect
>> [ogr\ogrsf_frmts\ntf\ntffilereader.cpp:260]: (error) Memory pointed to by
>> 'poRecord' is freed twice.
>> [ogr\ogrsf_frmts\pg\ogrpgdatasource.cpp:1102]: (error) Memory leak: poLayer
>> [ogr\ogrsf_frmts\shape\shptree.c:241]: (error) Memory leak: psTree
>> [port\cpl_minizip_zip.cpp:608]: (error) Memory leak: zi
>> [port\cpl_strtod.cpp:67]: (error) Division by zero.
>> 
>> I'd be happy to provide fix patches, but i have not much time at the
>> moment, so it won't be before a 1.11 release.
>> 
>> If you want to see the other 'warnings', and get un updated report on GDAL
>> trunk, maybe you could ask to those who manage
>> http://debbie.postgis.net:8080/view/GDAL/ to add the cppcheck plugin to
>> their Jenkins?
>> 
>> 
>> 2014-03-26 9:15 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:
>> 
>>> Hi Olivier,
>>> 
>>> If you could share with us the errors that have been reported (and the
>>> options
>>> you have used to pass cppcheck on GDAL source), that would be a good
>>> contribution. Even better if you can submit a patch to fix them ;-)
>>> Not saying they shouldn't be fixed, but I don't see that as a blocker point
>>> however, unless they show up in nominal code paths. They have likely
>>> existed for
>>> years.
>>> We also have registered GDAL to the Coverity scanner, and we try to fix
>>> errors
>>> that are reported in new code.
>>> 
>>> Even
>>> 
>>>> I think you should take a look at what cppcheck finds when scanning GDAL
>>>> source before the next release. There are a few tens of small errors.
>>>> Mostly, small leaks in particalr cases. Not very important errors, but
>>> that
>>>> ought to be fixed before doing an release in my opinion
>>>> 
>>>> 
>>>> 2014-03-26 8:49 GMT+01:00 Paul Meems <bontepaarden at gmail.com>:
>>>> 
>>>>> +1 for adding VS2013 binaries in GISInternals
>>>>> 
>>>>> Thanks,
>>>>> 
>>>>> Paul
>>>>> 
>>>>> *Paul Meems *
>>>>> Release manager, configuration manager
>>>>> and forum moderator of MapWindow GIS.
>>>>> www.mapwindow.org
>>>>> 
>>>>> Owner of MapWindow.nl - Support for
>>>>> Dutch speaking users.
>>>>> www.mapwindow.nl
>>>>> 
>>>>> 
>>>>> 
>>>>> *Join us at the MapWindow GIS Conference 2014
>>>>> <http://geogis.detek.unideb.hu/TKonferencia/2014/>, in Debrecen
>>> Hungary*
>>>>> 
>>>>> 
>>>>> 2014-03-26 6:25 GMT+01:00 xavier lhomme <lhomme.xavier at gmail.com>:
>>>>> 
>>>>> Hi
>>>>>>  Adding Visual Studio 2012 2013 in GISInternals for Gdal 1.11 should
>>> be
>>>>>> great too.
>>>>>> Xav
>>>>>> Le 25 mars 2014 22:57, "Tamas Szekeres" <szekerest at gmail.com> a
>>> ?crit :
>>>>>> 
>>>>>> That sounds good to me.
>>>>>>> 
>>>>>>> Best regards,
>>>>>>> 
>>>>>>> Tamas
>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>>> 2014-03-25 22:37 GMT+01:00 Even Rouault <
>>> even.rouault at mines-paris.org>:
>>>>>>> 
>>>>>>>> Hi,
>>>>>>>> 
>>>>>>>> GDAL 1.10 was released about one year ago, so it is time to think
>>> about
>>>>>>>> the next
>>>>>>>> release. I think we should just call it 1.11 given that there are no
>>>>>>>> major
>>>>>>>> architectural changes (although there have been non trivial changes
>>> in
>>>>>>>> RAT
>>>>>>>> management and for multiple geometry field support, but that only
>>>>>>>> impacts core &
>>>>>>>> drivers), and the C API and ABI is still preserved (for those who
>>> have
>>>>>>>> looked at
>>>>>>>> the other thread, my experiments on unification are *not* in trunk).
>>>>>>>> For the
>>>>>>>> details, I have initiated the preliminary NEWS :
>>>>>>>> http://trac.osgeo.org/gdal/export/27091/trunk/gdal/NEWS (*)
>>>>>>>> There are some mentions to 2.0 in the documentation of new features,
>>>>>>>> but I'll
>>>>>>>> end up fixing them to reflect the 1.11 numbering.
>>>>>>>> 
>>>>>>>> I think we are in a good shape to start the beta phase soon. If
>>> people
>>>>>>>> have
>>>>>>>> features or bug fixes almost ready that they'd like to be in 1.11,
>>>>>>>> please speak
>>>>>>>> up now. Otherwise I suggest issuing a beta-1 at the end of next
>>> week,
>>>>>>>> give it a
>>>>>>>> week for testing, and depending on the outcome, issue a beta-2, or
>>> just
>>>>>>>> try
>>>>>>>> RC-1. Unless someone volunteers (the process is fairly well
>>> documented
>>>>>>>> in
>>>>>>>> HOWTO-RELEASE), I can be release manager for 1.11.
>>>>>>>> 
>>>>>>>> Any opinion about that plan ?
>>>>>>>> 
>>>>>>>> Best regards,
>>>>>>>> 
>>>>>>>> Even
>>>>>>>> 
>>>>>>>> --
>>>>>>>> Geospatial professional services
>>>>>>>> http://even.rouault.free.fr/services.html
>>>>>>>> _______________________________________________
>>>>>>>> gdal-dev mailing list
>>>>>>>> gdal-dev at lists.osgeo.org
>>>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>>> _______________________________________________
>>>>>>> gdal-dev mailing list
>>>>>>> gdal-dev at lists.osgeo.org
>>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>> 
>>>>>> 
>>>>>> _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev at lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>> 
>>>>> 
>>>>> 
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>> 
>>>> 
>>>> 
>>>> 
>>>> --
>>>> [image: Geovariances]
>>>> 
>>>> Olivier BARTHELEMY *Software development engineer*
>>>> Geovariances, 49bis avenue Franklin Roosevelt - 77215 AVON CEDEX - FRANCE
>>>> | www.geovariances.com <http://link.geovariances.com/eml-home>
>>>> Keep posted about Geovariances   <
>>> http://link.geovariances.com/eml-geowidget>
>>>>    <http://link.geovariances.com/eml-linkedin-gv>
>>>> <http://link.geovariances.com/eml-linkedin>
>>>>    <http://link.geovariances.com/eml-twitter>
>>>> <http://link.geovariances.com/eml-youtube>
>>>>    <http://link.geovariances.com/eml-slideshare>
>>>> 
>>> 
>>> 
>>> 
>> 
>> 
>> --
>> [image: Geovariances]
>> 
>> Olivier BARTHELEMY *Software development engineer*
>> Geovariances, 49bis avenue Franklin Roosevelt - 77215 AVON CEDEX - FRANCE
>> | www.geovariances.com <http://link.geovariances.com/eml-home>
>> Keep posted about Geovariances   <http://link.geovariances.com/eml-geowidget>
>>    <http://link.geovariances.com/eml-linkedin-gv>
>> <http://link.geovariances.com/eml-linkedin>
>>    <http://link.geovariances.com/eml-twitter>
>> <http://link.geovariances.com/eml-youtube>
>>    <http://link.geovariances.com/eml-slideshare>
>> 
> 
> 
> 
> 
> ------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> End of gdal-dev Digest, Vol 118, Issue 58
> *****************************************

From jrepetto at free.fr  Thu Mar 27 00:08:17 2014
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu, 27 Mar 2014 08:08:17 +0100
Subject: [gdal-dev] gdal_merge (was: gdal-dev Digest, Vol 118, Issue 58)
In-Reply-To: <2A24D704-E31C-4D4B-8EBB-B06D7D9D1F2B@gmail.com>
References: <mailman.51.1395860419.2488.gdal-dev@lists.osgeo.org>
	<2A24D704-E31C-4D4B-8EBB-B06D7D9D1F2B@gmail.com>
Message-ID: <5333CE61.5060905@free.fr>

On 27/03/2014 07:21, ridgewang wrote:
> Hi?
>      I have 2 suggestions?
> 1. supply an option that can build the gdal using the static c++ runtime library, so we can use it not depends on the msvcr80.dll and msvcp80.dll.
> 

Hi,
You can use gdalwarp to merge several files.


From fjitiaux at gmail.com  Thu Mar 27 03:01:20 2014
From: fjitiaux at gmail.com (Florent JITIAUX)
Date: Thu, 27 Mar 2014 11:01:20 +0100
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <1395778445.5331e38da2d6a@imp.free.fr>
References: <1395694013.533099bdba7cb@imp.free.fr>
	<53314406.7090903@oslandia.com>
	<1395744290.53315e2221801@imp.free.fr>
	<533172EB.9070107@oslandia.com>
	<CA+TxYvNW8RtxVN6NEn4oDsbWVw4YKZG5ZkAqnKnVzyyt1YFubw@mail.gmail.com>
	<1395778445.5331e38da2d6a@imp.free.fr>
Message-ID: <CAL81ghATCsy0vq3RmNAqmvbpose5qVzcuD-TdSM_ycvS46UANA@mail.gmail.com>

Hi all,

MY opinion is that's not a really good way to count how many classes you
will have and trying to have minimal classes.

Drawing a model with UML is not easy : it's not easy to have a good model
from the beginning, it's not easy to name all members and methods
correctly, and the worst is inheritance.
You can think you spend too much time to make the model. But you can't say
if you will spend less or much time to change code because your model was
too simple.

Because I don't know all the model of Gdal and the model can be "reset" I
have some questions :

1) Why GDALMajorObject not inherit of GDALIMajorObject ?

2) Why all classes inherit (directly or not) of GDALMajorObject ? What do
you store in it ? Is it possible to put it as a member in classes ? Have
you consider templates ?

3) An interface for Drivers ? geName(), getLongName(), getDescription() ?
Or maybe abstract ...

4) What is GDALDataset in your diagram ?

5) Where is the link between Driver (Gdal/Ogr) and Dataset (Raster/Vector)
? Member, templates ?

Florent


2014-03-25 21:14 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:

> Selon Etienne Tourigny <etourigny.dev at gmail.com>:
>
> > I also (respectfully) think that there are too many classes (mostly the
> > abstract classes and interfaces) which make it a bit hard to understand.
> >
> > I like Vincent's second suggestion to have 3 base Dataset classes
> > (GDALRasterDataset, GDALVectorDataset, GDALHybridDataset) which inherit
> > from GDALDataset, and an enum (vector,raster,hybrid) to easily query
> which
> > type the Dataset is (or which type its driver supports). You then
> subclass
> > the relevant Dataset class and it *should* work auto-magically for
> rasters.
> >  For example, a given Dataset which subclasses GDALDataset would be
> > migrated as  a subclass of GDALRasterDataset, which would imply that it
> > does not have a vector dataset. If the implementation changes to allow
> > vector, then you would change its parent and implement relevant vector
> > methods.
> >
> > My view on this is KISS with a minimum number of classes...
>
> Yes, the practice shows that the UML brainstorming leads to nowhere (at
> least
> with my current limited knowledge of C++ multi-inheritance)... So actually
> instead of creating new classes, I think that eventually there will be less
> classes... I'm not even sure about the interest of having subclasses of
> GDALDataset to distinguish between raster only, vector only or
> raster+vector. As
> I wrote previously that could be done as a driver metadata instread.
>
> So, for now, I've just "imported" the usefull methods of OGRDataSource into
> GDALDataset, and made a few changes here or there so that it works. Well
> except
> ogr_refcount.py, because of a funny discovery was that the ref counting of
> GDALDataset and OGRDataSource is (was) not the same. Starts at 1 for
> GDALDataset
> and 0 for OGRDataSource...
>
> The temporary result is in the following branch:
> https://github.com/rouault/gdal-1/commits/unification
>
> OGRDataSource is kept with just that :
>
> class CPL_DLL OGRDataSource : public GDALDataset
> {
> public:
>                         OGRDataSource();
>
>     virtual const char  *GetName() = 0;
>
>     static void         DestroyDataSource( OGRDataSource * );
>
>     OGRSFDriver        *GetOGRDriver() const;
>     void                SetOGRDriver( OGRSFDriver *poDriver );
>     virtual     const char* GetDriverName();
>
> protected:
>     friend class OGRSFDriverRegistrar;
>
>     OGRSFDriver        *m_poOGRDriver;
>
> };
>
> And it could eventually completely disappear (or maybe just remain as a
> convenience class if we don't want to touch existing drivers) if I manage
> to
> merge OGRSFDriver into GDALDriver, and get rid of OGRSFDriverRegistrar.
>
> Even
>
> >
> > cheers
> > Etienne
> >
> >
> >
> > On Tue, Mar 25, 2014 at 9:13 AM, Vincent Mora
> > <vincent.mora at oslandia.com>wrote:
> >
> > > On 25/03/2014 11:44, Even Rouault wrote:
> > >
> > >> Selon Vincent Mora <vincent.mora at oslandia.com>:
> > >>
> > >>  On 24/03/2014 21:46, Even Rouault wrote:
> > >>>
> > >>>> Hi,
> > >>>>
> > >>>> "Release soon, release early", so for people who like UML diagrams
> > >>>> (there
> > >>>>
> > >>> is
> > >>>
> > >>>> also a prototype of C++ classes for those who don't like UML very
> much),
> > >>>>
> > >>> here's
> > >>>
> > >>>> a blog entry with the outcome of my thoughts for a possible
> > >>>> re-organisation
> > >>>>
> > >>> of
> > >>>
> > >>>> the GDAL/OGR class hierarchy
> > >>>>
> > >>>>
> > >>>>  http://erouault.blogspot.ca/2014/03/draft-gdalogr-class-
> > >> hierarchy-for-gdal.html
> > >>
> > >>> I don't understand the need for HandleRasterData() and
> > >>> HandleVectorData().
> > >>>
> > >>> Isn't inheriting from GDALEmptyRasterDataset or
> GDALEmptyVectorDataset
> > >>> sufficient to convey the information that the class doesn't handle
> those
> > >>> kind of datasets.
> > >>>
> > >>> A call to GetLayerCount()/GetRasterCount() from the class user is
> > >>> sufficient to say "no vector/raster data here", and a dynamic _cast
> to
> > >>> GDALEmptyVectorDataset/GDALEmptyRasterDataset is even clearer to me,
> so
> > >>> HandleRasterData()/HandleVectorData() would be a third way to tell
> the
> > >>> same thing.
> > >>>
> > >> Actually, when thinking more about this, this kind of information
> should
> > >> be at
> > >> the driver level, and not at the dataset level. The idea is that there
> > >> are use
> > >> cases where you want to know if a driver can handle only vector, only
> > >> raster, or
> > >> both. For example if you still want to have separate Open dialog
> boxes for
> > >> raster or vector.
> > >>
> > >>> Also I'm not sure about the names GDALAbstract* since those are
> partial
> > >>> implementations.
> > >>>
> > >> I know I'm not very good at naming. Do you have an alternative
> proposal ?
> > >> The
> > >> issue is that with my draft we end up with a lot of classes and
> > >> interfaces, so
> > >> it is not obvious to find a good name to reflect their content.
> > >>
> > > Partial sound ok to me, but I not so good at naming  ?
> > >
> > > Considering the number of classes, I gave it some thoughts this morning
> > > and, like Dmitry, thought of merging the Abtract (Partial) into the
> > > interface before realizing that, even if it works (you can overload de
> > > default function in Empty) it's a bit ugly and I ended up preferring
> your
> > > solution.
> > >
> > > An altenative would be to have a Dataset with both aspects and provide
> > > three partial specialisations: one for vector (it will behave like
> empty
> > > raster) one for raster, and one for both. Code duplications could be
> > > avoided by implementing protected member functions in the Dataset
> class and
> > > simply calling them in the implementations of partial specialization.
> This
> > > solution avoid the diamond shaped inheritance diagram of hell :)
> > >
> > >    Even
> > >>
> > >>
> > >>
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> >
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140327/c2c18b0f/attachment-0001.html>

From even.rouault at mines-paris.org  Thu Mar 27 03:24:47 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 27 Mar 2014 11:24:47 +0100
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <CAL81ghATCsy0vq3RmNAqmvbpose5qVzcuD-TdSM_ycvS46UANA@mail.gmail.com>
References: <1395694013.533099bdba7cb@imp.free.fr>
	<53314406.7090903@oslandia.com>
	<1395744290.53315e2221801@imp.free.fr>
	<533172EB.9070107@oslandia.com>
	<CA+TxYvNW8RtxVN6NEn4oDsbWVw4YKZG5ZkAqnKnVzyyt1YFubw@mail.gmail.com>
	<1395778445.5331e38da2d6a@imp.free.fr>
	<CAL81ghATCsy0vq3RmNAqmvbpose5qVzcuD-TdSM_ycvS46UANA@mail.gmail.com>
Message-ID: <1395915887.5333fc6f8bc4c@imp.free.fr>

Hi,

> Hi all,
>
> MY opinion is that's not a really good way to count how many classes you
> will have and trying to have minimal classes.
>
> Drawing a model with UML is not easy : it's not easy to have a good model
> from the beginning, it's not easy to name all members and methods
> correctly, and the worst is inheritance.
> You can think you spend too much time to make the model. But you can't say
> if you will spend less or much time to change code because your model was
> too simple.

The issue is that I'm trying to "refactor" a code base of 1.2 million lines of
C/C++ code (not mentionning the 140 000 lines of Python tests), and with 211
existing drivers. So, given that nobody will probably ever want to fund the
effort, it is completely excluded to have to edit each of those drivers in a non
automated way...
The end solution will necessary be a compromise. I would also like the existing
C API to continue working as much as possible.

>
> Because I don't know all the model of Gdal and the model can be "reset" I
> have some questions :
>
> 1) Why GDALMajorObject not inherit of GDALIMajorObject ?

It was just an omission in the UML diagram. My C++ sketch had this inheritance.

>
> 2) Why all classes inherit (directly or not) of GDALMajorObject ?

That's how it is done currently.

> What do
> you store in it ?

It contains a list of list of strings, or in more concrete terms, metadata
domains that contain metadata items.

> Is it possible to put it as a member in classes ?

That could have been a way of doing it, yes. Always the debate composition vs
inheritance.

> Have
> you consider templates ?

Actually, no. I tend to avoid them unless they are an obvious solution.

>
> 3) An interface for Drivers ? geName(), getLongName(), getDescription() ?
> Or maybe abstract ...
>
> 4) What is GDALDataset in your diagram ?

It is the base class that a driver that supports both raster and vector would
have to subclass.

>
> 5) Where is the link between Driver (Gdal/Ogr) and Dataset (Raster/Vector)
> ? Member, templates ?

A Driver instanciates a Dataset by opening an existing one, or by creating a new
one. But the Dataset object itself is a free-standing objects that is only owned
by user code, and not by the Driver.

For now, I've dropped my crazy UML diagram that nobody would be able to
understand, even if I managed to make it work, and I'm pursuing my attempt
just merging OGRDataSource inside GDALDataset. And make OGRDriver and
OGRSFDriverRegistrar mostly disappear, or just create a minimized version of
them, as compatibility layer for existing drivers, that forward the real work to
GDALDriver and GDALDriverManager.

Even

>
> Florent
>
>
> 2014-03-25 21:14 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:
>
> > Selon Etienne Tourigny <etourigny.dev at gmail.com>:
> >
> > > I also (respectfully) think that there are too many classes (mostly the
> > > abstract classes and interfaces) which make it a bit hard to understand.
> > >
> > > I like Vincent's second suggestion to have 3 base Dataset classes
> > > (GDALRasterDataset, GDALVectorDataset, GDALHybridDataset) which inherit
> > > from GDALDataset, and an enum (vector,raster,hybrid) to easily query
> > which
> > > type the Dataset is (or which type its driver supports). You then
> > subclass
> > > the relevant Dataset class and it *should* work auto-magically for
> > rasters.
> > >  For example, a given Dataset which subclasses GDALDataset would be
> > > migrated as  a subclass of GDALRasterDataset, which would imply that it
> > > does not have a vector dataset. If the implementation changes to allow
> > > vector, then you would change its parent and implement relevant vector
> > > methods.
> > >
> > > My view on this is KISS with a minimum number of classes...
> >
> > Yes, the practice shows that the UML brainstorming leads to nowhere (at
> > least
> > with my current limited knowledge of C++ multi-inheritance)... So actually
> > instead of creating new classes, I think that eventually there will be less
> > classes... I'm not even sure about the interest of having subclasses of
> > GDALDataset to distinguish between raster only, vector only or
> > raster+vector. As
> > I wrote previously that could be done as a driver metadata instread.
> >
> > So, for now, I've just "imported" the usefull methods of OGRDataSource into
> > GDALDataset, and made a few changes here or there so that it works. Well
> > except
> > ogr_refcount.py, because of a funny discovery was that the ref counting of
> > GDALDataset and OGRDataSource is (was) not the same. Starts at 1 for
> > GDALDataset
> > and 0 for OGRDataSource...
> >
> > The temporary result is in the following branch:
> > https://github.com/rouault/gdal-1/commits/unification
> >
> > OGRDataSource is kept with just that :
> >
> > class CPL_DLL OGRDataSource : public GDALDataset
> > {
> > public:
> >                         OGRDataSource();
> >
> >     virtual const char  *GetName() = 0;
> >
> >     static void         DestroyDataSource( OGRDataSource * );
> >
> >     OGRSFDriver        *GetOGRDriver() const;
> >     void                SetOGRDriver( OGRSFDriver *poDriver );
> >     virtual     const char* GetDriverName();
> >
> > protected:
> >     friend class OGRSFDriverRegistrar;
> >
> >     OGRSFDriver        *m_poOGRDriver;
> >
> > };
> >
> > And it could eventually completely disappear (or maybe just remain as a
> > convenience class if we don't want to touch existing drivers) if I manage
> > to
> > merge OGRSFDriver into GDALDriver, and get rid of OGRSFDriverRegistrar.
> >
> > Even
> >
> > >
> > > cheers
> > > Etienne
> > >
> > >
> > >
> > > On Tue, Mar 25, 2014 at 9:13 AM, Vincent Mora
> > > <vincent.mora at oslandia.com>wrote:
> > >
> > > > On 25/03/2014 11:44, Even Rouault wrote:
> > > >
> > > >> Selon Vincent Mora <vincent.mora at oslandia.com>:
> > > >>
> > > >>  On 24/03/2014 21:46, Even Rouault wrote:
> > > >>>
> > > >>>> Hi,
> > > >>>>
> > > >>>> "Release soon, release early", so for people who like UML diagrams
> > > >>>> (there
> > > >>>>
> > > >>> is
> > > >>>
> > > >>>> also a prototype of C++ classes for those who don't like UML very
> > much),
> > > >>>>
> > > >>> here's
> > > >>>
> > > >>>> a blog entry with the outcome of my thoughts for a possible
> > > >>>> re-organisation
> > > >>>>
> > > >>> of
> > > >>>
> > > >>>> the GDAL/OGR class hierarchy
> > > >>>>
> > > >>>>
> > > >>>>  http://erouault.blogspot.ca/2014/03/draft-gdalogr-class-
> > > >> hierarchy-for-gdal.html
> > > >>
> > > >>> I don't understand the need for HandleRasterData() and
> > > >>> HandleVectorData().
> > > >>>
> > > >>> Isn't inheriting from GDALEmptyRasterDataset or
> > GDALEmptyVectorDataset
> > > >>> sufficient to convey the information that the class doesn't handle
> > those
> > > >>> kind of datasets.
> > > >>>
> > > >>> A call to GetLayerCount()/GetRasterCount() from the class user is
> > > >>> sufficient to say "no vector/raster data here", and a dynamic _cast
> > to
> > > >>> GDALEmptyVectorDataset/GDALEmptyRasterDataset is even clearer to me,
> > so
> > > >>> HandleRasterData()/HandleVectorData() would be a third way to tell
> > the
> > > >>> same thing.
> > > >>>
> > > >> Actually, when thinking more about this, this kind of information
> > should
> > > >> be at
> > > >> the driver level, and not at the dataset level. The idea is that there
> > > >> are use
> > > >> cases where you want to know if a driver can handle only vector, only
> > > >> raster, or
> > > >> both. For example if you still want to have separate Open dialog
> > boxes for
> > > >> raster or vector.
> > > >>
> > > >>> Also I'm not sure about the names GDALAbstract* since those are
> > partial
> > > >>> implementations.
> > > >>>
> > > >> I know I'm not very good at naming. Do you have an alternative
> > proposal ?
> > > >> The
> > > >> issue is that with my draft we end up with a lot of classes and
> > > >> interfaces, so
> > > >> it is not obvious to find a good name to reflect their content.
> > > >>
> > > > Partial sound ok to me, but I not so good at naming  ?
> > > >
> > > > Considering the number of classes, I gave it some thoughts this morning
> > > > and, like Dmitry, thought of merging the Abtract (Partial) into the
> > > > interface before realizing that, even if it works (you can overload de
> > > > default function in Empty) it's a bit ugly and I ended up preferring
> > your
> > > > solution.
> > > >
> > > > An altenative would be to have a Dataset with both aspects and provide
> > > > three partial specialisations: one for vector (it will behave like
> > empty
> > > > raster) one for raster, and one for both. Code duplications could be
> > > > avoided by implementing protected member functions in the Dataset
> > class and
> > > > simply calling them in the implementations of partial specialization.
> > This
> > > > solution avoid the diamond shaped inheritance diagram of hell :)
> > > >
> > > >    Even
> > > >>
> > > >>
> > > >>
> > > > _______________________________________________
> > > > gdal-dev mailing list
> > > > gdal-dev at lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > >
> > >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>



From ridgewang at gmail.com  Thu Mar 27 04:24:46 2014
From: ridgewang at gmail.com (ridgewang)
Date: Thu, 27 Mar 2014 19:24:46 +0800
Subject: [gdal-dev] gdal_merge gdal-dev Digest, Vol 118, Issue 59
In-Reply-To: <mailman.20156.1395914483.24729.gdal-dev@lists.osgeo.org>
References: <mailman.20156.1395914483.24729.gdal-dev@lists.osgeo.org>
Message-ID: <8C059173-7E27-4E00-A841-73492A027B5C@gmail.com>

Hi,
     I need to merge two images and want get a smooth blending effect in the overlap region of the two images. I have not get a successful result by trying gdal_merge.py. Using the gdalwarp,I just got a result that one image replaces the other within the overlay region and a sharpen seamline. 

???? iPhone

? 2014-3-27?18:01?gdal-dev-request at lists.osgeo.org ???

> Jean-Claude Repetto <jrepetto at free.fr>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140327/05b52b99/attachment.html>

From etourigny.dev at gmail.com  Thu Mar 27 04:46:07 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 27 Mar 2014 08:46:07 -0300
Subject: [gdal-dev] gdal-dev Digest, Vol 118, Issue 58
In-Reply-To: <2A24D704-E31C-4D4B-8EBB-B06D7D9D1F2B@gmail.com>
References: <mailman.51.1395860419.2488.gdal-dev@lists.osgeo.org>
	<2A24D704-E31C-4D4B-8EBB-B06D7D9D1F2B@gmail.com>
Message-ID: <CA+TxYvMhdMSTahJYvF72gxhOcbCozgx-=ZnEFX5Q6WzAFD_2fg@mail.gmail.com>

On Thu, Mar 27, 2014 at 3:21 AM, ridgewang <ridgewang at gmail.com> wrote:

> Hi?
>     I have 2 suggestions?
> 1. supply an option that can build the gdal using the static c++ runtime
> library, so we can use it not depends on the msvcr80.dll and msvcp80.dll.
>
> 2. provide a gdal_merge.exe utility program with the same function as
> gdal_merge.py.
>

you can use the gdalwarp utility instead - it works better for me anyway.


>
> here are the reasons I raise it:
> 1. I write a COM component using gdal  library, but I can not register the
> component correction, maybe the version in my computer is not right and I
> donot known how to build a static version not using the vc runtime library.
>
> 2. I do not known how to run the python utility and it always reports
> cannot find the _gdal module, and I had tried many times and had set the
> pythonpath environment variance.
>
> And who can kindly teach me how to solve the first problem. Maybe I can
> add some switch option to the compile configuration file?
>
> Ridge
>
>
>
>
>
>
> ? 2014-3-27?3:00?gdal-dev-request at lists.osgeo.org ???
>
> > Send gdal-dev mailing list submissions to
> >    gdal-dev at lists.osgeo.org
> >
> > To subscribe or unsubscribe via the World Wide Web, visit
> >    http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > or, via email, send a message with subject or body 'help' to
> >    gdal-dev-request at lists.osgeo.org
> >
> > You can reach the person managing the list at
> >    gdal-dev-owner at lists.osgeo.org
> >
> > When replying, please edit your Subject line so it is more specific
> > than "Re: Contents of gdal-dev digest..."
> >
> >
> > Today's Topics:
> >
> >   1. Re: GDAL 1.11 release plan (Even Rouault)
> >
> >
> > ----------------------------------------------------------------------
> >
> > Message: 1
> > Date: Wed, 26 Mar 2014 16:16:24 +0100
> > From: Even Rouault <even.rouault at mines-paris.org>
> > To: Olivier BARTHELEMY <barthelemy at geovariances.com>
> > Cc: gdal-dev at lists.osgeo.org
> > Subject: Re: [gdal-dev] GDAL 1.11 release plan
> > Message-ID: <1395846984.5332ef48e324c at imp.free.fr>
> > Content-Type: text/plain; charset=ISO-8859-15
> >
> > Selon Olivier BARTHELEMY <barthelemy at geovariances.com>:
> >
> > I've fixed the one in adrgdataset.cpp.
> > gifalloc.c, degrib18, hdf-eos are third-party code "imported" into GDAL
> tree. So
> > the best way would be to fix the issues upstream (if fix is actually
> needed) and
> > then downstream into GDAL.
> > I've analyze errors reported in rasterlitedataset.cpp, ogrdatasource.cpp,
> > ogrpgdatasource.cpp and strtod, and they are false positives.  So the
> rate of
> > false positives with cppcheck is quite significant.
> > I haven't looked at the other files that I'm less familiar with.
> >
> > Even
> >
> >> Here is what cppcheck 1.64 reports as 'errors' in gdal-1.10.1:
> >>
> >> [frmts\adrg\adrgdataset.cpp:1071]: (error) Memory leak: TILEINDEX
> >> [frmts\coasp\coasp_dataset.cpp:199]: (error) Undefined behavior:
> Variable
> >> 'pszItemValue' is used as parameter and destination in s[n]printf().
> >> [frmts\dted\dted_create.c:181]: (error) Resource leak: fp
> >> [frmts\envisat\EnvisatFile.c:286]: (error) Memory leak: self
> >> [frmts\envisat\EnvisatFile.c:609]: (error) Memory leak: dsd_text
> >> [frmts\envisat\EnvisatFile.c:1776]: (error) Memory leak: entry
> >> [frmts\georaster\georaster_dataset.cpp:188]: (error) Possible null
> pointer
> >> dereference: poGRD
> >> [frmts\georaster\georaster_dataset.cpp:189]: (error) Possible null
> pointer
> >> dereference: poGRD
> >> [frmts\georaster\georaster_dataset.cpp:190]: (error) Possible null
> pointer
> >> dereference: poGRD
> >> [frmts\georaster\georaster_dataset.cpp:191]: (error) Possible null
> pointer
> >> dereference: poGRD
> >> [frmts\georaster\oci_wrapper.cpp:1590]: (error) Pointer to local array
> >> variable returned.
> >> [frmts\gif\giflib\gifalloc.c:67]: (error) Memory leak: Object
> >> [frmts\grib\degrib18\degrib\clock.c:2071]: (error) Common realloc
> mistake:
> >> 'Stack' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\clock.c:2175]: (error) Common realloc
> mistake:
> >> 'Rel' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\clock.c:2197]: (error) Common realloc
> mistake:
> >> 'Rel' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\clock.c:2209]: (error) Common realloc
> mistake:
> >> 'Rel' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\grib2api.c:594]: (error) Uninitialized
> >> variable: igdstmpl
> >> [frmts\grib\degrib18\degrib\metaparse.cpp:2628]: (error) Common realloc
> >> mistake: 'freq' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\myerror.c:109]: (error) Common realloc
> mistake:
> >> 'buffer' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\myerror.c:126]: (error) Common realloc
> mistake:
> >> 'buffer' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\myerror.c:132]: (error) Common realloc
> mistake:
> >> 'buffer' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\myerror.c:149]: (error) Common realloc
> mistake:
> >> 'buffer' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\myerror.c:158]: (error) Common realloc
> mistake:
> >> 'buffer' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\myerror.c:187]: (error) Common realloc
> mistake:
> >> 'buffer' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\myerror.c:195]: (error) Common realloc
> mistake:
> >> 'buffer' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\myerror.c:203]: (error) Common realloc
> mistake:
> >> 'buffer' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\myerror.c:211]: (error) Common realloc
> mistake:
> >> 'buffer' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\myerror.c:218]: (error) Common realloc
> mistake:
> >> 'buffer' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\myerror.c:229]: (error) Common realloc
> mistake:
> >> 'buffer' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\myerror.c:241]: (error) Common realloc
> mistake:
> >> 'buffer' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\myerror.c:257]: (error) Common realloc
> mistake:
> >> 'buffer' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\myerror.c:442]: (error) Common realloc
> mistake:
> >> 'preBuffer' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\myerror.c:534]: (error) Common realloc
> mistake:
> >> 'buff' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\myutil.c:85]: (error) Common realloc
> mistake:
> >> 'buffer' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\myutil.c:92]: (error) Common realloc
> mistake:
> >> 'buffer' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\myutil.c:99]: (error) Common realloc
> mistake:
> >> 'buffer' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\myutil.c:149]: (error) Common realloc
> mistake:
> >> 'argv' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\tdlpack.cpp:3256]: (error) Common realloc
> >> mistake: 'subGroup' nulled but not freed upon failure
> >> [frmts\grib\degrib18\degrib\tdlpack.cpp:4179]: (error) Read and write
> >> operations without a call to a positioning function (fseek, fsetpos or
> >> rewind) or fflush in between result in undefined behaviour.
> >> [frmts\grib\degrib18\g2clib-1.0.4\compack.c:159]: (error) Uninitialized
> >> variable: ival1
> >> [frmts\grib\degrib18\g2clib-1.0.4\comunpack.c:198]: (error) Memory leak:
> >> ifld
> >> [frmts\grib\degrib18\g2clib-1.0.4\misspack.c:203]: (error) Uninitialized
> >> variable: ival1
> >> [frmts\grib\degrib18\g2clib-1.0.4\misspack.c:118]: (error) Uninitialized
> >> variable: rmisss
> >> [frmts\grib\degrib18\g2clib-1.0.4\pngunpack.c:61]: (error) Memory leak:
> ifld
> >> [frmts\grib\degrib18\g2clib-1.0.4\pngunpack.c:61]: (error) Memory leak:
> >> ctemp
> >> [frmts\hdf4\hdf-eos\EHapi.c:2315]: (error) Common realloc mistake:
> >> 'metabuf' nulled but not freed upon failure
> >> [frmts\hdf4\hdf-eos\EHapi.c:3665]: (error) Common realloc mistake:
> >> 'EHXtypeTable' nulled but not freed upon failure
> >> [frmts\hdf4\hdf-eos\EHapi.c:3668]: (error) Common realloc mistake:
> >> 'EHXacsTable' nulled but not freed upon failure
> >> [frmts\hdf4\hdf-eos\EHapi.c:3671]: (error) Common realloc mistake:
> >> 'EHXfidTable' nulled but not freed upon failure
> >> [frmts\hdf4\hdf-eos\EHapi.c:3674]: (error) Common realloc mistake:
> >> 'EHXsdTable' nulled but not freed upon failure
> >> [frmts\hdf4\hdf-eos\GDapi.c:2411]: (error) Array 'HDFcomp[5]' accessed
> at
> >> index 19, which is out of bounds.
> >> [frmts\hdf4\hdf-eos\GDapi.c:2177]: (error) Array 'originNames[4]'
> accessed
> >> at index 15, which is out of bounds.
> >> [frmts\hdf4\hdf-eos\GDapi.c:2292]: (error) Array 'pixregNames[2]'
> accessed
> >> at index 7, which is out of bounds.
> >> [frmts\hdf4\hdf-eos\SWapi.c:4995]: (error) Memory leak: fillbuf
> >> [frmts\hdf4\hdf-eos\SWapi.c:5615]: (error) Memory leak: flag
> >> [frmts\hdf4\hdf-eos\SWapi.c:6239]: (error) Memory leak: flag
> >> [frmts\idrisi\IdrisiDataset.cpp:1886]: (error) syntax error
> >> [frmts\ilwis\ilwisdataset.cpp:1425]: (error) syntax error
> >> [frmts\msg\msgdataset.cpp:532]: (error) Object pointed by an 'auto_ptr'
> is
> >> destroyed using operator 'delete'. You should not use 'auto_ptr' for
> >> pointers obtained with operator 'new[]'.
> >> [frmts\netcdf\netcdfdataset.cpp:5997]: (error) Uninitialized variable:
> >> strtime
> >> [frmts\pcidsk\sdk\core\pcidsk_utils.cpp:644]: (error) Common realloc
> >> mistake: 'pszWorkBuffer' nulled but not freed upon failure
> >> [frmts\pcidsk\sdk\core\pcidskexception.cpp:170]: (error) Common realloc
> >> mistake: 'pszWorkBuffer' nulled but not freed upon failure
> >> [frmts\png\libpng\pngrutil.c:996]: (error) Uninitialized variable:
> igamma
> >> [frmts\rasterlite\rasterlitedataset.cpp:1179]: (error) Possible null
> >> pointer dereference: poDS
> >> [frmts\rasterlite\rasterlitedataset.cpp:1185]: (error) Possible null
> >> pointer dereference: poDS
> >> [frmts\rasterlite\rasterlitedataset.cpp:1186]: (error) Possible null
> >> pointer dereference: poDS
> >> [frmts\rasterlite\rasterlitedataset.cpp:1187]: (error) Possible null
> >> pointer dereference: poDS
> >> [frmts\rasterlite\rasterlitedataset.cpp:1188]: (error) Possible null
> >> pointer dereference: poDS
> >> [frmts\rasterlite\rasterlitedataset.cpp:1190]: (error) Possible null
> >> pointer dereference: poDS
> >> [frmts\rasterlite\rasterlitedataset.cpp:1191]: (error) Possible null
> >> pointer dereference: poDS
> >> [frmts\rasterlite\rasterlitedataset.cpp:1192]: (error) Possible null
> >> pointer dereference: poDS
> >> [frmts\rasterlite\rasterlitedataset.cpp:1193]: (error) Possible null
> >> pointer dereference: poDS
> >> [frmts\rasterlite\rasterlitedataset.cpp:1194]: (error) Possible null
> >> pointer dereference: poDS
> >> [frmts\rasterlite\rasterlitedataset.cpp:1195]: (error) Possible null
> >> pointer dereference: poDS
> >> [frmts\rasterlite\rasterlitedataset.cpp:1196]: (error) Possible null
> >> pointer dereference: poDS
> >> [frmts\rasterlite\rasterlitedataset.cpp:1267]: (error) Possible null
> >> pointer dereference: poDS
> >> [frmts\raw\atlsci_spheroid.cpp:122]: (error) syntax error
> >> [frmts\raw\mffdataset.cpp:1451]: (error) syntax error
> >> [frmts\sgi\sgidataset.cpp:523]: (error) Using 'memcpy' on struct that
> >> contains a 'std::string'.
> >> [ogr\ogrsf_frmts\dgn\dgnhelp.cpp:1379]: (error) syntax error
> >> [ogr\ogrsf_frmts\dwg\ogrdwglayer.cpp:323]: (error) Invalid number of
> >> character ({) when these macros are defined: 'notdef'.
> >> [ogr\ogrsf_frmts\filegdb\FGdbLayer.cpp:1914]: (error) syntax error
> >> [ogr\ogrsf_frmts\generic\ogrdatasource.cpp:1425]: (error) Possible null
> >> pointer dereference: papoSrcLayers
> >> [ogr\ogrsf_frmts\mitab\mitab_coordsys.cpp:747]: (error) Buffer is
> accessed
> >> out of bounds.
> >> [ogr\ogrsf_frmts\mitab\mitab_geometry.cpp:223]: (error) Memory leak:
> >> xintersect
> >> [ogr\ogrsf_frmts\ntf\ntffilereader.cpp:260]: (error) Memory pointed to
> by
> >> 'poRecord' is freed twice.
> >> [ogr\ogrsf_frmts\pg\ogrpgdatasource.cpp:1102]: (error) Memory leak:
> poLayer
> >> [ogr\ogrsf_frmts\shape\shptree.c:241]: (error) Memory leak: psTree
> >> [port\cpl_minizip_zip.cpp:608]: (error) Memory leak: zi
> >> [port\cpl_strtod.cpp:67]: (error) Division by zero.
> >>
> >> I'd be happy to provide fix patches, but i have not much time at the
> >> moment, so it won't be before a 1.11 release.
> >>
> >> If you want to see the other 'warnings', and get un updated report on
> GDAL
> >> trunk, maybe you could ask to those who manage
> >> http://debbie.postgis.net:8080/view/GDAL/ to add the cppcheck plugin to
> >> their Jenkins?
> >>
> >>
> >> 2014-03-26 9:15 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:
> >>
> >>> Hi Olivier,
> >>>
> >>> If you could share with us the errors that have been reported (and the
> >>> options
> >>> you have used to pass cppcheck on GDAL source), that would be a good
> >>> contribution. Even better if you can submit a patch to fix them ;-)
> >>> Not saying they shouldn't be fixed, but I don't see that as a blocker
> point
> >>> however, unless they show up in nominal code paths. They have likely
> >>> existed for
> >>> years.
> >>> We also have registered GDAL to the Coverity scanner, and we try to fix
> >>> errors
> >>> that are reported in new code.
> >>>
> >>> Even
> >>>
> >>>> I think you should take a look at what cppcheck finds when scanning
> GDAL
> >>>> source before the next release. There are a few tens of small errors.
> >>>> Mostly, small leaks in particalr cases. Not very important errors, but
> >>> that
> >>>> ought to be fixed before doing an release in my opinion
> >>>>
> >>>>
> >>>> 2014-03-26 8:49 GMT+01:00 Paul Meems <bontepaarden at gmail.com>:
> >>>>
> >>>>> +1 for adding VS2013 binaries in GISInternals
> >>>>>
> >>>>> Thanks,
> >>>>>
> >>>>> Paul
> >>>>>
> >>>>> *Paul Meems *
> >>>>> Release manager, configuration manager
> >>>>> and forum moderator of MapWindow GIS.
> >>>>> www.mapwindow.org
> >>>>>
> >>>>> Owner of MapWindow.nl - Support for
> >>>>> Dutch speaking users.
> >>>>> www.mapwindow.nl
> >>>>>
> >>>>>
> >>>>>
> >>>>> *Join us at the MapWindow GIS Conference 2014
> >>>>> <http://geogis.detek.unideb.hu/TKonferencia/2014/>, in Debrecen
> >>> Hungary*
> >>>>>
> >>>>>
> >>>>> 2014-03-26 6:25 GMT+01:00 xavier lhomme <lhomme.xavier at gmail.com>:
> >>>>>
> >>>>> Hi
> >>>>>>  Adding Visual Studio 2012 2013 in GISInternals for Gdal 1.11 should
> >>> be
> >>>>>> great too.
> >>>>>> Xav
> >>>>>> Le 25 mars 2014 22:57, "Tamas Szekeres" <szekerest at gmail.com> a
> >>> ?crit :
> >>>>>>
> >>>>>> That sounds good to me.
> >>>>>>>
> >>>>>>> Best regards,
> >>>>>>>
> >>>>>>> Tamas
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>> 2014-03-25 22:37 GMT+01:00 Even Rouault <
> >>> even.rouault at mines-paris.org>:
> >>>>>>>
> >>>>>>>> Hi,
> >>>>>>>>
> >>>>>>>> GDAL 1.10 was released about one year ago, so it is time to think
> >>> about
> >>>>>>>> the next
> >>>>>>>> release. I think we should just call it 1.11 given that there are
> no
> >>>>>>>> major
> >>>>>>>> architectural changes (although there have been non trivial
> changes
> >>> in
> >>>>>>>> RAT
> >>>>>>>> management and for multiple geometry field support, but that only
> >>>>>>>> impacts core &
> >>>>>>>> drivers), and the C API and ABI is still preserved (for those who
> >>> have
> >>>>>>>> looked at
> >>>>>>>> the other thread, my experiments on unification are *not* in
> trunk).
> >>>>>>>> For the
> >>>>>>>> details, I have initiated the preliminary NEWS :
> >>>>>>>> http://trac.osgeo.org/gdal/export/27091/trunk/gdal/NEWS (*)
> >>>>>>>> There are some mentions to 2.0 in the documentation of new
> features,
> >>>>>>>> but I'll
> >>>>>>>> end up fixing them to reflect the 1.11 numbering.
> >>>>>>>>
> >>>>>>>> I think we are in a good shape to start the beta phase soon. If
> >>> people
> >>>>>>>> have
> >>>>>>>> features or bug fixes almost ready that they'd like to be in 1.11,
> >>>>>>>> please speak
> >>>>>>>> up now. Otherwise I suggest issuing a beta-1 at the end of next
> >>> week,
> >>>>>>>> give it a
> >>>>>>>> week for testing, and depending on the outcome, issue a beta-2, or
> >>> just
> >>>>>>>> try
> >>>>>>>> RC-1. Unless someone volunteers (the process is fairly well
> >>> documented
> >>>>>>>> in
> >>>>>>>> HOWTO-RELEASE), I can be release manager for 1.11.
> >>>>>>>>
> >>>>>>>> Any opinion about that plan ?
> >>>>>>>>
> >>>>>>>> Best regards,
> >>>>>>>>
> >>>>>>>> Even
> >>>>>>>>
> >>>>>>>> --
> >>>>>>>> Geospatial professional services
> >>>>>>>> http://even.rouault.free.fr/services.html
> >>>>>>>> _______________________________________________
> >>>>>>>> gdal-dev mailing list
> >>>>>>>> gdal-dev at lists.osgeo.org
> >>>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>> _______________________________________________
> >>>>>>> gdal-dev mailing list
> >>>>>>> gdal-dev at lists.osgeo.org
> >>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>>>>>>
> >>>>>>
> >>>>>> _______________________________________________
> >>>>>> gdal-dev mailing list
> >>>>>> gdal-dev at lists.osgeo.org
> >>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>>>>>
> >>>>>
> >>>>>
> >>>>> _______________________________________________
> >>>>> gdal-dev mailing list
> >>>>> gdal-dev at lists.osgeo.org
> >>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>>>>
> >>>>
> >>>>
> >>>>
> >>>> --
> >>>> [image: Geovariances]
> >>>>
> >>>> Olivier BARTHELEMY *Software development engineer*
> >>>> Geovariances, 49bis avenue Franklin Roosevelt - 77215 AVON CEDEX -
> FRANCE
> >>>> | www.geovariances.com <http://link.geovariances.com/eml-home>
> >>>> Keep posted about Geovariances   <
> >>> http://link.geovariances.com/eml-geowidget>
> >>>>    <http://link.geovariances.com/eml-linkedin-gv>
> >>>> <http://link.geovariances.com/eml-linkedin>
> >>>>    <http://link.geovariances.com/eml-twitter>
> >>>> <http://link.geovariances.com/eml-youtube>
> >>>>    <http://link.geovariances.com/eml-slideshare>
> >>>>
> >>>
> >>>
> >>>
> >>
> >>
> >> --
> >> [image: Geovariances]
> >>
> >> Olivier BARTHELEMY *Software development engineer*
> >> Geovariances, 49bis avenue Franklin Roosevelt - 77215 AVON CEDEX -
> FRANCE
> >> | www.geovariances.com <http://link.geovariances.com/eml-home>
> >> Keep posted about Geovariances   <
> http://link.geovariances.com/eml-geowidget>
> >>    <http://link.geovariances.com/eml-linkedin-gv>
> >> <http://link.geovariances.com/eml-linkedin>
> >>    <http://link.geovariances.com/eml-twitter>
> >> <http://link.geovariances.com/eml-youtube>
> >>    <http://link.geovariances.com/eml-slideshare>
> >>
> >
> >
> >
> >
> > ------------------------------
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > End of gdal-dev Digest, Vol 118, Issue 58
> > *****************************************
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140327/473cd92d/attachment-0001.html>

From mateusz at loskot.net  Thu Mar 27 05:32:23 2014
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Thu, 27 Mar 2014 13:32:23 +0100
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <1395915887.5333fc6f8bc4c@imp.free.fr>
References: <1395694013.533099bdba7cb@imp.free.fr>
	<53314406.7090903@oslandia.com>
	<1395744290.53315e2221801@imp.free.fr> <533172EB.9070107@oslandia.com>
	<CA+TxYvNW8RtxVN6NEn4oDsbWVw4YKZG5ZkAqnKnVzyyt1YFubw@mail.gmail.com>
	<1395778445.5331e38da2d6a@imp.free.fr>
	<CAL81ghATCsy0vq3RmNAqmvbpose5qVzcuD-TdSM_ycvS46UANA@mail.gmail.com>
	<1395915887.5333fc6f8bc4c@imp.free.fr>
Message-ID: <CABUeae8dBqXQ0b2-n+wrVhTaD+B6Ftcag2Mi65cmSs=KpT4-JQ@mail.gmail.com>

On 27 March 2014 11:24, Even Rouault <even.rouault at mines-paris.org> wrote:
>>
>> Is it possible to put it as a member in classes ?
>
> That could have been a way of doing it, yes. Always the debate composition vs
> inheritance.

The base classes for raster and vector datasets could have common base class.
The mixed raster/vector dataset could be defined as a composite of the
former two.

Best regards,
-- 
Mateusz  ?oskot, http://mateusz.loskot.net

From fjitiaux at gmail.com  Thu Mar 27 05:39:49 2014
From: fjitiaux at gmail.com (Florent JITIAUX)
Date: Thu, 27 Mar 2014 13:39:49 +0100
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <1395915887.5333fc6f8bc4c@imp.free.fr>
References: <1395694013.533099bdba7cb@imp.free.fr>
	<53314406.7090903@oslandia.com>
	<1395744290.53315e2221801@imp.free.fr>
	<533172EB.9070107@oslandia.com>
	<CA+TxYvNW8RtxVN6NEn4oDsbWVw4YKZG5ZkAqnKnVzyyt1YFubw@mail.gmail.com>
	<1395778445.5331e38da2d6a@imp.free.fr>
	<CAL81ghATCsy0vq3RmNAqmvbpose5qVzcuD-TdSM_ycvS46UANA@mail.gmail.com>
	<1395915887.5333fc6f8bc4c@imp.free.fr>
Message-ID: <CAL81ghAnJD2jyhSybZ+HXYsF3TXnexY29wktM++AgdJxsVyNFQ@mail.gmail.com>

2014-03-27 11:24 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:

> Hi,
>
> > Hi all,
> >
> > MY opinion is that's not a really good way to count how many classes you
> > will have and trying to have minimal classes.
> >
> > Drawing a model with UML is not easy : it's not easy to have a good model
> > from the beginning, it's not easy to name all members and methods
> > correctly, and the worst is inheritance.
> > You can think you spend too much time to make the model. But you can't
> say
> > if you will spend less or much time to change code because your model was
> > too simple.
>
> The issue is that I'm trying to "refactor" a code base of 1.2 million
> lines of
> C/C++ code (not mentionning the 140 000 lines of Python tests), and with
> 211
> existing drivers. So, given that nobody will probably ever want to fund the
> effort, it is completely excluded to have to edit each of those drivers in
> a non
> automated way...
> The end solution will necessary be a compromise. I would also like the
> existing
> C API to continue working as much as possible.
>
> That was not a reproach because I know refactoring may be very difficult
and it's takes so much time. But that's why making a model which can evolve
is important.


> >
> > Because I don't know all the model of Gdal and the model can be "reset" I
> > have some questions :
> >
> > 1) Why GDALMajorObject not inherit of GDALIMajorObject ?
>
> It was just an omission in the UML diagram. My C++ sketch had this
> inheritance.
>
> >
> > 2) Why all classes inherit (directly or not) of GDALMajorObject ?
>
> That's how it is done currently.
>
> > What do
> > you store in it ?
>
> It contains a list of list of strings, or in more concrete terms, metadata
> domains that contain metadata items.
>
> > Is it possible to put it as a member in classes ?
>
> That could have been a way of doing it, yes. Always the debate composition
> vs
> inheritance.
>
> The question is : classes (Raster, Driver, ...) are a GDALMajorObject or
classes have a GDALMajorObject ? If it's just a list (map with key/value ?)
of String, I'm not sure it defines what subclasses are.

I know it's not important for a lot of people but I like when a model is
precise. At the beginning, you could only draw interfaces to define what
classes and subclasses are.


> > Have
> > you consider templates ?
>
> Actually, no. I tend to avoid them unless they are an obvious solution.
>
> >
> > 3) An interface for Drivers ? geName(), getLongName(), getDescription() ?
> > Or maybe abstract ...
> >
> > 4) What is GDALDataset in your diagram ?
>
> It is the base class that a driver that supports both raster and vector
> would
> have to subclass.
>

I think I missed something : today is there a driver which support both ?


>
> >
> > 5) Where is the link between Driver (Gdal/Ogr) and Dataset
> (Raster/Vector)
> > ? Member, templates ?
>
> A Driver instanciates a Dataset by opening an existing one, or by creating
> a new
> one. But the Dataset object itself is a free-standing objects that is only
> owned
> by user code, and not by the Driver.
>
> For now, I've dropped my crazy UML diagram that nobody would be able to
> understand, even if I managed to make it work, and I'm pursuing my attempt
> just merging OGRDataSource inside GDALDataset. And make OGRDriver and
> OGRSFDriverRegistrar mostly disappear, or just create a minimized version
> of
> them, as compatibility layer for existing drivers, that forward the real
> work to
> GDALDriver and GDALDriverManager.
>
> Your diagram is understandable. This is just because everyone has his own
representation of a model and it is important (for me) to understand why
your model is like that. With good arguments people can agrees.


> Even
>

Florent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140327/5ab7b6a9/attachment.html>

From etourigny.dev at gmail.com  Thu Mar 27 05:40:15 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 27 Mar 2014 09:40:15 -0300
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <CABUeae8dBqXQ0b2-n+wrVhTaD+B6Ftcag2Mi65cmSs=KpT4-JQ@mail.gmail.com>
References: <1395694013.533099bdba7cb@imp.free.fr>
	<53314406.7090903@oslandia.com>
	<1395744290.53315e2221801@imp.free.fr>
	<533172EB.9070107@oslandia.com>
	<CA+TxYvNW8RtxVN6NEn4oDsbWVw4YKZG5ZkAqnKnVzyyt1YFubw@mail.gmail.com>
	<1395778445.5331e38da2d6a@imp.free.fr>
	<CAL81ghATCsy0vq3RmNAqmvbpose5qVzcuD-TdSM_ycvS46UANA@mail.gmail.com>
	<1395915887.5333fc6f8bc4c@imp.free.fr>
	<CABUeae8dBqXQ0b2-n+wrVhTaD+B6Ftcag2Mi65cmSs=KpT4-JQ@mail.gmail.com>
Message-ID: <CA+TxYvN0L-6yrhrp2T=ODmhZugdwFHTOOA3DqgWVYQru7NfirQ@mail.gmail.com>

How about multiple inheritance for mixed class?  Say you have a class for
rasters and a class for vectors, and a dataset that would support both
types would inherit from these two base classes.  Is that what you mean by
composite?

Etienne


On Thu, Mar 27, 2014 at 9:32 AM, Mateusz ?oskot <mateusz at loskot.net> wrote:

> On 27 March 2014 11:24, Even Rouault <even.rouault at mines-paris.org> wrote:
> >>
> >> Is it possible to put it as a member in classes ?
> >
> > That could have been a way of doing it, yes. Always the debate
> composition vs
> > inheritance.
>
> The base classes for raster and vector datasets could have common base
> class.
> The mixed raster/vector dataset could be defined as a composite of the
> former two.
>
> Best regards,
> --
> Mateusz  ?oskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140327/0afb5804/attachment.html>

From david.tran at hsr.ch  Thu Mar 27 05:51:01 2014
From: david.tran at hsr.ch (David Tran)
Date: Thu, 27 Mar 2014 13:51:01 +0100
Subject: [gdal-dev] Compile gdal/ogr with mingw
In-Reply-To: <5334156E.8060306@hsr.ch>
References: <5334156E.8060306@hsr.ch>
Message-ID: <53341EB5.9030700@hsr.ch>


Hi to everyone

Did somebody compile gdal/ogr with mingw?

I tried to compile gdal (static/shared) with MinGW without success of
calling the function OGRRegisterAll() in QT 5.2.1 (C++). Starting the
binary results in:

 > The program has unexpectedly finished.

I used those tutorials:

http://gvsigce.sourceforge.net/wiki/index.php/Compiling_the_C/C%2B%2B_support_libraries

http://trac.osgeo.org/gdal/wiki/BuildingWithMinGW

http://www.gdal.org/ogr/ogr_apitut.html

and this shell script with updated version numbers:

http://sourceforge.net/p/gvsigce/code/HEAD/tree/trunk/support/build_scripts/build_gdal_binaries_mingw.sh

My System:

Windows 8.1,
Expat 2.1.0
GDAL 1.10.1
Geos 3.4.2
Openssl 1.0.1f
PostgreSQL 9.3.4
Proj.4 4.8.0 (Datumgrid 1.6RC1)
Sqlite 3080401
zlib 1.2.8

Two versions of MinGW 32bit were used at the same time for gdal to compile:

http://sourceforge.net/projects/mingw/files/

and

http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win32/Personal%20Builds/rubenvb/gcc-4.8-release/i686-w64-mingw32-gcc-4.8.0-win32_rubenvb.7z/download

PATH: C:\MinGW\bin;C:\mingw32\bin

cheers
David



From mateusz at loskot.net  Thu Mar 27 06:05:29 2014
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Thu, 27 Mar 2014 14:05:29 +0100
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <CA+TxYvN0L-6yrhrp2T=ODmhZugdwFHTOOA3DqgWVYQru7NfirQ@mail.gmail.com>
References: <1395694013.533099bdba7cb@imp.free.fr>
	<53314406.7090903@oslandia.com>
	<1395744290.53315e2221801@imp.free.fr> <533172EB.9070107@oslandia.com>
	<CA+TxYvNW8RtxVN6NEn4oDsbWVw4YKZG5ZkAqnKnVzyyt1YFubw@mail.gmail.com>
	<1395778445.5331e38da2d6a@imp.free.fr>
	<CAL81ghATCsy0vq3RmNAqmvbpose5qVzcuD-TdSM_ycvS46UANA@mail.gmail.com>
	<1395915887.5333fc6f8bc4c@imp.free.fr>
	<CABUeae8dBqXQ0b2-n+wrVhTaD+B6Ftcag2Mi65cmSs=KpT4-JQ@mail.gmail.com>
	<CA+TxYvN0L-6yrhrp2T=ODmhZugdwFHTOOA3DqgWVYQru7NfirQ@mail.gmail.com>
Message-ID: <CABUeae-WweMNdjX6cHoV20dF6Y5rby_52rGUQFOmAASQwzT+Xg@mail.gmail.com>

On 27 March 2014 13:40, Etienne Tourigny <etourigny.dev at gmail.com> wrote:
> How about multiple inheritance for mixed class?  Say you have a class for
> rasters and a class for vectors, and a dataset that would support both types
> would inherit from these two base classes.  Is that what you mean by
> composite?

I meant separate base class for mixed dataset, then use "has a"
relationship, like in

class MixedDataset
{
public:
//
private:
RasterDataset* pDtsR
VectorDataset* pDtsV;
}


Best regards,
-- 
Mateusz  ?oskot, http://mateusz.loskot.net

From even.rouault at mines-paris.org  Thu Mar 27 06:08:28 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 27 Mar 2014 14:08:28 +0100
Subject: [gdal-dev] Compile gdal/ogr with mingw
In-Reply-To: <53341EB5.9030700@hsr.ch>
References: <5334156E.8060306@hsr.ch> <53341EB5.9030700@hsr.ch>
Message-ID: <1395925708.533422ccce855@imp.free.fr>

I haven't tried recently with mingw binaries in Windows, but the build with the
i586-mingw32msvc cross compiler from Linux works and the resulting executable
can pass the regression tests.

>
> Hi to everyone
>
> Did somebody compile gdal/ogr with mingw?
>
> I tried to compile gdal (static/shared) with MinGW without success of
> calling the function OGRRegisterAll() in QT 5.2.1 (C++). Starting the
> binary results in:
>
>  > The program has unexpectedly finished.
>
> I used those tutorials:
>
>
http://gvsigce.sourceforge.net/wiki/index.php/Compiling_the_C/C%2B%2B_support_libraries
>
> http://trac.osgeo.org/gdal/wiki/BuildingWithMinGW
>
> http://www.gdal.org/ogr/ogr_apitut.html
>
> and this shell script with updated version numbers:
>
>
http://sourceforge.net/p/gvsigce/code/HEAD/tree/trunk/support/build_scripts/build_gdal_binaries_mingw.sh
>
> My System:
>
> Windows 8.1,
> Expat 2.1.0
> GDAL 1.10.1
> Geos 3.4.2
> Openssl 1.0.1f
> PostgreSQL 9.3.4
> Proj.4 4.8.0 (Datumgrid 1.6RC1)
> Sqlite 3080401
> zlib 1.2.8
>
> Two versions of MinGW 32bit were used at the same time for gdal to compile:
>
> http://sourceforge.net/projects/mingw/files/
>
> and
>
>
http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win32/Personal%20Builds/rubenvb/gcc-4.8-release/i686-w64-mingw32-gcc-4.8.0-win32_rubenvb.7z/download
>
> PATH: C:\MinGW\bin;C:\mingw32\bin
>
> cheers
> David
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From even.rouault at mines-paris.org  Thu Mar 27 06:21:23 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 27 Mar 2014 14:21:23 +0100
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <CAL81ghAnJD2jyhSybZ+HXYsF3TXnexY29wktM++AgdJxsVyNFQ@mail.gmail.com>
References: <1395694013.533099bdba7cb@imp.free.fr>
	<53314406.7090903@oslandia.com>
	<1395744290.53315e2221801@imp.free.fr>
	<533172EB.9070107@oslandia.com>
	<CA+TxYvNW8RtxVN6NEn4oDsbWVw4YKZG5ZkAqnKnVzyyt1YFubw@mail.gmail.com>
	<1395778445.5331e38da2d6a@imp.free.fr>
	<CAL81ghATCsy0vq3RmNAqmvbpose5qVzcuD-TdSM_ycvS46UANA@mail.gmail.com>
	<1395915887.5333fc6f8bc4c@imp.free.fr>
	<CAL81ghAnJD2jyhSybZ+HXYsF3TXnexY29wktM++AgdJxsVyNFQ@mail.gmail.com>
Message-ID: <1395926483.533425d3d2d2e@imp.free.fr>

Selon Florent JITIAUX <fjitiaux at gmail.com>:

> 2014-03-27 11:24 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:
>
> > Hi,
> >
> > > Hi all,
> > >
> > > MY opinion is that's not a really good way to count how many classes you
> > > will have and trying to have minimal classes.
> > >
> > > Drawing a model with UML is not easy : it's not easy to have a good model
> > > from the beginning, it's not easy to name all members and methods
> > > correctly, and the worst is inheritance.
> > > You can think you spend too much time to make the model. But you can't
> > say
> > > if you will spend less or much time to change code because your model was
> > > too simple.
> >
> > The issue is that I'm trying to "refactor" a code base of 1.2 million
> > lines of
> > C/C++ code (not mentionning the 140 000 lines of Python tests), and with
> > 211
> > existing drivers. So, given that nobody will probably ever want to fund the
> > effort, it is completely excluded to have to edit each of those drivers in
> > a non
> > automated way...
> > The end solution will necessary be a compromise. I would also like the
> > existing
> > C API to continue working as much as possible.
> >
> > That was not a reproach because I know refactoring may be very difficult
> and it's takes so much time. But that's why making a model which can evolve
> is important.
>
>
> > >
> > > Because I don't know all the model of Gdal and the model can be "reset" I
> > > have some questions :
> > >
> > > 1) Why GDALMajorObject not inherit of GDALIMajorObject ?
> >
> > It was just an omission in the UML diagram. My C++ sketch had this
> > inheritance.
> >
> > >
> > > 2) Why all classes inherit (directly or not) of GDALMajorObject ?
> >
> > That's how it is done currently.
> >
> > > What do
> > > you store in it ?
> >
> > It contains a list of list of strings, or in more concrete terms, metadata
> > domains that contain metadata items.
> >
> > > Is it possible to put it as a member in classes ?
> >
> > That could have been a way of doing it, yes. Always the debate composition
> > vs
> > inheritance.
> >
> > The question is : classes (Raster, Driver, ...) are a GDALMajorObject or
> classes have a GDALMajorObject ? If it's just a list (map with key/value ?)
> of String, I'm not sure it defines what subclasses are.

Actually, my explanation was a bit simplified. A GDALMajorObject has a
GDALMultiDomainMetadata member, and that one is a list of list of strings that
have the key=value syntax. Could be more sophisticated. But that's an
implementation detail.
And I guess the reason that classes extend GDALMajorObject rather than have a
GDALMajorObject object was to save line of codes that are needed when you use
composition instead of inheritance (
http://en.wikipedia.org/wiki/Composition_over_inheritance )
I'm just explaining the current state of things in the GDAL world, and I didn't
really plan to change that.

> I think I missed something : today is there a driver which support both ?

Well, no. That's actually the reason for that temptative work. It is not
possible currently to have a raster+vector driver. For data containers that
support both, you have to implement currently both a GDAL driver and a OGR
driver. But for example you cannot safely open the GDAL dataset and OGR
datasource in update mode.

Even


From lucena_ivan at hotmail.com  Thu Mar 27 06:30:35 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Thu, 27 Mar 2014 09:30:35 -0400
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <CABUeae-WweMNdjX6cHoV20dF6Y5rby_52rGUQFOmAASQwzT+Xg@mail.gmail.com>
References: <1395694013.533099bdba7cb@imp.free.fr>,
	<53314406.7090903@oslandia.com>,
	<1395744290.53315e2221801@imp.free.fr>
	<533172EB.9070107@oslandia.com>,
	<CA+TxYvNW8RtxVN6NEn4oDsbWVw4YKZG5ZkAqnKnVzyyt1YFubw@mail.gmail.com>,
	<1395778445.5331e38da2d6a@imp.free.fr>,
	<CAL81ghATCsy0vq3RmNAqmvbpose5qVzcuD-TdSM_ycvS46UANA@mail.gmail.com>,
	<1395915887.5333fc6f8bc4c@imp.free.fr>,
	<CABUeae8dBqXQ0b2-n+wrVhTaD+B6Ftcag2Mi65cmSs=KpT4-JQ@mail.gmail.com>,
	<CA+TxYvN0L-6yrhrp2T=ODmhZugdwFHTOOA3DqgWVYQru7NfirQ@mail.gmail.com>,
	<CABUeae-WweMNdjX6cHoV20dF6Y5rby_52rGUQFOmAASQwzT+Xg@mail.gmail.com>
Message-ID: <BLU173-W21ADDE9BD276716506144790670@phx.gbl>

Hi there,

That is a great discussion and I applause Evens efforts and all the contributions, so but don't get me wrong by asking that:

What do we want to accomplish with that class hierarchy?

Will GDAL 2.0 be able to do thinks like:

$ gdalinfo <dataset>

And the proposed classes will be able to figure out what kind of dataset is that?

It could be:

- raster file
- vector file
- cvs file or dbf file
- some kind of server-based connection string for raster or vector
- some kind of service connection string for raster or vector
- multi-dataset raster file like HDF, NetCDF

Will the GDAL Open mechanism probe for all those possibilities?

My best regards,

Ivan

> From: mateusz at loskot.net
> Date: Thu, 27 Mar 2014 14:05:29 +0100
> To: etourigny.dev at gmail.com
> CC: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
> 
> On 27 March 2014 13:40, Etienne Tourigny <etourigny.dev at gmail.com> wrote:
> > How about multiple inheritance for mixed class?  Say you have a class for
> > rasters and a class for vectors, and a dataset that would support both types
> > would inherit from these two base classes.  Is that what you mean by
> > composite?
> 
> I meant separate base class for mixed dataset, then use "has a"
> relationship, like in
> 
> class MixedDataset
> {
> public:
> //
> private:
> RasterDataset* pDtsR
> VectorDataset* pDtsV;
> }
> 
> 
> Best regards,
> -- 
> Mateusz  ?oskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140327/cc46f4a4/attachment.html>

From david.tran at hsr.ch  Thu Mar 27 06:59:37 2014
From: david.tran at hsr.ch (David Tran)
Date: Thu, 27 Mar 2014 14:59:37 +0100
Subject: [gdal-dev] Compile gdal/ogr with mingw
In-Reply-To: <1395925708.533422ccce855@imp.free.fr>
References: <5334156E.8060306@hsr.ch> <53341EB5.9030700@hsr.ch>
	<1395925708.533422ccce855@imp.free.fr>
Message-ID: <53342EC9.8060300@hsr.ch>

Hi Even

Thanks for your input.

i586-mingw32msvc in Ubuntu 13.10 compiles gdal without errors. Some test 
code:

> #include <iostream>
> #include "ogrsf_frmts.h"
>
> int main() {
> 	std::cerr << "Hello World!" << std::endl;
> 	OGRRegisterAll();
> }

Result:
"Hello World!" does not show in the console with the function 
OGRRegisterAll().

Do you know why it doesn't work? Any other ideas?

Cheers
David

-------- Original Message  --------
Subject: Re: [gdal-dev] Compile gdal/ogr with mingw
From: Even Rouault <even.rouault at mines-paris.org>
To: David Tran <david.tran at hsr.ch>
Date: Thursday, 27. March 2014 14:08:28

> I haven't tried recently with mingw binaries in Windows, but the build with the
> i586-mingw32msvc cross compiler from Linux works and the resulting executable
> can pass the regression tests.
>
>>
>> Hi to everyone
>>
>> Did somebody compile gdal/ogr with mingw?
>>
>> I tried to compile gdal (static/shared) with MinGW without success of
>> calling the function OGRRegisterAll() in QT 5.2.1 (C++). Starting the
>> binary results in:
>>
>>   > The program has unexpectedly finished.
>>
>> I used those tutorials:
>>
>>
> http://gvsigce.sourceforge.net/wiki/index.php/Compiling_the_C/C%2B%2B_support_libraries
>>
>> http://trac.osgeo.org/gdal/wiki/BuildingWithMinGW
>>
>> http://www.gdal.org/ogr/ogr_apitut.html
>>
>> and this shell script with updated version numbers:
>>
>>
> http://sourceforge.net/p/gvsigce/code/HEAD/tree/trunk/support/build_scripts/build_gdal_binaries_mingw.sh
>>
>> My System:
>>
>> Windows 8.1,
>> Expat 2.1.0
>> GDAL 1.10.1
>> Geos 3.4.2
>> Openssl 1.0.1f
>> PostgreSQL 9.3.4
>> Proj.4 4.8.0 (Datumgrid 1.6RC1)
>> Sqlite 3080401
>> zlib 1.2.8
>>
>> Two versions of MinGW 32bit were used at the same time for gdal to compile:
>>
>> http://sourceforge.net/projects/mingw/files/
>>
>> and
>>
>>
> http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win32/Personal%20Builds/rubenvb/gcc-4.8-release/i686-w64-mingw32-gcc-4.8.0-win32_rubenvb.7z/download
>>
>> PATH: C:\MinGW\bin;C:\mingw32\bin
>>
>> cheers
>> David
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>

From Michael.Smith at maine.gov  Thu Mar 27 07:21:18 2014
From: Michael.Smith at maine.gov (Smith, Michael)
Date: Thu, 27 Mar 2014 14:21:18 +0000
Subject: [gdal-dev] HOW-TO convert USGS topo to GTiff
Message-ID: <8927DBC1C0E7CB4A9823B7478829091D4F0D0706@OIT-TEAQEXMBX01.som.w2k.state.me.us>

I have had several people send me follow-up emails about converting the USGS eTopos (you can download these from store.usgs.gov), so I thought it might make sense to just post this to the list as a HOW-TO.  Apologies for cross-post.

The challenge is to take the GeoPDF that you download from USGS and make it into a series of TIFFs you can mosaic together.  This requires at least GDAL 1.8 and for full functionality you want 1.10.

First, the simplest syntax would be

gdal_translate topo.pdf topo.tif

That would give you a GeoTiff with all the layers turned on, rendered at 150 dpi.  Easy enough.

However, depending on what you want, you may want to alter that.  For example the GeoPDF renders differently as you zoom in; it has scale-dependent rendering.  So you may want to change the dpi to a higher number.  I did all mine at 300 dpi which seemed to fit a 24k rendering in ArcMap and looks nice on the screen.

gdal_translate --config GDAL_PDF_DPI 300 topo.pdf topo.tif

That still has all the layers turned on though.  You may want some of them off.  For example, you may want to turn off the NAIP data and the UTM grid (like I did).  If so you can specify certain LAYERS to turn off, first you have to figure out what they are with this (this requires GDAL 1.10):

gdal_info -mdd LAYERS topo.pdf

will return the metadata and a list of layers something like this:
<snip>
Metadata (LAYERS):
  LAYER_00_NAME=Map_Collar
  LAYER_01_NAME=Map_Collar.Map_Elements
  LAYER_02_NAME=Map_Frame
  LAYER_03_NAME=Map_Frame.Projection_and_Grids
  LAYER_04_NAME=Map_Frame.Projection_and_Grids.Projection_Coordinate_Values
  LAYER_05_NAME=Map_Frame.Projection_and_Grids.Geographic_and_Grid_Ticks
  LAYER_06_NAME=Map_Frame.Projection_and_Grids.Projection_Line_Mask
  LAYER_07_NAME=Map_Frame.Projection_and_Grids.Grid_Lines
<snip>
  LAYER_28_NAME=Map_Frame.Land_Cover.Woodland
  LAYER_29_NAME=Images
  LAYER_30_NAME=Images.Orthoimage
<snip>

So I'm looking to get rid of layer 7 and layer 30.  The syntax for that uses the layer name like this:

gdal_translate --config GDAL_PDF_DPI 300 --config GDAL_PDF_LAYERS_OFF Map_Frame.Projection_and_Grids.Grid_Lines,Images.Orthoimage topo.pdf topo.tif

This only works for the new 2011/12/13 maps.  The historic maps are scanned images, so they don't have any real layers.  They are just one raster image in a PDF.  So you would just do
gdal_translate --config GDAL_PDF_DPI 300 topo.pdf topo.tif.

What you get in both cases is an output GeoTIFF of the topo map.  The map will have all the collar info, so you will then have to crop the images, remove the collars, and mosaic the slivers to get a seamless mosaic, but that is just done the same way as any other imagery collection.  That process is to simply:
                Crop the image to its minimum size with gdalwarp
                Burn some null value to the remaining collar slivers with gdal_rasterize -i -burn <etc.>
                Mosaic the neighboring tile data into the sliver with gdalwarp

One other cool thing about the GeoPDF with its scale-dependent rendering is that you could create topos at different dpis (scales) and thus make your overviews look like what a 100K or 250K topo would look like (well with the new ones anyway, not the historic ones).

Don't forget to RTF(riendly!)M http://www.gdal.org/frmt_pdf.html


===============================
Michael Smith MS GISP
State GIS Manager, Maine Office of GIS
State of Maine, Office of Information Technology
michael.smith _at_ maine.gov 207-215-5530

Board Member, Maine GeoLibrary
Education Chair, Maine GIS Users Group
State Rep, National States Geographic Information Council
[cid:image001.jpg at 01CF49A3.32BF2BC0]

State House Station 145
51 Commerce Drive
Augusta, ME 04333-0145
69o 47' 58.9"W  44o 21' 54.8"N
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140327/6f27827a/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 9032 bytes
Desc: image001.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140327/6f27827a/attachment-0001.jpg>

From even.rouault at mines-paris.org  Thu Mar 27 08:08:58 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 27 Mar 2014 16:08:58 +0100
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <BLU173-W21ADDE9BD276716506144790670@phx.gbl>
References: <1395694013.533099bdba7cb@imp.free.fr>,
	<53314406.7090903@oslandia.com>,
	<1395744290.53315e2221801@imp.free.fr> <533172EB.9070107@oslandia.com>,
	<CA+TxYvNW8RtxVN6NEn4oDsbWVw4YKZG5ZkAqnKnVzyyt1YFubw@mail.gmail.com>,
	<1395778445.5331e38da2d6a@imp.free.fr>,
	<CAL81ghATCsy0vq3RmNAqmvbpose5qVzcuD-TdSM_ycvS46UANA@mail.gmail.com>,
	<1395915887.5333fc6f8bc4c@imp.free.fr>,
	<CABUeae8dBqXQ0b2-n+wrVhTaD+B6Ftcag2Mi65cmSs=KpT4-JQ@mail.gmail.com>,
	<CA+TxYvN0L-6yrhrp2T=ODmhZugdwFHTOOA3DqgWVYQru7NfirQ@mail.gmail.com>,
	<CABUeae-WweMNdjX6cHoV20dF6Y5rby_52rGUQFOmAASQwzT+Xg@mail.gmail.com>
	<BLU173-W21ADDE9BD276716506144790670@phx.gbl>
Message-ID: <1395932938.53343f0a30fbf@imp.free.fr>

Selon Ivan Lucena <lucena_ivan at hotmail.com>:

> Hi there,
>
> That is a great discussion and I applause Evens efforts and all the
> contributions, so but don't get me wrong by asking that:
>
> What do we want to accomplish with that class hierarchy?
>
> Will GDAL 2.0 be able to do thinks like:
>
> $ gdalinfo <dataset>
>
> And the proposed classes will be able to figure out what kind of dataset is
> that?

Well, I've completely dropped off the idea of the complex schema of classes.
This was just to make people afraid and comment, and have fun myself with UML
schemas ;-) But the ultimate goal remains to have a GDALDataset object that
handle both raster bands and vectors. So yes an upgraded gdalinfo could
potentially handle any of the below datasets. However I'm not sure of what we
want to do with the current utilities. For example if you combine both
gdal_translate and ogr2ogr in a single utility, it will have like hundred of
options... But the idea is to have the API to make it possible.

>
> It could be:
>
> - raster file
> - vector file
> - cvs file or dbf file
> - some kind of server-based connection string for raster or vector
> - some kind of service connection string for raster or vector
> - multi-dataset raster file like HDF, NetCDF
>
> Will the GDAL Open mechanism probe for all those possibilities?
>
> My best regards,
>
> Ivan
>
> > From: mateusz at loskot.net
> > Date: Thu, 27 Mar 2014 14:05:29 +0100
> > To: etourigny.dev at gmail.com
> > CC: gdal-dev at lists.osgeo.org
> > Subject: Re: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
> >
> > On 27 March 2014 13:40, Etienne Tourigny <etourigny.dev at gmail.com> wrote:
> > > How about multiple inheritance for mixed class?  Say you have a class for
> > > rasters and a class for vectors, and a dataset that would support both
> types
> > > would inherit from these two base classes.  Is that what you mean by
> > > composite?
> >
> > I meant separate base class for mixed dataset, then use "has a"
> > relationship, like in
> >
> > class MixedDataset
> > {
> > public:
> > //
> > private:
> > RasterDataset* pDtsR
> > VectorDataset* pDtsV;
> > }
> >
> >
> > Best regards,
> > --
> > Mateusz  ?oskot, http://mateusz.loskot.net
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From mateusz at loskot.net  Thu Mar 27 08:15:55 2014
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Thu, 27 Mar 2014 16:15:55 +0100
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <1395932938.53343f0a30fbf@imp.free.fr>
References: <1395694013.533099bdba7cb@imp.free.fr>
	<53314406.7090903@oslandia.com>
	<1395744290.53315e2221801@imp.free.fr> <533172EB.9070107@oslandia.com>
	<CA+TxYvNW8RtxVN6NEn4oDsbWVw4YKZG5ZkAqnKnVzyyt1YFubw@mail.gmail.com>
	<1395778445.5331e38da2d6a@imp.free.fr>
	<CAL81ghATCsy0vq3RmNAqmvbpose5qVzcuD-TdSM_ycvS46UANA@mail.gmail.com>
	<1395915887.5333fc6f8bc4c@imp.free.fr>
	<CABUeae8dBqXQ0b2-n+wrVhTaD+B6Ftcag2Mi65cmSs=KpT4-JQ@mail.gmail.com>
	<CA+TxYvN0L-6yrhrp2T=ODmhZugdwFHTOOA3DqgWVYQru7NfirQ@mail.gmail.com>
	<CABUeae-WweMNdjX6cHoV20dF6Y5rby_52rGUQFOmAASQwzT+Xg@mail.gmail.com>
	<BLU173-W21ADDE9BD276716506144790670@phx.gbl>
	<1395932938.53343f0a30fbf@imp.free.fr>
Message-ID: <CABUeae-phNc+f6ZdfH9KPYCm4Yc3q_60QD4fRUnFo1on_0p2aQ@mail.gmail.com>

On 27 March 2014 16:08, Even Rouault <even.rouault at mines-paris.org> wrote:
> Selon Ivan Lucena <lucena_ivan at hotmail.com>:
>
>> Hi there,
>>
>> That is a great discussion and I applause Evens efforts and all the
>> contributions, so but don't get me wrong by asking that:
>>
>> What do we want to accomplish with that class hierarchy?
>>
>> Will GDAL 2.0 be able to do thinks like:
>>
>> $ gdalinfo <dataset>
>>
>> And the proposed classes will be able to figure out what kind of dataset is
>> that?
>
> Well, I've completely dropped off the idea of the complex schema of classes.
> This was just to make people afraid and comment, and have fun myself with UML
> schemas ;-) But the ultimate goal remains to have a GDALDataset object that
> handle both raster bands and vectors. So yes an upgraded gdalinfo could
> potentially handle any of the below datasets. However I'm not sure of what we
> want to do with the current utilities. For example if you combine both
> gdal_translate and ogr2ogr in a single utility, it will have like hundred of
> options...

Or, make it similarly to git (or PDAL)

gdal raster info f.tif
gdal vector info f.shp

:)

Best regards,
-- 
Mateusz  ?oskot, http://mateusz.loskot.net

From fabio.rinnone0 at gmail.com  Thu Mar 27 10:19:50 2014
From: fabio.rinnone0 at gmail.com (Fabio Rinnone)
Date: Thu, 27 Mar 2014 18:19:50 +0100
Subject: [gdal-dev] Open WMS datasets with GDAL Java
Message-ID: <53345DB6.5060801@gmail.com>

Hi, I'm trying to open datasets of WMS service with GDAL Java warp in an
Android app project with native support. Opening datasets always returns
null datasets. An example WMS is the following:

http://kaart.maakaart.ee/geoserver/wms

I use following statements:

name = "WMS:http://kaart.maakaart.ee/geoserver/wms";
gdal.Open(name);

For my implementation I have adapted python sample code found here[2].

[1] http://svn.osgeo.org/gdal/trunk/autotest/gdrivers/wms.py

-- 
Fabio Rinnone
93015 Niscemi CL, Italia
Skype: fabiorinnone
Web: http://www.fabiorinnone.eu

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 230 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140327/2225cde3/attachment.pgp>

From even.rouault at mines-paris.org  Thu Mar 27 10:27:16 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 27 Mar 2014 18:27:16 +0100
Subject: [gdal-dev] Open WMS datasets with GDAL Java
In-Reply-To: <53345DB6.5060801@gmail.com>
References: <53345DB6.5060801@gmail.com>
Message-ID: <1395941236.53345f74e264f@imp.free.fr>

Selon Fabio Rinnone <fabio.rinnone0 at gmail.com>:

> Hi, I'm trying to open datasets of WMS service with GDAL Java warp in an
> Android app project with native support. Opening datasets always returns
> null datasets. An example WMS is the following:
>
> http://kaart.maakaart.ee/geoserver/wms
>
> I use following statements:
>
> name = "WMS:http://kaart.maakaart.ee/geoserver/wms";
> gdal.Open(name);
>
> For my implementation I have adapted python sample code found here[2].

I guess you lack a call to gdal.AllRegister(); that will register the WMS driver
(in Python the registration of drivers is automatically done)

Because the following works :

java -Djava.library.path=. -cp gdal.jar:build/apps gdalinfo
"WMS:http://kaart.maakaart.ee/geoserver/wms"

Driver: WMS/OGC Web Map Service
Files: none associated
Size is 512, 512
Coordinate System is `'
Origin = (0.0,0.0)
Pixel Size = (1.0,1.0)
Subdatasets:
 
SUBDATASET_1_NAME=WMS:http://kaart.maakaart.ee/geoserver/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=osm:osm&SRS=EPSG:900913&BBOX=-20000.0,-20000.0,20000.0,20000.0
  SUBDATASET_1_DESC=osm:osm
 
SUBDATASET_2_NAME=WMS:http://kaart.maakaart.ee/geoserver/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=eesti:asustusyksus_20130401&SRS=EPSG:3301&BBOX=369032.1030000001,6377141.06,739156.2899999991,6634019.129999999
  SUBDATASET_2_DESC=asustusyksus_20130401
 
SUBDATASET_3_NAME=WMS:http://kaart.maakaart.ee/geoserver/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=osm:countries&SRS=EPSG:3857&BBOX=-2.00374842409172E7,-8.55413855279643E7,2.00375083427893E7,1.84286291455416E7
  SUBDATASET_3_DESC=osm:countries
 
SUBDATASET_4_NAME=WMS:http://kaart.maakaart.ee/geoserver/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=eesti:maakond_20130401&SRS=EPSG:3301&BBOX=369032.1030000001,6377141.06,739156.2899999991,6634019.129999999
  SUBDATASET_4_DESC=maakond_20130401
 
SUBDATASET_5_NAME=WMS:http://kaart.maakaart.ee/geoserver/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=eesti:omavalitsus_20130401&SRS=EPSG:3301&BBOX=369032.1030000001,6377141.06,739156.2899999991,6634019.129999999
  SUBDATASET_5_DESC=omavalitsus_20130401
 
SUBDATASET_6_NAME=WMS:http://kaart.maakaart.ee/geoserver/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=osm:osm_admin&SRS=EPSG:3857&BBOX=-20000.0,-20000.0,20000.0,20000.0
  SUBDATASET_6_DESC=osm_admin
 
SUBDATASET_7_NAME=WMS:http://kaart.maakaart.ee/geoserver/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=osm:osm_amenities&SRS=EPSG:3857&BBOX=-20000.0,-20000.0,20000.0,20000.0
  SUBDATASET_7_DESC=osm_amenities
 
SUBDATASET_8_NAME=WMS:http://kaart.maakaart.ee/geoserver/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=osm:osm_buildings&SRS=EPSG:3857&BBOX=-20000.0,-20000.0,20000.0,20000.0
  SUBDATASET_8_DESC=osm_buildings
 
SUBDATASET_9_NAME=WMS:http://kaart.maakaart.ee/geoserver/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=osm:osm_landusages&SRS=EPSG:3857&BBOX=-20000.0,-20000.0,20000.0,20000.0
  SUBDATASET_9_DESC=osm_landusages
 
SUBDATASET_10_NAME=WMS:http://kaart.maakaart.ee/geoserver/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=osm:osm_mainroads&SRS=EPSG:3857&BBOX=-20000.0,-20000.0,20000.0,20000.0
  SUBDATASET_10_DESC=osm_mainroads
 
SUBDATASET_11_NAME=WMS:http://kaart.maakaart.ee/geoserver/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=osm:osm_mainroads_gen1&SRS=EPSG:3857&BBOX=-2.00375083427892E7,-1.42888648422354E7,2.00375083335705E7,1.45048034741689E7
  SUBDATASET_11_DESC=osm_mainroads_gen1
 
SUBDATASET_12_NAME=WMS:http://kaart.maakaart.ee/geoserver/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=osm:osm_places&SRS=EPSG:3857&BBOX=-20000.0,-20000.0,20000.0,20000.0
  SUBDATASET_12_DESC=osm_places
 
SUBDATASET_13_NAME=WMS:http://kaart.maakaart.ee/geoserver/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=osm:osm_roads&SRS=EPSG:3857&BBOX=-20000.0,-20000.0,20000.0,20000.0
  SUBDATASET_13_DESC=osm_roads
 
SUBDATASET_14_NAME=WMS:http://kaart.maakaart.ee/geoserver/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=osm:osm_waterways&SRS=EPSG:3857&BBOX=-20000.0,-20000.0,20000.0,20000.0
  SUBDATASET_14_DESC=osm_waterways
 
SUBDATASET_15_NAME=WMS:http://kaart.maakaart.ee/geoserver/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=osm:planet_osm_roads&SRS=EPSG:900913&BBOX=-20000.0,-20000.0,20000.0,20000.0
  SUBDATASET_15_DESC=planet_osm_roads
 
SUBDATASET_16_NAME=WMS:http://kaart.maakaart.ee/geoserver/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=osmee:roads&SRS=EPSG:900913&BBOX=2428195.3992778542,7870642.716299254,3141984.8130118935,8326161.739777454
  SUBDATASET_16_DESC=roads
 
SUBDATASET_17_NAME=WMS:http://kaart.maakaart.ee/geoserver/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=topp:states&SRS=EPSG:4326&BBOX=-124.73142200000001,24.955967,-66.969849,49.371735
  SUBDATASET_17_DESC=states
 
SUBDATASET_18_NAME=WMS:http://kaart.maakaart.ee/geoserver/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=osm:towns&SRS=EPSG:3857&BBOX=-20000.0,-20000.0,20000.0,20000.0
  SUBDATASET_18_DESC=towns
 
SUBDATASET_19_NAME=WMS:http://kaart.maakaart.ee/geoserver/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=nurc:world&SRS=EPSG:4267&BBOX=-180.0,-89.9,180.0,83.674733
  SUBDATASET_19_DESC=world
Corner Coordinates:
Upper Left  (0.0,0.0)
Lower Left  (0.0,512.0)
Upper Right (512.0,0.0)
Lower Right (512.0,512.0)
Center      (256.0,256.0)


>
> [1] http://svn.osgeo.org/gdal/trunk/autotest/gdrivers/wms.py
>
> --
> Fabio Rinnone
> 93015 Niscemi CL, Italia
> Skype: fabiorinnone
> Web: http://www.fabiorinnone.eu
>
>



From fabio.rinnone0 at gmail.com  Thu Mar 27 11:37:54 2014
From: fabio.rinnone0 at gmail.com (Fabio Rinnone)
Date: Thu, 27 Mar 2014 19:37:54 +0100
Subject: [gdal-dev] Open WMS datasets with GDAL Java
In-Reply-To: <1395941236.53345f74e264f@imp.free.fr>
References: <53345DB6.5060801@gmail.com> <1395941236.53345f74e264f@imp.free.fr>
Message-ID: <53347002.6050005@gmail.com>

Il 27/03/2014 18:27, Even Rouault ha scritto:
> Selon Fabio Rinnone <fabio.rinnone0 at gmail.com>:
>> Hi, I'm trying to open datasets of WMS service with GDAL Java warp in an
>> Android app project with native support. Opening datasets always returns
>> null datasets. An example WMS is the following:
>>
>> http://kaart.maakaart.ee/geoserver/wms
>>
>> I use following statements:
>>
>> name = "WMS:http://kaart.maakaart.ee/geoserver/wms";
>> gdal.Open(name);
>>
>> For my implementation I have adapted python sample code found here[2].
> 
> I guess you lack a call to gdal.AllRegister(); that will register the WMS driver
> (in Python the registration of drivers is automatically done)

I'm tried but I have no solved the issue.

I thought the problem could be related to the inclusion of curl
libraries (which are required to support WMS), but they are correctly
included in Android.mk makefile.

Do you have other suggestions?

-- 
Fabio Rinnone
93015 Niscemi CL, Italia
Skype: fabiorinnone
Web: http://www.fabiorinnone.eu

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 230 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140327/107b3347/attachment.pgp>

From etourigny.dev at gmail.com  Thu Mar 27 12:09:58 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 27 Mar 2014 16:09:58 -0300
Subject: [gdal-dev] Open WMS datasets with GDAL Java
In-Reply-To: <53347002.6050005@gmail.com>
References: <53345DB6.5060801@gmail.com> <1395941236.53345f74e264f@imp.free.fr>
	<53347002.6050005@gmail.com>
Message-ID: <CA+TxYvNSHHdPucn=whn_nv_QeizZc1L9C_6mEED=RVV_nszKDw@mail.gmail.com>

Have you tried running in debug mode (CPL_DEBUG=ON)?


On Thu, Mar 27, 2014 at 3:37 PM, Fabio Rinnone <fabio.rinnone0 at gmail.com>wrote:

> Il 27/03/2014 18:27, Even Rouault ha scritto:
> > Selon Fabio Rinnone <fabio.rinnone0 at gmail.com>:
> >> Hi, I'm trying to open datasets of WMS service with GDAL Java warp in an
> >> Android app project with native support. Opening datasets always returns
> >> null datasets. An example WMS is the following:
> >>
> >> http://kaart.maakaart.ee/geoserver/wms
> >>
> >> I use following statements:
> >>
> >> name = "WMS:http://kaart.maakaart.ee/geoserver/wms";
> >> gdal.Open(name);
> >>
> >> For my implementation I have adapted python sample code found here[2].
> >
> > I guess you lack a call to gdal.AllRegister(); that will register the
> WMS driver
> > (in Python the registration of drivers is automatically done)
>
> I'm tried but I have no solved the issue.
>
> I thought the problem could be related to the inclusion of curl
> libraries (which are required to support WMS), but they are correctly
> included in Android.mk makefile.
>
> Do you have other suggestions?
>
> --
> Fabio Rinnone
> 93015 Niscemi CL, Italia
> Skype: fabiorinnone
> Web: http://www.fabiorinnone.eu
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140327/71acfa12/attachment.html>

From bishop.dev at gmail.com  Thu Mar 27 12:13:56 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Thu, 27 Mar 2014 23:13:56 +0400
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <1395915887.5333fc6f8bc4c@imp.free.fr>
References: <1395694013.533099bdba7cb@imp.free.fr>	<53314406.7090903@oslandia.com>	<1395744290.53315e2221801@imp.free.fr>	<533172EB.9070107@oslandia.com>	<CA+TxYvNW8RtxVN6NEn4oDsbWVw4YKZG5ZkAqnKnVzyyt1YFubw@mail.gmail.com>	<1395778445.5331e38da2d6a@imp.free.fr>	<CAL81ghATCsy0vq3RmNAqmvbpose5qVzcuD-TdSM_ycvS46UANA@mail.gmail.com>
	<1395915887.5333fc6f8bc4c@imp.free.fr>
Message-ID: <53347874.7010907@gmail.com>

Hi Even,

I think that we can discuss the starting point for 2.0.
You start with idea "...to "refactor" a code base of 1.2 million lines.."
Maybe we have to start from white list - create ideal (brilliant) set of 
classes and create a well-designed foundation for GDAL. Also rewrite 
several wide used drivers (shp, tab, PostGIS, etc.). Than this will 
works very good, begin some kind of hackathon for rewriting overs.
Also we can add some testing framework inside GDAL (e.g. googletest) and 
start empty repo on github for GDAL 2.0.
The GDAL can be enhanced, we can move common things that use several 
drivers to core or replace some core thing with outer libraries. CMake 
maybe used as build system.
Yes this is deep refactoring, but maybe this is need for GDAL 2.0?

Best regards,
     Dmitry

27.03.2014 14:24, Even Rouault ?????:
> Hi,
>
>> Hi all,
>>
>> MY opinion is that's not a really good way to count how many classes you
>> will have and trying to have minimal classes.
>>
>> Drawing a model with UML is not easy : it's not easy to have a good model
>> from the beginning, it's not easy to name all members and methods
>> correctly, and the worst is inheritance.
>> You can think you spend too much time to make the model. But you can't say
>> if you will spend less or much time to change code because your model was
>> too simple.
> The issue is that I'm trying to "refactor" a code base of 1.2 million lines of
> C/C++ code (not mentionning the 140 000 lines of Python tests), and with 211
> existing drivers. So, given that nobody will probably ever want to fund the
> effort, it is completely excluded to have to edit each of those drivers in a non
> automated way...
> The end solution will necessary be a compromise. I would also like the existing
> C API to continue working as much as possible.
>
>> Because I don't know all the model of Gdal and the model can be "reset" I
>> have some questions :
>>
>> 1) Why GDALMajorObject not inherit of GDALIMajorObject ?
> It was just an omission in the UML diagram. My C++ sketch had this inheritance.
>
>> 2) Why all classes inherit (directly or not) of GDALMajorObject ?
> That's how it is done currently.
>
>> What do
>> you store in it ?
> It contains a list of list of strings, or in more concrete terms, metadata
> domains that contain metadata items.
>
>> Is it possible to put it as a member in classes ?
> That could have been a way of doing it, yes. Always the debate composition vs
> inheritance.
>
>> Have
>> you consider templates ?
> Actually, no. I tend to avoid them unless they are an obvious solution.
>
>> 3) An interface for Drivers ? geName(), getLongName(), getDescription() ?
>> Or maybe abstract ...
>>
>> 4) What is GDALDataset in your diagram ?
> It is the base class that a driver that supports both raster and vector would
> have to subclass.
>
>> 5) Where is the link between Driver (Gdal/Ogr) and Dataset (Raster/Vector)
>> ? Member, templates ?
> A Driver instanciates a Dataset by opening an existing one, or by creating a new
> one. But the Dataset object itself is a free-standing objects that is only owned
> by user code, and not by the Driver.
>
> For now, I've dropped my crazy UML diagram that nobody would be able to
> understand, even if I managed to make it work, and I'm pursuing my attempt
> just merging OGRDataSource inside GDALDataset. And make OGRDriver and
> OGRSFDriverRegistrar mostly disappear, or just create a minimized version of
> them, as compatibility layer for existing drivers, that forward the real work to
> GDALDriver and GDALDriverManager.
>
> Even
>
>> Florent
>>
>>
>> 2014-03-25 21:14 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:
>>
>>> Selon Etienne Tourigny <etourigny.dev at gmail.com>:
>>>
>>>> I also (respectfully) think that there are too many classes (mostly the
>>>> abstract classes and interfaces) which make it a bit hard to understand.
>>>>
>>>> I like Vincent's second suggestion to have 3 base Dataset classes
>>>> (GDALRasterDataset, GDALVectorDataset, GDALHybridDataset) which inherit
>>>> from GDALDataset, and an enum (vector,raster,hybrid) to easily query
>>> which
>>>> type the Dataset is (or which type its driver supports). You then
>>> subclass
>>>> the relevant Dataset class and it *should* work auto-magically for
>>> rasters.
>>>>   For example, a given Dataset which subclasses GDALDataset would be
>>>> migrated as  a subclass of GDALRasterDataset, which would imply that it
>>>> does not have a vector dataset. If the implementation changes to allow
>>>> vector, then you would change its parent and implement relevant vector
>>>> methods.
>>>>
>>>> My view on this is KISS with a minimum number of classes...
>>> Yes, the practice shows that the UML brainstorming leads to nowhere (at
>>> least
>>> with my current limited knowledge of C++ multi-inheritance)... So actually
>>> instead of creating new classes, I think that eventually there will be less
>>> classes... I'm not even sure about the interest of having subclasses of
>>> GDALDataset to distinguish between raster only, vector only or
>>> raster+vector. As
>>> I wrote previously that could be done as a driver metadata instread.
>>>
>>> So, for now, I've just "imported" the usefull methods of OGRDataSource into
>>> GDALDataset, and made a few changes here or there so that it works. Well
>>> except
>>> ogr_refcount.py, because of a funny discovery was that the ref counting of
>>> GDALDataset and OGRDataSource is (was) not the same. Starts at 1 for
>>> GDALDataset
>>> and 0 for OGRDataSource...
>>>
>>> The temporary result is in the following branch:
>>> https://github.com/rouault/gdal-1/commits/unification
>>>
>>> OGRDataSource is kept with just that :
>>>
>>> class CPL_DLL OGRDataSource : public GDALDataset
>>> {
>>> public:
>>>                          OGRDataSource();
>>>
>>>      virtual const char  *GetName() = 0;
>>>
>>>      static void         DestroyDataSource( OGRDataSource * );
>>>
>>>      OGRSFDriver        *GetOGRDriver() const;
>>>      void                SetOGRDriver( OGRSFDriver *poDriver );
>>>      virtual     const char* GetDriverName();
>>>
>>> protected:
>>>      friend class OGRSFDriverRegistrar;
>>>
>>>      OGRSFDriver        *m_poOGRDriver;
>>>
>>> };
>>>
>>> And it could eventually completely disappear (or maybe just remain as a
>>> convenience class if we don't want to touch existing drivers) if I manage
>>> to
>>> merge OGRSFDriver into GDALDriver, and get rid of OGRSFDriverRegistrar.
>>>
>>> Even
>>>
>>>> cheers
>>>> Etienne
>>>>
>>>>
>>>>
>>>> On Tue, Mar 25, 2014 at 9:13 AM, Vincent Mora
>>>> <vincent.mora at oslandia.com>wrote:
>>>>
>>>>> On 25/03/2014 11:44, Even Rouault wrote:
>>>>>
>>>>>> Selon Vincent Mora <vincent.mora at oslandia.com>:
>>>>>>
>>>>>>   On 24/03/2014 21:46, Even Rouault wrote:
>>>>>>>> Hi,
>>>>>>>>
>>>>>>>> "Release soon, release early", so for people who like UML diagrams
>>>>>>>> (there
>>>>>>>>
>>>>>>> is
>>>>>>>
>>>>>>>> also a prototype of C++ classes for those who don't like UML very
>>> much),
>>>>>>> here's
>>>>>>>
>>>>>>>> a blog entry with the outcome of my thoughts for a possible
>>>>>>>> re-organisation
>>>>>>>>
>>>>>>> of
>>>>>>>
>>>>>>>> the GDAL/OGR class hierarchy
>>>>>>>>
>>>>>>>>
>>>>>>>>   http://erouault.blogspot.ca/2014/03/draft-gdalogr-class-
>>>>>> hierarchy-for-gdal.html
>>>>>>
>>>>>>> I don't understand the need for HandleRasterData() and
>>>>>>> HandleVectorData().
>>>>>>>
>>>>>>> Isn't inheriting from GDALEmptyRasterDataset or
>>> GDALEmptyVectorDataset
>>>>>>> sufficient to convey the information that the class doesn't handle
>>> those
>>>>>>> kind of datasets.
>>>>>>>
>>>>>>> A call to GetLayerCount()/GetRasterCount() from the class user is
>>>>>>> sufficient to say "no vector/raster data here", and a dynamic _cast
>>> to
>>>>>>> GDALEmptyVectorDataset/GDALEmptyRasterDataset is even clearer to me,
>>> so
>>>>>>> HandleRasterData()/HandleVectorData() would be a third way to tell
>>> the
>>>>>>> same thing.
>>>>>>>
>>>>>> Actually, when thinking more about this, this kind of information
>>> should
>>>>>> be at
>>>>>> the driver level, and not at the dataset level. The idea is that there
>>>>>> are use
>>>>>> cases where you want to know if a driver can handle only vector, only
>>>>>> raster, or
>>>>>> both. For example if you still want to have separate Open dialog
>>> boxes for
>>>>>> raster or vector.
>>>>>>
>>>>>>> Also I'm not sure about the names GDALAbstract* since those are
>>> partial
>>>>>>> implementations.
>>>>>>>
>>>>>> I know I'm not very good at naming. Do you have an alternative
>>> proposal ?
>>>>>> The
>>>>>> issue is that with my draft we end up with a lot of classes and
>>>>>> interfaces, so
>>>>>> it is not obvious to find a good name to reflect their content.
>>>>>>
>>>>> Partial sound ok to me, but I not so good at naming  ?
>>>>>
>>>>> Considering the number of classes, I gave it some thoughts this morning
>>>>> and, like Dmitry, thought of merging the Abtract (Partial) into the
>>>>> interface before realizing that, even if it works (you can overload de
>>>>> default function in Empty) it's a bit ugly and I ended up preferring
>>> your
>>>>> solution.
>>>>>
>>>>> An altenative would be to have a Dataset with both aspects and provide
>>>>> three partial specialisations: one for vector (it will behave like
>>> empty
>>>>> raster) one for raster, and one for both. Code duplications could be
>>>>> avoided by implementing protected member functions in the Dataset
>>> class and
>>>>> simply calling them in the implementations of partial specialization.
>>> This
>>>>> solution avoid the diamond shaped inheritance diagram of hell :)
>>>>>
>>>>>     Even
>>>>>>
>>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


From etourigny.dev at gmail.com  Thu Mar 27 12:23:47 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 27 Mar 2014 16:23:47 -0300
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <53347874.7010907@gmail.com>
References: <1395694013.533099bdba7cb@imp.free.fr>
	<53314406.7090903@oslandia.com>
	<1395744290.53315e2221801@imp.free.fr>
	<533172EB.9070107@oslandia.com>
	<CA+TxYvNW8RtxVN6NEn4oDsbWVw4YKZG5ZkAqnKnVzyyt1YFubw@mail.gmail.com>
	<1395778445.5331e38da2d6a@imp.free.fr>
	<CAL81ghATCsy0vq3RmNAqmvbpose5qVzcuD-TdSM_ycvS46UANA@mail.gmail.com>
	<1395915887.5333fc6f8bc4c@imp.free.fr> <53347874.7010907@gmail.com>
Message-ID: <CA+TxYvNiG4qEUwyNFa5mq6H1KvSbkCzbmwaNwAd2rsPUS-s++g@mail.gmail.com>

Dmitry - I am not sure that a wholescale refactor is the way to go - many
formats will be dropped because quite a few do not have active maintainers,
and development is mostly on a volunteer basis (correct me if I am wrong,
Even).

As an example, the netcdf driver has been mostly maintained by myself for
the past few years (with the help of a few users and devs), and it has been
about 99% voluntary work. And I will be unable to work on it for the next
year, so it probably would not be upgraded if the API changes drastically.
And I am sure there are quite a few drivers in the same situation.

It there a way to think of a new design, while retaining backwards
compatibility for the drivers that would not be updated? Especially for the
raster drivers, which would probably need less changes.

cheers
Etienne


On Thu, Mar 27, 2014 at 4:13 PM, Dmitriy Baryshnikov
<bishop.dev at gmail.com>wrote:

> Hi Even,
>
> I think that we can discuss the starting point for 2.0.
> You start with idea "...to "refactor" a code base of 1.2 million lines.."
> Maybe we have to start from white list - create ideal (brilliant) set of
> classes and create a well-designed foundation for GDAL. Also rewrite
> several wide used drivers (shp, tab, PostGIS, etc.). Than this will works
> very good, begin some kind of hackathon for rewriting overs.
> Also we can add some testing framework inside GDAL (e.g. googletest) and
> start empty repo on github for GDAL 2.0.
> The GDAL can be enhanced, we can move common things that use several
> drivers to core or replace some core thing with outer libraries. CMake
> maybe used as build system.
> Yes this is deep refactoring, but maybe this is need for GDAL 2.0?
>
> Best regards,
>     Dmitry
>
> 27.03.2014 14:24, Even Rouault ?????:
>
>  Hi,
>>
>>  Hi all,
>>>
>>> MY opinion is that's not a really good way to count how many classes you
>>> will have and trying to have minimal classes.
>>>
>>> Drawing a model with UML is not easy : it's not easy to have a good model
>>> from the beginning, it's not easy to name all members and methods
>>> correctly, and the worst is inheritance.
>>> You can think you spend too much time to make the model. But you can't
>>> say
>>> if you will spend less or much time to change code because your model was
>>> too simple.
>>>
>> The issue is that I'm trying to "refactor" a code base of 1.2 million
>> lines of
>> C/C++ code (not mentionning the 140 000 lines of Python tests), and with
>> 211
>> existing drivers. So, given that nobody will probably ever want to fund
>> the
>> effort, it is completely excluded to have to edit each of those drivers
>> in a non
>> automated way...
>> The end solution will necessary be a compromise. I would also like the
>> existing
>> C API to continue working as much as possible.
>>
>>  Because I don't know all the model of Gdal and the model can be "reset" I
>>> have some questions :
>>>
>>> 1) Why GDALMajorObject not inherit of GDALIMajorObject ?
>>>
>> It was just an omission in the UML diagram. My C++ sketch had this
>> inheritance.
>>
>>  2) Why all classes inherit (directly or not) of GDALMajorObject ?
>>>
>> That's how it is done currently.
>>
>>  What do
>>> you store in it ?
>>>
>> It contains a list of list of strings, or in more concrete terms, metadata
>> domains that contain metadata items.
>>
>>  Is it possible to put it as a member in classes ?
>>>
>> That could have been a way of doing it, yes. Always the debate
>> composition vs
>> inheritance.
>>
>>  Have
>>> you consider templates ?
>>>
>> Actually, no. I tend to avoid them unless they are an obvious solution.
>>
>>  3) An interface for Drivers ? geName(), getLongName(), getDescription() ?
>>> Or maybe abstract ...
>>>
>>> 4) What is GDALDataset in your diagram ?
>>>
>> It is the base class that a driver that supports both raster and vector
>> would
>> have to subclass.
>>
>>  5) Where is the link between Driver (Gdal/Ogr) and Dataset
>>> (Raster/Vector)
>>> ? Member, templates ?
>>>
>> A Driver instanciates a Dataset by opening an existing one, or by
>> creating a new
>> one. But the Dataset object itself is a free-standing objects that is
>> only owned
>> by user code, and not by the Driver.
>>
>> For now, I've dropped my crazy UML diagram that nobody would be able to
>> understand, even if I managed to make it work, and I'm pursuing my attempt
>> just merging OGRDataSource inside GDALDataset. And make OGRDriver and
>> OGRSFDriverRegistrar mostly disappear, or just create a minimized version
>> of
>> them, as compatibility layer for existing drivers, that forward the real
>> work to
>> GDALDriver and GDALDriverManager.
>>
>> Even
>>
>>  Florent
>>>
>>>
>>> 2014-03-25 21:14 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:
>>>
>>>  Selon Etienne Tourigny <etourigny.dev at gmail.com>:
>>>>
>>>>  I also (respectfully) think that there are too many classes (mostly the
>>>>> abstract classes and interfaces) which make it a bit hard to
>>>>> understand.
>>>>>
>>>>> I like Vincent's second suggestion to have 3 base Dataset classes
>>>>> (GDALRasterDataset, GDALVectorDataset, GDALHybridDataset) which inherit
>>>>> from GDALDataset, and an enum (vector,raster,hybrid) to easily query
>>>>>
>>>> which
>>>>
>>>>> type the Dataset is (or which type its driver supports). You then
>>>>>
>>>> subclass
>>>>
>>>>> the relevant Dataset class and it *should* work auto-magically for
>>>>>
>>>> rasters.
>>>>
>>>>>   For example, a given Dataset which subclasses GDALDataset would be
>>>>> migrated as  a subclass of GDALRasterDataset, which would imply that it
>>>>> does not have a vector dataset. If the implementation changes to allow
>>>>> vector, then you would change its parent and implement relevant vector
>>>>> methods.
>>>>>
>>>>> My view on this is KISS with a minimum number of classes...
>>>>>
>>>> Yes, the practice shows that the UML brainstorming leads to nowhere (at
>>>> least
>>>> with my current limited knowledge of C++ multi-inheritance)... So
>>>> actually
>>>> instead of creating new classes, I think that eventually there will be
>>>> less
>>>> classes... I'm not even sure about the interest of having subclasses of
>>>> GDALDataset to distinguish between raster only, vector only or
>>>> raster+vector. As
>>>> I wrote previously that could be done as a driver metadata instread.
>>>>
>>>> So, for now, I've just "imported" the usefull methods of OGRDataSource
>>>> into
>>>> GDALDataset, and made a few changes here or there so that it works. Well
>>>> except
>>>> ogr_refcount.py, because of a funny discovery was that the ref counting
>>>> of
>>>> GDALDataset and OGRDataSource is (was) not the same. Starts at 1 for
>>>> GDALDataset
>>>> and 0 for OGRDataSource...
>>>>
>>>> The temporary result is in the following branch:
>>>> https://github.com/rouault/gdal-1/commits/unification
>>>>
>>>> OGRDataSource is kept with just that :
>>>>
>>>> class CPL_DLL OGRDataSource : public GDALDataset
>>>> {
>>>> public:
>>>>                          OGRDataSource();
>>>>
>>>>      virtual const char  *GetName() = 0;
>>>>
>>>>      static void         DestroyDataSource( OGRDataSource * );
>>>>
>>>>      OGRSFDriver        *GetOGRDriver() const;
>>>>      void                SetOGRDriver( OGRSFDriver *poDriver );
>>>>      virtual     const char* GetDriverName();
>>>>
>>>> protected:
>>>>      friend class OGRSFDriverRegistrar;
>>>>
>>>>      OGRSFDriver        *m_poOGRDriver;
>>>>
>>>> };
>>>>
>>>> And it could eventually completely disappear (or maybe just remain as a
>>>> convenience class if we don't want to touch existing drivers) if I
>>>> manage
>>>> to
>>>> merge OGRSFDriver into GDALDriver, and get rid of OGRSFDriverRegistrar.
>>>>
>>>> Even
>>>>
>>>>  cheers
>>>>> Etienne
>>>>>
>>>>>
>>>>>
>>>>> On Tue, Mar 25, 2014 at 9:13 AM, Vincent Mora
>>>>> <vincent.mora at oslandia.com>wrote:
>>>>>
>>>>>  On 25/03/2014 11:44, Even Rouault wrote:
>>>>>>
>>>>>>  Selon Vincent Mora <vincent.mora at oslandia.com>:
>>>>>>>
>>>>>>>   On 24/03/2014 21:46, Even Rouault wrote:
>>>>>>>
>>>>>>>> Hi,
>>>>>>>>>
>>>>>>>>> "Release soon, release early", so for people who like UML diagrams
>>>>>>>>> (there
>>>>>>>>>
>>>>>>>>>  is
>>>>>>>>
>>>>>>>>  also a prototype of C++ classes for those who don't like UML very
>>>>>>>>>
>>>>>>>> much),
>>>>
>>>>> here's
>>>>>>>>
>>>>>>>>  a blog entry with the outcome of my thoughts for a possible
>>>>>>>>> re-organisation
>>>>>>>>>
>>>>>>>>>  of
>>>>>>>>
>>>>>>>>  the GDAL/OGR class hierarchy
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>   http://erouault.blogspot.ca/2014/03/draft-gdalogr-class-
>>>>>>>>>
>>>>>>>> hierarchy-for-gdal.html
>>>>>>>
>>>>>>>  I don't understand the need for HandleRasterData() and
>>>>>>>> HandleVectorData().
>>>>>>>>
>>>>>>>> Isn't inheriting from GDALEmptyRasterDataset or
>>>>>>>>
>>>>>>> GDALEmptyVectorDataset
>>>>
>>>>> sufficient to convey the information that the class doesn't handle
>>>>>>>>
>>>>>>> those
>>>>
>>>>> kind of datasets.
>>>>>>>>
>>>>>>>> A call to GetLayerCount()/GetRasterCount() from the class user is
>>>>>>>> sufficient to say "no vector/raster data here", and a dynamic _cast
>>>>>>>>
>>>>>>> to
>>>>
>>>>> GDALEmptyVectorDataset/GDALEmptyRasterDataset is even clearer to me,
>>>>>>>>
>>>>>>> so
>>>>
>>>>> HandleRasterData()/HandleVectorData() would be a third way to tell
>>>>>>>>
>>>>>>> the
>>>>
>>>>> same thing.
>>>>>>>>
>>>>>>>>  Actually, when thinking more about this, this kind of information
>>>>>>>
>>>>>> should
>>>>
>>>>> be at
>>>>>>> the driver level, and not at the dataset level. The idea is that
>>>>>>> there
>>>>>>> are use
>>>>>>> cases where you want to know if a driver can handle only vector, only
>>>>>>> raster, or
>>>>>>> both. For example if you still want to have separate Open dialog
>>>>>>>
>>>>>> boxes for
>>>>
>>>>> raster or vector.
>>>>>>>
>>>>>>>  Also I'm not sure about the names GDALAbstract* since those are
>>>>>>>>
>>>>>>> partial
>>>>
>>>>> implementations.
>>>>>>>>
>>>>>>>>  I know I'm not very good at naming. Do you have an alternative
>>>>>>>
>>>>>> proposal ?
>>>>
>>>>> The
>>>>>>> issue is that with my draft we end up with a lot of classes and
>>>>>>> interfaces, so
>>>>>>> it is not obvious to find a good name to reflect their content.
>>>>>>>
>>>>>>>  Partial sound ok to me, but I not so good at naming  ?
>>>>>>
>>>>>> Considering the number of classes, I gave it some thoughts this
>>>>>> morning
>>>>>> and, like Dmitry, thought of merging the Abtract (Partial) into the
>>>>>> interface before realizing that, even if it works (you can overload de
>>>>>> default function in Empty) it's a bit ugly and I ended up preferring
>>>>>>
>>>>> your
>>>>
>>>>> solution.
>>>>>>
>>>>>> An altenative would be to have a Dataset with both aspects and provide
>>>>>> three partial specialisations: one for vector (it will behave like
>>>>>>
>>>>> empty
>>>>
>>>>> raster) one for raster, and one for both. Code duplications could be
>>>>>> avoided by implementing protected member functions in the Dataset
>>>>>>
>>>>> class and
>>>>
>>>>> simply calling them in the implementations of partial specialization.
>>>>>>
>>>>> This
>>>>
>>>>> solution avoid the diamond shaped inheritance diagram of hell :)
>>>>>>
>>>>>>     Even
>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>  _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev at lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>
>>>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140327/71d97b72/attachment-0001.html>

From bishop.dev at gmail.com  Thu Mar 27 12:39:50 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Thu, 27 Mar 2014 23:39:50 +0400
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <CA+TxYvNiG4qEUwyNFa5mq6H1KvSbkCzbmwaNwAd2rsPUS-s++g@mail.gmail.com>
References: <1395694013.533099bdba7cb@imp.free.fr>	<53314406.7090903@oslandia.com>	<1395744290.53315e2221801@imp.free.fr>	<533172EB.9070107@oslandia.com>	<CA+TxYvNW8RtxVN6NEn4oDsbWVw4YKZG5ZkAqnKnVzyyt1YFubw@mail.gmail.com>	<1395778445.5331e38da2d6a@imp.free.fr>	<CAL81ghATCsy0vq3RmNAqmvbpose5qVzcuD-TdSM_ycvS46UANA@mail.gmail.com>	<1395915887.5333fc6f8bc4c@imp.free.fr>	<53347874.7010907@gmail.com>
	<CA+TxYvNiG4qEUwyNFa5mq6H1KvSbkCzbmwaNwAd2rsPUS-s++g@mail.gmail.com>
Message-ID: <53347E86.2070808@gmail.com>

Hi Etienne,

Yes, on first stage some format will be dropped. But exist GDAL 1.x will 
help where.
It seems to me that rewriting of formats will not so hard as develop new 
one.
NetCDF is popular form and should be rewrite in first stage. We can 
create a wiki page with table of format and stages and responsibility - 
so we see how the work will be hard.

Best regards,
     Dmitry



From jgrn at illinois.edu  Thu Mar 27 14:26:31 2014
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Thu, 27 Mar 2014 16:26:31 -0500
Subject: [gdal-dev] "Syncing" two rasters together...
Message-ID: <CABG0rfswQoAgNP3n8oS39ZYpKuxG__UNNAbQ5AqLXB61_TdZNg@mail.gmail.com>

GDALers:

What is the most efficient way, given a "reference raster", and an
arbitrary raster (we'll call it "unsynced") synced together to allow
them to be stacked: the output of this should be the unsynced raster
with the same number of rows, columns, pixel size, upper left
coordinates, and projection as the reference raster.

Here are the assumptions:
- both rasters already have the same pixel size and projection, but
the offset of the upper left coordinate may not be "perfect"

- for each pixel location defined by the reference raster, the output
should have the closest (nearest neighbor) pixel from the unsynced
raster.  It should have some NA value in regions where the reference
and unsynced do not overlap.

Thoughts?  The application of this would be e.g. taking a set of
Landsat images from different time periods (each image has slightly
different numbers of rows and columns), and stacking them together to
perform time series analysis.

Cheers!

--j

-- 
Jonathan A. Greenberg, PhD
Assistant Professor
Global Environmental Analysis and Remote Sensing (GEARS) Laboratory
Department of Geography and Geographic Information Science
University of Illinois at Urbana-Champaign
259 Computing Applications Building, MC-150
605 East Springfield Avenue
Champaign, IL  61820-6371
Phone: 217-300-1924
http://www.geog.illinois.edu/~jgrn/
AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007

From tkeitt at utexas.edu  Thu Mar 27 15:27:35 2014
From: tkeitt at utexas.edu (Tim Keitt)
Date: Thu, 27 Mar 2014 17:27:35 -0500
Subject: [gdal-dev] "Syncing" two rasters together...
In-Reply-To: <CABG0rfswQoAgNP3n8oS39ZYpKuxG__UNNAbQ5AqLXB61_TdZNg@mail.gmail.com>
References: <CABG0rfswQoAgNP3n8oS39ZYpKuxG__UNNAbQ5AqLXB61_TdZNg@mail.gmail.com>
Message-ID: <CANnL8goY+GXvACCOD7eMx-uzBeJf9F0i3uFKomoo47ytyAH2Tg@mail.gmail.com>

On Thu, Mar 27, 2014 at 4:26 PM, Jonathan Greenberg <jgrn at illinois.edu>wrote:

> GDALers:
>
> What is the most efficient way, given a "reference raster", and an
> arbitrary raster (we'll call it "unsynced") synced together to allow
> them to be stacked: the output of this should be the unsynced raster
> with the same number of rows, columns, pixel size, upper left
> coordinates, and projection as the reference raster.
>
> Here are the assumptions:
> - both rasters already have the same pixel size and projection, but
> the offset of the upper left coordinate may not be "perfect"
>
> - for each pixel location defined by the reference raster, the output
> should have the closest (nearest neighbor) pixel from the unsynced
> raster.  It should have some NA value in regions where the reference
> and unsynced do not overlap.
>
> Thoughts?  The application of this would be e.g. taking a set of
> Landsat images from different time periods (each image has slightly
> different numbers of rows and columns), and stacking them together to
> perform time series analysis.
>

If I read right you are trying to estimate the x,y offset error in one
image. You can assign GCPs by picking identical pixels in each image and
then warp one of them to the other. OSSIM has some capability for image
matching I believe. If you convolve the two images, you should get an
impulse at the correct offset, but this is tricky in practice. Panorama
software may be able to compute the exact matching of the images.

THK


>
> Cheers!
>
> --j
>
> --
> Jonathan A. Greenberg, PhD
> Assistant Professor
> Global Environmental Analysis and Remote Sensing (GEARS) Laboratory
> Department of Geography and Geographic Information Science
> University of Illinois at Urbana-Champaign
> 259 Computing Applications Building, MC-150
> 605 East Springfield Avenue
> Champaign, IL  61820-6371
> Phone: 217-300-1924
> http://www.geog.illinois.edu/~jgrn/
> AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
http://www.keittlab.org/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140327/85b7d733/attachment.html>

From jgrn at illinois.edu  Thu Mar 27 15:37:42 2014
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Thu, 27 Mar 2014 17:37:42 -0500
Subject: [gdal-dev] "Syncing" two rasters together...
In-Reply-To: <CANnL8goY+GXvACCOD7eMx-uzBeJf9F0i3uFKomoo47ytyAH2Tg@mail.gmail.com>
References: <CABG0rfswQoAgNP3n8oS39ZYpKuxG__UNNAbQ5AqLXB61_TdZNg@mail.gmail.com>
	<CANnL8goY+GXvACCOD7eMx-uzBeJf9F0i3uFKomoo47ytyAH2Tg@mail.gmail.com>
Message-ID: <CABG0rftOzV9KmiZUOBSjXkZaBwZwwLOE9kXCPWzrRm9AJa+ing@mail.gmail.com>

Hi Tim:

Not quite -- all I'm trying to do is basically crop (or expand) one
raster to another's extent, but given two images may have their upper
left coordinates somewhat "out of sync" (so the pixels don't line up
perfectly with one another), I'm a bit unclear on how to do this --
the goal is to have two rasters with identical geographic information
(same projection, pixel size, row and column numbers) -- this then
allows me to "stack" them together to create an e.g. time series.

I'm thinking using gdalwarp with the te, t_srs, and ts/tr set to the
"reference" file may accomplish the task -- running a test now.

This is a common problem with a lot of raster analyses -- data from a
wide variety of sources/resolutions/projections need to be coerced to
a common set of spatial references so models can be applied to them
(e.g. species distribution models).  This is a common enough task that
it would be nice to see this as a feature in e.g. gdalwarp, if it
isn't already.

--j

On Thu, Mar 27, 2014 at 5:27 PM, Tim Keitt <tkeitt at utexas.edu> wrote:
>
>
>
> On Thu, Mar 27, 2014 at 4:26 PM, Jonathan Greenberg <jgrn at illinois.edu>
> wrote:
>>
>> GDALers:
>>
>> What is the most efficient way, given a "reference raster", and an
>> arbitrary raster (we'll call it "unsynced") synced together to allow
>> them to be stacked: the output of this should be the unsynced raster
>> with the same number of rows, columns, pixel size, upper left
>> coordinates, and projection as the reference raster.
>>
>> Here are the assumptions:
>> - both rasters already have the same pixel size and projection, but
>> the offset of the upper left coordinate may not be "perfect"
>>
>> - for each pixel location defined by the reference raster, the output
>> should have the closest (nearest neighbor) pixel from the unsynced
>> raster.  It should have some NA value in regions where the reference
>> and unsynced do not overlap.
>>
>> Thoughts?  The application of this would be e.g. taking a set of
>> Landsat images from different time periods (each image has slightly
>> different numbers of rows and columns), and stacking them together to
>> perform time series analysis.
>
>
> If I read right you are trying to estimate the x,y offset error in one
> image. You can assign GCPs by picking identical pixels in each image and
> then warp one of them to the other. OSSIM has some capability for image
> matching I believe. If you convolve the two images, you should get an
> impulse at the correct offset, but this is tricky in practice. Panorama
> software may be able to compute the exact matching of the images.
>
> THK
>
>>
>>
>> Cheers!
>>
>> --j
>>
>> --
>> Jonathan A. Greenberg, PhD
>> Assistant Professor
>> Global Environmental Analysis and Remote Sensing (GEARS) Laboratory
>> Department of Geography and Geographic Information Science
>> University of Illinois at Urbana-Champaign
>> 259 Computing Applications Building, MC-150
>> 605 East Springfield Avenue
>> Champaign, IL  61820-6371
>> Phone: 217-300-1924
>> http://www.geog.illinois.edu/~jgrn/
>> AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> --
> http://www.keittlab.org/



-- 
Jonathan A. Greenberg, PhD
Assistant Professor
Global Environmental Analysis and Remote Sensing (GEARS) Laboratory
Department of Geography and Geographic Information Science
University of Illinois at Urbana-Champaign
259 Computing Applications Building, MC-150
605 East Springfield Avenue
Champaign, IL  61820-6371
Phone: 217-300-1924
http://www.geog.illinois.edu/~jgrn/
AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007

From boxerab at gmail.com  Thu Mar 27 15:40:22 2014
From: boxerab at gmail.com (Aaron Boxer)
Date: Thu, 27 Mar 2014 18:40:22 -0400
Subject: [gdal-dev] JPEG2000 OpenCL Update
Message-ID: <CAK8GPyBuemc5LjTHDvkjv0KJf68zuk0W2Ej-bQM=xHa4ocxEOg@mail.gmail.com>

Hello There,

Just wanted to let y'all know that I have implemented the OpenCL
coefficient decoding portion of the j2k decode workflow.  I am testing it
with select images from OpenJPEG.

Remaining steps are: dequantization, inverse wavelet transform, and colour
decoding.

Cheers,
Aaron
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140327/08f07aff/attachment.html>

From even.rouault at mines-paris.org  Fri Mar 28 01:24:48 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 28 Mar 2014 09:24:48 +0100
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <53347E86.2070808@gmail.com>
References: <1395694013.533099bdba7cb@imp.free.fr>
	<53314406.7090903@oslandia.com>
	<1395744290.53315e2221801@imp.free.fr>
	<533172EB.9070107@oslandia.com>
	<CA+TxYvNW8RtxVN6NEn4oDsbWVw4YKZG5ZkAqnKnVzyyt1YFubw@mail.gmail.com>
	<1395778445.5331e38da2d6a@imp.free.fr>
	<CAL81ghATCsy0vq3RmNAqmvbpose5qVzcuD-TdSM_ycvS46UANA@mail.gmail.com>
	<1395915887.5333fc6f8bc4c@imp.free.fr> <53347874.7010907@gmail.com>
	<CA+TxYvNiG4qEUwyNFa5mq6H1KvSbkCzbmwaNwAd2rsPUS-s++g@mail.gmail.com>
	<53347E86.2070808@gmail.com>
Message-ID: <1395995088.533531d095c86@imp.free.fr>

Dmitriy,

It is not at all my intention to have a big-bang for GDAL 2.0. According to the
ohloh estimation ( http://www.ohloh.net/p/gdal/estimated_cost ), the cumulated
development to make GDAL as it is currently would represent a 265 person-years
effort. I do think it is overestimated (they also include the external libraries
that have been imported in the tree like libtiff, etc..); it should be closer to
30 person-years (2 full time position for the 15 years the project exist) but
still... I don't think anything justifies a rewrite.
My vision is more a series of incremental changes where the software remains
stable and usable at each stage. That way you, we can make sure that GDAL 2.0
can be released some day...

Even

> Hi Etienne,
>
> Yes, on first stage some format will be dropped. But exist GDAL 1.x will
> help where.
> It seems to me that rewriting of formats will not so hard as develop new
> one.
> NetCDF is popular form and should be rewrite in first stage. We can
> create a wiki page with table of format and stages and responsibility -
> so we see how the work will be hard.
>
> Best regards,
>      Dmitry
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From jukka.rahkonen at mmmtike.fi  Fri Mar 28 01:25:14 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 28 Mar 2014 08:25:14 +0000 (UTC)
Subject: [gdal-dev] Add a new performance hint for Spatialite
Message-ID: <loom.20140328T083329-764@post.gmane.org>

Hi,

I took timings about adding 115 GML files (548 MB together, 3.2 million
linestrings) into a Spatialite table. With default settings the table gets
initialized with spatial index which makes following inserts slower. Another
alternative is to create the table without spatial index, append all the
data first and as a last step create spatial index for the ready made table.

With spatial index on:
Append + index: 71 minutes

With spatial index off:
Append: 9 minutes
Create spatial index: 6 minutes
Total: 15 minutes

I was rather happy with the initial conversion speed until I made this test
which revealed that creating spatial index as a final step made the whole
process more than four times faster! This way both data table and spatial
index are probably in contiguous chunks in the SQLite datafile and there is
no need for post process VACUUM. Vacuuming in SQLite is rather slow and for
this 1.3 GB database it takes more than 4 minutes to run.

Suggestion: Add a new performance hint on page
http://www.gdal.org/ogr/drv_sqlite.html

"If many source files will be collected into the same Spatialite table it
can be much faster to initialize the table without a spatial index by using
-lco SPATIAL_INDEX=NO and to create spatial index with a separate command
after all the data are appended. Spatial index can be created with ogrinfo
command
ogrinfo db.sqlite -sql "SELECT
CreateSpatialIndex('table_name','geometry_column_name')"

Perhaps it could also be mentioned as a performance hint that VACUUUM can
also be done from orginfo as
ogrinfo db.sqlite -sql "VACUUM"

-Jukka Rahkonen-




From chenxian at walkinfo.com.cn  Fri Mar 28 01:42:18 2014
From: chenxian at walkinfo.com.cn (Xian Chen)
Date: Fri, 28 Mar 2014 01:42:18 -0700 (PDT)
Subject: [gdal-dev] GDAL 1.11 release plan
In-Reply-To: <1395783436.5331f70c554f1@imp.free.fr>
References: <1395783436.5331f70c554f1@imp.free.fr>
Message-ID: <1395996138133-5131724.post@n6.nabble.com>

A good plan! Especially when including the Walk driver 

I have a minor fix on ogr sqlite driver. Please refer to ticket #5426:
http://trac.osgeo.org/gdal/ticket/5426

Please check if it can be included in the release.

Thanks,

Xian
Walkinfo Technology Corp., Ltd.
mailto:chenxian at walkinfo.com.cn


Even Rouault wrote
> Hi,
> 
> GDAL 1.10 was released about one year ago, so it is time to think about
> the next
> release. I think we should just call it 1.11 given that there are no major
> architectural changes (although there have been non trivial changes in RAT
> management and for multiple geometry field support, but that only impacts
> core &
> drivers), and the C API and ABI is still preserved (for those who have
> looked at
> the other thread, my experiments on unification are *not* in trunk). For
> the
> details, I have initiated the preliminary NEWS :
> http://trac.osgeo.org/gdal/export/27091/trunk/gdal/NEWS (*)
> There are some mentions to 2.0 in the documentation of new features, but
> I'll
> end up fixing them to reflect the 1.11 numbering.
> 
> I think we are in a good shape to start the beta phase soon. If people
> have
> features or bug fixes almost ready that they'd like to be in 1.11, please
> speak
> up now. Otherwise I suggest issuing a beta-1 at the end of next week, give
> it a
> week for testing, and depending on the outcome, issue a beta-2, or just
> try
> RC-1. Unless someone volunteers (the process is fairly well documented in
> HOWTO-RELEASE), I can be release manager for 1.11.
> 
> Any opinion about that plan ?
> 
> Best regards,
> 
> Even
> 
> -- 
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> http://lists.osgeo.org/mailman/listinfo/gdal-dev





--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-GDAL-1-11-release-plan-tp5131086p5131724.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Fri Mar 28 01:42:51 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 28 Mar 2014 09:42:51 +0100
Subject: [gdal-dev] Add a new performance hint for Spatialite
In-Reply-To: <loom.20140328T083329-764@post.gmane.org>
References: <loom.20140328T083329-764@post.gmane.org>
Message-ID: <1395996171.5335360b5e951@imp.free.fr>

Jukka,

I'm very surprised that you need to do that explicitely, since the driver should
already do that by default. This is something we discovered last year or the
year before when you were experimenting OSM -> Spatialite conversions. Since OGR
1.10, the spatial index is created when the datasource is closed.

Look at this debug trace:

$ ogr2ogr -f sqlite /vsimem/out.sqlite ../autotest/ogr/data/poly.shp -dsco
spatialite=yes --debug on
OGR: OGROpen(../autotest/ogr/data/poly.shp/0x69a3d0) succeeded as ESRI
Shapefile.
SQLITE: SpatiaLite v4 DB found !
OGR_SQLITE: exec(CREATE TABLE 'poly' (   OGC_FID INTEGER PRIMARY KEY))
OGR_SQLITE: exec(DELETE FROM geometry_columns WHERE f_table_name = 'poly')
OGR_SQLITE: exec(SELECT AddGeometryColumn('poly', 'GEOMETRY', 325834, 'POLYGON',
2))
OGR_SQLITE: exec(ALTER TABLE 'poly' ADD COLUMN 'area' FLOAT)
OGR_SQLITE: exec(ALTER TABLE 'poly' ADD COLUMN 'eas_id' FLOAT)
OGR_SQLITE: exec(ALTER TABLE 'poly' ADD COLUMN 'prfedea' VARCHAR(16))
OGR_SQLITE: BEGIN Transaction
OGR_SQLITE: prepare(INSERT INTO 'poly' ("GEOMETRY","area","eas_id","prfedea")
VALUES (?,?,?,?))
OGR_SQLITE: COMMIT Transaction
OGR2OGR: 10 features written in layer 'poly'
OGR_SQLITE: exec(SELECT CreateSpatialIndex('poly', 'GEOMETRY'))
SQLITE: Error no such table: layer_statistics
OGR: Unloading VirtualOGR module
Shape: 10 features read on layer 'poly'.

Could try adding --debug on to your ogr2ogr command line and see when
CreateSpatialIndex() is created ?

Even

> Hi,
>
> I took timings about adding 115 GML files (548 MB together, 3.2 million
> linestrings) into a Spatialite table. With default settings the table gets
> initialized with spatial index which makes following inserts slower. Another
> alternative is to create the table without spatial index, append all the
> data first and as a last step create spatial index for the ready made table.
>
> With spatial index on:
> Append + index: 71 minutes
>
> With spatial index off:
> Append: 9 minutes
> Create spatial index: 6 minutes
> Total: 15 minutes
>
> I was rather happy with the initial conversion speed until I made this test
> which revealed that creating spatial index as a final step made the whole
> process more than four times faster! This way both data table and spatial
> index are probably in contiguous chunks in the SQLite datafile and there is
> no need for post process VACUUM. Vacuuming in SQLite is rather slow and for
> this 1.3 GB database it takes more than 4 minutes to run.
>
> Suggestion: Add a new performance hint on page
> http://www.gdal.org/ogr/drv_sqlite.html
>
> "If many source files will be collected into the same Spatialite table it
> can be much faster to initialize the table without a spatial index by using
> -lco SPATIAL_INDEX=NO and to create spatial index with a separate command
> after all the data are appended. Spatial index can be created with ogrinfo
> command
> ogrinfo db.sqlite -sql "SELECT
> CreateSpatialIndex('table_name','geometry_column_name')"
>
> Perhaps it could also be mentioned as a performance hint that VACUUUM can
> also be done from orginfo as
> ogrinfo db.sqlite -sql "VACUUM"
>
> -Jukka Rahkonen-
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From jukka.rahkonen at mmmtike.fi  Fri Mar 28 02:02:27 2014
From: jukka.rahkonen at mmmtike.fi (Rahkonen Jukka  (Tike))
Date: Fri, 28 Mar 2014 09:02:27 +0000
Subject: [gdal-dev] Add a new performance hint for Spatialite
Message-ID: <EFE5D7EE2EC8D3438FE02E356F81E35A0D9FA1F3@FITLK-EXMBX04.msvyvi.vaha.local>

Hi,

Sorry, I must have not emphasized enough that hint is only valid for appending data with subsequent ogr2ogr commands

ogr2ogr -f sqlite -dsco spatialite=yes mtk_tos.sqlite -dim 2 -lco spatial_index=no /vsizip/e:\mtk_tos\etrs89\gml\K32.zip tieviiva  -gt 65536
ogr2ogr -f sqlite -append mtk_tos.sqlite -dim 2 /vsizip/e:\mtk_tos\etrs89\gml\K34.zip tieviiva -gt 65536
... repeat the latter command for 113 more GML files...

I am not sure if this is a common use case everywhere. However, our National Land Survey delivers vector data divided by map sheets which means that each country wide dataset contains hundreds or thousands of GML files.
 
Even Rouault wrote:
 
> Jukka,
> 
> I'm very surprised that you need to do that explicitely, since the driver should
> already do that by default. This is something we discovered last year or the year
> before when you were experimenting OSM -> Spatialite conversions. Since OGR
> 1.10, the spatial index is created when the datasource is closed.
> 
> Look at this debug trace:
> 
> $ ogr2ogr -f sqlite /vsimem/out.sqlite ../autotest/ogr/data/poly.shp -dsco
> spatialite=yes --debug on
> OGR: OGROpen(../autotest/ogr/data/poly.shp/0x69a3d0) succeeded as ESRI
> Shapefile.
> SQLITE: SpatiaLite v4 DB found !
> OGR_SQLITE: exec(CREATE TABLE 'poly' (   OGC_FID INTEGER PRIMARY KEY))
> OGR_SQLITE: exec(DELETE FROM geometry_columns WHERE f_table_name =
> 'poly')
> OGR_SQLITE: exec(SELECT AddGeometryColumn('poly', 'GEOMETRY', 325834,
> 'POLYGON',
> 2))
> OGR_SQLITE: exec(ALTER TABLE 'poly' ADD COLUMN 'area' FLOAT)
> OGR_SQLITE: exec(ALTER TABLE 'poly' ADD COLUMN 'eas_id' FLOAT)
> OGR_SQLITE: exec(ALTER TABLE 'poly' ADD COLUMN 'prfedea' VARCHAR(16))
> OGR_SQLITE: BEGIN Transaction
> OGR_SQLITE: prepare(INSERT INTO 'poly'
> ("GEOMETRY","area","eas_id","prfedea")
> VALUES (?,?,?,?))
> OGR_SQLITE: COMMIT Transaction
> OGR2OGR: 10 features written in layer 'poly'
> OGR_SQLITE: exec(SELECT CreateSpatialIndex('poly', 'GEOMETRY'))
> SQLITE: Error no such table: layer_statistics
> OGR: Unloading VirtualOGR module
> Shape: 10 features read on layer 'poly'.
> 
> Could try adding --debug on to your ogr2ogr command line and see when
> CreateSpatialIndex() is created ?
> 
> Even
> 
> > Hi,
> >
> > I took timings about adding 115 GML files (548 MB together, 3.2
> > million
> > linestrings) into a Spatialite table. With default settings the table
> > gets initialized with spatial index which makes following inserts
> > slower. Another alternative is to create the table without spatial
> > index, append all the data first and as a last step create spatial index for the
> ready made table.
> >
> > With spatial index on:
> > Append + index: 71 minutes
> >
> > With spatial index off:
> > Append: 9 minutes
> > Create spatial index: 6 minutes
> > Total: 15 minutes
> >
> > I was rather happy with the initial conversion speed until I made this
> > test which revealed that creating spatial index as a final step made
> > the whole process more than four times faster! This way both data
> > table and spatial index are probably in contiguous chunks in the
> > SQLite datafile and there is no need for post process VACUUM.
> > Vacuuming in SQLite is rather slow and for this 1.3 GB database it takes more
> than 4 minutes to run.
> >
> > Suggestion: Add a new performance hint on page
> > http://www.gdal.org/ogr/drv_sqlite.html
> >
> > "If many source files will be collected into the same Spatialite table
> > it can be much faster to initialize the table without a spatial index
> > by using -lco SPATIAL_INDEX=NO and to create spatial index with a
> > separate command after all the data are appended. Spatial index can be
> > created with ogrinfo command ogrinfo db.sqlite -sql "SELECT
> > CreateSpatialIndex('table_name','geometry_column_name')"
> >
> > Perhaps it could also be mentioned as a performance hint that VACUUUM
> > can also be done from orginfo as ogrinfo db.sqlite -sql "VACUUM"
> >
> > -Jukka Rahkonen-
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> 


From even.rouault at mines-paris.org  Fri Mar 28 02:06:54 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 28 Mar 2014 10:06:54 +0100
Subject: [gdal-dev] GDAL 1.11 release plan
In-Reply-To: <1395996138133-5131724.post@n6.nabble.com>
References: <1395783436.5331f70c554f1@imp.free.fr>
	<1395996138133-5131724.post@n6.nabble.com>
Message-ID: <1395997614.53353bae48c2e@imp.free.fr>

> A good plan! Especially when including the Walk driver
>
> I have a minor fix on ogr sqlite driver. Please refer to ticket #5426:
> http://trac.osgeo.org/gdal/ticket/5426
>
> Please check if it can be included in the release.

Done. Thanks

>
> Thanks,
>
> Xian
> Walkinfo Technology Corp., Ltd.
> mailto:chenxian at walkinfo.com.cn
>
>
> Even Rouault wrote
> > Hi,
> >
> > GDAL 1.10 was released about one year ago, so it is time to think about
> > the next
> > release. I think we should just call it 1.11 given that there are no major
> > architectural changes (although there have been non trivial changes in RAT
> > management and for multiple geometry field support, but that only impacts
> > core &
> > drivers), and the C API and ABI is still preserved (for those who have
> > looked at
> > the other thread, my experiments on unification are *not* in trunk). For
> > the
> > details, I have initiated the preliminary NEWS :
> > http://trac.osgeo.org/gdal/export/27091/trunk/gdal/NEWS (*)
> > There are some mentions to 2.0 in the documentation of new features, but
> > I'll
> > end up fixing them to reflect the 1.11 numbering.
> >
> > I think we are in a good shape to start the beta phase soon. If people
> > have
> > features or bug fixes almost ready that they'd like to be in 1.11, please
> > speak
> > up now. Otherwise I suggest issuing a beta-1 at the end of next week, give
> > it a
> > week for testing, and depending on the outcome, issue a beta-2, or just
> > try
> > RC-1. Unless someone volunteers (the process is fairly well documented in
> > HOWTO-RELEASE), I can be release manager for 1.11.
> >
> > Any opinion about that plan ?
> >
> > Best regards,
> >
> > Even
> >
> > --
> > Geospatial professional services
> > http://even.rouault.free.fr/services.html
> > _______________________________________________
> > gdal-dev mailing list
>
> > gdal-dev at .osgeo
>
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>
> --
> View this message in context:
>
http://osgeo-org.1560.x6.nabble.com/gdal-dev-GDAL-1-11-release-plan-tp5131086p5131724.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From kempenep at gmail.com  Fri Mar 28 02:49:26 2014
From: kempenep at gmail.com (kempenep)
Date: Fri, 28 Mar 2014 02:49:26 -0700 (PDT)
Subject: [gdal-dev] "Syncing" two rasters together...
In-Reply-To: <CABG0rftOzV9KmiZUOBSjXkZaBwZwwLOE9kXCPWzrRm9AJa+ing@mail.gmail.com>
References: <CABG0rfswQoAgNP3n8oS39ZYpKuxG__UNNAbQ5AqLXB61_TdZNg@mail.gmail.com>
	<CANnL8goY+GXvACCOD7eMx-uzBeJf9F0i3uFKomoo47ytyAH2Tg@mail.gmail.com>
	<CABG0rftOzV9KmiZUOBSjXkZaBwZwwLOE9kXCPWzrRm9AJa+ing@mail.gmail.com>
Message-ID: <1396000166138-5131753.post@n6.nabble.com>

Hi Jonathan,

If I understand your question correctly, I might suggest an open source tool
(GPL v3) for this job: pkcrop. It is part of pktools
(http://pktools.nongnu.org), which is based on the GDAL API. By combining
pkcrop with pkinfo (also in pktools), you could get what you want in a quite
operational way. pkinfo allows you to define the proper bounding box, x, y
resolution (pkinfo -i reference.tif -bb -dx -dy). The output can be directly
used within pkcrop using $(command substitution). Not covered areas will
have a nodata value. You can perform all steps in a one-liner: stacking a
list of input images to  a multi-layer image using the same bounding box and
spatial resolution

pkcrop $(pkinfo -i reference.tif -dx -dy -bb) $(for LS in landsat*.tif; do
echo " -i " $LS;done) -o stacked.tif

Pieter.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-Syncing-two-rasters-together-tp5131677p5131753.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Fri Mar 28 03:10:26 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 28 Mar 2014 11:10:26 +0100
Subject: [gdal-dev] Add a new performance hint for Spatialite
In-Reply-To: <EFE5D7EE2EC8D3438FE02E356F81E35A0D9FA1F3@FITLK-EXMBX04.msvyvi.vaha.local>
References: <EFE5D7EE2EC8D3438FE02E356F81E35A0D9FA1F3@FITLK-EXMBX04.msvyvi.vaha.local>
Message-ID: <1396001426.53354a929046d@imp.free.fr>

Ah, got it. I read your message too fast. I've added your suggestions with a
simplified version of your below example in
http://trac.osgeo.org/gdal/changeset/27104

Another solution for your use case would be to make a OGR VRT with a
OGRVRTUnionLayer that reference every GML file and convert the VRT in a single
step in spatialite. But we don't have yet a ogrbuildvrt utility to create that
VRT in a user friendly way.

> Hi,
>
> Sorry, I must have not emphasized enough that hint is only valid for
> appending data with subsequent ogr2ogr commands
>
> ogr2ogr -f sqlite -dsco spatialite=yes mtk_tos.sqlite -dim 2 -lco
> spatial_index=no /vsizip/e:\mtk_tos\etrs89\gml\K32.zip tieviiva  -gt 65536
> ogr2ogr -f sqlite -append mtk_tos.sqlite -dim 2
> /vsizip/e:\mtk_tos\etrs89\gml\K34.zip tieviiva -gt 65536
> ... repeat the latter command for 113 more GML files...
>
> I am not sure if this is a common use case everywhere. However, our National
> Land Survey delivers vector data divided by map sheets which means that each
> country wide dataset contains hundreds or thousands of GML files.
>
> Even Rouault wrote:
>
> > Jukka,
> >
> > I'm very surprised that you need to do that explicitely, since the driver
> should
> > already do that by default. This is something we discovered last year or
> the year
> > before when you were experimenting OSM -> Spatialite conversions. Since OGR
> > 1.10, the spatial index is created when the datasource is closed.
> >
> > Look at this debug trace:
> >
> > $ ogr2ogr -f sqlite /vsimem/out.sqlite ../autotest/ogr/data/poly.shp -dsco
> > spatialite=yes --debug on
> > OGR: OGROpen(../autotest/ogr/data/poly.shp/0x69a3d0) succeeded as ESRI
> > Shapefile.
> > SQLITE: SpatiaLite v4 DB found !
> > OGR_SQLITE: exec(CREATE TABLE 'poly' (   OGC_FID INTEGER PRIMARY KEY))
> > OGR_SQLITE: exec(DELETE FROM geometry_columns WHERE f_table_name =
> > 'poly')
> > OGR_SQLITE: exec(SELECT AddGeometryColumn('poly', 'GEOMETRY', 325834,
> > 'POLYGON',
> > 2))
> > OGR_SQLITE: exec(ALTER TABLE 'poly' ADD COLUMN 'area' FLOAT)
> > OGR_SQLITE: exec(ALTER TABLE 'poly' ADD COLUMN 'eas_id' FLOAT)
> > OGR_SQLITE: exec(ALTER TABLE 'poly' ADD COLUMN 'prfedea' VARCHAR(16))
> > OGR_SQLITE: BEGIN Transaction
> > OGR_SQLITE: prepare(INSERT INTO 'poly'
> > ("GEOMETRY","area","eas_id","prfedea")
> > VALUES (?,?,?,?))
> > OGR_SQLITE: COMMIT Transaction
> > OGR2OGR: 10 features written in layer 'poly'
> > OGR_SQLITE: exec(SELECT CreateSpatialIndex('poly', 'GEOMETRY'))
> > SQLITE: Error no such table: layer_statistics
> > OGR: Unloading VirtualOGR module
> > Shape: 10 features read on layer 'poly'.
> >
> > Could try adding --debug on to your ogr2ogr command line and see when
> > CreateSpatialIndex() is created ?
> >
> > Even
> >
> > > Hi,
> > >
> > > I took timings about adding 115 GML files (548 MB together, 3.2
> > > million
> > > linestrings) into a Spatialite table. With default settings the table
> > > gets initialized with spatial index which makes following inserts
> > > slower. Another alternative is to create the table without spatial
> > > index, append all the data first and as a last step create spatial index
> for the
> > ready made table.
> > >
> > > With spatial index on:
> > > Append + index: 71 minutes
> > >
> > > With spatial index off:
> > > Append: 9 minutes
> > > Create spatial index: 6 minutes
> > > Total: 15 minutes
> > >
> > > I was rather happy with the initial conversion speed until I made this
> > > test which revealed that creating spatial index as a final step made
> > > the whole process more than four times faster! This way both data
> > > table and spatial index are probably in contiguous chunks in the
> > > SQLite datafile and there is no need for post process VACUUM.
> > > Vacuuming in SQLite is rather slow and for this 1.3 GB database it takes
> more
> > than 4 minutes to run.
> > >
> > > Suggestion: Add a new performance hint on page
> > > http://www.gdal.org/ogr/drv_sqlite.html
> > >
> > > "If many source files will be collected into the same Spatialite table
> > > it can be much faster to initialize the table without a spatial index
> > > by using -lco SPATIAL_INDEX=NO and to create spatial index with a
> > > separate command after all the data are appended. Spatial index can be
> > > created with ogrinfo command ogrinfo db.sqlite -sql "SELECT
> > > CreateSpatialIndex('table_name','geometry_column_name')"
> > >
> > > Perhaps it could also be mentioned as a performance hint that VACUUUM
> > > can also be done from orginfo as ogrinfo db.sqlite -sql "VACUUM"
> > >
> > > -Jukka Rahkonen-
> > >
> > >
> > >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> >
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From fabio.rinnone0 at gmail.com  Fri Mar 28 03:43:30 2014
From: fabio.rinnone0 at gmail.com (Fabio Rinnone)
Date: Fri, 28 Mar 2014 11:43:30 +0100
Subject: [gdal-dev] Open WMS datasets with GDAL Java
In-Reply-To: <CA+TxYvNSHHdPucn=whn_nv_QeizZc1L9C_6mEED=RVV_nszKDw@mail.gmail.com>
References: <53345DB6.5060801@gmail.com> <1395941236.53345f74e264f@imp.free.fr>
	<53347002.6050005@gmail.com>
	<CA+TxYvNSHHdPucn=whn_nv_QeizZc1L9C_6mEED=RVV_nszKDw@mail.gmail.com>
Message-ID: <53355252.1070901@gmail.com>

Il 27/03/2014 20:09, Etienne Tourigny ha scritto:
> Have you tried running in debug mode (CPL_DEBUG=ON)?

Can I do this? I have added the following:

gdal.SetConfigOption("CPL_DEBUG", "ON");

before calling of gdal.AllRegister() but does not seem to appear new log
messages in standard error when I try to open WMS dataset.

> On Thu, Mar 27, 2014 at 3:37 PM, Fabio Rinnone <fabio.rinnone0 at gmail.com
> <mailto:fabio.rinnone0 at gmail.com>> wrote:
> 
>     Il 27/03/2014 18:27, Even Rouault ha scritto:
>     > Selon Fabio Rinnone <fabio.rinnone0 at gmail.com
>     <mailto:fabio.rinnone0 at gmail.com>>:
>     >> Hi, I'm trying to open datasets of WMS service with GDAL Java
>     warp in an
>     >> Android app project with native support. Opening datasets always
>     returns
>     >> null datasets. An example WMS is the following:
>     >>
>     >> http://kaart.maakaart.ee/geoserver/wms
>     >>
>     >> I use following statements:
>     >>
>     >> name = "WMS:http://kaart.maakaart.ee/geoserver/wms";
>     >> gdal.Open(name);
>     >>
>     >> For my implementation I have adapted python sample code found
>     here[2].
>     >
>     > I guess you lack a call to gdal.AllRegister(); that will register
>     the WMS driver
>     > (in Python the registration of drivers is automatically done)
> 
>     I'm tried but I have no solved the issue.
> 
>     I thought the problem could be related to the inclusion of curl
>     libraries (which are required to support WMS), but they are correctly
>     included in Android.mk makefile.
> 
>     Do you have other suggestions?
> 
>     --
>     Fabio Rinnone
>     93015 Niscemi CL, Italia
>     Skype: fabiorinnone
>     Web: http://www.fabiorinnone.eu
> 
> 
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Fabio Rinnone
93015 Niscemi CL, Italia
Skype: fabiorinnone
Web: http://www.fabiorinnone.eu

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 230 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140328/0a79d265/attachment-0001.pgp>

From even.rouault at mines-paris.org  Fri Mar 28 03:54:27 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 28 Mar 2014 11:54:27 +0100
Subject: [gdal-dev] Open WMS datasets with GDAL Java
In-Reply-To: <53355252.1070901@gmail.com>
References: <53345DB6.5060801@gmail.com> <1395941236.53345f74e264f@imp.free.fr>
	<53347002.6050005@gmail.com>
	<CA+TxYvNSHHdPucn=whn_nv_QeizZc1L9C_6mEED=RVV_nszKDw@mail.gmail.com>
	<53355252.1070901@gmail.com>
Message-ID: <1396004067.533554e309b05@imp.free.fr>

Does gdal.GetDriverByName("WMS") return a non null pointer ?

> Il 27/03/2014 20:09, Etienne Tourigny ha scritto:
> > Have you tried running in debug mode (CPL_DEBUG=ON)?
>
> Can I do this? I have added the following:
>
> gdal.SetConfigOption("CPL_DEBUG", "ON");
>
> before calling of gdal.AllRegister() but does not seem to appear new log
> messages in standard error when I try to open WMS dataset.
>
> > On Thu, Mar 27, 2014 at 3:37 PM, Fabio Rinnone <fabio.rinnone0 at gmail.com
> > <mailto:fabio.rinnone0 at gmail.com>> wrote:
> >
> >     Il 27/03/2014 18:27, Even Rouault ha scritto:
> >     > Selon Fabio Rinnone <fabio.rinnone0 at gmail.com
> >     <mailto:fabio.rinnone0 at gmail.com>>:
> >     >> Hi, I'm trying to open datasets of WMS service with GDAL Java
> >     warp in an
> >     >> Android app project with native support. Opening datasets always
> >     returns
> >     >> null datasets. An example WMS is the following:
> >     >>
> >     >> http://kaart.maakaart.ee/geoserver/wms
> >     >>
> >     >> I use following statements:
> >     >>
> >     >> name = "WMS:http://kaart.maakaart.ee/geoserver/wms";
> >     >> gdal.Open(name);
> >     >>
> >     >> For my implementation I have adapted python sample code found
> >     here[2].
> >     >
> >     > I guess you lack a call to gdal.AllRegister(); that will register
> >     the WMS driver
> >     > (in Python the registration of drivers is automatically done)
> >
> >     I'm tried but I have no solved the issue.
> >
> >     I thought the problem could be related to the inclusion of curl
> >     libraries (which are required to support WMS), but they are correctly
> >     included in Android.mk makefile.
> >
> >     Do you have other suggestions?
> >
> >     --
> >     Fabio Rinnone
> >     93015 Niscemi CL, Italia
> >     Skype: fabiorinnone
> >     Web: http://www.fabiorinnone.eu
> >
> >
> >     _______________________________________________
> >     gdal-dev mailing list
> >     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> >     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Fabio Rinnone
> 93015 Niscemi CL, Italia
> Skype: fabiorinnone
> Web: http://www.fabiorinnone.eu
>
>



From dmorissette at mapgears.com  Fri Mar 28 03:47:38 2014
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri, 28 Mar 2014 06:47:38 -0400
Subject: [gdal-dev] GDAL 1.11 release plan
In-Reply-To: <1395783436.5331f70c554f1@imp.free.fr>
References: <1395783436.5331f70c554f1@imp.free.fr>
Message-ID: <5335534A.1060707@mapgears.com>

+1

Daniel

On 14-03-25 5:37 PM, Even Rouault wrote:
> Hi,
>
> GDAL 1.10 was released about one year ago, so it is time to think about the next
> release. I think we should just call it 1.11 given that there are no major
> architectural changes (although there have been non trivial changes in RAT
> management and for multiple geometry field support, but that only impacts core &
> drivers), and the C API and ABI is still preserved (for those who have looked at
> the other thread, my experiments on unification are *not* in trunk). For the
> details, I have initiated the preliminary NEWS :
> http://trac.osgeo.org/gdal/export/27091/trunk/gdal/NEWS (*)
> There are some mentions to 2.0 in the documentation of new features, but I'll
> end up fixing them to reflect the 1.11 numbering.
>
> I think we are in a good shape to start the beta phase soon. If people have
> features or bug fixes almost ready that they'd like to be in 1.11, please speak
> up now. Otherwise I suggest issuing a beta-1 at the end of next week, give it a
> week for testing, and depending on the outcome, issue a beta-2, or just try
> RC-1. Unless someone volunteers (the process is fairly well documented in
> HOWTO-RELEASE), I can be release manager for 1.11.
>
> Any opinion about that plan ?
>
> Best regards,
>
> Even
>


-- 
Daniel Morissette
T: +1 418-696-5056 #201
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From fabio.rinnone0 at gmail.com  Fri Mar 28 04:06:32 2014
From: fabio.rinnone0 at gmail.com (Fabio Rinnone)
Date: Fri, 28 Mar 2014 12:06:32 +0100
Subject: [gdal-dev] Open WMS datasets with GDAL Java
In-Reply-To: <1396004067.533554e309b05@imp.free.fr>
References: <53345DB6.5060801@gmail.com> <1395941236.53345f74e264f@imp.free.fr>
	<53347002.6050005@gmail.com>
	<CA+TxYvNSHHdPucn=whn_nv_QeizZc1L9C_6mEED=RVV_nszKDw@mail.gmail.com>
	<53355252.1070901@gmail.com> <1396004067.533554e309b05@imp.free.fr>
Message-ID: <533557B8.1040501@gmail.com>

Il 28/03/2014 11:54, Even Rouault ha scritto:
> Does gdal.GetDriverByName("WMS") return a non null pointer ?

It returns an org.gdal.gdal.Driver object. I think this is correctly, right?

>> Il 27/03/2014 20:09, Etienne Tourigny ha scritto:
>>> Have you tried running in debug mode (CPL_DEBUG=ON)?
>>
>> Can I do this? I have added the following:
>>
>> gdal.SetConfigOption("CPL_DEBUG", "ON");
>>
>> before calling of gdal.AllRegister() but does not seem to appear new log
>> messages in standard error when I try to open WMS dataset.
>>
>>> On Thu, Mar 27, 2014 at 3:37 PM, Fabio Rinnone <fabio.rinnone0 at gmail.com
>>> <mailto:fabio.rinnone0 at gmail.com>> wrote:
>>>
>>>     Il 27/03/2014 18:27, Even Rouault ha scritto:
>>>     > Selon Fabio Rinnone <fabio.rinnone0 at gmail.com
>>>     <mailto:fabio.rinnone0 at gmail.com>>:
>>>     >> Hi, I'm trying to open datasets of WMS service with GDAL Java
>>>     warp in an
>>>     >> Android app project with native support. Opening datasets always
>>>     returns
>>>     >> null datasets. An example WMS is the following:
>>>     >>
>>>     >> http://kaart.maakaart.ee/geoserver/wms
>>>     >>
>>>     >> I use following statements:
>>>     >>
>>>     >> name = "WMS:http://kaart.maakaart.ee/geoserver/wms";
>>>     >> gdal.Open(name);
>>>     >>
>>>     >> For my implementation I have adapted python sample code found
>>>     here[2].
>>>     >
>>>     > I guess you lack a call to gdal.AllRegister(); that will register
>>>     the WMS driver
>>>     > (in Python the registration of drivers is automatically done)
>>>
>>>     I'm tried but I have no solved the issue.
>>>
>>>     I thought the problem could be related to the inclusion of curl
>>>     libraries (which are required to support WMS), but they are correctly
>>>     included in Android.mk makefile.
>>>
>>>     Do you have other suggestions?
>>>
>>>     --
>>>     Fabio Rinnone
>>>     93015 Niscemi CL, Italia
>>>     Skype: fabiorinnone
>>>     Web: http://www.fabiorinnone.eu
>>>
>>>
>>>     _______________________________________________
>>>     gdal-dev mailing list
>>>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>>>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> --
>> Fabio Rinnone
>> 93015 Niscemi CL, Italia
>> Skype: fabiorinnone
>> Web: http://www.fabiorinnone.eu

-- 
Fabio Rinnone
93015 Niscemi CL, Italia
Skype: fabiorinnone
Web: http://www.fabiorinnone.eu

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 230 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140328/3398c2ba/attachment.pgp>

From szekerest at gmail.com  Fri Mar 28 04:40:47 2014
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri, 28 Mar 2014 12:40:47 +0100
Subject: [gdal-dev] GDAL 1.11 release plan
In-Reply-To: <CACqzBMyvTt12JbUZh+-aVP4=6ujGvZJPjpm+5DsrngQKDSGmyA@mail.gmail.com>
References: <1395783436.5331f70c554f1@imp.free.fr>
	<CACALY+TqNLJCJNjJrU9bnnw2o7DVrZkgMOe+PtTyoR-_bHzXBA@mail.gmail.com>
	<CACqzBMyvTt12JbUZh+-aVP4=6ujGvZJPjpm+5DsrngQKDSGmyA@mail.gmail.com>
Message-ID: <CACALY+TJaQgwTg5JKsszWyGpzfYihzRAnc2Yfk+C8Jh0V0732A@mail.gmail.com>

Hi,

Adding VS2012/VS2013 support in GISInternals is a separate action (not
included in the release plan).

In fact I'm not keen to add further build instances to the current build
server installation which has a pretty limited set of resources.
However I've got a promise to have a new VM on a blade, which will be
sufficient to set up the new environment including further build instances.

Best regards,

Tamas





2014-03-26 6:25 GMT+01:00 xavier lhomme <lhomme.xavier at gmail.com>:

> Hi
>   Adding Visual Studio 2012 2013 in GISInternals for Gdal 1.11 should be
> great too.
> Xav
> Le 25 mars 2014 22:57, "Tamas Szekeres" <szekerest at gmail.com> a ?crit :
>
> That sounds good to me.
>>
>> Best regards,
>>
>> Tamas
>>
>>
>>
>> 2014-03-25 22:37 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:
>>
>>> Hi,
>>>
>>> GDAL 1.10 was released about one year ago, so it is time to think about
>>> the next
>>> release. I think we should just call it 1.11 given that there are no
>>> major
>>> architectural changes (although there have been non trivial changes in
>>> RAT
>>> management and for multiple geometry field support, but that only
>>> impacts core &
>>> drivers), and the C API and ABI is still preserved (for those who have
>>> looked at
>>> the other thread, my experiments on unification are *not* in trunk). For
>>> the
>>> details, I have initiated the preliminary NEWS :
>>> http://trac.osgeo.org/gdal/export/27091/trunk/gdal/NEWS (*)
>>> There are some mentions to 2.0 in the documentation of new features, but
>>> I'll
>>> end up fixing them to reflect the 1.11 numbering.
>>>
>>> I think we are in a good shape to start the beta phase soon. If people
>>> have
>>> features or bug fixes almost ready that they'd like to be in 1.11,
>>> please speak
>>> up now. Otherwise I suggest issuing a beta-1 at the end of next week,
>>> give it a
>>> week for testing, and depending on the outcome, issue a beta-2, or just
>>> try
>>> RC-1. Unless someone volunteers (the process is fairly well documented in
>>> HOWTO-RELEASE), I can be release manager for 1.11.
>>>
>>> Any opinion about that plan ?
>>>
>>> Best regards,
>>>
>>> Even
>>>
>>> --
>>> Geospatial professional services
>>> http://even.rouault.free.fr/services.html
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140328/4bf2d1c0/attachment.html>

From jukka.rahkonen at mmmtike.fi  Fri Mar 28 06:54:55 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 28 Mar 2014 13:54:55 +0000 (UTC)
Subject: [gdal-dev] GDAL 1.11 release plan
References: <1395783436.5331f70c554f1@imp.free.fr>
Message-ID: <loom.20140328T145440-76@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> Any opinion about that plan ?

+1

-Jukka Rahkonen-



From etourigny.dev at gmail.com  Fri Mar 28 07:09:47 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri, 28 Mar 2014 11:09:47 -0300
Subject: [gdal-dev] "Syncing" two rasters together...
In-Reply-To: <1396000166138-5131753.post@n6.nabble.com>
References: <CABG0rfswQoAgNP3n8oS39ZYpKuxG__UNNAbQ5AqLXB61_TdZNg@mail.gmail.com>
	<CANnL8goY+GXvACCOD7eMx-uzBeJf9F0i3uFKomoo47ytyAH2Tg@mail.gmail.com>
	<CABG0rftOzV9KmiZUOBSjXkZaBwZwwLOE9kXCPWzrRm9AJa+ing@mail.gmail.com>
	<1396000166138-5131753.post@n6.nabble.com>
Message-ID: <CA+TxYvMO=WA=nVjurq=EyZNP=9oLS4tQ4S4Trce35S=nHqN5dw@mail.gmail.com>

I've just heard of this project - any reason (aside from licencing issues)
that it could not be added to gdal/ogr itself?

It would be cool for gdal 2.0...

cheers
Etienne


On Fri, Mar 28, 2014 at 6:49 AM, kempenep <kempenep at gmail.com> wrote:

> Hi Jonathan,
>
> If I understand your question correctly, I might suggest an open source
> tool
> (GPL v3) for this job: pkcrop. It is part of pktools
> (http://pktools.nongnu.org), which is based on the GDAL API. By combining
> pkcrop with pkinfo (also in pktools), you could get what you want in a
> quite
> operational way. pkinfo allows you to define the proper bounding box, x, y
> resolution (pkinfo -i reference.tif -bb -dx -dy). The output can be
> directly
> used within pkcrop using $(command substitution). Not covered areas will
> have a nodata value. You can perform all steps in a one-liner: stacking a
> list of input images to  a multi-layer image using the same bounding box
> and
> spatial resolution
>
> pkcrop $(pkinfo -i reference.tif -dx -dy -bb) $(for LS in landsat*.tif; do
> echo " -i " $LS;done) -o stacked.tif
>
> Pieter.
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/gdal-dev-Syncing-two-rasters-together-tp5131677p5131753.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140328/409b2209/attachment-0001.html>

From vincent.mora at oslandia.com  Fri Mar 28 07:14:17 2014
From: vincent.mora at oslandia.com (Vincent Mora)
Date: Fri, 28 Mar 2014 15:14:17 +0100
Subject: [gdal-dev] GDAL 1.11 release plan
In-Reply-To: <1395997614.53353bae48c2e@imp.free.fr>
References: <1395783436.5331f70c554f1@imp.free.fr>	<1395996138133-5131724.post@n6.nabble.com>
	<1395997614.53353bae48c2e@imp.free.fr>
Message-ID: <533583B9.2020401@oslandia.com>

On 28/03/2014 10:06, Even Rouault wrote:
>> A good plan! Especially when including the Walk driver
And the WAsP driver ?


From peifer at gmx.eu  Fri Mar 28 07:17:45 2014
From: peifer at gmx.eu (peifer)
Date: Fri, 28 Mar 2014 07:17:45 -0700 (PDT)
Subject: [gdal-dev] Translating grid data to GML 3.2
Message-ID: <1396016265019-5131847.post@n6.nabble.com>

Hi All,

I am looking for a way to translate grid data to GML, i.e. do something
like: gdal_translate -of gml infile.nc outfile.gml

The expected result would be something similar to [1], which is a snippet
from a related OGC document [2].

I know that this translation isn't supported by GDAL at the moment, but will
it be in the future? Or are there perhaps tools around that would already do
this type of format translation?

Thanks in advance, Hermann

[1]
<gmlcov:RectifiedGridCoverage>
...
  <gml:rangeSet>
    <DataBlock>
      <rangeParameters/>
      <tupleList> 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 </tupleList>
    </DataBlock>
  </gml:rangeSet>
</gmlcov:RectifiedGridCoverage>

[2]
OGC 09-146r1 OGC? GML Application Schema - Coverages
http://portal.opengeospatial.org/files/?artifact_id=41438



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Translating-grid-data-to-GML-3-2-tp5131847.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From kyle at pobox.com  Fri Mar 28 08:13:16 2014
From: kyle at pobox.com (Kyle Shannon)
Date: Fri, 28 Mar 2014 09:13:16 -0600
Subject: [gdal-dev] GDAL 1.11 release plan
In-Reply-To: <533583B9.2020401@oslandia.com>
References: <1395783436.5331f70c554f1@imp.free.fr>
	<1395996138133-5131724.post@n6.nabble.com>
	<1395997614.53353bae48c2e@imp.free.fr> <533583B9.2020401@oslandia.com>
Message-ID: <CAJ0mEz08i7xefb2=cuLpQYOSAU9WWSVWq2qJwO5+JpiuoWzUsQ@mail.gmail.com>

On Fri, Mar 28, 2014 at 8:14 AM, Vincent Mora <vincent.mora at oslandia.com> wrote:
> On 28/03/2014 10:06, Even Rouault wrote:
>>>
>>> A good plan! Especially when including the Walk driver
>
> And the WAsP driver ?
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

Vincent,
The trunk will be 1.11.0, the WAsP driver will be included.

-- 
Kyle

From jonbritton3 at gmail.com  Fri Mar 28 08:58:57 2014
From: jonbritton3 at gmail.com (jonbritton3)
Date: Fri, 28 Mar 2014 08:58:57 -0700 (PDT)
Subject: [gdal-dev] ogr2ogr doesn't handle logical (boolean) MapInfo tab
 fields correctly
Message-ID: <1396022337474-5131893.post@n6.nabble.com>

Hi,

I'm trying to use ogr2ogr to load a MapInfo tab file into a PostgreSQL
database using the following command:



However, this produces the following error



The problem field is a Logical field in the source file (with values of T or
F). The actual value of the "crimeOccured" field in the first record is "T",
but ogr2ogr is picking up the integer value 0.

If I convert the tab file into another tab file then it works ok, but it
changes the data type of this field to Character which is not what I want.

Has anybody come across this issue before?

Cheers,

Jon

PS: apologies if this is the wrong message list, I can only seem to find the
dev list.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/ogr2ogr-doesn-t-handle-logical-boolean-MapInfo-tab-fields-correctly-tp5131893.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From kempenep at gmail.com  Fri Mar 28 09:13:41 2014
From: kempenep at gmail.com (kempenep)
Date: Fri, 28 Mar 2014 09:13:41 -0700 (PDT)
Subject: [gdal-dev] "Syncing" two rasters together...
In-Reply-To: <CA+TxYvMO=WA=nVjurq=EyZNP=9oLS4tQ4S4Trce35S=nHqN5dw@mail.gmail.com>
References: <CABG0rfswQoAgNP3n8oS39ZYpKuxG__UNNAbQ5AqLXB61_TdZNg@mail.gmail.com>
	<CANnL8goY+GXvACCOD7eMx-uzBeJf9F0i3uFKomoo47ytyAH2Tg@mail.gmail.com>
	<CABG0rftOzV9KmiZUOBSjXkZaBwZwwLOE9kXCPWzrRm9AJa+ing@mail.gmail.com>
	<1396000166138-5131753.post@n6.nabble.com>
	<CA+TxYvMO=WA=nVjurq=EyZNP=9oLS4tQ4S4Trce35S=nHqN5dw@mail.gmail.com>
Message-ID: <1396023221159-5131898.post@n6.nabble.com>

Hi,

pktools is licensed under GPL v3. To my understanding, code from pktools can
therefore be used GDAL. I'm not sure what this means for the resulting code?
I'm sure we can work it out. All code is in C++, which should facilitate
this (templates are used though).

I am happy to contribute to GDAL if there is interest in selecting
functionality of pktools. In an attempt not to overlap too much with the
GDAL utilities, pktools focuses on remote sensing processing (e.g., image
compositing, support vector machine classification,...). The two utilities I
mentioned in my previous reply are a bit of an exception, as they overlap
with gdalinfo (->pkinfo) and {gdal_translate, gdal_merge.py, gdalwarp}
(->pkcrop). The main reason for duplicating is this "piping" functionality
in the example. The output of pkinfo can directly be used in other utilities
such as pkcrop. There is no need to parse the output from gdalinfo first.

Pieter.




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-Syncing-two-rasters-together-tp5131677p5131898.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From vincent.mora at oslandia.com  Fri Mar 28 09:27:23 2014
From: vincent.mora at oslandia.com (Vincent Mora)
Date: Fri, 28 Mar 2014 17:27:23 +0100
Subject: [gdal-dev] GDAL 1.11 release plan
In-Reply-To: <CAJ0mEz08i7xefb2=cuLpQYOSAU9WWSVWq2qJwO5+JpiuoWzUsQ@mail.gmail.com>
References: <1395783436.5331f70c554f1@imp.free.fr>
	<1395996138133-5131724.post@n6.nabble.com>
	<1395997614.53353bae48c2e@imp.free.fr>
	<533583B9.2020401@oslandia.com>
	<CAJ0mEz08i7xefb2=cuLpQYOSAU9WWSVWq2qJwO5+JpiuoWzUsQ@mail.gmail.com>
Message-ID: <5335A2EB.6050206@oslandia.com>

On 28/03/2014 16:13, Kyle Shannon wrote:
> On Fri, Mar 28, 2014 at 8:14 AM, Vincent Mora <vincent.mora at oslandia.com> wrote:
>> On 28/03/2014 10:06, Even Rouault wrote:
>>>> A good plan! Especially when including the Walk driver
>> And the WAsP driver ?
>>
> Vincent,
> The trunk will be 1.11.0, the WAsP driver will be included.
>
Shall I add it tohttp://trac.osgeo.org/gdal/export/27091/trunk/gdal/NEWS  ?


From etourigny.dev at gmail.com  Fri Mar 28 09:28:04 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri, 28 Mar 2014 13:28:04 -0300
Subject: [gdal-dev] "Syncing" two rasters together...
In-Reply-To: <1396023221159-5131898.post@n6.nabble.com>
References: <CABG0rfswQoAgNP3n8oS39ZYpKuxG__UNNAbQ5AqLXB61_TdZNg@mail.gmail.com>
	<CANnL8goY+GXvACCOD7eMx-uzBeJf9F0i3uFKomoo47ytyAH2Tg@mail.gmail.com>
	<CABG0rftOzV9KmiZUOBSjXkZaBwZwwLOE9kXCPWzrRm9AJa+ing@mail.gmail.com>
	<1396000166138-5131753.post@n6.nabble.com>
	<CA+TxYvMO=WA=nVjurq=EyZNP=9oLS4tQ4S4Trce35S=nHqN5dw@mail.gmail.com>
	<1396023221159-5131898.post@n6.nabble.com>
Message-ID: <CA+TxYvMpk3pWJjNuSAA3dBSE8499nPRRgz+8CCNWBpv6mrX90A@mail.gmail.com>

I admit I did not look too much into your application.

In fact, it would be great to add a reference to it (and other software
that uses GDAL) somewhere in the wiki, perhaps the FAQ page?

Perhaps a few of the tools could be added to the utilities or the
functionality be integrated into existing utilities?

I am not sure about the licensing... pktools is licensed under GPLv3 but
GDAL itself is licensed under the a X11/MIT licence which is NOT GPL.
So I am not sure if some parts could be integrated into GDAL without
changing the licence or "corrupting" (nothing negative here) GDAL itself.
Many applications use GDAL/OGR because of its more permissive licence. Any
GPL3 code has to be re-licensed (LGPL seems ok) before inclusion into the
gdal source tree.

cheers
Etienne


On Fri, Mar 28, 2014 at 1:13 PM, kempenep <kempenep at gmail.com> wrote:

> Hi,
>
> pktools is licensed under GPL v3. To my understanding, code from pktools
> can
> therefore be used GDAL. I'm not sure what this means for the resulting
> code?
> I'm sure we can work it out. All code is in C++, which should facilitate
> this (templates are used though).
>
> I am happy to contribute to GDAL if there is interest in selecting
> functionality of pktools. In an attempt not to overlap too much with the
> GDAL utilities, pktools focuses on remote sensing processing (e.g., image
> compositing, support vector machine classification,...). The two utilities
> I
> mentioned in my previous reply are a bit of an exception, as they overlap
> with gdalinfo (->pkinfo) and {gdal_translate, gdal_merge.py, gdalwarp}
> (->pkcrop). The main reason for duplicating is this "piping" functionality
> in the example. The output of pkinfo can directly be used in other
> utilities
> such as pkcrop. There is no need to parse the output from gdalinfo first.
>
> Pieter.
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/gdal-dev-Syncing-two-rasters-together-tp5131677p5131898.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140328/690b5718/attachment.html>

From tkeitt at utexas.edu  Fri Mar 28 13:04:02 2014
From: tkeitt at utexas.edu (Tim Keitt)
Date: Fri, 28 Mar 2014 15:04:02 -0500
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <1395995088.533531d095c86@imp.free.fr>
References: <1395694013.533099bdba7cb@imp.free.fr>
	<53314406.7090903@oslandia.com>
	<1395744290.53315e2221801@imp.free.fr> <533172EB.9070107@oslandia.com>
	<CA+TxYvNW8RtxVN6NEn4oDsbWVw4YKZG5ZkAqnKnVzyyt1YFubw@mail.gmail.com>
	<1395778445.5331e38da2d6a@imp.free.fr>
	<CAL81ghATCsy0vq3RmNAqmvbpose5qVzcuD-TdSM_ycvS46UANA@mail.gmail.com>
	<1395915887.5333fc6f8bc4c@imp.free.fr> <53347874.7010907@gmail.com>
	<CA+TxYvNiG4qEUwyNFa5mq6H1KvSbkCzbmwaNwAd2rsPUS-s++g@mail.gmail.com>
	<53347E86.2070808@gmail.com> <1395995088.533531d095c86@imp.free.fr>
Message-ID: <CANnL8go_6P0WmyTPjOFJOwJcCeF0ZV0Uj6aCY_Bmu=dLj1jyvg@mail.gmail.com>

Something to consider is writing an interface that wraps the old code.
Modern generic approaches make this easy.

Perhaps evaluate the Generic Image Library and Boost Geometry as candidates?

THK


On Fri, Mar 28, 2014 at 3:24 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Dmitriy,
>
> It is not at all my intention to have a big-bang for GDAL 2.0. According
> to the
> ohloh estimation ( http://www.ohloh.net/p/gdal/estimated_cost ), the
> cumulated
> development to make GDAL as it is currently would represent a 265
> person-years
> effort. I do think it is overestimated (they also include the external
> libraries
> that have been imported in the tree like libtiff, etc..); it should be
> closer to
> 30 person-years (2 full time position for the 15 years the project exist)
> but
> still... I don't think anything justifies a rewrite.
> My vision is more a series of incremental changes where the software
> remains
> stable and usable at each stage. That way you, we can make sure that GDAL
> 2.0
> can be released some day...
>
> Even
>
> > Hi Etienne,
> >
> > Yes, on first stage some format will be dropped. But exist GDAL 1.x will
> > help where.
> > It seems to me that rewriting of formats will not so hard as develop new
> > one.
> > NetCDF is popular form and should be rewrite in first stage. We can
> > create a wiki page with table of format and stages and responsibility -
> > so we see how the work will be hard.
> >
> > Best regards,
> >      Dmitry
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
http://www.keittlab.org/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140328/339ed364/attachment.html>

From mateusz at loskot.net  Fri Mar 28 13:24:36 2014
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Fri, 28 Mar 2014 21:24:36 +0100
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <CANnL8go_6P0WmyTPjOFJOwJcCeF0ZV0Uj6aCY_Bmu=dLj1jyvg@mail.gmail.com>
References: <1395694013.533099bdba7cb@imp.free.fr>
	<53314406.7090903@oslandia.com>
	<1395744290.53315e2221801@imp.free.fr> <533172EB.9070107@oslandia.com>
	<CA+TxYvNW8RtxVN6NEn4oDsbWVw4YKZG5ZkAqnKnVzyyt1YFubw@mail.gmail.com>
	<1395778445.5331e38da2d6a@imp.free.fr>
	<CAL81ghATCsy0vq3RmNAqmvbpose5qVzcuD-TdSM_ycvS46UANA@mail.gmail.com>
	<1395915887.5333fc6f8bc4c@imp.free.fr> <53347874.7010907@gmail.com>
	<CA+TxYvNiG4qEUwyNFa5mq6H1KvSbkCzbmwaNwAd2rsPUS-s++g@mail.gmail.com>
	<53347E86.2070808@gmail.com> <1395995088.533531d095c86@imp.free.fr>
	<CANnL8go_6P0WmyTPjOFJOwJcCeF0ZV0Uj6aCY_Bmu=dLj1jyvg@mail.gmail.com>
Message-ID: <CABUeae-8qzggdLtw-oUpN9vWGp9V4krgQg25e463jcwPTtVkmw@mail.gmail.com>

On 28 March 2014 21:04, Tim Keitt <tkeitt at utexas.edu> wrote:
> Something to consider is writing an interface that wraps the old code.
> Modern generic approaches make this easy.
>
> Perhaps evaluate the Generic Image Library and Boost Geometry as candidates?

GDAL is I/O oriented, whereas in GIL and BG, I/O layer is an extension.

Regardless, I've been prototyping GDAL driver for the new GIL I/O
layer (aka GIL.IOv2),
you may check it here
https://github.com/mloskot/boost-gil-workshop/tree/gil-io2-gdal

Best regards,
-- 
Mateusz  ?oskot, http://mateusz.loskot.net

From even.rouault at mines-paris.org  Fri Mar 28 13:28:07 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 28 Mar 2014 21:28:07 +0100
Subject: [gdal-dev] GDAL 1.11 release plan
In-Reply-To: <5335A2EB.6050206@oslandia.com>
References: <1395783436.5331f70c554f1@imp.free.fr>
	<CAJ0mEz08i7xefb2=cuLpQYOSAU9WWSVWq2qJwO5+JpiuoWzUsQ@mail.gmail.com>
	<5335A2EB.6050206@oslandia.com>
Message-ID: <201403282128.15924.even.rouault@mines-paris.org>

Le vendredi 28 mars 2014 17:27:23, Vincent Mora a ?crit :
> On 28/03/2014 16:13, Kyle Shannon wrote:
> > On Fri, Mar 28, 2014 at 8:14 AM, Vincent Mora <vincent.mora at oslandia.com> 
wrote:
> >> On 28/03/2014 10:06, Even Rouault wrote:
> >>>> A good plan! Especially when including the Walk driver
> >> 
> >> And the WAsP driver ?
> > 
> > Vincent,
> > The trunk will be 1.11.0, the WAsP driver will be included.
> 
> Shall I add it tohttp://trac.osgeo.org/gdal/export/27091/trunk/gdal/NEWS  ?

The NEWS file will be updated with the commits done since r27026.

> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From tkeitt at utexas.edu  Sat Mar 29 09:08:18 2014
From: tkeitt at utexas.edu (Tim Keitt)
Date: Sat, 29 Mar 2014 11:08:18 -0500
Subject: [gdal-dev] Draft GDAL/OGR class hierarchy for GDAL 2.0
In-Reply-To: <CABUeae-8qzggdLtw-oUpN9vWGp9V4krgQg25e463jcwPTtVkmw@mail.gmail.com>
References: <1395694013.533099bdba7cb@imp.free.fr>
	<53314406.7090903@oslandia.com>
	<1395744290.53315e2221801@imp.free.fr> <533172EB.9070107@oslandia.com>
	<CA+TxYvNW8RtxVN6NEn4oDsbWVw4YKZG5ZkAqnKnVzyyt1YFubw@mail.gmail.com>
	<1395778445.5331e38da2d6a@imp.free.fr>
	<CAL81ghATCsy0vq3RmNAqmvbpose5qVzcuD-TdSM_ycvS46UANA@mail.gmail.com>
	<1395915887.5333fc6f8bc4c@imp.free.fr> <53347874.7010907@gmail.com>
	<CA+TxYvNiG4qEUwyNFa5mq6H1KvSbkCzbmwaNwAd2rsPUS-s++g@mail.gmail.com>
	<53347E86.2070808@gmail.com> <1395995088.533531d095c86@imp.free.fr>
	<CANnL8go_6P0WmyTPjOFJOwJcCeF0ZV0Uj6aCY_Bmu=dLj1jyvg@mail.gmail.com>
	<CABUeae-8qzggdLtw-oUpN9vWGp9V4krgQg25e463jcwPTtVkmw@mail.gmail.com>
Message-ID: <CANnL8gqAMK3JZgsSEj5J9xPB6Oc7FTaWjgp+Jg=s+xvm6B4fAg@mail.gmail.com>

On Fri, Mar 28, 2014 at 3:24 PM, Mateusz ?oskot <mateusz at loskot.net> wrote:

> On 28 March 2014 21:04, Tim Keitt <tkeitt at utexas.edu> wrote:
> > Something to consider is writing an interface that wraps the old code.
> > Modern generic approaches make this easy.
> >
> > Perhaps evaluate the Generic Image Library and Boost Geometry as
> candidates?
>
> GDAL is I/O oriented, whereas in GIL and BG, I/O layer is an extension.
>
> Regardless, I've been prototyping GDAL driver for the new GIL I/O
> layer (aka GIL.IOv2),
> you may check it here
> https://github.com/mloskot/boost-gil-workshop/tree/gil-io2-gdal


Looks promising. Certainly a nicer framework for implementing algorithms.

THK


>
>
> Best regards,
> --
> Mateusz  ?oskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
http://www.keittlab.org/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140329/b69c086c/attachment.html>

From shawngong.gdal at gmail.com  Mon Mar 31 08:19:36 2014
From: shawngong.gdal at gmail.com (shawn gong)
Date: Mon, 31 Mar 2014 11:19:36 -0400
Subject: [gdal-dev] Rasterize a shapefile as mask
Message-ID: <CAA1EJsU6t4CCZzaA70hEQFXYVMtto++hoqkhto4PoR3BtG4Dhw@mail.gmail.com>

Hi list,

I have a RSAT-2 image and a shoreline vector (consists of 2 polygons). I
want to generate a mask with the same # of lines and pixels as the RSAT-2
image, and make inside polygons as 0, outside as 1.

The example that I could find is UTM based, which I tried and sort of
worked. But the mask image is not oblique as the RSAT-2 image. When I used
the lat/lon projection, the gdal.RasterizeLayer() doesn't work. Would
someone tell me why?

thanks,
Shawn


UTM version that worked:
    from osgeo import gdal, ogr, gdal_array

    # Filename of input OGR file
    vector_file = 'shoreline_utm.shp'

    # Open the data source and read in the extent
    vector_ds = ogr.Open(vector_file)
    vector_layer = vector_ds.GetLayer()
    #vector_srs = vector_layer.GetSpatialRef()
    x_min, x_max, y_min, y_max = vector_layer.GetExtent()

    # raster Tiff that will be created
    new_raster = 'shoreline_utm.tif'

    pixel_spacing = 9.77
    line_spacing = 5.5
    xsize = int((x_max - x_min) / pixel_spacing)
    ysize = int((y_max - y_min) / line_spacing)

    new_raster_ds = gdal.GetDriverByName('GTiff').Create(new_raster, xsize,
ysize, 1, gdal.GDT_Byte)
    new_raster_ds.SetGeoTransform((x_min, pixel_spacing, 0, y_max, 0,
-line_spacing))

    band = new_raster_ds.GetRasterBand(1)
    band.Fill(1)
    gdal.RasterizeLayer(new_raster_ds, [1], vector_layer, burn_values=[0])


lat/lon version:
    from osgeo import gdal, ogr, gdal_array

    # Filename of input OGR file
    vector_file = 'shoreline.shp'

    # Open the data source and read in the extent
    vector_ds = ogr.Open(vector_file)
    vector_layer = vector_ds.GetLayer()

    # raster Tiff that will be created
    new_raster = 'shorelineTest.tif'

    # master Tiff whose size will be copied
    master = 'product.xml'
    master_ds = gdal.Open(master)
    xsize, ysize = master_ds.RasterXSize, master_ds.RasterYSize

    new_raster_ds = gdal.GetDriverByName('GTiff').Create(new_raster, xsize,
ysize, 1, gdal.GDT_Byte)

    # use georeferencing from the main product.xml dataset
    gdal_array.CopyDatasetInfo(master_ds, new_raster_ds)

    band = new_raster_ds.GetRasterBand(1)
    band.Fill(1)

    gdal.RasterizeLayer(new_raster_ds, [1], vector_layer, burn_values=[0])
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140331/7331af0b/attachment.html>

From knelson at usgs.gov  Mon Mar 31 09:11:24 2014
From: knelson at usgs.gov (Kurtis Nelson)
Date: Mon, 31 Mar 2014 11:11:24 -0500
Subject: [gdal-dev] "Syncing" two rasters together...
In-Reply-To: <CABG0rftOzV9KmiZUOBSjXkZaBwZwwLOE9kXCPWzrRm9AJa+ing@mail.gmail.com>
References: <CABG0rfswQoAgNP3n8oS39ZYpKuxG__UNNAbQ5AqLXB61_TdZNg@mail.gmail.com>	<CANnL8goY+GXvACCOD7eMx-uzBeJf9F0i3uFKomoo47ytyAH2Tg@mail.gmail.com>
	<CABG0rftOzV9KmiZUOBSjXkZaBwZwwLOE9kXCPWzrRm9AJa+ing@mail.gmail.com>
Message-ID: <533993AC.8030502@usgs.gov>

We've done quite a bit of time series stacking of Landsat data for 
change detection using the method you are testing.

We determine the output frame of either the minimum bounding box of all 
the input scenes (gdalinfo each scene, save corner coordinates, compute 
bounding box) or we have also pre-defined tiling systems and used those 
corners.  We then use gdalwarp on each scene, specify the output frame 
with -te, specify the resolution with -tr, and the output coordinate 
system with -t_srs.  This will produce a stack of images with the same 
number of lines/samples and the same output extent that should overlay 
correctly.

__________________________________________________
Kurtis Nelson
Physical Scientist - Wildland Fire Science Team
United States Geological Survey (USGS)
Earth Resources Observation & Science (EROS) Center
47914 252nd Street
Sioux Falls, SD 57198
(605) 594-2805 (phone)
(605) 594-6529 (fax)
knelson at usgs.gov

"For every complex problem there is an answer that is clear, simple, and 
wrong"
Henry Louis Mencken

On 3/27/2014 5:37 PM, Jonathan Greenberg wrote:
> Hi Tim:
>
> Not quite -- all I'm trying to do is basically crop (or expand) one
> raster to another's extent, but given two images may have their upper
> left coordinates somewhat "out of sync" (so the pixels don't line up
> perfectly with one another), I'm a bit unclear on how to do this --
> the goal is to have two rasters with identical geographic information
> (same projection, pixel size, row and column numbers) -- this then
> allows me to "stack" them together to create an e.g. time series.
>
> I'm thinking using gdalwarp with the te, t_srs, and ts/tr set to the
> "reference" file may accomplish the task -- running a test now.
>
> This is a common problem with a lot of raster analyses -- data from a
> wide variety of sources/resolutions/projections need to be coerced to
> a common set of spatial references so models can be applied to them
> (e.g. species distribution models).  This is a common enough task that
> it would be nice to see this as a feature in e.g. gdalwarp, if it
> isn't already.
>
> --j
>
> On Thu, Mar 27, 2014 at 5:27 PM, Tim Keitt <tkeitt at utexas.edu> wrote:
>>
>>
>> On Thu, Mar 27, 2014 at 4:26 PM, Jonathan Greenberg <jgrn at illinois.edu>
>> wrote:
>>> GDALers:
>>>
>>> What is the most efficient way, given a "reference raster", and an
>>> arbitrary raster (we'll call it "unsynced") synced together to allow
>>> them to be stacked: the output of this should be the unsynced raster
>>> with the same number of rows, columns, pixel size, upper left
>>> coordinates, and projection as the reference raster.
>>>
>>> Here are the assumptions:
>>> - both rasters already have the same pixel size and projection, but
>>> the offset of the upper left coordinate may not be "perfect"
>>>
>>> - for each pixel location defined by the reference raster, the output
>>> should have the closest (nearest neighbor) pixel from the unsynced
>>> raster.  It should have some NA value in regions where the reference
>>> and unsynced do not overlap.
>>>
>>> Thoughts?  The application of this would be e.g. taking a set of
>>> Landsat images from different time periods (each image has slightly
>>> different numbers of rows and columns), and stacking them together to
>>> perform time series analysis.
>>
>> If I read right you are trying to estimate the x,y offset error in one
>> image. You can assign GCPs by picking identical pixels in each image and
>> then warp one of them to the other. OSSIM has some capability for image
>> matching I believe. If you convolve the two images, you should get an
>> impulse at the correct offset, but this is tricky in practice. Panorama
>> software may be able to compute the exact matching of the images.
>>
>> THK
>>
>>>
>>> Cheers!
>>>
>>> --j
>>>
>>> --
>>> Jonathan A. Greenberg, PhD
>>> Assistant Professor
>>> Global Environmental Analysis and Remote Sensing (GEARS) Laboratory
>>> Department of Geography and Geographic Information Science
>>> University of Illinois at Urbana-Champaign
>>> 259 Computing Applications Building, MC-150
>>> 605 East Springfield Avenue
>>> Champaign, IL  61820-6371
>>> Phone: 217-300-1924
>>> http://www.geog.illinois.edu/~jgrn/
>>> AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>> --
>> http://www.keittlab.org/
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140331/5ff04bbe/attachment.html>

From etourigny.dev at gmail.com  Mon Mar 31 11:17:43 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 31 Mar 2014 15:17:43 -0300
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
 release plans, GDAL 2.0
In-Reply-To: <201402132214.20518.even.rouault@mines-paris.org>
References: <201402132214.20518.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvMJz5387ng5k5Ew0gm6VGJ1cfJj+bhu84=4F-wXd2hJCw@mail.gmail.com>

Hi all,

I have a few suggestions for gdal 2.0, based on my personal experience in
learning to use, enhance and maintain gdal/ogr code.

- replace cpl/csl/string/xml code with a mainstream, modern cross-platform
toolkit such as QT, boost, etc.

While cpl/csl classes are robust and "do the job", they are not well
documented and not very intuitive for a new gdal coder. This is from my
personal experience, some may not agree.
They are also not used outside gdal, as such do not benefit from
enhancements as other toolkits.
The drawback is that some data/methods would not be easily available in c
and other bindings. Also it might not be available for all platforms.
Existing code would still be able to use cpl/csl code but be deprecated
until a given release.


- upgrade/migrate gdal support file (files in .csv format such as gcs.csv)
reading to use containers (e.g. hash maps) instead of reading the relevant
.csv files every time

Current reading of gdal support files is sub-optimal as any query for
support data requires reading the relevant support file(s). It would be
more efficient to read these once and cache into a container (such as hash
map). This could be done using a cross-platform toolkit mentioned earlier.


- modify metadata treatment to be able to store/retrieve data in formats
other than strings (e.g. floats, doubles, boolean), and query the actual
type of a given metadata item.

Currently there is no way to know if a given metadata item represents an
integer, float, double (or string).

In the netcdf driver, I overcame this limitation in 2 ways:
1) parsing the value to test if it is an int, float or double (potentially
error-prone)
2) add an extra metadata item to specify the type of the data represented
(cumbersome and non-standard)

My suggestion would be to be able to store metadata value along with its
data type (default string as previously). This would require some kind of
container for internal representation (e.g. in qt: QMap<QString, QVariant>)
and a way to represent this on file (as .aux.xml or otherwise in files that
support metadata) such as gtiff. Values could be stored as strings to avoid
big/little endian conversion problems. Data type could be stored in a
(hidden) metadata domain, one item for each "real" metadata key.


cheers,
Etienne



On Thu, Feb 13, 2014 at 7:14 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Hi,
>
> I've confirmed my presence to the OSGeo Vienna code sprint (
> http://wiki.osgeo.org/wiki/Vienna_Code_Sprint_2014 ). Are there folks that
> will be there and indent doing some work on GDAL ? Any particular topics of
> interest ?
>
> It could be the opportunity to take a crack at some changes that have been
> mentionned for some time and are listed at
> http://trac.osgeo.org/gdal/wiki/GDAL20Changes
>
> We should decide how to manage the 2.0 transition. I think that the 2.0
> number
> should be reserved as the opportunity of introducing breaking changes in
> the
> API / ABI. But this might take a long time to implement all that is listed
> above, so there's a risk we end up with a trunk that is never ready for
> release for years. Not a good thing.
> On the other hand, we could just be more modest and take breaking changes
> as
> they are introduced and raise the major version number (so the yearly
> version
> after 2.0 could be 3.0). This will require projects using GDAL to adapt
> multiple times.
> An alternative would be to prepare the API for new features even if they
> are
> not implemented, but that's a difficult exercise and there's a risk that at
> implementation time, the API doesn't fit.
> Any thoughts ?
>
> Currently we have no such breakage in trunk so it could qualify as GDAL
> 1.11.
> Perhaps we should just release it as such for now before the bigger
> changes ?
>
> Somes topics I can see for GDAL 2.0 that impact API/ABI :
> - well, the mythological unification of OGR driver model with GDAL driver
> model.
> - XYZM support
> - Curve geometries
> - 64 bit integer support
>
> Other possible structural changes :
> - Change of master version control system: switch to git / GitHub ?
> - New build system : cmake ?
>
> Of course all of this will more likely happen if contributors or funders
> show
> up !
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140331/cd5ae5b6/attachment-0001.html>

From even.rouault at mines-paris.org  Mon Mar 31 12:03:00 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 31 Mar 2014 21:03:00 +0200
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
	release plans, GDAL 2.0
In-Reply-To: <CA+TxYvMJz5387ng5k5Ew0gm6VGJ1cfJj+bhu84=4F-wXd2hJCw@mail.gmail.com>
References: <201402132214.20518.even.rouault@mines-paris.org>
	<CA+TxYvMJz5387ng5k5Ew0gm6VGJ1cfJj+bhu84=4F-wXd2hJCw@mail.gmail.com>
Message-ID: <201403312103.00978.even.rouault@mines-paris.org>

Hi Etienne,

Thanks for your ideas.

> Hi all,
> 
> I have a few suggestions for gdal 2.0, based on my personal experience in
> learning to use, enhance and maintain gdal/ogr code.
> 
> - replace cpl/csl/string/xml code with a mainstream, modern cross-platform
> toolkit such as QT, boost, etc.

QT is certainly a dependency we wouldn't want to draw. Too big for some 
embededded usage, and it would make GDAL to be practially bound by the LGPL.
I guess standard C++ libraries classes, or perhaps boost, should do the job 
for what you mention below.

> 
> While cpl/csl classes are robust and "do the job", they are not well
> documented and not very intuitive for a new gdal coder. This is from my
> personal experience, some may not agree.
> They are also not used outside gdal, as such do not benefit from
> enhancements as other toolkits.

Well, at least, MapServer uses a few CPL functions : CPL minixml, 
CPLMalloc/CPLFree, CPLReadDir, CPLFormFilename, CPLGetFilename, 
CSLInsertString, etc..

> The drawback is that some data/methods would not be easily available in c
> and other bindings. Also it might not be available for all platforms.
> Existing code would still be able to use cpl/csl code but be deprecated
> until a given release.
> 
> 
> - upgrade/migrate gdal support file (files in .csv format such as gcs.csv)
> reading to use containers (e.g. hash maps) instead of reading the relevant
> .csv files every time
> 
> Current reading of gdal support files is sub-optimal as any query for
> support data requires reading the relevant support file(s). It would be
> more efficient to read these once and cache into a container (such as hash
> map). This could be done using a cross-platform toolkit mentioned earlier.

Another option would be to use a .sqlite database with proper indices. SQLite 
would become a runtime requirement, but I don't think that would be a big 
problem.

> 
> 
> - modify metadata treatment to be able to store/retrieve data in formats
> other than strings (e.g. floats, doubles, boolean), and query the actual
> type of a given metadata item.
> 
> Currently there is no way to know if a given metadata item represents an
> integer, float, double (or string).
> 
> In the netcdf driver, I overcame this limitation in 2 ways:
> 1) parsing the value to test if it is an int, float or double (potentially
> error-prone)
> 2) add an extra metadata item to specify the type of the data represented
> (cumbersome and non-standard)
> 
> My suggestion would be to be able to store metadata value along with its
> data type (default string as previously). This would require some kind of
> container for internal representation (e.g. in qt: QMap<QString, QVariant>)
> and a way to represent this on file (as .aux.xml or otherwise in files that
> support metadata) such as gtiff. Values could be stored as strings to avoid
> big/little endian conversion problems. Data type could be stored in a
> (hidden) metadata domain, one item for each "real" metadata key.

Interesting idea.

Well, we need coders now ;-)

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From mateusz at loskot.net  Mon Mar 31 12:13:53 2014
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Mon, 31 Mar 2014 21:13:53 +0200
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
 release plans, GDAL 2.0
In-Reply-To: <CA+TxYvMJz5387ng5k5Ew0gm6VGJ1cfJj+bhu84=4F-wXd2hJCw@mail.gmail.com>
References: <201402132214.20518.even.rouault@mines-paris.org>
	<CA+TxYvMJz5387ng5k5Ew0gm6VGJ1cfJj+bhu84=4F-wXd2hJCw@mail.gmail.com>
Message-ID: <CABUeae_bFmHG6yE1uMgrKDJD0Nk6R+3muJmWE0SNWe7PEer2-g@mail.gmail.com>

On 31 March 2014 20:17, Etienne Tourigny <etourigny.dev at gmail.com> wrote:
>
> I have a few suggestions for gdal 2.0, based on my personal experience in
> learning to use, enhance and maintain gdal/ogr code.
>
> - replace cpl/csl/string/xml code with a mainstream, modern cross-platform
> toolkit such as QT, boost, etc.

IMHO, there is no need to look that far, at Qt or Boost.
There is plenty of features in C++, some features of C++11 could be
conditionally-enabled as well.

Replacing some of the homegrown utilities with C++ std would make things
slightly better in terms of API discoverability, self-documented,
easier to use, ...
https://trac.osgeo.org/gdal/ticket/1629

Best regards,
-- 
Mateusz  ?oskot, http://mateusz.loskot.net

From bishop.dev at gmail.com  Mon Mar 31 12:37:35 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Mon, 31 Mar 2014 23:37:35 +0400
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
 release plans, GDAL 2.0
In-Reply-To: <201403312103.00978.even.rouault@mines-paris.org>
References: <201402132214.20518.even.rouault@mines-paris.org>	<CA+TxYvMJz5387ng5k5Ew0gm6VGJ1cfJj+bhu84=4F-wXd2hJCw@mail.gmail.com>
	<201403312103.00978.even.rouault@mines-paris.org>
Message-ID: <5339C3FF.7010408@gmail.com>

Hi,

I think the JSON format is good for metadata storing and representation. 
JSON support to store string, digits, bool, dates, etc. Write such data 
and read such data from files.
But need good library or set of classes to work with it in memory 
representation.
For example I like  wxJSON - it support to get value by name or iterate 
values by index.

int  majorVer = root["wxWidgets"]["Version"]["Major"].AsInt  <http://wxcode.sourceforge.net/docs/wxjson/classwxJSONValue.html#9223209e7eea4dd4d668869b69560acb>();


root["wxWidgets"]["Authors"][0] ="J. Smart";
root["wxWidgets"]["Authors"][1] ="V. Zeitling";
root["wxWidgets"]["Authors"][2] ="R. Roebling";


It consist only 3 files (json reader, json writer and json value).

It seems to me that json-c library is more complicated. Unfortunately  
wxJSON cannot be used in GDAL as it have bindings to wxWidgets library, 
but the approach is interesting. By the way wxWidgets have more 
democratic license instead of qt.

Best regards,
     Dmitry

31.03.2014 23:03, Even Rouault ?????:
> Hi Etienne,
>
> Thanks for your ideas.
>
>> Hi all,
>>
>> I have a few suggestions for gdal 2.0, based on my personal experience in
>> learning to use, enhance and maintain gdal/ogr code.
>>
>> - replace cpl/csl/string/xml code with a mainstream, modern cross-platform
>> toolkit such as QT, boost, etc.
> QT is certainly a dependency we wouldn't want to draw. Too big for some
> embededded usage, and it would make GDAL to be practially bound by the LGPL.
> I guess standard C++ libraries classes, or perhaps boost, should do the job
> for what you mention below.
>
>> While cpl/csl classes are robust and "do the job", they are not well
>> documented and not very intuitive for a new gdal coder. This is from my
>> personal experience, some may not agree.
>> They are also not used outside gdal, as such do not benefit from
>> enhancements as other toolkits.
> Well, at least, MapServer uses a few CPL functions : CPL minixml,
> CPLMalloc/CPLFree, CPLReadDir, CPLFormFilename, CPLGetFilename,
> CSLInsertString, etc..
>
>> The drawback is that some data/methods would not be easily available in c
>> and other bindings. Also it might not be available for all platforms.
>> Existing code would still be able to use cpl/csl code but be deprecated
>> until a given release.
>>
>>
>> - upgrade/migrate gdal support file (files in .csv format such as gcs.csv)
>> reading to use containers (e.g. hash maps) instead of reading the relevant
>> .csv files every time
>>
>> Current reading of gdal support files is sub-optimal as any query for
>> support data requires reading the relevant support file(s). It would be
>> more efficient to read these once and cache into a container (such as hash
>> map). This could be done using a cross-platform toolkit mentioned earlier.
> Another option would be to use a .sqlite database with proper indices. SQLite
> would become a runtime requirement, but I don't think that would be a big
> problem.
>
>>
>> - modify metadata treatment to be able to store/retrieve data in formats
>> other than strings (e.g. floats, doubles, boolean), and query the actual
>> type of a given metadata item.
>>
>> Currently there is no way to know if a given metadata item represents an
>> integer, float, double (or string).
>>
>> In the netcdf driver, I overcame this limitation in 2 ways:
>> 1) parsing the value to test if it is an int, float or double (potentially
>> error-prone)
>> 2) add an extra metadata item to specify the type of the data represented
>> (cumbersome and non-standard)
>>
>> My suggestion would be to be able to store metadata value along with its
>> data type (default string as previously). This would require some kind of
>> container for internal representation (e.g. in qt: QMap<QString, QVariant>)
>> and a way to represent this on file (as .aux.xml or otherwise in files that
>> support metadata) such as gtiff. Values could be stored as strings to avoid
>> big/little endian conversion problems. Data type could be stored in a
>> (hidden) metadata domain, one item for each "real" metadata key.
> Interesting idea.
>
> Well, we need coders now ;-)
>
> Even
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140331/12ef63ba/attachment.html>

From mateusz at loskot.net  Mon Mar 31 12:44:30 2014
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Mon, 31 Mar 2014 21:44:30 +0200
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
 release plans, GDAL 2.0
In-Reply-To: <5339C3FF.7010408@gmail.com>
References: <201402132214.20518.even.rouault@mines-paris.org>
	<CA+TxYvMJz5387ng5k5Ew0gm6VGJ1cfJj+bhu84=4F-wXd2hJCw@mail.gmail.com>
	<201403312103.00978.even.rouault@mines-paris.org>
	<5339C3FF.7010408@gmail.com>
Message-ID: <CABUeae9nDmfrWSn5o5CmkvtHr2CxNwmZBM0US9twABr8e82M6A@mail.gmail.com>

On 31 March 2014 21:37, Dmitriy Baryshnikov <bishop.dev at gmail.com> wrote:
> Hi,
>
> I think the JSON format is good for metadata storing and representation.
> JSON support to store string, digits, bool, dates, etc.

IMO it's great idea.

> It consist only 3 files (json reader, json writer and json value).
>
> It seems to me that json-c library is more complicated. Unfortunately
> wxJSON cannot be used in GDAL as it have bindings to wxWidgets library, but
> the approach is interesting. By the way wxWidgets have more democratic
> license instead of qt.

A header-only MIT-licensed rapidjson is worth to check
https://code.google.com/p/rapidjson/

Best regards,
-- 
Mateusz  ?oskot, http://mateusz.loskot.net

From bishop.dev at gmail.com  Mon Mar 31 12:55:46 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Mon, 31 Mar 2014 23:55:46 +0400
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
 release plans, GDAL 2.0
In-Reply-To: <CABUeae9nDmfrWSn5o5CmkvtHr2CxNwmZBM0US9twABr8e82M6A@mail.gmail.com>
References: <201402132214.20518.even.rouault@mines-paris.org>
	<CA+TxYvMJz5387ng5k5Ew0gm6VGJ1cfJj+bhu84=4F-wXd2hJCw@mail.gmail.com>
	<201403312103.00978.even.rouault@mines-paris.org>
	<5339C3FF.7010408@gmail.com>
	<CABUeae9nDmfrWSn5o5CmkvtHr2CxNwmZBM0US9twABr8e82M6A@mail.gmail.com>
Message-ID: <5339C842.7080802@gmail.com>

Hi Mateus,

That's really what I'm talking about. Good example, but need some testing.

Best regards,
     Dmitry

31.03.2014 23:44, Mateusz ?oskot ?????:
> On 31 March 2014 21:37, Dmitriy Baryshnikov <bishop.dev at gmail.com> wrote:
>> Hi,
>>
>> I think the JSON format is good for metadata storing and representation.
>> JSON support to store string, digits, bool, dates, etc.
> IMO it's great idea.
>
>> It consist only 3 files (json reader, json writer and json value).
>>
>> It seems to me that json-c library is more complicated. Unfortunately
>> wxJSON cannot be used in GDAL as it have bindings to wxWidgets library, but
>> the approach is interesting. By the way wxWidgets have more democratic
>> license instead of qt.
> A header-only MIT-licensed rapidjson is worth to check
> https://code.google.com/p/rapidjson/
>
> Best regards,


From rgourrat at ag-carto.fr  Mon Mar 31 13:03:20 2014
From: rgourrat at ag-carto.fr (=?iso-8859-1?Q?R=E9my_GOURRAT?=)
Date: Mon, 31 Mar 2014 20:03:20 +0000
Subject: [gdal-dev] ogrinfo 1.10 with oracle view is failing
Message-ID: <A47F1026-7796-4683-9AF7-FA55B7EFDED7@ag-carto.fr>

Hi,

I do an ogrinfo on oracle view.

Ogrinfo return ora-04043 object don't exist

i do the same command on the native table with success.

So i check the metadata in user_sdo_geom_metadata, it's same metadata for the view and the table.

I recompile the view to have exactly same fields, same tablespace... in the view that the table (create myview as select * from mytable)

But it's always the same issue :
Ora-04043...

I use :
Ogrinfo 1.10 (from Qgis 2.0.1)
Oracle instant client 12 64bits
Oracle database 10g2

In sqldevelopper with the same user used with ogrinfo i can :
- describe the view
- select
-...

Thanks for your advice

Remy

From lucena_ivan at hotmail.com  Mon Mar 31 13:45:36 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Mon, 31 Mar 2014 16:45:36 -0400
Subject: [gdal-dev] ogrinfo 1.10 with oracle view is failing
In-Reply-To: <A47F1026-7796-4683-9AF7-FA55B7EFDED7@ag-carto.fr>
References: <A47F1026-7796-4683-9AF7-FA55B7EFDED7@ag-carto.fr>
Message-ID: <BLU173-W338A91BE51CFC9F31C597790630@phx.gbl>

Hi R?my,

If you inserted table_name and column_name in uppercase into the user_sdo_geom_metadata it should works. You should be able to run "ogrinfo oci:user/pwd at db" and see that after the ORA-04043 error the view will be listed as a layer anyway. Try also "ogrinfo oci:user/pwd at db <view name>". And if you want to debug it you can add "--debug on" at the end of the command.

Regards,

Ivan

> From: rgourrat at ag-carto.fr
> To: gdal-dev at lists.osgeo.org
> Date: Mon, 31 Mar 2014 20:03:20 +0000
> Subject: [gdal-dev] ogrinfo 1.10 with oracle view is failing
> 
> Hi,
> 
> I do an ogrinfo on oracle view.
> 
> Ogrinfo return ora-04043 object don't exist
> 
> i do the same command on the native table with success.
> 
> So i check the metadata in user_sdo_geom_metadata, it's same metadata for the view and the table.
> 
> I recompile the view to have exactly same fields, same tablespace... in the view that the table (create myview as select * from mytable)
> 
> But it's always the same issue :
> Ora-04043...
> 
> I use :
> Ogrinfo 1.10 (from Qgis 2.0.1)
> Oracle instant client 12 64bits
> Oracle database 10g2
> 
> In sqldevelopper with the same user used with ogrinfo i can :
> - describe the view
> - select
> -...
> 
> Thanks for your advice
> 
> Remy
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140331/4dd40ade/attachment.html>

From kyle at pobox.com  Mon Mar 31 13:58:09 2014
From: kyle at pobox.com (Kyle Shannon)
Date: Mon, 31 Mar 2014 14:58:09 -0600
Subject: [gdal-dev] Rasterize a shapefile as mask
In-Reply-To: <CAA1EJsU6t4CCZzaA70hEQFXYVMtto++hoqkhto4PoR3BtG4Dhw@mail.gmail.com>
References: <CAA1EJsU6t4CCZzaA70hEQFXYVMtto++hoqkhto4PoR3BtG4Dhw@mail.gmail.com>
Message-ID: <CAJ0mEz3trSntk1sctAOSxmc_59sGBgsNdVHZ6ypcL1q9qc0CcA@mail.gmail.com>

On Mon, Mar 31, 2014 at 9:19 AM, shawn gong <shawngong.gdal at gmail.com> wrote:
> Hi list,
>
> I have a RSAT-2 image and a shoreline vector (consists of 2 polygons). I
> want to generate a mask with the same # of lines and pixels as the RSAT-2
> image, and make inside polygons as 0, outside as 1.
>
> The example that I could find is UTM based, which I tried and sort of
> worked. But the mask image is not oblique as the RSAT-2 image. When I used
> the lat/lon projection, the gdal.RasterizeLayer() doesn't work. Would
> someone tell me why?
>
> thanks,
> Shawn
>
>
> UTM version that worked:
>     from osgeo import gdal, ogr, gdal_array
>
>     # Filename of input OGR file
>     vector_file = 'shoreline_utm.shp'
>
>     # Open the data source and read in the extent
>     vector_ds = ogr.Open(vector_file)
>     vector_layer = vector_ds.GetLayer()
>     #vector_srs = vector_layer.GetSpatialRef()
>     x_min, x_max, y_min, y_max = vector_layer.GetExtent()
>
>     # raster Tiff that will be created
>     new_raster = 'shoreline_utm.tif'
>
>     pixel_spacing = 9.77
>     line_spacing = 5.5
>     xsize = int((x_max - x_min) / pixel_spacing)
>     ysize = int((y_max - y_min) / line_spacing)
>
>     new_raster_ds = gdal.GetDriverByName('GTiff').Create(new_raster, xsize,
> ysize, 1, gdal.GDT_Byte)
>     new_raster_ds.SetGeoTransform((x_min, pixel_spacing, 0, y_max, 0,
> -line_spacing))
>
>     band = new_raster_ds.GetRasterBand(1)
>     band.Fill(1)
>     gdal.RasterizeLayer(new_raster_ds, [1], vector_layer, burn_values=[0])
>
>
> lat/lon version:
>     from osgeo import gdal, ogr, gdal_array
>
>     # Filename of input OGR file
>     vector_file = 'shoreline.shp'
>
>     # Open the data source and read in the extent
>     vector_ds = ogr.Open(vector_file)
>     vector_layer = vector_ds.GetLayer()
>
>     # raster Tiff that will be created
>     new_raster = 'shorelineTest.tif'
>
>     # master Tiff whose size will be copied
>     master = 'product.xml'
>     master_ds = gdal.Open(master)
>     xsize, ysize = master_ds.RasterXSize, master_ds.RasterYSize
>
>     new_raster_ds = gdal.GetDriverByName('GTiff').Create(new_raster, xsize,
> ysize, 1, gdal.GDT_Byte)
>
>     # use georeferencing from the main product.xml dataset
>     gdal_array.CopyDatasetInfo(master_ds, new_raster_ds)
>
>     band = new_raster_ds.GetRasterBand(1)
>     band.Fill(1)
>
>     gdal.RasterizeLayer(new_raster_ds, [1], vector_layer, burn_values=[0])
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

Shawn,
According to the docs, the layer has to be in the same srs as the
raster.  Are you doing this?  If it's not, you can provide a
transformer, or reproject the geometries yourself.  See:

http://gdal.org/gdal__alg_8h.html#adfe5e5d287d6c184aab03acbfa567cb1

notably the pfnTransformer arg.

-- 
Kyle

From gdal at stripfamily.net  Mon Mar 31 15:18:11 2014
From: gdal at stripfamily.net (David Strip)
Date: Mon, 31 Mar 2014 16:18:11 -0600
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
 release plans, GDAL 2.0
In-Reply-To: <201403312103.00978.even.rouault@mines-paris.org>
References: <201402132214.20518.even.rouault@mines-paris.org>	<CA+TxYvMJz5387ng5k5Ew0gm6VGJ1cfJj+bhu84=4F-wXd2hJCw@mail.gmail.com>
	<201403312103.00978.even.rouault@mines-paris.org>
Message-ID: <5339E9A3.8050501@stripfamily.net>

On 3/31/2014 1:03 PM, Even Rouault wrote:
> Hi Etienne,
>
> Thanks for your ideas.
>
>> Hi all,
>>
>> I have a few suggestions for gdal 2.0, based on my personal experience in
>> learning to use, enhance and maintain gdal/ogr code.
>>
>> - replace cpl/csl/string/xml code with a mainstream, modern cross-platform
>> toolkit such as QT, boost, etc.
> QT is certainly a dependency we wouldn't want to draw. Too big for some 
> embededded usage, and it would make GDAL to be practially bound by the LGPL.
> I guess standard C++ libraries classes, or perhaps boost, should do the job 
> for what you mention below.
+1 for the idea of moving to either well-supported toolkits or more
extensive use of the std library or features of C++11
>
>> While cpl/csl classes are robust and "do the job", they are not well
>> documented and not very intuitive for a new gdal coder. This is from my
>> personal experience, some may not agree.
>> They are also not used outside gdal, as such do not benefit from
>> enhancements as other toolkits.
> Well, at least, MapServer uses a few CPL functions : CPL minixml, 
> CPLMalloc/CPLFree, CPLReadDir, CPLFormFilename, CPLGetFilename, 
> CSLInsertString, etc..
To the extent that these remain necessary, making them a thin wrapper of
whatever standard lib/toolkit is adopted would both improve the
effective documentation, as well as make them compatible with the
library/toolkit (esp memory allocation)



From even.rouault at mines-paris.org  Mon Mar 31 15:24:09 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 1 Apr 2014 00:24:09 +0200
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
	release plans, GDAL 2.0
In-Reply-To: <5339E9A3.8050501@stripfamily.net>
References: <201402132214.20518.even.rouault@mines-paris.org>
	<201403312103.00978.even.rouault@mines-paris.org>
	<5339E9A3.8050501@stripfamily.net>
Message-ID: <201404010024.09123.even.rouault@mines-paris.org>

Le mardi 01 avril 2014 00:18:11, David Strip a ?crit :
> On 3/31/2014 1:03 PM, Even Rouault wrote:
> > Hi Etienne,
> > 
> > Thanks for your ideas.
> > 
> >> Hi all,
> >> 
> >> I have a few suggestions for gdal 2.0, based on my personal experience
> >> in learning to use, enhance and maintain gdal/ogr code.
> >> 
> >> - replace cpl/csl/string/xml code with a mainstream, modern
> >> cross-platform toolkit such as QT, boost, etc.
> > 
> > QT is certainly a dependency we wouldn't want to draw. Too big for some
> > embededded usage, and it would make GDAL to be practially bound by the
> > LGPL. I guess standard C++ libraries classes, or perhaps boost, should
> > do the job for what you mention below.
> 
> +1 for the idea of moving to either well-supported toolkits or more
> extensive use of the std library or features of C++11
> 
> >> While cpl/csl classes are robust and "do the job", they are not well
> >> documented and not very intuitive for a new gdal coder. This is from my
> >> personal experience, some may not agree.
> >> They are also not used outside gdal, as such do not benefit from
> >> enhancements as other toolkits.
> > 
> > Well, at least, MapServer uses a few CPL functions : CPL minixml,
> > CPLMalloc/CPLFree, CPLReadDir, CPLFormFilename, CPLGetFilename,
> > CSLInsertString, etc..
> 
> To the extent that these remain necessary, making them a thin wrapper of
> whatever standard lib/toolkit is adopted would both improve the
> effective documentation, as well as make them compatible with the
> library/toolkit (esp memory allocation)

Honestly, on that point, the migration cost vs the benefit does not seem 
obvious to me.

> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

