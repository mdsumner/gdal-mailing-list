From idan at miara.com  Thu Mar  1 02:20:05 2018
From: idan at miara.com (Idan Miara)
Date: Thu, 1 Mar 2018 12:20:05 +0200
Subject: [gdal-dev] QGIS3 - Save Map as Image dialog bug?
Message-ID: <CAEDrt38nMDPc7YLpFjML0iDaaeHT1=W1PA+Pf456q_O093QrFw@mail.gmail.com>

Hi,

i think there is a bug in the Save Map as Image dialog in QGIS3:

the initial values that are set when you open the dialog look OK, also the
calculate extent by layer work OK, but when I change the scale it changes
the extent to unrealistic values, and when I change the scale back to the
initial value it doesn't restore the extent value.

As there are relations between the extent, scale, resolution and image
size, I suggest there will be an option to choose which parameter is
effected when another parameter is changed.
for instance, when changing the scale, one of the following parameters
could be changed accordingly: Image size or resolution or extent. the other
parameters should be to be kept fixed.

When I tried to save a large image, I got an error that there isn't enough
memory to allocate.
Could we batch process smaller tiles in memory and stream them to disk and
this way to overcome the memory limit?

Regards,
Idan.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180301/71bc4d52/attachment.html>

From even.rouault at spatialys.com  Thu Mar  1 02:24:57 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 01 Mar 2018 11:24:57 +0100
Subject: [gdal-dev] QGIS3 - Save Map as Image dialog bug?
In-Reply-To: <CAEDrt38nMDPc7YLpFjML0iDaaeHT1=W1PA+Pf456q_O093QrFw@mail.gmail.com>
References: <CAEDrt38nMDPc7YLpFjML0iDaaeHT1=W1PA+Pf456q_O093QrFw@mail.gmail.com>
Message-ID: <2028695.P03vEnorzq@even-i700>

Idan,

this should rather be reported to the QGIS bug tracker. Sounds more like an issue how it uses 
GDAL rather than a bug in GDAL itself.

Even

> Hi,
> 
> i think there is a bug in the Save Map as Image dialog in QGIS3:
> 
> the initial values that are set when you open the dialog look OK, also the
> calculate extent by layer work OK, but when I change the scale it changes
> the extent to unrealistic values, and when I change the scale back to the
> initial value it doesn't restore the extent value.
> 
> As there are relations between the extent, scale, resolution and image
> size, I suggest there will be an option to choose which parameter is
> effected when another parameter is changed.
> for instance, when changing the scale, one of the following parameters
> could be changed accordingly: Image size or resolution or extent. the other
> parameters should be to be kept fixed.
> 
> When I tried to save a large image, I got an error that there isn't enough
> memory to allocate.
> Could we batch process smaller tiles in memory and stream them to disk and
> this way to overcome the memory limit?
> 
Regards,> Idan.


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180301/77b91d9c/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Mar  1 02:27:54 2018
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 1 Mar 2018 03:27:54 -0700 (MST)
Subject: [gdal-dev] QGIS3 - Save Map as Image dialog bug?
In-Reply-To: <CAEDrt38nMDPc7YLpFjML0iDaaeHT1=W1PA+Pf456q_O093QrFw@mail.gmail.com>
References: <CAEDrt38nMDPc7YLpFjML0iDaaeHT1=W1PA+Pf456q_O093QrFw@mail.gmail.com>
Message-ID: <1519900074026-0.post@n6.nabble.com>

Idan Miara wrote
> Hi,
> 
> i think there is a bug in the Save Map as Image dialog in QGIS3:

Did you intentially write to GDAL-devel list? I believe that
QGIS-users/developers would be a better choice. 

-Jukka Rahkonen-



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From idan at miara.com  Thu Mar  1 02:34:19 2018
From: idan at miara.com (Idan Miara)
Date: Thu, 1 Mar 2018 12:34:19 +0200
Subject: [gdal-dev] QGIS3 - Save Map as Image dialog bug?
In-Reply-To: <1519900074026-0.post@n6.nabble.com>
References: <CAEDrt38nMDPc7YLpFjML0iDaaeHT1=W1PA+Pf456q_O093QrFw@mail.gmail.com>
 <1519900074026-0.post@n6.nabble.com>
Message-ID: <CAEDrt3-OHva-HjShyEZebi4w5h5RZDL5Dcfo_MVAdvfRf0dTSg@mail.gmail.com>

Yes it did sent it intentionally to this list, but I was wandering if it's
more a developer-list or a user-list question.
Did you mean that I should have better post it on both lists or that there
is a combined list?


On 1 March 2018 at 12:27, jratike80 <jukka.rahkonen at maanmittauslaitos.fi>
wrote:

> Idan Miara wrote
> > Hi,
> >
> > i think there is a bug in the Save Map as Image dialog in QGIS3:
>
> Did you intentially write to GDAL-devel list? I believe that
> QGIS-users/developers would be a better choice.
>
> -Jukka Rahkonen-
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180301/db176d23/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Mar  1 02:42:18 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Thu, 1 Mar 2018 10:42:18 +0000
Subject: [gdal-dev] QGIS3 - Save Map as Image dialog bug?
Message-ID: <a5637427a0004f08b0c47c8d852f27bb@C119S212VM042.msvyvi.vaha.local>

Hi,

Do not cross post. If you are rather sure that you have found a bug, as I feel in your case, I suggest to write to the developers list. If there is a chance that you perhaps did something wrong it is good to write to the users list. There are more people there than in the developers list, some user may know the answer for  you, your problem may teach something for other users, and in the ideal world the developers are also reading the users mails.

-Jukka Rahkonen-
Lähettäjä: Idan Miara [mailto:idan at miara.com]
Lähetetty: 1. maaliskuuta 2018 12:34
Vastaanottaja: Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi>
Kopio: gdal-dev at lists.osgeo.org
Aihe: Re: [gdal-dev] QGIS3 - Save Map as Image dialog bug?

Yes it did sent it intentionally to this list, but I was wandering if it's more a developer-list or a user-list question.
Did you mean that I should have better post it on both lists or that there is a combined list?


On 1 March 2018 at 12:27, jratike80 <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
Idan Miara wrote
> Hi,
>
> i think there is a bug in the Save Map as Image dialog in QGIS3:

Did you intentially write to GDAL-devel list? I believe that
QGIS-users/developers would be a better choice.

-Jukka Rahkonen-



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180301/dcce0722/attachment-0001.html>

From Christophe.LAVOYE at akka.eu  Thu Mar  1 07:23:28 2018
From: Christophe.LAVOYE at akka.eu (LAVOYE Christophe)
Date: Thu, 1 Mar 2018 15:23:28 +0000
Subject: [gdal-dev] [help][gdalwarp]Use of gdalwarp with data overlapping
	antimeridian
Message-ID: <6e4ba254e74c4feb9975040ae1285247@EXCH-MSG-11.akka.eu>

Hello,

I'm using GDAL library in a C# project.

To reproject some geotiff files i'm calling gdalwarp tool as external process with this command:

gdalwarp.exe -s_srs EPSG:4326 -t_srs EPSG:3857 -dstalpha input.tiff output.tiff



All works fine except for data overlapping antimeridian such as the associated tiff file.

I don't find how fix my problem or if I'm using the correct tool for those kind of data.


Best regards,


[cid:image003.png at 01D1FD34.3B7C8CC0]

Christophe LAVOYE - Analyste
AKKA Technologies Informatique & Systèmes
7 boulevard Henri Ziegler - 31700 BLAGNAC
Tél : +33 (0)5 36 25 15 40
Email : christophe.lavoye at akka.eu<mailto:christophe.lavoye at akka.eu>



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180301/670df269/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 11648 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180301/670df269/attachment.png>

From even.rouault at spatialys.com  Thu Mar  1 10:06:23 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 01 Mar 2018 19:06:23 +0100
Subject: [gdal-dev] OGDI 3.2.1 is released
Message-ID: <49056114.K6d1i6A6zf@even-i700>

Hi,

OGDI 3.2.1 is released. Sourceforge CVS is no longer supported so development has now 
migrated to https://github.com/libogdi/ogdi

And ogdi.sourceforget.net seems to be dead right now, so just grab
https://github.com/libogdi/ogdi/archive/ogdi_3_2_1.tar.gz

3.2.1 news
=====

 o  MSVC 2015 related fixes

 o  Win64 target

 o  VRF: fixes for some linear features in DNC products

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180301/43a07778/attachment-0001.html>

From schwehr at gmail.com  Thu Mar  1 11:56:47 2018
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 1 Mar 2018 11:56:47 -0800
Subject: [gdal-dev] PROJ 5.0.0
Message-ID: <CACmBxyu4mUcJFNMHd-MyC_VpHTTyqQSkfSjmLCNjx7Leis1aXQ@mail.gmail.com>

Anyone taken a look at PROJ since Sept?  I've tried a little bit to get it
working for me, but I get memory leaks.

Took a bit of a look here:
https://kbevers.github.io/development/migration.html

My feeble attempt is here:
https://gist.github.com/schwehr/94f4501206363cf83362a2eac2898f7b

I was building staticly on debian testing and the leak sanitizer was very
unhappy with

https://github.com/schwehr/gdal-autotest2/blob/master/cpp/ogr/ogr_srs_proj4_test.cc

Direct leak of 648 byte(s) in 1 object(s) allocated from:
    #0 0x55cc91c17533 in malloc
third_party/llvm/llvm/projects/compiler-rt/lib/asan/asan_malloc_linux.cc:88:3
    #1 0x7fe2ea999ac1 in pj_malloc
third_party/proj4/proj/src/pj_malloc.c:78:17
    #2 0x7fe2ea999b35 in pj_calloc
third_party/proj4/proj/src/pj_malloc.c:93:17
    #3 0x7fe2ea9a4c3d in pj_utm
third_party/proj4/proj/src/proj_etmerc.c:395:5
    #4 0x7fe2ea993bb3 in pj_init_ctx
third_party/proj4/proj/src/pj_init.c:521:11
    #5 0x7fe2ea993382 in pj_init_plus_ctx
third_party/proj4/proj/src/pj_init.c:412:14
    #6 0x7fe2ec7b7a26 in OCTProj4NormalizeInternal(char const*)
third_party/gdal/ogr/ogrct.cpp:328:22
    #7 0x7fe2ec7b7824 in OCTProj4Normalize
third_party/gdal/ogr/ogrct.cpp:357:16
    #8 0x7fe2ec793a5e in OGRSpatialReference::importFromProj4(char const*)
third_party/gdal/ogr/ogr_srs_proj4.cpp:512:27

followed by a pile of indirect leaks with pretty much the same call stack
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180301/d0816ca2/attachment.html>

From mj10777 at googlemail.com  Fri Mar  2 22:36:46 2018
From: mj10777 at googlemail.com (Mark Johnson)
Date: Sat, 3 Mar 2018 07:36:46 +0100
Subject: [gdal-dev] Questions / clarification about 'FDO Geometry Format'
 and creation of GeoPackage Vectors
Message-ID: <CAEEbjBj3wFo+JYaNAtu78jF4aanvf1tP7ptbp+pkJ2sEu=rsAg@mail.gmail.com>

'FDO Geometry Format':
Am I reading the code correctly that 'FDO', at least in the case of a
Sqlite-Container, is read only?

GeoPackage-Vector creation with ogr2ogr:

That it not possible to retain the original Geometry-Column Name, but
either 'geom' of the value given with '-lco GEOMETRY_NAME=geometry_name'
for all geometries.

 That a subset of specific Tables is not possible, but only all Tables.
If it is possible (through the usage of 'sql='), could a pratical sample be
added to:
 http://www.gdal.org/drv_geopackage.html


Mark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180303/8a177871/attachment.html>

From mj10777 at googlemail.com  Fri Mar  2 23:01:33 2018
From: mj10777 at googlemail.com (Mark Johnson)
Date: Sat, 3 Mar 2018 08:01:33 +0100
Subject: [gdal-dev] Link faulty in FDORfc16 page
Message-ID: <CAEEbjBhSxmqfa1LU-ewmdRL+veVBWJwH09_tq4ANm6C0=VG8RA@mail.gmail.com>

(not sure if here is the right place for this)

The 'FDO Binary Geometry Format' link:

http://fdo.osgeo.org/files/fdo/docs/FDG_FDODevGuide/files/WSfacf1429558a55de8821c21057fbebc2b-789.htm

on page
https://trac.osgeo.org/fdo/wiki/FDORfc16

is no longer valid.

Resulting in:

Forbidden

You don't have permission to access
/files/fdo/docs/FDG_FDODevGuide/files/WSfacf1429558a55de8821c21057fbebc2b-789.htm
on this server.

Mark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180303/0b85f3a2/attachment.html>

From even.rouault at spatialys.com  Sat Mar  3 04:09:53 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 03 Mar 2018 13:09:53 +0100
Subject: [gdal-dev] Questions / clarification about 'FDO Geometry
	Format' and creation of GeoPackage Vectors
In-Reply-To: <CAEEbjBj3wFo+JYaNAtu78jF4aanvf1tP7ptbp+pkJ2sEu=rsAg@mail.gmail.com>
References: <CAEEbjBj3wFo+JYaNAtu78jF4aanvf1tP7ptbp+pkJ2sEu=rsAg@mail.gmail.com>
Message-ID: <3779775.hfSIlKMvUx@even-i700>

Mark,

> 'FDO Geometry Format':
> Am I reading the code correctly that 'FDO', at least in the case of a
> Sqlite-Container, is read only?

Yes. Legacy format. Not sure anyone actually uses this nowadays.

> 
> GeoPackage-Vector creation with ogr2ogr:
> 
> That it not possible to retain the original Geometry-Column Name, but
> either 'geom' of the value given with '-lco GEOMETRY_NAME=geometry_name'
> for all geometries.

I've just fixed it in trunk

> 
>  That a subset of specific Tables is not possible, but only all Tables.
> If it is possible (through the usage of 'sql='), could a pratical sample be
> added to:

It is possible to specify multiple source layer names. This is a generic ogr2ogr capability:

ogr2ogr out.gpkg in_src table_name1 table_name2

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180303/50a8b62c/attachment.html>

From even.rouault at spatialys.com  Sat Mar  3 04:09:56 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 03 Mar 2018 13:09:56 +0100
Subject: [gdal-dev] Link faulty in FDORfc16 page
In-Reply-To: <CAEEbjBhSxmqfa1LU-ewmdRL+veVBWJwH09_tq4ANm6C0=VG8RA@mail.gmail.com>
References: <CAEEbjBhSxmqfa1LU-ewmdRL+veVBWJwH09_tq4ANm6C0=VG8RA@mail.gmail.com>
Message-ID: <38993588.8Ibd99ZCyh@even-i700>

On samedi 3 mars 2018 08:01:33 CET Mark Johnson wrote:
> (not sure if here is the right place for this)

Perhaps for the
https://lists.osgeo.org/mailman/listinfo/fdo-internals
list
(there are many others fdo related list, but that one is at least active 
recently)



-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180303/3ff85813/attachment.html>

From eh0907-osgeo at 42net.de  Tue Mar  6 12:11:55 2018
From: eh0907-osgeo at 42net.de (Erik Heinz)
Date: Tue, 6 Mar 2018 21:11:55 +0100
Subject: [gdal-dev] Problem reading JP2
Message-ID: <20180306201155.GA30971@morgoth.42net.de>

Hi everyone,

recently I downloaded a free 1:1000000 map of France from
http://professionnels.ign.fr/. The map comes in tiles supposed to be in 
JPEG 2000 Part 1 format. "file" utility says "JPEG 2000 Part 1 (JP2)" and 
the file name ending is .jp2.

My GDAL (version 2.2.3) was compiled against a patched Jasper library
(jasper-1.900.1.uuid) and pretends to be able to read .jp2.

When I try gdalinfo on one of this tiles, however, it says:

  terminate called after throwing an instance of 'std::length_error'
    what():  basic_string::_S_create
  Aborted

Is this a known issue? Is there a solution?

I could provide sample files per E-mail on request. Public distribution is
probably not allowed - my knowledge of French is too limited to be sure
about that.

Thanks in advance, and best regards,
Erik


From even.rouault at spatialys.com  Tue Mar  6 12:29:39 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 06 Mar 2018 21:29:39 +0100
Subject: [gdal-dev] Problem reading JP2
In-Reply-To: <20180306201155.GA30971@morgoth.42net.de>
References: <20180306201155.GA30971@morgoth.42net.de>
Message-ID: <1557323.k1d0yHVo7f@even-i700>

Erik,

> 
> recently I downloaded a free 1:1000000 map of France from
> http://professionnels.ign.fr/. The map comes in tiles supposed to be in
> JPEG 2000 Part 1 format. "file" utility says "JPEG 2000 Part 1 (JP2)" and
> the file name ending is .jp2.
> 
> My GDAL (version 2.2.3) was compiled against a patched Jasper library
> (jasper-1.900.1.uuid) and pretends to be able to read .jp2.
> 
> When I try gdalinfo on one of this tiles, however, it says:
> 
>   terminate called after throwing an instance of 'std::length_error'
>     what():  basic_string::_S_create
>   Aborted
> 
> Is this a known issue?

Likely, Jasper can only handle images that fit entirely in RAM and has a number of limitations.

> Is there a solution?

Yes, use another Jpeg2000 driver. OpenJPEG should be able to handle such images. 
Otherwise there are the drivers based on the proprietary SDKs. See
http://gdal.org/formats_list.html

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180306/7649fb9a/attachment.html>

From mandschulz at googlemail.com  Wed Mar  7 02:50:55 2018
From: mandschulz at googlemail.com (Michael Schulz)
Date: Wed, 7 Mar 2018 11:50:55 +0100
Subject: [gdal-dev] ogr2ogr using grid shift files
Message-ID: <CA+s71-y11JXWeyMY5RSd87FudJsi7g4-a6-1b_NXeSjvZ6WH_w@mail.gmail.com>

Dear devs,

why is og2ogr using a grid shift file explicitely specified in the
proj4 string in the s_srs parameter and not when the same proj4 string is
in the system-wide proj4/epsg file?

This example gives correct projected results:

ogr2ogr -f 'ESRI Shapefile' target.shp -s_srs "+proj=tmerc +lat_0=0
+lon_0=9 +k=1 +x_0=3500000 +y_0=0 +ellps=bessel
+nadgrids=@BWTA2017.gsb,BETA2007.gsb +units=m +wktext" -t_srs "EPSG:25832"
source.shp

The proj4/epsg contains exactly the same definition for EPSG:31467, but
when used like this:

ogr2ogr -f 'ESRI Shapefile' target.shp -s_srs "EPSG:31467" -t_srs
"EPSG:25832" source.shp

the transformation is using the towgs84 parameters defined in
datum_shifts.csv...

Is this the intended behaviour?

Thanks, Michael


-- 
-----------------------------------------------------------
Michael Schulz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180307/3ea6358c/attachment.html>

From robert.coup at koordinates.com  Wed Mar  7 03:33:07 2018
From: robert.coup at koordinates.com (Robert Coup)
Date: Wed, 7 Mar 2018 11:33:07 +0000
Subject: [gdal-dev] [help][gdalwarp]Use of gdalwarp with data
	overlapping antimeridian
In-Reply-To: <6e4ba254e74c4feb9975040ae1285247@EXCH-MSG-11.akka.eu>
References: <6e4ba254e74c4feb9975040ae1285247@EXCH-MSG-11.akka.eu>
Message-ID: <CAFLLRpLgLjHK8cHONi9XRB3nOk6Td1+vEXrZLNgDEK8C_6A2Jg@mail.gmail.com>

Hi Christophe,

What do you *expect or want* to happen with your images?

Are your 4326 image coordinates in -180° to +180° range (ie. the right
longitude is < the left); or do they go past +180°?

3857 is a projected coordinate system, so doesn't have a builtin concept of
wrapping. Some clients implement.
Do you want x values >20037508.34? But they'll only display on the "right"
side of the world then (if at all).

The simplest approach is likely to be to do two warp operations, for the
left and right parts, ending up with two images — one with
left=-20037508.34 and one with right=+20037508.34

Rob :)


On 1 March 2018 at 15:23, LAVOYE Christophe <Christophe.LAVOYE at akka.eu>
wrote:

> Hello,
>
>
>
> I’m using GDAL library in a C# project.
>
>
>
> To reproject some geotiff files i’m calling gdalwarp tool as external
> process with this command:
>
>
>
> gdalwarp.exe -s_srs EPSG:4326 -t_srs EPSG:3857 -dstalpha input.tiff
> output.tiff
>
>
>
>
>
> All works fine except for data overlapping antimeridian such as the
> associated tiff file.
>
>
>
> I don’t find how fix my problem or if I’m using the correct tool for those
> kind of data.
>
>
>
>
>
> Best regards,
>
>
>
>
>
> [image: cid:image003.png at 01D1FD34.3B7C8CC0]
>
> *Christophe LAVOYE - **Analyste*
> * AKKA Technologies *Informatique & Systèmes
> 7 boulevard Henri Ziegler – 31700 BLAGNAC
> Tél : +33 (0)5 36 25 15 40 <+33%205%2036%2025%2015%2040>
> Email : christophe.lavoye at akka.eu
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 

Chief Technology Officer Koordinates

+44 759 987 3480 <+44%20759%209873480> / koordinates.com / @koordinates
<https://twitter.com/koordinates>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180307/ccb74d9f/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 11648 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180307/ccb74d9f/attachment-0001.png>

From andre+joost at nurfuerspam.de  Wed Mar  7 08:45:41 2018
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Wed, 07 Mar 2018 17:45:41 +0100
Subject: [gdal-dev] ogr2ogr using grid shift files
In-Reply-To: <CA+s71-y11JXWeyMY5RSd87FudJsi7g4-a6-1b_NXeSjvZ6WH_w@mail.gmail.com>
References: <CA+s71-y11JXWeyMY5RSd87FudJsi7g4-a6-1b_NXeSjvZ6WH_w@mail.gmail.com>
Message-ID: <p7p4uu$tlo$1@blaine.gmane.org>

Am 07.03.18 um 11:50 schrieb Michael Schulz:
> Dear devs,
>
> why is og2ogr using a grid shift file explicitely specified in the
> proj4 string in the s_srs parameter and not when the same proj4 string is
> in the system-wide proj4/epsg file?
>
> This example gives correct projected results:
>
> ogr2ogr -f 'ESRI Shapefile' target.shp -s_srs "+proj=tmerc +lat_0=0
> +lon_0=9 +k=1 +x_0=3500000 +y_0=0 +ellps=bessel
> +nadgrids=@BWTA2017.gsb,BETA2007.gsb +units=m +wktext" -t_srs "EPSG:25832"
> source.shp
>
> The proj4/epsg contains exactly the same definition for EPSG:31467, but
> when used like this:
>
> ogr2ogr -f 'ESRI Shapefile' target.shp -s_srs "EPSG:31467" -t_srs
> "EPSG:25832" source.shp
>
> the transformation is using the towgs84 parameters defined in
> datum_shifts.csv...
>
> Is this the intended behaviour?
>

Yes, this is intended. GDAL has its own CRS definition files, and does 
normally not fall back to the proj4 folder definitions.

C:\OSGeo4W64\share\gdal\datum_shift.csv is the file to look for, 
containg a definition for EPSG:4314 DHDN, which will be used for all 
DHDN based projected CRS.

So try to adjust that file.

HTH,
Andre Joost



From jukka.rahkonen at maanmittauslaitos.fi  Wed Mar  7 13:49:50 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Wed, 7 Mar 2018 21:49:50 +0000
Subject: [gdal-dev] Validate_gpkg and TEXT with length
Message-ID: <1520459391449.59372@maanmittauslaitos.fi>

Hi,

I checked some .gpkg database that is created by FME with the validate_gpkg.py script. It gives this error:

__main__.GPKGCheckException: Req 5: table stand has column standnumberextension
of unexpected type TEXT ( 2 )

Excerpt from the standard:
TEXT{(maxchar_count)}
Variable length string encoded in either UTF-8 or UTF-16, determined by PRAGMA encoding; see http://www.sqlite.org/pragma.html#pragma_encoding The optional maxchar_count defines the maximum number of characters in the string. If not specified, the length is unbounded. The count is provided for informational purposes, and applications MAY choose to truncate longer strings if encountered. When present, it is best practice for applications to adhere to the character count. Stored as SQLite TEXT

Unfortunately there is no example in the standard about how the text field with maxchar count should be created correctly and how it should appear in the PRAGMA. I wonder if the error is caused by the spaces around number 2 in
TEXT ( 2 ).

-Jukka Rahkonen-

From even.rouault at spatialys.com  Wed Mar  7 14:08:16 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 07 Mar 2018 23:08:16 +0100
Subject: [gdal-dev] Validate_gpkg and TEXT with length
In-Reply-To: <1520459391449.59372@maanmittauslaitos.fi>
References: <1520459391449.59372@maanmittauslaitos.fi>
Message-ID: <1919141.Ralkqu1BvH@even-i700>

Jukka,

> 
> I checked some .gpkg database that is created by FME with the
> validate_gpkg.py script. It gives this error:
> 
> __main__.GPKGCheckException: Req 5: table stand has column
> standnumberextension of unexpected type TEXT ( 2 )
> 
> Excerpt from the standard:
> TEXT{(maxchar_count)}
> Variable length string encoded in either UTF-8 or UTF-16, determined by
> PRAGMA encoding; see http://www.sqlite.org/pragma.html#pragma_encoding The
> optional maxchar_count defines the maximum number of characters in the
> string. If not specified, the length is unbounded. The count is provided
> for informational purposes, and applications MAY choose to truncate longer
> strings if encountered. When present, it is best practice for applications
> to adhere to the character count. Stored as SQLite TEXT
> 
> Unfortunately there is no example in the standard about how the text field
> with maxchar count should be created correctly and how it should appear in
> the PRAGMA. I wonder if the error is caused by the spaces around number 2
> in TEXT ( 2 ).

Yes this is due to spaces.

My understanding of the specification text, confirmed by the official test suite in
https://github.com/opengeospatial/ets-gpkg12/blob/02ba0439a4d060c6cb036caa5d8225e18241e8e6/src/main/java/org/opengis/cite/gpkg12/core/DataContentsTests.java#L266
is that spaces are not allowed, so this should be TEXT(2)

The OGR driver will just recognize TEXT (2) as TEXT.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180307/827b7dcb/attachment.html>

From even.rouault at spatialys.com  Wed Mar  7 14:13:09 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 07 Mar 2018 23:13:09 +0100
Subject: [gdal-dev] ogr2ogr using grid shift files
In-Reply-To: <p7p4uu$tlo$1@blaine.gmane.org>
References: <CA+s71-y11JXWeyMY5RSd87FudJsi7g4-a6-1b_NXeSjvZ6WH_w@mail.gmail.com>
 <p7p4uu$tlo$1@blaine.gmane.org>
Message-ID: <1549621.QdkeFMPk79@even-i700>

On mercredi 7 mars 2018 17:45:41 CET Andre Joost wrote:
> Am 07.03.18 um 11:50 schrieb Michael Schulz:
> > Dear devs,
> > 
> > why is og2ogr using a grid shift file explicitely specified in the
> > proj4 string in the s_srs parameter and not when the same proj4 string is
> > in the system-wide proj4/epsg file?
> > 
> > This example gives correct projected results:
> > 
> > ogr2ogr -f 'ESRI Shapefile' target.shp -s_srs "+proj=tmerc +lat_0=0
> > +lon_0=9 +k=1 +x_0=3500000 +y_0=0 +ellps=bessel
> > +nadgrids=@BWTA2017.gsb,BETA2007.gsb +units=m +wktext" -t_srs "EPSG:25832"
> > source.shp
> > 
> > The proj4/epsg contains exactly the same definition for EPSG:31467, but
> > when used like this:
> > 
> > ogr2ogr -f 'ESRI Shapefile' target.shp -s_srs "EPSG:31467" -t_srs
> > "EPSG:25832" source.shp
> > 
> > the transformation is using the towgs84 parameters defined in
> > datum_shifts.csv...
> > 
> > Is this the intended behaviour?
> 
> Yes, this is intended. GDAL has its own CRS definition files, and does
> normally not fall back to the proj4 folder definitions.
> 
> C:\OSGeo4W64\share\gdal\datum_shift.csv is the file to look for,
> containg a definition for EPSG:4314 DHDN, which will be used for all
> DHDN based projected CRS.

Right, if you use "EPSG:XXXXX" as SRS name, GDAL will build the proj4 string from its various 
csv files in its data directory
If you want to use the definition from the proj.4 epsg file, use "+init=epsg:XXXXX" (on Unix, 
make sure to put 'epsg' in lowercase there, as this is the filename, so case sensitive)

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180307/8047f35d/attachment.html>

From mandschulz at googlemail.com  Wed Mar  7 23:39:11 2018
From: mandschulz at googlemail.com (Michael Schulz)
Date: Thu, 8 Mar 2018 08:39:11 +0100
Subject: [gdal-dev] ogr2ogr using grid shift files
In-Reply-To: <1549621.QdkeFMPk79@even-i700>
References: <CA+s71-y11JXWeyMY5RSd87FudJsi7g4-a6-1b_NXeSjvZ6WH_w@mail.gmail.com>
 <p7p4uu$tlo$1@blaine.gmane.org> <1549621.QdkeFMPk79@even-i700>
Message-ID: <CA+s71-y0C6Hub2eqdo1wCg1YQ41uVO_H5nobGYGhwQA=_h1L8Q@mail.gmail.com>

Hi Andre and Even,

thanks a lot for this clarification. Especially the last hint from Even
solved my issue, although widely using this syntax, I wasn't aware of the
subtle difference it makes.

Cheers and thanks, Michael

2018-03-07 23:13 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:

> On mercredi 7 mars 2018 17:45:41 CET Andre Joost wrote:
>
> > Am 07.03.18 um 11:50 schrieb Michael Schulz:
>
> > > Dear devs,
>
> > >
>
> > > why is og2ogr using a grid shift file explicitely specified in the
>
> > > proj4 string in the s_srs parameter and not when the same proj4 string
> is
>
> > > in the system-wide proj4/epsg file?
>
> > >
>
> > > This example gives correct projected results:
>
> > >
>
> > > ogr2ogr -f 'ESRI Shapefile' target.shp -s_srs "+proj=tmerc +lat_0=0
>
> > > +lon_0=9 +k=1 +x_0=3500000 +y_0=0 +ellps=bessel
>
> > > +nadgrids=@BWTA2017.gsb,BETA2007.gsb +units=m +wktext" -t_srs
> "EPSG:25832"
>
> > > source.shp
>
> > >
>
> > > The proj4/epsg contains exactly the same definition for EPSG:31467, but
>
> > > when used like this:
>
> > >
>
> > > ogr2ogr -f 'ESRI Shapefile' target.shp -s_srs "EPSG:31467" -t_srs
>
> > > "EPSG:25832" source.shp
>
> > >
>
> > > the transformation is using the towgs84 parameters defined in
>
> > > datum_shifts.csv...
>
> > >
>
> > > Is this the intended behaviour?
>
> >
>
> > Yes, this is intended. GDAL has its own CRS definition files, and does
>
> > normally not fall back to the proj4 folder definitions.
>
> >
>
> > C:\OSGeo4W64\share\gdal\datum_shift.csv is the file to look for,
>
> > containg a definition for EPSG:4314 DHDN, which will be used for all
>
> > DHDN based projected CRS.
>
>
>
> Right, if you use "EPSG:XXXXX" as SRS name, GDAL will build the proj4
> string from its various csv files in its data directory
>
> If you want to use the definition from the proj.4 epsg file, use
> "+init=epsg:XXXXX" (on Unix, make sure to put 'epsg' in lowercase there, as
> this is the filename, so case sensitive)
>
>
>
> Even
>
>
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
>



-- 
-----------------------------------------------------------
Michael Schulz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180308/0cb5bc1d/attachment-0001.html>

From even.rouault at spatialys.com  Thu Mar  8 02:11:44 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 08 Mar 2018 11:11:44 +0100
Subject: [gdal-dev] GDAL 2.2.4 schedule
Message-ID: <8565341.eEYk5HlZZg@even-i700>

Hi,

Just to notify that I'll probably issue a GDAL 2.2.4 release during the OSGeo 
code sprint (March 19th-23th). If there are fixes that need to be pushed in 
the 2.2 branch, please create/update tickets in Trac.

Current list of fixes done:
https://trac.osgeo.org/gdal/query?group=status&milestone=2.2.4

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180308/77469af3/attachment.html>

From ben.elliston at anu.edu.au  Thu Mar  8 04:23:41 2018
From: ben.elliston at anu.edu.au (Ben Elliston)
Date: Thu, 8 Mar 2018 23:23:41 +1100
Subject: [gdal-dev] limiting drivers that get registered
Message-ID: <f92a6a2c-f69c-7560-ce80-eb05fd216c19@anu.edu.au>

Is it possible to limit the number of drivers compiled into GDAL (I am
guessing not)?  Alternatively, would a patch be welcome to read a
confguration file to limit which drivers are registered at initialisation?

Cheers,
Ben

From even.rouault at spatialys.com  Thu Mar  8 04:34:11 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 08 Mar 2018 13:34:11 +0100
Subject: [gdal-dev] limiting drivers that get registered
In-Reply-To: <f92a6a2c-f69c-7560-ce80-eb05fd216c19@anu.edu.au>
References: <f92a6a2c-f69c-7560-ce80-eb05fd216c19@anu.edu.au>
Message-ID: <2214125.SKHBYVkGNz@even-i700>

Ben,

> Is it possible to limit the number of drivers compiled into GDAL (I am
> guessing not)?

You have some knobs with the various ./configure or nmake.opt switch, but yes generally 
drivers that don't require external dependencies will always be compiled in.
Editing manually the makefiles can help creating a smaller GDAL build but that can be a non-
obvious task because of inter-driver dependencies.

There's also a wiki page about that
https://trac.osgeo.org/gdal/wiki/BuildingOnUnixWithMinimizedDrivers
(I can see that I created a patch for a minimal build 10 years ago. Likely doesn't apply out of 
the box :-) )


> Alternatively, would a patch be welcome to read a
> confguration file to limit which drivers are registered at initialisation?

If you use GDAL as a library from your own code (C/C++), you can also directly call the 
GDALRegister_XXXX() / OGRRegisterXXXX() functions you are interested in, instead of 
GDALAllRegister()

GDALOpenEx() also accepts a white-list of drivers to probe.

You are probably aware of the GDAL_SKIP configuration option to blacklist drivers at run-
time.

That said perhaps a GDAL_DRIVERS configuration option to whitelist could have some use.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180308/566a7f42/attachment.html>

From tobias.wendorff at tu-dortmund.de  Thu Mar  8 04:36:25 2018
From: tobias.wendorff at tu-dortmund.de (Tobias Wendorff)
Date: Thu, 8 Mar 2018 13:36:25 +0100
Subject: [gdal-dev] limiting drivers that get registered
In-Reply-To: <f92a6a2c-f69c-7560-ce80-eb05fd216c19@anu.edu.au>
References: <f92a6a2c-f69c-7560-ce80-eb05fd216c19@anu.edu.au>
Message-ID: <ACBA0F53-D686-42F8-8AD1-D0C9134821D3@tu-dortmund.de>

I have created a config for minimal raster and vector.

I can uploaded later when I am at home.

-- 
Von einem iPhone gesendet und wird daher Fehler enthalten…

Am 08.03.2018 um 13:23 schrieb Ben Elliston <ben.elliston at anu.edu.au>:

> Is it possible to limit the number of drivers compiled into GDAL (I am
> guessing not)?  Alternatively, would a patch be welcome to read a
> confguration file to limit which drivers are registered at initialisation?
> 
> Cheers,
> Ben
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From daniele.romagnoli at geo-solutions.it  Thu Mar  8 06:32:09 2018
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Thu, 8 Mar 2018 15:32:09 +0100
Subject: [gdal-dev] Troubleshooting palette management. Potential bug in
 palette for overviews?
In-Reply-To: <CAJaHrDzgmHuvq=t+wXT_tOiv3isZ1GEKAksytKOHhWDSjygtSw@mail.gmail.com>
References: <CAJaHrDzchSZ1TaFfimQBG-xCZ_POunaObKmVqejqRcomE7fUTw@mail.gmail.com>
 <3865696.ux6cRO9uH7@even-i700>
 <CAJaHrDw+S_sgQHx71-+vtT3cWcoGVj32T3kkYs=WQZZG24Rzzw@mail.gmail.com>
 <2185217.tZo4xrGmKO@even-i700>
 <e658714e-aaf8-26fd-3866-11d9f92fcc33@gmail.com>
 <CAJaHrDzgmHuvq=t+wXT_tOiv3isZ1GEKAksytKOHhWDSjygtSw@mail.gmail.com>
Message-ID: <CAJaHrDzZiPFtW=g-fWKUHYMJAkHaXr_tjKGK1-fJ8aUxoLDsQA@mail.gmail.com>

Hi Even,
I'm resurrecting this old post since I think we have (GeoServer) been hit
by that problem again (although I'm not 100% sure about that).
http://osgeo-org.1560.x6.nabble.com/Geotiff-pyramids-non-transparant-while-original-is-transparent-td5357343.html

Do you know if there is any plan to fix  https://trac.osgeo.org/gdal/
ticket/2213?

Best Regards,
Daniele




On Fri, Nov 25, 2016 at 12:14 PM, Daniele Romagnoli <
daniele.romagnoli at geo-solutions.it> wrote:

> JAI-ImageIO TIFFDecompressor does the same (Line 0888):
> https://java.net/projects/jai-imageio-core/sources/svn/
> content/trunk/src/share/classes/com/sun/media/imageio/
> plugins/tiff/TIFFDecompressor.java?rev=254
>
> (also putting an imageio-ext link for quicker reference)
> https://github.com/geosolutions-it/imageio-ext/
> blob/master/plugin/tiff/src/main/java/it/geosolutions/
> imageio/plugins/tiff/TIFFDecompressor.java#L900
>
> Note the:
> redLut[i] = (byte)((colorMap[i]*255)/65535);
> which results into using a 257 scale factor.
>
> Cheers,
> Daniele
>
>
> On Fri, Nov 25, 2016 at 11:27 AM, Ari Jolma <ari.jolma at gmail.com> wrote:
>
>> 24.11.2016, 18:01, Even Rouault kirjoitti:
>>
>>
>>
>> Could be worth fixing that if that cause issues (apparently in your use
>> case at least), but I'd be interested by information of what is the
>> standard/recommanded/best-practice-in-the-industry/etc... formulas to
>> use for the mapping between the [0,255] and [0,65535] ranges.
>>
>>
>> At least in the GTK circles it seems to be a standard practice to use the
>> 257 as the scaling factor. See for example
>>
>> http://gtk2-perl.sourceforge.net/doc/pod/Gtk2/Gdk/Color.html
>>
>> Ari
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> ==
> GeoServer Professional Services from the experts! Visit
> http://goo.gl/it488V for more information.
> ==
>
> Ing. Daniele Romagnoli
> Senior Software Engineer
>
> GeoSolutions S.A.S.
> Via di Montramito 3/A
> 55054  Massarosa (LU)
> Italy
> phone: +39 0584 962313 <+39%200584%20962313>
> fax:      +39 0584 1660272 <+39%200584%20166%200272>
>
> http://www.geo-solutions.it
> http://twitter.com/geosolutions_it
>
> -------------------------------------------------------
>
> *AVVERTENZE AI SENSI DEL D.Lgs. 196/2003*
>
> Le informazioni contenute in questo messaggio di posta elettronica e/o
> nel/i file/s allegato/i sono da considerarsi strettamente riservate. Il
> loro utilizzo è consentito esclusivamente al destinatario del messaggio,
> per le finalità indicate nel messaggio stesso. Qualora riceviate questo
> messaggio senza esserne il destinatario, Vi preghiamo cortesemente di
> darcene notizia via e-mail e di procedere alla distruzione del messaggio
> stesso, cancellandolo dal Vostro sistema. Conservare il messaggio stesso,
> divulgarlo anche in parte, distribuirlo ad altri soggetti, copiarlo, od
> utilizzarlo per finalità diverse, costituisce comportamento contrario ai
> principi dettati dal D.Lgs. 196/2003.
>
>
>
> The information in this message and/or attachments, is intended solely for
> the attention and use of the named addressee(s) and may be confidential or
> proprietary in nature or covered by the provisions of privacy act
> (Legislative Decree June, 30 2003, no.196 - Italy's New Data Protection
> Code).Any use not in accord with its purpose, any disclosure, reproduction,
> copying, distribution, or either dissemination, either whole or partial, is
> strictly forbidden except previous formal approval of the named
> addressee(s). If you are not the intended recipient, please contact
> immediately the sender by telephone, fax or e-mail and delete the
> information in this message that has been received in error. The sender
> does not give any warranty or accept liability as the content, accuracy or
> completeness of sent messages and accepts no responsibility  for changes
> made after they were sent or for other risks which arise as a result of
> e-mail transmission, viruses, etc.
>
>


-- 
Regards,
Daniele Romagnoli
==
GeoServer Professional Services from the experts! Visit http://goo.gl/it488V
for more information.
==

Ing. Daniele Romagnoli
Senior Software Engineer

GeoSolutions S.A.S.
Via di Montramito 3/A
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------
AVVERTENZE AI SENSI DEL D.Lgs. 196/2003
Le informazioni contenute in questo messaggio di posta elettronica e/o
nel/i file/s allegato/i sono da considerarsi strettamente riservate. Il
loro utilizzo è consentito esclusivamente al destinatario del messaggio,
per le finalità indicate nel messaggio stesso. Qualora riceviate questo
messaggio senza esserne il destinatario, Vi preghiamo cortesemente di
darcene notizia via e-mail e di procedere alla distruzione del messaggio
stesso, cancellandolo dal Vostro sistema. Conservare il messaggio stesso,
divulgarlo anche in parte, distribuirlo ad altri soggetti, copiarlo, od
utilizzarlo per finalità diverse, costituisce comportamento contrario ai
principi dettati dal D.Lgs. 196/2003.

The information in this message and/or attachments, is intended solely for
the attention and use of the named addressee(s) and may be confidential or
proprietary in nature or covered by the provisions of privacy act
(Legislative Decree June, 30 2003, no.196 - Italy's New Data Protection
Code).Any use not in accord with its purpose, any disclosure, reproduction,
copying, distribution, or either dissemination, either whole or partial, is
strictly forbidden except previous formal approval of the named
addressee(s). If you are not the intended recipient, please contact
immediately the sender by telephone, fax or e-mail and delete the
information in this message that has been received in error. The sender
does not give any warranty or accept liability as the content, accuracy or
completeness of sent messages and accepts no responsibility  for changes
made after they were sent or for other risks which arise as a result of
e-mail transmission, viruses, etc.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180308/4149896a/attachment-0001.html>

From robert.coup at koordinates.com  Thu Mar  8 06:40:44 2018
From: robert.coup at koordinates.com (Robert Coup)
Date: Thu, 8 Mar 2018 14:40:44 +0000
Subject: [gdal-dev] [help][gdalwarp]Use of gdalwarp with data
	overlapping antimeridian
In-Reply-To: <3c24d80d83df4f9aa898af7b7d412748@EXCH-MSG-11.akka.eu>
References: <6e4ba254e74c4feb9975040ae1285247@EXCH-MSG-11.akka.eu>
 <CAFLLRpLgLjHK8cHONi9XRB3nOk6Td1+vEXrZLNgDEK8C_6A2Jg@mail.gmail.com>
 <3c24d80d83df4f9aa898af7b7d412748@EXCH-MSG-11.akka.eu>
Message-ID: <CAFLLRp+Y8Uw7kZryyULRrCa25_pwELifSLey1KF02CtwUWZWXg@mail.gmail.com>

Hi Christophe,

Have a look at the following:

https://lists.osgeo.org/pipermail/gdal-dev/2016-January/043358.html
https://gis.stackexchange.com/questions/37790/how-to-
reproject-raster-from-0-360-to-180-180-with-cutting-180-meridian

I'd suggest building a couple of VRT files to treat your data as -180 to
+180, then project each independently to EPSG:3857.

I'm sure there used to be an example in the GDAL docs, but I can't find it
- maybe I'm imagining it :)

As I’m new on this mail list do I have to “Reply All”? or just reply to you?


Reply all is good — that way everyone can read it.

Cheers,

Rob.

On 7 March 2018 at 13:05, LAVOYE Christophe <Christophe.LAVOYE at akka.eu>
wrote:

> Hi Robert,
>
>
>
> You could find my sample in attached files.
>
>
>
> This is the gdal informations:
>
>
>
> Driver: GTiff/GeoTIFF
>
> Files: D:\TEMP\TempProjectionsV2\BASE\baseAnteMeridien.tiff
>
> Size is 900, 803
>
> Coordinate System is:
>
> GEOGCS["WGS 84",
>
>     DATUM["WGS_1984",
>
>         SPHEROID["WGS 84",6378137,298.257223563,
>
>             AUTHORITY["EPSG","7030"]],
>
>         AUTHORITY["EPSG","6326"]],
>
>     PRIMEM["Greenwich",0],
>
>     UNIT["degree",0.0174532925199433],
>
>     AUTHORITY["EPSG","4326"]]
>
> GeoTransform =
>
>   179.9362167765823, 0.001541256882521351, 1.892378333877928e-005
>
>   66.12419696670919, 9.991578318404334e-006, -0.0006775726479453831
>
> Metadata:
>
>   AREA_OR_POINT=Area
>
>   TIFFTAG_XRESOLUTION=96
>
>   TIFFTAG_YRESOLUTION=96
>
> Image Structure Metadata:
>
>   COMPRESSION=JPEG
>
>   INTERLEAVE=PIXEL
>
> Corner Coordinates:
>
> Upper Left  ( 179.9362168,  66.1241970) (179d56'10.38"E, 66d 7'27.11"N)
>
> Lower Left  ( 179.9514126,  65.5801061) (179d57' 5.09"E, 65d34'48.38"N)
>
> Upper Right (     181.323,      66.133) (181d19'24.05"E, 66d 7'59.48"N)
>
> Lower Right (     181.339,      65.589) (181d20'18.76"E, 65d35'20.75"N)
>
> Center      ( 180.6373803,  65.8566478) (180d38'14.57"E, 65d51'23.93"N)
>
> Band 1 Block=900x803 Type=Byte, ColorInterp=Red
>
> Band 2 Block=900x803 Type=Byte, ColorInterp=Green
>
> Band 3 Block=900x803 Type=Byte, ColorInterp=Blue
>
>
>
> So my question concerns data which past +180° a
>
>
>
> I made old tests where I first cut my image and then make two warp
> operations and I remember it was working. I didn’t try to re-associate then.
>
> I have to test.
>
>
>
> As I’m not an expert I want to know the best approach to enable
> reprojection on those kind of data with coordinate over +180°.
>
>
>
> As I’m new on this mail list do I have to “Reply All”? or just reply to
> you?
>
>
>
> Best regards,
>
>
>
>
>
> [image: cid:image003.png at 01D1FD34.3B7C8CC0]
>
> *Christophe LAVOYE - **Analyste*
> * AKKA Technologies *Informatique & Systèmes
> 7 boulevard Henri Ziegler – 31700 BLAGNAC
> <https://maps.google.com/?q=7+boulevard+Henri+Ziegler+%E2%80%93+31700+BLAGNAC&entry=gmail&source=g>
> Tél : +33 (0)5 36 25 15 40 <+33%205%2036%2025%2015%2040>
> Email : christophe.lavoye at akka.eu
>
>
>
>
>
> *De :* Robert Coup [mailto:robert.coup at koordinates.com]
> *Envoyé :* mercredi 7 mars 2018 12:33
> *À :* LAVOYE Christophe
> *Cc :* gdal-dev at lists.osgeo.org
> *Objet :* Re: [gdal-dev] [help][gdalwarp]Use of gdalwarp with data
> overlapping antimeridian
>
>
>
> Hi Christophe,
>
>
>
> What do you *expect or want* to happen with your images?
>
>
>
> Are your 4326 image coordinates in -180° to +180° range (ie. the right
> longitude is < the left); or do they go past +180°?
>
>
>
> 3857 is a projected coordinate system, so doesn't have a builtin concept
> of wrapping. Some clients implement.
>
> Do you want x values >20037508.34? But they'll only display on the "right"
> side of the world then (if at all).
>
>
>
> The simplest approach is likely to be to do two warp operations, for the
> left and right parts, ending up with two images — one with
> left=-20037508.34 and one with right=+20037508.34
>
>
>
> Rob :)
>
>
>
>
>
> On 1 March 2018 at 15:23, LAVOYE Christophe <Christophe.LAVOYE at akka.eu>
> wrote:
>
> Hello,
>
>
>
> I’m using GDAL library in a C# project.
>
>
>
> To reproject some geotiff files i’m calling gdalwarp tool as external
> process with this command:
>
>
>
> gdalwarp.exe -s_srs EPSG:4326 -t_srs EPSG:3857 -dstalpha input.tiff
> output.tiff
>
>
>
>
>
> All works fine except for data overlapping antimeridian such as the
> associated tiff file.
>
>
>
> I don’t find how fix my problem or if I’m using the correct tool for those
> kind of data.
>
>
>
>
>
> Best regards,
>
>
>
>
>
> [image: cid:image003.png at 01D1FD34.3B7C8CC0]
>
> *Christophe LAVOYE - **Analyste*
> * AKKA Technologies *Informatique & Systèmes
> 7 boulevard Henri Ziegler – 31700 BLAGNAC
> <https://maps.google.com/?q=7+boulevard+Henri+Ziegler+%E2%80%93+31700+BLAGNAC&entry=gmail&source=g>
> Tél : +33 (0)5 36 25 15 40 <+33%205%2036%2025%2015%2040>
> Email : christophe.lavoye at akka.eu
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>
> --
>
> Chief Technology Officer Koordinates
>
> +44 759 987 3480 <+44%20759%209873480> / koordinates.com / @koordinates
> <https://twitter.com/koordinates>
>



-- 

Chief Technology Officer Koordinates

+44 759 987 3480 <+44%20759%209873480> / koordinates.com / @koordinates
<https://twitter.com/koordinates>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180308/6fa153fe/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 11648 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180308/6fa153fe/attachment-0001.png>

From even.rouault at spatialys.com  Thu Mar  8 06:55:10 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 08 Mar 2018 15:55:10 +0100
Subject: [gdal-dev] Troubleshooting palette management. Potential bug in
	palette for overviews?
In-Reply-To: <CAJaHrDzZiPFtW=g-fWKUHYMJAkHaXr_tjKGK1-fJ8aUxoLDsQA@mail.gmail.com>
References: <CAJaHrDzchSZ1TaFfimQBG-xCZ_POunaObKmVqejqRcomE7fUTw@mail.gmail.com>
 <CAJaHrDzgmHuvq=t+wXT_tOiv3isZ1GEKAksytKOHhWDSjygtSw@mail.gmail.com>
 <CAJaHrDzZiPFtW=g-fWKUHYMJAkHaXr_tjKGK1-fJ8aUxoLDsQA@mail.gmail.com>
Message-ID: <56338774.DERRVe2rjV@even-i700>

On jeudi 8 mars 2018 15:32:09 CET Daniele Romagnoli wrote:
> Hi Even,
> I'm resurrecting this old post since I think we have (GeoServer) been hit
> by that problem again (although I'm not 100% sure about that).
> http://osgeo-org.1560.x6.nabble.com/Geotiff-pyramids-non-transparant-while-o
> riginal-is-transparent-td5357343.html
> 
> Do you know if there is any plan to fix  https://trac.osgeo.org/gdal/
> ticket/2213?

Daniele,

there was no "plan", but seing this is a 10-year long lasting issue made me sad, so I've just 
pushed a fix... As suggested in this discussion thread, I've used 257 as factor for 
multiplication/division hopefully all over the relevant places.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180308/2fd68038/attachment.html>

From daniele.romagnoli at geo-solutions.it  Thu Mar  8 07:00:16 2018
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Thu, 8 Mar 2018 16:00:16 +0100
Subject: [gdal-dev] Troubleshooting palette management. Potential bug in
 palette for overviews?
In-Reply-To: <56338774.DERRVe2rjV@even-i700>
References: <CAJaHrDzchSZ1TaFfimQBG-xCZ_POunaObKmVqejqRcomE7fUTw@mail.gmail.com>
 <CAJaHrDzgmHuvq=t+wXT_tOiv3isZ1GEKAksytKOHhWDSjygtSw@mail.gmail.com>
 <CAJaHrDzZiPFtW=g-fWKUHYMJAkHaXr_tjKGK1-fJ8aUxoLDsQA@mail.gmail.com>
 <56338774.DERRVe2rjV@even-i700>
Message-ID: <CAJaHrDxGqNr0XvnG=9M6wFfaAXLOe7J_23z-diWmgapW6U5RfA@mail.gmail.com>

You are the man!

Thanks for that.
Do you know which GDAL versions will contain the fix?

Cheers,
Daniele

On Thu, Mar 8, 2018 at 3:55 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> On jeudi 8 mars 2018 15:32:09 CET Daniele Romagnoli wrote:
>
> > Hi Even,
>
> > I'm resurrecting this old post since I think we have (GeoServer) been hit
>
> > by that problem again (although I'm not 100% sure about that).
>
> > http://osgeo-org.1560.x6.nabble.com/Geotiff-pyramids-
> non-transparant-while-o
>
> > riginal-is-transparent-td5357343.html
>
> >
>
> > Do you know if there is any plan to fix https://trac.osgeo.org/gdal/
>
> > ticket/2213?
>
>
>
> Daniele,
>
>
>
> there was no "plan", but seing this is a 10-year long lasting issue made
> me sad, so I've just pushed a fix... As suggested in this discussion
> thread, I've used 257 as factor for multiplication/division hopefully all
> over the relevant places.
>
>
>
> Even
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
>



-- 
Regards,
Daniele Romagnoli
==
GeoServer Professional Services from the experts! Visit http://goo.gl/it488V
for more information.
==

Ing. Daniele Romagnoli
Senior Software Engineer

GeoSolutions S.A.S.
Via di Montramito 3/A
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------
AVVERTENZE AI SENSI DEL D.Lgs. 196/2003
Le informazioni contenute in questo messaggio di posta elettronica e/o
nel/i file/s allegato/i sono da considerarsi strettamente riservate. Il
loro utilizzo è consentito esclusivamente al destinatario del messaggio,
per le finalità indicate nel messaggio stesso. Qualora riceviate questo
messaggio senza esserne il destinatario, Vi preghiamo cortesemente di
darcene notizia via e-mail e di procedere alla distruzione del messaggio
stesso, cancellandolo dal Vostro sistema. Conservare il messaggio stesso,
divulgarlo anche in parte, distribuirlo ad altri soggetti, copiarlo, od
utilizzarlo per finalità diverse, costituisce comportamento contrario ai
principi dettati dal D.Lgs. 196/2003.

The information in this message and/or attachments, is intended solely for
the attention and use of the named addressee(s) and may be confidential or
proprietary in nature or covered by the provisions of privacy act
(Legislative Decree June, 30 2003, no.196 - Italy's New Data Protection
Code).Any use not in accord with its purpose, any disclosure, reproduction,
copying, distribution, or either dissemination, either whole or partial, is
strictly forbidden except previous formal approval of the named
addressee(s). If you are not the intended recipient, please contact
immediately the sender by telephone, fax or e-mail and delete the
information in this message that has been received in error. The sender
does not give any warranty or accept liability as the content, accuracy or
completeness of sent messages and accepts no responsibility  for changes
made after they were sent or for other risks which arise as a result of
e-mail transmission, viruses, etc.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180308/81c706cc/attachment.html>

From even.rouault at spatialys.com  Thu Mar  8 07:07:26 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 08 Mar 2018 16:07:26 +0100
Subject: [gdal-dev] [help][gdalwarp]Use of gdalwarp with data
	overlapping antimeridian
In-Reply-To: <CAFLLRp+Y8Uw7kZryyULRrCa25_pwELifSLey1KF02CtwUWZWXg@mail.gmail.com>
References: <6e4ba254e74c4feb9975040ae1285247@EXCH-MSG-11.akka.eu>
 <3c24d80d83df4f9aa898af7b7d412748@EXCH-MSG-11.akka.eu>
 <CAFLLRp+Y8Uw7kZryyULRrCa25_pwELifSLey1KF02CtwUWZWXg@mail.gmail.com>
Message-ID: <9708036.ZouIH3RtJG@even-i700>

On jeudi 8 mars 2018 14:40:44 CET Robert Coup wrote:
> Hi Christophe,
> 
> Have a look at the following:
> 
> https://lists.osgeo.org/pipermail/gdal-dev/2016-January/043358.html
> https://gis.stackexchange.com/questions/37790/how-to-> reproject-raster-from-0-360-to-180-180-with-cutting-180-meridian
> 
> I'd suggest building a couple of VRT files to treat your data as -180 to
> +180, then project each independently to EPSG:3857.
> 
> I'm sure there used to be an example in the GDAL docs, but I can't find it
> - maybe I'm imagining it :)

Probably you remember of Frank's tutorial at
https://trac.osgeo.org/gdal/wiki/UserDocs/RasterProcTutorial
See the "Virtual files" section towards the end.

Thinking just out loud: some Python script using gdal.Warp() API to deal with antimeridian 
could be a useful contribution to the project

Like start with a raster in UTM 60 / UTM 1 crossing the antimeridian and produce 2 geotiffs in 
EPSG:4326 / EPSG:3857 with the east and west parts.
Recent ticket somewhat related :
https://trac.osgeo.org/gdal/ticket/7247

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180308/4422328a/attachment.html>

From even.rouault at spatialys.com  Thu Mar  8 07:09:20 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 08 Mar 2018 16:09:20 +0100
Subject: [gdal-dev] Troubleshooting palette management. Potential bug in
	palette for overviews?
In-Reply-To: <CAJaHrDxGqNr0XvnG=9M6wFfaAXLOe7J_23z-diWmgapW6U5RfA@mail.gmail.com>
References: <CAJaHrDzchSZ1TaFfimQBG-xCZ_POunaObKmVqejqRcomE7fUTw@mail.gmail.com>
 <56338774.DERRVe2rjV@even-i700>
 <CAJaHrDxGqNr0XvnG=9M6wFfaAXLOe7J_23z-diWmgapW6U5RfA@mail.gmail.com>
Message-ID: <3307249.Ay5q9yadcC@even-i700>

On jeudi 8 mars 2018 16:00:16 CET Daniele Romagnoli wrote:
> You are the man!
> 
> Thanks for that.
> Do you know which GDAL versions will contain the fix?

2.2.4 and 2.3.0

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180308/5119166c/attachment-0001.html>

From daniele.romagnoli at geo-solutions.it  Thu Mar  8 07:28:27 2018
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Thu, 8 Mar 2018 16:28:27 +0100
Subject: [gdal-dev] Troubleshooting palette management. Potential bug in
 palette for overviews?
In-Reply-To: <759f00de-1ef1-20e8-3f12-782e7f22a417@duif.net>
References: <CAJaHrDzchSZ1TaFfimQBG-xCZ_POunaObKmVqejqRcomE7fUTw@mail.gmail.com>
 <CAJaHrDzgmHuvq=t+wXT_tOiv3isZ1GEKAksytKOHhWDSjygtSw@mail.gmail.com>
 <CAJaHrDzZiPFtW=g-fWKUHYMJAkHaXr_tjKGK1-fJ8aUxoLDsQA@mail.gmail.com>
 <56338774.DERRVe2rjV@even-i700>
 <759f00de-1ef1-20e8-3f12-782e7f22a417@duif.net>
Message-ID: <CAJaHrDz_tSmDwrPTChSZAyA_TfFtvi0uzZatZ9w51ZYHgjB2DQ@mail.gmail.com>

Hi Richard,
when investigating on an issue very similar to the ones you have reported,
I have discovered that the problem was in the color map.
You may take a look on the details of my original report:
https://lists.osgeo.org/pipermail/gdal-dev/2016-November/045589.html.

The outcome of that problem was that the colors of the geotiff with palette
+ overviews were changing when zooming out from native to overview.
So I think it could be related since, at the end, the transparent entry is
a color itself.

Daniele








On Thu, Mar 8, 2018 at 4:17 PM, Richard 🌍 Duivenvoorde <richard at duif.net>
wrote:

> On 08-03-18 15:55, Even Rouault wrote:
> > On jeudi 8 mars 2018 15:32:09 CET Daniele Romagnoli wrote:
> >> I'm resurrecting this old post since I think we have (GeoServer) been
> hit
> >> by that problem again (although I'm not 100% sure about that).
> >
> > http://osgeo-org.1560.x6.nabble.com/Geotiff-pyramids-
> non-transparant-while-o
> >> riginal-is-transparent-td5357343.html
>
> >> Do you know if there is any plan to fix https://trac.osgeo.org/gdal/
> ticket/2213?
> >
> > there was no "plan", but seing this is a 10-year long lasting issue made
> > me sad, so I've just pushed a fix... As suggested in this discussion
> > thread, I've used 257 as factor for multiplication/division hopefully
> > all over the relevant places.
>
> Thanks Even!
>
> Looking at the patch, I understand it will fix a color map change, but
> (my) original Geoserver issue [0] was about the transparency in
> (apparently) the generated overview images.
>
> Is that relevant in this case? Or is this only about actual colors?
>
> Regards,
>
> Richard Duivenvoorde
>
> [0]
> http://osgeo-org.1560.x6.nabble.com/Geotiff-pyramids-
> non-transparant-while-original-is-transparent-td5357343.html
>



-- 
Regards,
Daniele Romagnoli
==
GeoServer Professional Services from the experts! Visit http://goo.gl/it488V
for more information.
==

Ing. Daniele Romagnoli
Senior Software Engineer

GeoSolutions S.A.S.
Via di Montramito 3/A
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------
AVVERTENZE AI SENSI DEL D.Lgs. 196/2003
Le informazioni contenute in questo messaggio di posta elettronica e/o
nel/i file/s allegato/i sono da considerarsi strettamente riservate. Il
loro utilizzo è consentito esclusivamente al destinatario del messaggio,
per le finalità indicate nel messaggio stesso. Qualora riceviate questo
messaggio senza esserne il destinatario, Vi preghiamo cortesemente di
darcene notizia via e-mail e di procedere alla distruzione del messaggio
stesso, cancellandolo dal Vostro sistema. Conservare il messaggio stesso,
divulgarlo anche in parte, distribuirlo ad altri soggetti, copiarlo, od
utilizzarlo per finalità diverse, costituisce comportamento contrario ai
principi dettati dal D.Lgs. 196/2003.

The information in this message and/or attachments, is intended solely for
the attention and use of the named addressee(s) and may be confidential or
proprietary in nature or covered by the provisions of privacy act
(Legislative Decree June, 30 2003, no.196 - Italy's New Data Protection
Code).Any use not in accord with its purpose, any disclosure, reproduction,
copying, distribution, or either dissemination, either whole or partial, is
strictly forbidden except previous formal approval of the named
addressee(s). If you are not the intended recipient, please contact
immediately the sender by telephone, fax or e-mail and delete the
information in this message that has been received in error. The sender
does not give any warranty or accept liability as the content, accuracy or
completeness of sent messages and accepts no responsibility  for changes
made after they were sent or for other risks which arise as a result of
e-mail transmission, viruses, etc.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180308/6972389f/attachment.html>

From schwehr at gmail.com  Thu Mar  8 08:47:43 2018
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 8 Mar 2018 08:47:43 -0800
Subject: [gdal-dev] limiting drivers that get registered
In-Reply-To: <ACBA0F53-D686-42F8-8AD1-D0C9134821D3@tu-dortmund.de>
References: <f92a6a2c-f69c-7560-ce80-eb05fd216c19@anu.edu.au>
 <ACBA0F53-D686-42F8-8AD1-D0C9134821D3@tu-dortmund.de>
Message-ID: <CACmBxyt3OKDe8tDsXwd7=9Os6AE9uige3aNKOJ2nDo-xxz==Tg@mail.gmail.com>

I get a little more aggressive compared to what others suggested by
commenting out register calls in gdalallregister.cpp and ogrregisterall.cpp
and removing the code for the drivers.

There are gotchyas lurking, but it definitely works.

e.g.
Enable HDF5, but block BAG
Enable EHDR & ENVI, but leave out the rest of the raw drivers

On Thu, Mar 8, 2018 at 4:36 AM, Tobias Wendorff <
tobias.wendorff at tu-dortmund.de> wrote:

> I have created a config for minimal raster and vector.
>
> I can uploaded later when I am at home.
>
> --
> Von einem iPhone gesendet und wird daher Fehler enthalten…
>
> Am 08.03.2018 um 13:23 schrieb Ben Elliston <ben.elliston at anu.edu.au>:
>
> > Is it possible to limit the number of drivers compiled into GDAL (I am
> > guessing not)?  Alternatively, would a patch be welcome to read a
> > confguration file to limit which drivers are registered at
> initialisation?
> >
> > Cheers,
> > Ben
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180308/ae2ae909/attachment.html>

From tobias.wendorff at tu-dortmund.de  Thu Mar  8 09:21:37 2018
From: tobias.wendorff at tu-dortmund.de (Tobias Wendorff)
Date: Thu, 8 Mar 2018 18:21:37 +0100
Subject: [gdal-dev] limiting drivers that get registered
In-Reply-To: <CACmBxyt3OKDe8tDsXwd7=9Os6AE9uige3aNKOJ2nDo-xxz==Tg@mail.gmail.com>
References: <f92a6a2c-f69c-7560-ce80-eb05fd216c19@anu.edu.au>
 <ACBA0F53-D686-42F8-8AD1-D0C9134821D3@tu-dortmund.de>
 <CACmBxyt3OKDe8tDsXwd7=9Os6AE9uige3aNKOJ2nDo-xxz==Tg@mail.gmail.com>
Message-ID: <6347a2c82d612dab5e9663c171b80edd.squirrel@webmail.tu-dortmund.de>

Am Do, 8.03.2018, 17:47 schrieb Kurt Schwehr:
> I get a little more aggressive compared to what others suggested by
> commenting out register calls in gdalallregister.cpp and
> ogrregisterall.cpp
> and removing the code for the drivers.
>

Share, share, share :)


From schwehr at gmail.com  Thu Mar  8 10:57:11 2018
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 8 Mar 2018 10:57:11 -0800
Subject: [gdal-dev] limiting drivers that get registered
In-Reply-To: <6347a2c82d612dab5e9663c171b80edd.squirrel@webmail.tu-dortmund.de>
References: <f92a6a2c-f69c-7560-ce80-eb05fd216c19@anu.edu.au>
 <ACBA0F53-D686-42F8-8AD1-D0C9134821D3@tu-dortmund.de>
 <CACmBxyt3OKDe8tDsXwd7=9Os6AE9uige3aNKOJ2nDo-xxz==Tg@mail.gmail.com>
 <6347a2c82d612dab5e9663c171b80edd.squirrel@webmail.tu-dortmund.de>
Message-ID: <CACmBxyv2tSqXvCieKGf96J6wT177bbqjMOt+8PgT7sjb6z7hbQ@mail.gmail.com>

I use bazel for building, so the build info isn't useful.  You'll have to
hack the makefiles a bit.

I also tried to stop things from registering...
find . -name \*.cpp | egrep -v
'autotest|swig|apps|fuzzers|gdaldrivermanager.cpp|ogrregisterall.cpp|gdalallregister.cpp'
| xargs egrep 'Register[(][)];|OGRRegisterAll|GDALRegister' | egrep -v
'void|: +[*]|:/'


Here are my two diffs:  (note that I don't define FRMT_raw in my builds)

diff -u a/gdalallregister.cpp  b/gdalallregister.cpp
--- a/gdalallregister.cpp 2018-03-08 10:40:24.342388944 -0800
+++ b/gdalallregister.cpp 2017-12-28 10:13:13.000000000 -0800
@@ -67,7 +67,8 @@

 #ifdef FRMT_vrt
     GDALRegister_VRT();
-    GDALRegister_Derived();
+    // GDALRegister_Derived();
 #endif

 #ifdef FRMT_gtiff
@@ -220,7 +221,8 @@
 #endif

 #ifdef FRMT_netcdf
-    GDALRegister_GMT();
+    // GDALRegister_GMT();
     GDALRegister_netCDF();
 #endif

@@ -406,6 +408,11 @@
 /*      ASCII-header in the same directory.                             */
 /* -------------------------------------------------------------------- */

+    GDALRegister_EHdr();
+    GDALRegister_ENVI();
+
 #ifdef FRMT_raw
     GDALRegister_PNM();
     GDALRegister_DOQ1();
@@ -476,7 +483,8 @@
 #endif

 #ifdef FRMT_hdf5
-    GDALRegister_BAG();
+    // GDALRegister_BAG();
     GDALRegister_HDF5();
     GDALRegister_HDF5Image();
 #endif

diff -u a/ogrregisterall.cpp b/ogrregisterall.cpp
--- a/ogrregisterall.cpp 2018-03-08 10:54:56.775492742 -0800
+++ b/ogrregisterall.cpp 2018-03-08 10:54:27.643856370 -0800
@@ -106,7 +106,7 @@
     RegisterOGRGMT();
 #endif
 #ifdef SQLITE_ENABLED
-    RegisterOGRGeoPackage();
+    // RegisterOGRGeoPackage();
     RegisterOGRSQLite();
 #endif
 #ifdef DODS_ENABLED


On Thu, Mar 8, 2018 at 9:21 AM, Tobias Wendorff <
tobias.wendorff at tu-dortmund.de> wrote:

> Am Do, 8.03.2018, 17:47 schrieb Kurt Schwehr:
> > I get a little more aggressive compared to what others suggested by
> > commenting out register calls in gdalallregister.cpp and
> > ogrregisterall.cpp
> > and removing the code for the drivers.
> >
>
> Share, share, share :)
>
>


-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180308/e1d0f644/attachment-0001.html>

From bradh at frogmouth.net  Thu Mar  8 15:43:22 2018
From: bradh at frogmouth.net (bradh at frogmouth.net)
Date: Fri, 9 Mar 2018 10:43:22 +1100
Subject: [gdal-dev] limiting drivers that get registered
In-Reply-To: <f92a6a2c-f69c-7560-ce80-eb05fd216c19@anu.edu.au>
References: <f92a6a2c-f69c-7560-ce80-eb05fd216c19@anu.edu.au>
Message-ID: <02e801d3b737$3f1dd3c0$bd597b40$@frogmouth.net>

I think you should feel free to make general improvements to the autotools setup 😊

Brad

-----Original Message-----
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Ben Elliston
Sent: Thursday, 8 March 2018 11:24 PM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] limiting drivers that get registered

Is it possible to limit the number of drivers compiled into GDAL (I am guessing not)?  Alternatively, would a patch be welcome to read a confguration file to limit which drivers are registered at initialisation?

Cheers,
Ben
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev


From ben.elliston at anu.edu.au  Thu Mar  8 16:17:27 2018
From: ben.elliston at anu.edu.au (Ben Elliston)
Date: Fri, 9 Mar 2018 11:17:27 +1100
Subject: [gdal-dev] limiting drivers that get registered
In-Reply-To: <02e801d3b737$3f1dd3c0$bd597b40$@frogmouth.net>
References: <f92a6a2c-f69c-7560-ce80-eb05fd216c19@anu.edu.au>
 <02e801d3b737$3f1dd3c0$bd597b40$@frogmouth.net>
Message-ID: <804c897e-077f-15fd-e07e-88eaa6b248df@anu.edu.au>

On 09/03/18 10:43, bradh at frogmouth.net wrote:

> I think you should feel free to make general improvements to the autotools setup 😊

Is this my past coming back to haunt me? :-)

Ben

From ari.jolma at gmail.com  Sat Mar 10 02:00:00 2018
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sat, 10 Mar 2018 12:00:00 +0200
Subject: [gdal-dev] Wondering gdal_grid moving average interpolation
Message-ID: <9e22a2d0-2082-d138-f101-26b274990d43@gmail.com>

I'm translating things on QGIS and now looking at GDAL tool rasterizing 
point data set with moving average interpolation.

That's making a call to gdal_grid with -a average.

I've got the attached result from a point set (circles with red border 
and inside inverse grayscale with interpolated value). The call was

gdal_grid -l INPUT -zfield suuntap -a 
average:radius1=8000.0:radius2=8000.0:angle=0.0:min_points=0:nodata=0.0 
-ot Float32 -of GTiff INPUT.shp OUTPUT.tif

I'm wondering is that the expected since it looks like the raster cell 
value is determined by point locations. I would have expected a much 
more smooth surface without any obvious circular shapes. To me it looks 
like the computation was not done cell by cell but instead point by point.

What am I missing or misunderstanding?

Ari

ps: This tool is in group 'Raster analysis'. In my opinion it should be 
in a group 'Point data tools' or something.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: ma.jpg
Type: image/jpeg
Size: 22617 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180310/b10cad99/attachment-0001.jpg>

From a.hagen-zanker at surrey.ac.uk  Sat Mar 10 03:26:35 2018
From: a.hagen-zanker at surrey.ac.uk (a.hagen-zanker at surrey.ac.uk)
Date: Sat, 10 Mar 2018 11:26:35 +0000
Subject: [gdal-dev] Fwd: Re: Wondering gdal_grid moving average interpolation
In-Reply-To: <DB5PR0601MB1926FFB536CFC7938DC4E61AF2DD0@DB5PR0601MB1926.eurprd06.prod.outlook.com>
References: <9e22a2d0-2082-d138-f101-26b274990d43@gmail.com>,
 <DB5PR0601MB1926FFB536CFC7938DC4E61AF2DD0@DB5PR0601MB1926.eurprd06.prod.outlook.com>
Message-ID: <DB5PR0601MB1926EBD6BC0F695863229939F2DD0@DB5PR0601MB1926.eurprd06.prod.outlook.com>




Hi Ari,

Interesting result. It looks roughly right: pixels with only dark points in their surrounding window are dark and pixels with only light point in the window are light.

However, it does seem that the legend used for pixels uses different interval values than that for the pixels. Otherwise it would be hard to explain why pixels that have only a single point in their window do not have the same color as that point.

The second thing that is concerning is the ragged edge of the apparent circles. It suggests that the distance calculation is not accurate. It shouldn't be more than a pixel off.

You will always have these awkward edge effects in moving window analysis. However it can be reduced by 1) using a window radius considerably larger than the distance between points. 2) use a distance weighted kernel (my weapon of choice).

Kind regards, Alex
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Ari Jolma <ari.jolma at gmail.com>
Sent: Saturday, March 10, 2018 10:00:00 AM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Wondering gdal_grid moving average interpolation

I'm translating things on QGIS and now looking at GDAL tool rasterizing
point data set with moving average interpolation.

That's making a call to gdal_grid with -a average.

I've got the attached result from a point set (circles with red border
and inside inverse grayscale with interpolated value). The call was

gdal_grid -l INPUT -zfield suuntap -a
average:radius1=8000.0:radius2=8000.0:angle=0.0:min_points=0:nodata=0.0
-ot Float32 -of GTiff INPUT.shp OUTPUT.tif

I'm wondering is that the expected since it looks like the raster cell
value is determined by point locations. I would have expected a much
more smooth surface without any obvious circular shapes. To me it looks
like the computation was not done cell by cell but instead point by point.

What am I missing or misunderstanding?

Ari

ps: This tool is in group 'Raster analysis'. In my opinion it should be
in a group 'Point data tools' or something.




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180310/66277dfe/attachment.html>

From athomas at thinkspatial.com.au  Sat Mar 10 22:02:49 2018
From: athomas at thinkspatial.com.au (Alan Thomas)
Date: Sun, 11 Mar 2018 17:02:49 +1100
Subject: [gdal-dev] DXF driver update: Ready for testing
Message-ID: <CALhO07z7K+Zk8wBThGtc0iDBW6chrOtdVMDMRCzpBY0yc8f2Vg@mail.gmail.com>

Hello all,

I have almost wrapped up my work on GDAL's DXF driver. Highlights of
the improvements include:

 * Full read support for LEADER, MULTILEADER, ATTRIB, HELIX, TRACE
 * Basic read support for MLINE
 * Reading of raw data (no geometry generation) for 3DSOLID, REGION, SURFACE
 * DIMENSION entities are now handled by inserting their anonymous
block, with the old DIMENSION renderer preserved as a fallback for old
DXF files
 * The block insertion code has been almost entirely rewritten and is
now significantly more robust, particularly with respect to nested
blocks and ByBlock/ByLayer colors
 * OCS (extrusion) handling is now believed to be correct for all
entities except DIMENSION and *LEADER
 * Some other long-standing bugs have been fixed, such as the wrong
handling of elliptical arc segments in HATCH boundaries and the
incorrect translation of some SOLID objects
 * Written DXF files are now smaller and have improved support for
text styling and linetypes
 * Bug fixes/enhancements to HATCH, TEXT, MTEXT, SOLID, ATTDEF, LTYPE
(linetypes), CIRCLE, LWPOLYLINE, SPLINE, POLYLINE

To the best of my knowledge, GDAL's DXF driver is now the only
open-source library capable of reading MULTILEADER entities and
translating them into geometry primitives.

If you use the DXF driver (read or write), I would appreciate if you
could test against GDAL trunk, particularly if you use CAD software
other than AutoCAD (Microstation's DXF handler, QCAD, FME, etc).
Please report any bugs in Trac, or by direct email to myself if you
don't have an OSGeo login. Supplying a DXF file that exhibits the bug,
as well as screenshots from a CAD package, will really help.

GDAL's DXF reader is a key part of ThinkSpatial's business workflow,
and I trust that many other organisations in a similar position will
benefit from these improvements as much as we have.

Alan

-- 
Alan Thomas
Software Developer
ThinkSpatial
http://www.thinkspatial.com.au

From ireese at linz.govt.nz  Sun Mar 11 22:55:10 2018
From: ireese at linz.govt.nz (Ian Reese)
Date: Mon, 12 Mar 2018 05:55:10 +0000
Subject: [gdal-dev] gdal_merge.py
Message-ID: <CE106C36F836424AB340432214B378BA2BF37C8E@prdassexch01.ad.linz.govt.nz>

Hi Gdal,

I am having some issues with gdal_merge.py.

When I merge two tifs together, the original nodata value is converted to 0, no matter what that original no data was.  Here is my test case:

Data:

https://data.linz.govt.nz/x/9iitN4 DEM_BA32_3501_2013

https://data.linz.govt.nz/x/WLurgo DEM_BA31_3550_2013

Running gdalinfo on both files reveals a 'nodata' value of -9999.  When I view the data as individual files in QGIS, the 'nodata'  regions are confirmed as 'nodata' or '-9999' and are rendered transparent.

Next I run gdal_merge.py:

gdal_merge.py -o test_merge.tif *.tif

I also try:

gdal_merge.py -n -9999 -a_nodata -9999 -o test_merge_wnodata.tif *.tif

No matter which variation of merge I run, those regions that once contained 'nodata' or '-9999' are converted to '0' and the nodata value is not retained after the merge.  When I load the test_merge_wnodata.tif into QGIS, those regions once containing 'nodata', are now filled with 0 and rendered as such.

Maybe this is a bug or am I using gdal_merge.py improperly.

Cheers,

Ian



________________________________

This message contains information, which may be in confidence and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180312/bc280611/attachment.html>

From landa.martin at gmail.com  Mon Mar 12 08:49:12 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Mon, 12 Mar 2018 16:49:12 +0100
Subject: [gdal-dev] mssql: overwriting layers without geometry
Message-ID: <CA+Ei1OeGyhZjk0VUDSfDBd4mM0Q9FPKy6cQ1FAoWHH1k8WkKEg@mail.gmail.com>

Hi,

I wonder why command bellow

$ ogr2ogr -f MSSQLSpatial <connstr> <file> <layer> -overwrite --config
MSSQLSPATIAL_LIST_ALL_TABLES yes

works in GDAL 2.2.3, but fails in GDAL 2.3.:

ERROR 1: No column definitions found for table 'dbo.geometry_columns',
layer not usable.
ERROR 1: No column definitions found for table 'dbo.spatial_ref_sys',
layer not usable.
ERROR 1: No column definitions found for table 'dbo.tel', layer not usable.
ERROR 1: No column definitions found for table 'dbo.vla', layer not usable.
ERROR 1: Error creating layer: [Microsoft][SQL Server Native Client
11.0][SQL Server]There is already an object named 'vla' in the
database. When using the overwrite option and the layer doesn't
contain geometry column, you might require to use the
MSSQLSPATIAL_LIST_ALL_TABLES config option to get the previous layer
deleted before creating the new one.
ERROR 1: Terminating translation prematurely after failed
translation of layer VLA (use -skipfailures to skip errors)

Note: skipfailures doesn't not help.

Thanks for any pointers, Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From kassies at gmail.com  Tue Mar 13 00:54:23 2018
From: kassies at gmail.com (Rutger)
Date: Tue, 13 Mar 2018 00:54:23 -0700 (MST)
Subject: [gdal-dev] Wondering gdal_grid moving average interpolation
In-Reply-To: <9e22a2d0-2082-d138-f101-26b274990d43@gmail.com>
References: <9e22a2d0-2082-d138-f101-26b274990d43@gmail.com>
Message-ID: <1520927663205-0.post@n6.nabble.com>

It looks alright to me. The moving average algorithm searches (for each
pixel) for points within the specified radius, and then averages the values
of all those points.

"gdal_grid" also supports inverse distance or linear interpolation if you
want a more smooth result. 

It is perhaps surprising that QGIS only exposes a small subset of
gdal_grid's capabilities. 



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From ari.jolma at gmail.com  Tue Mar 13 01:52:56 2018
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue, 13 Mar 2018 10:52:56 +0200
Subject: [gdal-dev] Wondering gdal_grid moving average interpolation
In-Reply-To: <1520927663205-0.post@n6.nabble.com>
References: <9e22a2d0-2082-d138-f101-26b274990d43@gmail.com>
 <1520927663205-0.post@n6.nabble.com>
Message-ID: <ad14132c-4ca8-9c76-b01a-07b42b89c006@gmail.com>

On 13.03.2018 09:54, Rutger wrote:
> It looks alright to me. The moving average algorithm searches (for each
> pixel) for points within the specified radius, and then averages the values
> of all those points.
>
> "gdal_grid" also supports inverse distance or linear interpolation if you
> want a more smooth result.
>
> It is perhaps surprising that QGIS only exposes a small subset of
> gdal_grid's capabilities.

Yes, you're right, I was just a bit flabbergasted that it looked so bad. 
There's nothing to make it smooth.

The QGIS "bindings" to GDAL are a bit limited, perhaps there hasn't been 
much interest in expanding them from the initial commits(?). I believe 
there are also some things that could be thought as bugs - I did a PR(*) 
a year ago which was not merged (but the issue has been fixed since) - I 
think a good review of them would be useful. I fixed one issue 
recently(**) but it is a rather slow process.

Ari

*) https://github.com/qgis/QGIS/pull/4220
**) https://github.com/qgis/QGIS/pull/6564


From Christophe.LAVOYE at akka.eu  Tue Mar 13 02:54:23 2018
From: Christophe.LAVOYE at akka.eu (LAVOYE Christophe)
Date: Tue, 13 Mar 2018 09:54:23 +0000
Subject: [gdal-dev] [help][gdalwarp]Use of gdalwarp with data
 overlapping antimeridian
In-Reply-To: <CAFLLRp+Y8Uw7kZryyULRrCa25_pwELifSLey1KF02CtwUWZWXg@mail.gmail.com>
References: <6e4ba254e74c4feb9975040ae1285247@EXCH-MSG-11.akka.eu>
 <CAFLLRpLgLjHK8cHONi9XRB3nOk6Td1+vEXrZLNgDEK8C_6A2Jg@mail.gmail.com>
 <3c24d80d83df4f9aa898af7b7d412748@EXCH-MSG-11.akka.eu>
 <CAFLLRp+Y8Uw7kZryyULRrCa25_pwELifSLey1KF02CtwUWZWXg@mail.gmail.com>
Message-ID: <d9388e5669054fc7968ab2be9d579ee7@EXCH-MSG-12.akka.eu>

Hi Robert,

For the context i’m using GDAL 2.1.3 and i download the last stable release 2.2.3 to do my tests.

I was able to gdalwarp a .tif overlapping the anti-meridian with
--config CENTER_LONG 180


I didn’t succeed to use this command with –config CENTER_LON

I have tried:

gdalwarp -overwrite -t_srs WGS84 ..\DATA\baseAntiMeridien.tiff ..\DATA\output.tiff --config CENTER_LONG 180 -wo SOURCE_EXTRA=1000

gdalwarp -overwrite -s_srs EPSG:4326 -t_srs EPSG:3857 -dstalpha ..\DATA\baseAntiMeridien.tiff ..\DATA\output.tiff --config CENTER_LONG 180

etc…


On the other way I have been able to:


1-      Cut my original image with 180 merifian

gdalwarp -overwrite -s_srs EPSG:4326 -t_srs EPSG:4326 -te  179.9362168 65.5801061 180 66.133 -dstalpha ..\DATA\ baseAntiMeridien.tiff ..\DATA\output_cut1.tiff

gdalwarp -overwrite -s_srs EPSG:4326 -t_srs EPSG:4326 -te  180 65.5801061 181.339 66.133 -dstalpha ..\DATA\ baseAntiMeridien.tiff ..\DATA\output_cut2.tiff



2-      Reproject the first cut to EPSG:3857

gdalwarp -overwrite -s_srs EPSG:4326 -t_srs EPSG:3857 ..\DATA\output_cut1.tiff ..\DATA\output_cut1_proj_3857.tiff


3-      Translate the second cut to be inside -180 : 180

gdalwarp -overwrite -s_srs “+proj=latlong +datum=WGS84 +pm=180dW” -t_srs EPSG:4326 ..\DATA\output_cut2.tiff ..\DATA\output_cut2_translate.tiff


4-      Reproject the secong cut

gdalwarp -overwrite -s_srs EPSG:4326 -t_srs EPSG:3857 ..\DATA\output_cut2_translate.tiff ..\DATA\output_cut2_translate_proj_3857.tiff


Now I’m trying to merge those two image but I didn’t succed.

I suppose I have to use gdal_merge.py but I have an error “ImportError: No module named osgeo”. I’m trying to well configure my python.

Is this way looks good for you?




Best Regards,

[cid:image003.png at 01D1FD34.3B7C8CC0]

Christophe LAVOYE - Analyste
AKKA Technologies Informatique & Systèmes
7 boulevard Henri Ziegler – 31700 BLAGNAC
Tél : +33 (0)5 36 25 15 40
Email : christophe.lavoye at akka.eu<mailto:christophe.lavoye at akka.eu>



De : Robert Coup [mailto:robert.coup at koordinates.com]
Envoyé : jeudi 8 mars 2018 15:41
À : LAVOYE Christophe
Cc : gdal-dev at lists.osgeo.org
Objet : Re: [gdal-dev] [help][gdalwarp]Use of gdalwarp with data overlapping antimeridian

Hi Christophe,

Have a look at the following:

https://lists.osgeo.org/pipermail/gdal-dev/2016-January/043358.html
https://gis.stackexchange.com/questions/37790/how-to-reproject-raster-from-0-360-to-180-180-with-cutting-180-meridian

I'd suggest building a couple of VRT files to treat your data as -180 to +180, then project each independently to EPSG:3857.

I'm sure there used to be an example in the GDAL docs, but I can't find it - maybe I'm imagining it :)

As I’m new on this mail list do I have to “Reply All”? or just reply to you?

Reply all is good — that way everyone can read it.

Cheers,

Rob.

On 7 March 2018 at 13:05, LAVOYE Christophe <Christophe.LAVOYE at akka.eu<mailto:Christophe.LAVOYE at akka.eu>> wrote:
Hi Robert,

You could find my sample in attached files.

This is the gdal informations:

Driver: GTiff/GeoTIFF
Files: D:\TEMP\TempProjectionsV2\BASE\baseAnteMeridien.tiff
Size is 900, 803
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
GeoTransform =
  179.9362167765823, 0.001541256882521351, 1.892378333877928e-005
  66.12419696670919, 9.991578318404334e-006, -0.0006775726479453831
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_XRESOLUTION=96
  TIFFTAG_YRESOLUTION=96
Image Structure Metadata:
  COMPRESSION=JPEG
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  ( 179.9362168,  66.1241970) (179d56'10.38"E, 66d 7'27.11"N)
Lower Left  ( 179.9514126,  65.5801061) (179d57' 5.09"E, 65d34'48.38"N)
Upper Right (     181.323,      66.133) (181d19'24.05"E, 66d 7'59.48"N)
Lower Right (     181.339,      65.589) (181d20'18.76"E, 65d35'20.75"N)
Center      ( 180.6373803,  65.8566478) (180d38'14.57"E, 65d51'23.93"N)
Band 1 Block=900x803 Type=Byte, ColorInterp=Red
Band 2 Block=900x803 Type=Byte, ColorInterp=Green
Band 3 Block=900x803 Type=Byte, ColorInterp=Blue

So my question concerns data which past +180° a

I made old tests where I first cut my image and then make two warp operations and I remember it was working. I didn’t try to re-associate then.
I have to test.

As I’m not an expert I want to know the best approach to enable reprojection on those kind of data with coordinate over +180°.

As I’m new on this mail list do I have to “Reply All”? or just reply to you?

Best regards,


[cid:image003.png at 01D1FD34.3B7C8CC0]

Christophe LAVOYE - Analyste
AKKA Technologies Informatique & Systèmes
7 boulevard Henri Ziegler – 31700 BLAGNAC<https://maps.google.com/?q=7+boulevard+Henri+Ziegler+%E2%80%93+31700+BLAGNAC&entry=gmail&source=g>
Tél : +33 (0)5 36 25 15 40<tel:+33%205%2036%2025%2015%2040>
Email : christophe.lavoye at akka.eu<mailto:christophe.lavoye at akka.eu>



De : Robert Coup [mailto:robert.coup at koordinates.com<mailto:robert.coup at koordinates.com>]
Envoyé : mercredi 7 mars 2018 12:33
À : LAVOYE Christophe
Cc : gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Objet : Re: [gdal-dev] [help][gdalwarp]Use of gdalwarp with data overlapping antimeridian

Hi Christophe,

What do you expect or want to happen with your images?

Are your 4326 image coordinates in -180° to +180° range (ie. the right longitude is < the left); or do they go past +180°?

3857 is a projected coordinate system, so doesn't have a builtin concept of wrapping. Some clients implement.
Do you want x values >20037508.34? But they'll only display on the "right" side of the world then (if at all).

The simplest approach is likely to be to do two warp operations, for the left and right parts, ending up with two images — one with left=-20037508.34 and one with right=+20037508.34

Rob :)


On 1 March 2018 at 15:23, LAVOYE Christophe <Christophe.LAVOYE at akka.eu<mailto:Christophe.LAVOYE at akka.eu>> wrote:
Hello,

I’m using GDAL library in a C# project.

To reproject some geotiff files i’m calling gdalwarp tool as external process with this command:

gdalwarp.exe -s_srs EPSG:4326 -t_srs EPSG:3857 -dstalpha input.tiff output.tiff



All works fine except for data overlapping antimeridian such as the associated tiff file.

I don’t find how fix my problem or if I’m using the correct tool for those kind of data.


Best regards,


[cid:image003.png at 01D1FD34.3B7C8CC0]

Christophe LAVOYE - Analyste
AKKA Technologies Informatique & Systèmes
7 boulevard Henri Ziegler – 31700 BLAGNAC<https://maps.google.com/?q=7+boulevard+Henri+Ziegler+%E2%80%93+31700+BLAGNAC&entry=gmail&source=g>
Tél : +33 (0)5 36 25 15 40<tel:+33%205%2036%2025%2015%2040>
Email : christophe.lavoye at akka.eu<mailto:christophe.lavoye at akka.eu>




_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev



--

Chief Technology Officer Koordinates

+44 759 987 3480<tel:+44%20759%209873480> / koordinates.com<http://koordinates.com/> / @koordinates<https://twitter.com/koordinates>



--

Chief Technology Officer Koordinates

+44 759 987 3480<tel:+44%20759%209873480> / koordinates.com<http://koordinates.com/> / @koordinates<https://twitter.com/koordinates>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180313/47521195/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 11648 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180313/47521195/attachment-0001.png>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Mar 13 03:22:28 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Tue, 13 Mar 2018 10:22:28 +0000
Subject: [gdal-dev] Validate_gpkg and TEXT with length
Message-ID: <bccc7d263a5443aca99536c62ad73d87@C119S212VM042.msvyvi.vaha.local>

Even Rouault wrote:

>Jukka,
 
>> 
>> I checked some .gpkg database that is created by FME with the
>> validate_gpkg.py script. It gives this error:
>> 
>> __main__.GPKGCheckException: Req 5: table stand has column
>> standnumberextension of unexpected type TEXT ( 2 )
>> 
>> Excerpt from the standard:
>> TEXT{(maxchar_count)}
>> Variable length string encoded in either UTF-8 or UTF-16, determined by
>> PRAGMA encoding; see http://www.sqlite.org/pragma.html#pragma_encoding The
>> optional maxchar_count defines the maximum number of characters in the
>> string. If not specified, the length is unbounded. The count is provided
>> for informational purposes, and applications MAY choose to truncate longer
>> strings if encountered. When present, it is best practice for applications
>> to adhere to the character count. Stored as SQLite TEXT
>> 
>> Unfortunately there is no example in the standard about how the text field
>> with maxchar count should be created correctly and how it should appear in
>> the PRAGMA. I wonder if the error is caused by the spaces around number 2
>> in TEXT ( 2 ).
 
> Yes this is due to spaces.
 
> My understanding of the specification text, confirmed by the official test suite in
> https://github.com/opengeospatial/ets-gpkg12/blob/02ba0439a4d060c6cb036caa5d8225e18241e8e6/src/main/java/org/opengis/cite/gpkg12/core/DataContentsTests.java#L266
> is that spaces are not allowed, so this should be TEXT(2)
 
> The OGR driver will just recognize TEXT (2) as TEXT.

Hi,

It appeared that this suspicious GeoPackage database was initially created with some generic SQLite database design tool. FME and GDAL were only used for inserting data into already existing tables and they were not involved with the non-GeoPackage standard conformant  contents in sqlite_master. Be aware when using such tools because what is OK for SQLite is not necessarily OK for the gpkg standard.

Good news is that the validate_gpkg.py script was able to find this issue. 

-Jukka Rahkonen-

From stephan.braeuer at bentley.com  Tue Mar 13 10:01:48 2018
From: stephan.braeuer at bentley.com (Stephan Braeuer)
Date: Tue, 13 Mar 2018 10:01:48 -0700 (MST)
Subject: [gdal-dev] Shape datafile locked
Message-ID: <1520960508102-0.post@n6.nabble.com>

I am using GDAL with c# and run into a problem deleting datasource files
after running ExecuteSQL.
The key here is that a datasource is opened implicitly via the JOIN
statement. An implicitly opened shapefile (here node3109.shp) remains locked
after the datasource has been closed.

Opening the file upfront does not help either. Here is the c# code snippet:

  using (DataSource datasource = OSGeo.OGR.Ogr.Open(pipeFile, 0))
  {
     string statement =
         "SELECT p.id, n.grnd_lvl FROM pipe3109 p " +
         "LEFT JOIN 'node3109.shp'.node3109 n ON n.node_id = p.ds_node_id";
     using (Layer layer = datasource.ExecuteSQL(statement, null,
string.Empty))
     {
     }
  }
  File.Delete(pipeFile);   //ok
  File.Delete(nodeFile);  //throws



Anyone knowing a solution to avoid the lock? 

Thanks
Stephan







--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Tue Mar 13 10:11:38 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 13 Mar 2018 18:11:38 +0100
Subject: [gdal-dev] Shape datafile locked
In-Reply-To: <1520960508102-0.post@n6.nabble.com>
References: <1520960508102-0.post@n6.nabble.com>
Message-ID: <7279750.QQvqoS5dto@even-i700>

On mardi 13 mars 2018 10:01:48 CET Stephan Braeuer wrote:
> I am using GDAL with c# and run into a problem deleting datasource files
> after running ExecuteSQL.
> The key here is that a datasource is opened implicitly via the JOIN
> statement. An implicitly opened shapefile (here node3109.shp) remains locked
> after the datasource has been closed.
> 
> Opening the file upfront does not help either. Here is the c# code snippet:
> 
>   using (DataSource datasource = OSGeo.OGR.Ogr.Open(pipeFile, 0))
>   {
>      string statement =
>          "SELECT p.id, n.grnd_lvl FROM pipe3109 p " +
>          "LEFT JOIN 'node3109.shp'.node3109 n ON n.node_id = p.ds_node_id";
>      using (Layer layer = datasource.ExecuteSQL(statement, null,
> string.Empty))
>      {

You probably need an explicit
		datasource.ReleaseResultSet(layer)
here. As I don't think layers resulting from ExecuteSQL() are garbage collected by the C# 
bindings (they are not by other binding languages)

>      }
>   }
>   File.Delete(pipeFile);   //ok
>   File.Delete(nodeFile);  //throws
> 
> 
> 
> Anyone knowing a solution to avoid the lock?
> 
> Thanks
> Stephan
> 
> 
> 
> 
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180313/83bdaca9/attachment.html>

From Stephan.Braeuer at bentley.com  Tue Mar 13 15:09:06 2018
From: Stephan.Braeuer at bentley.com (Stephan Braeuer)
Date: Tue, 13 Mar 2018 22:09:06 +0000
Subject: [gdal-dev] Shape datafile locked
In-Reply-To: <7279750.QQvqoS5dto@even-i700>
References: <1520960508102-0.post@n6.nabble.com> <7279750.QQvqoS5dto@even-i700>
Message-ID: <DM5PR02MB24098F6168C382943165F427F5D20@DM5PR02MB2409.namprd02.prod.outlook.com>

Calling datasource.ReleaseResultSet(layer) did the trick.

Thanks!

From: Even Rouault [mailto:even.rouault at spatialys.com]
Sent: Tuesday, March 13, 2018 6:12 PM
To: gdal-dev at lists.osgeo.org
Cc: Stephan Braeuer <Stephan.Braeuer at bentley.com>
Subject: Re: [gdal-dev] Shape datafile locked


On mardi 13 mars 2018 10:01:48 CET Stephan Braeuer wrote:

> I am using GDAL with c# and run into a problem deleting datasource files

> after running ExecuteSQL.

> The key here is that a datasource is opened implicitly via the JOIN

> statement. An implicitly opened shapefile (here node3109.shp) remains locked

> after the datasource has been closed.

>

> Opening the file upfront does not help either. Here is the c# code snippet:

>

> using (DataSource datasource = OSGeo.OGR.Ogr.Open(pipeFile, 0))

> {

> string statement =

> "SELECT p.id, n.grnd_lvl FROM pipe3109 p " +

> "LEFT JOIN 'node3109.shp'.node3109 n ON n.node_id = p.ds_node_id";

> using (Layer layer = datasource.ExecuteSQL(statement, null,

> string.Empty))

> {



You probably need an explicit

datasource.ReleaseResultSet(layer)

here. As I don't think layers resulting from ExecuteSQL() are garbage collected by the C# bindings (they are not by other binding languages)



> }

> }

> File.Delete(pipeFile); //ok

> File.Delete(nodeFile); //throws

>

>

>

> Anyone knowing a solution to avoid the lock?

>

> Thanks

> Stephan

>

>

>

>

>

>

>

> --

> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

> _______________________________________________

> gdal-dev mailing list

> gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--

Spatialys - Geospatial professional services

http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180313/31f99434/attachment.html>

From even.rouault at spatialys.com  Tue Mar 13 13:24:35 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 13 Mar 2018 21:24:35 +0100
Subject: [gdal-dev] Revisiting ecw
In-Reply-To: <CAObswFCntfnQJOZxpHAoAQ5H1wEJe66oL6EWpT2tnpCSHp+raw@mail.gmail.com>
References: <CAObswFCntfnQJOZxpHAoAQ5H1wEJe66oL6EWpT2tnpCSHp+raw@mail.gmail.com>
Message-ID: <26226091.cChNff4gJI@even-i700>

Hi,

Hexagon released ECW SDK 5.4 [1] with support for the CXX11 ABI, which
makes it compatible with gcc >= 5.1 with its default ABI.

I've just added support in configure in trunk and 2.2 branch to detect if we
must link against the libNCSEcw with the newabi or the one with the oldabi

Note: I've found that if you also link against the Teigha libraries, the ECW driver
tends to crash. The joy of combining two proprietary closed-source SDKs...

Even

[1] https://download.hexagongeospatial.com/downloads/ecw/erdas-ecw-jp2-sdk-v5-4-linux


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180313/7b2be167/attachment.html>

From guillaume.pasero at c-s.fr  Wed Mar 14 07:35:24 2018
From: guillaume.pasero at c-s.fr (Guillaume Pasero)
Date: Wed, 14 Mar 2018 15:35:24 +0100
Subject: [gdal-dev] GDAL python bindings build error (gcc command
 replaced by bash)
In-Reply-To: <201611021250.24888.even.rouault@spatialys.com>
References: <CANXASxMd0RyvruK3oqs9s3G-85cdkYZPBPapApuywa51khyQnw@mail.gmail.com>
 <201611021100.45915.even.rouault@spatialys.com>
 <6c37555a-22c0-5c8f-3794-cd4148df8384@uni-bonn.de>
 <201611021250.24888.even.rouault@spatialys.com>
Message-ID: <2ac1398a-0851-c9e7-872e-370d0336d97d@c-s.fr>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180314/bc1b11a3/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: logo_cs.png
Type: image/png
Size: 19066 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180314/bc1b11a3/attachment-0001.png>

From jmckenna at gatewaygeomatics.com  Wed Mar 14 10:28:28 2018
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed, 14 Mar 2018 14:28:28 -0300
Subject: [gdal-dev] Revisiting ecw
In-Reply-To: <26226091.cChNff4gJI@even-i700>
References: <CAObswFCntfnQJOZxpHAoAQ5H1wEJe66oL6EWpT2tnpCSHp+raw@mail.gmail.com>
 <26226091.cChNff4gJI@even-i700>
Message-ID: <9d43e44c-94e8-4ce4-980f-6aec4d39adb6@gatewaygeomatics.com>

On 2018-03-13 5:24 PM, Even Rouault wrote:
> Hi,
> 
> Hexagon released ECW SDK 5.4 [1] with support for the CXX11 ABI, which
> 
> makes it compatible with gcc >= 5.1 with its default ABI.
> 
> I've just added support in configure in trunk and 2.2 branch to detect if we
> 
> must link against the libNCSEcw with the newabi or the one with the oldabi
> 
> Note: I've found that if you also link against the Teigha libraries, the 
> ECW driver
> 
> tends to crash. The joy of combining two proprietary closed-source SDKs...
> 
> Even
> 
> [1] 
> https://download.hexagongeospatial.com/downloads/ecw/erdas-ecw-jp2-sdk-v5-4-linux
> 

Thank you Even (and also for updating the buildhint notes, you beat me 
to it https://trac.osgeo.org/gdal/wiki/ECW).

-jeff




From even.rouault at spatialys.com  Wed Mar 14 13:15:41 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 14 Mar 2018 21:15:41 +0100
Subject: [gdal-dev] GDAL python bindings build error (gcc command
	replaced by bash)
In-Reply-To: <2ac1398a-0851-c9e7-872e-370d0336d97d@c-s.fr>
References: <CANXASxMd0RyvruK3oqs9s3G-85cdkYZPBPapApuywa51khyQnw@mail.gmail.com>
 <201611021250.24888.even.rouault@spatialys.com>
 <2ac1398a-0851-c9e7-872e-370d0336d97d@c-s.fr>
Message-ID: <2291546.M03F3FzDmG@even-i700>

Guillaume,

Does adding the following in swig/python/setup.py  (just after similar stuff for CXX) helps ?

if 'CC' in os.environ and os.environ['CC'].strip().find(' ') >= 0:
    print('WARNING: "CC=%s" was defined in the environment and contains more than one word. Unsetting it since that is incompatible of distutils' % os.environ['CC'])
    del os.environ['CC']

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180314/f887902a/attachment.html>

From guillaume.pasero at c-s.fr  Thu Mar 15 01:31:46 2018
From: guillaume.pasero at c-s.fr (Guillaume Pasero)
Date: Thu, 15 Mar 2018 09:31:46 +0100
Subject: [gdal-dev] GDAL python bindings build error (gcc command
 replaced by bash)
In-Reply-To: <2291546.M03F3FzDmG@even-i700>
References: <CANXASxMd0RyvruK3oqs9s3G-85cdkYZPBPapApuywa51khyQnw@mail.gmail.com>
 <201611021250.24888.even.rouault@spatialys.com>
 <2ac1398a-0851-c9e7-872e-370d0336d97d@c-s.fr> <2291546.M03F3FzDmG@even-i700>
Message-ID: <1b6e8a0e-e508-ff94-944f-25e2a4bc4d6c@c-s.fr>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180315/4db33206/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: logo_cs.png
Type: image/png
Size: 19066 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180315/4db33206/attachment-0001.png>

From even.rouault at spatialys.com  Thu Mar 15 01:54:35 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 15 Mar 2018 09:54:35 +0100
Subject: [gdal-dev] GDAL python bindings build error (gcc command
	replaced by bash)
In-Reply-To: <1b6e8a0e-e508-ff94-944f-25e2a4bc4d6c@c-s.fr>
References: <CANXASxMd0RyvruK3oqs9s3G-85cdkYZPBPapApuywa51khyQnw@mail.gmail.com>
 <2291546.M03F3FzDmG@even-i700> <1b6e8a0e-e508-ff94-944f-25e2a4bc4d6c@c-s.fr>
Message-ID: <1977137.WeSMhFQ0Ko@even-i700>

> Yes, this is what I did, and it solves the issue.

OK, fix committed in trunk and 2.2 branch

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180315/02103a44/attachment.html>

From even.rouault at spatialys.com  Fri Mar 16 07:43:53 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 16 Mar 2018 15:43:53 +0100
Subject: [gdal-dev] Revisiting ecw
In-Reply-To: <26226091.cChNff4gJI@even-i700>
References: <CAObswFCntfnQJOZxpHAoAQ5H1wEJe66oL6EWpT2tnpCSHp+raw@mail.gmail.com>
 <26226091.cChNff4gJI@even-i700>
Message-ID: <3974125.dDjGT9Qgik@even-i700>

> Note: I've found that if you also link against the Teigha libraries, the ECW
> driver tends to crash. The joy of combining two proprietary closed-source
> SDKs...

Regarding the above finding, I've found that both ECW SDK and Teigha SDK 
embeds a copy of TinyXML, probably at a different version / ABI, which 
explains those runtime crashes. Hexagon developers have been made aware of 
that issue.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ouwen.oh at gmail.com  Sat Mar 17 23:15:32 2018
From: ouwen.oh at gmail.com (Ouwen Huang)
Date: Sun, 18 Mar 2018 06:15:32 +0000
Subject: [gdal-dev] GDAL + Docker with NFS
Message-ID: <CAHYE1b8eoWOS51q12Wdux+tVTkuTzNhD-6QeVwNvXA5M-idjCw@mail.gmail.com>

Hello,

I am having some trouble loading a GeoTiff into GDAL from a docker
container that is mounting a NFS (specifically amazon EFS). When mounting a
volume with the `docker -v` command or mounting the NFS directly into
docker under `--privileged` mode. The `gdal.Open` command hangs.

I am able to run os level commands to open the GeoTiff of interest from
within the docker container. In fact, if I copy from the NFS to a local
directory, gdal works fine.

I'm trying to understand what might be causing the `gdal.Open` command to
hang. I've tested that `VSIFOpenL` and `VSIFReadL` work with the GeoTiff
within the docker container so I'm very confused what is happening.

I've tried different versions of GDAL (1.10 - 2.3) and differing versions
of docker with no luck.

Any help would be greatly appreciated!

Best,
Ouwen Huang
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180318/dbef4e34/attachment.html>

From michael.smith.erdc at gmail.com  Sat Mar 17 23:31:20 2018
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Sun, 18 Mar 2018 07:31:20 +0100
Subject: [gdal-dev] GDAL + Docker with NFS
In-Reply-To: <CAHYE1b8eoWOS51q12Wdux+tVTkuTzNhD-6QeVwNvXA5M-idjCw@mail.gmail.com>
References: <CAHYE1b8eoWOS51q12Wdux+tVTkuTzNhD-6QeVwNvXA5M-idjCw@mail.gmail.com>
Message-ID: <F45F1552-1F45-4F2E-B18A-E05B35CEBA04@gmail.com>

Have you restarted the docker daemon after mounting the EFS drive to the local OS? If not, do that and then map the volume with -v. That worked for me. 

Michael Smith
Remote Sensing/GIS Center
US Army Corps of Engineers

> On Mar 18, 2018, at 7:15 AM, Ouwen Huang <ouwen.oh at gmail.com> wrote:
> 
> Hello,
> 
> I am having some trouble loading a GeoTiff into GDAL from a docker container that is mounting a NFS (specifically amazon EFS). When mounting a volume with the `docker -v` command or mounting the NFS directly into docker under `--privileged` mode. The `gdal.Open` command hangs.
> 
> I am able to run os level commands to open the GeoTiff of interest from within the docker container. In fact, if I copy from the NFS to a local directory, gdal works fine.
> 
> I'm trying to understand what might be causing the `gdal.Open` command to hang. I've tested that `VSIFOpenL` and `VSIFReadL` work with the GeoTiff within the docker container so I'm very confused what is happening.
> 
> I've tried different versions of GDAL (1.10 - 2.3) and differing versions of docker with no luck.
> 
> Any help would be greatly appreciated!
> 
> Best,
> Ouwen Huang
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From ouwen.oh at gmail.com  Sat Mar 17 23:51:38 2018
From: ouwen.oh at gmail.com (Ouwen Huang)
Date: Sun, 18 Mar 2018 06:51:38 +0000
Subject: [gdal-dev] GDAL + Docker with NFS
In-Reply-To: <F45F1552-1F45-4F2E-B18A-E05B35CEBA04@gmail.com>
References: <CAHYE1b8eoWOS51q12Wdux+tVTkuTzNhD-6QeVwNvXA5M-idjCw@mail.gmail.com>
 <F45F1552-1F45-4F2E-B18A-E05B35CEBA04@gmail.com>
Message-ID: <CAHYE1b816XbGiZQMk4s3PgFyOqwjLWp0GXjKL4yBZ2MvyAFciA@mail.gmail.com>

Hey Michael,

Thanks for the quick response, I've been bashing my head against this for a
while.
Unfortunately restarting the docker daemon did not work for me. I can
access the EFS from within docker using regular unix commands like `cp`,
and `cat`, even with GDAL `VSIFOpenL` and `VSIFReadL`. However, `gdal.Open`
will just hang without giving an error or returning.

I'm using the following mount command from amazon EFS if this helps debug
anything:
`sudo mount -t nfs4 -o
nfsvers=4.1,rsize=1048576,wsize=1048576,hard,timeo=600,retrans=2
<fs-id>.efs.us-west-2.amazonaws.com:/ /mnt/efs`

I'm glad that you have a working version of this though, this had worked
for me in the past but I did not keep track of my versioning.

What host os version, docker version and gdal version are you using?

- Ouwen

On Sun, Mar 18, 2018 at 2:31 AM Michael Smith <michael.smith.erdc at gmail.com>
wrote:

> Have you restarted the docker daemon after mounting the EFS drive to the
> local OS? If not, do that and then map the volume with -v. That worked for
> me.
>
> Michael Smith
> Remote Sensing/GIS Center
> US Army Corps of Engineers
>
> > On Mar 18, 2018, at 7:15 AM, Ouwen Huang <ouwen.oh at gmail.com> wrote:
> >
> > Hello,
> >
> > I am having some trouble loading a GeoTiff into GDAL from a docker
> container that is mounting a NFS (specifically amazon EFS). When mounting a
> volume with the `docker -v` command or mounting the NFS directly into
> docker under `--privileged` mode. The `gdal.Open` command hangs.
> >
> > I am able to run os level commands to open the GeoTiff of interest from
> within the docker container. In fact, if I copy from the NFS to a local
> directory, gdal works fine.
> >
> > I'm trying to understand what might be causing the `gdal.Open` command
> to hang. I've tested that `VSIFOpenL` and `VSIFReadL` work with the GeoTiff
> within the docker container so I'm very confused what is happening.
> >
> > I've tried different versions of GDAL (1.10 - 2.3) and differing
> versions of docker with no luck.
> >
> > Any help would be greatly appreciated!
> >
> > Best,
> > Ouwen Huang
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-- 
Duke MD/PhD Candidate
Ycombinator Fellow
cell: 210.860.3915
http://ouwen.io/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180318/c57bb173/attachment.html>

From ouwen.oh at gmail.com  Sun Mar 18 00:09:08 2018
From: ouwen.oh at gmail.com (Ouwen Huang)
Date: Sun, 18 Mar 2018 07:09:08 +0000
Subject: [gdal-dev] GDAL + Docker with NFS
In-Reply-To: <CAHYE1b816XbGiZQMk4s3PgFyOqwjLWp0GXjKL4yBZ2MvyAFciA@mail.gmail.com>
References: <CAHYE1b8eoWOS51q12Wdux+tVTkuTzNhD-6QeVwNvXA5M-idjCw@mail.gmail.com>
 <F45F1552-1F45-4F2E-B18A-E05B35CEBA04@gmail.com>
 <CAHYE1b816XbGiZQMk4s3PgFyOqwjLWp0GXjKL4yBZ2MvyAFciA@mail.gmail.com>
Message-ID: <CAHYE1b8Xna3dzOU5fyixhwAixNO4rY62Rf7K2ec_5k5DNsCCuw@mail.gmail.com>

I feel quite silly, but it seems that the `gdal.Open` was actually opening
the file from the docker mounted NFS, just very slowly. I left it to run
for 2 minutes or so and it returned.

But this is weird behavior because on the host a `*Dataset` was returned
instantly, and within the docker container running `cp
/mnt/efs/<my_geo.tiff>  <docker_local_dir` is also instant. The 2min
latency seems to only occur within a docker mounted network filesystem for
the `gdal.Open` command.

Some other findings, the `/mnt/efs/` directory i'm using has several files
(100k+). When I move the geotiff under a new directory within EFS
(`mnt/efs/test`), the `gdal.Open` command is instant within the docker
container.

Is there a reason why `gdal.Open` is slow for a cluttered directory but
unix `cp` is not?

On Sun, Mar 18, 2018 at 2:51 AM Ouwen Huang <ouwen.oh at gmail.com> wrote:

> Hey Michael,
>
> Thanks for the quick response, I've been bashing my head against this for
> a while.
> Unfortunately restarting the docker daemon did not work for me. I can
> access the EFS from within docker using regular unix commands like `cp`,
> and `cat`, even with GDAL `VSIFOpenL` and `VSIFReadL`. However,
> `gdal.Open` will just hang without giving an error or returning.
>
> I'm using the following mount command from amazon EFS if this helps debug
> anything:
> `sudo mount -t nfs4 -o
> nfsvers=4.1,rsize=1048576,wsize=1048576,hard,timeo=600,retrans=2
> <fs-id>.efs.us-west-2.amazonaws.com:/ /mnt/efs`
>
> I'm glad that you have a working version of this though, this had worked
> for me in the past but I did not keep track of my versioning.
>
> What host os version, docker version and gdal version are you using?
>
> - Ouwen
>
> On Sun, Mar 18, 2018 at 2:31 AM Michael Smith <
> michael.smith.erdc at gmail.com> wrote:
>
>> Have you restarted the docker daemon after mounting the EFS drive to the
>> local OS? If not, do that and then map the volume with -v. That worked for
>> me.
>>
>> Michael Smith
>> Remote Sensing/GIS Center
>> US Army Corps of Engineers
>>
>> > On Mar 18, 2018, at 7:15 AM, Ouwen Huang <ouwen.oh at gmail.com> wrote:
>> >
>> > Hello,
>> >
>> > I am having some trouble loading a GeoTiff into GDAL from a docker
>> container that is mounting a NFS (specifically amazon EFS). When mounting a
>> volume with the `docker -v` command or mounting the NFS directly into
>> docker under `--privileged` mode. The `gdal.Open` command hangs.
>> >
>> > I am able to run os level commands to open the GeoTiff of interest from
>> within the docker container. In fact, if I copy from the NFS to a local
>> directory, gdal works fine.
>> >
>> > I'm trying to understand what might be causing the `gdal.Open` command
>> to hang. I've tested that `VSIFOpenL` and `VSIFReadL` work with the GeoTiff
>> within the docker container so I'm very confused what is happening.
>> >
>> > I've tried different versions of GDAL (1.10 - 2.3) and differing
>> versions of docker with no luck.
>> >
>> > Any help would be greatly appreciated!
>> >
>> > Best,
>> > Ouwen Huang
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev at lists.osgeo.org
>> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> --
> Duke MD/PhD Candidate
> Ycombinator Fellow
> cell: 210.860.3915 <(210)%20860-3915>
> http://ouwen.io/
>
-- 
Duke MD/PhD Candidate
Ycombinator Fellow
cell: 210.860.3915
http://ouwen.io/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180318/f9977e1b/attachment-0001.html>

From michael.smith.erdc at gmail.com  Sun Mar 18 00:14:01 2018
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Sun, 18 Mar 2018 08:14:01 +0100
Subject: [gdal-dev] GDAL + Docker with NFS
In-Reply-To: <CAHYE1b8Xna3dzOU5fyixhwAixNO4rY62Rf7K2ec_5k5DNsCCuw@mail.gmail.com>
References: <CAHYE1b8eoWOS51q12Wdux+tVTkuTzNhD-6QeVwNvXA5M-idjCw@mail.gmail.com>
 <F45F1552-1F45-4F2E-B18A-E05B35CEBA04@gmail.com>
 <CAHYE1b816XbGiZQMk4s3PgFyOqwjLWp0GXjKL4yBZ2MvyAFciA@mail.gmail.com>
 <CAHYE1b8Xna3dzOU5fyixhwAixNO4rY62Rf7K2ec_5k5DNsCCuw@mail.gmail.com>
Message-ID: <E21B83EE-3B49-43BF-8E53-911F1C635CAB@gmail.com>

We haven’t had that behavior, we use gdal.Open on many large files inside docker and this isn’t an issue we’ve had. We haven’t specifically used EFS, we use NFS and an S3 fuse layer with docker and have had very good performance with the python bindings. 

Note that we haven’t used privileged mode though, we aren’t using selinux, and we use the same uid/gid inside the docker container as owns the files. So that might be something to look at. 

Michael Smith
Remote Sensing/GIS Center
US Army Corps of Engineers

> On Mar 18, 2018, at 8:09 AM, Ouwen Huang <ouwen.oh at gmail.com> wrote:
> 
> I feel quite silly, but it seems that the `gdal.Open` was actually opening the file from the docker mounted NFS, just very slowly. I left it to run for 2 minutes or so and it returned.
> 
> But this is weird behavior because on the host a `*Dataset` was returned instantly, and within the docker container running `cp /mnt/efs/<my_geo.tiff>  <docker_local_dir` is also instant. The 2min latency seems to only occur within a docker mounted network filesystem for the `gdal.Open` command.
> 
> Some other findings, the `/mnt/efs/` directory i'm using has several files (100k+). When I move the geotiff under a new directory within EFS (`mnt/efs/test`), the `gdal.Open` command is instant within the docker container.
> 
> Is there a reason why `gdal.Open` is slow for a cluttered directory but unix `cp` is not?
> 
>> On Sun, Mar 18, 2018 at 2:51 AM Ouwen Huang <ouwen.oh at gmail.com> wrote:
>> Hey Michael,
>> 
>> Thanks for the quick response, I've been bashing my head against this for a while.
>> Unfortunately restarting the docker daemon did not work for me. I can access the EFS from within docker using regular unix commands like `cp`, and `cat`, even with GDAL `VSIFOpenL` and `VSIFReadL`. However, `gdal.Open` will just hang without giving an error or returning.
>> 
>> I'm using the following mount command from amazon EFS if this helps debug anything:
>> `sudo mount -t nfs4 -o nfsvers=4.1,rsize=1048576,wsize=1048576,hard,timeo=600,retrans=2 <fs-id>.efs.us-west-2.amazonaws.com:/ /mnt/efs`
>> 
>> I'm glad that you have a working version of this though, this had worked for me in the past but I did not keep track of my versioning.
>> 
>> What host os version, docker version and gdal version are you using?
>> 
>> - Ouwen
>> 
>>> On Sun, Mar 18, 2018 at 2:31 AM Michael Smith <michael.smith.erdc at gmail.com> wrote:
>>> Have you restarted the docker daemon after mounting the EFS drive to the local OS? If not, do that and then map the volume with -v. That worked for me.
>>> 
>>> Michael Smith
>>> Remote Sensing/GIS Center
>>> US Army Corps of Engineers
>>> 
>>> > On Mar 18, 2018, at 7:15 AM, Ouwen Huang <ouwen.oh at gmail.com> wrote:
>>> >
>>> > Hello,
>>> >
>>> > I am having some trouble loading a GeoTiff into GDAL from a docker container that is mounting a NFS (specifically amazon EFS). When mounting a volume with the `docker -v` command or mounting the NFS directly into docker under `--privileged` mode. The `gdal.Open` command hangs.
>>> >
>>> > I am able to run os level commands to open the GeoTiff of interest from within the docker container. In fact, if I copy from the NFS to a local directory, gdal works fine.
>>> >
>>> > I'm trying to understand what might be causing the `gdal.Open` command to hang. I've tested that `VSIFOpenL` and `VSIFReadL` work with the GeoTiff within the docker container so I'm very confused what is happening.
>>> >
>>> > I've tried different versions of GDAL (1.10 - 2.3) and differing versions of docker with no luck.
>>> >
>>> > Any help would be greatly appreciated!
>>> >
>>> > Best,
>>> > Ouwen Huang
>>> > _______________________________________________
>>> > gdal-dev mailing list
>>> > gdal-dev at lists.osgeo.org
>>> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>> -- 
>> Duke MD/PhD Candidate
>> Ycombinator Fellow
>> cell: 210.860.3915
>> http://ouwen.io/
> -- 
> Duke MD/PhD Candidate
> Ycombinator Fellow
> cell: 210.860.3915
> http://ouwen.io/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180318/e1c85a6c/attachment.html>

From andrew at aitchison.me.uk  Sun Mar 18 01:32:49 2018
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Sun, 18 Mar 2018 08:32:49 +0000 (GMT)
Subject: [gdal-dev] GDAL + Docker with NFS
In-Reply-To: <CAHYE1b8Xna3dzOU5fyixhwAixNO4rY62Rf7K2ec_5k5DNsCCuw@mail.gmail.com>
References: <CAHYE1b8eoWOS51q12Wdux+tVTkuTzNhD-6QeVwNvXA5M-idjCw@mail.gmail.com>
 <F45F1552-1F45-4F2E-B18A-E05B35CEBA04@gmail.com>
 <CAHYE1b816XbGiZQMk4s3PgFyOqwjLWp0GXjKL4yBZ2MvyAFciA@mail.gmail.com>
 <CAHYE1b8Xna3dzOU5fyixhwAixNO4rY62Rf7K2ec_5k5DNsCCuw@mail.gmail.com>
Message-ID: <alpine.LRH.2.21.1803180824330.2641@warden.aitchison.me.uk>

On Sun, 18 Mar 2018, Ouwen Huang wrote:

> I feel quite silly, but it seems that the `gdal.Open` was actually opening
> the file from the docker mounted NFS, just very slowly. I left it to run
> for 2 minutes or so and it returned.
>
> But this is weird behavior because on the host a `*Dataset` was returned
> instantly, and within the docker container running `cp
> /mnt/efs/<my_geo.tiff>  <docker_local_dir` is also instant. The 2min
> latency seems to only occur within a docker mounted network filesystem for
> the `gdal.Open` command.
>
> Some other findings, the `/mnt/efs/` directory i'm using has several files
> (100k+). When I move the geotiff under a new directory within EFS
> (`mnt/efs/test`), the `gdal.Open` command is instant within the docker
> container.
>
> Is there a reason why `gdal.Open` is slow for a cluttered directory but
> unix `cp` is not?

http://www.gdal.org/classGDALOpenInfo.html
talks about "sibling" files; that is other files in the same directory.
These are opened at the same time for some reason.

https://trac.osgeo.org/gdal/ticket/2158 suggests that the environment 
variable GDAL_DISABLE_READDIR_ON_OPEN should disable this.


-- 
Andrew C. Aitchison					Cambridge, UK
 			andrew at aitchison.me.uk

From even.rouault at spatialys.com  Sun Mar 18 10:07:37 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 18 Mar 2018 18:07:37 +0100
Subject: [gdal-dev] GDAL + Docker with NFS
In-Reply-To: <alpine.LRH.2.21.1803180824330.2641@warden.aitchison.me.uk>
References: <CAHYE1b8eoWOS51q12Wdux+tVTkuTzNhD-6QeVwNvXA5M-idjCw@mail.gmail.com>
 <CAHYE1b8Xna3dzOU5fyixhwAixNO4rY62Rf7K2ec_5k5DNsCCuw@mail.gmail.com>
 <alpine.LRH.2.21.1803180824330.2641@warden.aitchison.me.uk>
Message-ID: <2877783.Yr33SyeDha@even-i700>

On dimanche 18 mars 2018 08:32:49 CET Andrew C Aitchison wrote:
> On Sun, 18 Mar 2018, Ouwen Huang wrote:
> > I feel quite silly, but it seems that the `gdal.Open` was actually opening
> > the file from the docker mounted NFS, just very slowly. I left it to run
> > for 2 minutes or so and it returned.
> > 
> > But this is weird behavior because on the host a `*Dataset` was returned
> > instantly, and within the docker container running `cp
> > /mnt/efs/<my_geo.tiff>  <docker_local_dir` is also instant. The 2min
> > latency seems to only occur within a docker mounted network filesystem for
> > the `gdal.Open` command.
> > 
> > Some other findings, the `/mnt/efs/` directory i'm using has several files
> > (100k+). When I move the geotiff under a new directory within EFS
> > (`mnt/efs/test`), the `gdal.Open` command is instant within the docker
> > container.
> > 
> > Is there a reason why `gdal.Open` is slow for a cluttered directory but
> > unix `cp` is not?
> 
> http://www.gdal.org/classGDALOpenInfo.html
> talks about "sibling" files; that is other files in the same directory.
> These are opened at the same time for some reason.
> 
> https://trac.osgeo.org/gdal/ticket/2158 suggests that the environment
> variable GDAL_DISABLE_READDIR_ON_OPEN should disable this.

I was going to suggest that as well. See
https://trac.osgeo.org/gdal/wiki/ConfigOptions#GDAL_DISABLE_READDIR_ON_OPEN

Try GDAL_DISABLE_READDIR_ON_OPEN=TRUE as environment variable.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Mar 19 06:25:07 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 19 Mar 2018 14:25:07 +0100
Subject: [gdal-dev] Trac to GitHub
In-Reply-To: <CABUeae9GdvtdZ7Cg79=g7JE1b-m1qtAbAw7oS79G-afUCNvVbw@mail.gmail.com>
References: <CABUeae9GdvtdZ7Cg79=g7JE1b-m1qtAbAw7oS79G-afUCNvVbw@mail.gmail.com>
Message-ID: <169056099.SrdXDh4dgT@even-i700>

Hi,

Adding gdal-dev into the loop to get more feedback.

I actually discussed about that with Howard yesterday, and he suggested an 
even easier and least-effort solution. Do we actually need to migrate the 
existing Trac ticket database to github ?

If not, we could just freeze Trac as read-only and decide that we just open 
the github repo for tickets...
What would be nice to do is to rewrite a bit the git history of the current 
mirror so that commit messages like "Fix blabla (fixes #1234)" as rewritten as 
"Fix blabla (fixes https://trac.osgeo.org/gdal/ticket/1234)"

A more complicated version of the above is that we would migrate only the open 
Trac tickets to github (so < 600 instead of 6000). And we would add in each 
open Trac ticket a message like "This ticket has been migated to https://
github.com/OSGeo/gdal/issue/4567", and close it. But that requires still some 
migration effort and deal with github API.
A simpler variant of the above would be just close all those open tickets, 
assigning them to some milestone "closed-before-github-migration" with a 
message "Issue reporting has now been migrated to https://github.com/OSGeo/
gdal/issues. If that issue is still valid, please file a ticket over there". 
That can be done simply in a few seconds from Trac UI with a "batch modifiy" 
action.

So to sum up my thoughts would be to:
1) Rewrite the github history (still need to figure out how to automate that) 
to fix references to Trac ticket, and force-push the result to github.com/
OSGeo/gdal. Note: that would invalidate current forks, so people with active 
work would probably have to rebase or to export as a patch and re-apply on top 
of updated Git repository.
2) Open github for filing tickets
3) Close all Trac tickets with assignment to a "closed-before-github-
migration" milestone, and a message "Issue reporting has now been migrated to 
https://github.com/OSGeo/gdal/issues..."
4) Remove TICKET_CREATE rights to authenticated users of Trac

Does that sound good ?

Even


On lundi 19 mars 2018 11:48:15 CET Mateusz Loskot wrote:
> Hi Even,
[...]
> I've just pushed some basic stab at exporting Trac to GitHub
> which I started prototyping in the beginning of October last year
> https://github.com/mloskot/trac-to-github
> 
> In October, Paul Ramsey released his bunch of scripts
> https://github.com/pramsey/postgis-to-github/
> which, I think, cover the procedure more completely
> and it's also based on GitHub API.
> Shortly, instead of continue my development, Paul's solution may be
> the way to go.
> I haven't tried to run Paul's scripts, so I don't know what technically
> is stopping the PostGIS migration, if anything.
> 
> Generally, I think GitHub API approach is the way to go.
> Annoyingly, the rate limits seem to lead to strange issues that I
> experienced (eg. adding or adding 30 labels, some are left over).
> This confirms what Thomas Bonfort was warning about and suggesting
> to reach out to GitHub support stating you are running a batch import.
> 
> I don't if Paul reached to GitHub support before performing PostGIS test
> import https://github.com/pramsey/postgis-gh/issues
> but it looks that a few thousands of tickets made it through.
> 
> I've taken the liberty to CC to Paul perhaps he could shed more light.
[...]
> 
> Best regards,


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Mar 19 06:48:36 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 19 Mar 2018 14:48:36 +0100
Subject: [gdal-dev] Motion: promote GDAL 2.2.4 RC1 for release
Message-ID: <1584256.k96FF9gNpd@even-i700>

Hi,

(Combining both RC availability announcement and motion for vote)

I have prepared a GDAL/OGR 2.2.4 release candidate. It fixes 42 issues since 
2.2.3

Peek up an archive among the following ones (by ascending size):

  http://download.osgeo.org/gdal/2.2.4/gdal-2.2.4RC1.tar.xz
  http://download.osgeo.org/gdal/2.2.4/gdal-2.2.4RC1.tar.gz
  http://download.osgeo.org/gdal/2.2.4/gdal224RC1.zip

A snapshot of the GDAL GRASS plugin is also available (unchanged since 2.2.0)

  http://download.osgeo.org/gdal/2.2.4/gdal-grass-2.2.4RC1.tar.gz

A snapshot of the gdalautotest suite is also available :

  http://download.osgeo.org/gdal/2.2.4/gdalautotest-2.2.4RC1.tar.gz
  http://download.osgeo.org/gdal/2.2.4/gdalautotest-2.2.4RC1.zip

The NEWS file is here :

  http://trac.osgeo.org/gdal/wiki/Release/2.2.4-News

Note for packagers: I've compared the 2.2.3 and 2.2.4 sources and there's no 
change at all in the C or C++ API, so this should be (as expected) a drop-in 
replacement for GDAL 2.2.3 not requiring reverse dependencies to be rebuilt.

~~~~~

Motion: promote GDAL 2.2.4 RC1 for release

Starting with my +1

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From szekerest at gmail.com  Mon Mar 19 06:55:14 2018
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon, 19 Mar 2018 14:55:14 +0100
Subject: [gdal-dev] Trac to GitHub
In-Reply-To: <169056099.SrdXDh4dgT@even-i700>
References: <CABUeae9GdvtdZ7Cg79=g7JE1b-m1qtAbAw7oS79G-afUCNvVbw@mail.gmail.com>
 <169056099.SrdXDh4dgT@even-i700>
Message-ID: <CACALY+Rj4bN4FNm6u_T+SPzJEW-NXwLQcA=hahUo8=r5cRpWVg@mail.gmail.com>

I don't think the trac tickets should be closed automatically. The ticket
owners should decide either to close (with a meaningful comment) or copy
it's variant to github if necessary.
I'm fine with option #2 and #4 and preserving/updating the history would be
a plus, but not a necessary requirement.

Best regards,

Tamas



2018-03-19 14:25 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:

> Hi,
>
> Adding gdal-dev into the loop to get more feedback.
>
> I actually discussed about that with Howard yesterday, and he suggested an
> even easier and least-effort solution. Do we actually need to migrate the
> existing Trac ticket database to github ?
>
> If not, we could just freeze Trac as read-only and decide that we just open
> the github repo for tickets...
> What would be nice to do is to rewrite a bit the git history of the current
> mirror so that commit messages like "Fix blabla (fixes #1234)" as
> rewritten as
> "Fix blabla (fixes https://trac.osgeo.org/gdal/ticket/1234)"
>
> A more complicated version of the above is that we would migrate only the
> open
> Trac tickets to github (so < 600 instead of 6000). And we would add in each
> open Trac ticket a message like "This ticket has been migated to https://
> github.com/OSGeo/gdal/issue/4567", and close it. But that requires still
> some
> migration effort and deal with github API.
> A simpler variant of the above would be just close all those open tickets,
> assigning them to some milestone "closed-before-github-migration" with a
> message "Issue reporting has now been migrated to
> https://github.com/OSGeo/
> gdal/issues. If that issue is still valid, please file a ticket over
> there".
> That can be done simply in a few seconds from Trac UI with a "batch
> modifiy"
> action.
>
> So to sum up my thoughts would be to:
> 1) Rewrite the github history (still need to figure out how to automate
> that)
> to fix references to Trac ticket, and force-push the result to github.com/
> OSGeo/gdal. Note: that would invalidate current forks, so people with
> active
> work would probably have to rebase or to export as a patch and re-apply on
> top
> of updated Git repository.
> 2) Open github for filing tickets
> 3) Close all Trac tickets with assignment to a "closed-before-github-
> migration" milestone, and a message "Issue reporting has now been migrated
> to
> https://github.com/OSGeo/gdal/issues..."
> 4) Remove TICKET_CREATE rights to authenticated users of Trac
>
> Does that sound good ?
>
> Even
>
>
> On lundi 19 mars 2018 11:48:15 CET Mateusz Loskot wrote:
> > Hi Even,
> [...]
> > I've just pushed some basic stab at exporting Trac to GitHub
> > which I started prototyping in the beginning of October last year
> > https://github.com/mloskot/trac-to-github
> >
> > In October, Paul Ramsey released his bunch of scripts
> > https://github.com/pramsey/postgis-to-github/
> > which, I think, cover the procedure more completely
> > and it's also based on GitHub API.
> > Shortly, instead of continue my development, Paul's solution may be
> > the way to go.
> > I haven't tried to run Paul's scripts, so I don't know what technically
> > is stopping the PostGIS migration, if anything.
> >
> > Generally, I think GitHub API approach is the way to go.
> > Annoyingly, the rate limits seem to lead to strange issues that I
> > experienced (eg. adding or adding 30 labels, some are left over).
> > This confirms what Thomas Bonfort was warning about and suggesting
> > to reach out to GitHub support stating you are running a batch import.
> >
> > I don't if Paul reached to GitHub support before performing PostGIS test
> > import https://github.com/pramsey/postgis-gh/issues
> > but it looks that a few thousands of tickets made it through.
> >
> > I've taken the liberty to CC to Paul perhaps he could shed more light.
> [...]
> >
> > Best regards,
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180319/dc8e5ef7/attachment.html>

From even.rouault at spatialys.com  Mon Mar 19 07:15:06 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 19 Mar 2018 15:15:06 +0100
Subject: [gdal-dev] Trac to GitHub
In-Reply-To: <CACALY+Rj4bN4FNm6u_T+SPzJEW-NXwLQcA=hahUo8=r5cRpWVg@mail.gmail.com>
References: <CABUeae9GdvtdZ7Cg79=g7JE1b-m1qtAbAw7oS79G-afUCNvVbw@mail.gmail.com>
 <169056099.SrdXDh4dgT@even-i700>
 <CACALY+Rj4bN4FNm6u_T+SPzJEW-NXwLQcA=hahUo8=r5cRpWVg@mail.gmail.com>
Message-ID: <4008197.BS2L8QbmBl@even-i700>

On lundi 19 mars 2018 14:55:14 CET Tamas Szekeres wrote:
> I don't think the trac tickets should be closed automatically. The ticket
> owners should decide either to close (with a meaningful comment) or copy
> it's variant to github if necessary.
> I'm fine with option #2 and #4 and preserving/updating the history would be
> a plus, but not a necessary requirement.

Yeah, we could still allow modifying existing tickets in Trac, but disable 
creation of new ones. If fixing a Trac ticket in git, the committer should 
make sure to add a manual message to the Trac ticket referencing the commit, 
but that's acceptable I guess.

The advantage of 3) (close all tickets) is that it would be a good way to get 
rid of a lot of historical tickets still opened but about which nobody really 
takes care about.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Mon Mar 19 08:21:13 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Mon, 19 Mar 2018 15:21:13 +0000
Subject: [gdal-dev] Any good alternative for the Timeline of Trac available
	in GitHub?
Message-ID: <ed85b4aa55614e71b4bb00870e922cc3@C119S212VM042.msvyvi.vaha.local>

Hi,

I see that GDAL is going to move into GitHub. What I will certainly miss it the Timeline of Trac. For a curious reader like me it gives an excellent view to anything that happens in the project. Is it so that the closest to Timeline that GitHub can offer is the Pulse view (for example https://github.com/mapserver/mapserver/pulse/monthly) and that does not offer a way to look any farther in the history than the last month?

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180319/cf00bca0/attachment.html>

From philippe.ghesquiere at airbus.com  Mon Mar 19 08:29:35 2018
From: philippe.ghesquiere at airbus.com (Bugbuster)
Date: Mon, 19 Mar 2018 08:29:35 -0700 (MST)
Subject: [gdal-dev] GeoPDF with a KML layer and a rotated GeoTIFF layer
Message-ID: <1521473375348-0.post@n6.nabble.com>

Dear all,

I try to create a GeoPDF file with 2 layers:
1) Raster layer: a Geotiff image (*lena_rot.tif*) with a
ModelTransformationTag model, with respect to EPSG:4326.
The image has a rotation angle (~40° wrt to North).
2) Vector layer: the KML file (*rectangle.kml*) contains a single
rectangular shape. Each segment is parallel to either longitude or latitude
direction (i.e. no rotation angle)

The command line to create the PDF file is the following:


In the resulting PDF file, *lena_rot.tif.pdf*, I can check the location
model with Acrobat Reader:
1) the raster layer is correctly located. However, it is no resampled
(warped or whatever).
Only the cursor location is displayed correctly. This sounds good to me so
far: I do not expect the PDF export to do any warping.
2) the vector layer is not rotated. Thus, the vertex location in EPSG:4326
are wrong. 

Then I convert my PDF file back to GeoTIFF (*lena_rot.tif.pdf.tif*):

I observe the same problem. Which tells that the error is not due to Acrobat
Reader.

Obviously, both vector and raster layers are not in the same referential.
Could you tell me what I am missing in the PDF export ?
I tried to embed the KML file into a VRT file with a *<Geotransform>* tag
with no success.

Attached is a ZIP file containing :
* lena_rot.tif : original rotated GeoTIFF image
* rectangle.kml : KML file containing a rectangle
* lena_rot.tif.pdf : resulting PDF file
* lena_rot.tif.pdf.tif : PDF file converted back to GeoTIFF

Thanks for your help
Philippe




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Mon Mar 19 09:42:56 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 19 Mar 2018 17:42:56 +0100
Subject: [gdal-dev] Trac to GitHub
In-Reply-To: <4008197.BS2L8QbmBl@even-i700>
References: <CABUeae9GdvtdZ7Cg79=g7JE1b-m1qtAbAw7oS79G-afUCNvVbw@mail.gmail.com>
 <CACALY+Rj4bN4FNm6u_T+SPzJEW-NXwLQcA=hahUo8=r5cRpWVg@mail.gmail.com>
 <4008197.BS2L8QbmBl@even-i700>
Message-ID: <39016582.Kq4gFkLMle@even-i700>

Regarding my point 1), I've experimented locally on my git clone to rewrite references
to Trac tickets like "fix #1234" to become "fix https://trac.osgeo.org/gdal/ticket/1234"

with

git filter-branch -f --msg-filter 'python /home/even/rewrite.py'  -- trunk

where rewrite.py is

{{{
import sys
msg = sys.stdin.read()

# Don't touch messages that reference other databases
if msg.find('MITAB bug ') >= 0 or msg.find('Safe bug ') >= 0 or msg.find('bugzilla') >= 0 or msg.find('Bugzilla') >= 0:
    sys.stdout.write(msg)
    sys.exit(0)

oldpos = 0
old_msg = msg
while True:

    # We already have reference to github pull requests written like
    # 'github #1234', so skip them
    newpos = msg.find('github #', oldpos)
    if newpos >= 0:
        oldpos = newpos + len('github #')
        continue

    # Exception...
    newpos = msg.find('patch #1 ', oldpos)
    if newpos >= 0:
        oldpos = newpos + len('patch #1 ')
        continue

    # Exception...
    newpos = msg.find('bug 1 ', oldpos)
    if newpos >= 0:
        oldpos = newpos + len('bug 1 ')
        continue

    # Fix 'bug 1234'
    newpos = msg.find('bug ', oldpos)
    if newpos >= 0:
        if newpos == len(msg) - 4:
            break
        if not(msg[newpos+4] >= '1' and msg[newpos+4] <= '9'):
            oldpos = newpos + 4
            continue

        msg = msg[0:newpos] + 'https://trac.osgeo.org/gdal/ticket/' + msg[newpos+4:]
        oldpos = newpos
        continue

    # Fix 'ticket 1234'
    newpos = msg.find('ticket ', oldpos)
    if newpos >= 0:
        if newpos == len(msg) - 7:
            break
        if not(msg[newpos+7] >= '1' and msg[newpos+7] <= '9'):
            oldpos = newpos + 7
            continue

        msg = msg[0:newpos] + 'https://trac.osgeo.org/gdal/ticket/' + msg[newpos+7:]
        oldpos = newpos
        continue

    # Fix '#1234'
    newpos = msg.find('#', oldpos)
    if newpos >= 0:
        if newpos == len(msg) - 1:
            break
        if not(msg[newpos+1] >= '1' and msg[newpos+1] <= '9'):
            oldpos = newpos + 1
            continue

        # Skip stacktraces like '#1 0xdeadbeef'
        space_pos = msg.find(' ', newpos)
        if space_pos > 0 and space_pos + 2 < len(msg) and msg[space_pos + 1] == '0' and msg[space_pos + 2] == 'x':
            oldpos = newpos + 1
            continue

        msg = msg[0:newpos] + 'https://trac.osgeo.org/gdal/ticket/' + msg[newpos+1:]
        oldpos = newpos
        continue

    break

if msg != old_msg:
    f = open('/tmp/log.txt', 'a')
    f.write('Old message was:\n' + old_msg + 'New message is:\n' + msg + '\n')
    f.close()

sys.stdout.write(msg)
}}}


I'v uploaded the log of the changes (the content of /tmp/log.txt) in http://even.rouault.free.fr/log.txt
It shows the original and modified commit messages (just for commits for which a modification was done)
In case you have the motivation to actually review it, let me know if you see some weird things in it...

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mateusz at loskot.net  Mon Mar 19 09:48:49 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 19 Mar 2018 17:48:49 +0100
Subject: [gdal-dev] Trac to GitHub
In-Reply-To: <4008197.BS2L8QbmBl@even-i700>
References: <CABUeae9GdvtdZ7Cg79=g7JE1b-m1qtAbAw7oS79G-afUCNvVbw@mail.gmail.com>
 <169056099.SrdXDh4dgT@even-i700>
 <CACALY+Rj4bN4FNm6u_T+SPzJEW-NXwLQcA=hahUo8=r5cRpWVg@mail.gmail.com>
 <4008197.BS2L8QbmBl@even-i700>
Message-ID: <CABUeae_mH9rbJvCsVShectyAjcOBYP8Qv9BPmivR4=J6HCp5Ww@mail.gmail.com>

On 19 March 2018 at 15:15, Even Rouault <even.rouault at spatialys.com> wrote:
> On lundi 19 mars 2018 14:55:14 CET Tamas Szekeres wrote:
>> I don't think the trac tickets should be closed automatically. The ticket
>> owners should decide either to close (with a meaningful comment) or copy
>> it's variant to github if necessary.
>> I'm fine with option #2 and #4 and preserving/updating the history would be
>> a plus, but not a necessary requirement.
>
> Yeah, we could still allow modifying existing tickets in Trac, but disable
> creation of new ones. If fixing a Trac ticket in git, the committer should
> make sure to add a manual message to the Trac ticket referencing the commit,
> but that's acceptable I guess.
>
> The advantage of 3) (close all tickets) is that it would be a good way to get
> rid of a lot of historical tickets still opened but about which nobody really
> takes care about.

Even,

If you see such puring as beneficial yourself, as the principal maintainer,
I see no reason to object.
If OP of a closed ticked does not come back, it could be interpreted as
either an issue is no longer an issue or OP is no longer interested in
solveing it.

Switching Trac to read-only, completely, would stop any activities
there (eg. commenting)
what I think would be good to kickstart actual switch to GitHub.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From mateusz at loskot.net  Mon Mar 19 09:53:03 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 19 Mar 2018 17:53:03 +0100
Subject: [gdal-dev] Trac to GitHub
In-Reply-To: <169056099.SrdXDh4dgT@even-i700>
References: <CABUeae9GdvtdZ7Cg79=g7JE1b-m1qtAbAw7oS79G-afUCNvVbw@mail.gmail.com>
 <169056099.SrdXDh4dgT@even-i700>
Message-ID: <CABUeae-7aHojSjKpxCYde4LnZk_Y8=t+X+3iHH7fGtsJgohQ8g@mail.gmail.com>

On 19 March 2018 at 14:25, Even Rouault <even.rouault at spatialys.com> wrote:
> I actually discussed about that with Howard yesterday, and he suggested an
> even easier and least-effort solution. Do we actually need to migrate the
> existing Trac ticket database to github ?

I'm glad Howard came up with suggestion to simplify :-)

I think this will help us avoid issues with GitHub API,
or artificial owner of issues (a bot user) and some others that
Paul Ramsey encountered (there are some discussed in IRC logs).

> So to sum up my thoughts would be to:
> 1) Rewrite the github history (still need to figure out how to automate that)
> to fix references to Trac ticket, and force-push the result to github.com/
> OSGeo/gdal. Note: that would invalidate current forks, so people with active
> work would probably have to rebase or to export as a patch and re-apply on top
> of updated Git repository.
> 2) Open github for filing tickets
> 3) Close all Trac tickets with assignment to a "closed-before-github-
> migration" milestone, and a message "Issue reporting has now been migrated to
> https://github.com/OSGeo/gdal/issues..."

I guess, you mean manual action, if you need help, I can do this monkey
job in the evening(s). Let me know.

> Does that sound good ?

To me, it does.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From mateusz at loskot.net  Mon Mar 19 09:58:44 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 19 Mar 2018 17:58:44 +0100
Subject: [gdal-dev] Trac to GitHub
In-Reply-To: <39016582.Kq4gFkLMle@even-i700>
References: <CABUeae9GdvtdZ7Cg79=g7JE1b-m1qtAbAw7oS79G-afUCNvVbw@mail.gmail.com>
 <CACALY+Rj4bN4FNm6u_T+SPzJEW-NXwLQcA=hahUo8=r5cRpWVg@mail.gmail.com>
 <4008197.BS2L8QbmBl@even-i700> <39016582.Kq4gFkLMle@even-i700>
Message-ID: <CABUeae9Dxq_eLBfNzgtVbm3H-faf8Z29_2UKELOeo5GijzfQ4g@mail.gmail.com>

On 19 March 2018 at 17:42, Even Rouault <even.rouault at spatialys.com> wrote:
> Regarding my point 1), I've experimented locally on my git clone to rewrite references
> to Trac tickets like "fix #1234" to become "fix https://trac.osgeo.org/gdal/ticket/1234"

Looks good.

> with
>
> git filter-branch -f --msg-filter 'python /home/even/rewrite.py'  -- trunk
> [...]

You lost me shortly after the while True, I suck at advanced git terribly :)

> I'v uploaded the log of the changes (the content of /tmp/log.txt) in http://even.rouault.free.fr/log.txt
> It shows the original and modified commit messages (just for commits for which a modification was done)
> In case you have the motivation to actually review it, let me know if you see some weird things in it...

Slight chance, I suspect, there are numbers that denote reference to
ticket in the old GDAL Bugzilla,
but this shold not be an issue if it gets replaced with the Trac URL.
The main goal is to apply semantic to the raw numbers, even fi the URL
gets broken
in future (eg. read-only GDAL Trac moves to some archives server).

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From even.rouault at spatialys.com  Mon Mar 19 10:14:32 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 19 Mar 2018 18:14:32 +0100
Subject: [gdal-dev] Trac to GitHub
In-Reply-To: <CABUeae9Dxq_eLBfNzgtVbm3H-faf8Z29_2UKELOeo5GijzfQ4g@mail.gmail.com>
References: <CABUeae9GdvtdZ7Cg79=g7JE1b-m1qtAbAw7oS79G-afUCNvVbw@mail.gmail.com>
 <39016582.Kq4gFkLMle@even-i700>
 <CABUeae9Dxq_eLBfNzgtVbm3H-faf8Z29_2UKELOeo5GijzfQ4g@mail.gmail.com>
Message-ID: <2404142.pbqJpEfOkq@even-i700>

Mateuze,

Answering several of your points of your last emails;

>> 3) Close all Trac tickets with assignment to a "closed-before-github-
>> migration" milestone, and a message "Issue reporting has now been migrated >to
> https://github.com/OSGeo/gdal/issues..."
>
>I guess, you mean manual action

Manual action, but lukily to be done just once for all tickets (batch action)

Basically open
https://trac.osgeo.org/gdal/query?status=assigned&status=new&status=reopened&max=1000

and if you have the sufficient rights, click on the top-left checkbox to select all the tickets,
go to the bottom to the "Batch modify" tab, and define a milestone, add a comment and click on "Change tickets"
So a 1-minute action.

> > 
> > git filter-branch -f --msg-filter 'python /home/even/rewrite.py'  -- trunk
> > [...]
> 
> You lost me shortly after the while True, I suck at advanced git terribly :)

Huh that's just my-not-so-idiomatic Python hacking to parse the old commit message and change it ;-)

> > I'v uploaded the log of the changes (the content of /tmp/log.txt) in
> > http://even.rouault.free.fr/log.txt It shows the original and modified
> > commit messages (just for commits for which a modification was done) In
> > case you have the motivation to actually review it, let me know if you
> > see some weird things in it...
> Slight chance, I suspect, there are numbers that denote reference to
> ticket in the old GDAL Bugzilla,
> but this shold not be an issue if it gets replaced with the Trac URL.

I did try to avoid rewriting those commit messages that refered to the old (and now disappeared) bugzilla

> The main goal is to apply semantic to the raw numbers, even fi the URL
> gets broken
> in future (eg. read-only GDAL Trac moves to some archives server).

Yes the point is to make it obvious that those are references to Trac and not github issues.

I'm preparing a RFC to summarize various aspects and have some official plan that can be discussed.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mateusz at loskot.net  Mon Mar 19 10:32:22 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 19 Mar 2018 18:32:22 +0100
Subject: [gdal-dev] Trac to GitHub
In-Reply-To: <2404142.pbqJpEfOkq@even-i700>
References: <CABUeae9GdvtdZ7Cg79=g7JE1b-m1qtAbAw7oS79G-afUCNvVbw@mail.gmail.com>
 <39016582.Kq4gFkLMle@even-i700>
 <CABUeae9Dxq_eLBfNzgtVbm3H-faf8Z29_2UKELOeo5GijzfQ4g@mail.gmail.com>
 <2404142.pbqJpEfOkq@even-i700>
Message-ID: <CABUeae-Q89UPfCW2efTb=0mx06MVnCTAQAg1YFkgF-UTFLTpfA@mail.gmail.com>

On 19 March 2018 at 18:14, Even Rouault <even.rouault at spatialys.com> wrote:
>>> 3) Close all Trac tickets with assignment to a "closed-before-github-
>>> migration" milestone, and a message "Issue reporting has now been migrated >to
>> https://github.com/OSGeo/gdal/issues..."
>>
>>I guess, you mean manual action
>
> Manual action, but lukily to be done just once for all tickets (batch action)
>
> Basically open
> https://trac.osgeo.org/gdal/query?status=assigned&status=new&status=reopened&max=1000
>
> and if you have the sufficient rights, click on the top-left checkbox to select all the tickets,
> go to the bottom to the "Batch modify" tab, and define a milestone, add a comment and click on "Change tickets"
> So a 1-minute action.

THAT, I can do ;)


>> > git filter-branch -f --msg-filter 'python /home/even/rewrite.py'  -- trunk
>> > [...]
>>
>> You lost me shortly after the while True, I suck at advanced git terribly :)
>
> Huh that's just my-not-so-idiomatic Python hacking to parse the old commit message and change it ;-)

Actually, it was `git filter-branch` that already sent me off :)


>> The main goal is to apply semantic to the raw numbers, even fi the URL>> gets broken
>> in future (eg. read-only GDAL Trac moves to some archives server).
>
> Yes the point is to make it obvious that those are references to Trac and not github issues.
>
> I'm preparing a RFC to summarize various aspects and have some official plan that can be discussed.

Thank you!

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From ben.elliston at anu.edu.au  Mon Mar 19 13:04:05 2018
From: ben.elliston at anu.edu.au (Ben Elliston)
Date: Tue, 20 Mar 2018 07:04:05 +1100
Subject: [gdal-dev] Trac to GitHub
In-Reply-To: <169056099.SrdXDh4dgT@even-i700>
References: <CABUeae9GdvtdZ7Cg79=g7JE1b-m1qtAbAw7oS79G-afUCNvVbw@mail.gmail.com>
 <169056099.SrdXDh4dgT@even-i700>
Message-ID: <10f8f447-abcd-1cd2-14e6-78e192b451da@anu.edu.au>

On 20/03/18 00:25, Even Rouault wrote:

> I actually discussed about that with Howard yesterday, and he suggested an 
> even easier and least-effort solution. Do we actually need to migrate the 
> existing Trac ticket database to github ?

This brings up another thing I have been wondering about: when will the
GDAL source tree be moved from Subversion to git?  It's problematic
working with an SVN mirror.

Cheers, Ben

From even.rouault at spatialys.com  Mon Mar 19 13:40:22 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 19 Mar 2018 21:40:22 +0100
Subject: [gdal-dev] Call for discussion for RFC 71: Migration to GitHub
Message-ID: <2552894.NEscHgrYUu@even-i700>

Hi,

To follow our processes, I've initiated a RFC related to the migration to 
GitHub

https://trac.osgeo.org/gdal/wiki/rfc71_github_migration

In the hope to finally go from recuring discussions that have occured during 
the past years to a concrete end result, I've clearly simplified the process 
to minimize the amount of work (so no migration from Trac tickets to github 
issues). Ideally I'd like to see steps 0. to 7. done during this week at the 
OSGeo code sprint, so please give your feedback quickly.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mateusz at loskot.net  Mon Mar 19 13:58:40 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 19 Mar 2018 21:58:40 +0100
Subject: [gdal-dev] Call for discussion for RFC 71: Migration to GitHub
In-Reply-To: <2552894.NEscHgrYUu@even-i700>
References: <2552894.NEscHgrYUu@even-i700>
Message-ID: <CABUeae8iZjEEWmZe3e7tYkZt7oWp+uB2o8f1+OsAh=0_qFrxYA@mail.gmail.com>

On 19 March 2018 at 21:40, Even Rouault <even.rouault at spatialys.com> wrote:
> Hi,
>
> To follow our processes, I've initiated a RFC related to the migration to
> GitHub
>
> https://trac.osgeo.org/gdal/wiki/rfc71_github_migration

A few comments:

"5. The cron job on the OSGeo server that refreshes the website (...)"

Perhaps, at some point this could move to gh-pages completely.

"Most visible Trac wiki documentation will have to be revised to point
to GitHub?"

I think, this means the content is copied to GitHub wiki.

Once completed, perhaps all pages from the Trac wiki could be wiped out,
then no web crawlers would keep indexing it, etc.

> In the hope to finally go from recuring discussions that have occured during
> the past years to a concrete end result, I've clearly simplified the process
> to minimize the amount of work (so no migration from Trac tickets to github
> issues). Ideally I'd like to see steps 0. to 7. done during this week at the
> OSGeo code sprint, so please give your feedback quickly.

Thank you Even for taking over the lead.

I'll still help with the further actions.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From even.rouault at spatialys.com  Mon Mar 19 14:17:30 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 19 Mar 2018 22:17:30 +0100
Subject: [gdal-dev] Call for discussion for RFC 71: Migration to GitHub
In-Reply-To: <CABUeae8iZjEEWmZe3e7tYkZt7oWp+uB2o8f1+OsAh=0_qFrxYA@mail.gmail.com>
References: <2552894.NEscHgrYUu@even-i700>
 <CABUeae8iZjEEWmZe3e7tYkZt7oWp+uB2o8f1+OsAh=0_qFrxYA@mail.gmail.com>
Message-ID: <1663540.TnJsf7unuB@even-i700>

> Perhaps, at some point this could move to gh-pages completely.
> 

Possibly, I don't see any emergency for that.

> "Most visible Trac wiki documentation will have to be revised to point
> to GitHub?"

I meant everywhere we mention svn, we should point to git/github.

> 
> I think, this means the content is copied to GitHub wiki.

I've not given any thoughts about that right now. I excluded it from the scope 
of this RFC (see "not covered by this RFC section") so as to keep focused on 
the most minimum set of things needed to have a github-based workflow for code 
changes & ticket management.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mateusz at loskot.net  Mon Mar 19 14:25:20 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 19 Mar 2018 22:25:20 +0100
Subject: [gdal-dev] Call for discussion for RFC 71: Migration to GitHub
In-Reply-To: <1663540.TnJsf7unuB@even-i700>
References: <2552894.NEscHgrYUu@even-i700>
 <CABUeae8iZjEEWmZe3e7tYkZt7oWp+uB2o8f1+OsAh=0_qFrxYA@mail.gmail.com>
 <1663540.TnJsf7unuB@even-i700>
Message-ID: <CABUeae8gXKZRL=yB4FMYkhXAY7ftM6dKz8A+kyn7YTcUxwac-w@mail.gmail.com>

On 19 March 2018 at 22:17, Even Rouault <even.rouault at spatialys.com> wrote:
>>
>> "Most visible Trac wiki documentation will have to be revised to point
>> to GitHub?"
>
> I meant everywhere we mention svn, we should point to git/github.
>
>> I think, this means the content is copied to GitHub wiki.
>
> I've not given any thoughts about that right now. I excluded it from the scope
> of this RFC (see "not covered by this RFC section") so as to keep focused on
> the most minimum set of things needed to have a github-based workflow for code
> changes & ticket management.

Even,

Sorry, I must have misunderstood those points.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From ben.elliston at anu.edu.au  Mon Mar 19 16:34:38 2018
From: ben.elliston at anu.edu.au (Ben Elliston)
Date: Tue, 20 Mar 2018 10:34:38 +1100
Subject: [gdal-dev] Trac to GitHub
In-Reply-To: <169056099.SrdXDh4dgT@even-i700>
References: <CABUeae9GdvtdZ7Cg79=g7JE1b-m1qtAbAw7oS79G-afUCNvVbw@mail.gmail.com>
 <169056099.SrdXDh4dgT@even-i700>
Message-ID: <1271bac2-cf95-42fd-9a13-5a521bb4e8fd@anu.edu.au>

On 20/03/18 00:25, Even Rouault wrote:

> A more complicated version of the above is that we would migrate only the open 
> Trac tickets to github (so < 600 instead of 6000). And we would add in each 
> open Trac ticket a message like "This ticket has been migated to https://
> github.com/OSGeo/gdal/issue/4567", and close it. But that requires still some 
> migration effort and deal with github API.

I think it makes sense to migrate the open tickets. Users go to the
trouble of reporting problems and they should all be investigated (at
some stage).

To my mind, there is an issued about what to do about closed tickets.
It's convenient to not have to search for bu reports in two different
places when trying to search for the history of a bug. So I think there
may also be justification for migtating the closed tickets.

It all comes down to how difficult the migration process is.

Cheers, Ben

From ben.elliston at anu.edu.au  Mon Mar 19 16:45:19 2018
From: ben.elliston at anu.edu.au (Ben Elliston)
Date: Tue, 20 Mar 2018 10:45:19 +1100
Subject: [gdal-dev] Call for discussion for RFC 71: Migration to GitHub
In-Reply-To: <2552894.NEscHgrYUu@even-i700>
References: <2552894.NEscHgrYUu@even-i700>
Message-ID: <ae875116-a935-09ed-6fb9-63fc7a6cc557@anu.edu.au>

On 20/03/18 07:40, Even Rouault wrote:

> https://trac.osgeo.org/gdal/wiki/rfc71_github_migration

+1

From philippe.ghesquiere at airbus.com  Tue Mar 20 00:46:34 2018
From: philippe.ghesquiere at airbus.com (Bugbuster)
Date: Tue, 20 Mar 2018 00:46:34 -0700 (MST)
Subject: [gdal-dev] GeoPDF with a KML layer and a rotated GeoTIFF layer
In-Reply-To: <1521473375348-0.post@n6.nabble.com>
References: <1521473375348-0.post@n6.nabble.com>
Message-ID: <1521531994591-0.post@n6.nabble.com>

Oups sorry for my uncomplete message : "raw" tags are not well handled.
Below is the GDAL command I used to create my GeoPDF image:
gdal_translate.exe -of PDF --config LIBKML_RESOLVE_STYLE YES \
		   -co OGR_DATASOURCE=rectangle.kml \
		   -co LAYER_NAME=lena lena_rot.tif \
		   lena_rot.tif.pdf

Below, the next command to convert the GeoPDF image back to GeoTIFF :
gdal_translate -of GTiff lena_rot.tif.pdf lena_rot.tif.pdf.tif

Philippe



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From ao at t-kartor.se  Tue Mar 20 01:38:58 2018
From: ao at t-kartor.se (Andreas Oxenstierna)
Date: Tue, 20 Mar 2018 09:38:58 +0100
Subject: [gdal-dev] GeoPDF with a KML layer and a rotated GeoTIFF layer
In-Reply-To: <1521531994591-0.post@n6.nabble.com>
References: <1521473375348-0.post@n6.nabble.com>
 <1521531994591-0.post@n6.nabble.com>
Message-ID: <a79fb19b-a063-799d-1a06-72b7a0ab5f9b@t-kartor.se>

Have you tested to include the OGR datasource in a VRT file instead, 
with the LayerSRS tag defined?

> Oups sorry for my uncomplete message : "raw" tags are not well handled.
> Below is the GDAL command I used to create my GeoPDF image:
> gdal_translate.exe -of PDF --config LIBKML_RESOLVE_STYLE YES \
> 		   -co OGR_DATASOURCE=rectangle.kml \
> 		   -co LAYER_NAME=lena lena_rot.tif \
> 		   lena_rot.tif.pdf
>
> Below, the next command to convert the GeoPDF image back to GeoTIFF :
> gdal_translate -of GTiff lena_rot.tif.pdf lena_rot.tif.pdf.tif
>
> Philippe
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Hälsningar

Andreas Oxenstierna
T-Kartor Geospatial AB
mobile: +46 733 206831
mailto: ao at t-kartor.se
http://www.t-kartor.com


From even.rouault at spatialys.com  Tue Mar 20 03:03:34 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 20 Mar 2018 11:03:34 +0100
Subject: [gdal-dev] GeoPDF with a KML layer and a rotated GeoTIFF layer
In-Reply-To: <1521473375348-0.post@n6.nabble.com>
References: <1521473375348-0.post@n6.nabble.com>
Message-ID: <1547476.BlrBV2Pzm9@even-i700>

Philippe,

the zip attachment didn't make its way to us but from what you're telling and 
a look at the code, I can indeed see that when writing a raster with 
rotational terms in the geotransform matrix, and vectors, the vector writing 
part will not work correctly taking into account those rotational terms.
A workaround would be to use gdalwarp to create a raster that is "north-up", 
before creating the PDF.

Even

> Dear all,
> 
> I try to create a GeoPDF file with 2 layers:
> 1) Raster layer: a Geotiff image (*lena_rot.tif*) with a
> ModelTransformationTag model, with respect to EPSG:4326.
> The image has a rotation angle (~40° wrt to North).
> 2) Vector layer: the KML file (*rectangle.kml*) contains a single
> rectangular shape. Each segment is parallel to either longitude or latitude
> direction (i.e. no rotation angle)
> 
> The command line to create the PDF file is the following:
> 
> 
> In the resulting PDF file, *lena_rot.tif.pdf*, I can check the location
> model with Acrobat Reader:
> 1) the raster layer is correctly located. However, it is no resampled
> (warped or whatever).
> Only the cursor location is displayed correctly. This sounds good to me so
> far: I do not expect the PDF export to do any warping.
> 2) the vector layer is not rotated. Thus, the vertex location in EPSG:4326
> are wrong.
> 
> Then I convert my PDF file back to GeoTIFF (*lena_rot.tif.pdf.tif*):
> 
> I observe the same problem. Which tells that the error is not due to Acrobat
> Reader.
> 
> Obviously, both vector and raster layers are not in the same referential.
> Could you tell me what I am missing in the PDF export ?
> I tried to embed the KML file into a VRT file with a *<Geotransform>* tag
> with no success.
> 
> Attached is a ZIP file containing :
> * lena_rot.tif : original rotated GeoTIFF image
> * rectangle.kml : KML file containing a rectangle
> * lena_rot.tif.pdf : resulting PDF file
> * lena_rot.tif.pdf.tif : PDF file converted back to GeoTIFF
> 
> Thanks for your help
> Philippe
> 
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From hellik at web.de  Tue Mar 20 08:28:20 2018
From: hellik at web.de (Helmut Kudrnovsky)
Date: Tue, 20 Mar 2018 08:28:20 -0700 (MST)
Subject: [gdal-dev] failing to open a PGeo database
Message-ID: <1521559700454-0.post@n6.nabble.com>

Hi,

I'm here on Debian GNU/Linux 9 (stretch) 64 Bit with

bugs at nada:~/gisdata/bik_pgeo$ ogrinfo --version
GDAL 2.2.3, released 2017/11/20

bugs at nada:~/gisdata/bik_pgeo$ ogrinfo --formats | grep PGeo
  PGeo -vector- (ro): ESRI Personal GeoDatabase

installed unixODBC and mdbtools

unixodbc 2.3.4-1
libodbc1 2.3.4-1

mdbtools 0.7.1-5
mdbtools-gmdb 0.7.1-5
odbc-mdbtools 0.7.1-5

according to the manual http://www.gdal.org/drv_pgeo.html:

[Microsoft Access Driver (*.mdb)]
Description = MDB Tools ODBC drivers
Driver     = /usr/lib/libmdbodbc.so.0
Setup      =
FileUsage  = 1
CPTimeout  =
CPReuse    =

this should be added to odbcinst.ini

here on this system:

bugs at nada:~/gisdata/bik_pgeo$ locate libmdbodbc
/usr/lib/x86_64-linux-gnu/odbc/libmdbodbc.so
/usr/lib/x86_64-linux-gnu/odbc/libmdbodbcW.so

according to the above, I've added following section to odbcinst.ini

[Microsoft Access Driver (*.mdb)]
Description = MDB Tools ODBC drivers
Driver     = /usr/lib/x86_64-linux-gnu/odbc/libmdbodbc.so
Setup      =
FileUsage  = 1
CPTimeout  =
CPReuse    =

then I try on the PGeo database:

-----------
bugs at nada:~/gisdata/bik_pgeo$ ogrinfo data.mdb 
ERROR 1: PGeo: MDB Tools driver not found!

Warning 1: Unable to install MDB driver for ODBC, MDB access may not
supported.

ERROR 1: Geomedia: MDB Tools driver not found!

Warning 1: Unable to install MDB driver for ODBC, MDB access may not
supported.

GAliasTable is not a table in this database
Got no result for 'SELECT TableName FROM GAliasTable WHERE TableType =
'INGRFeatures'' command
ERROR 1: Walk: MDB Tools driver not found!

Warning 1: Unable to install MDB driver for ODBC, MDB access may not
supported.

WalkLayers is not a table in this database
Got no result for 'SELECT LayerID, LayerName, minE, maxE, minN, maxN, Memo 
FROM WalkLayers' command
ERROR 1: PGeo: MDB Tools driver not found!

Warning 1: Unable to install MDB driver for ODBC, MDB access may not
supported.

ERROR 1: Geomedia: MDB Tools driver not found!

Warning 1: Unable to install MDB driver for ODBC, MDB access may not
supported.

GAliasTable is not a table in this database
Got no result for 'SELECT TableName FROM GAliasTable WHERE TableType =
'INGRFeatures'' command
ERROR 1: Walk: MDB Tools driver not found!

Warning 1: Unable to install MDB driver for ODBC, MDB access may not
supported.

WalkLayers is not a table in this database
Got no result for 'SELECT LayerID, LayerName, minE, maxE, minN, maxN, Memo 
FROM WalkLayers' command
FAILURE:
Unable to open datasource `data.mdb' with the following drivers.
  -> PCIDSK
[....]
-----------

or

-----------
bugs at nada:~/gisdata/bik_pgeo$ ogrinfo PGeo:data.mdb 
ERROR 1: PGeo: MDB Tools driver not found!

Warning 1: Unable to install MDB driver for ODBC, MDB access may not
supported.

ERROR 1: Unable to initialize ODBC connection to DSN for data.mdb,
[unixODBC][Driver Manager]Data source name not found, and no default driver
specified
ERROR 1: PGeo: MDB Tools driver not found!

Warning 1: Unable to install MDB driver for ODBC, MDB access may not
supported.

ERROR 1: Unable to initialize ODBC connection to DSN for data.mdb,
[unixODBC][Driver Manager]Data source name not found, and no default driver
specified
FAILURE:
Unable to open datasource `PGeo
-----------

any idea?

there is another section in odbcinst.ini; not added by me:

[MDBTools]
Description=MDBTools Driver
Driver=libmdbodbc.so
Setup=libmdbodbc.so
FileUsage=1
UsageCount=1










-----
best regards
Helmut
--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From philippe.ghesquiere at airbus.com  Tue Mar 20 10:08:51 2018
From: philippe.ghesquiere at airbus.com (Bugbuster)
Date: Tue, 20 Mar 2018 10:08:51 -0700 (MST)
Subject: [gdal-dev] GeoPDF with a KML layer and a rotated GeoTIFF layer
In-Reply-To: <1547476.BlrBV2Pzm9@even-i700>
References: <1521473375348-0.post@n6.nabble.com> <1547476.BlrBV2Pzm9@even-i700>
Message-ID: <1521565731450-0.post@n6.nabble.com>

Dear Even and Andreas,

thanks for your answers.
I did try with a VRT file, with the following :
* LayerSRS tag,
* use of OGRVRTWarpedLayer  layer type
with no success.

In fact I was trying to avoid Even's advice : warp the original image to
make it "north up". But if I understand it correctly, I will have no choice.

Philippe



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From steven.beale at woodplc.com  Tue Mar 20 11:37:34 2018
From: steven.beale at woodplc.com (Steven Beale)
Date: Tue, 20 Mar 2018 11:37:34 -0700 (MST)
Subject: [gdal-dev] gdal translate/warp goes16
Message-ID: <1521571054646-0.post@n6.nabble.com>

Hi gdalers, 

I'm a little out of my field here, usually I work with weather/climate data,
but I need to warp some goes16 satellite data. (source is aws s3:
https://noaa-goes16.s3.amazonaws.com/ABI-L2-CMIPF/2018/079/12/OR_ABI-L2-CMIPF-M3C01_G16_s20180791200447_e20180791211214_c20180791211280.nc
- the link should work for a few months then it will be glaciered and
unavailable) 

source data is netcdf, I'm using nco tools & gdal for the processing. 

My work flow is: 
1. clip the data to the region of interest (north atlantic): 
ncks -d x,5424,8678 -d y,0,2170 <raw.nc> step1.nc 
2. deflate & unscale 
gdal_translate -ot float32 -unscale -CO COMPRESS=deflate NETCDF:step1.nc:CMI
step2.tiff 
3. warp (in this case data is 1km resolution : ~0.009 degrees) 
gdalwarp -t_srs EPSG:4326 -dstnodata -999.0 -tr 0.009 0.009 -te 290 40 320
65  -r near step2.tiff step3.tiff 
4. convert back to nc 
gdal_translate -ot float32 -of NETCDF step3.tiff output.nc 

The problem i have is that the output has the longitude shifted to the west
by about 10 degrees. 
The issue seems related to the ncks clipping, if I exclude the x clip,
everything works out fine, but takes significantly longer. 
Here's an example once it's loaded into an erddap server; 
<http://osgeo-org.1560.x6.nabble.com/file/t382897/GOES16_L2CMIPF_M3C01_201803201200.png> 
You can see greenland to the west of it's map underlay. 

I'm using gdal v2.3.0, netcdf v4.4.1.1, nco v4.7.3 & proj4 v5.0.0 





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From kbentley at cognitics.net  Tue Mar 20 12:14:39 2018
From: kbentley at cognitics.net (Kevin Bentley)
Date: Tue, 20 Mar 2018 13:14:39 -0600
Subject: [gdal-dev] GeoPackage Open() Performance
Message-ID: <CAMy18LO4kLkBmcgk_ipU8ahfckUpOm98akX_3L=AsS+os4CHUg@mail.gmail.com>

I've been working on some large GeoPackage files that have a lot of layers.
One in particular has over 5000 layers. It was taking a good 5+ minutes
just to open, so I did some analysis. Here's what I found:

By far the biggest hit is in a query to sqlite_master (called
from OGRGeoPackageTableLayer::ReadTableDefinition()). This is the
particular query (in my dataset, this query generally takes about 90ms):

"SELECT type FROM sqlite_master WHERE lower(name) = lower('%q') AND type "
            "IN ('view', 'table')"

The calls to lower means it has to do a full table scan, but there isn't an
index on sqlite_master, so just removing it doesn't change anything right
away (it's still a table scan). I was able to optimize this by creating a
temp table from sqlite_master in GDALGeoPackageDataset::Open(), updating it
so name is all lower case, then creating an index on name. The one time
cost of this process was about 100ms, but when I query instead of
sqlite_master, it shaved down each query to <1ms. With 5000+ layers, this
cut several minutes off time to open a dataset.

I have a patch for this, but I wasn't sure who to submit it to. There are
also several other places in GDAL where queries to sqlite_master can be
optimized, so I wanted to talk about it before I waste time refactoring
other code. Is this a patch the maintainers would be interested in
integrating?
-- 
Kevin Bentley
Cognitics, Inc.
947 E Winding Creek Drive #200
Eagle, ID 83616-7231
(208) 904-3780 (Office)
(208) 890-4472 (Cell)
(866) 922-2037 (Fax)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180320/31b1b485/attachment.html>

From zac at weatherwary.com  Tue Mar 20 23:34:26 2018
From: zac at weatherwary.com (Zachary Flamig)
Date: Wed, 21 Mar 2018 09:34:26 +0300
Subject: [gdal-dev] gdal translate/warp goes16
In-Reply-To: <1521571054646-0.post@n6.nabble.com>
References: <1521571054646-0.post@n6.nabble.com>
Message-ID: <B437AFBC-517B-4515-86FE-142B94FEE987@weatherwary.com>

Hi Steven,

So the issue here is that gdal_translate doesn’t properly store the +sweep=x in the geotiff.

See http://geotiff.maptools.narkive.com/3CqwNeMd/geos-projection-sweep-parameter <http://geotiff.maptools.narkive.com/3CqwNeMd/geos-projection-sweep-parameter> for some relevant discussion. I believe the best solution right now is to specify the s_srs in the gdalwarp command like -s_srs "+proj=geos +lon_0=-75 +h=35786023 +x_0=0 +y_0=0 +ellps=GRS80 +units=m +no_defs  +sweep=x"

This is a bit of a mess, sorry about that.

Zac

> On Mar 20, 2018, at 9:37 PM, Steven Beale <steven.beale at woodplc.com> wrote:
> 
> Hi gdalers, 
> 
> I'm a little out of my field here, usually I work with weather/climate data,
> but I need to warp some goes16 satellite data. (source is aws s3:
> https://noaa-goes16.s3.amazonaws.com/ABI-L2-CMIPF/2018/079/12/OR_ABI-L2-CMIPF-M3C01_G16_s20180791200447_e20180791211214_c20180791211280.nc
> - the link should work for a few months then it will be glaciered and
> unavailable) 
> 
> source data is netcdf, I'm using nco tools & gdal for the processing. 
> 
> My work flow is: 
> 1. clip the data to the region of interest (north atlantic): 
> ncks -d x,5424,8678 -d y,0,2170 <raw.nc> step1.nc 
> 2. deflate & unscale 
> gdal_translate -ot float32 -unscale -CO COMPRESS=deflate NETCDF:step1.nc:CMI
> step2.tiff 
> 3. warp (in this case data is 1km resolution : ~0.009 degrees) 
> gdalwarp -t_srs EPSG:4326 -dstnodata -999.0 -tr 0.009 0.009 -te 290 40 320
> 65  -r near step2.tiff step3.tiff 
> 4. convert back to nc 
> gdal_translate -ot float32 -of NETCDF step3.tiff output.nc 
> 
> The problem i have is that the output has the longitude shifted to the west
> by about 10 degrees. 
> The issue seems related to the ncks clipping, if I exclude the x clip,
> everything works out fine, but takes significantly longer. 
> Here's an example once it's loaded into an erddap server; 
> <http://osgeo-org.1560.x6.nabble.com/file/t382897/GOES16_L2CMIPF_M3C01_201803201200.png> 
> You can see greenland to the west of it's map underlay. 
> 
> I'm using gdal v2.3.0, netcdf v4.4.1.1, nco v4.7.3 & proj4 v5.0.0 
> 
> 
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180321/766a35cc/attachment.html>

From joseph.barraud at gmail.com  Wed Mar 21 00:32:55 2018
From: joseph.barraud at gmail.com (Joseph Barraud)
Date: Wed, 21 Mar 2018 07:32:55 +0000
Subject: [gdal-dev] Incorrect result with gdal_translate and KMLSUPEROVERLAY
Message-ID: <CALiDD6qmgArzwSOOrjRo62-V9L27fVDMX7Gt_YXH+3m50J5miw@mail.gmail.com>

Hi all,

I am trying to create a Google Earth overlay with an RGB image that should
cover (almost) the entire globe. The image has a 1 minute resolution, goes
from 0 to 360 in longitude, but does not cover the poles. Here is the
output from gdalinfo (GDAL version 2.2.3):

Driver: GTiff/GeoTIFF
Files: test.tif
Size is 21600, 9689
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (0.000000000000000,80.738000000000000)
Pixel Size = (0.016666666666667,-0.016666666666667)
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
  TIFFTAG_XRESOLUTION=100
  TIFFTAG_YRESOLUTION=100
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (   0.0000000,  80.7380000) (  0d 0' 0.01"E, 80d44'16.80"N)
Lower Left  (   0.0000000, -80.7453333) (  0d 0' 0.01"E, 80d44'43.20"S)
Upper Right (     360.000,      80.738) (360d 0' 0.00"E, 80d44'16.80"N)
Lower Right (     360.000,     -80.745) (360d 0' 0.00"E, 80d44'43.20"S)
Center      ( 180.0000000,  -0.0036667) (180d 0' 0.00"E,  0d 0'13.20"S)
Band 1 Block=21600x1 Type=Byte, ColorInterp=Red
Band 2 Block=21600x1 Type=Byte, ColorInterp=Green
Band 3 Block=21600x1 Type=Byte, ColorInterp=Blue


I use the following command to create a kmz file:
gdal_translate -of KMLSUPEROVERLAY test.tif test.kmz

The kmz is displayed nicely in Google Earth Pro except that there is a
problem at the 0 deg meridian. There is a small gap in the overlay that is
larger at the equator than near the poles. I tried shifting the image but I
just managed to shift the gap.

Do you have an idea of what I could do differently?

Kind regards,
Joseph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180321/e89cd2a6/attachment.html>

From julien.michel at cnes.fr  Wed Mar 21 00:44:39 2018
From: julien.michel at cnes.fr (Julien Michel)
Date: Wed, 21 Mar 2018 08:44:39 +0100
Subject: [gdal-dev] Concurrent and efficient access to features in OGRLayer
Message-ID: <f3c219fa-348c-c9d2-c714-7ca6929c914c@cnes.fr>

Dear all,

I am writing some code that processes features from a Layer, and I am 
facing two distinct problems :

1) Since the processing of features might be heavy, I would like to do 
some parallel processing, but I did not find any way to iterate on 
features in parallel, even for read-only / in-memory datasets. Do you 
have any idea on how I could achieve that ?

2) I am using spatial filtering to retrieve a subset of the features 
corresponding to a given area, and then iterate on the area to process. 
My code therefore uses spatial filters quite intensively, which might be 
very slow without spatial indexing and a large number of features. Is 
there a way to add spatial indexing for in memory dataset ? Is it 
meaningful ?

Thanks a lot for your help,

Regards,

Julien

-- 
Julien MICHEL
CNES - DSO/SI/2A


From even.rouault at spatialys.com  Wed Mar 21 03:09:57 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 21 Mar 2018 11:09:57 +0100
Subject: [gdal-dev] Concurrent and efficient access to features in
	OGRLayer
In-Reply-To: <f3c219fa-348c-c9d2-c714-7ca6929c914c@cnes.fr>
References: <f3c219fa-348c-c9d2-c714-7ca6929c914c@cnes.fr>
Message-ID: <15069945.Qu8lsQ3C8B@even-i700>

Hi Julien,

> 
> I am writing some code that processes features from a Layer, and I am
> facing two distinct problems :
> 
> 1) Since the processing of features might be heavy, I would like to do
> some parallel processing, but I did not find any way to iterate on
> features in parallel, even for read-only / in-memory datasets. Do you
> have any idea on how I could achieve that ?

Some drivers might have an efficient implementation of SetNextByIndex(), so 
you could use that to open the same dataset as many times as needed, position
the reading cursor with SetNextByIndex() at different indexes in the different 
threads, and then iterate with GetNextFeature()

Another approach would be to have a single reader (as most of the time 
iterating over source features is really neglectable comparing to the 
processing done with them), and then push them to a queue that is consumed by 
several processing threads. That's more or less what I've done recently in the 
writer side of the MVT driver: the CreateFeature() method pushes the features 
to a queue, and different worker threads consume this queue and process them.

> 
> 2) I am using spatial filtering to retrieve a subset of the features
> corresponding to a given area, and then iterate on the area to process.
> My code therefore uses spatial filters quite intensively, which might be
> very slow without spatial indexing and a large number of features. Is
> there a way to add spatial indexing for in memory dataset ?

If you are thinking about the MEM driver, there's no implementation of spatial 
indexing in it currently.
If you are using GeoPackage or Shapefiles stored in /vsimem/, then spatial 
indexes if they exist will be used.

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Mar 21 03:28:06 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 21 Mar 2018 11:28:06 +0100
Subject: [gdal-dev] Motion: promote GDAL 2.2.4 RC1 for release
In-Reply-To: <1584256.k96FF9gNpd@even-i700>
References: <1584256.k96FF9gNpd@even-i700>
Message-ID: <1604361.ro4PVTvqZl@even-i700>

> Motion: promote GDAL 2.2.4 RC1 for release

Friendly nudge to PSC members to please cast their votes.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Mar 21 03:49:03 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 21 Mar 2018 11:49:03 +0100
Subject: [gdal-dev] Motion: adopt RFC 71: Migration to GitHub
Message-ID: <7215845.p0E3Iy6tg4@even-i700>

Hi,

I move to adopt RFC 71: Migration to GitHub

     https://trac.osgeo.org/gdal/wiki/rfc71_github_migration

Starting with my +1,

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From howard at hobu.co  Wed Mar 21 04:08:00 2018
From: howard at hobu.co (Howard Butler)
Date: Wed, 21 Mar 2018 06:08:00 -0500
Subject: [gdal-dev] Motion: promote GDAL 2.2.4 RC1 for release
In-Reply-To: <1604361.ro4PVTvqZl@even-i700>
References: <1584256.k96FF9gNpd@even-i700> <1604361.ro4PVTvqZl@even-i700>
Message-ID: <c7d029cd-ae6d-fcf7-e733-dc403ac06575@hobu.co>



On 3/21/18 5:28 AM, Even Rouault wrote:
>> Motion: promote GDAL 2.2.4 RC1 for release
> Friendly nudge to PSC members to please cast their votes.

+1

Howard

From howard at hobu.co  Wed Mar 21 04:08:51 2018
From: howard at hobu.co (Howard Butler)
Date: Wed, 21 Mar 2018 06:08:51 -0500
Subject: [gdal-dev] Motion: adopt RFC 71: Migration to GitHub
In-Reply-To: <7215845.p0E3Iy6tg4@even-i700>
References: <7215845.p0E3Iy6tg4@even-i700>
Message-ID: <1eafc1b3-b865-4abb-624a-d92f2af1cb36@hobu.co>



On 3/21/18 5:49 AM, Even Rouault wrote:
> Hi,
>
> I move to adopt RFC 71: Migration to GitHub
>
>      https://trac.osgeo.org/gdal/wiki/rfc71_github_migration
>
> Starting with my +1,
+1

Howard

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 548 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180321/3b1103d6/attachment.sig>

From szekerest at gmail.com  Wed Mar 21 04:30:16 2018
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed, 21 Mar 2018 12:30:16 +0100
Subject: [gdal-dev] Motion: promote GDAL 2.2.4 RC1 for release
In-Reply-To: <1584256.k96FF9gNpd@even-i700>
References: <1584256.k96FF9gNpd@even-i700>
Message-ID: <CACALY+SN2jnS6_yvftCi4F-K0FUNy7ScJb1=KoOwoV7+Y+VONA@mail.gmail.com>

+1

Tamas


2018-03-19 14:48 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:

> Hi,
>
> (Combining both RC availability announcement and motion for vote)
>
> I have prepared a GDAL/OGR 2.2.4 release candidate. It fixes 42 issues
> since
> 2.2.3
>
> Peek up an archive among the following ones (by ascending size):
>
>   http://download.osgeo.org/gdal/2.2.4/gdal-2.2.4RC1.tar.xz
>   http://download.osgeo.org/gdal/2.2.4/gdal-2.2.4RC1.tar.gz
>   http://download.osgeo.org/gdal/2.2.4/gdal224RC1.zip
>
> A snapshot of the GDAL GRASS plugin is also available (unchanged since
> 2.2.0)
>
>   http://download.osgeo.org/gdal/2.2.4/gdal-grass-2.2.4RC1.tar.gz
>
> A snapshot of the gdalautotest suite is also available :
>
>   http://download.osgeo.org/gdal/2.2.4/gdalautotest-2.2.4RC1.tar.gz
>   http://download.osgeo.org/gdal/2.2.4/gdalautotest-2.2.4RC1.zip
>
> The NEWS file is here :
>
>   http://trac.osgeo.org/gdal/wiki/Release/2.2.4-News
>
> Note for packagers: I've compared the 2.2.3 and 2.2.4 sources and there's
> no
> change at all in the C or C++ API, so this should be (as expected) a
> drop-in
> replacement for GDAL 2.2.3 not requiring reverse dependencies to be
> rebuilt.
>
> ~~~~~
>
> Motion: promote GDAL 2.2.4 RC1 for release
>
> Starting with my +1
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180321/a044f686/attachment.html>

From dmorissette at mapgears.com  Wed Mar 21 06:28:43 2018
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed, 21 Mar 2018 09:28:43 -0400
Subject: [gdal-dev] Motion: promote GDAL 2.2.4 RC1 for release
In-Reply-To: <1604361.ro4PVTvqZl@even-i700>
References: <1584256.k96FF9gNpd@even-i700> <1604361.ro4PVTvqZl@even-i700>
Message-ID: <49c81540-7fa3-8643-2703-44dd77ed2878@mapgears.com>

+1

Daniel

On 2018-03-21 6:28 AM, Even Rouault wrote:
>> Motion: promote GDAL 2.2.4 RC1 for release
> 
> Friendly nudge to PSC members to please cast their votes.
> 
> Even
> 


-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201

From jukka.rahkonen at maanmittauslaitos.fi  Wed Mar 21 06:57:41 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Wed, 21 Mar 2018 13:57:41 +0000
Subject: [gdal-dev] Motion: promote GDAL 2.2.4 RC1 for release
Message-ID: <e6e3f3994cbd4ce18e112addcd72759f@C119S212VM042.msvyvi.vaha.local>

+1

-Jukka Rahkonen-

>> Motion: promote GDAL 2.2.4 RC1 for release

> Friendly nudge to PSC members to please cast their votes.

> Even
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180321/bed809da/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Mar 21 06:59:36 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Wed, 21 Mar 2018 13:59:36 +0000
Subject: [gdal-dev] Motion: adopt RFC 71: Migration to GitHub
Message-ID: <025e0ae7649c49cdb4305da57b1aadda@C119S212VM042.msvyvi.vaha.local>

+1

-Jukka Rahkonen-


> Hi,

> I move to adopt RFC 71: Migration to GitHub

     https://trac.osgeo.org/gdal/wiki/rfc71_github_migration

> Starting with my +1,

> Best regards,

> Even
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180321/27de089f/attachment-0001.html>

From even.rouault at spatialys.com  Wed Mar 21 07:14:49 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 21 Mar 2018 15:14:49 +0100
Subject: [gdal-dev] proj.5 support added in trunk
Message-ID: <4506230.jDqQppi5B3@even-i700>

Hi,

I've just committed in trunk initial support for proj.5 API per:
https://trac.osgeo.org/gdal/changeset/41878

You have to use the to-be-released proj 5.0.1 / proj master to get all
reprojection results to work as expected.

proj.4 support remains for now. At some point, when proj 5 has been more largely adopted,
removing proj.4 support would help in cleaning up ogr/ogrct.cpp that has become quite
messy.

For now, GDAL uses the new proj.5 API in a similar way to the previous proj.4 API, so
it is mostly ready for the removal of the proj_api.h that will occur in the future (proj 7).
Note that I only added proj.5 API support if you use the explicit --with-proj configure flag (or
PROJ_FLAGS = -DPROJ_STATIC -DPROJ_VERSION=5 for MSVC), and not for the runtime loading
that uses dlopen()/LoadLibrary() that I'd wish to see retired at some point.

Next step would probably to add a -ct (for coordinate transform, alternate naming suggestions welcome)
switch to ogr2ogr, gdalwarp and gdaltransform so as to be able to specify a full proj.5 pipeline
to do advanced transforms
(see http://proj4.org/operations/pipeline.html and http://proj4.org/usage/transformation.html#transformation )

ogr2ogr -ct "+proj=pipeline +step +proj= .... +step ... " [-a_srs EPSG:XXXX] out in

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Mar 21 07:41:40 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 21 Mar 2018 15:41:40 +0100
Subject: [gdal-dev] Motion: promote GDAL 2.2.4 RC1 for release
In-Reply-To: <1584256.k96FF9gNpd@even-i700>
References: <1584256.k96FF9gNpd@even-i700>
Message-ID: <3053717.qQ49QLs1BK@even-i700>

> Motion: promote GDAL 2.2.4 RC1 for release
> 
This motion has passed with +1 from PSC members EvenR, HowardB, DanielM, 
JukkaR and TamasS.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Mar 21 07:50:14 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 21 Mar 2018 15:50:14 +0100
Subject: [gdal-dev] GDAL/OGR 2.2.4 is released
Message-ID: <1988222.JNijSvktqF@even-i700>

Hi,

On behalf of the GDAL/OGR development team, I am pleased to announce the 
release of the GDAL/OGR 2.2.4 bug fix version. 

Consult the release notes for the list of issues addressed :
  https://trac.osgeo.org/gdal/wiki/Release/2.2.4-News

The sources are available at:

    http://download.osgeo.org/gdal/2.2.4/gdal-2.2.4.tar.xz
    http://download.osgeo.org/gdal/2.2.4/gdal-2.2.4.tar.gz
    http://download.osgeo.org/gdal/2.2.4/gdal224.zip
    http://download.osgeo.org/gdal/2.2.4/gdal-grass-2.2.4.tar.gz

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Mar 21 08:18:40 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 21 Mar 2018 16:18:40 +0100
Subject: [gdal-dev] [gdal-announce] GDAL Support For PostGIS Out-DB
	Raster
In-Reply-To: <CAGpiUSiyAhwxvp=H0GDh6hiPtThJBgiR8btG1_LuG63UvTFcYQ@mail.gmail.com>
References: <CAGpiUSiyAhwxvp=H0GDh6hiPtThJBgiR8btG1_LuG63UvTFcYQ@mail.gmail.com>
Message-ID: <13009849.mDlFnfGobQ@even-i700>

Moving the discussion to gdal-dev

> Please, I wanted to find out if there is any ongoing work towards providing
> GDAL support for PostGIS Out-DB rasters. I have been in touch with both
> Postgres and QGIS and I was told that it is a limitation from GDAL.
> 
> Is there any plan to implement this feature?

Yes, I should work on this in the coming weeks.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From osahon.gis at gmail.com  Wed Mar 21 08:32:33 2018
From: osahon.gis at gmail.com (Osahon Oduware)
Date: Wed, 21 Mar 2018 16:32:33 +0100
Subject: [gdal-dev] [gdal-announce] GDAL Support For PostGIS Out-DB
	Raster
In-Reply-To: <13009849.mDlFnfGobQ@even-i700>
References: <CAGpiUSiyAhwxvp=H0GDh6hiPtThJBgiR8btG1_LuG63UvTFcYQ@mail.gmail.com>
 <13009849.mDlFnfGobQ@even-i700>
Message-ID: <CAGpiUSiTkiUe483_X934OyGLuQaq2FOi=TQ-+L6p-JzSUOR+2w@mail.gmail.com>

 Hi Even,

This is great news. I cannot wait for this feature to be implemented as it
prevents double storage of rasters (database and filesystem).

On Wed, Mar 21, 2018 at 4:18 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Moving the discussion to gdal-dev
>
> > Please, I wanted to find out if there is any ongoing work towards
> providing
> > GDAL support for PostGIS Out-DB rasters. I have been in touch with both
> > Postgres and QGIS and I was told that it is a limitation from GDAL.
> >
> > Is there any plan to implement this feature?
>
> Yes, I should work on this in the coming weeks.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180321/8d0c299d/attachment.html>

From tobias.wendorff at tu-dortmund.de  Wed Mar 21 09:30:24 2018
From: tobias.wendorff at tu-dortmund.de (Tobias Wendorff)
Date: Wed, 21 Mar 2018 17:30:24 +0100
Subject: [gdal-dev] GDAL/OGR 2.2.4 is released
In-Reply-To: <1988222.JNijSvktqF@even-i700>
References: <1988222.JNijSvktqF@even-i700>
Message-ID: <04be398c43ea8a789b3338db521d29ee.squirrel@webmail.tu-dortmund.de>

Am Mi, 21.03.2018, 15:50 schrieb Even Rouault:
>
> On behalf of the GDAL/OGR development team, I am pleased to announce the
> release of the GDAL/OGR 2.2.4 bug fix version.

Thanks a lot. Good work :D


From steven.beale at woodplc.com  Wed Mar 21 11:08:50 2018
From: steven.beale at woodplc.com (Beale, Steven)
Date: Wed, 21 Mar 2018 18:08:50 +0000
Subject: [gdal-dev] gdal translate/warp goes16
In-Reply-To: <B437AFBC-517B-4515-86FE-142B94FEE987@weatherwary.com>
References: <1521571054646-0.post@n6.nabble.com>
 <B437AFBC-517B-4515-86FE-142B94FEE987@weatherwary.com>
Message-ID: <MWHPR04MB0638D52BEDD86BB1192CAFDFF0AA0@MWHPR04MB0638.namprd04.prod.outlook.com>

Hi Zac,
I tried to be as explicit as possible setting the source srs, including the semi-major/minor axes:
gdalwarp -s_srs "+proj=geos +a=6378137 +b=6356752.31414 +lon_0=-75 +h=35786023 +x_0=0 +y_0=0 +ellps=GRS80 +units=m +no_defs  +sweep=x" -t_srs EPSG:4326 -dstnodata -999.0 -tr 0.009 0.009 -te 290 40 320 65 -r near <in> <out>

But I still have the longitude shifting.
Out of curiosity I tried +sweep=y, just to see what would happen, and that didn’t do anything either… could the sweep be getting ignored entirely?
Just to verify that the srs was being interpreted at all, I tried adjusting lon_0, which did work. Not very helpful though.
Thinking there could possibly be some conflict in setting ellps=GRS80 and setting parameters by hand, I omitted that the +ellps. Same result.
Any other thoughts?

Thanks,
Steve

From: Zachary Flamig [mailto:zac at weatherwary.com]
Sent: Wednesday, March 21, 2018 4:04 AM
To: Steven Beale <steven.beale at woodplc.com>
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] gdal translate/warp goes16

Hi Steven,

So the issue here is that gdal_translate doesn’t properly store the +sweep=x in the geotiff.

See http://geotiff.maptools.narkive.com/3CqwNeMd/geos-projection-sweep-parameter<https://urldefense.proofpoint.com/v2/url?u=http-3A__geotiff.maptools.narkive.com_3CqwNeMd_geos-2Dprojection-2Dsweep-2Dparameter&d=DwMFaQ&c=ZWY66qCYUTYUcOev9C2GlDEcKuYKzoWDVNR_L93Z9mQ&r=xGAbC1Ogv9duClaR3TChYqg_fGB4xrhak7uN1kZcfR8&m=zVXU4kc36wijhVLYDg1WghqZOoFePzeG6PQfNC150tU&s=f466QSOBNcqeD3kETK3-K2-4KeUmCONhKlY6J9t4dMU&e=> for some relevant discussion. I believe the best solution right now is to specify the s_srs in the gdalwarp command like -s_srs "+proj=geos +lon_0=-75 +h=35786023 +x_0=0 +y_0=0 +ellps=GRS80 +units=m +no_defs  +sweep=x"

This is a bit of a mess, sorry about that.

Zac


On Mar 20, 2018, at 9:37 PM, Steven Beale <steven.beale at woodplc.com<mailto:steven.beale at woodplc.com>> wrote:

Hi gdalers,

I'm a little out of my field here, usually I work with weather/climate data,
but I need to warp some goes16 satellite data. (source is aws s3:
https://noaa-goes16.s3.amazonaws.com/ABI-L2-CMIPF/2018/079/12/OR_ABI-L2-CMIPF-M3C01_G16_s20180791200447_e20180791211214_c20180791211280.nc<https://urldefense.proofpoint.com/v2/url?u=https-3A__noaa-2Dgoes16.s3.amazonaws.com_ABI-2DL2-2DCMIPF_2018_079_12_OR-5FABI-2DL2-2DCMIPF-2DM3C01-5FG16-5Fs20180791200447-5Fe20180791211214-5Fc20180791211280.nc&d=DwMFaQ&c=ZWY66qCYUTYUcOev9C2GlDEcKuYKzoWDVNR_L93Z9mQ&r=xGAbC1Ogv9duClaR3TChYqg_fGB4xrhak7uN1kZcfR8&m=zVXU4kc36wijhVLYDg1WghqZOoFePzeG6PQfNC150tU&s=wpMH3kBCq917DTkCCXLtN0FpDoYrz6Xbmh4KZvNmrSM&e=>
- the link should work for a few months then it will be glaciered and
unavailable)

source data is netcdf, I'm using nco tools & gdal for the processing.

My work flow is:
1. clip the data to the region of interest (north atlantic):
ncks -d x,5424,8678 -d y,0,2170 <raw.nc> step1.nc
2. deflate & unscale
gdal_translate -ot float32 -unscale -CO COMPRESS=deflate NETCDF:step1.nc:CMI
step2.tiff
3. warp (in this case data is 1km resolution : ~0.009 degrees)
gdalwarp -t_srs EPSG:4326 -dstnodata -999.0 -tr 0.009 0.009 -te 290 40 320
65  -r near step2.tiff step3.tiff
4. convert back to nc
gdal_translate -ot float32 -of NETCDF step3.tiff output.nc

The problem i have is that the output has the longitude shifted to the west
by about 10 degrees.
The issue seems related to the ncks clipping, if I exclude the x clip,
everything works out fine, but takes significantly longer.
Here's an example once it's loaded into an erddap server;
<http://osgeo-org.1560.x6.nabble.com/file/t382897/GOES16_L2CMIPF_M3C01_201803201200.png>
You can see greenland to the west of it's map underlay.

I'm using gdal v2.3.0, netcdf v4.4.1.1, nco v4.7.3 & proj4 v5.0.0





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev





This message is the property of John Wood Group PLC and/or its subsidiaries and/or affiliates and is intended only for the named recipient(s). Its contents (including any attachments) may be confidential, legally privileged or otherwise protected from disclosure by law. Unauthorised use, copying, distribution or disclosure of any of it may be unlawful and is strictly prohibited. We assume no responsibility to persons other than the intended named recipient(s) and do not accept liability for any errors or omissions which are a result of email transmission. If you have received this message in error, please notify us immediately by reply email to the sender and confirm that the original message and any attachments and copies have been destroyed and deleted from your system.

If you do not wish to receive future unsolicited commercial electronic messages from us, please forward this email to: unsubscribe at woodplc.com and include “Unsubscribe” in the subject line. If applicable, you will continue to receive invoices, project communications and similar factual, non-commercial electronic communications.

Please click http://www.woodplc.com/email-disclaimer for notices and company information in relation to emails originating in the UK, Italy or France.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180321/8899d139/attachment-0001.html>

From schwehr at gmail.com  Wed Mar 21 16:16:53 2018
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 21 Mar 2018 16:16:53 -0700
Subject: [gdal-dev] proj.5 support added in trunk
In-Reply-To: <4506230.jDqQppi5B3@even-i700>
References: <4506230.jDqQppi5B3@even-i700>
Message-ID: <CACmBxyuJzyX50J1HusPKK81JCwDuDCC0U=9SN1xaCKfvRvcdpw@mail.gmail.com>

Awesome!!  Thanks Even.

This isn't a bug, but I hit your workaround for 5.0.1 as I'm using proj
master near head.

third_party/gdal/ogr/ogrct.cpp:56:20: error: static declaration of
'proj_errno_string' follows non-static declaration
static const char* proj_errno_string(int err)
                   ^
third_party/proj4/proj/src/proj.h:352:13: note: previous declaration is here
const char* proj_errno_string (int err);

Was trivial to fix locally, so I'm not advocating any change.  Just
documenting it.  Just adding a #if 0.

#if 0 && PROJ_VERSION_MAJOR == 5 && PROJ_VERSION_MINOR == 0


And, I filed a bug on VisionWorkbench with reference to this GDAL change
since there are known issues with vw and proj 5 (seen with TSAN).
The vw folks aren't particularly interested.

https://github.com/visionworkbench/visionworkbench/issues/55



On Wed, Mar 21, 2018 at 7:14 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> I've just committed in trunk initial support for proj.5 API per:
> https://trac.osgeo.org/gdal/changeset/41878
>
> You have to use the to-be-released proj 5.0.1 / proj master to get all
> reprojection results to work as expected.
>
> proj.4 support remains for now. At some point, when proj 5 has been more
> largely adopted,
> removing proj.4 support would help in cleaning up ogr/ogrct.cpp that has
> become quite
> messy.
>
> For now, GDAL uses the new proj.5 API in a similar way to the previous
> proj.4 API, so
> it is mostly ready for the removal of the proj_api.h that will occur in
> the future (proj 7).
> Note that I only added proj.5 API support if you use the explicit
> --with-proj configure flag (or
> PROJ_FLAGS = -DPROJ_STATIC -DPROJ_VERSION=5 for MSVC), and not for the
> runtime loading
> that uses dlopen()/LoadLibrary() that I'd wish to see retired at some
> point.
>
> Next step would probably to add a -ct (for coordinate transform, alternate
> naming suggestions welcome)
> switch to ogr2ogr, gdalwarp and gdaltransform so as to be able to specify
> a full proj.5 pipeline
> to do advanced transforms
> (see http://proj4.org/operations/pipeline.html and http://proj4.org/usage/
> transformation.html#transformation )
>
> ogr2ogr -ct "+proj=pipeline +step +proj= .... +step ... " [-a_srs
> EPSG:XXXX] out in
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180321/53111a84/attachment.html>

From even.rouault at spatialys.com  Thu Mar 22 02:21:06 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 22 Mar 2018 10:21:06 +0100
Subject: [gdal-dev] GeoPackage Open() Performance
In-Reply-To: <CAMy18LO4kLkBmcgk_ipU8ahfckUpOm98akX_3L=AsS+os4CHUg@mail.gmail.com>
References: <CAMy18LO4kLkBmcgk_ipU8ahfckUpOm98akX_3L=AsS+os4CHUg@mail.gmail.com>
Message-ID: <1530621.8uzutP4B50@even-i700>

Kevin,

> I've been working on some large GeoPackage files that have a lot of layers.
> One in particular has over 5000 layers. It was taking a good 5+ minutes
> just to open, so I did some analysis. Here's what I found:
> 
> By far the biggest hit is in a query to sqlite_master (called
> from OGRGeoPackageTableLayer::ReadTableDefinition()). This is the
> particular query (in my dataset, this query generally takes about 90ms):
> 
> "SELECT type FROM sqlite_master WHERE lower(name) = lower('%q') AND type "
>             "IN ('view', 'table')"
> 
> The calls to lower means it has to do a full table scan, but there isn't an
> index on sqlite_master, so just removing it doesn't change anything right
> away (it's still a table scan). I was able to optimize this by creating a
> temp table from sqlite_master in GDALGeoPackageDataset::Open(), updating it
> so name is all lower case, then creating an index on name. The one time
> cost of this process was about 100ms, but when I query instead of
> sqlite_master, it shaved down each query to <1ms. With 5000+ layers, this
> cut several minutes off time to open a dataset.

You should re-try with GDAL trunk. I've had this same issue a few weeks/months 
ago and this should be fixed now per
https://trac.osgeo.org/gdal/changeset/40474
(please use latest trunk and not only this patch, as I somehow remember later 
fixes were needed)

The reason for this lower case comparison if I remember well was to add 
compatibility with GeoPacakage databases created by ArcMap where there was 
inconsistent case used.
See https://trac.osgeo.org/gdal/ticket/6916

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu Mar 22 02:50:59 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 22 Mar 2018 10:50:59 +0100
Subject: [gdal-dev] proj.5 support added in trunk
In-Reply-To: <CACmBxyuJzyX50J1HusPKK81JCwDuDCC0U=9SN1xaCKfvRvcdpw@mail.gmail.com>
References: <4506230.jDqQppi5B3@even-i700>
 <CACmBxyuJzyX50J1HusPKK81JCwDuDCC0U=9SN1xaCKfvRvcdpw@mail.gmail.com>
Message-ID: <5020129.8qSCCe59E5@even-i700>

On mercredi 21 mars 2018 16:16:53 CET Kurt Schwehr wrote:
> Awesome!!  Thanks Even.
> 
> This isn't a bug, but I hit your workaround for 5.0.1 as I'm using proj
> master near head.
> 
> third_party/gdal/ogr/ogrct.cpp:56:20: error: static declaration of
> 'proj_errno_string' follows non-static declaration
> static const char* proj_errno_string(int err)
>                    ^
> third_party/proj4/proj/src/proj.h:352:13: note: previous declaration is here
> const char* proj_errno_string (int err);
> 
> Was trivial to fix locally, so I'm not advocating any change.  Just
> documenting it.  Just adding a #if 0.
> 
> #if 0 && PROJ_VERSION_MAJOR == 5 && PROJ_VERSION_MINOR == 0
> 

Oh, gcc 5.4 doesn't complain about this.
I've suggested updating PROJ_VERSION_MINOR to 1 in proj master per
https://github.com/OSGeo/proj.4/pull/888

> And, I filed a bug on VisionWorkbench with reference to this GDAL change
> since there are known issues with vw and proj 5 (seen with TSAN).
> The vw folks aren't particularly interested.

Hum ok... 

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From schwehr at gmail.com  Thu Mar 22 08:00:42 2018
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 22 Mar 2018 08:00:42 -0700
Subject: [gdal-dev] Motion: adopt RFC 71: Migration to GitHub
In-Reply-To: <7215845.p0E3Iy6tg4@even-i700>
References: <7215845.p0E3Iy6tg4@even-i700>
Message-ID: <CACmBxyujme3rz_x45R-ayq_U0QTf_XTikJuiaA2yRStGLOe0Dw@mail.gmail.com>

+1 Kurt

On Wed, Mar 21, 2018 at 3:49 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> I move to adopt RFC 71: Migration to GitHub
>
>      https://trac.osgeo.org/gdal/wiki/rfc71_github_migration
>
> Starting with my +1,
>
> Best regards,
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180322/29228d23/attachment.html>

From kbentley at cognitics.net  Thu Mar 22 08:21:59 2018
From: kbentley at cognitics.net (Kevin Bentley)
Date: Thu, 22 Mar 2018 09:21:59 -0600
Subject: [gdal-dev] GeoPackage Open() Performance
In-Reply-To: <1530621.8uzutP4B50@even-i700>
References: <CAMy18LO4kLkBmcgk_ipU8ahfckUpOm98akX_3L=AsS+os4CHUg@mail.gmail.com>
 <1530621.8uzutP4B50@even-i700>
Message-ID: <CAMy18LPeQ7RE332T=-z-s3xtqPtxvZaovVfze0dt_d0srostjg@mail.gmail.com>

Ok, yes, thank you, the code in the trunk made a huge difference. I
appreciated it!

On Thu, Mar 22, 2018 at 3:21 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Kevin,
>
> > I've been working on some large GeoPackage files that have a lot of
> layers.
> > One in particular has over 5000 layers. It was taking a good 5+ minutes
> > just to open, so I did some analysis. Here's what I found:
> >
> > By far the biggest hit is in a query to sqlite_master (called
> > from OGRGeoPackageTableLayer::ReadTableDefinition()). This is the
> > particular query (in my dataset, this query generally takes about 90ms):
> >
> > "SELECT type FROM sqlite_master WHERE lower(name) = lower('%q') AND type
> "
> >             "IN ('view', 'table')"
> >
> > The calls to lower means it has to do a full table scan, but there isn't
> an
> > index on sqlite_master, so just removing it doesn't change anything right
> > away (it's still a table scan). I was able to optimize this by creating a
> > temp table from sqlite_master in GDALGeoPackageDataset::Open(), updating
> it
> > so name is all lower case, then creating an index on name. The one time
> > cost of this process was about 100ms, but when I query instead of
> > sqlite_master, it shaved down each query to <1ms. With 5000+ layers, this
> > cut several minutes off time to open a dataset.
>
> You should re-try with GDAL trunk. I've had this same issue a few
> weeks/months
> ago and this should be fixed now per
> https://trac.osgeo.org/gdal/changeset/40474
> (please use latest trunk and not only this patch, as I somehow remember
> later
> fixes were needed)
>
> The reason for this lower case comparison if I remember well was to add
> compatibility with GeoPacakage databases created by ArcMap where there was
> inconsistent case used.
> See https://trac.osgeo.org/gdal/ticket/6916
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
Kevin Bentley
Cognitics, Inc.
947 E Winding Creek Drive #200
Eagle, ID 83616-7231
(208) 904-3780 (Office)
(208) 890-4472 (Cell)
(866) 922-2037 (Fax)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180322/13c01d12/attachment-0001.html>

From even.rouault at spatialys.com  Thu Mar 22 09:17:28 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 22 Mar 2018 17:17:28 +0100
Subject: [gdal-dev] Trac to GitHub
In-Reply-To: <39016582.Kq4gFkLMle@even-i700>
References: <CABUeae9GdvtdZ7Cg79=g7JE1b-m1qtAbAw7oS79G-afUCNvVbw@mail.gmail.com>
 <4008197.BS2L8QbmBl@even-i700> <39016582.Kq4gFkLMle@even-i700>
Message-ID: <3619907.WPcfMf1H3h@even-i700>

Hi,

I've prototyped what should be the new repository (baring any new commits in the meantime) and
put it temporarily at https://github.com/rouault/gdal_wip

You can check if branches, tags etc look good. I've removed a few useless branches and tags.
Branches are named release/{major}.{minor} and tags v{major}.{minor}.{micro}

The procedure I applied:

git clone --mirror git://github.com/OSGeo/gdal.git gdal/.git
cd gdal
git config --unset core.bare
git config receive.denyCurrentBranch updateInstead
git branch -D asi-20021114-branch
git branch -D asi-20030922-branch 
git branch -D asi-rel-1-6-patches 
git branch -D SRRefCount 
git branch -D tags/asi-rel-1-6
git branch -D tags/asi-rel-1-82
git branch -D tags/1.11.0beta1
git branch -D tags/1.11.1 at 27202
git branch -D tags/1.11.1 at 27733
git branch -D tags/1.11.4 at 27202
git branch -D tags/1.11.4 at 33077
git branch -D tags/1.11beta1
git branch -m trunk master
git reset --hard HEAD
git checkout master
git filter-branch --msg-filter 'python /home/even/gdal/historyrewrite/rewrite.py' -- --all
for i in `git branch | grep tags | grep gdal_ | sed "s/  tags\///"`; do j=`echo v$i | sed "s/gdal_//" | sed "s/_/./g"`; git checkout tags/$i; git tag -a $j -m "Create tag $j"; done
git checkout master
for i in `git branch | grep tags | grep -v gdal_ | sed "s/  tags\///"`; do j="v$i"; git checkout tags/$i; git tag -a $j -m "Create tag $j"; done
git checkout master
for i in `git branch | grep tags | sed "s/  tags\///"`; do git branch -D tags/$i; done
for i in `git branch | grep "\." | sed "s/  //"`; do git branch -m $i "release/$i"; done
git branch -m "release/1.4-esri" "vendor/1.4-esri"


git push gdal_wip --all
git push gdal_wip --tags

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mateusz at loskot.net  Thu Mar 22 10:44:39 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 22 Mar 2018 18:44:39 +0100
Subject: [gdal-dev] Trac to GitHub
In-Reply-To: <3619907.WPcfMf1H3h@even-i700>
References: <CABUeae9GdvtdZ7Cg79=g7JE1b-m1qtAbAw7oS79G-afUCNvVbw@mail.gmail.com>
 <4008197.BS2L8QbmBl@even-i700> <39016582.Kq4gFkLMle@even-i700>
 <3619907.WPcfMf1H3h@even-i700>
Message-ID: <CABUeae9wYwpfgZyOpopoRpXRkPTY_hzjMrXpE95WZK1m3KMSDA@mail.gmail.com>

On 22 March 2018 at 17:17, Even Rouault <even.rouault at spatialys.com> wrote:
>
> I've prototyped what should be the new repository (baring any new commits in the meantime) and
> put it temporarily at https://github.com/rouault/gdal_wip
>
> You can check if branches, tags etc look good. I've removed a few useless branches and tags.
> Branches are named release/{major}.{minor} and tags v{major}.{minor}.{micro}


Looks good!

For a few branches, I've checked that
in release/X.Y branch
number in VERSION file
matches latest vX.Y.Z tag

Once again, big thank you Even!

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From julien.michel at cnes.fr  Fri Mar 23 01:30:30 2018
From: julien.michel at cnes.fr (Julien Michel)
Date: Fri, 23 Mar 2018 09:30:30 +0100
Subject: [gdal-dev] Concurrent and efficient access to features in
 OGRLayer
In-Reply-To: <15069945.Qu8lsQ3C8B@even-i700>
References: <f3c219fa-348c-c9d2-c714-7ca6929c914c@cnes.fr>
 <15069945.Qu8lsQ3C8B@even-i700>
Message-ID: <b55336f2-511c-475b-ba53-0998dc3c9ba4@cnes.fr>

Hi Even,

Thank you very much for your answers. Please find some comments enclosed.

Regards,

Julien

Le 21/03/2018 à 11:09, Even Rouault a écrit :
>> I am writing some code that processes features from a Layer, and I am
>> facing two distinct problems :
>>
>> 1) Since the processing of features might be heavy, I would like to do
>> some parallel processing, but I did not find any way to iterate on
>> features in parallel, even for read-only / in-memory datasets. Do you
>> have any idea on how I could achieve that ?
> Some drivers might have an efficient implementation of SetNextByIndex(), so
> you could use that to open the same dataset as many times as needed, position
> the reading cursor with SetNextByIndex() at different indexes in the different
> threads, and then iterate with GetNextFeature()
>
> Another approach would be to have a single reader (as most of the time
> iterating over source features is really neglectable comparing to the
> processing done with them), and then push them to a queue that is consumed by
> several processing threads. That's more or less what I've done recently in the
> writer side of the MVT driver: the CreateFeature() method pushes the features
> to a queue, and different worker threads consume this queue and process them.
That is pretty much what I did, however I was looking for a way to avoid 
extra copies of features (maybe I am doing this wrong).
>> 2) I am using spatial filtering to retrieve a subset of the features
>> corresponding to a given area, and then iterate on the area to process.
>> My code therefore uses spatial filters quite intensively, which might be
>> very slow without spatial indexing and a large number of features. Is
>> there a way to add spatial indexing for in memory dataset ?
> If you are thinking about the MEM driver, there's no implementation of spatial
> indexing in it currently.
> If you are using GeoPackage or Shapefiles stored in /vsimem/, then spatial
> indexes if they exist will be used.
Would there be any interest in developing spatial indexing for the MEM 
driver ? How difficult is it to implement it ?

Regards,

Julien

-- 
Julien MICHEL
CNES - DSO/SI/2A


From even.rouault at spatialys.com  Fri Mar 23 02:41:40 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 23 Mar 2018 10:41:40 +0100
Subject: [gdal-dev] Concurrent and efficient access to features in
	OGRLayer
In-Reply-To: <b55336f2-511c-475b-ba53-0998dc3c9ba4@cnes.fr>
References: <f3c219fa-348c-c9d2-c714-7ca6929c914c@cnes.fr>
 <15069945.Qu8lsQ3C8B@even-i700>
 <b55336f2-511c-475b-ba53-0998dc3c9ba4@cnes.fr>
Message-ID: <1926049.0dh6ged1sq@even-i700>

Julien,

> That is pretty much what I did, however I was looking for a way to avoid
> extra copies of features (maybe I am doing this wrong).
> 

In your case, you don't need to copy the features (in the CreateFeature() case 
I mentionned, I need too since ownership of the passed feature belongs to the 
caller). On a reading side, you can just pass the pointer around, can't you ?

> >> 2) I am using spatial filtering to retrieve a subset of the features
> >> corresponding to a given area, and then iterate on the area to process.
> >> My code therefore uses spatial filters quite intensively, which might be
> >> very slow without spatial indexing and a large number of features. Is
> >> there a way to add spatial indexing for in memory dataset ?
> > 
> > If you are thinking about the MEM driver, there's no implementation of
> > spatial indexing in it currently.
> > If you are using GeoPackage or Shapefiles stored in /vsimem/, then spatial
> > indexes if they exist will be used.
> 
> Would there be any interest in developing spatial indexing for the MEM
> driver ? How difficult is it to implement it ?

That could be interesting indeed. That shouldn't be hard to do. There's a 
cpl_quad_tree.h that can be used for that. It is already used by the 
OpenFileGDB driver (since the format of GDB spatial index is still not reverse 
engineered) that populates the spatial index during the first iteration phase. 
Later queries can then use the spatial index. In the case of the MEM driver, 
you would just build progressively the spatial index when features are added 
through CreateFeature()

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Fri Mar 23 03:59:02 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Fri, 23 Mar 2018 10:59:02 +0000
Subject: [gdal-dev] Adding WRITE_ID creation option for GeoJSON
Message-ID: <685c45b4344e43dca3f971e2a50f46d0@C119S212VM042.msvyvi.vaha.local>

Hi,

Am I right that there is no option to force the writing of "id" member to GeoJSON features? I have noticed that if I run ogr2ogr with -preserve_fid option then the "id" member is added
{ "type": "Feature", "id": 0, "properties":

However, if I don't use -preserve_fid I have not discovered any way to get "id" into GeoJSON. If I am right, would it make sense to add the WRITE_ID option like the existing WRITE_NAME http://www.gdal.org/drv_geojson.html?

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180323/4e411192/attachment.html>

From even.rouault at spatialys.com  Fri Mar 23 04:12:04 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 23 Mar 2018 12:12:04 +0100
Subject: [gdal-dev] Motion: adopt RFC 71: Migration to GitHub - PLEASE
	DO NOT COMMIT ANYTHING IN SVN
In-Reply-To: <7215845.p0E3Iy6tg4@even-i700>
References: <7215845.p0E3Iy6tg4@even-i700>
Message-ID: <2974436.Tcngj1xnJ1@even-i700>

Hi all,

I'm happy to declare this motion passed with +1 from myself, HowardB, JukkaR 
and KurtS

I'm going now to proceed to the implementation stage.

The existing github mirror is going to be cloned at
https://github.com/OSGeo/gdal_svn_mirror_backup
And the new repository that I prepared  yesterday at
https://github.com/rouault/gdal_wip/ will going to be force pushed to
https://github.com/OSGeo/gdal

So be prepared to have to recreate your fork afterwards. I'll send an email 
when things are ready.

SVN will have to be turned to read-only, so from now
DO NOT COMMIT ANYTHING IN SVN

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Mar 23 07:09:30 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 23 Mar 2018 15:09:30 +0100
Subject: [gdal-dev] https://github.com/OSGeo/gdal is the current SCM and
	ticketing system
Message-ID: <1723694.HDZp5Bkefu@even-i700>

OK, so now you can and should use https://github.com/OSGeo/gdal to track 
developement and file new tickets/issues
Trac ticket creation has been disabled. You can still modify existing tickets.

One side effect of pushing the rewritten commit messages is that all still 
opened pull requests (~20) in the previous mirror have been forced closed (not 
surprising since the sha1sum of the base commits have been modified). So if 
you had pending work, please rebase it on top of the current
https://github.com/OSGeo/gdal and issue a new pull request. Forks of the 
previous https://github.com/OSGeo/gdal will probably have to be recreated from 
scratch, or "rebased" to the current one as well.

The cron job that triggers website refresh has now been updated.

GDAL SVN committers that don't have yet push rights to github, please submit a 
pull request to gdal/COMMITTERS file with a new line with your contact 
information, so your github nickname can be added to the authorized list of 
people with push rights (if you already have push rights, please also update 
COMMITTERS with your info)

I've updated a few things on Trac wiki to point to github. If you still see 
references to svn or Trac for new tickets, you're welcome to fix them.

I've initiated
https://github.com/OSGeo/gdal/blob/master/CONTRIBUTING.md
Needs more love.

Kyle, you'll likely need to update your job for Coverity Scan.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From zac at weatherwary.com  Fri Mar 23 07:48:30 2018
From: zac at weatherwary.com (Zachary Flamig)
Date: Fri, 23 Mar 2018 09:48:30 -0500
Subject: [gdal-dev] https://github.com/OSGeo/gdal is the current SCM and
 ticketing system
In-Reply-To: <1723694.HDZp5Bkefu@even-i700>
References: <1723694.HDZp5Bkefu@even-i700>
Message-ID: <BE8C4381-561A-42F1-BCB0-AE9C67BC9D6C@weatherwary.com>

Even this is awesome. Great work!

Zac

> On Mar 23, 2018, at 9:09 AM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> OK, so now you can and should use https://github.com/OSGeo/gdal to track 
> developement and file new tickets/issues
> Trac ticket creation has been disabled. You can still modify existing tickets.
> 
> One side effect of pushing the rewritten commit messages is that all still 
> opened pull requests (~20) in the previous mirror have been forced closed (not 
> surprising since the sha1sum of the base commits have been modified). So if 
> you had pending work, please rebase it on top of the current
> https://github.com/OSGeo/gdal and issue a new pull request. Forks of the 
> previous https://github.com/OSGeo/gdal will probably have to be recreated from 
> scratch, or "rebased" to the current one as well.
> 
> The cron job that triggers website refresh has now been updated.
> 
> GDAL SVN committers that don't have yet push rights to github, please submit a 
> pull request to gdal/COMMITTERS file with a new line with your contact 
> information, so your github nickname can be added to the authorized list of 
> people with push rights (if you already have push rights, please also update 
> COMMITTERS with your info)
> 
> I've updated a few things on Trac wiki to point to github. If you still see 
> references to svn or Trac for new tickets, you're welcome to fix them.
> 
> I've initiated
> https://github.com/OSGeo/gdal/blob/master/CONTRIBUTING.md
> Needs more love.
> 
> Kyle, you'll likely need to update your job for Coverity Scan.
> 
> Even
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From sean at mapbox.com  Fri Mar 23 08:18:17 2018
From: sean at mapbox.com (Sean Gillies)
Date: Fri, 23 Mar 2018 09:18:17 -0600
Subject: [gdal-dev] https://github.com/OSGeo/gdal is the current SCM and
 ticketing system
In-Reply-To: <1723694.HDZp5Bkefu@even-i700>
References: <1723694.HDZp5Bkefu@even-i700>
Message-ID: <CADPhZXwjO3Qd+ysiSqsyRs9ANch5SAbPO87=iCRmjTfQibgnMw@mail.gmail.com>

Thanks, Even and team!

I've followed the contributing directions and am all set to contribute.
It'll be great to be able to integrate Rasterio and GDAL issues. This move
hugely benefits some of my projects and I am very grateful for it. I've
complained about the friction of contributing to GDAL in the past and will
now put my money where my mouth was, so to speak.

On Fri, Mar 23, 2018 at 8:09 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> OK, so now you can and should use https://github.com/OSGeo/gdal to track
> developement and file new tickets/issues
> Trac ticket creation has been disabled. You can still modify existing
> tickets.
>
> One side effect of pushing the rewritten commit messages is that all still
> opened pull requests (~20) in the previous mirror have been forced closed
> (not
> surprising since the sha1sum of the base commits have been modified). So if
> you had pending work, please rebase it on top of the current
> https://github.com/OSGeo/gdal and issue a new pull request. Forks of the
> previous https://github.com/OSGeo/gdal will probably have to be recreated
> from
> scratch, or "rebased" to the current one as well.
>
> The cron job that triggers website refresh has now been updated.
>
> GDAL SVN committers that don't have yet push rights to github, please
> submit a
> pull request to gdal/COMMITTERS file with a new line with your contact
> information, so your github nickname can be added to the authorized list of
> people with push rights (if you already have push rights, please also
> update
> COMMITTERS with your info)
>
> I've updated a few things on Trac wiki to point to github. If you still see
> references to svn or Trac for new tickets, you're welcome to fix them.
>
> I've initiated
> https://github.com/OSGeo/gdal/blob/master/CONTRIBUTING.md
> Needs more love.
>
> Kyle, you'll likely need to update your job for Coverity Scan.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180323/d7ba3296/attachment-0001.html>

From ben.elliston at anu.edu.au  Sat Mar 24 02:43:31 2018
From: ben.elliston at anu.edu.au (Ben Elliston)
Date: Sat, 24 Mar 2018 20:43:31 +1100
Subject: [gdal-dev] running the testsuite
Message-ID: <67661045-aef7-91af-1e76-b6c67a09698e@anu.edu.au>

Is there any documention on running the testsuite? It seems rather
problematic, and I can't work out what needs to be installed for the
testsuite to operate correctly -- is a 100% PASS rate to be expected?

Thanks,
Ben

From mateusz at loskot.net  Sat Mar 24 11:33:39 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat, 24 Mar 2018 19:33:39 +0100
Subject: [gdal-dev] https://github.com/OSGeo/gdal is the current SCM and
 ticketing system
In-Reply-To: <1723694.HDZp5Bkefu@even-i700>
References: <1723694.HDZp5Bkefu@even-i700>
Message-ID: <CABUeae9a5tXsb7edwAPfW6=u1XewfgwbwH7o1aBTN7sqDHNJ5w@mail.gmail.com>

On 23 March 2018 at 15:09, Even Rouault <even.rouault at spatialys.com> wrote:
> OK, so now you can and should use https://github.com/OSGeo/gdal to track
> developement and file new tickets/issues
> Trac ticket creation has been disabled. You can still modify existing tickets.

Great, thank you!

> GDAL SVN committers that don't have yet push rights to github, please submit a
> pull request to gdal/COMMITTERS file with a new line with your contact
> information, so your github nickname can be added to the authorized list of
> people with push rights (if you already have push rights, please also update
> COMMITTERS with your info)

FYI, I have rearranged the GDAL teams on GitHub slightly:

The master GDAL team has no access to OSGeo/gdal repository,
it does not need one, it just manages sub-teams and members
https://github.com/orgs/OSGeo/teams/gdal/

New sub-team gdal-admins has full admin access to OSGeo/gdal repo
(all members move from the pevious global GDAL team)
https://github.com/orgs/OSGeo/teams/gdal-admins/

The gdal-committers team has moved under the umbrella of GDAL master team
and has read-write access to OSGeo/gdal repo
https://github.com/orgs/OSGeo/teams/gdal-committers/


Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From mateusz at loskot.net  Sat Mar 24 11:47:08 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat, 24 Mar 2018 19:47:08 +0100
Subject: [gdal-dev] https://github.com/OSGeo/gdal is the current SCM and
 ticketing system
In-Reply-To: <1723694.HDZp5Bkefu@even-i700>
References: <1723694.HDZp5Bkefu@even-i700>
Message-ID: <CABUeae8yiP=3tXsTqFgU4+2M+tn1nWqPKE1gZJrn+SzeyDfZew@mail.gmail.com>

On 23 March 2018 at 15:09, Even Rouault <even.rouault at spatialys.com> wrote:
>
> The cron job that triggers website refresh has now been updated.
> [...]
> I've updated a few things on Trac wiki to point to github. If you still see
> references to svn or Trac for new tickets, you're welcome to fix them.
>

https://trac.osgeo.org/gdal/wiki/DownloadSource#NightlySnapshots

What is the status of the nightly builds now? The wiki still says those
are built from SVN.

I've updated a bunch of pages
https://trac.osgeo.org/gdal/wiki/HowToContribute
https://trac.osgeo.org/gdal/wiki/Buildbot
https://trac.osgeo.org/gdal/wiki/TestingNotes

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From mateusz at loskot.net  Sat Mar 24 11:50:40 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat, 24 Mar 2018 19:50:40 +0100
Subject: [gdal-dev] https://github.com/OSGeo/gdal is the current SCM and
 ticketing system
In-Reply-To: <1723694.HDZp5Bkefu@even-i700>
References: <1723694.HDZp5Bkefu@even-i700>
Message-ID: <CABUeae8HgEFmuc4HJM3fc_QSpEDqF1PE93FFmZ5X3AqDMZAHUQ@mail.gmail.com>

On 23 March 2018 at 15:09, Even Rouault <even.rouault at spatialys.com> wrote:
>
> I've updated a few things on Trac wiki to point to github.

Does this [1] mean Trac wiki to GitHub wiki would require a new RFC?

[1] https://trac.osgeo.org/gdal/wiki/rfc71_github_migration#NotcoveredbythisRFC

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From mateusz at loskot.net  Sat Mar 24 11:54:14 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat, 24 Mar 2018 19:54:14 +0100
Subject: [gdal-dev] https://github.com/OSGeo/gdal is the current SCM and
 ticketing system
In-Reply-To: <CABUeae8HgEFmuc4HJM3fc_QSpEDqF1PE93FFmZ5X3AqDMZAHUQ@mail.gmail.com>
References: <1723694.HDZp5Bkefu@even-i700>
 <CABUeae8HgEFmuc4HJM3fc_QSpEDqF1PE93FFmZ5X3AqDMZAHUQ@mail.gmail.com>
Message-ID: <CABUeae_LcAwFqwuD7F-KXnFqFAMycD9hnYLs+yMRhXWJVb7HJg@mail.gmail.com>

On 24 March 2018 at 19:50, Mateusz Loskot <mateusz at loskot.net> wrote:
> On 23 March 2018 at 15:09, Even Rouault <even.rouault at spatialys.com> wrote:
>>
>> I've updated a few things on Trac wiki to point to github.
>
> Does this [1] mean Trac wiki to GitHub wiki would require a new RFC?
>
> [1] https://trac.osgeo.org/gdal/wiki/rfc71_github_migration#NotcoveredbythisRFC


Meanwhile, I've switched off the Wiki on https://github.com/OSGeo/gdal

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From mateusz at loskot.net  Sat Mar 24 12:47:20 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat, 24 Mar 2018 20:47:20 +0100
Subject: [gdal-dev] https://github.com/OSGeo/gdal is the current SCM and
 ticketing system
In-Reply-To: <1723694.HDZp5Bkefu@even-i700>
References: <1723694.HDZp5Bkefu@even-i700>
Message-ID: <CABUeae-N9Fhz=2OLNhyCDE3PG+dYsQRnrmWSQE0cLCee83Ad0A@mail.gmail.com>

On 23 March 2018 at 15:09, Even Rouault <even.rouault at spatialys.com> wrote:
>
> GDAL SVN committers that don't have yet push rights to github, please submit a
> pull request to gdal/COMMITTERS file with a new line with your contact
> information, so your github nickname can be added to the authorized list of
> people with push rights (if you already have push rights, please also update
> COMMITTERS with your info)

I've updated gdal-commit team with committers (also added to the gdal/COMMITERS)
I was able to identify on GitHub.
Some of them will receive notification about joining the OSGeo organization,
so they will need to accept the invitation to get the commit access.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From mateusz at loskot.net  Sat Mar 24 12:48:16 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat, 24 Mar 2018 20:48:16 +0100
Subject: [gdal-dev] https://github.com/OSGeo/gdal is the current SCM and
 ticketing system
In-Reply-To: <CABUeae-N9Fhz=2OLNhyCDE3PG+dYsQRnrmWSQE0cLCee83Ad0A@mail.gmail.com>
References: <1723694.HDZp5Bkefu@even-i700>
 <CABUeae-N9Fhz=2OLNhyCDE3PG+dYsQRnrmWSQE0cLCee83Ad0A@mail.gmail.com>
Message-ID: <CABUeae9t091UjYrnUM=geHr9cwdKt1-juxgOfAHLj8CL3J3_MA@mail.gmail.com>

On 24 March 2018 at 20:47, Mateusz Loskot <mateusz at loskot.net> wrote:
> On 23 March 2018 at 15:09, Even Rouault <even.rouault at spatialys.com> wrote:
>>
>> GDAL SVN committers that don't have yet push rights to github, please submit a
>> pull request to gdal/COMMITTERS file with a new line with your contact
>> information, so your github nickname can be added to the authorized list of
>> people with push rights (if you already have push rights, please also update
>> COMMITTERS with your info)
>
> I've updated gdal-commit team (...)

gdal-committers, of course


-- 
Mateusz Loskot, http://mateusz.loskot.net

From even.rouault at spatialys.com  Sat Mar 24 13:12:06 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 24 Mar 2018 21:12:06 +0100
Subject: [gdal-dev] https://github.com/OSGeo/gdal is the current SCM and
	ticketing system
In-Reply-To: <CABUeae8yiP=3tXsTqFgU4+2M+tn1nWqPKE1gZJrn+SzeyDfZew@mail.gmail.com>
References: <1723694.HDZp5Bkefu@even-i700>
 <CABUeae8yiP=3tXsTqFgU4+2M+tn1nWqPKE1gZJrn+SzeyDfZew@mail.gmail.com>
Message-ID: <49125177.9N4iHj5Szx@even-i700>

Mateusz,

> What is the status of the nightly builds now?

Same as before: broken for years now. As it was just a snapshot of the 
repository source code, and that can be done easily from github UI, there's 
little point in resurecting a script for that IMHO

> Does this [1] mean Trac wiki to GitHub wiki would require a new RFC?

We need some discussion indeed about that I believe. Some current wiki content 
could be worth being part of official documentation ( thinking to https://
trac.osgeo.org/gdal/wiki/ConfigOptions for example ), so hosted in the git 
repo itself. There were similar discussions when proj went from Trac to GH. 
Some wiki content was migrated to GH Wiki but I think some also was migrated 
to the revamped documentation (which has been a significant effort).

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mateusz at loskot.net  Sat Mar 24 13:47:19 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat, 24 Mar 2018 21:47:19 +0100
Subject: [gdal-dev] https://github.com/OSGeo/gdal is the current SCM and
 ticketing system
In-Reply-To: <49125177.9N4iHj5Szx@even-i700>
References: <1723694.HDZp5Bkefu@even-i700>
 <CABUeae8yiP=3tXsTqFgU4+2M+tn1nWqPKE1gZJrn+SzeyDfZew@mail.gmail.com>
 <49125177.9N4iHj5Szx@even-i700>
Message-ID: <CABUeae_xeqqG+4U6MQ9k7J0-0gOkgn4cXD4J1ACYx6XO4thHhA@mail.gmail.com>

On 24 March 2018 at 21:12, Even Rouault <even.rouault at spatialys.com> wrote:
>> What is the status of the nightly builds now?
>
> Same as before: broken for years now.

Even,

Ha, I should have noticed :)

> As it was just a snapshot of the
> repository source code, and that can be done easily from github UI, there's
> little point in resurecting a script for that IMHO

OK

>> Does this [1] mean Trac wiki to GitHub wiki would require a new RFC?
>
> We need some discussion indeed about that I believe. Some current wiki content
> could be worth being part of official documentation ( thinking to https://
> trac.osgeo.org/gdal/wiki/ConfigOptions for example ), so hosted in the git
> repo itself. There were similar discussions when proj went from Trac to GH.
> Some wiki content was migrated to GH Wiki but I think some also was migrated
> to the revamped documentation (which has been a significant effort).

Good point, that could be the case for GDAL too.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From kyle at pobox.com  Mon Mar 26 08:38:54 2018
From: kyle at pobox.com (Kyle Shannon)
Date: Mon, 26 Mar 2018 09:38:54 -0600
Subject: [gdal-dev] https://github.com/OSGeo/gdal is the current SCM and
	ticketing system
In-Reply-To: <1723694.HDZp5Bkefu@even-i700>
References: <1723694.HDZp5Bkefu@even-i700>
Message-ID: <CAJ0mEz100qreYB5Pi+q6fCVzVuoO11nTvP7NqHSKNj=L2ZqSMw@mail.gmail.com>

Even,

On Fri, Mar 23, 2018 at 8:09 AM, Even Rouault
<even.rouault at spatialys.com> wrote:
> OK, so now you can and should use https://github.com/OSGeo/gdal to track
> developement and file new tickets/issues
> Trac ticket creation has been disabled. You can still modify existing tickets.
>
> One side effect of pushing the rewritten commit messages is that all still
> opened pull requests (~20) in the previous mirror have been forced closed (not
> surprising since the sha1sum of the base commits have been modified). So if
> you had pending work, please rebase it on top of the current
> https://github.com/OSGeo/gdal and issue a new pull request. Forks of the
> previous https://github.com/OSGeo/gdal will probably have to be recreated from
> scratch, or "rebased" to the current one as well.
>
> The cron job that triggers website refresh has now been updated.
>
> GDAL SVN committers that don't have yet push rights to github, please submit a
> pull request to gdal/COMMITTERS file with a new line with your contact
> information, so your github nickname can be added to the authorized list of
> people with push rights (if you already have push rights, please also update
> COMMITTERS with your info)
>
> I've updated a few things on Trac wiki to point to github. If you still see
> references to svn or Trac for new tickets, you're welcome to fix them.
>
> I've initiated
> https://github.com/OSGeo/gdal/blob/master/CONTRIBUTING.md
> Needs more love.
>
> Kyle, you'll likely need to update your job for Coverity Scan.

I'll work on enabling the webhook enabled scan and drop the cron job
on my machine when that is up.

>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com



-- 
Kyle

From even.rouault at spatialys.com  Mon Mar 26 10:22:55 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 26 Mar 2018 19:22:55 +0200
Subject: [gdal-dev] Adding WRITE_ID creation option for GeoJSON
In-Reply-To: <685c45b4344e43dca3f971e2a50f46d0@C119S212VM042.msvyvi.vaha.local>
References: <685c45b4344e43dca3f971e2a50f46d0@C119S212VM042.msvyvi.vaha.local>
Message-ID: <2379805.qqiJzZf2H3@even-i700>

On vendredi 23 mars 2018 10:59:02 CEST Rahkonen Jukka (MML) wrote:
> Hi,
> 
> Am I right that there is no option to force the writing of "id" member to
> GeoJSON features? I have noticed that if I run ogr2ogr with -preserve_fid
> option then the "id" member is added { "type": "Feature", "id": 0,
> "properties":
> 
> However, if I don't use -preserve_fid I have not discovered any way to get
> "id" into GeoJSON. If I am right, would it make sense to add the WRITE_ID
> option like the existing WRITE_NAME http://www.gdal.org/drv_geojson.html?
> 

ID_FIELD and ID_TYPE layer creation options added per
https://github.com/OSGeo/gdal/commit/812a6eea6ef36462531bfa98ff74ca21b361d1b7

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Piyush.Agram at jpl.nasa.gov  Mon Mar 26 11:15:32 2018
From: Piyush.Agram at jpl.nasa.gov (Agram, Piyush S (334D))
Date: Mon, 26 Mar 2018 18:15:32 +0000
Subject: [gdal-dev] Support for Float16 and CFloat16
Message-ID: <01EB7C89-829F-4FDD-BA8B-027DDB48E44A@jpl.nasa.gov>

Hi,
    I tried to search the gdal-dev archives but could not find much on this topic.

HDF5 files support half precision floats and so does numpy. I was wondering if there were any plans to include support for this data type?
I understand that some compilers may not support it but support could be provided by external libraries like “half”.
A lot of SAR imagery is expected to be put out in this format in the future, as it has better properties than the current CInt16 format.

Piyush
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180326/a73ca9e6/attachment.html>

From even.rouault at spatialys.com  Mon Mar 26 11:53:06 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 26 Mar 2018 20:53:06 +0200
Subject: [gdal-dev] Support for Float16 and CFloat16
In-Reply-To: <01EB7C89-829F-4FDD-BA8B-027DDB48E44A@jpl.nasa.gov>
References: <01EB7C89-829F-4FDD-BA8B-027DDB48E44A@jpl.nasa.gov>
Message-ID: <18151032.CV6mY9FFKy@even-i700>

Piyush,

>     I tried to search the gdal-dev archives but could not find much on this
> topic.
 
> HDF5 files support half precision floats and so does numpy. I was wondering
> if there were any plans to include support for this data type?

There's no native support for Float16 in C++, so your best option is to 
promote to Float32 (or CFloat32) when reading for a format where there are 
stored as half floats. This is for example what is done in the GTiff driver ( 
HalfToFloat() function in frmts/gtiff/tif_float.c )

You could add a NBITS=16 metadata item in the IMAGE_STRUCTURE metadata domain 
of the band(s) to reflect the original precision.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From markus.metz.giswork at gmail.com  Mon Mar 26 12:21:02 2018
From: markus.metz.giswork at gmail.com (Markus Metz)
Date: Mon, 26 Mar 2018 21:21:02 +0200
Subject: [gdal-dev] [GRASS-dev] PROJ 5 support in trunk
In-Reply-To: <1522010844481-0.post@n6.nabble.com>
References: <CAG+h=FEG+7KMi8nkR1bBWw8WzEcqukmPEsYyXArDiQJg+gbGsw@mail.gmail.com>
 <CAG+h=FErXb-PUwiw6zWPd9tFKJ6CAQYh8H+u3Y64MnrW0uygNA@mail.gmail.com>
 <CAG+h=FEGUE4f+9mJcLT6DaRBFegj-x9nF1D7wzSfBb9f+LN1cA@mail.gmail.com>
 <1522010844481-0.post@n6.nabble.com>
Message-ID: <CAG+h=FGPKmC=rN7atP_OaNQaivV9aTxH5+u+qSVSb5XTU4neSA@mail.gmail.com>

There is an important difference between the PROJ4 and the PROJ5+
API/syntax:

The old PROJ4 API uses latlong WGS84 as pivot datum for coordinate
transformations like

projection1 -> latlong WGS84 -> projection2
or in '+to' syntax
projection1 +to projection2

The new PROJ5+ API no longer uses a pivot datum. The advantage is that you
can directly convert from one datum to another, without going through
WGS84. The disadvantage is that the user/software using the new API has to
make sure that either a common pivot datum is used or coordinates are
correctly transformed from one datum to another, e.g. with a Helmert
Transform.

Both GDAL and GRASS have implemented the new API as a simple 2-step
pipeline like

1. projection1 -> some latlong
2. some latlong -> projection2

or in pipeline syntax

+proj=pipeline
+step +inv projection1
+step projection2

Even Rouault has done some tests and found sometimes subtle differences in
the results between the old and new API/syntax. Further on, there is no
mechanism (yet) in place to validate the pipeline, most importantly that
the output of step 1 conforms to the required input for step 2.

IMHO, the implementation of the new PROJ5+ API/syntax in GDAL and GRASS
should be regarded as experimental and testing by as many people as
possible would be a huge benefit to PROJ/GDAL/GRASS and to all applications
using these projects.

Markus M

On Sun, Mar 25, 2018 at 10:47 PM, Helmut Kudrnovsky <hellik at web.de> wrote:
>
> >Now (last related commit is trunk r72522) it's finished. I have
>introduced
> a new GRASS API that handles both PROJ 4 and PROJ >5, consisting of
>
> Thanks for this Update!
>
> Fyi See
> https://lists.osgeo.org/pipermail/osgeo4w-dev/2018-March/003557.html
>
> -------
> [...]
> The API from PROJ 4 lives on in PROJ 5, so GRASS 7.4 should be able to use
> PROJ 5 as well. We’ve been carefull not to breaking anything with this
> release.
> That comes with PROJ 6 and 7. Of course there might be implementation
> details
> in GRASS that I am unaware of that makes using PROJ 5 impossible.
> --------
>
>
>
> -----
> best regards
> Helmut
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/Grass-Dev-f3991897.html
> _______________________________________________
> grass-dev mailing list
> grass-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/grass-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180326/1fbb023d/attachment.html>

From mateusz at loskot.net  Mon Mar 26 16:20:49 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 27 Mar 2018 01:20:49 +0200
Subject: [gdal-dev] https://github.com/OSGeo/gdal is the current SCM and
 ticketing system
In-Reply-To: <1723694.HDZp5Bkefu@even-i700>
References: <1723694.HDZp5Bkefu@even-i700>
Message-ID: <CABUeae8xuRJZp_=61eoL5bf+=ZsaXOu5+wYj-xNoqPut4oSh=A@mail.gmail.com>

On 23 March 2018 at 15:09, Even Rouault <even.rouault at spatialys.com> wrote:
> OK, so now you can and should use https://github.com/OSGeo/gdal to track
> developement and file new tickets/issues

Even,

FYI, if you'd like to create issues labelling scheme different than the modest
default, here is small Python script that can bulk-manage labels based
on definitions in JSON file(s):

https://github.com/mloskot/github-label-maker

Best regards,,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From ben.elliston at anu.edu.au  Tue Mar 27 03:09:41 2018
From: ben.elliston at anu.edu.au (Ben Elliston)
Date: Tue, 27 Mar 2018 21:09:41 +1100
Subject: [gdal-dev] limiting drivers that get registered
In-Reply-To: <2214125.SKHBYVkGNz@even-i700>
References: <f92a6a2c-f69c-7560-ce80-eb05fd216c19@anu.edu.au>
 <2214125.SKHBYVkGNz@even-i700>
Message-ID: <d11976e8-b069-3acd-8856-2852b551fda3@anu.edu.au>

Hi Even

On 08/03/18 23:34, Even Rouault wrote:

> If you use GDAL as a library from your own code (C/C++), you can also
> directly call the GDALRegister_XXXX() / OGRRegisterXXXX() functions you
> are interested in, instead of GDALAllRegister()

This is ideal, as it allows a handful of drivers to be registered first,
and then GDALAllRegister() to be called to register everything else down
the line. Unfortunately, it is impossible to know which drivers are
present until you call an undefined function in the GDAL shared library.
For example, GDALRegister_HDF4() is not defined if the HDF4 library
isn't found at configure time.

Is there any way to know which drivers are available at runtime?

Cheers,
Ben

From even.rouault at spatialys.com  Tue Mar 27 03:49:34 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 27 Mar 2018 12:49:34 +0200
Subject: [gdal-dev] limiting drivers that get registered
In-Reply-To: <d11976e8-b069-3acd-8856-2852b551fda3@anu.edu.au>
References: <f92a6a2c-f69c-7560-ce80-eb05fd216c19@anu.edu.au>
 <2214125.SKHBYVkGNz@even-i700>
 <d11976e8-b069-3acd-8856-2852b551fda3@anu.edu.au>
Message-ID: <4414964.7Cd90AQHvc@even-i700>

On mardi 27 mars 2018 21:09:41 CEST Ben Elliston wrote:
> Hi Even
> 
> On 08/03/18 23:34, Even Rouault wrote:
> > If you use GDAL as a library from your own code (C/C++), you can also
> > directly call the GDALRegister_XXXX() / OGRRegisterXXXX() functions you
> > are interested in, instead of GDALAllRegister()
> 
> This is ideal, as it allows a handful of drivers to be registered first,
> and then GDALAllRegister() to be called to register everything else down
> the line

Hum why would you need to call GDALAllRegister() if you already manually 
registered some of them ?

> . Unfortunately, it is impossible to know which drivers are
> present until you call an undefined function in the GDAL shared library.
> For example, GDALRegister_HDF4() is not defined if the HDF4 library
> isn't found at configure time.
> 
> Is there any way to know which drivers are available at runtime?

Well, call GDALAllRegister() and then query GDALGetDriverByName(driver_name). 
You can unregister a driver with GDALDeregisterDriver()

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ben.elliston at anu.edu.au  Tue Mar 27 03:51:46 2018
From: ben.elliston at anu.edu.au (Ben Elliston)
Date: Tue, 27 Mar 2018 21:51:46 +1100
Subject: [gdal-dev] limiting drivers that get registered
In-Reply-To: <4414964.7Cd90AQHvc@even-i700>
References: <f92a6a2c-f69c-7560-ce80-eb05fd216c19@anu.edu.au>
 <2214125.SKHBYVkGNz@even-i700>
 <d11976e8-b069-3acd-8856-2852b551fda3@anu.edu.au>
 <4414964.7Cd90AQHvc@even-i700>
Message-ID: <8aedc18f-46fb-298a-4e79-bf104949a150@anu.edu.au>

On 27/03/18 21:49, Even Rouault wrote:

> Hum why would you need to call GDALAllRegister() if you already manually 
> registered some of them ?

Because reordering the driver list by placing commonly used drivers at
the head of the list makes a significant difference in the time taken to
open files.

> Well, call GDALAllRegister() and then query GDALGetDriverByName(driver_name). 
> You can unregister a driver with GDALDeregisterDriver()

Thanks -- you've given me an idea ..

Cheers, Ben

From even.rouault at spatialys.com  Tue Mar 27 04:00:55 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 27 Mar 2018 13:00:55 +0200
Subject: [gdal-dev] limiting drivers that get registered
In-Reply-To: <8aedc18f-46fb-298a-4e79-bf104949a150@anu.edu.au>
References: <f92a6a2c-f69c-7560-ce80-eb05fd216c19@anu.edu.au>
 <4414964.7Cd90AQHvc@even-i700>
 <8aedc18f-46fb-298a-4e79-bf104949a150@anu.edu.au>
Message-ID: <2826965.Xcyy2e4efU@even-i700>

On mardi 27 mars 2018 21:51:46 CEST Ben Elliston wrote:
> On 27/03/18 21:49, Even Rouault wrote:
> > Hum why would you need to call GDALAllRegister() if you already manually
> > registered some of them ?
> 
> Because reordering the driver list by placing commonly used drivers at
> the head of the list makes a significant difference in the time taken to
> open files.

Ah that was apparently your actual need rather than limiting the number of 
drivers per-se. Do you have profiled where time was lost if you find opening 
too slow ? The identification logic of drivers is supposed to operate fast 
(extension based, or on the content of the first kilobyte of the header), but 
there might be some drivers where improvements can be done.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ben.elliston at anu.edu.au  Tue Mar 27 05:04:38 2018
From: ben.elliston at anu.edu.au (Ben Elliston)
Date: Tue, 27 Mar 2018 23:04:38 +1100
Subject: [gdal-dev] limiting drivers that get registered
In-Reply-To: <2826965.Xcyy2e4efU@even-i700>
References: <f92a6a2c-f69c-7560-ce80-eb05fd216c19@anu.edu.au>
 <4414964.7Cd90AQHvc@even-i700>
 <8aedc18f-46fb-298a-4e79-bf104949a150@anu.edu.au>
 <2826965.Xcyy2e4efU@even-i700>
Message-ID: <c1b0c781-5ded-ac3f-24f2-adaebf8d5f7f@anu.edu.au>

On 27/03/18 22:00, Even Rouault wrote:

> Ah that was apparently your actual need rather than limiting the number of 
> drivers per-se. Do you have profiled where time was lost if you find opening 
> too slow ? The identification logic of drivers is supposed to operate fast 
> (extension based, or on the content of the first kilobyte of the header), but 
> there might be some drivers where improvements can be done.

I wrote a pathological benchmark that opened and closed an HDF5 file
10,000 times. Moving the HDF5 driver to the head of the driver list gave
about a 5x speedup.

Thanks for the idea earlier. I came up with an acceptable solution:
register all drivers, look to see which ones are present by using
GDALGetDriverShortName(), and then de-register all the drivers.

Cheers, Ben

From raphael.das.gupta at hsr.ch  Tue Mar 27 06:11:31 2018
From: raphael.das.gupta at hsr.ch (Raphael Das Gupta)
Date: Tue, 27 Mar 2018 15:11:31 +0200
Subject: [gdal-dev] how to preserve color-interpretation when merging TIFFs
 and adding alpha band with gdalbuildvrt+gdalwarp?
Message-ID: <7bb071af-fd4f-2505-ee26-8e1df7f3580b@hsr.ch>

Heya GDALers

Is someone here able to answer
https://gis.stackexchange.com/q/274775/51574 ? (I didn't get any answers
on GIS Stack Exchange, yet. If more information is needed, please let me
know here or on Stack Exchange.)

Is my approach (i.e. aiming to preserve color interpretation) even the
right one, or should I instead try to convert everything to RGB?

Kind regards,
Raphael

From even.rouault at spatialys.com  Tue Mar 27 06:41:09 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 27 Mar 2018 15:41:09 +0200
Subject: [gdal-dev] how to preserve color-interpretation when merging
	TIFFs and adding alpha band with gdalbuildvrt+gdalwarp?
In-Reply-To: <7bb071af-fd4f-2505-ee26-8e1df7f3580b@hsr.ch>
References: <7bb071af-fd4f-2505-ee26-8e1df7f3580b@hsr.ch>
Message-ID: <1915200.9kZzlaslRU@even-i700>

On mardi 27 mars 2018 15:11:31 CEST Raphael Das Gupta wrote:
> https://gis.stackexchange.com/q/274775/51574

If you use latest GDAL 2.2.4, you don't even need to add -setci to gdalwarp
The fact that the resulting raster doesn't display well by default with QGIS 
2.18 (actually I also find it to be the case with a QGIS 3 dev version) is 
just a small glitch of QGIS itself that doesn't recognize by default a file 
with a band with a color palette and an alpha band, but the file itself is 
just fine. Please file a QGIS ticket for that.

Regarding the palette having 256 entries rather than 2, this is a feature of 
the TIFF format itself. When you add the alpha band, we need 8 bit depth, so 
the color table has 256 entries. If you didn't need an alpha band, then adding 
-co NBITS=1 would have recreated a 1-bit depth file.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From steven.beale at woodplc.com  Tue Mar 27 07:44:27 2018
From: steven.beale at woodplc.com (Beale, Steven)
Date: Tue, 27 Mar 2018 14:44:27 +0000
Subject: [gdal-dev] gdal translate/warp goes16
In-Reply-To: <MWHPR04MB0638D52BEDD86BB1192CAFDFF0AA0@MWHPR04MB0638.namprd04.prod.outlook.com>
References: <1521571054646-0.post@n6.nabble.com>
 <B437AFBC-517B-4515-86FE-142B94FEE987@weatherwary.com>
 <MWHPR04MB0638D52BEDD86BB1192CAFDFF0AA0@MWHPR04MB0638.namprd04.prod.outlook.com>
Message-ID: <MWHPR04MB063885B3B05BB9B9F726C52AF0AC0@MWHPR04MB0638.namprd04.prod.outlook.com>

I never did resolve this issue, but using the python libraries instead worked out fine.
-s

From: Beale, Steven [mailto:steven.beale at woodplc.com]
Sent: Wednesday, March 21, 2018 3:39 PM
To: Zachary Flamig <zac at weatherwary.com>; Steven Beale <steven.beale at woodplc.com>
Cc: gdal-dev at lists.osgeo.org
Subject: RE: [gdal-dev] gdal translate/warp goes16

Hi Zac,
I tried to be as explicit as possible setting the source srs, including the semi-major/minor axes:
gdalwarp -s_srs "+proj=geos +a=6378137 +b=6356752.31414 +lon_0=-75 +h=35786023 +x_0=0 +y_0=0 +ellps=GRS80 +units=m +no_defs  +sweep=x" -t_srs EPSG:4326 -dstnodata -999.0 -tr 0.009 0.009 -te 290 40 320 65 -r near <in> <out>

But I still have the longitude shifting.
Out of curiosity I tried +sweep=y, just to see what would happen, and that didn’t do anything either… could the sweep be getting ignored entirely?
Just to verify that the srs was being interpreted at all, I tried adjusting lon_0, which did work. Not very helpful though.
Thinking there could possibly be some conflict in setting ellps=GRS80 and setting parameters by hand, I omitted that the +ellps. Same result.
Any other thoughts?

Thanks,
Steve

From: Zachary Flamig [mailto:zac at weatherwary.com]
Sent: Wednesday, March 21, 2018 4:04 AM
To: Steven Beale <steven.beale at woodplc.com<mailto:steven.beale at woodplc.com>>
Cc: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] gdal translate/warp goes16

Hi Steven,

So the issue here is that gdal_translate doesn’t properly store the +sweep=x in the geotiff.

See http://geotiff.maptools.narkive.com/3CqwNeMd/geos-projection-sweep-parameter<https://urldefense.proofpoint.com/v2/url?u=http-3A__geotiff.maptools.narkive.com_3CqwNeMd_geos-2Dprojection-2Dsweep-2Dparameter&d=DwMFaQ&c=ZWY66qCYUTYUcOev9C2GlDEcKuYKzoWDVNR_L93Z9mQ&r=xGAbC1Ogv9duClaR3TChYqg_fGB4xrhak7uN1kZcfR8&m=zVXU4kc36wijhVLYDg1WghqZOoFePzeG6PQfNC150tU&s=f466QSOBNcqeD3kETK3-K2-4KeUmCONhKlY6J9t4dMU&e=> for some relevant discussion. I believe the best solution right now is to specify the s_srs in the gdalwarp command like -s_srs "+proj=geos +lon_0=-75 +h=35786023 +x_0=0 +y_0=0 +ellps=GRS80 +units=m +no_defs  +sweep=x"

This is a bit of a mess, sorry about that.

Zac

On Mar 20, 2018, at 9:37 PM, Steven Beale <steven.beale at woodplc.com<mailto:steven.beale at woodplc.com>> wrote:

Hi gdalers,

I'm a little out of my field here, usually I work with weather/climate data,
but I need to warp some goes16 satellite data. (source is aws s3:
https://noaa-goes16.s3.amazonaws.com/ABI-L2-CMIPF/2018/079/12/OR_ABI-L2-CMIPF-M3C01_G16_s20180791200447_e20180791211214_c20180791211280.nc<https://urldefense.proofpoint.com/v2/url?u=https-3A__noaa-2Dgoes16.s3.amazonaws.com_ABI-2DL2-2DCMIPF_2018_079_12_OR-5FABI-2DL2-2DCMIPF-2DM3C01-5FG16-5Fs20180791200447-5Fe20180791211214-5Fc20180791211280.nc&d=DwMFaQ&c=ZWY66qCYUTYUcOev9C2GlDEcKuYKzoWDVNR_L93Z9mQ&r=xGAbC1Ogv9duClaR3TChYqg_fGB4xrhak7uN1kZcfR8&m=zVXU4kc36wijhVLYDg1WghqZOoFePzeG6PQfNC150tU&s=wpMH3kBCq917DTkCCXLtN0FpDoYrz6Xbmh4KZvNmrSM&e=>
- the link should work for a few months then it will be glaciered and
unavailable)

source data is netcdf, I'm using nco tools & gdal for the processing.

My work flow is:
1. clip the data to the region of interest (north atlantic):
ncks -d x,5424,8678 -d y,0,2170 <raw.nc> step1.nc
2. deflate & unscale
gdal_translate -ot float32 -unscale -CO COMPRESS=deflate NETCDF:step1.nc:CMI
step2.tiff
3. warp (in this case data is 1km resolution : ~0.009 degrees)
gdalwarp -t_srs EPSG:4326 -dstnodata -999.0 -tr 0.009 0.009 -te 290 40 320
65  -r near step2.tiff step3.tiff
4. convert back to nc
gdal_translate -ot float32 -of NETCDF step3.tiff output.nc

The problem i have is that the output has the longitude shifted to the west
by about 10 degrees.
The issue seems related to the ncks clipping, if I exclude the x clip,
everything works out fine, but takes significantly longer.
Here's an example once it's loaded into an erddap server;
<http://osgeo-org.1560.x6.nabble.com/file/t382897/GOES16_L2CMIPF_M3C01_201803201200.png<https://urldefense.proofpoint.com/v2/url?u=http-3A__osgeo-2Dorg.1560.x6.nabble.com_file_t382897_GOES16-5FL2CMIPF-5FM3C01-5F201803201200.png&d=DwMGaQ&c=ZWY66qCYUTYUcOev9C2GlDEcKuYKzoWDVNR_L93Z9mQ&r=xGAbC1Ogv9duClaR3TChYqg_fGB4xrhak7uN1kZcfR8&m=0691hAhg8moDDDi0i-csopQGwl9LCy8yuefXjalO0vQ&s=cn4pjYjeC3jugb7R5Knazy7vp4bkXq-VhoKI6CAQhVs&e=>>
You can see greenland to the west of it's map underlay.

I'm using gdal v2.3.0, netcdf v4.4.1.1, nco v4.7.3 & proj4 v5.0.0





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html<https://urldefense.proofpoint.com/v2/url?u=http-3A__osgeo-2Dorg.1560.x6.nabble.com_GDAL-2DDev-2Df3742093.html&d=DwMGaQ&c=ZWY66qCYUTYUcOev9C2GlDEcKuYKzoWDVNR_L93Z9mQ&r=xGAbC1Ogv9duClaR3TChYqg_fGB4xrhak7uN1kZcfR8&m=0691hAhg8moDDDi0i-csopQGwl9LCy8yuefXjalO0vQ&s=-fnlaXGCZBUsGk7PEYpsRh26l-qFT1E4lJ9u8ZkH0vo&e=>
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev<https://urldefense.proofpoint.com/v2/url?u=https-3A__lists.osgeo.org_mailman_listinfo_gdal-2Ddev&d=DwMGaQ&c=ZWY66qCYUTYUcOev9C2GlDEcKuYKzoWDVNR_L93Z9mQ&r=xGAbC1Ogv9duClaR3TChYqg_fGB4xrhak7uN1kZcfR8&m=0691hAhg8moDDDi0i-csopQGwl9LCy8yuefXjalO0vQ&s=zDMkCvDbctF6dQi2AA6bN6zdwY_AkV-EsH495ySbCRE&e=>


________________________________


This message is the property of John Wood Group PLC and/or its subsidiaries and/or affiliates and is intended only for the named recipient(s). Its contents (including any attachments) may be confidential, legally privileged or otherwise protected from disclosure by law. Unauthorised use, copying, distribution or disclosure of any of it may be unlawful and is strictly prohibited. We assume no responsibility to persons other than the intended named recipient(s) and do not accept liability for any errors or omissions which are a result of email transmission. If you have received this message in error, please notify us immediately by reply email to the sender and confirm that the original message and any attachments and copies have been destroyed and deleted from your system.



If you do not wish to receive future unsolicited commercial electronic messages from us, please forward this email to: unsubscribe at woodplc.com<mailto:unsubscribe at woodplc.com> and include “Unsubscribe” in the subject line. If applicable, you will continue to receive invoices, project communications and similar factual, non-commercial electronic communications.



Please click http://www.woodplc.com/email-disclaimer for notices and company information in relation to emails originating in the UK, Italy or France.


________________________________

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180327/4f759479/attachment-0001.html>

From gdal at geoworld.de  Tue Mar 27 12:45:34 2018
From: gdal at geoworld.de (Nicol Hermann)
Date: Tue, 27 Mar 2018 21:45:34 +0200
Subject: [gdal-dev] GDAL with Teigha DWG driver
Message-ID: <1522179934.11221.2.camel@geoworld.de>

Hello List,

I am trying to compile GDAL 2.2.4 with TeighaFileConverter_4.3.2.0 (htt
ps://www.opendesign.com/guestfiles/teigha_file_converter).
The configure parameters are:
--with-teigha=/usr/bin/TeighaFileConverter_4.3.2.0 --with-teigha-
plt=Linux

Unfortunately the make command fails with:

In file included from ogr_dwg.h:41:0,
                 from ogrdwgdriver.cpp:29:
dwg_headers.h:38:23: fatal error: OdaCommon.h: No such file or
directory
compilation terminated.

Does anybody know where to get 'OdaCommon.h' from?
Anything else to change?

Thanks
Nicol

From markus.metz.giswork at gmail.com  Tue Mar 27 12:49:56 2018
From: markus.metz.giswork at gmail.com (Markus Metz)
Date: Tue, 27 Mar 2018 21:49:56 +0200
Subject: [gdal-dev] [GRASS-dev] PROJ 5 support in trunk
In-Reply-To: <CB205686-4E9C-442F-A5C4-97566FB9D5F5@sdfe.dk>
References: <CAG+h=FEG+7KMi8nkR1bBWw8WzEcqukmPEsYyXArDiQJg+gbGsw@mail.gmail.com>
 <CAG+h=FErXb-PUwiw6zWPd9tFKJ6CAQYh8H+u3Y64MnrW0uygNA@mail.gmail.com>
 <CAG+h=FEGUE4f+9mJcLT6DaRBFegj-x9nF1D7wzSfBb9f+LN1cA@mail.gmail.com>
 <1522010844481-0.post@n6.nabble.com>
 <CAG+h=FGPKmC=rN7atP_OaNQaivV9aTxH5+u+qSVSb5XTU4neSA@mail.gmail.com>
 <CB205686-4E9C-442F-A5C4-97566FB9D5F5@sdfe.dk>
Message-ID: <CAG+h=FHVrMOdck=1zA__dQVpA0rz8dnK0KxrzqoR-0AvE=CDUw@mail.gmail.com>

On Mon, Mar 26, 2018 at 10:51 PM, Kristian Evers <kreve at sdfe.dk> wrote:

>
>
> On 26 Mar 2018, at 21:21, Markus Metz <markus.metz.giswork at gmail.com>
> wrote:
>
> There is an important difference between the PROJ4 and the PROJ5+
> API/syntax:
>
> The old PROJ4 API uses latlong WGS84 as pivot datum for coordinate
> transformations like
>
> projection1 -> latlong WGS84 -> projection2
> or in '+to' syntax
> projection1 +to projection2
>
> The new PROJ5+ API no longer uses a pivot datum. The advantage is that you
> can directly convert from one datum to another, without going through
> WGS84. The disadvantage is that the user/software using the new API has to
> make sure that either a common pivot datum is used or coordinates are
> correctly transformed from one datum to another, e.g. with a Helmert
> Transform.
>
> Both GDAL and GRASS have implemented the new API as a simple 2-step
> pipeline like
>
> 1. projection1 -> some latlong
> 2. some latlong -> projection2
>
> or in pipeline syntax
>
> +proj=pipeline
> +step +inv projection1
> +step projection2
>
>
> This is actually exactly what the proj_crs_to_crs() function does. When I
> originally wrote it I had an idea that this should only be used with
> init-files,
> but seeing how people need a simple way to do what they’ve always done I
> think it might be better to relax that requirement and allow input similar
> to what goes into cs2cs and pj_transform().
>

The challenge is that users of other software using the new PROJ API like
GDAL and GRASS expect that reprojecting a dataset from one CRS to another
CRS "just works".  Input and output CRS can be anything custom defined.
Either PROJ or other software using PROJ must have some mechanism to decide
if the requested reprojection can be done or not.

>
> My plan for this function is that it eventually will be able to construct
> a transformation between CRS’s without the WGS84 pivot. This will be guided
> by the EPSG database. I have still to work out exactly how. For now
> though, it works fine with already existing init files and WGS84 as a pivot
> datum.
> My hope is that this will land in version 6 but I won’t promise that just
> yet.
>

Looking forward to this function! But what if a dataset comes with a CRS
definition without EPSG code? Can we expect that PROJ handles this or
should applications using the PROJ API handle this?

Markus M


>
> Even Rouault has done some tests and found sometimes subtle differences in
> the results between the old and new API/syntax. Further on, there is no
> mechanism (yet) in place to validate the pipeline, most importantly that
> the output of step 1 conforms to the required input for step 2.
>
>
> I believe we have sorted those problems out in the coming version 5.0.1.
>
> Regarding validation of input/output from pipeline steps. We can probably
> do some basic checks, but in the end you will always be required to know
> what you are doing. Mind you, we are not expecting everyday users to
> construct their own pipelines all the time. It is a powertool for the
> accomplished
> user that knows what he is doing. Most users should have their needs met
> by predefined transformations in init-files such as the epsg file. And
> eventually
> in a more clever way using the EPSG database directly as mentioned above.
>
>
> IMHO, the implementation of the new PROJ5+ API/syntax in GDAL and GRASS
> should be regarded as experimental and testing by as many people as
> possible would be a huge benefit to PROJ/GDAL/GRASS and to all applications
> using these projects.
>
> Markus M
>
> On Sun, Mar 25, 2018 at 10:47 PM, Helmut Kudrnovsky <hellik at web.de> wrote:
> >
> > >Now (last related commit is trunk r72522) it's finished. I have
> >introduced
> > a new GRASS API that handles both PROJ 4 and PROJ >5, consisting of
> >
> > Thanks for this Update!
> >
> > Fyi See
> > https://lists.osgeo.org/pipermail/osgeo4w-dev/2018-March/003557.html
> >
> > -------
> > [...]
> > The API from PROJ 4 lives on in PROJ 5, so GRASS 7.4 should be able to
> use
> > PROJ 5 as well. We’ve been carefull not to breaking anything with this
> > release.
> > That comes with PROJ 6 and 7. Of course there might be implementation
> > details
> > in GRASS that I am unaware of that makes using PROJ 5 impossible.
> > --------
> >
> >
> >
> > -----
> > best regards
> > Helmut
> > --
> > Sent from: http://osgeo-org.1560.x6.nabble.com/Grass-Dev-f3991897.html
> > _______________________________________________
> > grass-dev mailing list
> > grass-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/grass-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180327/97cfc2ff/attachment.html>

From lucena_ivan at hotmail.com  Tue Mar 27 13:24:50 2018
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Tue, 27 Mar 2018 20:24:50 +0000
Subject: [gdal-dev] GDAL with Teigha DWG driver
In-Reply-To: <1522179934.11221.2.camel@geoworld.de>
References: <1522179934.11221.2.camel@geoworld.de>
Message-ID: <MWHPR2201MB1264B8FADC37B1AE6D92C8DEF2AC0@MWHPR2201MB1264.namprd22.prod.outlook.com>

Hi Nicol,

I've been through the same problem.

Actually, I was helping someone that had that problem.

If I remember correctly, the SDK that you download from the site doesn't have some needed components to build the GDAL driver.

You would need to register ($?) with that company to get the full SDK.

The guys that I was helping did that and it worked fine for them.

But don't we have a new driver to handle that format now that is based on open source?

Regards,

Ivan

________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Nicol Hermann <gdal at geoworld.de>
Sent: Tuesday, March 27, 2018 3:45 PM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] GDAL with Teigha DWG driver

Hello List,

I am trying to compile GDAL 2.2.4 with TeighaFileConverter_4.3.2.0 (htt
ps://www.opendesign.com/guestfiles/teigha_file_converter).
The configure parameters are:
--with-teigha=/usr/bin/TeighaFileConverter_4.3.2.0 --with-teigha-
plt=Linux

Unfortunately the make command fails with:

In file included from ogr_dwg.h:41:0,
                 from ogrdwgdriver.cpp:29:
dwg_headers.h:38:23: fatal error: OdaCommon.h: No such file or
directory
compilation terminated.

Does anybody know where to get 'OdaCommon.h' from?
Anything else to change?

Thanks
Nicol
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180327/c5da29b2/attachment-0001.html>

From ireese at linz.govt.nz  Tue Mar 27 13:56:24 2018
From: ireese at linz.govt.nz (Ian Reese)
Date: Tue, 27 Mar 2018 20:56:24 +0000
Subject: [gdal-dev] FW: gdal_merge.py
In-Reply-To: <CE106C36F836424AB340432214B378BA2BF37C8E@prdassexch01.ad.linz.govt.nz>
References: <CE106C36F836424AB340432214B378BA2BF37C8E@prdassexch01.ad.linz.govt.nz>
Message-ID: <CE106C36F836424AB340432214B378BA2F2F338D@prdassexch01.ad.linz.govt.nz>

HI Gdal,

Just wanted to follow this up.

Cheers,

Ian

From: Ian Reese
Sent: Monday, 12 March 2018 6:55 p.m.
To: gdal-dev at lists.osgeo.org
Subject: gdal_merge.py

Hi Gdal,

I am having some issues with gdal_merge.py.

When I merge two tifs together, the original nodata value is converted to 0, no matter what that original no data.  Here is my test case:

Data:

https://data.linz.govt.nz/x/9iitN4 DEM_BA32_3501_2013

https://data.linz.govt.nz/x/WLurgo DEM_BA31_3550_2013

Running gdalinfo on both files reveals a 'nodata' value of -9999.  When I view the data as individual files in QGIS, the 'nodata'  regions are confirmed as 'nodata' or '-9999' and are rendered transparent.

Next I run gdal_merge.py:

gdal_merge.py -o test_merge.tif *.tif

I also try:

gdal_merge.py -n -9999 -a_nodata -9999 -o test_merge_wnodata.tif *.tif

No matter which variation of merge I run, those regions that once contained 'nodata' or '-9999' are converted to '0' and the nodata value is not retained after the merge.  When I load the test_merge_wnodata.tif into QGIS, those regions once containing 'nodata', are now filled with 0 and rendered as such.

Maybe this is a bug or am I using gdal_merge.py improperly.

Cheers,

Ian


________________________________

This message contains information, which may be in confidence and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180327/d49946ca/attachment.html>

From raphael.das.gupta at hsr.ch  Wed Mar 28 05:28:57 2018
From: raphael.das.gupta at hsr.ch (Raphael Das Gupta)
Date: Wed, 28 Mar 2018 14:28:57 +0200
Subject: [gdal-dev] FW: gdal_merge.py
In-Reply-To: <CE106C36F836424AB340432214B378BA2F2F338D@prdassexch01.ad.linz.govt.nz>
References: <CE106C36F836424AB340432214B378BA2BF37C8E@prdassexch01.ad.linz.govt.nz>
 <CE106C36F836424AB340432214B378BA2F2F338D@prdassexch01.ad.linz.govt.nz>
Message-ID: <7829753d-35a5-4a8d-ac21-7fb5c8cfe2cd@hsr.ch>

Hi Ian, heya GDALers

On 27.03.2018 22:56, Ian Reese wrote:
> Maybe this is a bug or am I using gdal_merge.py improperly.
I've recently become unsure whether (and when) gdal_merge.py should be
used at all, or whether gdalbuildvrt followed by gdaltranslate or
gdalwarp is always preferable. (Also asked here:
https://gis.stackexchange.com/q/272344/51574 )

Regards,
Raphael
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180328/d78c8601/attachment.html>

From even.rouault at spatialys.com  Wed Mar 28 06:26:53 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 28 Mar 2018 15:26:53 +0200
Subject: [gdal-dev] gdal_merge.py
In-Reply-To: <CE106C36F836424AB340432214B378BA2BF37C8E@prdassexch01.ad.linz.govt.nz>
References: <CE106C36F836424AB340432214B378BA2BF37C8E@prdassexch01.ad.linz.govt.nz>
Message-ID: <47572729.MANezxz67R@even-i700>

On lundi 12 mars 2018 05:55:10 CEST Ian Reese wrote:
> No matter which variation of merge I run, those regions that once contained
> 'nodata' or '-9999' are converted to '0' and the nodata value is not
> retained after the merge.  When I load the test_merge_wnodata.tif into
> QGIS, those regions once containing 'nodata', are now filled with 0 and
> rendered as such.

gdal_merge.py -n -9999 -a_nodata -9999 -o test_merge_wnodata.tif *.tif
or even
gdal_merge.py -a_nodata -9999 -o test_merge_wnodata.tif *.tif
work fine for me with recent enough GDAL (2.2)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andrew at aitchison.me.uk  Wed Mar 28 07:05:34 2018
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Wed, 28 Mar 2018 15:05:34 +0100 (BST)
Subject: [gdal-dev] Extension based file identification in drivers
In-Reply-To: <2826965.Xcyy2e4efU@even-i700>
References: <f92a6a2c-f69c-7560-ce80-eb05fd216c19@anu.edu.au>
 <4414964.7Cd90AQHvc@even-i700>
 <8aedc18f-46fb-298a-4e79-bf104949a150@anu.edu.au>
 <2826965.Xcyy2e4efU@even-i700>
Message-ID: <alpine.LRH.2.21.1803281500170.6865@warden.aitchison.me.uk>

On Tue, 27 Mar 2018, Even Rouault wrote:

>  The identification logic of drivers is supposed to operate fast 
> (extension based, or on the content of the first kilobyte of the header),

If I understand correctly Frank Warmerdam did not favour extension based 
file identification:
https://lists.osgeo.org/pipermail/gdal-dev/2013-February/035516.html
   GDAL is based on the idea that file formats are discovered by
   inspecting file contents rather than based on extension and I don't
   want to make it too easy for applications to ignore this principle
   and revert to extensions.

I have therefore tried to avoid using extension to identify file type.

Has thinking on this moved on in the last five years ?

-- 
Andrew C. Aitchison					Cambridge, UK
 			andrew at aitchison.me.uk

From even.rouault at spatialys.com  Wed Mar 28 07:13:45 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 28 Mar 2018 16:13:45 +0200
Subject: [gdal-dev] Extension based file identification in drivers
In-Reply-To: <alpine.LRH.2.21.1803281500170.6865@warden.aitchison.me.uk>
References: <f92a6a2c-f69c-7560-ce80-eb05fd216c19@anu.edu.au>
 <2826965.Xcyy2e4efU@even-i700>
 <alpine.LRH.2.21.1803281500170.6865@warden.aitchison.me.uk>
Message-ID: <76114938.JStidv0Jsx@even-i700>

On mercredi 28 mars 2018 15:05:34 CEST Andrew C Aitchison wrote:
> On Tue, 27 Mar 2018, Even Rouault wrote:
> >  The identification logic of drivers is supposed to operate fast
> > 
> > (extension based, or on the content of the first kilobyte of the header),
> 
> If I understand correctly Frank Warmerdam did not favour extension based
> file identification:
> https://lists.osgeo.org/pipermail/gdal-dev/2013-February/035516.html
>    GDAL is based on the idea that file formats are discovered by
>    inspecting file contents rather than based on extension and I don't
>    want to make it too easy for applications to ignore this principle
>    and revert to extensions.
> 
> I have therefore tried to avoid using extension to identify file type.
> 
> Has thinking on this moved on in the last five years ?

No. Identification per file content is still the primary identification 
method. There are a few drivers where this is not possible due to the file 
format (absence of header with unambiguous signature), and thus extension is 
used as a fallback.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Wed Mar 28 07:28:14 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Wed, 28 Mar 2018 14:28:14 +0000
Subject: [gdal-dev] GDAL can't open MBTiles sample from the MapBox site
Message-ID: <1522247297916.45414@maanmittauslaitos.fi>

Hi,
On page https://www.mapbox.com/help/define-mbtiles/ there is a link into 
https://www.mapbox.com/help/data/trails.mbtiles

My GDAL 2.3.0dev does list MBTiles as a supported format but it can't still open this database

gdalinfo trails.mbtiles
ERROR 4: `trails.mbtiles' not recognized as a supported file format.
gdalinfo failed - unable to open 'trails.mbtiles'.

-Jukka Rahkonen-

From mdione at grulic.org.ar  Wed Mar 28 07:31:32 2018
From: mdione at grulic.org.ar (Marcos Dione)
Date: Wed, 28 Mar 2018 16:31:32 +0200
Subject: [gdal-dev] FW: gdal_merge.py
In-Reply-To: <7829753d-35a5-4a8d-ac21-7fb5c8cfe2cd@hsr.ch>
Message-ID: <20180328143132.GA23534@diablo.grulicueva.local>

On Wed, Mar 28, 2018 at 02:28:57PM +0200, Raphael Das Gupta wrote:
> On 27.03.2018 22:56, Ian Reese wrote:
> > Maybe this is a bug or am I using gdal_merge.py improperly.
> I've recently become unsure whether (and when) gdal_merge.py should be
> used at all, or whether gdalbuildvrt followed by gdaltranslate or
> gdalwarp is always preferable. (Also asked here:
> https://gis.stackexchange.com/q/272344/51574 )

    in my opinion, gdal_merge should be used only if the merged version
will be used for more things or if you're going to use it with something
that doesn't know how to read the .vrt files (i.e., is not using gdal).

    .vrt files have the advantage that are fats to generate, are easy to
update if one of the sources is changed, and it could be faster if the
sources are compressed and the target is thought to be compressed too (I
have no numbers to back this up, it's just a hunch).

    Cheers,

	-- Marcos.

-- 
(Not so) Random fortune:
The technology industry sees itself as in rebellion against corporate
America: not corrupt, not buttoned-up, not empty. In fact, a tech company
can be as corrupt, soulless, and empty as any corporation, but being
unprofessional helps us maintain the belief that we are somehow different
from Wall Street.
	    -- Shanley Kane

From even.rouault at spatialys.com  Wed Mar 28 07:47:53 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 28 Mar 2018 16:47:53 +0200
Subject: [gdal-dev] GDAL can't open MBTiles sample from the MapBox site
In-Reply-To: <1522247297916.45414@maanmittauslaitos.fi>
References: <1522247297916.45414@maanmittauslaitos.fi>
Message-ID: <1732444.2Ai1vCykaL@even-i700>

On mercredi 28 mars 2018 14:28:14 CEST Rahkonen Jukka (MML) wrote:
> Hi,
> On page https://www.mapbox.com/help/define-mbtiles/ there is a link into
> https://www.mapbox.com/help/data/trails.mbtiles
> 
> My GDAL 2.3.0dev does list MBTiles as a supported format but it can't still
> open this database
> 
> gdalinfo trails.mbtiles
> ERROR 4: `trails.mbtiles' not recognized as a supported file format.
> gdalinfo failed - unable to open 'trails.mbtiles'.

Jukka,

Yep, there's no raster in that file, but vector instead.
So:

$ ogrinfo trails.mbtiles -al -so
INFO: Open of `trails.mbtiles'
      using driver `MBTiles' successful.
Metadata:
  ZOOM_LEVEL=14
  center=-113.8348,48.6402,9
  format=pbf
  maxzoom=14
  minzoom=0

Layer name: multilinestring-glacier_trails
Geometry: Unknown (any)
Feature Count: 1409
Extent: (-12743581.355705, 6149206.051486) - (-12604160.216112, 
6276397.266552)
Layer SRS WKT:
PROJCS["WGS 84 / Pseudo-Mercator",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Mercator_1SP"],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AXIS["X",EAST],
    AXIS["Y",NORTH],
    EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 
+x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"],
    AUTHORITY["EPSG","3857"]]
mvt_id: Integer64 (0.0)
Avg_Slope: Real (0.0)
CLASS: Real (0.0)
DESC_SEG: String (0.0)
LENGTH: Real (0.0)
MILES: Real (0.0)
NAME: String (0.0)
ROUTE_NO: Real (0.0)
SEG_NO: Real (0.0)
evaluating: String (0.0)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Wed Mar 28 08:03:17 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Wed, 28 Mar 2018 15:03:17 +0000
Subject: [gdal-dev] GDAL can't open MBTiles sample from the MapBox site
In-Reply-To: <1732444.2Ai1vCykaL@even-i700>
References: <1522247297916.45414@maanmittauslaitos.fi>,
 <1732444.2Ai1vCykaL@even-i700>
Message-ID: <1522249400740.87572@maanmittauslaitos.fi>

Hi Even,

Thanks, after updating my GDAL to a more recent 2.3.0dev version ogrinfo indeed shows that information.

-Jukka-
________________________________________
Lähettäjä: Even Rouault <even.rouault at spatialys.com>
Lähetetty: 28. maaliskuuta 2018 17:47
Vastaanottaja: gdal-dev at lists.osgeo.org
Kopio: Rahkonen Jukka (MML)
Aihe: Re: [gdal-dev] GDAL can't open MBTiles sample from the MapBox site

On mercredi 28 mars 2018 14:28:14 CEST Rahkonen Jukka (MML) wrote:
> Hi,
> On page https://www.mapbox.com/help/define-mbtiles/ there is a link into
> https://www.mapbox.com/help/data/trails.mbtiles
>
> My GDAL 2.3.0dev does list MBTiles as a supported format but it can't still
> open this database
>
> gdalinfo trails.mbtiles
> ERROR 4: `trails.mbtiles' not recognized as a supported file format.
> gdalinfo failed - unable to open 'trails.mbtiles'.

Jukka,

Yep, there's no raster in that file, but vector instead.
So:

$ ogrinfo trails.mbtiles -al -so
INFO: Open of `trails.mbtiles'
      using driver `MBTiles' successful.
Metadata:
  ZOOM_LEVEL=14
  center=-113.8348,48.6402,9
  format=pbf
  maxzoom=14
  minzoom=0

Layer name: multilinestring-glacier_trails
Geometry: Unknown (any)
Feature Count: 1409
Extent: (-12743581.355705, 6149206.051486) - (-12604160.216112,
6276397.266552)
Layer SRS WKT:
PROJCS["WGS 84 / Pseudo-Mercator",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Mercator_1SP"],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AXIS["X",EAST],
    AXIS["Y",NORTH],
    EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0
+x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"],
    AUTHORITY["EPSG","3857"]]
mvt_id: Integer64 (0.0)
Avg_Slope: Real (0.0)
CLASS: Real (0.0)
DESC_SEG: String (0.0)
LENGTH: Real (0.0)
MILES: Real (0.0)
NAME: String (0.0)
ROUTE_NO: Real (0.0)
SEG_NO: Real (0.0)
evaluating: String (0.0)

Even

--
Spatialys - Geospatial professional services
http://www.spatialys.com

From raphael.das.gupta at hsr.ch  Wed Mar 28 08:58:37 2018
From: raphael.das.gupta at hsr.ch (Raphael Das Gupta)
Date: Wed, 28 Mar 2018 17:58:37 +0200
Subject: [gdal-dev] FW: gdal_merge.py
In-Reply-To: <20180328143132.GA23534@diablo.grulicueva.local>
References: <20180328143132.GA23534@diablo.grulicueva.local>
Message-ID: <d052473a-5c1b-fbdc-ea46-d9a0b19d4028@hsr.ch>

On 28.03.2018 16:31, Marcos Dione wrote:
>     in my opinion, gdal_merge should be used only if the merged version
> will be used for more things or if you're going to use it with something
> that doesn't know how to read the .vrt files (i.e., is not using gdal).
Even then it seems to be faster to first create a (temporary) .vrt file
and then convert that to something else (thereby materializing the
content) with e.g. gdaltranslate. (And then throw away the temporary
.vrt file.)

In my (and others', see e.g.
https://stackoverflow.com/a/22602542/674064) experience, the combined
runtime of gdalbuildvrt and gdaltranslate will be shorter than that of
gdal_merge.py would be. (And the quality of the result might also be
better.)

Though I don't know whether that was just the case for the examples I
encountered so far or whether that's always the case. Also, I don't know
whether there are use-cases of gdal_merge.py that gdalbuildvrt +
gdaltranslate (or + gdalwarp) can't handle.

If not, maybe gdal_merge.py should be reimplemented as a wrapper of
gdalbuildvrt + gdaltranslate, so that the obvious (and most convenient)
choice is also the best one?

Cheers,
Raphael

From even.rouault at spatialys.com  Wed Mar 28 12:11:40 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 28 Mar 2018 21:11:40 +0200
Subject: [gdal-dev] FW: gdal_merge.py
In-Reply-To: <d052473a-5c1b-fbdc-ea46-d9a0b19d4028@hsr.ch>
References: <20180328143132.GA23534@diablo.grulicueva.local>
 <d052473a-5c1b-fbdc-ea46-d9a0b19d4028@hsr.ch>
Message-ID: <3526376.P3AnjW6HCm@even-i700>

On mercredi 28 mars 2018 17:58:37 CEST Raphael Das Gupta wrote:
> On 28.03.2018 16:31, Marcos Dione wrote:
> >     in my opinion, gdal_merge should be used only if the merged version
> > 
> > will be used for more things or if you're going to use it with something
> > that doesn't know how to read the .vrt files (i.e., is not using gdal).
> 
> Even then it seems to be faster to first create a (temporary) .vrt file
> and then convert that to something else (thereby materializing the
> content) with e.g. gdaltranslate. (And then throw away the temporary
> .vrt file.)
> 
> In my (and others', see e.g.
> https://stackoverflow.com/a/22602542/674064) experience, the combined
> runtime of gdalbuildvrt and gdaltranslate will be shorter than that of
> gdal_merge.py would be. (And the quality of the result might also be
> better.)
> 
> Though I don't know whether that was just the case for the examples I
> encountered so far or whether that's always the case. Also, I don't know
> whether there are use-cases of gdal_merge.py that gdalbuildvrt +
> gdaltranslate (or + gdalwarp) can't handle.
> 
> If not, maybe gdal_merge.py should be reimplemented as a wrapper of
> gdalbuildvrt + gdaltranslate, so that the obvious (and most convenient)
> choice is also the best one?

My summary of different solutions:

* gdalbuildvrt + gdaltranslate:
   - pros:
      + efficient regarding compression of output dataset
      + work with arbitrarily large input  datasets.
      + several resampling methods
   - cons:
      + does not handle as one would expect overlapping input datasets regarding masking / nodata / alpha.
      + cannot update an output dataset
      + all input datasets must have same projection


* gdalwarp:
   - pros:
        + handles properly nodata / mask / alpha in input datasets (with alpha blending for alpha)
        + several resampling methods.
        + can deal with input datasets in different projections
        + can update an existing output dataset
   - cons:
        + can lead to datasets larger than needed with compression methods (unless -wo OPTIMIZE_SIZE=TRUE).
        + May be slower than other methods.


* gdal_merge.py:
     - pros:
         + handles nodata / mask in input dataset (alpha seen as binary mask)
         + can update an existing output dataset
    - cons:
         + only nearest resampling
         + cannot deal with arbitrarily large input datasets (ingests each input dataset fully in memory)
         + not friendly for compressed output
         + all input datasets must have same projection


So indeed gdal_merge.py could potentially be emulated with gdalbuildvrt+gdal_translate if there's no
overlap between input datasets or if they don't have nodata/mask, and otherwise on gdalwarp.

Exercice left to readers :-)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From richard.greenwood at gmail.com  Wed Mar 28 17:16:45 2018
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed, 28 Mar 2018 18:16:45 -0600
Subject: [gdal-dev] -srcnodata in gdalwarp and gdalbuildvrt
Message-ID: <CAHBySPZKzOXWwTxfyh9MAq1JTY5xzzbJuHmLZ0jCEjAvbnUGDA@mail.gmail.com>

I have a question that is probably more "user" than "developer". Is there
different place that I should post my question?

I don't think that I understand -srcnodata. I assume that -srcnodata "0 0
0" on a 3 band image means that all 3 bands have to be 0 to be "no data"
but I think what I'm seeing is that if any to the 3 bands is 0 then that
pixel is considered to be "no data". Am I mis-understanding -srcnodata?

Thanks
-- 
Richard W. Greenwood, PLS
www.greenwoodmap.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180328/6203b267/attachment.html>

From zac at weatherwary.com  Thu Mar 29 12:05:34 2018
From: zac at weatherwary.com (Zachary Flamig)
Date: Thu, 29 Mar 2018 14:05:34 -0500
Subject: [gdal-dev] gdal translate/warp goes16
In-Reply-To: <MWHPR04MB063885B3B05BB9B9F726C52AF0AC0@MWHPR04MB0638.namprd04.prod.outlook.com>
References: <1521571054646-0.post@n6.nabble.com>
 <B437AFBC-517B-4515-86FE-142B94FEE987@weatherwary.com>
 <MWHPR04MB0638D52BEDD86BB1192CAFDFF0AA0@MWHPR04MB0638.namprd04.prod.outlook.com>
 <MWHPR04MB063885B3B05BB9B9F726C52AF0AC0@MWHPR04MB0638.namprd04.prod.outlook.com>
Message-ID: <44EBAD6E-699D-4C07-90FC-A615E1225215@weatherwary.com>

Interesting. Its working fine for me and some other people using the cli tools.

Zac

> On Mar 27, 2018, at 9:44 AM, Beale, Steven <steven.beale at woodplc.com> wrote:
> 
> I never did resolve this issue, but using the python libraries instead worked out fine.
> -s
>  
> From: Beale, Steven [mailto:steven.beale at woodplc.com] 
> Sent: Wednesday, March 21, 2018 3:39 PM
> To: Zachary Flamig <zac at weatherwary.com>; Steven Beale <steven.beale at woodplc.com>
> Cc: gdal-dev at lists.osgeo.org
> Subject: RE: [gdal-dev] gdal translate/warp goes16
>  
> Hi Zac,
> I tried to be as explicit as possible setting the source srs, including the semi-major/minor axes:
> gdalwarp -s_srs "+proj=geos +a=6378137 +b=6356752.31414 +lon_0=-75 +h=35786023 +x_0=0 +y_0=0 +ellps=GRS80 +units=m +no_defs  +sweep=x" -t_srs EPSG:4326 -dstnodata -999.0 -tr 0.009 0.009 -te 290 40 320 65 -r near <in> <out>
>  
> But I still have the longitude shifting.
> Out of curiosity I tried +sweep=y, just to see what would happen, and that didn’t do anything either… could the sweep be getting ignored entirely?
> Just to verify that the srs was being interpreted at all, I tried adjusting lon_0, which did work. Not very helpful though.
> Thinking there could possibly be some conflict in setting ellps=GRS80 and setting parameters by hand, I omitted that the +ellps. Same result.
> Any other thoughts?
>  
> Thanks,
> Steve
>  
> From: Zachary Flamig [mailto:zac at weatherwary.com <mailto:zac at weatherwary.com>] 
> Sent: Wednesday, March 21, 2018 4:04 AM
> To: Steven Beale <steven.beale at woodplc.com <mailto:steven.beale at woodplc.com>>
> Cc: gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> Subject: Re: [gdal-dev] gdal translate/warp goes16
>  
> Hi Steven,
>  
> So the issue here is that gdal_translate doesn’t properly store the +sweep=x in the geotiff.
>  
> See http://geotiff.maptools.narkive.com/3CqwNeMd/geos-projection-sweep-parameter <https://urldefense.proofpoint.com/v2/url?u=http-3A__geotiff.maptools.narkive.com_3CqwNeMd_geos-2Dprojection-2Dsweep-2Dparameter&d=DwMFaQ&c=ZWY66qCYUTYUcOev9C2GlDEcKuYKzoWDVNR_L93Z9mQ&r=xGAbC1Ogv9duClaR3TChYqg_fGB4xrhak7uN1kZcfR8&m=zVXU4kc36wijhVLYDg1WghqZOoFePzeG6PQfNC150tU&s=f466QSOBNcqeD3kETK3-K2-4KeUmCONhKlY6J9t4dMU&e=> for some relevant discussion. I believe the best solution right now is to specify the s_srs in the gdalwarp command like -s_srs "+proj=geos +lon_0=-75 +h=35786023 +x_0=0 +y_0=0 +ellps=GRS80 +units=m +no_defs  +sweep=x"
>  
> This is a bit of a mess, sorry about that.
>  
> Zac
>  
> 
> On Mar 20, 2018, at 9:37 PM, Steven Beale <steven.beale at woodplc.com <mailto:steven.beale at woodplc.com>> wrote:
>  
> Hi gdalers, 
> 
> I'm a little out of my field here, usually I work with weather/climate data,
> but I need to warp some goes16 satellite data. (source is aws s3:
> https://noaa-goes16.s3.amazonaws.com/ABI-L2-CMIPF/2018/079/12/OR_ABI-L2-CMIPF-M3C01_G16_s20180791200447_e20180791211214_c20180791211280.nc <https://urldefense.proofpoint.com/v2/url?u=https-3A__noaa-2Dgoes16.s3.amazonaws.com_ABI-2DL2-2DCMIPF_2018_079_12_OR-5FABI-2DL2-2DCMIPF-2DM3C01-5FG16-5Fs20180791200447-5Fe20180791211214-5Fc20180791211280.nc&d=DwMFaQ&c=ZWY66qCYUTYUcOev9C2GlDEcKuYKzoWDVNR_L93Z9mQ&r=xGAbC1Ogv9duClaR3TChYqg_fGB4xrhak7uN1kZcfR8&m=zVXU4kc36wijhVLYDg1WghqZOoFePzeG6PQfNC150tU&s=wpMH3kBCq917DTkCCXLtN0FpDoYrz6Xbmh4KZvNmrSM&e=>
> - the link should work for a few months then it will be glaciered and
> unavailable) 
> 
> source data is netcdf, I'm using nco tools & gdal for the processing. 
> 
> My work flow is: 
> 1. clip the data to the region of interest (north atlantic): 
> ncks -d x,5424,8678 -d y,0,2170 <raw.nc> step1.nc 
> 2. deflate & unscale 
> gdal_translate -ot float32 -unscale -CO COMPRESS=deflate NETCDF:step1.nc:CMI
> step2.tiff 
> 3. warp (in this case data is 1km resolution : ~0.009 degrees) 
> gdalwarp -t_srs EPSG:4326 -dstnodata -999.0 -tr 0.009 0.009 -te 290 40 320
> 65  -r near step2.tiff step3.tiff 
> 4. convert back to nc 
> gdal_translate -ot float32 -of NETCDF step3.tiff output.nc 
> 
> The problem i have is that the output has the longitude shifted to the west
> by about 10 degrees. 
> The issue seems related to the ncks clipping, if I exclude the x clip,
> everything works out fine, but takes significantly longer. 
> Here's an example once it's loaded into an erddap server; 
> <http://osgeo-org.1560.x6.nabble.com/file/t382897/GOES16_L2CMIPF_M3C01_201803201200.png <https://urldefense.proofpoint.com/v2/url?u=http-3A__osgeo-2Dorg.1560.x6.nabble.com_file_t382897_GOES16-5FL2CMIPF-5FM3C01-5F201803201200.png&d=DwMGaQ&c=ZWY66qCYUTYUcOev9C2GlDEcKuYKzoWDVNR_L93Z9mQ&r=xGAbC1Ogv9duClaR3TChYqg_fGB4xrhak7uN1kZcfR8&m=0691hAhg8moDDDi0i-csopQGwl9LCy8yuefXjalO0vQ&s=cn4pjYjeC3jugb7R5Knazy7vp4bkXq-VhoKI6CAQhVs&e=>> 
> You can see greenland to the west of it's map underlay. 
> 
> I'm using gdal v2.3.0, netcdf v4.4.1.1, nco v4.7.3 & proj4 v5.0.0 
> 
> 
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html <https://urldefense.proofpoint.com/v2/url?u=http-3A__osgeo-2Dorg.1560.x6.nabble.com_GDAL-2DDev-2Df3742093.html&d=DwMGaQ&c=ZWY66qCYUTYUcOev9C2GlDEcKuYKzoWDVNR_L93Z9mQ&r=xGAbC1Ogv9duClaR3TChYqg_fGB4xrhak7uN1kZcfR8&m=0691hAhg8moDDDi0i-csopQGwl9LCy8yuefXjalO0vQ&s=-fnlaXGCZBUsGk7PEYpsRh26l-qFT1E4lJ9u8ZkH0vo&e=>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://urldefense.proofpoint.com/v2/url?u=https-3A__lists.osgeo.org_mailman_listinfo_gdal-2Ddev&d=DwMGaQ&c=ZWY66qCYUTYUcOev9C2GlDEcKuYKzoWDVNR_L93Z9mQ&r=xGAbC1Ogv9duClaR3TChYqg_fGB4xrhak7uN1kZcfR8&m=0691hAhg8moDDDi0i-csopQGwl9LCy8yuefXjalO0vQ&s=zDMkCvDbctF6dQi2AA6bN6zdwY_AkV-EsH495ySbCRE&e=>
>  
>  
> 
> 
> This message is the property of John Wood Group PLC and/or its subsidiaries and/or affiliates and is intended only for the named recipient(s). Its contents (including any attachments) may be confidential, legally privileged or otherwise protected from disclosure by law. Unauthorised use, copying, distribution or disclosure of any of it may be unlawful and is strictly prohibited. We assume no responsibility to persons other than the intended named recipient(s) and do not accept liability for any errors or omissions which are a result of email transmission. If you have received this message in error, please notify us immediately by reply email to the sender and confirm that the original message and any attachments and copies have been destroyed and deleted from your system.
> 
> 
> 
> If you do not wish to receive future unsolicited commercial electronic messages from us, please forward this email to: unsubscribe at woodplc.com <mailto:unsubscribe at woodplc.com>and include “Unsubscribe” in the subject line. If applicable, you will continue to receive invoices, project communications and similar factual, non-commercial electronic communications.
> 
> 
> 
> Please click http://www.woodplc.com/email-disclaimer <http://www.woodplc.com/email-disclaimer> for notices and company information in relation to emails originating in the UK, Italy or France.
> 
> 
> 
>  
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180329/d38c3807/attachment-0001.html>

From even.rouault at spatialys.com  Thu Mar 29 12:23:08 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 29 Mar 2018 21:23:08 +0200
Subject: [gdal-dev] -srcnodata in gdalwarp and gdalbuildvrt
In-Reply-To: <CAHBySPZKzOXWwTxfyh9MAq1JTY5xzzbJuHmLZ0jCEjAvbnUGDA@mail.gmail.com>
References: <CAHBySPZKzOXWwTxfyh9MAq1JTY5xzzbJuHmLZ0jCEjAvbnUGDA@mail.gmail.com>
Message-ID: <3510339.56TNDxI0fA@even-i700>

On mercredi 28 mars 2018 18:16:45 CEST Richard Greenwood wrote:
> I have a question that is probably more "user" than "developer". Is there
> different place that I should post my question?
> 
> I don't think that I understand -srcnodata. I assume that -srcnodata "0 0
> 0" on a 3 band image means that all 3 bands have to be 0 to be "no data"
> but I think what I'm seeing is that if any to the 3 bands is 0 then that
> pixel is considered to be "no data". Am I mis-understanding -srcnodata?

Richard,

That depends on the utility / algorithm.

For gdalwarp, -srcnodata "0 0 0" will imply by default -wo UNIFIED_SRC_NODATA=YES
See http://www.gdal.org/structGDALWarpOptions.html#a0ed77f9917bb96c7a9aabd73d4d06e08

For gdalbuilvrt / VRT (and other raster formats in general), nodata is evaluated on each band independantly. 
Unless you specify the NODATA_VALUES metadata item.

gdalbuildvrt out.vrt in1.tif in2.tif
gdal_edit.py -mo "NODATA_VALUES=0 0 0"

Then utilities/algorithms that can use mask bands (not all can do however) will behave as you expect. 

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From richard.greenwood at gmail.com  Fri Mar 30 07:47:16 2018
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Fri, 30 Mar 2018 08:47:16 -0600
Subject: [gdal-dev] -srcnodata in gdalwarp and gdalbuildvrt
In-Reply-To: <3510339.56TNDxI0fA@even-i700>
References: <CAHBySPZKzOXWwTxfyh9MAq1JTY5xzzbJuHmLZ0jCEjAvbnUGDA@mail.gmail.com>
 <3510339.56TNDxI0fA@even-i700>
Message-ID: <CAHBySPYc=Z9VCnMvGEe2B7KyDsZPpJAc2U0A_X2ncNrLC45wcg@mail.gmail.com>

Perfect. Thanks so much! And thank you for showing the syntax for gdalwarp
as well as how to use gdal_edit.py. I would not have figured out these
options without you help.

Best regards,
Rich


On Thu, Mar 29, 2018 at 1:23 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> On mercredi 28 mars 2018 18:16:45 CEST Richard Greenwood wrote:
> > I have a question that is probably more "user" than "developer". Is there
> > different place that I should post my question?
> >
> > I don't think that I understand -srcnodata. I assume that -srcnodata "0 0
> > 0" on a 3 band image means that all 3 bands have to be 0 to be "no data"
> > but I think what I'm seeing is that if any to the 3 bands is 0 then that
> > pixel is considered to be "no data". Am I mis-understanding -srcnodata?
>
> Richard,
>
> That depends on the utility / algorithm.
>
> For gdalwarp, -srcnodata "0 0 0" will imply by default -wo
> UNIFIED_SRC_NODATA=YES
> See http://www.gdal.org/structGDALWarpOptions.html#
> a0ed77f9917bb96c7a9aabd73d4d06e08
>
> For gdalbuilvrt / VRT (and other raster formats in general), nodata is
> evaluated on each band independantly.
> Unless you specify the NODATA_VALUES metadata item.
>
> gdalbuildvrt out.vrt in1.tif in2.tif
> gdal_edit.py -mo "NODATA_VALUES=0 0 0"
>
> Then utilities/algorithms that can use mask bands (not all can do however)
> will behave as you expect.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
Richard W. Greenwood, PLS
www.greenwoodmap.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180330/65566e27/attachment.html>

