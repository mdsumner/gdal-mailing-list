From even.rouault at mines-paris.org  Thu Aug  1 07:16:03 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 01 Aug 2013 16:16:03 +0200
Subject: [gdal-dev] Motion: Adopt RFC 41 : Support for multiple geometry
	fields in OGR
In-Reply-To: <CAKyBbG51dc_5qtsf5WyLKCuN+r=R1-n3NRdXK9b+O=Wv+7RD1g@mail.gmail.com>
References: <201307291315.01179.even.rouault@mines-paris.org>
	<CA+YzLBdD5SKS1USX4qjPkHLUEJv1FxpaxoF3J1Au7wDibEc85w@mail.gmail.com>
	<CAKyBbG51dc_5qtsf5WyLKCuN+r=R1-n3NRdXK9b+O=Wv+7RD1g@mail.gmail.com>
Message-ID: <1375366563.51fa6da3ba8c0@imp.free.fr>

> >
> >> Hi,
> >>
> >> Motion: I move to adopt RFC 41 : Support for multiple geometry fields in
> >> OGR
> >>
> >>     http://trac.osgeo.org/gdal/wiki/rfc41_multiple_geometry_fields
> >>
> >> I've made a few changes in the last few days. See the history :
> >>
> >>
> http://trac.osgeo.org/gdal/wiki/rfc41_multiple_geometry_fields?action=history
> >>
> >> Starting with my +1

Hi,

no other voters ? (yes I know everybody must be laying on the sand ;-))

From dmorissette at mapgears.com  Thu Aug  1 07:53:28 2013
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu, 01 Aug 2013 10:53:28 -0400
Subject: [gdal-dev] Motion: Adopt RFC 41 : Support for multiple geometry
 fields in OGR
In-Reply-To: <1375366563.51fa6da3ba8c0@imp.free.fr>
References: <201307291315.01179.even.rouault@mines-paris.org>
	<CA+YzLBdD5SKS1USX4qjPkHLUEJv1FxpaxoF3J1Au7wDibEc85w@mail.gmail.com>
	<CAKyBbG51dc_5qtsf5WyLKCuN+r=R1-n3NRdXK9b+O=Wv+7RD1g@mail.gmail.com>
	<1375366563.51fa6da3ba8c0@imp.free.fr>
Message-ID: <51FA7668.6070703@mapgears.com>

+1 Very nice addition!

Daniel


On 13-08-01 10:16 AM, Even Rouault wrote:
>>>
>>>> Hi,
>>>>
>>>> Motion: I move to adopt RFC 41 : Support for multiple geometry fields in
>>>> OGR
>>>>
>>>>      http://trac.osgeo.org/gdal/wiki/rfc41_multiple_geometry_fields
>>>>
>>>> I've made a few changes in the last few days. See the history :
>>>>
>>>>
>> http://trac.osgeo.org/gdal/wiki/rfc41_multiple_geometry_fields?action=history
>>>>
>>>> Starting with my +1
>
> Hi,
>
> no other voters ? (yes I know everybody must be laying on the sand ;-))
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000


From andre+joost at nurfuerspam.de  Thu Aug  1 08:36:59 2013
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Thu, 01 Aug 2013 17:36:59 +0200
Subject: [gdal-dev] Motion: Adopt RFC 41 : Support for multiple geometry
 fields in OGR
In-Reply-To: <1375366563.51fa6da3ba8c0@imp.free.fr>
References: <201307291315.01179.even.rouault@mines-paris.org>
	<CA+YzLBdD5SKS1USX4qjPkHLUEJv1FxpaxoF3J1Au7wDibEc85w@mail.gmail.com>
	<CAKyBbG51dc_5qtsf5WyLKCuN+r=R1-n3NRdXK9b+O=Wv+7RD1g@mail.gmail.com>
	<1375366563.51fa6da3ba8c0@imp.free.fr>
Message-ID: <ktdvbq$stm$1@ger.gmane.org>

Am 01.08.2013 16:16, schrieb Even Rouault:
>>>
>>>> Hi,
>>>>
>>>> Motion: I move to adopt RFC 41 : Support for multiple geometry fields in
>>>> OGR
>>>>
>>>>      http://trac.osgeo.org/gdal/wiki/rfc41_multiple_geometry_fields
>>>>
>>>> I've made a few changes in the last few days. See the history :
>>>>
>>>>
>> http://trac.osgeo.org/gdal/wiki/rfc41_multiple_geometry_fields?action=history
>>>>
>>>> Starting with my +1
>
> Hi,
>
> no other voters ? (yes I know everybody must be laying on the sand ;-))

+1 from me. Could the libkml driver be added to the "candidate drivers" 
as well? And maybe GPX driver too?

Greetings,
Andr? Joost


From even.rouault at mines-paris.org  Thu Aug  1 08:53:08 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 01 Aug 2013 17:53:08 +0200
Subject: [gdal-dev] Motion: Adopt RFC 41 : Support for multiple geometry
	fields in OGR
In-Reply-To: <ktdvbq$stm$1@ger.gmane.org>
References: <201307291315.01179.even.rouault@mines-paris.org>
	<CA+YzLBdD5SKS1USX4qjPkHLUEJv1FxpaxoF3J1Au7wDibEc85w@mail.gmail.com>
	<CAKyBbG51dc_5qtsf5WyLKCuN+r=R1-n3NRdXK9b+O=Wv+7RD1g@mail.gmail.com>
	<1375366563.51fa6da3ba8c0@imp.free.fr> <ktdvbq$stm$1@ger.gmane.org>
Message-ID: <1375372388.51fa8464e5e8f@imp.free.fr>

Selon Andre Joost <andre+joost at nurfuerspam.de>:

> Am 01.08.2013 16:16, schrieb Even Rouault:
> >>>
> >>>> Hi,
> >>>>
> >>>> Motion: I move to adopt RFC 41 : Support for multiple geometry fields in
> >>>> OGR
> >>>>
> >>>>      http://trac.osgeo.org/gdal/wiki/rfc41_multiple_geometry_fields
> >>>>
> >>>> I've made a few changes in the last few days. See the history :
> >>>>
> >>>>
> >>
> http://trac.osgeo.org/gdal/wiki/rfc41_multiple_geometry_fields?action=history
> >>>>
> >>>> Starting with my +1
> >
> > Hi,
> >
> > no other voters ? (yes I know everybody must be laying on the sand ;-))
>
> +1 from me. Could the libkml driver be added to the "candidate drivers"
> as well?

My understanding of the KML specification is "no".
https://developers.google.com/kml/documentation/kmlreference#placemark mentions
"0 or one <Geometry> elements", and the
http://schemas.opengis.net/kml/2.2.0/ogckml22.xsd schema also confirms it :

<complexType name="PlacemarkType" final="#all">
<complexContent>
<extension base="kml:AbstractFeatureType">
<sequence>
<element ref="kml:AbstractGeometryGroup" minOccurs="0"/>
<element ref="kml:PlacemarkSimpleExtensionGroup" minOccurs="0"
maxOccurs="unbounded"/>
<element ref="kml:PlacemarkObjectExtensionGroup" minOccurs="0"
maxOccurs="unbounded"/>
</sequence>
</extension>
</complexContent>
</complexType>

There's no explicit maxOccurs on <element ref="kml:AbstractGeometryGroup"
minOccurs="0"/>, so it means the max is 1.

Perhaps there are other KML feature elements that support several geometries.
I've no checked

>And maybe GPX driver too?

I don't see it possible either. The format defines waypoints, routes and tracks.
I can't see how to fit that into a multi geometry fields approach.

>
> Greetings,
> Andr? Joost
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From cgodkin at gmail.com  Thu Aug  1 08:56:21 2013
From: cgodkin at gmail.com (Carl Godkin)
Date: Thu, 1 Aug 2013 08:56:21 -0700
Subject: [gdal-dev] Using the OGR library with FileGDB driver
In-Reply-To: <CAE=8kmnQYnGi0d76k9Lm9ogOs8Cxf3qjENGLQ_z7=0mAP3w1uQ@mail.gmail.com>
References: <CAE=8kmkG2mparihuMW1UREqYrtx+ZH2cyeZM7SHGLFY5ipUv6g@mail.gmail.com>
	<201307310026.59206.even.rouault@mines-paris.org>
	<CAE=8km=BaXHET4LTrZvPJEaFZ03y2zj6WKb-ZMqvHxFCJZxvwA@mail.gmail.com>
	<CACqzBMyRHY67azY56fD5VbB2h+jxg9jpOAC6VMe2JmeJkNkcqA@mail.gmail.com>
	<CAE=8km=P2LVMDMVQEkqkMKTr7rGBWyNDk6K+MoGXdnvc1gLAWA@mail.gmail.com>
	<1375306521.51f9831986599@imp.free.fr>
	<CAE=8kmnQYnGi0d76k9Lm9ogOs8Cxf3qjENGLQ_z7=0mAP3w1uQ@mail.gmail.com>
Message-ID: <CAE=8kmmmWC5aDQcHcKOwTh+ZHqNt9=R-ZzUb3k1cPz2KLn8=jw@mail.gmail.com>

On Wed, Jul 31, 2013 at 3:23 PM, Carl Godkin <cgodkin at gmail.com> wrote:

>
> On Wed, Jul 31, 2013 at 2:35 PM, Even Rouault <
> even.rouault at mines-paris.org> wrote:
>
>
>>
> I wonder if there is a way to determine if a .gdb is using a custom
> coordinate system so we can make a sensible error message.
>
> I find that in ArcGIS Explorer, selecting the "Source Data" on the
> "Properties" dialog lists the Coordinate System by name followed by a
> number in parentheses.  From the datasets I've tried, if the number in
> parentheses is zero, then it's apparently custom.  Otherwise it the ESRI
> coordinate system number.  I don't suppose anyone knows of a way to get at
> this information from the FileGDB API, do they?  I will investigate further
> if no one replies.
>


Just to finish this conversation up...

A little investigation in the FileGDB API dev kit shows that getting the
coordinate system from a "Feature Class" object requires loading the table
first.  But since the Geodatabase::OpenTable() call itself fails, I of
course can't proceed to check the spatial reference which comes
(indirectly) from the table.  So I'll just have to be satisfied with the
"Invalid function arguments" call.  Maybe ESRI will improve this on their
end one day.

I found that others are having this problem and have made the same
suggestion on the ArcGIS forum:

http://forums.arcgis.com/threads/54210-fail-to-open-table-with-2147024809-(invalid-function-arguments)-return-code

Thanks,

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130801/00f63b27/attachment.html>

From Michael.Smith at erdc.dren.mil  Thu Aug  1 10:36:00 2013
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Thu, 1 Aug 2013 17:36:00 +0000
Subject: [gdal-dev] Overflow in geojson values
Message-ID: <CE2014B4.89575%michael.smith@erdc.dren.mil>

I'm reading a geojson feed put out by the USGS (http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.geojson) but the time/updated values are overflowing. Are there any settings to allow the data to come across as bigint or strings?

For example:
{"type":"Feature","properties":{"mag":0.46,"place":"2km W of Lemmon Valley, Nevada","time":1375291903959,"updated":1375295733317,"tz":-420,"url":"http://earthquake.usgs.gov/earthquakes/eventpage/nn00419191","detail":"http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/nn00419191.geojson","felt":null,"cdi":null,"mmi":null,"alert":null,"status":"REVIEWED","tsunami":null,"sig":3,"net":"nn","code":"00419191","ids":",nn00419191,","sources":",nn,","types":",cap,general-link,geoserve,nearby-cities,origin,","nst":12,"dmin":0.069,"rms":0.1034,"gap":74,"magType":"ml","type":"earthquake"},"geometry":{"type":"Point","coordinates":[-119.8773,39.632,5.0829]},"id":"nn00419191"}

Gets returned as

OGRFeature(OGRGeoJSON):176
  mag (Real) = 1.7
  place (String) = 21km S of Lowell, Oregon
  time (Integer) = 902732480
  updated (Integer) = 903846662
  tz (Integer) = -420
  url (String) = http://earthquake.usgs.gov/earthquakes/eventpage/uw60561592
  detail (String) = http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/uw60561592.geojson
  felt (String) = (null)
  cdi (String) = (null)
  mmi (String) = (null)
  alert (String) = (null)
  status (String) = REVIEWED
  tsunami (String) = (null)
  sig (Integer) = 44
  net (String) = uw
  code (String) = 60561592
  ids (String) = ,uw60561592,
  sources (String) = ,uw,
  types (String) = ,cap,general-link,geoserve,nearby-cities,origin,
  nst (Integer) = (null)
  dmin (Real) = 0.24254513
  rms (Real) = 0.24
  gap (Real) = 118.8
  magType (String) = Md
  type (String) = quarry
  POINT (-122.7927 43.7262 0)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130801/165f7b47/attachment.html>

From kyle at pobox.com  Thu Aug  1 11:21:05 2013
From: kyle at pobox.com (Kyle Shannon)
Date: Thu, 1 Aug 2013 12:21:05 -0600
Subject: [gdal-dev] Overflow in geojson values
In-Reply-To: <CE2014B4.89575%michael.smith@erdc.dren.mil>
References: <CE2014B4.89575%michael.smith@erdc.dren.mil>
Message-ID: <CAJ0mEz2e1ObCv_ws_r0d8fZrPfR2Bwbem=pNbeBV0UOu2Wk2-Q@mail.gmail.com>

On Thu, Aug 1, 2013 at 11:36 AM, Smith, Michael ERDC-RDE-CRREL-NH
<Michael.Smith at erdc.dren.mil> wrote:
> I'm reading a geojson feed put out by the USGS
> (http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.geojson)
> but the time/updated values are overflowing. Are there any settings to allow
> the data to come across as bigint or strings?
>
> For example:
> {"type":"Feature","properties":{"mag":0.46,"place":"2km W of Lemmon Valley,
> Nevada","time":1375291903959,"updated":1375295733317,"tz":-420,"url":"http://earthquake.usgs.gov/earthquakes/eventpage/nn00419191","detail":"http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/nn00419191.geojson","felt":null,"cdi":null,"mmi":null,"alert":null,"status":"REVIEWED","tsunami":null,"sig":3,"net":"nn","code":"00419191","ids":",nn00419191,","sources":",nn,","types":",cap,general-link,geoserve,nearby-cities,origin,","nst":12,"dmin":0.069,"rms":0.1034,"gap":74,"magType":"ml","type":"earthquake"},"geometry":{"type":"Point","coordinates":[-119.8773,39.632,5.0829]},"id":"nn00419191"}
>
> Gets returned as
>
> OGRFeature(OGRGeoJSON):176
>   mag (Real) = 1.7
>   place (String) = 21km S of Lowell, Oregon
>   time (Integer) = 902732480
>   updated (Integer) = 903846662
>   tz (Integer) = -420
>   url (String) = http://earthquake.usgs.gov/earthquakes/eventpage/uw60561592
>   detail (String) =
> http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/uw60561592.geojson
>   felt (String) = (null)
>   cdi (String) = (null)
>   mmi (String) = (null)
>   alert (String) = (null)
>   status (String) = REVIEWED
>   tsunami (String) = (null)
>   sig (Integer) = 44
>   net (String) = uw
>   code (String) = 60561592
>   ids (String) = ,uw60561592,
>   sources (String) = ,uw,
>   types (String) = ,cap,general-link,geoserve,nearby-cities,origin,
>   nst (Integer) = (null)
>   dmin (Real) = 0.24254513
>   rms (Real) = 0.24
>   gap (Real) = 118.8
>   magType (String) = Md
>   type (String) = quarry
>   POINT (-122.7927 43.7262 0)
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

Try the cast operator in ogr sql:

kyle at kyle-workstation:~$ ogrinfo -sql 'select *, cast(time as
character(0)),cast(updated as character(0)) from OGRGeoJSON'
/vsicurl/http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.geojson

...


OGRFeature(OGRGeoJSON):185
  mag (Real) = 2.4
  place (String) = 29km N of Brenas, Puerto Rico
  time (Integer) = 905049680
  updated (Integer) = 908474945
  tz (Integer) = -240
  url (String) = http://earthquake.usgs.gov/earthquakes/eventpage/pr13212004
  detail (String) =
http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/pr13212004.geojson
  felt (String) = (null)
  cdi (String) = (null)
  mmi (String) = (null)
  alert (String) = (null)
  status (String) = REVIEWED
  tsunami (String) = (null)
  sig (Integer) = 89
  net (String) = pr
  code (String) = 13212004
  ids (String) = ,pr13212004,
  sources (String) = ,pr,
  types (String) = ,cap,geoserve,nearby-cities,origin,tectonic-summary,
  nst (String) = 13
  dmin (Real) = 0.30722383
  rms (Real) = 0.27
  gap (Real) = 219.6
  magType (String) = Md
  type (String) = earthquake
  time (String) = 905049680
  updated (String) = 908474945
  POINT (-66.3495 18.7346 29)

note the values at the bottom, time and update as (String).  You could
write the entire field list in  the sql and substitue time and updated
for the casted values.

kss

From Michael.Smith at erdc.dren.mil  Thu Aug  1 11:31:12 2013
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Thu, 1 Aug 2013 18:31:12 +0000
Subject: [gdal-dev] Overflow in geojson values
In-Reply-To: <CAJ0mEz2e1ObCv_ws_r0d8fZrPfR2Bwbem=pNbeBV0UOu2Wk2-Q@mail.gmail.com>
Message-ID: <CE20215B.89599%michael.smith@erdc.dren.mil>

Unfortunately, that?s after the data has been read and overflowed.

The time should be 1375291903959.
Updated should be 1375295733317.

Mike

On 8/1/13 2:21 PM, "Kyle Shannon" <kyle at pobox.com> wrote:

>On Thu, Aug 1, 2013 at 11:36 AM, Smith, Michael ERDC-RDE-CRREL-NH
><Michael.Smith at erdc.dren.mil> wrote:
>> I'm reading a geojson feed put out by the USGS
>> 
>>(http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.geojson
>>)
>> but the time/updated values are overflowing. Are there any settings to
>>allow
>> the data to come across as bigint or strings?
>>
>> For example:
>> {"type":"Feature","properties":{"mag":0.46,"place":"2km W of Lemmon
>>Valley,
>> 
>>Nevada","time":1375291903959,"updated":1375295733317,"tz":-420,"url":"htt
>>p://earthquake.usgs.gov/earthquakes/eventpage/nn00419191","detail":"http:
>>//earthquake.usgs.gov/earthquakes/feed/v1.0/detail/nn00419191.geojson","f
>>elt":null,"cdi":null,"mmi":null,"alert":null,"status":"REVIEWED","tsunami
>>":null,"sig":3,"net":"nn","code":"00419191","ids":",nn00419191,","sources
>>":",nn,","types":",cap,general-link,geoserve,nearby-cities,origin,","nst"
>>:12,"dmin":0.069,"rms":0.1034,"gap":74,"magType":"ml","type":"earthquake"
>>},"geometry":{"type":"Point","coordinates":[-119.8773,39.632,5.0829]},"id
>>":"nn00419191"}
>>
>> Gets returned as
>>
>> OGRFeature(OGRGeoJSON):176
>>   mag (Real) = 1.7
>>   place (String) = 21km S of Lowell, Oregon
>>   time (Integer) = 902732480
>>   updated (Integer) = 903846662
>>   tz (Integer) = -420
>>   url (String) =
>>http://earthquake.usgs.gov/earthquakes/eventpage/uw60561592
>>   detail (String) =
>> 
>>http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/uw60561592.geojso
>>n
>>   felt (String) = (null)
>>   cdi (String) = (null)
>>   mmi (String) = (null)
>>   alert (String) = (null)
>>   status (String) = REVIEWED
>>   tsunami (String) = (null)
>>   sig (Integer) = 44
>>   net (String) = uw
>>   code (String) = 60561592
>>   ids (String) = ,uw60561592,
>>   sources (String) = ,uw,
>>   types (String) = ,cap,general-link,geoserve,nearby-cities,origin,
>>   nst (Integer) = (null)
>>   dmin (Real) = 0.24254513
>>   rms (Real) = 0.24
>>   gap (Real) = 118.8
>>   magType (String) = Md
>>   type (String) = quarry
>>   POINT (-122.7927 43.7262 0)
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>Try the cast operator in ogr sql:
>
>kyle at kyle-workstation:~$ ogrinfo -sql 'select *, cast(time as
>character(0)),cast(updated as character(0)) from OGRGeoJSON'
>/vsicurl/http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.
>geojson
>
>...
>
>
>OGRFeature(OGRGeoJSON):185
>  mag (Real) = 2.4
>  place (String) = 29km N of Brenas, Puerto Rico
>  time (Integer) = 905049680
>  updated (Integer) = 908474945
>  tz (Integer) = -240
>  url (String) = 
>http://earthquake.usgs.gov/earthquakes/eventpage/pr13212004
>  detail (String) =
>http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/pr13212004.geojson
>  felt (String) = (null)
>  cdi (String) = (null)
>  mmi (String) = (null)
>  alert (String) = (null)
>  status (String) = REVIEWED
>  tsunami (String) = (null)
>  sig (Integer) = 89
>  net (String) = pr
>  code (String) = 13212004
>  ids (String) = ,pr13212004,
>  sources (String) = ,pr,
>  types (String) = ,cap,geoserve,nearby-cities,origin,tectonic-summary,
>  nst (String) = 13
>  dmin (Real) = 0.30722383
>  rms (Real) = 0.27
>  gap (Real) = 219.6
>  magType (String) = Md
>  type (String) = earthquake
>  time (String) = 905049680
>  updated (String) = 908474945
>  POINT (-66.3495 18.7346 29)
>
>note the values at the bottom, time and update as (String).  You could
>write the entire field list in  the sql and substitue time and updated
>for the casted values.
>
>kss


From bishop.dev at gmail.com  Thu Aug  1 12:56:26 2013
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Thu, 01 Aug 2013 23:56:26 +0400
Subject: [gdal-dev] Overflow in geojson values
In-Reply-To: <CE20215B.89599%michael.smith@erdc.dren.mil>
References: <CE20215B.89599%michael.smith@erdc.dren.mil>
Message-ID: <51FABD6A.2050306@gmail.com>

Hi,

GDAL GeoJSON driver use modified and outdated json-c. It seem to me that 
this is the bug and ticket in track needed.

Best regards,
     Dmitriy

01.08.2013 22:31, Smith, Michael ERDC-RDE-CRREL-NH ?????:
> Unfortunately, that?s after the data has been read and overflowed.
>
> The time should be 1375291903959.
> Updated should be 1375295733317.
>
> Mike
>
> On 8/1/13 2:21 PM, "Kyle Shannon" <kyle at pobox.com> wrote:
>
>> On Thu, Aug 1, 2013 at 11:36 AM, Smith, Michael ERDC-RDE-CRREL-NH
>> <Michael.Smith at erdc.dren.mil> wrote:
>>> I'm reading a geojson feed put out by the USGS
>>>
>>> (http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.geojson
>>> )
>>> but the time/updated values are overflowing. Are there any settings to
>>> allow
>>> the data to come across as bigint or strings?
>>>
>>> For example:
>>> {"type":"Feature","properties":{"mag":0.46,"place":"2km W of Lemmon
>>> Valley,
>>>
>>> Nevada","time":1375291903959,"updated":1375295733317,"tz":-420,"url":"htt
>>> p://earthquake.usgs.gov/earthquakes/eventpage/nn00419191","detail":"http:
>>> //earthquake.usgs.gov/earthquakes/feed/v1.0/detail/nn00419191.geojson","f
>>> elt":null,"cdi":null,"mmi":null,"alert":null,"status":"REVIEWED","tsunami
>>> ":null,"sig":3,"net":"nn","code":"00419191","ids":",nn00419191,","sources
>>> ":",nn,","types":",cap,general-link,geoserve,nearby-cities,origin,","nst"
>>> :12,"dmin":0.069,"rms":0.1034,"gap":74,"magType":"ml","type":"earthquake"
>>> },"geometry":{"type":"Point","coordinates":[-119.8773,39.632,5.0829]},"id
>>> ":"nn00419191"}
>>>
>>> Gets returned as
>>>
>>> OGRFeature(OGRGeoJSON):176
>>>    mag (Real) = 1.7
>>>    place (String) = 21km S of Lowell, Oregon
>>>    time (Integer) = 902732480
>>>    updated (Integer) = 903846662
>>>    tz (Integer) = -420
>>>    url (String) =
>>> http://earthquake.usgs.gov/earthquakes/eventpage/uw60561592
>>>    detail (String) =
>>>
>>> http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/uw60561592.geojso
>>> n
>>>    felt (String) = (null)
>>>    cdi (String) = (null)
>>>    mmi (String) = (null)
>>>    alert (String) = (null)
>>>    status (String) = REVIEWED
>>>    tsunami (String) = (null)
>>>    sig (Integer) = 44
>>>    net (String) = uw
>>>    code (String) = 60561592
>>>    ids (String) = ,uw60561592,
>>>    sources (String) = ,uw,
>>>    types (String) = ,cap,general-link,geoserve,nearby-cities,origin,
>>>    nst (Integer) = (null)
>>>    dmin (Real) = 0.24254513
>>>    rms (Real) = 0.24
>>>    gap (Real) = 118.8
>>>    magType (String) = Md
>>>    type (String) = quarry
>>>    POINT (-122.7927 43.7262 0)
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> Try the cast operator in ogr sql:
>>
>> kyle at kyle-workstation:~$ ogrinfo -sql 'select *, cast(time as
>> character(0)),cast(updated as character(0)) from OGRGeoJSON'
>> /vsicurl/http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.
>> geojson
>>
>> ...
>>
>>
>> OGRFeature(OGRGeoJSON):185
>>   mag (Real) = 2.4
>>   place (String) = 29km N of Brenas, Puerto Rico
>>   time (Integer) = 905049680
>>   updated (Integer) = 908474945
>>   tz (Integer) = -240
>>   url (String) =
>> http://earthquake.usgs.gov/earthquakes/eventpage/pr13212004
>>   detail (String) =
>> http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/pr13212004.geojson
>>   felt (String) = (null)
>>   cdi (String) = (null)
>>   mmi (String) = (null)
>>   alert (String) = (null)
>>   status (String) = REVIEWED
>>   tsunami (String) = (null)
>>   sig (Integer) = 89
>>   net (String) = pr
>>   code (String) = 13212004
>>   ids (String) = ,pr13212004,
>>   sources (String) = ,pr,
>>   types (String) = ,cap,geoserve,nearby-cities,origin,tectonic-summary,
>>   nst (String) = 13
>>   dmin (Real) = 0.30722383
>>   rms (Real) = 0.27
>>   gap (Real) = 219.6
>>   magType (String) = Md
>>   type (String) = earthquake
>>   time (String) = 905049680
>>   updated (String) = 908474945
>>   POINT (-66.3495 18.7346 29)
>>
>> note the values at the bottom, time and update as (String).  You could
>> write the entire field list in  the sql and substitue time and updated
>> for the casted values.
>>
>> kss
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


From even.rouault at mines-paris.org  Thu Aug  1 13:32:47 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 01 Aug 2013 22:32:47 +0200
Subject: [gdal-dev] Overflow in geojson values
In-Reply-To: <51FABD6A.2050306@gmail.com>
References: <CE20215B.89599%michael.smith@erdc.dren.mil>
	<51FABD6A.2050306@gmail.com>
Message-ID: <1375389167.51fac5ef21e89@imp.free.fr>

Selon Dmitriy Baryshnikov <bishop.dev at gmail.com>:

> Hi,
>
> GDAL GeoJSON driver use modified and outdated json-c. It seem to me that
> this is the bug and ticket in track needed.

It would be a 2 step work. I indeed see that newer json-c supports int64, so a
first step would be to make the GeoJSON driver uses the new json-c 64 bit API.
But OGR does not support int64 yet, so the overflow would occur just afterwards.
There's an RFC ( http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64 ) about that
waiting for implementation.

Best regards,

Even

>
> Best regards,
>      Dmitriy
>
> 01.08.2013 22:31, Smith, Michael ERDC-RDE-CRREL-NH ??????????:
> > Unfortunately, that??s after the data has been read and overflowed.
> >
> > The time should be 1375291903959.
> > Updated should be 1375295733317.
> >
> > Mike
> >
> > On 8/1/13 2:21 PM, "Kyle Shannon" <kyle at pobox.com> wrote:
> >
> >> On Thu, Aug 1, 2013 at 11:36 AM, Smith, Michael ERDC-RDE-CRREL-NH
> >> <Michael.Smith at erdc.dren.mil> wrote:
> >>> I'm reading a geojson feed put out by the USGS
> >>>
> >>> (http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.geojson
> >>> )
> >>> but the time/updated values are overflowing. Are there any settings to
> >>> allow
> >>> the data to come across as bigint or strings?
> >>>
> >>> For example:
> >>> {"type":"Feature","properties":{"mag":0.46,"place":"2km W of Lemmon
> >>> Valley,
> >>>
> >>> Nevada","time":1375291903959,"updated":1375295733317,"tz":-420,"url":"htt
> >>> p://earthquake.usgs.gov/earthquakes/eventpage/nn00419191","detail":"http:
> >>> //earthquake.usgs.gov/earthquakes/feed/v1.0/detail/nn00419191.geojson","f
> >>> elt":null,"cdi":null,"mmi":null,"alert":null,"status":"REVIEWED","tsunami
> >>> ":null,"sig":3,"net":"nn","code":"00419191","ids":",nn00419191,","sources
> >>> ":",nn,","types":",cap,general-link,geoserve,nearby-cities,origin,","nst"
> >>> :12,"dmin":0.069,"rms":0.1034,"gap":74,"magType":"ml","type":"earthquake"
> >>> },"geometry":{"type":"Point","coordinates":[-119.8773,39.632,5.0829]},"id
> >>> ":"nn00419191"}
> >>>
> >>> Gets returned as
> >>>
> >>> OGRFeature(OGRGeoJSON):176
> >>>    mag (Real) = 1.7
> >>>    place (String) = 21km S of Lowell, Oregon
> >>>    time (Integer) = 902732480
> >>>    updated (Integer) = 903846662
> >>>    tz (Integer) = -420
> >>>    url (String) =
> >>> http://earthquake.usgs.gov/earthquakes/eventpage/uw60561592
> >>>    detail (String) =
> >>>
> >>> http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/uw60561592.geojso
> >>> n
> >>>    felt (String) = (null)
> >>>    cdi (String) = (null)
> >>>    mmi (String) = (null)
> >>>    alert (String) = (null)
> >>>    status (String) = REVIEWED
> >>>    tsunami (String) = (null)
> >>>    sig (Integer) = 44
> >>>    net (String) = uw
> >>>    code (String) = 60561592
> >>>    ids (String) = ,uw60561592,
> >>>    sources (String) = ,uw,
> >>>    types (String) = ,cap,general-link,geoserve,nearby-cities,origin,
> >>>    nst (Integer) = (null)
> >>>    dmin (Real) = 0.24254513
> >>>    rms (Real) = 0.24
> >>>    gap (Real) = 118.8
> >>>    magType (String) = Md
> >>>    type (String) = quarry
> >>>    POINT (-122.7927 43.7262 0)
> >>>
> >>> _______________________________________________
> >>> gdal-dev mailing list
> >>> gdal-dev at lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >> Try the cast operator in ogr sql:
> >>
> >> kyle at kyle-workstation:~$ ogrinfo -sql 'select *, cast(time as
> >> character(0)),cast(updated as character(0)) from OGRGeoJSON'
> >> /vsicurl/http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.
> >> geojson
> >>
> >> ...
> >>
> >>
> >> OGRFeature(OGRGeoJSON):185
> >>   mag (Real) = 2.4
> >>   place (String) = 29km N of Brenas, Puerto Rico
> >>   time (Integer) = 905049680
> >>   updated (Integer) = 908474945
> >>   tz (Integer) = -240
> >>   url (String) =
> >> http://earthquake.usgs.gov/earthquakes/eventpage/pr13212004
> >>   detail (String) =
> >> http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/pr13212004.geojson
> >>   felt (String) = (null)
> >>   cdi (String) = (null)
> >>   mmi (String) = (null)
> >>   alert (String) = (null)
> >>   status (String) = REVIEWED
> >>   tsunami (String) = (null)
> >>   sig (Integer) = 89
> >>   net (String) = pr
> >>   code (String) = 13212004
> >>   ids (String) = ,pr13212004,
> >>   sources (String) = ,pr,
> >>   types (String) = ,cap,geoserve,nearby-cities,origin,tectonic-summary,
> >>   nst (String) = 13
> >>   dmin (Real) = 0.30722383
> >>   rms (Real) = 0.27
> >>   gap (Real) = 219.6
> >>   magType (String) = Md
> >>   type (String) = earthquake
> >>   time (String) = 905049680
> >>   updated (String) = 908474945
> >>   POINT (-66.3495 18.7346 29)
> >>
> >> note the values at the bottom, time and update as (String).  You could
> >> write the entire field list in  the sql and substitue time and updated
> >> for the casted values.
> >>
> >> kss
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From warmerdam at pobox.com  Thu Aug  1 13:36:11 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 1 Aug 2013 13:36:11 -0700
Subject: [gdal-dev] Overflow in geojson values
In-Reply-To: <1375389167.51fac5ef21e89@imp.free.fr>
References: <CE20215B.89599%michael.smith@erdc.dren.mil>
	<51FABD6A.2050306@gmail.com> <1375389167.51fac5ef21e89@imp.free.fr>
Message-ID: <CA+YzLBc5RVxk_JgkruxCGP7MsaY7a5Sg9Kv249y5Yp5-O8G1YA@mail.gmail.com>

On Thu, Aug 1, 2013 at 1:32 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Selon Dmitriy Baryshnikov <bishop.dev at gmail.com>:
>
> > Hi,
> >
> > GDAL GeoJSON driver use modified and outdated json-c. It seem to me that
> > this is the bug and ticket in track needed.
>
> It would be a 2 step work. I indeed see that newer json-c supports int64,
> so a
> first step would be to make the GeoJSON driver uses the new json-c 64 bit
> API.
> But OGR does not support int64 yet, so the overflow would occur just
> afterwards.
> There's an RFC ( http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64 ) about that
> waiting for implementation.
>

Folks,

Also waiting for final refinement and adoption...

I think I'd like to revisit this issue before the next major release since
it is negatively impacting a number of drivers - not just geojson.

Best regards,
Frank


>
> Best regards,
>
> Even
>
> >
> > Best regards,
> >      Dmitriy
> >
> > 01.08.2013 22:31, Smith, Michael ERDC-RDE-CRREL-NH ????? ??? :
> > > Unfortunately, that??s after the data has been read and overflowed.
> > >
> > > The time should be 1375291903959.
> > > Updated should be 1375295733317.
> > >
> > > Mike
> > >
> > > On 8/1/13 2:21 PM, "Kyle Shannon" <kyle at pobox.com> wrote:
> > >
> > >> On Thu, Aug 1, 2013 at 11:36 AM, Smith, Michael ERDC-RDE-CRREL-NH
> > >> <Michael.Smith at erdc.dren.mil> wrote:
> > >>> I'm reading a geojson feed put out by the USGS
> > >>>
> > >>> (
> http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.geojson
> > >>> )
> > >>> but the time/updated values are overflowing. Are there any settings
> to
> > >>> allow
> > >>> the data to come across as bigint or strings?
> > >>>
> > >>> For example:
> > >>> {"type":"Feature","properties":{"mag":0.46,"place":"2km W of Lemmon
> > >>> Valley,
> > >>>
> > >>>
> Nevada","time":1375291903959,"updated":1375295733317,"tz":-420,"url":"htt
> > >>> p://earthquake.usgs.gov/earthquakes/eventpage/nn00419191
> ","detail":"http:
> > >>> //
> earthquake.usgs.gov/earthquakes/feed/v1.0/detail/nn00419191.geojson","f
> > >>>
> elt":null,"cdi":null,"mmi":null,"alert":null,"status":"REVIEWED","tsunami
> > >>>
> ":null,"sig":3,"net":"nn","code":"00419191","ids":",nn00419191,","sources
> > >>>
> ":",nn,","types":",cap,general-link,geoserve,nearby-cities,origin,","nst"
> > >>>
> :12,"dmin":0.069,"rms":0.1034,"gap":74,"magType":"ml","type":"earthquake"
> > >>>
> },"geometry":{"type":"Point","coordinates":[-119.8773,39.632,5.0829]},"id
> > >>> ":"nn00419191"}
> > >>>
> > >>> Gets returned as
> > >>>
> > >>> OGRFeature(OGRGeoJSON):176
> > >>>    mag (Real) = 1.7
> > >>>    place (String) = 21km S of Lowell, Oregon
> > >>>    time (Integer) = 902732480
> > >>>    updated (Integer) = 903846662
> > >>>    tz (Integer) = -420
> > >>>    url (String) =
> > >>> http://earthquake.usgs.gov/earthquakes/eventpage/uw60561592
> > >>>    detail (String) =
> > >>>
> > >>>
> http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/uw60561592.geojso
> > >>> n
> > >>>    felt (String) = (null)
> > >>>    cdi (String) = (null)
> > >>>    mmi (String) = (null)
> > >>>    alert (String) = (null)
> > >>>    status (String) = REVIEWED
> > >>>    tsunami (String) = (null)
> > >>>    sig (Integer) = 44
> > >>>    net (String) = uw
> > >>>    code (String) = 60561592
> > >>>    ids (String) = ,uw60561592,
> > >>>    sources (String) = ,uw,
> > >>>    types (String) = ,cap,general-link,geoserve,nearby-cities,origin,
> > >>>    nst (Integer) = (null)
> > >>>    dmin (Real) = 0.24254513
> > >>>    rms (Real) = 0.24
> > >>>    gap (Real) = 118.8
> > >>>    magType (String) = Md
> > >>>    type (String) = quarry
> > >>>    POINT (-122.7927 43.7262 0)
> > >>>
> > >>> _______________________________________________
> > >>> gdal-dev mailing list
> > >>> gdal-dev at lists.osgeo.org
> > >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >> Try the cast operator in ogr sql:
> > >>
> > >> kyle at kyle-workstation:~$ ogrinfo -sql 'select *, cast(time as
> > >> character(0)),cast(updated as character(0)) from OGRGeoJSON'
> > >> /vsicurl/
> http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.
> > >> geojson
> > >>
> > >> ...
> > >>
> > >>
> > >> OGRFeature(OGRGeoJSON):185
> > >>   mag (Real) = 2.4
> > >>   place (String) = 29km N of Brenas, Puerto Rico
> > >>   time (Integer) = 905049680
> > >>   updated (Integer) = 908474945
> > >>   tz (Integer) = -240
> > >>   url (String) =
> > >> http://earthquake.usgs.gov/earthquakes/eventpage/pr13212004
> > >>   detail (String) =
> > >>
> http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/pr13212004.geojson
> > >>   felt (String) = (null)
> > >>   cdi (String) = (null)
> > >>   mmi (String) = (null)
> > >>   alert (String) = (null)
> > >>   status (String) = REVIEWED
> > >>   tsunami (String) = (null)
> > >>   sig (Integer) = 89
> > >>   net (String) = pr
> > >>   code (String) = 13212004
> > >>   ids (String) = ,pr13212004,
> > >>   sources (String) = ,pr,
> > >>   types (String) =
> ,cap,geoserve,nearby-cities,origin,tectonic-summary,
> > >>   nst (String) = 13
> > >>   dmin (Real) = 0.30722383
> > >>   rms (Real) = 0.27
> > >>   gap (Real) = 219.6
> > >>   magType (String) = Md
> > >>   type (String) = earthquake
> > >>   time (String) = 905049680
> > >>   updated (String) = 908474945
> > >>   POINT (-66.3495 18.7346 29)
> > >>
> > >> note the values at the bottom, time and update as (String).  You could
> > >> write the entire field list in  the sql and substitue time and updated
> > >> for the casted values.
> > >>
> > >> kss
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> > >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130801/cf3354e5/attachment-0001.html>

From bishop.dev at gmail.com  Thu Aug  1 13:54:51 2013
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Fri, 02 Aug 2013 00:54:51 +0400
Subject: [gdal-dev] Overflow in geojson values
In-Reply-To: <CA+YzLBc5RVxk_JgkruxCGP7MsaY7a5Sg9Kv249y5Yp5-O8G1YA@mail.gmail.com>
References: <CE20215B.89599%michael.smith@erdc.dren.mil>
	<51FABD6A.2050306@gmail.com> <1375389167.51fac5ef21e89@imp.free.fr>
	<CA+YzLBc5RVxk_JgkruxCGP7MsaY7a5Sg9Kv249y5Yp5-O8G1YA@mail.gmail.com>
Message-ID: <51FACB1B.2050802@gmail.com>

I really like the RFC31!
Also it'll be great to have a chocie to build GDAL with internal and 
external json-c, as libtif, libjpeg, etc. are. And drop patched version 
of json-c.

Best regards,
     Dmitriy

02.08.2013 0:36, Frank Warmerdam ?????:
>
>
>
> On Thu, Aug 1, 2013 at 1:32 PM, Even Rouault 
> <even.rouault at mines-paris.org <mailto:even.rouault at mines-paris.org>> 
> wrote:
>
>     Selon Dmitriy Baryshnikov <bishop.dev at gmail.com
>     <mailto:bishop.dev at gmail.com>>:
>
>     > Hi,
>     >
>     > GDAL GeoJSON driver use modified and outdated json-c. It seem to
>     me that
>     > this is the bug and ticket in track needed.
>
>     It would be a 2 step work. I indeed see that newer json-c supports
>     int64, so a
>     first step would be to make the GeoJSON driver uses the new json-c
>     64 bit API.
>     But OGR does not support int64 yet, so the overflow would occur
>     just afterwards.
>     There's an RFC ( http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64 )
>     about that
>     waiting for implementation.
>
>
> Folks,
>
> Also waiting for final refinement and adoption...
>
> I think I'd like to revisit this issue before the next major release 
> since it is negatively impacting a number of drivers - not just geojson.
>
> Best regards,
> Frank
>
>
>     Best regards,
>
>     Even
>
>     >
>     > Best regards,
>     >      Dmitriy
>     >
>     > 01.08.2013 22:31, Smith, Michael ERDC-RDE-CRREL-NH ????? ??? :
>     > > Unfortunately, that??s after the data has been read and
>     overflowed.
>     > >
>     > > The time should be 1375291903959.
>     > > Updated should be 1375295733317.
>     > >
>     > > Mike
>     > >
>     > > On 8/1/13 2:21 PM, "Kyle Shannon" <kyle at pobox.com
>     <mailto:kyle at pobox.com>> wrote:
>     > >
>     > >> On Thu, Aug 1, 2013 at 11:36 AM, Smith, Michael ERDC-RDE-CRREL-NH
>     > >> <Michael.Smith at erdc.dren.mil
>     <mailto:Michael.Smith at erdc.dren.mil>> wrote:
>     > >>> I'm reading a geojson feed put out by the USGS
>     > >>>
>     > >>>
>     (http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.geojson
>     > >>> )
>     > >>> but the time/updated values are overflowing. Are there any
>     settings to
>     > >>> allow
>     > >>> the data to come across as bigint or strings?
>     > >>>
>     > >>> For example:
>     > >>> {"type":"Feature","properties":{"mag":0.46,"place":"2km W of
>     Lemmon
>     > >>> Valley,
>     > >>>
>     > >>>
>     Nevada","time":1375291903959,"updated":1375295733317,"tz":-420,"url":"htt
>     > >>> p://earthquake.usgs.gov/earthquakes/eventpage/nn00419191
>     <http://earthquake.usgs.gov/earthquakes/eventpage/nn00419191>","detail":"http:
>     > >>>
>     //earthquake.usgs.gov/earthquakes/feed/v1.0/detail/nn00419191.geojson
>     <http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/nn00419191.geojson>","f
>     > >>>
>     elt":null,"cdi":null,"mmi":null,"alert":null,"status":"REVIEWED","tsunami
>     > >>>
>     ":null,"sig":3,"net":"nn","code":"00419191","ids":",nn00419191,","sources
>     > >>>
>     ":",nn,","types":",cap,general-link,geoserve,nearby-cities,origin,","nst"
>     > >>>
>     :12,"dmin":0.069,"rms":0.1034,"gap":74,"magType":"ml","type":"earthquake"
>     > >>>
>     },"geometry":{"type":"Point","coordinates":[-119.8773,39.632,5.0829]},"id
>     > >>> ":"nn00419191"}
>     > >>>
>     > >>> Gets returned as
>     > >>>
>     > >>> OGRFeature(OGRGeoJSON):176
>     > >>>    mag (Real) = 1.7
>     > >>>    place (String) = 21km S of Lowell, Oregon
>     > >>>    time (Integer) = 902732480
>     > >>>    updated (Integer) = 903846662
>     > >>>    tz (Integer) = -420
>     > >>>    url (String) =
>     > >>> http://earthquake.usgs.gov/earthquakes/eventpage/uw60561592
>     > >>>    detail (String) =
>     > >>>
>     > >>>
>     http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/uw60561592.geojso
>     > >>> n
>     > >>>    felt (String) = (null)
>     > >>>    cdi (String) = (null)
>     > >>>    mmi (String) = (null)
>     > >>>    alert (String) = (null)
>     > >>>    status (String) = REVIEWED
>     > >>>    tsunami (String) = (null)
>     > >>>    sig (Integer) = 44
>     > >>>    net (String) = uw
>     > >>>    code (String) = 60561592
>     > >>>    ids (String) = ,uw60561592,
>     > >>>    sources (String) = ,uw,
>     > >>>    types (String) =
>     ,cap,general-link,geoserve,nearby-cities,origin,
>     > >>>    nst (Integer) = (null)
>     > >>>    dmin (Real) = 0.24254513
>     > >>>    rms (Real) = 0.24
>     > >>>    gap (Real) = 118.8
>     > >>>    magType (String) = Md
>     > >>>    type (String) = quarry
>     > >>>    POINT (-122.7927 43.7262 0)
>     > >>>
>     > >>> _______________________________________________
>     > >>> gdal-dev mailing list
>     > >>> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     > >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>     > >> Try the cast operator in ogr sql:
>     > >>
>     > >> kyle at kyle-workstation:~$ ogrinfo -sql 'select *, cast(time as
>     > >> character(0)),cast(updated as character(0)) from OGRGeoJSON'
>     > >>
>     /vsicurl/http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.
>     > >> geojson
>     > >>
>     > >> ...
>     > >>
>     > >>
>     > >> OGRFeature(OGRGeoJSON):185
>     > >>   mag (Real) = 2.4
>     > >>   place (String) = 29km N of Brenas, Puerto Rico
>     > >>   time (Integer) = 905049680
>     > >>   updated (Integer) = 908474945
>     > >>   tz (Integer) = -240
>     > >>   url (String) =
>     > >> http://earthquake.usgs.gov/earthquakes/eventpage/pr13212004
>     > >>   detail (String) =
>     > >>
>     http://earthquake.usgs.gov/earthquakes/feed/v1.0/detail/pr13212004.geojson
>     > >>   felt (String) = (null)
>     > >>   cdi (String) = (null)
>     > >>   mmi (String) = (null)
>     > >>   alert (String) = (null)
>     > >>   status (String) = REVIEWED
>     > >>   tsunami (String) = (null)
>     > >>   sig (Integer) = 89
>     > >>   net (String) = pr
>     > >>   code (String) = 13212004
>     > >>   ids (String) = ,pr13212004,
>     > >>   sources (String) = ,pr,
>     > >>   types (String) =
>     ,cap,geoserve,nearby-cities,origin,tectonic-summary,
>     > >>   nst (String) = 13
>     > >>   dmin (Real) = 0.30722383
>     > >>   rms (Real) = 0.27
>     > >>   gap (Real) = 219.6
>     > >>   magType (String) = Md
>     > >>   type (String) = earthquake
>     > >>   time (String) = 905049680
>     > >>   updated (String) = 908474945
>     > >>   POINT (-66.3495 18.7346 29)
>     > >>
>     > >> note the values at the bottom, time and update as (String).
>      You could
>     > >> write the entire field list in  the sql and substitue time
>     and updated
>     > >> for the casted values.
>     > >>
>     > >> kss
>     > > _______________________________________________
>     > > gdal-dev mailing list
>     > > gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>     > >
>     > >
>     >
>     > _______________________________________________
>     > gdal-dev mailing list
>     > gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam at pobox.com <mailto:warmerdam at pobox.com>
> light and sound - activate the windows | http://pobox.com/~warmerdam 
> <http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Software Developer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130802/9dbe7f8b/attachment.html>

From t.finegan at motorolasolutions.com  Fri Aug  2 14:05:17 2013
From: t.finegan at motorolasolutions.com (Finegan Thomas-QTF001)
Date: Fri, 2 Aug 2013 21:05:17 +0000
Subject: [gdal-dev] shapefile; modify field value; write to disk
Message-ID: <2ccf97f5a78f4bdda48d261405267cde@BN1PR04MB171.namprd04.prod.outlook.com>

Hello,
I'm using OGR via the swig/C# wrapper. Everything works great, except that I cannot get my changed field values saved to disk. I open the .shp for update, calls Feature.SetField and DataSource.SyncToDisk but the changed field value does not appear in the .dbf. No files are being written. How do I get my changed fields to persist back on the disk?

My code:

OSGeo.OGR.DataSource ds = OSGeo.OGR.Ogr.Open(shpFileName, 1);
OSGeo.OGR.Layer lyr = ds.GetLayerByIndex(0);
lyr.ResetReading();
OSGeo.OGR.Feature feat = lyr.GetNextFeature();
while (feat != null)
{
    feat.SetField("Lat", -999);
    feat = lyr.GetNextFeature();
}
ds.SyncToDisk();

-Tom
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130802/fe5a0393/attachment.html>

From t.finegan at motorolasolutions.com  Fri Aug  2 14:45:45 2013
From: t.finegan at motorolasolutions.com (Finegan Thomas-QTF001)
Date: Fri, 2 Aug 2013 21:45:45 +0000
Subject: [gdal-dev] shapefile; modify field value; write to disk
In-Reply-To: <2ccf97f5a78f4bdda48d261405267cde@BN1PR04MB171.namprd04.prod.outlook.com>
References: <2ccf97f5a78f4bdda48d261405267cde@BN1PR04MB171.namprd04.prod.outlook.com>
Message-ID: <6d19906b2eaa4b69a1cdd7c3d918b13e@BN1PR04MB171.namprd04.prod.outlook.com>

Disregard this inquiry - I've figured it out.

I needed to call lyr.SetFeature(feat); immediately after Feature.SetField

-Tom

From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Finegan Thomas-QTF001
Sent: Friday, August 02, 2013 3:05 PM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] shapefile; modify field value; write to disk

Hello,
I'm using OGR via the swig/C# wrapper. Everything works great, except that I cannot get my changed field values saved to disk. I open the .shp for update, calls Feature.SetField and DataSource.SyncToDisk but the changed field value does not appear in the .dbf. No files are being written. How do I get my changed fields to persist back on the disk?

My code:

OSGeo.OGR.DataSource ds = OSGeo.OGR.Ogr.Open(shpFileName, 1);
OSGeo.OGR.Layer lyr = ds.GetLayerByIndex(0);
lyr.ResetReading();
OSGeo.OGR.Feature feat = lyr.GetNextFeature();
while (feat != null)
{
    feat.SetField("Lat", -999);
    feat = lyr.GetNextFeature();
}
ds.SyncToDisk();

-Tom
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130802/12e12449/attachment.html>

From chenxian at walkinfo.com.cn  Sat Aug  3 08:29:28 2013
From: chenxian at walkinfo.com.cn (=?gb2312?B?WGlhbiBDaGVuL7PCz9s=?=)
Date: Sat, 3 Aug 2013 23:29:28 +0800
Subject: [gdal-dev] Reading error with dwg and dxf files
In-Reply-To: <1375299064.51f965f8df177@imp.free.fr>
References: <1375260148835-5069826.post@n6.nabble.com>,
	<1375299064.51f965f8df177@imp.free.fr>
Message-ID: <596F84E4D8B06F45A0621DC4F4BFACD8353730F864@mail.walkinfo.local>

Thanks Even.

After checking the code under dwg and dxf, I believe the relevant error code to my original error report should be in ogr/ogrsf_frmts/dxf/ogrdxf_polyline_smooth.cpp. The code in EmitArc() must consider the case when ogrArcStartAngle > ogrArcEndAngle and bClockWise is true before calling OGRGeometryFactory::approximateArcAngles() (around line 265). Here I increase the value of ogrArcEndAngle by 360 degree as follows:
    if( bClockwise && (ogrArcStartAngle > ogrArcEndAngle) )
        ogrArcEndAngle += 360.0;

Then the reported error is corrected.

Similarly, there are error codes in both ogrdxf_hatch.cpp and ogrdwg_hatch.cpp as you mentioned.
Line 286-294 in ogrdxf_hatch.cpp are quite suspicious:
            if( bCounterClockwise )
            {
                double dfTemp = dfStartAngle;
                dfStartAngle = dfEndAngle;
                dfEndAngle = dfTemp;
            }
            if( dfStartAngle > dfEndAngle )
                dfEndAngle += 360.0;

Can anyone explain to me why switching Start Angle and End Angle (this will reverse the order of the line string!!). Also, if bCounterClockwise, you won't want to increase dfEndAngle by 360..

I've fixed the above code with something like:
            if( bCounterClockwise )
            {
               dfStartAngle *= -1;
               dfEndAngle *= -1;
            }
            else if( dfStartAngle > dfEndAngle )
                dfEndAngle += 360.0;

Similar fix-up is made in ogrdwg_hatch.cpp 

Not sure if these are sufficient, yet at least work well with my couple of sample dwg/dxf files.

I may want to submit a patch if you and other developers are okay with my fix-up.


Best regards,

Xian
________________________________________
From: Even Rouault [even.rouault at mines-paris.org]
Sent: August 1, 2013 3:31
To: Xian Chen/??
cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev]  Reading error with dwg and dxf files

Selon Xian Chen <chenxian at walkinfo.com.cn>:

Hi Xian,

If you want to debug that, you can have a look at the revelant code in
ogr/ogrsf_frmts/dxf/ogrdxf_hatch.cpp around line 250 and below, and in
ogr/ogrsf_frmts/dwg/ogrdwg_hatch.cpp around line 190 and below.

Best regards,

Even

> Hi all,
>
> I encountered an error when reading the attached dwg file using OGR. The
> last part is supposed to be a clockwise big circle arc, but is translated
> into a counterclockwise circle arc.
>
> I then converted the file into dxf and still have the error. Can anyone
> please help me out?
>
>
> Best regards,
> Xian
> Curvelines.dwg
> <http://osgeo-org.1560.x6.nabble.com/file/n5069826/Curvelines.dwg>
>
>
>
> --
> View this message in context:
>
http://osgeo-org.1560.x6.nabble.com/gdal-dev-Reading-error-with-dwg-and-dxf-files-tp5069826.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From woklist at kyngchaos.com  Sat Aug  3 22:23:36 2013
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sun, 4 Aug 2013 00:23:36 -0500
Subject: [gdal-dev] OGDI dead?
Message-ID: <A0BBB2A8-1547-46DC-9F96-29CEBD807FFF@kyngchaos.com>

When doing some dependency updating for my GDAL I noticed that OGDI stopped working, and it looks like it's because of a change in PROJ 4.8 - not only was the projects.h removed from installation, but the nad_init call changed (ie binary incompatibility).

There hasn't been a release since the 3.2 beta 2 in 2008, and neither has the cvs source on Sourceforge been updated.  There is a bug report there about this PROJ issue from over a year ago.

Will this ever be fixed?  Is there a simple patch to fix it?

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"I ache, therefore I am.  Or in my case - I am, therefore I ache."

- Marvin



From woklist at kyngchaos.com  Sun Aug  4 11:44:30 2013
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sun, 4 Aug 2013 13:44:30 -0500
Subject: [gdal-dev] OGDI dead?
In-Reply-To: <A0BBB2A8-1547-46DC-9F96-29CEBD807FFF@kyngchaos.com>
References: <A0BBB2A8-1547-46DC-9F96-29CEBD807FFF@kyngchaos.com>
Message-ID: <1FCD083E-E751-4929-9BD5-E7F754B8F523@kyngchaos.com>

Odd, it's working now.  Though I'm guessing that it will fail if it tries to load libdtusa.so to do a datum transform (or whatever it does with libdtusa.so).  Is this even possible from GDAL? 

On Aug 4, 2013, at 12:23 AM, William Kyngesburye wrote:

> When doing some dependency updating for my GDAL I noticed that OGDI stopped working, and it looks like it's because of a change in PROJ 4.8 - not only was the projects.h removed from installation, but the nad_init call changed (ie binary incompatibility).
> 
> There hasn't been a release since the 3.2 beta 2 in 2008, and neither has the cvs source on Sourceforge been updated.  There is a bug report there about this PROJ issue from over a year ago.
> 
> Will this ever be fixed?  Is there a simple patch to fix it?
> 

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

All generalizations are dangerous, even this one.



From warmerdam at pobox.com  Sun Aug  4 21:26:30 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun, 4 Aug 2013 21:26:30 -0700
Subject: [gdal-dev] OGDI dead?
In-Reply-To: <1FCD083E-E751-4929-9BD5-E7F754B8F523@kyngchaos.com>
References: <A0BBB2A8-1547-46DC-9F96-29CEBD807FFF@kyngchaos.com>
	<1FCD083E-E751-4929-9BD5-E7F754B8F523@kyngchaos.com>
Message-ID: <CA+YzLBcM3ZXmf6zSDfp7BJqehBD=VcDiS3YMaU6rKnqBqm9+ig@mail.gmail.com>

William,

Interesting point.  It would appear I'll need to do a few small fixes to
OGDI to keep it building, though I normally just work around the projects.h
one.  In fact, I'm only vaguely familiar with the existance and role of
libdtusa.so so perhaps that has been broken for a while too.

Best regards,
Frank


On Sun, Aug 4, 2013 at 11:44 AM, William Kyngesburye
<woklist at kyngchaos.com>wrote:

> Odd, it's working now.  Though I'm guessing that it will fail if it tries
> to load libdtusa.so to do a datum transform (or whatever it does with
> libdtusa.so).  Is this even possible from GDAL?
>
> On Aug 4, 2013, at 12:23 AM, William Kyngesburye wrote:
>
> > When doing some dependency updating for my GDAL I noticed that OGDI
> stopped working, and it looks like it's because of a change in PROJ 4.8 -
> not only was the projects.h removed from installation, but the nad_init
> call changed (ie binary incompatibility).
> >
> > There hasn't been a release since the 3.2 beta 2 in 2008, and neither
> has the cvs source on Sourceforge been updated.  There is a bug report
> there about this PROJ issue from over a year ago.
> >
> > Will this ever be fixed?  Is there a simple patch to fix it?
> >
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> All generalizations are dangerous, even this one.
>
>
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130804/226c0c44/attachment.html>

From nik at nikosalexandris.net  Mon Aug  5 05:58:29 2013
From: nik at nikosalexandris.net (Nikos Alexandris)
Date: Mon, 05 Aug 2013 15:58:29 +0300
Subject: [gdal-dev] Wrong metadata or gdalinfo weakness (on Landsat scene
	over Madagascar)?
Message-ID: <2890429.uXdxgKvov1@vertikal>

For the Landsat scene over Madagascar LE71610762013070PFS00, gdalinfo reports 
UTM Zone 38N (EPSG:32638, <http://spatialreference.org/ref/epsg/32638/>). This 
is wrong. It should be UTM Zone 38 _S_ (EPSG:32738, 
<http://spatialreference.org/ref/epsg/32738/>).

Is it the metadata's fault or is gdalinfo wrongly guessing?  Any help?


The scene contains in its (old) metadata file (that is the 
LE71610762013070PFS00_MTLold.txt file):

,--%<---
GROUP = PROJECTION_PARAMETERS
    REFERENCE_DATUM = "WGS84"
    REFERENCE_ELLIPSOID = "WGS84"
    GRID_CELL_SIZE_PAN = 15.000
    GRID_CELL_SIZE_THM = 30.000
    GRID_CELL_SIZE_REF = 30.000
    ORIENTATION = "NUP"
    RESAMPLING_OPTION = "CC"
    SCAN_GAP_INTERPOLATION = 2
    MAP_PROJECTION = "UTM"
  END_GROUP = PROJECTION_PARAMETERS
  GROUP = UTM_PARAMETERS
    ZONE_NUMBER = 38
  END_GROUP = UTM_PARAMETERS
`--->%--


The newer version of the metadata file reports:

,--%<---
GROUP = PROJECTION_PARAMETERS
    MAP_PROJECTION = "UTM"
    DATUM = "WGS84"
    ELLIPSOID = "WGS84"
    UTM_ZONE = 38
    GRID_CELL_SIZE_PANCHROMATIC = 15.00
    GRID_CELL_SIZE_REFLECTIVE = 30.00
    GRID_CELL_SIZE_THERMAL = 30.00
    ORIENTATION = "NORTH_UP"
    RESAMPLING_OPTION = "CUBIC_CONVOLUTION"
    SCAN_GAP_INTERPOLATION = 2.0
  END_GROUP = PROJECTION_PARAMETERS
`--->%--


No sign of Northern or Southern hemisphere reference. Reporting on the scene 
by using gdalinfo:

,--%<---
gdalinfo -nomd LE71610762013070PFS00_B1.TIF -proj4

Driver: GTiff/GeoTIFF
Files: LE71610762013070PFS00_B1.TIF
Size is 8041, 6961
Coordinate System is:
PROJCS["WGS 84 / UTM zone 38N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",45],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32638"]]
PROJ.4 string is:
'+proj=utm +zone=38 +datum=WGS84 +units=m +no_defs '
Origin = (185385.000000000000000,-2452185.000000000000000)
Pixel Size = (30.000000000000000,-30.000000000000000)
Corner Coordinates:
Upper Left  (  185385.000,-2452185.000) ( 41d56'59.71"E, 22d 8'46.86"S)
Lower Left  (  185385.000,-2661015.000) ( 41d54'25.45"E, 24d 1'48.22"S)
Upper Right (  426615.000,-2452185.000) ( 44d17'17.50"E, 22d10'24.01"S)
Lower Right (  426615.000,-2661015.000) ( 44d16'41.43"E, 24d 3'34.61"S)
Center      (  306000.000,-2556600.000) ( 43d 6'20.60"E, 23d 6'24.43"S)
Band 1 Block=8041x1 Type=Byte, ColorInterp=Gray
`--->%--

This is obviously wrong. It should be UTM Zone 38 _S_ (not _N_). That is EPSG 
32738 <http://spatialreference.org/ref/epsg/32738/> (and not 32638 
<http://spatialreference.org/ref/epsg/32638/>).

Thanks, Nikos

From woklist at kyngchaos.com  Mon Aug  5 07:25:56 2013
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon, 5 Aug 2013 09:25:56 -0500
Subject: [gdal-dev] OGDI dead?
In-Reply-To: <CA+YzLBcM3ZXmf6zSDfp7BJqehBD=VcDiS3YMaU6rKnqBqm9+ig@mail.gmail.com>
References: <A0BBB2A8-1547-46DC-9F96-29CEBD807FFF@kyngchaos.com>
	<1FCD083E-E751-4929-9BD5-E7F754B8F523@kyngchaos.com>
	<CA+YzLBcM3ZXmf6zSDfp7BJqehBD=VcDiS3YMaU6rKnqBqm9+ig@mail.gmail.com>
Message-ID: <4BE8E8B1-13A6-4014-A9A6-7EFDEFEBE817@kyngchaos.com>

I figured out why it stopped working, then started working again - I had disabled GDAL 1.9 (OS X framework), which has OGDI libraries bundled in it.  My OGDI library was built when 1.9 was current, and I just changed the library loader (system) paths to bundle it with GDAL 1.10.  I didn't realize that OGDI also has its own path hardwired into it to find the modules, and it's a full path, not relative.

After restoring GDAL 1.9, OGDI worked again from GDAL 1.10 (but it still probably has the libdtusa issue, if ever used).

So, I DO need to rebuild OGDI to update the module path, so GDAL 1.10 doesn't need 1.9.


On Aug 4, 2013, at 11:26 PM, Frank Warmerdam wrote:

> William,
> 
> Interesting point.  It would appear I'll need to do a few small fixes to OGDI to keep it building, though I normally just work around the projects.h one.  In fact, I'm only vaguely familiar with the existance and role of libdtusa.so so perhaps that has been broken for a while too.
> 
> Best regards,
> Frank
> 
> 
> On Sun, Aug 4, 2013 at 11:44 AM, William Kyngesburye <woklist at kyngchaos.com> wrote:
> Odd, it's working now.  Though I'm guessing that it will fail if it tries to load libdtusa.so to do a datum transform (or whatever it does with libdtusa.so).  Is this even possible from GDAL?
> 
> On Aug 4, 2013, at 12:23 AM, William Kyngesburye wrote:
> 
> > When doing some dependency updating for my GDAL I noticed that OGDI stopped working, and it looks like it's because of a change in PROJ 4.8 - not only was the projects.h removed from installation, but the nad_init call changed (ie binary incompatibility).
> >
> > There hasn't been a release since the 3.2 beta 2 in 2008, and neither has the cvs source on Sourceforge been updated.  There is a bug report there about this PROJ issue from over a year ago.
> >
> > Will this ever be fixed?  Is there a simple patch to fix it?
> >
> 
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
> 
> All generalizations are dangerous, even this one.
> 
> 
> 
> 
> 
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"The beast is actively interested only in now, and, as it is always now and always shall be, there is an eternity of time for the accomplishment of objects."

- the wisdom of Tarzan






From volker27 at gmx.at  Mon Aug  5 08:21:25 2013
From: volker27 at gmx.at (=?ISO-8859-1?Q?Volker_Fr=F6hlich?=)
Date: Mon, 05 Aug 2013 17:21:25 +0200
Subject: [gdal-dev] OGDI dead?
In-Reply-To: <CA+YzLBcM3ZXmf6zSDfp7BJqehBD=VcDiS3YMaU6rKnqBqm9+ig@mail.gmail.com>
References: <A0BBB2A8-1547-46DC-9F96-29CEBD807FFF@kyngchaos.com>
	<1FCD083E-E751-4929-9BD5-E7F754B8F523@kyngchaos.com>
	<CA+YzLBcM3ZXmf6zSDfp7BJqehBD=VcDiS3YMaU6rKnqBqm9+ig@mail.gmail.com>
Message-ID: <51FFC2F5.1090700@gmx.at>

On 05/08/13 06:26, Frank Warmerdam wrote:
> William,
>
> Interesting point.  It would appear I'll need to do a few small fixes to
> OGDI to keep it building, though I normally just work around the
> projects.h one.  In fact, I'm only vaguely familiar with the existance
> and role of libdtusa.so so perhaps that has been broken for a while too.
>
> Best regards,
> Frank
>
>
> On Sun, Aug 4, 2013 at 11:44 AM, William Kyngesburye
> <woklist at kyngchaos.com <mailto:woklist at kyngchaos.com>> wrote:
>
>     Odd, it's working now.  Though I'm guessing that it will fail if it
>     tries to load libdtusa.so to do a datum transform (or whatever it
>     does with libdtusa.so).  Is this even possible from GDAL?
>
>     On Aug 4, 2013, at 12:23 AM, William Kyngesburye wrote:
>
>      > When doing some dependency updating for my GDAL I noticed that
>     OGDI stopped working, and it looks like it's because of a change in
>     PROJ 4.8 - not only was the projects.h removed from installation,
>     but the nad_init call changed (ie binary incompatibility).
>      >
>      > There hasn't been a release since the 3.2 beta 2 in 2008, and
>     neither has the cvs source on Sourceforge been updated.  There is a
>     bug report there about this PROJ issue from over a year ago.
>      >
>      > Will this ever be fixed?  Is there a simple patch to fix it?
>      >
>
>     -----
>     William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
>     http://www.kyngchaos.com/
>
>     All generalizations are dangerous, even this one.
>
>
For reference:

https://bugzilla.redhat.com/show_bug.cgi?id=816282

Volker

From even.rouault at mines-paris.org  Mon Aug  5 10:38:49 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 05 Aug 2013 19:38:49 +0200
Subject: [gdal-dev] Wrong metadata or gdalinfo weakness (on Landsat
	scene over Madagascar)?
In-Reply-To: <2890429.uXdxgKvov1@vertikal>
References: <2890429.uXdxgKvov1@vertikal>
Message-ID: <1375724329.51ffe3295428b@imp.free.fr>

Selon Nikos Alexandris <nik at nikosalexandris.net>:

GDAL is doing its job great on this case. The data is just oddly georeferenced,
but the end result is OK if you look at the corner coordinates in longitude,
latitude. The projection is UTM north, but with with negative y values, which
means it is on the southern hemisphere. For a GEOTIFF GDAL will not look at the
text files that might be or not be along the .TIF files. It will only look at
the geotiff tags.


> For the Landsat scene over Madagascar LE71610762013070PFS00, gdalinfo reports
> UTM Zone 38N (EPSG:32638, <http://spatialreference.org/ref/epsg/32638/>).
> This
> is wrong. It should be UTM Zone 38 _S_ (EPSG:32738,
> <http://spatialreference.org/ref/epsg/32738/>).
>
> Is it the metadata's fault or is gdalinfo wrongly guessing?  Any help?
>
>
> The scene contains in its (old) metadata file (that is the
> LE71610762013070PFS00_MTLold.txt file):
>
> ,--%<---
> GROUP = PROJECTION_PARAMETERS
>     REFERENCE_DATUM = "WGS84"
>     REFERENCE_ELLIPSOID = "WGS84"
>     GRID_CELL_SIZE_PAN = 15.000
>     GRID_CELL_SIZE_THM = 30.000
>     GRID_CELL_SIZE_REF = 30.000
>     ORIENTATION = "NUP"
>     RESAMPLING_OPTION = "CC"
>     SCAN_GAP_INTERPOLATION = 2
>     MAP_PROJECTION = "UTM"
>   END_GROUP = PROJECTION_PARAMETERS
>   GROUP = UTM_PARAMETERS
>     ZONE_NUMBER = 38
>   END_GROUP = UTM_PARAMETERS
> `--->%--
>
>
> The newer version of the metadata file reports:
>
> ,--%<---
> GROUP = PROJECTION_PARAMETERS
>     MAP_PROJECTION = "UTM"
>     DATUM = "WGS84"
>     ELLIPSOID = "WGS84"
>     UTM_ZONE = 38
>     GRID_CELL_SIZE_PANCHROMATIC = 15.00
>     GRID_CELL_SIZE_REFLECTIVE = 30.00
>     GRID_CELL_SIZE_THERMAL = 30.00
>     ORIENTATION = "NORTH_UP"
>     RESAMPLING_OPTION = "CUBIC_CONVOLUTION"
>     SCAN_GAP_INTERPOLATION = 2.0
>   END_GROUP = PROJECTION_PARAMETERS
> `--->%--
>
>
> No sign of Northern or Southern hemisphere reference. Reporting on the scene
> by using gdalinfo:
>
> ,--%<---
> gdalinfo -nomd LE71610762013070PFS00_B1.TIF -proj4
>
> Driver: GTiff/GeoTIFF
> Files: LE71610762013070PFS00_B1.TIF
> Size is 8041, 6961
> Coordinate System is:
> PROJCS["WGS 84 / UTM zone 38N",
>     GEOGCS["WGS 84",
>         DATUM["WGS_1984",
>             SPHEROID["WGS 84",6378137,298.257223563,
>                 AUTHORITY["EPSG","7030"]],
>             AUTHORITY["EPSG","6326"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4326"]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",45],
>     PARAMETER["scale_factor",0.9996],
>     PARAMETER["false_easting",500000],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     AUTHORITY["EPSG","32638"]]
> PROJ.4 string is:
> '+proj=utm +zone=38 +datum=WGS84 +units=m +no_defs '
> Origin = (185385.000000000000000,-2452185.000000000000000)
> Pixel Size = (30.000000000000000,-30.000000000000000)
> Corner Coordinates:
> Upper Left  (  185385.000,-2452185.000) ( 41d56'59.71"E, 22d 8'46.86"S)
> Lower Left  (  185385.000,-2661015.000) ( 41d54'25.45"E, 24d 1'48.22"S)
> Upper Right (  426615.000,-2452185.000) ( 44d17'17.50"E, 22d10'24.01"S)
> Lower Right (  426615.000,-2661015.000) ( 44d16'41.43"E, 24d 3'34.61"S)
> Center      (  306000.000,-2556600.000) ( 43d 6'20.60"E, 23d 6'24.43"S)
> Band 1 Block=8041x1 Type=Byte, ColorInterp=Gray
> `--->%--
>
> This is obviously wrong. It should be UTM Zone 38 _S_ (not _N_). That is EPSG
> 32738 <http://spatialreference.org/ref/epsg/32738/> (and not 32638
> <http://spatialreference.org/ref/epsg/32638/>).
>
> Thanks, Nikos
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From even.rouault at mines-paris.org  Mon Aug  5 10:47:10 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 05 Aug 2013 19:47:10 +0200
Subject: [gdal-dev] Motion: Adopt RFC 41 : Support for multiple geometry
	fields in OGR
In-Reply-To: <51FA7668.6070703@mapgears.com>
References: <201307291315.01179.even.rouault@mines-paris.org>
	<CA+YzLBdD5SKS1USX4qjPkHLUEJv1FxpaxoF3J1Au7wDibEc85w@mail.gmail.com>
	<CAKyBbG51dc_5qtsf5WyLKCuN+r=R1-n3NRdXK9b+O=Wv+7RD1g@mail.gmail.com>
	<1375366563.51fa6da3ba8c0@imp.free.fr>
	<51FA7668.6070703@mapgears.com>
Message-ID: <1375724830.51ffe51ea9a25@imp.free.fr>

> >>>> Hi,
> >>>>
> >>>> Motion: I move to adopt RFC 41 : Support for multiple geometry fields in
> >>>> OGR
> >>>>
> >>>>      http://trac.osgeo.org/gdal/wiki/rfc41_multiple_geometry_fields
> >>>>
> >>>> I've made a few changes in the last few days. See the history :
> >>>>

Hi,

I declare this motion passed with PSC support from myself, FrankW, HowardB and
DanielM.

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From knelson at usgs.gov  Mon Aug  5 11:26:53 2013
From: knelson at usgs.gov (Kurtis Nelson)
Date: Mon, 5 Aug 2013 13:26:53 -0500
Subject: [gdal-dev] Wrong metadata or gdalinfo weakness (on Landsat
 scene over Madagascar)?
In-Reply-To: <1375724329.51ffe3295428b@imp.free.fr>
References: <2890429.uXdxgKvov1@vertikal>
	<1375724329.51ffe3295428b@imp.free.fr>
Message-ID: <51FFEE6D.7090609@usgs.gov>

Even is correct, all Landsat data from USGS (with very few exceptions) 
are projected to UTM North zones, including southern hemisphere scenes.  
The only difference between North and South UTM zones is a false 
northing added to ensure positive y coordinates of southern scenes, 
which is why the y coordinates in your data are negative.

PROJCS["WGS 84 / UTM zone 38N",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.257223563,
                 AUTHORITY["EPSG","7030"]],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0,
             AUTHORITY["EPSG","8901"]],
         UNIT["degree",0.01745329251994328,
             AUTHORITY["EPSG","9122"]],
         AUTHORITY["EPSG","4326"]],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",45],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     _*PARAMETER["false_northing",0],*_
     AUTHORITY["EPSG","32638"],
     AXIS["Easting",EAST],
     AXIS["Northing",NORTH]]

PROJCS["WGS 84 / UTM zone 38S",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.257223563,
                 AUTHORITY["EPSG","7030"]],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0,
             AUTHORITY["EPSG","8901"]],
         UNIT["degree",0.01745329251994328,
             AUTHORITY["EPSG","9122"]],
         AUTHORITY["EPSG","4326"]],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",45],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     _*PARAMETER["false_northing",10000000],*_
     AUTHORITY["EPSG","32738"],
     AXIS["Easting",EAST],
     AXIS["Northing",NORTH]]


__________________________________________________
Kurtis Nelson
Physical Scientist - Wildland Fire Science Team
United States Geological Survey (USGS)
Earth Resources Observation & Science (EROS) Center
knelson at usgs.gov

On 8/5/2013 12:38 PM, Even Rouault wrote:
> Selon Nikos Alexandris <nik at nikosalexandris.net>:
>
> GDAL is doing its job great on this case. The data is just oddly georeferenced,
> but the end result is OK if you look at the corner coordinates in longitude,
> latitude. The projection is UTM north, but with with negative y values, which
> means it is on the southern hemisphere. For a GEOTIFF GDAL will not look at the
> text files that might be or not be along the .TIF files. It will only look at
> the geotiff tags.
>
>
>> For the Landsat scene over Madagascar LE71610762013070PFS00, gdalinfo reports
>> UTM Zone 38N (EPSG:32638, <http://spatialreference.org/ref/epsg/32638/>).
>> This
>> is wrong. It should be UTM Zone 38 _S_ (EPSG:32738,
>> <http://spatialreference.org/ref/epsg/32738/>).
>>
>> Is it the metadata's fault or is gdalinfo wrongly guessing?  Any help?
>>
>>
>> The scene contains in its (old) metadata file (that is the
>> LE71610762013070PFS00_MTLold.txt file):
>>
>> ,--%<---
>> GROUP = PROJECTION_PARAMETERS
>>      REFERENCE_DATUM = "WGS84"
>>      REFERENCE_ELLIPSOID = "WGS84"
>>      GRID_CELL_SIZE_PAN = 15.000
>>      GRID_CELL_SIZE_THM = 30.000
>>      GRID_CELL_SIZE_REF = 30.000
>>      ORIENTATION = "NUP"
>>      RESAMPLING_OPTION = "CC"
>>      SCAN_GAP_INTERPOLATION = 2
>>      MAP_PROJECTION = "UTM"
>>    END_GROUP = PROJECTION_PARAMETERS
>>    GROUP = UTM_PARAMETERS
>>      ZONE_NUMBER = 38
>>    END_GROUP = UTM_PARAMETERS
>> `--->%--
>>
>>
>> The newer version of the metadata file reports:
>>
>> ,--%<---
>> GROUP = PROJECTION_PARAMETERS
>>      MAP_PROJECTION = "UTM"
>>      DATUM = "WGS84"
>>      ELLIPSOID = "WGS84"
>>      UTM_ZONE = 38
>>      GRID_CELL_SIZE_PANCHROMATIC = 15.00
>>      GRID_CELL_SIZE_REFLECTIVE = 30.00
>>      GRID_CELL_SIZE_THERMAL = 30.00
>>      ORIENTATION = "NORTH_UP"
>>      RESAMPLING_OPTION = "CUBIC_CONVOLUTION"
>>      SCAN_GAP_INTERPOLATION = 2.0
>>    END_GROUP = PROJECTION_PARAMETERS
>> `--->%--
>>
>>
>> No sign of Northern or Southern hemisphere reference. Reporting on the scene
>> by using gdalinfo:
>>
>> ,--%<---
>> gdalinfo -nomd LE71610762013070PFS00_B1.TIF -proj4
>>
>> Driver: GTiff/GeoTIFF
>> Files: LE71610762013070PFS00_B1.TIF
>> Size is 8041, 6961
>> Coordinate System is:
>> PROJCS["WGS 84 / UTM zone 38N",
>>      GEOGCS["WGS 84",
>>          DATUM["WGS_1984",
>>              SPHEROID["WGS 84",6378137,298.257223563,
>>                  AUTHORITY["EPSG","7030"]],
>>              AUTHORITY["EPSG","6326"]],
>>          PRIMEM["Greenwich",0],
>>          UNIT["degree",0.0174532925199433],
>>          AUTHORITY["EPSG","4326"]],
>>      PROJECTION["Transverse_Mercator"],
>>      PARAMETER["latitude_of_origin",0],
>>      PARAMETER["central_meridian",45],
>>      PARAMETER["scale_factor",0.9996],
>>      PARAMETER["false_easting",500000],
>>      PARAMETER["false_northing",0],
>>      UNIT["metre",1,
>>          AUTHORITY["EPSG","9001"]],
>>      AUTHORITY["EPSG","32638"]]
>> PROJ.4 string is:
>> '+proj=utm +zone=38 +datum=WGS84 +units=m +no_defs'
>> Origin = (185385.000000000000000,-2452185.000000000000000)
>> Pixel Size = (30.000000000000000,-30.000000000000000)
>> Corner Coordinates:
>> Upper Left  (  185385.000,-2452185.000) ( 41d56'59.71"E, 22d 8'46.86"S)
>> Lower Left  (  185385.000,-2661015.000) ( 41d54'25.45"E, 24d 1'48.22"S)
>> Upper Right (  426615.000,-2452185.000) ( 44d17'17.50"E, 22d10'24.01"S)
>> Lower Right (  426615.000,-2661015.000) ( 44d16'41.43"E, 24d 3'34.61"S)
>> Center      (  306000.000,-2556600.000) ( 43d 6'20.60"E, 23d 6'24.43"S)
>> Band 1 Block=8041x1 Type=Byte, ColorInterp=Gray
>> `--->%--
>>
>> This is obviously wrong. It should be UTM Zone 38 _S_ (not _N_). That is EPSG
>> 32738 <http://spatialreference.org/ref/epsg/32738/> (and not 32638
>> <http://spatialreference.org/ref/epsg/32638/>).
>>
>> Thanks, Nikos
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130805/de90b1e2/attachment-0001.html>

From szekerest at gmail.com  Mon Aug  5 11:47:20 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon, 5 Aug 2013 20:47:20 +0200
Subject: [gdal-dev] Motion: Adopt RFC 41 : Support for multiple geometry
 fields in OGR
In-Reply-To: <1375724830.51ffe51ea9a25@imp.free.fr>
References: <201307291315.01179.even.rouault@mines-paris.org>
	<CA+YzLBdD5SKS1USX4qjPkHLUEJv1FxpaxoF3J1Au7wDibEc85w@mail.gmail.com>
	<CAKyBbG51dc_5qtsf5WyLKCuN+r=R1-n3NRdXK9b+O=Wv+7RD1g@mail.gmail.com>
	<1375366563.51fa6da3ba8c0@imp.free.fr>
	<51FA7668.6070703@mapgears.com>
	<1375724830.51ffe51ea9a25@imp.free.fr>
Message-ID: <CACALY+T9iRwGUS+8dY1-Xejns0q-=wcHVZ3KzKeX9vRMbOkrxw@mail.gmail.com>

A belated +1 from here as well.
I'll update the MSSQL driver, as soon as the core implementation is
committed.

Best regards,

Tamas



2013/8/5 Even Rouault <even.rouault at mines-paris.org>

> > >>>> Hi,
> > >>>>
> > >>>> Motion: I move to adopt RFC 41 : Support for multiple geometry
> fields in
> > >>>> OGR
> > >>>>
> > >>>>      http://trac.osgeo.org/gdal/wiki/rfc41_multiple_geometry_fields
> > >>>>
> > >>>> I've made a few changes in the last few days. See the history :
> > >>>>
>
> Hi,
>
> I declare this motion passed with PSC support from myself, FrankW, HowardB
> and
> DanielM.
>
> Best regards,
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130805/71584b40/attachment.html>

From smercier at mapgears.com  Mon Aug  5 12:21:40 2013
From: smercier at mapgears.com (Simon Mercier)
Date: Mon, 05 Aug 2013 15:21:40 -0400
Subject: [gdal-dev] Error Oracle -lco options
Message-ID: <51FFFB44.6070703@mapgears.com>

Hi list

I have to upload data  (same problem with shapefiles and gml) in Oracle 
with ogr2ogr and I got an error when I specify any -lco option.  If I 
don't add -lco in command line, data is uploaded without error.  Anyone 
have an idea?

thank's

ogr2ogr --version
GDAL 1.10.0, released 2013/04/24

ogr2ogr --debug on -a_srs EPSG:32198 -f OCI OCI:***/***@eddbd01 
mcc_v_immobilisation_p.gml -nln mcc_test_sm -nlt POINT --lco SRID=32198 
--lco GEOMETRY_NAME=GEOM
GML: Using Expat reader
GML: Using mcc_v_immobilisation_p.xsd
OGR: OGROpen(mcc_v_immobilisation_p.gml/0x1ff1570) succeeded as GML.
OCI: Userid=***, Password=***, Database=eddbd01
OCI: Prepare(ALTER SESSION SET NLS_DATE_FORMAT='YYYY/MM/DD' 
NLS_TIME_FORMAT='HH24:MI:SS' NLS_TIME_TZ_FORMAT='HH24:MI:SS 
TZHTZM'         NLS_TIMESTAMP_FORMAT='YYYY/MM/DD HH24:MI:SS'         
NLS_TIMESTAMP_TZ_FORMAT='YYYY/MM/DD HH24:MI:SS TZHTZM')
OCI: Prepare(SELECT TABLE_NAME, OWNER FROM ALL_SDO_GEOM_METADATA)
OCI: Prepare(SELECT COUNT(*) FROM ALL_SDO_GEOM_METADATA u, 
TABLE(u.diminfo) t  WHERE u.table_name = 'EOLIENNES_P' AND u.column_name 
= 'GEOM')
OCI: Prepare(SELECT SRID FROM ALL_SDO_GEOM_METADATA WHERE TABLE_NAME = 
UPPER('EOLIENNES_P') AND COLUMN_NAME = UPPER('GEOM'))
OCI: Prepare(SELECT WKTEXT, AUTH_SRID, AUTH_NAME FROM MDSYS.CS_SRS WHERE 
SRID = 4326 AND WKTEXT IS NOT NULL)
OCI: Prepare(SELECT COUNT(*) FROM ALL_SDO_GEOM_METADATA u, 
TABLE(u.diminfo) t  WHERE u.table_name = 'SQL_STATEMENT' AND 
u.column_name = 'ORA_GEOMETRY')
OCI: Prepare(SELECT SRID FROM ALL_SDO_GEOM_METADATA WHERE TABLE_NAME = 
UPPER('SQL_STATEMENT') AND COLUMN_NAME = UPPER('ORA_GEOMETRY'))
OCI: Prepare(SELECT WKTEXT, AUTH_SRID, AUTH_NAME FROM MDSYS.CS_SRS WHERE 
SRID = 1000003006 AND WKTEXT IS NOT NULL)
FAILURE: Couldn't fetch requested layer '--lco'!
GDAL: In GDALDestroy - unloading GDAL shared library.


-- 
simon mercier
co-fondateur solutions mapgears
2383 che ste-Foy bur 202 qu?bec, qc
canada G1V1T1

t_418_476_7139#101
m_418_559_7139
simonmercier.net / mapgears.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130805/9e3a21ac/attachment.html>

From piotrpachol at gmail.com  Mon Aug  5 13:00:08 2013
From: piotrpachol at gmail.com (=?UTF-8?B?UGlvdHIgUGFjaMOzxYI=?=)
Date: Mon, 05 Aug 2013 22:00:08 +0200
Subject: [gdal-dev] problem with importing gml file to PostGIS with ogr2ogr
Message-ID: <52000448.6030804@gmail.com>

Hello list,
I have problem with importing gml file (with polygons) to postgis using
standard ogr2ogr command which look like:

ogr2ogr -a_srs EPSG:2180 -f "PostgreSQL" PG:"host=localhost
user=postgres dbname=test password=postgres port=5432"
d:\test\BDOT10k\OT_ADJA_A.xml

I tried to import two GML files (with xsd schema necessary):
- OT_ADJA_A.xml -  is orginal valid xml file - after import to Postgis a
table is created but geometry column is empty,
- OT_ADJA_A_changed.xml - is changed and not valid xml file - but after
import to Postgis a table is created and some records have geometry, the
other not.

All files are accessible here: 
https://drive.google.com/folderview?id=0B54CPoAEcivYOTZhNDlpU3hkTlk&usp=sharing 


So I have the following questions:
1. In file OT_ADJA_A.xml  Why aplication not recognize <ot:geometria>
element which is "gml:PolygonType" type ? (there is definition in 
OT_BDOT10k_BDOO.xsd file)
2. In file OT_ADJA_A_changed.xml I replace <ot:geometria> with
<gml:Polygon>. Why in that case some of records are imported with
geometry and the other not ?
3. Is there any constraints of Postgis or ogr2ogr in quantity of
vertices which can have a Polygon ?

I will appreciate any help.
Regards,
Piotr

From even.rouault at mines-paris.org  Mon Aug  5 13:19:26 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 05 Aug 2013 22:19:26 +0200
Subject: [gdal-dev] problem with importing gml file to PostGIS with
	ogr2ogr
In-Reply-To: <52000448.6030804@gmail.com>
References: <52000448.6030804@gmail.com>
Message-ID: <1375733966.520008ce6af90@imp.free.fr>

Selon Piotr Pach? <piotrpachol at gmail.com>:

> Hello list,
> I have problem with importing gml file (with polygons) to postgis using
> standard ogr2ogr command which look like:
>
> ogr2ogr -a_srs EPSG:2180 -f "PostgreSQL" PG:"host=localhost
> user=postgres dbname=test password=postgres port=5432"
> d:\test\BDOT10k\OT_ADJA_A.xml
>
> I tried to import two GML files (with xsd schema necessary):
> - OT_ADJA_A.xml -  is orginal valid xml file - after import to Postgis a
> table is created but geometry column is empty,
> - OT_ADJA_A_changed.xml - is changed and not valid xml file - but after
> import to Postgis a table is created and some records have geometry, the
> other not.
>
> All files are accessible here:
>
https://drive.google.com/folderview?id=0B54CPoAEcivYOTZhNDlpU3hkTlk&usp=sharing
>
>
> So I have the following questions:
> 1. In file OT_ADJA_A.xml  Why aplication not recognize <ot:geometria>
> element which is "gml:PolygonType" type ? (there is definition in
> OT_BDOT10k_BDOO.xsd file)

Because the OGR GML driver has limited support to parse .xsd files. The .xsd
should be just near the .xml file, and with the same basename. But even if it
was the case, it is just not smart enough to realize that <ot:geometria> must be
a "gml:PolygonType"

> 2. In file OT_ADJA_A_changed.xml I replace <ot:geometria> with
> <gml:Polygon>. Why in that case some of records are imported with
> geometry and the other not ?

I don't see that problem. In the sample you've provided, there are 6 features
with geometries and the 6 are imported into PostGIS with their geometries

> 3. Is there any constraints of Postgis or ogr2ogr in quantity of
> vertices which can have a Polygon ?

No, you're only limited by the size of virtual memory (and possibly a PostgreSQL
limit on the size of records or fields)

>
> I will appreciate any help.
> Regards,
> Piotr
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From even.rouault at mines-paris.org  Mon Aug  5 13:23:07 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 05 Aug 2013 22:23:07 +0200
Subject: [gdal-dev] Reading error with dwg and dxf files
In-Reply-To: <596F84E4D8B06F45A0621DC4F4BFACD8353730F864@mail.walkinfo.local>
References: <1375260148835-5069826.post@n6.nabble.com>,
	<1375299064.51f965f8df177@imp.free.fr>
	<596F84E4D8B06F45A0621DC4F4BFACD8353730F864@mail.walkinfo.local>
Message-ID: <1375734187.520009ab79b9e@imp.free.fr>

Selon Xian Chen/???? <chenxian at walkinfo.com.cn>:

> Thanks Even.
>
> After checking the code under dwg and dxf, I believe the relevant error code
> to my original error report should be in
> ogr/ogrsf_frmts/dxf/ogrdxf_polyline_smooth.cpp. The code in EmitArc() must
> consider the case when ogrArcStartAngle > ogrArcEndAngle and bClockWise is
> true before calling OGRGeometryFactory::approximateArcAngles() (around line
> 265). Here I increase the value of ogrArcEndAngle by 360 degree as follows:
>     if( bClockwise && (ogrArcStartAngle > ogrArcEndAngle) )
>         ogrArcEndAngle += 360.0;
>
> Then the reported error is corrected.
>
> Similarly, there are error codes in both ogrdxf_hatch.cpp and
> ogrdwg_hatch.cpp as you mentioned.
> Line 286-294 in ogrdxf_hatch.cpp are quite suspicious:
>             if( bCounterClockwise )
>             {
>                 double dfTemp = dfStartAngle;
>                 dfStartAngle = dfEndAngle;
>                 dfEndAngle = dfTemp;
>             }
>             if( dfStartAngle > dfEndAngle )
>                 dfEndAngle += 360.0;
>
> Can anyone explain to me why switching Start Angle and End Angle (this will
> reverse the order of the line string!!). Also, if bCounterClockwise, you
> won't want to increase dfEndAngle by 360..
>
> I've fixed the above code with something like:
>             if( bCounterClockwise )
>             {
>                dfStartAngle *= -1;
>                dfEndAngle *= -1;
>             }
>             else if( dfStartAngle > dfEndAngle )
>                 dfEndAngle += 360.0;
>
> Similar fix-up is made in ogrdwg_hatch.cpp
>
> Not sure if these are sufficient, yet at least work well with my couple of
> sample dwg/dxf files.
>
> I may want to submit a patch if you and other developers are okay with my
> fix-up.

Xian,

I'm not familiar with that code, so I am not sure about your proposed fix, but
it could be helpful if you attach it to a ticket so it doesn't get lost.
Attaching sample .dxf and .dwg files that have the issue that the patch fixes
would also be helpfull.

Best regards,

Even

From piotrpachol at gmail.com  Mon Aug  5 16:50:41 2013
From: piotrpachol at gmail.com (=?UTF-8?B?UGlvdHIgUGFjaMOzxYI=?=)
Date: Tue, 06 Aug 2013 01:50:41 +0200
Subject: [gdal-dev] problem with importing gml file to PostGIS with
	ogr2ogr
In-Reply-To: <1375733966.520008ce6af90@imp.free.fr>
References: <52000448.6030804@gmail.com> <1375733966.520008ce6af90@imp.free.fr>
Message-ID: <52003A51.7000008@gmail.com>

Thanks for your explanations but I still can't import polygons which 
contains many vertices.
I do some test with polygons which contains different quantities of 
vertices and
on my computer and configuration I can import polygon which has 2046 
pairs (x,y) of coordinates
but I can't import when it has 2047 pairs and more.
The length of hex string which is created in attribute 
geometry(Geometry,2180)
can't be longer than 65534 chars.
Where eventually to change  some configurations variables of PostGIS or 
Postgres or ogr2ogr ?
Do you have any other suggestion ?

Piotr


W dniu 2013-08-05 22:19, Even Rouault pisze:
> Selon Piotr Pach? <piotrpachol at gmail.com>:
>
>> Hello list,
>> I have problem with importing gml file (with polygons) to postgis using
>> standard ogr2ogr command which look like:
>>
>> ogr2ogr -a_srs EPSG:2180 -f "PostgreSQL" PG:"host=localhost
>> user=postgres dbname=test password=postgres port=5432"
>> d:\test\BDOT10k\OT_ADJA_A.xml
>>
>> I tried to import two GML files (with xsd schema necessary):
>> - OT_ADJA_A.xml -  is orginal valid xml file - after import to Postgis a
>> table is created but geometry column is empty,
>> - OT_ADJA_A_changed.xml - is changed and not valid xml file - but after
>> import to Postgis a table is created and some records have geometry, the
>> other not.
>>
>> All files are accessible here:
>>
> https://drive.google.com/folderview?id=0B54CPoAEcivYOTZhNDlpU3hkTlk&usp=sharing
>>
>> So I have the following questions:
>> 1. In file OT_ADJA_A.xml  Why aplication not recognize <ot:geometria>
>> element which is "gml:PolygonType" type ? (there is definition in
>> OT_BDOT10k_BDOO.xsd file)
> Because the OGR GML driver has limited support to parse .xsd files. The .xsd
> should be just near the .xml file, and with the same basename. But even if it
> was the case, it is just not smart enough to realize that <ot:geometria> must be
> a "gml:PolygonType"
>
>> 2. In file OT_ADJA_A_changed.xml I replace <ot:geometria> with
>> <gml:Polygon>. Why in that case some of records are imported with
>> geometry and the other not ?
> I don't see that problem. In the sample you've provided, there are 6 features
> with geometries and the 6 are imported into PostGIS with their geometries
>
>> 3. Is there any constraints of Postgis or ogr2ogr in quantity of
>> vertices which can have a Polygon ?
> No, you're only limited by the size of virtual memory (and possibly a PostgreSQL
> limit on the size of records or fields)
>
>> I will appreciate any help.
>> Regards,
>> Piotr
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>


From even.rouault at mines-paris.org  Tue Aug  6 00:18:31 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 06 Aug 2013 09:18:31 +0200
Subject: [gdal-dev] problem with importing gml file to PostGIS with
	ogr2ogr
In-Reply-To: <52003A51.7000008@gmail.com>
References: <52000448.6030804@gmail.com> <1375733966.520008ce6af90@imp.free.fr>
	<52003A51.7000008@gmail.com>
Message-ID: <1375773511.5200a347d88dc@imp.free.fr>

Selon Piotr Pach? <piotrpachol at gmail.com>:

> Thanks for your explanations but I still can't import polygons which
> contains many vertices.
> I do some test with polygons which contains different quantities of
> vertices and
> on my computer and configuration I can import polygon which has 2046
> pairs (x,y) of coordinates
> but I can't import when it has 2047 pairs and more.
> The length of hex string which is created in attribute
> geometry(Geometry,2180)
> can't be longer than 65534 chars.
> Where eventually to change  some configurations variables of PostGIS or
> Postgres or ogr2ogr ?
> Do you have any other suggestion ?

I don't reproduce such limitations with the following script :

from osgeo import ogr

ls = 'LINESTRING('
for i in range(60000):
    if i != 0:
        ls = ls + ','
    ls = ls + "%d %d" % (2*i,2*i+1)
ls = ls + ')'

ds = ogr.Open('pg:dbname=autotest', update=1)
lyr = ds.CreateLayer('biggeom', geom_type = ogr.wkbLineString, options =
['OVERWRITE=YES'])
feat = ogr.Feature(lyr.GetLayerDefn())
feat.SetGeometry(ogr.CreateGeometryFromWkt(ls))
lyr.CreateFeature(feat)
feat = None
ds = None

ds = ogr.Open('pg:dbname=autotest')
lyr = ds.GetLayerByName('biggeom')
lyr.ResetReading()
feat = lyr.GetNextFeature()
feat.DumpReadable()


My config :
POSTGIS="2.0.3 r11128" GEOS="3.3.8-CAPI-1.7.8" PROJ="Rel. 4.8.0, 6 March 2012"
GDAL="GDAL 1.10.0, released 2013/04/24" LIBXML="2.8.0" LIBJSON="UNKNOWN" RASTER

PostgreSQL 9.1.9 on x86_64-unknown-linux-gnu, compiled by gcc (Ubuntu/Linaro
4.6.3-1ubuntu5) 4.6.3, 64-bit



>
> Piotr
>
>
> W dniu 2013-08-05 22:19, Even Rouault pisze:
> > Selon Piotr Pach?? <piotrpachol at gmail.com>:
> >
> >> Hello list,
> >> I have problem with importing gml file (with polygons) to postgis using
> >> standard ogr2ogr command which look like:
> >>
> >> ogr2ogr -a_srs EPSG:2180 -f "PostgreSQL" PG:"host=localhost
> >> user=postgres dbname=test password=postgres port=5432"
> >> d:\test\BDOT10k\OT_ADJA_A.xml
> >>
> >> I tried to import two GML files (with xsd schema necessary):
> >> - OT_ADJA_A.xml -  is orginal valid xml file - after import to Postgis a
> >> table is created but geometry column is empty,
> >> - OT_ADJA_A_changed.xml - is changed and not valid xml file - but after
> >> import to Postgis a table is created and some records have geometry, the
> >> other not.
> >>
> >> All files are accessible here:
> >>
> >
>
https://drive.google.com/folderview?id=0B54CPoAEcivYOTZhNDlpU3hkTlk&usp=sharing
> >>
> >> So I have the following questions:
> >> 1. In file OT_ADJA_A.xml  Why aplication not recognize <ot:geometria>
> >> element which is "gml:PolygonType" type ? (there is definition in
> >> OT_BDOT10k_BDOO.xsd file)
> > Because the OGR GML driver has limited support to parse .xsd files. The
> .xsd
> > should be just near the .xml file, and with the same basename. But even if
> it
> > was the case, it is just not smart enough to realize that <ot:geometria>
> must be
> > a "gml:PolygonType"
> >
> >> 2. In file OT_ADJA_A_changed.xml I replace <ot:geometria> with
> >> <gml:Polygon>. Why in that case some of records are imported with
> >> geometry and the other not ?
> > I don't see that problem. In the sample you've provided, there are 6
> features
> > with geometries and the 6 are imported into PostGIS with their geometries
> >
> >> 3. Is there any constraints of Postgis or ogr2ogr in quantity of
> >> vertices which can have a Polygon ?
> > No, you're only limited by the size of virtual memory (and possibly a
> PostgreSQL
> > limit on the size of records or fields)
> >
> >> I will appreciate any help.
> >> Regards,
> >> Piotr
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >
> >
>
>



From stefano.iacovella at gmail.com  Tue Aug  6 00:36:49 2013
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Tue, 6 Aug 2013 09:36:49 +0200
Subject: [gdal-dev] Error Oracle -lco options
In-Reply-To: <51FFFB44.6070703@mapgears.com>
References: <51FFFB44.6070703@mapgears.com>
Message-ID: <CAG9OqYqb3g9bW2JHc8tOr4UCrd80eEuHDXxP2pqi0DsVJDg4ZQ@mail.gmail.com>

Hi Simon,

try with this syntax:

ogr2ogr --debug on -a_srs EPSG:32198 -f OCI -nln mcc_test_sm -nlt POINT
?lco SRID=32198 ?lco GEOMETRY_NAME=GEOM OCI:***/***@eddbd01
mcc_v_immobilisation_p.gml

Kind Regards,

Stefano

---------------------------------------------------
41.95581N 12.52854E


http://www.linkedin.com/in/stefanoiacovella

http://twitter.com/#!/Iacovellas


2013/8/5 Simon Mercier <smercier at mapgears.com>

>  Hi list
>
> I have to upload data  (same problem with shapefiles and gml) in Oracle
> with ogr2ogr and I got an error when I specify any -lco option.  If I don't
> add -lco in command line, data is uploaded without error.  Anyone have an
> idea?
>
> thank's
>
> ogr2ogr --version
>  GDAL 1.10.0, released 2013/04/24
>
> ogr2ogr --debug on -a_srs EPSG:32198 -f OCI OCI:***/***@eddbd01
> mcc_v_immobilisation_p.gml -nln mcc_test_sm -nlt POINT ?lco SRID=32198 ?lco
> GEOMETRY_NAME=GEOM
> GML: Using Expat reader
> GML: Using mcc_v_immobilisation_p.xsd
> OGR: OGROpen(mcc_v_immobilisation_p.gml/0x1ff1570) succeeded as GML.
> OCI: Userid=***, Password=***, Database=eddbd01
> OCI: Prepare(ALTER SESSION SET NLS_DATE_FORMAT='YYYY/MM/DD'
> NLS_TIME_FORMAT='HH24:MI:SS' NLS_TIME_TZ_FORMAT='HH24:MI:SS TZHTZM'
> NLS_TIMESTAMP_FORMAT='YYYY/MM/DD HH24:MI:SS'
> NLS_TIMESTAMP_TZ_FORMAT='YYYY/MM/DD HH24:MI:SS TZHTZM')
> OCI: Prepare(SELECT TABLE_NAME, OWNER FROM ALL_SDO_GEOM_METADATA)
> OCI: Prepare(SELECT COUNT(*) FROM ALL_SDO_GEOM_METADATA u,
> TABLE(u.diminfo) t  WHERE u.table_name = 'EOLIENNES_P' AND u.column_name =
> 'GEOM')
> OCI: Prepare(SELECT SRID FROM ALL_SDO_GEOM_METADATA WHERE TABLE_NAME =
> UPPER('EOLIENNES_P') AND COLUMN_NAME = UPPER('GEOM'))
> OCI: Prepare(SELECT WKTEXT, AUTH_SRID, AUTH_NAME FROM MDSYS.CS_SRS WHERE
> SRID = 4326 AND WKTEXT IS NOT NULL)
> OCI: Prepare(SELECT COUNT(*) FROM ALL_SDO_GEOM_METADATA u,
> TABLE(u.diminfo) t  WHERE u.table_name = 'SQL_STATEMENT' AND u.column_name
> = 'ORA_GEOMETRY')
> OCI: Prepare(SELECT SRID FROM ALL_SDO_GEOM_METADATA WHERE TABLE_NAME =
> UPPER('SQL_STATEMENT') AND COLUMN_NAME = UPPER('ORA_GEOMETRY'))
> OCI: Prepare(SELECT WKTEXT, AUTH_SRID, AUTH_NAME FROM MDSYS.CS_SRS WHERE
> SRID = 1000003006 AND WKTEXT IS NOT NULL)
> FAILURE: Couldn't fetch requested layer '?lco'!
> GDAL: In GDALDestroy - unloading GDAL shared library.
> **********
>
> --
> simon mercier
> co-fondateur solutions mapgears
> 2383 che ste-Foy bur 202 qu?bec, qc
> canada G1V1T1
>
> t_418_476_7139#101
> m_418_559_7139simonmercier.net / mapgears.com
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130806/e00f4675/attachment.html>

From j.l.h.hartmann at uva.nl  Tue Aug  6 02:21:08 2013
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Tue, 06 Aug 2013 11:21:08 +0200
Subject: [gdal-dev] concatenated VRT file
In-Reply-To: <CA+YzLBcM3ZXmf6zSDfp7BJqehBD=VcDiS3YMaU6rKnqBqm9+ig@mail.gmail.com>
References: <A0BBB2A8-1547-46DC-9F96-29CEBD807FFF@kyngchaos.com>	<1FCD083E-E751-4929-9BD5-E7F754B8F523@kyngchaos.com>
	<CA+YzLBcM3ZXmf6zSDfp7BJqehBD=VcDiS3YMaU6rKnqBqm9+ig@mail.gmail.com>
Message-ID: <5200C004.7060706@uva.nl>

Not sure if this is possible, but perhaps someone here knows a trick.

I use a VRT file as an index to a large set of detailed, tiled scans of 
the Netherlands, built with gdalbuildvrt. I recently discovered how to 
transform this map on the fly, so that it  exactly aligns to older maps 
in different coordinate systems. It's just a matter of adapting the 
<geotransform> item in the VRT file.

So I can copy the VRT file for every old map, and adapt the 
<geotransform> in each of them. This means that all VRT files will be 
identical, except for the <geotransform> line. The VRT files are quite 
large, because they cover lots of tiles. Can anyone here think of a 
method to do this with one central VRT file, in which only the 
<geotransform> line is plugged that is required for the particular old 
map?  Something like a symbolic link to concatenate the variable and 
stable parts of the VRT file?

Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130806/0bdc214f/attachment-0001.html>

From jukka.rahkonen at mmmtike.fi  Tue Aug  6 03:23:27 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 6 Aug 2013 10:23:27 +0000 (UTC)
Subject: [gdal-dev] Error Oracle -lco options
References: <51FFFB44.6070703@mapgears.com>
Message-ID: <loom.20130806T120851-409@post.gmane.org>

Simon Mercier <smercier <at> mapgears.com> writes:

> 
> 
>     Hi list
>     I have to upload data? (same problem with shapefiles and gml) in
>     Oracle with ogr2ogr and I got an error when I specify any -lco
>     option.? If I don't add -lco in command line, data is uploaded
>     without error.? Anyone have an idea?
>     thank's

Hi,

My idea is that perhaps the hyphen-minus character before "lco" in your
command is actually some other character which looks similar. Therefore
ogr2ogr does not recognise than now starts the 'layer creation option' but
it believes that the whole string '?lco' means the layer name inside your
GML file which is naturally not found. Similar things happen to me with
hyphens and quotes if I copy-paste commands from web pages or Word or
OpenOffice documents. This may feel stupid, but try what happens if you
rewrite your command as it is from the keyboard.

Regards,

-Jukka Rahkonen-




From emmanuel.sambale at gmail.com  Tue Aug  6 05:24:12 2013
From: emmanuel.sambale at gmail.com (maning sambale)
Date: Tue, 6 Aug 2013 20:24:12 +0800
Subject: [gdal-dev] How to use ozi_datum.csv in ogr2ogr
Message-ID: <CAPzumuHYSrVkZfaduUqsg0O5z3NXOw-1L3oaVKcuOpg-dMCAnQ@mail.gmail.com>

Hi,

I'm trying to use the Luzon Mindanao transformation to re-project some
files.  The
Luzon Mindanao transformation [0] is commonly used in some maps in the
Philippines often referred to as a separate datum but is actually just a
unique set of transformation parameters based on the Luzon 1911 datum.
According to the EPSG registry, the code is EPSG::2364.

Gdal 1.10 has included this transformation using the ozi_datum.csv.  How do
I use this in ogr2ogr?
For example I tried this:

ogr2ogr -t_srs "Luzon Mindanao" dest.shp source.shp
Failed to process SRS definition: Luzon Mindanao

[0]
http://earth-info.nga.mil/GandG/coordsys/onlinedatum/CountryAsiaTable.html#LUZB
[1] http://svn.osgeo.org/gdal/trunk/gdal/data/ozi_datum.csv
-- 
cheers,
maning
------------------------------------------------------
"Freedom is still the most radical idea of all" -N.Branden
wiki: http://esambale.wikispaces.com/
blog: http://epsg4253.wordpress.com/
------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130806/7eecaf74/attachment.html>

From even.rouault at mines-paris.org  Tue Aug  6 05:45:16 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 06 Aug 2013 14:45:16 +0200
Subject: [gdal-dev] How to use ozi_datum.csv in ogr2ogr
In-Reply-To: <CAPzumuHYSrVkZfaduUqsg0O5z3NXOw-1L3oaVKcuOpg-dMCAnQ@mail.gmail.com>
References: <CAPzumuHYSrVkZfaduUqsg0O5z3NXOw-1L3oaVKcuOpg-dMCAnQ@mail.gmail.com>
Message-ID: <1375793116.5200efdca3735@imp.free.fr>

Selon maning sambale <emmanuel.sambale at gmail.com>:

> Hi,
>
> I'm trying to use the Luzon Mindanao transformation to re-project some
> files.  The
> Luzon Mindanao transformation [0] is commonly used in some maps in the
> Philippines often referred to as a separate datum but is actually just a
> unique set of transformation parameters based on the Luzon 1911 datum.
> According to the EPSG registry, the code is EPSG::2364.
>
> Gdal 1.10 has included this transformation using the ozi_datum.csv.  How do
> I use this in ogr2ogr?
> For example I tried this:
>
> ogr2ogr -t_srs "Luzon Mindanao" dest.shp source.shp
> Failed to process SRS definition: Luzon Mindanao
>

You cannot use directly the strings of ozi_datum.csv. It is only for the
internal use of the OZI driver.

You can use the proj.4 string directly :

ogr2ogr -t_srs "+proj=longlat +ellps=clrk66 +towgs84=-133,-79,-72,0,0,0,0
+no_defs" dest.shp source.shp

> [0]
>
http://earth-info.nga.mil/GandG/coordsys/onlinedatum/CountryAsiaTable.html#LUZB
> [1] http://svn.osgeo.org/gdal/trunk/gdal/data/ozi_datum.csv
> --
> cheers,
> maning
> ------------------------------------------------------
> "Freedom is still the most radical idea of all" -N.Branden
> wiki: http://esambale.wikispaces.com/
> blog: http://epsg4253.wordpress.com/
> ------------------------------------------------------
>



From woklist at kyngchaos.com  Tue Aug  6 07:22:10 2013
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue, 6 Aug 2013 09:22:10 -0500
Subject: [gdal-dev] OGDI dead?
In-Reply-To: <51FFC2F5.1090700@gmx.at>
References: <A0BBB2A8-1547-46DC-9F96-29CEBD807FFF@kyngchaos.com>
	<1FCD083E-E751-4929-9BD5-E7F754B8F523@kyngchaos.com>
	<CA+YzLBcM3ZXmf6zSDfp7BJqehBD=VcDiS3YMaU6rKnqBqm9+ig@mail.gmail.com>
	<51FFC2F5.1090700@gmx.at>
Message-ID: <AA58C724-1752-458A-BA5B-A829B789532C@kyngchaos.com>

Compiled with just the:

ptr->dtptr = nad_init(pj_get_default_ctx(), pathfile);

patch (standard workaround: pulled in projects.h from proj source).  Seems to work fine.  I don't know if all the PJ* to ProjPJ changes are critical, seems OK without.

On Aug 5, 2013, at 10:21 AM, Volker Fr?hlich wrote:

> For reference:
> 
> https://bugzilla.redhat.com/show_bug.cgi?id=816282
> 
> Volker
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those least suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy



From oehm8895 at uni-landau.de  Tue Aug  6 07:38:42 2013
From: oehm8895 at uni-landau.de (Gunnar Oehmichen)
Date: Tue, 06 Aug 2013 16:38:42 +0200
Subject: [gdal-dev] netCDF Data without subdatasets
Message-ID: <52010A72.6040806@uni-landau.de>

Hi,

this is my first time using netcdf data and gdal library on Ubuntu 12.04

I have downloaded a subsetted monthly precipitation dataset from:

http://www.esrl.noaa.gov/psd/data/gridded/data.cmap.html

I want to create timelines of a few gridcells (covering germany)

As I understand, before converting bands to raster-images by 
gdal_translate one has to extract information from the subdatasets.

My Problem is:

using

gdalinfo X139.14.20.244.217.3.48.41.nc > gdalinfo.txt

No subdatasets appear. I would have expected something like to the 
follwing to be included in the output of gdalinfo:

SUBDATASET_1_NAME=NETCDF:...
SUBDATASET_1_DESC=...
SUBDATASET_2_NAME=...
SUBDATASET_2_DESC=...
SUBDATASET_3_NAME=...
SUBDATASET_3_DESC=...

Instead the output is as following:

Driver: netCDF/Network Common Data Format
Files: X139.14.20.244.217.3.47.29.nc
Size is 6, 5
Coordinate System is `'
Origin = (2.500000000000000,57.500000000000000)
Pixel Size = (2.500000000000000,-2.500000000000000)
Metadata:
   lat#actual_range={ 56.25, 46.25 }
   lat#axis=Y
   lat#long_name=Latitude
   lat#standard_name=latitude
   lat#units=degrees_north
   lon#actual_range={ 3.75, 16.25 }
   lon#axis=X
   lon#long_name=Longitude
   lon#standard_name=longitude
   lon#units=degrees_east
   NC_GLOBAL#Conventions=COARDS
 
NC_GLOBAL#documentation=http://www.esrl.noaa.gov/psd/data/gridded/data.cmap.html
   NC_GLOBAL#history=Tue Aug  6 03:47:30 2013: ncks -O -d 
lat,46.000000,57.000000 -d lon,3.000000,17.000000 -d time,0,2401 
/Datasets/cmap/std/precip.pentad.mean.nc 
/Public/www/X139.14.20.244.217.3.47.29.nc
Created by CAS 09/2012  using Version 1201
   NC_GLOBAL#platform=Analyses
 
NC_GLOBAL#references=http://www.esrl.noaa.gov/psd/data/gridded/data.cmap.html
   NC_GLOBAL#source=ftp ftp.cpc.ncep.noaa.gov precip/cmap/pentad
   NC_GLOBAL#title=CPC Merged Analysis of Precipitation Pentad data 
(excludes NCEP Reanalysis I)
   NC_GLOBAL#Version=V1201
   precip#actual_range={ 0, 25.07 }
   precip#add_offset=0
   precip#dataset=CPC Merged Analysis of Precipitation Standard
   precip#least_significant_digit=2
   precip#level_desc=Surface
   precip#long_name=Average Pentad Rate of Precipitation
   precip#missing_value=-9.96921e+36
   precip#parent_stat=Mean
   precip#precision=2
   precip#scale_factor=1
   precip#statistic=Pentad Mean
   precip#units=mm/day
   precip#valid_range={ 0, 250 }
   precip#var_desc=Precipitation
   time#actual_range={ 1569072, 1857384 }
   time#avg_period=0000-01-00 00:00:00
   time#axis=T
   time#delta_t=0000-00-05 00:00:00
   time#long_name=Time
   time#standard_name=time
   time#units=hours since 1800-01-01 00:00:0.0
Corner Coordinates:
Upper Left  (   2.5000000,  57.5000000)
Lower Left  (   2.5000000,  45.0000000)
Upper Right (  17.5000000,  57.5000000)
Lower Right (  17.5000000,  45.0000000)
Center      (  10.0000000,  51.2500000)
Band 1 Block=6x1 Type=Float32, ColorInterp=Undefined
   NoData Value=-9.96920996838686905e+36
   Metadata:
     actual_range={ 0, 25.07 }
     add_offset=0
     dataset=CPC Merged Analysis of Precipitation Standard
     least_significant_digit=2
     level_desc=Surface
     long_name=Average Pentad Rate of Precipitation
     missing_value=-9.96921e+36
     NETCDF_DIMENSION_time=1569072
     NETCDF_time_units=hours since 1800-01-01 00:00:0.0
     NETCDF_VARNAME=precip
     parent_stat=Mean
     precision=2
     scale_factor=1
     statistic=Pentad Mean
     units=mm/day
     valid_range={ 0, 250 }
     var_desc=Precipitation

And the next bands following.
---
Here is the metadata:
---


Metadata for /Public/www/X139.14.20.244.217.3.47.29.nc
Dimensions:

	time				2402
	lat				5
	lon				6
	precip				2402 5 6

Variables:

     time

     	long_name			Time
     	avg_period			0000-01-00 00:00:00
     	axis				T
     	standard_name			time
     	delta_t				0000-00-05 00:00:00
     	actual_range			1979-01-01 00:00:00 2011-11-22 00:00:00
     	units				hours since 1800-01-01 00:00:0.0
     lat

     	long_name			Latitude
     	axis				Y
     	standard_name			latitude
     	actual_range			56.25 46.25
     	units				degrees_north
     lon

     	long_name			Longitude
     	axis				X
     	standard_name			longitude
     	actual_range			3.75 16.25
     	units				degrees_east
     precip

     	parent_stat			Mean
     	long_name			Average Pentad Rate of Precipitation
     	valid_range			0 250
     	least_significant_digit		2
     	level_desc			Surface
     	dataset				CPC Merged Analysis of Precipitation Standard
     	missing_value			-9.96920996838687e+36
     	statistic			Pentad Mean
     	actual_range			0 25.0699996948242
     	var_desc			Precipitation
     	add_offset			0
     	precision			2
     	units				mm/day
     	scale_factor			1

Global Attributes:

     source
         ftp ftp.cpc.ncep.noaa.gov precip/cmap/pentad

     Version
         V1201

     history
         Tue Aug 6 03:47:30 2013: ncks -O -d lat,46.000000,57.000000 -d 
lon,3.000000,17.000000 -d time,0,2401 
/Datasets/cmap/std/precip.pentad.mean.nc 
/Public/www/X139.14.20.244.217.3.47.29.nc Created by CAS 09/2012 using 
Version 1201

     references
         http://www.esrl.noaa.gov/psd/data/gridded/data.cmap.html

     documentation
         http://www.esrl.noaa.gov/psd/data/gridded/data.cmap.html

     platform
         Analyses

     title
         CPC Merged Analysis of Precipitation Pentad data (excludes NCEP 
Reanalysis I)

     Conventions
         COARDS
---

Any advise on how to proceed to create rasters and timelines from this 
would be very appreciated. Probably something obvious I do not see.

Thanks,

Gunnar




From ricardo.garcia.silva at gmail.com  Tue Aug  6 08:57:58 2013
From: ricardo.garcia.silva at gmail.com (Ricardo Filipe Soares Garcia da)
Date: Tue, 6 Aug 2013 16:57:58 +0100
Subject: [gdal-dev] Upgrade Python GDAL package in pypi
Message-ID: <CAFcNcQZWyvKWUajcFGqNpshq4kkAbeti6zKF+4X6Fk4Bw4fi4Q@mail.gmail.com>

Hello list

I have been using GDAL Python bindings inside a virtualenv on some
ubuntu-server 12.04 machines to do geoprocessing tasks.

I have an automated script to setup GDAL from the ubuntugis repository and
then use pip to get the Python bindings code (from pypi) and execute
setup.py with the correct gdal paths and compile the bindings. It used to
work nicely.

Unfortunately, now that GDAL 1.10 is out and the ubuntugis folks have
upgraded their GDAL, I cannot do this anymore, because the pypi version of
GDAL is still at 1.9.1.

I'd like to kindly request that the package available in the python package
index be upgraded to version 1.10 too.

Thanks
-- 
___________________________ ___ __
Ricardo Garcia Silva
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130806/7db0a372/attachment.html>

From eadam at co.lincoln.or.us  Tue Aug  6 09:18:48 2013
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Tue, 6 Aug 2013 09:18:48 -0700
Subject: [gdal-dev] concatenated VRT file
In-Reply-To: <5200C004.7060706@uva.nl>
References: <A0BBB2A8-1547-46DC-9F96-29CEBD807FFF@kyngchaos.com>
	<1FCD083E-E751-4929-9BD5-E7F754B8F523@kyngchaos.com>
	<CA+YzLBcM3ZXmf6zSDfp7BJqehBD=VcDiS3YMaU6rKnqBqm9+ig@mail.gmail.com>
	<5200C004.7060706@uva.nl>
Message-ID: <CACqBkM87toFWjGtJ5sHrmEtGJXYu_20iRHrsMk823-WS3GemdA@mail.gmail.com>

On Tue, Aug 6, 2013 at 2:21 AM, Jan Hartmann <j.l.h.hartmann at uva.nl> wrote:

> **
> Not sure if this is possible, but perhaps someone here knows a trick.
>
> I use a VRT file as an index to a large set of detailed, tiled scans of
> the Netherlands, built with gdalbuildvrt. I recently discovered how to
> transform this map on the fly, so that it  exactly aligns to older maps in
> different coordinate systems. It's just a matter of adapting the
> <geotransform> item in the VRT file.
>

I'm not sure if this will work for what you are doing, but I change the
projection of VRT files with gdalwarp: gdalwarp -of VRT -t_srs "+proj=omerc
+lat_0=44.75 +lonc=-124.05 +alpha=5 +k=1 +x_0=134743.33241
+y_0=369139.02771 +ellps=GRS80 +datum=NAD83 +to_meter=0.3048 +no_defs
+wktext" infile.vrt outfile.vrt

Eli


>
> So I can copy the VRT file for every old map, and adapt the <geotransform>
> in each of them. This means that all VRT files will be identical, except
> for the <geotransform> line. The VRT files are quite large, because they
> cover lots of tiles. Can anyone here think of a method to do this with one
> central VRT file, in which only the <geotransform> line is plugged that is
> required for the particular old map?  Something like a symbolic link to
> concatenate the variable and stable parts of the VRT file?
>
> Jan
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130806/46015aa6/attachment-0001.html>

From etourigny.dev at gmail.com  Tue Aug  6 10:03:23 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 6 Aug 2013 14:03:23 -0300
Subject: [gdal-dev] netCDF Data without subdatasets
In-Reply-To: <52010A72.6040806@uni-landau.de>
References: <52010A72.6040806@uni-landau.de>
Message-ID: <CA+TxYvPz2KQh2gBowUAvXYcF2jQJgx+stnNrxXPibof0iAKXog@mail.gmail.com>

The file has no subdatasets, so you can use any of the gdal tools
(gdalwarp, gdal_translate) normally.  If you want a gtiff file you
would use gdal_translate

gdal_translate -of gtiff in.nc out.tif

On Tue, Aug 6, 2013 at 11:38 AM, Gunnar Oehmichen
<oehm8895 at uni-landau.de> wrote:
> Hi,
>
> this is my first time using netcdf data and gdal library on Ubuntu 12.04
>
> I have downloaded a subsetted monthly precipitation dataset from:
>
> http://www.esrl.noaa.gov/psd/data/gridded/data.cmap.html
>
> I want to create timelines of a few gridcells (covering germany)
>
> As I understand, before converting bands to raster-images by gdal_translate
> one has to extract information from the subdatasets.
>
> My Problem is:
>
> using
>
> gdalinfo X139.14.20.244.217.3.48.41.nc > gdalinfo.txt
>
> No subdatasets appear. I would have expected something like to the follwing
> to be included in the output of gdalinfo:
>
> SUBDATASET_1_NAME=NETCDF:...
> SUBDATASET_1_DESC=...
> SUBDATASET_2_NAME=...
> SUBDATASET_2_DESC=...
> SUBDATASET_3_NAME=...
> SUBDATASET_3_DESC=...
>
> Instead the output is as following:
>
> Driver: netCDF/Network Common Data Format
> Files: X139.14.20.244.217.3.47.29.nc
> Size is 6, 5
> Coordinate System is `'
> Origin = (2.500000000000000,57.500000000000000)
> Pixel Size = (2.500000000000000,-2.500000000000000)
> Metadata:
>   lat#actual_range={ 56.25, 46.25 }
>   lat#axis=Y
>   lat#long_name=Latitude
>   lat#standard_name=latitude
>   lat#units=degrees_north
>   lon#actual_range={ 3.75, 16.25 }
>   lon#axis=X
>   lon#long_name=Longitude
>   lon#standard_name=longitude
>   lon#units=degrees_east
>   NC_GLOBAL#Conventions=COARDS
>
> NC_GLOBAL#documentation=http://www.esrl.noaa.gov/psd/data/gridded/data.cmap.html
>   NC_GLOBAL#history=Tue Aug  6 03:47:30 2013: ncks -O -d
> lat,46.000000,57.000000 -d lon,3.000000,17.000000 -d time,0,2401
> /Datasets/cmap/std/precip.pentad.mean.nc
> /Public/www/X139.14.20.244.217.3.47.29.nc
> Created by CAS 09/2012  using Version 1201
>   NC_GLOBAL#platform=Analyses
>
> NC_GLOBAL#references=http://www.esrl.noaa.gov/psd/data/gridded/data.cmap.html
>   NC_GLOBAL#source=ftp ftp.cpc.ncep.noaa.gov precip/cmap/pentad
>   NC_GLOBAL#title=CPC Merged Analysis of Precipitation Pentad data (excludes
> NCEP Reanalysis I)
>   NC_GLOBAL#Version=V1201
>   precip#actual_range={ 0, 25.07 }
>   precip#add_offset=0
>   precip#dataset=CPC Merged Analysis of Precipitation Standard
>   precip#least_significant_digit=2
>   precip#level_desc=Surface
>   precip#long_name=Average Pentad Rate of Precipitation
>   precip#missing_value=-9.96921e+36
>   precip#parent_stat=Mean
>   precip#precision=2
>   precip#scale_factor=1
>   precip#statistic=Pentad Mean
>   precip#units=mm/day
>   precip#valid_range={ 0, 250 }
>   precip#var_desc=Precipitation
>   time#actual_range={ 1569072, 1857384 }
>   time#avg_period=0000-01-00 00:00:00
>   time#axis=T
>   time#delta_t=0000-00-05 00:00:00
>   time#long_name=Time
>   time#standard_name=time
>   time#units=hours since 1800-01-01 00:00:0.0
> Corner Coordinates:
> Upper Left  (   2.5000000,  57.5000000)
> Lower Left  (   2.5000000,  45.0000000)
> Upper Right (  17.5000000,  57.5000000)
> Lower Right (  17.5000000,  45.0000000)
> Center      (  10.0000000,  51.2500000)
> Band 1 Block=6x1 Type=Float32, ColorInterp=Undefined
>   NoData Value=-9.96920996838686905e+36
>   Metadata:
>     actual_range={ 0, 25.07 }
>     add_offset=0
>     dataset=CPC Merged Analysis of Precipitation Standard
>     least_significant_digit=2
>     level_desc=Surface
>     long_name=Average Pentad Rate of Precipitation
>     missing_value=-9.96921e+36
>     NETCDF_DIMENSION_time=1569072
>     NETCDF_time_units=hours since 1800-01-01 00:00:0.0
>     NETCDF_VARNAME=precip
>     parent_stat=Mean
>     precision=2
>     scale_factor=1
>     statistic=Pentad Mean
>     units=mm/day
>     valid_range={ 0, 250 }
>     var_desc=Precipitation
>
> And the next bands following.
> ---
> Here is the metadata:
> ---
>
>
> Metadata for /Public/www/X139.14.20.244.217.3.47.29.nc
> Dimensions:
>
>         time                            2402
>         lat                             5
>         lon                             6
>         precip                          2402 5 6
>
> Variables:
>
>     time
>
>         long_name                       Time
>         avg_period                      0000-01-00 00:00:00
>         axis                            T
>         standard_name                   time
>         delta_t                         0000-00-05 00:00:00
>         actual_range                    1979-01-01 00:00:00 2011-11-22
> 00:00:00
>         units                           hours since 1800-01-01 00:00:0.0
>     lat
>
>         long_name                       Latitude
>         axis                            Y
>         standard_name                   latitude
>         actual_range                    56.25 46.25
>         units                           degrees_north
>     lon
>
>         long_name                       Longitude
>         axis                            X
>         standard_name                   longitude
>         actual_range                    3.75 16.25
>         units                           degrees_east
>     precip
>
>         parent_stat                     Mean
>         long_name                       Average Pentad Rate of Precipitation
>         valid_range                     0 250
>         least_significant_digit         2
>         level_desc                      Surface
>         dataset                         CPC Merged Analysis of Precipitation
> Standard
>         missing_value                   -9.96920996838687e+36
>         statistic                       Pentad Mean
>         actual_range                    0 25.0699996948242
>         var_desc                        Precipitation
>         add_offset                      0
>         precision                       2
>         units                           mm/day
>         scale_factor                    1
>
> Global Attributes:
>
>     source
>         ftp ftp.cpc.ncep.noaa.gov precip/cmap/pentad
>
>     Version
>         V1201
>
>     history
>         Tue Aug 6 03:47:30 2013: ncks -O -d lat,46.000000,57.000000 -d
> lon,3.000000,17.000000 -d time,0,2401
> /Datasets/cmap/std/precip.pentad.mean.nc
> /Public/www/X139.14.20.244.217.3.47.29.nc Created by CAS 09/2012 using
> Version 1201
>
>     references
>         http://www.esrl.noaa.gov/psd/data/gridded/data.cmap.html
>
>     documentation
>         http://www.esrl.noaa.gov/psd/data/gridded/data.cmap.html
>
>     platform
>         Analyses
>
>     title
>         CPC Merged Analysis of Precipitation Pentad data (excludes NCEP
> Reanalysis I)
>
>     Conventions
>         COARDS
> ---
>
> Any advise on how to proceed to create rasters and timelines from this would
> be very appreciated. Probably something obvious I do not see.
>
> Thanks,
>
> Gunnar
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From piotrpachol at gmail.com  Tue Aug  6 14:32:26 2013
From: piotrpachol at gmail.com (=?UTF-8?B?UGlvdHIgUGFjaMOzxYI=?=)
Date: Tue, 06 Aug 2013 23:32:26 +0200
Subject: [gdal-dev] problem with importing gml file to PostGIS with
	ogr2ogr
In-Reply-To: <1375773511.5200a347d88dc@imp.free.fr>
References: <52000448.6030804@gmail.com> <1375733966.520008ce6af90@imp.free.fr>
	<52003A51.7000008@gmail.com> <1375773511.5200a347d88dc@imp.free.fr>
Message-ID: <52016B6A.6070008@gmail.com>

I have older configuration:
- PostgreSQL 9.1.5, compiled by Visual C++ build 1500, on Windows XP 32bit
- PostGIS 2.0.1
- gdal, geos and proj based on FWTools 2.4.7 for Windows 32bit
Should I install newer versions ?

What can I do with your script ?

I made additional test importing gml to shp (in shp everything is OK)
and than by PostGIS shapefile loader I imported shape to PostGIS.
The results are the same - some records have geometry the other not.
Perhaps I must ask on PostGIS forum ?

Piotr

W dniu 2013-08-06 09:18, Even Rouault pisze:
> Selon Piotr Pach? <piotrpachol at gmail.com>:
>
>> Thanks for your explanations but I still can't import polygons which
>> contains many vertices.
>> I do some test with polygons which contains different quantities of
>> vertices and
>> on my computer and configuration I can import polygon which has 2046
>> pairs (x,y) of coordinates
>> but I can't import when it has 2047 pairs and more.
>> The length of hex string which is created in attribute
>> geometry(Geometry,2180)
>> can't be longer than 65534 chars.
>> Where eventually to change  some configurations variables of PostGIS or
>> Postgres or ogr2ogr ?
>> Do you have any other suggestion ?
> I don't reproduce such limitations with the following script :
>
> from osgeo import ogr
>
> ls = 'LINESTRING('
> for i in range(60000):
>      if i != 0:
>          ls = ls + ','
>      ls = ls + "%d %d" % (2*i,2*i+1)
> ls = ls + ')'
>
> ds = ogr.Open('pg:dbname=autotest', update=1)
> lyr = ds.CreateLayer('biggeom', geom_type = ogr.wkbLineString, options =
> ['OVERWRITE=YES'])
> feat = ogr.Feature(lyr.GetLayerDefn())
> feat.SetGeometry(ogr.CreateGeometryFromWkt(ls))
> lyr.CreateFeature(feat)
> feat = None
> ds = None
>
> ds = ogr.Open('pg:dbname=autotest')
> lyr = ds.GetLayerByName('biggeom')
> lyr.ResetReading()
> feat = lyr.GetNextFeature()
> feat.DumpReadable()
>
>
> My config :
> POSTGIS="2.0.3 r11128" GEOS="3.3.8-CAPI-1.7.8" PROJ="Rel. 4.8.0, 6 March 2012"
> GDAL="GDAL 1.10.0, released 2013/04/24" LIBXML="2.8.0" LIBJSON="UNKNOWN" RASTER
>
> PostgreSQL 9.1.9 on x86_64-unknown-linux-gnu, compiled by gcc (Ubuntu/Linaro
> 4.6.3-1ubuntu5) 4.6.3, 64-bit
>
>
>
>> Piotr
>>
>>
>> W dniu 2013-08-05 22:19, Even Rouault pisze:
>>> Selon Piotr Pach?? <piotrpachol at gmail.com>:
>>>
>>>> Hello list,
>>>> I have problem with importing gml file (with polygons) to postgis using
>>>> standard ogr2ogr command which look like:
>>>>
>>>> ogr2ogr -a_srs EPSG:2180 -f "PostgreSQL" PG:"host=localhost
>>>> user=postgres dbname=test password=postgres port=5432"
>>>> d:\test\BDOT10k\OT_ADJA_A.xml
>>>>
>>>> I tried to import two GML files (with xsd schema necessary):
>>>> - OT_ADJA_A.xml -  is orginal valid xml file - after import to Postgis a
>>>> table is created but geometry column is empty,
>>>> - OT_ADJA_A_changed.xml - is changed and not valid xml file - but after
>>>> import to Postgis a table is created and some records have geometry, the
>>>> other not.
>>>>
>>>> All files are accessible here:
>>>>
> https://drive.google.com/folderview?id=0B54CPoAEcivYOTZhNDlpU3hkTlk&usp=sharing
>>>> So I have the following questions:
>>>> 1. In file OT_ADJA_A.xml  Why aplication not recognize <ot:geometria>
>>>> element which is "gml:PolygonType" type ? (there is definition in
>>>> OT_BDOT10k_BDOO.xsd file)
>>> Because the OGR GML driver has limited support to parse .xsd files. The
>> .xsd
>>> should be just near the .xml file, and with the same basename. But even if
>> it
>>> was the case, it is just not smart enough to realize that <ot:geometria>
>> must be
>>> a "gml:PolygonType"
>>>
>>>> 2. In file OT_ADJA_A_changed.xml I replace <ot:geometria> with
>>>> <gml:Polygon>. Why in that case some of records are imported with
>>>> geometry and the other not ?
>>> I don't see that problem. In the sample you've provided, there are 6
>> features
>>> with geometries and the 6 are imported into PostGIS with their geometries
>>>
>>>> 3. Is there any constraints of Postgis or ogr2ogr in quantity of
>>>> vertices which can have a Polygon ?
>>> No, you're only limited by the size of virtual memory (and possibly a
>> PostgreSQL
>>> limit on the size of records or fields)
>>>
>>>> I will appreciate any help.
>>>> Regards,
>>>> Piotr
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>

From Luke.Pinner at environment.gov.au  Tue Aug  6 18:25:52 2013
From: Luke.Pinner at environment.gov.au (lpinner)
Date: Tue, 6 Aug 2013 18:25:52 -0700 (PDT)
Subject: [gdal-dev] Upgrade Python GDAL package in pypi
In-Reply-To: <CAFcNcQZWyvKWUajcFGqNpshq4kkAbeti6zKF+4X6Fk4Bw4fi4Q@mail.gmail.com>
References: <CAFcNcQZWyvKWUajcFGqNpshq4kkAbeti6zKF+4X6Fk4Bw4fi4Q@mail.gmail.com>
Message-ID: <1375838752484-5071188.post@n6.nabble.com>

If you're installing gdal from ubuntugis, why not install the python bindings
from there also? 
sudo apt-get install python-gdal

If this is not an option due to the use of virtualenv, as a workaround until
pypi gets updated you could script the download of the .deb (i.e on 64bit
12.04
https://launchpad.net/~ubuntugis/+archive/ubuntugis-unstable/+files/python-gdal_1.10.0-1%7Eprecise1_amd64.deb),
unzip it and install the bindings to your virtualenv.

Luke



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-Upgrade-Python-GDAL-package-in-pypi-tp5071102p5071188.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From j.l.h.hartmann at uva.nl  Wed Aug  7 01:05:01 2013
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed, 07 Aug 2013 10:05:01 +0200
Subject: [gdal-dev] concatenated VRT file
In-Reply-To: <CACqBkM87toFWjGtJ5sHrmEtGJXYu_20iRHrsMk823-WS3GemdA@mail.gmail.com>
References: <A0BBB2A8-1547-46DC-9F96-29CEBD807FFF@kyngchaos.com>	<1FCD083E-E751-4929-9BD5-E7F754B8F523@kyngchaos.com>	<CA+YzLBcM3ZXmf6zSDfp7BJqehBD=VcDiS3YMaU6rKnqBqm9+ig@mail.gmail.com>	<5200C004.7060706@uva.nl>
	<CACqBkM87toFWjGtJ5sHrmEtGJXYu_20iRHrsMk823-WS3GemdA@mail.gmail.com>
Message-ID: <5201FFAD.40804@uva.nl>

Thanks Eli, but this is not what I am trying to do. I have to create 
hundreds of VRTs, all the same except for the one <geotransform> line. I 
would like to to this without making physical copies of the whole file, 
but with some sort of symbolic link to a central VRT-file, and just add 
the geotransform information for each individual file. Perhaps it isn't 
possible; in that case I'll hard-copy the whole bunch.

Jan

On 6-8-2013 18:18, Eli Adam wrote:
> On Tue, Aug 6, 2013 at 2:21 AM, Jan Hartmann <j.l.h.hartmann at uva.nl 
> <mailto:j.l.h.hartmann at uva.nl>> wrote:
>
>     Not sure if this is possible, but perhaps someone here knows a trick.
>
>     I use a VRT file as an index to a large set of detailed, tiled
>     scans of the Netherlands, built with gdalbuildvrt. I recently
>     discovered how to transform this map on the fly, so that it 
>     exactly aligns to older maps in different coordinate systems. It's
>     just a matter of adapting the <geotransform> item in the VRT file.
>
>
> I'm not sure if this will work for what you are doing, but I change 
> the projection of VRT files with gdalwarp: gdalwarp -of VRT -t_srs 
> "+proj=omerc +lat_0=44.75 +lonc=-124.05 +alpha=5 +k=1 
> +x_0=134743.33241 +y_0=369139.02771 +ellps=GRS80 +datum=NAD83 
> +to_meter=0.3048 +no_defs +wktext" infile.vrt outfile.vrt
>
> Eli
>
>
>     So I can copy the VRT file for every old map, and adapt the
>     <geotransform> in each of them. This means that all VRT files will
>     be identical, except for the <geotransform> line. The VRT files
>     are quite large, because they cover lots of tiles. Can anyone here
>     think of a method to do this with one central VRT file, in which
>     only the <geotransform> line is plugged that is required for the
>     particular old map?  Something like a symbolic link to concatenate
>     the variable and stable parts of the VRT file?
>
>     Jan
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130807/d43a4823/attachment.html>

From haileyeckstrand at gmail.com  Wed Aug  7 15:09:26 2013
From: haileyeckstrand at gmail.com (Hailey Eckstrand)
Date: Wed, 7 Aug 2013 15:09:26 -0700
Subject: [gdal-dev] FileGDB Driver coordinate system support
Message-ID: <CABCgRVGPWO6mQi84D5NAtm4pvdyjp-WcWJw+W5x_xdymtHicRA@mail.gmail.com>

Hello,
I am trying to import a feature class from a file geodatabase (version 10
or greater) into PostGIS. After installing the FileGDB driver, I was able
to successfully import a feature class which was in the EPSG 4326 spatial
reference system.
ogr2ogr -f PostgreSQL PG:dbname=fgdb_test dir4326/test4326.gdb

However, I created another file geodatabase and reprojected the feature
class to the BC Albers projection (EPSG: 3005) and then attempted to import
the new fgdb again and it failed with no error. My attempts:
ogr2ogr -f PostgreSQL PG:dbname=fgdb_test dir3005/test3005.gdb
ogr2ogr -f PostgreSQL -s_srs EPSG:3005 PG:dbname=fgdb_test
dir3005/test3005.gdb
ogr2ogr -f PostgreSQL -t_srs EPSG:3005 PG:dbname=fgdb_test
dir3005/test3005.gdb

All failed with no errors. I am not trying to transform while importing.. I
would just like to import a feature class in a projected coordinate system.

I am testing using Ubuntu 12.04
GDAL 1.9.2
FileGDB_API_1_3-64

Also, here is the output from ogrinfo:
$ogrinfo dir4326/test4326.gdb/
INFO: Open of `dir4326/test4326.gdb/'
      using driver `FileGDB' successful.
1: upcheak_landapp4326 (3D Multi Polygon)


$ogrinfo -al dir3005/test3005.gdb/
INFO: Open of `dir3005/test3005.gdb/'
      using driver `FileGDB' successful.

Thank you,
Hailey

Links to the 2 zip files of my 2 test geodatabases:
http://filebin.ca/qjmBMOaH0cR/dir4326.zip
http://filebin.ca/qjmPiqEAsJ6/dir3005.zip
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130807/5a73d9cc/attachment.html>

From smercier at mapgears.com  Wed Aug  7 15:10:56 2013
From: smercier at mapgears.com (Simon Mercier)
Date: Wed, 07 Aug 2013 18:10:56 -0400
Subject: [gdal-dev] Error Oracle -lco options
In-Reply-To: <loom.20130806T120851-409@post.gmane.org>
References: <51FFFB44.6070703@mapgears.com>
	<loom.20130806T120851-409@post.gmane.org>
Message-ID: <5202C5F0.70206@mapgears.com>

Hi Jukka

yes, stupid copy-paste problem!  it was not a real "hyphen-minus" in my 
command line.

thank's a lot



Le 13-08-06 6:23 AM, Jukka Rahkonen a ?crit :
> Simon Mercier <smercier <at> mapgears.com> writes:
>
>>
>>      Hi list
>>      I have to upload data  (same problem with shapefiles and gml) in
>>      Oracle with ogr2ogr and I got an error when I specify any -lco
>>      option.  If I don't add -lco in command line, data is uploaded
>>      without error.  Anyone have an idea?
>>      thank's
> Hi,
>
> My idea is that perhaps the hyphen-minus character before "lco" in your
> command is actually some other character which looks similar. Therefore
> ogr2ogr does not recognise than now starts the 'layer creation option' but
> it believes that the whole string '?lco' means the layer name inside your
> GML file which is naturally not found. Similar things happen to me with
> hyphens and quotes if I copy-paste commands from web pages or Word or
> OpenOffice documents. This may feel stupid, but try what happens if you
> rewrite your command as it is from the keyboard.
>
> Regards,
>
> -Jukka Rahkonen-
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
simon mercier
co-fondateur solutions mapgears
2383 che ste-Foy bur 202 qu?bec, qc
canada G1V1T1

t_418_476_7139#101
m_418_559_7139
simonmercier.net / mapgears.com


From Michael.Smith at erdc.dren.mil  Wed Aug  7 15:15:12 2013
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Wed, 7 Aug 2013 22:15:12 +0000
Subject: [gdal-dev] FileGDB Driver coordinate system support
In-Reply-To: <CABCgRVGPWO6mQi84D5NAtm4pvdyjp-WcWJw+W5x_xdymtHicRA@mail.gmail.com>
Message-ID: <CE283EF0.89DE9%michael.smith@erdc.dren.mil>

The ESRI FileGDB api only supports certain projections, BC Albers (epsg:3005) is evidently not one of them. Its in ESRI API issue.

Mike

--
Michael Smith
US Army Corps
Remote Sensing GIS/Center

From: Hailey Eckstrand <haileyeckstrand at gmail.com<mailto:haileyeckstrand at gmail.com>>
Date: Wednesday, August 7, 2013 6:09 PM
To: "gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>" <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Subject: [gdal-dev] FileGDB Driver coordinate system support
Resent-From: Michael Smith <michael.smith at usace.army.mil<mailto:michael.smith at usace.army.mil>>

Hello,
I am trying to import a feature class from a file geodatabase (version 10 or greater) into PostGIS. After installing the FileGDB driver, I was able to successfully import a feature class which was in the EPSG 4326 spatial reference system.
ogr2ogr -f PostgreSQL PG:dbname=fgdb_test dir4326/test4326.gdb

However, I created another file geodatabase and reprojected the feature class to the BC Albers projection (EPSG: 3005) and then attempted to import the new fgdb again and it failed with no error. My attempts:
ogr2ogr -f PostgreSQL PG:dbname=fgdb_test dir3005/test3005.gdb
ogr2ogr -f PostgreSQL -s_srs EPSG:3005 PG:dbname=fgdb_test dir3005/test3005.gdb
ogr2ogr -f PostgreSQL -t_srs EPSG:3005 PG:dbname=fgdb_test dir3005/test3005.gdb

All failed with no errors. I am not trying to transform while importing.. I would just like to import a feature class in a projected coordinate system.

I am testing using Ubuntu 12.04
GDAL 1.9.2
FileGDB_API_1_3-64

Also, here is the output from ogrinfo:
$ogrinfo dir4326/test4326.gdb/
INFO: Open of `dir4326/test4326.gdb/'
      using driver `FileGDB' successful.
1: upcheak_landapp4326 (3D Multi Polygon)


$ogrinfo -al dir3005/test3005.gdb/
INFO: Open of `dir3005/test3005.gdb/'
      using driver `FileGDB' successful.

Thank you,
Hailey

Links to the 2 zip files of my 2 test geodatabases:
http://filebin.ca/qjmBMOaH0cR/dir4326.zip
http://filebin.ca/qjmPiqEAsJ6/dir3005.zip
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130807/87e094fc/attachment.html>

From sault.don at gmail.com  Wed Aug  7 20:02:42 2013
From: sault.don at gmail.com (Saulteau Don)
Date: Wed, 7 Aug 2013 21:02:42 -0600
Subject: [gdal-dev] FileGDB Driver coordinate system support
In-Reply-To: <CE283EF0.89DE9%michael.smith@erdc.dren.mil>
References: <CABCgRVGPWO6mQi84D5NAtm4pvdyjp-WcWJw+W5x_xdymtHicRA@mail.gmail.com>
	<CE283EF0.89DE9%michael.smith@erdc.dren.mil>
Message-ID: <CAJo0jfMghooqiiD-ctiuVxdTnzctX_+zuGf-gEoA70Z=+9eLtQ@mail.gmail.com>

I've imported data from a FileGDB to PostGIS when it was stored using EPSG
3005 so it definitely works and is supported by the FileGDB API.

I tested your data and got the same result on the test3005.gdb, no layers
in the output - the file GDB may be corrupt because QGIS won't even open it
and complains about it being an unrecognised data source or it's just
empty...

So I checked out your test4326.gdb and that works and so did the output
file I was able to reproject using:

ogr2ogr -f "FileGDB" new3005.gdb -s_srs EPSG:4326 -t_srs EPSG:3005
dir4326/test4326.gdb upcheak_landapp4326

Notice how at the very end I've told it what layer in the FileGDB to look
for when re-projecting and not just the input FileGDB. Maybe you were just
missing the input layer? But the file you get from running that command
should work for importing to postgis.


Donovan


On Wed, Aug 7, 2013 at 4:15 PM, Smith, Michael ERDC-RDE-CRREL-NH <
Michael.Smith at erdc.dren.mil> wrote:

>  The ESRI FileGDB api only supports certain projections, BC Albers
> (epsg:3005) is evidently not one of them. Its in ESRI API issue.
>
>  Mike
>
>   --
> Michael Smith
>  US Army Corps
> Remote Sensing GIS/Center
>
>   From: Hailey Eckstrand <haileyeckstrand at gmail.com>
> Date: Wednesday, August 7, 2013 6:09 PM
> To: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
> Subject: [gdal-dev] FileGDB Driver coordinate system support
> Resent-From: Michael Smith <michael.smith at usace.army.mil>
>
>    Hello,
> I am trying to import a feature class from a file geodatabase (version 10
> or greater) into PostGIS. After installing the FileGDB driver, I was able
> to successfully import a feature class which was in the EPSG 4326 spatial
> reference system.
> ogr2ogr -f PostgreSQL PG:dbname=fgdb_test dir4326/test4326.gdb
>
>  However, I created another file geodatabase and reprojected the feature
> class to the BC Albers projection (EPSG: 3005) and then attempted to import
> the new fgdb again and it failed with no error. My attempts:
> ogr2ogr -f PostgreSQL PG:dbname=fgdb_test dir3005/test3005.gdb
>  ogr2ogr -f PostgreSQL -s_srs EPSG:3005 PG:dbname=fgdb_test
> dir3005/test3005.gdb
>  ogr2ogr -f PostgreSQL -t_srs EPSG:3005 PG:dbname=fgdb_test
> dir3005/test3005.gdb
>
>  All failed with no errors. I am not trying to transform while
> importing.. I would just like to import a feature class in a projected
> coordinate system.
>
>  I am testing using Ubuntu 12.04
> GDAL 1.9.2
> FileGDB_API_1_3-64
>
>  Also, here is the output from ogrinfo:
>  $ogrinfo dir4326/test4326.gdb/
> INFO: Open of `dir4326/test4326.gdb/'
>       using driver `FileGDB' successful.
> 1: upcheak_landapp4326 (3D Multi Polygon)
>
>
>  $ogrinfo -al dir3005/test3005.gdb/
> INFO: Open of `dir3005/test3005.gdb/'
>       using driver `FileGDB' successful.
>
>  Thank you,
> Hailey
>
>  Links to the 2 zip files of my 2 test geodatabases:
>  http://filebin.ca/qjmBMOaH0cR/dir4326.zip
> http://filebin.ca/qjmPiqEAsJ6/dir3005.zip
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130807/16bfd3eb/attachment-0001.html>

From jukka.rahkonen at mmmtike.fi  Wed Aug  7 23:01:52 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 8 Aug 2013 06:01:52 +0000 (UTC)
Subject: [gdal-dev] Error Oracle -lco options
References: <51FFFB44.6070703@mapgears.com>
	<loom.20130806T120851-409@post.gmane.org>
	<5202C5F0.70206@mapgears.com>
Message-ID: <loom.20130808T075413-925@post.gmane.org>

Simon Mercier <smercier <at> mapgears.com> writes:

> 
> Hi Jukka
> 
> yes, stupid copy-paste problem!  it was not a real "hyphen-minus" in my 
> command line.
> 
> thank's a lot

Great that my guess was right. It took me pretty long to discover that what
looks like " in the command line may be something else so I remember it now.

If you think that we have far too many projections, read about dashes and
hyphens 
http://www.cs.tut.fi/~jkorpela/dashes.html

-Jukka Rahkonen-





From info at spatially-oriented.com  Thu Aug  8 00:51:32 2013
From: info at spatially-oriented.com (Casper Span)
Date: Thu, 8 Aug 2013 09:51:32 +0200
Subject: [gdal-dev] Exporting gml3 with OGR for .NET?
Message-ID: <CADcO7=kCebCryWtoycaArzgZRePJhLMMcbwWY_L-+WAN_y1rug@mail.gmail.com>

Hi list,

I'm trying to get some piece of code working with the csharp package of
gdal. (NuGet GDAL / GDAL.Natve).

Basically, I need to port a geometry to GML3.1.1. According to the
documentation, all I need to do is add an option "FORMAT=GML3", so I tried
that:

using (OSGeo.OGR.Geometry geom = OSGeo.OGR.Ogr.CreateGeometryFromWkt(ref
wkt, null))
{
    GmlString = geom.ExportToGML(new string[] { "FORMAT=GML3" });
}

But it will still return a GML2 (=default when not using any options) text.
It really doesn't matter what I pass as an option, it will always just
return a GML2 string.

Anybody tried this before?

regards,
Casper


-- 

Casper Span
T: @Span_Droid <https://twitter.com/#%21/Span_Droid>
W: http://www.spatially-oriented.com
M: info at spatially-oriented.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130808/417a5ebc/attachment.html>

From l.hilger at ku.de  Thu Aug  8 00:55:19 2013
From: l.hilger at ku.de (ludwig.hilger)
Date: Thu, 8 Aug 2013 00:55:19 -0700 (PDT)
Subject: [gdal-dev] gdalwarp produces all black output
In-Reply-To: <50B6F0F7.5050700@stripfamily.net>
References: <1354161743633-5019465.post@n6.nabble.com>
	<50B6F0F7.5050700@stripfamily.net>
Message-ID: <1375948519230-5071423.post@n6.nabble.com>

Hello everybody, 

I am also a newbie and seem to have a similar problem, but cannot get it
solved. I am trying to reproject the following file:
http://www.altmuehlnet.de/~hilger/Test_Smooth_0208_4258.tif
I am using the following line: 
gdalwarp -et 0 -r bilinear -s_srs EPSG:4258 -t_srs EPSG:25832
Test_Smooth_0208_4258.tif Test_Smooth_0208_4258_25832.tif 
The input image is of data type "byte" and has values from 0 to 255. The
Output image has values all 0, so this seems to be some other problem? 

Thank you, any help is very much appreciated, 

Ludwig


>>>gdalinfo -mm shows your input data file has all it's values in the range
518 to 2396. When converted to a 16bit tif, these all fall in a range
that appears black on your screen. You need to rescale the data to fill
the 16bit range. This is easily done with gdal_translate, which is
probably what you want to use anyway, since you're not changing the
projection, only the data format.

gdal_translate -ot Int16 -scale 518 2396 0 32767 n29.dt1 mosaic.tif <<<



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdalwarp-produces-all-black-output-tp5019465p5071423.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From Ulrich.Leopold at Tudor.lu  Thu Aug  8 07:37:07 2013
From: Ulrich.Leopold at Tudor.lu (Ulrich Leopold)
Date: Thu, 08 Aug 2013 16:37:07 +0200
Subject: [gdal-dev] gdal 1.10.0 1.9.2 segmentation faults for WCS requests
Message-ID: <5203AD13.1010409@Tudor.lu>

Dear list,

when using gdal version 1.10.0 and 1.9.2 on ubuntu 12.04 and ubuntu 
13.04 we get a segmentation fault for any WCS requests (see below for an 
example). Using wget the request works and we can save the image. 
gdalinfo on the saved image works correctly, just not on the request 
directly.

Any idea why the segmentation fault when using the WCS request directly?


Best, Ulrich


uleopold at CRTE-ULE-14896:~$ gdb --args gdalinfo 
"http://services.iguess.tudor.lu/cgi-bin/mapserv?map=/srv/mapserv/MapFiles/RO_localOWS_test.map&SERVICE=WCS&FORMAT=image/img&CRS=EPSG:28992&BBOX=91979.0,436326.0,92617.0,437659.5&RESX=0.5&RESY=0.5&VERSION=1.0.0&REQUEST=getCoverage&coverage=ro_dsm_mini"
GNU gdb (GDB) 7.5.91.20130417-cvs-ubuntu
Copyright (C) 2013 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later 
<http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /usr/bin/gdalinfo...(no debugging symbols 
found)...done.

(gdb) r
Starting program: /usr/bin/gdalinfo 
http://services.iguess.tudor.lu/cgi-bin/mapserv\?map=/srv/mapserv/MapFiles/RO_localOWS_test.map\&SERVICE=WCS\&FORMAT=image/img\&CRS=EPSG:28992\&BBOX=91979.0,436326.0,92617.0,437659.5\&RESX=0.5\&RESY=0.5\&VERSION=1.0.0\&REQUEST=getCoverage\&coverage=ro_dsm_mini
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".

Program received signal SIGSEGV, Segmentation fault.
0x00007ffff27d4cd1 in ?? () from /usr/lib/x86_64-linux-gnu/libdapclient.so.3

(gdb) bt
#0  0x00007ffff27d4cd1 in ?? () from 
/usr/lib/x86_64-linux-gnu/libdapclient.so.3
#1  0x00007ffff27e37b3 in std::vector<std::string, 
std::allocator<std::string> >::~vector() () from 
/usr/lib/x86_64-linux-gnu/libdapclient.so.3
#2  0x00007ffff27e0bbf in 
libdap::HTTPConnect::plain_fetch_url(std::string const&) () from 
/usr/lib/x86_64-linux-gnu/libdapclient.so.3
#3  0x00007ffff27e16c0 in libdap::HTTPConnect::fetch_url(std::string 
const&) () from /usr/lib/x86_64-linux-gnu/libdapclient.so.3
#4  0x00007ffff27da48b in libdap::Connect::request_version() () from 
/usr/lib/x86_64-linux-gnu/libdapclient.so.3
#5  0x00007ffff732dfc5 in ?? () from /usr/lib/libgdal.so.1
#6  0x00007ffff7333da9 in ?? () from /usr/lib/libgdal.so.1
#7  0x00007ffff75789e9 in ?? () from /usr/lib/libgdal.so.1
#8  0x00007ffff7578c46 in ?? () from /usr/lib/libgdal.so.1
#9  0x0000000000402c8f in ?? ()
#10 0x00007ffff65dfea5 in __libc_start_main () from 
/lib/x86_64-linux-gnu/libc.so.6
#11 0x00000000004044f5 in ?? ()

-- 
Ulrich Leopold

Senior Researcher in Geocomputation
Resource Centre for Environmental Technologies
Public Research Centre Henri Tudor
6A, avenue des Hauts-Fourneaux
L-4362 Esch-sur-Alzette
Luxembourg

tel: +352 425991 4618
fax: +352 425991 555
mobile: +352 691 304813
email: ulrich.leopold at tudor.lu
http://www.tudor.lu


From Ulrich.Leopold at Tudor.lu  Thu Aug  8 08:38:31 2013
From: Ulrich.Leopold at Tudor.lu (Ulrich Leopold)
Date: Thu, 08 Aug 2013 17:38:31 +0200
Subject: [gdal-dev] gdal 1.10.0 1.9.2 segmentation faults for WCS
	requests
In-Reply-To: <CAMpzTZj09eZLrAaOSEF4rhmV16tLe1_m8MWJsySOiYDaPs=1nw@mail.gmail.com>
References: <5203AD13.1010409@Tudor.lu>
	<CAMpzTZj09eZLrAaOSEF4rhmV16tLe1_m8MWJsySOiYDaPs=1nw@mail.gmail.com>
Message-ID: <5203BB77.3070908@Tudor.lu>

Hi Joni,

thanks very much.

The question would be which ones need to be installed. Could you send 
your list of packages installed? Maybe then I could compare.

Cheers, Ulrich


On 08/08/13 17:31, Joni-Pekka Kurronen wrote:
> hi,
>
>
> i had similar problems, those was from due depencyes can mix older and 
> newer
>  libraryes needed and both might be / must be installed,...
>
>
>
> joni
>
>
> 2013/8/8 Ulrich Leopold <Ulrich.Leopold at tudor.lu 
> <mailto:Ulrich.Leopold at tudor.lu>>
>
>     Dear list,
>
>     when using gdal version 1.10.0 and 1.9.2 on ubuntu 12.04 and
>     ubuntu 13.04 we get a segmentation fault for any WCS requests (see
>     below for an example). Using wget the request works and we can
>     save the image. gdalinfo on the saved image works correctly, just
>     not on the request directly.
>
>     Any idea why the segmentation fault when using the WCS request
>     directly?
>
>
>     Best, Ulrich
>
>
>     uleopold at CRTE-ULE-14896:~$ gdb --args gdalinfo
>     "http://services.iguess.tudor.lu/cgi-bin/mapserv?map=/srv/mapserv/MapFiles/RO_localOWS_test.map&SERVICE=WCS&FORMAT=image/img&CRS=EPSG:28992&BBOX=91979.0,436326.0,92617.0,437659.5&RESX=0.5&RESY=0.5&VERSION=1.0.0&REQUEST=getCoverage&coverage=ro_dsm_mini"
>     GNU gdb (GDB) 7.5.91.20130417-cvs-ubuntu
>     Copyright (C) 2013 Free Software Foundation, Inc.
>     License GPLv3+: GNU GPL version 3 or later
>     <http://gnu.org/licenses/gpl.html>
>     This is free software: you are free to change and redistribute it.
>     There is NO WARRANTY, to the extent permitted by law.  Type "show
>     copying"
>     and "show warranty" for details.
>     This GDB was configured as "x86_64-linux-gnu".
>     For bug reporting instructions, please see:
>     <http://www.gnu.org/software/gdb/bugs/>...
>     Reading symbols from /usr/bin/gdalinfo...(no debugging symbols
>     found)...done.
>
>     (gdb) r
>     Starting program: /usr/bin/gdalinfo
>     http://services.iguess.tudor.lu/cgi-bin/mapserv\?map=/srv/mapserv/MapFiles/RO_localOWS_test.map\&SERVICE=WCS\&FORMAT=image/img\&CRS=EPSG:28992\&BBOX=91979.0,436326.0,92617.0,437659.5\&RESX=0.5\&RESY=0.5\&VERSION=1.0.0\&REQUEST=getCoverage\&coverage=ro_dsm_mini
>     <http://services.iguess.tudor.lu/cgi-bin/mapserv%5C?map=/srv/mapserv/MapFiles/RO_localOWS_test.map%5C&SERVICE=WCS%5C&FORMAT=image/img%5C&CRS=EPSG:28992%5C&BBOX=91979.0,436326.0,92617.0,437659.5%5C&RESX=0.5%5C&RESY=0.5%5C&VERSION=1.0.0%5C&REQUEST=getCoverage%5C&coverage=ro_dsm_mini>
>     [Thread debugging using libthread_db enabled]
>     Using host libthread_db library
>     "/lib/x86_64-linux-gnu/libthread_db.so.1".
>
>     Program received signal SIGSEGV, Segmentation fault.
>     0x00007ffff27d4cd1 in ?? () from
>     /usr/lib/x86_64-linux-gnu/libdapclient.so.3
>
>     (gdb) bt
>     #0  0x00007ffff27d4cd1 in ?? () from
>     /usr/lib/x86_64-linux-gnu/libdapclient.so.3
>     #1  0x00007ffff27e37b3 in std::vector<std::string,
>     std::allocator<std::string> >::~vector() () from
>     /usr/lib/x86_64-linux-gnu/libdapclient.so.3
>     #2  0x00007ffff27e0bbf in
>     libdap::HTTPConnect::plain_fetch_url(std::string const&) () from
>     /usr/lib/x86_64-linux-gnu/libdapclient.so.3
>     #3  0x00007ffff27e16c0 in
>     libdap::HTTPConnect::fetch_url(std::string const&) () from
>     /usr/lib/x86_64-linux-gnu/libdapclient.so.3
>     #4  0x00007ffff27da48b in libdap::Connect::request_version() ()
>     from /usr/lib/x86_64-linux-gnu/libdapclient.so.3
>     #5  0x00007ffff732dfc5 in ?? () from /usr/lib/libgdal.so.1
>     #6  0x00007ffff7333da9 in ?? () from /usr/lib/libgdal.so.1
>     #7  0x00007ffff75789e9 in ?? () from /usr/lib/libgdal.so.1
>     #8  0x00007ffff7578c46 in ?? () from /usr/lib/libgdal.so.1
>     #9  0x0000000000402c8f in ?? ()
>     #10 0x00007ffff65dfea5 in __libc_start_main () from
>     /lib/x86_64-linux-gnu/libc.so.6
>     #11 0x00000000004044f5 in ?? ()
>
>     -- 
>     Ulrich Leopold
>
>     Senior Researcher in Geocomputation
>     Resource Centre for Environmental Technologies
>     Public Research Centre Henri Tudor
>     6A, avenue des Hauts-Fourneaux
>     L-4362 Esch-sur-Alzette
>     Luxembourg
>
>     tel: +352 425991 4618 <tel:%2B352%20425991%204618>
>     fax: +352 425991 555 <tel:%2B352%20425991%20555>
>     mobile: +352 691 304813 <tel:%2B352%20691%20304813>
>     email: ulrich.leopold at tudor.lu <mailto:ulrich.leopold at tudor.lu>
>     http://www.tudor.lu
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> Joni-Pekka Kurronen
> Joni.Kurronen at gmail.com <mailto:Joni.Kurronen at gmail.com>
> gsm. +358 50 521 2279

-- 
Ulrich Leopold

Senior Researcher in Geocomputation
Resource Centre for Environmental Technologies
Public Research Centre Henri Tudor
6A, avenue des Hauts-Fourneaux
L-4362 Esch-sur-Alzette
Luxembourg

tel: +352 425991 4618
fax: +352 425991 555
mobile: +352 691 304813
email: ulrich.leopold at tudor.lu
http://www.tudor.lu

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130808/8b5c7ba8/attachment-0001.html>

From haileyeckstrand at gmail.com  Thu Aug  8 09:21:51 2013
From: haileyeckstrand at gmail.com (Hailey Eckstrand)
Date: Thu, 8 Aug 2013 09:21:51 -0700
Subject: [gdal-dev] FileGDB Driver coordinate system support
In-Reply-To: <CAJo0jfMghooqiiD-ctiuVxdTnzctX_+zuGf-gEoA70Z=+9eLtQ@mail.gmail.com>
References: <CABCgRVGPWO6mQi84D5NAtm4pvdyjp-WcWJw+W5x_xdymtHicRA@mail.gmail.com>
	<CE283EF0.89DE9%michael.smith@erdc.dren.mil>
	<CAJo0jfMghooqiiD-ctiuVxdTnzctX_+zuGf-gEoA70Z=+9eLtQ@mail.gmail.com>
Message-ID: <CABCgRVHSaxwDfh812rvkZTyM+kAjGxHsozaX-O-kDCwSPx-6Wg@mail.gmail.com>

Thank you Michael and Donavan for pointing me in the correct direction.
I've found out why my 3005 file GDB would not work.
I had previously downloaded data from the BC province and so when I
transformed the data from 4326 to 3005, I just used the projection in my
Favorites, which was the province's BC Albers projection. It turns out that
the province's BC Albers has a different projection name that ESRI's
definition of BC Albers.  The projection parameters are identical, but the
province's projection name is PCS_Albers, whereas ESRI's accepted BC Albers
is called NAD 1983 CSRS BC Environmental Albers (Projected Coordinate
System > National Grids > Canada > NAD 1983 CSRS BC Environmental Albers).
Once I redefined the projection to be that of the accepted ESRI's BC
Albers, the geodatabase imported successfully.
Thank you for your help,
Hailey


On Wed, Aug 7, 2013 at 8:02 PM, Saulteau Don <sault.don at gmail.com> wrote:

> I've imported data from a FileGDB to PostGIS when it was stored using EPSG
> 3005 so it definitely works and is supported by the FileGDB API.
>
> I tested your data and got the same result on the test3005.gdb, no layers
> in the output - the file GDB may be corrupt because QGIS won't even open it
> and complains about it being an unrecognised data source or it's just
> empty...
>
> So I checked out your test4326.gdb and that works and so did the output
> file I was able to reproject using:
>
> ogr2ogr -f "FileGDB" new3005.gdb -s_srs EPSG:4326 -t_srs EPSG:3005
> dir4326/test4326.gdb upcheak_landapp4326
>
> Notice how at the very end I've told it what layer in the FileGDB to look
> for when re-projecting and not just the input FileGDB. Maybe you were just
> missing the input layer? But the file you get from running that command
> should work for importing to postgis.
>
>
> Donovan
>
>
> On Wed, Aug 7, 2013 at 4:15 PM, Smith, Michael ERDC-RDE-CRREL-NH <
> Michael.Smith at erdc.dren.mil> wrote:
>
>>  The ESRI FileGDB api only supports certain projections, BC Albers
>> (epsg:3005) is evidently not one of them. Its in ESRI API issue.
>>
>>  Mike
>>
>>   --
>> Michael Smith
>>  US Army Corps
>> Remote Sensing GIS/Center
>>
>>   From: Hailey Eckstrand <haileyeckstrand at gmail.com>
>> Date: Wednesday, August 7, 2013 6:09 PM
>> To: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
>> Subject: [gdal-dev] FileGDB Driver coordinate system support
>> Resent-From: Michael Smith <michael.smith at usace.army.mil>
>>
>>    Hello,
>> I am trying to import a feature class from a file geodatabase (version 10
>> or greater) into PostGIS. After installing the FileGDB driver, I was able
>> to successfully import a feature class which was in the EPSG 4326 spatial
>> reference system.
>> ogr2ogr -f PostgreSQL PG:dbname=fgdb_test dir4326/test4326.gdb
>>
>>  However, I created another file geodatabase and reprojected the feature
>> class to the BC Albers projection (EPSG: 3005) and then attempted to import
>> the new fgdb again and it failed with no error. My attempts:
>> ogr2ogr -f PostgreSQL PG:dbname=fgdb_test dir3005/test3005.gdb
>>  ogr2ogr -f PostgreSQL -s_srs EPSG:3005 PG:dbname=fgdb_test
>> dir3005/test3005.gdb
>>  ogr2ogr -f PostgreSQL -t_srs EPSG:3005 PG:dbname=fgdb_test
>> dir3005/test3005.gdb
>>
>>  All failed with no errors. I am not trying to transform while
>> importing.. I would just like to import a feature class in a projected
>> coordinate system.
>>
>>  I am testing using Ubuntu 12.04
>> GDAL 1.9.2
>> FileGDB_API_1_3-64
>>
>>  Also, here is the output from ogrinfo:
>>  $ogrinfo dir4326/test4326.gdb/
>> INFO: Open of `dir4326/test4326.gdb/'
>>       using driver `FileGDB' successful.
>> 1: upcheak_landapp4326 (3D Multi Polygon)
>>
>>
>>  $ogrinfo -al dir3005/test3005.gdb/
>> INFO: Open of `dir3005/test3005.gdb/'
>>       using driver `FileGDB' successful.
>>
>>  Thank you,
>> Hailey
>>
>>  Links to the 2 zip files of my 2 test geodatabases:
>>  http://filebin.ca/qjmBMOaH0cR/dir4326.zip
>> http://filebin.ca/qjmPiqEAsJ6/dir3005.zip
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130808/4b4bb2c1/attachment.html>

From peifer at gmx.eu  Thu Aug  8 10:44:04 2013
From: peifer at gmx.eu (Hermann Peifer)
Date: Thu, 08 Aug 2013 19:44:04 +0200
Subject: [gdal-dev] gdalwarp produces all black output
In-Reply-To: <1375948519230-5071423.post@n6.nabble.com>
References: <1354161743633-5019465.post@n6.nabble.com>
	<50B6F0F7.5050700@stripfamily.net>
	<1375948519230-5071423.post@n6.nabble.com>
Message-ID: <5203D8E4.9040203@gmx.eu>

On 2013-08-08 9:55, ludwig.hilger wrote:
> Hello everybody,
>
> I am also a newbie and seem to have a similar problem, but cannot get it
> solved. I am trying to reproject the following file:
> http://www.altmuehlnet.de/~hilger/Test_Smooth_0208_4258.tif
> I am using the following line:
> gdalwarp -et 0 -r bilinear -s_srs EPSG:4258 -t_srs EPSG:25832
> Test_Smooth_0208_4258.tif Test_Smooth_0208_4258_25832.tif

I downloaded your test file and noted that it has 10000x10000 pixel and 
a real world extent of around 7x7 metres. So 1 pixel in your GeoTIFF 
represents less than 1x1 mm. I can only blindly assume that some 
rounding effects related to the small pixel size lead to the problem you 
observed. I noted the same problem in my testing (I am using the MacPort 
of GDAL 1.10, on my MacBook).

I re-defined the extent of your file to 1x1 degree and was able to warp 
the resulting file without any problem:

$ gdal_translate Test_Smooth_0208_4258.tif out_1x1.tif -a_ullr 10 47 11 46

$ gdalwarp out_1x1.tif out_25832.tif -t_srs epsg:25832 -et 0 -rb

Maybe someone from the GDAL devs has an explanation for this behaviour.

Hermann

From even.rouault at mines-paris.org  Thu Aug  8 13:18:09 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 8 Aug 2013 22:18:09 +0200
Subject: [gdal-dev] gdalwarp produces all black output
In-Reply-To: <5203D8E4.9040203@gmx.eu>
References: <1354161743633-5019465.post@n6.nabble.com>
	<1375948519230-5071423.post@n6.nabble.com>
	<5203D8E4.9040203@gmx.eu>
Message-ID: <201308082218.09709.even.rouault@mines-paris.org>

Le jeudi 08 ao?t 2013 19:44:04, Hermann Peifer a ?crit :
> On 2013-08-08 9:55, ludwig.hilger wrote:
> > Hello everybody,
> > 
> > I am also a newbie and seem to have a similar problem, but cannot get it
> > solved. I am trying to reproject the following file:
> > http://www.altmuehlnet.de/~hilger/Test_Smooth_0208_4258.tif
> > I am using the following line:
> > gdalwarp -et 0 -r bilinear -s_srs EPSG:4258 -t_srs EPSG:25832
> > Test_Smooth_0208_4258.tif Test_Smooth_0208_4258_25832.tif
> 
> I downloaded your test file and noted that it has 10000x10000 pixel and
> a real world extent of around 7x7 metres. So 1 pixel in your GeoTIFF
> represents less than 1x1 mm. I can only blindly assume that some
> rounding effects related to the small pixel size lead to the problem you
> observed. I noted the same problem in my testing (I am using the MacPort
> of GDAL 1.10, on my MacBook).
> 
> I re-defined the extent of your file to 1x1 degree and was able to warp
> the resulting file without any problem:
> 
> $ gdal_translate Test_Smooth_0208_4258.tif out_1x1.tif -a_ullr 10 47 11 46
> 
> $ gdalwarp out_1x1.tif out_25832.tif -t_srs epsg:25832 -et 0 -rb
> 
> Maybe someone from the GDAL devs has an explanation for this behaviour.

Herman,

you're right. The issue was due to the input pixel size being very small. I've 
fixed that in ticket http://trac.osgeo.org/gdal/ticket/5190

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From taibc_coltech at yahoo.com  Thu Aug  8 17:45:45 2013
From: taibc_coltech at yahoo.com (taibc)
Date: Thu, 8 Aug 2013 17:45:45 -0700 (PDT)
Subject: [gdal-dev] How to get the line style scale factor of Line (using
	DGNLib) ?
Message-ID: <1376009145545-5071657.post@n6.nabble.com>

Hi everyone,

I am trying to read custom lines from the dgn file by using DGNLib
(DGNElemMultiPoint,...).

But I don't know how know or get the line style scale factor of Line ?

Please see this link for more detail about scale factor 
http://communities.bentley.com/products/microstation/w/microstation__wiki/setting-linestyle-scale-in-microstation-v8-cs.aspx
<http://communities.bentley.com/products/microstation/w/microstation__wiki/setting-linestyle-scale-in-microstation-v8-cs.aspx>  

Thank you very much !



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/How-to-get-the-line-style-scale-factor-of-Line-using-DGNLib-tp5071657.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From lhomme.xavier at gmail.com  Fri Aug  9 00:55:31 2013
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Fri, 9 Aug 2013 09:55:31 +0200
Subject: [gdal-dev] FGDB API : field size
Message-ID: <CACqzBMyjAXhjB1VMpe7RDQpdV=vSKd3Rg=NRe88-D5NsyRpAcQ@mail.gmail.com>

Hi
   I wonder why for an esriFieldTypeInterger the size is set to 12 (in the
GDBFieldTypeToWidthPrecision fonction).
In the xml sample files provided by esri all  esriFieldTypeIntergerhas a
length of 4.
(and 8 for double) ...

best regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130809/9823b13b/attachment.html>

From peifer at gmx.eu  Fri Aug  9 00:59:17 2013
From: peifer at gmx.eu (peifer)
Date: Fri, 9 Aug 2013 00:59:17 -0700 (PDT)
Subject: [gdal-dev] gdalwarp produces all black output
In-Reply-To: <201308082218.09709.even.rouault@mines-paris.org>
References: <1354161743633-5019465.post@n6.nabble.com>
	<50B6F0F7.5050700@stripfamily.net>
	<1375948519230-5071423.post@n6.nabble.com>
	<5203D8E4.9040203@gmx.eu>
	<201308082218.09709.even.rouault@mines-paris.org>
Message-ID: <1376035157577-5071685.post@n6.nabble.com>

Even Rouault wrote
> Le jeudi 08 ao?t 2013 19:44:04, Hermann Peifer a ?crit :
>> On 2013-08-08 9:55, ludwig.hilger wrote:
>> > Hello everybody,
>> > 
>> > I am also a newbie and seem to have a similar problem, but cannot get
>> it
>> > solved. I am trying to reproject the following file:
>> > http://www.altmuehlnet.de/~hilger/Test_Smooth_0208_4258.tif
>> > I am using the following line:
>> > gdalwarp -et 0 -r bilinear -s_srs EPSG:4258 -t_srs EPSG:25832
>> > Test_Smooth_0208_4258.tif Test_Smooth_0208_4258_25832.tif
>> 
>> I downloaded your test file and noted that it has 10000x10000 pixel and
>> a real world extent of around 7x7 metres. So 1 pixel in your GeoTIFF
>> represents less than 1x1 mm. I can only blindly assume that some
>> rounding effects related to the small pixel size lead to the problem you
>> observed. I noted the same problem in my testing (I am using the MacPort
>> of GDAL 1.10, on my MacBook).
>> 
>> I re-defined the extent of your file to 1x1 degree and was able to warp
>> the resulting file without any problem:
>> 
>> $ gdal_translate Test_Smooth_0208_4258.tif out_1x1.tif -a_ullr 10 47 11
>> 46
>> 
>> $ gdalwarp out_1x1.tif out_25832.tif -t_srs epsg:25832 -et 0 -rb
>> 
>> Maybe someone from the GDAL devs has an explanation for this behaviour.
> 
> Herman,
> 
> you're right. The issue was due to the input pixel size being very small.
> I've 
> fixed that in ticket http://trac.osgeo.org/gdal/ticket/5190

I should have seen in the DEBUG output that before your fix, always the same
source pixel (Src=0,0,1x1 - which happened to have the value 0 in all bands)
was taken and warped into the various destination windows. Now it works as
expected.

Thanks, Hermann




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdalwarp-produces-all-black-output-tp5019465p5071685.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Fri Aug  9 11:50:30 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 9 Aug 2013 20:50:30 +0200
Subject: [gdal-dev] FGDB API : field size
In-Reply-To: <CACqzBMyjAXhjB1VMpe7RDQpdV=vSKd3Rg=NRe88-D5NsyRpAcQ@mail.gmail.com>
References: <CACqzBMyjAXhjB1VMpe7RDQpdV=vSKd3Rg=NRe88-D5NsyRpAcQ@mail.gmail.com>
Message-ID: <201308092050.30615.even.rouault@mines-paris.org>

Le vendredi 09 ao?t 2013 09:55:31, xavier lhomme a ?crit :
> Hi
>    I wonder why for an esriFieldTypeInterger the size is set to 12 (in the
> GDBFieldTypeToWidthPrecision fonction).
> In the xml sample files provided by esri all  esriFieldTypeIntergerhas a
> length of 4.
> (and 8 for double) ...

Xavier,

Yes, this doesn't seem consistant with the samples, nor with the spec 
(FileGDB_API/xmlResources/FileGDBAPI.xsd).

I've created http://trac.osgeo.org/gdal/ticket/5192 and pushed a fix in trunk. 
I'd appreciate if people could generate FileGDB databases with OGR (trunk 
after r26283) with various datatypes and check that they can be used OK in 
ESRI products.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From warmerdam at pobox.com  Fri Aug  9 14:41:47 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 9 Aug 2013 14:41:47 -0700
Subject: [gdal-dev] Motion: Commit Access for Kurt Schwehr
Message-ID: <CA+YzLBcA-AwoD8FeLt4C-erz_ybFAdTDOqBzdA2y_58_6i+OYA@mail.gmail.com>

Motion: Commit Access to GDAL for Kurt Schwehr

Kurt has been contributing some patches around maritime formats, and other
aspects of GDAL.  He is also taking over my GDAL related responsibilities
at Google, and I feel it would be helpful for him to have commit access to
upstream various kinds of fixes smoothly.  I've personally worked with him
on GDAL issues for several months now.

Kurt, could you confirm to the list that you have read and will try to
comply with:

  http://trac.osgeo.org/gdal/wiki/rfc3_commiters

I'll start voting with:

+1 Frank

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130809/e916f289/attachment.html>

From even.rouault at mines-paris.org  Fri Aug  9 14:47:18 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 9 Aug 2013 23:47:18 +0200
Subject: [gdal-dev] Motion: Commit Access for Kurt Schwehr
In-Reply-To: <CA+YzLBcA-AwoD8FeLt4C-erz_ybFAdTDOqBzdA2y_58_6i+OYA@mail.gmail.com>
References: <CA+YzLBcA-AwoD8FeLt4C-erz_ybFAdTDOqBzdA2y_58_6i+OYA@mail.gmail.com>
Message-ID: <201308092347.18942.even.rouault@mines-paris.org>

Le vendredi 09 ao?t 2013 23:41:47, Frank Warmerdam a ?crit :
> Motion: Commit Access to GDAL for Kurt Schwehr

+1

> 
> Kurt has been contributing some patches around maritime formats, and other
> aspects of GDAL.  He is also taking over my GDAL related responsibilities
> at Google, and I feel it would be helpful for him to have commit access to
> upstream various kinds of fixes smoothly.  I've personally worked with him
> on GDAL issues for several months now.
> 
> Kurt, could you confirm to the list that you have read and will try to
> comply with:
> 
>   http://trac.osgeo.org/gdal/wiki/rfc3_commiters
> 
> I'll start voting with:
> 
> +1 Frank
> 
> Best regards,

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From schwehr at gmail.com  Fri Aug  9 14:50:06 2013
From: schwehr at gmail.com (Kurt Schwehr)
Date: Fri, 9 Aug 2013 14:50:06 -0700
Subject: [gdal-dev] Motion: Commit Access for Kurt Schwehr
In-Reply-To: <CA+YzLBcA-AwoD8FeLt4C-erz_ybFAdTDOqBzdA2y_58_6i+OYA@mail.gmail.com>
References: <CA+YzLBcA-AwoD8FeLt4C-erz_ybFAdTDOqBzdA2y_58_6i+OYA@mail.gmail.com>
Message-ID: <CACmBxyvmh76Y9F0V=S3BN6Z96PcQ88rvj0CaXfm+uR20Zc912w@mail.gmail.com>

I have read and will comply with
http://trac.osgeo.org/gdal/wiki/rfc3_commiters

-kurt

On Fri, Aug 9, 2013 at 2:41 PM, Frank Warmerdam <warmerdam at pobox.com> wrote:

> Motion: Commit Access to GDAL for Kurt Schwehr
>
> Kurt has been contributing some patches around maritime formats, and other
> aspects of GDAL.  He is also taking over my GDAL related responsibilities
> at Google, and I feel it would be helpful for him to have commit access to
> upstream various kinds of fixes smoothly.  I've personally worked with him
> on GDAL issues for several months now.
>
> Kurt, could you confirm to the list that you have read and will try to
> comply with:
>
>   http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start voting with:
>
> +1 Frank
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130809/0c13f8ee/attachment.html>

From szekerest at gmail.com  Sat Aug 10 01:34:30 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat, 10 Aug 2013 10:34:30 +0200
Subject: [gdal-dev] Motion: Commit Access for Kurt Schwehr
In-Reply-To: <CA+YzLBcA-AwoD8FeLt4C-erz_ybFAdTDOqBzdA2y_58_6i+OYA@mail.gmail.com>
References: <CA+YzLBcA-AwoD8FeLt4C-erz_ybFAdTDOqBzdA2y_58_6i+OYA@mail.gmail.com>
Message-ID: <CACALY+Tnz8O73iBo0sGTNgHBvka3ruPfaGVSys4xF5ysF4DDVA@mail.gmail.com>

+1

Tamas



2013/8/9 Frank Warmerdam <warmerdam at pobox.com>

> Motion: Commit Access to GDAL for Kurt Schwehr
>
> Kurt has been contributing some patches around maritime formats, and other
> aspects of GDAL.  He is also taking over my GDAL related responsibilities
> at Google, and I feel it would be helpful for him to have commit access to
> upstream various kinds of fixes smoothly.  I've personally worked with him
> on GDAL issues for several months now.
>
> Kurt, could you confirm to the list that you have read and will try to
> comply with:
>
>   http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start voting with:
>
> +1 Frank
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130810/e66e2bdd/attachment.html>

From even.rouault at mines-paris.org  Sun Aug 11 05:13:43 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 11 Aug 2013 14:13:43 +0200
Subject: [gdal-dev] Overflow in geojson values
In-Reply-To: <CE2014B4.89575%michael.smith@erdc.dren.mil>
References: <CE2014B4.89575%michael.smith@erdc.dren.mil>
Message-ID: <201308111413.44291.even.rouault@mines-paris.org>

Le jeudi 01 ao?t 2013 19:36:00, Smith, Michael ERDC-RDE-CRREL-NH a ?crit :
> I'm reading a geojson feed put out by the USGS
> (http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.geojson)
> but the time/updated values are overflowing. Are there any settings to
> allow the data to come across as bigint or strings?

Hi Michael,

I've just upgraded the internal libjson-c to json-c 0.11 and changed the OGR 
GeoJSON drivers to report 64bit integer values as strings.

GDAL can now also be configured (Unix build) to build against external libjson-
c ( >= 0.11 is required)

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From howard at hobu.co  Sun Aug 11 13:25:08 2013
From: howard at hobu.co (Howard Butler)
Date: Sun, 11 Aug 2013 15:25:08 -0500
Subject: [gdal-dev] Motion: Commit Access for Kurt Schwehr
In-Reply-To: <CACALY+Tnz8O73iBo0sGTNgHBvka3ruPfaGVSys4xF5ysF4DDVA@mail.gmail.com>
References: <CA+YzLBcA-AwoD8FeLt4C-erz_ybFAdTDOqBzdA2y_58_6i+OYA@mail.gmail.com>
	<CACALY+Tnz8O73iBo0sGTNgHBvka3ruPfaGVSys4xF5ysF4DDVA@mail.gmail.com>
Message-ID: <163624EB-796B-4D04-81E2-8CAE47FB29C1@hobu.co>

+1 Howard

On Aug 10, 2013, at 3:34 AM, Tamas Szekeres <szekerest at gmail.com> wrote:

> +1
>  
> Tamas
> 
> 
>  
> 2013/8/9 Frank Warmerdam <warmerdam at pobox.com>
> Motion: Commit Access to GDAL for Kurt Schwehr
> 
> Kurt has been contributing some patches around maritime formats, and other aspects of GDAL.  He is also taking over my GDAL related responsibilities at Google, and I feel it would be helpful for him to have commit access to upstream various kinds of fixes smoothly.  I've personally worked with him on GDAL issues for several months now.
> 
> Kurt, could you confirm to the list that you have read and will try to comply with:
> 
>   http://trac.osgeo.org/gdal/wiki/rfc3_commiters
> 
> I'll start voting with:
> 
> +1 Frank
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130811/05d8b04d/attachment.pgp>

From howard at hobu.co  Sun Aug 11 13:33:34 2013
From: howard at hobu.co (Howard Butler)
Date: Sun, 11 Aug 2013 15:33:34 -0500
Subject: [gdal-dev] Upgrade Python GDAL package in pypi
In-Reply-To: <CAFcNcQZWyvKWUajcFGqNpshq4kkAbeti6zKF+4X6Fk4Bw4fi4Q@mail.gmail.com>
References: <CAFcNcQZWyvKWUajcFGqNpshq4kkAbeti6zKF+4X6Fk4Bw4fi4Q@mail.gmail.com>
Message-ID: <5093E91F-4CE6-48BA-BF7D-9FB500324BAF@hobu.co>


On Aug 6, 2013, at 10:57 AM, Ricardo Filipe Soares Garcia da <ricardo.garcia.silva at gmail.com> wrote:

> Hello list
> 
> I have been using GDAL Python bindings inside a virtualenv on some ubuntu-server 12.04 machines to do geoprocessing tasks.
> 
> I have an automated script to setup GDAL from the ubuntugis repository and then use pip to get the Python bindings code (from pypi) and execute setup.py with the correct gdal paths and compile the bindings. It used to work nicely.
> 
> Unfortunately, now that GDAL 1.10 is out and the ubuntugis folks have upgraded their GDAL, I cannot do this anymore, because the pypi version of GDAL is still at 1.9.1.
> 
> I'd like to kindly request that the package available in the python package index be upgraded to version 1.10 too.
> 
> Thanks

Ricardo,

I have updated the PyPI package to 1.10. We should probably make this part of our regular packaging tasks, as it is very much a one-off thing that I do manually for releases at this time. If Even or any of the other GDAL devs have PyPI logins, please let me know, and I'll add you to the maintainer list so you can push new releases.

Howard

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130811/1bfd6125/attachment.pgp>

From even.rouault at mines-paris.org  Sun Aug 11 13:55:43 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 11 Aug 2013 22:55:43 +0200
Subject: [gdal-dev] Upgrade Python GDAL package in pypi
In-Reply-To: <5093E91F-4CE6-48BA-BF7D-9FB500324BAF@hobu.co>
References: <CAFcNcQZWyvKWUajcFGqNpshq4kkAbeti6zKF+4X6Fk4Bw4fi4Q@mail.gmail.com>
	<5093E91F-4CE6-48BA-BF7D-9FB500324BAF@hobu.co>
Message-ID: <201308112255.43857.even.rouault@mines-paris.org>

Le dimanche 11 ao?t 2013 22:33:34, Howard Butler a ?crit :
> On Aug 6, 2013, at 10:57 AM, Ricardo Filipe Soares Garcia da 
<ricardo.garcia.silva at gmail.com> wrote:
> > Hello list
> > 
> > I have been using GDAL Python bindings inside a virtualenv on some
> > ubuntu-server 12.04 machines to do geoprocessing tasks.
> > 
> > I have an automated script to setup GDAL from the ubuntugis repository
> > and then use pip to get the Python bindings code (from pypi) and execute
> > setup.py with the correct gdal paths and compile the bindings. It used
> > to work nicely.
> > 
> > Unfortunately, now that GDAL 1.10 is out and the ubuntugis folks have
> > upgraded their GDAL, I cannot do this anymore, because the pypi version
> > of GDAL is still at 1.9.1.
> > 
> > I'd like to kindly request that the package available in the python
> > package index be upgraded to version 1.10 too.
> > 
> > Thanks
> 
> Ricardo,
> 
> I have updated the PyPI package to 1.10. We should probably make this part
> of our regular packaging tasks, as it is very much a one-off thing that I
> do manually for releases at this time. If Even or any of the other GDAL
> devs have PyPI logins, please let me know, and I'll add you to the
> maintainer list so you can push new releases.

Howard,

I'm not familiar with the process to update stuff in PyPi. Could this be 
documented in HOWTO-RELEASE ?

My PyPi login is Even.Rouault

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From dmorissette at mapgears.com  Sun Aug 11 17:04:13 2013
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Sun, 11 Aug 2013 20:04:13 -0400
Subject: [gdal-dev] Motion: Commit Access for Kurt Schwehr
In-Reply-To: <CA+YzLBcA-AwoD8FeLt4C-erz_ybFAdTDOqBzdA2y_58_6i+OYA@mail.gmail.com>
References: <CA+YzLBcA-AwoD8FeLt4C-erz_ybFAdTDOqBzdA2y_58_6i+OYA@mail.gmail.com>
Message-ID: <5208267D.5070502@mapgears.com>

+1

Daniel


On 13-08-09 5:41 PM, Frank Warmerdam wrote:
> Motion: Commit Access to GDAL for Kurt Schwehr
>
> Kurt has been contributing some patches around maritime formats, and
> other aspects of GDAL.  He is also taking over my GDAL related
> responsibilities at Google, and I feel it would be helpful for him to
> have commit access to upstream various kinds of fixes smoothly.  I've
> personally worked with him on GDAL issues for several months now.
>
> Kurt, could you confirm to the list that you have read and will try to
> comply with:
>
> http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start voting with:
>
> +1 Frank
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com <mailto:warmerdam at pobox.com>
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000


From nixanz at nixanz.com  Sun Aug 11 17:17:33 2013
From: nixanz at nixanz.com (Nik Sands)
Date: Mon, 12 Aug 2013 10:17:33 +1000
Subject: [gdal-dev] Cannot compile 1.10 for iOS due to missing crt_extern
Message-ID: <EC6B7D33-AACB-4131-8C36-E8C4D72B706E@nixanz.com>

Hi list members,

I was able to build GDAL 1.9 for iOS, and I can build 1.10 for the iOS simulator, however I cannot compile GDAL 1.10 for the actual iOS (devices).  It appears that this is because crt_extern is not included in iOS.

The code that trips up the build is in 'cpl_spawn.cpp' and appears to be:

	#ifdef __APPLE__
	#include <crt_externs.h>

The last few lines of the build output are below.

Is there some way that I can get GDAL 1.10 built for iOS?  I really need one of the changes that was included in this version.

Thanks in advance for any advice that you may be able to provide.

Cheers,
Nik.


libtool: compile:  /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++ -arch armv7 -pipe -Os -gdwarf-2 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk -mno-thumb -mthumb-interwork -Wall -DOGR_ENABLED -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/port -DHAVE_LIBZ -I/usr/include/libxml2 -DHAVE_LIBXML2 -c cpl_spawn.cpp -o cpl_spawn.o
cpl_spawn.cpp:465:25: error: crt_externs.h: No such file or directory
cpl_spawn.cpp: In function 'CPLSpawnedProcess* CPLSpawnAsync(int (*)(CPL_FILE_HANDLE, CPL_FILE_HANDLE), const char* const*, int, int, int, char**)':
cpl_spawn.cpp:727: error: '_NSGetEnviron' was not declared in this scope
make[1]: *** [cpl_spawn.lo] Error 1
make: *** [port-target] Error 2

From even.rouault at mines-paris.org  Sun Aug 11 23:12:16 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 12 Aug 2013 08:12:16 +0200
Subject: [gdal-dev] Cannot compile 1.10 for iOS due to missing crt_extern
In-Reply-To: <EC6B7D33-AACB-4131-8C36-E8C4D72B706E@nixanz.com>
References: <EC6B7D33-AACB-4131-8C36-E8C4D72B706E@nixanz.com>
Message-ID: <201308120812.17934.even.rouault@mines-paris.org>

Le lundi 12 ao?t 2013 02:17:33, Nik Sands a ?crit :
> Hi list members,
> 
> I was able to build GDAL 1.9 for iOS, and I can build 1.10 for the iOS
> simulator, however I cannot compile GDAL 1.10 for the actual iOS
> (devices).  It appears that this is because crt_extern is not included in
> iOS.
> 
> The code that trips up the build is in 'cpl_spawn.cpp' and appears to be:
> 
> 	#ifdef __APPLE__
> 	#include <crt_externs.h>
> 
> The last few lines of the build output are below.
> 
> Is there some way that I can get GDAL 1.10 built for iOS?  I really need
> one of the changes that was included in this version.
> 
> Thanks in advance for any advice that you may be able to provide.

Nick,

Maybe you can try the patch at 
https://github.com/joyent/libuv/pull/321#issuecomment-4155600 that has very 
similar code that the one in GDAL and report if it works for you so it can get 
integrated ?

Even

> 
> Cheers,
> Nik.
> 
> 
> libtool: compile: 
> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Dev
> eloper/usr/bin/g++ -arch armv7 -pipe -Os -gdwarf-2 -isysroot
> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Dev
> eloper/SDKs/iPhoneOS6.1.sdk -mno-thumb -mthumb-interwork -Wall
> -DOGR_ENABLED -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/port
> -DHAVE_LIBZ -I/usr/include/libxml2 -DHAVE_LIBXML2 -c cpl_spawn.cpp -o
> cpl_spawn.o cpl_spawn.cpp:465:25: error: crt_externs.h: No such file or
> directory cpl_spawn.cpp: In function 'CPLSpawnedProcess* CPLSpawnAsync(int
> (*)(CPL_FILE_HANDLE, CPL_FILE_HANDLE), const char* const*, int, int, int,
> char**)': cpl_spawn.cpp:727: error: '_NSGetEnviron' was not declared in
> this scope make[1]: *** [cpl_spawn.lo] Error 1
> make: *** [port-target] Error 2
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From info at spatially-oriented.com  Mon Aug 12 04:58:53 2013
From: info at spatially-oriented.com (Casper Span)
Date: Mon, 12 Aug 2013 13:58:53 +0200
Subject: [gdal-dev] Exporting gml3 with OGR for .NET?
In-Reply-To: <CADcO7=kCebCryWtoycaArzgZRePJhLMMcbwWY_L-+WAN_y1rug@mail.gmail.com>
References: <CADcO7=kCebCryWtoycaArzgZRePJhLMMcbwWY_L-+WAN_y1rug@mail.gmail.com>
Message-ID: <CADcO7=khCy6jP5OBh-2kynBZPO97zF0EJM4D=xWfTKeQSSbLBA@mail.gmail.com>

Nobody uses GDAL for .net? :-(

regards,
Casper


On Thu, Aug 8, 2013 at 9:51 AM, Casper Span <info at spatially-oriented.com>wrote:

> Hi list,
>
> I'm trying to get some piece of code working with the csharp package of
> gdal. (NuGet GDAL / GDAL.Natve).
>
> Basically, I need to port a geometry to GML3.1.1. According to the
> documentation, all I need to do is add an option "FORMAT=GML3", so I tried
> that:
>
> using (OSGeo.OGR.Geometry geom = OSGeo.OGR.Ogr.CreateGeometryFromWkt(ref
> wkt, null))
> {
>     GmlString = geom.ExportToGML(new string[] { "FORMAT=GML3" });
> }
>
> But it will still return a GML2 (=default when not using any options)
> text. It really doesn't matter what I pass as an option, it will always
> just return a GML2 string.
>
> Anybody tried this before?
>
> regards,
> Casper
>
>
> --
>
> Casper Span
> T: @Span_Droid <https://twitter.com/#%21/Span_Droid>
> W: http://www.spatially-oriented.com
> M: info at spatially-oriented.com
>
>


-- 

Casper Span
T: @Span_Droid <https://twitter.com/#%21/Span_Droid>
W: http://www.spatially-oriented.com
M: info at spatially-oriented.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130812/ffc56b6e/attachment.html>

From JPalmer at linz.govt.nz  Mon Aug 12 13:12:11 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Tue, 13 Aug 2013 08:12:11 +1200
Subject: [gdal-dev] QGIS hanging when opening a FileGDB on 64 bit Linux
In-Reply-To: <C6B695652D5E6B4597E90C5734C02426169D3D6DC0@prdlsmmsg01.ad.linz.govt.nz>
References: <C6B695652D5E6B4597E90C5734C02426169D3D6DC0@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <C6B695652D5E6B4597E90C5734C02426169D3F131E@prdlsmmsg01.ad.linz.govt.nz>

Further to this I see that when you open a FIleGDB in QGIS 3 OGROpen calls made to the same database before any OGR_DS_Destroy calls are made. These open calls occur during the layer selection dialog, the OGR provider construction, and the initialisation of the QgsOgrFeatureIterator.

I'm guessing the fix for this should really be done at the Esri library level, but because we have no control over this maybe something can be done in the OGR library to reuse FileGDBAPI Geodatabase handles?

Cheers,
Jeremy

-----Original Message-----
From: Jeremy Palmer
Sent: Sunday, 11 August 2013 9:08 a.m.
To: qgis-developer at lists.osgeo.org
Subject: QGIS hanging when opening a FileGDB on 64 bit Linux

Hi QGIS devs!

Since the latest round of code changes (maybe over the last 2 months) I can no longer open Esri FileGDB in QGIS. I can read the database and QGIS prompts me from the FileGDB layers to add to the map, but when I select the layer from this dialog QGIS just hangs. I did some debugging and it seems to hang on the OGR_DS_Destroy call within QgsOgrFeatureIterator::close(). Does anyone else have this problem?

I'm running FileGDB SDK 1.3 and Ubuntu 12.04 64bit with QGIS master. I've tested this with the OSGeo4W win32 qgis-dev package and I don't get the problem.

Could this be related to this issue: http://forums.arcgis.com/threads/76527-CloseDatabase-hanging-on-64-bit-Linux-when-same-File-Geodatabase-opened-twice

??

Cheers,
Jeremy

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From jschmidt at fs.fed.us  Mon Aug 12 15:09:17 2013
From: jschmidt at fs.fed.us (jsschmidt)
Date: Mon, 12 Aug 2013 15:09:17 -0700 (PDT)
Subject: [gdal-dev] GeoPDF translation
In-Reply-To: <4EFF8BB964547748A07CA32961810C041BD7D69D@SOM-TEAQASMAIL1.som.w2k.state.me.us>
References: <4EFF8BB964547748A07CA32961810C041BD7D69D@SOM-TEAQASMAIL1.som.w2k.state.me.us>
Message-ID: <1376345357231-5072151.post@n6.nabble.com>


Here's a Python3.3 script to convert multiple historic USGS GeoPDF's to
GeoTiffs in a UTM10, NAD83 map projection at 300 dpi. Intermediate Geotiffs
are output in the native USGS map projection - polyconic - then converted to
GeoTiffs in UTM.  Script requires access to the GDAL utilities, which I
obtained by installing MS4W and running the script from the MS4W command
prompt.
Modify the script to point to the directory where your historic GeoPDFs are
stored, to change the output map projection, and to modify the name of the
output GeoTiff files. (Script currently assumes PDF files begin with 'CA'
and final output files will be named CA_UTM....tif.)









#Python 3.3 script to convert historic USGS PDF maps to GeoTiff format in
UTM coordinates.
#Relies on GDAL (Geospatial Data Abstraction Library)
import glob, os
import subprocess
import pyproj

def GetLatLon(line):
    coords = line.split(') (')[1]
    coords = coords[:-1]
    LonStr, LatStr = coords.split(',')
    # Longitude
    LonStr = LonStr.split('d')    # Get the degrees, and the rest
    LonD = int(LonStr[0])
    LonStr = LonStr[1].split('\'')# Get the arc-m, and the rest
    LonM = int(LonStr[0])
    LonStr = LonStr[1].split('"') # Get the arc-s, and the rest
    LonS = float(LonStr[0])
    Lon = LonD + LonM/60. + LonS/3600.
    if LonStr[1] in ['W', 'w']:
        Lon = -1*Lon
    # Same for Latitude
    LatStr = LatStr.split('d')
    LatD = int(LatStr[0])
    LatStr = LatStr[1].split('\'')
    LatM = int(LatStr[0])
    LatStr = LatStr[1].split('"')
    LatS = float(LatStr[0])
    Lat = LatD + LatM/60. + LatS/3600.
    if LatStr[1] in ['S', 's']:
        Lat = -1*Lat
    return Lat, Lon

EPSGin = "EPSG:4267"                   # Lat-Lon, NAD27 - Assumed coordinate
system of lat-lon corner coordinates as defined by EPSG code
EPSGout = "EPSG:26910"                 # UTM10, NAD83 - Output coordinate
system for Geotiff files as defined by EPSG code
#EPSGout = "EPSG:26911"                 # UTM11, NAD83 - Output coordinate
system for Geotiff files as defined by EPSG code

dirname = "C:\\GeoPDF\\"  # Location of input pdf files Also used for output
directory
print(dirname)

p1=pyproj.Proj(init= EPSGin)           # Define input projection
p2=pyproj.Proj(init= EPSGout)          # Define output projection

list_of_files1 = glob.glob(dirname +'*.pdf')           # create the list of
PDF files


for file_name in list_of_files1:
  os.rename(file_name, file_name.replace(" ", "_"))    #replace any blanks
in PDF filenames with underscore character

list_of_files2 = glob.glob(dirname +'*.pdf')           # create the list of
renamed PDF files

for file_name in list_of_files2:

  FIPDF = file_name #Input GeoPDF filename
  FOTIFF1 = FIPDF.replace('pdf', 'tif') # Output Filename for intermediate
GeoTiff file in original map coordinates
  FOTIFF2 = FOTIFF1.replace('CA_', 'CA_UTM_') # Output Filename for final
GeoTiff file in UTM Coordinates
  print(FIPDF)
  print(FOTIFF1)
  print(FOTIFF2)

# Export geoPDF to Geotiff at 300 dpi in original map projection coordinates
(polyconic for USGS historic maps)
# Use JPEG Compression in the GeoTiff

  os.system('gdal_translate.exe  -of GTiff --config GDAL_PDF_DPI 300 -co
COMPRESS=JPEG ' + FIPDF + ' '+ FOTIFF1)

  CornerLats = [0,0,0,0]
  CornerLons = [0,0,0,0]
  Cornerx = [0,0,0,0]
  Cornery = [0,0,0,0]
  gcp = ['','','','']
  xstr = ['','','','']
  ystr = ['','','','']

# Run GDALinfo to read the header information from each intermediate GeoTiff
file

  GdalInfo = subprocess.check_output('gdalinfo
{}'.format(FOTIFF1),shell=True,universal_newlines=True)# Runs Gdalinfo on
exported GeoTiff
  GdalInfo = GdalInfo.splitlines() # Creates a line by line list.
  GotUL, GotUR, GotLL, GotLR, GotSize, GotPixel, Proj, NeedReproj = False,
False, False, False, False, False, False, True
  
  for line in GdalInfo:
        print(line)  
        if line.startswith("Size"):
# Get the row-column size of the GeoTiff 
            size = line.split()
            R = size[3]
            size2 = size[2].split(',')
            C = size2[0]
            CornerRow = ['0', R, '0', R]
            CornerCol = ['0', '0', C, C]
            GotSize = True
        
        if line.startswith("Pixel Size"):
# Calculate the size of each pixel in map units (assumed to be meters)
            pix1 = line.split('(')
            pix2 = pix1[1].split(',')
            pixsize = float(pix2[0])
            halfpix = pixsize/2 # Adjustment to move coordinates to cell
center from edge
            GotPixel = True
             
        if line.startswith("Upper Left"):
            CornerLats[0], CornerLons[0] = GetLatLon(line)
            Cornerx[0], Cornery[0] =
pyproj.transform(p1,p2,CornerLons[0],CornerLats[0]) #Reproject edge coords
in UL to output Map proj
            Cornerx[0] = Cornerx[0] - halfpix # Adjustment to pixel edge
            Cornery[0] = Cornery[0] + halfpix 
            GotUL = True
        
        if line.startswith("Lower Left"):
            CornerLats[1], CornerLons[1] = GetLatLon(line)
            Cornerx[1], Cornery[1] =
pyproj.transform(p1,p2,CornerLons[1],CornerLats[1]) #Reproject edge coords
in LL to output Map proj
            Cornerx[1] = Cornerx[1] - halfpix
            Cornery[1] = Cornery[1] - halfpix 
            GotLL = True

        if line.startswith("Upper Right"):
            CornerLats[2], CornerLons[2] = GetLatLon(line)
            Cornerx[2], Cornery[2] =
pyproj.transform(p1,p2,CornerLons[2],CornerLats[2]) #Reproject edge coords
in UR to output Map proj
            Cornerx[2] = Cornerx[2] + halfpix
            Cornery[2] = Cornery[2] + halfpix 
            GotUR = True

        if line.startswith("Lower Right"):
            CornerLats[3], CornerLons[3] = GetLatLon(line)
            Cornerx[3], Cornery[3] =
pyproj.transform(p1,p2,CornerLons[3],CornerLats[3]) #Reproject edge coords
in LR to output Map proj
            Cornerx[3] = Cornerx[3] + halfpix
            Cornery[3] = Cornery[3] - halfpix 
            GotLR = True

        if GotUL and GotUR and GotLL and GotLR and GotSize and GotPixel and
NeedReproj:
            xstr[0] = str(Cornerx[0])
            xstr[1] = str(Cornerx[1])
            xstr[2] = str(Cornerx[2])
            xstr[3] = str(Cornerx[3])
            ystr[0] = str(Cornery[0])
            ystr[1] = str(Cornery[1])
            ystr[2] = str(Cornery[2])
            ystr[3] = str(Cornery[3])

            gcp[0] = ' -gcp '+ CornerCol[0]+ ' ' + CornerRow[0]+ ' ' +
xstr[0]+ ' ' + ystr[0]
            gcp[1] = ' -gcp '+ CornerCol[1]+ ' ' + CornerRow[1]+ ' ' +
xstr[1]+ ' ' + ystr[1]
            gcp[2] = ' -gcp '+ CornerCol[2]+ ' ' + CornerRow[2]+ ' ' +
xstr[2]+ ' ' + ystr[2]
            gcp[3] = ' -gcp '+ CornerCol[3]+ ' ' + CornerRow[3]+ ' ' +
xstr[3]+ ' ' + ystr[3]

            # Reproject to new geotiff file using control points
 
            gdalstr = 'gdal_translate.exe -of GTIFF -co COMPRESS=JPEG ' +
FOTIFF1 + gcp[0] + gcp[1] + gcp[2] + gcp[3]+ ' -a_srs ' + EPSGout + ' '+
FOTIFF2
            print(gdalstr) 
            os.system(gdalstr)
            NeedReproj = False
            Proj = True

        if GotUL and GotUR and GotLL and GotLR and GotSize and GotPixel and
Proj:
            break

         
           
  







--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-GeoPDF-translation-tp3742508p5072151.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From piotrpachol at gmail.com  Mon Aug 12 15:42:01 2013
From: piotrpachol at gmail.com (=?UTF-8?B?UGlvdHIgUGFjaMOzxYI=?=)
Date: Tue, 13 Aug 2013 00:42:01 +0200
Subject: [gdal-dev] importing attributes in ogr2ogr
Message-ID: <520964B9.2090503@gmail.com>

Hello,
I have made different test in importing gml files to PostGIS by ogr2ogr
and for me it would be necessary to have possibility to import some 
attributes (not only values) of elements.

1.  I can't import using existing options the reason for NULL values for 
instance:

<ot:code xsi:nil="true" nilReason="inapplicable"/>
<ot:number xsi:nil="true" nilReason="template"/>

These types are defined here: 
http://schemas.opengis.net/gml/3.2.1/basicTypes.xsd
I would like to have in database column where enumeration values for 
nilReason is kept.

2. There are some options for xlink resolving but I can't import to 
database only the value which is in xlink for instance:
<ot:river xlink:href="water.xml#10197"/>
I would like to save value "10197" in a database column. Then in 
database I could do some joins between columns using this value.

May be you can help with above mentioned problems or it would be 
possible to implement it ?
Regards,
Piotr

From even.rouault at mines-paris.org  Mon Aug 12 16:29:21 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 13 Aug 2013 01:29:21 +0200
Subject: [gdal-dev] QGIS hanging when opening a FileGDB on 64 bit Linux
In-Reply-To: <C6B695652D5E6B4597E90C5734C02426169D3F131E@prdlsmmsg01.ad.linz.govt.nz>
References: <C6B695652D5E6B4597E90C5734C02426169D3D6DC0@prdlsmmsg01.ad.linz.govt.nz>
	<C6B695652D5E6B4597E90C5734C02426169D3F131E@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <201308130129.21803.even.rouault@mines-paris.org>

Le lundi 12 ao?t 2013 22:12:11, Jeremy Palmer a ?crit :
> Further to this I see that when you open a FIleGDB in QGIS 3 OGROpen calls
> made to the same database before any OGR_DS_Destroy calls are made. These
> open calls occur during the layer selection dialog, the OGR provider
> construction, and the initialisation of the QgsOgrFeatureIterator.
> 
> I'm guessing the fix for this should really be done at the Esri library
> level, but because we have no control over this maybe something can be
> done in the OGR library to reuse FileGDBAPI Geodatabase handles?

Jeremy,

I do think this is exactly the issue of 
http://forums.arcgis.com/threads/76527-CloseDatabase-hanging-on-64-bit-Lin ux-
when-same-File-Geodatabase-opened-twice

At least I reproduced it on my own PC. I've implemented a workaround in GDAL 
trunk for that issue that implements ref-counting of the FileGDBAPI Geodabase 
handle at OGR side : http://trac.osgeo.org/gdal/changeset/26307.

Even

> 
> Cheers,
> Jeremy
> 
> -----Original Message-----
> From: Jeremy Palmer
> Sent: Sunday, 11 August 2013 9:08 a.m.
> To: qgis-developer at lists.osgeo.org
> Subject: QGIS hanging when opening a FileGDB on 64 bit Linux
> 
> Hi QGIS devs!
> 
> Since the latest round of code changes (maybe over the last 2 months) I can
> no longer open Esri FileGDB in QGIS. I can read the database and QGIS
> prompts me from the FileGDB layers to add to the map, but when I select
> the layer from this dialog QGIS just hangs. I did some debugging and it
> seems to hang on the OGR_DS_Destroy call within
> QgsOgrFeatureIterator::close(). Does anyone else have this problem?
> 
> I'm running FileGDB SDK 1.3 and Ubuntu 12.04 64bit with QGIS master. I've
> tested this with the OSGeo4W win32 qgis-dev package and I don't get the
> problem.
> 
> Could this be related to this issue:
> http://forums.arcgis.com/threads/76527-CloseDatabase-hanging-on-64-bit-Lin
> ux-when-same-File-Geodatabase-opened-twice
> 
> ??
> 
> Cheers,
> Jeremy
> 
> This message contains information, which is confidential and may be subject
> to legal privilege. If you are not the intended recipient, you must not
> peruse, use, disseminate, distribute or copy this message. If you have
> received this message in error, please notify us immediately (Phone 0800
> 665 463 or info at linz.govt.nz) and destroy the original message. LINZ
> accepts no responsibility for changes to this email, or for any
> attachments, after its transmission from LINZ. Thank You.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From JPalmer at linz.govt.nz  Mon Aug 12 17:01:24 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Tue, 13 Aug 2013 12:01:24 +1200
Subject: [gdal-dev] QGIS hanging when opening a FileGDB on 64 bit Linux
In-Reply-To: <201308130129.21803.even.rouault@mines-paris.org>
References: <C6B695652D5E6B4597E90C5734C02426169D3D6DC0@prdlsmmsg01.ad.linz.govt.nz>
	<C6B695652D5E6B4597E90C5734C02426169D3F131E@prdlsmmsg01.ad.linz.govt.nz>
	<201308130129.21803.even.rouault@mines-paris.org>
Message-ID: <C6B695652D5E6B4597E90C5734C02426169D3F140E@prdlsmmsg01.ad.linz.govt.nz>

Wow Even - just amazing as always.

Have you confirmed that you can no open a FileGDB in QGIS? I still get the freeze when using GDAL trunk, but maybe that now a QGIS problem.

-----Original Message-----
From: Even Rouault [mailto:even.rouault at mines-paris.org]
Sent: Tuesday, 13 August 2013 11:29 a.m.
To: gdal-dev at lists.osgeo.org
Cc: Jeremy Palmer; 'qgis-developer at lists.osgeo.org'
Subject: Re: [gdal-dev] QGIS hanging when opening a FileGDB on 64 bit Linux

Le lundi 12 ao?t 2013 22:12:11, Jeremy Palmer a ?crit :
> Further to this I see that when you open a FIleGDB in QGIS 3 OGROpen
> calls made to the same database before any OGR_DS_Destroy calls are
> made. These open calls occur during the layer selection dialog, the
> OGR provider construction, and the initialisation of the QgsOgrFeatureIterator.
>
> I'm guessing the fix for this should really be done at the Esri
> library level, but because we have no control over this maybe
> something can be done in the OGR library to reuse FileGDBAPI Geodatabase handles?

Jeremy,

I do think this is exactly the issue of http://forums.arcgis.com/threads/76527-CloseDatabase-hanging-on-64-bit-Lin ux- when-same-File-Geodatabase-opened-twice

At least I reproduced it on my own PC. I've implemented a workaround in GDAL trunk for that issue that implements ref-counting of the FileGDBAPI Geodabase handle at OGR side : http://trac.osgeo.org/gdal/changeset/26307.

Even

>
> Cheers,
> Jeremy
>
> -----Original Message-----
> From: Jeremy Palmer
> Sent: Sunday, 11 August 2013 9:08 a.m.
> To: qgis-developer at lists.osgeo.org
> Subject: QGIS hanging when opening a FileGDB on 64 bit Linux
>
> Hi QGIS devs!
>
> Since the latest round of code changes (maybe over the last 2 months)
> I can no longer open Esri FileGDB in QGIS. I can read the database and
> QGIS prompts me from the FileGDB layers to add to the map, but when I
> select the layer from this dialog QGIS just hangs. I did some
> debugging and it seems to hang on the OGR_DS_Destroy call within
> QgsOgrFeatureIterator::close(). Does anyone else have this problem?
>
> I'm running FileGDB SDK 1.3 and Ubuntu 12.04 64bit with QGIS master.
> I've tested this with the OSGeo4W win32 qgis-dev package and I don't
> get the problem.
>
> Could this be related to this issue:
> http://forums.arcgis.com/threads/76527-CloseDatabase-hanging-on-64-bit
> -Lin ux-when-same-File-Geodatabase-opened-twice
>
> ??
>
> Cheers,
> Jeremy
>
> This message contains information, which is confidential and may be
> subject to legal privilege. If you are not the intended recipient, you
> must not peruse, use, disseminate, distribute or copy this message. If
> you have received this message in error, please notify us immediately
> (Phone 0800
> 665 463 or info at linz.govt.nz) and destroy the original message. LINZ
> accepts no responsibility for changes to this email, or for any
> attachments, after its transmission from LINZ. Thank You.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

--
Geospatial professional services
http://even.rouault.free.fr/services.html

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From nixanz at nixanz.com  Mon Aug 12 17:16:41 2013
From: nixanz at nixanz.com (Nik Sands)
Date: Tue, 13 Aug 2013 10:16:41 +1000
Subject: [gdal-dev] Cannot compile 1.10 for iOS due to missing crt_extern
In-Reply-To: <201308120812.17934.even.rouault@mines-paris.org>
References: <EC6B7D33-AACB-4131-8C36-E8C4D72B706E@nixanz.com>
	<201308120812.17934.even.rouault@mines-paris.org>
Message-ID: <2D87D9C9-695F-4B4A-A701-179168532CAB@nixanz.com>

Hi Even,

Your suggestion has helped a little, but I still can't compile for iOS (device).  I'm getting the following at the end of the build output...


libtool: compile:  /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++ -arch armv7 -pipe -Os -gdwarf-2 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk -mno-thumb -mthumb-interwork -Wall -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/port -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/gcore -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/alg -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/ogr -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/ogr/ogrsf_frmts -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/frmts -DOGR_ENABLED -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/port -c commonutils.cpp -o commonutils.o
/bin/sh /Users/nsands/Documents/Nik/Development/gdal-1.10.0/libtool --mode=link	/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++ -arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk gdalinfo.lo commonutils.lo  /Users/nsands/Documents/Nik/Development/gdal-1.10.0/libgdal.la -o gdalinfo
libtool: link: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++ -arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk gdalinfo.o commonutils.o -o gdalinfo  /Users/nsands/Documents/Nik/Development/gdal-1.10.0/.libs/libgdal.a -lsqlite3 -lz -lpthread -ldl -liconv -lxml2
Undefined symbols for architecture armv7:
  "_clock$UNIX2003", referenced from:
      IVFKDataBlock::LoadGeometry()       in libgdal.a(vfkdatablock.o)
ld: symbol(s) not found for architecture armv7
collect2: ld returned 1 exit status
make[1]: *** [gdalinfo] Error 1
make: *** [apps-target] Error 2


How can I get this resolved?

Cheers,
Nik.


On 12/08/2013, at 4:12 PM, Even Rouault <even.rouault at mines-paris.org> wrote:

> Le lundi 12 ao?t 2013 02:17:33, Nik Sands a ?crit :
>> Hi list members,
>> 
>> I was able to build GDAL 1.9 for iOS, and I can build 1.10 for the iOS
>> simulator, however I cannot compile GDAL 1.10 for the actual iOS
>> (devices).  It appears that this is because crt_extern is not included in
>> iOS.
>> 
>> The code that trips up the build is in 'cpl_spawn.cpp' and appears to be:
>> 
>> 	#ifdef __APPLE__
>> 	#include <crt_externs.h>
>> 
>> The last few lines of the build output are below.
>> 
>> Is there some way that I can get GDAL 1.10 built for iOS?  I really need
>> one of the changes that was included in this version.
>> 
>> Thanks in advance for any advice that you may be able to provide.
> 
> Nick,
> 
> Maybe you can try the patch at 
> https://github.com/joyent/libuv/pull/321#issuecomment-4155600 that has very 
> similar code that the one in GDAL and report if it works for you so it can get 
> integrated ?
> 
> Even
> 
>> 
>> Cheers,
>> Nik.
>> 
>> 
>> libtool: compile: 
>> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Dev
>> eloper/usr/bin/g++ -arch armv7 -pipe -Os -gdwarf-2 -isysroot
>> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Dev
>> eloper/SDKs/iPhoneOS6.1.sdk -mno-thumb -mthumb-interwork -Wall
>> -DOGR_ENABLED -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/port
>> -DHAVE_LIBZ -I/usr/include/libxml2 -DHAVE_LIBXML2 -c cpl_spawn.cpp -o
>> cpl_spawn.o cpl_spawn.cpp:465:25: error: crt_externs.h: No such file or
>> directory cpl_spawn.cpp: In function 'CPLSpawnedProcess* CPLSpawnAsync(int
>> (*)(CPL_FILE_HANDLE, CPL_FILE_HANDLE), const char* const*, int, int, int,
>> char**)': cpl_spawn.cpp:727: error: '_NSGetEnviron' was not declared in
>> this scope make[1]: *** [cpl_spawn.lo] Error 1
>> make: *** [port-target] Error 2
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -- 
> Geospatial professional services
> http://even.rouault.free.fr/services.html


From nixanz at nixanz.com  Mon Aug 12 17:49:47 2013
From: nixanz at nixanz.com (Nik Sands)
Date: Tue, 13 Aug 2013 10:49:47 +1000
Subject: [gdal-dev] Cannot compile 1.10 for iOS due to missing crt_extern
In-Reply-To: <2D87D9C9-695F-4B4A-A701-179168532CAB@nixanz.com>
References: <EC6B7D33-AACB-4131-8C36-E8C4D72B706E@nixanz.com>
	<201308120812.17934.even.rouault@mines-paris.org>
	<2D87D9C9-695F-4B4A-A701-179168532CAB@nixanz.com>
Message-ID: <89A64711-FB08-4948-BBAA-1F39DA21F86C@nixanz.com>

PS.  I've got a work around for now...

I edited the file "ogr/ogrsf_frmts/vfk/vfkdatablock.cpp" and commented out the lines that referenced "clock()", and the debug line which appears to be all that was using it.

It then built OK.   :-)

I'm sure you guys can come up with a proper solution, but this did the job for me for now.   :-)

Cheers,
Nik.



On 13/08/2013, at 10:16 AM, Nik Sands <nixanz at nixanz.com> wrote:

> Hi Even,
> 
> Your suggestion has helped a little, but I still can't compile for iOS (device).  I'm getting the following at the end of the build output...
> 
> 
> libtool: compile:  /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++ -arch armv7 -pipe -Os -gdwarf-2 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk -mno-thumb -mthumb-interwork -Wall -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/port -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/gcore -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/alg -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/ogr -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/ogr/ogrsf_frmts -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/frmts -DOGR_ENABLED -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/port -c commonutils.cpp -o commonutils.o
> /bin/sh /Users/nsands/Documents/Nik/Development/gdal-1.10.0/libtool --mode=link	/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++ -arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk gdalinfo.lo commonutils.lo  /Users/nsands/Documents/Nik/Development/gdal-1.10.0/libgdal.la -o gdalinfo
> libtool: link: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++ -arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk gdalinfo.o commonutils.o -o gdalinfo  /Users/nsands/Documents/Nik/Development/gdal-1.10.0/.libs/libgdal.a -lsqlite3 -lz -lpthread -ldl -liconv -lxml2
> Undefined symbols for architecture armv7:
>  "_clock$UNIX2003", referenced from:
>      IVFKDataBlock::LoadGeometry()       in libgdal.a(vfkdatablock.o)
> ld: symbol(s) not found for architecture armv7
> collect2: ld returned 1 exit status
> make[1]: *** [gdalinfo] Error 1
> make: *** [apps-target] Error 2
> 
> 
> How can I get this resolved?
> 
> Cheers,
> Nik.
> 
> 
> On 12/08/2013, at 4:12 PM, Even Rouault <even.rouault at mines-paris.org> wrote:
> 
>> Le lundi 12 ao?t 2013 02:17:33, Nik Sands a ?crit :
>>> Hi list members,
>>> 
>>> I was able to build GDAL 1.9 for iOS, and I can build 1.10 for the iOS
>>> simulator, however I cannot compile GDAL 1.10 for the actual iOS
>>> (devices).  It appears that this is because crt_extern is not included in
>>> iOS.
>>> 
>>> The code that trips up the build is in 'cpl_spawn.cpp' and appears to be:
>>> 
>>> 	#ifdef __APPLE__
>>> 	#include <crt_externs.h>
>>> 
>>> The last few lines of the build output are below.
>>> 
>>> Is there some way that I can get GDAL 1.10 built for iOS?  I really need
>>> one of the changes that was included in this version.
>>> 
>>> Thanks in advance for any advice that you may be able to provide.
>> 
>> Nick,
>> 
>> Maybe you can try the patch at 
>> https://github.com/joyent/libuv/pull/321#issuecomment-4155600 that has very 
>> similar code that the one in GDAL and report if it works for you so it can get 
>> integrated ?
>> 
>> Even
>> 
>>> 
>>> Cheers,
>>> Nik.
>>> 
>>> 
>>> libtool: compile: 
>>> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Dev
>>> eloper/usr/bin/g++ -arch armv7 -pipe -Os -gdwarf-2 -isysroot
>>> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Dev
>>> eloper/SDKs/iPhoneOS6.1.sdk -mno-thumb -mthumb-interwork -Wall
>>> -DOGR_ENABLED -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/port
>>> -DHAVE_LIBZ -I/usr/include/libxml2 -DHAVE_LIBXML2 -c cpl_spawn.cpp -o
>>> cpl_spawn.o cpl_spawn.cpp:465:25: error: crt_externs.h: No such file or
>>> directory cpl_spawn.cpp: In function 'CPLSpawnedProcess* CPLSpawnAsync(int
>>> (*)(CPL_FILE_HANDLE, CPL_FILE_HANDLE), const char* const*, int, int, int,
>>> char**)': cpl_spawn.cpp:727: error: '_NSGetEnviron' was not declared in
>>> this scope make[1]: *** [cpl_spawn.lo] Error 1
>>> make: *** [port-target] Error 2
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> -- 
>> Geospatial professional services
>> http://even.rouault.free.fr/services.html
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Mon Aug 12 23:06:15 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 13 Aug 2013 08:06:15 +0200
Subject: [gdal-dev] Cannot compile 1.10 for iOS due to missing crt_extern
In-Reply-To: <89A64711-FB08-4948-BBAA-1F39DA21F86C@nixanz.com>
References: <EC6B7D33-AACB-4131-8C36-E8C4D72B706E@nixanz.com>
	<201308120812.17934.even.rouault@mines-paris.org>
	<2D87D9C9-695F-4B4A-A701-179168532CAB@nixanz.com>
	<89A64711-FB08-4948-BBAA-1F39DA21F86C@nixanz.com>
Message-ID: <1376373975.5209ccd77fe35@imp.free.fr>

Selon Nik Sands <nixanz at nixanz.com>:

> PS.  I've got a work around for now...
>
> I edited the file "ogr/ogrsf_frmts/vfk/vfkdatablock.cpp" and commented out
> the lines that referenced "clock()", and the debug line which appears to be
> all that was using it.
>
> It then built OK.   :-)
>
> I'm sure you guys can come up with a proper solution, but this did the job
> for me for now.   :-)

Nick,

can you open a ticket in GDAL Trac about those 2 issues ?

Thanks,

Even

>
> Cheers,
> Nik.
>
>
>
> On 13/08/2013, at 10:16 AM, Nik Sands <nixanz at nixanz.com> wrote:
>
> > Hi Even,
> >
> > Your suggestion has helped a little, but I still can't compile for iOS
> (device).  I'm getting the following at the end of the build output...
> >
> >
> > libtool: compile:
>
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++
> -arch armv7 -pipe -Os -gdwarf-2 -isysroot
>
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk
> -mno-thumb -mthumb-interwork -Wall
> -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/port
> -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/gcore
> -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/alg
> -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/ogr
> -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/ogr/ogrsf_frmts
> -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/frmts -DOGR_ENABLED
> -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/port -c commonutils.cpp
> -o commonutils.o
> > /bin/sh /Users/nsands/Documents/Nik/Development/gdal-1.10.0/libtool
>
--mode=link	/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++
> -arch armv7 -isysroot
>
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk
> gdalinfo.lo commonutils.lo
> /Users/nsands/Documents/Nik/Development/gdal-1.10.0/libgdal.la -o gdalinfo
> > libtool: link:
>
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++
> -arch armv7 -isysroot
>
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk
> gdalinfo.o commonutils.o -o gdalinfo
> /Users/nsands/Documents/Nik/Development/gdal-1.10.0/.libs/libgdal.a -lsqlite3
> -lz -lpthread -ldl -liconv -lxml2
> > Undefined symbols for architecture armv7:
> >  "_clock$UNIX2003", referenced from:
> >      IVFKDataBlock::LoadGeometry()       in libgdal.a(vfkdatablock.o)
> > ld: symbol(s) not found for architecture armv7
> > collect2: ld returned 1 exit status
> > make[1]: *** [gdalinfo] Error 1
> > make: *** [apps-target] Error 2
> >
> >
> > How can I get this resolved?
> >
> > Cheers,
> > Nik.
> >
> >
> > On 12/08/2013, at 4:12 PM, Even Rouault <even.rouault at mines-paris.org>
> wrote:
> >
> >> Le lundi 12 ao?t 2013 02:17:33, Nik Sands a ?crit :
> >>> Hi list members,
> >>>
> >>> I was able to build GDAL 1.9 for iOS, and I can build 1.10 for the iOS
> >>> simulator, however I cannot compile GDAL 1.10 for the actual iOS
> >>> (devices).  It appears that this is because crt_extern is not included in
> >>> iOS.
> >>>
> >>> The code that trips up the build is in 'cpl_spawn.cpp' and appears to be:
> >>>
> >>> 	#ifdef __APPLE__
> >>> 	#include <crt_externs.h>
> >>>
> >>> The last few lines of the build output are below.
> >>>
> >>> Is there some way that I can get GDAL 1.10 built for iOS?  I really need
> >>> one of the changes that was included in this version.
> >>>
> >>> Thanks in advance for any advice that you may be able to provide.
> >>
> >> Nick,
> >>
> >> Maybe you can try the patch at
> >> https://github.com/joyent/libuv/pull/321#issuecomment-4155600 that has
> very
> >> similar code that the one in GDAL and report if it works for you so it can
> get
> >> integrated ?
> >>
> >> Even
> >>
> >>>
> >>> Cheers,
> >>> Nik.
> >>>
> >>>
> >>> libtool: compile:
> >>>
> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Dev
> >>> eloper/usr/bin/g++ -arch armv7 -pipe -Os -gdwarf-2 -isysroot
> >>>
> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Dev
> >>> eloper/SDKs/iPhoneOS6.1.sdk -mno-thumb -mthumb-interwork -Wall
> >>> -DOGR_ENABLED -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/port
> >>> -DHAVE_LIBZ -I/usr/include/libxml2 -DHAVE_LIBXML2 -c cpl_spawn.cpp -o
> >>> cpl_spawn.o cpl_spawn.cpp:465:25: error: crt_externs.h: No such file or
> >>> directory cpl_spawn.cpp: In function 'CPLSpawnedProcess*
> CPLSpawnAsync(int
> >>> (*)(CPL_FILE_HANDLE, CPL_FILE_HANDLE), const char* const*, int, int, int,
> >>> char**)': cpl_spawn.cpp:727: error: '_NSGetEnviron' was not declared in
> >>> this scope make[1]: *** [cpl_spawn.lo] Error 1
> >>> make: *** [port-target] Error 2
> >>> _______________________________________________
> >>> gdal-dev mailing list
> >>> gdal-dev at lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >> --
> >> Geospatial professional services
> >> http://even.rouault.free.fr/services.html
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>



From ahmettemiz88 at gmail.com  Mon Aug 12 23:25:56 2013
From: ahmettemiz88 at gmail.com (Ahmet Temiz)
Date: Tue, 13 Aug 2013 09:25:56 +0300
Subject: [gdal-dev] problem in where clause
Message-ID: <CAJKO1YtoPcKH61=mzCC55ZAWOgU9MT_55Q1sEyW9mWpNjP9koA@mail.gmail.com>

hello

Do you have any idea why this expression is wrong ?


'PG: dbname=tr2 host=localhost user=orkun password=222222 port=5432
schema=public table="slp4_geo AS r, sformasyon22 AS g"
       where="( ST_Intersects(r.rast, ST_SetSRID(g.geom,4326) ) ) AND
(g.yas LIKE \'%KUVATERNER%\')"

    mode=2'


regards

-- 
Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Planlama ve Zarar Azaltma Dairesi Ba?kanl???


________________________

Ahmet Temiz
Geological Eng.
Information Systems - GIS Group
Disaster and Emergency Management
of Presidency
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130813/3de9b642/attachment.html>

From even.rouault at mines-paris.org  Tue Aug 13 00:23:59 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 13 Aug 2013 09:23:59 +0200
Subject: [gdal-dev] QGIS hanging when opening a FileGDB on 64 bit Linux
In-Reply-To: <C6B695652D5E6B4597E90C5734C02426169D3F140E@prdlsmmsg01.ad.linz.govt.nz>
References: <C6B695652D5E6B4597E90C5734C02426169D3D6DC0@prdlsmmsg01.ad.linz.govt.nz>
	<C6B695652D5E6B4597E90C5734C02426169D3F131E@prdlsmmsg01.ad.linz.govt.nz>
	<201308130129.21803.even.rouault@mines-paris.org>
	<C6B695652D5E6B4597E90C5734C02426169D3F140E@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <1376378639.5209df0f08da3@imp.free.fr>

Selon Jeremy Palmer <JPalmer at linz.govt.nz>:

> Wow Even - just amazing as always.
>
> Have you confirmed that you can no open a FileGDB in QGIS?

No, I didn't. I've tested with the OGR API that it solved the issue with the
following access pattern :

ds1 = ogr.Open(datasetname)
ds2 = ogr.Open(datasetname)
ds2 = None
ds1 = None

> I still get the
> freeze when using GDAL trunk, but maybe that now a QGIS problem.

Just to be sure that you are using the version with the fix, if you break with
gdb when it hangs, does it display FGdbDriver::Release() in the stack trace ?

>
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault at mines-paris.org]
> Sent: Tuesday, 13 August 2013 11:29 a.m.
> To: gdal-dev at lists.osgeo.org
> Cc: Jeremy Palmer; 'qgis-developer at lists.osgeo.org'
> Subject: Re: [gdal-dev] QGIS hanging when opening a FileGDB on 64 bit Linux
>
> Le lundi 12 ao?t 2013 22:12:11, Jeremy Palmer a ?crit :
> > Further to this I see that when you open a FIleGDB in QGIS 3 OGROpen
> > calls made to the same database before any OGR_DS_Destroy calls are
> > made. These open calls occur during the layer selection dialog, the
> > OGR provider construction, and the initialisation of the
> QgsOgrFeatureIterator.
> >
> > I'm guessing the fix for this should really be done at the Esri
> > library level, but because we have no control over this maybe
> > something can be done in the OGR library to reuse FileGDBAPI Geodatabase
> handles?
>
> Jeremy,
>
> I do think this is exactly the issue of
> http://forums.arcgis.com/threads/76527-CloseDatabase-hanging-on-64-bit-Lin
> ux- when-same-File-Geodatabase-opened-twice
>
> At least I reproduced it on my own PC. I've implemented a workaround in GDAL
> trunk for that issue that implements ref-counting of the FileGDBAPI Geodabase
> handle at OGR side : http://trac.osgeo.org/gdal/changeset/26307.
>
> Even
>
> >
> > Cheers,
> > Jeremy
> >
> > -----Original Message-----
> > From: Jeremy Palmer
> > Sent: Sunday, 11 August 2013 9:08 a.m.
> > To: qgis-developer at lists.osgeo.org
> > Subject: QGIS hanging when opening a FileGDB on 64 bit Linux
> >
> > Hi QGIS devs!
> >
> > Since the latest round of code changes (maybe over the last 2 months)
> > I can no longer open Esri FileGDB in QGIS. I can read the database and
> > QGIS prompts me from the FileGDB layers to add to the map, but when I
> > select the layer from this dialog QGIS just hangs. I did some
> > debugging and it seems to hang on the OGR_DS_Destroy call within
> > QgsOgrFeatureIterator::close(). Does anyone else have this problem?
> >
> > I'm running FileGDB SDK 1.3 and Ubuntu 12.04 64bit with QGIS master.
> > I've tested this with the OSGeo4W win32 qgis-dev package and I don't
> > get the problem.
> >
> > Could this be related to this issue:
> > http://forums.arcgis.com/threads/76527-CloseDatabase-hanging-on-64-bit
> > -Lin ux-when-same-File-Geodatabase-opened-twice
> >
> > ??
> >
> > Cheers,
> > Jeremy
> >
> > This message contains information, which is confidential and may be
> > subject to legal privilege. If you are not the intended recipient, you
> > must not peruse, use, disseminate, distribute or copy this message. If
> > you have received this message in error, please notify us immediately
> > (Phone 0800
> > 665 463 or info at linz.govt.nz) and destroy the original message. LINZ
> > accepts no responsibility for changes to this email, or for any
> > attachments, after its transmission from LINZ. Thank You.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
> This message contains information, which is confidential and may be subject
> to legal privilege. If you are not the intended recipient, you must not
> peruse, use, disseminate, distribute or copy this message. If you have
> received this message in error, please notify us immediately (Phone 0800 665
> 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no
> responsibility for changes to this email, or for any attachments, after its
> transmission from LINZ. Thank You.
>



From JPalmer at linz.govt.nz  Tue Aug 13 02:50:28 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Tue, 13 Aug 2013 21:50:28 +1200
Subject: [gdal-dev] QGIS hanging when opening a FileGDB on 64 bit Linux
In-Reply-To: <1376378639.5209df0f08da3@imp.free.fr>
References: <C6B695652D5E6B4597E90C5734C02426169D3D6DC0@prdlsmmsg01.ad.linz.govt.nz>
	<C6B695652D5E6B4597E90C5734C02426169D3F131E@prdlsmmsg01.ad.linz.govt.nz>
	<201308130129.21803.even.rouault@mines-paris.org>
	<C6B695652D5E6B4597E90C5734C02426169D3F140E@prdlsmmsg01.ad.linz.govt.nz>,
	<1376378639.5209df0f08da3@imp.free.fr>
Message-ID: <C6B695652D5E6B4597E90C5734C02426169D3D6DCE@prdlsmmsg01.ad.linz.govt.nz>

Nope I get a crash when opening now via OGRSFDriverRegistrar::Open.

back trace is here: https://gist.github.com/palmerj/6219582

called from here in QGIS: https://github.com/qgis/Quantum-GIS/blob/master/src/providers/ogr/qgsogrprovider.cpp#L305

________________________________________
From: Even Rouault [even.rouault at mines-paris.org]
Sent: Tuesday, 13 August 2013 7:23 p.m.
To: Jeremy Palmer
Cc: 'Even Rouault'; 'gdal-dev at lists.osgeo.org'; 'qgis-developer at lists.osgeo.org'
Subject: RE: [gdal-dev] QGIS hanging when opening a FileGDB on 64 bit Linux

Selon Jeremy Palmer <JPalmer at linz.govt.nz>:

> Wow Even - just amazing as always.
>
> Have you confirmed that you can no open a FileGDB in QGIS?

No, I didn't. I've tested with the OGR API that it solved the issue with the
following access pattern :

ds1 = ogr.Open(datasetname)
ds2 = ogr.Open(datasetname)
ds2 = None
ds1 = None

> I still get the
> freeze when using GDAL trunk, but maybe that now a QGIS problem.

Just to be sure that you are using the version with the fix, if you break with
gdb when it hangs, does it display FGdbDriver::Release() in the stack trace ?

>
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault at mines-paris.org]
> Sent: Tuesday, 13 August 2013 11:29 a.m.
> To: gdal-dev at lists.osgeo.org
> Cc: Jeremy Palmer; 'qgis-developer at lists.osgeo.org'
> Subject: Re: [gdal-dev] QGIS hanging when opening a FileGDB on 64 bit Linux
>
> Le lundi 12 ao?t 2013 22:12:11, Jeremy Palmer a ?crit :
> > Further to this I see that when you open a FIleGDB in QGIS 3 OGROpen
> > calls made to the same database before any OGR_DS_Destroy calls are
> > made. These open calls occur during the layer selection dialog, the
> > OGR provider construction, and the initialisation of the
> QgsOgrFeatureIterator.
> >
> > I'm guessing the fix for this should really be done at the Esri
> > library level, but because we have no control over this maybe
> > something can be done in the OGR library to reuse FileGDBAPI Geodatabase
> handles?
>
> Jeremy,
>
> I do think this is exactly the issue of
> http://forums.arcgis.com/threads/76527-CloseDatabase-hanging-on-64-bit-Lin
> ux- when-same-File-Geodatabase-opened-twice
>
> At least I reproduced it on my own PC. I've implemented a workaround in GDAL
> trunk for that issue that implements ref-counting of the FileGDBAPI Geodabase
> handle at OGR side : http://trac.osgeo.org/gdal/changeset/26307.
>
> Even
>
> >
> > Cheers,
> > Jeremy
> >
> > -----Original Message-----
> > From: Jeremy Palmer
> > Sent: Sunday, 11 August 2013 9:08 a.m.
> > To: qgis-developer at lists.osgeo.org
> > Subject: QGIS hanging when opening a FileGDB on 64 bit Linux
> >
> > Hi QGIS devs!
> >
> > Since the latest round of code changes (maybe over the last 2 months)
> > I can no longer open Esri FileGDB in QGIS. I can read the database and
> > QGIS prompts me from the FileGDB layers to add to the map, but when I
> > select the layer from this dialog QGIS just hangs. I did some
> > debugging and it seems to hang on the OGR_DS_Destroy call within
> > QgsOgrFeatureIterator::close(). Does anyone else have this problem?
> >
> > I'm running FileGDB SDK 1.3 and Ubuntu 12.04 64bit with QGIS master.
> > I've tested this with the OSGeo4W win32 qgis-dev package and I don't
> > get the problem.
> >
> > Could this be related to this issue:
> > http://forums.arcgis.com/threads/76527-CloseDatabase-hanging-on-64-bit
> > -Lin ux-when-same-File-Geodatabase-opened-twice
> >
> > ??
> >
> > Cheers,
> > Jeremy
> >
> > This message contains information, which is confidential and may be
> > subject to legal privilege. If you are not the intended recipient, you
> > must not peruse, use, disseminate, distribute or copy this message. If
> > you have received this message in error, please notify us immediately
> > (Phone 0800
> > 665 463 or info at linz.govt.nz) and destroy the original message. LINZ
> > accepts no responsibility for changes to this email, or for any
> > attachments, after its transmission from LINZ. Thank You.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
> This message contains information, which is confidential and may be subject
> to legal privilege. If you are not the intended recipient, you must not
> peruse, use, disseminate, distribute or copy this message. If you have
> received this message in error, please notify us immediately (Phone 0800 665
> 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no
> responsibility for changes to this email, or for any attachments, after its
> transmission from LINZ. Thank You.
>


This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From andre.vautour at caris.com  Tue Aug 13 04:38:38 2013
From: andre.vautour at caris.com (Andre Vautour)
Date: Tue, 13 Aug 2013 08:38:38 -0300
Subject: [gdal-dev] OGRStyleLabel/OGRStyleTool units
Message-ID: <520A1ABE.1040109@caris.com>

I am trying to interpret font sizes coming from OGR feature style strings.

I would expect a font size in ground units to be scale-dependent 
inasmuch as a label would get smaller when you zoom out and bigger when 
you zoom in. I would expect a font size in pts, mm, inches, pixels, etc. 
to be scale-independent and to be drawn with that size at the current 
display scale.

The problem I have encountered is that the style tools do not seem to 
offer a way to get at the input units (OGRStyleValue::eUnit) of a given 
parameter. The classes only seem to offer a way to convert the values 
from their unexposed input units to some given output units.

Is there a way to get at that information? If not, would it make sense 
to add a GetInputUnit(Param) method on the OGRStyleTool classes?
OGRSTUnitId GetInputUnit(OGRSTLabelParam eParam, GBool &bValueIsNull);

I have also considered trying to use SetInternalInputUnitFromParam to 
work around the problem at my level, but I cannot seem to get at the 
original parameter string as GetParmStr gives back a unit-converted string.

Thanks,
Andre

Any views or opinions expressed in this email are solely those of the 
author and do not necessarily represent those of the company. No binding 
contract will result from this email until such time as a written 
document is signed on behalf of the company.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130813/d3ef93ea/attachment.html>

From DCarreira at edia.pt  Tue Aug 13 06:55:03 2013
From: DCarreira at edia.pt (Duarte Carreira)
Date: Tue, 13 Aug 2013 13:55:03 +0000
Subject: [gdal-dev] create mask file only
Message-ID: <A2C5C1FEBB05AA41A13D4F312D5F1A882DF3F9B4@AMSPRD0710MB365.eurprd07.prod.outlook.com>

Is there any way to create a mask file from an rgba without creating anything else, just the .msk file?

Thanks,
Duarte






































Duarte Carreira
Diretor | Dep. Informa??o Geogr?fica e Cartografia

www.edia.pt<http://www.edia.pt>
www.alqueva.com.pt<http://www.alqueva.com.pt>
Tel. +351 284315100

[http://www.edia.pt/edia/images/edia_logo2.gif]<http://www.edia.pt>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130813/83b9489a/attachment.html>

From JPalmer at linz.govt.nz  Tue Aug 13 12:10:40 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Wed, 14 Aug 2013 07:10:40 +1200
Subject: [gdal-dev] QGIS hanging when opening a FileGDB on 64 bit Linux
In-Reply-To: <C6B695652D5E6B4597E90C5734C02426169D3D6DCE@prdlsmmsg01.ad.linz.govt.nz>
References: <C6B695652D5E6B4597E90C5734C02426169D3D6DC0@prdlsmmsg01.ad.linz.govt.nz>
	<C6B695652D5E6B4597E90C5734C02426169D3F131E@prdlsmmsg01.ad.linz.govt.nz>
	<201308130129.21803.even.rouault@mines-paris.org>
	<C6B695652D5E6B4597E90C5734C02426169D3F140E@prdlsmmsg01.ad.linz.govt.nz>,
	<1376378639.5209df0f08da3@imp.free.fr>,
	<C6B695652D5E6B4597E90C5734C02426169D3D6DCE@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <C6B695652D5E6B4597E90C5734C02426169D3D6DCF@prdlsmmsg01.ad.linz.govt.nz>

Hi Even.

I found the problem. I needed to do a make clean before rebuilding gdal. Now everything is working and QGIS can load FIleGDBs!

Any chance to get this change back-ported to 1.10 so QGIS 2.0 will work with FIleGDBs?

Thanks again for your help.

Cheers
Jeremy
________________________________________
From: Jeremy Palmer
Sent: Tuesday, 13 August 2013 9:50 p.m.
To: Even Rouault
Cc: 'gdal-dev at lists.osgeo.org'; 'qgis-developer at lists.osgeo.org'
Subject: RE: [gdal-dev] QGIS hanging when opening a FileGDB on 64 bit Linux

Nope I get a crash when opening now via OGRSFDriverRegistrar::Open.

back trace is here: https://gist.github.com/palmerj/6219582

called from here in QGIS: https://github.com/qgis/Quantum-GIS/blob/master/src/providers/ogr/qgsogrprovider.cpp#L305

________________________________________
From: Even Rouault [even.rouault at mines-paris.org]
Sent: Tuesday, 13 August 2013 7:23 p.m.
To: Jeremy Palmer
Cc: 'Even Rouault'; 'gdal-dev at lists.osgeo.org'; 'qgis-developer at lists.osgeo.org'
Subject: RE: [gdal-dev] QGIS hanging when opening a FileGDB on 64 bit Linux

Selon Jeremy Palmer <JPalmer at linz.govt.nz>:

> Wow Even - just amazing as always.
>
> Have you confirmed that you can no open a FileGDB in QGIS?

No, I didn't. I've tested with the OGR API that it solved the issue with the
following access pattern :

ds1 = ogr.Open(datasetname)
ds2 = ogr.Open(datasetname)
ds2 = None
ds1 = None

> I still get the
> freeze when using GDAL trunk, but maybe that now a QGIS problem.

Just to be sure that you are using the version with the fix, if you break with
gdb when it hangs, does it display FGdbDriver::Release() in the stack trace ?

>
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault at mines-paris.org]
> Sent: Tuesday, 13 August 2013 11:29 a.m.
> To: gdal-dev at lists.osgeo.org
> Cc: Jeremy Palmer; 'qgis-developer at lists.osgeo.org'
> Subject: Re: [gdal-dev] QGIS hanging when opening a FileGDB on 64 bit Linux
>
> Le lundi 12 ao?t 2013 22:12:11, Jeremy Palmer a ?crit :
> > Further to this I see that when you open a FIleGDB in QGIS 3 OGROpen
> > calls made to the same database before any OGR_DS_Destroy calls are
> > made. These open calls occur during the layer selection dialog, the
> > OGR provider construction, and the initialisation of the
> QgsOgrFeatureIterator.
> >
> > I'm guessing the fix for this should really be done at the Esri
> > library level, but because we have no control over this maybe
> > something can be done in the OGR library to reuse FileGDBAPI Geodatabase
> handles?
>
> Jeremy,
>
> I do think this is exactly the issue of
> http://forums.arcgis.com/threads/76527-CloseDatabase-hanging-on-64-bit-Lin
> ux- when-same-File-Geodatabase-opened-twice
>
> At least I reproduced it on my own PC. I've implemented a workaround in GDAL
> trunk for that issue that implements ref-counting of the FileGDBAPI Geodabase
> handle at OGR side : http://trac.osgeo.org/gdal/changeset/26307.
>
> Even
>
> >
> > Cheers,
> > Jeremy
> >
> > -----Original Message-----
> > From: Jeremy Palmer
> > Sent: Sunday, 11 August 2013 9:08 a.m.
> > To: qgis-developer at lists.osgeo.org
> > Subject: QGIS hanging when opening a FileGDB on 64 bit Linux
> >
> > Hi QGIS devs!
> >
> > Since the latest round of code changes (maybe over the last 2 months)
> > I can no longer open Esri FileGDB in QGIS. I can read the database and
> > QGIS prompts me from the FileGDB layers to add to the map, but when I
> > select the layer from this dialog QGIS just hangs. I did some
> > debugging and it seems to hang on the OGR_DS_Destroy call within
> > QgsOgrFeatureIterator::close(). Does anyone else have this problem?
> >
> > I'm running FileGDB SDK 1.3 and Ubuntu 12.04 64bit with QGIS master.
> > I've tested this with the OSGeo4W win32 qgis-dev package and I don't
> > get the problem.
> >
> > Could this be related to this issue:
> > http://forums.arcgis.com/threads/76527-CloseDatabase-hanging-on-64-bit
> > -Lin ux-when-same-File-Geodatabase-opened-twice
> >
> > ??
> >
> > Cheers,
> > Jeremy
> >
> > This message contains information, which is confidential and may be
> > subject to legal privilege. If you are not the intended recipient, you
> > must not peruse, use, disseminate, distribute or copy this message. If
> > you have received this message in error, please notify us immediately
> > (Phone 0800
> > 665 463 or info at linz.govt.nz) and destroy the original message. LINZ
> > accepts no responsibility for changes to this email, or for any
> > attachments, after its transmission from LINZ. Thank You.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
> This message contains information, which is confidential and may be subject
> to legal privilege. If you are not the intended recipient, you must not
> peruse, use, disseminate, distribute or copy this message. If you have
> received this message in error, please notify us immediately (Phone 0800 665
> 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no
> responsibility for changes to this email, or for any attachments, after its
> transmission from LINZ. Thank You.
>


This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From even.rouault at mines-paris.org  Tue Aug 13 12:57:00 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 13 Aug 2013 21:57:00 +0200
Subject: [gdal-dev] QGIS hanging when opening a FileGDB on 64 bit Linux
In-Reply-To: <C6B695652D5E6B4597E90C5734C02426169D3D6DCF@prdlsmmsg01.ad.linz.govt.nz>
References: <C6B695652D5E6B4597E90C5734C02426169D3D6DC0@prdlsmmsg01.ad.linz.govt.nz>
	<C6B695652D5E6B4597E90C5734C02426169D3D6DCE@prdlsmmsg01.ad.linz.govt.nz>
	<C6B695652D5E6B4597E90C5734C02426169D3D6DCF@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <201308132157.01063.even.rouault@mines-paris.org>

Le mardi 13 ao?t 2013 21:10:40, Jeremy Palmer a ?crit :
> Hi Even.
> 
> I found the problem. I needed to do a make clean before rebuilding gdal.
> Now everything is working and QGIS can load FIleGDBs!
> 
> Any chance to get this change back-ported to 1.10 so QGIS 2.0 will work
> with FIleGDBs?

I've just done that (although the changeset is a bit more substantial/risky 
than the usual fixes done in stable branch).

> 
> Thanks again for your help.
> 
> Cheers
> Jeremy
> ________________________________________
> From: Jeremy Palmer
> Sent: Tuesday, 13 August 2013 9:50 p.m.
> To: Even Rouault
> Cc: 'gdal-dev at lists.osgeo.org'; 'qgis-developer at lists.osgeo.org'
> Subject: RE: [gdal-dev] QGIS hanging when opening a FileGDB on 64 bit Linux
> 
> Nope I get a crash when opening now via OGRSFDriverRegistrar::Open.
> 
> back trace is here: https://gist.github.com/palmerj/6219582
> 
> called from here in QGIS:
> https://github.com/qgis/Quantum-GIS/blob/master/src/providers/ogr/qgsogrpr
> ovider.cpp#L305
> 
> ________________________________________
> From: Even Rouault [even.rouault at mines-paris.org]
> Sent: Tuesday, 13 August 2013 7:23 p.m.
> To: Jeremy Palmer
> Cc: 'Even Rouault'; 'gdal-dev at lists.osgeo.org';
> 'qgis-developer at lists.osgeo.org' Subject: RE: [gdal-dev] QGIS hanging when
> opening a FileGDB on 64 bit Linux
> 
> Selon Jeremy Palmer <JPalmer at linz.govt.nz>:
> > Wow Even - just amazing as always.
> > 
> > Have you confirmed that you can no open a FileGDB in QGIS?
> 
> No, I didn't. I've tested with the OGR API that it solved the issue with
> the following access pattern :
> 
> ds1 = ogr.Open(datasetname)
> ds2 = ogr.Open(datasetname)
> ds2 = None
> ds1 = None
> 
> > I still get the
> > freeze when using GDAL trunk, but maybe that now a QGIS problem.
> 
> Just to be sure that you are using the version with the fix, if you break
> with gdb when it hangs, does it display FGdbDriver::Release() in the stack
> trace ?
> 
> > -----Original Message-----
> > From: Even Rouault [mailto:even.rouault at mines-paris.org]
> > Sent: Tuesday, 13 August 2013 11:29 a.m.
> > To: gdal-dev at lists.osgeo.org
> > Cc: Jeremy Palmer; 'qgis-developer at lists.osgeo.org'
> > Subject: Re: [gdal-dev] QGIS hanging when opening a FileGDB on 64 bit
> > Linux
> > 
> > Le lundi 12 ao?t 2013 22:12:11, Jeremy Palmer a ?crit :
> > > Further to this I see that when you open a FIleGDB in QGIS 3 OGROpen
> > > calls made to the same database before any OGR_DS_Destroy calls are
> > > made. These open calls occur during the layer selection dialog, the
> > > OGR provider construction, and the initialisation of the
> > 
> > QgsOgrFeatureIterator.
> > 
> > > I'm guessing the fix for this should really be done at the Esri
> > > library level, but because we have no control over this maybe
> > > something can be done in the OGR library to reuse FileGDBAPI
> > > Geodatabase
> > 
> > handles?
> > 
> > Jeremy,
> > 
> > I do think this is exactly the issue of
> > http://forums.arcgis.com/threads/76527-CloseDatabase-hanging-on-64-bit-Li
> > n ux- when-same-File-Geodatabase-opened-twice
> > 
> > At least I reproduced it on my own PC. I've implemented a workaround in
> > GDAL trunk for that issue that implements ref-counting of the FileGDBAPI
> > Geodabase handle at OGR side :
> > http://trac.osgeo.org/gdal/changeset/26307.
> > 
> > Even
> > 
> > > Cheers,
> > > Jeremy
> > > 
> > > -----Original Message-----
> > > From: Jeremy Palmer
> > > Sent: Sunday, 11 August 2013 9:08 a.m.
> > > To: qgis-developer at lists.osgeo.org
> > > Subject: QGIS hanging when opening a FileGDB on 64 bit Linux
> > > 
> > > Hi QGIS devs!
> > > 
> > > Since the latest round of code changes (maybe over the last 2 months)
> > > I can no longer open Esri FileGDB in QGIS. I can read the database and
> > > QGIS prompts me from the FileGDB layers to add to the map, but when I
> > > select the layer from this dialog QGIS just hangs. I did some
> > > debugging and it seems to hang on the OGR_DS_Destroy call within
> > > QgsOgrFeatureIterator::close(). Does anyone else have this problem?
> > > 
> > > I'm running FileGDB SDK 1.3 and Ubuntu 12.04 64bit with QGIS master.
> > > I've tested this with the OSGeo4W win32 qgis-dev package and I don't
> > > get the problem.
> > > 
> > > Could this be related to this issue:
> > > http://forums.arcgis.com/threads/76527-CloseDatabase-hanging-on-64-bit
> > > -Lin ux-when-same-File-Geodatabase-opened-twice
> > > 
> > > ??
> > > 
> > > Cheers,
> > > Jeremy
> > > 
> > > This message contains information, which is confidential and may be
> > > subject to legal privilege. If you are not the intended recipient, you
> > > must not peruse, use, disseminate, distribute or copy this message. If
> > > you have received this message in error, please notify us immediately
> > > (Phone 0800
> > > 665 463 or info at linz.govt.nz) and destroy the original message. LINZ
> > > accepts no responsibility for changes to this email, or for any
> > > attachments, after its transmission from LINZ. Thank You.
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > --
> > Geospatial professional services
> > http://even.rouault.free.fr/services.html
> > 
> > This message contains information, which is confidential and may be
> > subject to legal privilege. If you are not the intended recipient, you
> > must not peruse, use, disseminate, distribute or copy this message. If
> > you have received this message in error, please notify us immediately
> > (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original
> > message. LINZ accepts no responsibility for changes to this email, or
> > for any attachments, after its transmission from LINZ. Thank You.
> 
> This message contains information, which is confidential and may be subject
> to legal privilege. If you are not the intended recipient, you must not
> peruse, use, disseminate, distribute or copy this message. If you have
> received this message in error, please notify us immediately (Phone 0800
> 665 463 or info at linz.govt.nz) and destroy the original message. LINZ
> accepts no responsibility for changes to this email, or for any
> attachments, after its transmission from LINZ. Thank You.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From JPalmer at linz.govt.nz  Tue Aug 13 13:04:38 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Wed, 14 Aug 2013 08:04:38 +1200
Subject: [gdal-dev] QGIS hanging when opening a FileGDB on 64 bit Linux
In-Reply-To: <201308132157.01063.even.rouault@mines-paris.org>
References: <C6B695652D5E6B4597E90C5734C02426169D3D6DC0@prdlsmmsg01.ad.linz.govt.nz>
	<C6B695652D5E6B4597E90C5734C02426169D3D6DCE@prdlsmmsg01.ad.linz.govt.nz>
	<C6B695652D5E6B4597E90C5734C02426169D3D6DCF@prdlsmmsg01.ad.linz.govt.nz>
	<201308132157.01063.even.rouault@mines-paris.org>
Message-ID: <C6B695652D5E6B4597E90C5734C02426169D3F1558@prdlsmmsg01.ad.linz.govt.nz>

>> Any chance to get this change back-ported to 1.10 so QGIS 2.0 will
>> work with FIleGDBs?

> I've just done that (although the changeset is a bit more substantial/risky than the usual fixes done in stable branch).

Thanks!

I see the QGIS dev team is looking to release 2.0 about the 7th of Sept. Is there a chance to release a GDAL/OGR 1.10 point release to coincide with this? I'm particularly interested in the OSGeo4W QGIS 2.0 package then being linked against the newer 1.10.X binary release.

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From even.rouault at mines-paris.org  Tue Aug 13 13:34:49 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 13 Aug 2013 22:34:49 +0200
Subject: [gdal-dev] GDAL 1.10.1 release schedule ? [Was Re: QGIS hanging
	when opening a FileGDB on 64 bit Linux]
Message-ID: <201308132234.49321.even.rouault@mines-paris.org>

Le mardi 13 ao?t 2013 22:04:38, Jeremy Palmer a ?crit :

> I see the QGIS dev team is looking to release 2.0 about the 7th of Sept. Is
> there a chance to release a GDAL/OGR 1.10 point release to coincide with
> this? I'm particularly interested in the OSGeo4W QGIS 2.0 package then
> being linked against the newer 1.10.X binary release.

I believe that the gdal dll name does not change in point releases, so I don't 
think there's a strong technical reason to sync' the releases for the QGIS 2.0 
binary to benefit from a GDAL 1.10.1 binary when if it is available, if QGIS is 
built against GDAL 1.10.0. That said, we could/should do a GDAL 1.10.X point 
release at some time, so that could be a teaser. Personnaly, I'm off the first 
week of september, so the release process should start soon...

~~~~~~~~~~~~

GDAL devs,

We have already 45 tickets fixed in 1.10 branch : 
http://trac.osgeo.org/gdal/query?status=closed&group=resolution&milestone=1.10.1
Do you have some other things you'd like to push in the 1.10 branch for 1.10.1 
? Perhaps we could cut a 1.10.1beta1 next week ? 

GDAL users,

if you have fixes they'd like to see in 1.10.1, then it would be time to speak 
up, but preferably with a ticket with an attached patch ;-)

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From a.amici at bopen.eu  Tue Aug 13 15:53:00 2013
From: a.amici at bopen.eu (Alessandro Amici)
Date: Wed, 14 Aug 2013 00:53:00 +0200
Subject: [gdal-dev] Accessing OnEarth TiledWMS fails with "This server no
 longer provides full WMS services!"
Message-ID: <520AB8CC.8080103@bopen.eu>


Until a few days ago I used the GDAL WMS driver described in 
http://www.gdal.org/frmt_wms.html to access the "Global SRTM Elevation" 
data (actual elevation in meters) distributed by the JPL OnEarth server.

I used the stock XML configuration file 
http://www.gdal.org/frmt_twms_srtm.xml but currently some of the 
services of OnEarth are being phased out and I started getting the 
following error: "ERROR 1: GDALWMS: The server returned exception: This 
server no longer provides full WMS services!"

OnEarth should still be serving TiledWMS data according to:

http://onearth.jpl.nasa.gov/tiled.html

and

http://onearth.jpl.nasa.gov/wms.cgi?request=GetCapabilities

but the old configuration file doesn't work anymore.

It would be nice if anybody familiar with the driver could have a look 
at the problem and update the published configuration file, otherwise it 
needs to be removed from the GDAL website as it is not usable at the moment.

Thanks,
Alessandro

-- 
CTO at B-Open Solutions - http://www.bopen.eu/

From nixanz at nixanz.com  Tue Aug 13 18:41:18 2013
From: nixanz at nixanz.com (Nik Sands)
Date: Wed, 14 Aug 2013 11:41:18 +1000
Subject: [gdal-dev] Cannot compile 1.10 for iOS due to missing crt_extern
In-Reply-To: <1376373975.5209ccd77fe35@imp.free.fr>
References: <EC6B7D33-AACB-4131-8C36-E8C4D72B706E@nixanz.com>
	<201308120812.17934.even.rouault@mines-paris.org>
	<2D87D9C9-695F-4B4A-A701-179168532CAB@nixanz.com>
	<89A64711-FB08-4948-BBAA-1F39DA21F86C@nixanz.com>
	<1376373975.5209ccd77fe35@imp.free.fr>
Message-ID: <43980D5A-C5D0-4E9C-9A95-41855E92E29F@nixanz.com>

No problem.  I've now logged these issues in GDAL Trac as two separate tickets (not sure if they should be in one ticket or two?):

	Ticket #5197
	Ticket #5198


On 13/08/2013, at 4:06 PM, Even Rouault <even.rouault at mines-paris.org> wrote:

> Selon Nik Sands <nixanz at nixanz.com>:
> 
>> PS.  I've got a work around for now...
>> 
>> I edited the file "ogr/ogrsf_frmts/vfk/vfkdatablock.cpp" and commented out
>> the lines that referenced "clock()", and the debug line which appears to be
>> all that was using it.
>> 
>> It then built OK.   :-)
>> 
>> I'm sure you guys can come up with a proper solution, but this did the job
>> for me for now.   :-)
> 
> Nick,
> 
> can you open a ticket in GDAL Trac about those 2 issues ?
> 
> Thanks,
> 
> Even
> 
>> 
>> Cheers,
>> Nik.
>> 
>> 
>> 
>> On 13/08/2013, at 10:16 AM, Nik Sands <nixanz at nixanz.com> wrote:
>> 
>>> Hi Even,
>>> 
>>> Your suggestion has helped a little, but I still can't compile for iOS
>> (device).  I'm getting the following at the end of the build output...
>>> 
>>> 
>>> libtool: compile:
>> 
> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++
>> -arch armv7 -pipe -Os -gdwarf-2 -isysroot
>> 
> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk
>> -mno-thumb -mthumb-interwork -Wall
>> -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/port
>> -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/gcore
>> -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/alg
>> -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/ogr
>> -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/ogr/ogrsf_frmts
>> -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/frmts -DOGR_ENABLED
>> -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/port -c commonutils.cpp
>> -o commonutils.o
>>> /bin/sh /Users/nsands/Documents/Nik/Development/gdal-1.10.0/libtool
>> 
> --mode=link	/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++
>> -arch armv7 -isysroot
>> 
> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk
>> gdalinfo.lo commonutils.lo
>> /Users/nsands/Documents/Nik/Development/gdal-1.10.0/libgdal.la -o gdalinfo
>>> libtool: link:
>> 
> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++
>> -arch armv7 -isysroot
>> 
> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk
>> gdalinfo.o commonutils.o -o gdalinfo
>> /Users/nsands/Documents/Nik/Development/gdal-1.10.0/.libs/libgdal.a -lsqlite3
>> -lz -lpthread -ldl -liconv -lxml2
>>> Undefined symbols for architecture armv7:
>>> "_clock$UNIX2003", referenced from:
>>>     IVFKDataBlock::LoadGeometry()       in libgdal.a(vfkdatablock.o)
>>> ld: symbol(s) not found for architecture armv7
>>> collect2: ld returned 1 exit status
>>> make[1]: *** [gdalinfo] Error 1
>>> make: *** [apps-target] Error 2
>>> 
>>> 
>>> How can I get this resolved?
>>> 
>>> Cheers,
>>> Nik.
>>> 
>>> 
>>> On 12/08/2013, at 4:12 PM, Even Rouault <even.rouault at mines-paris.org>
>> wrote:
>>> 
>>>> Le lundi 12 ao?t 2013 02:17:33, Nik Sands a ?crit :
>>>>> Hi list members,
>>>>> 
>>>>> I was able to build GDAL 1.9 for iOS, and I can build 1.10 for the iOS
>>>>> simulator, however I cannot compile GDAL 1.10 for the actual iOS
>>>>> (devices).  It appears that this is because crt_extern is not included in
>>>>> iOS.
>>>>> 
>>>>> The code that trips up the build is in 'cpl_spawn.cpp' and appears to be:
>>>>> 
>>>>> 	#ifdef __APPLE__
>>>>> 	#include <crt_externs.h>
>>>>> 
>>>>> The last few lines of the build output are below.
>>>>> 
>>>>> Is there some way that I can get GDAL 1.10 built for iOS?  I really need
>>>>> one of the changes that was included in this version.
>>>>> 
>>>>> Thanks in advance for any advice that you may be able to provide.
>>>> 
>>>> Nick,
>>>> 
>>>> Maybe you can try the patch at
>>>> https://github.com/joyent/libuv/pull/321#issuecomment-4155600 that has
>> very
>>>> similar code that the one in GDAL and report if it works for you so it can
>> get
>>>> integrated ?
>>>> 
>>>> Even
>>>> 
>>>>> 
>>>>> Cheers,
>>>>> Nik.
>>>>> 
>>>>> 
>>>>> libtool: compile:
>>>>> 
>> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Dev
>>>>> eloper/usr/bin/g++ -arch armv7 -pipe -Os -gdwarf-2 -isysroot
>>>>> 
>> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Dev
>>>>> eloper/SDKs/iPhoneOS6.1.sdk -mno-thumb -mthumb-interwork -Wall
>>>>> -DOGR_ENABLED -I/Users/nsands/Documents/Nik/Development/gdal-1.10.0/port
>>>>> -DHAVE_LIBZ -I/usr/include/libxml2 -DHAVE_LIBXML2 -c cpl_spawn.cpp -o
>>>>> cpl_spawn.o cpl_spawn.cpp:465:25: error: crt_externs.h: No such file or
>>>>> directory cpl_spawn.cpp: In function 'CPLSpawnedProcess*
>> CPLSpawnAsync(int
>>>>> (*)(CPL_FILE_HANDLE, CPL_FILE_HANDLE), const char* const*, int, int, int,
>>>>> char**)': cpl_spawn.cpp:727: error: '_NSGetEnviron' was not declared in
>>>>> this scope make[1]: *** [cpl_spawn.lo] Error 1
>>>>> make: *** [port-target] Error 2
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>> 
>>>> --
>>>> Geospatial professional services
>>>> http://even.rouault.free.fr/services.html
>>> 
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> 
> 
> 


From warmerdam at pobox.com  Tue Aug 13 18:59:38 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 13 Aug 2013 18:59:38 -0700
Subject: [gdal-dev] Motion: Commit Access for Kurt Schwehr
In-Reply-To: <CA+YzLBcA-AwoD8FeLt4C-erz_ybFAdTDOqBzdA2y_58_6i+OYA@mail.gmail.com>
References: <CA+YzLBcA-AwoD8FeLt4C-erz_ybFAdTDOqBzdA2y_58_6i+OYA@mail.gmail.com>
Message-ID: <CA+YzLBcubsvuMhqB+UroJysjc7vBD=rJZHUXZK849JZ6tcLGVQ@mail.gmail.com>

On Fri, Aug 9, 2013 at 2:41 PM, Frank Warmerdam <warmerdam at pobox.com> wrote:

> Motion: Commit Access to GDAL for Kurt Schwehr
>

I declare this motion passed with support from Daniel, Tamas, Even, Howard
and I.

Welcome abort Kurt!  I have svn enabled userid "goatbar" for the GDAL svn
group.  Please add yourself to the gdal/COMMITERS file.


>
> Kurt has been contributing some patches around maritime formats, and other
> aspects of GDAL.  He is also taking over my GDAL related responsibilities
> at Google, and I feel it would be helpful for him to have commit access to
> upstream various kinds of fixes smoothly.  I've personally worked with him
> on GDAL issues for several months now.
>
> Kurt, could you confirm to the list that you have read and will try to
> comply with:
>
>   http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start voting with:
>
> +1 Frank
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130813/7de4f274/attachment.html>

From schwehr at gmail.com  Tue Aug 13 19:14:28 2013
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 13 Aug 2013 19:14:28 -0700
Subject: [gdal-dev] Motion: Commit Access for Kurt Schwehr
In-Reply-To: <CA+YzLBcubsvuMhqB+UroJysjc7vBD=rJZHUXZK849JZ6tcLGVQ@mail.gmail.com>
References: <CA+YzLBcA-AwoD8FeLt4C-erz_ybFAdTDOqBzdA2y_58_6i+OYA@mail.gmail.com>
	<CA+YzLBcubsvuMhqB+UroJysjc7vBD=rJZHUXZK849JZ6tcLGVQ@mail.gmail.com>
Message-ID: <06FB1580-3740-448F-84FD-5A59326BFB02@gmail.com>

Thanks!

-kurt


On Aug 13, 2013, at 6:59 PM, Frank Warmerdam <warmerdam at pobox.com> wrote:

> 
> 
> 
> On Fri, Aug 9, 2013 at 2:41 PM, Frank Warmerdam <warmerdam at pobox.com> wrote:
> Motion: Commit Access to GDAL for Kurt Schwehr
> 
> I declare this motion passed with support from Daniel, Tamas, Even, Howard and I.
> 
> Welcome abort Kurt!  I have svn enabled userid "goatbar" for the GDAL svn group.  Please add yourself to the gdal/COMMITERS file. 
>  
> 
> Kurt has been contributing some patches around maritime formats, and other aspects of GDAL.  He is also taking over my GDAL related responsibilities at Google, and I feel it would be helpful for him to have commit access to upstream various kinds of fixes smoothly.  I've personally worked with him on GDAL issues for several months now.
> 
> Kurt, could you confirm to the list that you have read and will try to comply with:
> 
>   http://trac.osgeo.org/gdal/wiki/rfc3_commiters
> 
> I'll start voting with:
> 
> +1 Frank
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
> 
> 
> 
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130813/a0a2ef2d/attachment.html>

From yasinberber at gmail.com  Tue Aug 13 23:29:38 2013
From: yasinberber at gmail.com (=?ISO-8859-1?Q?Yasin_Sel=E7uk_Berber?=)
Date: Wed, 14 Aug 2013 09:29:38 +0300
Subject: [gdal-dev] what could be 7th parameter(scale factor) of "+towgs84"
 for this datum shift
Message-ID: <CA+h5NzMf2S431brReDGwSgC5m6k-CdJBNi_uRUi7sZTsxCZvsQ@mail.gmail.com>

hi. i have some data, with a special datum using a special ellipsoid. i
need to reproject this data in WGS84 datum. major and minor axis are known.
other than that, first 6 of its +towgs84 parameters are also known:  0,0,0
for translation and 0,0,0 for rotation.

In this situation, is it correct that what i need is: an ellipsoid
"warping" (datum shift) ? if yes, should i enter scale factor as "zero" for
a datum shift ? (all seven parameters "zero" ?)
Thanks.
-- 
Yasin
"Bismillah, her hayr?n ba??d?r."
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130814/5889ff8a/attachment.html>

From jukka.rahkonen at mmmtike.fi  Tue Aug 13 23:53:36 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 14 Aug 2013 06:53:36 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?GDAL_1=2E10=2E1_release_schedule_=3F_=5BWas_?=
	=?utf-8?q?Re=3A_QGIS_hanging=09when_opening_a_FileGDB_on_64_bit_Li?=
	=?utf-8?q?nux=5D?=
References: <201308132234.49321.even.rouault@mines-paris.org>
Message-ID: <loom.20130814T084444-563@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:


> GDAL users,
> 
> if you have fixes they'd like to see in 1.10.1, then it would be time to
speak 
> up, but preferably with a ticket with an attached patch 

I think there never was a ticket about adding support for reading the GML
variant of the National Land Survey of Finland. This was implemented in
http://trac.osgeo.org/gdal/changeset/26140

I suppose this enhancement will be included in 1.10.1 and in QGis 2.0 but I
would like to be sure. It might also be worth advertising MTK-GML support in
the GDAL release announcement.

-Jukka Rahkonen-



From even.rouault at mines-paris.org  Wed Aug 14 00:33:13 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 14 Aug 2013 09:33:13 +0200
Subject: [gdal-dev]
 =?iso-8859-1?q?GDAL_1=2E10=2E1_release_schedule_=3F_?=
 =?iso-8859-1?q?=5BWas_Re=3A_QGIS_hanging=09when_opening_a_FileGDB_on_64_b?=
 =?iso-8859-1?q?it_Linux=5D?=
In-Reply-To: <loom.20130814T084444-563@post.gmane.org>
References: <201308132234.49321.even.rouault@mines-paris.org>
	<loom.20130814T084444-563@post.gmane.org>
Message-ID: <201308140933.13601.even.rouault@mines-paris.org>

Le mercredi 14 ao?t 2013 08:53:36, Jukka Rahkonen a ?crit :
> Even Rouault <even.rouault <at> mines-paris.org> writes:
> > GDAL users,
> > 
> > if you have fixes they'd like to see in 1.10.1, then it would be time to
> 
> speak
> 
> > up, but preferably with a ticket with an attached patch
> 
> I think there never was a ticket about adding support for reading the GML
> variant of the National Land Survey of Finland. This was implemented in
> http://trac.osgeo.org/gdal/changeset/26140
> 
> I suppose this enhancement will be included in 1.10.1 and in QGis 2.0 but I
> would like to be sure. It might also be worth advertising MTK-GML support
> in the GDAL release announcement.

Hi Jukka,

this enhancement was done in trunk (GDAL 2.0), and not in the 1.10 branch that 
will be the starting point for 1.10.X. Looking at the size of the changeset, 
I'm a bit concerned about backporting it into the 1.10 branch as well.

Pending GDAL 2.0 release (don't ask me when ;-)),  binary builds tagged "-
development" at http://www.gisinternals.com/sdk/ can already be used to 
convert MTKGML to other formats.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jukka.rahkonen at mmmtike.fi  Wed Aug 14 00:40:05 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 14 Aug 2013 07:40:05 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?GDAL_1=2E10=2E1_release_schedule_=3F_=5BWas_?=
	=?utf-8?q?Re=3A_QGIS_hanging=09when_opening_a_FileGDB_on_64_bit_Li?=
	=?utf-8?q?nux=5D?=
References: <201308132234.49321.even.rouault@mines-paris.org>
	<loom.20130814T084444-563@post.gmane.org>
	<201308140933.13601.even.rouault@mines-paris.org>
Message-ID: <loom.20130814T093402-284@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> Le mercredi 14 ao?t 2013 08:53:36, Jukka Rahkonen a ?crit :
> > Even Rouault <even.rouault <at> mines-paris.org> writes:
> > > GDAL users,
> > > 
> > > if you have fixes they'd like to see in 1.10.1, then it would be time to
> > 
> > speak
> > 
> > > up, but preferably with a ticket with an attached patch
> > 
> > I think there never was a ticket about adding support for reading the GML
> > variant of the National Land Survey of Finland. This was implemented in
> > http://trac.osgeo.org/gdal/changeset/26140
> > 
> > I suppose this enhancement will be included in 1.10.1 and in QGis 2.0 but I
> > would like to be sure. It might also be worth advertising MTK-GML support
> > in the GDAL release announcement.
> 
> Hi Jukka,
> 
> this enhancement was done in trunk (GDAL 2.0), and not in the 1.10 branch
that 
> will be the starting point for 1.10.X. Looking at the size of the changeset, 
> I'm a bit concerned about backporting it into the 1.10 branch as well.
> 
> Pending GDAL 2.0 release (don't ask me when ),  binary builds tagged "-
> development" at http://www.gisinternals.com/sdk/ can already be used to 
> convert MTKGML to other formats.


Hi Even,

Ok, this is understandable but a bit sad for the Finnish QGis users because
it seems to be a huge job to build QGis with updated GDAL version, at least
for Windows. But no worry, command line GDAL from trunk is easy to acquire
and suits well for most MTKGML users.

-Jukka-
 
> Even
> 





From landa.martin at gmail.com  Wed Aug 14 02:46:57 2013
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 14 Aug 2013 11:46:57 +0200
Subject: [gdal-dev] gdal - grass 7 (conf)
Message-ID: <CA+Ei1OcUiFaRQo4-htPKB3Z3OUN3sjn6Pqhwpy=WVdCwQ1j_Ow@mail.gmail.com>

Hi all,

I fixed compilation issues related to GRASS 7 in r26318. There are
some modifications in `configure` script [1] which I haven't committed
yet.

Is it ok if I generate `configure` script using `autoconf` (having
version 2.69) and commit the change together with `configure.in`?

Thanks for reply in advance. Martin

-- 
Martin Landa <landa.martin gmail.com> * http://geo.fsv.cvut.cz/~landa
-------------- next part --------------
A non-text attachment was scrubbed...
Name: grass-conf.diff
Type: application/octet-stream
Size: 1808 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130814/78adb75f/attachment-0001.obj>

From even.rouault at mines-paris.org  Wed Aug 14 03:02:23 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 14 Aug 2013 12:02:23 +0200
Subject: [gdal-dev] gdal - grass 7 (conf)
In-Reply-To: <CA+Ei1OcUiFaRQo4-htPKB3Z3OUN3sjn6Pqhwpy=WVdCwQ1j_Ow@mail.gmail.com>
References: <CA+Ei1OcUiFaRQo4-htPKB3Z3OUN3sjn6Pqhwpy=WVdCwQ1j_Ow@mail.gmail.com>
Message-ID: <201308141202.23376.even.rouault@mines-paris.org>

Hi Martin,
> 
> I fixed compilation issues related to GRASS 7 in r26318. There are
> some modifications in `configure` script [1] which I haven't committed
> yet.

Cool.  Just a question. I see $(PG_INC) in the GNUmakefile : just curious why 
it is needed ?

> 
> Is it ok if I generate `configure` script using `autoconf` (having
> version 2.69) and commit the change together with `configure.in`?

Yes please do so. I've just regenerated configure from the current configure.in 
with autoconf 2.69, and committed it (r26319), so that your commit doesn't mix 
autoconf version upgrade and your changes.

Even
-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From landa.martin at gmail.com  Wed Aug 14 04:54:52 2013
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 14 Aug 2013 13:54:52 +0200
Subject: [gdal-dev] gdal - grass 7 (conf)
In-Reply-To: <201308141202.23376.even.rouault@mines-paris.org>
References: <CA+Ei1OcUiFaRQo4-htPKB3Z3OUN3sjn6Pqhwpy=WVdCwQ1j_Ow@mail.gmail.com>
	<201308141202.23376.even.rouault@mines-paris.org>
Message-ID: <CA+Ei1OffNfW6hffvRkswPG7kSF_P8-x6k7BJKgN-fMWipDw2yw@mail.gmail.com>

Hi Even,

2013/8/14 Even Rouault <even.rouault at mines-paris.org>:
>> I fixed compilation issues related to GRASS 7 in r26318. There are
>> some modifications in `configure` script [1] which I haven't committed
>> yet.
>
> Cool.  Just a question. I see $(PG_INC) in the GNUmakefile : just curious why
> it is needed ?
>
>>
>> Is it ok if I generate `configure` script using `autoconf` (having
>> version 2.69) and commit the change together with `configure.in`?
>
> Yes please do so. I've just regenerated configure from the current configure.in
> with autoconf 2.69, and committed it (r26319), so that your commit doesn't mix
> autoconf version upgrade and your changes.

thanks a lot, applied in r26320. Martin

-- 
Martin Landa <landa.martin gmail.com> * http://geo.fsv.cvut.cz/~landa

From treaves at silverfieldstech.com  Wed Aug 14 05:24:56 2013
From: treaves at silverfieldstech.com (Reaves, Timothy)
Date: Wed, 14 Aug 2013 08:24:56 -0400
Subject: [gdal-dev] Issue reprojecting geo tiff
Message-ID: <CALF0saRT4CN5HJ232tLZJ6xmnBjLk+rS6rkbQun9YW6DufEfLQ@mail.gmail.com>

I'm using GDAL 1.10.0, released 2013/04/24 .  I am playing with TileMill,
and want to add USGS topo maps. These topo maps are geo PDF.  I'm following
along one of their documents, and the first thing I do is convert the PDF
to TIFF.

gdal_translate -of GTiff -co "TILED=YES" -co "TFW=YES"
PA_Tionesta_20130621_TM_geo.pdf PA_Tionesta_20130621_TM_geo.tiff
ERROR 1: Couldn't find group for reference to set OFF
Input file size is 13652, 17403
0...10...20...30...40...50...60...70...80...90...100 - done.

I do not like the ERROR; that should mean that the conversion failed;
however, and output TIFF is generated.  So I use it.

The next step is the re-translation:

gdalwarp -s_srs EPSG:4269 -t_srs EPSG:3785 -r bilinear
PA_Tionesta_20130621_TM_geo.tiff PA_Tionesta_20130621_TM_geo_3785.tiff
ERROR 1: Too many points (10201 out of 10201) failed to transform,
unable to compute output bounds.

This ERROR does not create output.

Now, in my playing around, I have two PDF's I'm wanting to add.  This one,
for Tionesta, PA, and one for Lodi, OH.  In looking at the two PDF's there
are obviously differences between the two.  The one for Lodi is from 2010,
and is more what I am used to seeing as a USGS topo map; a satalite image
with drawing on it for elevation,etc.  The one for Tionesta looks to be
brand new, from 2013/06, and looks different.  It has several layers in it
where shading is done, etc.  So I tried that one too.  It does not produce
the first error, but does the second.

I've found only two examples of doing this on the web, and I'm doing it the
same as both.  As I'd image USGS topo maps are played with a good deal (not
necessarily for TileMill), I'd assume I'm doing something wrong, and it's
not the software.  But...

Can anyone help me with this?  I'd appreciate it!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130814/72fbbdeb/attachment.html>

From landa.martin at gmail.com  Wed Aug 14 05:25:10 2013
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 14 Aug 2013 14:25:10 +0200
Subject: [gdal-dev] gdal - grass 7 (conf)
In-Reply-To: <201308141202.23376.even.rouault@mines-paris.org>
References: <CA+Ei1OcUiFaRQo4-htPKB3Z3OUN3sjn6Pqhwpy=WVdCwQ1j_Ow@mail.gmail.com>
	<201308141202.23376.even.rouault@mines-paris.org>
Message-ID: <CA+Ei1OdOYoGiSvNaipB_n7pqm0gc9GGu=HQv9w=agmUFA+rPhQ@mail.gmail.com>

Hi,

2013/8/14 Even Rouault <even.rouault at mines-paris.org>:
> Cool.  Just a question. I see $(PG_INC) in the GNUmakefile : just curious why
> it is needed ?

GRASS 7 vector libraries can be optionally compiled with native
PostGIS support [1].

Martin

[1] http://trac.osgeo.org/grass/wiki/Grass7/VectorLib/PostGISInterface

From even.rouault at mines-paris.org  Wed Aug 14 05:46:22 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 14 Aug 2013 14:46:22 +0200
Subject: [gdal-dev] gdal - grass 7 (conf)
In-Reply-To: <CA+Ei1OdOYoGiSvNaipB_n7pqm0gc9GGu=HQv9w=agmUFA+rPhQ@mail.gmail.com>
References: <CA+Ei1OcUiFaRQo4-htPKB3Z3OUN3sjn6Pqhwpy=WVdCwQ1j_Ow@mail.gmail.com>
	<201308141202.23376.even.rouault@mines-paris.org>
	<CA+Ei1OdOYoGiSvNaipB_n7pqm0gc9GGu=HQv9w=agmUFA+rPhQ@mail.gmail.com>
Message-ID: <201308141446.22107.even.rouault@mines-paris.org>

Le mercredi 14 ao?t 2013 14:25:10, Martin Landa a ?crit :
> Hi,
> 
> 2013/8/14 Even Rouault <even.rouault at mines-paris.org>:
> > Cool.  Just a question. I see $(PG_INC) in the GNUmakefile : just curious
> > why it is needed ?
> 
> GRASS 7 vector libraries can be optionally compiled with native
> PostGIS support [1].

And that also requires code using GRASS libraries to have Postgres include 
headers available ? If that's the case, $(PG_INC) might not be sufficient in 
case a GDAL build is done --without-pg where $(PG_INC) would expend to empty.

> 
> Martin
> 
> [1] http://trac.osgeo.org/grass/wiki/Grass7/VectorLib/PostGISInterface

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jukka.rahkonen at mmmtike.fi  Wed Aug 14 06:20:57 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 14 Aug 2013 13:20:57 +0000 (UTC)
Subject: [gdal-dev] Issue reprojecting geo tiff
References: <CALF0saRT4CN5HJ232tLZJ6xmnBjLk+rS6rkbQun9YW6DufEfLQ@mail.gmail.com>
Message-ID: <loom.20130814T151747-204@post.gmane.org>

Reaves, Timothy <treaves <at> silverfieldstech.com> writes:

> 
> 
> 
> I'm using GDAL 1.10.0, released 2013/04/24 .? I am playing with TileMill,
and want to add USGS topo maps. 

<snip>

> Can anyone help me with this?? I'd appreciate it!


What info does does gdalinfo give with

a) gdalinfo PA_Tionesta_20130621_TM_geo.pdf
b) gdalinfo PA_Tionesta_20130621_TM_geo.tiff

-Jukka Rahkonen-


From treaves at silverfieldstech.com  Wed Aug 14 06:23:16 2013
From: treaves at silverfieldstech.com (Reaves, Timothy)
Date: Wed, 14 Aug 2013 09:23:16 -0400
Subject: [gdal-dev] Issue reprojecting geo tiff
In-Reply-To: <loom.20130814T151747-204@post.gmane.org>
References: <CALF0saRT4CN5HJ232tLZJ6xmnBjLk+rS6rkbQun9YW6DufEfLQ@mail.gmail.com>
	<loom.20130814T151747-204@post.gmane.org>
Message-ID: <CALF0saSTrZ+yGvr3kh3gLdmr_B8iHJYUF2U6cF=bmAxWJ=m-kw@mail.gmail.com>

For PA, it gives:
Driver: PDF/Geospatial PDF
Files: PA_Tionesta_20130621_TM_geo.pdf
Size is 13652, 17403
Coordinate System is:
PROJCS["UTM Zone 17, Northern Hemisphere",
    GEOGCS["unknown",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.257222101],
            TOWGS84[0.9738,-1.9453,-0.5486,0,0,0,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-81],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
GeoTransform =
  623457.1927497694, 1.015672572042695, 0.01831264025401483
  4596843.380742616, 0.01831264025401483, -1.015672572042695
Metadata:
  AUTHOR=USGS National Geospatial Technical Operations Center
  CREATION_DATE=D:20130621093456Z
  CREATOR=ESRI ArcSOC 10.0.2.3200
  DPI=600.0975256151248
  KEYWORDS=Topographic, Transportation, Hydrography, Orthoimage, U.S.
National Grid, imageryBaseMapsEarthCover, Imagery and Base Maps, Geographic
Names Information System
  NEATLINE=POLYGON ((635951.851063535665162
4581600.695550612173975,625386.314008590881713
4581410.198254038579762,625133.892755070934072
4595410.2190180150792,635699.429810017696582
4595600.716314590536058,635951.851063535665162 4581600.695550612173975))
  SUBJECT=This image map depicts geographic features on the surface of the
earth.  It was created to provide a representation of accessible geospatial
data which is readily available to enhance the capability of Federal,
State, and local emergency responders for homeland security efforts.  This
image map is generated from selected National Map data holdings and other
cartographic data.
  TITLE=USGS 7.5-minute image map for Tionesta, Pennsylvania
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  623457.193, 4596843.381) ( 79d31'13.87"W, 41d30'49.37"N)
Lower Left  (  623775.888, 4579167.631) ( 79d31'13.16"W, 41d21'16.21"N)
Upper Right (  637323.155, 4597093.385) ( 79d21'15.69"W, 41d30'49.35"N)
Lower Right (  637641.850, 4579417.635) ( 79d21'16.44"W, 41d21'16.21"N)
Center      (  630549.521, 4588130.508) ( 79d26'14.79"W, 41d26' 2.90"N)
Band 1 Block=1024x1024 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA
Band 2 Block=1024x1024 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA
Band 3 Block=1024x1024 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA
Band 4 Block=1024x1024 Type=Byte, ColorInterp=Alpha


And for OH, it gives:
Driver: PDF/Geospatial PDF
Files: OH_Lodi_20100809_TM_geo.pdf
Size is 13869, 17680
Coordinate System is:
PROJCS["UTM Zone 17, Northern Hemisphere",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.257222101,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9108"]],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-81],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
GeoTransform =
  403892.2876185254, 0.9998662713660824, -0.01216630733279582
  4554552.367552815, -0.01216630733279582, -0.9998662713660824
Metadata:
  AUTHOR=USGS National Geospatial Technical Operations Center
  CREATION_DATE=D:20100809011028-06'00'
  CREATOR=ESRI ArcSOC 9.2.0.1324
  DPI=609.6432144373267
  KEYWORDS=Topographic, Transportation, Hydrography, Orthoimage, U.S.
National Grid, imageryBaseMapsEarthCover, Imagery and Base Maps, Geographic
Names Information System
  NEATLINE=POLYGON ((416074.52674049010966
4553140.300224657170475,415905.009541373059619
4539208.831523580476642,405377.212486990378238
4539336.933068925514817,405546.729686107486486
4553268.40177000220865,416074.52674049010966 4553140.300224657170475))
  SUBJECT=This image map depicts geographic features on the surface of the
earth.  It was created to provide a representation of accessible geospatial
data which is readily available to enhance the capability of Federal,
State, and local emergency responders for homeland security efforts.  This
image map is generated from selected National Map data holdings and other
cartographic data.
  TITLE=USGS 7.5-minute image map for Lodi OH
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  403892.288, 4554552.368) ( 82d 8'42.41"W, 41d 8'11.74"N)
Lower Left  (  403677.187, 4536874.732) ( 82d 8'41.69"W, 40d58'38.49"N)
Upper Right (  417759.433, 4554383.633) ( 81d58'47.61"W, 41d 8'11.75"N)
Lower Right (  417544.333, 4536705.997) ( 81d58'48.32"W, 40d58'38.49"N)
Center      (  410718.310, 4545629.182) ( 82d 3'45.01"W, 41d 3'25.23"N)
Band 1 Block=1024x1024 Type=Byte, ColorInterp=Red
Band 2 Block=1024x1024 Type=Byte, ColorInterp=Green
Band 3 Block=1024x1024 Type=Byte, ColorInterp=Blue


The PA may have issues, but, the OH should not have.


On Wed, Aug 14, 2013 at 9:20 AM, Jukka Rahkonen
<jukka.rahkonen at mmmtike.fi>wrote:

> Reaves, Timothy <treaves <at> silverfieldstech.com> writes:
>
> >
> >
> >
> > I'm using GDAL 1.10.0, released 2013/04/24 .  I am playing with TileMill,
> and want to add USGS topo maps.
>
> <snip>
>
> > Can anyone help me with this?  I'd appreciate it!
>
>
> What info does does gdalinfo give with
>
> a) gdalinfo PA_Tionesta_20130621_TM_geo.pdf
> b) gdalinfo PA_Tionesta_20130621_TM_geo.tiff
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130814/c279824c/attachment-0001.html>

From even.rouault at mines-paris.org  Wed Aug 14 06:34:46 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 14 Aug 2013 15:34:46 +0200
Subject: [gdal-dev] Issue reprojecting geo tiff
In-Reply-To: <CALF0saRT4CN5HJ232tLZJ6xmnBjLk+rS6rkbQun9YW6DufEfLQ@mail.gmail.com>
References: <CALF0saRT4CN5HJ232tLZJ6xmnBjLk+rS6rkbQun9YW6DufEfLQ@mail.gmail.com>
Message-ID: <201308141534.46765.even.rouault@mines-paris.org>

Le mercredi 14 ao?t 2013 14:24:56, Reaves, Timothy a ?crit :
> I'm using GDAL 1.10.0, released 2013/04/24 .  I am playing with TileMill,
> and want to add USGS topo maps. These topo maps are geo PDF.  I'm following
> along one of their documents, and the first thing I do is convert the PDF
> to TIFF.
> 
> gdal_translate -of GTiff -co "TILED=YES" -co "TFW=YES"
> PA_Tionesta_20130621_TM_geo.pdf PA_Tionesta_20130621_TM_geo.tiff
> ERROR 1: Couldn't find group for reference to set OFF
> Input file size is 13652, 17403
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> I do not like the ERROR; that should mean that the conversion failed;
> however, and output TIFF is generated.  So I use it.

You can probably ignore it, but I'm not 100% sure without investigation. This 
error seems to come from Poppler. Might be linked to code turning layers on. 
If this error has consequences, they will be layers not displayed in the PDF.

> 
> The next step is the re-translation:
> 
> gdalwarp -s_srs EPSG:4269 -t_srs EPSG:3785 -r bilinear
> PA_Tionesta_20130621_TM_geo.tiff PA_Tionesta_20130621_TM_geo_3785.tiff
> ERROR 1: Too many points (10201 out of 10201) failed to transform,
> unable to compute output bounds.
> 
> This ERROR does not create output.

Just drop the "-s_srs EPSG:4269". As the GeoPDF driver recognizes the input 
projection, it is completely useless to specify it. The error here is that the 
source data is in EPSG:26717 (UTM 17 / NAD 83), not EPSG:4269 (geodetic NAD 
83).


-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jukka.rahkonen at mmmtike.fi  Wed Aug 14 07:00:39 2013
From: jukka.rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Wed, 14 Aug 2013 14:00:39 +0000
Subject: [gdal-dev] Issue reprojecting geo tiff
Message-ID: <84446DEF76453C439E9E97E438E13A63022DF32A@suutari.haapa.mmm.fi>

Hi,

Gdalinfo says that the coordinate system is
["UTM Zone 17, Northern Hemisphere"

TFW file from another topo map I captured looks like the units are in meters as you can see

0.9995919650
-0.0204382296
-0.0204382296
-0.9995919650
339224.8572580147
4472388.0032269871

You were telling gdalwarp that the input is in EPSG:4269 which had degrees as units but it is not right. It may be EPSG:26917 but check it
http://spatialreference.org/ref/epsg/26917/

-Jukka Rahkonen-


L?hett?j?: Reaves, Timothy [mailto:treaves at silverfieldstech.com]
L?hetetty: 14. elokuuta 2013 16:23
Vastaanottaja: Rahkonen Jukka
Kopio: gdal-dev at lists.osgeo.org
Aihe: Re: [gdal-dev] Issue reprojecting geo tiff

For PA, it gives:
Driver: PDF/Geospatial PDF
Files: PA_Tionesta_20130621_TM_geo.pdf
Size is 13652, 17403
Coordinate System is:
PROJCS["UTM Zone 17, Northern Hemisphere",
    GEOGCS["unknown",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.257222101],
            TOWGS84[0.9738,-1.9453,-0.5486,0,0,0,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-81],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
GeoTransform =
  623457.1927497694, 1.015672572042695, 0.01831264025401483
  4596843.380742616, 0.01831264025401483, -1.015672572042695
Metadata:
  AUTHOR=USGS National Geospatial Technical Operations Center
  CREATION_DATE=D:20130621093456Z
  CREATOR=ESRI ArcSOC 10.0.2.3200
  DPI=600.0975256151248
  KEYWORDS=Topographic, Transportation, Hydrography, Orthoimage, U.S. National Grid, imageryBaseMapsEarthCover, Imagery and Base Maps, Geographic Names Information System
  NEATLINE=POLYGON ((635951.851063535665162 4581600.695550612173975,625386.314008590881713 4581410.198254038579762,625133.892755070934072 4595410.2190180150792,635699.429810017696582 4595600.716314590536058,635951.851063535665162 4581600.695550612173975))
  SUBJECT=This image map depicts geographic features on the surface of the earth.  It was created to provide a representation of accessible geospatial data which is readily available to enhance the capability of Federal, State, and local emergency responders for homeland security efforts.  This image map is generated from selected National Map data holdings and other cartographic data.
  TITLE=USGS 7.5-minute image map for Tionesta, Pennsylvania
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  623457.193, 4596843.381) ( 79d31'13.87"W, 41d30'49.37"N)
Lower Left  (  623775.888, 4579167.631) ( 79d31'13.16"W, 41d21'16.21"N)
Upper Right (  637323.155, 4597093.385) ( 79d21'15.69"W, 41d30'49.35"N)
Lower Right (  637641.850, 4579417.635) ( 79d21'16.44"W, 41d21'16.21"N)
Center      (  630549.521, 4588130.508) ( 79d26'14.79"W, 41d26' 2.90"N)
Band 1 Block=1024x1024 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA
Band 2 Block=1024x1024 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA
Band 3 Block=1024x1024 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA
Band 4 Block=1024x1024 Type=Byte, ColorInterp=Alpha

And for OH, it gives:
Driver: PDF/Geospatial PDF
Files: OH_Lodi_20100809_TM_geo.pdf
Size is 13869, 17680
Coordinate System is:
PROJCS["UTM Zone 17, Northern Hemisphere",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.257222101,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9108"]],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-81],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
GeoTransform =
  403892.2876185254, 0.9998662713660824, -0.01216630733279582
  4554552.367552815, -0.01216630733279582, -0.9998662713660824
Metadata:
  AUTHOR=USGS National Geospatial Technical Operations Center
  CREATION_DATE=D:20100809011028-06'00'
  CREATOR=ESRI ArcSOC 9.2.0.1324
  DPI=609.6432144373267
  KEYWORDS=Topographic, Transportation, Hydrography, Orthoimage, U.S. National Grid, imageryBaseMapsEarthCover, Imagery and Base Maps, Geographic Names Information System
  NEATLINE=POLYGON ((416074.52674049010966 4553140.300224657170475,415905.009541373059619 4539208.831523580476642,405377.212486990378238 4539336.933068925514817,405546.729686107486486 4553268.40177000220865,416074.52674049010966 4553140.300224657170475))
  SUBJECT=This image map depicts geographic features on the surface of the earth.  It was created to provide a representation of accessible geospatial data which is readily available to enhance the capability of Federal, State, and local emergency responders for homeland security efforts.  This image map is generated from selected National Map data holdings and other cartographic data.
  TITLE=USGS 7.5-minute image map for Lodi OH
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  403892.288, 4554552.368) ( 82d 8'42.41"W, 41d 8'11.74"N)
Lower Left  (  403677.187, 4536874.732) ( 82d 8'41.69"W, 40d58'38.49"N)
Upper Right (  417759.433, 4554383.633) ( 81d58'47.61"W, 41d 8'11.75"N)
Lower Right (  417544.333, 4536705.997) ( 81d58'48.32"W, 40d58'38.49"N)
Center      (  410718.310, 4545629.182) ( 82d 3'45.01"W, 41d 3'25.23"N)
Band 1 Block=1024x1024 Type=Byte, ColorInterp=Red
Band 2 Block=1024x1024 Type=Byte, ColorInterp=Green
Band 3 Block=1024x1024 Type=Byte, ColorInterp=Blue

The PA may have issues, but, the OH should not have.

On Wed, Aug 14, 2013 at 9:20 AM, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi<mailto:jukka.rahkonen at mmmtike.fi>> wrote:
Reaves, Timothy <treaves <at> silverfieldstech.com<http://silverfieldstech.com>> writes:

>
>
>
> I'm using GDAL 1.10.0, released 2013/04/24 .  I am playing with TileMill,
and want to add USGS topo maps.
<snip>

> Can anyone help me with this?  I'd appreciate it!

What info does does gdalinfo give with

a) gdalinfo PA_Tionesta_20130621_TM_geo.pdf
b) gdalinfo PA_Tionesta_20130621_TM_geo.tiff

-Jukka Rahkonen-

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130814/4c9003b4/attachment.html>

From treaves at silverfieldstech.com  Wed Aug 14 07:02:59 2013
From: treaves at silverfieldstech.com (Reaves, Timothy)
Date: Wed, 14 Aug 2013 10:02:59 -0400
Subject: [gdal-dev] Issue reprojecting geo tiff
In-Reply-To: <201308141534.46765.even.rouault@mines-paris.org>
References: <CALF0saRT4CN5HJ232tLZJ6xmnBjLk+rS6rkbQun9YW6DufEfLQ@mail.gmail.com>
	<201308141534.46765.even.rouault@mines-paris.org>
Message-ID: <CALF0saQJ0+Lk-eOim8cifGxT2fkuSrLJ1P1fz5hdgZ3JBvt2kw@mail.gmail.com>

Ah, leaving the -s_srs off does indeed work too; so much for following
examples! :)


On Wed, Aug 14, 2013 at 9:34 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le mercredi 14 ao?t 2013 14:24:56, Reaves, Timothy a ?crit :
> > I'm using GDAL 1.10.0, released 2013/04/24 .  I am playing with TileMill,
> > and want to add USGS topo maps. These topo maps are geo PDF.  I'm
> following
> > along one of their documents, and the first thing I do is convert the PDF
> > to TIFF.
> >
> > gdal_translate -of GTiff -co "TILED=YES" -co "TFW=YES"
> > PA_Tionesta_20130621_TM_geo.pdf PA_Tionesta_20130621_TM_geo.tiff
> > ERROR 1: Couldn't find group for reference to set OFF
> > Input file size is 13652, 17403
> > 0...10...20...30...40...50...60...70...80...90...100 - done.
> >
> > I do not like the ERROR; that should mean that the conversion failed;
> > however, and output TIFF is generated.  So I use it.
>
> You can probably ignore it, but I'm not 100% sure without investigation.
> This
> error seems to come from Poppler. Might be linked to code turning layers
> on.
> If this error has consequences, they will be layers not displayed in the
> PDF.
>
> >
> > The next step is the re-translation:
> >
> > gdalwarp -s_srs EPSG:4269 -t_srs EPSG:3785 -r bilinear
> > PA_Tionesta_20130621_TM_geo.tiff PA_Tionesta_20130621_TM_geo_3785.tiff
> > ERROR 1: Too many points (10201 out of 10201) failed to transform,
> > unable to compute output bounds.
> >
> > This ERROR does not create output.
>
> Just drop the "-s_srs EPSG:4269". As the GeoPDF driver recognizes the input
> projection, it is completely useless to specify it. The error here is that
> the
> source data is in EPSG:26717 (UTM 17 / NAD 83), not EPSG:4269 (geodetic NAD
> 83).
>
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130814/200ec446/attachment-0001.html>

From even.rouault at mines-paris.org  Thu Aug 15 05:57:16 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 15 Aug 2013 14:57:16 +0200
Subject: [gdal-dev] For GEOS support, GDAL trunk now requires GEOS >= 3.1.0
Message-ID: <201308151457.16585.even.rouault@mines-paris.org>

Hi,

Just to inform you that the requirement for GEOS support has jumped from GEOS 
2.2.0 to GEOS 3.1.0 (GEOS still being an optional, but recommanded, 
dependency).

Why ?

- Up to now, we used the global GEOS error and warning handler functions, 
which caused problems when mixing GDAL with other software using GEOS itself. 
For a recent example of such a problem : 
https://github.com/mapserver/mapserver/issues/4733

- Using the "new" GEOSXXXXX_r functions enable us to drop a global mutex in 
OGRGeometry::exportToGEOS(), which is always good.

I don't anticipate it will be an annoyance to anybody. GEOS 3.1.0 was released 
in March 2009, so people running a cutting-edge GDAL trunk should also have 
GEOS >= 3.1.0. I've also verified that the old-stable Ubuntu (Lucid 10.04) and 
Debian (squeeze) ship at least with GEOS 3.1.0, so that should be safe.

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From treaves at silverfieldstech.com  Thu Aug 15 06:25:47 2013
From: treaves at silverfieldstech.com (Reaves, Timothy)
Date: Thu, 15 Aug 2013 09:25:47 -0400
Subject: [gdal-dev] Can't combine crop_to_cutline & -t_srs ?
Message-ID: <CALF0saRmOU8RKrFmuRhe8pvGycLXnMaGbyMJowhMkOZKkmmdTQ@mail.gmail.com>

I'm converting some GeoPDF files to TIFF.  I want to crop, and I need to
re-project.  I can do one or the other, but, when I combine them, all I get
is a black output.

The base command is:
gdalwarp -multi -co "TILED=YES" infile.pdf outfile.tiff --config
GDAL_PDF_LAYERS_OFF "Map_Collar","Map_Frame.Projection_and_Grids"

Then, I use either:
-crop_to_cutline -cutline cutline.csv -overwrite
or
-t_srs EPSG:3785

Either of these works.  Just not both.  Are the two options mutually
exclusive?

As an aside, when cropping, how do I make the area outside of the image
transparent instead of black?

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130815/6912d7ba/attachment.html>

From even.rouault at mines-paris.org  Thu Aug 15 06:33:47 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 15 Aug 2013 15:33:47 +0200
Subject: [gdal-dev] Can't combine crop_to_cutline & -t_srs ?
In-Reply-To: <CALF0saRmOU8RKrFmuRhe8pvGycLXnMaGbyMJowhMkOZKkmmdTQ@mail.gmail.com>
References: <CALF0saRmOU8RKrFmuRhe8pvGycLXnMaGbyMJowhMkOZKkmmdTQ@mail.gmail.com>
Message-ID: <201308151533.47505.even.rouault@mines-paris.org>

Le jeudi 15 ao?t 2013 15:25:47, Reaves, Timothy a ?crit :
> I'm converting some GeoPDF files to TIFF.  I want to crop, and I need to
> re-project.  I can do one or the other, but, when I combine them, all I get
> is a black output.
> 
> The base command is:
> gdalwarp -multi -co "TILED=YES" infile.pdf outfile.tiff --config
> GDAL_PDF_LAYERS_OFF "Map_Collar","Map_Frame.Projection_and_Grids"
> 
> Then, I use either:
> -crop_to_cutline -cutline cutline.csv -overwrite
> or
> -t_srs EPSG:3785
> 
> Either of these works.  Just not both.  Are the two options mutually
> exclusive?

Thimothy,

According to the gdalwarp manual : "If the OGR layer containing the       
cutline features has no explicit SRS, the cutline features must be in the 
georeferenced units of the destination file.".

CSV have no explicit SRS, so to use -t_srs EPSG:3785, the CSV must be itself 
in EPSG:3785

So you could do a preprocessing step :

ogr2ogr -s_srs EPSG:XXXX -t_srs EPSG:3785 cutline_3785.csv cutline.csv

where XXXX is the EPSG code of the GeoPDF

And then use cutline_3785.csv as the value of the -cutline parameter of 
gdalwarp.

> 
> As an aside, when cropping, how do I make the area outside of the image
> transparent instead of black?

Try adding -dstalpha to your gdalwarp command line.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From treaves at silverfieldstech.com  Thu Aug 15 06:39:49 2013
From: treaves at silverfieldstech.com (Reaves, Timothy)
Date: Thu, 15 Aug 2013 09:39:49 -0400
Subject: [gdal-dev] Can't combine crop_to_cutline & -t_srs ?
In-Reply-To: <201308151533.47505.even.rouault@mines-paris.org>
References: <CALF0saRmOU8RKrFmuRhe8pvGycLXnMaGbyMJowhMkOZKkmmdTQ@mail.gmail.com>
	<201308151533.47505.even.rouault@mines-paris.org>
Message-ID: <CALF0saQmkgiOFTPEGv6-RNf4xUk_SS=Wz971XAx99uUQ57XbTQ@mail.gmail.com>

Gotcha.  Thanks for both pieces of info.


On Thu, Aug 15, 2013 at 9:33 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le jeudi 15 ao?t 2013 15:25:47, Reaves, Timothy a ?crit :
> > I'm converting some GeoPDF files to TIFF.  I want to crop, and I need to
> > re-project.  I can do one or the other, but, when I combine them, all I
> get
> > is a black output.
> >
> > The base command is:
> > gdalwarp -multi -co "TILED=YES" infile.pdf outfile.tiff --config
> > GDAL_PDF_LAYERS_OFF "Map_Collar","Map_Frame.Projection_and_Grids"
> >
> > Then, I use either:
> > -crop_to_cutline -cutline cutline.csv -overwrite
> > or
> > -t_srs EPSG:3785
> >
> > Either of these works.  Just not both.  Are the two options mutually
> > exclusive?
>
> Thimothy,
>
> According to the gdalwarp manual : "If the OGR layer containing the
> cutline features has no explicit SRS, the cutline features must be in the
> georeferenced units of the destination file.".
>
> CSV have no explicit SRS, so to use -t_srs EPSG:3785, the CSV must be
> itself
> in EPSG:3785
>
> So you could do a preprocessing step :
>
> ogr2ogr -s_srs EPSG:XXXX -t_srs EPSG:3785 cutline_3785.csv cutline.csv
>
> where XXXX is the EPSG code of the GeoPDF
>
> And then use cutline_3785.csv as the value of the -cutline parameter of
> gdalwarp.
>
> >
> > As an aside, when cropping, how do I make the area outside of the image
> > transparent instead of black?
>
> Try adding -dstalpha to your gdalwarp command line.
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130815/c5b376c1/attachment.html>

From treaves at silverfieldstech.com  Thu Aug 15 07:30:48 2013
From: treaves at silverfieldstech.com (Reaves, Timothy)
Date: Thu, 15 Aug 2013 10:30:48 -0400
Subject: [gdal-dev] issue with gdal.Open() on new USGS GeoPDF
Message-ID: <CALF0saQjp8rZ6+_o14ajXoMPncazZHKw6cJi6DZiFByUnJsimQ@mail.gmail.com>

I'm playing with USGS GeoPDF's.  It seems the newer ones - for some reason
- have 'unknown' for their GEOGCS value.

This is from a file a little over three years old, as output from gdalinfo:
Driver: PDF/Geospatial PDF
Files: OH_Lodi_20100809_TM_geo.pdf
Size is 13869, 17680
Coordinate System is:
PROJCS["UTM Zone 17, Northern Hemisphere",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
...

This is from a file just a little over a month old, as output from gdalinfo:
Driver: PDF/Geospatial PDF
Files: PA_Tionesta_20130621_TM_geo.pdf
Size is 13652, 17403
Coordinate System is:
PROJCS["UTM Zone 17, Northern Hemisphere",
    GEOGCS["unknown",
        DATUM["North_American_Datum_1983",
...

When I do most anything with the later PDF, I receive an error:
ERROR 1: Couldn't find group for reference to set OFF

For most things, the operation continues successfully.  However, I have a
Python script I am using that will pull out the NEATLINE for cropping
purposes.  It does exist in the metadata, but, the call to gdal.Open()
returns None, so my program fails on these newer PDF's.


I'm sure there is an issue on the USGS side, but, I wouldn't know where to
report it.  However, I think there is an issue here with gdal as well; gdal
correctly converts these files from the command line, so gdal is in fact
pulling out the correct information.  This would seem to me then that the
call to gdal.Open() should not fail.  It may have 'unknown' as the value
for the metadata key GEOGCS, but, the rest of the metadata should be
available.

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130815/aa7b82cf/attachment.html>

From even.rouault at mines-paris.org  Thu Aug 15 07:32:26 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 15 Aug 2013 16:32:26 +0200
Subject: [gdal-dev] issue with gdal.Open() on new USGS GeoPDF
In-Reply-To: <CALF0saQjp8rZ6+_o14ajXoMPncazZHKw6cJi6DZiFByUnJsimQ@mail.gmail.com>
References: <CALF0saQjp8rZ6+_o14ajXoMPncazZHKw6cJi6DZiFByUnJsimQ@mail.gmail.com>
Message-ID: <201308151632.26492.even.rouault@mines-paris.org>

Le jeudi 15 ao?t 2013 16:30:48, Reaves, Timothy a ?crit :
> I'm playing with USGS GeoPDF's.  It seems the newer ones - for some reason
> - have 'unknown' for their GEOGCS value.
> 
> This is from a file a little over three years old, as output from gdalinfo:
> Driver: PDF/Geospatial PDF
> Files: OH_Lodi_20100809_TM_geo.pdf
> Size is 13869, 17680
> Coordinate System is:
> PROJCS["UTM Zone 17, Northern Hemisphere",
>     GEOGCS["NAD83",
>         DATUM["North_American_Datum_1983",
> ...
> 
> This is from a file just a little over a month old, as output from
> gdalinfo: Driver: PDF/Geospatial PDF
> Files: PA_Tionesta_20130621_TM_geo.pdf
> Size is 13652, 17403
> Coordinate System is:
> PROJCS["UTM Zone 17, Northern Hemisphere",
>     GEOGCS["unknown",
>         DATUM["North_American_Datum_1983",
> ...
> 
> When I do most anything with the later PDF, I receive an error:
> ERROR 1: Couldn't find group for reference to set OFF
> 
> For most things, the operation continues successfully.  However, I have a
> Python script I am using that will pull out the NEATLINE for cropping
> purposes.  It does exist in the metadata, but, the call to gdal.Open()
> returns None, so my program fails on these newer PDF's.
> 
> 
> I'm sure there is an issue on the USGS side, but, I wouldn't know where to
> report it.  However, I think there is an issue here with gdal as well; gdal
> correctly converts these files from the command line, so gdal is in fact
> pulling out the correct information.  This would seem to me then that the
> call to gdal.Open() should not fail.  It may have 'unknown' as the value
> for the metadata key GEOGCS, but, the rest of the metadata should be
> available.

Could you point me to a URL of such a file so I can inspect ?

> 
> Thanks.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From treaves at silverfieldstech.com  Thu Aug 15 07:45:25 2013
From: treaves at silverfieldstech.com (Reaves, Timothy)
Date: Thu, 15 Aug 2013 10:45:25 -0400
Subject: [gdal-dev] issue with gdal.Open() on new USGS GeoPDF
In-Reply-To: <201308151632.26492.even.rouault@mines-paris.org>
References: <CALF0saQjp8rZ6+_o14ajXoMPncazZHKw6cJi6DZiFByUnJsimQ@mail.gmail.com>
	<201308151632.26492.even.rouault@mines-paris.org>
Message-ID: <CALF0saSMKnpf6_R9+mbM63=S-FsiZ3x2WyJ5zawTBksqQNYJtg@mail.gmail.com>

I sent the link off-list for the two files mentioned.

Thanks for looking into it.


On Thu, Aug 15, 2013 at 10:32 AM, Even Rouault <even.rouault at mines-paris.org
> wrote:

> Le jeudi 15 ao?t 2013 16:30:48, Reaves, Timothy a ?crit :
> > I'm playing with USGS GeoPDF's.  It seems the newer ones - for some
> reason
> > - have 'unknown' for their GEOGCS value.
> >
> > This is from a file a little over three years old, as output from
> gdalinfo:
> > Driver: PDF/Geospatial PDF
> > Files: OH_Lodi_20100809_TM_geo.pdf
> > Size is 13869, 17680
> > Coordinate System is:
> > PROJCS["UTM Zone 17, Northern Hemisphere",
> >     GEOGCS["NAD83",
> >         DATUM["North_American_Datum_1983",
> > ...
> >
> > This is from a file just a little over a month old, as output from
> > gdalinfo: Driver: PDF/Geospatial PDF
> > Files: PA_Tionesta_20130621_TM_geo.pdf
> > Size is 13652, 17403
> > Coordinate System is:
> > PROJCS["UTM Zone 17, Northern Hemisphere",
> >     GEOGCS["unknown",
> >         DATUM["North_American_Datum_1983",
> > ...
> >
> > When I do most anything with the later PDF, I receive an error:
> > ERROR 1: Couldn't find group for reference to set OFF
> >
> > For most things, the operation continues successfully.  However, I have a
> > Python script I am using that will pull out the NEATLINE for cropping
> > purposes.  It does exist in the metadata, but, the call to gdal.Open()
> > returns None, so my program fails on these newer PDF's.
> >
> >
> > I'm sure there is an issue on the USGS side, but, I wouldn't know where
> to
> > report it.  However, I think there is an issue here with gdal as well;
> gdal
> > correctly converts these files from the command line, so gdal is in fact
> > pulling out the correct information.  This would seem to me then that the
> > call to gdal.Open() should not fail.  It may have 'unknown' as the value
> > for the metadata key GEOGCS, but, the rest of the metadata should be
> > available.
>
> Could you point me to a URL of such a file so I can inspect ?
>
> >
> > Thanks.
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130815/c4c26fe4/attachment-0001.html>

From even.rouault at mines-paris.org  Thu Aug 15 08:30:16 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 15 Aug 2013 17:30:16 +0200
Subject: [gdal-dev] issue with gdal.Open() on new USGS GeoPDF
In-Reply-To: <CALF0saSMKnpf6_R9+mbM63=S-FsiZ3x2WyJ5zawTBksqQNYJtg@mail.gmail.com>
References: <CALF0saQjp8rZ6+_o14ajXoMPncazZHKw6cJi6DZiFByUnJsimQ@mail.gmail.com>
	<201308151632.26492.even.rouault@mines-paris.org>
	<CALF0saSMKnpf6_R9+mbM63=S-FsiZ3x2WyJ5zawTBksqQNYJtg@mail.gmail.com>
Message-ID: <201308151730.16139.even.rouault@mines-paris.org>

Le jeudi 15 ao?t 2013 16:45:25, Reaves, Timothy a ?crit :
> I sent the link off-list for the two files mentioned.
> 
> Thanks for looking into it.

ok, the error comes indeed from Poppler itself at opening time. I've 
implemented a workaround in http://trac.osgeo.org/gdal/ticket/5201 to avoid 
the error to be propagated to the Python bindings.

I've compared the pdf with the "Couldn't find group for reference to set OFF" 
error and the older ones that don't show that error

The newer ones miss the following PDF object :

     Item[0] : OC2
      Type = dictionary, Num = 640, Gen = 0
       Item[0] : OCGs
        Type = array
         Item[0]:
          Type = dictionary, Num = 46, Gen = 0
           Item[0] : Name = Orthoimage (string)
           Item[1] : Type = OCG (name)
         Item[1]:
          Type = dictionary, Num = 51, Gen = 0
           Item[0] : Name = Images (string)
           Item[1] : Type = OCG (name)
       Item[1] : P = AllOn (name)
       Item[2] : Type = OCMD (name)

I'm not 100% sure that this is the reason for Poppler to emit the error, but 
this could be a good track. I'm not sure if the problem is in the PDF file 
themselves not being conform to the PDF spec, or in Poppler itself.

As far as the "unknown" name of the GEOGCS object in the WKT of the SRS, this 
is not a problem at all. This is due to the GEOGCS having a custom definition 
with a TOWGS84 node. You can ignore that safely.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From lucena_ivan at hotmail.com  Thu Aug 15 09:53:46 2013
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Thu, 15 Aug 2013 12:53:46 -0400
Subject: [gdal-dev] Passing RAT between drivers, including VRT
In-Reply-To: <1376345357231-5072151.post@n6.nabble.com>
References: <4EFF8BB964547748A07CA32961810C041BD7D69D@SOM-TEAQASMAIL1.som.w2k.state.me.us>,
	<1376345357231-5072151.post@n6.nabble.com>
Message-ID: <BLU173-W27B474CA3D1198CF73577A90460@phx.gbl>







Hi folks,

I might be wrong, but it looks like the VRT driver is not supporting RAT at this moment (TRUNK).

Is that correct? 

A simple way to test it is by "gdal_translating" that file "i8u_c_i.img" from autotest to VRT:

$ gdal_translate -of vrt i8u_c_i.img vrt_i8u_c_i.vrt
$ gdalinfo vrt_i8u_c_i.vrt -noct

The RAT is not there.

That wouldn't be a big problem by itself, the real problem is that gdal_translate uses an internal VRT to support several options. And I am trying to fix that ticket: http://trac.osgeo.org/gdal/ticket/5200 and I noticed that when I use *-a_nodata* the GetDefaultRAT() it returns null.

Drivers that implement *file based* GDALPamDataset doesn't seems to have that problem because they don't need to call GetDefaultRAT(). Examples:

$ gdal_translate -of gtiif i8u_c_i.img gtiff_i8u_c_i.tif -a_nodata 0
$ gdal_translate -of gtiif i8u_c_i.img gtiff_i8u_c_i.tif

The RAT is transferred to the geotiff file in both instances.

Is that something we would like to get fix in VRT?

Best regards,

Ivan





 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130815/02be6b4e/attachment.html>

From even.rouault at mines-paris.org  Thu Aug 15 10:28:51 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 15 Aug 2013 19:28:51 +0200
Subject: [gdal-dev] Passing RAT between drivers, including VRT
In-Reply-To: <BLU173-W27B474CA3D1198CF73577A90460@phx.gbl>
References: <4EFF8BB964547748A07CA32961810C041BD7D69D@SOM-TEAQASMAIL1.som.w2k.state.me.us>
	<1376345357231-5072151.post@n6.nabble.com>
	<BLU173-W27B474CA3D1198CF73577A90460@phx.gbl>
Message-ID: <201308151928.51170.even.rouault@mines-paris.org>

Le jeudi 15 ao?t 2013 18:53:46, Ivan Lucena a ?crit :
> Hi folks,
> 
> I might be wrong, but it looks like the VRT driver is not supporting RAT at
> this moment (TRUNK).
> 
> Is that correct?

Hi Ivan,

yes, correct. See http://trac.osgeo.org/gdal/ticket/4903 where there's a patch 
pending for this support.

> 
> A simple way to test it is by "gdal_translating" that file "i8u_c_i.img"
> from autotest to VRT:
> 
> $ gdal_translate -of vrt i8u_c_i.img vrt_i8u_c_i.vrt
> $ gdalinfo vrt_i8u_c_i.vrt -noct
> 
> The RAT is not there.
> 
> That wouldn't be a big problem by itself, the real problem is that
> gdal_translate uses an internal VRT to support several options. And I am
> trying to fix that ticket: http://trac.osgeo.org/gdal/ticket/5200 and I
> noticed that when I use *-a_nodata* the GetDefaultRAT() it returns null.
> 
> Drivers that implement *file based* GDALPamDataset doesn't seems to have
> that problem because they don't need to call GetDefaultRAT(). Examples:
> 
> $ gdal_translate -of gtiif i8u_c_i.img gtiff_i8u_c_i.tif -a_nodata 0
> $ gdal_translate -of gtiif i8u_c_i.img gtiff_i8u_c_i.tif
> 
> The RAT is transferred to the geotiff file in both instances.

That's surprising !, and even not what I observe in my test. The RAT is 
transfered in the simple gdal_translate case (since the IMG dataset is 
directly passed as the source dataset so GetDefaultRAT() != NULL), but not in 
the -a_nodata 0 case since the source dataset is a VRT one, without RAT 
support.

> 
> Is that something we would like to get fix in VRT?

Likely, the patches in http://trac.osgeo.org/gdal/ticket/4903 would need to be 
rebased on trunk since RFC 40 has been implemented.

> 
> Best regards,
> 
> Ivan

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From lucena_ivan at hotmail.com  Thu Aug 15 11:04:51 2013
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Thu, 15 Aug 2013 14:04:51 -0400
Subject: [gdal-dev] Passing RAT between drivers, including VRT
In-Reply-To: <201308151928.51170.even.rouault@mines-paris.org>
References: <4EFF8BB964547748A07CA32961810C041BD7D69D@SOM-TEAQASMAIL1.som.w2k.state.me.us>
	<1376345357231-5072151.post@n6.nabble.com>
	<BLU173-W27B474CA3D1198CF73577A90460@phx.gbl>,
	<201308151928.51170.even.rouault@mines-paris.org>
Message-ID: <BLU173-W22F71BB4A90CB23B55F5F790460@phx.gbl>

Hi Even,

I double checked and I noticed that this is not true:

> > The RAT is transferred to the geotiff file in both instances.

I pass -a_nodata and got no RAT as you can see on the 
following log. 

Without -a_nodata the file gtiff_i8u_c_i.tif.aux.xml is create with the full RAT.

$ gdal_translate -of gtiff i8u_c_i.img gtiff_i8u_c_i.tif -a_nodata 0
Input file size is 233, 250
0...10...20...30...40...50...60...70...80...90...100 - done.

$ gdalinfo gtiff_i8u_c_i.tif -noct
Driver: GTiff/GeoTIFF
Files: gtiff_i8u_c_i.tif
Size is 233, 250
Coordinate System is `'
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  250.0)
Upper Right (  233.0,    0.0)
Lower Right (  233.0,  250.0)
Center      (  116.5,  125.0)
Band 1 Block=233x35 Type=Byte, ColorInterp=Palette
  Description = Band_1
  Min=0.000 Max=255.000
  Minimum=0.000, Maximum=255.000, Mean=118.537, StdDev=102.769
  NoData Value=0
  Metadata:
    LAYER_TYPE=thematic
    STATISTICS_HISTOBINVALUES=12603|1|0|0|45|1|0|0|0|0|656|177|0|0|5026|1062|0|0
|2|0|0|0|0|0|0|0|0|0|0|0|0|0|75|1|0|0|207|158|0|0|8|34|0|0|0|0|538|57|0|10|214|2
0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|1|31|0|0|9|625|67|0|0|118|738|117|3004|1499|49
1|187|1272|513|1|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|16|3|0|0|283|123|5|1931|835
|357|332|944|451|80|40|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|12|5|0|0|535|10
29|118|0|33|246|342|0|0|10|8|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|169|439|0
|0|6|990|329|0|0|120|295|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|164
|42|0|0|570|966|0|0|18|152|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|4
5|106|0|0|16|16517|
    STATISTICS_HISTOMAX=255
    STATISTICS_HISTOMIN=0
    STATISTICS_HISTONUMBINS=256
    STATISTICS_MAXIMUM=255
    STATISTICS_MEAN=118.53732188841
    STATISTICS_MEDIAN=85
    STATISTICS_MINIMUM=0
    STATISTICS_MODE=255
    STATISTICS_SKIPFACTORX=1
    STATISTICS_SKIPFACTORY=1
    STATISTICS_STDDEV=102.76909129768
  Color Table (RGB with 256 entries)

But for output HFA that is still true. I can pass
 -a_nodata or not and the RAT is always copied to the output. 

Try that:

$ gdal_translate -of hfa i8u_c_i.img hfa_i8u_c_i.img -a_nodata 0
$ gdal_translate -of hfa i8u_c_i.img hfa_i8u_c_i.img

Is that the same that you are getting over there?

Regards,

Ivan


> From: even.rouault at mines-paris.org
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Passing RAT between drivers, including VRT
> Date: Thu, 15 Aug 2013 19:28:51 +0200
> CC: lucena_ivan at hotmail.com; robert at coup.net.nz
> 
> Le jeudi 15 ao?t 2013 18:53:46, Ivan Lucena a ?crit :
> > Hi folks,
> > 
> > I might be wrong, but it looks like the VRT driver is not supporting RAT at
> > this moment (TRUNK).
> > 
> > Is that correct?
> 
> Hi Ivan,
> 
> yes, correct. See http://trac.osgeo.org/gdal/ticket/4903 where there's a patch 
> pending for this support.
> 
> > 
> > A simple way to test it is by "gdal_translating" that file "i8u_c_i.img"
> > from autotest to VRT:
> > 
> > $ gdal_translate -of vrt i8u_c_i.img vrt_i8u_c_i.vrt
> > $ gdalinfo vrt_i8u_c_i.vrt -noct
> > 
> > The RAT is not there.
> > 
> > That wouldn't be a big problem by itself, the real problem is that
> > gdal_translate uses an internal VRT to support several options. And I am
> > trying to fix that ticket: http://trac.osgeo.org/gdal/ticket/5200 and I
> > noticed that when I use *-a_nodata* the GetDefaultRAT() it returns null.
> > 
> > Drivers that implement *file based* GDALPamDataset doesn't seems to have
> > that problem because they don't need to call GetDefaultRAT(). Examples:
> > 
> > $ gdal_translate -of gtiif i8u_c_i.img gtiff_i8u_c_i.tif -a_nodata 0
> > $ gdal_translate -of gtiif i8u_c_i.img gtiff_i8u_c_i.tif
> > 
> > The RAT is transferred to the geotiff file in both instances.
> 
> That's surprising !, and even not what I observe in my test. The RAT is 
> transfered in the simple gdal_translate case (since the IMG dataset is 
> directly passed as the source dataset so GetDefaultRAT() != NULL), but not in 
> the -a_nodata 0 case since the source dataset is a VRT one, without RAT 
> support.
> 
> > 
> > Is that something we would like to get fix in VRT?
> 
> Likely, the patches in http://trac.osgeo.org/gdal/ticket/4903 would need to be 
> rebased on trunk since RFC 40 has been implemented.
> 
> > 
> > Best regards,
> > 
> > Ivan
> 
> -- 
> Geospatial professional services
> http://even.rouault.free.fr/services.html
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130815/832bd9c7/attachment.html>

From even.rouault at mines-paris.org  Thu Aug 15 11:45:59 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 15 Aug 2013 20:45:59 +0200
Subject: [gdal-dev] Passing RAT between drivers, including VRT
In-Reply-To: <BLU173-W22F71BB4A90CB23B55F5F790460@phx.gbl>
References: <4EFF8BB964547748A07CA32961810C041BD7D69D@SOM-TEAQASMAIL1.som.w2k.state.me.us>
	<201308151928.51170.even.rouault@mines-paris.org>
	<BLU173-W22F71BB4A90CB23B55F5F790460@phx.gbl>
Message-ID: <201308152046.00146.even.rouault@mines-paris.org>

Le jeudi 15 ao?t 2013 20:04:51, Ivan Lucena a ?crit :
> Hi Even,
> 
> I double checked and I noticed that this is not true:
> > > The RAT is transferred to the geotiff file in both instances.
> 
> I pass -a_nodata and got no RAT as you can see on the
> following log.
> 
> Without -a_nodata the file gtiff_i8u_c_i.tif.aux.xml is create with the
> full RAT.

Yes, that's exactly what I said in my previous email.

> 
> But for output HFA that is still true. I can pass
>  -a_nodata or not and the RAT is always copied to the output.
> 
> Try that:
> 
> $ gdal_translate -of hfa i8u_c_i.img hfa_i8u_c_i.img -a_nodata 0
> $ gdal_translate -of hfa i8u_c_i.img hfa_i8u_c_i.img
> 
> Is that the same that you are getting over there?

Well, this is different. The HFA driver is a bit particular in its behaviour 
and reports a RAT when there's a color table (in fact a color table is a 
particular type of RAT). So technically the RAT of the source IMG is not 
transferred into the target IMG in the -a_nodata 0 case, but the color table 
is.


-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From victor.gonzalez at geomati.co  Fri Aug 16 03:43:35 2013
From: victor.gonzalez at geomati.co (Victor Gonzalez)
Date: Fri, 16 Aug 2013 12:43:35 +0200
Subject: [gdal-dev] GDAL bindings for Java
Message-ID: <CAKMYNKm3RW4Z=WQvhbi5uXH48i_P1irfjcY1T5XLUmEPjtOidg@mail.gmail.com>

Hi all,

I'm V?ctor and I'm currently a developer for the gvSIG CE project [1],
which uses GDAL with a specific configuration [2] since long time ago for
raster data access.

Recently, one of our developments has been to implement SQLite data access
via OGR and to replace our previous custom Java bindings with the GDAL/OGR
official ones [3]. Thus, I had to compile GDAL and the Java bindings for
both Linux and Windows (using MinGW). On Linux it was easy and pretty
straightforward, but on Windows I had some troubles with the bindings.
Finally I managed to compile them successfully, but I had to add some steps
to your instructions [4], which are documented in the gvSIG CE wiki [5].

Finally, I also wanted to say that I couldn't use the pre-compiled binaries
from here [6]. I got UnsatisfiedLinkErrors and virtual machine crashes,
depending on the package I downloaded and my environment variables, so I
couldn't make it work.

I just wanted to share my experience. Maybe those problems are not specific
to my configuration/computer/whatever and some other people have the same
problems so you might want to update the doc. Or maybe some people can make
use of my compiled binaries. In any case, corrections, comments and ideas
are more than welcome.

Best regards,
V?ctor.

-----

[1] http://gvsigce.org
[2]
http://gvsigce.sourceforge.net/wiki/index.php/Compiling_the_C/C%2B%2B_support_libraries#GDAL
[3] http://trac.osgeo.org/gdal/wiki/GdalOgrInJava
[4]
http://trac.osgeo.org/gdal/wiki/GdalOgrInJavaBuildInstructionsUnix#Win32MinGW
[5]
http://gvsigce.sourceforge.net/wiki/index.php/Compiling_the_C/C%2B%2B_support_libraries#Windows_notes_5
[6] http://www.gisinternals.com/sdk/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130816/30b17cbf/attachment.html>

From aperi2007 at gmail.com  Fri Aug 16 11:43:56 2013
From: aperi2007 at gmail.com (Andrea Peri)
Date: Fri, 16 Aug 2013 20:43:56 +0200
Subject: [gdal-dev] For GEOS support,
	GDAL trunk now requires GEOS >= 3.1.0
Message-ID: <CABqTJk-poEkSvHK9mzryOA0BwH19S3etTgJ4s0j_iukeYZ3xMQ@mail.gmail.com>

Hi Rouault,

this will be available in the coming gdal 1.10.1 ?


-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130816/ee595b47/attachment.html>

From even.rouault at mines-paris.org  Fri Aug 16 11:46:20 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 16 Aug 2013 20:46:20 +0200
Subject: [gdal-dev] For GEOS support,
	GDAL trunk now requires GEOS >= 3.1.0
In-Reply-To: <CABqTJk-poEkSvHK9mzryOA0BwH19S3etTgJ4s0j_iukeYZ3xMQ@mail.gmail.com>
References: <CABqTJk-poEkSvHK9mzryOA0BwH19S3etTgJ4s0j_iukeYZ3xMQ@mail.gmail.com>
Message-ID: <201308162046.20587.even.rouault@mines-paris.org>

Le vendredi 16 ao?t 2013 20:43:56, Andrea Peri a ?crit :
> Hi Rouault,
> 
> this will be available in the coming gdal 1.10.1 ?

No, GDAL trunk is for GDAL 2.0


-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From JAMES.E.HOPPER at saic.com  Fri Aug 16 11:33:57 2013
From: JAMES.E.HOPPER at saic.com (jim hopper)
Date: Fri, 16 Aug 2013 14:33:57 -0400
Subject: [gdal-dev] Problem with gdal/swig/plugins
In-Reply-To: <mailman.47.1376593211.29753.gdal-dev@lists.osgeo.org>
Message-ID: <CE33E8D5.41B3D%james.e.hopper@saic.com>

Is there any limitations on which version of swig can be used with gdal.  We
are running into problems where our java code can?t find the gdal plugins.

15:35:27,055 WARNING [it.geosolutions.imageio.gdalframework]
(http--0.0.0.0-8442-3) Failed to get the specified GDAL Driver: DTED
Cause: java.lang.UnsatisfiedLinkError:
org.gdal.gdal.gdalJNI.SWIGDriverUpcast(J)J
This is not a problem unless you need to use the specified GDAL plugin. It
won't be enabled
15:35:27,076 WARNING [it.geosolutions.imageio.gdalframework]
(http--0.0.0.0-8442-3) Failed to get the specified GDAL Driver: JP2KAK
Cause: java.lang.UnsatisfiedLinkError:
org.gdal.gdal.gdalJNI.SWIGDriverUpcast(J)J
This is not a problem unless you need to use the specified GDAL plugin. It
won't be enabled



From even.rouault at mines-paris.org  Fri Aug 16 11:58:50 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 16 Aug 2013 20:58:50 +0200
Subject: [gdal-dev] Problem with gdal/swig/plugins
In-Reply-To: <CE33E8D5.41B3D%james.e.hopper@saic.com>
References: <CE33E8D5.41B3D%james.e.hopper@saic.com>
Message-ID: <201308162058.51294.even.rouault@mines-paris.org>

Le vendredi 16 ao?t 2013 20:33:57, jim hopper a ?crit :
> Is there any limitations on which version of swig can be used with gdal. 
> We are running into problems where our java code can?t find the gdal
> plugins.

When you ask a question about versions, it is good to say which version you 
are using...

They work fine with swig 1.3.40 and swig 2.0.8

Which one are you trying ?

> 
> 15:35:27,055 WARNING [it.geosolutions.imageio.gdalframework]
> (http--0.0.0.0-8442-3) Failed to get the specified GDAL Driver: DTED
> Cause: java.lang.UnsatisfiedLinkError:
> org.gdal.gdal.gdalJNI.SWIGDriverUpcast(J)J
> This is not a problem unless you need to use the specified GDAL plugin. It
> won't be enabled
> 15:35:27,076 WARNING [it.geosolutions.imageio.gdalframework]
> (http--0.0.0.0-8442-3) Failed to get the specified GDAL Driver: JP2KAK
> Cause: java.lang.UnsatisfiedLinkError:
> org.gdal.gdal.gdalJNI.SWIGDriverUpcast(J)J
> This is not a problem unless you need to use the specified GDAL plugin. It
> won't be enabled
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From JAMES.E.HOPPER at saic.com  Fri Aug 16 12:08:44 2013
From: JAMES.E.HOPPER at saic.com (jim hopper)
Date: Fri, 16 Aug 2013 15:08:44 -0400
Subject: [gdal-dev] Problem with gdal/swig/plugins
In-Reply-To: <201308162058.51294.even.rouault@mines-paris.org>
Message-ID: <CE33F0FC.41B57%james.e.hopper@saic.com>

Sorry I just passing this on for a coworker,
Gdal 1.9.2 and SWIG is 2.0.10

Thanks jim


On 8/16/13 2:58 PM, "Even Rouault" <even.rouault at mines-paris.org> wrote:

> Le vendredi 16 ao?t 2013 20:33:57, jim hopper a ?crit :
>> Is there any limitations on which version of swig can be used with gdal.
>> We are running into problems where our java code can?t find the gdal
>> plugins.
> 
> When you ask a question about versions, it is good to say which version you
> are using...
> 
> They work fine with swig 1.3.40 and swig 2.0.8
> 
> Which one are you trying ?
> 
>> 
>> 15:35:27,055 WARNING [it.geosolutions.imageio.gdalframework]
>> (http--0.0.0.0-8442-3) Failed to get the specified GDAL Driver: DTED
>> Cause: java.lang.UnsatisfiedLinkError:
>> org.gdal.gdal.gdalJNI.SWIGDriverUpcast(J)J
>> This is not a problem unless you need to use the specified GDAL plugin. It
>> won't be enabled
>> 15:35:27,076 WARNING [it.geosolutions.imageio.gdalframework]
>> (http--0.0.0.0-8442-3) Failed to get the specified GDAL Driver: JP2KAK
>> Cause: java.lang.UnsatisfiedLinkError:
>> org.gdal.gdal.gdalJNI.SWIGDriverUpcast(J)J
>> This is not a problem unless you need to use the specified GDAL plugin. It
>> won't be enabled
>> 
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

Jim  Hopper | 
Software Application Engineer IV | National Security Sector | Integrated
Systems Group
3745 Pentagon Blvd,
Beavercreek, OH 45431
Phone: 937-431-2336 | Mobile: 937-367-7252
James.e.hopper at saic.com <mailto:james.e.hopper at saic.com>
  
 

 
 
NATIONAL SECURITY |  HEALTH  |  ENGINEERING
Science Applications International Corporation
This email and any attachments to it are intended only for the identified
recipients. It may contain proprietary or otherwise legally protected
information of SAIC. Any unauthorized use or disclosure of this
communication is strictly prohibited. If you have received this
communication in error, please notify the sender and delete or otherwise
destroy the email and all attachments immediately.




From even.rouault at mines-paris.org  Fri Aug 16 12:17:06 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 16 Aug 2013 21:17:06 +0200
Subject: [gdal-dev] Problem with gdal/swig/plugins
In-Reply-To: <CE33F0FC.41B57%james.e.hopper@saic.com>
References: <CE33F0FC.41B57%james.e.hopper@saic.com>
Message-ID: <201308162117.06866.even.rouault@mines-paris.org>

Le vendredi 16 ao?t 2013 21:08:44, jim hopper a ?crit :
> Sorry I just passing this on for a coworker,
> Gdal 1.9.2 and SWIG is 2.0.10

I've just tested with SWIG 2.0.10 (and GDAL trunk, but the bindings have not 
fundamentally changed recently) and it works. I believe your issue is not 
related to SWIG but rather to a general issue with the .dll / .so not being 
accessible by Java. See 
http://trac.osgeo.org/gdal/wiki/GdalOgrInJavaBuildInstructions or 
http://trac.osgeo.org/gdal/wiki/GdalOgrInJavaBuildInstructionsUnix

> 
> Thanks jim
> 
> On 8/16/13 2:58 PM, "Even Rouault" <even.rouault at mines-paris.org> wrote:
> > Le vendredi 16 ao?t 2013 20:33:57, jim hopper a ?crit :
> >> Is there any limitations on which version of swig can be used with gdal.
> >> We are running into problems where our java code can?t find the gdal
> >> plugins.
> > 
> > When you ask a question about versions, it is good to say which version
> > you are using...
> > 
> > They work fine with swig 1.3.40 and swig 2.0.8
> > 
> > Which one are you trying ?
> > 
> >> 15:35:27,055 WARNING [it.geosolutions.imageio.gdalframework]
> >> (http--0.0.0.0-8442-3) Failed to get the specified GDAL Driver: DTED
> >> Cause: java.lang.UnsatisfiedLinkError:
> >> org.gdal.gdal.gdalJNI.SWIGDriverUpcast(J)J
> >> This is not a problem unless you need to use the specified GDAL plugin.
> >> It won't be enabled
> >> 15:35:27,076 WARNING [it.geosolutions.imageio.gdalframework]
> >> (http--0.0.0.0-8442-3) Failed to get the specified GDAL Driver: JP2KAK
> >> Cause: java.lang.UnsatisfiedLinkError:
> >> org.gdal.gdal.gdalJNI.SWIGDriverUpcast(J)J
> >> This is not a problem unless you need to use the specified GDAL plugin.
> >> It won't be enabled
> >> 
> >> 
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> Jim  Hopper |
> Software Application Engineer IV | National Security Sector | Integrated
> Systems Group
> 3745 Pentagon Blvd,
> Beavercreek, OH 45431
> Phone: 937-431-2336 | Mobile: 937-367-7252
> James.e.hopper at saic.com <mailto:james.e.hopper at saic.com>
> 
> 
> 
> 
> 
> NATIONAL SECURITY |  HEALTH  |  ENGINEERING
> Science Applications International Corporation
> This email and any attachments to it are intended only for the identified
> recipients. It may contain proprietary or otherwise legally protected
> information of SAIC. Any unauthorized use or disclosure of this
> communication is strictly prohibited. If you have received this
> communication in error, please notify the sender and delete or otherwise
> destroy the email and all attachments immediately.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From JAMES.E.HOPPER at saic.com  Fri Aug 16 12:22:46 2013
From: JAMES.E.HOPPER at saic.com (jim hopper)
Date: Fri, 16 Aug 2013 15:22:46 -0400
Subject: [gdal-dev] Problem with gdal/swig/plugins
In-Reply-To: <201308162117.06866.even.rouault@mines-paris.org>
Message-ID: <CE33F446.41B6C%james.e.hopper@saic.com>

Thanks! we will check that out


On 8/16/13 3:17 PM, "Even Rouault" <even.rouault at mines-paris.org> wrote:

> Le vendredi 16 ao?t 2013 21:08:44, jim hopper a ?crit :
>> Sorry I just passing this on for a coworker,
>> Gdal 1.9.2 and SWIG is 2.0.10
> 
> I've just tested with SWIG 2.0.10 (and GDAL trunk, but the bindings have not
> fundamentally changed recently) and it works. I believe your issue is not
> related to SWIG but rather to a general issue with the .dll / .so not being
> accessible by Java. See
> http://trac.osgeo.org/gdal/wiki/GdalOgrInJavaBuildInstructions or
> http://trac.osgeo.org/gdal/wiki/GdalOgrInJavaBuildInstructionsUnix
> 
>> 
>> Thanks jim
>> 
>> On 8/16/13 2:58 PM, "Even Rouault" <even.rouault at mines-paris.org> wrote:
>>> Le vendredi 16 ao?t 2013 20:33:57, jim hopper a ?crit :
>>>> Is there any limitations on which version of swig can be used with gdal.
>>>> We are running into problems where our java code can?t find the gdal
>>>> plugins.
>>> 
>>> When you ask a question about versions, it is good to say which version
>>> you are using...
>>> 
>>> They work fine with swig 1.3.40 and swig 2.0.8
>>> 
>>> Which one are you trying ?
>>> 
>>>> 15:35:27,055 WARNING [it.geosolutions.imageio.gdalframework]
>>>> (http--0.0.0.0-8442-3) Failed to get the specified GDAL Driver: DTED
>>>> Cause: java.lang.UnsatisfiedLinkError:
>>>> org.gdal.gdal.gdalJNI.SWIGDriverUpcast(J)J
>>>> This is not a problem unless you need to use the specified GDAL plugin.
>>>> It won't be enabled
>>>> 15:35:27,076 WARNING [it.geosolutions.imageio.gdalframework]
>>>> (http--0.0.0.0-8442-3) Failed to get the specified GDAL Driver: JP2KAK
>>>> Cause: java.lang.UnsatisfiedLinkError:
>>>> org.gdal.gdal.gdalJNI.SWIGDriverUpcast(J)J
>>>> This is not a problem unless you need to use the specified GDAL plugin.
>>>> It won't be enabled
>>>> 
>>>> 
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> Jim  Hopper |
>> Software Application Engineer IV | National Security Sector | Integrated
>> Systems Group
>> 3745 Pentagon Blvd,
>> Beavercreek, OH 45431
>> Phone: 937-431-2336 | Mobile: 937-367-7252
>> James.e.hopper at saic.com <mailto:james.e.hopper at saic.com>
>> 
>> 
>> 
>> 
>> 
>> NATIONAL SECURITY |  HEALTH  |  ENGINEERING
>> Science Applications International Corporation
>> This email and any attachments to it are intended only for the identified
>> recipients. It may contain proprietary or otherwise legally protected
>> information of SAIC. Any unauthorized use or disclosure of this
>> communication is strictly prohibited. If you have received this
>> communication in error, please notify the sender and delete or otherwise
>> destroy the email and all attachments immediately.

Jim  Hopper | 
Software Application Engineer IV | National Security Sector | Integrated
Systems Group
3745 Pentagon Blvd,
Beavercreek, OH 45431
Phone: 937-431-2336 | Mobile: 937-367-7252
James.e.hopper at saic.com <mailto:james.e.hopper at saic.com>
  
 

 
 
NATIONAL SECURITY |  HEALTH  |  ENGINEERING
Science Applications International Corporation
This email and any attachments to it are intended only for the identified
recipients. It may contain proprietary or otherwise legally protected
information of SAIC. Any unauthorized use or disclosure of this
communication is strictly prohibited. If you have received this
communication in error, please notify the sender and delete or otherwise
destroy the email and all attachments immediately.




From Alex.J.Kennedy at usace.army.mil  Fri Aug 16 14:41:00 2013
From: Alex.J.Kennedy at usace.army.mil (AlexUSACE)
Date: Fri, 16 Aug 2013 14:41:00 -0700 (PDT)
Subject: [gdal-dev] Feature Request: Round overview levels
Message-ID: <1376689260834-5072916.post@n6.nabble.com>

Hi devs-

I'd like to be able to round overviews via a flag in gdaladdo. This has
several benefits, but the primary one is the (zipped) file size.

For interpolated values like overviews, rounding doesn't actually hurt the
integrity of the data. Many of our terrain grids are from older surveying
data, and are at *best* accurate to the nearest foot. 8 digits of precision
for the overviews is just noise. We started rounding our data manually, and
we're seeing a 20%+ size reduction in many datasets. 

I dug through the source, and it seems like it would take relatively few
changes for someone who knew what they were doing. Frankly I'm not familiar
enough with the source to guarantee I wouldn't generate some sneaky bugs if
I did it myself.

Would anyone else use this feature? Of course we can go back and manually
edit the data after gdaladdo does its magic, but that requires a second pass
through our 5+ GB tiff files. Not a pretty solution. If anyone else has
faced a similar problem and found a decent solution, I'd love to hear it. At
the moment all of our development is in .Net. We're doing most of our GDAL
calls through the prebuilt exe's, though some of our code uses the C# swig
bindings.

Thanks,
Alex



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Feature-Request-Round-overview-levels-tp5072916.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From shubham at vizexperts.com  Sun Aug 18 23:35:09 2013
From: shubham at vizexperts.com (Shubham Dhabhai)
Date: Mon, 19 Aug 2013 12:05:09 +0530
Subject: [gdal-dev] regarding DGN v8
Message-ID: <000101ce9ca6$412b6430$c3822c90$@vizexperts.com>

Hi

I have to use  DGN v8  .OGR supports DGN v7 but not DGN v8 so  I was
wondering if there is some way to extend OGR so that it can support the DGN
v8 files. If not ,can anyone suggest some other library for DGN
v8(preferably open source) 

 

Regards

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130819/2d1dadc5/attachment.html>

From barthelemy at geovariances.com  Mon Aug 19 03:21:55 2013
From: barthelemy at geovariances.com (Olivier BARTHELEMY)
Date: Mon, 19 Aug 2013 12:21:55 +0200
Subject: [gdal-dev] LibPNG compatibility issue
Message-ID: <CAK9jXVU9sh3JgOF2UQAmsJmFh3OpYpTHJ8p8ggQPmp-+_w=BdQ@mail.gmail.com>

I'm having a strange error when Gdal uses libpng

Environment :
x86-64 linux
gdal 1.10
libpng 1.6.2

I am getting the following message :

GDAL (CPLE_NotSupported): The PNG driver failed to in
png_create_read_struct().
This may be due to version compatibility problems.

which is in this snippet in pngdataset.cpp:

#if LIBPNG_VER_MINOR >= 2 || LIBPNG_VER_MAJOR > 1
        int version = png_access_version_number();
        CPLError( CE_Failure, CPLE_NotSupported,
                  "The PNG driver failed to access libpng with version
'%s',"
                  " library is actually version '%d'.\n",
                  PNG_LIBPNG_VER_STRING, version);
#else
        CPLError( CE_Failure, CPLE_NotSupported,
                  "The PNG driver failed to in png_create_read_struct().\n"
                  "This may be due to version compatibility problems." );
#endif

If i understand correctly, if i get the second messsage, that is supposed
to mean that pngdataset.cpp was compiled with a libpng older than 1.2, or
that the macros don't exist (#if takes a value of 0 if a macro name is not
found)

I compiled my GDAl with libpng 1.6.2, and ldd properly tells me that it's
this version GDAL tries to link to

I think i don't get the first message because, at least for png 1.5 and 1.6
( and even the v1.2 shipped with gdal ), LIBPNG_VER_MINOR  and
LIBPNG_VER_MAJOR are not in png.h. Instead, there are PNG_LIBPNG_VER_MINOR
 and PNG_LIBPNG_VER_MAJOR. So the code should also try to look for those
macros

As to why i am reaching this code, i couldn't find if GDAL is compatible
with libPNG 1.6, could you confirm it? I successfully build with it on
windows and linux; it works on widowns (and might have previously worked on
linux, before i recompiled gdal to add the python module)

-- 
Olivier BARTHELEMY
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130819/d6ebae90/attachment.html>

From lauramail at iol.it  Mon Aug 19 03:25:20 2013
From: lauramail at iol.it (laura0)
Date: Mon, 19 Aug 2013 03:25:20 -0700 (PDT)
Subject: [gdal-dev] gdalwarp resampling
Message-ID: <1376907920317-5073114.post@n6.nabble.com>

Hi all,
I am going to use gdalwarp to resample a 800x800 wgs84 image but I did not
understand how to set output file resolution: gdalwarp description page says
to use the option -tr , but what does it mean with "in target georeferenced
units"?
This is my input image:

Size is 800, 800
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-115.730941999999999,-47.002102000000001)
Pixel Size = (0.039353161250000,-0.018197036250000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-115.7309420, -47.0021020) (115d43'51.39"W, 47d 0' 7.57"S)
Lower Left  (-115.7309420, -61.5597310) (115d43'51.39"W, 61d33'35.03"S)
Upper Right ( -84.2484130, -47.0021020) ( 84d14'54.29"W, 47d 0' 7.57"S)
Lower Right ( -84.2484130, -61.5597310) ( 84d14'54.29"W, 61d33'35.03"S)
Center      ( -99.9896775, -54.2809165) ( 99d59'22.84"W, 54d16'51.30"S)
Band 1 Block=800x2 Type=Float32, ColorInterp=Gray

I would like to resample it to a grid 12.5 km resolution and then (or in the
same time?) reproject into UTM (zone depending from coordinates), can anyone
help me? How should I express 12.5 km in the -tr option?
(the default resampling method nearest neighbor is fine for me).
Many thanks
Laura




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdalwarp-resampling-tp5073114.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Mon Aug 19 03:35:14 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 19 Aug 2013 12:35:14 +0200
Subject: [gdal-dev] LibPNG compatibility issue
In-Reply-To: <CAK9jXVU9sh3JgOF2UQAmsJmFh3OpYpTHJ8p8ggQPmp-+_w=BdQ@mail.gmail.com>
References: <CAK9jXVU9sh3JgOF2UQAmsJmFh3OpYpTHJ8p8ggQPmp-+_w=BdQ@mail.gmail.com>
Message-ID: <1376908514.5211f4e25012e@imp.free.fr>

Selon Olivier BARTHELEMY <barthelemy at geovariances.com>:

> I'm having a strange error when Gdal uses libpng
>
> Environment :
> x86-64 linux
> gdal 1.10
> libpng 1.6.2
>
> I am getting the following message :
>
> GDAL (CPLE_NotSupported): The PNG driver failed to in
> png_create_read_struct().
> This may be due to version compatibility problems.
>
> which is in this snippet in pngdataset.cpp:
>
> #if LIBPNG_VER_MINOR >= 2 || LIBPNG_VER_MAJOR > 1
>         int version = png_access_version_number();
>         CPLError( CE_Failure, CPLE_NotSupported,
>                   "The PNG driver failed to access libpng with version
> '%s',"
>                   " library is actually version '%d'.\n",
>                   PNG_LIBPNG_VER_STRING, version);
> #else
>         CPLError( CE_Failure, CPLE_NotSupported,
>                   "The PNG driver failed to in png_create_read_struct().\n"
>                   "This may be due to version compatibility problems." );
> #endif
>
> If i understand correctly, if i get the second messsage, that is supposed
> to mean that pngdataset.cpp was compiled with a libpng older than 1.2, or
> that the macros don't exist (#if takes a value of 0 if a macro name is not
> found)
>
> I compiled my GDAl with libpng 1.6.2, and ldd properly tells me that it's
> this version GDAL tries to link to
>
> I think i don't get the first message because, at least for png 1.5 and 1.6
> ( and even the v1.2 shipped with gdal ), LIBPNG_VER_MINOR  and
> LIBPNG_VER_MAJOR are not in png.h. Instead, there are PNG_LIBPNG_VER_MINOR
>  and PNG_LIBPNG_VER_MAJOR. So the code should also try to look for those
> macros

Yes, there's an issue in this code (could you file a ticket in GDAL Trac about
that ?). But the consequence is only on the error message, not on the error that
caused this code path to be reached.

My assumption is that you've built a first time pngdataset.cpp against the GDAL
internal libpng (1.2), and then configured later with your external libpng 1.6
but pngdataset.cpp didn't get recompiled. So at runtime there's a mismatch.

Try cleaning (or just "touch frmts/png/pngdataset.cpp") before rebuilding GDAL.

>
> As to why i am reaching this code, i couldn't find if GDAL is compatible
> with libPNG 1.6, could you confirm it? I successfully build with it on
> windows and linux; it works on widowns (and might have previously worked on
> linux, before i recompiled gdal to add the python module)
>
> --
> Olivier BARTHELEMY
>



From ml at interatlas.fr  Mon Aug 19 03:40:22 2013
From: ml at interatlas.fr (M. LATTES)
Date: Mon, 19 Aug 2013 12:40:22 +0200
Subject: [gdal-dev] gdalwarp resampling
In-Reply-To: <1376907920317-5073114.post@n6.nabble.com>
References: <1376907920317-5073114.post@n6.nabble.com>
Message-ID: <02bb01ce9cc8$81d6e6e0$8584b4a0$@fr>

Hi Laura,

As far I remember, it is in target srs unit.

So for an UTM output, (meter is the srs unit), so you may specify :

-tr 12500 12500 

(note that -tr is used with the X pixel size and Y pixel size)

Regards.

Mathieu LATTES
Directeur Technique
m.lattes at interatlas.fr
Tel : 05 32 09 03 22
http://www.interatlas.fr
http://www.urbimap.com




-----Message d'origine-----
De?: gdal-dev-bounces at lists.osgeo.org
[mailto:gdal-dev-bounces at lists.osgeo.org] De la part de laura0
Envoy??: lundi 19 ao?t 2013 12:25
??: gdal-dev at lists.osgeo.org
Objet?: [gdal-dev] gdalwarp resampling

Hi all,
I am going to use gdalwarp to resample a 800x800 wgs84 image but I did not
understand how to set output file resolution: gdalwarp description page says
to use the option -tr , but what does it mean with "in target georeferenced
units"?
This is my input image:

Size is 800, 800
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-115.730941999999999,-47.002102000000001)
Pixel Size = (0.039353161250000,-0.018197036250000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-115.7309420, -47.0021020) (115d43'51.39"W, 47d 0' 7.57"S)
Lower Left  (-115.7309420, -61.5597310) (115d43'51.39"W, 61d33'35.03"S)
Upper Right ( -84.2484130, -47.0021020) ( 84d14'54.29"W, 47d 0' 7.57"S)
Lower Right ( -84.2484130, -61.5597310) ( 84d14'54.29"W, 61d33'35.03"S)
Center      ( -99.9896775, -54.2809165) ( 99d59'22.84"W, 54d16'51.30"S)
Band 1 Block=800x2 Type=Float32, ColorInterp=Gray

I would like to resample it to a grid 12.5 km resolution and then (or in the
same time?) reproject into UTM (zone depending from coordinates), can anyone
help me? How should I express 12.5 km in the -tr option?
(the default resampling method nearest neighbor is fine for me).
Many thanks
Laura




--
View this message in context:
http://osgeo-org.1560.x6.nabble.com/gdalwarp-resampling-tp5073114.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


From barthelemy at geovariances.com  Mon Aug 19 07:22:51 2013
From: barthelemy at geovariances.com (Olivier BARTHELEMY)
Date: Mon, 19 Aug 2013 16:22:51 +0200
Subject: [gdal-dev] LibPNG compatibility issue
In-Reply-To: <1376908514.5211f4e25012e@imp.free.fr>
References: <CAK9jXVU9sh3JgOF2UQAmsJmFh3OpYpTHJ8p8ggQPmp-+_w=BdQ@mail.gmail.com>
	<1376908514.5211f4e25012e@imp.free.fr>
Message-ID: <CAK9jXVWJGK_J87tf0DVkDQ4QEQs77j1-62sHmw2F7A6ZwVKjKw@mail.gmail.com>

I submitted a ticket there http://trac.osgeo.org/gdal/ticket/5204 for the
macros.

About my issue, it turns out i had not added --with-png=...., so the
compile step used the system's libpng 1.2.10. But my LD_LIBRARY_PATH must
have pointed to the directory of my libpng1.6.16, so the code compiled with
1.2 headers was linked to use 1.6.2 library , which is what i saw with ldd


2013/8/19 Even Rouault <even.rouault at mines-paris.org>

> Selon Olivier BARTHELEMY <barthelemy at geovariances.com>:
>
> > I'm having a strange error when Gdal uses libpng
> >
> > Environment :
> > x86-64 linux
> > gdal 1.10
> > libpng 1.6.2
> >
> > I am getting the following message :
> >
> > GDAL (CPLE_NotSupported): The PNG driver failed to in
> > png_create_read_struct().
> > This may be due to version compatibility problems.
> >
> > which is in this snippet in pngdataset.cpp:
> >
> > #if LIBPNG_VER_MINOR >= 2 || LIBPNG_VER_MAJOR > 1
> >         int version = png_access_version_number();
> >         CPLError( CE_Failure, CPLE_NotSupported,
> >                   "The PNG driver failed to access libpng with version
> > '%s',"
> >                   " library is actually version '%d'.\n",
> >                   PNG_LIBPNG_VER_STRING, version);
> > #else
> >         CPLError( CE_Failure, CPLE_NotSupported,
> >                   "The PNG driver failed to in
> png_create_read_struct().\n"
> >                   "This may be due to version compatibility problems." );
> > #endif
> >
> > If i understand correctly, if i get the second messsage, that is supposed
> > to mean that pngdataset.cpp was compiled with a libpng older than 1.2, or
> > that the macros don't exist (#if takes a value of 0 if a macro name is
> not
> > found)
> >
> > I compiled my GDAl with libpng 1.6.2, and ldd properly tells me that it's
> > this version GDAL tries to link to
> >
> > I think i don't get the first message because, at least for png 1.5 and
> 1.6
> > ( and even the v1.2 shipped with gdal ), LIBPNG_VER_MINOR  and
> > LIBPNG_VER_MAJOR are not in png.h. Instead, there are
> PNG_LIBPNG_VER_MINOR
> >  and PNG_LIBPNG_VER_MAJOR. So the code should also try to look for those
> > macros
>
> Yes, there's an issue in this code (could you file a ticket in GDAL Trac
> about
> that ?). But the consequence is only on the error message, not on the
> error that
> caused this code path to be reached.
>
> My assumption is that you've built a first time pngdataset.cpp against the
> GDAL
> internal libpng (1.2), and then configured later with your external libpng
> 1.6
> but pngdataset.cpp didn't get recompiled. So at runtime there's a mismatch.
>
> Try cleaning (or just "touch frmts/png/pngdataset.cpp") before rebuilding
> GDAL.
>
> >
> > As to why i am reaching this code, i couldn't find if GDAL is compatible
> > with libPNG 1.6, could you confirm it? I successfully build with it on
> > windows and linux; it works on widowns (and might have previously worked
> on
> > linux, before i recompiled gdal to add the python module)
> >
> > --
> > Olivier BARTHELEMY
> >
>
>
>


-- 
Olivier BARTHELEMY
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130819/f608229e/attachment-0001.html>

From cgodkin at gmail.com  Mon Aug 19 10:48:52 2013
From: cgodkin at gmail.com (Carl Godkin)
Date: Mon, 19 Aug 2013 10:48:52 -0700
Subject: [gdal-dev] KMLSuperOverlay bounding box variant not supported
Message-ID: <CAE=8km=YcKCwmie4sg7ij-eiq4PgEg9Jf-xZ3hy31uUE7TMNbQ@mail.gmail.com>

Hi,

We obtained some KMLSuperOverlay datasets whose <GroundOverlay> bounding
box is defined neither with <LatLonBox> nor <LatLonAltBox> but instead with
the apparently recently added <gx:LatLonQuad> .

https://developers.google.com/kml/documentation/kmlreference?hl=en#gxlatlonquad

The function KmlSuperOverlayGetBoundingBox() doesn't deal with
<gx:LatLonQuad> and I don't see a simple way to suggest a patch to this
function to support it.  Has anyone a suggestion?

I could submit an enhancement ticket (along with a sample dataset) if it
would help.

Thanks very much,

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130819/0619bef4/attachment.html>

From even.rouault at mines-paris.org  Mon Aug 19 10:57:37 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 19 Aug 2013 19:57:37 +0200
Subject: [gdal-dev] KMLSuperOverlay bounding box variant not supported
In-Reply-To: <CAE=8km=YcKCwmie4sg7ij-eiq4PgEg9Jf-xZ3hy31uUE7TMNbQ@mail.gmail.com>
References: <CAE=8km=YcKCwmie4sg7ij-eiq4PgEg9Jf-xZ3hy31uUE7TMNbQ@mail.gmail.com>
Message-ID: <201308191957.37299.even.rouault@mines-paris.org>

Le lundi 19 ao?t 2013 19:48:52, Carl Godkin a ?crit :
> Hi,
> 
> We obtained some KMLSuperOverlay datasets whose <GroundOverlay> bounding
> box is defined neither with <LatLonBox> nor <LatLonAltBox> but instead with
> the apparently recently added <gx:LatLonQuad> .
> 
> https://developers.google.com/kml/documentation/kmlreference?hl=en#gxlatlon
> quad
> 
> The function KmlSuperOverlayGetBoundingBox() doesn't deal with
> <gx:LatLonQuad> and I don't see a simple way to suggest a patch to this
> function to support it.  Has anyone a suggestion?
> 
> I could submit an enhancement ticket (along with a sample dataset) if it
> would help.

If the coordinates in <gx:LatLonQuad> form a rectangle then it should not be 
very difficult to support, so yes please file a ticket. Otherwise I'm not sure 
what could be done...

> 
> Thanks very much,
> 
> carl

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From nhv at cape.com  Mon Aug 19 11:07:23 2013
From: nhv at cape.com (Norman Vine)
Date: Mon, 19 Aug 2013 14:07:23 -0400
Subject: [gdal-dev] KMLSuperOverlay bounding box variant not supported
In-Reply-To: <201308191957.37299.even.rouault@mines-paris.org>
References: <CAE=8km=YcKCwmie4sg7ij-eiq4PgEg9Jf-xZ3hy31uUE7TMNbQ@mail.gmail.com>
	<201308191957.37299.even.rouault@mines-paris.org>
Message-ID: <0B24902C-A6D7-4924-AA97-64A016CE23E0@cape.com>


On Aug 19, 2013, at 1:57 PM, Even Rouault <even.rouault at mines-paris.org> wrote:

> Le lundi 19 ao?t 2013 19:48:52, Carl Godkin a ?crit :
>> Hi,
>> 
>> We obtained some KMLSuperOverlay datasets whose <GroundOverlay> bounding
>> box is defined neither with <LatLonBox> nor <LatLonAltBox> but instead with
>> the apparently recently added <gx:LatLonQuad> .
>> 
>> https://developers.google.com/kml/documentation/kmlreference?hl=en#gxlatlon
>> quad
>> 
>> The function KmlSuperOverlayGetBoundingBox() doesn't deal with
>> <gx:LatLonQuad> and I don't see a simple way to suggest a patch to this
>> function to support it.  Has anyone a suggestion?
>> 
>> I could submit an enhancement ticket (along with a sample dataset) if it
>> would help.
> 
> If the coordinates in <gx:LatLonQuad> form a rectangle then it should not be 
> very difficult to support, so yes please file a ticket. Otherwise I'm not sure 
> what could be done?

according to
https://developers.google.com/kml/documentation/kmlreference#gxlatlonquad

this is not necessarily a rectangle


"""
Allows nonrectangular quadrilateral ground overlays.

Specifies the coordinates of the four corner points of a quadrilateral defining the overlay area. Exactly four coordinate tuples have to be provided, each consisting of floating point values for longitude and latitude. Insert a space between tuples. Do not include spaces within a tuple. The coordinates must be specified in counter-clockwise order with the first coordinate corresponding to the lower-left corner of the overlayed image. The shape described by these corners must be convex.
"""

> 
>> 
>> Thanks very much,
>> 
>> carl
> 
> -- 
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130819/c9cc4246/attachment.html>

From landa.martin at gmail.com  Mon Aug 19 13:29:59 2013
From: landa.martin at gmail.com (Martin Landa)
Date: Mon, 19 Aug 2013 22:29:59 +0200
Subject: [gdal-dev] gdal - grass 7 (conf)
In-Reply-To: <201308141446.22107.even.rouault@mines-paris.org>
References: <CA+Ei1OcUiFaRQo4-htPKB3Z3OUN3sjn6Pqhwpy=WVdCwQ1j_Ow@mail.gmail.com>
	<201308141202.23376.even.rouault@mines-paris.org>
	<CA+Ei1OdOYoGiSvNaipB_n7pqm0gc9GGu=HQv9w=agmUFA+rPhQ@mail.gmail.com>
	<201308141446.22107.even.rouault@mines-paris.org>
Message-ID: <CA+Ei1Od8hQjmEBOLToSe8VHRPtuDY+jESDVErhBX2atzV1qnBQ@mail.gmail.com>

Hi,

2013/8/14 Even Rouault <even.rouault at mines-paris.org>:
> Le mercredi 14 ao?t 2013 14:25:10, Martin Landa a ?crit :
>> Hi,
>>
>> 2013/8/14 Even Rouault <even.rouault at mines-paris.org>:
>> > Cool.  Just a question. I see $(PG_INC) in the GNUmakefile : just curious
>> > why it is needed ?
>>
>> GRASS 7 vector libraries can be optionally compiled with native
>> PostGIS support [1].
>
> And that also requires code using GRASS libraries to have Postgres include
> headers available ? If that's the case, $(PG_INC) might not be sufficient in
> case a GDAL build is done --without-pg where $(PG_INC) would expend to empty.

$(PG_INC) is needed just because GRASS headers includes it [1]. This
should be probably fixed on GRASS side(?).

Thanks, Martin

[1] http://trac.osgeo.org/grass/browser/grass/trunk/include/vect/dig_structs.h#L33

From bertelli at charta.acme.com  Mon Aug 19 22:55:35 2013
From: bertelli at charta.acme.com (Carlo A. Bertelli (Charta s.r.l.))
Date: Tue, 20 Aug 2013 07:55:35 +0200
Subject: [gdal-dev] regarding DGN v8
Message-ID: <CALc8-VLYCOA0-sx1hcXCcVtQCZUG=8Qzk16KJB+4Cjw91Dm_oA@mail.gmail.com>

Hello Shubham,
DGN v 8 is a completely different format; it's a derivative of Autodesk DWG
even if the dgn extension stays the same.
There are "open" libraries developed by Open Design Alliance (
http://www.opendesign.com). They are not really open source, they disclose
some information for developers and there are free (as in free beer)
libraries and converters/viewers.
Some true open source library has already been developed in java (for DWG -
see Orbis CAD), but I have never seen anything for DGN 8.
Sorry.
c



> Message: 1
> Date: Mon, 19 Aug 2013 12:05:09 +0530
> From: "Shubham Dhabhai" <shubham at vizexperts.com>
> To: <gdal-dev at lists.osgeo.org>
> Subject: [gdal-dev] regarding DGN v8
> Message-ID: <000101ce9ca6$412b6430$c3822c90$@vizexperts.com>
> Content-Type: text/plain; charset="us-ascii"
>
> Hi
>
> I have to use  DGN v8  .OGR supports DGN v7 but not DGN v8 so  I was
> wondering if there is some way to extend OGR so that it can support the DGN
> v8 files. If not ,can anyone suggest some other library for DGN
> v8(preferably open source)
>
>
>
> Regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130820/b8bbd80d/attachment.html>

From lauramail at iol.it  Tue Aug 20 00:27:01 2013
From: lauramail at iol.it (laura0)
Date: Tue, 20 Aug 2013 00:27:01 -0700 (PDT)
Subject: [gdal-dev] gdalwarp resampling
In-Reply-To: <02bb01ce9cc8$81d6e6e0$8584b4a0$@fr>
References: <1376907920317-5073114.post@n6.nabble.com>
	<02bb01ce9cc8$81d6e6e0$8584b4a0$@fr>
Message-ID: <1376983620996-5073276.post@n6.nabble.com>

Thank you Mathieu,
regards

Laura



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdalwarp-resampling-tp5073114p5073276.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From rsignell at usgs.gov  Wed Aug 21 03:47:50 2013
From: rsignell at usgs.gov (Signell, Richard)
Date: Wed, 21 Aug 2013 06:47:50 -0400
Subject: [gdal-dev] gdal_translate using a wms as input
In-Reply-To: <201304141810.53223.even.rouault@mines-paris.org>
References: <CABqTJk8SbFRuDKutBKG659RZ8UiVchgzMCY7bpDnE-YdpeCLqg@mail.gmail.com>
	<201304140040.16157.even.rouault@mines-paris.org>
	<CABqTJk-+u7gp9ksN6M5zduNHqtdN0MmucixYezgOk5-2EjGLfQ@mail.gmail.com>
	<201304141810.53223.even.rouault@mines-paris.org>
Message-ID: <CAFhraUwf+_WLaFvgwHgj=inh4LLg=eDNbWA24Gg+vDhm__SMAQ@mail.gmail.com>

I too am interested in trying to use gdal_translate with a WMS getmap
request, but using the approach suggested does not seem to preserve
the geospatial info:

rsignell at gam:~$ export GDAL_SKIP=WMS

rsignell at gam:~$ gdal_translate -of GTiff -co "TFW=YES"
"http://geoport.whoi.edu/

thredds/wms/bathy/gom15?LAYERS=topo&ELEVATION=0&TIME=2013-08-21T06%3A26%3A50Z&TR


ANSPARENT=true&STYLES=boxfill%2Frainbow&CRS=EPSG%3A4326&COLORSCALERANGE=-50%2C50


&NUMCOLORBANDS=64&LOGSCALE=false&SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&EXCEPT


IONS=application%2Fvnd.ogc.se_inimage&FORMAT=image%2Fpng&SRS=EPSG%3A4326&BBOX=-7


3.75,37.5,-69.5,41.75&WIDTH=256&HEIGHT=256" foo2.tif

Warning 6: A dataset opened by GDALOpenShared should have the same
filename (htt

p://geoport.whoi.edu/thredds/wms/bathy/gom15?LAYERS=topo&ELEVATION=0&TIME=2013-0


8-21T06%3A26%3A50Z&TRANSPARENT=true&STYLES=boxfill%2Frainbow&CRS=EPSG%3A4326&COL


ORSCALERANGE=-250%2C50&NUMCOLORBANDS=64&LOGSCALE=false&SERVICE=WMS&VERSION=1.1.1&


REQUEST=GetMap&EXCEPTIONS=application%2Fvnd.ogc.se_inimage&FORMAT=image%2Fpng&SR


S=EPSG%3A4326&BBOX=-73.75,37.5,-69.5,41.75&WIDTH=256&HEIGHT=256) and
description

(/vsimem/http_1/file.dat)
Input file size is 256, 256
0...10...20...30...40...50...60...70...80...90...100 - done.

rsignell at gam:~$ gdalinfo foo2.tif

Driver: GTiff/GeoTIFF
Files: foo2.tif
Size is 256, 256
Coordinate System is `'
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  256.0)
Upper Right (  256.0,    0.0)
Lower Right (  256.0,  256.0)
Center      (  128.0,  128.0)
Band 1 Block=256x32 Type=Byte, ColorInterp=Palette
  NoData Value=0


The only approach that I got working was passing the WMS request
params to gdal_translate again as shown here:

http://gis.stackexchange.com/questions/69188/converting-wms-getmap-request-to-geotiff

Thanks,
Rich


On Sun, Apr 14, 2013 at 12:10 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Le dimanche 14 avril 2013 13:17:30, Andrea Peri a ?crit :
>> Even, thx for response
>>
>> Perhaps I miss the real mean of the parameter -srcwin.
>>
>> I guess that setting -srcwin 0 0 377 283 for a wms image of
>> ...WIDTH=377&HEIGHT=283&...
>
> Ah, I didn't notice those parameters. Well, they will be ignored by the GDAL
> WMS driver. You can check by looking at gdalinfo :
>
> $ gdalinfo
> "WMS:http://www502.regione.toscana.it/cartografia/wmsraster/com.rt.wms.RTmap/wms?map=wmsofc&language=ita&&SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&BBOX=1671200.0,4680000.0,1672800.0,4681200.0&CRS=EPSG:3003&WIDTH=377&HEIGHT=283&LAYERS=rt_ofc.10k10&STYLES=&FORMAT=image/jpeg&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi:96&TRANSPARENT=TRUE"
> Driver: WMS/OGC Web Map Service
> Files: none associated
> Size is 1073741824, 805306368
>
> Actually, as your string is a full WMS GetMap request, you can directly do
> this :
>
> export GDAL_SKIP=WMS
> gdal_translate -of GTiff -co "TFW=YES" "http://...." output_01J31.tif
>
> Note the removal of "WMS:" prefix in front of the URL, and the GDAL_SKIP=WMS,
> since the WMS driver would also try to recognize the string as a description
> string of the WMS service, which you don't want. You just want the JPEG driver
> to recognize the image resulting of the GetMap query.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Dr. Richard P. Signell   (508) 457-2229
USGS, 384 Woods Hole Rd.
Woods Hole, MA 02543-1598

From even.rouault at mines-paris.org  Wed Aug 21 12:24:13 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 21 Aug 2013 21:24:13 +0200
Subject: [gdal-dev] GDAL 1.10.1 release schedule ? [Was Re: QGIS hanging
	when opening a FileGDB on 64 bit Linux]
In-Reply-To: <201308132234.49321.even.rouault@mines-paris.org>
References: <201308132234.49321.even.rouault@mines-paris.org>
Message-ID: <201308212124.13700.even.rouault@mines-paris.org>


> GDAL devs,
> 
> We have already 45 tickets fixed in 1.10 branch :
> http://trac.osgeo.org/gdal/query?status=closed&group=resolution&milestone=1
> .10.1 Do you have some other things you'd like to push in the 1.10 branch
> for 1.10.1 ? Perhaps we could cut a 1.10.1beta1 next week ?

Hi,

This didn't receive much answer, so I assume that it means people are OK. I'm 
about to cut 1.10.1 RC1 (we don't need betas for minor releases, do we?) very 
soon (i.e. within the next minutes) if nobody objects to.

Even


-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Wed Aug 21 14:42:40 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 21 Aug 2013 23:42:40 +0200
Subject: [gdal-dev] GDAL/OGR 1.10.1 RC1 Available for Review
Message-ID: <201308212342.40935.even.rouault@mines-paris.org>

Hi,

I have prepared a GDAL/OGR 1.10.1 release candidate.  I'd appreciate people
looking it over.

Peek up an archive among the following ones (by ascending size):

  http://download.osgeo.org/gdal/1.10.1/gdal-1.10.1RC1.tar.xz
  http://download.osgeo.org/gdal/1.10.1/gdal-1.10.1RC1.tar.gz
  http://download.osgeo.org/gdal/1.10.1/gdal1101RC1.zip

A snapshot of the gdalautotest suite is also available :

  http://download.osgeo.org/gdal/1.10.1/gdalautotest-1.10.1.tar.gz
  http://download.osgeo.org/gdal/1.10.1/gdalautotest-1.10.1.zip

The NEWS file is here :

  http://trac.osgeo.org/gdal/wiki/Release/1.10.1-News

I'll call for a vote promoting it to final if I don't hear of any
serious problems before this week-end.

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From chaitanya.ch at gmail.com  Fri Aug 23 02:10:49 2013
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri, 23 Aug 2013 14:40:49 +0530
Subject: [gdal-dev] ogr2ogr
In-Reply-To: <CAGoWz=y3Uxn6v_h0AsLaxZDistbCZmQyOOCx9_LKNEZ0xV=T7Q@mail.gmail.com>
References: <CAGoWz=y3Uxn6v_h0AsLaxZDistbCZmQyOOCx9_LKNEZ0xV=T7Q@mail.gmail.com>
Message-ID: <CAMKgpOa6-uOif1asK=tCGLfwBpS8KAiY9CzfR5ASFzb3ZcGi+Q@mail.gmail.com>

Shalini,

You can use the -wrapdateline option in ogr2ogr to split the geometries
crossing the dateline meridian. You can fine-tune it with the
-datelineoffset option.




On Fri, Aug 23, 2013 at 12:46 PM, Shalini <shalinitoleti at gmail.com> wrote:

> Hi Chaitanya,
>
> Willyou please let me know:
>
> How do we correct geometry  which cross the meridian for a shp file using
> ogr command.
>
> Splitting the polygon using ogr command.
>
> Thanks in Advance,
> Shalini
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130823/1de0be4b/attachment.html>

From peifer at gmx.eu  Fri Aug 23 04:05:58 2013
From: peifer at gmx.eu (peifer)
Date: Fri, 23 Aug 2013 04:05:58 -0700 (PDT)
Subject: [gdal-dev] gdal_edit.py -a_nodata none
Message-ID: <1377255958267-5073982.post@n6.nabble.com>

Hi,

http://www.gdal.org/gdal_edit.html states about -a_nodata 

> Assign a specified nodata value to output bands. 
> Can be set to none to remove a nodata value if one exists for the dataset.

I assume that none means the literal string `none', but what happens is
given below.

Is this just a plain bug or am I doing something terribly wrong?

Hermann

$ gdal_edit.py -a_nodata none my.tif
Traceback (most recent call last):
  File "/path/to/bin/gdal_edit.py", line 204, in <module>
    sys.exit(gdal_edit(sys.argv))
  File "/path/to/bin/gdal_edit.py", line 96, in gdal_edit
    nodata = float(argv[i+1])
ValueError: invalid literal for float(): none




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-edit-py-a-nodata-none-tp5073982.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Fri Aug 23 06:23:22 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 23 Aug 2013 15:23:22 +0200
Subject: [gdal-dev] gdal_edit.py -a_nodata none
In-Reply-To: <1377255958267-5073982.post@n6.nabble.com>
References: <1377255958267-5073982.post@n6.nabble.com>
Message-ID: <1377264202.5217624a0794b@imp.free.fr>

Selon peifer <peifer at gmx.eu>:

> Hi,
>
> http://www.gdal.org/gdal_edit.html states about -a_nodata
>
> > Assign a specified nodata value to output bands.
> > Can be set to none to remove a nodata value if one exists for the dataset.
>
> I assume that none means the literal string `none', but what happens is
> given below.
>
> Is this just a plain bug or am I doing something terribly wrong?

Hi Hermann,

This is a documentation bug. This is not supported by the code. And there's no
(standard) way in the GDAL API to remove a nodata value once it is set.

Could you file a ticket about that ?

Even




From peifer at gmx.eu  Fri Aug 23 09:04:17 2013
From: peifer at gmx.eu (Hermann Peifer)
Date: Fri, 23 Aug 2013 18:04:17 +0200
Subject: [gdal-dev] gdal_edit.py -a_nodata none
In-Reply-To: <1377264202.5217624a0794b@imp.free.fr>
References: <1377255958267-5073982.post@n6.nabble.com>
	<1377264202.5217624a0794b@imp.free.fr>
Message-ID: <52178801.3070709@gmx.eu>

On 2013-08-23 15:23, Even Rouault wrote:
> Selon peifer <peifer at gmx.eu>:
>
>> Hi,
>>
>> http://www.gdal.org/gdal_edit.html states about -a_nodata
>>
>>> Assign a specified nodata value to output bands.
>>> Can be set to none to remove a nodata value if one exists for the dataset.
>>
>> I assume that none means the literal string `none', but what happens is
>> given below.
>>
>> Is this just a plain bug or am I doing something terribly wrong?
>
> Hi Hermann,
>
> This is a documentation bug. This is not supported by the code. And there's no
> (standard) way in the GDAL API to remove a nodata value once it is set.
>
> Could you file a ticket about that ?
>

Done, see http://trac.osgeo.org/gdal/ticket/5213

Hermann


From even.rouault at mines-paris.org  Fri Aug 23 11:27:08 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 23 Aug 2013 20:27:08 +0200
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.10.1RC1 for release
Message-ID: <201308232027.08955.even.rouault@mines-paris.org>

Hi,

PSC members, please vote for the following motion after conducting your own 
testing.
Non-PSC members please let us know if you discover problems.

---

Motion: The GDAL/OGR 1.10.1RC1 package is promoted as the
final GDAL/OGR 1.10.1 release.

+1 Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From kyle at pobox.com  Fri Aug 23 14:21:06 2013
From: kyle at pobox.com (Kyle Shannon)
Date: Fri, 23 Aug 2013 15:21:06 -0600
Subject: [gdal-dev] gdal_edit.py -a_nodata none
In-Reply-To: <52178801.3070709@gmx.eu>
References: <1377255958267-5073982.post@n6.nabble.com>
	<1377264202.5217624a0794b@imp.free.fr> <52178801.3070709@gmx.eu>
Message-ID: <CAJ0mEz3euD33sX1OaDnYZsbv4-MWB=Yyd0u9uYCrrfcoBfGvOA@mail.gmail.com>

On Fri, Aug 23, 2013 at 10:04 AM, Hermann Peifer <peifer at gmx.eu> wrote:
> On 2013-08-23 15:23, Even Rouault wrote:
>>
>> Selon peifer <peifer at gmx.eu>:
>>
>>> Hi,
>>>
>>> http://www.gdal.org/gdal_edit.html states about -a_nodata
>>>
>>>> Assign a specified nodata value to output bands.
>>>> Can be set to none to remove a nodata value if one exists for the
>>>> dataset.
>>>
>>>
>>> I assume that none means the literal string `none', but what happens is
>>> given below.
>>>
>>> Is this just a plain bug or am I doing something terribly wrong?
>>
>>
>> Hi Hermann,
>>
>> This is a documentation bug. This is not supported by the code. And
>> there's no
>> (standard) way in the GDAL API to remove a nodata value once it is set.
>>
>> Could you file a ticket about that ?
>>
>
> Done, see http://trac.osgeo.org/gdal/ticket/5213
>
> Hermann
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

Even,
According to the docs at
http://gdal.org/classGDALRasterBand.html#ac6f081d253dee55c372e54cfdd8f05a6

"""To clear the nodata value, just set it with an "out of range"
value. Complex band no data values must have an imagery component of
zero."""

This seems a little unreliable though, especially if changing the data
type in gdal_translate or some other app.  If the no data value is
copied and is within the new range for the new data type, the behavior
is unexpected(I think).  Should the docs state that once a no data
value is set, in cannot be unset as well?  I'm a bit confused.

kss

From even.rouault at mines-paris.org  Fri Aug 23 15:35:10 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 24 Aug 2013 00:35:10 +0200
Subject: [gdal-dev] gdal_edit.py -a_nodata none
In-Reply-To: <CAJ0mEz3euD33sX1OaDnYZsbv4-MWB=Yyd0u9uYCrrfcoBfGvOA@mail.gmail.com>
References: <1377255958267-5073982.post@n6.nabble.com>
	<52178801.3070709@gmx.eu>
	<CAJ0mEz3euD33sX1OaDnYZsbv4-MWB=Yyd0u9uYCrrfcoBfGvOA@mail.gmail.com>
Message-ID: <201308240035.10267.even.rouault@mines-paris.org>

Le vendredi 23 ao?t 2013 23:21:06, Kyle Shannon a ?crit :
> On Fri, Aug 23, 2013 at 10:04 AM, Hermann Peifer <peifer at gmx.eu> wrote:
> > On 2013-08-23 15:23, Even Rouault wrote:
> >> Selon peifer <peifer at gmx.eu>:
> >>> Hi,
> >>> 
> >>> http://www.gdal.org/gdal_edit.html states about -a_nodata
> >>> 
> >>>> Assign a specified nodata value to output bands.
> >>>> Can be set to none to remove a nodata value if one exists for the
> >>>> dataset.
> >>> 
> >>> I assume that none means the literal string `none', but what happens is
> >>> given below.
> >>> 
> >>> Is this just a plain bug or am I doing something terribly wrong?
> >> 
> >> Hi Hermann,
> >> 
> >> This is a documentation bug. This is not supported by the code. And
> >> there's no
> >> (standard) way in the GDAL API to remove a nodata value once it is set.
> >> 
> >> Could you file a ticket about that ?
> > 
> > Done, see http://trac.osgeo.org/gdal/ticket/5213
> > 
> > Hermann
> > 
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> Even,
> According to the docs at
> http://gdal.org/classGDALRasterBand.html#ac6f081d253dee55c372e54cfdd8f05a6
> 
> """To clear the nodata value, just set it with an "out of range"
> value. Complex band no data values must have an imagery component of
> zero."""
> 
> This seems a little unreliable though, especially if changing the data
> type in gdal_translate or some other app.  If the no data value is
> copied and is within the new range for the new data type, the behavior
> is unexpected(I think).  Should the docs state that once a no data
> value is set, in cannot be unset as well?  I'm a bit confused.

Yes, there's no definitive and clean way of unsetting a nodata value once it is 
set. Practically, you can workaround that by setting it to out of range. I'm 
not sure that conversion to a wider type will cause problems however, if the 
pixel values remain unchanged. For example if you have a byte pixel type, and 
pick -1 as nodata value, then translating it to signed int 16 will not really 
cause problems (immediately) since the pixel values will remain in the [0-255] 
range. Of course if the data is edited afterwards, then -1 coud be assigned to 
a pixel.

Feel free to edit the doc to add some caution wording.

Ideally the API should have a ClearNoDataValue() method. I'm not sure that 
many file formats could really implement it. PAM storage of course could 
support that. GeoTIFF probably too be erasing the GDAL_NODATA tag.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From schwehr at gmail.com  Sat Aug 24 10:57:47 2013
From: schwehr at gmail.com (Kurt Schwehr)
Date: Sat, 24 Aug 2013 10:57:47 -0700
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.10.1RC1 for release
In-Reply-To: <201308232027.08955.even.rouault@mines-paris.org>
References: <201308232027.08955.even.rouault@mines-paris.org>
Message-ID: <0E14BA97-BBF4-4909-803A-763E5357F5A8@gmail.com>

LGTM with respect to fink package on mac osx 10.8

- Looks like I have a todo on jasper.
- not sure on http_4
- png.py and test_gdalwarp below.
- rest are flagged as know issues or pre-release things

-kurt


 ------------ Failures ------------
Script: ogr/ogr_shape.py
  TEST: ogr_shape_68 ... fail
    line 3249: fail
Script: gcore/basic_test.py
  TEST: basic_test_8 ... fail
    line 161: fail
Script: gcore/gdal_api_proxy.py
  TEST: gdal_api_proxy_3 ... fail
Script: gdrivers/gdalhttp.py
  TEST: http_4 ... fail
Script: gdrivers/jpeg2000.py
  TEST: jpeg2000_8 ... fail
    line 189: Jasper library would need patches
Script: gdrivers/png.py
  TEST: png_1 ... fail
    line 429: Checksum for band 1 in "test.png" is 6846, but expected 57921.
  TEST: png_2 ... fail
    line 484: Failed to create test file using CreateCopy method.
libpng: No IDATs written into file
Script: utilities/test_gdalwarp.py
  TEST: test_gdalwarp_33 ... fail
 ----------------------------------

Succeeded: 2608
Failed:    8 (0 blew exceptions)
Skipped:   723
Expected fail:12
Duration:  06m4.3s
As GDAL_DOWNLOAD_TEST_DATA environment variable is not defined, 107 tests relying on data to downloaded from the Web have been skipped
As GDAL_RUN_SLOW_TESTS environment variable is not defined, 22 "slow" tests have been skipped


png.py:

python png.py
  TEST: png_1 ... ERROR 1: libpng: IDAT: invalid distance too far back
ERROR 1: data/test.png, band 1: IReadBlock failed at X offset 0, Y offset 29
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 29
ERROR 3: Checksum value couldn't be computed due to I/O read error.

fail
    line 429: Checksum for band 1 in "test.png" is 6846, but expected 57921.
  TEST: png_2 ... ERROR 1: libpng: IDAT: invalid distance too far back
ERROR 1: data/test.png, band 1: IReadBlock failed at X offset 0, Y offset 29
ERROR 1: libpng: IDAT: invalid distance too far back
ERROR 1: data/test.png, band 1: IReadBlock failed at X offset 0, Y offset 30
ERROR 1: libpng: IDAT: invalid distance too far back



  TEST: test_gdalwarp_32 ... success
  TEST: test_gdalwarp_33 ... Diff at pixel (160, 0) : 7.000000
Diff at pixel (161, 0) : 1.000000
Diff at pixel (162, 0) : 6.000000
Diff at pixel (165, 0) : 2.000000
Diff at pixel (167, 0) : 8.000000
Diff at pixel (169, 0) : 8.000000
Diff at pixel (173, 0) : 4.000000
Diff at pixel (174, 0) : 9.000000
Diff at pixel (176, 0) : 9.000000
Diff at pixel (189, 0) : 10.000000
Diff at pixel (266, 0) : 13.000000
Diff at pixel (284, 0) : 17.000000
Diff at pixel (172, 1) : 22.000000
Diff at pixel (265, 1) : 31.000000
Diff at pixel (301, 6) : 32.000000
Diff at pixel (388, 37) : 38.000000
Diff at pixel (118, 319) : 40.000000
Max diff : 40
Number of diffs : 3683
fail
  TEST: test_gdalwarp_34 ... success


On Aug 23, 2013, at 11:27 AM, Even Rouault <even.rouault at mines-paris.org> wrote:

> Hi,
> 
> PSC members, please vote for the following motion after conducting your own 
> testing.
> Non-PSC members please let us know if you discover problems.
> 
> ---
> 
> Motion: The GDAL/OGR 1.10.1RC1 package is promoted as the
> final GDAL/OGR 1.10.1 release.
> 
> +1 Even
> 
> -- 
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Sat Aug 24 11:26:30 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 24 Aug 2013 20:26:30 +0200
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.10.1RC1 for release
In-Reply-To: <0E14BA97-BBF4-4909-803A-763E5357F5A8@gmail.com>
References: <201308232027.08955.even.rouault@mines-paris.org>
	<0E14BA97-BBF4-4909-803A-763E5357F5A8@gmail.com>
Message-ID: <201308242026.30298.even.rouault@mines-paris.org>

Le samedi 24 ao?t 2013 19:57:47, Kurt Schwehr a ?crit :
> LGTM with respect to fink package on mac osx 10.8
> 
> - Looks like I have a todo on jasper.
> - not sure on http_4
> - png.py and test_gdalwarp below.
> - rest are flagged as know issues or pre-release things

Hi Kurt,

Thanks for your testing. Comments below

> 
> -kurt
> 
> 
>  ------------ Failures ------------
> Script: ogr/ogr_shape.py
>   TEST: ogr_shape_68 ... fail
>     line 3249: fail

Yes, I observed that it fails on Travis too on the Mac. Not sure why being not 
in a position to debug on the Mac. Advanced stuff, not critical if it doesn't 
work

> Script: gcore/basic_test.py
>   TEST: basic_test_8 ... fail

Same, fails on Travis for unknown reason on the Mac. The test is likely a bit 
fragile.

>     line 161: fail
> Script: gcore/gdal_api_proxy.py
>   TEST: gdal_api_proxy_3 ... fail

Same, fails on Travis for unknown reason on the Mac. Advanced stuff, not 
critical if it doesn't work

> Script: gdrivers/gdalhttp.py
>   TEST: http_4 ... fail

Might be linked to a temporary unavailability of the remote resource. I 
somehow remember that it can fail sometimes, but I have never tested on the 
Mac, so it might not be just an interminent failure

Does "gdalinfo 
/vsicurl/ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/250k_tif/MCR2010_01.tif" 
repeatedly fail ?

You can try adding "--debug CPL_CURL_VERBOSE YES" for more info.

> Script: gdrivers/jpeg2000.py
>   TEST: jpeg2000_8 ... fail
>     line 189: Jasper library would need patches

Yes, this is a defect in upstream jasper that most linux distro have patched. 
Applying Debian patches might help you fix that

> Script: gdrivers/png.py
>   TEST: png_1 ... fail
>     line 429: Checksum for band 1 in "test.png" is 6846, but expected
> 57921. TEST: png_2 ... fail
>     line 484: Failed to create test file using CreateCopy method.
> libpng: No IDATs written into file

Hum, this is new to me. Which libpng version do you use ?

> Script: utilities/test_gdalwarp.py
>   TEST: test_gdalwarp_33 ... fail

The test might be a bit fragile indeed. It might depend on the libjpeg version 
you are using. There's a tolerance at 37, and you have reached 40. Could 
likely be changed to 40.

>  ----------------------------------
> 
> Succeeded: 2608
> Failed:    8 (0 blew exceptions)
> Skipped:   723
> Expected fail:12
> Duration:  06m4.3s
> As GDAL_DOWNLOAD_TEST_DATA environment variable is not defined, 107 tests
> relying on data to downloaded from the Web have been skipped As
> GDAL_RUN_SLOW_TESTS environment variable is not defined, 22 "slow" tests
> have been skipped
> 
> 
> png.py:
> 
> python png.py
>   TEST: png_1 ... ERROR 1: libpng: IDAT: invalid distance too far back
> ERROR 1: data/test.png, band 1: IReadBlock failed at X offset 0, Y offset
> 29 ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 29
> ERROR 3: Checksum value couldn't be computed due to I/O read error.
> 
> fail
>     line 429: Checksum for band 1 in "test.png" is 6846, but expected
> 57921. TEST: png_2 ... ERROR 1: libpng: IDAT: invalid distance too far
> back ERROR 1: data/test.png, band 1: IReadBlock failed at X offset 0, Y
> offset 29 ERROR 1: libpng: IDAT: invalid distance too far back
> ERROR 1: data/test.png, band 1: IReadBlock failed at X offset 0, Y offset
> 30 ERROR 1: libpng: IDAT: invalid distance too far back
> 
> 
> 
>   TEST: test_gdalwarp_32 ... success
>   TEST: test_gdalwarp_33 ... Diff at pixel (160, 0) : 7.000000
> Diff at pixel (161, 0) : 1.000000
> Diff at pixel (162, 0) : 6.000000
> Diff at pixel (165, 0) : 2.000000
> Diff at pixel (167, 0) : 8.000000
> Diff at pixel (169, 0) : 8.000000
> Diff at pixel (173, 0) : 4.000000
> Diff at pixel (174, 0) : 9.000000
> Diff at pixel (176, 0) : 9.000000
> Diff at pixel (189, 0) : 10.000000
> Diff at pixel (266, 0) : 13.000000
> Diff at pixel (284, 0) : 17.000000
> Diff at pixel (172, 1) : 22.000000
> Diff at pixel (265, 1) : 31.000000
> Diff at pixel (301, 6) : 32.000000
> Diff at pixel (388, 37) : 38.000000
> Diff at pixel (118, 319) : 40.000000
> Max diff : 40
> Number of diffs : 3683
> fail
>   TEST: test_gdalwarp_34 ... success
> 
> On Aug 23, 2013, at 11:27 AM, Even Rouault <even.rouault at mines-paris.org> 
wrote:
> > Hi,
> > 
> > PSC members, please vote for the following motion after conducting your
> > own testing.
> > Non-PSC members please let us know if you discover problems.
> > 
> > ---
> > 
> > Motion: The GDAL/OGR 1.10.1RC1 package is promoted as the
> > final GDAL/OGR 1.10.1 release.
> > 
> > +1 Even
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From muratbeyhan28 at gmail.com  Sat Aug 24 13:13:37 2013
From: muratbeyhan28 at gmail.com (Murat Beyhan)
Date: Sat, 24 Aug 2013 23:13:37 +0300
Subject: [gdal-dev] convert UTM 2 Latlong
Message-ID: <CAEZYbZtAXh31s+1UOV63K26mBmrJrEZjOY9vtCizbc06aRC40w@mail.gmail.com>

Hi,

I have tried to do before but until I can't succeded please help me
how to convert utm data into geographic lat/lon data.
I have point and line data in shape file and I would like to convert it
into lat/long data

I thing this could be done using gdaltransform but I dont know how to do. I
have need your help urgently.
regards.

Murat

My data as follows
  gdalinfo g23d4_gh.tif
Driver: GTiff/GeoTIFF
Files: g23d4_gh.tif
Size is 200, 200
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (711464.640000000013970,4486337.679999999701977)
Pixel Size = (54.924799999999813,70.906000000000930)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  711464.640, 4486337.680) (Invalid angle,Invalid angle)
Lower Left  (  711464.640, 4500518.880) (Invalid angle,Invalid angle)
Upper Right (  722449.600, 4486337.680) (Invalid angle,Invalid angle)
Lower Right (  722449.600, 4500518.880) (Invalid angle,Invalid angle)
Center      (  716957.120, 4493428.280) (Invalid angle,Invalid angle)
Band 1 Block=200x40 Type=Byte, ColorInterp=Gray
  NoData Value=0
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130824/77082f4b/attachment.html>

From jrepetto at free.fr  Sat Aug 24 14:09:39 2013
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Sat, 24 Aug 2013 23:09:39 +0200
Subject: [gdal-dev] convert UTM 2 Latlong
In-Reply-To: <CAEZYbZtAXh31s+1UOV63K26mBmrJrEZjOY9vtCizbc06aRC40w@mail.gmail.com>
References: <CAEZYbZtAXh31s+1UOV63K26mBmrJrEZjOY9vtCizbc06aRC40w@mail.gmail.com>
Message-ID: <52192113.4060705@free.fr>

On 24/08/2013 22:13, Murat Beyhan wrote:
>
> Hi,
>
> I have tried to do before but until I can't succeded please help me
> how to convert utm data into geographic lat/lon data.
> I have point and line data in shape file and I would like to convert it
> into lat/long data

Hi,

The CRS of your file is incorrect. It says it is already lat/lon instead 
of UTM.
First, correct the CRS with gdal_edit
( http://www.gdal.org/gdal_edit.html ).
Then you can transform it to lat/lon with gdalwarp.

Jean-Claude



From ozdogan at wisc.edu  Sat Aug 24 13:31:14 2013
From: ozdogan at wisc.edu (Mutlu Ozdogan)
Date: Sat, 24 Aug 2013 23:31:14 +0300
Subject: [gdal-dev] convert UTM 2 Latlong
In-Reply-To: <CAEZYbZtAXh31s+1UOV63K26mBmrJrEZjOY9vtCizbc06aRC40w@mail.gmail.com>
References: <CAEZYbZtAXh31s+1UOV63K26mBmrJrEZjOY9vtCizbc06aRC40w@mail.gmail.com>
Message-ID: <E2361F4E-BE37-4BE4-9F94-BEDA4ECBEFCE@wisc.edu>

gdalwarp -of GTiff -t_srs EPSG:4326 g23d4_gh.tif output_latlon.tif

Sent from my iPad

On Aug 24, 2013, at 11:13 PM, Murat Beyhan <muratbeyhan28 at gmail.com> wrote:

> 
> Hi,
> 
> I have tried to do before but until I can't succeded please help me
> how to convert utm data into geographic lat/lon data.
> I have point and line data in shape file and I would like to convert it into lat/long data
> 
> I thing this could be done using gdaltransform but I dont know how to do. I have need your help urgently. 
> regards.
> 
> Murat
> 
> My data as follows
>   gdalinfo g23d4_gh.tif 
> Driver: GTiff/GeoTIFF
> Files: g23d4_gh.tif
> Size is 200, 200
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433],
>     AUTHORITY["EPSG","4326"]]
> Origin = (711464.640000000013970,4486337.679999999701977)
> Pixel Size = (54.924799999999813,70.906000000000930)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (  711464.640, 4486337.680) (Invalid angle,Invalid angle)
> Lower Left  (  711464.640, 4500518.880) (Invalid angle,Invalid angle)
> Upper Right (  722449.600, 4486337.680) (Invalid angle,Invalid angle)
> Lower Right (  722449.600, 4500518.880) (Invalid angle,Invalid angle)
> Center      (  716957.120, 4493428.280) (Invalid angle,Invalid angle)
> Band 1 Block=200x40 Type=Byte, ColorInterp=Gray
>   NoData Value=0
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From schwehr at gmail.com  Sat Aug 24 17:34:21 2013
From: schwehr at gmail.com (Kurt Schwehr)
Date: Sat, 24 Aug 2013 17:34:21 -0700
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.10.1RC1 for release
In-Reply-To: <201308242026.30298.even.rouault@mines-paris.org>
References: <201308232027.08955.even.rouault@mines-paris.org>
	<0E14BA97-BBF4-4909-803A-763E5357F5A8@gmail.com>
	<201308242026.30298.even.rouault@mines-paris.org>
Message-ID: <C36560BA-C883-4DE7-AF05-92884549FC0A@gmail.com>

Since I haven't check on any prior update, I consider this just a baseline and don't see this as a reason to hold up the update.

Notes inline.  backing off on png gave a passing test.  backing off on jpeg... no change.
Other issues, I'll see if I can look into later.

-kurt

On Aug 24, 2013, at 11:26 AM, Even Rouault <even.rouault at mines-paris.org> wrote:

> Le samedi 24 ao?t 2013 19:57:47, Kurt Schwehr a ?crit :
>> LGTM with respect to fink package on mac osx 10.8
>> 
>> - Looks like I have a todo on jasper.
>> - not sure on http_4
>> - png.py and test_gdalwarp below.
>> - rest are flagged as know issues or pre-release things
> 
> Hi Kurt,
> 
> Thanks for your testing. Comments below
> 
>> 
>> -kurt
>> 
>> 
>> ------------ Failures ------------
>> Script: ogr/ogr_shape.py
>>  TEST: ogr_shape_68 ... fail
>>    line 3249: fail
> 
> Yes, I observed that it fails on Travis too on the Mac. Not sure why being not 
> in a position to debug on the Mac. Advanced stuff, not critical if it doesn't 
> work
> 
>> Script: gcore/basic_test.py
>>  TEST: basic_test_8 ... fail
> 
> Same, fails on Travis for unknown reason on the Mac. The test is likely a bit 
> fragile.
> 
>>    line 161: fail
>> Script: gcore/gdal_api_proxy.py
>>  TEST: gdal_api_proxy_3 ... fail
> 
> Same, fails on Travis for unknown reason on the Mac. Advanced stuff, not 
> critical if it doesn't work
> 
>> Script: gdrivers/gdalhttp.py
>>  TEST: http_4 ... fail
> 
> Might be linked to a temporary unavailability of the remote resource. I 
> somehow remember that it can fail sometimes, but I have never tested on the 
> Mac, so it might not be just an interminent failure
> 
> Does "gdalinfo 
> /vsicurl/ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/250k_tif/MCR2010_01.tif" 
> repeatedly fail ?
> 
> You can try adding "--debug CPL_CURL_VERBOSE YES" for more info.
> 

I think you called it with just being a network issue

./gdalhttp.py 
  TEST: http_1 ... success
  TEST: http_2 ... success
  TEST: http_3 ... success
  TEST: http_4 ... success
  TEST: http_cleanup ... success

Test Script: http
Succeeded: 5
Failed:    0 (0 blew exceptions)
Skipped:   0
Expected fail:0
Duration:  11.35s



>> Script: gdrivers/jpeg2000.py
>>  TEST: jpeg2000_8 ... fail
>>    line 189: Jasper library would need patches
> 
> Yes, this is a defect in upstream jasper that most linux distro have patched. 
> Applying Debian patches might help you fix that
> 
>> Script: gdrivers/png.py
>>  TEST: png_1 ... fail
>>    line 429: Checksum for band 1 in "test.png" is 6846, but expected
>> 57921. TEST: png_2 ... fail
>>    line 484: Failed to create test file using CreateCopy method.
>> libpng: No IDATs written into file
> 
> Hum, this is new to me. Which libpng version do you use ?
> 

otool -L /sw/bin/gdalinfo  | grep png
	/sw/lib/libpng16.16.dylib (compatibility version 20.0.0, current version 20.0.0)

libpng16                     1.6.3-1

backing off to libpng15                     1.5.17-1  gives success:

otool -L /sw/bin/gdalinfo  | grep png
	/sw/lib/libpng15.15.dylib (compatibility version 33.0.0, current version 33.0.0)

./png.py 
  TEST: png_1 ... success
  TEST: png_2 ... success
  TEST: png_3 ... success
  TEST: png_4 ... success
  TEST: png_5 ... success
  TEST: png_6 ... success
  TEST: png_7 ... success
  TEST: png_8 ... success
  TEST: png_9 ... success
  TEST: png_10 ... success
  TEST: png_11 ... success

Test Script: png
Succeeded: 11
Failed:    0 (0 blew exceptions)
Skipped:   0
Expected fail:0
Duration:  0.05s


>> Script: utilities/test_gdalwarp.py
>>  TEST: test_gdalwarp_33 ... fail
> 
> The test might be a bit fragile indeed. It might depend on the libjpeg version 
> you are using. There's a tolerance at 37, and you have reached 40. Could 
> likely be changed to 40.
> 

otool -L /sw/bin/gdalinfo  | grep jp
	/sw/lib/libjpeg.9.dylib (compatibility version 10.0.0, current version 10.0.0)

 i   libjpeg9-shlibs              9-3                   Shared libraries for libjpeg package

Backing off still has a test that fails

otool -L /sw/bin/gdalinfo  | grep jp
	/sw/lib/libjpeg.8.dylib (compatibility version 13.0.0, current version 13.0.0)

 i   libjpeg8-shlibs              8d-3 

  TEST: test_gdalwarp_33 ... Diff at pixel (160, 0) : 7.000000
Diff at pixel (161, 0) : 1.000000
Diff at pixel (162, 0) : 6.000000
Diff at pixel (165, 0) : 2.000000
Diff at pixel (167, 0) : 8.000000
Diff at pixel (169, 0) : 8.000000
Diff at pixel (173, 0) : 4.000000
Diff at pixel (174, 0) : 9.000000
Diff at pixel (176, 0) : 9.000000
Diff at pixel (189, 0) : 10.000000
Diff at pixel (266, 0) : 13.000000
Diff at pixel (284, 0) : 17.000000
Diff at pixel (172, 1) : 22.000000
Diff at pixel (265, 1) : 31.000000
Diff at pixel (301, 6) : 32.000000
Diff at pixel (388, 37) : 38.000000
Diff at pixel (118, 319) : 40.000000
Max diff : 40
Number of diffs : 3683
fail
  TEST: test_gdalwarp_34 ... success
  TEST: test_gdalwarp_35 ... success
  TEST: test_gdalwarp_36 ... success
  TEST: test_gdalwarp_cleanup ... success

Test Script: test_gdalwarp
Succeeded: 37
Failed:    1 (0 blew exceptions)
Skipped:   0
Expected fail:0
Duration:  1.80s


>> ----------------------------------
>> 
>> Succeeded: 2608
>> Failed:    8 (0 blew exceptions)
>> Skipped:   723
>> Expected fail:12
>> Duration:  06m4.3s
>> As GDAL_DOWNLOAD_TEST_DATA environment variable is not defined, 107 tests
>> relying on data to downloaded from the Web have been skipped As
>> GDAL_RUN_SLOW_TESTS environment variable is not defined, 22 "slow" tests
>> have been skipped
>> 
>> 
>> png.py:
>> 
>> python png.py
>>  TEST: png_1 ... ERROR 1: libpng: IDAT: invalid distance too far back
>> ERROR 1: data/test.png, band 1: IReadBlock failed at X offset 0, Y offset
>> 29 ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 29
>> ERROR 3: Checksum value couldn't be computed due to I/O read error.
>> 
>> fail
>>    line 429: Checksum for band 1 in "test.png" is 6846, but expected
>> 57921. TEST: png_2 ... ERROR 1: libpng: IDAT: invalid distance too far
>> back ERROR 1: data/test.png, band 1: IReadBlock failed at X offset 0, Y
>> offset 29 ERROR 1: libpng: IDAT: invalid distance too far back
>> ERROR 1: data/test.png, band 1: IReadBlock failed at X offset 0, Y offset
>> 30 ERROR 1: libpng: IDAT: invalid distance too far back
>> 
>> 
>> 
>>  TEST: test_gdalwarp_32 ... success
>>  TEST: test_gdalwarp_33 ... Diff at pixel (160, 0) : 7.000000
>> Diff at pixel (161, 0) : 1.000000
>> Diff at pixel (162, 0) : 6.000000
>> Diff at pixel (165, 0) : 2.000000
>> Diff at pixel (167, 0) : 8.000000
>> Diff at pixel (169, 0) : 8.000000
>> Diff at pixel (173, 0) : 4.000000
>> Diff at pixel (174, 0) : 9.000000
>> Diff at pixel (176, 0) : 9.000000
>> Diff at pixel (189, 0) : 10.000000
>> Diff at pixel (266, 0) : 13.000000
>> Diff at pixel (284, 0) : 17.000000
>> Diff at pixel (172, 1) : 22.000000
>> Diff at pixel (265, 1) : 31.000000
>> Diff at pixel (301, 6) : 32.000000
>> Diff at pixel (388, 37) : 38.000000
>> Diff at pixel (118, 319) : 40.000000
>> Max diff : 40
>> Number of diffs : 3683
>> fail
>>  TEST: test_gdalwarp_34 ... success
>> 
>> On Aug 23, 2013, at 11:27 AM, Even Rouault <even.rouault at mines-paris.org> 
> wrote:
>>> Hi,
>>> 
>>> PSC members, please vote for the following motion after conducting your
>>> own testing.
>>> Non-PSC members please let us know if you discover problems.
>>> 
>>> ---
>>> 
>>> Motion: The GDAL/OGR 1.10.1RC1 package is promoted as the
>>> final GDAL/OGR 1.10.1 release.
>>> 
>>> +1 Even
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -- 
> Geospatial professional services
> http://even.rouault.free.fr/services.html


From even.rouault at mines-paris.org  Sun Aug 25 02:59:19 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 25 Aug 2013 11:59:19 +0200
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.10.1RC1 for release
In-Reply-To: <C36560BA-C883-4DE7-AF05-92884549FC0A@gmail.com>
References: <201308232027.08955.even.rouault@mines-paris.org>
	<201308242026.30298.even.rouault@mines-paris.org>
	<C36560BA-C883-4DE7-AF05-92884549FC0A@gmail.com>
Message-ID: <201308251159.19748.even.rouault@mines-paris.org>

Le dimanche 25 ao?t 2013 02:34:21, Kurt Schwehr a ?crit :
> Since I haven't check on any prior update, I consider this just a baseline
> and don't see this as a reason to hold up the update.

Yes, that doesn't look criticial to me either, apart the failures with libpng 
1.6.3

> 
> Notes inline.  backing off on png gave a passing test.  backing off on
> jpeg... no change. Other issues, I'll see if I can look into later.

I've tested against libpng 1.6.3 on Linux 64bit, and I don't get any failed 
tests on png.py. Strange. Do the png utilities of libpng 1.6.3 work on 
autotest/gdrivers/data/test.png ?

I've also tested libjpeg-9a and could reproduce the failure on gdalwarp_33. 
Visual inspectiong of the result looks OK, so that's just a difference in the 
maths involved in JPEG decompression between libjpeg versions. I'll increase 
the tolerance to 40.

> 
> -kurt
> 
> On Aug 24, 2013, at 11:26 AM, Even Rouault <even.rouault at mines-paris.org> 
wrote:
> > Le samedi 24 ao?t 2013 19:57:47, Kurt Schwehr a ?crit :
> >> LGTM with respect to fink package on mac osx 10.8
> >> 
> >> - Looks like I have a todo on jasper.
> >> - not sure on http_4
> >> - png.py and test_gdalwarp below.
> >> - rest are flagged as know issues or pre-release things
> > 
> > Hi Kurt,
> > 
> > Thanks for your testing. Comments below
> > 
> >> -kurt
> >> 
> >> 
> >> ------------ Failures ------------
> >> Script: ogr/ogr_shape.py
> >> 
> >>  TEST: ogr_shape_68 ... fail
> >>  
> >>    line 3249: fail
> > 
> > Yes, I observed that it fails on Travis too on the Mac. Not sure why
> > being not in a position to debug on the Mac. Advanced stuff, not
> > critical if it doesn't work
> > 
> >> Script: gcore/basic_test.py
> >> 
> >>  TEST: basic_test_8 ... fail
> > 
> > Same, fails on Travis for unknown reason on the Mac. The test is likely a
> > bit fragile.
> > 
> >>    line 161: fail
> >> 
> >> Script: gcore/gdal_api_proxy.py
> >> 
> >>  TEST: gdal_api_proxy_3 ... fail
> > 
> > Same, fails on Travis for unknown reason on the Mac. Advanced stuff, not
> > critical if it doesn't work
> > 
> >> Script: gdrivers/gdalhttp.py
> >> 
> >>  TEST: http_4 ... fail
> > 
> > Might be linked to a temporary unavailability of the remote resource. I
> > somehow remember that it can fail sometimes, but I have never tested on
> > the Mac, so it might not be just an interminent failure
> > 
> > Does "gdalinfo
> > /vsicurl/ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/250k_tif/MCR2010_01.tif"
> > repeatedly fail ?
> > 
> > You can try adding "--debug CPL_CURL_VERBOSE YES" for more info.
> 
> I think you called it with just being a network issue
> 
> ./gdalhttp.py
>   TEST: http_1 ... success
>   TEST: http_2 ... success
>   TEST: http_3 ... success
>   TEST: http_4 ... success
>   TEST: http_cleanup ... success
> 
> Test Script: http
> Succeeded: 5
> Failed:    0 (0 blew exceptions)
> Skipped:   0
> Expected fail:0
> Duration:  11.35s
> 
> >> Script: gdrivers/jpeg2000.py
> >> 
> >>  TEST: jpeg2000_8 ... fail
> >>  
> >>    line 189: Jasper library would need patches
> > 
> > Yes, this is a defect in upstream jasper that most linux distro have
> > patched. Applying Debian patches might help you fix that
> > 
> >> Script: gdrivers/png.py
> >> 
> >>  TEST: png_1 ... fail
> >>  
> >>    line 429: Checksum for band 1 in "test.png" is 6846, but expected
> >> 
> >> 57921. TEST: png_2 ... fail
> >> 
> >>    line 484: Failed to create test file using CreateCopy method.
> >> 
> >> libpng: No IDATs written into file
> > 
> > Hum, this is new to me. Which libpng version do you use ?
> 
> otool -L /sw/bin/gdalinfo  | grep png
> 	/sw/lib/libpng16.16.dylib (compatibility version 20.0.0, current version
> 20.0.0)
> 
> libpng16                     1.6.3-1
> 
> backing off to libpng15                     1.5.17-1  gives success:
> 
> otool -L /sw/bin/gdalinfo  | grep png
> 	/sw/lib/libpng15.15.dylib (compatibility version 33.0.0, current version
> 33.0.0)
> 
> ./png.py
>   TEST: png_1 ... success
>   TEST: png_2 ... success
>   TEST: png_3 ... success
>   TEST: png_4 ... success
>   TEST: png_5 ... success
>   TEST: png_6 ... success
>   TEST: png_7 ... success
>   TEST: png_8 ... success
>   TEST: png_9 ... success
>   TEST: png_10 ... success
>   TEST: png_11 ... success
> 
> Test Script: png
> Succeeded: 11
> Failed:    0 (0 blew exceptions)
> Skipped:   0
> Expected fail:0
> Duration:  0.05s
> 
> >> Script: utilities/test_gdalwarp.py
> >> 
> >>  TEST: test_gdalwarp_33 ... fail
> > 
> > The test might be a bit fragile indeed. It might depend on the libjpeg
> > version you are using. There's a tolerance at 37, and you have reached
> > 40. Could likely be changed to 40.
> 
> otool -L /sw/bin/gdalinfo  | grep jp
> 	/sw/lib/libjpeg.9.dylib (compatibility version 10.0.0, current version
> 10.0.0)
> 
>  i   libjpeg9-shlibs              9-3                   Shared libraries
> for libjpeg package
> 
> Backing off still has a test that fails
> 
> otool -L /sw/bin/gdalinfo  | grep jp
> 	/sw/lib/libjpeg.8.dylib (compatibility version 13.0.0, current version
> 13.0.0)
> 
>  i   libjpeg8-shlibs              8d-3
> 
>   TEST: test_gdalwarp_33 ... Diff at pixel (160, 0) : 7.000000
> Diff at pixel (161, 0) : 1.000000
> Diff at pixel (162, 0) : 6.000000
> Diff at pixel (165, 0) : 2.000000
> Diff at pixel (167, 0) : 8.000000
> Diff at pixel (169, 0) : 8.000000
> Diff at pixel (173, 0) : 4.000000
> Diff at pixel (174, 0) : 9.000000
> Diff at pixel (176, 0) : 9.000000
> Diff at pixel (189, 0) : 10.000000
> Diff at pixel (266, 0) : 13.000000
> Diff at pixel (284, 0) : 17.000000
> Diff at pixel (172, 1) : 22.000000
> Diff at pixel (265, 1) : 31.000000
> Diff at pixel (301, 6) : 32.000000
> Diff at pixel (388, 37) : 38.000000
> Diff at pixel (118, 319) : 40.000000
> Max diff : 40
> Number of diffs : 3683
> fail
>   TEST: test_gdalwarp_34 ... success
>   TEST: test_gdalwarp_35 ... success
>   TEST: test_gdalwarp_36 ... success
>   TEST: test_gdalwarp_cleanup ... success
> 
> Test Script: test_gdalwarp
> Succeeded: 37
> Failed:    1 (0 blew exceptions)
> Skipped:   0
> Expected fail:0
> Duration:  1.80s
> 
> >> ----------------------------------
> >> 
> >> Succeeded: 2608
> >> Failed:    8 (0 blew exceptions)
> >> Skipped:   723
> >> Expected fail:12
> >> Duration:  06m4.3s
> >> As GDAL_DOWNLOAD_TEST_DATA environment variable is not defined, 107
> >> tests relying on data to downloaded from the Web have been skipped As
> >> GDAL_RUN_SLOW_TESTS environment variable is not defined, 22 "slow"
> >> tests have been skipped
> >> 
> >> 
> >> png.py:
> >> 
> >> python png.py
> >> 
> >>  TEST: png_1 ... ERROR 1: libpng: IDAT: invalid distance too far back
> >> 
> >> ERROR 1: data/test.png, band 1: IReadBlock failed at X offset 0, Y
> >> offset 29 ERROR 1: GetBlockRef failed at X block offset 0, Y block
> >> offset 29 ERROR 3: Checksum value couldn't be computed due to I/O read
> >> error.
> >> 
> >> fail
> >> 
> >>    line 429: Checksum for band 1 in "test.png" is 6846, but expected
> >> 
> >> 57921. TEST: png_2 ... ERROR 1: libpng: IDAT: invalid distance too far
> >> back ERROR 1: data/test.png, band 1: IReadBlock failed at X offset 0, Y
> >> offset 29 ERROR 1: libpng: IDAT: invalid distance too far back
> >> ERROR 1: data/test.png, band 1: IReadBlock failed at X offset 0, Y
> >> offset 30 ERROR 1: libpng: IDAT: invalid distance too far back
> >> 
> >>  TEST: test_gdalwarp_32 ... success
> >>  TEST: test_gdalwarp_33 ... Diff at pixel (160, 0) : 7.000000
> >> 
> >> Diff at pixel (161, 0) : 1.000000
> >> Diff at pixel (162, 0) : 6.000000
> >> Diff at pixel (165, 0) : 2.000000
> >> Diff at pixel (167, 0) : 8.000000
> >> Diff at pixel (169, 0) : 8.000000
> >> Diff at pixel (173, 0) : 4.000000
> >> Diff at pixel (174, 0) : 9.000000
> >> Diff at pixel (176, 0) : 9.000000
> >> Diff at pixel (189, 0) : 10.000000
> >> Diff at pixel (266, 0) : 13.000000
> >> Diff at pixel (284, 0) : 17.000000
> >> Diff at pixel (172, 1) : 22.000000
> >> Diff at pixel (265, 1) : 31.000000
> >> Diff at pixel (301, 6) : 32.000000
> >> Diff at pixel (388, 37) : 38.000000
> >> Diff at pixel (118, 319) : 40.000000
> >> Max diff : 40
> >> Number of diffs : 3683
> >> fail
> >> 
> >>  TEST: test_gdalwarp_34 ... success
> >> 
> >> On Aug 23, 2013, at 11:27 AM, Even Rouault
> >> <even.rouault at mines-paris.org>
> > 
> > wrote:
> >>> Hi,
> >>> 
> >>> PSC members, please vote for the following motion after conducting your
> >>> own testing.
> >>> Non-PSC members please let us know if you discover problems.
> >>> 
> >>> ---
> >>> 
> >>> Motion: The GDAL/OGR 1.10.1RC1 package is promoted as the
> >>> final GDAL/OGR 1.10.1 release.
> >>> 
> >>> +1 Even
> >> 
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Sun Aug 25 15:16:20 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 26 Aug 2013 00:16:20 +0200
Subject: [gdal-dev] A Linux sandbox for the benefit of GDAL/OGR binaries :
	seccomp_launcher
Message-ID: <201308260016.20469.even.rouault@mines-paris.org>

Hi,

If you are interested by the topic of GDAL/OGR and software security, you 
might have a look at a recent blog post I've written : 

http://erouault.blogspot.fr/2013/08/a-linux-sandbox-for-benefit-of-gdalogr.html

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From hunt.glenn at gmail.com  Mon Aug 26 02:14:57 2013
From: hunt.glenn at gmail.com (BigBaka)
Date: Mon, 26 Aug 2013 02:14:57 -0700 (PDT)
Subject: [gdal-dev] ECW support on Fedora Linux - error
In-Reply-To: <1366533183978-5048546.post@n6.nabble.com>
References: <1343399620972-4991388.post@n6.nabble.com>
	<1347381748551-5001142.post@n6.nabble.com>
	<CA+rY5eKjyhVm_U6saYJ-QdSqpLFMW+ihrpJZ_PKso5UW9hf09w@mail.gmail.com>
	<5050ED7A.6030109@gatewaygeomatics.com>
	<1366267156093-5047841.post@n6.nabble.com>
	<1366270727114-5047862.post@n6.nabble.com>
	<CAAJeQgsxEUz5XV4Tuu_GCEpTz1Nn=TqbsieZA+Jxx-aJ9t4ZxA@mail.gmail.com>
	<516FC4A0.4080002@free.fr>
	<CAAJeQgvk0nhxhN_-19fM7VFucDtoS0uTwcmM2dborvgEtSgZ9A@mail.gmail.com>
	<1366533183978-5048546.post@n6.nabble.com>
Message-ID: <1377508497111-5074266.post@n6.nabble.com>

It's been a few months, but wondering if there are any instructions on how to
install this patch, or if tanasko managed to fix the error message saying
basic_string::_S_create

I also have the same problem on newly installed Ubuntu 12.04 with QGIS 1.8.

Any updates to this thread would be much appreciated.

Thx
BB



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/ECW-support-on-Fedora-Linux-error-tp4991388p5074266.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From oyvind.idland at gmail.com  Mon Aug 26 09:50:26 2013
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Mon, 26 Aug 2013 18:50:26 +0200
Subject: [gdal-dev] Geotransform - rotation and translation
Message-ID: <CAEVk4t3vGFb0m_WPgBgRaM4mm3doEO2ujqiPG4KiOtvZe7XNgQ@mail.gmail.com>

I am currently working on a driver for a proprietary format, which is being
consumed by ArcGis via GDAL.

These grids sometimes has a rotation with a specified pivot point. I
managed to get ArcGis to display the rotated grid by doing the following:

poDS->dGeoTransform[0] = originX;
poDS->dGeoTransform[1] = cos(rotation) * cellSizeX;
poDS->dGeoTransform[2] = -sin(rotation) * cellSizeX;
poDS->dGeoTransform[3] = originY;
poDS->dGeoTransform[4] = sin(rotation) * cellSizeY;
poDS->dGeoTransform[5] = cos(rotation) * cellSizeY;

Rotation is in radians. It works, but there is one problem: I need to
rotate the grid around the center of the corner cell (originX, originY),
but ends up getting rotation around the corner of the cell/raster instead.

There is a screenshot here, showing only the corner pixel. The topmost
grid/pixel was translated using custom geotransform in ArcGis, the bottom
one is the result of my GDAL rotation:
The cyan dot shows the pivot point:

http://i.stack.imgur.com/7HEvc.png


Is there any way to express this translation using the geotransform matrix ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130826/bd52190f/attachment.html>

From nhv at cape.com  Mon Aug 26 10:02:06 2013
From: nhv at cape.com (Norman Vine)
Date: Mon, 26 Aug 2013 13:02:06 -0400
Subject: [gdal-dev] Geotransform - rotation and translation
In-Reply-To: <CAEVk4t3vGFb0m_WPgBgRaM4mm3doEO2ujqiPG4KiOtvZe7XNgQ@mail.gmail.com>
References: <CAEVk4t3vGFb0m_WPgBgRaM4mm3doEO2ujqiPG4KiOtvZe7XNgQ@mail.gmail.com>
Message-ID: <104AAD89-CFEA-4DE0-9845-32C44A4BF96E@cape.com>


On Aug 26, 2013, at 12:50 PM, Oyvind Idland <oyvind.idland at gmail.com> wrote:

> I am currently working on a driver for a proprietary format, which is being consumed by ArcGis via GDAL.
> 
> These grids sometimes has a rotation with a specified pivot point. I managed to get ArcGis to display the rotated grid by doing the following: 
> 
> poDS->dGeoTransform[0] = originX;
> poDS->dGeoTransform[1] = cos(rotation) * cellSizeX;
> poDS->dGeoTransform[2] = -sin(rotation) * cellSizeX;
> poDS->dGeoTransform[3] = originY;
> poDS->dGeoTransform[4] = sin(rotation) * cellSizeY;
> poDS->dGeoTransform[5] = cos(rotation) * cellSizeY;
> 
> Rotation is in radians. It works, but there is one problem: I need to rotate the grid around the center of the corner cell (originX, originY), but ends up getting rotation around the corner of the cell/raster instead.
> 
> There is a screenshot here, showing only the corner pixel. The topmost grid/pixel was translated using custom geotransform in ArcGis, the bottom one is the result of my GDAL rotation:
> The cyan dot shows the pivot point:
> 
> http://i.stack.imgur.com/7HEvc.png
> 
> 
> Is there any way to express this translation using the geotransform matrix ?

I think this should work

poDS->dGeoTransform[0] = originX + cellSizeX/2.0;
poDS->dGeoTransform[1] = cos(rotation) * cellSizeX;
poDS->dGeoTransform[2] = -sin(rotation) * cellSizeX;
poDS->dGeoTransform[3] = originY - cellSizeY/2.0;
poDS->dGeoTransform[4] = sin(rotation) * cellSizeY;
poDS->dGeoTransform[5] = cos(rotation) * cellSizeY;


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130826/04ce32ff/attachment.html>

From even.rouault at mines-paris.org  Mon Aug 26 13:02:16 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 26 Aug 2013 22:02:16 +0200
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.10.1RC1 for release
In-Reply-To: <201308232027.08955.even.rouault@mines-paris.org>
References: <201308232027.08955.even.rouault@mines-paris.org>
Message-ID: <201308262202.17035.even.rouault@mines-paris.org>

> 
> Motion: The GDAL/OGR 1.10.1RC1 package is promoted as the
> final GDAL/OGR 1.10.1 release.
> 

Actually turning my vote to -1 since the fix for #5210 (DXF: fix writing of 25D 
linestring where z is not constant) caused a regression (ticket #5217). The 
regression seems to be fixed now. I'll issue a RC2 in the next minutes.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jrepetto at free.fr  Mon Aug 26 13:11:44 2013
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon, 26 Aug 2013 22:11:44 +0200
Subject: [gdal-dev] ECW support on Fedora Linux - error
In-Reply-To: <1377508497111-5074266.post@n6.nabble.com>
References: <1343399620972-4991388.post@n6.nabble.com>
	<1347381748551-5001142.post@n6.nabble.com>
	<CA+rY5eKjyhVm_U6saYJ-QdSqpLFMW+ihrpJZ_PKso5UW9hf09w@mail.gmail.com>
	<5050ED7A.6030109@gatewaygeomatics.com>
	<1366267156093-5047841.post@n6.nabble.com>
	<1366270727114-5047862.post@n6.nabble.com>
	<CAAJeQgsxEUz5XV4Tuu_GCEpTz1Nn=TqbsieZA+Jxx-aJ9t4ZxA@mail.gmail.com>
	<516FC4A0.4080002@free.fr>
	<CAAJeQgvk0nhxhN_-19fM7VFucDtoS0uTwcmM2dborvgEtSgZ9A@mail.gmail.com>
	<1366533183978-5048546.post@n6.nabble.com>
	<1377508497111-5074266.post@n6.nabble.com>
Message-ID: <521BB680.7060105@free.fr>

On 26/08/2013 11:14, BigBaka wrote:
> It's been a few months, but wondering if there are any instructions on how to
> install this patch, or if tanasko managed to fix the error message saying
> basic_string::_S_create
>
> I also have the same problem on newly installed Ubuntu 12.04 with QGIS 1.8.
>
> Any updates to this thread would be much appreciated.
>
> Thx
> BB
>

I have updated the instructions on the OSM wiki :
http://wiki.openstreetmap.org/wiki/ECW#Building_libecwj

Jean-Claude


From even.rouault at mines-paris.org  Mon Aug 26 13:32:32 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 26 Aug 2013 22:32:32 +0200
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.10.1RC2 for release
Message-ID: <201308262232.32697.even.rouault@mines-paris.org>

Hi,

I have prepared a GDAL/OGR 1.10.1 RC2. The difference between RC1 and RC2 is 
http://trac.osgeo.org/gdal/ticket/5214 and 
http://trac.osgeo.org/gdal/ticket/5217

PSC members, please vote for the following motion after conducting your own 
testing.
Non-PSC members please let us know if you discover problems.

Testing conversion of lines (2D and 3D) to DXF and checking of the result with 
non GDAL based DXF viewers would be appreciated to check if #5217 is properly 
fixed.

The source is available in one of the following archive formats :

  http://download.osgeo.org/gdal/1.10.1/gdal-1.10.1RC2.tar.xz
  http://download.osgeo.org/gdal/1.10.1/gdal-1.10.1RC2.tar.gz
  http://download.osgeo.org/gdal/1.10.1/gdal1101RC2.zip

---

Motion: The GDAL/OGR 1.10.1RC2 package is promoted as the
final GDAL/OGR 1.10.1 release.

+1 Even



-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From kyle at pobox.com  Mon Aug 26 19:26:29 2013
From: kyle at pobox.com (Kyle Shannon)
Date: Mon, 26 Aug 2013 20:26:29 -0600
Subject: [gdal-dev] gdal_edit.py -a_nodata none
In-Reply-To: <201308240035.10267.even.rouault@mines-paris.org>
References: <1377255958267-5073982.post@n6.nabble.com>
	<52178801.3070709@gmx.eu>
	<CAJ0mEz3euD33sX1OaDnYZsbv4-MWB=Yyd0u9uYCrrfcoBfGvOA@mail.gmail.com>
	<201308240035.10267.even.rouault@mines-paris.org>
Message-ID: <CAJ0mEz1eo__Ep4O4uUYBc9V55pJ3L2ktCh4Feu9uTUHHHS9F0Q@mail.gmail.com>

On Fri, Aug 23, 2013 at 4:35 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Le vendredi 23 ao?t 2013 23:21:06, Kyle Shannon a ?crit :
>> On Fri, Aug 23, 2013 at 10:04 AM, Hermann Peifer <peifer at gmx.eu> wrote:
>> > On 2013-08-23 15:23, Even Rouault wrote:
>> >> Selon peifer <peifer at gmx.eu>:
>> >>> Hi,
>> >>>
>> >>> http://www.gdal.org/gdal_edit.html states about -a_nodata
>> >>>
>> >>>> Assign a specified nodata value to output bands.
>> >>>> Can be set to none to remove a nodata value if one exists for the
>> >>>> dataset.
>> >>>
>> >>> I assume that none means the literal string `none', but what happens is
>> >>> given below.
>> >>>
>> >>> Is this just a plain bug or am I doing something terribly wrong?
>> >>
>> >> Hi Hermann,
>> >>
>> >> This is a documentation bug. This is not supported by the code. And
>> >> there's no
>> >> (standard) way in the GDAL API to remove a nodata value once it is set.
>> >>
>> >> Could you file a ticket about that ?
>> >
>> > Done, see http://trac.osgeo.org/gdal/ticket/5213
>> >
>> > Hermann
>> >
>> >
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev at lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> Even,
>> According to the docs at
>> http://gdal.org/classGDALRasterBand.html#ac6f081d253dee55c372e54cfdd8f05a6
>>
>> """To clear the nodata value, just set it with an "out of range"
>> value. Complex band no data values must have an imagery component of
>> zero."""
>>
>> This seems a little unreliable though, especially if changing the data
>> type in gdal_translate or some other app.  If the no data value is
>> copied and is within the new range for the new data type, the behavior
>> is unexpected(I think).  Should the docs state that once a no data
>> value is set, in cannot be unset as well?  I'm a bit confused.
>
> Yes, there's no definitive and clean way of unsetting a nodata value once it is
> set. Practically, you can workaround that by setting it to out of range. I'm
> not sure that conversion to a wider type will cause problems however, if the
> pixel values remain unchanged. For example if you have a byte pixel type, and
> pick -1 as nodata value, then translating it to signed int 16 will not really
> cause problems (immediately) since the pixel values will remain in the [0-255]
> range. Of course if the data is edited afterwards, then -1 coud be assigned to
> a pixel.

That was the situation I was referring to, when an 'invalid pixel' is
suddenly allowed.

>
> Feel free to edit the doc to add some caution wording.
>

I will probably add a note, no data stuff seems to always get me.

> Ideally the API should have a ClearNoDataValue() method. I'm not sure that
> many file formats could really implement it. PAM storage of course could
> support that. GeoTIFF probably too be erasing the GDAL_NODATA tag.

I checked a few drivers, and it appeared that GeoTIFF and HFA both
have a flag that signals if the no data value has been set and is
valid.  It seems that the best way to handle it would be similar.
Thanks for the reply.

>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html

kss

From oyvind.idland at gmail.com  Tue Aug 27 00:05:31 2013
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Tue, 27 Aug 2013 09:05:31 +0200
Subject: [gdal-dev] Geotransform - rotation and translation
In-Reply-To: <104AAD89-CFEA-4DE0-9845-32C44A4BF96E@cape.com>
References: <CAEVk4t3vGFb0m_WPgBgRaM4mm3doEO2ujqiPG4KiOtvZe7XNgQ@mail.gmail.com>
	<104AAD89-CFEA-4DE0-9845-32C44A4BF96E@cape.com>
Message-ID: <CAEVk4t0fze0NvqTBELJEZuC6+ixMJ8xX+irb_ZT=bZijBdp_Dg@mail.gmail.com>

That won't work, since it will move the corner point half a cell, and then
rotate around the new corner.

- ?yvind


On Mon, Aug 26, 2013 at 7:02 PM, Norman Vine <nhv at cape.com> wrote:

>
> On Aug 26, 2013, at 12:50 PM, Oyvind Idland <oyvind.idland at gmail.com>
> wrote:
>
> I am currently working on a driver for a proprietary format, which is
> being consumed by ArcGis via GDAL.
>
> These grids sometimes has a rotation with a specified pivot point. I
> managed to get ArcGis to display the rotated grid by doing the following:
>
> poDS->dGeoTransform[0] = originX;
> poDS->dGeoTransform[1] = cos(rotation) * cellSizeX;
> poDS->dGeoTransform[2] = -sin(rotation) * cellSizeX;
> poDS->dGeoTransform[3] = originY;
> poDS->dGeoTransform[4] = sin(rotation) * cellSizeY;
> poDS->dGeoTransform[5] = cos(rotation) * cellSizeY;
>
> Rotation is in radians. It works, but there is one problem: I need to
> rotate the grid around the center of the corner cell (originX, originY),
> but ends up getting rotation around the corner of the cell/raster instead.
>
> There is a screenshot here, showing only the corner pixel. The topmost
> grid/pixel was translated using custom geotransform in ArcGis, the bottom
> one is the result of my GDAL rotation:
> The cyan dot shows the pivot point:
>
> http://i.stack.imgur.com/7HEvc.png
>
>
> Is there any way to express this translation using the geotransform matrix
> ?
>
>
> I think this should work
>
> poDS->dGeoTransform[0] = originX + cellSizeX/2.0;
> poDS->dGeoTransform[1] = cos(rotation) * cellSizeX;
> poDS->dGeoTransform[2] = -sin(rotation) * cellSizeX;
> poDS->dGeoTransform[3] = originY - cellSizeY/2.0;
> poDS->dGeoTransform[4] = sin(rotation) * cellSizeY;
> poDS->dGeoTransform[5] = cos(rotation) * cellSizeY;
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130827/c1778d80/attachment.html>

From j.l.h.hartmann at uva.nl  Tue Aug 27 00:10:22 2013
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Tue, 27 Aug 2013 09:10:22 +0200
Subject: [gdal-dev] Geotransform - rotation and translation
In-Reply-To: <CAEVk4t0fze0NvqTBELJEZuC6+ixMJ8xX+irb_ZT=bZijBdp_Dg@mail.gmail.com>
References: <CAEVk4t3vGFb0m_WPgBgRaM4mm3doEO2ujqiPG4KiOtvZe7XNgQ@mail.gmail.com>
	<104AAD89-CFEA-4DE0-9845-32C44A4BF96E@cape.com>
	<CAEVk4t0fze0NvqTBELJEZuC6+ixMJ8xX+irb_ZT=bZijBdp_Dg@mail.gmail.com>
Message-ID: <521C50DE.7010006@uva.nl>

The only way would be then to concatenate the transformations: first 
rotate and then translate half a pixel width. The computation can be 
simplified by matrix multiplication:

http://www.mathplanet.com/education/geometry/transformations/transformation-using-matrices

Jan
> That won't work, since it will move the corner point half a cell, and 
> then rotate around the new corner.
>
> - ?yvind
>
>
> On Mon, Aug 26, 2013 at 7:02 PM, Norman Vine <nhv at cape.com 
> <mailto:nhv at cape.com>> wrote:
>
>
>     On Aug 26, 2013, at 12:50 PM, Oyvind Idland
>     <oyvind.idland at gmail.com <mailto:oyvind.idland at gmail.com>> wrote:
>
>>     I am currently working on a driver for a proprietary format,
>>     which is being consumed by ArcGis via GDAL.
>>
>>     These grids sometimes has a rotation with a specified pivot
>>     point. I managed to get ArcGis to display the rotated grid by
>>     doing the following:
>>
>>     poDS->dGeoTransform[0] = originX;
>>     poDS->dGeoTransform[1] = cos(rotation) * cellSizeX;
>>     poDS->dGeoTransform[2] = -sin(rotation) * cellSizeX;
>>     poDS->dGeoTransform[3] = originY;
>>     poDS->dGeoTransform[4] = sin(rotation) * cellSizeY;
>>     poDS->dGeoTransform[5] = cos(rotation) * cellSizeY;
>>
>>     Rotation is in radians. It works, but there is one problem: I
>>     need to rotate the grid around the center of the corner cell
>>     (originX, originY), but ends up getting rotation around the
>>     corner of the cell/raster instead.
>>
>>     There is a screenshot here, showing only the corner pixel. The
>>     topmost grid/pixel was translated using custom geotransform in
>>     ArcGis, the bottom one is the result of my GDAL rotation:
>>     The cyan dot shows the pivot point:
>>
>>     http://i.stack.imgur.com/7HEvc.png
>>
>>
>>     Is there any way to express this translation using the
>>     geotransform matrix ?
>
>     I think this should work
>
>     poDS->dGeoTransform[0] = originX + cellSizeX/2.0;
>     poDS->dGeoTransform[1] = cos(rotation) * cellSizeX;
>     poDS->dGeoTransform[2] = -sin(rotation) * cellSizeX;
>     poDS->dGeoTransform[3] = originY - cellSizeY/2.0;
>     poDS->dGeoTransform[4] = sin(rotation) * cellSizeY;
>     poDS->dGeoTransform[5] = cos(rotation) * cellSizeY;
>
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130827/4ad8f3e1/attachment-0001.html>

From iacovlev.pavel at gmail.com  Tue Aug 27 02:19:57 2013
From: iacovlev.pavel at gmail.com (Pavel Iacovlev)
Date: Tue, 27 Aug 2013 12:19:57 +0300
Subject: [gdal-dev] Accessing ArcGIS Rest service troubles
Message-ID: <CAHWp1L8HKsw1wSmgv2V_Yenk40m_7tcmO4i=KTeEm_WUDH7QuA@mail.gmail.com>

Hello,

I get a segmentation fault when I try to access data from an ArcGIS
Rest service:
OS: Ubuntu 12.04
GDAL: GDAL 1.9.2, released 2012/10/08
GDB:
Starting program: /usr/bin/gdalinfo
"http://geoportal.ancpi.ro/cachegis/rest/services/ImobileStereoPublic/MapServer?f=json&pretty=true"
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
Program received signal SIGSEGV, Segmentation fault.
0x00007ffff73d4c50 in std::vector<std::string,
std::allocator<std::string> >::~vector() () from /usr/lib/libgdal.so.1

I tried on a different machine where I have a newer GDAL, here it's
just a unsupported format error
OS: Ubuntu 10.04
GDAL: GDAL 1.10.0, released 2013/04/24
ERROR 4: `/vsimem/http_1/file.dat' not recognised as a supported file format.
ERROR 4: `/tmp/file.dat' not recognised as a supported file format.
gdalinfo failed - unable to open
'http://geoportal.ancpi.ro/cachegis/rest/services/ImobileStereoPublic/MapServer?f=json&pretty=true'.

Any ideas whats wrong ?

Best Regards
Iacovlev Pavel

From darrel.maddy at newcastle.ac.uk  Tue Aug 27 06:51:06 2013
From: darrel.maddy at newcastle.ac.uk (Darrel Maddy)
Date: Tue, 27 Aug 2013 13:51:06 +0000
Subject: [gdal-dev] problems with compilation in vs2012
In-Reply-To: <5861D45D06923A40B3B14CB3066076210177391C@EXMBCT03.campus.ncl.ac.uk>
References: <5861D45D06923A40B3B14CB3066076210177391C@EXMBCT03.campus.ncl.ac.uk>
Message-ID: <5861D45D06923A40B3B14CB3066076210177394F@EXMBCT03.campus.ncl.ac.uk>

Hi all,

I'm not entirely sure what I can do next.

We use gdal to input and output grids from our Landscape Evolution Model. Everything is working fine under linux but we are trying to develop cross-platform.

I downloaded the gdal-1.10.0 zip and altered the #win64 element of the options file and compiled using nmake -f makefile.vc MSCV_VER=1700 after running the vcvarsall.bat for amd64 . The library looks fine.

I have all the project properties setup to see the source directories (includes : default, plus gcore and port) and the linker is shown the way to the gdal.lib file.  Despite knowing where the library is I am getting the following linker errors

1>     Creating library E:\vs2012 projects\iwaveVS\x64\Release\iwaveVS.lib and object E:\vs2012 projects\iwaveVS\x64\Release\iwaveVS.exp
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_closesocket
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_connect
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_recv
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_send
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_socket
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_WSAStartup
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_WSACleanup
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_getaddrinfo
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_freeaddrinfo
1>E:\vs2012 projects\iwaveVS\x64\Release\iwaveVS.exe : fatal error LNK1120: 9 unresolved externals
1>
1>Build FAILED.

I have done this many times against earlier gdal libraries using VS2010 and not had this problem ( note I did however, in desperation compile against VER=1600 and set the toolset in VS2012 to 2010 but that had the same issue).

What am I missing?

Apologies if this is a stupid question.

Darrel

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130827/de8d30ab/attachment.html>

From szekerest at gmail.com  Tue Aug 27 08:57:13 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue, 27 Aug 2013 17:57:13 +0200
Subject: [gdal-dev] problems with compilation in vs2012
In-Reply-To: <5861D45D06923A40B3B14CB3066076210177394F@EXMBCT03.campus.ncl.ac.uk>
References: <5861D45D06923A40B3B14CB3066076210177391C@EXMBCT03.campus.ncl.ac.uk>
	<5861D45D06923A40B3B14CB3066076210177394F@EXMBCT03.campus.ncl.ac.uk>
Message-ID: <CACALY+S_v8NpPn-q7JxG6mJDh3n=LXAcijm3p3HC3AtN+0yk1g@mail.gmail.com>

Darrel,

Looks like the winsock library should also be included as an input for the
linker of your app. (ie. wsock32.lib).

Best regards,

Tamas



2013/8/27 Darrel Maddy <darrel.maddy at newcastle.ac.uk>

>  Hi all,****
>
> ** **
>
> I?m not entirely sure what I can do next. ****
>
> ** **
>
> We use gdal to input and output grids from our Landscape Evolution Model.
> Everything is working fine under linux but we are trying to develop
> cross-platform.****
>
> ** **
>
> I downloaded the gdal-1.10.0 zip and altered the #win64 element of the
> options file and compiled using nmake ?f makefile.vc MSCV_VER=1700 after
> running the vcvarsall.bat for amd64 . The library looks fine.****
>
> ** **
>
> I have all the project properties setup to see the source directories
> (includes : default, plus gcore and port) and the linker is shown the way
> to the gdal.lib file.  Despite knowing where the library is I am getting
> the following linker errors****
>
> ** **
>
> 1>     Creating library E:\vs2012 projects\iwaveVS\x64\Release\iwaveVS.lib
> and object E:\vs2012 projects\iwaveVS\x64\Release\iwaveVS.exp****
>
> 1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external
> symbol __imp_closesocket****
>
> 1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external
> symbol __imp_connect****
>
> 1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external
> symbol __imp_recv****
>
> 1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external
> symbol __imp_send****
>
> 1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external
> symbol __imp_socket****
>
> 1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external
> symbol __imp_WSAStartup****
>
> 1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external
> symbol __imp_WSACleanup****
>
> 1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external
> symbol __imp_getaddrinfo****
>
> 1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external
> symbol __imp_freeaddrinfo****
>
> 1>E:\vs2012 projects\iwaveVS\x64\Release\iwaveVS.exe : fatal error
> LNK1120: 9 unresolved externals****
>
> 1>****
>
> 1>Build FAILED.****
>
> ** **
>
> I have done this many times against earlier gdal libraries using VS2010
> and not had this problem ( note I did however, in desperation compile
> against VER=1600 and set the toolset in VS2012 to 2010 but that had the
> same issue).****
>
> ** **
>
> What am I missing?****
>
> ** **
>
> Apologies if this is a stupid question.****
>
> ** **
>
> Darrel****
>
> ** **
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130827/c3c08eb4/attachment.html>

From darrel.maddy at newcastle.ac.uk  Tue Aug 27 09:09:40 2013
From: darrel.maddy at newcastle.ac.uk (Darrel Maddy)
Date: Tue, 27 Aug 2013 16:09:40 +0000
Subject: [gdal-dev] problems with compilation in vs2012
In-Reply-To: <CACALY+S_v8NpPn-q7JxG6mJDh3n=LXAcijm3p3HC3AtN+0yk1g@mail.gmail.com>
References: <5861D45D06923A40B3B14CB3066076210177391C@EXMBCT03.campus.ncl.ac.uk>
	<5861D45D06923A40B3B14CB3066076210177394F@EXMBCT03.campus.ncl.ac.uk>
	<CACALY+S_v8NpPn-q7JxG6mJDh3n=LXAcijm3p3HC3AtN+0yk1g@mail.gmail.com>
Message-ID: <5861D45D06923A40B3B14CB30660762101773B1B@EXMBCT03.campus.ncl.ac.uk>

Hi Tamas,

Thanks that helped ( although I have never had to add that before?) but I am still left with

1>  All outputs are up-to-date.
1>Link:
1>     Creating library E:\vs2012 projects\iwaveVS\x64\Release\iwaveVS.lib and object E:\vs2012 projects\iwaveVS\x64\Release\iwaveVS.exp
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_getaddrinfo
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_freeaddrinfo
1>E:\vs2012 projects\iwaveVS\x64\Release\iwaveVS.exe : fatal error LNK1120: 2 unresolved externals
1>

Any ideas?

Thanks again

Darrel



From: Tamas Szekeres [mailto:szekerest at gmail.com]
Sent: 27 August 2013 16:57
To: Darrel Maddy
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] problems with compilation in vs2012

Darrel,

Looks like the winsock library should also be included as an input for the linker of your app. (ie. wsock32.lib).

Best regards,

Tamas


2013/8/27 Darrel Maddy <darrel.maddy at newcastle.ac.uk<mailto:darrel.maddy at newcastle.ac.uk>>
Hi all,

I?m not entirely sure what I can do next.

We use gdal to input and output grids from our Landscape Evolution Model. Everything is working fine under linux but we are trying to develop cross-platform.

I downloaded the gdal-1.10.0 zip and altered the #win64 element of the options file and compiled using nmake ?f makefile.vc<http://makefile.vc> MSCV_VER=1700 after running the vcvarsall.bat for amd64 . The library looks fine.

I have all the project properties setup to see the source directories (includes : default, plus gcore and port) and the linker is shown the way to the gdal.lib file.  Despite knowing where the library is I am getting the following linker errors

1>     Creating library E:\vs2012 projects\iwaveVS\x64\Release\iwaveVS.lib and object E:\vs2012 projects\iwaveVS\x64\Release\iwaveVS.exp
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_closesocket
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_connect
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_recv
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_send
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_socket
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_WSAStartup
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_WSACleanup
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_getaddrinfo
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_freeaddrinfo
1>E:\vs2012 projects\iwaveVS\x64\Release\iwaveVS.exe : fatal error LNK1120: 9 unresolved externals
1>
1>Build FAILED.

I have done this many times against earlier gdal libraries using VS2010 and not had this problem ( note I did however, in desperation compile against VER=1600 and set the toolset in VS2012 to 2010 but that had the same issue).

What am I missing?

Apologies if this is a stupid question.

Darrel


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130827/6980b0f5/attachment-0001.html>

From jan.verbesselt at wur.nl  Tue Aug 27 08:55:24 2013
From: jan.verbesselt at wur.nl (Verbesselt, Jan)
Date: Tue, 27 Aug 2013 15:55:24 +0000
Subject: [gdal-dev] how to aggregate an image to a lower resolution using
 gdal (gdalwarp?)
Message-ID: <CE427279.7C14%jan.verbesselt@wur.nl>

Hi all,

I have been testing gdalwarp to aggregate (using -r average) an image.
In order to better understand what is happening I have created a
reproducible example within an R environment and compared it with the
aggregate function of the R raster package (see below). There are some
differences between the gdalwarp raster (r2) and the aggregated raster
(r1).

How is the gdalwarp -r average working? Which pixels are selected for
averaging (e.g.the corner pixels, center pixels, or all within the
aggregation window)?

If there is a gdal aggregate option to average pixels comparable to the
aggregate function in the R raster package, it would be great as that
would potentially faster, and you could also reproject and aggregate at
once.

Thanks!
Jan

http://bfast.r-forge.r-project.org
http://goo.gl/1mBC5F


## R script
require(raster)
filei <- '10by10.tif'
fileo <- '5by5.tif'

set.seed(123)
r <- raster(ncols=36, nrows=18)
r <- setValues(r, round(runif(ncell(r))*10))
r
plot(r)
writeRaster(r, filename=filei, overwrite = TRUE)

## aggregate using R aggregate function using the mean
r1 <- aggregate(r, fact=2, fun = mean, na.rm = TRUE)

cmd <- paste("gdalwarp -r average -tr 20 20 -te -180 -90 180 90 ",
             filei, " ", fileo, sep = "")
system(cmd)
r2 <- raster(fileo)

## compare
plot(r1)
plot(r2)
r1
r2
getValues(r1)
getValues(r2)

## 
plot(r1-r2)
sessionInfo()

R> sessionInfo()
R version 3.0.1 (2013-05-16)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8 LC_NUMERIC=C         LC_TIME=C
LC_COLLATE=C         LC_MONETARY=C
 [6] LC_MESSAGES=C        LC_PAPER=C           LC_NAME=C
LC_ADDRESS=C         LC_TELEPHONE=C
[11] LC_MEASUREMENT=C     LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] rgdal_0.8-10  raster_2.1-49 sp_1.0-11

loaded via a namespace (and not attached):
[1] grid_3.0.1      lattice_0.20-23 tools_3.0.1


rgdal: version: 0.8-10, (SVN revision 478)
Geospatial Data Abstraction Library extensions to R successfully loaded
Loaded GDAL runtime: GDAL 1.10.0, released 2013/04/24
Path to GDAL shared files: /usr/share/gdal/1.10
Loaded PROJ.4 runtime: Rel. 4.8.0, 6 March 2012, [PJ_VERSION: 480]
Path to PROJ.4 shared files: (autodetected)











From darrel.maddy at newcastle.ac.uk  Tue Aug 27 09:22:18 2013
From: darrel.maddy at newcastle.ac.uk (Darrel Maddy)
Date: Tue, 27 Aug 2013 16:22:18 +0000
Subject: [gdal-dev] problems with compilation in vs2012
In-Reply-To: <5861D45D06923A40B3B14CB30660762101773B1B@EXMBCT03.campus.ncl.ac.uk>
References: <5861D45D06923A40B3B14CB3066076210177391C@EXMBCT03.campus.ncl.ac.uk>
	<5861D45D06923A40B3B14CB3066076210177394F@EXMBCT03.campus.ncl.ac.uk>
	<CACALY+S_v8NpPn-q7JxG6mJDh3n=LXAcijm3p3HC3AtN+0yk1g@mail.gmail.com>
	<5861D45D06923A40B3B14CB30660762101773B1B@EXMBCT03.campus.ncl.ac.uk>
Message-ID: <5861D45D06923A40B3B14CB30660762101773B70@EXMBCT03.campus.ncl.ac.uk>

OK I solved it.

I added ws2_32.lib to the libs in the linker. Sorry I should have been able to find this earlier, albeit I do not know why I suddenly have to start adding these ? I guess something that VS2012 does differently.

Anyhow thanks for your help.

Darrel

From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Darrel Maddy
Sent: 27 August 2013 17:10
To: Tamas Szekeres
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] problems with compilation in vs2012

Hi Tamas,

Thanks that helped ( although I have never had to add that before?) but I am still left with

1>  All outputs are up-to-date.
1>Link:
1>     Creating library E:\vs2012 projects\iwaveVS\x64\Release\iwaveVS.lib and object E:\vs2012 projects\iwaveVS\x64\Release\iwaveVS.exp
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_getaddrinfo
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_freeaddrinfo
1>E:\vs2012 projects\iwaveVS\x64\Release\iwaveVS.exe : fatal error LNK1120: 2 unresolved externals
1>

Any ideas?

Thanks again

Darrel



From: Tamas Szekeres [mailto:szekerest at gmail.com]
Sent: 27 August 2013 16:57
To: Darrel Maddy
Cc: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] problems with compilation in vs2012

Darrel,

Looks like the winsock library should also be included as an input for the linker of your app. (ie. wsock32.lib).

Best regards,

Tamas


2013/8/27 Darrel Maddy <darrel.maddy at newcastle.ac.uk<mailto:darrel.maddy at newcastle.ac.uk>>
Hi all,

I?m not entirely sure what I can do next.

We use gdal to input and output grids from our Landscape Evolution Model. Everything is working fine under linux but we are trying to develop cross-platform.

I downloaded the gdal-1.10.0 zip and altered the #win64 element of the options file and compiled using nmake ?f makefile.vc<http://makefile.vc> MSCV_VER=1700 after running the vcvarsall.bat for amd64 . The library looks fine.

I have all the project properties setup to see the source directories (includes : default, plus gcore and port) and the linker is shown the way to the gdal.lib file.  Despite knowing where the library is I am getting the following linker errors

1>     Creating library E:\vs2012 projects\iwaveVS\x64\Release\iwaveVS.lib and object E:\vs2012 projects\iwaveVS\x64\Release\iwaveVS.exp
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_closesocket
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_connect
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_recv
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_send
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_socket
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_WSAStartup
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_WSACleanup
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_getaddrinfo
1>gdal.lib(gdalclientserver.obj) : error LNK2001: unresolved external symbol __imp_freeaddrinfo
1>E:\vs2012 projects\iwaveVS\x64\Release\iwaveVS.exe : fatal error LNK1120: 9 unresolved externals
1>
1>Build FAILED.

I have done this many times against earlier gdal libraries using VS2010 and not had this problem ( note I did however, in desperation compile against VER=1600 and set the toolset in VS2012 to 2010 but that had the same issue).

What am I missing?

Apologies if this is a stupid question.

Darrel


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130827/17334011/attachment-0001.html>

From even.rouault at mines-paris.org  Tue Aug 27 11:43:16 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 27 Aug 2013 20:43:16 +0200
Subject: [gdal-dev] Accessing ArcGIS Rest service troubles
In-Reply-To: <CAHWp1L8HKsw1wSmgv2V_Yenk40m_7tcmO4i=KTeEm_WUDH7QuA@mail.gmail.com>
References: <CAHWp1L8HKsw1wSmgv2V_Yenk40m_7tcmO4i=KTeEm_WUDH7QuA@mail.gmail.com>
Message-ID: <201308272043.17155.even.rouault@mines-paris.org>

Le mardi 27 ao?t 2013 11:19:57, Pavel Iacovlev a ?crit :
> Hello,
> 
> I get a segmentation fault when I try to access data from an ArcGIS
> Rest service:
> OS: Ubuntu 12.04
> GDAL: GDAL 1.9.2, released 2012/10/08
> GDB:
> Starting program: /usr/bin/gdalinfo
> "http://geoportal.ancpi.ro/cachegis/rest/services/ImobileStereoPublic/MapSe
> rver?f=json&pretty=true" [Thread debugging using libthread_db enabled]
> Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
> Program received signal SIGSEGV, Segmentation fault.
> 0x00007ffff73d4c50 in std::vector<std::string,
> std::allocator<std::string> >::~vector() () from /usr/lib/libgdal.so.1

I don't reproduce the crash with 1.9.2 on the older Ubuntu 10.04

> 
> I tried on a different machine where I have a newer GDAL, here it's
> just a unsupported format error
> OS: Ubuntu 10.04
> GDAL: GDAL 1.10.0, released 2013/04/24
> ERROR 4: `/vsimem/http_1/file.dat' not recognised as a supported file
> format. ERROR 4: `/tmp/file.dat' not recognised as a supported file
> format. gdalinfo failed - unable to open
> 'http://geoportal.ancpi.ro/cachegis/rest/services/ImobileStereoPublic/MapSe
> rver?f=json&pretty=true'.
> 
> Any ideas whats wrong ?

Nothing. It is just that this ressource is a ArcGIS raster map, and this is 
not supported currently. Only vector JSON is supported through ogrinfo.

> 
> Best Regards
> Iacovlev Pavel
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From iacovlev.pavel at gmail.com  Tue Aug 27 11:55:37 2013
From: iacovlev.pavel at gmail.com (Pavel Iacovlev)
Date: Tue, 27 Aug 2013 21:55:37 +0300
Subject: [gdal-dev] Accessing ArcGIS Rest service troubles
In-Reply-To: <201308272043.17155.even.rouault@mines-paris.org>
References: <CAHWp1L8HKsw1wSmgv2V_Yenk40m_7tcmO4i=KTeEm_WUDH7QuA@mail.gmail.com>
	<201308272043.17155.even.rouault@mines-paris.org>
Message-ID: <CAHWp1L9S=PLLU=DcGf1oC+d0coZq3cvGV=dsj0wYgBgmV=gK_g@mail.gmail.com>

Thank you, and sorry for not reading the docs more carefully.

On Tue, Aug 27, 2013 at 9:43 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Le mardi 27 ao?t 2013 11:19:57, Pavel Iacovlev a ?crit :
>> Hello,
>>
>> I get a segmentation fault when I try to access data from an ArcGIS
>> Rest service:
>> OS: Ubuntu 12.04
>> GDAL: GDAL 1.9.2, released 2012/10/08
>> GDB:
>> Starting program: /usr/bin/gdalinfo
>> "http://geoportal.ancpi.ro/cachegis/rest/services/ImobileStereoPublic/MapSe
>> rver?f=json&pretty=true" [Thread debugging using libthread_db enabled]
>> Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
>> Program received signal SIGSEGV, Segmentation fault.
>> 0x00007ffff73d4c50 in std::vector<std::string,
>> std::allocator<std::string> >::~vector() () from /usr/lib/libgdal.so.1
>
> I don't reproduce the crash with 1.9.2 on the older Ubuntu 10.04
>
>>
>> I tried on a different machine where I have a newer GDAL, here it's
>> just a unsupported format error
>> OS: Ubuntu 10.04
>> GDAL: GDAL 1.10.0, released 2013/04/24
>> ERROR 4: `/vsimem/http_1/file.dat' not recognised as a supported file
>> format. ERROR 4: `/tmp/file.dat' not recognised as a supported file
>> format. gdalinfo failed - unable to open
>> 'http://geoportal.ancpi.ro/cachegis/rest/services/ImobileStereoPublic/MapSe
>> rver?f=json&pretty=true'.
>>
>> Any ideas whats wrong ?
>
> Nothing. It is just that this ressource is a ArcGIS raster map, and this is
> not supported currently. Only vector JSON is supported through ogrinfo.
>
>>
>> Best Regards
>> Iacovlev Pavel
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html

From Ismael.BELAAOUAD at circet.fr  Wed Aug 28 00:29:25 2013
From: Ismael.BELAAOUAD at circet.fr (Ismael BELAAOUAD)
Date: Wed, 28 Aug 2013 07:29:25 +0000
Subject: [gdal-dev] [Gdal-dev] gDAL --> DIB
Message-ID: <48BACD2DFBC9B248B827A22708A9AEC11DCB9DE0@SRV-EX.circet.net>

Hi Alain,
I know that this subject is too old but I'm trying to use GDALCreateDib function you've posted in 2005 but It's not working and there is no error.
I've only detected that bmi variable don't take any value during debug...
Can you please help me?
Best regards,


________________________________________

Isma?l BELAAOUAD 
Project Manager
Conception & D?veloppement Corolle
T?l. : 03 2964 3940?
Gsm?: 06 3785 4420 ou 06 2747 0006 (Perso)
Circet Est : 4,?rue de la Bassagard - Zone du Pr? Drou? - 88150 Chavelot
www.circet.fr


Alain Rist?ar at navpoch.com?
Tue Feb 8 19:18:47 EST 2005
. Previous message:?[Gdal-dev] gDAL --> DIB
. Next message:?[Gdal-dev] Mail Delivery (failure gdal-dev at remotesensing.org)
. Messages sorted by:?[ date ]?[ thread ]?[ subject ]?[ author ]
________________________________________
Hi Bruce,

As Frank says all that is done by GDALCreateDib is call poDataset->GetRasterBand()->RasterIO() and cleanly fill a DIB with the result of these calls.

How RasterIO deals with size shrinks is a GDAL problem ;-)

BTW there is a (very) small bug in the code I posted at http://article.gmane.org/gmane.comp.gis.gdal.devel/2269/ . If someone requests I can post an updated version.

The XP GDI+ library is much more powerful than GDI. If you write a CGdalImage class derived from CImage, I will be glad to use it.

cheers
AR


From hunt.glenn at gmail.com  Wed Aug 28 00:53:53 2013
From: hunt.glenn at gmail.com (BigBaka)
Date: Wed, 28 Aug 2013 00:53:53 -0700 (PDT)
Subject: [gdal-dev] ECW support on Fedora Linux - error
In-Reply-To: <521BB680.7060105@free.fr>
References: <CA+rY5eKjyhVm_U6saYJ-QdSqpLFMW+ihrpJZ_PKso5UW9hf09w@mail.gmail.com>
	<5050ED7A.6030109@gatewaygeomatics.com>
	<1366267156093-5047841.post@n6.nabble.com>
	<1366270727114-5047862.post@n6.nabble.com>
	<CAAJeQgsxEUz5XV4Tuu_GCEpTz1Nn=TqbsieZA+Jxx-aJ9t4ZxA@mail.gmail.com>
	<516FC4A0.4080002@free.fr>
	<CAAJeQgvk0nhxhN_-19fM7VFucDtoS0uTwcmM2dborvgEtSgZ9A@mail.gmail.com>
	<1366533183978-5048546.post@n6.nabble.com>
	<1377508497111-5074266.post@n6.nabble.com>
	<521BB680.7060105@free.fr>
Message-ID: <1377676433102-5074721.post@n6.nabble.com>

Thanks Jean-Claude that will be a big help to many I'm sure.

Alas, I have already compiled an installed using the following commands
should I first remove libgdal-ecw-src? Or can I just run as per your link
from scratch? If I need to remove, could you please give some commands as to
how to successfully remove.

Thanks,
BB

previously I've installed using the commands below.

sudo apt-get install libgdal-ecw-src build-essential
wget
http://de-mirror.org/distro/gentoo/distfiles/libecwj2-3.3-2006-09-06.zip
unzip libecwj2-3.3-2006-09-06.zip
cd libecwj2-3.3
./configure
make
sudo make install
sudo gdal-ecw-build /usr/local/
sudo ldconfig
gdalinfo --formats | grep -i ecw



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/ECW-support-on-Fedora-Linux-error-tp4991388p5074721.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From adiba.nizami at gmail.com  Wed Aug 28 01:24:08 2013
From: adiba.nizami at gmail.com (garfy)
Date: Wed, 28 Aug 2013 01:24:08 -0700 (PDT)
Subject: [gdal-dev] gdalwarp no data option
Message-ID: <1377678248897-5074732.post@n6.nabble.com>

Using gdalwarp mosaic, and setting nodata as "0" , I have been able to mosaic
successfully.
But in my case, "0" = no data when out of image extents, and inside extents
it is a valid value.
Can some one explain if the value 0 comes in image extents , how does gdal
handle it ?



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdalwarp-no-data-option-tp5074732.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Wed Aug 28 01:32:21 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 28 Aug 2013 10:32:21 +0200
Subject: [gdal-dev] gdalwarp no data option
In-Reply-To: <1377678248897-5074732.post@n6.nabble.com>
References: <1377678248897-5074732.post@n6.nabble.com>
Message-ID: <201308281032.21829.even.rouault@mines-paris.org>

Le mercredi 28 ao?t 2013 10:24:08, garfy a ?crit :
> Using gdalwarp mosaic, and setting nodata as "0" , I have been able to
> mosaic successfully.
> But in my case, "0" = no data when out of image extents, and inside extents
> it is a valid value.
> Can some one explain if the value 0 comes in image extents , how does gdal
> handle it ?

You should use a nodata value that isn't a valid value inside the extent of 
your image, otherwise tools processing your mosaic will display the 0 valued 
pixel as nodata.

An alternative to using nodata is to ask for the creation of an alpha band 
with the -dstalpha option.

> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/gdalwarp-no-data-option-tp5074732.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From Ismael.BELAAOUAD at circet.fr  Wed Aug 28 08:03:25 2013
From: Ismael.BELAAOUAD at circet.fr (Ismael BELAAOUAD)
Date: Wed, 28 Aug 2013 15:03:25 +0000
Subject: [gdal-dev] GDAL -> DIB
Message-ID: <48BACD2DFBC9B248B827A22708A9AEC11DCBA095@SRV-EX.circet.net>

Hello,

I'm trying to load GDAL Raster dataset into DIB (Device Independent Bitmap) in C++ project.
Can someone help me with that?

Best regards,



Isma?l BELAAOUAD 
Project Manager
Conception & D?veloppement Corolle
T?l. : 03 2964 3940?
Gsm?: 06 3785 4420 ou 06 2747 0006 (Perso)
Circet Est : 4,?rue de la Bassagard - Zone du Pr? Drou? - 88150 Chavelot - France
www.circet.fr



From jrepetto at free.fr  Wed Aug 28 09:10:19 2013
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed, 28 Aug 2013 18:10:19 +0200
Subject: [gdal-dev] GDAL -> DIB
In-Reply-To: <48BACD2DFBC9B248B827A22708A9AEC11DCBA095@SRV-EX.circet.net>
References: <48BACD2DFBC9B248B827A22708A9AEC11DCBA095@SRV-EX.circet.net>
Message-ID: <521E20EB.7020103@free.fr>

Le 28/08/2013 17:03, Ismael BELAAOUAD a ?crit :
> Hello,
>
> I'm trying to load GDAL Raster dataset into DIB (Device Independent Bitmap) in C++ project.
> Can someone help me with that?
>
> Best regards,
>

Hi,

Have you read the tutorial at http://www.gdal.org/gdal_tutorial.html ?

Jean-Claude


From lucena_ivan at hotmail.com  Wed Aug 28 10:16:37 2013
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Wed, 28 Aug 2013 13:16:37 -0400
Subject: [gdal-dev] GDAL -> DIB
In-Reply-To: <521E20EB.7020103@free.fr>
References: <48BACD2DFBC9B248B827A22708A9AEC11DCBA095@SRV-EX.circet.net>,
	<521E20EB.7020103@free.fr>
Message-ID: <BLU173-W46DBB98B29FADD062848DD904B0@phx.gbl>

Hi there,

The tutorial will help you navigate through the GDAL API and from that you can learn how to take the information you want to build your DIB. If you are using C++ against the MSFC, you might take a look at the GDAL C# applications examples on swig/csharp/apps [http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps] and you can see how yo take data from the GDAL Dataset to a Bitmap and by analogy find what you should do in MSFC C++. Just one idea.

Regards,

Ivan 

> Date: Wed, 28 Aug 2013 18:10:19 +0200
> From: jrepetto at free.fr
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] GDAL -> DIB
> 
> Le 28/08/2013 17:03, Ismael BELAAOUAD a ?crit :
> > Hello,
> >
> > I'm trying to load GDAL Raster dataset into DIB (Device Independent Bitmap) in C++ project.
> > Can someone help me with that?
> >
> > Best regards,
> >
> 
> Hi,
> 
> Have you read the tutorial at http://www.gdal.org/gdal_tutorial.html ?
> 
> Jean-Claude
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130828/cb36538b/attachment.html>

From even.rouault at mines-paris.org  Wed Aug 28 11:40:51 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 28 Aug 2013 20:40:51 +0200
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.10.1RC2 for release
In-Reply-To: <201308262232.32697.even.rouault@mines-paris.org>
References: <201308262232.32697.even.rouault@mines-paris.org>
Message-ID: <201308282040.52074.even.rouault@mines-paris.org>

Gentlemen,

this is a friendly reminder that this motion is open for vote.

Even


> Hi,
> 
> I have prepared a GDAL/OGR 1.10.1 RC2. The difference between RC1 and RC2
> is http://trac.osgeo.org/gdal/ticket/5214 and
> http://trac.osgeo.org/gdal/ticket/5217
> 
> PSC members, please vote for the following motion after conducting your own
> testing.
> Non-PSC members please let us know if you discover problems.
> 
> Testing conversion of lines (2D and 3D) to DXF and checking of the result
> with non GDAL based DXF viewers would be appreciated to check if #5217 is
> properly fixed.
> 
> The source is available in one of the following archive formats :
> 
>   http://download.osgeo.org/gdal/1.10.1/gdal-1.10.1RC2.tar.xz
>   http://download.osgeo.org/gdal/1.10.1/gdal-1.10.1RC2.tar.gz
>   http://download.osgeo.org/gdal/1.10.1/gdal1101RC2.zip
> 
> ---
> 
> Motion: The GDAL/OGR 1.10.1RC2 package is promoted as the
> final GDAL/OGR 1.10.1 release.
> 
> +1 Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From dmorissette at mapgears.com  Wed Aug 28 11:50:55 2013
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed, 28 Aug 2013 14:50:55 -0400
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.10.1RC2 for release
In-Reply-To: <201308282040.52074.even.rouault@mines-paris.org>
References: <201308262232.32697.even.rouault@mines-paris.org>
	<201308282040.52074.even.rouault@mines-paris.org>
Message-ID: <521E468F.5040203@mapgears.com>

+0.5 I don't think I'll have time to test in the next few days but am 
supportive of the release.

Daniel

On 13-08-28 2:40 PM, Even Rouault wrote:
> Gentlemen,
>
> this is a friendly reminder that this motion is open for vote.
>
> Even
>
>
>> Hi,
>>
>> I have prepared a GDAL/OGR 1.10.1 RC2. The difference between RC1 and RC2
>> is http://trac.osgeo.org/gdal/ticket/5214 and
>> http://trac.osgeo.org/gdal/ticket/5217
>>
>> PSC members, please vote for the following motion after conducting your own
>> testing.
>> Non-PSC members please let us know if you discover problems.
>>
>> Testing conversion of lines (2D and 3D) to DXF and checking of the result
>> with non GDAL based DXF viewers would be appreciated to check if #5217 is
>> properly fixed.
>>
>> The source is available in one of the following archive formats :
>>
>>    http://download.osgeo.org/gdal/1.10.1/gdal-1.10.1RC2.tar.xz
>>    http://download.osgeo.org/gdal/1.10.1/gdal-1.10.1RC2.tar.gz
>>    http://download.osgeo.org/gdal/1.10.1/gdal1101RC2.zip
>>
>> ---
>>
>> Motion: The GDAL/OGR 1.10.1RC2 package is promoted as the
>> final GDAL/OGR 1.10.1 release.
>>
>> +1 Even
>


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000


From howard at hobu.co  Wed Aug 28 15:15:15 2013
From: howard at hobu.co (Howard Butler)
Date: Wed, 28 Aug 2013 17:15:15 -0500
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.10.1RC2 for release
In-Reply-To: <521E468F.5040203@mapgears.com>
References: <201308262232.32697.even.rouault@mines-paris.org>
	<201308282040.52074.even.rouault@mines-paris.org>
	<521E468F.5040203@mapgears.com>
Message-ID: <8298B0AE-4CD7-47BE-8F20-AB185D0C3941@hobu.co>

+ 1

On Aug 28, 2013, at 1:50 PM, Daniel Morissette <dmorissette at mapgears.com> wrote:

> +0.5 I don't think I'll have time to test in the next few days but am supportive of the release.
> 
> Daniel
> 
> On 13-08-28 2:40 PM, Even Rouault wrote:
>> Gentlemen,
>> 
>> this is a friendly reminder that this motion is open for vote.
>> 
>> Even
>> 
>> 
>>> Hi,
>>> 
>>> I have prepared a GDAL/OGR 1.10.1 RC2. The difference between RC1 and RC2
>>> is http://trac.osgeo.org/gdal/ticket/5214 and
>>> http://trac.osgeo.org/gdal/ticket/5217
>>> 
>>> PSC members, please vote for the following motion after conducting your own
>>> testing.
>>> Non-PSC members please let us know if you discover problems.
>>> 
>>> Testing conversion of lines (2D and 3D) to DXF and checking of the result
>>> with non GDAL based DXF viewers would be appreciated to check if #5217 is
>>> properly fixed.
>>> 
>>> The source is available in one of the following archive formats :
>>> 
>>>   http://download.osgeo.org/gdal/1.10.1/gdal-1.10.1RC2.tar.xz
>>>   http://download.osgeo.org/gdal/1.10.1/gdal-1.10.1RC2.tar.gz
>>>   http://download.osgeo.org/gdal/1.10.1/gdal1101RC2.zip
>>> 
>>> ---
>>> 
>>> Motion: The GDAL/OGR 1.10.1RC2 package is promoted as the
>>> final GDAL/OGR 1.10.1 release.
>>> 
>>> +1 Even
>> 
> 
> 
> -- 
> Daniel Morissette
> http://www.mapgears.com/
> Provider of Professional MapServer Support since 2000
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From Ismael.BELAAOUAD at circet.fr  Thu Aug 29 00:39:25 2013
From: Ismael.BELAAOUAD at circet.fr (Ismael BELAAOUAD)
Date: Thu, 29 Aug 2013 07:39:25 +0000
Subject: [gdal-dev] Load GDALDataset Into DIB
Message-ID: <48BACD2DFBC9B248B827A22708A9AEC11DCBB1CD@SRV-EX.circet.net>

Hello,

Can someone help me on loading GDALDataset into DIB in C++ project?

Best regards,



Isma?l BELAAOUAD 
Project Manager



From lauramail at iol.it  Thu Aug 29 02:27:24 2013
From: lauramail at iol.it (laura0)
Date: Thu, 29 Aug 2013 02:27:24 -0700 (PDT)
Subject: [gdal-dev] gdalwarp -tps
Message-ID: <1377768444580-5074957.post@n6.nabble.com>

Hi all,
I would like to know how to use thin plate spline interpolation with gdal. 
I have found the gdalwarp -tps option but I do not understand how to use it,
I have a UTM 32 reprojected geotiff and I find here
http://www.gdal.org/gdalwarp.html

-tps:
Force use of thin plate spline transformer based on available GCPs.
I guess I have to add GCPs after -tps option, but if try (with UTM
coordinates points) I get the error message:

ERROR 4: `265331.439' does not exist in the file system,
and is not recognised as a supported dataset name

Otherwise, without GCP indication, I get:
ERROR 1: Unable to compute a GCP_TPS based transformation between pixel/line
and georeferenced coordinates for gwarp.tif.

Can someone explain me how this option works?
Regards,
Laura




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdalwarp-tps-tp5074957.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From andre+joost at nurfuerspam.de  Thu Aug 29 07:17:19 2013
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Thu, 29 Aug 2013 16:17:19 +0200
Subject: [gdal-dev] gdalwarp -tps
In-Reply-To: <1377768444580-5074957.post@n6.nabble.com>
References: <1377768444580-5074957.post@n6.nabble.com>
Message-ID: <kvnl6d$r5c$1@ger.gmane.org>

Am 29.08.2013 11:27, schrieb laura0:
> Hi all,
> I would like to know how to use thin plate spline interpolation with gdal.
> I have found the gdalwarp -tps option but I do not understand how to use it,
> I have a UTM 32 reprojected geotiff and I find here
> http://www.gdal.org/gdalwarp.html
>

>
> ERROR 4: `265331.439' does not exist in the file system,
> and is not recognised as a supported dataset name
>

Adding the GCP at the command line is not supported.

>
> Can someone explain me how this option works?

Have a look at this old posting:

http://lists.osgeo.org/pipermail/gdal-dev/2006-July/009676.html

HTH,
Andr? Joost



From lauramail at iol.it  Thu Aug 29 08:14:08 2013
From: lauramail at iol.it (laura0)
Date: Thu, 29 Aug 2013 08:14:08 -0700 (PDT)
Subject: [gdal-dev] gdalwarp -tps
In-Reply-To: <kvnl6d$r5c$1@ger.gmane.org>
References: <1377768444580-5074957.post@n6.nabble.com>
	<kvnl6d$r5c$1@ger.gmane.org>
Message-ID: <1377789248060-5075018.post@n6.nabble.com>

Hi Andr?,
my geotiff is already georeferenced (yes I used gdaltranslate previously)
and also projected. I would like to know how thin plate spline interpolation
works using the -tps gdalwarp option.

Regards,
Laura



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdalwarp-tps-tp5074957p5075018.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From j.l.h.hartmann at uva.nl  Thu Aug 29 09:00:30 2013
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu, 29 Aug 2013 18:00:30 +0200
Subject: [gdal-dev] gdalwarp -tps
In-Reply-To: <1377789248060-5075018.post@n6.nabble.com>
References: <1377768444580-5074957.post@n6.nabble.com>	<kvnl6d$r5c$1@ger.gmane.org>
	<1377789248060-5075018.post@n6.nabble.com>
Message-ID: <521F701E.1090903@uva.nl>

The -tps option can only be used with control points added to an 
unreferenced raster. It's done this way:

gdal_translate \
     -gcp scanx1 scany1 worldx1 wordy1     \
      -gcp scanx2 scany2 worldx1 worldy1   \
     ... etc \
in.tif out.tif

gdalwarp -tps out.tif world.tif

A georeferenced raster cannot have additional control points, so you can 
not warp it further with -tps. The only way to use thin plate spline 
interpolation is to compute the control points in the original scan 
coordinate sytem. Not very easy!

Jan

On 29-8-2013 17:14, laura0 wrote:
> Hi Andr?,
> my geotiff is already georeferenced (yes I used gdaltranslate previously)
> and also projected. I would like to know how thin plate spline interpolation
> works using the -tps gdalwarp option.
>
> Regards,
> Laura
>
>
>
> --
> View this message in context: http://osgeo-org.1560.x6.nabble.com/gdalwarp-tps-tp5074957p5075018.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Ismael.BELAAOUAD at circet.fr  Thu Aug 29 09:11:13 2013
From: Ismael.BELAAOUAD at circet.fr (Ismael BELAAOUAD)
Date: Thu, 29 Aug 2013 16:11:13 +0000
Subject: [gdal-dev] TR: Load GDALDataset Into DIB
In-Reply-To: <48BACD2DFBC9B248B827A22708A9AEC11DCBB1CD@SRV-EX.circet.net>
References: <48BACD2DFBC9B248B827A22708A9AEC11DCBB1CD@SRV-EX.circet.net>
Message-ID: <48BACD2DFBC9B248B827A22708A9AEC11DCBB2A1@SRV-EX.circet.net>

Hello,
I finally load GDALDataSet into DIB but when I display the raster it's inverted on Y axis.
Did someone have an idea?

BOOL CDib::LoadFromGDAL (LPCTSTR szFileName)
{
	BOOL bRet=FALSE;
	BOOL   bOK;
	UINT   ncol, size, w;

	Init();

	GDALDataset  *poDataset;

	GDALAllRegister();

	poDataset = (GDALDataset *) GDALOpen( szFileName, GA_ReadOnly );
	if( poDataset != NULL )
	{
		BITMAPINFO bm = { sizeof(BITMAPINFOHEADER), poDataset->GetRasterXSize(),  poDataset->GetRasterYSize(), 1, 24, BI_RGB };

		/*DIBINFOGDAL rbmi(bm);*/
		Init();
		bmi.Header=bm.bmiHeader;

		int nBands = poDataset->GetRasterCount();

		if ( nBands == 1 )
		{
			bmi.Header.biBitCount = 8 ;

			switch ( poDataset->GetRasterBand(1)->GetColorInterpretation())
			{
				case GCI_PaletteIndex :
				{
					GDALColorTable * pgdColorTable = poDataset->GetRasterBand(1)->GetColorTable();

					bmi.Header.biClrUsed = pgdColorTable->GetColorEntryCount();

					if ( ( 	bmi.Header.biClrUsed > 256 ) || ( pgdColorTable->GetPaletteInterpretation() != GPI_RGB ))
					{
						return NULL; // unsupported image format
					}
					// Fill the color table
					for ( UINT i=0 ; i < 	bmi.Header.biClrUsed ; i++ )
					{
						bmi.Colors[i].rgbBlue =(BYTE) pgdColorTable->GetColorEntry(i)->c3;
						bmi.Colors[i].rgbGreen =(BYTE) pgdColorTable->GetColorEntry(i)->c2;
						bmi.Colors[i].rgbRed =(BYTE) pgdColorTable->GetColorEntry(i)->c1;
						bmi.Colors[i].rgbReserved =0;

						/*
						rbmi.ColorTable(i)->rgbBlue =(BYTE) pgdColorTable->GetColorEntry(i)->c3;
						rbmi.ColorTable(i)->rgbGreen =(BYTE) pgdColorTable->GetColorEntry(i)->c2;
						rbmi.ColorTable(i)->rgbRed =(BYTE) pgdColorTable->GetColorEntry(i)->c1;
						rbmi.ColorTable(i)->rgbReserved = 0;
						*/
					}
					break;
				}
				case GCI_GrayIndex :
				{
					bmi.Header.biClrUsed = 256 ;
					// Fill the color table
					for ( UINT i=0 ; i < bmi.Header.biClrUsed ; i++ )
					{
						RGBQUAD q = {i,i,i,0} ;
						bmi.Colors[i] = q ;
						//*rbmi.ColorTable(i) = q ;
					}
				}
				break;
				default :
					return NULL ;
			}
		}
		// Create the DIB
		//HDC dc = CreateCompatibleDC( NULL );
		LPVOID pBits;
		HBITMAP hbm = CreateDIBSection(NULL,(BITMAPINFO*)&bmi,DIB_RGB_COLORS, &pBits, NULL, NULL );
		int nError = GetLastError();
		if ( ! hbm )
		{
			//DeleteDC(dc);
			SetLastError( ERROR_NO_SYSTEM_RESOURCES );
			LocalFree(pBits);
			return FALSE;
		}

		// Fill the Bits
		CPLErr gdErr = CE_Failure;
		int nScanSize = ((bmi.Header.biWidth  * bmi.Header.biBitCount + 31) & (~31) ) / 8;
		int nBandsRead = 1 ;

		if ( bmi.Header.biBitCount == 8 ) // Paletted or Gray
		{
			gdErr = poDataset->GetRasterBand(1)->RasterIO(
			            GF_Read , 0 ,0 , poDataset->GetRasterXSize(), poDataset->GetRasterYSize(),
			            pBits,bmi.Header.biWidth,bmi.Header.biHeight,GDT_Byte,
			            1, nScanSize );


		}
		else
		{
			for ( int iBand = 1 ,nBandsRead = 0 ; iBand <= nBands ; iBand ++ )
			{
				int iColorOffset;
				switch( poDataset->GetRasterBand(iBand)->GetColorInterpretation() )
				{
						// BGR
					case GCI_RedBand :
						iColorOffset = 2;
						break;
					case GCI_GreenBand :
						iColorOffset = 1;
						break;
					case GCI_BlueBand :
						iColorOffset = 0;
						break;
					default :
						continue ;
				}
				gdErr = poDataset->GetRasterBand(iBand)->RasterIO(
				            GF_Read , 0 ,0 , poDataset->GetRasterXSize(), poDataset->GetRasterYSize(),
				            ((LPBYTE)pBits) + iColorOffset ,bmi.Header.biWidth,bmi.Header.biHeight,
				            GDT_Byte, 3, nScanSize );
				nBandsRead ++;
			}

		}



		if  (( gdErr != CE_None ) || !nBandsRead )
		{
			::DeleteObject(hbm);

			return FALSE;
		}
}

-----Message d'origine-----
De?: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de Ismael BELAAOUAD
Envoy??: jeudi 29 ao?t 2013 09:39
??: gdal-dev at lists.osgeo.org
Objet?: [gdal-dev] Load GDALDataset Into DIB

Hello,

Can someone help me on loading GDALDataset into DIB in C++ project?

Best regards,



Isma?l BELAAOUAD 
Project Manager


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From mrosen at lizardtech.com  Thu Aug 29 10:37:42 2013
From: mrosen at lizardtech.com (Michael Rosen)
Date: Thu, 29 Aug 2013 10:37:42 -0700
Subject: [gdal-dev] Patch for GDAL Web Mercator Issue / trac 3962
Message-ID: <C55473998E248B4DAEC5342D698DFE85012C2E0A0B@sea-srv-mail.lizardtech.com>

A long standing (2011) issue with GDAL's CRS support is its awkward support for the Web Mercator projection.  In short, when gdal internally represents this CRS (EPSG code 3857), it does so using the Mercator_1SP projection on the WGS84 datum (not a sphere).  Since that's not quite right, it provides the right math to Proj4 via an "Extension."  Some widely used GIS applications won't recognize the resulting output  as Web Mercator leading to projection / alignment problems.  http://trac.osgeo.org/gdal/ticket/3962 describes the issue more fully.  

I've submitted a patch (attached to above ticket) that implements proper support for this very widely used projection.  It's seen limited testing here at LizardTech and I can confirm that both ERDAS and ArcGIS (and QGIS, but I think they were ok to begin with) recognize the resulting representation.  We at LT discussed this internally and decided that because it is a fairly wide-reaching change, we would provide the patch but not to commit it ourselves -- at least not without some discussion from the community.

I should say that the extent of the change is mostly confined to the way it creates a WKT representing Web Mercator.  In particular, it does not change the way the tiff driver writes tags.  I think the current implementation is non-standard (*) but has the weight of history on its side, so I left that alone.  However, the change does read (non-standard) tif files that say "epsg 3857" as Web Mercator.

(*) Perhaps necessarily non-standard.  AFAICT, there is  no standard-compliant way to represent this in GeoTiff.  the specification seems to preclude referencing an EPSG code outside the range of 20000 ? 32760.  Note that the existing implementation in libGeoTiff writes ?3857? in the ProjectedCSTypeGeoKey and notes it is ?unknown.?  It appears that everyone just assumes that if there?s an epsg code there then it must be authoritative.


msr

From even.rouault at mines-paris.org  Thu Aug 29 11:53:37 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 29 Aug 2013 20:53:37 +0200
Subject: [gdal-dev] Patch for GDAL Web Mercator Issue / trac 3962
In-Reply-To: <C55473998E248B4DAEC5342D698DFE85012C2E0A0B@sea-srv-mail.lizardtech.com>
References: <C55473998E248B4DAEC5342D698DFE85012C2E0A0B@sea-srv-mail.lizardtech.com>
Message-ID: <201308292053.37808.even.rouault@mines-paris.org>

Hi Michael,

My main question is : how sure are we about the projection name 
"Mercator_Auxiliary_Sphere" to be the appropriate one for "standard" WKT ? Is 
there some reference from that ? The fact that ESRI uses it doesn't make it 
necesserarily a standard (although it can serve as a base if there's no 
alternative).

I did a quick search, and in the Java world, I've found :
- GeoTools ( 
http://docs.geotools.org/latest/userguide/library/referencing/crs.html ) : 
also seems to use Mercator_1SP (but the example is the hackish 900913). 
* GeoToolkit, fork of GeoTools, would also use Mercator_1SP ( 
http://www.geotoolkit.org/modules/referencing/faq.html#Google )
- GeoServer ( according to a openlayer doc at 
http://trac.osgeo.org/openlayers/wiki/SphericalMercator ) would use 
"Mercator_1SP_Google". Seem to be confirmed by 
https://github.com/geoserver/geoserver/blob/master/src/main/src/main/java/org/geotools/referencing/operation/projection/Mercator1SPGoogle.java  
, but the comment in the file suggests this custom projection is no longer used 
and that it now relies on GeoTools support, hence Mercator_1SP.

Perhaps the issue could be pushed to some generalist list, like 
standards at list.osgeo.org and/or metacrs at lists.osgeo.org lists to see if 
there's some concencus on the appropriate WKT for EPSG:3857

You mention that "applications which depend on the WKT (e.g. MrSID) to expose 
the SRS will see improved recognition". But which format are you refering too 
? There are not so many raster formats where you encode WKT itself.

Best regards,

Even

Le jeudi 29 ao?t 2013 19:37:42, Michael Rosen a ?crit :
> A long standing (2011) issue with GDAL's CRS support is its awkward support
> for the Web Mercator projection.  In short, when gdal internally
> represents this CRS (EPSG code 3857), it does so using the Mercator_1SP
> projection on the WGS84 datum (not a sphere).  Since that's not quite
> right, it provides the right math to Proj4 via an "Extension."  Some
> widely used GIS applications won't recognize the resulting output  as Web
> Mercator leading to projection / alignment problems. 
> http://trac.osgeo.org/gdal/ticket/3962 describes the issue more fully.
> 
> I've submitted a patch (attached to above ticket) that implements proper
> support for this very widely used projection.  It's seen limited testing
> here at LizardTech and I can confirm that both ERDAS and ArcGIS (and QGIS,
> but I think they were ok to begin with) recognize the resulting
> representation.  We at LT discussed this internally and decided that
> because it is a fairly wide-reaching change, we would provide the patch
> but not to commit it ourselves -- at least not without some discussion
> from the community.
> 
> I should say that the extent of the change is mostly confined to the way it
> creates a WKT representing Web Mercator.  In particular, it does not
> change the way the tiff driver writes tags.  I think the current
> implementation is non-standard (*) but has the weight of history on its
> side, so I left that alone.  However, the change does read (non-standard)
> tif files that say "epsg 3857" as Web Mercator.
> 
> (*) Perhaps necessarily non-standard.  AFAICT, there is  no
> standard-compliant way to represent this in GeoTiff.  the specification
> seems to preclude referencing an EPSG code outside the range of 20000 ?
> 32760.  Note that the existing implementation in libGeoTiff writes ?3857?
> in the ProjectedCSTypeGeoKey and notes it is ?unknown.?  It appears that
> everyone just assumes that if there?s an epsg code there then it must be
> authoritative.
> 
> 
> msr
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jmckenna at gatewaygeomatics.com  Thu Aug 29 13:27:28 2013
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu, 29 Aug 2013 17:27:28 -0300
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.10.1RC2 for release
In-Reply-To: <201308262232.32697.even.rouault@mines-paris.org>
References: <201308262232.32697.even.rouault@mines-paris.org>
Message-ID: <521FAEB0.8010202@gatewaygeomatics.com>

Seems to be fine on Windows.

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/



On 2013-08-26 5:32 PM, Even Rouault wrote:
> Hi,
> 
> I have prepared a GDAL/OGR 1.10.1 RC2. The difference between RC1 and RC2 is 
> http://trac.osgeo.org/gdal/ticket/5214 and 
> http://trac.osgeo.org/gdal/ticket/5217
> 
> PSC members, please vote for the following motion after conducting your own 
> testing.
> Non-PSC members please let us know if you discover problems.
> 
> Testing conversion of lines (2D and 3D) to DXF and checking of the result with 
> non GDAL based DXF viewers would be appreciated to check if #5217 is properly 
> fixed.
> 
> The source is available in one of the following archive formats :
> 
>   http://download.osgeo.org/gdal/1.10.1/gdal-1.10.1RC2.tar.xz
>   http://download.osgeo.org/gdal/1.10.1/gdal-1.10.1RC2.tar.gz
>   http://download.osgeo.org/gdal/1.10.1/gdal1101RC2.zip
> 
> ---
> 
> Motion: The GDAL/OGR 1.10.1RC2 package is promoted as the
> final GDAL/OGR 1.10.1 release.
> 
> +1 Even
> 
> 
> 



From stefano.iacovella at gmail.com  Thu Aug 29 14:05:44 2013
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Thu, 29 Aug 2013 23:05:44 +0200
Subject: [gdal-dev] Patch for GDAL Web Mercator Issue / trac 3962
In-Reply-To: <201308292053.37808.even.rouault@mines-paris.org>
References: <C55473998E248B4DAEC5342D698DFE85012C2E0A0B@sea-srv-mail.lizardtech.com>
	<201308292053.37808.even.rouault@mines-paris.org>
Message-ID: <CAG9OqYqJENZHboZ2fPzNBPOnHAw8F1awXXwyDf0KtTMnZTtKfA@mail.gmail.com>

2013/8/29 Even Rouault <even.rouault at mines-paris.org>

> My main question is : how sure are we about the projection name
> "Mercator_Auxiliary_Sphere" to be the appropriate one for "standard" WKT ?
> Is
> there some reference from that ? The fact that ESRI uses it doesn't make it
> necesserarily a standard (although it can serve as a base if there's no
> alternative).
>

According to http://epsg-registry.org/, not an ISO standard but quite a de
facto standard, EPSG:3857 is "WGS 84 / Pseudo-Mercator "

Kind Regards,

Stefano
---------------------------------------------------
41.95581N 12.52854E


http://www.linkedin.com/in/stefanoiacovella

http://twitter.com/#!/Iacovellas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130829/155dbf4b/attachment.html>

From even.rouault at mines-paris.org  Thu Aug 29 14:23:41 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 29 Aug 2013 23:23:41 +0200
Subject: [gdal-dev] Patch for GDAL Web Mercator Issue / trac 3962
In-Reply-To: <CAG9OqYqJENZHboZ2fPzNBPOnHAw8F1awXXwyDf0KtTMnZTtKfA@mail.gmail.com>
References: <C55473998E248B4DAEC5342D698DFE85012C2E0A0B@sea-srv-mail.lizardtech.com>
	<201308292053.37808.even.rouault@mines-paris.org>
	<CAG9OqYqJENZHboZ2fPzNBPOnHAw8F1awXXwyDf0KtTMnZTtKfA@mail.gmail.com>
Message-ID: <201308292323.41374.even.rouault@mines-paris.org>

Le jeudi 29 ao?t 2013 23:05:44, Stefano Iacovella a ?crit :
> 2013/8/29 Even Rouault <even.rouault at mines-paris.org>
> 
> > My main question is : how sure are we about the projection name
> > "Mercator_Auxiliary_Sphere" to be the appropriate one for "standard" WKT
> > ? Is
> > there some reference from that ? The fact that ESRI uses it doesn't make
> > it necesserarily a standard (although it can serve as a base if there's
> > no alternative).
> 
> According to http://epsg-registry.org/, not an ISO standard but quite a de
> facto standard, EPSG:3857 is "WGS 84 / Pseudo-Mercator "

Well this is the name of the projected coordinate system. But here we are 
talking more about the projection method (sorry for being pedantic...). The 
EPSG registry would suggest "Popular Visualisation Pseudo-Mercator" for it.

> 
> Kind Regards,
> 
> Stefano
> ---------------------------------------------------
> 41.95581N 12.52854E
> 
> 
> http://www.linkedin.com/in/stefanoiacovella
> 
> http://twitter.com/#!/Iacovellas

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From stefano.iacovella at gmail.com  Thu Aug 29 14:22:17 2013
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Thu, 29 Aug 2013 23:22:17 +0200
Subject: [gdal-dev] Patch for GDAL Web Mercator Issue / trac 3962
In-Reply-To: <201308292323.41374.even.rouault@mines-paris.org>
References: <C55473998E248B4DAEC5342D698DFE85012C2E0A0B@sea-srv-mail.lizardtech.com>
	<201308292053.37808.even.rouault@mines-paris.org>
	<CAG9OqYqJENZHboZ2fPzNBPOnHAw8F1awXXwyDf0KtTMnZTtKfA@mail.gmail.com>
	<201308292323.41374.even.rouault@mines-paris.org>
Message-ID: <CAG9OqYosJt7nbzoRGmYWP5kNf1Zb0jWboRrc-Pew6M7fQW3M3Q@mail.gmail.com>

2013/8/29 Even Rouault <even.rouault at mines-paris.org>

> Well this is the name of the projected coordinate system. But here we are
> talking more about the projection method (sorry for being pedantic...). The
> EPSG registry would suggest "Popular Visualisation Pseudo-Mercator" for it.
>

On the contrary, thank you for letting me understand better and sorry for
the noise :)

Kind Regards,

Stefano

---------------------------------------------------
41.95581N 12.52854E


http://www.linkedin.com/in/stefanoiacovella

http://twitter.com/#!/Iacovellas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130829/dd1d469f/attachment.html>

From warmerdam at pobox.com  Thu Aug 29 14:31:30 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 29 Aug 2013 14:31:30 -0700
Subject: [gdal-dev] Patch for GDAL Web Mercator Issue / trac 3962
In-Reply-To: <CAG9OqYqJENZHboZ2fPzNBPOnHAw8F1awXXwyDf0KtTMnZTtKfA@mail.gmail.com>
References: <C55473998E248B4DAEC5342D698DFE85012C2E0A0B@sea-srv-mail.lizardtech.com>
	<201308292053.37808.even.rouault@mines-paris.org>
	<CAG9OqYqJENZHboZ2fPzNBPOnHAw8F1awXXwyDf0KtTMnZTtKfA@mail.gmail.com>
Message-ID: <CA+YzLBfWBRT6__3jGQ1me6g7_GDv8ubCtwgaJFoZenkxf1H6OA@mail.gmail.com>

Folks,

I have no problem with EPSG code 3857 as a PCS in GeoTIFF files.  It is
widely accepted that any EPSG PCS is acceptable there.

What is less clear to me is the most appropriate formulation of Web
Mercator in WKT.  Potentially, we could move to encoding semi_major and
semi_minor in the projection parameters as overrides, and then translate to
the ESRI format and back in our morphing code.

Mike, if we do incorporate your patch, I think we should also consider ways
of recognising some of the other variations.

Best regards,
Frank



On Thu, Aug 29, 2013 at 2:05 PM, Stefano Iacovella <
stefano.iacovella at gmail.com> wrote:

>
> 2013/8/29 Even Rouault <even.rouault at mines-paris.org>
>
>> My main question is : how sure are we about the projection name
>> "Mercator_Auxiliary_Sphere" to be the appropriate one for "standard" WKT
>> ? Is
>> there some reference from that ? The fact that ESRI uses it doesn't make
>> it
>> necesserarily a standard (although it can serve as a base if there's no
>> alternative).
>>
>
> According to http://epsg-registry.org/, not an ISO standard but quite a
> de facto standard, EPSG:3857 is "WGS 84 / Pseudo-Mercator "
>
> Kind Regards,
>
> Stefano
> ---------------------------------------------------
> 41.95581N 12.52854E
>
>
> http://www.linkedin.com/in/stefanoiacovella
>
> http://twitter.com/#!/Iacovellas
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130829/21720c3e/attachment.html>

From mrosen at lizardtech.com  Thu Aug 29 14:30:50 2013
From: mrosen at lizardtech.com (Michael Rosen)
Date: Thu, 29 Aug 2013 14:30:50 -0700
Subject: [gdal-dev] Patch for GDAL Web Mercator Issue / trac 3962
In-Reply-To: <CAG9OqYosJt7nbzoRGmYWP5kNf1Zb0jWboRrc-Pew6M7fQW3M3Q@mail.gmail.com>
References: <C55473998E248B4DAEC5342D698DFE85012C2E0A0B@sea-srv-mail.lizardtech.com>
	<201308292053.37808.even.rouault@mines-paris.org>
	<CAG9OqYqJENZHboZ2fPzNBPOnHAw8F1awXXwyDf0KtTMnZTtKfA@mail.gmail.com>
	<201308292323.41374.even.rouault@mines-paris.org>
	<CAG9OqYosJt7nbzoRGmYWP5kNf1Zb0jWboRrc-Pew6M7fQW3M3Q@mail.gmail.com>
Message-ID: <C55473998E248B4DAEC5342D698DFE85012C2E0A4C@sea-srv-mail.lizardtech.com>

I considered the very same issue and opted for a pragmatic solution.  Here's my internal notes on this:

This approach seems consistent with what Frank W proposed<http://trac.osgeo.org/gdal/ticket/3962>:
"I am thinking that we should move to treating the pseudo-mercator projection method better in WKT, and tying the various systems together properly. Either use a custom projection like ESRI ("Mercator_Auxiliary_Sphere") or introduce the "Auxilary_Sphere_Type" parameter to standard Mercator.
I'll note that some of the names are different than what EPSG-registry.org has to say about all this<http://www.epsg-registry.org/report.htm?type=selection&entity=urn:ogc:def:crs:EPSG::3857&reportDetail=long&title=&reportDetail=long&style=urn:uuid:report-style:default-with-code&style_name=OGP%20Default%20With%20Code&title=>.

-          I'd like to see ESRI recognize a Projection Name of "Pseudo_Mercator" and for GDAL to use this string instead of "Mercator_Auxiliary_Sphere" since that's the alias used by EPSG. OTOH, if we leave it as Mercator_Auxiliary_Sphere, then our fix would work for older versions of ArcGIS...

-          That the parameters are "central_meridian" and "standard_parallel_1" instead of "Latitude/Longitude of Natural Origin" seems wrong but that happens a lot comparing other GDAL/EPSG transforms.  For example we have exactly this mismatch with the Mercator_1SP projection method used by WGS84 / World Mercator (3395).  I think it would be ill-advised to push to change this.


From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Stefano Iacovella
Sent: Thursday, August 29, 2013 2:22 PM
To: Even Rouault
Cc: gdal-dev
Subject: Re: [gdal-dev] Patch for GDAL Web Mercator Issue / trac 3962


2013/8/29 Even Rouault <even.rouault at mines-paris.org<mailto:even.rouault at mines-paris.org>>
Well this is the name of the projected coordinate system. But here we are
talking more about the projection method (sorry for being pedantic...). The
EPSG registry would suggest "Popular Visualisation Pseudo-Mercator" for it.

On the contrary, thank you for letting me understand better and sorry for the noise :)
Kind Regards,
Stefano

---------------------------------------------------
41.95581N 12.52854E


http://www.linkedin.com/in/stefanoiacovella

http://twitter.com/#!/Iacovellas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130829/ade991d3/attachment-0001.html>

From szekerest at gmail.com  Thu Aug 29 14:35:34 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu, 29 Aug 2013 23:35:34 +0200
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.10.1RC2 for release
In-Reply-To: <201308282040.52074.even.rouault@mines-paris.org>
References: <201308262232.32697.even.rouault@mines-paris.org>
	<201308282040.52074.even.rouault@mines-paris.org>
Message-ID: <CACALY+RS-TGTc1Xbyn47k0qOwKRCmOZeMOfznJZBfu2L+nrThQ@mail.gmail.com>

+1

Tamas


2013/8/28 Even Rouault <even.rouault at mines-paris.org>

> Gentlemen,
>
> this is a friendly reminder that this motion is open for vote.
>
> Even
>
>
> > Hi,
> >
> > I have prepared a GDAL/OGR 1.10.1 RC2. The difference between RC1 and RC2
> > is http://trac.osgeo.org/gdal/ticket/5214 and
> > http://trac.osgeo.org/gdal/ticket/5217
> >
> > PSC members, please vote for the following motion after conducting your
> own
> > testing.
> > Non-PSC members please let us know if you discover problems.
> >
> > Testing conversion of lines (2D and 3D) to DXF and checking of the result
> > with non GDAL based DXF viewers would be appreciated to check if #5217 is
> > properly fixed.
> >
> > The source is available in one of the following archive formats :
> >
> >   http://download.osgeo.org/gdal/1.10.1/gdal-1.10.1RC2.tar.xz
> >   http://download.osgeo.org/gdal/1.10.1/gdal-1.10.1RC2.tar.gz
> >   http://download.osgeo.org/gdal/1.10.1/gdal1101RC2.zip
> >
> > ---
> >
> > Motion: The GDAL/OGR 1.10.1RC2 package is promoted as the
> > final GDAL/OGR 1.10.1 release.
> >
> > +1 Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130829/ccdab907/attachment.html>

From mrosen at lizardtech.com  Thu Aug 29 14:44:56 2013
From: mrosen at lizardtech.com (Michael Rosen)
Date: Thu, 29 Aug 2013 14:44:56 -0700
Subject: [gdal-dev] Patch for GDAL Web Mercator Issue / trac 3962
In-Reply-To: <CA+YzLBfWBRT6__3jGQ1me6g7_GDv8ubCtwgaJFoZenkxf1H6OA@mail.gmail.com>
References: <C55473998E248B4DAEC5342D698DFE85012C2E0A0B@sea-srv-mail.lizardtech.com>
	<201308292053.37808.even.rouault@mines-paris.org>
	<CAG9OqYqJENZHboZ2fPzNBPOnHAw8F1awXXwyDf0KtTMnZTtKfA@mail.gmail.com>
	<CA+YzLBfWBRT6__3jGQ1me6g7_GDv8ubCtwgaJFoZenkxf1H6OA@mail.gmail.com>
Message-ID: <C55473998E248B4DAEC5342D698DFE85012C2E0A4F@sea-srv-mail.lizardtech.com>

I concur that it is desirable to be able to recognize this projection in which ever "Well Known" Text is appears.  To paraphrase Douglas Adams, "this is obviously some strange use of the term well-known that I wasn't previously aware of.

msr

From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Thursday, August 29, 2013 2:32 PM
To: Stefano Iacovella
Cc: gdal-dev
Subject: Re: [gdal-dev] Patch for GDAL Web Mercator Issue / trac 3962

Folks,

I have no problem with EPSG code 3857 as a PCS in GeoTIFF files.  It is widely accepted that any EPSG PCS is acceptable there.

What is less clear to me is the most appropriate formulation of Web Mercator in WKT.  Potentially, we could move to encoding semi_major and semi_minor in the projection parameters as overrides, and then translate to the ESRI format and back in our morphing code.

Mike, if we do incorporate your patch, I think we should also consider ways of recognising some of the other variations.

Best regards,
Frank


On Thu, Aug 29, 2013 at 2:05 PM, Stefano Iacovella <stefano.iacovella at gmail.com<mailto:stefano.iacovella at gmail.com>> wrote:

2013/8/29 Even Rouault <even.rouault at mines-paris.org<mailto:even.rouault at mines-paris.org>>
My main question is : how sure are we about the projection name
"Mercator_Auxiliary_Sphere" to be the appropriate one for "standard" WKT ? Is
there some reference from that ? The fact that ESRI uses it doesn't make it
necesserarily a standard (although it can serve as a base if there's no
alternative).

According to http://epsg-registry.org/, not an ISO standard but quite a de facto standard, EPSG:3857 is "WGS 84 / Pseudo-Mercator "

Kind Regards,
Stefano
---------------------------------------------------
41.95581N 12.52854E


http://www.linkedin.com/in/stefanoiacovella

http://twitter.com/#!/Iacovellas

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com<mailto:warmerdam at pobox.com>
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130829/8373c5e1/attachment.html>

From gdal at stripfamily.net  Thu Aug 29 14:46:01 2013
From: gdal at stripfamily.net (David Strip)
Date: Thu, 29 Aug 2013 15:46:01 -0600
Subject: [gdal-dev] TR: Load GDALDataset Into DIB
In-Reply-To: <48BACD2DFBC9B248B827A22708A9AEC11DCBB2A1@SRV-EX.circet.net>
References: <48BACD2DFBC9B248B827A22708A9AEC11DCBB1CD@SRV-EX.circet.net>
	<48BACD2DFBC9B248B827A22708A9AEC11DCBB2A1@SRV-EX.circet.net>
Message-ID: <521FC119.1040504@stripfamily.net>

If this is pretty much a one-time thing, just reverse the order in which
you read the dataset.
If this is going to be a regular thing for different kinds of data
sources, you need to read the y-pixel height in the dataset. You do this
using GetGeoTransform. The Y_height is the last element of the array. If
this is negative, the band reads in the reverse order as does a windows
DIB. (ie, the first row is the top row). If the value is positive, it's
the same arrangement as the DIB. In general, the pixels can be
non-square, which creates a problem reading it straight into a DIB.



From nicholas.g.lawrence at tmr.qld.gov.au  Thu Aug 29 20:16:45 2013
From: nicholas.g.lawrence at tmr.qld.gov.au (nicholas.g.lawrence at tmr.qld.gov.au)
Date: Fri, 30 Aug 2013 13:16:45 +1000
Subject: [gdal-dev] GDAL for windows
Message-ID: <OFFEA4ADAE.96A89319-ON4A257BD7.0005FD04-4A257BD7.00120352@tmr.qld.gov.au>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130830/ef8bc83c/attachment.html>

From Ismael.BELAAOUAD at circet.fr  Thu Aug 29 23:00:10 2013
From: Ismael.BELAAOUAD at circet.fr (Ismael BELAAOUAD)
Date: Fri, 30 Aug 2013 06:00:10 +0000
Subject: [gdal-dev] TR: Load GDALDataset Into DIB
In-Reply-To: <521FC119.1040504@stripfamily.net>
References: <48BACD2DFBC9B248B827A22708A9AEC11DCBB1CD@SRV-EX.circet.net>
	<48BACD2DFBC9B248B827A22708A9AEC11DCBB2A1@SRV-EX.circet.net>
	<521FC119.1040504@stripfamily.net>
Message-ID: <48BACD2DFBC9B248B827A22708A9AEC11DCBB2FD@SRV-EX.circet.net>

Hi David,

I've used GetGeoTransform on some files and it seems to be regular thing, Y_height is negative.
Can you tell me how to reverse the order of dataset reading?

Best regards

-----Message d'origine-----
De?: David Strip [mailto:gdal at stripfamily.net] 
Envoy??: jeudi 29 ao?t 2013 23:46
??: Ismael BELAAOUAD
Cc?: gdal-dev at lists.osgeo.org
Objet?: Re: [gdal-dev] TR: Load GDALDataset Into DIB

If this is pretty much a one-time thing, just reverse the order in which you read the dataset.
If this is going to be a regular thing for different kinds of data sources, you need to read the y-pixel height in the dataset. You do this using GetGeoTransform. The Y_height is the last element of the array. If this is negative, the band reads in the reverse order as does a windows DIB. (ie, the first row is the top row). If the value is positive, it's the same arrangement as the DIB. In general, the pixels can be non-square, which creates a problem reading it straight into a DIB.



From szekerest at gmail.com  Fri Aug 30 01:41:03 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri, 30 Aug 2013 10:41:03 +0200
Subject: [gdal-dev] GDAL for windows
In-Reply-To: <OFFEA4ADAE.96A89319-ON4A257BD7.0005FD04-4A257BD7.00120352@tmr.qld.gov.au>
References: <OFFEA4ADAE.96A89319-ON4A257BD7.0005FD04-4A257BD7.00120352@tmr.qld.gov.au>
Message-ID: <CACALY+QqMdLt2ya8WH7Rj6Pk0+cO2EtTLx01h-Mt6fGyKGFHqQ@mail.gmail.com>

Hi,

Not sure what you mean by "MapServer for Windows was built in May 2012",
the daily build packages should contain the latest versions of the
development and stable branches.

Your issue may probably be related to the OSM driver specifically. How is
your ogr2ogr command line looking like?

Best regards,

Tamas



2013/8/30 <nicholas.g.lawrence at tmr.qld.gov.au>

> Hello all,
>
> I would like to install the latest GDAL for windows (32-bit). But I can't
> find a binary install that works.
>
> My goal is to translate an OSM .pbf file into MapInfo TAB. For this I need
> the latest OGR2OGR
>
> I tried the download from www.gisinternals.com/sdk/ but that gives me the
> error "Layer lines not found, and CreateLayer not supported by driver."
>
> MapServer for Windows was built in May 2012, so it wouldn't include the
> OSM read ability
>
>
>
> OSGeo4W is an installer that has to connect to the internet, and my
> firewall blocks the connection, so I can't use that.
>
> FWTools does not have the latest GDAL version, which I need
>
> Kind regards,
> *
> Nick Lawrence*
> Senior Spatial Science Officer | Geospatial, Road Design & Competency
> *Engineering & Technology Branch* | Department of Transport and Main Roads
> ------------------------------
> Floor 19 | Brisbane City - 313 Adelaide Street | 313 Adelaide Street |
> Brisbane City Qld 4000
> GPO Box 1412 | Brisbane City Qld 4001
> P: (07) 30667977 | F: (07) 30668998
> E: *nicholas.g.lawrence at tmr.qld.gov.au*<nicholas.g.lawrence at tmr.qld.gov.au>
> W: *www.tmr.qld.gov.au* <http://www.tmr.qld.gov.au/>
>
> ***********************************************************************
> WARNING: This email (including any attachments) may contain legally
> privileged, confidential or private information and may be protected by
> copyright. You may only use it if you are the person(s) it was
> intended to be sent to and if you use it in an authorised way. No one
> is allowed to use, review, alter, transmit, disclose, distribute, print
> or copy this email without appropriate authority.
>
> If this email was not intended for you and was sent to you by mistake,
> please telephone or email me immediately, destroy any hardcopies of
> this email and delete it and any copies of it from your computer
> system. Any right which the sender may have under copyright law, and
> any legal privilege and confidentiality attached to this email is not
> waived or destroyed by that mistake.
>
> It is your responsibility to ensure that this email does not contain
> and is not affected by computer viruses, defects or interference by
> third parties or replication problems (including incompatibility with
> your computer system).
>
> Opinions contained in this email do not necessarily reflect the
> opinions of the Department of Transport and Main Roads,
> or endorsed organisations utilising the same infrastructure.
> ***********************************************************************
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130830/e54c060f/attachment.html>

From hbobenicio at gmail.com  Fri Aug 30 11:57:50 2013
From: hbobenicio at gmail.com (Hugo Benicio)
Date: Fri, 30 Aug 2013 15:57:50 -0300
Subject: [gdal-dev] Creating an OGRPolygon from an OGREnvelope
Message-ID: <CAKGFd-wHHL0FLLQ0eN0Z92GzdUt0=RZt0_W5bYpf8sNWD0jpZQ@mail.gmail.com>

Hi guys! Easy question here:

I have an OGREnvelope describing a rectangle that I want to use as an
OGRPolygon.
What is the correct way to do that? What I need is a OGRPolygon
representing a rectangle from my OGREnvelope.
Do I have to manually assign point by point to it? (how?) Or there is some
handy method I can use (union?).

Thanks in advance.
Hugo.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130830/5f5b45ed/attachment.html>

From even.rouault at mines-paris.org  Fri Aug 30 13:36:54 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 30 Aug 2013 22:36:54 +0200
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.10.1RC2 for release
In-Reply-To: <201308262232.32697.even.rouault@mines-paris.org>
References: <201308262232.32697.even.rouault@mines-paris.org>
Message-ID: <201308302236.55028.even.rouault@mines-paris.org>

> 
> Motion: The GDAL/OGR 1.10.1RC2 package is promoted as the
> final GDAL/OGR 1.10.1 release.
> 

I declare this motion passed with support from Daniel (+0.5), Howard, Tamas 
and myself.

I'm going to rename the RC to final and send the release announcement.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Fri Aug 30 13:52:47 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 30 Aug 2013 22:52:47 +0200
Subject: [gdal-dev] GDAL/OGR 1.10.1 Released
Message-ID: <201308302252.48115.even.rouault@mines-paris.org>

Hi,

On behalf of the GDAL/OGR development team, I am pleased to
announce the release of the GDAL/OGR 1.10.1 bug fix release.  This
release contains various bug fixes since the April 1.10.0 release.

The source is available at:

  http://download.osgeo.org/gdal/1.10.1/gdal-1.10.1.tar.xz
  http://download.osgeo.org/gdal/1.10.1/gdal-1.10.1.tar.gz
  http://download.osgeo.org/gdal/1.10.1/gdal1101.zip

Details on the the fixes in this release are available at:
  http://trac.osgeo.org/gdal/wiki/Release/1.10.1-News

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From warmerdam at pobox.com  Fri Aug 30 17:34:17 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 30 Aug 2013 17:34:17 -0700
Subject: [gdal-dev] Creating an OGRPolygon from an OGREnvelope
In-Reply-To: <CAKGFd-wHHL0FLLQ0eN0Z92GzdUt0=RZt0_W5bYpf8sNWD0jpZQ@mail.gmail.com>
References: <CAKGFd-wHHL0FLLQ0eN0Z92GzdUt0=RZt0_W5bYpf8sNWD0jpZQ@mail.gmail.com>
Message-ID: <CA+YzLBde8r7P_pTaKYGtoBf2Oj4WD50H6YgfEYKPXw9NKq0Lyw@mail.gmail.com>

Hugo,

OGREnvelope is not treated as a first class geometry in OGR and you are
pretty much stuck creating a polygon geometry point by point from the
envelope values.  Kind of sucky, I know.

Best regards,
Frank


On Fri, Aug 30, 2013 at 11:57 AM, Hugo Benicio <hbobenicio at gmail.com> wrote:

> Hi guys! Easy question here:
>
> I have an OGREnvelope describing a rectangle that I want to use as an
> OGRPolygon.
> What is the correct way to do that? What I need is a OGRPolygon
> representing a rectangle from my OGREnvelope.
> Do I have to manually assign point by point to it? (how?) Or there is some
> handy method I can use (union?).
>
> Thanks in advance.
> Hugo.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130830/03d1ae1e/attachment.html>

