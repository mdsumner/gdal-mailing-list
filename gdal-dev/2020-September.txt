From even.rouault at spatialys.com  Tue Sep  1 02:26:15 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 01 Sep 2020 11:26:15 +0200
Subject: [gdal-dev] GDAL 3.1.3 RC1 available
Message-ID: <1756804.e7UZs0NPnu@even-i700>

Hi,

I have prepared a GDAL/OGR 3.1.3 release candidate.

Pick up an archive among the following ones (by ascending size):

  https://download.osgeo.org/gdal/3.1.3/gdal-3.1.3rc1.tar.xz
  https://download.osgeo.org/gdal/3.1.3/gdal-3.1.3rc1.tar.gz
  https://download.osgeo.org/gdal/3.1.3/gdal313rc1.zip

A snapshot of the gdalautotest suite is also available :

  https://download.osgeo.org/gdal/3.1.3/gdalautotest-3.1.3rc1.tar.gz
  https://download.osgeo.org/gdal/3.1.3/gdalautotest-3.1.3rc1.zip

GDAL-GRASS plugin (updated !):

  https://download.osgeo.org/gdal/3.1.3/gdal-grass-3.1.3.tar.gz

The NEWS file is here :

  https://github.com/OSGeo/gdal/blob/v3.1.3RC1/gdal/NEWS

I'll call for a vote promoting it to final later this week if no
serious problems are reported before.

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200901/926a3274/attachment.html>

From rajeshreddy82 at gmail.com  Tue Sep  1 02:47:25 2020
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Tue, 1 Sep 2020 02:47:25 -0700 (MST)
Subject: [gdal-dev] C++ GDALVectorTranslate locking the files
Message-ID: <1598953645178-0.post@n6.nabble.com>

Developers,

I am using ...\gdal\x86\*.dlls as a reference dlls and created a C++ project
with (GDALDataset *)GDALVectorTranslate method. Whenever I am requesting
..../VectorTileService/18/66027/96262.mvt on the browser I am getting a
response. After the response, If I go back and rebuild the project, I am
seeing the below errors...these files are locked...Do we need to perform any
cleanup in the C++ project?


Severity	Code	Description	Project	File	Line	Suppression State
Error		Unable to delete file "..\..\..\Program\gdal\x86\expat.dll". Access
to the path 'C:\Development\XX\Program\gdal\x86\expat.dll' is denied.	

Severity	Code	Description	Project	File	Line	Suppression State
Error		Unable to delete file "..\..\..\Program\gdal\x86\geos_c.dll". Access
to the path 'C:\Development\XX\Program\gdal\x86\geos_c.dll' is denied.	

Regards,
Rajesh




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From zhanli1986 at gmail.com  Tue Sep  1 08:29:32 2020
From: zhanli1986 at gmail.com (Zhan Li)
Date: Tue, 1 Sep 2020 17:29:32 +0200
Subject: [gdal-dev] gdal_translate into netCDF file will lose some
 important metadata items such as scale_factor and add_offset
In-Reply-To: <7186871.DMNQoomu6m@even-i700>
References: <CAAMT6JOJAiuqe7vQS7RCyN9u3O-PYgxuirWH6oGHt1fLvqkW6g@mail.gmail.com>
 <5530248.VXYv0EBkLk@even-i700>
 <CAAMT6JPtghYmmDKc1xqALtBjEXk3SiDb5=KxG+ZpCcPB7MtZkg@mail.gmail.com>
 <7186871.DMNQoomu6m@even-i700>
Message-ID: <CAAMT6JOZ5CQpO6C+4VZ5OkOPhjyDeRqwtP4iY-_wJaJRW4zYeA@mail.gmail.com>

Hi Even,

Thanks for such a quick fix! Really really appreciate what you've done for
the GDAL community!

Zhan.


On Mon, Aug 31, 2020 at 8:32 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Zhan,
>
>
>
> adding back the list
>
>
>
> There was an issue in the writing code of the netCDF driver. It was
> supposed supposed to copy the offset and scale settings from the source
> dataset, but there was a logic error. Fixed per
>
> https://github.com/OSGeo/gdal/pull/2906
>
>
>
> Even
>
>
>
>
>
> > Hi Even,
>
> >
>
> > Thanks a lot for your reply! Yes here in this example, scale_factor and
>
> > add_offset do not matter. I put them here just for demo purposes. In my
>
> > actual data (quite large), I'd like to use 1e-3 as scale factor but could
>
> > not write scale_factor into the metadata of netCDF via gdal_translate.
> Even
>
> > if I use VRT as an intermediate file and manually add scale_factor into
> the
>
> > VRT per band through "<MDI key="scale_factor">1e-3</MDI>". It still does
>
> > not work :(
>
> >
>
> > But it sounds like the implementation of the netCDF driver in GDAL has
> some
>
> > explicit tweak of metadata items? Like you said, valid_range is
> explicitly
>
> > discarded. Maybe scale_factor and add_offset and such are also part of
>
> > metadata items that the driver explicitly discards? In that case, I'll
>
> > stick to scale_factor=1 and add_offset=0. Not ideal though. Otherwise,
> this
>
> > loss of metadata items for netCDF files should count as a bug to be
>
> > reported?
>
> >
>
> > Zhan.
>
> >
>
> > On Mon, Aug 31, 2020 at 11:06 AM Even Rouault <
> even.rouault at spatialys.com>
>
> >
>
> > wrote:
>
> > > On lundi 31 août 2020 00:11:54 CEST Zhan Li wrote:
>
> > > > Hi, when I use gdal_translate to convert a raster file (e.g., either
>
> > >
>
> > > GTiff
>
> > >
>
> > > > or VRT) into netCDF format, it always loses some important metadata
>
> > > > items
>
> > > >
>
> > > > such as scale_factor, add_offset and etc. What am I doing it wrong?
> Can
>
> > > >
>
> > > > anyone help me to solve this problem?
>
> > >
>
> > > As scale_factor=1 and add_offset=0 in that dataset, they have no
> effect,
>
> > > and are thus not stored when converted to GeoTIFF.
>
> > >
>
> > >
>
> > >
>
> > > valid_range is explicitly discarded from source metadata when
> converting
>
> > > into netCDF. I'm not completely sure of the rationale for that.
>
> > >
>
> > >
>
> > >
>
> > > Even
>
> > >
>
> > >
>
> > >
>
> > > --
>
> > >
>
> > > Spatialys - Geospatial professional services
>
> > >
>
> > > http://www.spatialys.com
>
>
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
>


-- 
Zhan Li <https://zhanlilz.github.io/>, 李展;
Google Scholar
<https://scholar.google.com/citations?user=JGNL9BoAAAAJ&hl=en>,
ORCID <https://orcid.org/0000-0001-6307-5200>, Github
<https://github.com/zhanlilz>,
Twitter <https://twitter.com/zhanlilz>, LinkedIn
<https://www.linkedin.com/in/zhanli/>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200901/67ce678f/attachment.html>

From mgrudzien7 at gmail.com  Tue Sep  1 09:27:46 2020
From: mgrudzien7 at gmail.com (=?utf-8?Q?Marcin_Grudzie=C5=84?=)
Date: Tue, 1 Sep 2020 18:27:46 +0200
Subject: [gdal-dev] Compiling GDAL with ArcSDE support
Message-ID: <8CDAEBF1-F4C6-42C5-ABEE-77DF65EF164C@gmail.com>

Hi,

I need to compile GDAL with the support of ESRI ArcSDE on Ubuntu 20.04. I already have some experience in compiling a custom version of GDAL. What I need is information what ESRI libraries I need to compile GDAL. My company uses ArcSDE (ArcGIS Server) in versions 10.3.1 and 10.6.1, the data is stored in Oracle and PostgreSQL databases.

I have access to ESRI Maintenance Program, so I tried asking ESRI. They answered that they can’t help me, because they do not support the integration of their solutions with third-parties software. 

So again the question to you is what ESRI library I need to successfully integrate GDAL with ArcSDE? Where I can find it? I have access to the myESRI Platform from where I can download most of the ESRI products, but I do not know which of ESRI software packages contains drivers I need.

Thank you in advance,

Best regards,
Marcin

From howard at hobu.co  Tue Sep  1 10:50:54 2020
From: howard at hobu.co (Howard Butler)
Date: Tue, 1 Sep 2020 12:50:54 -0500
Subject: [gdal-dev] Compiling GDAL with ArcSDE support
In-Reply-To: <8CDAEBF1-F4C6-42C5-ABEE-77DF65EF164C@gmail.com>
References: <8CDAEBF1-F4C6-42C5-ABEE-77DF65EF164C@gmail.com>
Message-ID: <EA20A523-EB3F-4F95-952A-58B2DC438F47@hobu.co>



> On Sep 1, 2020, at 11:27 AM, Marcin Grudzień <mgrudzien7 at gmail.com> wrote:
> 
> Hi,
> 
> I need to compile GDAL with the support of ESRI ArcSDE on Ubuntu 20.04. I already have some experience in compiling a custom version of GDAL. What I need is information what ESRI libraries I need to compile GDAL. My company uses ArcSDE (ArcGIS Server) in versions 10.3.1 and 10.6.1, the data is stored in Oracle and PostgreSQL databases.
> 
> I have access to ESRI Maintenance Program, so I tried asking ESRI. They answered that they can’t help me, because they do not support the integration of their solutions with third-parties software. 
> 
> So again the question to you is what ESRI library I need to successfully integrate GDAL with ArcSDE? Where I can find it? I have access to the myESRI Platform from where I can download most of the ESRI products, but I do not know which of ESRI software packages contains drivers I need.

You need the ArcSDE Client SDK. I am doubtful you will find a copy that can work on Ubuntu 20.04, however. It is my understanding that Esri stopped distributing it multiple releases ago, and it is probable many changes have happened to SDE's internals that could make a version of the Client SDK fail to work even if you can find it.

Not-much-help'ly yours,

Howard

From ao at t-kartor.se  Tue Sep  1 23:15:54 2020
From: ao at t-kartor.se (Andreas Oxenstierna)
Date: Wed, 2 Sep 2020 08:15:54 +0200
Subject: [gdal-dev] Compiling GDAL with ArcSDE support
In-Reply-To: <EA20A523-EB3F-4F95-952A-58B2DC438F47@hobu.co>
References: <8CDAEBF1-F4C6-42C5-ABEE-77DF65EF164C@gmail.com>
 <EA20A523-EB3F-4F95-952A-58B2DC438F47@hobu.co>
Message-ID: <cbdf6008-2c88-4352-8500-f80ed46dc0e2@t-kartor.se>

Hi

Marcin, you have to solve it on the SQL level. I.e. use the 
SQL-functions installed by ArcGIS Server to convert the ESRI geometries 
to a GDAL readable geometry.
Deployed e.g. as database triggers whenever an ESRI geometry is updated.
I think the latest official SDK release is for 10.0: 
https://support.esri.com/en/download/1877

>
>> On Sep 1, 2020, at 11:27 AM, Marcin Grudzień <mgrudzien7 at gmail.com> wrote:
>>
>> Hi,
>>
>> I need to compile GDAL with the support of ESRI ArcSDE on Ubuntu 20.04. I already have some experience in compiling a custom version of GDAL. What I need is information what ESRI libraries I need to compile GDAL. My company uses ArcSDE (ArcGIS Server) in versions 10.3.1 and 10.6.1, the data is stored in Oracle and PostgreSQL databases.
>>
>> I have access to ESRI Maintenance Program, so I tried asking ESRI. They answered that they can’t help me, because they do not support the integration of their solutions with third-parties software.
>>
>> So again the question to you is what ESRI library I need to successfully integrate GDAL with ArcSDE? Where I can find it? I have access to the myESRI Platform from where I can download most of the ESRI products, but I do not know which of ESRI software packages contains drivers I need.
> You need the ArcSDE Client SDK. I am doubtful you will find a copy that can work on Ubuntu 20.04, however. It is my understanding that Esri stopped distributing it multiple releases ago, and it is probable many changes have happened to SDE's internals that could make a version of the Client SDK fail to work even if you can find it.
>
> Not-much-help'ly yours,
>
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Best Regards

Andreas Oxenstierna
T-Kartor Geospatial AB
Olof Mohlins väg 12 Kristianstad
mobile: +46 733 206831
mailto: ao at t-kartor.se
http://www.t-kartor.com


From even.rouault at spatialys.com  Wed Sep  2 01:59:00 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 02 Sep 2020 10:59:00 +0200
Subject: [gdal-dev] Compiling GDAL with ArcSDE support
In-Reply-To: <EA20A523-EB3F-4F95-952A-58B2DC438F47@hobu.co>
References: <8CDAEBF1-F4C6-42C5-ABEE-77DF65EF164C@gmail.com>
 <EA20A523-EB3F-4F95-952A-58B2DC438F47@hobu.co>
Message-ID: <39992850.rN1HjUueiC@even-i700>

Howard,

Should we just remove the driver if it has become unusable ? People badly in need for it could 
still grab an older release.

Even

> > On Sep 1, 2020, at 11:27 AM, Marcin Grudzień <mgrudzien7 at gmail.com> wrote:
> > 
> > Hi,
> > 
> > I need to compile GDAL with the support of ESRI ArcSDE on Ubuntu 20.04. I
> > already have some experience in compiling a custom version of GDAL. What
> > I need is information what ESRI libraries I need to compile GDAL. My
> > company uses ArcSDE (ArcGIS Server) in versions 10.3.1 and 10.6.1, the
> > data is stored in Oracle and PostgreSQL databases.
> > 
> > I have access to ESRI Maintenance Program, so I tried asking ESRI. They
> > answered that they can’t help me, because they do not support the
> > integration of their solutions with third-parties software.
> > 
> > So again the question to you is what ESRI library I need to successfully
> > integrate GDAL with ArcSDE? Where I can find it? I have access to the
> > myESRI Platform from where I can download most of the ESRI products, but
> > I do not know which of ESRI software packages contains drivers I need.
> You need the ArcSDE Client SDK. I am doubtful you will find a copy that can
> work on Ubuntu 20.04, however. It is my understanding that Esri stopped
> distributing it multiple releases ago, and it is probable many changes have
> happened to SDE's internals that could make a version of the Client SDK
> fail to work even if you can find it.
> 
> Not-much-help'ly yours,
> 
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200902/0bac618b/attachment.html>

From even.rouault at spatialys.com  Wed Sep  2 03:19:45 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 02 Sep 2020 12:19:45 +0200
Subject: [gdal-dev] GDAL slide for OSGeo AGM
Message-ID: <2253344.ut8mRHFUvc@even-i700>

Hi,

OSGeo Annual General Meeting (AGM) this year will have a virtual format: Thursday September 10th 2020 from 18 UTC till 20 UTC.

See https://lists.osgeo.org/pipermail/discuss/2020-August/039019.html and
https://wiki.osgeo.org/wiki/Annual_General_Meeting_2020 for details.

The project is requested to provide one slide (1 minute max) with the highlights from last year.

I've initiated it at (slide 44):
https://docs.google.com/presentation/d/1C6llSnWZ28c2aWQgttPiOnoo6dttdqKg07ugU_yr6Uc/edit#slide=id.g3fdcab0c8e_22_0 

Anything to add/remove/change ?

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200902/fc67c22c/attachment.html>

From johan.vandewauw at gmail.com  Wed Sep  2 06:39:00 2020
From: johan.vandewauw at gmail.com (Johan Van de Wauw)
Date: Wed, 2 Sep 2020 15:39:00 +0200
Subject: [gdal-dev] Compiling GDAL with ArcSDE support
In-Reply-To: <8CDAEBF1-F4C6-42C5-ABEE-77DF65EF164C@gmail.com>
References: <8CDAEBF1-F4C6-42C5-ABEE-77DF65EF164C@gmail.com>
Message-ID: <CAJOp35n31035SeoL=Jj7Jns-D3DXV56nqshumRagPe8eL8QRug@mail.gmail.com>

Marcin,

I managed to compile this extension against ubuntu 14.04 with at that time
gdal 1.10 , while helping a customer migrating away from arcSDE.

https://lists.osgeo.org/pipermail/gdal-dev/2016-November/045445.html

At that time, it was only possible to receive this client sdk on cdrom (!).
This was version 10.2, which I believe is the last version of ArcSDE. I
guess it will be much harder to get it now.

Are you sure you are still using arcsde?

Kind Regards,
Johan

On Tue, Sep 1, 2020 at 6:28 PM Marcin Grudzień <mgrudzien7 at gmail.com> wrote:

> Hi,
>
> I need to compile GDAL with the support of ESRI ArcSDE on Ubuntu 20.04. I
> already have some experience in compiling a custom version of GDAL. What I
> need is information what ESRI libraries I need to compile GDAL. My company
> uses ArcSDE (ArcGIS Server) in versions 10.3.1 and 10.6.1, the data is
> stored in Oracle and PostgreSQL databases.
>
> I have access to ESRI Maintenance Program, so I tried asking ESRI. They
> answered that they can’t help me, because they do not support the
> integration of their solutions with third-parties software.
>
> So again the question to you is what ESRI library I need to successfully
> integrate GDAL with ArcSDE? Where I can find it? I have access to the
> myESRI Platform from where I can download most of the ESRI products, but I
> do not know which of ESRI software packages contains drivers I need.
>
> Thank you in advance,
>
> Best regards,
> Marcin
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200902/56f63b74/attachment.html>

From mgrudzien7 at gmail.com  Wed Sep  2 08:03:05 2020
From: mgrudzien7 at gmail.com (=?utf-8?Q?Marcin_Grudzie=C5=84?=)
Date: Wed, 2 Sep 2020 17:03:05 +0200
Subject: [gdal-dev] Compiling GDAL with ArcSDE support
In-Reply-To: <CAJOp35n31035SeoL=Jj7Jns-D3DXV56nqshumRagPe8eL8QRug@mail.gmail.com>
References: <8CDAEBF1-F4C6-42C5-ABEE-77DF65EF164C@gmail.com>
 <CAJOp35n31035SeoL=Jj7Jns-D3DXV56nqshumRagPe8eL8QRug@mail.gmail.com>
Message-ID: <8C8682A4-0698-4281-BC91-A0A825B28B80@gmail.com>

Dear Johan,

Good question. 
So let me explain the problem. My organization is using ESRI desktop clients (mainly ArcGIS Desktop) to upload the spatial data to the databases used across the organization and publish it via network services. As DBMSs, we use Oracle and Postgres. We upload the data using Esri clients in versions 10.3.1 or 1.6.1.

Now I need GDAL to do two things:
1. Export the data form these databases to other formats.
2.  Use it to connect to MapServer to publish WMS, WFS services straight from databases.

So after looking through the documentation available online, I thought that using ArcSDE will be the best solution, but maybe there are better alternatives.

Best regards,
Marcin

> Wiadomość napisana przez Johan Van de Wauw <johan.vandewauw at gmail.com> w dniu 02.09.2020, o godz. 15:39:
> 
> Marcin,
> 
> I managed to compile this extension against ubuntu 14.04 with at that time gdal 1.10 , while helping a customer migrating away from arcSDE. 
> 
> https://lists.osgeo.org/pipermail/gdal-dev/2016-November/045445.html <https://lists.osgeo.org/pipermail/gdal-dev/2016-November/045445.html>
> 
> At that time, it was only possible to receive this client sdk on cdrom (!). This was version 10.2, which I believe is the last version of ArcSDE. I guess it will be much harder to get it now. 
> 
> Are you sure you are still using arcsde?
> 
> Kind Regards,
> Johan

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200902/2510c695/attachment-0001.html>

From jmckenna at gatewaygeomatics.com  Wed Sep  2 09:29:57 2020
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed, 2 Sep 2020 13:29:57 -0300
Subject: [gdal-dev] Compiling GDAL with ArcSDE support
In-Reply-To: <8C8682A4-0698-4281-BC91-A0A825B28B80@gmail.com>
References: <8CDAEBF1-F4C6-42C5-ABEE-77DF65EF164C@gmail.com>
 <CAJOp35n31035SeoL=Jj7Jns-D3DXV56nqshumRagPe8eL8QRug@mail.gmail.com>
 <8C8682A4-0698-4281-BC91-A0A825B28B80@gmail.com>
Message-ID: <cc836a2a-fa6d-5100-95ad-3a63fdc135cd@gatewaygeomatics.com>

Hi Marcin,

In the long run, I would go with PostGIS/PostgreSQL, and then display 
directly in MapServer (as 
https://mapserver.org/input/vector/postgis.html )  GDAL's related driver 
page is full of interesting tips as well for PostGIS : 
https://gdal.org/drivers/vector/pg.html

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
co-founder of FOSS4G
http://gatewaygeo.com/



On 2020-09-02 12:03 p.m., Marcin Grudzień wrote:
> Dear Johan,
> 
> Good question.
> So let me explain the problem. My organization is using ESRI desktop 
> clients (mainly ArcGIS Desktop) to upload the spatial data to the 
> databases used across the organization and publish it via network 
> services. As DBMSs, we use Oracle and Postgres. We upload the data using 
> Esri clients in versions 10.3.1 or 1.6.1.
> 
> Now I need GDAL to do two things:
> 1. Export the data form these databases to other formats.
> 2.  Use it to connect to MapServer to publish WMS, WFS services straight 
> from databases.
> 
> So after looking through the documentation available online, I thought 
> that using ArcSDE will be the best solution, but maybe there are better 
> alternatives.
> 
> Best regards,
> Marcin
> 
>> Wiadomość napisana przez Johan Van de Wauw <johan.vandewauw at gmail.com 
>> <mailto:johan.vandewauw at gmail.com>> w dniu 02.09.2020, o godz. 15:39:
>>
>> Marcin,
>>
>> I managed to compile this extension against ubuntu 14.04 with at that 
>> time gdal 1.10 , while helping a customer migrating away from arcSDE.
>>
>> https://lists.osgeo.org/pipermail/gdal-dev/2016-November/045445.html
>>
>> At that time, it was only possible to receive this client sdk on cdrom 
>> (!). This was version 10.2, which I believe is the last version of 
>> ArcSDE. I guess it will be much harder to get it now.
>>
>> Are you sure you are still using arcsde?
>>
>> Kind Regards,
>> Johan
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


From Zachary.Deziel at USherbrooke.ca  Wed Sep  2 09:50:07 2020
From: Zachary.Deziel at USherbrooke.ca (=?iso-8859-1?Q?Zachary_D=E9ziel?=)
Date: Wed, 2 Sep 2020 16:50:07 +0000
Subject: [gdal-dev] Complexity of algorithms
Message-ID: <YQXPR0101MB1525B23F00C9652E5F49D36FFE2F0@YQXPR0101MB1525.CANPRD01.PROD.OUTLOOK.COM>


Hi all,

Sorry for disturbing and I hope I am passing through the right channel for my question. If not, please feel free to redirect me!

I have been searching in the documentation and elsewhere for information regarding the time complexity of the algorithms of GDAL/OGR. More precisely around the classic operations on point, line and polygon data structures (buffer, intersect, etc). I have not found any mention of complexity in the documentation. Is there some hidden documentation gem somewhere that covers the time and/or memory complexity of the algorithms? If no such documentation exists, are there reasons for it not existing? Is it simply a matter of not being a priority in the development cycle?

Sorry for the compact and numerous questions, if you have any interest in the subject please reach out.

Sincerely,

Zac

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200902/c95001aa/attachment.html>

From howard at hobu.co  Wed Sep  2 10:07:26 2020
From: howard at hobu.co (Howard Butler)
Date: Wed, 2 Sep 2020 12:07:26 -0500
Subject: [gdal-dev] Compiling GDAL with ArcSDE support
In-Reply-To: <39992850.rN1HjUueiC@even-i700>
References: <8CDAEBF1-F4C6-42C5-ABEE-77DF65EF164C@gmail.com>
 <EA20A523-EB3F-4F95-952A-58B2DC438F47@hobu.co>
 <39992850.rN1HjUueiC@even-i700>
Message-ID: <7EC94611-BCCE-4CDC-AAC4-238573AEA816@hobu.co>

Yes, both the vector and raster drivers should be dropped.  A determined person can get it from a previous release or git branch.

Howard

> On Sep 2, 2020, at 3:59 AM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Howard,
>  
> Should we just remove the driver if it has become unusable ? People badly in need for it could still grab an older release.
>  
> Even
>  
> > > On Sep 1, 2020, at 11:27 AM, Marcin Grudzień <mgrudzien7 at gmail.com> wrote:
> > > 
> > > Hi,
> > > 
> > > I need to compile GDAL with the support of ESRI ArcSDE on Ubuntu 20.04. I
> > > already have some experience in compiling a custom version of GDAL. What
> > > I need is information what ESRI libraries I need to compile GDAL. My
> > > company uses ArcSDE (ArcGIS Server) in versions 10.3.1 and 10.6.1, the
> > > data is stored in Oracle and PostgreSQL databases.
> > > 
> > > I have access to ESRI Maintenance Program, so I tried asking ESRI. They
> > > answered that they can’t help me, because they do not support the
> > > integration of their solutions with third-parties software.
> > > 
> > > So again the question to you is what ESRI library I need to successfully
> > > integrate GDAL with ArcSDE? Where I can find it? I have access to the
> > > myESRI Platform from where I can download most of the ESRI products, but
> > > I do not know which of ESRI software packages contains drivers I need.
> > You need the ArcSDE Client SDK. I am doubtful you will find a copy that can
> > work on Ubuntu 20.04, however. It is my understanding that Esri stopped
> > distributing it multiple releases ago, and it is probable many changes have
> > happened to SDE's internals that could make a version of the Client SDK
> > fail to work even if you can find it.
> > 
> > Not-much-help'ly yours,
> > 
> > Howard
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>  
>  
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com <http://www.spatialys.com/>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200902/7544d54f/attachment-0001.html>

From warmerdam at pobox.com  Wed Sep  2 10:15:56 2020
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 2 Sep 2020 13:15:56 -0400
Subject: [gdal-dev] Complexity of algorithms
In-Reply-To: <YQXPR0101MB1525B23F00C9652E5F49D36FFE2F0@YQXPR0101MB1525.CANPRD01.PROD.OUTLOOK.COM>
References: <YQXPR0101MB1525B23F00C9652E5F49D36FFE2F0@YQXPR0101MB1525.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <CA+YzLBchKLxYPYiekF1mnDa6siQ-04MuRbDvnA_cqrY=4ec85g@mail.gmail.com>

Zachary,

The interesting geometry functions are essentially all from GEOS, so I'd
suggest investigating there for information.

https://trac.osgeo.org/geos/

Most GDAL raster operations are essentially linear in the number of pixels
though there are a few things (like hole filling, and polygonization, and
contour generation) that have more interesting properties.  I am not aware
an effort to characterize the complexity of these in the GDAL project
though at least some thought went into complexity analysis when
implementing some of these.

Best regards,
Frank


On Wed, Sep 2, 2020 at 12:50 PM Zachary Déziel <
Zachary.Deziel at usherbrooke.ca> wrote:

>
>
> Hi all,
>
>
>
> Sorry for disturbing and I hope I am passing through the right channel for
> my question. If not, please feel free to redirect me!
>
>
>
> I have been searching in the documentation and elsewhere for information
> regarding the time complexity of the algorithms of GDAL/OGR. More precisely
> around the classic operations on point, line and polygon data structures
> (buffer, intersect, etc). I have not found any mention of complexity in the
> documentation. Is there some hidden documentation gem somewhere that covers
> the time and/or memory complexity of the algorithms? If no such
> documentation exists, are there reasons for it not existing? Is it simply a
> matter of not being a priority in the development cycle?
>
>
>
> Sorry for the compact and numerous questions, if you have any interest in
> the subject please reach out.
>
>
>
> Sincerely,
>
>
>
> Zac
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200902/cbd3e527/attachment.html>

From even.rouault at spatialys.com  Wed Sep  2 11:55:49 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 02 Sep 2020 20:55:49 +0200
Subject: [gdal-dev] Compiling GDAL with ArcSDE support
In-Reply-To: <7EC94611-BCCE-4CDC-AAC4-238573AEA816@hobu.co>
References: <8CDAEBF1-F4C6-42C5-ABEE-77DF65EF164C@gmail.com>
 <39992850.rN1HjUueiC@even-i700>
 <7EC94611-BCCE-4CDC-AAC4-238573AEA816@hobu.co>
Message-ID: <1776078.X9jImECopK@even-i700>

On mercredi 2 septembre 2020 12:07:26 CEST Howard Butler wrote:
> Yes, both the vector and raster drivers should be dropped.  A 
determined
> person can get it from a previous release or git branch.

Removal pending in https://github.com/OSGeo/gdal/pull/2916

"Speak Now or Forever Hold Your Peace"

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200902/abc09af6/attachment.html>

From ao at t-kartor.se  Wed Sep  2 23:24:01 2020
From: ao at t-kartor.se (Andreas Oxenstierna)
Date: Thu, 3 Sep 2020 08:24:01 +0200
Subject: [gdal-dev] Compiling GDAL with ArcSDE support
In-Reply-To: <8C8682A4-0698-4281-BC91-A0A825B28B80@gmail.com>
References: <8CDAEBF1-F4C6-42C5-ABEE-77DF65EF164C@gmail.com>
 <CAJOp35n31035SeoL=Jj7Jns-D3DXV56nqshumRagPe8eL8QRug@mail.gmail.com>
 <8C8682A4-0698-4281-BC91-A0A825B28B80@gmail.com>
Message-ID: <1ee82e86-ea97-7415-931f-1c41296e2b62@t-kartor.se>

Notes:
1 ArcSDE server-side SDK as GDAL uses it doesn't exist any more. ESRI 
moved all functionality to the client-side (e.g. ArcGIS) when rewriting 
ArcGIS Server to 64-bit. My memory is that was 10.1 but can be 10.2 as 
Johan write

2 You can store OGC-defined geometries in the native DBMS spatial format 
using the applicable SDE DBTUNE geometry storage keyword (for PostGIS: 
PG_GEOMETRY for Oracle: SDO_GEOMETRY)
    ESRI-specific geometries like text will still be stored in ESRI 
geometry format

3 If storing geometries in any ESRI geometry format like ST_GEOMETRY, 
you need to convert the geometries to something readable by MapServer. 
The most efficient is what I proposed, to use the functions installed by 
ArcGIS Server in the sde database schema


> Dear Johan,
>
> Good question.
> So let me explain the problem. My organization is using ESRI desktop 
> clients (mainly ArcGIS Desktop) to upload the spatial data to the 
> databases used across the organization and publish it via network 
> services. As DBMSs, we use Oracle and Postgres. We upload the data 
> using Esri clients in versions 10.3.1 or 1.6.1.
>
> Now I need GDAL to do two things:
> 1. Export the data form these databases to other formats.
> 2.  Use it to connect to MapServer to publish WMS, WFS services 
> straight from databases.
>
> So after looking through the documentation available online, I thought 
> that using ArcSDE will be the best solution, but maybe there are 
> better alternatives.
>
> Best regards,
> Marcin
>
>> Wiadomość napisana przez Johan Van de Wauw <johan.vandewauw at gmail.com 
>> <mailto:johan.vandewauw at gmail.com>> w dniu 02.09.2020, o godz. 15:39:
>>
>> Marcin,
>>
>> I managed to compile this extension against ubuntu 14.04 with at that 
>> time gdal 1.10 , while helping a customer migrating away from arcSDE.
>>
>> https://lists.osgeo.org/pipermail/gdal-dev/2016-November/045445.html
>>
>> At that time, it was only possible to receive this client sdk on 
>> cdrom (!). This was version 10.2, which I believe is the last version 
>> of ArcSDE. I guess it will be much harder to get it now.
>>
>> Are you sure you are still using arcsde?
>>
>> Kind Regards,
>> Johan
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Best Regards

Andreas Oxenstierna
T-Kartor Geospatial AB
Olof Mohlins väg 12 Kristianstad
mobile: +46 733 206831
mailto: ao at t-kartor.se
http://www.t-kartor.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200903/0cf15d0d/attachment.html>

From even.rouault at spatialys.com  Thu Sep  3 01:45:35 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 03 Sep 2020 10:45:35 +0200
Subject: [gdal-dev] Motion: promote GDAL 3.1.3 RC1
Message-ID: <1781958.v1fckjULcU@even-i700>

Hi,

Having heard no issues with RC1,

Motion:

Adopt GDAL 3.1.3 RC1 as final 3.1.3 release

+1 Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200903/525dcc65/attachment.html>

From bjorn.harrtell at gmail.com  Thu Sep  3 06:17:47 2020
From: bjorn.harrtell at gmail.com (=?UTF-8?Q?Bj=C3=B6rn_Harrtell?=)
Date: Thu, 3 Sep 2020 15:17:47 +0200
Subject: [gdal-dev] Motion: promote GDAL 3.1.3 RC1
In-Reply-To: <1781958.v1fckjULcU@even-i700>
References: <1781958.v1fckjULcU@even-i700>
Message-ID: <CANhDX=bKdEC1cn0_q_yEhSGChhHOMqYW5LYEU=w7ZSB4=KNMDQ@mail.gmail.com>

Consider including https://github.com/OSGeo/gdal/pull/2649, it is a bugfix
without which C# bindings and .NET Core runtime GDAL will produce corrupt
output when UTF-8 characters are used.

Den tors 3 sep. 2020 kl 10:45 skrev Even Rouault <even.rouault at spatialys.com
>:

> Hi,
>
>
>
> Having heard no issues with RC1,
>
>
>
> Motion:
>
>
>
> Adopt GDAL 3.1.3 RC1 as final 3.1.3 release
>
>
>
> +1 Even
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200903/ee024533/attachment.html>

From even.rouault at spatialys.com  Thu Sep  3 07:04:28 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 03 Sep 2020 16:04:28 +0200
Subject: [gdal-dev] Motion: promote GDAL 3.1.3 RC1
In-Reply-To: <CANhDX=bKdEC1cn0_q_yEhSGChhHOMqYW5LYEU=w7ZSB4=KNMDQ@mail.gmail.com>
References: <1781958.v1fckjULcU@even-i700>
 <CANhDX=bKdEC1cn0_q_yEhSGChhHOMqYW5LYEU=w7ZSB4=KNMDQ@mail.gmail.com>
Message-ID: <2978295.S0hxdTen5x@even-i700>

Björn,

> Consider including https://github.com/OSGeo/gdal/pull/2649, it is a bugfix
> without which C# bindings and .NET Core runtime GDAL will produce corrupt
> output when UTF-8 characters are used.

Unless this bugfix fixes a regression (ie issue not present in past releases), which I 
don't think it is, I'll stick with RC1. There are almost every day bug fixes that are 
worth backporting, but we must deliver at some point however.

Please create a backport pull request for that issue.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200903/542e8e98/attachment.html>

From howard at hobu.co  Thu Sep  3 10:22:54 2020
From: howard at hobu.co (Howard Butler)
Date: Thu, 3 Sep 2020 12:22:54 -0500
Subject: [gdal-dev] Motion: promote GDAL 3.1.3 RC1
In-Reply-To: <1781958.v1fckjULcU@even-i700>
References: <1781958.v1fckjULcU@even-i700>
Message-ID: <61089964-F00E-4C7E-8A75-F7BEC8EEBEA1@hobu.co>



> On Sep 3, 2020, at 3:45 AM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Hi,
>  
> Having heard no issues with RC1,
>  
> Motion:
>  
> Adopt GDAL 3.1.3 RC1 as final 3.1.3 release
>  
> +1 Even
>  

+1 Howard

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200903/4d83505b/attachment-0001.html>

From sean at mapbox.com  Thu Sep  3 10:28:55 2020
From: sean at mapbox.com (Sean Gillies)
Date: Thu, 3 Sep 2020 11:28:55 -0600
Subject: [gdal-dev] Motion: promote GDAL 3.1.3 RC1
In-Reply-To: <1781958.v1fckjULcU@even-i700>
References: <1781958.v1fckjULcU@even-i700>
Message-ID: <CADPhZXz0KGdbwjtukKp4oPaOku5bdJNDa4H=0rRCo719+5LF1Q@mail.gmail.com>

Hi Even,

Looks like we are close to a patch for #2911, can we wait for its
resolution or a postponement of its resolution?

On Thu, Sep 3, 2020 at 2:45 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
>
>
> Having heard no issues with RC1,
>
>
>
> Motion:
>
>
>
> Adopt GDAL 3.1.3 RC1 as final 3.1.3 release
>
>
>
> +1 Even
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200903/94cbb698/attachment.html>

From mateusz at loskot.net  Thu Sep  3 11:15:50 2020
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 3 Sep 2020 20:15:50 +0200
Subject: [gdal-dev] Motion: promote GDAL 3.1.3 RC1
In-Reply-To: <1781958.v1fckjULcU@even-i700>
References: <1781958.v1fckjULcU@even-i700>
Message-ID: <CABUeae_5t6z_EW0n=TNW7Wx95h4LqGNrT=UWFAjj-O=h5nWpVg@mail.gmail.com>

On Thu, 3 Sep 2020 at 10:45, Even Rouault <even.rouault at spatialys.com> wrote:
>
> Having heard no issues with RC1,
>
> Motion:
> Adopt GDAL 3.1.3 RC1 as final 3.1.3 release
>
> +1 Even

+1

-- 
Mateusz Loskot, http://mateusz.loskot.net

From jukka.rahkonen at maanmittauslaitos.fi  Thu Sep  3 11:40:32 2020
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 3 Sep 2020 11:40:32 -0700 (MST)
Subject: [gdal-dev] Motion: promote GDAL 3.1.3 RC1
In-Reply-To: <1781958.v1fckjULcU@even-i700>
References: <1781958.v1fckjULcU@even-i700>
Message-ID: <1599158432005-0.post@n6.nabble.com>

+1

-Jukka Rahkonen-


Even Rouault-2 wrote
> Hi,
> 
> Having heard no issues with RC1,
> 
> Motion:
> 
> Adopt GDAL 3.1.3 RC1 as final 3.1.3 release
> 
> +1 Even
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Thu Sep  3 12:00:49 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 03 Sep 2020 21:00:49 +0200
Subject: [gdal-dev] Motion: promote GDAL 3.1.3 RC1
In-Reply-To: <CADPhZXz0KGdbwjtukKp4oPaOku5bdJNDa4H=0rRCo719+5LF1Q@mail.gmail.com>
References: <1781958.v1fckjULcU@even-i700>
 <CADPhZXz0KGdbwjtukKp4oPaOku5bdJNDa4H=0rRCo719+5LF1Q@mail.gmail.com>
Message-ID: <4270006.zWDNRkW8vq@even-i700>

Sean,

> Looks like we are close to a patch for #2911, can we wait for its
> resolution or a postponement of its resolution?

Sorry to play the stubborn release manager, but this will be a never ending game 
if I wait for all bugfixes that people need. Same here, this is a long standing issue, 
not something that worked until recently and no longer does.
(and fixes in the VRT driver aren't necessary trivial, and this is a sensitive driver, so 
there would be a risk to rush that into the release)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200903/de2309ca/attachment.html>

From gvenkat72 at gmail.com  Thu Sep  3 12:29:44 2020
From: gvenkat72 at gmail.com (Venkat Gorripati)
Date: Thu, 3 Sep 2020 14:29:44 -0500
Subject: [gdal-dev] Re help with parsing grc/grd files in python
In-Reply-To: <CACORR-FX3DyppqjuwT3QhLnKnNZ7q=b7s0476+j_wxYgVn9+vQ@mail.gmail.com>
References: <CACORR-FX3DyppqjuwT3QhLnKnNZ7q=b7s0476+j_wxYgVn9+vQ@mail.gmail.com>
Message-ID: <CACORR-F4tBZLxkEuo0mcLsMuO1Ui6QBGbVS89WJjNEToNJjMgQ@mail.gmail.com>

Hi



I am trying to parse some .grc/.grd/.tab files (mapinfo Gis tool files) and
get some data as data-frame and write to Hive



One of my colleague wrote this in R



He is using rgdal and raster libraries



Here is his code to process grc file



parse_grc <- function(file_name){



tab_grc <- raster(paste0(file_name, ".grc"))

grc_data <- as.data.frame(rasterToPoints(tab_grc))

coordinates(grc_data) <- ~x+y

crs(grc_data) <- crs(tab_grc)

grc_data <- spTransform(grc_data, CRS("+proj=longlat +datum=WGS84"))

site_info <- as.data.frame(tab_grc at data@attributes)



grc_data %>%

  as.tibble() %>%

  rename(id = contains(".")) %>%

  inner_join(site_info, c("id" = "ID")) %>%

  select(-id) %>%

  rename(sector = category) %>%

  mutate(flname = file_name) %>%

  separate(flname, into = c("type", "mkt", "band"),

           sep = "-", remove = TRUE) -> grc_df



return(grc_df)

}



In Python , I am using gdal , but Did not find the API’s like the once in R



Do you know any other libraries in Python that are close to rasters library
in R



Any direction is much appreciated



Thanks

-Venkat
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200903/98d1f341/attachment.html>

From jmckenna at gatewaygeomatics.com  Thu Sep  3 12:34:28 2020
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu, 3 Sep 2020 16:34:28 -0300
Subject: [gdal-dev] Motion: promote GDAL 3.1.3 RC1
In-Reply-To: <1781958.v1fckjULcU@even-i700>
References: <1781958.v1fckjULcU@even-i700>
Message-ID: <f41bd30b-11b7-f799-3940-234166d1d8d2@gatewaygeomatics.com>

On 2020-09-03 5:45 a.m., Even Rouault wrote:
> Hi,
> 
> Having heard no issues with RC1,
> 
> Motion:
> 
> Adopt GDAL 3.1.3 RC1 as final 3.1.3 release
> 
> +1 Even
> 

+1  (no issues testing RC1 on Windows)

-jeff




-- 
Jeff McKenna
MapServer Consulting and Training Services
co-founder of FOSS4G
http://gatewaygeo.com/

From sean at mapbox.com  Thu Sep  3 12:41:26 2020
From: sean at mapbox.com (Sean Gillies)
Date: Thu, 3 Sep 2020 13:41:26 -0600
Subject: [gdal-dev] Motion: promote GDAL 3.1.3 RC1
In-Reply-To: <4270006.zWDNRkW8vq@even-i700>
References: <1781958.v1fckjULcU@even-i700>
 <CADPhZXz0KGdbwjtukKp4oPaOku5bdJNDa4H=0rRCo719+5LF1Q@mail.gmail.com>
 <4270006.zWDNRkW8vq@even-i700>
Message-ID: <CADPhZXwFVDVu1966L1NiXkS58ReKEX54ZZKQKqhzOWvM80LDQg@mail.gmail.com>

Hi Even,

On Thu, Sep 3, 2020 at 1:01 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Sean,
>
>
>
> > Looks like we are close to a patch for #2911, can we wait for its
>
> > resolution or a postponement of its resolution?
>
>
>
> Sorry to play the stubborn release manager, but this will be a never
> ending game if I wait for all bugfixes that people need. Same here, this is
> a long standing issue, not something that worked until recently and no
> longer does.
>
> (and fixes in the VRT driver aren't necessary trivial, and this is a
> sensitive driver, so there would be a risk to rush that into the release)
>
>
>
> Even
>

That's fair. Carry on!

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200903/7a223247/attachment.html>

From even.rouault at spatialys.com  Thu Sep  3 12:59:53 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 03 Sep 2020 21:59:53 +0200
Subject: [gdal-dev] Re help with parsing grc/grd files in python
In-Reply-To: <CACORR-F4tBZLxkEuo0mcLsMuO1Ui6QBGbVS89WJjNEToNJjMgQ@mail.gmail.com>
References: <CACORR-FX3DyppqjuwT3QhLnKnNZ7q=b7s0476+j_wxYgVn9+vQ@mail.gmail.com>
 <CACORR-F4tBZLxkEuo0mcLsMuO1Ui6QBGbVS89WJjNEToNJjMgQ@mail.gmail.com>
Message-ID: <1723606.M3ze3V7RBX@even-i700>

> In Python , I am using gdal , but Did not find the API’s like the once in R
> 
> 
> 
> Do you know any other libraries in Python that are close to rasters library
> in R

You might want to try Rasterio which uses GDAL underneath:
https://rasterio.readthedocs.io/en/latest/

GDAL has also Python bindings with an API close to its C/C++ API, but they are known to 
be trickier to use:
https://gdal.org/api/index.html#python-api

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200903/39dab3b1/attachment.html>

From cgarcia at cable.net.co  Thu Sep  3 12:49:02 2020
From: cgarcia at cable.net.co (cgarcia at cable.net.co)
Date: Thu, 03 Sep 2020 12:49:02 -0700
Subject: [gdal-dev] Compiling GDAL with ArcSDE support
Message-ID: <049GCLYRKBU4.PSSP9TJ5261V1@bzweb03oc>

That’s all correct. ArdSDE cdrom 10.1 was the last to receive on request. I was able to compile on Windows and Linux.
https://www.gisinternals.com/ maintain differents versions of GDAL for using wth MapServer.


Tale a look for ArcSDE, think it’s posible to found it.


Regards,


Carlos Garcia 




En Jue, 3 Septiembre, 2020 en 1:25, Andreas Oxenstierna <ao at t-kartor.se> escribió:
 

Para: gdal-dev at lists.osgeo.org

Notes:

1 ArcSDE server-side SDK as GDAL uses it doesn't exist any more. ESRI moved all functionality to the client-side (e.g. ArcGIS) when rewriting ArcGIS Server to 64-bit. My memory is that was 10.1 but can be 10.2 as Johan write


2 You can store OGC-defined geometries in the native DBMS spatial format using the applicable SDE DBTUNE geometry storage keyword (for PostGIS: PG_GEOMETRY for Oracle: SDO_GEOMETRY)
   ESRI-specific geometries like text will still be stored in ESRI geometry format


3 If storing geometries in any ESRI geometry format like ST_GEOMETRY, you need to convert the geometries to something readable by MapServer. The most efficient is what I proposed, to use the functions installed by ArcGIS Server in the sde database schema





Dear Johan, 


Good question. 
So let me explain the problem. My organization is using ESRI desktop clients (mainly ArcGIS Desktop) to upload the spatial data to the databases used across the organization and publish it via network services. As DBMSs, we use Oracle and Postgres. We upload the data using Esri clients in versions 10.3.1 or 1.6.1.


Now I need GDAL to do two things:
1. Export the data form these databases to other formats.
2.  Use it to connect to MapServer to publish WMS, WFS services straight from databases.


So after looking through the documentation available online, I thought that using ArcSDE will be the best solution, but maybe there are better alternatives.


Best regards,
Marcin



Wiadomość napisana przez Johan Van de Wauw <johan.vandewauw at gmail.com<mailto:johan.vandewauw at gmail.com>> w dniu 02.09.2020, o godz. 15:39:



Marcin,


I managed to compile this extension against ubuntu 14.04 with at that time gdal 1.10 , while helping a customer migrating away from arcSDE. 

https://lists.osgeo.org/pipermail/gdal-dev/2016-November/045445.html



At that time, it was only possible to receive this client sdk on cdrom (!). This was version 10.2, which I believe is the last version of ArcSDE. I guess it will be much harder to get it now. 


Are you sure you are still using arcsde?


Kind Regards,
Johan

_______________________________________________
gdal-dev mailing list gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org> https://lists.osgeo.org/mailman/listinfo/gdal-dev 

-- Best Regards Andreas Oxenstierna
T-Kartor Geospatial AB
Olof Mohlins väg 12 Kristianstad
mobile: +46 733 206831
mailto: ao at t-kartor.se<mailto:ao at t-kartor.se> http://www.t-kartor.com  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200903/be71dd7f/attachment-0001.html>

From arun.usask at gmail.com  Thu Sep  3 14:54:54 2020
From: arun.usask at gmail.com (Arun Govind)
Date: Thu, 3 Sep 2020 15:54:54 -0600
Subject: [gdal-dev] Serve COG images - GEE & Google Cloud Storage
Message-ID: <CAO+fXHNWU6WtS+Zyshvg+g-yuKo6SXSW-mqW4gRbzceH3vpM6w@mail.gmail.com>

Hi
In this article, I came across about servicing rasters on AWS S3:
https://www.azavea.com/blog/2019/04/23/using-cloud-optimized-geotiffs-cogs/
, https://lists.osgeo.org/pipermail/gdal-dev/2015-October/042975.html

I am trying to see if something similar exists for Google? I'm exporting
COG from Google Earth Engine (GEE) to a Google Cloud Storage bucket in the
hopes to access and serve it with other layers using GeoServer or create
tile map services. I've many dates and many products (true color, false
color, ndvi) for many sites. So I'm not sure what's the best way to serve
them. I tried researching online, asking in StackExchange, GeoServer and
GEE forums and reaching out to a few people, but I couldn't get specific
info... Most info is on AWS and S3...

My requirement is to somehow get the images of "GEE to bucket" exported
images into Openlayers (web mapping) and JavaScript (frontend). GEE can
export to my Drive or a GCP bucket. So serving from GEE to GCP to S3 means
some download, unzip, zip and upload - so more time consuming and manual
steps. In my experience, AWS was costly (as my EC2 runs all the time) than
a VPS server...

I'll appreciate your help. Thank you!
-- 
Sincerely yours,

*Arun Govind, PhD*
*Email*: arun.govind at usask.ca
*Ph*: +16394714525
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200903/631c5bd1/attachment.html>

From even.rouault at spatialys.com  Fri Sep  4 00:01:08 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 04 Sep 2020 09:01:08 +0200
Subject: [gdal-dev] Serve COG images - GEE & Google Cloud Storage
In-Reply-To: <CAO+fXHNWU6WtS+Zyshvg+g-yuKo6SXSW-mqW4gRbzceH3vpM6w@mail.gmail.com>
References: <CAO+fXHNWU6WtS+Zyshvg+g-yuKo6SXSW-mqW4gRbzceH3vpM6w@mail.gmail.com>
Message-ID: <1840414.qNtrTxCMKN@even-i700>

Arun,

Not sure this completely answer your question, but GDAL has gained a
Google Cloud Storage virtual file system handler similar
to the AWS S3 one since the post you mention.
See https://gdal.org/user/virtual_file_systems.html#vsigs-google-cloud-storage-files

Even

> Hi
> In this article, I came across about servicing rasters on AWS S3:
> https://www.azavea.com/blog/2019/04/23/using-cloud-optimized-geotiffs-cogs/
> , https://lists.osgeo.org/pipermail/gdal-dev/2015-October/042975.html
> 
> I am trying to see if something similar exists for Google? I'm exporting
> COG from Google Earth Engine (GEE) to a Google Cloud Storage bucket in the
> hopes to access and serve it with other layers using GeoServer or create
> tile map services. I've many dates and many products (true color, false
> color, ndvi) for many sites. So I'm not sure what's the best way to serve
> them. I tried researching online, asking in StackExchange, GeoServer and
> GEE forums and reaching out to a few people, but I couldn't get specific
> info... Most info is on AWS and S3...
> 
> My requirement is to somehow get the images of "GEE to bucket" exported
> images into Openlayers (web mapping) and JavaScript (frontend). GEE can
> export to my Drive or a GCP bucket. So serving from GEE to GCP to S3 means
> some download, unzip, zip and upload - so more time consuming and manual
> steps. In my experience, AWS was costly (as my EC2 runs all the time) than
> a VPS server...
> 
> I'll appreciate your help. Thank you!


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200904/696a25cf/attachment.html>

From traviskirstine at gmail.com  Fri Sep  4 05:34:55 2020
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Fri, 4 Sep 2020 08:34:55 -0400
Subject: [gdal-dev] Serve COG images - GEE & Google Cloud Storage
In-Reply-To: <1840414.qNtrTxCMKN@even-i700>
References: <CAO+fXHNWU6WtS+Zyshvg+g-yuKo6SXSW-mqW4gRbzceH3vpM6w@mail.gmail.com>
 <1840414.qNtrTxCMKN@even-i700>
Message-ID: <CALtm4h0upyZA=8bR+_0=5SQYPjr9xATPEj4iXmYqdUqKSoERLg@mail.gmail.com>

There is a good article here on how to do this using MapServer and S3, this
may work for Google as well

https://github.com/mapserver/mapserver/wiki/Render-images-straight-out-of-S3-with-the-vsicurl-driver

You can configure MapServer as a WMS server and add the layers to Open
Layers or take the extra step and configure MapCache to generate a tiled
output and caching using your WMS as source



On Fri, 4 Sep 2020 at 03:01, Even Rouault <even.rouault at spatialys.com>
wrote:

> Arun,
>
>
>
> Not sure this completely answer your question, but GDAL has gained a
>
> Google Cloud Storage virtual file system handler similar
>
> to the AWS S3 one since the post you mention.
>
> See
> https://gdal.org/user/virtual_file_systems.html#vsigs-google-cloud-storage-files
>
>
>
> Even
>
>
>
> > Hi
>
> > In this article, I came across about servicing rasters on AWS S3:
>
> >
> https://www.azavea.com/blog/2019/04/23/using-cloud-optimized-geotiffs-cogs/
>
> > , https://lists.osgeo.org/pipermail/gdal-dev/2015-October/042975.html
>
> >
>
> > I am trying to see if something similar exists for Google? I'm exporting
>
> > COG from Google Earth Engine (GEE) to a Google Cloud Storage bucket in
> the
>
> > hopes to access and serve it with other layers using GeoServer or create
>
> > tile map services. I've many dates and many products (true color, false
>
> > color, ndvi) for many sites. So I'm not sure what's the best way to serve
>
> > them. I tried researching online, asking in StackExchange, GeoServer and
>
> > GEE forums and reaching out to a few people, but I couldn't get specific
>
> > info... Most info is on AWS and S3...
>
> >
>
> > My requirement is to somehow get the images of "GEE to bucket" exported
>
> > images into Openlayers (web mapping) and JavaScript (frontend). GEE can
>
> > export to my Drive or a GCP bucket. So serving from GEE to GCP to S3
> means
>
> > some download, unzip, zip and upload - so more time consuming and manual
>
> > steps. In my experience, AWS was costly (as my EC2 runs all the time)
> than
>
> > a VPS server...
>
> >
>
> > I'll appreciate your help. Thank you!
>
>
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200904/85da063a/attachment.html>

From michael.smith.erdc at gmail.com  Fri Sep  4 05:38:14 2020
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Fri, 04 Sep 2020 08:38:14 -0400
Subject: [gdal-dev] Serve COG images - GEE & Google Cloud Storage
In-Reply-To: <CALtm4h0upyZA=8bR+_0=5SQYPjr9xATPEj4iXmYqdUqKSoERLg@mail.gmail.com>
References: <CAO+fXHNWU6WtS+Zyshvg+g-yuKo6SXSW-mqW4gRbzceH3vpM6w@mail.gmail.com>
 <1840414.qNtrTxCMKN@even-i700>
 <CALtm4h0upyZA=8bR+_0=5SQYPjr9xATPEj4iXmYqdUqKSoERLg@mail.gmail.com>
Message-ID: <3B7CCDDF-32BF-45EA-9A1C-9C498EAFA0C5@gmail.com>

Another option is a fuse level driver that maps cloud storage to a drive path. 

 

Mike

 

 

-- 

Michael Smith

US Army Corps of Engineers

Remote Sensing/GIS Center

 

 

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Travis Kirstine <traviskirstine at gmail.com>
Date: Friday, September 4, 2020 at 8:35 AM
To: gdal dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Serve COG images - GEE & Google Cloud Storage

 

 

There is a good article here on how to do this using MapServer and S3, this may work for Google as well

 

https://github.com/mapserver/mapserver/wiki/Render-images-straight-out-of-S3-with-the-vsicurl-driver

 

You can configure MapServer as a WMS server and add the layers to Open Layers or take the extra step and configure MapCache to generate a tiled output and caching using your WMS as source 

 

 

 

On Fri, 4 Sep 2020 at 03:01, Even Rouault <even.rouault at spatialys.com> wrote:

Arun,

 

Not sure this completely answer your question, but GDAL has gained a

Google Cloud Storage virtual file system handler similar

to the AWS S3 one since the post you mention.

See https://gdal.org/user/virtual_file_systems.html#vsigs-google-cloud-storage-files

 

Even

 

> Hi

> In this article, I came across about servicing rasters on AWS S3:

> https://www.azavea.com/blog/2019/04/23/using-cloud-optimized-geotiffs-cogs/

> , https://lists.osgeo.org/pipermail/gdal-dev/2015-October/042975.html

> 

> I am trying to see if something similar exists for Google? I'm exporting

> COG from Google Earth Engine (GEE) to a Google Cloud Storage bucket in the

> hopes to access and serve it with other layers using GeoServer or create

> tile map services. I've many dates and many products (true color, false

> color, ndvi) for many sites. So I'm not sure what's the best way to serve

> them. I tried researching online, asking in StackExchange, GeoServer and

> GEE forums and reaching out to a few people, but I couldn't get specific

> info... Most info is on AWS and S3...

> 

> My requirement is to somehow get the images of "GEE to bucket" exported

> images into Openlayers (web mapping) and JavaScript (frontend). GEE can

> export to my Drive or a GCP bucket. So serving from GEE to GCP to S3 means

> some download, unzip, zip and upload - so more time consuming and manual

> steps. In my experience, AWS was costly (as my EC2 runs all the time) than

> a VPS server...

> 

> I'll appreciate your help. Thank you!

 

 

-- 

Spatialys - Geospatial professional services

http://www.spatialys.com

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

_______________________________________________ gdal-dev mailing list gdal-dev at lists.osgeo.org https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200904/cdc598e0/attachment-0001.html>

From warmerdam at pobox.com  Fri Sep  4 06:03:14 2020
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 4 Sep 2020 09:03:14 -0400
Subject: [gdal-dev] Serve COG images - GEE & Google Cloud Storage
In-Reply-To: <3B7CCDDF-32BF-45EA-9A1C-9C498EAFA0C5@gmail.com>
References: <CAO+fXHNWU6WtS+Zyshvg+g-yuKo6SXSW-mqW4gRbzceH3vpM6w@mail.gmail.com>
 <1840414.qNtrTxCMKN@even-i700>
 <CALtm4h0upyZA=8bR+_0=5SQYPjr9xATPEj4iXmYqdUqKSoERLg@mail.gmail.com>
 <3B7CCDDF-32BF-45EA-9A1C-9C498EAFA0C5@gmail.com>
Message-ID: <CA+YzLBfMS13cBrms88mL=1aAWCvsKfJvC8KkzxozBpSxKvup7A@mail.gmail.com>

Arun,

For what it's worth, I routinely do this by preparing signed urls to the
objects in GCS and just using normal /vsicurl/ references in mapfiles,
etc.  If you happen to be using boto libraries in Python signed urls can be
created with the generate_url() call on "key" objects.   Of course if you
data is publish, you can just use the direct GCS urls without signing them.

Best regards,
Frank






On Fri, Sep 4, 2020 at 8:38 AM Michael Smith <michael.smith.erdc at gmail.com>
wrote:

> Another option is a fuse level driver that maps cloud storage to a drive
> path.
>
>
>
> Mike
>
>
>
>
>
> --
>
> Michael Smith
>
> US Army Corps of Engineers
>
> Remote Sensing/GIS Center
>
>
>
>
>
> *From: *gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Travis
> Kirstine <traviskirstine at gmail.com>
> *Date: *Friday, September 4, 2020 at 8:35 AM
> *To: *gdal dev <gdal-dev at lists.osgeo.org>
> *Subject: *Re: [gdal-dev] Serve COG images - GEE & Google Cloud Storage
>
>
>
>
>
> There is a good article here on how to do this using MapServer and S3,
> this may work for Google as well
>
>
>
>
> https://github.com/mapserver/mapserver/wiki/Render-images-straight-out-of-S3-with-the-vsicurl-driver
>
>
>
> You can configure MapServer as a WMS server and add the layers to Open
> Layers or take the extra step and configure MapCache to generate a tiled
> output and caching using your WMS as source
>
>
>
>
>
>
>
> On Fri, 4 Sep 2020 at 03:01, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
> Arun,
>
>
>
> Not sure this completely answer your question, but GDAL has gained a
>
> Google Cloud Storage virtual file system handler similar
>
> to the AWS S3 one since the post you mention.
>
> See
> https://gdal.org/user/virtual_file_systems.html#vsigs-google-cloud-storage-files
>
>
>
> Even
>
>
>
> > Hi
>
> > In this article, I came across about servicing rasters on AWS S3:
>
> >
> https://www.azavea.com/blog/2019/04/23/using-cloud-optimized-geotiffs-cogs/
>
> > , https://lists.osgeo.org/pipermail/gdal-dev/2015-October/042975.html
>
> >
>
> > I am trying to see if something similar exists for Google? I'm exporting
>
> > COG from Google Earth Engine (GEE) to a Google Cloud Storage bucket in
> the
>
> > hopes to access and serve it with other layers using GeoServer or create
>
> > tile map services. I've many dates and many products (true color, false
>
> > color, ndvi) for many sites. So I'm not sure what's the best way to serve
>
> > them. I tried researching online, asking in StackExchange, GeoServer and
>
> > GEE forums and reaching out to a few people, but I couldn't get specific
>
> > info... Most info is on AWS and S3...
>
> >
>
> > My requirement is to somehow get the images of "GEE to bucket" exported
>
> > images into Openlayers (web mapping) and JavaScript (frontend). GEE can
>
> > export to my Drive or a GCP bucket. So serving from GEE to GCP to S3
> means
>
> > some download, unzip, zip and upload - so more time consuming and manual
>
> > steps. In my experience, AWS was costly (as my EC2 runs all the time)
> than
>
> > a VPS server...
>
> >
>
> > I'll appreciate your help. Thank you!
>
>
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________ gdal-dev mailing list
> gdal-dev at lists.osgeo.org https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200904/c3a65165/attachment.html>

From dmorissette at mapgears.com  Fri Sep  4 06:23:12 2020
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri, 4 Sep 2020 09:23:12 -0400
Subject: [gdal-dev] Motion: promote GDAL 3.1.3 RC1
In-Reply-To: <1781958.v1fckjULcU@even-i700>
References: <1781958.v1fckjULcU@even-i700>
Message-ID: <e2de6629-1ceb-3448-f53e-f2145da8ceca@mapgears.com>

+1

Daniel


On 2020-09-03 04:45, Even Rouault wrote:
> Hi,
> 
> Having heard no issues with RC1,
> 
> Motion:
> 
> Adopt GDAL 3.1.3 RC1 as final 3.1.3 release
> 
> +1 Even
> 
> -- 
> 
> Spatialys - Geospatial professional services
> 
> http://www.spatialys.com
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201

From aborruso at gmail.com  Sun Sep  6 02:35:32 2020
From: aborruso at gmail.com (aborruso)
Date: Sun, 6 Sep 2020 02:35:32 -0700 (MST)
Subject: [gdal-dev] gdal 2.4.4 with WMS support
Message-ID: <1599384932786-0.post@n6.nabble.com>

Hi all,
I have compiled and installed gdal 2.4.4 in this way:

wget http://download.osgeo.org/gdal/2.4.4/gdal244.zip
unzip gdal244.zip
cd ./gdal-2.4.4
./configure --prefix=/usr/local --with-sqlite3=/usr/local
--with-spatialite=/usr/local --with-static-proj4=/usr/local
--with-geos=/usr/local/bin/geos-config
make
sudo make install

But it does not have WMS format and it's impossible to use in example
gdalinfo to have GetCapabilities output. If I run

gdalinfo
"WMS:http://vincoliinrete.beniculturali.it/geoserver/ows?service=wms&version=1.1.1&request=GetCapabilities"

I have

ERROR 4:
WMS:http://vincoliinrete.beniculturali.it/geoserver/ows?service=wms&version=1.1.1&request=GetCapabilities:
No such file or directory

How to compile it to have also WMS support?

Thank you



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jmckenna at gatewaygeomatics.com  Sun Sep  6 03:53:32 2020
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Sun, 6 Sep 2020 07:53:32 -0300
Subject: [gdal-dev] gdal 2.4.4 with WMS support
In-Reply-To: <1599384932786-0.post@n6.nabble.com>
References: <1599384932786-0.post@n6.nabble.com>
Message-ID: <94bae69b-c297-651e-7551-8b07c3794f92@gatewaygeomatics.com>

On 2020-09-06 6:35 a.m., aborruso wrote:
> Hi all,
> I have compiled and installed gdal 2.4.4 in this way:
> 
> wget http://download.osgeo.org/gdal/2.4.4/gdal244.zip
> unzip gdal244.zip
> cd ./gdal-2.4.4
> ./configure --prefix=/usr/local --with-sqlite3=/usr/local
> --with-spatialite=/usr/local --with-static-proj4=/usr/local
> --with-geos=/usr/local/bin/geos-config

I believe curl is also required.

-jeff






-- 
Jeff McKenna
MapServer Consulting and Training Services
co-founder of FOSS4G
http://gatewaygeo.com/

From aborruso at gmail.com  Sun Sep  6 04:06:25 2020
From: aborruso at gmail.com (aborruso)
Date: Sun, 6 Sep 2020 04:06:25 -0700 (MST)
Subject: [gdal-dev] gdal 2.4.4 with WMS support
In-Reply-To: <94bae69b-c297-651e-7551-8b07c3794f92@gatewaygeomatics.com>
References: <1599384932786-0.post@n6.nabble.com>
 <94bae69b-c297-651e-7551-8b07c3794f92@gatewaygeomatics.com>
Message-ID: <1599390385959-0.post@n6.nabble.com>

jmckenna wrote
> I believe curl is also required.

Thank you jeff. How do I must modify my configure command?





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jmckenna at gatewaygeomatics.com  Sun Sep  6 04:19:46 2020
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Sun, 6 Sep 2020 08:19:46 -0300
Subject: [gdal-dev] gdal 2.4.4 with WMS support
In-Reply-To: <1599390385959-0.post@n6.nabble.com>
References: <1599384932786-0.post@n6.nabble.com>
 <94bae69b-c297-651e-7551-8b07c3794f92@gatewaygeomatics.com>
 <1599390385959-0.post@n6.nabble.com>
Message-ID: <98d6ae11-52d5-0bfb-b4c3-bb57c88b4973@gatewaygeomatics.com>

On 2020-09-06 8:06 a.m., aborruso wrote:
> jmckenna wrote
>> I believe curl is also required.
> 
> Thank you jeff. How do I must modify my configure command?
> 

Try:    --with-curl=/usr/local/bin/curl-config


-jeff




-- 
Jeff McKenna
MapServer Consulting and Training Services
co-founder of FOSS4G
http://gatewaygeo.com/

From jmckenna at gatewaygeomatics.com  Sun Sep  6 05:20:04 2020
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Sun, 6 Sep 2020 09:20:04 -0300
Subject: [gdal-dev] gdal 2.4.4 with WMS support
In-Reply-To: <1599390385959-0.post@n6.nabble.com>
References: <1599384932786-0.post@n6.nabble.com>
 <94bae69b-c297-651e-7551-8b07c3794f92@gatewaygeomatics.com>
 <1599390385959-0.post@n6.nabble.com>
Message-ID: <cfb4edc4-1619-c0f6-7698-117c06f9afa3@gatewaygeomatics.com>

On 2020-09-06 8:06 a.m., aborruso wrote:
> jmckenna wrote
>> I believe curl is also required.
> 
> Thank you jeff. How do I must modify my configure command?
> 
> 

Maybe also try:   --with-curl=/usr/bin/curl-config

(depends on where you installed curl)

Have a nice weekend.

-jeff





-- 
Jeff McKenna
MapServer Consulting and Training Services
co-founder of FOSS4G
http://gatewaygeo.com/

From aborruso at gmail.com  Sun Sep  6 05:35:49 2020
From: aborruso at gmail.com (aborruso)
Date: Sun, 6 Sep 2020 05:35:49 -0700 (MST)
Subject: [gdal-dev] gdal 2.4.4 with WMS support
In-Reply-To: <cfb4edc4-1619-c0f6-7698-117c06f9afa3@gatewaygeomatics.com>
References: <1599384932786-0.post@n6.nabble.com>
 <94bae69b-c297-651e-7551-8b07c3794f92@gatewaygeomatics.com>
 <1599390385959-0.post@n6.nabble.com>
 <cfb4edc4-1619-c0f6-7698-117c06f9afa3@gatewaygeomatics.com>
Message-ID: <1599395749511-0.post@n6.nabble.com>

Solved I had a curl path problem. In my debian I have solved with

sudo ln -s /usr/lib/x86_64-linux-gnu/libcurl.so.4.6.0
/usr/local/lib/libcurl.so

Thank you jeff



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Mon Sep  7 02:19:06 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 07 Sep 2020 11:19:06 +0200
Subject: [gdal-dev] Motion: promote GDAL 3.1.3 RC1
In-Reply-To: <1781958.v1fckjULcU@even-i700>
References: <1781958.v1fckjULcU@even-i700>
Message-ID: <1788206.d9x5I7Mc3C@even-i700>

On jeudi 3 septembre 2020 10:45:35 CEST Even Rouault wrote:
> Hi,
> 
> Having heard no issues with RC1,
> 
> Motion:
> 
> Adopt GDAL 3.1.3 RC1 as final 3.1.3 release
> 

Motion passed with +1 from PSC members HowardB, MateuszL, SeanG,
JukkaR, DanielM and myself.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200907/e79a9ac7/attachment.html>

From even.rouault at spatialys.com  Mon Sep  7 03:29:28 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 07 Sep 2020 12:29:28 +0200
Subject: [gdal-dev] GDAL 3.1.3 is released
Message-ID: <177736318.PYZvh59Xns@even-i700>

Hi,

On behalf of the GDAL/OGR development team, I am pleased to announce the 
release of the GDAL/OGR 3.1.3 bug fix version. This adds 55 bug fixes on top 
of 3.1.2.

Consult the release notes for the list of issues addressed :
  https://github.com/OSGeo/gdal/blob/v3.1.3/gdal/NEWS

The sources are available at:

    https://download.osgeo.org/gdal/3.1.3/gdal-3.1.3.tar.xz
    https://download.osgeo.org/gdal/3.1.3/gdal-3.1.3.tar.gz
    https://download.osgeo.org/gdal/3.1.3/gdal313.zip
    https://download.osgeo.org/gdal/3.1.3/gdal-grass-3.1.3.tar.gz

Best regards,

Even

-- 
-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200907/a5172045/attachment.html>

From alexis.vaisse at wysilab.com  Tue Sep  8 01:10:41 2020
From: alexis.vaisse at wysilab.com (Alexis Vaisse)
Date: Tue, 8 Sep 2020 10:10:41 +0200
Subject: [gdal-dev] Compiling GDAL with Visual Studio 2019
Message-ID: <00bf01d685b7$8c356ff0$a4a04fd0$@vaisse@wysilab.com>

 

    Hi,

 

  I'm trying to compile GDAL with Visual Studio 2019.

  The batch file to generate the project runs with no error. But when I try
to compile the project, I get so many different errors I guess I did
something wrong, but I don't know what.

 

  Did somebody already succeed in compiling GDAL for Visual Studio 2019? If
yes, did you have to modify the code or the project?

  Thanks.

 

  Best regards,

 

      Alexis Vaisse

      Wysilab

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200908/ed59fd26/attachment.html>

From mateusz at loskot.net  Tue Sep  8 02:38:14 2020
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 8 Sep 2020 11:38:14 +0200
Subject: [gdal-dev] Compiling GDAL with Visual Studio 2019
In-Reply-To: <5f574e5c.1c69fb81.d75ee.af41SMTPIN_ADDED_BROKEN@mx.google.com>
References: <5f574e5c.1c69fb81.d75ee.af41SMTPIN_ADDED_BROKEN@mx.google.com>
Message-ID: <CABUeae-nEcRu-uPK7akJCjY=fay77b5R+D5+1OR6JL0EXZxTBg@mail.gmail.com>

On Tue, 8 Sep 2020 at 11:26, Alexis Vaisse <alexis.vaisse at wysilab.com> wrote:
>   I’m trying to compile GDAL with Visual Studio 2019.
>   The batch file to generate the project runs with no error. But when I try to compile the project, I get so many different errors I guess I did something wrong, but I don’t know what.
>
>   Did somebody already succeed in compiling GDAL for Visual Studio 2019?

Yes, many times.

First, you don't have to generate .vcxproj files with the .bat script
to build GDAL.
Just run `nmake.exe` command in the VS Command Prompt.

However, before you attempt to build GDAL, you need to:
- Read https://trac.osgeo.org/gdal/wiki/BuildingOnWindows
- Check also https://trac.osgeo.org/gdal/wiki/BuildHints for specific
needs/dependencies/drivers
- Collect dependencies you require
- Edit nmake.opt to disable/enable features/drivers you don't
need/need, you have third-party dependencies for, etc.
- Run NMAKE

GDAL is not a self-contained project.
GDAL has numerous dependencies that you need to provide/install,
On Windows, manual editing of nmake.opt to configure your build is necessary.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From alexis.vaisse at wysilab.com  Tue Sep  8 05:50:07 2020
From: alexis.vaisse at wysilab.com (Alexis Vaisse)
Date: Tue, 8 Sep 2020 14:50:07 +0200
Subject: [gdal-dev] Compiling GDAL with Visual Studio 2019
In-Reply-To: <CABUeae-nEcRu-uPK7akJCjY=fay77b5R+D5+1OR6JL0EXZxTBg@mail.gmail.com>
References: <5f574e5c.1c69fb81.d75ee.af41SMTPIN_ADDED_BROKEN@mx.google.com>
 <CABUeae-nEcRu-uPK7akJCjY=fay77b5R+D5+1OR6JL0EXZxTBg@mail.gmail.com>
Message-ID: <012301d685de$96647c10$c32d7430$@vaisse@wysilab.com>


  Thanks.
  I tried to follow your suggestion, updated nmake.opt, added the PROJ library and here is what I get:


D:\Terrain\Extern\gdal-3.1.3>nmake -f makefile.vc MSVC_VER=1927 WIN64=1

Microsoft (R) Program Maintenance Utility Version 14.27.29110.0
Copyright (C) Microsoft Corporation.  All rights reserved.

        cd port
        nmake /nologo /f makefile.vc
        call prev_dllbuild.bat
The system cannot find the path specified.

D:\Terrain\Extern\gdal-3.1.3\port>IF NOT EXIST dllbuild.prev (ECHO 1 ) 1>dllbuild.prev

D:\Terrain\Extern\gdal-3.1.3\port>SET /P PREV_DLLBUILD= 0<dllbuild.prev

D:\Terrain\Extern\gdal-3.1.3\port>IF NOT "1" == "1" (ECHO 1 ) 1>dllbuild.prev
NMAKE : fatal error U1077: 'call' : return code '0x1'
Stop.
NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.27.29110\bin\HostX64\x64\nmake.EXE"' : return code '0x2'
Stop.

Alexis Vaisse
Wysilab

-----Message d'origine-----
De : gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de Mateusz Loskot
Envoyé : mardi 8 septembre 2020 11:38
À : gdal-dev at lists.osgeo.org
Objet : Re: [gdal-dev] Compiling GDAL with Visual Studio 2019

On Tue, 8 Sep 2020 at 11:26, Alexis Vaisse <alexis.vaisse at wysilab.com> wrote:
>   I’m trying to compile GDAL with Visual Studio 2019.
>   The batch file to generate the project runs with no error. But when I try to compile the project, I get so many different errors I guess I did something wrong, but I don’t know what.
>
>   Did somebody already succeed in compiling GDAL for Visual Studio 2019?

Yes, many times.

First, you don't have to generate .vcxproj files with the .bat script
to build GDAL.
Just run `nmake.exe` command in the VS Command Prompt.

However, before you attempt to build GDAL, you need to:
- Read https://trac.osgeo.org/gdal/wiki/BuildingOnWindows
- Check also https://trac.osgeo.org/gdal/wiki/BuildHints for specific
needs/dependencies/drivers
- Collect dependencies you require
- Edit nmake.opt to disable/enable features/drivers you don't
need/need, you have third-party dependencies for, etc.
- Run NMAKE

GDAL is not a self-contained project.
GDAL has numerous dependencies that you need to provide/install,
On Windows, manual editing of nmake.opt to configure your build is necessary.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev


From hyoklee at hdfgroup.org  Tue Sep  8 07:27:19 2020
From: hyoklee at hdfgroup.org (H. Joe Lee)
Date: Tue, 8 Sep 2020 09:27:19 -0500
Subject: [gdal-dev] Adding input format (-if) option for gdalmdiminfo and
	gdalmdimtranslate?
Message-ID: <CADeM3-zfsb=f9RT8UkZi7p1e90A-ba=KedB8DAcGUn05yCmreQ@mail.gmail.com>

Hi,

  I can see that -if option is being [1] added to GDAL utilities, which is
great for reading CF-compliant HDF5 as netCDF-4 and vice versa.

  Do you know how much effort is needed to apply the same -if option to
gdalmdiminfo and gdalmdimtranslate?
  Is adding the -if option in the current plan for next release?

  Sincerely,

[1]
https://github.com/OSGeo/gdal/commit/1c7b950fc8754f6ba1d027f031886063675d2927
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200908/44aae678/attachment.html>

From jmckenna at gatewaygeomatics.com  Tue Sep  8 07:48:53 2020
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue, 8 Sep 2020 11:48:53 -0300
Subject: [gdal-dev] Compiling GDAL with Visual Studio 2019
In-Reply-To: <012301d685de$96647c10$c32d7430$@vaisse@wysilab.com>
References: <5f574e5c.1c69fb81.d75ee.af41SMTPIN_ADDED_BROKEN@mx.google.com>
 <CABUeae-nEcRu-uPK7akJCjY=fay77b5R+D5+1OR6JL0EXZxTBg@mail.gmail.com>
 <012301d685de$96647c10$c32d7430$@vaisse@wysilab.com>
Message-ID: <bc02a012-8870-2062-4a1d-1635d108d84f@gatewaygeomatics.com>

On 2020-09-08 9:50 a.m., Alexis Vaisse wrote:
> 
>    Thanks.
>    I tried to follow your suggestion, updated nmake.opt, added the PROJ library and here is what I get:
> 
> 
> D:\Terrain\Extern\gdal-3.1.3>nmake -f makefile.vc MSVC_VER=1927 WIN64=1
> 
> Microsoft (R) Program Maintenance Utility Version 14.27.29110.0
> Copyright (C) Microsoft Corporation.  All rights reserved.
> 
>          cd port
>          nmake /nologo /f makefile.vc
>          call prev_dllbuild.bat
> The system cannot find the path specified.
> 
> D:\Terrain\Extern\gdal-3.1.3\port>IF NOT EXIST dllbuild.prev (ECHO 1 ) 1>dllbuild.prev
> 
> D:\Terrain\Extern\gdal-3.1.3\port>SET /P PREV_DLLBUILD= 0<dllbuild.prev
> 
> D:\Terrain\Extern\gdal-3.1.3\port>IF NOT "1" == "1" (ECHO 1 ) 1>dllbuild.prev
> NMAKE : fatal error U1077: 'call' : return code '0x1'
> Stop.
> NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.27.29110\bin\HostX64\x64\nmake.EXE"' : return code '0x2'
> Stop.

Have you first 'cleaned'?

    nmake /f makefile.vc clean
    nmake /f makefile.vc


-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
co-founder of FOSS4G
http://gatewaygeo.com/






From alexis.vaisse at wysilab.com  Tue Sep  8 08:24:34 2020
From: alexis.vaisse at wysilab.com (Alexis Vaisse)
Date: Tue, 8 Sep 2020 17:24:34 +0200
Subject: [gdal-dev] Compiling GDAL with Visual Studio 2019
In-Reply-To: <bc02a012-8870-2062-4a1d-1635d108d84f@gatewaygeomatics.com>
References: <5f574e5c.1c69fb81.d75ee.af41SMTPIN_ADDED_BROKEN@mx.google.com>
 <CABUeae-nEcRu-uPK7akJCjY=fay77b5R+D5+1OR6JL0EXZxTBg@mail.gmail.com>
 <012301d685de$96647c10$c32d7430$@vaisse@wysilab.com>
 <bc02a012-8870-2062-4a1d-1635d108d84f@gatewaygeomatics.com>
Message-ID: <018401d685f4$29864c70$7c92e550$@vaisse@wysilab.com>


  I started from a fresh copy of GDAL 3.1.3, so there should be nothing clean.

  Interestingly, I get the same kind of errors when calling nmake /f makefile.vc clean:


D:\Terrain\Extern\gdal-3.1.3>nmake /f makefile.vc clean

Microsoft (R) Program Maintenance Utility Version 14.27.29110.0
Copyright (C) Microsoft Corporation.  All rights reserved.

        call clean_main_build_output.bat
The system cannot find the path specified.

D:\Terrain\Extern\gdal-3.1.3>if exist gdal_i.lib del gdal_i.lib

D:\Terrain\Extern\gdal-3.1.3>if exist gdal301.dll del gdal301.dll

D:\Terrain\Extern\gdal-3.1.3>if exist gdal301.dll.manifest del gdal301.dll.manifest

D:\Terrain\Extern\gdal-3.1.3>if exist *.ilk del *.ilk
NMAKE : fatal error U1077: 'call' : return code '0x1'
Stop.


  Obviously there's something wrong in my configuration, but I can't find what it is.

     Alexis

-----Message d'origine-----
De : gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de Jeff McKenna
Envoyé : mardi 8 septembre 2020 16:49
À : gdal-dev at lists.osgeo.org
Objet : Re: [gdal-dev] Compiling GDAL with Visual Studio 2019

On 2020-09-08 9:50 a.m., Alexis Vaisse wrote:
> 
>    Thanks.
>    I tried to follow your suggestion, updated nmake.opt, added the PROJ library and here is what I get:
> 
> 
> D:\Terrain\Extern\gdal-3.1.3>nmake -f makefile.vc MSVC_VER=1927 WIN64=1
> 
> Microsoft (R) Program Maintenance Utility Version 14.27.29110.0
> Copyright (C) Microsoft Corporation.  All rights reserved.
> 
>          cd port
>          nmake /nologo /f makefile.vc
>          call prev_dllbuild.bat
> The system cannot find the path specified.
> 
> D:\Terrain\Extern\gdal-3.1.3\port>IF NOT EXIST dllbuild.prev (ECHO 1 ) 1>dllbuild.prev
> 
> D:\Terrain\Extern\gdal-3.1.3\port>SET /P PREV_DLLBUILD= 0<dllbuild.prev
> 
> D:\Terrain\Extern\gdal-3.1.3\port>IF NOT "1" == "1" (ECHO 1 ) 1>dllbuild.prev
> NMAKE : fatal error U1077: 'call' : return code '0x1'
> Stop.
> NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.27.29110\bin\HostX64\x64\nmake.EXE"' : return code '0x2'
> Stop.

Have you first 'cleaned'?

    nmake /f makefile.vc clean
    nmake /f makefile.vc


-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
co-founder of FOSS4G
http://gatewaygeo.com/





_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at spatialys.com  Tue Sep  8 08:55:32 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 08 Sep 2020 17:55:32 +0200
Subject: [gdal-dev] Adding input format (-if) option for gdalmdiminfo
	and gdalmdimtranslate?
In-Reply-To: <CADeM3-zfsb=f9RT8UkZi7p1e90A-ba=KedB8DAcGUn05yCmreQ@mail.gmail.com>
References: <CADeM3-zfsb=f9RT8UkZi7p1e90A-ba=KedB8DAcGUn05yCmreQ@mail.gmail.com>
Message-ID: <12712005.PbbhFKFJDZ@even-i700>

On mardi 8 septembre 2020 09:27:19 CEST H. Joe Lee wrote:
> Hi,
> 
>   I can see that -if option is being [1] added to GDAL utilities, which is
> great for reading CF-compliant HDF5 as netCDF-4 and vice versa.
> 
>   Do you know how much effort is needed to apply the same -if option to
> gdalmdiminfo and gdalmdimtranslate?
>   Is adding the -if option in the current plan for next release?

Joe,

this shouldn't be too hard to do if you want to tackle that and submit a pull request.
You can take inspiration from
https://github.com/OSGeo/gdal/commit/1c7b950fc8754f6ba1d027f031886063675d2927
which added support for -if in gdalinfo, etc.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200908/2515630b/attachment.html>

From jmckenna at gatewaygeomatics.com  Tue Sep  8 09:06:33 2020
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue, 8 Sep 2020 13:06:33 -0300
Subject: [gdal-dev] Compiling GDAL with Visual Studio 2019
In-Reply-To: <018401d685f4$29864c70$7c92e550$@vaisse@wysilab.com>
References: <5f574e5c.1c69fb81.d75ee.af41SMTPIN_ADDED_BROKEN@mx.google.com>
 <CABUeae-nEcRu-uPK7akJCjY=fay77b5R+D5+1OR6JL0EXZxTBg@mail.gmail.com>
 <012301d685de$96647c10$c32d7430$@vaisse@wysilab.com>
 <bc02a012-8870-2062-4a1d-1635d108d84f@gatewaygeomatics.com>
 <018401d685f4$29864c70$7c92e550$@vaisse@wysilab.com>
Message-ID: <5d9b7d2e-90df-3190-e545-7d3f52c7a704@gatewaygeomatics.com>

On 2020-09-08 12:24 p.m., Alexis Vaisse wrote:
> 
>    I started from a fresh copy of GDAL 3.1.3, so there should be nothing clean.
> 
>    Interestingly, I get the same kind of errors when calling nmake /f makefile.vc clean:
> 

Interesting.  I bet you get the same error with the command:  help call



(the response is supposed to be: "Calls one batch program from another")


-jeff




-- 
Jeff McKenna
MapServer Consulting and Training Services
co-founder of FOSS4G
http://gatewaygeo.com/

From hyoklee at hdfgroup.org  Tue Sep  8 09:14:41 2020
From: hyoklee at hdfgroup.org (Joe Lee)
Date: Tue, 8 Sep 2020 16:14:41 +0000
Subject: [gdal-dev] Adding input format (-if) option for gdalmdiminfo
 and gdalmdimtranslate?
In-Reply-To: <12712005.PbbhFKFJDZ@even-i700>
References: <CADeM3-zfsb=f9RT8UkZi7p1e90A-ba=KedB8DAcGUn05yCmreQ@mail.gmail.com>
 <12712005.PbbhFKFJDZ@even-i700>
Message-ID: <CY4PR17MB1239DD1424912BBF58ACF206C2290@CY4PR17MB1239.namprd17.prod.outlook.com>

Thank you for your quick reply!
I'll try my best to add them.

From: Even Rouault <even.rouault at spatialys.com>
Sent: Tuesday, September 08, 2020 10:56 AM
To: gdal-dev at lists.osgeo.org
Cc: Joe Lee <hyoklee at hdfgroup.org>
Subject: Re: [gdal-dev] Adding input format (-if) option for gdalmdiminfo and gdalmdimtranslate?


On mardi 8 septembre 2020 09:27:19 CEST H. Joe Lee wrote:

> Hi,

>

> I can see that -if option is being [1] added to GDAL utilities, which is

> great for reading CF-compliant HDF5 as netCDF-4 and vice versa.

>

> Do you know how much effort is needed to apply the same -if option to

> gdalmdiminfo and gdalmdimtranslate?

> Is adding the -if option in the current plan for next release?



Joe,



this shouldn't be too hard to do if you want to tackle that and submit a pull request.

You can take inspiration from

https://github.com/OSGeo/gdal/commit/1c7b950fc8754f6ba1d027f031886063675d2927

which added support for -if in gdalinfo, etc.



Even



--

Spatialys - Geospatial professional services

http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200908/44236185/attachment.html>

From mateusz at loskot.net  Tue Sep  8 11:00:29 2020
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 8 Sep 2020 20:00:29 +0200
Subject: [gdal-dev] Compiling GDAL with Visual Studio 2019
In-Reply-To: <5f577e02.1c69fb81.959b8.6546SMTPIN_ADDED_BROKEN@mx.google.com>
References: <5f574e5c.1c69fb81.d75ee.af41SMTPIN_ADDED_BROKEN@mx.google.com>
 <CABUeae-nEcRu-uPK7akJCjY=fay77b5R+D5+1OR6JL0EXZxTBg@mail.gmail.com>
 <5f577e02.1c69fb81.959b8.6546SMTPIN_ADDED_BROKEN@mx.google.com>
Message-ID: <CABUeae_3TkQYog+6ug3VbEaS_vTKof0CCM3YuWfG9+F-0Ut-vA@mail.gmail.com>

On Tue, 8 Sep 2020 at 14:50, Alexis Vaisse <alexis.vaisse at wysilab.com> wrote:
>
> D:\Terrain\Extern\gdal-3.1.3>nmake -f makefile.vc MSVC_VER=1927 WIN64=1
>
> Microsoft (R) Program Maintenance Utility Version 14.27.29110.0
> Copyright (C) Microsoft Corporation.  All rights reserved.
>
>         cd port
>         nmake /nologo /f makefile.vc
>         call prev_dllbuild.bat
> The system cannot find the path specified.
>
> D:\Terrain\Extern\gdal-3.1.3\port>IF NOT EXIST dllbuild.prev (ECHO 1 ) 1>dllbuild.prev
>
> D:\Terrain\Extern\gdal-3.1.3\port>SET /P PREV_DLLBUILD= 0<dllbuild.prev
>
> D:\Terrain\Extern\gdal-3.1.3\port>IF NOT "1" == "1" (ECHO 1 ) 1>dllbuild.prev
> NMAKE : fatal error U1077: 'call' : return code '0x1'
> Stop.
> NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.27.29110\bin\HostX64\x64\nmake.EXE"' : return code '0x2'
> Stop.

I downloaded latest
https://github.com/OSGeo/gdal/releases/download/v3.1.3/gdal-3.1.3.tar.gz,
unpacked, and tried to build:

```
D:\tmp\gdal\gdal-3.1.3>nmake -f makefile.vc MSVC_VER=1927 WIN64=1
EXT_NMAKE_OPT=D:\tmp\gdal\gdal-3.1.3\nmake.opt.local

Microsoft (R) Program Maintenance Utility Version 14.27.29111.0
Copyright (C) Microsoft Corporation.  All rights reserved.

        cd port
        nmake /nologo /f makefile.vc
        call prev_dllbuild.bat

D:\tmp\gdal\gdal-3.1.3\port>IF NOT EXIST dllbuild.prev (ECHO 1 ) 1>dllbuild.prev

D:\tmp\gdal\gdal-3.1.3\port>SET /P PREV_DLLBUILD= 0<dllbuild.prev

D:\tmp\gdal\gdal-3.1.3\port>IF NOT "1" == "1" (ECHO 1 ) 1>dllbuild.prev
        type cpl_config.h.vc.begin > cpl_config.h
        type cpl_config.h.vc.common >> cpl_config.h
        IF NOT "1"=="1"  type cpl_config.h.vc.no_dll >> cpl_config.h
        type cpl_config.h.vc.end >> cpl_config.h
        cl   /nologo .....
```

As you can see, I can not reproduce your problem.

I can also build just inside the port subdirectory without any problems:

```
D:\tmp\gdal\gdal-3.1.3> cd port

D:\tmp\gdal\gdal-3.1.3\port>nmake -f makefile.vc MSVC_VER=1927 WIN64=1
EXT_NMAKE_OPT=D:\tmp\gdal\gdal-3.1.3\nmake.opt.local  clean

Microsoft (R) Program Maintenance Utility Version 14.27.29111.0
Copyright (C) Microsoft Corporation.  All rights reserved.

        del *.obj *.lib cpl_config.h dllbuild.prev

D:\tmp\gdal\gdal-3.1.3\port>nmake -f makefile.vc MSVC_VER=1927 WIN64=1
EXT_NMAKE_OPT=D:\tmp\gdal\gdal-3.1.3\nmake.opt.local

Microsoft (R) Program Maintenance Utility Version 14.27.29111.0
Copyright (C) Microsoft Corporation.  All rights reserved.

        call prev_dllbuild.bat

D:\tmp\gdal\gdal-3.1.3\port>IF NOT EXIST dllbuild.prev (ECHO 1 ) 1>dllbuild.prev

D:\tmp\gdal\gdal-3.1.3\port>SET /P PREV_DLLBUILD= 0<dllbuild.prev

D:\tmp\gdal\gdal-3.1.3\port>IF NOT "1" == "1" (ECHO 1 ) 1>dllbuild.prev
        type cpl_config.h.vc.begin > cpl_config.h
        type cpl_config.h.vc.common >> cpl_config.h
        IF NOT "1"=="1"  type cpl_config.h.vc.no_dll >> cpl_config.h
        type cpl_config.h.vc.end >> cpl_config.h
        cl   /nologo .....
```

I tried all the commands inside "x64 Native Tools Command Prompt for VS 2019",
from the VS 2019 16.7.2

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From simon.eves at omnisci.com  Tue Sep  8 12:27:42 2020
From: simon.eves at omnisci.com (Simon Eves)
Date: Tue, 8 Sep 2020 12:27:42 -0700
Subject: [gdal-dev] Expected behavior wrt .properties files with /vsigzip/
Message-ID: <CAJf0KTRsh-0WB1Z4kPXHRq+FZEfh9tcFWLH_O=KnxtJPfQm9zg@mail.gmail.com>

Dear GDAL,

We are seeing some strange behavior when reading and writing files with the
GZip VSI, and I want to ask in the dev forum first before assuming it's a
bug and filing an issue. I can't find anything in the docs or the forum
that seems relevant.

When writing (say) a .geojson.gz using the original GeoJSON driver, it
seems to create, and then delete, a sibling .properties file during the
write. Based on the comment at...

https://github.com/OSGeo/gdal/blob/master/gdal/port/cpl_vsil_gzip.cpp#L68

...this seems fair enough.

It also seems to try to create the .properties file when READING a GZip
file, which is also fair enough, if it can.

In the case of a read-only file-system, or other read-only VSI source,
however, I assume a failure to write this file is supposed to be benign,
and indeed I wouldn't expect any user-facing message or error at all.

We are able to read (say) a .geojson.gz from an S3 bucket with no issues.

However, when we try to read a file from within a gzipped TAR file on an S3
bucket, there is a problem. GDAL throws the following error:

DoSinglePartPUT of
/vsis3/omnisci-import-test/example.geojson.tar.gz.properties failed (1)

...and in our CI environment with an ASAN test build, ASAN reports a bunch
of leaks, which appear to be to do with Curl. I don't have these messages
to hand, but I can get them from my colleague if necessary.

>From the code (we're still running 2.4.2, but 3.1.2 appears to be the same)
it seem that DoSinglePartPUT is only called from VSIS3WriteHandle::Close(),
so I'm wondering if it's trying to flush out the write of the .properties
file while closing the data source, and perhaps not knowing to squash any
error.

Here is the path to the file in what should be an open public bucket (in
region us-west-1) if you want to try it yourself:

s3://omnisci-import-test/example.geojson.tar.gz with subpath
/example/example.geojson

Thanks in advance!

-- 
<http://www.omnisci.com/>
Simon Eves
Senior Graphics Engineer, Rendering Group
100 Montgomery St (5th Floor), San Francisco, CA 94104, USA


Email: simon.eves at omnisci.com | Cell:  +1 (415) 902-1996
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200908/ac5e9c76/attachment.html>

From breuil at craig.fr  Wed Sep  9 00:19:21 2020
From: breuil at craig.fr (Landry Breuil)
Date: Wed, 9 Sep 2020 09:19:21 +0200
Subject: [gdal-dev] chaining vsicurl, vsizip *and* vsitar ?
Message-ID: <2e19c2e3-c729-346f-789d-be2306a1ec4f@craig.fr>

Hi,

cadastral parcels are distributed in various formats in france, one of 
them being EDIGEO within .tar.bz2 - those are available online as 
opendata, but all in a specially complicated way:

shapefiles at 
https://cadastre.data.gouv.fr/data/etalab-cadastre/2020-07-01/shp/departements/01/cadastre-01-communes-shp.zip 
is readable via 
/vsizip//vsicurl/https://cadastre.data.gouv.fr/data/etalab-cadastre/2020-07-01/shp/departements/01/cadastre-01-communes-shp.zip

geojson at 
https://cadastre.data.gouv.fr/data/etalab-cadastre/2020-07-01/geojson/communes/01/01001/cadastre-01001-parcelles.json.gz
readable via 
/vsigzip//vsicurl/https://cadastre.data.gouv.fr/data/etalab-cadastre/2020-07-01/geojson/communes/01/01001/cadastre-01001-parcelles.json.gz

edigeo at 
https://cadastre.data.gouv.fr/data/dgfip-pci-vecteur/2020-07-01/edigeo/feuilles/01/01001/edigeo-010010000A01.tar.bz2 
-> for this one i havent found a way to access the .THF inside the 
.tar.bz2, be it via 
/vsitar//vsicurl/https://cadastre.data.gouv.fr/data/dgfip-pci-vecteur/2020-07-01/edigeo/feuilles/01/01001/edigeo-010010000A01.tar.bz2 
or even with /E0000A01.THF at the end of the URL

looking at https://gdal.org/user/virtual_file_systems.html#chaining
is it possible to access a .tar.bz2 file with /vsitar or it only 
supports gzipped tars (from reading gdal/port/cpl_vsil_tar.cpp that's 
the case) ? should it be a feature request to support bzip archives ? Is 
there any interest in supporting that ?

-- 
Landry Breuil

From even.rouault at spatialys.com  Wed Sep  9 02:09:31 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 09 Sep 2020 11:09:31 +0200
Subject: [gdal-dev] chaining vsicurl, vsizip *and* vsitar ?
In-Reply-To: <2e19c2e3-c729-346f-789d-be2306a1ec4f@craig.fr>
References: <2e19c2e3-c729-346f-789d-be2306a1ec4f@craig.fr>
Message-ID: <2838161.u5n7LS7R6N@even-i700>

> looking at https://gdal.org/user/virtual_file_systems.html#chaining
> is it possible to access a .tar.bz2 file with /vsitar 

No, bzip2 decompression is not handled. Just gzip

> should it be a feature request to support bzip archives ? Is
> there any interest in supporting that ?

I don't have a strong opinion on that. Reading in .tar.some_compression archives 
is generally not efficient, if they are large and contain many files, or seeking is 
required.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200909/2e7db36a/attachment.html>

From alexis.vaisse at wysilab.com  Wed Sep  9 07:44:06 2020
From: alexis.vaisse at wysilab.com (Alexis Vaisse)
Date: Wed, 9 Sep 2020 16:44:06 +0200
Subject: [gdal-dev] Compiling GDAL with Visual Studio 2019
In-Reply-To: <CABUeae_3TkQYog+6ug3VbEaS_vTKof0CCM3YuWfG9+F-0Ut-vA@mail.gmail.com>
References: <5f574e5c.1c69fb81.d75ee.af41SMTPIN_ADDED_BROKEN@mx.google.com>
 <CABUeae-nEcRu-uPK7akJCjY=fay77b5R+D5+1OR6JL0EXZxTBg@mail.gmail.com>
 <5f577e02.1c69fb81.959b8.6546SMTPIN_ADDED_BROKEN@mx.google.com>
 <CABUeae_3TkQYog+6ug3VbEaS_vTKof0CCM3YuWfG9+F-0Ut-vA@mail.gmail.com>
Message-ID: <00b801d686b7$ac9177c0$05b46740$@vaisse@wysilab.com>


  The problem seems to come from my Visual Studio installation and not from GDAL at all.
  I tried on another computer and I was able to compile and link with no error.

  Thanks a lot for your help.

Alexis

-----Message d'origine-----
De : gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de Mateusz Loskot
Envoyé : mardi 8 septembre 2020 20:00
À : gdal-dev at lists.osgeo.org
Objet : Re: [gdal-dev] Compiling GDAL with Visual Studio 2019

On Tue, 8 Sep 2020 at 14:50, Alexis Vaisse <alexis.vaisse at wysilab.com> wrote:
>
> D:\Terrain\Extern\gdal-3.1.3>nmake -f makefile.vc MSVC_VER=1927 WIN64=1
>
> Microsoft (R) Program Maintenance Utility Version 14.27.29110.0
> Copyright (C) Microsoft Corporation.  All rights reserved.
>
>         cd port
>         nmake /nologo /f makefile.vc
>         call prev_dllbuild.bat
> The system cannot find the path specified.
>
> D:\Terrain\Extern\gdal-3.1.3\port>IF NOT EXIST dllbuild.prev (ECHO 1 ) 1>dllbuild.prev
>
> D:\Terrain\Extern\gdal-3.1.3\port>SET /P PREV_DLLBUILD= 0<dllbuild.prev
>
> D:\Terrain\Extern\gdal-3.1.3\port>IF NOT "1" == "1" (ECHO 1 ) 1>dllbuild.prev
> NMAKE : fatal error U1077: 'call' : return code '0x1'
> Stop.
> NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.27.29110\bin\HostX64\x64\nmake.EXE"' : return code '0x2'
> Stop.

I downloaded latest
https://github.com/OSGeo/gdal/releases/download/v3.1.3/gdal-3.1.3.tar.gz,
unpacked, and tried to build:

```
D:\tmp\gdal\gdal-3.1.3>nmake -f makefile.vc MSVC_VER=1927 WIN64=1
EXT_NMAKE_OPT=D:\tmp\gdal\gdal-3.1.3\nmake.opt.local

Microsoft (R) Program Maintenance Utility Version 14.27.29111.0
Copyright (C) Microsoft Corporation.  All rights reserved.

        cd port
        nmake /nologo /f makefile.vc
        call prev_dllbuild.bat

D:\tmp\gdal\gdal-3.1.3\port>IF NOT EXIST dllbuild.prev (ECHO 1 ) 1>dllbuild.prev

D:\tmp\gdal\gdal-3.1.3\port>SET /P PREV_DLLBUILD= 0<dllbuild.prev

D:\tmp\gdal\gdal-3.1.3\port>IF NOT "1" == "1" (ECHO 1 ) 1>dllbuild.prev
        type cpl_config.h.vc.begin > cpl_config.h
        type cpl_config.h.vc.common >> cpl_config.h
        IF NOT "1"=="1"  type cpl_config.h.vc.no_dll >> cpl_config.h
        type cpl_config.h.vc.end >> cpl_config.h
        cl   /nologo .....
```

As you can see, I can not reproduce your problem.

I can also build just inside the port subdirectory without any problems:

```
D:\tmp\gdal\gdal-3.1.3> cd port

D:\tmp\gdal\gdal-3.1.3\port>nmake -f makefile.vc MSVC_VER=1927 WIN64=1
EXT_NMAKE_OPT=D:\tmp\gdal\gdal-3.1.3\nmake.opt.local  clean

Microsoft (R) Program Maintenance Utility Version 14.27.29111.0
Copyright (C) Microsoft Corporation.  All rights reserved.

        del *.obj *.lib cpl_config.h dllbuild.prev

D:\tmp\gdal\gdal-3.1.3\port>nmake -f makefile.vc MSVC_VER=1927 WIN64=1
EXT_NMAKE_OPT=D:\tmp\gdal\gdal-3.1.3\nmake.opt.local

Microsoft (R) Program Maintenance Utility Version 14.27.29111.0
Copyright (C) Microsoft Corporation.  All rights reserved.

        call prev_dllbuild.bat

D:\tmp\gdal\gdal-3.1.3\port>IF NOT EXIST dllbuild.prev (ECHO 1 ) 1>dllbuild.prev

D:\tmp\gdal\gdal-3.1.3\port>SET /P PREV_DLLBUILD= 0<dllbuild.prev

D:\tmp\gdal\gdal-3.1.3\port>IF NOT "1" == "1" (ECHO 1 ) 1>dllbuild.prev
        type cpl_config.h.vc.begin > cpl_config.h
        type cpl_config.h.vc.common >> cpl_config.h
        IF NOT "1"=="1"  type cpl_config.h.vc.no_dll >> cpl_config.h
        type cpl_config.h.vc.end >> cpl_config.h
        cl   /nologo .....
```

I tried all the commands inside "x64 Native Tools Command Prompt for VS 2019",
from the VS 2019 16.7.2

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev


From alexis.vaisse at wysilab.com  Wed Sep  9 07:41:26 2020
From: alexis.vaisse at wysilab.com (Alexis Vaisse)
Date: Wed, 9 Sep 2020 16:41:26 +0200
Subject: [gdal-dev] Compiling GDAL with Visual Studio 2019
In-Reply-To: <5d9b7d2e-90df-3190-e545-7d3f52c7a704@gatewaygeomatics.com>
References: <5f574e5c.1c69fb81.d75ee.af41SMTPIN_ADDED_BROKEN@mx.google.com>
 <CABUeae-nEcRu-uPK7akJCjY=fay77b5R+D5+1OR6JL0EXZxTBg@mail.gmail.com>
 <012301d685de$96647c10$c32d7430$@vaisse@wysilab.com>
 <bc02a012-8870-2062-4a1d-1635d108d84f@gatewaygeomatics.com>
 <018401d685f4$29864c70$7c92e550$@vaisse@wysilab.com>
 <5d9b7d2e-90df-3190-e545-7d3f52c7a704@gatewaygeomatics.com>
Message-ID: <00b501d686b7$4cf4d820$e6de8860$@vaisse@wysilab.com>


  I get the help content, but also the strange message "The system cannot find the path specified" again.
  I guess it's a problem with my Visual Studio installation.
  I tried on another computer and this time everything ran fine. I will use the libraries generated on this computer, that's an acceptable workaround.

  Thanks a lot for your help.

Alexis

-----Message d'origine-----
De : gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de Jeff McKenna
Envoyé : mardi 8 septembre 2020 18:07
À : gdal-dev at lists.osgeo.org
Objet : Re: [gdal-dev] Compiling GDAL with Visual Studio 2019

On 2020-09-08 12:24 p.m., Alexis Vaisse wrote:
> 
>    I started from a fresh copy of GDAL 3.1.3, so there should be nothing clean.
> 
>    Interestingly, I get the same kind of errors when calling nmake /f makefile.vc clean:
> 

Interesting.  I bet you get the same error with the command:  help call



(the response is supposed to be: "Calls one batch program from another")


-jeff




-- 
Jeff McKenna
MapServer Consulting and Training Services
co-founder of FOSS4G
http://gatewaygeo.com/
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev


From mateusz at loskot.net  Wed Sep  9 08:55:39 2020
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 9 Sep 2020 17:55:39 +0200
Subject: [gdal-dev] Compiling GDAL with Visual Studio 2019
In-Reply-To: <5f58eda0.1c69fb81.e2e55.8e07SMTPIN_ADDED_BROKEN@mx.google.com>
References: <5f574e5c.1c69fb81.d75ee.af41SMTPIN_ADDED_BROKEN@mx.google.com>
 <CABUeae-nEcRu-uPK7akJCjY=fay77b5R+D5+1OR6JL0EXZxTBg@mail.gmail.com>
 <bc02a012-8870-2062-4a1d-1635d108d84f@gatewaygeomatics.com>
 <5d9b7d2e-90df-3190-e545-7d3f52c7a704@gatewaygeomatics.com>
 <5f58eda0.1c69fb81.e2e55.8e07SMTPIN_ADDED_BROKEN@mx.google.com>
Message-ID: <CABUeae8ewt8oSn=aEWkeR09aYn4CKwo66XZaQA4jPu2LLh-oGw@mail.gmail.com>

On Wed, 9 Sep 2020 at 16:58, Alexis Vaisse <alexis.vaisse at wysilab.com> wrote:
>
>   I get the help content, but also the strange message "The system cannot find the path specified" again.

It's a typical error issued by cmd.exe when it can not find
program/command requested to run.

>         cd port
>        nmake /nologo /f makefile.vc
>        call prev_dllbuild.bat
> The system cannot find the path specified.

This must be related to this bit

https://github.com/OSGeo/gdal/blob/release/3.1/gdal/port/makefile.vc#L136-L142

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From mauceri at actgate.com  Thu Sep 10 06:10:40 2020
From: mauceri at actgate.com (Calogero Mauceri)
Date: Thu, 10 Sep 2020 15:10:40 +0200
Subject: [gdal-dev] Error writing/reading simple ENVI file
Message-ID: <CAFYMBm8FaBqVhQLUs7BoGE3vzqmLd9cdWqJ0Pa6bDCARDMe7VQ@mail.gmail.com>

Hi all,

I am having some problems converting a very simple TIFF file to an ENVI
format one.
The file is one band file with just two values (longitudes around 145 deg).

>gdalinfo test.tiff -mm
Driver: GTiff/GeoTIFF
Files: test.tiff
Size is 2, 1
Coordinate System is `'
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,    1.0)
Upper Right (    2.0,    0.0)
Lower Right (    2.0,    1.0)
Center      (    1.0,    0.5)
Band 1 Block=2x1 Type=Float64, ColorInterp=Gray
    Computed Min/Max=145.333,145.351


I convert the file to ENVI format using gdal_translate command:
>gdal_translate -of ENVI test.tiff test.IMG


The command does not give any errors. When I read back the ENVI file I get
the following error:

>gdalinfo test.IMG -mm
ERROR 1: A marker ID was expected (0xff--) instead of 000028fc

ERROR 1: opj_read_header() failed
gdalinfo failed - unable to open 'my_path\test.IMG'.

I'm not sure why it tries to open the ENVI file using the OpenJPEG reader.
Anyway I'm using GDAL 2.4.4 and OpenJPEG 2.3.0. I tried GDAL 3.1.2, but I
get the same error.
I also tried to gdalinfo the ENVI file with an older version of GDAL
(2.1.1) and it can properly read it. Here is the output

>gdalinfo test.IMG -mm
Driver: ENVI/ENVI .hdr Labelled
Files: test.IMG
      test.hdr
Size is 2, 1
Coordinate System is `'
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,    1.0)
Upper Right (    2.0,    0.0)
Lower Right (    2.0,    1.0)
Center      (    1.0,    0.5)
Band 1 Block=2x1 Type=Float64, ColorInterp=Undefined
    Computed Min/Max=145.333,145.351

I wonder whether I'm doing something wrong in creating the file or whether
this is a problem in the ENVI driver.
Attached are both input TIFF and output ENVI file generated by
gdal_translate.

Thanks in advance for your help,
Calogero

-- 
Calogero Mauceri
Software Engineer

Applied Coherent Technology Corporation (ACT)
www.actgate.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200910/f9febb15/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.tiff
Type: image/tiff
Size: 162 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200910/f9febb15/attachment.tiff>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.hdr
Type: application/octet-stream
Size: 131 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200910/f9febb15/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.IMG
Type: application/octet-stream
Size: 16 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200910/f9febb15/attachment-0001.obj>

From andrew at aitchison.me.uk  Thu Sep 10 07:09:01 2020
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Thu, 10 Sep 2020 15:09:01 +0100 (BST)
Subject: [gdal-dev] Error writing/reading simple ENVI file
In-Reply-To: <CAFYMBm8FaBqVhQLUs7BoGE3vzqmLd9cdWqJ0Pa6bDCARDMe7VQ@mail.gmail.com>
References: <CAFYMBm8FaBqVhQLUs7BoGE3vzqmLd9cdWqJ0Pa6bDCARDMe7VQ@mail.gmail.com>
Message-ID: <alpine.DEB.2.23.453.2009101459110.131813@warden.aitchison.me.uk>

On Thu, 10 Sep 2020, Calogero Mauceri wrote:

> I convert the file to ENVI format using gdal_translate command:
>     gdal_translate -of ENVI test.tiff test.IMG
>
> The command does not give any errors. When I read back the ENVI file I get
> the following error:
>
>    gdalinfo test.IMG -mm
> ERROR 1: A marker ID was expected (0xff--) instead of 000028fc
>
> ERROR 1: opj_read_header() failed
> gdalinfo failed - unable to open 'my_path\test.IMG'.
>
> I'm not sure why it tries to open the ENVI file using the OpenJPEG reader.
> Anyway I'm using GDAL 2.4.4 and OpenJPEG 2.3.0. I tried GDAL 3.1.2, but I
> get the same error.

gdalinfo -oo GDAL_SKIP="JP2OpenJPEG JP2ECW" test.IMG -mm
works for me. You can also set GDAL_SKIP in the environment
(with export or setenv on Unix, depending upon your shell).
I imagine the this file accidentally matches the JPEG "magic" header.

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From arun.usask at gmail.com  Thu Sep 10 11:07:21 2020
From: arun.usask at gmail.com (Arun Govind)
Date: Thu, 10 Sep 2020 12:07:21 -0600
Subject: [gdal-dev] libcurl, vsicurl, vsigs
Message-ID: <CAO+fXHNC--TpP-LLmD8VmZRDiVh+eZfFAjVoh1Ty1HSY5V2mtQ@mail.gmail.com>

Hi,
I had earlier asked about accessing files in Google Cloud Storage. My
research suggests that I need to enable libcurl, vsicurl and vsigs for
GeoServer (https://gdal.org/user/virtual_file_systems.html). Sorry I am
very new to GeoServer and web mapping and was wondering how I can enable
these? Are these add-ons or extensions or additional plugins or libraries?
A detailed explanation will be very helpful.

Also, can you please share some sample script showing how to code it for
access? If it helps, I can provide the link to my GCP bucket with images.

Thank you!

-- 
Sincerely yours,

*Arun Govind, PhD*
*Email*: arun.govind at usask.ca
*Ph*: +16394714525
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200910/367445c3/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Sep 10 23:16:22 2020
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 10 Sep 2020 23:16:22 -0700 (MST)
Subject: [gdal-dev] Error writing/reading simple ENVI file
In-Reply-To: <CAFYMBm8FaBqVhQLUs7BoGE3vzqmLd9cdWqJ0Pa6bDCARDMe7VQ@mail.gmail.com>
References: <CAFYMBm8FaBqVhQLUs7BoGE3vzqmLd9cdWqJ0Pa6bDCARDMe7VQ@mail.gmail.com>
Message-ID: <1599804982220-0.post@n6.nabble.com>

Calogero Mauceri wrote
> 
> I'm not sure why it tries to open the ENVI file using the OpenJPEG reader.
> Anyway I'm using GDAL 2.4.4 and OpenJPEG 2.3.0. I tried GDAL 3.1.2, but I
> get the same error.

GDAL is quessing the driver by the file name extension and starts trying
them one by one, in the order they appear in the list of supported drivers.
ENVI files are often named as .bsq, .bip, or .bil and then the guess is
usually right. However, .IMG is used by several other drivers as well.

The JP2OpenJPEG driver may be too eager to open images with any name
extension. I modified your command a bit into 

gdal_translate -of ENVI test.tiff test.png

and the gdalinfo error comes from OpenJPEG also in this case

OPENJPEG: info: Start to read j2k main header (0).
ERROR 1: A marker ID was expected (0xff--) instead of 000028fc

ERROR 1: opj_read_header() failed
gdalinfo failed - unable to open 'test.png'.

GDAL 3.2 is introducing a new option -if that stands for "input format". Now
user fo not need to find out what all drivers must be skipped.

gdalinfo -if envi test.png
Driver: ENVI/ENVI .hdr Labelled
Files: test.png
       test.hdr


-Jukka Rahkonen-




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Fri Sep 11 02:58:37 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 11 Sep 2020 11:58:37 +0200
Subject: [gdal-dev] Error writing/reading simple ENVI file
In-Reply-To: <1599804982220-0.post@n6.nabble.com>
References: <CAFYMBm8FaBqVhQLUs7BoGE3vzqmLd9cdWqJ0Pa6bDCARDMe7VQ@mail.gmail.com>
 <1599804982220-0.post@n6.nabble.com>
Message-ID: <11444195.70MCTJx1e9@even-i700>

On jeudi 10 septembre 2020 23:16:22 CEST jratike80 wrote:
> Calogero Mauceri wrote
> 
> > I'm not sure why it tries to open the ENVI file using the OpenJPEG reader.
> > Anyway I'm using GDAL 2.4.4 and OpenJPEG 2.3.0. I tried GDAL 3.1.2, but I
> > get the same error.
> 
> GDAL is quessing the driver by the file name extension and starts trying
> them one by one, in the order they appear in the list of supported drivers.
> ENVI files are often named as .bsq, .bip, or .bil and then the guess is
> usually right. However, .IMG is used by several other drivers as well.

Actually most GDAL drivers avoid as much as possible relying on extensions, but rather on 
'signatures' in file content. Of course with the ENVI driver where the filename passed for 
opening is the one of the raw raster content, there's no such signature, and thus this driver is 
tried after all other content-based drivers, because it has to detect the .hdr sidecar file as 
well. 
> 
> The JP2OpenJPEG driver may be too eager to open images with any name
> extension. I modified your command a bit into

The issue was actually true of several JPEG2000 capable drivers that can open a raw 
JPEG2000 codestream, and identified it with the first 2 bytes only. But actually the first 4 
bytes are fixed, so in
https://github.com/OSGeo/gdal/pull/2931 I detect them, which should considerably reduce 
the likelihood of false identification

Even

-- 
Doing Open Source mostly as a greedy capitalist,
as a hobbyist by accident at times.
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200911/ddcb5e1e/attachment.html>

From mauceri at actgate.com  Fri Sep 11 04:01:16 2020
From: mauceri at actgate.com (Calogero Mauceri)
Date: Fri, 11 Sep 2020 13:01:16 +0200
Subject: [gdal-dev] Error writing/reading simple ENVI file
In-Reply-To: <11444195.70MCTJx1e9@even-i700>
References: <CAFYMBm8FaBqVhQLUs7BoGE3vzqmLd9cdWqJ0Pa6bDCARDMe7VQ@mail.gmail.com>
 <1599804982220-0.post@n6.nabble.com> <11444195.70MCTJx1e9@even-i700>
Message-ID: <CAFYMBm90t3sfzn-h2n36GY9P9jeYJm9TMPtqrzAB8e8NSPOKcw@mail.gmail.com>

Thanks all for your feedback, now I understand the reason for the error.
Even thanks for the fix. I think it will be in place in the next GDAL
release, am I correct?

For the time being I'm using the GDAL_SKIP environment variable (thanks
Andrew for the hint) and it works.

Calogero

On Fri, Sep 11, 2020 at 11:58 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> On jeudi 10 septembre 2020 23:16:22 CEST jratike80 wrote:
>
> > Calogero Mauceri wrote
>
> >
>
> > > I'm not sure why it tries to open the ENVI file using the OpenJPEG
> reader.
>
> > > Anyway I'm using GDAL 2.4.4 and OpenJPEG 2.3.0. I tried GDAL 3.1.2,
> but I
>
> > > get the same error.
>
> >
>
> > GDAL is quessing the driver by the file name extension and starts trying
>
> > them one by one, in the order they appear in the list of supported
> drivers.
>
> > ENVI files are often named as .bsq, .bip, or .bil and then the guess is
>
> > usually right. However, .IMG is used by several other drivers as well.
>
>
>
> Actually most GDAL drivers avoid as much as possible relying on
> extensions, but rather on 'signatures' in file content. Of course with the
> ENVI driver where the filename passed for opening is the one of the raw
> raster content, there's no such signature, and thus this driver is tried
> after all other content-based drivers, because it has to detect the .hdr
> sidecar file as well.
>
> >
>
> > The JP2OpenJPEG driver may be too eager to open images with any name
>
> > extension. I modified your command a bit into
>
>
>
> The issue was actually true of several JPEG2000 capable drivers that can
> open a raw JPEG2000 codestream, and identified it with the first 2 bytes
> only. But actually the first 4 bytes are fixed, so in
>
> https://github.com/OSGeo/gdal/pull/2931 I detect them, which should
> considerably reduce the likelihood of false identification
>
>
>
> Even
>
>
>
> --
>
> Doing Open Source mostly as a greedy capitalist,
>
> as a hobbyist by accident at times.
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Calogero Mauceri
Software Engineer

Applied Coherent Technology Corporation (ACT)
www.actgate.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200911/de88d528/attachment.html>

From even.rouault at spatialys.com  Fri Sep 11 11:21:00 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 11 Sep 2020 20:21:00 +0200
Subject: [gdal-dev] Error writing/reading simple ENVI file
In-Reply-To: <CAFYMBm90t3sfzn-h2n36GY9P9jeYJm9TMPtqrzAB8e8NSPOKcw@mail.gmail.com>
References: <CAFYMBm8FaBqVhQLUs7BoGE3vzqmLd9cdWqJ0Pa6bDCARDMe7VQ@mail.gmail.com>
 <11444195.70MCTJx1e9@even-i700>
 <CAFYMBm90t3sfzn-h2n36GY9P9jeYJm9TMPtqrzAB8e8NSPOKcw@mail.gmail.com>
Message-ID: <1989608.xcYTUtVFaF@even-i700>

On vendredi 11 septembre 2020 13:01:16 CEST Calogero Mauceri 
wrote:
> Thanks all for your feedback, now I understand the reason for 
the error.
> Even thanks for the fix. I think it will be in place in the next 
GDAL
> release, am I correct?

yes

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200911/2b75b6dc/attachment.html>

From dhdeangelis at comhem.se  Sat Sep 12 08:20:29 2020
From: dhdeangelis at comhem.se (=?UTF-8?Q?Hern=c3=a1n_De_Angelis?=)
Date: Sat, 12 Sep 2020 17:20:29 +0200
Subject: [gdal-dev] Problem writing with ODS and XLSX drivers
Message-ID: <8f2443c4-4895-f1c6-aa6b-c26aeb19b5a9@comhem.se>

Hi everyone

I am experiencing an odd and stubborn problem when trying to export 
attribute tables from both shp and spatialite to ods or xlsx. ogr2ogr 
finishes work silently with no reported errors but the generated output 
files cannot be opened with Libreoffice, which says the file is 
corrupted and is even unable to repair it.

The input files are good from what I can see using QGIS and OGR but it 
is clear that something isn't right in my installation, my procedure or 
somewhere else. I am missing something? Have other users experienced this?

I am using GDAL/OGR 3.1.2 in openSUSE Tumbleweed, compiled against expat 
2.2.9-1.12 (devel packages installed too, of course).

Any hint is appreciated!

Hernán



From stephenwoodbridge37 at gmail.com  Sat Sep 12 09:56:02 2020
From: stephenwoodbridge37 at gmail.com (Stephen Woodbridge)
Date: Sat, 12 Sep 2020 12:56:02 -0400
Subject: [gdal-dev] Problem writing with ODS and XLSX drivers
In-Reply-To: <8f2443c4-4895-f1c6-aa6b-c26aeb19b5a9@comhem.se>
References: <8f2443c4-4895-f1c6-aa6b-c26aeb19b5a9@comhem.se>
Message-ID: <1d319f41-c0b1-66a8-01a3-00f2fb66d701@gmail.com>

Try exporting to CSV and check the that the records do not have any 
embeded <CR> or <LF> chars. One simple way to do this is to compare the 
record count of the shp file to the line count of the CSV file. Try 
importing the CSV file into EXCEL  or Libreoffice and see if it reports 
a problem. This may give you a better idea of what the problem is.

-Steve W

On 9/12/2020 11:20 AM, Hernán De Angelis wrote:
> Hi everyone
>
> I am experiencing an odd and stubborn problem when trying to export 
> attribute tables from both shp and spatialite to ods or xlsx. ogr2ogr 
> finishes work silently with no reported errors but the generated 
> output files cannot be opened with Libreoffice, which says the file is 
> corrupted and is even unable to repair it.
>
> The input files are good from what I can see using QGIS and OGR but it 
> is clear that something isn't right in my installation, my procedure 
> or somewhere else. I am missing something? Have other users 
> experienced this?
>
> I am using GDAL/OGR 3.1.2 in openSUSE Tumbleweed, compiled against 
> expat 2.2.9-1.12 (devel packages installed too, of course).
>
> Any hint is appreciated!
>
> Hernán
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From dhdeangelis at comhem.se  Sat Sep 12 10:21:49 2020
From: dhdeangelis at comhem.se (=?UTF-8?Q?Hern=c3=a1n_De_Angelis?=)
Date: Sat, 12 Sep 2020 19:21:49 +0200
Subject: [gdal-dev] Problem writing with ODS and XLSX drivers
In-Reply-To: <1d319f41-c0b1-66a8-01a3-00f2fb66d701@gmail.com>
References: <8f2443c4-4895-f1c6-aa6b-c26aeb19b5a9@comhem.se>
 <1d319f41-c0b1-66a8-01a3-00f2fb66d701@gmail.com>
Message-ID: <af0cf47b-e1af-20c0-2dc6-6a62eecde7ca@comhem.se>

That was a very good piece of advice. Unfortunately that is apparently 
not the problem. The CSV imports cleanly in Libreoffice, with the same 
number of rows (minus title row) as features are in the shp. No trace of 
misplaced linefeed or carriage return characters. I will have to keep 
looking for solutions. Thanks anyway!

/H.

On 2020-09-12 18:56, Stephen Woodbridge wrote:
> Try exporting to CSV and check the that the records do not have any 
> embeded <CR> or <LF> chars. One simple way to do this is to compare 
> the record count of the shp file to the line count of the CSV file. 
> Try importing the CSV file into EXCEL  or Libreoffice and see if it 
> reports a problem. This may give you a better idea of what the problem 
> is.
>
> -Steve W
>
> On 9/12/2020 11:20 AM, Hernán De Angelis wrote:
>> Hi everyone
>>
>> I am experiencing an odd and stubborn problem when trying to export 
>> attribute tables from both shp and spatialite to ods or xlsx. ogr2ogr 
>> finishes work silently with no reported errors but the generated 
>> output files cannot be opened with Libreoffice, which says the file 
>> is corrupted and is even unable to repair it.
>>
>> The input files are good from what I can see using QGIS and OGR but 
>> it is clear that something isn't right in my installation, my 
>> procedure or somewhere else. I am missing something? Have other users 
>> experienced this?
>>
>> I am using GDAL/OGR 3.1.2 in openSUSE Tumbleweed, compiled against 
>> expat 2.2.9-1.12 (devel packages installed too, of course).
>>
>> Any hint is appreciated!
>>
>> Hernán
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From stephenwoodbridge37 at gmail.com  Sat Sep 12 10:40:17 2020
From: stephenwoodbridge37 at gmail.com (Stephen Woodbridge)
Date: Sat, 12 Sep 2020 13:40:17 -0400
Subject: [gdal-dev] Problem writing with ODS and XLSX drivers
In-Reply-To: <af0cf47b-e1af-20c0-2dc6-6a62eecde7ca@comhem.se>
References: <8f2443c4-4895-f1c6-aa6b-c26aeb19b5a9@comhem.se>
 <1d319f41-c0b1-66a8-01a3-00f2fb66d701@gmail.com>
 <af0cf47b-e1af-20c0-2dc6-6a62eecde7ca@comhem.se>
Message-ID: <fb121b5b-bc3a-60db-e893-af382b8f12ba@gmail.com>

I'm wondering if there are unicode characters that are not properly 
formated when output to the xlsx or ods files. If the CSV export takes a 
different export and import path that handles correct conversion, maybe 
that is not the case for the binary files.
I would try to locate 1-2 records from the shp file that cause this 
problem then submit that to a bug report.

You should be able to apply a where clause to the export to select only 
a subset of the records when you export.

-Steve W

On 9/12/2020 1:21 PM, Hernán De Angelis wrote:
> That was a very good piece of advice. Unfortunately that is apparently 
> not the problem. The CSV imports cleanly in Libreoffice, with the same 
> number of rows (minus title row) as features are in the shp. No trace 
> of misplaced linefeed or carriage return characters. I will have to 
> keep looking for solutions. Thanks anyway!
>
> /H.
>
> On 2020-09-12 18:56, Stephen Woodbridge wrote:
>> Try exporting to CSV and check the that the records do not have any 
>> embeded <CR> or <LF> chars. One simple way to do this is to compare 
>> the record count of the shp file to the line count of the CSV file. 
>> Try importing the CSV file into EXCEL  or Libreoffice and see if it 
>> reports a problem. This may give you a better idea of what the 
>> problem is.
>>
>> -Steve W
>>
>> On 9/12/2020 11:20 AM, Hernán De Angelis wrote:
>>> Hi everyone
>>>
>>> I am experiencing an odd and stubborn problem when trying to export 
>>> attribute tables from both shp and spatialite to ods or xlsx. 
>>> ogr2ogr finishes work silently with no reported errors but the 
>>> generated output files cannot be opened with Libreoffice, which says 
>>> the file is corrupted and is even unable to repair it.
>>>
>>> The input files are good from what I can see using QGIS and OGR but 
>>> it is clear that something isn't right in my installation, my 
>>> procedure or somewhere else. I am missing something? Have other 
>>> users experienced this?
>>>
>>> I am using GDAL/OGR 3.1.2 in openSUSE Tumbleweed, compiled against 
>>> expat 2.2.9-1.12 (devel packages installed too, of course).
>>>
>>> Any hint is appreciated!
>>>
>>> Hernán
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From jmckenna at gatewaygeomatics.com  Sat Sep 12 10:54:25 2020
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Sat, 12 Sep 2020 14:54:25 -0300
Subject: [gdal-dev] Problem writing with ODS and XLSX drivers
In-Reply-To: <8f2443c4-4895-f1c6-aa6b-c26aeb19b5a9@comhem.se>
References: <8f2443c4-4895-f1c6-aa6b-c26aeb19b5a9@comhem.se>
Message-ID: <5d804dc0-80ba-6b1f-e236-9853f1131fae@gatewaygeomatics.com>

Hi Hernán,

I would also set CPL_DEBUG=ON at the commandline, before executing 
ogr2ogr.  You should see some useful output messages.

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
co-founder of FOSS4G
http://gatewaygeo.com/



On 2020-09-12 12:20 p.m., Hernán De Angelis wrote:
> Hi everyone
> 
> I am experiencing an odd and stubborn problem when trying to export 
> attribute tables from both shp and spatialite to ods or xlsx. ogr2ogr 
> finishes work silently with no reported errors but the generated output 
> files cannot be opened with Libreoffice, which says the file is 
> corrupted and is even unable to repair it.
> 
> The input files are good from what I can see using QGIS and OGR but it 
> is clear that something isn't right in my installation, my procedure or 
> somewhere else. I am missing something? Have other users experienced this?
> 
> I am using GDAL/OGR 3.1.2 in openSUSE Tumbleweed, compiled against expat 
> 2.2.9-1.12 (devel packages installed too, of course).
> 
> Any hint is appreciated!
> 
> Hernán
> 
> 





From even.rouault at spatialys.com  Sat Sep 12 11:00:14 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 12 Sep 2020 20:00:14 +0200
Subject: [gdal-dev] Problem writing with ODS and XLSX drivers
In-Reply-To: <8f2443c4-4895-f1c6-aa6b-c26aeb19b5a9@comhem.se>
References: <8f2443c4-4895-f1c6-aa6b-c26aeb19b5a9@comhem.se>
Message-ID: <6009182.3bWTfo8rnF@even-i700>

On samedi 12 septembre 2020 17:20:29 CEST Hernán De Angelis wrote:
> Hi everyone
> 
> I am experiencing an odd and stubborn problem when trying to export
> attribute tables from both shp and spatialite to ods or xlsx. ogr2ogr
> finishes work silently with no reported errors but the generated output
> files cannot be opened with Libreoffice, which says the file is
> corrupted and is even unable to repair it.
> 
> The input files are good from what I can see using QGIS and OGR but it
> is clear that something isn't right in my installation, my procedure or
> somewhere else. I am missing something? Have other users experienced this?

Please share minimal ods/xlsx files that can be used to reproduce the issue (and 
possibly source datasets + ogr2ogr invokation used to generate the ods/xlsx files)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200912/32eb8fcd/attachment.html>

From dhdeangelis at comhem.se  Sat Sep 12 12:07:27 2020
From: dhdeangelis at comhem.se (=?UTF-8?Q?Hern=c3=a1n_De_Angelis?=)
Date: Sat, 12 Sep 2020 21:07:27 +0200
Subject: [gdal-dev] Problem writing with ODS and XLSX drivers
In-Reply-To: <fb121b5b-bc3a-60db-e893-af382b8f12ba@gmail.com>
References: <8f2443c4-4895-f1c6-aa6b-c26aeb19b5a9@comhem.se>
 <1d319f41-c0b1-66a8-01a3-00f2fb66d701@gmail.com>
 <af0cf47b-e1af-20c0-2dc6-6a62eecde7ca@comhem.se>
 <fb121b5b-bc3a-60db-e893-af382b8f12ba@gmail.com>
Message-ID: <52011adf-89c0-93d6-771c-efcd10e5edd1@comhem.se>

That is a good idea too. I have two test files, one is rife with 
scandinavian characters, the other isn't. Both give the same problematic 
result.

/H.

On 2020-09-12 19:40, Stephen Woodbridge wrote:
> I'm wondering if there are unicode characters that are not properly 
> formated when output to the xlsx or ods files. If the CSV export takes 
> a different export and import path that handles correct conversion, 
> maybe that is not the case for the binary files.
> I would try to locate 1-2 records from the shp file that cause this 
> problem then submit that to a bug report.
>
> You should be able to apply a where clause to the export to select 
> only a subset of the records when you export.
>
> -Steve W
>
> On 9/12/2020 1:21 PM, Hernán De Angelis wrote:
>> That was a very good piece of advice. Unfortunately that is 
>> apparently not the problem. The CSV imports cleanly in Libreoffice, 
>> with the same number of rows (minus title row) as features are in the 
>> shp. No trace of misplaced linefeed or carriage return characters. I 
>> will have to keep looking for solutions. Thanks anyway!
>>
>> /H.
>>
>> On 2020-09-12 18:56, Stephen Woodbridge wrote:
>>> Try exporting to CSV and check the that the records do not have any 
>>> embeded <CR> or <LF> chars. One simple way to do this is to compare 
>>> the record count of the shp file to the line count of the CSV file. 
>>> Try importing the CSV file into EXCEL  or Libreoffice and see if it 
>>> reports a problem. This may give you a better idea of what the 
>>> problem is.
>>>
>>> -Steve W
>>>
>>> On 9/12/2020 11:20 AM, Hernán De Angelis wrote:
>>>> Hi everyone
>>>>
>>>> I am experiencing an odd and stubborn problem when trying to export 
>>>> attribute tables from both shp and spatialite to ods or xlsx. 
>>>> ogr2ogr finishes work silently with no reported errors but the 
>>>> generated output files cannot be opened with Libreoffice, which 
>>>> says the file is corrupted and is even unable to repair it.
>>>>
>>>> The input files are good from what I can see using QGIS and OGR but 
>>>> it is clear that something isn't right in my installation, my 
>>>> procedure or somewhere else. I am missing something? Have other 
>>>> users experienced this?
>>>>
>>>> I am using GDAL/OGR 3.1.2 in openSUSE Tumbleweed, compiled against 
>>>> expat 2.2.9-1.12 (devel packages installed too, of course).
>>>>
>>>> Any hint is appreciated!
>>>>
>>>> Hernán
>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From dhdeangelis at comhem.se  Sat Sep 12 12:11:11 2020
From: dhdeangelis at comhem.se (=?UTF-8?Q?Hern=c3=a1n_De_Angelis?=)
Date: Sat, 12 Sep 2020 21:11:11 +0200
Subject: [gdal-dev] Problem writing with ODS and XLSX drivers
In-Reply-To: <5d804dc0-80ba-6b1f-e236-9853f1131fae@gatewaygeomatics.com>
References: <8f2443c4-4895-f1c6-aa6b-c26aeb19b5a9@comhem.se>
 <5d804dc0-80ba-6b1f-e236-9853f1131fae@gatewaygeomatics.com>
Message-ID: <e2b68551-0772-fbcd-b2d9-26fd2c9b6e25@comhem.se>

Hi Jeff

Thanks for that. This is what I get after setting "export CPL_DEBUG=ON"

 > ogr2ogr -f ODS test.ods test.shp test
Shape: DBF Codepage = UTF-8 for test.shp
Shape: Treating as encoding 'UTF-8'.
GDAL: GDALOpen(test.shp, this=0x22af9e0) succeeds as ESRI Shapefile.
GDAL: GDALDriver::Create(ODS,test.ods,0,0,0,Unknown,(nil))
GDALVectorTranslate: 438 features written in layer 'test'
Shape: 438 features read on layer 'test'.
GDAL: GDALClose(test.shp, this=0x22af9e0)
Mem: 438 features read on layer 'test'.
GDAL: GDALClose(test.ods, this=0x22ad6c0)
GDAL: In GDALDestroy - unloading GDAL shared library.


Does this indicate something problematic? It does not seem so to me.


/H.

On 2020-09-12 19:54, Jeff McKenna wrote:
> Hi Hernán,
>
> I would also set CPL_DEBUG=ON at the commandline, before executing 
> ogr2ogr.  You should see some useful output messages.
>
> -jeff
>
>
>

From dhdeangelis at comhem.se  Sat Sep 12 12:18:41 2020
From: dhdeangelis at comhem.se (=?UTF-8?Q?Hern=c3=a1n_De_Angelis?=)
Date: Sat, 12 Sep 2020 21:18:41 +0200
Subject: [gdal-dev] Problem writing with ODS and XLSX drivers
In-Reply-To: <6009182.3bWTfo8rnF@even-i700>
References: <8f2443c4-4895-f1c6-aa6b-c26aeb19b5a9@comhem.se>
 <6009182.3bWTfo8rnF@even-i700>
Message-ID: <f0d196b2-a2a7-ec8b-f0c3-ecaf7deccaaa@comhem.se>

Even and all,

Thank you all for your kind help with this. The two test datasets can be 
found here:

https://geonatura.se/test.zip

https://geonatura.se/se_100km.zip

Both files are open data and can be used and shared. "Test.zip" is a 
subset of the Swedish registry of environmental monitoring stations 
(bathing water). It's attribute table contains a lot of Swedish names. 
Encoding is UTF-8. The other is a dataset distributed by the European 
Environmental Agency containing a 100x100 km grid for Sweden. No unusual 
characters there.

For both datasets the ogr command is:

ogr2ogr -f ODS test.ods test.shp test

and

ogr2ogr -f ODS se_100km.ods se_100km.shp se_100km

Note that exporting to CSV using ogr2ogr works like charm.

Thanks again!

/Hernán

On 2020-09-12 20:00, Even Rouault wrote:
>
> On samedi 12 septembre 2020 17:20:29 CEST Hern�n De Angelis wrote:
>
> > Hi everyone
>
> >
>
> > I am experiencing an odd and stubborn problem when trying to export
>
> > attribute tables from both shp and spatialite to ods or xlsx. ogr2ogr
>
> > finishes work silently with no reported errors but the generated output
>
> > files cannot be opened with Libreoffice, which says the file is
>
> > corrupted and is even unable to repair it.
>
> >
>
> > The input files are good from what I can see using QGIS and OGR but it
>
> > is clear that something isn't right in my installation, my procedure or
>
> > somewhere else. I am missing something? Have other users experienced 
> this?
>
> Please share minimal ods/xlsx files that can be used to reproduce the 
> issue (and possibly source datasets + ogr2ogr invokation used to 
> generate the ods/xlsx files)
>
> Even
>
> -- 
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200912/4e5bf7c3/attachment.html>

From jmckenna at gatewaygeomatics.com  Sat Sep 12 13:14:36 2020
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Sat, 12 Sep 2020 17:14:36 -0300
Subject: [gdal-dev] Problem writing with ODS and XLSX drivers
In-Reply-To: <f0d196b2-a2a7-ec8b-f0c3-ecaf7deccaaa@comhem.se>
References: <8f2443c4-4895-f1c6-aa6b-c26aeb19b5a9@comhem.se>
 <6009182.3bWTfo8rnF@even-i700>
 <f0d196b2-a2a7-ec8b-f0c3-ecaf7deccaaa@comhem.se>
Message-ID: <3d6c00d2-a711-4561-7ec5-abb8b1b4bf87@gatewaygeomatics.com>

Hi Hernán,

Interesting results here with your file test.shp, on Windows, through 
ogr2ogr:

  - GDAL 2.4.4, expat 2.2.9 -> success  (looks good with LibreOffice 
7.0.0.3)
  - GDAL 3.1.3, expat 2.2.9 -> corrupt (LibreOffice says file is 
corrupt, cannot be opened)


-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
co-founder of FOSS4G
http://gatewaygeo.com/



On 2020-09-12 4:18 p.m., Hernán De Angelis wrote:
> Even and all,
> 
> Thank you all for your kind help with this. The two test datasets can be 
> found here:
> 
> https://geonatura.se/test.zip
> 
> https://geonatura.se/se_100km.zip
> 
> Both files are open data and can be used and shared. "Test.zip" is a 
> subset of the Swedish registry of environmental monitoring stations 
> (bathing water). It's attribute table contains a lot of Swedish names. 
> Encoding is UTF-8. The other is a dataset distributed by the European 
> Environmental Agency containing a 100x100 km grid for Sweden. No unusual 
> characters there.
> 
> For both datasets the ogr command is:
> 
> ogr2ogr -f ODS test.ods test.shp test
> 
> and
> 
> ogr2ogr -f ODS se_100km.ods se_100km.shp se_100km
> 
> Note that exporting to CSV using ogr2ogr works like charm.
> 
> Thanks again!
> 
> /Hernán
> 
> On 2020-09-12 20:00, Even Rouault wrote:
>>
>> On samedi 12 septembre 2020 17:20:29 CEST Hern�n De Angelis wrote:
>>
>> > Hi everyone
>>
>> >
>>
>> > I am experiencing an odd and stubborn problem when trying to export
>>
>> > attribute tables from both shp and spatialite to ods or xlsx. ogr2ogr
>>
>> > finishes work silently with no reported errors but the generated output
>>
>> > files cannot be opened with Libreoffice, which says the file is
>>
>> > corrupted and is even unable to repair it.
>>
>> >
>>
>> > The input files are good from what I can see using QGIS and OGR but it
>>
>> > is clear that something isn't right in my installation, my procedure or
>>
>> > somewhere else. I am missing something? Have other users experienced 
>> this?
>>
>> Please share minimal ods/xlsx files that can be used to reproduce the 
>> issue (and possibly source datasets + ogr2ogr invokation used to 
>> generate the ods/xlsx files)
>>
>> Even
>>
>> -- 
>>
>> Spatialys - Geospatial professional services
>>
>> http://www.spatialys.com
>>
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


From even.rouault at spatialys.com  Sat Sep 12 15:04:34 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 13 Sep 2020 00:04:34 +0200
Subject: [gdal-dev] Problem writing with ODS and XLSX drivers
In-Reply-To: <f0d196b2-a2a7-ec8b-f0c3-ecaf7deccaaa@comhem.se>
References: <8f2443c4-4895-f1c6-aa6b-c26aeb19b5a9@comhem.se>
 <6009182.3bWTfo8rnF@even-i700>
 <f0d196b2-a2a7-ec8b-f0c3-ecaf7deccaaa@comhem.se>
Message-ID: <10016598.eeLZZR8o3e@even-i700>

Hernán,

problem confirmed and now fixed in GDAL master and 3.1 branch

The issue was that Zip64 extensions were used to create ODS and XLSX files, 
which LibreOffice apparently does not like (this broke also identification of the 
formats by the "file" utility)

You can workaround the issue by adding "--config CPL_CREATE_ZIP64 NO" to your 
ogr2ogr command line

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200913/cdab3d47/attachment.html>

From alansnow21 at gmail.com  Sat Sep 12 17:48:58 2020
From: alansnow21 at gmail.com (Alan Snow)
Date: Sat, 12 Sep 2020 19:48:58 -0500
Subject: [gdal-dev] Official support for empty field names in OGR?
Message-ID: <CAGybdFRKUc7wK2rcz=CWM7ubzr7JpPOS3+yne_fdusfVND352w@mail.gmail.com>

This is a question originating from:
https://github.com/Toblerity/Fiona/pull/955

It seems that empty field names work in GDAL/OGR without issue across the
drivers I have tested (ESRI Shapefile, GeoJSON, GPKG, CSV). However, one
question Sean Gillies and I have is: Is this behavior expected and
supported?

Thanks,
-- 
Alan Snow
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200912/97d0b5fb/attachment-0001.html>

From dhdeangelis at comhem.se  Sat Sep 12 22:57:36 2020
From: dhdeangelis at comhem.se (=?ISO-8859-1?Q?Hern=E1n?=)
Date: Sun, 13 Sep 2020 07:57:36 +0200
Subject: [gdal-dev] Ang:  Problem writing with ODS and XLSX drivers
References: <8f2443c4-4895-f1c6-aa6b-c26aeb19b5a9@comhem.se>
 <6009182.3bWTfo8rnF@even-i700>
 <f0d196b2-a2a7-ec8b-f0c3-ecaf7deccaaa@comhem.se>
 <10016598.eeLZZR8o3e@even-i700>
Message-ID: <s70nza-ucuy6qczabqije1yaw-ichde62xo0go-5gazxr-ofc6f1-o8x4vy-6hn69s-hg95si-g8hfnckztfbyttdlfj-a4yqm1-w85ya6rrz1id-1pv1kzroleh0-cjrbn4-qqo5je-sorx8q-4ozmqt-a7seco.1599976656098@email.android.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200913/2ed7c8ca/attachment.html>

From even.rouault at spatialys.com  Sun Sep 13 04:37:47 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 13 Sep 2020 13:37:47 +0200
Subject: [gdal-dev] Official support for empty field names in OGR?
In-Reply-To: <CAGybdFRKUc7wK2rcz=CWM7ubzr7JpPOS3+yne_fdusfVND352w@mail.gmail.com>
References: <CAGybdFRKUc7wK2rcz=CWM7ubzr7JpPOS3+yne_fdusfVND352w@mail.gmail.com>
Message-ID: <5422317.Gxca3sOEo2@even-i700>

On samedi 12 septembre 2020 19:48:58 CEST Alan Snow wrote:
> This is a question originating from:
> https://github.com/Toblerity/Fiona/pull/955
> 
> It seems that empty field names work in GDAL/OGR without issue across the
> drivers I have tested (ESRI Shapefile, GeoJSON, GPKG, CSV). However, one
> question Sean Gillies and I have is: Is this behavior expected and
> supported?

An empty string is just a string, so unless drivers actively test for it,  that should work I guess. 
But this is certainly playing a bit with fire. Wouldn't be surprised that applications consuming 
such empty field name don't like it much.

Actually just seeing that PostgreSQL and mySQL don't like empty string as a column. It seems 
to be a general SQL92 restriction actually (SQLite3 is an exception to that)

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200913/27f7a355/attachment.html>

From alansnow21 at gmail.com  Sun Sep 13 17:50:44 2020
From: alansnow21 at gmail.com (Alan Snow)
Date: Sun, 13 Sep 2020 19:50:44 -0500
Subject: [gdal-dev] Official support for empty field names in OGR?
In-Reply-To: <5422317.Gxca3sOEo2@even-i700>
References: <CAGybdFRKUc7wK2rcz=CWM7ubzr7JpPOS3+yne_fdusfVND352w@mail.gmail.com>
 <5422317.Gxca3sOEo2@even-i700>
Message-ID: <CAGybdFSWJz5gttsT6gPEfshWw0rkJT__3r1SRV7G3JkCAR63+w@mail.gmail.com>

Hi Even,

Thanks for your input on this. That was very helpful.

Best,
-- 
Alan Snow
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200913/398175fb/attachment.html>

From arun.usask at gmail.com  Mon Sep 14 09:50:27 2020
From: arun.usask at gmail.com (Arun Govind)
Date: Mon, 14 Sep 2020 10:50:27 -0600
Subject: [gdal-dev] GDAL VSI support Wasabi Cloud?
Message-ID: <CAO+fXHNjJQsTme6ZfSVmY36qOaosD+Fa7Vdop6FmGnEBJoU37g@mail.gmail.com>

Hi,
Wondering if GDAL VSI support Wasabi Cloud? As you would agree, images tend
to be huge files and could benefit from served-off cheaper cloud
solutions...
https://gdal.org/user/virtual_file_systems.html
https://medium.com/couchdrop-io/how-good-is-wasabi-cloud-storage-c3a18ebd29a7


Thanks.
-- 
Sincerely yours,
*Arun Govind*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200914/c27b7e4b/attachment.html>

From even.rouault at spatialys.com  Mon Sep 14 10:09:58 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 14 Sep 2020 19:09:58 +0200
Subject: [gdal-dev] GDAL VSI support Wasabi Cloud?
In-Reply-To: <CAO+fXHNjJQsTme6ZfSVmY36qOaosD+Fa7Vdop6FmGnEBJoU37g@mail.gmail.com>
References: <CAO+fXHNjJQsTme6ZfSVmY36qOaosD+Fa7Vdop6FmGnEBJoU37g@mail.gmail.com>
Message-ID: <1958598.9UKuDCBGVl@even-i700>

On lundi 14 septembre 2020 10:50:27 CEST Arun Govind wrote:
> Hi,
> Wondering if GDAL VSI support Wasabi Cloud? As you would agree, images tend
> to be huge files and could benefit from served-off cheaper cloud
> solutions...
> https://gdal.org/user/virtual_file_systems.html
> https://medium.com/couchdrop-io/how-good-is-wasabi-cloud-storage-c3a18ebd29a
> 7

According to 
https://wasabi.com/wp-content/themes/wasabi/docs/API_Guide/index.html#t=topics%2Fapidiff-intro.htm
they implement the AWS S3 API

It should just be a matter of setting the AWS_S3_ENDPOINT configuration option/
environment variable (see /vsis3 doc) to "s3.wasabisys.com", or a variant of it depending
on the region of your bucket

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200914/40b6c14b/attachment.html>

From j1 at jimenezshaw.com  Mon Sep 14 10:26:44 2020
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 14 Sep 2020 19:26:44 +0200
Subject: [gdal-dev] Create big COG file (C++)
Message-ID: <CADRrdKuzrJzaUmgqrT10rFAJL-LwvxEc78JURPMzTM3FBnUzYA@mail.gmail.com>

Hi

I want to create a big (I mean bigger than my RAM size) COG file in C++
with GDAL 3.1.
COG driver does not have the "Create()" method, but "CreateCopy()". I am
not sure how I have to do it. Should I Create() first the dataset with the
MEM driver, write on it, and then call the CreateCopy with the COG driver?
(by the way, before closing the MEM dataset? Is then everything copied?) I
am afraid that everything is stored in memory while I am using the MEM
driver. Or should I use a normal GTiff dataset, and then CreateCopy() with
the COG driver? Or anything else?

Thank you,
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200914/41f41d70/attachment.html>

From even.rouault at spatialys.com  Mon Sep 14 10:48:42 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 14 Sep 2020 19:48:42 +0200
Subject: [gdal-dev] Create big COG file (C++)
In-Reply-To: <CADRrdKuzrJzaUmgqrT10rFAJL-LwvxEc78JURPMzTM3FBnUzYA@mail.gmail.com>
References: <CADRrdKuzrJzaUmgqrT10rFAJL-LwvxEc78JURPMzTM3FBnUzYA@mail.gmail.com>
Message-ID: <41049778.I68dcGidsb@even-i700>

Javier,

> I want to create a big (I mean bigger than my RAM size) COG file in C++
> with GDAL 3.1.
> COG driver does not have the "Create()" method, but "CreateCopy()". I am
> not sure how I have to do it. Should I Create() first the dataset with the
> MEM driver, write on it, and then call the CreateCopy with the COG driver?
> (by the way, before closing the MEM dataset? Is then everything copied?)

You shouldn't use the MEM driver for datasets that can't fit entirely into RAM.
MEM datasets are temporary. Once you've closed the dataset handle, it is destroyed. So if 
you use a MEM dataset, you must pass to CreateCopy() the handle you got when calling 
Create() for the MEM dataset

> Or should I use a normal GTiff dataset, and then CreateCopy() with
> the COG driver?

Yes

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200914/fb4c9ef0/attachment.html>

From j1 at jimenezshaw.com  Mon Sep 14 12:38:33 2020
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 14 Sep 2020 21:38:33 +0200
Subject: [gdal-dev] Create big COG file (C++)
In-Reply-To: <41049778.I68dcGidsb@even-i700>
References: <CADRrdKuzrJzaUmgqrT10rFAJL-LwvxEc78JURPMzTM3FBnUzYA@mail.gmail.com>
 <41049778.I68dcGidsb@even-i700>
Message-ID: <CADRrdKsGJ+URAeXax3df1YzF0b36O5jQ0cjwu0GVpe1Pk4eXWQ@mail.gmail.com>

Thanks Even.

So if I understand correctly, the steps would be:
 1- Create() the GTiff dataset (with a valid filename)
 2- write all the data with [many] RasterIO() calls
 3- close the dataset (to dump everything into disk)
 4- open the GTiff dataset in read mode
 5- CreateCopy() with COG driver (with in a different valid filename),
based on the dataset (opened in 1 or 4, see below)
 6- close COG file.
 7- optionally delete the GTiff file (if only COG is needed)

I am not sure if I need steps 3 and 4. If not, should I move step 5 between
1 and 2?

Looks like this duplicates used disk space, and takes time to write the
second time. Why is it needed? Is there any workaround to create the COG
directly?

Thank you. Regards.
Javier.

.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Mon, 14 Sep 2020 at 19:49, Even Rouault <even.rouault at spatialys.com>
wrote:

> Javier,
>
>
>
> > I want to create a big (I mean bigger than my RAM size) COG file in C++
>
> > with GDAL 3.1.
>
> > COG driver does not have the "Create()" method, but "CreateCopy()". I am
>
> > not sure how I have to do it. Should I Create() first the dataset with
> the
>
> > MEM driver, write on it, and then call the CreateCopy with the COG
> driver?
>
> > (by the way, before closing the MEM dataset? Is then everything copied?)
>
>
>
> You shouldn't use the MEM driver for datasets that can't fit entirely into
> RAM.
>
> MEM datasets are temporary. Once you've closed the dataset handle, it is
> destroyed. So if you use a MEM dataset, you must pass to CreateCopy() the
> handle you got when calling Create() for the MEM dataset
>
>
>
> > Or should I use a normal GTiff dataset, and then CreateCopy() with
>
> > the COG driver?
>
>
>
> Yes
>
>
>
> Even
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200914/08436788/attachment.html>

From even.rouault at spatialys.com  Tue Sep 15 02:47:05 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 Sep 2020 11:47:05 +0200
Subject: [gdal-dev] Create big COG file (C++)
In-Reply-To: <CADRrdKsGJ+URAeXax3df1YzF0b36O5jQ0cjwu0GVpe1Pk4eXWQ@mail.gmail.com>
References: <CADRrdKuzrJzaUmgqrT10rFAJL-LwvxEc78JURPMzTM3FBnUzYA@mail.gmail.com>
 <41049778.I68dcGidsb@even-i700>
 <CADRrdKsGJ+URAeXax3df1YzF0b36O5jQ0cjwu0GVpe1Pk4eXWQ@mail.gmail.com>
Message-ID: <800103039.eYpltSJVvL@even-i700>

On lundi 14 septembre 2020 21:38:33 CEST Javier Jimenez Shaw wrote:
> Thanks Even.
> 
> So if I understand correctly, the steps would be:
>  1- Create() the GTiff dataset (with a valid filename)
>  2- write all the data with [many] RasterIO() calls
>  3- close the dataset (to dump everything into disk)
>  4- open the GTiff dataset in read mode
>  5- CreateCopy() with COG driver (with in a different valid filename),
> based on the dataset (opened in 1 or 4, see below)
>  6- close COG file.
>  7- optionally delete the GTiff file (if only COG is needed)
> 
> I am not sure if I need steps 3 and 4. If not, should I move step 5 between
> 1 and 2?

You may skip step 3 and 4, and just close the GTiff dataset after CreateCopy().

> Looks like this duplicates used disk space, and takes time to write the
> second time. Why is it needed? Is there any workaround to create the COG
> directly?

No workaround. The COG driver needs to compute overviews, and given the current 
definition of the COG layout, it must write their data in the file before the full resolution 
imagery. No progressive writing is possible.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200915/2cc6f56f/attachment.html>

From vponz-sarvise at forsk.com  Tue Sep 15 06:03:11 2020
From: vponz-sarvise at forsk.com (Victoria Ponz-Sarvise)
Date: Tue, 15 Sep 2020 13:03:11 +0000
Subject: [gdal-dev] ogr2ogr with ORACLE driver: limitation on table name
	size?
In-Reply-To: <DB8PR04MB5707F1EB10A54CF2C25EDF67EF200@DB8PR04MB5707.eurprd04.prod.outlook.com>
References: <DB8PR04MB5707F1EB10A54CF2C25EDF67EF200@DB8PR04MB5707.eurprd04.prod.outlook.com>
Message-ID: <DB8PR04MB5707FC1BDDD98D0D770D004CEF200@DB8PR04MB5707.eurprd04.prod.outlook.com>

Hi,

I'm using ogr2ogr to upload shapefiles in an Oracle database, and I would like to know if there is a limitation of the number of characters in the created tables names.
In Oracle, until v12.2, the table names where limited to 30 bytes, and after that it is possible to create tables with names 128 bytes long.
The oracle database I'm using is 12.2, but ogr2ogr command truncates my table names to 30 chars.
I can not find in the documentation if there is a limitation in table names sizes in ogr. Can you please tell me if ogr2ogr is able to create table names longer than 30 bytes?
I am using GDAL 2.4.3

Thanks for your answer!
Regards
Victoria
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200915/34aad427/attachment.html>

From ivan.lucena at outlook.com  Tue Sep 15 07:06:43 2020
From: ivan.lucena at outlook.com (Ivan Lucena)
Date: Tue, 15 Sep 2020 14:06:43 +0000
Subject: [gdal-dev] ogr2ogr with ORACLE driver: limitation on table
	name	size?
In-Reply-To: <DB8PR04MB5707FC1BDDD98D0D770D004CEF200@DB8PR04MB5707.eurprd04.prod.outlook.com>
References: <DB8PR04MB5707F1EB10A54CF2C25EDF67EF200@DB8PR04MB5707.eurprd04.prod.outlook.com>,
 <DB8PR04MB5707FC1BDDD98D0D770D004CEF200@DB8PR04MB5707.eurprd04.prod.outlook.com>
Message-ID: <MN2PR04MB569333D29F59687190432E9FF2200@MN2PR04MB5693.namprd04.prod.outlook.com>

According to that code it should work:

https://github.com/OSGeo/gdal/blob/70a2ec1795c3e01aeaf1ac3c0f7c69a3f0fa2ca5/gdal/ogr/ogrsf_frmts/oci/ogrocisession.cpp#L316

Ticket:

https://trac.osgeo.org/gdal/ticket/6866
________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Victoria Ponz-Sarvise <vponz-sarvise at forsk.com>
Sent: Tuesday, September 15, 2020 9:03 AM
To: gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: [gdal-dev] ogr2ogr with ORACLE driver: limitation on table name size?


Hi,



I’m using ogr2ogr to upload shapefiles in an Oracle database, and I would like to know if there is a limitation of the number of characters in the created tables names.

In Oracle, until v12.2, the table names where limited to 30 bytes, and after that it is possible to create tables with names 128 bytes long.

The oracle database I’m using is 12.2, but ogr2ogr command truncates my table names to 30 chars.

I can not find in the documentation if there is a limitation in table names sizes in ogr. Can you please tell me if ogr2ogr is able to create table names longer than 30 bytes?

I am using GDAL 2.4.3



Thanks for your answer!

Regards

Victoria
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200915/2081eb7a/attachment-0001.html>

From even.rouault at spatialys.com  Tue Sep 15 07:33:51 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 Sep 2020 16:33:51 +0200
Subject: [gdal-dev] ogr2ogr with ORACLE driver: limitation on table
	name	size?
In-Reply-To: <MN2PR04MB569333D29F59687190432E9FF2200@MN2PR04MB5693.namprd04.prod.outlook.com>
References: <DB8PR04MB5707F1EB10A54CF2C25EDF67EF200@DB8PR04MB5707.eurprd04.prod.outlook.com>
 <DB8PR04MB5707FC1BDDD98D0D770D004CEF200@DB8PR04MB5707.eurprd04.prod.outlook.com>
 <MN2PR04MB569333D29F59687190432E9FF2200@MN2PR04MB5693.namprd04.prod.outlook.com>
Message-ID: <5445767.GIuN0sA9V5@even-i700>

Ivan,

> https://github.com/OSGeo/gdal/blob/70a2ec1795c3e01aeaf1ac3c0f7c69a3f0fa2ca5/
> gdal/ogr/ogrsf_frmts/oci/ogrocisession.cpp#L316

The logic

if( nServerVersion >= 12 && nServerRelease >= 2 )

looks wrong to me. It will not work for 13.0 for example

Shouldn't that be

if( nServerVersion > 12 || (nServerVersion == 12 && nServerRelease >= 2) )

?

That said that doesn't explain issues with 12.2 

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200915/4aef8950/attachment.html>

From vponz-sarvise at forsk.com  Tue Sep 15 07:51:07 2020
From: vponz-sarvise at forsk.com (Victoria Ponz-Sarvise)
Date: Tue, 15 Sep 2020 14:51:07 +0000
Subject: [gdal-dev] ogr2ogr with ORACLE driver: limitation on table
	name	size?
In-Reply-To: <5445767.GIuN0sA9V5@even-i700>
References: <DB8PR04MB5707F1EB10A54CF2C25EDF67EF200@DB8PR04MB5707.eurprd04.prod.outlook.com>
 <DB8PR04MB5707FC1BDDD98D0D770D004CEF200@DB8PR04MB5707.eurprd04.prod.outlook.com>
 <MN2PR04MB569333D29F59687190432E9FF2200@MN2PR04MB5693.namprd04.prod.outlook.com>
 <5445767.GIuN0sA9V5@even-i700>
Message-ID: <DB8PR04MB5707364BC6025D540A799354EF200@DB8PR04MB5707.eurprd04.prod.outlook.com>

Thanks for your answers.

I have reviewed my oracle settings and in fact what I said wasn't strictly ok... I compiled GDAL using a 12.2 oracle client, but the database I got for the tests is oracle 19... so it won't work (I think Even is right). Sorry for that bad info in my first mail.

I'm going to look for a 12.2 database that I can use for new tests and will keep you informed. Because it should work in that context at least.

Victoria
From: Even Rouault <even.rouault at spatialys.com>
Sent: Tuesday, September 15, 2020 4:34 PM
To: gdal-dev at lists.osgeo.org
Cc: Ivan Lucena <ivan.lucena at outlook.com>; Victoria Ponz-Sarvise <vponz-sarvise at forsk.com>
Subject: Re: [gdal-dev] ogr2ogr with ORACLE driver: limitation on table name size?


Ivan,



> https://github.com/OSGeo/gdal/blob/70a2ec1795c3e01aeaf1ac3c0f7c69a3f0fa2ca5/

> gdal/ogr/ogrsf_frmts/oci/ogrocisession.cpp#L316



The logic



if( nServerVersion >= 12 && nServerRelease >= 2 )



looks wrong to me. It will not work for 13.0 for example



Shouldn't that be



if( nServerVersion > 12 || (nServerVersion == 12 && nServerRelease >= 2) )



?



That said that doesn't explain issues with 12.2



Even



--

Spatialys - Geospatial professional services

http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200915/d69b71a4/attachment.html>

From ivan.lucena at outlook.com  Tue Sep 15 07:51:19 2020
From: ivan.lucena at outlook.com (Ivan Lucena)
Date: Tue, 15 Sep 2020 14:51:19 +0000
Subject: [gdal-dev] ogr2ogr with ORACLE driver: limitation on table
	name	size?
In-Reply-To: <5445767.GIuN0sA9V5@even-i700>
References: <DB8PR04MB5707F1EB10A54CF2C25EDF67EF200@DB8PR04MB5707.eurprd04.prod.outlook.com>
 <DB8PR04MB5707FC1BDDD98D0D770D004CEF200@DB8PR04MB5707.eurprd04.prod.outlook.com>
 <MN2PR04MB569333D29F59687190432E9FF2200@MN2PR04MB5693.namprd04.prod.outlook.com>,
 <5445767.GIuN0sA9V5@even-i700>
Message-ID: <MN2PR04MB569353E8A9CFFDC799846A39F2200@MN2PR04MB5693.namprd04.prod.outlook.com>

Even,

You are correct.

As you can see in the code above those lines is that it is possible to run in debugging mode to check if the call to OCIServerVersion is been parsed correctly.

Best regards,

Ivan
________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: Tuesday, September 15, 2020 10:33 AM
To: gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Cc: Ivan Lucena <ivan.lucena at outlook.com>; Victoria Ponz-Sarvise <vponz-sarvise at forsk.com>
Subject: Re: [gdal-dev] ogr2ogr with ORACLE driver: limitation on table name size?


Ivan,



> https://github.com/OSGeo/gdal/blob/70a2ec1795c3e01aeaf1ac3c0f7c69a3f0fa2ca5/

> gdal/ogr/ogrsf_frmts/oci/ogrocisession.cpp#L316



The logic



if( nServerVersion >= 12 && nServerRelease >= 2 )



looks wrong to me. It will not work for 13.0 for example



Shouldn't that be



if( nServerVersion > 12 || (nServerVersion == 12 && nServerRelease >= 2) )



?



That said that doesn't explain issues with 12.2



Even



--

Spatialys - Geospatial professional services

http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200915/a0428eb5/attachment-0001.html>

From andrew.terry at centremaps.co.uk  Tue Sep 15 07:58:52 2020
From: andrew.terry at centremaps.co.uk (andrew terry)
Date: Tue, 15 Sep 2020 07:58:52 -0700 (MST)
Subject: [gdal-dev] ogr2ogr dxf font
Message-ID: <1600181932400-0.post@n6.nabble.com>

Hi,

I'm trying to use a specific font required by a client and i've created a
header file including "Romans" as a font but despite doing so, the font
always seems to be created in a new AutoTextStyle type.

For some fonts, this comes in as AutoTextStyle1 (or 2, 3, 4 etc to avoid
duplicating anything in the header) and the font assigned (e.g. Arial) works
but i was having problems with Romans in AutoDesk AutoCAD and it would end
up using simple.shx

ogr2ogr -f "DXF" test.dxf -dsco HEADER=.\header_romans.dxf
PG:"host=localhost port=5432 dbname=database user=username" -sql "SELECT
'LABEL(f:\"Romans\",s:\"1600\",t:\"Example label\",a:\"0\",p:\"10\")' AS
OGR_STYLE, 'SRID=27700;POINT(100 100)'::geometry geometry"

I've found that i can get this to work by using f:\"romans.shx\"

However, i suspect this could conflict if a user brings the data alongside
another drawing already using AutoTextStyle1 etc.

I'm using GDAL 3.0.4

I did come across the section "Store the text style in the map" on
https://gdalautotest-coverage-results.github.io/coverage_html/ogr/ogrsf_frmts/dxf/ogrdxfwriterlayer.cpp.gcov.html
which seems to be running some logic to decide whether to assign a new
AutoTextStyle-%d . I'm not able to confirm whether that logic all makes
sense.

I appreciate DXF is somewhat of a legacy format but any help appreciated.

Andy



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Tue Sep 15 08:06:28 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 Sep 2020 17:06:28 +0200
Subject: [gdal-dev] ogr2ogr with ORACLE driver: limitation on table
	name	size?
In-Reply-To: <5445767.GIuN0sA9V5@even-i700>
References: <DB8PR04MB5707F1EB10A54CF2C25EDF67EF200@DB8PR04MB5707.eurprd04.prod.outlook.com>
 <MN2PR04MB569333D29F59687190432E9FF2200@MN2PR04MB5693.namprd04.prod.outlook.com>
 <5445767.GIuN0sA9V5@even-i700>
Message-ID: <3895960.LrRPB4AfeI@even-i700>

On mardi 15 septembre 2020 16:33:51 CEST Even Rouault wrote:
> Ivan,
> 
> > https://github.com/OSGeo/gdal/blob/70a2ec1795c3e01aeaf1ac3c0f7c69a3f0fa2ca
> > 5/ gdal/ogr/ogrsf_frmts/oci/ogrocisession.cpp#L316
> 
> The logic
> 
> if( nServerVersion >= 12 && nServerRelease >= 2 )
> 
> looks wrong to me. It will not work for 13.0 for example
> 
> Shouldn't that be
> 
> if( nServerVersion > 12 || (nServerVersion == 12 && nServerRelease >= 2) )

I've committed the above change

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200915/7ab4f802/attachment.html>

From andrew.terry at centremaps.co.uk  Tue Sep 15 08:34:38 2020
From: andrew.terry at centremaps.co.uk (andrew terry)
Date: Tue, 15 Sep 2020 08:34:38 -0700 (MST)
Subject: [gdal-dev] ogr2ogr dxf font
In-Reply-To: <1600181932400-0.post@n6.nabble.com>
References: <1600181932400-0.post@n6.nabble.com>
Message-ID: <1600184078540-0.post@n6.nabble.com>

More appropriately, the github location of the font assignment is:

https://github.com/OSGeo/gdal/blob/master/gdal/ogr/ogrsf_frmts/dxf/ogrdxfwriterlayer.cpp
, starting line 576

Also to note that ogrinfo -al on the output lists the font assigned
correctly but not the style (e.g. AutoTextStyle1) that it is done within

Thanks

Andy



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From arun.usask at gmail.com  Tue Sep 15 16:01:58 2020
From: arun.usask at gmail.com (Arun Govind)
Date: Tue, 15 Sep 2020 17:01:58 -0600
Subject: [gdal-dev] Serving COGs from GCP bucket to Openlayers
Message-ID: <CAO+fXHOnm_btjmNuQX+Mjkdz6tM95cPDYcV+7MTqJOd=xabzdw@mail.gmail.com>

Hi,
I need advice on what is the best approach I should take? I'm not an expert
in web mapping or its technologies and I'm trying to figure things as I
go...

I've several time-series (for an image date many types like true color,
false color, ndvi, etc.) COG imagery files in Google Cloud buckets (unique;
1 bucket per user AOI) and so ideally I'll have several buckets. I want to
serve these images using Openlayers (web mapping) and JavaScript
(frontend), and the backend is GeoServer on a VPS Linux server.
A Google developer advised "you can use mapproxy and make it serve off of
tiled image URLs that look like this:
*https://storage.cloud.google.com/my-bucket-name/zxy/{z}/{x}/{y}.png
<https://storage.cloud.google.com/my-bucket-name/zxy/{z}/{x}/{y}.png>*"
Other options suggested include: VRT with GDAL VSIGS, or tile index.
https://github.com/mapserver/mapserver/wiki/Render-images-straight-out-of-S3-with-the-vsicurl-driver


Each COG image is 1 to 10 MB and few years for user AOI will be 1 to 10 GB.
Obviously, if there are 100 or 1000 user AOIs, the total file size will be
in few TBs. A user will have access or can view only images for their AOI.
Some COG are 32 bit float while others are 8 bit.

I am getting lost with all the options and wondering if you can please help
me narrow it down? I'll appreciate your help. Thanks.
-- 
Sincerely yours,
*Arun Govind*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200915/ab48769e/attachment.html>

From vponz-sarvise at forsk.com  Wed Sep 16 01:02:11 2020
From: vponz-sarvise at forsk.com (Victoria Ponz-Sarvise)
Date: Wed, 16 Sep 2020 08:02:11 +0000
Subject: [gdal-dev] ogr2ogr with ORACLE driver: limitation on
	table	name	size?
In-Reply-To: <3895960.LrRPB4AfeI@even-i700>
References: <DB8PR04MB5707F1EB10A54CF2C25EDF67EF200@DB8PR04MB5707.eurprd04.prod.outlook.com>
 <MN2PR04MB569333D29F59687190432E9FF2200@MN2PR04MB5693.namprd04.prod.outlook.com>
 <5445767.GIuN0sA9V5@even-i700> <3895960.LrRPB4AfeI@even-i700>
Message-ID: <DB8PR04MB57075E70EA6607EDC1FFF254EF210@DB8PR04MB5707.eurprd04.prod.outlook.com>

Hi,
I'm not familiar with your workflow. When will this correction be available to use?
Thanks
Victoria



On mardi 15 septembre 2020 16:33:51 CEST Even Rouault wrote:

> Ivan,

>

> > https://github.com/OSGeo/gdal/blob/70a2ec1795c3e01aeaf1ac3c0f7c69a3f0fa2ca

> > 5/ gdal/ogr/ogrsf_frmts/oci/ogrocisession.cpp#L316

>

> The logic

>

> if( nServerVersion >= 12 && nServerRelease >= 2 )

>

> looks wrong to me. It will not work for 13.0 for example

>

> Shouldn't that be

>

> if( nServerVersion > 12 || (nServerVersion == 12 && nServerRelease >= 2) )



I've committed the above change



--

Spatialys - Geospatial professional services

http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200916/ba70198e/attachment.html>

From even.rouault at spatialys.com  Wed Sep 16 04:11:47 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Sep 2020 13:11:47 +0200
Subject: [gdal-dev] ogr2ogr with ORACLE driver: limitation on table	name
	size?
In-Reply-To: <DB8PR04MB57075E70EA6607EDC1FFF254EF210@DB8PR04MB5707.eurprd04.prod.outlook.com>
References: <DB8PR04MB5707F1EB10A54CF2C25EDF67EF200@DB8PR04MB5707.eurprd04.prod.outlook.com>
 <3895960.LrRPB4AfeI@even-i700>
 <DB8PR04MB57075E70EA6607EDC1FFF254EF210@DB8PR04MB5707.eurprd04.prod.outlook.com>
Message-ID: <2138166.CqeHIQ50Oy@even-i700>

On mercredi 16 septembre 2020 08:02:11 CEST Victoria Ponz-Sarvise wrote:
> Hi,
> I'm not familiar with your workflow. When will this correction be available
> to use? Thanks

in 3.1.4 or 3.2.0, whichever is first released.

But as you compiled GDAL from source, you could just patch your copy with
https://github.com/OSGeo/gdal/commit/
71f41dc7b4840807cdf3c05ef435a4533c806898

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200916/96652dc1/attachment.html>

From momtchil at momtchev.com  Wed Sep 16 13:33:23 2020
From: momtchil at momtchev.com (Momtchil Momtchev)
Date: Wed, 16 Sep 2020 22:33:23 +0200
Subject: [gdal-dev] Serving COGs from GCP bucket to Openlayers
In-Reply-To: <CAO+fXHOnm_btjmNuQX+Mjkdz6tM95cPDYcV+7MTqJOd=xabzdw@mail.gmail.com>
References: <CAO+fXHOnm_btjmNuQX+Mjkdz6tM95cPDYcV+7MTqJOd=xabzdw@mail.gmail.com>
Message-ID: <e03c2e63-f325-2169-2bc8-29bafba93645@momtchev.com>


     Hello,

I think this question belongs to the Openlayers list, but what I do is 
use the VRT driver with a generated VRT file that consists of multiple 
PNG tiles. This has the benefit of allowing you to both use Openlayers 
directly with a {z}/{x}/{y} url and to be able to read and write it with 
GDAL all while retaining the geo-referencing data. It is a very good 
solution when the information changes very often, but its extent / 
projection / resolution stays the same (I serve weather data). The 
downside is that managing different zoom levels won't be automatic, you 
will have to implement it yourself.

If you don't need to access the same data both with Openlayers and GDAL, 
or if you need zoom levels, maybe you should take a look at the MBTiles 
driver and gdal2tiles. Or mapproxy which can manage the zoom levels for 
you. I have never used them so I don't have any advice.

Generally, if you only need to serve static raster data, you don't need 
any fancy servers, plain HTTP with Openlayers XYZ and a static directory 
structure will do.

Also, the 32 bit data will need to get converted to integers at some 
point. Offline with GDAL if you can afford the storage, online with 
mapproxy if you can afford the CPU, client-side with lots of custom 
Openlayers code if you can afford to lose some browser performance and 
none of the files is too big.

I think this should be your first decision - who will do the heavy 
lifting - the server or the client, and will it be once per data set, or 
at every request. Do you need dynamic meta data (extent, resolution, 
projection) which requires some protocol like WMTS, or is it mostly 
static, which is best served with simple HTTP.

On 16/09/2020 01:01, Arun Govind wrote:
> Hi,
> I need advice on what is the best approach I should take? I'm not an 
> expert in web mapping or its technologies and I'm trying to figure 
> things as I go...
>
> I've several time-series (for an image date many types like true 
> color, false color, ndvi, etc.) COG imagery files in Google Cloud 
> buckets (unique; 1 bucket per user AOI) and so ideally I'll have 
> several buckets. I want to serve these images using Openlayers (web 
> mapping) and JavaScript (frontend), and the backend is GeoServer on a 
> VPS Linux server.
> A Google developer advised "you can use mapproxy and make it serve off 
> of tiled image URLs that look like this: 
> /https://storage.cloud.google.com/my-bucket-name/zxy/{z}/{x}/{y}.png/"
> Other options suggested include: VRT with GDAL VSIGS, or tile index.
> https://github.com/mapserver/mapserver/wiki/Render-images-straight-out-of-S3-with-the-vsicurl-driver 
>
>
> Each COG image is 1 to 10 MB and few years for user AOI will be 1 to 
> 10 GB. Obviously, if there are 100 or 1000 user AOIs, the total file 
> size will be in few TBs. A user will have access or can view only 
> images for their AOI. Some COG are 32 bit float while others are 8 bit.
>
> I am getting lost with all the options and wondering if you can please 
> help me narrow it down? I'll appreciate your help. Thanks.
> -- 
> Sincerely yours,
> *Arun Govind*
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Momtchil Momtchev<momtchil at momtchev.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200916/e9e41e4c/attachment.html>

From meshko at gmail.com  Thu Sep 17 21:49:06 2020
From: meshko at gmail.com (Mikhail Kruk)
Date: Fri, 18 Sep 2020 00:49:06 -0400
Subject: [gdal-dev] proper way to get area of a lon/lat polygon
Message-ID: <CAC9wkvheGbT0=nGsUGjQyS8ihh=fCVdPVkPZ+4FYH_XF4kCOhA@mail.gmail.com>

Hi!
I am a complete GIS newbie so please bear with me...

I am trying to get the area of a polygon specified in lon,lat pairs in some
reasonable units, like sq kilometers.  My quest so far is documented here:

https://gis.stackexchange.com/questions/374428/default-geo-spatial-reference-system-in-gdal-ogr

but basically I came to the conclusion that when people talk about an area
of something on Earth they really mean the area of a projection (am i right
about that?) and so i need to specify a projection before getting a
meaningful area.  So i ended up with this code:

wkt = "POLYGON ((lon1 lat1, lon2 lat2, lon3 lat3))"
poly = ogr.CreateGeometryFromWkt(wkt)
sr = osr.SpatialReference()
sr.SetWellKnownGeogCS("NAD83")
sr.SetProjCS("SRS_PT_TRANSVERSE_MERCATOR")
poly.AssignSpatialReference(sr)
poly.GetArea()

and yet I get back a value which seems to be calculated in square degrees.

Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200918/224d2e4d/attachment.html>

From j1 at jimenezshaw.com  Fri Sep 18 00:31:12 2020
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Fri, 18 Sep 2020 09:31:12 +0200
Subject: [gdal-dev] proper way to get area of a lon/lat polygon
In-Reply-To: <CAC9wkvheGbT0=nGsUGjQyS8ihh=fCVdPVkPZ+4FYH_XF4kCOhA@mail.gmail.com>
References: <CAC9wkvheGbT0=nGsUGjQyS8ihh=fCVdPVkPZ+4FYH_XF4kCOhA@mail.gmail.com>
Message-ID: <CADRrdKsDW44x7gh5akk+wkjkKhcuDPbg+pMFF2Hr4vfBUo6G2w@mail.gmail.com>

The documentation of AssignSpatialReference says:

"Any existing spatial reference is replaced, but under no circumstances
does this result in the object being reprojected. It is just changing the
interpretation of the existing geometry."

You have to reproject the polygon coordinates to actually have the polygon
in that CRS.

.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Fri, 18 Sep 2020 at 06:49, Mikhail Kruk <meshko at gmail.com> wrote:

> Hi!
> I am a complete GIS newbie so please bear with me...
>
> I am trying to get the area of a polygon specified in lon,lat pairs in
> some reasonable units, like sq kilometers.  My quest so far is documented
> here:
>
>
> https://gis.stackexchange.com/questions/374428/default-geo-spatial-reference-system-in-gdal-ogr
>
> but basically I came to the conclusion that when people talk about an area
> of something on Earth they really mean the area of a projection (am i right
> about that?) and so i need to specify a projection before getting a
> meaningful area.  So i ended up with this code:
>
> wkt = "POLYGON ((lon1 lat1, lon2 lat2, lon3 lat3))"
> poly = ogr.CreateGeometryFromWkt(wkt)
> sr = osr.SpatialReference()
> sr.SetWellKnownGeogCS("NAD83")
> sr.SetProjCS("SRS_PT_TRANSVERSE_MERCATOR")
> poly.AssignSpatialReference(sr)
> poly.GetArea()
>
> and yet I get back a value which seems to be calculated in square degrees.
>
> Thanks!
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200918/9e4aba57/attachment.html>

From matthysk at gmail.com  Fri Sep 18 06:22:18 2020
From: matthysk at gmail.com (Matthys Kroon)
Date: Fri, 18 Sep 2020 15:22:18 +0200
Subject: [gdal-dev] Undefined reference to ....@PHPG_9.6
In-Reply-To: <CAMtJH+un7dx6BAauA6f1z2esgLREEu6OCmgwCFdWFx+dvp5hGg@mail.gmail.com>
References: <CAMtJH+un7dx6BAauA6f1z2esgLREEu6OCmgwCFdWFx+dvp5hGg@mail.gmail.com>
Message-ID: <CAMtJH+uMrxxBBXs5DexVZXVo=tOTshinWUP+o6p8ZPG1Ta5-Gg@mail.gmail.com>

Hi,

I ran into some problems when trying to install some R packages and I
believe the problem has something to do with my gdal configuration. The R
package is trying to load the gdal libraries.

I am using Fedora 32 with installed package:

Installed Packages
Name         : gdal-devel
Version      : 3.0.4
Release      : 2.fc32
Architecture : x86_64
Size         : 1.0 M
Source       : gdal-3.0.4-2.fc32.src.rpm
Repository   : @System
>From repo    : fedora
Summary      : Development files for the GDAL file format library
URL          : http://www.gdal.org
License      : MIT
Description  : This package contains development files for GDAL.

Installed Packages
Name         : gdal
Version      : 3.0.4
Release      : 2.fc32
Architecture : x86_64
Size         : 768 k
Source       : gdal-3.0.4-2.fc32.src.rpm
Repository   : @System
>From repo    : fedora
Summary      : GIS file format library
URL          : http://www.gdal.org
License      : MIT
Description  : Geospatial Data ....

When running

$ld /usr/lib64/libgdal.so

I get:

ld: warning: cannot find entry symbol _start; not setting start address
ld: /usr/lib64/libgdal.so: undefined reference to `PQcmdStatus at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQfname at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to
`PQsetNoticeProcessor at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQftable at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQstatus at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQftablecol at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQconnectdb at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to
`PQescapeStringConn at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `lo_close at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQputCopyEnd at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQgetvalue at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQgetisnull at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQftype at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQfmod at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `lo_creat at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQresultStatus at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `lo_read at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQexec at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to
`PQsetClientEncoding at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQgetlength at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQputCopyData at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQgetResult at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `lo_write at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQfinish at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQclear at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQerrorMessage at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQnfields at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `lo_open at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQexecParams at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQntuples at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to
`PQresultErrorMessage at RHPG_9.6'

So I figured out that PHPG_9.6 has something to do with PostgreSQL and I
have installed libpq-devel to try and remedy the issue but it does not
help. I am not sure how to troubleshoot this further and hence my email. I
would be very grateful for any assistance.

Best regards,

Matthys Kroon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200918/8adff6d9/attachment.html>

From geodesy99 at gmail.com  Fri Sep 18 18:50:19 2020
From: geodesy99 at gmail.com (Michael Patrick)
Date: Fri, 18 Sep 2020 18:50:19 -0700
Subject: [gdal-dev] proper way to get area of a lon/lat polygon
In-Reply-To: <mailman.6.1600455602.3988.gdal-dev@lists.osgeo.org>
References: <mailman.6.1600455602.3988.gdal-dev@lists.osgeo.org>
Message-ID: <CAC54+E6+G04poL9VPPVdKBkXtmg3qnmYCKLW0wyGbpE=WMsSoA@mail.gmail.com>

>
> ... but basically I came to the conclusion that when people talk about an
> area of something on Earth they really mean the area of a projection (am i
> right about that?) and so i need to specify a projection before getting a
> meaningful area.  So i ended up with this code:
>
> wkt = "POLYGON ((lon1 lat1, lon2 lat2, lon3 lat3))"
> poly = ogr.CreateGeometryFromWkt(wkt)
> sr = osr.SpatialReference()
> sr.SetWellKnownGeogCS("NAD83")
> sr.SetProjCS("SRS_PT_TRANSVERSE_MERCATOR")
> poly.AssignSpatialReference(sr)
> poly.GetArea() <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
> I might be dense, but it seems you are assigning sr as a specific
transverse mercator, i.e.  UTM zone 18N, or a custom one centered on the
centroid of your polygon. i.e. you don't have sufficient arguments.


<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=icon>
Virus-free.
www.avast.com
<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=link>
<#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200918/e3799e25/attachment.html>

From meshko at gmail.com  Fri Sep 18 19:31:15 2020
From: meshko at gmail.com (Mikhail Kruk)
Date: Fri, 18 Sep 2020 22:31:15 -0400
Subject: [gdal-dev] proper way to get area of a lon/lat polygon
In-Reply-To: <CAC54+E6+G04poL9VPPVdKBkXtmg3qnmYCKLW0wyGbpE=WMsSoA@mail.gmail.com>
References: <mailman.6.1600455602.3988.gdal-dev@lists.osgeo.org>
 <CAC54+E6+G04poL9VPPVdKBkXtmg3qnmYCKLW0wyGbpE=WMsSoA@mail.gmail.com>
Message-ID: <CAC9wkvj+=ME78EGSoX5K2gNfErTn7VqhWQFGe6ozdoJRUqgpbg@mail.gmail.com>

Yes, you are correct, that was one of my first attempts and was wrong
because I don't really understand these projection systems.
I now have a better one which sort of works and produces areas in meters by
setting first system to
sr.SetWellKnownGeogCS("EPSG:4326")
Now I am struggling with selecting the projection coordinate system.  Some
suggested that I use cylindrical projection EPSG:9835 which should preserve
the area anywhere on the planet but when I try
sr_proj.ImportFromEPSG(9835)
I get error:
PROJ: proj_create_from_database: crs not found


On Fri, Sep 18, 2020 at 9:50 PM Michael Patrick <geodesy99 at gmail.com> wrote:

> ... but basically I came to the conclusion that when people talk about an
>> area of something on Earth they really mean the area of a projection (am i
>> right about that?) and so i need to specify a projection before getting a
>> meaningful area.  So i ended up with this code:
>>
>> wkt = "POLYGON ((lon1 lat1, lon2 lat2, lon3 lat3))"
>> poly = ogr.CreateGeometryFromWkt(wkt)
>> sr = osr.SpatialReference()
>> sr.SetWellKnownGeogCS("NAD83")
>> sr.SetProjCS("SRS_PT_TRANSVERSE_MERCATOR")
>> poly.AssignSpatialReference(sr)
>> poly.GetArea() <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>
>> I might be dense, but it seems you are assigning sr as a specific
> transverse mercator, i.e.  UTM zone 18N, or a custom one centered on the
> centroid of your polygon. i.e. you don't have sufficient arguments.
>
>
>
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=icon> Virus-free.
> www.avast.com
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=link>
> <#m_-2581199688950320765_m_6579958654730313444_DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200918/fd643cdb/attachment.html>

From alansnow21 at gmail.com  Fri Sep 18 20:43:27 2020
From: alansnow21 at gmail.com (Alan Snow)
Date: Fri, 18 Sep 2020 22:43:27 -0500
Subject: [gdal-dev] proper way to get area of a lon/lat polygon
In-Reply-To: <CAC9wkvj+=ME78EGSoX5K2gNfErTn7VqhWQFGe6ozdoJRUqgpbg@mail.gmail.com>
References: <mailman.6.1600455602.3988.gdal-dev@lists.osgeo.org>
 <CAC54+E6+G04poL9VPPVdKBkXtmg3qnmYCKLW0wyGbpE=WMsSoA@mail.gmail.com>
 <CAC9wkvj+=ME78EGSoX5K2gNfErTn7VqhWQFGe6ozdoJRUqgpbg@mail.gmail.com>
Message-ID: <CAGybdFT0G+f7zmpO38PBV8hvEvek-V8oiuN6OfsWzROH173NPA@mail.gmail.com>

EPSG 9835 is an conversion method which needs some parameters defined:
https://pyproj4.github.io/pyproj/stable/api/crs/coordinate_operation.html#lambertcylindricalequalareaconversion

You can use that conversion to build a projected CRS:
https://pyproj4.github.io/pyproj/stable/build_crs.html#projected-crs

That being said, you might also be interested in geodesic area if you have
geographic coordinates:
https://pyproj4.github.io/pyproj/stable/examples.html#geodesic-area

And you can use this to get the Geod class for EPSG:4326:
https://pyproj4.github.io/pyproj/stable/api/crs/crs.html#pyproj.crs.CRS.get_geod

Hopefully this helps,
Alan


On Fri, Sep 18, 2020, 9:31 PM Mikhail Kruk <meshko at gmail.com> wrote:

> Yes, you are correct, that was one of my first attempts and was wrong
> because I don't really understand these projection systems.
> I now have a better one which sort of works and produces areas in meters
> by setting first system to
> sr.SetWellKnownGeogCS("EPSG:4326")
> Now I am struggling with selecting the projection coordinate system.  Some
> suggested that I use cylindrical projection EPSG:9835 which should
> preserve the area anywhere on the planet but when I try
> sr_proj.ImportFromEPSG(9835)
> I get error:
> PROJ: proj_create_from_database: crs not found
>
>
> On Fri, Sep 18, 2020 at 9:50 PM Michael Patrick <geodesy99 at gmail.com>
> wrote:
>
>> ... but basically I came to the conclusion that when people talk about an
>>> area of something on Earth they really mean the area of a projection (am i
>>> right about that?) and so i need to specify a projection before getting a
>>> meaningful area.  So i ended up with this code:
>>>
>>> wkt = "POLYGON ((lon1 lat1, lon2 lat2, lon3 lat3))"
>>> poly = ogr.CreateGeometryFromWkt(wkt)
>>> sr = osr.SpatialReference()
>>> sr.SetWellKnownGeogCS("NAD83")
>>> sr.SetProjCS("SRS_PT_TRANSVERSE_MERCATOR")
>>> poly.AssignSpatialReference(sr)
>>> poly.GetArea() <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>>
>>> I might be dense, but it seems you are assigning sr as a specific
>> transverse mercator, i.e.  UTM zone 18N, or a custom one centered on the
>> centroid of your polygon. i.e. you don't have sufficient arguments.
>>
>>
>>
>> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=icon> Virus-free.
>> www.avast.com
>> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail&utm_term=link>
>> <#m_-5507655572585127822_m_8065453534991225343_m_-2581199688950320765_m_6579958654730313444_DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200918/6e162ca8/attachment.html>

From pepijn.szeker at tractebel.engie.com  Sat Sep 19 03:49:40 2020
From: pepijn.szeker at tractebel.engie.com (py_qgis_user)
Date: Sat, 19 Sep 2020 03:49:40 -0700 (MST)
Subject: [gdal-dev]  gdal2tiles PDF --config GDAL_PDF_DPI option
Message-ID: <1600512580687-0.post@n6.nabble.com>

I've been looking into the gdal2tiles code (both version 2.4.0 and 3.1.2),
but am quite unfamiliar with the gdal python library. I'm hoping for some
pointers on what I can test/look into to get the results i'm hoping for.

The input is a georeferenced PDF, with it's content being svg/vector instead
of raster. I noticed that using the* --config GDAL_PDF_DPI* option allows
for higher quality tiles at high zoom levels. E.g.:
gdal2tiles -r antialias -a 255 input.pdf test1 --config GDAL_PDF_DPI 600

But when also using the option *--processes=* (any number),  the
GDAL_PDF_DPI is somehow ignored/misinterpreted:
In V2.4.0, the option seems to be ignored, as tiles are created exactly the
same to the output with --config and --processes
In V3.1.2, the output is different, but faulty. It creates tiles according
the new DPI size/resolution, but only the zone of the original DPI
size/resolution contains content (e.g:for a pdf with size 100x100 at default
dpi, at double the DPI it will create tiles for the same georeferenced area
for a PDF at size 200x200, but only the top-left 100x100 contains content,
the other has nodata values)

Any ideas? Preferably in V2.4.0.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Sat Sep 19 06:15:04 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 19 Sep 2020 15:15:04 +0200
Subject: [gdal-dev] gdal2tiles PDF --config GDAL_PDF_DPI option
In-Reply-To: <1600512580687-0.post@n6.nabble.com>
References: <1600512580687-0.post@n6.nabble.com>
Message-ID: <3734933.1iLXDhbtO2@even-i700>

On samedi 19 septembre 2020 03:49:40 CEST py_qgis_user wrote:
> I've been looking into the gdal2tiles code (both version 2.4.0 and 3.1.2),
> but am quite unfamiliar with the gdal python library. I'm hoping for some
> pointers on what I can test/look into to get the results i'm hoping for.
> 
> The input is a georeferenced PDF, with it's content being svg/vector instead
> of raster. I noticed that using the* --config GDAL_PDF_DPI* option allows
> for higher quality tiles at high zoom levels. E.g.:
> gdal2tiles -r antialias -a 255 input.pdf test1 --config GDAL_PDF_DPI 600
> 
> But when also using the option *--processes=* (any number),  the
> GDAL_PDF_DPI is somehow ignored/misinterpreted:
> In V2.4.0, the option seems to be ignored, as tiles are created exactly the
> same to the output with --config and --processes
> In V3.1.2, the output is different, but faulty. It creates tiles according
> the new DPI size/resolution, but only the zone of the original DPI
> size/resolution contains content (e.g:for a pdf with size 100x100 at default
> dpi, at double the DPI it will create tiles for the same georeferenced area
> for a PDF at size 200x200, but only the top-left 100x100 contains content,
> the other has nodata values)
> 
> Any ideas? Preferably in V2.4.0.

See https://github.com/OSGeo/gdal/issues/2950#issuecomment-695211659 for fix and 
workaround

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200919/a45268af/attachment.html>

From mikeflan at att.net  Sat Sep 19 07:08:34 2020
From: mikeflan at att.net (Mike Flannigan)
Date: Sat, 19 Sep 2020 09:08:34 -0500
Subject: [gdal-dev] gdal2tiles PDF --config GDAL_PDF_DPI option
In-Reply-To: <mailman.117229.1600512581.17185.gdal-dev@lists.osgeo.org>
References: <mailman.117229.1600512581.17185.gdal-dev@lists.osgeo.org>
Message-ID: <d4f66d0e-dd2c-6a04-c2de-1f8eb2fab776@att.net>


Obviously I am not an expert here, since gdal2tiles
does not work on my Linux system.

I do:
gdal2tiles -r antialias -a 255 king.pdf test1 --config GDAL_PDF_DPI 600

I get:
gdal2tiles: command not found

I do:
whereis gdal

I get:
gdal: /usr/share/gdal

I look up gdal2tiles on the web and I think I see that
it is part of gdal:
https://gdal.org/programs/gdal2tiles.html

I do:
gdal -v

Surprisingly I get:
Command 'gdal' not found, did you mean: . . .

I do:
gdal_translate -of GTiff -co "COMPRESS=DEFLATE" --config GDAL_PDF_DPI 
300 /home/mike/Documents/copy3/king.pdf /home/mike/Documents/copy3/king.tif
which I have done many times before.

It runs for many minutes and produces the TIF file, but
the TIF file is only 70 kB and does not display an image
when opened.  It only displays a checkerboard palette.


I go to:
/usr/share/gdal/2.2
and I don't see gdal_translate or gdal2tiles.
I do see the files below.


I am confused and I guess I need to study the
workings of the gdal program some more.  If anybody
wants to point me to a page that can help me,
please do.


Mike


2.2
├── compdcs.csv
├── coordinate_axis.csv
├── datum_shift.csv
├── default.rsc
├── ellipsoid.csv
├── epsg.wkt
├── esri_StatePlane_extra.wkt
├── esri_Wisconsin_extra.wkt
├── gcs.csv
├── gcs.override.csv
├── gdal_datum.csv
├── gdalicon.png
├── GDALLogoBW.svg
├── GDALLogoColor.svg
├── GDALLogoGS.svg
├── gdalvrt.xsd
├── geoccs.csv
├── gmlasconf.xml
├── gmlasconf.xsd
├── gml_registry.xml
├── gt_datum.csv
├── gt_ellips.csv
├── header.dxf
├── inspire_cp_BasicPropertyUnit.gfs
├── inspire_cp_CadastralBoundary.gfs
├── inspire_cp_CadastralParcel.gfs
├── inspire_cp_CadastralZoning.gfs
├── jpfgdgml_AdmArea.gfs
├── jpfgdgml_AdmBdry.gfs
├── jpfgdgml_AdmPt.gfs
├── jpfgdgml_BldA.gfs
├── jpfgdgml_BldL.gfs
├── jpfgdgml_Cntr.gfs
├── jpfgdgml_CommBdry.gfs
├── jpfgdgml_CommPt.gfs
├── jpfgdgml_Cstline.gfs
├── jpfgdgml_ElevPt.gfs
├── jpfgdgml_GCP.gfs
├── jpfgdgml_LeveeEdge.gfs
├── jpfgdgml_RailCL.gfs
├── jpfgdgml_RdArea.gfs
├── jpfgdgml_RdASL.gfs
├── jpfgdgml_RdCompt.gfs
├── jpfgdgml_RdEdg.gfs
├── jpfgdgml_RdMgtBdry.gfs
├── jpfgdgml_RdSgmtA.gfs
├── jpfgdgml_RvrMgtBdry.gfs
├── jpfgdgml_SBAPt.gfs
├── jpfgdgml_SBArea.gfs
├── jpfgdgml_SBBdry.gfs
├── jpfgdgml_WA.gfs
├── jpfgdgml_WL.gfs
├── jpfgdgml_WStrA.gfs
├── jpfgdgml_WStrL.gfs
├── netcdf_config.xsd
├── nitf_spec.xml
├── nitf_spec.xsd
├── ogrvrt.xsd
├── osmconf.ini
├── ozi_datum.csv
├── ozi_ellips.csv
├── pci_datum.txt
├── pci_ellips.txt
├── pcs.csv
├── pcs.override.csv
├── plscenesconf.json
├── prime_meridian.csv
├── projop_wparm.csv
├── ruian_vf_ob_v1.gfs
├── ruian_vf_st_uvoh_v1.gfs
├── ruian_vf_st_v1.gfs
├── ruian_vf_v1.gfs
├── s57agencies.csv
├── s57attributes.csv
├── s57expectedinput.csv
├── s57objectclasses.csv
├── seed_2d.dgn
├── seed_3d.dgn
├── stateplane.csv
├── trailer.dxf
├── unit_of_measure.csv
├── vdv452.xml
├── vdv452.xsd
├── vertcs.csv
└── vertcs.override.csv




On 9/19/20 5:49 AM, gdal-dev-request at lists.osgeo.org wrote:
> I've been looking into the gdal2tiles code (both version 2.4.0 and 3.1.2),
> but am quite unfamiliar with the gdal python library. I'm hoping for some
> pointers on what I can test/look into to get the results i'm hoping for.
>
> The input is a georeferenced PDF, with it's content being svg/vector instead
> of raster. I noticed that using the* --config GDAL_PDF_DPI* option allows
> for higher quality tiles at high zoom levels. E.g.:
> gdal2tiles -r antialias -a 255 input.pdf test1 --config GDAL_PDF_DPI 600
>
> But when also using the option *--processes=* (any number),  the
> GDAL_PDF_DPI is somehow ignored/misinterpreted:
> In V2.4.0, the option seems to be ignored, as tiles are created exactly the
> same to the output with --config and --processes
> In V3.1.2, the output is different, but faulty. It creates tiles according
> the new DPI size/resolution, but only the zone of the original DPI
> size/resolution contains content (e.g:for a pdf with size 100x100 at default
> dpi, at double the DPI it will create tiles for the same georeferenced area
> for a PDF at size 200x200, but only the top-left 100x100 contains content,
> the other has nodata values)
>
> Any ideas? Preferably in V2.4.0.


From phigginsca at yahoo.com  Sat Sep 19 12:41:17 2020
From: phigginsca at yahoo.com (Paul Higgins)
Date: Sat, 19 Sep 2020 19:41:17 +0000 (UTC)
Subject: [gdal-dev] org2org select points within a polygon
References: <543887617.4278428.1600544477590.ref@mail.yahoo.com>
Message-ID: <543887617.4278428.1600544477590@mail.yahoo.com>

I want have some points and I want to find out if they are in a polygon.
I have two shape files one defining a polygon and the other two points here are the csv files for  both and the vrt files:
My_Polygon.csv:ID,WKT1,"POLYGON ((1 1, 4 1, 4 3, 1 3, 1 1))"
My_points.csv:ID X Y1 2 22 0 1
My_Polygon.vrt:<OGRVRTDataSource>  <OGRVRTLayer name="My_Polygon"> <SrcDataSource relativeToVRT="1">My_polygon.csv</SrcDataSource> <GeometryType>wkbPolygon</GeometryType> <GeometryField encoding="WKT" field="WKT"/> </OGRVRTLayer></OGRVRTDataSource>
My_Points.vrt:<OGRVRTDataSource>    <OGRVRTLayer name="My_Points"> <SrcDataSource relativeToVRT="1">My_points.csv</SrcDataSource> <GeometryType>wkbPoint</GeometryType> <GeometryField encoding="PointFromColumns" x="X" y="Y"/> </OGRVRTLayer></OGRVRTDataSource>
I created the two shape files with:ogr2ogr -f "ESRI Shapefile" My_Polygon.shp My_Polygon.vrt  
ogr2ogr -f "ESRI Shapefile" My_Points.shp My_Points.vrt  

If I use the following org2org command I can select the polygon that has one of the points and it works fine:
ogr2ogr -f "ESRI Shapefile" selection.shp My_Polygon.shp -dialect sqlite -sql "SELECT polygon.Geometry, polygon.id FROM My_Polygon polygon, 'My_Points.shp'.My_Points point WHERE ST_Contains(polygon.geometry, point.geometry)"

But I want an org2org command that will select which points are in the polygon and can't seem to to do it. I tried:
ogr2ogr -f "ESRI Shapefile" selectpts.shp My_Points.shp -dialect sqlite -sql "SELECT point.Geometry, point.id FROM My_Points, 'My_Polygon.shp'.My_Polygon polygon WHERE ST_Contains(point.Geometry,polygon.geometry)"

But it gets an error:ERROR 1: In ExecuteSQL(): sqlite3_prepare_v2(SELECT point.Geometry, point.id FROM My_Points, "_OGR_1" polygon WHERE ST_Contains(point.Geometry,polygon.geometry)):  no such column: point.Geometry
Can anyone tell me the correct org2org command to select the points within the polygon?  Thanks,



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200919/ba05cac0/attachment.html>

From rajeshreddy82 at gmail.com  Mon Sep 21 02:45:27 2020
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Mon, 21 Sep 2020 02:45:27 -0700 (MST)
Subject: [gdal-dev] How to return an empty MVT tile with
	gdal.VectorTranslate in C++
Message-ID: <1600681527509-0.post@n6.nabble.com>

Developers,

I am using below in C++ GDALVectorTranslate to create MVT files in vsibuf.
In this case, the input file in having zero features, hence it is not
creating tiles in memory.

     dst = (GDALDataset *)GDALVectorTranslate(vsibuf, NULL, 1, &hSrcDS, opt,
NULL);

Whenever we accessing for an mvt file in vsibuf (below line)
example.../18/66027/96262.mvt file, no such file in memory (fp = NULL).

     VSILFILE* fp = VSIFOpenL(vsiMemFilename.c_str(), "rb");

In this scenario, we want to return an empty mvt tile with zero features to
service.

How to get an empty mvt tile file with zero features? or How to create an
empty mvt file with no features using gdal?

Thanks in advance,

Rajesh



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Mon Sep 21 07:47:51 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 21 Sep 2020 16:47:51 +0200
Subject: [gdal-dev] How to return an empty MVT tile with
	gdal.VectorTranslate in C++
In-Reply-To: <1600681527509-0.post@n6.nabble.com>
References: <1600681527509-0.post@n6.nabble.com>
Message-ID: <2181615.U57RqL7B5f@even-i700>

> How to get an empty mvt tile file with zero features? or How to 
create an
> empty mvt file with no features using gdal?

I don't think you can. As it is written, the driver will avoid generating 
empty tiles. You'll have to create them with other tools, or add that 
capability to the driver.

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200921/53e043f3/attachment.html>

From nyall.dawson at gmail.com  Mon Sep 21 19:52:14 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 22 Sep 2020 12:52:14 +1000
Subject: [gdal-dev] Confusion regarding GeoPDF composition.xml units
Message-ID: <CAB28Asg5fneM1FD20UwX2JB6QDPte_SXPbHHFmM0DU+2LH6uYg@mail.gmail.com>

Hi list,

While attempting to fix https://github.com/qgis/QGIS/issues/33465 I'm
running into some confusion about the meaning of pdfCoordinateType
values in GeoPDF composition.xml files.

The example composition.xml from
https://gdal.org/drivers/raster/pdf.html includes:

<Page id="page_1">
        <DPI>72</DPI>
        <Width>10</Width>
        <Height>15</Height>
....

This would suggest to me that the Width and Height (and accordingly
all pdfCoordinateType) values are in inches. But that doesn't match
with the actual behavior I'm seeing, where it seems like Width/Height
and other pdfCoordinateType values need to be specific in pixels (i.e.
size in inches * dpi).

Actually it's a bit more complex than this, because regardless of the
DPI specified for the page, the width/height have to be specified in
size in inches * 72! (i.e. there's a hardcoded 72 dpi assumption
somewhere).

Can anyone clarify exactly how PDF coordinates and sizes should be
calculated in composition.xml?

Thanks!
Nyall

From andreaerdna at libero.it  Mon Sep 21 23:36:25 2020
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Mon, 21 Sep 2020 23:36:25 -0700 (MST)
Subject: [gdal-dev] Confusion regarding GeoPDF composition.xml units
In-Reply-To: <CAB28Asg5fneM1FD20UwX2JB6QDPte_SXPbHHFmM0DU+2LH6uYg@mail.gmail.com>
References: <CAB28Asg5fneM1FD20UwX2JB6QDPte_SXPbHHFmM0DU+2LH6uYg@mail.gmail.com>
Message-ID: <1600756585286-0.post@n6.nabble.com>

Nyall Dawson wrote
> Actually it's a bit more complex than this, because regardless of the
> DPI specified for the page, the width/height have to be specified in
> size in inches * 72! (i.e. there's a hardcoded 72 dpi assumption
> somewhere).

Hi,
I don't know how composition.xml works, but if you wonder why in PDF page
the width/height have to be specified in "size in inches * 72" you will find
a hint in PDF 32000-1:2008 [1] especially at paragraphs 7.7.3.3 Page
Objects, Table 30 and 8.3 Coordinate Systems.

"The length of a unit along both the x and y axes is set by the UserUnit
entry (PDF 1.6) in the page dictionary (see Table 30). If that entry is not
present or supported, the default value of 1⁄72 inch is used. This
coordinate system is called default user space"

"Note 2: The default for the size of the unit in default user space (1⁄72
inch) is approximately the same as a point, a unit widely used in the
printing industry. It is not exactly the same, however; there is no
universal definition of a point."

"UserUnit: A positive number that shall give the size of default user space
units, in multiples of 1⁄72 inch. The range of supported values shall be
implementation-dependent. Default value: 1.0 (user space unit is 1⁄72
inch)."

See also [2] and [3].

Hope this will help.

Best regards.

Andrea Giudiceandrea


[1]
https://www.adobe.com/content/dam/acom/en/devnet/acrobat/pdfs/PDF32000_2008.pdf
[2] https://stackoverflow.com/a/21164534/8779560
[3] https://github.com/qgis/QGIS/issues/33465#issuecomment-644566633



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From nyall.dawson at gmail.com  Mon Sep 21 23:40:42 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 22 Sep 2020 16:40:42 +1000
Subject: [gdal-dev] Confusion regarding GeoPDF composition.xml units
In-Reply-To: <1600756585286-0.post@n6.nabble.com>
References: <CAB28Asg5fneM1FD20UwX2JB6QDPte_SXPbHHFmM0DU+2LH6uYg@mail.gmail.com>
 <1600756585286-0.post@n6.nabble.com>
Message-ID: <CAB28AsjycFKo0sX7w6UJPuE96dVi=HcriN-rfbnV7FrOuMyuAw@mail.gmail.com>

On Tue, 22 Sep 2020 at 16:36, Andrea Giudiceandrea
<andreaerdna at libero.it> wrote:
>
> Nyall Dawson wrote
> > Actually it's a bit more complex than this, because regardless of the
> > DPI specified for the page, the width/height have to be specified in
> > size in inches * 72! (i.e. there's a hardcoded 72 dpi assumption
> > somewhere).
>
> Hi,
> I don't know how composition.xml works, but if you wonder why in PDF page
> the width/height have to be specified in "size in inches * 72" you will find
> a hint in PDF 32000-1:2008 [1] especially at paragraphs 7.7.3.3 Page
> Objects, Table 30 and 8.3 Coordinate Systems.
>
> "The length of a unit along both the x and y axes is set by the UserUnit
> entry (PDF 1.6) in the page dictionary (see Table 30). If that entry is not
> present or supported, the default value of 1⁄72 inch is used. This
> coordinate system is called default user space"
>
> "Note 2: The default for the size of the unit in default user space (1⁄72
> inch) is approximately the same as a point, a unit widely used in the
> printing industry. It is not exactly the same, however; there is no
> universal definition of a point."
>
> "UserUnit: A positive number that shall give the size of default user space
> units, in multiples of 1⁄72 inch. The range of supported values shall be
> implementation-dependent. Default value: 1.0 (user space unit is 1⁄72
> inch)."
>
> See also [2] and [3].

Thanks Andrea!

So then my question would be why the PDFs attached to
https://github.com/qgis/QGIS/issues/33465 are showing incorrect page
sizes in Acrobat Reader, when it appears as though GDAL is correctly
generating them!

Have you any ideas why this could be occurring?

Nyall


>
> Hope this will help.
>
> Best regards.
>
> Andrea Giudiceandrea
>
>
> [1]
> https://www.adobe.com/content/dam/acom/en/devnet/acrobat/pdfs/PDF32000_2008.pdf
> [2] https://stackoverflow.com/a/21164534/8779560
> [3] https://github.com/qgis/QGIS/issues/33465#issuecomment-644566633
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From andreaerdna at libero.it  Tue Sep 22 00:09:39 2020
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Tue, 22 Sep 2020 00:09:39 -0700 (MST)
Subject: [gdal-dev] Confusion regarding GeoPDF composition.xml units
In-Reply-To: <CAB28AsjycFKo0sX7w6UJPuE96dVi=HcriN-rfbnV7FrOuMyuAw@mail.gmail.com>
References: <CAB28Asg5fneM1FD20UwX2JB6QDPte_SXPbHHFmM0DU+2LH6uYg@mail.gmail.com>
 <1600756585286-0.post@n6.nabble.com>
 <CAB28AsjycFKo0sX7w6UJPuE96dVi=HcriN-rfbnV7FrOuMyuAw@mail.gmail.com>
Message-ID: <1600758579610-0.post@n6.nabble.com>

Nyall Dawson wrote
> On Tue, 22 Sep 2020 at 16:36, Andrea Giudiceandrea
> &lt;

> andreaerdna@

> &gt; wrote:
> So then my question would be why the PDFs attached to
> https://github.com/qgis/QGIS/issues/33465 are showing incorrect page
> sizes in Acrobat Reader, when it appears as though GDAL is correctly
> generating them!

>From the analysis of those PDFs I've wrote in a comment of the issue report
[1], it seems to me the problem is that for the two ISO3200_*.PDF (which
have a wrong size) a UserUnit value is present, while it is not present in
the two Legacy_*.PDF (which have a correct size).

The UserUnit key act as a scale factor.

I don't know why, but in GDAL the UserUnit is calculated as DPI / 72.0 and
added by default (for GeoPDFs).

If a UserUnit value is present, the actual PDF page size (defined in the
MediaBox key) will be "scaled up" by the UserUnit value.

So, currently only for GeoPDF generated at 72 DPI the page size is correctly
retained: UserUnit = DPI / 72.0 = 72 / 72 = 1, then no scaling will occur.

I guess the issue could be solved avoiding to record the UserUnit value in
the generated GeoPDF by simply setting the WRITE_USERUNIT creation option
[2] to NO, but the description it's not so clear to me...

"WRITE_USERUNIT=YES/NO: (GDAL >= 2.2) Whether the UserUnit setting computed
from the DPI (UserUnit = DPI / 72.0) should be recorded in the file. When
UserUnit is recorded, the raster size in pixels recognized by GDAL on
reading remains identical to the source raster. When UserUnit is not
recorded, the printed size will depends on the DPI value. If this parameter
is not set, but DPI is specified, then it will default to NO (so that the
printed size depends on the DPI value). If this parameter is not set and DPI
is not specified, then UserUnit will be recorded (so that the raster size in
pixels recognized by GDAL on reading remain identical to the source
raster)."

Regards.

Andrea


[1] https://github.com/qgis/QGIS/issues/33465#issuecomment-644566633
[2] https://gdal.org/drivers/raster/pdf.html#creation-options and
https://github.com/OSGeo/gdal/commit/d411180020e8dcb99e5491a8fa0121b7c108db0d



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Tue Sep 22 03:47:43 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 22 Sep 2020 12:47:43 +0200
Subject: [gdal-dev] Confusion regarding GeoPDF composition.xml units
In-Reply-To: <CAB28Asg5fneM1FD20UwX2JB6QDPte_SXPbHHFmM0DU+2LH6uYg@mail.gmail.com>
References: <CAB28Asg5fneM1FD20UwX2JB6QDPte_SXPbHHFmM0DU+2LH6uYg@mail.gmail.com>
Message-ID: <1748257.WXoyBCl9hk@even-i700>

Nyall,

I don't necessarily have much to add to Andrea's excellent analysis. So the value of <Width> 
and <Height> are interpreted as "width/height in user unit", and written unmodified for the 
MediaBox array.
The <DPI> value is multiplied by 1./72 to set the UserUnit PDF setting. See line 1015 of 
pdfcreatefromcomposition.cpp

The WRITE_USERUNIT creation option is currently used only for the CreateCopy() interface 
of the driver (using a raster as a source), but not in Create() from composition XML. 
If you want to experiment not writing it, it is a matter of disabling line 1127 of 
pdfcreatefromcomposition.cpp, but using <DPI>72</DPI> will cause UserUnit to be set to 1.0, 
which is the default value.

I remember having headaches with those concepts when developing the driver. Perhaps the 
interface is not optimal.
Part of the confusion might also come from specific working in CreateCopy() mode where 
the driver tries to generate a PDF with settings such as when opened by the read side of the 
driver, the reported dimensions in pixels of the PDF match the one of the raster provided to 
CreateCopy(), and the DPI concept makes sense there.
But in Create from composition mode, where the sources are not necessarily raster, the 
equivalence of UserUnit = DPI / 72 might be less relevant.

Even

> 
> While attempting to fix https://github.com/qgis/QGIS/issues/33465 I'm
> running into some confusion about the meaning of pdfCoordinateType
> values in GeoPDF composition.xml files.
> 
> The example composition.xml from
> https://gdal.org/drivers/raster/pdf.html includes:
> 
> <Page id="page_1">
>         <DPI>72</DPI>
>         <Width>10</Width>
>         <Height>15</Height>
> ....
> 
> This would suggest to me that the Width and Height (and accordingly
> all pdfCoordinateType) values are in inches. But that doesn't match
> with the actual behavior I'm seeing, where it seems like Width/Height
> and other pdfCoordinateType values need to be specific in pixels (i.e.
> size in inches * dpi).
> 
> Actually it's a bit more complex than this, because regardless of the
> DPI specified for the page, the width/height have to be specified in
> size in inches * 72! (i.e. there's a hardcoded 72 dpi assumption
> somewhere).
> 
> Can anyone clarify exactly how PDF coordinates and sizes should be
> calculated in composition.xml?
> 
> Thanks!
> Nyall
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200922/445c9cb9/attachment-0001.html>

From nyall.dawson at gmail.com  Wed Sep 23 00:34:43 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 23 Sep 2020 17:34:43 +1000
Subject: [gdal-dev] Confusion regarding GeoPDF composition.xml units
In-Reply-To: <1748257.WXoyBCl9hk@even-i700>
References: <CAB28Asg5fneM1FD20UwX2JB6QDPte_SXPbHHFmM0DU+2LH6uYg@mail.gmail.com>
 <1748257.WXoyBCl9hk@even-i700>
Message-ID: <CAB28AsgqO3KUmPBTKeKw1H_GHX_u+sodmsxPof59cy1Lse919g@mail.gmail.com>

On Tue, 22 Sep 2020 at 20:47, Even Rouault <even.rouault at spatialys.com> wrote:
>
> Nyall,
>
>
>
> I don't necessarily have much to add to Andrea's excellent analysis. So the value of <Width> and <Height> are interpreted as "width/height in user unit", and written unmodified for the MediaBox array.
>
> The <DPI> value is multiplied by 1./72 to set the UserUnit PDF setting. See line 1015 of pdfcreatefromcomposition.cpp
>
>
>
> The WRITE_USERUNIT creation option is currently used only for the CreateCopy() interface of the driver (using a raster as a source), but not in Create() from composition XML.
>
> If you want to experiment not writing it, it is a matter of disabling line 1127 of pdfcreatefromcomposition.cpp, but using <DPI>72</DPI> will cause UserUnit to be set to 1.0, which is the default value.
>
>
>
> I remember having headaches with those concepts when developing the driver. Perhaps the interface is not optimal.
>
> Part of the confusion might also come from specific working in CreateCopy() mode where the driver tries to generate a PDF with settings such as when opened by the read side of the driver, the reported dimensions in pixels of the PDF match the one of the raster provided to CreateCopy(), and the DPI concept makes sense there.
>
> But in Create from composition mode, where the sources are not necessarily raster, the equivalence of UserUnit = DPI / 72 might be less relevant.

Ok thanks! I can confirm that removing the writing of user units fixes
the problem.

PR opened at https://github.com/OSGeo/gdal/pull/2961

Nyall


>
>
>
> Even
>
>
>
> >
>
> > While attempting to fix https://github.com/qgis/QGIS/issues/33465 I'm
>
> > running into some confusion about the meaning of pdfCoordinateType
>
> > values in GeoPDF composition.xml files.
>
> >
>
> > The example composition.xml from
>
> > https://gdal.org/drivers/raster/pdf.html includes:
>
> >
>
> > <Page id="page_1">
>
> > <DPI>72</DPI>
>
> > <Width>10</Width>
>
> > <Height>15</Height>
>
> > ....
>
> >
>
> > This would suggest to me that the Width and Height (and accordingly
>
> > all pdfCoordinateType) values are in inches. But that doesn't match
>
> > with the actual behavior I'm seeing, where it seems like Width/Height
>
> > and other pdfCoordinateType values need to be specific in pixels (i.e.
>
> > size in inches * dpi).
>
> >
>
> > Actually it's a bit more complex than this, because regardless of the
>
> > DPI specified for the page, the width/height have to be specified in
>
> > size in inches * 72! (i.e. there's a hardcoded 72 dpi assumption
>
> > somewhere).
>
> >
>
> > Can anyone clarify exactly how PDF coordinates and sizes should be
>
> > calculated in composition.xml?
>
> >
>
> > Thanks!
>
> > Nyall
>
> > _______________________________________________
>
> > gdal-dev mailing list
>
> > gdal-dev at lists.osgeo.org
>
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com

From maud.ferrato at artal.fr  Wed Sep 23 00:21:05 2020
From: maud.ferrato at artal.fr (Maud Ferrato)
Date: Wed, 23 Sep 2020 07:21:05 +0000
Subject: [gdal-dev] help request about WarpRegionToBuffer
Message-ID: <bb5b0c38ec1c4872baaed706bf07f1e8@artal.fr>

Dear GDAL community

I'm currently working with gdal api C/C++ and I'm facing an issue with gdal warp region to buffer functionality (WarpRegionToBuffer).

When my destination dataset is not strictly contained in the frame of my source dataset, the area where there should be no data values is filled with random data (see out_code.tif enclosed). However gdalwarp command line functionality, which also uses WarpRegionToBuffer function, does not seem to have this problem.

I enclose to my email warp_tiling.cpp a sample of our code

Can you please help us find what is wrong with our use of GDAL C/C++ API  in order to have a similar behaviour as gdalwarp command line? There is probably an algorithm in gdalwarp that computes a mask of useful pixels in destination frame before calling WarpRegionToBuffer, but we didn't find it.
I would really appreciate help on this problem!

Best regards,
Maud FERRATO

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200923/baa7633a/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: warp_tiling.cpp
Type: text/x-c++src
Size: 4240 bytes
Desc: warp_tiling.cpp
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200923/baa7633a/attachment.cpp>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Sep 23 05:04:22 2020
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 23 Sep 2020 05:04:22 -0700 (MST)
Subject: [gdal-dev] Confusion regarding GeoPDF composition.xml units
In-Reply-To: <CAB28AsgqO3KUmPBTKeKw1H_GHX_u+sodmsxPof59cy1Lse919g@mail.gmail.com>
References: <CAB28Asg5fneM1FD20UwX2JB6QDPte_SXPbHHFmM0DU+2LH6uYg@mail.gmail.com>
 <1748257.WXoyBCl9hk@even-i700>
 <CAB28AsgqO3KUmPBTKeKw1H_GHX_u+sodmsxPof59cy1Lse919g@mail.gmail.com>
Message-ID: <1600862662989-0.post@n6.nabble.com>

Hi,

I was remembering that I got involved in user units sometimes and found this
https://trac.osgeo.org/gdal/ticket/5412. Then we considered that PDF is not
valid if user units are not set and if the document is larger than
14400x14400 units. I believe I was playing with orthophoto coverages and
managed to create PDF files that could not be showed with Acrobat but that
was 7 years ago. 

-Jukka Rahkonen-



Nyall Dawson wrote
> Ok thanks! I can confirm that removing the writing of user units fixes
> the problem.
> 
> PR opened at https://github.com/OSGeo/gdal/pull/2961
> 
> Nyall





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From schneider.michal at gmail.com  Wed Sep 23 05:47:56 2020
From: schneider.michal at gmail.com (Michal Schneider)
Date: Wed, 23 Sep 2020 14:47:56 +0200
Subject: [gdal-dev] OGR C++ API to load Esri JSON
Message-ID: <CANBOXvWzj8fhdASibBMizH4m_FKNBBNJT9dF=4xLGAoYXFP7Bg@mail.gmail.com>

 Hello devs,

Is there a OGR C++ API to load Esri JSON into an OGR geometry object, much
like CreateGeometryFromJson?

I see OGR_G_CreateGeometryFromJson in ogr_api.h, but can't see
OGR_G_CreateGeometryFromEsriJson there...

Thanks,
Michal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200923/37f16b5b/attachment.html>

From apschwimmer at apmland.de  Wed Sep 23 06:02:42 2020
From: apschwimmer at apmland.de (APM)
Date: Wed, 23 Sep 2020 15:02:42 +0200
Subject: [gdal-dev] RGB Geotiff with jpeg compress
Message-ID: <745af441-286d-94b9-8362-2a8c6e9643d7@apmland.de>

Dear all,


I like to compress a Geotiff rastermap with compress=jpeg.


gdalinfo for a .vrt which I like to compress:

Coordinate System is:
PROJCRS["ETRS89 / UTM zone 32N",
     BASEGEOGCRS["ETRS89",
         DATUM["European Terrestrial Reference System 1989",
             ELLIPSOID["GRS 1980",6378137,298.257222101,
                 LENGTHUNIT["metre",1]]],

.

.


Band 1 Block=128x128 Type=Byte, ColorInterp=Palette
   Color Table (RGB with 256 entries)
     0: 255,255,255,255
     1: 255,255,255,255
     2: 255,255,255,255
     3: 191,230,230,255
     4: 153,255,179,255
     5: 230,255,204,255
     6: 191,242,128,255

.

.

gdal_translate dtk25.vrt -co COMPRESS=JPEG out.tiff

Input file size is 201600, 198400

0ERROR 1: JPEGSetupEncode:PhotometricInterpretation 3 not allowed for JPEG
ERROR 1: An error occurred while writing a dirty block from 
GDALRasterBand::IRasterIO
ERROR 1: JPEGSetupEncode:PhotometricInterpretation 3 not allowed for JPEG
ERROR 1: JPEGSetupEncode:PhotometricInterpretation 3 not allowed for JPEG


How can I compress this map, please?

Thank you!

KR

Piet


From even.rouault at spatialys.com  Wed Sep 23 06:23:50 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 23 Sep 2020 15:23:50 +0200
Subject: [gdal-dev] RGB Geotiff with jpeg compress
In-Reply-To: <745af441-286d-94b9-8362-2a8c6e9643d7@apmland.de>
References: <745af441-286d-94b9-8362-2a8c6e9643d7@apmland.de>
Message-ID: <4902120.2SJL1IdVp7@even-i700>

On mercredi 23 septembre 2020 15:02:42 CEST APM wrote:
> Dear all,
> 
> 
> I like to compress a Geotiff rastermap with compress=jpeg.
> 
> 
> gdalinfo for a .vrt which I like to compress:
> 
> Coordinate System is:
> PROJCRS["ETRS89 / UTM zone 32N",
>      BASEGEOGCRS["ETRS89",
>          DATUM["European Terrestrial Reference System 1989",
>              ELLIPSOID["GRS 1980",6378137,298.257222101,
>                  LENGTHUNIT["metre",1]]],
> 
> .
> 
> .
> 
> 
> Band 1 Block=128x128 Type=Byte, ColorInterp=Palette
>    Color Table (RGB with 256 entries)
>      0: 255,255,255,255
>      1: 255,255,255,255
>      2: 255,255,255,255
>      3: 191,230,230,255
>      4: 153,255,179,255
>      5: 230,255,204,255
>      6: 191,242,128,255
> 
> .
> 
> .
> 
> gdal_translate dtk25.vrt -co COMPRESS=JPEG out.tiff
> 
> Input file size is 201600, 198400
> 
> 0ERROR 1: JPEGSetupEncode:PhotometricInterpretation 3 not allowed for JPEG
> ERROR 1: An error occurred while writing a dirty block from
> GDALRasterBand::IRasterIO
> ERROR 1: JPEGSetupEncode:PhotometricInterpretation 3 not allowed for JPEG
> ERROR 1: JPEGSetupEncode:PhotometricInterpretation 3 not allowed for JPEG

Color table and JPEG compression don't go together.
You may add "-expand rgb" to your gdal_translate command line to convert from the color 
palette into a RGB image.

Or keep a paletted image but use a lossless compression scheme such as LZW or DEFLATE.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200923/2cd8a9ff/attachment-0001.html>

From mateusz at loskot.net  Wed Sep 23 10:09:46 2020
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 23 Sep 2020 19:09:46 +0200
Subject: [gdal-dev] OGR C++ API to load Esri JSON
In-Reply-To: <CANBOXvWzj8fhdASibBMizH4m_FKNBBNJT9dF=4xLGAoYXFP7Bg@mail.gmail.com>
References: <CANBOXvWzj8fhdASibBMizH4m_FKNBBNJT9dF=4xLGAoYXFP7Bg@mail.gmail.com>
Message-ID: <CABUeae_iUYBLu0ou=RrvtXajiQU+GU-rCwVAHox+yfGH0WyCwg@mail.gmail.com>

On Wed, 23 Sep 2020 at 14:48, Michal Schneider
<schneider.michal at gmail.com> wrote:
>
> I see OGR_G_CreateGeometryFromJson in ogr_api.h,
> but can't see OGR_G_CreateGeometryFromEsriJson there...

https://gdal.org/api/vector_c_api.html#_CPPv432OGR_G_CreateGeometryFromEsriJsonPKc

IOW, in first 10 links from the search result set of
https://gdal.org/search.html?q=ESRI

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From sean at mapbox.com  Wed Sep 23 13:03:05 2020
From: sean at mapbox.com (Sean Gillies)
Date: Wed, 23 Sep 2020 14:03:05 -0600
Subject: [gdal-dev] About the interaction between VRT and VSIMEM
Message-ID: <CADPhZXyCVdDQjmNrVh3qnJS+Cpi+v4S=+VdELxsGAgmnfqeOMQ@mail.gmail.com>

Hi all,

I've written a test for rasterio and the output has me scratching my head.
The gist of it: It creates a VSIMEM file copied from an ordinary GeoTIFF on
my filesystem, calls GDALOpenEx on the VSIMEM file to get a handle, calls
GDALAutoCreateWarpedVRT with that handle to make a warped VRT and then it
deletes the VSIMEM dataset. In Python it looks like

with open("RGB.byte.tif", "rb") as fp:
    data = fp.read()

with MemoryFile(data) as memfile:  # copies the bytes to a
/vsimem/foo/bar.tif file, the exact name isn't important.

    with memfile.open() as rgb:
        vrt = WarpedVRT(rgb, dst_crs="EPSG:3857")  # there are two
GDALDatasetH in the program now, one on /vsimem/foo/bar.tif and one on the
in-memory warped VRT that references the /vsimem file.


    # At this point /vsimem/foo/bar.tif is closed.

# At this point /vsimem/foo/bar.tif is deleted. I've confirmed by calling
VSIReadDirRecursive().

arr = vrt.read()

           # Surprise!

I'm able to read data from the warped VRT after the VSIMEM file it
references has been deleted. I'm not sure how to interpret this. Was the
raster data of /vsimem/foo/bar.tif cached somewhere? Did the GeoTIFF driver
not actually delete the VSIMEM file?

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200923/1f302f76/attachment.html>

From even.rouault at spatialys.com  Wed Sep 23 13:22:01 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 23 Sep 2020 22:22:01 +0200
Subject: [gdal-dev] About the interaction between VRT and VSIMEM
In-Reply-To: <CADPhZXyCVdDQjmNrVh3qnJS+Cpi+v4S=+VdELxsGAgmnfqeOMQ@mail.gmail.com>
References: <CADPhZXyCVdDQjmNrVh3qnJS+Cpi+v4S=+VdELxsGAgmnfqeOMQ@mail.gmail.com>
Message-ID: <1737425.PA5AqcFRTn@even-i700>

Sean,

/vsimem/ tries to honour POSIX file behaviour. That is you can delete a file while it has file 
descriptors opened on it, and the file will actually be destroyed when the last file descriptor 
is closed, but nobody is able to open/list it in the meantime. (by the way, I wouldn't be 
surprised that /vsimem/ would have issues if you recreated a file with the same name. not 
sure what POSIX says about that. but that's not related to your scenario)

In your scenario, the C++ object corresponding to rgb has a VSILFILE* opened on it. And the C
++ object corresponding to vrt keeps the C++ object corresponding to rgb alive, hence this 
works.

Note that this behaviour might not be necessarily be found if using non-warped VRTs, that 
generally do not open the sources until they are really needed (to avoid opening too many 
files at once)

Even

> Hi all,
> 
> I've written a test for rasterio and the output has me scratching my head.
> The gist of it: It creates a VSIMEM file copied from an ordinary GeoTIFF on
> my filesystem, calls GDALOpenEx on the VSIMEM file to get a handle, calls
> GDALAutoCreateWarpedVRT with that handle to make a warped VRT and then it
> deletes the VSIMEM dataset. In Python it looks like
> 
> with open("RGB.byte.tif", "rb") as fp:
>     data = fp.read()
> 
> with MemoryFile(data) as memfile:  # copies the bytes to a
> /vsimem/foo/bar.tif file, the exact name isn't important.
> 
>     with memfile.open() as rgb:
>         vrt = WarpedVRT(rgb, dst_crs="EPSG:3857")  # there are two
> GDALDatasetH in the program now, one on /vsimem/foo/bar.tif and one on the
> in-memory warped VRT that references the /vsimem file.
> 
> 
>     # At this point /vsimem/foo/bar.tif is closed.
> 
> # At this point /vsimem/foo/bar.tif is deleted. I've confirmed by calling
> VSIReadDirRecursive().
> 
> arr = vrt.read()
> 
>            # Surprise!
> 
> I'm able to read data from the warped VRT after the VSIMEM file it
> references has been deleted. I'm not sure how to interpret this. Was the
> raster data of /vsimem/foo/bar.tif cached somewhere? Did the GeoTIFF driver
> not actually delete the VSIMEM file?


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200923/86f3b52e/attachment.html>

From even.rouault at spatialys.com  Wed Sep 23 14:33:57 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 23 Sep 2020 23:33:57 +0200
Subject: [gdal-dev] About the interaction between VRT and VSIMEM
In-Reply-To: <1737425.PA5AqcFRTn@even-i700>
References: <CADPhZXyCVdDQjmNrVh3qnJS+Cpi+v4S=+VdELxsGAgmnfqeOMQ@mail.gmail.com>
 <1737425.PA5AqcFRTn@even-i700>
Message-ID: <1630805.MxxOLibQfB@even-i700>

> In your scenario, the C++ object corresponding to rgb has a VSILFILE* opened
> on it. And the C ++ object corresponding to vrt keeps the C++ object
> corresponding to rgb alive, hence this works.

I assume your question was triggered by
https://github.com/mapbox/rasterio/issues/2000
which is I believe completely unrelated to /vsimem/

My above statement about lifetime of objects must be altered a bit.
GDALAutoCreateWarpedVRT() must be used carefully regarding lifetime of the source 
dataset

Long story short, you can do:

hSrcDS = GDALOpen(...) # non shared mode . refcount = 1
hVRTDS = GDALAutoCreateWarpedVRT(hSrcDS, ...) # refcount(hSrcDS) = 2
GDALClose(hVRTDS) # drop the extra ref to hSrcDS ==> #refcount(hSrcDS) = 1 (but do not 
close it)
GDALClose(hSrcDS) # you must close src after hVRTDS. if you close it before hVRTDS, then 
hVRTDS might try to close it again

or 

hSrcDS = GDALOpenShared(...) # shared mode (full ref counting enabled). refcount(hSrcDS) = 
1
hVRTDS = GDALAutoCreateWarpedVRT(hSrcDS, ...)  # refcount(hSrcDS) = 2
# you can switch the order of the 2 close calls
GDALClose(hVRTDS) # refCount(hSrcDS) = 1
GDALClose(hSrcDS) # refCount(hSrcDS) = 0 -> really destroyed here

The reason is that in non shared mode GDALClose() ignores ref counting and always deletes 
the dataset. Historical behaviour

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200923/3b20d799/attachment-0001.html>

From schneider.michal at gmail.com  Thu Sep 24 00:59:28 2020
From: schneider.michal at gmail.com (Michal Schneider)
Date: Thu, 24 Sep 2020 09:59:28 +0200
Subject: [gdal-dev] OGR C++ API to load Esri JSON
In-Reply-To: <CABUeae_iUYBLu0ou=RrvtXajiQU+GU-rCwVAHox+yfGH0WyCwg@mail.gmail.com>
References: <CANBOXvWzj8fhdASibBMizH4m_FKNBBNJT9dF=4xLGAoYXFP7Bg@mail.gmail.com>
 <CABUeae_iUYBLu0ou=RrvtXajiQU+GU-rCwVAHox+yfGH0WyCwg@mail.gmail.com>
Message-ID: <CANBOXvUvCsiBVsN64FBpc=corpqm40kQan4j7PciGNq9tangYg@mail.gmail.com>

Hi Mateusz,

thank you for your response and for your time.

I found it in documentation, but I can't see
OGR_G_CreateGeometryFromEsriJson definition in *ogr_api.h* (version 3.0.4,
installed using OSGeo4W).

Something like this, but for OGR_G_CreateGeometryFromEsriJson:

OGRGeometryH CPL_DLL OGR_G_CreateGeometryFromJson( const char* )
CPL_WARN_UNUSED_RESULT;

Best regards,
Michal

On Wed, Sep 23, 2020 at 7:08 PM Mateusz Loskot <mateusz at loskot.net> wrote:

> On Wed, 23 Sep 2020 at 14:48, Michal Schneider
> <schneider.michal at gmail.com> wrote:
> >
> > I see OGR_G_CreateGeometryFromJson in ogr_api.h,
> > but can't see OGR_G_CreateGeometryFromEsriJson there...
>
>
> https://gdal.org/api/vector_c_api.html#_CPPv432OGR_G_CreateGeometryFromEsriJsonPKc
>
> IOW, in first 10 links from the search result set of
> https://gdal.org/search.html?q=ESRI
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200924/e0bcd049/attachment.html>

From even.rouault at spatialys.com  Thu Sep 24 01:32:16 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 24 Sep 2020 10:32:16 +0200
Subject: [gdal-dev] OGR C++ API to load Esri JSON
In-Reply-To: <CANBOXvUvCsiBVsN64FBpc=corpqm40kQan4j7PciGNq9tangYg@mail.gmail.com>
References: <CANBOXvWzj8fhdASibBMizH4m_FKNBBNJT9dF=4xLGAoYXFP7Bg@mail.gmail.com>
 <CABUeae_iUYBLu0ou=RrvtXajiQU+GU-rCwVAHox+yfGH0WyCwg@mail.gmail.com>
 <CANBOXvUvCsiBVsN64FBpc=corpqm40kQan4j7PciGNq9tangYg@mail.gmail.com>
Message-ID: <2194552.nR13SIrKPg@even-i700>

On jeudi 24 septembre 2020 09:59:28 CEST Michal Schneider wrote:
> Hi Mateusz,
> 
> thank you for your response and for your time.
> 
> I found it in documentation, but I can't see
> OGR_G_CreateGeometryFromEsriJson definition in *ogr_api.h* (version 3.0.4,
> installed using OSGeo4W).

It has been added in GDAL 3.1
You can use the gdal-dev package from OSGeo4W to get it

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200924/d18569b0/attachment.html>

From schneider.michal at gmail.com  Thu Sep 24 02:14:44 2020
From: schneider.michal at gmail.com (Michal Schneider)
Date: Thu, 24 Sep 2020 11:14:44 +0200
Subject: [gdal-dev] OGR C++ API to load Esri JSON
In-Reply-To: <2194552.nR13SIrKPg@even-i700>
References: <CANBOXvWzj8fhdASibBMizH4m_FKNBBNJT9dF=4xLGAoYXFP7Bg@mail.gmail.com>
 <CABUeae_iUYBLu0ou=RrvtXajiQU+GU-rCwVAHox+yfGH0WyCwg@mail.gmail.com>
 <CANBOXvUvCsiBVsN64FBpc=corpqm40kQan4j7PciGNq9tangYg@mail.gmail.com>
 <2194552.nR13SIrKPg@even-i700>
Message-ID: <CANBOXvV0Jb7pmrvZe5a2Re76VqXg8hY5OMUCs4yBjjmCWVsoLA@mail.gmail.com>

Hi Even,

thanks a lot, I will check it.

Best regards,
Michal

On Thu, Sep 24, 2020 at 10:32 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> On jeudi 24 septembre 2020 09:59:28 CEST Michal Schneider wrote:
>
> > Hi Mateusz,
>
> >
>
> > thank you for your response and for your time.
>
> >
>
> > I found it in documentation, but I can't see
>
> > OGR_G_CreateGeometryFromEsriJson definition in *ogr_api.h* (version
> 3.0.4,
>
> > installed using OSGeo4W).
>
>
>
> It has been added in GDAL 3.1
>
> You can use the gdal-dev package from OSGeo4W to get it
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200924/91149d20/attachment.html>

From apschwimmer at apmland.de  Thu Sep 24 09:56:07 2020
From: apschwimmer at apmland.de (APM)
Date: Thu, 24 Sep 2020 18:56:07 +0200
Subject: [gdal-dev] What to archiv when using gdal_translate -co TILED=YES
Message-ID: <fc6160f7-2ad9-5709-5884-26fb8ce25fc1@apmland.de>

Dear all,


I want to create a geotiff which has 2GB size at the end.

Further I used the option -co TILED=YES and the compression LZW.

Unfortunately a program breaks after opening the map.

Qgis need some time, but show the map.

What does Tiled=YES?

Should it "break" the file in 'handsome" segments to make it loadable in 
the pc ram similar to tiles in web services?

Make it sense to add a block size?


Can I change the file to another tif format and compress it with jpeg?


gdalinfo for a .vrt which I like to compress:


Coordinate System is:
PROJCRS["ETRS89 / UTM zone 32N",
     BASEGEOGCRS["ETRS89",
         DATUM["European Terrestrial Reference System 1989",
             ELLIPSOID["GRS 1980",6378137,298.257222101,
                 LENGTHUNIT["metre",1]]],

.

.


Band 1 Block=128x128 Type=Byte, ColorInterp=Palette
   Color Table (RGB with 256 entries)
     0: 255,255,255,255
     1: 255,255,255,255
     2: 255,255,255,255
     3: 191,230,230,255
     4: 153,255,179,255
     5: 230,255,204,255
     6: 191,242,128,255

.

Thank you very much for your help!


Kind regard


Piet


From j1 at jimenezshaw.com  Thu Sep 24 11:17:07 2020
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 24 Sep 2020 20:17:07 +0200
Subject: [gdal-dev] What to archiv when using gdal_translate -co
	TILED=YES
In-Reply-To: <fc6160f7-2ad9-5709-5884-26fb8ce25fc1@apmland.de>
References: <fc6160f7-2ad9-5709-5884-26fb8ce25fc1@apmland.de>
Message-ID: <CADRrdKtmz1cCQ7Hii0M-dLWUDrMAHvfUTSWD6LzCXkM9DDkpNA@mail.gmail.com>

If you use "TILED=YES" without Overviews it may take a long time to open in
QGIS.
When QGIS shows you the global view without Overviews, it downsamples the
image to fit in the screen. However, when tiled, it is very likely that it
has to read every single tile from disk.

The best solution is to compute the overviews (in the same file or in a
.ovr sidecar)... or do not use the "TILED" option.

Cheers,
Javier
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Thu, 24 Sep 2020 at 18:56, APM <apschwimmer at apmland.de> wrote:

> Dear all,
>
>
> I want to create a geotiff which has 2GB size at the end.
>
> Further I used the option -co TILED=YES and the compression LZW.
>
> Unfortunately a program breaks after opening the map.
>
> Qgis need some time, but show the map.
>
> What does Tiled=YES?
>
> Should it "break" the file in 'handsome" segments to make it loadable in
> the pc ram similar to tiles in web services?
>
> Make it sense to add a block size?
>
>
> Can I change the file to another tif format and compress it with jpeg?
>
>
> gdalinfo for a .vrt which I like to compress:
>
>
> Coordinate System is:
> PROJCRS["ETRS89 / UTM zone 32N",
>      BASEGEOGCRS["ETRS89",
>          DATUM["European Terrestrial Reference System 1989",
>              ELLIPSOID["GRS 1980",6378137,298.257222101,
>                  LENGTHUNIT["metre",1]]],
>
> .
>
> .
>
>
> Band 1 Block=128x128 Type=Byte, ColorInterp=Palette
>    Color Table (RGB with 256 entries)
>      0: 255,255,255,255
>      1: 255,255,255,255
>      2: 255,255,255,255
>      3: 191,230,230,255
>      4: 153,255,179,255
>      5: 230,255,204,255
>      6: 191,242,128,255
>
> .
>
> Thank you very much for your help!
>
>
> Kind regard
>
>
> Piet
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200924/8f14c780/attachment-0001.html>

From phigginsca at yahoo.com  Thu Sep 24 12:36:42 2020
From: phigginsca at yahoo.com (Paul Higgins)
Date: Thu, 24 Sep 2020 19:36:42 +0000 (UTC)
Subject: [gdal-dev] ogr2ogr fails on second call with sql select
References: <234860621.460933.1600976202829.ref@mail.yahoo.com>
Message-ID: <234860621.460933.1600976202829@mail.yahoo.com>

I have created a dll of C++ GDAL functions callable from a REX (OOREXX). It has functions like  gdal_translate, gdalinfo, Rgb2Pct and a few others. 
Recently I got into using shapefiles so I added a ogr2ogr  function modeled on the C:\release-1911-gdal-2-4-1-mapserver-7-2-2-src\gdal\apps\ogr2ogr_bin.cpp  program
This new function works fine except if I make two calls that have a select statement in it like:
sql = "SELECT * FROM My_Points point" options = ' -f "ESRI Shapefile" -dialect sqlite -sql ""'sql'""' rc = ogr2ogr(input_file,output_file,options,0,diagmsgs)  -- <<  first call worksrc = ogr2ogr(input_file,output_file,options,0,diagmsgs)  -- << second call causes a crash

The first call works but the second call fails when the function calls  GDALVectorTranslate.  it never returns and the program crashes.  It doesn't matter what output driver I use or if the input_file and output_file are different.
Does anyone have any idea why the second call would fail or have an example of an ogr2ogr cpp program that works.
Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200924/0c60a20e/attachment.html>

From Jon.Morris at jbarisk.com  Fri Sep 25 09:34:52 2020
From: Jon.Morris at jbarisk.com (Jon Morris)
Date: Fri, 25 Sep 2020 16:34:52 +0000
Subject: [gdal-dev] gdalbuildvrt cannot specify srcnodata for multiple bands
Message-ID: <LO2P123MB193303FB1815E52B8271E3C782360@LO2P123MB1933.GBRP123.PROD.OUTLOOK.COM>

I'm trying to build a vrt and specify multiple source nodata values. It's the same problem with both gdalbuildvrt on the commandline and calling gdal.BuildVRTOptions programmatically. Looking at the doc and at the code, it seems that the srcNodata value needs to be a string of space separated values, e.g. "1 2 3". When I examine the created VRT, the nodata value for each band is 1. It's taken the first value and ignored the other two.

Am I doing this right? I'm still using GDAL 2.2.0, so apologies if this has been fixed in a more recent version.

Thanks,

Jon

Jon Morris
Software Developer

COVID-19. During the current outbreak JBA remains open for business and we continue to deliver our services. However, we have adopted flexible/remote working as required. I will be receiving and reading email as normal but I may not always be available on the office number.


[JBA COVID-19 statement]<https://www.jbagroup.co.uk/sites/www.jbagroup.co.uk/files/documents/15-030%20JBA%20Business%20Continuity%20Briefing%20-%20Latest.pdf>

T +44 (0) 1756 799919
www.jbarisk.com<http://www.jbarisk.com>

[Visit our website]<http://www.jbarisk.com> [http://www.jbagroup.co.uk/imgstore/JBA-Email-Sig-Icons-LINKEDIN.png] <https://www.linkedin.com/in/jon-morris-a2897b4/>  [Follow us on Twitter] <https://twitter.com/jbarisk>

Find out more about us here: www.jbarisk.com<http://www.jbarisk.com/> and follow us on Twitter @JBARisk<http://twitter.com/JBARisk> and LinkedIn<https://www.linkedin.com/company/2370847?trk=tyah&trkInfo=clickedVertical%3Acompany%2CclickedEntityId%3A2370847%2Cidx%3A2-1-2%2CtarId%3A1447414259786%2Ctas%3AJBA%20RISK%20MANAGEMENT>

The JBA Group supports the JBA Trust.

All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system.


JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, Telephone: +441756799919


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200925/5f83c012/attachment.html>

From phigginsca at yahoo.com  Fri Sep 25 20:55:59 2020
From: phigginsca at yahoo.com (Paul Higgins)
Date: Sat, 26 Sep 2020 03:55:59 +0000 (UTC)
Subject: [gdal-dev] ogr2ogr fails on second call with sql select (Paul
	Higgins)
In-Reply-To: <mailman.5.1601060401.11105.gdal-dev@lists.osgeo.org>
References: <mailman.5.1601060401.11105.gdal-dev@lists.osgeo.org>
Message-ID: <317679387.989976.1601092559719@mail.yahoo.com>

 I found that the only way around this is to make each call,  that has a SELECT in it,  to my ogr2ogr function in a separate thread.  If there are no SELECTs in the calls then I can make them all in one thread.
   
  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200926/fa549af6/attachment.html>

From phigginsca at yahoo.com  Sat Sep 26 19:50:39 2020
From: phigginsca at yahoo.com (Paul Higgins)
Date: Sun, 27 Sep 2020 02:50:39 +0000 (UTC)
Subject: [gdal-dev] ogr2ogr fails on second call with sql select
In-Reply-To: <mailman.3.1601146801.8762.gdal-dev@lists.osgeo.org>
References: <mailman.3.1601146801.8762.gdal-dev@lists.osgeo.org>
Message-ID: <1617879825.1196534.1601175039562@mail.yahoo.com>

 I was mistaken the call fails the second time when the dialect is sqlite whether its issued in one thread or multiple.  
The call work OK when the dialect is the default OGRSQL even when both calls are made in one thread.
So there must be something extra that should be done for dialect sqlite.
    On Sunday, September 27, 2020, 03:00:07 a.m. GMT+8, gdal-dev-request at lists.osgeo.org <gdal-dev-request at lists.osgeo.org> wrote:  
 
 Send gdal-dev mailing list submissions to
    gdal-dev at lists.osgeo.org

To subscribe or unsubscribe via the World Wide Web, visit
    https://lists.osgeo.org/mailman/listinfo/gdal-dev
or, via email, send a message with subject or body 'help' to
    gdal-dev-request at lists.osgeo.org

You can reach the person managing the list at
    gdal-dev-owner at lists.osgeo.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of gdal-dev digest..."


Today's Topics:

  1. Re: ogr2ogr fails on second call with sql select (Paul
      Higgins) (Paul Higgins)


----------------------------------------------------------------------

Message: 1
Date: Sat, 26 Sep 2020 03:55:59 +0000 (UTC)
From: Paul Higgins <phigginsca at yahoo.com>
To: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] ogr2ogr fails on second call with sql select
    (Paul    Higgins)
Message-ID: <317679387.989976.1601092559719 at mail.yahoo.com>
Content-Type: text/plain; charset="utf-8"

 I found that the only way around this is to make each call,  that has a SELECT in it,  to my ogr2ogr function in a separate thread.  If there are no SELECTs in the calls then I can make them all in one thread.
  
  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200926/fa549af6/attachment-0001.html>

------------------------------

Subject: Digest Footer

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

------------------------------

End of gdal-dev Digest, Vol 196, Issue 39
*****************************************
  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200927/9d1afec3/attachment.html>

From i.g.mestule at gmail.com  Mon Sep 28 00:15:52 2020
From: i.g.mestule at gmail.com (Ivars Grinbergs)
Date: Mon, 28 Sep 2020 10:15:52 +0300
Subject: [gdal-dev] OZI Raster Driver - new ozf4 file format support
Message-ID: <CAP3xRcXzhtwRFVt8R=rU+knUSvk81X0sJjXwOORZGj_nRU4rbA@mail.gmail.com>

Hi,
Img2Ozf utility program since version 3.17 produces OZF4 format files.

Since then, when I try to convert my calibrated map, I get an error message
like "ERROR 4: `somefile.ozf4' not recognised as a supported file format.".

Conversion of calibrated map ultimately results in the following command
line call (I am using Windows 10):

gdal_translate.exe -of GTiff --config GDAL_DATA "c:\path\to\gdal\gdal-data"
-co compress=lzw -co BIGTIFF=IF_SAFER "input-file.ozf4" "output-file.tif"

So I understand that OZF2/OZFX3 file formats are different from OZF4 and
GDAL raster driver does not support it.

But are there any ideas, thoughts or discussions on this new format? I
wonder that there is little or no information, especially in the context of
GDAL, about this new Ozi format (at least I cannot find one).

Thanks in advance

Ivars
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200928/80ab4a0e/attachment.html>

From julien.osman at csgroup.eu  Mon Sep 28 05:10:51 2020
From: julien.osman at csgroup.eu (Julien Osman)
Date: Mon, 28 Sep 2020 14:10:51 +0200
Subject: [gdal-dev] Using GDALRPCTransform with a pre-loaded DEM
Message-ID: <4ce7f348-d2ed-a52c-c445-d4bdcabc6e57@csgroup.eu>

Dear GDAL community,

I use the RPC transformer available in GDAL (GDALCreateRPCTransformer
and GDALRPCTransform).

To provide a DEM to the transformer, one needs to set the option
"RPC_DEM" with the path to the DEM file. In my workflow, this is not
very convenient because the DEM is already loaded in memory as a
GDALDataset. This means that I need to write it to the disk and let
GDALCreateRPCTransformer load it again. In my opinion, it would make
sens to open a little the API so one can provide the DEM directly as a
GDALDataset.

If this is OK for you, I can implement this functionality and propose a
Pull Request. The solution I see would be to add a function
GDALRPCAddDEM, similar to GDALRPCOpenDEM without the part opening the
GDALDataset. What do you think?

Best regards.
Julien Osman.


From warmerdam at pobox.com  Mon Sep 28 05:53:22 2020
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 28 Sep 2020 08:53:22 -0400
Subject: [gdal-dev] Using GDALRPCTransform with a pre-loaded DEM
In-Reply-To: <4ce7f348-d2ed-a52c-c445-d4bdcabc6e57@csgroup.eu>
References: <4ce7f348-d2ed-a52c-c445-d4bdcabc6e57@csgroup.eu>
Message-ID: <CA+YzLBemS-Sp7GzLOdv7WUgN+hCVzKDxBcStkedkzrO6FLK2iw@mail.gmail.com>

Julien,

The least disruptive approach to this would be for you to store your DEM in
a "memory dataset" and reference that.  I've done this in the past when I
had it in a numpy array by using the numpy driver.  The "MEM" dataset can
be used to reference approximately arbitrary in-memory arrays.

Best regards,
Frank


On Mon, Sep 28, 2020 at 8:21 AM Julien Osman <julien.osman at csgroup.eu>
wrote:

> Dear GDAL community,
>
> I use the RPC transformer available in GDAL (GDALCreateRPCTransformer
> and GDALRPCTransform).
>
> To provide a DEM to the transformer, one needs to set the option
> "RPC_DEM" with the path to the DEM file. In my workflow, this is not
> very convenient because the DEM is already loaded in memory as a
> GDALDataset. This means that I need to write it to the disk and let
> GDALCreateRPCTransformer load it again. In my opinion, it would make
> sens to open a little the API so one can provide the DEM directly as a
> GDALDataset.
>
> If this is OK for you, I can implement this functionality and propose a
> Pull Request. The solution I see would be to add a function
> GDALRPCAddDEM, similar to GDALRPCOpenDEM without the part opening the
> GDALDataset. What do you think?
>
> Best regards.
> Julien Osman.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200928/3586548e/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Sep 28 11:22:16 2020
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Mon, 28 Sep 2020 11:22:16 -0700 (MST)
Subject: [gdal-dev] OZI Raster Driver - new ozf4 file format support
In-Reply-To: <CAP3xRcXzhtwRFVt8R=rU+knUSvk81X0sJjXwOORZGj_nRU4rbA@mail.gmail.com>
References: <CAP3xRcXzhtwRFVt8R=rU+knUSvk81X0sJjXwOORZGj_nRU4rbA@mail.gmail.com>
Message-ID: <1601317336605-0.post@n6.nabble.com>

Hi,

As far as I know the ozf format has never been open but fundamentally it is
rather simple. Version 3 introduced encryption but it was also simple and
reverse engineered soon
https://www.globalmapperforum.com/uploads/attachments/3/1298.txt. Since that
the author of Ozi Explorer made ozf4 version that has stronger encryption.
Developers business model is to sell licenses.

-Jukka Rahkonen-




Ivars Grinbergs wrote
> Hi,
> Img2Ozf utility program since version 3.17 produces OZF4 format files.
> 
> Since then, when I try to convert my calibrated map, I get an error
> message
> like "ERROR 4: `somefile.ozf4' not recognised as a supported file
> format.".
> 
> Conversion of calibrated map ultimately results in the following command
> line call (I am using Windows 10):
> 
> gdal_translate.exe -of GTiff --config GDAL_DATA
> "c:\path\to\gdal\gdal-data"
> -co compress=lzw -co BIGTIFF=IF_SAFER "input-file.ozf4" "output-file.tif"
> 
> So I understand that OZF2/OZFX3 file formats are different from OZF4 and
> GDAL raster driver does not support it.
> 
> But are there any ideas, thoughts or discussions on this new format? I
> wonder that there is little or no information, especially in the context
> of
> GDAL, about this new Ozi format (at least I cannot find one).
> 
> Thanks in advance
> 
> Ivars
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From lclark at genasys.com  Tue Sep 29 00:26:08 2020
From: lclark at genasys.com (Lewis Clark)
Date: Tue, 29 Sep 2020 07:26:08 +0000
Subject: [gdal-dev] Elasticsearch arrays
In-Reply-To: <MN2PR20MB326473B3C7472B1DF1E3D6F6DA320@MN2PR20MB3264.namprd20.prod.outlook.com>
References: <MN2PR20MB326473B3C7472B1DF1E3D6F6DA320@MN2PR20MB3264.namprd20.prod.outlook.com>
Message-ID: <MN2PR20MB326469FB5BA27D6605F603B5DA320@MN2PR20MB3264.namprd20.prod.outlook.com>

In my Elasticsearch index I have an array of locations that I can't seem to access with OGR.

In the following example I can see my geopoint "lkl" but not "locations.geometry".
Anything I'm missing here?

{
   "_index":"targets",
   "_type":"_doc",
   "_id":"uVIWaHQBsLn3fGwYUuv-",
   "_version":7,
   "_score":1,
   "_source":{
      "number":"123456778",
      "email":"xxx at yyy.com<mailto:xxx at yyy.com>",
      "lkl":"-37.81288283067835,144.96384429905447",
      "locations":[
         {
            "name":"Home",
            "geometry":"-37.81288283067835,144.96384429905447",
            "id":1,
         },
         {
            "name":"Work",
            "geometry":"-37.96492031820528,144.7073221201426",
            "id":2,
         }
      ],

      "id":"uVIWaHQBsLn3fGwYUuv-"
   }
}

ogrinfo  ES:http://localhost:9200 -sql 'select * from targets'

OGRFeature(targets):1
  _id (String) = uVIWaHQBsLn3fGwYUuv-
  email (String) = xxx at yyy.com<mailto:xxx at yyy.com>
  number (String) = 123456778
 lkl = POINT (144.963844299054 -37.8128828306783)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200929/370c34ea/attachment.html>

From tglewis1993 at gmail.com  Tue Sep 29 06:52:32 2020
From: tglewis1993 at gmail.com (Tom Lewis)
Date: Tue, 29 Sep 2020 14:52:32 +0100
Subject: [gdal-dev] Getting geometry fields through the c# wrapper
Message-ID: <CAAxK3stSJbvX3+hnuM24PT_pwhAG=e+MXfAMjTE65FxmzQNbDw@mail.gmail.com>

 Hi,

I am trying to get the geometry fields through the GDAL.OGR c# wrapper.

I need to loop through and print every field (with name) on every geometry
in a feature. I am looking for the QUAPOS field in the geometry (if
applicable) but am unsure which combination of definitions and functions to
use, as GeomFieldDef names always seem to return blank.

What I tried was:

Use feature.GetGeomFieldCount to set up a loop between 0 -> fieldCount.
For each iteration, use the loop index with feature.GetGeomFieldRefnDef()
to get the GeomFieldDefn instance (which was not null).
With this GeomFieldDefn use the GetNameRef (also tried just GetName)
function to get the fields name. (Not sure how to get the value of the
field in this method, but the return was always blank so it wouldn't matter
I suspect. I tried with the fields SpatialRef, but that didn't work.)

I am probably just woefully misunderstanding the documentation and
apologies if this is a simple question, but I have had no luck finding any
answers through the search engines for this.

Thank you!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200929/0ef499aa/attachment.html>

From jgr at osgeopt.pt  Tue Sep 29 15:10:13 2020
From: jgr at osgeopt.pt (Jorge Gustavo Rocha)
Date: Tue, 29 Sep 2020 23:10:13 +0100
Subject: [gdal-dev] how to completely remove gdal from Ubuntu 20.04 and
 install from scratch
In-Reply-To: <MW2PR16MB2172B23F704ABEF73084962CAD460@MW2PR16MB2172.namprd16.prod.outlook.com>
References: <MW2PR16MB2172B23F704ABEF73084962CAD460@MW2PR16MB2172.namprd16.prod.outlook.com>
Message-ID: <4b3b73b6-0fbe-dca8-a0b4-15f56e8d0576@osgeopt.pt>

Hi,

I had the same problem. I've update my laptop to 20.04 and I need to
rebuild proj and gdal.

I've removed all old gdal packages and I've cleaned up /usr/local/lib,
to ensure that no previous gdal libraries are around.

But I missed an old libproj package! You have to make ensure that you
also clean up former libproj packages.

sudo apt purge libproj15

Gerald, please try:

ldd /usr/local/bin/ogrinfo

In my case, there were two libproj on the output

jgr at zoe:~/dev/cpp/gdal/gdal$ ldd /usr/local/bin/ogrinfo
	(...)
	libproj.so.19 => /usr/local/lib/libproj.so.19 (0x00007fa94f129000)
	(...)
	libproj.so.15 => /usr/lib/x86_64-linux-gnu/libproj.so.15
(0x00007fa94df36000)
	
Good luck,

Jorge Gustavo

On 08/08/20 01:35, Gerald Nelson wrote:
>  
> 
> I have both a mac and a linux box with Ubuntu 20.04. gdal on the mac is
> installed through home brew. gdal on the linux box has been installed
> both from source with the usual configure, make, make install and with
> sudo apt-get install gdal-bin. Both completed successfully and sudo
> apt-get install gdal-bin returned GDAL 3.1.2, released 2020/07/07.
> 
> When I attempt to install or upgrade sf, rgdal, or terra I get similar
> error messages. They come after
> 
> ** testing if installed package can be loaded from temporary location
> 
> The messages are
> 
> free(): invalid size
> 
> Aborted (core dumped).
> 
>  
> 
> Another thread suggested that there should not be multiple versions of
> gdal on a machine. I didn’t intend for there to be but I had GDAL 3.0.7
> originally on the linux box before installing GDAL3.1.2 so it is
> possible that there may be bits of the older version around.
> 
>  
> 
> I can’t find any good directions for how to do a deep clean, or for that
> matter to install gdal on Ubuntu 20.04 so I was hoping to get some
> directions here.
> 
>  
> 
> Gerald C. Nelson
> 
> Professor Emeritus, UIUC
> 
> +1 217-390-7888 (cell)
> 
> +1 970-639-2079 (land line)
> 
> Skype: jerrynelson
> 
> http://bit.ly/1arho7d
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

-- 
OSGeo Portugal
NIF: 509588190
email: geral at osgeopt.pt
https://www.osgeopt.pt/

Próximo evento: SASIG 2017, 20 a 22 de novembro, Porto
Mais informações: http://osgeopt.pt/sasig2017/

From andreaerdna at libero.it  Tue Sep 29 17:17:03 2020
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Tue, 29 Sep 2020 17:17:03 -0700 (MST)
Subject: [gdal-dev] OGR fails to open a VRT layer with a remote data source
 if VSI_CACHE=TRUE
Message-ID: <1601425023260-0.post@n6.nabble.com>

Hi all,
searching for the source of a QGIS issue
https://github.com/qgis/QGIS/issues/35016, after testing various QGIS and
GDAL version on Windows and Ubuntu Linux, I found that OGR fails to open a
VRT layer file, with a remote data source (a csv file) hosted on data.world
server, if VSI_CACHE is set to TRUE.

The QGIS issue was spotted on Windows since the OSGeo4W QGIS installer sets
by default VSI_CACHE=TRUE and VSI_CACHE_SIZE=1000000: it seems these
settings were introduced 7 years ago [1] to workaround a reported OGR
performance issue [2] about shapefile reading over network on Windows.

A test VRT file is available at
https://raw.githubusercontent.com/agiudiceandrea/TEST_CSV/master/covid19-regioni_dw.vrt

On both Windows (7 / 10 with GDAL/OGR 3.0.4 - 3.2.0dev) and Ubuntu Linux
(20.04 / 18.04 with GDAL/OGR 3.0.4 - 2.2.3)

if VSI_CACHE is not set or set to FALSE

ogrinfo covid19-regioni_dw.vrt jgsghstpphjhicstradhy5kpjwrnfy -summary

outputs

INFO: Open of `covid19-regioni_dw.vrt'
      using driver `OGR_VRT' successful.
Warning 6: Unknown type : data
...
Layer name: jgsghstpphjhicstradhy5kpjwrnfy
Geometry: Point
Feature Count: 30069
Extent: (0.000000, 0.000000) - (18.171897, 46.499335)
Layer SRS WKT:
GEOGCRS["WGS 84",
    DATUM["World Geodetic System 1984",
        ELLIPSOID["WGS 84",6378137,298.257223563,
            LENGTHUNIT["metre",1]]],
    PRIMEM["Greenwich",0,
        ANGLEUNIT["degree",0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS["geodetic latitude (Lat)",north,
            ORDER[1],
            ANGLEUNIT["degree",0.0174532925199433]],
        AXIS["geodetic longitude (Lon)",east,
            ORDER[2],
            ANGLEUNIT["degree",0.0174532925199433]],
    ID["EPSG",4326]]
Data axis to CRS axis mapping: 2,1
denominazione_regione: String (0.0)

and QGIS can properly display the layer

while if VSI_CACHE is set to TRUE

ogrinfo covid19-regioni_dw.vrt jgsghstpphjhicstradhy5kpjwrnfy -summary

outputs

INFO: Open of `covid19-regioni_dw.vrt'
      using driver `OGR_VRT' successful.
ERROR 1: Failed to open datasource
`CSV:/vsicurl_streaming/https://query.data.world/s/jgsghstpphjhicstradhy5kpjwrnfy'.

Layer name: jgsghstpphjhicstradhy5kpjwrnfy
Geometry: None
Feature Count: 0
Layer SRS WKT:
(unknown)

and QGIS cannot display the layer.


Could the issue be caused by a server misconfiguration or not suitable for
this kind of use, or should it be fixed in GDAL/OGR?

Do you think the VSI_CACHE=TRUE 7 years old workaround setting is really
still required on Windows (OSGeo4W), since in the meantime GDAL/OGR may have
been improved in shapefile reading over network?


If it could help, I can provide further analysis on HTTPS traffic and QGIS
debug log during the connection attempts.


Best regards.

Andrea Giudiceandrea


[1]
https://github.com/qgis/QGIS/commit/9222f152b30948a3a9d9f66dffd162548022f7fd

[2]
https://lists.osgeo.org/pipermail/gdal-dev/2013-April/036077.html
https://issues.qgis.org/issues/6448 |
https://github.com/qgis/QGIS/issues/15688



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From dhyfb at foxmail.com  Wed Sep 30 01:00:51 2020
From: dhyfb at foxmail.com (=?ISO-8859-1?B?WWFuZw==?=)
Date: Wed, 30 Sep 2020 16:00:51 +0800
Subject: [gdal-dev] Clip feature while query from .gdb using OpenFileGDB
	driver
Message-ID: <tencent_ADF661E7452430979EBA40CE6A0E1066FD07@qq.com>

I am using OpenFileGDB driver to read .gdb data through the java binding,core codes:


&nbsp; &nbsp; &nbsp; &nbsp; Layer layer = dataSource.GetLayer("layer_name");
&nbsp; &nbsp; &nbsp; &nbsp; layer.SetSpatialFilterRect(minx,miny,maxx,maxy);
&nbsp; &nbsp; &nbsp; &nbsp; System.out.println(layer.GetFeatureCount());
&nbsp; &nbsp; &nbsp; &nbsp; layer.ResetReading();
&nbsp; &nbsp; &nbsp; &nbsp; Feature feature = layer.GetNextFeature();
&nbsp; &nbsp; &nbsp; &nbsp; while (feature != null) {
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; feature = layer.GetNextFeature();
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //
&nbsp; &nbsp; &nbsp; &nbsp; }



Now for a given feature I want to get the intersection geometry from the bounding box (the same as that used in the spatial filter), when using PostGIS, I can do that by


select ST_Intersect(geom,bbox) as clipped_geom from xx where geom &amp;&amp; bbox.


So when using OpenFileGDB:


1 Can it do the intersection during the querying?


2 If not, does it mean I have to do the clip in java by myself? Does gdal provide some api?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200930/e762c9af/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Sep 30 04:31:33 2020
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 30 Sep 2020 04:31:33 -0700 (MST)
Subject: [gdal-dev] Clip feature while query from .gdb using OpenFileGDB
 driver
In-Reply-To: <tencent_ADF661E7452430979EBA40CE6A0E1066FD07@qq.com>
References: <tencent_ADF661E7452430979EBA40CE6A0E1066FD07@qq.com>
Message-ID: <1601465493238-0.post@n6.nabble.com>

Hi,


You can use gdal.VectorTranslate with the same options that ogr2ogr utility
supports https://gdal.org/programs/ogr2ogr.html. That includes -clipsrc
[xmin ymin xmax ymax]|WKT|datasource|spat_extent
"Clip geometries to the specified bounding box (expressed in source SRS),
WKT geometry (POLYGON or MULTIPOLYGON), from a datasource or to the spatial
extent of the -spa.. option if you use the spat_extent keyword. When
specifying a datasource, you will generally want to use it in combination of
the -clipsrclayer, -clipsrcwhere or -clipsrcsql options".

In addition, with the SQLite dialect
https://gdal.org/user/sql_sqlite_dialect.html you can do for any datasource
almost anything that is possible with the SpatiaLite functions
http://www.gaia-gis.it/gaia-sins/spatialite-sql-latest.html, including
ST_Intersection http://www.gaia-gis.it/gaia-sins/spatialite-sql-latest.html.

-Jukka Rahkonen-



Yang wrote
> I am using OpenFileGDB driver to read .gdb data through the java
> binding,core codes:
> 
> 
> &nbsp; &nbsp; &nbsp; &nbsp; Layer layer =
> dataSource.GetLayer("layer_name");
> &nbsp; &nbsp; &nbsp; &nbsp;
> layer.SetSpatialFilterRect(minx,miny,maxx,maxy);
> &nbsp; &nbsp; &nbsp; &nbsp; System.out.println(layer.GetFeatureCount());
> &nbsp; &nbsp; &nbsp; &nbsp; layer.ResetReading();
> &nbsp; &nbsp; &nbsp; &nbsp; Feature feature = layer.GetNextFeature();
> &nbsp; &nbsp; &nbsp; &nbsp; while (feature != null) {
> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; feature =
> layer.GetNextFeature();
> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //
> &nbsp; &nbsp; &nbsp; &nbsp; }
> 
> 
> 
> Now for a given feature I want to get the intersection geometry from the
> bounding box (the same as that used in the spatial filter), when using
> PostGIS, I can do that by
> 
> 
> select ST_Intersect(geom,bbox) as clipped_geom from xx where geom
> &amp;&amp; bbox.
> 
> 
> So when using OpenFileGDB:
> 
> 
> 1 Can it do the intersection during the querying?
> 
> 
> 2 If not, does it mean I have to do the clip in java by myself? Does gdal
> provide some api?
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From matthysk at gmail.com  Wed Sep 30 05:18:51 2020
From: matthysk at gmail.com (Matthys Kroon)
Date: Wed, 30 Sep 2020 14:18:51 +0200
Subject: [gdal-dev] Failing to include libgdal.so on Fedora 32
Message-ID: <CAMtJH+tvDqV1dgJE=t9hJU=UbgsbH9jirJQn17-QQKrp4W_tYQ@mail.gmail.com>

Hi,

I'm trying to build "sf" package in R on Fedora 32 but it fails to
configure gdal. The error output is below:

It seems to be some issue referring to a postgres lib? I have libpq-devel
installed.

I googled for hours and I'm still stuck. Please let me know what other
information I can provide to help troubleshoot.

/usr/bin/ld /usr/lib64/libgdal.so
ld: warning: cannot find entry symbol _start; not setting start address
ld: /usr/lib64/libgdal.so: undefined reference to `PQcmdStatus at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQfname at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to
`PQsetNoticeProcessor at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQftable at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQstatus at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQftablecol at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQconnectdb at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to
`PQescapeStringConn at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `lo_close at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQputCopyEnd at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQgetvalue at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQgetisnull at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQftype at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQfmod at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `lo_creat at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQresultStatus at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `lo_read at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQexec at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to
`PQsetClientEncoding at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQgetlength at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQputCopyData at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQgetResult at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `lo_write at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQfinish at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQclear at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQerrorMessage at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQnfields at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `lo_open at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQexecParams at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to `PQntuples at RHPG_9.6'
ld: /usr/lib64/libgdal.so: undefined reference to
`PQresultErrorMessage at RHPG_9.6'

Thanks for any help.

Regards,

Matthys
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200930/b80a54d0/attachment.html>

From andrew at aitchison.me.uk  Wed Sep 30 05:38:34 2020
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Wed, 30 Sep 2020 13:38:34 +0100 (BST)
Subject: [gdal-dev] Failing to include libgdal.so on Fedora 32
In-Reply-To: <CAMtJH+tvDqV1dgJE=t9hJU=UbgsbH9jirJQn17-QQKrp4W_tYQ@mail.gmail.com>
References: <CAMtJH+tvDqV1dgJE=t9hJU=UbgsbH9jirJQn17-QQKrp4W_tYQ@mail.gmail.com>
Message-ID: <alpine.DEB.2.23.453.2009301331380.309926@warden.aitchison.me.uk>

On Wed, 30 Sep 2020, Matthys Kroon wrote:

> Hi,
>
> I'm trying to build "sf" package in R on Fedora 32 but it fails to
> configure gdal. The error output is below:
>
> It seems to be some issue referring to a postgres lib? I have libpq-devel
> installed.
>
> I googled for hours and I'm still stuck. Please let me know what other
> information I can provide to help troubleshoot.
>
> /usr/bin/ld /usr/lib64/libgdal.so
> ld: warning: cannot find entry symbol _start; not setting start address
> ld: /usr/lib64/libgdal.so: undefined reference to `PQcmdStatus at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `PQfname at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to
> `PQsetNoticeProcessor at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `PQftable at RHPG_9.6'

On RHEL6 /usr/lib64/libpq.so.5.2 is in the package "postgresql-libs";
on Ubuntu20.04 /usr/lib/x86_64-linux-gnu/libpq.so.5.12 is in the package 
"libpq5". The dev/devel packages have libpq.so as a symbolic link to
these numbered .so libraries, so I guess you need a non-devel package
like libpq or libpq5.

> ld: /usr/lib64/libgdal.so: undefined reference to `PQstatus at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `PQftablecol at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `PQconnectdb at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to
> `PQescapeStringConn at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `lo_close at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `PQputCopyEnd at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `PQgetvalue at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `PQgetisnull at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `PQftype at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `PQfmod at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `lo_creat at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `PQresultStatus at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `lo_read at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `PQexec at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to
> `PQsetClientEncoding at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `PQgetlength at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `PQputCopyData at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `PQgetResult at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `lo_write at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `PQfinish at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `PQclear at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `PQerrorMessage at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `PQnfields at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `lo_open at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `PQexecParams at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to `PQntuples at RHPG_9.6'
> ld: /usr/lib64/libgdal.so: undefined reference to
> `PQresultErrorMessage at RHPG_9.6'
>
> Thanks for any help.
>
> Regards,
>
> Matthys
>

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From matthysk at gmail.com  Wed Sep 30 06:30:48 2020
From: matthysk at gmail.com (Matthys Kroon)
Date: Wed, 30 Sep 2020 15:30:48 +0200
Subject: [gdal-dev] Failing to include libgdal.so on Fedora 32
In-Reply-To: <alpine.DEB.2.23.453.2009301331380.309926@warden.aitchison.me.uk>
References: <CAMtJH+tvDqV1dgJE=t9hJU=UbgsbH9jirJQn17-QQKrp4W_tYQ@mail.gmail.com>
 <alpine.DEB.2.23.453.2009301331380.309926@warden.aitchison.me.uk>
Message-ID: <CAMtJH+vPo0ej+dOSy77H-C3LZjONyTRJ56xqMxyiYNDy7-7WVw@mail.gmail.com>

Thanks for your help.

I do seem to have the file. I have libpq and libpq5 packages installed.

/usr/lib64#ls -alh libpq.so*
lrwxrwxrwx. 1 root root   13 Aug 20 14:42 libpq.so -> libpq.so.5.12
lrwxrwxrwx. 1 root root   13 Aug 20 14:42 libpq.so.5 -> libpq.so.5.12
-rwxr-xr-x. 1 root root 1.3M Aug 20 14:42 libpq.so.5.12


I think it has something to do with the postgres version. All those
references have "@RHPG_9.6" which I assume references postgres 9.6. I also
have postgres 11 and 12 installed on the system (was developing postgres
apps in my previous job). I think somehow I have a later version of libpq
installed.

I'm going to try and verify that I have the correct version installed.


On Wed, Sep 30, 2020 at 2:38 PM Andrew C Aitchison <andrew at aitchison.me.uk>
wrote:

> On Wed, 30 Sep 2020, Matthys Kroon wrote:
>
> > Hi,
> >
> > I'm trying to build "sf" package in R on Fedora 32 but it fails to
> > configure gdal. The error output is below:
> >
> > It seems to be some issue referring to a postgres lib? I have libpq-devel
> > installed.
> >
> > I googled for hours and I'm still stuck. Please let me know what other
> > information I can provide to help troubleshoot.
> >
> > /usr/bin/ld /usr/lib64/libgdal.so
> > ld: warning: cannot find entry symbol _start; not setting start address
> > ld: /usr/lib64/libgdal.so: undefined reference to `PQcmdStatus at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to `PQfname at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to
> > `PQsetNoticeProcessor at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to `PQftable at RHPG_9.6'
>
> On RHEL6 /usr/lib64/libpq.so.5.2 is in the package "postgresql-libs";
> on Ubuntu20.04 /usr/lib/x86_64-linux-gnu/libpq.so.5.12 is in the package
> "libpq5". The dev/devel packages have libpq.so as a symbolic link to
> these numbered .so libraries, so I guess you need a non-devel package
> like libpq or libpq5.
>
> > ld: /usr/lib64/libgdal.so: undefined reference to `PQstatus at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to `PQftablecol at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to `PQconnectdb at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to
> > `PQescapeStringConn at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to `lo_close at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to `PQputCopyEnd at RHPG_9.6
> '
> > ld: /usr/lib64/libgdal.so: undefined reference to `PQgetvalue at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to `PQgetisnull at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to `PQftype at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to `PQfmod at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to `lo_creat at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to
> `PQresultStatus at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to `lo_read at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to `PQexec at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to
> > `PQsetClientEncoding at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to `PQgetlength at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to `PQputCopyData at RHPG_9.6
> '
> > ld: /usr/lib64/libgdal.so: undefined reference to `PQgetResult at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to `lo_write at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to `PQfinish at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to `PQclear at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to
> `PQerrorMessage at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to `PQnfields at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to `lo_open at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to `PQexecParams at RHPG_9.6
> '
> > ld: /usr/lib64/libgdal.so: undefined reference to `PQntuples at RHPG_9.6'
> > ld: /usr/lib64/libgdal.so: undefined reference to
> > `PQresultErrorMessage at RHPG_9.6'
> >
> > Thanks for any help.
> >
> > Regards,
> >
> > Matthys
> >
>
> --
> Andrew C. Aitchison                                     Kendal, UK
>                         andrew at aitchison.me.uk
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200930/4d667071/attachment.html>

From aborruso at gmail.com  Wed Sep 30 06:56:40 2020
From: aborruso at gmail.com (aborruso)
Date: Wed, 30 Sep 2020 06:56:40 -0700 (MST)
Subject: [gdal-dev] How does it work FEATURE_SERVER_PAGING?
Message-ID: <1601474200522-0.post@n6.nabble.com>

Hi,
when I try to download some data from the below GeoServices REST server, I
have always 1000 items, also if I set FEATURE_SERVER_PAGING to YES.

The command I use is:

ogr2ogr out.geojson -f GEOJson
"http://sifweb.regione.sicilia.it/arcgis/rest/services/SIF_INCENDI_EXTENDED/MapServer/13/query?where=objectid>0&outfields=*&f=geojson"
file -oo FEATURE_SERVER_PAGING="YES"

If I open it in QGIS, it scrolls through results and I have all the items.

Is there no direct way to do it in GDAL/OGR?

I know I can build a 1000 steps for loop, but probably there is something
wrong in my command or something that I do now know.

Thank you



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From stefan.oechslin at bfh.ch  Wed Sep 30 06:59:03 2020
From: stefan.oechslin at bfh.ch (Oechslin Stefan Maximilian)
Date: Wed, 30 Sep 2020 13:59:03 +0000
Subject: [gdal-dev] gdal_translate  multiplies bands
In-Reply-To: <2ea187fdcf4846269e23c4aeaecf2f3a@bfh.ch>
References: <2ea187fdcf4846269e23c4aeaecf2f3a@bfh.ch>
Message-ID: <6f790157803f4ff99c7d67d6b92be2dd@bfh.ch>

Hi

I try to use gdal_translate in my windows command prompt to convert a single band .tif raster to a single band .gpkg.

gdal_translate -of GPKG example.tif example.gpkg

I always get a .gpkg with four bands and the nodata pixels get changed to a value of 255.
I tried all possible combinations of the following commands with no succes:

-band
-mask
-expand

Do you have any idea what I am missing?

Thanks
Stefan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200930/56bc0eb4/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Sep 30 07:18:09 2020
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 30 Sep 2020 07:18:09 -0700 (MST)
Subject: [gdal-dev] How does it work FEATURE_SERVER_PAGING?
In-Reply-To: <1601474200522-0.post@n6.nabble.com>
References: <1601474200522-0.post@n6.nabble.com>
Message-ID: <1601475489037-0.post@n6.nabble.com>

Hi,

I get more features with your command. I tested with GDAL 3.2.0dev

Layer name: out
Geometry: Polygon
Feature Count: 1319

Word "file" in your command is remaining from some copy-paste, I guess.
Using either FEATURE_SERVER_PAGING="YES" or FEATURE_SERVER_PAGING=YES did
not have an effect. Perhaps something truncates your command before the open
option.

-Jukka Rahkonen-



aborruso wrote
> Hi,
> when I try to download some data from the below GeoServices REST server, I
> have always 1000 items, also if I set FEATURE_SERVER_PAGING to YES.
> 
> The command I use is:
> 
> ogr2ogr out.geojson -f GEOJson
> "http://sifweb.regione.sicilia.it/arcgis/rest/services/SIF_INCENDI_EXTENDED/MapServer/13/query?where=objectid>0&outfields=*&f=geojson"
> file -oo FEATURE_SERVER_PAGING="YES"
> 
> If I open it in QGIS, it scrolls through results and I have all the items.
> 
> Is there no direct way to do it in GDAL/OGR?
> 
> I know I can build a 1000 steps for loop, but probably there is something
> wrong in my command or something that I do now know.
> 
> Thank you
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Wed Sep 30 07:24:06 2020
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 30 Sep 2020 07:24:06 -0700 (MST)
Subject: [gdal-dev] gdal_translate  multiplies bands
In-Reply-To: <6f790157803f4ff99c7d67d6b92be2dd@bfh.ch>
References: <6f790157803f4ff99c7d67d6b92be2dd@bfh.ch>
Message-ID: <1601475846938-0.post@n6.nabble.com>

Hi,

Perhaps it is just about how you open your GeoPackage. See
https://gdal.org/drivers/raster/gpkg.html:

"Opening options

By default, the driver will expose a GeoPackage dataset as a four band
(Red,Green, Blue,Alpha) dataset, which gives the maximum compatibility with
the various encodings of tiles that can be stored. It is possible to specify
an explicit number of bands with the BAND_COUNT opening option."

-Jukka Rahkonen-


Oechslin Stefan Maximilian wrote
> Hi
> 
> I try to use gdal_translate in my windows command prompt to convert a
> single band .tif raster to a single band .gpkg.
> 
> gdal_translate -of GPKG example.tif example.gpkg
> 
> I always get a .gpkg with four bands and the nodata pixels get changed to
> a value of 255.
> I tried all possible combinations of the following commands with no
> succes:
> 
> -band
> -mask
> -expand
> 
> Do you have any idea what I am missing?
> 
> Thanks
> Stefan
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From nick.peihl at gmail.com  Wed Sep 30 07:56:27 2020
From: nick.peihl at gmail.com (nick.peihl at gmail.com)
Date: Wed, 30 Sep 2020 07:56:27 -0700
Subject: [gdal-dev] Elasticsearch arrays
In-Reply-To: <MN2PR20MB326469FB5BA27D6605F603B5DA320@MN2PR20MB3264.namprd20.prod.outlook.com>
References: <MN2PR20MB326469FB5BA27D6605F603B5DA320@MN2PR20MB3264.namprd20.prod.outlook.com>
Message-ID: <A7560FA7-180F-4AC8-9941-CD8F750D582E@gmail.com>

Hi Lewis, I’m guessing the Elasticsearch driver does not handle nested geopoints. I suggest opening an issue on the GDAL GitHub repo. 

> On Sep 29, 2020, at 12:26 AM, Lewis Clark <lclark at genasys.com> wrote:
> 
> ﻿
> In my Elasticsearch index I have an array of locations that I can’t seem to access with OGR.
>  
> In the following example I can see my geopoint “lkl” but not “locations.geometry”.
> Anything I’m missing here?
>  
> {
>    "_index":"targets",
>    "_type":"_doc",
>    "_id":"uVIWaHQBsLn3fGwYUuv-",
>    "_version":7,
>    "_score":1,
>    "_source":{
>       "number":"123456778",
>       "email":"xxx at yyy.com",
>       "lkl":"-37.81288283067835,144.96384429905447",
>       "locations":[
>          {
>             "name":"Home",
>             "geometry":"-37.81288283067835,144.96384429905447",
>             "id":1,
>          },
>          {
>             "name":"Work",
>             "geometry":"-37.96492031820528,144.7073221201426",
>             "id":2,
>          }
>       ],
>  
>       "id":"uVIWaHQBsLn3fGwYUuv-"
>    }
> }
>  
> ogrinfo  ES:http://localhost:9200 -sql 'select * from targets'
>  
> OGRFeature(targets):1
>   _id (String) = uVIWaHQBsLn3fGwYUuv-
>   email (String) = xxx at yyy.com
>   number (String) = 123456778
>  lkl = POINT (144.963844299054 -37.8128828306783)
>  
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20200930/7c6895a0/attachment-0001.html>

From aborruso at gmail.com  Wed Sep 30 09:21:24 2020
From: aborruso at gmail.com (aborruso)
Date: Wed, 30 Sep 2020 09:21:24 -0700 (MST)
Subject: [gdal-dev] How does it work FEATURE_SERVER_PAGING?
In-Reply-To: <1601475489037-0.post@n6.nabble.com>
References: <1601474200522-0.post@n6.nabble.com>
 <1601475489037-0.post@n6.nabble.com>
Message-ID: <1601482884513-0.post@n6.nabble.com>

Hi,
below my debug output.

I have GDAL 2.4.4, released 2020/01/08. FEATURE_SERVER_PAGING is not
compliant with this version?
If yes, there is no note about it in the documentation.

Thank you





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Wed Sep 30 14:07:01 2020
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 30 Sep 2020 14:07:01 -0700 (MST)
Subject: [gdal-dev] How does it work FEATURE_SERVER_PAGING?
In-Reply-To: <1601482884513-0.post@n6.nabble.com>
References: <1601474200522-0.post@n6.nabble.com>
 <1601475489037-0.post@n6.nabble.com> <1601482884513-0.post@n6.nabble.com>
Message-ID: <1601500021654-0.post@n6.nabble.com>

Hi,

Works for me also with GDAL 2.4.4 from gisinternals.com

C:\ohjelmat\gdal_244>ogrinfo -al -so out.geojson
INFO: Open of `out.geojson'
      using driver `GeoJSON' successful.

Layer name: out
Geometry: Polygon
Feature Count: 1319

Debug:

HTTP:
Fetch(http://sifweb.regione.sicilia.it/arcgis/rest/services/SIF_INCENDI_EXTENDED/MapServer/13/query?where=objectid>0&outfields=*&f=geojson)
HTTP: libcurl/7.37.1 OpenSSL/1.0.1h zlib/1.2.3
HTTP: These HTTP headers were set: Accept: text/plain, application/json
GDAL:
GDALOpen(http://sifweb.regione.sicilia.it/arcgis/rest/services/SIF_INCENDI_EXTENDED/MapServer/13/query?where=objectid>0&outfields=*&f=geojson,
this=05A5BF70) succeeds as GeoJSON.
GDAL: GDALDriver::Create(GeoJSON,out.geojson,0,0,0,Unknown,00000000)
HTTP:
Fetch(http://sifweb.regione.sicilia.it/arcgis/rest/services/SIF_INCENDI_EXTENDED/MapServer/13/query?where=objectid>0&outfields=*&f=geojson&resultRecordCount=1000&resultOffset=1000)
HTTP: These HTTP headers were set: Accept: text/plain, application/json
Mem: 1000 features read on layer 'OGRGeoJSON'.
GDALVectorTranslate: 1319 features written in layer 'OGRGeoJSON'
Mem: 319 features read on layer 'OGRGeoJSON'.
GDAL:
GDALClose(http://sifweb.regione.sicilia.it/arcgis/rest/services/SIF_INCENDI_EXTENDED/MapServer/13/query?where=objectid>0&outfields=*&f=geojson,
this=05A5BF70)
GDAL: GDALClose(out.geojson, this=059E1398)

-Jukka Rahkonen-


aborruso wrote
> Hi,
> below my debug output.
> 
> I have GDAL 2.4.4, released 2020/01/08. FEATURE_SERVER_PAGING is not
> compliant with this version?
> If yes, there is no note about it in the documentation.
> 
> Thank you
> 
> 
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From matthysk at gmail.com  Wed Sep 30 23:52:28 2020
From: matthysk at gmail.com (Matthys Kroon)
Date: Thu, 1 Oct 2020 08:52:28 +0200
Subject: [gdal-dev] Failing to include libgdal.so on Fedora 32
In-Reply-To: <CAMtJH+vPo0ej+dOSy77H-C3LZjONyTRJ56xqMxyiYNDy7-7WVw@mail.gmail.com>
References: <CAMtJH+tvDqV1dgJE=t9hJU=UbgsbH9jirJQn17-QQKrp4W_tYQ@mail.gmail.com>
 <alpine.DEB.2.23.453.2009301331380.309926@warden.aitchison.me.uk>
 <CAMtJH+vPo0ej+dOSy77H-C3LZjONyTRJ56xqMxyiYNDy7-7WVw@mail.gmail.com>
Message-ID: <CAMtJH+ti_V2tVBkbiMnJaWDSct-ZA24V+pJ9VDhcMQjcTUWf5w@mail.gmail.com>

I got it to work by first removing all versions of postgres from my system
and then installing the gdal and gdal-dev packages.

I think somehow, somewhere there was a symlink pointing to the wrong
version of a lib.


On Wed, Sep 30, 2020 at 3:30 PM Matthys Kroon <matthysk at gmail.com> wrote:

> Thanks for your help.
>
> I do seem to have the file. I have libpq and libpq5 packages installed.
>
> /usr/lib64#ls -alh libpq.so*
> lrwxrwxrwx. 1 root root   13 Aug 20 14:42 libpq.so -> libpq.so.5.12
> lrwxrwxrwx. 1 root root   13 Aug 20 14:42 libpq.so.5 -> libpq.so.5.12
> -rwxr-xr-x. 1 root root 1.3M Aug 20 14:42 libpq.so.5.12
>
>
> I think it has something to do with the postgres version. All those
> references have "@RHPG_9.6" which I assume references postgres 9.6. I
> also have postgres 11 and 12 installed on the system (was developing
> postgres apps in my previous job). I think somehow I have a later version
> of libpq installed.
>
> I'm going to try and verify that I have the correct version installed.
>
>
> On Wed, Sep 30, 2020 at 2:38 PM Andrew C Aitchison <andrew at aitchison.me.uk>
> wrote:
>
>> On Wed, 30 Sep 2020, Matthys Kroon wrote:
>>
>> > Hi,
>> >
>> > I'm trying to build "sf" package in R on Fedora 32 but it fails to
>> > configure gdal. The error output is below:
>> >
>> > It seems to be some issue referring to a postgres lib? I have
>> libpq-devel
>> > installed.
>> >
>> > I googled for hours and I'm still stuck. Please let me know what other
>> > information I can provide to help troubleshoot.
>> >
>> > /usr/bin/ld /usr/lib64/libgdal.so
>> > ld: warning: cannot find entry symbol _start; not setting start address
>> > ld: /usr/lib64/libgdal.so: undefined reference to `PQcmdStatus at RHPG_9.6
>> '
>> > ld: /usr/lib64/libgdal.so: undefined reference to `PQfname at RHPG_9.6'
>> > ld: /usr/lib64/libgdal.so: undefined reference to
>> > `PQsetNoticeProcessor at RHPG_9.6'
>> > ld: /usr/lib64/libgdal.so: undefined reference to `PQftable at RHPG_9.6'
>>
>> On RHEL6 /usr/lib64/libpq.so.5.2 is in the package "postgresql-libs";
>> on Ubuntu20.04 /usr/lib/x86_64-linux-gnu/libpq.so.5.12 is in the package
>> "libpq5". The dev/devel packages have libpq.so as a symbolic link to
>> these numbered .so libraries, so I guess you need a non-devel package
>> like libpq or libpq5.
>>
>> > ld: /usr/lib64/libgdal.so: undefined reference to `PQstatus at RHPG_9.6'
>> > ld: /usr/lib64/libgdal.so: undefined reference to `PQftablecol at RHPG_9.6
>> '
>> > ld: /usr/lib64/libgdal.so: undefined reference to `PQconnectdb at RHPG_9.6
>> '
>> > ld: /usr/lib64/libgdal.so: undefined reference to
>> > `PQescapeStringConn at RHPG_9.6'
>> > ld: /usr/lib64/libgdal.so: undefined reference to `lo_close at RHPG_9.6'
>> > ld: /usr/lib64/libgdal.so: undefined reference to `PQputCopyEnd at RHPG_9.6
>> '
>> > ld: /usr/lib64/libgdal.so: undefined reference to `PQgetvalue at RHPG_9.6'
>> > ld: /usr/lib64/libgdal.so: undefined reference to `PQgetisnull at RHPG_9.6
>> '
>> > ld: /usr/lib64/libgdal.so: undefined reference to `PQftype at RHPG_9.6'
>> > ld: /usr/lib64/libgdal.so: undefined reference to `PQfmod at RHPG_9.6'
>> > ld: /usr/lib64/libgdal.so: undefined reference to `lo_creat at RHPG_9.6'
>> > ld: /usr/lib64/libgdal.so: undefined reference to
>> `PQresultStatus at RHPG_9.6'
>> > ld: /usr/lib64/libgdal.so: undefined reference to `lo_read at RHPG_9.6'
>> > ld: /usr/lib64/libgdal.so: undefined reference to `PQexec at RHPG_9.6'
>> > ld: /usr/lib64/libgdal.so: undefined reference to
>> > `PQsetClientEncoding at RHPG_9.6'
>> > ld: /usr/lib64/libgdal.so: undefined reference to `PQgetlength at RHPG_9.6
>> '
>> > ld: /usr/lib64/libgdal.so: undefined reference to
>> `PQputCopyData at RHPG_9.6'
>> > ld: /usr/lib64/libgdal.so: undefined reference to `PQgetResult at RHPG_9.6
>> '
>> > ld: /usr/lib64/libgdal.so: undefined reference to `lo_write at RHPG_9.6'
>> > ld: /usr/lib64/libgdal.so: undefined reference to `PQfinish at RHPG_9.6'
>> > ld: /usr/lib64/libgdal.so: undefined reference to `PQclear at RHPG_9.6'
>> > ld: /usr/lib64/libgdal.so: undefined reference to
>> `PQerrorMessage at RHPG_9.6'
>> > ld: /usr/lib64/libgdal.so: undefined reference to `PQnfields at RHPG_9.6'
>> > ld: /usr/lib64/libgdal.so: undefined reference to `lo_open at RHPG_9.6'
>> > ld: /usr/lib64/libgdal.so: undefined reference to `PQexecParams at RHPG_9.6
>> '
>> > ld: /usr/lib64/libgdal.so: undefined reference to `PQntuples at RHPG_9.6'
>> > ld: /usr/lib64/libgdal.so: undefined reference to
>> > `PQresultErrorMessage at RHPG_9.6'
>> >
>> > Thanks for any help.
>> >
>> > Regards,
>> >
>> > Matthys
>> >
>>
>> --
>> Andrew C. Aitchison                                     Kendal, UK
>>                         andrew at aitchison.me.uk
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20201001/aa10dcde/attachment.html>

