From hellik at web.de  Wed Jul  1 12:57:06 2015
From: hellik at web.de (Helmut Kudrnovsky)
Date: Wed, 1 Jul 2015 12:57:06 -0700 (PDT)
Subject: [gdal-dev] OGR Virtual Format: ERROR 1: Line 6: Didn't find element
 token after open angle bracket.
Message-ID: <1435780626168-5213859.post@n6.nabble.com>

Hi,

working with gdalinfo --version GDAL 1.11.2, released 2015/02/10 (OSGeo4W).

given a csv-file and a vrt dataset based upon the csv file:

<OGRVRTDataSource>
    <OGRVRTLayer name="gbif_gisinput">
        <SrcDataSource>gbif_gisinput.csv</SrcDataSource>
        <GeometryType>wkbPoint</GeometryType> 
        <LayerSRS>WGS84</LayerSRS>
	<GeometryField encoding="PointFromColumns" x="decimallongitude"
y="decimallatitude"/>
	</OGRVRTLayer>
</OGRVRTDataSource>

this vrt vector dataset works:

ogrinfo gbif_to_gis.vrt
INFO: Open of `gbif_to_gis.vrt'
      using driver `VRT' successful.
1: gbif_gisinput (Point)

I can do e.g.:

ogr2ogr test2.shp gbif_to_gis_working.vrt

translate it to a working shapefile.

if I do some selecting by <SrcSQL>SELECT:

<OGRVRTDataSource>
    <OGRVRTLayer name="gbif_gisinput">
        <SrcDataSource>gbif_gisinput.csv</SrcDataSource>
        <GeometryType>wkbPoint</GeometryType> 
        <LayerSRS>WGS84</LayerSRS>
	<GeometryField encoding="PointFromColumns" x="decimallongitude"
y="decimallatitude"/>
	<SrcSQL>SELECT * FROM gbif_gisinput WHERE (decimallongitude >= 0) AND
(decimallongitude <= 360)</SrcSQL>
	</OGRVRTLayer>
</OGRVRTDataSource>

I get following error message:

ogrinfo gbif_to_gis_not_working.vrt
ERROR 1: Line 6: Didn't find element token after open angle bracket.
ERROR 1: Line 6: Didn't find element token after open angle bracket.
FAILURE:
Unable to open datasource `gbif_to_gis_not_working.vrt' with the following
drivers.

any idea what's missing/wrong?







-----
best regards
Helmut
--
View this message in context: http://osgeo-org.1560.x6.nabble.com/OGR-Virtual-Format-ERROR-1-Line-6-Didn-t-find-element-token-after-open-angle-bracket-tp5213859.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Wed Jul  1 13:05:18 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 1 Jul 2015 22:05:18 +0200
Subject: [gdal-dev] OGR Virtual Format: ERROR 1: Line 6: Didn't find
	element token after open angle bracket.
In-Reply-To: <1435780626168-5213859.post@n6.nabble.com>
References: <1435780626168-5213859.post@n6.nabble.com>
Message-ID: <201507012205.18425.even.rouault@spatialys.com>

> 	<SrcSQL>SELECT * FROM gbif_gisinput WHERE (decimallongitude >= 0) AND
> (decimallongitude <= 360)</SrcSQL>

Helmut,

This is invalid XML. > and < characters as text must be escaped. So should be:

<SrcSQL>SELECT * FROM gbif_gisinput WHERE (decimallongitude &gt;= 0) AND 
(decimallongitude &lt;= 360)</SrcSQL>

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From hellik at web.de  Wed Jul  1 13:46:14 2015
From: hellik at web.de (Helmut Kudrnovsky)
Date: Wed, 1 Jul 2015 13:46:14 -0700 (PDT)
Subject: [gdal-dev] OGR Virtual Format: ERROR 1: Line 6: Didn't find
 element token after open angle bracket.
In-Reply-To: <201507012205.18425.even.rouault@spatialys.com>
References: <1435780626168-5213859.post@n6.nabble.com>
	<201507012205.18425.even.rouault@spatialys.com>
Message-ID: <1435783574599-5213867.post@n6.nabble.com>

Hi Even,


Even Rouault-2 wrote
>> 	
> <SrcSQL>
> SELECT * FROM gbif_gisinput WHERE (decimallongitude >= 0) AND
>> (decimallongitude <= 360)
> </SrcSQL>
> Helmut,
> 
> This is invalid XML. > and < characters as text must be escaped. So should
> be:
> <SrcSQL>
> SELECT * FROM gbif_gisinput WHERE (decimallongitude &gt;= 0) AND 
> (decimallongitude &lt;= 360)
> </SrcSQL>
> Even

thanks for the hint.

when using an updated vrt (attached file:  gbif_to_gis_not_working_test.vrt
<http://osgeo-org.1560.x6.nabble.com/file/n5213867/gbif_to_gis_not_working_test.vrt> 
)

I get now:

ogr2ogr filtered9.shp gbif_to_gis_not_working_test.vrt
ERROR 1: Type mismatch or improper type of arguments to >= operator.
ERROR 1: SQL statement failed, or returned no layer result:
SELECT * FROM gbif_gisinput WHERE (decimallongitude >= 0) AND
(decimallongitude
<= 360)

thanks.




-----
best regards
Helmut
--
View this message in context: http://osgeo-org.1560.x6.nabble.com/OGR-Virtual-Format-ERROR-1-Line-6-Didn-t-find-element-token-after-open-angle-bracket-tp5213859p5213867.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Wed Jul  1 13:54:04 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 1 Jul 2015 22:54:04 +0200
Subject: [gdal-dev] OGR Virtual Format: ERROR 1: Line 6: Didn't find
	element token after open angle bracket.
In-Reply-To: <1435783574599-5213867.post@n6.nabble.com>
References: <1435780626168-5213859.post@n6.nabble.com>
	<201507012205.18425.even.rouault@spatialys.com>
	<1435783574599-5213867.post@n6.nabble.com>
Message-ID: <201507012254.04416.even.rouault@spatialys.com>

Le mercredi 01 juillet 2015 22:46:14, Helmut Kudrnovsky a ?crit :
> Hi Even,
> 
> 
> Even Rouault-2 wrote
> 
> > <SrcSQL>
> > SELECT * FROM gbif_gisinput WHERE (decimallongitude >= 0) AND
> > 
> >> (decimallongitude <= 360)
> > 
> > </SrcSQL>
> > Helmut,
> > 
> > This is invalid XML. > and < characters as text must be escaped. So
> > should be:
> > <SrcSQL>
> > SELECT * FROM gbif_gisinput WHERE (decimallongitude &gt;= 0) AND
> > (decimallongitude &lt;= 360)
> > </SrcSQL>
> > Even
> 
> thanks for the hint.
> 
> when using an updated vrt (attached file:  gbif_to_gis_not_working_test.vrt
> <http://osgeo-org.1560.x6.nabble.com/file/n5213867/gbif_to_gis_not_working_
> test.vrt> )
> 
> I get now:
> 
> ogr2ogr filtered9.shp gbif_to_gis_not_working_test.vrt
> ERROR 1: Type mismatch or improper type of arguments to >= operator.
> ERROR 1: SQL statement failed, or returned no layer result:
> SELECT * FROM gbif_gisinput WHERE (decimallongitude >= 0) AND
> (decimallongitude
> <= 360)

Look at the CAST operator : http://gdal.org/ogr_sql.html

> 
> thanks.
> 
> 
> 
> 
> -----
> best regards
> Helmut
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/OGR-Virtual-Format-ERROR-1-Line-6-Didn
> -t-find-element-token-after-open-angle-bracket-tp5213859p5213867.html Sent
> from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From adr.andre at laposte.net  Thu Jul  2 01:12:47 2015
From: adr.andre at laposte.net (=?UTF-8?B?QWRyaWVuIEFORFLDiQ==?=)
Date: Thu, 02 Jul 2015 10:12:47 +0200
Subject: [gdal-dev] =?utf-8?q?=E2=80=8BRe=3A_Raster_origin_coodinates_in_f?=
 =?utf-8?q?ile_header?=
In-Reply-To: <CAMp9JaPu8AMuhH8pq1sNsG7FVAep9O04bYirkdgFJPK2v5F_tQ@mail.gmail.com>
References: <CAMp9JaPu8AMuhH8pq1sNsG7FVAep9O04bYirkdgFJPK2v5F_tQ@mail.gmail.com>
Message-ID: <5594F27F.1030402@laposte.net>

Even, Piero,

thank you very much for your detailed answers !


Adrien


Le 30/06/2015 08:41, Piero Campalani a ?crit :
> Adrien,
>
> OGC in its GML standard document -- of course in line with ISO --
> recommends that:/
>
> "When a grid point is used to represent a sample space (e.g. image
> pixel), the grid point represents the center of the sample space (see
> ISO 19123:2005, 8.2.2)"/. ?
>
> ?GML encodes the locations of a raster/gridded-coverage by means of a
> grid of ?0D points.
>
> ?You can always put your raster origin wherever you want, i.e. in
> whatever corner you prefer.
> Alas, there's no way -- that I am aware of -- to specify what is the
> shape of a measurement footprint/sample-space, nor to say if the
> footprint surrounds the point-geometry equally (point is pixel-centre)
> or some other way (point is pixel-upper-left-corner?).
>
> Hence raster creators should probably stick to this recommended encoding
> until standards do not offer more freedom on this :)
>
> ?@seeAlso
> ?http://rasdaman.org/wiki/PetascopeSubsets
> http://rasdaman.org/ticket/680?
>
> -
> ?Piero !?
> ?
>
> On 29 June 2015 at 21:00, <gdal-dev-request at lists.osgeo.org
> <mailto:gdal-dev-request at lists.osgeo.org>> wrote:
>
>     Date: Mon, 29 Jun 2015 11:12:11 +0200
>     From: Adrien ANDR? <adr.andre at laposte.net
>     <mailto:adr.andre at laposte.net>>
>     To: gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     Subject: [gdal-dev] Raster origin coodinates in file header
>     Message-ID: <55910BEB.2030307 at laposte.net
>     <mailto:55910BEB.2030307 at laposte.net>>
>     Content-Type: text/plain; charset=utf-8; format=flowed
>
>     Dear list,
>
>     opening 2 rasters with different resolutions i noticed a shift.
>
>     Asking our imagery provider, i was told the origin coordinates they
>     store in image header (JP2 files) are those of the top left pixel
>     center.
>
>     GDAL reads origin coordinates as the top left pixel top left corner
>     coordinates, as i'm used to.
>
>
>     Of course, i fixed my problem, the hacky way, playing with
>     gdal_translate a_ullr option, but:
>
>     How to deal with this?
>     How not to worry about georeferencing each time i load a raster file?
>     Is there any OGC recommendation about origin coordinates storage?
>
>
>     Thanking you in advance,
>
>     Regards,
>
>     Adrien
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From peifer at gmx.eu  Thu Jul  2 06:26:01 2015
From: peifer at gmx.eu (peifer)
Date: Thu, 2 Jul 2015 06:26:01 -0700 (PDT)
Subject: [gdal-dev] OGR Virtual Format: ERROR 1: Line 6: Didn't find
 element token after open angle bracket.
In-Reply-To: <201507012205.18425.even.rouault@spatialys.com>
References: <1435780626168-5213859.post@n6.nabble.com>
	<201507012205.18425.even.rouault@spatialys.com>
Message-ID: <1435843561784-5213972.post@n6.nabble.com>

Even Rouault-2 wrote
> This is invalid XML. > and < characters as text must be escaped. 

Just as a small side remark: only < MUST be escaped in the given case.
Hermann

$ echo '<SrcSQL>SELECT * FROM gbif_gisinput WHERE (decimallongitude >= 0)
AND (decimallongitude <= 360)</SrcSQL>' | xmlwf
STDIN:1:89: not well-formed (invalid token)

$ echo '<SrcSQL>SELECT * FROM gbif_gisinput WHERE (decimallongitude >= 0)
AND (decimallongitude &lt;= 360)</SrcSQL>' | xmlwf
(no error here)




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/OGR-Virtual-Format-ERROR-1-Line-6-Didn-t-find-element-token-after-open-angle-bracket-tp5213859p5213972.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From userofgdal at gmail.com  Thu Jul  2 21:15:36 2015
From: userofgdal at gmail.com (user gdal)
Date: Fri, 3 Jul 2015 09:45:36 +0530
Subject: [gdal-dev] Clipping Task, pl. help!
Message-ID: <CAJnZZa+egGmKp0X6Bgpiw5eVxbC+RznuzcyAMDd+bFGfTB+8Aw@mail.gmail.com>

Dear friends I have an ERDAS INAGINE img file and an ESRI polygon shape
file. How to programmatically clip (or irregular subset) the input img file
using the shape file? Can the GDAL tools help in this regard? If you have
code that can be shared with us, it'll be very nice.

With thanks,


Yours sincerely,

                                          B. Ramesh

userofgdal at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150703/5b21c8b1/attachment.html>

From nicolas.cadieux at archeotec.ca  Thu Jul  2 21:24:46 2015
From: nicolas.cadieux at archeotec.ca (Nicolas Cadieux)
Date: Fri, 3 Jul 2015 00:24:46 -0400
Subject: [gdal-dev] Clipping Task, pl. help!
In-Reply-To: <CAJnZZa+egGmKp0X6Bgpiw5eVxbC+RznuzcyAMDd+bFGfTB+8Aw@mail.gmail.com>
Message-ID: <3de815fd-e3eb-41a5-958b-821d56c827a2@email.android.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150703/798a234d/attachment.html>

From alobolistas at gmail.com  Thu Jul  2 23:26:06 2015
From: alobolistas at gmail.com (Agustin Lobo)
Date: Fri, 3 Jul 2015 08:26:06 +0200
Subject: [gdal-dev] polynomial coeficients
Message-ID: <CAG4NReJG7nxs=+koFy3ezKxahDyoB=KFWDO78U1RKWMaAejbSw@mail.gmail.com>

Is it possible to enter the coefficients of the polynomial
instead of the gcp list for gdaltransform or gdalwarp?
Thanks

From even.rouault at spatialys.com  Fri Jul  3 00:40:04 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 3 Jul 2015 09:40:04 +0200
Subject: [gdal-dev] polynomial coeficients
In-Reply-To: <CAG4NReJG7nxs=+koFy3ezKxahDyoB=KFWDO78U1RKWMaAejbSw@mail.gmail.com>
References: <CAG4NReJG7nxs=+koFy3ezKxahDyoB=KFWDO78U1RKWMaAejbSw@mail.gmail.com>
Message-ID: <201507030940.16453.even.rouault@spatialys.com>

Agustin,

> Is it possible to enter the coefficients of the polynomial
> instead of the gcp list for gdaltransform or gdalwarp?

No, there's no interface for that.

The closest thing to what you want to do would be to use RPC.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gane.prog at gmail.com  Fri Jul  3 05:18:01 2015
From: gane.prog at gmail.com (Gane R)
Date: Fri, 3 Jul 2015 17:48:01 +0530
Subject: [gdal-dev] Increase width and change offset of the shape file
	rasterized
Message-ID: <CALMrLdDKaG8q1LsmqRM=M09pFnDGUjM2x9BXSDB-uLYnjc_DCw@mail.gmail.com>

Questions: 1. How can I change the width of the vector (shapefile) and
change the offset.

I see GDALdllImageLine calling - pfnPointFunc - calling gvBurnPoint

Questions: 2.  gdalrasterize generate transparent png of the raster

i know the png driver doesn't support create but create copy.

How about the buffer written to MEM driver and then to PNG driver. But I
want it to transparent and not black ?

Thanks for your previous replies.

Gane
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150703/f236a5c1/attachment.html>

From csbruce at cubewerx.com  Fri Jul  3 15:35:06 2015
From: csbruce at cubewerx.com (Craig Bruce)
Date: Fri, 03 Jul 2015 19:35:06 -0300
Subject: [gdal-dev] GDAL 2.0.0 source-file newline consistency
Message-ID: <55970E1A.50803@cubewerx.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150703/9b908599/attachment.html>

From even.rouault at spatialys.com  Sat Jul  4 04:52:38 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 4 Jul 2015 13:52:38 +0200
Subject: [gdal-dev] GDAL 2.0.0 source-file newline consistency
In-Reply-To: <55970E1A.50803@cubewerx.com>
References: <55970E1A.50803@cubewerx.com>
Message-ID: <201507041352.39139.even.rouault@spatialys.com>

Craig,

I've converted files with mixed end-of-line characters to the majority one.

My old svn client didn't protest when doing "svn add --force gdal-2.0.0" on 
those files with mixed e-o-l.

Even

> <html>
>   <head>
> 
>     <meta http-equiv="content-type" content="text/html; charset=utf-8">
>   </head>
>   <body text="#000000" bgcolor="#FFFFFF">
>     In trying to check GDAL 2.0.0 into a local Subversion repository, I
>     get various errors about inconsistent newline styles.  For
> instance:<br> <br>
>     svn add --force gdal-2.0.0<br>
>     svn: E200009: File
>     '/home/sourcetree/cw/src_3p/gdal-2.0.0/port/cpl_time.h' has
>     inconsistent newlines<br>
>     svn: E135000: Inconsistent line ending style<br>
>     svn: E135000: Additional errors:<br>
>     <br>
>     Viewing the file shows that it uses Windows CRLF (shown as an extra
>     ^M below) except on the single "Copyright" line:<br>
>     <tt><br>
>     </tt><tt> *^M</tt><tt><br>
>    
> </tt><tt> ****************************************************************
> ******^M</tt><tt><br> </tt><tt> * Copyright (c) 2009, Even Rouault &lt;even
> dot rouault at mines-paris dot org&gt;</tt><tt><br>
>     </tt><tt> *^M</tt><tt><br>
>     </tt><tt> * Permission is hereby granted, free of charge, to any
>       person obtaining a^M</tt><br>
>     <br>
>     It'd be helpful if the GDAL source files could at least be
>     self-consistent w.r.t. newline conventions.<br>
>     <br>
>     <div class="moz-signature">-- <br>
>       Dr. Craig S. Bruce
>       <br>
>       Senior Software Developer
>       <br>
>       CubeWerx<i> </i>Inc.
>       <br>
>       <a href="http://www.cubewerx.com/">http://www.cubewerx.com</a></div>
>   </body>
> </html>

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From kusala9 at googlemail.com  Mon Jul  6 05:12:11 2015
From: kusala9 at googlemail.com (kusala nine)
Date: Mon, 6 Jul 2015 13:12:11 +0100
Subject: [gdal-dev] compiling mongodb driver???
In-Reply-To: <CAOn9mqe0hX5r9AhRg1BoqwODvgqDgP_ccCedAxzputxYGQQ72w@mail.gmail.com>
References: <CAOn9mqdyBnWyYwnaded1BYAnSyYwbAMUPa5WOkTQfm_ZVU-ZRw@mail.gmail.com>
	<201506241723.26765.even.rouault@spatialys.com>
	<CAOn9mqe0hX5r9AhRg1BoqwODvgqDgP_ccCedAxzputxYGQQ72w@mail.gmail.com>
Message-ID: <CAOn9mqeVA92e9G0tqqRVk=K3K+eWJns_LHERvkGUYTik4oZxbg@mail.gmail.com>

I'm still struggling with compiling in the mongo driver to version 2.1 of
the source. I compile the mongocxx driver (scons --prefix=<dir>
--sharelibraries=yes install) and then use the build folder to point the
gdal build at the mongoclient.so but, even after a successful ./configure I
get the messages below. Looks to me like I'm missing symbols which should
be defined somewhere else - is libmongoclient.so the only thing external to
gdal that I need to link? Are the boost libraries included in the
mongo-cxx-driver? I have the rest of boost on the system and the driver
compiled fine but the final linking is where it falls over. all help
gratefully received...

Jon.

/bin/bash /home/ubuntu/gdal/gdal/gdal/libtool --mode=link       g++
 gdalinfo.lo commonutils.lo  /home/ubuntu/gdal/gdal/gdal/libgdal.la -o
gdalinfo
libtool: link: g++ .libs/gdalinfo.o .libs/commonutils.o -o .libs/gdalinfo
 /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so -L/usr/lib
-L/home/ubuntu/gdal/mongo/mongo-cxx-driver/b2/lib -lgeos_c
/usr/lib/x86_64-linux-gnu/libsqlite3.so -lodbc -lodbcinst
/usr/lib/x86_64-linux-gnu/libexpat.so /usr/lib/libxerces-c.so -lnsl
-ljasper -lnetcdf /usr/lib/libhdf5.so -lm /usr/lib/libmfhdfalt.so
/usr/lib/libdfalt.so /usr/lib/x86_64-linux-gnu/libgif.so -ljpeg -lpng -lpq
-lz -lpthread -lrt -ldl -lpcre /usr/lib/x86_64-linux-gnu/libcurl-gnutls.so
-lxml2 -lmongoclient -lboost_system -lboost_thread -lboost_regex
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::client::Options::setFIPSMode(bool)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::client::Options::setSSLPEMKeyFile(std::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::client::Options::setSSLCRLFile(std::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::client::shutdown()'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::BSONObjBuilderValueStream::endField(mongo::StringData const&)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::client::initialize(mongo::client::Options const&)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::verifyFailed(char const*, char const*, unsigned int)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::BulkOperationBuilder::execute(mongo::WriteConcern const*,
mongo::WriteResult*)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::DBClientCursor::nextSafe()'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::BSONElement::Array() const'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::msgasserted(int, std::basic_string<char, std::char_traits<char>,
std::allocator<char> > const&)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::BulkOperationBuilder::~BulkOperationBuilder()'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::BSONObjBuilder::appendElements(mongo::BSONObj)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::BSONObjBuilder::appendDate(mongo::StringData const&, mongo::Date_t)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::BulkOperationBuilder::BulkOperationBuilder(mongo::DBClientBase*,
std::basic_string<char, std::char_traits<char>, std::allocator<char> >
const&, bool)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::BSONObjBuilder::appendElementsUnique(mongo::BSONObj)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::BSONObjBuilderValueStream::BSONObjBuilderValueStream(mongo::BSONObjBuilder*)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::client::Options::setSSLCAFile(std::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::WriteResult::hasErrors() const'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::client::Options::setSSLPEMKeyPassword(std::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::client::Options::setSSLMode(mongo::client::Options::SSLModes)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::DBClientConnection::DBClientConnection(bool,
mongo::DBClientReplicaSet*, double)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::client::Options::setSSLAllowInvalidCertificates(bool)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::DBClientWithCommands::auth(mongo::BSONObj const&)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`boost::filesystem2::detail::status_api(std::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&,
boost::system::error_code&)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::DBClientWithCommands::findAndRemove(mongo::StringData const&,
mongo::BSONObj const&, mongo::BSONObj const&, mongo::BSONObj const&)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::DBClientWithCommands::getCollectionNames(std::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&, mongo::BSONObj
const&)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::BSONObjBuilderValueStream::operator<<(mongo::BSONElement const&)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::IndexSpec::IndexSpec()'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::client::Options::setSSLAllowInvalidHostnames(bool)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::WriteResult::WriteResult()'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::client::Options::Options()'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::HostAndPort::HostAndPort(mongo::StringData const&)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::Status::toString() const'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::IndexSpec::addKeys(mongo::BSONObj const&)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::OID::toString() const'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::BSONElement::Obj() const'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::BSONObj::jsonString(mongo::JsonStringFormat, int, bool) const'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::BulkOperationBuilder::insert(mongo::BSONObj const&)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::OID::init(std::basic_string<char, std::char_traits<char>,
std::allocator<char> > const&)'
/home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
`mongo::invariantFailed(char const*, char const*, unsigned int)'
collect2: ld returned 1 exit status
make[1]: *** [gdalinfo] Error 1
make[1]: Leaving directory `/home/ubuntu/gdal/gdal/gdal/apps'
make: *** [apps-target] Error 2


On Wed, Jun 24, 2015 at 4:28 PM, kusala nine <kusala9 at googlemail.com> wrote:

> great thanks - I'll have a go. many thanks for the pointer.
>
> J
>
> On Wed, Jun 24, 2015 at 4:23 PM, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Jon,
>>
>> It is in the development version (2.1.0dev), not 2.0.0. The website
>> displays
>> the doc of the dev version.
>>
>> On Unix, you must use the following configure options:
>>   --with-mongocxx=ARG        Include MongoCXX support (ARG=Path, yes or
>> no)
>>   --with-boost-lib-path=ARG   Path to boost libraries for mongocxx client
>>
>> On Windows, look at the directions in nmake.opt (search for MONGO)
>>
>> Even
>>
>>
>> > Hi - has anyone got any pointers on compiling the mongodb drivers into
>> the
>> > latest 2.0.0 version of gdal. I've been watching for a while and the new
>> > 2.0.0 page has a table saying that mongo is included but not compiled
>> in by
>> > default. I've downloaded the libraries and compiled them from the link
>> on
>> > the gdal "vector formats" page but no idea how to integrate the mongo
>> > library into the rest of the ogr tools. I know there was a bit of
>> traffic
>> > about this a year ago but couldn't find anything more up to date. All
>> help
>> > gratefully received!....
>> >
>> > thanks
>> >
>> > Jon.(P).
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150706/a270054e/attachment.html>

From even.rouault at spatialys.com  Mon Jul  6 05:31:44 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 6 Jul 2015 14:31:44 +0200
Subject: [gdal-dev] compiling mongodb driver???
In-Reply-To: <CAOn9mqeVA92e9G0tqqRVk=K3K+eWJns_LHERvkGUYTik4oZxbg@mail.gmail.com>
References: <CAOn9mqdyBnWyYwnaded1BYAnSyYwbAMUPa5WOkTQfm_ZVU-ZRw@mail.gmail.com>
	<CAOn9mqe0hX5r9AhRg1BoqwODvgqDgP_ccCedAxzputxYGQQ72w@mail.gmail.com>
	<CAOn9mqeVA92e9G0tqqRVk=K3K+eWJns_LHERvkGUYTik4oZxbg@mail.gmail.com>
Message-ID: <201507061431.44106.even.rouault@spatialys.com>

Le lundi 06 juillet 2015 14:12:11, kusala nine a ?crit :
> I'm still struggling with compiling in the mongo driver to version 2.1 of
> the source. I compile the mongocxx driver (scons --prefix=<dir>
> --sharelibraries=yes install) and then use the build folder to point the
> gdal build at the mongoclient.so but, even after a successful ./configure I
> get the messages below. Looks to me like I'm missing symbols which should
> be defined somewhere else - is libmongoclient.so the only thing external to
> gdal that I need to link? Are the boost libraries included in the
> mongo-cxx-driver? I have the rest of boost on the system and the driver
> compiled fine but the final linking is where it falls over. all help
> gratefully received...

I've added recently a "build instructions" section at the end of 
http://gdal.org/drv_mongodb.html

From your errros, I'd say it looks like if libmongoclient.so itself is not 
found (there might be an issue with boost libs too, but you'll see it once the 
issue with libmongoclient is fixed). You should specify  --with-mongocxx to the 
installation prefix of the mongoclient. So <dir> in your example.

Is there a libmongoclient.so in /home/ubuntu/gdal/mongo/mongo-cxx-
driver/b2/lib ? Is  /home/ubuntu/gdal/mongo/mongo-cxx-driver/b2 the <dir> of 
your scons command line ?

> 
> Jon.
> 
> /bin/bash /home/ubuntu/gdal/gdal/gdal/libtool --mode=link       g++
>  gdalinfo.lo commonutils.lo  /home/ubuntu/gdal/gdal/gdal/libgdal.la -o
> gdalinfo
> libtool: link: g++ .libs/gdalinfo.o .libs/commonutils.o -o .libs/gdalinfo
>  /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so -L/usr/lib
> -L/home/ubuntu/gdal/mongo/mongo-cxx-driver/b2/lib -lgeos_c
> /usr/lib/x86_64-linux-gnu/libsqlite3.so -lodbc -lodbcinst
> /usr/lib/x86_64-linux-gnu/libexpat.so /usr/lib/libxerces-c.so -lnsl
> -ljasper -lnetcdf /usr/lib/libhdf5.so -lm /usr/lib/libmfhdfalt.so
> /usr/lib/libdfalt.so /usr/lib/x86_64-linux-gnu/libgif.so -ljpeg -lpng -lpq
> -lz -lpthread -lrt -ldl -lpcre /usr/lib/x86_64-linux-gnu/libcurl-gnutls.so
> -lxml2 -lmongoclient -lboost_system -lboost_thread -lboost_regex
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::client::Options::setFIPSMode(bool)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::client::Options::setSSLPEMKeyFile(std::basic_string<char,
> std::char_traits<char>, std::allocator<char> > const&)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::client::Options::setSSLCRLFile(std::basic_string<char,
> std::char_traits<char>, std::allocator<char> > const&)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::client::shutdown()'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::BSONObjBuilderValueStream::endField(mongo::StringData const&)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::client::initialize(mongo::client::Options const&)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::verifyFailed(char const*, char const*, unsigned int)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::BulkOperationBuilder::execute(mongo::WriteConcern const*,
> mongo::WriteResult*)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::DBClientCursor::nextSafe()'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::BSONElement::Array() const'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::msgasserted(int, std::basic_string<char, std::char_traits<char>,
> std::allocator<char> > const&)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::BulkOperationBuilder::~BulkOperationBuilder()'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::BSONObjBuilder::appendElements(mongo::BSONObj)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::BSONObjBuilder::appendDate(mongo::StringData const&,
> mongo::Date_t)' /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined
> reference to
> `mongo::BulkOperationBuilder::BulkOperationBuilder(mongo::DBClientBase*,
> std::basic_string<char, std::char_traits<char>, std::allocator<char> >
> const&, bool)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::BSONObjBuilder::appendElementsUnique(mongo::BSONObj)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::BSONObjBuilderValueStream::BSONObjBuilderValueStream(mongo::BSONObj
> Builder*)' /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined
> reference to `mongo::client::Options::setSSLCAFile(std::basic_string<char,
> std::char_traits<char>, std::allocator<char> > const&)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::WriteResult::hasErrors() const'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::client::Options::setSSLPEMKeyPassword(std::basic_string<char,
> std::char_traits<char>, std::allocator<char> > const&)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::client::Options::setSSLMode(mongo::client::Options::SSLModes)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::DBClientConnection::DBClientConnection(bool,
> mongo::DBClientReplicaSet*, double)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::client::Options::setSSLAllowInvalidCertificates(bool)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::DBClientWithCommands::auth(mongo::BSONObj const&)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `boost::filesystem2::detail::status_api(std::basic_string<char,
> std::char_traits<char>, std::allocator<char> > const&,
> boost::system::error_code&)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::DBClientWithCommands::findAndRemove(mongo::StringData const&,
> mongo::BSONObj const&, mongo::BSONObj const&, mongo::BSONObj const&)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::DBClientWithCommands::getCollectionNames(std::basic_string<char,
> std::char_traits<char>, std::allocator<char> > const&, mongo::BSONObj
> const&)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::BSONObjBuilderValueStream::operator<<(mongo::BSONElement const&)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::IndexSpec::IndexSpec()'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::client::Options::setSSLAllowInvalidHostnames(bool)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::WriteResult::WriteResult()'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::client::Options::Options()'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::HostAndPort::HostAndPort(mongo::StringData const&)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::Status::toString() const'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::IndexSpec::addKeys(mongo::BSONObj const&)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::OID::toString() const'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::BSONElement::Obj() const'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::BSONObj::jsonString(mongo::JsonStringFormat, int, bool) const'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::BulkOperationBuilder::insert(mongo::BSONObj const&)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::OID::init(std::basic_string<char, std::char_traits<char>,
> std::allocator<char> > const&)'
> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
> `mongo::invariantFailed(char const*, char const*, unsigned int)'
> collect2: ld returned 1 exit status
> make[1]: *** [gdalinfo] Error 1
> make[1]: Leaving directory `/home/ubuntu/gdal/gdal/gdal/apps'
> make: *** [apps-target] Error 2
> 
> On Wed, Jun 24, 2015 at 4:28 PM, kusala nine <kusala9 at googlemail.com> wrote:
> > great thanks - I'll have a go. many thanks for the pointer.
> > 
> > J
> > 
> > On Wed, Jun 24, 2015 at 4:23 PM, Even Rouault
> > <even.rouault at spatialys.com>
> > 
> > wrote:
> >> Jon,
> >> 
> >> It is in the development version (2.1.0dev), not 2.0.0. The website
> >> displays
> >> the doc of the dev version.
> >> 
> >> On Unix, you must use the following configure options:
> >>   --with-mongocxx=ARG        Include MongoCXX support (ARG=Path, yes or
> >> 
> >> no)
> >> 
> >>   --with-boost-lib-path=ARG   Path to boost libraries for mongocxx
> >>   client
> >> 
> >> On Windows, look at the directions in nmake.opt (search for MONGO)
> >> 
> >> Even
> >> 
> >> > Hi - has anyone got any pointers on compiling the mongodb drivers into
> >> 
> >> the
> >> 
> >> > latest 2.0.0 version of gdal. I've been watching for a while and the
> >> > new 2.0.0 page has a table saying that mongo is included but not
> >> > compiled
> >> 
> >> in by
> >> 
> >> > default. I've downloaded the libraries and compiled them from the link
> >> 
> >> on
> >> 
> >> > the gdal "vector formats" page but no idea how to integrate the mongo
> >> > library into the rest of the ogr tools. I know there was a bit of
> >> 
> >> traffic
> >> 
> >> > about this a year ago but couldn't find anything more up to date. All
> >> 
> >> help
> >> 
> >> > gratefully received!....
> >> > 
> >> > thanks
> >> > 
> >> > Jon.(P).
> >> 
> >> --
> >> Spatialys - Geospatial professional services
> >> http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From steven at ruggedrocksoffroad.com  Mon Jul  6 16:13:24 2015
From: steven at ruggedrocksoffroad.com (Steven Lutz)
Date: Mon, 06 Jul 2015 16:13:24 -0700
Subject: [gdal-dev] Merge all features in polygon shapefile with gdal
Message-ID: <559B0B94.9010500@ruggedrocksoffroad.com>

I've found some examples of how to dissolve features in a polygon using 
gdal but I'm not familiar with how to implement them.
here is an example of what I've found, but I'm having trouble modifying it

this is what I've come up with:

|ogr2ogr output.shp input.shp -dialect sqlite -sql
"SELECT ST_Union(geometry), dissolve_field FROM input GROUP BY dissolve_field"|


it looks to me that it is trying to do this operation based on specific 
attribute entries but I'm looking to ignore the attribute entrie and 
make all features into one.
This is what I've tried:
the 32768.shp has an attribute named BLOCK and it's still not working.. 
any ideas? >ogr2ogr -f "ESRI Shapefile" output.shp 32768.shp -dialect 
sqlite -sql "select ST_union(block) from '32768'" Warning 6: 
Normalized/laundered field name: 'ST_union(block)' to 'ST_union(b

I am confused as to what I should be putting in the parenthasis of 
ST_Union()

Please advise.
Thank you


-- 
Steven Lutz
President
Rugged Rocks, LLC
Sales & Support: (909)547-4651
Nissan 4x4 Parts <http://ruggedrocks.com> / Off Road GPS Units & Maps 
<http://ruggedroutes.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150706/ae788bc5/attachment.html>

From randre at gmail.com  Mon Jul  6 16:49:56 2015
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Mon, 6 Jul 2015 16:49:56 -0700
Subject: [gdal-dev] Merge all features in polygon shapefile with gdal
In-Reply-To: <559B0B94.9010500@ruggedrocksoffroad.com>
References: <559B0B94.9010500@ruggedrocksoffroad.com>
Message-ID: <CAOL+ROHKOF82L6R+62sUQ7Bi_8Mjh66t6XbS-97h9YLkAw010g@mail.gmail.com>

Hey Steven,

Are you trying to do this via a spatially enabled database?  In PostGIS,
the dissolve syntax looks like this:

"SELECT dissolve_field, ST_UNION(geometry) FROM table GROUP BY
dissolve_field;"

Roger


On Mon, Jul 6, 2015 at 4:13 PM, Steven Lutz <steven at ruggedrocksoffroad.com>
wrote:

>  I've found some examples of how to dissolve features in a polygon using
> gdal but I'm not familiar with how to implement them.
> here is an example of what I've found, but I'm having trouble modifying it
>
> this is what I've come up with:
>
> ogr2ogr output.shp
>   input.
> shp -dialect sqlite -sql
> "SELECT ST_Union(geometry), dissolve_field FROM input GROUP BY dissolve_field"
>
>
> it looks to me that it is trying to do this operation based on specific
> attribute entries but I'm looking to ignore the attribute entrie and make
> all features into one.
> This is what I've tried:
> the 32768.shp has an attribute named BLOCK and it's still not working..
> any ideas? >ogr2ogr -f "ESRI Shapefile" output.shp 32768.shp -dialect
> sqlite -sql "select ST_union(block) from '32768'" Warning 6:
> Normalized/laundered field name: 'ST_union(block)' to 'ST_union(b
>
> I am confused as to what I should be putting in the parenthasis of
> ST_Union()
>
> Please advise.
> Thank you
>
>
> --
>  Steven Lutz
> President
> Rugged Rocks, LLC
> Sales & Support: (909)547-4651
> Nissan 4x4 Parts <http://ruggedrocks.com> / Off Road GPS Units & Maps
> <http://ruggedroutes.com>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150706/16055e24/attachment.html>

From lukepinnerau at gmail.com  Mon Jul  6 22:03:49 2015
From: lukepinnerau at gmail.com (Luke)
Date: Mon, 6 Jul 2015 22:03:49 -0700 (PDT)
Subject: [gdal-dev] Merge all features in polygon shapefile with gdal
In-Reply-To: <559B0B94.9010500@ruggedrocksoffroad.com>
References: <559B0B94.9010500@ruggedrocksoffroad.com>
Message-ID: <1436245429197-5214533.post@n6.nabble.com>

Steven, 

Remove the group by and it will ignore the attributes.

    ogr2ogr output.shp input.shp -dialect sqlite -sql "SELECT
ST_Union(geometry) FROM input"

Regards
Luke


Steven Lutz wrote
> ...
> this is what I've come up with:
> 
> |ogr2ogr output.shp input.shp -dialect sqlite -sql
> "SELECT ST_Union(geometry), dissolve_field FROM input GROUP BY
> dissolve_field"|
> 
> it looks to me that it is trying to do this operation based on specific 
> attribute entries but I'm looking to ignore the attribute entrie and 
> make all features into one.





--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-Merge-all-features-in-polygon-shapefile-with-gdal-tp5214520p5214533.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From Alexander.Jacob at eurac.edu  Tue Jul  7 02:23:22 2015
From: Alexander.Jacob at eurac.edu (Jacob Alexander)
Date: Tue, 7 Jul 2015 09:23:22 +0000
Subject: [gdal-dev] building gdal200 with hdf 4&5 support for win64
Message-ID: <1391DD31F652F74089464DD17C0EA7494A7D65@SDCEMB02.unibz.it>

Hi,

I have tried and failed several times now to compile gdal200 with active HDF4&5 for Win64.
Without hdf support it works flawlessly for me to compile it.
I have downloaded the latest releases of HDF4 (4.2.11) and HDF5(1.8.15). But in both cases I am missing the files that are supposed to be referenced in gdal under the HDF4_lib and HDF5_lib in the nmake.opt file coming with it. I have tried both the precompiled versions and compiling both HDF4 and HDF5 myself. In both cases I can successfully compile (using cmake and VS2013).
So my question is, where do these libraries come from? I am referring to WS2_32.lib for HDF4 and hdf5dll.lib.
What am I missing in order to compile gdal successfully with HDF support?

I am grateful for any hints leading me in the right direction.

Best,

Alex

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150707/29858c7f/attachment.html>

From kusala9 at googlemail.com  Tue Jul  7 04:18:48 2015
From: kusala9 at googlemail.com (Jon P)
Date: Tue, 7 Jul 2015 12:18:48 +0100
Subject: [gdal-dev] compiling mongodb driver???
In-Reply-To: <201507061431.44106.even.rouault@spatialys.com>
References: <CAOn9mqdyBnWyYwnaded1BYAnSyYwbAMUPa5WOkTQfm_ZVU-ZRw@mail.gmail.com>
	<CAOn9mqe0hX5r9AhRg1BoqwODvgqDgP_ccCedAxzputxYGQQ72w@mail.gmail.com>
	<CAOn9mqeVA92e9G0tqqRVk=K3K+eWJns_LHERvkGUYTik4oZxbg@mail.gmail.com>
	<201507061431.44106.even.rouault@spatialys.com>
Message-ID: <53F436A8-F612-4046-B7EA-5A6E93C94371@googlemail.com>

Hi thanks do much for this. I think all the paths are ok but I'll check. The weird thing is that if I change the g++ line in the compile to add the library rather than with -lmongoclient it works apart from one boost link error looking for "filesystem2" I'll persevere. Thanks again for the help. Suspect the lib folders are broken...

J

51838-333-21

> On 6 Jul 2015, at 13:31, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Le lundi 06 juillet 2015 14:12:11, kusala nine a ?crit :
>> I'm still struggling with compiling in the mongo driver to version 2.1 of
>> the source. I compile the mongocxx driver (scons --prefix=<dir>
>> --sharelibraries=yes install) and then use the build folder to point the
>> gdal build at the mongoclient.so but, even after a successful ./configure I
>> get the messages below. Looks to me like I'm missing symbols which should
>> be defined somewhere else - is libmongoclient.so the only thing external to
>> gdal that I need to link? Are the boost libraries included in the
>> mongo-cxx-driver? I have the rest of boost on the system and the driver
>> compiled fine but the final linking is where it falls over. all help
>> gratefully received...
> 
> I've added recently a "build instructions" section at the end of 
> http://gdal.org/drv_mongodb.html
> 
> From your errros, I'd say it looks like if libmongoclient.so itself is not 
> found (there might be an issue with boost libs too, but you'll see it once the 
> issue with libmongoclient is fixed). You should specify  --with-mongocxx to the 
> installation prefix of the mongoclient. So <dir> in your example.
> 
> Is there a libmongoclient.so in /home/ubuntu/gdal/mongo/mongo-cxx-
> driver/b2/lib ? Is  /home/ubuntu/gdal/mongo/mongo-cxx-driver/b2 the <dir> of 
> your scons command line ?
> 
>> 
>> Jon.
>> 
>> /bin/bash /home/ubuntu/gdal/gdal/gdal/libtool --mode=link       g++
>> gdalinfo.lo commonutils.lo  /home/ubuntu/gdal/gdal/gdal/libgdal.la -o
>> gdalinfo
>> libtool: link: g++ .libs/gdalinfo.o .libs/commonutils.o -o .libs/gdalinfo
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so -L/usr/lib
>> -L/home/ubuntu/gdal/mongo/mongo-cxx-driver/b2/lib -lgeos_c
>> /usr/lib/x86_64-linux-gnu/libsqlite3.so -lodbc -lodbcinst
>> /usr/lib/x86_64-linux-gnu/libexpat.so /usr/lib/libxerces-c.so -lnsl
>> -ljasper -lnetcdf /usr/lib/libhdf5.so -lm /usr/lib/libmfhdfalt.so
>> /usr/lib/libdfalt.so /usr/lib/x86_64-linux-gnu/libgif.so -ljpeg -lpng -lpq
>> -lz -lpthread -lrt -ldl -lpcre /usr/lib/x86_64-linux-gnu/libcurl-gnutls.so
>> -lxml2 -lmongoclient -lboost_system -lboost_thread -lboost_regex
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::client::Options::setFIPSMode(bool)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::client::Options::setSSLPEMKeyFile(std::basic_string<char,
>> std::char_traits<char>, std::allocator<char> > const&)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::client::Options::setSSLCRLFile(std::basic_string<char,
>> std::char_traits<char>, std::allocator<char> > const&)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::client::shutdown()'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::BSONObjBuilderValueStream::endField(mongo::StringData const&)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::client::initialize(mongo::client::Options const&)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::verifyFailed(char const*, char const*, unsigned int)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::BulkOperationBuilder::execute(mongo::WriteConcern const*,
>> mongo::WriteResult*)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::DBClientCursor::nextSafe()'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::BSONElement::Array() const'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::msgasserted(int, std::basic_string<char, std::char_traits<char>,
>> std::allocator<char> > const&)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::BulkOperationBuilder::~BulkOperationBuilder()'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::BSONObjBuilder::appendElements(mongo::BSONObj)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::BSONObjBuilder::appendDate(mongo::StringData const&,
>> mongo::Date_t)' /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined
>> reference to
>> `mongo::BulkOperationBuilder::BulkOperationBuilder(mongo::DBClientBase*,
>> std::basic_string<char, std::char_traits<char>, std::allocator<char> >
>> const&, bool)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::BSONObjBuilder::appendElementsUnique(mongo::BSONObj)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::BSONObjBuilderValueStream::BSONObjBuilderValueStream(mongo::BSONObj
>> Builder*)' /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined
>> reference to `mongo::client::Options::setSSLCAFile(std::basic_string<char,
>> std::char_traits<char>, std::allocator<char> > const&)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::WriteResult::hasErrors() const'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::client::Options::setSSLPEMKeyPassword(std::basic_string<char,
>> std::char_traits<char>, std::allocator<char> > const&)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::client::Options::setSSLMode(mongo::client::Options::SSLModes)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::DBClientConnection::DBClientConnection(bool,
>> mongo::DBClientReplicaSet*, double)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::client::Options::setSSLAllowInvalidCertificates(bool)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::DBClientWithCommands::auth(mongo::BSONObj const&)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `boost::filesystem2::detail::status_api(std::basic_string<char,
>> std::char_traits<char>, std::allocator<char> > const&,
>> boost::system::error_code&)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::DBClientWithCommands::findAndRemove(mongo::StringData const&,
>> mongo::BSONObj const&, mongo::BSONObj const&, mongo::BSONObj const&)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::DBClientWithCommands::getCollectionNames(std::basic_string<char,
>> std::char_traits<char>, std::allocator<char> > const&, mongo::BSONObj
>> const&)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::BSONObjBuilderValueStream::operator<<(mongo::BSONElement const&)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::IndexSpec::IndexSpec()'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::client::Options::setSSLAllowInvalidHostnames(bool)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::WriteResult::WriteResult()'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::client::Options::Options()'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::HostAndPort::HostAndPort(mongo::StringData const&)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::Status::toString() const'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::IndexSpec::addKeys(mongo::BSONObj const&)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::OID::toString() const'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::BSONElement::Obj() const'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::BSONObj::jsonString(mongo::JsonStringFormat, int, bool) const'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::BulkOperationBuilder::insert(mongo::BSONObj const&)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::OID::init(std::basic_string<char, std::char_traits<char>,
>> std::allocator<char> > const&)'
>> /home/ubuntu/gdal/gdal/gdal/.libs/libgdal.so: undefined reference to
>> `mongo::invariantFailed(char const*, char const*, unsigned int)'
>> collect2: ld returned 1 exit status
>> make[1]: *** [gdalinfo] Error 1
>> make[1]: Leaving directory `/home/ubuntu/gdal/gdal/gdal/apps'
>> make: *** [apps-target] Error 2
>> 
>>> On Wed, Jun 24, 2015 at 4:28 PM, kusala nine <kusala9 at googlemail.com> wrote:
>>> great thanks - I'll have a go. many thanks for the pointer.
>>> 
>>> J
>>> 
>>> On Wed, Jun 24, 2015 at 4:23 PM, Even Rouault
>>> <even.rouault at spatialys.com>
>>> 
>>> wrote:
>>>> Jon,
>>>> 
>>>> It is in the development version (2.1.0dev), not 2.0.0. The website
>>>> displays
>>>> the doc of the dev version.
>>>> 
>>>> On Unix, you must use the following configure options:
>>>>  --with-mongocxx=ARG        Include MongoCXX support (ARG=Path, yes or
>>>> 
>>>> no)
>>>> 
>>>>  --with-boost-lib-path=ARG   Path to boost libraries for mongocxx
>>>>  client
>>>> 
>>>> On Windows, look at the directions in nmake.opt (search for MONGO)
>>>> 
>>>> Even
>>>> 
>>>>> Hi - has anyone got any pointers on compiling the mongodb drivers into
>>>> 
>>>> the
>>>> 
>>>>> latest 2.0.0 version of gdal. I've been watching for a while and the
>>>>> new 2.0.0 page has a table saying that mongo is included but not
>>>>> compiled
>>>> 
>>>> in by
>>>> 
>>>>> default. I've downloaded the libraries and compiled them from the link
>>>> 
>>>> on
>>>> 
>>>>> the gdal "vector formats" page but no idea how to integrate the mongo
>>>>> library into the rest of the ogr tools. I know there was a bit of
>>>> 
>>>> traffic
>>>> 
>>>>> about this a year ago but couldn't find anything more up to date. All
>>>> 
>>>> help
>>>> 
>>>>> gratefully received!....
>>>>> 
>>>>> thanks
>>>>> 
>>>>> Jon.(P).
>>>> 
>>>> --
>>>> Spatialys - Geospatial professional services
>>>> http://www.spatialys.com
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From cgodkin at gmail.com  Tue Jul  7 07:02:11 2015
From: cgodkin at gmail.com (Carl Godkin)
Date: Tue, 7 Jul 2015 07:02:11 -0700
Subject: [gdal-dev] Determining GDAL WMS download limit?
Message-ID: <CAE=8kmmU3sB4jHQ1LA_bHve3-2CGBsRCpnPqzgt5pfsSuaxF_Q@mail.gmail.com>

Hi,

I would like to know if there's a way to determine if a GDAL WMS download
is going to work or not from the information in the local description file.

I'm using C++ code to do this, but can illustrate my question with a
gdal_translate
command.  This command fails:

gdal_translate -outsize 6700 6700 \
     -srcwin 144884562 100729336 178000 178687 \
     frmt_wms_googlemaps_tms.xml \
     out.tif

Input file size is 268435456, 268435456
0...10...20...30...40...50...60...70ERROR 1: GDALWMS: Unable to download
block 35372, 24624.
  URL: http://mt.google.com/vt/lyrs=s&x=35372&y=24624&z=16
  HTTP status code: 404, error: (null).
ERROR 1: frmt_wms_googlemaps_tms.xml, band 1: IReadBlock failed at X offset
35372, Y offset 24624

but if I change the -outsize arguments to 6500 and 6500, it works fine.

I am perfectly willing to accept the limitations of what's available, but
can I tell where that limit will be?

The service file is from the frmts/wms directory with the "Satellite"
ServerURL line active instead of the "Map" line.

Notes:
1. Curiously, the default "Map" ServerURL works to much higher resolution
(at least 15000) which makes me
think that the answer to my question will be "no" since the service
description files are otherwise identical!
2. The map area above is Italy, but I see the same sort of behavior around
the world.

I am using GDAL 1.11.2 on Windows7 x64, but see the same behavior on Linux
RHEL5 64-bit as well.

Thank you very much for any insight,

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150707/d2f71613/attachment.html>

From even.rouault at spatialys.com  Tue Jul  7 07:26:49 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 7 Jul 2015 16:26:49 +0200
Subject: [gdal-dev] Determining GDAL WMS download limit?
In-Reply-To: <CAE=8kmmU3sB4jHQ1LA_bHve3-2CGBsRCpnPqzgt5pfsSuaxF_Q@mail.gmail.com>
References: <CAE=8kmmU3sB4jHQ1LA_bHve3-2CGBsRCpnPqzgt5pfsSuaxF_Q@mail.gmail.com>
Message-ID: <201507071626.50215.even.rouault@spatialys.com>

Le mardi 07 juillet 2015 16:02:11, Carl Godkin a ?crit :
> Hi,
> 
> I would like to know if there's a way to determine if a GDAL WMS download
> is going to work or not from the information in the local description file.

Carl,

From a quick testing, it seems there are tiles up to zoom level 14 included 
everywhere on the 's' layer (even on oceans). But starting with zoom level 15, 
tiles on oceans are missing.

If you use GDAL 1.11 or above, you can avoid failures on missing tiles by 
adding <ZeroBlockHttpCodes>404</ZeroBlockHttpCodes> in the XML file.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andre.vautour at caris.com  Tue Jul  7 07:22:31 2015
From: andre.vautour at caris.com (Andre Vautour)
Date: Tue, 7 Jul 2015 11:22:31 -0300
Subject: [gdal-dev] Determining GDAL WMS download limit?
In-Reply-To: <CAE=8kmmU3sB4jHQ1LA_bHve3-2CGBsRCpnPqzgt5pfsSuaxF_Q@mail.gmail.com>
References: <CAE=8kmmU3sB4jHQ1LA_bHve3-2CGBsRCpnPqzgt5pfsSuaxF_Q@mail.gmail.com>
Message-ID: <559BE0A7.1010209@caris.com>

Looks like that server only has 7 levels for that satellite layer:
http://mt.google.com/vt/lyrs=s&x=0&y=0&z=7
http://mt.google.com/vt/lyrs=s&x=0&y=0&z=8

The terrain and map layers have 22 levels:
http://mt.google.com/vt/lyrs=t&x=0&y=0&z=22
http://mt.google.com/vt/lyrs=t&x=0&y=0&z=23
http://mt.google.com/vt/lyrs=m&x=0&y=0&z=22
http://mt.google.com/vt/lyrs=m&x=0&y=0&z=23

So, you'd have to change the TileLevel element:
<TileLevel>7</TileLevel>

That smaller size probably ended up querying tile levels < 8 which is 
why it worked.
Andr?


On 2015-07-07 11:02, Carl Godkin wrote:
>
> Hi,
>
> I would like to know if there's a way to determine if a GDAL WMS download
> is going to work or not from the information in the local description 
> file.
>
> I'm using C++ code to do this, but can illustrate my question with a 
> gdal_translate
> command.  This command fails:
>
> gdal_translate -outsize 6700 6700 \
>      -srcwin 144884562 100729336 178000 178687 \
>      frmt_wms_googlemaps_tms.xml \
>      out.tif
>
> Input file size is 268435456, 268435456
> 0...10...20...30...40...50...60...70ERROR 1: GDALWMS: Unable to 
> download block 35372, 24624.
>   URL: http://mt.google.com/vt/lyrs=s&x=35372&y=24624&z=16
>   HTTP status code: 404, error: (null).
> ERROR 1: frmt_wms_googlemaps_tms.xml, band 1: IReadBlock failed at X 
> offset 35372, Y offset 24624
>
> but if I change the -outsize arguments to 6500 and 6500, it works fine.
>
> I am perfectly willing to accept the limitations of what's available, 
> but can I tell where that limit will be?
>
> The service file is from the frmts/wms directory with the "Satellite" 
> ServerURL line active instead of the "Map" line.
>
> Notes:
> 1. Curiously, the default "Map" ServerURL works to much higher 
> resolution (at least 15000) which makes me
> think that the answer to my question will be "no" since the service 
> description files are otherwise identical!
> 2. The map area above is Italy, but I see the same sort of behavior 
> around the world.
>
> I am using GDAL 1.11.2 on Windows7 x64, but see the same behavior on 
> Linux RHEL5 64-bit as well.
>
> Thank you very much for any insight,
>
> carl
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150707/63121ae9/attachment.html>

From jpass at bgs.ac.uk  Tue Jul  7 08:42:07 2015
From: jpass at bgs.ac.uk (Passmore, James H.)
Date: Tue, 7 Jul 2015 15:42:07 +0000
Subject: [gdal-dev] Attempting to access an ArcGIS REST API through a WMS
 format minidriver
Message-ID: <DBXPR06MB432D3FE2F78962D966878F9EB920@DBXPR06MB432.eurprd06.prod.outlook.com>

>From http://www.gdal.org/frmt_wms.html  I see you can access an ArcGIS REST API like:

gdalinfo "http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer?f=json&pretty=true"

and

gdal_translate "http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer?f=json" wms.xml -of WMS

These above examples work for me.

When I try on a BGS service it fails as below:

...:\>gdalinfo "https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer?f=json&pretty=true"
gdalinfo failed - unable to open 'https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer?f=json&pretty=
true'.

And:

..:\>gdal_translate "https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer?f=json&pretty=true" bgs.xml -of WMS --debug ON
GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_BAG.dll using GDALRegister_BAG.
GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_ECW_JP2ECW.dll using GDALRegister_ECW_JP2ECW.
GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_FITS.dll using GDALRegister_FITS.
GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_GMT.dll using GDALRegister_GMT.
GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_HDF4.dll using GDALRegister_HDF4.
GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_HDF4Image.dll using GDALRegister_HDF4Image.
GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_HDF5.dll using GDALRegister_HDF5.
GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_HDF5Image.dll using GDALRegister_HDF5Image.
GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_KEA.dll using GDALRegister_KEA.
GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_MG4Lidar.dll using GDALRegister_MG4Lidar.
GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_MrSID.dll using GDALRegister_MrSID.
GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_netCDF.dll using GDALRegister_netCDF.
HTTP: Fetch(https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer?f=json&pretty=true)
WMS: Did not get levels
HTTP: Fetch(https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer?f=json&pretty=true)
GDALOpen failed - 0

Is the reason that HTTPS is not supported here at all, or if not what might be wrong with the service/request/ configuration?

Thanks

James



________________________________
 This message (and any attachments) is for the recipient only. NERC is subject to the Freedom of Information Act 2000 and the contents of this email and any reply you make may be disclosed by NERC unless it is exempt from release under the Act. Any material supplied to NERC may be stored in an electronic records management system.
________________________________

From cgodkin at gmail.com  Tue Jul  7 11:29:09 2015
From: cgodkin at gmail.com (Carl Godkin)
Date: Tue, 7 Jul 2015 11:29:09 -0700
Subject: [gdal-dev] Determining GDAL WMS download limit?
In-Reply-To: <201507071626.50215.even.rouault@spatialys.com>
References: <CAE=8kmmU3sB4jHQ1LA_bHve3-2CGBsRCpnPqzgt5pfsSuaxF_Q@mail.gmail.com>
	<201507071626.50215.even.rouault@spatialys.com>
Message-ID: <CAE=8kmkFVvS_bm0W+sfuf1FjcRp+Dy_xzcTf963b06hFDqGtvA@mail.gmail.com>

Thank you very much.  That's very useful information.  I've started using
the <ZeroBlockHttpCodes> element in our WMS control files.

Thanks,

carl

On Tue, Jul 7, 2015 at 7:26 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le mardi 07 juillet 2015 16:02:11, Carl Godkin a ?crit :
> > Hi,
> >
> > I would like to know if there's a way to determine if a GDAL WMS download
> > is going to work or not from the information in the local description
> file.
>
> Carl,
>
> From a quick testing, it seems there are tiles up to zoom level 14 included
> everywhere on the 's' layer (even on oceans). But starting with zoom level
> 15,
> tiles on oceans are missing.
>
> If you use GDAL 1.11 or above, you can avoid failures on missing tiles by
> adding <ZeroBlockHttpCodes>404</ZeroBlockHttpCodes> in the XML file.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150707/2b7037a6/attachment.html>

From cgodkin at gmail.com  Tue Jul  7 11:34:37 2015
From: cgodkin at gmail.com (Carl Godkin)
Date: Tue, 7 Jul 2015 11:34:37 -0700
Subject: [gdal-dev] Determining GDAL WMS download limit?
In-Reply-To: <559BE0A7.1010209@caris.com>
References: <CAE=8kmmU3sB4jHQ1LA_bHve3-2CGBsRCpnPqzgt5pfsSuaxF_Q@mail.gmail.com>
	<559BE0A7.1010209@caris.com>
Message-ID: <CAE=8kmnHO7dnJRC_5sSG2qemoPNOVccJLJS2ACwf0J+9jS+0LQ@mail.gmail.com>

Hi Andre,

Thank you very much for the reply.  I hadn't thought of querying the levels
as you suggest but I'll remember next time that it makes a good test.

However, I'm not sure what I would do with the <TileLevel>7</TileLevel>
 suggestion
you make.  If I change my WMS control file to use that value,
gdal_translate doesn't work at all so there must be something more to it
than that.  (I've learned the hard way over the years that changing the WMS
control file is not for amateurs.)

If you could explain what you meant, I'd be very grateful. Thanks,

carl



On Tue, Jul 7, 2015 at 7:22 AM, Andre Vautour <andre.vautour at caris.com>
wrote:

>  Looks like that server only has 7 levels for that satellite layer:
> http://mt.google.com/vt/lyrs=s&x=0&y=0&z=7
> http://mt.google.com/vt/lyrs=s&x=0&y=0&z=8
>
> The terrain and map layers have 22 levels:
> http://mt.google.com/vt/lyrs=t&x=0&y=0&z=22
> http://mt.google.com/vt/lyrs=t&x=0&y=0&z=23
> http://mt.google.com/vt/lyrs=m&x=0&y=0&z=22
> http://mt.google.com/vt/lyrs=m&x=0&y=0&z=23
>
> So, you'd have to change the TileLevel element:
> <TileLevel>7</TileLevel>
>
> That smaller size probably ended up querying tile levels < 8 which is why
> it worked.
> Andr?
>
>
>
> On 2015-07-07 11:02, Carl Godkin wrote:
>
>
> Hi,
>
>  I would like to know if there's a way to determine if a GDAL WMS download
> is going to work or not from the information in the local description file.
>
>  I'm using C++ code to do this, but can illustrate my question with a
> gdal_translate
> command.  This command fails:
>
>  gdal_translate -outsize 6700 6700 \
>      -srcwin 144884562 100729336 178000 178687 \
>      frmt_wms_googlemaps_tms.xml \
>      out.tif
>
>  Input file size is 268435456, 268435456
> 0...10...20...30...40...50...60...70ERROR 1: GDALWMS: Unable to download
> block 35372, 24624.
>   URL: http://mt.google.com/vt/lyrs=s&x=35372&y=24624&z=16
>   HTTP status code: 404, error: (null).
> ERROR 1: frmt_wms_googlemaps_tms.xml, band 1: IReadBlock failed at X
> offset 35372, Y offset 24624
>
>  but if I change the -outsize arguments to 6500 and 6500, it works fine.
>
>  I am perfectly willing to accept the limitations of what's available,
> but can I tell where that limit will be?
>
>  The service file is from the frmts/wms directory with the "Satellite"
> ServerURL line active instead of the "Map" line.
>
>  Notes:
> 1. Curiously, the default "Map" ServerURL works to much higher resolution
> (at least 15000) which makes me
> think that the answer to my question will be "no" since the service
> description files are otherwise identical!
> 2. The map area above is Italy, but I see the same sort of behavior around
> the world.
>
>  I am using GDAL 1.11.2 on Windows7 x64, but see the same behavior on
> Linux RHEL5 64-bit as well.
>
>  Thank you very much for any insight,
>
>  carl
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150707/54f0aa93/attachment-0001.html>

From andre.vautour at caris.com  Tue Jul  7 13:03:27 2015
From: andre.vautour at caris.com (Andre Vautour)
Date: Tue, 7 Jul 2015 17:03:27 -0300
Subject: [gdal-dev] Determining GDAL WMS download limit?
In-Reply-To: <CAE=8kmnHO7dnJRC_5sSG2qemoPNOVccJLJS2ACwf0J+9jS+0LQ@mail.gmail.com>
References: <CAE=8kmmU3sB4jHQ1LA_bHve3-2CGBsRCpnPqzgt5pfsSuaxF_Q@mail.gmail.com>
	<559BE0A7.1010209@caris.com>
	<CAE=8kmnHO7dnJRC_5sSG2qemoPNOVccJLJS2ACwf0J+9jS+0LQ@mail.gmail.com>
Message-ID: <559C308F.20701@caris.com>

On 2015-07-07 15:34, Carl Godkin wrote:
>
> Hi Andre,
>
> Thank you very much for the reply.  I hadn't thought of querying the 
> levels as you suggest but I'll remember next time that it makes a good 
> test.
>
> However, I'm not sure what I would do with the 
> <TileLevel>7</TileLevel>  suggestion
> you make.
Even's response is definitely more accurate/relevant then mine.

I originally thought that the tile set only had so many levels, but as 
Even indicated, it varies by region in this case, so you'd be better 
advised to handle 404 (not found) errors as transparent tiles as he 
suggested. As long as those land areas have data up to the TileLevel 
that is specified (20), that should be all that you need to do.

> If I change my WMS control file to use that value, gdal_translate 
> doesn't work at all so there must be something more to it than that. 
>  (I've learned the hard way over the years that changing the WMS 
> control file is not for amateurs.)
Well, the problem is that srcwin is defined in pixel space, and changing 
the tile level means that the WMS raster is now coarser, so naturally 
has fewer pixels. You would have had to redo whatever google merc to 
pixel space conversion you had done previously as the pixel-space window 
would have changed.

>
> If you could explain what you meant, I'd be very grateful. Thanks,
>
> carl
Sorry for the confusion and do let me know if you want more clarification,
Andr?

>
> On Tue, Jul 7, 2015 at 7:22 AM, Andre Vautour <andre.vautour at caris.com 
> <mailto:andre.vautour at caris.com>> wrote:
>
>     Looks like that server only has 7 levels for that satellite layer:
>     http://mt.google.com/vt/lyrs=s&x=0&y=0&z=7
>     http://mt.google.com/vt/lyrs=s&x=0&y=0&z=8
>
>     The terrain and map layers have 22 levels:
>     http://mt.google.com/vt/lyrs=t&x=0&y=0&z=22
>     http://mt.google.com/vt/lyrs=t&x=0&y=0&z=23
>     http://mt.google.com/vt/lyrs=m&x=0&y=0&z=22
>     http://mt.google.com/vt/lyrs=m&x=0&y=0&z=23
>
>     So, you'd have to change the TileLevel element:
>     <TileLevel>7</TileLevel>
>
>     That smaller size probably ended up querying tile levels < 8 which
>     is why it worked.
>     Andr?
>
>
>
>     On 2015-07-07 11:02, Carl Godkin wrote:
>>
>>     Hi,
>>
>>     I would like to know if there's a way to determine if a GDAL WMS
>>     download
>>     is going to work or not from the information in the local
>>     description file.
>>
>>     I'm using C++ code to do this, but can illustrate my question
>>     with a gdal_translate
>>     command.  This command fails:
>>
>>     gdal_translate -outsize 6700 6700 \
>>          -srcwin 144884562 100729336 178000 178687 \
>>          frmt_wms_googlemaps_tms.xml \
>>          out.tif
>>
>>     Input file size is 268435456, 268435456
>>     0...10...20...30...40...50...60...70ERROR 1: GDALWMS: Unable to
>>     download block 35372, 24624.
>>       URL: http://mt.google.com/vt/lyrs=s&x=35372&y=24624&z=16
>>       HTTP status code: 404, error: (null).
>>     ERROR 1: frmt_wms_googlemaps_tms.xml, band 1: IReadBlock failed
>>     at X offset 35372, Y offset 24624
>>
>>     but if I change the -outsize arguments to 6500 and 6500, it works
>>     fine.
>>
>>     I am perfectly willing to accept the limitations of what's
>>     available, but can I tell where that limit will be?
>>
>>     The service file is from the frmts/wms directory with the
>>     "Satellite" ServerURL line active instead of the "Map" line.
>>
>>     Notes:
>>     1. Curiously, the default "Map" ServerURL works to much higher
>>     resolution (at least 15000) which makes me
>>     think that the answer to my question will be "no" since the
>>     service description files are otherwise identical!
>>     2. The map area above is Italy, but I see the same sort of
>>     behavior around the world.
>>
>>     I am using GDAL 1.11.2 on Windows7 x64, but see the same behavior
>>     on Linux RHEL5 64-bit as well.
>>
>>     Thank you very much for any insight,
>>
>>     carl
>>
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150707/e0826664/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Jul  7 15:21:15 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Tue, 7 Jul 2015 22:21:15 +0000 (UTC)
Subject: [gdal-dev] Attempting to access an ArcGIS REST API through a
	WMS format minidriver
References: <DBXPR06MB432D3FE2F78962D966878F9EB920@DBXPR06MB432.eurprd06.prod.outlook.com>
Message-ID: <loom.20150708T001514-49@post.gmane.org>

Passmore, James H. <jpass <at> bgs.ac.uk> writes:


> 
> When I try on a BGS service it fails as below:
> 
> ...:\>gdalinfo
"https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer?
f=json&pretty=true"
> gdalinfo failed - unable to open
'https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer?
f=json&pretty=
> true'.
> 
...
> 
> Is the reason that HTTPS is not supported here at all, or if not what
might be wrong with the service/request/ configuration?


By adding "--debug on" into the request I saw a message:

HTTP:
Fetch(https://map.bgs.ac.uk/arcgis/rest/services/UKSO/
UKSO_BGS/MapServer?f=json&pretty=true)
WMS: Did not get levels

Another trial with browser showed some differences between
http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer?f=json&pretty=true

and
https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer?
f=json&pretty=true

The first one sends elements like
    "level": 0,
    "resolution": 156543.03392800014,
    "scale": 5.91657527591555E8
   
but the latter not. I suppose that missing "levels" is the reason for the
failure.

-Jukka Rahkonen-





From jukka.rahkonen at maanmittauslaitos.fi  Wed Jul  8 03:46:27 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Wed, 8 Jul 2015 10:46:27 +0000 (UTC)
Subject: [gdal-dev] Transparency mask (alpha band) in ECW
Message-ID: <loom.20150708T123631-330@post.gmane.org>

Hi,

Nodata values with lossy compression like JPEG, ECW, or JPEG2000 do not
really work. I noticed that newest ECW SDK versions (>= 4) have support for
using a transparency mask:

http://blog.hexagongeospatial.com/help-ecw-speckled-edges/

"Using the ECWJP2 SDK terminology, a transparency mask is implemented as an
opacity band called AllOpacity."

GDAL ECW driver does not have support for this. I wonder if it could be
doable and if I should make a feature request. I also wonder if GDAL can
decode ECW files which have transparency mask correctly.

-Jukka Rahkonen-


From even.rouault at spatialys.com  Wed Jul  8 04:14:22 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 8 Jul 2015 13:14:22 +0200
Subject: [gdal-dev] Transparency mask (alpha band) in ECW
In-Reply-To: <loom.20150708T123631-330@post.gmane.org>
References: <loom.20150708T123631-330@post.gmane.org>
Message-ID: <201507081314.22659.even.rouault@spatialys.com>

Le mercredi 08 juillet 2015 12:46:27, Jukka Rahkonen a ?crit :
> Hi,
> 
> Nodata values with lossy compression like JPEG, ECW, or JPEG2000 do not
> really work. I noticed that newest ECW SDK versions (>= 4) have support for
> using a transparency mask:
> 
> http://blog.hexagongeospatial.com/help-ecw-speckled-edges/
> 
> "Using the ECWJP2 SDK terminology, a transparency mask is implemented as an
> opacity band called AllOpacity."
> 
> GDAL ECW driver does not have support for this. I wonder if it could be
> doable and if I should make a feature request. I also wonder if GDAL can
> decode ECW files which have transparency mask correctly.

Jukka,

I'm a bit confused by the above. If you look to the bottom of the page you 
mentio,n you'll see a gdalinfo report with an alpha band.

And I've just tried with a test file of the autotest suite:

gdalinfo ../gdrivers/data/stefan_full_rgba_ecwv3_meta.ecw

Driver: ECW/ERDAS Compressed Wavelets (SDK 5.0)
Files: ../gdrivers/data/stefan_full_rgba_ecwv3_meta.ecw
Size is 162, 150
Coordinate System is `'
Metadata:
  CLOCKWISE_ROTATION_DEG=0.000000
  COLORSPACE=RGB
  COMPRESSION_DATE=2013-04-04T09:20:03Z
  COMPRESSION_RATE_ACTUAL=3.165093
  COMPRESSION_RATE_TARGET=20
  FILE_METADATA_ACQUISITION_DATE=2012-09-12
  FILE_METADATA_ACQUISITION_SENSOR_NAME=Leica ADS-80
  FILE_METADATA_ADDRESS=2 Abbotsford Street, West Leederville WA 6007 
Australia
  FILE_METADATA_AUTHOR=Unknown
  FILE_METADATA_CLASSIFICATION=test gdal image
  FILE_METADATA_COMPANY=ERDAS-QA
  FILE_METADATA_COMPRESSION_SOFTWARE=python2.7/GDAL v1.10.0.0/ECWJP2 SDK 
v5.0.0.0
  FILE_METADATA_COPYRIGHT=Intergraph 2013
  FILE_METADATA_EMAIL=support at intergraph.com
  FILE_METADATA_TELEPHONE=+61 8 9388 2900
  VERSION=3
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  150.0)
Upper Right (  162.0,    0.0)
Lower Right (  162.0,  150.0)
Center      (   81.0,   75.0)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
  Description = Red
  Overviews: arbitrary
  Mask Flags: PER_DATASET ALPHA 
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
  Description = Green
  Overviews: arbitrary
  Mask Flags: PER_DATASET ALPHA 
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
  Description = Blue
  Overviews: arbitrary
  Mask Flags: PER_DATASET ALPHA 
Band 4 Block=256x256 Type=Byte, ColorInterp=Alpha
  Description = AllOpacity
  Overviews: arbitrary

This is a ECWv3 file. I don't have an example with ECWv2 and the "appended" 
mask, but I believe the driver should also likely be able to read/write this 
(but I haven't a ECWv2 image with alpha handy)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bishop.dev at gmail.com  Wed Jul  8 04:51:47 2015
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Wed, 08 Jul 2015 14:51:47 +0300
Subject: [gdal-dev] Attempting to access an ArcGIS REST API through a
 WMS format minidriver
In-Reply-To: <DBXPR06MB432D3FE2F78962D966878F9EB920@DBXPR06MB432.eurprd06.prod.outlook.com>
References: <DBXPR06MB432D3FE2F78962D966878F9EB920@DBXPR06MB432.eurprd06.prod.outlook.com>
Message-ID: <559D0ED3.5020304@gmail.com>

Hi James,

As the server didn't provide information about levels, some help needed 
to calculate this values. Also the all layers switched off, so we need 
to tell which layers should be shown.
I create such xml file based on information from here: 
https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer?f=json&pretty=true

  <GDAL_WMS>
     <Service name="AGS">
<ServerUrl>https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer</ServerUrl>
         <ImageFormat>png</ImageFormat>
         <Layers>show:1,2,3</Layers>
         <BBoxOrder>xyXY</BBoxOrder>
         <SRS>3857</SRS>
     </Service>
     <DataWindow>
         <UpperLeftX>-1821098.1612395868</UpperLeftX>
         <UpperLeftY>9441422.428028269</UpperLeftY>
         <LowerRightX>1157719.0542395862</LowerRightX>
         <LowerRightY>6462605.212549096</LowerRightY>
         <SizeX>1024</SizeX>
         <SizeY>1024</SizeY>
     </DataWindow>
</GDAL_WMS>

$ gdal_translate -of PNG ~/tmp/ags.xml ~/tmp/ags_test.png --config 
CPL_DEBUG ON
GDAL: GDALOpen(/home/bishop/tmp/ags.xml, this=0x15138c0) succeeds as WMS.
Input file size is 512, 512
AGS: URL = 
https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer/export?f=image&bbox=-1821098.16123959,6462605.21254910,1157719.05423959,9441422.42802827&size=512,512&dpi=&imageSR=3857&bboxSR=3857&format=png&layerdefs=&layers=show:1,2,3&transparent=false&time=&layerTimeOptions=&dynamicLayers=

HTTP: Requesting [1/1] 
https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer/export?f=image&bbox=-1821098.16123959,6462605.21254910,1157719.05423959,9441422.42802827&size=512,512&dpi=&imageSR=3857&bboxSR=3857&format=png&layerdefs=&layers=show:1,2,3&transparent=false&time=&layerTimeOptions=&dynamicLayers=
HTTP: Request [0] 
https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer/export?f=image&bbox=-1821098.16123959,6462605.21254910,1157719.05423959,9441422.42802827&size=512,512&dpi=&imageSR=3857&bboxSR=3857&format=png&layerdefs=&layers=show:1,2,3&transparent=false&time=&layerTimeOptions=&dynamicLayers= 
: status = 200, content type = image/png, error = (null)
GDAL: GDALOpen(/vsimem/wms/0x15dc720/wmsresult.dat, this=0x15c3d00) 
succeeds as PNG.
GDAL: GDALClose(/vsimem/wms/0x15dc720/wmsresult.dat, this=0x15c3d00)
0...10...20...30...40...50...60...70...80...90...100 - done.
GDAL: GDALClose(/home/bishop/tmp/ags_test.png, this=0x1599830)
GDAL: GDALClose(/home/bishop/tmp/ags.xml, this=0x15138c0)




Also I test this xml in QGIS - works fine.

Best regards,
     Dmitry

07.07.2015 18:42, Passmore, James H. ?????:
> >Fromhttp://www.gdal.org/frmt_wms.html   I see you can access an ArcGIS REST API like:
>
> gdalinfo"http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer?f=json&pretty=true"
>
> and
>
> gdal_translate"http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer?f=json"  wms.xml -of WMS
>
> These above examples work for me.
>
> When I try on a BGS service it fails as below:
>
> ...:\>gdalinfo"https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer?f=json&pretty=true"
> gdalinfo failed - unable to open 'https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer?f=json&pretty=
> true'.
>
> And:
>
> ..:\>gdal_translate"https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer?f=json&pretty=true"  bgs.xml -of WMS --debug ON
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_BAG.dll using GDALRegister_BAG.
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_ECW_JP2ECW.dll using GDALRegister_ECW_JP2ECW.
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_FITS.dll using GDALRegister_FITS.
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_GMT.dll using GDALRegister_GMT.
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_HDF4.dll using GDALRegister_HDF4.
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_HDF4Image.dll using GDALRegister_HDF4Image.
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_HDF5.dll using GDALRegister_HDF5.
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_HDF5Image.dll using GDALRegister_HDF5Image.
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_KEA.dll using GDALRegister_KEA.
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_MG4Lidar.dll using GDALRegister_MG4Lidar.
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_MrSID.dll using GDALRegister_MrSID.
> GDAL: Auto register C:\apps\gisinternals\bin\gdaL\plugins\gdal_netCDF.dll using GDALRegister_netCDF.
> HTTP: Fetch(https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer?f=json&pretty=true)
> WMS: Did not get levels
> HTTP: Fetch(https://map.bgs.ac.uk/arcgis/rest/services/UKSO/UKSO_BGS/MapServer?f=json&pretty=true)
> GDALOpen failed - 0
>
> Is the reason that HTTPS is not supported here at all, or if not what might be wrong with the service/request/ configuration?
>
> Thanks
>
> James
>
>
>
> ________________________________
>   This message (and any attachments) is for the recipient only. NERC is subject to the Freedom of Information Act 2000 and the contents of this email and any reply you make may be disclosed by NERC unless it is exempt from release under the Act. Any material supplied to NERC may be stored in an electronic records management system.
> ________________________________
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150708/c429e09b/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: dejjcaed.
Type: image/png
Size: 24212 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150708/c429e09b/attachment-0001.png>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Jul  8 05:01:47 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Wed, 8 Jul 2015 12:01:47 +0000 (UTC)
Subject: [gdal-dev] Transparency mask (alpha band) in ECW
References: <loom.20150708T123631-330@post.gmane.org>
	<201507081314.22659.even.rouault@spatialys.com>
Message-ID: <loom.20150708T134819-215@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

> > 
> > GDAL ECW driver does not have support for this. I wonder if it could be
> > doable and if I should make a feature request. I also wonder if GDAL can
> > decode ECW files which have transparency mask correctly.
> 
> Jukka,
> 
> I'm a bit confused by the above. If you look to the bottom of the page you 
> mentio,n you'll see a gdalinfo report with an alpha band.
> 
> And I've just tried with a test file of the autotest suite:
> 
> gdalinfo ../gdrivers/data/stefan_full_rgba_ecwv3_meta.ecw

.... 
> This is a ECWv3 file. I don't have an example with ECWv2 and the "appended" 
> mask, but I believe the driver should also likely be able to read/write this 
> (but I haven't a ECWv2 image with alpha handy)


Hi Even,

I apologize, I do not use ECW myself nowadays but I was reading this
gis.stackexchange question which deals actually with FME 
http://gis.stackexchange.com/questions/153490/how-to-convert-tif-to-ecw-with-fme-maintaining-a-certain-value?noredirect=1#comment225797_153490

Then I read our ECW manual page http://www.gdal.org/frmt_ecw.html which does
not talk anything about nodata, alpha, transparency etc. I just thought that
we can't handle nodata any better than FME but obviously we can. I do not
have SDK license so I could not test ECW output myself.

Is the ECW transparency band created automatically if user has Read/Write
SDK >= 4.0 and source data has either alpha channel or nodata set in
GeoTIFF? ECW driver does not seem to have any creation option for that but
perhaps it is not necessary.

-Jukka-



From even.rouault at spatialys.com  Wed Jul  8 05:07:48 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 8 Jul 2015 14:07:48 +0200
Subject: [gdal-dev] Transparency mask (alpha band) in ECW
In-Reply-To: <loom.20150708T134819-215@post.gmane.org>
References: <loom.20150708T123631-330@post.gmane.org>
	<201507081314.22659.even.rouault@spatialys.com>
	<loom.20150708T134819-215@post.gmane.org>
Message-ID: <201507081407.48396.even.rouault@spatialys.com>

Le mercredi 08 juillet 2015 14:01:47, Jukka Rahkonen a ?crit :
> Even Rouault <even.rouault <at> spatialys.com> writes:
> > > GDAL ECW driver does not have support for this. I wonder if it could be
> > > doable and if I should make a feature request. I also wonder if GDAL
> > > can decode ECW files which have transparency mask correctly.
> > 
> > Jukka,
> > 
> > I'm a bit confused by the above. If you look to the bottom of the page
> > you mentio,n you'll see a gdalinfo report with an alpha band.
> > 
> > And I've just tried with a test file of the autotest suite:
> > 
> > gdalinfo ../gdrivers/data/stefan_full_rgba_ecwv3_meta.ecw
> 
> ....
> 
> > This is a ECWv3 file. I don't have an example with ECWv2 and the
> > "appended" mask, but I believe the driver should also likely be able to
> > read/write this (but I haven't a ECWv2 image with alpha handy)
> 
> Hi Even,
> 
> I apologize,

No problem

> I do not use ECW myself nowadays but I was reading this
> gis.stackexchange question which deals actually with FME
> http://gis.stackexchange.com/questions/153490/how-to-convert-tif-to-ecw-wit
> h-fme-maintaining-a-certain-value?noredirect=1#comment225797_153490
> 
> Then I read our ECW manual page http://www.gdal.org/frmt_ecw.html which
> does not talk anything about nodata, alpha, transparency etc. I just
> thought that we can't handle nodata any better than FME but obviously we
> can. I do not have SDK license so I could not test ECW output myself.
> 
> Is the ECW transparency band created automatically if user has Read/Write
> SDK >= 4.0 and source data has either alpha channel or nodata set in
> GeoTIFF?

As far as I understand the code, yes that should be automatic if the 4th band 
of the source raster is advertized as an Alpha channel.

> ECW driver does not seem to have any creation option for that but
> perhaps it is not necessary.
> 
> -Jukka-
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From yutaxsato at gmail.com  Wed Jul  8 06:13:48 2015
From: yutaxsato at gmail.com (Yuta Sato)
Date: Wed, 8 Jul 2015 22:13:48 +0900
Subject: [gdal-dev] Accelerate Raster Calculation
Message-ID: <CAPqnkJR_WScGUSctF3vqSXB9KZ+OqvuEb=SWX+Fvnc_iL9ZnjA@mail.gmail.com>

Dear GDAL Developers:

I am doing raster calculation by reading the bands as numpy array, doing
numpy calculation, and writing back the numpy array. But seems pretty
slower, what is the faster way to do it?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150708/18eb6971/attachment.html>

From nicolas.cadieux at archeotec.ca  Wed Jul  8 07:14:47 2015
From: nicolas.cadieux at archeotec.ca (Nicolas Cadieux)
Date: Wed, 8 Jul 2015 10:14:47 -0400
Subject: [gdal-dev] Accelerate Raster Calculation
In-Reply-To: <CAPqnkJR_WScGUSctF3vqSXB9KZ+OqvuEb=SWX+Fvnc_iL9ZnjA@mail.gmail.com>
Message-ID: <fb7153fa-ef8a-4127-aa8f-b2c5b3c18f59@email.android.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150708/feafcbd2/attachment.html>

From jacek.tomaka at hexagongeospatial.com  Wed Jul  8 18:33:36 2015
From: jacek.tomaka at hexagongeospatial.com (Tomaka, Jacek)
Date: Thu, 9 Jul 2015 01:33:36 +0000
Subject: [gdal-dev] Transparency mask (alpha band) in ECW
In-Reply-To: <201507081407.48396.even.rouault@spatialys.com>
References: <loom.20150708T123631-330@post.gmane.org>
	<201507081314.22659.even.rouault@spatialys.com>
	<loom.20150708T134819-215@post.gmane.org>
	<201507081407.48396.even.rouault@spatialys.com>
Message-ID: <3ED562F633B1AE46BF141E903F981307819E5935@ap-mbx3.ingrnet.com>

Jukka, Even, 
Here is an example of ECW v2 with opacity. 
https://trac.osgeo.org/gdal/ticket/6028

Regards.
Jacek Tomaka
-----Original Message-----
From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Even Rouault
Sent: Wednesday, 8 July 2015 8:08 PM
To: gdal-dev at lists.osgeo.org
Cc: Jukka Rahkonen
Subject: Re: [gdal-dev] Transparency mask (alpha band) in ECW

Le mercredi 08 juillet 2015 14:01:47, Jukka Rahkonen a ?crit :
> Even Rouault <even.rouault <at> spatialys.com> writes:
> > > GDAL ECW driver does not have support for this. I wonder if it 
> > > could be doable and if I should make a feature request. I also 
> > > wonder if GDAL can decode ECW files which have transparency mask correctly.
> > 
> > Jukka,
> > 
> > I'm a bit confused by the above. If you look to the bottom of the 
> > page you mentio,n you'll see a gdalinfo report with an alpha band.
> > 
> > And I've just tried with a test file of the autotest suite:
> > 
> > gdalinfo ../gdrivers/data/stefan_full_rgba_ecwv3_meta.ecw
> 
> ....
> 
> > This is a ECWv3 file. I don't have an example with ECWv2 and the 
> > "appended" mask, but I believe the driver should also likely be able 
> > to read/write this (but I haven't a ECWv2 image with alpha handy)
> 
> Hi Even,
> 
> I apologize,

No problem

> I do not use ECW myself nowadays but I was reading this 
> gis.stackexchange question which deals actually with FME 
> http://gis.stackexchange.com/questions/153490/how-to-convert-tif-to-ec
> w-wit
> h-fme-maintaining-a-certain-value?noredirect=1#comment225797_153490
> 
> Then I read our ECW manual page http://www.gdal.org/frmt_ecw.html 
> which does not talk anything about nodata, alpha, transparency etc. I 
> just thought that we can't handle nodata any better than FME but 
> obviously we can. I do not have SDK license so I could not test ECW output myself.
> 
> Is the ECW transparency band created automatically if user has 
> Read/Write SDK >= 4.0 and source data has either alpha channel or 
> nodata set in GeoTIFF?

As far as I understand the code, yes that should be automatic if the 4th band of the source raster is advertized as an Alpha channel.

> ECW driver does not seem to have any creation option for that but 
> perhaps it is not necessary.
> 
> -Jukka-
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

--
Spatialys - Geospatial professional services http://www.spatialys.com _______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


From userofgdal at gmail.com  Wed Jul  8 23:58:17 2015
From: userofgdal at gmail.com (user gdal)
Date: Thu, 9 Jul 2015 12:28:17 +0530
Subject: [gdal-dev] OGR and Sel by Attributes
Message-ID: <CAJnZZaJswvGvtvGh0fsEeXTdT2mPm-uZopu82rg_p4j-K4hpVw@mail.gmail.com>

Dear friends,
Can you please give me an example of Selection by Attributes using OGR
library. In other words, I need an example of
OGRDataSource::ExecuteSQL(...).

With thanks,


                                   Yours sincerely,

                                      B. Ramesh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150709/16e9cbd6/attachment.html>

From fazamhd at gmail.com  Thu Jul  9 11:32:31 2015
From: fazamhd at gmail.com (faza mahamood)
Date: Fri, 10 Jul 2015 00:02:31 +0530
Subject: [gdal-dev] Call for discussion on RFC 59: GDAL/OGR utilities as a
	library
Message-ID: <CAJn=qt3K5p5sJyRZsx4aV70HyyFLMNPE_YMzv3zCD9+BKUd=Ug@mail.gmail.com>

Hi,

This is a call for discussion on RFC 59: GDAL/OGR utilities as a library.

https://trac.osgeo.org/gdal/wiki/rfc59_utilities_as_a_library

Summary:

This RFC defines new function for each GDAL utility. The new utility
functions can be used to work on in-memory datasets. The utility code is
modified to call the new function. This RFC gives a general frame and
principles, demonstrated with gdalinfo, but aimed at being extended with
other utilities.

Regards,
Faza
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150710/c582140b/attachment.html>

From bishop.dev at gmail.com  Thu Jul  9 13:04:30 2015
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Thu, 09 Jul 2015 23:04:30 +0300
Subject: [gdal-dev] RFC 48: Geographical networks support
Message-ID: <559ED3CE.5020505@gmail.com>

Hi everybody,

I have just finished the integration of GSoC2014 work into the 
geographical network support in GDAL.
The major changes from original code:
1) The base network class (GNMNetwork) is inherited form GDALDataset. So 
any GDAL utility, that works with GDALDataset can work with GNMNetwork.
2) Geographical network is a new type of data, additionally to the 
DCAP_RASTER and DCAP_VECTOR, added DCAP_GNM
3) I created the generic implementation of GDAL geographical network 
(GNMGenericNetwork). The generic network have some features: support of 
connection rules, support virtual vertices and edges, etc. The 
GNMNetwork API can be changed in future as common functions to generic 
network and some other networks (pgRouting, ArcGIS, OSRM, etc.) should 
be moved to the GNMNetwork class.
4) Two network drivers created for generic network: file based 
datasource and db based datasource. The file network driver tested on 
ESRI shapefile and db - on PostGIS. The another vector datasource which 
are not applicable with this drivers should have their own drivers.
5) The main method of created and configured GNMNetwork is GetPath, 
which return the temporary OGRLayer (similar to ExecuteSQL).
6) By default the GNM is switched off. The ./configure --with-gnm should 
be run to enable GNM. Mayne set it on by default?
7) The python binding is implemented and used in tests.

The RFC 48 in most cases is actual, except C API, which is not 
implemented.  Do we need it?
https://trac.osgeo.org/gdal/wiki/rfc48_geographical_networks_support

Links:
- diff with binary test data - 
https://drive.google.com/file/d/0BzlLlHyrgQHkNkktUmxYbWtjV3M/view?usp=sharing
- diff without binary test data - 
https://drive.google.com/file/d/0BzlLlHyrgQHkZ2lZN2wwTTVOQlE/view?usp=sharing
- binary test data - 
https://drive.google.com/file/d/0BzlLlHyrgQHkTTJjRFZNOEtfb3c/view?usp=sharing

Code reviewing and testing are welcome. Also the some decisions in 
implementation can be discussed.

The GDAL 2.0 provide ability to create datasets combine vector and 
raster data (drivers support both types).
In case of PostGIS we can have the driver combined vector, raster and 
networks (pgRouting). Maybe someone give an idea how it can be done.

-- 
Best regards,
     Dmitry


From even.rouault at spatialys.com  Thu Jul  9 14:19:27 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 9 Jul 2015 23:19:27 +0200
Subject: [gdal-dev] RFC 48: Geographical networks support
In-Reply-To: <559ED3CE.5020505@gmail.com>
References: <559ED3CE.5020505@gmail.com>
Message-ID: <201507092319.27141.even.rouault@spatialys.com>

Hi Dmitry,

> 
> I have just finished the integration of GSoC2014 work into the
> geographical network support in GDAL.
> The major changes from original code:
> 1) The base network class (GNMNetwork) is inherited form GDALDataset. So
> any GDAL utility, that works with GDALDataset can work with GNMNetwork.
> 2) Geographical network is a new type of data, additionally to the
> DCAP_RASTER and DCAP_VECTOR, added DCAP_GNM
> 3) I created the generic implementation of GDAL geographical network
> (GNMGenericNetwork). The generic network have some features: support of
> connection rules, support virtual vertices and edges, etc. The
> GNMNetwork API can be changed in future as common functions to generic
> network and some other networks (pgRouting, ArcGIS, OSRM, etc.) should
> be moved to the GNMNetwork class.
> 4) Two network drivers created for generic network: file based
> datasource and db based datasource. The file network driver tested on
> ESRI shapefile and db - on PostGIS. The another vector datasource which
> are not applicable with this drivers should have their own drivers.

I could probably figure out that myself by looking at the code, but what are 
the main difference between the generic file network driver and the db file 
network driver ? Both should use the generic OGR API, no ?

> 5) The main method of created and configured GNMNetwork is GetPath,
> which return the temporary OGRLayer (similar to ExecuteSQL).
> 6) By default the GNM is switched off. The ./configure --with-gnm should
> be run to enable GNM. Mayne set it on by default?

I think the decision depends mostly on how much we are confident that the API 
is stable. While there's not a non-generic driver implemented, there's 
potentially a risk (I think, but I've not a strong opinion on this.)

> 7) The python binding is implemented and used in tests.
> 
> The RFC 48 in most cases is actual, except C API, which is not
> implemented.  Do we need it?

The idea is that the SWIG bindings only needs to know the C API, which provide 
some insulation from C++ ABI changes. So you could theoretically use the GDAL 
2.0.0 Python bindings with a GDAL 2.1.0 shared object.
But the main reason might be to avoid issues related to C++ ABI if not using 
the same compiler for the GDAL dll and building the Python bindings. Which can 
happen on Windows since the Python bindings require the same MSVC version than 
the one used to compile Python itself. When sticking to the C ABI, you can be 
safe. With the C++ ABI, some bad things could potentially happen.

> https://trac.osgeo.org/gdal/wiki/rfc48_geographical_networks_support
> 
> Links:

Perhaps do you have a git branch somewhere (just for the sake of easier 
applying) ?

> - diff with binary test data -
> https://drive.google.com/file/d/0BzlLlHyrgQHkNkktUmxYbWtjV3M/view?usp=shari
> ng - diff without binary test data -
> https://drive.google.com/file/d/0BzlLlHyrgQHkZ2lZN2wwTTVOQlE/view?usp=shari
> ng - binary test data -
> https://drive.google.com/file/d/0BzlLlHyrgQHkTTJjRFZNOEtfb3c/view?usp=shari
> ng
> 
> Code reviewing and testing are welcome. Also the some decisions in
> implementation can be discussed.

From a random skimming, I'm wondering about the below :

+%inline %{
+  GNMNetworkShadow* CastToNetwork(GDALMajorObjectShadow* base) {
+    return static_cast<GNMNetworkShadow*>(base);
+  }
+%}
+
+%inline %{
+  GNMGenericNetworkShadow* CastToGenericNetwork(GDALMajorObjectShadow* base) 
{
+    return static_cast<GNMGenericNetworkShadow*>(base);
+  }
+%}
+

Shouldn't that be a dynamic_cast ? Otherwise you'll manage to cast any 
GDALMajorObject into a GNMxxxx even when it is not valid. You could probably 
test that by trying to cast a TIFF dataset or something completely irrelevant.

> 
> The GDAL 2.0 provide ability to create datasets combine vector and
> raster data (drivers support both types).
> In case of PostGIS we can have the driver combined vector, raster and
> networks (pgRouting). Maybe someone give an idea how it can be done.


Currently, from what I see from the generic network implementation, the whole 
graph is loaded from storage into memory at Open() time 
(GNMFileNetwork::Open() calling LoadGraphLayer()). Right ?  Wondering how much 
a limitation it can be in practice. Couldn't the loading of the graph be 
defered up to the point it is really needed, so that Open() is kept reasonably 
fast ? I don't see any try catch around insertions into STL containers, so I 
guess that things might blow up if a too big graph is loaded.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bishop.dev at gmail.com  Fri Jul 10 06:18:38 2015
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Fri, 10 Jul 2015 16:18:38 +0300
Subject: [gdal-dev] RFC 48: Geographical networks support
In-Reply-To: <201507092319.27141.even.rouault@spatialys.com>
References: <559ED3CE.5020505@gmail.com>
	<201507092319.27141.even.rouault@spatialys.com>
Message-ID: <559FC62E.2060606@gmail.com>

Hi Even,

10.07.2015 00:19, Even Rouault ?????:
> Hi Dmitry,
>
>> I have just finished the integration of GSoC2014 work into the
>> geographical network support in GDAL.
>> The major changes from original code:
>> 1) The base network class (GNMNetwork) is inherited form GDALDataset. So
>> any GDAL utility, that works with GDALDataset can work with GNMNetwork.
>> 2) Geographical network is a new type of data, additionally to the
>> DCAP_RASTER and DCAP_VECTOR, added DCAP_GNM
>> 3) I created the generic implementation of GDAL geographical network
>> (GNMGenericNetwork). The generic network have some features: support of
>> connection rules, support virtual vertices and edges, etc. The
>> GNMNetwork API can be changed in future as common functions to generic
>> network and some other networks (pgRouting, ArcGIS, OSRM, etc.) should
>> be moved to the GNMNetwork class.
>> 4) Two network drivers created for generic network: file based
>> datasource and db based datasource. The file network driver tested on
>> ESRI shapefile and db - on PostGIS. The another vector datasource which
>> are not applicable with this drivers should have their own drivers.
> I could probably figure out that myself by looking at the code, but what are
> the main difference between the generic file network driver and the db file
> network driver ? Both should use the generic OGR API, no ?
The difference come from the OGR driver specific. For example, database can
store strings more than 255 characters, but shape file - not (I need to 
store the
spatial reference somethere), also in file based sources the layer usually
connect with it's own datasource,  and database have a one datasource 
for all
layers. Also, in file based datasource the network is a sonamed folder, and
during deletion process the folder may be deleted if it empty (if user 
put to
this folder it's own files, the folder will not deleted). In case of 
database the
network is a database schema. So, the such differences force me to make 
the two
drivers. Also this drivers show the example of implementation the 
generic network
support.
>
>> 5) The main method of created and configured GNMNetwork is GetPath,
>> which return the temporary OGRLayer (similar to ExecuteSQL).
>> 6) By default the GNM is switched off. The ./configure --with-gnm should
>> be run to enable GNM. Mayne set it on by default?
> I think the decision depends mostly on how much we are confident that the API
> is stable. While there's not a non-generic driver implemented, there's
> potentially a risk (I think, but I've not a strong opinion on this.)
Ok, let leave it. Also I change nmake to not build GNM by default
>
>> 7) The python binding is implemented and used in tests.
>>
>> The RFC 48 in most cases is actual, except C API, which is not
>> implemented.  Do we need it?
> The idea is that the SWIG bindings only needs to know the C API, which provide
> some insulation from C++ ABI changes. So you could theoretically use the GDAL
> 2.0.0 Python bindings with a GDAL 2.1.0 shared object.
> But the main reason might be to avoid issues related to C++ ABI if not using
> the same compiler for the GDAL dll and building the Python bindings. Which can
> happen on Windows since the Python bindings require the same MSVC version than
> the one used to compile Python itself. When sticking to the C ABI, you can be
> safe. With the C++ ABI, some bad things could potentially happen.
Done
>
>> https://trac.osgeo.org/gdal/wiki/rfc48_geographical_networks_support
>>
>> Links:
> Perhaps do you have a git branch somewhere (just for the sake of easier
> applying) ?
Ok, I send the pull request.
>
>> - diff with binary test data -
>> https://drive.google.com/file/d/0BzlLlHyrgQHkNkktUmxYbWtjV3M/view?usp=shari
>> ng - diff without binary test data -
>> https://drive.google.com/file/d/0BzlLlHyrgQHkZ2lZN2wwTTVOQlE/view?usp=shari
>> ng - binary test data -
>> https://drive.google.com/file/d/0BzlLlHyrgQHkTTJjRFZNOEtfb3c/view?usp=shari
>> ng
>>
>> Code reviewing and testing are welcome. Also the some decisions in
>> implementation can be discussed.
>  From a random skimming, I'm wondering about the below :
>
> +%inline %{
> +  GNMNetworkShadow* CastToNetwork(GDALMajorObjectShadow* base) {
> +    return static_cast<GNMNetworkShadow*>(base);
> +  }
> +%}
> +
> +%inline %{
> +  GNMGenericNetworkShadow* CastToGenericNetwork(GDALMajorObjectShadow* base)
> {
> +    return static_cast<GNMGenericNetworkShadow*>(base);
> +  }
> +%}
> +
>
> Shouldn't that be a dynamic_cast ? Otherwise you'll manage to cast any
> GDALMajorObject into a GNMxxxx even when it is not valid. You could probably
> test that by trying to cast a TIFF dataset or something completely irrelevant.
The compiler didn't let me dynamic cast from void* to void* (as the
GDALMajorObjectShadow* is typedef void* and GNMNetworkShadow*,
GNMGenericNetworkShadow* also void). Any idea how to solve this?
>> The GDAL 2.0 provide ability to create datasets combine vector and
>> raster data (drivers support both types).
>> In case of PostGIS we can have the driver combined vector, raster and
>> networks (pgRouting). Maybe someone give an idea how it can be done.
>
> Currently, from what I see from the generic network implementation, the whole
> graph is loaded from storage into memory at Open() time
> (GNMFileNetwork::Open() calling LoadGraphLayer()). Right ?  Wondering how much
> a limitation it can be in practice. Couldn't the loading of the graph be
> defered up to the point it is really needed, so that Open() is kept reasonably
> fast ? I don't see any try catch around insertions into STL containers, so I
> guess that things might blow up if a too big graph is loaded.
Yes, there is a note in graph description (doxygen comments) that this
implementation are limited and may be potential problems with big graphs.
The GNMGraph class is a subject of future improvements. But lazy loading 
of the
graph data make sense. Done it.
>
> Even
>

Best regards,
     Dmitry


From even.rouault at spatialys.com  Fri Jul 10 06:39:07 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 10 Jul 2015 15:39:07 +0200
Subject: [gdal-dev] RFC 48: Geographical networks support
In-Reply-To: <559FC62E.2060606@gmail.com>
References: <559ED3CE.5020505@gmail.com>
	<201507092319.27141.even.rouault@spatialys.com>
	<559FC62E.2060606@gmail.com>
Message-ID: <201507101539.07752.even.rouault@spatialys.com>

> 
> The compiler didn't let me dynamic cast from void* to void* (as the
> GDALMajorObjectShadow* is typedef void* and GNMNetworkShadow*,
> GNMGenericNetworkShadow* also void). Any idea how to solve this?

I think you need to statically recast the shadowed types to the real C++ 
GDALMajorObject* before doing the dynamic_cast to the real C++ GNMNetwork* 
type.

See

#include <stdio.h>

class GDALMajorObject
{
    public:
        GDALMajorObject() {}

        virtual void foo() {}
};

class GDALDataset: public GDALMajorObject
{
    public:
        GDALDataset() {}
};

class GTiffDataset: public GDALDataset
{
    public:
        GTiffDataset() {}
};

class GDALNetwork: public GDALDataset
{
    public:
        GDALNetwork() {}
};

typedef void* shadowMajorObject;

int main(int argc, char* argv[])
{
    GTiffDataset* tiff = new GTiffDataset();
    GDALNetwork* network = new GDALNetwork();
    shadowMajorObject shadowed_tiff = 
(shadowMajorObject)static_cast<GDALMajorObject*>(tiff);
    shadowMajorObject shadowed_network = 
(shadowMajorObject)static_cast<GDALMajorObject*>(network);
    printf("%p is NULL\n", 
dynamic_cast<GDALNetwork*>((GDALMajorObject*)shadowed_tiff));
    printf("%p is not NULL\n", 
dynamic_cast<GDALNetwork*>((GDALMajorObject*)shadowed_network));
    return 0;
}

Those cast operations should also be done in a function of the C API I think 
to avoid depending on the C++ objects.


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jesse.hietanen at gmail.com  Mon Jul 13 01:21:30 2015
From: jesse.hietanen at gmail.com (johie)
Date: Mon, 13 Jul 2015 01:21:30 -0700 (PDT)
Subject: [gdal-dev]  GDAL Java Bindings - Convert raster from [0,
 360] to [-180, 180]
Message-ID: <1436775690929-5215366.post@n6.nabble.com>

Hi!

I'm processing some global GRIB2/netCDF data which have East-West
coordinates of 0-360 degrees. I need to have the output data on typical
-180, 180 range to process them later with some other data. When I reproject
them to WGS84 and convert to GeoTiff, the output is still 0-360. 

I found that I can then warp that output GeoTiff using the command line
gdal: gdalwarp -t_srs WGS84 input360.tif output180.tif --config CENTER_LONG
0 -wo SOURCE_EXTRA=1000

This work just fine and the output is correct. But I would need to do this
using the Java bindings. I can pass the Center Long with:
gdal.SetConfigOption("CENTER_LONG", "0"); But not the Source_Extra, which is
WarpingOptions if I understood correctly? In java there seems to be no way
to pass these warping options when using AutoCreatedWarped and Create (see
processing flow:
http://osgeo-org.1560.x6.nabble.com/gdal-dev-GDAL-Java-Bindings-No-data-value-using-AutoCreateWarpedVRT-td5212697.html) 

Is there some workaround to this using the Java? 

This is how the output looks when processing with the Java (Data is lost on
the white "stripe"). This looks the same as using the gdalwarp without
Source_extra.

<http://osgeo-org.1560.x6.nabble.com/file/n5215366/GDAL_CenterLong0.png> 

Thanks a lot!

Jesse





--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-GDAL-Java-Bindings-Convert-raster-from-0-360-to-180-180-tp5215366.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From cgodkin at gmail.com  Mon Jul 13 06:32:18 2015
From: cgodkin at gmail.com (Carl Godkin)
Date: Mon, 13 Jul 2015 06:32:18 -0700
Subject: [gdal-dev] Can I interpret GIBS ASTER_GDEM_Color_Index as elevation
	somehow?
Message-ID: <CAE=8km=czYEBYJNAxEqqTz4=Jqd62OsM=hzam5TGL9eRvBy-mA@mail.gmail.com>

Hi again,

I'm interested in trying to use the "Script-level Access via GDAL" guidance
on the NASA "GIBS API for Developers" page:

https://wiki.earthdata.nasa.gov/display/GIBS/GIBS+API+for+Developers

The layer I'm interested in is "ASTER_GDEM_Color_Index" which is elevation
data.

The site contains advice on how to customize a WMS service description file
for the multitude of data types offered and I came up with this:

<GDAL_WMS>
  <Service name="TMS">
    <ServerUrl>
http://map1.vis.earthdata.nasa.gov/wmts-geo/ASTER_GDEM_Color_Index/default/2014-01-01/EPSG4326_31m/${z}/${y}/${x}.png
</ServerUrl>
  </Service>
  <DataWindow>
    <UpperLeftX>-180.0</UpperLeftX>
    <UpperLeftY>90</UpperLeftY>
    <LowerRightX>396.0</LowerRightX>
    <LowerRightY>-198</LowerRightY>
    <TileLevel>11</TileLevel>
    <TileCountX>2</TileCountX>
    <TileCountY>1</TileCountY>
    <YOrigin>top</YOrigin>
  </DataWindow>
  <Projection>EPSG:4326</Projection>
  <BlockSizeX>512</BlockSizeX>
  <BlockSizeY>512</BlockSizeY>
  <BandsCount>4</BandsCount>
</GDAL_WMS>

I made two changes in order to make it work properly.

1. I think that the resolution is actually 31m which I found here

http://map1.vis.earthdata.nasa.gov/wmts-geo/1.0.0/WMTSCapabilities.xml

2. The TileLevel is 11, which I believes follows from the increased
resolution.

Anyway, the following command (adapted from one of the examples on the
page) works beautifully:

gdal_translate -outsize 1200 1000 -projwin -105 42 -93 32 my.xml out.tif

However, it produces four bands of a colored GeoTIFF, whereas I'd like
elevation values instead.

Is there some way to get elevation VALUES from this?

Normally, elevation values in the GDAL world come in a single band.  Did I
overlook another Layer name that has elevation values?  Or is there some
way to lookup elevations given the RGBA values?

Thank you very much,

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150713/68c1e0a9/attachment.html>

From thare at usgs.gov  Mon Jul 13 07:09:00 2015
From: thare at usgs.gov (Hare, Trent)
Date: Mon, 13 Jul 2015 07:09:00 -0700
Subject: [gdal-dev] GDAL Java Bindings - Convert raster from [0,
 360] to [-180, 180]
In-Reply-To: <1436775690929-5215366.post@n6.nabble.com>
References: <1436775690929-5215366.post@n6.nabble.com>
Message-ID: <CAB6t5t_2YgVdANda4e5w9VJ8_oj07ekpRN9OaAW5KWJ_01Lutg@mail.gmail.com>

Jesse,
   The problem with warping is that you might incur resampling. Here is an
older thread, no longer exists beside in the wayback machine, which
explains how you can swap sides using pixel tricks in a VRT header
(pointing to your original data).
https://web.archive.org/web/20130618003511/http:/www1.eonfusion.com/manual/index.php/Manipulate_rasters_with_GDAL_VRT

It should be fairly easy to script up something to do this general also. I
use this trick to no only swap from 180 to 360 but also support WMS layers
from -180 to 360 (540 degrees total) without duplicating data. That way WMS
clients can call either ranges from -180 to 180 or 0 to 360.

Regards,
Trent

On Mon, Jul 13, 2015 at 1:21 AM, johie <jesse.hietanen at gmail.com> wrote:

> Hi!
>
> I'm processing some global GRIB2/netCDF data which have East-West
> coordinates of 0-360 degrees. I need to have the output data on typical
> -180, 180 range to process them later with some other data. When I
> reproject
> them to WGS84 and convert to GeoTiff, the output is still 0-360.
>
> I found that I can then warp that output GeoTiff using the command line
> gdal: gdalwarp -t_srs WGS84 input360.tif output180.tif --config CENTER_LONG
> 0 -wo SOURCE_EXTRA=1000
>
> This work just fine and the output is correct. But I would need to do this
> using the Java bindings. I can pass the Center Long with:
> gdal.SetConfigOption("CENTER_LONG", "0"); But not the Source_Extra, which
> is
> WarpingOptions if I understood correctly? In java there seems to be no way
> to pass these warping options when using AutoCreatedWarped and Create (see
> processing flow:
>
> http://osgeo-org.1560.x6.nabble.com/gdal-dev-GDAL-Java-Bindings-No-data-value-using-AutoCreateWarpedVRT-td5212697.html
> )
>
> Is there some workaround to this using the Java?
>
> This is how the output looks when processing with the Java (Data is lost on
> the white "stripe"). This looks the same as using the gdalwarp without
> Source_extra.
>
> <http://osgeo-org.1560.x6.nabble.com/file/n5215366/GDAL_CenterLong0.png>
>
> Thanks a lot!
>
> Jesse
>
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/gdal-dev-GDAL-Java-Bindings-Convert-raster-from-0-360-to-180-180-tp5215366.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150713/62cf3f20/attachment.html>

From mdsumner at gmail.com  Mon Jul 13 07:21:58 2015
From: mdsumner at gmail.com (Michael Sumner)
Date: Mon, 13 Jul 2015 14:21:58 +0000
Subject: [gdal-dev] GDAL Java Bindings - Convert raster from [0,
 360] to [-180, 180]
In-Reply-To: <CAB6t5t_2YgVdANda4e5w9VJ8_oj07ekpRN9OaAW5KWJ_01Lutg@mail.gmail.com>
References: <1436775690929-5215366.post@n6.nabble.com>
	<CAB6t5t_2YgVdANda4e5w9VJ8_oj07ekpRN9OaAW5KWJ_01Lutg@mail.gmail.com>
Message-ID: <CAAcGz98qcQkVdYPUSN-gSHZe9Z6V-D5UsBJfXZdPsMpGpKBX0w@mail.gmail.com>

Ahem, I think this is the original tutorial intended by Trent:

https://trac.osgeo.org/gdal/wiki/UserDocs/RasterProcTutorial

See lower down under "Virtual files".

(The other page was specific to another project, now defunct - though it
did source from this original GDAL tutorial)

Cheers, Mike.

On Tue, 14 Jul 2015 at 00:09 Hare, Trent <thare at usgs.gov> wrote:

> Jesse,
>    The problem with warping is that you might incur resampling. Here is an
> older thread, no longer exists beside in the wayback machine, which
> explains how you can swap sides using pixel tricks in a VRT header
> (pointing to your original data).
>
> https://web.archive.org/web/20130618003511/http:/www1.eonfusion.com/manual/index.php/Manipulate_rasters_with_GDAL_VRT
>
> It should be fairly easy to script up something to do this general also. I
> use this trick to no only swap from 180 to 360 but also support WMS layers
> from -180 to 360 (540 degrees total) without duplicating data. That way WMS
> clients can call either ranges from -180 to 180 or 0 to 360.
>
> Regards,
> Trent
>
> On Mon, Jul 13, 2015 at 1:21 AM, johie <jesse.hietanen at gmail.com> wrote:
>
>> Hi!
>>
>> I'm processing some global GRIB2/netCDF data which have East-West
>> coordinates of 0-360 degrees. I need to have the output data on typical
>> -180, 180 range to process them later with some other data. When I
>> reproject
>> them to WGS84 and convert to GeoTiff, the output is still 0-360.
>>
>> I found that I can then warp that output GeoTiff using the command line
>> gdal: gdalwarp -t_srs WGS84 input360.tif output180.tif --config
>> CENTER_LONG
>> 0 -wo SOURCE_EXTRA=1000
>>
>> This work just fine and the output is correct. But I would need to do this
>> using the Java bindings. I can pass the Center Long with:
>> gdal.SetConfigOption("CENTER_LONG", "0"); But not the Source_Extra, which
>> is
>> WarpingOptions if I understood correctly? In java there seems to be no way
>> to pass these warping options when using AutoCreatedWarped and Create (see
>> processing flow:
>>
>> http://osgeo-org.1560.x6.nabble.com/gdal-dev-GDAL-Java-Bindings-No-data-value-using-AutoCreateWarpedVRT-td5212697.html
>> )
>>
>> Is there some workaround to this using the Java?
>>
>> This is how the output looks when processing with the Java (Data is lost
>> on
>> the white "stripe"). This looks the same as using the gdalwarp without
>> Source_extra.
>>
>> <http://osgeo-org.1560.x6.nabble.com/file/n5215366/GDAL_CenterLong0.png>
>>
>> Thanks a lot!
>>
>> Jesse
>>
>>
>>
>>
>>
>> --
>> View this message in context:
>> http://osgeo-org.1560.x6.nabble.com/gdal-dev-GDAL-Java-Bindings-Convert-raster-from-0-360-to-180-180-tp5215366.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150713/eec436f7/attachment-0001.html>

From bdmorri2 at illinois.edu  Mon Jul 13 10:12:02 2015
From: bdmorri2 at illinois.edu (Morrison, Bailey Danielle)
Date: Mon, 13 Jul 2015 17:12:02 +0000
Subject: [gdal-dev] Need to resample climate data to very fine resolution
Message-ID: <6B3C0926921A5745AFDF366F0C90725810D3B768@CHIMBX1.ad.uillinois.edu>

Hello,

I am having issues using gdalwarp to resample climate data to a finer resolution. Each climate raster has been clipped to the extent of Alaska, and contain >300 layers (1 for every month from 1979-2010). The current resolution of the rasters is >1000 km and they need to be resample to around 33 meters, making the new files go from ~8 MB to 33 GB. I have been testing out gdalwarp on these files but so far I cannot get them to resample in a reasonable amount of time. I ran one for over 15 hours on my universities campus cluster and it never passed the 0% complete mark.  I need to be able to get each file done in less then 48 hours since that is the time frame limit on the cluster.

My current code is: gdalwarp /project/oa/akpaleo/climate/ccsm4/modern/reprojected/pr_Amon_CCSM4_amip_r1i1p1_197901-201012.tif -tr 33.945415050894333 33.945415050894333 -r "cubic" /projects/oa/akpaleo/climate/ccsm4/modern/resample/pr.tif


I don't know if I have written this out incorrectly to get the resample to work since I am new to gdal, but I believe this is correct.

Does anyone know a reasonable way to speed this process up (or get around the time limit issue) correctly without causing incorrect calculations to the output files?

I've attached a link to one of the climate rasters I am using.

https://uofi.box.com/s/4cv7tvpnf29d70n9wb0a8t9y4oxmudql


Thank you,

Bailey Morrison
PhD Student
NASA Earth and Space Science Fellow
University of Illinois at Urbana-Champaign
Program in Ecology, Evolution, and Conservation Biology
Global Environmental Analysis and Remote Sensing Lab (GEARS)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150713/97346b97/attachment.html>

From ljvillarin30 at gmail.com  Mon Jul 13 20:58:38 2015
From: ljvillarin30 at gmail.com (oz)
Date: Mon, 13 Jul 2015 20:58:38 -0700 (PDT)
Subject: [gdal-dev] Getting warning when opening NetCDF file using gdal?
In-Reply-To: <CAAcGz9-8AHaXgJQAYgz+wuujcVEJdfijAAMzcBN15Zm2dDEp0Q@mail.gmail.com>
References: <1435632519375-5213484.post@n6.nabble.com>
	<55924804.5050307@nersc.no>
	<1435655330127-5213534.post@n6.nabble.com>
	<5592659E.6040004@nersc.no>
	<CAAcGz98mS52aQ3qR1EXKD9p=ag5oUhAEfvL0E6_kHLxuOBLTpw@mail.gmail.com>
	<CAAcGz9-8AHaXgJQAYgz+wuujcVEJdfijAAMzcBN15Zm2dDEp0Q@mail.gmail.com>
Message-ID: <1436846318007-5215504.post@n6.nabble.com>

Do you have any idea on how will I batch process gdalwarp these HDF5 files? 



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Getting-warning-when-opening-NetCDF-file-using-gdal-tp5213484p5215504.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From lucena_ivan at hotmail.com  Mon Jul 13 22:31:46 2015
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Tue, 14 Jul 2015 01:31:46 -0400
Subject: [gdal-dev] Need to resample climate data to very fine resolution
In-Reply-To: <6B3C0926921A5745AFDF366F0C90725810D3B768@CHIMBX1.ad.uillinois.edu>
References: <6B3C0926921A5745AFDF366F0C90725810D3B768@CHIMBX1.ad.uillinois.edu>
Message-ID: <BLU173-W17471AEBC9C906653927E9909B0@phx.gbl>

Bailey,

It seems like you don't need geometric transformation of your images. We can see that your input is called reprojected. You just need to re-scale it, interpolating/filling it up with pixels values based on cubic method. 

You can do that with gdal_translate -tr or -outsize parameters. 

It should be faster since it requires less floating point computation on the warping/transformation.

But it could be that gdalwarp is smart enough to figure out that it doesn't need to do any transformation.

You can give it a try.

Regards,

Ivan

From: bdmorri2 at illinois.edu
To: gdal-dev at lists.osgeo.org
Date: Mon, 13 Jul 2015 17:12:02 +0000
Subject: [gdal-dev] Need to resample climate data to very fine resolution









Hello,
 
I am having issues using gdalwarp to resample climate data to a finer resolution. Each climate raster has been clipped to the extent of Alaska, and contain >300 layers (1 for every month from 1979-2010). The current resolution of the rasters
 is >1000 km and they need to be resample to around 33 meters, making the new files go from ~8 MB to 33 GB. I have been testing out gdalwarp on these files but so far I cannot get them to resample in a reasonable amount of time. I ran one for over 15 hours
 on my universities campus cluster and it never passed the 0% complete mark.  I need to be able to get each file done in less then 48 hours since that is the time frame limit on the cluster.

 
My current code is: gdalwarp /project/oa/akpaleo/climate/ccsm4/modern/reprojected/pr_Amon_CCSM4_amip_r1i1p1_197901-201012.tif
 ?tr 33.945415050894333 33.945415050894333 ?r ?cubic? /projects/oa/akpaleo/climate/ccsm4/modern/resample/pr.tif

 
 
I don?t know if I have written this out incorrectly to get the resample to work since I am new to gdal, but I believe this is correct.
 
Does anyone know a reasonable way to speed this process up (or get around the time limit issue) correctly without causing incorrect calculations
 to the output files? 
 
I?ve attached a link to one of the climate rasters I am using.

 
https://uofi.box.com/s/4cv7tvpnf29d70n9wb0a8t9y4oxmudql

 
 
Thank you,
 
Bailey Morrison
PhD Student
NASA Earth and Space Science Fellow
University of Illinois at Urbana-Champaign
Program in Ecology, Evolution, and Conservation Biology
Global Environmental Analysis and Remote Sensing Lab (GEARS)




_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150714/9073f8ba/attachment.html>

From jesse.hietanen at gmail.com  Tue Jul 14 00:43:14 2015
From: jesse.hietanen at gmail.com (johie)
Date: Tue, 14 Jul 2015 00:43:14 -0700 (PDT)
Subject: [gdal-dev] GDAL Java Bindings - Convert raster from [0,
 360] to [-180, 180]
In-Reply-To: <CAAcGz98qcQkVdYPUSN-gSHZe9Z6V-D5UsBJfXZdPsMpGpKBX0w@mail.gmail.com>
References: <1436775690929-5215366.post@n6.nabble.com>
	<CAB6t5t_2YgVdANda4e5w9VJ8_oj07ekpRN9OaAW5KWJ_01Lutg@mail.gmail.com>
	<CAAcGz98qcQkVdYPUSN-gSHZe9Z6V-D5UsBJfXZdPsMpGpKBX0w@mail.gmail.com>
Message-ID: <1436859794247-5215512.post@n6.nabble.com>

Hi,

Thank you for your answers. Hmm I think that approach is quite complicated
and makes my app quite messy. I would like just to stay using the Java
bindings and get some approach that works on every file I process (only few
files have this 0-360 problem). The gdal.SetConfigOption("CENTER_LONG",
"0"); basically does what I want, but the problem is the too small buffer
(which can be solved in the command line with: -wo SOURCE_EXTRA=1000) but
there seems to be no way to pass this using the Java bindings?

If there is no way to pass it to the process, would it be possible set it as
default somewhere?

Thanks

Jesse



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-GDAL-Java-Bindings-Convert-raster-from-0-360-to-180-180-tp5215366p5215512.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at gmail.com  Tue Jul 14 08:03:10 2015
From: even.rouault at gmail.com (Even Rouault)
Date: Tue, 14 Jul 2015 17:03:10 +0200
Subject: [gdal-dev] GDAL Java Bindings - Convert raster from [0,
 360] to [-180, 180]
In-Reply-To: <1436859794247-5215512.post@n6.nabble.com>
References: <1436775690929-5215366.post@n6.nabble.com>
	<CAB6t5t_2YgVdANda4e5w9VJ8_oj07ekpRN9OaAW5KWJ_01Lutg@mail.gmail.com>
	<CAAcGz98qcQkVdYPUSN-gSHZe9Z6V-D5UsBJfXZdPsMpGpKBX0w@mail.gmail.com>
	<1436859794247-5215512.post@n6.nabble.com>
Message-ID: <CALxNk+kWKE1Z8kdGg14=SoaoN-=3dtzDgSRb68FPZP1obxQt0w@mail.gmail.com>

Jesse,

In fact I added the possibility of specifying warping options to
gdal.ReprojectImage() just 3 weeks ago in the development version (2.1dev)
: http://trac.osgeo.org/gdal/changeset/29424/
So if you can affort running trunk, you could benefit from that. Note that
I only tested with Python but I'm confident this should also now be
available in the Java bindings as well.

Even

2015-07-14 9:43 GMT+02:00 johie <jesse.hietanen at gmail.com>:

> Hi,
>
> Thank you for your answers. Hmm I think that approach is quite complicated
> and makes my app quite messy. I would like just to stay using the Java
> bindings and get some approach that works on every file I process (only few
> files have this 0-360 problem). The gdal.SetConfigOption("CENTER_LONG",
> "0"); basically does what I want, but the problem is the too small buffer
> (which can be solved in the command line with: -wo SOURCE_EXTRA=1000) but
> there seems to be no way to pass this using the Java bindings?
>
> If there is no way to pass it to the process, would it be possible set it
> as
> default somewhere?
>
> Thanks
>
> Jesse
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/gdal-dev-GDAL-Java-Bindings-Convert-raster-from-0-360-to-180-180-tp5215366p5215512.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


-- 

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150714/c13c78b7/attachment.html>

From jamessramm at gmail.com  Tue Jul 14 08:25:47 2015
From: jamessramm at gmail.com (jramm)
Date: Tue, 14 Jul 2015 08:25:47 -0700 (PDT)
Subject: [gdal-dev] gdal_rasterize in multiple processes
Message-ID: <1436887547316-5215591.post@n6.nabble.com>

I have a number of vector datasets to rasterize. 

I am finding that when the datasets are small, I have no problem starting
multiple gdal_rasterize processes (using python). 

If my datasets are large (I'm trying to create rasters with millions of
pixels), I'm finding that I can only start one gdal_rasterize process at
once, or sometimes, after a couple have started the rest refuse to start.

RAM shows usage below 50%, and CPU usage is also below 50%. 

I can't figure out whether this is a gdal_rasterize thing or not? 



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-rasterize-in-multiple-processes-tp5215591.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From andre+joost at nurfuerspam.de  Tue Jul 14 08:34:56 2015
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Tue, 14 Jul 2015 17:34:56 +0200
Subject: [gdal-dev] Getting warning when opening NetCDF file using gdal?
In-Reply-To: <1436846318007-5215504.post@n6.nabble.com>
References: <1435632519375-5213484.post@n6.nabble.com>	<55924804.5050307@nersc.no>	<1435655330127-5213534.post@n6.nabble.com>	<5592659E.6040004@nersc.no>	<CAAcGz98mS52aQ3qR1EXKD9p=ag5oUhAEfvL0E6_kHLxuOBLTpw@mail.gmail.com>	<CAAcGz9-8AHaXgJQAYgz+wuujcVEJdfijAAMzcBN15Zm2dDEp0Q@mail.gmail.com>
	<1436846318007-5215504.post@n6.nabble.com>
Message-ID: <mo3a9g$o3r$1@ger.gmane.org>

Have you tried simply gdalinfo A2015045060000.L2_LAC_OC.nc ?

It works for me with GDAL 1.11.2 from gisinternals.

HTH,
Andre Joost

Am 14.07.2015 um 05:58 schrieb oz:
> Do you have any idea on how will I batch process gdalwarp these HDF5 files?
>
>
>
> --
> View this message in context: http://osgeo-org.1560.x6.nabble.com/Getting-warning-when-opening-NetCDF-file-using-gdal-tp5213484p5215504.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>



From even.rouault at gmail.com  Tue Jul 14 16:32:14 2015
From: even.rouault at gmail.com (Even Rouault)
Date: Wed, 15 Jul 2015 01:32:14 +0200
Subject: [gdal-dev] gdal_rasterize in multiple processes
In-Reply-To: <1436887547316-5215591.post@n6.nabble.com>
References: <1436887547316-5215591.post@n6.nabble.com>
Message-ID: <CALxNk+=OBF4ECdfmZZj+QC7OSnLdYQiyRCSUqecvHP5hSP7Ktg@mail.gmail.com>

Perhaps that at that point you've already saturated the bandwidth of your
storage device ?

2015-07-14 17:25 GMT+02:00 jramm <jamessramm at gmail.com>:

> I have a number of vector datasets to rasterize.
>
> I am finding that when the datasets are small, I have no problem starting
> multiple gdal_rasterize processes (using python).
>
> If my datasets are large (I'm trying to create rasters with millions of
> pixels), I'm finding that I can only start one gdal_rasterize process at
> once, or sometimes, after a couple have started the rest refuse to start.
>
> RAM shows usage below 50%, and CPU usage is also below 50%.
>
> I can't figure out whether this is a gdal_rasterize thing or not?
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/gdal-rasterize-in-multiple-processes-tp5215591.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


-- 

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150715/5f60c013/attachment.html>

From hrz at geodata.soton.ac.uk  Wed Jul 15 02:21:54 2015
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Wed, 15 Jul 2015 10:21:54 +0100
Subject: [gdal-dev] Setting NODATA to -nan
Message-ID: <55A62632.30600@geodata.soton.ac.uk>

Hello,

I've got the following raster exported from GRASS using `r.out.gdal`:

gdalinfo ppp-2015.tif
Driver: GTiff/GeoTIFF
Files: ppp-2015.tif
        ppp-2015.tif.aux.xml
Size is 432017, 216009
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0],
     UNIT["degree",0.0174532925199433],
     AUTHORITY["EPSG","4326"]]
Origin = (-180.000000000000000,90.000000000000000)
Pixel Size = (0.000833300541414,-0.000833298612558)
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   COMPRESSION=DEFLATE
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-180.0000000,  90.0000000) (180d 0' 0.00"W, 90d 0' 0.00"N)
Lower Left  (-180.0000000, -90.0000000) (180d 0' 0.00"W, 90d 0' 0.00"S)
Upper Right ( 180.0000000,  90.0000000) (180d 0' 0.00"E, 90d 0' 0.00"N)
Lower Right ( 180.0000000, -90.0000000) (180d 0' 0.00"E, 90d 0' 0.00"S)
Center      (   0.0000000,   0.0000000) (  0d 0' 0.01"E,  0d 0' 0.01"N)
Band 1 Block=256x256 Type=Float32, ColorInterp=Gray
   NoData Value=nan
   Metadata:
     COLOR_TABLE_RULES_COUNT=5
     COLOR_TABLE_RULE_RGB_0=0.000000e+00 1.681282e+03 255 255 0 0 255 0
     COLOR_TABLE_RULE_RGB_1=1.681282e+03 3.362563e+03 0 255 0 0 255 255
     COLOR_TABLE_RULE_RGB_2=3.362563e+03 5.043845e+03 0 255 255 0 0 255
     COLOR_TABLE_RULE_RGB_3=5.043845e+03 6.725127e+03 0 0 255 255 0 255
     COLOR_TABLE_RULE_RGB_4=6.725127e+03 8.406408e+03 255 0 255 255 0 0
     Generated_with=GRASS GIS 7.0.0

As you can see the NoData is set to `nan`.  However, within the data it is
actually `-nan`:

gdallocationinfo ppp-2015.tif -wgs84 42.0776 30.9305
Report:
   Location: (266503P,70886L)
   Band 1:
     Value: -nan

I have tried to force the NoData to `-nan` as follows but with no joy:

gdal_translate -a_nodata '-nan' -of VRT ppp-2015.tif ppp-2015.vrt

gdalinfo ppp-2015.vrt
Driver: VRT/Virtual Raster
Files: ppp-2015.vrt
        /data/data/ppp_v2c_2015/ppp-2015.tif
Size is 432017, 216009
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0],
     UNIT["degree",0.0174532925199433],
     AUTHORITY["EPSG","4326"]]
Origin = (-180.000000000000000,90.000000000000000)
Pixel Size = (0.000833300541414,-0.000833298612558)
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-180.0000000,  90.0000000) (180d 0' 0.00"W, 90d 0' 0.00"N)
Lower Left  (-180.0000000, -90.0000000) (180d 0' 0.00"W, 90d 0' 0.00"S)
Upper Right ( 180.0000000,  90.0000000) (180d 0' 0.00"E, 90d 0' 0.00"N)
Lower Right ( 180.0000000, -90.0000000) (180d 0' 0.00"E, 90d 0' 0.00"S)
Center      (   0.0000000,   0.0000000) (  0d 0' 0.01"E,  0d 0' 0.01"N)
Band 1 Block=128x128 Type=Float32, ColorInterp=Gray
   NoData Value=nan
   Metadata:
     COLOR_TABLE_RULES_COUNT=5
     COLOR_TABLE_RULE_RGB_0=0.000000e+00 1.681282e+03 255 255 0 0 255 0
     COLOR_TABLE_RULE_RGB_1=1.681282e+03 3.362563e+03 0 255 0 0 255 255
     COLOR_TABLE_RULE_RGB_2=3.362563e+03 5.043845e+03 0 255 255 0 0 255
     COLOR_TABLE_RULE_RGB_3=5.043845e+03 6.725127e+03 0 0 255 255 0 255
     COLOR_TABLE_RULE_RGB_4=6.725127e+03 8.406408e+03 255 0 255 255 0 0
     Generated_with=GRASS GIS 7.0.0

Even editing the VRT to contain `<NoDataValue>-nan</NoDataValue>` yields a
positive nan value in gdalinfo.

This looks like it might be a GDAL bug to me?  Is there a way I can specify
`-nan` as the NODATA value for this dataset without regenerating it 
(it's quite
large)?

Many thanks,

Homme


From michele_zanolli at comune.trento.it  Wed Jul 15 02:42:50 2015
From: michele_zanolli at comune.trento.it (michele_zanolli at comune.trento.it)
Date: Wed, 15 Jul 2015 11:42:50 +0200
Subject: [gdal-dev] ogr2ogr 2.0 PG driver problem
Message-ID: <OFB1B13F90.11E91956-ONC1257E83.00355C61-C1257E83.00355C6B@comune.trento.it>

 
Hi all,
I recently installed GDAL 2.0 and this is my issue:
if I take a simple shp (or csv file) and then

ogr2ogr -f PostgreSQL "PG:host=localhost user=myuser schemas=myschema" mylayer -nln mylayer

The layer is successfully imported in the DB and in the right schema, but I read:

ERROR 1: PQconnectdb failed: invalid connection option "schemas"
ERROR 1: Couldn't establish a database connection


If i use the -overwrite option, no errors are printed.

michele

From landa.martin at gmail.com  Wed Jul 15 04:04:52 2015
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 15 Jul 2015 13:04:52 +0200
Subject: [gdal-dev] ogr2ogr 2.0 PG driver problem
In-Reply-To: <OFB1B13F90.11E91956-ONC1257E83.00355C61-C1257E83.00355C6B@comune.trento.it>
References: <OFB1B13F90.11E91956-ONC1257E83.00355C61-C1257E83.00355C6B@comune.trento.it>
Message-ID: <CA+Ei1OdYr0HXQxo5uQ7F=FgHY7t59DPSSji56R5Vsz1bDFegyw@mail.gmail.com>

Ciao Michele,

2015-07-15 11:42 GMT+02:00  <michele_zanolli at comune.trento.it>:
> ogr2ogr -f PostgreSQL "PG:host=localhost user=myuser schemas=myschema" mylayer -nln mylayer
>
> The layer is successfully imported in the DB and in the right schema, but I read:
>
> ERROR 1: PQconnectdb failed: invalid connection option "schemas"
> ERROR 1: Couldn't establish a database connection

try -lco 'schema=myschema' option, so

ogr2ogr -f PostgreSQL "PG:host=localhost user=myuser" mylayer -nln
mylayer -lco 'schema=myschema'

Martin

PS: In connection string is also missing `dbname`.

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From michele_zanolli at comune.trento.it  Wed Jul 15 05:10:34 2015
From: michele_zanolli at comune.trento.it (michele_zanolli at comune.trento.it)
Date: Wed, 15 Jul 2015 14:10:34 +0200
Subject: [gdal-dev] ogr2ogr 2.0 PG driver problem
In-Reply-To: <CA+Ei1OdYr0HXQxo5uQ7F=FgHY7t59DPSSji56R5Vsz1bDFegyw@mail.gmail.com>
References: <CA+Ei1OdYr0HXQxo5uQ7F=FgHY7t59DPSSji56R5Vsz1bDFegyw@mail.gmail.com>,
	<OFB1B13F90.11E91956-ONC1257E83.00355C61-C1257E83.00355C6B@comune.trento.it>
Message-ID: <OF8DEB9895.CFEC7F03-ONC1257E83.0042E2AF-C1257E83.0042E2B1@comune.trento.it>

Ciao Martin,

>
>try -lco 'schema=myschema' option, so
>
>ogr2ogr -f PostgreSQL "PG:host=localhost user=myuser" mylayer -nln
>mylayer -lco 'schema=myschema'
>

Thanks, it works with no errors!
A third way is to use -nln myschema.mylayer, so

ogr2ogr -f PostgreSQL "PG:host=localhost dbname=mydb user=myuser" mylayer -nln myschema.mylayer

IMHO, the error using "schemas=myschema" is non sense, with GDAL 1.x the syntax is accepted and no errors are printed.

michele

>--
>Martin Landa
>http://geo.fsv.cvut.cz/gwiki/Landa
>http://gismentors.cz/mentors/landa

From landa.martin at gmail.com  Wed Jul 15 05:38:06 2015
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 15 Jul 2015 14:38:06 +0200
Subject: [gdal-dev] allow gml driver to check supported version
Message-ID: <CA+Ei1Odv-Dbd8-ja=YA=VeurbDfzLfpWQcNNq1+yNTHyZiHS0w@mail.gmail.com>

Hi all,

VFR format is read in GDAL using GML driver together with GFS files
which are part of GDAL distribution (data/ruian_vf_ob_v1.gfs
data/ruian_vf_st_uvoh_v1.gfs  data/ruian_vf_st_v1.gfs
data/ruian_vf_v1.gfs). What is missing is version check to inform user
that GDAL doesn't support the newest version (which is now VFR 1.6).
This information is stored in VFR header, see example bellow.

<vf:Hlavicka><vf:VerzeVFR>1.6</vf:VerzeVFR><vf:TypZaznamu>Platne</vf:TypZaznamu>...</vf:Hlavicka>.

Would be possible to customize GML driver to support such feature? I
would like to add message like:

Input VFR file is version 1.6, GDAL doesn't support VFR version 1.5

Thanks, Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From even.rouault at spatialys.com  Wed Jul 15 05:49:04 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 15 Jul 2015 14:49:04 +0200
Subject: [gdal-dev] ogr2ogr 2.0 PG driver problem
In-Reply-To: <OFB1B13F90.11E91956-ONC1257E83.00355C61-C1257E83.00355C6B@comune.trento.it>
References: <OFB1B13F90.11E91956-ONC1257E83.00355C61-C1257E83.00355C6B@comune.trento.it>
Message-ID: <4397525.dZzoAfnzuG@even-n550jk>

On Wednesday 15 July 2015 11:42:50 michele_zanolli at comune.trento.it wrote:
> Hi all,
> I recently installed GDAL 2.0 and this is my issue:
> if I take a simple shp (or csv file) and then
> 
> ogr2ogr -f PostgreSQL "PG:host=localhost user=myuser schemas=myschema"
> mylayer -nln mylayer
> 
> The layer is successfully imported in the DB and in the right schema, but I
> read:
> 
> ERROR 1: PQconnectdb failed: invalid connection option "schemas"
> ERROR 1: Couldn't establish a database connection
> 
> 
> If i use the -overwrite option, no errors are printed.

Michele,

I can replicate the issue. I had a quick look and the cause was not obvious. 
Could you please file a ticket in Trac about that for further investigation ?

Actually I see it works if you add -update, so as to update the PG connection 
in update mode, rather than in "creation" mode. The creation mode has always 
been kind of a hack since technically OGR does not create a database, but just 
connects to an existing one. But I can't figure out a strong reason for which 
the syntax you use wouldn't work anymore.

Even

> 
> michele
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From michele_zanolli at comune.trento.it  Wed Jul 15 05:53:58 2015
From: michele_zanolli at comune.trento.it (michele_zanolli at comune.trento.it)
Date: Wed, 15 Jul 2015 14:53:58 +0200
Subject: [gdal-dev] GDAL 2.0.0 cannot open dbf file
Message-ID: <OF06B82094.CAF39D21-ONC1257E83.0046DBE6-C1257E83.0046DBE8@comune.trento.it>

 
Hi all,

with GDAL 2.0.0 I can't open a dbf file [0] (ogrinfo cadinci.dbf).
with GDAL 1.x it works.

For example with QGIS 2.8.2 (compiled with GDAL 1.11.2) I can read and edit it with no problems.

Can someone confirm this?

Thanks,

michele

[0] http://webapps.comune.trento.it/gis/archivioweb/cadinci.dbf

From even.rouault at spatialys.com  Wed Jul 15 05:56:10 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 15 Jul 2015 14:56:10 +0200
Subject: [gdal-dev] allow gml driver to check supported version
In-Reply-To: <CA+Ei1Odv-Dbd8-ja=YA=VeurbDfzLfpWQcNNq1+yNTHyZiHS0w@mail.gmail.com>
References: <CA+Ei1Odv-Dbd8-ja=YA=VeurbDfzLfpWQcNNq1+yNTHyZiHS0w@mail.gmail.com>
Message-ID: <2347290.tZGYTcCHHc@even-n550jk>

On Wednesday 15 July 2015 14:38:06 Martin Landa wrote:
> Hi all,
> 
> VFR format is read in GDAL using GML driver together with GFS files
> which are part of GDAL distribution (data/ruian_vf_ob_v1.gfs
> data/ruian_vf_st_uvoh_v1.gfs  data/ruian_vf_st_v1.gfs
> data/ruian_vf_v1.gfs). What is missing is version check to inform user
> that GDAL doesn't support the newest version (which is now VFR 1.6).
> This information is stored in VFR header, see example bellow.
> 
> <vf:Hlavicka><vf:VerzeVFR>1.6</vf:VerzeVFR><vf:TypZaznamu>Platne</vf:TypZazn
> amu>...</vf:Hlavicka>.
> 
> Would be possible to customize GML driver to support such feature? I
> would like to add message like:

Martin,

if you can detect that by just direct string matching, and that the VFR header 
is in the 4096 bytes, it shoud be rather easy to add that in 
OGRGMLDataSource::Open(). If it might be later, but you can detect that its 
VFR, then you might need to ingest more bytes.
If the actual XML content might have variation due to whitespace etc, then 
you'll need to go to the hard way and hack into gmlhandler.cpp

Even

> 
> Input VFR file is version 1.6, GDAL doesn't support VFR version 1.5
> 
> Thanks, Martin

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Jul 15 06:12:24 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 15 Jul 2015 15:12:24 +0200
Subject: [gdal-dev] GDAL 2.0.0 cannot open dbf file
In-Reply-To: <OF06B82094.CAF39D21-ONC1257E83.0046DBE6-C1257E83.0046DBE8@comune.trento.it>
References: <OF06B82094.CAF39D21-ONC1257E83.0046DBE6-C1257E83.0046DBE8@comune.trento.it>
Message-ID: <7187968.u3gJmdSmuv@even-n550jk>

On Wednesday 15 July 2015 14:53:58 michele_zanolli at comune.trento.it wrote:
> Hi all,
> 
> with GDAL 2.0.0 I can't open a dbf file [0] (ogrinfo cadinci.dbf).
> with GDAL 1.x it works.
> 
> For example with QGIS 2.8.2 (compiled with GDAL 1.11.2) I can read and edit
> it with no problems.
> 
> Can someone confirm this?

Hi again

yes I confirm. There's something a bit unusual in the header of this dbf file 
and the Identify method that has been added to the shapefile driver seems to be 
quite pedantic about that. Properly too pedantic. So might be just a matter of 
removing this check.

Would you mind opening a ticket about that too ?

Thanks for your reports.

Even

> 
> Thanks,
> 
> michele
> 
> [0] http://webapps.comune.trento.it/gis/archivioweb/cadinci.dbf
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Jul 15 06:18:21 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 15 Jul 2015 15:18:21 +0200
Subject: [gdal-dev] Setting NODATA to -nan
In-Reply-To: <55A62632.30600@geodata.soton.ac.uk>
References: <55A62632.30600@geodata.soton.ac.uk>
Message-ID: <2953788.FjQTbdnIyP@even-n550jk>

On Wednesday 15 July 2015 10:21:54 Homme Zwaagstra wrote:
> Hello,
> 
> I've got the following raster exported from GRASS using `r.out.gdal`:
> 
> gdalinfo ppp-2015.tif
> Driver: GTiff/GeoTIFF
> Files: ppp-2015.tif
>         ppp-2015.tif.aux.xml
> Size is 432017, 216009
> Coordinate System is:
> GEOGCS["WGS 84",
>      DATUM["WGS_1984",
>          SPHEROID["WGS 84",6378137,298.257223563,
>              AUTHORITY["EPSG","7030"]],
>          AUTHORITY["EPSG","6326"]],
>      PRIMEM["Greenwich",0],
>      UNIT["degree",0.0174532925199433],
>      AUTHORITY["EPSG","4326"]]
> Origin = (-180.000000000000000,90.000000000000000)
> Pixel Size = (0.000833300541414,-0.000833298612558)
> Metadata:
>    AREA_OR_POINT=Area
> Image Structure Metadata:
>    COMPRESSION=DEFLATE
>    INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (-180.0000000,  90.0000000) (180d 0' 0.00"W, 90d 0' 0.00"N)
> Lower Left  (-180.0000000, -90.0000000) (180d 0' 0.00"W, 90d 0' 0.00"S)
> Upper Right ( 180.0000000,  90.0000000) (180d 0' 0.00"E, 90d 0' 0.00"N)
> Lower Right ( 180.0000000, -90.0000000) (180d 0' 0.00"E, 90d 0' 0.00"S)
> Center      (   0.0000000,   0.0000000) (  0d 0' 0.01"E,  0d 0' 0.01"N)
> Band 1 Block=256x256 Type=Float32, ColorInterp=Gray
>    NoData Value=nan
>    Metadata:
>      COLOR_TABLE_RULES_COUNT=5
>      COLOR_TABLE_RULE_RGB_0=0.000000e+00 1.681282e+03 255 255 0 0 255 0
>      COLOR_TABLE_RULE_RGB_1=1.681282e+03 3.362563e+03 0 255 0 0 255 255
>      COLOR_TABLE_RULE_RGB_2=3.362563e+03 5.043845e+03 0 255 255 0 0 255
>      COLOR_TABLE_RULE_RGB_3=5.043845e+03 6.725127e+03 0 0 255 255 0 255
>      COLOR_TABLE_RULE_RGB_4=6.725127e+03 8.406408e+03 255 0 255 255 0 0
>      Generated_with=GRASS GIS 7.0.0
> 
> As you can see the NoData is set to `nan`.  However, within the data it is
> actually `-nan`:
> 
> gdallocationinfo ppp-2015.tif -wgs84 42.0776 30.9305
> Report:
>    Location: (266503P,70886L)
>    Band 1:
>      Value: -nan
> 
> I have tried to force the NoData to `-nan` as follows but with no joy:
> 
> gdal_translate -a_nodata '-nan' -of VRT ppp-2015.tif ppp-2015.vrt
> 
> gdalinfo ppp-2015.vrt
> Driver: VRT/Virtual Raster
> Files: ppp-2015.vrt
>         /data/data/ppp_v2c_2015/ppp-2015.tif
> Size is 432017, 216009
> Coordinate System is:
> GEOGCS["WGS 84",
>      DATUM["WGS_1984",
>          SPHEROID["WGS 84",6378137,298.257223563,
>              AUTHORITY["EPSG","7030"]],
>          AUTHORITY["EPSG","6326"]],
>      PRIMEM["Greenwich",0],
>      UNIT["degree",0.0174532925199433],
>      AUTHORITY["EPSG","4326"]]
> Origin = (-180.000000000000000,90.000000000000000)
> Pixel Size = (0.000833300541414,-0.000833298612558)
> Metadata:
>    AREA_OR_POINT=Area
> Image Structure Metadata:
>    INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (-180.0000000,  90.0000000) (180d 0' 0.00"W, 90d 0' 0.00"N)
> Lower Left  (-180.0000000, -90.0000000) (180d 0' 0.00"W, 90d 0' 0.00"S)
> Upper Right ( 180.0000000,  90.0000000) (180d 0' 0.00"E, 90d 0' 0.00"N)
> Lower Right ( 180.0000000, -90.0000000) (180d 0' 0.00"E, 90d 0' 0.00"S)
> Center      (   0.0000000,   0.0000000) (  0d 0' 0.01"E,  0d 0' 0.01"N)
> Band 1 Block=128x128 Type=Float32, ColorInterp=Gray
>    NoData Value=nan
>    Metadata:
>      COLOR_TABLE_RULES_COUNT=5
>      COLOR_TABLE_RULE_RGB_0=0.000000e+00 1.681282e+03 255 255 0 0 255 0
>      COLOR_TABLE_RULE_RGB_1=1.681282e+03 3.362563e+03 0 255 0 0 255 255
>      COLOR_TABLE_RULE_RGB_2=3.362563e+03 5.043845e+03 0 255 255 0 0 255
>      COLOR_TABLE_RULE_RGB_3=5.043845e+03 6.725127e+03 0 0 255 255 0 255
>      COLOR_TABLE_RULE_RGB_4=6.725127e+03 8.406408e+03 255 0 255 255 0 0
>      Generated_with=GRASS GIS 7.0.0
> 
> Even editing the VRT to contain `<NoDataValue>-nan</NoDataValue>` yields a
> positive nan value in gdalinfo.
> 
> This looks like it might be a GDAL bug to me?  Is there a way I can specify
> `-nan` as the NODATA value for this dataset without regenerating it
> (it's quite
> large)?

Hi Homme,

I wasn't aware of this negative not a number variation. Could you create a 
ticket with a small extract of the dataset so as to inspect the hexadecimal 
representation of this -nan value ?

Even


> 
> Many thanks,
> 
> Homme
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From michele_zanolli at comune.trento.it  Wed Jul 15 06:18:27 2015
From: michele_zanolli at comune.trento.it (michele_zanolli at comune.trento.it)
Date: Wed, 15 Jul 2015 15:18:27 +0200
Subject: [gdal-dev] ogr2ogr 2.0 PG driver problem
In-Reply-To: <4397525.dZzoAfnzuG@even-n550jk>
References: <4397525.dZzoAfnzuG@even-n550jk>,
	<OFB1B13F90.11E91956-ONC1257E83.00355C61-C1257E83.00355C6B@comune.trento.it>
Message-ID: <OF604F2F47.AC2D8A08-ONC1257E83.004919DB-C1257E83.004919DD@comune.trento.it>

 
>Could you please file a ticket in Trac about that for further
>investigation ?

http://trac.osgeo.org/gdal/ticket/6034

michele

From michele_zanolli at comune.trento.it  Wed Jul 15 06:27:25 2015
From: michele_zanolli at comune.trento.it (michele_zanolli at comune.trento.it)
Date: Wed, 15 Jul 2015 15:27:25 +0200
Subject: [gdal-dev] GDAL 2.0.0 cannot open dbf file
In-Reply-To: <7187968.u3gJmdSmuv@even-n550jk>
References: <7187968.u3gJmdSmuv@even-n550jk>,
	<OF06B82094.CAF39D21-ONC1257E83.0046DBE6-C1257E83.0046DBE8@comune.trento.it>
Message-ID: <OF32CD14B0.FE97A95D-ONC1257E83.0049EBF2-C1257E83.0049EBF6@comune.trento.it>

Even,

Thanks for your quick answers!

>Would you mind opening a ticket about that too ?

http://trac.osgeo.org/gdal/ticket/6035

michele

From landa.martin at gmail.com  Wed Jul 15 06:35:29 2015
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 15 Jul 2015 15:35:29 +0200
Subject: [gdal-dev] GML driver and DateTime datatype
Message-ID: <CA+Ei1Odp7NA-UYxPEK6W5pigVHxdyd40E60pthamE1XSnL9R=Q@mail.gmail.com>

Hi,

it seems that DateTime is not supported by GFS format, is right? Is
support for this data type planned?

Thanks! Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From hrz at geodata.soton.ac.uk  Wed Jul 15 06:56:09 2015
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Wed, 15 Jul 2015 14:56:09 +0100
Subject: [gdal-dev] Setting NODATA to -nan
In-Reply-To: <2953788.FjQTbdnIyP@even-n550jk>
References: <55A62632.30600@geodata.soton.ac.uk>
	<2953788.FjQTbdnIyP@even-n550jk>
Message-ID: <55A66679.8050401@geodata.soton.ac.uk>



On 15/07/15 14:18, Even Rouault wrote:
> On Wednesday 15 July 2015  10:21:54 Homme Zwaagstra wrote:
 >> Hello,
 >>
 >> I've got the following raster exported from GRASS using `r.out.gdal`:
 >>
 >> gdalinfo ppp-2015.tif
 >> Driver: GTiff/GeoTIFF
 >> Files: ppp-2015.tif
 >>         ppp-2015.tif.aux.xml
 >> Size is 432017, 216009
 >> Coordinate System is:
 >> GEOGCS["WGS 84",
 >>      DATUM["WGS_1984",
 >>          SPHEROID["WGS 84",6378137,298.257223563,
 >>              AUTHORITY["EPSG","7030"]],
 >>          AUTHORITY["EPSG","6326"]],
 >>      PRIMEM["Greenwich",0],
 >>      UNIT["degree",0.0174532925199433],
 >>      AUTHORITY["EPSG","4326"]]
 >> Origin = (-180.000000000000000,90.000000000000000)
 >> Pixel Size = (0.000833300541414,-0.000833298612558)
 >> Metadata:
 >>    AREA_OR_POINT=Area
 >> Image Structure Metadata:
 >>    COMPRESSION=DEFLATE
 >>    INTERLEAVE=BAND
 >> Corner Coordinates:
 >> Upper Left  (-180.0000000,  90.0000000) (180d 0' 0.00"W, 90d 0' 0.00"N)
 >> Lower Left  (-180.0000000, -90.0000000) (180d 0' 0.00"W, 90d 0' 0.00"S)
 >> Upper Right ( 180.0000000,  90.0000000) (180d 0' 0.00"E, 90d 0' 0.00"N)
 >> Lower Right ( 180.0000000, -90.0000000) (180d 0' 0.00"E, 90d 0' 0.00"S)
 >> Center      (   0.0000000,   0.0000000) (  0d 0' 0.01"E, 0d 0' 0.01"N)
 >> Band 1 Block=256x256 Type=Float32, ColorInterp=Gray
 >>    NoData Value=nan
 >>    Metadata:
 >>      COLOR_TABLE_RULES_COUNT=5
 >>      COLOR_TABLE_RULE_RGB_0=0.000000e+00 1.681282e+03 255 255 0 0 255 0
 >>      COLOR_TABLE_RULE_RGB_1=1.681282e+03 3.362563e+03 0 255 0 0 255 255
 >>      COLOR_TABLE_RULE_RGB_2=3.362563e+03 5.043845e+03 0 255 255 0 0 255
 >>      COLOR_TABLE_RULE_RGB_3=5.043845e+03 6.725127e+03 0 0 255 255 0 255
 >>      COLOR_TABLE_RULE_RGB_4=6.725127e+03 8.406408e+03 255 0 255 255 0 0
 >>      Generated_with=GRASS GIS 7.0.0
 >>
 >> As you can see the NoData is set to `nan`.  However, within the data 
it is
 >> actually `-nan`:
 >>
 >> gdallocationinfo ppp-2015.tif -wgs84 42.0776 30.9305
 >> Report:
 >>    Location: (266503P,70886L)
 >>    Band 1:
 >>      Value: -nan
 >>
 >> I have tried to force the NoData to `-nan` as follows but with no joy:
 >>
 >> gdal_translate -a_nodata '-nan' -of VRT ppp-2015.tif ppp-2015.vrt
 >>
 >> gdalinfo ppp-2015.vrt
 >> Driver: VRT/Virtual Raster
 >> Files: ppp-2015.vrt
 >>         /data/data/ppp_v2c_2015/ppp-2015.tif
 >> Size is 432017, 216009
 >> Coordinate System is:
 >> GEOGCS["WGS 84",
 >>      DATUM["WGS_1984",
 >>          SPHEROID["WGS 84",6378137,298.257223563,
 >>              AUTHORITY["EPSG","7030"]],
 >>          AUTHORITY["EPSG","6326"]],
 >>      PRIMEM["Greenwich",0],
 >>      UNIT["degree",0.0174532925199433],
 >>      AUTHORITY["EPSG","4326"]]
 >> Origin = (-180.000000000000000,90.000000000000000)
 >> Pixel Size = (0.000833300541414,-0.000833298612558)
 >> Metadata:
 >>    AREA_OR_POINT=Area
 >> Image Structure Metadata:
 >>    INTERLEAVE=BAND
 >> Corner Coordinates:
 >> Upper Left  (-180.0000000,  90.0000000) (180d 0' 0.00"W, 90d 0' 0.00"N)
 >> Lower Left  (-180.0000000, -90.0000000) (180d 0' 0.00"W, 90d 0' 0.00"S)
 >> Upper Right ( 180.0000000,  90.0000000) (180d 0' 0.00"E, 90d 0' 0.00"N)
 >> Lower Right ( 180.0000000, -90.0000000) (180d 0' 0.00"E, 90d 0' 0.00"S)
 >> Center      (   0.0000000,   0.0000000) (  0d 0' 0.01"E, 0d 0' 0.01"N)
 >> Band 1 Block=128x128 Type=Float32, ColorInterp=Gray
 >>    NoData Value=nan
 >>    Metadata:
 >>      COLOR_TABLE_RULES_COUNT=5
 >>      COLOR_TABLE_RULE_RGB_0=0.000000e+00 1.681282e+03 255 255 0 0 255 0
 >>      COLOR_TABLE_RULE_RGB_1=1.681282e+03 3.362563e+03 0 255 0 0 255 255
 >>      COLOR_TABLE_RULE_RGB_2=3.362563e+03 5.043845e+03 0 255 255 0 0 255
 >>      COLOR_TABLE_RULE_RGB_3=5.043845e+03 6.725127e+03 0 0 255 255 0 255
 >>      COLOR_TABLE_RULE_RGB_4=6.725127e+03 8.406408e+03 255 0 255 255 0 0
 >>      Generated_with=GRASS GIS 7.0.0
 >>
 >> Even editing the VRT to contain `<NoDataValue>-nan</NoDataValue>` 
yields a
 >> positive nan value in gdalinfo.
 >>
 >> This looks like it might be a GDAL bug to me?  Is there a way I can 
specify
 >> `-nan` as the NODATA value for this dataset without regenerating it
 >> (it's quite
 >> large)?
 >
 > Hi Homme,
 >
 > I wasn't aware of this negative not a number variation. Could you 
create a
 > ticket with a small extract of the dataset so as to inspect the 
hexadecimal
 > representation of this -nan value ?

Thanks Even,

I have submitted <https://trac.osgeo.org/gdal/ticket/6036> with an 
attached TIFF
infested with `-nan` values.

While researching this I cam across this question
<http://stackoverflow.com/q/3772835> which might contain some information of
interest.

Let me know if I can do anything else to help.

Best regards,

Homme

>
 >
 > Even
 >
 >
 >>
 >> Many thanks,
 >>
 >> Homme
 >>
 >> _______________________________________________
 >> gdal-dev mailing list
 >> gdal-dev at lists.osgeo.org
 >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 >


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150715/f8994c5e/attachment-0001.html>

From even.rouault at spatialys.com  Wed Jul 15 07:00:01 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 15 Jul 2015 16:00:01 +0200
Subject: [gdal-dev] GML driver and DateTime datatype
In-Reply-To: <CA+Ei1Odp7NA-UYxPEK6W5pigVHxdyd40E60pthamE1XSnL9R=Q@mail.gmail.com>
References: <CA+Ei1Odp7NA-UYxPEK6W5pigVHxdyd40E60pthamE1XSnL9R=Q@mail.gmail.com>
Message-ID: <1792639.TMZ69IEYDV@even-n550jk>

On Wednesday 15 July 2015 15:35:29 Martin Landa wrote:
> Hi,
> 
> it seems that DateTime is not supported by GFS format, is right? Is
> support for this data type planned?

Hi,

actually it is not only missing in .Gfs, but in the whole driver (.xsd 
parsing, etc..). I believe It shouldn't be that hard to add it, by doing 
things similarly to other data types. Patch welcome

Even


> 
> Thanks! Martin

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jluis at ualg.pt  Wed Jul 15 07:19:14 2015
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed, 15 Jul 2015 15:19:14 +0100
Subject: [gdal-dev] Getting warning when opening NetCDF file using gdal?
In-Reply-To: <3B970FB76033264EB34479EC8A365E1101BA340E47@vwiexc030.acri.local>
References: <1435632519375-5213484.post@n6.nabble.com>
	<55924804.5050307@nersc.no>
	<3B970FB76033264EB34479EC8A365E1101BA340E47@vwiexc030.acri.local>
Message-ID: <op.x1tjec1vdbaoe8@macmarilu>

Hi Julien,

I would very interested in trying your netCDF patches. The new OceanColor  
L2 format completely broke up my (Mirone) working flow.

Also regarding https://trac.osgeo.org/gdal/ticket/5291 sorry if I didn't  
understand, is there anything I can do to help?

Thanks

Joaquim


> Hi,
>
> Note that I have implemented in GDAL support of NetCDF-4 files including  
> groups and support of warping new NASA OceanColor L2 format using  
> geolocation array but unfortunately still not finalized the patch to  
> GDAL... More details here:  
> http://osgeo-org.1560.x6.nabble.com/gdal-dev-NetCDF-driver-improvements-including-groups-support-td5185773.html
> This also works for VIIRS L2 products.
> I can provide the patch to you if you are interested, let me know.
>
> Regards,
> Julien
>
> -----Message d'origine-----
> De : gdal-dev-bounces at lists.osgeo.org  
> [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de Anton Korosov
> Envoy? : mardi 30 juin 2015 09:41
> ? : gdal-dev at lists.osgeo.org
> Objet : Re: [gdal-dev] Getting warning when opening NetCDF file using  
> gdal?
>
> Hi!
>
> The format of the new OBPG OceanColor files is HDF5 (aka NetCDF4), so  
> you should have your GDAL compiled with HDF5 support:
> http://www.gdal.org/frmt_hdf5.html
>
> Then you can access the content of the file using groups and variables
> syntax:
> gdalinfo HDF5:"A2015069035500.L2_LAC_OC.nc"://geophysical_data/chlor_a
>
> Regards!
> Anton
>
> On 30/06/15 04:48, oz wrote:
>> I am using windows 7(32-bit) and want to warp NetCDF (nc) files and
>> save the output as GeoTIFF.
>>
>> First I run gdalinfo first to get the info of the subdataset I need
>> and added NeTCDF in the beginning(e.g. gdalinfo
>> NETCDF:"A2015069035500.L2_LAC_OC.nc") but was unfortunate because a
>> warning
>> appeared:
>>
>> Warning 1: Variable has 0 dimension(s) - not supported.
>> gdalinfo failed - unable to open 'netCDF:A2015069035500.L2_LAC_OC.nc'.
>>
>> Command line input:
>>
>> gdalinfo A2015069035500.L2_LAC_OC.nc
>>
>>
>> NetCDF is present when I tried `gdalinfo --formats`.
>>
>> Does anyone have any idea about this?
>>
>>
>>
>> --
>> View this message in context:
>> http://osgeo-org.1560.x6.nabble.com/Getting-warning-when-opening-NetCD
>> F-file-using-gdal-tp5213484.html Sent from the GDAL - Dev mailing list
>> archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Wed Jul 15 11:02:11 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 15 Jul 2015 20:02:11 +0200
Subject: [gdal-dev] Setting NODATA to -nan
In-Reply-To: <55A66679.8050401@geodata.soton.ac.uk>
References: <55A62632.30600@geodata.soton.ac.uk>
	<2953788.FjQTbdnIyP@even-n550jk>
	<55A66679.8050401@geodata.soton.ac.uk>
Message-ID: <2190328.1icz6aquFv@even-n550jk>


> Thanks Even,
> 
> I have submitted <https://trac.osgeo.org/gdal/ticket/6036> with an
> attached TIFF
> infested with `-nan` values.
> 
> While researching this I cam across this question
> <http://stackoverflow.com/q/3772835> which might contain some information of
> interest.

Hum looking more closely at representation of nan values in IEEE754, there is 
at least 12 million different ways of representing nan for a 32bit floating 
point value. And you can indeed have signed NaN... But I'm not sure it is 
really useful to set "-nan" as the declared nodata value (it is stored as a 
string in GeoTIFF) since even 2 NaN values that could be printed in text form 
as "-nan" could have a different binary representation.

The parts of GDAL that test pixel values against nodata have normally a 
special behaviour  to test the pixel values against nodata, when the nodata 
value is one of the NaN values, so I wouldn't expect this apparent 
inconsistency to cause problems

For example when running gdalinfo -stats on your file, I get :

ERROR 1: negative-nan-example.tif, band 1: Failed to compute statistics, no 
valid pixels found in sampling.

Which is expected since all pixels are set to nan (-nan yeah...), so 
ComputeStatistics() actually managed to match the declared nan with the -nan 
as pixel values. (which is quite ironical since a property of nan is that nan 
!= nan, but here nan ~= -nan ;-) )

Did you run into particular problems beyond this apparent mismatch ?

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From hrz at geodata.soton.ac.uk  Wed Jul 15 14:21:05 2015
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Wed, 15 Jul 2015 22:21:05 +0100
Subject: [gdal-dev] Setting NODATA to -nan
In-Reply-To: <2190328.1icz6aquFv@even-n550jk>
References: <55A62632.30600@geodata.soton.ac.uk>
	<2953788.FjQTbdnIyP@even-n550jk>
	<55A66679.8050401@geodata.soton.ac.uk>
	<2190328.1icz6aquFv@even-n550jk>
Message-ID: <55A6CEC1.3000209@geodata.soton.ac.uk>



On 15/07/15 19:02, Even Rouault wrote:
>
 >> Thanks Even,
 >>
 >> I have submitted <https://trac.osgeo.org/gdal/ticket/6036> with an
 >> attached TIFF
 >> infested with `-nan` values.
 >>
 >> While researching this I cam across this question
 >> <http://stackoverflow.com/q/3772835> which might contain some 
information of
 >> interest.
 >
 > Hum looking more closely at representation of nan values in IEEE754, 
there is
 > at least 12 million different ways of representing nan for a 32bit 
floating
 > point value. And you can indeed have signed NaN... But I'm not sure 
it is
 > really useful to set "-nan" as the declared nodata value (it is 
stored as a
 > string in GeoTIFF) since even 2 NaN values that could be printed in 
text form
 > as "-nan" could have a different binary representation.
 >
 > The parts of GDAL that test pixel values against nodata have normally a
 > special behaviour  to test the pixel values against nodata, when the 
nodata
 > value is one of the NaN values, so I wouldn't expect this apparent
 > inconsistency to cause problems
 >
 > For example when running gdalinfo -stats on your file, I get :
 >
 > ERROR 1: negative-nan-example.tif, band 1: Failed to compute 
statistics, no
 > valid pixels found in sampling.
 >
 > Which is expected since all pixels are set to nan (-nan yeah...), so
 > ComputeStatistics() actually managed to match the declared nan with 
the -nan
 > as pixel values. (which is quite ironical since a property of nan is 
that nan
 > != nan, but here nan ~= -nan ;-) )

Firstly thanks for looking into this.  Secondly, wow - 12 million 
different ways
to say that's not a number and still not be completely convincing. From a
practical point of view that all seems fairly crazy!

>
 >
 > Did you run into particular problems beyond this apparent mismatch ?

Yes, the issue that brought this to light was that I am trying to 
convert the
single band TIFF containing -nan values to a colour relief along the 
following
lines:

gdaldem color-relief single-band.tif colour-relief.ramp 
colour-relief.tif -alpha -of GTiff -co COMPRESS=DEFLATE -co PREDICTOR=1 
-co ZLEVEL=9 -co TILED=YES

colour-relief.ramp is as follows:

382    0   1   36
171    12  15  118
114    33  109 158
57     63  184 105
5      120 234 50
0      254 255 125
nv     0   0   0   0

I was expecting the -nan values to be interpreted as nv and therefore made
transparent in colour-relief.tif.  However, they were assigned the RGB value
0,1,36 i.e. the maximum value in the ramp!

I can provide a bite sized example of the dataset that contains some 
real values
if that is helpful.

Best regards,

Homme

>
 > Even
 >


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150715/cba3a4a2/attachment.html>

From jamessramm at gmail.com  Thu Jul 16 02:15:36 2015
From: jamessramm at gmail.com (jramm)
Date: Thu, 16 Jul 2015 02:15:36 -0700 (PDT)
Subject: [gdal-dev] gdal_rasterize increase memory usage
Message-ID: <1437038136322-5215862.post@n6.nabble.com>

gdal_rasterize is limited to use just 10MB of memory (line ~640 of
gdalrasterize.cpp).

Is there anyway to change this (without having to recompile?)

I'm noticing that changing the output data format from Byte to Int16 or even
Int32 drastically reduces performance. This must be because the strict
memory limits imposed by gdal_rasterize means that the amount of data it
reads in one go is exponentially reduce each time I increase the integer
size. Thus it has to loop through the polygon set many more times. 

I'm seeing drastic slow down by just changing from Byte to Int16 when using
gdal_rasterize (8-10 times slower)

Given that even the cheapest desktop has at least 1GB of RAM, isn't the
scanline buffer size over conservative?



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-rasterize-increase-memory-usage-tp5215862.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From nicolas.cadieux at archeotec.ca  Thu Jul 16 07:36:25 2015
From: nicolas.cadieux at archeotec.ca (Nicolas Cadieux)
Date: Thu, 16 Jul 2015 10:36:25 -0400
Subject: [gdal-dev] gdal_rasterize increase memory usage
In-Reply-To: <1437038136322-5215862.post@n6.nabble.com>
Message-ID: <8643860e-bacb-47e0-9afb-8de26bbacd32@email.android.com>

Hi,

I had the same problem with gdal_warp.  I recompiled the code using the latest ms visual studio community and the buffer was increased from 15 Mb to 1.5 GB.   It's was a first for me because I  usually work in python. It's easy to do.

That fixed all the issue.  I am told that buffer size is arbitrary and what may be good for one person may cause problems to another if, for example, a person launches many instances of the same program in parallel.

Best to recompile if the option is there. There is a page on the gdal web site explaining how to do it.  

Good luck

Nicolas Cadieux M.Sc.
Les Entreprises Arch?otec inc.?
8548, rue Saint-Denis Montr?al H2P 2H2
T?l?phone:?514.381.5112 ?Fax: 514.381.4995
www.archeotec.ca

On Jul 16, 2015 05:15, jramm <jamessramm at gmail.com> wrote:
>
> gdal_rasterize is limited to use just 10MB of memory (line ~640 of 
> gdalrasterize.cpp). 
>
> Is there anyway to change this (without having to recompile?) 
>
> I'm noticing that changing the output data format from Byte to Int16 or even 
> Int32 drastically reduces performance. This must be because the strict 
> memory limits imposed by gdal_rasterize means that the amount of data it 
> reads in one go is exponentially reduce each time I increase the integer 
> size. Thus it has to loop through the polygon set many more times. 
>
> I'm seeing drastic slow down by just changing from Byte to Int16 when using 
> gdal_rasterize (8-10 times slower) 
>
> Given that even the cheapest desktop has at least 1GB of RAM, isn't the 
> scanline buffer size over conservative? 
>
>
>
> -- 
> View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-rasterize-increase-memory-usage-tp5215862.html 
> Sent from the GDAL - Dev mailing list archive at Nabble.com. 
> _______________________________________________ 
> gdal-dev mailing list 
> gdal-dev at lists.osgeo.org 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev 

From nicolas.cadieux at archeotec.ca  Thu Jul 16 07:48:06 2015
From: nicolas.cadieux at archeotec.ca (Nicolas Cadieux)
Date: Thu, 16 Jul 2015 10:48:06 -0400
Subject: [gdal-dev] gdal_rasterize in multiple processes
In-Reply-To: <1436887547316-5215591.post@n6.nabble.com>
Message-ID: <6f03e3fe-1ca8-46c7-9d20-3d4774262213@email.android.com>

Hi,

Are you launching multiple at the same time or are you looping and treating one file at a time?  If so, your computer is just waiting to the last file to finish before it starts the next.  When the file are smaller, they appear to be running at the same time but when the files get bigger, the computer needs to wait.  The hard drive speed or memory band width are typical bottle necks that can slow down a very fast machine to a trickle if they get saturated.


Nicolas Cadieux M.Sc.
Les Entreprises Arch?otec inc.?
8548, rue Saint-Denis Montr?al H2P 2H2
T?l?phone:?514.381.5112 ?Fax: 514.381.4995
www.archeotec.ca

On Jul 14, 2015 11:25, jramm <jamessramm at gmail.com> wrote:
>
> I have a number of vector datasets to rasterize. 
>
> I am finding that when the datasets are small, I have no problem starting 
> multiple gdal_rasterize processes (using python). 
>
> If my datasets are large (I'm trying to create rasters with millions of 
> pixels), I'm finding that I can only start one gdal_rasterize process at 
> once, or sometimes, after a couple have started the rest refuse to start. 
>
> RAM shows usage below 50%, and CPU usage is also below 50%. 
>
> I can't figure out whether this is a gdal_rasterize thing or not? 
>
>
>
> -- 
> View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-rasterize-in-multiple-processes-tp5215591.html 
> Sent from the GDAL - Dev mailing list archive at Nabble.com. 
> _______________________________________________ 
> gdal-dev mailing list 
> gdal-dev at lists.osgeo.org 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev 

From r.marcofiguera at jacobs-university.de  Thu Jul 16 08:19:03 2015
From: r.marcofiguera at jacobs-university.de (Ramiro Marco Figuera)
Date: Thu, 16 Jul 2015 17:19:03 +0200
Subject: [gdal-dev] decimal rounding issue when re-projecting
Message-ID: <55A7CB67.3060300@jacobs-university.de>

Hi,

I'm re-projecting (from stereographic to gnomonic) the PDS LOLA 20m/pix 
DTMS from the lunar south pole. Im using gdalwarp like this: 'gdalwarp 
-t_srs '+proj=gnom +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=1 +x_0=0 +y_0=0 
+a=1737400 +b=1737400 +units=m +no_defs' topo_stereo.tif topo_gnom.tif'  
.  After that, I'm cropping the DTM to have a smaller region (200km by 
200km) around the pole. Then, I just use gdal_translate to export it as 
XYZ since I need it in this format for my software and converting it to 
kilometers instead of meters using awk.  As this is a gridded data, the 
resolution should remain the same (20m/pixel), however when I check the 
first entries of my xyz file the resolution is sometimes 21 m/pixel and 
sometimes 20 m/pixel, and this happens randomly. Any clue of what may 
cause this error? Has anyone faced the same issue?

Cheers,

Ramiro

-- 
Ramiro Marco Figuera
Department of Physics and Earth Sciences
Jacobs University Bremen
Campus Ring 1, 28759 Bremen, Germany
Office: Research III, Room 99b
Tel: +49 (0)421 200 3226


From jukka.rahkonen at maanmittauslaitos.fi  Thu Jul 16 08:41:30 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Thu, 16 Jul 2015 15:41:30 +0000 (UTC)
Subject: [gdal-dev] decimal rounding issue when re-projecting
References: <55A7CB67.3060300@jacobs-university.de>
Message-ID: <loom.20150716T172343-910@post.gmane.org>

Ramiro Marco Figuera <r.marcofiguera <at> jacobs-university.de> writes:

> 
> Hi,
> 
> I'm re-projecting (from stereographic to gnomonic) the PDS LOLA 20m/pix 
> DTMS from the lunar south pole. Im using gdalwarp like this: 'gdalwarp 
> -t_srs '+proj=gnom +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=1 +x_0=0 +y_0=0 
> +a=1737400 +b=1737400 +units=m +no_defs' topo_stereo.tif topo_gnom.tif'  
> .  After that, I'm cropping the DTM to have a smaller region (200km by 
> 200km) around the pole. Then, I just use gdal_translate to export it as 
> XYZ since I need it in this format for my software and converting it to 
> kilometers instead of meters using awk.  As this is a gridded data, the 
> resolution should remain the same (20m/pixel), however when I check the 
> first entries of my xyz file the resolution is sometimes 21 m/pixel and 
> sometimes 20 m/pixel, and this happens randomly. Any clue of what may 
> cause this error? Has anyone faced the same issue?

Hi,

Gdalwarp does not try to keep resolution unchanged and I guess that the
reason is to avoid extra resampling. That your output is so close to 20
m/pix is a coincident. Varying 20/21 m pixel size in xyz file may be due to
rounding errors. Have you checked the pixel size of topo_gnom.tif with
gdalinfo? 

I would try what happens when running gdalwarp with -tr 20 20 for forcing
the output resolution to 20m/pix.

You should be able to crop and create 20 m/pixel xyz file with one run by
setting the resolution with -tr and selecting the format with -of and
defining extents with -te http://www.gdal.org/gdalwarp.html

-Jukka Rahkonen-






From Armin.R.Schmidt at Gmail.com  Thu Jul 16 12:03:52 2015
From: Armin.R.Schmidt at Gmail.com (Armin Schmidt)
Date: Thu, 16 Jul 2015 21:03:52 +0200
Subject: [gdal-dev] Memory error for gdal_grid if using nearest
Message-ID: <55A80018.5040809@Gmail.com>

I have a very simple point-shapefile which throws various memory 
allocation errors when I try to grid it with gdal_grid using "nearest", 
but works absolutely fine and fast when using the "invdist" algorithm. I 
never had this problem before. Does anyone have any idea what is wrong? 
If it would help I can provide the shapefile.

The stripped down command-line is:

gdal_grid.exe 02VHiDep_raw.shp test.tif -ot Float32 -of GTiff -zfield 
Cond1_mSm -l 02VHiDep_raw -a nearest

After taking some time (probably searching for the nearest neighbours), 
this throws:

ERROR 1: CPLMalloc(): Out of memory allocating 64 bytes.
FATAL: CPLMalloc(): Out of memory allocating 64 bytes.
ERROR 1: TIFFWriteDirectorySec:Out of memory
ERROR 2: Cannot allocate 8192 bytes
ERROR 1: TIFFWriteDirectorySec:Out of memory
ERROR 1: TIFFWriteDirectorySec:Out of memory

Grid data type is "Float32"
Grid size = (256 256).
Corner coordinates = (449675.737076 6895223.317256)-(449705.249717 
6895209.690215).
Grid cell size = (0.114835 0.053024).
Source point count = 3280.
Algorithm name: "nearest".
Options are 
"radius1=0.000000:radius2=0.000000:angle=0.000000:nodata=0.000000"

Armin

-- 
__________________________________________________________________
Dr. Armin Schmidt
Chief Developer, GeodataWIZ Ltd:  Geo Data + Visualisation
  www.GeodataWIZ.com
  www.GeodataWIZ.com/armin-schmidt
Chairman, Internat. Society for Archaeological Prospection
  www.archprospection.org
Honorary Visiting Research Fellow, University of Bradford
  Department of Archaeological Sciences
Honorary Fellow, Durham University, Department of Archaeology
http://orcid.org/0000-0002-4241-5381

Email: Armin.R.Schmidt at Gmail.com

Now available:
Earth Resistance for Archaeologists (2013). Lanham: AltaMira Press
Geophysical Data in Archaeology (2013). Oxford: Oxbow Books.
http://www.amazon.co.uk/-/e/B0034QC4OW
__________________________________________________________________

From jukka.rahkonen at maanmittauslaitos.fi  Thu Jul 16 13:38:44 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Thu, 16 Jul 2015 20:38:44 +0000 (UTC)
Subject: [gdal-dev] =?utf-8?q?Gdal=5Fcalc=2Epy_with_more_than_26_input_fil?=
	=?utf-8?q?es?=
Message-ID: <loom.20150716T223700-951@post.gmane.org>

Hi,

Have a look at this gis.stackexchange question:
http://gis.stackexchange.com/questions/149006/does-gdal-calc-only-support-26-input-raster-files-at-a-time

So, what users can do if they have more than 26 input files?

-Jukka Rahkonen-


From even.rouault at spatialys.com  Thu Jul 16 16:13:34 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 17 Jul 2015 01:13:34 +0200
Subject: [gdal-dev] Gdal_calc.py with more than 26 input files
In-Reply-To: <loom.20150716T223700-951@post.gmane.org>
References: <loom.20150716T223700-951@post.gmane.org>
Message-ID: <7298004.d2mvxsfHg6@even-n550jk>

On Thursday 16 July 2015 20:38:44 Jukka Rahkonen wrote:
> Hi,
> 
> Have a look at this gis.stackexchange question:
> http://gis.stackexchange.com/questions/149006/does-gdal-calc-only-support-26
> -input-raster-files-at-a-time
> 
> So, what users can do if they have more than 26 input files?


Hi Jukka,

The easiest way is the one suggested in of the gis.stackexchange questions: 
extend the AlphaList array with new letters (I think you could put any string 
actually that doesn't conflict with other options)

But when you have more than 26 input files, it is dubious that you really want 
to individually identify them with a particular letter/name. As in one of the 
examples, you likely just want to apply a global operation on them, like sum, 
mean, .... So they would be better passed as a lis
t so as to be able to build a 3 dimension numpy array, so you can do things 
like:

--input foo.tif bar.tif ... --calc "rasters.mean(axis=0)"

And you could also still reference a particular raster with rasters[i] syntax

(To be clear: the above is not something currently available)

Even

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu Jul 16 16:20:21 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 17 Jul 2015 01:20:21 +0200
Subject: [gdal-dev] Memory error for gdal_grid if using nearest
In-Reply-To: <55A80018.5040809@Gmail.com>
References: <55A80018.5040809@Gmail.com>
Message-ID: <4085777.9gCWq7VQGh@even-n550jk>

On Thursday 16 July 2015 21:03:52 Armin Schmidt wrote:
> I have a very simple point-shapefile which throws various memory
> allocation errors when I try to grid it with gdal_grid using "nearest",
> but works absolutely fine and fast when using the "invdist" algorithm. I
> never had this problem before. Does anyone have any idea what is wrong?
> If it would help I can provide the shapefile.

Armin,

That could be useful indeed. From your description, it looks like the building 
of the spatial index would went wrong with this particular dataset, looping 
forever or something like that and ending up eating all the memory.

Even

> 
> The stripped down command-line is:
> 
> gdal_grid.exe 02VHiDep_raw.shp test.tif -ot Float32 -of GTiff -zfield
> Cond1_mSm -l 02VHiDep_raw -a nearest
> 
> After taking some time (probably searching for the nearest neighbours),
> this throws:
> 
> ERROR 1: CPLMalloc(): Out of memory allocating 64 bytes.
> FATAL: CPLMalloc(): Out of memory allocating 64 bytes.
> ERROR 1: TIFFWriteDirectorySec:Out of memory
> ERROR 2: Cannot allocate 8192 bytes
> ERROR 1: TIFFWriteDirectorySec:Out of memory
> ERROR 1: TIFFWriteDirectorySec:Out of memory
> 
> Grid data type is "Float32"
> Grid size = (256 256).
> Corner coordinates = (449675.737076 6895223.317256)-(449705.249717
> 6895209.690215).
> Grid cell size = (0.114835 0.053024).
> Source point count = 3280.
> Algorithm name: "nearest".
> Options are
> "radius1=0.000000:radius2=0.000000:angle=0.000000:nodata=0.000000"
> 
> Armin

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mwtoews at gmail.com  Thu Jul 16 16:29:11 2015
From: mwtoews at gmail.com (Mike Toews)
Date: Fri, 17 Jul 2015 11:29:11 +1200
Subject: [gdal-dev] Gdal_calc.py with more than 26 input files
In-Reply-To: <7298004.d2mvxsfHg6@even-n550jk>
References: <loom.20150716T223700-951@post.gmane.org>
	<7298004.d2mvxsfHg6@even-n550jk>
Message-ID: <CAM2FmMqWeYVwEM0im1VbzteWfkRsV+GwmSmE8o4N5aUtzNzfgQ@mail.gmail.com>

On 17 July 2015 at 11:13, Even Rouault <even.rouault at spatialys.com> wrote:
> But when you have more than 26 input files, it is dubious that you really want
> to individually identify them with a particular letter/name. As in one of the
> examples, you likely just want to apply a global operation on them, like sum,
> mean, .... So they would be better passed as a lis
> t so as to be able to build a 3 dimension numpy array, so you can do things
> like:
>
> --input foo.tif bar.tif ... --calc "rasters.mean(axis=0)"
>
> And you could also still reference a particular raster with rasters[i] syntax
>
> (To be clear: the above is not something currently available)

It's actually not too far off. For instance, stack several single-band
var*.tif rasters in a multi-band VRT, then calculate the mean along
the 0th axis:

gdalbuildvrt -separate var_stacked.vrt var*.tif
gdal_calc.py -A var_stacked.vrt --outfile=avg_var.tif --calc="A.mean(axis=0)"

However, the result avg_var.tif is not as expected due to the use of
blocks. Is this ticket worthy?
-Mike

From even.rouault at spatialys.com  Thu Jul 16 16:58:53 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 17 Jul 2015 01:58:53 +0200
Subject: [gdal-dev] Gdal_calc.py with more than 26 input files
In-Reply-To: <CAM2FmMqWeYVwEM0im1VbzteWfkRsV+GwmSmE8o4N5aUtzNzfgQ@mail.gmail.com>
References: <loom.20150716T223700-951@post.gmane.org>
	<7298004.d2mvxsfHg6@even-n550jk>
	<CAM2FmMqWeYVwEM0im1VbzteWfkRsV+GwmSmE8o4N5aUtzNzfgQ@mail.gmail.com>
Message-ID: <2032928.Y7CFYedQLl@even-n550jk>

On Friday 17 July 2015 11:29:11 Mike Toews wrote:
> On 17 July 2015 at 11:13, Even Rouault <even.rouault at spatialys.com> wrote:
> > But when you have more than 26 input files, it is dubious that you really
> > want to individually identify them with a particular letter/name. As in
> > one of the examples, you likely just want to apply a global operation on
> > them, like sum, mean, .... So they would be better passed as a lis
> > t so as to be able to build a 3 dimension numpy array, so you can do
> > things
> > like:
> > 
> > --input foo.tif bar.tif ... --calc "rasters.mean(axis=0)"
> > 
> > And you could also still reference a particular raster with rasters[i]
> > syntax
> > 
> > (To be clear: the above is not something currently available)
> 
> It's actually not too far off. For instance, stack several single-band
> var*.tif rasters in a multi-band VRT, then calculate the mean along
> the 0th axis:
> 
> gdalbuildvrt -separate var_stacked.vrt var*.tif
> gdal_calc.py -A var_stacked.vrt --outfile=avg_var.tif
> --calc="A.mean(axis=0)"
> 
> However, the result avg_var.tif is not as expected due to the use of
> blocks. Is this ticket worthy?

In your above example, only the first band of var_stacked.vrt will be used. So 
basically you're computing the average of all lines of a block (possibly a 
single line depending on the dataset), and this average line will be written 
in the first line of each block.

Perhaps there should be a check on the shape of the result to verify it 
matches the shape of the input blocks and error out if not, if that's what you 
meant ?
Unless there would be some new option to mean that a multiband raster should 
be loaded as a 3d numpy array. The current behaviour of using a single band is 
a documented one, so we cannot change that without breaking existing valid 
uses.


> -Mike

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mwtoews at gmail.com  Thu Jul 16 18:04:03 2015
From: mwtoews at gmail.com (Mike Toews)
Date: Fri, 17 Jul 2015 13:04:03 +1200
Subject: [gdal-dev] Gdal_calc.py with more than 26 input files
In-Reply-To: <2032928.Y7CFYedQLl@even-n550jk>
References: <loom.20150716T223700-951@post.gmane.org>
	<7298004.d2mvxsfHg6@even-n550jk>
	<CAM2FmMqWeYVwEM0im1VbzteWfkRsV+GwmSmE8o4N5aUtzNzfgQ@mail.gmail.com>
	<2032928.Y7CFYedQLl@even-n550jk>
Message-ID: <CAM2FmMra6B0aZMFbKV3ZjpK+xpZ=MB5VRMZ9E6qfGRQQ6h3W5g@mail.gmail.com>

On 17 July 2015 at 11:58, Even Rouault <even.rouault at spatialys.com> wrote:
> In your above example, only the first band of var_stacked.vrt will be used. So
> basically you're computing the average of all lines of a block (possibly a
> single line depending on the dataset), and this average line will be written
> in the first line of each block.
>
> Perhaps there should be a check on the shape of the result to verify it
> matches the shape of the input blocks and error out if not, if that's what you
> meant ?
> Unless there would be some new option to mean that a multiband raster should
> be loaded as a 3d numpy array. The current behaviour of using a single band is
> a documented one, so we cannot change that without breaking existing valid
> uses.

Thanks, that's clear to me now. I see that calculations are currently
done per band, and that 3D array support is not implemented. I've
started an enhancement ticket for a -3D option:
https://trac.osgeo.org/gdal/ticket/6040

-Mike

From r.marcofiguera at jacobs-university.de  Fri Jul 17 00:19:25 2015
From: r.marcofiguera at jacobs-university.de (Ramiro Marco Figuera)
Date: Fri, 17 Jul 2015 09:19:25 +0200
Subject: [gdal-dev] decimal rounding issue when re-projecting
In-Reply-To: <loom.20150716T172343-910@post.gmane.org>
References: <55A7CB67.3060300@jacobs-university.de>
	<loom.20150716T172343-910@post.gmane.org>
Message-ID: <55A8AC7D.4050105@jacobs-university.de>

Hi,

Thanks a lot for the quick answer. Indeed, adding the -tr 20 20 solved 
the problem. As you pointed out, it should be possible to do the 
transformation in one step, however I want to keep an intermediate .tif 
file for visualization.

The 20/21m per pixel resolution I had at first, even if gdalwarp does no 
keep the resolution, is due to the fact that so close to the south pole 
the distortion/difference between polar stereographic and polar gnomonic 
is quite small.

Again, thanks a lot for the answer,

Cheers,

Ramiro

On 07/16/2015 05:41 PM, Jukka Rahkonen wrote:
> Ramiro Marco Figuera <r.marcofiguera <at> jacobs-university.de> writes:
>
>> Hi,
>>
>> I'm re-projecting (from stereographic to gnomonic) the PDS LOLA 20m/pix
>> DTMS from the lunar south pole. Im using gdalwarp like this: 'gdalwarp
>> -t_srs '+proj=gnom +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=1 +x_0=0 +y_0=0
>> +a=1737400 +b=1737400 +units=m +no_defs' topo_stereo.tif topo_gnom.tif'
>> .  After that, I'm cropping the DTM to have a smaller region (200km by
>> 200km) around the pole. Then, I just use gdal_translate to export it as
>> XYZ since I need it in this format for my software and converting it to
>> kilometers instead of meters using awk.  As this is a gridded data, the
>> resolution should remain the same (20m/pixel), however when I check the
>> first entries of my xyz file the resolution is sometimes 21 m/pixel and
>> sometimes 20 m/pixel, and this happens randomly. Any clue of what may
>> cause this error? Has anyone faced the same issue?
> Hi,
>
> Gdalwarp does not try to keep resolution unchanged and I guess that the
> reason is to avoid extra resampling. That your output is so close to 20
> m/pix is a coincident. Varying 20/21 m pixel size in xyz file may be due to
> rounding errors. Have you checked the pixel size of topo_gnom.tif with
> gdalinfo?
>
> I would try what happens when running gdalwarp with -tr 20 20 for forcing
> the output resolution to 20m/pix.
>
> You should be able to crop and create 20 m/pixel xyz file with one run by
> setting the resolution with -tr and selecting the format with -of and
> defining extents with -te http://www.gdal.org/gdalwarp.html
>
> -Jukka Rahkonen-
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Ramiro Marco Figuera
Department of Physics and Earth Sciences
Jacobs University Bremen
Campus Ring 1, 28759 Bremen, Germany
Office: Research III, Room 99b
Tel: +49 (0)421 200 3226


From bishop.dev at gmail.com  Fri Jul 17 03:09:51 2015
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Fri, 17 Jul 2015 13:09:51 +0300
Subject: [gdal-dev] Motion: Adopt FRC48: Geographical networks support
Message-ID: <55A8D46F.6050909@gmail.com>

Hi,

I finished the work on merging the GSoC2014  Geographical networks 
support in GDAL to trunk.
The RFC 
(https://trac.osgeo.org/gdal/wiki/rfc48_geographical_networks_support) 
was corrected.
The pull request (https://github.com/OSGeo/gdal/pull/60) created.
Travis building passed.

I think it's time to vote for adopt the RFC 48 Geographical networks 
support and to merge the pull request to the GDAL sources trunk. 
According to https://trac.osgeo.org/gdal/wiki/rfc1_pmc I start the vote 
and my +1 for adopt.

-- 
Best regards,
     Dmitry


From Armin.R.Schmidt at Gmail.com  Fri Jul 17 09:53:02 2015
From: Armin.R.Schmidt at Gmail.com (Armin Schmidt)
Date: Fri, 17 Jul 2015 18:53:02 +0200
Subject: [gdal-dev] Memory error for gdal_grid if using nearest
In-Reply-To: <4085777.9gCWq7VQGh@even-n550jk>
References: <55A80018.5040809@Gmail.com> <4085777.9gCWq7VQGh@even-n550jk>
Message-ID: <55A932EE.20500@Gmail.com>

Hi Even,

I have converted it to a Spatialite file for easier download:
https://www.wesendit.com/dl/hcjLajYe9F3i/

The problem is still the same. The offending command is:
gdal_grid.exe test.sqlite test.tif -ot Float32 -of GTiff -zfield 
Cond1_mSm -l 02vhidep_raw -a nearest

"-a invdist" works without a problem. Are the two algorithms not using 
the same search?

Since this problem only occurs with files covering France in 
RGF93/Lambert93 (I have tested two different files, both show the same 
problem) I wonder whether the range of coordinates of RGF93 may be the 
issue. All my other files so far never had this problem.

Armin

On 17/07/2015 01:20, Even Rouault wrote:
> On Thursday 16 July 2015 21:03:52 Armin Schmidt wrote:
>> I have a very simple point-shapefile which throws various memory
>> allocation errors when I try to grid it with gdal_grid using "nearest",
>> but works absolutely fine and fast when using the "invdist" algorithm. I
>> never had this problem before. Does anyone have any idea what is wrong?
>> If it would help I can provide the shapefile.
>
> Armin,
>
> That could be useful indeed. From your description, it looks like the building
> of the spatial index would went wrong with this particular dataset, looping
> forever or something like that and ending up eating all the memory.
>
> Even
>
>>
>> The stripped down command-line is:
>>
>> gdal_grid.exe 02VHiDep_raw.shp test.tif -ot Float32 -of GTiff -zfield
>> Cond1_mSm -l 02VHiDep_raw -a nearest
>>
>> After taking some time (probably searching for the nearest neighbours),
>> this throws:
>>
>> ERROR 1: CPLMalloc(): Out of memory allocating 64 bytes.
>> FATAL: CPLMalloc(): Out of memory allocating 64 bytes.
>> ERROR 1: TIFFWriteDirectorySec:Out of memory
>> ERROR 2: Cannot allocate 8192 bytes
>> ERROR 1: TIFFWriteDirectorySec:Out of memory
>> ERROR 1: TIFFWriteDirectorySec:Out of memory
>>
>> Grid data type is "Float32"
>> Grid size = (256 256).
>> Corner coordinates = (449675.737076 6895223.317256)-(449705.249717
>> 6895209.690215).
>> Grid cell size = (0.114835 0.053024).
>> Source point count = 3280.
>> Algorithm name: "nearest".
>> Options are
>> "radius1=0.000000:radius2=0.000000:angle=0.000000:nodata=0.000000"
>>
>> Armin
>

-- 
__________________________________________________________________
Dr. Armin Schmidt
Chief Developer, GeodataWIZ Ltd:  Geo Data + Visualisation
  www.GeodataWIZ.com
  www.GeodataWIZ.com/armin-schmidt
Chairman, Internat. Society for Archaeological Prospection
  www.archprospection.org
Honorary Visiting Research Fellow, University of Bradford
  Department of Archaeological Sciences
Honorary Fellow, Durham University, Department of Archaeology
http://orcid.org/0000-0002-4241-5381

Email: Armin.R.Schmidt at Gmail.com

Now available:
Earth Resistance for Archaeologists (2013). Lanham: AltaMira Press
Geophysical Data in Archaeology (2013). Oxford: Oxbow Books.
http://www.amazon.co.uk/-/e/B0034QC4OW
__________________________________________________________________

From yutaxsato at gmail.com  Sat Jul 18 01:58:21 2015
From: yutaxsato at gmail.com (Yuta Sato)
Date: Sat, 18 Jul 2015 17:58:21 +0900
Subject: [gdal-dev] 'gdalwarp.exe' for reprojection
Message-ID: <CAPqnkJRcZ7UjGhsjGavt=BvEoJGYrVy2NAohNeVg3QTKjobrmQ@mail.gmail.com>

Dear GDAL Developers:

When I convert a HDF file in Sinusoidal Projection into Geographic
Coordinate System using gdalwarp.exe, how can I specify the following
parameters?

PIXEL_OFFSET = 0
LINE_OFFSET = 0
PIXEL_STEP = 1
LINE_STEP = 1

I want to make sure that there are not any pixel shifts during
re-projection.
If gdalwarp.exe is not a good option for it, what are other methods for it?
I want to reproject a MODIS file.

Thanks in the advance!
Yuta
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150718/6ec995eb/attachment.html>

From rykovd at gmail.com  Sun Jul 19 00:25:03 2015
From: rykovd at gmail.com (dr)
Date: Sun, 19 Jul 2015 00:25:03 -0700 (PDT)
Subject: [gdal-dev] Motion: Adopt FRC48: Geographical networks support
In-Reply-To: <55A8D46F.6050909@gmail.com>
References: <55A8D46F.6050909@gmail.com>
Message-ID: <1437290703622-5216134.post@n6.nabble.com>

Happy to see GNM is finished, thanks to Mikhail and Dmitry.
We use custom GDAL build with GNM support at one of our project and it will
be great see this feature in trunk.




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-Motion-Adopt-FRC48-Geographical-networks-support-tp5216021p5216134.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Sun Jul 19 04:07:12 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 19 Jul 2015 13:07:12 +0200
Subject: [gdal-dev] Motion: Adopt FRC48: Geographical networks support
In-Reply-To: <55A8D46F.6050909@gmail.com>
References: <55A8D46F.6050909@gmail.com>
Message-ID: <201507191307.12474.even.rouault@spatialys.com>

Le vendredi 17 juillet 2015 12:09:51, vous avez ?crit :
> Hi,
> 
> I finished the work on merging the GSoC2014  Geographical networks
> support in GDAL to trunk.
> The RFC
> (https://trac.osgeo.org/gdal/wiki/rfc48_geographical_networks_support)
> was corrected.
> The pull request (https://github.com/OSGeo/gdal/pull/60) created.
> Travis building passed.
> 
> I think it's time to vote for adopt the RFC 48 Geographical networks
> support and to merge the pull request to the GDAL sources trunk.
> According to https://trac.osgeo.org/gdal/wiki/rfc1_pmc I start the vote
> and my +1 for adopt.

+1

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Sun Jul 19 05:02:12 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 19 Jul 2015 14:02:12 +0200
Subject: [gdal-dev] 'gdalwarp.exe' for reprojection
In-Reply-To: <CAPqnkJRcZ7UjGhsjGavt=BvEoJGYrVy2NAohNeVg3QTKjobrmQ@mail.gmail.com>
References: <CAPqnkJRcZ7UjGhsjGavt=BvEoJGYrVy2NAohNeVg3QTKjobrmQ@mail.gmail.com>
Message-ID: <201507191402.12165.even.rouault@spatialys.com>

Yuta,
> 
> When I convert a HDF file in Sinusoidal Projection into Geographic
> Coordinate System using gdalwarp.exe, how can I specify the following
> parameters?
> 
> PIXEL_OFFSET = 0
> LINE_OFFSET = 0
> PIXEL_STEP = 1
> LINE_STEP = 1

You could override the values in a VRT produced by gdal_translate -of VRT 
source_dataset out.vrt
But it is dubious that changing the original values reported by the driver is 
going to produce something correct.

> 
> I want to make sure that there are not any pixel shifts during
> re-projection.
> If gdalwarp.exe is not a good option for it, what are other methods for it?
> I want to reproject a MODIS file.

There have been recent discussions about why GDAL warping is not appropriate 
for datasets that have bow-tie : http://osgeo-org.1560.x6.nabble.com/gdal-dev-
gdalwarp-problems-with-MODIS-L1B-td5206583.html

There are a few hints in http://stackoverflow.com/questions/27968890/reproject-
and-mosaic-modis-level2-using-gdal-python

At that time, I see you were looking for a fast(er) gdal_grid. Recently I've 
added in trunk (post 2.0) a linear interpolation method which runs several 
magnitude of order faster than the other methods.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Sun Jul 19 06:56:47 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 19 Jul 2015 15:56:47 +0200
Subject: [gdal-dev] Memory error for gdal_grid if using nearest
In-Reply-To: <55A932EE.20500@Gmail.com>
References: <55A80018.5040809@Gmail.com> <4085777.9gCWq7VQGh@even-n550jk>
	<55A932EE.20500@Gmail.com>
Message-ID: <201507191556.47145.even.rouault@spatialys.com>

Armin,

I've tried with GDAL trunk, both Linux and Windows (under Wine actually, but 
hopefully shouldn't make a difference), and didn't run into problems.

I've noted that the corner coordinates with your spatialite dataset are not 
the one your reported in your first email. I get :

Corner coordinates = (1449724.439790 8217652.262496)-(1449753.943937 
8217638.597033)

Even

> Hi Even,
> 
> I have converted it to a Spatialite file for easier download:
> https://www.wesendit.com/dl/hcjLajYe9F3i/
> 
> The problem is still the same. The offending command is:
> gdal_grid.exe test.sqlite test.tif -ot Float32 -of GTiff -zfield
> Cond1_mSm -l 02vhidep_raw -a nearest
> 
> "-a invdist" works without a problem. Are the two algorithms not using
> the same search?
> 
> Since this problem only occurs with files covering France in
> RGF93/Lambert93 (I have tested two different files, both show the same
> problem) I wonder whether the range of coordinates of RGF93 may be the
> issue. All my other files so far never had this problem.
> 
> Armin
> 
> On 17/07/2015 01:20, Even Rouault wrote:
> > On Thursday 16 July 2015 21:03:52 Armin Schmidt wrote:
> >> I have a very simple point-shapefile which throws various memory
> >> allocation errors when I try to grid it with gdal_grid using "nearest",
> >> but works absolutely fine and fast when using the "invdist" algorithm. I
> >> never had this problem before. Does anyone have any idea what is wrong?
> >> If it would help I can provide the shapefile.
> > 
> > Armin,
> > 
> > That could be useful indeed. From your description, it looks like the
> > building of the spatial index would went wrong with this particular
> > dataset, looping forever or something like that and ending up eating all
> > the memory.
> > 
> > Even
> > 
> >> The stripped down command-line is:
> >> 
> >> gdal_grid.exe 02VHiDep_raw.shp test.tif -ot Float32 -of GTiff -zfield
> >> Cond1_mSm -l 02VHiDep_raw -a nearest
> >> 
> >> After taking some time (probably searching for the nearest neighbours),
> >> this throws:
> >> 
> >> ERROR 1: CPLMalloc(): Out of memory allocating 64 bytes.
> >> FATAL: CPLMalloc(): Out of memory allocating 64 bytes.
> >> ERROR 1: TIFFWriteDirectorySec:Out of memory
> >> ERROR 2: Cannot allocate 8192 bytes
> >> ERROR 1: TIFFWriteDirectorySec:Out of memory
> >> ERROR 1: TIFFWriteDirectorySec:Out of memory
> >> 
> >> Grid data type is "Float32"
> >> Grid size = (256 256).
> >> Corner coordinates = (449675.737076 6895223.317256)-(449705.249717
> >> 6895209.690215).
> >> Grid cell size = (0.114835 0.053024).
> >> Source point count = 3280.
> >> Algorithm name: "nearest".
> >> Options are
> >> "radius1=0.000000:radius2=0.000000:angle=0.000000:nodata=0.000000"
> >> 
> >> Armin

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From yutaxsato at gmail.com  Sun Jul 19 07:40:13 2015
From: yutaxsato at gmail.com (Yuta Sato)
Date: Sun, 19 Jul 2015 23:40:13 +0900
Subject: [gdal-dev] 'gdalwarp.exe' for reprojection
In-Reply-To: <201507191402.12165.even.rouault@spatialys.com>
References: <CAPqnkJRcZ7UjGhsjGavt=BvEoJGYrVy2NAohNeVg3QTKjobrmQ@mail.gmail.com>
	<201507191402.12165.even.rouault@spatialys.com>
Message-ID: <CAPqnkJT4hQ1SuLbeHveKBhqK82_hWLrg+LOcNu-nLv+h5SkSaA@mail.gmail.com>

Dear Even:

Thanks for your response. I'm sorry to specify the MODIS data I'm using.
It's not the swath product the thread is talking that GDAL is not
appropriate. Yes, in case of swath product which requires gridding, thanks
for your improvement of the gdal_grid, I gonna use of it for swath data.


My question is about the MODIS data which was already gridded. The HDF data
has 2400 by 2400 pixels in sinusoidal projection. My concern is during
conversion into GCS, what parameters gdalwarp uses?
PIXEL_STEP = ?
LINE_STEP = ?
ULX and ULY = ? (HDF file's topleft pixel's topleft corner or center corner)

I am using nearest interpolation.





On Sun, Jul 19, 2015 at 9:02 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Yuta,
> >
> > When I convert a HDF file in Sinusoidal Projection into Geographic
> > Coordinate System using gdalwarp.exe, how can I specify the following
> > parameters?
> >
> > PIXEL_OFFSET = 0
> > LINE_OFFSET = 0
> > PIXEL_STEP = 1
> > LINE_STEP = 1
>
> You could override the values in a VRT produced by gdal_translate -of VRT
> source_dataset out.vrt
> But it is dubious that changing the original values reported by the driver
> is
> going to produce something correct.
>
> >
> > I want to make sure that there are not any pixel shifts during
> > re-projection.
> > If gdalwarp.exe is not a good option for it, what are other methods for
> it?
> > I want to reproject a MODIS file.
>
> There have been recent discussions about why GDAL warping is not
> appropriate
> for datasets that have bow-tie :
> http://osgeo-org.1560.x6.nabble.com/gdal-dev-
> gdalwarp-problems-with-MODIS-L1B-td5206583.html
>
> There are a few hints in
> http://stackoverflow.com/questions/27968890/reproject-
> and-mosaic-modis-level2-using-gdal-python
>
> At that time, I see you were looking for a fast(er) gdal_grid. Recently
> I've
> added in trunk (post 2.0) a linear interpolation method which runs several
> magnitude of order faster than the other methods.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150719/cd21e688/attachment.html>

From stefano.costa at geo-solutions.it  Wed Jul 22 02:29:09 2015
From: stefano.costa at geo-solutions.it (stefano.costa)
Date: Wed, 22 Jul 2015 11:29:09 +0200
Subject: [gdal-dev] Compiling GDAL with MrSID support
Message-ID: <NRVUCL$43265A487E721370F5A51143A203AF55@geo-solutions.it>

Hi all,I'm having issues trying to compile GDAL with MrSID support.


A preliminary question I have is: is MrSID write support available in GDAL, provided one has LizardTech's encoding SDK (ESDK)?
The documentation is a bit confusing on this point, e.g. on this page http://www.gdal.org/formats_list.html MrSID creation support is denied, whereas on this page https://trac.osgeo.org/gdal/wiki/MrSID it is stated that it requires an ESDK.


I have two versions of the MrSID SDK from LizardTech,?Geo_ESDK-7.0.0.2167 (both encoding and decoding) and?MrSID_DSDK-9.1.0.4045 (decoding only).
The platform I'm building on is:
CentOS 5.11 64-bit
gcc?4.1.2 20080704 (Red Hat 4.1.2-55)


I tried several versions of GDAL, 1.7.1, 1.7.3, 1.9.2, 2.0.0 but I keep getting the same error, when linking to?Geo_ESDK-7.0.0.2167:
g++ ?gdalinfo.o ?-L/root/gdal/gdal-1.7.1 -lgdal ?-ljpeg -ltiff -lpng -lz ?-lm -lrt -ldl ? ? -L/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release -L/root/gdal/Geo_ESDK-7.0.0.2167/3rd-party/lib/Release -lltidsdk -lpthread -llt_kakadu -lxmlparse ? ?-o gdalinfo
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3MessageWriter::writeMessage(LizardTech::MG3Message&)'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `QuantizeBuffer'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3VersionRequestMessage::MG3VersionRequestMessage()'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3MessageWriter::initialize()'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3DataRequestMessage::MG3DataRequestMessage()'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3PacketRequestMessage::MG3PacketRequestMessage()'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3DataReplyMessage::MG3DataReplyMessage(unsigned int, LizardTech::LTIOStreamInf*)'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3MSEReplyMessage::~MG3MSEReplyMessage()'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3MessageReader::nextMessage()'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3MSEReplyMessage::MG3MSEReplyMessage(unsigned int, LizardTech::LTIOStreamInf*)'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3MessageReader::initialize()'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3PacketReplyMessage::MG3PacketReplyMessage(unsigned int, LizardTech::MG3PacketType const&, LizardTech::MG3Packet*)'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3PlaneRangeDecoder::nextRange(unsigned long long&, bool&)'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3VersionRequestMessage::~MG3VersionRequestMessage()'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MSEAdjuster::nominalMSE(LizardTech::MG3PlaneDesc const&, LizardTech::MG3ImageInfo const&)'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3DataRequestMessage::~MG3DataRequestMessage()'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3PacketReplyMessage::~MG3PacketReplyMessage()'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3DataReplyMessage::~MG3DataReplyMessage()'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3MSERequestMessage::MG3MSERequestMessage()'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3PacketRequestMessage::~MG3PacketRequestMessage()'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3MessageReader::MG3MessageReader(LizardTech::LTIOStreamInf&)'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3PlaneRangeDecoder::done()'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3MessageReader::skipMessageBody()'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3VersionReplyMessage::~MG3VersionReplyMessage()'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3PlaneRangeDecoder::begin()'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3VersionReplyMessage::MG3VersionReplyMessage(LizardTech::MG3Version const*)'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3MessageWriter::~MG3MessageWriter()'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3PlaneRangeEncoder::nextRange(unsigned long long, bool)'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3MessageReader::~MG3MessageReader()'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3MSERequestMessage::~MG3MSERequestMessage()'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3MessageReader::getMessageBody(LizardTech::MG3Message&)'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3MessageWriter::done()'
/root/gdal/Geo_ESDK-7.0.0.2167/lib/Release/libltidsdk.so: undefined reference to `LizardTech::MG3MessageWriter::MG3MessageWriter(LizardTech::LTIOStreamInf&)'


I tried both --with-libtool and --without-libtool options and I get the same error. Looks like?libltidsdk.so contains undefined references to functions... which should be defined in the library itself?


If I try to link to?MrSID_DSDK-9.1.0.4045 (gcc41 version), I get a different error on GDAL 1.7.1 through 1.9.2:
/bin/sh /root/gdal/gdal-1.9.2/libtool --mode=link	g++ ?gdalinfo.lo ?/root/gdal/gdal-1.9.2/libgdal.la -o gdalinfo
libtool: link: g++ .libs/gdalinfo.o -o .libs/gdalinfo ?/root/gdal/gdal-1.9.2/.libs/libgdal.so -L/root/gdal/MrSID_DSDK-9.1.0.4045-linux.x86-64.gcc41/Raster_DSDK//3rd-party/lib -L/root/gdal/MrSID_DSDK-9.1.0.4045-linux.x86-64.gcc41/Raster_DSDK//lib -ljpeg -lpng -lz -lrt -ldl -lltidsdk -lpthread ?-Wl,-rpath -Wl,/usr/local/lib
/root/gdal/gdal-1.9.2/.libs/libgdal.so: undefined reference to `LizardTech::LTISceneBuffer::LTISceneBuffer(LizardTech::LTIPixel const&, unsigned int, unsigned int, void**)'
/root/gdal/gdal-1.9.2/.libs/libgdal.so: undefined reference to `LizardTech::LTISceneBuffer::LTISceneBuffer(LizardTech::LTIPixel const&, unsigned int, unsigned int, void**)'
/root/gdal/gdal-1.9.2/.libs/libgdal.so: undefined reference to `LizardTech::LTISceneBuffer::getTotalBandData(unsigned short) const'
/root/gdal/gdal-1.9.2/.libs/libgdal.so: undefined reference to `LizardTech::J2KImageReader::initialize(LizardTech::LTIOStreamInf&, bool, float, bool, int)'


The only successful combination I found so far has been GDAL 2.0.0 and MrSID_DSDK-9.1.0.4045: it's something, but I'd very much prefer to link with?Geo_ESDK-7.0.0.2167 to have read / write support.




Has anybody experienced the same issues?


Best regards,
Stefano Costa
?
==
GeoServer Professional Services from the experts! Visit
http://goo.gl/it488V for more information.
==
Dott. Stefano Costa
Senior Software Engineer
?
GeoSolutions S.A.S.
Via Poggio alle Viti 1187
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:     +39 0584 1660272
?
http://www.geo-solutions.it
http://twitter.com/geosolutions_it
?
-------------------------------------------------------
AVVERTENZE AI SENSI DEL D.Lgs. 196/2003
Le informazioni contenute in questo messaggio di posta elettronica e/o
nel/i file/s allegato/i sono da considerarsi strettamente riservate.
Il loro utilizzo ? consentito esclusivamente al destinatario del
messaggio, per le finalit? indicate nel messaggio stesso. Qualora
riceviate questo messaggio senza esserne il destinatario, Vi preghiamo
cortesemente di darcene notizia via e-mail e di procedere alla
distruzione del messaggio stesso, cancellandolo dal Vostro sistema.
Conservare il messaggio stesso, divulgarlo anche in parte,
distribuirlo ad altri soggetti, copiarlo, od utilizzarlo per finalit?
diverse, costituisce comportamento contrario ai principi dettati dal
D.Lgs. 196/2003.
?
The information in this message and/or attachments, is intended solely
for the attention and use of the named addressee(s) and may be
confidential or proprietary in nature or covered by the provisions of
privacy act (Legislative Decree June, 30 2003, no.196 - Italy's New
Data Protection Code).Any use not in accord with its purpose, any
disclosure, reproduction, copying, distribution, or either
dissemination, either whole or partial, is strictly forbidden except
previous formal approval of the named addressee(s). If you are not the
intended recipient, please contact immediately the sender by
telephone, fax or e-mail and delete the information in this message
that has been received in error. The sender does not give any warranty
or accept liability as the content, accuracy or completeness of sent
messages and accepts no responsibility  for changes made after they
were sent or for other risks which arise as a result of e-mail
transmission, viruses, etc.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150722/a77a4414/attachment.html>

From nobakht.mo at gmail.com  Wed Jul 22 04:23:42 2015
From: nobakht.mo at gmail.com (Monobakht)
Date: Wed, 22 Jul 2015 04:23:42 -0700 (PDT)
Subject: [gdal-dev] Strange effect in gdalwarp output
Message-ID: <1437564222166-5216470.post@n6.nabble.com>

This question was posted originally at 
http://gis.stackexchange.com/questions/154959/strange-effect-in-gdalwarp-output
<http://gis.stackexchange.com/questions/154959/strange-effect-in-gdalwarp-output>  
but I did not get any helpful response. Here is the problem:

I am using gdalwarp in python to extract and re-project reflectance bands
from MODIS level 1B (MOD021km). The command that I am using is the
following:

/
gdalwarp -of GTIFF -tps -t_srs EPSG:4326 -tr 0.01 0.01 -r bilinear
-overwrite
HDF4_EOS:EOS_SWATH:"C:\tmp\MYD021KM.A2007094.0935.006.2012075055042.hdf":MODIS_SWATH_Type_L1B:EV_500_Aggr1km_RefSB
C:\tmp\Output.tif
/

It converts the hdf subdataset without any problem but the output file seems
to have some sort of artifact, specially close to the edges. (See below)
<http://osgeo-org.1560.x6.nabble.com/file/n5216470/gdalwarp.jpg> 

I converted the same data using Modis Conversion Toolkit (MCTK) and it seems
to be much better. (Below)
<http://osgeo-org.1560.x6.nabble.com/file/n5216470/MCTK.jpg> 

I tried different resampling method and different output projection but
still the same results! Is there anyone having this issue with gdalwarp?

P.S. The data can be downloaded from this address:
ftp://ladsweb.nascom.nasa.gov/allData/6/MYD021KM/2007/094/MYD021KM.A2007094.0935.006.2012075055042.hdf



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Strange-effect-in-gdalwarp-output-tp5216470.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Wed Jul 22 04:34:26 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 22 Jul 2015 13:34:26 +0200
Subject: [gdal-dev] Strange effect in gdalwarp output
In-Reply-To: <1437564222166-5216470.post@n6.nabble.com>
References: <1437564222166-5216470.post@n6.nabble.com>
Message-ID: <201507221334.26705.even.rouault@spatialys.com>

Monobakht,

Probably due to the bow-tie effect of the MODIS scanning sensor. gdalwarp cannot currently deal with that correctly.

Discussed recently in this thread:
http://osgeo-org.1560.x6.nabble.com/gdal-dev-gdalwarp-problems-with-MODIS-L1B-td5206583.html

Best regards,

Even

> This question was posted originally at
> http://gis.stackexchange.com/questions/154959/strange-effect-in-gdalwarp-ou
> tput
> <http://gis.stackexchange.com/questions/154959/strange-effect-in-gdalwarp-
> output> but I did not get any helpful response. Here is the problem:
> 
> I am using gdalwarp in python to extract and re-project reflectance bands
> from MODIS level 1B (MOD021km). The command that I am using is the
> following:
> 
> /
> gdalwarp -of GTIFF -tps -t_srs EPSG:4326 -tr 0.01 0.01 -r bilinear
> -overwrite
> HDF4_EOS:EOS_SWATH:"C:\tmp\MYD021KM.A2007094.0935.006.2012075055042.hdf":MO
> DIS_SWATH_Type_L1B:EV_500_Aggr1km_RefSB C:\tmp\Output.tif
> /
> 
> It converts the hdf subdataset without any problem but the output file
> seems to have some sort of artifact, specially close to the edges. (See
> below) <http://osgeo-org.1560.x6.nabble.com/file/n5216470/gdalwarp.jpg>
> 
> I converted the same data using Modis Conversion Toolkit (MCTK) and it
> seems to be much better. (Below)
> <http://osgeo-org.1560.x6.nabble.com/file/n5216470/MCTK.jpg>
> 
> I tried different resampling method and different output projection but
> still the same results! Is there anyone having this issue with gdalwarp?
> 
> P.S. The data can be downloaded from this address:
> ftp://ladsweb.nascom.nasa.gov/allData/6/MYD021KM/2007/094/MYD021KM.A2007094
> .0935.006.2012075055042.hdf
> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Strange-effect-in-gdalwarp-output-tp52
> 16470.html Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From nobakht.mo at gmail.com  Wed Jul 22 05:48:12 2015
From: nobakht.mo at gmail.com (Monobakht)
Date: Wed, 22 Jul 2015 05:48:12 -0700 (PDT)
Subject: [gdal-dev] Strange effect in gdalwarp output
In-Reply-To: <201507221334.26705.even.rouault@spatialys.com>
References: <1437564222166-5216470.post@n6.nabble.com>
	<201507221334.26705.even.rouault@spatialys.com>
Message-ID: <1437569292987-5216483.post@n6.nabble.com>

Thank you Even for your reply. I am actually not a professional gdal user,
but looking at the thread that you posted I think the problem here is
slightly different. Georegistration accuracy of gdalwarp result is perfectly
fine, even better that MCTK result, and the bowtie effect is not present.
I think it is a problem in resampling step that causes this artefact! Is
that what you meant?

Regards
Mohamad


Even Rouault-2 wrote
> Monobakht,
> 
> Probably due to the bow-tie effect of the MODIS scanning sensor. gdalwarp
> cannot currently deal with that correctly.
> 
> Discussed recently in this thread:
> http://osgeo-org.1560.x6.nabble.com/gdal-dev-gdalwarp-problems-with-MODIS-L1B-td5206583.html
> 
> Best regards,
> 
> Even
> 
>> This question was posted originally at
>> http://gis.stackexchange.com/questions/154959/strange-effect-in-gdalwarp-ou
>> tput
>> &lt;http://gis.stackexchange.com/questions/154959/strange-effect-in-gdalwarp-
> &gt; output> but I did not get any helpful response. Here is the problem:
>> 
>> I am using gdalwarp in python to extract and re-project reflectance bands
>> from MODIS level 1B (MOD021km). The command that I am using is the
>> following:
>> 
>> /
>> gdalwarp -of GTIFF -tps -t_srs EPSG:4326 -tr 0.01 0.01 -r bilinear
>> -overwrite
>> HDF4_EOS:EOS_SWATH:"C:\tmp\MYD021KM.A2007094.0935.006.2012075055042.hdf":MO
>> DIS_SWATH_Type_L1B:EV_500_Aggr1km_RefSB C:\tmp\Output.tif
>> /
>> 
>> It converts the hdf subdataset without any problem but the output file
>> seems to have some sort of artifact, specially close to the edges. (See
>> below)
>> &lt;http://osgeo-org.1560.x6.nabble.com/file/n5216470/gdalwarp.jpg&gt;
>> 
>> I converted the same data using Modis Conversion Toolkit (MCTK) and it
>> seems to be much better. (Below)
>> &lt;http://osgeo-org.1560.x6.nabble.com/file/n5216470/MCTK.jpg&gt;
>> 
>> I tried different resampling method and different output projection but
>> still the same results! Is there anyone having this issue with gdalwarp?
>> 
>> P.S. The data can be downloaded from this address:
>> ftp://ladsweb.nascom.nasa.gov/allData/6/MYD021KM/2007/094/MYD021KM.A2007094
>> .0935.006.2012075055042.hdf
>> 
>> 
>> 
>> --
>> View this message in context:
>> http://osgeo-org.1560.x6.nabble.com/Strange-effect-in-gdalwarp-output-tp52
>> 16470.html Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> 

> gdal-dev at .osgeo

>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> http://lists.osgeo.org/mailman/listinfo/gdal-dev





--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Strange-effect-in-gdalwarp-output-tp5216470p5216483.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From kassies at gmail.com  Wed Jul 22 06:07:56 2015
From: kassies at gmail.com (Rutger)
Date: Wed, 22 Jul 2015 06:07:56 -0700 (PDT)
Subject: [gdal-dev] Strange effect in gdalwarp output
In-Reply-To: <1437569292987-5216483.post@n6.nabble.com>
References: <1437564222166-5216470.post@n6.nabble.com>
	<201507221334.26705.even.rouault@spatialys.com>
	<1437569292987-5216483.post@n6.nabble.com>
Message-ID: <1437570476935-5216487.post@n6.nabble.com>

Dear Mohamad,

I think Even is right, and it is the bowtie-effect. The file you are trying
to warp is still a 'swath', therefore it still contains the bowtie-effect.
You can see that the right side of the image looks worse, the viewing angles
are greatest at that edge, and the overlap between sensor scans is at its
largest. At nadir, more to the left of the image, it already looks much
better. I don't know the MCTK, but that image also doesn't look great,
although better.

You could use dedicated tools such as MRTSwath to resample the image to a
regular grid. Or use something like PyResample (if you work with Python).

https://lpdaac.usgs.gov/tools/modis_reprojection_tool_swath

https://github.com/pytroll/pyresample (part of PyTroll:
http://www.pytroll.org/)

Once you have a regular grid, all GDAL tools and function will work fine.

Gdalwarp and the other utilities will work directly with the higher level
MODIS products, which are gridded to a sinusoidal grid. 


Regards,
Rutger




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Strange-effect-in-gdalwarp-output-tp5216470p5216487.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From bishop.dev at gmail.com  Wed Jul 22 07:03:38 2015
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Wed, 22 Jul 2015 17:03:38 +0300
Subject: [gdal-dev] Motion: Adopt FRC48: Geographical networks support
In-Reply-To: <1437290703622-5216134.post@n6.nabble.com>
References: <55A8D46F.6050909@gmail.com>
	<1437290703622-5216134.post@n6.nabble.com>
Message-ID: <55AFA2BA.2060205@gmail.com>

Hi everybody,

Just a friendly remainder about motion adopt RFC48. Geographical 
networks support.

Now we have +2 (+1 from me as proposer and +1 from Even). Formally the 
RFC can be adopted, but maybe there is some disagreement or some 
valuable comments.

Best regards,
     Dmitry



From even.rouault at spatialys.com  Wed Jul 22 07:12:37 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 22 Jul 2015 16:12:37 +0200
Subject: [gdal-dev] Motion: Adopt FRC48: Geographical networks support
In-Reply-To: <55AFA2BA.2060205@gmail.com>
References: <55A8D46F.6050909@gmail.com>
	<1437290703622-5216134.post@n6.nabble.com>
	<55AFA2BA.2060205@gmail.com>
Message-ID: <6759193.L4uizOBnYl@even-n550jk>

On Wednesday 22 July 2015 17:03:38 Dmitry Baryshnikov wrote:
> Hi everybody,
> 
> Just a friendly remainder about motion adopt RFC48. Geographical
> networks support.
> 
> Now we have +2 (+1 from me as proposer and +1 from Even). Formally the
> RFC can be adopted, but maybe there is some disagreement or some
> valuable comments.

Hum, actually I'm not sure if we shouldn't need at least another +1 from a PSC 
member. The interpretation of the rules at 
"https://trac.osgeo.org/gdal/wiki/rfc1_pmc" is not completely clear to me in 
the case the proposer is not a PSC member.

"""
1. Proposals are written up and submitted on the gdal-dev mailing list for 
discussion and voting, by any interested party, not just committee members. 
6. Anyone may comment on proposals on the list, but only members of the 
Project Management Committee's votes will be counted.
7. A proposal will be accepted if it receives +2 (including the proposer) and 
no vetos (-1). 
"""


> 
> Best regards,
>      Dmitry
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From nobakht.mo at gmail.com  Wed Jul 22 09:34:50 2015
From: nobakht.mo at gmail.com (Monobakht)
Date: Wed, 22 Jul 2015 09:34:50 -0700 (PDT)
Subject: [gdal-dev] Strange effect in gdalwarp output
In-Reply-To: <1437570476935-5216487.post@n6.nabble.com>
References: <1437564222166-5216470.post@n6.nabble.com>
	<201507221334.26705.even.rouault@spatialys.com>
	<1437569292987-5216483.post@n6.nabble.com>
	<1437570476935-5216487.post@n6.nabble.com>
Message-ID: <1437582890239-5216531.post@n6.nabble.com>

Rutger,

Thank you for your response. You are right, I think the best option is to
run MRTswath for my data. I was looking for a practical way to avoid
downloading geolocation files (MOD03) and get it done in python using the
internally provided geolocation data and also avoid calling another
application (MRTswath) from within python, but it seems that it is not an
option. I will need to download all associated geolocation files for a
couple of years. I tested MRTswath for the above mentioned sample and yes,
the result is perfect.

Regards,
Mohamad



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Strange-effect-in-gdalwarp-output-tp5216470p5216531.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From lucena_ivan at hotmail.com  Wed Jul 22 12:23:19 2015
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Wed, 22 Jul 2015 15:23:19 -0400
Subject: [gdal-dev] how to build dwg driver?
Message-ID: <BLU173-W93CD073DD54384D8CA2E390830@phx.gbl>

Hi,

I am having a hard time trying to build the DWG driver (VS10x64).

Reading from nmake.opt it seems like there are two SDK we can use.

I could not find the DWGDirect SDK for download, so I am trying to use TX_DSK_4.1.01.0.0.

Compilation goes well but I am getting several missing symbols during the linkage.

Does anybody have experience building that driver could give some advice?

Thanks a lot.

Ivan


ogrdwgdriver.obj : error LNK2001: unresolved external symbol "public: virtual class OdSmartPtr<class OdStreamBuf> __cdecl ExSystemServices::createFile(class OdString const &,enum Oda::FileAccessMode,en
um Oda::FileShareMode,enum Oda::FileCreationDisposition)" (?createFile at ExSystemServices@@UEAA?AV?$OdSmartPtr at VOdStreamBuf@@@@AEBVOdString@@W4FileAccessMode at Oda@@W4FileShareMode at 5@W4FileCreationDisposit
ion at 5@@Z)
ogrdwgdriver.obj : error LNK2001: unresolved external symbol "public: virtual bool __cdecl ExSystemServices::accessFile(class OdString const &,int)" (?accessFile at ExSystemServices@@UEAA_NAEBVOdString@@H
@Z)
ogrdwgdriver.obj : error LNK2001: unresolved external symbol "public: virtual __int64 __cdecl ExSystemServices::getFileCTime(class OdString const &)" (?getFileCTime at ExSystemServices@@UEAA_JAEBVOdString
@@@Z)
ogrdwgdriver.obj : error LNK2001: unresolved external symbol "public: virtual __int64 __cdecl ExSystemServices::getFileMTime(class OdString const &)" (?getFileMTime at ExSystemServices@@UEAA_JAEBVOdString
@@@Z)
ogrdwgdriver.obj : error LNK2001: unresolved external symbol "public: virtual __int64 __cdecl ExSystemServices::getFileSize(class OdString const &)" (?getFileSize at ExSystemServices@@UEAA_JAEBVOdString@@
@Z)
ogrdwgdriver.obj : error LNK2001: unresolved external symbol "public: virtual class OdString __cdecl ExSystemServices::formatMessage(unsigned int,char * *)" (?formatMessage at ExSystemServices@@UEAA?AVOdS
tring@@IPEAPEAD at Z)
ogrdwgdriver.obj : error LNK2001: unresolved external symbol "public: virtual enum OdCodePageId __cdecl ExSystemServices::systemCodePage(void)const " (?systemCodePage at ExSystemServices@@UEBA?AW4OdCodePa
geId@@XZ)
ogrdwgdriver.obj : error LNK2001: unresolved external symbol "public: virtual enum OdResult __cdecl ExSystemServices::initModelerLibrary(void)" (?initModelerLibrary at ExSystemServices@@UEAA?AW4OdResult@@
XZ)
ogrdwgdriver.obj : error LNK2001: unresolved external symbol "public: virtual enum OdResult __cdecl ExSystemServices::uninitModelerLibrary(void)" (?uninitModelerLibrary at ExSystemServices@@UEAA?AW4OdResu
lt@@XZ)
ogrdwgdriver.obj : error LNK2001: unresolved external symbol "public: virtual class OdDbHostAppProgressMeter * __cdecl ExHostAppServices::newProgressMeter(void)" (?newProgressMeter at ExHostAppServices@@U
EAAPEAVOdDbHostAppProgressMeter@@XZ)
ogrdwgdriver.obj : error LNK2001: unresolved external symbol "public: virtual void __cdecl ExHostAppServices::releaseProgressMeter(class OdDbHostAppProgressMeter *)" (?releaseProgressMeter at ExHostAppSer
vices@@UEAAXPEAVOdDbHostAppProgressMeter@@@Z)
ogrdwgdriver.obj : error LNK2001: unresolved external symbol "public: virtual bool __cdecl ExHostAppServices::ttfFileNameByDescriptor(class OdTtfDescriptor const &,class OdString &)" (?ttfFileNameByDes
criptor at ExHostAppServices@@UEAA_NAEBVOdTtfDescriptor@@AEAVOdString@@@Z)
ogrdwgdriver.obj : error LNK2001: unresolved external symbol "public: virtual class OdSmartPtr<class OdGsDevice> __cdecl ExHostAppServices::gsBitmapDevice(class OdRxObject *,class OdRxObject *,unsigned
 long)" (?gsBitmapDevice at ExHostAppServices@@UEAA?AV?$OdSmartPtr at VOdGsDevice@@@@PEAVOdRxObject@@0K at Z)
ogrdwgdriver.obj : error LNK2001: unresolved external symbol "public: virtual class OdSmartPtr<class OdDbDatabase> __cdecl ExHostAppServices::readFile(class OdString const &,bool,bool,enum Oda::FileSha
reMode,class OdString const &)" (?readFile at ExHostAppServices@@UEAA?AV?$OdSmartPtr at VOdDbDatabase@@@@AEBVOdString@@_N1W4FileShareMode at Oda@@0 at Z)
ogrdwgdriver.obj : error LNK2001: unresolved external symbol "public: virtual class OdHatchPatternManager * __cdecl ExHostAppServices::patternManager(void)" (?patternManager at ExHostAppServices@@UEAAPEAV
OdHatchPatternManager@@XZ)
ogrdwgdriver.obj : error LNK2001: unresolved external symbol "private: virtual class OdDbKey * __cdecl OdDbHostAppServices2::key(void)const " (?key at OdDbHostAppServices2@@EEBAPEAVOdDbKey@@XZ)
ogrdwgdriver.obj : error LNK2001: unresolved external symbol "public: virtual void __cdecl ExHostAppServices::start(class OdString const &)" (?start at ExHostAppServices@@UEAAXAEBVOdString@@@Z)
ogrdwgdriver.obj : error LNK2001: unresolved external symbol "public: virtual void __cdecl ExHostAppServices::stop(void)" (?stop at ExHostAppServices@@UEAAXXZ)
ogrdwgdriver.obj : error LNK2001: unresolved external symbol "public: virtual void __cdecl ExHostAppServices::meterProgress(void)" (?meterProgress at ExHostAppServices@@UEAAXXZ)
ogrdwgdriver.obj : error LNK2001: unresolved external symbol "public: virtual void __cdecl ExHostAppServices::setLimit(int)" (?setLimit at ExHostAppServices@@UEAAXH at Z)
ogrdwgdriver.obj : error LNK2019: unresolved external symbol "public: __cdecl ExHostAppServices::ExHostAppServices(void)" (??0ExHostAppServices@@QEAA at XZ) referenced in function "public: __cdecl OGRDWGS
ervices::OGRDWGServices(void)" (??0OGRDWGServices@@QEAA at XZ)
ogrdwgdriver.obj : error LNK2019: unresolved external symbol "public: __cdecl ExSystemServices::ExSystemServices(void)" (??0ExSystemServices@@QEAA at XZ) referenced in function "public: __cdecl OGRDWGServ
ices::OGRDWGServices(void)" (??0OGRDWGServices@@QEAA at XZ)
ogrdwgdatasource.obj : error LNK2019: unresolved external symbol "class CPLString __cdecl ACTextUnescape(char const *,char const *)" (?ACTextUnescape@@YA?AVCPLString@@PEBD0 at Z) referenced in function "p
ublic: void __cdecl OGRDWGDataSource::ReadLayerDefinitions(void)" (?ReadLayerDefinitions at OGRDWGDataSource@@QEAAXXZ)
ogrdwglayer.obj : error LNK2001: unresolved external symbol "class CPLString __cdecl ACTextUnescape(char const *,char const *)" (?ACTextUnescape@@YA?AVCPLString@@PEBD0 at Z)
ogrdwglayer.obj : error LNK2019: unresolved external symbol "unsigned char const * __cdecl ACGetColorTable(void)" (?ACGetColorTable@@YAPEBEXZ) referenced in function "private: void __cdecl OGRDWGLayer:
:PrepareLineStyle(class OGRFeature *)" (?PrepareLineStyle at OGRDWGLayer@@AEAAXPEAVOGRFeature@@@Z)
ogrdwg_dimension.obj : error LNK2001: unresolved external symbol "unsigned char const * __cdecl ACGetColorTable(void)" (?ACGetColorTable@@YAPEBEXZ)
ogrdwg_hatch.obj : error LNK2001: unresolved external symbol "unsigned char const * __cdecl ACGetColorTable(void)" (?ACGetColorTable@@YAPEBEXZ)
ogrdwglayer.obj : error LNK2019: unresolved external symbol "void __cdecl ACAdjustText(double,double,class OGRFeature *)" (?ACAdjustText@@YAXNNPEAVOGRFeature@@@Z) referenced in function "private: class
 OGRFeature * __cdecl OGRDWGLayer::TranslateINSERT(class OdSmartPtr<class OdDbEntity>)" (?TranslateINSERT at OGRDWGLayer@@AEAAPEAVOGRFeature@@V?$OdSmartPtr at VOdDbEntity@@@@@Z)
ogr_DWG.dll : fatal error LNK1120: 25 unresolved externals

 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150722/c66ed76b/attachment.html>

From r.marcofiguera at jacobs-university.de  Thu Jul 23 02:31:00 2015
From: r.marcofiguera at jacobs-university.de (Ramiro Marco Figuera)
Date: Thu, 23 Jul 2015 11:31:00 +0200
Subject: [gdal-dev] decimal truncation when gdal_translate/gdalwarp
Message-ID: <55B0B454.8020900@jacobs-university.de>

Hi all,

I'm creating polar gnomonic DEMs using the LOLA DEMs as input files in 
gdal. My end product is an ascii file with X Y Z values. The original 
LOLA DEM is data type integer16 and I'm trying to transform it to a 
float32. I use -ot Float32 in gdal_translate and -wt Float32 in gdalwarp 
to be sure that the data type doesn't changes during the process. The 
problem is that when I open my XYZ file, the Z column has only 3 decimal 
positions. Is there anything I'm doing wrong or am I completely wrong 
trying to do this?

Cheers

Ramiro

-- 
Ramiro Marco Figuera
Department of Physics and Earth Sciences
Jacobs University Bremen
Campus Ring 1, 28759 Bremen, Germany
Office: Research III, Room 99b
Tel: +49 (0)421 200 3226


From userofgdal at gmail.com  Thu Jul 23 03:30:19 2015
From: userofgdal at gmail.com (user gdal)
Date: Thu, 23 Jul 2015 16:00:19 +0530
Subject: [gdal-dev] (no subject)
Message-ID: <CAJnZZaKMH3n5BiS9kSXApMqHBvspzLNMdiFCvg4=QoGMUB-i7A@mail.gmail.com>

Friends I have a raster image (img) file with a coordinate system. How to
get the information through program, the X and Y spatial resolutions?

Thanks,

B. Ramesh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150723/ab240f0e/attachment.html>

From r.marcofiguera at jacobs-university.de  Thu Jul 23 03:51:31 2015
From: r.marcofiguera at jacobs-university.de (Ramiro Marco Figuera)
Date: Thu, 23 Jul 2015 12:51:31 +0200
Subject: [gdal-dev] (no subject)
In-Reply-To: <CAJnZZaKMH3n5BiS9kSXApMqHBvspzLNMdiFCvg4=QoGMUB-i7A@mail.gmail.com>
References: <CAJnZZaKMH3n5BiS9kSXApMqHBvspzLNMdiFCvg4=QoGMUB-i7A@mail.gmail.com>
Message-ID: <55B0C733.6010704@jacobs-university.de>

Dear Ramesh,

I guess that using gdalinfo <nameoffile> should work.

Cheers,

Ramiro

On 07/23/2015 12:30 PM, user gdal wrote:
> Friends I have a raster image (img) file with a coordinate system. How 
> to get the information through program, the X and Y spatial resolutions?
>
> Thanks,
>
> B. Ramesh
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Ramiro Marco Figuera
Department of Physics and Earth Sciences
Jacobs University Bremen
Campus Ring 1, 28759 Bremen, Germany
Office: Research III, Room 99b
Tel: +49 (0)421 200 3226

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150723/3fec48ee/attachment-0001.html>

From graeme.bell at nibio.no  Thu Jul 23 04:34:16 2015
From: graeme.bell at nibio.no (Graeme B. Bell)
Date: Thu, 23 Jul 2015 11:34:16 +0000
Subject: [gdal-dev] Gdal_calc.py with more than 26 input files
In-Reply-To: <91FA9CFA-7762-43AC-AD9C-3C37AD602707@skogoglandskap.no>
References: <mailman.30313.1437127796.19517.gdal-dev@lists.osgeo.org>
	<91FA9CFA-7762-43AC-AD9C-3C37AD602707@skogoglandskap.no>
Message-ID: <5EE5CE0A-EA46-4AEB-842D-946E0D8F3389@skogoglandskap.no>

On 17 Jul 2015, at 12:09, <gdal-dev-request at lists.osgeo.org> <gdal-dev-request at lists.osgeo.org> wrote:

> Have a look at this gis.stackexchange question:
> http://gis.stackexchange.com/questions/149006/does-gdal-calc-only-support-26-input-raster-files-at-a-time
> 
> So, what users can do if they have more than 26 input files?


(in case someone finds this via Google)

1. It's frequently possible to split up the underlying calculation into subcalculations, that each need a subset of the files that fits under the threshhold of 26 files. 
e.g. A+B+C+D+E+F = (A+B+C)   +  (D+E+F)

Downside is, it takes longer (though parallelising can reduce the pain).
Upside is, you get more insight into intermediate results. 

2. If you're talking tens of thousands of files, another option is to give up and put the rasters into postgis raster and use a mapalgebra operation.
That's really not ideal, of course, in terms of performance, but it may be more helpful in terms of structuring all that data.

Graeme Bell


From jianfu.pan at nasa.gov  Thu Jul 23 05:23:22 2015
From: jianfu.pan at nasa.gov (Pan, Jianfu (GSFC-423.0)[COLUMBUS TECHNOLOGIES AND SERVICES INC])
Date: Thu, 23 Jul 2015 12:23:22 +0000
Subject: [gdal-dev] gdal_translated converted kml doesn't cover whole earth
Message-ID: <10361DFFEE322E4D8EC403438A58E31113156B15@NDMSMBX401.ndc.nasa.gov>

Hi,

I have a geotif file that covers a region from 85S to 80N and 180W to 180E. I was able to read out the lat/lon values in the tif and they cover from 83.632S to 83.632N and 179.813W to  179.813E. When I translate the tif to kml, it shows up on Google Earth from 180W to 179.01E (not all the way to 180E), leaving a gap.  Can anyone help?

Here is the listgeo output from the tif:
Geotiff_Information:
   Version: 1
   Key_Revision: 1.0
   Tagged_Information:
      ModelTiepointTag (2,3):
         0                 0                 0
         -17367530.4451649 7314540.64739566  0
      ModelPixelScaleTag (1,3):
         36032.2208405911  36032.2199379096  0
      End_Of_Tags.
   Keyed_Information:
      GTModelTypeGeoKey (Short,1): ModelTypeProjected
      GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
      GTCitationGeoKey (Ascii,31): "Cylindrical Equal Area (WGS84)"
      GeographicTypeGeoKey (Short,1): GCS_WGS_84
      GeogGeodeticDatumGeoKey (Short,1): DatumE_WGS84
      GeogLinearUnitsGeoKey (Short,1): Linear_Meter
      GeogAngularUnitsGeoKey (Short,1): Angular_Degree
      GeogEllipsoidGeoKey (Short,1): Ellipse_WGS_84
      GeogSemiMajorAxisGeoKey (Double,1): 6378137
      GeogSemiMinorAxisGeoKey (Double,1): 6356752.31424
      ProjectedCSTypeGeoKey (Short,1): User-Defined
      ProjectionGeoKey (Short,1): User-Defined
      ProjCoordTransGeoKey (Short,1): CT_CylindricalEqualArea
      ProjLinearUnitsGeoKey (Short,1): Linear_Meter
      ProjLinearUnitSizeGeoKey (Double,1): 1
      ProjStdParallel1GeoKey (Double,1): 30
      End_Of_Keys.
   End_Of_Geotiff.

Projection Method: CT_CylindricalEqualArea
   ProjStdParallel1GeoKey: 30.000000 ( 30d 0' 0.00"N)
   ProjNatOriginLongGeoKey: 0.000000 (  0d 0' 0.00"E)
   ProjFalseEastingGeoKey: 0.000000 m
   ProjFalseNorthingGeoKey: 0.000000 m
GCS: 4326/WGS 84
Datum: 6030/(unknown)
Ellipsoid: 7030/WGS 84 (6378137.00,6356752.31)
Prime Meridian: 8901/Greenwich (0.000000/  0d 0' 0.00"E)
Projection Linear Units: 9001/metre (1.000000m)

Corner Coordinates:
Upper Left    (-17367530.445, 7314540.647)  (179d60' 0.00"E, 85d 2'40.38"N)
Lower Left    (-17367530.445,-7314540.647)  (179d60' 0.00"E, 85d 2'40.38"S)
Upper Right   (17367530.445, 7314540.647)  (179d60' 0.00"W, 85d 2'40.38"N)
Lower Right   (17367530.445,-7314540.647)  (179d60' 0.00"W, 85d 2'40.38"S)
Center        (       0.000,       0.000)  (  0d 0' 0.00"E,  0d 0' 0.00"N)

Thank you.

Jianfu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150723/f6297192/attachment.html>

From jianfu.pan at nasa.gov  Thu Jul 23 05:03:59 2015
From: jianfu.pan at nasa.gov (J Pan)
Date: Thu, 23 Jul 2015 08:03:59 -0400
Subject: [gdal-dev] gdal_translate converted kml doesn't cover the whole
	earth
Message-ID: <55B0D82F.8040600@nasa.gov>

Hi,

I have a geotiff file with lat/lon ranges set to 85S to 85N and -180W to 
180E.  I was able to read out the lat/lon boundaries in the tif file and 
they are 83.632S to 83.632N and 179.813W to 179.813E. The lat/lon values 
seem to be the centers of grid boxes.  I used the gdal_translate to 
convert to kml then display it in GoogleEarth.  My problem is there is a 
gap towards the end of the data near the dateline.  In other words, the 
map starts at 180W and stops at about 179.01E, not 180E.  Anyone had the 
same situation?

Here is the output from my listgeo on the original tif file:
Geotiff_Information:
    Version: 1
    Key_Revision: 1.0
    Tagged_Information:
       ModelTiepointTag (2,3):
          0                 0                 0
          -17367530.4451649 7314540.64739566  0
       ModelPixelScaleTag (1,3):
          36032.2208405911  36032.2199379096  0
       End_Of_Tags.
    Keyed_Information:
       GTModelTypeGeoKey (Short,1): ModelTypeProjected
       GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
       GTCitationGeoKey (Ascii,31): "Cylindrical Equal Area (WGS84)"
       GeographicTypeGeoKey (Short,1): GCS_WGS_84
       GeogGeodeticDatumGeoKey (Short,1): DatumE_WGS84
       GeogLinearUnitsGeoKey (Short,1): Linear_Meter
       GeogAngularUnitsGeoKey (Short,1): Angular_Degree
       GeogEllipsoidGeoKey (Short,1): Ellipse_WGS_84
       GeogSemiMajorAxisGeoKey (Double,1): 6378137
       GeogSemiMinorAxisGeoKey (Double,1): 6356752.31424
       ProjectedCSTypeGeoKey (Short,1): User-Defined
       ProjectionGeoKey (Short,1): User-Defined
       ProjCoordTransGeoKey (Short,1): CT_CylindricalEqualArea
       ProjLinearUnitsGeoKey (Short,1): Linear_Meter
       ProjLinearUnitSizeGeoKey (Double,1): 1
       ProjStdParallel1GeoKey (Double,1): 30
       End_Of_Keys.
    End_Of_Geotiff.

Projection Method: CT_CylindricalEqualArea
    ProjStdParallel1GeoKey: 30.000000 ( 30d 0' 0.00"N)
    ProjNatOriginLongGeoKey: 0.000000 (  0d 0' 0.00"E)
    ProjFalseEastingGeoKey: 0.000000 m
    ProjFalseNorthingGeoKey: 0.000000 m
GCS: 4326/WGS 84
Datum: 6030/(unknown)
Ellipsoid: 7030/WGS 84 (6378137.00,6356752.31)
Prime Meridian: 8901/Greenwich (0.000000/  0d 0' 0.00"E)
Projection Linear Units: 9001/metre (1.000000m)

Corner Coordinates:
Upper Left    (-17367530.445, 7314540.647)  (179d60' 0.00"E, 85d 2'40.38"N)
Lower Left    (-17367530.445,-7314540.647)  (179d60' 0.00"E, 85d 2'40.38"S)
Upper Right   (17367530.445, 7314540.647)  (179d60' 0.00"W, 85d 2'40.38"N)
Lower Right   (17367530.445,-7314540.647)  (179d60' 0.00"W, 85d 2'40.38"S)
Center        (       0.000,       0.000)  (  0d 0' 0.00"E,  0d 0' 0.00"N)

Thank you.
Jianfu

From jianfu.pan at nasa.gov  Thu Jul 23 05:30:10 2015
From: jianfu.pan at nasa.gov (Pan, Jianfu (GSFC-423.0)[COLUMBUS TECHNOLOGIES AND SERVICES INC])
Date: Thu, 23 Jul 2015 12:30:10 +0000
Subject: [gdal-dev] gdal_translate converted kml doesn't cover the
	whole	earth
In-Reply-To: <55B0D82F.8040600@nasa.gov>
References: <55B0D82F.8040600@nasa.gov>
Message-ID: <10361DFFEE322E4D8EC403438A58E31113156B32@NDMSMBX401.ndc.nasa.gov>

Sorry for the double post.  Mail failed to send in the first try, now both come out :-).  -Jianfu

________________________________________
From: gdal-dev-bounces at lists.osgeo.org [gdal-dev-bounces at lists.osgeo.org] on behalf of J Pan [jianfu.pan at nasa.gov]
Sent: Thursday, July 23, 2015 7:03 AM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] gdal_translate converted kml doesn't cover the whole        earth

Hi,

I have a geotiff file with lat/lon ranges set to 85S to 85N and -180W to
180E.  I was able to read out the lat/lon boundaries in the tif file and
they are 83.632S to 83.632N and 179.813W to 179.813E. The lat/lon values
seem to be the centers of grid boxes.  I used the gdal_translate to
convert to kml then display it in GoogleEarth.  My problem is there is a
gap towards the end of the data near the dateline.  In other words, the
map starts at 180W and stops at about 179.01E, not 180E.  Anyone had the
same situation?

Here is the output from my listgeo on the original tif file:
Geotiff_Information:
    Version: 1
    Key_Revision: 1.0
    Tagged_Information:
       ModelTiepointTag (2,3):
          0                 0                 0
          -17367530.4451649 7314540.64739566  0
       ModelPixelScaleTag (1,3):
          36032.2208405911  36032.2199379096  0
       End_Of_Tags.
    Keyed_Information:
       GTModelTypeGeoKey (Short,1): ModelTypeProjected
       GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
       GTCitationGeoKey (Ascii,31): "Cylindrical Equal Area (WGS84)"
       GeographicTypeGeoKey (Short,1): GCS_WGS_84
       GeogGeodeticDatumGeoKey (Short,1): DatumE_WGS84
       GeogLinearUnitsGeoKey (Short,1): Linear_Meter
       GeogAngularUnitsGeoKey (Short,1): Angular_Degree
       GeogEllipsoidGeoKey (Short,1): Ellipse_WGS_84
       GeogSemiMajorAxisGeoKey (Double,1): 6378137
       GeogSemiMinorAxisGeoKey (Double,1): 6356752.31424
       ProjectedCSTypeGeoKey (Short,1): User-Defined
       ProjectionGeoKey (Short,1): User-Defined
       ProjCoordTransGeoKey (Short,1): CT_CylindricalEqualArea
       ProjLinearUnitsGeoKey (Short,1): Linear_Meter
       ProjLinearUnitSizeGeoKey (Double,1): 1
       ProjStdParallel1GeoKey (Double,1): 30
       End_Of_Keys.
    End_Of_Geotiff.

Projection Method: CT_CylindricalEqualArea
    ProjStdParallel1GeoKey: 30.000000 ( 30d 0' 0.00"N)
    ProjNatOriginLongGeoKey: 0.000000 (  0d 0' 0.00"E)
    ProjFalseEastingGeoKey: 0.000000 m
    ProjFalseNorthingGeoKey: 0.000000 m
GCS: 4326/WGS 84
Datum: 6030/(unknown)
Ellipsoid: 7030/WGS 84 (6378137.00,6356752.31)
Prime Meridian: 8901/Greenwich (0.000000/  0d 0' 0.00"E)
Projection Linear Units: 9001/metre (1.000000m)

Corner Coordinates:
Upper Left    (-17367530.445, 7314540.647)  (179d60' 0.00"E, 85d 2'40.38"N)
Lower Left    (-17367530.445,-7314540.647)  (179d60' 0.00"E, 85d 2'40.38"S)
Upper Right   (17367530.445, 7314540.647)  (179d60' 0.00"W, 85d 2'40.38"N)
Lower Right   (17367530.445,-7314540.647)  (179d60' 0.00"W, 85d 2'40.38"S)
Center        (       0.000,       0.000)  (  0d 0' 0.00"E,  0d 0' 0.00"N)

Thank you.
Jianfu
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From aperi2007 at gmail.com  Thu Jul 23 06:16:06 2015
From: aperi2007 at gmail.com (Andrea Peri)
Date: Thu, 23 Jul 2015 15:16:06 +0200
Subject: [gdal-dev] gdal_merge error on linux debian. It dont find
	gdal_array.
Message-ID: <CABqTJk-0pHBaTzP0XMhUFtP1P4b5qdQ2+vFkr0wh5fxZxw_W6g@mail.gmail.com>

Hi

I'm trying to use the gdal_merge.py. More explixitly I try this call:

gdal_merge.py -separate /path-to-raster/LC81920292015189LGN00_rgb_hpf.tif \
    /path-to-raster/LC81930292015196LGN00_rgb_hpf.tif \
    -o result_image.tif

(the tiff are float32.)

The gdal_merge.py gives this error:

0Traceback (most recent call last):
  File "/usr/local/bin/gdal_merge.py", line 523, in <module>
    sys.exit(main())
  File "/usr/local/bin/gdal_merge.py", line 512, in main
    fi.copy_into( t_fh, band, t_band, nodata )
  File "/usr/local/bin/gdal_merge.py", line 253, in copy_into
    nodata_arg )
  File "/usr/local/bin/gdal_merge.py", line 71, in raster_copy
    m_band )
  File "/usr/local/bin/gdal_merge.py", line 107, in raster_copy_with_mask
    t_xsize, t_ysize )
  File "/usr/local/lib/python2.7/dist-packages/GDAL-2.0.0-py2.7-linux-x86_64.egg/osgeo/gdal.py",
line 1295, in ReadAsArray
    import gdalnumeric
  File "/usr/local/lib/python2.7/dist-packages/GDAL-2.0.0-py2.7-linux-x86_64.egg/osgeo/gdalnumeric.py",
line 1, in <module>
    from osgeo.gdal_array import *
  File "/usr/local/lib/python2.7/dist-packages/GDAL-2.0.0-py2.7-linux-x86_64.egg/osgeo/gdal_array.py",
line 25, in <module>
    _gdal_array = swig_import_helper()
  File "/usr/local/lib/python2.7/dist-packages/GDAL-2.0.0-py2.7-linux-x86_64.egg/osgeo/gdal_array.py",
line 17, in swig_import_helper
    import _gdal_array
ImportError: No module named _gdal_array

Reading the error seem it is not finding the gdal_array module.

The gdal is the 2.0.0 version and is compiled from source on a Debian 64 bit.

I'm not sure if is a lack of configuration.
Any hint is welcome.

Thx,

Andrea.


-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From even.rouault at spatialys.com  Thu Jul 23 06:41:13 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 23 Jul 2015 15:41:13 +0200
Subject: [gdal-dev] gdal_merge error on linux debian. It dont find
	gdal_array.
In-Reply-To: <CABqTJk-0pHBaTzP0XMhUFtP1P4b5qdQ2+vFkr0wh5fxZxw_W6g@mail.gmail.com>
References: <CABqTJk-0pHBaTzP0XMhUFtP1P4b5qdQ2+vFkr0wh5fxZxw_W6g@mail.gmail.com>
Message-ID: <3043053.rn2gYqekV8@even-n550jk>

Andre,

Make sure you have the python-numpy package installed and recompile the GDAL 
python bindings

Even

> Hi
> 
> I'm trying to use the gdal_merge.py. More explixitly I try this call:
> 
> gdal_merge.py -separate /path-to-raster/LC81920292015189LGN00_rgb_hpf.tif \
>     /path-to-raster/LC81930292015196LGN00_rgb_hpf.tif \
>     -o result_image.tif
> 
> (the tiff are float32.)
> 
> The gdal_merge.py gives this error:
> 
> 0Traceback (most recent call last):
>   File "/usr/local/bin/gdal_merge.py", line 523, in <module>
>     sys.exit(main())
>   File "/usr/local/bin/gdal_merge.py", line 512, in main
>     fi.copy_into( t_fh, band, t_band, nodata )
>   File "/usr/local/bin/gdal_merge.py", line 253, in copy_into
>     nodata_arg )
>   File "/usr/local/bin/gdal_merge.py", line 71, in raster_copy
>     m_band )
>   File "/usr/local/bin/gdal_merge.py", line 107, in raster_copy_with_mask
>     t_xsize, t_ysize )
>   File
> "/usr/local/lib/python2.7/dist-packages/GDAL-2.0.0-py2.7-linux-x86_64.egg/o
> sgeo/gdal.py", line 1295, in ReadAsArray
>     import gdalnumeric
>   File
> "/usr/local/lib/python2.7/dist-packages/GDAL-2.0.0-py2.7-linux-x86_64.egg/o
> sgeo/gdalnumeric.py", line 1, in <module>
>     from osgeo.gdal_array import *
>   File
> "/usr/local/lib/python2.7/dist-packages/GDAL-2.0.0-py2.7-linux-x86_64.egg/o
> sgeo/gdal_array.py", line 25, in <module>
>     _gdal_array = swig_import_helper()
>   File
> "/usr/local/lib/python2.7/dist-packages/GDAL-2.0.0-py2.7-linux-x86_64.egg/o
> sgeo/gdal_array.py", line 17, in swig_import_helper
>     import _gdal_array
> ImportError: No module named _gdal_array
> 
> Reading the error seem it is not finding the gdal_array module.
> 
> The gdal is the 2.0.0 version and is compiled from source on a Debian 64
> bit.
> 
> I'm not sure if is a lack of configuration.
> Any hint is welcome.
> 
> Thx,
> 
> Andrea.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From thare at usgs.gov  Thu Jul 23 07:57:48 2015
From: thare at usgs.gov (Hare, Trent)
Date: Thu, 23 Jul 2015 07:57:48 -0700
Subject: [gdal-dev] decimal truncation when gdal_translate/gdalwarp
In-Reply-To: <55B0B454.8020900@jacobs-university.de>
References: <55B0B454.8020900@jacobs-university.de>
Message-ID: <CAB6t5t-x3EJU1F0vN8hH-+0w5JU6jmfnWAq_D89nL53WKhD09Q@mail.gmail.com>

Ramiro,
  I believe all 16bit LOLA DEMs have a scale in the header of 0.5 (they do
release 32bit files also). Check to make sure the scale parameter exists
using gdalinfo. To apply this value during conversion you have be explicit
and specify "-ot Float32" AND "-unscale". So something like this.

> gdal_translate -ot Float32 -unscale in_16bit.lbl out_32bit.tif
If you are converting the Jpeg2000 files, and you don't see this scale, you
also need to download the GDAL *.xml file within the LOLA archive and
rename. They were not allow to archive with more than one extension (silly
constraint for this day-and-age). For example for their geoJpeg2000s:

first rename:
> mv ldem_85n_10m_aux.xml ldem_85n_10m.jp2.aux.xml
now convert to 32bit Tiff (please see tip below):
> gdal_translate -ot Float32
-unscale ldem_85n_10m.jp2 ldem_85n_10m_32bit.tif

example data from:
http://pds-geosciences.wustl.edu/lro/lro-l-lola-3-rdr-v1/lrolol_1xxx/data/lola_gdr/polar/jp2

Regards,
Trent

Tip: I have been warned by the LOLA team to be cautious using anything
higher-res than 20m for polar analysis.

-----------------------------------

P.S. Just to muddy the water for LOLA:

Currently for LOLA PDS (*.lbl) labels, you will need to override the OFFSET
defaults. Thus for any PDS LOLA *.lbl label to remove an incorrect 1 pixel
shift you need to also include these command-line --config options:

for gdalinfo:
> gdalinfo  --config PDS_SampleProjOffset_Shift 0.5 --config
PDS_LineProjOffset_Shift 0.5  in.lbl out.tif
For LOLA polar files  the *center should be perfectly 0.0, 0.0 meters* in
Cartesian space

for conversion:
> gdal_translate -ot Float32 -unscale  --config PDS_SampleProjOffset_Shift
0.5 --config PDS_LineProjOffset_Shift 0.5  in.lbl out_32bit.tif

*note: *you *don't* need to use this for the LOLA the *.jp2 files (with
renamed *.xml file). The *.jp2 internal headers use the more standard
Offsets in meters which are correct (not the odd PDS's scaled pixel-space
offsets - at least odd to me).

*History*: There are several known offset issues
<https://trac.osgeo.org/gdal/ticket/3940> for many PDS archives. For GDAL's
PDS support, LOLA currently has this issue for PDS labels (again not the
*.jp2). It was recently determined that the LOLA PDS *.lbl Offset are *actually
correct* but GDAL and ISIS3 have had a 1 pixel PDS offset read error since
they were written. This actually is born from a unfortunate series of
events, where our initial test case, MOLA was (and still is) released with
incorrect offsets. This PDS offset issue is slated to be fixed for GDAL
<https://trac.osgeo.org/gdal/ticket/5941>. Now once this update gets pushed
in, archives that had happened to be incorrect (but worked correctly, e.g.
MOLA) will need to use these overrides.

I am hoping during the transition from PDS3 to PDS4 most of these offset
issues can be dealt with (plenty of other issues to also deal with for
various archives though). Support for a PDS4 driver will start once the
format solidifies. Lastly, since ISIS3 also uses Offsets in meters, there
has never been this issue within GDAL's ISIS3 driver.


On Thu, Jul 23, 2015 at 2:31 AM, Ramiro Marco Figuera <
r.marcofiguera at jacobs-university.de> wrote:

> Hi all,
>
> I'm creating polar gnomonic DEMs using the LOLA DEMs as input files in
> gdal. My end product is an ascii file with X Y Z values. The original LOLA
> DEM is data type integer16 and I'm trying to transform it to a float32. I
> use -ot Float32 in gdal_translate and -wt Float32 in gdalwarp to be sure
> that the data type doesn't changes during the process. The problem is that
> when I open my XYZ file, the Z column has only 3 decimal positions. Is
> there anything I'm doing wrong or am I completely wrong trying to do this?
>
> Cheers
>
> Ramiro
>
> --
> Ramiro Marco Figuera
> Department of Physics and Earth Sciences
> Jacobs University Bremen
> Campus Ring 1, 28759 Bremen, Germany
> Office: Research III, Room 99b
> Tel: +49 (0)421 200 3226
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150723/66c4d03e/attachment.html>

From aperi2007 at gmail.com  Thu Jul 23 11:55:44 2015
From: aperi2007 at gmail.com (Andrea Peri)
Date: Thu, 23 Jul 2015 20:55:44 +0200
Subject: [gdal-dev] gdal_merge error on linux debian. It dont find
	gdal_array.
In-Reply-To: <3043053.rn2gYqekV8@even-n550jk>
References: <CABqTJk-0pHBaTzP0XMhUFtP1P4b5qdQ2+vFkr0wh5fxZxw_W6g@mail.gmail.com>
	<3043053.rn2gYqekV8@even-n550jk>
Message-ID: <CABqTJk9N2p4hvenfx+dacADtYZEU0JryBMJm8tiwmJrAmCZuVA@mail.gmail.com>

Hi Even,

many thx for your help.

Infact installing numpy and recompiling the gdal_merge start to work .

yup !
:)


2015-07-23 15:41 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:
> Andre,
>
> Make sure you have the python-numpy package installed and recompile the GDAL
> python bindings
>
> Even
>
>> Hi
>>
>> I'm trying to use the gdal_merge.py. More explixitly I try this call:
>>
>> gdal_merge.py -separate /path-to-raster/LC81920292015189LGN00_rgb_hpf.tif \
>>     /path-to-raster/LC81930292015196LGN00_rgb_hpf.tif \
>>     -o result_image.tif
>>
>> (the tiff are float32.)
>>
>> The gdal_merge.py gives this error:
>>
>> 0Traceback (most recent call last):
>>   File "/usr/local/bin/gdal_merge.py", line 523, in <module>
>>     sys.exit(main())
>>   File "/usr/local/bin/gdal_merge.py", line 512, in main
>>     fi.copy_into( t_fh, band, t_band, nodata )
>>   File "/usr/local/bin/gdal_merge.py", line 253, in copy_into
>>     nodata_arg )
>>   File "/usr/local/bin/gdal_merge.py", line 71, in raster_copy
>>     m_band )
>>   File "/usr/local/bin/gdal_merge.py", line 107, in raster_copy_with_mask
>>     t_xsize, t_ysize )
>>   File
>> "/usr/local/lib/python2.7/dist-packages/GDAL-2.0.0-py2.7-linux-x86_64.egg/o
>> sgeo/gdal.py", line 1295, in ReadAsArray
>>     import gdalnumeric
>>   File
>> "/usr/local/lib/python2.7/dist-packages/GDAL-2.0.0-py2.7-linux-x86_64.egg/o
>> sgeo/gdalnumeric.py", line 1, in <module>
>>     from osgeo.gdal_array import *
>>   File
>> "/usr/local/lib/python2.7/dist-packages/GDAL-2.0.0-py2.7-linux-x86_64.egg/o
>> sgeo/gdal_array.py", line 25, in <module>
>>     _gdal_array = swig_import_helper()
>>   File
>> "/usr/local/lib/python2.7/dist-packages/GDAL-2.0.0-py2.7-linux-x86_64.egg/o
>> sgeo/gdal_array.py", line 17, in swig_import_helper
>>     import _gdal_array
>> ImportError: No module named _gdal_array
>>
>> Reading the error seem it is not finding the gdal_array module.
>>
>> The gdal is the 2.0.0 version and is compiled from source on a Debian 64
>> bit.
>>
>> I'm not sure if is a lack of configuration.
>> Any hint is welcome.
>>
>> Thx,
>>
>> Andrea.
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com



-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From mikec7200 at hotmail.com  Fri Jul 24 01:12:59 2015
From: mikec7200 at hotmail.com (mike c)
Date: Fri, 24 Jul 2015 18:42:59 +1030
Subject: [gdal-dev] Why is saving an array to ENVI file format using
	SaveArray so slow?
Message-ID: <COL129-W4796FB1D79A87D06B906D4A3810@phx.gbl>

Dear GDAL Developers

 

I?m  finding that when
saving  a relatively small array (shape =
128,4000,128  ie 128 band x 4000 lines x
128 columns of float data = 256Mb total)  to a ENVI file format using the call:

 

gdalnumeric.SaveArray(img,strf_out,'ENVI')

 

performance is extremely slow (~260 seconds).  When I save the same array to Geotif  format using;

 

gdalnumeric.SaveArray(img,strf_out,'GTIFF')

 

the operation
takes  ~24 seconds which is much more
acceptable.  

 

I?m currently
using gdal version 1.11.1 .  

 

My question to
the forum is then  -why is there such a
large discrepancy between the performance of the two operations and is there a way
to improve the performance when writing an array to  an ENVI file format?  

 

I have tried changing
the GDAL Cache options but performance doesn?t seem to alter.  When profiling the code which saves the array
to GeoTIFF format I get the output contained in the attached file timing_savearray_GTIFF.txt.  When profiling the code which saves the array
to ENVI format I get the output contained in the attached file timing_savearray_ENVI.txt

 

I would like to
save the data to ENVI file format.  Your
thoughts on this matter would be appreciated.

 

Thanks

 

Regards 

mike 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150724/83c5eb1f/attachment.html>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: .timing_savearray_GTIFF.txt
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150724/83c5eb1f/attachment.txt>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: timing_savearray_ENVI.txt
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150724/83c5eb1f/attachment-0001.txt>

From garethgrewcock at gmail.com  Fri Jul 24 02:35:50 2015
From: garethgrewcock at gmail.com (Gareth Grewcock)
Date: Fri, 24 Jul 2015 10:35:50 +0100
Subject: [gdal-dev] gdalwarp/gdalmerge overlapping single band gtiffs
Message-ID: <CAMEt-j92M5gk-c1ho=OR-mTECUFKtNXvpU-0SuJp2Eh=_wNu1A@mail.gmail.com>

Hi - I'm having difficulties with warping or merging overlapping single
band gtiffs (where the input tifs bounding box overlap)

When using gdalwarp:

I achieve the desired output extent of both tifs however, the data range of
the output tif is 0 to 0 (min and max values are both 0).

It appears to recognise the nodata value as the extent of both tifs are in
the gdalwarp output, it's just the data range is incorrect.

When I use gdalmerge:

In the documentation it says ' In areas of overlap, the last image will be
copied over earlier ones.'

Is it possible to overwrite the nodata values in the earlier image with real
data values present in the last image?

Because of this, the output gtiff extent from gdalmerge honours the first
gtiff bounding box and masks any real data from other tifs used within the
program.

Apologies, pretty difficult to explain but created a quick visual to show
the outputs here |
https://www.dropbox.com/s/0bfbi2ssbr4enjn/overlapping_single_band_geotiffs.png?dl=0

Also example data is here which should hopefully replicate the issue |
https://www.dropbox.com/s/o623ao42zi3kiun/gdal_dev.zip?dl=0

Thanks,

Gareth
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150724/7db4fb58/attachment-0001.html>

From r.marcofiguera at jacobs-university.de  Fri Jul 24 04:09:12 2015
From: r.marcofiguera at jacobs-university.de (Ramiro Marco Figuera)
Date: Fri, 24 Jul 2015 13:09:12 +0200
Subject: [gdal-dev] decimal truncation when gdal_translate/gdalwarp
In-Reply-To: <CAB6t5t-x3EJU1F0vN8hH-+0w5JU6jmfnWAq_D89nL53WKhD09Q@mail.gmail.com>
References: <55B0B454.8020900@jacobs-university.de>
	<CAB6t5t-x3EJU1F0vN8hH-+0w5JU6jmfnWAq_D89nL53WKhD09Q@mail.gmail.com>
Message-ID: <55B21CD8.6060901@jacobs-university.de>

Trent,

Thanks a lot for the quick answer. I am using the img files so, I guess 
I will have to apply the offset correction. When using gdal_translate I 
already use "gdal_translate -ot Float32 -unscale in_16bit.lbl 
out_32bit.tif". I think the problem might be when I use gdal_translate 
-of XYZ in.tif out.xyz to get a readable file for my code. I am afraid 
that the decimal truncation is happening in this step.

About the offset, Thanks for the explanation. I will apply the code to 
correct this issue.

Again, thanks a lot!

Cheers,

Ramiro

On 07/23/2015 04:57 PM, Hare, Trent wrote:
> Ramiro,
>   I believe all 16bit LOLA DEMs have a scale in the header of 0.5 
> (they do release 32bit files also). Check to make sure the scale 
> parameter exists using gdalinfo. To apply this value during conversion 
> you have be explicit and specify "-ot Float32" AND "-unscale". So 
> something like this.
>
> > gdal_translate -ot Float32 -unscale in_16bit.lbl out_32bit.tif
> If you are converting the Jpeg2000 files, and you don't see this 
> scale, you also need to download the GDAL *.xml file within the LOLA 
> archive and rename. They were not allow to archive with more than one 
> extension (silly constraint for this day-and-age). For example for 
> their geoJpeg2000s:
>
> first rename:
> > mv ldem_85n_10m_aux.xml ldem_85n_10m.jp2.aux.xml
> now convert to 32bit Tiff (please see tip below):
> > gdal_translate -ot Float32 
> -unscale ldem_85n_10m.jp2 ldem_85n_10m_32bit.tif
>
> example data from: 
> http://pds-geosciences.wustl.edu/lro/lro-l-lola-3-rdr-v1/lrolol_1xxx/data/lola_gdr/polar/jp2
>
> Regards,
> Trent
>
> Tip: I have been warned by the LOLA team to be cautious using anything 
> higher-res than 20m for polar analysis.
>
> -----------------------------------
>
> P.S. Just to muddy the water for LOLA:
>
> Currently for LOLA PDS (*.lbl) labels, you will need to override the 
> OFFSET defaults. Thus for any PDS LOLA *.lbl label to remove an 
> incorrect 1 pixel shift you need to also include these command-line 
> --config options:
>
> for gdalinfo:
> > gdalinfo  --config PDS_SampleProjOffset_Shift 0.5 --config 
> PDS_LineProjOffset_Shift 0.5  in.lbl out.tif
> For LOLA polar files  the *center should be perfectly 0.0, 0.0 
> meters* in Cartesian space
>
> for conversion:
> > gdal_translate -ot Float32 -unscale  --config 
> PDS_SampleProjOffset_Shift 0.5 --config PDS_LineProjOffset_Shift 0.5 
>  in.lbl out_32bit.tif
>
> *note: *you *don't* need to use this for the LOLA the *.jp2 files 
> (with renamed *.xml file). The *.jp2 internal headers use the more 
> standard Offsets in meters which are correct (not the odd PDS's scaled 
> pixel-space offsets - at least odd to me).
>
> _History_: There are several known offset issues 
> <https://trac.osgeo.org/gdal/ticket/3940> for many PDS archives. For 
> GDAL's PDS support, LOLA currently has this issue for PDS labels 
> (again not the *.jp2). It was recently determined that the LOLA PDS 
> *.lbl Offset are *actually correct* but GDAL and ISIS3 have had a 1 
> pixel PDS offset read error since they were written. This actually is 
> born from a unfortunate series of events, where our initial test case, 
> MOLA was (and still is) released with incorrect offsets. This PDS 
> offset issue is slated to be fixed for GDAL 
> <https://trac.osgeo.org/gdal/ticket/5941>. Now once this update gets 
> pushed in, archives that had happened to be incorrect (but worked 
> correctly, e.g. MOLA) will need to use these overrides.
>
> I am hoping during the transition from PDS3 to PDS4 most of these 
> offset issues can be dealt with (plenty of other issues to also deal 
> with for various archives though). Support for a PDS4 driver will 
> start once the format solidifies. Lastly, since ISIS3 also uses 
> Offsets in meters, there has never been this issue within GDAL's ISIS3 
> driver.
>
>
> On Thu, Jul 23, 2015 at 2:31 AM, Ramiro Marco Figuera 
> <r.marcofiguera at jacobs-university.de 
> <mailto:r.marcofiguera at jacobs-university.de>> wrote:
>
>     Hi all,
>
>     I'm creating polar gnomonic DEMs using the LOLA DEMs as input
>     files in gdal. My end product is an ascii file with X Y Z values.
>     The original LOLA DEM is data type integer16 and I'm trying to
>     transform it to a float32. I use -ot Float32 in gdal_translate and
>     -wt Float32 in gdalwarp to be sure that the data type doesn't
>     changes during the process. The problem is that when I open my XYZ
>     file, the Z column has only 3 decimal positions. Is there anything
>     I'm doing wrong or am I completely wrong trying to do this?
>
>     Cheers
>
>     Ramiro
>
>     -- 
>     Ramiro Marco Figuera
>     Department of Physics and Earth Sciences
>     Jacobs University Bremen
>     Campus Ring 1, 28759 Bremen, Germany
>     Office: Research III, Room 99b
>     Tel: +49 (0)421 200 3226
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-- 
Ramiro Marco Figuera
Department of Physics and Earth Sciences
Jacobs University Bremen
Campus Ring 1, 28759 Bremen, Germany
Office: Research III, Room 99b
Tel: +49 (0)421 200 3226

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150724/29fe6a20/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Jul 24 11:59:14 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Fri, 24 Jul 2015 18:59:14 +0000 (UTC)
Subject: [gdal-dev] Motion: Adopt FRC48: Geographical networks support
References: <55A8D46F.6050909@gmail.com>
Message-ID: <loom.20150724T205832-614@post.gmane.org>

Dmitry Baryshnikov <bishop.dev <at> gmail.com> writes:


> 
> I think it's time to vote for adopt the RFC 48 Geographical networks 
> support and to merge the pull request to the GDAL sources trunk. 
> According to https://trac.osgeo.org/gdal/wiki/rfc1_pmc I start the vote 
> and my +1 for adopt.

+1

-Jukka Rahkonen-



From szekerest at gmail.com  Fri Jul 24 12:11:03 2015
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri, 24 Jul 2015 21:11:03 +0200
Subject: [gdal-dev] Motion: Adopt FRC48: Geographical networks support
In-Reply-To: <55A8D46F.6050909@gmail.com>
References: <55A8D46F.6050909@gmail.com>
Message-ID: <CACALY+RCVrQ6bdwTrNzFmqnPVsVND0f3AUUgNA=G5OQeoymkfQ@mail.gmail.com>

+1

Tamas

2015-07-17 12:09 GMT+02:00 Dmitry Baryshnikov <bishop.dev at gmail.com>:

> Hi,
>
> I finished the work on merging the GSoC2014  Geographical networks support
> in GDAL to trunk.
> The RFC (
> https://trac.osgeo.org/gdal/wiki/rfc48_geographical_networks_support) was
> corrected.
> The pull request (https://github.com/OSGeo/gdal/pull/60) created.
> Travis building passed.
>
> I think it's time to vote for adopt the RFC 48 Geographical networks
> support and to merge the pull request to the GDAL sources trunk. According
> to https://trac.osgeo.org/gdal/wiki/rfc1_pmc I start the vote and my +1
> for adopt.
>
> --
> Best regards,
>     Dmitry
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150724/bf6dfd98/attachment.html>

From even.rouault at spatialys.com  Fri Jul 24 12:31:30 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 24 Jul 2015 21:31:30 +0200
Subject: [gdal-dev] Why is saving an array to ENVI file format using
	SaveArray so slow?
In-Reply-To: <COL129-W4796FB1D79A87D06B906D4A3810@phx.gbl>
References: <COL129-W4796FB1D79A87D06B906D4A3810@phx.gbl>
Message-ID: <201507242131.30753.even.rouault@spatialys.com>

Mike,

I've tried the following snippet:

from osgeo import gdal, gdalnumeric
import numpy

ar = numpy.zeros( [128,4000,128], dtype = numpy.float32)
gdalnumeric.SaveArray(ar,'testenvi.bin','ENVI')
gdalnumeric.SaveArray(ar,'testtif.tif','GTiff')

And it runs in ~ 2 seconds on both GDAL 1.11 and trunk. (Linux 64bit, but I'm 
not sure why the OS would account for such a dramatic difference)

Even

> Dear GDAL Developers
> 
> 
> 
> I?m  finding that when
> saving  a relatively small array (shape =
> 128,4000,128  ie 128 band x 4000 lines x
> 128 columns of float data = 256Mb total)  to a ENVI file format using the
> call:
> 
> 
> 
> gdalnumeric.SaveArray(img,strf_out,'ENVI')
> 
> 
> 
> performance is extremely slow (~260 seconds).  When I save the same array
> to Geotif  format using;
> 
> 
> 
> gdalnumeric.SaveArray(img,strf_out,'GTIFF')
> 
> 
> 
> the operation
> takes  ~24 seconds which is much more
> acceptable.
> 
> 
> 
> I?m currently
> using gdal version 1.11.1 .
> 
> 
> 
> My question to
> the forum is then  -why is there such a
> large discrepancy between the performance of the two operations and is
> there a way to improve the performance when writing an array to  an ENVI
> file format?
> 
> 
> 
> I have tried changing
> the GDAL Cache options but performance doesn?t seem to alter.  When
> profiling the code which saves the array to GeoTIFF format I get the
> output contained in the attached file timing_savearray_GTIFF.txt.  When
> profiling the code which saves the array to ENVI format I get the output
> contained in the attached file timing_savearray_ENVI.txt
> 
> 
> 
> I would like to
> save the data to ENVI file format.  Your
> thoughts on this matter would be appreciated.
> 
> 
> 
> Thanks
> 
> 
> 
> Regards
> 
> mike

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mdsumner at gmail.com  Fri Jul 24 15:56:42 2015
From: mdsumner at gmail.com (Michael Sumner)
Date: Fri, 24 Jul 2015 22:56:42 +0000
Subject: [gdal-dev] guidance on NSIDC Sea Ice concentration data
Message-ID: <CAAcGz9-Wx9D-4t0zWQ1KyZ_TVGXN6F3=WQFwfD_9XEWxM0Y4kQ@mail.gmail.com>

Hello, I've put together an example of using NSDIC sea ice concentration
data with GDAL VRT.

In this Github readme I list two example data sets, one for the Northern
and one for the Southern hemisphere where the raw
binary NSDIC .bin files have accompanying VRT files:

https://github.com/mdsumner/NSIDC-seaice

I'd really like to see this format as a GDAL driver, but I don't have the
C++ expertise to make it happen. I can offer help and testing if anyone was
interested in writing the driver, but I would also appreciate any guidance
and kick start for me to learn to do it myself.

The format itself is detailed here, and everything required can be gleaned
from the header - though in the VRT pathway I simply skip the header and
apply the right CRS, orientation, grid size and geotransform:

http://nsidc.org/data/docs/daac/nsidc0051_gsfc_seaice.gd.html#format

The repo includes the minimal .vrt required to read this as a valid GDAL
data set and uses plotting in R with standard R
mapping tools to show that the interpretation is right, at least visibly.

I have these questions:

* what is the best template driver for these data, should it derive from
 GDALPamDataset like JDEM or from RawDataset as ERS does? (I'm way out of
my depth here)
* is it appropriate to use this SRS when the datum is unspecified? I'm not
clear on the pitfalls here and how to advise downstream use

I am competent with building GDAL but I get lost in the steps required to
add a new driver. A dummy example, or some more detailed guidance for how I
would apply the "GDAL Driver Implementation Tutorial" to these data would
be enough for me to flesh out the details.

The projection SRS used are EPSG 3411 (north) and 3412 (south) as listed
here:
http://spatialreference.org/ref/epsg/3411/
http://spatialreference.org/ref/epsg/3412/

I have otherwise written this support directly into the R package raster,
the R source for these files is here in this read-only mirror (raster is on
r-forge):

https://github.com/cran/raster/blob/master/R/nsidcICE.R

This works very well for R, but I'd prefer to see this format in GDAL so
that other languages have the same facility. There are other sea ice
concentration data sources, usually in HDF4 format - and they only need the
geotransform and SRS assigned for use in GDAL - so they need work as well
but not as fundamental as this raw binary format.  This data source is very
extensive, with daily data at 25km resolution every day since 1979 with
only ~30 days total missing, and only a handful with problems in the map
coverage.

Thank you.

Cheers, Mike.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150724/b587ccd9/attachment.html>

From aperi2007 at gmail.com  Sat Jul 25 15:40:48 2015
From: aperi2007 at gmail.com (Andrea Peri)
Date: Sun, 26 Jul 2015 00:40:48 +0200
Subject: [gdal-dev] using gdal_merge with floating images
Message-ID: <CABqTJk89rF+-3Xrxg2A-A_jJB+AU6k4ySKpUGabn_nV-ORXOtw@mail.gmail.com>

Hi,
I'm try-ing to merging some rasters using gdal_merge.
The raster are all float64 and with differents interval of values.
Is this kind of rasters compatible with gdal_merge ?

I ask because , my try was stopped with a crash.

And perhaps this could be the explanation.

Many thx.


-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From andre+joost at nurfuerspam.de  Sun Jul 26 09:34:58 2015
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Sun, 26 Jul 2015 18:34:58 +0200
Subject: [gdal-dev] guidance on NSIDC Sea Ice concentration data
In-Reply-To: <CAAcGz9-Wx9D-4t0zWQ1KyZ_TVGXN6F3=WQFwfD_9XEWxM0Y4kQ@mail.gmail.com>
References: <CAAcGz9-Wx9D-4t0zWQ1KyZ_TVGXN6F3=WQFwfD_9XEWxM0Y4kQ@mail.gmail.com>
Message-ID: <mp329u$qm1$1@ger.gmane.org>

Can this VRT approach be used for MODIS sea ice data too?

http://gis.stackexchange.com/questions/112547/reprojecting-modis-ice-sea-temperature-products-with-gdalwarp

http://gis.stackexchange.com/questions/155326/reprojecting-modis-sea-ice-extent-and-ist-data-using-gdal

note that especially older versions (before 2011) only produce garbage 
images with GDAL.

Greetings,
Andr? Joost

Am 25.07.2015 um 00:56 schrieb Michael Sumner:
> Hello, I've put together an example of using NSDIC sea ice concentration
> data with GDAL VRT.
>
> In this Github readme I list two example data sets, one for the Northern
> and one for the Southern hemisphere where the raw
> binary NSDIC .bin files have accompanying VRT files:
>
> https://github.com/mdsumner/NSIDC-seaice
>
> I'd really like to see this format as a GDAL driver, but I don't have the
> C++ expertise to make it happen. I can offer help and testing if anyone was
> interested in writing the driver, but I would also appreciate any guidance
> and kick start for me to learn to do it myself.
>
> The format itself is detailed here, and everything required can be gleaned
> from the header - though in the VRT pathway I simply skip the header and
> apply the right CRS, orientation, grid size and geotransform:
>
> http://nsidc.org/data/docs/daac/nsidc0051_gsfc_seaice.gd.html#format
>
> The repo includes the minimal .vrt required to read this as a valid GDAL
> data set and uses plotting in R with standard R
> mapping tools to show that the interpretation is right, at least visibly.
>
> I have these questions:
>
> * what is the best template driver for these data, should it derive from
>   GDALPamDataset like JDEM or from RawDataset as ERS does? (I'm way out of
> my depth here)
> * is it appropriate to use this SRS when the datum is unspecified? I'm not
> clear on the pitfalls here and how to advise downstream use
>
> I am competent with building GDAL but I get lost in the steps required to
> add a new driver. A dummy example, or some more detailed guidance for how I
> would apply the "GDAL Driver Implementation Tutorial" to these data would
> be enough for me to flesh out the details.
>
> The projection SRS used are EPSG 3411 (north) and 3412 (south) as listed
> here:
> http://spatialreference.org/ref/epsg/3411/
> http://spatialreference.org/ref/epsg/3412/
>
> I have otherwise written this support directly into the R package raster,
> the R source for these files is here in this read-only mirror (raster is on
> r-forge):
>
> https://github.com/cran/raster/blob/master/R/nsidcICE.R
>
> This works very well for R, but I'd prefer to see this format in GDAL so
> that other languages have the same facility. There are other sea ice
> concentration data sources, usually in HDF4 format - and they only need the
> geotransform and SRS assigned for use in GDAL - so they need work as well
> but not as fundamental as this raw binary format.  This data source is very
> extensive, with daily data at 25km resolution every day since 1979 with
> only ~30 days total missing, and only a handful with problems in the map
> coverage.
>
> Thank you.
>
> Cheers, Mike.
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From Benjamin.Stadin at heidelberg-mobil.com  Sun Jul 26 15:17:50 2015
From: Benjamin.Stadin at heidelberg-mobil.com (Stadin, Benjamin)
Date: Sun, 26 Jul 2015 22:17:50 +0000
Subject: [gdal-dev] Preferred DXF format version for reading
Message-ID: <D1DB272E.27BDD%benjamin.stadin@heidelberg-mobil.com>

Hi,

We are working on a data processing pipeline which has a DXF import filter
(read-only). 

The documentation for the dxf driver says:
"OGR supports reading most versions of AutoCAD DXF and writing AutoCAD
2000 version files."

I consider to use Teigha file converter to convert between various DXF and
DWG format versions to the preferred dxf format. But what is actually the
best, or most widely supported, dxf file format for reading dxf data with
OGR?

Cheers
Ben



From markus.u.mueller at zoho.com  Sun Jul 26 19:47:56 2015
From: markus.u.mueller at zoho.com (=?UTF-8?Q?Markus_M=C3=BCller?=)
Date: Sun, 26 Jul 2015 19:47:56 -0700
Subject: [gdal-dev] guidance on NSIDC Sea Ice concentration data
In-Reply-To: <mp329u$qm1$1@ger.gmane.org>
References: <CAAcGz9-Wx9D-4t0zWQ1KyZ_TVGXN6F3=WQFwfD_9XEWxM0Y4kQ@mail.gmail.com>
	<mp329u$qm1$1@ger.gmane.org>
Message-ID: <14ecd684dc4.eb224e2a112372.527949580761295888@zoho.com>

I submitted a ticket regarding this issue:https://trac.osgeo.org/gdal/ticket/6051


Thanks Andre for your help on gis.stackexchange and here.




Cheers,


Markus Mueller




---- On Sun, 26 Jul 2015 09:34:58 -0700 Andre Joost &lt;andre+joost at nurfuerspam.de&gt; wrote ---- 

Can this VRT approach be used for MODIS sea ice data too? 
 
http://gis.stackexchange.com/questions/112547/reprojecting-modis-ice-sea-temperature-products-with-gdalwarp 
 
http://gis.stackexchange.com/questions/155326/reprojecting-modis-sea-ice-extent-and-ist-data-using-gdal 
 
note that especially older versions (before 2011) only produce garbage 
images with GDAL. 
 
Greetings, 
Andr? Joost 
 
Am 25.07.2015 um 00:56 schrieb Michael Sumner: 
&gt; Hello, I've put together an example of using NSDIC sea ice concentration 
&gt; data with GDAL VRT. 
&gt; 
&gt; In this Github readme I list two example data sets, one for the Northern 
&gt; and one for the Southern hemisphere where the raw 
&gt; binary NSDIC .bin files have accompanying VRT files: 
&gt; 
&gt; https://github.com/mdsumner/NSIDC-seaice 
&gt; 
&gt; I'd really like to see this format as a GDAL driver, but I don't have the 
&gt; C++ expertise to make it happen. I can offer help and testing if anyone was 
&gt; interested in writing the driver, but I would also appreciate any guidance 
&gt; and kick start for me to learn to do it myself. 
&gt; 
&gt; The format itself is detailed here, and everything required can be gleaned 
&gt; from the header - though in the VRT pathway I simply skip the header and 
&gt; apply the right CRS, orientation, grid size and geotransform: 
&gt; 
&gt; http://nsidc.org/data/docs/daac/nsidc0051_gsfc_seaice.gd.html#format 
&gt; 
&gt; The repo includes the minimal .vrt required to read this as a valid GDAL 
&gt; data set and uses plotting in R with standard R 
&gt; mapping tools to show that the interpretation is right, at least visibly. 
&gt; 
&gt; I have these questions: 
&gt; 
&gt; * what is the best template driver for these data, should it derive from 
&gt; GDALPamDataset like JDEM or from RawDataset as ERS does? (I'm way out of 
&gt; my depth here) 
&gt; * is it appropriate to use this SRS when the datum is unspecified? I'm not 
&gt; clear on the pitfalls here and how to advise downstream use 
&gt; 
&gt; I am competent with building GDAL but I get lost in the steps required to 
&gt; add a new driver. A dummy example, or some more detailed guidance for how I 
&gt; would apply the "GDAL Driver Implementation Tutorial" to these data would 
&gt; be enough for me to flesh out the details. 
&gt; 
&gt; The projection SRS used are EPSG 3411 (north) and 3412 (south) as listed 
&gt; here: 
&gt; http://spatialreference.org/ref/epsg/3411/ 
&gt; http://spatialreference.org/ref/epsg/3412/ 
&gt; 
&gt; I have otherwise written this support directly into the R package raster, 
&gt; the R source for these files is here in this read-only mirror (raster is on 
&gt; r-forge): 
&gt; 
&gt; https://github.com/cran/raster/blob/master/R/nsidcICE.R 
&gt; 
&gt; This works very well for R, but I'd prefer to see this format in GDAL so 
&gt; that other languages have the same facility. There are other sea ice 
&gt; concentration data sources, usually in HDF4 format - and they only need the 
&gt; geotransform and SRS assigned for use in GDAL - so they need work as well 
&gt; but not as fundamental as this raw binary format. This data source is very 
&gt; extensive, with daily data at 25km resolution every day since 1979 with 
&gt; only ~30 days total missing, and only a handful with problems in the map 
&gt; coverage. 
&gt; 
&gt; Thank you. 
&gt; 
&gt; Cheers, Mike. 
&gt; 
&gt; 
&gt; 
&gt; _______________________________________________ 
&gt; gdal-dev mailing list 
&gt; gdal-dev at lists.osgeo.org 
&gt; http://lists.osgeo.org/mailman/listinfo/gdal-dev 
&gt; 
 
 
_______________________________________________ 
gdal-dev mailing list 
gdal-dev at lists.osgeo.org 
http://lists.osgeo.org/mailman/listinfo/gdal-dev 





-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150726/c06b2ffd/attachment.html>

From mikec7200 at hotmail.com  Sun Jul 26 22:53:26 2015
From: mikec7200 at hotmail.com (mike c)
Date: Mon, 27 Jul 2015 16:23:26 +1030
Subject: [gdal-dev] Why is saving an array to ENVI file format using
 SaveArray so slow?
In-Reply-To: <201507242131.30753.even.rouault@spatialys.com>
References: <COL129-W4796FB1D79A87D06B906D4A3810@phx.gbl>,
	<201507242131.30753.even.rouault@spatialys.com>
Message-ID: <COL129-W2207170323219306D33047A38E0@phx.gbl>

Dear Even and GDAL community

 

Thanks for the feedback. 


 

 After receiving your
email I tried to narrow down the source of the problem.  On further investigation it seems like indeed,
like you,  writing to my local disk is quick.  I notice, however,  the problem occurs when writing to file shares
 on a local area network.  The remote file shares where the underlying
file system is UNIX  seems to cause the
problem i.e. writing an image (128,4000,128) using  SaveArray(img,remote system
,?ENVI?) from my Windows system to remote
file share(where the file system is UNIX) takes 3-4 minutes. Writing the image  between the same systems to GeoTiff format
appears to be quicker ~24 second. Using the ndarray.tofile() to write the same
image from the same system to the same remote disk takes ~20 seconds.  Copying the same size image between the two
systems using Explorer takes only a few seconds.   Using  the SaveArray(img,remote system ,?ENVI?)   operation
to write the image to  a remote Windows file
share on the same network  takes  a   few seconds. 

 

Any thoughts as to why this is happening and whether there
is a way of overcoming this problem would be welcomed.

 

Thanks 

mike   
> From: even.rouault at spatialys.com
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Why is saving an array to ENVI file format using SaveArray so slow?
> Date: Fri, 24 Jul 2015 21:31:30 +0200
> CC: mikec7200 at hotmail.com
> 
> Mike,
> 
> I've tried the following snippet:
> 
> from osgeo import gdal, gdalnumeric
> import numpy
> 
> ar = numpy.zeros( [128,4000,128], dtype = numpy.float32)
> gdalnumeric.SaveArray(ar,'testenvi.bin','ENVI')
> gdalnumeric.SaveArray(ar,'testtif.tif','GTiff')
> 
> And it runs in ~ 2 seconds on both GDAL 1.11 and trunk. (Linux 64bit, but I'm 
> not sure why the OS would account for such a dramatic difference)
> 
> Even
> 
> > Dear GDAL Developers
> > 
> > 
> > 
> > I?m  finding that when
> > saving  a relatively small array (shape =
> > 128,4000,128  ie 128 band x 4000 lines x
> > 128 columns of float data = 256Mb total)  to a ENVI file format using the
> > call:
> > 
> > 
> > 
> > gdalnumeric.SaveArray(img,strf_out,'ENVI')
> > 
> > 
> > 
> > performance is extremely slow (~260 seconds).  When I save the same array
> > to Geotif  format using;
> > 
> > 
> > 
> > gdalnumeric.SaveArray(img,strf_out,'GTIFF')
> > 
> > 
> > 
> > the operation
> > takes  ~24 seconds which is much more
> > acceptable.
> > 
> > 
> > 
> > I?m currently
> > using gdal version 1.11.1 .
> > 
> > 
> > 
> > My question to
> > the forum is then  -why is there such a
> > large discrepancy between the performance of the two operations and is
> > there a way to improve the performance when writing an array to  an ENVI
> > file format?
> > 
> > 
> > 
> > I have tried changing
> > the GDAL Cache options but performance doesn?t seem to alter.  When
> > profiling the code which saves the array to GeoTIFF format I get the
> > output contained in the attached file timing_savearray_GTIFF.txt.  When
> > profiling the code which saves the array to ENVI format I get the output
> > contained in the attached file timing_savearray_ENVI.txt
> > 
> > 
> > 
> > I would like to
> > save the data to ENVI file format.  Your
> > thoughts on this matter would be appreciated.
> > 
> > 
> > 
> > Thanks
> > 
> > 
> > 
> > Regards
> > 
> > mike
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150727/159816a0/attachment.html>

From lorenzo.bottaccioli at gmail.com  Mon Jul 27 06:03:20 2015
From: lorenzo.bottaccioli at gmail.com (Lorenzo Bottaccioli)
Date: Mon, 27 Jul 2015 15:03:20 +0200
Subject: [gdal-dev] [gadl-dev][Grass-dev] Make error with grass 7 and
	Gdal-grass-plugin-2.0
Message-ID: <CA+D=DWHessgP1QbY5VZfdV0mSeF8P2_mtBf8-i9YD1-kMuN=Cw@mail.gmail.com>

Hi,

I'm trying to compile GDAL-grass-plugin-2.0 against grass 7.

I have previously installed GDAL2.0 with out grass support. Then I have
compiled grass 7 with no errors.

I'f I try to compile GDAL-grass-plugin wtih this configure

*./configure --prefix=/usr/local --with-gdal=/usr/bin/gdal-config
--with-grass=/usr/local/grass-7.0.0
--with-autoload="/usr/local/lib/gdalplugins/"  --with-ld-shared="g++
-shared"*

It compiles with out erros but when I do make command it give me this error:































































































*lorenzo at lorenzo:~/gdal-grass-2.0.0$ make -j 4g++ -Wall -fPIC  -DUSE_CPL
-DGRASS_GISBASE=\"/usr/local/grass-7.0.0\" -I/usr/include/gdal
-I/usr/local/grass-7.0.0/include   -O2   -c -o grass57dataset.o
grass57dataset.cppg++ -Wall -fPIC  -DUSE_CPL
-DGRASS_GISBASE=\"/usr/local/grass-7.0.0\" -I/usr/include/gdal
-I/usr/local/grass-7.0.0/include   -O2   -c -o ogrgrassdriver.o
ogrgrassdriver.cppg++ -Wall -fPIC  -DUSE_CPL
-DGRASS_GISBASE=\"/usr/local/grass-7.0.0\" -I/usr/include/gdal
-I/usr/local/grass-7.0.0/include   -O2   -c -o ogrgrassdatasource.o
ogrgrassdatasource.cppg++ -Wall -fPIC  -DUSE_CPL
-DGRASS_GISBASE=\"/usr/local/grass-7.0.0\" -I/usr/include/gdal
-I/usr/local/grass-7.0.0/include   -O2   -c -o ogrgrasslayer.o
ogrgrasslayer.cppgrass57dataset.cpp:186:32: error: ?GSpacing? has not been
declared                                GSpacing
nPixelSpace,                                ^grass57dataset.cpp:187:32:
error: ?GSpacing? has not been declared
GSpacing nLineSpace,
^grass57dataset.cpp:188:32: error: ?GDALRasterIOExtraArg? has not been
declared                                GDALRasterIOExtraArg*
psExtraArg);                                ^grass57dataset.cpp:534:8:
error: ?GSpacing? has not been declared        GSpacing nPixelSpace,
^grass57dataset.cpp:535:20: error: ?GSpacing? has not been
declared                    GSpacing nLineSpace,
^grass57dataset.cpp:536:20: error: ?GDALRasterIOExtraArg? has not been
declared                    GDALRasterIOExtraArg* psExtraArg
)                    ^In file included from
ogrgrasslayer.cpp:32:0:ogrgrass.h:58:25: error: conflicting return type
specified for ?virtual GIntBig OGRGRASSLayer::GetFeatureCount(int)?
GIntBig             GetFeatureCount( int );                         ^In
file included from ogrgrass.h:33:0,                 from
ogrgrasslayer.cpp:32:/usr/include/gdal/ogrsf_frmts.h:95:25: error:
overriding ?virtual int OGRLayer::GetFeatureCount(int)?     virtual
int         GetFeatureCount( int bForce = TRUE );
^ogrgrasslayer.cpp: In constructor ?OGRGRASSLayer::OGRGRASSLayer(int,
Map_info*)?:ogrgrasslayer.cpp:90:46: error: ?SetDescription? was not
declared in this scope     SetDescription( poFeatureDefn->GetName()
);                                              ^ogrgrasslayer.cpp:120:55:
error: ?wkbSetZ? was not declared in this scope
poFeatureDefn->SetGeomType ( wkbSetZ(eGeomType)
);
^grass57dataset.cpp: In function ?void
GDALRegister_GRASS()?:grass57dataset.cpp:1050:36: error: ?GDAL_DCAP_RASTER?
was not declared in this scope         poDriver->SetMetadataItem(
GDAL_DCAP_RASTER, "YES" );
^ogrgrasslayer.cpp: In member function ?OGRFeature*
OGRGRASSLayer::GetFeature(GIntBig)?:ogrgrasslayer.cpp:790:82: warning:
format ?%ld? expects argument of type ?long int?, but argument 3 has type
?GIntBig {aka long long int}? [-Wformat=]     CPLDebug ( "GRASS",
"OGRGRASSLayer::GetFeature nFeatureId = %ld", nFeatureId
);
^make: *** [grass57dataset.o] Error 1make: *** Waiting for unfinished
jobs....make: *** [ogrgrasslayer.o] Error 1In file included from
ogrgrassdatasource.cpp:31:0:ogrgrass.h:58:25: error: conflicting return
type specified for ?virtual GIntBig
OGRGRASSLayer::GetFeatureCount(int)?     GIntBig
GetFeatureCount( int );                         ^In file included from
ogrgrassdriver.cpp:30:0:ogrgrass.h:58:25: error: conflicting return type
specified for ?virtual GIntBig OGRGRASSLayer::GetFeatureCount(int)?
GIntBig             GetFeatureCount( int );                         ^In
file included from ogrgrass.h:33:0,                 from
ogrgrassdatasource.cpp:31:/usr/include/gdal/ogrsf_frmts.h:95:25: error:
overriding ?virtual int OGRLayer::GetFeatureCount(int)?     virtual
int         GetFeatureCount( int bForce = TRUE );
^In file included from ogrgrass.h:33:0,                 from
ogrgrassdriver.cpp:30:/usr/include/gdal/ogrsf_frmts.h:95:25: error:
overriding ?virtual int OGRLayer::GetFeatureCount(int)?     virtual
int         GetFeatureCount( int bForce = TRUE );
^ogrgrassdriver.cpp: In function ?void
RegisterOGRGRASS()?:ogrgrassdriver.cpp:113:42: error: ?GDALGetDriverByName?
was not declared in this scope     if( GDALGetDriverByName( "OGR_GRASS" )
== NULL )
^ogrgrassdriver.cpp:117:19: error: ?class OGRGRASSDriver? has no member
named ?SetDescription?         poDriver->SetDescription( "GRASS"
);                   ^ogrgrassdriver.cpp:118:19: error: ?class
OGRGRASSDriver? has no member named ?SetMetadataItem?
poDriver->SetMetadataItem( GDAL_DCAP_VECTOR, "YES" );
^ogrgrassdriver.cpp:118:36: error: ?GDAL_DCAP_VECTOR? was not declared in
this scope         poDriver->SetMetadataItem( GDAL_DCAP_VECTOR, "YES"
);                                    ^ogrgrassdriver.cpp:119:19: error:
?class OGRGRASSDriver? has no member named ?SetMetadataItem?
poDriver->SetMetadataItem( GDAL_DMD_LONGNAME,
^ogrgrassdriver.cpp:119:36: error: ?GDAL_DMD_LONGNAME? was not declared in
this scope         poDriver->SetMetadataItem( GDAL_DMD_LONGNAME,
                                    ^ogrgrassdriver.cpp:121:19: error:
?class OGRGRASSDriver? has no member named ?SetMetadataItem?
poDriver->SetMetadataItem( GDAL_DMD_HELPTOPIC,
^ogrgrassdriver.cpp:121:36: error: ?GDAL_DMD_HELPTOPIC? was not declared in
this scope         poDriver->SetMetadataItem( GDAL_DMD_HELPTOPIC,
                                    ^make: *** [ogrgrassdriver.o] Error
1make: *** [ogrgrassdatasource.o] Error 1*

Any suggestion to solve it?

Tnx

Lorenzo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150727/1fade8ca/attachment-0001.html>

From even.rouault at spatialys.com  Mon Jul 27 10:34:48 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 27 Jul 2015 19:34:48 +0200
Subject: [gdal-dev] guidance on NSIDC Sea Ice concentration data
In-Reply-To: <CAAcGz9-Wx9D-4t0zWQ1KyZ_TVGXN6F3=WQFwfD_9XEWxM0Y4kQ@mail.gmail.com>
References: <CAAcGz9-Wx9D-4t0zWQ1KyZ_TVGXN6F3=WQFwfD_9XEWxM0Y4kQ@mail.gmail.com>
Message-ID: <2466026.7d2cczig0V@even-n550jk>

On Friday 24 July 2015 22:56:42 Michael Sumner wrote:
> Hello, I've put together an example of using NSDIC sea ice concentration
> data with GDAL VRT.
> 
> In this Github readme I list two example data sets, one for the Northern
> and one for the Southern hemisphere where the raw
> binary NSDIC .bin files have accompanying VRT files:
> 
> https://github.com/mdsumner/NSIDC-seaice
> 
> I'd really like to see this format as a GDAL driver, but I don't have the
> C++ expertise to make it happen. I can offer help and testing if anyone was
> interested in writing the driver, but I would also appreciate any guidance
> and kick start for me to learn to do it myself.
> 
> The format itself is detailed here, and everything required can be gleaned
> from the header - though in the VRT pathway I simply skip the header and
> apply the right CRS, orientation, grid size and geotransform:
> 
> http://nsidc.org/data/docs/daac/nsidc0051_gsfc_seaice.gd.html#format
> 
> The repo includes the minimal .vrt required to read this as a valid GDAL
> data set and uses plotting in R with standard R
> mapping tools to show that the interpretation is right, at least visibly.
> 
> I have these questions:
> 
> * what is the best template driver for these data, should it derive from
>  GDALPamDataset like JDEM or from RawDataset as ERS does? (I'm way out of
> my depth here)

Mike,

Deriving from RawDataset is certainly the best option here. You can take 
exemple on drivers in frmts/raw/


> * is it appropriate to use this SRS when the datum is unspecified? I'm not
> clear on the pitfalls here and how to advise downstream use

Do you mean EPSG 3411 and 3412 ? Well, why not... ?

> 
> I am competent with building GDAL but I get lost in the steps required to
> add a new driver. A dummy example, or some more detailed guidance for how I
> would apply the "GDAL Driver Implementation Tutorial" to these data would
> be enough for me to flesh out the details.

You'll basically have to use a new file and reference it in 
frmts/raw/GNUmakefile and makefile.vc, as well as declaring the driver register 
function in gcore/gdal_frmts.h and calling it in frmts/gdalallregister.cpp

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Jul 27 10:37:02 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 27 Jul 2015 19:37:02 +0200
Subject: [gdal-dev] using gdal_merge with floating images
In-Reply-To: <CABqTJk89rF+-3Xrxg2A-A_jJB+AU6k4ySKpUGabn_nV-ORXOtw@mail.gmail.com>
References: <CABqTJk89rF+-3Xrxg2A-A_jJB+AU6k4ySKpUGabn_nV-ORXOtw@mail.gmail.com>
Message-ID: <2315593.mBPWT6XOeH@even-n550jk>

On Sunday 26 July 2015 00:40:48 Andrea Peri wrote:
> Hi,
> I'm try-ing to merging some rasters using gdal_merge.
> The raster are all float64 and with differents interval of values.
> Is this kind of rasters compatible with gdal_merge ?
> 
> I ask because , my try was stopped with a crash.

gdal_merge should be able to work with any data type as far as I can see. It 
could have issues with rasters that don't fit into RAM, but this should result 
in a "clean" error, not a process termination.

You can try with gdalwarp as well

> 
> And perhaps this could be the explanation.
> 
> Many thx.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Jul 27 11:01:05 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 27 Jul 2015 20:01:05 +0200
Subject: [gdal-dev] Why is saving an array to ENVI file format using
	SaveArray so slow?
In-Reply-To: <COL129-W2207170323219306D33047A38E0@phx.gbl>
References: <COL129-W4796FB1D79A87D06B906D4A3810@phx.gbl>
	<201507242131.30753.even.rouault@spatialys.com>
	<COL129-W2207170323219306D33047A38E0@phx.gbl>
Message-ID: <3164149.RiJzIna0nC@even-n550jk>

On Monday 27 July 2015 16:23:26 mike c wrote:
> Dear Even and GDAL community
> 
> 
> 
> Thanks for the feedback.
> 
> 
> 
> 
>  After receiving your
> email I tried to narrow down the source of the problem.  On further
> investigation it seems like indeed, like you,  writing to my local disk is
> quick.  I notice, however,  the problem occurs when writing to file shares
> on a local area network.  The remote file shares where the underlying file
> system is UNIX  seems to cause the
> problem i.e. writing an image (128,4000,128) using  SaveArray(img,remote
> system ,?ENVI?) from my Windows system to remote
> file share(where the file system is UNIX) takes 3-4 minutes. Writing the
> image  between the same systems to GeoTiff format appears to be quicker ~24
> second. Using the ndarray.tofile() to write the same image from the same
> system to the same remote disk takes ~20 seconds.  Copying the same size
> image between the two systems using Explorer takes only a few seconds.  
> Using  the SaveArray(img,remote system ,?ENVI?)   operation to write the
> image to  a remote Windows file
> share on the same network  takes  a   few seconds.
> 
> 
> 
> Any thoughts as to why this is happening and whether there
> is a way of overcoming this problem would be welcomed.

Mike,

Looking more closely at file system access, the GeoTIFF driver will write by 
chunks of 64 KB (128 bands * 128 pixels * sizeof(float), since the default 
interleaving of the GTiff driver is PIXEL), where as the ENVI driver will write 
by chunks of 1 KB ( 128 pixels * sizeof(float) since the default interleaving 
of the ENVI driver is BAND) (on Linux, the C library actually caches by chunks 
of 4 KB). That might be the likely explanation.

Workarounds :
- write to a local file and then copy using shutil.copy() or other efficient 
methods
- use SaveArray() to a /vsimem/ file and then write it to final destinations. 
See https://svn.osgeo.org/gdal/trunk/autotest/gcore/vsifile.py for examples on 
how to read from /vsimem/

Extending /vsicache/ to support write operations could be an interesting 
option to solve more generally that kind of issue.

Even



> 
> 
> 
> Thanks
> 
> mike
> 
> > From: even.rouault at spatialys.com
> > To: gdal-dev at lists.osgeo.org
> > Subject: Re: [gdal-dev] Why is saving an array to ENVI file format using
> > SaveArray so slow? Date: Fri, 24 Jul 2015 21:31:30 +0200
> > CC: mikec7200 at hotmail.com
> > 
> > Mike,
> > 
> > I've tried the following snippet:
> > 
> > from osgeo import gdal, gdalnumeric
> > import numpy
> > 
> > ar = numpy.zeros( [128,4000,128], dtype = numpy.float32)
> > gdalnumeric.SaveArray(ar,'testenvi.bin','ENVI')
> > gdalnumeric.SaveArray(ar,'testtif.tif','GTiff')
> > 
> > And it runs in ~ 2 seconds on both GDAL 1.11 and trunk. (Linux 64bit, but
> > I'm not sure why the OS would account for such a dramatic difference)
> > 
> > Even
> > 
> > > Dear GDAL Developers
> > > 
> > > 
> > > 
> > > I?m  finding that when
> > > saving  a relatively small array (shape =
> > > 128,4000,128  ie 128 band x 4000 lines x
> > > 128 columns of float data = 256Mb total)  to a ENVI file format using
> > > the
> > > call:
> > > 
> > > 
> > > 
> > > gdalnumeric.SaveArray(img,strf_out,'ENVI')
> > > 
> > > 
> > > 
> > > performance is extremely slow (~260 seconds).  When I save the same
> > > array
> > > to Geotif  format using;
> > > 
> > > 
> > > 
> > > gdalnumeric.SaveArray(img,strf_out,'GTIFF')
> > > 
> > > 
> > > 
> > > the operation
> > > takes  ~24 seconds which is much more
> > > acceptable.
> > > 
> > > 
> > > 
> > > I?m currently
> > > using gdal version 1.11.1 .
> > > 
> > > 
> > > 
> > > My question to
> > > the forum is then  -why is there such a
> > > large discrepancy between the performance of the two operations and is
> > > there a way to improve the performance when writing an array to  an ENVI
> > > file format?
> > > 
> > > 
> > > 
> > > I have tried changing
> > > the GDAL Cache options but performance doesn?t seem to alter.  When
> > > profiling the code which saves the array to GeoTIFF format I get the
> > > output contained in the attached file timing_savearray_GTIFF.txt.  When
> > > profiling the code which saves the array to ENVI format I get the output
> > > contained in the attached file timing_savearray_ENVI.txt
> > > 
> > > 
> > > 
> > > I would like to
> > > save the data to ENVI file format.  Your
> > > thoughts on this matter would be appreciated.
> > > 
> > > 
> > > 
> > > Thanks
> > > 
> > > 
> > > 
> > > Regards
> > > 
> > > mike

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From aperi2007 at gmail.com  Mon Jul 27 23:19:59 2015
From: aperi2007 at gmail.com (Andrea Peri)
Date: Tue, 28 Jul 2015 08:19:59 +0200
Subject: [gdal-dev] using gdal_merge with floating images
In-Reply-To: <2315593.mBPWT6XOeH@even-n550jk>
References: <CABqTJk89rF+-3Xrxg2A-A_jJB+AU6k4ySKpUGabn_nV-ORXOtw@mail.gmail.com>
	<2315593.mBPWT6XOeH@even-n550jk>
Message-ID: <CABqTJk8BWzD6Nsh6JAXeBYsn_p-VZctOrzasDDHjO0nXbVVzYA@mail.gmail.com>

Hi Even, you have right.
It is not really a crash with closing of the putty console (it
happened for another distinct and indipendent error), but
it is an error reported in the console.
AFAIK The error reported is effectively due to a memory error.

This is the error reported me:

0Traceback (most recent call last):
  File "/usr/local/bin/gdal_merge.py", line 523, in <module>
    sys.exit(main())
  File "/usr/local/bin/gdal_merge.py", line 512, in main
    fi.copy_into( t_fh, band, t_band, nodata )
  File "/usr/local/bin/gdal_merge.py", line 253, in copy_into
    nodata_arg )
  File "/usr/local/bin/gdal_merge.py", line 71, in raster_copy
    m_band )
  File "/usr/local/bin/gdal_merge.py", line 110, in raster_copy_with_mask
    data_dst = t_band.ReadAsArray( t_xoff, t_yoff, t_xsize, t_ysize )
  File "/usr/local/lib/python2.7/dist-packages/GDAL-2.0.0-py2.7-linux-x86_64.egg/osgeo/gdal.py",
line 1302, in ReadAsArray
    callback_data = callback_data)
  File "/usr/local/lib/python2.7/dist-packages/GDAL-2.0.0-py2.7-linux-x86_64.egg/osgeo/gdal_array.py",
line 325, in BandReadAsArray
    buf_obj = numpy.empty([buf_ysize,buf_xsize], dtype = typecode)
MemoryError


Now I try to use the gdal_warp to merge these rasters.

Thx again.

Andrea.


2015-07-27 19:37 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:
> On Sunday 26 July 2015 00:40:48 Andrea Peri wrote:
>> Hi,
>> I'm try-ing to merging some rasters using gdal_merge.
>> The raster are all float64 and with differents interval of values.
>> Is this kind of rasters compatible with gdal_merge ?
>>
>> I ask because , my try was stopped with a crash.
>
> gdal_merge should be able to work with any data type as far as I can see. It
> could have issues with rasters that don't fit into RAM, but this should result
> in a "clean" error, not a process termination.
>
> You can try with gdalwarp as well
>
>>
>> And perhaps this could be the explanation.
>>
>> Many thx.
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com



-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From ao at t-kartor.se  Tue Jul 28 02:29:28 2015
From: ao at t-kartor.se (Andreas Oxenstierna)
Date: Tue, 28 Jul 2015 11:29:28 +0200
Subject: [gdal-dev] Fjjkvr
Message-ID: <5E493CD4-A98D-4729-9306-FE0925ACBAFC@t-kartor.se>


J
H?lsningar

Andreas


From imranserver at yahoo.com  Tue Jul 28 04:39:50 2015
From: imranserver at yahoo.com (Muhammad Imran)
Date: Tue, 28 Jul 2015 11:39:50 +0000 (UTC)
Subject: [gdal-dev] gdal-dev Digest, Vol 129, Issue 49
In-Reply-To: <mailman.27.1424635258.12579.gdal-dev@lists.osgeo.org>
References: <mailman.27.1424635258.12579.gdal-dev@lists.osgeo.org>
Message-ID: <350634508.4105730.1438083590269.JavaMail.yahoo@mail.yahoo.com>

Unsubscribe
?Muhammad Imran 


     On Monday, February 23, 2015 1:02 AM, "gdal-dev-request at lists.osgeo.org" <gdal-dev-request at lists.osgeo.org> wrote:
   

 Send gdal-dev mailing list submissions to
??? gdal-dev at lists.osgeo.org

To subscribe or unsubscribe via the World Wide Web, visit
??? http://lists.osgeo.org/mailman/listinfo/gdal-dev
or, via email, send a message with subject or body 'help' to
??? gdal-dev-request at lists.osgeo.org

You can reach the person managing the list at
??? gdal-dev-owner at lists.osgeo.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of gdal-dev digest..."


Today's Topics:

? 1. Question about ogr2ogr utility (Tomer)
? 2. Re: Question about ogr2ogr utility (Jukka Rahkonen)


----------------------------------------------------------------------

Message: 1
Date: Sun, 22 Feb 2015 09:57:19 -0800 (PST)
From: Tomer <tomerlieber at gmail.com>
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Question about ogr2ogr utility
Message-ID: <1424627839047-5189255.post at n6.nabble.com>
Content-Type: text/plain; charset=us-ascii

Hey,

I use ogr2ogr vector utility in order to extract features which intersects a
given extent.
I found the "-spat" option which gets extent (2 points) as parameters, but i
want to use a file path as parameter.
Is there any way to do it?

Best regards, 
Tomer



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Question-about-ogr2ogr-utility-tp5189255.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.


------------------------------

Message: 2
Date: Sun, 22 Feb 2015 19:46:52 +0000 (UTC)
From: Jukka Rahkonen <jukka.rahkonen at maanmittauslaitos.fi>
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Question about ogr2ogr utility
Message-ID: <loom.20150222T204400-789 at post.gmane.org>
Content-Type: text/plain; charset=us-ascii

Tomer <tomerlieber <at> gmail.com> writes:

> 
> Hey,
> 
> I use ogr2ogr vector utility in order to extract features which intersects a
> given extent.
> I found the "-spat" option which gets extent (2 points) as parameters, but i
> want to use a file path as parameter.
> Is there any way to do it?

What would GDAL find at the end of the file path? A shapefile or some simple
text file or what? Can you give an example?

-Jukka Rahkonen-



------------------------------

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

End of gdal-dev Digest, Vol 129, Issue 49
*****************************************


  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150728/fa6b8987/attachment.html>

From aperi2007 at gmail.com  Tue Jul 28 21:51:15 2015
From: aperi2007 at gmail.com (Andrea Peri)
Date: Wed, 29 Jul 2015 06:51:15 +0200
Subject: [gdal-dev] gdalwarp add the stats to a raster
Message-ID: <CABqTJk-aGW8B_Xz7Htu=Y_N2Ett9Ri1B-_nzOJMQ1ywTMgOtEA@mail.gmail.com>

Hi,
I see the gdalwarp has no the parameter (-stats) as gdal_translate to
force the add of statistics.

But I dont understand if gdalwarp will add however the stats to a raster or not.

Thx.

-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From kyle at pobox.com  Wed Jul 29 09:59:00 2015
From: kyle at pobox.com (Kyle Shannon)
Date: Wed, 29 Jul 2015 10:59:00 -0600
Subject: [gdal-dev] gdalwarp add the stats to a raster
In-Reply-To: <CABqTJk-aGW8B_Xz7Htu=Y_N2Ett9Ri1B-_nzOJMQ1ywTMgOtEA@mail.gmail.com>
References: <CABqTJk-aGW8B_Xz7Htu=Y_N2Ett9Ri1B-_nzOJMQ1ywTMgOtEA@mail.gmail.com>
Message-ID: <CAJ0mEz0GWegj8VOkujpp5Qiy6dCve3FSpYL8FKCR6pFB3Pqo9g@mail.gmail.com>

Andrea,

On Tue, Jul 28, 2015 at 10:51 PM, Andrea Peri <aperi2007 at gmail.com> wrote:
> Hi,
> I see the gdalwarp has no the parameter (-stats) as gdal_translate to
> force the add of statistics.
>
> But I dont understand if gdalwarp will add however the stats to a raster or not.

gdalwarp does not, but

gdalinfo -stats warped.tif

will recompute the stats for you.
>
> Thx.
>
> --
> -----------------
> Andrea Peri
> . . . . . . . . .
> qwerty ?????
> -----------------
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

kss

-- 
Kyle

From userofgdal at gmail.com  Thu Jul 30 04:03:36 2015
From: userofgdal at gmail.com (user gdal)
Date: Thu, 30 Jul 2015 16:33:36 +0530
Subject: [gdal-dev] Spatial Resolution from img file
Message-ID: <CAJnZZaLwGUHR2x3YdHDU01gQuy5Dmu=YXq7ntyEruViY5DysOw@mail.gmail.com>

Dear friends,
I have a geo ref. ERDAS img file. How to obtain its spatial resolution
programmatically (C++)?

One suggestion I received was to refer to gdalinfo.c However I couldn't get
the required information in gdalinfo.c. I also felt it to be unclear. What
I have seen in gdalinfo is how to get columns, rows etc. (for which we
needn't visit the gdalinfo program).

I expected something like GetXResolution(..) and GetYResolution(...) kind
of situation. But...

Any help, please!

With
thanks,


Yours sincerely,

B. Ramesh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150730/cdc1ad23/attachment.html>

From kyle at pobox.com  Thu Jul 30 07:55:21 2015
From: kyle at pobox.com (Kyle Shannon)
Date: Thu, 30 Jul 2015 08:55:21 -0600
Subject: [gdal-dev] Spatial Resolution from img file
In-Reply-To: <CAJnZZaLwGUHR2x3YdHDU01gQuy5Dmu=YXq7ntyEruViY5DysOw@mail.gmail.com>
References: <CAJnZZaLwGUHR2x3YdHDU01gQuy5Dmu=YXq7ntyEruViY5DysOw@mail.gmail.com>
Message-ID: <CAJ0mEz3T=0JgzjCnThoEWgsNkx=aO=U6Xwq=FjkNSrdo0=sS3w@mail.gmail.com>

On Thu, Jul 30, 2015 at 5:03 AM, user gdal <userofgdal at gmail.com> wrote:
> Dear friends,
> I have a geo ref. ERDAS img file. How to obtain its spatial resolution
> programmatically (C++)?
>
> One suggestion I received was to refer to gdalinfo.c However I couldn't get
> the required information in gdalinfo.c. I also felt it to be unclear. What I
> have seen in gdalinfo is how to get columns, rows etc. (for which we needn't
> visit the gdalinfo program).

It's in there, the program prints out:

...
Pixel Sizes = (dx,-dy)
...

So it has to have the code.

>
> I expected something like GetXResolution(..) and GetYResolution(...) kind of
> situation. But...

The information you are looking for is contained in the geotranform
matrix available through

GDALGetGeoTransform(GDALDatasetH, double*);

See the api tutorial for more information:

http://gdal.org/gdal_tutorial.html

>
> Any help, please!
>
> With thanks,
>
> Yours sincerely,
>
> B. Ramesh
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Kyle

From bishop.dev at gmail.com  Thu Jul 30 12:11:46 2015
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Thu, 30 Jul 2015 22:11:46 +0300
Subject: [gdal-dev] Motion: Adopt FRC48: Geographical networks support
In-Reply-To: <CACALY+RCVrQ6bdwTrNzFmqnPVsVND0f3AUUgNA=G5OQeoymkfQ@mail.gmail.com>
References: <55A8D46F.6050909@gmail.com>
	<CACALY+RCVrQ6bdwTrNzFmqnPVsVND0f3AUUgNA=G5OQeoymkfQ@mail.gmail.com>
Message-ID: <55BA76F2.4090809@gmail.com>

Hi,

now we have +3 for adopt RFC48: Even, Jukka and Tamas

Also I merged gnm with last trunk. Travis CI passed - 
https://github.com/OSGeo/gdal/pull/60

Best regards,
     Dmitry



From bishop.dev at gmail.com  Fri Jul 31 11:51:27 2015
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Fri, 31 Jul 2015 21:51:27 +0300
Subject: [gdal-dev] Adopt RFC48: Geographical networks support
Message-ID: <55BBC3AF.50807@gmail.com>

Hi everybody,

The motion of RFC48 has been adopted with support from PSC members JukkaR, TamasS and EvenR.

The code merged in trunk now (r29585). Let me know if issues arise.

Also the RFC (https://trac.osgeo.org/gdal/wiki/rfc48_geographical_networks_support) and
RFC common page (https://trac.osgeo.org/gdal/wiki/RfcList) were corrected.

-- 
Best regards,
     Dmitry


From woodbri at swoodbridge.com  Fri Jul 31 12:54:56 2015
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Fri, 31 Jul 2015 15:54:56 -0400
Subject: [gdal-dev] Adopt RFC48: Geographical networks support
In-Reply-To: <55BBC3AF.50807@gmail.com>
References: <55BBC3AF.50807@gmail.com>
Message-ID: <55BBD290.9050709@swoodbridge.com>

On 7/31/2015 2:51 PM, Dmitry Baryshnikov wrote:
> Hi everybody,
>
> The motion of RFC48 has been adopted with support from PSC members
> JukkaR, TamasS and EvenR.
>
> The code merged in trunk now (r29585). Let me know if issues arise.
>
> Also the RFC
> (https://trac.osgeo.org/gdal/wiki/rfc48_geographical_networks_support) and
> RFC common page (https://trac.osgeo.org/gdal/wiki/RfcList) were corrected.
>

This looks very interesting. I have a few questions which might get 
added to the futures if they are not already supported.

Are there any drivers yet? Which?
   * like read/write OSM data or pgRouting tables

Are there plans to support turn restrictions?
   * OSM defines edge-node-edge restrictions AND edge-edge-edge-... 
restrictions
   * currently OSRM only supports edge-node-edge restrictions
   * pgRouting supports edge-edge-edge-... restrictions

There is a real need to be able to move network data between pgRouting 
and OSRM. The osm2pgrouting tool is undergoing some enhancements during 
the current GSoC. There is also a need to be able to move pgrouting 
tables to OSM pbf files so we can load them into OSRM and this seems 
like an excellent use case for this.

Thanks,
   -Steve

From bishop.dev at gmail.com  Fri Jul 31 13:44:56 2015
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Fri, 31 Jul 2015 23:44:56 +0300
Subject: [gdal-dev] Adopt RFC48: Geographical networks support
In-Reply-To: <55BBD290.9050709@swoodbridge.com>
References: <55BBC3AF.50807@gmail.com> <55BBD290.9050709@swoodbridge.com>
Message-ID: <55BBDE48.9040701@gmail.com>

Hi Stephen,

31.07.2015 22:54, Stephen Woodbridge ?????:
> On 7/31/2015 2:51 PM, Dmitry Baryshnikov wrote:
>> Hi everybody,
>>
>> The motion of RFC48 has been adopted with support from PSC members
>> JukkaR, TamasS and EvenR.
>>
>> The code merged in trunk now (r29585). Let me know if issues arise.
>>
>> Also the RFC
>> (https://trac.osgeo.org/gdal/wiki/rfc48_geographical_networks_support) and 
>>
>> RFC common page (https://trac.osgeo.org/gdal/wiki/RfcList) were 
>> corrected.
>>
>
> This looks very interesting. I have a few questions which might get 
> added to the futures if they are not already supported.
>
> Are there any drivers yet? Which?
>   * like read/write OSM data or pgRouting tables
By now only two drivers present - both implements generic (or GDAL) 
network. The pgRouting driver in plans. The GNMNetwork API let write 
features to the network and connect them. See 
https://trac.osgeo.org/gdal/wiki/rfc48_geographical_networks_support and 
https://github.com/OSGeo/gdal/blob/trunk/gdal/gnm/gnm_arch.dox and 
https://github.com/OSGeo/gdal/blob/trunk/gdal/gnm/gnm_tut.dox
>
> Are there plans to support turn restrictions?
>   * OSM defines edge-node-edge restrictions AND edge-edge-edge-... 
> restrictions
> * currently OSRM only supports edge-node-edge restrictions
>   * pgRouting supports edge-edge-edge-... restrictions
In GNM you can block edge and connection (node), but in generic network. 
In other drivers i.e. pgRoputing, OSRM, graphopper etc. it'll depends on 
implementation. Also the API of GNMNetwork class may be change (so the 
compiling of GNM is disabled by default).
>
> There is a real need to be able to move network data between pgRouting 
> and OSRM. The osm2pgrouting tool is undergoing some enhancements 
> during the current GSoC. There is also a need to be able to move 
> pgrouting tables to OSM pbf files so we can load them into OSRM and 
> this seems like an excellent use case for this.
We can begin thinking about network2network tool after the couple of 
network drivers will be implemented. The help is welcome, as I plan now 
to concentrate on cmake for GDAL.
>
>
> Thanks,
>   -Steve
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

Best regards,
     Dmitry


From even.rouault at spatialys.com  Fri Jul 31 14:02:05 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 31 Jul 2015 23:02:05 +0200
Subject: [gdal-dev] Adopt RFC48: Geographical networks support
In-Reply-To: <55BBDE48.9040701@gmail.com>
References: <55BBC3AF.50807@gmail.com> <55BBD290.9050709@swoodbridge.com>
	<55BBDE48.9040701@gmail.com>
Message-ID: <4066876.e8TkypsxIi@even-n550jk>

> (so the
> compiling of GNM is disabled by default).

Just wanted to mention that with the Unix build, it is enabled by default.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bishop.dev at gmail.com  Fri Jul 31 14:47:44 2015
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Sat, 01 Aug 2015 00:47:44 +0300
Subject: [gdal-dev] Adopt RFC48: Geographical networks support
In-Reply-To: <4066876.e8TkypsxIi@even-n550jk>
References: <55BBC3AF.50807@gmail.com> <55BBD290.9050709@swoodbridge.com>
	<55BBDE48.9040701@gmail.com> <4066876.e8TkypsxIi@even-n550jk>
Message-ID: <55BBED00.1020801@gmail.com>

Hi,

this is error. Fixed in r29588

Best regards,
     Dmitry

01.08.2015 00:02, Even Rouault ?????:
>> (so the
>> compiling of GNM is disabled by default).
> Just wanted to mention that with the Unix build, it is enabled by default.
>
> Even
>


