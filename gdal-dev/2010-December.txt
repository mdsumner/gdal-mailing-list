From schut at sarvision.nl  Wed Dec  1 04:30:34 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Dec  1 04:30:38 2010
Subject: [gdal-dev] Require Help Transforming into Equirectangular
In-Reply-To: <1291152113579-5789691.post@n2.nabble.com>
References: <1291152113579-5789691.post@n2.nabble.com>
Message-ID: <4CF615BA.8000508@sarvision.nl>

On 11/30/2010 10:21 PM, ssobieraj wrote:
>
> Hello,
>
> I'm trying to use FWTools to transform from an arbitrary Datum/Projection
> pair in an arbitrary format into a Geographic (lat/lon) projection with the
> WGS84 ellipsoid in GeoTiff format.
>
> To do this, I've tried the following:
>
> gdalwarp -s_srs Input.prj -t_srs Output.prj Input.xyz Output.tif
>
> Where Input.prj is formatted in Well-Known-Text format and contains
> information specifically for the Input.xyz file.
> Output.prj is also in WKT format but contains the following:
>
> GEOGCS["Geographic Coordinate
> System",DATUM["WGS84",SPHEROID["WGS84",6378137,298.257223560493]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]
>
> ***
> I've been successful in using this set-up for transforming from UTM
> projection in WGS84 datum, but I am having trouble transforming from
> Sinusoidal projection in RT90 datum.  The output file is no longer skewed in
> the Sinusoidal projection, but I cannot seem to get the datum information to
> coincide, resulting in a 10+ km discrepancy.
>
> A copy of the WKT-formatted PRJ file is seen below:
>
> PROJCS["Sinusoidal",GEOGCS["Geographic Coordinate
> System",DATUM["RT90",SPHEROID["Bessel
> 1841",6377397.155,299.1528131060786]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Sinusoidal"],PARAMETER["central_meridian",0],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["Meter",1]]
>
> Any ideas as to why I would be experiencing this offset?
>
>
>
> Regards,
> Scott
>
>
Scott,

it is not exactly what you ask, but it might help you in the right 
direction: to convert modis sinusoidal rasters with a custom sphere to 
wgs84 latlon, I use the following line (in a bash script):

gdalwarp -s_srs '+proj=sinu +R=6371007.181 +nadgrids=@null +wktext' 
-t_srs EPSG:4326 -srcnodata 0 -dstnodata 0 -r cubic -co "TILED=YES" -co 
"TFW=YES"  ${INFILE} ${OUTFILE}

(Note that I use proj notation instead of wkt formatting, I would not 
know how to translate this into wkt).

Best,
Vincent.
From ssobieraj at cdlsystems.com  Wed Dec  1 10:31:49 2010
From: ssobieraj at cdlsystems.com (ssobieraj)
Date: Wed Dec  1 10:31:51 2010
Subject: [gdal-dev] Re: Require Help Transforming into Equirectangular
In-Reply-To: <4CF615BA.8000508@sarvision.nl>
References: <1291152113579-5789691.post@n2.nabble.com>
	<4CF615BA.8000508@sarvision.nl>
Message-ID: <1291217509502-5792285.post@n2.nabble.com>


Hi Vincent,

By using the statement that you provided, I was able to produce an image
with an offset of around 1km.  Much better than before, but still in need of
improvement.

Could you shed some light on how +wktext works?  It isn't listed as a
parameter at  http://trac.osgeo.org/proj/wiki/GenParms
http://trac.osgeo.org/proj/wiki/GenParms .  

Since the statement you provide assumes a spherical earth in the output
image (R=6371007.181) and I require that the data be on the WGS84 ellipsoid,
I went and replaced the +R... with +ellps=WGS84, I am back to square one.

Given that both PRJ files were produced correctly, what am I doing wrong?



-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Require-Help-Transforming-into-Equirectangular-tp5789691p5792285.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jrepetto at free.fr  Wed Dec  1 10:41:20 2010
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed Dec  1 10:41:26 2010
Subject: [gdal-dev] Re: Require Help Transforming into Equirectangular
In-Reply-To: <1291217509502-5792285.post@n2.nabble.com>
References: <1291152113579-5789691.post@n2.nabble.com>	<4CF615BA.8000508@sarvision.nl>
	<1291217509502-5792285.post@n2.nabble.com>
Message-ID: <4CF66CA0.4050606@free.fr>

Le 01/12/2010 16:31, ssobieraj a ?crit :
>
> Given that both PRJ files were produced correctly, what am I doing wrong?
>

Hi,
May be your datum definition is missing the +towg84 parameters ?

Jean-Claude

From ssobieraj at cdlsystems.com  Wed Dec  1 11:51:52 2010
From: ssobieraj at cdlsystems.com (ssobieraj)
Date: Wed Dec  1 11:51:53 2010
Subject: [gdal-dev] Re: Require Help Transforming into Equirectangular
In-Reply-To: <4CF66CA0.4050606@free.fr>
References: <1291152113579-5789691.post@n2.nabble.com>
	<4CF615BA.8000508@sarvision.nl>
	<1291217509502-5792285.post@n2.nabble.com>
	<4CF66CA0.4050606@free.fr>
Message-ID: <1291222312088-5792571.post@n2.nabble.com>


Hi Jean-Claude,

Thanks for the help.

To test the effect that I was getting, I created a total of four images. 
Two in Sinusoidal projection, using WGS84 and RT90, and another pair using
Lambert Equal Area (again with both WGS84 and RT90 datum).  I then compared
these to an unaltered Equirectangular projected image in WGS84.

The results seemed odd and so I've provided them below:

The Sinusoidal projections were both 16km from my source, regardless of
whether I used RT90 or WGS84.
The Lambert projection using WGS84 transformed back perfectly.
The Lambert projection using RT90 transformed back with a ~900m error,
similar to what was seen when I used Vincent's method above.

So it's possible that the +towgs84 parameters are at fault, but then why
would the Sinusoidal/WGS84 be as bad as the Sinusoidal/RT90?


-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Require-Help-Transforming-into-Equirectangular-tp5789691p5792571.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Sjur.A.Kolberg at sintef.no  Wed Dec  1 13:48:11 2010
From: Sjur.A.Kolberg at sintef.no (Sjur Kolberg)
Date: Wed Dec  1 13:49:20 2010
Subject: [gdal-dev] Re: Require Help Transforming into Equirectangular
In-Reply-To: <1291222312088-5792571.post@n2.nabble.com>
References: <1291152113579-5789691.post@n2.nabble.com>
	<4CF615BA.8000508@sarvision.nl>	<1291217509502-5792285.post@n2.nabble.com>
	<4CF66CA0.4050606@free.fr> <1291222312088-5792571.post@n2.nabble.com>
Message-ID: <72251B925CE10A478606EEAC6AA683BE1BB5333D53@SINTEFEXMBX01.sintef.no>


Ssobieraj,

If the 16 km offset is in N-S direction, and the E-W error is small, it might be a sphere/ellipsoid problem. From your RT90 I am guessing you're in Sweden, at which latitude you would expect approximately this error. The effect is beyond projection, latlong/sphere to latlong/WGS84 gives equally long offsets. Try using cs2cs and specify ellipsoids for both input and output. 

There were some discussions on the gdal-dev list about this in June 2007.

It is only when one of the ellipsoids is a sphere you get these large errors, otherwise the error resulting from messing up ellipsoids is much smaller.

Hope this helps,

Sjur K :-)






-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of ssobieraj
Sent: 1. desember 2010 17:52
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Re: Require Help Transforming into Equirectangular


Hi Jean-Claude,

Thanks for the help.

To test the effect that I was getting, I created a total of four images. 
Two in Sinusoidal projection, using WGS84 and RT90, and another pair using
Lambert Equal Area (again with both WGS84 and RT90 datum).  I then compared
these to an unaltered Equirectangular projected image in WGS84.

The results seemed odd and so I've provided them below:

The Sinusoidal projections were both 16km from my source, regardless of
whether I used RT90 or WGS84.
The Lambert projection using WGS84 transformed back perfectly.
The Lambert projection using RT90 transformed back with a ~900m error,
similar to what was seen when I used Vincent's method above.

So it's possible that the +towgs84 parameters are at fault, but then why
would the Sinusoidal/WGS84 be as bad as the Sinusoidal/RT90?


-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Require-Help-Transforming-into-Equirectangular-tp5789691p5792571.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ssobieraj at cdlsystems.com  Wed Dec  1 15:35:59 2010
From: ssobieraj at cdlsystems.com (ssobieraj)
Date: Wed Dec  1 15:36:01 2010
Subject: [gdal-dev] Re: Require Help Transforming into Equirectangular
In-Reply-To: <72251B925CE10A478606EEAC6AA683BE1BB5333D53@SINTEFEXMBX01.sintef.no>
References: <1291152113579-5789691.post@n2.nabble.com>
	<4CF615BA.8000508@sarvision.nl>
	<1291217509502-5792285.post@n2.nabble.com>
	<4CF66CA0.4050606@free.fr>
	<1291222312088-5792571.post@n2.nabble.com>
	<72251B925CE10A478606EEAC6AA683BE1BB5333D53@SINTEFEXMBX01.sintef.no>
Message-ID: <1291235759741-5793509.post@n2.nabble.com>


Hi Sjur,

Matching the ellipsoids in cs2cs seems to work, but I really need to be able
to use the PRJ information in gdalwarp.  Shouldn't GDAL be using the PRJ
information to correctly transform between sphere and ellipsoid?

This also doesn't explain why the Sinusoidal/WGS84 transformation had such a
large error.  It matches the ellipsoid properly and still exhibits issues.

Any idea as to why gdalwarp would exhibit such an error even when the
ellipsoids match?

Scott


Sjur Kolberg wrote:
> 
> 
> Ssobieraj,
> 
> If the 16 km offset is in N-S direction, and the E-W error is small, it
> might be a sphere/ellipsoid problem. From your RT90 I am guessing you're
> in Sweden, at which latitude you would expect approximately this error.
> The effect is beyond projection, latlong/sphere to latlong/WGS84 gives
> equally long offsets. Try using cs2cs and specify ellipsoids for both
> input and output. 
> 
> There were some discussions on the gdal-dev list about this in June 2007.
> 
> It is only when one of the ellipsoids is a sphere you get these large
> errors, otherwise the error resulting from messing up ellipsoids is much
> smaller.
> 
> Hope this helps,
> 
> Sjur K :-)
> 
> 

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Require-Help-Transforming-into-Equirectangular-tp5789691p5793509.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Sjur.A.Kolberg at sintef.no  Wed Dec  1 16:08:06 2010
From: Sjur.A.Kolberg at sintef.no (Sjur Kolberg)
Date: Wed Dec  1 16:08:10 2010
Subject: [gdal-dev] Re: Require Help Transforming into Equirectangular
In-Reply-To: <1291235759741-5793509.post@n2.nabble.com>
References: <1291152113579-5789691.post@n2.nabble.com>
	<4CF615BA.8000508@sarvision.nl>	<1291217509502-5792285.post@n2.nabble.com>
	<4CF66CA0.4050606@free.fr>	<1291222312088-5792571.post@n2.nabble.com>
	<72251B925CE10A478606EEAC6AA683BE1BB5333D53@SINTEFEXMBX01.sintef.no>
	<1291235759741-5793509.post@n2.nabble.com>
Message-ID: <72251B925CE10A478606EEAC6AA683BE1BB5333D6E@SINTEFEXMBX01.sintef.no>

Scott,

Sorry to say I'm at the limit of my knowledge here.

Somehow I remember that GDAL/OGR is re-implementing some (but not all) of proj.4's features, and that for some difficult cases (I had some data generated from a rotated sphere) you need to pay extra attention. Have a look in the archives at Frank Warmerdam's answer from June 7th 2007, but I don't know if this solves your case.

Sjur  :-)




-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of ssobieraj
Sent: 1. desember 2010 21:36
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Re: Require Help Transforming into Equirectangular


Hi Sjur,

Matching the ellipsoids in cs2cs seems to work, but I really need to be able
to use the PRJ information in gdalwarp.  Shouldn't GDAL be using the PRJ
information to correctly transform between sphere and ellipsoid?

This also doesn't explain why the Sinusoidal/WGS84 transformation had such a
large error.  It matches the ellipsoid properly and still exhibits issues.

Any idea as to why gdalwarp would exhibit such an error even when the
ellipsoids match?

Scott


Sjur Kolberg wrote:
> 
> 
> Ssobieraj,
> 
> If the 16 km offset is in N-S direction, and the E-W error is small, it
> might be a sphere/ellipsoid problem. From your RT90 I am guessing you're
> in Sweden, at which latitude you would expect approximately this error.
> The effect is beyond projection, latlong/sphere to latlong/WGS84 gives
> equally long offsets. Try using cs2cs and specify ellipsoids for both
> input and output. 
> 
> There were some discussions on the gdal-dev list about this in June 2007.
> 
> It is only when one of the ellipsoids is a sphere you get these large
> errors, otherwise the error resulting from messing up ellipsoids is much
> smaller.
> 
> Hope this helps,
> 
> Sjur K :-)
> 
> 

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Require-Help-Transforming-into-Equirectangular-tp5789691p5793509.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ssobieraj at cdlsystems.com  Wed Dec  1 16:13:23 2010
From: ssobieraj at cdlsystems.com (ssobieraj)
Date: Wed Dec  1 16:13:24 2010
Subject: [gdal-dev] Re: Require Help Transforming into Equirectangular
In-Reply-To: <72251B925CE10A478606EEAC6AA683BE1BB5333D6E@SINTEFEXMBX01.sintef.no>
References: <1291152113579-5789691.post@n2.nabble.com>
	<4CF615BA.8000508@sarvision.nl>
	<1291217509502-5792285.post@n2.nabble.com>
	<4CF66CA0.4050606@free.fr>
	<1291222312088-5792571.post@n2.nabble.com>
	<72251B925CE10A478606EEAC6AA683BE1BB5333D53@SINTEFEXMBX01.sintef.no>
	<1291235759741-5793509.post@n2.nabble.com>
	<72251B925CE10A478606EEAC6AA683BE1BB5333D6E@SINTEFEXMBX01.sintef.no>
Message-ID: <1291238003103-5793618.post@n2.nabble.com>


Thanks very much for your help Sjur.  I'll have a look at the post you
mentioned and open a new thread if I need further assistance.

Scott
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Require-Help-Transforming-into-Equirectangular-tp5789691p5793618.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From yehil at rafael.co.il  Thu Dec  2 03:51:48 2010
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Thu Dec  2 03:52:04 2010
Subject: [gdal-dev] Convert from GeoTiff to JP2
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C06AEDD33E4C@MAILBOXSERVER.rf.local>

Hi
I ran into a problem converting a GeoTiff to a Jpeg200 image, using gdal_translate and the JP2ECW driver.

My geotiff has GCP's as the georeference. Here is the output from gdalinfo:

Driver: GTiff/GeoTIFF
Files: 01122010-1509.tif
Size is 1680, 916
Coordinate System is `'
GCP Projection =
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["arc-second",4.848136811095361e-006],
    AUTHORITY["EPSG","4326"]]
GCP[  0]: Id=1, Info=
          (0,0) -> (126151.273546348,115626.820459333,0)
GCP[  1]: Id=2, Info=
          (0,916) -> (126145.399132411,115623.500933949,0)
GCP[  2]: Id=3, Info=
          (1680,916) -> (126151.213029255,115615.934065356,0)
GCP[  3]: Id=4, Info=
          (1680,0) -> (126157.194618444,115619.120192017,0)
Metadata:
  TIFFTAG_XRESOLUTION=1
  TIFFTAG_YRESOLUTION=1
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  916.0)
Upper Right ( 1680.0,    0.0)
Lower Right ( 1680.0,  916.0)
Center      (  840.0,  458.0)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue

after converting to jp2 using the command:
gdal_translate -of jp2ecw 01122010-1509.tif 01122010-1509.jp2

I get this from gdalinfo:
E:\Data\test>gdalinfo 01122010-1509.jp2
Driver: JP2ECW/ERMapper JPEG2000
Files: 01122010-1509.jp2
       01122010-1509.jp2.aux.xml
Size is 1680, 916
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
GCP Projection =
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
GCP[  0]: Id=1, Info=
          (0,0) -> (126151.273546348,115626.820459333,0)
GCP[  1]: Id=2, Info=
          (0,916) -> (126145.399132411,115623.500933949,0)
GCP[  2]: Id=3, Info=
          (1680,916) -> (126151.213029255,115615.934065356,0)
GCP[  3]: Id=4, Info=
          (1680,0) -> (126157.194618444,115619.120192017,0)
Metadata:
  TIFFTAG_XRESOLUTION=1
  TIFFTAG_YRESOLUTION=1
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  916.0)
Upper Right ( 1680.0,    0.0)
Lower Right ( 1680.0,  916.0)
Center      (  840.0,  458.0)
Band 1 Block=1680x1 Type=Byte, ColorInterp=Red
  Overviews: arbitrary
Band 2 Block=1680x1 Type=Byte, ColorInterp=Green
  Overviews: arbitrary
Band 3 Block=1680x1 Type=Byte, ColorInterp=Blue
  Overviews: arbitrary

I think the problem is that both projectionRef, and GCPProjection are defined. This causes Global Mapper to fail reading the geo-reference data.

Is it a known problem, or am I doing something wrong?

Thanks
Yehiyam Livneh
**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101202/e79f1a00/attachment.html
From ramprasad85 at gmail.com  Thu Dec  2 07:32:35 2010
From: ramprasad85 at gmail.com (Ram prasad)
Date: Thu Dec  2 07:32:58 2010
Subject: [gdal-dev] Gdal driver not working in windows 7
In-Reply-To: <AANLkTi=K1VAGdwQLDLaYVxYDvvFyyO9t6yYCR3W7e2kJ@mail.gmail.com>
References: <AANLkTik842HLdzMj4vcWOH=8K90ZdOXzy01Bb-tH8u87@mail.gmail.com>
	<4CE579C5.8050806@pobox.com>
	<AANLkTing5vOaMaP=sx=C5rb96xjrx26durunRSfnDUp_@mail.gmail.com>
	<AANLkTi=cqgwkAKpzfD3S98H5n_o3LVa4PUaYz69bL1JD@mail.gmail.com>
	<AANLkTik+fW70yO0=8hg_cWE=G_+rwvO54-YBKrggBa43@mail.gmail.com>
	<AANLkTi=K1VAGdwQLDLaYVxYDvvFyyO9t6yYCR3W7e2kJ@mail.gmail.com>
Message-ID: <AANLkTinZ4mn27wt3B50BEzEK9C0Xwhj4NegGFeBTDxSR@mail.gmail.com>

As rightly pointed out, the problem was in compiler settings.
I had compiled my driver in /MT instead of /MD
Now it is working perfectly.

But I faced a problems. I had to compile all the related libraries
using /MD too. Luckily I could. But what if I have I cannot get a MD
version of a lib?

does GDAL give the driver writer the option to do the 'delete' of
their driver object themselves (Because he does the 'new' on his heap
in GDALRegister()). There can be a function pointer like
pfnDeleteDriver in GDALDriver. If it is NULL then GDAL can do the
delete.

Thank you very very much for your support.


On Tue, Nov 23, 2010 at 2:51 AM, Tamas Szekeres <szekerest@gmail.com> wrote:
>
>
> 2010/11/22 Ram prasad <ramprasad85@gmail.com>
>>
>> Following is repost, because the message appeared garbled in the mailing
>> list.
>>
>> I could not compile my code along with other formats in frmts due to
>> my insufficient experience in using nmake projects.
>>
>> http://www.gdal.org/gdal_drivertut.html gives information on writing a
>> driver.
>> Is there a document on compiling the driver? I need to be able to
>> specify the search path for include files for the compiler and input
>> files for the linker.
>>
>
>
> If you download the -dev package from http://vbkto.dyndns.org/sdk/? it
> should contain all the required libs and headers to compile the plugin. Make
> sure to compile with the /MD setting to use the same CRT dependency for the
> plugin and the gdal dll.
>
> Best regards,
>
> Tamas
>
>
>



-- 
"Love all serve all" - ..::Sri Sathya Sai::..
From pim.vandenhelm at tno.nl  Thu Dec  2 07:54:19 2010
From: pim.vandenhelm at tno.nl (Helm, P.W. (Pim) van den)
Date: Thu Dec  2 07:55:24 2010
Subject: [gdal-dev] Using GDAL16.DLL within a C++ application
Message-ID: <E4AFFB7FE0C9F44C80E634251C6284C3C090@EXC-MBX01.tsn.tno.nl>

Hi All,

I want to use GDAL within my project. I only need the geospatial transformation to change coordinates between geospatial systems. So using the FWTools will put me up with an enormous amount of extra DLL's needed within the project that will never be refered.

So looking at GDAL was my solution with lot less of additional DLL's. Unfortunately my build on 1.7.2  fails on the wce_time.h link for some reason. But I don't mind using the win32 build of GDAL1.6, but how???

I am used to get my DLL's linked via the .lib file and a reference to the header. Now I probably need to create a wrapper to match my used functions, but what are they? Or are where can I get the needed header files and .lib file?

If not is there another method to get an easy usage of this library?

Kind regards,
Pim
This e-mail and its contents are subject to the DISCLAIMER at http://www.tno.nl/disclaimer/email.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101202/43008350/attachment.html
From ericnico.david at gmail.com  Thu Dec  2 08:35:25 2010
From: ericnico.david at gmail.com (nicolas david)
Date: Thu Dec  2 08:35:30 2010
Subject: [gdal-dev] [driver geoconcept] how to manage polyline with thousand
	of coordinates
Message-ID: <AANLkTimJJ5YUrkYhfdr2NCdhmg58jJsnaXKtxVjZ8BYS@mail.gmail.com>

hi list

I've encountered some issue with a *.gxt file and ogr2ogr.
This file contains only one geometry with more than 5000 intermediate
coordinates. It's goemtry type is polyline (format 2). The size of this
polyline is too big for the char buffer of the geoconcept driver. So I've
got a "Too many characters at line .. " error message.

I've tried ( naively) to increase the size of this char buffer in the
geoconcept.h file.
*************************************************************************
struct _GCExportFileH {
  char                  cache[kCacheSize_GCIO+1];
  char*                 path;
  ....
}

with first :
#define  kCacheSize_GCIO          65535
and then :
#define  kCacheSize_GCIO          262143
****************************************************************************

It compile and at the execution time the geoemtry line is readed but it
leads to strange error on "OGRGeoconceptDataSource::LoadFile" method.
More precisely on ligne 184 the
"Open_GCIO(_pszName,_pszExt,pszMode,_pszGCT)"  method works and all internal
values seems ok after the return assigment the hGXT member are no longer
correct ( memory seems corrupt).

I've solve this issue by splitting my polyline object on multiple polylines
objects. But I'll be very  grateful if someone could explain to me what's
wrong with increasing the char buffer size !

Nicolas David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101202/57762427/attachment.html
From didier.richard at ign.fr  Thu Dec  2 08:49:04 2010
From: didier.richard at ign.fr (Richard Didier)
Date: Thu Dec  2 08:55:23 2010
Subject: [gdal-dev] [driver geoconcept] how to manage polyline with
	thousand of coordinates
In-Reply-To: <AANLkTimJJ5YUrkYhfdr2NCdhmg58jJsnaXKtxVjZ8BYS@mail.gmail.com>
References: <AANLkTimJJ5YUrkYhfdr2NCdhmg58jJsnaXKtxVjZ8BYS@mail.gmail.com>
Message-ID: <201012021449.05001.didier.richard@ign.fr>

Le jeudi 2 d?cembre 2010 14:35:25, nicolas david a ?crit :
> hi list
> 
> I've encountered some issue with a *.gxt file and ogr2ogr.
> This file contains only one geometry with more than 5000 intermediate
> coordinates. It's goemtry type is polyline (format 2). The size of this
> polyline is too big for the char buffer of the geoconcept driver. So I've
> got a "Too many characters at line .. " error message.
> 
> I've tried ( naively) to increase the size of this char buffer in the
> geoconcept.h file.
> *************************************************************************
> struct _GCExportFileH {
>   char                  cache[kCacheSize_GCIO+1];
>   char*                 path;
>   ....
> }
> 
> with first :
> #define  kCacheSize_GCIO          65535
> and then :
> #define  kCacheSize_GCIO          262143
> ***************************************************************************
> *
> 
> It compile and at the execution time the geoemtry line is readed but it
> leads to strange error on "OGRGeoconceptDataSource::LoadFile" method.
> More precisely on ligne 184 the
> "Open_GCIO(_pszName,_pszExt,pszMode,_pszGCT)"  method works and all
>  internal values seems ok after the return assigment the hGXT member are no
>  longer correct ( memory seems corrupt).
> 
> I've solve this issue by splitting my polyline object on multiple polylines
> objects. But I'll be very  grateful if someone could explain to me what's
> wrong with increasing the char buffer size !
> 

Could you file a ticket in the bug tracker, for me to follow this issue ?

> Nicolas David
> 
Sincerely,

didier
-- 
RICHARD Didier - Chef du p?le technique du G?oportail
2/4, avenue Pasteur - 94165 Saint Mand? Cedex
T?l : +33 (0) 1 43 98 83 23
From ludovic.mercier at gmail.com  Thu Dec  2 08:34:34 2010
From: ludovic.mercier at gmail.com (Ludovic Mercier)
Date: Thu Dec  2 09:08:41 2010
Subject: [gdal-dev] several No data value
Message-ID: <4CF7A06A.7020701@gmail.com>

Hi,

i work with a type of data wich can have : no data value and other 
information like "low and hight instrument saturation". For many 
algorithm this value (instrument saturation ) is like "no data value".
But in gdal doc only one data value is managed.
Have you a solution for this case ?

A practical exemple is :
data is REAL typically [-2E-5, 2E-5]
no data value is -1004
instrument saturation is -1001

thanks by advance for yours suggestions.

Ludovic
From ericnico.david at gmail.com  Thu Dec  2 09:57:13 2010
From: ericnico.david at gmail.com (nicolas david)
Date: Thu Dec  2 09:57:17 2010
Subject: [gdal-dev] [driver geoconcept] how to manage polyline with
	thousand of coordinates
In-Reply-To: <201012021449.05001.didier.richard@ign.fr>
References: <AANLkTimJJ5YUrkYhfdr2NCdhmg58jJsnaXKtxVjZ8BYS@mail.gmail.com>
	<201012021449.05001.didier.richard@ign.fr>
Message-ID: <AANLkTim8Vt+gGTzA2yM-v-5kXgkVX2CyAT_S_hkE4tQS@mail.gmail.com>

> Could you file a ticket in the bug tracker, for me to follow this issue ?
>
> done
I hope I've correctly fill the tickets.

Nicolas DAVID

DAVID Nicolas - Laboratoire MATIS - IGN
2/4, avenue Pasteur - 94165 Saint Mand? Cedex
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101202/d7a60495/attachment.html
From mapserver at meteologica.es  Thu Dec  2 10:31:17 2010
From: mapserver at meteologica.es (=?ISO-8859-1?Q?Paco_Regod=F3n?=)
Date: Thu Dec  2 11:21:36 2010
Subject: [gdal-dev] Projection aeqd and geotransform
Message-ID: <4CF7BBC5.2000302@meteologica.es>

Hello all,

i'm trying to create an VRT file for a raster in azimutal equidistant 
projection. I am almost sure the projection i should use is

+proj=aeqd +lat_0=YYYYY +lon_0=XXXXX +x_0=0 +y_0=0 +units=m

XXXXX and YYYYY being the raster's center coordinates.

I know the pixel width is 1000 meters, but i don't know how to write a 
geotransformation since i don't know the upper left pixel coordinates.

Anyone can help me? Can i define a geotransform with a central pixel 
instead of the upper left one?


<VRTDataset rasterXSize="480" rasterYSize="480">
<SRS>+proj=aeqd +lat_0=39.177500 +lon_0=0.249722 +x_0=0 +y_0=0 
+a=6371000 +b=6371000 +units=m</SRS>
<GeoTransform>??????, 1000, 0, ??????, 0, -1000</GeoTransform>
<VRTRasterBand dataType="Byte" band="1" subClass="VRTRawRasterBand">
<SourceFilename relativeToVRT="1">cullera.raw</SourceFilename>
</VRTRasterBand>
</VRTDataset>

Thanks,

Paco Regod?n
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101202/4377399d/attachment.html
From antonio.rocha at deimos.com.pt  Thu Dec  2 12:22:54 2010
From: antonio.rocha at deimos.com.pt (=?ISO-8859-1?Q?Ant=F3nio_Rocha?=)
Date: Thu Dec  2 12:23:26 2010
Subject: [gdal-dev] Running gdalwarp over ECMWF's NetCDF 
Message-ID: <4CF7D5EE.2030902@deimos.com.pt>

Greetings

I have runned the same gdalwarp command and I got two different results
Command:
gdalwarp -t_srs EPSG:3763 2009.nc 2009.tif

In Ubuntu (with GDAL 1.7.1, released 2010/02/08) It procuded the raster file
In Windows (with OSGEO4w and GDAL1.5.4) I got the eerror:
Creating output file that is  3Px4L.
Processing input file 2009.nc
A target coordinate system was specified, but there is no source 
coordinate system. Consider using -s_srs option to provide a source 
coordinate system.
Operation terminated

Is this a limitation of GDAL1.5.4?

Thanks



__________ Information from ESET NOD32 Antivirus, version of virus signature database 5667 (20101202) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From nhatzop at gmail.com  Thu Dec  2 12:49:08 2010
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Thu Dec  2 12:49:10 2010
Subject: [gdal-dev] raster lat lon value
Message-ID: <AANLkTi=Cg1zaW=Z23uF4siS8_7ze7up6=my-J6CHF+=K@mail.gmail.com>

Hi,

We have a raster one band let's say a geotiff in an x type of geo reference,
how we can find what's the raster's value for a specific lat lon (wgs84)

--Nikos Hatzopoulos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101202/8869ecb5/attachment.html
From antonio.rocha at deimos.com.pt  Thu Dec  2 13:08:16 2010
From: antonio.rocha at deimos.com.pt (=?ISO-8859-1?Q?Ant=F3nio_Rocha?=)
Date: Thu Dec  2 13:08:19 2010
Subject: [gdal-dev] Re: Running gdalwarp over ECMWF's NetCDF
In-Reply-To: <4CF7D5EE.2030902@deimos.com.pt>
References: <4CF7D5EE.2030902@deimos.com.pt>
Message-ID: <4CF7E090.5050705@deimos.com.pt>

Probably it's helpful to attach the NC file

Ant?nio Rocha wrote:
> Greetings
>
> I have runned the same gdalwarp command and I got two different results
> Command:
> gdalwarp -t_srs EPSG:3763 2009.nc 2009.tif
>
> In Ubuntu (with GDAL 1.7.1, released 2010/02/08) It procuded the 
> raster file
> In Windows (with OSGEO4w and GDAL1.5.4) I got the eerror:
> Creating output file that is  3Px4L.
> Processing input file 2009.nc
> A target coordinate system was specified, but there is no source 
> coordinate system. Consider using -s_srs option to provide a source 
> coordinate system.
> Operation terminated
>
> Is this a limitation of GDAL1.5.4?
>
> Thanks
>
>
>
>




__________ Information from ESET NOD32 Antivirus, version of virus signature database 5667 (20101202) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com

-------------- next part --------------
A non-text attachment was scrubbed...
Name: 2009.nc
Type: application/octet-stream
Size: 21216 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101202/de14e73b/2009-0001.obj
From pcorti at gmail.com  Thu Dec  2 13:33:44 2010
From: pcorti at gmail.com (Paolo Corti)
Date: Thu Dec  2 13:33:30 2010
Subject: [gdal-dev] raster lat lon value
In-Reply-To: <AANLkTi=Cg1zaW=Z23uF4siS8_7ze7up6=my-J6CHF+=K@mail.gmail.com>
References: <AANLkTi=Cg1zaW=Z23uF4siS8_7ze7up6=my-J6CHF+=K@mail.gmail.com>
Message-ID: <7871742907268373904@unknownmsgid>

> We have a raster one band let's say a geotiff in an x type of geo reference,
> how we can find what's the raster's value for a specific lat lon (wgs84)

gdallocationinfo [1] will make the trick

Best regards
P

[1] http://www.gdal.org/gdallocationinfo.html
From even.rouault at mines-paris.org  Thu Dec  2 13:35:19 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Dec  2 13:35:24 2010
Subject: [gdal-dev] Running gdalwarp over ECMWF's NetCDF
In-Reply-To: <4CF7D5EE.2030902@deimos.com.pt>
References: <4CF7D5EE.2030902@deimos.com.pt>
Message-ID: <201012021935.19730.even.rouault@mines-paris.org>

Le jeudi 02 d?cembre 2010 18:22:54, Ant?nio Rocha a ?crit :
> Greetings
> 
> I have runned the same gdalwarp command and I got two different results
> Command:
> gdalwarp -t_srs EPSG:3763 2009.nc 2009.tif
> 
> In Ubuntu (with GDAL 1.7.1, released 2010/02/08) It procuded the raster
> file In Windows (with OSGEO4w and GDAL1.5.4) I got the eerror:
> Creating output file that is  3Px4L.
> Processing input file 2009.nc
> A target coordinate system was specified, but there is no source
> coordinate system. Consider using -s_srs option to provide a source
> coordinate system.
> Operation terminated
> 
> Is this a limitation of GDAL1.5.4?

GDAL 1.5.4 being older than GDAL 1.7.1, it is not surprising that the later 
has received some bug fixes than the first one has not. But the good news is 
that you can use gdal16, gdal17 and even gdal18dev in OSGEO4W !

> 
> Thanks
> 
> 
> 
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 5667 (20101202) __________
> 
> The message was checked by ESET NOD32 Antivirus.
> 
> http://www.eset.com
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jimlug at co.clackamas.or.us  Thu Dec  2 14:29:43 2010
From: jimlug at co.clackamas.or.us (Dash)
Date: Thu Dec  2 14:29:45 2010
Subject: [gdal-dev] Extra Pixels using gdal_merge or gdalwarp
Message-ID: <1291318183439-5797292.post@n2.nabble.com>


Hey folks,

I'm gaining some extra pixels around the edges of my image when I use
gdal_merge or gdalwarp.  It seems like the first image is fine, but any
appended image contains artifacts around the edges.  Does anyone have a
recommendation to resolve this issue?  Thanks.
http://osgeo-org.1803224.n2.nabble.com/file/n5797292/ScreenHunter_01_Dec._02_11.27.gif 

Thanks.
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Extra-Pixels-using-gdal-merge-or-gdalwarp-tp5797292p5797292.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From antonio.rocha at deimos.com.pt  Thu Dec  2 15:30:08 2010
From: antonio.rocha at deimos.com.pt (antonio.rocha@deimos.com.pt)
Date: Thu Dec  2 15:25:59 2010
Subject: [gdal-dev] Running gdalwarp over ECMWF's NetCDF
In-Reply-To: <201012021935.19730.even.rouault@mines-paris.org>
References: <4CF7D5EE.2030902@deimos.com.pt>
	<201012021935.19730.even.rouault@mines-paris.org>
Message-ID: <20101202213008.16286ef2jdlbux1s@www.deimos.com.pt>

Greetings
I have just analyzed the output grom gdal1.7.1 and It's wrong...  
Gdalwarp just copied the NetCDF coordinates (corner coordinates) it  
did't warp the coordinates.
Maybe I have to define Input system (s_srs). ECMWF provided me the  
orifginal system that is:
Latitude/longitude or equidistant cylindrical or plate carree grids.  
Can anyone indicate me the EPSG?
Can this be the solution?
I have attached to this email the output of this command (gdalwarp  
-t_srs EPSG:3763 2009.nc 2009.tif) in Windows with GDAL1.7 (thanks for  
the tip Even).
As you can see, it just copied the coordinates to the target CRS. Does  
anyone have any suggestion on how to fix this/how to do this in the  
right way?)

Thanks
Antonio


Quoting "Even Rouault" <even.rouault@mines-paris.org>:

> Le jeudi 02 d?cembre 2010 18:22:54, Ant?nio Rocha a ?crit :
>> Greetings
>>
>> I have runned the same gdalwarp command and I got two different results
>> Command:
>> gdalwarp -t_srs EPSG:3763 2009.nc 2009.tif
>>
>> In Ubuntu (with GDAL 1.7.1, released 2010/02/08) It procuded the raster
>> file In Windows (with OSGEO4w and GDAL1.5.4) I got the eerror:
>> Creating output file that is  3Px4L.
>> Processing input file 2009.nc
>> A target coordinate system was specified, but there is no source
>> coordinate system. Consider using -s_srs option to provide a source
>> coordinate system.
>> Operation terminated
>>
>> Is this a limitation of GDAL1.5.4?
>
> GDAL 1.5.4 being older than GDAL 1.7.1, it is not surprising that the later
> has received some bug fixes than the first one has not. But the good news is
> that you can use gdal16, gdal17 and even gdal18dev in OSGEO4W !
>
>>
>> Thanks
>>
>>
>>
>> __________ Information from ESET NOD32 Antivirus, version of virus
>> signature database 5667 (20101202) __________
>>
>> The message was checked by ESET NOD32 Antivirus.
>>
>> http://www.eset.com
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: 2009NCwindows.tif
Type: image/tiff
Size: 22303 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101202/881bae41/2009NCwindows-0001.tif
From harsh.govind at spadac.com  Thu Dec  2 16:34:55 2010
From: harsh.govind at spadac.com (Harsh Govind)
Date: Thu Dec  2 16:36:00 2010
Subject: [gdal-dev] RE: Using GDAL16.DLL within a C++ application
In-Reply-To: <E4AFFB7FE0C9F44C80E634251C6284C3C090@EXC-MBX01.tsn.tno.nl>
References: <E4AFFB7FE0C9F44C80E634251C6284C3C090@EXC-MBX01.tsn.tno.nl>
Message-ID: <4B3B3C35D34C9345BC8914C199882E281DCCF4471D@SPATCEX003.spadac.com>

Download binaries from either GDAL homepage download links or you can use binaries posted by Tamas at :  http://vbkto.dyndns.org/sdk/<http://vbkto.dyndns.org/sdk/>

For how to use GDAL in ur app: http://www.gdal.org/gdal_tutorial.html -- This is where I started. Very helpful.

Regards,
Govind

From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Helm, P.W. (Pim) van den
Sent: Thursday, December 02, 2010 7:54 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Using GDAL16.DLL within a C++ application

Hi All,

I want to use GDAL within my project. I only need the geospatial transformation to change coordinates between geospatial systems. So using the FWTools will put me up with an enormous amount of extra DLL's needed within the project that will never be refered.

So looking at GDAL was my solution with lot less of additional DLL's. Unfortunately my build on 1.7.2  fails on the wce_time.h link for some reason. But I don't mind using the win32 build of GDAL1.6, but how???

I am used to get my DLL's linked via the .lib file and a reference to the header. Now I probably need to create a wrapper to match my used functions, but what are they? Or are where can I get the needed header files and .lib file?

If not is there another method to get an easy usage of this library?

Kind regards,
Pim
This e-mail and its contents are subject to the DISCLAIMER at http://www.tno.nl/disclaimer/email.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101202/bfb858ad/attachment.html
From gmpuljak at yahoo.com.ar  Fri Dec  3 09:56:29 2010
From: gmpuljak at yahoo.com.ar (Gustavo)
Date: Fri Dec  3 10:00:14 2010
Subject: [gdal-dev] gdal_translate and modis ocean HDFs
Message-ID: <201012031156.30369.gmpuljak@yahoo.com.ar>

Hi everyone,

I am trying to import some L3 MODIS satellite images into GRASS 6.4 by 
following the instructions from:

http://grass.osgeo.org/wiki/MODIS#Import

 I've tried method 1 but I got some error messages.

gdal_translate -a_srs "+init=epsg:4326" -a_nodata 65535 -a_ullr -180 90 180 
-90 -co "COMPRESS=PACKBITS" 
HDF4_SDS:UNKNOWN:"A20100252010032.L3m_8D_CHL_chlor_a_9km":0 prueba.tif
Input file size is 4320, 2160
0ERROR 1: SDreaddata() failed for block.
ERROR 1: IReadBlock failed at X offset 0, Y offset 0
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0

The error is the same with different files.
My system is Ubuntu 9.10 64bits.
gdal_translate --version
GDAL 1.7.2, released 2010/04/23


What can I do?
Thanks,

Gustavo Mart?nez
From brian.walawender at noaa.gov  Fri Dec  3 13:54:03 2010
From: brian.walawender at noaa.gov (Brian Walawender)
Date: Fri Dec  3 14:02:18 2010
Subject: [gdal-dev] GDAL/OGR Python Question
Message-ID: <AANLkTikk-+hUY=r7E9W8f6TZxpTNo2uS8aoH2=Hdo8=h@mail.gmail.com>

Hello,

I am looking for some assistance in optimizing a section of code for faster
performance.   Here is my problem, I have GeoTiff that contains 1 km x 1 km
population data over an area roughly the size of the continental US (7020 x
3000).   I am trying to calculate the population within a polygon.  I am
doing this by finding the extent of the polygon and reading in that section
of the GeoTiff  using the ReadAsArray function.  At this point I can quickly
calculate the population within the extent by using the numpy sum.  However,
the only way I can figure to sum the points within the polygon is to iterate
over the array checking each point using ogr.  If the polygon is very large,
this can take an extended period of time.  Is there a faster way to
calculate the population within a large polygon?  My code and some sample
output is below.

Thanks.

bw

#findPopulationOGR.py - read a polygon from the database
# and calculate the population within it

from osgeo import gdal
from osgeo import ogr
from osgeo import osr
from osgeo.gdalconst import *
from osgeo.gdal_array import *
import sys, time
import numpy as np

populationFile = "pop4269.tif"
band = 1
# Zone based
#segment_id = 147231
# Polygon based
segment_id = 147810

sql = "SELECT AsBinary(ST_MemUnion(COALESCE (ppoly.geom, pl.geom))) AS
wkb_geometry "
sql = sql + "FROM iris.product_segment ps "
sql = sql + "JOIN iris.product_segment_to_product_location pspl ON ps.id =
pspl.product_segment_id "
sql = sql + "JOIN iris.product_location pl ON pspl.product_location_id =
pl.id "
sql = sql + "JOIN iris.product_location_type plt ON
pl.product_location_type_id = plt.id "
sql = sql + "LEFT JOIN iris.product_polygon ppoly ON ps.id =
ppoly.product_segment_id "
sql = sql + " WHERE ps.id="  + `segment_id`

conn = ogr.Open("PG: host='localhost' dbname=mydb' ")
layer = conn.ExecuteSQL(sql)
feature = layer.GetFeature(0)
geom = feature.GetGeometryRef()

#create memory layer for polygon
srWGS84 = osr.SpatialReference()
srWGS84.ImportFromProj4('+proj=longlat +datum=WGS84')
polyds = ogr.GetDriverByName('Memory').CreateDataSource('')
polylyr = polyds.CreateLayer('poly',geom_type=ogr.wkbPolygon, srs=srWGS84)
feat = ogr.Feature(polylyr.GetLayerDefn())
feat.SetGeometryDirectly(geom)
polylyr.CreateFeature(feat)

#check polygon layer extent
extent = polylyr.GetExtent()


print '========Polygon Bounding Box========'
print 'UL: ', extent[0], extent[3]
print 'LR: ', extent[1], extent[2]

XUL = extent[0]
YUL = extent[3]
XLR = extent[1]
YLR = extent[2]

gdal.AllRegister()

ds = gdal.Open( populationFile, GA_ReadOnly )

if ds is None:
    print('Cannot open %s' % populationFile)
    sys.exit(1)

cols = ds.RasterXSize
rows = ds.RasterYSize
proj = ds.GetProjection()
geomatrix=ds.GetGeoTransform()
(success, inv_geometrix) = gdal.InvGeoTransform(geomatrix)
xUL = int(inv_geometrix[0] + inv_geometrix[1] * XUL + inv_geometrix[2] *
YUL)
yUL = int(inv_geometrix[3] + inv_geometrix[4] * XUL + inv_geometrix[5] *
YUL)
xLR = int(inv_geometrix[0] + inv_geometrix[1] * XLR + inv_geometrix[2] *
YLR)
yLR = int(inv_geometrix[3] + inv_geometrix[4] * XLR + inv_geometrix[5] *
YLR)
xdif = xLR - xUL
ydif = yUL - yLR

#print cols, rows, proj, xUL, yUL, xLR, yLR, xdif, ydif

data = ds.GetRasterBand(band).ReadAsArray(xUL, yLR, xdif, ydif)

extentPop = np.sum(data)

print "Print total population in extent = %#10d" % (extentPop )

startTime = time.time()

for i in range(data.shape[0]):
    for j in range(data.shape[1]):
        X = i + xUL
        Y = j + yLR
        lon = geomatrix[0] + X*geomatrix[1] + Y*geomatrix[2]
        lat = geomatrix[3] + X*geomatrix[4] + Y*geomatrix[5]
        qpt = ogr.CreateGeometryFromWkt("POINT(%s %s)" % (lon, lat))
        if geom.Contains(qpt) == False:
            data[i,j] = 0

polyPop = np.sum(data)

endTime = time.time()

print "Print total population in polygon = %#10d" % (polyPop )

print "The calc took " + str(endTime-startTime) + " seconds"

ds = None
conn = None
polylyr = None

$ python findPopulationOGR.py
========Polygon Bounding Box========
UL:  -108.891024 49.000022
LR:  -104.041596 46.540403
Print total population in extent =     101602
Print total population in polygon =      21052
The calc took 604.560879946 seconds


-- 

Brian Walawender

Technique Development Meteorologist

Scientific Services Division - Central Region Headquarters

816-268-3114 - Office

816-805-6497 - Cell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101203/6e62f869/attachment.html
From even.rouault at mines-paris.org  Fri Dec  3 15:03:46 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec  3 15:03:52 2010
Subject: [gdal-dev] GDAL contouring problem
In-Reply-To: <01744CEB055A2D46A1C0E02E68F90DCB02C240C07C39@Exchange.aifdr.org>
References: <01744CEB055A2D46A1C0E02E68F90DCB02C240C07C39@Exchange.aifdr.org>
Message-ID: <201012032103.46757.even.rouault@mines-paris.org>

FYI, I've commited a fix in GDAL trunk so that 0 as a floating point value can 
be used as a valid value for -fl

Le mercredi 01 d?cembre 2010 05:44:09, Ole Nielsen a ?crit :
> Thanks for explaining the reason why the numeric value of 0.00 doesn't work
> as a fixed level in gdal_contour while the value of 0 does. I understand
> now the reason for this.
> However I would have thought one could replace the test for 'zeroness' in
> (atof(argv[i+1]) != 0 || EQUAL(argv[i+1], "0"))
> with a test for whether argv]i+1] is not empty and can be converted to a
> numeric value. This would be a duck-typing approach and more robust in my
> humble opinion.
> 
> Best regards
> Ole Nielsen
> 
> 
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of
> gdal-dev-request@lists.osgeo.org Sent: Monday, 29 November 2010 8:41 PM
> To: gdal-dev@lists.osgeo.org
> Subject: gdal-dev Digest, Vol 78, Issue 64
> 
> Send gdal-dev mailing list submissions to
>         gdal-dev@lists.osgeo.org
> 
> To subscribe or unsubscribe via the World Wide Web, visit
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> or, via email, send a message with subject or body 'help' to
>         gdal-dev-request@lists.osgeo.org
> 
> You can reach the person managing the list at
>         gdal-dev-owner@lists.osgeo.org
> 
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of gdal-dev digest..."
> 
> 
> Today's Topics:
> 
>    1. Re: GDAL contouring problem (Frank Warmerdam)
>    2. Re: GDAL contouring problem (Francis Markham)
>    3. Re: Delete a sqlite database (Ludovic Granjon)
>    4. Re: Error building GDAL with GEOS on Solaris (Namrata)
>    5. Making non-rectangular image edges transparent
>       (Just van den Broecke)
>    6. geotiff conflict (Julien Malik)
>    7. Re: RFC 31 - OGR 64bit Support (David Burken)
> 
> 
> ----------------------------------------------------------------------
> 
> Message: 1
> Date: Sun, 28 Nov 2010 23:24:56 -0500
> From: Frank Warmerdam <warmerdam@pobox.com>
> Subject: Re: [gdal-dev] GDAL contouring problem
> To: Ole Nielsen <ole.nielsen@aifdr.org>
> Cc: "gdal-dev@lists.osgeo.org" <gdal-dev@lists.osgeo.org>,
>         "adelebear@me.com" <adelebear@me.com>
> Message-ID: <4CF32B18.2030208@pobox.com>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
> 
> Ole Nielsen wrote:
> > I am posting this again without test files attached due the 50K size
> > limit. Anyone who wants to see them, please contact me directly.
> > 
> > 
> > 
> > --
> > 
> > We have observed interesting anomaly with gdal_contour when one of the
> > fixed levels is zero.
> > 
> > If the zero contour is expressed as 0.0 (or indeed 0.0000) gdal_contour
> > replies with the standard Usage message (see below). If the zero contour
> > is expressed as the integer 0 (or 0.00000001) it works and produces the
> > expected contours.
> 
> Ole,
> 
> The gdal_contour program has some rather hokey heuristics to try and
> recognise the end of the list of contour levels.  The code looks like:
> 
>          else if( EQUAL(argv[i],"-fl") && i < argc-1 )
>          {
>              while( i < argc-1
>                     && nFixedLevelCount
>                               <
> (int)(sizeof(adfFixedLevels)/sizeof(double)) && (atof(argv[i+1]) != 0 ||
> EQUAL(argv[i+1],"0")) && !EQUAL(argv[i+1], "-3d"))
>                  adfFixedLevels[nFixedLevelCount++] = atof(argv[++i]);
>          }
> 
> So basically, it assumes everything is a "level" until something that
> has a numeric value of 0 is encounter that isn't the specific string
> "0".  So your analysis of the problem is essentially correct, but it is
> more or less intentional as we try to support a list of levels with no
> explicit "end of list" marker in the arguments to the command.
> 
> Best regards,
> --
> ---------------------------------------+-----------------------------------
> --- I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com light and sound - activate the windows |
> http://pobox.com/~warmerdam and watch the world go round - Rush    |
> Geospatial Programmer for Rent
> 
> 
> 
> ------------------------------
> 
> Message: 2
> Date: Mon, 29 Nov 2010 16:48:56 +1100
> From: Francis Markham <fmarkham@gmail.com>
> Subject: Re: [gdal-dev] GDAL contouring problem
> To: Frank Warmerdam <warmerdam@pobox.com>
> Cc: "gdal-dev@lists.osgeo.org" <gdal-dev@lists.osgeo.org>,      Ole Nielsen
>         <ole.nielsen@aifdr.org>, "adelebear@me.com" <adelebear@me.com>
> Message-ID:
>         <AANLkTi=xCXQx=Nx1hbnjqMb6WVr3VfL6AoQPQHeKx1nQ@mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
> 
> Is there any reason not to include a heuristic that uses strtod() or
> similar to test for the zeroness of the last argument?
> 
> -Francis Markham
> 
> On 29 November 2010 15:24, Frank Warmerdam <warmerdam@pobox.com> wrote:
> > Ole Nielsen wrote:
> >> I am posting this again without test files attached due the 50K size
> >> limit. Anyone who wants to see them, please contact me directly.
> >> 
> >> 
> >> --
> >> 
> >> We have observed interesting anomaly with gdal_contour when one of the
> >> fixed levels is zero.
> >> 
> >> If the zero contour is expressed as 0.0 (or indeed 0.0000) gdal_contour
> >> replies with the standard Usage message (see below). If the zero contour
> >> is expressed as the integer 0 (or 0.00000001) it works and produces the
> >> expected contours.
> > 
> > Ole,
> > 
> > The gdal_contour program has some rather hokey heuristics to try and
> > recognise the end of the list of contour levels. ?The code looks like:
> > 
> > ? ? ? ?else if( EQUAL(argv[i],"-fl") && i < argc-1 )
> > ? ? ? ?{
> > ? ? ? ? ? ?while( i < argc-1
> > ? ? ? ? ? ? ? ? ? && nFixedLevelCount
> > ? ? ? ? ? ? ? ? ? ? ? ? ? ? <
> > (int)(sizeof(adfFixedLevels)/sizeof(double)) ? ? ? ? ? ? ? ? ? &&
> > (atof(argv[i+1]) != 0 || EQUAL(argv[i+1],"0")) ? ? ? ? ? ? ? ? ? &&
> > !EQUAL(argv[i+1], "-3d"))
> > ? ? ? ? ? ? ? ?adfFixedLevels[nFixedLevelCount++] = atof(argv[++i]);
> > ? ? ? ?}
> > 
> > So basically, it assumes everything is a "level" until something that
> > has a numeric value of 0 is encounter that isn't the specific string
> > "0". ?So your analysis of the problem is essentially correct, but it is
> > more or less intentional as we try to support a list of levels with no
> > explicit "end of list" marker in the arguments to the command.
> > 
> > Best regards,
> > --
> > ---------------------------------------+---------------------------------
> > ----- I set the clouds in motion - turn up ? | Frank Warmerdam,
> > warmerdam@pobox.com
> > light and sound - activate the windows | http://pobox.com/~warmerdam
> > and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Fri Dec  3 15:28:51 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Dec  3 15:28:56 2010
Subject: [gdal-dev] GDAL/OGR Python Question
In-Reply-To: <AANLkTikk-+hUY=r7E9W8f6TZxpTNo2uS8aoH2=Hdo8=h@mail.gmail.com>
References: <AANLkTikk-+hUY=r7E9W8f6TZxpTNo2uS8aoH2=Hdo8=h@mail.gmail.com>
Message-ID: <4CF95303.5020702@pobox.com>

Brian Walawender wrote:
> Hello,
> 
> I am looking for some assistance in optimizing a section of code for 
> faster performance.   Here is my problem, I have GeoTiff that contains 1 
> km x 1 km population data over an area roughly the size of 
> the continental US (7020 x 3000).   I am trying to calculate the 
> population within a polygon.  I am doing this by finding the extent of 
> the polygon and reading in that section of the GeoTiff  using the 
> ReadAsArray function.  At this point I can quickly calculate the 
> population within the extent by using the numpy sum.  However, the only 
> way I can figure to sum the points within the polygon is to iterate over 
> the array checking each point using ogr.  If the polygon is very large, 
> this can take an extended period of time.  Is there a faster way to 
> calculate the population within a large polygon?  My code and some 
> sample output is below.

Brian,

I think you would be better off rasterizing your mask polygon and operating
on the masked raster.  It might be sufficient to set all cells outside the
region to 0 in your target raster if you are just summing.  Or you might
generate the mask separately and just check it instead of doing an
expensive point in polygon test.

The test script for the rasterize function is available at the following
url and might provide a hint of how to use it.

   http://svn.osgeo.org/gdal/trunk/autotest/alg/rasterize.py

You can also find more about the rasterize api from it's C++ docs at:

   http://www.gdal.org/gdal__alg_8h.html#50caf4bc34703f0bcf515ecbe5061a0a

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Dec  3 16:05:49 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Dec  3 16:05:57 2010
Subject: [gdal-dev] several No data value
In-Reply-To: <4CF7A06A.7020701@gmail.com>
References: <4CF7A06A.7020701@gmail.com>
Message-ID: <4CF95BAD.40705@pobox.com>

Ludovic Mercier wrote:
> Hi,
> 
> i work with a type of data wich can have : no data value and other 
> information like "low and hight instrument saturation". For many 
> algorithm this value (instrument saturation ) is like "no data value".
> But in gdal doc only one data value is managed.
> Have you a solution for this case ?
> 
> A practical exemple is :
> data is REAL typically [-2E-5, 2E-5]
> no data value is -1004
> instrument saturation is -1001
> 
> thanks by advance for yours suggestions.

Ludovic,

GDAL only supports single nodata values as part of the data model.  You
can add arbitrary metadata describing other nodata values, but generally
GDAL itself and other client software won't realize the significance of
these other values.

sorry!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From smith.todd at gmail.com  Fri Dec  3 18:01:09 2010
From: smith.todd at gmail.com (Todd Smith)
Date: Fri Dec  3 18:01:32 2010
Subject: [gdal-dev] .asc files during open
Message-ID: <AANLkTik7wh-WwD9fLfGKKH7H13tGAnBZaqLdDdV=77Kg@mail.gmail.com>

When opening .asc files, they are scanned for any values that may be
floating point so the type of data (int or float) can be set properly.  For
the case I'm dealing with (2800 files @ 50mb each) it means that each file
takes about 1.25 seconds to open (because the data is all integer data).  It
means it takes nearly an hour for all the files to be opened.  Short of
changing the code to not scan for a '.' and just assume that every file is a
floating point file, can anyone think of a good way to speed this up?

Thanks,

Todd
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101203/8a7469ee/attachment.html
From rayg at daylongraphics.com  Fri Dec  3 18:34:39 2010
From: rayg at daylongraphics.com (Ray Gardener)
Date: Fri Dec  3 19:50:39 2010
Subject: [gdal-dev] .asc files during open
In-Reply-To: <AANLkTik7wh-WwD9fLfGKKH7H13tGAnBZaqLdDdV=77Kg@mail.gmail.com>
References: <AANLkTik7wh-WwD9fLfGKKH7H13tGAnBZaqLdDdV=77Kg@mail.gmail.com>
Message-ID: <4CF97E8F.4060305@daylongraphics.com>

Best way is probably to add a driver option (if it doesn't already have 
one for that).

Ray

On 12/3/2010 3:01 PM, Todd Smith wrote:
> When opening .asc files, they are scanned for any values that may be
> floating point so the type of data (int or float) can be set properly.
> For the case I'm dealing with (2800 files @ 50mb each) it means that
> each file takes about 1.25 seconds to open (because the data is all
> integer data).  It means it takes nearly an hour for all the files to be
> opened.  Short of changing the code to not scan for a '.' and just
> assume that every file is a floating point file, can anyone think of a
> good way to speed this up?
> Thanks,
> Todd
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From brian at wildsong.biz  Fri Dec  3 21:26:55 2010
From: brian at wildsong.biz (Brian Wilson)
Date: Fri Dec  3 21:26:58 2010
Subject: [gdal-dev] Building GDAL 1.7.3 Python bindings
Message-ID: <AANLkTi=g5fU99KDSfDi31+ssZmS3UjrHYV1nO_+awO55@mail.gmail.com>

Greetings, I am looking for some suggestions on how to build the
python bindings for the latest gdal sources (1.7.3) for Windows.

Environment: Windows 7, Visual Studio 2010, Python 2.5
Success: building gdal itself
Failure: python module + bindings

I keep hitting dead ends getting Python set up. I am trying to include
details here because I searched and saw many "which version are you
using" messages... sorry for the verbosity.
I am not encountering ERROR messages, just trying to complete the
build process and get up to date python bindings.

I set up nmake.opt including PYDIR and PY_INST_DIR. I can't see
anywhere those are USED but I followed docs and set them
appropriately.  (C:\Python25)

And indeed, nothing pythonic appears to get built or installed. In
desperation I tried just copying the python stuff into site-packages
but of course that does not work, since there is no _gdal.dll built
and thus Python cannot find it.

I searched for hints on how to get there from here, but I only found a
few other people with similar problems.

I was able to build gdal with Visual Studio's "Build" command. I see
references to building from the command line, but I don't have a clue
how to do that in Windows. Something called nmake is referenced. I
have not marched down that road yet.

I got source code from http://trac.osgeo.org/gdal/wiki/DownloadSource

I looked at I looked at http://pypi.python.org/pypi/GDAL/ which has
lovely and usable Linux instructions but I am currently trapped in a
Windows world at my otherwise wonderful day job.
The text is duplicated in the source code under swig/python/Readme.txt

The link on that page suggesting that I download binaries jumps to the
old 1.5 version, but I can find this folder
http://download.osgeo.org/gdal/win32/1.7 which seems to have only a
couple plugins.
As a Linux person it seems very odd to drill down 3 levels into source
code only to find something like "Windows: go get the binaries
somewhere else".  Where do Windows binaries come from if they don't
get built ever?? So mysterious.

I suspect I need to do something with swig, which I downloaded and
installed, but the "Windows" notes basically say "you should never
have to do this". I don't know what I should never have to do, so that
is as far as I have gotten.

I can't use FWTools as they are built against an old version of Python
(2.3) and I am trying to work in an ESRI world which means I am using
2.5 and 2.6 and further I really would like to be able to build
support for file geodatabases to make this gdal python thing really
usable in my work.

I am sorry this email is long, but I have had plenty of time to work
on building GDAL today while waiting for fragile and slow ESRI tools
to run, really motivating me to try to use GDAL + Python.

(Did the geoprocess crash or is it just sloooooowwww... one never
knows with ESRI Model Builder.
OH! The process just FINISHED. Unreal. I had time to download and
build gdal itself a couple times while waiting. Now I can go back to
real work.)

Cheers --

Brian Wilson
Corvallis Oregon
From even.rouault at mines-paris.org  Sat Dec  4 05:16:47 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Dec  4 05:16:45 2010
Subject: [gdal-dev] .asc files during open
In-Reply-To: <4CF97E8F.4060305@daylongraphics.com>
References: <AANLkTik7wh-WwD9fLfGKKH7H13tGAnBZaqLdDdV=77Kg@mail.gmail.com>
	<4CF97E8F.4060305@daylongraphics.com>
Message-ID: <201012041116.47352.even.rouault@mines-paris.org>

Le samedi 04 d?cembre 2010 00:34:39, Ray Gardener a ?crit :
> Best way is probably to add a driver option (if it doesn't already have
> one for that).

This has indeed been added recently and will be available in GDAL 1.8.0. 
Extract from http://gdal.org/frmt_various.html#AAIGrid :

"By default, the datatype returned for AAIGRID datasets by GDAL is 
autodetected, and set to Float32 for grid with floating point values or Int32 
otherwise. This is done by analysing the format of the NODATA value and the 
first 100k bytes of data of the grid. From GDAL 1.8.0, you can explictely 
specify the datatype by setting the AAIGRID_DATATYPE configuration option 
(Int32, Float32 and Float64 values are supported currently)"


> 
> Ray
> 
> On 12/3/2010 3:01 PM, Todd Smith wrote:
> > When opening .asc files, they are scanned for any values that may be
> > floating point so the type of data (int or float) can be set properly.
> > For the case I'm dealing with (2800 files @ 50mb each) it means that
> > each file takes about 1.25 seconds to open (because the data is all
> > integer data).  It means it takes nearly an hour for all the files to be
> > opened.  Short of changing the code to not scan for a '.' and just
> > assume that every file is a floating point file, can anyone think of a
> > good way to speed this up?
> > Thanks,
> > Todd
> > 
> > 
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ari.jolma at gmail.com  Sat Dec  4 10:57:37 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sat Dec  4 10:57:41 2010
Subject: [gdal-dev] MSYS, MingW and GDAL
In-Reply-To: <64779.151.166.15.115.1289403439.squirrel@my.novatechnologies.net>
References: <64779.151.166.15.115.1289403439.squirrel@my.novatechnologies.net>
Message-ID: <4CFA64F1.8050901@gmail.com>

Sam,

This may come very late, but I believe that this is a known problem. The 
cure is to edit the GNUmakefile a bit as described on the top of this page:

http://trac.osgeo.org/gdal/wiki/BuildingWithMinGW

Perhaps the page should be edited a bit to explain more.

Best regards,

Ari

On 11/10/2010 05:37 PM, Samuel Grant wrote:
> When compiling under MSYS with MingW, everything is fine until the end...
>
> When trying to create the libgdal.dll, I get errors...
>
> "
> ./frmts/o/nitfimage.o: In function 'NITFImageAccess' :
> .....nitf/nitfimage.c:253: undefined reference to 'GDALInitGCPs'
> "
>
> also get undef refs for GDALDeinitGCPs, GDALGCPsToGetTransform, GDALDuplicateGCPs, GDALCheckVersion, GDALVersionInfo...
>
> Any ideas?
>
> --Sam
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>    

From ahmettemiz88 at gmail.com  Sat Dec  4 12:18:59 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Sat Dec  4 12:19:02 2010
Subject: [gdal-dev] couldn't find "gdallocationinfo"
Message-ID: <AANLkTikHJLnA9dtM4nmGMUR8EZHQ3Sa5SKwCcnWL94Z-@mail.gmail.com>

hello
I have compiled version of
GDAL 1.8dev, released 2010/01/19

But I couldn't find "gdallocationinfo"
 utility.

Could you tell me why ?



Ahmet Temiz
Jeoloji M?h.
Planlama ve Zarar Azaltma Dairesi Ba?kanl???
Bilgi ve CBS grubu
Eski?ehir Yolu 10. km.
Lodumlu / Ankara
Tel : 0 312 2872680 / 1535
From even.rouault at mines-paris.org  Sat Dec  4 12:41:28 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Dec  4 12:41:37 2010
Subject: [gdal-dev] couldn't find "gdallocationinfo"
In-Reply-To: <AANLkTikHJLnA9dtM4nmGMUR8EZHQ3Sa5SKwCcnWL94Z-@mail.gmail.com>
References: <AANLkTikHJLnA9dtM4nmGMUR8EZHQ3Sa5SKwCcnWL94Z-@mail.gmail.com>
Message-ID: <201012041841.28806.even.rouault@mines-paris.org>

I made a fix 2 days ago so that it gets compiled by default on Windows, so if 
you use an older snapshot, you need updating

Le samedi 04 d?cembre 2010 18:18:59, ahmet temiz a ?crit :
> hello
> I have compiled version of
> GDAL 1.8dev, released 2010/01/19
> 
> But I couldn't find "gdallocationinfo"
>  utility.
> 
> Could you tell me why ?
> 
> 
> 
> Ahmet Temiz
> Jeoloji M?h.
> Planlama ve Zarar Azaltma Dairesi Ba?kanl???
> Bilgi ve CBS grubu
> Eski?ehir Yolu 10. km.
> Lodumlu / Ankara
> Tel : 0 312 2872680 / 1535
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Sun Dec  5 15:22:15 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Dec  5 15:22:19 2010
Subject: [gdal-dev] Re: Motion: Commit access for Ragi Burhum
In-Reply-To: <4BB1020C.10201@pobox.com>
References: <4BB1020C.10201@pobox.com>
Message-ID: <4CFBF477.5020708@pobox.com>

On 10-03-29 03:39 PM, Frank Warmerdam wrote:
> Motion: Extend GDAL commit access to Ragi Burhum.
>
> ---
>
> Folks,
>
> Ragi has developed an OGR driver based on the ArcObjects API and there
> isn't
> really an existing committer setup to test and incorporate it. I'd like to
> give Ragi access so he can do so and maintain the driver. He also has
> broader expertise and might be an asset in other areas.
>
> The new driver is described at:
>
> http://trac.osgeo.org/gdal/ticket/3332
>
> I'll start with my +1.

Folks,

It seems I have been very negligent in closing this motion.  I declare it
passed with support from Frank, Even, Tamas and Daniel.  Ragi plans to go
ahead within integration this week.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Sun Dec  5 19:42:53 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Dec  5 19:43:07 2010
Subject: [gdal-dev] Re: OpenCL, GRASS, GDAL, and You
In-Reply-To: <88890516-6689-41C4-8577-1524F699AF12@pricepages.org>
References: <88890516-6689-41C4-8577-1524F699AF12@pricepages.org>
Message-ID: <4CFC318D.1010502@pobox.com>

On 10-09-23 10:09 AM, Seth Price wrote:
> Hey all, I was just wondering if there was any progress in integrating
> the OpenCL code into trunk in each project? I haven't heard anything,
> but it would be a shame to just leave the code sit, or wait until the
> code branches have significantly diverged.
> ~Seth
>

Seth,

Last week I went out and bought a new AMD/ATI machine in the hopes (amoung
other goals) that OpenCL would work on it with the ATI OpenCL SDK.
Unfortunately I have discovered that the ATI Radion 4200 HD is not supported
for OpenCL stuff.  :-(

Nevertheless, with some persistance I was able to build the ATI SDK, and
configure GDAL to build against it.  So I have integrated OpenCL support
in trunk.  It is not enabled by default, but you can enable it with the
--with-opencl directive.  If the include files and libraries are in a
non-standard location you can also use the --with-opencl-include and
--with-opencl-lib directives to configure like this:

     --with-opencl \
     --with-opencl-include=/home/warmerda/pkg/ati-stream-sdk-v2.2-lnx64/include \
 
--with-opencl-lib="-L/home/warmerda/pkg/ati-stream-sdk-v2.2-lnx64/lib/x86_64 
-lOpenCL" \

I ran into a few issues:

1) It seems the include file from ATI is <cl/opencl.h> not <OpenCL/OpenCL.h>
as it is on the Mac.  I've put a platform dependent ifdef but I don't now
what the situation will be on other machines.

2) In your get_device() function you were passing NULL in for the platform.
The online docs indicate this as an option but warn that behavior then is
platform dependent.  The ATI SDK just fails with an invalid platform error.
So I updated the code to fetch a platform id and use that.

3) On my system it falls back to using the CPU but it turns out the CPU
does not offer "image" support in my case.  I added some extra logic to
look for this capability so a better error could be reported.

4) I restructured things a bit so that the OpenCL warper case can return
CE_Warning to indicate to the high level warper that OpenCL should be
skipped and other mechanisms used.  That is what it does not if it fails
to find a suitable device, or some of the other specific checks.

5) I made a few changes to use CPLDebug instead of printf for debug output.

I haven't tried this yet on your Mac.  I avoided using the account you
kindly offered because I find the Mac is often a perverse build environment
and I didn't want to establish the "norm" based on it.  I might try it out
tonight though.

I have also not yet tried it on windows, and likely won't in the near future.
Perhaps someone else will pick up the ball there.  The code itself just
depends on having HAVE_OPENCL defined at least in the alg directory and
of course appropriate include and link options.

(cc:ed to the list so everyone is aware of the availability).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From peifer at gmx.eu  Mon Dec  6 04:12:26 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon Dec  6 04:15:08 2010
Subject: [gdal-dev] ERROR 1: LZWDecode:Wrong length of decoded string: data
 probably corrupted
Message-ID: <4CFCA8FA.5050905@gmx.eu>


Hi,

Over the weekend, I tried to gdal_rasterize a 350+ MB shapefile with 
149671 polygon features into a 64116 x 61850 GeoTIFF.

I first had some trouble while trying to rasterize everything at once, 
because after some time, the gdal_rasterize process got killed by the 
kerned (that's how I understood it).

I then tried to loop through the shapefile's CODE values, something like 
the bash code [1] below. I ended up with different errors, see [2]

Any idea what is going on and how to avoid these errors? (I am using 
GDAL v1.8dev from trunk)

Thanks in advance, Hermann

PS I tried without LZW compression, but this generates a 3+GB GeoTIFF, 
which in return seems to lead to other (performance) problems.


[1]

for file in *.shp ; do
   for code in {0..20} ; do
     if [[ $code = 0 ]] ; then
       gdal_rasterize --debug on --config GDAL_CACHEMAX 1000 \
         -ot byte -co compress=lzw -tr 2 2 -tap -l ${file%.shp} \
         -burn $code -where CODE=\'$code\' \
         $file ${file%.shp}_2m.tif >  ${file%.shp}_2m.log 2>&1
     else
       gdal_rasterize --debug on --config GDAL_CACHEMAX 1000 \
         -l ${file%.shp} -burn $code -where CODE=\'$code\' \
         $file ${file%.shp}_2m.tif >> ${file%.shp}_2m.log 2>&1
     fi
   done
done


[2]

$ head -90 uk001l_london_2m.log
OGR: OGROpen(shpfiles/uk001l_london.shp/0x764610) succeeded as ESRI 
Shapefile.
GDAL: 
GDALDriver::Create(GTiff,uk001l_london_2m.tif,64116,61850,1,Byte,0x764ee0)
Shape: 149671 features read on layer 'uk001l_london'.
GDAL: GDALClose(uk001l_london_2m.tif, this=0x782e00)
GDAL: GDALDeregister_GTiff() called.
OGR: OGROpen(shpfiles/uk001l_london.shp/0x2080610) succeeded as ESRI 
Shapefile.
GDAL: GDALOpen(uk001l_london_2m.tif, this=0x209feb0) succeeds as GTiff.
0...10...20...30...40...50...60.OGR: 
OGROpen(shpfiles/uk001l_london.shp/0x10c1610) succeeded as ESRI Shapefile.
GDAL: GDALOpen(uk001l_london_2m.tif, this=0x10e0eb0) succeeds as GTiff.
.0...70..10.....2080.....30.90......Shape: 149671 features read on layer 
'uk001l_london'.
40.GDAL: GDALClose(uk001l_london_2m.tif, this=0x209feb0)
GDAL: GDALDeregister_GTiff() called.
100 - done.
..50..OGR: OGROpen(shpfiles/uk001l_london.shp/0x225e610) succeeded as 
ESRI Shapefile.
GDAL: GDALOpen(uk001l_london_2m.tif, this=0x227deb0) succeeds as GTiff.
0....6010....20.....3070.....OGR: 
OGROpen(shpfiles/uk001l_london.shp/0x1543610) succeeded as ESRI Shapefile.
GDAL: GDALOpen(uk001l_london_2m.tif, this=0x1562eb0) succeeds as GTiff.
0...10...2040.....3080.....50..40....90...ERROR 1: LZWDecode:Wrong 
length of decoded string: data probably corrupted at scanline 36908
ERROR 1: TIFFReadEncodedStrip() failed.

ERROR 1: IReadBlock failed at X offset 0, Y offset 36908
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 36908
Shape: 149671 features read on layer 'uk001l_london'.
..GDAL: GDALClose(uk001l_london_2m.tif, this=0x227deb0)
GDAL: GDALDeregister_GTiff() called.
50...Shape: 149671 features read on layer 'uk001l_london'.
.ERROR 1: LZWDecode:Wrong length of decoded string: data probably 
corrupted at scanline 36908
ERROR 1: TIFFReadEncodedStrip() failed.

ERROR 1: IReadBlock failed at X offset 0, Y offset 36908
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 36908
Shape: 149671 features read on layer 'uk001l_london'.
GDAL: GDALClose(uk001l_london_2m.tif, this=0x10e0eb0)
GDAL: GDALDeregister_GTiff() called.
100 - done.
GDAL: GDALClose(uk001l_london_2m.tif, this=0x1562eb0)
GDAL: GDALDeregister_GTiff() called.
OGR: OGROpen(shpfiles/uk001l_london.shp/0xa21610) succeeded as ESRI 
Shapefile.
GDAL: GDALOpen(uk001l_london_2m.tif, this=0xa40eb0) succeeds as GTiff.
0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
ERROR 1: TIFFReadEncodedStrip() failed.

ERROR 1: IReadBlock failed at X offset 0, Y offset 863
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 863
Shape: 149671 features read on layer 'uk001l_london'.
GDAL: GDALClose(uk001l_london_2m.tif, this=0xa40eb0)
GDAL: GDALDeregister_GTiff() called.
OGR: OGROpen(shpfiles/uk001l_london.shp/0x1cd3610) succeeded as ESRI 
Shapefile.
GDAL: GDALOpen(uk001l_london_2m.tif, this=0x1cf2eb0) succeeds as GTiff.
0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
ERROR 1: TIFFReadEncodedStrip() failed.

ERROR 1: IReadBlock failed at X offset 0, Y offset 863
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 863
Shape: 149671 features read on layer 'uk001l_london'.
GDAL: GDALClose(uk001l_london_2m.tif, this=0x1cf2eb0)
GDAL: GDALDeregister_GTiff() called.
OGR: OGROpen(shpfiles/uk001l_london.shp/0x1cc5610) succeeded as ESRI 
Shapefile.
GDAL: GDALOpen(uk001l_london_2m.tif, this=0x1ce4eb0) succeeds as GTiff.
0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
ERROR 1: TIFFReadEncodedStrip() failed.

ERROR 1: IReadBlock failed at X offset 0, Y offset 863
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 863
Shape: 149671 features read on layer 'uk001l_london'.
GDAL: GDALClose(uk001l_london_2m.tif, this=0x1ce4eb0)
GDAL: GDALDeregister_GTiff() called.
OGR: OGROpen(shpfiles/uk001l_london.shp/0x172e610) succeeded as ESRI 
Shapefile.
GDAL: GDALOpen(uk001l_london_2m.tif, this=0x174deb0) succeeds as GTiff.
0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
ERROR 1: TIFFReadEncodedStrip() failed.

ERROR 1: IReadBlock failed at X offset 0, Y offset 863
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 863
Shape: 149671 features read on layer 'uk001l_london'.
GDAL: GDALClose(uk001l_london_2m.tif, this=0x174deb0)
GDAL: GDALDeregister_GTiff() called.
OGR: OGROpen(shpfiles/uk001l_london.shp/0x1276610) succeeded as ESRI 
Shapefile.
GDAL: GDALOpen(uk001l_london_2m.tif, this=0x1295eb0) succeeds as GTiff.
0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
ERROR 1: TIFFReadEncodedStrip() failed.

ERROR 1: IReadBlock failed at X offset 0, Y offset 863
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 863
Shape: 149671 features read on layer 'uk001l_london'.
GDAL: GDALClose(uk001l_london_2m.tif, this=0x1295eb0)
GDAL: GDALDeregister_GTiff() called.
OGR: OGROpen(shpfiles/uk001l_london.shp/0x1c0c610) succeeded as ESRI 
Shapefile.
GDAL: GDALOpen(uk001l_london_2m.tif, this=0x1c2beb0) succeeds as GTiff.
0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
ERROR 1: TIFFReadEncodedStrip() failed.

From even.rouault at mines-paris.org  Mon Dec  6 05:19:24 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Dec  6 05:19:35 2010
Subject: [gdal-dev] ERROR 1: LZWDecode:Wrong length of decoded string:
	data probably corrupted
In-Reply-To: <4CFCA8FA.5050905@gmx.eu>
References: <4CFCA8FA.5050905@gmx.eu>
Message-ID: <1291630764.4cfcb8ac55891@webmail.free.fr>

Selon Hermann Peifer <peifer@gmx.eu>:

Herman,

About your attempt to try to rasterize everything at once, it is likely that you
ran out of virtual memory as gdal_rasterize will load all the geometries in
memory before proceeding to the rasterization (it requires probably much more
memory than the on-disk size of the shapefile). If you can debug, you could set
up a breakpoint before the call to GDALRasterizeGeometries() at line 293 of
gdal_rasterize.cpp. If my hypothesis is right, then the process will be killed
before reaching the breakpoint. (There's a GDALRasterizeLayers() API that would
avoid loading all the OGR layer at once, but it is unused by gdal_rasterize
application, apparently because there are some options that couldn't be done
with it)

As far as the error about LZW is concerned, do you use internal libtiff or your
system libtiff ? If using external libtiff, you could try using internal libtiff
instead. And if you are already using internal libtiff, then it's likely an
evidence there's a remaining bug in how it deals with updating... But anyway I
would recommand you against using a compression scheme when doing multiple
updates of the file. Due to the way how libtiff manages strips/tiles allocation,
it will very likely to suboptimal file size because strips/tiles will be
rewritten many times. I'd rather use uncompressed TIFF for intermediate work and
as a final step do a gdal_translate -of LZW.

Best regards,

Even

>
> Hi,
>
> Over the weekend, I tried to gdal_rasterize a 350+ MB shapefile with
> 149671 polygon features into a 64116 x 61850 GeoTIFF.
>
> I first had some trouble while trying to rasterize everything at once,
> because after some time, the gdal_rasterize process got killed by the
> kerned (that's how I understood it).
>
> I then tried to loop through the shapefile's CODE values, something like
> the bash code [1] below. I ended up with different errors, see [2]
>
> Any idea what is going on and how to avoid these errors? (I am using
> GDAL v1.8dev from trunk)
>
> Thanks in advance, Hermann
>
> PS I tried without LZW compression, but this generates a 3+GB GeoTIFF,
> which in return seems to lead to other (performance) problems.
>
>
> [1]
>
> for file in *.shp ; do
>    for code in {0..20} ; do
>      if [[ $code = 0 ]] ; then
>        gdal_rasterize --debug on --config GDAL_CACHEMAX 1000 \
>          -ot byte -co compress=lzw -tr 2 2 -tap -l ${file%.shp} \
>          -burn $code -where CODE=\'$code\' \
>          $file ${file%.shp}_2m.tif >  ${file%.shp}_2m.log 2>&1
>      else
>        gdal_rasterize --debug on --config GDAL_CACHEMAX 1000 \
>          -l ${file%.shp} -burn $code -where CODE=\'$code\' \
>          $file ${file%.shp}_2m.tif >> ${file%.shp}_2m.log 2>&1
>      fi
>    done
> done
>
>
> [2]
>
> $ head -90 uk001l_london_2m.log
> OGR: OGROpen(shpfiles/uk001l_london.shp/0x764610) succeeded as ESRI
> Shapefile.
> GDAL:
> GDALDriver::Create(GTiff,uk001l_london_2m.tif,64116,61850,1,Byte,0x764ee0)
> Shape: 149671 features read on layer 'uk001l_london'.
> GDAL: GDALClose(uk001l_london_2m.tif, this=0x782e00)
> GDAL: GDALDeregister_GTiff() called.
> OGR: OGROpen(shpfiles/uk001l_london.shp/0x2080610) succeeded as ESRI
> Shapefile.
> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x209feb0) succeeds as GTiff.
> 0...10...20...30...40...50...60.OGR:
> OGROpen(shpfiles/uk001l_london.shp/0x10c1610) succeeded as ESRI Shapefile.
> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x10e0eb0) succeeds as GTiff.
> .0...70..10.....2080.....30.90......Shape: 149671 features read on layer
> 'uk001l_london'.
> 40.GDAL: GDALClose(uk001l_london_2m.tif, this=0x209feb0)
> GDAL: GDALDeregister_GTiff() called.
> 100 - done.
> ..50..OGR: OGROpen(shpfiles/uk001l_london.shp/0x225e610) succeeded as
> ESRI Shapefile.
> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x227deb0) succeeds as GTiff.
> 0....6010....20.....3070.....OGR:
> OGROpen(shpfiles/uk001l_london.shp/0x1543610) succeeded as ESRI Shapefile.
> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x1562eb0) succeeds as GTiff.
> 0...10...2040.....3080.....50..40....90...ERROR 1: LZWDecode:Wrong
> length of decoded string: data probably corrupted at scanline 36908
> ERROR 1: TIFFReadEncodedStrip() failed.
>
> ERROR 1: IReadBlock failed at X offset 0, Y offset 36908
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 36908
> Shape: 149671 features read on layer 'uk001l_london'.
> ..GDAL: GDALClose(uk001l_london_2m.tif, this=0x227deb0)
> GDAL: GDALDeregister_GTiff() called.
> 50...Shape: 149671 features read on layer 'uk001l_london'.
> .ERROR 1: LZWDecode:Wrong length of decoded string: data probably
> corrupted at scanline 36908
> ERROR 1: TIFFReadEncodedStrip() failed.
>
> ERROR 1: IReadBlock failed at X offset 0, Y offset 36908
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 36908
> Shape: 149671 features read on layer 'uk001l_london'.
> GDAL: GDALClose(uk001l_london_2m.tif, this=0x10e0eb0)
> GDAL: GDALDeregister_GTiff() called.
> 100 - done.
> GDAL: GDALClose(uk001l_london_2m.tif, this=0x1562eb0)
> GDAL: GDALDeregister_GTiff() called.
> OGR: OGROpen(shpfiles/uk001l_london.shp/0xa21610) succeeded as ESRI
> Shapefile.
> GDAL: GDALOpen(uk001l_london_2m.tif, this=0xa40eb0) succeeds as GTiff.
> 0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
> ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
> ERROR 1: TIFFReadEncodedStrip() failed.
>
> ERROR 1: IReadBlock failed at X offset 0, Y offset 863
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 863
> Shape: 149671 features read on layer 'uk001l_london'.
> GDAL: GDALClose(uk001l_london_2m.tif, this=0xa40eb0)
> GDAL: GDALDeregister_GTiff() called.
> OGR: OGROpen(shpfiles/uk001l_london.shp/0x1cd3610) succeeded as ESRI
> Shapefile.
> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x1cf2eb0) succeeds as GTiff.
> 0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
> ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
> ERROR 1: TIFFReadEncodedStrip() failed.
>
> ERROR 1: IReadBlock failed at X offset 0, Y offset 863
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 863
> Shape: 149671 features read on layer 'uk001l_london'.
> GDAL: GDALClose(uk001l_london_2m.tif, this=0x1cf2eb0)
> GDAL: GDALDeregister_GTiff() called.
> OGR: OGROpen(shpfiles/uk001l_london.shp/0x1cc5610) succeeded as ESRI
> Shapefile.
> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x1ce4eb0) succeeds as GTiff.
> 0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
> ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
> ERROR 1: TIFFReadEncodedStrip() failed.
>
> ERROR 1: IReadBlock failed at X offset 0, Y offset 863
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 863
> Shape: 149671 features read on layer 'uk001l_london'.
> GDAL: GDALClose(uk001l_london_2m.tif, this=0x1ce4eb0)
> GDAL: GDALDeregister_GTiff() called.
> OGR: OGROpen(shpfiles/uk001l_london.shp/0x172e610) succeeded as ESRI
> Shapefile.
> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x174deb0) succeeds as GTiff.
> 0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
> ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
> ERROR 1: TIFFReadEncodedStrip() failed.
>
> ERROR 1: IReadBlock failed at X offset 0, Y offset 863
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 863
> Shape: 149671 features read on layer 'uk001l_london'.
> GDAL: GDALClose(uk001l_london_2m.tif, this=0x174deb0)
> GDAL: GDALDeregister_GTiff() called.
> OGR: OGROpen(shpfiles/uk001l_london.shp/0x1276610) succeeded as ESRI
> Shapefile.
> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x1295eb0) succeeds as GTiff.
> 0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
> ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
> ERROR 1: TIFFReadEncodedStrip() failed.
>
> ERROR 1: IReadBlock failed at X offset 0, Y offset 863
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 863
> Shape: 149671 features read on layer 'uk001l_london'.
> GDAL: GDALClose(uk001l_london_2m.tif, this=0x1295eb0)
> GDAL: GDALDeregister_GTiff() called.
> OGR: OGROpen(shpfiles/uk001l_london.shp/0x1c0c610) succeeded as ESRI
> Shapefile.
> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x1c2beb0) succeeds as GTiff.
> 0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
> ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
> ERROR 1: TIFFReadEncodedStrip() failed.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From antonio.rocha at deimos.com.pt  Mon Dec  6 05:21:33 2010
From: antonio.rocha at deimos.com.pt (=?ISO-8859-1?Q?Ant=F3nio_Rocha?=)
Date: Mon Dec  6 05:21:35 2010
Subject: [gdal-dev] Error: EPSG code not recognized
Message-ID: <4CFCB92D.9010104@deimos.com.pt>

Greetings

I'm using gdal15 and gdal16 and I'm trying to use gdalwarp with the 
following command:
gdalwarp -s_srs EPSG:9823 -t_srs EPSG:3763 file.nc file.tif and I get 
the error:
ERROR 6: EPSG PCS/GCS code 9823 not found in EPSG support files. Is this 
a valid EPSG coordinate system?
ERROR 1: Translating source or target SRS failed:
EPSG:9823

The thing is that this EPSG code exists and is this one: 
http://www.remotesensing.org/geotiff/proj_list/equirectangular.html
Is this a bug? or is there other alternative?

Thanks
Antonio R.


__________ Information from ESET NOD32 Antivirus, version of virus signature database 5676 (20101205) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From peifer at gmx.eu  Mon Dec  6 05:43:13 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon Dec  6 05:45:58 2010
Subject: [gdal-dev] ERROR 1: LZWDecode:Wrong length of decoded string:
	data probably corrupted
In-Reply-To: <1291630764.4cfcb8ac55891@webmail.free.fr>
References: <4CFCA8FA.5050905@gmx.eu>
	<1291630764.4cfcb8ac55891@webmail.free.fr>
Message-ID: <4CFCBE41.2010200@gmx.eu>

Even,

Thanks for the quick feedback.

Just to clarify: last week, I compiled revision 21190 from 
http://svn.osgeo.org/gdal/trunk/gdal, configured 
--with-libtiff=internal. I have 8G of memory, which is about 20 times 
the size of the shapefile. However, I might have been processing other 
shapefiles in parallel when running into the out-of-memory error. I will 
double-check.

About using an uncompressed TIFF for intermediate work:
Doesn't this lead to performance issues, as the uncompressed TIFF (say: 
3G) has be written to disc so many times (?)

Thanks again, Hermann


On 06/12/2010 11:19, Even Rouault wrote:
> Selon Hermann Peifer<peifer@gmx.eu>:
>
> Herman,
>
> About your attempt to try to rasterize everything at once, it is likely that you
> ran out of virtual memory as gdal_rasterize will load all the geometries in
> memory before proceeding to the rasterization (it requires probably much more
> memory than the on-disk size of the shapefile). If you can debug, you could set
> up a breakpoint before the call to GDALRasterizeGeometries() at line 293 of
> gdal_rasterize.cpp. If my hypothesis is right, then the process will be killed
> before reaching the breakpoint. (There's a GDALRasterizeLayers() API that would
> avoid loading all the OGR layer at once, but it is unused by gdal_rasterize
> application, apparently because there are some options that couldn't be done
> with it)
>
> As far as the error about LZW is concerned, do you use internal libtiff or your
> system libtiff ? If using external libtiff, you could try using internal libtiff
> instead. And if you are already using internal libtiff, then it's likely an
> evidence there's a remaining bug in how it deals with updating... But anyway I
> would recommand you against using a compression scheme when doing multiple
> updates of the file. Due to the way how libtiff manages strips/tiles allocation,
> it will very likely to suboptimal file size because strips/tiles will be
> rewritten many times. I'd rather use uncompressed TIFF for intermediate work and
> as a final step do a gdal_translate -of LZW.
>
> Best regards,
>
> Even
>
>> Hi,
>>
>> Over the weekend, I tried to gdal_rasterize a 350+ MB shapefile with
>> 149671 polygon features into a 64116 x 61850 GeoTIFF.
>>
>> I first had some trouble while trying to rasterize everything at once,
>> because after some time, the gdal_rasterize process got killed by the
>> kerned (that's how I understood it).
>>
>> I then tried to loop through the shapefile's CODE values, something like
>> the bash code [1] below. I ended up with different errors, see [2]
>>
>> Any idea what is going on and how to avoid these errors? (I am using
>> GDAL v1.8dev from trunk)
>>
>> Thanks in advance, Hermann
>>
>> PS I tried without LZW compression, but this generates a 3+GB GeoTIFF,
>> which in return seems to lead to other (performance) problems.
>>
>>
>> [1]
>>
>> for file in *.shp ; do
>>     for code in {0..20} ; do
>>       if [[ $code = 0 ]] ; then
>>         gdal_rasterize --debug on --config GDAL_CACHEMAX 1000 \
>>           -ot byte -co compress=lzw -tr 2 2 -tap -l ${file%.shp} \
>>           -burn $code -where CODE=\'$code\' \
>>           $file ${file%.shp}_2m.tif>   ${file%.shp}_2m.log 2>&1
>>       else
>>         gdal_rasterize --debug on --config GDAL_CACHEMAX 1000 \
>>           -l ${file%.shp} -burn $code -where CODE=\'$code\' \
>>           $file ${file%.shp}_2m.tif>>  ${file%.shp}_2m.log 2>&1
>>       fi
>>     done
>> done
>>
>>
>> [2]
>>
>> $ head -90 uk001l_london_2m.log
>> OGR: OGROpen(shpfiles/uk001l_london.shp/0x764610) succeeded as ESRI
>> Shapefile.
>> GDAL:
>> GDALDriver::Create(GTiff,uk001l_london_2m.tif,64116,61850,1,Byte,0x764ee0)
>> Shape: 149671 features read on layer 'uk001l_london'.
>> GDAL: GDALClose(uk001l_london_2m.tif, this=0x782e00)
>> GDAL: GDALDeregister_GTiff() called.
>> OGR: OGROpen(shpfiles/uk001l_london.shp/0x2080610) succeeded as ESRI
>> Shapefile.
>> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x209feb0) succeeds as GTiff.
>> 0...10...20...30...40...50...60.OGR:
>> OGROpen(shpfiles/uk001l_london.shp/0x10c1610) succeeded as ESRI Shapefile.
>> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x10e0eb0) succeeds as GTiff.
>> .0...70..10.....2080.....30.90......Shape: 149671 features read on layer
>> 'uk001l_london'.
>> 40.GDAL: GDALClose(uk001l_london_2m.tif, this=0x209feb0)
>> GDAL: GDALDeregister_GTiff() called.
>> 100 - done.
>> ..50..OGR: OGROpen(shpfiles/uk001l_london.shp/0x225e610) succeeded as
>> ESRI Shapefile.
>> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x227deb0) succeeds as GTiff.
>> 0....6010....20.....3070.....OGR:
>> OGROpen(shpfiles/uk001l_london.shp/0x1543610) succeeded as ESRI Shapefile.
>> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x1562eb0) succeeds as GTiff.
>> 0...10...2040.....3080.....50..40....90...ERROR 1: LZWDecode:Wrong
>> length of decoded string: data probably corrupted at scanline 36908
>> ERROR 1: TIFFReadEncodedStrip() failed.
>>
>> ERROR 1: IReadBlock failed at X offset 0, Y offset 36908
>> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 36908
>> Shape: 149671 features read on layer 'uk001l_london'.
>> ..GDAL: GDALClose(uk001l_london_2m.tif, this=0x227deb0)
>> GDAL: GDALDeregister_GTiff() called.
>> 50...Shape: 149671 features read on layer 'uk001l_london'.
>> .ERROR 1: LZWDecode:Wrong length of decoded string: data probably
>> corrupted at scanline 36908
>> ERROR 1: TIFFReadEncodedStrip() failed.
>>
>> ERROR 1: IReadBlock failed at X offset 0, Y offset 36908
>> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 36908
>> Shape: 149671 features read on layer 'uk001l_london'.
>> GDAL: GDALClose(uk001l_london_2m.tif, this=0x10e0eb0)
>> GDAL: GDALDeregister_GTiff() called.
>> 100 - done.
>> GDAL: GDALClose(uk001l_london_2m.tif, this=0x1562eb0)
>> GDAL: GDALDeregister_GTiff() called.
>> OGR: OGROpen(shpfiles/uk001l_london.shp/0xa21610) succeeded as ESRI
>> Shapefile.
>> GDAL: GDALOpen(uk001l_london_2m.tif, this=0xa40eb0) succeeds as GTiff.
>> 0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
>> ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
>> ERROR 1: TIFFReadEncodedStrip() failed.
>>
>> ERROR 1: IReadBlock failed at X offset 0, Y offset 863
>> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 863
>> Shape: 149671 features read on layer 'uk001l_london'.
>> GDAL: GDALClose(uk001l_london_2m.tif, this=0xa40eb0)
>> GDAL: GDALDeregister_GTiff() called.
>> OGR: OGROpen(shpfiles/uk001l_london.shp/0x1cd3610) succeeded as ESRI
>> Shapefile.
>> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x1cf2eb0) succeeds as GTiff.
>> 0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
>> ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
>> ERROR 1: TIFFReadEncodedStrip() failed.
>>
>> ERROR 1: IReadBlock failed at X offset 0, Y offset 863
>> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 863
>> Shape: 149671 features read on layer 'uk001l_london'.
>> GDAL: GDALClose(uk001l_london_2m.tif, this=0x1cf2eb0)
>> GDAL: GDALDeregister_GTiff() called.
>> OGR: OGROpen(shpfiles/uk001l_london.shp/0x1cc5610) succeeded as ESRI
>> Shapefile.
>> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x1ce4eb0) succeeds as GTiff.
>> 0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
>> ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
>> ERROR 1: TIFFReadEncodedStrip() failed.
>>
>> ERROR 1: IReadBlock failed at X offset 0, Y offset 863
>> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 863
>> Shape: 149671 features read on layer 'uk001l_london'.
>> GDAL: GDALClose(uk001l_london_2m.tif, this=0x1ce4eb0)
>> GDAL: GDALDeregister_GTiff() called.
>> OGR: OGROpen(shpfiles/uk001l_london.shp/0x172e610) succeeded as ESRI
>> Shapefile.
>> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x174deb0) succeeds as GTiff.
>> 0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
>> ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
>> ERROR 1: TIFFReadEncodedStrip() failed.
>>
>> ERROR 1: IReadBlock failed at X offset 0, Y offset 863
>> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 863
>> Shape: 149671 features read on layer 'uk001l_london'.
>> GDAL: GDALClose(uk001l_london_2m.tif, this=0x174deb0)
>> GDAL: GDALDeregister_GTiff() called.
>> OGR: OGROpen(shpfiles/uk001l_london.shp/0x1276610) succeeded as ESRI
>> Shapefile.
>> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x1295eb0) succeeds as GTiff.
>> 0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
>> ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
>> ERROR 1: TIFFReadEncodedStrip() failed.
>>
>> ERROR 1: IReadBlock failed at X offset 0, Y offset 863
>> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 863
>> Shape: 149671 features read on layer 'uk001l_london'.
>> GDAL: GDALClose(uk001l_london_2m.tif, this=0x1295eb0)
>> GDAL: GDALDeregister_GTiff() called.
>> OGR: OGROpen(shpfiles/uk001l_london.shp/0x1c0c610) succeeded as ESRI
>> Shapefile.
>> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x1c2beb0) succeeds as GTiff.
>> 0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
>> ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
>> ERROR 1: TIFFReadEncodedStrip() failed.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
From jrepetto at free.fr  Mon Dec  6 06:40:28 2010
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon Dec  6 06:48:00 2010
Subject: [gdal-dev] Error: EPSG code not recognized
In-Reply-To: <4CFCB92D.9010104@deimos.com.pt>
References: <4CFCB92D.9010104@deimos.com.pt>
Message-ID: <4CFCCBAC.5050005@free.fr>

Le 06/12/2010 11:21, Ant?nio Rocha a ?crit :
> Greetings
>
> I'm using gdal15 and gdal16 and I'm trying to use gdalwarp with the
> following command:
> gdalwarp -s_srs EPSG:9823 -t_srs EPSG:3763 file.nc file.tif and I get
> the error:
> ERROR 6: EPSG PCS/GCS code 9823 not found in EPSG support files. Is this
> a valid EPSG coordinate system?
> ERROR 1: Translating source or target SRS failed:
> EPSG:9823
>
> The thing is that this EPSG code exists and is this one:
> http://www.remotesensing.org/geotiff/proj_list/equirectangular.html
> Is this a bug? or is there other alternative?
>
> Thanks
> Antonio R.
>

Hi Antonio,

EPSG:9823 is not a coordinate reference system, it is only a projection 
code.

Jean-Claude
From Ralf.Suhr at itc-halle.de  Mon Dec  6 06:47:46 2010
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Mon Dec  6 06:49:48 2010
Subject: [gdal-dev] Error reading long numbers as integer
Message-ID: <201012061247.47627.Ralf.Suhr@itc-halle.de>

Hello list,

I have created a ticket for the NAS reader. Long numbers (13 digits) are read 
as integer. Maybe there are more drivers who have the same trouble.

I have tested some workarounds. Changing the attribut definition in gfs file 
is successful, when destination driver is PGdump or Postgresql (create mode).
With Postgresql driver as destination ogr2ogr convert the 13 digits number 
always to integer in append mode and ignoring table definition. 
I tested with gdal SVN21189.

Gr
Ralf
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101206/b69fd217/attachment.html
From aborruso at tin.it  Mon Dec  6 06:54:28 2010
From: aborruso at tin.it (iomeneandrei)
Date: Mon Dec  6 06:54:30 2010
Subject: [gdal-dev] Multipart to singlepart
Message-ID: <1291636468236-5807508.post@n2.nabble.com>


Hi all,
is there in OGR a command that I can use to convert multipart polygons in
singleparts?

Thank you,

a

-----
Andrea Borruso

----------------------------------------------------
email: aborruso@tin.it
website: http://blog.spaziogis.it
my 2.0 life: http://aborruso.spaziogis.it
feed: http://feeds2.feedburner.com/Tanto
38? 7' 48" N, 13? 21' 9" E
----------------------------------------------------
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Multipart-to-singlepart-tp5807508p5807508.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Konstantin.Baumann at autodesk.com  Mon Dec  6 07:10:12 2010
From: Konstantin.Baumann at autodesk.com (Konstantin Baumann)
Date: Mon Dec  6 07:10:14 2010
Subject: [gdal-dev] Re: OpenCL, GDAL, and You
In-Reply-To: <4CFC318D.1010502@pobox.com>
References: <88890516-6689-41C4-8577-1524F699AF12@pricepages.org>
	<4CFC318D.1010502@pobox.com>
Message-ID: <7DE0E5A9710AFC4896275865DABC86DA24963D@005-TK5MPN1-002.MGDADSK.autodesk.com>

Hi,

what benefit/improvement would the OpenCL integration bring to GDAL? Additional functionality or a speedup of existing functions? Probably only operations on images and/or rasters are supported; reprojection/warping and filtering would be good candidates, right? What concrete operations would be supported?

Kosta

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam (External)
Sent: Monday, December 06, 2010 1:43 AM
To: Seth Price
Cc: Philippe Vachon; gdal-dev; Wolf Bergenheim
Subject: [gdal-dev] Re: OpenCL, GRASS, GDAL, and You

On 10-09-23 10:09 AM, Seth Price wrote:
> Hey all, I was just wondering if there was any progress in integrating
> the OpenCL code into trunk in each project? I haven't heard anything,
> but it would be a shame to just leave the code sit, or wait until the
> code branches have significantly diverged.
> ~Seth
>

Seth,

Last week I went out and bought a new AMD/ATI machine in the hopes (amoung
other goals) that OpenCL would work on it with the ATI OpenCL SDK.
Unfortunately I have discovered that the ATI Radion 4200 HD is not supported
for OpenCL stuff.  :-(

Nevertheless, with some persistance I was able to build the ATI SDK, and
configure GDAL to build against it.  So I have integrated OpenCL support
in trunk.  It is not enabled by default, but you can enable it with the
--with-opencl directive.  If the include files and libraries are in a
non-standard location you can also use the --with-opencl-include and
--with-opencl-lib directives to configure like this:

     --with-opencl \
     --with-opencl-include=/home/warmerda/pkg/ati-stream-sdk-v2.2-lnx64/include \
 
--with-opencl-lib="-L/home/warmerda/pkg/ati-stream-sdk-v2.2-lnx64/lib/x86_64 
-lOpenCL" \

I ran into a few issues:

1) It seems the include file from ATI is <cl/opencl.h> not <OpenCL/OpenCL.h>
as it is on the Mac.  I've put a platform dependent ifdef but I don't now
what the situation will be on other machines.

2) In your get_device() function you were passing NULL in for the platform.
The online docs indicate this as an option but warn that behavior then is
platform dependent.  The ATI SDK just fails with an invalid platform error.
So I updated the code to fetch a platform id and use that.

3) On my system it falls back to using the CPU but it turns out the CPU
does not offer "image" support in my case.  I added some extra logic to
look for this capability so a better error could be reported.

4) I restructured things a bit so that the OpenCL warper case can return
CE_Warning to indicate to the high level warper that OpenCL should be
skipped and other mechanisms used.  That is what it does not if it fails
to find a suitable device, or some of the other specific checks.

5) I made a few changes to use CPLDebug instead of printf for debug output.

I haven't tried this yet on your Mac.  I avoided using the account you
kindly offered because I find the Mac is often a perverse build environment
and I didn't want to establish the "norm" based on it.  I might try it out
tonight though.

I have also not yet tried it on windows, and likely won't in the near future.
Perhaps someone else will pick up the ball there.  The code itself just
depends on having HAVE_OPENCL defined at least in the alg directory and
of course appropriate include and link options.

(cc:ed to the list so everyone is aware of the availability).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Mon Dec  6 07:15:10 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Dec  6 07:15:23 2010
Subject: [gdal-dev] ERROR 1: LZWDecode:Wrong length of decoded string:
	data probably corrupted
In-Reply-To: <4CFCBE41.2010200@gmx.eu>
References: <4CFCA8FA.5050905@gmx.eu>
	<1291630764.4cfcb8ac55891@webmail.free.fr>
	<4CFCBE41.2010200@gmx.eu>
Message-ID: <1291637710.4cfcd3cec1cfe@webmail.free.fr>

Selon Hermann Peifer <peifer@gmx.eu>:

> Even,
>
> Thanks for the quick feedback.
>
> Just to clarify: last week, I compiled revision 21190 from
> http://svn.osgeo.org/gdal/trunk/gdal, configured
> --with-libtiff=internal.

Hum OK so there's definitely a bug somewhere. Would be worth opening a ticket if
you had a way of reproducing those errors. Ideally with a smaller shapefile.

Would be interesting to see if it works better with another compression scheme,
let's say DEFLATE.

I have 8G of memory, which is about 20 times
> the size of the shapefile. However, I might have been processing other
> shapefiles in parallel when running into the out-of-memory error. I will
> double-check.

Is your OS a 64 bit OS ? Just to be sure you aren't limited to 2 GB per process
if it is a 32 bit OS.

>
> About using an uncompressed TIFF for intermediate work:
> Doesn't this lead to performance issues, as the uncompressed TIFF (say:
> 3G) has be written to disc so many times (?)

As often, the performance impact is hard to predict. It is a trade-off between
bigger I/O amount for uncompressed versus bigger CPU time for compressed.

>
> Thanks again, Hermann
>
>
> On 06/12/2010 11:19, Even Rouault wrote:
> > Selon Hermann Peifer<peifer@gmx.eu>:
> >
> > Herman,
> >
> > About your attempt to try to rasterize everything at once, it is likely
> that you
> > ran out of virtual memory as gdal_rasterize will load all the geometries in
> > memory before proceeding to the rasterization (it requires probably much
> more
> > memory than the on-disk size of the shapefile). If you can debug, you could
> set
> > up a breakpoint before the call to GDALRasterizeGeometries() at line 293 of
> > gdal_rasterize.cpp. If my hypothesis is right, then the process will be
> killed
> > before reaching the breakpoint. (There's a GDALRasterizeLayers() API that
> would
> > avoid loading all the OGR layer at once, but it is unused by gdal_rasterize
> > application, apparently because there are some options that couldn't be
> done
> > with it)
> >
> > As far as the error about LZW is concerned, do you use internal libtiff or
> your
> > system libtiff ? If using external libtiff, you could try using internal
> libtiff
> > instead. And if you are already using internal libtiff, then it's likely an
> > evidence there's a remaining bug in how it deals with updating... But
> anyway I
> > would recommand you against using a compression scheme when doing multiple
> > updates of the file. Due to the way how libtiff manages strips/tiles
> allocation,
> > it will very likely to suboptimal file size because strips/tiles will be
> > rewritten many times. I'd rather use uncompressed TIFF for intermediate
> work and
> > as a final step do a gdal_translate -of LZW.
> >
> > Best regards,
> >
> > Even
> >
> >> Hi,
> >>
> >> Over the weekend, I tried to gdal_rasterize a 350+ MB shapefile with
> >> 149671 polygon features into a 64116 x 61850 GeoTIFF.
> >>
> >> I first had some trouble while trying to rasterize everything at once,
> >> because after some time, the gdal_rasterize process got killed by the
> >> kerned (that's how I understood it).
> >>
> >> I then tried to loop through the shapefile's CODE values, something like
> >> the bash code [1] below. I ended up with different errors, see [2]
> >>
> >> Any idea what is going on and how to avoid these errors? (I am using
> >> GDAL v1.8dev from trunk)
> >>
> >> Thanks in advance, Hermann
> >>
> >> PS I tried without LZW compression, but this generates a 3+GB GeoTIFF,
> >> which in return seems to lead to other (performance) problems.
> >>
> >>
> >> [1]
> >>
> >> for file in *.shp ; do
> >>     for code in {0..20} ; do
> >>       if [[ $code = 0 ]] ; then
> >>         gdal_rasterize --debug on --config GDAL_CACHEMAX 1000 \
> >>           -ot byte -co compress=lzw -tr 2 2 -tap -l ${file%.shp} \
> >>           -burn $code -where CODE=\'$code\' \
> >>           $file ${file%.shp}_2m.tif>   ${file%.shp}_2m.log 2>&1
> >>       else
> >>         gdal_rasterize --debug on --config GDAL_CACHEMAX 1000 \
> >>           -l ${file%.shp} -burn $code -where CODE=\'$code\' \
> >>           $file ${file%.shp}_2m.tif>>  ${file%.shp}_2m.log 2>&1
> >>       fi
> >>     done
> >> done
> >>
> >>
> >> [2]
> >>
> >> $ head -90 uk001l_london_2m.log
> >> OGR: OGROpen(shpfiles/uk001l_london.shp/0x764610) succeeded as ESRI
> >> Shapefile.
> >> GDAL:
> >> GDALDriver::Create(GTiff,uk001l_london_2m.tif,64116,61850,1,Byte,0x764ee0)
> >> Shape: 149671 features read on layer 'uk001l_london'.
> >> GDAL: GDALClose(uk001l_london_2m.tif, this=0x782e00)
> >> GDAL: GDALDeregister_GTiff() called.
> >> OGR: OGROpen(shpfiles/uk001l_london.shp/0x2080610) succeeded as ESRI
> >> Shapefile.
> >> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x209feb0) succeeds as GTiff.
> >> 0...10...20...30...40...50...60.OGR:
> >> OGROpen(shpfiles/uk001l_london.shp/0x10c1610) succeeded as ESRI Shapefile.
> >> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x10e0eb0) succeeds as GTiff.
> >> .0...70..10.....2080.....30.90......Shape: 149671 features read on layer
> >> 'uk001l_london'.
> >> 40.GDAL: GDALClose(uk001l_london_2m.tif, this=0x209feb0)
> >> GDAL: GDALDeregister_GTiff() called.
> >> 100 - done.
> >> ..50..OGR: OGROpen(shpfiles/uk001l_london.shp/0x225e610) succeeded as
> >> ESRI Shapefile.
> >> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x227deb0) succeeds as GTiff.
> >> 0....6010....20.....3070.....OGR:
> >> OGROpen(shpfiles/uk001l_london.shp/0x1543610) succeeded as ESRI Shapefile.
> >> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x1562eb0) succeeds as GTiff.
> >> 0...10...2040.....3080.....50..40....90...ERROR 1: LZWDecode:Wrong
> >> length of decoded string: data probably corrupted at scanline 36908
> >> ERROR 1: TIFFReadEncodedStrip() failed.
> >>
> >> ERROR 1: IReadBlock failed at X offset 0, Y offset 36908
> >> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 36908
> >> Shape: 149671 features read on layer 'uk001l_london'.
> >> ..GDAL: GDALClose(uk001l_london_2m.tif, this=0x227deb0)
> >> GDAL: GDALDeregister_GTiff() called.
> >> 50...Shape: 149671 features read on layer 'uk001l_london'.
> >> .ERROR 1: LZWDecode:Wrong length of decoded string: data probably
> >> corrupted at scanline 36908
> >> ERROR 1: TIFFReadEncodedStrip() failed.
> >>
> >> ERROR 1: IReadBlock failed at X offset 0, Y offset 36908
> >> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 36908
> >> Shape: 149671 features read on layer 'uk001l_london'.
> >> GDAL: GDALClose(uk001l_london_2m.tif, this=0x10e0eb0)
> >> GDAL: GDALDeregister_GTiff() called.
> >> 100 - done.
> >> GDAL: GDALClose(uk001l_london_2m.tif, this=0x1562eb0)
> >> GDAL: GDALDeregister_GTiff() called.
> >> OGR: OGROpen(shpfiles/uk001l_london.shp/0xa21610) succeeded as ESRI
> >> Shapefile.
> >> GDAL: GDALOpen(uk001l_london_2m.tif, this=0xa40eb0) succeeds as GTiff.
> >> 0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
> >> ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
> >> ERROR 1: TIFFReadEncodedStrip() failed.
> >>
> >> ERROR 1: IReadBlock failed at X offset 0, Y offset 863
> >> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 863
> >> Shape: 149671 features read on layer 'uk001l_london'.
> >> GDAL: GDALClose(uk001l_london_2m.tif, this=0xa40eb0)
> >> GDAL: GDALDeregister_GTiff() called.
> >> OGR: OGROpen(shpfiles/uk001l_london.shp/0x1cd3610) succeeded as ESRI
> >> Shapefile.
> >> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x1cf2eb0) succeeds as GTiff.
> >> 0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
> >> ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
> >> ERROR 1: TIFFReadEncodedStrip() failed.
> >>
> >> ERROR 1: IReadBlock failed at X offset 0, Y offset 863
> >> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 863
> >> Shape: 149671 features read on layer 'uk001l_london'.
> >> GDAL: GDALClose(uk001l_london_2m.tif, this=0x1cf2eb0)
> >> GDAL: GDALDeregister_GTiff() called.
> >> OGR: OGROpen(shpfiles/uk001l_london.shp/0x1cc5610) succeeded as ESRI
> >> Shapefile.
> >> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x1ce4eb0) succeeds as GTiff.
> >> 0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
> >> ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
> >> ERROR 1: TIFFReadEncodedStrip() failed.
> >>
> >> ERROR 1: IReadBlock failed at X offset 0, Y offset 863
> >> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 863
> >> Shape: 149671 features read on layer 'uk001l_london'.
> >> GDAL: GDALClose(uk001l_london_2m.tif, this=0x1ce4eb0)
> >> GDAL: GDALDeregister_GTiff() called.
> >> OGR: OGROpen(shpfiles/uk001l_london.shp/0x172e610) succeeded as ESRI
> >> Shapefile.
> >> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x174deb0) succeeds as GTiff.
> >> 0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
> >> ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
> >> ERROR 1: TIFFReadEncodedStrip() failed.
> >>
> >> ERROR 1: IReadBlock failed at X offset 0, Y offset 863
> >> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 863
> >> Shape: 149671 features read on layer 'uk001l_london'.
> >> GDAL: GDALClose(uk001l_london_2m.tif, this=0x174deb0)
> >> GDAL: GDALDeregister_GTiff() called.
> >> OGR: OGROpen(shpfiles/uk001l_london.shp/0x1276610) succeeded as ESRI
> >> Shapefile.
> >> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x1295eb0) succeeds as GTiff.
> >> 0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
> >> ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
> >> ERROR 1: TIFFReadEncodedStrip() failed.
> >>
> >> ERROR 1: IReadBlock failed at X offset 0, Y offset 863
> >> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 863
> >> Shape: 149671 features read on layer 'uk001l_london'.
> >> GDAL: GDALClose(uk001l_london_2m.tif, this=0x1295eb0)
> >> GDAL: GDALDeregister_GTiff() called.
> >> OGR: OGROpen(shpfiles/uk001l_london.shp/0x1c0c610) succeeded as ESRI
> >> Shapefile.
> >> GDAL: GDALOpen(uk001l_london_2m.tif, this=0x1c2beb0) succeeds as GTiff.
> >> 0Warning 1: LZWDecode:LZWDecode: Strip 863 not terminated with EOI code
> >> ERROR 1: LZWDecode:Not enough data at scanline 863 (short 17574 bytes)
> >> ERROR 1: TIFFReadEncodedStrip() failed.
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >
>


From antonio.rocha at deimos.com.pt  Mon Dec  6 07:19:47 2010
From: antonio.rocha at deimos.com.pt (=?ISO-8859-1?Q?Ant=F3nio_Rocha?=)
Date: Mon Dec  6 07:19:48 2010
Subject: [gdal-dev] Error: EPSG code not recognized
In-Reply-To: <20101206121525.C340EE01ECC@lists.osgeo.org>
References: <20101206121525.C340EE01ECC@lists.osgeo.org>
Message-ID: <4CFCD4E3.8000304@deimos.com.pt>

Hi Jean-Claude

So, how can I know which EPSG CRS codes are use this projection?
Thanks
Antonio
>
> Message: 2
> Date: Mon, 06 Dec 2010 12:40:28 +0100
> From: Jean-Claude Repetto <jrepetto@free.fr>
> Subject: Re: [gdal-dev] Error: EPSG code not recognized
> To: gdal-dev@lists.osgeo.org
> Message-ID: <4CFCCBAC.5050005@free.fr>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> Le 06/12/2010 11:21, Ant?nio Rocha a ?crit :
>   
>> Greetings
>>
>> I'm using gdal15 and gdal16 and I'm trying to use gdalwarp with the
>> following command:
>> gdalwarp -s_srs EPSG:9823 -t_srs EPSG:3763 file.nc file.tif and I get
>> the error:
>> ERROR 6: EPSG PCS/GCS code 9823 not found in EPSG support files. Is this
>> a valid EPSG coordinate system?
>> ERROR 1: Translating source or target SRS failed:
>> EPSG:9823
>>
>> The thing is that this EPSG code exists and is this one:
>> http://www.remotesensing.org/geotiff/proj_list/equirectangular.html
>> Is this a bug? or is there other alternative?
>>
>> Thanks
>> Antonio R.
>>
>>     
>
> Hi Antonio,
>
> EPSG:9823 is not a coordinate reference system, it is only a projection 
> code.
>
> Jean-Claude
>
>
>
> ------------------------------
>
>
>   



__________ Information from ESET NOD32 Antivirus, version of virus signature database 5677 (20101206) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From peifer at gmx.eu  Mon Dec  6 07:59:52 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon Dec  6 08:02:40 2010
Subject: [gdal-dev] ERROR 1: LZWDecode:Wrong length of decoded string:
	data probably corrupted
In-Reply-To: <1291637710.4cfcd3cec1cfe@webmail.free.fr>
References: <4CFCA8FA.5050905@gmx.eu>
	<1291630764.4cfcb8ac55891@webmail.free.fr>
	<4CFCBE41.2010200@gmx.eu>
	<1291637710.4cfcd3cec1cfe@webmail.free.fr>
Message-ID: <4CFCDE48.8090108@gmx.eu>

On 06/12/2010 13:15, Even Rouault wrote:
> Selon Hermann Peifer<peifer@gmx.eu>:
>> Even,
>>
>> Thanks for the quick feedback.
>>
>> Just to clarify: last week, I compiled revision 21190 from
>> http://svn.osgeo.org/gdal/trunk/gdal, configured
>> --with-libtiff=internal.
> Hum OK so there's definitely a bug somewhere. Would be worth opening a ticket if
> you had a way of reproducing those errors. Ideally with a smaller shapefile.
>
> Would be interesting to see if it works better with another compression scheme,
> let's say DEFLATE.

Thanks for the hint with DEFLATE. And yes, I am working on a 64 bit 
Debian/Linux system.

As far as I can see: the LZW error only occurred while processing this 
one file, which also happens to be the biggest out of 231 shapefiles 
that I am handling in my current task. So it might be difficult to 
reproduce the error with a smaller file.

1 additional question, as I do not really understand the inner workings 
of gdal_rasterize:

Does it help at all what I did when trying to reduce the memory demand: 
to loop through the geometries by some CODE value? Does gdal_rasterize 
always load *all* the geometries into memory, independent of the -where 
filter ?

Hermann
From jrepetto at free.fr  Mon Dec  6 08:51:33 2010
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon Dec  6 08:51:38 2010
Subject: [gdal-dev] Error: EPSG code not recognized
In-Reply-To: <4CFCD4E3.8000304@deimos.com.pt>
References: <20101206121525.C340EE01ECC@lists.osgeo.org>
	<4CFCD4E3.8000304@deimos.com.pt>
Message-ID: <4CFCEA65.1080904@free.fr>

Le 06/12/2010 13:19, Ant?nio Rocha a ?crit :
> Hi Jean-Claude
>
> So, how can I know which EPSG CRS codes are use this projection?
> Thanks
> Antonio

You can look at http://www.spatialreference.org and find your projection.
From warmerdam at pobox.com  Mon Dec  6 10:01:39 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec  6 10:01:47 2010
Subject: [gdal-dev] Re: OpenCL, GDAL, and You
In-Reply-To: <7DE0E5A9710AFC4896275865DABC86DA24963D@005-TK5MPN1-002.MGDADSK.autodesk.com>
References: <88890516-6689-41C4-8577-1524F699AF12@pricepages.org>
	<4CFC318D.1010502@pobox.com> 
	<7DE0E5A9710AFC4896275865DABC86DA24963D@005-TK5MPN1-002.MGDADSK.autodesk.com>
Message-ID: <4CFCFAD3.4080709@pobox.com>

On 10-12-06 07:10 AM, Konstantin Baumann wrote:
> Hi,
>
> what benefit/improvement would the OpenCL integration bring to GDAL?
> Additional functionality or a speedup of existing functions? Probably only
> operations on images and/or rasters are supported; reprojection/warping and
> filtering would be good candidates, right? What concrete operations would be
> supported?

Konstantin,

The OpenCL integration is currently only used to accelerate the warp engine
(gdalwarp, etc).  There are some other areas of GDAL that could potentially
use OpenCL facilities too but no further work has been done.

I will note that for the expensive resamplers Seth has seen very substantial
speedups.  The preliminary plan for Seth's project is documented at:

   http://trac.osgeo.org/gdal/wiki/OpenCLIntegration

We really need to rework that to include "findings and current status".

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From seth at pricepages.org  Mon Dec  6 09:50:04 2010
From: seth at pricepages.org (Seth Price)
Date: Mon Dec  6 10:20:09 2010
Subject: [gdal-dev] Re: OpenCL, GDAL, and You
In-Reply-To: <7DE0E5A9710AFC4896275865DABC86DA24963D@005-TK5MPN1-002.MGDADSK.autodesk.com>
References: <88890516-6689-41C4-8577-1524F699AF12@pricepages.org>
	<4CFC318D.1010502@pobox.com>
	<7DE0E5A9710AFC4896275865DABC86DA24963D@005-TK5MPN1-002.MGDADSK.autodesk.com>
Message-ID: <968FFFE7-61FD-4EFF-9E19-E93836295B10@pricepages.org>

Over the summer I rewrote the warper to use OpenCL. There was a 2x to  
50x speedup. Here is a description of what I did:
http://osgeo-org.1803224.n2.nabble.com/gdal-dev-gdalwarp-OpenCL-Performance-Week-9-td5341226.html

~Seth



On Dec 6, 2010, at 5:10 AM, Konstantin Baumann wrote:

> Hi,
>
> what benefit/improvement would the OpenCL integration bring to GDAL?  
> Additional functionality or a speedup of existing functions?  
> Probably only operations on images and/or rasters are supported;  
> reprojection/warping and filtering would be good candidates, right?  
> What concrete operations would be supported?
>
> Kosta
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org 
> ] On Behalf Of Frank Warmerdam (External)
> Sent: Monday, December 06, 2010 1:43 AM
> To: Seth Price
> Cc: Philippe Vachon; gdal-dev; Wolf Bergenheim
> Subject: [gdal-dev] Re: OpenCL, GRASS, GDAL, and You
>
> On 10-09-23 10:09 AM, Seth Price wrote:
>> Hey all, I was just wondering if there was any progress in  
>> integrating
>> the OpenCL code into trunk in each project? I haven't heard anything,
>> but it would be a shame to just leave the code sit, or wait until the
>> code branches have significantly diverged.
>> ~Seth
>>
>
> Seth,
>
> Last week I went out and bought a new AMD/ATI machine in the hopes  
> (amoung
> other goals) that OpenCL would work on it with the ATI OpenCL SDK.
> Unfortunately I have discovered that the ATI Radion 4200 HD is not  
> supported
> for OpenCL stuff.  :-(
>
> Nevertheless, with some persistance I was able to build the ATI SDK,  
> and
> configure GDAL to build against it.  So I have integrated OpenCL  
> support
> in trunk.  It is not enabled by default, but you can enable it with  
> the
> --with-opencl directive.  If the include files and libraries are in a
> non-standard location you can also use the --with-opencl-include and
> --with-opencl-lib directives to configure like this:
>
>     --with-opencl \
>     --with-opencl-include=/home/warmerda/pkg/ati-stream-sdk-v2.2- 
> lnx64/include \
>
> --with-opencl-lib="-L/home/warmerda/pkg/ati-stream-sdk-v2.2-lnx64/ 
> lib/x86_64
> -lOpenCL" \
>
> I ran into a few issues:
>
> 1) It seems the include file from ATI is <cl/opencl.h> not <OpenCL/ 
> OpenCL.h>
> as it is on the Mac.  I've put a platform dependent ifdef but I  
> don't now
> what the situation will be on other machines.
>
> 2) In your get_device() function you were passing NULL in for the  
> platform.
> The online docs indicate this as an option but warn that behavior  
> then is
> platform dependent.  The ATI SDK just fails with an invalid platform  
> error.
> So I updated the code to fetch a platform id and use that.
>
> 3) On my system it falls back to using the CPU but it turns out the  
> CPU
> does not offer "image" support in my case.  I added some extra logic  
> to
> look for this capability so a better error could be reported.
>
> 4) I restructured things a bit so that the OpenCL warper case can  
> return
> CE_Warning to indicate to the high level warper that OpenCL should be
> skipped and other mechanisms used.  That is what it does not if it  
> fails
> to find a suitable device, or some of the other specific checks.
>
> 5) I made a few changes to use CPLDebug instead of printf for debug  
> output.
>
> I haven't tried this yet on your Mac.  I avoided using the account you
> kindly offered because I find the Mac is often a perverse build  
> environment
> and I didn't want to establish the "norm" based on it.  I might try  
> it out
> tonight though.
>
> I have also not yet tried it on windows, and likely won't in the  
> near future.
> Perhaps someone else will pick up the ball there.  The code itself  
> just
> depends on having HAVE_OPENCL defined at least in the alg directory  
> and
> of course appropriate include and link options.
>
> (cc:ed to the list so everyone is aware of the availability).
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for  
> Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101206/02ecbd8a/attachment.html
From ludovic.mercier at gmail.com  Mon Dec  6 11:01:56 2010
From: ludovic.mercier at gmail.com (Ludovic Mercier)
Date: Mon Dec  6 11:57:59 2010
Subject: [gdal-dev] patch for ISIS2 driver
Message-ID: <4CFD08F4.6080802@gmail.com>

Hi,

i have a patch for gdal 1.7.3 to improve isis2 driver.
The patch had
* writing functionality for QUBE object
* grab null value
* improve the type reading
* can read qube with back plane, side plane and bottom plane
* can read a file with label detached or attached.

and i have modify nasakeyword handler to reduce sensibility of parser to 
little error on comment. (Like if we have char after end comment.)

but i have rewrite/move a lot of lines... I use this patch for a 
research project from one year ago. I work on hyperspectral data with 
OTB library.

I think is it possible to easily merge pdsdataset.cpp and isis2dataset.cpp
pdsdataset work on IMAGE tag and isis2 on QUBE tag but it is the same 
workflow for all object (QUBE, IMAGE or SPECTRAL_QUBE)

Warning for writing no geographical information are writing now, and 
create_copy is not implemented.

Ludovic.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdal-1.7.3-lpg-613.patch
Type: text/x-patch
Size: 48757 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101206/ccd94c43/gdal-1.7.3-lpg-613-0001.bin
From Chris.Barker at noaa.gov  Mon Dec  6 12:14:58 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Mon Dec  6 12:15:02 2010
Subject: [gdal-dev] Building GDAL 1.7.3 Python bindings
In-Reply-To: <AANLkTi=g5fU99KDSfDi31+ssZmS3UjrHYV1nO_+awO55@mail.gmail.com>
References: <AANLkTi=g5fU99KDSfDi31+ssZmS3UjrHYV1nO_+awO55@mail.gmail.com>
Message-ID: <4CFD1A12.8050507@noaa.gov>

On 12/3/10 6:26 PM, Brian Wilson wrote:
> Greetings, I am looking for some suggestions on how to build the
> python bindings for the latest gdal sources (1.7.3) for Windows.

I haven't done it for a while, but a few notes that might help get you 
moving:

> Environment: Windows 7, Visual Studio 2010, Python 2.5

I'm pretty sure the standard (python,org) build of python 2.5 was build 
with  Visual Studio 2003, and you need to build extensions with that 
same compiler version (or at least the same run-time libraries). So you 
need either VS2003 or you can also do it with mingw, with a few tweaks 
-- do a bit of googling to see how.

If you're using the python provided by ESRI, I have no idea, but it 
seems likely that it's the python,org build.

> I set up nmake.opt including PYDIR and PY_INST_DIR. I can't see
> anywhere those are USED but I followed docs and set them
> appropriately.  (C:\Python25)

In general, you want to build python extensions with python's distutils, 
which means using:

python setup.py build

The setup.py file is in "swig\python"

The idea here is that python's distutils knows how python was built, and 
will set up the compiler to build your extension in a compatible way.

> I looked at I looked at http://pypi.python.org/pypi/GDAL/ which has
> lovely and usable Linux instructions but I am currently trapped in a
> Windows world at my otherwise wonderful day job.

it's worth reading those anyway -- distutils is pretty much the same on 
all platforms.

> I suspect I need to do something with swig, which I downloaded and
> installed, but the "Windows" notes basically say "you should never
> have to do this".

the swig-generated bindings should be delivered with the source, so 
that's right, you shouldn't ahve to run swig unless you are changin the 
source and need to re-generate the binding code.

> I am sorry this email is long, but I have had plenty of time to work
> on building GDAL today while waiting for fragile and slow ESRI tools
> to run, really motivating me to try to use GDAL + Python.

I hope you get it working.

The state of Windows binaries has been a bit of a mess for a while, but 
what with all the different python versions, compiler versions and 
semi-proprietary drivers, it's a difficult problem!


HTH,

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From ludovic.mercier at gmail.com  Mon Dec  6 09:53:08 2010
From: ludovic.mercier at gmail.com (ludovic)
Date: Mon Dec  6 12:54:43 2010
Subject: [gdal-dev] Re: several No data value
In-Reply-To: <4CF95BAD.40705@pobox.com>
References: <4CF7A06A.7020701@gmail.com> <4CF95BAD.40705@pobox.com>
Message-ID: <a8b5a32e-ca93-406a-b4cf-1c53150b00d0@o14g2000prn.googlegroups.com>


Frank, thanks for your response :

On 3 d?c, 22:05, Frank Warmerdam <warmer...@pobox.com> wrote:
>
> GDAL only supports single nodata values as part of the data model.  You
> can add arbitrary metadata describing other nodata values, but generally
> GDAL itself and other client software won't realize the significance of
> these other values.

Ok one data value is not a problem for my data if i can "merge" all
invalid values.
For this i thought modify the driver to add a parameter flag () :
A) By default the behaviour will be the standard gdal process : only
one null value
B) if the parameter flag of this driver is set, then all invalid value
is replaced by null standard value
in the dataset.
My question is : is it possible to modify the driver to have this
behaviour ?
It is not a problem for me to create a patch but i don't know is it
possible to "overwrite" (or "change") the gdal read function in a
driver ?

If is the reading behaviour of gdal can't be changed in a driver, too
bad ! I would do this has a higher level software.

Best regards

Ludovic.
From even.rouault at mines-paris.org  Mon Dec  6 13:41:17 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Dec  6 13:40:53 2010
Subject: [gdal-dev] ERROR 1: LZWDecode:Wrong length of decoded string:
	data probably corrupted
In-Reply-To: <4CFCDE48.8090108@gmx.eu>
References: <4CFCA8FA.5050905@gmx.eu>
	<1291637710.4cfcd3cec1cfe@webmail.free.fr>
	<4CFCDE48.8090108@gmx.eu>
Message-ID: <201012061941.17704.even.rouault@mines-paris.org>


> Does it help at all what I did when trying to reduce the memory demand:
> to loop through the geometries by some CODE value? Does gdal_rasterize
> always load *all* the geometries into memory, independent of the -where
> filter ?

It will only load the geometries that match the -where filter, so that helps 
reducing the memory demand

> 
> Hermann
From even.rouault at mines-paris.org  Mon Dec  6 13:56:27 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Dec  6 13:56:03 2010
Subject: [gdal-dev] patch for ISIS2 driver
In-Reply-To: <4CFD08F4.6080802@gmail.com>
References: <4CFD08F4.6080802@gmail.com>
Message-ID: <201012061956.28128.even.rouault@mines-paris.org>

Ludovic,

would you mind opening a ticket in the GDAL trac with your patch attached so 
it doesn't get lost ?

I see that you've cc'ed Robert Soricone. Does this mean that he or Trent Hare 
have already reviewed the patch ?

Some links to public datasets if available would be helpful for testing I 
think.

Best regards,

Even

Le lundi 06 d?cembre 2010 17:01:56, Ludovic Mercier a ?crit :
> Hi,
> 
> i have a patch for gdal 1.7.3 to improve isis2 driver.
> The patch had
> * writing functionality for QUBE object
> * grab null value
> * improve the type reading
> * can read qube with back plane, side plane and bottom plane
> * can read a file with label detached or attached.
> 
> and i have modify nasakeyword handler to reduce sensibility of parser to
> little error on comment. (Like if we have char after end comment.)
> 
> but i have rewrite/move a lot of lines... I use this patch for a
> research project from one year ago. I work on hyperspectral data with
> OTB library.
> 
> I think is it possible to easily merge pdsdataset.cpp and isis2dataset.cpp
> pdsdataset work on IMAGE tag and isis2 on QUBE tag but it is the same
> workflow for all object (QUBE, IMAGE or SPECTRAL_QUBE)
> 
> Warning for writing no geographical information are writing now, and
> create_copy is not implemented.
> 
> Ludovic.
From even.rouault at mines-paris.org  Mon Dec  6 13:59:35 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Dec  6 13:59:10 2010
Subject: [gdal-dev] Multipart to singlepart
In-Reply-To: <1291636468236-5807508.post@n2.nabble.com>
References: <1291636468236-5807508.post@n2.nabble.com>
Message-ID: <201012061959.35468.even.rouault@mines-paris.org>

Le lundi 06 d?cembre 2010 12:54:28, iomeneandrei a ?crit :
> Hi all,
> is there in OGR a command that I can use to convert multipart polygons in
> singleparts?

None that I am aware of, but if you have some scripting/programming abilities, 
you could do that by using the OGR API.

> 
> Thank you,
> 
> a
> 
> -----
> Andrea Borruso
> 
> ----------------------------------------------------
> email: aborruso@tin.it
> website: http://blog.spaziogis.it
> my 2.0 life: http://aborruso.spaziogis.it
> feed: http://feeds2.feedburner.com/Tanto
> 38? 7' 48" N, 13? 21' 9" E
> ----------------------------------------------------
From warmerdam at pobox.com  Mon Dec  6 14:03:35 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec  6 14:03:44 2010
Subject: [gdal-dev] Multipart to singlepart
In-Reply-To: <1291636468236-5807508.post@n2.nabble.com>
References: <1291636468236-5807508.post@n2.nabble.com>
Message-ID: <4CFD3387.8050802@pobox.com>

On 10-12-06 06:54 AM, iomeneandrei wrote:
>
> Hi all,
> is there in OGR a command that I can use to convert multipart polygons in
> singleparts?

Andrea,

At the API or scripting level there is the OGRGeometryFactory::forceToPolygon()
method to try and convert a multipolygon to a simple polygon.  I am not
aware of a way to do this from the commandline utilities.

/************************************************************************/
/*                           forceToPolygon()                           */
/************************************************************************/

/**
  * \brief Convert to polygon.
  *
  * Tries to force the provided geometry to be a polygon.  Currently
  * this just effects a change on multipolygons.  The passed in geometry is
  * consumed and a new one returned (or potentially the same one).
  *
  * @param poGeom the input geometry - ownership is passed to the method.
  * @return new geometry.
  */

OGRGeometry *OGRGeometryFactory::forceToPolygon( OGRGeometry *poGeom )

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Mon Dec  6 14:56:14 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Dec  6 14:55:49 2010
Subject: [gdal-dev] Error reading long numbers as integer
In-Reply-To: <201012061247.47627.Ralf.Suhr@itc-halle.de>
References: <201012061247.47627.Ralf.Suhr@itc-halle.de>
Message-ID: <201012062056.14710.even.rouault@mines-paris.org>

Ralf,
> 
> I have created a ticket for the NAS reader. Long numbers (13 digits) are
> read as integer. Maybe there are more drivers who have the same trouble.

Yes, this is an issue that can be potentially found in other drivers. The 
situation could improve if/when RFC 31 / OGR 64bit integer is adopted.

For the time being, I've made a change in the GML driver so that it fallbacks 
to Real when it detects an integer that cannot fit into 32bit. Not ideal, but 
better than arbitrary truncation.

> 
> I have tested some workarounds. Changing the attribut definition in gfs
> file is successful, when destination driver is PGdump or Postgresql
> (create mode).

Which change did you make exactly ? Change from Integer to Real ?

> With Postgresql driver as destination ogr2ogr convert the
> 13 digits number always to integer in append mode and ignoring table
> definition.

I'm a bit skeptical about that one. Which exact commands did you use ?

> I tested with gdal SVN21189.
> 
> Gr
> Ralf
From thare at usgs.gov  Mon Dec  6 14:50:08 2010
From: thare at usgs.gov (Trent M Hare)
Date: Mon Dec  6 15:05:13 2010
Subject: [gdal-dev] Re: patch for ISIS2 driver
In-Reply-To: <4CFD08F4.6080802@gmail.com>
References: <4CFD08F4.6080802@gmail.com>
Message-ID: <OF557F9F13.44CC471E-ON072577F1.0067D373-072577F1.006CF619@usgs.gov>

Ludovic,
        This is excellent news and again any improvement to the original 
code is welcome. I actually am in the process of how to map the projection 
information for a potential ISIS3 writer. I also have a Python PDS label 
creation routine that I was thinking about pushing into library properly 
(instead of just using a Python script). It would also make sense to merge 
the PDS and ISIS2 code set however there are subtitle differences in both 
formats that we must be careful of.

Before we can incorporate your changes into GDAL, I would like to see 
projection export support implemented also. The main reason for these 
readers was to help propagate the projection, so I would want to see this 
working both directions. I will see where it stands and if I can help. I'm 
not sure how to implement "create_copy" so we might need help from the 
GDAL team.

Let me check out your patch and test some images. If all looks good we ask 
the GDAL team to also help incorporate your patch. Also there is another 
PDS fix that needs to be incorporated. Maybe you might have time to see if 
it would be a quick fix since you have been working wit the code recently 
(please see issue below). If you don't have time please let me know. I am 
also curious how you managed to support ISIS2 side planes? This capability 
was removed from ISIS3 due to lack of use and complexity. 

Thanks again for your willingness to share your improvements. Just out of 
curiosity - what facility are you working with?

I will be in touch shortly.

Regards,
Trent

----------
Comments
i have a patch for gdal 1.7.3 to improve isis2 driver.
* writing functionality for QUBE object  - again I would like to see an 
attempt at supporting projections also - I will help.
* grab null value   - What does this mean as support for a single NULL 
value was there? Does this address the fact that all ISIS2, PDS, and ISIS3 
can support multiple NULL values? 
* improve the type reading - great
* can read qube with back plane, side plane and bottom plane - great again 
sI will need to see how you supported side/bottom planes. Do you make a 
new file? 
* can read a file with label detached or attached. - I thought this was 
already implemented? Maybe there were some fixes though. 

----------

New PDS bug which I could use help with -- I have recently seen a new 
label from the LOLA team that allows one label to point to two different 
image types. This breaks the simple GDAL parser. 

In these LOLA labels there is a new section which wraps the file 
description.
OBJECT                    = UNCOMPRESSED_FILE
...
END_OBJECT                = UNCOMPRESSED_FILE
from: http://imbrium.mit.edu/DATA/LOLA_GDR/CYLINDRICAL/IMG/LDEC_16.LBL

and then for a compressed file. I know the PDS reader doesn't support JP2s 
but it would be nice (or at least report an appropriate warning):
OBJECT                    = COMPRESSED_FILE
  FILE_NAME                 = "LDEC_16.JP2"
  RECORD_TYPE             = UNDEFINED
  FILE_RECORDS            = UNK
  ENCODING_TYPE           = "JP2"
  INTERCHANGE_FORMAT      = BINARY
  UNCOMPRESSED_FILE_NAME  = "LDEC_16.IMG"
  REQUIRED_STORAGE_BYTES  = "14831085"
  ^DESCRIPTION            = "JP2INFO.TXT"
END_OBJECT                = COMPRESSED_FILE
http://imbrium.mit.edu/DATA/LOLA_GDR/CYLINDRICAL/JP2/LDEC_16_JP2.LBL

Unfortunately I have seen these two sections in the same label! I'm not 
sure how to handle that. I guess just pick up the first one that works. 
And again, it will only be the "UNCOMPRESSED_FILE" section for now.






From:
Ludovic Mercier <ludovic.mercier@gmail.com>
To:
gdal-dev@lists.osgeo.org
Cc:
thare@usgs.gov, rsoricone@usgs.gov
Date:
12/06/2010 09:02 AM
Subject:
patch for ISIS2 driver



Hi,

i have a patch for gdal 1.7.3 to improve isis2 driver.
The patch had
* writing functionality for QUBE object
* grab null value
* improve the type reading
* can read qube with back plane, side plane and bottom plane
* can read a file with label detached or attached.

and i have modify nasakeyword handler to reduce sensibility of parser to 
little error on comment. (Like if we have char after end comment.)

but i have rewrite/move a lot of lines... I use this patch for a 
research project from one year ago. I work on hyperspectral data with 
OTB library.

I think is it possible to easily merge pdsdataset.cpp and isis2dataset.cpp
pdsdataset work on IMAGE tag and isis2 on QUBE tag but it is the same 
workflow for all object (QUBE, IMAGE or SPECTRAL_QUBE)

Warning for writing no geographical information are writing now, and 
create_copy is not implemented.

Ludovic.

[attachment "gdal-1.7.3-lpg-613.patch" deleted by Trent M 
Hare/GD/USGS/DOI] 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101206/bdeee151/attachment-0001.html
From brian.walawender at noaa.gov  Mon Dec  6 15:29:24 2010
From: brian.walawender at noaa.gov (Brian Walawender)
Date: Mon Dec  6 15:29:47 2010
Subject: [gdal-dev] GDAL/OGR Python Question
In-Reply-To: <4CF95303.5020702@pobox.com>
References: <AANLkTikk-+hUY=r7E9W8f6TZxpTNo2uS8aoH2=Hdo8=h@mail.gmail.com>
	<4CF95303.5020702@pobox.com>
Message-ID: <AANLkTi=HWnSyPnppHbT4-9V5wi3+G2PKTKB8PzfT3P5V@mail.gmail.com>

Frank,

Thanks for tip.  I was able to rasterize my polygon and used that to
calculate my sum.  Very  fast.

bw

On Fri, Dec 3, 2010 at 2:28 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:

> Brian Walawender wrote:
>
>> Hello,
>>
>> I am looking for some assistance in optimizing a section of code for
>> faster performance.   Here is my problem, I have GeoTiff that contains 1 km
>> x 1 km population data over an area roughly the size of the continental US
>> (7020 x 3000).   I am trying to calculate the population within a polygon.
>>  I am doing this by finding the extent of the polygon and reading in that
>> section of the GeoTiff  using the ReadAsArray function.  At this point I can
>> quickly calculate the population within the extent by using the numpy sum.
>>  However, the only way I can figure to sum the points within the polygon is
>> to iterate over the array checking each point using ogr.  If the polygon is
>> very large, this can take an extended period of time.  Is there a faster way
>> to calculate the population within a large polygon?  My code and some sample
>> output is below.
>>
>
> Brian,
>
> I think you would be better off rasterizing your mask polygon and operating
> on the masked raster.  It might be sufficient to set all cells outside the
> region to 0 in your target raster if you are just summing.  Or you might
> generate the mask separately and just check it instead of doing an
> expensive point in polygon test.
>
> The test script for the rasterize function is available at the following
> url and might provide a hint of how to use it.
>
>  http://svn.osgeo.org/gdal/trunk/autotest/alg/rasterize.py
>
> You can also find more about the rasterize api from it's C++ docs at:
>
>  http://www.gdal.org/gdal__alg_8h.html#50caf4bc34703f0bcf515ecbe5061a0a
>
> Good luck,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>


-- 

Brian Walawender

Technique Development Meteorologist

Scientific Services Division - Central Region Headquarters

816-268-3114 - Office

816-805-6497 - Cell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101206/ae5100fb/attachment.html
From aborruso at tin.it  Mon Dec  6 17:20:38 2010
From: aborruso at tin.it (iomeneandrei)
Date: Mon Dec  6 17:20:40 2010
Subject: [gdal-dev] Re: Multipart to singlepart
In-Reply-To: <4CFD3387.8050802@pobox.com>
References: <1291636468236-5807508.post@n2.nabble.com>
	<4CFD3387.8050802@pobox.com>
Message-ID: <1291674038143-5809639.post@n2.nabble.com>


Hi Frank,

Frank Warmerdam wrote:
> 
> At the API or scripting level there is the
> OGRGeometryFactory::forceToPolygon()
> method to try and convert a multipolygon to a simple polygon.  
> 
I will try using OGR API. I will be slow, but I hope I'll be able to do it.

Thank you very much,

a


-----
Andrea Borruso

----------------------------------------------------
email: aborruso@tin.it
website: http://blog.spaziogis.it
my 2.0 life: http://aborruso.spaziogis.it
feed: http://feeds2.feedburner.com/Tanto
38? 7' 48" N, 13? 21' 9" E
----------------------------------------------------
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Multipart-to-singlepart-tp5807508p5809639.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From antonio.rocha at deimos.com.pt  Mon Dec  6 17:34:59 2010
From: antonio.rocha at deimos.com.pt (antonio.rocha@deimos.com.pt)
Date: Mon Dec  6 17:34:52 2010
Subject: [gdal-dev] Re: Error: EPSG code not recognized
Message-ID: <20101206233459.90363ci49e9wiyvn@www.deimos.com.pt>

Greetings

following Jean-Claud message  
(http://lists.osgeo.org/pipermail/gdal-dev/2010-December/026983.html)  
I identified 2 EPSG's with Equidistant Cylindrical:
EPSG 3786 and EPSG 32663. Does anyone, that has used ECWMF ERA Interim  
dataset, can tell me which one is used by ECMWF? (I asked to ERA  
interim help desk and they don't know)
Thanks
Antonio
From even.rouault at mines-paris.org  Mon Dec  6 18:12:03 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Dec  6 18:12:12 2010
Subject: [gdal-dev] Re: OpenCL, GDAL, and You
In-Reply-To: <968FFFE7-61FD-4EFF-9E19-E93836295B10@pricepages.org>
References: <88890516-6689-41C4-8577-1524F699AF12@pricepages.org>
	<7DE0E5A9710AFC4896275865DABC86DA24963D@005-TK5MPN1-002.MGDADSK.autodesk.com>
	<968FFFE7-61FD-4EFF-9E19-E93836295B10@pricepages.org>
Message-ID: <201012070012.03183.even.rouault@mines-paris.org>

Hi Seth,

I gave a try to Frank's integration of your work with my ATI Radeon HD 5400. I 
got the ATI SDK 2.2 correctly installed with latest ATI drivers (10-11). The 
few OpenCL demos provided with the SDK I tried work on the GPU device.

(Note: "thanks" to the errors bellow, I've made a few cleanups in 
http://trac.osgeo.org/gdal/changeset/21205 to improve error reporting and 
clean-up in case of error. I also added missing initialization of 2 members of 
the warper struct)

Then I tried a simple warp and I got the following error :

"""
0ERROR 1: Error: Failed to build program executable!
Build Log:
Warning: invalid option: -cl-fast-relaxed-math

Warning: invalid option: -Werror

/tmp/OCL3QLDj2.cl(193): warning: double-precision constant is represented as
          single-precision constant because double is not enabled
  return (float2)(-99.0, -99.0);
                   ^

/tmp/OCL3QLDj2.cl(193): warning: double-precision constant is represented as
          single-precision constant because double is not enabled
  return (float2)(-99.0, -99.0);
                          ^

/tmp/OCL3QLDj2.cl(195): error: bad argument type to opencl image op: expected
          sampler_t
  CLK_NORMALIZED_COORDS_TRUE |
  ^

1 error detected in the compilation of "/tmp/OCL3QLDj2.cl".

ERROR 1: Error at file gdalwarpkernel_opencl.c line 2228: 
CL_BUILD_PROGRAM_FAILURE
""""

Hum, then I looked at similar code in the neighbourhood and I came with the 
following change that solves the compilation. It is not commited yet, does it 
look ok to you ?

Index: alg/gdalwarpkernel_opencl.c
===================================================================
--- alg/gdalwarpkernel_opencl.c	(r?vision 21205)
+++ alg/gdalwarpkernel_opencl.c	(copie de travail)
@@ -724,13 +724,13 @@
     // Check & return when the thread group overruns the image size
     "if (nDstX >= iDstWidth || nDstY >= iDstHeight)\n"
         "return (float2)(-99.0, -99.0);\n"
+
+    "const sampler_t samp =  CLK_NORMALIZED_COORDS_TRUE |\n"
+                            "CLK_ADDRESS_CLAMP_TO_EDGE |\n"
+                            "CLK_FILTER_LINEAR;\n"
+
+    "float4  fSrcCoords = read_imagef(srcCoords,samp,fDst);\n"
     
-    "float4  fSrcCoords = read_imagef(srcCoords,\n"
-                                     "CLK_NORMALIZED_COORDS_TRUE |\n"
-                                        "CLK_ADDRESS_CLAMP_TO_EDGE |\n"
-                                        "CLK_FILTER_LINEAR,\n"
-                                     "fDst);\n"
-    
     "return (float2)(fSrcCoords.x, fSrcCoords.y);\n"
 "}\n";

     
After solving the compilation error, I'm stuck with  :

"""
0ERROR 1: Error at file gdalwarpkernel_opencl.c line 1391: 
CL_INVALID_IMAGE_SIZE
ERROR 1: Error at file gdalwarpkernel_opencl.c line 1391: CL_INVALID_IMAGE_SIZE
ERROR 1: Error at file gdalwarpkernel_opencl.c line 2292: CL_INVALID_IMAGE_SIZE
ERROR 1: Error at file gdalwarpkernel_opencl.c line 1391: CL_INVALID_IMAGE_SIZE
ERROR 1: OpenCL routines reported failure (-40) on line 2570.
"""

The revelant line is :
"""
        //Make a fake image so we don't have a NULL pointer
        (*srcImag) = clCreateImage2D(warper->context, CL_MEM_READ_ONLY, 
&imgFmt,
                                     1, 1, sz, NULL, &err);
        handleErr(err);
"""

Any ideas ? Did you try with ATI or NVidia cards ?

I've attached the output of CLInfo if it can help.

Best regards,

Even

Le lundi 06 d?cembre 2010 15:50:04, Seth Price a ?crit :
> Over the summer I rewrote the warper to use OpenCL. There was a 2x to
> 50x speedup. Here is a description of what I did:
> http://osgeo-org.1803224.n2.nabble.com/gdal-dev-gdalwarp-OpenCL-Performance
> -Week-9-td5341226.html
> 
> ~Seth
> 
> On Dec 6, 2010, at 5:10 AM, Konstantin Baumann wrote:
> > Hi,
> > 
> > what benefit/improvement would the OpenCL integration bring to GDAL?
> > Additional functionality or a speedup of existing functions?
> > Probably only operations on images and/or rasters are supported;
> > reprojection/warping and filtering would be good candidates, right?
> > What concrete operations would be supported?
> > 
> > Kosta
> > 
> > -----Original Message-----
> > From: gdal-dev-bounces@lists.osgeo.org
> > [mailto:gdal-dev-bounces@lists.osgeo.org ] On Behalf Of Frank Warmerdam
> > (External)
> > Sent: Monday, December 06, 2010 1:43 AM
> > To: Seth Price
> > Cc: Philippe Vachon; gdal-dev; Wolf Bergenheim
> > Subject: [gdal-dev] Re: OpenCL, GRASS, GDAL, and You
> > 
> > On 10-09-23 10:09 AM, Seth Price wrote:
> >> Hey all, I was just wondering if there was any progress in
> >> integrating
> >> the OpenCL code into trunk in each project? I haven't heard anything,
> >> but it would be a shame to just leave the code sit, or wait until the
> >> code branches have significantly diverged.
> >> ~Seth
> > 
> > Seth,
> > 
> > Last week I went out and bought a new AMD/ATI machine in the hopes
> > (amoung
> > other goals) that OpenCL would work on it with the ATI OpenCL SDK.
> > Unfortunately I have discovered that the ATI Radion 4200 HD is not
> > supported
> > for OpenCL stuff.  :-(
> > 
> > Nevertheless, with some persistance I was able to build the ATI SDK,
> > and
> > configure GDAL to build against it.  So I have integrated OpenCL
> > support
> > in trunk.  It is not enabled by default, but you can enable it with
> > the
> > --with-opencl directive.  If the include files and libraries are in a
> > non-standard location you can also use the --with-opencl-include and
> > 
> > --with-opencl-lib directives to configure like this:
> >     --with-opencl \
> >     --with-opencl-include=/home/warmerda/pkg/ati-stream-sdk-v2.2-
> > 
> > lnx64/include \
> > 
> > --with-opencl-lib="-L/home/warmerda/pkg/ati-stream-sdk-v2.2-lnx64/
> > lib/x86_64
> > -lOpenCL" \
> > 
> > I ran into a few issues:
> > 
> > 1) It seems the include file from ATI is <cl/opencl.h> not <OpenCL/
> > OpenCL.h>
> > as it is on the Mac.  I've put a platform dependent ifdef but I
> > don't now
> > what the situation will be on other machines.
> > 
> > 2) In your get_device() function you were passing NULL in for the
> > platform.
> > The online docs indicate this as an option but warn that behavior
> > then is
> > platform dependent.  The ATI SDK just fails with an invalid platform
> > error.
> > So I updated the code to fetch a platform id and use that.
> > 
> > 3) On my system it falls back to using the CPU but it turns out the
> > CPU
> > does not offer "image" support in my case.  I added some extra logic
> > to
> > look for this capability so a better error could be reported.
> > 
> > 4) I restructured things a bit so that the OpenCL warper case can
> > return
> > CE_Warning to indicate to the high level warper that OpenCL should be
> > skipped and other mechanisms used.  That is what it does not if it
> > fails
> > to find a suitable device, or some of the other specific checks.
> > 
> > 5) I made a few changes to use CPLDebug instead of printf for debug
> > output.
> > 
> > I haven't tried this yet on your Mac.  I avoided using the account you
> > kindly offered because I find the Mac is often a perverse build
> > environment
> > and I didn't want to establish the "norm" based on it.  I might try
> > it out
> > tonight though.
> > 
> > I have also not yet tried it on windows, and likely won't in the
> > near future.
> > Perhaps someone else will pick up the ball there.  The code itself
> > just
> > depends on having HAVE_OPENCL defined at least in the alg directory
> > and
> > of course appropriate include and link options.
> > 
> > (cc:ed to the list so everyone is aware of the availability).
> > 
> > Best regards,
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
Number of platforms:				 1
  Platform Profile:				 FULL_PROFILE
  Platform Version:				 OpenCL 1.1 ATI-Stream-v2.2 (302)
  Platform Name:					 ATI Stream
  Platform Vendor:				 Advanced Micro Devices, Inc.
  Platform Extensions:			 cl_khr_icd cl_amd_event_callback


  Platform Name:					 ATI Stream
Number of devices:				 2
  Device Type:					 CL_DEVICE_TYPE_CPU
  Device ID:					 4098
  Max compute units:				 4
  Max work items dimensions:			 3
    Max work items[0]:				 1024
    Max work items[1]:				 1024
    Max work items[2]:				 1024
  Max work group size:				 1024
  Preferred vector width char:			 16
  Preferred vector width short:			 8
  Preferred vector width int:			 4
  Preferred vector width long:			 2
  Preferred vector width float:			 4
  Preferred vector width double:		 0
  Max clock frequency:				 1200Mhz
  Address bits:					 64
  Max memory allocation:			 1073741824
  Image support:				 No
  Max size of kernel argument:			 4096
  Alignment (bits) of base address:		 1024
  Minimum alignment (bytes) for any datatype:	 128
  Single precision floating point capability
    Denorms:					 Yes
    Quiet NaNs:					 Yes
    Round to nearest even:			 Yes
    Round to zero:				 Yes
    Round to +ve and infinity:			 Yes
    IEEE754-2008 fused multiply-add:		 No
  Cache type:					 Read/Write
  Cache line size:				 64
  Cache size:					 32768
  Global memory size:				 3221225472
  Constant buffer size:				 65536
  Max number of constant args:			 8
  Local memory type:				 Global
  Local memory size:				 32768
  Profiling timer resolution:			 1
  Device endianess:				 Little
  Available:					 Yes
  Compiler available:				 Yes
  Execution capabilities:				 
    Execute OpenCL kernels:			 Yes
    Execute native function:			 Yes
  Queue properties:				 
    Out-of-Order:				 No
    Profiling :					 Yes
  Platform ID:					 0x7f0d9d76db20
  Name:						 Intel(R) Core(TM) i5 CPU         750  @ 2.67GHz
  Vendor:					 GenuineIntel
  Driver version:				 2.0
  Profile:					 FULL_PROFILE
  Version:					 OpenCL 1.1 ATI-Stream-v2.2 (302)
  Extensions:					 cl_amd_fp64 cl_khr_global_int32_base_atomics cl_khr_global_int32_extended_atomics cl_khr_local_int32_base_atomics cl_khr_local_int32_extended_atomics cl_khr_int64_base_atomics cl_khr_int64_extended_atomics cl_khr_byte_addressable_store cl_khr_gl_sharing cl_ext_device_fission cl_amd_device_attribute_query cl_amd_printf 
  Device Type:					 CL_DEVICE_TYPE_GPU
  Device ID:					 4098
  Max compute units:				 2
  Max work items dimensions:			 3
    Max work items[0]:				 128
    Max work items[1]:				 128
    Max work items[2]:				 128
  Max work group size:				 128
  Preferred vector width char:			 16
  Preferred vector width short:			 8
  Preferred vector width int:			 4
  Preferred vector width long:			 2
  Preferred vector width float:			 4
  Preferred vector width double:		 0
  Max clock frequency:				 0Mhz
  Address bits:					 32
  Max memory allocation:			 134217728
  Image support:				 Yes
  Max number of images read arguments:	 128
  Max number of images write arguments:	 8
  Max image 2D width:			 8192
  Max image 2D height:			 8192
  Max image 3D width:			 2048
  Max image 3D height:	 2048
  Max image 3D depth:			 2048
  Max samplers within kernel:		 16
  Max size of kernel argument:			 1024
  Alignment (bits) of base address:		 32768
  Minimum alignment (bytes) for any datatype:	 128
  Single precision floating point capability
    Denorms:					 No
    Quiet NaNs:					 Yes
    Round to nearest even:			 Yes
    Round to zero:				 Yes
    Round to +ve and infinity:			 Yes
    IEEE754-2008 fused multiply-add:		 Yes
  Cache type:					 None
  Cache line size:				 0
  Cache size:					 0
  Global memory size:				 536870912
  Constant buffer size:				 65536
  Max number of constant args:			 8
  Local memory type:				 Scratchpad
  Local memory size:				 32768
  Profiling timer resolution:			 1
  Device endianess:				 Little
  Available:					 Yes
  Compiler available:				 Yes
  Execution capabilities:				 
    Execute OpenCL kernels:			 Yes
    Execute native function:			 No
  Queue properties:				 
    Out-of-Order:				 No
    Profiling :					 Yes
  Platform ID:					 0x7f0d9d76db20
  Name:						 Cedar
  Vendor:					 Advanced Micro Devices, Inc.
  Driver version:				 CAL 1.4.880
  Profile:					 FULL_PROFILE
  Version:					 OpenCL 1.1 ATI-Stream-v2.2 (302)
  Extensions:					 cl_khr_global_int32_base_atomics cl_khr_global_int32_extended_atomics cl_khr_local_int32_base_atomics cl_khr_local_int32_extended_atomics cl_khr_3d_image_writes cl_khr_byte_addressable_store cl_khr_gl_sharing cl_amd_device_attribute_query cl_amd_printf cl_amd_media_ops 


Passed!
From aborruso at tin.it  Mon Dec  6 18:13:46 2010
From: aborruso at tin.it (iomeneandrei)
Date: Mon Dec  6 18:13:49 2010
Subject: [gdal-dev] Re: Multipart to singlepart
In-Reply-To: <4CFD3387.8050802@pobox.com>
References: <1291636468236-5807508.post@n2.nabble.com>
	<4CFD3387.8050802@pobox.com>
Message-ID: <1291677226458-5809797.post@n2.nabble.com>


Hi Frank,

Frank Warmerdam wrote:
> 
> I am not aware of a way to do this from the commandline utilities.
> 
could I use the -nlt parameter of ogr2ogr and force POLYGON? If no, what's
the "power" of -nlt parameter?

Once again, thank you,

a

-----
Andrea Borruso

----------------------------------------------------
email: aborruso@tin.it
website: http://blog.spaziogis.it
my 2.0 life: http://aborruso.spaziogis.it
feed: http://feeds2.feedburner.com/Tanto
38? 7' 48" N, 13? 21' 9" E
----------------------------------------------------
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Multipart-to-singlepart-tp5807508p5809797.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From seth at pricepages.org  Mon Dec  6 20:05:51 2010
From: seth at pricepages.org (Seth Price)
Date: Mon Dec  6 20:05:56 2010
Subject: [gdal-dev] Re: OpenCL, GDAL, and You
In-Reply-To: <201012070012.03183.even.rouault@mines-paris.org>
References: <88890516-6689-41C4-8577-1524F699AF12@pricepages.org>
	<7DE0E5A9710AFC4896275865DABC86DA24963D@005-TK5MPN1-002.MGDADSK.autodesk.com>
	<968FFFE7-61FD-4EFF-9E19-E93836295B10@pricepages.org>
	<201012070012.03183.even.rouault@mines-paris.org>
Message-ID: <1531484A-DA5E-4F97-A4B3-38AB3DEAA24E@pricepages.org>

Ah, the joys of multiple platform development.

The first two warnings should be fixable by replacing "-99.0" with  
"-99.0f".

Your fix for read_imagef() should work fine.

To fix that last error, try changing the image size from "1, 1" to "2,  
2" or "4, 4". It shouldn't matter because the image is there only so  
we have something to pass to the kernel (it's not used in this case).  
The spec says that the values need to be greater or equal to 1, so  
it's technically a SDK problem.
~Seth


On Dec 6, 2010, at 4:12 PM, Even Rouault wrote:

> Hi Seth,
>
> I gave a try to Frank's integration of your work with my ATI Radeon  
> HD 5400. I
> got the ATI SDK 2.2 correctly installed with latest ATI drivers  
> (10-11). The
> few OpenCL demos provided with the SDK I tried work on the GPU device.
>
> (Note: "thanks" to the errors bellow, I've made a few cleanups in
> http://trac.osgeo.org/gdal/changeset/21205 to improve error  
> reporting and
> clean-up in case of error. I also added missing initialization of 2  
> members of
> the warper struct)
>
> Then I tried a simple warp and I got the following error :
>
> """
> 0ERROR 1: Error: Failed to build program executable!
> Build Log:
> Warning: invalid option: -cl-fast-relaxed-math
>
> Warning: invalid option: -Werror
>
> /tmp/OCL3QLDj2.cl(193): warning: double-precision constant is  
> represented as
>          single-precision constant because double is not enabled
>  return (float2)(-99.0, -99.0);
>                   ^
>
> /tmp/OCL3QLDj2.cl(193): warning: double-precision constant is  
> represented as
>          single-precision constant because double is not enabled
>  return (float2)(-99.0, -99.0);
>                          ^
>
> /tmp/OCL3QLDj2.cl(195): error: bad argument type to opencl image op:  
> expected
>          sampler_t
>  CLK_NORMALIZED_COORDS_TRUE |
>  ^
>
> 1 error detected in the compilation of "/tmp/OCL3QLDj2.cl".
>
> ERROR 1: Error at file gdalwarpkernel_opencl.c line 2228:
> CL_BUILD_PROGRAM_FAILURE
> """"
>
> Hum, then I looked at similar code in the neighbourhood and I came  
> with the
> following change that solves the compilation. It is not commited  
> yet, does it
> look ok to you ?
>
> Index: alg/gdalwarpkernel_opencl.c
> ===================================================================
> --- alg/gdalwarpkernel_opencl.c	(r?vision 21205)
> +++ alg/gdalwarpkernel_opencl.c	(copie de travail)
> @@ -724,13 +724,13 @@
>     // Check & return when the thread group overruns the image size
>     "if (nDstX >= iDstWidth || nDstY >= iDstHeight)\n"
>         "return (float2)(-99.0, -99.0);\n"
> +
> +    "const sampler_t samp =  CLK_NORMALIZED_COORDS_TRUE |\n"
> +                            "CLK_ADDRESS_CLAMP_TO_EDGE |\n"
> +                            "CLK_FILTER_LINEAR;\n"
> +
> +    "float4  fSrcCoords = read_imagef(srcCoords,samp,fDst);\n"
>
> -    "float4  fSrcCoords = read_imagef(srcCoords,\n"
> -                                     "CLK_NORMALIZED_COORDS_TRUE |\n"
> -                                        "CLK_ADDRESS_CLAMP_TO_EDGE | 
> \n"
> -                                        "CLK_FILTER_LINEAR,\n"
> -                                     "fDst);\n"
> -
>     "return (float2)(fSrcCoords.x, fSrcCoords.y);\n"
> "}\n";
>
>
> After solving the compilation error, I'm stuck with  :
>
> """
> 0ERROR 1: Error at file gdalwarpkernel_opencl.c line 1391:
> CL_INVALID_IMAGE_SIZE
> ERROR 1: Error at file gdalwarpkernel_opencl.c line 1391:  
> CL_INVALID_IMAGE_SIZE
> ERROR 1: Error at file gdalwarpkernel_opencl.c line 2292:  
> CL_INVALID_IMAGE_SIZE
> ERROR 1: Error at file gdalwarpkernel_opencl.c line 1391:  
> CL_INVALID_IMAGE_SIZE
> ERROR 1: OpenCL routines reported failure (-40) on line 2570.
> """
>
> The revelant line is :
> """
>        //Make a fake image so we don't have a NULL pointer
>        (*srcImag) = clCreateImage2D(warper->context, CL_MEM_READ_ONLY,
> &imgFmt,
>                                     1, 1, sz, NULL, &err);
>        handleErr(err);
> """
>
> Any ideas ? Did you try with ATI or NVidia cards ?
>
> I've attached the output of CLInfo if it can help.
>
> Best regards,
>
> Even
>
> Le lundi 06 d?cembre 2010 15:50:04, Seth Price a ?crit :
>> Over the summer I rewrote the warper to use OpenCL. There was a 2x to
>> 50x speedup. Here is a description of what I did:
>> http://osgeo-org.1803224.n2.nabble.com/gdal-dev-gdalwarp-OpenCL-Performance
>> -Week-9-td5341226.html
>>
>> ~Seth
>>
>> On Dec 6, 2010, at 5:10 AM, Konstantin Baumann wrote:
>>> Hi,
>>>
>>> what benefit/improvement would the OpenCL integration bring to GDAL?
>>> Additional functionality or a speedup of existing functions?
>>> Probably only operations on images and/or rasters are supported;
>>> reprojection/warping and filtering would be good candidates, right?
>>> What concrete operations would be supported?
>>>
>>> Kosta
>>>
>>> -----Original Message-----
>>> From: gdal-dev-bounces@lists.osgeo.org
>>> [mailto:gdal-dev-bounces@lists.osgeo.org ] On Behalf Of Frank  
>>> Warmerdam
>>> (External)
>>> Sent: Monday, December 06, 2010 1:43 AM
>>> To: Seth Price
>>> Cc: Philippe Vachon; gdal-dev; Wolf Bergenheim
>>> Subject: [gdal-dev] Re: OpenCL, GRASS, GDAL, and You
>>>
>>> On 10-09-23 10:09 AM, Seth Price wrote:
>>>> Hey all, I was just wondering if there was any progress in
>>>> integrating
>>>> the OpenCL code into trunk in each project? I haven't heard  
>>>> anything,
>>>> but it would be a shame to just leave the code sit, or wait until  
>>>> the
>>>> code branches have significantly diverged.
>>>> ~Seth
>>>
>>> Seth,
>>>
>>> Last week I went out and bought a new AMD/ATI machine in the hopes
>>> (amoung
>>> other goals) that OpenCL would work on it with the ATI OpenCL SDK.
>>> Unfortunately I have discovered that the ATI Radion 4200 HD is not
>>> supported
>>> for OpenCL stuff.  :-(
>>>
>>> Nevertheless, with some persistance I was able to build the ATI SDK,
>>> and
>>> configure GDAL to build against it.  So I have integrated OpenCL
>>> support
>>> in trunk.  It is not enabled by default, but you can enable it with
>>> the
>>> --with-opencl directive.  If the include files and libraries are  
>>> in a
>>> non-standard location you can also use the --with-opencl-include and
>>>
>>> --with-opencl-lib directives to configure like this:
>>>    --with-opencl \
>>>    --with-opencl-include=/home/warmerda/pkg/ati-stream-sdk-v2.2-
>>>
>>> lnx64/include \
>>>
>>> --with-opencl-lib="-L/home/warmerda/pkg/ati-stream-sdk-v2.2-lnx64/
>>> lib/x86_64
>>> -lOpenCL" \
>>>
>>> I ran into a few issues:
>>>
>>> 1) It seems the include file from ATI is <cl/opencl.h> not <OpenCL/
>>> OpenCL.h>
>>> as it is on the Mac.  I've put a platform dependent ifdef but I
>>> don't now
>>> what the situation will be on other machines.
>>>
>>> 2) In your get_device() function you were passing NULL in for the
>>> platform.
>>> The online docs indicate this as an option but warn that behavior
>>> then is
>>> platform dependent.  The ATI SDK just fails with an invalid platform
>>> error.
>>> So I updated the code to fetch a platform id and use that.
>>>
>>> 3) On my system it falls back to using the CPU but it turns out the
>>> CPU
>>> does not offer "image" support in my case.  I added some extra logic
>>> to
>>> look for this capability so a better error could be reported.
>>>
>>> 4) I restructured things a bit so that the OpenCL warper case can
>>> return
>>> CE_Warning to indicate to the high level warper that OpenCL should  
>>> be
>>> skipped and other mechanisms used.  That is what it does not if it
>>> fails
>>> to find a suitable device, or some of the other specific checks.
>>>
>>> 5) I made a few changes to use CPLDebug instead of printf for debug
>>> output.
>>>
>>> I haven't tried this yet on your Mac.  I avoided using the account  
>>> you
>>> kindly offered because I find the Mac is often a perverse build
>>> environment
>>> and I didn't want to establish the "norm" based on it.  I might try
>>> it out
>>> tonight though.
>>>
>>> I have also not yet tried it on windows, and likely won't in the
>>> near future.
>>> Perhaps someone else will pick up the ball there.  The code itself
>>> just
>>> depends on having HAVE_OPENCL defined at least in the alg directory
>>> and
>>> of course appropriate include and link options.
>>>
>>> (cc:ed to the list so everyone is aware of the availability).
>>>
>>> Best regards,
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> <clinfo_ati_radeon_hd_5400.txt>

From warmerdam at pobox.com  Mon Dec  6 22:09:34 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec  6 22:09:45 2010
Subject: [gdal-dev] Re: Multipart to singlepart
In-Reply-To: <1291677226458-5809797.post@n2.nabble.com>
References: <1291636468236-5807508.post@n2.nabble.com>
	<4CFD3387.8050802@pobox.com> <1291677226458-5809797.post@n2.nabble.com>
Message-ID: <4CFDA56E.6000804@pobox.com>

On 10-12-06 06:13 PM, iomeneandrei wrote:
>
> Hi Frank,
>
> Frank Warmerdam wrote:
>>
>> I am not aware of a way to do this from the commandline utilities.
>>
> could I use the -nlt parameter of ogr2ogr and force POLYGON? If no, what's
> the "power" of -nlt parameter?

Andrea,

Reviewing the ogr2ogr code I see this does trigger a call to forceToPolygon()
though *mostly* it exists to set the type of the created layer.  So, yes,
-nlt polygon with ogr2ogr may well do what you want.

Note that in a format like Shapefile there is no clear distinction
between polygon and multipolygon, so the geometries are reclassified on
read.  So -nlt polygon to a shapefile and then reading it back with ogr
will still result in multipolygons if that is the nature of the rings.

You should have better luck with a more simple features oriented format
like GML.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Tue Dec  7 02:01:41 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec  7 02:01:46 2010
Subject: [gdal-dev] Re: OpenCL, GDAL, and You
In-Reply-To: <1531484A-DA5E-4F97-A4B3-38AB3DEAA24E@pricepages.org>
References: <88890516-6689-41C4-8577-1524F699AF12@pricepages.org>
	<201012070012.03183.even.rouault@mines-paris.org>
	<1531484A-DA5E-4F97-A4B3-38AB3DEAA24E@pricepages.org>
Message-ID: <201012070801.42043.even.rouault@mines-paris.org>

Le mardi 07 d?cembre 2010 02:05:51, Seth Price a ?crit :
> Ah, the joys of multiple platform development.
> 
> The first two warnings should be fixable by replacing "-99.0" with
> "-99.0f".
> 
> Your fix for read_imagef() should work fine.

ok, I'll commit that then

> 
> To fix that last error, try changing the image size from "1, 1" to "2,
> 2" or "4, 4". It shouldn't matter because the image is there only so
> we have something to pass to the kernel (it's not used in this case).
> The spec says that the values need to be greater or equal to 1, so
> it's technically a SDK problem.

I tried 2,2 ; 4,4 ; 8,8 ; 16,16 ; 256,256; 1024,1024 and none of them work...

> ~Seth
> 
> On Dec 6, 2010, at 4:12 PM, Even Rouault wrote:
> > Hi Seth,
> > 
> > I gave a try to Frank's integration of your work with my ATI Radeon
> > HD 5400. I
> > got the ATI SDK 2.2 correctly installed with latest ATI drivers
> > (10-11). The
> > few OpenCL demos provided with the SDK I tried work on the GPU device.
> > 
> > (Note: "thanks" to the errors bellow, I've made a few cleanups in
> > http://trac.osgeo.org/gdal/changeset/21205 to improve error
> > reporting and
> > clean-up in case of error. I also added missing initialization of 2
> > members of
> > the warper struct)
> > 
> > Then I tried a simple warp and I got the following error :
> > 
> > """
> > 0ERROR 1: Error: Failed to build program executable!
> > Build Log:
> > Warning: invalid option: -cl-fast-relaxed-math
> > 
> > Warning: invalid option: -Werror
> > 
> > /tmp/OCL3QLDj2.cl(193): warning: double-precision constant is
> > represented as
> > 
> >          single-precision constant because double is not enabled
> >  
> >  return (float2)(-99.0, -99.0);
> >  
> >                   ^
> > 
> > /tmp/OCL3QLDj2.cl(193): warning: double-precision constant is
> > represented as
> > 
> >          single-precision constant because double is not enabled
> >  
> >  return (float2)(-99.0, -99.0);
> >  
> >                          ^
> > 
> > /tmp/OCL3QLDj2.cl(195): error: bad argument type to opencl image op:
> > expected
> > 
> >          sampler_t
> >  
> >  CLK_NORMALIZED_COORDS_TRUE |
> >  ^
> > 
> > 1 error detected in the compilation of "/tmp/OCL3QLDj2.cl".
> > 
> > ERROR 1: Error at file gdalwarpkernel_opencl.c line 2228:
> > CL_BUILD_PROGRAM_FAILURE
> > """"
> > 
> > Hum, then I looked at similar code in the neighbourhood and I came
> > with the
> > following change that solves the compilation. It is not commited
> > yet, does it
> > look ok to you ?
> > 
> > Index: alg/gdalwarpkernel_opencl.c
> > ===================================================================
> > --- alg/gdalwarpkernel_opencl.c	(r?vision 21205)
> > +++ alg/gdalwarpkernel_opencl.c	(copie de travail)
> > @@ -724,13 +724,13 @@
> > 
> >     // Check & return when the thread group overruns the image size
> >     "if (nDstX >= iDstWidth || nDstY >= iDstHeight)\n"
> >     
> >         "return (float2)(-99.0, -99.0);\n"
> > 
> > +
> > +    "const sampler_t samp =  CLK_NORMALIZED_COORDS_TRUE |\n"
> > +                            "CLK_ADDRESS_CLAMP_TO_EDGE |\n"
> > +                            "CLK_FILTER_LINEAR;\n"
> > +
> > +    "float4  fSrcCoords = read_imagef(srcCoords,samp,fDst);\n"
> > 
> > -    "float4  fSrcCoords = read_imagef(srcCoords,\n"
> > -                                     "CLK_NORMALIZED_COORDS_TRUE |\n"
> > -                                        "CLK_ADDRESS_CLAMP_TO_EDGE |
> > \n"
> > -                                        "CLK_FILTER_LINEAR,\n"
> > -                                     "fDst);\n"
> > -
> > 
> >     "return (float2)(fSrcCoords.x, fSrcCoords.y);\n"
> > 
> > "}\n";
> > 
> > 
> > After solving the compilation error, I'm stuck with  :
> > 
> > """
> > 0ERROR 1: Error at file gdalwarpkernel_opencl.c line 1391:
> > CL_INVALID_IMAGE_SIZE
> > ERROR 1: Error at file gdalwarpkernel_opencl.c line 1391:
> > CL_INVALID_IMAGE_SIZE
> > ERROR 1: Error at file gdalwarpkernel_opencl.c line 2292:
> > CL_INVALID_IMAGE_SIZE
> > ERROR 1: Error at file gdalwarpkernel_opencl.c line 1391:
> > CL_INVALID_IMAGE_SIZE
> > ERROR 1: OpenCL routines reported failure (-40) on line 2570.
> > """
> > 
> > The revelant line is :
> > """
> > 
> >        //Make a fake image so we don't have a NULL pointer
> >        (*srcImag) = clCreateImage2D(warper->context, CL_MEM_READ_ONLY,
> > 
> > &imgFmt,
> > 
> >                                     1, 1, sz, NULL, &err);
> >        
> >        handleErr(err);
> > 
> > """
> > 
> > Any ideas ? Did you try with ATI or NVidia cards ?
> > 
> > I've attached the output of CLInfo if it can help.
> > 
> > Best regards,
> > 
> > Even
> > 
> > Le lundi 06 d?cembre 2010 15:50:04, Seth Price a ?crit :
> >> Over the summer I rewrote the warper to use OpenCL. There was a 2x to
> >> 50x speedup. Here is a description of what I did:
> >> http://osgeo-org.1803224.n2.nabble.com/gdal-dev-gdalwarp-OpenCL-Performa
> >> nce -Week-9-td5341226.html
> >> 
> >> ~Seth
> >> 
> >> On Dec 6, 2010, at 5:10 AM, Konstantin Baumann wrote:
> >>> Hi,
> >>> 
> >>> what benefit/improvement would the OpenCL integration bring to GDAL?
> >>> Additional functionality or a speedup of existing functions?
> >>> Probably only operations on images and/or rasters are supported;
> >>> reprojection/warping and filtering would be good candidates, right?
> >>> What concrete operations would be supported?
> >>> 
> >>> Kosta
> >>> 
> >>> -----Original Message-----
> >>> From: gdal-dev-bounces@lists.osgeo.org
> >>> [mailto:gdal-dev-bounces@lists.osgeo.org ] On Behalf Of Frank
> >>> Warmerdam
> >>> (External)
> >>> Sent: Monday, December 06, 2010 1:43 AM
> >>> To: Seth Price
> >>> Cc: Philippe Vachon; gdal-dev; Wolf Bergenheim
> >>> Subject: [gdal-dev] Re: OpenCL, GRASS, GDAL, and You
> >>> 
> >>> On 10-09-23 10:09 AM, Seth Price wrote:
> >>>> Hey all, I was just wondering if there was any progress in
> >>>> integrating
> >>>> the OpenCL code into trunk in each project? I haven't heard
> >>>> anything,
> >>>> but it would be a shame to just leave the code sit, or wait until
> >>>> the
> >>>> code branches have significantly diverged.
> >>>> ~Seth
> >>> 
> >>> Seth,
> >>> 
> >>> Last week I went out and bought a new AMD/ATI machine in the hopes
> >>> (amoung
> >>> other goals) that OpenCL would work on it with the ATI OpenCL SDK.
> >>> Unfortunately I have discovered that the ATI Radion 4200 HD is not
> >>> supported
> >>> for OpenCL stuff.  :-(
> >>> 
> >>> Nevertheless, with some persistance I was able to build the ATI SDK,
> >>> and
> >>> configure GDAL to build against it.  So I have integrated OpenCL
> >>> support
> >>> in trunk.  It is not enabled by default, but you can enable it with
> >>> the
> >>> --with-opencl directive.  If the include files and libraries are
> >>> in a
> >>> non-standard location you can also use the --with-opencl-include and
> >>> 
> >>> --with-opencl-lib directives to configure like this:
> >>>    --with-opencl \
> >>>    --with-opencl-include=/home/warmerda/pkg/ati-stream-sdk-v2.2-
> >>> 
> >>> lnx64/include \
> >>> 
> >>> --with-opencl-lib="-L/home/warmerda/pkg/ati-stream-sdk-v2.2-lnx64/
> >>> lib/x86_64
> >>> -lOpenCL" \
> >>> 
> >>> I ran into a few issues:
> >>> 
> >>> 1) It seems the include file from ATI is <cl/opencl.h> not <OpenCL/
> >>> OpenCL.h>
> >>> as it is on the Mac.  I've put a platform dependent ifdef but I
> >>> don't now
> >>> what the situation will be on other machines.
> >>> 
> >>> 2) In your get_device() function you were passing NULL in for the
> >>> platform.
> >>> The online docs indicate this as an option but warn that behavior
> >>> then is
> >>> platform dependent.  The ATI SDK just fails with an invalid platform
> >>> error.
> >>> So I updated the code to fetch a platform id and use that.
> >>> 
> >>> 3) On my system it falls back to using the CPU but it turns out the
> >>> CPU
> >>> does not offer "image" support in my case.  I added some extra logic
> >>> to
> >>> look for this capability so a better error could be reported.
> >>> 
> >>> 4) I restructured things a bit so that the OpenCL warper case can
> >>> return
> >>> CE_Warning to indicate to the high level warper that OpenCL should
> >>> be
> >>> skipped and other mechanisms used.  That is what it does not if it
> >>> fails
> >>> to find a suitable device, or some of the other specific checks.
> >>> 
> >>> 5) I made a few changes to use CPLDebug instead of printf for debug
> >>> output.
> >>> 
> >>> I haven't tried this yet on your Mac.  I avoided using the account
> >>> you
> >>> kindly offered because I find the Mac is often a perverse build
> >>> environment
> >>> and I didn't want to establish the "norm" based on it.  I might try
> >>> it out
> >>> tonight though.
> >>> 
> >>> I have also not yet tried it on windows, and likely won't in the
> >>> near future.
> >>> Perhaps someone else will pick up the ball there.  The code itself
> >>> just
> >>> depends on having HAVE_OPENCL defined at least in the alg directory
> >>> and
> >>> of course appropriate include and link options.
> >>> 
> >>> (cc:ed to the list so everyone is aware of the availability).
> >>> 
> >>> Best regards,
> >>> 
> >>> _______________________________________________
> >>> gdal-dev mailing list
> >>> gdal-dev@lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > <clinfo_ati_radeon_hd_5400.txt>
From Konstantin.Baumann at autodesk.com  Tue Dec  7 03:27:30 2010
From: Konstantin.Baumann at autodesk.com (Konstantin Baumann)
Date: Tue Dec  7 03:27:30 2010
Subject: [gdal-dev] Error reading long numbers as integer
In-Reply-To: <201012062056.14710.even.rouault@mines-paris.org>
References: <201012061247.47627.Ralf.Suhr@itc-halle.de>
	<201012062056.14710.even.rouault@mines-paris.org>
Message-ID: <7DE0E5A9710AFC4896275865DABC86DA24B7BA@005-TK5MPN1-002.MGDADSK.autodesk.com>

Hi Even,

the fallback to double/real does only help if the integer could be stored in 52 bits, since the rest of the bits are reserved for the mantissa and sign => exact up to ~15 decimal digits.

I proposed a fix 3 years ago to change the data type to string in order to not loose data:
	Patch:  http://trac.osgeo.org/gdal/attachment/ticket/2286/gdal-shapefile-datatype.patch
	Ticket: http://trac.osgeo.org/gdal/ticket/2286
which was rejected. :-(

And the introduction of 64-bit integers (also RFC31_OGR_64 is highly appreciated) will still not help for integers with more than 19 decimal digits... [note: e.g., TeleAtlas uses 30 digit integers as feature IDs]

Kosta

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Even Rouault
Sent: Monday, December 06, 2010 8:56 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Error reading long numbers as integer

Ralf,
> 
> I have created a ticket for the NAS reader. Long numbers (13 digits) are
> read as integer. Maybe there are more drivers who have the same trouble.

Yes, this is an issue that can be potentially found in other drivers. The 
situation could improve if/when RFC 31 / OGR 64bit integer is adopted.

For the time being, I've made a change in the GML driver so that it fallbacks 
to Real when it detects an integer that cannot fit into 32bit. Not ideal, but 
better than arbitrary truncation.

> 
> I have tested some workarounds. Changing the attribut definition in gfs
> file is successful, when destination driver is PGdump or Postgresql
> (create mode).

Which change did you make exactly ? Change from Integer to Real ?

> With Postgresql driver as destination ogr2ogr convert the
> 13 digits number always to integer in append mode and ignoring table
> definition.

I'm a bit skeptical about that one. Which exact commands did you use ?

> I tested with gdal SVN21189.
> 
> Gr
> Ralf
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From Ralf.Suhr at itc-halle.de  Tue Dec  7 03:37:25 2010
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Tue Dec  7 03:37:30 2010
Subject: [gdal-dev] Error reading long numbers as integer
In-Reply-To: <201012062056.14710.even.rouault@mines-paris.org>
References: <201012061247.47627.Ralf.Suhr@itc-halle.de>
	<201012062056.14710.even.rouault@mines-paris.org>
Message-ID: <201012070937.26638.Ralf.Suhr@itc-halle.de>

Hello Even,

I changed the definition to String in gfs file and use the type text in 
postgresql.

I've tested with:
ogr2ogr -f "PGdump" /vsistdout/ nas_error_strschl.xml

ogr2ogr --config PG_LIST_ALL_TABLES YES -append -f PostgreSQL PG:"dbname=nas" 
nas_error_strschl.xml

Am Montag 06 Dezember 2010, 20:56:14 schrieb Even Rouault:
> Ralf,
> 
> > I have created a ticket for the NAS reader. Long numbers (13 digits) are
> > read as integer. Maybe there are more drivers who have the same trouble.
> 
> Yes, this is an issue that can be potentially found in other drivers. The
> situation could improve if/when RFC 31 / OGR 64bit integer is adopted.
> 
> For the time being, I've made a change in the GML driver so that it
> fallbacks to Real when it detects an integer that cannot fit into 32bit.
> Not ideal, but better than arbitrary truncation.
> 
> > I have tested some workarounds. Changing the attribut definition in gfs
> > file is successful, when destination driver is PGdump or Postgresql
> > (create mode).
> 
> Which change did you make exactly ? Change from Integer to Real ?
> 
> > With Postgresql driver as destination ogr2ogr convert the
> > 13 digits number always to integer in append mode and ignoring table
> > definition.
> 
> I'm a bit skeptical about that one. Which exact commands did you use ?
> 
> > I tested with gdal SVN21189.
> > 
> > Gr
> > Ralf

From P.Halls at york.ac.uk  Tue Dec  7 03:39:50 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Tue Dec  7 03:39:58 2010
Subject: [gdal-dev] Error reading long numbers as integer
In-Reply-To: <7DE0E5A9710AFC4896275865DABC86DA24B7BA@005-TK5MPN1-002.MGDADSK.autodesk.com>
References: <201012061247.47627.Ralf.Suhr@itc-halle.de>	<201012062056.14710.even.rouault@mines-paris.org>
	<7DE0E5A9710AFC4896275865DABC86DA24B7BA@005-TK5MPN1-002.MGDADSK.autodesk.com>
Message-ID: <4CFDF2D6.1020903@york.ac.uk>

Kosta, Team,

Konstantin Baumann wrote:
> Hi Even,
> 
> the fallback to double/real does only help if the integer could be stored in 52 bits, since the rest of the bits are reserved for the mantissa and sign => exact up to ~15 decimal digits.
> 
> I proposed a fix 3 years ago to change the data type to string in order to not loose data:
> 	Patch:  http://trac.osgeo.org/gdal/attachment/ticket/2286/gdal-shapefile-datatype.patch
> 	Ticket: http://trac.osgeo.org/gdal/ticket/2286
> which was rejected. :-(
> 
> And the introduction of 64-bit integers (also RFC31_OGR_64 is highly appreciated) will still not help for integers with more than 19 decimal digits... [note: e.g., TeleAtlas uses 30 digit integers as feature IDs]
> 
> Kosta
> 

The Ordnance Survey of Great Britain use 20 digit integers for feature IDs.  I 
had to revert to storing these as text in the database as the compilers I use do 
not support 128bit integers.

It is necessary in such situations for the programmer to take a reasonably 
pragmatic approach.  Feature IDs, for example, are invariant references which 
are not used within mathematical computations, etc.  It is not, therefore, 
essential to manipulate these as numbers, even where they are numeric.  I have 
not yet seen data values that would exceed the storage available in a 64bit integer.

Best wishes,

Peter

--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: IT Services, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From aborruso at tin.it  Tue Dec  7 03:43:53 2010
From: aborruso at tin.it (iomeneandrei)
Date: Tue Dec  7 03:43:54 2010
Subject: [gdal-dev] Re: Multipart to singlepart
In-Reply-To: <4CFDA56E.6000804@pobox.com>
References: <1291636468236-5807508.post@n2.nabble.com>
	<4CFD3387.8050802@pobox.com>
	<1291677226458-5809797.post@n2.nabble.com>
	<4CFDA56E.6000804@pobox.com>
Message-ID: <1291711433564-5810838.post@n2.nabble.com>


Hi Frank,

Frank Warmerdam wrote:
> 
> Reviewing the ogr2ogr code I see this does trigger a call to
> forceToPolygon()
> though *mostly* it exists to set the type of the created layer.  So, yes,
> -nlt polygon with ogr2ogr may well do what you want.
> 
I have used this GML file as input:
https://gist.github.com/731590

It contains a multipolygon.

Then I run this command: ogr2ogr -f GML -nlt POLYGON  poly_output.gml
poly_input.gml

The output file contains the same multipolygon. Is it normal?

I'm using FWTools 2.4.7 for Windows.

Thank you very much,

Andrea

-----
Andrea Borruso

----------------------------------------------------
email: aborruso@tin.it
website: http://blog.spaziogis.it
my 2.0 life: http://aborruso.spaziogis.it
feed: http://feeds2.feedburner.com/Tanto
38? 7' 48" N, 13? 21' 9" E
----------------------------------------------------
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Multipart-to-singlepart-tp5807508p5810838.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ludovic.mercier at gmail.com  Tue Dec  7 03:40:40 2010
From: ludovic.mercier at gmail.com (ludovic)
Date: Tue Dec  7 03:52:09 2010
Subject: [gdal-dev] Re: patch for ISIS2 driver
In-Reply-To: <201012061956.28128.even.rouault@mines-paris.org>
References: <4CFD08F4.6080802@gmail.com>
	<201012061956.28128.even.rouault@mines-paris.org>
Message-ID: <c9028dfb-7d0d-4f24-bd5e-a95d354d1512@fu15g2000vbb.googlegroups.com>

Even,

i have open a new ticket : #3869 with a attachment.

> I see that you've cc'ed Robert Soricone. Does this mean that he or Trent Hare
> have already reviewed the patch ?

No, see the next message in the thread.

> Some links to public datasets if available would be helpful for testing I
> think.

Ok i'm looking to it.

Ludovic
From jrepetto at free.fr  Tue Dec  7 04:23:36 2010
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue Dec  7 04:23:44 2010
Subject: [gdal-dev] Re: Error: EPSG code not recognized
In-Reply-To: <20101206233459.90363ci49e9wiyvn@www.deimos.com.pt>
References: <20101206233459.90363ci49e9wiyvn@www.deimos.com.pt>
Message-ID: <4CFDFD18.5050205@free.fr>

Le 06/12/2010 23:34, antonio.rocha@deimos.com.pt a ?crit :
> Greetings
>
> following Jean-Claude message
> (http://lists.osgeo.org/pipermail/gdal-dev/2010-December/026983.html) I
> identified 2 EPSG's with Equidistant Cylindrical:
> EPSG 3786 and EPSG 32663. Does anyone, that has used ECWMF ERA Interim
> dataset, can tell me which one is used by ECMWF? (I asked to ERA interim
> help desk and they don't know)

Hi Antonio,

There are lots of CRS that don't have an EPSG code. What you need to 
know is :
- the datum (WGS84, ETRS89, NAD27, etc ...)
- the projection : you already know that is equirectangular. On the page 
<http://www.remotesensing.org/geotiff/proj_list/equirectangular.html> , 
you can see that you need 5 parameters (Latitude of true scale,Latitude 
of origin,Longitude of projection center, False Easting and False Northing).

Jean-Claude
From shaydolev at yahoo.com  Tue Dec  7 04:54:54 2010
From: shaydolev at yahoo.com (Shay Dolev)
Date: Tue Dec  7 04:57:40 2010
Subject: [gdal-dev] Using FWTools in Dot Net - cannot find data files
Message-ID: <103392.34985.qm@web65705.mail.ac4.yahoo.com>

Hi,
I am using FWTools2.4.7 in a Dot Net environment (Win XP).

There seems to be a problem in finding the CSV files that are used in 
SpatialReference.ImportFromESPG(...) - only when I move the csv files to be in 
the running directory this works, no matter how I set GDAL_DATA variable.

I'll be glad to any help on this.



      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101207/36114879/attachment.html
From ludovic.mercier at gmail.com  Tue Dec  7 04:58:02 2010
From: ludovic.mercier at gmail.com (Ludovic Mercier)
Date: Tue Dec  7 04:58:13 2010
Subject: [gdal-dev] Re: patch for ISIS2 driver
In-Reply-To: <OF557F9F13.44CC471E-ON072577F1.0067D373-072577F1.006CF619@usgs.gov>
References: <4CFD08F4.6080802@gmail.com>
	<OF557F9F13.44CC471E-ON072577F1.0067D373-072577F1.006CF619@usgs.gov>
Message-ID: <4CFE052A.20306@gmail.com>

Hi,

Le 06/12/2010 20:50, Trent M Hare a ?crit :
> It would also make sense to
> merge the PDS and ISIS2 code set however there are subtitle differences
> in both formats that we must be careful of.
I have an existing code for this (only IMAGE tag), and in my patch i 
have prepare two function to manage IMAGE tag and SPECTRAL_QUBE tag.
See Open() function in patch.

> Before we can incorporate your changes into GDAL, I would like to see
> projection export support implemented also. The main reason for these
> readers was to help propagate the projection, so I would want to see
> this working both directions. I will see where it stands and if I can
> help.
I not use projection at this time but i'm looking for this.

> I'm not sure how to implement "create_copy" so we might need help
> from the GDAL team.
If i have the time i look this also...

> Let me check out your patch and test some images. If all looks good we
> ask the GDAL team to also help incorporate your patch. Also there is
> another PDS fix that needs to be incorporated. Maybe you might have time
> to see if it would be a quick fix since you have been working wit the
> code recently (please see issue below). If you don't have time please
> let me know.
 > I am also curious how you managed to support ISIS2 side
> planes? This capability was removed from ISIS3 due to lack of use and
> complexity.
In my case for this time my algorithm not use backplane but image have 
backplane or side-plane. Also the patch read qube data and remove 
backplane information. But i think about this to integrate backplane 
information :
two possibilities :
* write another file with information
* keep backplane information with metadata
I think if we can implement the two possibilities will be very interesting.
>
> Thanks again for your willingness to share your improvements. Just out
> of curiosity - what facility are you working with?

I'm not sure to if I understand correctly your question (i am not very 
good in English sorry :( )
But i use gdal with the library OTB (http://www.orfeo-toolbox.org) to 
create algorithms for working on hyperspectral data from spacecraft 
(planetary mission) : OMEGA, CRISM, VIRTIS, etc.


Regards

Ludovic

Response to comment :
> /i have a patch for gdal 1.7.3 to improve isis2 driver./
> /* writing functionality for QUBE object //-/ again I would like to see
> an attempt at supporting projections also - I will help.
See first part of this message
> /* grab null value /- What does this mean as support for a single NULL
> value was there? Does this address the fact that all ISIS2, PDS, and
> ISIS3 can support multiple NULL values?
Multiple null value is a problem, i think about this : thread with Frank 
with title "several No data value"
> /* can read qube with back plane, side plane and bottom plane /- great
> again sI will need to see how you supported side/bottom planes. Do you
> make a new file?
See first part of this message
> /* can read a file with label detached or attached. -/ I thought this
> was already implemented? Maybe there were some fixes though./ /
Originally my patch worked with gdal 1.6.3 there were some problem with 
this.


From Ralf.Suhr at itc-halle.de  Tue Dec  7 10:10:40 2010
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Tue Dec  7 10:10:44 2010
Subject: [gdal-dev] Error reading long numbers as integer
In-Reply-To: <201012062056.14710.even.rouault@mines-paris.org>
References: <201012061247.47627.Ralf.Suhr@itc-halle.de>
	<201012062056.14710.even.rouault@mines-paris.org>
Message-ID: <201012071610.41145.Ralf.Suhr@itc-halle.de>

Even,

thanks for the quick help. I have tested SVN21206 and the results fit my 
needs.



Am Montag 06 Dezember 2010, 20:56:14 schrieb Even Rouault:
> Ralf,
> 
> > I have created a ticket for the NAS reader. Long numbers (13 digits) are
> > read as integer. Maybe there are more drivers who have the same trouble.
> 
> Yes, this is an issue that can be potentially found in other drivers. The
> situation could improve if/when RFC 31 / OGR 64bit integer is adopted.
> 
> For the time being, I've made a change in the GML driver so that it
> fallbacks to Real when it detects an integer that cannot fit into 32bit.
> Not ideal, but better than arbitrary truncation.
> 
> > I have tested some workarounds. Changing the attribut definition in gfs
> > file is successful, when destination driver is PGdump or Postgresql
> > (create mode).
> 
> Which change did you make exactly ? Change from Integer to Real ?
> 
> > With Postgresql driver as destination ogr2ogr convert the
> > 13 digits number always to integer in append mode and ignoring table
> > definition.
> 
> I'm a bit skeptical about that one. Which exact commands did you use ?
> 
> > I tested with gdal SVN21189.
> > 
> > Gr
> > Ralf

From ludovic.mercier at gmail.com  Tue Dec  7 11:17:32 2010
From: ludovic.mercier at gmail.com (Ludovic Mercier)
Date: Tue Dec  7 11:17:45 2010
Subject: [gdal-dev] Re: patch for ISIS2 driver
In-Reply-To: <OF557F9F13.44CC471E-ON072577F1.0067D373-072577F1.006CF619@usgs.gov>
References: <4CFD08F4.6080802@gmail.com>
	<OF557F9F13.44CC471E-ON072577F1.0067D373-072577F1.006CF619@usgs.gov>
Message-ID: <4CFE5E1C.3080607@gmail.com>

Hi Trent,

Le 06/12/2010 20:50, Trent M Hare a ?crit :
> New PDS bug which I could use help with -- I have recently seen a new
> label from the LOLA team that allows one label to point to two different
> image types. This breaks the simple GDAL parser.
>
> In these LOLA labels there is a new section which* wraps* the file
> description.
> OBJECT = UNCOMPRESSED_FILE
> ...
> END_OBJECT = UNCOMPRESSED_FILE
> from: http://imbrium.mit.edu/DATA/LOLA_GDR/CYLINDRICAL/IMG/LDEC_16.LBL
>
> and then for a compressed file. I know the PDS reader doesn't support
> JP2s but it would be nice (or at least report an appropriate warning):

In the version 1.7.3 we have two function :
ParseCompressedImage()
and
ParseUncompressedImage()

For my  understanding the function "ParseCompressedImage" is partial ?
Gdal doesn't support a pds raster file embedded in a jp2 ?


> OBJECT = COMPRESSED_FILE
> FILE_NAME = "LDEC_16.JP2"
> RECORD_TYPE = UNDEFINED
> FILE_RECORDS = UNK
> ENCODING_TYPE = "JP2"
> INTERCHANGE_FORMAT = BINARY
> UNCOMPRESSED_FILE_NAME = "LDEC_16.IMG"
> REQUIRED_STORAGE_BYTES = "14831085"
> ^DESCRIPTION = "JP2INFO.TXT"
> END_OBJECT = COMPRESSED_FILE
> http://imbrium.mit.edu/DATA/LOLA_GDR/CYLINDRICAL/JP2/LDEC_16_JP2.LBL
>

> Unfortunately I have seen these two sections in the *same* label! I'm
> not sure how to handle that. I guess just pick up the first one that
> works. And again, it will only be the "UNCOMPRESSED_FILE" section for now.
>
in the pds reference document appendix I.3.3 it is normal to have two 
sections compressed and uncompressed in the same label. But your link 
have only compressed_file tag.
I m agree with you in the case of we have compressed file the driver for 
this time must report an appropriate warning.

Regards,

Ludovic


From warmerdam at pobox.com  Tue Dec  7 12:50:07 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec  7 12:50:09 2010
Subject: [gdal-dev] Re: Multipart to singlepart
In-Reply-To: <1291711433564-5810838.post@n2.nabble.com>
References: <1291636468236-5807508.post@n2.nabble.com>
	<4CFD3387.8050802@pobox.com> <1291677226458-5809797.post@n2.nabble.com>
	<4CFDA56E.6000804@pobox.com> <1291711433564-5810838.post@n2.nabble.com>
Message-ID: <4CFE73CF.8090909@pobox.com>

On 10-12-07 03:43 AM, iomeneandrei wrote:
>
> Hi Frank,
>
> Frank Warmerdam wrote:
>>
>> Reviewing the ogr2ogr code I see this does trigger a call to
>> forceToPolygon()
>> though *mostly* it exists to set the type of the created layer.  So, yes,
>> -nlt polygon with ogr2ogr may well do what you want.
>>
> I have used this GML file as input:
> https://gist.github.com/731590
>
> It contains a multipolygon.
>
> Then I run this command: ogr2ogr -f GML -nlt POLYGON  poly_output.gml
> poly_input.gml
>
> The output file contains the same multipolygon. Is it normal?
>
> I'm using FWTools 2.4.7 for Windows.

Andrea,

I tried it with a trunk build and the multipolygon is converted to a polygon.
I suspect the feature of the forcing support is new and if you want it you
would need a reasonably recent development build - more recent than FWTools.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From aborruso at tin.it  Tue Dec  7 14:48:48 2010
From: aborruso at tin.it (iomeneandrei)
Date: Tue Dec  7 14:48:49 2010
Subject: [gdal-dev] Re: Multipart to singlepart
In-Reply-To: <4CFE73CF.8090909@pobox.com>
References: <1291636468236-5807508.post@n2.nabble.com>
	<4CFD3387.8050802@pobox.com>
	<1291677226458-5809797.post@n2.nabble.com>
	<4CFDA56E.6000804@pobox.com>
	<1291711433564-5810838.post@n2.nabble.com>
	<4CFE73CF.8090909@pobox.com>
Message-ID: <1291751328779-5812969.post@n2.nabble.com>


Dear Frank,

Frank Warmerdam wrote:
> 
> I tried it with a trunk build and the multipolygon is converted to a
> polygon.
> I suspect the feature of the forcing support is new and if you want it you
> would need a reasonably recent development build - more recent than
> FWTools.
> 

I have downloaded GDAL 1.7.3 from here http://vbkto.dyndns.org/sdk/, and I
have made a test. The output file now does not contain ever MultiPolygon,
but it has only Polygon. And I have made this test using two output formats:
SQLite and GML. This is a GML output:
https://gist.github.com/732281

But I have a question for you: is it a real multpart to singlepart
transformation? The output file is without any MultiPolygon, but the two
polygons that constitute the former MultiPolygon remain in some way
geometrically related. I was thinking of getting two separate polygons, but
if I will select one of them in a desktop GIS, also the other one is
selected.
Probably it's correct, but it's not what I want.

It's really a pleasure to "talk" with you.

Thank you,

Andrea

-----
Andrea Borruso

----------------------------------------------------
email: aborruso@tin.it
website: http://blog.spaziogis.it
my 2.0 life: http://aborruso.spaziogis.it
feed: http://feeds2.feedburner.com/Tanto
38? 7' 48" N, 13? 21' 9" E
----------------------------------------------------
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Multipart-to-singlepart-tp5807508p5812969.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Tue Dec  7 15:35:50 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec  7 15:35:55 2010
Subject: [gdal-dev] Re: Multipart to singlepart
In-Reply-To: <1291751328779-5812969.post@n2.nabble.com>
References: <1291636468236-5807508.post@n2.nabble.com>
	<4CFD3387.8050802@pobox.com> <1291677226458-5809797.post@n2.nabble.com>
	<4CFDA56E.6000804@pobox.com> <1291711433564-5810838.post@n2.nabble.com>
	<4CFE73CF.8090909@pobox.com> <1291751328779-5812969.post@n2.nabble.com>
Message-ID: <4CFE9AA6.8080404@pobox.com>

On 10-12-07 02:48 PM, iomeneandrei wrote:
> I have downloaded GDAL 1.7.3 from here http://vbkto.dyndns.org/sdk/, and I
> have made a test. The output file now does not contain ever MultiPolygon,
> but it has only Polygon. And I have made this test using two output formats:
> SQLite and GML. This is a GML output:
> https://gist.github.com/732281

Andrea,

Good.

> But I have a question for you: is it a real multpart to singlepart
> transformation? The output file is without any MultiPolygon, but the two
> polygons that constitute the former MultiPolygon remain in some way
> geometrically related. I was thinking of getting two separate polygons, but
> if I will select one of them in a desktop GIS, also the other one is
> selected.
> Probably it's correct, but it's not what I want.
>
> It's really a pleasure to "talk" with you.

I'm afraid it is just pushing all the rings into one polygon feature which
is in truth not a valid simple feature polygon geometry.  If you want
multipolygons split into multiple features - a reasonable wish - you will
need another mechanism.  You could do this in your own script or program
but I am not aware of mechanism to do this with ogr2ogr or other existing
OGR utilities.  It might be nice to have a -explode-collections option
for ogr2ogr what would produce one feature for each geometry in any kind
of geometry collection in the source file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From matt.gregory at oregonstate.edu  Tue Dec  7 18:22:11 2010
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Tue Dec  7 18:22:16 2010
Subject: [gdal-dev] Creating aux.xml files for GTiff using Python
Message-ID: <1D673F86DDA00841A1216F04D1CE70D64268000319@EXCH2.nws.oregonstate.edu>

Hi all,

There have been a few threads on this listserv about ArcGIS not recognizing statistics built into GeoTiffs.  For example, see:

  http://lists.osgeo.org/pipermail/gdal-dev/2009-September/022044.html

Because GeoTiffs don't build .aux.xml files by default (even with GDAL_PAM_ENABLED set to YES or at least I think this is the case), I'm running into the same issues.  When a GeoTiff is brought into ArcMap, it complains about statistics not being built and then builds them for you.  

Frank's fix, however, in the above thread:

  'gdal_translate -of HFA -co AUX=YES -co STATISTICS=YES xxx.tif xxx.aux'

looks like it first creates the accompanying .aux.xml file for the GeoTiff (e.g. xxx.tif.aux.xml) and then creates two other files xxx.aux and xxx.aux.aux.xml.  When I bring xxx.tif into ArcMap, it correctly reads the statistics and everything is displayed correctly.

My question is whether or not it's possible to force creation of the .aux.xml files through the Python bindings.  I've tried both ComputeBandStats() and ComputeStatistics(False) with no success.

This falls under the category of annoyances, so not a huge issue.

Thanks for pointers.

matt


From seth at pricepages.org  Tue Dec  7 22:42:31 2010
From: seth at pricepages.org (Seth Price)
Date: Tue Dec  7 22:42:43 2010
Subject: [gdal-dev] Re: OpenCL, GDAL, and You
In-Reply-To: <201012070801.42043.even.rouault@mines-paris.org>
References: <88890516-6689-41C4-8577-1524F699AF12@pricepages.org>
	<201012070012.03183.even.rouault@mines-paris.org>
	<1531484A-DA5E-4F97-A4B3-38AB3DEAA24E@pricepages.org>
	<201012070801.42043.even.rouault@mines-paris.org>
Message-ID: <D7652E8D-2E2A-4DCF-AA6F-978E80CA0F19@pricepages.org>

It's more than a little strange that none of those image sizes work.  
Perhaps it's a problem with the image format? Can you verify that the  
given format should work?

Looking at the spec, it might also be a problem with the 'sz'  
argument. What value is that passing?
~Seth



On Dec 7, 2010, at 12:01 AM, Even Rouault wrote:

> Le mardi 07 d?cembre 2010 02:05:51, Seth Price a ?crit :
>> Ah, the joys of multiple platform development.
>>
>> The first two warnings should be fixable by replacing "-99.0" with
>> "-99.0f".
>>
>> Your fix for read_imagef() should work fine.
>
> ok, I'll commit that then
>
>>
>> To fix that last error, try changing the image size from "1, 1" to  
>> "2,
>> 2" or "4, 4". It shouldn't matter because the image is there only so
>> we have something to pass to the kernel (it's not used in this case).
>> The spec says that the values need to be greater or equal to 1, so
>> it's technically a SDK problem.
>
> I tried 2,2 ; 4,4 ; 8,8 ; 16,16 ; 256,256; 1024,1024 and none of  
> them work...
>
>> ~Seth
>>
>> On Dec 6, 2010, at 4:12 PM, Even Rouault wrote:
>>> Hi Seth,
>>>
>>> I gave a try to Frank's integration of your work with my ATI Radeon
>>> HD 5400. I
>>> got the ATI SDK 2.2 correctly installed with latest ATI drivers
>>> (10-11). The
>>> few OpenCL demos provided with the SDK I tried work on the GPU  
>>> device.
>>>
>>> (Note: "thanks" to the errors bellow, I've made a few cleanups in
>>> http://trac.osgeo.org/gdal/changeset/21205 to improve error
>>> reporting and
>>> clean-up in case of error. I also added missing initialization of 2
>>> members of
>>> the warper struct)
>>>
>>> Then I tried a simple warp and I got the following error :
>>>
>>> """
>>> 0ERROR 1: Error: Failed to build program executable!
>>> Build Log:
>>> Warning: invalid option: -cl-fast-relaxed-math
>>>
>>> Warning: invalid option: -Werror
>>>
>>> /tmp/OCL3QLDj2.cl(193): warning: double-precision constant is
>>> represented as
>>>
>>>         single-precision constant because double is not enabled
>>>
>>> return (float2)(-99.0, -99.0);
>>>
>>>                  ^
>>>
>>> /tmp/OCL3QLDj2.cl(193): warning: double-precision constant is
>>> represented as
>>>
>>>         single-precision constant because double is not enabled
>>>
>>> return (float2)(-99.0, -99.0);
>>>
>>>                         ^
>>>
>>> /tmp/OCL3QLDj2.cl(195): error: bad argument type to opencl image op:
>>> expected
>>>
>>>         sampler_t
>>>
>>> CLK_NORMALIZED_COORDS_TRUE |
>>> ^
>>>
>>> 1 error detected in the compilation of "/tmp/OCL3QLDj2.cl".
>>>
>>> ERROR 1: Error at file gdalwarpkernel_opencl.c line 2228:
>>> CL_BUILD_PROGRAM_FAILURE
>>> """"
>>>
>>> Hum, then I looked at similar code in the neighbourhood and I came
>>> with the
>>> following change that solves the compilation. It is not commited
>>> yet, does it
>>> look ok to you ?
>>>
>>> Index: alg/gdalwarpkernel_opencl.c
>>> ===================================================================
>>> --- alg/gdalwarpkernel_opencl.c	(r?vision 21205)
>>> +++ alg/gdalwarpkernel_opencl.c	(copie de travail)
>>> @@ -724,13 +724,13 @@
>>>
>>>    // Check & return when the thread group overruns the image size
>>>    "if (nDstX >= iDstWidth || nDstY >= iDstHeight)\n"
>>>
>>>        "return (float2)(-99.0, -99.0);\n"
>>>
>>> +
>>> +    "const sampler_t samp =  CLK_NORMALIZED_COORDS_TRUE |\n"
>>> +                            "CLK_ADDRESS_CLAMP_TO_EDGE |\n"
>>> +                            "CLK_FILTER_LINEAR;\n"
>>> +
>>> +    "float4  fSrcCoords = read_imagef(srcCoords,samp,fDst);\n"
>>>
>>> -    "float4  fSrcCoords = read_imagef(srcCoords,\n"
>>> -                                     "CLK_NORMALIZED_COORDS_TRUE | 
>>> \n"
>>> -                                         
>>> "CLK_ADDRESS_CLAMP_TO_EDGE |
>>> \n"
>>> -                                        "CLK_FILTER_LINEAR,\n"
>>> -                                     "fDst);\n"
>>> -
>>>
>>>    "return (float2)(fSrcCoords.x, fSrcCoords.y);\n"
>>>
>>> "}\n";
>>>
>>>
>>> After solving the compilation error, I'm stuck with  :
>>>
>>> """
>>> 0ERROR 1: Error at file gdalwarpkernel_opencl.c line 1391:
>>> CL_INVALID_IMAGE_SIZE
>>> ERROR 1: Error at file gdalwarpkernel_opencl.c line 1391:
>>> CL_INVALID_IMAGE_SIZE
>>> ERROR 1: Error at file gdalwarpkernel_opencl.c line 2292:
>>> CL_INVALID_IMAGE_SIZE
>>> ERROR 1: Error at file gdalwarpkernel_opencl.c line 1391:
>>> CL_INVALID_IMAGE_SIZE
>>> ERROR 1: OpenCL routines reported failure (-40) on line 2570.
>>> """
>>>
>>> The revelant line is :
>>> """
>>>
>>>       //Make a fake image so we don't have a NULL pointer
>>>       (*srcImag) = clCreateImage2D(warper->context,  
>>> CL_MEM_READ_ONLY,
>>>
>>> &imgFmt,
>>>
>>>                                    1, 1, sz, NULL, &err);
>>>
>>>       handleErr(err);
>>>
>>> """
>>>
>>> Any ideas ? Did you try with ATI or NVidia cards ?
>>>
>>> I've attached the output of CLInfo if it can help.
>>>
>>> Best regards,
>>>
>>> Even
>>>
>>> Le lundi 06 d?cembre 2010 15:50:04, Seth Price a ?crit :
>>>> Over the summer I rewrote the warper to use OpenCL. There was a  
>>>> 2x to
>>>> 50x speedup. Here is a description of what I did:
>>>> http://osgeo-org.1803224.n2.nabble.com/gdal-dev-gdalwarp-OpenCL-Performa
>>>> nce -Week-9-td5341226.html
>>>>
>>>> ~Seth
>>>>
>>>> On Dec 6, 2010, at 5:10 AM, Konstantin Baumann wrote:
>>>>> Hi,
>>>>>
>>>>> what benefit/improvement would the OpenCL integration bring to  
>>>>> GDAL?
>>>>> Additional functionality or a speedup of existing functions?
>>>>> Probably only operations on images and/or rasters are supported;
>>>>> reprojection/warping and filtering would be good candidates,  
>>>>> right?
>>>>> What concrete operations would be supported?
>>>>>
>>>>> Kosta
>>>>>
>>>>> -----Original Message-----
>>>>> From: gdal-dev-bounces@lists.osgeo.org
>>>>> [mailto:gdal-dev-bounces@lists.osgeo.org ] On Behalf Of Frank
>>>>> Warmerdam
>>>>> (External)
>>>>> Sent: Monday, December 06, 2010 1:43 AM
>>>>> To: Seth Price
>>>>> Cc: Philippe Vachon; gdal-dev; Wolf Bergenheim
>>>>> Subject: [gdal-dev] Re: OpenCL, GRASS, GDAL, and You
>>>>>
>>>>> On 10-09-23 10:09 AM, Seth Price wrote:
>>>>>> Hey all, I was just wondering if there was any progress in
>>>>>> integrating
>>>>>> the OpenCL code into trunk in each project? I haven't heard
>>>>>> anything,
>>>>>> but it would be a shame to just leave the code sit, or wait until
>>>>>> the
>>>>>> code branches have significantly diverged.
>>>>>> ~Seth
>>>>>
>>>>> Seth,
>>>>>
>>>>> Last week I went out and bought a new AMD/ATI machine in the hopes
>>>>> (amoung
>>>>> other goals) that OpenCL would work on it with the ATI OpenCL SDK.
>>>>> Unfortunately I have discovered that the ATI Radion 4200 HD is not
>>>>> supported
>>>>> for OpenCL stuff.  :-(
>>>>>
>>>>> Nevertheless, with some persistance I was able to build the ATI  
>>>>> SDK,
>>>>> and
>>>>> configure GDAL to build against it.  So I have integrated OpenCL
>>>>> support
>>>>> in trunk.  It is not enabled by default, but you can enable it  
>>>>> with
>>>>> the
>>>>> --with-opencl directive.  If the include files and libraries are
>>>>> in a
>>>>> non-standard location you can also use the --with-opencl-include  
>>>>> and
>>>>>
>>>>> --with-opencl-lib directives to configure like this:
>>>>>   --with-opencl \
>>>>>   --with-opencl-include=/home/warmerda/pkg/ati-stream-sdk-v2.2-
>>>>>
>>>>> lnx64/include \
>>>>>
>>>>> --with-opencl-lib="-L/home/warmerda/pkg/ati-stream-sdk-v2.2-lnx64/
>>>>> lib/x86_64
>>>>> -lOpenCL" \
>>>>>
>>>>> I ran into a few issues:
>>>>>
>>>>> 1) It seems the include file from ATI is <cl/opencl.h> not  
>>>>> <OpenCL/
>>>>> OpenCL.h>
>>>>> as it is on the Mac.  I've put a platform dependent ifdef but I
>>>>> don't now
>>>>> what the situation will be on other machines.
>>>>>
>>>>> 2) In your get_device() function you were passing NULL in for the
>>>>> platform.
>>>>> The online docs indicate this as an option but warn that behavior
>>>>> then is
>>>>> platform dependent.  The ATI SDK just fails with an invalid  
>>>>> platform
>>>>> error.
>>>>> So I updated the code to fetch a platform id and use that.
>>>>>
>>>>> 3) On my system it falls back to using the CPU but it turns out  
>>>>> the
>>>>> CPU
>>>>> does not offer "image" support in my case.  I added some extra  
>>>>> logic
>>>>> to
>>>>> look for this capability so a better error could be reported.
>>>>>
>>>>> 4) I restructured things a bit so that the OpenCL warper case can
>>>>> return
>>>>> CE_Warning to indicate to the high level warper that OpenCL should
>>>>> be
>>>>> skipped and other mechanisms used.  That is what it does not if it
>>>>> fails
>>>>> to find a suitable device, or some of the other specific checks.
>>>>>
>>>>> 5) I made a few changes to use CPLDebug instead of printf for  
>>>>> debug
>>>>> output.
>>>>>
>>>>> I haven't tried this yet on your Mac.  I avoided using the account
>>>>> you
>>>>> kindly offered because I find the Mac is often a perverse build
>>>>> environment
>>>>> and I didn't want to establish the "norm" based on it.  I might  
>>>>> try
>>>>> it out
>>>>> tonight though.
>>>>>
>>>>> I have also not yet tried it on windows, and likely won't in the
>>>>> near future.
>>>>> Perhaps someone else will pick up the ball there.  The code itself
>>>>> just
>>>>> depends on having HAVE_OPENCL defined at least in the alg  
>>>>> directory
>>>>> and
>>>>> of course appropriate include and link options.
>>>>>
>>>>> (cc:ed to the list so everyone is aware of the availability).
>>>>>
>>>>> Best regards,
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>> <clinfo_ati_radeon_hd_5400.txt>

From sebastian.ovide at gmail.com  Wed Dec  8 04:38:46 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Wed Dec  8 04:39:11 2010
Subject: [gdal-dev] ogr + python: find polygons in x,y
Message-ID: <AANLkTi=2tfkuJEdQPrrVNWfTTZr0C0YXiRbS5hYT-ovC@mail.gmail.com>

Hi All,

Using Python + Gdal/OGR is there any efficient way of finding all the
polygons that contains the point X,Y ?

thanks ?

-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101208/9e8bda43/attachment-0001.html
From peifer at gmx.eu  Wed Dec  8 05:45:33 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed Dec  8 05:48:17 2010
Subject: [gdal-dev] gdal_translate: GDAL: Should not happen. Cannot find
	laea_grid.asc
Message-ID: <4CFF61CD.5060102@gmx.eu>

Hi,

This is most likely a minor issue, but it looks to me that the above 
"should not happen" message always appears when gdal_translating a .vrt 
file that refers to an .asc file. There are 2 GDALClose() for the .asc.

Hermann



$ gdal_translate --debug on laea_grid.vrt laea_grid.tif \
     -co compress=lzw -co tiled=yes

GDAL: GDALOpen(laea_grid.vrt, this=0x236e6d0) succeeds as VRT.
Input file size is 10000, 10000
0GDAL: GDALDefaultOverviews::OverviewScan()
GDAL: GDALOpen(GTIFF_RAW:laea_grid.tif, this=0x2372180) succeeds as GTiff.
GDAL: GDALDatasetCopyWholeRaster(): 9728*256 swaths, bInterleave=0
AAIGrid: Loaded SRS from laea_grid.prj
GDAL: GDALOpen(laea_grid.asc, this=0x24324b0) succeeds as AAIGrid.
...10...20...30...40...50...60...70...80...90...100 - done.
GDAL: GDALClose(laea_grid.tif, this=0x2372180)
GDAL: GDALClose(laea_grid.vrt, this=0x236e6d0)
GDAL: GDALClose(laea_grid.asc, this=0x24324b0)
GDAL: GDALClose(laea_grid.asc, this=0x2371ad0)
GDAL: Should not happen. Cannot find laea_grid.asc, this=0x2371ad0 in 
phSharedDatasetSet
GDAL: GDALDeregister_GTiff() called.


From jgomezdans at gmail.com  Wed Dec  8 07:16:03 2010
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Wed Dec  8 07:24:24 2010
Subject: [gdal-dev] ogr + python: find polygons in x,y
In-Reply-To: <AANLkTi=2tfkuJEdQPrrVNWfTTZr0C0YXiRbS5hYT-ovC@mail.gmail.com>
References: <AANLkTi=2tfkuJEdQPrrVNWfTTZr0C0YXiRbS5hYT-ovC@mail.gmail.com>
Message-ID: <AANLkTim86_O-n9+zmqBA6kbEwhU1PZ61TFLvVDwhVk6y@mail.gmail.com>

Hi,

On 8 December 2010 09:38, Sebastian E. Ovide <sebastian.ovide@gmail.com> wrote:
> Using Python + Gdal/OGR?is there any efficient way of finding all the
> polygons that contains the point X,Y ?

This is my try. Not the most efficient, but you could always use a
spatial index and a spatial filter:
<http://gist.github.com/733207>

Jose
From namrata.r.sorte at gmail.com  Wed Dec  8 07:50:21 2010
From: namrata.r.sorte at gmail.com (Namrata)
Date: Wed Dec  8 07:50:23 2010
Subject: [gdal-dev] Problem using Union - want to join 2 geometry
Message-ID: <1291812621641-5815141.post@n2.nabble.com>


Hi All,

I am trying to use Union function in OGRGeometry. But the unified geometry
is giving just a single point. So I am wondering what is going wrong??

Basically I want to join two geometry (can say disjoint) so as to have a
single geometry. So the method can compute the close points of those two
different geometry and connect them.

Can anybody please help me in finding right method to do so. It will be
really of great help.

Thanks,
Namrata



-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Problem-using-Union-want-to-join-2-geometry-tp5815141p5815141.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Wed Dec  8 08:45:14 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec  8 08:45:23 2010
Subject: [gdal-dev] gdal_translate: GDAL: Should not happen. Cannot find
	laea_grid.asc
In-Reply-To: <4CFF61CD.5060102@gmx.eu>
References: <4CFF61CD.5060102@gmx.eu>
Message-ID: <1291815914.4cff8beaa5344@webmail.free.fr>

Herman,

yes the warning was a minor annoyance but should not have caused any problem.
I've just pushed as fix in SVN so it doesn't appear in that situation. It's
linked to the caching mechanism behind VRTs that differ the opening of dataset
until real I/O is required. There are some complexicities/tricks in the
implementation to pretend that the "proxy" dataset is shared, whereas it isn't
really (and can't be). oh well, I stop here as I guess it doesn't make any sense
to outsiders. If you're interested in the details and have a few hours and
aspirin, go have a look at gcore/gdalproxypool.cpp, frmts/vrt/vrtsources.cpp and
gcore/gdaldataset.cpp and how they interact ;-)

> Hi,
>
> This is most likely a minor issue, but it looks to me that the above
> "should not happen" message always appears when gdal_translating a .vrt
> file that refers to an .asc file. There are 2 GDALClose() for the .asc.
>
> Hermann
>
>
>
> $ gdal_translate --debug on laea_grid.vrt laea_grid.tif \
>      -co compress=lzw -co tiled=yes
>
> GDAL: GDALOpen(laea_grid.vrt, this=0x236e6d0) succeeds as VRT.
> Input file size is 10000, 10000
> 0GDAL: GDALDefaultOverviews::OverviewScan()
> GDAL: GDALOpen(GTIFF_RAW:laea_grid.tif, this=0x2372180) succeeds as GTiff.
> GDAL: GDALDatasetCopyWholeRaster(): 9728*256 swaths, bInterleave=0
> AAIGrid: Loaded SRS from laea_grid.prj
> GDAL: GDALOpen(laea_grid.asc, this=0x24324b0) succeeds as AAIGrid.
> ...10...20...30...40...50...60...70...80...90...100 - done.
> GDAL: GDALClose(laea_grid.tif, this=0x2372180)
> GDAL: GDALClose(laea_grid.vrt, this=0x236e6d0)
> GDAL: GDALClose(laea_grid.asc, this=0x24324b0)
> GDAL: GDALClose(laea_grid.asc, this=0x2371ad0)
> GDAL: Should not happen. Cannot find laea_grid.asc, this=0x2371ad0 in
> phSharedDatasetSet
> GDAL: GDALDeregister_GTiff() called.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From sebastian.ovide at gmail.com  Wed Dec  8 11:40:48 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Wed Dec  8 11:41:10 2010
Subject: [gdal-dev] ogr + python: find polygons in x,y
In-Reply-To: <AANLkTim86_O-n9+zmqBA6kbEwhU1PZ61TFLvVDwhVk6y@mail.gmail.com>
References: <AANLkTi=2tfkuJEdQPrrVNWfTTZr0C0YXiRbS5hYT-ovC@mail.gmail.com>
	<AANLkTim86_O-n9+zmqBA6kbEwhU1PZ61TFLvVDwhVk6y@mail.gmail.com>
Message-ID: <AANLkTikckMG7um-S9sGo7uiVYPXyd6B03U8CSnNphyd_@mail.gmail.com>

Hi Jose,

thanks for that. I've used SetSpatialFilterRect(x,y,x+0.01,y+0.01)


On Wed, Dec 8, 2010 at 12:16 PM, Jose Gomez-Dans <jgomezdans@gmail.com>wrote:

> Hi,
>
> On 8 December 2010 09:38, Sebastian E. Ovide <sebastian.ovide@gmail.com>
> wrote:
> > Using Python + Gdal/OGR is there any efficient way of finding all the
> > polygons that contains the point X,Y ?
>
> This is my try. Not the most efficient, but you could always use a
> spatial index and a spatial filter:
> <http://gist.github.com/733207>
>
> Jose
>



-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101208/81b06d54/attachment.html
From warmerdam at pobox.com  Wed Dec  8 12:46:18 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Dec  8 12:46:21 2010
Subject: [gdal-dev] Re: several No data value
In-Reply-To: <a8b5a32e-ca93-406a-b4cf-1c53150b00d0@o14g2000prn.googlegroups.com>
References: <4CF7A06A.7020701@gmail.com> <4CF95BAD.40705@pobox.com> 
	<a8b5a32e-ca93-406a-b4cf-1c53150b00d0@o14g2000prn.googlegroups.com>
Message-ID: <4CFFC46A.50407@pobox.com>

On 10-12-06 09:53 AM, ludovic wrote:
>
> Frank, thanks for your response :
>
> On 3 d?c, 22:05, Frank Warmerdam<warmer...@pobox.com>  wrote:
>>
>> GDAL only supports single nodata values as part of the data model.  You
>> can add arbitrary metadata describing other nodata values, but generally
>> GDAL itself and other client software won't realize the significance of
>> these other values.
>
> Ok one data value is not a problem for my data if i can "merge" all
> invalid values.
> For this i thought modify the driver to add a parameter flag () :
> A) By default the behaviour will be the standard gdal process : only
> one null value
> B) if the parameter flag of this driver is set, then all invalid value
> is replaced by null standard value
> in the dataset.
> My question is : is it possible to modify the driver to have this
> behaviour ?
> It is not a problem for me to create a patch but i don't know is it
> possible to "overwrite" (or "change") the gdal read function in a
> driver ?
>
> If is the reading behaviour of gdal can't be changed in a driver, too
> bad ! I would do this has a higher level software.

Ludovic,

I have lost track of what driver we are discussing.  It is certainly
possible for a theory to remap various nodata values to a single one
if that is perceived as appropriate for that driver.  However, in the
situation you described it seems plausible that some folks would want
to distinguish the various kinds of nodata values and that merging
them is interfering with access to the original raster data in a way
that might be detrimental.

I hesitate to bring it up, but another option is to return a validity
mask for the dataset derived by checking for the various nodata values.
There is already automated support for generating validity masks from
regular bands with single nodata values built into the core.  One
downside to this approach (not counting complexity) is that relatively
few applications honour the mask concept at this time.

   http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From gregor at hostgis.com  Wed Dec  8 19:40:44 2010
From: gregor at hostgis.com (Gregor at HostGIS)
Date: Wed Dec  8 19:40:44 2010
Subject: [gdal-dev] Python geometry.Transform() returns code 6
Message-ID: <4D00258C.1000409@hostgis.com>

Hey all. I am having a problem with the geometry.Transform() method in 
OGR for Python. Short version: geometry.Transform() returns a code 6. A 
code 6, according to the OGR source is simply OGRERROR

II guess the rest is best explained by example:

from osgeo import ogr, osr

shapefile  = "zt04_d00.shp" 

driver     = ogr.GetDriverByName('ESRI Shapefile')
datasource = driver.Open(shapefile,0)
layer      = datasource.GetLayer()
feat       = layer.GetFeature(0)
geom       = feat.GetGeometryRef()

# ta-da, a geometry and here is its WKT. Good
geom.ExportToWkt()

# Generate the source and target SRS
# and a SRS transform object
# these all return code 0 which seems good

sourceSR = osr.SpatialReference()
sourceSR.ImportFromProj4('+proj=longlat +ellps=WGS84 +datum=WGS84 
+no_defs  <>')

targetSR = osr.SpatialReference()
targetSR.ImportFromProj4('+proj=tmerc +lat_0=0 +lon_0=36 +k=0.9996 
+x_0=500000 +y_0=10000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs  <>')

coordTrans = osr.CoordinateTransformation(sourceSR, targetSR)

# And now the error: a code 6 but no further explanation
geom.Transform(coordTrans)


Any ideas?

-- 
HostGIS, Open Source solutions for the global GIS community
Greg Allensworth - SysAdmin, Programmer, GIS Person, Security
    Network+   Server+   A+   Security+   Linux+
    PHP   PostgreSQL   MySQL   DHTML/JavaScript/AJAX

"No one cares if you can back up ? only if you can recover."
From namrata.r.sorte at gmail.com  Thu Dec  9 02:47:24 2010
From: namrata.r.sorte at gmail.com (Namrata)
Date: Thu Dec  9 02:47:26 2010
Subject: [gdal-dev] Re: Problem using Union - want to join 2 geometry
In-Reply-To: <1291812621641-5815141.post@n2.nabble.com>
References: <1291812621641-5815141.post@n2.nabble.com>
Message-ID: <1291880844236-5818134.post@n2.nabble.com>



Probably I think I must use some different method to merge all the polygons.
Please help me finding out to do so.

Thanks in advance!
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Problem-using-Union-want-to-join-2-geometry-tp5815141p5818134.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From pcorti at gmail.com  Thu Dec  9 03:34:15 2010
From: pcorti at gmail.com (Paolo Corti)
Date: Thu Dec  9 03:34:47 2010
Subject: [gdal-dev] Python geometry.Transform() returns code 6
In-Reply-To: <4D00258C.1000409@hostgis.com>
References: <4D00258C.1000409@hostgis.com>
Message-ID: <AANLkTi=ZWL3wWgJTVu9G_g8QZbZigH1Bys18yyS93170@mail.gmail.com>

> # And now the error: a code 6 but no further explanation
> geom.Transform(coordTrans)

Hi Gregor
your code is correct. I think it may be related to your
dataset/feature geometry: could
you kindly provide the wkt of the geometry that is failing (print
geom.ExportToWkt()) ?
P

-- 
Paolo Corti
GIS specialist and web developer
web: http://www.paolocorti.net
twitter: @paolo_corti
From viji at fedoraproject.org  Thu Dec  9 08:18:18 2010
From: viji at fedoraproject.org (Viji V Nair)
Date: Thu Dec  9 08:18:41 2010
Subject: [gdal-dev] image-io extension
Message-ID: <AANLkTikBYxgJuWa36tzLae9qg7WbJ+k9f-hP_av8=EMT@mail.gmail.com>

Hi,

I am one of the GDAL co-maintainer for Fedora, I would like to have
the image-io extension support, currently it been supported through
the following patch from image-io. But I dont think this is a good
idea as the modifications are bit heavy.

https://imageio-ext.dev.java.net/svn/imageio-ext/trunk/patches/gdal1.7.2.patch
(Username : guest, Password: guest)

Is there any work going on related to this? Please share the ideas

Thanks
Viji
From jukka.rahkonen at mmmtike.fi  Thu Dec  9 08:31:49 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Dec  9 08:32:17 2010
Subject: [gdal-dev] Re: Multipart to singlepart
References: <1291636468236-5807508.post@n2.nabble.com>
Message-ID: <loom.20101209T142644-322@post.gmane.org>

iomeneandrei <aborruso <at> tin.it> writes:

> 
> 
> Hi all,
> is there in OGR a command that I can use to convert multipart polygons in
> singleparts?

If it does not matter to use some other tool than OGR, OpenJUMP can explode
multifeatures and geometry collections. I made a little test and it correctly
exploded a multipolygon with two polygons containing holes into two simple
polygons with holes. Functionality is behind the right-click context menu.

-Jukka Rahkonen-

From pim.vandenhelm at tno.nl  Thu Dec  9 09:25:57 2010
From: pim.vandenhelm at tno.nl (Helm, P.W. (Pim) van den)
Date: Thu Dec  9 09:26:01 2010
Subject: [gdal-dev] importFromEPSG fails in a VS2008 project
Message-ID: <E4AFFB7FE0C9F44C80E634251C6284C3014DE8@EXC-MBX01.tsn.tno.nl>

Hi all,

I have downloaded gdal-1.7.3 and build this via VS2008 succesfully. Furthermore I created an evironment variable GDAL_DATA that points to my location of the folder "gdal-1.7.3\data".

I copied the gdal17.dll towards my release location of my VS2008 application that will use this dll and added the gdal_i.lib and include files to my application aswell. The needed #includes are also in my project and know when the following code is called:

void CGeoLoc::ConvertDeltaToLatLon(int nr, double *x, double *y)
{
   double tx = m_geoX,
          ty = m_geoY;

   OGRSpatialReference out, in;
   OGRCoordinateTransformation *trans;
   OGRErr ogrErr;

   ogrErr = out.importFromEPSG(4326);

   double xref = m_geoX, yref = m_geoY;
   if (m_geoSystem != GS_MERCATOR)
   {
       ogrErr = in.importFromEPSG(3857);
       trans = OGRCreateCoordinateTransformation(&m_spatialRef, &in);

       if( trans == NULL || !trans->Transform(1, &xref, &yref))
          AfxMessageBox("Transform of point failed." );
   }

   for (int i=0; i < nr; i++)
   {
      x[i] += xref;
      y[i] += yref;
   }

   trans = OGRCreateCoordinateTransformation(&in, &out);
   if( trans == NULL || !trans->Transform(nr, x, y))
      AfxMessageBox("Transform of point failed." );
}

My code builds perfectly and also runs, so no issues there, but unfortunately the importFromEPSG fails in finding my geocoordinate systems and returns ogrErr = 6. What am I doing wrong? Or what do I need to add to get my application to work with gdal?

The code did work with the FWtools version (which I didn't like due to the large amount of used DLL's for functions I don't need. So I would really like to use the gdal build only.

Kind regards,
Pim
This e-mail and its contents are subject to the DISCLAIMER at http://www.tno.nl/disclaimer/email.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101209/eefaa17d/attachment.html
From ivan.lucena at pmldnet.com  Thu Dec  9 09:35:35 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Thu Dec  9 09:35:37 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gaW1wb3J0RnJvbUVQU0cgZmFpbHMgaW4gYSBWUzIwMDggcHJvamVjdA==?=
Message-ID: <20101209143535.22043.qmail@s466.sureserver.com>

Helm,

Have you used the Microsoft Process Monitor. That could help.

Ivan

>  -------Original Message-------
>  From: Helm, P.W. (Pim) van den <pim.vandenhelm@tno.nl>
>  To: gdal-dev@lists.osgeo.org <gdal-dev@lists.osgeo.org>
>  Subject: [gdal-dev] importFromEPSG fails in a VS2008 project
>  Sent: Dec 09 '10 09:25
>  
>  Hi all,
>  
>  I have downloaded gdal-1.7.3 and build this via VS2008 succesfully.
>  Furthermore I created an evironment variable GDAL_DATA that points to my
>  location of the folder "gdal-1.7.3\data".
>  
>  I copied the gdal17.dll towards my release location of my VS2008
>  application that will use this dll and added the gdal_i.lib and include
>  files to my application aswell. The needed #includes are  also in my
>  project and know when the following code is called:
>  
>  void CGeoLoc::ConvertDeltaToLatLon(int nr, double *x, double *y)
>  {
>  double tx = m_geoX,
>  ty = m_geoY;
>  
>  OGRSpatialReference out, in;
>  OGRCoordinateTransformation *trans;
>  OGRErr ogrErr;
>  
>  ogrErr = out.importFromEPSG(4326);
>  
>  double xref = m_geoX, yref = m_geoY;
>  if (m_geoSystem != GS_MERCATOR)
>  {
>  ogrErr = in.importFromEPSG(3857);
>  trans = OGRCreateCoordinateTransformation(&m_spatialRef, &in);
>  
>  if( trans == NULL || !trans->Transform(1, &xref, &yref))
>  AfxMessageBox("Transform of point failed." );
>  }
>  
>  for (int i=0; i < nr; i++)
>  {
>  x[i] += xref;
>  y[i] += yref;
>  }
>  
>  trans = OGRCreateCoordinateTransformation(&in, &out);
>  if( trans == NULL || !trans->Transform(nr, x, y))
>  AfxMessageBox("Transform of point failed." );
>  }
>  
>  My code builds perfectly and also runs, so no issues there, but
>  unfortunately the importFromEPSG fails in finding my geocoordinate systems
>  and returns ogrErr = 6. What am  I doing wrong? Or what do I need to add to
>  get my application to work with gdal?
>  
>  The code did work with the FWtools version (which I didn't like due to the
>  large amount of used DLL's for functions I don't need. So I would really
>  like to use the gdal  build only.
>  
>  Kind regards,
>  Pim This e-mail and its contents are subject to the DISCLAIMER at
>  http://www.tno.nl/disclaimer/email.html
>  --------------------
>  _______________________________________________
>  gdal-dev mailing list
>  [LINK: compose.php?to=gdal-dev@lists.osgeo.org] gdal-dev@lists.osgeo.org
>  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jason.roberts at duke.edu  Thu Dec  9 10:21:23 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Thu Dec  9 10:21:31 2010
Subject: [gdal-dev] Creating aux.xml files for GTiff using Python
In-Reply-To: <1D673F86DDA00841A1216F04D1CE70D64268000319@EXCH2.nws.oregonstate.edu>
References: <1D673F86DDA00841A1216F04D1CE70D64268000319@EXCH2.nws.oregonstate.edu>
Message-ID: <010601cb97b4$bddfcf60$399f6e20$@roberts@duke.edu>

Matt,

Since nobody else more knowledgeable replied and I was in the original
discussion, I'll take a shot.

To review: for some situations and formats, the following code would work:

statistics = band.GetStatistics(False, True)     # Force calculation of
statistics
band.SetStatistics(*statistics)                  # Write statistics to the
file

But that was not working for GTiff.

And now a short digression. I had a further problem which I did not mention
on gdal-dev, best described by this comment in my code:

        # Do not use GDAL to calculate statistics or build pyramids.
        # Even though GDAL can do it faster than the geoprocessor, we
        # prefer to use the geoprocessor to maximize the compatibility
        # of the output raster with ArcGIS. For example, I do not know
        # how to get GDAL to build an ArcGIS-compatible histogram.
        # Without the histogram ArcGIS defaults to displaying integer
        # rasters using a black-to-white stretch rather than a unique
        # value classifier with random colors. ArcGIS users will
        # expect colors; to get the necessary histogram, we have to
        # calculate statistics with the geoprocessor.

By "histogram", I meant that when I loaded the integer raster into ArcMap
and tried to set the symbology to unique values, ArcMap prompted with
"Histogram does not exist. Create one?" Try as I might, I could not figure
out how to create the raster with GDAL in a way that did not result in that
prompt. I discovered that calling ArcGIS's own Calculate Statistics
geoprocessing tool solved the problem. Because that was ok in my situation,
I gave up on GDAL and just did that.

As a result, I never ended up implementing Frank's suggestion in my own
situation. But it looked unusual to me. In English, that call to
gdal_translate means "copy xxx.tif to xxx.aux, using HFA as the output
format (ERDAS .img format), and for that output, calculate statistics and
use an aux file". I'm not fully certain, but I think xxx.aux would then be a
fully copy of xxx.tif, but in HFA format. That seemed at first like a
bizarre suggestion, because I did not want a duplicate raster. But I
concluded that Frank was saying that a side effect of this procedure was to
create a .aux file that was compatible with the original GTiff. Presumably,
I would then delete the HFA file that I did not need.

If my understanding is correct, it should be possible to reproduce it with
the Python bindings by just calling CreateCopy with the equivalent
parameters. Have you tried that?

See also this thread
http://lists.osgeo.org/pipermail/gdal-dev/2010-November/026790.html. I'm not
sure whether or not that is relevant.

Hope that helps,

Jason


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Gregory, Matthew
Sent: Tuesday, December 07, 2010 6:22 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Creating aux.xml files for GTiff using Python

Hi all,

There have been a few threads on this listserv about ArcGIS not recognizing
statistics built into GeoTiffs.  For example, see:

  http://lists.osgeo.org/pipermail/gdal-dev/2009-September/022044.html

Because GeoTiffs don't build .aux.xml files by default (even with
GDAL_PAM_ENABLED set to YES or at least I think this is the case), I'm
running into the same issues.  When a GeoTiff is brought into ArcMap, it
complains about statistics not being built and then builds them for you.  

Frank's fix, however, in the above thread:

  'gdal_translate -of HFA -co AUX=YES -co STATISTICS=YES xxx.tif xxx.aux'

looks like it first creates the accompanying .aux.xml file for the GeoTiff
(e.g. xxx.tif.aux.xml) and then creates two other files xxx.aux and
xxx.aux.aux.xml.  When I bring xxx.tif into ArcMap, it correctly reads the
statistics and everything is displayed correctly.

My question is whether or not it's possible to force creation of the
.aux.xml files through the Python bindings.  I've tried both
ComputeBandStats() and ComputeStatistics(False) with no success.

This falls under the category of annoyances, so not a huge issue.

Thanks for pointers.

matt


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From gregor at hostgis.com  Thu Dec  9 11:36:27 2010
From: gregor at hostgis.com (Gregor at HostGIS)
Date: Thu Dec  9 11:36:25 2010
Subject: [gdal-dev] Python geometry.Transform() returns code 6
In-Reply-To: <AANLkTi=ZWL3wWgJTVu9G_g8QZbZigH1Bys18yyS93170@mail.gmail.com>
References: <4D00258C.1000409@hostgis.com>
	<AANLkTi=ZWL3wWgJTVu9G_g8QZbZigH1Bys18yyS93170@mail.gmail.com>
Message-ID: <4D01058B.2020100@hostgis.com>

On 12/9/2010 12:34 AM, Paolo Corti wrote:
> dataset/feature geometry: could you kindly provide the wkt of
 > the geometry that is failing (print geom.ExportToWkt()) ?

Sure. It's a zip code area for Arizona, just some SHP I grabbed off 
National Atlas.


POLYGON ((-110.347639068730317 36.99816234640781,-110.347324999999998 
36.985801000000002,-110.346867000000003 36.981426999999996,-110.345697 
36.978889000000002,-110.333367999999993 36.971325,-110.332819 
36.969386,-110.340749000000002 36.962310000000002,-110.343828999999999 
36.958187000000002,-110.346508 36.953263999999997,-110.356714999999994 
36.943769000000003,-110.353414999999998 36.943801,-110.345744999999994 
36.942678,-110.345744999999994 36.94095,-110.345096999999996 
36.939222999999998,-110.344232000000005 
36.938876999999998,-110.341624999999993 36.938571000000003,-110.331485 
36.940173,-110.324139000000002 36.939740999999998,-110.322194999999994 
36.939050000000002,-110.31917 36.933866999999999,-110.317874000000003 
36.932658000000004,-110.310744 36.930239,-110.306833999999995 
36.929622999999999,-110.302864 36.933301999999998,-110.286456 
36.954318999999998,-110.287710000000004 36.959654,-110.289249999999996 
36.961257000000003,-110.288964000000007 
36.962425000000003,-110.286794999999998 
36.964508000000002,-110.283456999999999 
36.964621999999999,-110.282315999999994 
36.964163999999997,-110.275722999999999 
36.967001000000003,-110.270056999999994 
36.972951000000002,-110.266221999999999 36.975698999999999,-110.252983 
36.977513000000002,-110.249202999999994 36.976807,-110.248352999999994 
36.977023000000003,-110.246628 36.978281000000003,-110.244861 
36.980961,-110.233191000000005 36.985132,-110.232418999999993 
36.981285999999997,-110.234669999999994 36.976019,-110.235524999999996 
36.974989,-110.227734999999996 36.973778000000003,-110.220057999999995 
36.978706000000003,-110.206901000000002 36.978966,-110.19001 
36.977536,-110.182931999999994 36.982301999999997,-110.182105000000007 
36.982393000000002,-110.174628999999996 36.976692,-110.167895 
36.974836000000003,-110.159819999999996 
36.971468000000002,-110.145499999999998 
36.964022999999997,-110.141530000000003 
36.970706999999997,-110.131050999999999 
36.979264999999998,-110.128510000000006 36.98066,-110.121026999999998 
36.982379999999999,-110.113693999999995 36.984969999999997,-110.11618 
36.990098000000003,-110.117665000000002 
36.991562000000002,-110.122203999999996 36.992224,-110.128755999999996 
36.993940000000002,-110.126250637569726 
36.998461044928035,-110.021777999999998 
36.998601999999998,-110.000876000000005 
36.998502000000002,-110.000676999999996 36.997968,-110.000676999999996 
36.916784,-110.000676999999996 36.902391999999999,-110.000676999999996 
36.880115000000004,-110.000676999999996 
36.879907000000003,-110.000675999999999 
36.853188000000003,-110.000675999999999 36.844504999999998,-110.000675 
36.750430999999999,-109.996386999999999 36.752448,-109.992914999999996 
36.751213999999997,-109.990634999999997 
36.748089999999998,-109.989096000000004 36.744838999999999,-109.98514 
36.741658,-109.982180999999997 36.740468999999997,-109.977999999999994 
36.741751999999998,-109.975382999999994 36.741982,-109.974812999999997 
36.741616,-109.972637000000006 36.735303999999999,-109.974153999999999 
36.732114000000003,-109.965734999999995 
36.731498000000002,-109.952849999999998 
36.729095999999998,-109.950856999999999 
36.717601999999999,-109.948524000000006 
36.719526000000002,-109.948436999999998 
36.704642999999997,-109.925377999999995 36.703978999999997,-109.920344 
36.704847999999998,-109.885219000000006 36.717292,-109.881519999999995 
36.719510999999997,-109.876481999999996 
36.724888999999997,-109.869797000000005 36.727916,-109.855689999999996 
36.730210999999997,-109.842664999999997 
36.734243999999997,-109.840162000000007 
36.733420000000002,-109.841438999999994 
36.724604999999997,-109.850821999999994 
36.719679999999997,-109.863502999999994 
36.713814999999997,-109.871065000000002 36.711362,-109.877336 
36.688921,-109.880609000000007 36.684114,-109.882290999999995 
36.677819,-109.911567000000005 36.679363000000002,-109.917451999999997 
36.677714999999999,-109.918679999999995 
36.655482999999997,-109.922403000000003 
36.650218000000002,-109.922008000000005 
36.637464999999999,-109.922803999999999 
36.624509000000003,-109.879003999999995 
36.623930999999999,-109.878947999999994 36.625957,-109.878209999999996 
36.626392000000003,-109.857625999999996 
36.630383999999999,-109.853080000000006 
36.627799000000003,-109.846709000000004 
36.616042999999998,-109.839920000000006 
36.612816000000002,-109.839152999999996 
36.612976000000003,-109.833045999999996 
36.609864000000002,-109.811860999999993 
36.601874000000002,-109.805301999999998 36.598508000000002,-109.803258 
36.596195999999999,-109.796615000000003 36.594316999999997,-109.794826 
36.592668000000003,-109.792726000000002 
36.589646000000002,-109.788330000000002 
36.578518000000003,-109.783454000000006 36.560498000000003,-109.780704 
36.554268999999998,-109.779769000000002 
36.550857999999998,-109.781814999999995 36.543692,-109.785221000000007 
36.540258,-109.787548999999999 36.538862000000002,-109.792516000000006 
36.531078999999998,-109.795185000000004 36.523249,-109.797483 
36.519768999999997,-109.799469000000002 
36.518234999999997,-109.800774000000004 
36.515534000000002,-109.795158999999998 36.511938,-109.803723000000005 
36.5,-109.810303000000005 36.486606000000002,-109.821701000000004 
36.478546,-109.825244999999995 36.474767999999997,-109.828022000000004 
36.469043999999997,-109.831168000000005 36.464669999999998,-109.84675 
36.447037000000002,-109.848903000000007 36.445228,-109.851254999999995 
36.444173999999997,-109.864738000000003 36.433796999999998,-109.866889 
36.430934,-109.870198000000002 36.422232,-109.879872000000006 
36.415567000000003,-109.878145000000004 36.414352,-109.877636999999993 
36.411765000000003,-109.881690000000006 
36.408881999999998,-109.896760999999998 
36.407170999999998,-109.900526999999997 
36.408636999999999,-109.904663999999997 
36.406761000000003,-109.907100999999997 
36.403990999999998,-109.910672000000005 
36.396711000000003,-109.910473999999994 
36.395634999999999,-109.909597000000005 36.39481,-109.909200999999996 
36.39291,-109.909626000000003 36.391513000000003,-109.912063000000003 
36.387942000000002,-109.914243999999997 
36.387072000000003,-109.915574000000007 
36.387346999999998,-109.919199000000006 
36.389912000000002,-109.921125000000004 36.392499999999998,-109.923333 
36.394126,-109.926505000000006 36.394767000000002,-109.928968999999995 
36.394401000000002,-109.934349999999995 
36.391126999999997,-109.937039999999996 
36.388379999999998,-109.942390000000003 36.385393,-109.955899000000002 
36.381256999999998,-109.967025000000007 
36.375782999999998,-109.973310999999995 36.37601,-109.981262999999998 
36.373645000000003,-109.983641000000006 
36.371630000000003,-109.988027000000002 36.365904,-109.988394 
36.364415,-109.994056 36.364412999999999,-110.000674000000004 
36.363447999999998,-110.000674000000004 
36.365989999999996,-110.002730999999997 36.365279,-110.014566000000002 
36.364552000000003,-110.021105000000006 
36.365540000000003,-110.034440000000004 
36.365177000000003,-110.042706999999993 36.362409,-110.047151999999997 
36.360050999999999,-110.053889999999996 
36.359386999999998,-110.058732000000006 36.359639,-110.063006 
36.364127000000003,-110.069856999999999 36.367173,-110.071414000000004 
36.368293999999999,-110.075463999999997 
36.373216999999997,-110.077815999999999 
36.374999000000003,-110.092146999999997 
36.383198999999998,-110.096734999999995 36.384847,-110.104724000000004 
36.388851000000003,-110.116936999999993 
36.400134999999999,-110.125680000000003 
36.405683000000003,-110.136201999999997 
36.407828000000002,-110.139007000000007 
36.407119999999999,-110.145947000000007 
36.407739999999997,-110.147023000000004 36.408428,-110.151638000000005 
36.413994000000002,-110.157670999999993 
36.415483999999999,-110.159824999999998 36.413927,-110.166825000000003 
36.404449,-110.170536999999996 36.401403999999999,-110.171670000000006 
36.401038,-110.177758999999995 36.402802,-110.183113000000006 
36.405755999999997,-110.187447000000006 36.407153,-110.192064000000002 
36.405915999999998,-110.195858999999999 
36.401519999999998,-110.195406000000006 
36.399779000000002,-110.196312000000006 
36.397032000000003,-110.202032000000003 
36.388236999999997,-110.212934000000004 
36.381618000000003,-110.216359999999995 
36.380633000000003,-110.220068999999995 
36.380173999999997,-110.225279999999998 
36.381157000000002,-110.228198000000006 
36.383400000000002,-110.227887999999993 36.385255,-110.229786000000004 
36.387475000000002,-110.237262 36.385755000000003,-110.239953 
36.386853000000002,-110.242277 36.389577000000003,-110.247405 
36.391199999999998,-110.254789000000002 36.391703,-110.259461999999999 
36.390698,-110.264927999999998 36.390676999999997,-110.268835999999993 
36.391297000000002,-110.274501 36.391092999999998,-110.276426 
36.393405999999999,-110.275375999999994 
36.397207000000002,-110.275630000000007 
36.400343999999997,-110.277386000000007 
36.400573999999999,-110.282683000000006 
36.399866000000003,-110.284183999999996 
36.398766999999999,-110.287497000000002 36.401035,-110.289904000000007 
36.404584,-110.294803999999999 36.403784000000002,-110.298119 
36.401563000000003,-110.303955000000002 36.399937999999999,-110.307648 
36.399849000000003,-110.308571999999998 
36.399137000000003,-110.311290999999997 36.393366,-110.314265000000006 
36.395519,-110.316643999999997 36.396320000000003,-110.317464999999999 
36.396320000000003,-110.319051000000002 36.394511,-110.320014 
36.392588000000003,-110.319192 36.389473000000002,-110.317408 
36.385626999999999,-110.315113999999994 
36.383749000000002,-110.314519000000004 
36.379375000000003,-110.320635999999993 
36.379649999999998,-110.323609000000005 
36.376832999999998,-110.323549999999997 
36.374625000000002,-110.321370000000002 
36.371867999999999,-110.315366999999995 
36.367265000000003,-110.313186999999999 36.367128,-110.310950000000005 
36.367952000000002,-110.308515 36.370105000000002,-110.305711000000002 
36.369920999999998,-110.306731999999997 
36.367837999999999,-110.309818000000007 
36.365273000000002,-110.312111000000002 
36.364060000000002,-110.314659000000006 
36.357556000000002,-110.314631000000006 36.356319999999997,-110.303055 
36.335825,-110.304725000000005 36.332757,-110.310469999999995 
36.327947999999999,-110.316441999999995 
36.326734999999999,-110.321337999999997 36.326757,-110.322468999999998 
36.326253999999999,-110.324364000000003 
36.318100999999999,-110.325241000000005 36.316727,-110.330389999999994 
36.312491,-110.337487999999993 36.302664999999998,-110.340034000000003 
36.300237000000003,-110.342986999999994 36.298465,-110.352287000000004 
36.298461000000003,-110.356046000000006 36.300553,-110.358932999999993 
36.303894999999997,-110.362883999999994 36.306004,-110.363757000000007 
36.304859,-110.364040000000003 36.302987000000002,-110.368896000000007 
36.304831999999998,-110.376946000000004 36.3091,-110.377031782226567 
36.323246598925785,-110.376143999999996 
36.331792999999998,-110.374660000000006 
36.336359000000002,-110.377429000000006 
36.333702000000002,-110.378423999999995 
36.328023999999999,-110.378118999999998 
36.319916999999997,-110.380894999999995 36.318013,-110.387005000000002 
36.317861,-110.4003 36.32414,-110.402169 36.324072,-110.406981999999999 
36.317478,-110.4067 36.316746000000002,-110.403813 
36.314638000000002,-110.402626999999995 
36.310927999999997,-110.404071000000002 
36.307768000000003,-110.406647000000007 36.306441,-110.408939000000004 
36.305892,-110.412729999999996 36.306648000000003,-110.414653 
36.307839999999999,-110.415755000000004 
36.312373999999998,-110.414934000000002 36.31416,-110.416999000000004 
36.315122000000002,-110.423507 36.314528000000003,-110.428794999999994 
36.311667999999997,-110.433296999999996 
36.307132000000003,-110.435872000000003 
36.306742999999997,-110.440144000000004 
36.309468000000003,-110.440116000000003 
36.310887999999998,-110.444755999999998 
36.314619999999998,-110.446962999999997 36.313727,-110.44999 
36.311459999999997,-110.457657999999995 36.316268,-110.465243 
36.318671000000002,-110.466544999999996 
36.319310999999999,-110.464650000000006 
36.323365000000003,-110.462783999999999 
36.325448999999999,-110.460548000000003 
36.326090999999998,-110.459332000000003 
36.327854000000002,-110.455741000000003 36.340449,-110.455684000000005 
36.341158999999998,-110.456788000000003 36.342762,-110.458657000000002 
36.344501999999999,-110.462363999999994 
36.343952000000002,-110.465703000000005 36.341203,-110.471052 
36.339576,-110.475099999999998 36.339872999999997,-110.477421000000007 
36.340307000000003,-110.480222999999995 
36.341794999999998,-110.480366000000004 36.344107,-110.475640999999996 
36.347819,-110.477367999999998 36.348802999999997,-110.480793000000006 
36.349052999999998,-110.484615000000005 
36.347655000000003,-110.496672000000004 36.346871,-110.505052000000006 
36.349161000000002,-110.507654000000002 
36.352550999999998,-110.511701000000002 36.35427,-110.513966999999994 
36.352049999999998,-110.521951999999999 
36.347382000000003,-110.524189000000007 
36.347954999999999,-110.531321000000005 36.351278,-110.532679999999999 
36.350248,-110.538257000000002 36.348005,-110.545616999999993 
36.347341,-110.548475999999994 36.347707999999997,-110.554306999999994 
36.346196999999997,-110.559231999999994 36.342236,-110.560080999999997 
36.342236,-110.560986999999997 36.343015,-110.561014999999998 
36.343885,-110.562854999999999 36.346839000000003,-110.564553000000004 
36.347479999999997,-110.567043999999996 
36.347639999999998,-110.566817999999998 36.354785,-110.566394000000003 
36.356043999999997,-110.562854999999999 
36.356845999999997,-110.552012000000005 36.362088999999997,-110.542327 
36.369897000000002,-110.527913999999996 
36.372549999999997,-110.518596000000002 36.378059,-110.505308999999997 
36.387098999999999,-110.491665999999995 36.39262,-110.476847000000006 
36.402386999999997,-110.456693 36.414088,-110.456923000000003 
36.415694000000002,-110.454223999999996 36.417088,-110.448256 
36.418615000000003,-110.445014999999998 
36.420203999999998,-110.441112000000004 36.422722,-110.440657999999999 
36.423501000000002,-110.440657999999999 
36.423982000000002,-110.448421999999994 36.430118,-110.448932999999997 
36.434010999999998,-110.448905999999994 36.442689,-110.447659000000002 
36.444178,-110.448027999999994 36.448070999999999,-110.447800999999998 
36.452283999999999,-110.446214999999995 
36.458534999999998,-110.443833999999995 36.463825,-110.441424999999995 
36.472136999999996,-110.434932000000003 
36.479533000000004,-110.433853999999997 
36.486082000000003,-110.434364000000002 36.494166,-110.437540999999996 
36.500295999999999,-110.448920999999999 
36.508324999999999,-110.460747999999995 36.512839,-110.467352000000005 
36.517645000000002,-110.472533999999996 36.518487,-110.473151 
36.525227,-110.474817000000002 36.530430000000003,-110.478581000000005 
36.536527999999997,-110.482899000000003 
36.541829999999997,-110.483455000000006 36.546636999999997,-110.485782 
36.549140999999999,-110.498440000000002 
36.544936999999997,-110.500029999999995 36.544913,-110.502011999999993 
36.545988999999999,-110.502947000000006 
36.548026999999998,-110.503398000000004 
36.551873999999998,-110.502849999999995 36.563896,-110.499934999999994 
36.569094,-110.497376000000003 36.571190999999999,-110.494545000000002 
36.573562000000003,-110.492756999999997 
36.575875000000003,-110.491566000000006 
36.578372000000002,-110.490292999999994 
36.584738000000002,-110.491004000000004 
36.586432000000002,-110.493787999999995 
36.588994999999997,-110.495464999999996 
36.591329999999999,-110.496835000000004 
36.600923999999999,-110.497801999999993 
36.602846999999997,-110.501705999999999 36.6077,-110.501705999999999 
36.608085000000003,-110.496791999999999 
36.608763000000003,-110.495120999999997 
36.609445999999998,-110.495649999999998 36.612943,-110.499548000000004 
36.615124000000002,-110.502401000000006 36.617949000000003,-110.50421 
36.621581999999997,-110.504936 36.626683,-110.504459999999995 
36.631767000000004,-110.500397000000007 
36.632773999999998,-110.501712999999995 
36.636619000000003,-110.502932999999999 
36.638680999999998,-110.504266999999999 
36.639299999999999,-110.501194999999996 
36.639947999999997,-110.495639999999995 
36.638201000000002,-110.490953000000005 
36.633747999999997,-110.492851999999999 36.642246999999998,-110.491928 
36.645156999999998,-110.490335000000002 
36.647598000000002,-110.487066999999996 
36.651041999999997,-110.485811999999996 
36.650975000000003,-110.484516999999997 
36.650238000000002,-110.484363999999999 
36.643768999999999,-110.485944000000003 36.641396,-110.486024 
36.640379000000003,-110.485787999999999 
36.639733999999997,-110.484390000000005 
36.639409999999998,-110.482144000000005 
36.640312999999999,-110.481081000000003 36.642136999999998,-110.482236 
36.652757999999999,-110.481547000000006 
36.653888000000002,-110.480423000000002 
36.654017000000003,-110.479163999999997 
36.652740999999999,-110.476844999999997 
36.645685999999998,-110.473809000000003 
36.643752999999997,-110.473539000000002 36.645826,-110.472408 
36.648057,-110.471534000000005 36.648497999999996,-110.468592 
36.648525999999997,-110.463614000000007 36.651243,-110.464518999999996 
36.655402000000002,-110.483524000000003 36.659056,-110.492637999999999 
36.658465999999997,-110.495998999999998 
36.655442999999998,-110.498498999999995 
36.659269999999999,-110.498164000000003 
36.661391000000002,-110.502896000000007 
36.660539999999997,-110.507990000000007 
36.658723999999999,-110.512122000000005 
36.664585000000002,-110.517452000000006 36.666097,-110.513189999999994 
36.674646000000003,-110.515738999999996 
36.673867999999999,-110.518811999999997 
36.672110000000004,-110.520544999999998 
36.672223000000002,-110.521232999999995 
36.673046999999997,-110.522245999999996 36.679333,-110.527167000000006 
36.679333,-110.530502999999996 36.677661,-110.532754999999995 
36.677795000000003,-110.532171000000005 
36.680670999999997,-110.536447999999993 
36.681817000000002,-110.544830000000005 
36.682315000000003,-110.551083000000006 
36.685200999999999,-110.554948999999993 36.689827,-110.556028999999995 
36.692368999999999,-110.554152000000002 
36.698115999999999,-110.554350999999997 
36.699993999999997,-110.559156000000002 36.70004,-110.567800000000005 
36.695757999999998,-110.570500999999993 
36.692804000000002,-110.574481000000006 
36.690078999999997,-110.575050000000005 
36.694338000000002,-110.575591000000003 
36.695138999999998,-110.576841999999999 
36.699168999999998,-110.578918999999999 
36.701275000000003,-110.583611000000005 36.703496,-110.588843999999995 
36.707844999999999,-110.592117000000002 36.712974000000003,-110.598489 
36.716247000000003,-110.594140999999993 36.725178,-110.594684 
36.734451,-110.590790999999996 36.748877999999998,-110.592044999999999 
36.751488999999999,-110.594065999999998 
36.753435000000003,-110.599615999999997 
36.755195999999998,-110.603800000000007 
36.758285999999998,-110.605194999999995 
36.759887999999997,-110.605480999999997 
36.761902999999997,-110.606193000000005 36.763185,-110.611433000000005 
36.768174999999999,-110.612826999999996 36.768678,-110.613853000000006 
36.770372000000002,-110.613598999999994 36.774172999999998,-110.609082 
36.787478999999998,-110.618014000000002 36.779049,-110.618753999999996 
36.778956999999998,-110.629869999999997 
36.779755999999999,-110.637129000000002 
36.779392999999999,-110.640969999999996 
36.782234000000003,-110.641225000000006 
36.783493999999997,-110.644268999999994 36.787204000000003,-110.648567 
36.787785999999997,-110.646103999999994 36.792617,-110.644503 
36.797252999999998,-110.644379999999998 
36.802875999999998,-110.646843000000004 36.808796,-110.652877000000004 
36.815503999999997,-110.660634000000002 36.820141,-110.668023000000005 
36.822803999999998,-110.673136999999997 
36.821364000000003,-110.673810000000003 36.827489,-110.673096999999999 
36.829504,-110.673181999999997 36.832664,-110.676340999999994 
36.841799999999999,-110.676426000000006 36.847845,-110.676367999999997 
36.849401999999998,-110.675541999999993 
36.850271999999997,-110.673547999999997 36.850524,-110.672635999999997 
36.851393999999999,-110.670669000000004 36.85698,-110.667248999999998 
36.860230999999999,-110.658185000000003 
36.867305000000002,-110.654022999999995 36.870072999999998,-110.650289 
36.871628999999999,-110.649660999999995 36.872568,-110.651625999999993 
36.878273,-110.652964999999995 36.880059000000003,-110.659547000000003 
36.882969000000003,-110.666614999999993 
36.886862999999998,-110.674167999999995 
36.890047000000003,-110.677873000000005 
36.895083999999997,-110.674335999999997 
36.903671000000003,-110.671367000000004 36.917752,-110.669141999999994 
36.92114,-110.667629000000005 36.926338,-110.669139999999999 
36.928581999999999,-110.674728999999999 
36.934627999999996,-110.679261999999994 36.946672,-110.677750000000003 
36.948504,-110.677378000000004 36.958967999999999,-110.682427000000004 
36.963113,-110.689532 36.964601000000002,-110.690045999999995 
36.965082000000002,-110.691529000000003 
36.969729999999998,-110.690130999999994 36.976804999999999,-110.694868 
36.985413999999999,-110.696979999999996 36.987451999999998,-110.698864 
36.987817999999997,-110.700633999999994 36.991000999999997,-110.702776 
36.998716999999999,-110.702634000000003 
36.999312000000003,-110.701577999999998 36.999997,-110.701549999999997 
37.002659,-110.702061586381205 37.003400850309887,-110.625690000000006 
37.003720999999999,-110.625610513600748 
37.003435784096844,-110.625604999999993 37.003416,-110.599512000000004 
37.003447999999999,-110.500690000000006 
37.004260000000002,-110.490908000000005 
37.003565999999999,-110.470190000000002 
36.997996999999998,-110.347639068730317 36.99816234640781))
From warmerdam at pobox.com  Thu Dec  9 12:08:40 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec  9 12:08:58 2010
Subject: [gdal-dev] Python geometry.Transform() returns code 6
In-Reply-To: <4D00258C.1000409@hostgis.com>
References: <4D00258C.1000409@hostgis.com>
Message-ID: <4D010D18.6050301@pobox.com>

On 10-12-08 07:40 PM, Gregor at HostGIS wrote:
> Hey all. I am having a problem with the geometry.Transform() method in
> OGR for Python. Short version: geometry.Transform() returns a code 6. A
...
> sourceSR = osr.SpatialReference()
> sourceSR.ImportFromProj4('+proj=longlat +ellps=WGS84 +datum=WGS84
> +no_defs <>')
>
> targetSR = osr.SpatialReference()
> targetSR.ImportFromProj4('+proj=tmerc +lat_0=0 +lon_0=36 +k=0.9996
> +x_0=500000 +y_0=10000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs <>')
>
> coordTrans = osr.CoordinateTransformation(sourceSR, targetSR)
>
> # And now the error: a code 6 but no further explanation
> geom.Transform(coordTrans)

Gregor,

If I run:

from osgeo import osr, ogr


sourceSR = osr.SpatialReference()
sourceSR.ImportFromProj4('+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs <>')

targetSR = osr.SpatialReference()
targetSR.ImportFromProj4('+proj=tmerc +lat_0=0 +lon_0=36 +k=0.9996 +x_0=500000 
+y_0=10000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs <>')

ct = osr.CoordinateTransformation(sourceSR, targetSR )

geom = ogr.CreateGeometryFromWkt( 'POINT(-110 36)' )

geom.Transform( ct )

I get:

warmerda@gdal65[58]% python test.py
OGRCT: PROJ >= 4.8.0 features enabled
OGRCT: Source: +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs
OGRCT: Target: +proj=tmerc +lat_0=0 +lon_0=36 +k=0.9996 +x_0=500000 
+y_0=10000000 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs
ERROR 1: latitude or longitude exceeded limits

I believe the problem is that your data (-110 longitude) is no where near
the central meridian of your transverse mercator projection (+36 longitude).

Some projections have areas of validity and attempts to reproject
outside those will result in a failure with code 6.

I'm not sure why you did not see the error message I am seeing.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From hobu.inc at gmail.com  Thu Dec  9 12:11:06 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Thu Dec  9 12:11:16 2010
Subject: [gdal-dev] Python geometry.Transform() returns code 6
In-Reply-To: <4D010D18.6050301@pobox.com>
References: <4D00258C.1000409@hostgis.com> <4D010D18.6050301@pobox.com>
Message-ID: <710E0CDE-6F56-4153-94C8-12F56323A37E@gmail.com>


On Dec 9, 2010, at 11:08 AM, Frank Warmerdam wrote:

> On 10-12-08 07:40 PM, Gregor at HostGIS wrote:
>> Hey all. I am having a problem with the geometry.Transform() method in
>> OGR for Python. Short version: geometry.Transform() returns a code 6. A
> ...
>> sourceSR = osr.SpatialReference()
>> sourceSR.ImportFromProj4('+proj=longlat +ellps=WGS84 +datum=WGS84
>> +no_defs <>')
>> 
>> targetSR = osr.SpatialReference()
>> targetSR.ImportFromProj4('+proj=tmerc +lat_0=0 +lon_0=36 +k=0.9996
>> +x_0=500000 +y_0=10000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs <>')
>> 
>> coordTrans = osr.CoordinateTransformation(sourceSR, targetSR)
>> 
>> # And now the error: a code 6 but no further explanation
>> geom.Transform(coordTrans)
> 
> Gregor,
> 
> If I run:
> 
> from osgeo import osr, ogr
> 
> 
> sourceSR = osr.SpatialReference()
> sourceSR.ImportFromProj4('+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs <>')
> 
> targetSR = osr.SpatialReference()
> targetSR.ImportFromProj4('+proj=tmerc +lat_0=0 +lon_0=36 +k=0.9996 +x_0=500000 +y_0=10000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs <>')
> 
> ct = osr.CoordinateTransformation(sourceSR, targetSR )
> 
> geom = ogr.CreateGeometryFromWkt( 'POINT(-110 36)' )
> 
> geom.Transform( ct )
> 
> I get:
> 
> warmerda@gdal65[58]% python test.py
> OGRCT: PROJ >= 4.8.0 features enabled
> OGRCT: Source: +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs
> OGRCT: Target: +proj=tmerc +lat_0=0 +lon_0=36 +k=0.9996 +x_0=500000 +y_0=10000000 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs
> ERROR 1: latitude or longitude exceeded limits
> 
> I believe the problem is that your data (-110 longitude) is no where near
> the central meridian of your transverse mercator projection (+36 longitude).
> 
> Some projections have areas of validity and attempts to reproject
> outside those will result in a failure with code 6.
> 
> I'm not sure why you did not see the error message I am seeing.

IIRC, older versions of the bindings silenced error messages to stdout but didn't throw exceptions by default.  Gregor might try issuing 'osr.UseExceptions()' or 'gdal.UseExceptions()' and then running his code to see if he can force it to give him a message.

Howard
From gregor at hostgis.com  Thu Dec  9 12:15:10 2010
From: gregor at hostgis.com (Gregor at HostGIS)
Date: Thu Dec  9 12:15:08 2010
Subject: [gdal-dev] Python geometry.Transform() returns code 6
In-Reply-To: <710E0CDE-6F56-4153-94C8-12F56323A37E@gmail.com>
References: <4D00258C.1000409@hostgis.com> <4D010D18.6050301@pobox.com>
	<710E0CDE-6F56-4153-94C8-12F56323A37E@gmail.com>
Message-ID: <4D010E9E.4030802@hostgis.com>

> IIRC, older versions of the bindings silenced error messages
 > to stdout but didn't throw exceptions by default.  Gregor
 > might try issuing 'osr.UseExceptions()'

Ah, good advice hobu. I had set ogr.UseExceptions() in my real code, but 
not osr's version. The resulting error is slightly less vague:

 >>> firstgeom.Transform(coordTrans)
Traceback (most recent call last):
   File "<stdin>", line 1, in <module>
   File 
"/usr/lib64/python2.5/site-packages/GDAL-1.7.1-py2.5-linux-x86_64.egg/osgeo/ogr.py", 
line 3770, in Transform
     return _ogr.Geometry_Transform(self, *args)
RuntimeError: OGR Error: General Error

Without the exceptions, the return was simply the number 6, and I hit 
the source to discover that this indicates a general error.

-- 
HostGIS, Open Source solutions for the global GIS community
Greg Allensworth - SysAdmin, Programmer, GIS Person, Security
    Network+   Server+   A+   Security+   Linux+
    PHP   PostgreSQL   MySQL   DHTML/JavaScript/AJAX

"No one cares if you can back up ? only if you can recover."
From gregor at hostgis.com  Thu Dec  9 12:20:48 2010
From: gregor at hostgis.com (Gregor at HostGIS)
Date: Thu Dec  9 12:20:45 2010
Subject: [gdal-dev] Python geometry.Transform() returns code 6
In-Reply-To: <4D010D18.6050301@pobox.com>
References: <4D00258C.1000409@hostgis.com> <4D010D18.6050301@pobox.com>
Message-ID: <4D010FF0.1090008@hostgis.com>

On 12/9/2010 9:08 AM, Frank Warmerdam wrote:
> ERROR 1: latitude or longitude exceeded limits
 > I'm not sure why you did not see the error message I am seeing.

No idea here. Maybe an older version of this or that?

> I believe the problem is that your data (-110 longitude) is no where near
> the central meridian of your transverse mercator projection (+36
> longitude).

Hey, you're right; but this SRS should be valid for the whole world... 
Or rather, it would be had it been entered correctly. This was the SRS 
the user left behind, but apparently NOT the one they wanted. Oops.

I have swapped out the target SRS for the correct one, and now I get 
properly mangled coordinates. Yay!

Thanks Frank.

-- 
HostGIS, Open Source solutions for the global GIS community
Greg Allensworth - SysAdmin, Programmer, GIS Person, Security
    Network+   Server+   A+   Security+   Linux+
    PHP   PostgreSQL   MySQL   DHTML/JavaScript/AJAX

"No one cares if you can back up ? only if you can recover."
From shoney at wsi.com  Thu Dec  9 12:35:23 2010
From: shoney at wsi.com (Honey, Steve)
Date: Thu Dec  9 12:36:25 2010
Subject: [gdal-dev] basic gdal_translate question
Message-ID: <213DD30C0D0DB94F82F5B9721FC0017232440B@EXCHANGE.ad.wsicorp.com>

Hi

 

I'm new to gdal so please forgive me if this is a really dumb question.

I'm running a file through the command line utility gdal_translate.

 

Everything works as I expect except the corners of the equirectangular
grid are in Northing/Easting.

I would like it to output in degrees.  If there an option I can specify
on gdal_translate to put it in degrees?

Or is there another utility such as gdalwarp which will do the
conversion.

 

Or do I need to write a separate program which uses the gdal libraries?

 

Thanks

Steve

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101209/bcbdfc73/attachment.html
From gregor at hostgis.com  Thu Dec  9 12:45:50 2010
From: gregor at hostgis.com (Gregor at HostGIS)
Date: Thu Dec  9 12:45:47 2010
Subject: [gdal-dev] basic gdal_translate question
In-Reply-To: <213DD30C0D0DB94F82F5B9721FC0017232440B@EXCHANGE.ad.wsicorp.com>
References: <213DD30C0D0DB94F82F5B9721FC0017232440B@EXCHANGE.ad.wsicorp.com>
Message-ID: <4D0115CE.5050202@hostgis.com>

> I would like it to output in degrees. If there an option I can specify
> on gdal_translate to put it in degrees?
> Or is there another utility such as gdalwarp which will do the conversion.

You said it: gdalwarp is how you would reproject a image to a different 
SRS, say from UTM to lon-lat.

-- 
HostGIS, Open Source solutions for the global GIS community
Greg Allensworth - SysAdmin, Programmer, GIS Person, Security
    Network+   Server+   A+   Security+   Linux+
    PHP   PostgreSQL   MySQL   DHTML/JavaScript/AJAX

"No one cares if you can back up ? only if you can recover."
From aborruso at tin.it  Thu Dec  9 13:06:43 2010
From: aborruso at tin.it (iomeneandrei)
Date: Thu Dec  9 13:06:45 2010
Subject: [gdal-dev] Re: Multipart to singlepart
In-Reply-To: <loom.20101209T142644-322@post.gmane.org>
References: <1291636468236-5807508.post@n2.nabble.com>
	<loom.20101209T142644-322@post.gmane.org>
Message-ID: <1291918003256-5819931.post@n2.nabble.com>


Hi Jukka,
thank you for your time and for your advice.

Rahkonen Jukka wrote:
> 
> If it does not matter to use some other tool than OGR, OpenJUMP can
> explode
> multifeatures and geometry collections.
> 
My goal is to make this transformation in Python, and I did not want to
write either unnecessary code or complicated code (for me).
If I have a solid and interesting result, I will publish it here.

Best regards,

Andrea


-----
Andrea Borruso

----------------------------------------------------
email: aborruso@tin.it
website: http://blog.spaziogis.it
my 2.0 life: http://aborruso.spaziogis.it
feed: http://feeds2.feedburner.com/Tanto
38? 7' 48" N, 13? 21' 9" E
----------------------------------------------------
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Multipart-to-singlepart-tp5807508p5819931.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From pcorti at gmail.com  Thu Dec  9 13:50:49 2010
From: pcorti at gmail.com (Paolo Corti)
Date: Thu Dec  9 13:51:21 2010
Subject: [gdal-dev] Re: Multipart to singlepart
In-Reply-To: <1291918003256-5819931.post@n2.nabble.com>
References: <1291636468236-5807508.post@n2.nabble.com>
	<loom.20101209T142644-322@post.gmane.org>
	<1291918003256-5819931.post@n2.nabble.com>
Message-ID: <AANLkTi=A8T0PorYSgUn+-0mhLOJ0h-5=xHWDh73Zu8qx@mail.gmail.com>

> My goal is to make this transformation in Python, and I did not want to
> write either unnecessary code or complicated code (for me).
> If I have a solid and interesting result, I will publish it here.

Ciao Andrea
this code will do the trick (note that it will create a polygon for
each ring, so you will get a polygon for each hole as well)

import os
from osgeo import ogr

def multipoly2poly(in_lyr, out_lyr):
    for in_feat in in_lyr:
        geom = in_feat.GetGeometryRef()
        if geom.GetGeometryName() == 'MULTIPOLYGON':
            for geom_part in geom:
                addPolygon(geom_part.ExportToWkb(), out_lyr)
        else:
            addPolygon(geom.ExportToWkb(), out_lyr)

def addPolygon(simplePolygon, out_lyr):
    featureDefn = out_lyr.GetLayerDefn()
    polygon = ogr.CreateGeometryFromWkb(simplePolygon)
    out_feat = ogr.Feature(featureDefn)
    out_feat.SetGeometry(polygon)
    out_lyr.CreateFeature(out_feat)
    print 'Polygon added.'

from osgeo import gdal
gdal.UseExceptions()
driver = ogr.GetDriverByName('ESRI Shapefile')
in_ds = driver.Open('data/multipoly.shp', 0)
in_lyr = in_ds.GetLayer()
outputshp = 'data/poly.shp'
if os.path.exists(outputshp):
    driver.DeleteDataSource(outputshp)
out_ds = driver.CreateDataSource(outputshp)
out_lyr = out_ds.CreateLayer('poly', geom_type=ogr.wkbPolygon)
multipoly2poly(in_lyr, out_lyr)

-- 
Paolo Corti
GIS specialist and web developer
web: http://www.paolocorti.net
twitter: @paolo_corti
From even.rouault at mines-paris.org  Thu Dec  9 14:25:27 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Dec  9 14:25:35 2010
Subject: [gdal-dev] image-io extension
In-Reply-To: <AANLkTikBYxgJuWa36tzLae9qg7WbJ+k9f-hP_av8=EMT@mail.gmail.com>
References: <AANLkTikBYxgJuWa36tzLae9qg7WbJ+k9f-hP_av8=EMT@mail.gmail.com>
Message-ID: <201012092025.27602.even.rouault@mines-paris.org>

Hi Viji,

I maintain the GDAL Java bindings, but the image-io GDAL plugin is another 
project whose maintener is Daniele I think. He'll correct me if I'm wrong, but 
I saw his name on http://docs.codehaus.org/display/GEOTOOLS/ImageIO-EXT+GDAL 
;-) . I've CC'ed him so he has a chance to comment and explain the rational of 
the patch.

I wasn't aware of this patch. I've skimmed through it quickly, and it seems 
that it only replaces old-fashionned data structures like Vector to use more 
trendish ArrayList + Java 1.5 generics. Well, this is certainly not a bad idea 
(something to consider for GDAL 2.0 ?), but I fail to see why it was 
*necessary* . I'm not particularly keen on applying this patch in GDAL 
mainline as it changes the API of the Java bindings, thus breaking working 
code of other users. I fail to see why ImageIO-EXT cannot use the existing 
API, even if it is perhaps not as convenient as it could be if it was using 
more modern Java API.

Best regards,

Even

Le jeudi 09 d?cembre 2010 14:18:18, Viji V Nair a ?crit :
> Hi,
> 
> I am one of the GDAL co-maintainer for Fedora, I would like to have
> the image-io extension support, currently it been supported through
> the following patch from image-io. But I dont think this is a good
> idea as the modifications are bit heavy.
> 
> https://imageio-ext.dev.java.net/svn/imageio-ext/trunk/patches/gdal1.7.2.pa
> tch (Username : guest, Password: guest)
> 
> Is there any work going on related to this? Please share the ideas
> 
> Thanks
> Viji
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From David.Hildebrand at afsc.ca  Thu Dec  9 16:06:07 2010
From: David.Hildebrand at afsc.ca (David Hildebrand)
Date: Thu Dec  9 16:04:37 2010
Subject: [gdal-dev] GDALDeregister_GTiff()
References: <AANLkTikBYxgJuWa36tzLae9qg7WbJ+k9f-hP_av8=EMT@mail.gmail.com>
	<201012092025.27602.even.rouault@mines-paris.org>
Message-ID: <9188AB5935664040805E01E348A2B81D1BF69054@lacex1.afsc.ads>

I'm not sure if this is the right list to post this question or not.  I
have a MapServer application built with GDAL support but when I try to
access a 3-band TIFF image I get the error "GDAL: GDALDeregister_GTiff()
called.\r" showing up in my log file.  Does anyone know what the
GDALDeregister_GTiff() method is supposed to do?  I've been looking
through the GDAL documentation and I can't seem to find a reference to
the method.

Thanks.

===========================
David V. Hildebrand
Agriculture Financial Services Corporation
(403) 782-8239   

www.afsc.ca <http://www.afsc.ca>
This communication is intended for the use of the recipient to which it
is addressed, and may contain confidential, personal and/or privileged
information. Please contact Agriculture Financial Services Corporation
immediately if you are not the intended recipient of this communication,
and do not copy, distribute, or take action relying on it. Any
communication received in error, or subsequent reply, should be deleted
or destroyed. Please consider the environment before printing this
email.


From warmerdam at pobox.com  Thu Dec  9 16:12:36 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec  9 16:12:31 2010
Subject: [gdal-dev] GDALDeregister_GTiff()
In-Reply-To: <9188AB5935664040805E01E348A2B81D1BF69054@lacex1.afsc.ads>
References: <AANLkTikBYxgJuWa36tzLae9qg7WbJ+k9f-hP_av8=EMT@mail.gmail.com>
	<201012092025.27602.even.rouault@mines-paris.org>
	<9188AB5935664040805E01E348A2B81D1BF69054@lacex1.afsc.ads>
Message-ID: <4D014644.3020708@pobox.com>

On 10-12-09 04:06 PM, David Hildebrand wrote:
> I'm not sure if this is the right list to post this question or not.  I
> have a MapServer application built with GDAL support but when I try to
> access a 3-band TIFF image I get the error "GDAL: GDALDeregister_GTiff()
> called.\r" showing up in my log file.  Does anyone know what the
> GDALDeregister_GTiff() method is supposed to do?  I've been looking
> through the GDAL documentation and I can't seem to find a reference to
> the method.

David,

It is an information debug message, not an error.  It indicates that
the GeoTIFF driver is being cleaned up - presumably in msCleanup().
While it isn't particularly valuable to know about this specific driver
I have left it in as a marker that more general cleanup is occuring.

GDAL debug output is controlled by the CPL_DEBUG environment variable
which I imagine you have turned on.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From aborruso at tin.it  Thu Dec  9 16:21:29 2010
From: aborruso at tin.it (iomeneandrei)
Date: Thu Dec  9 16:21:31 2010
Subject: [gdal-dev] Re: Multipart to singlepart
In-Reply-To: <AANLkTi=A8T0PorYSgUn+-0mhLOJ0h-5=xHWDh73Zu8qx@mail.gmail.com>
References: <1291636468236-5807508.post@n2.nabble.com>
	<loom.20101209T142644-322@post.gmane.org>
	<1291918003256-5819931.post@n2.nabble.com>
	<AANLkTi=A8T0PorYSgUn+-0mhLOJ0h-5=xHWDh73Zu8qx@mail.gmail.com>
Message-ID: <1291929689490-5820800.post@n2.nabble.com>


Caro Paolo,

Paolo Corti wrote:
> 
> Ciao Andrea
> this code will do the trick (note that it will create a polygon for
> each ring, so you will get a polygon for each hole as well)
> [...]
> 
writing in groups like this is always a surprise and a great pleasure. Thank
you, thank you, thank you.

I have modified a little your code - https://gist.github.com/735330 - and I
have this message:
Polygon added.
Traceback (most recent call last):
  File "PaoloIsGreat.py ", line 32, in <module> multipoly2poly(in_lyr,
out_lyr)
  File "PaoloIsGreat.py ", line 8, in multipoly2poly for geom_part in geom:
TypeError: 'Geometry' object is not iterable

It seems that the object I'm trying to iterate is actually None. This is my
input file:
http://osgeo-org.1803224.n2.nabble.com/file/n5820800/poly.zip poly.zip 

As output I obtain only one polygon, and I should have three.

What do you think about?

Writing in groups like this is always a surprise and a great pleasure.

ciao,

a

-----
Andrea Borruso

----------------------------------------------------
email: aborruso@tin.it
website: http://blog.spaziogis.it
my 2.0 life: http://aborruso.spaziogis.it
feed: http://feeds2.feedburner.com/Tanto
38? 7' 48" N, 13? 21' 9" E
----------------------------------------------------
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Multipart-to-singlepart-tp5807508p5820800.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Thu Dec  9 16:46:05 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Dec  9 16:46:13 2010
Subject: [gdal-dev] Re: Multipart to singlepart
In-Reply-To: <1291929689490-5820800.post@n2.nabble.com>
References: <1291636468236-5807508.post@n2.nabble.com>
	<AANLkTi=A8T0PorYSgUn+-0mhLOJ0h-5=xHWDh73Zu8qx@mail.gmail.com>
	<1291929689490-5820800.post@n2.nabble.com>
Message-ID: <201012092246.05707.even.rouault@mines-paris.org>

> 
> I have modified a little your code - https://gist.github.com/735330 - and I
> have this message:
> Polygon added.
> Traceback (most recent call last):
>   File "PaoloIsGreat.py ", line 32, in <module> multipoly2poly(in_lyr,
> out_lyr)
>   File "PaoloIsGreat.py ", line 8, in multipoly2poly for geom_part in geom:
> TypeError: 'Geometry' object is not iterable

Geometry have been made iterable only since GDAL 1.7.0. You need to upgrade 
your GDAL version or modify a bit the script to make the iteration with the 
OGR API.

instead of :

for geom_part in geom:
	addPolygon(geom_part.ExportToWkb(), out_lyr)

try :

for i in range(geom.GetGeometryCount()):
	geom_part = geom.GetGeometryRef(i)
	addPolygon(geom_part.ExportToWkb(), out_lyr)
From David.Hildebrand at afsc.ca  Thu Dec  9 16:50:48 2010
From: David.Hildebrand at afsc.ca (David Hildebrand)
Date: Thu Dec  9 16:48:18 2010
Subject: [gdal-dev] GDALDeregister_GTiff()
References: <AANLkTikBYxgJuWa36tzLae9qg7WbJ+k9f-hP_av8=EMT@mail.gmail.com><201012092025.27602.even.rouault@mines-paris.org><9188AB5935664040805E01E348A2B81D1BF69054@lacex1.afsc.ads>
	<4D014644.3020708@pobox.com>
Message-ID: <9188AB5935664040805E01E348A2B81D1BF69056@lacex1.afsc.ads>

Frank:

I turned on CPL_DEBUG in my apache local configuration file and
re-started the server.  However, I am getting no other messages.
Incidentally, I am posting messages to the mapserver-users list with
respect to my problem of displaying 3-band images.

Thanks for your help. 

===========================
David V. Hildebrand
Agriculture Financial Services Corporation
(403) 782-8239   

www.afsc.ca <http://www.afsc.ca>
This communication is intended for the use of the recipient to which it
is addressed, and may contain confidential, personal and/or privileged
information. Please contact Agriculture Financial Services Corporation
immediately if you are not the intended recipient of this communication,
and do not copy, distribute, or take action relying on it. Any
communication received in error, or subsequent reply, should be deleted
or destroyed. Please consider the environment before printing this
email.


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Thursday, December 09, 2010 2:13 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] GDALDeregister_GTiff()

On 10-12-09 04:06 PM, David Hildebrand wrote:
> I'm not sure if this is the right list to post this question or not.
I
> have a MapServer application built with GDAL support but when I try to
> access a 3-band TIFF image I get the error "GDAL:
GDALDeregister_GTiff()
> called.\r" showing up in my log file.  Does anyone know what the
> GDALDeregister_GTiff() method is supposed to do?  I've been looking
> through the GDAL documentation and I can't seem to find a reference to
> the method.

David,

It is an information debug message, not an error.  It indicates that
the GeoTIFF driver is being cleaned up - presumably in msCleanup().
While it isn't particularly valuable to know about this specific driver
I have left it in as a marker that more general cleanup is occuring.

GDAL debug output is controlled by the CPL_DEBUG environment variable
which I imagine you have turned on.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


From aborruso at tin.it  Thu Dec  9 16:58:20 2010
From: aborruso at tin.it (iomeneandrei)
Date: Thu Dec  9 16:58:22 2010
Subject: [gdal-dev] Re: Multipart to singlepart
In-Reply-To: <201012092246.05707.even.rouault@mines-paris.org>
References: <1291636468236-5807508.post@n2.nabble.com>
	<loom.20101209T142644-322@post.gmane.org>
	<1291918003256-5819931.post@n2.nabble.com>
	<AANLkTi=A8T0PorYSgUn+-0mhLOJ0h-5=xHWDh73Zu8qx@mail.gmail.com>
	<1291929689490-5820800.post@n2.nabble.com>
	<201012092246.05707.even.rouault@mines-paris.org>
Message-ID: <1291931900608-5820973.post@n2.nabble.com>


Hi Even,

Even Rouault wrote:
> 
> Geometry have been made iterable only since GDAL 1.7.0. You need to
> upgrade 
> your GDAL version or modify a bit the script to make the iteration with
> the 
> OGR API.
> 
> instead of :
> 
> for geom_part in geom:
> 	addPolygon(geom_part.ExportToWkb(), out_lyr)
> 
> try :
> 
> for i in range(geom.GetGeometryCount()):
> 	geom_part = geom.GetGeometryRef(i)
> 	addPolygon(geom_part.ExportToWkb(), out_lyr)
> 

now it works perfectly!!

Thank you very much,

Andrea

-----
Andrea Borruso

----------------------------------------------------
email: aborruso@tin.it
website: http://blog.spaziogis.it
my 2.0 life: http://aborruso.spaziogis.it
feed: http://feeds2.feedburner.com/Tanto
38? 7' 48" N, 13? 21' 9" E
----------------------------------------------------
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Multipart-to-singlepart-tp5807508p5820973.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From sebastian.ovide at gmail.com  Thu Dec  9 19:40:44 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Thu Dec  9 19:41:08 2010
Subject: [gdal-dev] Re: Multipart to singlepart
In-Reply-To: <1291931900608-5820973.post@n2.nabble.com>
References: <1291636468236-5807508.post@n2.nabble.com>
	<loom.20101209T142644-322@post.gmane.org>
	<1291918003256-5819931.post@n2.nabble.com>
	<AANLkTi=A8T0PorYSgUn+-0mhLOJ0h-5=xHWDh73Zu8qx@mail.gmail.com>
	<1291929689490-5820800.post@n2.nabble.com>
	<201012092246.05707.even.rouault@mines-paris.org>
	<1291931900608-5820973.post@n2.nabble.com>
Message-ID: <AANLkTi=qOrCmcd0qX7jnvQ6iA7c98zXcq0GbBw_YvugK@mail.gmail.com>

Hi Andrea,

Just a note of warning:

if you have a point x,y that is inside the hole (so it doesn't belong the
the polygon), and you run some point in polygon query (intersection for
example) you will get that it is no part of any polygon.... but if you
convert the ring in two polygons using this method.... that point will
become part of a polygon (the ex hole)... So if for example the polygon
represent the field, the hole represent the water and the point is a boat,
after the conversion (ring to more polygons) the boat would be drained....
;)

Not sure if that is what you need....

On Thu, Dec 9, 2010 at 9:58 PM, iomeneandrei <aborruso@tin.it> wrote:

>
> Hi Even,
>
> Even Rouault wrote:
> >
> > Geometry have been made iterable only since GDAL 1.7.0. You need to
> > upgrade
> > your GDAL version or modify a bit the script to make the iteration with
> > the
> > OGR API.
> >
> > instead of :
> >
> > for geom_part in geom:
> >       addPolygon(geom_part.ExportToWkb(), out_lyr)
> >
> > try :
> >
> > for i in range(geom.GetGeometryCount()):
> >       geom_part = geom.GetGeometryRef(i)
> >       addPolygon(geom_part.ExportToWkb(), out_lyr)
> >
>
> now it works perfectly!!
>
> Thank you very much,
>
> Andrea
>
> -----
> Andrea Borruso
>
> ----------------------------------------------------
> email: aborruso@tin.it
> website: http://blog.spaziogis.it
> my 2.0 life: http://aborruso.spaziogis.it
> feed: http://feeds2.feedburner.com/Tanto
> 38? 7' 48" N, 13? 21' 9" E
> ----------------------------------------------------
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Multipart-to-singlepart-tp5807508p5820973.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101210/8ab6a5d4/attachment-0001.html
From simone.giannecchini at geo-solutions.it  Fri Dec 10 04:27:49 2010
From: simone.giannecchini at geo-solutions.it (Simone Giannecchini)
Date: Fri Dec 10 06:58:52 2010
Subject: [gdal-dev] image-io extension
In-Reply-To: <201012092025.27602.even.rouault@mines-paris.org>
References: <AANLkTikBYxgJuWa36tzLae9qg7WbJ+k9f-hP_av8=EMT@mail.gmail.com>
	<201012092025.27602.even.rouault@mines-paris.org>
Message-ID: <AANLkTinAoVSnuyWm2kvxi-_eUbUQhYN_xTn_wv3bbEhu@mail.gmail.com>

Ciao Even,
I have asked daniele to make those changes (which have not been reviewed yet)
in order to move away from the explicit usage of Vector and HashTable in method
signatures in favour of using the respective interfaces (List and Map).
Daniele can add more as needed...

As you mentioned this change can break old code, but it should
make the java bindings more ... javaish :).

We have other changes in the queue which we might submit to your review
early next year, but this is another topic...


Viji , I don't think you need to use the patch you are referring to since
that is needed for imageio-ext 1.1 which has not been released yet.
The latest (and greatest) is 1.0.8 which uses an older gdal version.

Ciao,
Simone.
-------------------------------------------------------
Ing. Simone Giannecchini
GeoSolutions S.A.S.
Founder

Via Poggio alle Viti 1187
55054? Massarosa (LU)
Italy

phone: +39 0584962313
fax:? ? ? +39 0584962313
mob:? ? +39 333 8128928


http://www.geo-solutions.it
http://geo-solutions.blogspot.com/
http://www.linkedin.com/in/simonegiannecchini
http://twitter.com/simogeo

-------------------------------------------------------



On Thu, Dec 9, 2010 at 8:25 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Hi Viji,
>
> I maintain the GDAL Java bindings, but the image-io GDAL plugin is another
> project whose maintener is Daniele I think. He'll correct me if I'm wrong, but
> I saw his name on http://docs.codehaus.org/display/GEOTOOLS/ImageIO-EXT+GDAL
> ;-) . I've CC'ed him so he has a chance to comment and explain the rational of
> the patch.
>
> I wasn't aware of this patch. I've skimmed through it quickly, and it seems
> that it only replaces old-fashionned data structures like Vector to use more
> trendish ArrayList + Java 1.5 generics. Well, this is certainly not a bad idea
> (something to consider for GDAL 2.0 ?), but I fail to see why it was
> *necessary* . I'm not particularly keen on applying this patch in GDAL
> mainline as it changes the API of the Java bindings, thus breaking working
> code of other users. I fail to see why ImageIO-EXT cannot use the existing
> API, even if it is perhaps not as convenient as it could be if it was using
> more modern Java API.
>
> Best regards,
>
> Even
>
> Le jeudi 09 d?cembre 2010 14:18:18, Viji V Nair a ?crit :
>> Hi,
>>
>> I am one of the GDAL co-maintainer for Fedora, I would like to have
>> the image-io extension support, currently it been supported through
>> the following patch from image-io. But I dont think this is a good
>> idea as the modifications are bit heavy.
>>
>> https://imageio-ext.dev.java.net/svn/imageio-ext/trunk/patches/gdal1.7.2.pa
>> tch (Username : guest, Password: guest)
>>
>> Is there any work going on related to this? Please share the ideas
>>
>> Thanks
>> Viji
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From ludovic.mercier at gmail.com  Fri Dec 10 08:50:45 2010
From: ludovic.mercier at gmail.com (ludovic)
Date: Fri Dec 10 08:50:47 2010
Subject: [gdal-dev] Re: several No data value
In-Reply-To: <4CFFC46A.50407@pobox.com>
References: <4CF7A06A.7020701@gmail.com> <4CF95BAD.40705@pobox.com>
	<a8b5a32e-ca93-406a-b4cf-1c53150b00d0@o14g2000prn.googlegroups.com>
	<4CFFC46A.50407@pobox.com>
Message-ID: <c9814f47-383d-4aaf-84d5-2c987c568c47@w21g2000vby.googlegroups.com>

Thanks Frank for these remarks.

I work on pds driver (in fact the subdriver ISIS2). I agree with you
that
"some folks would want to distinguish the various kinds of nodata
values".

And it's the reason i would like the default behaviour is "we have
various no data value"
but we can add a flag option for that we try to open a file we can
merge all no data value.

I had read the rfc15 and i will think about this

Best Regards

Ludovic


On 8 d?c, 18:46, Frank Warmerdam <warmer...@pobox.com> wrote:
> I have lost track of what driver we are discussing. ?It is certainly
> possible for a theory to remap various nodata values to a single one
> if that is perceived as appropriate for that driver. ?However, in the
> situation you described it seems plausible that some folks would want
> to distinguish the various kinds of nodata values and that merging
> them is interfering with access to the original raster data in a way
> that might be detrimental.
>
> I hesitate to bring it up, but another option is to return a validity
> mask for the dataset derived by checking for the various nodata values.
> There is already automated support for generating validity masks from
> regular bands with single nodata values built into the core. ?One
> downside to this approach (not counting complexity) is that relatively
> few applications honour the mask concept at this time.
>
> ? ?http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam, warmer...@pobox.com
> light and sound - activate the windows |http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
From jukka.rahkonen at mmmtike.fi  Fri Dec 10 09:07:35 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Dec 10 09:07:53 2010
Subject: [gdal-dev] Gdal_translate, WMS source and own certificate
Message-ID: <loom.20101210T145803-535@post.gmane.org>

Hi,

We would like to use gdal_translate for reading fromn our WMS service which is
secured by our own certificate and thus not automatically trusted.  Our
developer had a quick look on a gdal source code and tried to find how options 
CURLOPT_SSL_VERIFYPEER (1) and CURLOPT_CAPATH (2) are used there.  Numbers are
referring to document http://curl.haxx.se/docs/sslcerts.html

The conclusion was that those options are not used and thus it is impossible to
use dgal_translate with our server.  Is this true, and if yes, would it be worth
filing a ticket?

-Jukka Rahkonen-

From ivan.lucena at pmldnet.com  Fri Dec 10 09:22:25 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri Dec 10 09:22:27 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gaW1hZ2UtaW8gZXh0ZW5zaW9u?=
Message-ID: <20101210142225.5223.qmail@s466.sureserver.com>

Ciao Simone, Salut Even,

You guy did a great job improving the performance of reading and writing pixels buffer.

http://www.mail-archive.com/search?l=gdal-dev%40lists.osgeo.org&q=ReadRaster_Direct

But, "With great power comes great responsibility."

Now we find users asking for changes that are not essential and that break backward compatibility.

Let's see this one here for example:

>         Method names begin with Capital letters.  The Java standard is that methods always begin with lowercase letters; classes begin with Upper Case letters.  Constants should be all UPPER_CASE.  
>
> Dataset hDataset = gdal.Open(filename,gdalconstConstants.GA_ReadOnly).GetDriver().getLongName(); 
>
> should read
>
> Dataset hDataset = Gdal.open(filename,GdalconstConstants.GA_READONLY).getDriver().getLongName();

So what should we do? 

Prepare for change in GDAL 2.0 sound good to me. 

We can have two Java wrapper with a deprecated warning on the older (maintain it for about a year or two) and the new one would complain with Java standards and updated to whatever the language have evolved so far.

IMHO.

Regards,

Ivan


>  -------Original Message-------
>  From: Simone Giannecchini <simone.giannecchini@geo-solutions.it>
>  To: Even Rouault <even.rouault@mines-paris.org>
>  Cc: gdal-dev@lists.osgeo.org, Viji V Nair <viji@fedoraproject.org>
>  Subject: Re: [gdal-dev] image-io extension
>  Sent: Dec 10 '10 04:27
>  
>  Ciao Even,
>  I have asked daniele to make those changes (which have not been reviewed yet)
>  in order to move away from the explicit usage of Vector and HashTable in method
>  signatures in favour of using the respective interfaces (List and Map).
>  Daniele can add more as needed...
>  
>  As you mentioned this change can break old code, but it should
>  make the java bindings more ... javaish :).
>  
>  We have other changes in the queue which we might submit to your review
>  early next year, but this is another topic...
>  
>  
>  Viji , I don't think you need to use the patch you are referring to since
>  that is needed for imageio-ext 1.1 which has not been released yet.
>  The latest (and greatest) is 1.0.8 which uses an older gdal version.
>  
>  Ciao,
>  Simone.
>  -------------------------------------------------------
>  Ing. Simone Giannecchini
>  GeoSolutions S.A.S.
>  Founder
>  
>  Via Poggio alle Viti 1187
>  55054? Massarosa (LU)
>  Italy
>  
>  phone: +39 0584962313
>  fax:? ? ? +39 0584962313
>  mob:? ? +39 333 8128928
>  
>  
>  http://www.geo-solutions.it
>  http://geo-solutions.blogspot.com/
>  http://www.linkedin.com/in/simonegiannecchini
>  http://twitter.com/simogeo
>  
>  -------------------------------------------------------
>  
>  
>  
>  On Thu, Dec 9, 2010 at 8:25 PM, Even Rouault
>  <even.rouault@mines-paris.org> wrote:
>  > Hi Viji,
>  >
>  > I maintain the GDAL Java bindings, but the image-io GDAL plugin is another
>  > project whose maintener is Daniele I think. He'll correct me if I'm wrong, but
>  > I saw his name on http://docs.codehaus.org/display/GEOTOOLS/ImageIO-EXT+GDAL
>  > ;-) . I've CC'ed him so he has a chance to comment and explain the rational of
>  > the patch.
>  >
>  > I wasn't aware of this patch. I've skimmed through it quickly, and it seems
>  > that it only replaces old-fashionned data structures like Vector to use more
>  > trendish ArrayList + Java 1.5 generics. Well, this is certainly not a bad idea
>  > (something to consider for GDAL 2.0 ?), but I fail to see why it was
>  > *necessary* . I'm not particularly keen on applying this patch in GDAL
>  > mainline as it changes the API of the Java bindings, thus breaking working
>  > code of other users. I fail to see why ImageIO-EXT cannot use the existing
>  > API, even if it is perhaps not as convenient as it could be if it was using
>  > more modern Java API.
>  >
>  > Best regards,
>  >
>  > Even
>  >
>  > Le jeudi 09 d?cembre 2010 14:18:18, Viji V Nair a ?crit :
>  >> Hi,
>  >>
>  >> I am one of the GDAL co-maintainer for Fedora, I would like to have
>  >> the image-io extension support, currently it been supported through
>  >> the following patch from image-io. But I dont think this is a good
>  >> idea as the modifications are bit heavy.
>  >>
>  >> https://imageio-ext.dev.java.net/svn/imageio-ext/trunk/patches/gdal1.7.2.pa
>  >> tch (Username : guest, Password: guest)
>  >>
>  >> Is there any work going on related to this? Please share the ideas
>  >>
>  >> Thanks
>  >> Viji
>  >> _______________________________________________
>  >> gdal-dev mailing list
>  >> gdal-dev@lists.osgeo.org
>  >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  > _______________________________________________
>  > gdal-dev mailing list
>  > gdal-dev@lists.osgeo.org
>  > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  >
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From simone.giannecchini at geo-solutions.it  Fri Dec 10 10:26:23 2010
From: simone.giannecchini at geo-solutions.it (Simone Giannecchini)
Date: Fri Dec 10 10:39:08 2010
Subject: [gdal-dev] image-io extension
In-Reply-To: <20101210142225.5223.qmail@s466.sureserver.com>
References: <20101210142225.5223.qmail@s466.sureserver.com>
Message-ID: <AANLkTik_m2ZOLqYAx9tDAjneXLYTDgdaqdECJnFXL93h@mail.gmail.com>

Ciao Ivan,
well, what you are suggesting (deprecation/removal) cycle is a
standard policy within the porjects we have been involved, therefore
I am in favour of it. It is a natural way for having an API evolving.

On the other hand GDAL is well known for the rock solid stability of
its API, but yeah this "instability" would apply only to the Java
bindings
and would follow a well known practice.

Simone.
-------------------------------------------------------
Ing. Simone Giannecchini
GeoSolutions S.A.S.
Founder

Via Poggio alle Viti 1187
55054? Massarosa (LU)
Italy

phone: +39 0584962313
fax:? ? ? +39 0584962313
mob:? ? +39 333 8128928


http://www.geo-solutions.it
http://geo-solutions.blogspot.com/
http://www.linkedin.com/in/simonegiannecchini
http://twitter.com/simogeo

-------------------------------------------------------



On Fri, Dec 10, 2010 at 3:22 PM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:
> Ciao Simone, Salut Even,
>
> You guy did a great job improving the performance of reading and writing pixels buffer.
>
> http://www.mail-archive.com/search?l=gdal-dev%40lists.osgeo.org&q=ReadRaster_Direct
>
> But, "With great power comes great responsibility."
>
> Now we find users asking for changes that are not essential and that break backward compatibility.
>
> Let's see this one here for example:
>
>> ? ? ? ? Method names begin with Capital letters. ?The Java standard is that methods always begin with lowercase letters; classes begin with Upper Case letters. ?Constants should be all UPPER_CASE.
>>
>> Dataset hDataset = gdal.Open(filename,gdalconstConstants.GA_ReadOnly).GetDriver().getLongName();
>>
>> should read
>>
>> Dataset hDataset = Gdal.open(filename,GdalconstConstants.GA_READONLY).getDriver().getLongName();
>
> So what should we do?
>
> Prepare for change in GDAL 2.0 sound good to me.
>
> We can have two Java wrapper with a deprecated warning on the older (maintain it for about a year or two) and the new one would complain with Java standards and updated to whatever the language have evolved so far.
>
> IMHO.
>
> Regards,
>
> Ivan
>
>
>> ?-------Original Message-------
>> ?From: Simone Giannecchini <simone.giannecchini@geo-solutions.it>
>> ?To: Even Rouault <even.rouault@mines-paris.org>
>> ?Cc: gdal-dev@lists.osgeo.org, Viji V Nair <viji@fedoraproject.org>
>> ?Subject: Re: [gdal-dev] image-io extension
>> ?Sent: Dec 10 '10 04:27
>>
>> ?Ciao Even,
>> ?I have asked daniele to make those changes (which have not been reviewed yet)
>> ?in order to move away from the explicit usage of Vector and HashTable in method
>> ?signatures in favour of using the respective interfaces (List and Map).
>> ?Daniele can add more as needed...
>>
>> ?As you mentioned this change can break old code, but it should
>> ?make the java bindings more ... javaish :).
>>
>> ?We have other changes in the queue which we might submit to your review
>> ?early next year, but this is another topic...
>>
>>
>> ?Viji , I don't think you need to use the patch you are referring to since
>> ?that is needed for imageio-ext 1.1 which has not been released yet.
>> ?The latest (and greatest) is 1.0.8 which uses an older gdal version.
>>
>> ?Ciao,
>> ?Simone.
>> ?-------------------------------------------------------
>> ?Ing. Simone Giannecchini
>> ?GeoSolutions S.A.S.
>> ?Founder
>>
>> ?Via Poggio alle Viti 1187
>> ?55054? Massarosa (LU)
>> ?Italy
>>
>> ?phone: +39 0584962313
>> ?fax:? ? ? +39 0584962313
>> ?mob:? ? +39 333 8128928
>>
>>
>> ?http://www.geo-solutions.it
>> ?http://geo-solutions.blogspot.com/
>> ?http://www.linkedin.com/in/simonegiannecchini
>> ?http://twitter.com/simogeo
>>
>> ?-------------------------------------------------------
>>
>>
>>
>> ?On Thu, Dec 9, 2010 at 8:25 PM, Even Rouault
>> ?<even.rouault@mines-paris.org> wrote:
>> ?> Hi Viji,
>> ?>
>> ?> I maintain the GDAL Java bindings, but the image-io GDAL plugin is another
>> ?> project whose maintener is Daniele I think. He'll correct me if I'm wrong, but
>> ?> I saw his name on http://docs.codehaus.org/display/GEOTOOLS/ImageIO-EXT+GDAL
>> ?> ;-) . I've CC'ed him so he has a chance to comment and explain the rational of
>> ?> the patch.
>> ?>
>> ?> I wasn't aware of this patch. I've skimmed through it quickly, and it seems
>> ?> that it only replaces old-fashionned data structures like Vector to use more
>> ?> trendish ArrayList + Java 1.5 generics. Well, this is certainly not a bad idea
>> ?> (something to consider for GDAL 2.0 ?), but I fail to see why it was
>> ?> *necessary* . I'm not particularly keen on applying this patch in GDAL
>> ?> mainline as it changes the API of the Java bindings, thus breaking working
>> ?> code of other users. I fail to see why ImageIO-EXT cannot use the existing
>> ?> API, even if it is perhaps not as convenient as it could be if it was using
>> ?> more modern Java API.
>> ?>
>> ?> Best regards,
>> ?>
>> ?> Even
>> ?>
>> ?> Le jeudi 09 d?cembre 2010 14:18:18, Viji V Nair a ?crit :
>> ?>> Hi,
>> ?>>
>> ?>> I am one of the GDAL co-maintainer for Fedora, I would like to have
>> ?>> the image-io extension support, currently it been supported through
>> ?>> the following patch from image-io. But I dont think this is a good
>> ?>> idea as the modifications are bit heavy.
>> ?>>
>> ?>> https://imageio-ext.dev.java.net/svn/imageio-ext/trunk/patches/gdal1.7.2.pa
>> ?>> tch (Username : guest, Password: guest)
>> ?>>
>> ?>> Is there any work going on related to this? Please share the ideas
>> ?>>
>> ?>> Thanks
>> ?>> Viji
>> ?>> _______________________________________________
>> ?>> gdal-dev mailing list
>> ?>> gdal-dev@lists.osgeo.org
>> ?>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> ?> _______________________________________________
>> ?> gdal-dev mailing list
>> ?> gdal-dev@lists.osgeo.org
>> ?> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> ?>
>> ?_______________________________________________
>> ?gdal-dev mailing list
>> ?gdal-dev@lists.osgeo.org
>> ?http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From viji at fedoraproject.org  Fri Dec 10 11:58:56 2010
From: viji at fedoraproject.org (Viji V Nair)
Date: Fri Dec 10 11:59:19 2010
Subject: [gdal-dev] image-io extension
In-Reply-To: <AANLkTinAoVSnuyWm2kvxi-_eUbUQhYN_xTn_wv3bbEhu@mail.gmail.com>
References: <AANLkTikBYxgJuWa36tzLae9qg7WbJ+k9f-hP_av8=EMT@mail.gmail.com>
	<201012092025.27602.even.rouault@mines-paris.org>
	<AANLkTinAoVSnuyWm2kvxi-_eUbUQhYN_xTn_wv3bbEhu@mail.gmail.com>
Message-ID: <AANLkTin_3ndwB1dgZotgo+VKM479pK72H4E6Y1yc=k4g@mail.gmail.com>

Hi

On Fri, Dec 10, 2010 at 2:57 PM, Simone Giannecchini
<simone.giannecchini@geo-solutions.it> wrote:
> Ciao Even,
> I have asked daniele to make those changes (which have not been reviewed yet)
> in order to move away from the explicit usage of Vector and HashTable in method
> signatures in favour of using the respective interfaces (List and Map).
> Daniele can add more as needed...
>
> As you mentioned this change can break old code, but it should
> make the java bindings more ... javaish :).
>
> We have other changes in the queue which we might submit to your review
> early next year, but this is another topic...
>
>
> Viji , I don't think you need to use the patch you are referring to since
> that is needed for imageio-ext 1.1 which has not been released yet.
> The latest (and greatest) is 1.0.8 which uses an older gdal version.

We are trying to package the SVN version of imageio 1.1 (r1236) with
GDAL 1.7.3. I haven't tried the GDAL 1.7.3 with imageio 1.0.8 yet.

Thanks
Viji

>
> Ciao,
> Simone.
> -------------------------------------------------------
> Ing. Simone Giannecchini
> GeoSolutions S.A.S.
> Founder
>
> Via Poggio alle Viti 1187
> 55054? Massarosa (LU)
> Italy
>
> phone: +39 0584962313
> fax:? ? ? +39 0584962313
> mob:? ? +39 333 8128928
>
>
> http://www.geo-solutions.it
> http://geo-solutions.blogspot.com/
> http://www.linkedin.com/in/simonegiannecchini
> http://twitter.com/simogeo
>
> -------------------------------------------------------
>
>
>
> On Thu, Dec 9, 2010 at 8:25 PM, Even Rouault
> <even.rouault@mines-paris.org> wrote:
>> Hi Viji,
>>
>> I maintain the GDAL Java bindings, but the image-io GDAL plugin is another
>> project whose maintener is Daniele I think. He'll correct me if I'm wrong, but
>> I saw his name on http://docs.codehaus.org/display/GEOTOOLS/ImageIO-EXT+GDAL
>> ;-) . I've CC'ed him so he has a chance to comment and explain the rational of
>> the patch.
>>
>> I wasn't aware of this patch. I've skimmed through it quickly, and it seems
>> that it only replaces old-fashionned data structures like Vector to use more
>> trendish ArrayList + Java 1.5 generics. Well, this is certainly not a bad idea
>> (something to consider for GDAL 2.0 ?), but I fail to see why it was
>> *necessary* . I'm not particularly keen on applying this patch in GDAL
>> mainline as it changes the API of the Java bindings, thus breaking working
>> code of other users. I fail to see why ImageIO-EXT cannot use the existing
>> API, even if it is perhaps not as convenient as it could be if it was using
>> more modern Java API.
>>
>> Best regards,
>>
>> Even
>>
>> Le jeudi 09 d?cembre 2010 14:18:18, Viji V Nair a ?crit :
>>> Hi,
>>>
>>> I am one of the GDAL co-maintainer for Fedora, I would like to have
>>> the image-io extension support, currently it been supported through
>>> the following patch from image-io. But I dont think this is a good
>>> idea as the modifications are bit heavy.
>>>
>>> https://imageio-ext.dev.java.net/svn/imageio-ext/trunk/patches/gdal1.7.2.pa
>>> tch (Username : guest, Password: guest)
>>>
>>> Is there any work going on related to this? Please share the ideas
>>>
>>> Thanks
>>> Viji
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
From even.rouault at mines-paris.org  Fri Dec 10 18:41:44 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 10 18:41:54 2010
Subject: [gdal-dev] image-io extension
In-Reply-To: <AANLkTinAoVSnuyWm2kvxi-_eUbUQhYN_xTn_wv3bbEhu@mail.gmail.com>
References: <AANLkTikBYxgJuWa36tzLae9qg7WbJ+k9f-hP_av8=EMT@mail.gmail.com>
	<201012092025.27602.even.rouault@mines-paris.org>
	<AANLkTinAoVSnuyWm2kvxi-_eUbUQhYN_xTn_wv3bbEhu@mail.gmail.com>
Message-ID: <201012110041.44625.even.rouault@mines-paris.org>

Le vendredi 10 d?cembre 2010 10:27:49, Simone Giannecchini a ?crit :
> Ciao Even,
> I have asked daniele to make those changes (which have not been reviewed
> yet) in order to move away from the explicit usage of Vector and HashTable
> in method signatures in favour of using the respective interfaces (List
> and Map). Daniele can add more as needed...

Simone,

I can understand that you don't like using Vector or Hashtable in the API you 
expose in imageio-ext, but you can also understand that it doesn't make a very 
compelling reason to take your changes in the hope that they also fit the needs 
of other users of the GDAL Java bindings. 

You could certainly convert the Vector into an ArrayList on your side and 
"hide" that. Not ideal, but there's no technical obstacle.

The GDAL Python bindings are also well-known for not being very "pythonish" by 
some aspects (and some of those aspects can be sometimes very very painful !), 
but it doesn't prevent them from being used successfully by a pretty 
impressive amount of people.

> 
> As you mentioned this change can break old code, but it should
> make the java bindings more ... javaish :).

I'd note that what is "javaish" or not is subject to trends that evolve over 
time. Sometimes it is not bad to wait for the dust to settle ;-)

And concerning :

> On the other hand GDAL is well known for the rock solid stability of
> its API

Indeed, I prefer that the bindings are stable (and sometimes expose rough 
corners due to past choices). Being "javaish" isn't an aim per se.

> but yeah this "instability" would apply only to the Java
> bindings and would follow a well known practice. """

I respectfully disagree with you on this. For example, most API of the 
standard Java library dating back to the Java 1.0 era haven't been removed in 
Java 1.6. And by the way, neither 
http://download.oracle.com/javase/6/docs/api/java/util/Vector.html nor 
http://download.oracle.com/javase/6/docs/api/java/util/Hashtable.html mention 
those 2 to be deprecated at all ;-) 
Now, you'll certainly find other Java projects that might have different habits 
of course.

Let's be realistic : interface breakage can happen sometimes. But IMHO the 
reasons must be very compelling (totally broken/unusable interface). And I'd 
expect a consensus on this, or at least support from a majority of users.

> 
> We have other changes in the queue which we might submit to your review
> early next year, but this is another topic...

If you wish that your changes to be integrated back into GDAL, I'm afraid this 
isn't the best way to proceed. It is not very efficient and enjoyable to review 
a code dump without prior discussion about its rationale and main orientations 
(especially when it involves API breakage). Basically, I'm just recalling a 
best-practice for collaboration with any FOSS project...

> 
> 
> Viji , I don't think you need to use the patch you are referring to since
> that is needed for imageio-ext 1.1 which has not been released yet.

I'm afraid that the packagers of imageio-ext 1.1 will face difficult 
alternatives if your patch is still needed but not applied in upstream GDAL :
- Applying your patch and thus forking from upstream GDAL as far as the GDAL 
Java API is concerned ? --> Most Linux distro (including Fedora unless I'm 
wrong) have a policy to stick to upstream as much as possible and only patch 
for serious reasons.
- Applying a patch to imageio-ext to make it work with upstream GDAL ? 
Unlikely for the same reason as above and why would they make that effort 
instead of upstream imageio-ext ?
- Finding a way to have a specific version of the patched GDAL Java bindings 
only used by imageio-ext ? Technically possible I guess by "duplicating" the 
java bindings (both the gdal.jar + the *jni.so) and embedding a specific 
version in imageio-ext package. But then, you will have to make sure they 
won't conflict in case someone wants to use both imageio-ext and "official" GDAL 
java bindings. I also doubt that a packager would want to go into that.


Best regards,

Even

> 
> Ciao,
> Simone.
> -------------------------------------------------------
> Ing. Simone Giannecchini
> GeoSolutions S.A.S.
> Founder
> 
> Via Poggio alle Viti 1187
> 55054  Massarosa (LU)
> Italy
> 
> phone: +39 0584962313
> fax:      +39 0584962313
> mob:    +39 333 8128928
> 
> 
> http://www.geo-solutions.it
> http://geo-solutions.blogspot.com/
> http://www.linkedin.com/in/simonegiannecchini
> http://twitter.com/simogeo
> 
From even.rouault at mines-paris.org  Fri Dec 10 18:41:48 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 10 18:41:57 2010
Subject: [gdal-dev] image-io extension
In-Reply-To: <20101210142225.5223.qmail@s466.sureserver.com>
References: <20101210142225.5223.qmail@s466.sureserver.com>
Message-ID: <201012110041.48350.even.rouault@mines-paris.org>

Le vendredi 10 d?cembre 2010 15:22:25, Ivan Lucena a ?crit :
> Ciao Simone, Salut Even,
> 
> Let's see this one here for example:
> >         Method names begin with Capital letters.  The Java standard is
> >         that methods always begin with lowercase letters; classes begin
> >         with Upper Case letters.  Constants should be all UPPER_CASE.
> > 
> > Dataset hDataset =
> > gdal.Open(filename,gdalconstConstants.GA_ReadOnly).GetDriver().getLongNa
> > me();
> > 
> > should read
> > 
> > Dataset hDataset =
> > Gdal.open(filename,GdalconstConstants.GA_READONLY).getDriver().getLongNa
> > me();
> 
> So what should we do?

You're talking about an hypothetical change, right ? Or I missed that one ;-)

> 
> Prepare for change in GDAL 2.0 sound good to me.
> 
> We can have two Java wrapper with a deprecated warning on the older
> (maintain it for about a year or two) and the new one would complain with
> Java standards and updated to whatever the language have evolved so far.

You mean maintaining 2 versions of the bindings in the same branch, like we 
did for the old-gen and new-gen python bindings ? This causes much confusion 
for users, not mentionning the increased maintenance burden. So I'd prefer if 
we can avoid this.

And IMHO GDAL 2.0 isn't necessary a justification to break API. It is more an 
opportunity. Luckily, there are still ways of making evolutions without 
breaking stuff ;-)

> 
> IMHO.
> 
> Regards,
> 
> Ivan
From ari.jolma at gmail.com  Sat Dec 11 06:10:14 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sat Dec 11 06:10:20 2010
Subject: [gdal-dev] Gdal_translate, WMS source and own certificate
In-Reply-To: <loom.20101210T145803-535@post.gmane.org>
References: <loom.20101210T145803-535@post.gmane.org>
Message-ID: <4D035C16.7000802@gmail.com>

On 12/10/2010 04:07 PM, Jukka Rahkonen wrote:
> Hi,
>
> We would like to use gdal_translate for reading fromn our WMS service which is
> secured by our own certificate and thus not automatically trusted.  Our
> developer had a quick look on a gdal source code and tried to find how options
> CURLOPT_SSL_VERIFYPEER (1) and CURLOPT_CAPATH (2) are used there.  Numbers are
> referring to document http://curl.haxx.se/docs/sslcerts.html
>
> The conclusion was that those options are not used and thus it is impossible to
> use dgal_translate with our server.  Is this true, and if yes, would it be worth
> filing a ticket?
>    

Just a comment: am I correct in interpreting the sources that the WMS 
driver uses its own Curl client (gdalhttp.cpp in frmts/wms) and not the 
Curl client in port/cpl_http.cpp? It seems that the cpl_http.cpp turns 
off SSL verification but gdalhttp.cpp does not.

Ari

> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>    

From bicealyh at gmail.com  Sat Dec 11 12:50:45 2010
From: bicealyh at gmail.com (LiN YongHeng)
Date: Sat Dec 11 12:50:47 2010
Subject: [gdal-dev] Does geotiff support add text labels?
Message-ID: <AANLkTikS4wJfKG-52xrv5vtrBF9X6yPoY2hAOrNvw7Qs@mail.gmail.com>

 I want to add a text label to my geotiff image. So I want to know how can  I
do that by GDAL?
 Thanks for your help!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101212/0c61adb8/attachment.html
From warmerdam at pobox.com  Sat Dec 11 12:56:29 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Dec 11 12:56:26 2010
Subject: [gdal-dev] Does geotiff support add text labels?
In-Reply-To: <AANLkTikS4wJfKG-52xrv5vtrBF9X6yPoY2hAOrNvw7Qs@mail.gmail.com>
References: <AANLkTikS4wJfKG-52xrv5vtrBF9X6yPoY2hAOrNvw7Qs@mail.gmail.com>
Message-ID: <4D03BB4D.70602@pobox.com>

On 10-12-11 12:50 PM, LiN YongHeng wrote:
> I want to add a text label to my geotiff image. So I want to know how 
> can I do that by GDAL?
> Thanks for your help!

Hi,

You aren't too clear on what you want.  You can add textual metadata
to a GeoTIFF file in TIFF tags like TIFFTAG_IMAGEDESCRIPTION using a
command like:

 gdal_translate -mo TIFFTAG_IMAGEDESCRIPTION "my image"  in.tif out.tif

But if what you really want is to render/rasterize text
right into the image then there is no mechanism to do
this using GDAL.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From gbburkhardt at verizon.net  Sat Dec 11 18:20:27 2010
From: gbburkhardt at verizon.net (Glenn Burkhardt)
Date: Sat Dec 11 19:20:58 2010
Subject: [gdal-dev] building Java bindings on MinGW
Message-ID: <4D04073B.7060107@verizon.net>

I've been trying to build the Java bindings for GDAL 1.7.3 on MinGW.  I 
have a set of DLL's, and the 'gdal.jar' file, but the basic test is 
failing in the GeneralCmdLineProcessor JNI code.  I've traced it down to 
this line in gdal_wrap.cpp:

       for (jobject keys = jenv->CallObjectMethod(jarg1, elements);   // 
line 18529 in my copy

I try running:

java -cp "gdal.jar;build/apps" gdalinfo

and the code suffers an access violation:

#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x6d8eea78, pid=672, 
tid=956

I broke the expression "jobject keys = jenv->CallObjectMethod(jarg1, 
elements)" out onto a separate line, and bracketed it with print 
statements.

The JNI code itself is valid.   I build a test application that passes 
the argument list to a native method as a vector, and there's no problem 
accessing any of the members of the vector, whether the vector is empty 
or not.

Any ideas??  I just loaded a fresh copy of MinGW today, built 'swig' 
Version 2.0.1, and I'm using g++ 4.5.0.  I tried this on a different 
machine yesterday with the g++ 3.4.5 compiler, with identical results.

Here's the java error log:

#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x6d8eea78, pid=672, 
tid=956
#
# JRE version: 6.0_23-b05
# Java VM: Java HotSpot(TM) Client VM (19.0-b09 mixed mode, sharing 
windows-x86 )
# Problematic frame:
# V  [jvm.dll+0xfea78]
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#

---------------  T H R E A D  ---------------

Current thread (0x007b9000):  JavaThread "main" [_thread_in_vm, id=956, 
stack(0x00430000,0x00480000)]

siginfo: ExceptionCode=0xc0000005, reading address 0x00000024

Registers:
EAX=0x00000000, EBX=0x007b9118, ECX=0x38f88d50, EDX=0x00000000
ESP=0x0047fae8, EBP=0x0047fb30, ESI=0x007b9000, EDI=0x0068d3ac
EIP=0x6d8eea78, EFLAGS=0x00010246

Register to memory mapping:

EAX=0x00000000
0x00000000 is pointing to unknown location

EBX=0x007b9118
0x007b9118 is pointing to unknown location

ECX=0x38f88d50
{instance class}
  - klass: {other class}

EDX=0x00000000
0x00000000 is pointing to unknown location

ESP=0x0047fae8
0x0047fae8 is pointing into the stack for thread: 0x007b9000
"main" prio=6 tid=0x007b9000 nid=0x3bc runnable [0x0047f000]
    java.lang.Thread.State: RUNNABLE

EBP=0x0047fb30
0x0047fb30 is pointing into the stack for thread: 0x007b9000
"main" prio=6 tid=0x007b9000 nid=0x3bc runnable [0x0047f000]
    java.lang.Thread.State: RUNNABLE

ESI=0x007b9000
"main" prio=6 tid=0x007b9000 nid=0x3bc runnable [0x0047f000]
    java.lang.Thread.State: RUNNABLE

EDI=0x0068d3ac
0x0068d3ac is pointing to unknown location


Top of Stack: (sp=0x0047fae8)
0x0047fae8:   0068d3a8 00682490 007b9118 6d9f8ef0
0x0047faf8:   6d9fb300 ffffffff 0047fb10 6d7f10e0
0x0047fb08:   007b9000 0047fd7c 0000000c 6d8f68c9
0x0047fb18:   007b9000 00000006 007b9000 00000000
0x0047fb28:   0068d3ac 007b9118 0047fb50 6e99c865
0x0047fb38:   007b9118 007b9118 0068d3ac 0047fb64
0x0047fb48:   00682494 0068d3ac 0047fb58 6e99b36a
0x0047fb58:   007b9118 007b9118 0068d3ac 0047fb98

Instructions: (pc=0x6d8eea78)
0x6d8eea68:   45 e0 0c 00 00 00 8b 48 08 0f b7 51 2a 8b 40 0c
0x6d8eea78:   8b 4c 90 24 51 56 8d 4d c4 e8 aa a4 0b 00 8b 55


Stack: [0x00430000,0x00480000],  sp=0x0047fae8,  free space=318k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, 
C=native code)
V  [jvm.dll+0xfea78]
C  [gdaljni.dll+0x1c865]
C  [gdaljni.dll+0x1b36a]

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  
org.gdal.gdal.gdalJNI.GeneralCmdLineProcessor__SWIG_0(Ljava/util/Vector;I)Ljava/util/Vector;+0
j  
org.gdal.gdal.gdal.GeneralCmdLineProcessor(Ljava/util/Vector;I)Ljava/util/Vector;+2
j  
org.gdal.gdal.gdal.GeneralCmdLineProcessor([Ljava/lang/String;I)[Ljava/lang/String;+31
j  
org.gdal.gdal.gdal.GeneralCmdLineProcessor([Ljava/lang/String;)[Ljava/lang/String;+2
j  gdalinfo.main([Ljava/lang/String;)V+52
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
   0x006a2c00 JavaThread "Low Memory Detector" daemon [_thread_blocked, 
id=792, stack(0x04930000,0x04980000)]
   0x0069c800 JavaThread "CompilerThread0" daemon [_thread_blocked, 
id=2704, stack(0x048a0000,0x048f0000)]
   0x00699800 JavaThread "Attach Listener" daemon [_thread_blocked, 
id=3944, stack(0x04810000,0x04860000)]
   0x00695c00 JavaThread "Signal Dispatcher" daemon [_thread_blocked, 
id=3292, stack(0x04780000,0x047d0000)]
   0x0068f800 JavaThread "Finalizer" daemon [_thread_blocked, id=1268, 
stack(0x046f0000,0x04740000)]
   0x0068d800 JavaThread "Reference Handler" daemon [_thread_blocked, 
id=4044, stack(0x04660000,0x046b0000)]
=>0x007b9000 JavaThread "main" [_thread_in_vm, id=956, 
stack(0x00430000,0x00480000)]

Other Threads:
   0x0068c400 VMThread [stack: 0x045d0000,0x04620000] [id=1380]
   0x006aec00 WatcherThread [stack: 0x049c0000,0x04a10000] [id=1604]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
  def new generation   total 4928K, used 434K [0x24540000, 0x24a90000, 
0x29a90000)
   eden space 4416K,   9% used [0x24540000, 0x245ac860, 0x24990000)
   from space 512K,   0% used [0x24990000, 0x24990000, 0x24a10000)
   to   space 512K,   0% used [0x24a10000, 0x24a10000, 0x24a90000)
  tenured generation   total 10944K, used 0K [0x29a90000, 0x2a540000, 
0x34540000)
    the space 10944K,   0% used [0x29a90000, 0x29a90000, 0x29a90200, 
0x2a540000)
  compacting perm gen  total 12288K, used 174K [0x34540000, 0x35140000, 
0x38540000)
    the space 12288K,   1% used [0x34540000, 0x3456ba88, 0x3456bc00, 
0x35140000)
     ro space 10240K,  51% used [0x38540000, 0x38a6bd20, 0x38a6be00, 
0x38f40000)
     rw space 12288K,  54% used [0x38f40000, 0x395d7d58, 0x395d7e00, 
0x39b40000)

Dynamic libraries:
0x00400000 - 0x00424000     c:\Windows\SysWOW64\java.exe
0x77de0000 - 0x77f60000     C:\Windows\SysWOW64\ntdll.dll
0x76420000 - 0x76520000     C:\Windows\syswow64\kernel32.dll
0x75c50000 - 0x75c96000     C:\Windows\syswow64\KERNELBASE.dll
0x76010000 - 0x760b0000     C:\Windows\syswow64\ADVAPI32.dll
0x760d0000 - 0x7617c000     C:\Windows\syswow64\msvcrt.dll
0x766f0000 - 0x76709000     C:\Windows\SysWOW64\sechost.dll
0x76710000 - 0x76800000     C:\Windows\syswow64\RPCRT4.dll
0x75950000 - 0x759b0000     C:\Windows\syswow64\SspiCli.dll
0x75940000 - 0x7594c000     C:\Windows\syswow64\CRYPTBASE.dll
0x7c340000 - 0x7c396000     C:\Program Files (x86)\Java\jre6\bin\msvcr71.dll
0x6d7f0000 - 0x6da9c000     C:\Program Files 
(x86)\Java\jre6\bin\client\jvm.dll
0x759b0000 - 0x75ab0000     C:\Windows\syswow64\USER32.dll
0x76180000 - 0x76210000     C:\Windows\syswow64\GDI32.dll
0x76000000 - 0x7600a000     C:\Windows\syswow64\LPK.dll
0x76520000 - 0x765bd000     C:\Windows\syswow64\USP10.dll
0x735c0000 - 0x735f2000     c:\Windows\SysWOW64\WINMM.dll
0x765c0000 - 0x76620000     C:\Windows\system32\IMM32.DLL
0x76620000 - 0x766ec000     C:\Windows\syswow64\MSCTF.dll
0x73f20000 - 0x73f6b000     C:\Windows\system32\apphelp.dll
0x6d7a0000 - 0x6d7ac000     C:\Program Files (x86)\Java\jre6\bin\verify.dll
0x6d320000 - 0x6d33f000     C:\Program Files (x86)\Java\jre6\bin\java.dll
0x6d280000 - 0x6d288000     C:\Program Files (x86)\Java\jre6\bin\hpi.dll
0x77db0000 - 0x77db5000     C:\Windows\syswow64\PSAPI.DLL
0x6d7e0000 - 0x6d7ef000     C:\Program Files (x86)\Java\jre6\bin\zip.dll
0x6e980000 - 0x6ea4e000     
C:\MinGW\msys\1.0\home\Glenn\gdal-1.7.3\swig\java\gdaljni.dll
0x6fc40000 - 0x6fd1e000     C:\MinGW\bin\libstdc++-6.dll
0x6e940000 - 0x6e961000     C:\MinGW\bin\libgcc_s_dw2-1.dll
0x04c10000 - 0x06740000     
C:\MinGW\msys\1.0\home\Glenn\gdal-1.7.3\swig\java\libgdal-1.dll

VM Arguments:
java_command: gdalinfo
Launcher Type: SUN_STANDARD

Environment Variables:
PATH=.;C:\MinGW\msys\1.0\local\bin;C:\MinGW\bin;C:\MinGW\msys\1.0\bin;c:\msys\1.0\bin;C:\MinGW\bin;c:\Windows\system32;c:\Windows;c:\Windows\System32\Wbem;c:\Windows\System32\WindowsPowerShell\v1.0\;c:\Program 
Files (x86)\emacs-23.2\bin;c:\Program Files (x86)\Java\jdk1.6.0_23\bin
USERNAME=Glenn
OS=Windows_NT
PROCESSOR_IDENTIFIER=AMD64 Family 16 Model 4 Stepping 3, AuthenticAMD



---------------  S Y S T E M  ---------------

OS: Windows 7 Build 7600

CPU:total 4 (4 cores per cpu, 1 threads per core) family 16 model 4 
stepping 3, cmov, cx8, fxsr, mmx, sse, sse2, sse3, popcnt, mmxext, 
3dnow, 3dnowext, lzcnt, sse4a

Memory: 4k page, physical 3930292k(2555848k free), swap 
7858684k(6328200k free)

vm_info: Java HotSpot(TM) Client VM (19.0-b09) for windows-x86 JRE 
(1.6.0_23-b05), built on Nov 12 2010 15:00:43 by "java_re" with MS VC++ 
7.1 (VS2003)

time: Sat Dec 11 17:51:55 2010
elapsed time: 0 seconds








From Martin at Hvidberg.net  Sun Dec 12 06:48:48 2010
From: Martin at Hvidberg.net (Martin Hvidberg)
Date: Sun Dec 12 07:10:26 2010
Subject: [gdal-dev] Can't make Python binding work
Message-ID: <4D04B6A0.1060907@Hvidberg.net>

I'm trying to install and use GDAL in Python, and there seems to be 
something very fundamental that I'm missing.

To start with the problem... In a new python file I write:

try:

     fromosgeo importgdal

exceptImportError:

     importgdal


When run it replies:

Traceback (most recent call last):

_File "C:\Martin\Work_Eclipse\Hilfe\src\check_GDAL.py", line 8, in <module>_

         import gdal

ImportError: No module named gdal


To me that translates into, Python can't find the GDAL modules.

I'm running on a win-xp computer, I use python 2.6 as I recently 
upgraded to ArcGIS 10. Before that I used GDAL with Python 2.5 (and 
ArcGIS 9.x) that worked just fine.

I have no problems calling other Python add-ons, e.g. numpy.

I using GDAL from http://pypi.python.org/pypi/GDAL/

I downloaded http://download.osgeo.org/gdal/win32/1.6/gdalwin32exe160.zip

After unzipping to a dir of my choice I included the .../bin dir in my 
'path' and created a 'GDAL_DATA' environment variable pointing to .../data

It then looks like this:

C:\>echo %PATH%

C:\WINDOWS\system32;...<shortened>...;C:\APPS\PRO\gdalwin32-1.6\bin

C:\>echo %GDAL_DATA%

C:\APPS\PRO\gdalwin32-1.6\data

As I read the installation guide it should do it -- but it doesn't, as 
the code sample above indicates.

Though not mentioned in the installation guide, I also created an 
environmental variable PYTHONPATH, including the .../bin directory

C:\>echo %PYTHONPATH%

C:\APPS\PRO\gdalwin32-1.6\bin

Unfortunately this makes no deference to the program.

*Question 1*: Are there any problems in using GDAL 1.6 with Python 2.6 
on a win-xp?


Looking into ...\gdalwin32-1.6\bin\ in find no *.py files (nor *.pyc)

I would have expected some files with python extensions.

I also expected a file with the name 'osgeo.*' or 'gdal.*', since this 
is what the Pyhon import statement try to import. Alternatively a .zip 
file with such files inside. But non of that is in the 
...\gdalwin32-1.6\* to be found.

*Question 2: *Am I missing something here? How is this binding supposed 
to work? What file exactly is the import statement supposed to find, 
that will enable it to include osgeo functionality?


Best Regards

Martin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101212/065574c1/attachment-0001.html
From ivan.lucena at pmldnet.com  Sun Dec 12 08:03:08 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Sun Dec 12 08:03:10 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gaW1hZ2UtaW8gZXh0ZW5zaW9u?=
Message-ID: <20101212130308.15318.qmail@s466.sureserver.com>

Even,

>  -------Original Message-------
>  From: Even Rouault <even.rouault@mines-paris.org>
>  To: Ivan Lucena <ivan.lucena@pmldnet.com>
>  Cc: Simone Giannecchini <simone.giannecchini@geo-solutions.it>, gdal-dev@lists.osgeo.org, Viji V Nair 
<viji@fedoraproject.org>
>  Subject: Re: [gdal-dev] image-io extension
>  Sent: Dec 10 '10 18:41
>  
>  Le vendredi 10 d?cembre 2010 15:22:25, Ivan Lucena a ?crit :
>  > Ciao Simone, Salut Even,
>  >
>  > Let's see this one here for example:
>  > >???????? Method names begin with Capital letters.??The Java standard is
>  > >???????? that methods always begin with lowercase letters; classes begin
>  > >???????? with Upper Case letters.??Constants should be all UPPER_CASE.
>  > >
>  > > Dataset hDataset =
>  > > gdal.Open(filename,gdalconstConstants.GA_ReadOnly).GetDriver().getLongNa
>  > > me();
>  > >
>  > > should read
>  > >
>  > > Dataset hDataset =
>  > > Gdal.open(filename,GdalconstConstants.GA_READONLY).getDriver().getLongNa
>  > > me();
>  >
>  > So what should we do?
>  
>  You're talking about an hypothetical change, right ? Or I missed that one ;-)
>  

Well, you missed that part: "Now we find users asking for changes that are not essential and that break backward 
compatibility. Let's see this one here for example:". So, yes. It is "hypothetical" as you said.  I am just passing on a 
suggestion from a user. If you are going do radical changes on the GDAL Java wrapper for the next release you could 
also take those issue in consideration, although there are "not essential".

>  >
>  > Prepare for change in GDAL 2.0 sound good to me.
>  >
>  > We can have two Java wrapper with a deprecated warning on the older
>  > (maintain it for about a year or two) and the new one would complain with
>  > Java standards and updated to whatever the language have evolved so far.
>  
>  You mean maintaining 2 versions of the bindings in the same branch, like we
>  did for the old-gen and new-gen python bindings ? This causes much confusion
>  for users, not mentionning the increased maintenance burden. So I'd prefer if
>  we can avoid this.

 I will follow your arguments on your reply to Simone to get more information.

>  And IMHO GDAL 2.0 isn't necessary a justification to break API. It is more an
>  opportunity. Luckily, there are still ways of making evolutions without
>  breaking stuff ;-)

That is nice to read that.

Regards,

Ivan,
From Chris.Barker at noaa.gov  Sun Dec 12 12:19:54 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Sun Dec 12 12:19:59 2010
Subject: [gdal-dev] Can't make Python binding work
In-Reply-To: <4D04B6A0.1060907@Hvidberg.net>
References: <4D04B6A0.1060907@Hvidberg.net>
Message-ID: <4D05043A.4050608@noaa.gov>

Martin Hvidberg wrote:
> To start with the problem... In a new python file I write:

> When run it replies:
> 
> Traceback (most recent call last):
> 
>      _File "C:\Martin\Work_Eclipse\Hilfe\src\check_GDAL.py", line 8, in 
> <module>_
> 
>         import gdal
> 
> ImportError: No module named gdal
> 
> 
> To me that translates into, Python can't find the GDAL modules.

correct.

> I using GDAL from http://pypi.python.org/pypi/GDAL/

On that site, it says: "GDAL Python Bindings available at the Python 
Cheeseshop. An executable installer is available for both Python 2.4 or 
2.5 or as a Python egg."

but I don't see any Windows binaries for the python bindings, and that 
note doesn't include 2.6 anyway, i suspect it hasn't been updated for a 
while -- we really should have python 2.6 and 2.7 there, as well as GDAL 
1.7.*

> I downloaded http://download.osgeo.org/gdal/win32/1.6/gdalwin32exe160.zip

That is the binaries for the gdal libs and command line utilities -- it 
does not include th python bindings.

So you'll need to:

1) do: "easy install GDAL" -- which may find the binaries for you.

2) find a Windows installer for the binaries

3) download the source and do "python setup.py build", "python setup.py 
install", but that will require that you have the right compiler set up.

> *Question 1*: Are there any problems in using GDAL 1.6 with Python 2.6 
> on a win-xp?

I don't think there are any problems -- but it does look like there are 
no easy-to-install binaries.

There are other binaries of GDAL around -- but I don't if any of them 
have python bindings build in. FWTools and OSGeo4W do, but I don't know 
if they are compatible with the ESRI-supplied python.

The state of binaries for Windows is not good -- but I'm not offering to 
build them, so what can you do? If there is someone that does want to 
supply easy-to-install Windows binaries for Python folks, but isn't sure 
  what they should do, I'd be glad to provide input on that, but I don't 
work primarily on Windows, and compiling stuff there has always been a 
pain for me.

> Looking into ...\gdalwin32-1.6\bin\ in find no *.py files (nor *.pyc)
> 
> I would have expected some files with python extensions.

right -- that installer does not include the python bindings.

> What file exactly is the import statement supposed to find, 
> that will enable it to include osgeo functionality?

You are looking for the right things -- properly installed, there will 
be a "osgeo" package on your PYTHONPATH, probably in "site-packages"

Good luck, sorry I'm not more help.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From jason.roberts at duke.edu  Sun Dec 12 12:57:22 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Sun Dec 12 12:57:34 2010
Subject: [gdal-dev] Can't make Python binding work
In-Reply-To: <4D05043A.4050608@noaa.gov>
References: <4D04B6A0.1060907@Hvidberg.net> <4D05043A.4050608@noaa.gov>
Message-ID: <018301cb9a26$0732b6f0$159824d0$@roberts@duke.edu>

Martin,

http://vbkto.dyndns.org/sdk/ is a popular location for GDAL binaries and
bindings for Windows. For Python 2.6 on 32-bit Windows, I would recommend
downloading "MSVC2008 (Win32) -stable" from the first table on the page
(i.e. http://vbkto.dyndns.org/sdk/release-1500-gdal-1-7-mapserver-5-6.zip).

In that zip, you will find the GDAL binaries in the bin directory and the
Python bindings in the bin\gdal\python directory. To install the bindings,
you can probably copy the entire contents of \bin\gdal\python including the
osgeo subdir into your Python site-packages directory; if you are using the
Python 2.6 installed by ArcGIS 10, it will be something like
C:\Python26\ArcGIS10\Lib\site-packages.

To get the bindings working, you'll have to configure the GDAL environment
variables and PATH environment variable, so that the bindings can access the
GDAL binaries. If you used GDAL successfully in the past, you know what I'm
talking about.

Note that a bug in ArcGIS 9.3, 9.3.1, and 10 prevents the bindings from
working properly from "in-process" geoprocessing scripts. See the end of
http://trac.osgeo.org/gdal/wiki/PythonGotchas. I was told by an ESRI
developer that this was likely to be fixed in ArcGIS 10 SP1, but have not
received confirmation from him about it, nor have I tested it.

Good luck,

Jason

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Christopher Barker
Sent: Sunday, December 12, 2010 12:20 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Can't make Python binding work

Martin Hvidberg wrote:
> To start with the problem... In a new python file I write:

> When run it replies:
> 
> Traceback (most recent call last):
> 
>      _File "C:\Martin\Work_Eclipse\Hilfe\src\check_GDAL.py", line 8, in 
> <module>_
> 
>         import gdal
> 
> ImportError: No module named gdal
> 
> 
> To me that translates into, Python can't find the GDAL modules.

correct.

> I using GDAL from http://pypi.python.org/pypi/GDAL/

On that site, it says: "GDAL Python Bindings available at the Python 
Cheeseshop. An executable installer is available for both Python 2.4 or 
2.5 or as a Python egg."

but I don't see any Windows binaries for the python bindings, and that 
note doesn't include 2.6 anyway, i suspect it hasn't been updated for a 
while -- we really should have python 2.6 and 2.7 there, as well as GDAL 
1.7.*

> I downloaded http://download.osgeo.org/gdal/win32/1.6/gdalwin32exe160.zip

That is the binaries for the gdal libs and command line utilities -- it 
does not include th python bindings.

So you'll need to:

1) do: "easy install GDAL" -- which may find the binaries for you.

2) find a Windows installer for the binaries

3) download the source and do "python setup.py build", "python setup.py 
install", but that will require that you have the right compiler set up.

> *Question 1*: Are there any problems in using GDAL 1.6 with Python 2.6 
> on a win-xp?

I don't think there are any problems -- but it does look like there are 
no easy-to-install binaries.

There are other binaries of GDAL around -- but I don't if any of them 
have python bindings build in. FWTools and OSGeo4W do, but I don't know 
if they are compatible with the ESRI-supplied python.

The state of binaries for Windows is not good -- but I'm not offering to 
build them, so what can you do? If there is someone that does want to 
supply easy-to-install Windows binaries for Python folks, but isn't sure 
  what they should do, I'd be glad to provide input on that, but I don't 
work primarily on Windows, and compiling stuff there has always been a 
pain for me.

> Looking into ...\gdalwin32-1.6\bin\ in find no *.py files (nor *.pyc)
> 
> I would have expected some files with python extensions.

right -- that installer does not include the python bindings.

> What file exactly is the import statement supposed to find, 
> that will enable it to include osgeo functionality?

You are looking for the right things -- properly installed, there will 
be a "osgeo" package on your PYTHONPATH, probably in "site-packages"

Good luck, sorry I'm not more help.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From aborruso at tin.it  Sun Dec 12 14:57:57 2010
From: aborruso at tin.it (iomeneandrei)
Date: Sun Dec 12 14:57:59 2010
Subject: [gdal-dev] Can't make Python binding work
In-Reply-To: <4D04B6A0.1060907@Hvidberg.net>
References: <4D04B6A0.1060907@Hvidberg.net>
Message-ID: <1292183877888-5828817.post@n2.nabble.com>


Hi Martin,
you can download GDAL python from here:
http://www.python.org/ftp/python/2.6.5/

Best regards,

a


-----
Andrea Borruso

----------------------------------------------------
email: aborruso@tin.it
website: http://blog.spaziogis.it
my 2.0 life: http://aborruso.spaziogis.it
feed: http://feeds2.feedburner.com/Tanto
38? 7' 48" N, 13? 21' 9" E
----------------------------------------------------
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Can-t-make-Python-binding-work-tp5827891p5828817.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From simone.giannecchini at geo-solutions.it  Sun Dec 12 16:03:33 2010
From: simone.giannecchini at geo-solutions.it (Simone Giannecchini)
Date: Sun Dec 12 16:03:56 2010
Subject: [gdal-dev] image-io extension
In-Reply-To: <201012110041.44625.even.rouault@mines-paris.org>
References: <AANLkTikBYxgJuWa36tzLae9qg7WbJ+k9f-hP_av8=EMT@mail.gmail.com>
	<201012092025.27602.even.rouault@mines-paris.org>
	<AANLkTinAoVSnuyWm2kvxi-_eUbUQhYN_xTn_wv3bbEhu@mail.gmail.com>
	<201012110041.44625.even.rouault@mines-paris.org>
Message-ID: <AANLkTi=T7D+UV-X_VG5=sW5sH46LS+3kUL3Ct0BWbEsT@mail.gmail.com>

Ciao Even,
I am neither trying to cut it short nor I was anyhow offended by your
response but you are email
is drawing is essence from a few  misunderstandings which I would like
to clarify before this thread takes more time/space:

-1- Viji is trying to package the development version of imageio-ext,
which is not (atm at least) used in any official version of geotools
and/or geoserver. He is actually playing with the trunk of
imageio-ext..
-2- I never intended to propose anything to be committed in GDAL at
this moment, especially the patch that Viji has been looking at. As we
have done in the past we will try to propose changes only when they
are really needed
and of interest for the community
-3- Our goals in the short/mid terms with regards to the GDAL JNI
bindings are confined to a user standpoint, with the possibility to
propose few isolated patches as we have done in the past. We do not
foresee resources for broader involvement.

Summarising if Viji wants to package imageio-ext he is looking at the
wrong version. 1.0.8 should work with gdal 1.4.5 as it is
(mainstream?). I will have daniele confirm this tomorrow.

Ciao,
Simone.
-------------------------------------------------------
Ing. Simone Giannecchini
GeoSolutions S.A.S.
Founder

Via Poggio alle Viti 1187
55054? Massarosa (LU)
Italy

phone: +39 0584962313
fax:? ? ? +39 0584962313
mob:? ? +39 333 8128928


http://www.geo-solutions.it
http://geo-solutions.blogspot.com/
http://www.linkedin.com/in/simonegiannecchini
http://twitter.com/simogeo

-------------------------------------------------------



On Sat, Dec 11, 2010 at 12:41 AM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Le vendredi 10 d?cembre 2010 10:27:49, Simone Giannecchini a ?crit :
>> Ciao Even,
>> I have asked daniele to make those changes (which have not been reviewed
>> yet) in order to move away from the explicit usage of Vector and HashTable
>> in method signatures in favour of using the respective interfaces (List
>> and Map). Daniele can add more as needed...
>
> Simone,
>
> I can understand that you don't like using Vector or Hashtable in the API you
> expose in imageio-ext, but you can also understand that it doesn't make a very
> compelling reason to take your changes in the hope that they also fit the needs
> of other users of the GDAL Java bindings.
>
> You could certainly convert the Vector into an ArrayList on your side and
> "hide" that. Not ideal, but there's no technical obstacle.
>
> The GDAL Python bindings are also well-known for not being very "pythonish" by
> some aspects (and some of those aspects can be sometimes very very painful !),
> but it doesn't prevent them from being used successfully by a pretty
> impressive amount of people.
>
>>
>> As you mentioned this change can break old code, but it should
>> make the java bindings more ... javaish :).
>
> I'd note that what is "javaish" or not is subject to trends that evolve over
> time. Sometimes it is not bad to wait for the dust to settle ;-)
>
> And concerning :
>
>> On the other hand GDAL is well known for the rock solid stability of
>> its API
>
> Indeed, I prefer that the bindings are stable (and sometimes expose rough
> corners due to past choices). Being "javaish" isn't an aim per se.
>
>> but yeah this "instability" would apply only to the Java
>> bindings and would follow a well known practice. """
>
> I respectfully disagree with you on this. For example, most API of the
> standard Java library dating back to the Java 1.0 era haven't been removed in
> Java 1.6. And by the way, neither
> http://download.oracle.com/javase/6/docs/api/java/util/Vector.html nor
> http://download.oracle.com/javase/6/docs/api/java/util/Hashtable.html mention
> those 2 to be deprecated at all ;-)
> Now, you'll certainly find other Java projects that might have different habits
> of course.
>
> Let's be realistic : interface breakage can happen sometimes. But IMHO the
> reasons must be very compelling (totally broken/unusable interface). And I'd
> expect a consensus on this, or at least support from a majority of users.
>
>>
>> We have other changes in the queue which we might submit to your review
>> early next year, but this is another topic...
>
> If you wish that your changes to be integrated back into GDAL, I'm afraid this
> isn't the best way to proceed. It is not very efficient and enjoyable to review
> a code dump without prior discussion about its rationale and main orientations
> (especially when it involves API breakage). Basically, I'm just recalling a
> best-practice for collaboration with any FOSS project...
>
>>
>>
>> Viji , I don't think you need to use the patch you are referring to since
>> that is needed for imageio-ext 1.1 which has not been released yet.
>
> I'm afraid that the packagers of imageio-ext 1.1 will face difficult
> alternatives if your patch is still needed but not applied in upstream GDAL :
> - Applying your patch and thus forking from upstream GDAL as far as the GDAL
> Java API is concerned ? --> Most Linux distro (including Fedora unless I'm
> wrong) have a policy to stick to upstream as much as possible and only patch
> for serious reasons.
> - Applying a patch to imageio-ext to make it work with upstream GDAL ?
> Unlikely for the same reason as above and why would they make that effort
> instead of upstream imageio-ext ?
> - Finding a way to have a specific version of the patched GDAL Java bindings
> only used by imageio-ext ? Technically possible I guess by "duplicating" the
> java bindings (both the gdal.jar + the *jni.so) and embedding a specific
> version in imageio-ext package. But then, you will have to make sure they
> won't conflict in case someone wants to use both imageio-ext and "official" GDAL
> java bindings. I also doubt that a packager would want to go into that.
>
>
> Best regards,
>
> Even
>
>>
>> Ciao,
>> Simone.
>> -------------------------------------------------------
>> Ing. Simone Giannecchini
>> GeoSolutions S.A.S.
>> Founder
>>
>> Via Poggio alle Viti 1187
>> 55054 ?Massarosa (LU)
>> Italy
>>
>> phone: +39 0584962313
>> fax: ? ? ?+39 0584962313
>> mob: ? ?+39 333 8128928
>>
>>
>> http://www.geo-solutions.it
>> http://geo-solutions.blogspot.com/
>> http://www.linkedin.com/in/simonegiannecchini
>> http://twitter.com/simogeo
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From viji at fedoraproject.org  Sun Dec 12 20:46:43 2010
From: viji at fedoraproject.org (Viji V Nair)
Date: Sun Dec 12 20:47:06 2010
Subject: [gdal-dev] image-io extension
In-Reply-To: <AANLkTi=T7D+UV-X_VG5=sW5sH46LS+3kUL3Ct0BWbEsT@mail.gmail.com>
References: <AANLkTikBYxgJuWa36tzLae9qg7WbJ+k9f-hP_av8=EMT@mail.gmail.com>
	<201012092025.27602.even.rouault@mines-paris.org>
	<AANLkTinAoVSnuyWm2kvxi-_eUbUQhYN_xTn_wv3bbEhu@mail.gmail.com>
	<201012110041.44625.even.rouault@mines-paris.org>
	<AANLkTi=T7D+UV-X_VG5=sW5sH46LS+3kUL3Ct0BWbEsT@mail.gmail.com>
Message-ID: <AANLkTinbX2Wau5ezjrqZD1ZRdDTtHDVXn3-v7i=4bke0@mail.gmail.com>

Hi

On Mon, Dec 13, 2010 at 2:33 AM, Simone Giannecchini
<simone.giannecchini@geo-solutions.it> wrote:
> Ciao Even,
> I am neither trying to cut it short nor I was anyhow offended by your
> response but you are email
> is drawing is essence from a few ?misunderstandings which I would like
> to clarify before this thread takes more time/space:
>
> -1- Viji is trying to package the development version of imageio-ext,
> which is not (atm at least) used in any official version of geotools
> and/or geoserver. He is actually playing with the trunk of
> imageio-ext..
> -2- I never intended to propose anything to be committed in GDAL at
> this moment, especially the patch that Viji has been looking at. As we
> have done in the past we will try to propose changes only when they
> are really needed
> and of interest for the community
> -3- Our goals in the short/mid terms with regards to the GDAL JNI
> bindings are confined to a user standpoint, with the possibility to
> propose few isolated patches as we have done in the past. We do not
> foresee resources for broader involvement.
>
> Summarising if Viji wants to package imageio-ext he is looking at the
> wrong version. 1.0.8 should work with gdal 1.4.5 as it is
> (mainstream?). I will have daniele confirm this tomorrow.

The fedora releases already have a much higher mainstream stable
version of GDAL, 1.7.x. I am afraid  that we cannot downgrade this to
have the image-io extension support.

Thanks
Viji
>
> Ciao,
> Simone.
> -------------------------------------------------------
> Ing. Simone Giannecchini
> GeoSolutions S.A.S.
> Founder
>
> Via Poggio alle Viti 1187
> 55054? Massarosa (LU)
> Italy
>
> phone: +39 0584962313
> fax:? ? ? +39 0584962313
> mob:? ? +39 333 8128928
>
>
> http://www.geo-solutions.it
> http://geo-solutions.blogspot.com/
> http://www.linkedin.com/in/simonegiannecchini
> http://twitter.com/simogeo
>
> -------------------------------------------------------
>
>
>
> On Sat, Dec 11, 2010 at 12:41 AM, Even Rouault
> <even.rouault@mines-paris.org> wrote:
>> Le vendredi 10 d?cembre 2010 10:27:49, Simone Giannecchini a ?crit :
>>> Ciao Even,
>>> I have asked daniele to make those changes (which have not been reviewed
>>> yet) in order to move away from the explicit usage of Vector and HashTable
>>> in method signatures in favour of using the respective interfaces (List
>>> and Map). Daniele can add more as needed...
>>
>> Simone,
>>
>> I can understand that you don't like using Vector or Hashtable in the API you
>> expose in imageio-ext, but you can also understand that it doesn't make a very
>> compelling reason to take your changes in the hope that they also fit the needs
>> of other users of the GDAL Java bindings.
>>
>> You could certainly convert the Vector into an ArrayList on your side and
>> "hide" that. Not ideal, but there's no technical obstacle.
>>
>> The GDAL Python bindings are also well-known for not being very "pythonish" by
>> some aspects (and some of those aspects can be sometimes very very painful !),
>> but it doesn't prevent them from being used successfully by a pretty
>> impressive amount of people.
>>
>>>
>>> As you mentioned this change can break old code, but it should
>>> make the java bindings more ... javaish :).
>>
>> I'd note that what is "javaish" or not is subject to trends that evolve over
>> time. Sometimes it is not bad to wait for the dust to settle ;-)
>>
>> And concerning :
>>
>>> On the other hand GDAL is well known for the rock solid stability of
>>> its API
>>
>> Indeed, I prefer that the bindings are stable (and sometimes expose rough
>> corners due to past choices). Being "javaish" isn't an aim per se.
>>
>>> but yeah this "instability" would apply only to the Java
>>> bindings and would follow a well known practice. """
>>
>> I respectfully disagree with you on this. For example, most API of the
>> standard Java library dating back to the Java 1.0 era haven't been removed in
>> Java 1.6. And by the way, neither
>> http://download.oracle.com/javase/6/docs/api/java/util/Vector.html nor
>> http://download.oracle.com/javase/6/docs/api/java/util/Hashtable.html mention
>> those 2 to be deprecated at all ;-)
>> Now, you'll certainly find other Java projects that might have different habits
>> of course.
>>
>> Let's be realistic : interface breakage can happen sometimes. But IMHO the
>> reasons must be very compelling (totally broken/unusable interface). And I'd
>> expect a consensus on this, or at least support from a majority of users.
>>
>>>
>>> We have other changes in the queue which we might submit to your review
>>> early next year, but this is another topic...
>>
>> If you wish that your changes to be integrated back into GDAL, I'm afraid this
>> isn't the best way to proceed. It is not very efficient and enjoyable to review
>> a code dump without prior discussion about its rationale and main orientations
>> (especially when it involves API breakage). Basically, I'm just recalling a
>> best-practice for collaboration with any FOSS project...
>>
>>>
>>>
>>> Viji , I don't think you need to use the patch you are referring to since
>>> that is needed for imageio-ext 1.1 which has not been released yet.
>>
>> I'm afraid that the packagers of imageio-ext 1.1 will face difficult
>> alternatives if your patch is still needed but not applied in upstream GDAL :
>> - Applying your patch and thus forking from upstream GDAL as far as the GDAL
>> Java API is concerned ? --> Most Linux distro (including Fedora unless I'm
>> wrong) have a policy to stick to upstream as much as possible and only patch
>> for serious reasons.
>> - Applying a patch to imageio-ext to make it work with upstream GDAL ?
>> Unlikely for the same reason as above and why would they make that effort
>> instead of upstream imageio-ext ?
>> - Finding a way to have a specific version of the patched GDAL Java bindings
>> only used by imageio-ext ? Technically possible I guess by "duplicating" the
>> java bindings (both the gdal.jar + the *jni.so) and embedding a specific
>> version in imageio-ext package. But then, you will have to make sure they
>> won't conflict in case someone wants to use both imageio-ext and "official" GDAL
>> java bindings. I also doubt that a packager would want to go into that.
>>
>>
>> Best regards,
>>
>> Even
>>
>>>
>>> Ciao,
>>> Simone.
>>> -------------------------------------------------------
>>> Ing. Simone Giannecchini
>>> GeoSolutions S.A.S.
>>> Founder
>>>
>>> Via Poggio alle Viti 1187
>>> 55054 ?Massarosa (LU)
>>> Italy
>>>
>>> phone: +39 0584962313
>>> fax: ? ? ?+39 0584962313
>>> mob: ? ?+39 333 8128928
>>>
>>>
>>> http://www.geo-solutions.it
>>> http://geo-solutions.blogspot.com/
>>> http://www.linkedin.com/in/simonegiannecchini
>>> http://twitter.com/simogeo
>>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
From bgiv at gmx.de  Mon Dec 13 06:07:51 2010
From: bgiv at gmx.de (Wolfgang Lahr)
Date: Mon Dec 13 06:07:57 2010
Subject: [gdal-dev] transformation with nadgrids
Message-ID: <1957035315.20101213120751@gmx.de>

Hello list,

I am using GDAL/OGR to transform raster and vector data from German
Gauss-Krueger (DHDN) to ETRS/UTM like so:

gdalwarp/ogr2ogr -s_srs "+proj=tmerc +lat_0=0 +lon_0=9 +k=1.000000 +x_0=3500000 +y_0=0 +ellps=bessel +units=m +nadgrids=./HeTa2010.gsb +wktext"
-t_srs "+proj=utm +zone=32 +ellps=GRS80 +datum=WGS84 +units=m" ...

This works very well (Kudos to Frank and co-developers!!).

Now, the question came up, how to do it just the other way round, ie from
ETRS/UTM to Gauss-Krueger (DHDN) using the same grid.

Any hints?

Regards and thanks

Wolfgang

From Ralf.Suhr at itc-halle.de  Mon Dec 13 07:24:39 2010
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Mon Dec 13 07:24:43 2010
Subject: [gdal-dev] transformation with nadgrids
In-Reply-To: <1957035315.20101213120751@gmx.de>
References: <1957035315.20101213120751@gmx.de>
Message-ID: <201012131324.39375.Ralf.Suhr@itc-halle.de>

Hi Wolfgang,

is gdalwarp/ogr2ogr -t_srs "+proj=tmerc +lat_0=0 +lon_0=9 +k=1.000000 
+x_0=3500000 +y_0=0 +ellps=bessel +units=m +nadgrids=./HeTa2010.gsb +wktext" -
s_srs "+proj=utm +zone=32 +ellps=GRS80 +datum=WGS84 +units=m" ... not working 
for you?

The default EPSG:25832 can also be written as "+proj=tmerc +lat_0=0 +lon_0=9 
+k=0.9996 +x_0=500000 +y_0=0 +ellps=WGS84 +units=m +wktext"

Gr
Ralf

Am Montag 13 Dezember 2010, 12:07:51 schrieb Wolfgang Lahr:
> Hello list,
> 
> I am using GDAL/OGR to transform raster and vector data from German
> Gauss-Krueger (DHDN) to ETRS/UTM like so:
> 
> gdalwarp/ogr2ogr -s_srs "+proj=tmerc +lat_0=0 +lon_0=9 +k=1.000000
> +x_0=3500000 +y_0=0 +ellps=bessel +units=m +nadgrids=./HeTa2010.gsb
> +wktext" -t_srs "+proj=utm +zone=32 +ellps=GRS80 +datum=WGS84 +units=m"
> ...
> 
> This works very well (Kudos to Frank and co-developers!!).
> 
> Now, the question came up, how to do it just the other way round, ie from
> ETRS/UTM to Gauss-Krueger (DHDN) using the same grid.
> 
> Any hints?
> 
> Regards and thanks
> 
> Wolfgang
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From alobolistas at gmail.com  Mon Dec 13 08:29:56 2010
From: alobolistas at gmail.com (Agustin Lobo)
Date: Mon Dec 13 08:29:59 2010
Subject: [gdal-dev] gdal18dev ??
Message-ID: <AANLkTiktAoOCR-_A_J3CGgLsHdy8Bytn7bsDe0LT3mWy@mail.gmail.com>

Hi!

According to Synaptic (on ubuntu 10.04 64 bits) I have gdal1.7.3, but
package rgdal in R claims
GDAL runtime: GDAL 1.8dev

How can it be? I do not find any gdal18 in my system and rgdal uses
the installed gdal, as I install rgdal from source.

Thanks,

Agus
From BCassanova at weather.com  Mon Dec 13 16:30:45 2010
From: BCassanova at weather.com (Cassanova, Bill)
Date: Mon Dec 13 16:31:31 2010
Subject: [gdal-dev] Question about GDALCreateGenImgProjTransformer
Message-ID: <1D5F4E64B8C04F4C868B94AC9A532AF80F260734@ATLMAIL01.corp.weather.com>

Hi All,

 

I am experiencing a bit of confusion regarding the use of
GDALCreateGenImgProjTransformer.

 

I am attempting to create a ProjTransformer in 2 different ways to prove
to myself that I would get the same result...The problem is I don't but
don't understand exactly why.

 

The first method I am trying is to open the GRIB2 dataset using GDALOpen
to get a GDAL dataset handle.  This handle is then passed to
GDALCreateGenImgProjTransformer as the first argument with the second
argument being passed as NULL.  The destination dataset is one created
using the well-known "WGS84" Tag...For example

 

OGRSpatialReferenceH hDEST;

hDEST = OSRNewSpatialReference(NULL);

OSRSetWellKnownGeogCS(hDEST, "WGS84");

OSRExportToWkt(hDEST, &pszDstWKT);

OSRDestroySpatialReference(hDEST);

 

void *my_transformer = GDALCreateGenImgProjTransformer(hSrcDS,

                                                          NULL,

                                                          NULL,

                                                          pszDstWKT,

                                                          FALSE, 0.0,
0);

 

The second method passes NULL for the first argument and instead passed
the WKT instead.  The destination data set is the same as created above.

 

void *my_second_transformer = GDALCreateGenImgProjTransformer( NULL,

 
GDALGetProjectionRef( hSrcDS ),

                                                                  NULL,

 
pszDstWKT,

                                                                  FALSE,

                                                                  0.0, 0
);

 

The result of GDALGetProjectionRef( hSrcDS ) for reference :

    

PROJCS["unnamed",

    GEOGCS["Coordinate System imported from GRIB file",

        DATUM["unknown",

            SPHEROID["Sphere",6371229,0]],

        PRIMEM["Greenwich",0],

        UNIT["degree",0.0174532925199433]],

    PROJECTION["Lambert_Conformal_Conic_2SP"],

    PARAMETER["standard_parallel_1",25],

    PARAMETER["standard_parallel_2",25],

    PARAMETER["latitude_of_origin",0],

    PARAMETER["central_meridian",265],

    PARAMETER["false_easting",0],

    PARAMETER["false_northing",0]]

 

Lambert Conformal Grid Information as extracted from gdalinfo:

Origin = (-4226106.996915472671390,7240925.337282469496131)

Pixel Size = (12191.000000000000000,-12191.000000000000000)

Corner Coordinates:

Upper Left  (-4226106.997, 7240925.337) (152d52'43.04"W, 54d33'55.24"N)

Lower Left  (-4226106.997, 2023177.337) (133d25'42.19"W, 12d 5'14.28"N)

Upper Right ( 3259167.003, 7240925.337) ( 49d15'27.05"W, 57d17'54.49"N)

Lower Right ( 3259167.003, 2023177.337) ( 65d 2'28.98"W, 14d12'48.02"N)

Center      ( -483469.997, 4632051.337) (100d30'19.44"W, 40d34'21.84"N)

 

 

To test both of these I pass in the known coordinates up the upper left
hand corner of the grid ( -152.877, 54.567 ) using code:

 

double x_coord = atof( argv[2] );

double y_coord = atof( argv[3] );

 

std::cout << std::fixed << "original x_coord: " << x_coord << " y_coord:
" << y_coord << std::endl;

 

result =      GDALGenImgProjTransform( my_transformer, TRUE, 1,
&x_coord, &y_coord,

                               NULL, &panSuccess);

 

  std::cout << std::fixed << "calculated x_coord: " << x_coord << "
y_coord: " << y_coord << std::endl;

 

// Reset x-coord and y-coord from command line.

  x_coord = atof( argv[2] );

  y_coord = atof( argv[3] );

 

  std::cout << std::fixed << "second original x_coord: " << x_coord << "
y_coord: " << y_coord << std::endl;

 

   esult =

      GDALGenImgProjTransform( my_second_transformer, TRUE, 1, &x_coord,
&y_coord,

                               NULL, &panSuccess);

 

   std::cout << std::fixed << "second calculated x_coord: " << x_coord
<< " y_coord: " << y_coord << std::endl;

 

The results:

 

// This result is right on the money and exactly what I expect

original x_coord: -152.877000 y_coord: 54.567000

calculated x_coord: 0.016427 y_coord: -0.011915

 

// This result is not what I expect.  I would have assumed since I
created the transformer in a different way but using the WKT information
it should have been the same.

// instead I am getting the Lambert Easting and Northing in Meters.

second original x_coord: -152.877000 y_coord: 54.567000

second calculated x_coord: -4225906.734228 y_coord: 7241070.590061

 

Am I missing a step here?

 

Thanks,

Bill

 

++++

 

William Cassanova | Senior GFS Developer | The Weather Channel |
770.226.2368 | bcassanova@weather.com

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101213/b9852c6d/attachment.html
From bgiv at gmx.de  Mon Dec 13 17:01:09 2010
From: bgiv at gmx.de (Wolfgang Lahr)
Date: Mon Dec 13 17:01:15 2010
Subject: Fwd: Re: [gdal-dev] transformation with nadgrids
In-Reply-To: <9210343345.20101213133243@gmx.de>
References: <1957035315.20101213120751@gmx.de>
	<201012131247.08306.Ralf.Suhr@itc-halle.de>
	<9210343345.20101213133243@gmx.de>
Message-ID: <1717999058.20101213230109@gmx.de>

Ralf,

I did not expect it to be that simple ;-). I was expecting problems
with the direction of the shifts in the HeTA-grid and therefore didn't give it a try.

Thanks a lot

Wolfgang



Monday, December 13, 2010, 12:47:07 PM, you wrote:


Hi Wolfgang,
is gdalwarp/ogr2ogr -t_srs "+proj=tmerc +lat_0=0 +lon_0=9 +k=1.000000 +x_0=3500000 +y_0=0 +ellps=bessel +units=m +nadgrids=./HeTa2010.gsb +wktext" -s_srs "+proj=utm +zone=32 +ellps=GRS80 +datum=WGS84 +units=m" ... not working for you?
The default EPSG:25832 can also be written as "+proj=tmerc +lat_0=0 +lon_0=9 +k=0.9996 +x_0=500000 +y_0=0 +ellps=WGS84 +units=m +wktext"
Gr
Ralf
Am Montag 13 Dezember 2010, 12:07:51 schrieb Wolfgang Lahr:
> Hello list,
> 
> I am using GDAL/OGR to transform raster and vector data from German
> Gauss-Krueger (DHDN) to ETRS/UTM like so:
> 
> gdalwarp/ogr2ogr -s_srs "+proj=tmerc +lat_0=0 +lon_0=9 +k=1.000000
> +x_0=3500000 +y_0=0 +ellps=bessel +units=m +nadgrids=./HeTa2010.gsb
> +wktext" -t_srs "+proj=utm +zone=32 +ellps=GRS80 +datum=WGS84 +units=m"
> ...
> 
> This works very well (Kudos to Frank and co-developers!!).
> 
> Now, the question came up, how to do it just the other way round, ie from
> ETRS/UTM to Gauss-Krueger (DHDN) using the same grid.
> 
> Any hints?
> 
> Regards and thanks
> 
> Wolfgang
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101213/35b91b49/Message.html
From mafunk at nmsu.edu  Mon Dec 13 17:33:58 2010
From: mafunk at nmsu.edu (Matt Funk)
Date: Mon Dec 13 17:33:50 2010
Subject: [gdal-dev] question about ReadAsArray
Message-ID: <4D069F56.7020400@nmsu.edu>

Hi,

i am a bit new to the gdal library. I am trying to process some geotiff
files in python.

1) I am making a call to the ReadAsArray data as such:
...
band = ds.GetRasterBand(1)
array = band.ReadAsArray(0,0,band.XSize,band.YSize)
print array.shape
...
which returns: (7191, 8331)
Now, what i don't understand is that when i do:
...
print 'Size is ',ds.RasterXSize,'x',ds.RasterYSize, 'x',ds.RasterCount
...
i get: Size is  8331 x 7191 x 1

So does that mean that ReadAsArray returns the an array that has its
dimensions flipped?


2) Where can i find the documentation for the ReadAsArray fcn?


thanks
matt


From mariusjigmond at hotmail.com  Mon Dec 13 22:09:54 2010
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Mon Dec 13 22:11:00 2010
Subject: [gdal-dev] Gdalwarp -crop_to_cutline results in 0 filled raster
Message-ID: <BLU0-SMTP67B2BCBD3C873978D7506DB2130@phx.gbl>

Hi Everyone,

Has anyone experienced the problem in the subject line? I ran:

$gdalwarp -cutline shapefile -crop_to_cutline -s_srs EPSG:31700 -t_srs
EPSG:3844 source.tif dest.tif

and I ended up with a zero filled raster with the correct extent
however. Using 1.8dev. I have a rudimentary script that does the extract
by mask similar to -crop_to_cutline feature, and I was looking forward
to this much simpler approach.

-marius
-- 
Sent from Ubuntu




From bartvde at osgis.nl  Tue Dec 14 01:40:03 2010
From: bartvde at osgis.nl (Bart van den Eijnden (OSGIS))
Date: Tue Dec 14 01:40:06 2010
Subject: [gdal-dev] ESRI file geodatabase API finally announced
Message-ID: <34454.145.50.39.15.1292308803.squirrel@webmail.hostingdiscounter.nl>

See:

http://blogs.esri.com/Dev/blogs/geodatabase/archive/2010/12/13/File-Geodatabase-API-details.aspx

Best regards,
Bart

From brfr at metrico.lu  Tue Dec 14 02:33:42 2010
From: brfr at metrico.lu (Frank Broniewski)
Date: Tue Dec 14 03:02:15 2010
Subject: [gdal-dev] Internal Metadata Management
Message-ID: <4D071DD6.8080200@metrico.lu>

Hello,

I have a question concerning OGR's metadata or attribute management when 
converting between geodata vector formats. My question is maybe only 
loosely related to OGR and aims at the internal management of attribute 
data.

 From what I have read and understood from the documentation, OGR uses 
the OGC Simple Feature Specifiaction to transform data from one format 
to another. While reading the OGC specs I could not find a notion on how 
one should deal with attribute metadata, the whole spec seems to be 
about vector geometries only.

Why I ask this: I am a Python user using the ogr python bindings and now 
the need arose that I need to write a flexible geo format exchange 
software. I chose OGR as a base for doing the conversion. My data often 
comes from databases with non standard data and geoemtry formats. So I 
want to align with OGR's internal used Simple Feature Data format, but I 
don't know how/where I should put the attributes / metadata. I see that 
the Feature is the part I have to look at because it has the geometry 
and the FeatureDfn. Unfortunately this is the part I don't understand :-)
I need to create a FeatureDfn for my Feature which is basically the 
column names and data types? Where do I put my attribute values then? I 
looked at the OGRFeatureDefn Class Reference, but my understanding of 
OGR is too low to understand how this relates to the OGRFeature.

So basically I am looking for a starter tip that pushes me into the 
right direction. Is there some python tutorial somewhere which I missed 
or somebody has a code snippet for me?

Or would it be easier to use internally a format like geojson and use 
this as a starter for converting to other formats? Can OGR always 
transfer the attributes of my geospatial data to other formats?

I am sorry that my question is somewhat unclear, but I have some 
difficulties to find the right form for my question. But I hope that I 
could state my problem in an understandable way :-)

Many thanks for any tipps

Frank
From ari.jolma at gmail.com  Tue Dec 14 03:40:15 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue Dec 14 03:40:19 2010
Subject: [gdal-dev] Internal Metadata Management
In-Reply-To: <4D071DD6.8080200@metrico.lu>
References: <4D071DD6.8080200@metrico.lu>
Message-ID: <4D072D6F.5060007@gmail.com>

Frank,

A FeatureDefn is typically shared by all features in a layer and you 
need one to create a feature object. Feature class has SetField and 
GetField methods for storing and retrieving the attributes of a feature.

I hope this helps,

Ari

On 12/14/2010 09:33 AM, Frank Broniewski wrote:
> Hello,
>
> I have a question concerning OGR's metadata or attribute management 
> when converting between geodata vector formats. My question is maybe 
> only loosely related to OGR and aims at the internal management of 
> attribute data.
>
> From what I have read and understood from the documentation, OGR uses 
> the OGC Simple Feature Specifiaction to transform data from one format 
> to another. While reading the OGC specs I could not find a notion on 
> how one should deal with attribute metadata, the whole spec seems to 
> be about vector geometries only.
>
> Why I ask this: I am a Python user using the ogr python bindings and 
> now the need arose that I need to write a flexible geo format exchange 
> software. I chose OGR as a base for doing the conversion. My data 
> often comes from databases with non standard data and geoemtry 
> formats. So I want to align with OGR's internal used Simple Feature 
> Data format, but I don't know how/where I should put the attributes / 
> metadata. I see that the Feature is the part I have to look at because 
> it has the geometry and the FeatureDfn. Unfortunately this is the part 
> I don't understand :-)
> I need to create a FeatureDfn for my Feature which is basically the 
> column names and data types? Where do I put my attribute values then? 
> I looked at the OGRFeatureDefn Class Reference, but my understanding 
> of OGR is too low to understand how this relates to the OGRFeature.
>
> So basically I am looking for a starter tip that pushes me into the 
> right direction. Is there some python tutorial somewhere which I 
> missed or somebody has a code snippet for me?
>
> Or would it be easier to use internally a format like geojson and use 
> this as a starter for converting to other formats? Can OGR always 
> transfer the attributes of my geospatial data to other formats?
>
> I am sorry that my question is somewhat unclear, but I have some 
> difficulties to find the right form for my question. But I hope that I 
> could state my problem in an understandable way :-)
>
> Many thanks for any tipps
>
> Frank
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From ricardo.garcia.silva at gmail.com  Tue Dec 14 05:16:33 2010
From: ricardo.garcia.silva at gmail.com (Ricardo Filipe Soares Garcia da)
Date: Tue Dec 14 05:16:55 2010
Subject: [gdal-dev] Internal Metadata Management
In-Reply-To: <4D072D6F.5060007@gmail.com>
References: <4D071DD6.8080200@metrico.lu> <4D072D6F.5060007@gmail.com>
Message-ID: <AANLkTinoDn+wtJZtPutzn-BmDKTvXKMzOS3DniLQagcH@mail.gmail.com>

Hi Frank

Check out this link [1]. It is the online reference on a Utah
University course called 'Geoprocessing with Python using Open Source
GIS'. It uses GDAL/OGR and is great as a starting point. It has helped
me plenty ;)

[1] - http://www.gis.usu.edu/~chrisg/python/

On Tue, Dec 14, 2010 at 8:40 AM, Ari Jolma <ari.jolma@gmail.com> wrote:
> Frank,
>
> A FeatureDefn is typically shared by all features in a layer and you need
> one to create a feature object. Feature class has SetField and GetField
> methods for storing and retrieving the attributes of a feature.
>
> I hope this helps,
>
> Ari
>
> On 12/14/2010 09:33 AM, Frank Broniewski wrote:
>>
>> Hello,
>>
>> I have a question concerning OGR's metadata or attribute management when
>> converting between geodata vector formats. My question is maybe only loosely
>> related to OGR and aims at the internal management of attribute data.
>>
>> From what I have read and understood from the documentation, OGR uses the
>> OGC Simple Feature Specifiaction to transform data from one format to
>> another. While reading the OGC specs I could not find a notion on how one
>> should deal with attribute metadata, the whole spec seems to be about vector
>> geometries only.
>>
>> Why I ask this: I am a Python user using the ogr python bindings and now
>> the need arose that I need to write a flexible geo format exchange software.
>> I chose OGR as a base for doing the conversion. My data often comes from
>> databases with non standard data and geoemtry formats. So I want to align
>> with OGR's internal used Simple Feature Data format, but I don't know
>> how/where I should put the attributes / metadata. I see that the Feature is
>> the part I have to look at because it has the geometry and the FeatureDfn.
>> Unfortunately this is the part I don't understand :-)
>> I need to create a FeatureDfn for my Feature which is basically the column
>> names and data types? Where do I put my attribute values then? I looked at
>> the OGRFeatureDefn Class Reference, but my understanding of OGR is too low
>> to understand how this relates to the OGRFeature.
>>
>> So basically I am looking for a starter tip that pushes me into the right
>> direction. Is there some python tutorial somewhere which I missed or
>> somebody has a code snippet for me?
>>
>> Or would it be easier to use internally a format like geojson and use this
>> as a starter for converting to other formats? Can OGR always transfer the
>> attributes of my geospatial data to other formats?
>>
>> I am sorry that my question is somewhat unclear, but I have some
>> difficulties to find the right form for my question. But I hope that I could
>> state my problem in an understandable way :-)
>>
>> Many thanks for any tipps
>>
>> Frank
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
___________________________ ___ __
Ricardo Garcia Silva
From oyvind.idland at gmail.com  Tue Dec 14 07:09:03 2010
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Tue Dec 14 07:09:07 2010
Subject: [gdal-dev] libecwj2 ?
Message-ID: <AANLkTi==OBuGqUaYahLyye0xQ=-3PQuY9tphjuQxnNL9@mail.gmail.com>

Hello,

i am compiling GDAL from source, and need the ECW as plugin.

The package is mentioned on the site, libecwj2-3.3-2006-09-06.zip, is this a
package
from ERDAS ? I tried to find some info about it on their site, but found
nothing..

I found a couple of other download links, so I can at least get started.



-- ?yvind
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101214/96c26e31/attachment.html
From ivan.lucena at pmldnet.com  Tue Dec 14 09:53:20 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Tue Dec 14 09:53:23 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gbGliZWN3ajIgPw==?=
Message-ID: <20101214145321.1667.qmail@s466.sureserver.com>

?yvind,

There is a new SDK that you can download from Erdas website:

http://www.erdas.com/products/ERDASECWJPEG2000SDK/Downloads.aspx

But there are a few changes you would need to do in order to compile the GDAL/ECW driver because the path and library names has changed.

Regards,

Ivan

>  -------Original Message-------
>  From: Oyvind Idland <oyvind.idland@gmail.com>
>  To: gdal-dev@lists.osgeo.org
>  Subject: [gdal-dev] libecwj2 ?
>  Sent: Dec 14 '10 07:09
>  
>  Hello,
>  
>  i am compiling GDAL from source, and need the ECW as plugin.
>  
>  The package is mentioned on the site, libecwj2-3.3-2006-09-06.zip, is this
>  a package
>  from ERDAS ? I tried to find some info about it on their site, but found
>  nothing..
>  
>  I found a couple of other download links, so I can at least get started.
>  
>  
>  -- ?yvind
>  
>  --------------------
>  _______________________________________________
>  gdal-dev mailing list
>  [LINK: compose.php?to=gdal-dev@lists.osgeo.org] gdal-dev@lists.osgeo.org
>  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
From matt.wilkie at gov.yk.ca  Tue Dec 14 12:12:49 2010
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Tue Dec 14 12:13:58 2010
Subject: [gdal-dev] ESRI file geodatabase API finally announced
In-Reply-To: <34454.145.50.39.15.1292308803.squirrel@webmail.hostingdiscounter.nl>
References: <34454.145.50.39.15.1292308803.squirrel@webmail.hostingdiscounter.nl>
Message-ID: <4D07A591.1080606@gov.yk.ca>

> http://blogs.esri.com/Dev/blogs/geodatabase/archive/2010/12/13/File-Geodatabase-API-details.aspx

Thanks for the heads up Bart. The anouncement is for commencement of 
beta in January:

"Thanks for your interest in the File Geodatabase API. The beta program 
for the File Geodatabase API is currently planned to begin by 
mid-January. We are compiling a list of sites who are interested in the 
Beta program, if you are interested, please send me an email 
(lshipman@esri.com) with your contact information.

We?ll be posting more information to the Geodatabase blog as we lead up 
to the Beta. http://blogs.esri.com/Dev/blogs/geodatabase/default.aspx

     Lance Shipman
     Geodatabase Product Engineer, File Geodatabase
     esri"
     -- http://forums.arcgis.com/showthread.php?p=59471


-matt

From jorge.arevalo at deimos-space.com  Tue Dec 14 13:21:01 2010
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Tue Dec 14 13:21:25 2010
Subject: [gdal-dev] question about ReadAsArray
In-Reply-To: <4D069F56.7020400@nmsu.edu>
References: <4D069F56.7020400@nmsu.edu>
Message-ID: <AANLkTinCR=RMJYYP45on00Px1z_nXm0zj2rVxsbsCWi5@mail.gmail.com>

Hi,

On Mon, Dec 13, 2010 at 11:33 PM, Matt Funk <mafunk@nmsu.edu> wrote:
> Hi,
>
> i am a bit new to the gdal library. I am trying to process some geotiff
> files in python.
>
> 1) I am making a call to the ReadAsArray data as such:
> ...
> band = ds.GetRasterBand(1)
> array = band.ReadAsArray(0,0,band.XSize,band.YSize)
> print array.shape
> ...
> which returns: (7191, 8331)
> Now, what i don't understand is that when i do:
> ...
> print 'Size is ',ds.RasterXSize,'x',ds.RasterYSize, 'x',ds.RasterCount
> ...
> i get: Size is ?8331 x 7191 x 1
>
> So does that mean that ReadAsArray returns the an array that has its
> dimensions flipped?
>

If I'm not wrong (I'm looking at the code), yes, the Y coord is put
before the X coord.


>
> 2) Where can i find the documentation for the ReadAsArray fcn?
>

You can find the function here
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/osgeo/gdal.py,
but the code which does the job is here
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/osgeo/gdal_array.py,
and rely on numpy

>
> thanks
> matt
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

Best regards,

-- 
Jorge Ar?valo
Internet & Mobilty Division, DEIMOS
jorge.arevalo@deimos-space.com
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
From joelodom at gmail.com  Tue Dec 14 13:35:10 2010
From: joelodom at gmail.com (Joel Odom)
Date: Tue Dec 14 13:35:11 2010
Subject: [gdal-dev] Building OGR With PostGIS Support
Message-ID: <AANLkTi=T0Tnc6sNTTQQXyqPQ40PPEyVe_7QaH1X5iRWs@mail.gmail.com>

I've just built gdal18dev.dll on Windows.  I'm trying to include PostGIS
support and have set PG_INC_DIR and PG_LIB.  My subsequent gdalinfo.exe
lists the PostGISRaster as a supported format, but ogrinfo.exe does not list
PostgresSQL in the supported formats.  (I also can't use OGR to connect to a
PostGIS database from my application.)  Is there a build step that I may be
missing to include PostGIS support in OGR?  Thanks.


-- 
http://www.operationliberate.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101214/62c0582e/attachment.html
From Roger.Bivand at nhh.no  Tue Dec 14 13:41:42 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue Dec 14 13:41:53 2010
Subject: [gdal-dev] Odd 1.7.3 <> 1.8.0 trunk OGR difference (shapefile
	driver?)
Message-ID: <alpine.LRH.2.00.1012141912460.30157@reclus.nhh.no>

Hi,

Agus Lobo has drawn my attention to an oddity (here using GADM Tunisia 
shapefiles) introduced between 1.7.3 and current(ish) trunk:

$ ogr2ogr --version
GDAL 1.7.3, released 2010/11/10
$ ls TUN*
TUN_adm0.dbf  TUN_adm0.shp  TUN_adm1.sbn  TUN_adm2.dbf  TUN_adm2.shp
TUN_adm0.prj  TUN_adm0.shx  TUN_adm1.sbx  TUN_adm2.prj  TUN_adm2.shx
TUN_adm0.sbn  TUN_adm1.dbf  TUN_adm1.shp  TUN_adm2.sbn  TUN_adm.zip
TUN_adm0.sbx  TUN_adm1.prj  TUN_adm1.shx  TUN_adm2.sbx  TUN_readme.txt
$ ogr2ogr -f "ESRI Shapefile" TUN TUN_adm0.shp -nln TUN
$ ls TUN*
TUN_adm0.dbf  TUN_adm0.shp  TUN_adm1.sbn  TUN_adm2.dbf  TUN_adm2.shp
TUN_adm0.prj  TUN_adm0.shx  TUN_adm1.sbx  TUN_adm2.prj  TUN_adm2.shx
TUN_adm0.sbn  TUN_adm1.dbf  TUN_adm1.shp  TUN_adm2.sbn  TUN_adm.zip
TUN_adm0.sbx  TUN_adm1.prj  TUN_adm1.shx  TUN_adm2.sbx  TUN_readme.txt

TUN:
TUN.dbf  TUN.prj  TUN.shp  TUN.shx

where:

ogr2ogr -f "ESRI Shapefile" TUN TUN_adm0.shp -nln TUN

creates a new DSN (TUN), and populates it with files. But in 1.8.0 (SVN 
21235):

$ rm -rf TUN TUN.*
# swap GDAL versions
$ ogr2ogr --version
GDAL 1.8dev, released 2010/01/19
$ ogr2ogr --version
GDAL 1.8dev, released 2010/01/19
[rsb@reclus2 bigshape]$ ogr2ogr -f "ESRI Shapefile" TUN TUN_adm0.shp -nln 
TUN
[rsb@reclus2 bigshape]$ ls TUN*
TUN_adm0.dbf  TUN_adm0.shx  TUN_adm1.shp  TUN_adm2.sbx  TUN.prj
TUN_adm0.prj  TUN_adm1.dbf  TUN_adm1.shx  TUN_adm2.shp  TUN_readme.txt
TUN_adm0.sbn  TUN_adm1.prj  TUN_adm2.dbf  TUN_adm2.shx  TUN.shp
TUN_adm0.sbx  TUN_adm1.sbn  TUN_adm2.prj  TUN_adm.zip   TUN.shx
TUN_adm0.shp  TUN_adm1.sbx  TUN_adm2.sbn  TUN.dbf

TUN:

it creates the new DSN directory, but does not put the files inside it, 
but rather in the working directory. If the new DSN and layer have 
different names:

$ rm -rf TUN TUN.*
$ ls TUN*
$ ogr2ogr -f "ESRI Shapefile" TUN TUN_adm0.shp -nln TUN0
$ ls TUN*

it works. This also affects the R OGR interface, but it can be reproduced 
with ogr2ogr, so it is inside OGR somewhere. Is the change intended?

With a different driver, it also works, so maybe it is in shape:

$ rm -rf TUN TUN.*
$ ogr2ogr -f "Mapinfo File" TUN TUN_adm0.shp -nln TUN
$ ls TUN*
TUN_adm0.dbf  TUN_adm0.shp  TUN_adm1.sbn  TUN_adm2.dbf  TUN_adm2.shp
TUN_adm0.prj  TUN_adm0.shx  TUN_adm1.sbx  TUN_adm2.prj  TUN_adm2.shx
TUN_adm0.sbn  TUN_adm1.dbf  TUN_adm1.shp  TUN_adm2.sbn  TUN_adm.zip
TUN_adm0.sbx  TUN_adm1.prj  TUN_adm1.shx  TUN_adm2.sbx  TUN_readme.txt

TUN:
TUN.dat  TUN.id  TUN.map  TUN.tab

as expected. Have the changes "to improve the user Shapefile experience" 
got overenthusiastic, maybe? This breaks existing behaviour, so needs 
justification if sustained. It looks like line 509 in

trunk/gdal/ogr/ogrsf_frmts/shape/ogrshapedatasource.cpp

with:

EQUAL(CPLGetBasename(pszName), pszLayerName))

being the smoking gun change? The DSN is TUN, not TUN.shp, but is being 
mistaken for TUN.shp, isn't it?

Best wishes,

Roger

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no

From even.rouault at mines-paris.org  Tue Dec 14 15:27:11 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 14 15:27:33 2010
Subject: [gdal-dev] Odd 1.7.3 <> 1.8.0 trunk OGR difference (shapefile
	driver?)
In-Reply-To: <alpine.LRH.2.00.1012141912460.30157@reclus.nhh.no>
References: <alpine.LRH.2.00.1012141912460.30157@reclus.nhh.no>
Message-ID: <201012142127.11684.even.rouault@mines-paris.org>

Roger,

thanks for your report and the precise spotting of the problem.

The regression of behaviour you saw was not intended at all. It is now fixed in 
SVN (r21257) and I've added new test cases in the test suite r21258 to match 
that use case.

Best regards,

Even

Le mardi 14 d?cembre 2010 19:41:42, Roger Bivand a ?crit :
> Hi,
> 
> Agus Lobo has drawn my attention to an oddity (here using GADM Tunisia
> shapefiles) introduced between 1.7.3 and current(ish) trunk:
> 
> $ ogr2ogr --version
> GDAL 1.7.3, released 2010/11/10
> $ ls TUN*
> TUN_adm0.dbf  TUN_adm0.shp  TUN_adm1.sbn  TUN_adm2.dbf  TUN_adm2.shp
> TUN_adm0.prj  TUN_adm0.shx  TUN_adm1.sbx  TUN_adm2.prj  TUN_adm2.shx
> TUN_adm0.sbn  TUN_adm1.dbf  TUN_adm1.shp  TUN_adm2.sbn  TUN_adm.zip
> TUN_adm0.sbx  TUN_adm1.prj  TUN_adm1.shx  TUN_adm2.sbx  TUN_readme.txt
> $ ogr2ogr -f "ESRI Shapefile" TUN TUN_adm0.shp -nln TUN
> $ ls TUN*
> TUN_adm0.dbf  TUN_adm0.shp  TUN_adm1.sbn  TUN_adm2.dbf  TUN_adm2.shp
> TUN_adm0.prj  TUN_adm0.shx  TUN_adm1.sbx  TUN_adm2.prj  TUN_adm2.shx
> TUN_adm0.sbn  TUN_adm1.dbf  TUN_adm1.shp  TUN_adm2.sbn  TUN_adm.zip
> TUN_adm0.sbx  TUN_adm1.prj  TUN_adm1.shx  TUN_adm2.sbx  TUN_readme.txt
> 
> TUN:
> TUN.dbf  TUN.prj  TUN.shp  TUN.shx
> 
> where:
> 
> ogr2ogr -f "ESRI Shapefile" TUN TUN_adm0.shp -nln TUN
> 
> creates a new DSN (TUN), and populates it with files. But in 1.8.0 (SVN
> 21235):
> 
> $ rm -rf TUN TUN.*
> # swap GDAL versions
> $ ogr2ogr --version
> GDAL 1.8dev, released 2010/01/19
> $ ogr2ogr --version
> GDAL 1.8dev, released 2010/01/19
> [rsb@reclus2 bigshape]$ ogr2ogr -f "ESRI Shapefile" TUN TUN_adm0.shp -nln
> TUN
> [rsb@reclus2 bigshape]$ ls TUN*
> TUN_adm0.dbf  TUN_adm0.shx  TUN_adm1.shp  TUN_adm2.sbx  TUN.prj
> TUN_adm0.prj  TUN_adm1.dbf  TUN_adm1.shx  TUN_adm2.shp  TUN_readme.txt
> TUN_adm0.sbn  TUN_adm1.prj  TUN_adm2.dbf  TUN_adm2.shx  TUN.shp
> TUN_adm0.sbx  TUN_adm1.sbn  TUN_adm2.prj  TUN_adm.zip   TUN.shx
> TUN_adm0.shp  TUN_adm1.sbx  TUN_adm2.sbn  TUN.dbf
> 
> TUN:
> 
> it creates the new DSN directory, but does not put the files inside it,
> but rather in the working directory. If the new DSN and layer have
> different names:
> 
> $ rm -rf TUN TUN.*
> $ ls TUN*
> $ ogr2ogr -f "ESRI Shapefile" TUN TUN_adm0.shp -nln TUN0
> $ ls TUN*
> 
> it works. This also affects the R OGR interface, but it can be reproduced
> with ogr2ogr, so it is inside OGR somewhere. Is the change intended?
> 
> With a different driver, it also works, so maybe it is in shape:
> 
> $ rm -rf TUN TUN.*
> $ ogr2ogr -f "Mapinfo File" TUN TUN_adm0.shp -nln TUN
> $ ls TUN*
> TUN_adm0.dbf  TUN_adm0.shp  TUN_adm1.sbn  TUN_adm2.dbf  TUN_adm2.shp
> TUN_adm0.prj  TUN_adm0.shx  TUN_adm1.sbx  TUN_adm2.prj  TUN_adm2.shx
> TUN_adm0.sbn  TUN_adm1.dbf  TUN_adm1.shp  TUN_adm2.sbn  TUN_adm.zip
> TUN_adm0.sbx  TUN_adm1.prj  TUN_adm1.shx  TUN_adm2.sbx  TUN_readme.txt
> 
> TUN:
> TUN.dat  TUN.id  TUN.map  TUN.tab
> 
> as expected. Have the changes "to improve the user Shapefile experience"
> got overenthusiastic, maybe? This breaks existing behaviour, so needs
> justification if sustained. It looks like line 509 in
> 
> trunk/gdal/ogr/ogrsf_frmts/shape/ogrshapedatasource.cpp
> 
> with:
> 
> EQUAL(CPLGetBasename(pszName), pszLayerName))
> 
> being the smoking gun change? The DSN is TUN, not TUN.shp, but is being
> mistaken for TUN.shp, isn't it?
> 
> Best wishes,
> 
> Roger
From Roger.Bivand at nhh.no  Tue Dec 14 15:53:23 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue Dec 14 15:52:31 2010
Subject: [gdal-dev] Odd 1.7.3 <> 1.8.0 trunk OGR difference (shapefile
	driver?)
In-Reply-To: <201012142127.11684.even.rouault@mines-paris.org>
References: <alpine.LRH.2.00.1012141912460.30157@reclus.nhh.no>
	<201012142127.11684.even.rouault@mines-paris.org>
Message-ID: <alpine.LRH.2.00.1012142146180.30157@reclus.nhh.no>

On Tue, 14 Dec 2010, Even Rouault wrote:

> Roger,
>
> thanks for your report and the precise spotting of the problem.
>
> The regression of behaviour you saw was not intended at all. It is now fixed in
> SVN (r21257) and I've added new test cases in the test suite r21258 to match
> that use case.

Even,

Thanks, that is great! Checked here, both with ogr2ogr and within the 
rgdal for the R interface.

Agus, you can regain the functionality by anonymous checkout of GDAL and 
installing from source - the odd "jumping the gun" binary you have should 
probably be abandoned.

Best wishes,

Roger

>
> Best regards,
>
> Even
>
> Le mardi 14 d?cembre 2010 19:41:42, Roger Bivand a ?crit :
>> Hi,
>>
>> Agus Lobo has drawn my attention to an oddity (here using GADM Tunisia
>> shapefiles) introduced between 1.7.3 and current(ish) trunk:
>>
>> $ ogr2ogr --version
>> GDAL 1.7.3, released 2010/11/10
>> $ ls TUN*
>> TUN_adm0.dbf  TUN_adm0.shp  TUN_adm1.sbn  TUN_adm2.dbf  TUN_adm2.shp
>> TUN_adm0.prj  TUN_adm0.shx  TUN_adm1.sbx  TUN_adm2.prj  TUN_adm2.shx
>> TUN_adm0.sbn  TUN_adm1.dbf  TUN_adm1.shp  TUN_adm2.sbn  TUN_adm.zip
>> TUN_adm0.sbx  TUN_adm1.prj  TUN_adm1.shx  TUN_adm2.sbx  TUN_readme.txt
>> $ ogr2ogr -f "ESRI Shapefile" TUN TUN_adm0.shp -nln TUN
>> $ ls TUN*
>> TUN_adm0.dbf  TUN_adm0.shp  TUN_adm1.sbn  TUN_adm2.dbf  TUN_adm2.shp
>> TUN_adm0.prj  TUN_adm0.shx  TUN_adm1.sbx  TUN_adm2.prj  TUN_adm2.shx
>> TUN_adm0.sbn  TUN_adm1.dbf  TUN_adm1.shp  TUN_adm2.sbn  TUN_adm.zip
>> TUN_adm0.sbx  TUN_adm1.prj  TUN_adm1.shx  TUN_adm2.sbx  TUN_readme.txt
>>
>> TUN:
>> TUN.dbf  TUN.prj  TUN.shp  TUN.shx
>>
>> where:
>>
>> ogr2ogr -f "ESRI Shapefile" TUN TUN_adm0.shp -nln TUN
>>
>> creates a new DSN (TUN), and populates it with files. But in 1.8.0 (SVN
>> 21235):
>>
>> $ rm -rf TUN TUN.*
>> # swap GDAL versions
>> $ ogr2ogr --version
>> GDAL 1.8dev, released 2010/01/19
>> $ ogr2ogr --version
>> GDAL 1.8dev, released 2010/01/19
>> [rsb@reclus2 bigshape]$ ogr2ogr -f "ESRI Shapefile" TUN TUN_adm0.shp -nln
>> TUN
>> [rsb@reclus2 bigshape]$ ls TUN*
>> TUN_adm0.dbf  TUN_adm0.shx  TUN_adm1.shp  TUN_adm2.sbx  TUN.prj
>> TUN_adm0.prj  TUN_adm1.dbf  TUN_adm1.shx  TUN_adm2.shp  TUN_readme.txt
>> TUN_adm0.sbn  TUN_adm1.prj  TUN_adm2.dbf  TUN_adm2.shx  TUN.shp
>> TUN_adm0.sbx  TUN_adm1.sbn  TUN_adm2.prj  TUN_adm.zip   TUN.shx
>> TUN_adm0.shp  TUN_adm1.sbx  TUN_adm2.sbn  TUN.dbf
>>
>> TUN:
>>
>> it creates the new DSN directory, but does not put the files inside it,
>> but rather in the working directory. If the new DSN and layer have
>> different names:
>>
>> $ rm -rf TUN TUN.*
>> $ ls TUN*
>> $ ogr2ogr -f "ESRI Shapefile" TUN TUN_adm0.shp -nln TUN0
>> $ ls TUN*
>>
>> it works. This also affects the R OGR interface, but it can be reproduced
>> with ogr2ogr, so it is inside OGR somewhere. Is the change intended?
>>
>> With a different driver, it also works, so maybe it is in shape:
>>
>> $ rm -rf TUN TUN.*
>> $ ogr2ogr -f "Mapinfo File" TUN TUN_adm0.shp -nln TUN
>> $ ls TUN*
>> TUN_adm0.dbf  TUN_adm0.shp  TUN_adm1.sbn  TUN_adm2.dbf  TUN_adm2.shp
>> TUN_adm0.prj  TUN_adm0.shx  TUN_adm1.sbx  TUN_adm2.prj  TUN_adm2.shx
>> TUN_adm0.sbn  TUN_adm1.dbf  TUN_adm1.shp  TUN_adm2.sbn  TUN_adm.zip
>> TUN_adm0.sbx  TUN_adm1.prj  TUN_adm1.shx  TUN_adm2.sbx  TUN_readme.txt
>>
>> TUN:
>> TUN.dat  TUN.id  TUN.map  TUN.tab
>>
>> as expected. Have the changes "to improve the user Shapefile experience"
>> got overenthusiastic, maybe? This breaks existing behaviour, so needs
>> justification if sustained. It looks like line 509 in
>>
>> trunk/gdal/ogr/ogrsf_frmts/shape/ogrshapedatasource.cpp
>>
>> with:
>>
>> EQUAL(CPLGetBasename(pszName), pszLayerName))
>>
>> being the smoking gun change? The DSN is TUN, not TUN.shp, but is being
>> mistaken for TUN.shp, isn't it?
>>
>> Best wishes,
>>
>> Roger
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no
From ricardo.garcia.silva at gmail.com  Tue Dec 14 16:32:12 2010
From: ricardo.garcia.silva at gmail.com (Ricardo Filipe Soares Garcia da)
Date: Tue Dec 14 16:32:36 2010
Subject: [gdal-dev] question about ReadAsArray
In-Reply-To: <AANLkTinCR=RMJYYP45on00Px1z_nXm0zj2rVxsbsCWi5@mail.gmail.com>
References: <4D069F56.7020400@nmsu.edu>
	<AANLkTinCR=RMJYYP45on00Px1z_nXm0zj2rVxsbsCWi5@mail.gmail.com>
Message-ID: <AANLkTinQE7t8K6=TvBcT95u6DW3x53hKc8eDnqiJ4__F@mail.gmail.com>

Hi all

well, the ReadAsArray function will return a numpy array of dimension 2.
In numpy the array.size() function will return (number_of_lines,
number_of_columns).
The number of lines in the array is the same as the YSize of the
raster in GDAL, and the number of columns is the same as the XSize of
the raster, so it means you are getting the expected result.

;)

2010/12/14 Jorge Ar?valo <jorge.arevalo@deimos-space.com>:
> Hi,
>
> On Mon, Dec 13, 2010 at 11:33 PM, Matt Funk <mafunk@nmsu.edu> wrote:
>> Hi,
>>
>> i am a bit new to the gdal library. I am trying to process some geotiff
>> files in python.
>>
>> 1) I am making a call to the ReadAsArray data as such:
>> ...
>> band = ds.GetRasterBand(1)
>> array = band.ReadAsArray(0,0,band.XSize,band.YSize)
>> print array.shape
>> ...
>> which returns: (7191, 8331)
>> Now, what i don't understand is that when i do:
>> ...
>> print 'Size is ',ds.RasterXSize,'x',ds.RasterYSize, 'x',ds.RasterCount
>> ...
>> i get: Size is ?8331 x 7191 x 1
>>
>> So does that mean that ReadAsArray returns the an array that has its
>> dimensions flipped?
>>
>
> If I'm not wrong (I'm looking at the code), yes, the Y coord is put
> before the X coord.
>
>
>>
>> 2) Where can i find the documentation for the ReadAsArray fcn?
>>
>
> You can find the function here
> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/osgeo/gdal.py,
> but the code which does the job is here
> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/osgeo/gdal_array.py,
> and rely on numpy
>
>>
>> thanks
>> matt
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> Best regards,
>
> --
> Jorge Ar?valo
> Internet & Mobilty Division, DEIMOS
> jorge.arevalo@deimos-space.com
> http://mobility.grupodeimos.com/
> http://gis4free.wordpress.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
___________________________ ___ __
Ricardo Garcia Silva
From Gary.Smart at Goodrich.com  Wed Dec 15 06:52:06 2010
From: Gary.Smart at Goodrich.com (Smart, Gary)
Date: Wed Dec 15 07:07:12 2010
Subject: [gdal-dev] NITF 16bit pixel scaling using NBITS/ABPP
Message-ID: <F52876411F027A4FA646577165F65C16DCE6E6@NHC2EX13.goodrich.root.local>

We are reading NITF images which occupy the lower 12bits of a 16bit
datatype.  These images clearly have ABPP=12 and NBPP=16 set in the
header.  However, when I use GetMetadataItem("NBITS"), the string
returned is always 'null'.  I have also tried GetMetadataItem("ABPP") -
which also returns 'null'.

 

Does anyone know how to access this information in the NITF header.  Are
there any recorded problems regarding this?

I am using GDAL version 1.7.1 on SLES10 linux.

 

Gary

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101215/a872916e/attachment.html
From Gary.Smart at goodrich.com  Wed Dec 15 06:58:15 2010
From: Gary.Smart at goodrich.com (Smart, Gary)
Date: Wed Dec 15 07:13:24 2010
Subject: [gdal-dev] Black lines across images using GDAL 1.7.2 and above
Message-ID: <F52876411F027A4FA646577165F65C16DCE6EC@NHC2EX13.goodrich.root.local>

I recently updated our GDAL source to version 1.7.3 from 1.7.1 and
suddenly we appear to have lots of black lines across any imagery read
using the GDAL (e.g. NITF files, WMS geotiffs).  Wondering if it was a
1.7.3 issue, I switched to 1.7.2 which showed exactly the same problem.
Moving back to 1.7.1 clears it.  It looks very much like memory
corruption and seems to particularly affect the lower half of displayed
images.

 

Has anyone else witnessed such corruption?  We need to keep our systems
up to date with the latest GDAL but cannot move forward with this
problem in the build.

 

We are using GDAL on SLES10.2 Linux.

 

 

Gary

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101215/216d7f37/attachment.html
From viji at fedoraproject.org  Wed Dec 15 07:30:18 2010
From: viji at fedoraproject.org (Viji V Nair)
Date: Wed Dec 15 07:30:41 2010
Subject: [gdal-dev] Re: [El] Re: imageio-ext and gdal
In-Reply-To: <AANLkTi=hCyYwb8_1L6zys8trjisWE-h8eA22hbdNxJM5@mail.gmail.com>
References: <AANLkTikBYxgJuWa36tzLae9qg7WbJ+k9f-hP_av8=EMT@mail.gmail.com>
	<201012092025.27602.even.rouault@mines-paris.org>
	<AANLkTinAoVSnuyWm2kvxi-_eUbUQhYN_xTn_wv3bbEhu@mail.gmail.com>
	<AANLkTin_3ndwB1dgZotgo+VKM479pK72H4E6Y1yc=k4g@mail.gmail.com>
	<1292316614.5218.253.camel@localhost.localdomain>
	<AANLkTingCev-M2A_mGKtasPpmCcdfMjL9_GvE1Deh--w@mail.gmail.com>
	<1292323699.5218.267.camel@localhost.localdomain>
	<AANLkTi=hCyYwb8_1L6zys8trjisWE-h8eA22hbdNxJM5@mail.gmail.com>
Message-ID: <AANLkTikwY4N=urw3eVCHY=3MHqOsMQ806csZN2f0iGXN@mail.gmail.com>

Hi Ralf

What is the conclusion:

1. Are we going ahead with image-io 1.1 and GDAL 1.7.3 OR image-io
1.0.8 and GDAL 1.7.3
2. What about ELGIS 5?

Thanks
Viji

On Tue, Dec 14, 2010 at 4:25 PM, Mathieu Baudier <mbaudier@argeo.org> wrote:
>> # these tests still fail in EL5 environments
>> rm
>> plugin/gdal/gdalgeotiff/src/test/java/it/geosolutions/imageio/plugins/geotiff/GeoTiffTest.java
>
> eh, eh, even easier!
>
>> (Tested, i.e. built in mock)
>
> Please tell me when you are ready to provide an elgis-plus mock config
> file with the JPP 6 repo + an imageio-ext spec file.
> I'm eager to start testing and would also like to start syncing this
> repo on the build servers.
> _______________________________________________
> el mailing list
> el@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/el
>
From oyvind.idland at gmail.com  Wed Dec 15 07:59:55 2010
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Wed Dec 15 07:59:59 2010
Subject: [gdal-dev] libecwj2 ?
In-Reply-To: <20101214145321.1667.qmail@s466.sureserver.com>
References: <20101214145321.1667.qmail@s466.sureserver.com>
Message-ID: <AANLkTimagTXAgAHSUKLkvn+9qorDKo+RQf1-ZUHPdy_w@mail.gmail.com>

Thanks Ivan,

I forgot to mention that I use GDAL 1.7.3.

It seems to me that the ECW api has changed quite a bit, as 1.7.3 doesn't
compile against it ?
For instance, I get

ecwcreatecopy.cpp(896) : error C2039: 'SetKeySize' : is not a member of
'NCS::CView'

In addition, the NCSJPC_EXPORT_ALL macro is being used, and this one does no
longer
exist in the new SDK.


-- Oyvind




On Tue, Dec 14, 2010 at 3:53 PM, Ivan Lucena <ivan.lucena@pmldnet.com>wrote:

> ?yvind,
>
> There is a new SDK that you can download from Erdas website:
>
> http://www.erdas.com/products/ERDASECWJPEG2000SDK/Downloads.aspx
>
> But there are a few changes you would need to do in order to compile the
> GDAL/ECW driver because the path and library names has changed.
>
> Regards,
>
> Ivan
>
> >  -------Original Message-------
> >  From: Oyvind Idland <oyvind.idland@gmail.com>
> >  To: gdal-dev@lists.osgeo.org
> >  Subject: [gdal-dev] libecwj2 ?
> >  Sent: Dec 14 '10 07:09
> >
> >  Hello,
> >
> >  i am compiling GDAL from source, and need the ECW as plugin.
> >
> >  The package is mentioned on the site, libecwj2-3.3-2006-09-06.zip, is
> this
> >  a package
> >  from ERDAS ? I tried to find some info about it on their site, but found
> >  nothing..
> >
> >  I found a couple of other download links, so I can at least get started.
> >
> >
> >  -- ?yvind
> >
> >  --------------------
> >  _______________________________________________
> >  gdal-dev mailing list
> >  [LINK: compose.php?to=gdal-dev@lists.osgeo.org]
> gdal-dev@lists.osgeo.org
> >  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
> >  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101215/ae43af9e/attachment.html
From christian.mueller at nvoe.at  Wed Dec 15 09:15:43 2010
From: christian.mueller at nvoe.at (christian.mueller@nvoe.at)
Date: Wed Dec 15 09:15:59 2010
Subject: [gdal-dev] Performance improvement for gdal_retile
In-Reply-To: <4CDC3C1F.6050000@pobox.com>
References: <4CDC3C1F.6050000@pobox.com>
Message-ID: <20101215151543.d2stglh8g0oww8cc@webmail.nvoe.at>

Hi, I am the maintainer of gdal_retile.py.  A user and me developed an  
essential performance improvement for large images.

What is the best way to get the python file and the dox file into  
trunk and into the 1.7 branch.

I have an OSGeo Account, but no svn commit access, so I could open a  
ticket for version 1.7.4.

Should I attach these two files or should I make an svn checkout for  
trunk and 1.7 and attach patch files.

Cheers
Christian

----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From ivan.lucena at pmldnet.com  Wed Dec 15 09:19:27 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Wed Dec 15 09:19:29 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gbGliZWN3ajIgPw==?=
Message-ID: <20101215141927.15348.qmail@s466.sureserver.com>

Oyvind,

I tried adding those defines on ecw/makefile.vc and it did worked but I don't know if that is the right thing do to:

-        /DLIBECWJ2 /DWIN32 /D_WINDLL -DFRMT_ecw -DNO_X86_MMI
+        /DLIBECWJ2 /DWIN32 /D_WINDLL -DFRMT_ecw -DNO_X86_MMI -DECWSDK_VERSION=41 -DNO_COMPRESS

And, of course, I changed the setting on nmake.opt:

-#ECW_PLUGIN = NO
-#ECWDIR  =     C:\warmerda\libecwj2-3.3
-#ECWLIB  =     $(ECWDIR)\Source\NCSBuildQmake\Debug\libecwj2.lib
+ECW_PLUGIN = YES
+ECWDIR  =     "C:\Program Files\ERDAS\ERDAS ECW JPEG2000 Read SDK"
+ECWLIB  =     $(ECWDIR)\lib\vc90\win32\NCScnet4.lib \
+            $(ECWDIR)\lib\vc90\win32\NCSEcw4_RO.lib \
+            $(ECWDIR)\lib\vc90\win32\NCSUtil4.lib

That worked on 1.8dev and 1.7.3 as well but I guess we would need an expert opnion on that.
 
C:\>gdalinfo --format ecw
Format Details:
  Short Name: ECW
  Long Name: ERMapper Compressed Wavelets
  Extension: ecw
  Help Topic: frmt_ecw.html

C:\>gdalinfo --version
GDAL 1.7.3, released 2010/11/10

Regards,

Ivan


>  -------Original Message-------
>  From: Oyvind Idland <oyvind.idland@gmail.com>
>  To: Ivan Lucena <ivan.lucena@pmldnet.com>
>  Cc: gdal-dev@lists.osgeo.org
>  Subject: Re: [gdal-dev] libecwj2 ?
>  Sent: Dec 15 '10 07:59
>  
>  Thanks Ivan,
>  
>  I forgot to mention that I use GDAL 1.7.3.
>  
>  It seems to me that the ECW api has changed quite a bit, as 1.7.3
>  doesn't compile against it ?
>  For instance, I get
>  
>  ecwcreatecopy.cpp(896) : error C2039: 'SetKeySize' : is not a
>  member of 'NCS::CView'
>  
>  In addition, the NCSJPC_EXPORT_ALL macro is being used, and this one does
>  no longer
>  exist in the new SDK.
>  
>  
>  -- Oyvind
>  
>  
>  On Tue, Dec 14, 2010 at 3:53 PM, Ivan Lucena <[LINK:
>  mailto:ivan.lucena@pmldnet.com] ivan.lucena@pmldnet.com> wrote:
>  yvind,
>  
>  There is a new SDK that you can download from Erdas website:
>  
>  [LINK: http://www.erdas.com/products/ERDASECWJPEG2000SDK/Downloads.aspx]
>  http://www.erdas.com/products/ERDASECWJPEG2000SDK/Downloads.aspx
>  
>  But there are a few changes you would need to do in order to compile the
>  GDAL/ECW driver because the path and library names has changed.
>  
>  Regards,
>  
>  Ivan
>  
>  
>  > ?-------Original Message-------
>  > ?From: Oyvind Idland <[LINK: mailto:oyvind.idland@gmail.com]
>  oyvind.idland@gmail.com>
>  > ?To: [LINK: mailto:gdal-dev@lists.osgeo.org] gdal-dev@lists.osgeo.org
>  > ?Subject: [gdal-dev] libecwj2 ?
>  > ?Sent: Dec 14 '10 07:09
>  >
>  > ?Hello,
>  >
>  > ?i am compiling GDAL from source, and need the ECW as plugin.
>  >
>  > ?The package is mentioned on the site, libecwj2-3.3-2006-09-06.zip, is
>  this
>  > ?a package
>  > ?from ERDAS ? I tried to find some info about it on their site, but
>  found
>  > ?nothing..
>  >
>  > ?I found a couple of other download links, so I can at least get
>  started.
>  >
>  >
>  > ?-- yvind
>  >
>  > ?--------------------
>  > ?_______________________________________________
>  > ?gdal-dev mailing list
>  > ?[LINK: compose.php?to=[LINK: mailto:gdal-dev@lists.osgeo.org]
>  gdal-dev@lists.osgeo.org] [LINK: mailto:gdal-dev@lists.osgeo.org]
>  gdal-dev@lists.osgeo.org
>  > ?[LINK: [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  > ?[LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
From brfr at metrico.lu  Wed Dec 15 10:11:29 2010
From: brfr at metrico.lu (Frank Broniewski)
Date: Wed Dec 15 10:11:14 2010
Subject: [gdal-dev] Internal Metadata Management
In-Reply-To: <4D072D6F.5060007@gmail.com>
References: <4D071DD6.8080200@metrico.lu> <4D072D6F.5060007@gmail.com>
Message-ID: <4D08DAA1.4070303@metrico.lu>


Hello Ari,

yes that is definitely helpful. But I still wonder if it might be 
easier/quicker to use GeoJSON as a interchange format and tranform from 
geojson to other formats than using OGRs internal structure. I already 
have some convenience classes for creating GeoJSON structures in Python. 
I know there is already a geojson python module [1], but onfortunately 
it doesn't deal with projections afaik.

Frank

[1] http://trac.gispython.org/lab/wiki/GeoJSON

Am 14.12.2010 09:40, schrieb Ari Jolma:
> Frank,
>
> A FeatureDefn is typically shared by all features in a layer and you
> need one to create a feature object. Feature class has SetField and
> GetField methods for storing and retrieving the attributes of a feature.
>
> I hope this helps,
>
> Ari
>
> On 12/14/2010 09:33 AM, Frank Broniewski wrote:
>> Hello,
>>
>> I have a question concerning OGR's metadata or attribute management
>> when converting between geodata vector formats. My question is maybe
>> only loosely related to OGR and aims at the internal management of
>> attribute data.
>>
>> From what I have read and understood from the documentation, OGR uses
>> the OGC Simple Feature Specifiaction to transform data from one format
>> to another. While reading the OGC specs I could not find a notion on
>> how one should deal with attribute metadata, the whole spec seems to
>> be about vector geometries only.
>>
>> Why I ask this: I am a Python user using the ogr python bindings and
>> now the need arose that I need to write a flexible geo format exchange
>> software. I chose OGR as a base for doing the conversion. My data
>> often comes from databases with non standard data and geoemtry
>> formats. So I want to align with OGR's internal used Simple Feature
>> Data format, but I don't know how/where I should put the attributes /
>> metadata. I see that the Feature is the part I have to look at because
>> it has the geometry and the FeatureDfn. Unfortunately this is the part
>> I don't understand :-)
>> I need to create a FeatureDfn for my Feature which is basically the
>> column names and data types? Where do I put my attribute values then?
>> I looked at the OGRFeatureDefn Class Reference, but my understanding
>> of OGR is too low to understand how this relates to the OGRFeature.
>>
>> So basically I am looking for a starter tip that pushes me into the
>> right direction. Is there some python tutorial somewhere which I
>> missed or somebody has a code snippet for me?
>>
>> Or would it be easier to use internally a format like geojson and use
>> this as a starter for converting to other formats? Can OGR always
>> transfer the attributes of my geospatial data to other formats?
>>
>> I am sorry that my question is somewhat unclear, but I have some
>> difficulties to find the right form for my question. But I hope that I
>> could state my problem in an understandable way :-)
>>
>> Many thanks for any tipps
>>
>> Frank
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From warmerdam at pobox.com  Wed Dec 15 10:21:25 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Dec 15 10:21:23 2010
Subject: [gdal-dev] Re: Performance improvement for gdal_retile
In-Reply-To: <20101215151543.d2stglh8g0oww8cc@webmail.nvoe.at>
References: <4CDC3C1F.6050000@pobox.com>
	<20101215151543.d2stglh8g0oww8cc@webmail.nvoe.at>
Message-ID: <4D08DCF5.2030800@pobox.com>

On 10-12-15 09:15 AM, christian.mueller@nvoe.at wrote:
> Hi, I am the maintainer of gdal_retile.py. A user and me developed an essential
> performance improvement for large images.
>
> What is the best way to get the python file and the dox file into trunk and
> into the 1.7 branch.
>
> I have an OSGeo Account, but no svn commit access, so I could open a ticket for
> version 1.7.4.
>
> Should I attach these two files or should I make an svn checkout for trunk and
> 1.7 and attach patch files.

Christian,

Yes, filing a ticket is the right step.  Patches are preferred to whole files,
but whole files are ok as long as you ensure you are starting from what is
in SVN (trunk and 1.7 branch) now to avoid integration issues on our side.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From oyvind.idland at gmail.com  Wed Dec 15 10:21:48 2010
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Wed Dec 15 10:21:50 2010
Subject: [gdal-dev] libecwj2 ?
In-Reply-To: <20101215141927.15348.qmail@s466.sureserver.com>
References: <20101215141927.15348.qmail@s466.sureserver.com>
Message-ID: <AANLkTi=vxccoKh5gfTbbyAmy94FAezeDe65Dfv-9+ASg@mail.gmail.com>

Thanks !

I did allmost exactly the same as you, but didn't include -DNO_COMPRESS.

It compiles fine now. However, seems like it can't load gdal_ECW_JP2ECW.dll
anymore.

I now compile GDAL as a static lib, with ECW as a plugin. Could this result
in GDAL not loading dynamic plugins ?


-- Oyvind


On Wed, Dec 15, 2010 at 3:19 PM, Ivan Lucena <ivan.lucena@pmldnet.com>wrote:

> Oyvind,
>
> I tried adding those defines on ecw/makefile.vc and it did worked but I
> don't know if that is the right thing do to:
>
> -        /DLIBECWJ2 /DWIN32 /D_WINDLL -DFRMT_ecw -DNO_X86_MMI
> +        /DLIBECWJ2 /DWIN32 /D_WINDLL -DFRMT_ecw -DNO_X86_MMI
> -DECWSDK_VERSION=41 -DNO_COMPRESS
>
> And, of course, I changed the setting on nmake.opt:
>
> -#ECW_PLUGIN = NO
> -#ECWDIR  =     C:\warmerda\libecwj2-3.3
> -#ECWLIB  =     $(ECWDIR)\Source\NCSBuildQmake\Debug\libecwj2.lib
> +ECW_PLUGIN = YES
> +ECWDIR  =     "C:\Program Files\ERDAS\ERDAS ECW JPEG2000 Read SDK"
> +ECWLIB  =     $(ECWDIR)\lib\vc90\win32\NCScnet4.lib \
> +            $(ECWDIR)\lib\vc90\win32\NCSEcw4_RO.lib \
> +            $(ECWDIR)\lib\vc90\win32\NCSUtil4.lib
>
> That worked on 1.8dev and 1.7.3 as well but I guess we would need an expert
> opnion on that.
>
> C:\>gdalinfo --format ecw
> Format Details:
>  Short Name: ECW
>  Long Name: ERMapper Compressed Wavelets
>  Extension: ecw
>  Help Topic: frmt_ecw.html
>
> C:\>gdalinfo --version
> GDAL 1.7.3, released 2010/11/10
>
> Regards,
>
> Ivan
>
>
> >  -------Original Message-------
> >  From: Oyvind Idland <oyvind.idland@gmail.com>
> >  To: Ivan Lucena <ivan.lucena@pmldnet.com>
> >  Cc: gdal-dev@lists.osgeo.org
> >  Subject: Re: [gdal-dev] libecwj2 ?
> >  Sent: Dec 15 '10 07:59
> >
> >  Thanks Ivan,
> >
> >  I forgot to mention that I use GDAL 1.7.3.
> >
> >  It seems to me that the ECW api has changed quite a bit, as 1.7.3
> >  doesn't compile against it ?
> >  For instance, I get
> >
> >  ecwcreatecopy.cpp(896) : error C2039: 'SetKeySize' : is not a
> >  member of 'NCS::CView'
> >
> >  In addition, the NCSJPC_EXPORT_ALL macro is being used, and this one
> does
> >  no longer
> >  exist in the new SDK.
> >
> >
> >  -- Oyvind
> >
> >
> >  On Tue, Dec 14, 2010 at 3:53 PM, Ivan Lucena <[LINK:
> >  mailto:ivan.lucena@pmldnet.com] ivan.lucena@pmldnet.com> wrote:
> >  yvind,
> >
> >  There is a new SDK that you can download from Erdas website:
> >
> >  [LINK: http://www.erdas.com/products/ERDASECWJPEG2000SDK/Downloads.aspx
> ]
> >  http://www.erdas.com/products/ERDASECWJPEG2000SDK/Downloads.aspx
> >
> >  But there are a few changes you would need to do in order to compile the
> >  GDAL/ECW driver because the path and library names has changed.
> >
> >  Regards,
> >
> >  Ivan
> >
> >
> >  >  -------Original Message-------
> >  >  From: Oyvind Idland <[LINK: mailto:oyvind.idland@gmail.com]
> >  oyvind.idland@gmail.com>
> >  >  To: [LINK: mailto:gdal-dev@lists.osgeo.org] gdal-dev@lists.osgeo.org
> >  >  Subject: [gdal-dev] libecwj2 ?
> >  >  Sent: Dec 14 '10 07:09
> >  >
> >  >  Hello,
> >  >
> >  >  i am compiling GDAL from source, and need the ECW as plugin.
> >  >
> >  >  The package is mentioned on the site, libecwj2-3.3-2006-09-06.zip, is
> >  this
> >  >  a package
> >  >  from ERDAS ? I tried to find some info about it on their site, but
> >  found
> >  >  nothing..
> >  >
> >  >  I found a couple of other download links, so I can at least get
> >  started.
> >  >
> >  >
> >  >  -- yvind
> >  >
> >  >  --------------------
> >  >  _______________________________________________
> >  >  gdal-dev mailing list
> >  >  [LINK: compose.php?to=[LINK: mailto:gdal-dev@lists.osgeo.org]
> >  gdal-dev@lists.osgeo.org] [LINK: mailto:gdal-dev@lists.osgeo.org]
> >  gdal-dev@lists.osgeo.org
> >  >  [LINK: [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
> >  http://lists.osgeo.org/mailman/listinfo/gdal-dev]
> >  >  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
> >  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101215/d3f19511/attachment.html
From ari.jolma at gmail.com  Wed Dec 15 10:30:56 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Dec 15 10:31:01 2010
Subject: [gdal-dev] Internal Metadata Management
In-Reply-To: <4D08DAA1.4070303@metrico.lu>
References: <4D071DD6.8080200@metrico.lu> <4D072D6F.5060007@gmail.com>
	<4D08DAA1.4070303@metrico.lu>
Message-ID: <4D08DF30.9060103@gmail.com>

On 12/15/2010 05:11 PM, Frank Broniewski wrote:
>
> Hello Ari,
>
> yes that is definitely helpful. But I still wonder if it might be 
> easier/quicker to use GeoJSON as a interchange format and tranform 
> from geojson to other formats than using OGRs internal structure. I 
> already have some convenience classes for creating GeoJSON structures 
> in Python. I know there is already a geojson python module [1], but 
> onfortunately it doesn't deal with projections afaik.

GDAL has support for GeoJSON too. And it seems to support projections.

http://www.gdal.org/ogr/drv_geojson.html

It all depends on what is the final destination of your data. If it's a 
database (PostGIS), which is a sensible choice, I would probably myself 
write a small ad-hoc program to create the SQL to store the data.

Ari

>
> Frank
>
> [1] http://trac.gispython.org/lab/wiki/GeoJSON
>
> Am 14.12.2010 09:40, schrieb Ari Jolma:
>> Frank,
>>
>> A FeatureDefn is typically shared by all features in a layer and you
>> need one to create a feature object. Feature class has SetField and
>> GetField methods for storing and retrieving the attributes of a feature.
>>
>> I hope this helps,
>>
>> Ari
>>
>> On 12/14/2010 09:33 AM, Frank Broniewski wrote:
>>> Hello,
>>>
>>> I have a question concerning OGR's metadata or attribute management
>>> when converting between geodata vector formats. My question is maybe
>>> only loosely related to OGR and aims at the internal management of
>>> attribute data.
>>>
>>> From what I have read and understood from the documentation, OGR uses
>>> the OGC Simple Feature Specifiaction to transform data from one format
>>> to another. While reading the OGC specs I could not find a notion on
>>> how one should deal with attribute metadata, the whole spec seems to
>>> be about vector geometries only.
>>>
>>> Why I ask this: I am a Python user using the ogr python bindings and
>>> now the need arose that I need to write a flexible geo format exchange
>>> software. I chose OGR as a base for doing the conversion. My data
>>> often comes from databases with non standard data and geoemtry
>>> formats. So I want to align with OGR's internal used Simple Feature
>>> Data format, but I don't know how/where I should put the attributes /
>>> metadata. I see that the Feature is the part I have to look at because
>>> it has the geometry and the FeatureDfn. Unfortunately this is the part
>>> I don't understand :-)
>>> I need to create a FeatureDfn for my Feature which is basically the
>>> column names and data types? Where do I put my attribute values then?
>>> I looked at the OGRFeatureDefn Class Reference, but my understanding
>>> of OGR is too low to understand how this relates to the OGRFeature.
>>>
>>> So basically I am looking for a starter tip that pushes me into the
>>> right direction. Is there some python tutorial somewhere which I
>>> missed or somebody has a code snippet for me?
>>>
>>> Or would it be easier to use internally a format like geojson and use
>>> this as a starter for converting to other formats? Can OGR always
>>> transfer the attributes of my geospatial data to other formats?
>>>
>>> I am sorry that my question is somewhat unclear, but I have some
>>> difficulties to find the right form for my question. But I hope that I
>>> could state my problem in an understandable way :-)
>>>
>>> Many thanks for any tipps
>>>
>>> Frank
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From hobu.inc at gmail.com  Wed Dec 15 10:47:33 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Dec 15 10:47:38 2010
Subject: [gdal-dev] Internal Metadata Management
In-Reply-To: <4D08DF30.9060103@gmail.com>
References: <4D071DD6.8080200@metrico.lu> <4D072D6F.5060007@gmail.com>
	<4D08DAA1.4070303@metrico.lu> <4D08DF30.9060103@gmail.com>
Message-ID: <21E622A3-FC3E-48D6-B9D5-FCDFFBDF97CF@gmail.com>


On Dec 15, 2010, at 9:30 AM, Ari Jolma wrote:

> On 12/15/2010 05:11 PM, Frank Broniewski wrote:
>> 
>> Hello Ari,
>> 
>> yes that is definitely helpful. But I still wonder if it might be easier/quicker to use GeoJSON as a interchange format and tranform from geojson to other formats than using OGRs internal structure. I already have some convenience classes for creating GeoJSON structures in Python. I know there is already a geojson python module [1], but onfortunately it doesn't deal with projections afaik.
> 
> GDAL has support for GeoJSON too. And it seems to support projections.

GeoJSON explicitly supports projections, and OGR's implementation tries its best to deal with them.  GeoJSON's original intent is as a slightly-more-up-to-date, Javascript-consumable interchange format.  A better WKT, if you will.  With a light concept of features and feature collections.  It's a great way to interchange geometries and (sometimes) features between softwares of the Python world, the Javascript world, and the PostGIS world.

There are some gotchas with GeoJSON as far as features are concerned though.  A GeoJSON feature object is essentially free-standing, and an array of them need not have a common schema to describe the layout of all of the features in that array.  In practice, the features of an array typically have a common schema, but this requirement is not enforced in any way.  This property of GeoJSON can cause some leakage in that respect.

ESRI's JSON output is not GeoJSON, and AFAIK there is no interchange capability there.

Howard
From ben_deering at swissmail.org  Wed Dec 15 11:41:10 2010
From: ben_deering at swissmail.org (jeepingben)
Date: Wed Dec 15 11:41:11 2010
Subject: [gdal-dev] GDAL created HFA images unreadable in ERDAS ViewFinder
Message-ID: <1292431270308-5838122.post@n2.nabble.com>


I am working on converting a NITF to imagine format using GDAL 1.7.2.   I can
create files that are readble and seem to be correct in my program and
according to gdalinfo and hfatest, but they do not open in ViewFinder.  If I
dumb down the geotransform so that a mapinfo node is added to the output
image, it works in ViewFinder, but rotation information about the image is
lost.

Here is the relevant code:

<code>
    poDstDS = poDriver->Create( outputNameAndPath, nXSize, nYSize, nBands,
eType, 
                            papszOptions );

     // populate additional fields in the hfadataset
     double affine[6];
    OGRSpatialReference oSRS;

    
    affine[0] = image->ul_corner[1];
    affine[1] = (image->ur_corner[1] -  image->ul_corner[1]) /
image->image_cols ;
    affine[2] = (image->ll_corner[1] -  image->ul_corner[1]) /
image->image_rows ;
    affine[3] = image->ul_corner[0];
    affine[4] = ( image->ur_corner[0] - image->ul_corner[0]  ) /
image->image_cols ;
    affine[5] = ( image->ul_corner[0] - image->ll_corner[0] ) /
image->image_rows ;
    
    poDstDS->SetGeoTransform( affine );

    // from the spec:
    // This may be called on an empty OGRSpatialReference to make a
geographic coordinate system
    oSRS.SetWellKnownGeogCS( "WGS84" );

    char *pszSRS_WKT = NULL;
    int copyXsize = 0;
    int copyYsize = 0;
    oSRS.exportToWkt( &pszSRS_WKT );
    poDstDS->SetProjection( pszSRS_WKT );

...
   GDALClose( (GDALDatasetH) poDstDS );
</code>

If I replace affine[2] and affine[4] with 0.0 I get a readable file, but any
rotation information is lost so the transform is wrong.  If I leave them in,
my program (and the gdal programs) can open the image and the transform
seems to be correct, but the imagine viewer cannot open the file (it says
'Not enough projection info available').

This is what hfatest says about the image that doesnt load:
root(root) @ 27600905 + 0 @ 0

  IMGFormatInfo(ImgFormatInfo831) @ 27601033 + 4 @ 27601161
  + spaceUsedForRasterData = 27549696

  Layer_1(Eimg_Layer) @ 27601165 + 20 @ 27601293
  + width = 3587
  + height = 3716
  + layerType = athematic
  + pixelType = u16
  + blockWidth = 64
  + blockHeight = 64

    RasterDMS(Edms_State) @ 3802 + 47120 @ 3930
    + numvirtualblocks = 3363
    + numobjectsperblock = 4096
    + nextobjectnum = 13774848
    + compressionType = no compression
    + blockinfo[0] = 
    +     fileCode = 0
    +     offset = 51050
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[1] = 
    +     fileCode = 0
    +     offset = 59242
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[2] = 
    +     fileCode = 0
    +     offset = 67434
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[3] = 
    +     fileCode = 0
    +     offset = 75626
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[4] = 
    +     fileCode = 0
    +     offset = 83818
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[5] = 
    +     fileCode = 0
    +     offset = 92010
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[6] = 
    +     fileCode = 0
    +     offset = 100202
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[7] = 
    +     fileCode = 0
    +     offset = 108394
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[8] = 
    +     fileCode = 0
    +     offset = 116586
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[9] = 
    +     fileCode = 0
    +     offset = 124778
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[10] = 
    +     fileCode = 0
    +     offset = 132970
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[11] = 
    +     fileCode = 0
    +     offset = 141162
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[12] = 
    +     fileCode = 0
    +     offset = 149354
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[13] = 
    +     fileCode = 0
    +     offset = 157546
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[14] = 
    +     fileCode = 0
    +     offset = 165738
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[15] = 
    +     fileCode = 0
    +     offset = 173930
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    +  ... remaining instances omitted ...
    + freelist = (no values)
    + modTime = 0

    Ehfa_Layer(Ehfa_Layer) @ 27600746 + 6 @ 27600874
    + type = raster
    + dictionaryPtr = 27600880

    ProjectionX(Eprj_MapProjection842) @ 27601313 + 843 @ 27601441
    + projection = 
    +     type = 
    +         string = `PE_COORDSYS'
    +     MIFDictionary = 
    +         string =
`{0:pcstring,}Emif_String,{1:x{0:pcstring,}Emif_String,coordSys,}PE_COORDSYS,.'
    +     MIFObject = `?'
    + title = 
    +     string = `PE'

    MapInformation(Eimg_MapInformation) @ 27602284 + 40 @ 27602412
    + projection = 

    +     string = `Geographic (Lat/Lon)'
    + units = 
    +     string = `dd'

    MapToPixelXForm(Exfr_GenericXFormHeader) @ 27602452 + 23 @ 27602580
    + titleList = 
    +     string = `Affine'

      XForm0(Efga_Polynomial) @ 27602603 + 136 @ 27602731
      + order = 1
      + numdimtransform = 2
      + numdimpolynomial = 2
      + termcount = 3
      + exponentlist[0] = 0
      + exponentlist[1] = 0
      + exponentlist[2] = 1
      + exponentlist[3] = 0
      + exponentlist[4] = 0
      + exponentlist[5] = 1
      + BASEDATA(polycoefmtx): 2x2 of f64
      + polycoefmtx[0] =       + 21973.1640671877
      + polycoefmtx[1] =       + -519.496437926653
      + polycoefmtx[2] =       + -638.224682450435
      + polycoefmtx[3] =       + 27769.4459546298
      + BASEDATA(polycoefvector): 1x2 of f64
      + polycoefvector[0] =       + -2761223.74395772
      + polycoefvector[1] =       + -990232.403820546











    Projection(Eprj_ProParameters) @ 27602867 + 230 @ 27602995
    + proType = EPRJ_INTERNAL
    + proNumber = 0
    + proExeName = (no values)
    + proName = `Geographic (Lat/Lon)'
    + proZone = 0
    + proParams[0] = 0.000000
    + proParams[1] = 0.000000
    + proParams[2] = 0.000000
    + proParams[3] = 0.000000
    + proParams[4] = 0.000000
    + proParams[5] = 0.000000
    + proParams[6] = 0.000000
    + proParams[7] = 0.000000
    + proParams[8] = 0.000000
    + proParams[9] = 0.000000
    + proParams[10] = 0.000000
    + proParams[11] = 0.000000
    + proParams[12] = 0.000000
    + proParams[13] = 0.000000
    + proParams[14] = 0.000000
    + proSpheroid = 
    +     sphereName = `WGS 84'
    +     a = 6378137.000000
    +     b = 6356752.314245
    +     eSquared = 0.006694
    +     radius = 6378137.000000

      Datum(Eprj_Datum) @ 27603225 + 89 @ 27603353
      + datumname = `WGS 84'
      + type = EPRJ_DATUM_PARAMETRIC
      + params[0] = 0.000000
      + params[1] = 0.000000
      + params[2] = 0.000000
      + params[3] = 0.000000
      + params[4] = 0.000000
      + params[5] = 0.000000
      + params[6] = 0.000000
      + gridname = (no values)

=========================================================
And here is the one that works:

root(root) @ 27600905 + 0 @ 0

  IMGFormatInfo(ImgFormatInfo831) @ 27601033 + 4 @ 27601161
  + spaceUsedForRasterData = 27549696

  Layer_1(Eimg_Layer) @ 27601165 + 20 @ 27601293
  + width = 3587
  + height = 3716
  + layerType = athematic
  + pixelType = u16
  + blockWidth = 64
  + blockHeight = 64

    RasterDMS(Edms_State) @ 3802 + 47120 @ 3930
    + numvirtualblocks = 3363
    + numobjectsperblock = 4096
    + nextobjectnum = 13774848
    + compressionType = no compression
    + blockinfo[0] = 
    +     fileCode = 0
    +     offset = 51050
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[1] = 
    +     fileCode = 0
    +     offset = 59242
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[2] = 
    +     fileCode = 0
    +     offset = 67434
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[3] = 
    +     fileCode = 0
    +     offset = 75626
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[4] = 
    +     fileCode = 0
    +     offset = 83818
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[5] = 
    +     fileCode = 0
    +     offset = 92010
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[6] = 
    +     fileCode = 0
    +     offset = 100202
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[7] = 
    +     fileCode = 0
    +     offset = 108394
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[8] = 
    +     fileCode = 0
    +     offset = 116586
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[9] = 
    +     fileCode = 0
    +     offset = 124778
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[10] = 
    +     fileCode = 0
    +     offset = 132970
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[11] = 
    +     fileCode = 0
    +     offset = 141162
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[12] = 
    +     fileCode = 0
    +     offset = 149354
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[13] = 
    +     fileCode = 0
    +     offset = 157546
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[14] = 
    +     fileCode = 0
    +     offset = 165738
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    + blockinfo[15] = 
    +     fileCode = 0
    +     offset = 173930
    +     size = 8192
    +     logvalid = true
    +     compressionType = no compression
    +  ... remaining instances omitted ...
    + freelist = (no values)
    + modTime = 0

    Ehfa_Layer(Ehfa_Layer) @ 27600746 + 6 @ 27600874
    + type = raster
    + dictionaryPtr = 27600880

    ProjectionX(Eprj_MapProjection842) @ 27601313 + 843 @ 27601441
    + projection = 
    +     type = 
    +         string = `PE_COORDSYS'
    +     MIFDictionary = 
    +         string =
`{0:pcstring,}Emif_String,{1:x{0:pcstring,}Emif_String,coordSys,}PE_COORDSYS,.'
    +     MIFObject = `?'
    + title = 
    +     string = `PE'



    Map_Info(Eprj_MapInfo) @ 27602284 + 112 @ 27602412
    + proName = `Geographic (Lat/Lon)'


























    + upperLeftCenter = 
    +     x = 126.768078
    +     y = 38.030574
    + lowerRightCenter = 
    +     x = 126.931366
    +     y = 38.164426
    + pixelSize = 
    +     width = 0.000046
    +     height = 0.000036
    + units = `dd'

    Projection(Eprj_ProParameters) @ 27602524 + 230 @ 27602652
    + proType = EPRJ_INTERNAL
    + proNumber = 0
    + proExeName = (no values)
    + proName = `Geographic (Lat/Lon)'
    + proZone = 0
    + proParams[0] = 0.000000
    + proParams[1] = 0.000000
    + proParams[2] = 0.000000
    + proParams[3] = 0.000000
    + proParams[4] = 0.000000
    + proParams[5] = 0.000000
    + proParams[6] = 0.000000
    + proParams[7] = 0.000000
    + proParams[8] = 0.000000
    + proParams[9] = 0.000000
    + proParams[10] = 0.000000
    + proParams[11] = 0.000000
    + proParams[12] = 0.000000
    + proParams[13] = 0.000000
    + proParams[14] = 0.000000
    + proSpheroid = 
    +     sphereName = `WGS 84'
    +     a = 6378137.000000
    +     b = 6356752.314245
    +     eSquared = 0.006694
    +     radius = 6378137.000000

      Datum(Eprj_Datum) @ 27602882 + 89 @ 27603010
      + datumname = `WGS 84'
      + type = EPRJ_DATUM_PARAMETRIC
      + params[0] = 0.000000
      + params[1] = 0.000000
      + params[2] = 0.000000
      + params[3] = 0.000000
      + params[4] = 0.000000
      + params[5] = 0.000000
      + params[6] = 0.000000
      + gridname = (no values)


I have sent my broken image to someone with the full version of Imagine, so
hopefully I will have a more detailed error message soon.

Thanks for your help,

Ben
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-created-HFA-images-unreadable-in-ERDAS-ViewFinder-tp5838122p5838122.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Wed Dec 15 12:23:26 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec 15 12:23:59 2010
Subject: [gdal-dev] Black lines across images using GDAL 1.7.2 and above
In-Reply-To: <F52876411F027A4FA646577165F65C16DCE6EC@NHC2EX13.goodrich.root.local>
References: <F52876411F027A4FA646577165F65C16DCE6EC@NHC2EX13.goodrich.root.local>
Message-ID: <201012151823.26628.even.rouault@mines-paris.org>

Le mercredi 15 d?cembre 2010 12:58:15, Smart, Gary a ?crit :

Gary,

I am not aware of such a corruption having been reported. Would you be able to 
craft a small self-contained test case (code + data) that you could share and 
that exhibits the issue ?

(well the issue you describe reminded me a bit about 
http://trac.osgeo.org/gdal/ticket/3458 but this bug was fixed in 1.7.2 and you 
didn't mention if your use case involved warping)

> I recently updated our GDAL source to version 1.7.3 from 1.7.1 and
> suddenly we appear to have lots of black lines across any imagery read
> using the GDAL (e.g. NITF files, WMS geotiffs).  Wondering if it was a
> 1.7.3 issue, I switched to 1.7.2 which showed exactly the same problem.
> Moving back to 1.7.1 clears it.  It looks very much like memory
> corruption and seems to particularly affect the lower half of displayed
> images.
> 
> 
> 
> Has anyone else witnessed such corruption?  We need to keep our systems
> up to date with the latest GDAL but cannot move forward with this
> problem in the build.
> 
> 
> 
> We are using GDAL on SLES10.2 Linux.
> 
> 
> 
> 
> 
> Gary
From even.rouault at mines-paris.org  Wed Dec 15 12:25:50 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec 15 12:26:23 2010
Subject: [gdal-dev] NITF 16bit pixel scaling using NBITS/ABPP
In-Reply-To: <F52876411F027A4FA646577165F65C16DCE6E6@NHC2EX13.goodrich.root.local>
References: <F52876411F027A4FA646577165F65C16DCE6E6@NHC2EX13.goodrich.root.local>
Message-ID: <201012151825.50897.even.rouault@mines-paris.org>

Le mercredi 15 d?cembre 2010 12:52:06, Smart, Gary a ?crit :
> We are reading NITF images which occupy the lower 12bits of a 16bit
> datatype.  These images clearly have ABPP=12 and NBPP=16 set in the
> header.  However, when I use GetMetadataItem("NBITS"), the string
> returned is always 'null'.  I have also tried GetMetadataItem("ABPP") -
> which also returns 'null'.
> 

You can guess the NBPP from the datatype of the band. If it's Int16 or UInt16, 
then NBPP = 16

The ABPP can be read through the "NITF_ABPP" metadata item (as seen in the 
output of gdalinfo on such a file)

> 
> 
> Does anyone know how to access this information in the NITF header.  Are
> there any recorded problems regarding this?
> 
> I am using GDAL version 1.7.1 on SLES10 linux.
> 
> 
> 
> Gary
From nate-lists at calftrail.com  Wed Dec 15 13:44:12 2010
From: nate-lists at calftrail.com (Nathan Vander Wilt)
Date: Wed Dec 15 13:48:56 2010
Subject: [gdal-dev] Black lines across images using GDAL 1.7.2 and above
In-Reply-To: <F52876411F027A4FA646577165F65C16DCE6EC@NHC2EX13.goodrich.root.local>
References: <F52876411F027A4FA646577165F65C16DCE6EC@NHC2EX13.goodrich.root.local>
Message-ID: <0DE7E8E4-62CA-468F-9F06-6A8A0A4CFA94@calftrail.com>

On Dec 15, 2010, at 3:58 AM, Smart, Gary wrote:
> I recently updated our GDAL source to version 1.7.3 from 1.7.1 and suddenly we appear to have lots of black lines across any imagery read using the GDAL (e.g. NITF files, WMS geotiffs).  Wondering if it was a 1.7.3 issue, I switched to 1.7.2 which showed exactly the same problem.  Moving back to 1.7.1 clears it.  It looks very much like memory corruption and seems to particularly affect the lower half of displayed images.
>  
> Has anyone else witnessed such corruption?  We need to keep our systems up to date with the latest GDAL but cannot move forward with this problem in the build.

Woah, yes I have! I am using GDAL trunk ("1.8.0") to churn through some imagery, and noticed strange black lines through some of the output. In my initial investigation I couldn't find them in the source data. I am glad you posted, because I was going to have to track this down eventually and my large source data makes that a slooooow process.

regards,
-natevw
http://cloudcartography.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101215/ffdf3111/attachment.html
From ben_deering at swissmail.org  Wed Dec 15 16:20:12 2010
From: ben_deering at swissmail.org (jeepingben)
Date: Wed Dec 15 16:20:15 2010
Subject: [gdal-dev] Re: GDAL created HFA images unreadable in ERDAS
	ViewFinder
In-Reply-To: <1292431270308-5838122.post@n2.nabble.com>
References: <1292431270308-5838122.post@n2.nabble.com>
Message-ID: <1292448012716-5838444.post@n2.nabble.com>


The image works in the real imagine viewer, so it could be Erdas' problem. 
This is what IMAGINE has to say about the image I created:

			Erdas Imagine File Information
			------------------------------


File Name: po_1027098_red_0000000.img
Last Modified: Wed Dec 31 19:00:00 1969
Number of Layers: 1

Layer Information:

	Name   : :Layer_1
	Width  : 3587
	Height : 3716
	Type   : Continuous
	Block Width  : 64
	Block Height : 64
	Pixel Depth  :Unsigned 16-bit
	Compression Type : None


	Projection Information :

		Projection Zone  : 0
		Spheroid Name   : WGS 84
		Georeferenced to : Geographic (Lat/Lon)

Ben
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-created-HFA-images-unreadable-in-ERDAS-ViewFinder-tp5838122p5838444.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From heng.feng at aircominternational.com  Wed Dec 15 21:24:08 2010
From: heng.feng at aircominternational.com (heng.feng)
Date: Wed Dec 15 21:24:10 2010
Subject: [gdal-dev] An issue about using GDALWARP to do the NTv2
	transformation
Message-ID: <1292466248833-5838904.post@n2.nabble.com>


http://osgeo-org.1803224.n2.nabble.com/file/n5838904/gdalwarp_problem.doc
gdalwarp_problem.doc 

Hi there,

I was trying to use GDALWARP command to do the NTv2 transformation on some
German map data (raster data). However I have come across a lot of errors
saying "failed to find a grid table for the location". I used the same grid
shift file and the same projection settings in the ogr2ogr command to do the
NTv2 transformation on the MapInfo map data files (vector data) we have got
. It seems working perfectly without any error message. The grid shift file
was downloaded from 
http://translate.google.com/translate?js=n&prev=_t&hl=en&ie=UTF-8&layout=2&eotf=1&sl=de&tl=en&u=http%3A%2F%2Fcrs.bkg.bund.de%2Fcrseu%2Fcrs%2Fdescrtrans%2FBeTA%2Fde_dhdn2etrs_beta.php
this link .

I am not sure whether I have used the GDALWARP command correctly. It seems
that I got the error messages for all the raster map data I have got here by
running the GDALWARP command to do the NTv2 transformation on them. I have
attached two screenshots for your reference. As follows, please find the
GDAL command I was using and some the error messages copied from the FWTools
shell window. Note that I have turned on the debug mode before running the
command in FWTools shell window:

C:\Program Files\FWTools2.4.7>gdalwarp -s_srs "+proj=tmerc +lat_0=0
+lon_0=12 +k =1.000000 +x_0=4500000 +y_0=0 +ellps=bessel +datum=potsdam
+nadgrids=C:\fh\comar ch\BETA2007.gsb +units=m +wktext" -t_srs "+proj=utm
+datum=WGS84 +zone=32" C:\fh \comarch\backdrops\s4_01_01\l0.tif
C:\fh\comarch\backdrops\s4_01_01\l0_test.tif
pj_open_lib(proj_def.dat): call
fopen(C:\PROGRA~1\FWTOOL~1.7\proj_lib\proj_def.d
at) - succeeded
pj_open_lib(proj_def.dat): call
fopen(C:\PROGRA~1\FWTOOL~1.7\proj_lib\proj_def.d
at) - succeeded
Processing input file C:\fh\comarch\backdrops\s4_01_01\l0.tif.
pj_open_lib(proj_def.dat): call
fopen(C:\PROGRA~1\FWTOOL~1.7\proj_lib\proj_def.d
at) - succeeded
pj_open_lib(proj_def.dat): call
fopen(C:\PROGRA~1\FWTOOL~1.7\proj_lib\proj_def.d
at) - succeeded
pj_open_lib(C:\fh\comarch\BETA2007.gsb): call
fopen(C:\fh\comarch\BETA2007.gsb)
- succeeded
NTv2 DHDN90   62x84: LL=(5.5,47) UR=(15.6666667,55.3)
pj_apply_gridshift(): failed to find a grid shift table for
                      location (5.0347670dW,55.2216906dN)
   tried: C:\fh\comarch\BETA2007.gsb
0pj_apply_gridshift(): failed to find a grid shift table for
                      location (5.0350256dW,55.2215588dN)
   tried: C:\fh\comarch\BETA2007.gsb
pj_apply_gridshift(): failed to find a grid shift table for
                      location (5.0350256dW,55.2215588dN)
   tried: C:\fh\comarch\BETA2007.gsb
NTv2 - loading grid DHDN90
pj_open_lib(C:\fh\comarch\BETA2007.gsb): call
fopen(C:\fh\comarch\BETA2007.gsb)
- succeeded
pj_apply_gridshift(): used DHDN90
pj_apply_gridshift(): used DHDN90
pj_apply_gridshift(): used DHDN90
pj_apply_gridshift(): failed to find a grid shift table for
                      location (5.0350534dW,55.2212791dN)
   tried: C:\fh\comarch\BETA2007.gsb
pj_apply_gridshift(): failed to find a grid shift table for
                      location (5.0350534dW,55.2212791dN)
   tried: C:\fh\comarch\BETA2007.gsb
pj_apply_gridshift(): used DHDN90
pj_apply_gridshift(): used DHDN90
pj_apply_gridshift(): used DHDN90
pj_apply_gridshift(): failed to find a grid shift table for
                      location (5.0350813dW,55.2209994dN)
   tried: C:\fh\comarch\BETA2007.gsb
pj_apply_gridshift(): failed to find a grid shift table for
                      location (5.0350813dW,55.2209994dN)
   tried: C:\fh\comarch\BETA2007.gsb
pj_apply_gridshift(): used DHDN90
pj_apply_gridshift(): used DHDN90
pj_apply_gridshift(): used DHDN90
pj_apply_gridshift(): failed to find a grid shift table for
                      location (5.0351091dW,55.2207198dN)
   tried: C:\fh\comarch\BETA2007.gsb
.................................
.................................
.................................
pj_apply_gridshift(): failed to find a grid shift table for
                      location (5.1075622dW,54.4761871dN)
   tried: C:\fh\comarch\BETA2007.gsb
pj_apply_gridshift(): failed to find a grid shift table for
                      location (5.1075622dW,54.4761871dN)
   tried: C:\fh\comarch\BETA2007.gsb
pj_apply_gridshift(): failed to find a grid shift table for
                      location (5.1075888dW,54.4759073dN)
   tried: C:\fh\comarch\BETA2007.gsb
pj_apply_gridshift(): failed to find a grid shift table for
                      location (5.1075888dW,54.4759073dN)
   tried: C:\fh\comarch\BETA2007.gsb
100 - done.

I did not copy all the error messages here as there are quite an amount of
messages. Although we did get some resulting file after running this
command, I did not manage to see anything (just blank) when opening the
files in our map data/image tools. 

I am just wondering whether you are aware of any reason why this happens.
Your help would be much appreciated.

Thanks & Best Regards,
Heng
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/An-issue-about-using-GDALWARP-to-do-the-NTv2-transformation-tp5838904p5838904.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Wed Dec 15 21:37:55 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Dec 15 21:37:49 2010
Subject: [gdal-dev] An issue about using GDALWARP to do the NTv2
	transformation
In-Reply-To: <1292466248833-5838904.post@n2.nabble.com>
References: <1292466248833-5838904.post@n2.nabble.com>
Message-ID: <4D097B83.8040607@pobox.com>

On 10-12-15 09:24 PM, heng.feng wrote:
>
> http://osgeo-org.1803224.n2.nabble.com/file/n5838904/gdalwarp_problem.doc
> gdalwarp_problem.doc
>
> Hi there,
>
> I was trying to use GDALWARP command to do the NTv2 transformation on some
> German map data (raster data). However I have come across a lot of errors
> saying "failed to find a grid table for the location". I used the same grid
> shift file and the same projection settings in the ogr2ogr command to do the
> NTv2 transformation on the MapInfo map data files (vector data) we have got
> . It seems working perfectly without any error message. The grid shift file
> was downloaded from
> http://translate.google.com/translate?js=n&prev=_t&hl=en&ie=UTF-8&layout=2&eotf=1&sl=de&tl=en&u=http%3A%2F%2Fcrs.bkg.bund.de%2Fcrseu%2Fcrs%2Fdescrtrans%2FBeTA%2Fde_dhdn2etrs_beta.php
> this link .
>
> I am not sure whether I have used the GDALWARP command correctly. It seems
> that I got the error messages for all the raster map data I have got here by
> running the GDALWARP command to do the NTv2 transformation on them. I have
> attached two screenshots for your reference. As follows, please find the
> GDAL command I was using and some the error messages copied from the FWTools
> shell window. Note that I have turned on the debug mode before running the
> command in FWTools shell window:
...
> pj_open_lib(C:\fh\comarch\BETA2007.gsb): call
> fopen(C:\fh\comarch\BETA2007.gsb)
> - succeeded
> NTv2 DHDN90   62x84: LL=(5.5,47) UR=(15.6666667,55.3)
> pj_apply_gridshift(): failed to find a grid shift table for
>                        location (5.0347670dW,55.2216906dN)
>     tried: C:\fh\comarch\BETA2007.gsb


Heng,

The BETA2007.gsb file is valid for the area LL=(5.5,47) UR=(15.6666667,55.3)
but you are trying to warp points like 5degrees *west* 55 north.  Note that
5d W is -5 degrees and is roughly 10 degrees away from the closest area
in the grid shift file.

Does it seem possible that somehow your raster data has been incorrectly
georeferenced with the longitude sign wrong?  If not, then it seems likely
your raster file extends outside the region in the grid shift file.  Does
this seem reasonable?  Or are you convinced that your file ought to all
be within the area of the grid shift file?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From christian.mueller at nvoe.at  Thu Dec 16 00:05:42 2010
From: christian.mueller at nvoe.at (christian.mueller@nvoe.at)
Date: Thu Dec 16 00:05:58 2010
Subject: [gdal-dev] Re: Performance improvement for gdal_retile
In-Reply-To: <4D08DCF5.2030800@pobox.com>
References: <4CDC3C1F.6050000@pobox.com>
	<20101215151543.d2stglh8g0oww8cc@webmail.nvoe.at>
	<4D08DCF5.2030800@pobox.com>
Message-ID: <20101216060542.69tv915s4kscskok@webmail.nvoe.at>

I have seen that Even has invested some time into gdal_retile, writing  
a test case on trunk and making some python specific changes to the  
utility itself. Since gdal_retile.py was my first python program I  
want to say thank you for that.

Comparing 1.7 to trunk, I see that gdal_retile.py differs and that  
there is no test case for 1.7. Looking at the roadmap

http://trac.osgeo.org/gdal/roadmap

I am a little bit confused. Does it make sense to invest time for the  
1.7 branch or is it better to focus on trunk (becoming 1.8) only ?.

Thx
Christian

----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From heng.feng at aircominternational.com  Thu Dec 16 01:40:44 2010
From: heng.feng at aircominternational.com (heng.feng)
Date: Thu Dec 16 01:40:47 2010
Subject: [gdal-dev] Re: An issue about using GDALWARP to do the NTv2
	transformation
In-Reply-To: <4D097B83.8040607@pobox.com>
References: <1292466248833-5838904.post@n2.nabble.com>
	<4D097B83.8040607@pobox.com>
Message-ID: <1292481644795-5841037.post@n2.nabble.com>


Thanks a lot, Frank. Your explanations really make sense to me. We have got
the raster data and the link for the grid shift file from one of our
customers. I think I need to check with the customer to find out what is the
possible reason. Will let you know if I have got any further question about
this. Thanks for your help again.

Best Regards,
Heng
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/An-issue-about-using-GDALWARP-to-do-the-NTv2-transformation-tp5838904p5841037.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From brfr at metrico.lu  Thu Dec 16 02:33:36 2010
From: brfr at metrico.lu (Frank Broniewski)
Date: Thu Dec 16 02:33:18 2010
Subject: [gdal-dev] Internal Metadata Management
In-Reply-To: <21E622A3-FC3E-48D6-B9D5-FCDFFBDF97CF@gmail.com>
References: <4D071DD6.8080200@metrico.lu>
	<4D072D6F.5060007@gmail.com>	<4D08DAA1.4070303@metrico.lu>
	<4D08DF30.9060103@gmail.com>
	<21E622A3-FC3E-48D6-B9D5-FCDFFBDF97CF@gmail.com>
Message-ID: <4D09C0D0.5020607@metrico.lu>

Am 15.12.2010 16:47, schrieb Howard Butler:
>
> On Dec 15, 2010, at 9:30 AM, Ari Jolma wrote:
>
>> On 12/15/2010 05:11 PM, Frank Broniewski wrote:
>>>
>>> Hello Ari,
>>>
>>> yes that is definitely helpful. But I still wonder if it might be easier/quicker to use GeoJSON as a interchange format and tranform from geojson to other formats than using OGRs internal structure. I already have some convenience classes for creating GeoJSON structures in Python. I know there is already a geojson python module [1], but onfortunately it doesn't deal with projections afaik.
>>
>> GDAL has support for GeoJSON too. And it seems to support projections.
>
> GeoJSON explicitly supports projections, and OGR's implementation tries its best to deal with them.  GeoJSON's original intent is as a slightly-more-up-to-date, Javascript-consumable interchange format.  A better WKT, if you will.  With a light concept of features and feature collections.  It's a great way to interchange geometries and (sometimes) features between softwares of the Python world, the Javascript world, and the PostGIS world.
>
> There are some gotchas with GeoJSON as far as features are concerned though.  A GeoJSON feature object is essentially free-standing, and an array of them need not have a common schema to describe the layout of all of the features in that array.  In practice, the features of an array typically have a common schema, but this requirement is not enforced in any way.  This property of GeoJSON can cause some leakage in that respect.
>
> ESRI's JSON output is not GeoJSON, and AFAIK there is no interchange capability there.
>
> Howard_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

Hello Howard,

thank you very much for your detailed answer. I know that GeoJSON 
supports projections, the before mentioned python package (from Sean 
Gillies and Matt Russel) doesn't: "Version 1.0 does not consider 
coordinate systems." [1]

I am doing database based CAD to GIS conversions and therefore I was 
looking for an easy to use interchange format. Having used GeoJSON 
before with a number of OpenLayers Web applications, I know this format 
well and the really pleasant way to create this format from a number of 
different data sources. My only concern was actually if it wouldn't be 
more efficient to use OGRs internal data format directly. But I will be 
using GeoJSON as my transport format now. So I don't have to deal too 
much with OGRs C-API which I don't understand very well. I am just a 
geographer, not a programmer.

Luckily I won't have to deal with ESRIs data formats - apart from 
Shapefiles of course :-)


Frank

[1] - http://trac.gispython.org/lab/wiki/PythonGeoInterface
From uwe.schmitz at bezreg-koeln.nrw.de  Thu Dec 16 03:50:28 2010
From: uwe.schmitz at bezreg-koeln.nrw.de (Schmitz, Uwe)
Date: Thu Dec 16 04:43:44 2010
Subject: AW: [gdal-dev] An issue about using GDALWARP to do the
	NTv2transformation
In-Reply-To: <1292466248833-5838904.post@n2.nabble.com>
Message-ID: <240EE7C956B2CB439C613DF6CEC8A32D037BBB14@sebulba.bezreg-koeln.nrw.de>

Heng,

as Frank wrote the coordinates you try to transform are
far outside the BETA2007.gsb grid. Is it possible that
your georefrenced raster fiel lacks the Gauss-Krueger meridian 
prefix? If so, you can try with a modified "+x_0=500000" parameter
on the command line.


Regards
Uwe
From heng.feng at aircominternational.com  Thu Dec 16 04:48:33 2010
From: heng.feng at aircominternational.com (heng.feng)
Date: Thu Dec 16 04:48:34 2010
Subject: [gdal-dev] An issue about using GDALWARP to do the
	NTv2transformation
In-Reply-To: <240EE7C956B2CB439C613DF6CEC8A32D037BBB14@sebulba.bezreg-koeln.nrw.de>
References: <1292466248833-5838904.post@n2.nabble.com>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB14@sebulba.bezreg-koeln.nrw.de>
Message-ID: <C3257D068EB03E4498BAC3A96344256803B2A92561@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>


Brilliant. Thanks, Uwe. I will try that and let you if it works.

From: Schmitz, Uwe [via OSGeo.org] [mailto:ml-node+5841399-2004682561-308251@n2.nabble.com]
Sent: 16 December 2010 09:44
To: Heng Feng
Subject: AW: [gdal-dev] An issue about using GDALWARP to do the NTv2transformation

Heng,

as Frank wrote the coordinates you try to transform are
far outside the BETA2007.gsb grid. Is it possible that
your georefrenced raster fiel lacks the Gauss-Krueger meridian
prefix? If so, you can try with a modified "+x_0=500000" parameter
on the command line.


Regards
Uwe
_______________________________________________
gdal-dev mailing list
[hidden email]</user/SendEmail.jtp?type=node&node=5841399&i=0>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

________________________________
View message @ http://osgeo-org.1803224.n2.nabble.com/An-issue-about-using-GDALWARP-to-do-the-NTv2-transformation-tp5838904p5841399.html
To unsubscribe from An issue about using GDALWARP to do the NTv2 transformation, click here<http://osgeo-org.1803224.n2.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5838904&code=aGVuZy5mZW5nQGFpcmNvbWludGVybmF0aW9uYWwuY29tfDU4Mzg5MDR8MTI3MzEwMjEw>.

AIRCOM International
http://www.facebook.com/Aircom | http://www.twitter.com/aircomint | http://blog.aircominternational.com/ | http://www.youtube.com/aircomint 
 
Disclaimer: 
This e-mail message is confidential and should not be used by, or disclosed to, anyone except the addressee. If you receive this message in error, please advise us immediately on +44 (0) 1932 442000. Since e-mail transmission is not secure or error free, we do not accept responsibility for changes to any e-mail which occur after it has been sent. Attachments to this e-mail may contain software viruses which could damage your systems. You should therefore virus-check all attachments before opening. AIRCOM may monitor incoming and outgoing emails through its networks and by responding to this email, you consent to such monitoring. The views and opinions expressed in this e-mail are those of the author only and not of AIRCOM. We do not intend to enter into any legal commitments or contracts by e-mail. Registered Office: Cassini Court, Randalls Research Park, Randalls Way, Leatherhead, Surrey, KT22 7TW, UK. AIRCOM International Ltd registered in England No. 3052022. VAT number 811 5323 68.
 Save a tree. Don't print this e-mail unless it's really necessary

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/An-issue-about-using-GDALWARP-to-do-the-NTv2-transformation-tp5838904p5841413.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101216/b2d38f7e/attachment.html
From christian.mueller at nvoe.at  Thu Dec 16 10:30:43 2010
From: christian.mueller at nvoe.at (christian.mueller@nvoe.at)
Date: Thu Dec 16 10:30:56 2010
Subject: [gdal-dev] Re: Performance improvement for gdal_retile
In-Reply-To: <4D08DCF5.2030800@pobox.com>
References: <4CDC3C1F.6050000@pobox.com>
	<20101215151543.d2stglh8g0oww8cc@webmail.nvoe.at>
	<4D08DCF5.2030800@pobox.com>
Message-ID: <20101216163043.z9jvkgzucgcssso0@webmail.nvoe.at>

Hi Franks, thanks for your quick answers.

The patch is here
http://trac.osgeo.org/gdal/ticket/3879

The test case test_gdal_retile.py is running and I checked the man  
page with doxygen.

Please can you give me a ping after applying the patch to trunk. Since  
I am a geotools/geoserver developer and I know about 2 modules  
depending on the directory output structure, I will have to make some  
noise on the developer lists after your commitment to trunk.

Thanks again for your support
Christian





----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From warmerdam at pobox.com  Fri Dec 17 11:16:40 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Dec 17 11:16:43 2010
Subject: [gdal-dev] 1.8 Release - Need to move!
Message-ID: <4D0B8CE8.7070306@pobox.com>

Folks,

I've been dragging my feet on release for a couple weeks now because I'm
uncertain about the OGR 64 bit RFC.  Rather than vacillate into new year, I
would like to defer it to 1.9 and start a beta program.   Are there any
objections to me producing a "beta 1" this weekend?  My hope is that we could
have a release candidate available for January 1st after a 2-3 betas.  I
realize we are essentially into the holiday period now and that not everyone
will have time to do testing but I hesitate to let things drag on endlessly.

Do folks think it is desirable to have a release oriented meeting next week,
or should we just discuss by email, proceed through a few betas and then to
a release candidate?

We haven't formalized a concept of release manager and process to the degree
it has been done for MapServer.  But unless someone else really wants to do
it, I'm prepared to act as release manager for 1.8.  Adoption of a release
candidate as a formal release would be done by PSC vote as we do for point
releases.  In theory it would be nice to have a PSC vote on a release schedule
and appointment of a release manager but I'm afraid that might set us back
timewise.  However, if there are objections to proceeding more directly I'm
willing to do so.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Fri Dec 17 13:19:21 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 17 13:20:21 2010
Subject: [gdal-dev] 1.8 Release - Need to move!
In-Reply-To: <4D0B8CE8.7070306@pobox.com>
References: <4D0B8CE8.7070306@pobox.com>
Message-ID: <201012171919.21591.even.rouault@mines-paris.org>

Le vendredi 17 d?cembre 2010 17:16:40, Frank Warmerdam a ?crit :
> Folks,
> 
> I've been dragging my feet on release for a couple weeks now because I'm
> uncertain about the OGR 64 bit RFC.  Rather than vacillate into new year, I
> would like to defer it to 1.9 and start a beta program.   Are there any
> objections to me producing a "beta 1" this weekend?  My hope is that we
> could have a release candidate available for January 1st after a 2-3
> betas.  I realize we are essentially into the holiday period now and that
> not everyone will have time to do testing but I hesitate to let things
> drag on endlessly.

Sounds like a good plan.

I'm just a bit concerned about the recent report of "Black lines across images 
using GDAL 1.7.2 and above". Would be nice to solve this if this is confirmed, 
but for now, as we have no elements to analyze and reproduce, we cannot really 
do anything.

> 
> Do folks think it is desirable to have a release oriented meeting next
> week, or should we just discuss by email, proceed through a few betas and
> then to a release candidate?

Email might be sufficient.

> 
> We haven't formalized a concept of release manager and process to the
> degree it has been done for MapServer.  But unless someone else really
> wants to do it, I'm prepared to act as release manager for 1.8.

+1 for FrankW as 1.8 release manager

> Adoption
> of a release candidate as a formal release would be done by PSC vote as we
> do for point releases.  In theory it would be nice to have a PSC vote on a
> release schedule and appointment of a release manager but I'm afraid that
> might set us back timewise.  However, if there are objections to
> proceeding more directly I'm willing to do so.
> 
> Best regards,
From seth at pricepages.org  Fri Dec 17 17:41:53 2010
From: seth at pricepages.org (Seth Price)
Date: Fri Dec 17 17:41:58 2010
Subject: [gdal-dev] Re: OpenCL, GDAL, and You
In-Reply-To: <201012082112.04629.even.rouault@mines-paris.org>
References: <88890516-6689-41C4-8577-1524F699AF12@pricepages.org>
	<201012070801.42043.even.rouault@mines-paris.org>
	<D7652E8D-2E2A-4DCF-AA6F-978E80CA0F19@pricepages.org>
	<201012082112.04629.even.rouault@mines-paris.org>
Message-ID: <9B194ACD-4936-43A7-8638-A16E684EAF93@pricepages.org>

I'm working on the trunk OpenCL build on my Mac now.

****** First, on my mac I get an error at the end of make:
[...] ./ogr/.libs/ogr_srs_xml.o ./ogr/.libs/ograssemblepolygon.o ./ 
ogr/.libs/ogr2gmlgeometry.o ./ogr/.libs/gml2ogrgeometry.o ./ogr/.libs/ 
ogr_expat.o   /opt/local/lib/libsqlite3.dylib -L/opt/local/lib -L/usr/ 
local/lib /usr/local/lib/libexpat.dylib /usr/local/lib/libjpeg.dylib / 
usr/local/lib/libtiff.dylib /usr/local/lib/libpng12.dylib -lpthread - 
ldl /opt/local/lib/libcurl.dylib /opt/local/lib/libidn.dylib -lssl - 
lcrypto -lz -lOpenCL    -install_name  /usr/local/lib/libgdal.1.dylib - 
compatibility_version 16 -current_version 16.0 -Wl,-single_module
ld: library not found for -lOpenCL
collect2: ld returned 1 exit status
make[1]: *** [libgdal.la] Error 1
make: *** [check-lib] Error 2
seth:gdal-svn-trunk-2010.12.17 sprice$

To fix this, I changed "OPENCL_LIB      =       -lOpenCL" to  
"OPENCL_LIB      =       -framework OpenCL" in GDALMmake.opt.

*****  Why is USE_CLAMP_TO_DST_FLOAT in there? I would think that is  
required even if it isn't on ATI. I'm not sure who inserted its use,  
but I'm just wondering if the reasoning is documented somewhere.

***** I had to make this change to alg/gdalwarpkernel_opencl.c to get  
it to build without a build option error.

@@ -1168,7 +1168,7 @@

      //Assemble the compiler arg string for speed. All invariants  
should be defined here.
      sprintf(buffer, "-cl-fast-relaxed-math -Werror -D FALSE=0 -D  
TRUE=1 "
-            "%s "
+            "%s"
              "-D iSrcWidth=%d -D iSrcHeight=%d -D iDstWidth=%d -D  
iDstHeight=%d "
              "-D useUnifiedSrcDensity=%d -D useUnifiedSrcValid=%d "
              "-D useDstDensity=%d -D useDstValid=%d -D useImag=%d "
@@ -1176,9 +1176,9 @@
              "-D nXRadius=%d -D nYRadius=%d -D nFiltInitX=%d -D  
nFiltInitY=%d "
              "-D PI=%015.15lff -D outType=%s -D dstMinVal=%015.15lff - 
D dstMaxVal=%015.15lff "
              "-D useDstNoDataReal=%d -D vecf=%s %s -D doCubicSpline= 
%d "
-            "-D useUseBandSrcValid=%d -D iCoordMult=%d",
+            "-D useUseBandSrcValid=%d -D iCoordMult=%d ",
              /* FIXME: Is it really a ATI specific thing ? */
-            (warper->imageFormat == CL_FLOAT && warper->bIsATI) ? "-D  
USE_CLAMP_TO_DST_FLOAT=1" : "",
+            (warper->imageFormat == CL_FLOAT && warper->bIsATI) ? "-D  
USE_CLAMP_TO_DST_FLOAT=1 " : "",
              warper->srcWidth, warper->srcHeight, warper->dstWidth,  
warper->dstHeight,
              warper->useUnifiedSrcDensity, warper->useUnifiedSrcValid,
              warper->useDstDensity, warper->useDstValid, warper- 
 >imagWorkCL != NULL,

**** After doing all of the above to make things compile, I don't get  
the bug described below. I'm working off of the latest trunk daily.

~Seth


On Dec 8, 2010, at 1:12 PM, Even Rouault wrote:

> Seth,
>
> Thanks for your help.
>
>> It's more than a little strange that none of those image sizes work.
>> Perhaps it's a problem with the image format? Can you verify that the
>> given format should work?
>
> The image format was CL_UNORM_INT8 (for GDT_Byte)
>
>>
>> Looking at the spec, it might also be a problem with the 'sz'
>> argument. What value is that passing?
>
> It's 1.
>
> I managed to found the following workaround that enables gdalwarp to  
> complete
> (see http://trac.osgeo.org/gdal/changeset/21220  that basically  
> passes a dummy
> buffer instead of a NULL pointer).
>
> However the visual result of the warping is really poor. I see 4  
> "ghost"
> images shifted.
>
> For better understanding I've attached the source image  
> (small_world_b1.tif)
> and the result of bilinear resampling (but I get similar weird  
> visual effects
> with cubic, cubic spline or lanczos)
>
> gdalwarp  -rb small_world_b1.tif out_bilinear.tif
>
> Best regards,
>
> Even
> <small_world_b1.tif><out_bilinear.tif>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101217/ab11cb59/attachment.html
From even.rouault at mines-paris.org  Fri Dec 17 17:54:06 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 17 17:55:10 2010
Subject: [gdal-dev] Re: OpenCL, GDAL, and You
In-Reply-To: <9B194ACD-4936-43A7-8638-A16E684EAF93@pricepages.org>
References: <88890516-6689-41C4-8577-1524F699AF12@pricepages.org>
	<201012082112.04629.even.rouault@mines-paris.org>
	<9B194ACD-4936-43A7-8638-A16E684EAF93@pricepages.org>
Message-ID: <201012172354.06303.even.rouault@mines-paris.org>

Le vendredi 17 d?cembre 2010 23:41:53, Seth Price a ?crit :
> I'm working on the trunk OpenCL build on my Mac now.
> 
> ****** First, on my mac I get an error at the end of make:
> [...] ./ogr/.libs/ogr_srs_xml.o ./ogr/.libs/ograssemblepolygon.o ./
> ogr/.libs/ogr2gmlgeometry.o ./ogr/.libs/gml2ogrgeometry.o ./ogr/.libs/
> ogr_expat.o   /opt/local/lib/libsqlite3.dylib -L/opt/local/lib -L/usr/
> local/lib /usr/local/lib/libexpat.dylib /usr/local/lib/libjpeg.dylib /
> usr/local/lib/libtiff.dylib /usr/local/lib/libpng12.dylib -lpthread -
> ldl /opt/local/lib/libcurl.dylib /opt/local/lib/libidn.dylib -lssl -
> lcrypto -lz -lOpenCL    -install_name  /usr/local/lib/libgdal.1.dylib -
> compatibility_version 16 -current_version 16.0 -Wl,-single_module
> ld: library not found for -lOpenCL
> collect2: ld returned 1 exit status
> make[1]: *** [libgdal.la] Error 1
> make: *** [check-lib] Error 2
> seth:gdal-svn-trunk-2010.12.17 sprice$
> 
> To fix this, I changed "OPENCL_LIB      =       -lOpenCL" to
> "OPENCL_LIB      =       -framework OpenCL" in GDALMmake.opt.

I can't help for MacOS build system.

> 
> *****  Why is USE_CLAMP_TO_DST_FLOAT in there? I would think that is
> required even if it isn't on ATI. I'm not sure who inserted its use,
> but I'm just wondering if the reasoning is documented somewhere.

It's me. You can find the culprit of any commit by doing a svn blame or looking 
at the log ;-)

The reasoning was that I observed with my ATI card that float buffers didn't get 
to be multiplied by FLT_MAX. The values weren't normalized between 0 and 1, 
but had directly the expected value. (in the float case, I also dropped the 
rounding to nearest integer which is clearly not desired, and not in the CPU 
implementation)

This is perhaps also needed for NVidia, but I have no way to check, so I just 
put the condition you saw. If you can check this is unneeded, the condition 
can go away.

> 
> ***** I had to make this change to alg/gdalwarpkernel_opencl.c to get
> it to build without a build option error.
> 
> @@ -1168,7 +1168,7 @@
> 
>       //Assemble the compiler arg string for speed. All invariants
> should be defined here.
>       sprintf(buffer, "-cl-fast-relaxed-math -Werror -D FALSE=0 -D
> TRUE=1 "
> -            "%s "
> +            "%s"
>               "-D iSrcWidth=%d -D iSrcHeight=%d -D iDstWidth=%d -D
> iDstHeight=%d "
>               "-D useUnifiedSrcDensity=%d -D useUnifiedSrcValid=%d "
>               "-D useDstDensity=%d -D useDstValid=%d -D useImag=%d "
> @@ -1176,9 +1176,9 @@
>               "-D nXRadius=%d -D nYRadius=%d -D nFiltInitX=%d -D
> nFiltInitY=%d "
>               "-D PI=%015.15lff -D outType=%s -D dstMinVal=%015.15lff -
> D dstMaxVal=%015.15lff "
>               "-D useDstNoDataReal=%d -D vecf=%s %s -D doCubicSpline=
> %d "
> -            "-D useUseBandSrcValid=%d -D iCoordMult=%d",
> +            "-D useUseBandSrcValid=%d -D iCoordMult=%d ",
>               /* FIXME: Is it really a ATI specific thing ? */
> -            (warper->imageFormat == CL_FLOAT && warper->bIsATI) ? "-D
> USE_CLAMP_TO_DST_FLOAT=1" : "",
> +            (warper->imageFormat == CL_FLOAT && warper->bIsATI) ? "-D
> USE_CLAMP_TO_DST_FLOAT=1 " : "",
>               warper->srcWidth, warper->srcHeight, warper->dstWidth,
> warper->dstHeight,
>               warper->useUnifiedSrcDensity, warper->useUnifiedSrcValid,
>               warper->useDstDensity, warper->useDstValid, warper-
> 
>  >imagWorkCL != NULL,

Which error did you get ? You are just changing some whitespace change that 
seem to be equivalent to the trunk code. Or do I miss something ?

> 
> **** After doing all of the above to make things compile, I don't get
> the bug described below. I'm working off of the latest trunk daily.

Yeah, that's probably an issue with the ATI SDK.

> 
> ~Seth
> 
> On Dec 8, 2010, at 1:12 PM, Even Rouault wrote:
> > Seth,
> > 
> > Thanks for your help.
> > 
> >> It's more than a little strange that none of those image sizes work.
> >> Perhaps it's a problem with the image format? Can you verify that the
> >> given format should work?
> > 
> > The image format was CL_UNORM_INT8 (for GDT_Byte)
> > 
> >> Looking at the spec, it might also be a problem with the 'sz'
> >> argument. What value is that passing?
> > 
> > It's 1.
> > 
> > I managed to found the following workaround that enables gdalwarp to
> > complete
> > (see http://trac.osgeo.org/gdal/changeset/21220  that basically
> > passes a dummy
> > buffer instead of a NULL pointer).
> > 
> > However the visual result of the warping is really poor. I see 4
> > "ghost"
> > images shifted.
> > 
> > For better understanding I've attached the source image
> > (small_world_b1.tif)
> > and the result of bilinear resampling (but I get similar weird
> > visual effects
> > with cubic, cubic spline or lanczos)
> > 
> > gdalwarp  -rb small_world_b1.tif out_bilinear.tif
> > 
> > Best regards,
> > 
> > Even
> > <small_world_b1.tif><out_bilinear.tif>
From seth at pricepages.org  Fri Dec 17 18:09:44 2010
From: seth at pricepages.org (Seth Price)
Date: Fri Dec 17 18:09:47 2010
Subject: [gdal-dev] Re: OpenCL, GDAL, and You
In-Reply-To: <201012172354.06303.even.rouault@mines-paris.org>
References: <88890516-6689-41C4-8577-1524F699AF12@pricepages.org>
	<201012082112.04629.even.rouault@mines-paris.org>
	<9B194ACD-4936-43A7-8638-A16E684EAF93@pricepages.org>
	<201012172354.06303.even.rouault@mines-paris.org>
Message-ID: <8E90D340-8B2A-4D20-9169-D6543D5DE286@pricepages.org>

> I can't help for MacOS build system.


Good thing I'm here. :) Do you want an account on my machine for  
testing?

> It's me. You can find the culprit of any commit by doing a svn blame  
> or looking
> at the log ;-)


Most of that clampToDst() code was brought over from  
GWKSetPixelValue(). I'm not sure if it's a good idea to remove it. The  
original .cpp file should be the same as the new OpenCL code/. My goal  
is to make the code execution identical so I don't need to do any post- 
processing of pixels when I copy them out of OpenCL memory.

> Which error did you get ? You are just changing some whitespace  
> change that
> seem to be equivalent to the trunk code. Or do I miss something ?


I was getting a weird build options error that seems to be caused by  
an extra space. So you're right that it's a whitespace change, but  
it's non-trivial.
~Seth

On Dec 17, 2010, at 3:54 PM, Even Rouault wrote:

> Le vendredi 17 d?cembre 2010 23:41:53, Seth Price a ?crit :
>> I'm working on the trunk OpenCL build on my Mac now.
>>
>> ****** First, on my mac I get an error at the end of make:
>> [...] ./ogr/.libs/ogr_srs_xml.o ./ogr/.libs/ograssemblepolygon.o ./
>> ogr/.libs/ogr2gmlgeometry.o ./ogr/.libs/gml2ogrgeometry.o ./ 
>> ogr/.libs/
>> ogr_expat.o   /opt/local/lib/libsqlite3.dylib -L/opt/local/lib -L/ 
>> usr/
>> local/lib /usr/local/lib/libexpat.dylib /usr/local/lib/ 
>> libjpeg.dylib /
>> usr/local/lib/libtiff.dylib /usr/local/lib/libpng12.dylib -lpthread -
>> ldl /opt/local/lib/libcurl.dylib /opt/local/lib/libidn.dylib -lssl -
>> lcrypto -lz -lOpenCL    -install_name  /usr/local/lib/libgdal. 
>> 1.dylib -
>> compatibility_version 16 -current_version 16.0 -Wl,-single_module
>> ld: library not found for -lOpenCL
>> collect2: ld returned 1 exit status
>> make[1]: *** [libgdal.la] Error 1
>> make: *** [check-lib] Error 2
>> seth:gdal-svn-trunk-2010.12.17 sprice$
>>
>> To fix this, I changed "OPENCL_LIB      =       -lOpenCL" to
>> "OPENCL_LIB      =       -framework OpenCL" in GDALMmake.opt.
>
> I can't help for MacOS build system.
>
>>
>> *****  Why is USE_CLAMP_TO_DST_FLOAT in there? I would think that is
>> required even if it isn't on ATI. I'm not sure who inserted its use,
>> but I'm just wondering if the reasoning is documented somewhere.
>
> It's me. You can find the culprit of any commit by doing a svn blame  
> or looking
> at the log ;-)
>
> The reasoning was that I observed with my ATI card that float  
> buffers didn't get
> to be multiplied by FLT_MAX. The values weren't normalized between 0  
> and 1,
> but had directly the expected value. (in the float case, I also  
> dropped the
> rounding to nearest integer which is clearly not desired, and not in  
> the CPU
> implementation)
>
> This is perhaps also needed for NVidia, but I have no way to check,  
> so I just
> put the condition you saw. If you can check this is unneeded, the  
> condition
> can go away.
>
>>
>> ***** I had to make this change to alg/gdalwarpkernel_opencl.c to get
>> it to build without a build option error.
>>
>> @@ -1168,7 +1168,7 @@
>>
>>      //Assemble the compiler arg string for speed. All invariants
>> should be defined here.
>>      sprintf(buffer, "-cl-fast-relaxed-math -Werror -D FALSE=0 -D
>> TRUE=1 "
>> -            "%s "
>> +            "%s"
>>              "-D iSrcWidth=%d -D iSrcHeight=%d -D iDstWidth=%d -D
>> iDstHeight=%d "
>>              "-D useUnifiedSrcDensity=%d -D useUnifiedSrcValid=%d "
>>              "-D useDstDensity=%d -D useDstValid=%d -D useImag=%d "
>> @@ -1176,9 +1176,9 @@
>>              "-D nXRadius=%d -D nYRadius=%d -D nFiltInitX=%d -D
>> nFiltInitY=%d "
>>              "-D PI=%015.15lff -D outType=%s -D dstMinVal= 
>> %015.15lff -
>> D dstMaxVal=%015.15lff "
>>              "-D useDstNoDataReal=%d -D vecf=%s %s -D doCubicSpline=
>> %d "
>> -            "-D useUseBandSrcValid=%d -D iCoordMult=%d",
>> +            "-D useUseBandSrcValid=%d -D iCoordMult=%d ",
>>              /* FIXME: Is it really a ATI specific thing ? */
>> -            (warper->imageFormat == CL_FLOAT && warper->bIsATI) ?  
>> "-D
>> USE_CLAMP_TO_DST_FLOAT=1" : "",
>> +            (warper->imageFormat == CL_FLOAT && warper->bIsATI) ?  
>> "-D
>> USE_CLAMP_TO_DST_FLOAT=1 " : "",
>>              warper->srcWidth, warper->srcHeight, warper->dstWidth,
>> warper->dstHeight,
>>              warper->useUnifiedSrcDensity, warper- 
>> >useUnifiedSrcValid,
>>              warper->useDstDensity, warper->useDstValid, warper-
>>
>>> imagWorkCL != NULL,
>
> Which error did you get ? You are just changing some whitespace  
> change that
> seem to be equivalent to the trunk code. Or do I miss something ?
>
>>
>> **** After doing all of the above to make things compile, I don't get
>> the bug described below. I'm working off of the latest trunk daily.
>
> Yeah, that's probably an issue with the ATI SDK.
>
>>
>> ~Seth
>>
>> On Dec 8, 2010, at 1:12 PM, Even Rouault wrote:
>>> Seth,
>>>
>>> Thanks for your help.
>>>
>>>> It's more than a little strange that none of those image sizes  
>>>> work.
>>>> Perhaps it's a problem with the image format? Can you verify that  
>>>> the
>>>> given format should work?
>>>
>>> The image format was CL_UNORM_INT8 (for GDT_Byte)
>>>
>>>> Looking at the spec, it might also be a problem with the 'sz'
>>>> argument. What value is that passing?
>>>
>>> It's 1.
>>>
>>> I managed to found the following workaround that enables gdalwarp to
>>> complete
>>> (see http://trac.osgeo.org/gdal/changeset/21220  that basically
>>> passes a dummy
>>> buffer instead of a NULL pointer).
>>>
>>> However the visual result of the warping is really poor. I see 4
>>> "ghost"
>>> images shifted.
>>>
>>> For better understanding I've attached the source image
>>> (small_world_b1.tif)
>>> and the result of bilinear resampling (but I get similar weird
>>> visual effects
>>> with cubic, cubic spline or lanczos)
>>>
>>> gdalwarp  -rb small_world_b1.tif out_bilinear.tif
>>>
>>> Best regards,
>>>
>>> Even
>>> <small_world_b1.tif><out_bilinear.tif>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101217/10330167/attachment-0001.html
From even.rouault at mines-paris.org  Fri Dec 17 18:31:05 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 17 18:32:08 2010
Subject: [gdal-dev] Re: OpenCL, GDAL, and You
In-Reply-To: <8E90D340-8B2A-4D20-9169-D6543D5DE286@pricepages.org>
References: <88890516-6689-41C4-8577-1524F699AF12@pricepages.org>
	<201012172354.06303.even.rouault@mines-paris.org>
	<8E90D340-8B2A-4D20-9169-D6543D5DE286@pricepages.org>
Message-ID: <201012180031.05380.even.rouault@mines-paris.org>

Le samedi 18 d?cembre 2010 00:09:44, Seth Price a ?crit :
> > I can't help for MacOS build system.
> 
> Good thing I'm here. :) Do you want an account on my machine for
> testing?

well, we can try, but do a full backup before I break things due to my Mac 
illiteracy ;-)

> 
> > It's me. You can find the culprit of any commit by doing a svn blame
> > or looking
> > at the log ;-)
> 
> Most of that clampToDst() code was brought over from
> GWKSetPixelValue(). I'm not sure if it's a good idea to remove it. The
> original .cpp file should be the same as the new OpenCL code/. My goal
> is to make the code execution identical so I don't need to do any post-
> processing of pixels when I copy them out of OpenCL memory.

If you actually look at the GWKSetPixelValue() code, you'll see that the 
GDT_Float32 has a very special implementation (actually, that's the integer 
cases that have a very special implementation), which doesn't do the clamping 
done for the integer case, so it's legitimate to find the same distinction in 
the OpenCL code.

> 
> > Which error did you get ? You are just changing some whitespace
> > change that
> > seem to be equivalent to the trunk code. Or do I miss something ?
> 
> I was getting a weird build options error that seems to be caused by
> an extra space. So you're right that it's a whitespace change, but
> it's non-trivial.

ok, I've just applied your change. It didn't hurt on my side.

> ~Seth
> 
> On Dec 17, 2010, at 3:54 PM, Even Rouault wrote:
> > Le vendredi 17 d?cembre 2010 23:41:53, Seth Price a ?crit :
> >> I'm working on the trunk OpenCL build on my Mac now.
> >> 
> >> ****** First, on my mac I get an error at the end of make:
> >> [...] ./ogr/.libs/ogr_srs_xml.o ./ogr/.libs/ograssemblepolygon.o ./
> >> ogr/.libs/ogr2gmlgeometry.o ./ogr/.libs/gml2ogrgeometry.o ./
> >> ogr/.libs/
> >> ogr_expat.o   /opt/local/lib/libsqlite3.dylib -L/opt/local/lib -L/
> >> usr/
> >> local/lib /usr/local/lib/libexpat.dylib /usr/local/lib/
> >> libjpeg.dylib /
> >> usr/local/lib/libtiff.dylib /usr/local/lib/libpng12.dylib -lpthread -
> >> ldl /opt/local/lib/libcurl.dylib /opt/local/lib/libidn.dylib -lssl -
> >> lcrypto -lz -lOpenCL    -install_name  /usr/local/lib/libgdal.
> >> 1.dylib -
> >> compatibility_version 16 -current_version 16.0 -Wl,-single_module
> >> ld: library not found for -lOpenCL
> >> collect2: ld returned 1 exit status
> >> make[1]: *** [libgdal.la] Error 1
> >> make: *** [check-lib] Error 2
> >> seth:gdal-svn-trunk-2010.12.17 sprice$
> >> 
> >> To fix this, I changed "OPENCL_LIB      =       -lOpenCL" to
> >> "OPENCL_LIB      =       -framework OpenCL" in GDALMmake.opt.
> > 
> > I can't help for MacOS build system.
> > 
> >> *****  Why is USE_CLAMP_TO_DST_FLOAT in there? I would think that is
> >> required even if it isn't on ATI. I'm not sure who inserted its use,
> >> but I'm just wondering if the reasoning is documented somewhere.
> > 
> > It's me. You can find the culprit of any commit by doing a svn blame
> > or looking
> > at the log ;-)
> > 
> > The reasoning was that I observed with my ATI card that float
> > buffers didn't get
> > to be multiplied by FLT_MAX. The values weren't normalized between 0
> > and 1,
> > but had directly the expected value. (in the float case, I also
> > dropped the
> > rounding to nearest integer which is clearly not desired, and not in
> > the CPU
> > implementation)
> > 
> > This is perhaps also needed for NVidia, but I have no way to check,
> > so I just
> > put the condition you saw. If you can check this is unneeded, the
> > condition
> > can go away.
> > 
> >> ***** I had to make this change to alg/gdalwarpkernel_opencl.c to get
> >> it to build without a build option error.
> >> 
> >> @@ -1168,7 +1168,7 @@
> >> 
> >>      //Assemble the compiler arg string for speed. All invariants
> >> 
> >> should be defined here.
> >> 
> >>      sprintf(buffer, "-cl-fast-relaxed-math -Werror -D FALSE=0 -D
> >> 
> >> TRUE=1 "
> >> -            "%s "
> >> +            "%s"
> >> 
> >>              "-D iSrcWidth=%d -D iSrcHeight=%d -D iDstWidth=%d -D
> >> 
> >> iDstHeight=%d "
> >> 
> >>              "-D useUnifiedSrcDensity=%d -D useUnifiedSrcValid=%d "
> >>              "-D useDstDensity=%d -D useDstValid=%d -D useImag=%d "
> >> 
> >> @@ -1176,9 +1176,9 @@
> >> 
> >>              "-D nXRadius=%d -D nYRadius=%d -D nFiltInitX=%d -D
> >> 
> >> nFiltInitY=%d "
> >> 
> >>              "-D PI=%015.15lff -D outType=%s -D dstMinVal=
> >> 
> >> %015.15lff -
> >> D dstMaxVal=%015.15lff "
> >> 
> >>              "-D useDstNoDataReal=%d -D vecf=%s %s -D doCubicSpline=
> >> 
> >> %d "
> >> -            "-D useUseBandSrcValid=%d -D iCoordMult=%d",
> >> +            "-D useUseBandSrcValid=%d -D iCoordMult=%d ",
> >> 
> >>              /* FIXME: Is it really a ATI specific thing ? */
> >> 
> >> -            (warper->imageFormat == CL_FLOAT && warper->bIsATI) ?
> >> "-D
> >> USE_CLAMP_TO_DST_FLOAT=1" : "",
> >> +            (warper->imageFormat == CL_FLOAT && warper->bIsATI) ?
> >> "-D
> >> USE_CLAMP_TO_DST_FLOAT=1 " : "",
> >> 
> >>              warper->srcWidth, warper->srcHeight, warper->dstWidth,
> >> 
> >> warper->dstHeight,
> >> 
> >>              warper->useUnifiedSrcDensity, warper-
> >> >
> >> >useUnifiedSrcValid,
> >> >
> >>              warper->useDstDensity, warper->useDstValid, warper-
> >>> 
> >>> imagWorkCL != NULL,
> > 
> > Which error did you get ? You are just changing some whitespace
> > change that
> > seem to be equivalent to the trunk code. Or do I miss something ?
> > 
> >> **** After doing all of the above to make things compile, I don't get
> >> the bug described below. I'm working off of the latest trunk daily.
> > 
> > Yeah, that's probably an issue with the ATI SDK.
> > 
> >> ~Seth
> >> 
> >> On Dec 8, 2010, at 1:12 PM, Even Rouault wrote:
> >>> Seth,
> >>> 
> >>> Thanks for your help.
> >>> 
> >>>> It's more than a little strange that none of those image sizes
> >>>> work.
> >>>> Perhaps it's a problem with the image format? Can you verify that
> >>>> the
> >>>> given format should work?
> >>> 
> >>> The image format was CL_UNORM_INT8 (for GDT_Byte)
> >>> 
> >>>> Looking at the spec, it might also be a problem with the 'sz'
> >>>> argument. What value is that passing?
> >>> 
> >>> It's 1.
> >>> 
> >>> I managed to found the following workaround that enables gdalwarp to
> >>> complete
> >>> (see http://trac.osgeo.org/gdal/changeset/21220  that basically
> >>> passes a dummy
> >>> buffer instead of a NULL pointer).
> >>> 
> >>> However the visual result of the warping is really poor. I see 4
> >>> "ghost"
> >>> images shifted.
> >>> 
> >>> For better understanding I've attached the source image
> >>> (small_world_b1.tif)
> >>> and the result of bilinear resampling (but I get similar weird
> >>> visual effects
> >>> with cubic, cubic spline or lanczos)
> >>> 
> >>> gdalwarp  -rb small_world_b1.tif out_bilinear.tif
> >>> 
> >>> Best regards,
> >>> 
> >>> Even
> >>> <small_world_b1.tif><out_bilinear.tif>
From warmerdam at pobox.com  Fri Dec 17 19:09:28 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Dec 17 19:09:35 2010
Subject: [gdal-dev] Motion: Commit Access for Kirk McKelvey
Message-ID: <4D0BFBB8.8060006@pobox.com>

Folks,

Motion: Extend Commit Priveledges for Kirk McKelvey.

Kirk is a software developer at Lizardtech and has been workin with GDAL
for a number of years.  He has proposed some patches to upgrade to version
8 of the MrSID SDK and to fix up a few other things:

   http://trac.osgeo.org/gdal/attachment/ticket/3839/mrsid-v8.patch

He has offered to become a commiter in order to better maintain the MrSID
driver in GDAL on an ongoing basis and I'd love that.  He might also
assist with other fixes of value to Lizardtech.

I'll start the motion with:

+1 Frank

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From kmckelvey at lizardtech.com  Fri Dec 17 20:11:52 2010
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Fri Dec 17 20:11:55 2010
Subject: [gdal-dev] Motion: Commit Access for Kirk McKelvey
In-Reply-To: <4D0BFBB8.8060006@pobox.com>
References: <4D0BFBB8.8060006@pobox.com>
Message-ID: <C55473998E248B4DAEC5342D698DFE850100C186A9@sea-srv-mail.lizardtech.com>

For the record, I have read RFC 3 and am happy to abide by it.

-----Message d'origine-----
De?: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] De la part de Frank Warmerdam
Envoy??: Friday, December 17, 2010 4:09 PM
??: gdal-dev
Objet?: [gdal-dev] Motion: Commit Access for Kirk McKelvey

Folks,

Motion: Extend Commit Priveledges for Kirk McKelvey.

Kirk is a software developer at Lizardtech and has been workin with GDAL
for a number of years.  He has proposed some patches to upgrade to version
8 of the MrSID SDK and to fix up a few other things:

   http://trac.osgeo.org/gdal/attachment/ticket/3839/mrsid-v8.patch

He has offered to become a commiter in order to better maintain the MrSID
driver in GDAL on an ongoing basis and I'd love that.  He might also
assist with other fixes of value to Lizardtech.

I'll start the motion with:

+1 Frank

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From hobu.inc at gmail.com  Fri Dec 17 21:51:04 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Fri Dec 17 21:51:09 2010
Subject: [gdal-dev] Motion: Commit Access for Kirk McKelvey
In-Reply-To: <4D0BFBB8.8060006@pobox.com>
References: <4D0BFBB8.8060006@pobox.com>
Message-ID: <4D8C318F-5547-4133-8A85-078F226E87C5@gmail.com>


On Dec 17, 2010, at 6:09 PM, Frank Warmerdam wrote:

> Folks,
> 
> Motion: Extend Commit Priveledges for Kirk McKelvey.
> 
> Kirk is a software developer at Lizardtech and has been workin with GDAL
> for a number of years.  He has proposed some patches to upgrade to version
> 8 of the MrSID SDK and to fix up a few other things:
> 
>  http://trac.osgeo.org/gdal/attachment/ticket/3839/mrsid-v8.patch
> 
> He has offered to become a commiter in order to better maintain the MrSID
> driver in GDAL on an ongoing basis and I'd love that.  He might also
> assist with other fixes of value to Lizardtech.
> 
> I'll start the motion with:
> 
> +1 Frank

+1 Howard

From even.rouault at mines-paris.org  Sat Dec 18 06:50:18 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Dec 18 06:50:26 2010
Subject: [gdal-dev] Motion: Commit Access for Kirk McKelvey
In-Reply-To: <4D0BFBB8.8060006@pobox.com>
References: <4D0BFBB8.8060006@pobox.com>
Message-ID: <201012181250.18476.even.rouault@mines-paris.org>

Le samedi 18 d?cembre 2010 01:09:28, Frank Warmerdam a ?crit :
> Folks,
> 
> Motion: Extend Commit Priveledges for Kirk McKelvey.
> 
+1 Even
From christian.mueller at nvoe.at  Sat Dec 18 08:31:21 2010
From: christian.mueller at nvoe.at (christian.mueller@nvoe.at)
Date: Sat Dec 18 08:31:31 2010
Subject: [gdal-dev] Performance improvment for gdal_retile
Message-ID: <20101218143121.1ujribcchwgk4k8o@webmail.nvoe.at>

Some last comment about the test case, the current source checks

test_gdal_retile_2()

ds.GetRasterBand(4).Checksum() != 35
ds.GetRasterBand(4).Checksum() != 35

If I run this on a Linux Intel 32 bit configuration, it has to be

ds.GetRasterBand(4).Checksum() != 283
ds.GetRasterBand(4).Checksum() != 122

Doing the same on a Linux AMD 64 Bit configuration, the values should be

ds.GetRasterBand(4).Checksum() != 283
ds.GetRasterBand(4).Checksum() != 126

It seems that the cecksum is dependent on the  platform. Is this  
desirable ? Could this cause some headaches later ?

Cheers
Christian




----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From jluis at ualg.pt  Sat Dec 18 08:40:13 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Sat Dec 18 08:40:54 2010
Subject: [gdal-dev] Re: OpenCL, GDAL, and You
In-Reply-To: <9B194ACD-4936-43A7-8638-A16E684EAF93@pricepages.org>
References: <88890516-6689-41C4-8577-1524F699AF12@pricepages.org>	<201012070801.42043.even.rouault@mines-paris.org>	<D7652E8D-2E2A-4DCF-AA6F-978E80CA0F19@pricepages.org>	<201012082112.04629.even.rouault@mines-paris.org>
	<9B194ACD-4936-43A7-8638-A16E684EAF93@pricepages.org>
Message-ID: <4D0CB9BD.1030705@ualg.pt>

Hi,

Gave this a try on Windows (relatively simple to build) with CUDA and 
indeed the difference in speed is big.
Petty that the result is quite broken.

My test was with this projection

gdalwarp -t_srs +proj=sinu mundo.tiff lixo32.tiff


Joaquim

> I'm working on the trunk OpenCL build on my Mac now.
>
> ****** First, on my mac I get an error at the end of make:
> [...] ./ogr/.libs/ogr_srs_xml.o ./ogr/.libs/ograssemblepolygon.o 
> ./ogr/.libs/ogr2gmlgeometry.o ./ogr/.libs/gml2ogrgeometry.o 
> ./ogr/.libs/ogr_expat.o   /opt/local/lib/libsqlite3.dylib 
> -L/opt/local/lib -L/usr/local/lib /usr/local/lib/libexpat.dylib 
> /usr/local/lib/libjpeg.dylib /usr/local/lib/libtiff.dylib 
> /usr/local/lib/libpng12.dylib -lpthread -ldl 
> /opt/local/lib/libcurl.dylib /opt/local/lib/libidn.dylib -lssl 
> -lcrypto -lz -lOpenCL    -install_name  /usr/local/lib/libgdal.1.dylib 
> -compatibility_version 16 -current_version 16.0 -Wl,-single_module
> ld: library not found for -lOpenCL
> collect2: ld returned 1 exit status
> make[1]: *** [libgdal.la] Error 1
> make: *** [check-lib] Error 2
> seth:gdal-svn-trunk-2010.12.17 sprice$
>
> To fix this, I changed "OPENCL_LIB      =       -lOpenCL" to 
> "OPENCL_LIB      =       -framework OpenCL" in GDALMmake.opt.
>
> *****  Why is USE_CLAMP_TO_DST_FLOAT in there? I would think that is 
> required even if it isn't on ATI. I'm not sure who inserted its use, 
> but I'm just wondering if the reasoning is documented somewhere.
>
> ***** I had to make this change to alg/gdalwarpkernel_opencl.c to get 
> it to build without a build option error.
>
> @@ -1168,7 +1168,7 @@
>      //Assemble the compiler arg string for speed. All invariants 
> should be defined here.
>      sprintf(buffer, "-cl-fast-relaxed-math -Werror -D FALSE=0 -D TRUE=1 "
> -            "%s "
> +            "%s"
>              "-D iSrcWidth=%d -D iSrcHeight=%d -D iDstWidth=%d -D 
> iDstHeight=%d "
>              "-D useUnifiedSrcDensity=%d -D useUnifiedSrcValid=%d "
>              "-D useDstDensity=%d -D useDstValid=%d -D useImag=%d "
> @@ -1176,9 +1176,9 @@
>              "-D nXRadius=%d -D nYRadius=%d -D nFiltInitX=%d -D 
> nFiltInitY=%d "
>              "-D PI=%015.15lff -D outType=%s -D dstMinVal=%015.15lff 
> -D dstMaxVal=%015.15lff "
>              "-D useDstNoDataReal=%d -D vecf=%s %s -D doCubicSpline=%d "
> -            "-D useUseBandSrcValid=%d -D iCoordMult=%d",
> +            "-D useUseBandSrcValid=%d -D iCoordMult=%d ",
>              /* FIXME: Is it really a ATI specific thing ? */
> -            (warper->imageFormat == CL_FLOAT && warper->bIsATI) ? "-D 
> USE_CLAMP_TO_DST_FLOAT=1" : "",
> +            (warper->imageFormat == CL_FLOAT && warper->bIsATI) ? "-D 
> USE_CLAMP_TO_DST_FLOAT=1 " : "",
>              warper->srcWidth, warper->srcHeight, warper->dstWidth, 
> warper->dstHeight,
>              warper->useUnifiedSrcDensity, warper->useUnifiedSrcValid,
>              warper->useDstDensity, warper->useDstValid, 
> warper->imagWorkCL != NULL,
>
> **** After doing all of the above to make things compile, I don't get 
> the bug described below. I'm working off of the latest trunk daily.
>
> ~Seth
>
>
> On Dec 8, 2010, at 1:12 PM, Even Rouault wrote:
>
>> Seth,
>>
>> Thanks for your help.
>>
>>> It's more than a little strange that none of those image sizes work.
>>> Perhaps it's a problem with the image format? Can you verify that the
>>> given format should work?
>>
>> The image format was CL_UNORM_INT8 (for GDT_Byte)
>>
>>>
>>> Looking at the spec, it might also be a problem with the 'sz'
>>> argument. What value is that passing?
>>
>> It's 1.
>>
>> I managed to found the following workaround that enables gdalwarp to 
>> complete
>> (see http://trac.osgeo.org/gdal/changeset/21220  that basically 
>> passes a dummy
>> buffer instead of a NULL pointer).
>>
>> However the visual result of the warping is really poor. I see 4 "ghost"
>> images shifted.
>>
>> For better understanding I've attached the source image 
>> (small_world_b1.tif)
>> and the result of bilinear resampling (but I get similar weird visual 
>> effects
>> with cubic, cubic spline or lanczos)
>>
>> gdalwarp  -rb small_world_b1.tif out_bilinear.tif
>>
>> Best regards,
>>
>> Even
>> <small_world_b1.tif><out_bilinear.tif>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101218/7f319e25/attachment-0001.html
From even.rouault at mines-paris.org  Sat Dec 18 08:46:08 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Dec 18 08:46:16 2010
Subject: [gdal-dev] Re: Performance improvment for gdal_retile
In-Reply-To: <20101218143121.1ujribcchwgk4k8o@webmail.nvoe.at>
References: <20101218143121.1ujribcchwgk4k8o@webmail.nvoe.at>
Message-ID: <201012181446.08082.even.rouault@mines-paris.org>

Le samedi 18 d?cembre 2010 14:31:21, christian.mueller@nvoe.at a ?crit :
> Some last comment about the test case, the current source checks
> 
> test_gdal_retile_2()
> 
> ds.GetRasterBand(4).Checksum() != 35
> ds.GetRasterBand(4).Checksum() != 35
> 
> If I run this on a Linux Intel 32 bit configuration, it has to be
> 
> ds.GetRasterBand(4).Checksum() != 283
> ds.GetRasterBand(4).Checksum() != 122
> 
> Doing the same on a Linux AMD 64 Bit configuration, the values should be
> 
> ds.GetRasterBand(4).Checksum() != 283
> ds.GetRasterBand(4).Checksum() != 126
> 
> It seems that the cecksum is dependent on the  platform. Is this
> desirable ? Could this cause some headaches later ?

Yes, this is a bit annoying.

I guess this is related to some compiler difference that impacts numerical 
precision with the bilinear resampling. What is your OS and compiler versions 
? Do you compile in debug or optimized mode ? Do you use your script against 
GDAL trunk, or do you use it against GDAL 1.7 ?

35 works for me on Ubuntu 10.04 64bits, and it also works on all Windows 
builds of Tamas (http://vbkto.dyndns.org/sdk/) that test 7 combinations of 
32/64 bit and MSVC 1310, 1400, 1500 and 1600.

> 
> Cheers
> Christian
> 
> 
> 
> 
> ----------------------------------------------------------------
> This message was sent using IMP, the Internet Messaging Program.
From christian.mueller at nvoe.at  Sat Dec 18 09:00:24 2010
From: christian.mueller at nvoe.at (christian.mueller@nvoe.at)
Date: Sat Dec 18 09:00:39 2010
Subject: [gdal-dev] Re: Performance improvment for gdal_retile
In-Reply-To: <201012181446.08082.even.rouault@mines-paris.org>
References: <20101218143121.1ujribcchwgk4k8o@webmail.nvoe.at>
	<201012181446.08082.even.rouault@mines-paris.org>
Message-ID: <20101218150024.76t0jkylgkgo0coc@webmail.nvoe.at>

Ah, things get complicated :-(. I am working on openSUSE 11.3, 32 Bit  
and Ubuntu 10.10 64 Bit. Additionally, I have SUSE Linux Enterprise on  
IBM pSeries and IBM zSeries (Mainframe). Some times I even use gdal on  
AIX.

I compile against gdal 1.7, no debug mode.

The important fact is that your builds work.

What about checking the check sum against a list of possible values ?

I have developed some test cases for my own and thought about  
integrating them into test_gdal_retile.py.  Unfortunately this is not  
be possible if I use checksums because I cannot produce the correct  
numbers.

For the moment, we can leave it as it is.

Christian



Quoting Even Rouault <even.rouault@mines-paris.org>:

> Le samedi 18 d?cembre 2010 14:31:21, christian.mueller@nvoe.at a ?crit :
>> Some last comment about the test case, the current source checks
>>
>> test_gdal_retile_2()
>>
>> ds.GetRasterBand(4).Checksum() != 35
>> ds.GetRasterBand(4).Checksum() != 35
>>
>> If I run this on a Linux Intel 32 bit configuration, it has to be
>>
>> ds.GetRasterBand(4).Checksum() != 283
>> ds.GetRasterBand(4).Checksum() != 122
>>
>> Doing the same on a Linux AMD 64 Bit configuration, the values should be
>>
>> ds.GetRasterBand(4).Checksum() != 283
>> ds.GetRasterBand(4).Checksum() != 126
>>
>> It seems that the cecksum is dependent on the  platform. Is this
>> desirable ? Could this cause some headaches later ?
>
> Yes, this is a bit annoying.
>
> I guess this is related to some compiler difference that impacts numerical
> precision with the bilinear resampling. What is your OS and compiler versions
> ? Do you compile in debug or optimized mode ? Do you use your script against
> GDAL trunk, or do you use it against GDAL 1.7 ?
>
> 35 works for me on Ubuntu 10.04 64bits, and it also works on all Windows
> builds of Tamas (http://vbkto.dyndns.org/sdk/) that test 7 combinations of
> 32/64 bit and MSVC 1310, 1400, 1500 and 1600.
>
>>
>> Cheers
>> Christian
>>
>>
>>
>>
>> ----------------------------------------------------------------
>> This message was sent using IMP, the Internet Messaging Program.
>



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From heng.feng at aircominternational.com  Sat Dec 18 09:21:18 2010
From: heng.feng at aircominternational.com (heng.feng)
Date: Sat Dec 18 09:21:20 2010
Subject: [gdal-dev] An issue about using GDALWARP to do the
	NTv2transformation
In-Reply-To: <C3257D068EB03E4498BAC3A96344256803B2A92561@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
References: <1292466248833-5838904.post@n2.nabble.com>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB14@sebulba.bezreg-koeln.nrw.de>
	<C3257D068EB03E4498BAC3A96344256803B2A92561@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
Message-ID: <1292682078901-5848200.post@n2.nabble.com>


http://osgeo-org.1803224.n2.nabble.com/file/n5848200/gdalwarp_problem1.doc
gdalwarp_problem1.doc 
Hi Uwe,

I have tried your suggestion on the same raster file with a modified
"+x_0=500000" parameter in the command line (as seen in the attached doc). I
could see the major difference:there is still one error message left. When I
tried on another raster file with the same modified parameter, I have got
much less error messages than before. However, is it still possible that my
raster data are outside the area of the grid shift file? All the raster data
I was trying to transform are GK (DHDN) zone 4, which false easting value is
4500000. This was why I used "+x_0=4500000" instead of "+x_0=500000" in the
command line. As I am getting to know all these georeference settings at the
moment, can you tell me why you suggested the modified parameter and what
you meant about "raster data lacks the Gauss-Krueger meridian prefix"?

Thanks for your help again.

Best Regards,
Heng
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/An-issue-about-using-GDALWARP-to-do-the-NTv2-transformation-tp5838904p5848200.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From szekerest at gmail.com  Sat Dec 18 15:03:42 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat Dec 18 15:09:03 2010
Subject: [gdal-dev] Motion: Commit Access for Kirk McKelvey
In-Reply-To: <4D0BFBB8.8060006@pobox.com>
References: <4D0BFBB8.8060006@pobox.com>
Message-ID: <AANLkTinpQdai0htsrf9LxuayuTfm1apmSG4s1XfdFeZc@mail.gmail.com>

+1

Tamas



2010/12/18 Frank Warmerdam <warmerdam@pobox.com>

> Folks,
>
> Motion: Extend Commit Priveledges for Kirk McKelvey.
>
> Kirk is a software developer at Lizardtech and has been workin with GDAL
> for a number of years.  He has proposed some patches to upgrade to version
> 8 of the MrSID SDK and to fix up a few other things:
>
>  http://trac.osgeo.org/gdal/attachment/ticket/3839/mrsid-v8.patch
>
> He has offered to become a commiter in order to better maintain the MrSID
> driver in GDAL on an ongoing basis and I'd love that.  He might also
> assist with other fixes of value to Lizardtech.
>
> I'll start the motion with:
>
> +1 Frank
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101218/dbc36a1e/attachment.html
From spiderplant0 at gmail.com  Sun Dec 19 07:31:52 2010
From: spiderplant0 at gmail.com (spider plant)
Date: Sun Dec 19 07:31:56 2010
Subject: [gdal-dev] gdalwarp generating incorrect coordinates
Message-ID: <AANLkTimxOAJTn=GnUQvob1dreLLdqJQfVBF29bH-rtHF@mail.gmail.com>

Hi, I have georeferenced an image with gdal_translate and then reprojected
it from OSGB36 to googleMaps with gdalwarp.
However the warped TIFF latitude/longitude coordinates are wrong.
The re-projection appears to stretch the map correctly, but I discovered
there was a problem when I ran gdal2tiles and the map was not aligned
correctly.

For the georeferenced file, buckland.tiff, here.....
https://docs.google.com/leaf?id=0B93lksnTC7_cNTg3OGU0MTEtNjNiMC00NWM5LTg5ZjQtMmQyNDIzNmM5NGE5

According to gdalinfo the coordinates of the lower-left corner are:
easting=241538.5, northing=119812
This corresponds to a latitude of 50.955887

I then run the warping as follows...
gdalwarp.exe -s_srs EPSG:27700 -t_srs EPSG:900913 -r cubic -of GTiff
buckland.tiff buckland_warped.tiff
..and according to gdalinfo the coordinates of the lower-left corner are:
4d15'30.51"W, 51d 8'38.06"N
I.e. a latitude of 51.143906 which is miles off (infact no latitude on the
map is near this value). It should be 50.955887.
Warped file, buckland_warped.tiff, is here....
https://docs.google.com/leaf?id=0B93lksnTC7_cNzIzZWQ0MDYtMTY5Yy00NjY0LThiMjktZjc2YzA3MmU5NjI4

When I run gdal2tiles directly on the unwarped map it does it correctly but
it is not very good quality (it doesnt seem to use such a good pixel
interpolation as gdalwarp).

Does this look like a bug in gdalwarp or am I doing something stupid.

I'm using gdal16 from osgeo4w on Windows 7 64-bit.

Output of gdalinfo on the georeferenced and warped images is below.
Thanks


BUCKLAND.TIFF...
C:\OSGeo4W\apps\gdal-16\bin>gdalinfo e:buckland.tiff
Driver: GTiff/GeoTIFF
Files: e:buckland.tiff
Size is 600, 400
Coordinate System is `'
GCP Projection = PROJCS["OSGB 1936 / British National Grid",GEOGCS["OSGB
1936",DATUM["OSGB_1936",SPHEROID["Airy 1830",63
77563.396,299.3249646000044,AUTHORITY["EPSG","7001"]],AUTHORITY["EPSG","6277"]],PRIMEM["Greenwich",0],UNIT["degree",0.01
74532925199433],AUTHORITY["EPSG","4277"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",49],PARAMETER
["central_meridian",-2],PARAMETER["scale_factor",0.9996012717],PARAMETER["false_easting",400000],PARAMETER["false_northi
ng",-100000],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","27700"]]
GCP[  0]: Id=1, Info=
          (0,400) -> (241538.5,119812,0)
GCP[  1]: Id=2, Info=
          (600,0) -> (244713.5,121928.66666667,0)
GCP[  2]: Id=3, Info=
          (0,0) -> (241538.5,121928.66666667,0)
GCP[  3]: Id=4, Info=
          (600,400) -> (244713.5,119812,0)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  400.0)
Upper Right (  600.0,    0.0)
Lower Right (  600.0,  400.0)
Center      (  300.0,  200.0)
Band 1 Block=600x3 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA
Band 2 Block=600x3 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA
Band 3 Block=600x3 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA
Band 4 Block=600x3 Type=Byte, ColorInterp=Alpha


BUCKLAND_WARPED.TIFF...
C:\OSGeo4W\apps\gdal-16\bin>gdalinfo e:buckland_WARPED.tiff
Driver: GTiff/GeoTIFF
Files: e:buckland_WARPED.tiff
Size is 611, 419
Coordinate System is:
PROJCS["Google Maps Global Mercator",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Mercator_1SP"],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-474051.292871501410000,6617009.987366309400000)
Pixel Size = (8.392224865731517,-8.392224865731517)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  ( -474051.293, 6617009.987) (  4d15'30.51"W, 51d 9'49.57"N)
Lower Left  ( -474051.293, 6613493.645) (  4d15'30.51"W, 51d 8'38.06"N)
Upper Right ( -468923.643, 6617009.987) (  4d12'44.69"W, 51d 9'49.57"N)
Lower Right ( -468923.643, 6613493.645) (  4d12'44.69"W, 51d 8'38.06"N)
Center      ( -471487.468, 6615251.816) (  4d14'7.60"W, 51d 9'13.82"N)
Band 1 Block=611x3 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA
Band 2 Block=611x3 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA
Band 3 Block=611x3 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA
Band 4 Block=611x3 Type=Byte, ColorInterp=Alpha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101219/61549b1b/attachment.html
From jrepetto at free.fr  Sun Dec 19 13:17:13 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Sun Dec 19 13:17:21 2010
Subject: [gdal-dev] gdalwarp generating incorrect coordinates
In-Reply-To: <AANLkTimxOAJTn=GnUQvob1dreLLdqJQfVBF29bH-rtHF@mail.gmail.com>
References: <AANLkTimxOAJTn=GnUQvob1dreLLdqJQfVBF29bH-rtHF@mail.gmail.com>
Message-ID: <4D0E4C29.3000303@free.fr>

On 12/19/10 13:31, spider plant wrote:

>
> Does this look like a bug in gdalwarp or am I doing something stupid.

The lower-left corners of the two images are not the same point, so you 
can't compare them. You must choose a known point, and compare its 
coordinates on both maps.

Jean-Claude

From spiderplant0 at gmail.com  Sun Dec 19 13:43:27 2010
From: spiderplant0 at gmail.com (spiderplant0)
Date: Sun Dec 19 13:43:28 2010
Subject: [gdal-dev] gdalwarp generating incorrect coordinates
Message-ID: <1292784207261-5850102.post@n2.nabble.com>


(re-posting as question didnt appear first time)

Hi, I have georeferenced an image with gdal_translate and then reprojected
it from OSGB36 to googleMaps with gdalwarp.
However the warped TIFF latitude/longitude coordinates are wrong.
The re-projection appears to stretch the map correctly, but I discovered
there was a problem when I ran gdal2tiles and the map was not aligned
correctly.

For the georeferenced file, buckland.tiff, here.....
https://docs.google.com/leaf?id=0B93lksnTC7_cNTg3OGU0MTEtNjNiMC00NWM5LTg5ZjQtMmQyNDIzNmM5NGE5
https://docs.google.com/leaf?id=0B93lksnTC7_cNTg3OGU0MTEtNjNiMC00NWM5LTg5ZjQtMmQyNDIzNmM5NGE5 

According to gdalinfo the coordinates of the lower-left corner are:
easting=241538.5, northing=119812
This corresponds to a latitude of 50.955887

I then run the warping as follows...
gdalwarp.exe -s_srs EPSG:27700 -t_srs EPSG:900913 -r cubic -of GTiff
buckland.tiff buckland_warped.tiff
..and according to gdalinfo the coordinates of the lower-left corner are:
4d15'30.51"W, 51d 8'38.06"N
I.e. a latitude of 51.143906 which is miles off (infact no latitude on the
map is near this value). It should be 50.955887.
Warped file, buckland_warped.tiff, is here....
https://docs.google.com/leaf?id=0B93lksnTC7_cNzIzZWQ0MDYtMTY5Yy00NjY0LThiMjktZjc2YzA3MmU5NjI4
https://docs.google.com/leaf?id=0B93lksnTC7_cNzIzZWQ0MDYtMTY5Yy00NjY0LThiMjktZjc2YzA3MmU5NjI4 

When I run gdal2tiles directly on the unwarped map it does it correctly but
it is not very good quality (it doesnt seem to use such a good pixel
interpolation as gdalwarp).

Does this look like a bug in gdalwarp or am I doing something stupid.

I'm using gdal16 from osgeo4w on Windows 7 64-bit.

Output of gdalinfo on the georeferenced and warped images is below.
Thanks


BUCKLAND.TIFF...
C:\OSGeo4W\apps\gdal-16\bin>gdalinfo e:buckland.tiff
Driver: GTiff/GeoTIFF
Files: e:buckland.tiff
Size is 600, 400
Coordinate System is `'
GCP Projection = PROJCS["OSGB 1936 / British National Grid",GEOGCS["OSGB
1936",DATUM["OSGB_1936",SPHEROID["Airy 1830",63
77563.396,299.3249646000044,AUTHORITY["EPSG","7001"]],AUTHORITY["EPSG","6277"]],PRIMEM["Greenwich",0],UNIT["degree",0.01
74532925199433],AUTHORITY["EPSG","4277"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",49],PARAMETER
["central_meridian",-2],PARAMETER["scale_factor",0.9996012717],PARAMETER["false_easting",400000],PARAMETER["false_northi
ng",-100000],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","27700"]]
GCP[  0]: Id=1, Info=
          (0,400) -> (241538.5,119812,0)
GCP[  1]: Id=2, Info=
          (600,0) -> (244713.5,121928.66666667,0)
GCP[  2]: Id=3, Info=
          (0,0) -> (241538.5,121928.66666667,0)
GCP[  3]: Id=4, Info=
          (600,400) -> (244713.5,119812,0)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  400.0)
Upper Right (  600.0,    0.0)
Lower Right (  600.0,  400.0)
Center      (  300.0,  200.0)
Band 1 Block=600x3 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA
Band 2 Block=600x3 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA
Band 3 Block=600x3 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA
Band 4 Block=600x3 Type=Byte, ColorInterp=Alpha


BUCKLAND_WARPED.TIFF...
C:\OSGeo4W\apps\gdal-16\bin>gdalinfo e:buckland_WARPED.tiff
Driver: GTiff/GeoTIFF
Files: e:buckland_WARPED.tiff
Size is 611, 419
Coordinate System is:
PROJCS["Google Maps Global Mercator",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Mercator_1SP"],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-474051.292871501410000,6617009.987366309400000)
Pixel Size = (8.392224865731517,-8.392224865731517)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  ( -474051.293, 6617009.987) (  4d15'30.51"W, 51d 9'49.57"N)
Lower Left  ( -474051.293, 6613493.645) (  4d15'30.51"W, 51d 8'38.06"N)
Upper Right ( -468923.643, 6617009.987) (  4d12'44.69"W, 51d 9'49.57"N)
Lower Right ( -468923.643, 6613493.645) (  4d12'44.69"W, 51d 8'38.06"N)
Center      ( -471487.468, 6615251.816) (  4d14'7.60"W, 51d 9'13.82"N)
Band 1 Block=611x3 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA
Band 2 Block=611x3 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA
Band 3 Block=611x3 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA
Band 4 Block=611x3 Type=Byte, ColorInterp=Alpha
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdalwarp-generating-incorrect-coordinates-tp5850102p5850102.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From spiderplant0 at gmail.com  Sun Dec 19 13:52:07 2010
From: spiderplant0 at gmail.com (spider plant)
Date: Sun Dec 19 13:52:09 2010
Subject: [gdal-dev] gdalwarp generating incorrect coordinates
In-Reply-To: <4D0E4C29.3000303@free.fr>
References: <AANLkTimxOAJTn=GnUQvob1dreLLdqJQfVBF29bH-rtHF@mail.gmail.com>
	<4D0E4C29.3000303@free.fr>
Message-ID: <AANLkTin5aXTOrAaCMiVM-2-NVSv50eU02L1oBEzCbyiu@mail.gmail.com>

Hi Jean-Claude. Thanks for the reply.
The two lower-left corners are not the same but the Latitude is the same.
And in any case the two latitudes are about 20km apart and the map tile
itself is less than 2km high.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101219/a3933183/attachment.html
From yehil at rafael.co.il  Sun Dec 19 14:40:09 2010
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Sun Dec 19 14:40:33 2010
Subject: [gdal-dev] RE: Convert from GeoTiff to JP2
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C06AEDD33E4C@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C06AEDD33E4C@MAILBOXSERVER.rf.local>
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C06AEBE231AC@MAILBOXSERVER.rf.local>

Can anyone help?

________________________________________
From: Livneh Yehiyam
Sent: Thursday, December 02, 2010 10:51 AM
To: 'gdal-dev@lists.osgeo.org'
Subject: Convert from GeoTiff to JP2

Hi
I ran into a problem converting a GeoTiff to a Jpeg200 image, using gdal_translate and the JP2ECW driver.

My geotiff has GCP's as the georeference. Here is the output from gdalinfo:

Driver: GTiff/GeoTIFF
Files: 01122010-1509.tif
Size is 1680, 916
Coordinate System is `'
GCP Projection =
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["arc-second",4.848136811095361e-006],
    AUTHORITY["EPSG","4326"]]
GCP[  0]: Id=1, Info=
          (0,0) -> (126151.273546348,115626.820459333,0)
GCP[  1]: Id=2, Info=
          (0,916) -> (126145.399132411,115623.500933949,0)
GCP[  2]: Id=3, Info=
          (1680,916) -> (126151.213029255,115615.934065356,0)
GCP[  3]: Id=4, Info=
          (1680,0) -> (126157.194618444,115619.120192017,0)
Metadata:
  TIFFTAG_XRESOLUTION=1
  TIFFTAG_YRESOLUTION=1
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  916.0)
Upper Right ( 1680.0,    0.0)
Lower Right ( 1680.0,  916.0)
Center      (  840.0,  458.0)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue

after converting to jp2 using the command:
gdal_translate -of jp2ecw 01122010-1509.tif 01122010-1509.jp2

I get this from gdalinfo:
E:\Data\test>gdalinfo 01122010-1509.jp2
Driver: JP2ECW/ERMapper JPEG2000
Files: 01122010-1509.jp2
       01122010-1509.jp2.aux.xml
Size is 1680, 916
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
GCP Projection =
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
GCP[  0]: Id=1, Info=
          (0,0) -> (126151.273546348,115626.820459333,0)
GCP[  1]: Id=2, Info=
          (0,916) -> (126145.399132411,115623.500933949,0)
GCP[  2]: Id=3, Info=
          (1680,916) -> (126151.213029255,115615.934065356,0)
GCP[  3]: Id=4, Info=
          (1680,0) -> (126157.194618444,115619.120192017,0)
Metadata:
  TIFFTAG_XRESOLUTION=1
  TIFFTAG_YRESOLUTION=1
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  916.0)
Upper Right ( 1680.0,    0.0)
Lower Right ( 1680.0,  916.0)
Center      (  840.0,  458.0)
Band 1 Block=1680x1 Type=Byte, ColorInterp=Red
  Overviews: arbitrary
Band 2 Block=1680x1 Type=Byte, ColorInterp=Green
  Overviews: arbitrary
Band 3 Block=1680x1 Type=Byte, ColorInterp=Blue
  Overviews: arbitrary

I think the problem is that both projectionRef, and GCPProjection are defined. This causes Global Mapper to fail reading the geo-reference data.

Is it a known problem, or am I doing something wrong?

Thanks
Yehiyam Livneh
**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************

From warmerdam at pobox.com  Sun Dec 19 15:25:32 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Dec 19 15:26:01 2010
Subject: [gdal-dev] RE: Convert from GeoTiff to JP2
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C06AEBE231AC@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C06AEDD33E4C@MAILBOXSERVER.rf.local>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE231AC@MAILBOXSERVER.rf.local>
Message-ID: <4D0E6A3C.7020800@pobox.com>

On 10-12-19 02:40 PM, Livneh Yehiyam wrote:
> Hi I ran into a problem converting a GeoTiff to a Jpeg200 image, using
> gdal_translate and the JP2ECW driver.
...
> I get this from gdalinfo:E:\Data\test>gdalinfo 01122010-1509.jp2
 > Driver: JP2ECW/ERMapper JPEG2000
 > Files: 01122010-1509.jp2
 >        01122010-1509.jp2.aux.xml
...
> I think the problem is that both projectionRef, and GCPProjection are
> defined. This causes Global Mapper to fail reading the geo-reference data.
>
> Is it a known problem, or am I doing something wrong?

Yehiyam,

I haven't run into this before as far as I can recall.  I'm wondering if
global mapper might be reading the .aux.xml and if it has the base SRS
set as well as the GCP stuff.  You might try just removing the .aux.xml
and see if that helps.   If the problem is embedded in the jpeg2000 file
it may be harder to address.

If that is the case you might try one or the other of the following
gdal_translate creation options to suppress writing either the GML or
GeoJP2 georeferencing info to the jp2.

  -co GeoJP2=NO

or

  -co GMLJP2=NO

I think it would be worth filing a ticket on this issue too.

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From uwe.schmitz at bezreg-koeln.nrw.de  Mon Dec 20 09:12:55 2010
From: uwe.schmitz at bezreg-koeln.nrw.de (Schmitz, Uwe)
Date: Mon Dec 20 09:13:07 2010
Subject: AW: [gdal-dev] An issue about using GDALWARP to do
	theNTv2transformation
In-Reply-To: <1292682078901-5848200.post@n2.nabble.com>
Message-ID: <240EE7C956B2CB439C613DF6CEC8A32D037BBB1D@sebulba.bezreg-koeln.nrw.de>

Heng,
> 
> 
> http://osgeo-org.1803224.n2.nabble.com/file/n5848200/gdalwarp_
> problem1.doc
> gdalwarp_problem1.doc 
> Hi Uwe,
> 
> I have tried your suggestion on the same raster file with a modified
> "+x_0=500000" parameter in the command line (as seen in the 
> attached doc). I
> could see the major difference:there is still one error 
> message left. When I
> tried on another raster file with the same modified 
> parameter, I have got
> much less error messages than before. However, is it still 
> possible that my
> raster data are outside the area of the grid shift file? All 
> the raster data
> I was trying to transform are GK (DHDN) zone 4, which false 
> easting value is
> 4500000. This was why I used "+x_0=4500000" instead of 
> "+x_0=500000" in the
> command line. As I am getting to know all these georeference 
> settings at the
> moment, can you tell me why you suggested the modified 
> parameter and what
> you meant about "raster data lacks the Gauss-Krueger meridian prefix"?
> 
that was just a guess, because your coordinates lie far in the
west of DHDN/GK zone 4.
Normally DHDN/GK coordinates are noted as e.g.:
4500000.0 Rechts 5500000.0 Hoch

Omitting the Gauss-Krueger meridian prefix you have:
 500000.0 Rechts 5500000.0 Hoch
(Note: Rechts coordinate has only six digits) an thats 
far in the west of the real position. It's very simple and
therefore you may give it a try. 

If it's not the case, may be you can post the output of:
gdalinfo l0.tif

That would help to see, if the file is correctly georeferenced.

Regards
Uwe
From dmorissette at mapgears.com  Mon Dec 20 10:12:10 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon Dec 20 10:12:16 2010
Subject: [gdal-dev] Motion: Commit Access for Kirk McKelvey
In-Reply-To: <4D0BFBB8.8060006@pobox.com>
References: <4D0BFBB8.8060006@pobox.com>
Message-ID: <4D0F724A.5060500@mapgears.com>

Frank Warmerdam wrote:
> Folks,
> 
> Motion: Extend Commit Priveledges for Kirk McKelvey.
> 

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From nhatzop at gmail.com  Mon Dec 20 16:52:10 2010
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Mon Dec 20 16:52:13 2010
Subject: [gdal-dev] gdal_translate and modis ocean HDFs
In-Reply-To: <201012201455.23525.gmpuljak@yahoo.com.ar>
References: <201012031156.30369.gmpuljak@yahoo.com.ar>
	<AANLkTi=_eesCeGKeTRY=vwV_L=vJT-SjhiNR90_rEjj8@mail.gmail.com>
	<201012201455.23525.gmpuljak@yahoo.com.ar>
Message-ID: <AANLkTikGdO0GsvdqhC4JY7z+PLG9BPzF9pjRWh_bJbvY@mail.gmail.com>

Could you please send me what you have when you do gdalinfo yourfiles.hdf

On Mon, Dec 20, 2010 at 9:55 AM, Gustavo <gmpuljak@yahoo.com.ar> wrote:

> Hi Nikolaos,
>
> sorry for the delay in answering. I've tried your suggestion but the error
> is
> the same.
>
> Gustavo
>
> On Vie 03 Dic 2010 15:03:04 usted escribi?:
> >  gdal_translate -of GTiff
> > 'HDF4_SDS:UNKNOWN:"A20100252010032.L3m_8D_CHL_chlor_a_9km":0' test.tif
> >
> > see if that works
> > you need this :  '
> >
> > On Fri, Dec 3, 2010 at 6:56 AM, Gustavo <gmpuljak@yahoo.com.ar> wrote:
> > > Hi everyone,
> > >
> > > I am trying to import some L3 MODIS satellite images into GRASS 6.4 by
> > > following the instructions from:
> > >
> > > http://grass.osgeo.org/wiki/MODIS#Import
> > >
> > >  I've tried method 1 but I got some error messages.
> > >
> > > gdal_translate -a_srs "+init=epsg:4326" -a_nodata 65535 -a_ullr -180 90
> > > 180 -90 -co "COMPRESS=PACKBITS"
> > > HDF4_SDS:UNKNOWN:"A20100252010032.L3m_8D_CHL_chlor_a_9km":0 prueba.tif
> > > Input file size is 4320, 2160
> > > 0ERROR 1: SDreaddata() failed for block.
> > > ERROR 1: IReadBlock failed at X offset 0, Y offset 0
> > > ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
> > >
> > > The error is the same with different files.
> > > My system is Ubuntu 9.10 64bits.
> > > gdal_translate --version
> > > GDAL 1.7.2, released 2010/04/23
> > >
> > >
> > > What can I do?
> > > Thanks,
> > >
> > > Gustavo Mart?nez
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101220/aff68574/attachment.html
From mateusz at loskot.net  Mon Dec 20 17:38:20 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon Dec 20 17:38:27 2010
Subject: [gdal-dev] dans-gdal-scripts
Message-ID: <4D0FDADC.9020806@loskot.net>

Hi,

I think it hasn't been posted here yet:

https://github.com/gina-alaska/dans-gdal-scripts

Collection of interesting C++ programs extending the standard
GDAL utilities set.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From jukka.rahkonen at mmmtike.fi  Tue Dec 21 04:13:48 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Dec 21 04:14:04 2010
Subject: [gdal-dev] Re: Gdal_translate, WMS source and own certificate
References: <loom.20101210T145803-535@post.gmane.org>
Message-ID: <loom.20101221T100545-80@post.gmane.org>

Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:

> We would like to use gdal_translate for reading fromn our WMS service 
> which is> secured by our own certificate and thus not automatically 
> trusted.  Our developer had a quick look on a gdal source code and 
> tried to find how options CURLOPT_SSL_VERIFYPEER (1) and CURLOPT_CAPATH
> (2) are used there.  Numbers are referring to document 
> http://curl.haxx.se/docs/sslcerts.html
> 
> The conclusion was that those options are not used and thus it is 
> impossible to use dgal_translate with our server.  Is this true, and
> if yes, would it be worth filing a ticket?

We got help for our immediate need by making an own modified build. We opened
also a new ticket about fixing the thing permanently
(http://trac.osgeo.org/gdal/ticket/3882) because our developer wrote me
"Building gdal with curl for Windows is non-trivial".

-Jukka Rahkonen-


From nowak at xpam.de  Tue Dec 21 04:51:25 2010
From: nowak at xpam.de (Adam Nowacki)
Date: Tue Dec 21 05:09:27 2010
Subject: [gdal-dev] Re: Gdal_translate, WMS source and own certificate
In-Reply-To: <loom.20101221T100545-80@post.gmane.org>
References: <loom.20101210T145803-535@post.gmane.org>
	<loom.20101221T100545-80@post.gmane.org>
Message-ID: <4D10789D.1040500@xpam.de>

Can you test http://trac.osgeo.org/gdal/changeset/21304/trunk ? Add 
<UnsafeSSL>true</UnsafeSSL> inside <GDAL_WMS>.

Jukka Rahkonen wrote:
> Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:
> 
>> We would like to use gdal_translate for reading fromn our WMS service 
>> which is> secured by our own certificate and thus not automatically 
>> trusted.  Our developer had a quick look on a gdal source code and 
>> tried to find how options CURLOPT_SSL_VERIFYPEER (1) and CURLOPT_CAPATH
>> (2) are used there.  Numbers are referring to document 
>> http://curl.haxx.se/docs/sslcerts.html
>>
>> The conclusion was that those options are not used and thus it is 
>> impossible to use dgal_translate with our server.  Is this true, and
>> if yes, would it be worth filing a ticket?
> 
> We got help for our immediate need by making an own modified build. We opened
> also a new ticket about fixing the thing permanently
> (http://trac.osgeo.org/gdal/ticket/3882) because our developer wrote me
> "Building gdal with curl for Windows is non-trivial".
> 
> -Jukka Rahkonen-
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

From cherquisido at gmail.com  Tue Dec 21 05:08:49 2010
From: cherquisido at gmail.com (Cher Quisido)
Date: Tue Dec 21 05:10:54 2010
Subject: [gdal-dev] Reading the WMS raster output
Message-ID: <AANLkTi=+ErP4SUo2VxQw4OXeyD4huwbvwXmPoND5wOOJ@mail.gmail.com>

Hi,

I am trying to add WMS support to our current GIS application. And I have
some problems when reading the raster data.

I get 3 bands on the call to GetRasterCount() but in the call to
GetColorInterpretation() I get GCI_Undefined. I also get CE_Failure on my
call to RasterIO().

I am using the current implementation of our Raster Import which works well
with the gdal_translate output image of my WMS the same xml input.

I have GDAL 1.7.3 (WMS-enabled).

Nothing on the web has helped up to now. :(
Any help will be greatly appreciated.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101221/cda5f2f2/attachment.html
From even.rouault at mines-paris.org  Tue Dec 21 05:49:58 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 21 05:50:08 2010
Subject: [gdal-dev] Reading the WMS raster output
In-Reply-To: <AANLkTi=+ErP4SUo2VxQw4OXeyD4huwbvwXmPoND5wOOJ@mail.gmail.com>
References: <AANLkTi=+ErP4SUo2VxQw4OXeyD4huwbvwXmPoND5wOOJ@mail.gmail.com>
Message-ID: <1292928598.4d108656a9368@webmail.free.fr>

Selon Cher Quisido <cherquisido@gmail.com>:

This has been fixed in GDAL 1.8.0dev. See http://trac.osgeo.org/gdal/ticket/3420

> Hi,
>
> I am trying to add WMS support to our current GIS application. And I have
> some problems when reading the raster data.
>
> I get 3 bands on the call to GetRasterCount() but in the call to
> GetColorInterpretation() I get GCI_Undefined. I also get CE_Failure on my
> call to RasterIO().
>
> I am using the current implementation of our Raster Import which works well
> with the gdal_translate output image of my WMS the same xml input.
>
> I have GDAL 1.7.3 (WMS-enabled).
>
> Nothing on the web has helped up to now. :(
> Any help will be greatly appreciated.
>


From cherquisido at gmail.com  Tue Dec 21 07:27:52 2010
From: cherquisido at gmail.com (Cher Quisido)
Date: Tue Dec 21 07:27:55 2010
Subject: [gdal-dev] Reading the WMS raster output
In-Reply-To: <1292928598.4d108656a9368@webmail.free.fr>
References: <AANLkTi=+ErP4SUo2VxQw4OXeyD4huwbvwXmPoND5wOOJ@mail.gmail.com>
	<1292928598.4d108656a9368@webmail.free.fr>
Message-ID: <AANLkTimX=rf_vbkc_0xeaJQmXXj1PGdicdrEk8L2Jy5t@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 540 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101221/dc3c1718/attachment-0001.gif
From jukka.rahkonen at mmmtike.fi  Tue Dec 21 08:16:31 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Dec 21 08:16:48 2010
Subject: [gdal-dev] Re: Gdal_translate, WMS source and own certificate
References: <loom.20101210T145803-535@post.gmane.org>
	<loom.20101221T100545-80@post.gmane.org> <4D10789D.1040500@xpam.de>
Message-ID: <loom.20101221T140255-32@post.gmane.org>

Adam Nowacki <nowak <at> xpam.de> writes:

> 
> Can you test http://trac.osgeo.org/gdal/changeset/21304/trunk ? Add 
> <UnsafeSSL>true</UnsafeSSL> inside <GDAL_WMS>.

Yes, it works. However, the ticked appeared to be a duplicate for #3510, and the
attached patch is solving the problem as well. You, the developers need to
choose which fix to take. The #3510 fix includes also a way to give username and
password with WMS_XML but on the other hand it would make GDAL WMS driver to
never check the certificates. GDAL WCS skips certificates already and for the
end user it would be nice if WMS and WCS drivers behaves in a similar way, what
ever it is.

-Jukka Rahkonen-

From cherquisido at gmail.com  Tue Dec 21 09:31:32 2010
From: cherquisido at gmail.com (Cher Quisido)
Date: Tue Dec 21 09:31:35 2010
Subject: [gdal-dev] Reading the WMS raster output
In-Reply-To: <AANLkTimX=rf_vbkc_0xeaJQmXXj1PGdicdrEk8L2Jy5t@mail.gmail.com>
References: <AANLkTi=+ErP4SUo2VxQw4OXeyD4huwbvwXmPoND5wOOJ@mail.gmail.com>
	<1292928598.4d108656a9368@webmail.free.fr>
	<AANLkTimX=rf_vbkc_0xeaJQmXXj1PGdicdrEk8L2Jy5t@mail.gmail.com>
Message-ID: <AANLkTikztpoJ975Q2NzRSixKsvMcv8xp++axY=TMK4gO@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 540 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101221/2aba8b9d/attachment.gif
From peter.hopfgartner at r3-gis.com  Tue Dec 21 09:51:41 2010
From: peter.hopfgartner at r3-gis.com (Peter Hopfgartner)
Date: Tue Dec 21 09:51:43 2010
Subject: [gdal-dev] Can not run ogr2ogr from a web server running PHP
Message-ID: <20101221145142.01EE0167823E@mail.r3-gis.com>

I'm trying to run ogr2ogr from a PHP script. This runs fine, if the script is run from the command line. It does not work if run through the web server.

The scripts basically runs:

/usr/local/bin/ogr2ogr -f 'ESRI Shapefile' '/tmp/tmp_plant_cfa4f818c6c5c1e7881b' 'OCI:plantmap/plantmapx@plantmap' -sql 'SELECT * FROM tmp_plant_cfa4f818c6c5c1e7881b' -nln plant

and returns the error:
ERROR 1: ORA-12504: TNS:listener was not given the SERVICE_NAME in CONNECT_DATA
 in <unnamed>

ORACLE_HOME, ORACLE_SID, ORACLE_HOME are set in the web server init script (the whole application runs with Oracle).
I tried to enforce the variables in the virtual host fragment in httpd.conf:
    SetEnv ORACLE_HOME /u01/app/oracle/product/11.1.0/db_1
    SetEnv ORACLE_SID plantmap
    SetEnv ORACLE_OWNER oracle

If I run a little test script, like:
#!/bin/sh
echo $ORACLE_HOME
echo $ORACLE_SID
echo $LD_LIBRARY_PATH

the environment variables are set correctly.
So why can't ogr2ogr find the correct Oracle instance?

Platform: RHEL 5, 64 bit, Oracle 11.1

Regards,

Peter Hopfgartner
 
R3 GIS Srl - GmbH
http://www.r3-gis.com


From peter.hopfgartner at r3-gis.com  Tue Dec 21 10:17:25 2010
From: peter.hopfgartner at r3-gis.com (Peter Hopfgartner)
Date: Tue Dec 21 10:17:28 2010
Subject: [gdal-dev] Can not run ogr2ogr from a web server running PHP
Message-ID: <20101221151725.80201167823C@mail.r3-gis.com>

Hi Pavel. Thanks for your quick response. Anyway, I did the following test:

I have a PHP file (env.php):

<?php

exec("/data/sites/plantmap/web/env.sh", $output, $rv);
print_r($output);


and a shell script

#!/bin/sh
echo $ORACLE_HOME
echo $ORACLE_SID
echo $ORACLE_OWNER
echo $LD_LIBRARY_PATH

When I run env.php through the web server, it returns 

Array
(
    [0] => /u01/app/oracle/product/11.1.0/db_1
    [1] => plantmap
    [2] => oracle
    [3] => :/u01/app/oracle/product/11.1.0/db_1/lib
)
, so the environment variables are passed correctly to the called application.

Are there any other env. variables relevant for ogr2ogr when reading an Oracle DB?


Regards,

Peter
 
R3 GIS Srl - GmbH
http://www.r3-gis.com


--------Pavel Iacovlev <iacovlev.pavel@gmail.com> wrote--------
Subject: Re: [gdal-dev] Can not run ogr2ogr from a web server running PHP
Date: 21.12.2010 16:11

>Your environment variables are set for your current user, apache usually
>runs as www-data or nobody user.
>Use http://md.php.net/putenv to set your environment variables this will
>work both from apache and from CLI.
>
>On Tue, Dec 21, 2010 at 4:51 PM, Peter Hopfgartner <
>peter.hopfgartner@r3-gis.com> wrote:
>
>> I'm trying to run ogr2ogr from a PHP script. This runs fine, if the
>script
>> is run from the command line. It does not work if run through the web
>> server.
>>
>> The scripts basically runs:
>>
>> /usr/local/bin/ogr2ogr -f 'ESRI Shapefile'
>> '/tmp/tmp_plant_cfa4f818c6c5c1e7881b' 'OCI:plantmap/plantmapx@plantmap'
>> -sql 'SELECT * FROM tmp_plant_cfa4f818c6c5c1e7881b' -nln plant
>>
>> and returns the error:
>> ERROR 1: ORA-12504: TNS:listener was not given the SERVICE_NAME in
>> CONNECT_DATA
>>  in <unnamed>
>>
>> ORACLE_HOME, ORACLE_SID, ORACLE_HOME are set in the web server init
>script
>> (the whole application runs with Oracle).
>> I tried to enforce the variables in the virtual host fragment in
>> httpd.conf:
>>    SetEnv ORACLE_HOME /u01/app/oracle/product/11.1.0/db_1
>>    SetEnv ORACLE_SID plantmap
>>    SetEnv ORACLE_OWNER oracle
>>
>> If I run a little test script, like:
>> #!/bin/sh
>> echo $ORACLE_HOME
>> echo $ORACLE_SID
>> echo $LD_LIBRARY_PATH
>>
>> the environment variables are set correctly.
>> So why can't ogr2ogr find the correct Oracle instance?
>>
>> Platform: RHEL 5, 64 bit, Oracle 11.1
>>
>> Regards,
>>
>> Peter Hopfgartner
>>
>> R3 GIS Srl - GmbH
>> http://www.r3-gis.com
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
>-- 
>http://iap.md, The future is open
>

From Michael.Buchoff at caemilusa.com  Tue Dec 21 13:50:13 2010
From: Michael.Buchoff at caemilusa.com (Michael Buchoff)
Date: Tue Dec 21 13:51:17 2010
Subject: [gdal-dev] Issues converting images
Message-ID: <4064B6E43A2FA546858C82DAF82702FA042177C6@srv509.caemilusa.com>

We are currently having issues downconverting an 11-bit img file
pointing to a 16-bit histogram into an 8-bit tiff file for common
viewers.  The gdalinfo for the sourcefile is on pastebin
(http://pastebin.com/2QBuqwEp).  Do you have any recommendations on how
we can do this?

 

Thanks in advance.




***This e-mail message is intended only for the above named recipient(s)
and may contain information that is sensitive or proprietary. If you have
received this message in error or are not the named recipient(s), please 
immediately notify the sender, delete this e-mail message without making
a copy and do not disclose or relay this e-mail message to anyone.***
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101221/2d9cb311/attachment.html
From even.rouault at mines-paris.org  Tue Dec 21 14:00:29 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 21 14:00:26 2010
Subject: [gdal-dev] Issues converting images
In-Reply-To: <4064B6E43A2FA546858C82DAF82702FA042177C6@srv509.caemilusa.com>
References: <4064B6E43A2FA546858C82DAF82702FA042177C6@srv509.caemilusa.com>
Message-ID: <201012212000.29338.even.rouault@mines-paris.org>

Le mardi 21 d?cembre 2010 19:50:13, Michael Buchoff a ?crit :
> We are currently having issues downconverting an 11-bit img file
> pointing to a 16-bit histogram into an 8-bit tiff file for common
> viewers.  The gdalinfo for the sourcefile is on pastebin
> (http://pastebin.com/2QBuqwEp).  Do you have any recommendations on how
> we can do this?

Did you investigate the -scale option of gdal_translate ?

> 
> 
> 
> Thanks in advance.
> 
> 
> 
> 
> ***This e-mail message is intended only for the above named recipient(s)
> and may contain information that is sensitive or proprietary. If you have
> received this message in error or are not the named recipient(s), please
> immediately notify the sender, delete this e-mail message without making
> a copy and do not disclose or relay this e-mail message to anyone.***
From Michael.Buchoff at caemilusa.com  Tue Dec 21 14:06:16 2010
From: Michael.Buchoff at caemilusa.com (Michael Buchoff)
Date: Tue Dec 21 14:06:19 2010
Subject: [gdal-dev] Issues converting images
In-Reply-To: <201012212000.29338.even.rouault@mines-paris.org>
References: <4064B6E43A2FA546858C82DAF82702FA042177C6@srv509.caemilusa.com>
	<201012212000.29338.even.rouault@mines-paris.org>
Message-ID: <4064B6E43A2FA546858C82DAF82702FA042177C7@srv509.caemilusa.com>

As far as I can tell, the -scale option only sets the terrain extents.  GDAL seems to be handing this fine.  We are looking to downconvert our bits-per-pixel and preferably strip out the histogram for something more widely recognized.

Am I misunderstanding something?

-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Tuesday, December 21, 2010 2:00 PM
To: gdal-dev@lists.osgeo.org
Cc: Michael Buchoff; Larry Clark; Glen Johnson
Subject: Re: [gdal-dev] Issues converting images

Le mardi 21 d?cembre 2010 19:50:13, Michael Buchoff a ?crit :
> We are currently having issues downconverting an 11-bit img file
> pointing to a 16-bit histogram into an 8-bit tiff file for common
> viewers.  The gdalinfo for the sourcefile is on pastebin
> (http://pastebin.com/2QBuqwEp).  Do you have any recommendations on how
> we can do this?

Did you investigate the -scale option of gdal_translate ?

> 
> 
> 
> Thanks in advance.
> 
> 
> 
> 
> ***This e-mail message is intended only for the above named recipient(s)
> and may contain information that is sensitive or proprietary. If you have
> received this message in error or are not the named recipient(s), please
> immediately notify the sender, delete this e-mail message without making
> a copy and do not disclose or relay this e-mail message to anyone.***
From even.rouault at mines-paris.org  Tue Dec 21 14:15:31 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 21 14:15:29 2010
Subject: [gdal-dev] Re: Gdal_translate, WMS source and own certificate
In-Reply-To: <loom.20101221T140255-32@post.gmane.org>
References: <loom.20101210T145803-535@post.gmane.org>
	<4D10789D.1040500@xpam.de> <loom.20101221T140255-32@post.gmane.org>
Message-ID: <201012212015.31446.even.rouault@mines-paris.org>

Adam,

I also think it would be better if we had the same options for the WMS and WCS 
drivers. I'm wondering if there's a reason for not turning off SSL verification 
by default. I guess the SSL peer verification makes mostly sense for a web 
browser where you could access some rogue site asking for your credit card 
number, but for a online image service whose URL you must write in a XML file, 
it's probably unnecessary and we could disable it unconditionnaly ?

Best regards,

Even

Le mardi 21 d?cembre 2010 14:16:31, Jukka Rahkonen a ?crit :
> Adam Nowacki <nowak <at> xpam.de> writes:
> > Can you test http://trac.osgeo.org/gdal/changeset/21304/trunk ? Add
> > <UnsafeSSL>true</UnsafeSSL> inside <GDAL_WMS>.
> 
> Yes, it works. However, the ticked appeared to be a duplicate for #3510,
> and the attached patch is solving the problem as well. You, the developers
> need to choose which fix to take. The #3510 fix includes also a way to
> give username and password with WMS_XML but on the other hand it would
> make GDAL WMS driver to never check the certificates. GDAL WCS skips
> certificates already and for the end user it would be nice if WMS and WCS
> drivers behaves in a similar way, what ever it is.
> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Tue Dec 21 14:17:21 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 21 14:17:20 2010
Subject: [gdal-dev] Issues converting images
In-Reply-To: <4064B6E43A2FA546858C82DAF82702FA042177C7@srv509.caemilusa.com>
References: <4064B6E43A2FA546858C82DAF82702FA042177C6@srv509.caemilusa.com>
	<201012212000.29338.even.rouault@mines-paris.org>
	<4064B6E43A2FA546858C82DAF82702FA042177C7@srv509.caemilusa.com>
Message-ID: <201012212017.21614.even.rouault@mines-paris.org>

Le mardi 21 d?cembre 2010 20:06:16, Michael Buchoff a ?crit :
> As far as I can tell, the -scale option only sets the terrain extents. 
> GDAL seems to be handing this fine.  We are looking to downconvert our
> bits-per-pixel and preferably strip out the histogram for something more
> widely recognized.
> 
> Am I misunderstanding something?

Yes, probably ;-)

http://gdal.org/gdal_translate.html seems quite clear to me. The -scale acts 
on pixel values, which is what you want, and not the raster extent.

> 
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: Tuesday, December 21, 2010 2:00 PM
> To: gdal-dev@lists.osgeo.org
> Cc: Michael Buchoff; Larry Clark; Glen Johnson
> Subject: Re: [gdal-dev] Issues converting images
> 
> Le mardi 21 d?cembre 2010 19:50:13, Michael Buchoff a ?crit :
> > We are currently having issues downconverting an 11-bit img file
> > pointing to a 16-bit histogram into an 8-bit tiff file for common
> > viewers.  The gdalinfo for the sourcefile is on pastebin
> > (http://pastebin.com/2QBuqwEp).  Do you have any recommendations on how
> > we can do this?
> 
> Did you investigate the -scale option of gdal_translate ?
> 
> > Thanks in advance.
> > 
> > 
> > 
> > 
> > ***This e-mail message is intended only for the above named recipient(s)
> > and may contain information that is sensitive or proprietary. If you have
> > received this message in error or are not the named recipient(s), please
> > immediately notify the sender, delete this e-mail message without making
> > a copy and do not disclose or relay this e-mail message to anyone.***
From even.rouault at mines-paris.org  Tue Dec 21 14:56:23 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 21 14:56:18 2010
Subject: [gdal-dev] Disable PHP (and Ruby ?) bindings from GDAL configure ?
Message-ID: <201012212056.23859.even.rouault@mines-paris.org>

Hi,

I'm wondering if it still makes sense to list the PHP bindings in the configure 
script as they are unmaintained and probably broken partially / completely, as 
new typemaps have been added since the time they were first introduced.

Users would still be able to cd swig/php; make build; make install if they 
really want to try them.

On the other hand, I'd note that the csharp bindings are functionnal for Linux 
but not listed as an option of ./configure, so it's quite paradoxical to list 
known-to-be-broken PHP bindings...

We could wonder about the Ruby bindings situation that lack for maintener love 
as well. The situation is a bit different here since I see that at least Fedora 
and Debian still package them, so I guess they must be still functionnal to a 
minimum extent...

Best regards,

Even
From maplabs at light42.com  Tue Dec 21 15:13:40 2010
From: maplabs at light42.com (Brian Hamlin)
Date: Tue Dec 21 16:08:07 2010
Subject: [gdal-dev] Naive warping question
In-Reply-To: <201012212017.21614.even.rouault@mines-paris.org>
References: <4064B6E43A2FA546858C82DAF82702FA042177C6@srv509.caemilusa.com>
	<201012212000.29338.even.rouault@mines-paris.org>
	<4064B6E43A2FA546858C82DAF82702FA042177C7@srv509.caemilusa.com>
	<201012212017.21614.even.rouault@mines-paris.org>
Message-ID: <CD950640-0D3E-11E0-BAAD-0003936901F0@light42.com>

Hi All-
   I have a series of tiffs, georef'd in 4326, which side by side cover 
 >1000 km at latitude 38
California from the coast past the borders

   I warped them all to 3310 using gdalwarp with default settings..
However, the resulting images appear to leave a sliver between them
In other words, they are *not* complete coverage of the area covered
  in the original tiffs. This is unexpected to me..

Is this expected results?
How can I be sure to get complete coverage in the resulting set of 
re-projected tiffs?

   thanks
    -Brian

==
Brian Hamlin
planetwork.net
OSGeo California Chapter
(415) 717-4462 cell

From EAdam at co.lincoln.or.us  Tue Dec 21 16:32:26 2010
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Tue Dec 21 16:53:28 2010
Subject: [gdal-dev] Naive warping question
In-Reply-To: <CD950640-0D3E-11E0-BAAD-0003936901F0@light42.com>
References: <4064B6E43A2FA546858C82DAF82702FA042177C6@srv509.caemilusa.com>
	<201012212000.29338.even.rouault@mines-paris.org>
	<4064B6E43A2FA546858C82DAF82702FA042177C7@srv509.caemilusa.com>
	<201012212017.21614.even.rouault@mines-paris.org>
	<CD950640-0D3E-11E0-BAAD-0003936901F0@light42.com>
Message-ID: <4D10AC6A.4F75.00CE.0@co.lincoln.or.us>

Brian,

     You could try gdalbuildvrt, then gdalwarp that with -of VRT, then tile it how you like with gdal_translate.  I think that gdal_retile.py has some options to do what you want as well.

     I think that the slivers are probably because the projections have different angles of rotations and pixels may not be exactly square in each projection and may not map from one to the other cleanly.  Making a mosiac first (even if virtual) deals with this (or at least pushes it to your edges where you won't notice it.

HTH, Eli

>>> Brian Hamlin <maplabs@light42.com> 12/21/2010 12:13 PM >>>
Hi All-
   I have a series of tiffs, georef'd in 4326, which side by side cover 
 >1000 km at latitude 38
California from the coast past the borders

   I warped them all to 3310 using gdalwarp with default settings..
However, the resulting images appear to leave a sliver between them
In other words, they are *not* complete coverage of the area covered
  in the original tiffs. This is unexpected to me..

Is this expected results?
How can I be sure to get complete coverage in the resulting set of 
re-projected tiffs?

   thanks
    -Brian

==
Brian Hamlin
planetwork.net
OSGeo California Chapter
(415) 717-4462 cell

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org 
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From frankie at debian.org  Tue Dec 21 18:54:50 2010
From: frankie at debian.org (Francesco P. Lovergine)
Date: Tue Dec 21 18:54:54 2010
Subject: [gdal-dev] Disable PHP (and Ruby ?) bindings from GDAL configure ?
In-Reply-To: <201012212056.23859.even.rouault@mines-paris.org>
References: <201012212056.23859.even.rouault@mines-paris.org>
Message-ID: <20101221235449.GB5256@gandalf.is-a-geek.org>

On Tue, Dec 21, 2010 at 08:56:23PM +0100, Even Rouault wrote:
> 
> We could wonder about the Ruby bindings situation that lack for maintener love 
> as well. The situation is a bit different here since I see that at least Fedora 
> and Debian still package them, so I guess they must be still functionnal to a 
> minimum extent...
> 

With some minor changes, introduced ages ago (trac entries pending), at least
on the Debian side.

-- 
Francesco P. Lovergine
From jrepetto at free.fr  Wed Dec 22 04:36:10 2010
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed Dec 22 04:36:15 2010
Subject: [gdal-dev] 1.8 Release - Need to move!
In-Reply-To: <4D0B8CE8.7070306@pobox.com>
References: <4D0B8CE8.7070306@pobox.com>
Message-ID: <4D11C68A.60408@free.fr>

Le 17/12/2010 17:16, Frank Warmerdam a ?crit :
>
> I've been dragging my feet on release for a couple weeks now because I'm
> uncertain about the OGR 64 bit RFC. Rather than vacillate into new year, I
> would like to defer it to 1.9 and start a beta program. Are there any
> objections to me producing a "beta 1" this weekend? My hope is that we
> could
> have a release candidate available for January 1st after a 2-3 betas. I
> realize we are essentially into the holiday period now and that not
> everyone
> will have time to do testing but I hesitate to let things drag on
> endlessly.

Hello,

At this time, there are 595 active tickets in Trac. Don't you think it 
would be useful to organize a "bug hunting day" to close a maximum 
number of tickets ? Some of them are just small patches, they could be 
closed very quickly. Naturally, this should be done before releasing the 
first beta version.

Jean-Claude
From heng.feng at aircominternational.com  Wed Dec 22 08:15:03 2010
From: heng.feng at aircominternational.com (heng.feng)
Date: Wed Dec 22 08:15:05 2010
Subject: [gdal-dev] An issue about using GDALWARP to do
	theNTv2transformation
In-Reply-To: <240EE7C956B2CB439C613DF6CEC8A32D037BBB1D@sebulba.bezreg-koeln.nrw.de>
References: <1292466248833-5838904.post@n2.nabble.com>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB14@sebulba.bezreg-koeln.nrw.de>
	<C3257D068EB03E4498BAC3A96344256803B2A92561@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<1292682078901-5848200.post@n2.nabble.com>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB1D@sebulba.bezreg-koeln.nrw.de>
Message-ID: <C3257D068EB03E4498BAC3A96344256803B2D1A28F@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>


Hi Uwe,

Thanks for your reply. The l0.tif file does not contain any georeferenced information. However, I have run the GDALINFO command on another raster data file which is in the same map data set provided by the customer and hence is supposed to be georeferenced in the way as the l0.tif file. The command output is sent as attached. As mentioned before, I also did the NTv2 transformation on  this raster data file (Notrufzonen_50m_v11_6_EPOS.tif) with the same GDALWARP command and the same grid shift file. I also got a lot of error messages saying that some coordinates are outside the area of the grid shift file. And with the "+x_0=500000" parameter, the output error messages are much less than the ones with the "+x_0=4500000" parameter.

Thanks for your help again.

BR,
Heng

From: Schmitz, Uwe [via OSGeo.org] [mailto:ml-node+5852724-406096449-308251@n2.nabble.com]
Sent: 20 December 2010 18:51
To: Heng Feng
Subject: AW: [gdal-dev] An issue about using GDALWARP to do theNTv2transformation

Heng,

>
>
> http://osgeo-org.1803224.n2.nabble.com/file/n5848200/gdalwarp_<http://osgeo-org.1803224.n2.nabble.com/file/n5848200/gdalwarp_?by-user=t>
> problem1.doc
> gdalwarp_problem1.doc
> Hi Uwe,
>
> I have tried your suggestion on the same raster file with a modified
> "+x_0=500000" parameter in the command line (as seen in the
> attached doc). I
> could see the major difference:there is still one error
> message left. When I
> tried on another raster file with the same modified
> parameter, I have got
> much less error messages than before. However, is it still
> possible that my
> raster data are outside the area of the grid shift file? All
> the raster data
> I was trying to transform are GK (DHDN) zone 4, which false
> easting value is
> 4500000. This was why I used "+x_0=4500000" instead of
> "+x_0=500000" in the
> command line. As I am getting to know all these georeference
> settings at the
> moment, can you tell me why you suggested the modified
> parameter and what
> you meant about "raster data lacks the Gauss-Krueger meridian prefix"?
>
that was just a guess, because your coordinates lie far in the
west of DHDN/GK zone 4.
Normally DHDN/GK coordinates are noted as e.g.:
4500000.0 Rechts 5500000.0 Hoch

Omitting the Gauss-Krueger meridian prefix you have:
 500000.0 Rechts 5500000.0 Hoch
(Note: Rechts coordinate has only six digits) an thats
far in the west of the real position. It's very simple and
therefore you may give it a try.

If it's not the case, may be you can post the output of:
gdalinfo l0.tif

That would help to see, if the file is correctly georeferenced.

Regards
Uwe
_______________________________________________
gdal-dev mailing list
[hidden email]</user/SendEmail.jtp?type=node&node=5852724&i=0>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

________________________________
View message @ http://osgeo-org.1803224.n2.nabble.com/An-issue-about-using-GDALWARP-to-do-the-NTv2-transformation-tp5838904p5852724.html
To unsubscribe from An issue about using GDALWARP to do the NTv2 transformation, click here<http://osgeo-org.1803224.n2.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5838904&code=aGVuZy5mZW5nQGFpcmNvbWludGVybmF0aW9uYWwuY29tfDU4Mzg5MDR8MTI3MzEwMjEw>.

AIRCOM International
http://www.facebook.com/Aircom | http://www.twitter.com/aircomint | http://blog.aircominternational.com/ | http://www.youtube.com/aircomint 
 
Disclaimer: 
This e-mail message is confidential and should not be used by, or disclosed to, anyone except the addressee. If you receive this message in error, please advise us immediately on +44 (0) 1932 442000. Since e-mail transmission is not secure or error free, we do not accept responsibility for changes to any e-mail which occur after it has been sent. Attachments to this e-mail may contain software viruses which could damage your systems. You should therefore virus-check all attachments before opening. AIRCOM may monitor incoming and outgoing emails through its networks and by responding to this email, you consent to such monitoring. The views and opinions expressed in this e-mail are those of the author only and not of AIRCOM. We do not intend to enter into any legal commitments or contracts by e-mail. Registered Office: Cassini Court, Randalls Research Park, Randalls Way, Leatherhead, Surrey, KT22 7TW, UK. AIRCOM International Ltd registered in England No. 3052022. VAT number 811 5323 68.
 Save a tree. Don't print this e-mail unless it's really necessary

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/An-issue-about-using-GDALWARP-to-do-the-NTv2-transformation-tp5838904p5859107.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101222/d04b25a4/attachment.html
From even.rouault at mines-paris.org  Wed Dec 22 08:57:10 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec 22 08:57:19 2010
Subject: [gdal-dev] 1.8 Release - Need to move!
In-Reply-To: <4D11C68A.60408@free.fr>
References: <4D0B8CE8.7070306@pobox.com> <4D11C68A.60408@free.fr>
Message-ID: <1293026230.4d1203b609369@webmail.free.fr>

Selon Jean-Claude Repetto <jrepetto@free.fr>:

> Hello,
>
> At this time, there are 595 active tickets in Trac. Don't you think it
> would be useful to organize a "bug hunting day" to close a maximum
> number of tickets ? Some of them are just small patches, they could be
> closed very quickly. Naturally, this should be done before releasing the
> first beta version.
>
> Jean-Claude

Jean-Claude,

I'm not so sure there are many low-hanging fruits. The size of a patch isn't
necessary a proof of its correctness ;-) Perhaps you could help us and indicate
what tickets you believe to be appropriate for quick closing/patching ?

Out of curiosity, I've just compared with other OSGEO software.
GDAL : 595 open / 3883 total = 15,3 %
MapServer : 899 open / 3595 total = 25 %
QGIS : 597 open / 3363 total = 17,8 %
GEOS : 51 / 390 = 13,1 %
PostGIS : 189 / 723 = 26,1 %

So GDAL is not particularly a bad citizen in that field ;-) Of course this
comparison doesn't prove much. I haven't look how many are just enhancement
requests, dubious bug reports, etc... It also depends on the policy to close
tickets that lack feedback from reporter, etc ...

Best regards,

Even

> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From scott at agi.com  Wed Dec 22 11:24:45 2010
From: scott at agi.com (Reynolds, Scott)
Date: Wed Dec 22 11:25:55 2010
Subject: [gdal-dev] NGA High Resolution Elevation (HRE) data problem?
Message-ID: <29474044C503AA40A6D6403925FB04EB09745F2A@mail02.stk.com>

Hi,

 

I'm trying to add support for NGA HRE data to our applications using
GDAL 1.7.3 NITF driver.  Sample files 1-4 at
http://www.gwg.nga.mil/ntb/baseline/docs/HRE_spec/index.html are
referenced to UTM zone 11 and appear to be inverted north to south.
NITF imagery I have that is also referenced to UTM looks ok.  Any ideas?

 

Thanks,

Scott

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101222/90cfc0c9/attachment-0001.html
From even.rouault at mines-paris.org  Wed Dec 22 13:47:22 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec 22 13:47:15 2010
Subject: [gdal-dev] NGA High Resolution Elevation (HRE) data problem?
In-Reply-To: <29474044C503AA40A6D6403925FB04EB09745F2A@mail02.stk.com>
References: <29474044C503AA40A6D6403925FB04EB09745F2A@mail02.stk.com>
Message-ID: <201012221947.23055.even.rouault@mines-paris.org>

Scott,

yes I also see the image being flipped upside-down when comparing with google-
earth imagery for example.

I've looked at the coordinate registration info (the IGEOLO record) and it 
looks OK.

UpperLeft : 11N 487873 3627061
UpperRight: 11N 488200 3627060
LowerRight: 11N 488200 3626695
LowerLeft : 11N 487872 3626695

Sometimes there are products where the registration is upside down and we try 
to correct it with a few heuristics, but it is not the case here. This looks 
like a regular NITF file that shouldn't cause problems.

So my only explanation is that the data is indeed written in the wrong 
order... I've looked (very quickly) at the PDF specification of the HRE 
products and didn't see any mention that the image should be interpreted south 
to north.

Do you have the opportunity to check with a non GDAL-based NITF viewer ? Or 
you could also try investigating with the NGA.

Best regards,

Even

Le mercredi 22 d?cembre 2010 17:24:45, Reynolds, Scott a ?crit :
> Hi,
> 
> 
> 
> I'm trying to add support for NGA HRE data to our applications using
> GDAL 1.7.3 NITF driver.  Sample files 1-4 at
> http://www.gwg.nga.mil/ntb/baseline/docs/HRE_spec/index.html are
> referenced to UTM zone 11 and appear to be inverted north to south.
> NITF imagery I have that is also referenced to UTM looks ok.  Any ideas?
> 
> 
> 
> Thanks,
> 
> Scott
From kmckelvey at lizardtech.com  Wed Dec 22 18:03:12 2010
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Wed Dec 22 18:03:17 2010
Subject: [gdal-dev] mrsid_lidar -> mrsid
Message-ID: <C55473998E248B4DAEC5342D698DFE850100C1879B@sea-srv-mail.lizardtech.com>

I would like to fold the mrsid_lidar driver (submitted earlier this year) into the mrsid raster driver.  I plan to keep lidar and raster support separately-configurable in the build, but think it makes sense to present a single driver for MrSID files.  MrSID/LiDAR is still a pretty recent format, but I wanted to give fair warning to anyone who might be using this driver.

Does anyone have any objections to this?

Kirk
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101222/8ff21b6a/attachment.html
From heng.feng at aircominternational.com  Thu Dec 23 02:55:01 2010
From: heng.feng at aircominternational.com (heng.feng)
Date: Thu Dec 23 02:55:03 2010
Subject: [gdal-dev] An issue about using GDALWARP to do
	theNTv2transformation
In-Reply-To: <C3257D068EB03E4498BAC3A96344256803B2D1A28F@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
References: <1292466248833-5838904.post@n2.nabble.com>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB14@sebulba.bezreg-koeln.nrw.de>
	<C3257D068EB03E4498BAC3A96344256803B2A92561@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<1292682078901-5848200.post@n2.nabble.com>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB1D@sebulba.bezreg-koeln.nrw.de>
	<C3257D068EB03E4498BAC3A96344256803B2D1A28F@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
Message-ID: <1293090901312-5861680.post@n2.nabble.com>


http://osgeo-org.1803224.n2.nabble.com/file/n5861680/gdalwarp_problem1.doc
gdalwarp_problem1.doc 

Hi Uwe,

Further to my email sent to you yesterday, I have uploaded the screenshots
showing the results by running the GDALINFO and GDALWARP commands on the
same raster file, which contains the georeferenced information in it. Not
sure if I have misunderstood anything here. From what I can see from
GDALINFO results, the coordinates in that raster data file should not
possibly be located in the west while the GDALWARP error messages seem to
show the opposite. 

Thanks,
Heng
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/An-issue-about-using-GDALWARP-to-do-the-NTv2-transformation-tp5838904p5861680.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Thu Dec 23 03:59:53 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Dec 23 04:00:02 2010
Subject: [gdal-dev] Re: mrsid_lidar -> mrsid
Message-ID: <1293094793.4d130f89aa779@webmail.free.fr>

Kirk,

I have no strong objection, but I'm not sure what the advantage is. Could you
explain the rationale for it ? As far as I can see, MrSID and MG4Lidar drivers
don't share any common code. And I have the feeling that trying to fold them can
potentially lead to issues with the build system due to their dependency on
separate libraries.

The MrSID and JP2MrSID drivers are indeed folded in the same "driver", but they
share a lot of code and both depend on the same third-party lib. With the
MG4Lidar driver, it is different since it links with another lib.

Or is this move done in the context of the GeoExpress v8.0 SDK that if I
understand well can read both raster and lidar files ? If so, will the MG4Lidar
driver require GeoExpress v8.0 SDK or could it be used with the separate LiDAR
SDK 1.1 ? /me a bit confused by all those libraries ;-)

Ah, and what is the timetable objective ? For GDAL 1.8.0 or 1.9.0 ? If for GDAL
1.8.0, the move should be done pretty quickly as the plan was to cut off a first
beta very soon.

Best regards,

Even
From jrepetto at free.fr  Thu Dec 23 04:44:55 2010
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu Dec 23 04:45:02 2010
Subject: [gdal-dev] 1.8 Release - Need to move!
In-Reply-To: <1293026230.4d1203b609369@webmail.free.fr>
References: <4D0B8CE8.7070306@pobox.com> <4D11C68A.60408@free.fr>
	<1293026230.4d1203b609369@webmail.free.fr>
Message-ID: <4D131A17.50903@free.fr>

Le 22/12/2010 14:57, Even Rouault a ?crit :

> I'm not so sure there are many low-hanging fruits. The size of a patch isn't
> necessary a proof of its correctness ;-) Perhaps you could help us and indicate
> what tickets you believe to be appropriate for quick closing/patching ?
>

This is an example, at random : http://trac.osgeo.org/gdal/ticket/2664

Jean-Claude
From even.rouault at mines-paris.org  Thu Dec 23 07:04:32 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Dec 23 07:04:40 2010
Subject: [gdal-dev] 1.8 Release - Need to move!
In-Reply-To: <4D131A17.50903@free.fr>
References: <4D0B8CE8.7070306@pobox.com> <4D11C68A.60408@free.fr>
	<1293026230.4d1203b609369@webmail.free.fr> <4D131A17.50903@free.fr>
Message-ID: <1293105872.4d133ad04961d@webmail.free.fr>

Selon Jean-Claude Repetto <jrepetto@free.fr>:

> Le 22/12/2010 14:57, Even Rouault a ?crit :
>
> > I'm not so sure there are many low-hanging fruits. The size of a patch
> isn't
> > necessary a proof of its correctness ;-) Perhaps you could help us and
> indicate
> > what tickets you believe to be appropriate for quick closing/patching ?
> >
>
> This is an example, at random : http://trac.osgeo.org/gdal/ticket/2664

Hum, this ticket is a bit complicated from a process point of view. It involves
mostly a change in libgeotiff. So only Frank can act on this one.

>
> Jean-Claude
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From warmerdam at pobox.com  Thu Dec 23 09:56:08 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec 23 09:56:10 2010
Subject: [gdal-dev] 1.8 Release - Need to move!
In-Reply-To: <1293105872.4d133ad04961d@webmail.free.fr>
References: <4D0B8CE8.7070306@pobox.com> <4D11C68A.60408@free.fr>
	<1293026230.4d1203b609369@webmail.free.fr> <4D131A17.50903@free.fr>
	<1293105872.4d133ad04961d@webmail.free.fr>
Message-ID: <AANLkTim6Ap7UH=gJFuqtniX2TdRiL1dkKbW6JbEBWBMr@mail.gmail.com>

On Thu, Dec 23, 2010 at 7:04 AM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Selon Jean-Claude Repetto <jrepetto@free.fr>:
>
>> Le 22/12/2010 14:57, Even Rouault a ?crit :
>>
>> > I'm not so sure there are many low-hanging fruits. The size of a patch
>> isn't
>> > necessary a proof of its correctness ;-) Perhaps you could help us and
>> indicate
>> > what tickets you believe to be appropriate for quick closing/patching ?
>> >
>>
>> This is an example, at random : http://trac.osgeo.org/gdal/ticket/2664
>
> Hum, this ticket is a bit complicated from a process point of view. It involves
> mostly a change in libgeotiff. So only Frank can act on this one.

Jean-Claude,

I do not like to extend the projection method list for GeoTIFF format
without careful consideration and documentation.  In fact, it ought to
only be done by a process of agreement of the geotiff community.
So, I don't consider this an easy change at all.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Programmer for Rent
From georgec_511 at yahoo.com  Thu Dec 23 11:13:11 2010
From: georgec_511 at yahoo.com (George C)
Date: Thu Dec 23 11:20:01 2010
Subject: [gdal-dev] HRTI question 
In-Reply-To: <1293090901312-5861680.post@n2.nabble.com>
References: <1292466248833-5838904.post@n2.nabble.com>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB14@sebulba.bezreg-koeln.nrw.de>
	<C3257D068EB03E4498BAC3A96344256803B2A92561@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<1292682078901-5848200.post@n2.nabble.com>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB1D@sebulba.bezreg-koeln.nrw.de>
	<C3257D068EB03E4498BAC3A96344256803B2D1A28F@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<1293090901312-5861680.post@n2.nabble.com>
Message-ID: <56A15FB0-9F62-4D1C-89E8-CF30C4A33174@yahoo.com>

Has anyone ever heard of HRTI?  If so, have you used it for anything?  Can gdal use it?

Thanks
George
> 
From mateusz at loskot.net  Thu Dec 23 11:58:17 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Dec 23 11:55:05 2010
Subject: [gdal-dev] HRTI question
In-Reply-To: <56A15FB0-9F62-4D1C-89E8-CF30C4A33174@yahoo.com>
References: <1292466248833-5838904.post@n2.nabble.com>	<240EE7C956B2CB439C613DF6CEC8A32D037BBB14@sebulba.bezreg-koeln.nrw.de>	<C3257D068EB03E4498BAC3A96344256803B2A92561@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>	<1292682078901-5848200.post@n2.nabble.com>	<240EE7C956B2CB439C613DF6CEC8A32D037BBB1D@sebulba.bezreg-koeln.nrw.de>	<C3257D068EB03E4498BAC3A96344256803B2D1A28F@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>	<1293090901312-5861680.post@n2.nabble.com>
	<56A15FB0-9F62-4D1C-89E8-CF30C4A33174@yahoo.com>
Message-ID: <4D137FA9.8060108@loskot.net>

On 23/12/10 16:13, George C wrote:
> Has anyone ever heard of HRTI?

HRTI is simple a very accurate DEM with very high spatial resolution.
It's not a format for data storage or transportation,
rather a (sub-)technology.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From schmitzu at arcor.de  Thu Dec 23 14:46:54 2010
From: schmitzu at arcor.de (Uwe Schmitz)
Date: Thu Dec 23 14:46:57 2010
Subject: [gdal-dev] An issue about using GDALWARP to do
	theNTv2transformation
In-Reply-To: <C3257D068EB03E4498BAC3A96344256803B2D1A28F@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
References: <1292466248833-5838904.post@n2.nabble.com>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB14@sebulba.bezreg-koeln.nrw.de>
	<C3257D068EB03E4498BAC3A96344256803B2A92561@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<1292682078901-5848200.post@n2.nabble.com>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB1D@sebulba.bezreg-koeln.nrw.de>
	<C3257D068EB03E4498BAC3A96344256803B2D1A28F@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
Message-ID: <1293133614782-5862681.post@n2.nabble.com>


Heng,

heng.feng wrote:
> 
> Hi Uwe,
> 
> Thanks for your reply. The l0.tif file does not contain any georeferenced
> information. However, I have run the GDALINFO command on another raster
> data file which is in the same map data set provided by the customer and
> hence is supposed to be georeferenced in the way as the l0.tif file. The
> command output is sent as attached. As mentioned before, I also did the
> NTv2 transformation on  this raster data file
> (Notrufzonen_50m_v11_6_EPOS.tif) with the same GDALWARP command and the
> same grid shift file. I also got a lot of error messages saying that some
> coordinates are outside the area of the grid shift file. And with the
> "+x_0=500000" parameter, the output error messages are much less than the
> ones with the "+x_0=4500000" parameter.
> 
> Thanks for your help again.
> 

from your screenshot I see that georeference information 
of your file seems to be OK. So forget about my comment
about missing meridian prefixes, that's not the case.

But ..., your file is very large (the extent, not the size).
Please notice, that due to the nature of the NTv2 approach
it is not possible to calculate coordinates outside the
extent of the grid. The BeTA2007 grid covers longitudes
between 5d30' to 15d40' East. Your Screenshot of gdalinfo
shows that the longitude of the upper left corner is
4d54'45.24" East and hence outside the BeTA2007 grid.

OK, what can you do? BeTA2007 has submeter accuracy and
I believe, that you don't need it for you data (one pixel 
covers 50m*50m). So you can try the 7-Parameter Helmert
approach described by EPSG::1776 with "+towgs84=..."
Parameter instead of "+nadgrids=...". This will result in
errors of max. 3m in comparison to BeTA2007. Not that
bad for your data ;-)

Another way is to specify the "null" grid as fall back for 
coordinates outside the BeTA2007 grid, like so:

   ... +nadgrids=C:\fh\comar ch\BETA2007.gsb,null

But be aware that coordinates outside the BeTA2007 grid experience
no datum shift. This may result in errors up to 200m.

Hope that helps.

Regards
Uwe
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/An-issue-about-using-GDALWARP-to-do-the-NTv2-transformation-tp5838904p5862681.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From gbburkhardt at verizon.net  Thu Dec 23 15:02:24 2010
From: gbburkhardt at verizon.net (Glenn Burkhardt)
Date: Thu Dec 23 16:03:19 2010
Subject: [gdal-dev] Re:  building Java bindings on MinGW
Message-ID: <2396298.1279871.1293134544439.JavaMail.root@vznit170136>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101223/80bac83e/attachment.html
From szekerest at gmail.com  Thu Dec 23 17:45:25 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Dec 23 17:45:29 2010
Subject: [gdal-dev] mrsid_lidar -> mrsid
In-Reply-To: <C55473998E248B4DAEC5342D698DFE850100C1879B@sea-srv-mail.lizardtech.com>
References: <C55473998E248B4DAEC5342D698DFE850100C1879B@sea-srv-mail.lizardtech.com>
Message-ID: <AANLkTi=tZ1R_zuvdyWwYtNX23tyXPwooZAfQAimBkeT=@mail.gmail.com>

Kirk,

Would it be a big deal to provide support for DSDK 8 in gdal? At the first
sight the only issue is the missing getVersion function in MrSIDImageReader
referenced in mrsiddataset.cpp. line 1448. We could probably extract the
same information from a different API function call.

Best regards,

Tamas



2010/12/23 Kirk McKelvey <kmckelvey@lizardtech.com>

> I would like to fold the mrsid_lidar driver (submitted earlier this year)
> into the mrsid raster driver.  I plan to keep lidar and raster support
> separately-configurable in the build, but think it makes sense to present a
> single driver for MrSID files.  MrSID/LiDAR is still a pretty recent format,
> but I wanted to give fair warning to anyone who might be using this driver.
>
>
>
> Does anyone have any objections to this?
>
>
>
> Kirk
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101223/e997cb44/attachment.html
From kmckelvey at lizardtech.com  Thu Dec 23 18:46:16 2010
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Thu Dec 23 18:46:21 2010
Subject: [gdal-dev] RE: mrsid_lidar -> mrsid
In-Reply-To: <1293094793.4d130f89aa779@webmail.free.fr>
References: <1293094793.4d130f89aa779@webmail.free.fr>
Message-ID: <C55473998E248B4DAEC5342D698DFE850100C187D1@sea-srv-mail.lizardtech.com>

Even,

Thanks for the feedback.

Yes, starting with v8.0, the MrSID raster and lidar SDKs are packaged together.  This is not to say they are unified - in fact the two SDKs are literally just in there sitting next to each other.  Nevertheless, they are intended to be used together for full treatment of .sid files, and will only grow closer together in future releases.

So my first concern is just for people using the MrSID v8.0 SDK to get full support for MrSID (i.e., raster and lidar) without having to configure two drivers.  Strictly speaking this could be addressed without merging the drivers, simply by updating the build scripts and makefiles (e.g., by searching for a MRSID_LIDAR_DIR if MRSID_DIR is set).  Doing this would be sufficient for the short term and I think achievable for 1.8.  I would preserve the ability to build with past versions of the MrSID SDK and with separate raster/lidar SDKs.

I still would like to look at merging the drivers, but as you said there is not much shared code so this is a longer-term project.  More thoughts on this after the holidays... (and others welcomed in the meantime).

Kirk.

-----Message d'origine-----
De?: Even Rouault [mailto:even.rouault@mines-paris.org] 
Envoy??: Thursday, December 23, 2010 1:00 AM
??: Kirk McKelvey
Cc?: gdal-dev@lists.osgeo.org
Objet?: Re: mrsid_lidar -> mrsid

Kirk,

I have no strong objection, but I'm not sure what the advantage is. Could you
explain the rationale for it ? As far as I can see, MrSID and MG4Lidar drivers
don't share any common code. And I have the feeling that trying to fold them can
potentially lead to issues with the build system due to their dependency on
separate libraries.

The MrSID and JP2MrSID drivers are indeed folded in the same "driver", but they
share a lot of code and both depend on the same third-party lib. With the
MG4Lidar driver, it is different since it links with another lib.

Or is this move done in the context of the GeoExpress v8.0 SDK that if I
understand well can read both raster and lidar files ? If so, will the MG4Lidar
driver require GeoExpress v8.0 SDK or could it be used with the separate LiDAR
SDK 1.1 ? /me a bit confused by all those libraries ;-)

Ah, and what is the timetable objective ? For GDAL 1.8.0 or 1.9.0 ? If for GDAL
1.8.0, the move should be done pretty quickly as the plan was to cut off a first
beta very soon.

Best regards,

Even
From heng.feng at aircominternational.com  Thu Dec 23 22:14:34 2010
From: heng.feng at aircominternational.com (heng.feng)
Date: Thu Dec 23 22:14:36 2010
Subject: [gdal-dev] An issue about using GDALWARP to do
	theNTv2transformation
In-Reply-To: <1293133614782-5862681.post@n2.nabble.com>
References: <1292466248833-5838904.post@n2.nabble.com>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB14@sebulba.bezreg-koeln.nrw.de>
	<C3257D068EB03E4498BAC3A96344256803B2A92561@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<1292682078901-5848200.post@n2.nabble.com>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB1D@sebulba.bezreg-koeln.nrw.de>
	<C3257D068EB03E4498BAC3A96344256803B2D1A28F@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<1293133614782-5862681.post@n2.nabble.com>
Message-ID: <C3257D068EB03E4498BAC3A96344256803B2E476EA@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>


Thanks for your suggestions, Uwe. They are surely very helpful. I will try them out and let you know if I need any further help from you.

From: Uwe Schmitz [via OSGeo.org] [mailto:ml-node+5862681-1425697383-308251@n2.nabble.com]
Sent: 23 December 2010 19:47
To: Heng Feng
Subject: RE: [gdal-dev] An issue about using GDALWARP to do theNTv2transformation

Heng,
heng.feng wrote:
Hi Uwe,

Thanks for your reply. The l0.tif file does not contain any georeferenced information. However, I have run the GDALINFO command on another raster data file which is in the same map data set provided by the customer and hence is supposed to be georeferenced in the way as the l0.tif file. The command output is sent as attached. As mentioned before, I also did the NTv2 transformation on  this raster data file (Notrufzonen_50m_v11_6_EPOS.tif) with the same GDALWARP command and the same grid shift file. I also got a lot of error messages saying that some coordinates are outside the area of the grid shift file. And with the "+x_0=500000" parameter, the output error messages are much less than the ones with the "+x_0=4500000" parameter.

Thanks for your help again.
from your screenshot I see that georeference information
of your file seems to be OK. So forget about my comment
about missing meridian prefixes, that's not the case.

But ..., your file is very large (the extent, not the size).
Please notice, that due to the nature of the NTv2 approach
it is not possible to calculate coordinates outside the
extent of the grid. The BeTA2007 grid covers longitudes
between 5d30' to 15d40' East. Your Screenshot of gdalinfo
shows that the longitude of the upper left corner is
4d54'45.24" East and hence outside the BeTA2007 grid.

OK, what can you do? BeTA2007 has submeter accuracy and
I believe, that you don't need it for you data (one pixel
covers 50m*50m). So you can try the 7-Parameter Helmert
approach described by EPSG::1776 with "+towgs84=..."
Parameter instead of "+nadgrids=...". This will result in
errors of max. 3m in comparison to BeTA2007. Not that
bad for your data ;-)

Another way is to specify the "null" grid as fall back for
coordinates outside the BeTA2007 grid, like so:

   ... +nadgrids=C:\fh\comar ch\BETA2007.gsb,null

But be aware that coordinates outside the BeTA2007 grid experience
no datum shift. This may result in errors up to 200m.

Hope that helps.

Regards
Uwe
________________________________
View message @ http://osgeo-org.1803224.n2.nabble.com/An-issue-about-using-GDALWARP-to-do-the-NTv2-transformation-tp5838904p5862681.html
To unsubscribe from An issue about using GDALWARP to do the NTv2 transformation, click here<http://osgeo-org.1803224.n2.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5838904&code=aGVuZy5mZW5nQGFpcmNvbWludGVybmF0aW9uYWwuY29tfDU4Mzg5MDR8MTI3MzEwMjEw>.

AIRCOM International
http://www.facebook.com/Aircom | http://www.twitter.com/aircomint | http://blog.aircominternational.com/ | http://www.youtube.com/aircomint 

Disclaimer: 
This e-mail message is confidential and should not be used by, or disclosed to, anyone except the addressee. If you receive this message in error, please advise us immediately on +44 (0) 1932 442000. Since e-mail transmission is not secure or error free, we do not accept responsibility for changes to any e-mail which occur after it has been sent. Attachments to this e-mail may contain software viruses which could damage your systems. You should therefore virus-check all attachments before opening. AIRCOM may monitor incoming and outgoing emails through its networks and by responding to this email, you consent to such monitoring. The views and opinions expressed in this e-mail are those of the author only and not of AIRCOM. We do not intend to enter into any legal commitments or contracts by e-mail. Registered Office: Cassini Court, Randalls Research Park, Randalls Way, Leatherhead, Surrey, KT22 7TW, UK. AIRCOM International Ltd registered in England No. 3052022. VAT number 811 5323 68.
Save a tree. Don't print this e-mail unless it's really necessary

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/An-issue-about-using-GDALWARP-to-do-the-NTv2-transformation-tp5838904p5863050.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101223/987b1d79/attachment-0001.html
From warmerdam at pobox.com  Sat Dec 25 14:15:09 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Dec 25 14:15:11 2010
Subject: [gdal-dev] GDAL/OGR 1.8.0beta1 Released
Message-ID: <AANLkTimbE_64=_KjHnYveVN_4VUf=vE_25UsjwjrnPws@mail.gmail.com>

Folks,

I somehow got busy with the holidays and didn't get the
GDAL/OGR 1.8.0 beta1 out last weekend.  I've taken a few
minutes to prepare a beta1 snapshot and put it up.  I'd
appreciate bug reports via Trac.

  http://download.osgeo.org/gdal/gdal-1.8.0beta1.tar.gz
  http://download.osgeo.org/gdal/gdal-1.8.0beta1.tar.gz.md5

  http://download.osgeo.org/gdal/gdal180beta1.zip
  http://download.osgeo.org/gdal/gdal180beta1.zip.md5

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Programmer for Rent
From mateusz at loskot.net  Sat Dec 25 17:14:39 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Dec 25 17:14:46 2010
Subject: [gdal-dev] Git mirror moved to GitHub
Message-ID: <4D166CCF.1090004@loskot.net>

Hi,

FYI, I've moved Git repository mirroring GDAL SVN trunk
Gitorious.org to GitHub.org.

https://github.com/mloskot/gdal

I keep it synchronised against SVN trunk daily or so.

By the way, Sandro maintains Git repositories mirrors for GEOS, PostGIS

https://github.com/strk/geos
https://github.com/strk/postgis

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From edikaradumi at gmail.com  Mon Dec 27 12:11:30 2010
From: edikaradumi at gmail.com (Edi.Karadumi)
Date: Mon Dec 27 12:11:32 2010
Subject: [gdal-dev] C# Binding ForceToMultiPolygon
Message-ID: <1293469890222-5869504.post@n2.nabble.com>


Hi everyone,
im a new user to ogr and i have used c# binding and then converted them to
use to my application in vb.net.
Im making an application to import shape files to postgres. I have made the
connection, imported the data, but i need to know the progress so i have
used a loop to transfer the data. Also i have imported them to an existing
layer in postgres, but its type is multipolygon and sometimes i have poligon
so it throws an exception. I have read that exists some function
forcetopolygon and forcetomultipolygon but i cant find them i c# bindings.
can anyone help me? here is the code:

Ogr.RegisterAll()

                inputDs = Ogr.Open(filePath, 0)

                If inputDs IsNot Nothing Then
                    If inputDs.GetLayerCount > 0 Then
                        oInputLayer = inputDs.GetLayerByIndex(0)

                        drv = Ogr.GetDriverByName("PostgreSQL")
                        outputDs = drv.Open(ServerConnection, 1)
                        '***********
                        'the postgre table has multiple geometry columns
                        '*************
                        oOutputLayer =
outputDs.GetLayerByName(CadastralZoneImportTable + "(polygon)")
                        
                        Dim i As Long
                       
                        oInputLayer.ResetReading()
                        If oInputLayer.GetFeatureCount(1) > 0 Then

                            Dim MaxFeaturesCount =
oInputLayer.GetFeatureCount(1)
                            Dim j As Long = 0

                            oOutputLayer.StartTransaction()
                            For i = 0 To MaxFeaturesCount - 1
                                oOutputFeature = New
OSGeo.OGR.Feature(oOutputLayer.GetLayerDefn)
                                oInputFeature = oInputLayer.GetNextFeature

                                If oInputFeature.GetFieldIndex("cze_number")
>= 0 Then
                                    oOutputFeature.SetField("cze_number",
oInputFeature.GetFieldAsInteger("cze_number"))
                                End If

                                If oInputFeature.GetFieldIndex("cze_name")
>= 0 Then
                                    oOutputFeature.SetField("cze_name",
oInputFeature.GetFieldAsString("cze_name"))
                                End If

                                If oInputFeature.GetFieldIndex("bau_total")
>= 0 Then
                                    oOutputFeature.SetField("bau_total",
oInputFeature.GetFieldAsString("bau_total"))
                                End If

                                If oInputFeature.GetGeometryRef IsNot
Nothing Then
                                   
oOutputFeature.SetGeometryDirectly(oInputFeature.GetGeometryRef)
                                End If
                                'here throws the exception about the
multipolygon
                                oOutputLayer.CreateFeature(oOutputFeature)

                                oOutputFeature.Dispose()
                                oInputFeature.Dispose()

                            Next

                            If i = MaxFeaturesCount Then
                                oOutputLayer.CommitTransaction()
                            Else
                                oOutputLayer.RollbackTransaction()
                            End If

                        End If

                    End If
                Else

                    MsgBox("error importing file: " + filePath,
MsgBoxStyle.SystemModal + MsgBoxStyle.Information)

                End If
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/C-Binding-ForceToMultiPolygon-tp5869504p5869504.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ahmettemiz88 at gmail.com  Tue Dec 28 03:21:24 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Tue Dec 28 03:21:27 2010
Subject: [gdal-dev] to get postgis-polygon object using resultset in Java
Message-ID: <AANLkTi=2bz2J2Zq50XdJUWMCGf7qrm0GdJMuye7vC8R9@mail.gmail.com>

hello

how can I get postgis-polygon object using Resultset in Java ?

like this way :

ResultSet rs = stmt.executeQuery(qstr);
  while (rs.next()) {
    gdal.Geometry  geo=????
  }

regards
-- 
Ahmet Temiz
Jeoloji M?h.
Planlama ve Zarar Azaltma Dairesi Ba?kanl???
Bilgi ve CBS grubu
Eski?ehir Yolu 10. km.
Lodumlu / Ankara
Tel : 0 312 2872680 / 1535
From chaitanya.ch at gmail.com  Tue Dec 28 03:49:19 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Dec 28 03:49:22 2010
Subject: [gdal-dev] to get postgis-polygon object using resultset in Java
In-Reply-To: <AANLkTi=2bz2J2Zq50XdJUWMCGf7qrm0GdJMuye7vC8R9@mail.gmail.com>
References: <AANLkTi=2bz2J2Zq50XdJUWMCGf7qrm0GdJMuye7vC8R9@mail.gmail.com>
Message-ID: <AANLkTikkyHbzeRnBnfqkaQ95CYWHAW98v3EJ=cOVA=XK@mail.gmail.com>

Ahmet,

If you are querying the postgis database directly, you can use ST_AsText()
or ST_AsBinary() to get the geometry in the WKT or the WKB format and use
OGRGeometry::importFromWkt() or OGRGeometry::importFromWkb() respectively to
load them into the OGR objects. This question is actually for the postgis
list.

2010/12/28 ahmet temiz <ahmettemiz88@gmail.com>

> hello
>
> how can I get postgis-polygon object using Resultset in Java ?
>
> like this way :
>
> ResultSet rs = stmt.executeQuery(qstr);
>  while (rs.next()) {
>    gdal.Geometry  geo=????
>  }
>
> regards
> --
> Ahmet Temiz
> Jeoloji M?h.
> Planlama ve Zarar Azaltma Dairesi Ba?kanl???
> Bilgi ve CBS grubu
> Eski?ehir Yolu 10. km.
> Lodumlu / Ankara
> Tel : 0 312 2872680 / 1535
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101228/5d013b4e/attachment.html
From shashishaw at gmail.com  Tue Dec 28 04:23:51 2010
From: shashishaw at gmail.com (shashishaw)
Date: Tue Dec 28 04:23:53 2010
Subject: [gdal-dev] PCIDSK .pix feature attribute information not visible in
	geomatica.
Message-ID: <1293528231423-5871388.post@n2.nabble.com>


Hi,
I am using the current trunk of GDAL/OGR 
version(v1.7.3, revision 21324) to convert a .shp file 
to .pix file. The steps used  are taken from 
the online tutorial and are as below.

1.  // Open the datasource.
    OGRDataSource* pSrc = OGRSFDriverRegistrar::Open("input.shp",FALSE);

2.  // Read the source layer.
    OGRLayer* pSrcLayer = pSrc->GetLayer(0);

3.  // Initialise the output driver.
    const char* pszDriverName = "PCIDSK";
    OGRSFDriver* pDriver = NULL;
    pDriver = OGRSFDriverRegistrar::GetRegistrar()
	 	 ->GetDriverByName(pszDriverName);

4.  // Test capability.
    int result = pDriver->TestCapability("CreateDataSource");

5.  // Create the data source.
    OGRDataSource* pDst = pDriver->CreateDataSource("out.pix", NULL );

6.  // Create the output layer.
    OGRLayer* pDstLayer = pDst->CreateLayer("out_layer",
       		   	                    pSrcLayer->GetSpatialRef(),
				            pSrcLayer->GetLayerDefn()->GetGeomType());

7.  // Create field definitions for output layer.
    for( int i = 0; i < pSrcLayer->GetLayerDefn()->GetFieldCount(); i++){
	 OGRFieldDefn dstFieldDefn(pSrcLayer->GetLayerDefn()->GetFieldDefn(i));
	
	 // Create the destination field.
	 OGRErr err = pDstLayer->CreateField(&dstFieldDefn);

    }
   
8.  // Read and set the features.
    pSrcLayer->ResetReading();
    OGRFeature* pSrcFeature = NULL;
    while( NULL != (pSrcFeature = pSrcLayer->GetNextFeature())){
        // Create the destination feature.
        OGRFeature* pDstFeature =
OGRFeature::CreateFeature(pDstLayer->GetLayerDefn());
        err = pDstFeature->SetFrom(pSrcFeature,FALSE);
        // Add the feature to the layer.
        err = pDstLayer->CreateFeature(pDstFeature);

        OGRFeature::DestroyFeature(pDstFeature);
        OGRFeature::DestroyFeature(pSrcFeature);
    }

9.  // Cleanup
    OGRDataSource::DestroyDataSource(pDst);
    OGRDataSource::DestroyDataSource(pSrc);

NOTE: Error handling has been ignored.

On viewing the .pix output file in PCI Geomatica(Focus), the geometry
is correctly displayed, however the attribute information(using the
Attribute
Manager) does not show any details(empty fields). The .pix when viewed in a 
text editor does show the attribute information that is present in the .shp
file. 

Lastly, when I read the generated output .pix file using the 
GDAL/OGR apis, I am able to correctly read the feature attribute
information.

Are there some additional steps to be performed in order to correctly set
the attributes for a given file so that they are displayed in PCI Geomatica.

Thanks,
Shashi.
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/PCIDSK-pix-feature-attribute-information-not-visible-in-geomatica-tp5871388p5871388.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Tue Dec 28 04:44:21 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Dec 28 04:44:22 2010
Subject: [gdal-dev] to get postgis-polygon object using resultset in
	Java
In-Reply-To: <0016e659fce22cd1ad049875379b@google.com>
References: <AANLkTikkyHbzeRnBnfqkaQ95CYWHAW98v3EJ=cOVA=XK@mail.gmail.com>
	<0016e659fce22cd1ad049875379b@google.com>
Message-ID: <AANLkTikJW=efsQV2bPYNCWQbjRGk6mcJWp3C=kB_-sSx@mail.gmail.com>

Ahmet,

You might want to work with WKT while debugging and switch to WKB later.
Did you use ST_AsBinary(geometry column) in the SQL query string?

On Tue, Dec 28, 2010 at 3:08 PM, <ahmettemiz88@gmail.com> wrote:

> thank you
>
> while (rs.next()) {
> //g1 =
> com.vividsolutions.jts.geom.Geometry.wkbReader.read(WKBReader.hexToBytes(rs.getString(1)));
> g1 = org.gdal.ogr.Geometry.CreateFromWkb(rs.getBytes(1));
> if (g1 != null) {
> System.out.println( g1.GetGeometryType());
> }
>
> }
>
> g1 returns null.
> can you tell me what the wrong is ?
>
> regards
>
> 28 Ara 2010 10:49 tarihinde, Chaitanya kumar CH <chaitanya.ch@gmail.com>
> ?unu yazd?:
>
> > Ahmet,
> >
> > If you are querying the postgis database directly, you can use
> ST_AsText() or ST_AsBinary() to get the geometry in the WKT or the WKB
> format and use OGRGeometry::importFromWkt()
> > or OGRGeometry::importFromWkb() respectively to load them into the OGR
> objects. This question is actually for the postgis list.
> >
> > 2010/12/28 ahmet temiz ahmettemiz88@gmail.com>
> >
> > hello
> >
> >
> >
> > how can I get postgis-polygon object using Resultset in Java ?
> >
> >
> >
> > like this way :
> >
> >
> >
> > ResultSet rs = stmt.executeQuery(qstr);
> >
> >  while (rs.next()) {
> >
> >    gdal.Geometry  geo=????
> >
> >  }
> >
> >
> >
> > regards
> >
> > --
> >
> > Ahmet Temiz
> >
> > Jeoloji M?h.
> >
> > Planlama ve Zarar Azaltma Dairesi Ba?kanl???
> >
> > Bilgi ve CBS grubu
> >
> > Eski?ehir Yolu 10. km.
> >
> > Lodumlu / Ankara
> >
> > Tel : 0 312 2872680 / 1535
> >
> > _______________________________________________
> >
> > gdal-dev mailing list
> >
> > gdal-dev@lists.osgeo.org
> >
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> >
> > --
> > Best regards,
> > Chaitanya kumar CH.
> > /t?a???nj?/ /k?m?r/
> > +91-9494447584
> > 17.2416N 80.1426E
> >
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101228/af5bdb0f/attachment.html
From ahmettemiz88 at gmail.com  Tue Dec 28 04:38:31 2010
From: ahmettemiz88 at gmail.com (ahmettemiz88@gmail.com)
Date: Tue Dec 28 05:45:46 2010
Subject: [gdal-dev] to get postgis-polygon object using resultset in
	Java
In-Reply-To: <AANLkTikkyHbzeRnBnfqkaQ95CYWHAW98v3EJ=cOVA=XK@mail.gmail.com>
Message-ID: <0016e659fce22cd1ad049875379b@google.com>

thank you

while (rs.next()) {
//g1 =  
com.vividsolutions.jts.geom.Geometry.wkbReader.read(WKBReader.hexToBytes(rs.getString(1)));
g1 = org.gdal.ogr.Geometry.CreateFromWkb(rs.getBytes(1));
if (g1 != null) {
System.out.println( g1.GetGeometryType());
}

}

g1 returns null.
can you tell me what the wrong is ?

regards

28 Ara 2010 10:49 tarihinde, Chaitanya kumar CH <chaitanya.ch@gmail.com>  
?unu yazd?:
> Ahmet,

> If you are querying the postgis database directly, you can use  
> ST_AsText() or ST_AsBinary() to get the geometry in the WKT or the WKB  
> format and use OGRGeometry::importFromWkt()
> or OGRGeometry::importFromWkb() respectively to load them into the OGR  
> objects. This question is actually for the postgis list.

> 2010/12/28 ahmet temiz ahmettemiz88@gmail.com>

> hello



> how can I get postgis-polygon object using Resultset in Java ?



> like this way :



> ResultSet rs = stmt.executeQuery(qstr);

> while (rs.next()) {

> gdal.Geometry geo=????

> }



> regards

> --

> Ahmet Temiz

> Jeoloji M?h.

> Planlama ve Zarar Azaltma Dairesi Ba?kanl???

> Bilgi ve CBS grubu

> Eski?ehir Yolu 10. km.

> Lodumlu / Ankara

> Tel : 0 312 2872680 / 1535

> _______________________________________________

> gdal-dev mailing list

> gdal-dev@lists.osgeo.org

> http://lists.osgeo.org/mailman/listinfo/gdal-dev




> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101228/eb19b9af/attachment-0001.html
From schut at sarvision.nl  Wed Dec 29 08:19:20 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Dec 29 08:19:24 2010
Subject: [gdal-dev] gdal swig python's setup.py not python3 compatible
Message-ID: <4D1B3558.2080606@sarvision.nl>

Hi,

some time ago, Arch linux made the rather bold decision to have python3 
as system python default, of course with a /usr/bin/python2 alternative 
sitting next to it. However, as the /usr/bin/python link is pointing to 
/usr/bin/python3, gdal's swig python module's setup.py is being called 
with python3, and appears to be not python3 compatible:

checking for python bindings... checking for python... python
checking for location of Python Makefiles...   File "<string>", line 3
     print sys.prefix
             ^
SyntaxError: invalid syntax
   File "<string>", line 3
     print sys.prefix
             ^
SyntaxError: invalid syntax
   File "<string>", line 3
     print sys.version[:3]
             ^
SyntaxError: invalid syntax
found
checking where to install Python modules... /lib/python/site-packages
enabled
checking for python setuptools...   File "<string>", line 3
     print 1
           ^
SyntaxError: invalid syntax
not found
configure: checking whether we should include rasdaman support...
         rasdaman support not requested.
configure: creating ./config.status
config.status: creating GDALmake.opt

Imho the easiest way to fix this would be to have a '#!/usr/bin/python2' 
as first line in setup.py; I suppose every distro has also a 
/usr/bin/python2 executable/link, even if there is not yet a python3 one.

Regards,
Vincent.
From schut at sarvision.nl  Wed Dec 29 08:27:09 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Dec 29 08:27:14 2010
Subject: [gdal-dev] gdal swig python's setup.py not python3 compatible
In-Reply-To: <4D1B3558.2080606@sarvision.nl>
References: <4D1B3558.2080606@sarvision.nl>
Message-ID: <4D1B372D.9000302@sarvision.nl>

Oops, wrong conclusion. Seems more complicated than I thought, as there 
are some python checks in configure that use python...

Lets change this into a question:

as I have both python2 and python3, with /usr/bin/python linking to 
python3 (so python3 is the default), and gdal's python extension seems 
to be not python3 compatible (at least the build/install method), what 
would be the prefered way to have gdal's configure/make/make install use 
python2 for everything? E.g. use /usr/bin/python2 as executable, and the 
python2 site-packages dir for installing.

As lots of my own scripts and other extensions I use are still not 
really python3-ready, I don't mind using python2 myself, but I'd like to 
keep the system default to python3 because I don't want to mess to much 
with my system's defaults (I tend to forget stuff I change manually, etc.)

Tia,
Vincent.

On 12/29/2010 02:19 PM, Vincent Schut wrote:
> Hi,
>
> some time ago, Arch linux made the rather bold decision to have python3
> as system python default, of course with a /usr/bin/python2 alternative
> sitting next to it. However, as the /usr/bin/python link is pointing to
> /usr/bin/python3, gdal's swig python module's setup.py is being called
> with python3, and appears to be not python3 compatible:
>
> checking for python bindings... checking for python... python
> checking for location of Python Makefiles... File "<string>", line 3
> print sys.prefix
> ^
> SyntaxError: invalid syntax
> File "<string>", line 3
> print sys.prefix
> ^
> SyntaxError: invalid syntax
> File "<string>", line 3
> print sys.version[:3]
> ^
> SyntaxError: invalid syntax
> found
> checking where to install Python modules... /lib/python/site-packages
> enabled
> checking for python setuptools... File "<string>", line 3
> print 1
> ^
> SyntaxError: invalid syntax
> not found
> configure: checking whether we should include rasdaman support...
> rasdaman support not requested.
> configure: creating ./config.status
> config.status: creating GDALmake.opt
>
> Imho the easiest way to fix this would be to have a '#!/usr/bin/python2'
> as first line in setup.py; I suppose every distro has also a
> /usr/bin/python2 executable/link, even if there is not yet a python3 one.
>
> Regards,
> Vincent.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Wed Dec 29 12:06:25 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec 29 12:06:33 2010
Subject: [gdal-dev] gdal swig python's setup.py not python3 compatible
In-Reply-To: <4D1B372D.9000302@sarvision.nl>
References: <4D1B3558.2080606@sarvision.nl> <4D1B372D.9000302@sarvision.nl>
Message-ID: <201012291806.25349.even.rouault@mines-paris.org>

Vincent,

you didn't mention which GDAL version you use. Since GDAL 1.7.0, the Python 
bindings work with both python 2.X and 3.X. But I see that the autoconf check  
for python isn't python3 ready indeed. So you can ignore the configure errors 
and just cd swig/python and build the buindings from there directly (make 
build; make install)

Best regards,

Even

Le mercredi 29 d?cembre 2010 14:27:09, Vincent Schut a ?crit :
> Oops, wrong conclusion. Seems more complicated than I thought, as there
> are some python checks in configure that use python...
> 
> Lets change this into a question:
> 
> as I have both python2 and python3, with /usr/bin/python linking to
> python3 (so python3 is the default), and gdal's python extension seems
> to be not python3 compatible (at least the build/install method), what
> would be the prefered way to have gdal's configure/make/make install use
> python2 for everything? E.g. use /usr/bin/python2 as executable, and the
> python2 site-packages dir for installing.
> 
> As lots of my own scripts and other extensions I use are still not
> really python3-ready, I don't mind using python2 myself, but I'd like to
> keep the system default to python3 because I don't want to mess to much
> with my system's defaults (I tend to forget stuff I change manually, etc.)
> 
> Tia,
> Vincent.
> 
> On 12/29/2010 02:19 PM, Vincent Schut wrote:
> > Hi,
> > 
> > some time ago, Arch linux made the rather bold decision to have python3
> > as system python default, of course with a /usr/bin/python2 alternative
> > sitting next to it. However, as the /usr/bin/python link is pointing to
> > /usr/bin/python3, gdal's swig python module's setup.py is being called
> > with python3, and appears to be not python3 compatible:
> > 
> > checking for python bindings... checking for python... python
> > checking for location of Python Makefiles... File "<string>", line 3
> > print sys.prefix
> > ^
> > SyntaxError: invalid syntax
> > File "<string>", line 3
> > print sys.prefix
> > ^
> > SyntaxError: invalid syntax
> > File "<string>", line 3
> > print sys.version[:3]
> > ^
> > SyntaxError: invalid syntax
> > found
> > checking where to install Python modules... /lib/python/site-packages
> > enabled
> > checking for python setuptools... File "<string>", line 3
> > print 1
> > ^
> > SyntaxError: invalid syntax
> > not found
> > configure: checking whether we should include rasdaman support...
> > rasdaman support not requested.
> > configure: creating ./config.status
> > config.status: creating GDALmake.opt
> > 
> > Imho the easiest way to fix this would be to have a '#!/usr/bin/python2'
> > as first line in setup.py; I suppose every distro has also a
> > /usr/bin/python2 executable/link, even if there is not yet a python3 one.
> > 
> > Regards,
> > Vincent.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From mpg at flaxen.com  Wed Dec 29 13:47:31 2010
From: mpg at flaxen.com (Michael Gerlek)
Date: Wed Dec 29 13:47:35 2010
Subject: [gdal-dev] Re: NGA High Resolution Elevation (HRE) data problem?
Message-ID: <AANLkTik6jpgZ35tAcsUkMPUPRKd3X8ZvTvUU=02-h+7p@mail.gmail.com>

> I'm trying to add support for NGA HRE data to our applications using
> GDAL 1.7.3 NITF driver.  Sample files 1-4 at
> http://www.gwg.nga.mil/ntb/baseline/docs/HRE_spec/index.html are
> referenced to UTM zone 11 and appear to be inverted north to south.
> NITF imagery I have that is also referenced to UTM looks ok.  Any ideas?

Does anyone know if the HRE spec is related to the newer
LiDAR-for-NITF draft spec?

(Inquiring liblas developers want to know.)

-mpg
From szekerest at gmail.com  Wed Dec 29 20:15:51 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Dec 29 20:15:55 2010
Subject: [gdal-dev] C# Binding ForceToMultiPolygon
In-Reply-To: <1293469890222-5869504.post@n2.nabble.com>
References: <1293469890222-5869504.post@n2.nabble.com>
Message-ID: <AANLkTin17r9tjmV-eVZhsAE_dAmJrFsa3qk+-0oyZRmy@mail.gmail.com>

Hi,

What is the detailed error message you get?
Could you provide some test data to reproduce this problem?
Have you tried with ogr2ogr to convert this data source from shapefile to
postgis?

Best regards,

Tamas



2010/12/27 Edi.Karadumi <edikaradumi@gmail.com>

>
> Hi everyone,
> im a new user to ogr and i have used c# binding and then converted them to
> use to my application in vb.net.
> Im making an application to import shape files to postgres. I have made the
> connection, imported the data, but i need to know the progress so i have
> used a loop to transfer the data. Also i have imported them to an existing
> layer in postgres, but its type is multipolygon and sometimes i have
> poligon
> so it throws an exception. I have read that exists some function
> forcetopolygon and forcetomultipolygon but i cant find them i c# bindings.
> can anyone help me? here is the code:
>
> Ogr.RegisterAll()
>
>                inputDs = Ogr.Open(filePath, 0)
>
>                If inputDs IsNot Nothing Then
>                    If inputDs.GetLayerCount > 0 Then
>                        oInputLayer = inputDs.GetLayerByIndex(0)
>
>                        drv = Ogr.GetDriverByName("PostgreSQL")
>                        outputDs = drv.Open(ServerConnection, 1)
>                        '***********
>                        'the postgre table has multiple geometry columns
>                        '*************
>                        oOutputLayer =
> outputDs.GetLayerByName(CadastralZoneImportTable + "(polygon)")
>
>                        Dim i As Long
>
>                        oInputLayer.ResetReading()
>                        If oInputLayer.GetFeatureCount(1) > 0 Then
>
>                            Dim MaxFeaturesCount =
> oInputLayer.GetFeatureCount(1)
>                            Dim j As Long = 0
>
>                            oOutputLayer.StartTransaction()
>                            For i = 0 To MaxFeaturesCount - 1
>                                oOutputFeature = New
> OSGeo.OGR.Feature(oOutputLayer.GetLayerDefn)
>                                oInputFeature = oInputLayer.GetNextFeature
>
>                                If oInputFeature.GetFieldIndex("cze_number")
> >= 0 Then
>                                    oOutputFeature.SetField("cze_number",
> oInputFeature.GetFieldAsInteger("cze_number"))
>                                End If
>
>                                If oInputFeature.GetFieldIndex("cze_name")
> >= 0 Then
>                                    oOutputFeature.SetField("cze_name",
> oInputFeature.GetFieldAsString("cze_name"))
>                                End If
>
>                                If oInputFeature.GetFieldIndex("bau_total")
> >= 0 Then
>                                    oOutputFeature.SetField("bau_total",
> oInputFeature.GetFieldAsString("bau_total"))
>                                End If
>
>                                If oInputFeature.GetGeometryRef IsNot
> Nothing Then
>
> oOutputFeature.SetGeometryDirectly(oInputFeature.GetGeometryRef)
>                                End If
>                                'here throws the exception about the
> multipolygon
>                                oOutputLayer.CreateFeature(oOutputFeature)
>
>                                oOutputFeature.Dispose()
>                                oInputFeature.Dispose()
>
>                            Next
>
>                            If i = MaxFeaturesCount Then
>                                oOutputLayer.CommitTransaction()
>                            Else
>                                oOutputLayer.RollbackTransaction()
>                            End If
>
>                        End If
>
>                    End If
>                Else
>
>                    MsgBox("error importing file: " + filePath,
> MsgBoxStyle.SystemModal + MsgBoxStyle.Information)
>
>                End If
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/C-Binding-ForceToMultiPolygon-tp5869504p5869504.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101230/00596965/attachment.html
From edikaradumi at gmail.com  Thu Dec 30 03:08:15 2010
From: edikaradumi at gmail.com (Edi.Karadumi)
Date: Thu Dec 30 03:08:17 2010
Subject: [gdal-dev] Re: C# Binding ForceToMultiPolygon
In-Reply-To: <AANLkTin17r9tjmV-eVZhsAE_dAmJrFsa3qk+-0oyZRmy@mail.gmail.com>
References: <1293469890222-5869504.post@n2.nabble.com>
	<AANLkTin17r9tjmV-eVZhsAE_dAmJrFsa3qk+-0oyZRmy@mail.gmail.com>
Message-ID: <1293696495709-5876450.post@n2.nabble.com>


i have resolved the problem. I had a constrain in postgre to check if the
geometry was multipolygon now i added (or polygon) check and the import
works fine.

Best Regards
Edi Karadumi
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/C-Binding-ForceToMultiPolygon-tp5869504p5876450.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From schut at sarvision.nl  Thu Dec 30 05:32:58 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Thu Dec 30 05:33:03 2010
Subject: [gdal-dev] gdal swig python's setup.py not python3 compatible
In-Reply-To: <201012291806.25349.even.rouault@mines-paris.org>
References: <4D1B3558.2080606@sarvision.nl> <4D1B372D.9000302@sarvision.nl>
	<201012291806.25349.even.rouault@mines-paris.org>
Message-ID: <4D1C5FDA.4080006@sarvision.nl>

On 12/29/2010 06:06 PM, Even Rouault wrote:
> Vincent,
>
> you didn't mention which GDAL version you use. Since GDAL 1.7.0, the Python
> bindings work with both python 2.X and 3.X. But I see that the autoconf check
> for python isn't python3 ready indeed. So you can ignore the configure errors
> and just cd swig/python and build the buindings from there directly (make
> build; make install)

Hi Even,

I'm using svn trunk. Sorry to be a bit confusing... I know the bindings 
work for both 2 and 3, and I know that I build and install the bindings 
separately. I tend to forget to do that, though, which results in 
updated gdal bindings in my py3 site-packages, which I don't use much, 
and still an old one in my py2 site-packages, and me being confused as 
to why stuff didn't get updated... I know, it's just a matter of being 
lazy and loving convenience too much :-)
I guess my question actually boils down to: how can I specify in the 
configure phase, which python to use for the bindings? E.g. I have both 
2 and 3 on my system, and 3 is the default, but I want gdal to build and 
install the bindings for 2. Could I specify 
--with-python=/usr/bin/python2 when running configure? (Or even better, 
build and install it for both pythons in one run...)

Thanks,
Vincent.
>
> Best regards,
>
> Even
>
> Le mercredi 29 d?cembre 2010 14:27:09, Vincent Schut a ?crit :
>> Oops, wrong conclusion. Seems more complicated than I thought, as there
>> are some python checks in configure that use python...
>>
>> Lets change this into a question:
>>
>> as I have both python2 and python3, with /usr/bin/python linking to
>> python3 (so python3 is the default), and gdal's python extension seems
>> to be not python3 compatible (at least the build/install method), what
>> would be the prefered way to have gdal's configure/make/make install use
>> python2 for everything? E.g. use /usr/bin/python2 as executable, and the
>> python2 site-packages dir for installing.
>>
>> As lots of my own scripts and other extensions I use are still not
>> really python3-ready, I don't mind using python2 myself, but I'd like to
>> keep the system default to python3 because I don't want to mess to much
>> with my system's defaults (I tend to forget stuff I change manually, etc.)
>>
>> Tia,
>> Vincent.
>>
>> On 12/29/2010 02:19 PM, Vincent Schut wrote:
>>> Hi,
>>>
>>> some time ago, Arch linux made the rather bold decision to have python3
>>> as system python default, of course with a /usr/bin/python2 alternative
>>> sitting next to it. However, as the /usr/bin/python link is pointing to
>>> /usr/bin/python3, gdal's swig python module's setup.py is being called
>>> with python3, and appears to be not python3 compatible:
>>>
>>> checking for python bindings... checking for python... python
>>> checking for location of Python Makefiles... File "<string>", line 3
>>> print sys.prefix
>>> ^
>>> SyntaxError: invalid syntax
>>> File "<string>", line 3
>>> print sys.prefix
>>> ^
>>> SyntaxError: invalid syntax
>>> File "<string>", line 3
>>> print sys.version[:3]
>>> ^
>>> SyntaxError: invalid syntax
>>> found
>>> checking where to install Python modules... /lib/python/site-packages
>>> enabled
>>> checking for python setuptools... File "<string>", line 3
>>> print 1
>>> ^
>>> SyntaxError: invalid syntax
>>> not found
>>> configure: checking whether we should include rasdaman support...
>>> rasdaman support not requested.
>>> configure: creating ./config.status
>>> config.status: creating GDALmake.opt
>>>
>>> Imho the easiest way to fix this would be to have a '#!/usr/bin/python2'
>>> as first line in setup.py; I suppose every distro has also a
>>> /usr/bin/python2 executable/link, even if there is not yet a python3 one.
>>>
>>> Regards,
>>> Vincent.
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Thu Dec 30 05:39:32 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Dec 30 05:39:40 2010
Subject: [gdal-dev] gdal swig python's setup.py not python3 compatible
In-Reply-To: <4D1C5FDA.4080006@sarvision.nl>
References: <4D1B3558.2080606@sarvision.nl>
	<201012291806.25349.even.rouault@mines-paris.org>
	<4D1C5FDA.4080006@sarvision.nl>
Message-ID: <201012301139.32756.even.rouault@mines-paris.org>

> I guess my question actually boils down to: how can I specify in the
> configure phase, which python to use for the bindings? E.g. I have both
> 2 and 3 on my system, and 3 is the default, but I want gdal to build and
> install the bindings for 2. Could I specify
> --with-python=/usr/bin/python2 when running configure? (Or even better,
> build and install it for both pythons in one run...)

No, AFAIK you can't specify the name of the python executable. --with-python 
just accept yes or no.

Don't bother with --with-python in configure, it doesn't do much, apart from 
automating the process. So just try :

cd swig/python
/usr/bin/python2 setup.py build
/usr/bin/python2 setup.py install
/usr/bin/python[3] setup.py build
/usr/bin/python[3] setup.py install

and you'll have the bindings built and installed for the 2 versions

> 
> Thanks,
> Vincent.
> 
> > Best regards,
> > 
> > Even
> > 
> > Le mercredi 29 d?cembre 2010 14:27:09, Vincent Schut a ?crit :
> >> Oops, wrong conclusion. Seems more complicated than I thought, as there
> >> are some python checks in configure that use python...
> >> 
> >> Lets change this into a question:
> >> 
> >> as I have both python2 and python3, with /usr/bin/python linking to
> >> python3 (so python3 is the default), and gdal's python extension seems
> >> to be not python3 compatible (at least the build/install method), what
> >> would be the prefered way to have gdal's configure/make/make install use
> >> python2 for everything? E.g. use /usr/bin/python2 as executable, and the
> >> python2 site-packages dir for installing.
> >> 
> >> As lots of my own scripts and other extensions I use are still not
> >> really python3-ready, I don't mind using python2 myself, but I'd like to
> >> keep the system default to python3 because I don't want to mess to much
> >> with my system's defaults (I tend to forget stuff I change manually,
> >> etc.)
> >> 
> >> Tia,
> >> Vincent.
> >> 
> >> On 12/29/2010 02:19 PM, Vincent Schut wrote:
> >>> Hi,
> >>> 
> >>> some time ago, Arch linux made the rather bold decision to have python3
> >>> as system python default, of course with a /usr/bin/python2 alternative
> >>> sitting next to it. However, as the /usr/bin/python link is pointing to
> >>> /usr/bin/python3, gdal's swig python module's setup.py is being called
> >>> with python3, and appears to be not python3 compatible:
> >>> 
> >>> checking for python bindings... checking for python... python
> >>> checking for location of Python Makefiles... File "<string>", line 3
> >>> print sys.prefix
> >>> ^
> >>> SyntaxError: invalid syntax
> >>> File "<string>", line 3
> >>> print sys.prefix
> >>> ^
> >>> SyntaxError: invalid syntax
> >>> File "<string>", line 3
> >>> print sys.version[:3]
> >>> ^
> >>> SyntaxError: invalid syntax
> >>> found
> >>> checking where to install Python modules... /lib/python/site-packages
> >>> enabled
> >>> checking for python setuptools... File "<string>", line 3
> >>> print 1
> >>> ^
> >>> SyntaxError: invalid syntax
> >>> not found
> >>> configure: checking whether we should include rasdaman support...
> >>> rasdaman support not requested.
> >>> configure: creating ./config.status
> >>> config.status: creating GDALmake.opt
> >>> 
> >>> Imho the easiest way to fix this would be to have a
> >>> '#!/usr/bin/python2' as first line in setup.py; I suppose every distro
> >>> has also a
> >>> /usr/bin/python2 executable/link, even if there is not yet a python3
> >>> one.
> >>> 
> >>> Regards,
> >>> Vincent.
> >>> _______________________________________________
> >>> gdal-dev mailing list
> >>> gdal-dev@lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >> 
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From schut at sarvision.nl  Thu Dec 30 05:52:34 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Thu Dec 30 05:52:38 2010
Subject: [gdal-dev] gdal_translate -expand rgb incompatible with geotiff
	COPY_SRC_OVERVIEWS
Message-ID: <4D1C6472.7030304@sarvision.nl>

Hi all,

Kind of a corner case, but i was hoping that gdal_translate's -expand 
option (to expand colorindexed 1-band files into 3-band rgb files) would 
also copy and expand the overviews when run with the (geotiff specific, 
I know) create option "-co COPY_SRC_OVERVIEWS=YES". It appears to not do 
so, and just discards the overviews. Would this be a bug, or maybe a 
feature to add?

Use case: for a classified, indexed image, I have built overviews using 
the 'mode' operator, which is obviously the most usefull for this kind 
of image, and only applicable on 1-band indexed data. I want to have a 
rgb version of this, but with those overviews, so the overviews should 
be an rgb version of the 'mode' overviews of the original. It is 
impossible to create the same overviews once the image has been expanded 
into rgb; mode will result in wrong, and sometimes even weird results (I 
presume mode works band-wise), and average and partners will result in 
colors that are not defined in the original colorindex (which I want to 
avoid, we are talking maps and legends here).

I think I can work around this by creating a separate file for each 
overview level (bla.ovr, bla.ovr.ovr, and so on), expanding those, and 
than using copy_src_overviews to create one file with internal overviews 
again, but this feels kind of awkward, and the above seemed so elegant...

Vincent.
From schut at sarvision.nl  Thu Dec 30 05:54:38 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Thu Dec 30 05:54:43 2010
Subject: [gdal-dev] gdal swig python's setup.py not python3 compatible
In-Reply-To: <201012301139.32756.even.rouault@mines-paris.org>
References: <4D1B3558.2080606@sarvision.nl>
	<201012291806.25349.even.rouault@mines-paris.org>
	<4D1C5FDA.4080006@sarvision.nl>
	<201012301139.32756.even.rouault@mines-paris.org>
Message-ID: <4D1C64EE.1030807@sarvision.nl>



On 12/30/2010 11:39 AM, Even Rouault wrote:
>> I guess my question actually boils down to: how can I specify in the
>> configure phase, which python to use for the bindings? E.g. I have both
>> 2 and 3 on my system, and 3 is the default, but I want gdal to build and
>> install the bindings for 2. Could I specify
>> --with-python=/usr/bin/python2 when running configure? (Or even better,
>> build and install it for both pythons in one run...)
>
> No, AFAIK you can't specify the name of the python executable. --with-python
> just accept yes or no.
>
> Don't bother with --with-python in configure, it doesn't do much, apart from
> automating the process. So just try :
>
> cd swig/python
> /usr/bin/python2 setup.py build
> /usr/bin/python2 setup.py install
> /usr/bin/python[3] setup.py build
> /usr/bin/python[3] setup.py install
>
> and you'll have the bindings built and installed for the 2 versions

OK, thanks. I think I was just hoping for something more elegant...

Vincent
From even.rouault at mines-paris.org  Thu Dec 30 06:07:00 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Dec 30 06:07:08 2010
Subject: [gdal-dev] gdal_translate -expand rgb incompatible with geotiff
	COPY_SRC_OVERVIEWS
In-Reply-To: <4D1C6472.7030304@sarvision.nl>
References: <4D1C6472.7030304@sarvision.nl>
Message-ID: <201012301207.00264.even.rouault@mines-paris.org>

Le jeudi 30 d?cembre 2010 11:52:34, Vincent Schut a ?crit :
> Hi all,
> 
> Kind of a corner case, but i was hoping that gdal_translate's -expand
> option (to expand colorindexed 1-band files into 3-band rgb files) would
> also copy and expand the overviews when run with the (geotiff specific,
> I know) create option "-co COPY_SRC_OVERVIEWS=YES". It appears to not do
> so, and just discards the overviews. Would this be a bug, or maybe a
> feature to add?

When you use -expand, an intermediate VRT file is created to do the color 
expension, but it doesn't retain the source overviews, so when the GeoTIFF 
driver copies the VRT into the final TIFF, there are no more source overviews 
from its point of view. "-co COPY_SRC_OVERVIEWS=YES" will only work if no 
intermediate VRT is used, so basically when you don't use any gdal_translate 
options, except creation options of the target driver.

> 
> Use case: for a classified, indexed image, I have built overviews using
> the 'mode' operator, which is obviously the most usefull for this kind
> of image, and only applicable on 1-band indexed data. I want to have a
> rgb version of this, but with those overviews, so the overviews should
> be an rgb version of the 'mode' overviews of the original. It is
> impossible to create the same overviews once the image has been expanded
> into rgb; mode will result in wrong, and sometimes even weird results (I
> presume mode works band-wise),

yes, mode works band per band

> and average and partners will result in
> colors that are not defined in the original colorindex (which I want to
> avoid, we are talking maps and legends here).
> 
> I think I can work around this by creating a separate file for each
> overview level (bla.ovr, bla.ovr.ovr, and so on), expanding those, and
> than using copy_src_overviews to create one file with internal overviews
> again, but this feels kind of awkward, and the above seemed so elegant...

yes that's a plausible way of proceeding. Making what you wish work would 
require :
1) add support for using/exposing source overviews in the VRT
2) add support for doing color expansion on overviews of the VRT

which I feel would be rather complicated to implement

> 
> Vincent.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From schut at sarvision.nl  Thu Dec 30 06:18:32 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Thu Dec 30 06:18:36 2010
Subject: [gdal-dev] gdal_translate -expand rgb incompatible with geotiff
	COPY_SRC_OVERVIEWS
In-Reply-To: <201012301207.00264.even.rouault@mines-paris.org>
References: <4D1C6472.7030304@sarvision.nl>
	<201012301207.00264.even.rouault@mines-paris.org>
Message-ID: <4D1C6A88.8090305@sarvision.nl>

On 12/30/2010 12:07 PM, Even Rouault wrote:
> Le jeudi 30 d?cembre 2010 11:52:34, Vincent Schut a ?crit :
>> Hi all,
>>
>> Kind of a corner case, but i was hoping that gdal_translate's -expand
>> option (to expand colorindexed 1-band files into 3-band rgb files) would
>> also copy and expand the overviews when run with the (geotiff specific,
>> I know) create option "-co COPY_SRC_OVERVIEWS=YES". It appears to not do
>> so, and just discards the overviews. Would this be a bug, or maybe a
>> feature to add?
>
> When you use -expand, an intermediate VRT file is created to do the color
> expension, but it doesn't retain the source overviews, so when the GeoTIFF
> driver copies the VRT into the final TIFF, there are no more source overviews
> from its point of view. "-co COPY_SRC_OVERVIEWS=YES" will only work if no
> intermediate VRT is used, so basically when you don't use any gdal_translate
> options, except creation options of the target driver.
>
>>
>> Use case: for a classified, indexed image, I have built overviews using
>> the 'mode' operator, which is obviously the most usefull for this kind
>> of image, and only applicable on 1-band indexed data. I want to have a
>> rgb version of this, but with those overviews, so the overviews should
>> be an rgb version of the 'mode' overviews of the original. It is
>> impossible to create the same overviews once the image has been expanded
>> into rgb; mode will result in wrong, and sometimes even weird results (I
>> presume mode works band-wise),
>
> yes, mode works band per band
>
>> and average and partners will result in
>> colors that are not defined in the original colorindex (which I want to
>> avoid, we are talking maps and legends here).
>>
>> I think I can work around this by creating a separate file for each
>> overview level (bla.ovr, bla.ovr.ovr, and so on), expanding those, and
>> than using copy_src_overviews to create one file with internal overviews
>> again, but this feels kind of awkward, and the above seemed so elegant...
>
> yes that's a plausible way of proceeding. Making what you wish work would
> require :
> 1) add support for using/exposing source overviews in the VRT
> 2) add support for doing color expansion on overviews of the VRT
>
> which I feel would be rather complicated to implement

Which I understand. I didn't know it worked through vrt, though now that 
sounds very plausible.
I'll script my workaround, no problem.

Thanks for the info.

Vincent.
>
>>
>> Vincent.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From nhv at cape.com  Thu Dec 30 06:53:13 2010
From: nhv at cape.com (Norman Vine)
Date: Thu Dec 30 07:00:44 2010
Subject: [gdal-dev] gdal_translate -expand rgb incompatible with geotiff
	COPY_SRC_OVERVIEWS
In-Reply-To: <4D1C6A88.8090305@sarvision.nl>
References: <4D1C6472.7030304@sarvision.nl>
	<201012301207.00264.even.rouault@mines-paris.org>
	<4D1C6A88.8090305@sarvision.nl>
Message-ID: <3145FF3A-7D8D-4B23-B95F-0F4BAACBD8AB@cape.com>


On Dec 30, 2010, at 6:18 AM, Vincent Schut wrote:

> On 12/30/2010 12:07 PM, Even Rouault wrote:
>> Le jeudi 30 d?cembre 2010 11:52:34, Vincent Schut a ?crit :
>>> Hi all,
>>> 
>>> Kind of a corner case, but i was hoping that gdal_translate's -expand
>>> option (to expand colorindexed 1-band files into 3-band rgb files) would
>>> also copy and expand the overviews when run with the (geotiff specific,
>>> I know) create option "-co COPY_SRC_OVERVIEWS=YES". It appears to not do
>>> so, and just discards the overviews. Would this be a bug, or maybe a
>>> feature to add?
>> 
>> When you use -expand, an intermediate VRT file is created to do the color
>> expension, but it doesn't retain the source overviews, so when the GeoTIFF
>> driver copies the VRT into the final TIFF, there are no more source overviews
>> from its point of view. "-co COPY_SRC_OVERVIEWS=YES" will only work if no
>> intermediate VRT is used, so basically when you don't use any gdal_translate
>> options, except creation options of the target driver.
>> 
>>> 
>>> Use case: for a classified, indexed image, I have built overviews using
>>> the 'mode' operator, which is obviously the most usefull for this kind
>>> of image, and only applicable on 1-band indexed data. I want to have a
>>> rgb version of this, but with those overviews, so the overviews should
>>> be an rgb version of the 'mode' overviews of the original. It is
>>> impossible to create the same overviews once the image has been expanded
>>> into rgb; mode will result in wrong, and sometimes even weird results (I
>>> presume mode works band-wise),
>> 
>> yes, mode works band per band
>> 
>>> and average and partners will result in
>>> colors that are not defined in the original colorindex (which I want to
>>> avoid, we are talking maps and legends here).
>>> 
>>> I think I can work around this by creating a separate file for each
>>> overview level (bla.ovr, bla.ovr.ovr, and so on), expanding those, and
>>> than using copy_src_overviews to create one file with internal overviews
>>> again, but this feels kind of awkward, and the above seemed so elegant...
>> 
>> yes that's a plausible way of proceeding. Making what you wish work would
>> require :
>> 1) add support for using/exposing source overviews in the VRT
>> 2) add support for doing color expansion on overviews of the VRT
>> 
>> which I feel would be rather complicated to implement
> 
> Which I understand. I didn't know it worked through vrt, though now that sounds very plausible.
> I'll script my workaround, no problem.


The Ossim utility ossim-icp has a  --res-level  option that will extract an overview level from a file
something similar might be a useful addition to gdal functionality


pseudo code

for level in overviews
  ossim-icp -r level tiff_tiled  $SRC tmp$SRC_%level
  gdal_translate -expand tmp$SRC_%level $SRC_%level
  ?? how best to recombine overviews ?? 

I don't know how best to do step 3

Cheers

Norman
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101230/335eb744/attachment.html
From schut at sarvision.nl  Thu Dec 30 07:13:58 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Thu Dec 30 07:14:02 2010
Subject: [gdal-dev] gdal_translate -expand rgb incompatible with geotiff
	COPY_SRC_OVERVIEWS
In-Reply-To: <3145FF3A-7D8D-4B23-B95F-0F4BAACBD8AB@cape.com>
References: <4D1C6472.7030304@sarvision.nl>
	<201012301207.00264.even.rouault@mines-paris.org>
	<4D1C6A88.8090305@sarvision.nl>
	<3145FF3A-7D8D-4B23-B95F-0F4BAACBD8AB@cape.com>
Message-ID: <4D1C7786.2040900@sarvision.nl>

On 12/30/2010 12:53 PM, Norman Vine wrote:
>
> On Dec 30, 2010, at 6:18 AM, Vincent Schut wrote:
>
>> On 12/30/2010 12:07 PM, Even Rouault wrote:
>>> Le jeudi 30 d?cembre 2010 11:52:34, Vincent Schut a ?crit :
>>>> Hi all,
>>>>
>>>> Kind of a corner case, but i was hoping that gdal_translate's -expand
>>>> option (to expand colorindexed 1-band files into 3-band rgb files) would
>>>> also copy and expand the overviews when run with the (geotiff specific,
>>>> I know) create option "-co COPY_SRC_OVERVIEWS=YES". It appears to not do
>>>> so, and just discards the overviews. Would this be a bug, or maybe a
>>>> feature to add?
>>>
>>> When you use -expand, an intermediate VRT file is created to do the color
>>> expension, but it doesn't retain the source overviews, so when the
>>> GeoTIFF
>>> driver copies the VRT into the final TIFF, there are no more source
>>> overviews
>>> from its point of view. "-co COPY_SRC_OVERVIEWS=YES" will only work if no
>>> intermediate VRT is used, so basically when you don't use any
>>> gdal_translate
>>> options, except creation options of the target driver.
>>>
>>>>
>>>> Use case: for a classified, indexed image, I have built overviews using
>>>> the 'mode' operator, which is obviously the most usefull for this kind
>>>> of image, and only applicable on 1-band indexed data. I want to have a
>>>> rgb version of this, but with those overviews, so the overviews should
>>>> be an rgb version of the 'mode' overviews of the original. It is
>>>> impossible to create the same overviews once the image has been expanded
>>>> into rgb; mode will result in wrong, and sometimes even weird results (I
>>>> presume mode works band-wise),
>>>
>>> yes, mode works band per band
>>>
>>>> and average and partners will result in
>>>> colors that are not defined in the original colorindex (which I want to
>>>> avoid, we are talking maps and legends here).
>>>>
>>>> I think I can work around this by creating a separate file for each
>>>> overview level (bla.ovr, bla.ovr.ovr, and so on), expanding those, and
>>>> than using copy_src_overviews to create one file with internal overviews
>>>> again, but this feels kind of awkward, and the above seemed so
>>>> elegant...
>>>
>>> yes that's a plausible way of proceeding. Making what you wish work would
>>> require :
>>> 1) add support for using/exposing source overviews in the VRT
>>> 2) add support for doing color expansion on overviews of the VRT
>>>
>>> which I feel would be rather complicated to implement
>>
>> Which I understand. I didn't know it worked through vrt, though now
>> that sounds very plausible.
>> I'll script my workaround, no problem.
>
>
> The Ossim utility ossim-icp has a --res-level option that will extract
> an overview level from a file
> something similar might be a useful addition to gdal functionality
>
>
> pseudo code
>
> for level in overviews
> ossim-icp -r level tiff_tiled $SRC tmp$SRC_%level
> gdal_translate -expand tmp$SRC_%level $SRC_%level
> ?? how best to recombine overviews ??
>
> I don't know how best to do step 3

Well, when you call your overview file <previous overview filename).ovr, 
gdal, will automatically pick it up. I just create a complete stack of 
orig.tif, orig.tif.ovr, orig.tif.ovr.ovr, orig.tif.ovr.ovr.ovr, and so 
on with one overview level in each .ovr file, and it works like a charm. 
Running gdalinfo on orig.tif lists all overviews. Then I create expanded 
versions of each with a different basename (like orig_rgb.tif, 
orig_rgb.tif.ovr, and so on). To combine, just run "gdal_translate -co 
COPY_SRC_OVERVIEWS=YES orig_rgb.tif orig_rgb_ovr.tif", which should 
result in one output file with all overviews combined. This is the 
recipe I'm following now, and it seems to work flawlessly.

Vincent.
>
> Cheers
>
> Norman
From warmerdam at pobox.com  Thu Dec 30 10:50:29 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec 30 10:50:22 2010
Subject: [gdal-dev] gdal_translate -expand rgb incompatible with geotiff
	COPY_SRC_OVERVIEWS
In-Reply-To: <4D1C7786.2040900@sarvision.nl>
References: <4D1C6472.7030304@sarvision.nl>
	<201012301207.00264.even.rouault@mines-paris.org>
	<4D1C6A88.8090305@sarvision.nl>
	<3145FF3A-7D8D-4B23-B95F-0F4BAACBD8AB@cape.com>
	<4D1C7786.2040900@sarvision.nl>
Message-ID: <4D1CAA45.9050609@pobox.com>

> On 12/30/2010 12:53 PM, Norman Vine wrote:
>> The Ossim utility ossim-icp has a --res-level option that will extract
>> an overview level from a file
>> something similar might be a useful addition to gdal functionality

Norman,

I haven't followed this discussion closely, but I did want to note that
there is a "dumpoverviews" utility in gdal/apps.  It is not built by
default as it is mostly for debugging overview support.  But, if built,
it can be used to dump overviews from an existing dataset into geotiff
files - one per band per overview.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mather.stephen at gmail.com  Fri Dec 31 10:44:04 2010
From: mather.stephen at gmail.com (Stephen Mather)
Date: Fri Dec 31 10:44:07 2010
Subject: [gdal-dev] Problem with gdal 1.8 -- segmentation fault on large
	image with gdaladdo
Message-ID: <AANLkTimx-Yxhx3NCGVE2SAHRj=TWvBtMt5z19NAC93+Z@mail.gmail.com>

Hi All,
    Testing out gdal 1.8; really excited by
http://www.gdal.org/gdallocationinfo.html.  Below is a comparison of doing
the same process in 1.7.3 and then 1.8dev, released 2010/01/19

$ gdaladdo --version
GDAL 1.7.3, released 2010/11/10

$ gdalbuildvrt LEAP_Tree_Height_low_res_test.vrt *.png
0...10...20...30...40...50...60...70...80...90...100 - done.

$ gdal_translate -b 1 LEAP_Tree_Height_low_res_test.vrt
LEAP_Tree_Height_low_res_test.tif

Input file size is 60000, 60000
0...10...20...30...40...50...60...70...80...90...100 - done.

$ gdaladdo -r average LEAP_Tree_Height_low_res_test.tif 2 4 8 16 32 64 128
256 512 1024
0...10...20...30...40...50...60...70...80...90...100 - done.


sudo make install 1.8
then:
$ gdaladdo --version
GDAL 1.8dev, released 2010/01/19

$ gdalbuildvrt LEAP_Tree_Height_low_res_test.vrt *.png
0...10...20...30...40...50...60...70...80...90...100 - done.
$ gdal_translate -b 1 LEAP_Tree_Height_low_res_test.vrt
LEAP_Tree_Height_low_res_test.tif
Input file size is 60000, 60000
0...10...20...30...40...50...60...70...80...90...100 - done.
$ gdaladdo -r average LEAP_Tree_Height_low_res_test.tif 2 4 8 16 32 64 128
256 512 1024
0...10...20...30...40.Segmentation fault

I've compiled this with ./configure, make, sudo make install on a Mac 10.6.5
2.4GHz Intel Core 2 Duo with 2GB memory.

Thanks,
Steve
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101231/c6856853/attachment.html
From even.rouault at mines-paris.org  Fri Dec 31 10:57:16 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 31 10:57:25 2010
Subject: [gdal-dev] Problem with gdal 1.8 -- segmentation fault on large
	image with gdaladdo
In-Reply-To: <AANLkTimx-Yxhx3NCGVE2SAHRj=TWvBtMt5z19NAC93+Z@mail.gmail.com>
References: <AANLkTimx-Yxhx3NCGVE2SAHRj=TWvBtMt5z19NAC93+Z@mail.gmail.com>
Message-ID: <201012311657.16181.even.rouault@mines-paris.org>

Stephen,

I've just managed to reproduce your issue by creating a fake 60000x60000 3 
band tif and running gdaladdo on it. Investigating...

Le vendredi 31 d?cembre 2010 16:44:04, Stephen Mather a ?crit :
> Hi All,
>     Testing out gdal 1.8; really excited by
> http://www.gdal.org/gdallocationinfo.html.  Below is a comparison of doing
> the same process in 1.7.3 and then 1.8dev, released 2010/01/19
> 
> $ gdaladdo --version
> GDAL 1.7.3, released 2010/11/10
> 
> $ gdalbuildvrt LEAP_Tree_Height_low_res_test.vrt *.png
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> $ gdal_translate -b 1 LEAP_Tree_Height_low_res_test.vrt
> LEAP_Tree_Height_low_res_test.tif
> 
> Input file size is 60000, 60000
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> $ gdaladdo -r average LEAP_Tree_Height_low_res_test.tif 2 4 8 16 32 64 128
> 256 512 1024
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> 
> sudo make install 1.8
> then:
> $ gdaladdo --version
> GDAL 1.8dev, released 2010/01/19
> 
> $ gdalbuildvrt LEAP_Tree_Height_low_res_test.vrt *.png
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> $ gdal_translate -b 1 LEAP_Tree_Height_low_res_test.vrt
> LEAP_Tree_Height_low_res_test.tif
> Input file size is 60000, 60000
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> $ gdaladdo -r average LEAP_Tree_Height_low_res_test.tif 2 4 8 16 32 64 128
> 256 512 1024
> 0...10...20...30...40.Segmentation fault
> 
> I've compiled this with ./configure, make, sudo make install on a Mac
> 10.6.5 2.4GHz Intel Core 2 Duo with 2GB memory.
> 
> Thanks,
> Steve
From even.rouault at mines-paris.org  Fri Dec 31 11:38:30 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 31 11:38:42 2010
Subject: [gdal-dev] Problem with gdal 1.8 -- segmentation fault on large
	image with gdaladdo
In-Reply-To: <AANLkTimx-Yxhx3NCGVE2SAHRj=TWvBtMt5z19NAC93+Z@mail.gmail.com>
References: <AANLkTimx-Yxhx3NCGVE2SAHRj=TWvBtMt5z19NAC93+Z@mail.gmail.com>
Message-ID: <201012311738.31636.even.rouault@mines-paris.org>

Stephen,

this should be fixed now in SVN.

This was indeed something wrong in a recent optimization in overview 
computation. This could cause integer overflow, that was triggered when dealing 
with a dataset where width * height > 2 billion.

Thanks for reporting !
From mather.stephen at gmail.com  Fri Dec 31 16:45:49 2010
From: mather.stephen at gmail.com (Stephen Mather)
Date: Fri Dec 31 16:45:51 2010
Subject: [gdal-dev] Problem with gdal 1.8 -- segmentation fault on large
	image with gdaladdo
In-Reply-To: <201012311738.31636.even.rouault@mines-paris.org>
References: <AANLkTimx-Yxhx3NCGVE2SAHRj=TWvBtMt5z19NAC93+Z@mail.gmail.com>
	<201012311738.31636.even.rouault@mines-paris.org>
Message-ID: <AANLkTimC_yAw37mDbNQoBai1kck6vD0Nj6UTmexWzs7f@mail.gmail.com>

Seems to have done the trick, thanks Even.

What's the new ceiling on image size for overview calculation?

Steve



On Fri, Dec 31, 2010 at 11:38 AM, Even Rouault <even.rouault@mines-paris.org
> wrote:

> Stephen,
>
> this should be fixed now in SVN.
>
> This was indeed something wrong in a recent optimization in overview
> computation. This could cause integer overflow, that was triggered when
> dealing
> with a dataset where width * height > 2 billion.
>
> Thanks for reporting !
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101231/20b86559/attachment.html
