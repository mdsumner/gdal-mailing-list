From warmerdam at pobox.com  Wed Oct  1 09:44:20 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] GetProjectionRef() returns different strings in Win
 and Linux
In-Reply-To: <3F79940B.5000302@videotron.ca>
References: <3F79940B.5000302@videotron.ca>
Message-ID: <3F7ADA34.10304@pobox.com>

Ricardo Scachetti Pereira wrote:
>    Hello, all.
> 
>    I'm having a problem with method GDALDataset::GetProjectionRef() and 
> I hope somebody can help me out.
>    I'm trying to get the projection string from an ESRI grid and I'm 
> getting different results in Linux and Windows (it's a cross-platform 
> project).
>    In Linux I get the correct projection string while in Windows I get 
> an empty string ("", not NULL).
>    The prj.adf file is the following:
> 
> Projection    GEOGRAPHIC
> Datum         WGS84
> Spheroid      WGS84
> Units         DD
> Zunits        NO
> Parameters  
>    The projection string returned by GDALDataset::GetProjectionRef() in 
> Linux is:
> 
> GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AXIS["Lat",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG","4326"]] 
> 
> 
>    In Windows, the very same call returns an empty string.
> 
>    I'm using gdal-1.1.9 in both platforms, MS Visual C++ 6 in Windows 
> and gcc 3.2.2 on a RedHat 9.1 Linux box.
>    Any ideas about what is going on?
>    Any help is greatly appreciated.
>    Regards,

Ricardo,

I don't know any obvious reason this would be failing only on windows.  The
mostly likely problem is that the code somehow didn't find the prj.adf file
for some reason, but I don't know why.

If you can provide me with the dataset in a zip file, I could try reproducing
it here.  Please send directly (not via the list).

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From jfearn at webmap.com.au  Wed Oct  1 23:20:00 2003
From: jfearn at webmap.com.au (Jeff Fearn)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] ECW support
Message-ID: <001401c38894$1056fee0$29a5a8c0@TRAPDOOR>

Is there a configuration option I can set to use ECWs with the windows
binary install of OpenEV 1.60, or do I need to compile this support in?

As I don't have a compiler on Windows and ECWs aren't supported on Linux the
second option is bad for me :{

hmmm while I'm asking, is it the same for JPEG2000 support?

Jeff Fearn <jfearn@webmap.com.au>
Technical Officer
Webmap Pty Ltd
http://www.webmap.com.au
+61 7 3841 2911

 


From warmerdam at pobox.com  Thu Oct  2 09:22:04 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] ECW support
In-Reply-To: <001401c38894$1056fee0$29a5a8c0@TRAPDOOR>
References: <001401c38894$1056fee0$29a5a8c0@TRAPDOOR>
Message-ID: <3F7C267C.3030005@pobox.com>

Jeff Fearn wrote:

> Is there a configuration option I can set to use ECWs with the windows
> binary install of OpenEV 1.60, or do I need to compile this support in?
> 
> As I don't have a compiler on Windows and ECWs aren't supported on Linux the
> second option is bad for me :{
> 
> hmmm while I'm asking, is it the same for JPEG2000 support?
> 
> Jeff Fearn <jfearn@webmap.com.au>
> Technical Officer
> Webmap Pty Ltd
> http://www.webmap.com.au
> +61 7 3841 2911

Jeff,

I don't *think* that OpenEV 1.60 was built with ECW support.  The OpenEV_FW
1.6.2 build at this URL should include ECW support:

   http://gdal.maptools.org/dl/openev/OpenEV_FW_162.zip

The same applies for JPEG2000 support.  Not in the 1.6.0 build, but it is in
the OpenEV_FW 1.6.2 build.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From gillian.walter at atlantis-scientific.com  Thu Oct  2 09:03:03 2003
From: gillian.walter at atlantis-scientific.com (Gillian Walter)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] ECW support
In-Reply-To: <001401c38894$1056fee0$29a5a8c0@TRAPDOOR>
References: <001401c38894$1056fee0$29a5a8c0@TRAPDOOR>
Message-ID: <3F7C2207.6040703@atlantis-scientific.com>

Hi,

OpenEVs built at Atlantis (including OpenEV 1.60) include GDAL's that 
only have support for default formats compiled in- if extra libraries 
are required to support a format, they are not built in.  ECW is not 
included in this list, and there is no option to turn it on.  JPEG2000 
is also not built into the Atlantis versions.  The OpenEV_FW series 
(built by Frank) include the most format support of the OpenEV builds 
(though I don't know if ECW is in any of them).  They can be downloaded at:

ftp://ftp.remotesensing.org/pub/gdal/openev/

You might want to try OpenEV_FW_162 for a start.

- Gillian

Jeff Fearn wrote:

>Is there a configuration option I can set to use ECWs with the windows
>binary install of OpenEV 1.60, or do I need to compile this support in?
>
>As I don't have a compiler on Windows and ECWs aren't supported on Linux the
>second option is bad for me :{
>
>hmmm while I'm asking, is it the same for JPEG2000 support?
>
>Jeff Fearn <jfearn@webmap.com.au>
>Technical Officer
>Webmap Pty Ltd
>http://www.webmap.com.au
>+61 7 3841 2911
>
> 
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@remotesensing.org
>http://remotesensing.org/mailman/listinfo/gdal-dev
>  
>



From Matt.Wilkie at gov.yk.ca  Thu Oct  2 11:49:18 2003
From: Matt.Wilkie at gov.yk.ca (Matt.Wilkie)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] ECW support
Message-ID: <6DD7370C9452D31192A10008C75D07531B92BE6E@raptor.ynet.gov.yk.ca>

> You might want to try OpenEV_FW_162 for a start.

I just installed this a few days ago. The enabled drivers are

GDAL 1.1.8.0, released 2002/12/21

The following format drivers are configured and support output:
 VRT: Virtual Raster
 GTiff: GeoTIFF
 NITF: National Imagery Transmission Format
 HFA: Erdas Imagine Images (.img)
 ELAS: ELAS
 GIO: Arc/Info Binary Grid (avgridio.dll)
 AAIGrid: Arc/Info ASCII Grid
 DTED: DTED Elevation Raster
 PNG: Portable Network Graphics
 JPEG: JPEG JFIF
 MEM: In Memory Raster
 GIF: Graphics Interchange Format (.gif)
 BSB: Maptech BSB Nautical Charts
 XPM: X11 PixMap Format
 BMP: MS Windows Device Independent Bitmap
 ECW: ERMapper Compressed Wavelets
 HDF4Image: HDF4 Dataset
 PNM: Portable Pixmap Format (netpbm)
 ENVI: ENVI .hdr Labelled
 PAux: PCI .aux Labelled
 MFF: Atlantis MFF Raster
 MFF2: Atlantis MFF2 (HKV) Raster
 JP2KAK: JPEG-2000 (based on Kakadu)
 FIT: FIT Image

Cheers,
-matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
--------------------------------------------  


From TMitchell at lignum.com  Thu Oct  2 12:53:34 2003
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] `MULTILINESTRING' not supported
Message-ID: <OF1EEBAC06.401D76C8-ON88256DB3.005C6D41-88256DB3.005CCB1E@lignum.com>





I'm working in Mapserver with a DGN file (and trying to remember the
lessons I learned last time :).
I'm getting this error, which appears related to ogr:

msDrawMap(): Image handling error. Failed to draw layer named 'dgntest'.
ogrGeomLine(): OGR error. OGRGeometry type `MULTILINESTRING' not supported.

Are you familiar with this problem or is it a problem at my end or is it a
bug.  I've attached the renegade dgn file.
Here is my  layer def'n in mapserver.  Any ideas?

LAYER
  NAME dgntest
  TYPE LINE
  STATUS DEFAULT
  UNITS METERS
  STYLEITEM "AUTO"
  CONNECTIONTYPE OGR
  CONNECTION "../data/sp858.dgn"
  CLASS
    COLOR 25 25 150
    NAME 'DGN Test'
  END
  PROJECTION
    "proj=utm"
     "units=km"
        "ellps=GRS80"
        "zone=10"
        "north"
        "no_defs"
  END
END


(See attached file: sp858.zip)
-------------- next part --------------
A non-text attachment was scrubbed...
Name: sp858.zip
Type: application/zip
Size: 49879 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20031002/070a80bf/sp858.zip
From TMitchell at lignum.com  Thu Oct  2 13:17:49 2003
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] GDAL bindings into R
Message-ID: <OF0EE9BA1A.A477DAA0-ON88256DB3.005EDDAA-88256DB3.005F032E@lignum.com>




I see a link to an article by Timothy H. Keitt on the GDAL website called
"GDAL bindings into R":
http://keittlab.bio.sunysb.edu/R/GDAL/
But it is inaccessible, at least at the moment.  Does someone else have a
local copy of his article?  Is this website still running?
Anyone else using R with GDAL for analysis.

Tyler


From warmerdam at pobox.com  Thu Oct  2 13:41:34 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] `MULTILINESTRING' not supported
In-Reply-To: <OF1EEBAC06.401D76C8-ON88256DB3.005C6D41-88256DB3.005CCB1E@lignum.com>
References: <OF1EEBAC06.401D76C8-ON88256DB3.005C6D41-88256DB3.005CCB1E@lignum.com>
Message-ID: <3F7C634E.5060508@pobox.com>

Tyler Mitchell wrote:

> 
> 
> 
> I'm working in Mapserver with a DGN file (and trying to remember the
> lessons I learned last time :).
> I'm getting this error, which appears related to ogr:
> 
> msDrawMap(): Image handling error. Failed to draw layer named 'dgntest'.
> ogrGeomLine(): OGR error. OGRGeometry type `MULTILINESTRING' not supported.
> 
> Are you familiar with this problem or is it a problem at my end or is it a
> bug.  I've attached the renegade dgn file.
> Here is my  layer def'n in mapserver.  Any ideas?

Tyler,

This is a MapServer/OGRLink issue.  If you file a bug for it in MapServer
bugzilla and assign it to me, I will try to fix it up.  I don't think mapserver
has a concept of multilinestrings, so I am not exactly sure what I will do with
it.

Best regards,

---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From TMitchell at lignum.com  Thu Oct  2 14:08:01 2003
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] `MULTILINESTRING' not supported
In-Reply-To: <3F7C634E.5060508@pobox.com>
Message-ID: <OF7FC64264.CACAAB94-ON88256DB3.00635E7F-88256DB3.00639BA9@lignum.com>





gdal-dev-admin@remotesensing.org wrote on 10/02/2003 10:41:34 AM:

> Tyler Mitchell wrote:
>
> >
> >
> >
> > I'm working in Mapserver with a DGN file (and trying to remember the
> > lessons I learned last time :).
> > I'm getting this error, which appears related to ogr:
> >
> > msDrawMap(): Image handling error. Failed to draw layer named
'dgntest'.
> > ogrGeomLine(): OGR error. OGRGeometry type `MULTILINESTRING' not
supported.
> >
> > Are you familiar with this problem or is it a problem at my end or is
it a
> > bug.  I've attached the renegade dgn file.
> > Here is my  layer def'n in mapserver.  Any ideas?
>
> Tyler,
>
> This is a MapServer/OGRLink issue.  If you file a bug for it in MapServer
> bugzilla and assign it to me, I will try to fix it up.  I don't
> think mapserver
> has a concept of multilinestrings, so I am not exactly sure what I
> will do with
> it.
>

Thanks, done.

I thought this worked months ago.  I'll test against other versions of ogr
and mapserver to see.

For the sake of the list, the bug is:
http://mapserver.gis.umn.edu/bugs/show_bug.cgi?id=448



From jfearn at webmap.com.au  Thu Oct  2 18:47:19 2003
From: jfearn at webmap.com.au (Jeff Fearn)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] ECW support
In-Reply-To: <3F7C267C.3030005@pobox.com>
Message-ID: <000701c38937$22d18970$29a5a8c0@TRAPDOOR>

Thanks Frank :)

Jeff Fearn <jfearn@webmap.com.au>
Technical Officer
Webmap Pty Ltd
http://www.webmap.com.au
Phone: +61 7 3841 2911
Fax:   +61 7 3341 8005


 


-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Thursday, 2 October 2003 11:22 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] ECW support


Jeff Fearn wrote:

> Is there a configuration option I can set to use ECWs with the windows
> binary install of OpenEV 1.60, or do I need to compile this support in?
> 
> As I don't have a compiler on Windows and ECWs aren't supported on Linux
the
> second option is bad for me :{
> 
> hmmm while I'm asking, is it the same for JPEG2000 support?
> 
> Jeff Fearn <jfearn@webmap.com.au>
> Technical Officer
> Webmap Pty Ltd
> http://www.webmap.com.au
> +61 7 3841 2911

Jeff,

I don't *think* that OpenEV 1.60 was built with ECW support.  The OpenEV_FW
1.6.2 build at this URL should include ECW support:

   http://gdal.maptools.org/dl/openev/OpenEV_FW_162.zip

The same applies for JPEG2000 support.  Not in the 1.6.0 build, but it is in
the OpenEV_FW 1.6.2 build.

Best regards,

-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From TMitchell at lignum.com  Thu Oct  2 18:48:53 2003
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] ogrlayer GetExtent implemented yet?
Message-ID: <OFFF30ED11.4BFCF0C7-ON88256DB3.007D1FD1-88256DB3.007D5275@lignum.com>




In the ogr.py that I've got, I see that layer.GetExtent() says "not
implemented yet".  Is there an alternative already available for extents on
layers or does it just mean I need to do a bit more work?

Tyler


From Matt.Wilkie at gov.yk.ca  Fri Oct  3 14:50:05 2003
From: Matt.Wilkie at gov.yk.ca (Matt.Wilkie)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] gdaltindex reports no prj defined, gdalinfo disagrees, maybe
Message-ID: <6DD7370C9452D31192A10008C75D07531B92C6FC@raptor.ynet.gov.yk.ca>

Hi,

I have an orthophoto tiff which gdaltindex ignores:

	It appears no georeferencing is available for
	`sheet9_east.tif', skipping.

gdalinfo reports a GCP projection but the corner coordinates at the end
appear to be in pixels instead of projected numbers. This image came with a
file called "sheet9_south.txg". I don't know what application created it.

Because I trust gdal more than most other programs I've used, I'm usually
inclined to think the gtiff metadata is incorrectly formatted. However
ArcCatalog (8.3) reads the projection. To be more precise it reports corner
coordinates -almost- the same as the GCP's reported by gdalinfo. 

To make things a little more confusing, the .txg file's corner coords are
out from both gdalinfo and arccatalog significantly (in the hundreds digit
place for northings, thousandth for eastings). 

Also the reported cell size differs between applications. 

Is all this variation normal? Is it just the gtiff equivalent of is a a
megabyte 1024k or 1000k? And more practically, what do I do about it? How
can I fix these images so both arccatalog and gdal utilities can use them?

If someone can tell me how to lop of the first few K of the file I can send
the head 'in situ' if you want to examine it directly. (the whole image is
540mb).

Thanks in advance,

-matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
--------------------------------------------  

=== attached .xml is ArcCatalog's metadata report.

==== gdalinfo report:

Driver: GTiff/GeoTIFF
Size is 24402, 21002
Coordinate System is `'
GCP Projection = PROJCS["NAD83 / UTM zone
8N",GEOGCS["NAD83",DATUM["North_Americ an_Datum_1983",SPHEROID["GRS
1980",6378137,298.2572221010002,AUTHORITY["EPSG","7
019"]],AUTHORITY["EPSG","6269"]],PRIMEM["Greenwich",0],UNIT["degree",0.01745
3292
5199433],AUTHORITY["EPSG","4269"]],PROJECTION["Transverse_Mercator"],PARAMET
ER["
latitude_of_origin",0],PARAMETER["central_meridian",-135],PARAMETER["scale_f
acto
r",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],U
NIT[ "metre",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","26908"]]
GCP[  0]: Id=1, Info=
          (0,0) -> (512595,6.66881e+006,0)
GCP[  1]: Id=2, Info=
          (24401,0) -> (523552,6.67417e+006,0)
GCP[  2]: Id=3, Info=
          (0,21001) -> (517213,6.65937e+006,0)
GCP[  3]: Id=4, Info=
          (24401,21001) -> (528170,6.66474e+006,0)
Metadata:
  TIFFTAG_IMAGEDESCRIPTION=Extracted from 'MOSAIC' using polygon '1'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,21002.0)
Upper Right (24402.0,    0.0)
Lower Right (24402.0,21002.0)
Center      (12201.0,10501.0)
Band 1 Block=24402x1 Type=Byte, ColorInterp=Gray


==== sheet9_south.txg:

Format: Tag Image File Format
Description: Extracted from 'MOSAIC' using polygon '1"
TIFF Version: 6.0
Compression type: None
Image type: 8 bit grayscale
Image type: 8-bit unsigned
Image size: 24402 columns by 22000 lines
Resolution: 0.500000 (column) by 0.500000 (line) m per cell
Coordinate system: Universal Transverse Mercator  Zone: 8 (W 138 to W 132)
Units: m
Corners:
   Upper Left:  507977.6685590000 E  6678234.67257800 N
  Upper Right:  518935.3834929950 E  6683600.57272852 N
   Lower Left:  512815.3787184680 E  6668355.57543236 N
  Lower Right:  523773.0936524630 E  6673721.47558288 N
  Note: Georeference control points are at outside edges of image.
        This is the upper left corner of the upper left cell,
        the upper right corner of the upper right cell, etc.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: sheet9_south.tif.xml
Type: application/octet-stream
Size: 7890 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20031003/5a840814/sheet9_south.tif.obj
From TMitchell at lignum.com  Fri Oct  3 16:34:44 2003
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] OGR Python examples
Message-ID: <OFEDF2F07E.054B2086-ON88256DB4.00708C07-88256DB4.00710A97@lignum.com>




I'm starting into OGR with python and am having fun reading ogr.py and
trying out my own little examples.
I've got most of what I'd call the basics down pat - opening data source,
reading a layer, feature and geometries.

Now I'm ready to write geometries and am missing something.  I've got a two
pairs of coordinates representing a rectangle and I want to create a
polygon out of it and save it to a file.  When I READ geometries I can
figure out that you open a data source->layer->feature->geometry.  But I
can't figure out what objects I need to create first to write to.  I've got
a data source and layer created, but what next?

Can anyone give me a small example?

I'm trying to stick as close to ogr.py as possible without mixing up too
much with other pymods, but I will consider them.

I'll post my little tutorial afterwards.


From ben at vterrain.org  Fri Oct  3 17:19:08 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] next GDAL release?
In-Reply-To: <OFEDF2F07E.054B2086-ON88256DB4.00708C07-88256DB4.00710A97@lignum.com>
Message-ID: <005601c389f3$fc0b19b0$f400fe0a@TOPP2>

Is there any sort of plan for next release?  1.1.10, or 1.2.0 depending on
how we're numbering.. then again, the last release was called 1.1.8.0 in the
ChangeLog, which is puzzling.  With these tiny increments, i get the feeling
GDAL will be on version 1 for the rest of our lives :)

The reason i'm asking is that i've now got code which uses "gdalwarper.h",
but that's not yet exposed in the current release.

-Ben


From warmerdam at pobox.com  Fri Oct  3 21:44:51 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] next GDAL release?
In-Reply-To: <005601c389f3$fc0b19b0$f400fe0a@TOPP2>
References: <005601c389f3$fc0b19b0$f400fe0a@TOPP2>
Message-ID: <3F7E2613.4050809@pobox.com>

Ben Discoe wrote:
> Is there any sort of plan for next release?  1.1.10, or 1.2.0 depending on
> how we're numbering.. then again, the last release was called 1.1.8.0 in the
> ChangeLog, which is puzzling.  With these tiny increments, i get the feeling
> GDAL will be on version 1 for the rest of our lives :)
> 
> The reason i'm asking is that i've now got code which uses "gdalwarper.h",
> but that's not yet exposed in the current release.

Ben,

The next release should be 1.2.0, and hopefully will be issued within a few
weeks.  I would like to be sure I am happy with the new libtool capabilities.
Of course you can always grab a nightly snapshot and host it as a interim
release for those using your apps.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Fri Oct  3 21:55:44 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] OGR Python examples
In-Reply-To: <OFEDF2F07E.054B2086-ON88256DB4.00708C07-88256DB4.00710A97@lignum.com>
References: <OFEDF2F07E.054B2086-ON88256DB4.00708C07-88256DB4.00710A97@lignum.com>
Message-ID: <3F7E28A0.3090901@pobox.com>

Tyler Mitchell wrote:
> 
> 
> 
> I'm starting into OGR with python and am having fun reading ogr.py and
> trying out my own little examples.
> I've got most of what I'd call the basics down pat - opening data source,
> reading a layer, feature and geometries.
> 
> Now I'm ready to write geometries and am missing something.  I've got a two
> pairs of coordinates representing a rectangle and I want to create a
> polygon out of it and save it to a file.  When I READ geometries I can
> figure out that you open a data source->layer->feature->geometry.  But I
> can't figure out what objects I need to create first to write to.  I've got
> a data source and layer created, but what next?
> 
> Can anyone give me a small example?
> 
> I'm trying to stick as close to ogr.py as possible without mixing up too
> much with other pymods, but I will consider them.
> 
> I'll post my little tutorial afterwards.

Tyler,

There are some examples in gdal/pymod/samples/get_soundg.py, and
gdal/pymod/samples/tigerpoly.py.  Also, the GDAL test suite has many
good examples:

   http://www.remotesensing.org/cgi-bin/cvsweb.cgi/osrs/gdalautotest/

In particular, the gdalautotest/ogr/ogr_oci.py is a decent example of
writing features to a layer after reading from a file, and making them up
from scratch.

This code for (from ogr_oci_4()) creates a feature in memory, and then
set's its geometry from WKT read from a file, and writes it to the existing
Oracle layer (gdaltest.oci_lyr).  The same features is written many time with
different geometries:

     dst_feat = ogr.Feature( feature_def = gdaltest.oci_lyr.GetLayerDefn() )
     wkt_list = [ '10', '2', '1', '3d_1', '4', '5', '6' ]

     for item in wkt_list:

         wkt = open( 'data/wkb_wkt/'+item+'.wkt' ).read()
         geom = ogr.CreateGeometryFromWkt( wkt )

         ######################################################################
         # Write geometry as a new Oracle feature.

         dst_feat.SetGeometryDirectly( geom )
         dst_feat.SetField( 'PRFEDEA', item )
         gdaltest.oci_lyr.CreateFeature( dst_feat )

         ######################################################################
         # Read back the feature and get the geometry.

         gdaltest.oci_lyr.SetAttributeFilter( "PRFEDEA = '%s'" % item )
         feat_read = gdaltest.oci_lyr.GetNextFeature()
         geom_read = feat_read.GetGeometryRef()

         if ogrtest.check_feature_geometry( feat_read, geom ) != 0:
             return 'fail'

         feat_read.Destroy()

     dst_feat.Destroy()

So, the key is to create a features with the ogr.Feature(<Featuredefn>) call.
Then set any attributes or geometry you might want on the feature using
SetField() and SetGeometry() (or SetGeometryDirectly() if you want the feature
to take ownership of an existing geometry).

I hope this helps.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dron at ak4719.spb.edu  Sun Oct  5 11:52:43 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] FAST: problem in UTM zone numbering
Message-ID: <20031005155243.GA17446@ak4719.spb.edu>

Hi, all,

I have fixed a problem with UTM zone numbering in FAST driver. This
problem affects some of the FAST datasets and you can get wrong
georeferencing sometimes. For all, using Landsat data in FAST format, I'm
suggest update from CVS.
As a free bonus you will get a TM projection support, which is now
implemented in the driver.

					Regards,
					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From warmerdam at pobox.com  Mon Oct  6 18:29:40 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] ogrlayer GetExtent implemented yet?
In-Reply-To: <OFFF30ED11.4BFCF0C7-ON88256DB3.007D1FD1-88256DB3.007D5275@lignum.com>
References: <OFFF30ED11.4BFCF0C7-ON88256DB3.007D1FD1-88256DB3.007D5275@lignum.com>
Message-ID: <3F81ECD4.9020506@pobox.com>

Tyler Mitchell wrote:
> 
> 
> 
> In the ogr.py that I've got, I see that layer.GetExtent() says "not
> implemented yet".  Is there an alternative already available for extents on
> layers or does it just mean I need to do a bit more work?

Tyler,

I have just implemented the GetExtent() method for the Python OGR wrapper.  It
is now in CVS.  You can just copy this in place of the existing GetExtent()
in ogr.py:

     def GetExtent( self, force = 1 ):
         extents = _gdal.ptrcreate( 'double', '', 4 )
         res = _gdal.OGR_L_GetExtent( self._o,
                   _gdal.ptrcast(extents,'OGREnvelope_p'), force )
         if res != 0:
             ret_extents = None
         else:
             ret_extents = ( _gdal.ptrvalue( extents, 0 ),
                             _gdal.ptrvalue( extents, 1 ),
                             _gdal.ptrvalue( extents, 2 ),
                             _gdal.ptrvalue( extents, 3 ) )
         _gdal.ptrfree( extents )

         return ret_extents


Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From TMitchell at lignum.com  Mon Oct  6 18:50:32 2003
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] ogrlayer GetExtent implemented yet?
In-Reply-To: <3F81ECD4.9020506@pobox.com>
Message-ID: <OFA91E8090.5898AE38-ON88256DB7.007D68DE-88256DB7.007D7A2C@lignum.com>






> I have just implemented the GetExtent() method for the Python OGR
wrapper.  It
> is now in CVS.

Got it thanks a bunch.


From warmerdam at pobox.com  Tue Oct  7 14:34:21 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] gdaltindex reports no prj defined, gdalinfo disagrees,
 maybe
In-Reply-To: <6DD7370C9452D31192A10008C75D07531B92C6FC@raptor.ynet.gov.yk.ca>
References: <6DD7370C9452D31192A10008C75D07531B92C6FC@raptor.ynet.gov.yk.ca>
Message-ID: <3F83072D.4050300@pobox.com>

Matt.Wilkie wrote:
> Hi,
> 
> I have an orthophoto tiff which gdaltindex ignores:
> 
> 	It appears no georeferencing is available for
> 	`sheet9_east.tif', skipping.
> 
> gdalinfo reports a GCP projection but the corner coordinates at the end
> appear to be in pixels instead of projected numbers. This image came with a
> file called "sheet9_south.txg". I don't know what application created it.
> 
> Because I trust gdal more than most other programs I've used, I'm usually
> inclined to think the gtiff metadata is incorrectly formatted. However
> ArcCatalog (8.3) reads the projection. To be more precise it reports corner
> coordinates -almost- the same as the GCP's reported by gdalinfo. 
> 
> To make things a little more confusing, the .txg file's corner coords are
> out from both gdalinfo and arccatalog significantly (in the hundreds digit
> place for northings, thousandth for eastings). 
> 
> Also the reported cell size differs between applications. 
> 
> Is all this variation normal? Is it just the gtiff equivalent of is a a
> megabyte 1024k or 1000k? And more practically, what do I do about it? How
> can I fix these images so both arccatalog and gdal utilities can use them?

Matt,

Sorry for not responding sooner.  That's what you get for asking a complicated
question!

The summary of what is going on is that gdaltindex (and perhaps MapServer in
general) doesn't support raster files with GCPs instead of a simple affine
transform for raster files.  So, GDAL can read the projection definition
just fine, but it doesn't support rendering files georeferenced via GCPs
instead of a reference point and pixel size.

I don't know why the extents in the .txg are so noticably different than
the control georeferenced locations of the control points themselves.  Ask
ESRI. I am confident that the pixel/line and georeferenced e/n values for
the GCPs are the actual values that appear in the GeoTIFF headers.

PS. you can't practically clip the first bit of a geotiff file for review
as most geotiff files actually write the "directory" at the end of the
file.

PPS.  If you want to use this image with MapServer, just run it through
gdalwarp first.  This will resample the image "north up" and you won't have
to worry about control point issues.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From TMitchell at lignum.com  Tue Oct  7 19:45:58 2003
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] OGR -Get driver name for a data source?
Message-ID: <OFA146EA26.322F6F49-ON88256DB8.0082750B-88256DB8.00828CC8@lignum.com>




I'm using Python and ogr.py.
I have a data source that is open.  How I can determine which driver was
successfully used to open the data source?

Tyler


From wesp at gdv.com  Wed Oct  8 05:07:28 2003
From: wesp at gdv.com (Oliver Wesp)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Compile latest cvs under Solaris 2.8
Message-ID: <3F83D3D0.9040009@gdv.com>

Dear List,

I'm trying to build latest cvs (gdal-cvs-031007) on my solaris 2.8 box 
which gives me the following error:

gmake[1]: Entering directory `/export/home/oliver/gdal-cvs-031007/ogr'
/bin/sh ../libtool --mode=compile g++ -Wall  -O2   -I../port 
-Iogrsf_frmts -I.  -c -o ogrinfo.o ogrinfo.cpp
 g++ -Wall -O2 -I../port -Iogrsf_frmts -I. -c ogrinfo.cpp  -fPIC -DPIC 
-o .libs/ogrinfo.o
 g++ -Wall -O2 -I../port -Iogrsf_frmts -I. -c ogrinfo.cpp -o ogrinfo.o 
 >/dev/null 2>&1
/bin/sh ../libtool --mode=link  g++  ogrinfo.o ../libgdal.la -o ogrinfo
g++ ogrinfo.o -o .libs/ogrinfo  ../.libs/libgdal.so 
/usr/local/lib/libjpeg.so -lpng -lz -ldl /usr/local/lib/./libstdc++.so 
-L/usr2/SOURCES/S8/gcc-3.2.2/objdir/sparc-sun-solaris2.8/libstdc++-v3/src 
-L/usr2/SOURCES/S8/gcc-3.2.2/objdir/sparc-sun-solaris2.8/libstdc++-v3/src/.libs 
-L/usr2/SOURCES/S8/gcc-3.2.2/objdir/gcc 
-L/usr/local/sparc-sun-solaris2.8/bin 
-L/usr/local/sparc-sun-solaris2.8/lib -Wl,-R -Wl,/usr/local/lib -Wl,-R 
-Wl,/usr/local/lib/.
ld: warning: file 
/usr/local/lib/gcc-lib/sparc-sun-solaris2.8/3.2.2/../../../libstdc++.so: 
linked to /usr/local/lib/./libstdc++.so: attempted multiple inclusion of 
file
Undefined                       first referenced
 symbol                             in file
OCICollAppend                       ../.libs/libgdal.so
OCIErrorGet                         ../.libs/libgdal.so
OCINumberToInt                      ../.libs/libgdal.so
OCIStmtPrepare                      ../.libs/libgdal.so
OCIHandleAlloc                      ../.libs/libgdal.so
OCIBindByName                       ../.libs/libgdal.so
OCICollTrim                         ../.libs/libgdal.so
OCIAttrGet                          ../.libs/libgdal.so
OCIDefineObject                     ../.libs/libgdal.so
GDALRasterBand::FreeClassNames(char**, int*)../.libs/libgdal.so
OCIObjectPin                        ../.libs/libgdal.so
OCICollGetElem                      ../.libs/libgdal.so
OCINumberToReal                     ../.libs/libgdal.so
OCIDescribeAny                      ../.libs/libgdal.so
OCIEnvCreate                        ../.libs/libgdal.so
OCIBindObject                       ../.libs/libgdal.so
OCIParamGet                         ../.libs/libgdal.so
OCINumberFromReal                   ../.libs/libgdal.so
OCINumberFromInt                    ../.libs/libgdal.so
OCIStmtExecute                      ../.libs/libgdal.so
OCILogoff                           ../.libs/libgdal.so
OCILogon                            ../.libs/libgdal.so
OCIStmtFetch                        ../.libs/libgdal.so
GDALRasterBand::GetClassNames(int*)   ../.libs/libgdal.so
OCICollSize                         ../.libs/libgdal.so
OCIObjectNew                        ../.libs/libgdal.so
OCIHandleFree                       ../.libs/libgdal.so
OCIDefineByPos                      ../.libs/libgdal.so
ld: fatal: Symbol referencing errors. No output written to .libs/ogrinfo
collect2: ld returned 1 exit status
gmake[1]: *** [ogrinfo] Error 1
gmake[1]: Leaving directory `/export/home/oliver/gdal-cvs-031007/ogr'
gmake: *** [ogr-apps] Error 2

Is anbody able to give a hint about what went wrong. Thanks in advance.

Oliver



From alessandro_amici at telespazio.it  Wed Oct  8 06:01:40 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:57 2007
Subject: R: [Gdal-dev] Compile latest cvs under Solaris 2.8
Message-ID: <7171FE1C83A6AE4DA93B80999588680753C498@ROMADG-MAIL01>

Oliver,

> I'm trying to build latest cvs (gdal-cvs-031007) on my solaris 2.8 box 
> which gives me the following error:


> ld: warning: file 
> /usr/local/lib/gcc-lib/sparc-sun-solaris2.8/3.2.2/../../../libstdc++.so: 
> linked to /usr/local/lib/./libstdc++.so: attempted multiple inclusion of 
> file

this looks like a warning, and hopefully it is innocous.

> Undefined                       first referenced
>  symbol                             in file
> OCICollAppend                       ../.libs/libgdal.so
> OCIErrorGet                         ../.libs/libgdal.so

[...]

> ld: fatal: Symbol referencing errors. No output written to .libs/ogrinfo
> collect2: ld returned 1 exit status

the gdal build system is not 100% resistant to changes in the configure
command line options without a 'make clean' in between.

is it possible that you switched on/off the support for oracle without
doing cleaning the build dirs in between? (i cannot test with oracle,
but doing that with jpeg produces errors similar to what you are seeing)

if so please try to 'make distclean', then reconfigure and rebuild.

cheers,
alessandro

From wesp at gdv.com  Wed Oct  8 06:58:47 2003
From: wesp at gdv.com (Oliver Wesp)
Date: Wed Nov 21 11:48:57 2007
Subject: R: [Gdal-dev] Compile latest cvs under Solaris 2.8
In-Reply-To: <7171FE1C83A6AE4DA93B80999588680753C498@ROMADG-MAIL01>
References: <7171FE1C83A6AE4DA93B80999588680753C498@ROMADG-MAIL01>
Message-ID: <3F83EDE7.5000303@gdv.com>

Thanks for your response. I did what you suggested without any effect.

best regards
Oliver

Amici Alessandro wrote:

>Oliver,
>
>  
>
>>I'm trying to build latest cvs (gdal-cvs-031007) on my solaris 2.8 box 
>>which gives me the following error:
>>    
>>
>
>
>  
>
>>ld: warning: file 
>>/usr/local/lib/gcc-lib/sparc-sun-solaris2.8/3.2.2/../../../libstdc++.so: 
>>linked to /usr/local/lib/./libstdc++.so: attempted multiple inclusion of 
>>file
>>    
>>
>
>this looks like a warning, and hopefully it is innocous.
>
>  
>
>>Undefined                       first referenced
>> symbol                             in file
>>OCICollAppend                       ../.libs/libgdal.so
>>OCIErrorGet                         ../.libs/libgdal.so
>>    
>>
>
>[...]
>
>  
>
>>ld: fatal: Symbol referencing errors. No output written to .libs/ogrinfo
>>collect2: ld returned 1 exit status
>>    
>>
>
>the gdal build system is not 100% resistant to changes in the configure
>command line options without a 'make clean' in between.
>
>is it possible that you switched on/off the support for oracle without
>doing cleaning the build dirs in between? (i cannot test with oracle,
>but doing that with jpeg produces errors similar to what you are seeing)
>
>if so please try to 'make distclean', then reconfigure and rebuild.
>
>cheers,
>alessandro
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@remotesensing.org
>http://remotesensing.org/mailman/listinfo/gdal-dev
>
>
>
>  
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20031008/21097466/attachment.html
From alessandro_amici at telespazio.it  Wed Oct  8 07:33:41 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:57 2007
Subject: R: R: [Gdal-dev] Compile latest cvs under Solaris 2.8
Message-ID: <7171FE1C83A6AE4DA93B80999588680753C6D2@ROMADG-MAIL01>

Oliver,

> Thanks for your response. I did what you suggested without
> any effect. 

ouch! the problem with OCI* symbols most probably is a leftover
from the libtool transition.

i don't have access to cvs right now, if you wish you may try to
add the following line inside the 'ifneq ($(ORACLE_HOME),)'
conditional in GDALmake.opt.in:

LIBS += $(OCI_LIB)

then you should be able to just run 'make' (no need to clean, hopefully).

cheers,
alessandro

From wesp at gdv.com  Wed Oct  8 08:35:40 2003
From: wesp at gdv.com (Oliver Wesp)
Date: Wed Nov 21 11:48:57 2007
Subject: R: R: [Gdal-dev] Compile latest cvs under Solaris 2.8
In-Reply-To: <7171FE1C83A6AE4DA93B80999588680753C6D2@ROMADG-MAIL01>
References: <7171FE1C83A6AE4DA93B80999588680753C6D2@ROMADG-MAIL01>
Message-ID: <3F84049C.9020605@gdv.com>

Almost. I changed the appropriate section in GDALmake.opt.in to

ifneq ($(ORACLE_HOME),)
HAVE_OCI = yes
OCI_INCLUDE =   -I$(ORACLE_HOME)/rdbms/demo -I$(ORACLE_HOME)/rdbms/public
OCI_LIB =       -L$(ORACLE_HOME)/lib -lclntsh
LIBS += $(OCI_LIB)
else
HAVE_OCI = no
endif

Now it looks like we're rid of the OCI stuff, but the GDALRasterBand 
issue remains.

Undefined                       first referenced
 symbol                             in file
GDALRasterBand::FreeClassNames(char**, int*)../.libs/libgdal.so
GDALRasterBand::GetClassNames(int*)   ../.libs/libgdal.so
ld: fatal: Symbol referencing errors. No output written to .libs/ogrinfo

Thanks anyway.
best regards
Oliver


Amici Alessandro wrote:

>Oliver,
>
>  
>
>>Thanks for your response. I did what you suggested without
>>any effect. 
>>    
>>
>
>ouch! the problem with OCI* symbols most probably is a leftover
>from the libtool transition.
>
>i don't have access to cvs right now, if you wish you may try to
>add the following line inside the 'ifneq ($(ORACLE_HOME),)'
>conditional in GDALmake.opt.in:
>
>LIBS += $(OCI_LIB)
>
>then you should be able to just run 'make' (no need to clean, hopefully).
>
>cheers,
>alessandro
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@remotesensing.org
>http://remotesensing.org/mailman/listinfo/gdal-dev
>
>
>
>  
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20031008/0ddf6a72/attachment.html
From warmerdam at pobox.com  Wed Oct  8 11:02:42 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: R: R: [Gdal-dev] Compile latest cvs under Solaris 2.8
In-Reply-To: <3F84049C.9020605@gdv.com>
References: <7171FE1C83A6AE4DA93B80999588680753C6D2@ROMADG-MAIL01> <3F84049C.9020605@gdv.com>
Message-ID: <3F842712.6070104@pobox.com>

Oliver Wesp wrote:
> Almost. I changed the appropriate section in GDALmake.opt.in to
> 
> ifneq ($(ORACLE_HOME),)
> HAVE_OCI = yes
> OCI_INCLUDE =   -I$(ORACLE_HOME)/rdbms/demo -I$(ORACLE_HOME)/rdbms/public
> OCI_LIB =       -L$(ORACLE_HOME)/lib -lclntsh
> LIBS += $(OCI_LIB)
> else
> HAVE_OCI = no
> endif

Oliver,

I have committed the OCI fix for LIBS into CVS (in GDALmake.opt.in).

> Now it looks like we're rid of the OCI stuff, but the GDALRasterBand 
> issue remains.
> 
> Undefined                       first referenced
>  symbol                             in file
> GDALRasterBand::FreeClassNames(char**, int*)../.libs/libgdal.so
> GDALRasterBand::GetClassNames(int*)   ../.libs/libgdal.so
> ld: fatal: Symbol referencing errors. No output written to .libs/ogrinfo

I have never seen these methods before, and can't find them in CVS.  Do they
appear in your gdal_priv.h?   This part is very weird.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From neteler at itc.it  Wed Oct  8 11:47:53 2003
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] FAST: problem in UTM zone numbering
In-Reply-To: <20031005155243.GA17446@ak4719.spb.edu>; from dron@ak4719.spb.edu on Sun, Oct 05, 2003 at 07:52:43PM +0400
References: <20031005155243.GA17446@ak4719.spb.edu>
Message-ID: <20031008174753.K2598@itc.it>

On Sun, Oct 05, 2003 at 07:52:43PM +0400, Andrey Kiselev wrote:
> Hi, all,
> 
> I have fixed a problem with UTM zone numbering in FAST driver. This
> problem affects some of the FAST datasets and you can get wrong
> georeferencing sometimes. For all, using Landsat data in FAST format, I'm
> suggest update from CVS.
> As a free bonus you will get a TM projection support, which is now
> implemented in the driver.
> 

Great work - thanks, Andrey!

Markus

-- 
Markus Neteler     <neteler@itc.it>       http://mpa.itc.it
ITC-irst, Istituto per la Ricerca Scientifica e Tecnologica
MPBA - Predictive Models for Biol. & Environ. Data Analysis

From neteler at itc.it  Wed Oct  8 12:50:01 2003
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] GDAL bindings into R
In-Reply-To: <OF0EE9BA1A.A477DAA0-ON88256DB3.005EDDAA-88256DB3.005F032E@lignum.com>; from TMitchell@lignum.com on Thu, Oct 02, 2003 at 10:17:49AM -0700
References: <OF0EE9BA1A.A477DAA0-ON88256DB3.005EDDAA-88256DB3.005F032E@lignum.com>
Message-ID: <20031008185001.P2598@itc.it>

On Thu, Oct 02, 2003 at 10:17:49AM -0700, Tyler Mitchell wrote:
> 
> 
> 
> 
> I see a link to an article by Timothy H. Keitt on the GDAL website called
> "GDAL bindings into R":
> http://keittlab.bio.sunysb.edu/R/GDAL/
> But it is inaccessible, at least at the moment.  Does someone else have a
> local copy of his article?  Is this website still running?
> Anyone else using R with GDAL for analysis.
> 
> Tyler

Maybe it was already answered:
http://spatial.nhh.no/R/gdal/
 
Best regards

 Markus

From warmerdam at pobox.com  Wed Oct  8 13:53:35 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] GDAL bindings into R
In-Reply-To: <20031008185001.P2598@itc.it>
References: <OF0EE9BA1A.A477DAA0-ON88256DB3.005EDDAA-88256DB3.005F032E@lignum.com> <20031008185001.P2598@itc.it>
Message-ID: <3F844F1F.7010705@pobox.com>

Markus Neteler wrote:
> On Thu, Oct 02, 2003 at 10:17:49AM -0700, Tyler Mitchell wrote:
> 
>>
>>
>>
>>I see a link to an article by Timothy H. Keitt on the GDAL website called
>>"GDAL bindings into R":
>>http://keittlab.bio.sunysb.edu/R/GDAL/
>>But it is inaccessible, at least at the moment.  Does someone else have a
>>local copy of his article?  Is this website still running?
>>Anyone else using R with GDAL for analysis.
>>
>>Tyler
> 
> 
> Maybe it was already answered:
> http://spatial.nhh.no/R/gdal/

Markus,

Thanks for the link.  I have updated the GDAL home page to link to this
(as http://rgdal.sourceforge.net/).

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From alexamici at tiscali.it  Wed Oct  8 14:53:26 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:57 2007
Subject: R: R: [Gdal-dev] Compile latest cvs under Solaris 2.8
In-Reply-To: <3F842712.6070104@pobox.com>
References: <7171FE1C83A6AE4DA93B80999588680753C6D2@ROMADG-MAIL01> <3F84049C.9020605@gdv.com> <3F842712.6070104@pobox.com>
Message-ID: <200310082053.26613.alexamici@tiscali.it>

Frank,

>
> I have committed the OCI fix for LIBS into CVS (in GDALmake.opt.in).
>

is there any reason the oci driver cannot be selected with a configure command 
line option?

cheers,
alessandro


From warmerdam at pobox.com  Wed Oct  8 15:15:40 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: R: R: [Gdal-dev] Compile latest cvs under Solaris 2.8
In-Reply-To: <200310082053.26613.alexamici@tiscali.it>
References: <7171FE1C83A6AE4DA93B80999588680753C6D2@ROMADG-MAIL01> <3F84049C.9020605@gdv.com> <3F842712.6070104@pobox.com> <200310082053.26613.alexamici@tiscali.it>
Message-ID: <3F84625C.6040600@pobox.com>

Alessandro Amici wrote:
> Frank,
> 
> 
>>I have committed the OCI fix for LIBS into CVS (in GDALmake.opt.in).
>>
> 
> 
> is there any reason the oci driver cannot be selected with a configure command 
> line option?

Alessandro,

There is no compelling reason, no.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From ben at vterrain.org  Wed Oct  8 16:50:46 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Aigrid2 not working on Windows..
In-Reply-To: <3F84625C.6040600@pobox.com>
Message-ID: <01b001c38ddd$d94b1090$f400fe0a@TOPP2>

Interesting behavior on my machine.  After installing some ESRI products, i
can no longer open Arc Grid files (.adf).  It doesn't crash specifically -
it just abruptly exits the entire app.  Callstack is:

pfnGridIOSetup()
GIODataset::Open()
GDALOpen()

Apparently, this is happening because it's now finding a DLL called
"avgridio.dll" on my machine, part of the ESRI software.  Unfortunately,
because is just exits abruptly from inside the ESRI DLL, i can't debug it -
nor can i fall back on the standard .adf support.

I tried working around the problem by renaming the DLL:
	C:\ESRI\AV_GIS30\ARCVIEW\BIN32\avgridio.dll
however, GDAL then finds and uses this:
	C:\arcgis\arcexe83\bin\aigridio.dll

..which also does an abrupt exit crash.  When i rename them both, then GDAL
uses the normal driver and loads my file fine.  Any ideas?

-Ben


From warmerdam at pobox.com  Thu Oct  9 09:36:33 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Aigrid2 not working on Windows..
In-Reply-To: <01b001c38ddd$d94b1090$f400fe0a@TOPP2>
References: <01b001c38ddd$d94b1090$f400fe0a@TOPP2>
Message-ID: <3F856461.60707@pobox.com>

Ben Discoe wrote:
> Interesting behavior on my machine.  After installing some ESRI products, i
> can no longer open Arc Grid files (.adf).  It doesn't crash specifically -
> it just abruptly exits the entire app.  Callstack is:
> 
> pfnGridIOSetup()
> GIODataset::Open()
> GDALOpen()
> 
> Apparently, this is happening because it's now finding a DLL called
> "avgridio.dll" on my machine, part of the ESRI software.  Unfortunately,
> because is just exits abruptly from inside the ESRI DLL, i can't debug it -
> nor can i fall back on the standard .adf support.
> 
> I tried working around the problem by renaming the DLL:
> 	C:\ESRI\AV_GIS30\ARCVIEW\BIN32\avgridio.dll
> however, GDAL then finds and uses this:
> 	C:\arcgis\arcexe83\bin\aigridio.dll
> 
> ..which also does an abrupt exit crash.  When i rename them both, then GDAL
> uses the normal driver and loads my file fine.  Any ideas?

Ben,

This driver should work ok with the avgridio.dll that comes with ArcView 3.x
but given its gross instability with newer versions of this DLL I think it is
best if I just disable it in the default GDAL format list.  I am going to
remove it from GDALAllRegister(), and anyone wanting to use this driver in an
application will need to call GDALRegister_AIGrid2() manually in their
application.

I hate depending on other folks libraries...

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Thu Oct  9 11:14:16 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Re: Delete feature?
In-Reply-To: <001e01c38e5b$39518dc0$410ba8c0@winlorenzo>
References: <001e01c38e5b$39518dc0$410ba8c0@winlorenzo>
Message-ID: <3F857B48.9060002@pobox.com>

Lorenzo Sassolini wrote:
> Frank,
> 
> using the OGR library I see that there are many methods to access 
> DBMS-based datasources (Oracle) in a client-server way.
> 
>  But it seems to me that the only way to delete a feature from a 
> datasource is to save the whole layer in the datasource without that 
> feature. Is it true?
> 
> I see that for a file-based datasource this is correct, but for a 
> DBMS-based datasource it would be possible to delete a single feature.
> 
> Does exists a ?workaround? to solve this problem?
> 

Lorenzo,

I agree that the OGR API should include a delete feature virtual method, and
it should be implemented for any datasource that it makes sense for.  I am
checking support for this into CVS, and will for the time being just implement
it for the "Mem" format (in memory layers).  What drivers were you needing it
for?

As a workaround for DBMS based drivers you can use ExecuteSQL() to delete
a feature if you have a way of uniquely selecting the feature.  Note for some
kinds of DBMS sources the FID is assigned linearly while scanning and isn't
actually a field in the table.  In these cases deleting by FID can be
problematic.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From s.perkins at lanl.gov  Fri Oct 10 14:52:43 2003
From: s.perkins at lanl.gov (Simon Perkins)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] porting of gdal to (optional) libtool build finally
	completed
In-Reply-To: <200309252127.10466.alexamici@tiscali.it>
References: <200309252127.10466.alexamici@tiscali.it>
Message-ID: <1065811963.8076.158.camel@afreet.lanl.gov>

On Thu, 2003-09-25 at 13:27, Alessandro Amici wrote:
> it has taken a good two months, but i'm finally ready to announce that the 
> optional libtool build is now ready for prime time :).

As one of those libtool non-fans you mentioned, I can at least
appreciate the effort required in getting libtool to work! :)


The following is a little tangential so feel free to ignore...

Don't know if I've mentioned this before, and if I haven't, this is
probably a tactless time to do so... but we've recently started using an
exciting new build tool called "scons" for our projects. The home page
for this project is at:

http://www.scons.org


Scons is billed as a "make replacement" but it is actually much closer
to autotools in scope. It works well on both windows and unix, does
almost all of the configuration and building stuff that autotools can do
(and is being steadily expanded), builds shared libraries, ditches make,
has an active user and developer community and is written in python so
it's very easy to extend. It has many nice featrues like direct support
for parallel compliation on multi-headed machines and it uses MD4
checksums rather than timestamps to do dependency checking.

Scons takes a slightly different (and in my opinion more modern)
approach to source builds than autotools. Autotools assumes that the
normal mode of distribution of a package is a source code tarball and
that a user must be able to configure and compile a tarball with a
fairly minimal (UNIX-like) system. Scons recognizes that these days (a)
most end users get their packages as binaries, and (b) developers
working with source code can be expected to have some more powerful
tools on their systems, such as python. The benefit of this assumption
is a very clean approach to builds that doesn't use make. The build
scripts that you write in scons are actually compact python scripts that
are directly executed when you ask scons to build your package.
Customizing your build is as simple as adding python code into the build
script. Customizing an autotools build is typically much more cryptic
since you are dealing with layers of different primitive languages such
as m4, shell script, automake and the make syntax itself, and you are
often writing code that has to write other code. Yuk!

The main drawbacks with scons are: (a) it's not as standard as
autotools, and (b) the documentation is currently not all that great,
although the developers are working on it apparently!

Anyway, just noting that there are alternatives to autotools. I'm not
volunteering to re-engineer the GDAL build process using scons right
now... :)

Cheers,

Sy



From ben at vterrain.org  Mon Oct 13 00:44:00 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Sinusoidal projection for MODIS images with OGR
In-Reply-To: <1065811963.8076.158.camel@afreet.lanl.gov>
Message-ID: <00ce01c39144$9f67a7c0$f400fe0a@TOPP2>

This evening i tried to load some images from the MODIS Gallery
(http://rapidfire.sci.gsfc.nasa.gov/)  They are .jpg, with .jpw world files.
The projection is described in a separate .txt file, like this:

 projection: Sinusoidal
 image center lon: +128
 image center lat: +38
 ellipsoid: Sphere
 Earth radius (km): 6371.007181

When i looked at OGR for a way to describe this projection, i found:

  OGRSpatialReference::SetSinusoidal(dfCenterLong, dfFalseEasting,
dfFalseNorthing);

This doesn't seem to take a "center lat" parameter, so i'm left wondering
how to tell it about the MODIS image?

Thanks,
Ben


From ben at vterrain.org  Mon Oct 13 02:11:35 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Sinusoidal projection for MODIS images with OGR
In-Reply-To: <00ce01c39144$9f67a7c0$f400fe0a@TOPP2>
Message-ID: <000001c39150$dbce56d0$f400fe0a@TOPP2>

Answering my own question here.. the values given by MODIS for lat/lon are
the center of the _image_, not necessarily the center of the projection.
When i tell OGR Sinusoidal, with dfCenterLong=128, the other params 0, then
the image appears more or less where i expect it.  It's still offset a bit,
but it's certainly in the right overall projection.  The offset is probably
due to ellipsoid differences, or some such.

-Ben

> -----Original Message-----
> Subject: [Gdal-dev] Sinusoidal projection for MODIS images with OGR
> 
> This evening i tried to load some images from the MODIS Gallery
> (http://rapidfire.sci.gsfc.nasa.gov/)  They are .jpg, with 
> .jpw world files.
> The projection is described in a separate .txt file, like this:
> 
>  projection: Sinusoidal
>  image center lon: +128
>  image center lat: +38
>  ellipsoid: Sphere
>  Earth radius (km): 6371.007181
> 
> When i looked at OGR for a way to describe this projection, i found:
> 
>   OGRSpatialReference::SetSinusoidal(dfCenterLong, dfFalseEasting,
> dfFalseNorthing);
> 
> This doesn't seem to take a "center lat" parameter, so i'm 
> left wondering how to tell it about the MODIS image?
> 
> Thanks,
> Ben


From cgn at globexplorer.com  Mon Oct 13 03:17:39 2003
From: cgn at globexplorer.com (Chris G. Nicholas)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Sinusoidal projection for MODIS images with OGR
Message-ID: <71E37EF6B7DCC1499CEA0316A2568328E79F8E@loki.wc.globexplorer.net>

you can also use the MODIS reproject tool, http://lpdaac2.usgs.gov/landdaac/tools/modis/index.asp, to get it in a projection that might perhaps be more familiar...

Chris


-----Original Message-----
From:	Ben Discoe [mailto:ben@vterrain.org]
Sent:	Sun 10/12/2003 11:11 PM
To:	gdal-dev@remotesensing.org
Cc:	
Subject:	RE: [Gdal-dev] Sinusoidal projection for MODIS images with OGR

Answering my own question here.. the values given by MODIS for lat/lon are
the center of the _image_, not necessarily the center of the projection.
When i tell OGR Sinusoidal, with dfCenterLong=128, the other params 0, then
the image appears more or less where i expect it.  It's still offset a bit,
but it's certainly in the right overall projection.  The offset is probably
due to ellipsoid differences, or some such.

-Ben

> -----Original Message-----
> Subject: [Gdal-dev] Sinusoidal projection for MODIS images with OGR
> 
> This evening i tried to load some images from the MODIS Gallery
> (http://rapidfire.sci.gsfc.nasa.gov/)  They are .jpg, with 
> .jpw world files.
> The projection is described in a separate .txt file, like this:
> 
>  projection: Sinusoidal
>  image center lon: +128
>  image center lat: +38
>  ellipsoid: Sphere
>  Earth radius (km): 6371.007181
> 
> When i looked at OGR for a way to describe this projection, i found:
> 
>   OGRSpatialReference::SetSinusoidal(dfCenterLong, dfFalseEasting,
> dfFalseNorthing);
> 
> This doesn't seem to take a "center lat" parameter, so i'm 
> left wondering how to tell it about the MODIS image?
> 
> Thanks,
> Ben

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev




From schut at sarvision.com  Mon Oct 13 11:39:54 2003
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] error because of libtool?
Message-ID: <20031013173954.2950b863.schut@sarvision.com>

Hi dev's,

just tried to compile a sprankling new gdal, fresh from cvs (of course backed up my old source tree...) and ./configured as usual. So I guess it should use libtool. Indeed building was quite slow :-)
When arriving at the final build phase however, I get the following error:

<snip>
make[1]: Leaving directory `/usr/local/src/gdal/ogr'
make ./libgdal.la
make[1]: Entering directory `/usr/local/src/gdal'
/bin/sh ./libtool --mode=link   g++ -lodbc -L/usr/local/lib -lmfhdf -ldf -ljpeg -lpng -Lyes -Lyes -lz -lm -ldl -L/usr/lib -lpq -o libgdal.la ./frmts/o/*.lo ./gcore/*.lo ./port/*.lo ./alg/*.lo ./ogr/ogrsf_frmts/o/*.lo ./ogr/ogrgeometryfactory.lo ./ogr/ogrpoint.lo ./ogr/ogrcurve.lo ./ogr/ogrlinestring.lo ./ogr/ogrlinearring.lo./ogr/ogrpolygon.lo ./ogr/ogrutils.lo ./ogr/ogrgeometry.lo ./ogr/ogrgeometrycollection.lo ./ogr/ogrmultipolygon.lo ./ogr/ogrsurface.lo ./ogr/ogrmultipoint.lo ./ogr/ogrmultilinestring.lo ./ogr/ogr_api.lo ./ogr/ogrfeature.lo ./ogr/ogrfeaturedefn.lo ./ogr/ogrfeaturestyle.lo ./ogr/ogrfielddefn.lo ./ogr/ogrspatialreference.lo ./ogr/ogr_srsnode.lo ./ogr/ogr_srs_proj4.lo ./ogr/ogr_fromepsg.lo ./ogr/ogrct.lo ./ogr/ogr_opt.lo ./ogr/ogr_srs_esri.lo ./ogr/ogr_srs_pci.lo ./ogr/ogrfeaturequery.lo ./ogr/swq.lo ./ogr/ogr_srs_validate.lo ./ogr/ogr_srs_xml.lo ./ogr/ograssemblepolygon.lo ./ogr/ogr2gmlgeometry.lo ./ogr/gml2ogrgeometry.lo \
    -rpath /usr/local/lib \
    -no-undefined \
    -version-info 2:9:1
./libtool: line 1: cd: yes: No such file or directory
libtool: link: cannot determine absolute directory name of `yes'
make[1]: *** [libgdal.la] Error 1
make[1]: Leaving directory `/usr/local/src/gdal'
make: *** [check-lib] Error 2

Thought I'd just file this testing result here in the mailing list for you to crunch on :)

Cheers,
Vincent.

From neteler at itc.it  Tue Oct 14 03:05:08 2003
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Sinusoidal projection for MODIS images with OGR
In-Reply-To: <71E37EF6B7DCC1499CEA0316A2568328E79F8E@loki.wc.globexplorer.net>; from cgn@globexplorer.com on Mon, Oct 13, 2003 at 12:17:39AM -0700
References: <71E37EF6B7DCC1499CEA0316A2568328E79F8E@loki.wc.globexplorer.net>
Message-ID: <20031014090508.C6908@itc.it>

On Mon, Oct 13, 2003 at 12:17:39AM -0700, Chris G. Nicholas wrote:
> you can also use the MODIS reproject tool,
> http://lpdaac2.usgs.gov/landdaac/tools/modis/index.asp, to get it in a
> projection that might perhaps be more familiar...

The MODIS reproject tool is only able to read ISIN, not SIN.
"The MODIS Level-3 Land products are generated by the MODIS Adaptive
 Processing System (MODAPS), located at the NASA Goddard Space Flight
 Center, as gridded output in the Integerized Sinusoidal (ISIN) projection.
 The ISIN projection is unique to the MODIS land products, analogous to the
 Sinusoidal projection except that the ISIN projection is centered about 0? 
 longitude and special coefficients are used to flatten the ellipsoid. The 
 ISIN projection was devised for the Level-3+ products because it employs a
 tessellation scheme, efficient organization, and hierarchical management of
 the multi-resolution data acquired by the MODIS sensor.
"

From paul-grass at stjohnspoint.co.uk  Tue Oct 14 05:33:50 2003
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Compile Error
Message-ID: <Pine.LNX.4.53.0310141031470.28461@agrippa.ukshells.co.uk>

See below for make output from today's CVS on an SGI IRIX 6.2 system
(1.1.9 compiles fine as far as I can remember). Seems to me here it is
trying to use the C compiler to compile a C++ source file. Same thing
happens both with and without using libtool.

Paul

(cd port; make)
make[1]: Entering directory `/indigo-disk2/grass/gdal-libtool/port'
make[1]: Nothing to be done for `default'.
make[1]: Leaving directory `/indigo-disk2/grass/gdal-libtool/port'
(cd gcore; make)
make[1]: Entering directory `/indigo-disk2/grass/gdal-libtool/gcore'
make[1]: Nothing to be done for `default'.
make[1]: Leaving directory `/indigo-disk2/grass/gdal-libtool/gcore'
(cd alg; make)
make[1]: Entering directory `/indigo-disk2/grass/gdal-libtool/alg'
make[1]: Nothing to be done for `default'.
make[1]: Leaving directory `/indigo-disk2/grass/gdal-libtool/alg'
(cd frmts; make)
make[1]: Entering directory `/indigo-disk2/grass/gdal-libtool/frmts'
make -C gxf install-obj
make[2]: Entering directory `/indigo-disk2/grass/gdal-libtool/frmts/gxf'
/bin/sh ../../libtool --mode=compile cc -I../../port -I../../gcore -I../../ogr    -c -o ../o/gxfdataset.o gxfdataset.cpp
 cc -I../../port -I../../gcore -I../../ogr -c gxfdataset.cpp  -DPIC -o ../o/.libs/gxfdataset.o
cfe: Error: ../../gcore/gdal_priv.h, line 176: Syntax Error
 class GDALMajorObject;
 ------^
cfe: Error: ../../gcore/gdal_priv.h, line 176: Empty declaration specifiers
 class GDALMajorObject;
 ------^
cfe: Error: ../../gcore/gdal_priv.h, line 177: Syntax Error
 class GDALDataset;
 ------^
cfe: Error: ../../gcore/gdal_priv.h, line 177: Empty declaration specifiers
 class GDALDataset;
 ------^
cfe: Error: ../../gcore/gdal_priv.h, line 178: Syntax Error
 class GDALRasterBand;
 ------^
cfe: Error: ../../gcore/gdal_priv.h, line 178: Empty declaration specifiers
 class GDALRasterBand;
 ------^
cfe: Error: ../../gcore/gdal_priv.h, line 179: Syntax Error
 class GDALDriver;
 ------^
cfe: Error: ../../gcore/gdal_priv.h, line 179: Empty declaration specifiers
 class GDALDriver;
 ------^
cfe: Error: ../../gcore/gdal_priv.h, line 199: Syntax Error
 class   GDALMajorObject
 --------^
cfe: Error: ../../gcore/gdal_priv.h, line 200: GDALMajorObject must have function type
 {
 ^
cfe: Error: ../../gcore/gdal_priv.h, line 202: Syntax Error
     char             *pszDescription;
 ----^
cfe: Error: ../../gcore/gdal_priv.h, line 203: Syntax Error
     char            **papszMetadata;
 ----^
cfe: Error: ../../gcore/gdal_priv.h, line 207: Syntax Error
     virtual            ~GDALMajorObject();
 -----------------------^
cfe: Error: ../../gcore/gdal_priv.h, line 209: Syntax Error
     virtual const char *GetDescription() const;
 ------------^
cfe: Error: ../../gcore/gdal_priv.h, line 209: Syntax Error
     virtual const char *GetDescription() const;
 -----------------------------------------^
cfe: Error: ../../gcore/gdal_priv.h, line 212: Syntax Error
     virtual char      **GetMetadata( const char * pszDomain = "" );
 -------------------------------------^
cfe: Error: ../../gcore/gdal_priv.h, line 212: Syntax Error
     virtual char      **GetMetadata( const char * pszDomain = "" );
 -----------------------------------------------------------------^
cfe: Error: ../../gcore/gdal_priv.h, line 214: Syntax Error
                                      const char * pszDomain = "" );
 -------------------------------------^
cfe: Error: ../../gcore/gdal_priv.h, line 214: Syntax Error
                                      const char * pszDomain = "" );
 -----------------------------------------------------------------^
cfe: Error: ../../gcore/gdal_priv.h, line 215: Syntax Error
     virtual const char *GetMetadataItem( const char * pszName,
 -----------------------------------------^
cfe: Error: ../../gcore/gdal_priv.h, line 216: Syntax Error
                                          const char * pszDomain = "" );
 -----------------------------------------^
cfe: Error: ../../gcore/gdal_priv.h, line 216: Syntax Error
                                          const char * pszDomain = "" );
 ---------------------------------------------------------------------^
cfe: Error: ../../gcore/gdal_priv.h, line 218: Syntax Error
                                          const char * pszValue,
 -----------------------------------------^
cfe: Error: ../../gcore/gdal_priv.h, line 219: Syntax Error
                                          const char * pszDomain = "" );
 -----------------------------------------^
cfe: Error: ../../gcore/gdal_priv.h, line 219: Syntax Error
                                          const char * pszDomain = "" );
 ---------------------------------------------------------------------^
cfe: Warning 625: ../../gcore/gdal_priv.h, line 220: Empty declaration
 };
 -^
cfe: Error: ../../gcore/gdal_priv.h, line 225: Syntax Error
 class   GDALDefaultOverviews
 --------^
cfe: Error: ../../gcore/gdal_priv.h, line 230: Syntax Error
     char        *pszOvrFilename;
 ----^
cfe: Error: ../../gcore/gdal_priv.h, line 236: Syntax Error
     void       Initialize( GDALDataset *poDS, const char *pszName = 0L ,
 ----^
cfe: Error: ../../gcore/gdal_priv.h, line 236: Syntax Error
     void       Initialize( GDALDataset *poDS, const char *pszName = 0L ,
 ----------------------------------------------^
cfe: Error: ../../gcore/gdal_priv.h, line 237: Syntax Error
                            int bNameIsOVR = 0  );
 ---------------------------^
cfe: Fatal: Too many errors... goodbye.
make[2]: *** [../o/gxfdataset.o] Error 1
make[2]: Leaving directory `/indigo-disk2/grass/gdal-libtool/frmts/gxf'
make[1]: *** [gxf-install-obj] Error 2
make[1]: Leaving directory `/indigo-disk2/grass/gdal-libtool/frmts'
make: *** [frmts-target] Error 2

From warmerdam at pobox.com  Tue Oct 14 09:53:20 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] porting of gdal to (optional) libtool build finally
 completed
In-Reply-To: <1065811963.8076.158.camel@afreet.lanl.gov>
References: <200309252127.10466.alexamici@tiscali.it> <1065811963.8076.158.camel@afreet.lanl.gov>
Message-ID: <3F8BFFD0.4090906@pobox.com>

Sy,

Thats good information.  I assume you have been pleased with it so far in
actual use?

While I am in no big rush to rework the GDAL build architecture again just
now, I am wondering if OpenEV might not benefit from this.  Currently OpenEV's
build structure is pretty half-assed, and OpenEV builds are currently pretty
complicated.  Also, OpenEV requires Python, so we wouldn't have to worry about
gripes from the folks who don't want to have to install Python.

I will try to look at this at some point for OpenEV.

Simon Perkins wrote:
> As one of those libtool non-fans you mentioned, I can at least
> appreciate the effort required in getting libtool to work! :)
> 
> 
> The following is a little tangential so feel free to ignore...
> 
> Don't know if I've mentioned this before, and if I haven't, this is
> probably a tactless time to do so... but we've recently started using an
> exciting new build tool called "scons" for our projects. The home page
> for this project is at:
> 
> http://www.scons.org
> 
> 
> Scons is billed as a "make replacement" but it is actually much closer
> to autotools in scope. It works well on both windows and unix, does
> almost all of the configuration and building stuff that autotools can do
> (and is being steadily expanded), builds shared libraries, ditches make,
> has an active user and developer community and is written in python so
> it's very easy to extend. It has many nice featrues like direct support
> for parallel compliation on multi-headed machines and it uses MD4
> checksums rather than timestamps to do dependency checking.
> 
> Scons takes a slightly different (and in my opinion more modern)
> approach to source builds than autotools. Autotools assumes that the
> normal mode of distribution of a package is a source code tarball and
> that a user must be able to configure and compile a tarball with a
> fairly minimal (UNIX-like) system. Scons recognizes that these days (a)
> most end users get their packages as binaries, and (b) developers
> working with source code can be expected to have some more powerful
> tools on their systems, such as python. The benefit of this assumption
> is a very clean approach to builds that doesn't use make. The build
> scripts that you write in scons are actually compact python scripts that
> are directly executed when you ask scons to build your package.
> Customizing your build is as simple as adding python code into the build
> script. Customizing an autotools build is typically much more cryptic
> since you are dealing with layers of different primitive languages such
> as m4, shell script, automake and the make syntax itself, and you are
> often writing code that has to write other code. Yuk!
> 
> The main drawbacks with scons are: (a) it's not as standard as
> autotools, and (b) the documentation is currently not all that great,
> although the developers are working on it apparently!
> 
> Anyway, just noting that there are alternatives to autotools. I'm not
> volunteering to re-engineer the GDAL build process using scons right
> now... :)
> 
> Cheers,
> 
> Sy

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Tue Oct 14 10:13:27 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Compile Error
In-Reply-To: <Pine.LNX.4.53.0310141031470.28461@agrippa.ukshells.co.uk>
References: <Pine.LNX.4.53.0310141031470.28461@agrippa.ukshells.co.uk>
Message-ID: <3F8C0487.9020309@pobox.com>

Paul Kelly wrote:

> See below for make output from today's CVS on an SGI IRIX 6.2 system
> (1.1.9 compiles fine as far as I can remember). Seems to me here it is
> trying to use the C compiler to compile a C++ source file. Same thing
> happens both with and without using libtool.
...
> make[2]: Entering directory `/indigo-disk2/grass/gdal-libtool/frmts/gxf'
> /bin/sh ../../libtool --mode=compile cc -I../../port -I../../gcore -I../../ogr    -c -o ../o/gxfdataset.o gxfdataset.cpp
>  cc -I../../port -I../../gcore -I../../ogr -c gxfdataset.cpp  -DPIC -o ../o/.libs/gxfdataset.o
> cfe: Error: ../../gcore/gdal_priv.h, line 176: Syntax Error
>  class GDALMajorObject;
>  ------^

Paul,

That is pretty funky.  I tried building on Linux and get this:

warmerda@gdal[122]% make
/bin/sh ../../libtool --mode=compile g++ -Wall  -g -DDEBUG  -I../../port -I../.
/gcore -I../../ogr  -c -o gxfdataset.o gxfdataset.cpp
  g++ -Wall -g -DDEBUG -I../../port -I../../gcore -I../../ogr -c gxfdataset.cpp
-fPIC -DPIC -o .libs/gxfdataset.o
  g++ -Wall -g -DDEBUG -I../../port -I../../gcore -I../../ogr -c gxfdataset.cpp
o gxfdataset.o >/dev/null 2>&1
/bin/sh ../../libtool --mode=compile gcc -Wall  -g -DDEBUG   -I../../port -I../
./gcore -I../../ogr  -c -o gxfopen.o gxfopen.c
  gcc -Wall -g -DDEBUG -I../../port -I../../gcore -I../../ogr -c gxfopen.c  -fPI
  -DPIC -o .libs/gxfopen.o

In short, the makefile seems to know to use the configured C++ compiler for
gxfdataset.cpp and the configured C compiler for the remaining .c files.   What
are the CXX and CC macros set to in your GDALmake.opt?  I am assuming that since
you got as far as GXF that the C++ compiler must be setup properly though if
not you could definately see this behaviour.  If that is the case you could
either hand edit your GDALmake.opt or rerun configure with "CXX=CC" in
your environment or something similar.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From neteler at itc.it  Tue Oct 14 12:13:10 2003
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Sinusoidal projection for MODIS images with OGR
In-Reply-To: <20031014090508.C6908@itc.it>; from neteler@itc.it on Tue, Oct 14, 2003 at 09:05:08AM +0200
References: <71E37EF6B7DCC1499CEA0316A2568328E79F8E@loki.wc.globexplorer.net> <20031014090508.C6908@itc.it>
Message-ID: <20031014181310.E14296@itc.it>

On Tue, Oct 14, 2003 at 09:05:08AM +0200, Markus Neteler wrote:
> On Mon, Oct 13, 2003 at 12:17:39AM -0700, Chris G. Nicholas wrote:
> > you can also use the MODIS reproject tool,
> > http://lpdaac2.usgs.gov/landdaac/tools/modis/index.asp, to get it in a
> > projection that might perhaps be more familiar...
> 
> The MODIS reproject tool is only able to read ISIN, not SIN.

Some minutes ago I was told by the MRT developers, that the
latest version now also supports SIN.

Markus

From Matt.Wilkie at gov.yk.ca  Tue Oct 14 12:19:26 2003
From: Matt.Wilkie at gov.yk.ca (Matt.Wilkie)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] gdaltindex reports no prj defined, gdalinfo disagr
	ees, maybe
Message-ID: <6DD7370C9452D31192A10008C75D07531BD93E48@raptor.ynet.gov.yk.ca>

> Sorry for not responding sooner.  That's what you get for 
> asking a complicated question!

:)
 
> ... So, GDAL can read 
> the projection definition just fine, but it doesn't support 
> rendering files georeferenced via GCPs instead of a reference 
> point and pixel size.

Ahhhh. At least I know what is going on now.

> I don't know why the extents in the .txg are so noticably 
> different than the control georeferenced locations of the 
> control points themselves.  Ask ESRI. 

I will, count on it. Dunno what good it will do though. I've been asking so
many questions of them this year I suspect I get filed in the "crank" bit
bucket. ;-)

> PPS.  If you want to use this image with MapServer, just run 
> it through gdalwarp first.  This will resample the image 
> "north up" and you won't have to worry about control point issues.

Okay, I think this will work for us.

Take care,

-matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
--------------------------------------------  


From cgn at globexplorer.com  Tue Oct 14 13:10:48 2003
From: cgn at globexplorer.com (Chris G. Nicholas)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] RE: Kakadu georeferencing
Message-ID: <71E37EF6B7DCC1499CEA0316A2568328E79FA4@loki.wc.globexplorer.net>

Just wondering if the Kakadu driver will properly pick up an external ".wld" file in the context of Minn Map Server.  We have a bunch of shtuff from before GeoJP2 was invented...

pogo-> more S-18-00.wld
28.500000000000000
0.000000000000000
0.000000000000000
28.500000000000000
116023.500000000000000
997.500000000000000
pogo->

pogo-> gdalinfo S-18-00.jpc
Driver: JP2KAK/JPEG-2000 (based on Kakadu)
Size is 26946, 19489
Coordinate System is `'
Origin = (0.000000,0.000000)
Pixel Size = (1.000000,1.000000)
Corner Coordinates:
Upper Left  (   0.0000000,   0.0000000)
Lower Left  (       0.000,   19489.000)
Upper Right (   26946.000,       0.000)
Lower Right (   26946.000,   19489.000)
Center      (   13473.000,    9744.500)
Band 1 Block=512x128 Type=Byte, ColorInterp=Gray
  Overviews: 13473x9745, 6737x4873, 3369x2437, 1685x1219, 843x610, 422x305, 211x
153
Band 2 Block=512x128 Type=Byte, ColorInterp=Gray
  Overviews: 13473x9745, 6737x4873, 3369x2437, 1685x1219, 843x610, 422x305, 211x
153
Band 3 Block=512x128 Type=Byte, ColorInterp=Gray
  Overviews: 13473x9745, 6737x4873, 3369x2437, 1685x1219, 843x610, 422x305, 211x
153

thanks!

Chris Nicholas
GlobeXplorer

From s.perkins at lanl.gov  Tue Oct 14 13:18:10 2003
From: s.perkins at lanl.gov (Simon Perkins)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] porting of gdal to (optional) libtool build finally
	completed
In-Reply-To: <3F8BFFD0.4090906@pobox.com>
References: <200309252127.10466.alexamici@tiscali.it>
	 <1065811963.8076.158.camel@afreet.lanl.gov>  <3F8BFFD0.4090906@pobox.com>
Message-ID: <1066151889.3864.39.camel@afreet.lanl.gov>

On Tue, 2003-10-14 at 07:53, Frank Warmerdam wrote:

> Thats good information.  I assume you have been pleased with it so far in
> actual use?
> 
> While I am in no big rush to rework the GDAL build architecture again just
> now, I am wondering if OpenEV might not benefit from this.  Currently OpenEV's
> build structure is pretty half-assed, and OpenEV builds are currently pretty
> complicated.  Also, OpenEV requires Python, so we wouldn't have to worry about
> gripes from the folks who don't want to have to install Python.
> 
> I will try to look at this at some point for OpenEV.

I would say that it's definitely worth looking into, with the caveat
that the scons is somewhat less mature than autotools. In particular the
documentation is sparse, though a swish new user guide is promised in
the next week or two. Approximately, I would say that scons can do
pretty much everything you want autoconf and automake to do, but its
shared library building abilities for obscure unix platforms are not yet
as complete as libtool. On the other hand, the fundamental design is
much cleaner and clearer than autotools. Definitely woprth considering
for python based systems.

Cheers,

Sy



From ben at vterrain.org  Tue Oct 14 13:41:31 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Sinusoidal projection for MODIS images with OGR
In-Reply-To: <20031014090508.C6908@itc.it>
Message-ID: <00ef01c3927a$67780490$f400fe0a@TOPP2>

Well, if the images are in a normal sinusoidal (SIN), then we don't need the
MODIS reproject tool at all, we can just use GDAL :-)  The question is about
the images from (http://rapidfire.sci.gsfc.nasa.gov/gallery/) which claim to
be Sinusoidal.  I.e. are they SIN, or actually ISIN.  As i mentioned,
telling GDAL/OGR they are SIN produces results that look approximately
correct.  They have also already been convert from HDF to JPEG, so they are
quite likely output from the MODIS reproject tool; no need to run them
through again.

-Ben

> -----Original Message-----
> From: Markus Neteler
> Sent: Tuesday, October 14, 2003 2:05 AM
> 
> On Mon, Oct 13, 2003 at 12:17:39AM -0700, Chris G. Nicholas wrote:
> > you can also use the MODIS reproject tool,
> > http://lpdaac2.usgs.gov/landdaac/tools/modis/index.asp, to 
> > get it in a projection that might perhaps be more familiar...
> 
> The MODIS reproject tool is only able to read ISIN, not SIN.


From warmerdam at pobox.com  Tue Oct 14 13:46:32 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] RE: Kakadu georeferencing
In-Reply-To: <71E37EF6B7DCC1499CEA0316A2568328E79FA4@loki.wc.globexplorer.net>
References: <71E37EF6B7DCC1499CEA0316A2568328E79FA4@loki.wc.globexplorer.net>
Message-ID: <3F8C3678.9000002@pobox.com>

Chris G. Nicholas wrote:
> Just wondering if the Kakadu driver will properly pick up an external ".wld" file in the context of Minn Map Server.  We have a bunch of shtuff from before GeoJP2 was invented...
> 
> pogo-> more S-18-00.wld
> 28.500000000000000
> 0.000000000000000
> 0.000000000000000
> 28.500000000000000
> 116023.500000000000000
> 997.500000000000000
> pogo->

Chris,

GDAL doesn't currently look for .wld files for JP2 files, but UMN MapServer
will always look for a .wld file for files read through GDAL if GDALGetGeoTransform()
returns an error.  Looking at the code, it seems it would better to change
this to look for the world file if the georeferencing is the null transform too.

...
   else if( layer->transform )
   {
       if (GDALGetGeoTransform( hDS, adfGeoTransform ) != CE_None)
           GDALReadWorldFile((char *)GDALGetDescription(hDS),
                             "wld", adfGeoTransform);

However, if you don't mind recompiling I have added .wld file support into
the CVS version of the JP2KAK driver just now.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From paul-grass at stjohnspoint.co.uk  Tue Oct 14 16:10:15 2003
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Re: Compile Error
In-Reply-To: <20031014160001.4487.65271.Mailman@yoda.imagelinks.com>
References: <20031014160001.4487.65271.Mailman@yoda.imagelinks.com>
Message-ID: <Pine.LNX.4.53.0310142103190.13870@agrippa.ukshells.co.uk>


> ...
> > make[2]: Entering directory `/indigo-disk2/grass/gdal-libtool/frmts/gxf'
> > /bin/sh ../../libtool --mode=compile cc -I../../port -I../../gcore -I../../ogr    -c -o ../o/gxfdataset.o gxfdataset.cpp
> >  cc -I../../port -I../../gcore -I../../ogr -c gxfdataset.cpp  -DPIC -o ../o/.libs/gxfdataset.o
> > cfe: Error: ../../gcore/gdal_priv.h, line 176: Syntax Error
> >  class GDALMajorObject;
> >  ------^
>
> Paul,
>
> That is pretty funky.  I tried building on Linux and get this:
>
> warmerda@gdal[122]% make
> /bin/sh ../../libtool --mode=compile g++ -Wall  -g -DDEBUG  -I../../port -I../.
> /gcore -I../../ogr  -c -o gxfdataset.o gxfdataset.cpp
>   g++ -Wall -g -DDEBUG -I../../port -I../../gcore -I../../ogr -c gxfdataset.cpp
> -fPIC -DPIC -o .libs/gxfdataset.o
>   g++ -Wall -g -DDEBUG -I../../port -I../../gcore -I../../ogr -c gxfdataset.cpp
> o gxfdataset.o >/dev/null 2>&1
> /bin/sh ../../libtool --mode=compile gcc -Wall  -g -DDEBUG   -I../../port -I../
> ./gcore -I../../ogr  -c -o gxfopen.o gxfopen.c
>   gcc -Wall -g -DDEBUG -I../../port -I../../gcore -I../../ogr -c gxfopen.c  -fPI
>   -DPIC -o .libs/gxfopen.o
>
> In short, the makefile seems to know to use the configured C++ compiler for
> gxfdataset.cpp and the configured C compiler for the remaining .c files.   What
> are the CXX and CC macros set to in your GDALmake.opt?  I am assuming that since

Yes they are set up correctly to CC and cc respectively. All the C++ files
up to this point compiled OK. The interesting thing is that when I cd to
that particular directory and run make from there, it works fine and uses
the correct compiler (is that what you did above?) but when running make
recursively from the top-level directory the problem occurred.
I will look at it again when I have time tomorrow.

Paul

PS Please reply to me directly as I am only a digest subscriber now


From schut at sarvision.com  Wed Oct 15 07:59:46 2003
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] using Goode Homolosine imagery (modis 32 day composites)
Message-ID: <20031015135946.3e0ea5ab.schut@sarvision.com>

Dears,

Recently I downloaded several image sets of modis 32 day 500m composites of Oceania (from http://glcf.umiacs.umd.edu/data/). These are geotiffs, but coordinate system information is wrong. The right projection information is on http://modis.umiacs.umd.edu/modis500mDescription.htm, where it is stated that the images are in Goode's Homolosine projection, datum&ellps=sphere. Corner coordinates for each of the subsets are also given.
I know Goode is actually a composite projection of several sinusoidal and mollweide subsets, and actually pretty useless except for producing nice looking equal area maps of the entire earth. I also know that proj knows goode as '+proj=goode +ellps=sphere'. However, if I try to correct the projection info or to warp the images, overriding the geotiff projection using one of the gdal utilities (gdal_translate a_srs='+proj=goode +ellps=sphere') I get an error:
Failed to process SRS definition: +proj=goode +ellps=sphere

This also happens if I leave out the '+ellps=sphere' part.

If I however run 'cs2cs +proj=goode +ellps=sphere +to +proj=latlong' I don't get any error.

- is gdal able to use goode's homolosine projection, at least to reproject _from_ it?
- anybody knows another way of correcting the geotiff information in these files? (gdalinfo output is copied at the end of this message)
- or of warping these files to another projection or even latlong?

Here is the gdalinfo output of one of the files:

Driver: GTiff/GeoTIFF
Size is 18200, 15400
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235629972,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (10083500.000000,2374500.000000)
Pixel Size = (500.000000,-500.000000)
Metadata:
  TIFFTAG_SOFTWARE=hdf2geotiff v0.1.0
Corner Coordinates:
Upper Left  (10083500.000, 2374500.000) (577741992d43'2078764171276.60"E,136048828d27'489626271757.73"N)
Lower Left  (10083500.000,-5325500.000) (577741992d43'2078764171276.60"E,305128673d47'1099511627824.91"S)
Upper Right (19183500.000, 2374500.000) (1099133586d17'3955664879637.17"E,136048828d27'489626271757.73"N)
Lower Right (19183500.000,-5325500.000) (1099133586d17'3955664879637.17"E,305128673d47'1099511627824.91"S)
Center      (14633500.000,-1475500.000) (838437789d30'3019362009104.88"E,84539922d40'304942678033.59"S)
Band 1 Block=18200x1 Type=UInt16, ColorInterp=Gray

Cheers,
Vincent.

From alessandro_amici at telespazio.it  Wed Oct 15 09:29:37 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:57 2007
Subject: R: [Gdal-dev] Re: Compile Error
Message-ID: <7171FE1C83A6AE4DA93B80999588680767C2FD@ROMADG-MAIL01>

Paul,

your problem should be fixed in cvs now. would you double check and
report how it goes?

thanks,
alessandro

From paul-grass at stjohnspoint.co.uk  Wed Oct 15 11:06:33 2003
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Wed Nov 21 11:48:57 2007
Subject: R: [Gdal-dev] Re: Compile Error
In-Reply-To: <7171FE1C83A6AE4DA93B80999588680767C2FD@ROMADG-MAIL01>
References: <7171FE1C83A6AE4DA93B80999588680767C2FD@ROMADG-MAIL01>
Message-ID: <Pine.LNX.4.53.0310151604060.16077@agrippa.ukshells.co.uk>


On Wed, 15 Oct 2003, Amici Alessandro wrote:

>
> Paul,
>
> your problem should be fixed in cvs now. would you double check and
> report how it goes?

Yes, working fine now. Below are a few other simple changes I had to make
to get it to compile. The new shared library is called libgdal.so.2.9.

Paul

Index: alg/contour.cpp
===================================================================
RCS file: /cvsroot/osrs/gdal/alg/contour.cpp,v
retrieving revision 1.1
diff -u -r1.1 contour.cpp
--- alg/contour.cpp	10 Oct 2003 19:44:46 -0000	1.1
+++ alg/contour.cpp	15 Oct 2003 15:02:23 -0000
@@ -442,7 +442,7 @@
 /* -------------------------------------------------------------------- */
     int iPixel;

-    for( int iPixel = 0; iPixel < nWidth; iPixel++ )
+    for( iPixel = 0; iPixel < nWidth; iPixel++ )
     {
         double dfLevel = (padfThisLine[iPixel] - dfContourOffset)
             / dfContourInterval;
Index: frmts/bsb/bsb_read.c
===================================================================
RCS file: /cvsroot/osrs/gdal/frmts/bsb/bsb_read.c,v
retrieving revision 1.12
diff -u -r1.12 bsb_read.c
--- frmts/bsb/bsb_read.c	8 Jul 2003 20:28:09 -0000	1.12
+++ frmts/bsb/bsb_read.c	15 Oct 2003 15:02:23 -0000
@@ -538,8 +538,8 @@
     do {
         byNext = BSBGetc( fp, psInfo->bNO1 );

-        // Special hack to skip over extra zeros in some files, such
-        // as optech/sample1.kap.
+        /* Special hack to skip over extra zeros in some files, such
+           as optech/sample1.kap. */
         while( nScanline != 0 && nLineMarker == 0 && byNext == 0 )
             byNext = BSBGetc( fp, psInfo->bNO1 );

Index: frmts/dted/dted_api.c
===================================================================
RCS file: /cvsroot/osrs/gdal/frmts/dted/dted_api.c,v
retrieving revision 1.13
diff -u -r1.13 dted_api.c
--- frmts/dted/dted_api.c	4 Aug 2003 18:23:07 -0000	1.13
+++ frmts/dted/dted_api.c	15 Oct 2003 15:02:24 -0000
@@ -317,9 +317,9 @@
         {
             panData[i] *= -1;

-            // It seems that some files are improperly generated in twos
-            // complement form for negatives.  For these, redo the job
-            // in twos complement.  eg. w_069_s50.dt0
+            /* It seems that some files are improperly generated in twos
+               complement form for negatives.  For these, redo the job
+               in twos complement.  eg. w_069_s50.dt0 */
             if( panData[i] < -16000 )
             {
                 static int bWarned = FALSE;

From warmerdam at pobox.com  Wed Oct 15 11:52:37 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: R: [Gdal-dev] Re: Compile Error
In-Reply-To: <Pine.LNX.4.53.0310151604060.16077@agrippa.ukshells.co.uk>
References: <7171FE1C83A6AE4DA93B80999588680767C2FD@ROMADG-MAIL01> <Pine.LNX.4.53.0310151604060.16077@agrippa.ukshells.co.uk>
Message-ID: <3F8D6D45.6090509@pobox.com>

Paul Kelly wrote:
> 
> On Wed, 15 Oct 2003, Amici Alessandro wrote:
> 
> 
>>Paul,
>>
>>your problem should be fixed in cvs now. would you double check and
>>report how it goes?
> 
> 
> Yes, working fine now. Below are a few other simple changes I had to make
> to get it to compile. The new shared library is called libgdal.so.2.9.

Paul,

C++ style comments now fixed in CVS.  The contour.cpp should be fixed in my
next commit of contour.cpp which is being substantially rewritten to use
a more efficient algorithm.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From gbuckmaster at cox.net  Wed Oct 15 19:58:45 2003
From: gbuckmaster at cox.net (Gerald Buckmaster)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] RE: Kakadu georeferencing
In-Reply-To: <3F8C3678.9000002@pobox.com>
References: <71E37EF6B7DCC1499CEA0316A2568328E79FA4@loki.wc.globexplorer.net> <3F8C3678.9000002@pobox.com>
Message-ID: <200310151658.45903.gbuckmaster@cox.net>

Frank,

This is a bit off-topic, development-wise, but the thread touched off a 
question.

I am using geotifcp, and gdal_translate.exe with Kakadu to georeference and 
compress BMP files, first converting the BMP to a regular TIF, then TIF to 
GeoTIFF, and finally GeoTIFF to JP2 format.  I use a VBScript to do the 
number crunching and passing of variables to the executables for processing.  
Is there a way I can go straight from BMP to JP2 using only a geotiff tag, 
like the one below, without the 2 intermediate conversion steps?  I'm looking 
to reduce the processing time per image (currently 60 seconds per 82mb BMP 
file)?

v/r

Buck

Geotiff_Information:
Version: 1
Key_Revision: 1.0
Tagged_Information:
ModelTransformationTag(4,4):
3.17756913644005E-07 1.56182512826881E-06 0 -147.895661114049
1.56182512826881E-06 -3.17756913644005E-07 0 33.2643388859509
0 0 0 0
0 0 0 1
End_Of_Tags.
Keyed_Information:
GTModelTypeGeoKey (Short,1): ModelTypeGeographic
GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
GeographicTypeGeoKey (Short,1): GCS_WGS_84
End_Of_Keys.
End_Of_Geotiff.



On Tuesday 14 October 2003 10:46 am, Frank Warmerdam wrote:
> Chris G. Nicholas wrote:
> > Just wondering if the Kakadu driver will properly pick up an external
> > ".wld" file in the context of Minn Map Server.  We have a bunch of shtuff
> > from before GeoJP2 was invented...
> >
> > pogo-> more S-18-00.wld
> > 28.500000000000000
> > 0.000000000000000
> > 0.000000000000000
> > 28.500000000000000
> > 116023.500000000000000
> > 997.500000000000000
> > pogo->
>
> Chris,
>
> GDAL doesn't currently look for .wld files for JP2 files, but UMN MapServer
> will always look for a .wld file for files read through GDAL if
> GDALGetGeoTransform() returns an error.  Looking at the code, it seems it
> would better to change this to look for the world file if the
> georeferencing is the null transform too.
>
> ...
>    else if( layer->transform )
>    {
>        if (GDALGetGeoTransform( hDS, adfGeoTransform ) != CE_None)
>            GDALReadWorldFile((char *)GDALGetDescription(hDS),
>                              "wld", adfGeoTransform);
>
> However, if you don't mind recompiling I have added .wld file support into
> the CVS version of the JP2KAK driver just now.
>
> Best regards,


From cgn at globexplorer.com  Thu Oct 16 02:27:56 2003
From: cgn at globexplorer.com (Chris G. Nicholas)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] RE: Kakadu, MMS
Message-ID: <71E37EF6B7DCC1499CEA0316A2568328E79FCD@loki.wc.globexplorer.net>

I have a bunch of images that look fine in kdu_show, but when I try to make MMS images out of them with GDAL, am getting just blank images with the attached MMS  .map file; tried with and without the "EXTENTS" tag...

gdalinfo sees them just fine, and gdaltranslate works on them too...

hmmmm....comments/suggestions/?? welcomed...

Chris
---------------------------------------------------
[cgn@localhost ecuador]$ more mosaic_08_28_2003_ecuador.wld
.0021949
0
0
-.0020833
-91.388395
10.00000


gdalinfo mosaic_08_28_2003_ecuador.jpc
Driver: JP2KAK/JPEG-2000 (based on Kakadu)
Size is 9748, 9600
Coordinate System is `'
Origin = (0.000000,0.000000)
Pixel Size = (1.000000,1.000000)
Corner Coordinates:
Upper Left  (   0.0000000,   0.0000000)
Lower Left  (       0.000,    9600.000)
Upper Right (    9748.000,       0.000)
Lower Right (    9748.000,    9600.000)
Center      (    4874.000,    4800.000)
Band 1 Block=512x128 Type=Byte, ColorInterp=Gray
  Overviews: 4874x4800, 2437x2400, 1219x1200, 610x600, 305x300, 153x150, 77x75
Band 2 Block=512x128 Type=Byte, ColorInterp=Gray
  Overviews: 4874x4800, 2437x2400, 1219x1200, 610x600, 305x300, 153x150, 77x75
Band 3 Block=512x128 Type=Byte, ColorInterp=Gray
  Overviews: 4874x4800, 2437x2400, 1219x1200, 610x600, 305x300, 153x150, 77x75
[cgn@localhost ecuador]$


[cgn@localhost ecuador]$ gdalinfo r309.jp2
Driver: JP2KAK/JPEG-2000 (based on Kakadu)
Size is 4800, 8400
Coordinate System is `'
Origin = (0.000000,0.000000)
Pixel Size = (1.000000,1.000000)
Corner Coordinates:
Upper Left  (   0.0000000,   0.0000000)
Lower Left  (       0.000,    8400.000)
Upper Right (    4800.000,       0.000)
Lower Right (    4800.000,    8400.000)
Center      (    2400.000,    4200.000)
Band 1 Block=512x128 Type=Byte, ColorInterp=Gray
  Overviews: 2400x4200, 1200x2100, 600x1050, 300x525, 150x263, 75x132
[cgn@localhost ecuador]$


-------------- next part --------------
A non-text attachment was scrubbed...
Name: test2.map
Type: application/octet-stream
Size: 664 bytes
Desc: test2.map
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20031015/76c44fe3/test2.obj
From neteler at itc.it  Wed Oct 15 12:13:10 2003
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Sinusoidal projection for MODIS images with OGR
In-Reply-To: <00ef01c3927a$67780490$f400fe0a@TOPP2>; from ben@vterrain.org on Tue, Oct 14, 2003 at 01:41:31PM -0400
References: <20031014090508.C6908@itc.it> <00ef01c3927a$67780490$f400fe0a@TOPP2>
Message-ID: <20031015181310.S28002@itc.it>

On Tue, Oct 14, 2003 at 01:41:31PM -0400, Ben Discoe wrote:
> 
> Well, if the images are in a normal sinusoidal (SIN), then we don't need the
> MODIS reproject tool at all, we can just use GDAL :-)

Mhhh, for me it doesn't work (yesterday's CVS version). Trying on 
"MODIS/Terra Land Surface Temperature/Emissivity Daily L3 Global 1km SIN Grid":

gdalinfo MOD11A1.A2000055.h18v04.004.2002355023354.hdf
Driver: HDF4/Hierarchical Data Format Release 4
Size is 512, 512
Coordinate System is '
Metadata:
  HDFEOSVersion=HDFEOS_V2.4
  LOCALGRANULEID=MOD11A1.A2000055.h18v04.004.2002355023354.hdf
  PRODUCTIONDATETIME=2002-12-21T02:33:54.000Z
  DAYNIGHTFLAG=Both
  REPROCESSINGACTUAL=reprocessed
  LOCALVERSIONID=SCF V4.1.3A
  REPROCESSINGPLANNED=further update is anticipated
  SCIENCEQUALITYFLAG=Not Investigated
  AUTOMATICQUALITYFLAGEXPLANATION=Passed if algorithm ran within bounds of execution constraints.  Suspect if bounds of execution constraints violated.  Failed if PGE failed.
  AUTOMATICQUALITYFLAG=Passed
  SCIENCEQUALITYFLAGEXPLANATION=See http://landdb1.nascom.nasa.gov/QA_WWW/release.cgi for the Science QA status of this product.
  QAPERCENTMISSINGDATA=0
  QAPERCENTOUTOFBOUNDSDATA=0
  QAPERCENTCLOUDCOVER=61
  QAPERCENTINTERPOLATEDDATA=0
  PARAMETERNAME=MOD 1KM L3 LST
  VERSIONID=4
  SHORTNAME=MOD11A1
  INPUTPOINTER=MOD03.A2000055.1010.004.2002296011149.hdf,MOD021KM.A2000055.1010.004.2002296173139.hdf,MOD35_L2.A2000055.1010.004.2002297061857.hdf,MOD10_L2.A2000055.1010.004.2002354210009.hdf,MOD07_L2.A2000055.1010.004.2002297062000.hdf,MOD03.A2000055.1145.004.2002296011823.hdf,MOD021KM.A2000055.1145.004.2002296023327.hdf,MOD35_L2.A2000055.1145.004.2002296060357.hdf,MOD10_L2.A2000055.1145.004.2002354210217.hdf,MOD07_L2.A2000055.1145.004.2002296060509.hdf,MOD03.A2000055.1150.004.2002296012012.hdf,MOD021KM.A2000055.1150.004.2002296023356.hdf,MOD35_L2.A2000055.1150.004.2002296060336.hdf,MOD10_L2.A2000055.1150.004.2002354210217.hdf,MOD07_L2.A2000055.1150.004.2002296060449.hdf,MOD03.A2000055.2115.004.2002296073024.hdf,MOD021KM.A2000055.2115.004.2002296082726.hdf,MOD35_L2.A2000055.2115.004.2002296134515.hdf,MOD07_L2.A2000055.2115.004.2002296134700.hdf,MOD03.A2000055.2120.004.2002296073106.hdf,MOD021KM.A2000055.2120.004.2002296101156.hdf,MOD35_L2.A2000055.2120.004.2002296134111.hdf,MOD07_L2.A2000055.2120.004.2002296134234.hdf,MOD03.A2000055.2255.004.2002296095939.hdf,MOD021KM.A2000055.2255.004.2002296145019.hdf,MOD35_L2.A2000055.2255.004.2002296165000.hdf,MOD07_L2.A2000055.2255.004.2002296165152.hdf
  GRINGPOINTLONGITUDE=0.000000, 15.544281, 13.044787, 0.000000
  GRINGPOINTLATITUDE=49.995833, 49.995833, 40.004167, 40.004167
  GRINGPOINTSEQUENCENO=1, 2, 3, 4
  EXCLUSIONGRINGFLAG=N
  RANGEENDINGDATE=2000-02-24
  RANGEENDINGTIME=22:59:36.085400
  RANGEBEGINNINGDATE=2000-02-24
  RANGEBEGINNINGTIME=10:10:38.975336
  PGEVERSION=4.1.4
  ASSOCIATEDSENSORSHORTNAME=MODIS
  ASSOCIATEDPLATFORMSHORTNAME=Terra
  ASSOCIATEDINSTRUMENTSHORTNAME=MODIS
  QAPERCENTGOODQUALITY=12
  QAPERCENTOTHERQUALITY=0
  QAPERCENTNOTPRODUCEDCLOUD=61
  QAPERCENTNOTPRODUCEDOTHER=27
  N_GRAN_POINTERS=27
  HORIZONTALTILENUMBER=18
  VERTICALTILENUMBER=04
  TileID=51018004
  QAFRACTIONGOODQUALITY=0.1232632
  QAFRACTIONOTHERQUALITY=0.0000000
  QAFRACTIONNOTPRODUCEDCLOUD=0.6113181
  QAFRACTIONNOTPRODUCEDOTHER=0.2654187
  HORIZONTALTILENUMBER=18
  VERTICALTILENUMBER=04
  ALGORITHMPACKAGEACCEPTANCEDATE=1997-11-01
  ALGORITHMPACKAGEMATURITYCODE=pre-launch
  ALGORITHMPACKAGENAME=MOD_PR11A_V3
  ALGORITHMPACKAGEVERSION=Version 2
  LONGNAME=MODIS/Terra Land Surface Temperature/Emissivity Daily L3 Global 1km SIN Grid
  INSTRUMENTNAME=Moderate-Resolution Imaging SpectroRadiometer
  INPUTTILEPOINTER=MOD12Q1.A2000289.h18v04.003.2002170222129.hdf
  INPUTTILEPOINTER=MOD11A1.1.A2000055.h18v04.hdf
  INPUTTILEPOINTER=MOD11B1.1.A2000055.h18v04.hdf
  INPUTTILEPOINTER=MOD11UPD.A2-1.1.update_for_lst.h18v04.hdf
  INPUTGRANULEPOINTER=MOD03.A2000055.1010.004.2002296011149.hdf
  INPUTGRANULEPOINTER=MOD021KM.A2000055.1010.004.2002296173139.hdf
  INPUTGRANULEPOINTER=MOD35_L2.A2000055.1010.004.2002297061857.hdf
  INPUTGRANULEPOINTER=MOD10_L2.A2000055.1010.004.2002354210009.hdf
  INPUTGRANULEPOINTER=MOD07_L2.A2000055.1010.004.2002297062000.hdf
  INPUTGRANULEPOINTER=MOD03.A2000055.1145.004.2002296011823.hdf
  INPUTGRANULEPOINTER=MOD021KM.A2000055.1145.004.2002296023327.hdf
  INPUTGRANULEPOINTER=MOD35_L2.A2000055.1145.004.2002296060357.hdf
  INPUTGRANULEPOINTER=MOD10_L2.A2000055.1145.004.2002354210217.hdf
  INPUTGRANULEPOINTER=MOD07_L2.A2000055.1145.004.2002296060509.hdf
  INPUTGRANULEPOINTER=MOD03.A2000055.1150.004.2002296012012.hdf
  INPUTGRANULEPOINTER=MOD021KM.A2000055.1150.004.2002296023356.hdf
  INPUTGRANULEPOINTER=MOD35_L2.A2000055.1150.004.2002296060336.hdf
  INPUTGRANULEPOINTER=MOD10_L2.A2000055.1150.004.2002354210217.hdf
  INPUTGRANULEPOINTER=MOD07_L2.A2000055.1150.004.2002296060449.hdf
  INPUTGRANULEPOINTER=MOD03.A2000055.2115.004.2002296073024.hdf
  INPUTGRANULEPOINTER=MOD021KM.A2000055.2115.004.2002296082726.hdf
  INPUTGRANULEPOINTER=MOD35_L2.A2000055.2115.004.2002296134515.hdf
  INPUTGRANULEPOINTER=MOD07_L2.A2000055.2115.004.2002296134700.hdf
  INPUTGRANULEPOINTER=MOD03.A2000055.2120.004.2002296073106.hdf
  INPUTGRANULEPOINTER=MOD021KM.A2000055.2120.004.2002296101156.hdf
  INPUTGRANULEPOINTER=MOD35_L2.A2000055.2120.004.2002296134111.hdf
  INPUTGRANULEPOINTER=MOD07_L2.A2000055.2120.004.2002296134234.hdf
  INPUTGRANULEPOINTER=MOD03.A2000055.2255.004.2002296095939.hdf
  INPUTGRANULEPOINTER=MOD021KM.A2000055.2255.004.2002296145019.hdf
  INPUTGRANULEPOINTER=MOD35_L2.A2000055.2255.004.2002296165000.hdf
  INPUTGRANULEPOINTER=MOD07_L2.A2000055.2255.004.2002296165152.hdf
  LOCALINPUTGRANULEID=1010,1145,1150,2115,2120,2255
  LOOKUPTABLETYPE=Land-cover based band emissivity database
  LOOKUPTABLEPOINTER=band_emis.h
  LOOKUPTABLETYPE=the generalized split-window LST coefficients
  LOOKUPTABLEPOINTER=lst_coef.h
  PROCESSINGCENTER=GSFC
  PROCESSINGDATETIME=2002-12-21T02:33:54.000Z
  NORTHBOUNDINGCOORDINATE=49.995833
  SOUTHBOUNDINGCOORDINATE=40.004167
  EASTBOUNDINGCOORDINATE=15.544281
  WESTBOUNDINGCOORDINATE=0.000000
  SPSOPARAMETERS=2484 and 3323
  PROCESSINGENVIRONMENT=IRIX64 mtvs2 6.5 07121149 IP35
  DESCRREVISION=4.0
Subdatasets:

SUBDATASET_1_NAME=HDF4_SDS:UNKNOWN:"MOD11A1.A2000055.h18v04.004.2002355023354.hdf":0
  SUBDATASET_1_DESC=[1200x1200] LST_Day_1km (16-bit unsigned integer)

SUBDATASET_2_NAME=HDF4_SDS:UNKNOWN:"MOD11A1.A2000055.h18v04.004.2002355023354.hdf":1
  SUBDATASET_2_DESC=[1200x1200] QC_Day (8-bit unsigned integer)

SUBDATASET_3_NAME=HDF4_SDS:UNKNOWN:"MOD11A1.A2000055.h18v04.004.2002355023354.hdf":2
  SUBDATASET_3_DESC=[1200x1200] Day_view_time (8-bit unsigned integer)

SUBDATASET_4_NAME=HDF4_SDS:UNKNOWN:"MOD11A1.A2000055.h18v04.004.2002355023354.hdf":3
  SUBDATASET_4_DESC=[1200x1200] Day_view_angl (8-bit unsigned integer)

SUBDATASET_5_NAME=HDF4_SDS:UNKNOWN:"MOD11A1.A2000055.h18v04.004.2002355023354.hdf":4
  SUBDATASET_5_DESC=[1200x1200] LST_Night_1km (16-bit unsigned integer)

SUBDATASET_6_NAME=HDF4_SDS:UNKNOWN:"MOD11A1.A2000055.h18v04.004.2002355023354.hdf":5
  SUBDATASET_6_DESC=[1200x1200] QC_Night (8-bit unsigned integer)

SUBDATASET_7_NAME=HDF4_SDS:UNKNOWN:"MOD11A1.A2000055.h18v04.004.2002355023354.hdf":6
  SUBDATASET_7_DESC=[1200x1200] Night_view_time (8-bit unsigned integer)

SUBDATASET_8_NAME=HDF4_SDS:UNKNOWN:"MOD11A1.A2000055.h18v04.004.2002355023354.hdf":7
  SUBDATASET_8_DESC=[1200x1200] Night_view_angl (8-bit unsigned integer)

SUBDATASET_9_NAME=HDF4_SDS:UNKNOWN:"MOD11A1.A2000055.h18v04.004.2002355023354.hdf":8
  SUBDATASET_9_DESC=[1200x1200] Emis_31 (8-bit unsigned integer)

SUBDATASET_10_NAME=HDF4_SDS:UNKNOWN:"MOD11A1.A2000055.h18v04.004.2002355023354.hdf":9
  SUBDATASET_10_DESC=[1200x1200] Emis_32 (8-bit unsigned integer)

SUBDATASET_11_NAME=HDF4_SDS:UNKNOWN:"MOD11A1.A2000055.h18v04.004.2002355023354.hdf":10
  SUBDATASET_11_DESC=[1200x1200] Clear_day_cov (16-bit unsigned integer)

SUBDATASET_12_NAME=HDF4_SDS:UNKNOWN:"MOD11A1.A2000055.h18v04.004.2002355023354.hdf":11
  SUBDATASET_12_DESC=[1200x1200] Clear_night_cov (16-bit unsigned integer)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)

Do you have a suggestion for me?

[...]

Thanks,

 Markus

From dron at ak4719.spb.edu  Thu Oct 16 02:58:14 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Sinusoidal projection for MODIS images with OGR
In-Reply-To: <20031015181310.S28002@itc.it>
References: <20031014090508.C6908@itc.it> <00ef01c3927a$67780490$f400fe0a@TOPP2> <20031015181310.S28002@itc.it>
Message-ID: <20031016065814.GA13694@ak4719.spb.edu>

On Wed, Oct 15, 2003 at 06:13:10PM +0200, Markus Neteler wrote:
> On Tue, Oct 14, 2003 at 01:41:31PM -0400, Ben Discoe wrote:
> > 
> > Well, if the images are in a normal sinusoidal (SIN), then we don't
> > need the MODIS reproject tool at all, we can just use GDAL :-)
> 
> Mhhh, for me it doesn't work (yesterday's CVS version). Trying on 
> "MODIS/Terra Land Surface Temperature/Emissivity Daily L3 Global 1km SIN Grid":
> 
> gdalinfo MOD11A1.A2000055.h18v04.004.2002355023354.hdf
> Driver: HDF4/Hierarchical Data Format Release 4

Markus,

This is not supported directly by the HDF driver yet. I'm working to
improve the driver as I promised before. I think Ben uses world file to
specify corner coordinates and -a_srs option to set an input projection
for his JPEGs. But HDF driver doesn't support world files, so individual
subdatasets should be converted in other format (TIFF) if you want to do
so.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From alessandro_amici at telespazio.it  Thu Oct 16 03:47:00 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] error because of libtool?
Message-ID: <7171FE1C83A6AE4DA93B80999588680767C975@ROMADG-MAIL01>

[i alredy replyed to this mail from a different account, but some of
my mails get stuck, Frank do you have any clue?]

Vincent,

> /bin/sh ./libtool --mode=link   g++ -lodbc -L/usr/local/lib -lmfhdf 
> -ldf -ljpeg -lpng -Lyes -Lyes -lz -lm -ldl -L/usr/lib -lpq 
> -o libgdal.la ./frmts/o/*.lo ./gcore/*.lo ./port/*.lo ./alg/*.lo 

[...]

> ./libtool: line 1: cd: yes: No such file or directory
> libtool: link: cannot determine absolute directory name of `yes'
> make[1]: *** [libgdal.la] Error 1
> make[1]: Leaving directory `/usr/local/src/gdal'
> make: *** [check-lib] Error 2

my guess is that you are using '--with-*something*=yes' and configure
is now using 'yes' as a search directory for libraries (!!).

if you give us the complete configure command line you used we can
probably restore the correct behaviour, in the mean time just use 
'--with-*somethnig*' without '=yes'.

cheers,
alessandro

From schut at sarvision.com  Thu Oct 16 06:35:57 2003
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] error because of libtool?
In-Reply-To: <7171FE1C83A6AE4DA93B80999588680767C975@ROMADG-MAIL01>
References: <7171FE1C83A6AE4DA93B80999588680767C975@ROMADG-MAIL01>
Message-ID: <20031016123557.432698c3.schut@sarvision.com>

Alessandro,

That was also my first guess, as there are two instances of '-Lyes' in the last shown line. I do not have any --with-bla=yes in my configure however. I just retried after a cvs up and the problem is still there. Compiling without-libtool works OK.

These are my configure options:

#!/bin/bash
#gdal configure script
./configure \
--with-libz \
--with-png \
--with-geotiff=internal \
--with-jpeg \
--with-hdf4=/usr/local

Cheers,
Vincent.

On Thu, 16 Oct 2003 09:47:00 +0200
Amici Alessandro <alessandro_amici@telespazio.it> wrote:

> 
> [i alredy replyed to this mail from a different account, but some of
> my mails get stuck, Frank do you have any clue?]
> 
> Vincent,
> 
> > /bin/sh ./libtool --mode=link   g++ -lodbc -L/usr/local/lib -lmfhdf 
> > -ldf -ljpeg -lpng -Lyes -Lyes -lz -lm -ldl -L/usr/lib -lpq 
> > -o libgdal.la ./frmts/o/*.lo ./gcore/*.lo ./port/*.lo ./alg/*.lo 
> 
> [...]
> 
> > ./libtool: line 1: cd: yes: No such file or directory
> > libtool: link: cannot determine absolute directory name of `yes'
> > make[1]: *** [libgdal.la] Error 1
> > make[1]: Leaving directory `/usr/local/src/gdal'
> > make: *** [check-lib] Error 2
> 
> my guess is that you are using '--with-*something*=yes' and configure
> is now using 'yes' as a search directory for libraries (!!).
> 
> if you give us the complete configure command line you used we can
> probably restore the correct behaviour, in the mean time just use 
> '--with-*somethnig*' without '=yes'.
> 
> cheers,
> alessandro
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev
> 

From warmerdam at pobox.com  Thu Oct 16 09:54:02 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] RE: Kakadu georeferencing
In-Reply-To: <200310151658.45903.gbuckmaster@cox.net>
References: <71E37EF6B7DCC1499CEA0316A2568328E79FA4@loki.wc.globexplorer.net> <3F8C3678.9000002@pobox.com> <200310151658.45903.gbuckmaster@cox.net>
Message-ID: <3F8EA2FA.1000408@pobox.com>

Gerald Buckmaster wrote:

> Frank,
> 
> This is a bit off-topic, development-wise, but the thread touched off a 
> question.
> 
> I am using geotifcp, and gdal_translate.exe with Kakadu to georeference and 
> compress BMP files, first converting the BMP to a regular TIF, then TIF to 
> GeoTIFF, and finally GeoTIFF to JP2 format.  I use a VBScript to do the 
> number crunching and passing of variables to the executables for processing.  
> Is there a way I can go straight from BMP to JP2 using only a geotiff tag, 
> like the one below, without the 2 intermediate conversion steps?  I'm looking 
> to reduce the processing time per image (currently 60 seconds per 82mb BMP 
> file)?
> 
> v/r
> 
> Buck
> 
> Geotiff_Information:
> Version: 1
> Key_Revision: 1.0
> Tagged_Information:
> ModelTransformationTag(4,4):
> 3.17756913644005E-07 1.56182512826881E-06 0 -147.895661114049
> 1.56182512826881E-06 -3.17756913644005E-07 0 33.2643388859509
> 0 0 0 0
> 0 0 0 1
> End_Of_Tags.
> Keyed_Information:
> GTModelTypeGeoKey (Short,1): ModelTypeGeographic
> GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
> GeographicTypeGeoKey (Short,1): GCS_WGS_84
> End_Of_Keys.
> End_Of_Geotiff.

Gerald,

You can do the translation in one step using gdal_translate if you write
out your ModelTransformationTag info to a .wld file along side the .bmp file.
Assuming your .bmp has the appropriate .wld the following command would
translate to JP2 format with the WGS84 LL coordinate system:

   gdal_translate -a_srs WGS84 -of JP2KAK input.bmp output.jp2

Hopefully the world file format is pretty obvious, but one easy way to
verify the correct argument order is to run the "listgeo" utility with the
-tfw flag against a geotiff file and a corresponding world file (with the
.tfw extension) will be written out.  From that you can ensure you know what
order to put in the coefficients.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From neteler at itc.it  Thu Oct 16 12:12:00 2003
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Sinusoidal projection for MODIS images with OGR
In-Reply-To: <20031016065814.GA13694@ak4719.spb.edu>; from dron@ak4719.spb.edu on Thu, Oct 16, 2003 at 10:58:14AM +0400
References: <20031014090508.C6908@itc.it> <00ef01c3927a$67780490$f400fe0a@TOPP2> <20031015181310.S28002@itc.it> <20031016065814.GA13694@ak4719.spb.edu>
Message-ID: <20031016181200.Q6341@itc.it>

On Thu, Oct 16, 2003 at 10:58:14AM +0400, Andrey Kiselev wrote:
> On Wed, Oct 15, 2003 at 06:13:10PM +0200, Markus Neteler wrote:
> > On Tue, Oct 14, 2003 at 01:41:31PM -0400, Ben Discoe wrote:
> > > 
> > > Well, if the images are in a normal sinusoidal (SIN), then we don't
> > > need the MODIS reproject tool at all, we can just use GDAL :-)
> > 
> > Mhhh, for me it doesn't work (yesterday's CVS version). Trying on 
> > "MODIS/Terra Land Surface Temperature/Emissivity Daily L3 Global 1km SIN Grid":
> > 
> > gdalinfo MOD11A1.A2000055.h18v04.004.2002355023354.hdf
> > Driver: HDF4/Hierarchical Data Format Release 4
> 
> Markus,
> 
> This is not supported directly by the HDF driver yet. I'm working to
> improve the driver as I promised before. I think Ben uses world file to
> specify corner coordinates and -a_srs option to set an input projection
> for his JPEGs. But HDF driver doesn't support world files, so individual
> subdatasets should be converted in other format (TIFF) if you want to do
> so.

... so MRT is my friend for now, the GDAL for the resulting GeoTIFF :-)
I'll stay tuned as usual for HDF updates.

Best

 Markus

From ben at vterrain.org  Thu Oct 16 13:01:58 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Sinusoidal projection for MODIS images with OGR
In-Reply-To: <20031016065814.GA13694@ak4719.spb.edu>
Message-ID: <005301c39407$36613cd0$f400fe0a@TOPP2>

> -----Original Message-----
> From: Andrey Kiselev
> 
> not supported directly by the HDF driver yet. I think Ben
> uses world file to specify corner coordinates and -a_srs
> option to set an input projection for his JPEGs.

Yes, the JPEGs are from http://rapidfire.sci.gsfc.nasa.gov/gallery/ which
provides world files - though i'm calling GDAL/OGR directly rather than
using the command-line tools.  I use GDAL to load the image with world file,
then describe the projection with OGR, then do my own reprojection from SIN
using OGR.  This is all done with the GUI in our VTBuilder application.  As
mentioned, seems to work - but there is a small funny offset, which might be
explain by SIN/ISIN difference, or by ellipsoid differences, or something
else i don't understand.

Any prospect for ISIN support in OGR/PROJ.4?

-Ben


From warmerdam at pobox.com  Thu Oct 16 14:02:41 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Contour Generation
Message-ID: <3F8EDD41.5040906@pobox.com>

Folks,

I have implemented contour line generation from raster DEMs as part of a
contract with Applied Coherent Technology (http://www.actgate.com/) within
GDAL.  The algorithm attempts to maintain respectible performance, and to
ensure (as far as possible) that contour lines are fully "joined up".  That
is that complete contour lines are emitted as one feature assuming they are't
split by nodata pixels.

The primary entry point is GDALContourCreate():

   http://www.remotesensing.org/gdal/gdal_alg_h.html#a27

This function is called by the commandline utility gdal_contour which so far
is only built on demand (cd into gdal/apps and do "make all").

Feedback is welcome on the algorithm.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From alexamici at tiscali.it  Thu Oct 16 15:55:55 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:57 2007
Subject: R: R: [Gdal-dev] Compile latest cvs under Solaris 2.8
In-Reply-To: <3F84625C.6040600@pobox.com>
References: <7171FE1C83A6AE4DA93B80999588680753C6D2@ROMADG-MAIL01> <200310082053.26613.alexamici@tiscali.it> <3F84625C.6040600@pobox.com>
Message-ID: <200310162155.55083.alexamici@tiscali.it>

Frank,

On Wednesday 08 October 2003 21:15, Frank Warmerdam wrote:
> Alessandro Amici wrote:
> > Frank,
> >
> >>I have committed the OCI fix for LIBS into CVS (in GDALmake.opt.in).
> >
> > is there any reason the oci driver cannot be selected with a configure
> > command line option?
>
> Alessandro,
>
> There is no compelling reason, no.
>
> Best regards,

i added a new configure command line option for selecting oci support
--with-oci, but i also broke the old way to select it (via the definition of 
ORACLE_HOME).

is it ok?

cheers,
alessandro


From warmerdam at pobox.com  Thu Oct 16 16:06:17 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: R: R: [Gdal-dev] Compile latest cvs under Solaris 2.8
In-Reply-To: <200310162155.55083.alexamici@tiscali.it>
References: <7171FE1C83A6AE4DA93B80999588680753C6D2@ROMADG-MAIL01> <200310082053.26613.alexamici@tiscali.it> <3F84625C.6040600@pobox.com> <200310162155.55083.alexamici@tiscali.it>
Message-ID: <3F8EFA39.8000409@pobox.com>

Alessandro Amici wrote:
> i added a new configure command line option for selecting oci support
> --with-oci, but i also broke the old way to select it (via the definition of 
> ORACLE_HOME).
> 
> is it ok?

Alessandro,

Yes, that should be fine.

Thanks,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From cgn at globexplorer.com  Thu Oct 16 16:13:49 2003
From: cgn at globexplorer.com (Chris G. Nicholas)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] RE: Kakadu, MMS
Message-ID: <71E37EF6B7DCC1499CEA0316A2568328E79FDF@loki.wc.globexplorer.net>

With lots of help from Frank, got it to work (yeah!)

had to:

a) rebuild everything with Tiff 3.6

b) use latest/greatest GDAL from CVS

but very well worth the effort - extracting a patch from a huge image in Kakadu only takes a few seconds.

thanks again for great software.

Chris


-----Original Message-----
From:	Chris G. Nicholas
Sent:	Wed 10/15/2003 11:27 PM
To:	gdal-dev@remotesensing.org
Cc:	
Subject:	[Gdal-dev] RE: Kakadu, MMS
I have a bunch of images that look fine in kdu_show, but when I try to make MMS images out of them with GDAL, am getting just blank images with the attached MMS  .map file; tried with and without the "EXTENTS" tag...

gdalinfo sees them just fine, and gdaltranslate works on them too...

hmmmm....comments/suggestions/?? welcomed...

Chris
---------------------------------------------------
[cgn@localhost ecuador]$ more mosaic_08_28_2003_ecuador.wld
.0021949
0
0
-.0020833
-91.388395
10.00000


gdalinfo mosaic_08_28_2003_ecuador.jpc
Driver: JP2KAK/JPEG-2000 (based on Kakadu)
Size is 9748, 9600
Coordinate System is `'
Origin = (0.000000,0.000000)
Pixel Size = (1.000000,1.000000)
Corner Coordinates:
Upper Left  (   0.0000000,   0.0000000)
Lower Left  (       0.000,    9600.000)
Upper Right (    9748.000,       0.000)
Lower Right (    9748.000,    9600.000)
Center      (    4874.000,    4800.000)
Band 1 Block=512x128 Type=Byte, ColorInterp=Gray
  Overviews: 4874x4800, 2437x2400, 1219x1200, 610x600, 305x300, 153x150, 77x75
Band 2 Block=512x128 Type=Byte, ColorInterp=Gray
  Overviews: 4874x4800, 2437x2400, 1219x1200, 610x600, 305x300, 153x150, 77x75
Band 3 Block=512x128 Type=Byte, ColorInterp=Gray
  Overviews: 4874x4800, 2437x2400, 1219x1200, 610x600, 305x300, 153x150, 77x75
[cgn@localhost ecuador]$


[cgn@localhost ecuador]$ gdalinfo r309.jp2
Driver: JP2KAK/JPEG-2000 (based on Kakadu)
Size is 4800, 8400
Coordinate System is `'
Origin = (0.000000,0.000000)
Pixel Size = (1.000000,1.000000)
Corner Coordinates:
Upper Left  (   0.0000000,   0.0000000)
Lower Left  (       0.000,    8400.000)
Upper Right (    4800.000,       0.000)
Lower Right (    4800.000,    8400.000)
Center      (    2400.000,    4200.000)
Band 1 Block=512x128 Type=Byte, ColorInterp=Gray
  Overviews: 2400x4200, 1200x2100, 600x1050, 300x525, 150x263, 75x132
[cgn@localhost ecuador]$







From alexamici at fastwebnet.it  Fri Oct 17 14:30:51 2003
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] error because of libtool?
In-Reply-To: <20031017133832.GA20960@lowresbox.lan>
References: <7171FE1C83A6AE4DA93B80999588680767C975@ROMADG-MAIL01> <200310162152.55464.alexamici@fastwebnet.it> <20031017133832.GA20960@lowresbox.lan>
Message-ID: <200310172030.51597.alexamici@fastwebnet.it>

Vincent,

On Friday 17 October 2003 15:38, Vincent Schut wrote:
> Fix confirmed.

thanks

> Compilation is with libtool is terribly sloooowwww... Will the without-
> libtool option stay? Any drawbacks on not using the libtool mechanism?

the old mechanism still supports all architectures that were supported before, 
*but* the name of the library file is different and a small but important 
detail is got wrong (the soname is not set properly).

so i advise to only use the --witout-libtool during development and maybe 
testing, but definetly use the libtool build in production systems (sure it 
is sloooow, but you don't rebuild gdal everyday, do you? ;)

my plan (not sure if Frank will agree, thou) is to leave the -without-libtool 
option to only support the development platforms (linux mainly but also any 
unix with gcc and gnu ld). this will further simplify the build 
infrastructure and still leave anybody using the gnu tools with the option of 
a fast build.

cheers,
alessandro


From fchen at ne.rsgs.ac.cn  Sun Oct 19 02:40:17 2003
From: fchen at ne.rsgs.ac.cn (Fu Chen)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Anyway to translate tiff into a geotiff one?
Message-ID: <004001c3960b$dc124f60$b76b4dc0@sss>

Hi!
I have some tiff files generated from the other image processing programs. The tags of geography are missed.
Is there anyway to fix it up? Is there any command can add tags on it and make it a geotiff that GIS application can read?
Thanks!


From dron at ak4719.spb.edu  Sun Oct 19 04:12:55 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Anyway to translate tiff into a geotiff one?
In-Reply-To: <004001c3960b$dc124f60$b76b4dc0@sss>
References: <004001c3960b$dc124f60$b76b4dc0@sss>
Message-ID: <20031019081255.GA12938@ak4719.spb.edu>

On Sun, Oct 19, 2003 at 02:40:17PM +0800, Fu Chen wrote:
> I have some tiff files generated from the other image processing
> programs. The tags of geography are missed. Is there anyway to fix it
> up? Is there any command can add tags on it and make it a geotiff that
> GIS application can read?

Yes, you can add missed information using GDAL, but you should excatly
know geographic parameters of the converted scene.

1. You should prepare worldfile with the geodetic coordinates of the
scene. Worldfile is a simple ASCII file with the six numbers, separated
by newlines, with the .wld suffix. Numbers meanning:

 <pixel width>
 <row rotation>
 <column rotation>
 <pixel height>
 <X coordinate of the top left pixel center>
 <Y coordinate of the top left pixel center>

2. You need to know, what coordinate system and projection should be
used for your scene. As soon as you got thise info you can use
gdal_translate with the -a_srs otion to convert your TIFFs.

For example, let we have unreferenced old.tif file:

$ gdalinfo old.tif 
Driver: GTiff/GeoTIFF
Size is 515, 515
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  515.0)
Upper Right (  515.0,    0.0)
Lower Right (  515.0,  515.0)
Center      (  257.5,  257.5)
Band 1 Block=515x15 Type=Byte, ColorInterp=Gray

Prepare a world file:

$ cat old.wld 
60.0000000000
0.0000000000
0.0000000000
-60.0000000000
-15381.6153115346
15418.7591774315

I know, that input file has Albers Equal Area projection and I know
projection parameters, so now I can do following:

$ gdal_translate -a_srs "+datum=WGS84 +proj=aea \
+lat_1=33.90363402777778 +lat_2=33.62529002777778 \
+lat_0=33.76446202777777 +lon_0=-117.4745428888889" old.tif new.tif

And now we have result:

$ gdalinfo new.tif
Driver: GTiff/GeoTIFF                                                           Size is 515, 515
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235629972,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Albers_Conic_Equal_Area"],
    PARAMETER["standard_parallel_1",33.90363402777778],
    PARAMETER["standard_parallel_2",33.62529002777778],
    PARAMETER["latitude_of_center",33.76446202777777],
    PARAMETER["longitude_of_center",-117.4745428888889],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-15411.615312,15448.759177)
Pixel Size = (60.000000,-60.000000)
Corner Coordinates:
Upper Left  (  -15411.615,   15448.759) (117d38'28.23"W, 33d54'13.06"N)
Lower Left  (  -15411.615,  -15451.241) (117d38'26.29"W, 33d37'30.16"N)
Upper Right (   15488.385,   15448.759) (117d18'25.49"W, 33d54'13.06"N)
Lower Right (   15488.385,  -15451.241) (117d18'27.44"W, 33d37'30.16"N)
Center      (  38.3846885,  -1.2408226) (117d28'26.86"W, 33d45'52.02"N)
Band 1 Block=515x15 Type=Byte, ColorInterp=Gray

Of course, all above things could be done in place, without using
intermediate files with the simple Python script.

					Regards,
					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From phil.lavery at mac.com  Mon Oct 20 03:10:26 2003
From: phil.lavery at mac.com (Phil Lavery)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] OSX compile problem
Message-ID: <7A9C1D06-02CC-11D8-8EF2-000A95A08E96@mac.com>

Hi

I am trying to compile GDAL on OSX 10.2.6, and get the following error.
I have gone back through the archives but can't see a similar problem.

I would be very grateful for any help on this.
Oh, I'm not a programmer so please be gentle with me....

many thanks

Phil

g++ -Wl,-bind_at_load  -o .libs/_gdalmodule.so -bundle  
.libs/gdal_wrap.o .libs/numpydataset.o .libs/gdalnumeric.o  
../.libs/libgdal.dylib -lz -lm -L/stereotools/gdal/.libs
ld: Undefined symbols:
_PyArg_Parse
_PyArg_ParseTuple
_PyDict_New
_PyDict_Next
_PyDict_SetItem
_PyDict_Type
_PyErr_Clear
_PyErr_SetString
_PyEval_CallObjectWithKeywords
_PyExc_MemoryError
_PyExc_NameError
_PyExc_TypeError
_PyExc_ValueError
_PyFloat_AsDouble
_PyFloat_FromDouble
_PyInt_AsLong
_PyInt_FromLong
_PyInt_Type
_PyList_New
_PyList_SetItem
_PyList_Size
_PyList_Type
_PyModule_GetDict
_PyString_AsString
_PyString_FromString
_PyString_FromStringAndSize
_PyString_Type
_PyType_IsSubtype
_PyType_Type
_Py_BuildValue
_Py_InitModule4
__Py_NoneStruct
make[1]: *** [_gdalmodule.la] Error 1
make: *** [py-module] Error 2
[Beagle3:/stereotools/gdal] phillavery%


From alessandro_amici at telespazio.it  Mon Oct 20 03:44:12 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:57 2007
Subject: R: [Gdal-dev] OSX compile problem
Message-ID: <7171FE1C83A6AE4DA93B8099958868076D9670@ROMADG-MAIL01>

Phil,

> I am trying to compile GDAL on OSX 10.2.6, and get the following error.
> I have gone back through the archives but can't see a similar problem.

> g++ -Wl,-bind_at_load  -o .libs/_gdalmodule.so -bundle  
> .libs/gdal_wrap.o .libs/numpydataset.o .libs/gdalnumeric.o  
> ../.libs/libgdal.dylib -lz -lm -L/stereotools/gdal/.libs
> ld: Undefined symbols:
> _PyArg_Parse
[...]

apparently you miss a reference to the python library in the g++ 
command line. i don't know what is the correct fix for this, but
if you don't need gdal support for the python programming language
you can easily work around the problem adding '--without-python' on
the ./configure command line.

cheers,
alessadnro

From phil.lavery at mac.com  Mon Oct 20 08:57:38 2003
From: phil.lavery at mac.com (Phil Lavery)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] OSX compile problem
In-Reply-To: <7171FE1C83A6AE4DA93B8099958868076D9670@ROMADG-MAIL01>
Message-ID: <FBDC55D5-02FC-11D8-B091-000A95A08E96@mac.com>

Hi Alessandro

thank you, that seems to have worked.

Now I just need to get the OSG to find the GDAL libs.....

Entering directory gdal
c++  -O2 -Wall -D__DARWIN_OSX__ -I../../../../include 
-I/usr/X11R6/include -c ../ReaderWriterGDAL.cpp
c++  -O2  -L../../../../lib/Darwin  -L/usr/X11R6/lib -L/sw/lib -bundle  
ReaderWriterGDAL.o    -losgGA -losgDB -losgUtil -losg  -lgdal.1.1 -lm 
-lstdc++ -lobjc -lOpenThreads -o osgdb_gdal.so
ld: can't locate file for: -lgdal.1.1
make[4]: *** [osgdb_gdal.so] Error 1
make[3]: *** [osgdb_gdal.so.opt] Error 2
make[2]: *** [default] Error 1
make[1]: *** [default] Error 1
make: *** [default] Error 1
[Beagle3:/OpenSceneGraph] phillavery%


thanks again

phil

>> I am trying to compile GDAL on OSX 10.2.6, and get the following 
>> error.
>> I have gone back through the archives but can't see a similar problem.
>
>> g++ -Wl,-bind_at_load  -o .libs/_gdalmodule.so -bundle
>> .libs/gdal_wrap.o .libs/numpydataset.o .libs/gdalnumeric.o
>> ../.libs/libgdal.dylib -lz -lm -L/stereotools/gdal/.libs
>> ld: Undefined symbols:
>> _PyArg_Parse
> [...]
>
> apparently you miss a reference to the python library in the g++
> command line. i don't know what is the correct fix for this, but
> if you don't need gdal support for the python programming language
> you can easily work around the problem adding '--without-python' on
> the ./configure command line.
>
> cheers,
> alessadnro
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev
>



Phil Lavery
Greythorn Associates
07811 44 56 57
01294 824 824
fax: 01294 822 593
phil@greythornassociates.com


From phil.lavery at mac.com  Mon Oct 20 08:57:38 2003
From: phil.lavery at mac.com (Phil Lavery)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] OSX compile problem
In-Reply-To: <7171FE1C83A6AE4DA93B8099958868076D9670@ROMADG-MAIL01>
Message-ID: <FBDC55D5-02FC-11D8-B091-000A95A08E96@mac.com>

Hi Alessandro

thank you, that seems to have worked.

Now I just need to get the OSG to find the GDAL libs.....

Entering directory gdal
c++  -O2 -Wall -D__DARWIN_OSX__ -I../../../../include 
-I/usr/X11R6/include -c ../ReaderWriterGDAL.cpp
c++  -O2  -L../../../../lib/Darwin  -L/usr/X11R6/lib -L/sw/lib -bundle  
ReaderWriterGDAL.o    -losgGA -losgDB -losgUtil -losg  -lgdal.1.1 -lm 
-lstdc++ -lobjc -lOpenThreads -o osgdb_gdal.so
ld: can't locate file for: -lgdal.1.1
make[4]: *** [osgdb_gdal.so] Error 1
make[3]: *** [osgdb_gdal.so.opt] Error 2
make[2]: *** [default] Error 1
make[1]: *** [default] Error 1
make: *** [default] Error 1
[Beagle3:/OpenSceneGraph] phillavery%


thanks again

phil

>> I am trying to compile GDAL on OSX 10.2.6, and get the following 
>> error.
>> I have gone back through the archives but can't see a similar problem.
>
>> g++ -Wl,-bind_at_load  -o .libs/_gdalmodule.so -bundle
>> .libs/gdal_wrap.o .libs/numpydataset.o .libs/gdalnumeric.o
>> ../.libs/libgdal.dylib -lz -lm -L/stereotools/gdal/.libs
>> ld: Undefined symbols:
>> _PyArg_Parse
> [...]
>
> apparently you miss a reference to the python library in the g++
> command line. i don't know what is the correct fix for this, but
> if you don't need gdal support for the python programming language
> you can easily work around the problem adding '--without-python' on
> the ./configure command line.
>
> cheers,
> alessadnro
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev
>



Phil Lavery
Greythorn Associates
07811 44 56 57
01294 824 824
fax: 01294 822 593
phil@greythornassociates.com


From alessandro_amici at telespazio.it  Mon Oct 20 10:12:41 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:57 2007
Subject: R: [Gdal-dev] OSX compile problem
Message-ID: <7171FE1C83A6AE4DA93B809995886807720295@ROMADG-MAIL01>


Phil,

> Now I just need to get the OSG to find the GDAL libs.....

> Entering directory gdal
> c++  -O2 -Wall -D__DARWIN_OSX__ -I../../../../include 
> -I/usr/X11R6/include -c ../ReaderWriterGDAL.cpp
> c++  -O2  -L../../../../lib/Darwin  -L/usr/X11R6/lib -L/sw/lib -bundle  
> ReaderWriterGDAL.o    -losgGA -losgDB -losgUtil -losg  -lgdal.1.1 -lm 
> -lstdc++ -lobjc -lOpenThreads -o osgdb_gdal.so
> ld: can't locate file for: -lgdal.1.1

the -lgdal.1.1 link option was correct for gdal 1.1.9, but it
is not supported anymore.

in order to link against the current gdal in cvs you need to
substitute -lgdal.1.1 with -lgdal somewhere in the configuration
files of OSG.

try something like:
$ grep -r "lgdal.1.1" .
in order to find the file to change.

i cannot help you more since i don't know OSG at all.

BTW, this change will be present in all future releases of gdal.

cheers,
alessandro

From lxnyce at bellsouth.net  Mon Oct 20 12:23:33 2003
From: lxnyce at bellsouth.net (lxnyce@bellsouth.net)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Memory Leak in  RasterIO?
Message-ID: <20031020162333.UJYH1789.imf24aec.mail.bellsouth.net@mail.bellsouth.net>

Has anyone else notice that every call to GDALRasterIO seems to be leaking memory with the latest and previous CVS versions of GDAL for a while now. I don't know about the official release. I have observed this using GeoTIFF and IMG files (the only ones I have tried). 

I came to the conclusion that the leak is in GDALRasterIO (or one of its sub-functions) because if I comment out that line alone, I get no memory leak. Everything else works as it should, just garbage values. I also notice that it occurs with or without the use of overviews. I have tried flushing the cache for every band, and still nothing. When I check the size of the block cache, its the default, ~5Megs.

Its pretty serious, because after roaming an image for a few iterations, the memory starts climbing. I reach 50megs worth of leaks just within a minute (according to windows task manager physical/virtual memory). The problem is not in my app, I am almost 100% certain of this, but inside that function. 

Is this a known issue? Can anyone point me in the right direction as to whats going on to leak so much memory? Are there any workarounds?



From warmerdam at pobox.com  Mon Oct 20 13:17:33 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Memory Leak in  RasterIO?
In-Reply-To: <20031020162333.UJYH1789.imf24aec.mail.bellsouth.net@mail.bellsouth.net>
References: <20031020162333.UJYH1789.imf24aec.mail.bellsouth.net@mail.bellsouth.net>
Message-ID: <3F9418AD.2010609@pobox.com>

lxnyce@bellsouth.net wrote:
> Has anyone else notice that every call to GDALRasterIO seems to be leaking memory with the latest and previous CVS versions of GDAL for a while now. I don't know about the official release. I have observed this using GeoTIFF and IMG files (the only ones I have tried). 
> 
> I came to the conclusion that the leak is in GDALRasterIO (or one of its sub-functions) because if I comment out that line alone, I get no memory leak. Everything else works as it should, just garbage values. I also notice that it occurs with or without the use of overviews. I have tried flushing the cache for every band, and still nothing. When I check the size of the block cache, its the default, ~5Megs.
> 
> Its pretty serious, because after roaming an image for a few iterations, the memory starts climbing. I reach 50megs worth of leaks just within a minute (according to windows task manager physical/virtual memory). The problem is not in my app, I am almost 100% certain of this, but inside that function. 
> 
> Is this a known issue? Can anyone point me in the right direction as to whats going on to leak so much memory? Are there any workarounds?

Hi,

I haven't observed this myself, but it is possible.  But I just did a quick
test with valgrind when using gdal_translate to translate a GeoTIFF file to
GeoTIFF and it didn't seem to have any noteworthy leaks.  What kind of
platform are you working on?  Is your application one on which it would be
practical to run valgrind (a Linux utility) or some other leak tester?  Can
you provide a simple commandline program and input file that demonstrates
your problem?

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From alessandro_amici at telespazio.it  Tue Oct 21 05:44:57 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] porting of gdal to (optional) libtool build finall
	y completed
Message-ID: <7171FE1C83A6AE4DA93B809995886807749A26@ROMADG-MAIL01>

Simon,

sorry for taking that long to answer!

> As one of those libtool non-fans you mentioned, I can at least
> appreciate the effort required in getting libtool to work! :)

thanks ;)

> The following is a little tangential so feel free to ignore...

not ignored at all, i'm just way too busy for a mere 24 hours a day.

> Don't know if I've mentioned this before, and if I haven't, this is
> probably a tactless time to do so... but we've recently started using an
> exciting new build tool called "scons" for our projects. The home page
> for this project is at:
> 
> http://www.scons.org

i had a look at it after you first metioned on the list and the idea
looks really sweet. it is my intention to give it a spin as soon as
i can, expecially since at work i'm involved in a project where we hit the 
limits of gnu make quite hard.

> I'm not volunteering to re-engineer the GDAL build process using 
> scons right now... :)

i'm not, either!

at least not right now ;)

cheers,
alessandro

From gacicele at libero.it  Tue Oct 21 13:40:27 2003
From: gacicele at libero.it (Gabriele Flammia)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] how to create a new shapefile with ogr lib?
Message-ID: <200310211940.27213.gacicele@libero.it>

Hello to all,
????????I'm working for an exam, and I'm using ogr for implementing a simple 
overlay
operator. I'm working with shapefile, and now i have to create a new one with
the resulting feature. I have problem using the
ogrDataSource = OGRSFDriverRegistrar::Open( dirname, true ) ;
if the dirname is a directory (and not a .shp) i have a segmentation faults!
Any Idea?
Thanks
Gabriele


From sylvain.rioux at softmaptech.com  Tue Oct 21 13:50:19 2003
From: sylvain.rioux at softmaptech.com (Sylvain Rioux)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Using DEM
Message-ID: <NEBBJBLMOMCEDMBAMIFAIEMLCHAA.sylvain.rioux@softmaptech.com>

Hi,

In GDAL using a USGS DEM file,  is it possible to find the elevation of a
point from its coordinates (lat-lon or projected)? Does GDAL have some kind
of interpolation method to allow this?

Sylvain Rioux

Les technologies SoftMap (2002) inc.
400, boul. Jean-Lesage, bureau 540
Qu?bec (Qu?bec)
Canada G1K 8W1

T?l. : (418) 523-2929, poste 304
T?l?c. : (418) 523-7979
sylvain.rioux@softmaptech.com
www.softmaptech.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20031021/bc1adf22/attachment.html
From gacy at libero.it  Tue Oct 21 13:38:21 2003
From: gacy at libero.it (Gabriele Flammia)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] how to create a new shapefile with ogr?
Message-ID: <200310211938.23768.gacy@libero.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hello to all,
	I'm working for an exam, and I'm using ogr for implementing a simple overlay 
operator. I'm working with shapefile, and now i have to create a new one with 
the resulting feature. I have problem using the 
ogrDataSource = OGRSFDriverRegistrar::Open( dirname, true ) ;
if the dirname is a directory (and not a .shp) i have a segmentation faults!
Any Idea?
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3 (GNU/Linux)

iD8DBQE/lW8OXZv0tXjQI1MRAmLuAJwNFRG9ocp/un1EZ+aEOveFTMQprwCaAmw9
oiZGaYgvaV6Q0XDN8pUp2Es=
=vfvA
-----END PGP SIGNATURE-----


From warmerdam at pobox.com  Tue Oct 21 14:00:49 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Using DEM
In-Reply-To: <NEBBJBLMOMCEDMBAMIFAIEMLCHAA.sylvain.rioux@softmaptech.com>
References: <NEBBJBLMOMCEDMBAMIFAIEMLCHAA.sylvain.rioux@softmaptech.com>
Message-ID: <3F957451.5060005@pobox.com>

Sylvain Rioux wrote:
> Hi,
>  
> In GDAL using a USGS DEM file,  is it possible to find the elevation of 
> a point from its coordinates (lat-lon or projected)? Does GDAL have some 
> kind of interpolation method to allow this?

Sylvain,

The short answer is no.  You can use PROJ.4 or OGRCoordinateTransformation
services to reproject a location into the coordinate system of the USGS DEM
file and then convert to pixel/line coordinates.  Then read the four pixels
in the neighbourhood of that pixel/line location and perform bilinear
interpolation.

I have done this in the general warper resampler code, but I am not sure it
would work well to running to warper to produce a single output pixel image.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From gquesnel at jam21.net  Tue Oct 21 15:21:39 2003
From: gquesnel at jam21.net (Gilles Quesnel)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Re: Problems loading this geotiff from this website
Message-ID: <002f01c39808$8e7ca6c0$fe98f3c7@louis>

Hello everyone,

    I have recently installed the newest stable version of GRASS on Linux and one of the first things that I wanted to do was open this geotiff from the following website and be able to view it...

http://www.northstardigital.ca/download.htm

(It's the demo tiff 93H/10)

    Anyhow, when I try to read it with the r.in.gdal module, I get the following error...

segmentation violation (or something to that effect, I'm not on my computer at the moment).

Any reason why?  I am able to view it within windows and have had no trouble viewing on that end.

Hopefully someone can help me out,

Thank you very much.

Gilles

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20031021/13dabf55/attachment.html
From fchen at ne.rsgs.ac.cn  Tue Oct 21 21:57:36 2003
From: fchen at ne.rsgs.ac.cn (Fu Chen)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] What's the different between Kakadu and Japser
Message-ID: <013201c3983f$ddb60100$b76b4dc0@sss>

Hi!

I try to compress some landsat image into jpeg2000 loseless. Gdal provide two jpeg2000 library Kakadu and Japser. I think i can affort the register fee of Kakadu. But I don't know what's the different between them in the gdal document. Will Kakadu be more quick or something like GeoJ2 only implement in Kakadu not Jasper?

Is there someone like to give me some suggestion?

Thanks!!


From cgn at globexplorer.com  Tue Oct 21 22:13:03 2003
From: cgn at globexplorer.com (Chris G. Nicholas)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] What's the different between Kakadu and Japser
Message-ID: <71E37EF6B7DCC1499CEA0316A2568328E7A040@loki.wc.globexplorer.net>

Jasper's a nice toy to start with on little images; Kakadu is what we use in production.

Chris Nicholas
GlobeXplorer



-----Original Message-----
From:	Fu Chen [mailto:fchen@ne.rsgs.ac.cn]
Sent:	Tue 10/21/2003 6:57 PM
To:	gdal-dev@remotesensing.org
Cc:	
Subject:	[Gdal-dev] What's the different between Kakadu and Japser
Hi!

I try to compress some landsat image into jpeg2000 loseless. Gdal provide two jpeg2000 library Kakadu and Japser. I think i can affort the register fee of Kakadu. But I don't know what's the different between them in the gdal document. Will Kakadu be more quick or something like GeoJ2 only implement in Kakadu not Jasper?

Is there someone like to give me some suggestion?

Thanks!!

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev




From warmerdam at pobox.com  Tue Oct 21 22:29:45 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] What's the different between Kakadu and Japser
In-Reply-To: <013201c3983f$ddb60100$b76b4dc0@sss>
References: <013201c3983f$ddb60100$b76b4dc0@sss>
Message-ID: <3F95EB99.7070403@pobox.com>

Fu Chen wrote:
> Hi!
> 
> I try to compress some landsat image into jpeg2000 loseless. Gdal provide two jpeg2000 library Kakadu and Japser. I
> think i can affort the register fee of Kakadu. But I don't know what's the different between them in the gdal
> document. Will Kakadu be more quick or something like GeoJ2 only implement in Kakadu not Jasper?
> 
> Is there someone like to give me some suggestion?

Fu Chen,

As Chris suggested in another message, the primary differences are performance
related.  Both support the geo extensions for JP2 (at least as used in
GDAL), but the JasPer performance library always read and decompresses
the whole image at full resolution.  This makes it very unsuitable for
large or very large images.  Also, I have found JasPer to use emmense amounts
of RAM to decode even what I would consider medium sized images (eg.3K x 3K).
And memory use aside, even at full resolution Kakadu is substantially faster
than JasPer.

However, if the image sizes you want to work with aren't too large, and
performance is not a pressing issue JasPer should be fine.

The "personal use" Kakadu license would likely do if you are just wanting
to use it for your own processing.  It is reasonably priced.  The
commercial licenses allowing redistribution of commercial executables are
pretty pricey.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From fchen at ne.rsgs.ac.cn  Tue Oct 21 22:52:59 2003
From: fchen at ne.rsgs.ac.cn (Fu Chen)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Can't compile with jasper inside
Message-ID: <013801c39847$9a690660$b76b4dc0@sss>

Hi!
I try to use jasper in gdal. I uncommented the nmake.opt and set the right directory.

# Uncomment for JasPer based JPEG2000 support
JASPER_DIR = d:\jasper-1.700.2.uuid
JASPER_INCLUDE = -I$(JASPER_DIR)\src\libjasper\include -DJAS_WIN_MSVC_BUILD
JASPER_LIB = $(JASPER_DIR)\src\msvc\Win32_Release\libjasper.lib

And compile work well, for example

D:\gdalcvs-031015\gdal\frmts>call ..\submake.bat jpeg2000 
 copy *.obj ..\o
jpeg2000dataset.obj

But when i use gdalinfo-formats, there isn't a jpeg2000 inside and when i use it to read a jp2 file, it can't recognize it. 

the formats list is:

D:\gdalcvs-031015\gdal>apps\gdalinfo --formats
Supported Formats:
  VRT: Virtual Raster
  GTiff: GeoTIFF
  NITF: National Imagery Transmission Format
  HFA: Erdas Imagine Images (.img)
  SAR_CEOS: CEOS SAR Image
  CEOS: CEOS Image
  ELAS: ELAS
  AIG: Arc/Info Binary Grid
  AAIGrid: Arc/Info ASCII Grid
  SDTS: SDTS Raster
  DTED: DTED Elevation Raster
  PNG: Portable Network Graphics
  JPEG: JPEG JFIF
  MEM: In Memory Raster
  JDEM: Japanese DEM (.mem)
  GIF: Graphics Interchange Format (.gif)
  ESAT: Envisat Image Format
  BSB: Maptech BSB Nautical Charts
  XPM: X11 PixMap Format
  BMP: MS Windows Device Independent Bitmap
  PCIDSK: PCIDSK Database File
  PNM: Portable Pixmap Format (netpbm)
  DOQ1: USGS DOQ (Old Style)
  DOQ2: USGS DOQ (New Style)
  ENVI: ENVI .hdr Labelled
  EHdr: ESRI .hdr Labelled
  PAux: PCI .aux Labelled
  MFF: Atlantis MFF Raster
  MFF2: Atlantis MFF2 (HKV) Raster
  FujiBAS: Fuji BAS Scanner Image
  GSC: GSC Geogrid
  FAST: EOSAT FAST Format
  L1B: NOAA Polar Orbiter Level 1b Data Set
  FIT: FIT Image
  USGSDEM: USGS Optional ASCII DEM
  GXF: GeoSoft Grid Exchange Format

What's up? Anything I missed?
Thanks!!


From warmerdam at pobox.com  Wed Oct 22 09:15:09 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Can't compile with jasper inside
In-Reply-To: <013801c39847$9a690660$b76b4dc0@sss>
References: <013801c39847$9a690660$b76b4dc0@sss>
Message-ID: <3F9682DD.7010401@pobox.com>

Fu Chen wrote:
> Hi!
> I try to use jasper in gdal. I uncommented the nmake.opt and set the right directory.
> 
> # Uncomment for JasPer based JPEG2000 support
> JASPER_DIR = d:\jasper-1.700.2.uuid
> JASPER_INCLUDE = -I$(JASPER_DIR)\src\libjasper\include -DJAS_WIN_MSVC_BUILD
> JASPER_LIB = $(JASPER_DIR)\src\msvc\Win32_Release\libjasper.lib
> 
> And compile work well, for example
> 
> D:\gdalcvs-031015\gdal\frmts>call ..\submake.bat jpeg2000 
>  copy *.obj ..\o
> jpeg2000dataset.obj
> 
> But when i use gdalinfo-formats, there isn't a jpeg2000 inside and when i use it to read a jp2 file, it can't recognize it. 
> 
>

Fu Chen,

The dependency rules in the windows build aren't to sophisticated.  I
believe that gdalallregister.cpp isn't being re-compiled when you change
the nmake.opt file, so the new format registration isn't included.

After changing nmake.opt it may be necessary to do a make clean and
then rebuild.

eg
nmake /f makefile.vc clean
nmake /f makefile.vc

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dron at ak4719.spb.edu  Wed Oct 22 09:42:55 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Re: Problems loading this geotiff from this website
In-Reply-To: <002f01c39808$8e7ca6c0$fe98f3c7@louis>
References: <002f01c39808$8e7ca6c0$fe98f3c7@louis>
Message-ID: <20031022134255.GA27400@ak4719.spb.edu>

On Tue, Oct 21, 2003 at 02:21:39PM -0500, Gilles Quesnel wrote:
>     I have recently installed the newest stable version of GRASS on
>     Linux and one of the first things that I wanted to do was open
>     this geotiff from the following website and be able to view it...
> 
> http://www.northstardigital.ca/download.htm
> 
> (It's the demo tiff 93H/10)
> 
>     Anyhow, when I try to read it with the r.in.gdal module, I get the
>     following error...
> 
> segmentation violation (or something to that effect, I'm not on my
> computer at the moment).
> 
> Any reason why?  I am able to view it within windows and have had no
> trouble viewing on that end.

Gilles,

I can't find any problem neither with GDAL nor with libtiff code and
your file. It seems that problem is inside r.in.gdal. Try to rebuild
GRASS using the --with-gdal option.

					Regards,
					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From David.Hildebrand at gov.ab.ca  Wed Oct 22 16:44:29 2003
From: David.Hildebrand at gov.ab.ca (David.Hildebrand@gov.ab.ca)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] gdal_translate
Message-ID: <OF4E7CB99B.5EA49F85-ON87256DC7.0071DBA0@agric.gov.ab.ca>

I have been trying to use gdal_translate with an HDF MODIS file.  How do I 
specify a specific SDS from the file?  Do I specify it with the band 
parameter or as part of the filename?  In the example below I want to 
extract the first band from the "EV_1KM_RefSB" SDS and create aTIF file.

gdal_translate -ot UInt16 -b 2:1 
Z:\modis\MOD021KM.A2003169.1845.004.2003170123719.hdf test
Input file contains subdatasets. Please, select one of them for reading.

Any help would certainly be appreciated.

Till later,
-----------------------------------------------
David V. Hildebrand
Conservation and Development Branch
Alberta Agriculture, Food and Rural Development
(780) 427-3558

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20031022/94d35064/attachment.html
From dron at ak4719.spb.edu  Thu Oct 23 01:51:05 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] gdal_translate
In-Reply-To: <OF4E7CB99B.5EA49F85-ON87256DC7.0071DBA0@agric.gov.ab.ca>
References: <OF4E7CB99B.5EA49F85-ON87256DC7.0071DBA0@agric.gov.ab.ca>
Message-ID: <20031023055105.GA7687@ak4719.spb.edu>

On Wed, Oct 22, 2003 at 02:44:29PM -0600, David.Hildebrand@gov.ab.ca wrote:
> I have been trying to use gdal_translate with an HDF MODIS file.  How do I 
> specify a specific SDS from the file?  Do I specify it with the band 
> parameter or as part of the filename?  In the example below I want to 
> extract the first band from the "EV_1KM_RefSB" SDS and create aTIF file.
> 
> gdal_translate -ot UInt16 -b 2:1 
> Z:\modis\MOD021KM.A2003169.1845.004.2003170123719.hdf test
> Input file contains subdatasets. Please, select one of them for reading.

HDF files may contain several differently sized subdatasets. So you
should select one of them to proceed. First, use gdalinfo to get a list
of subdatasets with names and properties:

$ gdalinfo MOD021KM.A2001140.0715.002.2001144040827.mimic.hdf 
Driver: HDF4/Hierarchical Data Format Release 4
Size is 512, 512
Coordinate System is `'
Metadata:
  HDFEOSVersion=HDFEOS_V2.6
  LOCALGRANULEID=MOD021KM.A2001140.0715.002.2001144040827.hdf
  PRODUCTIONDATETIME=2001-05-24T04:08:27.000Z
  DAYNIGHTFLAG=Day

... skipped ...

Subdatasets:
  SUBDATASET_1_NAME=HDF4_SDS:MODIS_L1B:"MOD021KM.A2001140.0715.002.2001144040827.mimic.hdf":2
  SUBDATASET_1_DESC=[15x408x271] EV_1KM_RefSB (16-bit unsigned integer)
  SUBDATASET_2_NAME=HDF4_SDS:MODIS_L1B:"MOD021KM.A2001140.0715.002.2001144040827.mimic.hdf":3
  SUBDATASET_2_DESC=[15x408x271] EV_1KM_RefSB_Uncert_Indexes (8-bit unsigned integer)
  SUBDATASET_3_NAME=HDF4_SDS:MODIS_L1B:"MOD021KM.A2001140.0715.002.2001144040827.mimic.hdf":4
  SUBDATASET_3_DESC=[16x408x271] EV_1KM_Emissive (16-bit unsigned integer)
  SUBDATASET_4_NAME=HDF4_SDS:MODIS_L1B:"MOD021KM.A2001140.0715.002.2001144040827.mimic.hdf":5
  SUBDATASET_4_DESC=[16x408x271] EV_1KM_Emissive_Uncert_Indexes (8-bit unsigned integer)
  SUBDATASET_5_NAME=HDF4_SDS:MODIS_L1B:"MOD021KM.A2001140.0715.002.2001144040827.mimic.hdf":6
  SUBDATASET_5_DESC=[2x408x271] EV_250_Aggr1km_RefSB (16-bit unsigned integer)
  SUBDATASET_6_NAME=HDF4_SDS:MODIS_L1B:"MOD021KM.A2001140.0715.002.2001144040827.mimic.hdf":7
  SUBDATASET_6_DESC=[2x408x271] EV_250_Aggr1km_RefSB_Uncert_Indexes (8-bit unsigned integer)
  SUBDATASET_7_NAME=HDF4_SDS:MODIS_L1B:"MOD021KM.A2001140.0715.002.2001144040827.mimic.hdf":8
  SUBDATASET_7_DESC=[2x408x271] EV_250_Aggr1km_RefSB_Samples_Used (8-bit integer)
  SUBDATASET_8_NAME=HDF4_SDS:MODIS_L1B:"MOD021KM.A2001140.0715.002.2001144040827.mimic.hdf":9
  SUBDATASET_8_DESC=[5x408x271] EV_500_Aggr1km_RefSB (16-bit unsigned integer)
  SUBDATASET_9_NAME=HDF4_SDS:MODIS_L1B:"MOD021KM.A2001140.0715.002.2001144040827.mimic.hdf":10
  SUBDATASET_9_DESC=[5x408x271] EV_500_Aggr1km_RefSB_Uncert_Indexes (8-bit unsigned integer)
  SUBDATASET_10_NAME=HDF4_SDS:MODIS_L1B:"MOD021KM.A2001140.0715.002.2001144040827.mimic.hdf":11
  SUBDATASET_10_DESC=[5x408x271] EV_500_Aggr1km_RefSB_Samples_Used (8-bit integer)
  SUBDATASET_11_NAME=HDF4_SDS:MODIS_L1B:"MOD021KM.A2001140.0715.002.2001144040827.mimic.hdf":19
  SUBDATASET_11_DESC=[408x271] EV_Band26 (16-bit unsigned integer)
  SUBDATASET_12_NAME=HDF4_SDS:MODIS_L1B:"MOD021KM.A2001140.0715.002.2001144040827.mimic.hdf":20
  SUBDATASET_12_DESC=[408x271] EV_Band26_Uncert_Indexes (8-bit unsigned integer)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)

Corner coordinates are just a placeholders, don't pay attention on them.
Now you see how much GDAL supported subdatasets could be extracted from
the file and you can select the one. For example, take the first one,
described as "[15x408x271] EV_1KM_RefSB (16-bit unsigned integer)":

$ gdal_translate HDF4_SDS:MODIS_L1B:"MOD021KM.A2001140.0715.002.2001144040827.mimic.hdf":2 out.tif

Note, that resulting TIFF will have 15 bands and size 271x408.
Slightly complicated, but it is the only way to use non-interactive
tools.

					Regards,
					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From David.Hildebrand at gov.ab.ca  Thu Oct 23 11:06:55 2003
From: David.Hildebrand at gov.ab.ca (David.Hildebrand@gov.ab.ca)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] gdal_translate
Message-ID: <OFDCFF8BF4.C115D30F-ON87256DC8.005248DD@agric.gov.ab.ca>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdalinfo.log
Type: application/octet-stream
Size: 34633 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20031023/4f933242/gdalinfo.obj
From Matt.Wilkie at gov.yk.ca  Thu Oct 23 13:50:34 2003
From: Matt.Wilkie at gov.yk.ca (Matt.Wilkie)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Gdalwarp resampling
Message-ID: <6DD7370C9452D31192A10008C75D07531C28654B@RAPTOR>

Hi Frank,
On the page http://gdal.maptools.org/gdal_utilities.html at the end of the
'gdalwarp' section it says:

---------
Mosaicing into an existing output file is supported if the output file
already exists.

It currently has the following limitations:

    * Only 8 bit data is can be warped.
    * The entire source image is held in memory.
    * Only nearest neighbour resampling is available. 
---------

Do these limitations apply only to mosaicking or to all gdalwarp options
generally?

Thanks,

-matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
--------------------------------------------  


From lefsky at cnr.colostate.edu  Thu Oct 23 16:07:30 2003
From: lefsky at cnr.colostate.edu (Michael Lefsky)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Computing histograms for output files
Message-ID: <6.0.0.22.2.20031023140135.01b3e708@mail.cnr.colostate.edu>

I have been using GDAL to create erdas Imagine .img files (i.e. HFA 
format). The HFA format includes a histogram of each band as part of its 
data structure. When I open these files in Imagine, I can compute a 
histogram, and work with the files that way. However, I would like to open 
these files directly in ArcGis, and when I open these files in Arcgis 
(without previously calculating the histograms in Imagine) ArcGis crashes.

Is there a way of adding these histograms within GDAL? As an added 
complication, I am creating Float32 files (from python), not standard Int8 
files.

M

Michael Lefsky, Assistant Professor
Department of Forest, Rangeland and Watershed Stewardship
Colorado State University, Fort Collins, CO 80523
970/491-0602 970/491-6754 (FAX) lefsky@cnr.colostate.edu



From dron at ak4719.spb.edu  Thu Oct 23 16:03:12 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] gdal_translate
In-Reply-To: <OFDCFF8BF4.C115D30F-ON87256DC8.005248DD@agric.gov.ab.ca>
References: <OFDCFF8BF4.C115D30F-ON87256DC8.005248DD@agric.gov.ab.ca>
Message-ID: <20031023200312.GA5156@ak4719.spb.edu>

On Thu, Oct 23, 2003 at 09:06:55AM -0600, David.Hildebrand@gov.ab.ca wrote:
> I have done all the right things (I think) and yet I get no error message 
> to the console and no output file with the following command:
> 
> Z:\modis>X:\downloads\gdal\openev_fw\bin\gdal_translate.exe -b 1 
> HDF4_SDS:MODIS_L1B:"MOD021KM.A2003169.1845.004.2003170123719.hdf":2 
> out.tif
> 
> I am in the directory of the HDF file.  The executable is in another 
> directory.  I want to extract the first band from the MODIS file.  The 
> output from gdalinfo is attached.

Looks as all going right... I can't realize whats wrong. Try to set
environmental variable CPL_DEBUG=ON before gdal_translate. It will
enable additional debug output. And gdalinfo results on requested
subdataset (i.e.
HDF4_SDS:MODIS_L1B:"MOD021KM.A2003169.1845.004.2003170123719.hdf":2)
will be good as well.

					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From warmerdam at pobox.com  Thu Oct 23 19:18:06 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Gdalwarp resampling
In-Reply-To: <6DD7370C9452D31192A10008C75D07531C28654B@RAPTOR>
References: <6DD7370C9452D31192A10008C75D07531C28654B@RAPTOR>
Message-ID: <3F9861AE.8020800@pobox.com>

Matt.Wilkie wrote:
> Hi Frank,
> On the page http://gdal.maptools.org/gdal_utilities.html at the end of the
> 'gdalwarp' section it says:
> 
> ---------
> Mosaicing into an existing output file is supported if the output file
> already exists.
> 
> It currently has the following limitations:
> 
>     * Only 8 bit data is can be warped.
>     * The entire source image is held in memory.
>     * Only nearest neighbour resampling is available. 
> ---------
> 
> Do these limitations apply only to mosaicking or to all gdalwarp options
> generally?

Matt,

Those limitations only apply to gdalwarpsimple.  Since gdalwarp has replaced
the old warper in CVS those restrictions no longer applied.  Of course, if you
are still using 1.1.9 they do apply (for all warps with the old warper).

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From fchen at ne.rsgs.ac.cn  Fri Oct 24 07:12:12 2003
From: fchen at ne.rsgs.ac.cn (Fu Chen)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Tiff on the CD
Message-ID: <002001c39a1f$acc8a480$b76b4dc0@sss>

Hi!
I have a problem in my project. We have a lot of tiff images on CD or DVD. So I can't build overviews on they to make they be browsed more fluently in a viewer writed on GDAL. I wonder if there is a way that i can build the overviews on my hard disk. When user wanna know the information of whole image, RasterIO will find the data in harddisk. And when the user want the detail, RasterIO will turn to the CD. I think it will be much efficiently. But I know know whether it is possible to implement it by GDAL.
Any idea?


From ed at topozone.com  Fri Oct 24 08:36:42 2003
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Tiff on the CD
Message-ID: <13858AA1A74F30419F319ACB66A9D1222EA18A@mercator.topozone.com>

I think you have two choices:

If you need to have the user run the software so the data is read from
CD, your performance won't be very fast anyway and I wouldn't worry
about overviews.

If you intend to have the user install the data from CD on to a hard
disk, make the creation of overviews part of the installation process.

	- Ed


Ed McNierney
President and Chief Mapmaker
TopoZone.com
ed@topozone.com


-----Original Message-----
From: Fu Chen [mailto:fchen@ne.rsgs.ac.cn] 
Sent: Friday, October 24, 2003 7:12 AM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Tiff on the CD

Hi!
I have a problem in my project. We have a lot of tiff images on CD or
DVD. So I can't build overviews on they to make they be browsed more
fluently in a viewer writed on GDAL. I wonder if there is a way that i
can build the overviews on my hard disk. When user wanna know the
information of whole image, RasterIO will find the data in harddisk. And
when the user want the detail, RasterIO will turn to the CD. I think it
will be much efficiently. But I know know whether it is possible to
implement it by GDAL.
Any idea?

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From David.Hildebrand at gov.ab.ca  Fri Oct 24 10:08:22 2003
From: David.Hildebrand at gov.ab.ca (David.Hildebrand@gov.ab.ca)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] gdal_translate - hdf translator
Message-ID: <OFF16483B3.8996436B-ON87256DC9.004D6D56@agric.gov.ab.ca>

After I set "CPL_DEBUG=ON" my output was as follows:

HDF4Image: aiDimSizes[0]=15, aiDimSizes[1]=2030, aiDimSizes[2]=1354, 
aiDimSizes[3]=0
HDF4Image: Input dataset interpreted as MODIS_L1B


-----------------------------------------------
David V. Hildebrand
Conservation and Development Branch
Alberta Agriculture, Food and Rural Development
(780) 427-3558






Andrey Kiselev <dron@ak4719.spb.edu>
Sent by: gdal-dev-admin@remotesensing.org
10/23/2003 02:03 PM
Please respond to gdal-dev

 
        To:     gdal-dev@remotesensing.org
        cc: 
        Subject:        Re: [Gdal-dev] gdal_translate


On Thu, Oct 23, 2003 at 09:06:55AM -0600, David.Hildebrand@gov.ab.ca 
wrote:
> I have done all the right things (I think) and yet I get no error 
message 
> to the console and no output file with the following command:
> 
> Z:\modis>X:\downloads\gdal\openev_fw\bin\gdal_translate.exe -b 1 
> HDF4_SDS:MODIS_L1B:"MOD021KM.A2003169.1845.004.2003170123719.hdf":2 
> out.tif
> 
> I am in the directory of the HDF file.  The executable is in another 
> directory.  I want to extract the first band from the MODIS file.  The 
> output from gdalinfo is attached.

Looks as all going right... I can't realize whats wrong. Try to set
environmental variable CPL_DEBUG=ON before gdal_translate. It will
enable additional debug output. And gdalinfo results on requested
subdataset (i.e.
HDF4_SDS:MODIS_L1B:"MOD021KM.A2003169.1845.004.2003170123719.hdf":2)
will be good as well.

  Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20031024/66084433/attachment.html
From warmerdam at pobox.com  Fri Oct 24 11:08:56 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Computing histograms for output files
In-Reply-To: <6.0.0.22.2.20031023140135.01b3e708@mail.cnr.colostate.edu>
References: <6.0.0.22.2.20031023140135.01b3e708@mail.cnr.colostate.edu>
Message-ID: <3F994088.2000507@pobox.com>

Michael Lefsky wrote:
> I have been using GDAL to create erdas Imagine .img files (i.e. HFA 
> format). The HFA format includes a histogram of each band as part of its 
> data structure. When I open these files in Imagine, I can compute a 
> histogram, and work with the files that way. However, I would like to 
> open these files directly in ArcGis, and when I open these files in 
> Arcgis (without previously calculating the histograms in Imagine) ArcGis 
> crashes.
> 
> Is there a way of adding these histograms within GDAL? As an added 
> complication, I am creating Float32 files (from python), not standard 
> Int8 files.

Michael,

There is no current support for adding the histograms. I looked at doing it
a few weeks ago, but after testing the existing .img output in Imagine I
came to the conclusion there was no pressing need (at least for that 8bit
output).  However, your points raise the importance again.

The change would require a bunch of extra code ... a non-trivial effort and
I don't anticipate doing it in the short term unless a paying customer wants
to drive it.  But I would encourage you to file a feature request for this
change in bugzilla.

Of course, if you are interested in trying to implement this, I would be
happy to give a few pointers.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dron at ak4719.spb.edu  Fri Oct 24 16:31:18 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Computing histograms for output files
In-Reply-To: <3F994088.2000507@pobox.com>
References: <6.0.0.22.2.20031023140135.01b3e708@mail.cnr.colostate.edu> <3F994088.2000507@pobox.com>
Message-ID: <20031024203118.GA7787@ak4719.spb.edu>

On Fri, Oct 24, 2003 at 11:08:56AM -0400, Frank Warmerdam wrote:
> >I have been using GDAL to create erdas Imagine .img files (i.e. HFA 
> >format). The HFA format includes a histogram of each band as part of its 
> >data structure. When I open these files in Imagine, I can compute a 
> >histogram, and work with the files that way. However, I would like to 
> >open these files directly in ArcGis, and when I open these files in 
> >Arcgis (without previously calculating the histograms in Imagine) ArcGis 
> >crashes.
> There is no current support for adding the histograms. I looked at doing it
> a few weeks ago, but after testing the existing .img output in Imagine I
> came to the conclusion there was no pressing need (at least for that 8bit
> output).  However, your points raise the importance again.

Frank,

It may be another reason for crash. When Imagine calculates histograms
it is also rewrites HFA header structures in ``standard'' way, expected
by the ArcGis. Original headers written by the GDAL may be unsuitable
for ArcGis. I don't know how it could be solved, though.

					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Fri Oct 24 16:35:05 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] gdal_translate - hdf translator
In-Reply-To: <OFF16483B3.8996436B-ON87256DC9.004D6D56@agric.gov.ab.ca>
References: <OFF16483B3.8996436B-ON87256DC9.004D6D56@agric.gov.ab.ca>
Message-ID: <20031024203505.GB7787@ak4719.spb.edu>

On Fri, Oct 24, 2003 at 08:08:22AM -0600, David.Hildebrand@gov.ab.ca wrote:
> After I set "CPL_DEBUG=ON" my output was as follows:
> HDF4Image: aiDimSizes[0]=15, aiDimSizes[1]=2030, aiDimSizes[2]=1354, 
> aiDimSizes[3]=0
> HDF4Image: Input dataset interpreted as MODIS_L1B

Looks just fine. And what about gdalinfo results for requested
subdataset?

Also, please, say how much RAM do you have on your system?

					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From David.Hildebrand at gov.ab.ca  Fri Oct 24 16:50:49 2003
From: David.Hildebrand at gov.ab.ca (David.Hildebrand@gov.ab.ca)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] gdal_translate - hdf translator
Message-ID: <OF00D4736E.2EE4BCE4-ON87256DC9.00727E3F@agric.gov.ab.ca>

Nothing.
-----------------------------------------------
David V. Hildebrand
Conservation and Development Branch
Alberta Agriculture, Food and Rural Development
(780) 427-3558






Andrey Kiselev <dron@ak4719.spb.edu>
Sent by: gdal-dev-admin@remotesensing.org
10/24/2003 02:35 PM
Please respond to gdal-dev

 
        To:     gdal-dev@remotesensing.org
        cc: 
        Subject:        Re: [Gdal-dev] gdal_translate - hdf translator


On Fri, Oct 24, 2003 at 08:08:22AM -0600, David.Hildebrand@gov.ab.ca 
wrote:
> After I set "CPL_DEBUG=ON" my output was as follows:
> HDF4Image: aiDimSizes[0]=15, aiDimSizes[1]=2030, aiDimSizes[2]=1354, 
> aiDimSizes[3]=0
> HDF4Image: Input dataset interpreted as MODIS_L1B

Looks just fine. And what about gdalinfo results for requested
subdataset?

Also, please, say how much RAM do you have on your system?

  Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20031024/5ac58338/attachment.html
From fchen at ne.rsgs.ac.cn  Fri Oct 24 21:27:18 2003
From: fchen at ne.rsgs.ac.cn (Fu Chen)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Tiff on the CD
Message-ID: <006301c39a97$2191fa60$b76b4dc0@sss>

Hi!
If many situations, the original tiff file can't be modified(on CD or DVD or file marked with ReadOnly property), but the user still like it be zoomed out smoothly. In CD, the read speed is much slowly than harddisk, so if I take RasterIO to build a overview of whole image on screen will take a long time. If the user wanna access the data more than once, it will be better we keep a overview cache on harddisk. Next time the user insert the CD or DVD (maybe access on a automatic CD library), the software will recognize the file(by CD volume number or something else), and associate the overview cache in the harddisk with it.
If we can't sperate overviews from details in Geotiff format. If it possible to create new feature in vrt that tell where to find the overviews and where to find the detail.

Any idea?

From Rich at GreenwoodMap.com  Fri Oct 24 21:45:29 2003
From: Rich at GreenwoodMap.com (Richard Greenwood)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Tiff on the CD
In-Reply-To: <006301c39a97$2191fa60$b76b4dc0@sss>
Message-ID: <5.2.0.9.0.20031024194129.01fe26d0@mail.GreenwoodMap.com>

At 09:27 AM 10/25/2003 +0800, you wrote:

>Hi!
>If many situations, the original tiff file can't be modified(on CD or DVD 
>or file marked with ReadOnly property), but the user still like it be 
>zoomed out smoothly. In CD, the read speed is much slowly than harddisk, 
>so if I take RasterIO to build a overview of whole image on screen will 
>take a long time. If the user wanna access the data more than once, it 
>will be better we keep a overview cache on harddisk. Next time the user 
>insert the CD or DVD (maybe access on a automatic CD library), the 
>software will recognize the file(by CD volume number or something else), 
>and associate the overview cache in the harddisk with it.
>If we can't sperate overviews from details in Geotiff format. If it 
>possible to create new feature in vrt that tell where to find the 
>overviews and where to find the detail.

Are you using mapserver to serve the data? If you are then you could use 
MINSCALE and MAXSCALE to switch between layers that are on the CD and 
layers on your hard disk which have overviews. But you would really be 
better off with all your images on a hard disk.

Rich

Richard W. Greenwood, PLS
Greenwood Mapping, Inc.
Rich <at> GreenwoodMap <dot> com
(307) 733-0203
http://www.GreenwoodMap.com 
From dron at ak4719.spb.edu  Sat Oct 25 06:56:02 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] gdal_translate - hdf translator
In-Reply-To: <OF00D4736E.2EE4BCE4-ON87256DC9.00727E3F@agric.gov.ab.ca>
References: <OF00D4736E.2EE4BCE4-ON87256DC9.00727E3F@agric.gov.ab.ca>
Message-ID: <20031025105602.GA12466@ak4719.spb.edu>

On Fri, Oct 24, 2003 at 02:50:49PM -0600, David.Hildebrand@gov.ab.ca wrote:
> Nothing.

Mmm... sorry, on what of my questions did you answered? If you don't
have a memory in your system it is impossible to do something with GDAL
:-)

By the way, there may be a problem with MODIS L1B datasets. These
datasets contain enormous amount of GCP points. In fact we need more
memory for GCPs storage than for the whole image itself. In Linux it is
a good test to look, how OOM killer works (256 MB is a minimum
requirement to work with 250m files, otherwise process always will be
cancelled by the kernel. It seems something similar happens in Windows
environment, but without any diagnostic messages). From other hand
direct using of GCPs with this datasets is quit useless, because
non-trivial preprocessing needed to obtain geometrically corrected well
georeferenced image. So I have disabled GCP extraction in the driver for
now and you may try to check out latest CVS tree or wait for a daily
snapshot.

> 
> 
> On Fri, Oct 24, 2003 at 08:08:22AM -0600, David.Hildebrand@gov.ab.ca 
> wrote:
> > After I set "CPL_DEBUG=ON" my output was as follows:
> > HDF4Image: aiDimSizes[0]=15, aiDimSizes[1]=2030, aiDimSizes[2]=1354, 
> > aiDimSizes[3]=0
> > HDF4Image: Input dataset interpreted as MODIS_L1B
> 
> Looks just fine. And what about gdalinfo results for requested
> subdataset?
> 
> Also, please, say how much RAM do you have on your system?

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From fchen at ne.rsgs.ac.cn  Sat Oct 25 21:15:21 2003
From: fchen at ne.rsgs.ac.cn (Fu Chen)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] about VRTDataset
Message-ID: <001101c39b5e$a0781040$b76b4dc0@sss>

Hi!
I read the code of gdal_translate, which take vrt as a temp dataset. I wanna write something like that. So I write a simple test program. But this doesn't work :<

void main()
{
    GDALAllRegister();
    VRTDataset *poVDS;
    poVDS = new VRTDataset( 100, 100);
 GDALDumpOpenDatasets( stderr );
 delete poVDS;
}

the program crashed at GDALDumpOpenDatasets.

I use VC7 VC6 on win2k platform. and my GDAL is gdalcvs-031015.zip.
Anyone know what's up?


From horst.wessel at moskito-gis.de  Sat Oct 25 17:19:11 2003
From: horst.wessel at moskito-gis.de (Horst Wessel)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] very small bug
Message-ID: <000801c39b3d$a37dd930$847ba8c0@asterix>

Hello,

there is a very small bug in makefile.vc (toplevel), that makes Watcom C break. 

ogr_dir: port_dir

cd frmts/iso8211

$(MAKE) /f makefile.vc

cd ..\sdts <---- TAB-Char here

$(MAKE) /f makefile.vc

cd ..\..\ogr

this Character makes Watcom nmake not to find the Path.

mit freundlichen Gr??en / best regards

Horst Wessel

------------------------------------------------------------
Moskito GIS GmbH
Mengeder Str. 623
44359 Dortmund

Tel: 0231-933 4120
email: horst.wessel@moskito-gis.de
home: www.moskito-gis.de
------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20031025/bdd1a64f/attachment.html
From warmerdam at pobox.com  Sun Oct 26 12:32:01 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] very small bug
In-Reply-To: <000801c39b3d$a37dd930$847ba8c0@asterix>
References: <000801c39b3d$a37dd930$847ba8c0@asterix>
Message-ID: <3F9C0511.8030102@pobox.com>

Horst Wessel wrote:
> Hello,
>  
> there is a very small bug in makefile.vc (toplevel), that makes Watcom C 
> break.
>  
> *
> 
> ogr_dir: port_dir
> 
> cd frmts/iso8211
> 
> $(MAKE) /f makefile.vc
> 
> cd ..\sdts <---- TAB-Char here
> 
> $(MAKE) /f makefile.vc
> 
> cd ..\..\ogr
> 
> *
> this Character makes Watcom nmake not to find the Path.

Horst,

Fixed in CVS.

Thanks,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Sun Oct 26 13:16:22 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] about VRTDataset
In-Reply-To: <001101c39b5e$a0781040$b76b4dc0@sss>
References: <001101c39b5e$a0781040$b76b4dc0@sss>
Message-ID: <3F9C0F76.20607@pobox.com>

Fu Chen wrote:
> Hi!
> I read the code of gdal_translate, which take vrt as a temp dataset. I wanna write something like that. So I write a simple test program. But this doesn't work :<
> 
> void main()
> {
>     GDALAllRegister();
>     VRTDataset *poVDS;
>     poVDS = new VRTDataset( 100, 100);
>  GDALDumpOpenDatasets( stderr );
>  delete poVDS;
> }
> 
> the program crashed at GDALDumpOpenDatasets.
> 
> I use VC7 VC6 on win2k platform. and my GDAL is gdalcvs-031015.zip.
> Anyone know what's up?

Fu Chen,

I tried this on Linux and had no problem. I even ran it through valgrind
and had no issues.   I would encourage you to debug the problem at your end.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From paul at toolscenter.org  Sun Oct 26 20:28:38 2003
From: paul at toolscenter.org (Paul Selormey)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] OGRAxisOrientation and OGRDatumType
Message-ID: <000701c39c29$abc73fe0$700201c0@MAPQUEST.local>

Hello All,
These two OPenGIS enumerations types are defined
in the GDAL header file for spatial reference but I could
not find anywhere in the codes where they are being used.

Are these really being used?

Best regards,
Paul.


From warmerdam at pobox.com  Mon Oct 27 00:12:36 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] OGRAxisOrientation and OGRDatumType
In-Reply-To: <000701c39c29$abc73fe0$700201c0@MAPQUEST.local>
References: <000701c39c29$abc73fe0$700201c0@MAPQUEST.local>
Message-ID: <3F9CA944.1000501@pobox.com>

Paul Selormey wrote:
> Hello All,
> These two OPenGIS enumerations types are defined
> in the GDAL header file for spatial reference but I could
> not find anywhere in the codes where they are being used.
> 
> Are these really being used?

Paul,

They were put into the include file while copying from the
spec (perhaps while I was working on XML support) have not been, and may
never be used.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From fchen at ne.rsgs.ac.cn  Mon Oct 27 01:35:02 2003
From: fchen at ne.rsgs.ac.cn (Fu Chen)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] IRasterIO in Dataset
Message-ID: <007401c39c54$73edb510$b76b4dc0@sss>

Hi!
I recently use my image browser to look a large image composited of some small rgb ecw file. I find if i access the data band by band, it will be slow by decompress 3 times. Implementing a method which can get 3 bands once a time will enhance the efficience. 
And i find gdaldataset already has a IRasterIO prototype, which i didn't see in former version.

Now i add IRasterIO in ECWDataset and VRTDataset.

CPLErr ECWDataset::IRasterIO( GDALRWFlag eRWFlag,
                               int nXOff, int nYOff, int nXSize, int nYSize,
                               void * pData, int nBufXSize, int nBufYSize,
                               GDALDataType eBufType, 
                               int nBandCount, int *panBandMap,
                               int nPixelSpace, int nLineSpace, int nBandSpace)
    
{
    int iBandIndex; 
    CPLErr eErr = CE_None;
    if (nBandCount == 3 && nBandSpace == 1)
    {
     UINT32 bands[3];
     bands[0] = panBandMap[0]-1;
     bands[1] = panBandMap[1]-1;
     bands[2] = panBandMap[2]-1;
     
        NCSError     eNCSErr;
        eNCSErr = NCScbmSetFileView( hFileView, 
                                 3, bands,
                                 nXOff, nYOff, 
                                 nXOff + nXSize - 1, 
                                 nYOff + nYSize - 1,
                                 nBufXSize, nBufYSize );
    
        if( eNCSErr != NCS_SUCCESS )
        {
            CPLError( CE_Failure, CPLE_AppDefined, 
                  "%s", NCSGetErrorText(eNCSErr) );
        
            return CE_Failure;
        }
        for( int iScanline = 0; iScanline < nBufYSize; iScanline++ )
        {
     unsigned char *p = (unsigned char *)pData + nLineSpace * iScanline;
            NCScbmReadViewLineBGR(hFileView, p);
 }
    }
    else 
        GDALDataset::IRasterIO( eRWFlag, nXOff, nYOff, nXSize, nYSize,
                               pData, nBufXSize, nBufYSize,
                               eBufType, 
                               nBandCount, panBandMap,
                               nPixelSpace, nLineSpace, nBandSpace);
    return eErr;
}

//=============================================

CPLErr VRTDataset::IRasterIO( GDALRWFlag eRWFlag,
        int nXOff, int nYOff, int nXSize, int nYSize,
        void * pData, int nBufXSize, int nBufYSize,
        GDALDataType eBufType, 
        int nBandCount, int *panBandMap,
        int nPixelSpace, int nLineSpace, int nBandSpace)

{

 CPLErr eErr = CE_None;

 if (bMosaic && nBandCount == 3)
 {
  VRTRasterBand* band = (VRTRasterBand*) papoBands[0];
  CPLDebug("VRTDataset::IRasterIO", "totally %d", band->nSources);
  for (int i = 0; i < band->nSources; i++)
  {
   VRTSimpleSource * source = (VRTSimpleSource *)(band->papoSources[i]);

   // The window we will actually request from the source raster band.
   int nReqXOff, nReqYOff, nReqXSize, nReqYSize;
   // The window we will actual set _within_ the pData buffer.
   int nOutXOff, nOutYOff, nOutXSize, nOutYSize;

   if( source->GetSrcDstWindow( nXOff, nYOff, nXSize, nYSize,
    nBufXSize, nBufYSize, 
    &nReqXOff, &nReqYOff, &nReqXSize, &nReqYSize,
    &nOutXOff, &nOutYOff, &nOutXSize, &nOutYSize ) )
   {
    CPLDebug("VRTDataset::IRasterIO", "access %d", i);
    source->poRasterBand->GetDataset()->RasterIO(
     eRWFlag, 
     nReqXOff, nReqYOff, nReqXSize, nReqYSize,
     ((unsigned char *) pData) 
     + nOutXOff * nPixelSpace
     + nOutYOff * nLineSpace, 
     nOutXSize, nOutYSize, 
     eBufType, 
     nBandCount, panBandMap,
     nPixelSpace, nLineSpace, nBandSpace);
   }
  }
 }
 else 
  GDALDataset::IRasterIO( eRWFlag, nXOff, nYOff, nXSize, nYSize,
  pData, nBufXSize, nBufYSize,
  eBufType, 
  nBandCount, panBandMap,
  nPixelSpace, nLineSpace, nBandSpace);
 return eErr;
}

I add a attribute "mosaic" in the element of VRTDataset in vrt file. if mosaic is set to 1, it will permit Dataset IRasterIO bypass VRTRasterBand.
for example
<VRTDataset rasterXSize="43200" rasterYSize="21600" mosaic="1">

With this change, my program run much quickly :)
I hope this code will benefit other people. But I am not familiar about CVS , so I post here.
Frank, would you like to envaluate my code and merge them in the CVS?

From fchen at ne.rsgs.ac.cn  Mon Oct 27 01:40:58 2003
From: fchen at ne.rsgs.ac.cn (Fu Chen)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] How to open gtopo30?
Message-ID: <008201c39c55$47cdf8e0$b76b4dc0@sss>

Hi!
I download gtopo30, but GDAL can't recognize it. In document, it said gtopo30 will recognize by EHdr -- ESRI .hdr Labelled. is it right?

2003-10-27  14:04       <DIR>          .
2003-10-27  14:04       <DIR>          ..
1997-01-22  06:30                   28 E020N40.STX
1997-01-22  06:30                  222 E020N40.DMW
1997-01-23  02:00              189,599 E020N40.GIF
1997-01-23  06:29                  326 E020N40.HDR
1997-01-22  06:30                  648 E020N40.PRJ
1997-01-23  06:29                  325 E020N40.SCH
1997-01-22  06:22           28,800,000 E020N40.SRC
1997-01-22  06:30           57,600,000 E020N40.DEM

D:\gdal>apps\gdalinfo e:\dem\e020n40.dem
ERROR 4: `e:\dem\e020n40.dem' not recognised as a supported file format.

GDALOpen failed - 4
`e:\dem\e020n40.dem' not recognised as a supported file format.

and i changed the extension name to "bil", but still failed.

D:\gdal>apps\gdalinfo e:\dem\e020n40.BIL
ERROR 4: `e:\dem\e020n40.BIL' not recognised as a supported file format.

GDALOpen failed - 4
`e:\dem\e020n40.BIL' not recognised as a supported file format.

Any idea, pal?



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20031027/1b21e4e3/attachment.html
From fchen at ne.rsgs.ac.cn  Mon Oct 27 02:25:04 2003
From: fchen at ne.rsgs.ac.cn (Fu Chen)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] about VRTDataset
References: <001101c39b5e$a0781040$b76b4dc0@sss> <3F9C0F76.20607@pobox.com>
Message-ID: <009001c39c5b$710229b0$b76b4dc0@sss>

Frank,

I also find it very weird. I compile gdal and my test program on two PC has the same result. 
The gdal is cleaned by "nmake /f makefile.vc clean", and rebuild several times. But still has trouble.
even this code won't work

#include "cpl_vsi.h"
#include "cpl_conv.h"
#include "cpl_string.h"
#include "gdal_priv.h"
#include "ogr_spatialref.h"
#include "vrt/vrtdataset.h"

void main()
{
    //GDALAllRegister();
    VRTDataset *poVDS;
    poVDS = new VRTDataset( 100, 100);
 //GDALDumpOpenDatasets( stderr );
 delete poVDS;
}

The Debug said
HEAP[translate.exe]: Invalid Address specified to RtlFreeHeap( 12b0000, 12c3a28 )
at the end of delete statement.

I really don't know what's wrong. Maybe a bug in vc compiler :<


----- Original Message ----- 
From: "Frank Warmerdam" <warmerdam@pobox.com>
To: <gdal-dev@remotesensing.org>
Sent: Monday, October 27, 2003 2:16 AM
Subject: Re: [Gdal-dev] about VRTDataset


> Fu Chen wrote:
> > Hi!
> > I read the code of gdal_translate, which take vrt as a temp dataset. I wanna write something like that. So I write a simple test program. But this doesn't work :<
> > 
> > void main()
> > {
> >     GDALAllRegister();
> >     VRTDataset *poVDS;
> >     poVDS = new VRTDataset( 100, 100);
> >  GDALDumpOpenDatasets( stderr );
> >  delete poVDS;
> > }
> > 
> > the program crashed at GDALDumpOpenDatasets.
> > 
> > I use VC7 VC6 on win2k platform. and my GDAL is gdalcvs-031015.zip.
> > Anyone know what's up?
> 
> Fu Chen,
> 
> I tried this on Linux and had no problem. I even ran it through valgrind
> and had no issues.   I would encourage you to debug the problem at your end.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Mon Oct 27 08:04:23 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] about VRTDataset
In-Reply-To: <009001c39c5b$710229b0$b76b4dc0@sss>
References: <001101c39b5e$a0781040$b76b4dc0@sss> <3F9C0F76.20607@pobox.com> <009001c39c5b$710229b0$b76b4dc0@sss>
Message-ID: <3F9D17D7.7080905@pobox.com>

Fu Chen wrote:

> Frank,
> 
> I also find it very weird. I compile gdal and my test program on two PC has the same result. 
> The gdal is cleaned by "nmake /f makefile.vc clean", and rebuild several times. But still has trouble.
> even this code won't work
> 
> #include "cpl_vsi.h"
> #include "cpl_conv.h"
> #include "cpl_string.h"
> #include "gdal_priv.h"
> #include "ogr_spatialref.h"
> #include "vrt/vrtdataset.h"
> 
> void main()
> {
>     //GDALAllRegister();
>     VRTDataset *poVDS;
>     poVDS = new VRTDataset( 100, 100);
>  //GDALDumpOpenDatasets( stderr );
>  delete poVDS;
> }
> 
> The Debug said
> HEAP[translate.exe]: Invalid Address specified to RtlFreeHeap( 12b0000, 12c3a28 )
> at the end of delete statement.
> 
> I really don't know what's wrong. Maybe a bug in vc compiler :<

Fu Chen,

OK, I see the problem is related to having multiple memory allocation heaps.
It seems that the new is done out of the gdal11.dll heap but the delete is
assuming that the memory should be freed into your mainline heap.

The gdal_translate.cpp code does "GDALClose((GDALDatasetH) poVDS)" to close
the virtual dataset.  Similarly there are seperate sets of file handles for
stuff like stdout and stderr between your mainline and gdal11.dll, so the
dump open datasets fails when you pass in a mainline "stderr".

You can build gdal11.dll and your mainline with the C runtime library using
the /MD commandline switch and then this problem will go away.  Or be careful
about it in your code (which can be hard).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Mon Oct 27 08:09:48 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] How to open gtopo30?
In-Reply-To: <008201c39c55$47cdf8e0$b76b4dc0@sss>
References: <008201c39c55$47cdf8e0$b76b4dc0@sss>
Message-ID: <3F9D191C.7090008@pobox.com>

Fu Chen wrote:

> Hi!
> I download gtopo30, but GDAL can't recognize it. In document, it said 
> gtopo30 will recognize by EHdr -- ESRI .hdr Labelled. is it right?
>  
> 2003-10-27  14:04       <DIR>          .
> 2003-10-27  14:04       <DIR>          ..
> 1997-01-22  06:30                   28 E020N40.STX
> 1997-01-22  06:30                  222 E020N40.DMW
> 1997-01-23  02:00              189,599 E020N40.GIF
> 1997-01-23  06:29                  326 E020N40.HDR
> 1997-01-22  06:30                  648 E020N40.PRJ
> 1997-01-23  06:29                  325 E020N40.SCH
> 1997-01-22  06:22           28,800,000 E020N40.SRC
> 1997-01-22  06:30           57,600,000 E020N40.DEM
...
> Any idea, pal?

Fu Chen,

My only thought on this is that it could be a case sensitivity problem
(the driver would look for E020N40.hdr) but that shouldn't matter if
you are doing this on windows.  Try putting a break point in
EHdrDataset::Open() and stepping through to see why it fails.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Mon Oct 27 08:14:34 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] IRasterIO in Dataset
In-Reply-To: <007401c39c54$73edb510$b76b4dc0@sss>
References: <007401c39c54$73edb510$b76b4dc0@sss>
Message-ID: <3F9D1A3A.9090307@pobox.com>

Fu Chen wrote:

> Hi!
> I recently use my image browser to look a large image composited of some small rgb ecw file. I find if i access the data band by band, it will be slow by decompress 3 times. Implementing a method which can get 3 bands once a time will enhance the efficience. 
> And i find gdaldataset already has a IRasterIO prototype, which i didn't see in former version.
> 
> Now i add IRasterIO in ECWDataset and VRTDataset.
...
> I add a attribute "mosaic" in the element of VRTDataset in vrt file. if mosaic is set to 1, it will permit Dataset IRasterIO bypass VRTRasterBand.
> for example
> <VRTDataset rasterXSize="43200" rasterYSize="21600" mosaic="1">
> 
> With this change, my program run much quickly :)
> I hope this code will benefit other people. But I am not familiar about CVS , so I post here.
> Frank, would you like to envaluate my code and merge them in the CVS?

Fu Chen,

The changes in each case don't seem quite safe for general use, and will
require some work to apply back to the master.  However, you have certainly
deduced the intended purpose of the dataset level IO.  The benefit comes
as custom methods are implemented in the drivers to take advantage of
one pass input/output for multiple bands (where appropriate).  Currently
only a very few drivers are taking advantage of this.

Actually, I will look at doing the ECW patch this morning.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From paul at toolscenter.org  Mon Oct 27 09:38:00 2003
From: paul at toolscenter.org (Paul Selormey)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] OGRAxisOrientation and OGRDatumType
References: <000701c39c29$abc73fe0$700201c0@MAPQUEST.local> <3F9CA944.1000501@pobox.com>
Message-ID: <002a01c39c97$edb0fd60$700201c0@MAPQUEST.local>

Thanks for the information, Frank.

Best regards,
Paul.

----- Original Message ----- 
From: "Frank Warmerdam" <warmerdam@pobox.com>
To: <gdal-dev@remotesensing.org>
Sent: Monday, October 27, 2003 2:12 PM
Subject: Re: [Gdal-dev] OGRAxisOrientation and OGRDatumType


> Paul Selormey wrote:
> > Hello All,
> > These two OPenGIS enumerations types are defined
> > in the GDAL header file for spatial reference but I could
> > not find anywhere in the codes where they are being used.
> >
> > Are these really being used?
>
> Paul,
>
> They were put into the include file while copying from the
> spec (perhaps while I was working on XML support) have not been, and may
> never be used.
>
> Best regards,
>
> -- 
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


From YuzuAA at loveboat.cx  Mon Oct 27 09:55:49 2003
From: YuzuAA at loveboat.cx (Jun Wada)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] gdalwarp UTM->TM
Message-ID: <ANEDLKLAMFAEPDKPFBHJIEOECAAA.YuzuAA@loveboat.cx>

Hello:
I have one problem about gdalwarp "UTM->TM".
Please let me know.
I tried to "UTM->TM" by using gdalwarp.
It made a TM-Image file and I checked it by using gdalinfo.
"Corner Coordinate"is OK but "DATUM" is "unknown" and also "SPHEROID" is
"unnamed".
I don't know why ?
When I executed the gdalwarp, I specified Tokyo in "DATUM" and bessel in
"SPHEROID" but...

UTM Image Specification:
C:\Temp\Gdal\gdal119\gdal-1.1.9\apps>gdalinfo po_utm54_0-2.tif
Driver: GTiff/GeoTIFF
Size is 6033, 6120
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",141],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32654"]]
Origin = (392317.935490,3784982.868520)
Pixel Size = (1.000000,-1.000000)
Metadata:
  TIFFTAG_SOFTWARE=ERDAS IMAGINE
Corner Coordinates:
Upper Left  (  392317.935, 3784982.869) (139d49'52.43"E, 34d12'1.09"N)
Lower Left  (  392317.935, 3778862.869) (139d49'55.17"E, 34d 8'42.43"N)
Upper Right (  398350.935, 3784982.869) (139d53'48.13"E, 34d12'3.27"N)
Lower Right (  398350.935, 3778862.869) (139d53'50.71"E, 34d 8'44.61"N)
Center      (  395334.435, 3781922.869) (139d51'51.61"E, 34d10'22.87"N)
Band 1 Block=6033x8 Type=Byte, ColorInterp=Red
Band 2 Block=6033x8 Type=Byte, ColorInterp=Green
Band 3 Block=6033x8 Type=Byte, ColorInterp=Blue

gdalwarp command:
gdalwarptest -et 1.0 -rc -order 3 -t_srs "+proj=tmerc +zone=9 +ellps=bessel
+towgs84=-147.54,507.26,680.47,0,0,0 +k=0.9999 +units=m +to_meter=1.0
+lat_0=36
+lon_0=139.833333333 +datum=Tokyo" po_utm54_0-2.tif trans01.tif

C:\Temp\Gdal\gdal119\gdal-1.1.9\apps>gdalinfo trans01.tif
Driver: GTiff/GeoTIFF
Size is 6103, 6189
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["unnamed",
        DATUM["unknown",
            SPHEROID["unnamed",6377397.155,299.1528128000009]],
        PRIMEM["Greenwich",0],
        UNIT[,0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",36],
    PARAMETER["central_meridian",139.833333333],
    PARAMETER["scale_factor",0.9999],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (98.686063,-199929.911644)
Pixel Size = (1.000169,-1.000169)
Corner Coordinates:
Upper Left  (      98.686, -199929.912) (139d50'3.86"E, 34d11'51.09"N)
Lower Left  (      98.686, -206119.960) (139d50'3.85"E, 34d 8'30.15"N)
Upper Right (    6202.720, -199929.912) (139d54'2.32"E, 34d11'51.02"N)
Lower Right (    6202.720, -206119.960) (139d54'2.16"E, 34d 8'30.08"N)
Center      (    3150.703, -203024.936) (139d52'3.05"E, 34d10'10.60"N)
Band 1 Block=6103x1 Type=Byte, ColorInterp=Red
Band 2 Block=6103x1 Type=Byte, ColorInterp=Green
Band 3 Block=6103x1 Type=Byte, ColorInterp=Blue

Best regards,



From warmerdam at pobox.com  Mon Oct 27 09:05:04 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] IRasterIO in Dataset
In-Reply-To: <007401c39c54$73edb510$b76b4dc0@sss>
References: <007401c39c54$73edb510$b76b4dc0@sss>
Message-ID: <3F9D2610.3010902@pobox.com>

Fu Chen,

I have completed implementation of a "safe" IRasterIO() for ECWDataset
and checked it in.  This slightly more than doubles the speed of reading
large 3 band files with a single dataset level rasterio.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


/************************************************************************/
/*                             IRasterIO()                              */
/************************************************************************/

CPLErr ECWDataset::IRasterIO( GDALRWFlag eRWFlag,
                              int nXOff, int nYOff, int nXSize, int nYSize,
                              void * pData, int nBufXSize, int nBufYSize,
                              GDALDataType eBufType,
                              int nBandCount, int *panBandMap,
                              int nPixelSpace, int nLineSpace, int nBandSpace)

{
/* -------------------------------------------------------------------- */
/*      If we are supersampling we need to fall into the general        */
/*      purpose logic.  We also use the general logic if we are in      */
/*      some cases unlikely to benefit from interleaved access.         */
/*                                                                      */
/*      The one case we would like to handle better here is the         */
/*      nBufYSize == 1 case (requesting a scanline at a time).  We      */
/*      should eventually have some logic similiar to the band by       */
/*      band case where we post a big window for the view, and allow    */
/*      sequential reads.                                               */
/* -------------------------------------------------------------------- */
    if( nXSize < nBufXSize || nYSize < nBufYSize || nYSize == 1
        || nBandCount > 100 || nBandCount == 1 || nBufYSize == 1 )
    {
        return
            GDALDataset::IRasterIO( eRWFlag, nXOff, nYOff, nXSize, nYSize,
                                    pData, nBufXSize, nBufYSize,
                                    eBufType,
                                    nBandCount, panBandMap,
                                    nPixelSpace, nLineSpace, nBandSpace);
    }

    CPLDebug( "ECWDataset",
              "RasterIO(%d,%d,%d,%d -> %dx%d) - doing interleaved read.",
              nXOff, nYOff, nXSize, nYSize, nBufXSize, nBufYSize );

/* -------------------------------------------------------------------- */
/*      Setup view.                                                     */
/* -------------------------------------------------------------------- */
    UINT32 anBandIndices[100];
    int    i;
    NCSError     eNCSErr;

    for( i = 0; i < nBandCount; i++ )
        anBandIndices[i] = panBandMap[i] - 1;

    eNCSErr = NCScbmSetFileView( hFileView,
                                 nBandCount, anBandIndices,
                                 nXOff, nYOff,
                                 nXOff + nXSize - 1,
                                 nYOff + nYSize - 1,
                                 nBufXSize, nBufYSize );

    if( eNCSErr != NCS_SUCCESS )
    {
        CPLError( CE_Failure, CPLE_AppDefined,
                  "%s", NCSGetErrorText(eNCSErr) );

        return CE_Failure;
    }

/* -------------------------------------------------------------------- */
/*      Setup working scanline, and the pointers into it.               */
/* -------------------------------------------------------------------- */
    GByte *pabyBILScanline = (GByte *) CPLMalloc(nBufXSize * nBandCount);
    GByte **papabyBIL = (GByte **) CPLMalloc(nBandCount * sizeof(void*));

    for( i = 0; i < nBandCount; i++ )
        papabyBIL[i] = pabyBILScanline + i * nBufXSize;

/* -------------------------------------------------------------------- */
/*      Read back all the data for the requested view.                  */
/* -------------------------------------------------------------------- */
    for( int iScanline = 0; iScanline < nBufYSize; iScanline++ )
    {
        NCSEcwReadStatus  eRStatus;
        int  iX;

        eRStatus = NCScbmReadViewLineBIL( hFileView, papabyBIL );
        if( eRStatus != NCSECW_READ_OK )
        {
            CPLFree( pabyBILScanline );
            CPLError( CE_Failure, CPLE_AppDefined,
                      "NCScbmReadViewLineBIL failed." );
            return CE_Failure;
        }


        for( i = 0; i < nBandCount; i++ )
        {
            GByte *pabyThisLine = ((GByte *)pData) + nLineSpace * iScanline +
nBandSpace * i;

            for( iX = 0; iX < nBufXSize; iX++ )
                pabyThisLine[iX * nPixelSpace] =
                    pabyBILScanline[i * nBufXSize + iX];
        }
    }

    CPLFree( papabyBIL );
    CPLFree( pabyBILScanline );

    return CE_None;
}



From warmerdam at pobox.com  Mon Oct 27 09:10:22 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] gdalwarp UTM->TM
In-Reply-To: <ANEDLKLAMFAEPDKPFBHJIEOECAAA.YuzuAA@loveboat.cx>
References: <ANEDLKLAMFAEPDKPFBHJIEOECAAA.YuzuAA@loveboat.cx>
Message-ID: <3F9D274E.5020303@pobox.com>

Jun Wada wrote:

> Hello:
> I have one problem about gdalwarp "UTM->TM".
> Please let me know.
> I tried to "UTM->TM" by using gdalwarp.
> It made a TM-Image file and I checked it by using gdalinfo.
> "Corner Coordinate"is OK but "DATUM" is "unknown" and also "SPHEROID" is
> "unnamed".
> I don't know why ?
> When I executed the gdalwarp, I specified Tokyo in "DATUM" and bessel in
> "SPHEROID" but...
...
> gdalwarp command:
> gdalwarptest -et 1.0 -rc -order 3 -t_srs "+proj=tmerc +zone=9 +ellps=bessel
> +towgs84=-147.54,507.26,680.47,0,0,0 +k=0.9999 +units=m +to_meter=1.0
> +lat_0=36
> +lon_0=139.833333333 +datum=Tokyo" po_utm54_0-2.tif trans01.tif

Jun Wada,

There is no such datum predefined to PROJ.4 as "+datum=Tokyo", so this
presumably had no effect.  At the very least, the level of code that
would be responsible for parsing things for writing the TIFF file wouldn't
know the Tokyo datum even if you had hacked it into PROJ.

However, I see the output file did have the right parameters for the
Bessel ellipsoid even though it wasn't recognised by name.  So the image
results should be OK even if the GeoTIFF metadata is a bit dodgy.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From RJoslyn at etg-sadi.com  Mon Oct 27 13:10:28 2003
From: RJoslyn at etg-sadi.com (Ray Joslyn)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] gdalwarp output
Message-ID: <03840E69AF517249A23EE5EEF21BBEF21604EA@etginc.etg.local>

Hello,

Is it possible to get gdalwarp to output only a specific channel or band
(similar to the -b parameter of gdal_translate) of a jp2 image?

Thanks

Ray

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20031027/24fdc072/attachment.html
From warmerdam at pobox.com  Mon Oct 27 12:26:40 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] gdalwarp output
In-Reply-To: <03840E69AF517249A23EE5EEF21BBEF21604EA@etginc.etg.local>
References: <03840E69AF517249A23EE5EEF21BBEF21604EA@etginc.etg.local>
Message-ID: <3F9D5550.5070501@pobox.com>

Ray Joslyn wrote:

> Hello,
> 
> Is it possible to get gdalwarp to output only a specific channel or band 
> (similar to the ?b parameter of gdal_translate) of a jp2 image?

Ray,

Not as things stand.  Rather then wedging a huge amount of complexity into
gdalwarp I would strongly encourage you to use gdal_translate to cut out the
band(s) you want before running gdalwarp.  If you need a customized processing
pipeline you could always write your own modified utility using the warping
API.  Looking at gdalwarp would be a good start.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From RJoslyn at etg-sadi.com  Mon Oct 27 13:42:48 2003
From: RJoslyn at etg-sadi.com (Ray Joslyn)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] gdalwarp output
Message-ID: <03840E69AF517249A23EE5EEF21BBEF21604EB@etginc.etg.local>

Frank,
I could do that however the problem I run into then is that I'm left
having to extract the image at full resolution (since no pixel down
sampling is available in gdal_translate, correct?) which can be quite
memory intensive since gdal_translate also does not have a memory usage
switch to set the amount of memory for caching.
Ray


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Monday, October 27, 2003 11:27 AM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] gdalwarp output

Ray Joslyn wrote:

> Hello,
> 
> Is it possible to get gdalwarp to output only a specific channel or
band 
> (similar to the -b parameter of gdal_translate) of a jp2 image?

Ray,

Not as things stand.  Rather then wedging a huge amount of complexity
into
gdalwarp I would strongly encourage you to use gdal_translate to cut out
the
band(s) you want before running gdalwarp.  If you need a customized
processing
pipeline you could always write your own modified utility using the
warping
API.  Looking at gdalwarp would be a good start.

Best regards,

-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From Matt.Wilkie at gov.yk.ca  Tue Oct 28 11:52:43 2003
From: Matt.Wilkie at gov.yk.ca (Matt.Wilkie)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] gdalwarp output
Message-ID: <6DD7370C9452D31192A10008C75D07531C3F2DAF@RAPTOR>

> (since no pixel down sampling is available in gdal_translate, 
> correct?) which can be quite memory intensive since 

Happily incorrect :)

" -outsize xsize[%] ysize[%]: Set the size of the output file. Outsize is in
pixels and lines unless '%' is attached in which case it is as a fraction of
the input image size."

http://gdal.maptools.org/gdal_utilities.html

Cheers,

-matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
--------------------------------------------  



From gillian.walter at atlantis-scientific.com  Tue Oct 28 11:56:34 2003
From: gillian.walter at atlantis-scientific.com (Gillian Walter)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] gdalwarp output
In-Reply-To: <03840E69AF517249A23EE5EEF21BBEF21604EB@etginc.etg.local>
References: <03840E69AF517249A23EE5EEF21BBEF21604EB@etginc.etg.local>
Message-ID: <3F9E9FC2.4040401@atlantis-scientific.com>

Hi,

Could you use VRT as an intermediate format?  This is an xml text format 
that stores references to data bands rather than copying/extracting them 
(metadata is stored in the text file though).

gdal_translate -of VRT -b 1 input.tif input.vrt

If you use input.vrt as the input to gdalwarp, maybe that would avoid 
the extraction?

- Gillian

Ray Joslyn wrote:

>Frank,
>I could do that however the problem I run into then is that I'm left
>having to extract the image at full resolution (since no pixel down
>sampling is available in gdal_translate, correct?) which can be quite
>memory intensive since gdal_translate also does not have a memory usage
>switch to set the amount of memory for caching.
>Ray
>
>
>-----Original Message-----
>From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
>Sent: Monday, October 27, 2003 11:27 AM
>To: gdal-dev@remotesensing.org
>Subject: Re: [Gdal-dev] gdalwarp output
>
>Ray Joslyn wrote:
>
>  
>
>>Hello,
>>
>>Is it possible to get gdalwarp to output only a specific channel or
>>    
>>
>band 
>  
>
>>(similar to the -b parameter of gdal_translate) of a jp2 image?
>>    
>>
>
>Ray,
>
>Not as things stand.  Rather then wedging a huge amount of complexity
>into
>gdalwarp I would strongly encourage you to use gdal_translate to cut out
>the
>band(s) you want before running gdalwarp.  If you need a customized
>processing
>pipeline you could always write your own modified utility using the
>warping
>API.  Looking at gdalwarp would be a good start.
>
>Best regards,
>
>  
>



From RJoslyn at etg-sadi.com  Tue Oct 28 13:15:32 2003
From: RJoslyn at etg-sadi.com (Ray Joslyn)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] gdalwarp resampling
Message-ID: <03840E69AF517249A23EE5EEF21BBEF21604EF@etginc.etg.local>

Hello,

Regarding gdalwarp and the -rn, -rb, -rc switches.  I do not see any
difference in the output images when using these different resampling
methods.  Is there something else required here to get the resampling to
work?

Thanks

Ray

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20031028/6b989d96/attachment.html
From warmerdam at pobox.com  Tue Oct 28 14:41:27 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] gdalwarp resampling
In-Reply-To: <03840E69AF517249A23EE5EEF21BBEF21604EF@etginc.etg.local>
References: <03840E69AF517249A23EE5EEF21BBEF21604EF@etginc.etg.local>
Message-ID: <3F9EC667.2070403@pobox.com>

Ray Joslyn wrote:
> Hello,
> 
> Regarding gdalwarp and the ?rn, -rb, -rc switches.  I do not see any 
> difference in the output images when using these different resampling 
> methods.  Is there something else required here to get the resampling to 
> work?

Ray,

Are you actually doing any change in image geometry?  A gdalwarp to a file
with exactly the same size and geometry *should* result in no image change.
Also, be sure you have the gdalwarp version that supports these switches.
Do they show up in the usage message?

Other than that they should be subtly different in normal usage.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From RJoslyn at etg-sadi.com  Tue Oct 28 15:19:14 2003
From: RJoslyn at etg-sadi.com (Ray Joslyn)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] gdalwarp resampling
Message-ID: <03840E69AF517249A23EE5EEF21BBEF21604F0@etginc.etg.local>

Frank,
No, I'm not actually warping the image.  What I was after was a way of
resampling the pixel size up while taking advantage of the interpolation
methods.  
Ray





-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Tuesday, October 28, 2003 1:41 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] gdalwarp resampling

Ray Joslyn wrote:
> Hello,
> 
> Regarding gdalwarp and the -rn, -rb, -rc switches.  I do not see any 
> difference in the output images when using these different resampling 
> methods.  Is there something else required here to get the resampling
to 
> work?

Ray,

Are you actually doing any change in image geometry?  A gdalwarp to a
file
with exactly the same size and geometry *should* result in no image
change.
Also, be sure you have the gdalwarp version that supports these
switches.
Do they show up in the usage message?

Other than that they should be subtly different in normal usage.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Tue Oct 28 15:26:08 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] gdalwarp resampling
In-Reply-To: <03840E69AF517249A23EE5EEF21BBEF21604F0@etginc.etg.local>
References: <03840E69AF517249A23EE5EEF21BBEF21604F0@etginc.etg.local>
Message-ID: <3F9ED0E0.4060806@pobox.com>

Ray Joslyn wrote:
> Frank,
> No, I'm not actually warping the image.  What I was after was a way of
> resampling the pixel size up while taking advantage of the interpolation
> methods.  
> Ray

Ray,

OK, well it should work for this case.  I guess you are using the -ts switch
to set a larger size for the output image?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From RJoslyn at etg-sadi.com  Tue Oct 28 15:46:32 2003
From: RJoslyn at etg-sadi.com (Ray Joslyn)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] gdalwarp resampling
Message-ID: <03840E69AF517249A23EE5EEF21BBEF21604F1@etginc.etg.local>

Frank,
Actually I was using the -tr option to set the output pixel size larger
than my source.  The resample options do show up in the usage message so
I am using a version that supports the resampling. However, as before
there doesn't seem to be any difference in the output with the different
resampling options.

Ray 




-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Tuesday, October 28, 2003 2:26 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] gdalwarp resampling

Ray Joslyn wrote:
> Frank,
> No, I'm not actually warping the image.  What I was after was a way of
> resampling the pixel size up while taking advantage of the
interpolation
> methods.  
> Ray

Ray,

OK, well it should work for this case.  I guess you are using the -ts
switch
to set a larger size for the output image?

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From dron at ak4719.spb.edu  Tue Oct 28 16:03:07 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] gdalwarp resampling
In-Reply-To: <03840E69AF517249A23EE5EEF21BBEF21604F1@etginc.etg.local>
References: <03840E69AF517249A23EE5EEF21BBEF21604F1@etginc.etg.local>
Message-ID: <20031028210307.GC10593@ak4719.spb.edu>

On Tue, Oct 28, 2003 at 02:46:32PM -0600, Ray Joslyn wrote:
> Actually I was using the -tr option to set the output pixel size
> larger than my source.  The resample options do show up in the usage
> message so I am using a version that supports the resampling. However,
> as before there doesn't seem to be any difference in the output with
> the different resampling options.

Sorry for stupid question, but did you checked differences by the eyes
only, or you have used special tools, such as tiffcmp?

					Regards,
					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From RJoslyn at etg-sadi.com  Tue Oct 28 16:31:40 2003
From: RJoslyn at etg-sadi.com (Ray Joslyn)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] gdalwarp resampling
Message-ID: <03840E69AF517249A23EE5EEF21BBEF21568B0@etginc.etg.local>

Andrey,
I didn't check it with tiffcmp, but I did resample the original with
photoshop using bilinear interpolation and compare it to the gdalwarp
-rb image and it looks a lot different.
Ray




-----Original Message-----
From: Andrey Kiselev [mailto:dron@ak4719.spb.edu] 
Sent: Tuesday, October 28, 2003 3:03 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] gdalwarp resampling

On Tue, Oct 28, 2003 at 02:46:32PM -0600, Ray Joslyn wrote:
> Actually I was using the -tr option to set the output pixel size
> larger than my source.  The resample options do show up in the usage
> message so I am using a version that supports the resampling. However,
> as before there doesn't seem to be any difference in the output with
> the different resampling options.

Sorry for stupid question, but did you checked differences by the eyes
only, or you have used special tools, such as tiffcmp?

					Regards,
					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From fchen at ne.rsgs.ac.cn  Mon Oct 27 20:03:41 2003
From: fchen at ne.rsgs.ac.cn (Fu Chen)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] about VRTDataset
References: <001101c39b5e$a0781040$b76b4dc0@sss> <3F9C0F76.20607@pobox.com> <009001c39c5b$710229b0$b76b4dc0@sss> <3F9D17D7.7080905@pobox.com>
Message-ID: <003f01c39cef$545c5580$b76b4dc0@sss>

Frank,

Yeah, it is the trouble of different generate mode. This is the first time I face this problem in my life. Does Microsoft have any idea to bypass this trap? I formerly believe using dll would cooperate between different generate mode. Now it is a mistake. I hope you can note this in the document of GDAL. Somebody using VC will face the same problem, I think.

BTW, do you know how to debug the gdal11.dll in VC IDE? Up to now, I use CPLDebug to do my work. It seems waste the ability of IDE. But I really don't know how to debug a dll outside of workspace built by command line nmake.
Thank!!

----- Original Message ----- 
From: "Frank Warmerdam" <warmerdam@pobox.com>
To: <gdal-dev@remotesensing.org>
Sent: Monday, October 27, 2003 9:04 PM
Subject: Re: [Gdal-dev] about VRTDataset


> Fu Chen wrote:
> 
> > Frank,
> > 
> > I also find it very weird. I compile gdal and my test program on two PC has the same result. 
> > The gdal is cleaned by "nmake /f makefile.vc clean", and rebuild several times. But still has trouble.
> > even this code won't work
> > 
> > #include "cpl_vsi.h"
> > #include "cpl_conv.h"
> > #include "cpl_string.h"
> > #include "gdal_priv.h"
> > #include "ogr_spatialref.h"
> > #include "vrt/vrtdataset.h"
> > 
> > void main()
> > {
> >     //GDALAllRegister();
> >     VRTDataset *poVDS;
> >     poVDS = new VRTDataset( 100, 100);
> >  //GDALDumpOpenDatasets( stderr );
> >  delete poVDS;
> > }
> > 
> > The Debug said
> > HEAP[translate.exe]: Invalid Address specified to RtlFreeHeap( 12b0000, 12c3a28 )
> > at the end of delete statement.
> > 
> > I really don't know what's wrong. Maybe a bug in vc compiler :<
> 
> Fu Chen,
> 
> OK, I see the problem is related to having multiple memory allocation heaps.
> It seems that the new is done out of the gdal11.dll heap but the delete is
> assuming that the memory should be freed into your mainline heap.
> 
> The gdal_translate.cpp code does "GDALClose((GDALDatasetH) poVDS)" to close
> the virtual dataset.  Similarly there are seperate sets of file handles for
> stuff like stdout and stderr between your mainline and gdal11.dll, so the
> dump open datasets fails when you pass in a mainline "stderr".
> 
> You can build gdal11.dll and your mainline with the C runtime library using
> the /MD commandline switch and then this problem will go away.  Or be careful
> about it in your code (which can be hard).
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev

From wly3000 at hotmail.com  Tue Oct 28 22:51:52 2003
From: wly3000 at hotmail.com (Jeff)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] how to use gdal in c++ builder
Message-ID: <Sea1-DAV34UDbi5REE800008b76@hotmail.com>

 Hi,everyone;

   I have been using gdal in Visual C++ 6.0.It's quite powerful in dealing 

with virous kind of image data formats.But recently I have to use C++ builder

with a new program.Is there anyone kown how to use it in C++ Builder 6 ?I have

tried several times.Everytime I got failed.Who can give me some detail guidance?

   Thanks in advance.

   Best regards,




                                              jeff

                                            2003.10.29
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20031029/e2da1559/attachment.html
From fulton at cmu.edu  Tue Oct 28 23:16:12 2003
From: fulton at cmu.edu (Sean Fulton)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] Patching after configure
Message-ID: <A134586E-09C6-11D8-B414-003065D5F140@cmu.edu>

Hello,

Am I correct in assuming the patches in 'patchfiles' are applied before 
configure is run? Is there a way to patch after configure is run?

I'm trying to do a portfile for GDAL 
(http://www.remotesensing.org/gdal/). The info I can find for building 
it on OS X requires modifying the GDALmake.opt file which is generated 
from the configure script.

The patch changes "LD_SHARED	=	gcc -dynamiclib" to "LD_SHARED	=	g++ 
-dynamiclib"

I don't actually know all that much about the build process so if 
anyone has a suggestion of another fix, I'd love to hear it.

Thanks.

	Sean


From dron at ak4719.spb.edu  Wed Oct 29 01:11:15 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] gdalwarp resampling
In-Reply-To: <03840E69AF517249A23EE5EEF21BBEF21568B0@etginc.etg.local>
References: <03840E69AF517249A23EE5EEF21BBEF21568B0@etginc.etg.local>
Message-ID: <20031029061115.GA4682@ak4719.spb.edu>

On Tue, Oct 28, 2003 at 03:31:40PM -0600, Ray Joslyn wrote:
> I didn't check it with tiffcmp, but I did resample the original with
> photoshop using bilinear interpolation and compare it to the gdalwarp
> -rb image and it looks a lot different.

It is strange... But waht about -rcs option? It should give
significantly different results in case of upsampling.


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From alessandro_amici at telespazio.it  Wed Oct 29 04:43:53 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:58 2007
Subject: R: [Gdal-dev] Patching after configure
Message-ID: <7171FE1C83A6AE4DA93B809995886807877E85@ROMADG-MAIL01>

Sean,

> Am I correct in assuming the patches in 'patchfiles' are applied before 
> configure is run? Is there a way to patch after configure is run?

? never heard about a 'patchfiles', so i cannot help here...

> I'm trying to do a portfile for GDAL 
> (http://www.remotesensing.org/gdal/). The info I can find for building 
> it on OS X requires modifying the GDALmake.opt file which is generated 
> from the configure script.
> 
> The patch changes "LD_SHARED	=	gcc -dynamiclib"
> to "LD_SHARED	=	g++ -dynamiclib"
> 
> I don't actually know all that much about the build process so if 
> anyone has a suggestion of another fix, I'd love to hear it.

... however, the current cvs snapshot should support OSX out-of-the-box
(except the python module possibly) and the next stable release should not
be that far in time by now.

if you absolutely need to use gdal 1.1.9 something similar to:
http://www.remotesensing.org/cgi-bin/cvsweb.cgi/osrs/gdal/aclocal.m4.diff?r1
=1.38&r2=1.39&f=u
can be applied before configure, but than you need to run autoconf as well.

BTW, i did most of the porting work that is into gdal cvs now, if you
encounter any bug or have additional feature requests feel free to
send it to the list, and i'll see what i can do. MacOSX is definetly a
porting target taht i'd like to support.

cheers
alessadnro

From fulton at cmu.edu  Wed Oct 29 10:12:43 2003
From: fulton at cmu.edu (Sean Fulton)
Date: Wed Nov 21 11:48:58 2007
Subject: I: [Gdal-dev] Patching after configure
In-Reply-To: <7171FE1C83A6AE4DA93B809995886807877E89@ROMADG-MAIL01>
Message-ID: <5815E4A6-0A22-11D8-BFC4-003065D5F140@cmu.edu>

Alessandro,

Ooops. I meant to send this to the DarwinPorts list. But it's good to  
know the next version won't require a patch.  Is there an ETA for the  
next version? I might just wait.

Thanks.

	Sean

p.s. FYI, DarwinPorts is the Apple version of the BSD ports system.  
It's similar to  Fink.


On Wednesday, October 29, 2003, at 04:44  AM, Amici Alessandro wrote:

>
> just in case you were not subscibed to gdal-dev.
>
> -----Messaggio originale-----
> Da: Amici Alessandro
> Inviato: mercoled? 29 ottobre 2003 10.42
> A: 'gdal-dev@remotesensing.org'
> Oggetto: R: [Gdal-dev] Patching after configure
>
>
>
> Sean,
>
>> Am I correct in assuming the patches in 'patchfiles' are applied  
>> before
>> configure is run? Is there a way to patch after configure is run?
>
> ? never heard about a 'patchfiles', so i cannot help here...
>
>> I'm trying to do a portfile for GDAL
>> (http://www.remotesensing.org/gdal/). The info I can find for building
>> it on OS X requires modifying the GDALmake.opt file which is generated
>> from the configure script.
>>
>> The patch changes "LD_SHARED	=	gcc -dynamiclib"
>> to "LD_SHARED	=	g++ -dynamiclib"
>>
>> I don't actually know all that much about the build process so if
>> anyone has a suggestion of another fix, I'd love to hear it.
>
> ... however, the current cvs snapshot should support OSX out-of-the-box
> (except the python module possibly) and the next stable release should  
> not
> be that far in time by now.
>
> if you absolutely need to use gdal 1.1.9 something similar to:
> http://www.remotesensing.org/cgi-bin/cvsweb.cgi/osrs/gdal/ 
> aclocal.m4.diff?r1
> =1.38&r2=1.39&f=u
> can be applied before configure, but than you need to run autoconf as  
> well.
>
> BTW, i did most of the porting work that is into gdal cvs now, if you
> encounter any bug or have additional feature requests feel free to
> send it to the list, and i'll see what i can do. MacOSX is definetly a
> porting target taht i'd like to support.
>
> cheers
> alessadnro
>


From fchen at ne.rsgs.ac.cn  Wed Oct 29 21:18:50 2003
From: fchen at ne.rsgs.ac.cn (Fu Chen)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] gdalwarp doesn't work on lcc
Message-ID: <010801c39e8c$28492c40$b76b4dc0@NovaTheGreat>

Hi!
GdalWarp doesn't work when i try to convert a image into lcc project.

the source image is
=====================================================
D:\gdal>apps\gdalinfo e:n-51-45-1n.tif
GDAL: GDALOpen(e:n-51-45-1n.tif) succeeds as GTiff.

Driver: GTiff/GeoTIFF
Size is 657, 20101
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",123],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32651"]]
Origin = (213536.250000,5543948.250000)
Pixel Size = (28.500000,-28.500000)
Corner Coordinates:
Upper Left  (  213536.250, 5543948.250) (119d 0'14.54"E, 49d58'44.30"N)
Lower Left  (  213536.250, 4971069.750) (119d22'32.70"E, 44d50'7.82"N)
Upper Right (  232260.750, 5543948.250) (119d15'52.64"E, 49d59'15.60"N)
Lower Right (  232260.750, 4971069.750) (119d36'43.99"E, 44d50'33.99"N)
Center      (  222898.500, 5257509.000) (119d19'35.77"E, 47d24'43.68"N)
Band 1 Block=657x12 Type=Byte, ColorInterp=Red
Band 2 Block=657x12 Type=Byte, ColorInterp=Green
Band 3 Block=657x12 Type=Byte, ColorInterp=Blue
GDAL: GDALClose(e:n-51-45-1n.tif)

GDAL: GDALDeregister_GTiff() called.
=================================================

And I try the command
=================================================
D:\gdal>apps\gdalwarp -t_srs "+proj=lcc +lon_0=110 +lat_0=10 +lat_1=25 +lat_2=47
 +datum=WGS84" e:n-51-45-1n.tif e:warped.tif
GDAL: GDALOpen(e:n-51-45-1n.tif) succeeds as GTiff.

GDAL: GDALOpen(e:warped.tif) succeeds as GTiff.

GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=0,0,0x0 Dst=0,0,657x20101
:0...10...20...30...40...50...60...70...80...90...100 - done.
GDAL: Potential thrashing on band 1 of e:warped.tif.
GDAL: GDALClose(e:warped.tif)

GDAL: 1677 block reads on 1676 block band 1 of e:warped.tif.
GDAL: GDALClose(e:n-51-45-1n.tif)

GDAL: GDALDeregister_GTiff() called.
=================================================

But what i get is just the same image as source one in size and in content. 
=================================================
D:\gdal>apps\gdalinfo e:warped.tif
GDAL: GDALOpen(e:warped.tif) succeeds as GTiff.

Driver: GTiff/GeoTIFF
Size is 657, 20101
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["unnamed",
        DATUM["unknown",
            SPHEROID["unnamed",6378245,298.2999999999985]],
        PRIMEM["Greenwich",0],
        UNIT[,0.0174532925199433]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",25],
    PARAMETER["standard_parallel_2",47],
    PARAMETER["latitude_of_origin",10],
    PARAMETER["central_meridian",110],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (213536.250000,5543948.250000)
Pixel Size = (28.500000,-28.500000)
Corner Coordinates:
Upper Left  (  213536.250, 5543948.250) (113d28'21.90"E, 59d15'54.10"N)
Lower Left  (  213536.250, 4971069.750) (113d10'5.28"E, 54d24'2.61"N)
Upper Right (  232260.750, 5543948.250) (113d46'37.09"E, 59d15'33.10"N)
Lower Right (  232260.750, 4971069.750) (113d26'44.57"E, 54d23'42.69"N)
Center      (  222898.500, 5257509.000) (113d27'31.00"E, 56d51'13.71"N)
Band 1 Block=657x12 Type=Byte, ColorInterp=Red
Band 2 Block=657x12 Type=Byte, ColorInterp=Green
Band 3 Block=657x12 Type=Byte, ColorInterp=Blue
GDAL: GDALClose(e:warped.tif)

GDAL: GDALDeregister_GTiff() called.
==================================================
D:\gdal>apps\gdalinfo e:warped.tif
GDAL: GDALOpen(e:warped.tif) succeeds as GTiff.

Driver: GTiff/GeoTIFF
Size is 657, 20101
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["unnamed",
        DATUM["unknown",
            SPHEROID["unnamed",6378245,298.2999999999985]],
        PRIMEM["Greenwich",0],
        UNIT[,0.0174532925199433]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",25],
    PARAMETER["standard_parallel_2",47],
    PARAMETER["latitude_of_origin",10],
    PARAMETER["central_meridian",110],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (213536.250000,5543948.250000)
Pixel Size = (28.500000,-28.500000)
Corner Coordinates:
Upper Left  (  213536.250, 5543948.250) (113d28'21.90"E, 59d15'54.10"N)
Lower Left  (  213536.250, 4971069.750) (113d10'5.28"E, 54d24'2.61"N)
Upper Right (  232260.750, 5543948.250) (113d46'37.09"E, 59d15'33.10"N)
Lower Right (  232260.750, 4971069.750) (113d26'44.57"E, 54d23'42.69"N)
Center      (  222898.500, 5257509.000) (113d27'31.00"E, 56d51'13.71"N)
Band 1 Block=657x12 Type=Byte, ColorInterp=Red
Band 2 Block=657x12 Type=Byte, ColorInterp=Green
Band 3 Block=657x12 Type=Byte, ColorInterp=Blue
GDAL: GDALClose(e:warped.tif)

GDAL: GDALDeregister_GTiff() called.
=================================================

I can use gdalwarp to turn it into utm's other zone, and can see the diferent in size and image content.
I don't know why lcc doesn't work. 
Do I miss something?


Best regards

Fu CHEN

From fchen at ne.rsgs.ac.cn  Wed Oct 29 22:05:20 2003
From: fchen at ne.rsgs.ac.cn (Fu Chen)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] IRasterIO in Dataset
References: <007401c39c54$73edb510$b76b4dc0@sss> <3F9D2610.3010902@pobox.com>
Message-ID: <015c01c39e92$a81ca810$b76b4dc0@NovaTheGreat>

Frank,
Yeah, this code is more safe. Thanks.
But I find the ecw supersample is very slow indeed when my little browser to set the zoom ratio more than 1:1. Is there any reason? 

----- Original Message ----- 
From: "Frank Warmerdam" <warmerdam@pobox.com>
To: <gdal-dev@remotesensing.org>
Sent: Monday, October 27, 2003 10:05 PM
Subject: Re: [Gdal-dev] IRasterIO in Dataset


> 
> Fu Chen,
> 
> I have completed implementation of a "safe" IRasterIO() for ECWDataset
> and checked it in.  This slightly more than doubles the speed of reading
> large 3 band files with a single dataset level rasterio.
> 
> Best regards,
> 
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> 
> /************************************************************************/
> /*                             IRasterIO()                              */
> /************************************************************************/
> 
> CPLErr ECWDataset::IRasterIO( GDALRWFlag eRWFlag,
>                               int nXOff, int nYOff, int nXSize, int nYSize,
>                               void * pData, int nBufXSize, int nBufYSize,
>                               GDALDataType eBufType,
>                               int nBandCount, int *panBandMap,
>                               int nPixelSpace, int nLineSpace, int nBandSpace)
> 
> {
> /* -------------------------------------------------------------------- */
> /*      If we are supersampling we need to fall into the general        */
> /*      purpose logic.  We also use the general logic if we are in      */
> /*      some cases unlikely to benefit from interleaved access.         */
> /*                                                                      */
> /*      The one case we would like to handle better here is the         */
> /*      nBufYSize == 1 case (requesting a scanline at a time).  We      */
> /*      should eventually have some logic similiar to the band by       */
> /*      band case where we post a big window for the view, and allow    */
> /*      sequential reads.                                               */
> /* -------------------------------------------------------------------- */
>     if( nXSize < nBufXSize || nYSize < nBufYSize || nYSize == 1
>         || nBandCount > 100 || nBandCount == 1 || nBufYSize == 1 )
>     {
>         return
>             GDALDataset::IRasterIO( eRWFlag, nXOff, nYOff, nXSize, nYSize,
>                                     pData, nBufXSize, nBufYSize,
>                                     eBufType,
>                                     nBandCount, panBandMap,
>                                     nPixelSpace, nLineSpace, nBandSpace);
>     }
> 
>     CPLDebug( "ECWDataset",
>               "RasterIO(%d,%d,%d,%d -> %dx%d) - doing interleaved read.",
>               nXOff, nYOff, nXSize, nYSize, nBufXSize, nBufYSize );
> 
> /* -------------------------------------------------------------------- */
> /*      Setup view.                                                     */
> /* -------------------------------------------------------------------- */
>     UINT32 anBandIndices[100];
>     int    i;
>     NCSError     eNCSErr;
> 
>     for( i = 0; i < nBandCount; i++ )
>         anBandIndices[i] = panBandMap[i] - 1;
> 
>     eNCSErr = NCScbmSetFileView( hFileView,
>                                  nBandCount, anBandIndices,
>                                  nXOff, nYOff,
>                                  nXOff + nXSize - 1,
>                                  nYOff + nYSize - 1,
>                                  nBufXSize, nBufYSize );
> 
>     if( eNCSErr != NCS_SUCCESS )
>     {
>         CPLError( CE_Failure, CPLE_AppDefined,
>                   "%s", NCSGetErrorText(eNCSErr) );
> 
>         return CE_Failure;
>     }
> 
> /* -------------------------------------------------------------------- */
> /*      Setup working scanline, and the pointers into it.               */
> /* -------------------------------------------------------------------- */
>     GByte *pabyBILScanline = (GByte *) CPLMalloc(nBufXSize * nBandCount);
>     GByte **papabyBIL = (GByte **) CPLMalloc(nBandCount * sizeof(void*));
> 
>     for( i = 0; i < nBandCount; i++ )
>         papabyBIL[i] = pabyBILScanline + i * nBufXSize;
> 
> /* -------------------------------------------------------------------- */
> /*      Read back all the data for the requested view.                  */
> /* -------------------------------------------------------------------- */
>     for( int iScanline = 0; iScanline < nBufYSize; iScanline++ )
>     {
>         NCSEcwReadStatus  eRStatus;
>         int  iX;
> 
>         eRStatus = NCScbmReadViewLineBIL( hFileView, papabyBIL );
>         if( eRStatus != NCSECW_READ_OK )
>         {
>             CPLFree( pabyBILScanline );
>             CPLError( CE_Failure, CPLE_AppDefined,
>                       "NCScbmReadViewLineBIL failed." );
>             return CE_Failure;
>         }
> 
> 
>         for( i = 0; i < nBandCount; i++ )
>         {
>             GByte *pabyThisLine = ((GByte *)pData) + nLineSpace * iScanline +
> nBandSpace * i;
> 
>             for( iX = 0; iX < nBufXSize; iX++ )
>                 pabyThisLine[iX * nPixelSpace] =
>                     pabyBILScanline[i * nBufXSize + iX];
>         }
>     }
> 
>     CPLFree( papabyBIL );
>     CPLFree( pabyBILScanline );
> 
>     return CE_None;
> }
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Thu Oct 30 00:00:22 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] IRasterIO in Dataset
In-Reply-To: <015c01c39e92$a81ca810$b76b4dc0@NovaTheGreat>
References: <007401c39c54$73edb510$b76b4dc0@sss> <3F9D2610.3010902@pobox.com> <015c01c39e92$a81ca810$b76b4dc0@NovaTheGreat>
Message-ID: <3FA09AE6.1030303@pobox.com>

Fu Chen wrote:
> Frank,
> Yeah, this code is more safe. Thanks.
> But I find the ecw supersample is very slow indeed when my little browser 
 > to set the zoom ratio more than 1:1. Is there any reason?

Fu Chen,

For some reason the ECW libraries won't do supersampling.  I could try and
implement it directly within the ECW driver but that is lots of work, so
to be safe (and lazy) I force things through generic level code reading
full scanlines from the ECW driver when supersampling.

The result is terribly expensive in IO.

It could be fixed, but would be a fair touch of work to do properly.

Later,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From fchen at ne.rsgs.ac.cn  Fri Oct 31 03:30:26 2003
From: fchen at ne.rsgs.ac.cn (Chen, Fu)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] Guess the pixels and rows of raw image
References: <007401c39c54$73edb510$b76b4dc0@sss> <3F9D2610.3010902@pobox.com> <015c01c39e92$a81ca810$b76b4dc0@NovaTheGreat>
Message-ID: <001501c39f89$3c237b00$896b4dc0@nova>

Hi!
In Gdal, every raw image should has a header to describe its pixels and rows. But in photoshop, it will guess the pixels and rows automaticly. I think it decide the size by the relation of nearby rows. Is there any resource or code on the web that we can add a guess feature in the gdal?
In some situations we don't have a standard header for raw image, if we have a gdal tool it will generate a bil header automaticly,  we needn't to write new raw format driver.

Best regards!



From warmerdam at pobox.com  Fri Oct 31 10:13:12 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] Guess the pixels and rows of raw image
In-Reply-To: <001501c39f89$3c237b00$896b4dc0@nova>
References: <007401c39c54$73edb510$b76b4dc0@sss> <3F9D2610.3010902@pobox.com> <015c01c39e92$a81ca810$b76b4dc0@NovaTheGreat> <001501c39f89$3c237b00$896b4dc0@nova>
Message-ID: <3FA27C08.3030509@pobox.com>

Chen, Fu wrote:
> Hi! In Gdal, every raw image should has a header to describe its pixels and rows. But in photoshop, it will guess the
> pixels and rows automaticly. I think it decide the size by the relation of nearby rows. Is there any resource or code
> on the web that we can add a guess feature in the gdal? In some situations we don't have a standard header for raw
> image, if we have a gdal tool it will generate a bil header automaticly,  we needn't to write new raw format driver.

Fu Chen,

While I believe there is going to be a dialog developed for OpenEV which
allows a user to describe the format of a raw file, I was not aware of any
dependable way to "guess" the layout of raw files.  If it is easily done it
would be good to incorporate into that tool.

I wouldn't want to have GDALOpen() try to guess raw file layout on it's own
though.  To dangerous.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Fri Oct 31 10:17:11 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] about VRTDataset
In-Reply-To: <003f01c39cef$545c5580$b76b4dc0@sss>
References: <001101c39b5e$a0781040$b76b4dc0@sss> <3F9C0F76.20607@pobox.com> <009001c39c5b$710229b0$b76b4dc0@sss> <3F9D17D7.7080905@pobox.com> <003f01c39cef$545c5580$b76b4dc0@sss>
Message-ID: <3FA27CF7.5000409@pobox.com>

Fu Chen wrote:
> Frank,
> 
> Yeah, it is the trouble of different generate mode. This is the first time I face this problem in my life. Does
> Microsoft have any idea to bypass this trap? I formerly believe using dll would cooperate between different generate
> mode. Now it is a mistake. I hope you can note this in the document of GDAL. Somebody using VC will face the same
> problem, I think.

Fu Chen,

Well, by default I think Visual Studio now builds applications with the runtime
library, avoiding this issue.  In the NMAKE files I still default to not using
the C runtime library but it can be easily enough controlled once you are aware
of the issues.

I will add a note in the "building GDAL for windows" document to address this
issue.

> BTW, do you know how to debug the gdal11.dll in VC IDE? Up to now, I use CPLDebug to do my work. It seems waste the
> ability of IDE. But I really don't know how to debug a dll outside of workspace built by command line nmake. Thank!!

As long as gdal11.dll was built with debugging turned on, and a .pdb file
produced you should be able to debug right into GDAL.  I do that all the time.
Of course, there may be issues with relation Visual Studio finding the .pdb
file.  If you copy gdal11.dll somewhere else to use in your project, I
would suggest copying gdal11.pdb to the same location.

While I to have used printf/CPLDebug style debugging in many environments, it
is an immense help to be able to debug in a proper interactive environment.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Fri Oct 31 10:32:31 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] gdalwarp doesn't work on lcc
In-Reply-To: <010801c39e8c$28492c40$b76b4dc0@NovaTheGreat>
References: <010801c39e8c$28492c40$b76b4dc0@NovaTheGreat>
Message-ID: <3FA2808F.8080101@pobox.com>

Fu Chen wrote:
> Hi!
> GdalWarp doesn't work when i try to convert a image into lcc project.


Fu Chen,

I made a quick effort to reproduce this problem and things seemed to work
ok for me. I created a file intended to be similar to your source file in
coordinate system at least:

warmerda@gdal2200[17]% gdalinfo chen.tif
Driver: GTiff/GeoTIFF
Size is 512, 512
Coordinate System is:
PROJCS["WGS 84 / UTM zone 51N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235629972,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",123],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32651"]]
Origin = (440720.000000,3751320.000000)
Pixel Size = (60.000000,-60.000000)
Corner Coordinates:
Upper Left  (  440720.000, 3751320.000) (122d21'31.79"E, 33d54'2.17"N)
Lower Left  (  440720.000, 3720600.000) (122d21'39.20"E, 33d37'24.77"N)
Upper Right (  471440.000, 3751320.000) (122d41'27.92"E, 33d54'6.78"N)
Lower Right (  471440.000, 3720600.000) (122d41'31.50"E, 33d37'29.33"N)
Center      (  456080.000, 3735960.000) (122d31'32.60"E, 33d45'46.17"N)
Band 1 Block=512x16 Type=Byte, ColorInterp=Gray

Then ran:

 gdalwarp -t_srs "+proj=lcc +lon_0=110 +lat_0=10 +lat_1=25 +lat_2=47 +datum=WGS84" chen.tif warped.tif

Producing:

warmerda@gdal2200[18]% gdalinfo warped.tif
Driver: GTiff/GeoTIFF
Size is 576, 576
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235629972,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",25],
    PARAMETER["standard_parallel_2",47],
    PARAMETER["latitude_of_origin",10],
    PARAMETER["central_meridian",110],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (1120036.822687,2770670.127441)
Pixel Size = (58.977562,-58.977562)
Corner Coordinates:
Upper Left  ( 1120036.823, 2770670.127) (122d21'52.12"E, 33d56'14.27"N)
Lower Left  ( 1120036.823, 2736699.052) (122d19'1.37"E, 33d37'41.24"N)
Upper Right ( 1154007.898, 2770670.127) (122d44'6.91"E, 33d53'49.28"N)
Lower Right ( 1154007.898, 2736699.052) (122d41'11.15"E, 33d35'16.83"N)
Center      ( 1137022.361, 2753684.590) (122d31'32.89"E, 33d45'45.92"N)
Band 1 Block=576x14 Type=Byte, ColorInterp=Gray

One interesting thing in your case was that the output file did *not* seem
to have WGS84 as the GEOGCS/DATUM/ELLIPSOID.  That suggests there was some
sort of problem parsing the LCC projection definition properly but I didn't
seem to run into that.

Any chance the output file warped.tif already existed?  I remember some
discussion of that as an issue in recent days, but I didn't dig into it
at the time.

If the problem persists for you, I would appreciate your:

 o Verifying the problem with the latest GDAL from CVS.
 o Submitting a bug report in bugzilla including a small input
   file I can use.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From jluis at ualg.pt  Fri Oct 31 11:28:37 2003
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] Guess the pixels and rows of raw image
References: <007401c39c54$73edb510$b76b4dc0@sss> <3F9D2610.3010902@pobox.com> <015c01c39e92$a81ca810$b76b4dc0@NovaTheGreat> <001501c39f89$3c237b00$896b4dc0@nova> <3FA27C08.3030509@pobox.com>
Message-ID: <3FA28DB5.DE0CA73E@ualg.pt>


Frank Warmerdam wrote:

> Chen, Fu wrote:
> > Hi! In Gdal, every raw image should has a header to describe its pixels and rows. But in photoshop, it will guess the
> > pixels and rows automaticly. I think it decide the size by the relation of nearby rows. Is there any resource or code
> > on the web that we can add a guess feature in the gdal? In some situations we don't have a standard header for raw
> > image, if we have a gdal tool it will generate a bil header automaticly,  we needn't to write new raw format driver.
>
> Fu Chen,
>
> While I believe there is going to be a dialog developed for OpenEV which
> allows a user to describe the format of a raw file, I was not aware of any
> dependable way to "guess" the layout of raw files.  If it is easily done it
> would be good to incorporate into that tool.
>
> I wouldn't want to have GDALOpen() try to guess raw file layout on it's own
> though.  To dangerous.
>

Hi,
About a year ago I started a discussion in the GMT mailing list with exactly the same question.
Unfortunately no one new the clever photoshop algorithm.
I ended up with a solution based on FFTs, but:
1 - it's potentially slow
2 - it doesn't always guess the correct answer (though it does for many of times).

J. Luis


From byronea at u.washington.edu  Fri Oct 31 12:37:45 2003
From: byronea at u.washington.edu (Byron Amerson)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] compile issues...
Message-ID: <Pine.A41.4.58.0310310929490.12836@dante06.u.washington.edu>

Hello I am a new user (not yet really...). I would like to build gdal on
my mac running osx 10.3.  I will be using it in my build of grass5.

However I am having difficulty in the first phase of my build - the gdal
compile is not seeing my postgresql scripts...??

see error message:

checking for PostgreSQL... no
configure: error: --with-pg argument is a directory, but it should be the
path to the pg_config script

yet my build of postgres works, and indeed pg_config is in the directory I
specify (/usr/local/pgsql/bin).

any insight would be helpful.

also the --with-grass option is curious to me in that I specify the grass
lib, yet grass is not installed yet as I want gdal installed for the grass
build -  are there some circular dependancies here?

Byron Amerson
MS student
University of Washington
Department of Earth and Space Sciences

From warmerdam at pobox.com  Fri Oct 31 12:51:30 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:58 2007
Subject: [Gdal-dev] compile issues...
In-Reply-To: <Pine.A41.4.58.0310310929490.12836@dante06.u.washington.edu>
References: <Pine.A41.4.58.0310310929490.12836@dante06.u.washington.edu>
Message-ID: <3FA2A122.1090605@pobox.com>

Byron Amerson wrote:
> Hello I am a new user (not yet really...). I would like to build gdal on
> my mac running osx 10.3.  I will be using it in my build of grass5.
> 
> However I am having difficulty in the first phase of my build - the gdal
> compile is not seeing my postgresql scripts...??
> 
> see error message:
> 
> checking for PostgreSQL... no
> configure: error: --with-pg argument is a directory, but it should be the
> path to the pg_config script
> 
> yet my build of postgres works, and indeed pg_config is in the directory I
> specify (/usr/local/pgsql/bin).
> 
> any insight would be helpful.

Byron,

You need --with-pg=/usr/local/pgsql/bin/pg_config.  The path to the
script, including the name itself.

> also the --with-grass option is curious to me in that I specify the grass
> lib, yet grass is not installed yet as I want gdal installed for the grass
> build -  are there some circular dependancies here?

This is if you want to build libgrass into GDAL, so GDAL applications can
read grass datasets directly.  You should *not* do this if you want to
use the GDAL .so with GRASS, as it may screw up r.in.gdal to have libgrass,
and GRASS'es own libgis linked in at the same time.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



