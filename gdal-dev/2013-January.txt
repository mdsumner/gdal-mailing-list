From martin.martinjensen at gmail.com  Tue Jan  1 12:45:10 2013
From: martin.martinjensen at gmail.com (Martin Jensen)
Date: Tue, 1 Jan 2013 21:45:10 +0100
Subject: [gdal-dev] VirtualOGR with Sqlite
Message-ID: <CAApmPxffh5SgQa24EsAHQYs-cN-u5gYPnAyFiz-ra_ekVPwcjQ@mail.gmail.com>

I have been playing around with the virtualOGR table feature made available
in sqlite and I am absolutely thrilled about this feature.Thanks for the
great work!

I've come across two small issues that i'd like some help/comments on. I am
trying to connect to a WFS service which works fine in Sqlite.


1) connecting to all layers in an ogr (WFS) datasource

 I wanted to try to connect to all layers in the WFS datasource at once.
The sqlite driver page says it is possible with the function
"ogr_datasource_load_layers"  http://www.gdal.org/ogr/drv_sqlite.html, I
get the error:

no such function: ogr_datasource_load_layers

I am using Spatialite 4.0.0 and GDAL 1.10dev from trunk

Any ideas ?

2) Using sql with  "....limit 10;"

All works find using the "create table using virtualOGR()". I was then
hoping I could use sql syntax "limit 10" on the wfs datasource because it
is a huge dataset. But it seems that the virtual table has fecth the entire
dataset before retuning the 10 rows. I was thinking the "limit 10" was
translated to &maxfeatures=10 in the WFS drivers GetFeature request. Is
this expected behaviour or am I doing something wrong?


-- 
Med venlig hilsen

Martin Bj?rge Jensen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130101/cfc7d02b/attachment.html>

From even.rouault at mines-paris.org  Tue Jan  1 12:55:36 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 1 Jan 2013 21:55:36 +0100
Subject: [gdal-dev] VirtualOGR with Sqlite
In-Reply-To: <CAApmPxffh5SgQa24EsAHQYs-cN-u5gYPnAyFiz-ra_ekVPwcjQ@mail.gmail.com>
References: <CAApmPxffh5SgQa24EsAHQYs-cN-u5gYPnAyFiz-ra_ekVPwcjQ@mail.gmail.com>
Message-ID: <201301012155.36249.even.rouault@mines-paris.org>

Le mardi 01 janvier 2013 21:45:10, Martin Jensen a ?crit :
> I have been playing around with the virtualOGR table feature made available
> in sqlite and I am absolutely thrilled about this feature.Thanks for the
> great work!
> 
> I've come across two small issues that i'd like some help/comments on. I am
> trying to connect to a WFS service which works fine in Sqlite.
> 
> 
> 1) connecting to all layers in an ogr (WFS) datasource
> 
>  I wanted to try to connect to all layers in the WFS datasource at once.
> The sqlite driver page says it is possible with the function
> "ogr_datasource_load_layers"  http://www.gdal.org/ogr/drv_sqlite.html, I
> get the error:
> 
> no such function: ogr_datasource_load_layers
> 
> I am using Spatialite 4.0.0 and GDAL 1.10dev from trunk

This has been added yesterday, so maybe your checkout isn't recent enough.

> 
> 2) Using sql with  "....limit 10;"
> 
> All works find using the "create table using virtualOGR()". I was then
> hoping I could use sql syntax "limit 10" on the wfs datasource because it
> is a huge dataset. But it seems that the virtual table has fecth the entire
> dataset before retuning the 10 rows. I was thinking the "limit 10" was
> translated to &maxfeatures=10 in the WFS drivers GetFeature request. Is
> this expected behaviour or am I doing something wrong?

The limit clause isn't passed to OGR, but only used by the SQLite engine, so 
yes this is somehow an expected behaviour. However, the download should be 
partial - prehaps a bit more than 10 features, but not the whole layer if it 
is bit - if you iterate only over a few features. I've just tested it actually 
and could see the difference on a big enough layer. You can also workaround 
that by just adding "&MAXFEATURES=10" in your connexion string.

Best regards,

Even


From martin.martinjensen at gmail.com  Tue Jan  1 14:21:54 2013
From: martin.martinjensen at gmail.com (Martin Jensen)
Date: Tue, 1 Jan 2013 23:21:54 +0100
Subject: [gdal-dev] VirtualOGR with Sqlite
In-Reply-To: <201301012155.36249.even.rouault@mines-paris.org>
References: <CAApmPxffh5SgQa24EsAHQYs-cN-u5gYPnAyFiz-ra_ekVPwcjQ@mail.gmail.com>
	<201301012155.36249.even.rouault@mines-paris.org>
Message-ID: <CAApmPxd8u31+V7NqduWr0uBCk3xfy1Nj18jTGpgdhxctVub++A@mail.gmail.com>

Thanks for the quick response!

1) My build was two days old; now it is working!

2) My http debugger showed that a getfeature request was sent to the WFS
without any filters and the request is really really slow so I assumed it
was a full download. Try:

 CREATE VIRTUAL TABLE testpdk1 USING VirtualOGR('wfs:
http://geoservice.plansystem.dk/wfs
',0,'pdk:theme_pdk_kommuneplanramme_vedtaget_v');

SELECT * FROM testpdk1 LIMIT 10;

/Martin


On 1 January 2013 21:55, Even Rouault <even.rouault at mines-paris.org> wrote:

> Le mardi 01 janvier 2013 21:45:10, Martin Jensen a ?crit :
> > I have been playing around with the virtualOGR table feature made
> available
> > in sqlite and I am absolutely thrilled about this feature.Thanks for the
> > great work!
> >
> > I've come across two small issues that i'd like some help/comments on. I
> am
> > trying to connect to a WFS service which works fine in Sqlite.
> >
> >
> > 1) connecting to all layers in an ogr (WFS) datasource
> >
> >  I wanted to try to connect to all layers in the WFS datasource at once.
> > The sqlite driver page says it is possible with the function
> > "ogr_datasource_load_layers"  http://www.gdal.org/ogr/drv_sqlite.html, I
> > get the error:
> >
> > no such function: ogr_datasource_load_layers
> >
> > I am using Spatialite 4.0.0 and GDAL 1.10dev from trunk
>
> This has been added yesterday, so maybe your checkout isn't recent enough.
>
> >
> > 2) Using sql with  "....limit 10;"
> >
> > All works find using the "create table using virtualOGR()". I was then
> > hoping I could use sql syntax "limit 10" on the wfs datasource because it
> > is a huge dataset. But it seems that the virtual table has fecth the
> entire
> > dataset before retuning the 10 rows. I was thinking the "limit 10" was
> > translated to &maxfeatures=10 in the WFS drivers GetFeature request. Is
> > this expected behaviour or am I doing something wrong?
>
> The limit clause isn't passed to OGR, but only used by the SQLite engine,
> so
> yes this is somehow an expected behaviour. However, the download should be
> partial - prehaps a bit more than 10 features, but not the whole layer if
> it
> is bit - if you iterate only over a few features. I've just tested it
> actually
> and could see the difference on a big enough layer. You can also workaround
> that by just adding "&MAXFEATURES=10" in your connexion string.
>
> Best regards,
>
> Even
>
>


-- 
Med venlig hilsen

Martin Bj?rge Jensen


On 1 January 2013 21:55, Even Rouault <even.rouault at mines-paris.org> wrote:

> Le mardi 01 janvier 2013 21:45:10, Martin Jensen a ?crit :
> > I have been playing around with the virtualOGR table feature made
> available
> > in sqlite and I am absolutely thrilled about this feature.Thanks for the
> > great work!
> >
> > I've come across two small issues that i'd like some help/comments on. I
> am
> > trying to connect to a WFS service which works fine in Sqlite.
> >
> >
> > 1) connecting to all layers in an ogr (WFS) datasource
> >
> >  I wanted to try to connect to all layers in the WFS datasource at once.
> > The sqlite driver page says it is possible with the function
> > "ogr_datasource_load_layers"  http://www.gdal.org/ogr/drv_sqlite.html, I
> > get the error:
> >
> > no such function: ogr_datasource_load_layers
> >
> > I am using Spatialite 4.0.0 and GDAL 1.10dev from trunk
>
> This has been added yesterday, so maybe your checkout isn't recent enough.
>
> >
> > 2) Using sql with  "....limit 10;"
> >
> > All works find using the "create table using virtualOGR()". I was then
> > hoping I could use sql syntax "limit 10" on the wfs datasource because it
> > is a huge dataset. But it seems that the virtual table has fecth the
> entire
> > dataset before retuning the 10 rows. I was thinking the "limit 10" was
> > translated to &maxfeatures=10 in the WFS drivers GetFeature request. Is
> > this expected behaviour or am I doing something wrong?
>
> The limit clause isn't passed to OGR, but only used by the SQLite engine,
> so
> yes this is somehow an expected behaviour. However, the download should be
> partial - prehaps a bit more than 10 features, but not the whole layer if
> it
> is bit - if you iterate only over a few features. I've just tested it
> actually
> and could see the difference on a big enough layer. You can also workaround
> that by just adding "&MAXFEATURES=10" in your connexion string.
>
> Best regards,
>
> Even
>
>


-- 
Med venlig hilsen

Martin Bj?rge Jensen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130101/fe617731/attachment.html>

From even.rouault at mines-paris.org  Tue Jan  1 14:39:22 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 1 Jan 2013 23:39:22 +0100
Subject: [gdal-dev] VirtualOGR with Sqlite
In-Reply-To: <CAApmPxd8u31+V7NqduWr0uBCk3xfy1Nj18jTGpgdhxctVub++A@mail.gmail.com>
References: <CAApmPxffh5SgQa24EsAHQYs-cN-u5gYPnAyFiz-ra_ekVPwcjQ@mail.gmail.com>
	<201301012155.36249.even.rouault@mines-paris.org>
	<CAApmPxd8u31+V7NqduWr0uBCk3xfy1Nj18jTGpgdhxctVub++A@mail.gmail.com>
Message-ID: <201301012339.22050.even.rouault@mines-paris.org>


> 2) My http debugger showed that a getfeature request was sent to the WFS
> without any filters and the request is really really slow so I assumed it
> was a full download. Try:
> 
>  CREATE VIRTUAL TABLE testpdk1 USING VirtualOGR('wfs:
> http://geoservice.plansystem.dk/wfs
> ',0,'pdk:theme_pdk_kommuneplanramme_vedtaget_v');
> 
> SELECT * FROM testpdk1 LIMIT 10;
> 

Ok, I reproduce. But this is an issue of that particular WFS server that, 
apparently, must generate the full GML document before sending it to the 
client.

Other WFS servers (for example 
WFS:http://demo.opengeo.org/geoserver/wfs?VERSION=1.1.0) have streaming 
capabilities, that the OGR WFS driver is now able to use to retrieve features 
as soon as they are streamed from the server to the client.

From bontepaarden at gmail.com  Wed Jan  2 05:28:44 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Wed, 2 Jan 2013 14:28:44 +0100
Subject: [gdal-dev] gdalinfo and ogrinfo file formats
Message-ID: <CAHNf2YT7QbVNiBf03u+K21GDxPorO2-fvsqCmsDTCj20JfqdpQ@mail.gmail.com>

Hi all,

First I wish everybody a happy 2013!

With MapWindow GIS we're using gdal and ogr and we are now in the process
of include the functionality of the utility programs, like gdalinfo.exe,
ogrinfo.exe, gdal_translate.exe, ogr2ogr.exe, etc.

This functionality is added to our core C++ base called MapWinGIS. This
work is almost done.
We're now in the progress of creating C#/WinForms tools on top of these
functionality to be used in MapWindow. We are going to use *gdalinfo
--formats* and *gdalinfo --format the_format *to get the relevant data we
need to create for example a file open box. This works fine since the
extension can be retrieved from using the --format command.
For example *gdalinfo --format VRT *returns
VRT format: Format Details:
  Short Name: VRT
  Long Name: Virtual Raster
  Extension: vrt
  Help Topic: gdal_vrttut.html
  Supports: Create() - Create writeable dataset.
  Supports: CreateCopy() - Create dataset by copying another.
  Creation Datatypes: Byte Int16 UInt16 Int32 UInt32 Float32 Float64 CInt16
CInt32 CFloat32 CFloat64

The same we want to do for the ogr2org.
*--formats* will give us the available file formats but I can't find a
command that will give me the expected extension for the file format. I was
expecting something like *ogrinfo --format "ESRI Shapefile"* that would
return something like
ESRI Shapefile format: Format Details:
  Short Name: sf
  Long Name: ESRI Shapefile
  Extension: shp
  Help Topic: drv_shapefile.html

Am I missing something or isn't this available for ogr?

Thanks,

Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl

*
*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130102/3c118db0/attachment-0001.html>

From even.rouault at mines-paris.org  Wed Jan  2 05:41:03 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 02 Jan 2013 14:41:03 +0100
Subject: [gdal-dev] gdalinfo and ogrinfo file formats
In-Reply-To: <CAHNf2YT7QbVNiBf03u+K21GDxPorO2-fvsqCmsDTCj20JfqdpQ@mail.gmail.com>
References: <CAHNf2YT7QbVNiBf03u+K21GDxPorO2-fvsqCmsDTCj20JfqdpQ@mail.gmail.com>
Message-ID: <1357134063.50e438efd1e50@imp.free.fr>


> We're now in the progress of creating C#/WinForms tools on top of these
> functionality to be used in MapWindow. We are going to use *gdalinfo
> --formats* and *gdalinfo --format the_format *to get the relevant data we
> need to create for example a file open box. This works fine since the
> extension can be retrieved from using the --format command.

You don't parse the output of gdalinfo --format, do you ? Please don't do this :
this is really fragile. Imagine what will happen if the output format of the
utility change in some later version ? (We wouldn't do that just for fun, but
relying on that is fragile). Rather look at the source code of gdalinfo (or
actually at GDALGeneralCmdLineProcessor() in gcore/gdal_misc.cpp to C which API
calls are involved.

>
> The same we want to do for the ogr2org.
> *--formats* will give us the available file formats but I can't find a
> command that will give me the expected extension for the file format. I was
> expecting something like *ogrinfo --format "ESRI Shapefile"* that would
> return something like
> ESRI Shapefile format: Format Details:
>   Short Name: sf
>   Long Name: ESRI Shapefile
>   Extension: shp
>   Help Topic: drv_shapefile.html
>
> Am I missing something or isn't this available for ogr?

No, this is not available in OGR. This could be something achievable if the
"Unification of the GDAL and OGR components" mentionned in
http://trac.osgeo.org/gdal/wiki/GDAL20Changes is done, and that OGR drivers can
have metadata.

From crappbytes at gmail.com  Wed Jan  2 05:59:37 2013
From: crappbytes at gmail.com (Christian Rapp)
Date: Wed, 02 Jan 2013 14:59:37 +0100
Subject: [gdal-dev] Need help in writing aux.xml (pam) using cpp
Message-ID: <50E43D49.9060801@gmail.com>

Hello altogether and happy new year,


I just started using the GDAL c++ interface. I want to create float32
based GEoTiffs. This works quite well but in ArcMap they don't look that
good because Statistics are missing.

So first of all I called GetStatistics() Method from a Standard
GDALDataset. This had no effect, at least ArcMap stilled complained
about missing statistics. Then I switched to GDALPamDataset and
GDALPamRasterBand and tried the same method again. Using the exiftool
from Phil Harvey I see the statistics were written in the GDALMetadata
section Even Esri recognizes this. Ok even better but why don't I get
this values in an external aux.xml file?
Right now I just call GetStatistics() right before GDALClose().

I also had a look at code of the gdalinfo tool. Because gdalinfo -stat
creates what I want. But I don't see anything what could help me.

Best regards
Christian Rapp

From bontepaarden at gmail.com  Wed Jan  2 06:08:02 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Wed, 2 Jan 2013 15:08:02 +0100
Subject: [gdal-dev] gdalinfo and ogrinfo file formats
In-Reply-To: <1357134063.50e438efd1e50@imp.free.fr>
References: <CAHNf2YT7QbVNiBf03u+K21GDxPorO2-fvsqCmsDTCj20JfqdpQ@mail.gmail.com>
	<1357134063.50e438efd1e50@imp.free.fr>
Message-ID: <CAHNf2YTZEj=TYbE+337FRy5e6T-ZxEKSpf-iOwpF7207SwHHbw@mail.gmail.com>

Hi Even,

I'm not sure why I shouldn't use --format. If I can't use it why is it
provided?
Can I use --formats?
Perhaps I should not handle this in my C#/WinForms but do this in our C++
core.
I think we can make a method that would return what I need based on
gcore/gdal_misc.cpp but that would rely on hard-coded strings.
I don't like that either ;)

For the formats for ogr2ogr I understand I need to use a workaround so I
could do that for the gdal formats as well.
The whole idea is/was that when we upgrade to a newer version of GDAL/ORG
or recompile it with some different settings our tools would automagically
use the correct file formats.

This needs some more pondering from our side ;)

Thanks,

Paul


2013/1/2 Even Rouault <even.rouault at mines-paris.org>

> You don't parse the output of gdalinfo --format, do you ? Please don't do
> this :
> this is really fragile. Imagine what will happen if the output format of
> the
> utility change in some later version ? (We wouldn't do that just for fun,
> but
> relying on that is fragile). Rather look at the source code of gdalinfo (or
> actually at GDALGeneralCmdLineProcessor() in gcore/gdal_misc.cpp to C
> which API
> calls are involved.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130102/76bb4b90/attachment.html>

From even.rouault at mines-paris.org  Wed Jan  2 06:37:00 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 02 Jan 2013 15:37:00 +0100
Subject: [gdal-dev] gdalinfo and ogrinfo file formats
In-Reply-To: <CAHNf2YTZEj=TYbE+337FRy5e6T-ZxEKSpf-iOwpF7207SwHHbw@mail.gmail.com>
References: <CAHNf2YT7QbVNiBf03u+K21GDxPorO2-fvsqCmsDTCj20JfqdpQ@mail.gmail.com>
	<1357134063.50e438efd1e50@imp.free.fr>
	<CAHNf2YTZEj=TYbE+337FRy5e6T-ZxEKSpf-iOwpF7207SwHHbw@mail.gmail.com>
Message-ID: <1357137420.50e4460c108c2@imp.free.fr>

Selon Paul Meems <bontepaarden at gmail.com>:

> Hi Even,
>
> I'm not sure why I shouldn't use --format. If I can't use it why is it
> provided?
> Can I use --formats?

My message was that the output format of gdalinfo is primarly for humans, not to
be fed into other software. Well, this is my vision. You can do whatever you
want of course. (Hint: QGIS uses the C API to feed its Open raster dialog)

> Perhaps I should not handle this in my C#/WinForms but do this in our C++
> core.

You can probably use the GDAL C# API. This is basically just iterating over the
drivers and querying the relevant metadata keys. Should be pretty similar to the
C++ code.

> I think we can make a method that would return what I need based on
> gcore/gdal_misc.cpp but that would rely on hard-coded strings.
> I don't like that either ;)

By hard-coded strings, do you mean GDAL_DMD_EXTENSION and such strings ? Well,
they are part of the GDAL API, so they shouldn't change in the foreseable
future. They are also available in SWIG bindings (something like
Gdal.DMD_EXTENSION but I'm not sure, as I don't use the C# bindings myself)

>
> For the formats for ogr2ogr I understand I need to use a workaround so I
> could do that for the gdal formats as well.
> The whole idea is/was that when we upgrade to a newer version of GDAL/ORG
> or recompile it with some different settings our tools would automagically
> use the correct file formats.

Yes, I understood that. For OGR drivers, for now, you'll have to hardcode the
information (or put it into a config file with the relevant information). For
GDAL drivers, you can use the API to dynamically query the information.

From even.rouault at mines-paris.org  Wed Jan  2 06:45:09 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 02 Jan 2013 15:45:09 +0100
Subject: [gdal-dev] Need help in writing aux.xml (pam) using cpp
In-Reply-To: <50E43D49.9060801@gmail.com>
References: <50E43D49.9060801@gmail.com>
Message-ID: <1357137909.50e447f543c32@imp.free.fr>

Selon Christian Rapp <crappbytes at gmail.com>:

> Hello altogether and happy new year,
>
>
> I just started using the GDAL c++ interface. I want to create float32
> based GEoTiffs. This works quite well but in ArcMap they don't look that
> good because Statistics are missing.
>
> So first of all I called GetStatistics() Method from a Standard
> GDALDataset. This had no effect, at least ArcMap stilled complained
> about missing statistics. Then I switched to GDALPamDataset and
> GDALPamRasterBand and tried the same method again. Using the exiftool
> from Phil Harvey I see the statistics were written in the GDALMetadata
> section Even Esri recognizes this. Ok even better but why don't I get
> this values in an external aux.xml file?
> Right now I just call GetStatistics() right before GDALClose().
>
> I also had a look at code of the gdalinfo tool. Because gdalinfo -stat
> creates what I want. But I don't see anything what could help me.

If you want the statistics in a external .aux.xml file, open the dataset in
GA_ReadOnly mode, call GetStatistics() and GDALClose() it. That's what gdalinfo
does

Ah, and no need to cast to GDALPamDataset/GDALPamRasterBand: just use
GetStatistics() on the band object returned by GetRasterBand(), as
GetStatistics() is a virtual method of GDALRasterBand(). And the GTiff driver
extends GDALPamRasterBand, so the GetStatistics() implementation used will be
the one of GDALPamRasterBand.



From bontepaarden at gmail.com  Wed Jan  2 06:50:00 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Wed, 2 Jan 2013 15:50:00 +0100
Subject: [gdal-dev] gdalinfo and ogrinfo file formats
In-Reply-To: <1357137420.50e4460c108c2@imp.free.fr>
References: <CAHNf2YT7QbVNiBf03u+K21GDxPorO2-fvsqCmsDTCj20JfqdpQ@mail.gmail.com>
	<1357134063.50e438efd1e50@imp.free.fr>
	<CAHNf2YTZEj=TYbE+337FRy5e6T-ZxEKSpf-iOwpF7207SwHHbw@mail.gmail.com>
	<1357137420.50e4460c108c2@imp.free.fr>
Message-ID: <CAHNf2YQa71X+y3E29w2Q_3BEtK5HrmgnwjD9kMPJG8Rj4WH_zQ@mail.gmail.com>

Thanks Even,

I'll have a look at your suggestions.

BTW for MapWindow we don't use the GDAL C# API.
>From our C#/Winforms we 'talk' to our MapWinGIS wich is a C++ ActiveX
control.
MapWinGIS does the communication with GDAL. This is much faster and more
stable than using C# bindings.

Thanks,



Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl

*
*


2013/1/2 Even Rouault <even.rouault at mines-paris.org>

> Selon Paul Meems <bontepaarden at gmail.com>:
>
> > Hi Even,
> >
> > I'm not sure why I shouldn't use --format. If I can't use it why is it
> > provided?
> > Can I use --formats?
>
> My message was that the output format of gdalinfo is primarly for humans,
> not to
> be fed into other software. Well, this is my vision. You can do whatever
> you
> want of course. (Hint: QGIS uses the C API to feed its Open raster dialog)
>
> > Perhaps I should not handle this in my C#/WinForms but do this in our C++
> > core.
>
> You can probably use the GDAL C# API. This is basically just iterating
> over the
> drivers and querying the relevant metadata keys. Should be pretty similar
> to the
> C++ code.
>
> > I think we can make a method that would return what I need based on
> > gcore/gdal_misc.cpp but that would rely on hard-coded strings.
> > I don't like that either ;)
>
> By hard-coded strings, do you mean GDAL_DMD_EXTENSION and such strings ?
> Well,
> they are part of the GDAL API, so they shouldn't change in the foreseable
> future. They are also available in SWIG bindings (something like
> Gdal.DMD_EXTENSION but I'm not sure, as I don't use the C# bindings myself)
>
> >
> > For the formats for ogr2ogr I understand I need to use a workaround so I
> > could do that for the gdal formats as well.
> > The whole idea is/was that when we upgrade to a newer version of GDAL/ORG
> > or recompile it with some different settings our tools would
> automagically
> > use the correct file formats.
>
> Yes, I understood that. For OGR drivers, for now, you'll have to hardcode
> the
> information (or put it into a config file with the relevant information).
> For
> GDAL drivers, you can use the API to dynamically query the information.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130102/b0721c42/attachment.html>

From martin.martinjensen at gmail.com  Wed Jan  2 06:53:57 2013
From: martin.martinjensen at gmail.com (Martin Jensen)
Date: Wed, 2 Jan 2013 15:53:57 +0100
Subject: [gdal-dev] VirtualOGR with Sqlite
In-Reply-To: <201301012339.22050.even.rouault@mines-paris.org>
References: <CAApmPxffh5SgQa24EsAHQYs-cN-u5gYPnAyFiz-ra_ekVPwcjQ@mail.gmail.com>
	<201301012155.36249.even.rouault@mines-paris.org>
	<CAApmPxd8u31+V7NqduWr0uBCk3xfy1Nj18jTGpgdhxctVub++A@mail.gmail.com>
	<201301012339.22050.even.rouault@mines-paris.org>
Message-ID: <CAApmPxfNNxM4S6KfV9VNTaEuC8ApfmLSca-h41cOy1sj7iDUUw@mail.gmail.com>

Thanks, Even!

The WFS server I was requesting was also a Geoserver like the OpenGEO. I
will ask the Geoserver user list on how to enable streaming.


/Martin


On 1 January 2013 23:39, Even Rouault <even.rouault at mines-paris.org> wrote:

>
> > 2) My http debugger showed that a getfeature request was sent to the WFS
> > without any filters and the request is really really slow so I assumed it
> > was a full download. Try:
> >
> >  CREATE VIRTUAL TABLE testpdk1 USING VirtualOGR('wfs:
> > http://geoservice.plansystem.dk/wfs
> > ',0,'pdk:theme_pdk_kommuneplanramme_vedtaget_v');
> >
> > SELECT * FROM testpdk1 LIMIT 10;
> >
>
> Ok, I reproduce. But this is an issue of that particular WFS server that,
> apparently, must generate the full GML document before sending it to the
> client.
>
> Other WFS servers (for example
> WFS:http://demo.opengeo.org/geoserver/wfs?VERSION=1.1.0) have streaming
> capabilities, that the OGR WFS driver is now able to use to retrieve
> features
> as soon as they are streamed from the server to the client.
>



-- 
Med venlig hilsen

Martin Bj?rge Jensen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130102/536589b7/attachment-0001.html>

From crappbytes at gmail.com  Wed Jan  2 08:54:52 2013
From: crappbytes at gmail.com (Christian Rapp)
Date: Wed, 02 Jan 2013 17:54:52 +0100
Subject: [gdal-dev] Need help in writing aux.xml (pam) using cpp
In-Reply-To: <1357137909.50e447f543c32@imp.free.fr>
References: <50E43D49.9060801@gmail.com> <1357137909.50e447f543c32@imp.free.fr>
Message-ID: <50E4665C.5060905@gmail.com>

Am 02.01.2013 15:45, schrieb Even Rouault:
> Selon Christian Rapp <crappbytes at gmail.com>:
>
>> Hello altogether and happy new year,
>>
>>
>> I just started using the GDAL c++ interface. I want to create float32
>> based GEoTiffs. This works quite well but in ArcMap they don't look that
>> good because Statistics are missing.
>>
>> So first of all I called GetStatistics() Method from a Standard
>> GDALDataset. This had no effect, at least ArcMap stilled complained
>> about missing statistics. Then I switched to GDALPamDataset and
>> GDALPamRasterBand and tried the same method again. Using the exiftool
>> from Phil Harvey I see the statistics were written in the GDALMetadata
>> section Even Esri recognizes this. Ok even better but why don't I get
>> this values in an external aux.xml file?
>> Right now I just call GetStatistics() right before GDALClose().
>>
>> I also had a look at code of the gdalinfo tool. Because gdalinfo -stat
>> creates what I want. But I don't see anything what could help me.
> If you want the statistics in a external .aux.xml file, open the dataset in
> GA_ReadOnly mode, call GetStatistics() and GDALClose() it. That's what gdalinfo
> does

I see, thats a nice trick :) Thanks for the info!
>
> Ah, and no need to cast to GDALPamDataset/GDALPamRasterBand: just use
> GetStatistics() on the band object returned by GetRasterBand(), as
> GetStatistics() is a virtual method of GDALRasterBand(). And the GTiff driver
> extends GDALPamRasterBand, so the GetStatistics() implementation used will be
> the one of GDALPamRasterBand.
You mean I don't need GDALPamDataset/GDALPamRasterBandar at all? So no
need to cast the GDALDataset returned by GDALDriver::Create() to a
GDALPamDataset. Ok great, less work.

Great library, congratulations!

Regards
Christian Rapp
>

From lran at email.unc.edu  Wed Jan  2 19:07:52 2013
From: lran at email.unc.edu (Ran, Limei)
Date: Thu, 3 Jan 2013 03:07:52 +0000
Subject: [gdal-dev] FW: point within polygon c++ API problem
In-Reply-To: <58477023A73D04479CCD057E4888A8464C54A024@ITS-MSXMBS4F.ad.unc.edu>
References: <58477023A73D04479CCD057E4888A8464C545E13@ITS-MSXMBS4M.ad.unc.edu>
	<CA+YzLBew_=okbOAF5+K1n-ScJb-V37bmTpiXCuOqQwnSQBfTOw@mail.gmail.com>,
	<58477023A73D04479CCD057E4888A8464C54A024@ITS-MSXMBS4F.ad.unc.edu>
Message-ID: <58477023A73D04479CCD057E4888A8464C54FEB7@ITS-MSXMBS4F.ad.unc.edu>

Hello Frank,

I think the fragmentation is caused by how the program is compiled.  I did a test using the attached test code with point within polygon function.  I appreciate if you can suggest how to compile it correctly with static option. 

When I compiled it in the following way, it worked:
> g++ -I/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/gdal-1.9.1/local/include -I/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/geos-3.3.6/local/include test_geos.cpp -o test_geos -L/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/gdal-1.9.1/local/lib -lgdal -L/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/geos-3.3.6/local/lib -lgeos_c

> ./test_geos
Testing point in polygon
        Set point
        Completed set point
        Set polygon
        Completed set polygon
Check point within polygon
        Point is not in the polygon

When I compiled it using the static way (which is the same as our API programs), it has segmentation fault:
> g++ -I/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/gdal-1.9.1/local/include -I/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/geos-3.3.6/local/include -I/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/proj-4.8.0/local/include test_geos.cpp -o test_geos -static -pthread -L/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/gdal-1.9.1/local/lib -lgdal -L/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/geos-3.3.6/local/lib -lgeos_c -lgeos -L/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/proj-4.8.0/local/lib -lproj -ldl

> ./test_geos
Testing point in polygon
        Set point
        Completed set point
        Set polygon
        Completed set polygon
Check point within polygon
Segmentation fault

We have been compiling our GDAL C++ APIs with static -pthread.  So, the programs can be used without recompiling on different systems.  Could I be doing something wrong here?

Thank you and happy new year,

Limei
==================================
Center for Environmental Modeling for Policy Development
Institute for the Environment
University of North Carolina at Chapel Hill
==================================

________________________________________
From: Ran, Limei
Sent: Thursday, December 20, 2012 10:20 AM
To: Frank Warmerdam
Subject: RE: [gdal-dev] FW: point within polygon c++ API problem

Hello Frank,

I did a small testing codes (see the following lines) on GEOS in my c++ API by following the sample test codes in http://trac.osgeo.org/gdal/browser/trunk/autotest/pymod/ogrtest.py.

......
//test GEOS
                OGRPoint *pnt1;
                pnt1->setX (10);
                pnt1->setY (20);

                OGRPoint *pnt2;
                pnt1->setX (30);
                pnt1->setY (20);

                OGRGeometry *result;
                result = pnt1->Union( pnt2 );

                if ( result == NULL )
                {
                   printf ("\tGEOS is not avaiable...\n");
                   exit ( 1 );
                }
                pnt1->empty();
                pnt2->empty();
.......

The program has segmentation fault when reaching Union.  So, I guess somehow GEOS is not installed or configured right.  Here is config info for my GDAL configuration:
....
config.log:ac_cv_lib_geos_c_GEOSversion=yes
config.log:ac_cv_prog_GEOS_CONFIG=/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/geos-3.3.6/local/bin/geos-config
config.log:GEOS_CFLAGS='-I/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/geos-3.3.6/local/include'
config.log:GEOS_CONFIG='/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/geos-3.3.6/local/bin/geos-config'
config.log:GEOS_LIBS='-L/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/geos-3.3.6/local/lib -lgeos_c'
config.log:GEOS_VERSION='3.3.6'
config.log:HAVE_GEOS='yes'
config.status:S["GEOS_CONFIG"]="/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/geos-3.3.6/local/bin/geos-config"
config.status:S["GEOS_VERSION"]="3.3.6"
config.status:S["HAVE_GEOS"]="yes"
config.status:S["GEOS_CFLAGS"]="-I/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/geos-3.3.6/local/include"
config.status:S["GEOS_LIBS"]="-L/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/geos-3.3.6/local/lib -lgeos_c"
.......

When I compiled  my C++ API,  if I just have: #include <geos.h>  and $(LIBPATH_GEOS) -lgeos, I get errors:
...
/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/gdal-1.9.1/ogr/ogrgeometryfactory.cpp:1481: undefined reference to `GEOSGeomTypeId'
/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/gdal-1.9.1/ogr/ogrgeometryfactory.cpp:1481: undefined reference to `GEOSisEmpty'
...

I can only compile my c++ codes with: #include <geos_c.h>  and  $(LIBPATH_GEOS) -lgeos_c -lgeos

Thank you very much,

Limei

-----Original Message-----
From: fwarmerdam at gmail.com [mailto:fwarmerdam at gmail.com] On Behalf Of Frank Warmerdam
Sent: Wednesday, December 19, 2012 8:51 PM
To: Ran, Limei
Subject: Re: [gdal-dev] FW: point within polygon c++ API problem

Limei,

For what it's worth, I looked over the code and your approach seemed fine.  I'm not sure why it crashed.  I didn't try to build a sample to demonstrate the problem on my tree.  If you could prepare a fairly self contained simple demonstration it might be possible to get more help.

Best regards,
Frank

On Wed, Dec 19, 2012 at 12:18 PM, Ran, Limei <lran at email.unc.edu> wrote:
> Hello Even,
>
>
>
> Since you helped me on GEOS compiling with GDAL, I think you may have
> ideas on what went wrong with my codes in the following.  Could you
> tell me what you think on my segmentation fault error?
>
>
>
> Thank you,
>
>
>
> Limei
>
>
>
>
>
> From: Ran, Limei
> Sent: Tuesday, December 18, 2012 3:21 PM
> To: gdal-dev at lists.osgeo.org
> Subject: point within polygon c++ API problem
>
>
>
> Hello,
>
>
>
> I am working on a C++ codes which reads polygon from polygon shapefile
> to see whether a point is within a polygon.  But, I got segmentation
> fault for pt.within (poGeometry).  Could you tell me where I may have errors.
>
>
>
> 1.      GDAL 1.9.1 is compiled with currect GEOS 3.3.6
>
> 2.      My c++ program compiled with GDAL.
>
> 3.      Here are my codes:
>
>
>
> ??
>
>       float x = grid.x[col];
>
>        float y = grid.y[row];
>
>
>
>        OGRPoint pt;
>
>         pt.setX( x );
>
>         pt.setY( y );
>
>
>
>         printf ("\tSet point\n");
>
>
>
>         OGRFeature *poFeature;
>
>         poLayer->ResetReading();
>
>
>
>         while( (poFeature = poLayer->GetNextFeature()) != NULL )
>
>         {
>
>            OGRFeatureDefn *poFDefn = poLayer->GetLayerDefn();
>
>            int iField;
>
>
>
>            OGRGeometry *poGeometry;
>
>
>
>            poGeometry = poFeature->GetGeometryRef();
>
>            if( poGeometry != NULL && ( poGeometry->getGeometryType() )
> == wkbPolygon )
>
>            {
>
>               printf ("\tGot polygon\n");
>
>
>
>               if ( pt.Within ( poGeometry ) )
>
>               {  //find the polygon where point is within and get item
> values
>
>
>
>                  printf ("\tpoint in polygon\n");
>
> ???
>
>
>
> I got segmentation fault when processing gets:  if ( pt.Within (
> poGeometry
> ) )
>
>
>
>
>
> Thank you,
>
>
>
> Limei
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: test_geos.cpp
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130103/787cd9dc/attachment.ksh>

From JPalmer at linz.govt.nz  Wed Jan  2 19:23:36 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Thu, 3 Jan 2013 16:23:36 +1300
Subject: [gdal-dev] WFS paging - STARTINDEX should start at 0 not 1
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0EDF22F9ED@prdlsmmsg01.ad.linz.govt.nz>

Hi,

When using OGR WFS driver and paging support the first feature is missed when I query a Geoserver 2.1.X WFS 1.1.0 service. This is because OGR assumes the WFS STARTINDEX parameter is 1-based.

However it now seems that the OGC standard of STARTINDEX has been clarified zero-based. This was chosen because of the ISO committee members heritage as C programmers! Found the comment here: http://jira.codehaus.org/browse/GEOS-4920

Can OGR please be changed to support a zero-based STARTINDEX?

Note: This is a follow-up to this thread:

http://lists.osgeo.org/pipermail/mapserver-dev/2012-January/011867.html

Cheers,
Jeremy

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From brett.walker at geometryit.com  Wed Jan  2 21:21:52 2013
From: brett.walker at geometryit.com (Brett Walker)
Date: Thu, 3 Jan 2013 16:21:52 +1100
Subject: [gdal-dev] How does ogr2ogr -spat work?
Message-ID: <4B95BC7335A13A42AD0D23462F91AE6F616D28BCE5@echo.geometryit.com>

Hi List,

I have a technical question regarding the workings of 'ogr2ogr -spat'

>From the description regarding this option is:

-spat xmin ymin xmax ymax:
spatial query extents. Only features whose geometry intersects the extents will be selected. The geometries will not be clipped unless -clipsrc is specified

This can be found at the following website: http://www.gdal.org/ogr2ogr.html This provides more information than the command line help.

My question is what does the sentence 'Only features whose geometry intersects the extents will be selected' actually mean? What type of intersection is implied?

I have a spatial data source which I will describe in a generalized fashion as a set of polygons and disjoint multi-polygons that are arranged like 4 concentric rings.  The rings themselves are not polygons or multi-polygons but rather groups of them compose each ring. Label the rings from 1 to 4; the inner smallest circle is 1; the largest outer ring is 4.
I want to extract from the spatial data source only those geometries that have some part of them within a rectangular extent (spat extent) that covers, in some part, rings 1, 2 and 3 but not ring 4. When I use org2org -spat with the required extent I am getting geometries from ring 4. These geometries are disjoin multi-polygons that exist, in parts, around the whole of ring 4 but no part of the actual geometries extend into the rectangular extent, only the minimal bounding box of the geometry which of course covers the whole of the rectangular extent.

Is the implied intersection related to the minimal bounding box of the geometries and the rectangular extent?

How would I use the various options to achieve what I need?

Sorry if the description is vague. I could have described the spatial data source too generally and therefore misconstrued the problem entirely. I could provide a picture of the spatial representation of the data source showing the problem if people find it beneficial.

Thanks in advance,
Brett

Brett Walker <brett.walker at geometryit.com<mailto:brett.walker at geometryit.com>>
Software Developer / Analyst
Geometry Pty Ltd

Telephone               03 6223 1999
Mobile                     0458 498 386
Fax                          03 6223 1988
Web                        www.geometryit.com<http://www.geometryit.com/>
Address                   31 Salamanca Square, Battery Point, TAS 7004, Australia

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130103/6816f17e/attachment.html>

From even.rouault at mines-paris.org  Wed Jan  2 22:57:41 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 3 Jan 2013 07:57:41 +0100
Subject: [gdal-dev] WFS paging - STARTINDEX should start at 0 not 1
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0EDF22F9ED@prdlsmmsg01.ad.linz.govt.nz>
References: <666FB8D75E95AE42965A0E76A5E5337E0EDF22F9ED@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <201301030757.42010.even.rouault@mines-paris.org>

Le jeudi 03 janvier 2013 04:23:36, Jeremy Palmer a ?crit :
> Hi,
> 
> When using OGR WFS driver and paging support the first feature is missed
> when I query a Geoserver 2.1.X WFS 1.1.0 service. This is because OGR
> assumes the WFS STARTINDEX parameter is 1-based.
> 
> However it now seems that the OGC standard of STARTINDEX has been clarified
> zero-based. This was chosen because of the ISO committee members heritage
> as C programmers! Found the comment here:
> http://jira.codehaus.org/browse/GEOS-4920
> 
> Can OGR please be changed to support a zero-based STARTINDEX?
> 
> Note: This is a follow-up to this thread:
> 
> http://lists.osgeo.org/pipermail/mapserver-dev/2012-January/011867.html

I see I had created http://trac.osgeo.org/gdal/ticket/4504 . Ping me if it 
isn't resolved before 1.10 release. The issue is that MapServer and Deegree in 
the wild both assume 1 as the first index (MapServer still does : 
https://github.com/mapserver/mapserver/issues/4180 , not sure for Deegree). So 
some config option will be likely necessary for people that want to operate 
against those versions based before OGC clarification.

From JPalmer at linz.govt.nz  Wed Jan  2 22:59:40 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Thu, 3 Jan 2013 19:59:40 +1300
Subject: [gdal-dev] WFS paging - STARTINDEX should start at 0 not 1
Message-ID: <ts77tra4qa7lqfnquwxn9w08.1357196389328@email.android.com>

ok thanks Even.


----- Original Message -----
From: Even Rouault <even.rouault at mines-paris.org>
To: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Cc: Jeremy Palmer <JPalmer at linz.govt.nz>, Robert Coup <robert.coup at koordinates.com>, Hamish Campbell <hamish.campbell at koordinates.com>
Sent: 03/01/2013 7:58 PM
Subject: Re: [gdal-dev] WFS paging - STARTINDEX should start at 0 not 1



Le jeudi 03 janvier 2013 04:23:36, Jeremy Palmer a ?crit :
> Hi,
>
> When using OGR WFS driver and paging support the first feature is missed
> when I query a Geoserver 2.1.X WFS 1.1.0 service. This is because OGR
> assumes the WFS STARTINDEX parameter is 1-based.
>
> However it now seems that the OGC standard of STARTINDEX has been clarified
> zero-based. This was chosen because of the ISO committee members heritage
> as C programmers! Found the comment here:
> http://jira.codehaus.org/browse/GEOS-4920
>
> Can OGR please be changed to support a zero-based STARTINDEX?
>
> Note: This is a follow-up to this thread:
>
> http://lists.osgeo.org/pipermail/mapserver-dev/2012-January/011867.html

I see I had created http://trac.osgeo.org/gdal/ticket/4504 . Ping me if it
isn't resolved before 1.10 release. The issue is that MapServer and Deegree in
the wild both assume 1 as the first index (MapServer still does :
https://github.com/mapserver/mapserver/issues/4180 , not sure for Deegree). So
some config option will be likely necessary for people that want to operate
against those versions based before OGC clarification.

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From rksingh_rk at yahoo.com  Thu Jan  3 00:51:57 2013
From: rksingh_rk at yahoo.com (RKSingh)
Date: Thu, 3 Jan 2013 00:51:57 -0800 (PST)
Subject: [gdal-dev] PCIDSK .pix feature attribute information not
 visible in geomatica.
In-Reply-To: <AANLkTinaiLnZXoMT8iA38kwnY9mQNC8WyyEmiuDceaEh@mail.gmail.com>
References: <1293528231423-5871388.post@n2.nabble.com>
	<1294066356313-5880861.post@n2.nabble.com>
	<AANLkTimE8fbrcvMj0HWO=vdRiBN7-yNATs5wbBgRnKu5@mail.gmail.com>
	<AANLkTinaiLnZXoMT8iA38kwnY9mQNC8WyyEmiuDceaEh@mail.gmail.com>
Message-ID: <1357203117837-5025409.post@n6.nabble.com>

Hello,

The attributes don't get lost but they are hidden. I tried in Geomatica with
Attribute manager->Table Definition to un-check and check in particular
field and clicked Apply, then they are visible. 
I think this is not proper solution to see the attributes data.
If anybody find some other solution please share the info.

Regards,
RKSingh 






--
View this message in context: http://osgeo-org.1560.n6.nabble.com/PCIDSK-pix-feature-attribute-information-not-visible-in-geomatica-tp3743545p5025409.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From alobolistas at gmail.com  Thu Jan  3 03:17:12 2013
From: alobolistas at gmail.com (Agustin Lobo)
Date: Thu, 3 Jan 2013 12:17:12 +0100
Subject: [gdal-dev] kml file does not open with ogrinfo but works with GE
Message-ID: <CAG4NReKNr+rPWNpJBx+r1onb=Y0mnkh-gpJR8qDGBdBXHS7p1w@mail.gmail.com>

A program (Mission Planner for Ardupilot)
http://code.google.com/p/ardupilot-mega/wiki/MPTlog
produces kml files
with track information that can be represented with the same program
and GE, but I cannot open them with ogrinfo:
$ ogrinfo test.kml
FAILURE:
Unable to open datasource `test.kml' with the following drivers.
$ ogrinfo --version
GDAL 1.9.2, released 2012/10/08

I cannot open it with QGIS or R (readOGR()) either.

Is there a newer kml format that is recognized by GE but not by the OGR library?
Any help with this?
I've uploaded test.kml in case someone could help:
http://dl.dropbox.com/u/3180464/test.kml

Thanks!
Agus

From curtly.boon at gmail.com  Thu Jan  3 03:43:05 2013
From: curtly.boon at gmail.com (Ben Crane)
Date: Thu, 3 Jan 2013 11:43:05 +0000
Subject: [gdal-dev] Ogr2Ogr OGR_STYLE Query
Message-ID: <CAE9uu8wm7NWHpA0NmnNO83MbKFHZdOH5+p4MMG62K6jb8r4vHw@mail.gmail.com>

Hi all,

I have a relatively simple initial query. When I upload a MapInfo TAB file
into PostGIS using Ogr2Ogr and specifying the OGR_STYLE column to be added
to the upload I get a nice text field such as:
"SYMBOL(a:0,c:#d10000,s:12pt,id:"mapinfo-sym-72,ogr-sym-1",o:#ffffff)"

Now, one small problem with this is that the mapinfo-sym-72 refers to a
specific True Type Font family within the application called "MapInfo
Transportation" and therefore you can have mapinfo-sym-72 referring to
potentially different font styles. In OGR2OGR it looks like it's just the
default compatible fonts.

Is there any way of either specifying the font family to be used or adding
additional MapInfo fonts to the OGR2OGR library otherwise I just get
standard MapInfo Compatible fonts and therefore miss out on loads of other
possible font types.

Cheers,
Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130103/56d18c6a/attachment.html>

From Roger.Bivand at nhh.no  Thu Jan  3 04:08:28 2013
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 3 Jan 2013 04:08:28 -0800 (PST)
Subject: [gdal-dev] kml file does not open with ogrinfo but works with GE
In-Reply-To: <CAG4NReKNr+rPWNpJBx+r1onb=Y0mnkh-gpJR8qDGBdBXHS7p1w@mail.gmail.com>
References: <CAG4NReKNr+rPWNpJBx+r1onb=Y0mnkh-gpJR8qDGBdBXHS7p1w@mail.gmail.com>
Message-ID: <1357214908832-5025434.post@n6.nabble.com>

If you change utf-16 in the first line to utf-8, then change line 2:

<Document xmlns:gx="http://www.google.com/kml/ext/2.2"
xmlns="http://www.opengis.net/kml/2.2">

to

<kml xmlns="http://www.opengis.net/kml/2.2">

and the final line from </Document> to </kml> to match, gdalinfo recognises
the file.

Then:

> ogrListLayers("test.kml")
[1] "Points"   "Layer #1"
> ogrInfo("test.kml", "Points")
Source: "test.kml", layer: "Points"
Driver: KML number of rows 1293 
Feature type: wkbPoint with 3 dimensions
+proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs  
Number of fields: 2 
         name type length typeName
1        Name    4      0   String
2 Description    4      0   String
> summary(readOGR("test.kml", "Points", stringsAsFactors=FALSE))
OGR data source with driver: KML 
Source: "test.kml", layer: "Points"
with 1293 features and 2 fields
Feature type: wkbPoint with 3 dimensions
Object of class SpatialPointsDataFrame
Coordinates:
                  min        max
coords.x1   0.9599367   1.206534
coords.x2  40.8425941  41.017574
coords.x3 -11.7700005 711.090027
Is projected: FALSE 
proj4string :
[+proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs]
Number of points: 1293
Data attributes:
     Name           Description       
 Length:1293        Length:1293       
 Class :character   Class :character  
 Mode  :character   Mode  :character  

where Description is a convoluted HTML table. This can be unpacked by:

> library(XML)
> data <- t(unname(sapply(t0$Description, function(x)
> unlist(t(readHTMLTable(substring(x, 11, nchar(x)),
> as.data.frame=FALSE))))))
> str(data)
 chr [1:1293, 1:4] "Roll: -0.05" "Roll: 0.01" "Roll: 0.86" ...

giving a 4-column character matrix that should be easy to convert to the
three numerical colums and one DateTime column needed (probably with
substring to cut out the names, then cast to required type).

Hope this helps,

Roger

PS. Please summarise to R-sig-geo.



Agustin Lobo wrote
> A program (Mission Planner for Ardupilot)
> http://code.google.com/p/ardupilot-mega/wiki/MPTlog
> produces kml files
> with track information that can be represented with the same program
> and GE, but I cannot open them with ogrinfo:
> $ ogrinfo test.kml
> FAILURE:
> Unable to open datasource `test.kml' with the following drivers.
> $ ogrinfo --version
> GDAL 1.9.2, released 2012/10/08
> 
> I cannot open it with QGIS or R (readOGR()) either.
> 
> Is there a newer kml format that is recognized by GE but not by the OGR
> library?
> Any help with this?
> I've uploaded test.kml in case someone could help:
> http://dl.dropbox.com/u/3180464/test.kml
> 
> Thanks!
> Agus
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> http://lists.osgeo.org/mailman/listinfo/gdal-dev





-----
Roger Bivand
NHH Norwegian School of Economics, Bergen, Norway
--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-kml-file-does-not-open-with-ogrinfo-but-works-with-GE-tp5025428p5025434.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From ckling at upcmail.nl  Thu Jan  3 05:55:54 2013
From: ckling at upcmail.nl (Kees kling)
Date: Thu, 03 Jan 2013 14:55:54 +0100
Subject: [gdal-dev] Ogr and setSpatialFilter
Message-ID: <50E58DEA.8030905@upcmail.nl>

Hi,

last week I upgraded my ubuntu and also the gdal library. I was using 
version libgdal.so.1.15.0, now I compiled and installed version 
libgdal.so.1.16.2.
In my application i'm using OGRLayer SetSpatialFilter and it was working 
in the old version, but in the new version the GetFeatureCount returns 0 
so nothing is plotted. Is there a change in the function between these 
two versions?

Thanks
Kees Kling

From cgodkin at gmail.com  Thu Jan  3 06:05:15 2013
From: cgodkin at gmail.com (Carl Godkin)
Date: Thu, 3 Jan 2013 06:05:15 -0800
Subject: [gdal-dev] ENVI datasets with rotation
Message-ID: <CAE=8kmmp3Gq8nuv0yZo__4St+btZ0HWS7P=SaN2Uz-pX4+avzQ@mail.gmail.com>

Happy 2013 everyone,

We've come across some ENVI data sets (.bsq + .hdr files) in which the "map
info" keyword of the .hdr file looks like this:

map info = {UTM, 1, 1,  408953.26, 3290904.2,  3.400, 3.400, 17,  North,
 WGS-84,  units=Meters,  rotation=-6.00000}

It's interesting because we have a collection of seven such files and only
two of them have rotation values other than 0.

We're using GDAL 1.9.2 and frmts/raw/envidataset.cpp, which seems to parse
the .hdr file in this case, ignores the rotation.
The code that captures the geotransform sets the two rotation terms to 0
unconditionally so it seems like it might not be
too difficult to fix this.

Besides adjusting the geotransform, it looks like the code at bottom
of ENVIDataset::ProcessMapinfo() would need to be fixed since the "units="
term is not actually always last in the map info array.

Has someone else already done anything about this already?  (E.g., is there
a patch awaiting approval somewhere?)

Thanks very much for any advice on this.

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130103/99794c79/attachment.html>

From even.rouault at mines-paris.org  Thu Jan  3 06:06:27 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 03 Jan 2013 15:06:27 +0100
Subject: [gdal-dev] Ogr and setSpatialFilter
In-Reply-To: <50E58DEA.8030905@upcmail.nl>
References: <50E58DEA.8030905@upcmail.nl>
Message-ID: <1357221987.50e59063f2ad2@imp.free.fr>

Selon Kees kling <ckling at upcmail.nl>:

> Hi,
>
> last week I upgraded my ubuntu and also the gdal library. I was using
> version libgdal.so.1.15.0, now I compiled and installed version
> libgdal.so.1.16.2.
> In my application i'm using OGRLayer SetSpatialFilter and it was working
> in the old version, but in the new version the GetFeatureCount returns 0
> so nothing is plotted. Is there a change in the function between these
> two versions?

Check :

ldd /path/to/libgdal.so.1.15.0 | grep geos

and

ldd /path/to/libgdal.so.1.16.2 | grep geos

My guess is that the first returns something, whereas the second doesn't. In
which case, you might need to install the developement package of GEOS and
rebuild GDAL against it.

>
> Thanks
> Kees Kling
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From ckling at upcmail.nl  Thu Jan  3 06:12:42 2013
From: ckling at upcmail.nl (Kees kling)
Date: Thu, 03 Jan 2013 15:12:42 +0100
Subject: [gdal-dev] Ogr and setSpatialFilter
In-Reply-To: <1357221987.50e59063f2ad2@imp.free.fr>
References: <50E58DEA.8030905@upcmail.nl>
	<1357221987.50e59063f2ad2@imp.free.fr>
Message-ID: <50E591DA.7040202@upcmail.nl>


On 01/03/2013 03:06 PM, Even Rouault wrote:
> Selon Kees kling <ckling at upcmail.nl>:
>
>> Hi,
>>
>> last week I upgraded my ubuntu and also the gdal library. I was using
>> version libgdal.so.1.15.0, now I compiled and installed version
>> libgdal.so.1.16.2.
>> In my application i'm using OGRLayer SetSpatialFilter and it was working
>> in the old version, but in the new version the GetFeatureCount returns 0
>> so nothing is plotted. Is there a change in the function between these
>> two versions?
> Check :
>
> ldd /path/to/libgdal.so.1.15.0 | grep geos
>
> and
>
> ldd /path/to/libgdal.so.1.16.2 | grep geos
>
> My guess is that the first returns something, whereas the second doesn't. In
> which case, you might need to install the developement package of GEOS and
> rebuild GDAL against it.
>
>> Thanks
>> Kees Kling
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
I compiled both libs with geos support and the loader gives me
     libgeos_c.so.1 => /usr/lib/libgeos_c.so.1 (0x00007fe171f78000)
     libgeos-3.2.2.so => /usr/lib/libgeos-3.2.2.so (0x00007fe16f29f000)
so that won't be  the problem.

Kees


From even.rouault at mines-paris.org  Thu Jan  3 06:16:43 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 03 Jan 2013 15:16:43 +0100
Subject: [gdal-dev] Ogr and setSpatialFilter
In-Reply-To: <50E591DA.7040202@upcmail.nl>
References: <50E58DEA.8030905@upcmail.nl>
	<1357221987.50e59063f2ad2@imp.free.fr>
	<50E591DA.7040202@upcmail.nl>
Message-ID: <1357222603.50e592cb9ab8b@imp.free.fr>


> I compiled both libs with geos support and the loader gives me
>      libgeos_c.so.1 => /usr/lib/libgeos_c.so.1 (0x00007fe171f78000)
>      libgeos-3.2.2.so => /usr/lib/libgeos-3.2.2.so (0x00007fe16f29f000)
> so that won't be  the problem.

hum, then you must provide a way to reproduce that behaviour ( script/command
line + data )

>
> Kees
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>















































From ckling at upcmail.nl  Thu Jan  3 06:26:41 2013
From: ckling at upcmail.nl (Kees kling)
Date: Thu, 03 Jan 2013 15:26:41 +0100
Subject: [gdal-dev] Ogr and setSpatialFilter
In-Reply-To: <1357222603.50e592cb9ab8b@imp.free.fr>
References: <50E58DEA.8030905@upcmail.nl>
	<1357221987.50e59063f2ad2@imp.free.fr>
	<50E591DA.7040202@upcmail.nl>
	<1357222603.50e592cb9ab8b@imp.free.fr>
Message-ID: <50E59521.8030706@upcmail.nl>

On 01/03/2013 03:16 PM, Even Rouault wrote:
>> I compiled both libs with geos support and the loader gives me
>>       libgeos_c.so.1 => /usr/lib/libgeos_c.so.1 (0x00007fe171f78000)
>>       libgeos-3.2.2.so => /usr/lib/libgeos-3.2.2.so (0x00007fe16f29f000)
>> so that won't be  the problem.
> hum, then you must provide a way to reproduce that behaviour ( script/command
> line + data )
>
>> Kees
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
That is not that easy, because it is embedded in in c++ applications. 
Meanwhile I reinstalled the old version and can go on with my work, but 
i think there is something wrong


>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>


From even.rouault at mines-paris.org  Thu Jan  3 06:31:32 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 03 Jan 2013 15:31:32 +0100
Subject: [gdal-dev] Ogr and setSpatialFilter
In-Reply-To: <50E59521.8030706@upcmail.nl>
References: <50E58DEA.8030905@upcmail.nl>
	<1357221987.50e59063f2ad2@imp.free.fr>
	<50E591DA.7040202@upcmail.nl>
	<1357222603.50e592cb9ab8b@imp.free.fr>
	<50E59521.8030706@upcmail.nl>
Message-ID: <1357223492.50e59644140be@imp.free.fr>


> That is not that easy, because it is embedded in in c++ applications.
> Meanwhile I reinstalled the old version and can go on with my work, but
> i think there is something wrong

Checking with ogrinfo your.dataset -spat xmin ymin xmax ymax might be an easy
way to try to reproduce

Other thing I think of : if you application uses the C++ API of GDAL, did you
make sure to recompile it against the headers of GDAL 1.9.2 ? The C++ ABI may
change when upgrading from GDAL 1.X to GDAL 1.Y, so recompiling is necesserary.
If you just use the GDAL C API, this is not needed.

From ckling at upcmail.nl  Thu Jan  3 07:00:58 2013
From: ckling at upcmail.nl (Kees kling)
Date: Thu, 03 Jan 2013 16:00:58 +0100
Subject: [gdal-dev] Ogr and setSpatialFilter
In-Reply-To: <1357223492.50e59644140be@imp.free.fr>
References: <50E58DEA.8030905@upcmail.nl>
	<1357221987.50e59063f2ad2@imp.free.fr>
	<50E591DA.7040202@upcmail.nl>
	<1357222603.50e592cb9ab8b@imp.free.fr>
	<50E59521.8030706@upcmail.nl>
	<1357223492.50e59644140be@imp.free.fr>
Message-ID: <50E59D2A.10807@upcmail.nl>

On 01/03/2013 03:31 PM, Even Rouault wrote:
>> That is not that easy, because it is embedded in in c++ applications.
>> Meanwhile I reinstalled the old version and can go on with my work, but
>> i think there is something wrong
> Checking with ogrinfo your.dataset -spat xmin ymin xmax ymax might be an easy
> way to try to reproduce
>
> Other thing I think of : if you application uses the C++ API of GDAL, did you
> make sure to recompile it against the headers of GDAL 1.9.2 ? The C++ ABI may
> change when upgrading from GDAL 1.X to GDAL 1.Y, so recompiling is necesserary.
> If you just use the GDAL C API, this is not needed.
>
After reinstalling the libgdal.so.1.16.2 version and a complete 
recompile my c++ program still the feature count is 0. I tried ogrinfo 
and there the filtering is working as the should be.

Kees


From robbkwright at gmail.com  Thu Jan  3 08:29:51 2013
From: robbkwright at gmail.com (Robb K. Wright)
Date: Thu, 03 Jan 2013 11:29:51 -0500
Subject: [gdal-dev] gdal_translate with the -epo flag
Message-ID: <50E5B1FF.2080306@gmail.com>


I'm interested in trying out the -epo flag with gdal_translate, but it 
doesn't seem to exist within the current Windows binaries from the 
gisinternals site though the web docs 
(http://www.gdal.org/gdal_translate.html) have it listed

Usage: gdal_translate [--help-general]
        [-ot {Byte/Int16/UInt16/UInt32/Int32/Float32/Float64/
              CInt16/CInt32/CFloat32/CFloat64}] [-strict]
        [-of format] [-b band] [-mask band] [-expand {gray|rgb|rgba}]
        [-outsize xsize[%] ysize[%]]
        [-unscale] [-scale [src_min src_max [dst_min dst_max]]]
        [-srcwin xoff yoff xsize ysize] [-projwin ulx uly lrx lry]
        [-a_srs srs_def] [-a_ullr ulx uly lrx lry] [-a_nodata value]
        [-gcp pixel line easting northing [elevation]]*
        [-mo "META-TAG=VALUE"]* [-q] [-sds]
        [-co "NAME=VALUE"]* [-stats]
        src_dataset dst_dataset
GDAL 1.9.2, released 2012/10/08


Right now it behaves as if the -epo flag is given - so it errors out 
when the srcwin is outside the extent.  Is the default (without a -epo 
flag) to not error?

Robb


From stefano.iacovella at gmail.com  Thu Jan  3 08:33:30 2013
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Thu, 3 Jan 2013 17:33:30 +0100
Subject: [gdal-dev] gdal_translate with the -epo flag
In-Reply-To: <50E5B1FF.2080306@gmail.com>
References: <50E5B1FF.2080306@gmail.com>
Message-ID: <CAG9OqYr2ZWcmrLxE6+W2yXvB-k+N4H1h2CyvyM2U20fatPjkdQ@mail.gmail.com>

Hi Robb,

The doc states that (GDAL >= 1.10) for -epo and -eco so 1.9.2 miss them.

Kind Regards,

stefano

---------------------------------------------------
41.95581N 12.52854E


http://www.linkedin.com/in/stefanoiacovella

http://twitter.com/#!/Iacovellas


2013/1/3 Robb K. Wright <robbkwright at gmail.com>:
>
> I'm interested in trying out the -epo flag with gdal_translate, but it
> doesn't seem to exist within the current Windows binaries from the
> gisinternals site though the web docs
> (http://www.gdal.org/gdal_translate.html) have it listed
>
> Usage: gdal_translate [--help-general]
>        [-ot {Byte/Int16/UInt16/UInt32/Int32/Float32/Float64/
>              CInt16/CInt32/CFloat32/CFloat64}] [-strict]
>        [-of format] [-b band] [-mask band] [-expand {gray|rgb|rgba}]
>        [-outsize xsize[%] ysize[%]]
>        [-unscale] [-scale [src_min src_max [dst_min dst_max]]]
>        [-srcwin xoff yoff xsize ysize] [-projwin ulx uly lrx lry]
>        [-a_srs srs_def] [-a_ullr ulx uly lrx lry] [-a_nodata value]
>        [-gcp pixel line easting northing [elevation]]*
>        [-mo "META-TAG=VALUE"]* [-q] [-sds]
>        [-co "NAME=VALUE"]* [-stats]
>        src_dataset dst_dataset
> GDAL 1.9.2, released 2012/10/08
>
>
> Right now it behaves as if the -epo flag is given - so it errors out when
> the srcwin is outside the extent.  Is the default (without a -epo flag) to
> not error?
>
> Robb
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jrepetto at free.fr  Thu Jan  3 08:36:32 2013
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu, 03 Jan 2013 17:36:32 +0100
Subject: [gdal-dev] gdal_translate with the -epo flag
In-Reply-To: <50E5B1FF.2080306@gmail.com>
References: <50E5B1FF.2080306@gmail.com>
Message-ID: <50E5B390.5090200@free.fr>

Le 03/01/2013 17:29, Robb K. Wright a ?crit :
>
> I'm interested in trying out the -epo flag with gdal_translate, but it
> doesn't seem to exist within the current Windows binaries

Which version ?

From even.rouault at mines-paris.org  Thu Jan  3 12:23:43 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 3 Jan 2013 21:23:43 +0100
Subject: [gdal-dev] kml file does not open with ogrinfo but works with GE
In-Reply-To: <1357214908832-5025434.post@n6.nabble.com>
References: <CAG4NReKNr+rPWNpJBx+r1onb=Y0mnkh-gpJR8qDGBdBXHS7p1w@mail.gmail.com>
	<1357214908832-5025434.post@n6.nabble.com>
Message-ID: <201301032123.43114.even.rouault@mines-paris.org>

Le jeudi 03 janvier 2013 13:08:28, Roger Bivand a ?crit :
> If you change utf-16 in the first line to utf-8, then change line 2:

The encoding specification is indeed incorrect (UTF-16 is a 2-byte encoding, 
and the file is really ASCII / UTF-8) --> the software that generated that file 
should be fixed. No XML parser should accept that. Expat refuses it, libxml2 
refuses it. libkml (developed by Google) also refuses it (it uses expat 
underneath). Not sure what GoogleEarth uses it, but must be some custom XML 
parser.

> 
> <Document xmlns:gx="http://www.google.com/kml/ext/2.2"
> xmlns="http://www.opengis.net/kml/2.2">
> 
> to
> 
> <kml xmlns="http://www.opengis.net/kml/2.2">
> 
> and the final line from </Document> to </kml> to match, gdalinfo recognises
> the file.

I've just made a tiny change in the KML driver to recognize a KML document 
with <Document> as the root node. The LIBKML driver (based on Google libkml) 
already recognized the file (once the encoding declaration changed of course).

From even.rouault at mines-paris.org  Thu Jan  3 13:09:38 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 3 Jan 2013 22:09:38 +0100
Subject: [gdal-dev] ENVI datasets with rotation
In-Reply-To: <CAE=8kmmp3Gq8nuv0yZo__4St+btZ0HWS7P=SaN2Uz-pX4+avzQ@mail.gmail.com>
References: <CAE=8kmmp3Gq8nuv0yZo__4St+btZ0HWS7P=SaN2Uz-pX4+avzQ@mail.gmail.com>
Message-ID: <201301032209.38862.even.rouault@mines-paris.org>

Le jeudi 03 janvier 2013 15:05:15, Carl Godkin a ?crit :
> Happy 2013 everyone,
> 
> We've come across some ENVI data sets (.bsq + .hdr files) in which the "map
> info" keyword of the .hdr file looks like this:
> 
> map info = {UTM, 1, 1,  408953.26, 3290904.2,  3.400, 3.400, 17,  North,
>  WGS-84,  units=Meters,  rotation=-6.00000}
> 
> It's interesting because we have a collection of seven such files and only
> two of them have rotation values other than 0.
> 
> We're using GDAL 1.9.2 and frmts/raw/envidataset.cpp, which seems to parse
> the .hdr file in this case, ignores the rotation.
> The code that captures the geotransform sets the two rotation terms to 0
> unconditionally so it seems like it might not be
> too difficult to fix this.
> 
> Besides adjusting the geotransform, it looks like the code at bottom
> of ENVIDataset::ProcessMapinfo() would need to be fixed since the "units="
> term is not actually always last in the map info array.
> 
> Has someone else already done anything about this already?  (E.g., is there
> a patch awaiting approval somewhere?)

A quick search in the Trac database doesn't show any pending patch (so you're 
welcome to work on that if you wish), but there's a related old ticket ( 
http://trac.osgeo.org/gdal/ticket/1778 ) about rotation being ignored, but 
when writing the ENVI header too

From jlaura at asu.edu  Thu Jan  3 15:16:07 2013
From: jlaura at asu.edu (Jay L.)
Date: Thu, 3 Jan 2013 16:16:07 -0700
Subject: [gdal-dev] Python Bindings ReadAsArray and ReadRaster Errors
Message-ID: <CA+bfmPuwjn25QAPHhrB+d1E2h-NfLhAjVMRGOsM7Jgkb4aZqzA@mail.gmail.com>

List,

I am attempting to open a multi-band image using the PDS driver.  I have a
working, GDAL readable label that I can run gdalinfo and gdal_translate on
without error.  I am attempting to access a number of bands and operate on
them using NumPy.

band.ReadAsArray() is failing silently in process, returning None.  I am
able to get band.XSize, band.YSize, band.GetNoDataValue() and the total
band count without error.


ReadAsArray via IPython returns the following:

ERROR 3: Failed to read scanline 4.
> ERROR 1: frt0000859f_07_if166l_trr3_fixed.lbl, band 1: IReadBlock failed
> at X offset 0, Y offset 4
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 4




I next tried:
array = band.ReadRaster(0,0,band.XSize, band.YSize, 1, GDT_Float64)

Here are the pertinent portions of the stack trace.

  File "csas.py", line 50, in load
>     array = band.ReadRaster(0,0,band.XSize, band.YSize, 1, GDT_Float64)
>   File
> "/Library/Frameworks/GDAL.framework/Versions/1.9/Python/2.7/site-packages/osgeo/gdal.py",
> line 1069, in ReadRaster
>     buf_pixel_space, buf_line_space)
> RuntimeError: frt0000859f_07_if166l_trr3_fixed.lbl, band 236: IReadBlock
> failed at X offset 0, Y offset 34



Note that a conversion to GTiff prior to operating on the image returns the
array as anticipated.

Is this an issue with the PDS driver, a label reading issue, or a dataset /
driver interaction?
Thanks,
Jay
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130103/2bbbf314/attachment.html>

From uffe at routeware.dk  Fri Jan  4 01:41:53 2013
From: uffe at routeware.dk (Uffe Kousgaard)
Date: Fri, 04 Jan 2013 10:41:53 +0100
Subject: [gdal-dev] ogr2ogr
Message-ID: <50E6A3E1.2010803@routeware.dk>

Where can I find the most recent precompiled ogr2ogr package for windows?

I am still using the one in fwtools 2.4.7 (almost 3 years old) and I have
some utf-8 encoded SHP files, which it doesn't seem to handle well. I have
tried with cpg files, but no luck.

Regards
Uffe Kousgaard


From uffe at routeware.dk  Fri Jan  4 01:47:29 2013
From: uffe at routeware.dk (Uffe Kousgaard)
Date: Fri, 04 Jan 2013 10:47:29 +0100
Subject: [gdal-dev] ogr2ogr
Message-ID: <50E6A531.6090709@routeware.dk>

Where can I find the most recent precompiled ogr2ogr package for windows?

I am still using the one in fwtools 2.4.7 (almost 3 years old) and I 
have some utf-8 encoded SHP files, which it doesn't seem to handle well. 
I have tried with cpg files, but no luck.

Regards
Uffe Kousgaard


From yjacolin at free.fr  Fri Jan  4 01:50:38 2013
From: yjacolin at free.fr (Yves Jacolin)
Date: Fri, 04 Jan 2013 10:50:38 +0100
Subject: [gdal-dev] ogr2ogr
In-Reply-To: <50E6A531.6090709@routeware.dk>
References: <50E6A531.6090709@routeware.dk>
Message-ID: <7670662.Zzc5AW7EjX@helios>

Hello,

You see this website : http://www.gisinternals.com/sdk/

or this one : http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries
(see Windows and OSGeo4W sections).

Y.
Le vendredi 4 janvier 2013 10:47:29 Uffe Kousgaard a ?crit :
> Where can I find the most recent precompiled ogr2ogr package for windows?
> 
> I am still using the one in fwtools 2.4.7 (almost 3 years old) and I
> have some utf-8 encoded SHP files, which it doesn't seem to handle well.
> I have tried with cpg files, but no luck.
> 
> Regards
> Uffe Kousgaard
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-- 
Yves Jacolin

From uffe at routeware.dk  Fri Jan  4 02:17:43 2013
From: uffe at routeware.dk (Uffe Kousgaard)
Date: Fri, 04 Jan 2013 11:17:43 +0100
Subject: [gdal-dev] ogr2ogr
In-Reply-To: <7670662.Zzc5AW7EjX@helios>
References: <50E6A531.6090709@routeware.dk> <7670662.Zzc5AW7EjX@helios>
Message-ID: <50E6AC47.5040705@routeware.dk>

Hello,

Thank you, yes I had just found the exe files in a sub folder.

But it still doesn't write the TAB file correct.

If I use MIF instead as output format, it changes Numeric(4,0) fields 
into Integer(4). There is no such thing as Integer(4) in MIF.

It is either Decimal(4,0) or just Integer / SmallInt. But at least the 
UTF-8 strings come out correct.

So, it seems like being a matter of incorrect writing of TAB and MIF 
rather than reading the SHP and codepage.

Regards
Uffe Kousgaard

Yves Jacolin wrote:
> Hello,
>
> You see this website : http://www.gisinternals.com/sdk/
>
> or this one : http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries
> (see Windows and OSGeo4W sections).
>
> Y.
> Le vendredi 4 janvier 2013 10:47:29 Uffe Kousgaard a ?crit :
>   
>> Where can I find the most recent precompiled ogr2ogr package for windows?
>>
>> I am still using the one in fwtools 2.4.7 (almost 3 years old) and I
>> have some utf-8 encoded SHP files, which it doesn't seem to handle well.
>> I have tried with cpg files, but no luck.
>>
>> Regards
>> Uffe Kousgaard
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>     

From yjacolin at free.fr  Fri Jan  4 02:27:47 2013
From: yjacolin at free.fr (Yves Jacolin)
Date: Fri, 04 Jan 2013 11:27:47 +0100
Subject: [gdal-dev] ogr2ogr
In-Reply-To: <50E6AC47.5040705@routeware.dk>
References: <50E6A531.6090709@routeware.dk> <7670662.Zzc5AW7EjX@helios>
	<50E6AC47.5040705@routeware.dk>
Message-ID: <7758312.549k98HYCh@helios>

Hello,

Le vendredi 4 janvier 2013 11:17:43 Uffe Kousgaard a ?crit :
> Hello,
> 
> Thank you, yes I had just found the exe files in a sub folder.
> 
> But it still doesn't write the TAB file correct.
> 
> If I use MIF instead as output format, it changes Numeric(4,0) fields
> into Integer(4). There is no such thing as Integer(4) in MIF.
> 
> It is either Decimal(4,0) or just Integer / SmallInt. But at least the
> UTF-8 strings come out correct.
> 
> So, it seems like being a matter of incorrect writing of TAB and MIF
> rather than reading the SHP and codepage.

Yes I am aware of this issue. Some french user report this a few monthes ago, 
there are some other similar issues with TAB format.

Y.
-- 
Yves Jacolin

From uffe at routeware.dk  Fri Jan  4 02:37:57 2013
From: uffe at routeware.dk (Uffe Kousgaard)
Date: Fri, 04 Jan 2013 11:37:57 +0100
Subject: [gdal-dev] DBF handling
Message-ID: <50E6B105.60508@routeware.dk>

When DBF files has numeric fields with values > 2GB, processing fails 
and all values come out as -2147483648.

My current work-around is manually changing the fields from Numeric to 
Char (changing the header of the DBF), but it is really an ugly hack and 
spaces for padding are wrong (numeric fields are right-aligned, while 
char-fields are left-aligned internally).

It would be nice if at least int64 was used for integers in OGR, rather 
than int32. Large integers are typically used as identifiers in 
databases such as TomTom, OSM etc.

Has this been reported before?


Regards
Uffe Kousgaard


From nhv at cape.com  Fri Jan  4 02:57:28 2013
From: nhv at cape.com (Norman Vine)
Date: Fri, 4 Jan 2013 05:57:28 -0500
Subject: [gdal-dev] DBF handling
In-Reply-To: <50E6B105.60508@routeware.dk>
References: <50E6B105.60508@routeware.dk>
Message-ID: <6A8E7A07-1F92-49C3-8A20-7B1429518B87@cape.com>


On Jan 4, 2013, at 5:37 AM, Uffe Kousgaard <uffe at routeware.dk> wrote:

> When DBF files has numeric fields with values > 2GB, processing fails and all values come out as -2147483648.
> 
> My current work-around is manually changing the fields from Numeric to Char (changing the header of the DBF), but it is really an ugly hack and spaces for padding are wrong (numeric fields are right-aligned, while char-fields are left-aligned internally).
> 
> It would be nice if at least int64 was used for integers in OGR, rather than int32. Large integers are typically used as identifiers in databases such as TomTom, OSM etc.
> 
> Has this been reported before?

This is a well known feature

see
http://www.clicketyclick.dk/databases/xbase/format/data_types.html

solution 
use something like spatialite instead of shape files 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130104/fdb32b8a/attachment.html>

From uffe at routeware.dk  Fri Jan  4 03:19:12 2013
From: uffe at routeware.dk (Uffe Kousgaard)
Date: Fri, 04 Jan 2013 12:19:12 +0100
Subject: [gdal-dev] DBF handling
In-Reply-To: <6A8E7A07-1F92-49C3-8A20-7B1429518B87@cape.com>
References: <50E6B105.60508@routeware.dk>
	<6A8E7A07-1F92-49C3-8A20-7B1429518B87@cape.com>
Message-ID: <50E6BAB0.30207@routeware.dk>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130104/9328ff99/attachment-0001.html>

From even.rouault at mines-paris.org  Fri Jan  4 03:54:28 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 04 Jan 2013 12:54:28 +0100
Subject: [gdal-dev] DBF handling
In-Reply-To: <50E6B105.60508@routeware.dk>
References: <50E6B105.60508@routeware.dk>
Message-ID: <1357300468.50e6c2f41780f@imp.free.fr>

Selon Uffe Kousgaard <uffe at routeware.dk>:

> When DBF files has numeric fields with values > 2GB, processing fails
> and all values come out as -2147483648.
>
> My current work-around is manually changing the fields from Numeric to
> Char (changing the header of the DBF), but it is really an ugly hack and
> spaces for padding are wrong (numeric fields are right-aligned, while
> char-fields are left-aligned internally).
>
> It would be nice if at least int64 was used for integers in OGR, rather
> than int32. Large integers are typically used as identifiers in
> databases such as TomTom, OSM etc.
>
> Has this been reported before?

Yes, this is a known issue that should be fixed in a future version (GDAL 2.0 ?)
when support for 64bit integers is added (
http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64) . There's no software workaround
on OGR side for now.

>
>
> Regards
> Uffe Kousgaard
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From dmorissette at mapgears.com  Fri Jan  4 04:58:20 2013
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri, 04 Jan 2013 07:58:20 -0500
Subject: [gdal-dev] ogr2ogr
In-Reply-To: <50E6AC47.5040705@routeware.dk>
References: <50E6A531.6090709@routeware.dk> <7670662.Zzc5AW7EjX@helios>
	<50E6AC47.5040705@routeware.dk>
Message-ID: <50E6D1EC.7040300@mapgears.com>

As Yves pointed out, this is a known issue, actually a regression in the 
MITAB driver introduced in GDAL 1.9.x:

  https://trac.osgeo.org/gdal/ticket/3853

Daniel


On 13-01-04 5:17 AM, Uffe Kousgaard wrote:
> Hello,
>
> Thank you, yes I had just found the exe files in a sub folder.
>
> But it still doesn't write the TAB file correct.
>
> If I use MIF instead as output format, it changes Numeric(4,0) fields
> into Integer(4). There is no such thing as Integer(4) in MIF.
>
> It is either Decimal(4,0) or just Integer / SmallInt. But at least the
> UTF-8 strings come out correct.
>
> So, it seems like being a matter of incorrect writing of TAB and MIF
> rather than reading the SHP and codepage.
>
> Regards
> Uffe Kousgaard
>
> Yves Jacolin wrote:
>> Hello,
>>
>> You see this website : http://www.gisinternals.com/sdk/
>>
>> or this one : http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries
>> (see Windows and OSGeo4W sections).
>>
>> Y.
>> Le vendredi 4 janvier 2013 10:47:29 Uffe Kousgaard a ?crit :
>>> Where can I find the most recent precompiled ogr2ogr package for
>>> windows?
>>>
>>> I am still using the one in fwtools 2.4.7 (almost 3 years old) and I
>>> have some utf-8 encoded SHP files, which it doesn't seem to handle well.
>>> I have tried with cpg files, but no luck.
>>>
>>> Regards
>>> Uffe Kousgaard
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000


From sigfrido at tiscali.it  Fri Jan  4 05:11:59 2013
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Fri, 04 Jan 2013 14:11:59 +0100
Subject: [gdal-dev] DBF handling
In-Reply-To: <50E6B105.60508@routeware.dk>
References: <50E6B105.60508@routeware.dk>
Message-ID: <1357305119.2408.5.camel@GOLEM>

Uffe,

I have had a similar problems with TeleAtlas shapefiles with IDs stored
as long Numeric fields.

I resorted to the ogr2ogr -fieldTypeToString option [1] to tell ogr to
convert to string all the mumeric fields, which is still an imperfect
workaround but at least will keep you from manually changing the DBF
files. Unfortunately the conversion is applied to all the field of the
specified type.

Hope this helps

Sig

[1] http://www.gdal.org/ogr2ogr.html

Il giorno ven, 04/01/2013 alle 11.37 +0100, Uffe Kousgaard ha scritto:
> When DBF files has numeric fields with values > 2GB, processing fails 
> and all values come out as -2147483648.
> 
> My current work-around is manually changing the fields from Numeric to 
> Char (changing the header of the DBF), but it is really an ugly hack and 
> spaces for padding are wrong (numeric fields are right-aligned, while 
> char-fields are left-aligned internally).
> 
> It would be nice if at least int64 was used for integers in OGR, rather 
> than int32. Large integers are typically used as identifiers in 
> databases such as TomTom, OSM etc.
> 
> Has this been reported before?
> 
> 
> Regards
> Uffe Kousgaard
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


_____________
PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).

PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).

From uffe at routeware.dk  Fri Jan  4 05:41:40 2013
From: uffe at routeware.dk (Uffe Kousgaard)
Date: Fri, 04 Jan 2013 14:41:40 +0100
Subject: [gdal-dev] DBF handling
In-Reply-To: <1357305119.2408.5.camel@GOLEM>
References: <50E6B105.60508@routeware.dk> <1357305119.2408.5.camel@GOLEM>
Message-ID: <50E6DC14.9040707@routeware.dk>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130104/ca075525/attachment.html>

From even.rouault at mines-paris.org  Fri Jan  4 05:53:30 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 04 Jan 2013 14:53:30 +0100
Subject: [gdal-dev] DBF handling
In-Reply-To: <1357305119.2408.5.camel@GOLEM>
References: <50E6B105.60508@routeware.dk> <1357305119.2408.5.camel@GOLEM>
Message-ID: <1357307610.50e6deda6c14d@imp.free.fr>

Selon Luca Sigfrido Percich <sigfrido at tiscali.it>:

> Uffe,
>
> I have had a similar problems with TeleAtlas shapefiles with IDs stored
> as long Numeric fields.
>
> I resorted to the ogr2ogr -fieldTypeToString option [1] to tell ogr to
> convert to string all the mumeric fields, which is still an imperfect
> workaround but at least will keep you from manually changing the DBF
> files. Unfortunately the conversion is applied to all the field of the
> specified type.

Luca,

I doubt very much that this works. -fieldTypeToString is a post processing
option. In the case reported by Uffe, the data loss occurs in the shapefile
driver itself. -fieldTypeToString occurs too late here. -fieldTypeToString is
mostly usefull in situations where "odd" data types (such as datetime,
string/integer/real lists) aren't handled by the output driver.

From sigfrido at tiscali.it  Fri Jan  4 06:27:47 2013
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Fri, 04 Jan 2013 15:27:47 +0100
Subject: [gdal-dev] DBF handling
In-Reply-To: <1357307610.50e6deda6c14d@imp.free.fr>
References: <50E6B105.60508@routeware.dk> <1357305119.2408.5.camel@GOLEM>
	<1357307610.50e6deda6c14d@imp.free.fr>
Message-ID: <1357309667.2408.28.camel@GOLEM>

Hi Even,

thank you for the explanation.

I checked back my script, it used -fieldTypeToString real, and the
TeleAtlas shapefiles stored the ID in a real(15.0) field. That's why it
worked for me.

Sig

Il giorno ven, 04/01/2013 alle 14.53 +0100, Even Rouault ha scritto:
> Selon Luca Sigfrido Percich <sigfrido at tiscali.it>:
> 
> > Uffe,
> >
> > I have had a similar problems with TeleAtlas shapefiles with IDs stored
> > as long Numeric fields.
> >
> > I resorted to the ogr2ogr -fieldTypeToString option [1] to tell ogr to
> > convert to string all the mumeric fields, which is still an imperfect
> > workaround but at least will keep you from manually changing the DBF
> > files. Unfortunately the conversion is applied to all the field of the
> > specified type.
> 
> Luca,
> 
> I doubt very much that this works. -fieldTypeToString is a post processing
> option. In the case reported by Uffe, the data loss occurs in the shapefile
> driver itself. -fieldTypeToString occurs too late here. -fieldTypeToString is
> mostly usefull in situations where "odd" data types (such as datetime,
> string/integer/real lists) aren't handled by the output driver.


_____________
PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).

PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).

From bontepaarden at gmail.com  Sat Jan  5 07:46:00 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Sat, 5 Jan 2013 16:46:00 +0100
Subject: [gdal-dev] Looking for equivalent gdal/ogr methods
Message-ID: <CAHNf2YQr+CvnS9AzKTs+7_+z+dK9+qVuQh7zBTybKid37Age2Q@mail.gmail.com>

Hi all,

As some of you already know we are changing MapWindow GIS to let it use
more OGR/GDAL methods instead of our own/other libraries.
Until now we have 'migrated' a lot of functionality and we are very pleased
with it.

We still have a few methods left we have not yet migrated, because I'm
having trouble finding the equivalent gdal/ogr methods.
So my question is: How can I do the following tasks using GDAL/OGR.

* Convert 3D shapefile to 2D shapefile
* Clip polygon with a line (shape in a different shapefile)
* Clip shapefile with polygon (shape in a different shapefile)
* Erase shapefile with polygon (shape in a different shapefile)

We have compiled GDAL with GEOS so we can access those methods as well.

Thanks in advanced.

Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl

*
*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130105/32615811/attachment.html>

From ari.jolma at gmail.com  Sat Jan  5 08:20:19 2013
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sat, 05 Jan 2013 18:20:19 +0200
Subject: [gdal-dev] Looking for equivalent gdal/ogr methods
In-Reply-To: <CAHNf2YQr+CvnS9AzKTs+7_+z+dK9+qVuQh7zBTybKid37Age2Q@mail.gmail.com>
References: <CAHNf2YQr+CvnS9AzKTs+7_+z+dK9+qVuQh7zBTybKid37Age2Q@mail.gmail.com>
Message-ID: <50E852C3.8020906@gmail.com>

On 01/05/2013 05:46 PM, Paul Meems wrote:
> Hi all,
>
> As some of you already know we are changing MapWindow GIS to let it 
> use more OGR/GDAL methods instead of our own/other libraries.
> Until now we have 'migrated' a lot of functionality and we are very 
> pleased with it.
>
> We still have a few methods left we have not yet migrated, because I'm 
> having trouble finding the equivalent gdal/ogr methods.
> So my question is: How can I do the following tasks using GDAL/OGR.
>
> * Convert 3D shapefile to 2D shapefile
> * Clip polygon with a line (shape in a different shapefile)
> * Clip shapefile with polygon (shape in a different shapefile)
> * Erase shapefile with polygon (shape in a different shapefile)

For the last two there probably are Layer methods:

http://www.gdal.org/ogr/classOGRLayer.html

Examples here: http://trac.osgeo.org/gdal/wiki/LayerAlgebra

I'm not sure about the 2nd one.

Ari

>
> We have compiled GDAL with GEOS so we can access those methods as well.
>
> Thanks in advanced.
>
> Paul
>
> *Paul Meems *
> Release manager, configuration manager
> and forum moderator of MapWindow GIS.
> www.mapwindow.org <http://www.mapwindow.org/>
>
> Owner of MapWindow.nl - Support for
> Dutch speaking users.
> www.mapwindow.nl <http://www.mapwindow.nl/>
>
> *
> *
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130105/03947801/attachment.html>

From per.ohlson at nanight.se  Sun Jan  6 07:46:34 2013
From: per.ohlson at nanight.se (Per Ohlson)
Date: Sun, 6 Jan 2013 16:46:34 +0100
Subject: [gdal-dev] ReadRaster hangup in gdal2tiles
Message-ID: <56010599-100E-4D3E-870A-7C43E764CAAD@nanight.se>

Hi,
I'm having a bit of an issue with tiling some of my GTIFFs using the gdal2tiles-script.

Here is verbose print of the last lines:

(64, '/', 256, '/MapTiling/temp/A00022_RGBA/6/63/27.png')
('\tNative Extent (querysize', 451, '): ', (28415, 0, 451, 128), (0, 323, 451, 128))
('\tReadRaster Extent: ', (28415, 0, 451, 128), (0, 733, 1024, 291))

And here it just sits.. though still using 100% CPU on one of the cores.

I'm have been trying this with gdal 1.9, 1.92 and now built the latest code directly from the HEAD branch.

Any suggestions about what to do?
I'm using the following line to run gdal_translate:

gdal_translate -of GTiff -b 1 -b 2 -b 3 -b 4 /MapTiling/temp/A00022_RGBA.tif /MapTiling/temp/A00022_RGBA.gtiff

Regards
/Per



Per Ohlson, M.Sc. E.E.
Nanight AB - http://www.nanight.se
Stockholm/Gothenburg, Sweden
per.ohlson at nanight-tech.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130106/95490c00/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Nanight_Logo_XXS.png
Type: image/png
Size: 8962 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130106/95490c00/attachment.png>

From jukka.rahkonen at mmmtike.fi  Mon Jan  7 01:49:42 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 7 Jan 2013 09:49:42 +0000 (UTC)
Subject: [gdal-dev] Looking for equivalent gdal/ogr methods
References: <CAHNf2YQr+CvnS9AzKTs+7_+z+dK9+qVuQh7zBTybKid37Age2Q@mail.gmail.com>
Message-ID: <loom.20130107T104542-944@post.gmane.org>

Paul Meems <bontepaarden <at> gmail.com> writes:


> Hi all,
> As some of you already know we are changing MapWindow GIS to let it use more
OGR/GDAL methods instead of our own/other libraries.
> Until now we have 'migrated' a lot of functionality and we are very pleased
with it.
> We still have a few methods left we have not yet migrated, because I'm having
trouble finding the equivalent gdal/ogr methods.
> So my question is: How can I do the following tasks using GDAL/OGR.
> 
> * Convert 3D shapefile to 2D shapefile

Ogr2ogr in GDAL version 1.10 has a general switch -dim 2|3 that works with all
formats http://www.gdal.org/ogr2ogr.html. Perhaps is helps in finding how to do
the same with MapWindow GIS.

-Jukka Rahkonen-


From yggdrasil at gmx.co.uk  Tue Jan  8 15:17:15 2013
From: yggdrasil at gmx.co.uk (Johnny)
Date: Tue, 08 Jan 2013 23:17:15 +0000
Subject: [gdal-dev] OSGB36 to WGS84 transformation
Message-ID: <87sj6b2rk4.fsf@gmx.co.uk>

Hi,

I am trying to convert OSGB grid references to WGS84, but do not succeed
and don't understand why? 

I use

: echo "SD8015002109 "|gdaltransform -s_srs EPSG:27700 -t_srs EPSG:4326 

which gives 

: -7.55729138544866 49.7667307394399 50.4807807941111

If I use [1], the result is 

: 53.515279 -2.300819

which can be verified as correct on maps.

What error am I making in assuming this should work?

I use 
GDAL 1.9.1, released 2012/05/15
Fedora 17

Thanks!

Footnotes: 
[1]  http://www.nearby.org.uk/coord.cgi?p=SD8015002109&f=conv

-- 
Johnny

From sfkeller at gmail.com  Tue Jan  8 16:02:22 2013
From: sfkeller at gmail.com (Stefan Keller)
Date: Wed, 9 Jan 2013 01:02:22 +0100
Subject: [gdal-dev] New OGR driver to read OpenStreetMap .osm / .pbf
	files
In-Reply-To: <201210242014.16310.even.rouault@mines-paris.org>
References: <201207101923.32027.even.rouault@mines-paris.org>
	<1350467675.507e805ba01a0@imp.free.fr>
	<50879F86.5060000@metrico.lu>
	<201210242014.16310.even.rouault@mines-paris.org>
Message-ID: <CAFcOn2_ddU_nLmWASZVj7vUEbf_J-GXK8d=Nb8KZc7hwH4160g@mail.gmail.com>

Hi Even

Documentation of OpenStreetMap driver suggest its stable - but when I
recently installed the newest OGR version on a linux it was'nt there.
Is it not yet stable enough?
If not, what do you recommend?
Should I include the tagged version (currently 1.9.2) and add the
trunk version (subdirectory) of the OpenStreetMap driver?

Yours, Stefan


2012/10/24 Even Rouault <even.rouault at mines-paris.org>:
> Le mercredi 24 octobre 2012 09:57:58, Frank Broniewski a ?crit :
>> Hi,
>>
>> I had this up my schedule for this week, but I see I need GDAL >= 2.0.
>> Where might I get this? From svn (https://svn.osgeo.org/gdal/trunk/gdal)?
>
> Yes, svn trunk = GDAL 2.0dev.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Tue Jan  8 16:14:53 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 9 Jan 2013 01:14:53 +0100
Subject: [gdal-dev] New OGR driver to read OpenStreetMap .osm / .pbf
	files
In-Reply-To: <CAFcOn2_ddU_nLmWASZVj7vUEbf_J-GXK8d=Nb8KZc7hwH4160g@mail.gmail.com>
References: <201207101923.32027.even.rouault@mines-paris.org>
	<201210242014.16310.even.rouault@mines-paris.org>
	<CAFcOn2_ddU_nLmWASZVj7vUEbf_J-GXK8d=Nb8KZc7hwH4160g@mail.gmail.com>
Message-ID: <201301090114.53571.even.rouault@mines-paris.org>

Le mercredi 09 janvier 2013 01:02:22, Stefan Keller a ?crit :
> Hi Even
> 
> Documentation of OpenStreetMap driver suggest its stable

(Just curious what in the doc makes you call it "stable", and what you 
consider as "stable")

> - but when I
> recently installed the newest OGR version on a linux it was'nt there.
> Is it not yet stable enough?
> If not, what do you recommend?
> Should I include the tagged version (currently 1.9.2) and add the
> trunk version (subdirectory) of the OpenStreetMap driver?

Stephan,

The OSM driver is only available in the trunk version (definitely not in the 
1.9.X branch which is in maintenance mode only), the future 1.10 to be 
released (hopefully in the following weeks).

Copying the OSM directory from trunk into 1.9 will work. It won't compile 
since there are a few services in port/ that have been added in trunk and are 
needed by the OSM driver.

So if you are interested in the OSM driver, I suggest that you just check out 
and compile the trunk and use it. It passes currently the autotest regresssion 
suite on both Linux and Windows, so I consider it stable enough for wide 
testing. And we definitely need beta testers for the release anyway !

Best regards,

Even

From sfkeller at gmail.com  Tue Jan  8 17:11:21 2013
From: sfkeller at gmail.com (Stefan Keller)
Date: Wed, 9 Jan 2013 02:11:21 +0100
Subject: [gdal-dev] New OGR driver to read OpenStreetMap .osm / .pbf
	files
In-Reply-To: <201301090114.53571.even.rouault@mines-paris.org>
References: <201207101923.32027.even.rouault@mines-paris.org>
	<201210242014.16310.even.rouault@mines-paris.org>
	<CAFcOn2_ddU_nLmWASZVj7vUEbf_J-GXK8d=Nb8KZc7hwH4160g@mail.gmail.com>
	<201301090114.53571.even.rouault@mines-paris.org>
Message-ID: <CAFcOn28drCNA9ympWCcbnQji_-6TcVgh7Ju+_Ba2RatthJy5VA@mail.gmail.com>

Even,

Thanks for the fast response!

2013/1/9 Even Rouault <even.rouault at mines-paris.org>:
> (Just curious what in the doc makes you call it "stable", and what you
> consider as "stable")

Just the fact that it's there and especially that is't also in the
overview table alongside with all other (stable) drivers
http://www.gdal.org/ogr/ogr_formats.html .

Yours, Stefan


2013/1/9 Even Rouault <even.rouault at mines-paris.org>:
> Le mercredi 09 janvier 2013 01:02:22, Stefan Keller a ?crit :
>> Hi Even
>>
>> Documentation of OpenStreetMap driver suggest its stable
>
> (Just curious what in the doc makes you call it "stable", and what you
> consider as "stable")
>
>> - but when I
>> recently installed the newest OGR version on a linux it was'nt there.
>> Is it not yet stable enough?
>> If not, what do you recommend?
>> Should I include the tagged version (currently 1.9.2) and add the
>> trunk version (subdirectory) of the OpenStreetMap driver?
>
> Stephan,
>
> The OSM driver is only available in the trunk version (definitely not in the
> 1.9.X branch which is in maintenance mode only), the future 1.10 to be
> released (hopefully in the following weeks).
>
> Copying the OSM directory from trunk into 1.9 will work. It won't compile
> since there are a few services in port/ that have been added in trunk and are
> needed by the OSM driver.
>
> So if you are interested in the OSM driver, I suggest that you just check out
> and compile the trunk and use it. It passes currently the autotest regresssion
> suite on both Linux and Windows, so I consider it stable enough for wide
> testing. And we definitely need beta testers for the release anyway !
>
> Best regards,
>
> Even

From even.rouault at mines-paris.org  Tue Jan  8 17:26:32 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 9 Jan 2013 02:26:32 +0100
Subject: [gdal-dev] New OGR driver to read OpenStreetMap .osm / .pbf
	files
In-Reply-To: <CAFcOn28drCNA9ympWCcbnQji_-6TcVgh7Ju+_Ba2RatthJy5VA@mail.gmail.com>
References: <201207101923.32027.even.rouault@mines-paris.org>
	<201301090114.53571.even.rouault@mines-paris.org>
	<CAFcOn28drCNA9ympWCcbnQji_-6TcVgh7Ju+_Ba2RatthJy5VA@mail.gmail.com>
Message-ID: <201301090226.32560.even.rouault@mines-paris.org>

Le mercredi 09 janvier 2013 02:11:21, Stefan Keller a ?crit :
> Even,
> 
> Thanks for the fast response!
> 
> 2013/1/9 Even Rouault <even.rouault at mines-paris.org>:
> > (Just curious what in the doc makes you call it "stable", and what you
> > consider as "stable")
> 
> Just the fact that it's there and especially that is't also in the
> overview table alongside with all other (stable) drivers
> http://www.gdal.org/ogr/ogr_formats.html .

Ah ok, so I must mention that the online documentation is always up-to-date 
with the latest trunk version (it is refreshed each night). So the fact that 
something is documented is not a sign of stability by itself. It can be a new 
development committed just a few hours ago.

From jukka.rahkonen at mmmtike.fi  Wed Jan  9 02:33:20 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 9 Jan 2013 10:33:20 +0000 (UTC)
Subject: [gdal-dev] OSGB36 to WGS84 transformation
References: <87sj6b2rk4.fsf@gmx.co.uk>
Message-ID: <loom.20130109T112851-328@post.gmane.org>

Johnny <yggdrasil <at> gmx.co.uk> writes:

> 
> Hi,
> 
> I am trying to convert OSGB grid references to WGS84, but do not succeed
> and don't understand why? 
> 
> I use
> 
> : echo "SD8015002109 "|gdaltransform -s_srs EPSG:27700 -t_srs EPSG:4326 
> 
> which gives 
> 
> : -7.55729138544866 49.7667307394399 50.4807807941111

I get the same result with
C:\GDAL_dev>gdaltransform -s_srs EPSG:27700 -t_srs EPSG:4326
0 0
-7.55729138544866 49.7667307394399 50.4807807933539

Conclusion: gdaltransform does not understand OSGB grid references. What made
you to believe it would? I could not find anything suggesting that from the GDAL
documents.

-Jukka Rahkonen-


From s.r.kriishna at gmail.com  Wed Jan  9 02:58:42 2013
From: s.r.kriishna at gmail.com (SIVA RAMA KRISHNA)
Date: Wed, 9 Jan 2013 16:28:42 +0530
Subject: [gdal-dev] Identifying a line for dangle
Message-ID: <CAP-zkzdRH1gtyQOVruNvRSRdSfnbePGYhX6jhseYsRhqiyhsYw@mail.gmail.com>

hai to All,

I am Trying to check for a line (OGRLINESTRING) to be a dangle or not.
I am trying it out by checking each feature with remaining feature where
any other feature(OGRLINESTRING)
crosses its any of the node

 i am attaching a file
any help is greatly appreciated



With Regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130109/9ddd41a0/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Dangletxt.odt
Type: application/vnd.oasis.opendocument.text
Size: 14052 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130109/9ddd41a0/attachment-0001.odt>

From peifer at gmx.eu  Wed Jan  9 03:37:06 2013
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed, 09 Jan 2013 09:37:06 -0200
Subject: [gdal-dev] OSGB36 to WGS84 transformation
In-Reply-To: <87sj6b2rk4.fsf@gmx.co.uk>
References: <87sj6b2rk4.fsf@gmx.co.uk>
Message-ID: <50ED5662.3010609@gmx.eu>


The lower left corner coordinates of the SD square are:
300 000 metres East
400 000 metres North

So your test coordinate is at (Easting Northing): 380150 402109

echo "380150 402109" | gdaltransform -s_srs EPSG:27700 -t_srs EPSG:4326
-2.30083027968938 53.5152719980087 48.8662291513756

Please note that behind the scenes, these datum shift parameters are 
applied: +towgs84=375,-111,431,0,0,0,0 (which might be what you want .. 
or not).

Hermann


On 2013-01-08 21:17, Johnny wrote:
> Hi,
>
> I am trying to convert OSGB grid references to WGS84, but do not succeed
> and don't understand why?
>
> I use
>
> : echo "SD8015002109 "|gdaltransform -s_srs EPSG:27700 -t_srs EPSG:4326
>
> which gives
>
> : -7.55729138544866 49.7667307394399 50.4807807941111
>
> If I use [1], the result is
>
> : 53.515279 -2.300819
>
> which can be verified as correct on maps.
>
> What error am I making in assuming this should work?
>
> I use
> GDAL 1.9.1, released 2012/05/15
> Fedora 17
>
> Thanks!
>
> Footnotes:
> [1]  http://www.nearby.org.uk/coord.cgi?p=SD8015002109&f=conv
>


From Michael.Smith at maine.gov  Wed Jan  9 08:33:27 2013
From: Michael.Smith at maine.gov (Smith, Michael)
Date: Wed, 9 Jan 2013 16:33:27 +0000
Subject: [gdal-dev] substitute pixel values
Message-ID: <8927DBC1C0E7CB4A9823B7478829091D129E53@OIT-TEAQEXMBX01.som.w2k.state.me.us>

I have some DEMs that are created from lidar.  For reasons related to seeing currents and wind effect, we did not ask for the water to be flattened, but rather it shows waves.  This is cool, and what we wanted.  BUT of course now we want to create a second set of DEMs with a  nice flat ocean.

I have numerous pixels out in the ocean which are slightly less than 0.  So how does one select out all pixels < 0 and substitute them with 0 with GDAL?

===============================
Michael Smith MS GISP
State GIS Manager, Maine Office of GIS
State of Maine, Office of Information Technology
michael.smith _at_ maine.gov
207-215-5530

Board Member, Maine GeoLibrary
Education Chair, Maine GIS Users Group
State Rep, National States Geographic Information Council
[cid:image001.png at 01CDEE5D.23EB12F0][icons]

***NOTE NEW ADDRESS***

State House Station 145
51 Commerce Drive
Augusta, ME 04333-0145
69o 47' 58.9"W  44o 21' 54.8"N
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130109/108ce5ac/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 198 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130109/108ce5ac/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 9032 bytes
Desc: image002.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130109/108ce5ac/attachment.jpg>

From ivan.lucena at princeton-ma.us  Wed Jan  9 08:44:34 2013
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Wed, 09 Jan 2013 11:44:34 -0500
Subject: [gdal-dev] =?iso-8859-1?q?substitute_pixel_values?=
In-Reply-To: <8927DBC1C0E7CB4A9823B7478829091D129E53@OIT-TEAQEXMBX01.som.w2k.state.me.us>
References: <8927DBC1C0E7CB4A9823B7478829091D129E53@OIT-TEAQEXMBX01.som.w2k.state.me.us>
Message-ID: <20130109164434.24495.qmail@s466.sureserver.com>

Hi Michael,

It seems like it would be better to mask out with a Land/Sea image 'cause you don't want to loose part of your shore that might be lower then the waves.

Well, I might be wrong. I haven't been at the beach for a long time :)

Regards,

Ivan

-------Original Message-------
  From: Smith, Michael
  To: gdal-dev at lists.osgeo.org
  Subject: [gdal-dev] substitute pixel values
  Sent: Jan 09 '13 11:33


I have some DEMs that are created from lidar.  For reasons related to
seeing currents and wind effect, we did not ask for the water to be
flattened, but rather it shows waves.  This is cool, and what we wanted.
BUT of course now we want   to create a second set of DEMs with a  nice
flat ocean.


I have numerous pixels out in the ocean which are slightly less than 0.  So
how does one select out all pixels < 0 and substitute them with 0 with
GDAL?


===============================
  MICHAEL SMITH MS GISP
  State GIS Manager, Maine Office of GIS
  State of Maine, Office of Information Technology
  michael.smith _at_ maine.gov
  207-215-5530

  Board Member, Maine GeoLibrary
  Education Chair, Maine GIS Users Group
  State Rep, National States Geographic Information Council
  [IMAGE: icons]

  ***NOTE NEW ADDRESS***

  State House Station 145
  51 Commerce Drive
  Augusta, ME 04333-0145
  69^o 47' 58.9"W  44^o 21' 54.8"N
          --------------------
_______________________________________________
  gdal-dev mailing list
  [LINK: compose.php?to=gdal-dev at lists.osgeo.org] gdal-dev at lists.osgeo.org
  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 198 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130109/7a2ac336/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 9032 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130109/7a2ac336/attachment-0001.jpg>

From traviskirstine at gmail.com  Wed Jan  9 08:53:28 2013
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Wed, 9 Jan 2013 11:53:28 -0500
Subject: [gdal-dev] substitute pixel values
In-Reply-To: <8927DBC1C0E7CB4A9823B7478829091D129E53@OIT-TEAQEXMBX01.som.w2k.state.me.us>
References: <8927DBC1C0E7CB4A9823B7478829091D129E53@OIT-TEAQEXMBX01.som.w2k.state.me.us>
Message-ID: <CALtm4h0RGQk0nSCEa+EjYmfUCbnWE8UbfyN10f6FpJHG35FQgg@mail.gmail.com>

Michael,

I'm not sure if you can do this using one of the existing utilities, you
may be able to do this my creating a virtual file (gdalbuildvrt) and
modifying it see - http://www.gdal.org/gdal_vrttut.html, but I have not
attempted this.  An alternative is to do this using the API and something
like numpy to choose and rewrite pixel values.
See the following for a example in python
http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/val_repl.py




On 9 January 2013 11:33, Smith, Michael <Michael.Smith at maine.gov> wrote:

>  I have some DEMs that are created from lidar.  For reasons related to
> seeing currents and wind effect, we did not ask for the water to be
> flattened, but rather it shows waves.  This is cool, and what we wanted.
> BUT of course now we want to create a second set of DEMs with a  nice flat
> ocean.****
>
> ** **
>
> I have numerous pixels out in the ocean which are slightly less than 0.
> So how does one select out all pixels < 0 and substitute them with 0 with
> GDAL?  ****
>
> ** **
>
> ===============================
> *Michael Smith MS GISP*
> State GIS Manager, Maine Office of GIS
> State of Maine, Office of Information Technology
> michael.smith _at_ maine.gov
> 207-215-5530
>
> Board Member, Maine GeoLibrary
> Education Chair, Maine GIS Users Group
> State Rep, National States Geographic Information Council
> ****[image: icons]
>
> ***NOTE NEW ADDRESS***
>
> State House Station 145
> 51 Commerce Drive
> Augusta, ME 04333-0145
> 69o 47' 58.9"W  44o 21' 54.8"N****
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130109/fee3cde3/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 198 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130109/fee3cde3/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 9032 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130109/fee3cde3/attachment.jpg>

From jluis at ualg.pt  Wed Jan  9 09:08:47 2013
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed, 09 Jan 2013 17:08:47 +0000
Subject: [gdal-dev] substitute pixel values
In-Reply-To: <CALtm4h0RGQk0nSCEa+EjYmfUCbnWE8UbfyN10f6FpJHG35FQgg@mail.gmail.com>
References: <8927DBC1C0E7CB4A9823B7478829091D129E53@OIT-TEAQEXMBX01.som.w2k.state.me.us>
	<CALtm4h0RGQk0nSCEa+EjYmfUCbnWE8UbfyN10f6FpJHG35FQgg@mail.gmail.com>
Message-ID: <50EDA41F.7030003@ualg.pt>

Sorry to come out so often with GMT solutions in this GDAL list but 
somethings are so trivial there.

If you can trust that all your negative values are (mean)seawater, this 
will do the job

grdclip yourGrid -Sb0/0 -Gclipped_grid.nc

Note, one need the dev GMT5 version to read all grid formats through 
GDAL, otherwise (GMT4) "yourGrid" should be netCDF

Joaquim

> Michael,
>
> I'm not sure if you can do this using one of the existing utilities, 
> you may be able to do this my creating a virtual file (gdalbuildvrt) 
> and modifying it see - http://www.gdal.org/gdal_vrttut.html, but I 
> have not attempted this.  An alternative is to do this using the API 
> and something like numpy to choose and rewrite pixel values.
> See the following for a example in python 
> http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/val_repl.py
>
>
>
>
> On 9 January 2013 11:33, Smith, Michael <Michael.Smith at maine.gov 
> <mailto:Michael.Smith at maine.gov>> wrote:
>
>     I have some DEMs that are created from lidar.  For reasons related
>     to seeing currents and wind effect, we did not ask for the water
>     to be flattened, but rather it shows waves.  This is cool, and
>     what we wanted.  BUT of course now we want to create a second set
>     of DEMs with a  nice flat ocean.
>
>     I have numerous pixels out in the ocean which are slightly less
>     than 0.  So how does one select out all pixels < 0 and substitute
>     them with 0 with GDAL?
>
>     ===============================
>     *Michael Smith MS GISP*
>     State GIS Manager, Maine Office of GIS
>     State of Maine, Office of Information Technology
>     michael.smith _at_ maine.gov <http://maine.gov>
>     207-215-5530 <tel:207-215-5530>
>
>     Board Member, Maine GeoLibrary
>     Education Chair, Maine GIS Users Group
>     State Rep, National States Geographic Information Council
>     icons
>
>     ***NOTE NEW ADDRESS***
>
>     State House Station 145
>     51 Commerce Drive
>     Augusta, ME 04333-0145
>     69^o 47' 58.9"W  44^o 21' 54.8"N
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130109/03fed3c2/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/png
Size: 198 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130109/03fed3c2/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 9032 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130109/03fed3c2/attachment-0001.jpe>

From thare at usgs.gov  Wed Jan  9 09:14:16 2013
From: thare at usgs.gov (Hare, Trent)
Date: Wed, 9 Jan 2013 10:14:16 -0700
Subject: [gdal-dev] substitute pixel values
In-Reply-To: <8927DBC1C0E7CB4A9823B7478829091D129E53@OIT-TEAQEXMBX01.som.w2k.state.me.us>
References: <8927DBC1C0E7CB4A9823B7478829091D129E53@OIT-TEAQEXMBX01.som.w2k.state.me.us>
Message-ID: <CAB6t5t86hJ53y+=poN9zxN+6qqiakRaHvGOvJnpU_02kfY6G9Q@mail.gmail.com>

Micheal,
   Check out repl_val.py in the GDAL/python samples.
http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/

Changing it slightly you can do what you want.

original replace single value:
        scanline = numpy.choose( numpy.equal( scanline, inNoData),
                                      (scanline, outNoData) )

"Greater"
        scanline = numpy.choose( numpy.*greater*( scanline, inNoData),
                                       (scanline, outNoData) )

"Less"
        scanline = numpy.choose( numpy.*less*( scanline, inNoData),
                                       (scanline, outNoData) )


Does that help?

-Trent




On Wed, Jan 9, 2013 at 9:33 AM, Smith, Michael <Michael.Smith at maine.gov>wrote:

>  I have some DEMs that are created from lidar.  For reasons related to
> seeing currents and wind effect, we did not ask for the water to be
> flattened, but rather it shows waves.  This is cool, and what we wanted.
> BUT of course now we want to create a second set of DEMs with a  nice flat
> ocean.****
>
> ** **
>
> I have numerous pixels out in the ocean which are slightly less than 0.
> So how does one select out all pixels < 0 and substitute them with 0 with
> GDAL?  ****
>
> ** **
>
> ===============================
> *Michael Smith MS GISP*
> State GIS Manager, Maine Office of GIS
> State of Maine, Office of Information Technology
> michael.smith _at_ maine.gov
> 207-215-5530
>
> Board Member, Maine GeoLibrary
> Education Chair, Maine GIS Users Group
> State Rep, National States Geographic Information Council
> ****[image: icons]
>
> ***NOTE NEW ADDRESS***
>
> State House Station 145
> 51 Commerce Drive
> Augusta, ME 04333-0145
> 69o 47' 58.9"W  44o 21' 54.8"N****
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130109/82288657/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 9032 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130109/82288657/attachment.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 198 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130109/82288657/attachment.png>

From rush at winkey.org  Wed Jan  9 09:26:06 2013
From: rush at winkey.org (Brian Case)
Date: Wed, 09 Jan 2013 09:26:06 -0800
Subject: [gdal-dev] substitute pixel values
In-Reply-To: <8927DBC1C0E7CB4A9823B7478829091D129E53@OIT-TEAQEXMBX01.som.w2k.state.me.us>
References: <8927DBC1C0E7CB4A9823B7478829091D129E53@OIT-TEAQEXMBX01.som.w2k.state.me.us>
Message-ID: <1357752366.24723.7.camel@localhost>

hey Michael

i have done this with a vrt.

you can use a <lut>

The ComplexSource supports adding a custom lookup table to transform the
source values to the destination. The LUT can be specified using the
following form:

    <LUT>[src value 1]:[dest value 1],[src value 2]:[dest value
2],...</LUT>


http://www.gdal.org/gdal_vrttut.html


you should also keep in mind gdal will not know the difference between -
values in death valley and - values in the ocean

Brian

On Wed, 2013-01-09 at 16:33 +0000, Smith, Michael wrote:
> I have some DEMs that are created from lidar.  For reasons related to
> seeing currents and wind effect, we did not ask for the water to be
> flattened, but rather it shows waves.  This is cool, and what we
> wanted.  BUT of course now we want to create a second set of DEMs with
> a  nice flat ocean.
> 
>  
> 
> I have numerous pixels out in the ocean which are slightly less than
> 0.  So how does one select out all pixels < 0 and substitute them with
> 0 with GDAL?  
> 
>  
> 
> ===============================
> Michael Smith MS GISP
> State GIS Manager, Maine Office of GIS
> State of Maine, Office of Information Technology
> michael.smith _at_ maine.gov
> 207-215-5530
> 
> Board Member, Maine GeoLibrary
> Education Chair, Maine GIS Users Group
> State Rep, National States Geographic Information Council
> icons
> 
> ***NOTE NEW ADDRESS***
> 
> State House Station 145
> 51 Commerce Drive
> Augusta, ME 04333-0145
> 69o 47' 58.9"W  44o 21' 54.8"N
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Brian Case
KF7WPK
rush at winkey.org



From yggdrasil at gmx.co.uk  Wed Jan  9 10:18:43 2013
From: yggdrasil at gmx.co.uk (Johnny)
Date: Wed, 09 Jan 2013 18:18:43 +0000
Subject: [gdal-dev] OSGB36 to WGS84 transformation
In-Reply-To: <loom.20130109T112851-328@post.gmane.org> (Jukka Rahkonen's
	message of "Wed, 9 Jan 2013 10:33:20 +0000 (UTC)")
References: <87sj6b2rk4.fsf@gmx.co.uk>
	<loom.20130109T112851-328@post.gmane.org>
Message-ID: <877gnm2pa4.fsf@gmx.co.uk>

Jukka Rahkonen <jukka.rahkonen at mmmtike.fi> writes:

> Johnny <yggdrasil <at> gmx.co.uk> writes:
>> 
>> I am trying to convert OSGB grid references to WGS84, but do not succeed
>> and don't understand why? 
>
> Conclusion: gdaltransform does not understand OSGB grid references. What made
> you to believe it would? I could not find anything suggesting that from the GDAL
> documents.
>
I was hoping to be able to batch process a file of OSGB grid references
using the EPSG:27700 code, but with my limited knowledge I had not
realised that OSGB can also be defined with the eastings northings. I
also had no luck finding any references on how to achieve this, hence
asking here on any experience of achieving this. 

Thanks,

Johnny

-- 
Johnny

From yggdrasil at gmx.co.uk  Wed Jan  9 10:13:45 2013
From: yggdrasil at gmx.co.uk (Johnny)
Date: Wed, 09 Jan 2013 18:13:45 +0000
Subject: [gdal-dev] OSGB36 to WGS84 transformation
In-Reply-To: <50ED5662.3010609@gmx.eu> (Hermann Peifer's message of "Wed, 09
	Jan 2013 09:37:06 -0200")
References: <87sj6b2rk4.fsf@gmx.co.uk> <50ED5662.3010609@gmx.eu>
Message-ID: <87bocy2pie.fsf@gmx.co.uk>

Thanks Hermann, 

Hermann Peifer <peifer at gmx.eu> writes:

> The lower left corner coordinates of the SD square are:
> 300 000 metres East
> 400 000 metres North
>
> So your test coordinate is at (Easting Northing): 380150 402109
>
> echo "380150 402109" | gdaltransform -s_srs EPSG:27700 -t_srs EPSG:4326
> -2.30083027968938 53.5152719980087 48.8662291513756
>

This led me to understand how to do the transformation based on the
easting northings derived from the OSGB definition and it then gives the
expected result. From [1] I get the explanation of the converstion of
the squares. 

Are you aware of any way to batch process this in Linux to enable swift
conversion of multiple references? 

> Please note that behind the scenes, these datum shift parameters are
> applied: +towgs84=375,-111,431,0,0,0,0 (which might be what you want
> .. or not).

Sorry, I don't know much about cartography and datums, but guess these
are the defaults by gdaltransform? Anyhow, it achieves what I want! :)


Regards,

Johnny

Footnotes: 
[1]  http://digimap.edina.ac.uk/webhelp/os/gazetteer_plus/grid_ref_conversion.htm

-- 
Johnny

From peifer at gmx.eu  Wed Jan  9 11:47:57 2013
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed, 09 Jan 2013 17:47:57 -0200
Subject: [gdal-dev] OSGB36 to WGS84 transformation
In-Reply-To: <87bocy2pie.fsf@gmx.co.uk>
References: <87sj6b2rk4.fsf@gmx.co.uk> <50ED5662.3010609@gmx.eu>
	<87bocy2pie.fsf@gmx.co.uk>
Message-ID: <50EDC96D.8090307@gmx.eu>

On 2013-01-09 16:13, Johnny wrote:
>
> Are you aware of any way to batch process this in Linux to enable swift
> conversion of multiple references?
>

You'd need a script that maps the 2-letter grid cell identifiers to the 
respective offsets, then calculates the Easting and Northing values. I 
can send you an example off-list.

>> Please note that behind the scenes, these datum shift parameters are
>> applied: +towgs84=375,-111,431,0,0,0,0 (which might be what you want
>> .. or not).
>
> Sorry, I don't know much about cartography and datums, but guess these
> are the defaults by gdaltransform? Anyhow, it achieves what I want! :)

Indeed, these are the default values for a 3-parameter transformation 
(I'm using GDAL 1.9.2).

On page 33 of [1], OSGB gives the values for a 7-parameter 
transformation which should be more accurate in most cases. You have to 
revert the signs of the given values and use them like this: 
+towgs84=446.448,-125.157,542.06,0.1502,0.247,0.8421,-20.4894

And there is OSGB's grid shift file at [2] which leads to even more 
accurate results.

Hermann


[1] 
http://www.ordnancesurvey.co.uk/oswebsite/gps/docs/A_Guide_to_Coordinate_Systems_in_Great_Britain.pdf 


[2] 
http://www.ordnancesurvey.co.uk/oswebsite/gps/osnetfreeservices/furtherinfo/ostn02_ntv2.html

>
>
> Regards,
>
> Johnny
>
> Footnotes:
> [1]  http://digimap.edina.ac.uk/webhelp/os/gazetteer_plus/grid_ref_conversion.htm
>


From lzzgeo at yahoo.cn  Thu Jan 10 07:26:55 2013
From: lzzgeo at yahoo.cn (lzzgeo at yahoo.cn)
Date: Thu, 10 Jan 2013 15:26:55 +0000 (GMT)
Subject: [gdal-dev] (no subject)
Message-ID: <478322.11724.bm@smtp146.mail.ukl.yahoo.com>


http://etrange-nuitenchantee.com/market/aGet%20Rich!%20Make%20Money%20Fast%20and%20Get%20Rich%20Quick


From jason.greenlaw at noaa.gov  Thu Jan 10 09:20:53 2013
From: jason.greenlaw at noaa.gov (Jason Greenlaw - NOAA Affiliate)
Date: Thu, 10 Jan 2013 12:20:53 -0500
Subject: [gdal-dev] Reprojecting GeoTIFFs with Overviews?
Message-ID: <CAAoP0Jwm4VAXONY00OoHAjVPOVZUj3PnUzuH7hyHq2TkhMLqgQ@mail.gmail.com>

Using gdalwarp I'm attempting to reproject a 4-band (RGBA) GeoTIFF (in
EPSG:4269) containing 4 overviews to web mercator (EPSG:3857).  While the
reprojection seems to work fine for the image itself, it appears the
overviews are not being reprojected/carried over to the new reprojected
GeoTIFF.

I've tried specifying -co COPY_SRC_OVERVIEWS=YES to gdalwarp, but it still
results in the overviews being lost.

I am using GDAL 1.9.2.

Is this the expected behavior?  Is there perhaps some way to ask gdalwarp
to also reproject the overviews?  Or do I have to reproject each overview
individually, then merge them into a single GeoTIFF with gdal_translate?

Any help/information would be greatly appreciated.

Here is the gdalwarp command I'm using (esri-3857.prf contains custom
EPSG:3857 WKT to be compatible with ESRI software):

---------------------------------------------------------------------
gdalwarp -s_srs EPSG:4269 -t_srs esri-3857.prf -r bilinear -co COMPRESS=LZW
-co COPY_SRC_OVERVIEWS=YES -overwrite NGOFS_WL_4269.tif NGOFS_WL_3857.tif
---------------------------------------------------------------------

Below are the output of gdalinfo for both the source and reprojected
GeoTIFFs.

---------------------------------------------------------------------
$ gdalinfo NGOFS_WL_4269.tif
Driver: GTiff/GeoTIFF
Files: NGOFS_WL_4269.tif
Size is 3000, 1255
Coordinate System is `'
Origin = (-97.401951999999994,30.701952500000001)
Pixel Size = (0.003900000000000,-0.003903000000000)
Image Structure Metadata:
  COMPRESSION=LZW
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  ( -97.4019520,  30.7019525)
Lower Left  ( -97.4019520,  25.8036875)
Upper Right ( -85.7019520,  30.7019525)
Lower Right ( -85.7019520,  25.8036875)
Center      ( -91.5519520,  28.2528200)
Band 1 Block=3000x1 Type=Byte, ColorInterp=Red
  Overviews: 1500x627, 750x313, 375x156, 187x78
  Mask Flags: PER_DATASET ALPHA
  Overviews of mask band: 1500x627, 750x313, 375x156, 187x78
Band 2 Block=3000x1 Type=Byte, ColorInterp=Green
  Overviews: 1500x627, 750x313, 375x156, 187x78
  Mask Flags: PER_DATASET ALPHA
  Overviews of mask band: 1500x627, 750x313, 375x156, 187x78
Band 3 Block=3000x1 Type=Byte, ColorInterp=Blue
  Overviews: 1500x627, 750x313, 375x156, 187x78
  Mask Flags: PER_DATASET ALPHA
  Overviews of mask band: 1500x627, 750x313, 375x156, 187x78
Band 4 Block=3000x1 Type=Byte, ColorInterp=Alpha
  Overviews: 1500x627, 750x313, 375x156, 187x78
---------------------------------------------------------------------
---------------------------------------------------------------------
$ gdalinfo NGOFS_WL_3857.tif
Driver: GTiff/GeoTIFF
Files: NGOFS_WL_3857.tif
Size is 2940, 1391
Coordinate System is:
PROJCS["WGS 84 / Pseudo-Mercator",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Mercator_1SP"],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0
+lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext
 +no_defs"],
    AUTHORITY["EPSG","3857"]]
Origin = (-10842735.698910875245929,3572289.254035749472678)
Pixel Size = (443.061998399919901,-443.061998399919901)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=LZW
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (-10842735.699, 3572289.254) ( 97d24' 7.03"W, 30d31'59.96"N)
Lower Left  (-10842735.699, 2955990.014) ( 97d24' 7.03"W, 25d39' 5.65"N)
Upper Right (-9540133.424, 3572289.254) ( 85d42' 1.72"W, 30d31'59.96"N)
Lower Right (-9540133.424, 2955990.014) ( 85d42' 1.72"W, 25d39' 5.65"N)
Center      (-10191434.561, 3264139.634) ( 91d33' 4.37"W, 28d 7'12.80"N)
Band 1 Block=2940x1 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA
Band 2 Block=2940x1 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA
Band 3 Block=2940x1 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA
Band 4 Block=2940x1 Type=Byte, ColorInterp=Alpha
---------------------------------------------------------------------

--
Jason Greenlaw
Contractor, ERT, Inc.
NOAA/NOS/OCS/CSDL
http://nowcoast.noaa.gov
Jason.Greenlaw at noaa.gov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130110/f0ddd8e2/attachment.html>

From nhv at cape.com  Thu Jan 10 09:37:07 2013
From: nhv at cape.com (Norman Vine)
Date: Thu, 10 Jan 2013 12:37:07 -0500
Subject: [gdal-dev] Reprojecting GeoTIFFs with Overviews?
In-Reply-To: <CAAoP0Jwm4VAXONY00OoHAjVPOVZUj3PnUzuH7hyHq2TkhMLqgQ@mail.gmail.com>
References: <CAAoP0Jwm4VAXONY00OoHAjVPOVZUj3PnUzuH7hyHq2TkhMLqgQ@mail.gmail.com>
Message-ID: <66A78A5F-A4DE-4CD6-AC8F-878F1729F099@cape.com>

Jason

you need to make overviews for the reprojected image

see 
http://www.gdal.org/gdaladdo.html



On Jan 10, 2013, at 12:20 PM, Jason Greenlaw - NOAA Affiliate <jason.greenlaw at noaa.gov> wrote:

> Using gdalwarp I'm attempting to reproject a 4-band (RGBA) GeoTIFF (in EPSG:4269) containing 4 overviews to web mercator (EPSG:3857).  While the reprojection seems to work fine for the image itself, it appears the overviews are not being reprojected/carried over to the new reprojected GeoTIFF.
> 
> I've tried specifying -co COPY_SRC_OVERVIEWS=YES to gdalwarp, but it still results in the overviews being lost.
> 
> I am using GDAL 1.9.2.
> 
> Is this the expected behavior?  Is there perhaps some way to ask gdalwarp to also reproject the overviews?  Or do I have to reproject each overview individually, then merge them into a single GeoTIFF with gdal_translate?
> 
> Any help/information would be greatly appreciated.
> 
> Here is the gdalwarp command I'm using (esri-3857.prf contains custom EPSG:3857 WKT to be compatible with ESRI software):
> 
> ---------------------------------------------------------------------
> gdalwarp -s_srs EPSG:4269 -t_srs esri-3857.prf -r bilinear -co COMPRESS=LZW -co COPY_SRC_OVERVIEWS=YES -overwrite NGOFS_WL_4269.tif NGOFS_WL_3857.tif
> ---------------------------------------------------------------------
> 
> Below are the output of gdalinfo for both the source and reprojected GeoTIFFs.
> 
> ---------------------------------------------------------------------
> $ gdalinfo NGOFS_WL_4269.tif
> Driver: GTiff/GeoTIFF
> Files: NGOFS_WL_4269.tif
> Size is 3000, 1255
> Coordinate System is `'
> Origin = (-97.401951999999994,30.701952500000001)
> Pixel Size = (0.003900000000000,-0.003903000000000)
> Image Structure Metadata:
>   COMPRESSION=LZW
>   INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  ( -97.4019520,  30.7019525)
> Lower Left  ( -97.4019520,  25.8036875)
> Upper Right ( -85.7019520,  30.7019525)
> Lower Right ( -85.7019520,  25.8036875)
> Center      ( -91.5519520,  28.2528200)
> Band 1 Block=3000x1 Type=Byte, ColorInterp=Red
>   Overviews: 1500x627, 750x313, 375x156, 187x78
>   Mask Flags: PER_DATASET ALPHA
>   Overviews of mask band: 1500x627, 750x313, 375x156, 187x78
> Band 2 Block=3000x1 Type=Byte, ColorInterp=Green
>   Overviews: 1500x627, 750x313, 375x156, 187x78
>   Mask Flags: PER_DATASET ALPHA
>   Overviews of mask band: 1500x627, 750x313, 375x156, 187x78
> Band 3 Block=3000x1 Type=Byte, ColorInterp=Blue
>   Overviews: 1500x627, 750x313, 375x156, 187x78
>   Mask Flags: PER_DATASET ALPHA
>   Overviews of mask band: 1500x627, 750x313, 375x156, 187x78
> Band 4 Block=3000x1 Type=Byte, ColorInterp=Alpha
>   Overviews: 1500x627, 750x313, 375x156, 187x78
> ---------------------------------------------------------------------
> ---------------------------------------------------------------------
> $ gdalinfo NGOFS_WL_3857.tif
> Driver: GTiff/GeoTIFF
> Files: NGOFS_WL_3857.tif
> Size is 2940, 1391
> Coordinate System is:
> PROJCS["WGS 84 / Pseudo-Mercator",
>     GEOGCS["WGS 84",
>         DATUM["WGS_1984",
>             SPHEROID["WGS 84",6378137,298.257223563,
>                 AUTHORITY["EPSG","7030"]],
>             AUTHORITY["EPSG","6326"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4326"]],
>     PROJECTION["Mercator_1SP"],
>     PARAMETER["central_meridian",0],
>     PARAMETER["scale_factor",1],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"],
>     AUTHORITY["EPSG","3857"]]
> Origin = (-10842735.698910875245929,3572289.254035749472678)
> Pixel Size = (443.061998399919901,-443.061998399919901)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   COMPRESSION=LZW
>   INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  (-10842735.699, 3572289.254) ( 97d24' 7.03"W, 30d31'59.96"N)
> Lower Left  (-10842735.699, 2955990.014) ( 97d24' 7.03"W, 25d39' 5.65"N)
> Upper Right (-9540133.424, 3572289.254) ( 85d42' 1.72"W, 30d31'59.96"N)
> Lower Right (-9540133.424, 2955990.014) ( 85d42' 1.72"W, 25d39' 5.65"N)
> Center      (-10191434.561, 3264139.634) ( 91d33' 4.37"W, 28d 7'12.80"N)
> Band 1 Block=2940x1 Type=Byte, ColorInterp=Red
>   Mask Flags: PER_DATASET ALPHA
> Band 2 Block=2940x1 Type=Byte, ColorInterp=Green
>   Mask Flags: PER_DATASET ALPHA
> Band 3 Block=2940x1 Type=Byte, ColorInterp=Blue
>   Mask Flags: PER_DATASET ALPHA
> Band 4 Block=2940x1 Type=Byte, ColorInterp=Alpha
> ---------------------------------------------------------------------
> 
> --
> Jason Greenlaw
> Contractor, ERT, Inc.
> NOAA/NOS/OCS/CSDL
> http://nowcoast.noaa.gov
> Jason.Greenlaw at noaa.gov
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130110/fecba09a/attachment-0001.html>

From jason.greenlaw at noaa.gov  Thu Jan 10 10:03:33 2013
From: jason.greenlaw at noaa.gov (Jason Greenlaw - NOAA Affiliate)
Date: Thu, 10 Jan 2013 13:03:33 -0500
Subject: [gdal-dev] Reprojecting GeoTIFFs with Overviews?
In-Reply-To: <66A78A5F-A4DE-4CD6-AC8F-878F1729F099@cape.com>
References: <CAAoP0Jwm4VAXONY00OoHAjVPOVZUj3PnUzuH7hyHq2TkhMLqgQ@mail.gmail.com>
	<66A78A5F-A4DE-4CD6-AC8F-878F1729F099@cape.com>
Message-ID: <CAAoP0JzuqOGK92cbfEPk_rtAPTCHL1XFOyQNqfrE_HYvKEKbRQ@mail.gmail.com>

Norman,

Unfortunately that's not an option - In this case, my overviews are
generated separately as individual .ovr files, e.g.:

NGOFS_WL.tif
NGOFS_WL.tif.ovr
NGOFS_WL.tif.ovr.ovr
NGOFS_WL.tif.ovr.ovr.ovr
NGOFS_WL.tif.ovr.ovr.ovr.ovr

I'm then stitching them together into a single image with gdal_translate
-co COPY_SRC_OVERVIEWS=YES  before attempting to reproject the result.

Here's an example of what it looks like:
http://jgreenlaw.org/gdal/ngofs-wl.png

In each overview, the "streaklet" arrows actually need to be rendered at
the proper resolution; I can't simply interpolate the original image.

Perhaps I'm out of luck and need to reproject each of the .ovr files and
the .tif files separately before combining them?

Jason

--
Jason Greenlaw
Contractor, ERT, Inc.
NOAA/NOS/OCS/CSDL
http://nowcoast.noaa.gov
Jason.Greenlaw at noaa.gov
(603) 862-3560


On Thu, Jan 10, 2013 at 12:37 PM, Norman Vine <nhv at cape.com> wrote:

> Jason
>
> you need to make overviews for the reprojected image
>
> see
> http://www.gdal.org/gdaladdo.html
>
>
>
> On Jan 10, 2013, at 12:20 PM, Jason Greenlaw - NOAA Affiliate <
> jason.greenlaw at noaa.gov> wrote:
>
> Using gdalwarp I'm attempting to reproject a 4-band (RGBA) GeoTIFF (in
> EPSG:4269) containing 4 overviews to web mercator (EPSG:3857).  While the
> reprojection seems to work fine for the image itself, it appears the
> overviews are not being reprojected/carried over to the new reprojected
> GeoTIFF.
>
> I've tried specifying -co COPY_SRC_OVERVIEWS=YES to gdalwarp, but it still
> results in the overviews being lost.
>
> I am using GDAL 1.9.2.
>
> Is this the expected behavior?  Is there perhaps some way to ask gdalwarp
> to also reproject the overviews?  Or do I have to reproject each overview
> individually, then merge them into a single GeoTIFF with gdal_translate?
>
> Any help/information would be greatly appreciated.
>
> Here is the gdalwarp command I'm using (esri-3857.prf contains custom
> EPSG:3857 WKT to be compatible with ESRI software):
>
> ---------------------------------------------------------------------
> gdalwarp -s_srs EPSG:4269 -t_srs esri-3857.prf -r bilinear -co
> COMPRESS=LZW -co COPY_SRC_OVERVIEWS=YES -overwrite NGOFS_WL_4269.tif
> NGOFS_WL_3857.tif
> ---------------------------------------------------------------------
>
> Below are the output of gdalinfo for both the source and reprojected
> GeoTIFFs.
>
> ---------------------------------------------------------------------
> $ gdalinfo NGOFS_WL_4269.tif
> Driver: GTiff/GeoTIFF
> Files: NGOFS_WL_4269.tif
> Size is 3000, 1255
> Coordinate System is `'
> Origin = (-97.401951999999994,30.701952500000001)
> Pixel Size = (0.003900000000000,-0.003903000000000)
> Image Structure Metadata:
>   COMPRESSION=LZW
>   INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  ( -97.4019520,  30.7019525)
> Lower Left  ( -97.4019520,  25.8036875)
> Upper Right ( -85.7019520,  30.7019525)
> Lower Right ( -85.7019520,  25.8036875)
> Center      ( -91.5519520,  28.2528200)
> Band 1 Block=3000x1 Type=Byte, ColorInterp=Red
>   Overviews: 1500x627, 750x313, 375x156, 187x78
>   Mask Flags: PER_DATASET ALPHA
>   Overviews of mask band: 1500x627, 750x313, 375x156, 187x78
> Band 2 Block=3000x1 Type=Byte, ColorInterp=Green
>   Overviews: 1500x627, 750x313, 375x156, 187x78
>   Mask Flags: PER_DATASET ALPHA
>   Overviews of mask band: 1500x627, 750x313, 375x156, 187x78
> Band 3 Block=3000x1 Type=Byte, ColorInterp=Blue
>   Overviews: 1500x627, 750x313, 375x156, 187x78
>   Mask Flags: PER_DATASET ALPHA
>   Overviews of mask band: 1500x627, 750x313, 375x156, 187x78
> Band 4 Block=3000x1 Type=Byte, ColorInterp=Alpha
>   Overviews: 1500x627, 750x313, 375x156, 187x78
> ---------------------------------------------------------------------
> ---------------------------------------------------------------------
> $ gdalinfo NGOFS_WL_3857.tif
> Driver: GTiff/GeoTIFF
> Files: NGOFS_WL_3857.tif
> Size is 2940, 1391
> Coordinate System is:
> PROJCS["WGS 84 / Pseudo-Mercator",
>     GEOGCS["WGS 84",
>         DATUM["WGS_1984",
>             SPHEROID["WGS 84",6378137,298.257223563,
>                 AUTHORITY["EPSG","7030"]],
>             AUTHORITY["EPSG","6326"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4326"]],
>     PROJECTION["Mercator_1SP"],
>     PARAMETER["central_meridian",0],
>     PARAMETER["scale_factor",1],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0
> +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext
>  +no_defs"],
>     AUTHORITY["EPSG","3857"]]
> Origin = (-10842735.698910875245929,3572289.254035749472678)
> Pixel Size = (443.061998399919901,-443.061998399919901)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   COMPRESSION=LZW
>   INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  (-10842735.699, 3572289.254) ( 97d24' 7.03"W, 30d31'59.96"N)
> Lower Left  (-10842735.699, 2955990.014) ( 97d24' 7.03"W, 25d39' 5.65"N)
> Upper Right (-9540133.424, 3572289.254) ( 85d42' 1.72"W, 30d31'59.96"N)
> Lower Right (-9540133.424, 2955990.014) ( 85d42' 1.72"W, 25d39' 5.65"N)
> Center      (-10191434.561, 3264139.634) ( 91d33' 4.37"W, 28d 7'12.80"N)
> Band 1 Block=2940x1 Type=Byte, ColorInterp=Red
>   Mask Flags: PER_DATASET ALPHA
> Band 2 Block=2940x1 Type=Byte, ColorInterp=Green
>   Mask Flags: PER_DATASET ALPHA
> Band 3 Block=2940x1 Type=Byte, ColorInterp=Blue
>   Mask Flags: PER_DATASET ALPHA
> Band 4 Block=2940x1 Type=Byte, ColorInterp=Alpha
> ---------------------------------------------------------------------
>
> --
> Jason Greenlaw
> Contractor, ERT, Inc.
> NOAA/NOS/OCS/CSDL
> http://nowcoast.noaa.gov
> Jason.Greenlaw at noaa.gov
>  _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130110/dcb9eede/attachment.html>

From even.rouault at mines-paris.org  Thu Jan 10 11:47:05 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 10 Jan 2013 20:47:05 +0100
Subject: [gdal-dev] Reprojecting GeoTIFFs with Overviews?
In-Reply-To: <CAAoP0JzuqOGK92cbfEPk_rtAPTCHL1XFOyQNqfrE_HYvKEKbRQ@mail.gmail.com>
References: <CAAoP0Jwm4VAXONY00OoHAjVPOVZUj3PnUzuH7hyHq2TkhMLqgQ@mail.gmail.com>
	<66A78A5F-A4DE-4CD6-AC8F-878F1729F099@cape.com>
	<CAAoP0JzuqOGK92cbfEPk_rtAPTCHL1XFOyQNqfrE_HYvKEKbRQ@mail.gmail.com>
Message-ID: <201301102047.05739.even.rouault@mines-paris.org>

Le jeudi 10 janvier 2013 19:03:33, Jason Greenlaw - NOAA Affiliate a ?crit :
> Norman,
> 
> Unfortunately that's not an option - In this case, my overviews are
> generated separately as individual .ovr files, e.g.:
> 
> NGOFS_WL.tif
> NGOFS_WL.tif.ovr
> NGOFS_WL.tif.ovr.ovr
> NGOFS_WL.tif.ovr.ovr.ovr
> NGOFS_WL.tif.ovr.ovr.ovr.ovr
> 
> I'm then stitching them together into a single image with gdal_translate
> -co COPY_SRC_OVERVIEWS=YES  before attempting to reproject the result.
> 
> Here's an example of what it looks like:
> http://jgreenlaw.org/gdal/ngofs-wl.png
> 
> In each overview, the "streaklet" arrows actually need to be rendered at
> the proper resolution; I can't simply interpolate the original image.
> 
> Perhaps I'm out of luck and need to reproject each of the .ovr files and
> the .tif files separately before combining them?

As indicated in the GeoTIFF driver documentation, COPY_SRC_OVERVIEWS only 
works for CreateCopy() API, i.e. the one used by gdal_translate. gdalwarp used 
the Create() API instead. That was the pedantic part of the answer.

Yes, if you don't want the overviews to be recomputed from the reprojected 
image (the link to the image you provided doesn't really show why computed 
overviews can't be used, anyway...) , the only option is to warp each source 
overview level separately, and then recombine the result.

From geoff at tritonimaginginc.com  Thu Jan 10 13:08:36 2013
From: geoff at tritonimaginginc.com (Geoff Shipton)
Date: Thu, 10 Jan 2013 13:08:36 -0800
Subject: [gdal-dev] GDAL Language support
Message-ID: <002301cdef76$a92731f0$fb7595d0$@com>

A simple users question!

 

I recently had problems running GdalWarp.exe on a TIF that was located in a
folder that Chinese characters in the name.  The solution was
straightforward of course - just re-name the folder.

 

However I was wondering what, if any, support there is for this situation
using the GDAL libraries?

Geoff Shipton,
Triton Imaging Inc.
Customer Support.
Capitola CA.
 <mailto:geoff at tritonimaginginc.com> geoff at tritonimaginginc.com

The information contained in this message may be privileged or confidential
information intended solely for the use of the addressee(s).  Any views or
opinions presented in this communication do not necessarily represent those
of Triton Imaging, Inc.  If the reader of this message is not the intended
recipient, you are hereby notified that any dissemination, distribution or
copying of this communication is strictly prohibited.  If you have received
this communication in error, please immediately notify me and you are hereby
instructed to delete all electronic copies and destroy all printed copies.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130110/d35fa767/attachment.html>

From even.rouault at mines-paris.org  Thu Jan 10 13:10:27 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 10 Jan 2013 22:10:27 +0100
Subject: [gdal-dev] GDAL Language support
In-Reply-To: <002301cdef76$a92731f0$fb7595d0$@com>
References: <002301cdef76$a92731f0$fb7595d0$@com>
Message-ID: <201301102210.27823.even.rouault@mines-paris.org>

Le jeudi 10 janvier 2013 22:08:36, Geoff Shipton a ?crit :
> A simple users question!
> 
> 
> 
> I recently had problems running GdalWarp.exe on a TIF that was located in a
> folder that Chinese characters in the name.  The solution was
> straightforward of course - just re-name the folder.
> 
> 
> 
> However I was wondering what, if any, support there is for this situation
> using the GDAL libraries?

The GDAL lib itself expect the character encoding to be UTF-8, but the command 
line utilities don't pass UTF-8 to the GDAL lib due to the pecularities of the 
Windows OS. There's a patch in GDAL Trac that attempts to address that ( 
trac.osgeo.org/gdal/ticket/4884 )

From jason.greenlaw at noaa.gov  Thu Jan 10 14:03:36 2013
From: jason.greenlaw at noaa.gov (Jason Greenlaw - NOAA Affiliate)
Date: Thu, 10 Jan 2013 17:03:36 -0500
Subject: [gdal-dev] Reprojecting GeoTIFFs with Overviews?
In-Reply-To: <201301102047.05739.even.rouault@mines-paris.org>
References: <CAAoP0Jwm4VAXONY00OoHAjVPOVZUj3PnUzuH7hyHq2TkhMLqgQ@mail.gmail.com>
	<66A78A5F-A4DE-4CD6-AC8F-878F1729F099@cape.com>
	<CAAoP0JzuqOGK92cbfEPk_rtAPTCHL1XFOyQNqfrE_HYvKEKbRQ@mail.gmail.com>
	<201301102047.05739.even.rouault@mines-paris.org>
Message-ID: <CAAoP0JwbxL+p6kqZfpx4fTDCV3UzSTqSjXrKZgB1SJi83jmUhg@mail.gmail.com>

My apologies for not being clear about my reasoning. If you're still
curious, I've updated the image to better illustrate what the overviews
should look like and why they shouldn't be recomputed (at small scales,
fewer streaklets are drawn):  http://jgreenlaw.org/gdal/ngofs-wl.png

Thanks for the information, I will reproject the overviews individually.

Jason


On Thu, Jan 10, 2013 at 2:47 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le jeudi 10 janvier 2013 19:03:33, Jason Greenlaw - NOAA Affiliate a ?crit
> :
> > Norman,
> >
> > Unfortunately that's not an option - In this case, my overviews are
> > generated separately as individual .ovr files, e.g.:
> >
> > NGOFS_WL.tif
> > NGOFS_WL.tif.ovr
> > NGOFS_WL.tif.ovr.ovr
> > NGOFS_WL.tif.ovr.ovr.ovr
> > NGOFS_WL.tif.ovr.ovr.ovr.ovr
> >
> > I'm then stitching them together into a single image with gdal_translate
> > -co COPY_SRC_OVERVIEWS=YES  before attempting to reproject the result.
> >
> > Here's an example of what it looks like:
> > http://jgreenlaw.org/gdal/ngofs-wl.png
> >
> > In each overview, the "streaklet" arrows actually need to be rendered at
> > the proper resolution; I can't simply interpolate the original image.
> >
> > Perhaps I'm out of luck and need to reproject each of the .ovr files and
> > the .tif files separately before combining them?
>
> As indicated in the GeoTIFF driver documentation, COPY_SRC_OVERVIEWS only
> works for CreateCopy() API, i.e. the one used by gdal_translate. gdalwarp
> used
> the Create() API instead. That was the pedantic part of the answer.
>
> Yes, if you don't want the overviews to be recomputed from the reprojected
> image (the link to the image you provided doesn't really show why computed
> overviews can't be used, anyway...) , the only option is to warp each
> source
> overview level separately, and then recombine the result.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130110/534a4c3c/attachment.html>

From P.Kennedy at fugro.com.au  Thu Jan 10 16:12:51 2013
From: P.Kennedy at fugro.com.au (Kennedy, Paul)
Date: Fri, 11 Jan 2013 08:12:51 +0800
Subject: [gdal-dev] does gdal support multiple simultaneous writers to raster
Message-ID: <082899B024C30D459BA9ACD1C5E5811904A0135A@msd9.MSD.local>

I am looking to parallelize a long duration gridding process, and was
wondering if GDAL can support multiple simultaneous writers from
processess?

 

I am not sure if any of the underlying raster formats support this?

 

thanks in advance.

 

regards

pk

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130111/a2192966/attachment.html>

From warmerdam at pobox.com  Thu Jan 10 17:32:50 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 10 Jan 2013 17:32:50 -0800
Subject: [gdal-dev] does gdal support multiple simultaneous writers to
	raster
In-Reply-To: <082899B024C30D459BA9ACD1C5E5811904A0135A@msd9.MSD.local>
References: <082899B024C30D459BA9ACD1C5E5811904A0135A@msd9.MSD.local>
Message-ID: <CA+YzLBe=tbmT3VSoLMo4P78Q4keMTuGq0Eh_=+b_5pNyZy1hzA@mail.gmail.com>

Paul,

Generally speaking - no - GDAL does not now support multi-threaded
writing.  Part of this is due to the way stuff gets write-flushed out
of the block cache and partly it is just that none of GDAL supports
multiple threading on a single dataset.

This statement is based on the assumption it is all in one process.

If you want to run different processes with the output to a
pre-existing "fixed location" format like uncompressed GeoTIFF with
tiles that is all preinitialized to some real value then you could
certainly use one output file for many writers as long as case is
taken to not have multiple processes write to the same tile.  But GDAL
isn't doing anything to make this easy.

Best regards,
Frank

On Thu, Jan 10, 2013 at 4:12 PM, Kennedy, Paul <P.Kennedy at fugro.com.au> wrote:
> I am looking to parallelize a long duration gridding process, and was
> wondering if GDAL can support multiple simultaneous writers from processess?
>
>
>
> I am not sure if any of the underlying raster formats support this?
>
>
>
> thanks in advance.
>
>
>
> regards
>
> pk
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From P.Kennedy at fugro.com.au  Thu Jan 10 18:10:24 2013
From: P.Kennedy at fugro.com.au (Kennedy, Paul)
Date: Fri, 11 Jan 2013 10:10:24 +0800
Subject: [gdal-dev] does gdal support multiple simultaneous writers to
	raster
In-Reply-To: <CA+YzLBe=tbmT3VSoLMo4P78Q4keMTuGq0Eh_=+b_5pNyZy1hzA@mail.gmail.com>
References: <082899B024C30D459BA9ACD1C5E5811904A0135A@msd9.MSD.local>
	<CA+YzLBe=tbmT3VSoLMo4P78Q4keMTuGq0Eh_=+b_5pNyZy1hzA@mail.gmail.com>
Message-ID: <082899B024C30D459BA9ACD1C5E5811904A01466@msd9.MSD.local>

thanks for the prompt response.  It would have been nice to use the GDAL
API in a multi-process (parallelised) world if feasible.  We are
increasingly seeing the need to move to multi-core (parallel) access so
we can spread the processing load across multiple CPU's, but we do like
to keep our data in a single, cohesive raster file (often with billions
of pixels) so we can avoid stitching errors at the seams.  
The use of pyramids means the visualisation of huge rasters is not an
issue but single write access is starting to be a problem.
We are thinking of a 'master' process running which can server out tiles
to different processes and keep track of them to avoid write collision.
Almost a Tile Map Service with write capabilities.
would you think this is feasible with GDAL as the backend service?



-----Original Message-----
From: fwarmerdam at gmail.com [mailto:fwarmerdam at gmail.com] On Behalf Of
Frank Warmerdam
Sent: Friday, 11 January 2013 9:33 AM
To: Kennedy, Paul
Cc: gdal dev
Subject: Re: [gdal-dev] does gdal support multiple simultaneous writers
to raster

Paul,

Generally speaking - no - GDAL does not now support multi-threaded
writing.  Part of this is due to the way stuff gets write-flushed out of
the block cache and partly it is just that none of GDAL supports
multiple threading on a single dataset.

This statement is based on the assumption it is all in one process.

If you want to run different processes with the output to a pre-existing
"fixed location" format like uncompressed GeoTIFF with tiles that is all
preinitialized to some real value then you could certainly use one
output file for many writers as long as case is taken to not have
multiple processes write to the same tile.  But GDAL isn't doing
anything to make this easy.

Best regards,
Frank

On Thu, Jan 10, 2013 at 4:12 PM, Kennedy, Paul <P.Kennedy at fugro.com.au>
wrote:
> I am looking to parallelize a long duration gridding process, and was 
> wondering if GDAL can support multiple simultaneous writers from
processess?
>
>
>
> I am not sure if any of the underlying raster formats support this?
>
>
>
> thanks in advance.
>
>
>
> regards
>
> pk
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From uffe at routeware.dk  Fri Jan 11 00:41:18 2013
From: uffe at routeware.dk (Uffe Kousgaard)
Date: Fri, 11 Jan 2013 09:41:18 +0100
Subject: [gdal-dev] OGR2OGR: DBF and where-clause
Message-ID: <50EFD02E.4010603@routeware.dk>

I run a select on a SHP file with this command:
ogr2ogr -where "ONEWAY<>'N'" -f "ESRI Shapefile" nw2.shp nw.shp

The ONEWAY field has 4 possible values: <blank>, FT, TF and N.
Fieldtype is char(2).

The problem is only records with FT and TF are selected. All the <blank> 
records are skipped.

This is with the 4-1-2013 version in release-1600-gdal-mapserver.zip

In the older version in fwtools it works correctly, but that one has 
other issues.

Regards
Uffe Kousgaard


From even.rouault at mines-paris.org  Fri Jan 11 01:35:07 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 11 Jan 2013 10:35:07 +0100
Subject: [gdal-dev] OGR2OGR: DBF and where-clause
In-Reply-To: <50EFD02E.4010603@routeware.dk>
References: <50EFD02E.4010603@routeware.dk>
Message-ID: <1357896907.50efdccbace81@imp.free.fr>

Selon Uffe Kousgaard <uffe at routeware.dk>:

> I run a select on a SHP file with this command:
> ogr2ogr -where "ONEWAY<>'N'" -f "ESRI Shapefile" nw2.shp nw.shp

Try -where "ONEWAY <> 'N' OR ONEWAY IS NULL"





From j.l.h.hartmann at uva.nl  Fri Jan 11 01:43:07 2013
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Fri, 11 Jan 2013 10:43:07 +0100
Subject: [gdal-dev] does gdal support multiple simultaneous writers to
 raster
In-Reply-To: <CA+YzLBe=tbmT3VSoLMo4P78Q4keMTuGq0Eh_=+b_5pNyZy1hzA@mail.gmail.com>
References: <082899B024C30D459BA9ACD1C5E5811904A0135A@msd9.MSD.local>
	<CA+YzLBe=tbmT3VSoLMo4P78Q4keMTuGq0Eh_=+b_5pNyZy1hzA@mail.gmail.com>
Message-ID: <50EFDEAB.9070100@uva.nl>

I'v tried this in a Cloud environment with multiple VMs writing to the 
same shared file location. I didn't use tiles, so the results where 
negative. It would be a great asset for Cloud environments, however. Is 
it in principle possible to build such a facility into GDAL, and if yes, 
what kind of funding would it require?

Jan

On 01/11/2013 02:32 AM, Frank Warmerdam wrote:
> Paul,
>
> Generally speaking - no - GDAL does not now support multi-threaded
> writing.  Part of this is due to the way stuff gets write-flushed out
> of the block cache and partly it is just that none of GDAL supports
> multiple threading on a single dataset.
>
> This statement is based on the assumption it is all in one process.
>
> If you want to run different processes with the output to a
> pre-existing "fixed location" format like uncompressed GeoTIFF with
> tiles that is all preinitialized to some real value then you could
> certainly use one output file for many writers as long as case is
> taken to not have multiple processes write to the same tile.  But GDAL
> isn't doing anything to make this easy.
>
> Best regards,
> Frank
>
> On Thu, Jan 10, 2013 at 4:12 PM, Kennedy, Paul <P.Kennedy at fugro.com.au> wrote:
>> I am looking to parallelize a long duration gridding process, and was
>> wondering if GDAL can support multiple simultaneous writers from processess?
>>
>>
>>
>> I am not sure if any of the underlying raster formats support this?
>>
>>
>>
>> thanks in advance.
>>
>>
>>
>> regards
>>
>> pk
>>
>>
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130111/dcba8b7a/attachment.html>

From P.Kennedy at fugro.com.au  Fri Jan 11 01:43:40 2013
From: P.Kennedy at fugro.com.au (Kennedy, Paul)
Date: Fri, 11 Jan 2013 17:43:40 +0800
Subject: [gdal-dev] does gdal support multiple simultaneous writers to
	raster
In-Reply-To: <50EFDEAB.9070100@uva.nl>
References: <082899B024C30D459BA9ACD1C5E5811904A0135A@msd9.MSD.local>
	<CA+YzLBe=tbmT3VSoLMo4P78Q4keMTuGq0Eh_=+b_5pNyZy1hzA@mail.gmail.com>
	<50EFDEAB.9070100@uva.nl>
Message-ID: <082899B024C30D459BA9ACD1C5E5811904A0175E@msd9.MSD.local>

hi,

I would be prepared to contribute to such a facility in GDAL if it
permitted multiple simultaneous writes (to different bands / tiles)

 

pk

 

 

 

 

 

From: Jan Hartmann [mailto:j.l.h.hartmann at uva.nl] 
Sent: Friday, 11 January 2013 5:43 PM
To: Frank Warmerdam
Cc: Kennedy, Paul; gdal dev
Subject: Re: [gdal-dev] does gdal support multiple simultaneous writers
to raster

 

I'v tried this in a Cloud environment with multiple VMs writing to the
same shared file location. I didn't use tiles, so the results where
negative. It would be a great asset for Cloud environments, however. Is
it in principle possible to build such a facility into GDAL, and if yes,
what kind of funding would it require?

Jan

On 01/11/2013 02:32 AM, Frank Warmerdam wrote:

	Paul,
	 
	Generally speaking - no - GDAL does not now support
multi-threaded
	writing.  Part of this is due to the way stuff gets
write-flushed out
	of the block cache and partly it is just that none of GDAL
supports
	multiple threading on a single dataset.
	 
	This statement is based on the assumption it is all in one
process.
	 
	If you want to run different processes with the output to a
	pre-existing "fixed location" format like uncompressed GeoTIFF
with
	tiles that is all preinitialized to some real value then you
could
	certainly use one output file for many writers as long as case
is
	taken to not have multiple processes write to the same tile.
But GDAL
	isn't doing anything to make this easy.
	 
	Best regards,
	Frank
	 
	On Thu, Jan 10, 2013 at 4:12 PM, Kennedy, Paul
<P.Kennedy at fugro.com.au> <mailto:P.Kennedy at fugro.com.au>  wrote:

		I am looking to parallelize a long duration gridding
process, and was
		wondering if GDAL can support multiple simultaneous
writers from processess?
		 
		 
		 
		I am not sure if any of the underlying raster formats
support this?
		 
		 
		 
		thanks in advance.
		 
		 
		 
		regards
		 
		pk
		 
		 
		 
		 
		 
		 
		_______________________________________________
		gdal-dev mailing list
		gdal-dev at lists.osgeo.org
		http://lists.osgeo.org/mailman/listinfo/gdal-dev

	 
	 
	 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130111/10a4f22c/attachment.html>

From even.rouault at mines-paris.org  Fri Jan 11 02:53:31 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 11 Jan 2013 11:53:31 +0100
Subject: [gdal-dev] does gdal support multiple simultaneous writers to
	raster
In-Reply-To: <082899B024C30D459BA9ACD1C5E5811904A0175E@msd9.MSD.local>
References: <082899B024C30D459BA9ACD1C5E5811904A0135A@msd9.MSD.local>
	<CA+YzLBe=tbmT3VSoLMo4P78Q4keMTuGq0Eh_=+b_5pNyZy1hzA@mail.gmail.com>
	<50EFDEAB.9070100@uva.nl>
	<082899B024C30D459BA9ACD1C5E5811904A0175E@msd9.MSD.local>
Message-ID: <1357901611.50efef2b5f9df@imp.free.fr>

Hi,

This is an intersting topic, with many "intersecting" issues to deal with at
different levels.

First, are you confident that in the use cases you imagine that I/O access won't
be the limiting factor, in which case serialization of I/O could be acceptable
and this would just require an API with a dataset level mutex.

There are several places where parallel write should be addressed :
- The GDAL core mechanisms that deal with the block cache
- Each GDAL driver where parallel write would be supported. I guess that GDAL
drivers should advertize a specific capability
- The low-level library used by the driver. In the case of GDAL, libtiff

And finally, as Frank underlined, there are intrinsic limitations due to the
format itself. For a compressed TIFF, at some point, you have to serialize the
writing of the tile, because you cannot kown in advance the size of the
compressed data, or at least have some coordination of the writers so that a
"next offset available" is properly synchronized between them. The compression
itself could be serialized.

I'm not sure however if what Jan mentionned, different process, writing the same
dataset is doable.


From j.l.h.hartmann at uva.nl  Fri Jan 11 03:36:48 2013
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Fri, 11 Jan 2013 12:36:48 +0100
Subject: [gdal-dev] does gdal support multiple simultaneous writers to
 raster
In-Reply-To: <1357901611.50efef2b5f9df@imp.free.fr>
References: <082899B024C30D459BA9ACD1C5E5811904A0135A@msd9.MSD.local>
	<CA+YzLBe=tbmT3VSoLMo4P78Q4keMTuGq0Eh_=+b_5pNyZy1hzA@mail.gmail.com>
	<50EFDEAB.9070100@uva.nl>
	<082899B024C30D459BA9ACD1C5E5811904A0175E@msd9.MSD.local>
	<1357901611.50efef2b5f9df@imp.free.fr>
Message-ID: <50EFF950.6010100@uva.nl>

I would like to make a further suggestion: what about an option for 
gdalwarp to create *external* tiles, instead of one big output file? 
That's what I am doing now: just create one big georeferenced raster, 
and split it up in tiles, mostly 2000*2000. Accessing those tiles with a 
tileindex is really fast, although I was surprised to see how fast an 
internallly tiled geotiff already is. My impression is that that would 
not be very difficult to implement, and for big datasets tiles are a 
must anyway. I'm not sure how this would interact with the already 
existing tiling applications, though.

Jan

On 01/11/2013 11:53 AM, Even Rouault wrote:
> Hi,
>
> This is an intersting topic, with many "intersecting" issues to deal with at
> different levels.
>
> First, are you confident that in the use cases you imagine that I/O access won't
> be the limiting factor, in which case serialization of I/O could be acceptable
> and this would just require an API with a dataset level mutex.
>
> There are several places where parallel write should be addressed :
> - The GDAL core mechanisms that deal with the block cache
> - Each GDAL driver where parallel write would be supported. I guess that GDAL
> drivers should advertize a specific capability
> - The low-level library used by the driver. In the case of GDAL, libtiff
>
> And finally, as Frank underlined, there are intrinsic limitations due to the
> format itself. For a compressed TIFF, at some point, you have to serialize the
> writing of the tile, because you cannot kown in advance the size of the
> compressed data, or at least have some coordination of the writers so that a
> "next offset available" is properly synchronized between them. The compression
> itself could be serialized.
>
> I'm not sure however if what Jan mentionned, different process, writing the same
> dataset is doable.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130111/dc067949/attachment-0001.html>

From etourigny.dev at gmail.com  Fri Jan 11 04:40:31 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri, 11 Jan 2013 10:40:31 -0200
Subject: [gdal-dev] which formats support subdatasets?
In-Reply-To: <CA+TxYvMHzKQNh6BaVCw729ODHW_Wc1CPnTP9WRJtw1BqEYa0vw@mail.gmail.com>
References: <CA+TxYvMHzKQNh6BaVCw729ODHW_Wc1CPnTP9WRJtw1BqEYa0vw@mail.gmail.com>
Message-ID: <CA+TxYvNQe6B=U7PjT9KmkDcB0KHErTtJ1XWY=sYJVX-t+UL8kQ@mail.gmail.com>

Hi,

I'd just like to point out a patch I have submitted to report which
raster drivers support subdatasets, using the DMD_SUBDATASETS metadata
item.
I have also modified gdalinfo and format docs.

http://trac.osgeo.org/gdal/ticket/4902

For example:

$ gdalinfo --format hdf4
Format Details:
  Short Name: HDF4
  Long Name: Hierarchical Data Format Release 4
  Extension: hdf
  Help Topic: frmt_hdf4.html
  Supports: Subdatasets


Regards,
Etienne

On Tue, Nov 20, 2012 at 10:43 AM, Etienne Tourigny
<etourigny.dev at gmail.com> wrote:
> Hi
>
> I'd like to be able to identify which raster and vector formats
> support subdatasets (or multipl layers).
>
> A quick grep search (grep SUBDATASETS frmts/*/*.cpp) showed which GDAL
> drivers can report subdatasets.
> Am I missing something?
>
> I think it would be nice to include this info in the driver summary
> page - should I just edit the html or is there some other file to
> edit?
>
> I was wondering how to find that out for OGR drivers - or do all
> drivers support multiple layers in one datasource?
>
>
> Regards,
> Etienne

From even.rouault at mines-paris.org  Fri Jan 11 05:03:26 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 11 Jan 2013 14:03:26 +0100
Subject: [gdal-dev] which formats support subdatasets?
In-Reply-To: <CA+TxYvNQe6B=U7PjT9KmkDcB0KHErTtJ1XWY=sYJVX-t+UL8kQ@mail.gmail.com>
References: <CA+TxYvMHzKQNh6BaVCw729ODHW_Wc1CPnTP9WRJtw1BqEYa0vw@mail.gmail.com>
	<CA+TxYvNQe6B=U7PjT9KmkDcB0KHErTtJ1XWY=sYJVX-t+UL8kQ@mail.gmail.com>
Message-ID: <1357909406.50f00d9ed2773@imp.free.fr>

Selon Etienne Tourigny <etourigny.dev at gmail.com>:

> Hi,
>
> I'd just like to point out a patch I have submitted to report which
> raster drivers support subdatasets, using the DMD_SUBDATASETS metadata
> item.
> I have also modified gdalinfo and format docs.
>
> http://trac.osgeo.org/gdal/ticket/4902
>
> For example:
>
> $ gdalinfo --format hdf4
> Format Details:
>   Short Name: HDF4
>   Long Name: Hierarchical Data Format Release 4
>   Extension: hdf
>   Help Topic: frmt_hdf4.html
>   Supports: Subdatasets
>

I've looked at the patch and it seems good. I'm not sure I would have added a
new column in the table, but if you think it is usefull, keep it. It would
perhaps be good to mention in gdal_datamodel.dox, in the SUBDATASETS section,
that drivers that support them advertize the DMD_SUBDATASETS capability. And I
think that swig/include/gdalconst.i should also be edited to add the new
constant. After that please commit.

I'm not sure it is appropriate to backport in 1.9 however (new feature, output
of gdalinfo --format modified). 1.10 should be out soon hopefully.

>
> Regards,
> Etienne
>
> On Tue, Nov 20, 2012 at 10:43 AM, Etienne Tourigny
> <etourigny.dev at gmail.com> wrote:
> > Hi
> >
> > I'd like to be able to identify which raster and vector formats
> > support subdatasets (or multipl layers).
> >
> > A quick grep search (grep SUBDATASETS frmts/*/*.cpp) showed which GDAL
> > drivers can report subdatasets.
> > Am I missing something?
> >
> > I think it would be nice to include this info in the driver summary
> > page - should I just edit the html or is there some other file to
> > edit?
> >
> > I was wondering how to find that out for OGR drivers - or do all
> > drivers support multiple layers in one datasource?
> >
> >
> > Regards,
> > Etienne
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



















From etourigny.dev at gmail.com  Fri Jan 11 05:23:22 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri, 11 Jan 2013 11:23:22 -0200
Subject: [gdal-dev] which formats support subdatasets?
In-Reply-To: <1357909406.50f00d9ed2773@imp.free.fr>
References: <CA+TxYvMHzKQNh6BaVCw729ODHW_Wc1CPnTP9WRJtw1BqEYa0vw@mail.gmail.com>
	<CA+TxYvNQe6B=U7PjT9KmkDcB0KHErTtJ1XWY=sYJVX-t+UL8kQ@mail.gmail.com>
	<1357909406.50f00d9ed2773@imp.free.fr>
Message-ID: <CA+TxYvND9iM5FFmJWL4U-f+Azwe80VX_3Ba=7s+U1krztp++iA@mail.gmail.com>

On Fri, Jan 11, 2013 at 11:03 AM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Selon Etienne Tourigny <etourigny.dev at gmail.com>:
>
>> Hi,
>>
>> I'd just like to point out a patch I have submitted to report which
>> raster drivers support subdatasets, using the DMD_SUBDATASETS metadata
>> item.
>> I have also modified gdalinfo and format docs.
>>
>> http://trac.osgeo.org/gdal/ticket/4902
>>
>> For example:
>>
>> $ gdalinfo --format hdf4
>> Format Details:
>>   Short Name: HDF4
>>   Long Name: Hierarchical Data Format Release 4
>>   Extension: hdf
>>   Help Topic: frmt_hdf4.html
>>   Supports: Subdatasets
>>
>
> I've looked at the patch and it seems good. I'm not sure I would have added a
> new column in the table, but if you think it is usefull, keep it. It would
> perhaps be good to mention in gdal_datamodel.dox, in the SUBDATASETS section,
> that drivers that support them advertize the DMD_SUBDATASETS capability. And I
> think that swig/include/gdalconst.i should also be edited to add the new
> constant. After that please commit.

I though adding the info to frmt_various.html was the most
appropriate, but it is a bit intrusive. Should it be elsewhere, like
the individual driver docs or in gdal_datamodel?

I also though about adding an "s" key to the output of "--formats"
format support string e.g. (rw+vs)

I'll make the other changes you suggest.

>
> I'm not sure it is appropriate to backport in 1.9 however (new feature, output
> of gdalinfo --format modified). 1.10 should be out soon hopefully.

I also don't think it's appropriate adding this to 1.9

>
>>
>> Regards,
>> Etienne
>>
>> On Tue, Nov 20, 2012 at 10:43 AM, Etienne Tourigny
>> <etourigny.dev at gmail.com> wrote:
>> > Hi
>> >
>> > I'd like to be able to identify which raster and vector formats
>> > support subdatasets (or multipl layers).
>> >
>> > A quick grep search (grep SUBDATASETS frmts/*/*.cpp) showed which GDAL
>> > drivers can report subdatasets.
>> > Am I missing something?
>> >
>> > I think it would be nice to include this info in the driver summary
>> > page - should I just edit the html or is there some other file to
>> > edit?
>> >
>> > I was wondering how to find that out for OGR drivers - or do all
>> > drivers support multiple layers in one datasource?
>> >
>> >
>> > Regards,
>> > Etienne
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>

From nfarah at hotmail.com  Fri Jan 11 06:00:40 2013
From: nfarah at hotmail.com (N. Farah)
Date: Fri, 11 Jan 2013 09:00:40 -0500
Subject: [gdal-dev] does gdal support multiple simultaneous writers to raster
Message-ID: <SNT002-W748F0D35E22EF0AD374A1EDD290@phx.gbl>

Simultaneous writers to different dataset or the same dataset ?In related topic, can GDAL writte to different dataset in a parallel way ?ex. convert multiple datasets to different output datasets in a parallel way.Would those parallel operations not be affected by GDAL caching for bot read and write.Since the cache is set to a limit. Is Accessing the current used cache value concurrent safeto increase it/decrease it ? Same apply to flushing cache to different output datasets ?Is the cache is isolated per dataset or its for all opened datasets ?
ThanksNoureddine Farah
--->I am looking to parallelize a long duration gridding process, and was
wondering if GDAL can support multiple simultaneous writers from
processess?

 

I am not sure if any of the underlying raster formats support this?

 

thanks in advance.

 

regards

pk 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130111/ca45ca2c/attachment.html>

From jmckenna at gatewaygeomatics.com  Fri Jan 11 06:09:22 2013
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Fri, 11 Jan 2013 10:09:22 -0400
Subject: [gdal-dev] New OGR driver to read OpenStreetMap .osm / .pbf
	files
In-Reply-To: <201301090226.32560.even.rouault@mines-paris.org>
References: <201207101923.32027.even.rouault@mines-paris.org>
	<201301090114.53571.even.rouault@mines-paris.org>
	<CAFcOn28drCNA9ympWCcbnQji_-6TcVgh7Ju+_Ba2RatthJy5VA@mail.gmail.com>
	<201301090226.32560.even.rouault@mines-paris.org>
Message-ID: <50F01D12.1060206@gatewaygeomatics.com>

On 13-01-08 9:26 PM, Even Rouault wrote:
> Ah ok, so I must mention that the online documentation is always up-to-date 
> with the latest trunk version (it is refreshed each night). So the fact that 
> something is documented is not a sign of stability by itself. It can be a new 
> development committed just a few hours ago.

Hello Even, Stefan,

I wonder if that ogr_formats.html table needs a new column for "GDAL
Version", that could let users know what GDAL version works with each
driver.

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/



From even.rouault at mines-paris.org  Fri Jan 11 06:48:48 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 11 Jan 2013 15:48:48 +0100
Subject: [gdal-dev] New OGR driver to read OpenStreetMap .osm / .pbf
	files
In-Reply-To: <50F01D12.1060206@gatewaygeomatics.com>
References: <201207101923.32027.even.rouault@mines-paris.org>
	<201301090114.53571.even.rouault@mines-paris.org>
	<CAFcOn28drCNA9ympWCcbnQji_-6TcVgh7Ju+_Ba2RatthJy5VA@mail.gmail.com>
	<201301090226.32560.even.rouault@mines-paris.org>
	<50F01D12.1060206@gatewaygeomatics.com>
Message-ID: <1357915728.50f026502aedc@imp.free.fr>

Selon Jeff McKenna <jmckenna at gatewaygeomatics.com>:

> On 13-01-08 9:26 PM, Even Rouault wrote:
> > Ah ok, so I must mention that the online documentation is always up-to-date
> > with the latest trunk version (it is refreshed each night). So the fact
> that
> > something is documented is not a sign of stability by itself. It can be a
> new
> > development committed just a few hours ago.
>
> Hello Even, Stefan,
>
> I wonder if that ogr_formats.html table needs a new column for "GDAL
> Version", that could let users know what GDAL version works with each
> driver.

There are different schools on the topic. I know Frank is not too keen on
mentionning versionning, although personnaly, I try to mention version
differences in the format page itself (http://www.gdal.org/ogr/drv_osm.html
mentions GDAL/OGR >= 1.10.0). But at the end, in drivers with a lot of activity,
it becomes cluttered with mentions like "in version X, in version Y". Having
different version of the documentation, for each version, on the server could
solve that, although it is sometimes usefull to identify quickly that a
particular feature has been introduced in a version.

>
> -jeff
>
>
>
> --
> Jeff McKenna
> MapServer Consulting and Training Services
> http://www.gatewaygeomatics.com/
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From ivan.lucena at princeton-ma.us  Fri Jan 11 07:18:24 2013
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri, 11 Jan 2013 10:18:24 -0500
Subject: [gdal-dev] =?iso-8859-1?q?which_formats_support_subdatasets=3F?=
In-Reply-To: <CA+TxYvND9iM5FFmJWL4U-f+Azwe80VX_3Ba=7s+U1krztp++iA@mail.gmail.com>
References: <CA+TxYvMHzKQNh6BaVCw729ODHW_Wc1CPnTP9WRJtw1BqEYa0vw@mail.gmail.com>
	<CA+TxYvNQe6B=U7PjT9KmkDcB0KHErTtJ1XWY=sYJVX-t+UL8kQ@mail.gmail.com>
	<1357909406.50f00d9ed2773@imp.free.fr>
	<CA+TxYvND9iM5FFmJWL4U-f+Azwe80VX_3Ba=7s+U1krztp++iA@mail.gmail.com>
Message-ID: <20130111151838.17804.qmail@s466.sureserver.com>

Hi Etienne,

It sounds like a good idea to add that information to the GDALDriver metata. I can see how one could take advantage of that feature when writing a generic solution to deal with all SUBDATASETS drivers at once.

But I am wondering if I should add that to the GeoRaster driver. This driver only reports SUBDATASETS if the result of the query is not an unique SDO_GEORASTER object.

So for example, if you use an WHERE clause that result in several objects, each object is reported as a SUBDATASET. That is how the QGIS Oracle Raster extension can browse into tables and columns to list existing images. See http://gdal.org/frmt_georaster.html "Browsing the database for GeoRasters".

In that case the SUBDATASET is not a property of the driver, but the GDALDataset. I believe that others SUBDATSET supporters driver also do some similar, or maybe is gdalinfo who does that. If there is just one SUBDATASET the report shows one Dataset, with Rows and Columns other than 512x512 and the info from the "first and only" SUBDATASET.

Anyway, I always thought that the SUBDATASET were kind of a abstraction leak into the GDAL data model. They showed up later in the game and what we have is just an adaptation to make it work. It might be something to re-think for GDAL 2.0. IMHO.

Regards,

Ivan







-------Original Message-------
  From: Etienne Tourigny
  To: Even Rouault
  Cc: gdal-dev
  Subject: Re: [gdal-dev] which formats support subdatasets?
  Sent: Jan 11 '13 08:23

  On Fri, Jan 11, 2013 at 11:03 AM, Even Rouault
  <[LINK: compose.php?to=even.rouault at mines-paris.org]
even.rouault at mines-paris.org> wrote:
  > Selon Etienne Tourigny <[LINK: compose.php?to=etourigny.dev at gmail.com]
etourigny.dev at gmail.com>:
  >
  >> Hi,
  >>
  >> I'd just like to point out a patch I have submitted to report which
  >> raster drivers support subdatasets, using the DMD_SUBDATASETS metadata
  >> item.
  >> I have also modified gdalinfo and format docs.
  >>
  >> [LINK: http://trac.osgeo.org/gdal/ticket/4902]
http://trac.osgeo.org/gdal/ticket/4902
  >>
  >> For example:
  >>
  >> $ gdalinfo --format hdf4
  >> Format Details:
  >>   Short Name: HDF4
  >>   Long Name: Hierarchical Data Format Release 4
  >>   Extension: hdf
  >>   Help Topic: frmt_hdf4.html
  >>   Supports: Subdatasets
  >>
  >
  > I've looked at the patch and it seems good. I'm not sure I would have
added a
  > new column in the table, but if you think it is usefull, keep it. It
would
  > perhaps be good to mention in gdal_datamodel.dox, in the SUBDATASETS
section,
  > that drivers that support them advertize the DMD_SUBDATASETS
capability. And I
  > think that swig/include/gdalconst.i should also be edited to add the
new
  > constant. After that please commit.

  I though adding the info to frmt_various.html was the most
  appropriate, but it is a bit intrusive. Should it be elsewhere, like
  the individual driver docs or in gdal_datamodel?

  I also though about adding an "s" key to the output of "--formats"
  format support string e.g. (rw+vs)

  I'll make the other changes you suggest.

  >
  > I'm not sure it is appropriate to backport in 1.9 however (new feature,
output
  > of gdalinfo --format modified). 1.10 should be out soon hopefully.

  I also don't think it's appropriate adding this to 1.9

  >
  >>
  >> Regards,
  >> Etienne
  >>
  >> On Tue, Nov 20, 2012 at 10:43 AM, Etienne Tourigny
  >> <[LINK: compose.php?to=etourigny.dev at gmail.com]
etourigny.dev at gmail.com> wrote:
  >> > Hi
  >> >
  >> > I'd like to be able to identify which raster and vector formats
  >> > support subdatasets (or multipl layers).
  >> >
  >> > A quick grep search (grep SUBDATASETS frmts/*/*.cpp) showed which
GDAL
  >> > drivers can report subdatasets.
  >> > Am I missing something?
  >> >
  >> > I think it would be nice to include this info in the driver summary
  >> > page - should I just edit the html or is there some other file to
  >> > edit?
  >> >
  >> > I was wondering how to find that out for OGR drivers - or do all
  >> > drivers support multiple layers in one datasource?
  >> >
  >> >
  >> > Regards,
  >> > Etienne
  >> _______________________________________________
  >> gdal-dev mailing list
  >> [LINK: compose.php?to=gdal-dev at lists.osgeo.org]
gdal-dev at lists.osgeo.org
  >> [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
http://lists.osgeo.org/mailman/listinfo/gdal-dev
  >>
  >
  >
  >
  >
  >
  >
  >
  >
  >
  >
  >
  >
  >
  >
  >
  >
  >
  >
  _______________________________________________
  gdal-dev mailing list
  [LINK: compose.php?to=gdal-dev at lists.osgeo.org] gdal-dev at lists.osgeo.org
  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jmckenna at gatewaygeomatics.com  Fri Jan 11 08:02:27 2013
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Fri, 11 Jan 2013 12:02:27 -0400
Subject: [gdal-dev] New OGR driver to read OpenStreetMap .osm / .pbf
	files
In-Reply-To: <1357915728.50f026502aedc@imp.free.fr>
References: <201207101923.32027.even.rouault@mines-paris.org>
	<201301090114.53571.even.rouault@mines-paris.org>
	<CAFcOn28drCNA9ympWCcbnQji_-6TcVgh7Ju+_Ba2RatthJy5VA@mail.gmail.com>
	<201301090226.32560.even.rouault@mines-paris.org>
	<50F01D12.1060206@gatewaygeomatics.com>
	<1357915728.50f026502aedc@imp.free.fr>
Message-ID: <50F03793.8040909@gatewaygeomatics.com>


> 
> There are different schools on the topic. I know Frank is not too keen on
> mentionning versionning, although personnaly, I try to mention version
> differences in the format page itself (http://www.gdal.org/ogr/drv_osm.html
> mentions GDAL/OGR >= 1.10.0). But at the end, in drivers with a lot of activity,
> it becomes cluttered with mentions like "in version X, in version Y". Having
> different version of the documentation, for each version, on the server could
> solve that, although it is sometimes usefull to identify quickly that a
> particular feature has been introduced in a version.
> 
>>

Yes, I know that situation all too well (same issues with
mapserver.org).  I agree, mentioning GDAL/OGR version in the format page
itself is very good (I push for this in mapserver.org as well, as it is
very helpful for users to know what version a feature was added).

K thanks for chatting.

-jeff




-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/



From P.Kennedy at fugro.com.au  Fri Jan 11 17:38:55 2013
From: P.Kennedy at fugro.com.au (Kennedy, Paul)
Date: Sat, 12 Jan 2013 09:38:55 +0800
Subject: [gdal-dev] does gdal support multiple simultaneous writers to
	raster
In-Reply-To: <1357901611.50efef2b5f9df@imp.free.fr>
References: <082899B024C30D459BA9ACD1C5E5811904A0135A@msd9.MSD.local>
	<CA+YzLBe=tbmT3VSoLMo4P78Q4keMTuGq0Eh_=+b_5pNyZy1hzA@mail.gmail.com>
	<50EFDEAB.9070100@uva.nl>
	<082899B024C30D459BA9ACD1C5E5811904A0175E@msd9.MSD.local>
	<1357901611.50efef2b5f9df@imp.free.fr>
Message-ID: <1E52512B-ADAD-45AD-810C-CA1B8E7F179A@fugro.com.au>

Hi,
Yes, we are pretty sure we will see a significant benefit.  The processing algorithms are CPU bound not io bound. Our digital terrain model interpolations often run for many hours ( we do them overnight) but the underlying file is only a few gigabytes. If we split them into multiple files of tiles and run each on a dedicated process the whole thing is quicker, but this is messy and results in a stitching error. 

Another example is gdalwarp. It takes quite some time with a large data set and would be. A good candidate for parallelisation, as would gdaladdo. 

I believe slower cores but more of them in pcs are the future. My pc has 8 but they rarely get used to their potential. 

I am certain there are some challenges here, that's why it is interesting;)

Regards
pk

On 11/01/2013, at 6:54 PM, "Even Rouault" <even.rouault at mines-paris.org> wrote:

> Hi,
> 
> This is an intersting topic, with many "intersecting" issues to deal with at
> different levels.
> 
> First, are you confident that in the use cases you imagine that I/O access won't
> be the limiting factor, in which case serialization of I/O could be acceptable
> and this would just require an API with a dataset level mutex.
> 
> There are several places where parallel write should be addressed :
> - The GDAL core mechanisms that deal with the block cache
> - Each GDAL driver where parallel write would be supported. I guess that GDAL
> drivers should advertize a specific capability
> - The low-level library used by the driver. In the case of GDAL, libtiff
> 
> And finally, as Frank underlined, there are intrinsic limitations due to the
> format itself. For a compressed TIFF, at some point, you have to serialize the
> writing of the tile, because you cannot kown in advance the size of the
> compressed data, or at least have some coordination of the writers so that a
> "next offset available" is properly synchronized between them. The compression
> itself could be serialized.
> 
> I'm not sure however if what Jan mentionned, different process, writing the same
> dataset is doable.
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130112/866e983e/attachment.html>

From jluis at ualg.pt  Fri Jan 11 18:03:51 2013
From: jluis at ualg.pt (Joaquim Luis)
Date: Sat, 12 Jan 2013 02:03:51 +0000
Subject: [gdal-dev] does gdal support multiple simultaneous writers to
 raster
In-Reply-To: <1E52512B-ADAD-45AD-810C-CA1B8E7F179A@fugro.com.au>
References: <082899B024C30D459BA9ACD1C5E5811904A0135A@msd9.MSD.local>
	<CA+YzLBe=tbmT3VSoLMo4P78Q4keMTuGq0Eh_=+b_5pNyZy1hzA@mail.gmail.com>
	<50EFDEAB.9070100@uva.nl>
	<082899B024C30D459BA9ACD1C5E5811904A0175E@msd9.MSD.local>
	<1357901611.50efef2b5f9df@imp.free.fr>
	<1E52512B-ADAD-45AD-810C-CA1B8E7F179A@fugro.com.au>
Message-ID: <50F0C487.4050207@ualg.pt>

On 12-01-2013 01:38, Kennedy, Paul wrote:
> Hi,
> Yes, we are pretty sure we will see a significant benefit.  The 
> processing algorithms are CPU bound not io bound. Our digital terrain 
> model interpolations often run for many hours ( we do them overnight) 
> but the underlying file is only a few gigabytes. If we split them into 
> multiple files of tiles and run each on a dedicated process the whole 
> thing is quicker, but this is messy and results in a stitching error.

Some many years ago when I had to do that type of operations due to 
memory limitations the trick was to compute each tile larger than 
needed. Let say 10% wider in each of the 4 sides (except the borders of 
course). The extra zone will work as a boundary condition and is 
stripped at the end. The stripped tiles could than be pasted together to 
build the final mosaic. I did that with minimum curvature (GMT) 
interpolation and the final 'gluing' resulted perfect as it couldn't be 
noticed not even with shaded illumination.

Joaquim

>
> Another example is gdalwarp. It takes quite some time with a large 
> data set and would be. A good candidate for parallelisation, as would 
> gdaladdo.
>
> I believe slower cores but more of them in pcs are the future. My pc 
> has 8 but they rarely get used to their potential.
>
> I am certain there are some challenges here, that's why it is 
> interesting;)
>
> Regards
> pk
>
> On 11/01/2013, at 6:54 PM, "Even Rouault" 
> <even.rouault at mines-paris.org <mailto:even.rouault at mines-paris.org>> 
> wrote:
>
>> Hi,
>>
>> This is an intersting topic, with many "intersecting" issues to deal 
>> with at
>> different levels.
>>
>> First, are you confident that in the use cases you imagine that I/O 
>> access won't
>> be the limiting factor, in which case serialization of I/O could be 
>> acceptable
>> and this would just require an API with a dataset level mutex.
>>
>> There are several places where parallel write should be addressed :
>> - The GDAL core mechanisms that deal with the block cache
>> - Each GDAL driver where parallel write would be supported. I guess 
>> that GDAL
>> drivers should advertize a specific capability
>> - The low-level library used by the driver. In the case of GDAL, libtiff
>>
>> And finally, as Frank underlined, there are intrinsic limitations due 
>> to the
>> format itself. For a compressed TIFF, at some point, you have to 
>> serialize the
>> writing of the tile, because you cannot kown in advance the size of the
>> compressed data, or at least have some coordination of the writers so 
>> that a
>> "next offset available" is properly synchronized between them. The 
>> compression
>> itself could be serialized.
>>
>> I'm not sure however if what Jan mentionned, different process, 
>> writing the same
>> dataset is doable.
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130112/51788f16/attachment.html>

From etourigny.dev at gmail.com  Sat Jan 12 05:09:51 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sat, 12 Jan 2013 11:09:51 -0200
Subject: [gdal-dev] which formats support subdatasets?
In-Reply-To: <20130111151838.17804.qmail@s466.sureserver.com>
References: <CA+TxYvMHzKQNh6BaVCw729ODHW_Wc1CPnTP9WRJtw1BqEYa0vw@mail.gmail.com>
	<CA+TxYvNQe6B=U7PjT9KmkDcB0KHErTtJ1XWY=sYJVX-t+UL8kQ@mail.gmail.com>
	<1357909406.50f00d9ed2773@imp.free.fr>
	<CA+TxYvND9iM5FFmJWL4U-f+Azwe80VX_3Ba=7s+U1krztp++iA@mail.gmail.com>
	<20130111151838.17804.qmail@s466.sureserver.com>
Message-ID: <CA+TxYvNMLfuMz4fSu0jt6m3YW5Ur_Y04wrsdCCYtfG3avuT0Xg@mail.gmail.com>

Hi Ivan

it seems to me like the GeoRasters is somewhat special, but I think it
warrants flagging it as supporting subdatasets regardless.

A generic example is the netcdf driver, which supports subdatasets
when a given netcdf file contains several variables, which can have
different CRSs. Each variable is a distinct subdataset, which can be
each be accessed separately.

cheers
Etienne

On Fri, Jan 11, 2013 at 1:18 PM, Ivan Lucena
<ivan.lucena at princeton-ma.us> wrote:
> Hi Etienne,
>
> It sounds like a good idea to add that information to the GDALDriver metata. I can see how one could take advantage of that feature when writing a generic solution to deal with all SUBDATASETS drivers at once.
>
> But I am wondering if I should add that to the GeoRaster driver. This driver only reports SUBDATASETS if the result of the query is not an unique SDO_GEORASTER object.
>
> So for example, if you use an WHERE clause that result in several objects, each object is reported as a SUBDATASET. That is how the QGIS Oracle Raster extension can browse into tables and columns to list existing images. See http://gdal.org/frmt_georaster.html "Browsing the database for GeoRasters".
>
> In that case the SUBDATASET is not a property of the driver, but the GDALDataset. I believe that others SUBDATSET supporters driver also do some similar, or maybe is gdalinfo who does that. If there is just one SUBDATASET the report shows one Dataset, with Rows and Columns other than 512x512 and the info from the "first and only" SUBDATASET.
>
> Anyway, I always thought that the SUBDATASET were kind of a abstraction leak into the GDAL data model. They showed up later in the game and what we have is just an adaptation to make it work. It might be something to re-think for GDAL 2.0. IMHO.
>
> Regards,
>
> Ivan
>
>
>
>
>
>
>
> -------Original Message-------
>   From: Etienne Tourigny
>   To: Even Rouault
>   Cc: gdal-dev
>   Subject: Re: [gdal-dev] which formats support subdatasets?
>   Sent: Jan 11 '13 08:23
>
>   On Fri, Jan 11, 2013 at 11:03 AM, Even Rouault
>   <[LINK: compose.php?to=even.rouault at mines-paris.org]
> even.rouault at mines-paris.org> wrote:
>   > Selon Etienne Tourigny <[LINK: compose.php?to=etourigny.dev at gmail.com]
> etourigny.dev at gmail.com>:
>   >
>   >> Hi,
>   >>
>   >> I'd just like to point out a patch I have submitted to report which
>   >> raster drivers support subdatasets, using the DMD_SUBDATASETS metadata
>   >> item.
>   >> I have also modified gdalinfo and format docs.
>   >>
>   >> [LINK: http://trac.osgeo.org/gdal/ticket/4902]
> http://trac.osgeo.org/gdal/ticket/4902
>   >>
>   >> For example:
>   >>
>   >> $ gdalinfo --format hdf4
>   >> Format Details:
>   >>   Short Name: HDF4
>   >>   Long Name: Hierarchical Data Format Release 4
>   >>   Extension: hdf
>   >>   Help Topic: frmt_hdf4.html
>   >>   Supports: Subdatasets
>   >>
>   >
>   > I've looked at the patch and it seems good. I'm not sure I would have
> added a
>   > new column in the table, but if you think it is usefull, keep it. It
> would
>   > perhaps be good to mention in gdal_datamodel.dox, in the SUBDATASETS
> section,
>   > that drivers that support them advertize the DMD_SUBDATASETS
> capability. And I
>   > think that swig/include/gdalconst.i should also be edited to add the
> new
>   > constant. After that please commit.
>
>   I though adding the info to frmt_various.html was the most
>   appropriate, but it is a bit intrusive. Should it be elsewhere, like
>   the individual driver docs or in gdal_datamodel?
>
>   I also though about adding an "s" key to the output of "--formats"
>   format support string e.g. (rw+vs)
>
>   I'll make the other changes you suggest.
>
>   >
>   > I'm not sure it is appropriate to backport in 1.9 however (new feature,
> output
>   > of gdalinfo --format modified). 1.10 should be out soon hopefully.
>
>   I also don't think it's appropriate adding this to 1.9
>
>   >
>   >>
>   >> Regards,
>   >> Etienne
>   >>
>   >> On Tue, Nov 20, 2012 at 10:43 AM, Etienne Tourigny
>   >> <[LINK: compose.php?to=etourigny.dev at gmail.com]
> etourigny.dev at gmail.com> wrote:
>   >> > Hi
>   >> >
>   >> > I'd like to be able to identify which raster and vector formats
>   >> > support subdatasets (or multipl layers).
>   >> >
>   >> > A quick grep search (grep SUBDATASETS frmts/*/*.cpp) showed which
> GDAL
>   >> > drivers can report subdatasets.
>   >> > Am I missing something?
>   >> >
>   >> > I think it would be nice to include this info in the driver summary
>   >> > page - should I just edit the html or is there some other file to
>   >> > edit?
>   >> >
>   >> > I was wondering how to find that out for OGR drivers - or do all
>   >> > drivers support multiple layers in one datasource?
>   >> >
>   >> >
>   >> > Regards,
>   >> > Etienne
>   >> _______________________________________________
>   >> gdal-dev mailing list
>   >> [LINK: compose.php?to=gdal-dev at lists.osgeo.org]
> gdal-dev at lists.osgeo.org
>   >> [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>   >>
>   >
>   >
>   >
>   >
>   >
>   >
>   >
>   >
>   >
>   >
>   >
>   >
>   >
>   >
>   >
>   >
>   >
>   >
>   _______________________________________________
>   gdal-dev mailing list
>   [LINK: compose.php?to=gdal-dev at lists.osgeo.org] gdal-dev at lists.osgeo.org
>   [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From j.l.h.hartmann at uva.nl  Sat Jan 12 06:08:55 2013
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Sat, 12 Jan 2013 15:08:55 +0100
Subject: [gdal-dev] does gdal support multiple simultaneous writers to
 raster
In-Reply-To: <1E52512B-ADAD-45AD-810C-CA1B8E7F179A@fugro.com.au>
References: <082899B024C30D459BA9ACD1C5E5811904A0135A@msd9.MSD.local>
	<CA+YzLBe=tbmT3VSoLMo4P78Q4keMTuGq0Eh_=+b_5pNyZy1hzA@mail.gmail.com>
	<50EFDEAB.9070100@uva.nl>
	<082899B024C30D459BA9ACD1C5E5811904A0175E@msd9.MSD.local>
	<1357901611.50efef2b5f9df@imp.free.fr>
	<1E52512B-ADAD-45AD-810C-CA1B8E7F179A@fugro.com.au>
Message-ID: <50F16E77.10607@uva.nl>

You probably know this, but there is an option to let gdalwarp use more 
cores: -wo NUM_THREADS=ALL_CPUS. It gives some improvement, but not 
really staggering. Splitting up operations over individual tiles would 
really fasten up things. Even if I use only one VM, I can define 32 
cores, and it would certainly be interesting to experiment with programs 
like MPI to integrate multiple VMs into one computing cluster.

Jan

On 01/12/2013 02:38 AM, Kennedy, Paul wrote:
> Hi,
> Yes, we are pretty sure we will see a significant benefit.  The 
> processing algorithms are CPU bound not io bound. Our digital terrain 
> model interpolations often run for many hours ( we do them overnight) 
> but the underlying file is only a few gigabytes. If we split them into 
> multiple files of tiles and run each on a dedicated process the whole 
> thing is quicker, but this is messy and results in a stitching error.
>
> Another example is gdalwarp. It takes quite some time with a large 
> data set and would be. A good candidate for parallelisation, as would 
> gdaladdo.
>
> I believe slower cores but more of them in pcs are the future. My pc 
> has 8 but they rarely get used to their potential.
>
> I am certain there are some challenges here, that's why it is 
> interesting;)
>
> Regards
> pk
>
> On 11/01/2013, at 6:54 PM, "Even Rouault" 
> <even.rouault at mines-paris.org <mailto:even.rouault at mines-paris.org>> 
> wrote:
>
>> Re: [gdal-dev] does gdal support multiple simultaneous writers to raster
>>
>> Hi,
>>
>> This is an intersting topic, with many "intersecting" issues to deal 
>> with at
>> different levels.
>>
>> First, are you confident that in the use cases you imagine that I/O 
>> access won't
>> be the limiting factor, in which case serialization of I/O could be 
>> acceptable
>> and this would just require an API with a dataset level mutex.
>>
>> There are several places where parallel write should be addressed :
>> - The GDAL core mechanisms that deal with the block cache
>> - Each GDAL driver where parallel write would be supported. I guess 
>> that GDAL
>> drivers should advertize a specific capability
>> - The low-level library used by the driver. In the case of GDAL, libtiff
>>
>> And finally, as Frank underlined, there are intrinsic limitations due 
>> to the
>> format itself. For a compressed TIFF, at some point, you have to 
>> serialize the
>> writing of the tile, because you cannot kown in advance the size of the
>> compressed data, or at least have some coordination of the writers so 
>> that a
>> "next offset available" is properly synchronized between them. The 
>> compression
>> itself could be serialized.
>>
>> I'm not sure however if what Jan mentionned, different process, 
>> writing the same
>> dataset is doable.
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130112/1f3ac051/attachment-0001.html>

From bontepaarden at gmail.com  Sat Jan 12 06:20:13 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Sat, 12 Jan 2013 15:20:13 +0100
Subject: [gdal-dev] does gdal support multiple simultaneous writers to
	raster
In-Reply-To: <50F16E77.10607@uva.nl>
References: <082899B024C30D459BA9ACD1C5E5811904A0135A@msd9.MSD.local>
	<CA+YzLBe=tbmT3VSoLMo4P78Q4keMTuGq0Eh_=+b_5pNyZy1hzA@mail.gmail.com>
	<50EFDEAB.9070100@uva.nl>
	<082899B024C30D459BA9ACD1C5E5811904A0175E@msd9.MSD.local>
	<1357901611.50efef2b5f9df@imp.free.fr>
	<1E52512B-ADAD-45AD-810C-CA1B8E7F179A@fugro.com.au>
	<50F16E77.10607@uva.nl>
Message-ID: <CAHNf2YT7aRR8VrohrCeB_AYhZmfYafDgOwV79mr0UUwV_T1pgg@mail.gmail.com>

To add my 2cnts.

With MapWindow GIS we use TauDEM binaries to perform watershed delineations.
http://hydrology.usu.edu/taudem/taudem5.0/index.html

These TauDEM binaries are optimized to use MPI, but also work if you don't
have MPI installed.
I don't know in detail how it works but in general you set how much
parallel processes you want and TauDEM clips your input geotiff in that
amount of pieces, with some overlap.
Next it processes each clipped tiff in parallel and combines the results
afterwards.
This works very well and very fast.
Perhaps something like this can be introduced for GDAL. The source code for
the TauDEM binaries are available so you can have a look how its done.

--
Paul


2013/1/12 Jan Hartmann <j.l.h.hartmann at uva.nl>

>  You probably know this, but there is an option to let gdalwarp use more
> cores: -wo NUM_THREADS=ALL_CPUS. It gives some improvement, but not really
> staggering. Splitting up operations over individual tiles would really
> fasten up things. Even if I use only one VM, I can define 32 cores, and it
> would certainly be interesting to experiment with programs like MPI to
> integrate multiple VMs into one computing cluster.
>
> Jan
>
>  On 01/12/2013 02:38 AM, Kennedy, Paul wrote:
>
> Hi,
> Yes, we are pretty sure we will see a significant benefit.  The processing
> algorithms are CPU bound not io bound. Our digital terrain model
> interpolations often run for many hours ( we do them overnight) but the
> underlying file is only a few gigabytes. If we split them into multiple
> files of tiles and run each on a dedicated process the whole thing is
> quicker, but this is messy and results in a stitching error.
>
>  Another example is gdalwarp. It takes quite some time with a large data
> set and would be. A good candidate for parallelisation, as would gdaladdo.
>
>  I believe slower cores but more of them in pcs are the future. My pc has
> 8 but they rarely get used to their potential.
>
> I am certain there are some challenges here, that's why it is interesting;)
>
> Regards
> pk
>
> On 11/01/2013, at 6:54 PM, "Even Rouault" <even.rouault at mines-paris.org>
> wrote:
>
>   Hi,
>
> This is an intersting topic, with many "intersecting" issues to deal with
> at
> different levels.
>
> First, are you confident that in the use cases you imagine that I/O access
> won't
> be the limiting factor, in which case serialization of I/O could be
> acceptable
> and this would just require an API with a dataset level mutex.
>
> There are several places where parallel write should be addressed :
> - The GDAL core mechanisms that deal with the block cache
> - Each GDAL driver where parallel write would be supported. I guess that
> GDAL
> drivers should advertize a specific capability
> - The low-level library used by the driver. In the case of GDAL, libtiff
>
> And finally, as Frank underlined, there are intrinsic limitations due to
> the
> format itself. For a compressed TIFF, at some point, you have to serialize
> the
> writing of the tile, because you cannot kown in advance the size of the
> compressed data, or at least have some coordination of the writers so that
> a
> "next offset available" is properly synchronized between them. The
> compression
> itself could be serialized.
>
> I'm not sure however if what Jan mentionned, different process, writing
> the same
> dataset is doable.
>
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130112/1acac94a/attachment.html>

From even.rouault at mines-paris.org  Sat Jan 12 06:57:27 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 12 Jan 2013 15:57:27 +0100
Subject: [gdal-dev] does gdal support multiple simultaneous writers to
	raster
In-Reply-To: <50F16E77.10607@uva.nl>
References: <082899B024C30D459BA9ACD1C5E5811904A0135A@msd9.MSD.local>
	<1E52512B-ADAD-45AD-810C-CA1B8E7F179A@fugro.com.au>
	<50F16E77.10607@uva.nl>
Message-ID: <201301121557.27335.even.rouault@mines-paris.org>

Le samedi 12 janvier 2013 15:08:55, Jan Hartmann a ?crit :
> You probably know this, but there is an option to let gdalwarp use more
> cores: -wo NUM_THREADS=ALL_CPUS. It gives some improvement, but not
> really staggering.

Do you use Proj 4.8.0 ? If not, that might explain why you don't see a 
significant improvement. The performance gain is also much more significant with 
complex resampling kernels. With nearest resampling, most of the time is spent 
in I/O. Increasing the warping memory buffer might also help to benefit from 
parallelization.

For example (debug non-optimized build) :

- 1 thread, nearest :

$ time gdalwarp world_4326.tif out.tif -t_srs EPSG:3857 -overwrite -wo 
NUM_THREADS=1 -wm 512
Creating output file that is 8183P x 8201L.
Processing input file world_4326.tif.
0...10...20...30...40...50...60...70...80...90...100 - done.

real	0m6.390s
user	0m5.940s
sys	0m0.440s

- 4 threads, nearest :

$ time gdalwarp world_4326.tif out.tif -t_srs EPSG:3857 -overwrite -wo 
NUM_THREADS=4 -wm 512
Creating output file that is 8183P x 8201L.
Processing input file world_4326.tif.
0...10...20...30...40...50...60...70...80...90...100 - done.

real	0m3.482s
user	0m6.330s
sys	0m0.700s

- 1 thread, bilinear :

$ time gdalwarp world_4326.tif out.tif -t_srs EPSG:3857 -overwrite -wo 
NUM_THREADS=1 -wm 512 -rb
Creating output file that is 8183P x 8201L.
Processing input file world_4326.tif.
0...10...20...30...40...50...60...70...80...90...100 - done.

real	0m18.387s
user	0m17.840s
sys	0m0.510s

- 4 threads, bilinear :

$ time gdalwarp world_4326.tif out.tif -t_srs EPSG:3857 -overwrite -wo 
NUM_THREADS=4 -wm 512 -rb
Creating output file that is 8183P x 8201L.
Processing input file world_4326.tif.
0...10...20...30...40...50...60...70...80...90...100 - done.

real	0m8.052s
user	0m20.000s
sys	0m0.550s

- 1 thread, cubic :

$ time gdalwarp world_4326.tif out.tif -t_srs EPSG:3857 -overwrite -wo 
NUM_THREADS=1 -wm 512 -rc
Creating output file that is 8183P x 8201L.
Processing input file world_4326.tif.
0...10...20...30...40...50...60...70...80...90...100 - done.

real	0m35.724s
user	0m35.010s
sys	0m0.620s

- 4 threads, cubic :

$ time gdalwarp world_4326.tif out.tif -t_srs EPSG:3857 -overwrite -wo 
NUM_THREADS=4 -wm 512 -rc
Creating output file that is 8183P x 8201L.
Processing input file world_4326.tif.
0...10...20...30...40...50...60...70...80...90...100 - done.

real	0m13.274s
user	0m39.530s
sys	0m0.560s

- 1 thread, lanczos :

$ time gdalwarp world_4326.tif out.tif -t_srs EPSG:3857 -overwrite -wo 
NUM_THREADS=1 -wm 512 -r lanczos
Creating output file that is 8183P x 8201L.
Processing input file world_4326.tif.
0...10...20...30...40...50...60...70...80...90...100 - done.

real	2m21.269s
user	2m20.460s
sys	0m0.400s

- 4 threads, lanczos :

$ time gdalwarp world_4326.tif out.tif -t_srs EPSG:3857 -overwrite -wo 
NUM_THREADS=4 -wm 512 -r lanczos
Creating output file that is 8183P x 8201L.
Processing input file world_4326.tif.
0...10...20...30...40...50...60...70...80...90...100 - done.

real	0m51.852s
user	2m36.520s
sys	0m0.750s



> Splitting up operations over individual tiles would
> really fasten up things. Even if I use only one VM, I can define 32
> cores, and it would certainly be interesting to experiment with programs
> like MPI to integrate multiple VMs into one computing cluster.
> 
> Jan
> 
> On 01/12/2013 02:38 AM, Kennedy, Paul wrote:
> > Hi,
> > Yes, we are pretty sure we will see a significant benefit.  The
> > processing algorithms are CPU bound not io bound. Our digital terrain
> > model interpolations often run for many hours ( we do them overnight)
> > but the underlying file is only a few gigabytes. If we split them into
> > multiple files of tiles and run each on a dedicated process the whole
> > thing is quicker, but this is messy and results in a stitching error.
> > 
> > Another example is gdalwarp. It takes quite some time with a large
> > data set and would be. A good candidate for parallelisation, as would
> > gdaladdo.
> > 
> > I believe slower cores but more of them in pcs are the future. My pc
> > has 8 but they rarely get used to their potential.
> > 
> > I am certain there are some challenges here, that's why it is
> > interesting;)
> > 
> > Regards
> > pk
> > 
> > On 11/01/2013, at 6:54 PM, "Even Rouault"
> > <even.rouault at mines-paris.org <mailto:even.rouault at mines-paris.org>>
> > 
> > wrote:
> >> Re: [gdal-dev] does gdal support multiple simultaneous writers to raster
> >> 
> >> Hi,
> >> 
> >> This is an intersting topic, with many "intersecting" issues to deal
> >> with at
> >> different levels.
> >> 
> >> First, are you confident that in the use cases you imagine that I/O
> >> access won't
> >> be the limiting factor, in which case serialization of I/O could be
> >> acceptable
> >> and this would just require an API with a dataset level mutex.
> >> 
> >> There are several places where parallel write should be addressed :
> >> - The GDAL core mechanisms that deal with the block cache
> >> - Each GDAL driver where parallel write would be supported. I guess
> >> that GDAL
> >> drivers should advertize a specific capability
> >> - The low-level library used by the driver. In the case of GDAL, libtiff
> >> 
> >> And finally, as Frank underlined, there are intrinsic limitations due
> >> to the
> >> format itself. For a compressed TIFF, at some point, you have to
> >> serialize the
> >> writing of the tile, because you cannot kown in advance the size of the
> >> compressed data, or at least have some coordination of the writers so
> >> that a
> >> "next offset available" is properly synchronized between them. The
> >> compression
> >> itself could be serialized.
> >> 
> >> I'm not sure however if what Jan mentionned, different process,
> >> writing the same
> >> dataset is doable.
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Sat Jan 12 07:15:39 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 12 Jan 2013 16:15:39 +0100
Subject: [gdal-dev] does gdal support multiple simultaneous writers to
	raster
In-Reply-To: <1E52512B-ADAD-45AD-810C-CA1B8E7F179A@fugro.com.au>
References: <082899B024C30D459BA9ACD1C5E5811904A0135A@msd9.MSD.local>
	<1357901611.50efef2b5f9df@imp.free.fr>
	<1E52512B-ADAD-45AD-810C-CA1B8E7F179A@fugro.com.au>
Message-ID: <201301121615.39370.even.rouault@mines-paris.org>

Le samedi 12 janvier 2013 02:38:55, Kennedy, Paul a ?crit :
> Hi,
> Yes, we are pretty sure we will see a significant benefit.  The processing
> algorithms are CPU bound not io bound. Our digital terrain model
> interpolations often run for many hours ( we do them overnight) but the
> underlying file is only a few gigabytes.

OK, my understanding is that you don't really need writers to write 
simultaneously. You need to compute tiles or subwindows of the whole raster in 
parallel, but the writing itself of the result of that computation could be 
well done in a serialized way.

That's a bit what is done with gdalwarp  -wo NUM_THREADS=xxxx . Having 
parallelized I/O could perhaps give some extra performance when you have so 
many threads that the time spent in I/O becomes of the same order of magnitude 
than the time spent in computing, but at the expense of probably a significant 
complexity in GDAL core and drivers.

> If we split them into multiple
> files of tiles and run each on a dedicated process the whole thing is
> quicker, but this is messy and results in a stitching error.
> 
> Another example is gdalwarp. It takes quite some time with a large data set
> and would be. A good candidate for parallelisation, as would gdaladdo.
> 
> I believe slower cores but more of them in pcs are the future. My pc has 8
> but they rarely get used to their potential.
> 
> I am certain there are some challenges here, that's why it is interesting;)
> 
> Regards
> pk
> 
> On 11/01/2013, at 6:54 PM, "Even Rouault" <even.rouault at mines-paris.org> 
wrote:
> > Hi,
> > 
> > This is an intersting topic, with many "intersecting" issues to deal with
> > at different levels.
> > 
> > First, are you confident that in the use cases you imagine that I/O
> > access won't be the limiting factor, in which case serialization of I/O
> > could be acceptable and this would just require an API with a dataset
> > level mutex.
> > 
> > There are several places where parallel write should be addressed :
> > - The GDAL core mechanisms that deal with the block cache
> > - Each GDAL driver where parallel write would be supported. I guess that
> > GDAL drivers should advertize a specific capability
> > - The low-level library used by the driver. In the case of GDAL, libtiff
> > 
> > And finally, as Frank underlined, there are intrinsic limitations due to
> > the format itself. For a compressed TIFF, at some point, you have to
> > serialize the writing of the tile, because you cannot kown in advance
> > the size of the compressed data, or at least have some coordination of
> > the writers so that a "next offset available" is properly synchronized
> > between them. The compression itself could be serialized.
> > 
> > I'm not sure however if what Jan mentionned, different process, writing
> > the same dataset is doable.

From even.rouault at mines-paris.org  Sat Jan 12 07:35:28 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 12 Jan 2013 16:35:28 +0100
Subject: [gdal-dev] does gdal support multiple simultaneous writers to
	raster
In-Reply-To: <SNT002-W748F0D35E22EF0AD374A1EDD290@phx.gbl>
References: <SNT002-W748F0D35E22EF0AD374A1EDD290@phx.gbl>
Message-ID: <201301121635.28975.even.rouault@mines-paris.org>

> ex. convert
> multiple datasets to different output datasets in a parallel way.

As Frank underlined, there's currently an issue with the global block cache 
regarding write support.

Imagine that you have 2 threads A and B.
Thread A deal with dataset A, and thread B deal with dataset .
Thread A is in the middle of writing some tile/line of dataset A.
Thread B is trying to fill a new entry in the block cache (with new read data, 
or new data to write). But the block cache is full. So the last recently used 
entry must be discarded. If that entry is a dirty block of dataset A, then it 
must be flushed to disk, in the context of thread B, but at that time thread A 
is also writing data... Which might be an issue since drivers are re-entrant 
(can be invoked by multiple threads, if each thread deal with different 
datasets) not thread-safe.

This specific case here could be fixed in different ways :
A) Making drivers thread-safe (or accessing them through a thread-safe layer), 
that is to say add a dataset level mutex
B) or having a per-dataset block cache instead of a global block cache
C) deal differently with dirty blocks. Only flush them if the operation that 
need to discard the dirty block is initiated by an operation on the same 
dataset as the dirty block.


> Would
> those parallel operations not be affected by GDAL caching for bot read and
> write.Since the cache is set to a limit. Is Accessing the current used
> cache value concurrent safeto increase it/decrease it ?

Hum, I see that GDALGetCacheMax() and GDALSetCacheMax() are not thread safe 
currently. We would need to protect them by the raster block mutex, with a 
leading call to CPLMutexHolderD( &hRBMutex );

From j.l.h.hartmann at uva.nl  Sat Jan 12 08:08:28 2013
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Sat, 12 Jan 2013 17:08:28 +0100
Subject: [gdal-dev] does gdal support multiple simultaneous writers to
 raster
In-Reply-To: <201301121635.28975.even.rouault@mines-paris.org>
References: <SNT002-W748F0D35E22EF0AD374A1EDD290@phx.gbl>
	<201301121635.28975.even.rouault@mines-paris.org>
Message-ID: <50F18A7C.9030700@uva.nl>

I would be interested in an implementation. I'm preparing a proposal to 
georeference the complete cadastral map of the Netherlands in 1832 at a 
10 cm/pixel scale with Cloud facilities. Gdalwarp is the central piece 
of software, and distributed processing capabilities would be very 
important. Could you please think about the possibilities, and what kind 
of funding would be required, so I can take that in during the next few 
months?

Jan

On 01/12/2013 04:35 PM, Even Rouault wrote:
>> ex. convert
>> multiple datasets to different output datasets in a parallel way.
> As Frank underlined, there's currently an issue with the global block cache
> regarding write support.
>
> Imagine that you have 2 threads A and B.
> Thread A deal with dataset A, and thread B deal with dataset .
> Thread A is in the middle of writing some tile/line of dataset A.
> Thread B is trying to fill a new entry in the block cache (with new read data,
> or new data to write). But the block cache is full. So the last recently used
> entry must be discarded. If that entry is a dirty block of dataset A, then it
> must be flushed to disk, in the context of thread B, but at that time thread A
> is also writing data... Which might be an issue since drivers are re-entrant
> (can be invoked by multiple threads, if each thread deal with different
> datasets) not thread-safe.
>
> This specific case here could be fixed in different ways :
> A) Making drivers thread-safe (or accessing them through a thread-safe layer),
> that is to say add a dataset level mutex
> B) or having a per-dataset block cache instead of a global block cache
> C) deal differently with dirty blocks. Only flush them if the operation that
> need to discard the dirty block is initiated by an operation on the same
> dataset as the dirty block.
>
>
>> Would
>> those parallel operations not be affected by GDAL caching for bot read and
>> write.Since the cache is set to a limit. Is Accessing the current used
>> cache value concurrent safeto increase it/decrease it ?
> Hum, I see that GDALGetCacheMax() and GDALSetCacheMax() are not thread safe
> currently. We would need to protect them by the raster block mutex, with a
> leading call to CPLMutexHolderD( &hRBMutex );
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130112/f4f97f17/attachment-0001.html>

From j.l.h.hartmann at uva.nl  Sat Jan 12 08:12:10 2013
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Sat, 12 Jan 2013 17:12:10 +0100
Subject: [gdal-dev] does gdal support multiple simultaneous writers to
 raster
In-Reply-To: <201301121557.27335.even.rouault@mines-paris.org>
References: <082899B024C30D459BA9ACD1C5E5811904A0135A@msd9.MSD.local>
	<1E52512B-ADAD-45AD-810C-CA1B8E7F179A@fugro.com.au>
	<50F16E77.10607@uva.nl>
	<201301121557.27335.even.rouault@mines-paris.org>
Message-ID: <50F18B5A.7070208@uva.nl>

This is about the same acceleartion (2-3 times) as I got on jobs running 
for a few days. My impression is that distributed tile processing would 
give much more dramatic results.


On 01/12/2013 03:57 PM, Even Rouault wrote:
> Le samedi 12 janvier 2013 15:08:55, Jan Hartmann a ?crit :
>> You probably know this, but there is an option to let gdalwarp use more
>> cores: -wo NUM_THREADS=ALL_CPUS. It gives some improvement, but not
>> really staggering.
> Do you use Proj 4.8.0 ? If not, that might explain why you don't see a
> significant improvement. The performance gain is also much more significant with
> complex resampling kernels. With nearest resampling, most of the time is spent
> in I/O. Increasing the warping memory buffer might also help to benefit from
> parallelization.
>
> For example (debug non-optimized build) :
>
> - 1 thread, nearest :
>
> $ time gdalwarp world_4326.tif out.tif -t_srs EPSG:3857 -overwrite -wo
> NUM_THREADS=1 -wm 512
> Creating output file that is 8183P x 8201L.
> Processing input file world_4326.tif.
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
> real	0m6.390s
> user	0m5.940s
> sys	0m0.440s
>
> - 4 threads, nearest :
>
> $ time gdalwarp world_4326.tif out.tif -t_srs EPSG:3857 -overwrite -wo
> NUM_THREADS=4 -wm 512
> Creating output file that is 8183P x 8201L.
> Processing input file world_4326.tif.
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
> real	0m3.482s
> user	0m6.330s
> sys	0m0.700s
>
> - 1 thread, bilinear :
>
> $ time gdalwarp world_4326.tif out.tif -t_srs EPSG:3857 -overwrite -wo
> NUM_THREADS=1 -wm 512 -rb
> Creating output file that is 8183P x 8201L.
> Processing input file world_4326.tif.
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
> real	0m18.387s
> user	0m17.840s
> sys	0m0.510s
>
> - 4 threads, bilinear :
>
> $ time gdalwarp world_4326.tif out.tif -t_srs EPSG:3857 -overwrite -wo
> NUM_THREADS=4 -wm 512 -rb
> Creating output file that is 8183P x 8201L.
> Processing input file world_4326.tif.
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
> real	0m8.052s
> user	0m20.000s
> sys	0m0.550s
>
> - 1 thread, cubic :
>
> $ time gdalwarp world_4326.tif out.tif -t_srs EPSG:3857 -overwrite -wo
> NUM_THREADS=1 -wm 512 -rc
> Creating output file that is 8183P x 8201L.
> Processing input file world_4326.tif.
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
> real	0m35.724s
> user	0m35.010s
> sys	0m0.620s
>
> - 4 threads, cubic :
>
> $ time gdalwarp world_4326.tif out.tif -t_srs EPSG:3857 -overwrite -wo
> NUM_THREADS=4 -wm 512 -rc
> Creating output file that is 8183P x 8201L.
> Processing input file world_4326.tif.
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
> real	0m13.274s
> user	0m39.530s
> sys	0m0.560s
>
> - 1 thread, lanczos :
>
> $ time gdalwarp world_4326.tif out.tif -t_srs EPSG:3857 -overwrite -wo
> NUM_THREADS=1 -wm 512 -r lanczos
> Creating output file that is 8183P x 8201L.
> Processing input file world_4326.tif.
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
> real	2m21.269s
> user	2m20.460s
> sys	0m0.400s
>
> - 4 threads, lanczos :
>
> $ time gdalwarp world_4326.tif out.tif -t_srs EPSG:3857 -overwrite -wo
> NUM_THREADS=4 -wm 512 -r lanczos
> Creating output file that is 8183P x 8201L.
> Processing input file world_4326.tif.
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
> real	0m51.852s
> user	2m36.520s
> sys	0m0.750s
>
>
>
>> Splitting up operations over individual tiles would
>> really fasten up things. Even if I use only one VM, I can define 32
>> cores, and it would certainly be interesting to experiment with programs
>> like MPI to integrate multiple VMs into one computing cluster.
>>
>> Jan
>>
>> On 01/12/2013 02:38 AM, Kennedy, Paul wrote:
>>> Hi,
>>> Yes, we are pretty sure we will see a significant benefit.  The
>>> processing algorithms are CPU bound not io bound. Our digital terrain
>>> model interpolations often run for many hours ( we do them overnight)
>>> but the underlying file is only a few gigabytes. If we split them into
>>> multiple files of tiles and run each on a dedicated process the whole
>>> thing is quicker, but this is messy and results in a stitching error.
>>>
>>> Another example is gdalwarp. It takes quite some time with a large
>>> data set and would be. A good candidate for parallelisation, as would
>>> gdaladdo.
>>>
>>> I believe slower cores but more of them in pcs are the future. My pc
>>> has 8 but they rarely get used to their potential.
>>>
>>> I am certain there are some challenges here, that's why it is
>>> interesting;)
>>>
>>> Regards
>>> pk
>>>
>>> On 11/01/2013, at 6:54 PM, "Even Rouault"
>>> <even.rouault at mines-paris.org <mailto:even.rouault at mines-paris.org>>
>>>
>>> wrote:
>>>> Re: [gdal-dev] does gdal support multiple simultaneous writers to raster
>>>>
>>>> Hi,
>>>>
>>>> This is an intersting topic, with many "intersecting" issues to deal
>>>> with at
>>>> different levels.
>>>>
>>>> First, are you confident that in the use cases you imagine that I/O
>>>> access won't
>>>> be the limiting factor, in which case serialization of I/O could be
>>>> acceptable
>>>> and this would just require an API with a dataset level mutex.
>>>>
>>>> There are several places where parallel write should be addressed :
>>>> - The GDAL core mechanisms that deal with the block cache
>>>> - Each GDAL driver where parallel write would be supported. I guess
>>>> that GDAL
>>>> drivers should advertize a specific capability
>>>> - The low-level library used by the driver. In the case of GDAL, libtiff
>>>>
>>>> And finally, as Frank underlined, there are intrinsic limitations due
>>>> to the
>>>> format itself. For a compressed TIFF, at some point, you have to
>>>> serialize the
>>>> writing of the tile, because you cannot kown in advance the size of the
>>>> compressed data, or at least have some coordination of the writers so
>>>> that a
>>>> "next offset available" is properly synchronized between them. The
>>>> compression
>>>> itself could be serialized.
>>>>
>>>> I'm not sure however if what Jan mentionned, different process,
>>>> writing the same
>>>> dataset is doable.
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130112/cbb42f7d/attachment.html>

From P.Kennedy at fugro.com.au  Sat Jan 12 18:24:27 2013
From: P.Kennedy at fugro.com.au (Kennedy, Paul)
Date: Sun, 13 Jan 2013 10:24:27 +0800
Subject: [gdal-dev] does gdal support multiple simultaneous writers to
	raster
In-Reply-To: <201301121615.39370.even.rouault@mines-paris.org>
References: <082899B024C30D459BA9ACD1C5E5811904A0135A@msd9.MSD.local>
	<1357901611.50efef2b5f9df@imp.free.fr>
	<1E52512B-ADAD-45AD-810C-CA1B8E7F179A@fugro.com.au>
	<201301121615.39370.even.rouault@mines-paris.org>
Message-ID: <B662CAC6-5938-444B-B7AF-66FE44DF231A@fugro.com.au>

Hi
Simultaneous writers would be a better long term solution as we often improve the raster following initial creation. This improvement may well be a filter run on a sub region ( eg a despeckle) or updating a piece of the dtm with better information or even some manual edits as a last resort. 
I can imagine a Hadoop style map/reduce would fit nicely into your sub window idea. 

Regards
pk

On 12/01/2013, at 11:16 PM, "Even Rouault" <even.rouault at mines-paris.org> wrote:

> Le samedi 12 janvier 2013 02:38:55, Kennedy, Paul a ?crit :
> > Hi,
> > Yes, we are pretty sure we will see a significant benefit.  The processing
> > algorithms are CPU bound not io bound. Our digital terrain model
> > interpolations often run for many hours ( we do them overnight) but the
> > underlying file is only a few gigabytes.
> 
> OK, my understanding is that you don't really need writers to write
> simultaneously. You need to compute tiles or subwindows of the whole raster in
> parallel, but the writing itself of the result of that computation could be
> well done in a serialized way.
> 
> That's a bit what is done with gdalwarp  -wo NUM_THREADS=xxxx . Having
> parallelized I/O could perhaps give some extra performance when you have so
> many threads that the time spent in I/O becomes of the same order of magnitude
> than the time spent in computing, but at the expense of probably a significant
> complexity in GDAL core and drivers.
> 
> > If we split them into multiple
> > files of tiles and run each on a dedicated process the whole thing is
> > quicker, but this is messy and results in a stitching error.
> >
> > Another example is gdalwarp. It takes quite some time with a large data set
> > and would be. A good candidate for parallelisation, as would gdaladdo.
> >
> > I believe slower cores but more of them in pcs are the future. My pc has 8
> > but they rarely get used to their potential.
> >
> > I am certain there are some challenges here, that's why it is interesting;)
> >
> > Regards
> > pk
> >
> > On 11/01/2013, at 6:54 PM, "Even Rouault" <even.rouault at mines-paris.org>
> wrote:
> > > Hi,
> > >
> > > This is an intersting topic, with many "intersecting" issues to deal with
> > > at different levels.
> > >
> > > First, are you confident that in the use cases you imagine that I/O
> > > access won't be the limiting factor, in which case serialization of I/O
> > > could be acceptable and this would just require an API with a dataset
> > > level mutex.
> > >
> > > There are several places where parallel write should be addressed :
> > > - The GDAL core mechanisms that deal with the block cache
> > > - Each GDAL driver where parallel write would be supported. I guess that
> > > GDAL drivers should advertize a specific capability
> > > - The low-level library used by the driver. In the case of GDAL, libtiff
> > >
> > > And finally, as Frank underlined, there are intrinsic limitations due to
> > > the format itself. For a compressed TIFF, at some point, you have to
> > > serialize the writing of the tile, because you cannot kown in advance
> > > the size of the compressed data, or at least have some coordination of
> > > the writers so that a "next offset available" is properly synchronized
> > > between them. The compression itself could be serialized.
> > >
> > > I'm not sure however if what Jan mentionned, different process, writing
> > > the same dataset is doable.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130113/6fa700ad/attachment.html>

From etourigny.dev at gmail.com  Sun Jan 13 04:57:39 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sun, 13 Jan 2013 10:57:39 -0200
Subject: [gdal-dev] which formats support subdatasets?
In-Reply-To: <CA+TxYvNMLfuMz4fSu0jt6m3YW5Ur_Y04wrsdCCYtfG3avuT0Xg@mail.gmail.com>
References: <CA+TxYvMHzKQNh6BaVCw729ODHW_Wc1CPnTP9WRJtw1BqEYa0vw@mail.gmail.com>
	<CA+TxYvNQe6B=U7PjT9KmkDcB0KHErTtJ1XWY=sYJVX-t+UL8kQ@mail.gmail.com>
	<1357909406.50f00d9ed2773@imp.free.fr>
	<CA+TxYvND9iM5FFmJWL4U-f+Azwe80VX_3Ba=7s+U1krztp++iA@mail.gmail.com>
	<20130111151838.17804.qmail@s466.sureserver.com>
	<CA+TxYvNMLfuMz4fSu0jt6m3YW5Ur_Y04wrsdCCYtfG3avuT0Xg@mail.gmail.com>
Message-ID: <CA+TxYvPyvLbeY1htXSyPCCq9CbBVBxqtoJ2cq-6wT0ScTR64Zg@mail.gmail.com>

Hi,

Just a heads up that I pushed this to dev branch, and updated docs
(gdal_utilities and gdal_datamodel) as well as output of --formats and
--format commandline switches.

Cheers,
Etienne

On Sat, Jan 12, 2013 at 11:09 AM, Etienne Tourigny
<etourigny.dev at gmail.com> wrote:
> Hi Ivan
>
> it seems to me like the GeoRasters is somewhat special, but I think it
> warrants flagging it as supporting subdatasets regardless.
>
> A generic example is the netcdf driver, which supports subdatasets
> when a given netcdf file contains several variables, which can have
> different CRSs. Each variable is a distinct subdataset, which can be
> each be accessed separately.
>
> cheers
> Etienne
>
> On Fri, Jan 11, 2013 at 1:18 PM, Ivan Lucena
> <ivan.lucena at princeton-ma.us> wrote:
>> Hi Etienne,
>>
>> It sounds like a good idea to add that information to the GDALDriver metata. I can see how one could take advantage of that feature when writing a generic solution to deal with all SUBDATASETS drivers at once.
>>
>> But I am wondering if I should add that to the GeoRaster driver. This driver only reports SUBDATASETS if the result of the query is not an unique SDO_GEORASTER object.
>>
>> So for example, if you use an WHERE clause that result in several objects, each object is reported as a SUBDATASET. That is how the QGIS Oracle Raster extension can browse into tables and columns to list existing images. See http://gdal.org/frmt_georaster.html "Browsing the database for GeoRasters".
>>
>> In that case the SUBDATASET is not a property of the driver, but the GDALDataset. I believe that others SUBDATSET supporters driver also do some similar, or maybe is gdalinfo who does that. If there is just one SUBDATASET the report shows one Dataset, with Rows and Columns other than 512x512 and the info from the "first and only" SUBDATASET.
>>
>> Anyway, I always thought that the SUBDATASET were kind of a abstraction leak into the GDAL data model. They showed up later in the game and what we have is just an adaptation to make it work. It might be something to re-think for GDAL 2.0. IMHO.
>>
>> Regards,
>>
>> Ivan
>>
>>
>>
>>
>>
>>
>>
>> -------Original Message-------
>>   From: Etienne Tourigny
>>   To: Even Rouault
>>   Cc: gdal-dev
>>   Subject: Re: [gdal-dev] which formats support subdatasets?
>>   Sent: Jan 11 '13 08:23
>>
>>   On Fri, Jan 11, 2013 at 11:03 AM, Even Rouault
>>   <[LINK: compose.php?to=even.rouault at mines-paris.org]
>> even.rouault at mines-paris.org> wrote:
>>   > Selon Etienne Tourigny <[LINK: compose.php?to=etourigny.dev at gmail.com]
>> etourigny.dev at gmail.com>:
>>   >
>>   >> Hi,
>>   >>
>>   >> I'd just like to point out a patch I have submitted to report which
>>   >> raster drivers support subdatasets, using the DMD_SUBDATASETS metadata
>>   >> item.
>>   >> I have also modified gdalinfo and format docs.
>>   >>
>>   >> [LINK: http://trac.osgeo.org/gdal/ticket/4902]
>> http://trac.osgeo.org/gdal/ticket/4902
>>   >>
>>   >> For example:
>>   >>
>>   >> $ gdalinfo --format hdf4
>>   >> Format Details:
>>   >>   Short Name: HDF4
>>   >>   Long Name: Hierarchical Data Format Release 4
>>   >>   Extension: hdf
>>   >>   Help Topic: frmt_hdf4.html
>>   >>   Supports: Subdatasets
>>   >>
>>   >
>>   > I've looked at the patch and it seems good. I'm not sure I would have
>> added a
>>   > new column in the table, but if you think it is usefull, keep it. It
>> would
>>   > perhaps be good to mention in gdal_datamodel.dox, in the SUBDATASETS
>> section,
>>   > that drivers that support them advertize the DMD_SUBDATASETS
>> capability. And I
>>   > think that swig/include/gdalconst.i should also be edited to add the
>> new
>>   > constant. After that please commit.
>>
>>   I though adding the info to frmt_various.html was the most
>>   appropriate, but it is a bit intrusive. Should it be elsewhere, like
>>   the individual driver docs or in gdal_datamodel?
>>
>>   I also though about adding an "s" key to the output of "--formats"
>>   format support string e.g. (rw+vs)
>>
>>   I'll make the other changes you suggest.
>>
>>   >
>>   > I'm not sure it is appropriate to backport in 1.9 however (new feature,
>> output
>>   > of gdalinfo --format modified). 1.10 should be out soon hopefully.
>>
>>   I also don't think it's appropriate adding this to 1.9
>>
>>   >
>>   >>
>>   >> Regards,
>>   >> Etienne
>>   >>
>>   >> On Tue, Nov 20, 2012 at 10:43 AM, Etienne Tourigny
>>   >> <[LINK: compose.php?to=etourigny.dev at gmail.com]
>> etourigny.dev at gmail.com> wrote:
>>   >> > Hi
>>   >> >
>>   >> > I'd like to be able to identify which raster and vector formats
>>   >> > support subdatasets (or multipl layers).
>>   >> >
>>   >> > A quick grep search (grep SUBDATASETS frmts/*/*.cpp) showed which
>> GDAL
>>   >> > drivers can report subdatasets.
>>   >> > Am I missing something?
>>   >> >
>>   >> > I think it would be nice to include this info in the driver summary
>>   >> > page - should I just edit the html or is there some other file to
>>   >> > edit?
>>   >> >
>>   >> > I was wondering how to find that out for OGR drivers - or do all
>>   >> > drivers support multiple layers in one datasource?
>>   >> >
>>   >> >
>>   >> > Regards,
>>   >> > Etienne
>>   >> _______________________________________________
>>   >> gdal-dev mailing list
>>   >> [LINK: compose.php?to=gdal-dev at lists.osgeo.org]
>> gdal-dev at lists.osgeo.org
>>   >> [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>   >>
>>   >
>>   >
>>   >
>>   >
>>   >
>>   >
>>   >
>>   >
>>   >
>>   >
>>   >
>>   >
>>   >
>>   >
>>   >
>>   >
>>   >
>>   >
>>   _______________________________________________
>>   gdal-dev mailing list
>>   [LINK: compose.php?to=gdal-dev at lists.osgeo.org] gdal-dev at lists.osgeo.org
>>   [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jukka.rahkonen at mmmtike.fi  Mon Jan 14 00:47:27 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 14 Jan 2013 08:47:27 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?does_gdal_support_multiple_simultaneous_writ?=
	=?utf-8?q?ers_to=09raster?=
References: <082899B024C30D459BA9ACD1C5E5811904A0135A@msd9.MSD.local>
	<1357901611.50efef2b5f9df@imp.free.fr>
	<1E52512B-ADAD-45AD-810C-CA1B8E7F179A@fugro.com.au>
	<201301121615.39370.even.rouault@mines-paris.org>
	<B662CAC6-5938-444B-B7AF-66FE44DF231A@fugro.com.au>
Message-ID: <loom.20130114T085031-605@post.gmane.org>

Kennedy, Paul <P.Kennedy <at> fugro.com.au> writes:

> 
> 
> Hi
> Simultaneous writers would be a better long term solution as we often improve
the raster following initial creation. This improvement may well be a filter run
on a sub region ( eg a despeckle) or updating a piece of the dtm with better
information or even some manual edits as a last resort.?
> I can imagine a Hadoop style map/reduce would fit nicely into your sub window
idea.?Regardspk

Hi,

Just thinking that while updating pieces of a massive target raster file with
several simultaneous writers could probably be doable and make sense with
coverage data like dtm, the advantage is not as great with raster maps and
aerial/satellite image mosaics which need also overviews for effective practical
use. I guess that piecewise automatic updating of overviews could be somewhat
complicated thing to implement. Perhaps raster database formats like PostGIS
raster or Rasterlite would suit better for this sort of update operations.

-Jukka Rahkonen-


From nfarah at hotmail.com  Mon Jan 14 04:38:07 2013
From: nfarah at hotmail.com (N. Farah)
Date: Mon, 14 Jan 2013 07:38:07 -0500
Subject: [gdal-dev] does gdal support multiple simultaneous writers to
 raster
In-Reply-To: <201301121635.28975.even.rouault@mines-paris.org>
References: <SNT002-W748F0D35E22EF0AD374A1EDD290@phx.gbl>,
	<201301121635.28975.even.rouault@mines-paris.org>
Message-ID: <SNT002-W1134DD83EE18FFA38D14D1DDD2E0@phx.gbl>

Thanks Even for your response. That clarifies more the current capabilities of GDAL on parallel processing.I think that as parallel processing gain more momentum, GDAL and multiple GDAL based applications would benefit for adopting it.In Windows world, parallel processing was added in Visual Studio 2010 (PPL for C++ and TPL for .net) and re-enforced a bit morein Visual Studio 2012 by C++ AMP: GPU based processing.
I do not know enough the low level GDAL caching but it seems to me that option B) could work (dataset based caching).I agree that exposing capability level per driver about concurrent safety is a good one. As some drivers dependson 3rd party libraries that might not be concurrent safe. Tagging those drivers as not concurrent safe would be a first step,before trying to address their underlying concurrency safe issues.
As far as reading datasets, I tested HDF4 or 5 dataset to read its subdatasets in a parallel way and encountered an error.So some drivers may have the parallel reading issue as well. May be reading sub-datasets is simply not concurrent safe evenif each sub-dataset is opened as its own dataset ? 
If there is interest to work on parallel writing (and may be reading), I can help at least by testing.
ThanksNoureddine Farah

> From: even.rouault at mines-paris.org
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] does gdal support multiple simultaneous writers to raster
> Date: Sat, 12 Jan 2013 16:35:28 +0100
> CC: nfarah at hotmail.com
> 
> > ex. convert
> > multiple datasets to different output datasets in a parallel way.
> 
> As Frank underlined, there's currently an issue with the global block cache 
> regarding write support.
> 
> Imagine that you have 2 threads A and B.
> Thread A deal with dataset A, and thread B deal with dataset .
> Thread A is in the middle of writing some tile/line of dataset A.
> Thread B is trying to fill a new entry in the block cache (with new read data, 
> or new data to write). But the block cache is full. So the last recently used 
> entry must be discarded. If that entry is a dirty block of dataset A, then it 
> must be flushed to disk, in the context of thread B, but at that time thread A 
> is also writing data... Which might be an issue since drivers are re-entrant 
> (can be invoked by multiple threads, if each thread deal with different 
> datasets) not thread-safe.
> 
> This specific case here could be fixed in different ways :
> A) Making drivers thread-safe (or accessing them through a thread-safe layer), 
> that is to say add a dataset level mutex
> B) or having a per-dataset block cache instead of a global block cache
> C) deal differently with dirty blocks. Only flush them if the operation that 
> need to discard the dirty block is initiated by an operation on the same 
> dataset as the dirty block.
> 
> 
> > Would
> > those parallel operations not be affected by GDAL caching for bot read and
> > write.Since the cache is set to a limit. Is Accessing the current used
> > cache value concurrent safeto increase it/decrease it ?
> 
> Hum, I see that GDALGetCacheMax() and GDALSetCacheMax() are not thread safe 
> currently. We would need to protect them by the raster block mutex, with a 
> leading call to CPLMutexHolderD( &hRBMutex );
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130114/dad8248b/attachment.html>

From even.rouault at mines-paris.org  Mon Jan 14 06:26:12 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 14 Jan 2013 15:26:12 +0100
Subject: [gdal-dev] does gdal support multiple simultaneous writers to
	raster
In-Reply-To: <SNT002-W1134DD83EE18FFA38D14D1DDD2E0@phx.gbl>
References: <SNT002-W748F0D35E22EF0AD374A1EDD290@phx.gbl>,
	<201301121635.28975.even.rouault@mines-paris.org>
	<SNT002-W1134DD83EE18FFA38D14D1DDD2E0@phx.gbl>
Message-ID: <1358173572.50f4158458bfa@imp.free.fr>

Selon "N. Farah" <nfarah at hotmail.com>:

> Thanks Even for your response. That clarifies more the current capabilities
> of GDAL on parallel processing.I think that as parallel processing gain more
> momentum, GDAL and multiple GDAL based applications would benefit for
> adopting it.In Windows world, parallel processing was added in Visual Studio
> 2010 (PPL for C++ and TPL for .net) and re-enforced a bit morein Visual
> Studio 2012 by C++ AMP: GPU based processing.
> I do not know enough the low level GDAL caching but it seems to me that
> option B) could work (dataset based caching).I agree that exposing capability
> level per driver about concurrent safety is a good one. As some drivers
> dependson 3rd party libraries that might not be concurrent safe. Tagging
> those drivers as not concurrent safe would be a first step,before trying to
> address their underlying concurrency safe issues

Yes, 3rd party libraries might be a problem. A first step would be do add a
per-driver mutex to avoid running into their concurrency problems, if confirmed.
Fixing concurrency problems is them is another story.

> As far as reading datasets, I tested HDF4 or 5 dataset to read its
> subdatasets in a parallel way and encountered an error.So some drivers may
> have the parallel reading issue as well. May be reading sub-datasets is
> simply not concurrent safe evenif each sub-dataset is opened as its own
> dataset ?

This is not linked to the sub-dataset mechanism in itself. You can certainly
read NITF or GTiff subdatasets in a thread-safe way.
Reviewing quickly the GDAL side of the HDF4 and HDF5 drivers, I don't see any
global variable used, so the problems might come from the libhdf4 and libhdf5
themselves.


From warmerdam at pobox.com  Mon Jan 14 06:32:34 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 14 Jan 2013 06:32:34 -0800
Subject: [gdal-dev] does gdal support multiple simultaneous writers to
	raster
In-Reply-To: <50F18A7C.9030700@uva.nl>
References: <SNT002-W748F0D35E22EF0AD374A1EDD290@phx.gbl>
	<201301121635.28975.even.rouault@mines-paris.org>
	<50F18A7C.9030700@uva.nl>
Message-ID: <CA+YzLBc0-pOvEZuDURB+nAwG7Ux8jy9FC6xqPuVBOgj=Ct+W3w@mail.gmail.com>

Jan,

While it is desirable to resolve the multithreaded write issue in gdal I
don't think it is critical for your use case.

I think your case would be handled more appropriately by multiple
*processes*.  You would still run into issues with write consistency but of
a different nature.  The easiest approach is to assign different spatial
regions to each worker server and run these linearly.

Best regards,
On Jan 12, 2013 8:05 AM, "Jan Hartmann" <j.l.h.hartmann at uva.nl> wrote:

>  I would be interested in an implementation. I'm preparing a proposal to
> georeference the complete cadastral map of the Netherlands in 1832 at a 10
> cm/pixel scale with Cloud facilities. Gdalwarp is the central piece of
> software, and distributed processing capabilities would be very important.
> Could you please think about the possibilities, and what kind of funding
> would be required, so I can take that in during the next few months?
>
> Jan
>
>  On 01/12/2013 04:35 PM, Even Rouault wrote:
>
>  ex. convert
> multiple datasets to different output datasets in a parallel way.
>
>
> As Frank underlined, there's currently an issue with the global block cache
> regarding write support.
>
> Imagine that you have 2 threads A and B.
> Thread A deal with dataset A, and thread B deal with dataset .
> Thread A is in the middle of writing some tile/line of dataset A.
> Thread B is trying to fill a new entry in the block cache (with new read data,
> or new data to write). But the block cache is full. So the last recently used
> entry must be discarded. If that entry is a dirty block of dataset A, then it
> must be flushed to disk, in the context of thread B, but at that time thread A
> is also writing data... Which might be an issue since drivers are re-entrant
> (can be invoked by multiple threads, if each thread deal with different
> datasets) not thread-safe.
>
> This specific case here could be fixed in different ways :
> A) Making drivers thread-safe (or accessing them through a thread-safe layer),
> that is to say add a dataset level mutex
> B) or having a per-dataset block cache instead of a global block cache
> C) deal differently with dirty blocks. Only flush them if the operation that
> need to discard the dirty block is initiated by an operation on the same
> dataset as the dirty block.
>
>
>
>  Would
> those parallel operations not be affected by GDAL caching for bot read and
> write.Since the cache is set to a limit. Is Accessing the current used
> cache value concurrent safeto increase it/decrease it ?
>
>
> Hum, I see that GDALGetCacheMax() and GDALSetCacheMax() are not thread safe
> currently. We would need to protect them by the raster block mutex, with a
> leading call to CPLMutexHolderD( &hRBMutex );
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130114/a14b2a1a/attachment.html>

From j.l.h.hartmann at uva.nl  Mon Jan 14 06:38:29 2013
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Mon, 14 Jan 2013 15:38:29 +0100
Subject: [gdal-dev] does gdal support multiple simultaneous writers to
 raster
In-Reply-To: <CA+YzLBc0-pOvEZuDURB+nAwG7Ux8jy9FC6xqPuVBOgj=Ct+W3w@mail.gmail.com>
References: <SNT002-W748F0D35E22EF0AD374A1EDD290@phx.gbl>	<201301121635.28975.even.rouault@mines-paris.org>	<50F18A7C.9030700@uva.nl>
	<CA+YzLBc0-pOvEZuDURB+nAwG7Ux8jy9FC6xqPuVBOgj=Ct+W3w@mail.gmail.com>
Message-ID: <50F41865.7010904@uva.nl>

Thanks Frank, that's what I have been doing until now. I was hoping that 
GDAL could do some of the bookkeeping for me.

Bu the multithreaded issue remains important. Anything that could speed 
up the warping process, for whatever configuration, would be welcome and 
I would be happy to assist.

Jan

On 14-1-2013 15:32, Frank Warmerdam wrote:
>
> Jan,
>
> While it is desirable to resolve the multithreaded write issue in gdal 
> I don't think it is critical for your use case.
>
> I think your case would be handled more appropriately by multiple 
> *processes*.  You would still run into issues with write consistency 
> but of a different nature.  The easiest approach is to assign 
> different spatial regions to each worker server and run these linearly.
>
> Best regards,
>
> On Jan 12, 2013 8:05 AM, "Jan Hartmann" <j.l.h.hartmann at uva.nl 
> <mailto:j.l.h.hartmann at uva.nl>> wrote:
>
>     I would be interested in an implementation. I'm preparing a
>     proposal to georeference the complete cadastral map of the
>     Netherlands in 1832 at a 10 cm/pixel scale with Cloud facilities.
>     Gdalwarp is the central piece of software, and distributed
>     processing capabilities would be very important. Could you please
>     think about the possibilities, and what kind of funding would be
>     required, so I can take that in during the next few months?
>
>     Jan
>
>     On 01/12/2013 04:35 PM, Even Rouault wrote:
>>>     ex. convert
>>>     multiple datasets to different output datasets in a parallel way.
>>     As Frank underlined, there's currently an issue with the global block cache
>>     regarding write support.
>>
>>     Imagine that you have 2 threads A and B.
>>     Thread A deal with dataset A, and thread B deal with dataset .
>>     Thread A is in the middle of writing some tile/line of dataset A.
>>     Thread B is trying to fill a new entry in the block cache (with new read data,
>>     or new data to write). But the block cache is full. So the last recently used
>>     entry must be discarded. If that entry is a dirty block of dataset A, then it
>>     must be flushed to disk, in the context of thread B, but at that time thread A
>>     is also writing data... Which might be an issue since drivers are re-entrant
>>     (can be invoked by multiple threads, if each thread deal with different
>>     datasets) not thread-safe.
>>
>>     This specific case here could be fixed in different ways :
>>     A) Making drivers thread-safe (or accessing them through a thread-safe layer),
>>     that is to say add a dataset level mutex
>>     B) or having a per-dataset block cache instead of a global block cache
>>     C) deal differently with dirty blocks. Only flush them if the operation that
>>     need to discard the dirty block is initiated by an operation on the same
>>     dataset as the dirty block.
>>
>>
>>>     Would
>>>     those parallel operations not be affected by GDAL caching for bot read and
>>>     write.Since the cache is set to a limit. Is Accessing the current used
>>>     cache value concurrent safeto increase it/decrease it ?
>>     Hum, I see that GDALGetCacheMax() and GDALSetCacheMax() are not thread safe
>>     currently. We would need to protect them by the raster block mutex, with a
>>     leading call to CPLMutexHolderD(&hRBMutex );
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130114/55be1500/attachment-0001.html>

From tkeitt at utexas.edu  Mon Jan 14 10:21:29 2013
From: tkeitt at utexas.edu (Tim Keitt)
Date: Mon, 14 Jan 2013 12:21:29 -0600
Subject: [gdal-dev] does gdal support multiple simultaneous writers to
	raster
In-Reply-To: <loom.20130114T085031-605@post.gmane.org>
References: <082899B024C30D459BA9ACD1C5E5811904A0135A@msd9.MSD.local>
	<1357901611.50efef2b5f9df@imp.free.fr>
	<1E52512B-ADAD-45AD-810C-CA1B8E7F179A@fugro.com.au>
	<201301121615.39370.even.rouault@mines-paris.org>
	<B662CAC6-5938-444B-B7AF-66FE44DF231A@fugro.com.au>
	<loom.20130114T085031-605@post.gmane.org>
Message-ID: <CANnL8goBoXWiiA0PRo7rzUSEQzCYvLd9Hwud=dUFr21z8fx_FA@mail.gmail.com>

On Mon, Jan 14, 2013 at 2:47 AM, Jukka Rahkonen
<jukka.rahkonen at mmmtike.fi>wrote:

> Kennedy, Paul <P.Kennedy <at> fugro.com.au> writes:
>
> >
> >
> > Hi
> > Simultaneous writers would be a better long term solution as we often
> improve
> the raster following initial creation. This improvement may well be a
> filter run
> on a sub region ( eg a despeckle) or updating a piece of the dtm with
> better
> information or even some manual edits as a last resort.
> > I can imagine a Hadoop style map/reduce would fit nicely into your sub
> window
> idea. Regardspk
>
> Hi,
>
> Just thinking that while updating pieces of a massive target raster file
> with
> several simultaneous writers could probably be doable and make sense with
> coverage data like dtm, the advantage is not as great with raster maps and
> aerial/satellite image mosaics which need also overviews for effective
> practical
> use. I guess that piecewise automatic updating of overviews could be
> somewhat
> complicated thing to implement. Perhaps raster database formats like
> PostGIS
> raster or Rasterlite would suit better for this sort of update operations.
>

We've found postgis and most other similar solutions to be a bottleneck
when working with massive grids and meshes. We're looking more and more at
parallel HDF5 and ROMIO.

THK


>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
http://www.keittlab.org/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130114/d533b9e6/attachment.html>

From mateusz at loskot.net  Tue Jan 15 03:05:42 2013
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 15 Jan 2013 11:05:42 +0000
Subject: [gdal-dev] libecwj2 with multiple readers
Message-ID: <CABUeae8FRQHTKHVOQk-3K64DpJPUeDvVE+rDsH-dLLd0se2YuA@mail.gmail.com>

Hi,

Without getting into details, I wonder, has anyone ever used GDAL with
libecwj2 support to access ECW dataset(s) from multiple readers?

Apparently, libecwj2 manages some internal static environment which
can not be safely shared, unless all accesses to libecwj2 are serialised.
For example, in CNCSJP2FileViewVector class there is

static CNCSJP2FileViewVector sm_Views;

and the way it is used, may lead to subtle problems
and destruction fiasco related to multiple threads
managed by this static object.
Possible simple solution is to replace this static object
with one allocated from dynamic storage.
But, it seems it does not solve all possible. problems
and may fail if libecwj2 is accessed (through GDAL)
from multiple threads.
One leak of problem is crash during shutdown stages in libecwj2.

Does anyone know any piece of documentation where relevant
limitations and assumptions of libecwj2 are described,
either internal docs in GDAL or external resources.
Any related brainstorming would be greatly appreciated.

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net

From bernd.kamjunke at csogis.de  Tue Jan 15 03:40:01 2013
From: bernd.kamjunke at csogis.de (Bernd Kamjunke)
Date: Tue, 15 Jan 2013 12:40:01 +0100
Subject: [gdal-dev] ogr2ogr writing dxf with multiple layers
Message-ID: <8421E7B1F8DB7B40B247EE725362B5683A5A181018@CSOSBS.cso.local>

Hello to all!

Is it possible to write data e.g. from an sqlite Database with several tables
into one dxf with multiple layers?

I found some information that it may be not, but I am not sure if it is possible
meanwhile.
I am using gdal 1.9 and I am trying something like this with german ALKIS-Data in a
SQLite-Database:
ogr2ogr -a_srs "EPSG:25832" -sql "SELECT *, 'ap_pto' AS Layer FROM ap_pto" C:\temp\Test_Schrift_ap_pto2_mit_Bahnverkehr_plus.dxf C:\ALKIS\BO\SQLite\ALKIS.sqlite -f "DXF" -dialect SQLITE -skipfailures

Inside the "Test_Schrift_ap_pto2_mit_Bahnverkehr_plus.dxf" File there is already a Layer from an export before
and unfortunately this layer will be always overwritten. :(

I have looked here for some Information:
http://gis.uster.ch/dokumentation/datenkonvertierung/ogr
http://www.gdal.org/ogr/drv_dxf.html
http://www.gdal.org/ogr/ogr_feature_style.html

Thanks for any information!
Bernd

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130115/a0e25f2e/attachment.html>

From jorgearevalo at libregis.org  Tue Jan 15 04:34:13 2013
From: jorgearevalo at libregis.org (Jorge Arevalo)
Date: Tue, 15 Jan 2013 13:34:13 +0100
Subject: [gdal-dev] Merging 3 1-band GeoTIFFs in 1 3-band GeoTIFF
Message-ID: <CAMhtMNM4u_tSyL+oWz31uFeNqt=AAmyhu4Tt1=cPpBdAoZfmSQ@mail.gmail.com>

Hello,

I have 3 single band GeoTIFF files, with UInt16 data type. I want to
merge them in a single GeoTIFF file, with 3 bands, and RGB color
interpretation

I've read this http://lists.osgeo.org/pipermail/gdal-dev/2011-April/028451.html

So, I tried to do this:

 gdal_merge.py -separate -co "SAMPLESPERPIXEL=3" -co
"BITSPERSAMPLE=16" -co "PHOTOMETRIC=RGB" -o output.tif file1.tif
file2.tif file3.tif

Of course, it didn't work. All the pixels of output.tif are 0. Reasons:

- GTiff does not support BITSPERSAMPLE or SAMPLESPERPIXEL creation options.
- This is a guess, but I think PHOTOMETRIC=RGB can't be used with
pixels of type different from Byte
- ?

Another thing I tried was to use gdalbuildvrt, and add color
interpretation for bands. No effect. Plus, my original raster files
are rotated, and I had to warp them. I shouldn't modify the input data
at all.

Any clues?

Thanks in advance

--
Jorge Arevalo
Freelance developer

http://www.krop.com/jorgearevalo
http://about.me/jorgeas80

From s.r.kriishna at gmail.com  Tue Jan 15 23:47:56 2013
From: s.r.kriishna at gmail.com (SIVA RAMA KRISHNA)
Date: Wed, 16 Jan 2013 13:17:56 +0530
Subject: [gdal-dev] Removing Dangle lines in shape files
Message-ID: <CAP-zkzdBMnbJx7ctyAVhNkTSgQjVvO+85r6hCffWMf69jT63Cw@mail.gmail.com>

Dear All,

I am Trying to remove Dangle Lines from a shape file containing
OGRLineString (polyline).I am thinking that if a line(2),line(3),line(4)
crosses a another line(1) detecting  the point of intersection and
removing  the part beyond line1 . I am employing following code and
attaching it.


Any suggestion is highly  appreciated

with Regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130116/61b4290b/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rmg_dangles.odt
Type: application/vnd.oasis.opendocument.text
Size: 14799 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130116/61b4290b/attachment.odt>

From even.rouault at mines-paris.org  Wed Jan 16 02:13:25 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 16 Jan 2013 11:13:25 +0100
Subject: [gdal-dev] libecwj2 with multiple readers
Message-ID: <1358331205.50f67d45848e3@imp.free.fr>

Hi Mateusz,

Looking at NCJP2FileView.cpp, I can see that most accesses to sm_Views are
protected with CNCSJPCGlobalLock _Lock;

Perhaps it should also be added to CNCSJP2FileView::Shutdown() which seems the
only place in that file not protected by the lock.

Best regards,

Even

From mateusz at loskot.net  Wed Jan 16 02:33:50 2013
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 16 Jan 2013 10:33:50 +0000
Subject: [gdal-dev] libecwj2 with multiple readers
In-Reply-To: <1358331205.50f67d45848e3@imp.free.fr>
References: <1358331205.50f67d45848e3@imp.free.fr>
Message-ID: <CABUeae_p1oaWnTrWec0XN5qpvjTrHD1cK6U_LGW1M_T5+_qpsw@mail.gmail.com>

On 16 January 2013 10:13, Even Rouault <even.rouault at mines-paris.org> wrote:
> Hi Mateusz,
>
> Looking at NCJP2FileView.cpp, I can see that most accesses to sm_Views are
> protected with CNCSJPCGlobalLock _Lock;
>
> Perhaps it should also be added to CNCSJP2FileView::Shutdown() which seems the
> only place in that file not protected by the lock.

Hi Even,

Lock is one side of the problem.
The second one is non-deterministic nature static initialization and
static deinitialisation issue. In this case, the latter.

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net

From yehil at rafael.co.il  Wed Jan 16 04:40:26 2013
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Wed, 16 Jan 2013 14:40:26 +0200
Subject: [gdal-dev] RPC transform
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0CAF1C4151B@MAILBOXSERVER.rf.local>


Hi
I have a question about the RPC transform implemented in gdal_rpc.cpp.
If a dem file is specified in the transform options (RPC_DEM) the file is sampled to retrieve the elevation of the transformed point.
In the case where the dem file is a DTED file (which defines AREA_OR_POINT to POINT), shouldn't the pixel/line values in the dem file be offset by half a pixel to get the correct height?

Thanks
Yehiyam


________________________________________

This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not the intended recipient, you should contact us immediately and thereafter delete this message from your system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all electronic or other copies of the original message and any attachments thereof.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130116/3ef284e4/attachment-0001.html>

From chaitanya.ch at gmail.com  Wed Jan 16 07:16:37 2013
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed, 16 Jan 2013 20:46:37 +0530
Subject: [gdal-dev] Removing Dangle lines in shape files
In-Reply-To: <CAP-zkzdBMnbJx7ctyAVhNkTSgQjVvO+85r6hCffWMf69jT63Cw@mail.gmail.com>
References: <CAP-zkzdBMnbJx7ctyAVhNkTSgQjVvO+85r6hCffWMf69jT63Cw@mail.gmail.com>
Message-ID: <CAMKgpOY7FQR7WP5YeLoV6djGJCwQ7UvYfT1zWqACfOxq6iYL8w@mail.gmail.com>

Siva,
Is your code working? If not, what were the errors?


On Wed, Jan 16, 2013 at 1:17 PM, SIVA RAMA KRISHNA
<s.r.kriishna at gmail.com>wrote:

> Dear All,
>
> I am Trying to remove Dangle Lines from a shape file containing
> OGRLineString (polyline).I am thinking that if a line(2),line(3),line(4)
> crosses a another line(1) detecting  the point of intersection and
> removing  the part beyond line1 . I am employing following code and
> attaching it.
>
>
> Any suggestion is highly  appreciated
>
> with Regards
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130116/a8c778f5/attachment.html>

From etourigny.dev at gmail.com  Wed Jan 16 07:35:02 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed, 16 Jan 2013 13:35:02 -0200
Subject: [gdal-dev] how to test for version number in python with gdal 1.10 ?
Message-ID: <CA+TxYvPj8LHYFHNo9nud89Q0=Fa0G7ebKka8RPG-em0vEW+dLg@mail.gmail.com>

Hi,

Detection of gdal version in python using the following method fails
when using gdal-1.10 .

>>> print gdal.VersionInfo("RELEASE_NAME")
1.10dev
>>> print( gdal.VersionInfo("RELEASE_NAME") >= "1.7" )
False
>>> print( gdal.VersionInfo("RELEASE_NAME") >= "1.10" )
True


What is the recommended way to test for previous versions of gdal that
is backwards compatible and that support 1.10?

The following seems to work using VERSION_NUM:

in 1.10dev:
>>> gdal.VersionInfo("VERSION_NUM")
'1100000'
>>> print( int(gdal.VersionInfo("VERSION_NUM")) >= 1900 )
True
>>> print( int(gdal.VersionInfo("VERSION_NUM")) >= 1100000 )
True

and in 1.9.2:
>>> print( int(gdal.VersionInfo("VERSION_NUM")) >= 1900 )
True
>>> print( int(gdal.VersionInfo("VERSION_NUM")) >= 1100000 )
False


thanks,
Etienne

From even.rouault at mines-paris.org  Wed Jan 16 07:40:56 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 16 Jan 2013 16:40:56 +0100
Subject: [gdal-dev] how to test for version number in python with gdal
	1.10 ?
In-Reply-To: <CA+TxYvPj8LHYFHNo9nud89Q0=Fa0G7ebKka8RPG-em0vEW+dLg@mail.gmail.com>
References: <CA+TxYvPj8LHYFHNo9nud89Q0=Fa0G7ebKka8RPG-em0vEW+dLg@mail.gmail.com>
Message-ID: <1358350856.50f6ca080acd7@imp.free.fr>


> The following seems to work using VERSION_NUM:
>
> in 1.10dev:
> >>> gdal.VersionInfo("VERSION_NUM")
> '1100000'
> >>> print( int(gdal.VersionInfo("VERSION_NUM")) >= 1900 )
> True
> >>> print( int(gdal.VersionInfo("VERSION_NUM")) >= 1100000 )
> True
>
> and in 1.9.2:
> >>> print( int(gdal.VersionInfo("VERSION_NUM")) >= 1900 )
> True
> >>> print( int(gdal.VersionInfo("VERSION_NUM")) >= 1100000 )
> False

This is actually what I've used recently in
swig/python/samples/ogr_layer_algebra.py

>
>
> thanks,
> Etienne
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From ivan.lucena at princeton-ma.us  Wed Jan 16 07:54:44 2013
From: ivan.lucena at princeton-ma.us (Ivan Lucena)
Date: Wed, 16 Jan 2013 10:54:44 -0500
Subject: [gdal-dev] RPC transform
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0CAF1C4151B@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0CAF1C4151B@MAILBOXSERVER.rf.local>
Message-ID: <50F6CD44.8020205@princeton-ma.us>

Yehiyam,

For that kind of issue my advise is to run in debugging mode. The GDAL 
transformation engine must have an internal pixel geolocation defined. 
It is probably CENTER of the pixel, as in AREA. I am not sure. In that 
case the returning pixel/line refers to AREA and you might need to do 
the adjustment. But again, I would debug it to make sure. We have 
instructions on how to debug GDAL using VS and NetBeans on wiki. I just 
can't find it. I can't find anything about the RPC_DEM either. Where did 
you get it?

Regards,

Ivan

On 1/16/13 7:40 AM, Livneh Yehiyam wrote:
>
> Hi
>
> I have a question about the RPC transform implemented in gdal_rpc.cpp.
>
> If a dem file is specified in the transform options (RPC_DEM) the file 
> is sampled to retrieve the elevation of the transformed point.
>
> In the case where the dem file is a DTED file (which defines 
> AREA_OR_POINT to POINT), shouldn't the pixel/line values in the dem 
> file be offset by half a pixel to get the correct height?
>
> Thanks
>
> Yehiyam
>
>
> ________________________________________
> This message (including any attachments) issued by RAFAEL- ADVANCED 
> DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential 
> information intended for a specific individual and purpose, may 
> constitute information that is privileged or confidential or otherwise 
> protected from disclosure. If you are not the intended recipient, you 
> should contact us immediately and thereafter delete this message from 
> your system. You are hereby notified that any disclosure, copying, 
> dissemination, distribution or forwarding of this message, or the 
> taking of any action based on it, is strictly prohibited. If you have 
> received this e-mail in error, please notify us immediately by e-mail 
> mailto:lawraf at rafael.co.il and completely delete or destroy any and 
> all electronic or other copies of the original message and any 
> attachments thereof.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130116/0c2f8fc0/attachment.html>

From bishop.dev at gmail.com  Wed Jan 16 07:58:54 2013
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Wed, 16 Jan 2013 19:58:54 +0400
Subject: [gdal-dev] RPC transform
In-Reply-To: <50F6CD44.8020205@princeton-ma.us>
References: <C5D1974ECA44D2429ECBC64B967C34C0CAF1C4151B@MAILBOXSERVER.rf.local>
	<50F6CD44.8020205@princeton-ma.us>
Message-ID: <50F6CE3E.6040704@gmail.com>

Hi Ivan,
Look here: 
http://www.gdal.org/gdal__alg_8h.html#af4c3c0d4c79218995b3a1f0bac3700a0

You can find such options:

  *

    RPC_HEIGHT: a fixed height offset to be applied to all points passed
    in. In this situation the Z passed into the transformation function
    is assumed to be height above ground, and the RPC_HEIGHT is assumed
    to be an average height above sea level for ground in the target scene.

  *

    RPC_HEIGHT_SCALE: a factor used to multiply heights above ground.
    Usefull when elevation offsets of the DEM are not expressed in
    meters. (GDAL >= 1.8.0)

  *

    RPC_DEM: the name of a GDAL dataset (a DEM file typically) used to
    extract elevation offsets from. In this situation the Z passed into
    the transformation function is assumed to be height above ground.
    This option should be used in replacement of RPC_HEIGHT to provide a
    way of defining a non uniform ground for the target scene (GDAL >=
    1.8.0)

  * RPC_DEMINTERPOLATION: the DEM interpolation (near, bilinear or cubic)


Best regards,
     Dmitry

16.01.2013 19:54, Ivan Lucena ?????:
> Yehiyam,
>
> For that kind of issue my advise is to run in debugging mode. The GDAL 
> transformation engine must have an internal pixel geolocation defined. 
> It is probably CENTER of the pixel, as in AREA. I am not sure. In that 
> case the returning pixel/line refers to AREA and you might need to do 
> the adjustment. But again, I would debug it to make sure. We have 
> instructions on how to debug GDAL using VS and NetBeans on wiki. I 
> just can't find it. I can't find anything about the RPC_DEM either. 
> Where did you get it?
>
> Regards,
>
> Ivan
>
> On 1/16/13 7:40 AM, Livneh Yehiyam wrote:
>>
>> Hi
>>
>> I have a question about the RPC transform implemented in gdal_rpc.cpp.
>>
>> If a dem file is specified in the transform options (RPC_DEM) the 
>> file is sampled to retrieve the elevation of the transformed point.
>>
>> In the case where the dem file is a DTED file (which defines 
>> AREA_OR_POINT to POINT), shouldn't the pixel/line values in the dem 
>> file be offset by half a pixel to get the correct height?
>>
>> Thanks
>>
>> Yehiyam
>>
>>
>> ________________________________________
>> This message (including any attachments) issued by RAFAEL- ADVANCED 
>> DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential 
>> information intended for a specific individual and purpose, may 
>> constitute information that is privileged or confidential or 
>> otherwise protected from disclosure. If you are not the intended 
>> recipient, you should contact us immediately and thereafter delete 
>> this message from your system. You are hereby notified that any 
>> disclosure, copying, dissemination, distribution or forwarding of 
>> this message, or the taking of any action based on it, is strictly 
>> prohibited. If you have received this e-mail in error, please notify 
>> us immediately by e-mail mailto:lawraf at rafael.co.il and completely 
>> delete or destroy any and all electronic or other copies of the 
>> original message and any attachments thereof.
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130116/683fc7c3/attachment-0001.html>

From etourigny.dev at gmail.com  Wed Jan 16 08:07:37 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed, 16 Jan 2013 14:07:37 -0200
Subject: [gdal-dev] how to test for version number in python with gdal
 1.10 ?
In-Reply-To: <1358350856.50f6ca080acd7@imp.free.fr>
References: <CA+TxYvPj8LHYFHNo9nud89Q0=Fa0G7ebKka8RPG-em0vEW+dLg@mail.gmail.com>
	<1358350856.50f6ca080acd7@imp.free.fr>
Message-ID: <CA+TxYvM97QrjK0F8D6ys52ZC9M5Gd57+-xP4otyEYxG1ESfRsw@mail.gmail.com>

ok merci.

It might be good to write this somewhere? Not sure where though,
perhaps the gdal/ogr wiki page?

Etienne

On Wed, Jan 16, 2013 at 1:40 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
>
>> The following seems to work using VERSION_NUM:
>>
>> in 1.10dev:
>> >>> gdal.VersionInfo("VERSION_NUM")
>> '1100000'
>> >>> print( int(gdal.VersionInfo("VERSION_NUM")) >= 1900 )
>> True
>> >>> print( int(gdal.VersionInfo("VERSION_NUM")) >= 1100000 )
>> True
>>
>> and in 1.9.2:
>> >>> print( int(gdal.VersionInfo("VERSION_NUM")) >= 1900 )
>> True
>> >>> print( int(gdal.VersionInfo("VERSION_NUM")) >= 1100000 )
>> False
>
> This is actually what I've used recently in
> swig/python/samples/ogr_layer_algebra.py
>
>>
>>
>> thanks,
>> Etienne
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>

From mateusz at loskot.net  Wed Jan 16 08:12:21 2013
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 16 Jan 2013 16:12:21 +0000
Subject: [gdal-dev] how to test for version number in python with gdal
 1.10 ?
In-Reply-To: <CA+TxYvM97QrjK0F8D6ys52ZC9M5Gd57+-xP4otyEYxG1ESfRsw@mail.gmail.com>
References: <CA+TxYvPj8LHYFHNo9nud89Q0=Fa0G7ebKka8RPG-em0vEW+dLg@mail.gmail.com>
	<1358350856.50f6ca080acd7@imp.free.fr>
	<CA+TxYvM97QrjK0F8D6ys52ZC9M5Gd57+-xP4otyEYxG1ESfRsw@mail.gmail.com>
Message-ID: <CABUeae_UA8Uf3aQzWa-tx5g-rUC4fb3haUW0iN4F9F+jBASy=Q@mail.gmail.com>

On 16 January 2013 16:07, Etienne Tourigny <etourigny.dev at gmail.com> wrote:
>
> It might be good to write this somewhere? Not sure where though,
> perhaps the gdal/ogr wiki page?

It's documented in the comments of gdal_header.h

http://svn.osgeo.org/gdal/trunk/gdal/gcore/gdal_version.h

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net

From etourigny.dev at gmail.com  Wed Jan 16 08:26:35 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed, 16 Jan 2013 14:26:35 -0200
Subject: [gdal-dev] how to test for version number in python with gdal
 1.10 ?
In-Reply-To: <CABUeae_UA8Uf3aQzWa-tx5g-rUC4fb3haUW0iN4F9F+jBASy=Q@mail.gmail.com>
References: <CA+TxYvPj8LHYFHNo9nud89Q0=Fa0G7ebKka8RPG-em0vEW+dLg@mail.gmail.com>
	<1358350856.50f6ca080acd7@imp.free.fr>
	<CA+TxYvM97QrjK0F8D6ys52ZC9M5Gd57+-xP4otyEYxG1ESfRsw@mail.gmail.com>
	<CABUeae_UA8Uf3aQzWa-tx5g-rUC4fb3haUW0iN4F9F+jBASy=Q@mail.gmail.com>
Message-ID: <CA+TxYvOHjdTV_NkdW7R1T8_g5MNiVXNmH3YU7BECAy60bdVdbg@mail.gmail.com>

On Wed, Jan 16, 2013 at 2:12 PM, Mateusz Loskot <mateusz at loskot.net> wrote:
> On 16 January 2013 16:07, Etienne Tourigny <etourigny.dev at gmail.com> wrote:
>>
>> It might be good to write this somewhere? Not sure where though,
>> perhaps the gdal/ogr wiki page?
>
> It's documented in the comments of gdal_header.h
>
> http://svn.osgeo.org/gdal/trunk/gdal/gcore/gdal_version.h

I meant it would be good to document the recommended way to test for
version in *python*

>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net

From warmerdam at pobox.com  Wed Jan 16 10:47:59 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 16 Jan 2013 10:47:59 -0800
Subject: [gdal-dev] RPC transform
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0CAF1C4151B@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0CAF1C4151B@MAILBOXSERVER.rf.local>
Message-ID: <CA+YzLBdvVr+XUBMMkEs9Q3r+jEL4B2SXAJS_FFVDnn7Mb0Y2HA@mail.gmail.com>

Yehiyam,

I do not see why you think the AREA_OR_POINT value ought to have any
influence on how DEM values are interpolated.

Note that a PixelIsPoint GeoTIFF file will already result in a GDAL
GeoTransform that is offset by half a pixel.  The GDAL GeoTransform always
treats pixels as areas, and GDAL interpolators - presumably including the
for RPCs - should treat the pixel value as being at the center of the pixel
area for the purpose of interpolation (regardless of whether that value is
point or area).

On the other hand, I am denying the possibility that the RPC DEM
interpolation is always off by half a pixel.  I haven't actually looked
closely at that code lately and the RPC code is not so very well tested and
validated.

Best regards,
Frank


On Wed, Jan 16, 2013 at 4:40 AM, Livneh Yehiyam <yehil at rafael.co.il> wrote:

>  Hi****
>
> I have a question about the RPC transform implemented in gdal_rpc.cpp.****
>
> If a dem file is specified in the transform options (RPC_DEM) the file is
> sampled to retrieve the elevation of the transformed point.****
>
> In the case where the dem file is a DTED file (which defines AREA_OR_POINT
> to POINT), shouldn't the pixel/line values in the dem file be offset by
> half a pixel to get the correct height?****
>
> ** **
>
> Thanks****
>
> Yehiyam****
>  ________________________________________
> This message (including any attachments) issued by RAFAEL- ADVANCED
> DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential
> information intended for a specific individual and purpose, may constitute
> information that is privileged or confidential or otherwise protected from
> disclosure. If you are not the intended recipient, you should contact us
> immediately and thereafter delete this message from your system. You are
> hereby notified that any disclosure, copying, dissemination, distribution
> or forwarding of this message, or the taking of any action based on it, is
> strictly prohibited. If you have received this e-mail in error, please
> notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely
> delete or destroy any and all electronic or other copies of the original
> message and any attachments thereof.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130116/ab794ee1/attachment.html>

From bishop.dev at gmail.com  Wed Jan 16 10:51:58 2013
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Wed, 16 Jan 2013 22:51:58 +0400
Subject: [gdal-dev] RPC transform
In-Reply-To: <CA+YzLBdvVr+XUBMMkEs9Q3r+jEL4B2SXAJS_FFVDnn7Mb0Y2HA@mail.gmail.com>
References: <C5D1974ECA44D2429ECBC64B967C34C0CAF1C4151B@MAILBOXSERVER.rf.local>
	<CA+YzLBdvVr+XUBMMkEs9Q3r+jEL4B2SXAJS_FFVDnn7Mb0Y2HA@mail.gmail.com>
Message-ID: <50F6F6CE.2080809@gmail.com>

Hi Frank,

I only want to note that the default is bilinear interpolation of the DEM.

Part of the code: const char *pszDEMInterpolation = 
CSLFetchNameValueDef( papszOptions, "RPC_DEMINTERPOLATION", "bilinear" );

Best regards,
     Dmitriy

16.01.2013 22:47, Frank Warmerdam ?????:
> Yehiyam,
>
> I do not see why you think the AREA_OR_POINT value ought to have any 
> influence on how DEM values are interpolated.
>
> Note that a PixelIsPoint GeoTIFF file will already result in a GDAL 
> GeoTransform that is offset by half a pixel.  The GDAL GeoTransform 
> always treats pixels as areas, and GDAL interpolators - presumably 
> including the for RPCs - should treat the pixel value as being at the 
> center of the pixel area for the purpose of interpolation (regardless 
> of whether that value is point or area).
>
> On the other hand, I am denying the possibility that the RPC DEM 
> interpolation is always off by half a pixel.  I haven't actually 
> looked closely at that code lately and the RPC code is not so very 
> well tested and validated.
>
> Best regards,
> Frank
>
>
> On Wed, Jan 16, 2013 at 4:40 AM, Livneh Yehiyam <yehil at rafael.co.il 
> <mailto:yehil at rafael.co.il>> wrote:
>
>
>     Hi
>
>     I have a question about the RPC transform implemented in gdal_rpc.cpp.
>
>     If a dem file is specified in the transform options (RPC_DEM) the
>     file is sampled to retrieve the elevation of the transformed point.
>
>     In the case where the dem file is a DTED file (which defines
>     AREA_OR_POINT to POINT), shouldn't the pixel/line values in the
>     dem file be offset by half a pixel to get the correct height?
>
>     Thanks
>
>     Yehiyam
>
>
>     ________________________________________
>     This message (including any attachments) issued by RAFAEL-
>     ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains
>     confidential information intended for a specific individual and
>     purpose, may constitute information that is privileged or
>     confidential or otherwise protected from disclosure. If you are
>     not the intended recipient, you should contact us immediately and
>     thereafter delete this message from your system. You are hereby
>     notified that any disclosure, copying, dissemination, distribution
>     or forwarding of this message, or the taking of any action based
>     on it, is strictly prohibited. If you have received this e-mail in
>     error, please notify us immediately by e-mail
>     mailto:lawraf at rafael.co.il <mailto:lawraf at rafael.co.il> and
>     completely delete or destroy any and all electronic or other
>     copies of the original message and any attachments thereof.
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam at pobox.com <mailto:warmerdam at pobox.com>
> light and sound - activate the windows | http://pobox.com/~warmerdam 
> <http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Software Developer
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130116/42bf0559/attachment-0001.html>

From isaac.gerg at gergltd.com  Wed Jan 16 11:03:14 2013
From: isaac.gerg at gergltd.com (Isaac Gerg)
Date: Wed, 16 Jan 2013 14:03:14 -0500
Subject: [gdal-dev] Giventiff with colortable,
 how do i assign one of the colors to be an alpha channel
Message-ID: <CADnN3yV4=KFbiSL2tWQnp7XmzvWc3WK-eyvthm0kjrxQdi-H2g@mail.gmail.com>

Hi All,

I have a tiff in which each pixel is a single byte (0-255) which references
a colortable.  Each element of the colortable has 4 values (RGBA).

I would like to convert my "black" color (entry 1 in the color table
(0,0,0,255)) to be transparent (new colortable entry is (0,0,0,0))

Another way to say it is, how do I create a tiff with an indexed colormap
but also have it contain an alpha channel?

Thanks in advance,
Isaac
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130116/3d420c4b/attachment.html>

From even.rouault at mines-paris.org  Wed Jan 16 11:21:31 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 16 Jan 2013 20:21:31 +0100
Subject: [gdal-dev] Giventiff with colortable,
	how do i assign one of the colors to be an alpha channel
In-Reply-To: <CADnN3yV4=KFbiSL2tWQnp7XmzvWc3WK-eyvthm0kjrxQdi-H2g@mail.gmail.com>
References: <CADnN3yV4=KFbiSL2tWQnp7XmzvWc3WK-eyvthm0kjrxQdi-H2g@mail.gmail.com>
Message-ID: <201301162021.31253.even.rouault@mines-paris.org>

Le mercredi 16 janvier 2013 20:03:14, Isaac Gerg a ?crit :
> Hi All,
> 
> I have a tiff in which each pixel is a single byte (0-255) which references
> a colortable.  Each element of the colortable has 4 values (RGBA).
> 
> I would like to convert my "black" color (entry 1 in the color table
> (0,0,0,255)) to be transparent (new colortable entry is (0,0,0,0))
> 
> Another way to say it is, how do I create a tiff with an indexed colormap
> but also have it contain an alpha channel?

TIFF color palette are only RGB, not RGBA. What you can do, however, is assign 
a nodata value (note this is a GDAL specific TIFF tag that will only be 
understood by GDAL based software)

gdal_translate src.tif src_with_nodata.tif -a_nodata 0

You can create a TIFF with an indexed colormap and an alpha channel with the 
following extra steps :

gdal_translate src_with_nodata.tif mask.tif -b mask
gdalbuildvrt tmp.vrt src.tif mask.tif -separate
gdal_translate src.tif src.vrt -of VRT

the with a text editor copy the lines that look line the following ones from 
src.vrt

    <ColorInterp>Palette</ColorInterp>
    <ColorTable>
      <Entry c1="112" c2="120" c3="56" c4="255" />
[...]
      <Entry c1="204" c2="208" c3="164" c4="255" />
    </ColorTable>

and paste them just below <VRTRasterBand dataType="Byte" band="1"> in tmp.vrt

Finally :

gdal_translate tmp.vrt pct_with_alpha.tif -co ALPHA=YES

That's it. But I'm not sure that this will be properly displayed by viewers.

A safest alternative would be to build a RGBA TIFF :

gdal_translate -expand rgb src.tif rgb.tif
gdal_translate -b 1 rgb.tif r.tif
gdal_translate -b 2 rgb.tif g.tif
gdal_translate -b 3 rgb.tif b.tif
gdalbuildvrt rgba.vrt r.tif g.tif b.tif mask.tif -separate
gdal_translate rgba.vrt rgba.tif  -co ALPHA=YES

> 
> Thanks in advance,
> Isaac

From isaac.gerg at gergltd.com  Wed Jan 16 11:58:51 2013
From: isaac.gerg at gergltd.com (Isaac Gerg)
Date: Wed, 16 Jan 2013 14:58:51 -0500
Subject: [gdal-dev] Giventiff with colortable,
 how do i assign one of the colors to be an alpha channel
In-Reply-To: <201301162021.31253.even.rouault@mines-paris.org>
References: <CADnN3yV4=KFbiSL2tWQnp7XmzvWc3WK-eyvthm0kjrxQdi-H2g@mail.gmail.com>
	<201301162021.31253.even.rouault@mines-paris.org>
Message-ID: <CADnN3yX3MGZNbc0AJGj7-JhYcKzvTWPTeV5mEPhXoQys5GD6HA@mail.gmail.com>

Even,
Thanks for your quick response.

I believe I understand that three options you presented me.  I believe
option 1 is viable but like you mentioned will only work with GDAL
software.  Options 2 and 3 are good but, especially with option 3, the
resulting tifs are too large.

I have 20 .tif  which are 3MB a piece.  Together, they form trackline of a
sensor data.  I would like to load this information into a WMS server for
display in Google Earth or Arc Explorer.  Currently I am using Geoserver.

Anyways, I must mosaic these 20 .tifs together.  These tifs are indexed
images with a colormap.  Here is my current algorithm:
1. Expand images to RGBA using gdal_translate
2. Rotate images north up using gdal_warp
3. Mosiac images using gdal_merge with -co COMPRESS=LZW -co PREDICTOR=1 -ot
Byte -co TILED=YES -n 0
At this point, I now have an RGBA image that is huge (300MB).  With all the
tile collections I must process, 300MB is too big.  I was thinking the
total would be around (20 tiles)*(3MB per tile) = 60MB.  300 is simply
unacceptable.
4. Run the gdal_retile to make image pyramid.  This will yeild a size that
is roughly twice that of my mosiac.

Is there any way I can make the RGBA file in step 3 smaller in size
specifically to match the theoretical size of 60MB?

Thanks again,
Isaac



On Wed, Jan 16, 2013 at 2:21 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le mercredi 16 janvier 2013 20:03:14, Isaac Gerg a ?crit :
> > Hi All,
> >
> > I have a tiff in which each pixel is a single byte (0-255) which
> references
> > a colortable.  Each element of the colortable has 4 values (RGBA).
> >
> > I would like to convert my "black" color (entry 1 in the color table
> > (0,0,0,255)) to be transparent (new colortable entry is (0,0,0,0))
> >
> > Another way to say it is, how do I create a tiff with an indexed colormap
> > but also have it contain an alpha channel?
>
> TIFF color palette are only RGB, not RGBA. What you can do, however, is
> assign
> a nodata value (note this is a GDAL specific TIFF tag that will only be
> understood by GDAL based software)
>
> gdal_translate src.tif src_with_nodata.tif -a_nodata 0
>
> You can create a TIFF with an indexed colormap and an alpha channel with
> the
> following extra steps :
>
> gdal_translate src_with_nodata.tif mask.tif -b mask
> gdalbuildvrt tmp.vrt src.tif mask.tif -separate
> gdal_translate src.tif src.vrt -of VRT
>
> the with a text editor copy the lines that look line the following ones
> from
> src.vrt
>
>     <ColorInterp>Palette</ColorInterp>
>     <ColorTable>
>       <Entry c1="112" c2="120" c3="56" c4="255" />
> [...]
>       <Entry c1="204" c2="208" c3="164" c4="255" />
>     </ColorTable>
>
> and paste them just below <VRTRasterBand dataType="Byte" band="1"> in
> tmp.vrt
>
> Finally :
>
> gdal_translate tmp.vrt pct_with_alpha.tif -co ALPHA=YES
>
> That's it. But I'm not sure that this will be properly displayed by
> viewers.
>
> A safest alternative would be to build a RGBA TIFF :
>
> gdal_translate -expand rgb src.tif rgb.tif
> gdal_translate -b 1 rgb.tif r.tif
> gdal_translate -b 2 rgb.tif g.tif
> gdal_translate -b 3 rgb.tif b.tif
> gdalbuildvrt rgba.vrt r.tif g.tif b.tif mask.tif -separate
> gdal_translate rgba.vrt rgba.tif  -co ALPHA=YES
>
> >
> > Thanks in advance,
> > Isaac
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130116/606db752/attachment.html>

From even.rouault at mines-paris.org  Wed Jan 16 12:17:25 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 16 Jan 2013 21:17:25 +0100
Subject: [gdal-dev] Giventiff with colortable,
	how do i assign one of the colors to be an alpha channel
In-Reply-To: <CADnN3yX3MGZNbc0AJGj7-JhYcKzvTWPTeV5mEPhXoQys5GD6HA@mail.gmail.com>
References: <CADnN3yV4=KFbiSL2tWQnp7XmzvWc3WK-eyvthm0kjrxQdi-H2g@mail.gmail.com>
	<201301162021.31253.even.rouault@mines-paris.org>
	<CADnN3yX3MGZNbc0AJGj7-JhYcKzvTWPTeV5mEPhXoQys5GD6HA@mail.gmail.com>
Message-ID: <201301162117.25211.even.rouault@mines-paris.org>

Le mercredi 16 janvier 2013 20:58:51, Isaac Gerg a ?crit :
> Even,
> Thanks for your quick response.
> 
> I believe I understand that three options you presented me.  I believe
> option 1 is viable but like you mentioned will only work with GDAL
> software.  Options 2 and 3 are good but, especially with option 3, the
> resulting tifs are too large.
> 
> I have 20 .tif  which are 3MB a piece.  Together, they form trackline of a
> sensor data.  I would like to load this information into a WMS server for
> display in Google Earth or Arc Explorer.  Currently I am using Geoserver.
> 
> Anyways, I must mosaic these 20 .tifs together.  These tifs are indexed
> images with a colormap.  Here is my current algorithm:
> 1. Expand images to RGBA using gdal_translate
> 2. Rotate images north up using gdal_warp
> 3. Mosiac images using gdal_merge with -co COMPRESS=LZW -co PREDICTOR=1 -ot
> Byte -co TILED=YES -n 0
> At this point, I now have an RGBA image that is huge (300MB).  With all the
> tile collections I must process, 300MB is too big.  I was thinking the
> total would be around (20 tiles)*(3MB per tile) = 60MB.  300 is simply
> unacceptable.
> 4. Run the gdal_retile to make image pyramid.  This will yeild a size that
> is roughly twice that of my mosiac.
> 
> Is there any way I can make the RGBA file in step 3 smaller in size
> specifically to match the theoretical size of 60MB?

You can try rgb2pct.py on the mosaic

Or you can also try to gdal_translate -co COMPRESS=LZW on the mosaic, since 
I'm not sure how efficient the compression done by gdal_merge will be.

From isaac.gerg at gergltd.com  Wed Jan 16 12:20:26 2013
From: isaac.gerg at gergltd.com (Isaac Gerg)
Date: Wed, 16 Jan 2013 15:20:26 -0500
Subject: [gdal-dev] Giventiff with colortable,
 how do i assign one of the colors to be an alpha channel
In-Reply-To: <201301162117.25211.even.rouault@mines-paris.org>
References: <CADnN3yV4=KFbiSL2tWQnp7XmzvWc3WK-eyvthm0kjrxQdi-H2g@mail.gmail.com>
	<201301162021.31253.even.rouault@mines-paris.org>
	<CADnN3yX3MGZNbc0AJGj7-JhYcKzvTWPTeV5mEPhXoQys5GD6HA@mail.gmail.com>
	<201301162117.25211.even.rouault@mines-paris.org>
Message-ID: <CADnN3yXzSP2zFP3toh85KBi5YDo8SBxj_60ea3zeQM_4t2+fGw@mail.gmail.com>

rgb2pct.py does not work on tifs with indexed colormaps -- I have already
tried this.

I am already  using COMPRESS=LZW on the mosiac.

Isaac

On Wed, Jan 16, 2013 at 3:17 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> can also try to gdal_translate -co COMPRESS=LZW on the mosaic, since
> I'm not sure how efficient the compression done by gdal_
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130116/001ede1e/attachment.html>

From isaac.gerg at gergltd.com  Wed Jan 16 12:21:29 2013
From: isaac.gerg at gergltd.com (Isaac Gerg)
Date: Wed, 16 Jan 2013 15:21:29 -0500
Subject: [gdal-dev] Giventiff with colortable,
 how do i assign one of the colors to be an alpha channel
In-Reply-To: <201301162117.25211.even.rouault@mines-paris.org>
References: <CADnN3yV4=KFbiSL2tWQnp7XmzvWc3WK-eyvthm0kjrxQdi-H2g@mail.gmail.com>
	<201301162021.31253.even.rouault@mines-paris.org>
	<CADnN3yX3MGZNbc0AJGj7-JhYcKzvTWPTeV5mEPhXoQys5GD6HA@mail.gmail.com>
	<201301162117.25211.even.rouault@mines-paris.org>
Message-ID: <CADnN3yUohcWAoLhLRNg+eEwm1ORO8yTZDkdnB4MC52diD65c7A@mail.gmail.com>

I mispoke.

rgb2pct.py will work but only on RGB images -- no colortables.  When I use
it on a RGBA image, the transparency is no longer preservered.

Isaac


On Wed, Jan 16, 2013 at 3:17 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le mercredi 16 janvier 2013 20:58:51, Isaac Gerg a ?crit :
> > Even,
> > Thanks for your quick response.
> >
> > I believe I understand that three options you presented me.  I believe
> > option 1 is viable but like you mentioned will only work with GDAL
> > software.  Options 2 and 3 are good but, especially with option 3, the
> > resulting tifs are too large.
> >
> > I have 20 .tif  which are 3MB a piece.  Together, they form trackline of
> a
> > sensor data.  I would like to load this information into a WMS server for
> > display in Google Earth or Arc Explorer.  Currently I am using Geoserver.
> >
> > Anyways, I must mosaic these 20 .tifs together.  These tifs are indexed
> > images with a colormap.  Here is my current algorithm:
> > 1. Expand images to RGBA using gdal_translate
> > 2. Rotate images north up using gdal_warp
> > 3. Mosiac images using gdal_merge with -co COMPRESS=LZW -co PREDICTOR=1
> -ot
> > Byte -co TILED=YES -n 0
> > At this point, I now have an RGBA image that is huge (300MB).  With all
> the
> > tile collections I must process, 300MB is too big.  I was thinking the
> > total would be around (20 tiles)*(3MB per tile) = 60MB.  300 is simply
> > unacceptable.
> > 4. Run the gdal_retile to make image pyramid.  This will yeild a size
> that
> > is roughly twice that of my mosiac.
> >
> > Is there any way I can make the RGBA file in step 3 smaller in size
> > specifically to match the theoretical size of 60MB?
>
> You can try rgb2pct.py on the mosaic
>
> Or you can also try to gdal_translate -co COMPRESS=LZW on the mosaic, since
> I'm not sure how efficient the compression done by gdal_merge will be.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130116/c5a4b120/attachment.html>

From even.rouault at mines-paris.org  Wed Jan 16 12:23:17 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 16 Jan 2013 21:23:17 +0100
Subject: [gdal-dev] Giventiff with colortable,
	how do i assign one of the colors to be an alpha channel
In-Reply-To: <CADnN3yUohcWAoLhLRNg+eEwm1ORO8yTZDkdnB4MC52diD65c7A@mail.gmail.com>
References: <CADnN3yV4=KFbiSL2tWQnp7XmzvWc3WK-eyvthm0kjrxQdi-H2g@mail.gmail.com>
	<201301162117.25211.even.rouault@mines-paris.org>
	<CADnN3yUohcWAoLhLRNg+eEwm1ORO8yTZDkdnB4MC52diD65c7A@mail.gmail.com>
Message-ID: <201301162123.17200.even.rouault@mines-paris.org>

Le mercredi 16 janvier 2013 21:21:29, Isaac Gerg a ?crit :
> I mispoke.
> 
> rgb2pct.py will work but only on RGB images -- no colortables.  When I use
> it on a RGBA image, the transparency is no longer preservered.

Combine it with the first hints I gave

From isaac.gerg at gergltd.com  Wed Jan 16 12:40:20 2013
From: isaac.gerg at gergltd.com (Isaac Gerg)
Date: Wed, 16 Jan 2013 15:40:20 -0500
Subject: [gdal-dev] Giventiff with colortable,
 how do i assign one of the colors to be an alpha channel
In-Reply-To: <201301162123.17200.even.rouault@mines-paris.org>
References: <CADnN3yV4=KFbiSL2tWQnp7XmzvWc3WK-eyvthm0kjrxQdi-H2g@mail.gmail.com>
	<201301162117.25211.even.rouault@mines-paris.org>
	<CADnN3yUohcWAoLhLRNg+eEwm1ORO8yTZDkdnB4MC52diD65c7A@mail.gmail.com>
	<201301162123.17200.even.rouault@mines-paris.org>
Message-ID: <CADnN3yW7QoiqJyv0Rgr1+xgVes=oFqN6XsDq40_Q2y9sgt=NMg@mail.gmail.com>

Even,

I am confused.  You said in your first response to me that TIFF does not
support indexed colormaps of RGBA. Am I understanding you correctly -- it
sounds like it is not possible to create an indexed color TIFF that has
background transparency.  Is this correct?

Isaac


On Wed, Jan 16, 2013 at 3:23 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le mercredi 16 janvier 2013 21:21:29, Isaac Gerg a ?crit :
> > I mispoke.
> >
> > rgb2pct.py will work but only on RGB images -- no colortables.  When I
> use
> > it on a RGBA image, the transparency is no longer preservered.
>
> Combine it with the first hints I gave
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130116/5a778002/attachment.html>

From isaac.gerg at gergltd.com  Wed Jan 16 12:42:52 2013
From: isaac.gerg at gergltd.com (Isaac Gerg)
Date: Wed, 16 Jan 2013 15:42:52 -0500
Subject: [gdal-dev] Giventiff with colortable,
 how do i assign one of the colors to be an alpha channel
In-Reply-To: <CADnN3yW7QoiqJyv0Rgr1+xgVes=oFqN6XsDq40_Q2y9sgt=NMg@mail.gmail.com>
References: <CADnN3yV4=KFbiSL2tWQnp7XmzvWc3WK-eyvthm0kjrxQdi-H2g@mail.gmail.com>
	<201301162117.25211.even.rouault@mines-paris.org>
	<CADnN3yUohcWAoLhLRNg+eEwm1ORO8yTZDkdnB4MC52diD65c7A@mail.gmail.com>
	<201301162123.17200.even.rouault@mines-paris.org>
	<CADnN3yW7QoiqJyv0Rgr1+xgVes=oFqN6XsDq40_Q2y9sgt=NMg@mail.gmail.com>
Message-ID: <CADnN3yWMNdhaL0zcbW9wad-P_AibyEcPMRYZvx23py2kL20ddw@mail.gmail.com>

To be clear, suppose I want to make the red bow in the image below as a
tiff file with transparency. But instead of using RGBA, can tiff create it
with indexed color?

http://d241yswl6yg9sc.cloudfront.net/remove-background2/4.png

Isaac


On Wed, Jan 16, 2013 at 3:40 PM, Isaac Gerg <isaac.gerg at gergltd.com> wrote:

> Even,
>
> I am confused.  You said in your first response to me that TIFF does not
> support indexed colormaps of RGBA. Am I understanding you correctly -- it
> sounds like it is not possible to create an indexed color TIFF that has
> background transparency.  Is this correct?
>
> Isaac
>
>
> On Wed, Jan 16, 2013 at 3:23 PM, Even Rouault <
> even.rouault at mines-paris.org> wrote:
>
>> Le mercredi 16 janvier 2013 21:21:29, Isaac Gerg a ?crit :
>> > I mispoke.
>> >
>> > rgb2pct.py will work but only on RGB images -- no colortables.  When I
>> use
>> > it on a RGBA image, the transparency is no longer preservered.
>>
>> Combine it with the first hints I gave
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130116/487b1865/attachment.html>

From ivan.lucena at princeton-ma.us  Wed Jan 16 13:35:35 2013
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Wed, 16 Jan 2013 16:35:35 -0500
Subject: [gdal-dev] =?iso-8859-1?q?RPC_transform?=
In-Reply-To: <CA+YzLBdvVr+XUBMMkEs9Q3r+jEL4B2SXAJS_FFVDnn7Mb0Y2HA@mail.gmail.com>
References: <C5D1974ECA44D2429ECBC64B967C34C0CAF1C4151B@MAILBOXSERVER.rf.local>
	<CA+YzLBdvVr+XUBMMkEs9Q3r+jEL4B2SXAJS_FFVDnn7Mb0Y2HA@mail.gmail.com>
Message-ID: <20130116213535.17591.qmail@s466.sureserver.com>

Hi Frank,

>  On the other hand, I am denying the possibility that the RPC DEM
>  interpolation is always off by half a pixel. ?I haven't actually
>  looked closely at that code lately and the RPC code is not so very well
>  tested and validated.

That is exactly what I understood from Yehiyam on  his first message. We all believe that GDAL transformation knows the input dataset pixel reference; and knows the GCPs pixel reference. What we are not sure, is if it is doing the right thing when reading from the auxiliary DEM dataset in terms of pixel reference.

Regards,

Ivan

From warmerdam at pobox.com  Wed Jan 16 13:49:41 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 16 Jan 2013 13:49:41 -0800
Subject: [gdal-dev] RPC transform
In-Reply-To: <20130116213535.17591.qmail@s466.sureserver.com>
References: <C5D1974ECA44D2429ECBC64B967C34C0CAF1C4151B@MAILBOXSERVER.rf.local>
	<CA+YzLBdvVr+XUBMMkEs9Q3r+jEL4B2SXAJS_FFVDnn7Mb0Y2HA@mail.gmail.com>
	<20130116213535.17591.qmail@s466.sureserver.com>
Message-ID: <CA+YzLBcBx+psr_mUVTAaK8CdNL5_+Gh7a0r+FBcs9BpOLh4mMw@mail.gmail.com>

Folks,

As I often seem to do, I exactly stated my point.  I meant write:

"On the other hand, I am *not* denying the possibility that the RPC
DEM  interpolation is always off by half a pixel in all cases."

Sorry for that.


On Wed, Jan 16, 2013 at 1:35 PM, Ivan Lucena
<ivan.lucena at princeton-ma.us> wrote:
> Hi Frank,
>
>>  On the other hand, I am denying the possibility that the RPC DEM
>>  interpolation is always off by half a pixel.  I haven't actually
>>  looked closely at that code lately and the RPC code is not so very well
>>  tested and validated.
>
> That is exactly what I understood from Yehiyam on  his first message. We all believe that GDAL transformation knows the input dataset pixel reference; and knows the GCPs pixel reference. What we are not sure, is if it is doing the right thing when reading from the auxiliary DEM dataset in terms of pixel reference.
>
> Regards,
>
> Ivan



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From warmerdam at pobox.com  Wed Jan 16 15:09:09 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 16 Jan 2013 15:09:09 -0800
Subject: [gdal-dev] RPC transform
In-Reply-To: <CA+YzLBcBx+psr_mUVTAaK8CdNL5_+Gh7a0r+FBcs9BpOLh4mMw@mail.gmail.com>
References: <C5D1974ECA44D2429ECBC64B967C34C0CAF1C4151B@MAILBOXSERVER.rf.local>
	<CA+YzLBdvVr+XUBMMkEs9Q3r+jEL4B2SXAJS_FFVDnn7Mb0Y2HA@mail.gmail.com>
	<20130116213535.17591.qmail@s466.sureserver.com>
	<CA+YzLBcBx+psr_mUVTAaK8CdNL5_+Gh7a0r+FBcs9BpOLh4mMw@mail.gmail.com>
Message-ID: <CA+YzLBem1hP8Vi4vZGW9DkPtGT65AApA0W0etSugFc147hHjLg@mail.gmail.com>

On Wed, Jan 16, 2013 at 1:49 PM, Frank Warmerdam <warmerdam at pobox.com> wrote:
> Folks,
>
> As I often seem to do, I exactly stated my point.  I meant write:

Garr, once again missing a keyword.

I meant to say "I exactly stated my point *wrong*."

> "On the other hand, I am *not* denying the possibility that the RPC
> DEM  interpolation is always off by half a pixel in all cases."
>
> Sorry for that.
>
>
> On Wed, Jan 16, 2013 at 1:35 PM, Ivan Lucena
> <ivan.lucena at princeton-ma.us> wrote:
>> Hi Frank,
>>
>>>  On the other hand, I am denying the possibility that the RPC DEM
>>>  interpolation is always off by half a pixel.  I haven't actually
>>>  looked closely at that code lately and the RPC code is not so very well
>>>  tested and validated.
>>
>> That is exactly what I understood from Yehiyam on  his first message. We all believe that GDAL transformation knows the input dataset pixel reference; and knows the GCPs pixel reference. What we are not sure, is if it is doing the right thing when reading from the auxiliary DEM dataset in terms of pixel reference.
>>
>> Regards,
>>
>> Ivan
>
>
>
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer



--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From drmamidi at rothwellgroup.com  Wed Jan 16 16:25:08 2013
From: drmamidi at rothwellgroup.com (Dheeraj Reddy Mamidi)
Date: Wed, 16 Jan 2013 17:25:08 -0700
Subject: [gdal-dev] Creating Raster using Spatial Coordinates (Latitude and
	Longitude)
Message-ID: <CAAU4rM_nAyEL1qDqk=LBndBGDYAuzwcMdu5OJR-bjGudh8NhSQ@mail.gmail.com>

Hi,

I am trying to create a Raster using grid of points(with latitude and
longitude values) within an area which are separated at a distance measured
in degrees. At higher latitudes the number of samples reduce that is number
of points for a row reduces.

When distance between points is determined with a fixed degree, how do I
create a raster where the number of columns for higher latitudes reduces ?
In this case, points for grid at higher latitudes are not exactly above the
points at lower latitudes. Can some one suggest a way to create raster for
spatial coordinates in this case?

Thanks,
Dheeraj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130116/540d6f48/attachment.html>

From drmamidi at rothwellgroup.com  Wed Jan 16 16:26:59 2013
From: drmamidi at rothwellgroup.com (Dheeraj Reddy Mamidi)
Date: Wed, 16 Jan 2013 17:26:59 -0700
Subject: [gdal-dev] Creating Raster using Spatial Coordinates (Latitude
	and Longitude)
In-Reply-To: <CAAU4rM_nAyEL1qDqk=LBndBGDYAuzwcMdu5OJR-bjGudh8NhSQ@mail.gmail.com>
References: <CAAU4rM_nAyEL1qDqk=LBndBGDYAuzwcMdu5OJR-bjGudh8NhSQ@mail.gmail.com>
Message-ID: <CAAU4rM-oq_snV7N7ryZPM8TH+0jbq9UcEBDOcsmhxezEy+gU=g@mail.gmail.com>

I am using C# Gdal library.

On Wed, Jan 16, 2013 at 5:25 PM, Dheeraj Reddy Mamidi <
drmamidi at rothwellgroup.com> wrote:

> Hi,
>
> I am trying to create a Raster using grid of points(with latitude and
> longitude values) within an area which are separated at a distance measured
> in degrees. At higher latitudes the number of samples reduce that is number
> of points for a row reduces.
>
> When distance between points is determined with a fixed degree, how do I
> create a raster where the number of columns for higher latitudes reduces ?
> In this case, points for grid at higher latitudes are not exactly above the
> points at lower latitudes. Can some one suggest a way to create raster for
> spatial coordinates in this case?
>
> Thanks,
> Dheeraj
>
>
>


-- 
Dheeraj Reddy Mamidi

Software Developer
The Rothwell Group, L.P.
Email: drmamidi at rothwellgroup.com <atvaughan at rothwellgroup.com>
Phone: 713-952-5355 ext.30
Web: www.rothwellgroup.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130116/79677178/attachment.html>

From chaitanya.ch at gmail.com  Thu Jan 17 00:21:45 2013
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu, 17 Jan 2013 13:51:45 +0530
Subject: [gdal-dev] Fwd: Removing Dangle lines in shape files
In-Reply-To: <CAP-zkzcqS=26ZwWW7TxchUiQdbjzMxwZ=UX4uuABeE-OwCh2dg@mail.gmail.com>
References: <CAP-zkzdBMnbJx7ctyAVhNkTSgQjVvO+85r6hCffWMf69jT63Cw@mail.gmail.com>
	<CAMKgpOY7FQR7WP5YeLoV6djGJCwQ7UvYfT1zWqACfOxq6iYL8w@mail.gmail.com>
	<CAP-zkzcqS=26ZwWW7TxchUiQdbjzMxwZ=UX4uuABeE-OwCh2dg@mail.gmail.com>
Message-ID: <CAMKgpOZo+C7UN+0Jc=a_SY610GMVVxXaUU-2sgW+annCtSXkMQ@mail.gmail.com>

Siva,

I haven't gone through your code. It seemed incomplete and under
development. While I would like to help you with using the GDAL library, I
can't spare the time to go through this. I suggest posting your problem in
a linkedin group or something else. Also, as a fellow developer, I
recommend not asking others to read your uncommented code. You did not try
to explain your code's logic.

I am not completely sure what you mean my dangling lines, but I suspect you
mean lines or parts of lines intersected by other lines. If that is the
case, I suggest creating a new dataset as you process individual features.
It will help with the problem of duplicate features. If you have to split
only one of the intersecting lines, you can compare a feature only with the
subsequent or antecedent features.


On Thu, Jan 17, 2013 at 10:40 AM, SIVA RAMA KRISHNA
<s.r.kriishna at gmail.com>wrote:

> Chaitanya,
>
> For Dangling, their are no errors but i am not sure whether the code is
> doing actual process of Dangling  i am considering as only one of the
> feature is basis for checking with the other lines when i carry this logic
> for remaining features it may result to duplicates
>
> so I need to know whether this approach is correct,
>
> could you tell me to figure out for angles between lines at nodes
>
>
>
> with Regards
>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130117/9387d732/attachment.html>

From chaitanya.ch at gmail.com  Thu Jan 17 00:33:21 2013
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu, 17 Jan 2013 14:03:21 +0530
Subject: [gdal-dev] Creating Raster using Spatial Coordinates (Latitude
 and Longitude)
In-Reply-To: <CAAU4rM-oq_snV7N7ryZPM8TH+0jbq9UcEBDOcsmhxezEy+gU=g@mail.gmail.com>
References: <CAAU4rM_nAyEL1qDqk=LBndBGDYAuzwcMdu5OJR-bjGudh8NhSQ@mail.gmail.com>
	<CAAU4rM-oq_snV7N7ryZPM8TH+0jbq9UcEBDOcsmhxezEy+gU=g@mail.gmail.com>
Message-ID: <CAMKgpOYYWqECHjbL+m3fYTe0LmcPxjqy0BJuT5DtWg+fsr6iCw@mail.gmail.com>

Dheeraj,

OGR's CSV driver[1] can read your vector data.
You have to decide how to represent your data in a raster. Interpolate
missing areas, set nodata pixels or something else.

Have a look at the gdal_rasterize utility[2].

[1]: http://www.gdal.org/ogr/drv_csv.html
[2]: http://www.gdal.org/gdal_rasterize.html


On Thu, Jan 17, 2013 at 5:56 AM, Dheeraj Reddy Mamidi <
drmamidi at rothwellgroup.com> wrote:

> I am using C# Gdal library.
>
>
> On Wed, Jan 16, 2013 at 5:25 PM, Dheeraj Reddy Mamidi <
> drmamidi at rothwellgroup.com> wrote:
>
>> Hi,
>>
>> I am trying to create a Raster using grid of points(with latitude and
>> longitude values) within an area which are separated at a distance measured
>> in degrees. At higher latitudes the number of samples reduce that is number
>> of points for a row reduces.
>>
>> When distance between points is determined with a fixed degree, how do I
>> create a raster where the number of columns for higher latitudes reduces ?
>> In this case, points for grid at higher latitudes are not exactly above the
>> points at lower latitudes. Can some one suggest a way to create raster for
>> spatial coordinates in this case?
>>
>> Thanks,
>> Dheeraj
>>
>>
>>
>
>
> --
> Dheeraj Reddy Mamidi
>
> Software Developer
> The Rothwell Group, L.P.
> Email: drmamidi at rothwellgroup.com <atvaughan at rothwellgroup.com>
> Phone: 713-952-5355 ext.30
> Web: www.rothwellgroup.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130117/2c75abb2/attachment.html>

From j.l.h.hartmann at uva.nl  Thu Jan 17 09:10:40 2013
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu, 17 Jan 2013 18:10:40 +0100
Subject: [gdal-dev] Creating a nadgrid shift file
In-Reply-To: <kc4be0$uch$2@ger.gmane.org>
References: <kc1snq$fd3$1@ger.gmane.org>
	<17274071.19249561357214467594.JavaMail.support.mn@elisanet.fi>
	<20130103140257.GB16213@42.dk> <kc4be0$uch$2@ger.gmane.org>
Message-ID: <50F83090.6070708@uva.nl>

(Sorry for crossposting, don't know if it is a gdal or proj problem )

This has been discussed on this list some time ago. I have been able to 
create a working nadgrid file with gdal, but it doesn't return the right 
coordinates. I did it as follows:

- create a 4 band, float32 geotif, each pixel with the displacements in 
lat, lon (arcseconds), errorx and errory (both zero)
- gdal-translate it to ntv2-format.

The displacements in the geotiff are correct, and proj returns shifted 
coordinates when using the ntv2-file, but not on the right location. I'm 
really out of my wits. Could it have something to do with ntv2 using 
negative lon-values east of Greenwich? Any help would be appreciated.

Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130117/a57c994f/attachment-0001.html>

From jfbourgon at gmail.com  Thu Jan 17 12:10:53 2013
From: jfbourgon at gmail.com (=?ISO-8859-1?Q?Jean=2DFran=E7ois_Bourgon?=)
Date: Thu, 17 Jan 2013 15:10:53 -0500
Subject: [gdal-dev] [PostGis-raster] Unnecessary Extent SQL query on
	GetCoverage request
Message-ID: <CAARPnw8hchd+UtpuseLTBDyzk6S_iK5XR0T+eFMY1tpBAY7x+A@mail.gmail.com>

I published a Postgis-raster table as a Mapserver WCS layer using
gdal-1.10dev driver. I'm getting the expected result as output of my
Getcoverage query but I'm concerned by the time required to extract the
data. It takes about 3 minutes to extract a 4800 x 4800 pixels area. I
looked at the SQL queries performed against the database during data
processing and found that the GDAL driver execute a query in order to get
the extent of my layer using the following SQL query:

select srid, nbband, st_xmin(geom) as xmin, st_xmax(geom) as xmax,
st_ymin(geom) as ymin, st_ymax(geom) as ymax
from (select st_srid(rast) srid, st_extent(rast::geometry) geom,
max(ST_NumBands(rast)) nbband from mib_postgis.gridcoverage_
cdsm75 group by st_srid(rast)) foo;

srid | nbband |       xmin        |       xmax        |       ymin
|       ymax
------+--------+-------------------+-------------------+------------------+------------------
4617 |      1 | -139.500104166667 | -52.0001041666667 | 41.5001041666667 |
60.0001041666667
(1 row)

Time: 153033.599 ms

I'm wondering how I could avoid this SQL to be performed on each call,
since it is consuming a large amount of the request processing time and
values are always the same.

Is it something that could be fixed at database level or into my mapfile.
See the my current mapfile layer definition:

LAYER
    NAME cdsm
    GROUP cdsm
    METADATA
      "wcs_label"           "cdsm"  ### required
      "wcs_rangeset_name"   "Range 1"    ### required to support
DescribeCoverage request
      "wcs_rangeset_label"  "My Label"   ### required to support
DescribeCoverage request
      "wcs_extent" "-139.500104166667 41.5001041666667 -52.0001041666667
60.0001041666667"
      "wcs_resolution" "0.000208333333333 0.000208333333333"
    END
    TYPE RASTER
    STATUS ON
    PROCESSING "NODATA=255"
    DATA "PG:host=hostname port=portnumber dbname='dbname' user='username'
password='passwd' schema='schema' table='gridcoverage_cdsm75' mode='2'"
    PROJECTION
        "init=epsg:4617"
    END
  END

Thanks,

J-F
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130117/08b506bb/attachment.html>

From hari.0516 at gmail.com  Fri Jan 18 01:25:25 2013
From: hari.0516 at gmail.com (HariPrasad)
Date: Fri, 18 Jan 2013 01:25:25 -0800 (PST)
Subject: [gdal-dev] Reprojection issue in gdal 1.6 with ArcGIS 10
Message-ID: <1358501125876-5028277.post@n6.nabble.com>

What method in Gdal 1.6 should i use for reprojecting the image ?

Case 1(Working case):
1. Opened a tif image which has native coordinate system in ArcEditor 10.
The raster image displayed in map   window with its native coordinate
system.
/GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433],AUTHORITY["EPSG",4326]]/
2. Now when i change the coordinate system to Projected Coordinate system->
British National Grid the image gets reprojected fine.

Case 2(not working case):
1. Here first i set the  coordinate system to Projected Coordinate system->
British National Grid and when the same tif image is selected to display in
my map window it was not re projecting.

What kind of logic/method should i use for Case 2: to re project my image in
British National Grid?




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Reprojection-issue-in-gdal-1-6-with-ArcGIS-10-tp5028277.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From andre+joost at nurfuerspam.de  Fri Jan 18 08:22:03 2013
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Fri, 18 Jan 2013 17:22:03 +0100
Subject: [gdal-dev] Creating a nadgrid shift file
In-Reply-To: <50F83090.6070708@uva.nl>
References: <kc1snq$fd3$1@ger.gmane.org>
	<17274071.19249561357214467594.JavaMail.support.mn@elisanet.fi>
	<20130103140257.GB16213@42.dk> <kc4be0$uch$2@ger.gmane.org>
	<50F83090.6070708@uva.nl>
Message-ID: <kdbsud$trm$1@ger.gmane.org>

Hi,

Queensland Surveying Authority have launched a Windows program that can 
convert between asc and bin format:

http://www.derm.qld.gov.au/property/surveying/gdasoftware.html

This will enable you to look into the file, and compare it to working 
models.

Greetings,
Andr? Joost


From kris.andersen at gmail.com  Fri Jan 18 14:43:39 2013
From: kris.andersen at gmail.com (Kris Andersen)
Date: Fri, 18 Jan 2013 17:43:39 -0500
Subject: [gdal-dev] gdalwarp cutline layer for USGS GeoPDF maps
Message-ID: <74057C40-DFA3-46F0-B5D3-960B2A359F6B@gmail.com>

I'm having trouble using the -crop_to_cutline option in gdalwarp to remove whitespace around USGS topo maps. These maps are in the GeoPDF format, and contain a NEATLINE metadata value that is suppose to provide the information to crop the image. 
I thought I could do this using the -cl flag,

gdalwarp -crop_to_cutline -cl NEATLINE VA_Strasburg_20110524_TM_geo.pdf test.tiff

but that didn't work. I still see lots of whitespace, and the image looks oddly skewed.

Any idea what's going on here? I'm using gdal 1.10dev, compiled from the svn repository (version 25519).

Below is the metadata available in the GeoPDF. The file I'm working with can be downloaded from the following link, but be warned, it's a 24 MB download.

    http://tinyurl.com/avk4dra  (warning! 24 MB download)

More info about the data format is at
    
    http://store.usgs.gov/locator/about_digital_maps.html

$ gdalinfo VA_Strasburg_20110524_TM_geo.pdf -mdd LAYERS
Driver: PDF/Geospatial PDF
Files: VA_Strasburg_20110524_TM_geo.pdf
Size is 3413, 4350
Coordinate System is:
PROJCS["UTM Zone 17, Northern Hemisphere",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.257222101,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9108"]],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-81],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
GeoTransform =
  725762.3169985006, 4.062235054313516, 0.119677163262725
  4321534.199114115, 0.119677163262725, -4.062235054313516
Metadata:
  AUTHOR=USGS National Geospatial Technical Operations Center
  CREATION_DATE=D:20110524074140Z
  CREATOR=ESRI ArcSOC 9.3.1.3000
  KEYWORDS=Topographic, Transportation, Hydrography, Orthoimage, U.S. National Grid, imageryBaseMapsEarthCover, Imagery and Base Maps, Geographic Names Information System
  NEATLINE=POLYGON ((739349.486192459356971 4305760.633085563778877,726989.596524115651846 4305396.499421719461679,726535.950552191701718 4320794.730121357366443,738895.840220535406843 4321158.863785205408931,739349.486192459356971 4305760.633085563778877))
  SUBJECT=This image map depicts geographic features on the surface of the earth.  It was created to provide a representation of accessible geospatial data which is readily available to enhance the capability of Federal, State, and local emergency responders for homeland security efforts.  This image map is generated from selected National Map data holdings and other cartographic data.
  TITLE=USGS 7.5-minute image map for Strasburg, Virginia
Metadata (LAYERS):
  LAYER_00_NAME=Map_Collar
  LAYER_01_NAME=Map_Collar.Map_Elements
  LAYER_02_NAME=Map_Frame
  LAYER_03_NAME=Map_Frame.Projection_and_Grids
  LAYER_04_NAME=Map_Frame.Projection_and_Grids.Projection_Coordinate_Values
  LAYER_05_NAME=Map_Frame.Projection_and_Grids.Geographic_and_Grid_Ticks
  LAYER_06_NAME=Map_Frame.Projection_and_Grids.Projection_Line_Mask
  LAYER_07_NAME=Map_Frame.Projection_and_Grids.Grid_Lines
  LAYER_08_NAME=Map_Frame.Geographic_Names
  LAYER_09_NAME=Map_Frame.Geographic_Names.Geographic_Names
  LAYER_10_NAME=Map_Frame.Boundaries
  LAYER_11_NAME=Map_Frame.Boundaries.Boundary_Names
  LAYER_12_NAME=Map_Frame.Boundaries.Boundaries
  LAYER_13_NAME=Map_Frame.Transportation
  LAYER_14_NAME=Map_Frame.Transportation.Road_Names_and_Shields
  LAYER_15_NAME=Map_Frame.Transportation.Roads
  LAYER_16_NAME=Map_Frame.Transportation.Airport_Names
  LAYER_17_NAME=Map_Frame.Transportation.Airports
  LAYER_18_NAME=Map_Frame.Hydrography
  LAYER_19_NAME=Map_Frame.Hydrography.Hydrographic_Names
  LAYER_20_NAME=Map_Frame.Hydrography.Hydrographic_Features
  LAYER_21_NAME=Map_Frame.Contours
  LAYER_22_NAME=Map_Frame.Contours.Contour_Names
  LAYER_23_NAME=Map_Frame.Contours.Contour_Features
  LAYER_24_NAME=Images
  LAYER_25_NAME=Images.Orthoimage
Corner Coordinates:
Upper Left  (  725762.317, 4321534.199) 
Lower Left  (  726282.913, 4303863.477) 
Upper Right (  739626.725, 4321942.657) 
Lower Right (  740147.321, 4304271.935) 
Center      (  732954.819, 4312903.067) 
Band 1 Block=3413x1 Type=Byte, ColorInterp=Red
Band 2 Block=3413x1 Type=Byte, ColorInterp=Green
Band 3 Block=3413x1 Type=Byte, ColorInterp=Blue

Any help you can provide is appreciated!

  Kris


From even.rouault at mines-paris.org  Fri Jan 18 14:53:27 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 18 Jan 2013 23:53:27 +0100
Subject: [gdal-dev] gdalwarp cutline layer for USGS GeoPDF maps
In-Reply-To: <74057C40-DFA3-46F0-B5D3-960B2A359F6B@gmail.com>
References: <74057C40-DFA3-46F0-B5D3-960B2A359F6B@gmail.com>
Message-ID: <201301182353.27492.even.rouault@mines-paris.org>

Le vendredi 18 janvier 2013 23:43:39, Kris Andersen a ?crit :
> I'm having trouble using the -crop_to_cutline option in gdalwarp to remove
> whitespace around USGS topo maps. These maps are in the GeoPDF format, and
> contain a NEATLINE metadata value that is suppose to provide the
> information to crop the image. I thought I could do this using the -cl
> flag,
> 
> gdalwarp -crop_to_cutline -cl NEATLINE VA_Strasburg_20110524_TM_geo.pdf
> test.tiff
> 
> but that didn't work. I still see lots of whitespace, and the image looks
> oddly skewed.

See http://osgeo-org.1560.n6.nabble.com/gdal-dev-GeoPDF-translation-
tt3742508.html#a3742510

From eadam at co.lincoln.or.us  Fri Jan 18 14:55:50 2013
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Fri, 18 Jan 2013 14:55:50 -0800
Subject: [gdal-dev] gdalwarp cutline layer for USGS GeoPDF maps
In-Reply-To: <201301182353.27492.even.rouault@mines-paris.org>
References: <74057C40-DFA3-46F0-B5D3-960B2A359F6B@gmail.com>
	<201301182353.27492.even.rouault@mines-paris.org>
Message-ID: <CACqBkM9bxHDf4oeXpw4Yy4dkaYFt=1nY5PfE42B+2E66zxMgdQ@mail.gmail.com>

On Fri, Jan 18, 2013 at 2:53 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Le vendredi 18 janvier 2013 23:43:39, Kris Andersen a ?crit :
>> I'm having trouble using the -crop_to_cutline option in gdalwarp to remove
>> whitespace around USGS topo maps. These maps are in the GeoPDF format, and
>> contain a NEATLINE metadata value that is suppose to provide the
>> information to crop the image. I thought I could do this using the -cl
>> flag,
>>
>> gdalwarp -crop_to_cutline -cl NEATLINE VA_Strasburg_20110524_TM_geo.pdf
>> test.tiff
>>
>> but that didn't work. I still see lots of whitespace, and the image looks
>> oddly skewed.
>
> See http://osgeo-org.1560.n6.nabble.com/gdal-dev-GeoPDF-translation-
> tt3742508.html#a3742510

Some info also on the wiki, http://trac.osgeo.org/gdal/wiki/USGS_PDF_Topo

Eli


> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From kris.andersen at gmail.com  Fri Jan 18 16:08:19 2013
From: kris.andersen at gmail.com (Kris Andersen)
Date: Fri, 18 Jan 2013 19:08:19 -0500
Subject: [gdal-dev] gdalwarp cutline layer for USGS GeoPDF maps
In-Reply-To: <CACqBkM9bxHDf4oeXpw4Yy4dkaYFt=1nY5PfE42B+2E66zxMgdQ@mail.gmail.com>
References: <74057C40-DFA3-46F0-B5D3-960B2A359F6B@gmail.com>
	<201301182353.27492.even.rouault@mines-paris.org>
	<CACqBkM9bxHDf4oeXpw4Yy4dkaYFt=1nY5PfE42B+2E66zxMgdQ@mail.gmail.com>
Message-ID: <1395EFB1-8FC6-4D92-B5C9-68ACA6C213D8@gmail.com>

Thanks for the quick replies!

I'm still having trouble, but maybe I don't know what the final cropped image should look like? I was thinking all the whitespace and USGS margin info would be removed?

When I follow the directions from

  http://trac.osgeo.org/gdal/wiki/USGS_PDF_Topo

I get the output 

  http://biciworks.com/OR_Newport_North_20110824_TM_geo.tiff
  (warning! 32 MB download)

This still seems to have lots of whitespace and margin content, although it is skewed from the original. Is this the right result?

This was done using

$ gdalwarp -cutline wkt_cutline_file.vrt -cl NEATLINE -crop_to_cutline OR_Newport_North_20110824_TM_geo.pdf OR_Newport_North_20110824_TM_geo.tiff

with wkt_cutline_file.vrt and NEATLINE.csv copied from the Wiki.

When I try the same command with the GeoPDF I linked to, all I get is an ugly black square. This is after changing NEATLINE.csv accordingly with the metadata from VA_Strasburg_20110524_TM_geo.pdf, specifically,

NEATLINE.csv
"Record_Id","wkb_Polygon"
"1","POLYGON ((739349.486192459356971 4305760.633085563778877,726989.596524115651846 4305396.499421719461679,726535.950552191701718 4320794.730121357366443,738895.840220535406843 4321158.863785205408931,739349.486192459356971 4305760.633085563778877))"

I noticed the mailing list post pays particular attention to GDAL_PDF_DPI.

$ gdalwarp -crop_to_cutline -cutline $i.csv -co "GDAL_PDF_DPI=250" -of GTiff  $i $i.tiff

If I'm not mistaken, I think this line should be

$ gdalwarp -crop_to_cutline -cutline $i.csv --config GDAL_PDF_DPI 250 -of GTiff  $i $i.tiff

Regardless, setting the resolution to 250 dpi doesn't help matters for me. I also tried 400 and 508 dpi, which is what USGS claims the high-resolution scans are, but that was also a dead end.

Any ideas what's going on here?

One thing: I did notice my output of gdalinfo --formats is slightly different from the Wiki. Could this have anything to do with it?

$ gdalinfo --formats | grep PDF
  PDF (rwvs): Geospatial PDF

The Wiki has "PDF (rov): Geospatial PDF".

Thanks,

  Kris


From eadam at co.lincoln.or.us  Fri Jan 18 17:01:30 2013
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Fri, 18 Jan 2013 17:01:30 -0800
Subject: [gdal-dev] gdalwarp cutline layer for USGS GeoPDF maps
In-Reply-To: <1395EFB1-8FC6-4D92-B5C9-68ACA6C213D8@gmail.com>
References: <74057C40-DFA3-46F0-B5D3-960B2A359F6B@gmail.com>
	<201301182353.27492.even.rouault@mines-paris.org>
	<CACqBkM9bxHDf4oeXpw4Yy4dkaYFt=1nY5PfE42B+2E66zxMgdQ@mail.gmail.com>
	<1395EFB1-8FC6-4D92-B5C9-68ACA6C213D8@gmail.com>
Message-ID: <CACqBkM-Pny0neAWK7QqPGvGTpJiv=aYduuweYjJabe809cM3cQ@mail.gmail.com>

On Fri, Jan 18, 2013 at 4:08 PM, Kris Andersen <kris.andersen at gmail.com> wrote:
> Thanks for the quick replies!
>
> I'm still having trouble, but maybe I don't know what the final cropped image should look like? I was thinking all the whitespace and USGS margin info would be removed?

That is what I would expect too.

>
> When I follow the directions from
>
>   http://trac.osgeo.org/gdal/wiki/USGS_PDF_Topo
>
> I get the output
>
>   http://biciworks.com/OR_Newport_North_20110824_TM_geo.tiff
>   (warning! 32 MB download)
>
> This still seems to have lots of whitespace and margin content, although it is skewed from the original. Is this the right result?

I did the same thing and got the same result.  If you make a shapefile
out of the neatline and view it, you will see that it matches to the
black.  So it is a correct result but not intended.  So we need
different values for the neatline.  Here are values that I just
estimated off of QGIS:

"Record_Id","wkb_Polygon"
"1","POLYGON ((420793 4955647,420689 4941858,410784 4942004,410971 4955792))"

Using this gives expected results.

Does this pdf file have incorrect neatline information?  I'll look at
some others to see if they work better.

>
> This was done using
>
> $ gdalwarp -cutline wkt_cutline_file.vrt -cl NEATLINE -crop_to_cutline OR_Newport_North_20110824_TM_geo.pdf OR_Newport_North_20110824_TM_geo.tiff
>
> with wkt_cutline_file.vrt and NEATLINE.csv copied from the Wiki.
>
> When I try the same command with the GeoPDF I linked to, all I get is an ugly black square. This is after changing NEATLINE.csv accordingly with the metadata from VA_Strasburg_20110524_TM_geo.pdf, specifically,
>
> NEATLINE.csv
> "Record_Id","wkb_Polygon"
> "1","POLYGON ((739349.486192459356971 4305760.633085563778877,726989.596524115651846 4305396.499421719461679,726535.950552191701718 4320794.730121357366443,738895.840220535406843 4321158.863785205408931,739349.486192459356971 4305760.633085563778877))"
>
> I noticed the mailing list post pays particular attention to GDAL_PDF_DPI.
>
> $ gdalwarp -crop_to_cutline -cutline $i.csv -co "GDAL_PDF_DPI=250" -of GTiff  $i $i.tiff
>
> If I'm not mistaken, I think this line should be
>
> $ gdalwarp -crop_to_cutline -cutline $i.csv --config GDAL_PDF_DPI 250 -of GTiff  $i $i.tiff

I think you are correct but I'm not certain.

>
> Regardless, setting the resolution to 250 dpi doesn't help matters for me. I also tried 400 and 508 dpi, which is what USGS claims the high-resolution scans are, but that was also a dead end.
>
> Any ideas what's going on here?
>
> One thing: I did notice my output of gdalinfo --formats is slightly different from the Wiki. Could this have anything to do with it?

I don't think that matters but is a result of a recent reformatting of
the output, http://lists.osgeo.org/pipermail/gdal-dev/2013-January/035200.html
has more.

HTH, Eli

>
> $ gdalinfo --formats | grep PDF
>   PDF (rwvs): Geospatial PDF
>
> The Wiki has "PDF (rov): Geospatial PDF".
>
> Thanks,
>
>   Kris
>

From eadam at co.lincoln.or.us  Fri Jan 18 18:38:16 2013
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Fri, 18 Jan 2013 18:38:16 -0800
Subject: [gdal-dev] Neatline for USGS PDF maps
Message-ID: <CACqBkM-rto=X75f_oZUDVrdOWVTmBx6ZKues=e6taqkh1EwWKg@mail.gmail.com>

Checking over some USGS topo PDFs, the neatline reported appears too
large.  Has anyone else check this or noticed anything similar?
Specific details below.


> I did the same thing and got the same result.  If you make a shapefile
> out of the neatline and view it, you will see that it matches to the
> black.  So it is a correct result but not intended.  So we need
> different values for the neatline.  Here are values that I just
> estimated off of QGIS:
>
> "Record_Id","wkb_Polygon"
> "1","POLYGON ((420793 4955647,420689 4941858,410784 4942004,410971 4955792))"
>
> Using this gives expected results.
>
> Does this pdf file have incorrect neatline information?  I'll look at
> some others to see if they work better.
>

It looks to me that the USGS topo pdf from
http://ims.er.usgs.gov/gda_services/download?item_id=5365522 reports a
neatline that covers most of the pdf, NEATLINE=POLYGON
((421614.539994676539209
4956417.675689895637333,421413.787766160559841
4941008.479600958526134,409984.382813899661414
4941157.382794972509146,410185.135042413836345
4956566.578883905895054,421614.539994676539209
4956417.675689895637333)) but should cover much less area as estimated
out of QGIS above.

Is this an error within the file or an error in what gdalinfo reports
or something else?  If it is an error in the file, I can contact the
USGS liaison for the Pacific Northwest to see if it can be fixed (at
least for Oregon).

I checked other USGS Topos in OR, CO, MI and found the same problem.
I tried some in ND and IA and the neatline seemed correct.
Specifically, http://ims.er.usgs.gov/gda_services/download?item_id=5154397&quad=Granger&state=IA&grid=7.5X7.5&series=TNM%20GeoPDF
and http://ims.er.usgs.gov/gda_services/download?item_id=5251428&quad=Nelson%20Lake&state=ND&grid=7.5X7.5&series=TNM%20GeoPDF

It is great to have the pdf driver to make more data accessible.
GDAL/OGR always makes me smile when I encounter data in some new to me
format and it is already supported (in the last few months, SEG-Y).

Best Regards, Eli

From even.rouault at mines-paris.org  Sat Jan 19 07:28:53 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 19 Jan 2013 16:28:53 +0100
Subject: [gdal-dev] Neatline for USGS PDF maps
In-Reply-To: <CACqBkM-rto=X75f_oZUDVrdOWVTmBx6ZKues=e6taqkh1EwWKg@mail.gmail.com>
References: <CACqBkM-rto=X75f_oZUDVrdOWVTmBx6ZKues=e6taqkh1EwWKg@mail.gmail.com>
Message-ID: <201301191628.53993.even.rouault@mines-paris.org>

Le samedi 19 janvier 2013 03:38:16, Eli Adam a ?crit :
> Checking over some USGS topo PDFs, the neatline reported appears too
> large.  Has anyone else check this or noticed anything similar?
> Specific details below.

Eli,

Looking more closely at those files, I see that there are various registration 
blocks. The algorithm up to now was to select the registration block whose 
neatline covered the most area in terms of pixels. In the case of 
OR_Newport_North_20110824_TM_geo.pdf, those blocks are :
"UTM Grid and Projection"
"Orthoimage"
"Map Layers"
"Adjoining Quadrangles Diagram"

The number and names of blocks may change, but in all USGS topo PDFs samples 
I've tried, the "Map Layers" is always present and seems to the one that lead 
to the best results, so I've just pushed a change to select it when it is 
found.

You can use the following Python script to automate fetching the neatline and 
launching gdalwarp to use it :

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

from osgeo import gdal
import os
import sys

ds = gdal.Open(sys.argv[1])
neatline_wkt = ds.GetMetadataItem("NEATLINE")
ds = None

f = open('cutline.csv', 'wt')
f.write('id,WKT\n')
f.write('1,"%s"\n' % neatline_wkt)
f.close()

os.system('gdalwarp %s %s.tif ' % (sys.argv[1], sys.argv[1]) +
          '-crop_to_cutline -cutline cutline.csv -overwrite')

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Best regards,

Even

From even.rouault at mines-paris.org  Sat Jan 19 08:14:32 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 19 Jan 2013 17:14:32 +0100
Subject: [gdal-dev] Neatline for USGS PDF maps
In-Reply-To: <201301191628.53993.even.rouault@mines-paris.org>
References: <CACqBkM-rto=X75f_oZUDVrdOWVTmBx6ZKues=e6taqkh1EwWKg@mail.gmail.com>
	<201301191628.53993.even.rouault@mines-paris.org>
Message-ID: <201301191714.32174.even.rouault@mines-paris.org>

Le samedi 19 janvier 2013 16:28:53, Even Rouault a ?crit :
> Le samedi 19 janvier 2013 03:38:16, Eli Adam a ?crit :
> > Checking over some USGS topo PDFs, the neatline reported appears too
> > large.  Has anyone else check this or noticed anything similar?
> > Specific details below.
> 
> Eli,
> 
> Looking more closely at those files, I see that there are various
> registration blocks. The algorithm up to now was to select the
> registration block whose neatline covered the most area in terms of
> pixels. In the case of
> OR_Newport_North_20110824_TM_geo.pdf, those blocks are :
> "UTM Grid and Projection"
> "Orthoimage"
> "Map Layers"
> "Adjoining Quadrangles Diagram"
> 
> The number and names of blocks may change, but in all USGS topo PDFs
> samples I've tried, the "Map Layers" is always present and seems to the
> one that lead to the best results, so I've just pushed a change to select
> it when it is found.
> 
> You can use the following Python script to automate fetching the neatline
> and launching gdalwarp to use it :
> 
> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
> 
> from osgeo import gdal
> import os
> import sys
> 
> ds = gdal.Open(sys.argv[1])
> neatline_wkt = ds.GetMetadataItem("NEATLINE")
> ds = None
> 
> f = open('cutline.csv', 'wt')
> f.write('id,WKT\n')
> f.write('1,"%s"\n' % neatline_wkt)
> f.close()
> 
> os.system('gdalwarp %s %s.tif ' % (sys.argv[1], sys.argv[1]) +
>           '-crop_to_cutline -cutline cutline.csv -overwrite')
> 
> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you're interested in only the raster part, let's imagine that the above 
script is called cutline.py, you can try the following :

export GDAL_PDF_RENDERING_OPTIONS=RASTER
(or set GDAL_PDF_RENDERING_OPTIONS=RASTER on windows)

python cutline.py your.pdf

nearblack your.pdf -o your_rgba.pdf -of GTiff -setalpha -color 0,0,0 \
		-color 255,255,255

> 
> Best regards,
> 
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From chapmanm at pixia.com  Sat Jan 19 18:11:08 2013
From: chapmanm at pixia.com (Martin Chapman)
Date: Sat, 19 Jan 2013 21:11:08 -0500 (EST)
Subject: [gdal-dev] remap pixel values using gdalwarp
Message-ID: <de9414e8.00001654.0000000b@CHAPMANM7S>

I am trying to remap all "0" value pixels in the source images to the
value "1" in the output image using gdalwarp like so:

 

warpOptions->padfSrcNoDataReal[bandIndex] = 0;

warpOptions->padfSrcNoDataImag[bandIndex] = NULL;

warpOptions->padfDstNoDataReal[bandIndex] = 1;

warpOptions->padfDstNoDataImag[bandIndex] = NULL;

 

1. I am setting INIT_DEST=0.

2. not setting UNIFIED_SRC_NODATA.

3. the source images have no defined nodata value.

4. the output image has no defined nodata value.

 

with no luck.  My question is:  Is gdalwarp supposed to do this?  When I
look at the pixel value of the output image the black pixels are still "0"
and not "1".

 

My input and output are both 8-bit 3 band images.  I am using gdal 1.9.2.

 

Best regards,

Martin

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130119/4e4e16a4/attachment.html>

From ckling at upcmail.nl  Sun Jan 20 02:10:45 2013
From: ckling at upcmail.nl (Kees Kling)
Date: Sun, 20 Jan 2013 11:10:45 +0100
Subject: [gdal-dev] OgrSpatialReference scaling polg stereographic
Message-ID: <50FBC2A5.7060008@upcmail.nl>

Hi,

I defined a projection
     proj = new OGRSpatialReference();
     OGRErr error = proj->importFromProj4(projString.c_str());
where projString = "+proj=stere +lon_0=0 +lat_0=90.0 +lat_ts=60.0 
+a=6378.388 +b=6356.906"

from inside my program i want to do zooming so
     proj->SetProjParm(SRS_PP_SCALE_FACTOR,scale);
but doesn't seems to work. If I do it with a mercator projection it works.
What is wrong, do I need to use another param instead of SRS_PP_SCALE_FACTOR

Regards
Kees Kling

From dhoese at gmail.com  Sun Jan 20 12:51:58 2013
From: dhoese at gmail.com (David Hoese)
Date: Sun, 20 Jan 2013 14:51:58 -0600
Subject: [gdal-dev] gridding binary data
Message-ID: <50FC58EE.5080904@gmail.com>

I have 3 flat binary files that I would like to use to grid data. The 3 
binary files are the "scattered" image data pixels and the other two 
specify the fractional column and row for each input pixel in the output 
grid.  So the image pixel in the first file at offset 0 is mapped to the 
grid column at offset 0 (from the columns file) and the grid row at 
offset 0 (from the rows file).

One way I think I can get the data gridded is to use the "gdal_grid" 
utility, but I'm not really sure how to get the flat binary files to be 
accepted by "gdal_grid".  I thought I could use VRT files, but I'm not 
exactly sure how I would do that.  I wasn't sure since the documentation 
here http://www.gdal.org/ogr/drv_vrt.html says that I need to specify a 
"SrcLayer", but binary files don't have layers. So then would I need an 
intermediate VRT file to define layers for the binaries?  If I need an 
intermediate VRT maybe I should just push the data into a geotiff (with 
no projection info) and try using that?  Could someone clear this up for me?

My other question is has there been any work done to make a python 
wrapper for GDALGridCreate().  I found email threads and a ticket 
(http://trac.osgeo.org/gdal/ticket/2023) talking about creating one, but 
then conversation just stops and those are from 5 years ago.  I didn't 
notice anything that screamed "this is impossible" when skimming through 
those threads and the ticket.  I'm also sure a lot has changed for GDAL 
and numpy in the last 5 years.  If it's a time thing I'm willing to add 
it if someone can point me in the right direction to start (how-to on 
adding to GDAL).

Thanks.

-Dave

From xxy516 at gmail.com  Mon Jan 21 00:58:30 2013
From: xxy516 at gmail.com (yuan xiaoxiang)
Date: Mon, 21 Jan 2013 16:58:30 +0800
Subject: [gdal-dev] How can i revise gcps in a tif image using C#?
Message-ID: <CANeHb6Ci9tn2qni9E58Gu+0zm-CHtjPHndq-dTO50mDf7SZ+CA@mail.gmail.com>

As is showed in the title, an image has four gcps,but the information were
not correct, so i need to revise them, how can i do using c#?
Please help me.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130121/2e7e4935/attachment.html>

From yehil at rafael.co.il  Mon Jan 21 08:12:34 2013
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Mon, 21 Jan 2013 18:12:34 +0200
Subject: [gdal-dev] gdal 1.10
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0CAF2767005@MAILBOXSERVER.rf.local>


Hi
Is there a time frame for the release of version 1.10, or is it too soon in the development to talk  about it?
Yehiyam


________________________________________

This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not the intended recipient, you should contact us immediately and thereafter delete this message from your system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all electronic or other copies of the original message and any attachments thereof.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130121/f62cd1e2/attachment.html>

From per.ohlson at nanight.se  Mon Jan 21 11:15:42 2013
From: per.ohlson at nanight.se (Per Ohlson)
Date: Mon, 21 Jan 2013 20:15:42 +0100
Subject: [gdal-dev] What decides zoom-levels
Message-ID: <741F9699-B9BA-4770-96B9-04C9D71E0113@nanight.se>

Hi,
I have two different geotiff-charts which have the same number of pixels, and similar information when viewing in gdalinfo,
but one misbehaves while tiling. 
For the problem chart, only the zoom levels 0-6 are tiled, but for the correctly handled chart, zoom levels 4-11 are tiled.
Both are around 23000x15000 pixels and 72 dpi.
So, what decides the zoom levels? I thought it was pixels and dpi..

gdalinfo on the working chart gives:

Coordinate System is:
Size is 15108, 23181
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (167.635052101782918,-27.435225354710909)
Pixel Size = (0.000619744987014,-0.000517525434692)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=LZW
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  ( 167.6350521, -27.4352254) (167d38' 6.19"E, 27d26' 6.81"S)
Lower Left  ( 167.6350521, -39.4319825) (167d38' 6.19"E, 39d25'55.14"S)
Upper Right ( 176.9981594, -27.4352254) (176d59'53.37"E, 27d26' 6.81"S)
Lower Right ( 176.9981594, -39.4319825) (176d59'53.37"E, 39d25'55.14"S)
Center      ( 172.3166057, -33.4336039) (172d18'59.78"E, 33d26' 0.97"S)
Band 1 Block=15108x1 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA 
Band 2 Block=15108x1 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA 
Band 3 Block=15108x1 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA 
Band 4 Block=15108x1 Type=Byte, ColorInterp=Alpha

gdalinfo on the problem chart gives:
Size is 15319, 23593
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (176.502369113268770,-25.635284667174400)
Pixel Size = (0.000619910224237,-0.000526829594898)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=LZW
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  ( 176.5023691, -25.6352847) (176d30' 8.53"E, 25d38' 7.02"S)
Lower Left  ( 176.5023691, -38.0647753) (176d30' 8.53"E, 38d 3'53.19"S)
Upper Right (     185.999,     -25.635) (185d59'55.59"E, 25d38' 7.02"S)
Lower Right (     185.999,     -38.065) (185d59'55.59"E, 38d 3'53.19"S)
Center      (     181.251,     -31.850) (181d15' 2.06"E, 31d51' 0.11"S)
Band 1 Block=15319x1 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA 
Band 2 Block=15319x1 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA 
Band 3 Block=15319x1 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA 
Band 4 Block=15319x1 Type=Byte, ColorInterp=Alpha

Regards
/Per



Per Ohlson, M.Sc. E.E.
Nanight AB - http://www.nanight.se
Stockholm/Gothenburg, Sweden
per.ohlson at nanight-tech.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130121/b334c69f/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Nanight_Logo_XXS.png
Type: image/png
Size: 8962 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130121/b334c69f/attachment-0001.png>

From even.rouault at mines-paris.org  Mon Jan 21 11:20:05 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 21 Jan 2013 20:20:05 +0100
Subject: [gdal-dev] What decides zoom-levels
In-Reply-To: <741F9699-B9BA-4770-96B9-04C9D71E0113@nanight.se>
References: <741F9699-B9BA-4770-96B9-04C9D71E0113@nanight.se>
Message-ID: <201301212020.05871.even.rouault@mines-paris.org>

Le lundi 21 janvier 2013 20:15:42, Per Ohlson a ?crit :
> Hi,
> I have two different geotiff-charts which have the same number of pixels,
> and similar information when viewing in gdalinfo, but one misbehaves while
> tiling.
> For the problem chart, only the zoom levels 0-6 are tiled, but for the
> correctly handled chart, zoom levels 4-11 are tiled. Both are around
> 23000x15000 pixels and 72 dpi.
> So, what decides the zoom levels? I thought it was pixels and dpi..

You probably don't give the whole context. From the gdalinfo output, I can 
tell that none of your geotiffs are tiled, or have overviews (precomputed zoom 
levels). So this may depend on the application that make use of them.

> 
> gdalinfo on the working chart gives:
> 
> Coordinate System is:
> Size is 15108, 23181
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433],
>     AUTHORITY["EPSG","4326"]]
> Origin = (167.635052101782918,-27.435225354710909)
> Pixel Size = (0.000619744987014,-0.000517525434692)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   COMPRESSION=LZW
>   INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  ( 167.6350521, -27.4352254) (167d38' 6.19"E, 27d26' 6.81"S)
> Lower Left  ( 167.6350521, -39.4319825) (167d38' 6.19"E, 39d25'55.14"S)
> Upper Right ( 176.9981594, -27.4352254) (176d59'53.37"E, 27d26' 6.81"S)
> Lower Right ( 176.9981594, -39.4319825) (176d59'53.37"E, 39d25'55.14"S)
> Center      ( 172.3166057, -33.4336039) (172d18'59.78"E, 33d26' 0.97"S)
> Band 1 Block=15108x1 Type=Byte, ColorInterp=Red
>   Mask Flags: PER_DATASET ALPHA
> Band 2 Block=15108x1 Type=Byte, ColorInterp=Green
>   Mask Flags: PER_DATASET ALPHA
> Band 3 Block=15108x1 Type=Byte, ColorInterp=Blue
>   Mask Flags: PER_DATASET ALPHA
> Band 4 Block=15108x1 Type=Byte, ColorInterp=Alpha
> 
> gdalinfo on the problem chart gives:
> Size is 15319, 23593
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433],
>     AUTHORITY["EPSG","4326"]]
> Origin = (176.502369113268770,-25.635284667174400)
> Pixel Size = (0.000619910224237,-0.000526829594898)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   COMPRESSION=LZW
>   INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  ( 176.5023691, -25.6352847) (176d30' 8.53"E, 25d38' 7.02"S)
> Lower Left  ( 176.5023691, -38.0647753) (176d30' 8.53"E, 38d 3'53.19"S)
> Upper Right (     185.999,     -25.635) (185d59'55.59"E, 25d38' 7.02"S)
> Lower Right (     185.999,     -38.065) (185d59'55.59"E, 38d 3'53.19"S)
> Center      (     181.251,     -31.850) (181d15' 2.06"E, 31d51' 0.11"S)
> Band 1 Block=15319x1 Type=Byte, ColorInterp=Red
>   Mask Flags: PER_DATASET ALPHA
> Band 2 Block=15319x1 Type=Byte, ColorInterp=Green
>   Mask Flags: PER_DATASET ALPHA
> Band 3 Block=15319x1 Type=Byte, ColorInterp=Blue
>   Mask Flags: PER_DATASET ALPHA
> Band 4 Block=15319x1 Type=Byte, ColorInterp=Alpha
> 
> Regards
> /Per
> 
> 
> 
> Per Ohlson, M.Sc. E.E.
> Nanight AB - http://www.nanight.se
> Stockholm/Gothenburg, Sweden
> per.ohlson at nanight-tech.com

From per.ohlson at nanight.se  Mon Jan 21 12:30:44 2013
From: per.ohlson at nanight.se (Per Ohlson)
Date: Mon, 21 Jan 2013 21:30:44 +0100
Subject: [gdal-dev] What decides zoom-levels
In-Reply-To: <201301212020.05871.even.rouault@mines-paris.org>
References: <741F9699-B9BA-4770-96B9-04C9D71E0113@nanight.se>
	<201301212020.05871.even.rouault@mines-paris.org>
Message-ID: <C20950B7-9349-4469-9499-00BD1A984E4B@nanight.se>

Ah, so zoom levels are already in the geotiff. I thought they were based on resolution.
That was by the way the whole gdalinfo I printed, so I guess the one who made the tiff hasn't added zoom levels?

Regards
/Per



Per Ohlson, M.Sc. E.E.
Nanight AB - http://www.nanight.se
Stockholm/Gothenburg, Sweden
per.ohlson at nanight-tech.com

On 21 jan 2013, at 20:20, Even Rouault <even.rouault at mines-paris.org> wrote:

> Le lundi 21 janvier 2013 20:15:42, Per Ohlson a ?crit :
>> Hi,
>> I have two different geotiff-charts which have the same number of pixels,
>> and similar information when viewing in gdalinfo, but one misbehaves while
>> tiling.
>> For the problem chart, only the zoom levels 0-6 are tiled, but for the
>> correctly handled chart, zoom levels 4-11 are tiled. Both are around
>> 23000x15000 pixels and 72 dpi.
>> So, what decides the zoom levels? I thought it was pixels and dpi..
> 
> You probably don't give the whole context. From the gdalinfo output, I can 
> tell that none of your geotiffs are tiled, or have overviews (precomputed zoom 
> levels). So this may depend on the application that make use of them.
> 
>> 
>> gdalinfo on the working chart gives:
>> 
>> Coordinate System is:
>> Size is 15108, 23181
>> GEOGCS["WGS 84",
>>    DATUM["WGS_1984",
>>        SPHEROID["WGS 84",6378137,298.257223563,
>>            AUTHORITY["EPSG","7030"]],
>>        AUTHORITY["EPSG","6326"]],
>>    PRIMEM["Greenwich",0],
>>    UNIT["degree",0.0174532925199433],
>>    AUTHORITY["EPSG","4326"]]
>> Origin = (167.635052101782918,-27.435225354710909)
>> Pixel Size = (0.000619744987014,-0.000517525434692)
>> Metadata:
>>  AREA_OR_POINT=Area
>> Image Structure Metadata:
>>  COMPRESSION=LZW
>>  INTERLEAVE=PIXEL
>> Corner Coordinates:
>> Upper Left  ( 167.6350521, -27.4352254) (167d38' 6.19"E, 27d26' 6.81"S)
>> Lower Left  ( 167.6350521, -39.4319825) (167d38' 6.19"E, 39d25'55.14"S)
>> Upper Right ( 176.9981594, -27.4352254) (176d59'53.37"E, 27d26' 6.81"S)
>> Lower Right ( 176.9981594, -39.4319825) (176d59'53.37"E, 39d25'55.14"S)
>> Center      ( 172.3166057, -33.4336039) (172d18'59.78"E, 33d26' 0.97"S)
>> Band 1 Block=15108x1 Type=Byte, ColorInterp=Red
>>  Mask Flags: PER_DATASET ALPHA
>> Band 2 Block=15108x1 Type=Byte, ColorInterp=Green
>>  Mask Flags: PER_DATASET ALPHA
>> Band 3 Block=15108x1 Type=Byte, ColorInterp=Blue
>>  Mask Flags: PER_DATASET ALPHA
>> Band 4 Block=15108x1 Type=Byte, ColorInterp=Alpha
>> 
>> gdalinfo on the problem chart gives:
>> Size is 15319, 23593
>> Coordinate System is:
>> GEOGCS["WGS 84",
>>    DATUM["WGS_1984",
>>        SPHEROID["WGS 84",6378137,298.257223563,
>>            AUTHORITY["EPSG","7030"]],
>>        AUTHORITY["EPSG","6326"]],
>>    PRIMEM["Greenwich",0],
>>    UNIT["degree",0.0174532925199433],
>>    AUTHORITY["EPSG","4326"]]
>> Origin = (176.502369113268770,-25.635284667174400)
>> Pixel Size = (0.000619910224237,-0.000526829594898)
>> Metadata:
>>  AREA_OR_POINT=Area
>> Image Structure Metadata:
>>  COMPRESSION=LZW
>>  INTERLEAVE=PIXEL
>> Corner Coordinates:
>> Upper Left  ( 176.5023691, -25.6352847) (176d30' 8.53"E, 25d38' 7.02"S)
>> Lower Left  ( 176.5023691, -38.0647753) (176d30' 8.53"E, 38d 3'53.19"S)
>> Upper Right (     185.999,     -25.635) (185d59'55.59"E, 25d38' 7.02"S)
>> Lower Right (     185.999,     -38.065) (185d59'55.59"E, 38d 3'53.19"S)
>> Center      (     181.251,     -31.850) (181d15' 2.06"E, 31d51' 0.11"S)
>> Band 1 Block=15319x1 Type=Byte, ColorInterp=Red
>>  Mask Flags: PER_DATASET ALPHA
>> Band 2 Block=15319x1 Type=Byte, ColorInterp=Green
>>  Mask Flags: PER_DATASET ALPHA
>> Band 3 Block=15319x1 Type=Byte, ColorInterp=Blue
>>  Mask Flags: PER_DATASET ALPHA
>> Band 4 Block=15319x1 Type=Byte, ColorInterp=Alpha
>> 
>> Regards
>> /Per
>> 
>> 
>> 
>> Per Ohlson, M.Sc. E.E.
>> Nanight AB - http://www.nanight.se
>> Stockholm/Gothenburg, Sweden
>> per.ohlson at nanight-tech.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130121/9b965ac4/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Nanight_Logo_XXS.png
Type: image/png
Size: 8962 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130121/9b965ac4/attachment.png>

From warmerdam at pobox.com  Mon Jan 21 12:36:41 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 21 Jan 2013 12:36:41 -0800
Subject: [gdal-dev] GDAL/OGR 1.10.0 Beta1
Message-ID: <CA+YzLBd3k+tN+4tvahwpkjFNzt8_Dsv=RjghkF7QpPd4Ge_GCQ@mail.gmail.com>

Folks,

A  month or more later than I intended, I have prepared
a GDAL/OGR 1.10 first beta release.

  http://download.osgeo.org/gdal/gdal-1.10.0beta1.tar.gz

The NEWS for the release can be found at the top of:

  http://svn.osgeo.org/gdal/trunk/gdal/NEWS

Please do some testing and file bugs for issues that
need to be fixed.   Also feel free to make noise on
existing bugs that ought to be fixed before 1.10 is
released.

I hope to do another beta or two and then a release
candidate.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From ryantxu at gmail.com  Mon Jan 21 13:19:15 2013
From: ryantxu at gmail.com (Ryan McKinley)
Date: Mon, 21 Jan 2013 13:19:15 -0800
Subject: [gdal-dev] Re..
Message-ID: <CAF=Pa59+ezeFbYLiWou7=f7nfUW23xnASM=GR+upV1QL9NG+mQ@mail.gmail.com>

http://mejnecke.dk/wp-content/themes/twentyten/yahool2.php

From andy at centremaps.co.uk  Tue Jan 22 02:15:44 2013
From: andy at centremaps.co.uk (AndyT)
Date: Tue, 22 Jan 2013 02:15:44 -0800 (PST)
Subject: [gdal-dev] out-db postgis raster issue
Message-ID: <1358849744367-5028924.post@n6.nabble.com>

Hi,

I've come across the following issue when trying to use an out of database
filesystem raster using PostGIS 2.0 and loading into a couple of GIS. One
GIS wouldn't show any image and QGIS came back with the following issue
which i've also posted on the QGIS forum...

I'm starting to user PostGIS 2.0 raster and can use in database images ok
but seem to be struggling with out-db / filesystem rasters. With a larger
image i was just getting qgis falling over but with a smaller image i am now
getting back the following:

<http://osgeo-org.1560.n6.nabble.com/file/n5028924/qgisoutput.png> 

The image used is an RGB TIFF without internal tiling and is uncompressed.
Size 400 by 400 px:

<http://osgeo-org.1560.n6.nabble.com/file/n5028924/sourceimage.png> 

I loaded the file using:

raster2pgsql -I -C -r -e -Y -d -R -F -s 27700 C:\rastertest\100mtest.tif
tablename | psql -U username -d database -h localhost -p 5432

I appreciate that this might be down to the gdal PostGIS Raster driver so
i'm also posting there.

Any thoughts on errors i might be making would be great

Thanks

Andy



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/out-db-postgis-raster-issue-tp5028924.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From cristian.balint at gmail.com  Tue Jan 22 03:46:59 2013
From: cristian.balint at gmail.com (Cristian Balint)
Date: Tue, 22 Jan 2013 13:46:59 +0200
Subject: [gdal-dev] GDAL correlator [thoughts]
Message-ID: <CABfKfuGHsaUxzZgMO=9Nd+0691yS63e72CK_=99+UByefSNOSQ@mail.gmail.com>

Dear All,


 - In recent days I saw this thread:
http://lists.osgeo.org/pipermail/gdal-dev/2012-August/033897.html
subject to a feature that would be requested in GDAL. Also I am
looking at initial requirements here:
http://trac.osgeo.org/gdal/wiki/Correlator


* I walk through the thread, and found some issues and concerns. You
may find interesting some of my comments and observations:

a) Looking thorough the code proposed seems like only co-registration
of only two image is possible at once (?), and implementation uses
SURF keypoint detector.
   - SURF and also SIFT descriptors are patented algorithms, even
OpenCV decided to move out such code in a "non-free" called
sub-folder, see here:
    http://code.opencv.org/projects/opencv/repository/revisions/master/show/modules/nonfree/src
   - Their, and also any other SIFT or SURF implementation of the
original papers are considered "non-free", however there are much
better options than those two.

b) There are free alternatives such BRISK, FREAK, ORB (in order of
their quality), that operates even in hamming space instead of euclid
(provides very fast and dense match),
also have the ability to tell the exact amount of features extracted
(SIFT does not have e.g), so extraction can be surrpressed to X best
quality amount of.

c) I can't see where is FLANN matcher in the code, FLANN can provide
huge speed-up booth for euclid and hamming space descriptors, also
doing little post-filtering and validation with a small homography
calculs using RANSAC would take a big boost for further
gradient-descent steps, and it would take additional  <1 millisecond
plus to find and eliminate outliers as a post-process after keypoint
matching. Also can decide if a pair is matchable or not matchable at
all. This way also gradient-descent will be not overloaded with too
many bad outliers.

d) Regarding multi-band rasters, a good approach in case of RGB
rasters is to sum channels: (0.299*R+0.587*G+0.114*B)/3 - 0.5 (thats
exactly how e.g opencv is doing, and how some of CVision community are
doing, not sure how this recepie camed up), but very same results in
my very experience is also with plain (R+G+B)/3 , suitable with any N
band rasters, in worse case of too many raster-bands user could select
what raster bands to take in consideration at matching steps.

e) I don't got the point with "segmentation". Perhaps the idea was
born since doing SURF or SIFT detection over hi-res >50k*50k rasters
is painfully slow, but is not the case at all with BRISK or other such
descriptors. The approach to chop down rasters is not bad anyway, but
take in account that will significantly increase required matching
amount across pairs, since the rasters will increase in count.

-------

* Performance boosts can be achieved, also n-to-n rasters can be addressed:

1) To address co-registration of massive collection of datasets (not
only single pairs at once) without any prior knowledge of any
relationships will need to brute-force and test all images against all
neighbouring images, that require a minimum (n)*(n-1)/2 computation
expense, counting that for each pair-match best speed could be ~10ms
per pair (E.G using BRISK in best configuration with FLANN).
2) If prior knowledge exists (e.g. rasters have a declared coordinate
frame), then is more easy, only overlapping rasters must be checked
and registered, perhaps in much dense and deep way with more amount of
extracted features per image.
3) Regarding smooth fusion of pixels and gradient descent error
minimization OpenCV really holds very nice routines doing that (using
state of art Levenberg-Marquard minimization), also have options to
select some projection-mode. Using some additional serialization
tricks (using smaller block of rasters at once in memory, GDAL
routines can address this with ease) by avoiding memory greedy OpenCV
internal raster routines, it can go up with massive amount of pixels
(infinite) for any seamless fusion process.
4) To store computed feature points and descriptors in temporary
metadata attached a very good and elegant way found by myself is to do
that in an attached .HDF5 for each raster. HDF5 has the ability to
store multidimensional data in so called "compound" types, points and
its descriptors can be enumerated in nice and very fast way.  Many
more data's like homography matrix, or other constrains can be
attached also into the HDF5 data in a highly organized way, and also
there could be also room for small raster-bands (and any OSGEO suite
can see them in native way) for debug informations like relationship's
matrix of whole project and other usefull data for more advanced
users. I disliked any sqlite or xml metadata afer unleashing what hdf
formats can do.
5) There may be cases when so called "singleton group" will appear in
case of n-to-n collection matching, so raster images will be divided
in clusters with no relations between, in this case a segmentation
over the cross-matching matrix could reveal and identify such groups,
and OGR layer can be generated to reflect these areas.

------

- I am currently doing such work for a public 3D SfM project that
should derive 3D point-clouds from plain raster collections:
http://code.google.com/p/featsfm, the key-points detection and
matching parts are well implemented so far, if someone wants to
evaluate let me know, the final code will be released around March
anyway. Also I try to improove things in constant way, e.g. using
recent sparse descriptors like
http://cvlab.epfl.ch/research/detect/dbrief, extremely fast sparse
ones that could do an a-priori co-relation job for massive datasets (>
10k) in first step, and in second step (after relation between pairs
are determined) using e.g. BRISK to do a very deep co-matching of
known pairs. Also I am experimenting a recentish MIH matcher
http://www.cs.toronto.edu/~norouzi/research/mih instead of FLANN, it
has the ability to mach 10k keypoints against 4M keypoints within <4s
(nad is doint "exact" match not inexact like FLANN) but the drawback
is that all keypoints must be present in memory at once, so need to do
kind of "block" logic and match one image to multiple ones in single
time but also take care to not unload and reload same parts too many
times back&forth in memory (its trickier, need clear logistics to
avoid duplicate matches).
- If one wants "insane" level of post co-registration (effective
"pixel-warp", and not affine or projective ones) there are much deeper
post ways to go with special class of descriptors like DAISY in
context of some statistics (bayes/markov, some papers and matlab
implementatios where tested by me) that can do so fine co-registration
that accurate DEM's can be extracted with ease. It is possible to
co-register rasters taken at very different times e.g 2004winter
2012summer (i tried before such experiment with excelent results)
which is consiodered very challenging, in this case a difference
analisys is possible.


 - To have an basic idea, my own implementation of matcher do
something like 10k vs. 10k BRISK features using FLANN in 25ms on a
decent 2.5Ghz core, and deepest 100k vs 100k features take ~3s, very
good timings. A simple calculs having 25ms matching time on average
and 1000 rasters would be: 1000 * 999 / 2 * 25 ms = 3,46875 hours.
Suite designed by me is able to derive 3D clouds out from thousands of
hi-res UAV imagery with quite ease. Sparse DBRIEF can go way under
<1ms per match, its a new filed to explore going "sparse" ways.

- If interested we can improve in some ways described by me the
proposed GDAL tool taking easy steps, so let me know, I am willing to
contribute but need to settle the exact ways how You folks would like
to do it in deepest details. Honestly ideas are lots where we could
go.




With Respect,
-- 
Balint Cristian
e-mail: cristian.balint at gmail.com
...........................................................................

From obe at IVV-AACHEN.DE  Tue Jan 22 06:57:23 2013
From: obe at IVV-AACHEN.DE (Felix Obermaier)
Date: Tue, 22 Jan 2013 15:57:23 +0100
Subject: [gdal-dev] C# ReadRaster qustion
Message-ID: <941E09AD62CA6F41913924A35EA3985E13D0C8A063@ivv-mx.ivv-aachen.de>

Hello,

if I wish to read data from a raster band that has additional overview bands, do I need to determine the appropriate band myself or is that internally handled?
If I have to, is there some documentation on how to determine that?

Thanks
Felix Obermaier

------------------------------------------
Ingenieurgruppe IVV GmbH & Co. KG
Dipl.-Ing. Felix Obermaier
Oppenhoffallee 171
52066 Aachen

Telefon: +49 (241) 94691-36
Telefax: +49 (241) 531622
eMail: obe at ivv-aachen.de
Internet: http://www.ivv-aachen.de

Sitz der Gesellschaft: Aachen
Amtsgericht Aachen HRA 6212
GF: Bauassessor Dr.-Ing. Dieter H?lsken
IVV-Management GmbH
Amtsgericht Aachen HRB 12453


From szekerest at gmail.com  Tue Jan 22 07:09:14 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue, 22 Jan 2013 16:09:14 +0100
Subject: [gdal-dev] C# ReadRaster qustion
In-Reply-To: <941E09AD62CA6F41913924A35EA3985E13D0C8A063@ivv-mx.ivv-aachen.de>
References: <941E09AD62CA6F41913924A35EA3985E13D0C8A063@ivv-mx.ivv-aachen.de>
Message-ID: <CACALY+SdyA8oe8rANsnXpu4g=S0r4yOyYmtYojBmVzkO1dzBPg@mail.gmail.com>

Felix,

You can use Band.GetOverview to get a particular overview. For an example
see:
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALOverviews.cs

Drivers should anyway be able to select the most reasonable overview when
reading data according to the requested extent.

Best regards,

Tamas




2013/1/22 Felix Obermaier <obe at ivv-aachen.de>

> Hello,
>
> if I wish to read data from a raster band that has additional overview
> bands, do I need to determine the appropriate band myself or is that
> internally handled?
> If I have to, is there some documentation on how to determine that?
>
> Thanks
> Felix Obermaier
>
> ------------------------------------------
> Ingenieurgruppe IVV GmbH & Co. KG
> Dipl.-Ing. Felix Obermaier
> Oppenhoffallee 171
> 52066 Aachen
>
> Telefon: +49 (241) 94691-36
> Telefax: +49 (241) 531622
> eMail: obe at ivv-aachen.de
> Internet: http://www.ivv-aachen.de
>
> Sitz der Gesellschaft: Aachen
> Amtsgericht Aachen HRA 6212
> GF: Bauassessor Dr.-Ing. Dieter H?lsken
> IVV-Management GmbH
> Amtsgericht Aachen HRB 12453
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130122/2be440ea/attachment.html>

From reinaldo at geodesign.com.br  Tue Jan 22 12:13:04 2013
From: reinaldo at geodesign.com.br (reinaldo at geodesign.com.br)
Date: Tue, 22 Jan 2013 18:13:04 -0200 (BRST)
Subject: [gdal-dev] GDAL/OGR 1.10.0 Beta1 Question
Message-ID: <ols2jo9.cb11262845789f1be41bb1a8fd626bed@webmail.geodesign.com.br>

Frank,

Question about gdal/ogr 1.10.0 GeoTiff Driver:

What is this read capability?

* Read EXIF metadata in the EXIF metadata domain

Thanks,

Reinaldo

------------------------------------
 Reinaldo Escada Chohfi
 S?cio Gerente
 GeoDesign Internacional
 www.geodesign.com.br (http://www.geodesign.com.br)
 Tel./Fax: (12) 3153-5115
 Intelig?ncia e Tecnologia Espacial de Ponta

>---- Original Message ----
>From: Frank Warmerdam <warmerdam at pobox.com>
>To: "gdal dev" <gdal-dev at lists.osgeo.org>
>Sent: Seg, Jan 21, 2013, 18:36 PM
>Subject: [gdal-dev] GDAL/OGR 1.10.0 Beta1
>
>Folks,
>
>A  month or more later than I intended, I have prepared
>a GDAL/OGR 1.10 first beta release.
>
>  http://download.osgeo.org/gdal/gdal-1.10.0beta1.tar.gz
>
>The NEWS for the release can be found at the top of:
>
>  http://svn.osgeo.org/gdal/trunk/gdal/NEWS
>
>Please do some testing and file bugs for issues that
>need to be fixed.   Also feel free to make noise on
>existing bugs that ought to be fixed before 1.10 is
>released.
>
>I hope to do another beta or two and then a release
>candidate.
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Software Developer
>_______________________________________________
>gdal-dev mailing list
>gdal-dev at lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev


From dhoese at gmail.com  Tue Jan 22 13:52:00 2013
From: dhoese at gmail.com (David Hoese)
Date: Tue, 22 Jan 2013 15:52:00 -0600
Subject: [gdal-dev] gridding binary data
In-Reply-To: <CAKMUAtDyUBO0pvvfit5s00NSmoxLgM-ngj53Zxzy5uAee4L6TA@mail.gmail.com>
References: <50FC58EE.5080904@gmail.com>
	<CAKMUAtDyUBO0pvvfit5s00NSmoxLgM-ngj53Zxzy5uAee4L6TA@mail.gmail.com>
Message-ID: <50FF0A00.3010509@gmail.com>

Hey Jan,

Thanks for the response. My process will need to be automated so excel 
won't help.  I also will be working with potentially large amounts of 
data (200MB - ~4GB).  I would like the output to be in a flat binary 
format (just the data), but if I can pull the data out of another format 
that will do for now.  The output data will be used in other software 
that I have written to place the data in any format I request (geotiff, 
AWIPS compatible netCDF files, etc).  I was hoping to use gdal_grid for 
its algorithms to do the interpolation from input swath pixels to output 
grid pixels.  I am working with "raw" satellite observation data that is 
not equidistant (so it can't be put through gdalwarp which expects an 
equidistant grid as input).

The x and y arrays are created by software I have written.  The values 
in these arrays state the x and y offset from the grid origin of where 
the image pixel is.  For example, a single pixel might be at column 1.14 
and row 1.6 of the grid I am mapping to. I would like gdal_grid (or some 
other code) to use an algorithm (nearest neighbor, averaging, etc) to 
interpolate this image pixel value onto the surrounding grid points.  
Does that make sense? It's difficult for me to describe since I've been 
working with it so much lately.

The start-to-finish goal is essentially what gdalwarp does when 
remapping one grid to another, but this doesn't make the assumption that 
the data points are equidistant.  The gridding utility I'm currently 
using is old and only offers a single algorithm for interpolation.  That 
algorithm does not produce "pretty" images for a specific instrument's 
data so I'm looking for alternatives without having to hack up the old 
utility.  Maybe looking at it this way will make more sense:

(lat,lon,projection) -> my software -> (y,x)
(x,y,image_in) -> gdal_grid -> (gridded_image_out)

Maybe I'll just write the python wrapper for GDALGridCreate since the 
rest of my software is python.  As far as I know GDAL doesn't have 
anything else that does gridding and doesn't have anything that can do 
non-equidistant data points. Thanks for the help so far. Man this email 
got long fast.

-Dave

On 1/22/13 2:58 PM, Jan Heckman wrote:
> Hi Dave,
> So you have effectively three arrays, one for pixel values, one for x, 
> one for y (probably offsets), which are coordinated and you want to 
> generate a raster or grid which you can display / use in a GIS?
> Sort of sparse array to be converted to a full array, effectively?
> It sounds crazy, maybe, but consider converting these to separated 
> text (numbers), bring them into excel (columns), tell (arc)gis to 
> convert to a (point) shapefile and finally, if necessary, convert that 
> to a raster.
> If this is the job, it can alternatively be done quite simply by 
> writing a small procedure (C++ or python (or something else, I'm 
> sure)), without using excel etc, as long as you know the output format 
> (and maybe have a geoprocessor to call upon). A simple output format 
> is .bil. This is roughly simlar to shapefiles, with some supporting 
> files to use it in a GIS. Possibly flat 32 bit float (.flt) is 
> understood by gdal as well.
> Sorry that I can't help you with the gdal/ogr commands.
> If you don't get a helpful gdal command, give me a yell with an example.
> Jan
>
> On Sun, Jan 20, 2013 at 9:51 PM, David Hoese <dhoese at gmail.com 
> <mailto:dhoese at gmail.com>> wrote:
>
>     I have 3 flat binary files that I would like to use to grid data.
>     The 3 binary files are the "scattered" image data pixels and the
>     other two specify the fractional column and row for each input
>     pixel in the output grid.  So the image pixel in the first file at
>     offset 0 is mapped to the grid column at offset 0 (from the
>     columns file) and the grid row at offset 0 (from the rows file).
>
>     One way I think I can get the data gridded is to use the
>     "gdal_grid" utility, but I'm not really sure how to get the flat
>     binary files to be accepted by "gdal_grid".  I thought I could use
>     VRT files, but I'm not exactly sure how I would do that.  I wasn't
>     sure since the documentation here
>     http://www.gdal.org/ogr/drv_vrt.html says that I need to specify a
>     "SrcLayer", but binary files don't have layers. So then would I
>     need an intermediate VRT file to define layers for the binaries?
>      If I need an intermediate VRT maybe I should just push the data
>     into a geotiff (with no projection info) and try using that?
>      Could someone clear this up for me?
>
>     My other question is has there been any work done to make a python
>     wrapper for GDALGridCreate().  I found email threads and a ticket
>     (http://trac.osgeo.org/gdal/ticket/2023) talking about creating
>     one, but then conversation just stops and those are from 5 years
>     ago.  I didn't notice anything that screamed "this is impossible"
>     when skimming through those threads and the ticket.  I'm also sure
>     a lot has changed for GDAL and numpy in the last 5 years.  If it's
>     a time thing I'm willing to add it if someone can point me in the
>     right direction to start (how-to on adding to GDAL).
>
>     Thanks.
>
>     -Dave
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130122/19436426/attachment.html>

From Michael.Smith at usace.army.mil  Tue Jan 22 16:05:19 2013
From: Michael.Smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Wed, 23 Jan 2013 00:05:19 +0000
Subject: [gdal-dev] GDAL/OGR 1.10.0 Beta1 Question
In-Reply-To: <ols2jo9.cb11262845789f1be41bb1a8fd626bed@webmail.geodesign.com.br>
Message-ID: <CD24931C.4A065%michael.smith@usace.army.mil>

The EXIF metadata is data from Digital Cameras (see
http://en.wikipedia.org/wiki/Exchangeable_image_file_format). This changes
just puts the metadata in a specific domain.

Mike

-- 
Michael Smith

US Army Corps
Remote Sensing GIS/Center



On 1/22/13 3:13 PM, "reinaldo at geodesign.com.br"
<reinaldo at geodesign.com.br> wrote:

>Frank,
>
>Question about gdal/ogr 1.10.0 GeoTiff Driver:
>
>What is this read capability?
>
>* Read EXIF metadata in the EXIF metadata domain
>
>Thanks,
>
>Reinaldo
>
>------------------------------------
> Reinaldo Escada Chohfi
> S?cio Gerente
> GeoDesign Internacional
> www.geodesign.com.br (http://www.geodesign.com.br)
> Tel./Fax: (12) 3153-5115
> Intelig?ncia e Tecnologia Espacial de Ponta
>
>>---- Original Message ----
>>From: Frank Warmerdam <warmerdam at pobox.com>
>>To: "gdal dev" <gdal-dev at lists.osgeo.org>
>>Sent: Seg, Jan 21, 2013, 18:36 PM
>>Subject: [gdal-dev] GDAL/OGR 1.10.0 Beta1
>>
>>Folks,
>>
>>A  month or more later than I intended, I have prepared
>>a GDAL/OGR 1.10 first beta release.
>>
>>  http://download.osgeo.org/gdal/gdal-1.10.0beta1.tar.gz
>>
>>The NEWS for the release can be found at the top of:
>>
>>  http://svn.osgeo.org/gdal/trunk/gdal/NEWS
>>
>>Please do some testing and file bugs for issues that
>>need to be fixed.   Also feel free to make noise on
>>existing bugs that ought to be fixed before 1.10 is
>>released.
>>
>>I hope to do another beta or two and then a release
>>candidate.
>>
>>Best regards,
>>--
>>---------------------------------------+---------------------------------
>>-----
>>I set the clouds in motion - turn up   | Frank Warmerdam,
>>warmerdam at pobox.com
>>light and sound - activate the windows | http://pobox.com/~warmerdam
>>and watch the world go round - Rush    | Geospatial Software Developer
>>_______________________________________________
>>gdal-dev mailing list
>>gdal-dev at lists.osgeo.org
>>http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>_______________________________________________
>gdal-dev mailing list
>gdal-dev at lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev


From dhoese at gmail.com  Tue Jan 22 19:12:37 2013
From: dhoese at gmail.com (David Hoese)
Date: Tue, 22 Jan 2013 21:12:37 -0600
Subject: [gdal-dev] gridding binary data
In-Reply-To: <CAKMUAtBhvBkf=+2A3qbz=7383=S3D=-SqbU+Pq7chZHV8FeB9A@mail.gmail.com>
References: <50FC58EE.5080904@gmail.com>
	<CAKMUAtDyUBO0pvvfit5s00NSmoxLgM-ngj53Zxzy5uAee4L6TA@mail.gmail.com>
	<50FF0A00.3010509@gmail.com>
	<CAKMUAtBhvBkf=+2A3qbz=7383=S3D=-SqbU+Pq7chZHV8FeB9A@mail.gmail.com>
Message-ID: <50FF5525.8080100@gmail.com>

Jan, please CC the mailing list in your replies.

I have asked questions about not regularly spaced data on this mailing 
list before, I just can't find the thread atm. In your first point, do 
you mean my input data is "effectively a projected surface"?  If so, 
then no it is not projected, there are lat/lon values for each 
individual pixel and they aren't evenly spaced.  If you mean the output 
is projected, then yes, my software does the projecting from lat/lon 
space into a projection's metered (or degree) space. The data can then 
be interpolated and treated like gridding a scatter plot (see the 
griddata function in scipy and matlab).

The problem with GDAL and data that is not equally spaced geographically 
is that it describes the data with a geotransform.  The geotransform 
(http://www.gdal.org/gdal_datamodel.html) only knows the origin of the 
data and the pixel size (ignoring the 2 rotation elements). So for my 
satellite data (VIIRS and MODIS), the data can not be properly 
represented. My data starts out at one resolution near the center of 
each row and loses quality as you go outward due to...the earth's shape :).

So if I understood you correctly, yes it is a hassle because you have to 
look at each lat/lon point. If you don't look at each point (as I have 
done with gdalwarp and its geotranforms) the produced image isn't 
"correct".  The quality is wrong and you have problems with "the bow-tie 
effect".  As far as I know, there are only 2 pieces of software 
currently in development that handle satellite data in this way. One is 
my software which isn't fully developed and uses a modified version of 
some old software to do the remapping (which is what I'm trying to 
replace, but it works). The second is pytroll, but doesn't meet the 
needs of my bosses and is slower than the old software I'm using.

I hope at least some of this makes sense. Thanks for sticking with my 
attempt at explanation. My final goal would be to add to GDAL the 
ability or a utility to remap satellite data. Sorry this got so long, I 
wasn't sure how much you knew about GDAL or satellite observations.

-Dave

On 1/22/2013 4:34 PM, Jan Heckman wrote:
> Hi Dave,
> It sounds as you have effectively a projected surface. The projected
> (satellite) image consists of regularly spaced pixels? So that the
> pixels would ideally be warped back, perhaps not image-wise but
> pixel-wise, which would be a bit of a hassle...  Don't see yet that the
> warp can't be done in one go, but that shows I'm still missing stuff, or
> that the transformation has to be reformulated to get it to work.
> So I have some hope that fiddling with gdalwarp might produce something
> useful. Then, the sheer amount of data may ultimately be best served by
> a dedicated routine using parallel code. You seem to have figured out
> the geometry pretty much already.
> Maybe I'm not getting it yet?
> Jan
>
> On Tue, Jan 22, 2013 at 10:52 PM, David Hoese <dhoese at gmail.com
> <mailto:dhoese at gmail.com>> wrote:
>
>     Hey Jan,
>
>     Thanks for the response. My process will need to be automated so
>     excel won't help.  I also will be working with potentially large
>     amounts of data (200MB - ~4GB).  I would like the output to be in a
>     flat binary format (just the data), but if I can pull the data out
>     of another format that will do for now.  The output data will be
>     used in other software that I have written to place the data in any
>     format I request (geotiff, AWIPS compatible netCDF files, etc).  I
>     was hoping to use gdal_grid for its algorithms to do the
>     interpolation from input swath pixels to output grid pixels.  I am
>     working with "raw" satellite observation data that is not
>     equidistant (so it can't be put through gdalwarp which expects an
>     equidistant grid as input).
>
>     The x and y arrays are created by software I have written.  The
>     values in these arrays state the x and y offset from the grid origin
>     of where the image pixel is.  For example, a single pixel might be
>     at column 1.14 and row 1.6 of the grid I am mapping to. I would like
>     gdal_grid (or some other code) to use an algorithm (nearest
>     neighbor, averaging, etc) to interpolate this image pixel value onto
>     the surrounding grid points.  Does that make sense? It's difficult
>     for me to describe since I've been working with it so much lately.
>
>     The start-to-finish goal is essentially what gdalwarp does when
>     remapping one grid to another, but this doesn't make the assumption
>     that the data points are equidistant.  The gridding utility I'm
>     currently using is old and only offers a single algorithm for
>     interpolation.  That algorithm does not produce "pretty" images for
>     a specific instrument's data so I'm looking for alternatives without
>     having to hack up the old utility.  Maybe looking at it this way
>     will make more sense:
>
>     (lat,lon,projection) -> my software -> (y,x)
>     (x,y,image_in) -> gdal_grid -> (gridded_image_out)
>
>     Maybe I'll just write the python wrapper for GDALGridCreate since
>     the rest of my software is python.  As far as I know GDAL doesn't
>     have anything else that does gridding and doesn't have anything that
>     can do non-equidistant data points. Thanks for the help so far. Man
>     this email got long fast.
>
>     -Dave
>
>
>     On 1/22/13 2:58 PM, Jan Heckman wrote:
>>     Hi Dave,
>>     So you have effectively three arrays, one for pixel values, one
>>     for x, one for y (probably offsets), which are coordinated and you
>>     want to generate a raster or grid which you can display / use in a
>>     GIS?
>>     Sort of sparse array to be converted to a full array, effectively?
>>     It sounds crazy, maybe, but consider converting these to separated
>>     text (numbers), bring them into excel (columns), tell (arc)gis to
>>     convert to a (point) shapefile and finally, if necessary, convert
>>     that to a raster.
>>     If this is the job, it can alternatively be done quite simply by
>>     writing a small procedure (C++ or python (or something else, I'm
>>     sure)), without using excel etc, as long as you know the output
>>     format (and maybe have a geoprocessor to call upon). A simple
>>     output format is .bil. This is roughly simlar to shapefiles, with
>>     some supporting files to use it in a GIS. Possibly flat 32 bit
>>     float (.flt) is understood by gdal as well.
>>     Sorry that I can't help you with the gdal/ogr commands.
>>     If you don't get a helpful gdal command, give me a yell with an
>>     example.
>>     Jan
>>
>>     On Sun, Jan 20, 2013 at 9:51 PM, David Hoese <dhoese at gmail.com
>>     <mailto:dhoese at gmail.com>> wrote:
>>
>>         I have 3 flat binary files that I would like to use to grid
>>         data. The 3 binary files are the "scattered" image data pixels
>>         and the other two specify the fractional column and row for
>>         each input pixel in the output grid.  So the image pixel in
>>         the first file at offset 0 is mapped to the grid column at
>>         offset 0 (from the columns file) and the grid row at offset 0
>>         (from the rows file).
>>
>>         One way I think I can get the data gridded is to use the
>>         "gdal_grid" utility, but I'm not really sure how to get the
>>         flat binary files to be accepted by "gdal_grid".  I thought I
>>         could use VRT files, but I'm not exactly sure how I would do
>>         that.  I wasn't sure since the documentation here
>>         http://www.gdal.org/ogr/drv_vrt.html says that I need to
>>         specify a "SrcLayer", but binary files don't have layers. So
>>         then would I need an intermediate VRT file to define layers
>>         for the binaries?  If I need an intermediate VRT maybe I
>>         should just push the data into a geotiff (with no projection
>>         info) and try using that?  Could someone clear this up for me?
>>
>>         My other question is has there been any work done to make a
>>         python wrapper for GDALGridCreate().  I found email threads
>>         and a ticket (http://trac.osgeo.org/gdal/ticket/2023) talking
>>         about creating one, but then conversation just stops and those
>>         are from 5 years ago.  I didn't notice anything that screamed
>>         "this is impossible" when skimming through those threads and
>>         the ticket.  I'm also sure a lot has changed for GDAL and
>>         numpy in the last 5 years.  If it's a time thing I'm willing
>>         to add it if someone can point me in the right direction to
>>         start (how-to on adding to GDAL).
>>
>>         Thanks.
>>
>>         -Dave
>>         _______________________________________________
>>         gdal-dev mailing list
>>         gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>
>

From bishop.dev at gmail.com  Tue Jan 22 22:56:39 2013
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Wed, 23 Jan 2013 10:56:39 +0400
Subject: [gdal-dev] GDAL correlator [thoughts]
In-Reply-To: <CABfKfuGHsaUxzZgMO=9Nd+0691yS63e72CK_=99+UByefSNOSQ@mail.gmail.com>
References: <CABfKfuGHsaUxzZgMO=9Nd+0691yS63e72CK_=99+UByefSNOSQ@mail.gmail.com>
Message-ID: <50FF89A7.2050202@gmail.com>

Hi Cristian,

I don't understand what really you want to do. There is a normal way to 
improve GDAL - make changes in local SVN snapshot and provide patches. 
If you need any help feel free to ask.

Best regards,
     Dmitriy

22.01.2013 15:46, Cristian Balint ?????:
> Dear All,
>
>
>   - In recent days I saw this thread:
> http://lists.osgeo.org/pipermail/gdal-dev/2012-August/033897.html
> subject to a feature that would be requested in GDAL. Also I am
> looking at initial requirements here:
> http://trac.osgeo.org/gdal/wiki/Correlator
>
>
> * I walk through the thread, and found some issues and concerns. You
> may find interesting some of my comments and observations:
>
> a) Looking thorough the code proposed seems like only co-registration
> of only two image is possible at once (?), and implementation uses
> SURF keypoint detector.
>     - SURF and also SIFT descriptors are patented algorithms, even
> OpenCV decided to move out such code in a "non-free" called
> sub-folder, see here:
>      http://code.opencv.org/projects/opencv/repository/revisions/master/show/modules/nonfree/src
>     - Their, and also any other SIFT or SURF implementation of the
> original papers are considered "non-free", however there are much
> better options than those two.
>
> b) There are free alternatives such BRISK, FREAK, ORB (in order of
> their quality), that operates even in hamming space instead of euclid
> (provides very fast and dense match),
> also have the ability to tell the exact amount of features extracted
> (SIFT does not have e.g), so extraction can be surrpressed to X best
> quality amount of.
>
> c) I can't see where is FLANN matcher in the code, FLANN can provide
> huge speed-up booth for euclid and hamming space descriptors, also
> doing little post-filtering and validation with a small homography
> calculs using RANSAC would take a big boost for further
> gradient-descent steps, and it would take additional  <1 millisecond
> plus to find and eliminate outliers as a post-process after keypoint
> matching. Also can decide if a pair is matchable or not matchable at
> all. This way also gradient-descent will be not overloaded with too
> many bad outliers.
>
> d) Regarding multi-band rasters, a good approach in case of RGB
> rasters is to sum channels: (0.299*R+0.587*G+0.114*B)/3 - 0.5 (thats
> exactly how e.g opencv is doing, and how some of CVision community are
> doing, not sure how this recepie camed up), but very same results in
> my very experience is also with plain (R+G+B)/3 , suitable with any N
> band rasters, in worse case of too many raster-bands user could select
> what raster bands to take in consideration at matching steps.
>
> e) I don't got the point with "segmentation". Perhaps the idea was
> born since doing SURF or SIFT detection over hi-res >50k*50k rasters
> is painfully slow, but is not the case at all with BRISK or other such
> descriptors. The approach to chop down rasters is not bad anyway, but
> take in account that will significantly increase required matching
> amount across pairs, since the rasters will increase in count.
>
> -------
>
> * Performance boosts can be achieved, also n-to-n rasters can be addressed:
>
> 1) To address co-registration of massive collection of datasets (not
> only single pairs at once) without any prior knowledge of any
> relationships will need to brute-force and test all images against all
> neighbouring images, that require a minimum (n)*(n-1)/2 computation
> expense, counting that for each pair-match best speed could be ~10ms
> per pair (E.G using BRISK in best configuration with FLANN).
> 2) If prior knowledge exists (e.g. rasters have a declared coordinate
> frame), then is more easy, only overlapping rasters must be checked
> and registered, perhaps in much dense and deep way with more amount of
> extracted features per image.
> 3) Regarding smooth fusion of pixels and gradient descent error
> minimization OpenCV really holds very nice routines doing that (using
> state of art Levenberg-Marquard minimization), also have options to
> select some projection-mode. Using some additional serialization
> tricks (using smaller block of rasters at once in memory, GDAL
> routines can address this with ease) by avoiding memory greedy OpenCV
> internal raster routines, it can go up with massive amount of pixels
> (infinite) for any seamless fusion process.
> 4) To store computed feature points and descriptors in temporary
> metadata attached a very good and elegant way found by myself is to do
> that in an attached .HDF5 for each raster. HDF5 has the ability to
> store multidimensional data in so called "compound" types, points and
> its descriptors can be enumerated in nice and very fast way.  Many
> more data's like homography matrix, or other constrains can be
> attached also into the HDF5 data in a highly organized way, and also
> there could be also room for small raster-bands (and any OSGEO suite
> can see them in native way) for debug informations like relationship's
> matrix of whole project and other usefull data for more advanced
> users. I disliked any sqlite or xml metadata afer unleashing what hdf
> formats can do.
> 5) There may be cases when so called "singleton group" will appear in
> case of n-to-n collection matching, so raster images will be divided
> in clusters with no relations between, in this case a segmentation
> over the cross-matching matrix could reveal and identify such groups,
> and OGR layer can be generated to reflect these areas.
>
> ------
>
> - I am currently doing such work for a public 3D SfM project that
> should derive 3D point-clouds from plain raster collections:
> http://code.google.com/p/featsfm, the key-points detection and
> matching parts are well implemented so far, if someone wants to
> evaluate let me know, the final code will be released around March
> anyway. Also I try to improove things in constant way, e.g. using
> recent sparse descriptors like
> http://cvlab.epfl.ch/research/detect/dbrief, extremely fast sparse
> ones that could do an a-priori co-relation job for massive datasets (>
> 10k) in first step, and in second step (after relation between pairs
> are determined) using e.g. BRISK to do a very deep co-matching of
> known pairs. Also I am experimenting a recentish MIH matcher
> http://www.cs.toronto.edu/~norouzi/research/mih instead of FLANN, it
> has the ability to mach 10k keypoints against 4M keypoints within <4s
> (nad is doint "exact" match not inexact like FLANN) but the drawback
> is that all keypoints must be present in memory at once, so need to do
> kind of "block" logic and match one image to multiple ones in single
> time but also take care to not unload and reload same parts too many
> times back&forth in memory (its trickier, need clear logistics to
> avoid duplicate matches).
> - If one wants "insane" level of post co-registration (effective
> "pixel-warp", and not affine or projective ones) there are much deeper
> post ways to go with special class of descriptors like DAISY in
> context of some statistics (bayes/markov, some papers and matlab
> implementatios where tested by me) that can do so fine co-registration
> that accurate DEM's can be extracted with ease. It is possible to
> co-register rasters taken at very different times e.g 2004winter
> 2012summer (i tried before such experiment with excelent results)
> which is consiodered very challenging, in this case a difference
> analisys is possible.
>
>
>   - To have an basic idea, my own implementation of matcher do
> something like 10k vs. 10k BRISK features using FLANN in 25ms on a
> decent 2.5Ghz core, and deepest 100k vs 100k features take ~3s, very
> good timings. A simple calculs having 25ms matching time on average
> and 1000 rasters would be: 1000 * 999 / 2 * 25 ms = 3,46875 hours.
> Suite designed by me is able to derive 3D clouds out from thousands of
> hi-res UAV imagery with quite ease. Sparse DBRIEF can go way under
> <1ms per match, its a new filed to explore going "sparse" ways.
>
> - If interested we can improve in some ways described by me the
> proposed GDAL tool taking easy steps, so let me know, I am willing to
> contribute but need to settle the exact ways how You folks would like
> to do it in deepest details. Honestly ideas are lots where we could
> go.
>
>
>
>
> With Respect,


From reinaldo at geodesign.com.br  Wed Jan 23 04:39:22 2013
From: reinaldo at geodesign.com.br (reinaldo at geodesign.com.br)
Date: Wed, 23 Jan 2013 10:39:22 -0200 (BRST)
Subject: [gdal-dev] GDAL/OGR 1.10.0 Beta1 Question
Message-ID: <v1v09ob.f8eac3145e8c68c38ca3ecdd6a550a7f@webmail.geodesign.com.br>

Frank,

The reason I asked is because very few cameras with GPS save photo images as Tiff. There are very few that also save it as proprietary RAW.

If the idea is to read the GPS EXIF Tags and output a GeoTiff, a Tiff reader will not reach most users of cameras with GPS. It should be a JPEG reader to be useful for users of the majority of cameras with GPS, that save the images as JPEG with EXIF tags.

I am a reseller of Ricoh and Fujifilm cameras with GPS and have developed a software (Geo Fotos Mapper) that extracts EXIF tags from images taken with most cameras with GPS and exports to several formats, such as point layer linked to the actual photo image as Shape, MapInfo, PostGIS/PostgreSQL and many others.

I have tested the software with photo images from different cameras with GPS, such as Ricoh, Fuji, Sony, Nikon, Panasonic, ikeGPS, etc. I have also tested different popular cameras with GPS against several official bench marks in Brazil in order to verify the accuracy of their GPS.

Reinaldo

------------------------------------
 Reinaldo Escada Chohfi
 S?cio Gerente
 GeoDesign Internacional
 www.geodesign.com.br (http://www.geodesign.com.br)
 Tel./Fax: (12) 3153-5115
 Intelig?ncia e Tecnologia Espacial de Ponta

>---- Original Message ----
>From: Frank Warmerdam <warmerdam at pobox.com>
>To: reinaldo at geodesign.com.br
>Sent: Ter, Jan 22, 2013, 22:23 PM
>Subject: Re: [gdal-dev] GDAL/OGR 1.10.0 Beta1 Question
>
>Reinaldo,
>
>Did Mike's answer help?  I was hoping I could find a TIFF file with
>EXIF info and write a bit more of an example, but I never got around
>to it today.  Even did the work but wasn't sure what sort of
>information you were looking for.
>
>Best regards,
>Frank
>
>On Tue, Jan 22, 2013 at 12:13 PM,  <reinaldo at geodesign.com.br> wrote:
>> Frank,
>>
>> Question about gdal/ogr 1.10.0 GeoTiff Driver:
>>
>> What is this read capability?
>>
>> * Read EXIF metadata in the EXIF metadata domain
>>
>> Thanks,
>>
>> Reinaldo
>>
>> ------------------------------------
>>  Reinaldo Escada Chohfi
>>  S?cio Gerente
>>  GeoDesign Internacional
>>  www.geodesign.com.br (http://www.geodesign.com.br)
>>  Tel./Fax: (12) 3153-5115
>>  Intelig?ncia e Tecnologia Espacial de Ponta
>>
>>>---- Original Message ----
>>>From: Frank Warmerdam <warmerdam at pobox.com>
>>>To: "gdal dev" <gdal-dev at lists.osgeo.org>
>>>Sent: Seg, Jan 21, 2013, 18:36 PM
>>>Subject: [gdal-dev] GDAL/OGR 1.10.0 Beta1
>>>
>>>Folks,
>>>
>>>A  month or more later than I intended, I have prepared
>>>a GDAL/OGR 1.10 first beta release.
>>>
>>>  http://download.osgeo.org/gdal/gdal-1.10.0beta1.tar.gz
>>>
>>>The NEWS for the release can be found at the top of:
>>>
>>>  http://svn.osgeo.org/gdal/trunk/gdal/NEWS
>>>
>>>Please do some testing and file bugs for issues that
>>>need to be fixed.   Also feel free to make noise on
>>>existing bugs that ought to be fixed before 1.10 is
>>>released.
>>>
>>>I hope to do another beta or two and then a release
>>>candidate.
>>>
>>>Best regards,
>>>--
>>>---------------------------------------+--------------------------------------
>>>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
>>>light and sound - activate the windows | http://pobox.com/~warmerdam
>>>and watch the world go round - Rush    | Geospatial Software Developer
>>>_______________________________________________
>>>gdal-dev mailing list
>>>gdal-dev at lists.osgeo.org
>>>http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
>-- 
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Software Developer


From nhv at cape.com  Wed Jan 23 08:30:08 2013
From: nhv at cape.com (Norman Vine)
Date: Wed, 23 Jan 2013 11:30:08 -0500
Subject: [gdal-dev] gridding binary data
In-Reply-To: <50FF5525.8080100@gmail.com>
References: <50FC58EE.5080904@gmail.com>
	<CAKMUAtDyUBO0pvvfit5s00NSmoxLgM-ngj53Zxzy5uAee4L6TA@mail.gmail.com>
	<50FF0A00.3010509@gmail.com>
	<CAKMUAtBhvBkf=+2A3qbz=7383=S3D=-SqbU+Pq7chZHV8FeB9A@mail.gmail.com>
	<50FF5525.8080100@gmail.com>
Message-ID: <145EBEED-3C14-4311-94BC-088E757C708B@cape.com>

Dave

Seems to me this is a point not a raster process you are looking for

e.g.  How do I make a surface from a bunch of discrete points ?

So instead of having 3 bands of raster you want a stream of XYZ triplets
you can then submit these to gdal_grid or other tools that work with discrete 
data 


pseudo python  assuming you have read your files into numpy arrays

XYZ  = array( zip( bandX.flatten(), bandY.flatten(), bandZ.flatten() ) )

convert XYZ to any OGR format

call gdal_grid 

HTH

Norman

On Jan 22, 2013, at 10:12 PM, David Hoese <dhoese at gmail.com> wrote:

> Jan, please CC the mailing list in your replies.
> 
> I have asked questions about not regularly spaced data on this mailing list before, I just can't find the thread atm. In your first point, do you mean my input data is "effectively a projected surface"?  If so, then no it is not projected, there are lat/lon values for each individual pixel and they aren't evenly spaced.  If you mean the output is projected, then yes, my software does the projecting from lat/lon space into a projection's metered (or degree) space. The data can then be interpolated and treated like gridding a scatter plot (see the griddata function in scipy and matlab).
> 
> The problem with GDAL and data that is not equally spaced geographically is that it describes the data with a geotransform.  The geotransform (http://www.gdal.org/gdal_datamodel.html) only knows the origin of the data and the pixel size (ignoring the 2 rotation elements). So for my satellite data (VIIRS and MODIS), the data can not be properly represented. My data starts out at one resolution near the center of each row and loses quality as you go outward due to...the earth's shape :).
> 
> So if I understood you correctly, yes it is a hassle because you have to look at each lat/lon point. If you don't look at each point (as I have done with gdalwarp and its geotranforms) the produced image isn't "correct".  The quality is wrong and you have problems with "the bow-tie effect".  As far as I know, there are only 2 pieces of software currently in development that handle satellite data in this way. One is my software which isn't fully developed and uses a modified version of some old software to do the remapping (which is what I'm trying to replace, but it works). The second is pytroll, but doesn't meet the needs of my bosses and is slower than the old software I'm using.
> 
> I hope at least some of this makes sense. Thanks for sticking with my attempt at explanation. My final goal would be to add to GDAL the ability or a utility to remap satellite data. Sorry this got so long, I wasn't sure how much you knew about GDAL or satellite observations.
> 
> -Dave
> 
> On 1/22/2013 4:34 PM, Jan Heckman wrote:
>> Hi Dave,
>> It sounds as you have effectively a projected surface. The projected
>> (satellite) image consists of regularly spaced pixels? So that the
>> pixels would ideally be warped back, perhaps not image-wise but
>> pixel-wise, which would be a bit of a hassle...  Don't see yet that the
>> warp can't be done in one go, but that shows I'm still missing stuff, or
>> that the transformation has to be reformulated to get it to work.
>> So I have some hope that fiddling with gdalwarp might produce something
>> useful. Then, the sheer amount of data may ultimately be best served by
>> a dedicated routine using parallel code. You seem to have figured out
>> the geometry pretty much already.
>> Maybe I'm not getting it yet?
>> Jan
>> 
>> On Tue, Jan 22, 2013 at 10:52 PM, David Hoese <dhoese at gmail.com
>> <mailto:dhoese at gmail.com>> wrote:
>> 
>>    Hey Jan,
>> 
>>    Thanks for the response. My process will need to be automated so
>>    excel won't help.  I also will be working with potentially large
>>    amounts of data (200MB - ~4GB).  I would like the output to be in a
>>    flat binary format (just the data), but if I can pull the data out
>>    of another format that will do for now.  The output data will be
>>    used in other software that I have written to place the data in any
>>    format I request (geotiff, AWIPS compatible netCDF files, etc).  I
>>    was hoping to use gdal_grid for its algorithms to do the
>>    interpolation from input swath pixels to output grid pixels.  I am
>>    working with "raw" satellite observation data that is not
>>    equidistant (so it can't be put through gdalwarp which expects an
>>    equidistant grid as input).
>> 
>>    The x and y arrays are created by software I have written.  The
>>    values in these arrays state the x and y offset from the grid origin
>>    of where the image pixel is.  For example, a single pixel might be
>>    at column 1.14 and row 1.6 of the grid I am mapping to. I would like
>>    gdal_grid (or some other code) to use an algorithm (nearest
>>    neighbor, averaging, etc) to interpolate this image pixel value onto
>>    the surrounding grid points.  Does that make sense? It's difficult
>>    for me to describe since I've been working with it so much lately.
>> 
>>    The start-to-finish goal is essentially what gdalwarp does when
>>    remapping one grid to another, but this doesn't make the assumption
>>    that the data points are equidistant.  The gridding utility I'm
>>    currently using is old and only offers a single algorithm for
>>    interpolation.  That algorithm does not produce "pretty" images for
>>    a specific instrument's data so I'm looking for alternatives without
>>    having to hack up the old utility.  Maybe looking at it this way
>>    will make more sense:
>> 
>>    (lat,lon,projection) -> my software -> (y,x)
>>    (x,y,image_in) -> gdal_grid -> (gridded_image_out)
>> 
>>    Maybe I'll just write the python wrapper for GDALGridCreate since
>>    the rest of my software is python.  As far as I know GDAL doesn't
>>    have anything else that does gridding and doesn't have anything that
>>    can do non-equidistant data points. Thanks for the help so far. Man
>>    this email got long fast.
>> 
>>    -Dave
>> 
>> 
>>    On 1/22/13 2:58 PM, Jan Heckman wrote:
>>>    Hi Dave,
>>>    So you have effectively three arrays, one for pixel values, one
>>>    for x, one for y (probably offsets), which are coordinated and you
>>>    want to generate a raster or grid which you can display / use in a
>>>    GIS?
>>>    Sort of sparse array to be converted to a full array, effectively?
>>>    It sounds crazy, maybe, but consider converting these to separated
>>>    text (numbers), bring them into excel (columns), tell (arc)gis to
>>>    convert to a (point) shapefile and finally, if necessary, convert
>>>    that to a raster.
>>>    If this is the job, it can alternatively be done quite simply by
>>>    writing a small procedure (C++ or python (or something else, I'm
>>>    sure)), without using excel etc, as long as you know the output
>>>    format (and maybe have a geoprocessor to call upon). A simple
>>>    output format is .bil. This is roughly simlar to shapefiles, with
>>>    some supporting files to use it in a GIS. Possibly flat 32 bit
>>>    float (.flt) is understood by gdal as well.
>>>    Sorry that I can't help you with the gdal/ogr commands.
>>>    If you don't get a helpful gdal command, give me a yell with an
>>>    example.
>>>    Jan
>>> 
>>>    On Sun, Jan 20, 2013 at 9:51 PM, David Hoese <dhoese at gmail.com
>>>    <mailto:dhoese at gmail.com>> wrote:
>>> 
>>>        I have 3 flat binary files that I would like to use to grid
>>>        data. The 3 binary files are the "scattered" image data pixels
>>>        and the other two specify the fractional column and row for
>>>        each input pixel in the output grid.  So the image pixel in
>>>        the first file at offset 0 is mapped to the grid column at
>>>        offset 0 (from the columns file) and the grid row at offset 0
>>>        (from the rows file).
>>> 
>>>        One way I think I can get the data gridded is to use the
>>>        "gdal_grid" utility, but I'm not really sure how to get the
>>>        flat binary files to be accepted by "gdal_grid".  I thought I
>>>        could use VRT files, but I'm not exactly sure how I would do
>>>        that.  I wasn't sure since the documentation here
>>>        http://www.gdal.org/ogr/drv_vrt.html says that I need to
>>>        specify a "SrcLayer", but binary files don't have layers. So
>>>        then would I need an intermediate VRT file to define layers
>>>        for the binaries?  If I need an intermediate VRT maybe I
>>>        should just push the data into a geotiff (with no projection
>>>        info) and try using that?  Could someone clear this up for me?
>>> 
>>>        My other question is has there been any work done to make a
>>>        python wrapper for GDALGridCreate().  I found email threads
>>>        and a ticket (http://trac.osgeo.org/gdal/ticket/2023) talking
>>>        about creating one, but then conversation just stops and those
>>>        are from 5 years ago.  I didn't notice anything that screamed
>>>        "this is impossible" when skimming through those threads and
>>>        the ticket.  I'm also sure a lot has changed for GDAL and
>>>        numpy in the last 5 years.  If it's a time thing I'm willing
>>>        to add it if someone can point me in the right direction to
>>>        start (how-to on adding to GDAL).
>>> 
>>>        Thanks.
>>> 
>>>        -Dave
>>>        _______________________________________________
>>>        gdal-dev mailing list
>>>        gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>>>        http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>> 
>>> 
>> 
>> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130123/d4461e3d/attachment-0001.html>

From dhoese at gmail.com  Wed Jan 23 08:57:37 2013
From: dhoese at gmail.com (David Hoese)
Date: Wed, 23 Jan 2013 10:57:37 -0600
Subject: [gdal-dev] gridding binary data
In-Reply-To: <mailman.5980.1358958612.1025.gdal-dev@lists.osgeo.org>
References: <mailman.5980.1358958612.1025.gdal-dev@lists.osgeo.org>
Message-ID: <51001681.6080709@gmail.com>

Hi Norman,

Yes this sounds like it should work.  I'll try it when I get a chance.  
If I made a geotiff with no navigation(WKT) and had X,Y,Z as individual 
bands would that work?  How do I tell gdal_grid which dimension or band 
is X, which is Y, and which is Z?  Thanks.

Could you please CC me in any replies, I get the digest and it's easier 
to reply if I get the original email.

-Dave

On 1/23/13 10:30 AM, nhv at cape.com wrote:
> Dave
>
> Seems to me this is a point not a raster process you are looking for
>
> e.g.  How do I make a surface from a bunch of discrete points ?
>
> So instead of having 3 bands of raster you want a stream of XYZ triplets
> you can then submit these to gdal_grid or other tools that work with discrete
> data
>
>
> pseudo python  assuming you have read your files into numpy arrays
>
> XYZ  = array( zip( bandX.flatten(), bandY.flatten(), bandZ.flatten() ) )
>
> convert XYZ to any OGR format
>
> call gdal_grid
>
> HTH
>
> Norman


From etourigny.dev at gmail.com  Wed Jan 23 10:12:21 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed, 23 Jan 2013 16:12:21 -0200
Subject: [gdal-dev] gridding binary data
In-Reply-To: <51001681.6080709@gmail.com>
References: <mailman.5980.1358958612.1025.gdal-dev@lists.osgeo.org>
	<51001681.6080709@gmail.com>
Message-ID: <CA+TxYvM=M=n6RgXyTXpSRRh5mDitxWTYM_H+C4srCQNdX+bBHw@mail.gmail.com>

gdal_grid takes a vector file (e.g. shapefile) as input, it cannot
take a raster (gtiff) as input

please read the documentation before asking other questions

http://www.gdal.org/gdal_grid.html

Etienne

On Wed, Jan 23, 2013 at 2:57 PM, David Hoese <dhoese at gmail.com> wrote:
> Hi Norman,
>
> Yes this sounds like it should work.  I'll try it when I get a chance.  If I
> made a geotiff with no navigation(WKT) and had X,Y,Z as individual bands
> would that work?  How do I tell gdal_grid which dimension or band is X,
> which is Y, and which is Z?  Thanks.
>
> Could you please CC me in any replies, I get the digest and it's easier to
> reply if I get the original email.
>
> -Dave
>
>
> On 1/23/13 10:30 AM, nhv at cape.com wrote:
>>
>> Dave
>>
>> Seems to me this is a point not a raster process you are looking for
>>
>> e.g.  How do I make a surface from a bunch of discrete points ?
>>
>> So instead of having 3 bands of raster you want a stream of XYZ triplets
>> you can then submit these to gdal_grid or other tools that work with
>> discrete
>> data
>>
>>
>> pseudo python  assuming you have read your files into numpy arrays
>>
>> XYZ  = array( zip( bandX.flatten(), bandY.flatten(), bandZ.flatten() ) )
>>
>> convert XYZ to any OGR format
>>
>> call gdal_grid
>>
>> HTH
>>
>> Norman
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Wed Jan 23 10:13:02 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 23 Jan 2013 19:13:02 +0100
Subject: [gdal-dev] gridding binary data
In-Reply-To: <51001681.6080709@gmail.com>
References: <mailman.5980.1358958612.1025.gdal-dev@lists.osgeo.org>
	<51001681.6080709@gmail.com>
Message-ID: <201301231913.03164.even.rouault@mines-paris.org>

Le mercredi 23 janvier 2013 17:57:37, David Hoese a ?crit :
> Hi Norman,
> 
> Yes this sounds like it should work.  I'll try it when I get a chance.
> If I made a geotiff with no navigation(WKT) and had X,Y,Z as individual
> bands would that work?  How do I tell gdal_grid which dimension or band
> is X, which is Y, and which is Z?  Thanks.

gdal_grid takes a OGR layer as input, so the more simple solution is to output 
a CSV for example. Or use the OGR API to create the datasource in any format 
you prefer (PostGIS, Shapefile, CSV, etc etc....)

> 
> Could you please CC me in any replies, I get the digest and it's easier
> to reply if I get the original email.
> 
> -Dave
> 
> On 1/23/13 10:30 AM, nhv at cape.com wrote:
> > Dave
> > 
> > Seems to me this is a point not a raster process you are looking for
> > 
> > e.g.  How do I make a surface from a bunch of discrete points ?
> > 
> > So instead of having 3 bands of raster you want a stream of XYZ triplets
> > you can then submit these to gdal_grid or other tools that work with
> > discrete data
> > 
> > 
> > pseudo python  assuming you have read your files into numpy arrays
> > 
> > XYZ  = array( zip( bandX.flatten(), bandY.flatten(), bandZ.flatten() ) )
> > 
> > convert XYZ to any OGR format
> > 
> > call gdal_grid
> > 
> > HTH
> > 
> > Norman
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From nhatzop at gmail.com  Wed Jan 23 10:20:12 2013
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Wed, 23 Jan 2013 10:20:12 -0800
Subject: [gdal-dev] GCTP projection -s_srs=???
Message-ID: <CALDJGKCVEOs7hzNFAajAAhgdBb1eOdBxacmh=f7kmb6rcZoPdQ@mail.gmail.com>

I have this projection for my nasa hdf file:

Coordinate System is:
LOCAL_CS["GCTP projection number 97",
    UNIT["Meter",1]]
Origin = (-17334194.000000000000000,7344784.825000000186265)
Pixel Size = (25067.525334417932754,-25067.525298634809587)


I tried to reporject my image using gdalwrap and I got:

ERROR 1: No PROJ.4 translation for source SRS, coordinate
transformation initialization has failed.

I am reading this:
http://www.gdal.org/ogr/classOGRSpatialReference.html#a04ab13a2ec4ceffd6f802422f95e8f15

from the array I understand:

9 Transverse Mercator
7 FN



how I have to define my -s_srs=?????

--Nikos Hatzopoulos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130123/b3dbdcec/attachment.html>

From even.rouault at mines-paris.org  Wed Jan 23 10:29:56 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 23 Jan 2013 19:29:56 +0100
Subject: [gdal-dev] GDAL/OGR 1.10.0 Beta1 Question
In-Reply-To: <CD24931C.4A065%michael.smith@usace.army.mil>
References: <CD24931C.4A065%michael.smith@usace.army.mil>
Message-ID: <201301231929.56875.even.rouault@mines-paris.org>

Le mercredi 23 janvier 2013 01:05:19, Smith, Michael ERDC-CRREL-NH a ?crit :
> The EXIF metadata is data from Digital Cameras (see
> http://en.wikipedia.org/wiki/Exchangeable_image_file_format). This changes
> just puts the metadata in a specific domain.

Yes and no, this is not a "change". This is an addition. Up to now, the GTiff 
reader didn't expose EXIF. It is now reported as metadata, and in the EXIF 
metadata domain.

And to answer Reinaldo's latest comment, the JPEG driver already exposed EXIF, 
in all GDAL versions since the start of mankind, or something like this ;-)

EXIF-in-TIFF is likely not very commonly found.

From dhoese at gmail.com  Wed Jan 23 10:43:08 2013
From: dhoese at gmail.com (David Hoese)
Date: Wed, 23 Jan 2013 12:43:08 -0600
Subject: [gdal-dev] gridding binary data
In-Reply-To: <CA+TxYvM=M=n6RgXyTXpSRRh5mDitxWTYM_H+C4srCQNdX+bBHw@mail.gmail.com>
References: <mailman.5980.1358958612.1025.gdal-dev@lists.osgeo.org>
	<51001681.6080709@gmail.com>
	<CA+TxYvM=M=n6RgXyTXpSRRh5mDitxWTYM_H+C4srCQNdX+bBHw@mail.gmail.com>
Message-ID: <51002F3C.1000106@gmail.com>

Ah sorry about that.  I thought OGR formats and GDAL Raster Formats were 
the same thing.  Thank you.

On 1/23/13 12:12 PM, Etienne Tourigny wrote:
> gdal_grid takes a vector file (e.g. shapefile) as input, it cannot
> take a raster (gtiff) as input
>
> please read the documentation before asking other questions
>
> http://www.gdal.org/gdal_grid.html
>
> Etienne
>
> On Wed, Jan 23, 2013 at 2:57 PM, David Hoese <dhoese at gmail.com> wrote:
>> Hi Norman,
>>
>> Yes this sounds like it should work.  I'll try it when I get a chance.  If I
>> made a geotiff with no navigation(WKT) and had X,Y,Z as individual bands
>> would that work?  How do I tell gdal_grid which dimension or band is X,
>> which is Y, and which is Z?  Thanks.
>>
>> Could you please CC me in any replies, I get the digest and it's easier to
>> reply if I get the original email.
>>
>> -Dave
>>
>>
>> On 1/23/13 10:30 AM, nhv at cape.com wrote:
>>> Dave
>>>
>>> Seems to me this is a point not a raster process you are looking for
>>>
>>> e.g.  How do I make a surface from a bunch of discrete points ?
>>>
>>> So instead of having 3 bands of raster you want a stream of XYZ triplets
>>> you can then submit these to gdal_grid or other tools that work with
>>> discrete
>>> data
>>>
>>>
>>> pseudo python  assuming you have read your files into numpy arrays
>>>
>>> XYZ  = array( zip( bandX.flatten(), bandY.flatten(), bandZ.flatten() ) )
>>>
>>> convert XYZ to any OGR format
>>>
>>> call gdal_grid
>>>
>>> HTH
>>>
>>> Norman
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Wed Jan 23 10:57:26 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 23 Jan 2013 10:57:26 -0800
Subject: [gdal-dev] GCTP projection -s_srs=???
In-Reply-To: <CALDJGKCVEOs7hzNFAajAAhgdBb1eOdBxacmh=f7kmb6rcZoPdQ@mail.gmail.com>
References: <CALDJGKCVEOs7hzNFAajAAhgdBb1eOdBxacmh=f7kmb6rcZoPdQ@mail.gmail.com>
Message-ID: <CA+YzLBdWNq-CsNgKvXyvid7tuYedQ0gTBQN3CaCiA0Vn3StGMw@mail.gmail.com>

Nikos,

I see that GCTP Projection 97 is Cylindrical Equal Area.  This can
have a standard parallel and a central meridian (from
http://www.remotesensing.org/geotiff/proj_list/cylindrical_equal_area.html).
 Without knowing what these are it is hard to do much, but you might
try it assuming they are zero and zero in which case you would use
something like:

-s_srs "+proj=cea +datum=WGS84"

If you examine the HDF metadata more carefully you might find more
information.  Initially see what metadata makes it through GDAL with
gdalinfo.  If that doesn't show anything, perhaps try low level HDF
tools.

If you make the datasource available, and filed a bug it might be
possible for us to fix ogr_srs_usgs.cpp to handle CEA.  In the
comments I see:

        // FIXME: CEA --- Cylindrical Equal Area skipped (Grid corners
set in meters for EASE grid)

Best regards,
Frank


On Wed, Jan 23, 2013 at 10:20 AM, Nikolaos Hatzopoulos
<nhatzop at gmail.com> wrote:
> I have this projection for my nasa hdf file:
>
> Coordinate System is:
> LOCAL_CS["GCTP projection number 97",
>     UNIT["Meter",1]]
> Origin = (-17334194.000000000000000,7344784.825000000186265)
> Pixel Size = (25067.525334417932754,-25067.525298634809587)
>
>
> I tried to reporject my image using gdalwrap and I got:
>
> ERROR 1: No PROJ.4 translation for source SRS, coordinate
> transformation initialization has failed.
>
> I am reading this:
> http://www.gdal.org/ogr/classOGRSpatialReference.html#a04ab13a2ec4ceffd6f802422f95e8f15
>
> from the array I understand:
>
> 9 Transverse Mercator
> 7 FN
>
>
>
> how I have to define my -s_srs=?????
>
> --Nikos Hatzopoulos
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From nhatzop at gmail.com  Wed Jan 23 11:46:26 2013
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Wed, 23 Jan 2013 11:46:26 -0800
Subject: [gdal-dev] GCTP projection -s_srs=???
In-Reply-To: <CA+YzLBdWNq-CsNgKvXyvid7tuYedQ0gTBQN3CaCiA0Vn3StGMw@mail.gmail.com>
References: <CALDJGKCVEOs7hzNFAajAAhgdBb1eOdBxacmh=f7kmb6rcZoPdQ@mail.gmail.com>
	<CA+YzLBdWNq-CsNgKvXyvid7tuYedQ0gTBQN3CaCiA0Vn3StGMw@mail.gmail.com>
Message-ID: <CALDJGKA6mXb-mKRfhw8hTUGdujEJeWsFWr+GykL93UEx7iPS-A@mail.gmail.com>

thanks for the respond,

Yes you are right it is +proj=cea
I got confused with the GCTP codes
about the datum=WGS84 I am not quite sure the specs that I find from
HDFview are:

Projection=GCTP_CEA
ProjParams=(6371228,0,0,0,0,30000000,0,0,0,0,0,0,0)
SphereCode=-1


--Nikos

On Wed, Jan 23, 2013 at 10:57 AM, Frank Warmerdam <warmerdam at pobox.com>wrote:

> Nikos,
>
> I see that GCTP Projection 97 is Cylindrical Equal Area.  This can
> have a standard parallel and a central meridian (from
> http://www.remotesensing.org/geotiff/proj_list/cylindrical_equal_area.html
> ).
>  Without knowing what these are it is hard to do much, but you might
> try it assuming they are zero and zero in which case you would use
> something like:
>
> -s_srs "+proj=cea +datum=WGS84"
>
> If you examine the HDF metadata more carefully you might find more
> information.  Initially see what metadata makes it through GDAL with
> gdalinfo.  If that doesn't show anything, perhaps try low level HDF
> tools.
>
> If you make the datasource available, and filed a bug it might be
> possible for us to fix ogr_srs_usgs.cpp to handle CEA.  In the
> comments I see:
>
>         // FIXME: CEA --- Cylindrical Equal Area skipped (Grid corners
> set in meters for EASE grid)
>
> Best regards,
> Frank
>
>
> On Wed, Jan 23, 2013 at 10:20 AM, Nikolaos Hatzopoulos
> <nhatzop at gmail.com> wrote:
> > I have this projection for my nasa hdf file:
> >
> > Coordinate System is:
> > LOCAL_CS["GCTP projection number 97",
> >     UNIT["Meter",1]]
> > Origin = (-17334194.000000000000000,7344784.825000000186265)
> > Pixel Size = (25067.525334417932754,-25067.525298634809587)
> >
> >
> > I tried to reporject my image using gdalwrap and I got:
> >
> > ERROR 1: No PROJ.4 translation for source SRS, coordinate
> > transformation initialization has failed.
> >
> > I am reading this:
> >
> http://www.gdal.org/ogr/classOGRSpatialReference.html#a04ab13a2ec4ceffd6f802422f95e8f15
> >
> > from the array I understand:
> >
> > 9 Transverse Mercator
> > 7 FN
> >
> >
> >
> > how I have to define my -s_srs=?????
> >
> > --Nikos Hatzopoulos
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130123/00f624fe/attachment-0001.html>

From silyko at gmail.com  Wed Jan 23 11:59:09 2013
From: silyko at gmail.com (Simon Lyngby Kokkendorff)
Date: Wed, 23 Jan 2013 20:59:09 +0100
Subject: [gdal-dev] FileGDB driver - internal paths
Message-ID: <CANzGYpRYET=MN1V9VQYrd2pwimeGr2uWJy5fdBq1b4=GgpEW+g@mail.gmail.com>

Hello List,

   I'm using OGR to read a FileGDB database, perform some transformations
and then write an output FileGDB database. In that process I would like to
preserve the structure of the original FileGDB, i.e. put "Feature Classes"
into the right "Feature Datasets" etc.
   Hence, my question is whether it is possible, from the c-api of OGR, to
determine the FileGDB specific "internal path" of an OGR-layer
(corresponding to e.g. a "Feature Class") loaded through the FileGDB
driver? Perhaps it is necessary to extract this information from the XML
layer definition, which seem to be available via special SQL requests (in
gdal/ogr 1.10?) ?

   Best Regards,
   Simon Kokkendorff, Danish Geodata Agency (formerly known as KMS)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130123/1eacc6d8/attachment.html>

From nhatzop at gmail.com  Wed Jan 23 13:17:44 2013
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Wed, 23 Jan 2013 13:17:44 -0800
Subject: [gdal-dev] GCTP projection -s_srs=???
In-Reply-To: <CALDJGKA6mXb-mKRfhw8hTUGdujEJeWsFWr+GykL93UEx7iPS-A@mail.gmail.com>
References: <CALDJGKCVEOs7hzNFAajAAhgdBb1eOdBxacmh=f7kmb6rcZoPdQ@mail.gmail.com>
	<CA+YzLBdWNq-CsNgKvXyvid7tuYedQ0gTBQN3CaCiA0Vn3StGMw@mail.gmail.com>
	<CALDJGKA6mXb-mKRfhw8hTUGdujEJeWsFWr+GykL93UEx7iPS-A@mail.gmail.com>
Message-ID: <CALDJGKCxjhk8Z+4NH6SqLCY2f0WeRkuSxC8Zz62FHu3m=Bg7UQ@mail.gmail.com>

I got it:

http://nsidc.org/data/atlas/epsg_3410.html



On Wed, Jan 23, 2013 at 11:46 AM, Nikolaos Hatzopoulos <nhatzop at gmail.com>wrote:

> thanks for the respond,
>
> Yes you are right it is +proj=cea
> I got confused with the GCTP codes
> about the datum=WGS84 I am not quite sure the specs that I find from
> HDFview are:
>
> Projection=GCTP_CEA
> ProjParams=(6371228,0,0,0,0,30000000,0,0,0,0,0,0,0)
> SphereCode=-1
>
>
> --Nikos
>
>
> On Wed, Jan 23, 2013 at 10:57 AM, Frank Warmerdam <warmerdam at pobox.com>wrote:
>
>> Nikos,
>>
>> I see that GCTP Projection 97 is Cylindrical Equal Area.  This can
>> have a standard parallel and a central meridian (from
>> http://www.remotesensing.org/geotiff/proj_list/cylindrical_equal_area.html
>> ).
>>  Without knowing what these are it is hard to do much, but you might
>> try it assuming they are zero and zero in which case you would use
>> something like:
>>
>> -s_srs "+proj=cea +datum=WGS84"
>>
>> If you examine the HDF metadata more carefully you might find more
>> information.  Initially see what metadata makes it through GDAL with
>> gdalinfo.  If that doesn't show anything, perhaps try low level HDF
>> tools.
>>
>> If you make the datasource available, and filed a bug it might be
>> possible for us to fix ogr_srs_usgs.cpp to handle CEA.  In the
>> comments I see:
>>
>>         // FIXME: CEA --- Cylindrical Equal Area skipped (Grid corners
>> set in meters for EASE grid)
>>
>> Best regards,
>> Frank
>>
>>
>> On Wed, Jan 23, 2013 at 10:20 AM, Nikolaos Hatzopoulos
>> <nhatzop at gmail.com> wrote:
>> > I have this projection for my nasa hdf file:
>> >
>> > Coordinate System is:
>> > LOCAL_CS["GCTP projection number 97",
>> >     UNIT["Meter",1]]
>> > Origin = (-17334194.000000000000000,7344784.825000000186265)
>> > Pixel Size = (25067.525334417932754,-25067.525298634809587)
>> >
>> >
>> > I tried to reporject my image using gdalwrap and I got:
>> >
>> > ERROR 1: No PROJ.4 translation for source SRS, coordinate
>> > transformation initialization has failed.
>> >
>> > I am reading this:
>> >
>> http://www.gdal.org/ogr/classOGRSpatialReference.html#a04ab13a2ec4ceffd6f802422f95e8f15
>> >
>> > from the array I understand:
>> >
>> > 9 Transverse Mercator
>> > 7 FN
>> >
>> >
>> >
>> > how I have to define my -s_srs=?????
>> >
>> > --Nikos Hatzopoulos
>> >
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev at lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>> --
>>
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam,
>> warmerdam at pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Software Developer
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130123/bef1218a/attachment.html>

From even.rouault at mines-paris.org  Wed Jan 23 13:18:14 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 23 Jan 2013 22:18:14 +0100
Subject: [gdal-dev] FileGDB driver - internal paths
In-Reply-To: <CANzGYpRYET=MN1V9VQYrd2pwimeGr2uWJy5fdBq1b4=GgpEW+g@mail.gmail.com>
References: <CANzGYpRYET=MN1V9VQYrd2pwimeGr2uWJy5fdBq1b4=GgpEW+g@mail.gmail.com>
Message-ID: <201301232218.14286.even.rouault@mines-paris.org>

Le mercredi 23 janvier 2013 20:59:09, Simon Lyngby Kokkendorff a ?crit :
> Hello List,
> 
>    I'm using OGR to read a FileGDB database, perform some transformations
> and then write an output FileGDB database. In that process I would like to
> preserve the structure of the original FileGDB, i.e. put "Feature Classes"
> into the right "Feature Datasets" etc.
>    Hence, my question is whether it is possible, from the c-api of OGR, to
> determine the FileGDB specific "internal path" of an OGR-layer
> (corresponding to e.g. a "Feature Class") loaded through the FileGDB
> driver? Perhaps it is necessary to extract this information from the XML
> layer definition, which seem to be available via special SQL requests (in
> gdal/ogr 1.10?) ?

With GDAL/OGR 1.10, this is indeed possible. See :

$ ogr2ogr -f filegdb poly.gdb poly.shp -lco FEATURE_DATASET=my_feature_dataset
$ ogrinfo poly.gdb -sql "GetLayerDefinition poly" | grep CatalogPath
  <CatalogPath>\my_feature_dataset\poly</CatalogPath>

> 
>    Best Regards,
>    Simon Kokkendorff, Danish Geodata Agency (formerly known as KMS)

From even.rouault at mines-paris.org  Wed Jan 23 13:39:00 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 23 Jan 2013 22:39:00 +0100
Subject: [gdal-dev] GDAL correlator [thoughts]
In-Reply-To: <50FF89A7.2050202@gmail.com>
References: <CABfKfuGHsaUxzZgMO=9Nd+0691yS63e72CK_=99+UByefSNOSQ@mail.gmail.com>
	<50FF89A7.2050202@gmail.com>
Message-ID: <201301232239.00187.even.rouault@mines-paris.org>

Le mercredi 23 janvier 2013 07:56:39, Dmitriy Baryshnikov a ?crit :
> Hi Cristian,
> 
> I don't understand what really you want to do. There is a normal way to
> improve GDAL - make changes in local SVN snapshot and provide patches.
> If you need any help feel free to ask.

Dmitriy,

I think that there are several ways of contributing to GDAL, and FOSS in 
general. Patches are obviously greatly appreciated, as well as documented bug 
reports, support between users and developers, or enlightening explanations 
and thoughts such as the ones provided by Cristian, especially on such an 
advanced topic.

Best regards,

Even

From silyko at gmail.com  Wed Jan 23 14:21:43 2013
From: silyko at gmail.com (Simon Lyngby Kokkendorff)
Date: Wed, 23 Jan 2013 23:21:43 +0100
Subject: [gdal-dev] FileGDB driver - internal paths
In-Reply-To: <201301232218.14286.even.rouault@mines-paris.org>
References: <CANzGYpRYET=MN1V9VQYrd2pwimeGr2uWJy5fdBq1b4=GgpEW+g@mail.gmail.com>
	<201301232218.14286.even.rouault@mines-paris.org>
Message-ID: <CANzGYpSLqLmtomP=6PQO_TNHhV_t1ifaX+iYb0p_2yZGqWu3WQ@mail.gmail.com>

Hi Even,

  Looks great, thanks.

  Cheers,
   Simon

On Wed, Jan 23, 2013 at 10:18 PM, Even Rouault <even.rouault at mines-paris.org
> wrote:

> Le mercredi 23 janvier 2013 20:59:09, Simon Lyngby Kokkendorff a ?crit :
> > Hello List,
> >
> >    I'm using OGR to read a FileGDB database, perform some transformations
> > and then write an output FileGDB database. In that process I would like
> to
> > preserve the structure of the original FileGDB, i.e. put "Feature
> Classes"
> > into the right "Feature Datasets" etc.
> >    Hence, my question is whether it is possible, from the c-api of OGR,
> to
> > determine the FileGDB specific "internal path" of an OGR-layer
> > (corresponding to e.g. a "Feature Class") loaded through the FileGDB
> > driver? Perhaps it is necessary to extract this information from the XML
> > layer definition, which seem to be available via special SQL requests (in
> > gdal/ogr 1.10?) ?
>
> With GDAL/OGR 1.10, this is indeed possible. See :
>
> $ ogr2ogr -f filegdb poly.gdb poly.shp -lco
> FEATURE_DATASET=my_feature_dataset
> $ ogrinfo poly.gdb -sql "GetLayerDefinition poly" | grep CatalogPath
>   <CatalogPath>\my_feature_dataset\poly</CatalogPath>
>
> >
> >    Best Regards,
> >    Simon Kokkendorff, Danish Geodata Agency (formerly known as KMS)
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130123/16503461/attachment.html>

From jrepetto at free.fr  Thu Jan 24 03:39:15 2013
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu, 24 Jan 2013 12:39:15 +0100
Subject: [gdal-dev] Can't create a ticket in Trac
Message-ID: <51011D63.3020405@free.fr>

Hello,

I just tried to create a ticket, as I do usually. I logged in, filled in 
my ticked, pressed the button "Create Ticket", and I got these messages :

You are currently not logged in. You may want to do so now.
Error: Forbidden

TICKET_CREATE privileges are required to perform this operation


I retried twice, same problem.

Is there a problem in Trac, or in my computer ?

Jean-Claude

From jrepetto at free.fr  Thu Jan 24 03:41:06 2013
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu, 24 Jan 2013 12:41:06 +0100
Subject: [gdal-dev] gdal2tiles broken
Message-ID: <51011DD2.1000904@free.fr>

This is the ticket I tried to file in Trac (see my previous message just 
a minute ago) :


gdal2tiles.py seems to be broken in gdal-1.10 BETA 1;

$ gdal2tiles.py
   File "/usr/bin/gdal2tiles.py", line 680
     g.add_option("-g", "--googlekey", dest='googlekey',
                                                       ^
IndentationError: unindent does not match any outer indentation level

Some lines are indented by tabulations, other ones by spaces. I think 
this is the cause of the problem.

From jrepetto at free.fr  Thu Jan 24 03:47:10 2013
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu, 24 Jan 2013 12:47:10 +0100
Subject: [gdal-dev] gdal_edit
Message-ID: <51011F3E.7030206@free.fr>

Hello,

This utility program is very useful to change georeferencing of a raster 
without having to decompress and recompress it. It is a lot faster and 
the quality is not changed.

I think it would deserve to be an official GDAL 1.10 command, not just a 
Python sample.

Jean-Claude


From knutfrodesoppel at hotmail.com  Thu Jan 24 04:18:50 2013
From: knutfrodesoppel at hotmail.com (Knut-Frode Dagestad)
Date: Thu, 24 Jan 2013 13:18:50 +0100
Subject: [gdal-dev] Warping with GCPs at high latitudes
Message-ID: <kdr8re$mm2$1@ger.gmane.org>

Hi,

I am having trouble to perform accurate warping of images with GCPs 
(lon,lat) in the high Arctic (to "+proj=stere +lat_0=90 +lon_0=0"); 
problems starting already around 80 degrees of latitude.
Thin Plate Spline (-tps) performs better than polynomial fits, but 
output is often severely dragged at one or two edges, and sometimes it 
looks like the destination image is mirrored across a line.
Trimming images at the edges and adjusting warp options SAMPLE_STEPS and 
SAMPLE_GRID helps a little, but not sufficiently.

For the polynomial fits I assume the problem is related to precision due 
to the fact that lon and lat become singular at the pole. However, it 
should then probably be better if the algorithm could:
- convert first GCPs to the output projection (in my case stereographic, 
which has no singularity for the relevant images)
- make the polynomial fit GCP_stereo <-> pixel, line
- use this polynomial for the warping

I guess most GDAL users have a long wishlist of switches, but how about 
a switch to control whether GCP polynomial should rather be made in 
destination projection? Or a switch to gdal_translate to change the 
GCPProjection and GCP coordinates. A simpler and more pragmatic solution 
could be to make a separate Python script gdal_translate_gcps.py?

Are there other suggestion to deal with these problems?


Best regards from Knut-Frode


From yehil at rafael.co.il  Thu Jan 24 05:05:18 2013
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Thu, 24 Jan 2013 15:05:18 +0200
Subject: [gdal-dev] PDF driver
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0CAF3BE4538@MAILBOXSERVER.rf.local>


Hi
Is it possible to create a multi-page PDF with the current PDF driver (both raster and vector)?
Thanks
Yehiyam


________________________________________

This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not the intended recipient, you should contact us immediately and thereafter delete this message from your system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all electronic or other copies of the original message and any attachments thereof.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130124/c1530ae9/attachment-0001.html>

From ahmettemiz88 at gmail.com  Thu Jan 24 05:44:21 2013
From: ahmettemiz88 at gmail.com (Ahmet Temiz)
Date: Thu, 24 Jan 2013 15:44:21 +0200
Subject: [gdal-dev] creating bounding box map of a contour map
Message-ID: <CAJKO1Yufzpz2JbZPfCBduJ5akhdLMG0NTr-_c1iMnu=kC4hRiA@mail.gmail.com>

hello

I have a contour elevation (line) map.

I create bounding box map ( as a rectangular  polygon ) of this
contour map using extend.

how can I do that ?

regards

-- 
Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Planlama ve Zarar Azaltma Dairesi Ba?kanl???


________________________

Ahmet Temiz
Geological Eng.
Information Systems - GIS Group
Disaster and Emergency Management
of Presidency

From peifer at gmx.eu  Thu Jan 24 07:15:06 2013
From: peifer at gmx.eu (Hermann Peifer)
Date: Thu, 24 Jan 2013 13:15:06 -0200
Subject: [gdal-dev] creating bounding box map of a contour map
In-Reply-To: <CAJKO1Yufzpz2JbZPfCBduJ5akhdLMG0NTr-_c1iMnu=kC4hRiA@mail.gmail.com>
References: <CAJKO1Yufzpz2JbZPfCBduJ5akhdLMG0NTr-_c1iMnu=kC4hRiA@mail.gmail.com>
Message-ID: <51014FFA.4040806@gmx.eu>

On 2013-01-24 11:44, Ahmet Temiz wrote:
> hello
>
> I have a contour elevation (line) map.
>
> I create bounding box map ( as a rectangular  polygon ) of this
> contour map using extend.
>
> how can I do that ?
>

If I understood correctly, all you need to do is:

ogrtindex output_dataset src_dataset

http://www.gdal.org/ogrtindex.html

Hermann


From hellik at web.de  Thu Jan 24 09:17:00 2013
From: hellik at web.de (Helmut Kudrnovsky)
Date: Thu, 24 Jan 2013 09:17:00 -0800 (PST)
Subject: [gdal-dev] ogr2ogr - ESRI Shapefile: how to set SHPT?
Message-ID: <1359047820842-5029635.post@n6.nabble.com>

hi,

in the format manual for shapefile following mentioned:

[...]
SHPT=type: Override the type of shapefile created. Can be one of NULL for a
simple .dbf file with no .shp file, POINT, ARC, POLYGON or MULTIPOINT for
2D, or POINTZ, ARCZ, POLYGONZ or MULTIPOINTZ for 3D. Shapefiles with measure
values are not supported, nor are MULTIPATCH files.
[...]

my idea is to convert a MULTIPOINT shapefile to a POINT shapefile, but how
to set SHPT=POINT?

ogr2ogr -f "ESRI Shapefile" -dsco SHPT=POINT output_POINT.shp
input_multipoint.shp
ogr2ogr -f "ESRI Shapefile" -lco SHPT=POINT output_POINT.shp
input_multipoint.shp
ogr2ogr -f "ESRI Shapefile" -nlt POINT output_POINT.shp input_multipoint.shp

?

e.g.
ogr2ogr -f "ESRI Shapefile" -nlt POINT output_POINT3.shp
input_multipoint.shp
ERROR 1: Attempt to write non-point (MULTIPOINT) geometry to point
shapefile.
ERROR 1: Terminating translation prematurely after failed translation of
layer input_multipoint (use -skipfailures to skip errors)

?

my environment is GDAL 1.9.2, released 2012/10/08 within the osgeo4w-stack
(windows7).

ogrinfo input_multipoint.shp
INFO: Open of `input_multipoint.shp'
      using driver `ESRI Shapefile' successful.
1: appendjuli09 (Multi Point)




-----
best regards
Helmut
--
View this message in context: http://osgeo-org.1560.n6.nabble.com/ogr2ogr-ESRI-Shapefile-how-to-set-SHPT-tp5029635.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jrepetto at free.fr  Thu Jan 24 10:01:48 2013
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu, 24 Jan 2013 19:01:48 +0100
Subject: [gdal-dev] Can't create a ticket in Trac
In-Reply-To: <51011D63.3020405@free.fr>
References: <51011D63.3020405@free.fr>
Message-ID: <5101770C.9010309@free.fr>

On 24/01/2013 12:39, Jean-Claude Repetto wrote:
> Hello,
> 
> I just tried to create a ticket, as I do usually. I logged in, filled in
> my ticked, pressed the button "Create Ticket", and I got these messages :
> 
> You are currently not logged in. You may want to do so now.
> Error: Forbidden
> 
> TICKET_CREATE privileges are required to perform this operation
> 
> 
> I retried twice, same problem.
> 
> Is there a problem in Trac, or in my computer ?
> 
> Jean-Claude


The problem seems to be related to my computer, because I tried to file
a ticket on another one, an it worked.
Yesterday, I upgraded Firefox on the first computer, from version 10 ESR
to version 17, and I noticed a similar problem with a phpBB forum.

Jean-Claude


From jukka.rahkonen at mmmtike.fi  Thu Jan 24 10:03:29 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 24 Jan 2013 18:03:29 +0000 (UTC)
Subject: [gdal-dev] ogr2ogr - ESRI Shapefile: how to set SHPT?
References: <1359047820842-5029635.post@n6.nabble.com>
Message-ID: <loom.20130124T190141-920@post.gmane.org>

Helmut Kudrnovsky <hellik <at> web.de> writes:

> 
> my idea is to convert a MULTIPOINT shapefile to a POINT shapefile, but how
> to set SHPT=POINT?
> 

I would have a try with ogr2ogr -explodecollections

http://www.gdal.org/ogr2ogr.html

-Jukka Rahkonen-


From etourigny.dev at gmail.com  Thu Jan 24 10:05:53 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 24 Jan 2013 16:05:53 -0200
Subject: [gdal-dev] Can't create a ticket in Trac
In-Reply-To: <5101770C.9010309@free.fr>
References: <51011D63.3020405@free.fr>
	<5101770C.9010309@free.fr>
Message-ID: <CA+TxYvO_sMWd8kSvHC8yq5JMrXyeqt0nK0qm4vDonq8i77w2sA@mail.gmail.com>

Sometimes it's good to try with another browser (e.g. Chrome) when
this kind of issues come up.

cheers

On Thu, Jan 24, 2013 at 4:01 PM, Jean-Claude Repetto <jrepetto at free.fr> wrote:
> On 24/01/2013 12:39, Jean-Claude Repetto wrote:
>> Hello,
>>
>> I just tried to create a ticket, as I do usually. I logged in, filled in
>> my ticked, pressed the button "Create Ticket", and I got these messages :
>>
>> You are currently not logged in. You may want to do so now.
>> Error: Forbidden
>>
>> TICKET_CREATE privileges are required to perform this operation
>>
>>
>> I retried twice, same problem.
>>
>> Is there a problem in Trac, or in my computer ?
>>
>> Jean-Claude
>
>
> The problem seems to be related to my computer, because I tried to file
> a ticket on another one, an it worked.
> Yesterday, I upgraded Firefox on the first computer, from version 10 ESR
> to version 17, and I noticed a similar problem with a phpBB forum.
>
> Jean-Claude
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Thu Jan 24 11:21:40 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 24 Jan 2013 20:21:40 +0100
Subject: [gdal-dev] PDF driver
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0CAF3BE4538@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0CAF3BE4538@MAILBOXSERVER.rf.local>
Message-ID: <201301242021.40685.even.rouault@mines-paris.org>

Le jeudi 24 janvier 2013 14:05:18, Livneh Yehiyam a ?crit :
> Hi
> Is it possible to create a multi-page PDF with the current PDF driver (both
> raster and vector)? Thanks

Not directly, but you can likely assemble several single page PDFs into a 
multi-page PDF with utilities such as pdfunite from poppler.

> Yehiyam
> 
> 
> ________________________________________
> 
> This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE
> SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information
> intended for a specific individual and purpose, may constitute information
> that is privileged or confidential or otherwise protected from disclosure.
> If you are not the intended recipient, you should contact us immediately
> and thereafter delete this message from your system. You are hereby
> notified that any disclosure, copying, dissemination, distribution or
> forwarding of this message, or the taking of any action based on it, is
> strictly prohibited. If you have received this e-mail in error, please
> notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely
> delete or destroy any and all electronic or other copies of the original
> message and any attachments thereof.

From yehil at rafael.co.il  Thu Jan 24 11:28:13 2013
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Thu, 24 Jan 2013 21:28:13 +0200
Subject: [gdal-dev] PDF driver
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0CAF3DB73B8@MAILBOXSERVER.rf.local>

Thanks Even

Sent from my mobile


-----------------------------
From: "Even Rouault"
Subject: Re: [gdal-dev] PDF driver
Date: 24 ????? 2013 21:23


Le jeudi 24 janvier 2013 14:05:18, Livneh Yehiyam a ?crit :
> Hi
> Is it possible to create a multi-page PDF with the current PDF driver (both
> raster and vector)? Thanks

Not directly, but you can likely assemble several single page PDFs into a
multi-page PDF with utilities such as pdfunite from poppler.

> Yehiyam
>
>
> ________________________________________
>
> This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE
> SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information
> intended for a specific individual and purpose, may constitute information
> that is privileged or confidential or otherwise protected from disclosure.
> If you are not the intended recipient, you should contact us immediately
> and thereafter delete this message from your system. You are hereby
> notified that any disclosure, copying, dissemination, distribution or
> forwarding of this message, or the taking of any action based on it, is
> strictly prohibited. If you have received this e-mail in error, please
> notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely
> delete or destroy any and all electronic or other copies of the original
> message and any attachments thereof.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

________________________________________

This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not the intended recipient, you should contact us immediately and thereafter delete this message from your system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all electronic or other copies of the original message and any attachments thereof.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130124/b76f9e81/attachment.html>

From even.rouault at mines-paris.org  Thu Jan 24 11:43:02 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 24 Jan 2013 20:43:02 +0100
Subject: [gdal-dev] Warping with GCPs at high latitudes
In-Reply-To: <kdr8re$mm2$1@ger.gmane.org>
References: <kdr8re$mm2$1@ger.gmane.org>
Message-ID: <201301242043.03073.even.rouault@mines-paris.org>

Le jeudi 24 janvier 2013 13:18:50, Knut-Frode Dagestad a ?crit :
> Hi,
> 
> I am having trouble to perform accurate warping of images with GCPs
> (lon,lat) in the high Arctic (to "+proj=stere +lat_0=90 +lon_0=0");
> problems starting already around 80 degrees of latitude.
> Thin Plate Spline (-tps) performs better than polynomial fits, but
> output is often severely dragged at one or two edges, and sometimes it
> looks like the destination image is mirrored across a line.
> Trimming images at the edges and adjusting warp options SAMPLE_STEPS and
> SAMPLE_GRID helps a little, but not sufficiently.
> 
> For the polynomial fits I assume the problem is related to precision due
> to the fact that lon and lat become singular at the pole. However, it
> should then probably be better if the algorithm could:
> - convert first GCPs to the output projection (in my case stereographic,
> which has no singularity for the relevant images)
> - make the polynomial fit GCP_stereo <-> pixel, line
> - use this polynomial for the warping
> 
> I guess most GDAL users have a long wishlist of switches, but how about
> a switch to control whether GCP polynomial should rather be made in
> destination projection? Or a switch to gdal_translate to change the
> GCPProjection and GCP coordinates. A simpler and more pragmatic solution
> could be to make a separate Python script gdal_translate_gcps.py?
> 
> Are there other suggestion to deal with these problems?

In your use case, the source image is more or less very close to its final 
shape in Stereographics projection (the warping doesn't warp much the image), 
right ?

Did you try to do your suggestion at hand to actually check that your idea 
leads to the expected result ? This is basically a matter of running :

1) gdaltransform -s_srs EPSG:4326 -t_srs "+proj=stere +lat_0=90 +lon_0=0" on 
the coordinates of the GCPs of the source image
2) gdal_translate -a_srs  "+proj=stere +lat_0=90 +lon_0=0"  [-gcp x y X Y]* 
src.tif src_reprojected_gcp.tif where x y come from the source image and X Y 
are the reprojected coordinates
3) gdalwarp src_reprojected_gcp.tif out.tif

> 
> 
> Best regards from Knut-Frode
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From civilmeteo at gmail.com  Thu Jan 24 11:43:30 2013
From: civilmeteo at gmail.com (Elias Kotsifis)
Date: Thu, 24 Jan 2013 21:43:30 +0200
Subject: [gdal-dev] elevetions from ASTER GDEM V2
Message-ID: <CAHDqqLefMvcE+cfEdWJo0tTj4O1T0C=NFJP4Ce_CF8ZnXgDLNQ@mail.gmail.com>

Hello

I want to calculate the elevation of any point on earth, giving lat, Long
(for example like google elevation Api, or the earth tools:
http://www.earthtools.org/webservices.htm # cheigit) based the ASTER GDEM
MODEL V2.
I went to download data from there, and gives me geotiff files. Overall for
the entire planet is 22,702 granule with 400GB size
Then what should I do?

Best regards
Elias Kotsifis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130124/4e531099/attachment.html>

From jrepetto at free.fr  Thu Jan 24 12:00:58 2013
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu, 24 Jan 2013 21:00:58 +0100
Subject: [gdal-dev] elevetions from ASTER GDEM V2
In-Reply-To: <CAHDqqLefMvcE+cfEdWJo0tTj4O1T0C=NFJP4Ce_CF8ZnXgDLNQ@mail.gmail.com>
References: <CAHDqqLefMvcE+cfEdWJo0tTj4O1T0C=NFJP4Ce_CF8ZnXgDLNQ@mail.gmail.com>
Message-ID: <510192FA.5020505@free.fr>

On 24/01/2013 20:43, Elias Kotsifis wrote:
> Hello
>  
> I want to calculate the elevation of any point on earth, giving lat,
> Long (for example like google elevation Api, or the earth tools:
> http://www.earthtools.org/webservices.htm # cheigit) based the ASTER
> GDEM MODEL V2.
> I went to download data from there, and gives me geotiff files. Overall
> for the entire planet is 22,702 granule with 400GB size
> Then what should I do?
>  

Hello,

Generally, a bilinear or bicubic interpolation is used to compute the
elevation of the point.
You should read this paper :
http://www.geocomputation.org/1999/082/gc_082.htm

Jean-Claude

From tyler.mitchell at actian.com  Thu Jan 24 12:15:46 2013
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Thu, 24 Jan 2013 12:15:46 -0800
Subject: [gdal-dev] elevetions from ASTER GDEM V2
In-Reply-To: <CAHDqqLefMvcE+cfEdWJo0tTj4O1T0C=NFJP4Ce_CF8ZnXgDLNQ@mail.gmail.com>
References: <CAHDqqLefMvcE+cfEdWJo0tTj4O1T0C=NFJP4Ce_CF8ZnXgDLNQ@mail.gmail.com>
Message-ID: <0A64E8E8-9C84-470F-9040-19EEEC86B56D@actian.com>


On 2013-01-24, at 11:43 AM, Elias Kotsifis wrote:
> I want to calculate the elevation of any point on earth, giving lat, Long (for example like google elevation Api, or the earth tools: http://www.earthtools.org/webservices.htm # cheigit) based the ASTER GDEM MODEL V2.
> I went to download data from there, and gives me geotiff files. Overall for the entire planet is 22,702 granule with 400GB size 
> Then what should I do? 

Hi Elias,
Have you tried the gdallocationinfo command?  You can pass it a lat/lon and raster and it will report back what you're after I believe.

Hope it helps,
Tyler

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130124/7b0a70fd/attachment.html>

From jason.greenlaw at noaa.gov  Thu Jan 24 13:54:48 2013
From: jason.greenlaw at noaa.gov (Jason Greenlaw - NOAA Affiliate)
Date: Thu, 24 Jan 2013 16:54:48 -0500
Subject: [gdal-dev] VRT/CSV to PostgreSQL - Convert Missing/Blank Values to
	NULL?
Message-ID: <CAAoP0JwiC9JWw5ZiGKH=HQHpu4T_A2igKmvbngo-tz=Ec=5wuA@mail.gmail.com>

When loading into a PostgreSQL/PostGIS database, can the VRT/CSV driver
convert missing values (for a "Real" field) to NULL instead of defaulting
to 0.00?

Example:

I'm attempting to load a CSV file into PostgreSQL using the following
simple VRT file:

--------------------------------------------------------
<OGRVRTDataSource>
    <OGRVRTLayer name="sfcdump">
        <SrcDataSource relativeToVRT="1">sfcdump.csv</SrcDataSource>
        <GeometryType>wkbPoint</GeometryType>
        <LayerSRS>WGS84</LayerSRS>
        <GeometryField encoding="PointFromColumns" x="longitude"
y="latitude"/>
        <Field name="stnid" src="stnid" type="String"/>
        <Field name="latitude" src="latitude" type="Real"/>
        <Field name="longitude" src="longitude" type="Real"/>
        <Field name="td" src="td" type="Real"/>
        <Field name="t" src="t" type="Real"/>
    </OGRVRTLayer>
</OGRVRTDataSource>
--------------------------------------------------------

Some of the records do not have any value for the "td" column; for example,
this single-record CSV:

--------------------------------------------------------
stnid,lat,lon,td,t
KOVE,39.490002,-121.620003,,283.0019
--------------------------------------------------------

When records such as these are loaded into the database using ogr2ogr, the
missing value becomes 0.00 rather than NULL.

Is this expected behavior?  Is there any way to tell the VRT/CSV driver how
to handle missing/null values for numeric fields?

Additionally, I've noticed that blank/missing values for String columns get
imported as empty strings rather than NULL (but perhaps that's the expected
behavior in this case).

Thanks,
Jason
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130124/ccd81fd0/attachment.html>

From even.rouault at mines-paris.org  Thu Jan 24 14:16:48 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 24 Jan 2013 23:16:48 +0100
Subject: [gdal-dev] VRT/CSV to PostgreSQL - Convert Missing/Blank Values
	to NULL?
In-Reply-To: <CAAoP0JwiC9JWw5ZiGKH=HQHpu4T_A2igKmvbngo-tz=Ec=5wuA@mail.gmail.com>
References: <CAAoP0JwiC9JWw5ZiGKH=HQHpu4T_A2igKmvbngo-tz=Ec=5wuA@mail.gmail.com>
Message-ID: <201301242316.48358.even.rouault@mines-paris.org>

Le jeudi 24 janvier 2013 22:54:48, Jason Greenlaw - NOAA Affiliate a ?crit :
> When loading into a PostgreSQL/PostGIS database, can the VRT/CSV driver
> convert missing values (for a "Real" field) to NULL instead of defaulting
> to 0.00?
> 
> Example:
> 
> I'm attempting to load a CSV file into PostgreSQL using the following
> simple VRT file:
> 
> --------------------------------------------------------
> <OGRVRTDataSource>
>     <OGRVRTLayer name="sfcdump">
>         <SrcDataSource relativeToVRT="1">sfcdump.csv</SrcDataSource>
>         <GeometryType>wkbPoint</GeometryType>
>         <LayerSRS>WGS84</LayerSRS>
>         <GeometryField encoding="PointFromColumns" x="longitude"
> y="latitude"/>
>         <Field name="stnid" src="stnid" type="String"/>
>         <Field name="latitude" src="latitude" type="Real"/>
>         <Field name="longitude" src="longitude" type="Real"/>
>         <Field name="td" src="td" type="Real"/>
>         <Field name="t" src="t" type="Real"/>
>     </OGRVRTLayer>
> </OGRVRTDataSource>
> --------------------------------------------------------
> 
> Some of the records do not have any value for the "td" column; for example,
> this single-record CSV:
> 
> --------------------------------------------------------
> stnid,lat,lon,td,t
> KOVE,39.490002,-121.620003,,283.0019
> --------------------------------------------------------
> 
> When records such as these are loaded into the database using ogr2ogr, the
> missing value becomes 0.00 rather than NULL.
> 
> Is this expected behavior?  Is there any way to tell the VRT/CSV driver how
> to handle missing/null values for numeric fields?
> 
> Additionally, I've noticed that blank/missing values for String columns get
> imported as empty strings rather than NULL (but perhaps that's the expected
> behavior in this case).

Try creating a sfcdump.csvt file with the following line :

String,Real,Real,Real,Real

This way the CSV driver will have the correct type right at the source and 
will report a null real value, instead of a blank string that the VRT driver 
currently converts into 0.

As far as blank values in CSV being imported as empty string, I'm not sure 
there's a perfect choice on that. You can always update your database table to 
replace empty string by null if that's what fits more your purpose.

> 
> Thanks,
> Jason

From sault.don at gmail.com  Thu Jan 24 20:05:08 2013
From: sault.don at gmail.com (Donovan Cameron)
Date: Thu, 24 Jan 2013 21:05:08 -0700
Subject: [gdal-dev] libFileGDBAPI.so not found with compiling gdal 1.9.2 on
 openSUSE 12.2 x64.
Message-ID: <CAJo0jfOyMcPE3aSq17o-cYpO+uAXSAXxbvfroJwL1tGD_J=b5w@mail.gmail.com>

I can't seem to compile GDAL with FileGDB support on openSUSE.
I'm compiling locally using the OBS tools (osc) and have checked-out
the libgdal package from the Application:Geo project.

Steps I've taken:

1) Download FileGDB_API_1_2-64.tar.gz

2) tar xzvf FileGDB_API_1_2-64.tar.gz -C /usr/lib64/

3) export LD_LIBRARY_PATH=/usr/lib64/FileGDB_API/lib
cd /usr/lib64/FileGDB_API/samples
make
cd bin
./Querying #Works, so the API is fine.

4) su -
$ vi /etc/ld.so.conf.d/fgdb.conf #Added a single entry:
/usr/lib64/FileGDB_API/lib
$ ldconfig #A grep of this with the -v flag shows it registered fine

5) #Some openSUSE specific stuff, b/c I'm building locally via the OBS
$ zypper in osc
cd /home/saultdon/Development/obs
osc co Application:Geo libgdal
cd Application:Geo/libgdal
vi libgdal.spec #added "--with-fgdb=/usr/lib64/FileGDB_API" in
%configure section
#I also did a test build without that configure param. first and it
compiled fine with working RPMs
osc build openSUSE_12.2 x86_64 libgdal.spec --clean

Resulting Error:
[  209s] checking for libFileGDBAPI.so in in
/usr/lib64/FileGDB_API/lib... configure: error: not found.
[  209s] error: Bad exit status from /var/tmp/rpm-tmp.7SOa8g (%build)
[  209s] RPM build errors:
[  209s] Bad exit status from /var/tmp/rpm-tmp.7SOa8g (%build)
The buildroot was: /var/tmp/build-root

libFileGDBAPI.so file exists, ldconfig registered it, and the API test
worked fine, the env. var. LD_LIBRARY_PATH is also set, but I don't
even think that's necessary. I only had to set that to get the API
test to work.

I'm not sure where this is going wrong. If anyone has any input or
needs more information, let me know.


Thanks!


Donovan

From sault.don at gmail.com  Thu Jan 24 20:23:03 2013
From: sault.don at gmail.com (Donovan Cameron)
Date: Thu, 24 Jan 2013 21:23:03 -0700
Subject: [gdal-dev] libFileGDBAPI.so not found with compiling gdal 1.9.2
 on openSUSE 12.2 x64.
In-Reply-To: <CAJo0jfOyMcPE3aSq17o-cYpO+uAXSAXxbvfroJwL1tGD_J=b5w@mail.gmail.com>
References: <CAJo0jfOyMcPE3aSq17o-cYpO+uAXSAXxbvfroJwL1tGD_J=b5w@mail.gmail.com>
Message-ID: <CAJo0jfMfd0r=yC7QHccVXRE5WQSf+g7+HG4AEG07EaGt0aNp5w@mail.gmail.com>

Looks like over in the [qgis-user] list, someone is having similar problems:
https://groups.google.com/d/msg/qgis_user_remote/B2J9sOsSLbo/BIpAHZ84bhgJ

On Thu, Jan 24, 2013 at 9:05 PM, Donovan Cameron <sault.don at gmail.com> wrote:
> I can't seem to compile GDAL with FileGDB support on openSUSE.
> I'm compiling locally using the OBS tools (osc) and have checked-out
> the libgdal package from the Application:Geo project.
>
> Steps I've taken:
>
> 1) Download FileGDB_API_1_2-64.tar.gz
>
> 2) tar xzvf FileGDB_API_1_2-64.tar.gz -C /usr/lib64/
>
> 3) export LD_LIBRARY_PATH=/usr/lib64/FileGDB_API/lib
> cd /usr/lib64/FileGDB_API/samples
> make
> cd bin
> ./Querying #Works, so the API is fine.
>
> 4) su -
> $ vi /etc/ld.so.conf.d/fgdb.conf #Added a single entry:
> /usr/lib64/FileGDB_API/lib
> $ ldconfig #A grep of this with the -v flag shows it registered fine
>
> 5) #Some openSUSE specific stuff, b/c I'm building locally via the OBS
> $ zypper in osc
> cd /home/saultdon/Development/obs
> osc co Application:Geo libgdal
> cd Application:Geo/libgdal
> vi libgdal.spec #added "--with-fgdb=/usr/lib64/FileGDB_API" in
> %configure section
> #I also did a test build without that configure param. first and it
> compiled fine with working RPMs
> osc build openSUSE_12.2 x86_64 libgdal.spec --clean
>
> Resulting Error:
> [  209s] checking for libFileGDBAPI.so in in
> /usr/lib64/FileGDB_API/lib... configure: error: not found.
> [  209s] error: Bad exit status from /var/tmp/rpm-tmp.7SOa8g (%build)
> [  209s] RPM build errors:
> [  209s] Bad exit status from /var/tmp/rpm-tmp.7SOa8g (%build)
> The buildroot was: /var/tmp/build-root
>
> libFileGDBAPI.so file exists, ldconfig registered it, and the API test
> worked fine, the env. var. LD_LIBRARY_PATH is also set, but I don't
> even think that's necessary. I only had to set that to get the API
> test to work.
>
> I'm not sure where this is going wrong. If anyone has any input or
> needs more information, let me know.
>
>
> Thanks!
>
>
> Donovan

From jan.heckman at gmail.com  Fri Jan 25 00:19:27 2013
From: jan.heckman at gmail.com (Jan Heckman)
Date: Fri, 25 Jan 2013 09:19:27 +0100
Subject: [gdal-dev] libFileGDBAPI.so not found with compiling gdal 1.9.2
 on openSUSE 12.2 x64.
In-Reply-To: <CAJo0jfMfd0r=yC7QHccVXRE5WQSf+g7+HG4AEG07EaGt0aNp5w@mail.gmail.com>
References: <CAJo0jfOyMcPE3aSq17o-cYpO+uAXSAXxbvfroJwL1tGD_J=b5w@mail.gmail.com>
	<CAJo0jfMfd0r=yC7QHccVXRE5WQSf+g7+HG4AEG07EaGt0aNp5w@mail.gmail.com>
Message-ID: <CAKMUAtAr3YWEeYZ4NVaJ9M=f2kUroJ=D-yDoWgdWjesEVW-=HQ@mail.gmail.com>

Hi,
On windows, using visual studio (2008 and 2012), I could compile both 32
bits and 64 bits, but only the 32 bits version actually worked.
I haven't tried to figure out why the 64 bits version didn't work, 32 bits
was good enough for me.
Hope this is an option for you as well,
Jan

On Fri, Jan 25, 2013 at 5:23 AM, Donovan Cameron <sault.don at gmail.com>wrote:

> Looks like over in the [qgis-user] list, someone is having similar
> problems:
> https://groups.google.com/d/msg/qgis_user_remote/B2J9sOsSLbo/BIpAHZ84bhgJ
>
> On Thu, Jan 24, 2013 at 9:05 PM, Donovan Cameron <sault.don at gmail.com>
> wrote:
> > I can't seem to compile GDAL with FileGDB support on openSUSE.
> > I'm compiling locally using the OBS tools (osc) and have checked-out
> > the libgdal package from the Application:Geo project.
> >
> > Steps I've taken:
> >
> > 1) Download FileGDB_API_1_2-64.tar.gz
> >
> > 2) tar xzvf FileGDB_API_1_2-64.tar.gz -C /usr/lib64/
> >
> > 3) export LD_LIBRARY_PATH=/usr/lib64/FileGDB_API/lib
> > cd /usr/lib64/FileGDB_API/samples
> > make
> > cd bin
> > ./Querying #Works, so the API is fine.
> >
> > 4) su -
> > $ vi /etc/ld.so.conf.d/fgdb.conf #Added a single entry:
> > /usr/lib64/FileGDB_API/lib
> > $ ldconfig #A grep of this with the -v flag shows it registered fine
> >
> > 5) #Some openSUSE specific stuff, b/c I'm building locally via the OBS
> > $ zypper in osc
> > cd /home/saultdon/Development/obs
> > osc co Application:Geo libgdal
> > cd Application:Geo/libgdal
> > vi libgdal.spec #added "--with-fgdb=/usr/lib64/FileGDB_API" in
> > %configure section
> > #I also did a test build without that configure param. first and it
> > compiled fine with working RPMs
> > osc build openSUSE_12.2 x86_64 libgdal.spec --clean
> >
> > Resulting Error:
> > [  209s] checking for libFileGDBAPI.so in in
> > /usr/lib64/FileGDB_API/lib... configure: error: not found.
> > [  209s] error: Bad exit status from /var/tmp/rpm-tmp.7SOa8g (%build)
> > [  209s] RPM build errors:
> > [  209s] Bad exit status from /var/tmp/rpm-tmp.7SOa8g (%build)
> > The buildroot was: /var/tmp/build-root
> >
> > libFileGDBAPI.so file exists, ldconfig registered it, and the API test
> > worked fine, the env. var. LD_LIBRARY_PATH is also set, but I don't
> > even think that's necessary. I only had to set that to get the API
> > test to work.
> >
> > I'm not sure where this is going wrong. If anyone has any input or
> > needs more information, let me know.
> >
> >
> > Thanks!
> >
> >
> > Donovan
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130125/40366321/attachment-0001.html>

From vesnikos at gmail.com  Fri Jan 25 01:51:23 2013
From: vesnikos at gmail.com (Nick Ves)
Date: Fri, 25 Jan 2013 11:51:23 +0200
Subject: [gdal-dev] elevetions from ASTER GDEM V2
In-Reply-To: <0A64E8E8-9C84-470F-9040-19EEEC86B56D@actian.com>
References: <CAHDqqLefMvcE+cfEdWJo0tTj4O1T0C=NFJP4Ce_CF8ZnXgDLNQ@mail.gmail.com>
	<0A64E8E8-9C84-470F-9040-19EEEC86B56D@actian.com>
Message-ID: <CADCcPvs06pRjOt5wipy=J6LyPqXNCpOfN2Y1X9MEHRcZN1Bbjw@mail.gmail.com>

If the spatial resulution is fine for your problem, then as Tyler
suggested, you can use gdallocationinfo [1] to get the pixel value at
Long,Lat location.

If you think you need to downscale your data to your needs, you can first
built a vrt (virtual dataset) with gdal's "gdalbuildvrt" [2] and -tr
option.


What I don't know is, which method vrts are using to obtain raster values
when the source rasters are in another resolution than the vrt


[1] http://www.gdal.org/gdallocationinfo.html
[2] http://www.gdal.org/gdalbuildvrt.html




On Thu, Jan 24, 2013 at 10:15 PM, Tyler Mitchell
<tyler.mitchell at actian.com>wrote:

>
> On 2013-01-24, at 11:43 AM, Elias Kotsifis wrote:
>
> I want to calculate the elevation of any point on earth, giving lat, Long
> (for example like google elevation Api, or the earth tools:
> http://www.earthtools.org/webservices.htm # cheigit) based the ASTER GDEM
> MODEL V2.
> I went to download data from there, and gives me geotiff files. Overall
> for the entire planet is 22,702 granule with 400GB size
> Then what should I do?
>
>
> Hi Elias,
> Have you tried the gdallocationinfo command?  You can pass it a lat/lon
> and raster and it will report back what you're after I believe.
>
> Hope it helps,
> Tyler
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130125/bb71f960/attachment.html>

From knutfrodesoppel at hotmail.com  Fri Jan 25 05:08:47 2013
From: knutfrodesoppel at hotmail.com (Knut-Frode Dagestad)
Date: Fri, 25 Jan 2013 14:08:47 +0100
Subject: [gdal-dev] Warping with GCPs at high latitudes
In-Reply-To: <201301242043.03073.even.rouault@mines-paris.org>
References: <kdr8re$mm2$1@ger.gmane.org>
	<201301242043.03073.even.rouault@mines-paris.org>
Message-ID: <510283DF.90609@hotmail.com>

On 24. jan. 2013 20:43, Even Rouault wrote:
> Did you try to do your suggestion at hand to actually check that your idea
> leads to the expected result ? This is basically a matter of running :
>
> 1) gdaltransform -s_srs EPSG:4326 -t_srs "+proj=stere +lat_0=90 +lon_0=0" on
> the coordinates of the GCPs of the source image
> 2) gdal_translate -a_srs  "+proj=stere +lat_0=90 +lon_0=0"  [-gcp x y X Y]*
> src.tif src_reprojected_gcp.tif where x y come from the source image and X Y
> are the reprojected coordinates
> 3) gdalwarp src_reprojected_gcp.tif out.tif

I tried it now with Python API, and it works perfectly, all the way to 
the pole.

Thus the conclusion should be that GCPs can have any spatial reference 
system, but preferably one with no singularity within or near the 
destination area.

I used code like this:
# Make tranformer from GCP SRS to destination SRS
dstSRS = osr.SpatialReference()
dstSRS.ImportFromProj4(srsString)
srcSRS = osr.SpatialReference()
srcGCPProjection = srcDataset.GetGCPProjection()
srcSRS.ImportFromWkt(srcGCPProjection)
transformer = osr.CoordinateTransformation(srcSRS, dstSRS)

# Reproject all GCPs
srcGCPs = self.vrt.dataset.GetGCPs()
dstGCPs = []
for srcGCP in srcGCPs:
	(x, y, z) = transformer.TransformPoint(srcGCP.GCPX, srcGCP.GCPY, 
srcGCP.GCPZ)
	dstGCP = gdal.GCP(x, y, z, srcGCP.GCPPixel, srcGCP.GCPLine, 
srcGCP.Info, srcGCP.Id)
	dstGCPs.append(dstGCP)

# Update dataset
self.vrt.dataset.SetGCPs(dstGCPs, dstSRS.ExportToWkt())


From hellik at web.de  Fri Jan 25 07:38:34 2013
From: hellik at web.de (Helmut Kudrnovsky)
Date: Fri, 25 Jan 2013 07:38:34 -0800 (PST)
Subject: [gdal-dev] ogr2ogr - ESRI Shapefile: how to set SHPT?
In-Reply-To: <loom.20130124T190141-920@post.gmane.org>
References: <1359047820842-5029635.post@n6.nabble.com>
	<loom.20130124T190141-920@post.gmane.org>
Message-ID: <1359128314379-5029892.post@n6.nabble.com>

>>
>> my idea is to convert a MULTIPOINT shapefile to a POINT shapefile, but
>> how
>> to set SHPT=POINT?
>>
>
>I would have a try with ogr2ogr -explodecollections 

-explodecollections did the conversion from MULTIPOINT to POINT shapefile.

thanks!



-----
best regards
Helmut
--
View this message in context: http://osgeo-org.1560.n6.nabble.com/ogr2ogr-ESRI-Shapefile-how-to-set-SHPT-tp5029635p5029892.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From sault.don at gmail.com  Fri Jan 25 10:05:43 2013
From: sault.don at gmail.com (Donovan Cameron)
Date: Fri, 25 Jan 2013 11:05:43 -0700
Subject: [gdal-dev] libFileGDBAPI.so not found with compiling gdal 1.9.2
 on openSUSE 12.2 x64.
In-Reply-To: <CAKMUAtAr3YWEeYZ4NVaJ9M=f2kUroJ=D-yDoWgdWjesEVW-=HQ@mail.gmail.com>
References: <CAJo0jfOyMcPE3aSq17o-cYpO+uAXSAXxbvfroJwL1tGD_J=b5w@mail.gmail.com>
	<CAJo0jfMfd0r=yC7QHccVXRE5WQSf+g7+HG4AEG07EaGt0aNp5w@mail.gmail.com>
	<CAKMUAtAr3YWEeYZ4NVaJ9M=f2kUroJ=D-yDoWgdWjesEVW-=HQ@mail.gmail.com>
Message-ID: <CAJo0jfMqTuXJ9Et+mbWv5MC2mu_WY=jkF4jtjV751RBRe=MUDg@mail.gmail.com>

Thanks for the suggestion Jan.

I tried to compile the 32-bit libgdal with the 32bit FileGDB_API but
still throws the same error...
Is it possible that the osc tool is looking inside it's build
environment at /tmp or /usr/tmp instead of my local user files at
/usr/lib64?

I might take this problem to the package maintainer for libgdal on
openSUSE 12.2 to see if they have attempted to compile with FileGDB
support.

On Fri, Jan 25, 2013 at 1:19 AM, Jan Heckman <jan.heckman at gmail.com> wrote:
> Hi,
> On windows, using visual studio (2008 and 2012), I could compile both 32
> bits and 64 bits, but only the 32 bits version actually worked.
> I haven't tried to figure out why the 64 bits version didn't work, 32 bits
> was good enough for me.
> Hope this is an option for you as well,
> Jan
>
> On Fri, Jan 25, 2013 at 5:23 AM, Donovan Cameron <sault.don at gmail.com>
> wrote:
>>
>> Looks like over in the [qgis-user] list, someone is having similar
>> problems:
>> https://groups.google.com/d/msg/qgis_user_remote/B2J9sOsSLbo/BIpAHZ84bhgJ
>>
>> On Thu, Jan 24, 2013 at 9:05 PM, Donovan Cameron <sault.don at gmail.com>
>> wrote:
>> > I can't seem to compile GDAL with FileGDB support on openSUSE.
>> > I'm compiling locally using the OBS tools (osc) and have checked-out
>> > the libgdal package from the Application:Geo project.
>> >
>> > Steps I've taken:
>> >
>> > 1) Download FileGDB_API_1_2-64.tar.gz
>> >
>> > 2) tar xzvf FileGDB_API_1_2-64.tar.gz -C /usr/lib64/
>> >
>> > 3) export LD_LIBRARY_PATH=/usr/lib64/FileGDB_API/lib
>> > cd /usr/lib64/FileGDB_API/samples
>> > make
>> > cd bin
>> > ./Querying #Works, so the API is fine.
>> >
>> > 4) su -
>> > $ vi /etc/ld.so.conf.d/fgdb.conf #Added a single entry:
>> > /usr/lib64/FileGDB_API/lib
>> > $ ldconfig #A grep of this with the -v flag shows it registered fine
>> >
>> > 5) #Some openSUSE specific stuff, b/c I'm building locally via the OBS
>> > $ zypper in osc
>> > cd /home/saultdon/Development/obs
>> > osc co Application:Geo libgdal
>> > cd Application:Geo/libgdal
>> > vi libgdal.spec #added "--with-fgdb=/usr/lib64/FileGDB_API" in
>> > %configure section
>> > #I also did a test build without that configure param. first and it
>> > compiled fine with working RPMs
>> > osc build openSUSE_12.2 x86_64 libgdal.spec --clean
>> >
>> > Resulting Error:
>> > [  209s] checking for libFileGDBAPI.so in in
>> > /usr/lib64/FileGDB_API/lib... configure: error: not found.
>> > [  209s] error: Bad exit status from /var/tmp/rpm-tmp.7SOa8g (%build)
>> > [  209s] RPM build errors:
>> > [  209s] Bad exit status from /var/tmp/rpm-tmp.7SOa8g (%build)
>> > The buildroot was: /var/tmp/build-root
>> >
>> > libFileGDBAPI.so file exists, ldconfig registered it, and the API test
>> > worked fine, the env. var. LD_LIBRARY_PATH is also set, but I don't
>> > even think that's necessary. I only had to set that to get the API
>> > test to work.
>> >
>> > I'm not sure where this is going wrong. If anyone has any input or
>> > needs more information, let me know.
>> >
>> >
>> > Thanks!
>> >
>> >
>> > Donovan
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

From sault.don at gmail.com  Fri Jan 25 12:54:17 2013
From: sault.don at gmail.com (Donovan Cameron)
Date: Fri, 25 Jan 2013 13:54:17 -0700
Subject: [gdal-dev] libFileGDBAPI.so not found with compiling gdal 1.9.2
 on openSUSE 12.2 x64.
In-Reply-To: <CAJo0jfMqTuXJ9Et+mbWv5MC2mu_WY=jkF4jtjV751RBRe=MUDg@mail.gmail.com>
References: <CAJo0jfOyMcPE3aSq17o-cYpO+uAXSAXxbvfroJwL1tGD_J=b5w@mail.gmail.com>
	<CAJo0jfMfd0r=yC7QHccVXRE5WQSf+g7+HG4AEG07EaGt0aNp5w@mail.gmail.com>
	<CAKMUAtAr3YWEeYZ4NVaJ9M=f2kUroJ=D-yDoWgdWjesEVW-=HQ@mail.gmail.com>
	<CAJo0jfMqTuXJ9Et+mbWv5MC2mu_WY=jkF4jtjV751RBRe=MUDg@mail.gmail.com>
Message-ID: <CAJo0jfNc9B2aomOro_saTftamVNsPyG_WjrGw0b2SWfteAKmww@mail.gmail.com>

I've tested compiling the 64bit gdal-1.9.2 from the tar.gz source file:

./configure --with-fgdb=/usr/lib64/FileGDB_API

And it completes successfully where I can see the FileGDB driver
read/write format in the output of ogrinfo --formats.

There must be something in this SPEC file that is causing a conflict
so that that the .so for the FileGDB driver can't be found, even after
it's registered with ldconfig.

On Fri, Jan 25, 2013 at 11:05 AM, Donovan Cameron <sault.don at gmail.com> wrote:
> Thanks for the suggestion Jan.
>
> I tried to compile the 32-bit libgdal with the 32bit FileGDB_API but
> still throws the same error...
> Is it possible that the osc tool is looking inside it's build
> environment at /tmp or /usr/tmp instead of my local user files at
> /usr/lib64?
>
> I might take this problem to the package maintainer for libgdal on
> openSUSE 12.2 to see if they have attempted to compile with FileGDB
> support.
>
> On Fri, Jan 25, 2013 at 1:19 AM, Jan Heckman <jan.heckman at gmail.com> wrote:
>> Hi,
>> On windows, using visual studio (2008 and 2012), I could compile both 32
>> bits and 64 bits, but only the 32 bits version actually worked.
>> I haven't tried to figure out why the 64 bits version didn't work, 32 bits
>> was good enough for me.
>> Hope this is an option for you as well,
>> Jan
>>
>> On Fri, Jan 25, 2013 at 5:23 AM, Donovan Cameron <sault.don at gmail.com>
>> wrote:
>>>
>>> Looks like over in the [qgis-user] list, someone is having similar
>>> problems:
>>> https://groups.google.com/d/msg/qgis_user_remote/B2J9sOsSLbo/BIpAHZ84bhgJ
>>>
>>> On Thu, Jan 24, 2013 at 9:05 PM, Donovan Cameron <sault.don at gmail.com>
>>> wrote:
>>> > I can't seem to compile GDAL with FileGDB support on openSUSE.
>>> > I'm compiling locally using the OBS tools (osc) and have checked-out
>>> > the libgdal package from the Application:Geo project.
>>> >
>>> > Steps I've taken:
>>> >
>>> > 1) Download FileGDB_API_1_2-64.tar.gz
>>> >
>>> > 2) tar xzvf FileGDB_API_1_2-64.tar.gz -C /usr/lib64/
>>> >
>>> > 3) export LD_LIBRARY_PATH=/usr/lib64/FileGDB_API/lib
>>> > cd /usr/lib64/FileGDB_API/samples
>>> > make
>>> > cd bin
>>> > ./Querying #Works, so the API is fine.
>>> >
>>> > 4) su -
>>> > $ vi /etc/ld.so.conf.d/fgdb.conf #Added a single entry:
>>> > /usr/lib64/FileGDB_API/lib
>>> > $ ldconfig #A grep of this with the -v flag shows it registered fine
>>> >
>>> > 5) #Some openSUSE specific stuff, b/c I'm building locally via the OBS
>>> > $ zypper in osc
>>> > cd /home/saultdon/Development/obs
>>> > osc co Application:Geo libgdal
>>> > cd Application:Geo/libgdal
>>> > vi libgdal.spec #added "--with-fgdb=/usr/lib64/FileGDB_API" in
>>> > %configure section
>>> > #I also did a test build without that configure param. first and it
>>> > compiled fine with working RPMs
>>> > osc build openSUSE_12.2 x86_64 libgdal.spec --clean
>>> >
>>> > Resulting Error:
>>> > [  209s] checking for libFileGDBAPI.so in in
>>> > /usr/lib64/FileGDB_API/lib... configure: error: not found.
>>> > [  209s] error: Bad exit status from /var/tmp/rpm-tmp.7SOa8g (%build)
>>> > [  209s] RPM build errors:
>>> > [  209s] Bad exit status from /var/tmp/rpm-tmp.7SOa8g (%build)
>>> > The buildroot was: /var/tmp/build-root
>>> >
>>> > libFileGDBAPI.so file exists, ldconfig registered it, and the API test
>>> > worked fine, the env. var. LD_LIBRARY_PATH is also set, but I don't
>>> > even think that's necessary. I only had to set that to get the API
>>> > test to work.
>>> >
>>> > I'm not sure where this is going wrong. If anyone has any input or
>>> > needs more information, let me know.
>>> >
>>> >
>>> > Thanks!
>>> >
>>> >
>>> > Donovan
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>

From sault.don at gmail.com  Fri Jan 25 13:34:52 2013
From: sault.don at gmail.com (Donovan Cameron)
Date: Fri, 25 Jan 2013 14:34:52 -0700
Subject: [gdal-dev] libFileGDBAPI.so not found with compiling gdal 1.9.2
 on openSUSE 12.2 x64.
In-Reply-To: <CAJo0jfNc9B2aomOro_saTftamVNsPyG_WjrGw0b2SWfteAKmww@mail.gmail.com>
References: <CAJo0jfOyMcPE3aSq17o-cYpO+uAXSAXxbvfroJwL1tGD_J=b5w@mail.gmail.com>
	<CAJo0jfMfd0r=yC7QHccVXRE5WQSf+g7+HG4AEG07EaGt0aNp5w@mail.gmail.com>
	<CAKMUAtAr3YWEeYZ4NVaJ9M=f2kUroJ=D-yDoWgdWjesEVW-=HQ@mail.gmail.com>
	<CAJo0jfMqTuXJ9Et+mbWv5MC2mu_WY=jkF4jtjV751RBRe=MUDg@mail.gmail.com>
	<CAJo0jfNc9B2aomOro_saTftamVNsPyG_WjrGw0b2SWfteAKmww@mail.gmail.com>
Message-ID: <CAJo0jfMa=NutOsKmTc_+8UhbU+HDKhbwVE9+32cQ13Ud=qxqYA@mail.gmail.com>

My buildlog from "osc build openSUSE_12.2 x86_64 libgdal.spec --clean" if
it helps.

http://paste.opensuse.org/view/raw/e119c82d


On Fri, Jan 25, 2013 at 1:54 PM, Donovan Cameron <sault.don at gmail.com>wrote:

> I've tested compiling the 64bit gdal-1.9.2 from the tar.gz source file:
>
> ./configure --with-fgdb=/usr/lib64/FileGDB_API
>
> And it completes successfully where I can see the FileGDB driver
> read/write format in the output of ogrinfo --formats.
>
> There must be something in this SPEC file that is causing a conflict
> so that that the .so for the FileGDB driver can't be found, even after
> it's registered with ldconfig.
>
> On Fri, Jan 25, 2013 at 11:05 AM, Donovan Cameron <sault.don at gmail.com>
> wrote:
> > Thanks for the suggestion Jan.
> >
> > I tried to compile the 32-bit libgdal with the 32bit FileGDB_API but
> > still throws the same error...
> > Is it possible that the osc tool is looking inside it's build
> > environment at /tmp or /usr/tmp instead of my local user files at
> > /usr/lib64?
> >
> > I might take this problem to the package maintainer for libgdal on
> > openSUSE 12.2 to see if they have attempted to compile with FileGDB
> > support.
> >
> > On Fri, Jan 25, 2013 at 1:19 AM, Jan Heckman <jan.heckman at gmail.com>
> wrote:
> >> Hi,
> >> On windows, using visual studio (2008 and 2012), I could compile both 32
> >> bits and 64 bits, but only the 32 bits version actually worked.
> >> I haven't tried to figure out why the 64 bits version didn't work, 32
> bits
> >> was good enough for me.
> >> Hope this is an option for you as well,
> >> Jan
> >>
> >> On Fri, Jan 25, 2013 at 5:23 AM, Donovan Cameron <sault.don at gmail.com>
> >> wrote:
> >>>
> >>> Looks like over in the [qgis-user] list, someone is having similar
> >>> problems:
> >>>
> https://groups.google.com/d/msg/qgis_user_remote/B2J9sOsSLbo/BIpAHZ84bhgJ
> >>>
> >>> On Thu, Jan 24, 2013 at 9:05 PM, Donovan Cameron <sault.don at gmail.com>
> >>> wrote:
> >>> > I can't seem to compile GDAL with FileGDB support on openSUSE.
> >>> > I'm compiling locally using the OBS tools (osc) and have checked-out
> >>> > the libgdal package from the Application:Geo project.
> >>> >
> >>> > Steps I've taken:
> >>> >
> >>> > 1) Download FileGDB_API_1_2-64.tar.gz
> >>> >
> >>> > 2) tar xzvf FileGDB_API_1_2-64.tar.gz -C /usr/lib64/
> >>> >
> >>> > 3) export LD_LIBRARY_PATH=/usr/lib64/FileGDB_API/lib
> >>> > cd /usr/lib64/FileGDB_API/samples
> >>> > make
> >>> > cd bin
> >>> > ./Querying #Works, so the API is fine.
> >>> >
> >>> > 4) su -
> >>> > $ vi /etc/ld.so.conf.d/fgdb.conf #Added a single entry:
> >>> > /usr/lib64/FileGDB_API/lib
> >>> > $ ldconfig #A grep of this with the -v flag shows it registered fine
> >>> >
> >>> > 5) #Some openSUSE specific stuff, b/c I'm building locally via the
> OBS
> >>> > $ zypper in osc
> >>> > cd /home/saultdon/Development/obs
> >>> > osc co Application:Geo libgdal
> >>> > cd Application:Geo/libgdal
> >>> > vi libgdal.spec #added "--with-fgdb=/usr/lib64/FileGDB_API" in
> >>> > %configure section
> >>> > #I also did a test build without that configure param. first and it
> >>> > compiled fine with working RPMs
> >>> > osc build openSUSE_12.2 x86_64 libgdal.spec --clean
> >>> >
> >>> > Resulting Error:
> >>> > [  209s] checking for libFileGDBAPI.so in in
> >>> > /usr/lib64/FileGDB_API/lib... configure: error: not found.
> >>> > [  209s] error: Bad exit status from /var/tmp/rpm-tmp.7SOa8g (%build)
> >>> > [  209s] RPM build errors:
> >>> > [  209s] Bad exit status from /var/tmp/rpm-tmp.7SOa8g (%build)
> >>> > The buildroot was: /var/tmp/build-root
> >>> >
> >>> > libFileGDBAPI.so file exists, ldconfig registered it, and the API
> test
> >>> > worked fine, the env. var. LD_LIBRARY_PATH is also set, but I don't
> >>> > even think that's necessary. I only had to set that to get the API
> >>> > test to work.
> >>> >
> >>> > I'm not sure where this is going wrong. If anyone has any input or
> >>> > needs more information, let me know.
> >>> >
> >>> >
> >>> > Thanks!
> >>> >
> >>> >
> >>> > Donovan
> >>> _______________________________________________
> >>> gdal-dev mailing list
> >>> gdal-dev at lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130125/a10c4e08/attachment.html>

From gcpp.kalxas at gmail.com  Fri Jan 25 14:57:17 2013
From: gcpp.kalxas at gmail.com (Angelos Tzotsos)
Date: Sat, 26 Jan 2013 00:57:17 +0200
Subject: [gdal-dev] libFileGDBAPI.so not found with compiling gdal 1.9.2
 on openSUSE 12.2 x64.
In-Reply-To: <CAJo0jfMa=NutOsKmTc_+8UhbU+HDKhbwVE9+32cQ13Ud=qxqYA@mail.gmail.com>
References: <CAJo0jfOyMcPE3aSq17o-cYpO+uAXSAXxbvfroJwL1tGD_J=b5w@mail.gmail.com>
	<CAJo0jfMfd0r=yC7QHccVXRE5WQSf+g7+HG4AEG07EaGt0aNp5w@mail.gmail.com>
	<CAKMUAtAr3YWEeYZ4NVaJ9M=f2kUroJ=D-yDoWgdWjesEVW-=HQ@mail.gmail.com>
	<CAJo0jfMqTuXJ9Et+mbWv5MC2mu_WY=jkF4jtjV751RBRe=MUDg@mail.gmail.com>
	<CAJo0jfNc9B2aomOro_saTftamVNsPyG_WjrGw0b2SWfteAKmww@mail.gmail.com>
	<CAJo0jfMa=NutOsKmTc_+8UhbU+HDKhbwVE9+32cQ13Ud=qxqYA@mail.gmail.com>
Message-ID: <51030DCD.7000708@gmail.com>

Hi Donovan,

This approach will not work.

OpenBuildService (OBS) is a system to automate builds and create 
packages, and we are using it to
http://openbuildservice.org/

openSUSE Build Service is a deployment of OBS that we are using to 
produce openSUSE distribution
https://build.opensuse.org/

The root of your problem:

OBS builds packages in an isolated environment (chroot or kvm virtual 
machines where network is not accessible).
In order to satisfy dependencies, those have to be already packaged and 
get pre-installed on the chroot environment (or vm) as specified by the 
"Requires:" and "BuildRequires:" sections of the spec file.
This is made in order to CONFIRM that everything that is needed to build 
the new rpm package is already included in the distribution and that the 
source code is available for it.
On the openSUSE Build Service (including Application:Geo repository) it 
is FORBIDDEN to upload binaries, only source code is permitted. This is 
done to confirm that our distribution can be built completely from 
source code.
OBS is Open Source and if you want to build non open source stuff you 
can deploy it on your own server, no problem there.

The specifics of your problem:

It is correct to use ./configure --with-fgdb=/usr/lib64/FIleGDB_API  but 
the problem is that these files have to be installed inside the chroot 
environment.
You have 2 options:
1. Create an RPM for the GDB_API and make a "BuildRequires" statement in 
the spec file to pull it in the build environment
2. Include the original tar.gz files on your spec file and move around 
files in correct places before the configure command

I hope this helps.

Best,
Angelos


On 01/25/2013 11:34 PM, Donovan Cameron wrote:
> My buildlog from "osc build openSUSE_12.2 x86_64 libgdal.spec --clean" if
> it helps.
>
> http://paste.opensuse.org/view/raw/e119c82d
>
>
> On Fri, Jan 25, 2013 at 1:54 PM, Donovan Cameron <sault.don at gmail.com>wrote:
>
>> I've tested compiling the 64bit gdal-1.9.2 from the tar.gz source file:
>>
>> ./configure --with-fgdb=/usr/lib64/FileGDB_API
>>
>> And it completes successfully where I can see the FileGDB driver
>> read/write format in the output of ogrinfo --formats.
>>
>> There must be something in this SPEC file that is causing a conflict
>> so that that the .so for the FileGDB driver can't be found, even after
>> it's registered with ldconfig.
>>
>> On Fri, Jan 25, 2013 at 11:05 AM, Donovan Cameron <sault.don at gmail.com>
>> wrote:
>>> Thanks for the suggestion Jan.
>>>
>>> I tried to compile the 32-bit libgdal with the 32bit FileGDB_API but
>>> still throws the same error...
>>> Is it possible that the osc tool is looking inside it's build
>>> environment at /tmp or /usr/tmp instead of my local user files at
>>> /usr/lib64?
>>>
>>> I might take this problem to the package maintainer for libgdal on
>>> openSUSE 12.2 to see if they have attempted to compile with FileGDB
>>> support.
>>>
>>> On Fri, Jan 25, 2013 at 1:19 AM, Jan Heckman <jan.heckman at gmail.com>
>> wrote:
>>>> Hi,
>>>> On windows, using visual studio (2008 and 2012), I could compile both 32
>>>> bits and 64 bits, but only the 32 bits version actually worked.
>>>> I haven't tried to figure out why the 64 bits version didn't work, 32
>> bits
>>>> was good enough for me.
>>>> Hope this is an option for you as well,
>>>> Jan
>>>>
>>>> On Fri, Jan 25, 2013 at 5:23 AM, Donovan Cameron <sault.don at gmail.com>
>>>> wrote:
>>>>> Looks like over in the [qgis-user] list, someone is having similar
>>>>> problems:
>>>>>
>> https://groups.google.com/d/msg/qgis_user_remote/B2J9sOsSLbo/BIpAHZ84bhgJ
>>>>> On Thu, Jan 24, 2013 at 9:05 PM, Donovan Cameron <sault.don at gmail.com>
>>>>> wrote:
>>>>>> I can't seem to compile GDAL with FileGDB support on openSUSE.
>>>>>> I'm compiling locally using the OBS tools (osc) and have checked-out
>>>>>> the libgdal package from the Application:Geo project.
>>>>>>
>>>>>> Steps I've taken:
>>>>>>
>>>>>> 1) Download FileGDB_API_1_2-64.tar.gz
>>>>>>
>>>>>> 2) tar xzvf FileGDB_API_1_2-64.tar.gz -C /usr/lib64/
>>>>>>
>>>>>> 3) export LD_LIBRARY_PATH=/usr/lib64/FileGDB_API/lib
>>>>>> cd /usr/lib64/FileGDB_API/samples
>>>>>> make
>>>>>> cd bin
>>>>>> ./Querying #Works, so the API is fine.
>>>>>>
>>>>>> 4) su -
>>>>>> $ vi /etc/ld.so.conf.d/fgdb.conf #Added a single entry:
>>>>>> /usr/lib64/FileGDB_API/lib
>>>>>> $ ldconfig #A grep of this with the -v flag shows it registered fine
>>>>>>
>>>>>> 5) #Some openSUSE specific stuff, b/c I'm building locally via the
>> OBS
>>>>>> $ zypper in osc
>>>>>> cd /home/saultdon/Development/obs
>>>>>> osc co Application:Geo libgdal
>>>>>> cd Application:Geo/libgdal
>>>>>> vi libgdal.spec #added "--with-fgdb=/usr/lib64/FileGDB_API" in
>>>>>> %configure section
>>>>>> #I also did a test build without that configure param. first and it
>>>>>> compiled fine with working RPMs
>>>>>> osc build openSUSE_12.2 x86_64 libgdal.spec --clean
>>>>>>
>>>>>> Resulting Error:
>>>>>> [  209s] checking for libFileGDBAPI.so in in
>>>>>> /usr/lib64/FileGDB_API/lib... configure: error: not found.
>>>>>> [  209s] error: Bad exit status from /var/tmp/rpm-tmp.7SOa8g (%build)
>>>>>> [  209s] RPM build errors:
>>>>>> [  209s] Bad exit status from /var/tmp/rpm-tmp.7SOa8g (%build)
>>>>>> The buildroot was: /var/tmp/build-root
>>>>>>
>>>>>> libFileGDBAPI.so file exists, ldconfig registered it, and the API
>> test
>>>>>> worked fine, the env. var. LD_LIBRARY_PATH is also set, but I don't
>>>>>> even think that's necessary. I only had to set that to get the API
>>>>>> test to work.
>>>>>>
>>>>>> I'm not sure where this is going wrong. If anyone has any input or
>>>>>> needs more information, let me know.
>>>>>>
>>>>>>
>>>>>> Thanks!
>>>>>>
>>>>>>
>>>>>> Donovan
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Angelos Tzotsos
Remote Sensing Laboratory
National Technical University of Athens
http://users.ntua.gr/tzotsos

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130126/1e79c8e8/attachment-0001.html>

From sault.don at gmail.com  Fri Jan 25 15:34:39 2013
From: sault.don at gmail.com (Donovan Cameron)
Date: Fri, 25 Jan 2013 16:34:39 -0700
Subject: [gdal-dev] libFileGDBAPI.so not found with compiling gdal 1.9.2
 on openSUSE 12.2 x64.
In-Reply-To: <51030DCD.7000708@gmail.com>
References: <CAJo0jfOyMcPE3aSq17o-cYpO+uAXSAXxbvfroJwL1tGD_J=b5w@mail.gmail.com>
	<CAJo0jfMfd0r=yC7QHccVXRE5WQSf+g7+HG4AEG07EaGt0aNp5w@mail.gmail.com>
	<CAKMUAtAr3YWEeYZ4NVaJ9M=f2kUroJ=D-yDoWgdWjesEVW-=HQ@mail.gmail.com>
	<CAJo0jfMqTuXJ9Et+mbWv5MC2mu_WY=jkF4jtjV751RBRe=MUDg@mail.gmail.com>
	<CAJo0jfNc9B2aomOro_saTftamVNsPyG_WjrGw0b2SWfteAKmww@mail.gmail.com>
	<CAJo0jfMa=NutOsKmTc_+8UhbU+HDKhbwVE9+32cQ13Ud=qxqYA@mail.gmail.com>
	<51030DCD.7000708@gmail.com>
Message-ID: <CAJo0jfMoBb9p3fpg4ONYwFRrAbwzY6Q0pcV=RwQBnzGXxd-Dcg@mail.gmail.com>

When I check-out the libgdal package and I run the osc build command, isn't
this building locally and not trying to *upload *any binaries? I thought
this chroot was in my local machine and only making changes there?

I was trying to keep this all a local build by following the instructions
at: https://en.opensuse.org/openSUSE:Build_Service_Tutorial maybe I
misunderstood what "local" really means. Should I not be using osc to build
this and instead use the rpmbuild commands directly?

I'll explore those two options you've suggested, I was trying to do option
2, but kept running into permission issues when the source tarball for the
API was being extracted to the chroot environment at /usr/lib64 with
permission denied.

I'll read more on this stuff, thanks again.


I think I just need to read more on how to handle user permissions in the
spec file, so I'll take some time to read some more docs on bundling RPMs
from spec files.


On Fri, Jan 25, 2013 at 3:57 PM, Angelos Tzotsos <gcpp.kalxas at gmail.com>wrote:

>  Hi Donovan,
>
> This approach will not work.
>
> OpenBuildService (OBS) is a system to automate builds and create packages,
> and we are using it to
> http://openbuildservice.org/
>
> openSUSE Build Service is a deployment of OBS that we are using to produce
> openSUSE distribution
> https://build.opensuse.org/
>
> The root of your problem:
>
> OBS builds packages in an isolated environment (chroot or kvm virtual
> machines where network is not accessible).
> In order to satisfy dependencies, those have to be already packaged and
> get pre-installed on the chroot environment (or vm) as specified by the
> "Requires:" and "BuildRequires:" sections of the spec file.
> This is made in order to CONFIRM that everything that is needed to build
> the new rpm package is already included in the distribution and that the
> source code is available for it.
> On the openSUSE Build Service (including Application:Geo repository) it is
> FORBIDDEN to upload binaries, only source code is permitted. This is done
> to confirm that our distribution can be built completely from source code.
> OBS is Open Source and if you want to build non open source stuff you can
> deploy it on your own server, no problem there.
>
> The specifics of your problem:
>
> It is correct to use ./configure --with-fgdb=/usr/lib64/FIleGDB_API  but
> the problem is that these files have to be installed inside the chroot
> environment.
> You have 2 options:
> 1. Create an RPM for the GDB_API and make a "BuildRequires" statement in
> the spec file to pull it in the build environment
> 2. Include the original tar.gz files on your spec file and move around
> files in correct places before the configure command
>
> I hope this helps.
>
> Best,
> Angelos
>
>
>
> On 01/25/2013 11:34 PM, Donovan Cameron wrote:
>
> My buildlog from "osc build openSUSE_12.2 x86_64 libgdal.spec --clean" if
> it helps.
> http://paste.opensuse.org/view/raw/e119c82d
>
>
> On Fri, Jan 25, 2013 at 1:54 PM, Donovan Cameron <sault.don at gmail.com> <sault.don at gmail.com>wrote:
>
>
>  I've tested compiling the 64bit gdal-1.9.2 from the tar.gz source file:
>
> ./configure --with-fgdb=/usr/lib64/FileGDB_API
>
> And it completes successfully where I can see the FileGDB driver
> read/write format in the output of ogrinfo --formats.
>
> There must be something in this SPEC file that is causing a conflict
> so that that the .so for the FileGDB driver can't be found, even after
> it's registered with ldconfig.
>
> On Fri, Jan 25, 2013 at 11:05 AM, Donovan Cameron <sault.don at gmail.com> <sault.don at gmail.com>
> wrote:
>
>  Thanks for the suggestion Jan.
>
> I tried to compile the 32-bit libgdal with the 32bit FileGDB_API but
> still throws the same error...
> Is it possible that the osc tool is looking inside it's build
> environment at /tmp or /usr/tmp instead of my local user files at
> /usr/lib64?
>
> I might take this problem to the package maintainer for libgdal on
> openSUSE 12.2 to see if they have attempted to compile with FileGDB
> support.
>
> On Fri, Jan 25, 2013 at 1:19 AM, Jan Heckman <jan.heckman at gmail.com> <jan.heckman at gmail.com>
>
>  wrote:
>
>  Hi,
> On windows, using visual studio (2008 and 2012), I could compile both 32
> bits and 64 bits, but only the 32 bits version actually worked.
> I haven't tried to figure out why the 64 bits version didn't work, 32
>
>  bits
>
>  was good enough for me.
> Hope this is an option for you as well,
> Jan
>
> On Fri, Jan 25, 2013 at 5:23 AM, Donovan Cameron <sault.don at gmail.com> <sault.don at gmail.com>
> wrote:
>
>  Looks like over in the [qgis-user] list, someone is having similar
> problems:
>
>
>   https://groups.google.com/d/msg/qgis_user_remote/B2J9sOsSLbo/BIpAHZ84bhgJ
>
>   On Thu, Jan 24, 2013 at 9:05 PM, Donovan Cameron <sault.don at gmail.com> <sault.don at gmail.com>
> wrote:
>
>  I can't seem to compile GDAL with FileGDB support on openSUSE.
> I'm compiling locally using the OBS tools (osc) and have checked-out
> the libgdal package from the Application:Geo project.
>
> Steps I've taken:
>
> 1) Download FileGDB_API_1_2-64.tar.gz
>
> 2) tar xzvf FileGDB_API_1_2-64.tar.gz -C /usr/lib64/
>
> 3) export LD_LIBRARY_PATH=/usr/lib64/FileGDB_API/lib
> cd /usr/lib64/FileGDB_API/samples
> make
> cd bin
> ./Querying #Works, so the API is fine.
>
> 4) su -
> $ vi /etc/ld.so.conf.d/fgdb.conf #Added a single entry:
> /usr/lib64/FileGDB_API/lib
> $ ldconfig #A grep of this with the -v flag shows it registered fine
>
> 5) #Some openSUSE specific stuff, b/c I'm building locally via the
>
>   OBS
>
>   $ zypper in osc
> cd /home/saultdon/Development/obs
> osc co Application:Geo libgdal
> cd Application:Geo/libgdal
> vi libgdal.spec #added "--with-fgdb=/usr/lib64/FileGDB_API" in
> %configure section
> #I also did a test build without that configure param. first and it
> compiled fine with working RPMs
> osc build openSUSE_12.2 x86_64 libgdal.spec --clean
>
> Resulting Error:
> [  209s] checking for libFileGDBAPI.so in in
> /usr/lib64/FileGDB_API/lib... configure: error: not found.
> [  209s] error: Bad exit status from /var/tmp/rpm-tmp.7SOa8g (%build)
> [  209s] RPM build errors:
> [  209s] Bad exit status from /var/tmp/rpm-tmp.7SOa8g (%build)
> The buildroot was: /var/tmp/build-root
>
> libFileGDBAPI.so file exists, ldconfig registered it, and the API
>
>   test
>
>   worked fine, the env. var. LD_LIBRARY_PATH is also set, but I don't
> even think that's necessary. I only had to set that to get the API
> test to work.
>
> I'm not sure where this is going wrong. If anyone has any input or
> needs more information, let me know.
>
>
> Thanks!
>
>
> Donovan
>
>  _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Angelos Tzotsos
> Remote Sensing Laboratory
> National Technical University of Athenshttp://users.ntua.gr/tzotsos
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130125/e8184c6c/attachment.html>

From gcpp.kalxas at gmail.com  Fri Jan 25 18:04:26 2013
From: gcpp.kalxas at gmail.com (Angelos Tzotsos)
Date: Sat, 26 Jan 2013 04:04:26 +0200
Subject: [gdal-dev] libFileGDBAPI.so not found with compiling gdal 1.9.2
 on openSUSE 12.2 x64.
In-Reply-To: <CAJo0jfMoBb9p3fpg4ONYwFRrAbwzY6Q0pcV=RwQBnzGXxd-Dcg@mail.gmail.com>
References: <CAJo0jfOyMcPE3aSq17o-cYpO+uAXSAXxbvfroJwL1tGD_J=b5w@mail.gmail.com>
	<CAJo0jfMfd0r=yC7QHccVXRE5WQSf+g7+HG4AEG07EaGt0aNp5w@mail.gmail.com>
	<CAKMUAtAr3YWEeYZ4NVaJ9M=f2kUroJ=D-yDoWgdWjesEVW-=HQ@mail.gmail.com>
	<CAJo0jfMqTuXJ9Et+mbWv5MC2mu_WY=jkF4jtjV751RBRe=MUDg@mail.gmail.com>
	<CAJo0jfNc9B2aomOro_saTftamVNsPyG_WjrGw0b2SWfteAKmww@mail.gmail.com>
	<CAJo0jfMa=NutOsKmTc_+8UhbU+HDKhbwVE9+32cQ13Ud=qxqYA@mail.gmail.com>
	<51030DCD.7000708@gmail.com>
	<CAJo0jfMoBb9p3fpg4ONYwFRrAbwzY6Q0pcV=RwQBnzGXxd-Dcg@mail.gmail.com>
Message-ID: <510339AA.6070306@gmail.com>

Hi Donovan,

comments inline:

On 01/26/2013 01:34 AM, Donovan Cameron wrote:
> When I check-out the libgdal package and I run the osc build command, isn't
> this building locally and not trying to *upload *any binaries? I thought
> this chroot was in my local machine and only making changes there?
Yes this chroot is local when you use osc build command. Be careful not 
to push your changes though.
Those local rpms can be saved and used, no problem.
>
> I was trying to keep this all a local build by following the instructions
> at: https://en.opensuse.org/openSUSE:Build_Service_Tutorial maybe I
> misunderstood what "local" really means. Should I not be using osc to build
> this and instead use the rpmbuild commands directly?
As long as you don't push proprietary binaries to OBS it is ok to build 
locally.
>
> I'll explore those two options you've suggested, I was trying to do option
> 2, but kept running into permission issues when the source tarball for the
> API was being extracted to the chroot environment at /usr/lib64 with
> permission denied.
I would suggest to create a spec file that installs that API, build 
locally and then require that rpm for your local gdal build.

>
> I'll read more on this stuff, thanks again.
You are welcome :)
>
>
> I think I just need to read more on how to handle user permissions in the
> spec file, so I'll take some time to read some more docs on bundling RPMs
> from spec files.
>
>
>
Cheers,
Angelos

-- 
Angelos Tzotsos
Remote Sensing Laboratory
National Technical University of Athens
http://users.ntua.gr/tzotsos


From silyko at gmail.com  Mon Jan 28 07:01:54 2013
From: silyko at gmail.com (Simon Lyngby Kokkendorff)
Date: Mon, 28 Jan 2013 16:01:54 +0100
Subject: [gdal-dev] char **papszOptions NULL terminated?
Message-ID: <CANzGYpT92CoiL6E7sRJe9sVEtev1EMCDuAY+DJeANn1DbFk6_w@mail.gmail.com>

Hi List,

  I guess that a list of creation options (key=value pairs as a char** )
is  supposed to be NULL-teminated (in e.g. OGR_Dr_CreateDataSource etc.) ?
It might be obvious, at least it doesn't seem to be stated explicitly in
the documentation in http://www.gdal.org/ogr/ogr__api_8h.html

  Best regards,
  Simon Kokkendorff, National Geodata Agency of Denmark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130128/cf838247/attachment.html>

From jluis at ualg.pt  Mon Jan 28 07:41:16 2013
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon, 28 Jan 2013 15:41:16 +0000
Subject: [gdal-dev] fails to build with popler trunk
Message-ID: <51069C1C.7020702@ualg.pt>

Hi,

FYI
I tried to build (on Windows) with poppler trunk but got the errors 
below, so had to go back to my working 0.20.0 version.

If wished, I can open a ticket on this issue.

Joaquim


c:\programs\gdaltrunk\gdal\frmts\pdf\pdfio.h(112) : error C2555: 
'VSIPDFFileStream::getPos': overriding virtual function return type differs
and is not covariant from 'Stream::getPos'
         C:/programs/compa_libs/poppler_GIT\poppler/Stream.h(188) : see 
declaration of 'Stream::getPos'
c:\programs\gdaltrunk\gdal\frmts\pdf\pdfio.h(112) : error C2555: 
'VSIPDFFileStream::getStart': overriding virtual function return type 
differs and is not covariant from 'BaseStream::getStart'
         C:/programs/compa_libs/poppler_GIT\poppler/Stream.h(319) : see 
declaration of 'BaseStream::getStart'
c:\programs\compa_libs\poppler_git\poppler\GfxState.h(105) : warning 
C4244: 'return' : conversion from 'double' to 'Guchar', possible loss of 
data
pdfdataset.cpp(134) : error C2660: 'SplashOutputDev::startPage' : 
function does not take 2 arguments
pdfdataset.cpp(178) : error C2039: 'deviceHasTextClip' : is not a member 
of 'SplashOutputDev'
         
C:/programs/compa_libs/poppler_GIT\poppler/SplashOutputDev.h(159) : see 
declaration of 'SplashOutputDev'
pdfdataset.cpp(2783) : error C2664: 'setErrorCallback' : cannot convert 
parameter 1 from 'void (__cdecl *)(void *,ErrorCategory,int,char *)'
to 'void (__cdecl *)(void *,ErrorCategory,Goffset,char *)'
         None of the functions with this name in scope match the target type
pdfdataset.cpp(2810) : error C2259: 'VSIPDFFileStream' : cannot 
instantiate abstract class
         due to following members:
         'void BaseStream::setPos(Goffset,int)' : is abstract
         c:\programs\compa_libs\poppler_git\poppler\Stream.h(310) : see 
declaration of 'BaseStream::setPos'
         'BaseStream *BaseStream::copy(void)' : is abstract
         c:\programs\compa_libs\poppler_git\poppler\Stream.h(307) : see 
declaration of 'BaseStream::copy'
         'Stream *BaseStream::makeSubStream(Goffset,GBool,Goffset,Object 
*)' : is abstract
         c:\programs\compa_libs\poppler_git\poppler\Stream.h(308) : see 
declaration of 'BaseStream::makeSubStream'
         'void BaseStream::moveStart(Goffset)' : is abstract
         c:\programs\compa_libs\poppler_git\poppler\Stream.h(320) : see 
declaration of 'BaseStream::moveStart'
pdfio.cpp
c:\programs\compa_libs\poppler_git\poppler\Stream.h(122) : warning 
C4244: '=' : conversion from 'const int' to 'Guchar', possible loss of data
c:\programs\gdaltrunk\gdal\frmts\pdf\pdfio.h(112) : error C2555: 
'VSIPDFFileStream::getPos': overriding virtual function return type differs
and is not covariant from 'Stream::getPos'
         C:/programs/compa_libs/poppler_GIT\poppler/Stream.h(188) : see 
declaration of 'Stream::getPos'
c:\programs\gdaltrunk\gdal\frmts\pdf\pdfio.h(112) : error C2555: 
'VSIPDFFileStream::getStart': overriding virtual function return type 
differs and is not covariant from 'BaseStream::getStart'
         C:/programs/compa_libs/poppler_GIT\poppler/Stream.h(319) : see 
declaration of 'BaseStream::getStart'
pdfio.cpp(124) : error C2259: 'VSIPDFFileStream' : cannot instantiate 
abstract class
         due to following members:
         'void BaseStream::setPos(Goffset,int)' : is abstract
         C:/programs/compa_libs/poppler_GIT\poppler/Stream.h(310) : see 
declaration of 'BaseStream::setPos'
         'BaseStream *BaseStream::copy(void)' : is abstract
         C:/programs/compa_libs/poppler_GIT\poppler/Stream.h(307) : see 
declaration of 'BaseStream::copy'
         'Stream *BaseStream::makeSubStream(Goffset,GBool,Goffset,Object 
*)' : is abstract
         C:/programs/compa_libs/poppler_GIT\poppler/Stream.h(308) : see 
declaration of 'BaseStream::makeSubStream'
         'void BaseStream::moveStart(Goffset)' : is abstract
         C:/programs/compa_libs/poppler_GIT\poppler/Stream.h(320) : see 
declaration of 'BaseStream::moveStart'


From even.rouault at mines-paris.org  Mon Jan 28 07:47:11 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 28 Jan 2013 16:47:11 +0100
Subject: [gdal-dev] fails to build with popler trunk
In-Reply-To: <51069C1C.7020702@ualg.pt>
References: <51069C1C.7020702@ualg.pt>
Message-ID: <1359388031.51069d7f0a7bf@imp.free.fr>

Selon Joaquim Luis <jluis at ualg.pt>:

> Hi,
>
> FYI
> I tried to build (on Windows) with poppler trunk but got the errors
> below, so had to go back to my working 0.20.0 version.
>
> If wished, I can open a ticket on this issue.

As documented in nmake.opt, adding POPPLER_0_23_OR_LATER=YES in nmake.local
should fix it. Upgrade both your GDAL trunk and poppler git to the latest
versions. Support for the latest poppler git is in the very last revisions of
GDAL trunk.



From jmckenna at gatewaygeomatics.com  Mon Jan 28 07:59:42 2013
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Mon, 28 Jan 2013 11:59:42 -0400
Subject: [gdal-dev] fails to build with popler trunk
In-Reply-To: <1359388031.51069d7f0a7bf@imp.free.fr>
References: <51069C1C.7020702@ualg.pt> <1359388031.51069d7f0a7bf@imp.free.fr>
Message-ID: <5106A06E.1010205@gatewaygeomatics.com>

On 13-01-28 11:47 AM, Even Rouault wrote:
> 
> As documented in nmake.opt, adding POPPLER_0_23_OR_LATER=YES in nmake.local
> should fix it. Upgrade both your GDAL trunk and poppler git to the latest
> versions. Support for the latest poppler git is in the very last revisions of
> GDAL trunk.
> 
> 

Good to know, thanks Even for your good work.

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/



From jluis at ualg.pt  Mon Jan 28 08:09:30 2013
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon, 28 Jan 2013 16:09:30 +0000
Subject: [gdal-dev] fails to build with popler trunk
In-Reply-To: <5106A06E.1010205@gatewaygeomatics.com>
References: <51069C1C.7020702@ualg.pt> <1359388031.51069d7f0a7bf@imp.free.fr>
	<5106A06E.1010205@gatewaygeomatics.com>
Message-ID: <5106A2BA.1060400@ualg.pt>

Thanks Even

I have a fresh gdal but since I use a nmake.local file, I hadn't noticed 
the new POPPLER_0_23_OR_LATER=YES
Unfortunately, with it declared I still get one error:

pdfdataset.cpp(1036) : error C2664: 'SplashOutputDev::startDoc' : cannot 
convert parameter 1 from 'XRef *' to 'PDFDoc *'
         Types pointed to are unrelated; conversion requires 
reinterpret_cast, C-style cast or function-style cast
pdfdataset.cpp(2785) : error C3861: 'setErrorFunction': identifier not found

> On 13-01-28 11:47 AM, Even Rouault wrote:
>> As documented in nmake.opt, adding POPPLER_0_23_OR_LATER=YES in nmake.local
>> should fix it. Upgrade both your GDAL trunk and poppler git to the latest
>> versions. Support for the latest poppler git is in the very last revisions of
>> GDAL trunk.
>>
>>
> Good to know, thanks Even for your good work.
>
> -jeff
>
>
>


From even.rouault at mines-paris.org  Mon Jan 28 08:22:46 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 28 Jan 2013 17:22:46 +0100
Subject: [gdal-dev] fails to build with popler trunk
In-Reply-To: <5106A2BA.1060400@ualg.pt>
References: <51069C1C.7020702@ualg.pt> <1359388031.51069d7f0a7bf@imp.free.fr>
	<5106A06E.1010205@gatewaygeomatics.com> <5106A2BA.1060400@ualg.pt>
Message-ID: <1359390166.5106a5d6d8426@imp.free.fr>

Selon Joaquim Luis <jluis at ualg.pt>:

> Thanks Even
>
> I have a fresh gdal but since I use a nmake.local file, I hadn't noticed
> the new POPPLER_0_23_OR_LATER=YES
> Unfortunately, with it declared I still get one error:
>
> pdfdataset.cpp(1036) : error C2664: 'SplashOutputDev::startDoc' : cannot
> convert parameter 1 from 'XRef *' to 'PDFDoc *'
>          Types pointed to are unrelated; conversion requires
> reinterpret_cast, C-style cast or function-style cast
> pdfdataset.cpp(2785) : error C3861: 'setErrorFunction': identifier not found

Did you define POPPLER_0_20_OR_LATER=YES and POPPLER_BASE_STREAM_HAS_TWO_ARGS =
YES and POPPLER_HAS_OPTCONTENT = YES ?

I admit that the config process is a bit painfull and stupid.

>
> > On 13-01-28 11:47 AM, Even Rouault wrote:
> >> As documented in nmake.opt, adding POPPLER_0_23_OR_LATER=YES in
> nmake.local
> >> should fix it. Upgrade both your GDAL trunk and poppler git to the latest
> >> versions. Support for the latest poppler git is in the very last revisions
> of
> >> GDAL trunk.
> >>
> >>
> > Good to know, thanks Even for your good work.
> >
> > -jeff
> >
> >
> >
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>







From jluis at ualg.pt  Mon Jan 28 08:45:26 2013
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon, 28 Jan 2013 16:45:26 +0000
Subject: [gdal-dev] fails to build with popler trunk
In-Reply-To: <1359390166.5106a5d6d8426@imp.free.fr>
References: <51069C1C.7020702@ualg.pt> <1359388031.51069d7f0a7bf@imp.free.fr>
	<5106A06E.1010205@gatewaygeomatics.com> <5106A2BA.1060400@ualg.pt>
	<1359390166.5106a5d6d8426@imp.free.fr>
Message-ID: <5106AB26.30204@ualg.pt>

On 28-01-2013 16:22, Even Rouault wrote:
> Selon Joaquim Luis<jluis at ualg.pt>:
>
>> Thanks Even
>>
>> I have a fresh gdal but since I use a nmake.local file, I hadn't noticed
>> the new POPPLER_0_23_OR_LATER=YES
>> Unfortunately, with it declared I still get one error:
>>
>> pdfdataset.cpp(1036) : error C2664: 'SplashOutputDev::startDoc' : cannot
>> convert parameter 1 from 'XRef *' to 'PDFDoc *'
>>           Types pointed to are unrelated; conversion requires
>> reinterpret_cast, C-style cast or function-style cast
>> pdfdataset.cpp(2785) : error C3861: 'setErrorFunction': identifier not found
> Did you define POPPLER_0_20_OR_LATER=YES and POPPLER_BASE_STREAM_HAS_TWO_ARGS =
> YES and POPPLER_HAS_OPTCONTENT = YES ?
>
> I admit that the config process is a bit painfull and stupid.

Hm, I thought the POPPLER_0_23_OR_LATER=YES would deprecate the 
POPPLER_0_20_OR_LATER=YES so had this last one commented out.
Declaring it seams to overcome these problems but I'm back to my old 
know one

poppler.lib(GlobalParams.obj) : error LNK2005: _DllMain at 12 already 
defined in gdaldllmain.obj

so I have to rebuild the poppler_GIT again


From andy at centremaps.co.uk  Mon Jan 28 08:50:44 2013
From: andy at centremaps.co.uk (AndyT)
Date: Mon, 28 Jan 2013 08:50:44 -0800 (PST)
Subject: [gdal-dev] out-db postgis raster issue
In-Reply-To: <1358849744367-5028924.post@n6.nabble.com>
References: <1358849744367-5028924.post@n6.nabble.com>
Message-ID: <1359391844394-5030334.post@n6.nabble.com>

Hi,

Just wondering if anyone had any thoughts on my issue loading out-db /
filesystem stored rasters from PostGIS.

I began to wonder if the data had loaded correctly but came across the
following psql method to get a basic image out and it is fine:

postgis20test=# SELECT oid, lowrite(lo_open(oid, 131072),png) AS num_bytes
FROM
( VALUES (lo_create(0), ST_AsPNG((SELECT rast FROM
public.raster2pgsqltest_local
_outdb WHERE rid=1)) )) AS v(oid,png);
  oid  | num_bytes
-------+-----------
 19094 |      8769
(1 row)


postgis20test=# \lo_export 19094 `C:/test.png`

However, i note a PostGIS raster option ST_AsGDALRaster and i tried
replacing the ST_AsPNG clause with this (which runs as a SELECT query) and
it doesn't seem to work.

ST_asgdalraster((SELECT rast FROM public.raster2pgsqltest_local_outdb WHERE
rid=1),'png',NULL,27700)

Any ideas on what i can do to further narrow down my search for the issue
would be fantastic.

Andy



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/out-db-postgis-raster-issue-tp5028924p5030334.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From warmerdam at pobox.com  Mon Jan 28 10:18:14 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 28 Jan 2013 10:18:14 -0800
Subject: [gdal-dev] char **papszOptions NULL terminated?
In-Reply-To: <CANzGYpT92CoiL6E7sRJe9sVEtev1EMCDuAY+DJeANn1DbFk6_w@mail.gmail.com>
References: <CANzGYpT92CoiL6E7sRJe9sVEtev1EMCDuAY+DJeANn1DbFk6_w@mail.gmail.com>
Message-ID: <CA+YzLBepx=0+OH_c2upNMVb2VR+LQsnP-Pf__mPO8ROom2qWdA@mail.gmail.com>

Simon,

You are correct - it must be null terminated as with the many other
uses of lists of strings in GDAL/OGR.

Best regards,
Frank

On Mon, Jan 28, 2013 at 7:01 AM, Simon Lyngby Kokkendorff
<silyko at gmail.com> wrote:
> Hi List,
>
>   I guess that a list of creation options (key=value pairs as a char** ) is
> supposed to be NULL-teminated (in e.g. OGR_Dr_CreateDataSource etc.) ? It
> might be obvious, at least it doesn't seem to be stated explicitly in the
> documentation in http://www.gdal.org/ogr/ogr__api_8h.html
>
>   Best regards,
>   Simon Kokkendorff, National Geodata Agency of Denmark
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From jluis at ualg.pt  Mon Jan 28 10:10:09 2013
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon, 28 Jan 2013 18:10:09 +0000
Subject: [gdal-dev] fails to build with popler trunk
In-Reply-To: <5106AB26.30204@ualg.pt>
References: <51069C1C.7020702@ualg.pt> <1359388031.51069d7f0a7bf@imp.free.fr>
	<5106A06E.1010205@gatewaygeomatics.com> <5106A2BA.1060400@ualg.pt>
	<1359390166.5106a5d6d8426@imp.free.fr> <5106AB26.30204@ualg.pt>
Message-ID: <5106BF01.4030006@ualg.pt>


>> Did you define POPPLER_0_20_OR_LATER=YES and 
>> POPPLER_BASE_STREAM_HAS_TWO_ARGS =
>> YES and POPPLER_HAS_OPTCONTENT = YES ?
>>
>> I admit that the config process is a bit painfull and stupid.
>
> Hm, I thought the POPPLER_0_23_OR_LATER=YES would deprecate the 
> POPPLER_0_20_OR_LATER=YES so had this last one commented out.
> Declaring it seams to overcome these problems but I'm back to my old 
> know one
>
> poppler.lib(GlobalParams.obj) : error LNK2005: _DllMain at 12 already 
> defined in gdaldllmain.obj
>
> so I have to rebuild the poppler_GIT again

Just finish this issue. It works fine now. Thanks.

Joaquim

From terry.rankine at csiro.au  Mon Jan 28 18:33:37 2013
From: terry.rankine at csiro.au (Terry Rankine)
Date: Mon, 28 Jan 2013 18:33:37 -0800 (PST)
Subject: [gdal-dev] onestep vs twostep reproject and change format
Message-ID: <1359426817121-5030451.post@n6.nabble.com>

Hi Guys

I have an ERS (ermapper) dataset I want to reproject into wsg84 and then
change the file format to netcdf4. I am using GDAL 1.9.2 linked against
netcdf 4.1.3

I get different results using the following.

One step:
* gdalwarp /projects/r17/GA/GSQ_P1247tmig.ers -s_srs "+proj=latlong
+datum=GDA94" -t_srs "+proj=latlong +datum=WGS84" -r cubic -of NETCDF  
-overwrite -co "FORMAT=NC4" -co "COMPRESS=DEFLATE" -co "ZLEVEL=9" -dstnodata
-99999 onestep.nc4

Two step
* gdalwarp -of ERS -s_srs "+proj=latlong +datum=GDA94" -t_srs "+proj=latlong
+datum=WGS84" -r cubic /projects/r17/GA/GSQ_P1247tmig.ers reproj.ers
-dstnodata -99999
* gdal_translate -of netCDF -co "FORMAT=NC4" -co "COMPRESS=DEFLATE" -co
"ZLEVEL=9" -stats reproj.ers reproj.nc4

In fact - the onestep destroys part of my data.
OneStep output
<http://osgeo-org.1560.n6.nabble.com/file/n5030451/onestep.nc4> 

two step output:
<http://osgeo-org.1560.n6.nabble.com/file/n5030451/reproj.nc4> 

Can someone let me know what I am doing wrong? or why it is being chopped
off?

Regards,
Terry



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/onestep-vs-twostep-reproject-and-change-format-tp5030451.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From terry.rankine at csiro.au  Mon Jan 28 22:11:28 2013
From: terry.rankine at csiro.au (Terry Rankine)
Date: Mon, 28 Jan 2013 22:11:28 -0800 (PST)
Subject: [gdal-dev] strange error
Message-ID: <1359439888536-5030459.post@n6.nabble.com>

Hi Guys

I miss-spelt an arguement (-dstnodat - its missing the a off the end) and
the command line arg processing was not informative about the error, kept
telling me I had the wrong type of resampling.

-bash-3.2$ gdalwarp --version
GDAL 1.9.2, released 2012/10/08


-bash-3.2$ gdalwarp -of ERS -s_srs "+proj=latlong +datum=GDA94" -t_srs
"+proj=latlong +datum=WGS84" -r cubic
/projects/r17/GA/GSWA_P1236_Charnley_ppmug.ers
/projects/p36/GA/GSWA_P1236_Charnley_ppmug.warp.ers -dstnodat -99999
Usage: gdalwarp [--help-general] [--formats]
    [-s_srs srs_def] [-t_srs srs_def] [-to "NAME=VALUE"]
    [-order n | -tps | -rpc | -geoloc] [-et err_threshold]
    [-refine_gcps tolerance [minimum_gcps]]
    [-te xmin ymin xmax ymax] [-tr xres yres] [-tap] [-ts width height]
    [-wo "NAME=VALUE"] [-ot Byte/Int16/...] [-wt Byte/Int16]
    [-srcnodata "value [value...]"] [-dstnodata "value [value...]"]
-dstalpha
    [-r resampling_method] [-wm memory_in_mb] [-multi] [-q]
    [-cutline datasource] [-cl layer] [-cwhere expression]
    [-csql statement] [-cblend dist_in_pixels] [-crop_to_cutline]
    [-of format] [-co "NAME=VALUE"]* [-overwrite]
    srcfile* dstfile

Available resampling methods:
    near (default), bilinear, cubic, cubicspline, lanczos.




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/strange-error-tp5030459.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at mmmtike.fi  Mon Jan 28 23:56:31 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 29 Jan 2013 07:56:31 +0000 (UTC)
Subject: [gdal-dev] strange error
References: <1359439888536-5030459.post@n6.nabble.com>
Message-ID: <loom.20130129T084709-903@post.gmane.org>

Terry Rankine <terry.rankine <at> csiro.au> writes:

> 
> Hi Guys
> 
> I miss-spelt an arguement (-dstnodat - its missing the a off the end) and
> the command line arg processing was not informative about the error, kept
> telling me I had the wrong type of resampling.

What you see is just a general help screen and you get the same message by
giving a plain "gdalwarp" command. It is really not very informative as an error
message.

-Jukka Rahkonen-





From Terry.Rankine at csiro.au  Mon Jan 28 23:59:12 2013
From: Terry.Rankine at csiro.au (Terry.Rankine at csiro.au)
Date: Tue, 29 Jan 2013 15:59:12 +0800
Subject: [gdal-dev] strange error
In-Reply-To: <loom.20130129T084709-903@post.gmane.org>
References: <1359439888536-5030459.post@n6.nabble.com>
	<loom.20130129T084709-903@post.gmane.org>
Message-ID: <4E88C091A57493498EEC9F2A21D5BF43A9335F91BA@EXWA-MBX01.nexus.csiro.au>

So the -r options are in the stock standard help screen? Ok - shows I paid attention.

I would recommend having it spit out 'xxxxx' not recognised as an option - or something similar.... for the silly people like me who miss type things.


Regards,
Terry


-----Original Message-----
From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Jukka Rahkonen
Sent: Tuesday, 29 January 2013 3:57 PM
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] strange error

Terry Rankine <terry.rankine <at> csiro.au> writes:

> 
> Hi Guys
> 
> I miss-spelt an arguement (-dstnodat - its missing the a off the end) 
> and the command line arg processing was not informative about the 
> error, kept telling me I had the wrong type of resampling.

What you see is just a general help screen and you get the same message by giving a plain "gdalwarp" command. It is really not very informative as an error message.

-Jukka Rahkonen-




_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Tue Jan 29 00:19:55 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 29 Jan 2013 09:19:55 +0100
Subject: [gdal-dev] onestep vs twostep reproject and change format
In-Reply-To: <1359426817121-5030451.post@n6.nabble.com>
References: <1359426817121-5030451.post@n6.nabble.com>
Message-ID: <1359447595.5107862bb63d8@imp.free.fr>

Selon Terry Rankine <terry.rankine at csiro.au>:

> Hi Guys
>
> I have an ERS (ermapper) dataset I want to reproject into wsg84 and then
> change the file format to netcdf4. I am using GDAL 1.9.2 linked against
> netcdf 4.1.3
>
> I get different results using the following.
>
> One step:
> * gdalwarp /projects/r17/GA/GSQ_P1247tmig.ers -s_srs "+proj=latlong
> +datum=GDA94" -t_srs "+proj=latlong +datum=WGS84" -r cubic -of NETCDF
> -overwrite -co "FORMAT=NC4" -co "COMPRESS=DEFLATE" -co "ZLEVEL=9" -dstnodata
> -99999 onestep.nc4
>
> Two step
> * gdalwarp -of ERS -s_srs "+proj=latlong +datum=GDA94" -t_srs "+proj=latlong
> +datum=WGS84" -r cubic /projects/r17/GA/GSQ_P1247tmig.ers reproj.ers
> -dstnodata -99999
> * gdal_translate -of netCDF -co "FORMAT=NC4" -co "COMPRESS=DEFLATE" -co
> "ZLEVEL=9" -stats reproj.ers reproj.nc4
>
> In fact - the onestep destroys part of my data.
> OneStep output
> <http://osgeo-org.1560.n6.nabble.com/file/n5030451/onestep.nc4>
>
> two step output:
> <http://osgeo-org.1560.n6.nabble.com/file/n5030451/reproj.nc4>
>
> Can someone let me know what I am doing wrong?

Nothing. The netCDF driver would need enhancements to fully support random
writing. I believe there are already tickets in Trac about that, or there was a
related discussion on that topic some time ago. The 2 step method is the
recommanded one for the time being.

For the one step process, you could perhaps try adding -wo OPTIMIZE_SIZE=TRUE
(see
http://gdal.org/structGDALWarpOptions.html#a0ed77f9917bb96c7a9aabd73d4d06e08 ).
This will perhaps work, but at the expense of a slow warping in some situations.








































From marco at sourcepole.ch  Tue Jan 29 01:48:11 2013
From: marco at sourcepole.ch (Marco Hugentobler)
Date: Tue, 29 Jan 2013 10:48:11 +0100
Subject: [gdal-dev] dxf linewidth
Message-ID: <51079ADB.9080006@sourcepole.ch>

Hi

I have a question regarding writing the linewith from ogr feature style 
in the dxf driver.
In ogrdxfwriterlayer.cpp, linewith is written using code 370. This seems 
to work if I open the dxf file with inkscape. However, if I open it with 
TrueView (AutoCAD engine), code 370 has no effect on line width. 
Furthermore, the application refuses to open a file if the 370 value is 
not one contained in 
(http://docs.autodesk.com/ACDMAC/2012/ENU/ObjectARX%20Reference/index.html?frmname=topic&frmfile=AcDbLayerTableRecord__lineWeight at const.html). 


Looking at a file generated with AutoCAD engine, I see that it uses code 
43. Now I'm not a dxf expert at all, so I don't know if it has to do 
with different dxf versions or if we should simply change the 370 for 43 
in the dxf writer? Shall I provide a patch?

Regards,
Marco

-- 
Dr. Marco Hugentobler
Sourcepole -  Linux & Open Source Solutions
Weberstrasse 5, CH-8004 Z?rich, Switzerland
marco.hugentobler at sourcepole.ch http://www.sourcepole.ch
Technical Advisor QGIS Project Steering Committee


From jef at norbit.de  Tue Jan 29 03:28:15 2013
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Tue, 29 Jan 2013 12:28:15 +0100
Subject: [gdal-dev] dxf linewidth
In-Reply-To: <51079ADB.9080006@sourcepole.ch>
References: <51079ADB.9080006@sourcepole.ch>
Message-ID: <20130129112815.GA4475@norbit.de>

Hi Marco,

On Tue, 29. Jan 2013 at 10:48:11 +0100, Marco Hugentobler wrote:
> I have a question regarding writing the linewith from ogr feature style  
> in the dxf driver.
> In ogrdxfwriterlayer.cpp, linewith is written using code 370. This seems  
> to work if I open the dxf file with inkscape. However, if I open it with  
> TrueView (AutoCAD engine), code 370 has no effect on line width.  
> Furthermore, the application refuses to open a file if the 370 value is  
> not one contained in  
> (http://docs.autodesk.com/ACDMAC/2012/ENU/ObjectARX%20Reference/index.html?frmname=topic&frmfile=AcDbLayerTableRecord__lineWeight at const.html). 
>
> Looking at a file generated with AutoCAD engine, I see that it uses code  
> 43. Now I'm not a dxf expert at all, so I don't know if it has to do  
> with different dxf versions or if we should simply change the 370 for 43  
> in the dxf writer? Shall I provide a patch?

43 is also what the DXF reference[1] suggests for the constant width of
LWPOLYLINEs.   It also suggests that the value of 43 is a double, so the
rounding shouldn't be necessary.


J?rgen

[1] http://images.autodesk.com/adsk/files/autocad_2012_pdf_dxf-reference_enu.pdf

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de
committ(ed|ing) to Quantum GIS                         IRC: jef on FreeNode                         

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From etourigny.dev at gmail.com  Tue Jan 29 03:39:56 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 29 Jan 2013 09:39:56 -0200
Subject: [gdal-dev] onestep vs twostep reproject and change format
In-Reply-To: <1359447595.5107862bb63d8@imp.free.fr>
References: <1359426817121-5030451.post@n6.nabble.com>
	<1359447595.5107862bb63d8@imp.free.fr>
Message-ID: <CA+TxYvPhSh626DXwNQwVKSHhi+j=0QbkVg3FwL=8649t2YydSQ@mail.gmail.com>

See http://trac.osgeo.org/gdal/ticket/4484

On Tue, Jan 29, 2013 at 6:19 AM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Selon Terry Rankine <terry.rankine at csiro.au>:
>
>> Hi Guys
>>
>> I have an ERS (ermapper) dataset I want to reproject into wsg84 and then
>> change the file format to netcdf4. I am using GDAL 1.9.2 linked against
>> netcdf 4.1.3
>>
>> I get different results using the following.
>>
>> One step:
>> * gdalwarp /projects/r17/GA/GSQ_P1247tmig.ers -s_srs "+proj=latlong
>> +datum=GDA94" -t_srs "+proj=latlong +datum=WGS84" -r cubic -of NETCDF
>> -overwrite -co "FORMAT=NC4" -co "COMPRESS=DEFLATE" -co "ZLEVEL=9" -dstnodata
>> -99999 onestep.nc4
>>
>> Two step
>> * gdalwarp -of ERS -s_srs "+proj=latlong +datum=GDA94" -t_srs "+proj=latlong
>> +datum=WGS84" -r cubic /projects/r17/GA/GSQ_P1247tmig.ers reproj.ers
>> -dstnodata -99999
>> * gdal_translate -of netCDF -co "FORMAT=NC4" -co "COMPRESS=DEFLATE" -co
>> "ZLEVEL=9" -stats reproj.ers reproj.nc4
>>
>> In fact - the onestep destroys part of my data.
>> OneStep output
>> <http://osgeo-org.1560.n6.nabble.com/file/n5030451/onestep.nc4>
>>
>> two step output:
>> <http://osgeo-org.1560.n6.nabble.com/file/n5030451/reproj.nc4>
>>
>> Can someone let me know what I am doing wrong?
>
> Nothing. The netCDF driver would need enhancements to fully support random
> writing. I believe there are already tickets in Trac about that, or there was a
> related discussion on that topic some time ago. The 2 step method is the
> recommanded one for the time being.
>
> For the one step process, you could perhaps try adding -wo OPTIMIZE_SIZE=TRUE
> (see
> http://gdal.org/structGDALWarpOptions.html#a0ed77f9917bb96c7a9aabd73d4d06e08 ).
> This will perhaps work, but at the expense of a slow warping in some situations.
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From beyhan at deprem.gov.tr  Tue Jan 29 11:04:15 2013
From: beyhan at deprem.gov.tr (Murat BEYHAN)
Date: Tue, 29 Jan 2013 21:04:15 +0200
Subject: [gdal-dev] shape file to GMT dem file
Message-ID: <20130129185320.M77850@deprem.gov.tr>

Dear All,

Is it possible to obtain dem grid data from shapefile using gdal or ogr.
info about shape file as follows

murat at murat:~/maps$ ogrinfo -so -al e34c3_n.shp
INFO: Open of `e34c3_n.shp'
      using driver `ESRI Shapefile' successful.

Layer name: e34c3_n
Geometry: Line String
Feature Count: 4047
Extent: (697857.170000, 4597069.190000) - (708674.200000, 4611236.780000)
Layer SRS WKT:
(unknown)
UserId: Real (11.0)
FNODE_: Real (11.0)
TNODE_: Real (11.0)
LPOLY_: Real (11.0)
RPOLY_: Real (11.0)
LENGTH: Real (18.5)
CVRGE34C3#: Integer (5.0)
CVRGE34C3-: Integer (5.0)
DETAY: String (12.0)
SEMBOL: Integer (3.0)
YUKSEKLIK: Real (12.3)

I have installed and use grass, GMT and qgis,  but I'm not good at GIS. My
purpose is to obtain slope map of topographic data. 

any suggestion appreciated.
Regards

Murat


-- 
This message has been scanned for viruses and
dangerous content by MailScanner, and is
believed to be clean.


From Asimmons at PVPC.ORG  Tue Jan 29 11:40:08 2013
From: Asimmons at PVPC.ORG (Arielle Simmons)
Date: Tue, 29 Jan 2013 14:40:08 -0500
Subject: [gdal-dev] ogr2ogr: Import .dbf and .shp to MySQL in WKT format
Message-ID: <47B75B820F667842BE64F154A5832C7E018C6F44@exch02.pvpc.com>

Hi,

 

I have two goals:

1) Use ogr2ogr to get polygon data into MySQL in a non-blob format (i.e.
I was hoping for WKT)

2) Get the full polygon dbf table into the same database...

 

I have figured out a way to get data into a MySQL database using (in
FWTools Shell). It is a total hack (from what I can tell the '-update'
and '-overwrite' commands don't work for me, nor does the
engine=MYISAM):

 

Step 1 (FWTools Shell):

 

ogr2ogr -f "MySQL" MYSQL:"test,host=27.0.0.1,user=root,port=3306" -nln
test_poly -a_srs "EPSG:3857" <path to shapefile> 

 

Tables are generated, but no data....

 

Step 2 (MySql Workbench):

 

Go to the 'test_poly' table, and manually set it's engine to "MYIASM"
..

 

Step 3 (FWTools Shell):

 

C:>ogr2ogr -f "MySQL" MYSQL:"test,host=127.0.0.1,user=root,port=3306"

-nln test_poly -a_srs "EPSG:3857" -update -append <shapefile path>

 

Now I see the data (**as a BLOB...need WKT have to parse...unless there
is someway to parse Geometry from BLOB***) and can load it into
QGIS...but totally at a loss how to achieve getting the .dbf in the same
database and get to the WKT format in MySQL.

 

Can anyone share some guidance?

 

Thank ye!!!

 

Arielle Simmons

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130129/f314f1ae/attachment-0001.html>

From tyler.mitchell at actian.com  Tue Jan 29 12:05:17 2013
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Tue, 29 Jan 2013 12:05:17 -0800
Subject: [gdal-dev] shape file to GMT dem file
In-Reply-To: <20130129185320.M77850@deprem.gov.tr>
References: <20130129185320.M77850@deprem.gov.tr>
Message-ID: <B7B990F5-0EA8-4421-A59D-2D2859F0F3A4@actian.com>

gdal_grid command can convert OGR to GDAL formats, but you need to only have point data. Your line shape file won't work with it.
So if you can convert your lines into a set of points, and you will need a Z or elevation point or attribute to point gdal_grid to.

Perhaps you already have the point data in your grass dataset that you could export to GDAL.  But I also suspect you just do all you need to in grass itself.

Tyler

On 2013-01-29, at 11:04 AM, Murat BEYHAN wrote:

> Dear All,
> 
> Is it possible to obtain dem grid data from shapefile using gdal or ogr.
> info about shape file as follows
> 
> murat at murat:~/maps$ ogrinfo -so -al e34c3_n.shp
> INFO: Open of `e34c3_n.shp'
>      using driver `ESRI Shapefile' successful.
> 
> Layer name: e34c3_n
> Geometry: Line String
> Feature Count: 4047
> Extent: (697857.170000, 4597069.190000) - (708674.200000, 4611236.780000)
> Layer SRS WKT:
> (unknown)
> UserId: Real (11.0)
> FNODE_: Real (11.0)
> TNODE_: Real (11.0)
> LPOLY_: Real (11.0)
> RPOLY_: Real (11.0)
> LENGTH: Real (18.5)
> CVRGE34C3#: Integer (5.0)
> CVRGE34C3-: Integer (5.0)
> DETAY: String (12.0)
> SEMBOL: Integer (3.0)
> YUKSEKLIK: Real (12.3)
> 
> I have installed and use grass, GMT and qgis,  but I'm not good at GIS. My
> purpose is to obtain slope map of topographic data. 
> 
> any suggestion appreciated.
> Regards
> 
> Murat
> 
> 
> -- 
> This message has been scanned for viruses and
> dangerous content by MailScanner, and is
> believed to be clean.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



Tyler Mitchell
Engineering Director 
Actian Corporation
tyler.mitchell at actian.com

MOBILE 250-303-1831
SKYPE spatialguru
www.actian.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130129/fae4695d/attachment.html>

From tyler.mitchell at actian.com  Tue Jan 29 14:11:34 2013
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Tue, 29 Jan 2013 14:11:34 -0800
Subject: [gdal-dev] shape file to GMT dem file
In-Reply-To: <20130129211935.M90408@deprem.gov.tr>
References: <20130129185320.M77850@deprem.gov.tr>
	<B7B990F5-0EA8-4421-A59D-2D2859F0F3A4@actian.com>
	<20130129211935.M90408@deprem.gov.tr>
Message-ID: <33FCE5EE-A249-4185-9D2E-BB83E91631EB@actian.com>

Do you have elevation data stored in the source data somewhere?  You can convert lines to points using QGIS Vector tool -> Extract Nodes, but if you do not have elevation values stored in the attribute table for the lines, it won't help you :)

Feel free to share a zipped set of files with me (directly) if you want me to take a peek.

Tyler

On 2013-01-29, at 1:28 PM, Murat BEYHAN wrote:

> Dear Mitchell, 
> Thanks for repply me. 
> As you say I have to obtain point data first. If I would able to obtain xyz data it will be easy using GMT xyz2grd. 
> But my problem I could not do that. So I produced point data using ogr2ogr command and it is drawn by qgis well 
> The picture on this mail. Lines  belongs shapefile and points belongs GMT data. But there is a problem its atribute table are null 
> and ogrinfo gives 0.0 for the field structure. So is this normal or not. And I couldn't achieve to use gdal_grid using GMT data file. 
> Do you have any idea, please. 
> Thanks 
> 
> murat at murat:~/maps$ ogr2ogr -f "GMT" -nlt point test1.gmt e34c3_n.shp 
> murat at murat:~/maps$ ogrinfo -so -al test1.gmt 
> INFO: Open of `test1.gmt' 
>       using driver `GMT' successful. 
> 
> Layer name: test1 
> Geometry: Point 
> Feature Count: 341440 
> Extent: (697857.170000, 4597069.190000) - (708674.200000, 4611236.780000) 
> Layer SRS WKT: 
> (unknown) 
> UserId: Real (0.0) 
> FNODE_: Real (0.0) 
> TNODE_: Real (0.0) 
> LPOLY_: Real (0.0) 
> RPOLY_: Real (0.0) 
> LENGTH: Real (0.0) 
> CVRGE34C3#: Integer (0.0) 
> CVRGE34C3-: Integer (0.0) 
> DETAY: String (0.0) 
> SEMBOL: Integer (0.0) 
> YUKSEKLIK: Real (0.0) 
> 
> 
> 
> 
> 
> On Tue, 29 Jan 2013 12:05:17 -0800, Tyler Mitchell wrote 
> > gdal_grid command can convert OGR to GDAL formats, but you need to only have point data. Your line shape file won't work with it. 
> > So if you can convert your lines into a set of points, and you will need a Z or elevation point or attribute to point gdal_grid to. 
> > 
> > Perhaps you already have the point data in your grass dataset that you could export to GDAL.   But I also suspect you just do all you need to in grass itself. 
> > 
> > Tyler 
> > 
> > On 2013-01-29, at 11:04 AM, Murat BEYHAN wrote: 
>> 
>> > Dear All, 
>> > 
>> > Is it possible to obtain dem grid data from shapefile using gdal or ogr. 
>> > info about shape file as follows 
>> > 
>> > murat at murat:~/maps$ ogrinfo -so -al e34c3_n.shp 
>> > INFO: Open of `e34c3_n.shp' 
>> >      using driver `ESRI Shapefile' successful. 
>> > 
>> > Layer name: e34c3_n 
>> > Geometry: Line String 
>> > Feature Count: 4047 
>> > Extent: (697857.170000, 4597069.190000) - (708674.200000, 4611236.780000) 
>> > Layer SRS WKT: 
>> > (unknown) 
>> > UserId: Real (11.0) 
>> > FNODE_: Real (11.0) 
>> > TNODE_: Real (11.0) 
>> > LPOLY_: Real (11.0) 
>> > RPOLY_: Real (11.0) 
>> > LENGTH: Real (18.5) 
>> > CVRGE34C3#: Integer (5.0) 
>> > CVRGE34C3-: Integer (5.0) 
>> > DETAY: String (12.0) 
>> > SEMBOL: Integer (3.0) 
>> > YUKSEKLIK: Real (12.3) 
>> > 
>> > I have installed and use grass, GMT and qgis,  but I'm not good at GIS. My 
>> > purpose is to obtain slope map of topographic data. 
>> > 
>> > any suggestion appreciated. 
>> > Regards 
>> > 
>> > Murat 
>> > 
>> > -- 
>> > This message has been scanned for viruses and 
>> > dangerous content by MailScanner, and is 
>> > believed to be clean. 
>> > 
>> > _______________________________________________ 
>> > gdal-dev mailing list 
>> > gdal-dev at lists.osgeo.org 
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev 
>> >
> 
> > 
> > 
> > 
> > 
> > 
> 
> > 
> >
> 
> > Tyler Mitchell 
> > Engineering Director  
> > Actian Corporation 
> >
> tyler.mitchell at actian.com 
> > 
> >
> 
> > MOBILE 250-303-1831 
> > SKYPE spatialguru 
> > www.actian.com 
> >
> 
> > 
> > -- 
> > This message has been scanned for viruses and 
> > dangerous content by MailScanner, and is 
> > believed to be clean. 
> 
> 
> Murat Beyhan 
> Jeofizik Y?k. M?h. 
> T.C. 
> BA?BAKANLIK 
> Afet ve Acil Durum Y?netimi Ba?kanl??? 
> Deprem Dairesi Ba?kanl??? 
> Eski?ehir Yolu 12. Km. Lodumlu/Ankara 
> Tel:+90 (312) 2872680-1550 
> 
> 
> -- 
> This message has been scanned for viruses and 
> dangerous content by MailScanner, and is 
> believed to be clean.
> <map.jpg>



Tyler Mitchell
Engineering Director 
Actian Corporation
tyler.mitchell at actian.com

MOBILE 250-303-1831
SKYPE spatialguru
www.actian.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130129/4b6324b8/attachment-0001.html>

From even.rouault at mines-paris.org  Tue Jan 29 14:41:07 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 29 Jan 2013 23:41:07 +0100
Subject: [gdal-dev] dxf linewidth
In-Reply-To: <51079ADB.9080006@sourcepole.ch>
References: <51079ADB.9080006@sourcepole.ch>
Message-ID: <201301292341.07820.even.rouault@mines-paris.org>

Le mardi 29 janvier 2013 10:48:11, Marco Hugentobler a ?crit :
> Hi
> 
> I have a question regarding writing the linewith from ogr feature style
> in the dxf driver.
> In ogrdxfwriterlayer.cpp, linewith is written using code 370. This seems
> to work if I open the dxf file with inkscape. However, if I open it with
> TrueView (AutoCAD engine), code 370 has no effect on line width.
> Furthermore, the application refuses to open a file if the 370 value is
> not one contained in
> (http://docs.autodesk.com/ACDMAC/2012/ENU/ObjectARX%20Reference/index.html?
> frmname=topic&frmfile=AcDbLayerTableRecord__lineWeight at const.html).
> 
> 
> Looking at a file generated with AutoCAD engine, I see that it uses code
> 43. Now I'm not a dxf expert at all, so I don't know if it has to do
> with different dxf versions or if we should simply change the 370 for 43
> in the dxf writer? Shall I provide a patch?

That might be usefull to open a ticket on that with the patch, as well as with 
data to reproduce and the file generated by AutoCAD.
Note that my grepping of 370 shows that the DXF reader should likely be 
enhanced to recognize code 43 in addition to 370, so that round-tripping 
through OGR works.
Note that I don't feel myself as a DXF expert. I may just apply it more or 
less blindly it if you are confident in the patch through your testing. 

> 
> Regards,
> Marco

From asimmons at pvpc.org  Tue Jan 29 18:17:26 2013
From: asimmons at pvpc.org (Muskie)
Date: Tue, 29 Jan 2013 18:17:26 -0800 (PST)
Subject: [gdal-dev] Anyone tried using ogr2ogr on a remote MySQL db?
Message-ID: <1359512246486-5030802.post@n6.nabble.com>

I can use ogrinfo and ogr2ogr fine on a local MySQL database...but not on a
remote site. Can the problem be my provider? Has anyone had successfully
connected via remote to upload data using ogr2ogr? If so, where was your
site...what type of input did you use for 'host=' (IP?)?



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Anyone-tried-using-ogr2ogr-on-a-remote-MySQL-db-tp5030802.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From admin at michiganwxsystem.com  Tue Jan 29 18:20:43 2013
From: admin at michiganwxsystem.com (Jeff Lake)
Date: Tue, 29 Jan 2013 21:20:43 -0500
Subject: [gdal-dev] Anyone tried using ogr2ogr on a remote MySQL db?
In-Reply-To: <1359512246486-5030802.post@n6.nabble.com>
References: <1359512246486-5030802.post@n6.nabble.com>
Message-ID: <5108837B.7030109@michiganwxsystem.com>

the remote host needs the permissions set properly for the ogr2ogr host 
to connect to it

just using the proper user name/password most times is not enough ...


-Jeff Lake
MichiganWxSystem.com
AllisonHouse.com
TheWeatherCenter.net
GRLevelXStuff.com

On 1/29/2013 21:17, Muskie wrote:
> I can use ogrinfo and ogr2ogr fine on a local MySQL database...but not on a
> remote site. Can the problem be my provider? Has anyone had successfully
> connected via remote to upload data using ogr2ogr? If so, where was your
> site...what type of input did you use for 'host=' (IP?)?
>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Anyone-tried-using-ogr2ogr-on-a-remote-MySQL-db-tp5030802.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From asimmons at pvpc.org  Tue Jan 29 18:54:01 2013
From: asimmons at pvpc.org (Muskie)
Date: Tue, 29 Jan 2013 18:54:01 -0800 (PST)
Subject: [gdal-dev] Anyone tried using ogr2ogr on a remote MySQL db?
In-Reply-To: <5108837B.7030109@michiganwxsystem.com>
References: <1359512246486-5030802.post@n6.nabble.com>
	<5108837B.7030109@michiganwxsystem.com>
Message-ID: <1359514441981-5030808.post@n6.nabble.com>

Hi Jeff....

Anyway you can be more specific? I have paid DBA customer service on the
host side...but I wasn't having much luck trouble shooting the issue with
them. Do you happen to know what they might have to do to configure the site
better?

They say they've set the ports up for input and output data....



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Anyone-tried-using-ogr2ogr-on-a-remote-MySQL-db-tp5030802p5030808.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From admin at michiganwxsystem.com  Wed Jan 30 05:26:10 2013
From: admin at michiganwxsystem.com (Jeff Lake)
Date: Wed, 30 Jan 2013 08:26:10 -0500
Subject: [gdal-dev] Anyone tried using ogr2ogr on a remote MySQL db?
In-Reply-To: <1359514441981-5030808.post@n6.nabble.com>
References: <1359512246486-5030802.post@n6.nabble.com>
	<5108837B.7030109@michiganwxsystem.com>
	<1359514441981-5030808.post@n6.nabble.com>
Message-ID: <51091F72.1070909@michiganwxsystem.com>

I will as soon as this storm system moves off shore ...
kinda busy at the moment

-Jeff Lake
MichiganWxSystem.com
AllisonHouse.com
TheWeatherCenter.net
GRLevelXStuff.com

On 1/29/2013 21:54, Muskie wrote:
> Hi Jeff....
>
> Anyway you can be more specific? I have paid DBA customer service on the
> host side...but I wasn't having much luck trouble shooting the issue with
> them. Do you happen to know what they might have to do to configure the site
> better?
>
> They say they've set the ports up for input and output data....
>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Anyone-tried-using-ogr2ogr-on-a-remote-MySQL-db-tp5030802p5030808.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From tyler.mitchell at actian.com  Wed Jan 30 09:47:52 2013
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Wed, 30 Jan 2013 09:47:52 -0800
Subject: [gdal-dev] shape file to GMT dem file
In-Reply-To: <1359535781.6867.25.camel@localhost>
References: <20130129185320.M77850@deprem.gov.tr>
	<B7B990F5-0EA8-4421-A59D-2D2859F0F3A4@actian.com>
	<20130129211935.M90408@deprem.gov.tr>
	<33FCE5EE-A249-4185-9D2E-BB83E91631EB@actian.com>
	<1359535781.6867.25.camel@localhost>
Message-ID: <9C5A5938-0F4E-4D95-AB47-EA2CBD239765@actian.com>

Glad you had some success Murat!
Are you okay now or you have more questions?

Best wishes,
Tyler

On 2013-01-30, at 12:49 AM, Murat Beyhan wrote:

> Dear Tyler,
> I really thank you, you gave me very useful hints. 
> Yes As you say I have obtain point data from shape file than I use Qgis
> to obtain point file using extract node. (By the way is it possible to
> do this using command line in terminal.)
> then I have used gdal_grid to obtain grid data than I used Raster
> Analysis DEM models in qgis. (by the way it took long and long time to
> do this for one threader. about 5 minutes)
> The example jpeg file is in this email. But I wonder the sensitivity of
> gridded data using qgis.
> 
> Thanks for your help after one week I took way in my job.
> Warm regards... 
> murat
> 
> 
> On Tue, 2013-01-29 at 14:11 -0800, Tyler Mitchell wrote:
>> Do you have elevation data stored in the source data somewhere?  You
>> can convert lines to points using QGIS Vector tool -> Extract Nodes,
>> but if you do not have elevation values stored in the attribute table
>> for the lines, it won't help you :)
>> 
>> 
>> Feel free to share a zipped set of files with me (directly) if you
>> want me to take a peek.
>> 
>> 
>> Tyler
>> 
>> On 2013-01-29, at 1:28 PM, Murat BEYHAN wrote:
>> 
>>> Dear Mitchell, 
>>> Thanks for repply me. 
>>> As you say I have to obtain point data first. If I would able to
>>> obtain xyz data it will be easy using GMT xyz2grd. 
>>> But my problem I could not do that. So I produced point data using
>>> ogr2ogr command and it is drawn by qgis well 
>>> The picture on this mail. Lines  belongs shapefile and points
>>> belongs GMT data. But there is a problem its atribute table are
>>> null 
>>> and ogrinfo gives 0.0 for the field structure. So is this normal or
>>> not. And I couldn't achieve to use gdal_grid using GMT data file. 
>>> Do you have any idea, please. 
>>> Thanks 
>>> 
>>> murat at murat:~/maps$ ogr2ogr -f "GMT" -nlt point test1.gmt
>>> e34c3_n.shp 
>>> murat at murat:~/maps$ ogrinfo -so -al test1.gmt 
>>> INFO: Open of `test1.gmt' 
>>>      using driver `GMT' successful. 
>>> 
>>> Layer name: test1 
>>> Geometry: Point 
>>> Feature Count: 341440 
>>> Extent: (697857.170000, 4597069.190000) - (708674.200000,
>>> 4611236.780000) 
>>> Layer SRS WKT: 
>>> (unknown) 
>>> UserId: Real (0.0) 
>>> FNODE_: Real (0.0) 
>>> TNODE_: Real (0.0) 
>>> LPOLY_: Real (0.0) 
>>> RPOLY_: Real (0.0) 
>>> LENGTH: Real (0.0) 
>>> CVRGE34C3#: Integer (0.0) 
>>> CVRGE34C3-: Integer (0.0) 
>>> DETAY: String (0.0) 
>>> SEMBOL: Integer (0.0) 
>>> YUKSEKLIK: Real (0.0) 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> On Tue, 29 Jan 2013 12:05:17 -0800, Tyler Mitchell wrote 
>>>> gdal_grid command can convert OGR to GDAL formats, but you need to
>>> only have point data. Your line shape file won't work with it. 
>>>> So if you can convert your lines into a set of points, and you
>>> will need a Z or elevation point or attribute to point gdal_grid
>>> to. 
>>>> 
>>>> Perhaps you already have the point data in your grass dataset that
>>> you could export to GDAL.   But I also suspect you just do all you
>>> need to in grass itself. 
>>>> 
>>>> Tyler 
>>>> 
>>>> On 2013-01-29, at 11:04 AM, Murat BEYHAN wrote: 
>>>> 
>>>>> Dear All, 
>>>>> 
>>>>> Is it possible to obtain dem grid data from shapefile using gdal
>>>> or ogr. 
>>>>> info about shape file as follows 
>>>>> 
>>>>> murat at murat:~/maps$ ogrinfo -so -al e34c3_n.shp 
>>>>> INFO: Open of `e34c3_n.shp' 
>>>>>     using driver `ESRI Shapefile' successful. 
>>>>> 
>>>>> Layer name: e34c3_n 
>>>>> Geometry: Line String 
>>>>> Feature Count: 4047 
>>>>> Extent: (697857.170000, 4597069.190000) - (708674.200000,
>>>> 4611236.780000) 
>>>>> Layer SRS WKT: 
>>>>> (unknown) 
>>>>> UserId: Real (11.0) 
>>>>> FNODE_: Real (11.0) 
>>>>> TNODE_: Real (11.0) 
>>>>> LPOLY_: Real (11.0) 
>>>>> RPOLY_: Real (11.0) 
>>>>> LENGTH: Real (18.5) 
>>>>> CVRGE34C3#: Integer (5.0) 
>>>>> CVRGE34C3-: Integer (5.0) 
>>>>> DETAY: String (12.0) 
>>>>> SEMBOL: Integer (3.0) 
>>>>> YUKSEKLIK: Real (12.3) 
>>>>> 
>>>>> I have installed and use grass, GMT and qgis,  but I'm not good
>>>> at GIS. My 
>>>>> purpose is to obtain slope map of topographic data. 
>>>>> 
>>>>> any suggestion appreciated. 
>>>>> Regards 
>>>>> 
>>>>> Murat 
>>>>> 
>>>>> -- 
>>>>> This message has been scanned for viruses and 
>>>>> dangerous content by MailScanner, and is 
>>>>> believed to be clean. 
>>>>> 
>>>>> _______________________________________________ 
>>>>> gdal-dev mailing list 
>>>>> gdal-dev at lists.osgeo.org 
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
>>>>> 
>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>> 
>>>> 
>>>> 
>>> 
>>>> Tyler Mitchell 
>>>> Engineering Director  
>>>> Actian Corporation 
>>>> 
>>> tyler.mitchell at actian.com 
>>>> 
>>>> 
>>> 
>>>> MOBILE 250-303-1831 
>>>> SKYPE spatialguru 
>>>> www.actian.com 
>>>> 
>>> 
>>>> 
>>>> -- 
>>>> This message has been scanned for viruses and 
>>>> dangerous content by MailScanner, and is 
>>>> believed to be clean. 
>>> 
>>> 
>>> Murat Beyhan 
>>> Jeofizik Y?k. M?h. 
>>> T.C. 
>>> BA?BAKANLIK 
>>> Afet ve Acil Durum Y?netimi Ba?kanl??? 
>>> Deprem Dairesi Ba?kanl??? 
>>> Eski?ehir Yolu 12. Km. Lodumlu/Ankara 
>>> Tel:+90 (312) 2872680-1550 
>>> 
>>> 
>>> -- 
>>> This message has been scanned for viruses and 
>>> dangerous content by MailScanner, and is 
>>> believed to be clean.
>>> <map.jpg>
>> 
>> 
>> 
>> 
>> Tyler Mitchell
>> Engineering Director 
>> Actian Corporation
>> 
>> tyler.mitchell at actian.com
>> 
>> 
>> MOBILE 250-303-1831
>> SKYPE spatialguru
>> www.actian.com
>> 
>> 
>> 
>> 
>> -- 
>> This message has been scanned for viruses and 
>> dangerous content by MailScanner, and is 
>> believed to be clean.
> 
> Murat BEYHAN Jeofizik Y.M?h. T.C. Ba?bakanl?k Afet ve Acil Durum
> Y?netimi Ba?kanl??? Deprem Dairesi Ba?kanl??? Eski?ehir Yolu 12. Km.
> Lodumlu/ANKARA Tel: 312 2872680-1550 email:beyhan at deprem.gov.tr
> 
> -- 
> This message has been scanned for viruses and
> dangerous content by MailScanner, and is
> believed to be clean.
> 
> <relief.jpeg><hillshade2.jpeg><hillshade1.jpeg><slope.jpeg>



Tyler Mitchell
Engineering Director 
Actian Corporation
tyler.mitchell at actian.com

MOBILE 250-303-1831
SKYPE spatialguru
www.actian.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130130/a77132ee/attachment-0001.html>

From chandra436 at gmail.com  Wed Jan 30 10:49:09 2013
From: chandra436 at gmail.com (chandrasekhar)
Date: Thu, 31 Jan 2013 00:19:09 +0530
Subject: [gdal-dev]  Vertical Mapper GRD files
Message-ID: <000001cdff1a$7ef6d2b0$7ce47810$@gmail.com>

Hi,

 

I am trying to read .grd file. I can able read minZ  and maxZ values and
numeric grid data 

 

Now I want to reconstruct the z values. 

 

Please help me in reconstructing the z values using maxz and minz. I am
expecting the formula from you.

 

I am trying with the below formula :

 

(Maxz-minz)/65535*pixel value

 

Please correct me if I am wrong

 

Best Regards,

Chandrasekhar.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130131/a7aff653/attachment.html>

From cgodkin at gmail.com  Wed Jan 30 12:03:50 2013
From: cgodkin at gmail.com (Carl Godkin)
Date: Wed, 30 Jan 2013 12:03:50 -0800
Subject: [gdal-dev] GDAL WMS questions...
Message-ID: <CAE=8km=Zenq6ys+Ngu5D75_k2BCKFqBq-3fc6z4i-rDp7AhC=Q@mail.gmail.com>

Hi,

I'm working with GDAL_WMS in 1.9.2 and have two questions.

1. Coordinate system

The documentation on http://gdal.org/frmt_wms.html lists both <SRS>/<CRS>
inside the <Service> element as well as <Projection> inside the root
element, <GDAL_WMS>.

What's the difference?  Both are defined simply as "Image projection."  Is
there further information somewhere besides this page?

2. Tiles

I don't understand why or when I'd use a tiled vs. untiled request.  If I'm
interested in a JPEG or PNG from a particular server covering a particular
area in a particular coordinate system, why would I choose one over the
other?  Again, if this is explained elsewhere in the documentation, please
point me there.

Thanks very much,

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130130/cd1f3b57/attachment.html>

From traviskirstine at gmail.com  Wed Jan 30 12:19:47 2013
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Wed, 30 Jan 2013 15:19:47 -0500
Subject: [gdal-dev] GDAL WMS questions...
In-Reply-To: <CAE=8km=Zenq6ys+Ngu5D75_k2BCKFqBq-3fc6z4i-rDp7AhC=Q@mail.gmail.com>
References: <CAE=8km=Zenq6ys+Ngu5D75_k2BCKFqBq-3fc6z4i-rDp7AhC=Q@mail.gmail.com>
Message-ID: <CALtm4h2TNROqfSKDU6Fww7Mco8wuHzRFmzTgzvEamYSTxrkGvQ@mail.gmail.com>

My guess is that SRS is used when connecting to a WMS Version <= 1.1.1 and
CRS is used when connection to 1.3

Regards


On 30 January 2013 15:03, Carl Godkin <cgodkin at gmail.com> wrote:

>
> Hi,
>
> I'm working with GDAL_WMS in 1.9.2 and have two questions.
>
> 1. Coordinate system
>
> The documentation on http://gdal.org/frmt_wms.html lists both <SRS>/<CRS>
> inside the <Service> element as well as <Projection> inside the root
> element, <GDAL_WMS>.
>
> What's the difference?  Both are defined simply as "Image projection."  Is
> there further information somewhere besides this page?
>
> 2. Tiles
>
> I don't understand why or when I'd use a tiled vs. untiled request.  If
> I'm interested in a JPEG or PNG from a particular server covering a
> particular area in a particular coordinate system, why would I choose one
> over the other?  Again, if this is explained elsewhere in the
> documentation, please point me there.
>
> Thanks very much,
>
> carl
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130130/f4e836d3/attachment.html>

From warmerdam at pobox.com  Wed Jan 30 12:32:29 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 30 Jan 2013 12:32:29 -0800
Subject: [gdal-dev] GDAL WMS questions...
In-Reply-To: <CALtm4h2TNROqfSKDU6Fww7Mco8wuHzRFmzTgzvEamYSTxrkGvQ@mail.gmail.com>
References: <CAE=8km=Zenq6ys+Ngu5D75_k2BCKFqBq-3fc6z4i-rDp7AhC=Q@mail.gmail.com>
	<CALtm4h2TNROqfSKDU6Fww7Mco8wuHzRFmzTgzvEamYSTxrkGvQ@mail.gmail.com>
Message-ID: <CA+YzLBd_SKKHx6CkLN2xMrHeRde11ehDmszf_NkKwLxa1TF5dA@mail.gmail.com>

Carl,

Travis seems to have the right idea. The code is at:

  http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/wms/minidriver_wms.cpp#L74

The comment is:

  SRS is WMS version 1.1 and earlier, if SRS is not set use default
unless CRS is set
  CRS is WMS version 1.3, if CRS is not set use default unless SRS is set

Best regards,

On Wed, Jan 30, 2013 at 12:19 PM, Travis Kirstine
<traviskirstine at gmail.com> wrote:
> My guess is that SRS is used when connecting to a WMS Version <= 1.1.1 and
> CRS is used when connection to 1.3
>
> Regards
>
>
> On 30 January 2013 15:03, Carl Godkin <cgodkin at gmail.com> wrote:
>>
>>
>> Hi,
>>
>> I'm working with GDAL_WMS in 1.9.2 and have two questions.
>>
>> 1. Coordinate system
>>
>> The documentation on http://gdal.org/frmt_wms.html lists both <SRS>/<CRS>
>> inside the <Service> element as well as <Projection> inside the root
>> element, <GDAL_WMS>.
>>
>> What's the difference?  Both are defined simply as "Image projection."  Is
>> there further information somewhere besides this page?
>>
>> 2. Tiles
>>
>> I don't understand why or when I'd use a tiled vs. untiled request.  If
>> I'm interested in a JPEG or PNG from a particular server covering a
>> particular area in a particular coordinate system, why would I choose one
>> over the other?  Again, if this is explained elsewhere in the documentation,
>> please point me there.
>>
>> Thanks very much,
>>
>> carl
>>
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From cgodkin at gmail.com  Wed Jan 30 12:35:20 2013
From: cgodkin at gmail.com (Carl Godkin)
Date: Wed, 30 Jan 2013 12:35:20 -0800
Subject: [gdal-dev] GDAL WMS questions...
In-Reply-To: <CALtm4h2TNROqfSKDU6Fww7Mco8wuHzRFmzTgzvEamYSTxrkGvQ@mail.gmail.com>
References: <CAE=8km=Zenq6ys+Ngu5D75_k2BCKFqBq-3fc6z4i-rDp7AhC=Q@mail.gmail.com>
	<CALtm4h2TNROqfSKDU6Fww7Mco8wuHzRFmzTgzvEamYSTxrkGvQ@mail.gmail.com>
Message-ID: <CAE=8kmnstYupMuSfTgd-Y8yqzM_1mASi=BGLUqee5U+fFPf4Ng@mail.gmail.com>

On Wed, Jan 30, 2013 at 12:19 PM, Travis Kirstine
<traviskirstine at gmail.com>wrote:

> My guess is that SRS is used when connecting to a WMS Version <= 1.1.1 and
> CRS is used when connection to 1.3
>
>
Thanks. I see that's in the docs.   But what is the difference between
these two and <Projection> ?

I'm new to this part of GDAL.  Thanks,

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130130/30e8631c/attachment.html>

From warmerdam at pobox.com  Wed Jan 30 12:50:19 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 30 Jan 2013 12:50:19 -0800
Subject: [gdal-dev] GDAL WMS questions...
In-Reply-To: <CAE=8kmnstYupMuSfTgd-Y8yqzM_1mASi=BGLUqee5U+fFPf4Ng@mail.gmail.com>
References: <CAE=8km=Zenq6ys+Ngu5D75_k2BCKFqBq-3fc6z4i-rDp7AhC=Q@mail.gmail.com>
	<CALtm4h2TNROqfSKDU6Fww7Mco8wuHzRFmzTgzvEamYSTxrkGvQ@mail.gmail.com>
	<CAE=8kmnstYupMuSfTgd-Y8yqzM_1mASi=BGLUqee5U+fFPf4Ng@mail.gmail.com>
Message-ID: <CA+YzLBevXZK2w=O1kTJJ1mSiidF-BJR1L53fhuEp_6qQh4iDgA@mail.gmail.com>

Carl,

I'm afraid I'm not clear on the intricacies  here either.  I think the
CRS and SRS elements are to override how the request is sent to the
remote WMS server while the <Projection> element is how the projection
is described to GDAL (as returned by GDALDataset::GetProjectionRef()).
 I believe these are not always the same thing because some WMS
servers have peculiar ways of naming/describing projections that might
not jive with what GDAL normally understands.

I could also be off base with this assumption.

Best regards,
Frank


On Wed, Jan 30, 2013 at 12:35 PM, Carl Godkin <cgodkin at gmail.com> wrote:
>
>
>
> On Wed, Jan 30, 2013 at 12:19 PM, Travis Kirstine <traviskirstine at gmail.com>
> wrote:
>>
>> My guess is that SRS is used when connecting to a WMS Version <= 1.1.1 and
>> CRS is used when connection to 1.3
>>
>
> Thanks. I see that's in the docs.   But what is the difference between these
> two and <Projection> ?
>
> I'm new to this part of GDAL.  Thanks,
>
> carl
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From chris.barker at noaa.gov  Wed Jan 30 15:49:03 2013
From: chris.barker at noaa.gov (Chris Barker - NOAA Federal)
Date: Wed, 30 Jan 2013 15:49:03 -0800
Subject: [gdal-dev] GDAL WMS questions...
In-Reply-To: <CAE=8km=Zenq6ys+Ngu5D75_k2BCKFqBq-3fc6z4i-rDp7AhC=Q@mail.gmail.com>
References: <CAE=8km=Zenq6ys+Ngu5D75_k2BCKFqBq-3fc6z4i-rDp7AhC=Q@mail.gmail.com>
Message-ID: <CALGmxEKhpbCmhunmQtitF=Q1GgmpLW6Y6icXXO7pn82GFjDShA@mail.gmail.com>

On Wed, Jan 30, 2013 at 12:03 PM, Carl Godkin <cgodkin at gmail.com> wrote:

> 2. Tiles
>
> I don't understand why or when I'd use a tiled vs. untiled request.  If I'm
> interested in a JPEG or PNG from a particular server covering a particular
> area in a particular coordinate system, why would I choose one over the
> other?

This really has nothing to do with GDAL (or any WMS source) per se --
it depends on how yo uwant o use the results.

Tiles are used for the google-maps-style (also used for many open
source web map systems: open layers, leaflet, etc) "slippy maps". In
general, tiles work really well if you have a map that covers a wide
area that you want people to be able to pan around on and/or have maps
that are slow to render, and don't change much.

But in short: if you want an image, you don't want tiles. If you are
using a tile-based map display system, you probably do want tiles.

-Chris




-- 

Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker at noaa.gov

From marco at sourcepole.ch  Thu Jan 31 02:23:54 2013
From: marco at sourcepole.ch (Marco Hugentobler)
Date: Thu, 31 Jan 2013 11:23:54 +0100
Subject: [gdal-dev] dxf linewidth
In-Reply-To: <510A45F8.7050500@sourcepole.ch>
References: <510A45F8.7050500@sourcepole.ch>
Message-ID: <510A463A.6060807@sourcepole.ch>


Hi Even

Ok, done (http://trac.osgeo.org/gdal/ticket/4978).

One thing that I did not do in the patch ( and should probably be done)
is considering the symbology units. I saw that it is possible to query
the unit type of the OGRStylePen. Is it possible to define e.g. the dpi
in the featurestyle such that a driver might convert between pixel / mm?


Regards,
Marco




On 29.01.2013 23:41, Even Rouault wrote:
> Le mardi 29 janvier 2013 10:48:11, Marco Hugentobler a ?crit :
>> Hi
>>
>> I have a question regarding writing the linewith from ogr feature style
>> in the dxf driver.
>> In ogrdxfwriterlayer.cpp, linewith is written using code 370. This seems
>> to work if I open the dxf file with inkscape. However, if I open it with
>> TrueView (AutoCAD engine), code 370 has no effect on line width.
>> Furthermore, the application refuses to open a file if the 370 value is
>> not one contained in
>> (http://docs.autodesk.com/ACDMAC/2012/ENU/ObjectARX%20Reference/index.html?
>> frmname=topic&frmfile=AcDbLayerTableRecord__lineWeight at const.html).
>>
>>
>> Looking at a file generated with AutoCAD engine, I see that it uses code
>> 43. Now I'm not a dxf expert at all, so I don't know if it has to do
>> with different dxf versions or if we should simply change the 370 for 43
>> in the dxf writer? Shall I provide a patch?
> That might be usefull to open a ticket on that with the patch, as well as with
> data to reproduce and the file generated by AutoCAD.
> Note that my grepping of 370 shows that the DXF reader should likely be
> enhanced to recognize code 43 in addition to 370, so that round-tripping
> through OGR works.
> Note that I don't feel myself as a DXF expert. I may just apply it more or
> less blindly it if you are confident in the patch through your testing.
>
>> Regards,
>> Marco





From turgay.osna at netcad.com.tr  Thu Jan 31 04:30:02 2013
From: turgay.osna at netcad.com.tr (netcadturgay)
Date: Thu, 31 Jan 2013 04:30:02 -0800 (PST)
Subject: [gdal-dev] Compile Gdal 1.9 with "WIN64=YES" setting
Message-ID: <1359635402474-5031177.post@n6.nabble.com>

I have build errors when I try to build to the Gdal 1.9 library for 64 bits.
How can I solve this problem? Or how can I build the gdal for 64 bits?
Thanks for your helps

Error:
   Creating library gdal_i.lib and object gdal_i.exp
LINK : error LNK2001: unresolved external symbol OGRFeatureStylePuller
LINK : error LNK2001: unresolved external symbol OSRValidate
LINK : error LNK2001: unresolved external symbol OPTGetProjectionMethods
LINK : error LNK2001: unresolved external symbol OGR_G_GetPointCount
LINK : error LNK2001: unresolved external symbol OGRRegisterAll
LINK : error LNK2001: unresolved external symbol GDALSimpleImageWarp
LINK : error LNK2001: unresolved external symbol GDALReprojectImage
LINK : error LNK2001: unresolved external symbol GDALComputeMedianCutPCT
LINK : error LNK2001: unresolved external symbol GDALDitherRGB2PCT
LINK : error LNK2001: unresolved external symbol
OCTNewCoordinateTransformation
gdal19.dll : fatal error LNK1120: 10 unresolved externals
NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
9.0\VC\BIN\link.EXE"' : return code '0x460'
Stop.




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Compile-Gdal-1-9-with-WIN64-YES-setting-tp5031177.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From yehil at rafael.co.il  Thu Jan 31 04:38:11 2013
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Thu, 31 Jan 2013 14:38:11 +0200
Subject: [gdal-dev] Compile Gdal 1.9 with "WIN64=YES" setting
In-Reply-To: <1359635402474-5031177.post@n6.nabble.com>
References: <1359635402474-5031177.post@n6.nabble.com>
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0CAF44E7DF2@MAILBOXSERVER.rf.local>

Hi
>From the path of the VS compiler below, it seems that you are using the 32 bit compiler. 
To compile for x64 you need to use the amd64 compiler.

Yehiyam

-----Original Message-----
From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of netcadturgay
Sent: Thursday, January 31, 2013 2:30 PM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Compile Gdal 1.9 with "WIN64=YES" setting

I have build errors when I try to build to the Gdal 1.9 library for 64 bits.
How can I solve this problem? Or how can I build the gdal for 64 bits?
Thanks for your helps

Error:
   Creating library gdal_i.lib and object gdal_i.exp
LINK : error LNK2001: unresolved external symbol OGRFeatureStylePuller
LINK : error LNK2001: unresolved external symbol OSRValidate
LINK : error LNK2001: unresolved external symbol OPTGetProjectionMethods
LINK : error LNK2001: unresolved external symbol OGR_G_GetPointCount
LINK : error LNK2001: unresolved external symbol OGRRegisterAll
LINK : error LNK2001: unresolved external symbol GDALSimpleImageWarp
LINK : error LNK2001: unresolved external symbol GDALReprojectImage
LINK : error LNK2001: unresolved external symbol GDALComputeMedianCutPCT
LINK : error LNK2001: unresolved external symbol GDALDitherRGB2PCT
LINK : error LNK2001: unresolved external symbol
OCTNewCoordinateTransformation
gdal19.dll : fatal error LNK1120: 10 unresolved externals
NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
9.0\VC\BIN\link.EXE"' : return code '0x460'
Stop.




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Compile-Gdal-1-9-with-WIN64-YES-setting-tp5031177.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

________________________________________

This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not the intended recipient, you should contact us immediately and thereafter delete this message from your system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all electronic or other copies of the original message and any attachments thereof.

From cgodkin at gmail.com  Thu Jan 31 06:41:43 2013
From: cgodkin at gmail.com (Carl Godkin)
Date: Thu, 31 Jan 2013 06:41:43 -0800
Subject: [gdal-dev] Any more GDAL WMS examples?
Message-ID: <CAE=8km=S0yzDjjcc2fb5fzK9BaBpSGNR_OfJ4RcHLwXVCVTjrA@mail.gmail.com>

Hi again,

I am still trying to come up to speed on WMS using GDAL 1.9.2 and am
interested in some examples beyond what are
posted at the bottom of http://www.gdal.org/frmt_wms.html .

I can run the various gdal_translate examples and some of them even work.
 (All of them need to be adjusted since the XML file name printed in the
examples actually has "frmt_wms_" prepended, by the way.)

However, I can't get anything BUT those few examples to work.  For example,
the metacarta example says this:

  gdal_translate -of PNG -outsize 500 250 metacarta_wmsc.xml
metacarta_wmsc.png

However, I would like to specify a smaller area than the entire world.  The
provided XML file specifies the whole world:

<GDAL_WMS>
    <Service name="WMS">
        <Version>1</Version>
        <ServerUrl>http://labs.metacarta.com/wms-c/Basic.py?</ServerUrl>
        <Layers>basic</Layers>
    </Service>
    <DataWindow>
        <UpperLeftX>-180.0</UpperLeftX>
        <UpperLeftY>90.0</UpperLeftY>
        <LowerRightX>180.0</LowerRightX>
        <LowerRightY>-90.0</LowerRightY>
        <TileLevel>19</TileLevel>
        <TileCountX>2</TileCountX>
        <TileCountY>1</TileCountY>
    </DataWindow>
    <Projection>EPSG:4326</Projection>
    <BlockSizeX>256</BlockSizeX>
    <BlockSizeY>256</BlockSizeY>
    <BandsCount>3</BandsCount>
</GDAL_WMS>

Merely changing the UpperLeft/LowerRight values in the DataWindow section
does not work, and I think it's because the server only serves data at
specific multiples of 180/256 = 0.703125 step sizes (or something like
that).

For example, I tried to specify the window 24 to 25 degrees E and 60 to 61
degrees N which makes a request to the server like this:

http://labs.metacarta.com/wms-c/Basic.py?service=WMS&request=GetMap&version=1&layers=basic&styles=&srs=EPSG:4326&format=image/jpeg&width=256&height=256&bbox=24,60,25,61

If I paste that URL into my browser, I get this reply:

An error occurred: can't find resolution index for 0.003906. Available
resolutions are:
[0.703125, 0.3515625, 0.17578125, 0.087890625, 0.0439453125,
0.02197265625, 0.010986328125, 0.0054931640625, 0.00274658203125,
0.001373291015625, 0.0006866455078125, 0.00034332275390625,
0.000171661376953125, 8.58306884765625e-05, 4.291534423828125e-05,
2.1457672119140625e-05, 1.0728836059570312e-05,
5.3644180297851562e-06, 2.6822090148925781e-06,
1.3411045074462891e-06]



I have a feeling that I'm making this a lot harder than it should be.
Is there some bit of conditioning code somewhere that I'm overlooking?

Can someone fashion an XML GDAL_WMS request that will retrieve a 1000
x 1000 image from the lat/lon range above?

Thank you very much for any enlightenment,

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130131/ab71251d/attachment.html>

From even.rouault at mines-paris.org  Thu Jan 31 06:56:07 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 31 Jan 2013 15:56:07 +0100
Subject: [gdal-dev] Any more GDAL WMS examples?
In-Reply-To: <CAE=8km=S0yzDjjcc2fb5fzK9BaBpSGNR_OfJ4RcHLwXVCVTjrA@mail.gmail.com>
References: <CAE=8km=S0yzDjjcc2fb5fzK9BaBpSGNR_OfJ4RcHLwXVCVTjrA@mail.gmail.com>
Message-ID: <1359644167.510a86071b4af@imp.free.fr>

Selon Carl Godkin <cgodkin at gmail.com>:

> Hi again,
>
> I am still trying to come up to speed on WMS using GDAL 1.9.2 and am
> interested in some examples beyond what are
> posted at the bottom of http://www.gdal.org/frmt_wms.html .
>
> I can run the various gdal_translate examples and some of them even work.
>  (All of them need to be adjusted since the XML file name printed in the
> examples actually has "frmt_wms_" prepended, by the way.)
>
> However, I can't get anything BUT those few examples to work.  For example,
> the metacarta example says this:
>
>   gdal_translate -of PNG -outsize 500 250 metacarta_wmsc.xml
> metacarta_wmsc.png
>
> However, I would like to specify a smaller area than the entire world.  The
> provided XML file specifies the whole world:
>
> <GDAL_WMS>
>     <Service name="WMS">
>         <Version>1</Version>
>         <ServerUrl>http://labs.metacarta.com/wms-c/Basic.py?</ServerUrl>
>         <Layers>basic</Layers>
>     </Service>
>     <DataWindow>
>         <UpperLeftX>-180.0</UpperLeftX>
>         <UpperLeftY>90.0</UpperLeftY>
>         <LowerRightX>180.0</LowerRightX>
>         <LowerRightY>-90.0</LowerRightY>
>         <TileLevel>19</TileLevel>
>         <TileCountX>2</TileCountX>
>         <TileCountY>1</TileCountY>
>     </DataWindow>
>     <Projection>EPSG:4326</Projection>
>     <BlockSizeX>256</BlockSizeX>
>     <BlockSizeY>256</BlockSizeY>
>     <BandsCount>3</BandsCount>
> </GDAL_WMS>
>
> Merely changing the UpperLeft/LowerRight values in the DataWindow section
> does not work, and I think it's because the server only serves data at
> specific multiples of 180/256 = 0.703125 step sizes (or something like
> that).
>
> For example, I tried to specify the window 24 to 25 degrees E and 60 to 61
> degrees N which makes a request to the server like this:
>
>
http://labs.metacarta.com/wms-c/Basic.py?service=WMS&request=GetMap&version=1&layers=basic&styles=&srs=EPSG:4326&format=image/jpeg&width=256&height=256&bbox=24,60,25,61
>
> If I paste that URL into my browser, I get this reply:
>
> An error occurred: can't find resolution index for 0.003906. Available
> resolutions are:
> [0.703125, 0.3515625, 0.17578125, 0.087890625, 0.0439453125,
> 0.02197265625, 0.010986328125, 0.0054931640625, 0.00274658203125,
> 0.001373291015625, 0.0006866455078125, 0.00034332275390625,
> 0.000171661376953125, 8.58306884765625e-05, 4.291534423828125e-05,
> 2.1457672119140625e-05, 1.0728836059570312e-05,
> 5.3644180297851562e-06, 2.6822090148925781e-06,
> 1.3411045074462891e-06]
>
>
>
> I have a feeling that I'm making this a lot harder than it should be.
> Is there some bit of conditioning code somewhere that I'm overlooking?
>
> Can someone fashion an XML GDAL_WMS request that will retrieve a 1000
> x 1000 image from the lat/lon range above?

Unless you know what you are doing, don't hack the GDAL_WMS XML file for that.
The DataWindow is supposed to match the global extent of the layer on the
server, and defines how the tiles are numbered (or which requests are valid in
the case of WMS-C)

Just add the "standard" gdal_translate flags if you want to extract a subwindow
:

gdal_translate -of PNG -outsize 1000 1000 metacarta_wmsc.xml metacarta_wmsc.png
-projwin 24 61 25 60

(untested being behind corporate firewall right now)


From cgodkin at gmail.com  Thu Jan 31 06:56:55 2013
From: cgodkin at gmail.com (Carl Godkin)
Date: Thu, 31 Jan 2013 06:56:55 -0800
Subject: [gdal-dev] Any more GDAL WMS examples?
In-Reply-To: <CAE=8km=S0yzDjjcc2fb5fzK9BaBpSGNR_OfJ4RcHLwXVCVTjrA@mail.gmail.com>
References: <CAE=8km=S0yzDjjcc2fb5fzK9BaBpSGNR_OfJ4RcHLwXVCVTjrA@mail.gmail.com>
Message-ID: <CAE=8km=4k6SRzSEaBYd0usMwvuPTkZDFZL6Wc+uqzAMzY0Zk5A@mail.gmail.com>

After a day with no progress, I found an old answer to a similar question
here:

http://comments.gmane.org/gmane.comp.gis.gdal.devel/27163

I think I'm on my way now.

I see that I should leave the frmt_wms_XXX.xml files alone, and use the
-projwin mechanism to get what I need.

Sorry to waste the bandwidth,

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130131/f539c2b9/attachment.html>

From beyhan at deprem.gov.tr  Thu Jan 31 07:41:14 2013
From: beyhan at deprem.gov.tr (Murat BEYHAN)
Date: Thu, 31 Jan 2013 17:41:14 +0200
Subject: [gdal-dev] convert linestring to point data
Message-ID: <20130131152659.M25799@deprem.gov.tr>

Dear All,

I would like to convert linestring shape (.shp) file into point shape (.shp)
file using gdal. Is this made by gogr2ogr

ogr2ogr -f "ESRI Shapefile"  -nlt POINT e34c3_point.shp e34c3_line.shp
I have tried this but it gives an error 
Please How can I do using command
I do this using qgis but I have to do using command.
Thanks
Murat


-- 
This message has been scanned for viruses and
dangerous content by MailScanner, and is
believed to be clean.


From even.rouault at mines-paris.org  Thu Jan 31 07:51:14 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 31 Jan 2013 16:51:14 +0100
Subject: [gdal-dev] convert linestring to point data
In-Reply-To: <20130131152659.M25799@deprem.gov.tr>
References: <20130131152659.M25799@deprem.gov.tr>
Message-ID: <1359647474.510a92f2abb85@imp.free.fr>

Selon Murat BEYHAN <beyhan at deprem.gov.tr>:

> Dear All,
>
> I would like to convert linestring shape (.shp) file into point shape (.shp)
> file using gdal. Is this made by gogr2ogr
>
> ogr2ogr -f "ESRI Shapefile"  -nlt POINT e34c3_point.shp e34c3_line.shp
> I have tried this but it gives an error
> Please How can I do using command
> I do this using qgis but I have to do using command.

Amusingly, there was just today a blog entry on http://planet.osgeo.org/ about
that : http://spatialguru.com/node/133

> Thanks
> Murat
>
>
> --
> This message has been scanned for viruses and
> dangerous content by MailScanner, and is
> believed to be clean.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From asimmons at pvpc.org  Thu Jan 31 07:54:28 2013
From: asimmons at pvpc.org (Muskie)
Date: Thu, 31 Jan 2013 07:54:28 -0800 (PST)
Subject: [gdal-dev] Anyone tried using ogr2ogr on a remote MySQL db?
In-Reply-To: <51091F72.1070909@michiganwxsystem.com>
References: <1359512246486-5030802.post@n6.nabble.com>
	<5108837B.7030109@michiganwxsystem.com>
	<1359514441981-5030808.post@n6.nabble.com>
	<51091F72.1070909@michiganwxsystem.com>
Message-ID: <1359647668674-5031230.post@n6.nabble.com>

Jeff -- thanks! Look forward to it when you get to it. This has been a bit of
a frustrating road bump!



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Anyone-tried-using-ogr2ogr-on-a-remote-MySQL-db-tp5030802p5031230.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From Tyler.Mitchell at actian.com  Thu Jan 31 07:45:13 2013
From: Tyler.Mitchell at actian.com (Tyler Mitchell)
Date: Thu, 31 Jan 2013 10:45:13 -0500
Subject: [gdal-dev] convert linestring to point data
References: <20130131152659.M25799@deprem.gov.tr>
Message-ID: <6152BDF053E74643B4C0A41150F5ADC38B832E@USINVMAILB01.ingres.prv>

Hi Murat, 
I put together a PYthon script that uses OGR, just for you actually :)
 
https://github.com/spatialguru/NME/blob/master/ogr_explode.py
 
Run it like:
python ogr_explode.py e34c3_line.shp output.csv
 
It doesn't automatically create a shape file but you can convert from CSV to a shapefile with one more step.  But let me know first if this works for you.  Depending on how the Z or 3D dimension is stored, it may only have zeros in the third column of the CSV.  Try it and let me know!
 
Tyler

________________________________

From: gdal-dev-bounces at lists.osgeo.org on behalf of Murat BEYHAN
Sent: Thu 1/31/2013 7:41 AM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] convert linestring to point data



Dear All,

I would like to convert linestring shape (.shp) file into point shape (.shp)
file using gdal. Is this made by gogr2ogr

ogr2ogr -f "ESRI Shapefile"  -nlt POINT e34c3_point.shp e34c3_line.shp
I have tried this but it gives an error
Please How can I do using command
I do this using qgis but I have to do using command.
Thanks
Murat


--
This message has been scanned for viruses and
dangerous content by MailScanner, and is
believed to be clean.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130131/851f2b5b/attachment.html>

From szatko at radiantblue.com  Thu Jan 31 12:30:19 2013
From: szatko at radiantblue.com (Sarah Zatko)
Date: Thu, 31 Jan 2013 15:30:19 -0500
Subject: [gdal-dev] problems converting gdb to shp
Message-ID: <008301cdfff1$c9c5d840$5d5188c0$@radiantblue.com>

I'm trying to use the -where command in ogr2ogr (1.9.0) to separate out
different geometry types, as was described in the FAQ for converting gdb to
shp files, but when I do the following command

 

Ogr2ogr.exe -f ESRI Shapefile points.shp input.gdb -a_srs EPSG:4326 -nln
points -where 'ogr_geometry="POINT"' 

 

it thinks that the -where. part of the command is the name of a gdb layer.  

 

I tried moving the -where part of the command earlier, to before the -f
argument, but then it just hangs and doesn't complete at all.  

 

Any thoughts on what I'm doing wrong here?  

 

Also, when I try to go from shapefile to geodb in Windows, it only works if
I'm running as administrator.  Is that just a requirement?  It doesn't
require root in Linux.  

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130131/0edc1754/attachment.html>

From tyler.mitchell at actian.com  Thu Jan 31 12:49:03 2013
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Thu, 31 Jan 2013 12:49:03 -0800
Subject: [gdal-dev] problems converting gdb to shp
In-Reply-To: <008301cdfff1$c9c5d840$5d5188c0$@radiantblue.com>
References: <008301cdfff1$c9c5d840$5d5188c0$@radiantblue.com>
Message-ID: <8EE5288C-6093-45AA-9C4D-D494757B85FE@actian.com>

Hi Sarah,

Be sure to quote "ESRI Shapefile" or it will use "shapefile" as the output filename. 

Since Shapefile is default, you can remove the -f ... stuff altogether to simplify.

As far as I can tell that's your main problem there.  I don't have a GDB install to test against though.

Tyler

On 2013-01-31, at 12:30 PM, Sarah Zatko wrote:

> I?m trying to use the ?where command in ogr2ogr (1.9.0) to separate out different geometry types, as was described in the FAQ for converting gdb to shp files, but when I do the following command
>  
> Ogr2ogr.exe -f ESRI Shapefile points.shp input.gdb -a_srs EPSG:4326 -nln points -where 'ogr_geometry="POINT"'
>  
> it thinks that the ?where? part of the command is the name of a gdb layer. 
>  
> I tried moving the ?where part of the command earlier, to before the ?f argument, but then it just hangs and doesn?t complete at all. 
>  
> Any thoughts on what I?m doing wrong here? 
>  
> Also, when I try to go from shapefile to geodb in Windows, it only works if I?m running as administrator.  Is that just a requirement?  It doesn?t require root in Linux. 
>  
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



Tyler Mitchell
Engineering Director 
Actian Corporation
tyler.mitchell at actian.com

MOBILE 250-303-1831
SKYPE spatialguru
www.actian.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130131/8f7ef784/attachment.html>

From even.rouault at mines-paris.org  Thu Jan 31 12:53:48 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 31 Jan 2013 21:53:48 +0100
Subject: [gdal-dev] dxf linewidth
In-Reply-To: <510A45F8.7050500@sourcepole.ch>
References: <51079ADB.9080006@sourcepole.ch>
	<201301292341.07820.even.rouault@mines-paris.org>
	<510A45F8.7050500@sourcepole.ch>
Message-ID: <201301312153.48517.even.rouault@mines-paris.org>

Le jeudi 31 janvier 2013 11:22:48, Marco Hugentobler a ?crit :
> Hi Even
> 
> Ok, done (http://trac.osgeo.org/gdal/ticket/4978).
> 
> One thing that I did not do in the patch ( and should probably be done)
> is considering the symbology units. I saw that it is possible to query
> the unit type of the OGRStylePen. Is it possible to define e.g. the dpi
> in the featurestyle such that a driver might convert between pixel / mm?

I see that the DPI is st to a fixed value of 72 from what I see in 
ogrfeaturestyle.cpp. Can't say anything on units in DXF.

From even.rouault at mines-paris.org  Thu Jan 31 12:56:21 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 31 Jan 2013 21:56:21 +0100
Subject: [gdal-dev] problems converting gdb to shp
In-Reply-To: <8EE5288C-6093-45AA-9C4D-D494757B85FE@actian.com>
References: <008301cdfff1$c9c5d840$5d5188c0$@radiantblue.com>
	<8EE5288C-6093-45AA-9C4D-D494757B85FE@actian.com>
Message-ID: <201301312156.21462.even.rouault@mines-paris.org>

Le jeudi 31 janvier 2013 21:49:03, Tyler Mitchell a ?crit :
> Hi Sarah,
> 
> Be sure to quote "ESRI Shapefile" or it will use "shapefile" as the output
> filename.
> 
> Since Shapefile is default, you can remove the -f ... stuff altogether to
> simplify.
> 
> As far as I can tell that's your main problem there.  I don't have a GDB
> install to test against though.

This will not be enough. The -where "ogr_geometry = 'POINT'" will not work 
with the FileGDB driver since it will be evaluated directly with the FGDB SDK, 
but that where clause is specific to the OGRSQL dialect.

So something like :

ogr2ogr points.shp input.gdb  -a_srs EPSG:4326 -sql "SELECT * FROM 
the_layer_name_in_the_gdb_datasource WHERE ogr_geometry='POINT'" -dialect 
OGRSQL

(tested with GDAL 1.10dev)

> 
> Tyler
> 
> On 2013-01-31, at 12:30 PM, Sarah Zatko wrote:
> > I?m trying to use the ?where command in ogr2ogr (1.9.0) to separate out
> > different geometry types, as was described in the FAQ for converting gdb
> > to shp files, but when I do the following command
> > 
> > Ogr2ogr.exe -f ESRI Shapefile points.shp input.gdb -a_srs EPSG:4326 -nln
> > points -where 'ogr_geometry="POINT"'
> > 
> > it thinks that the ?where? part of the command is the name of a gdb
> > layer.
> > 
> > I tried moving the ?where part of the command earlier, to before the ?f
> > argument, but then it just hangs and doesn?t complete at all.
> > 
> > Any thoughts on what I?m doing wrong here?
> > 
> > Also, when I try to go from shapefile to geodb in Windows, it only works
> > if I?m running as administrator.  Is that just a requirement?  It
> > doesn?t require root in Linux.
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> Tyler Mitchell
> Engineering Director
> Actian Corporation
> tyler.mitchell at actian.com
> 
> MOBILE 250-303-1831
> SKYPE spatialguru
> www.actian.com

From tyler.mitchell at actian.com  Thu Jan 31 23:28:50 2013
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Thu, 31 Jan 2013 23:28:50 -0800
Subject: [gdal-dev] convert linestring to point data
In-Reply-To: <6152BDF053E74643B4C0A41150F5ADC38B832E@USINVMAILB01.ingres.prv>
References: <20130131152659.M25799@deprem.gov.tr>
	<6152BDF053E74643B4C0A41150F5ADC38B832E@USINVMAILB01.ingres.prv>
Message-ID: <52B462DA-346E-4374-8DEA-F7B491A95652@actian.com>

Just a brief follow up for posterity on the list...

I've completed my first run of updates on this script and it's looking pretty good.  Others welcomed to give feedback :)

It's been modularised now and also allows you to enter a field name to take the Z value from.

So Murat, it does everything you need now, so grab a fresh copy!

The only other improvement I can think of is to specify an output format and create a non-CSV output instead.  

Tyler

On 2013-01-31, at 7:45 AM, Tyler Mitchell wrote:

> Hi Murat,
> I put together a PYthon script that uses OGR, just for you actually :)
>  
> https://github.com/spatialguru/NME/blob/master/ogr_explode.py
>  
> Run it like:
> python ogr_explode.py e34c3_line.shp output.csv
>  
> It doesn't automatically create a shape file but you can convert from CSV to a shapefile with one more step.  But let me know first if this works for you.  Depending on how the Z or 3D dimension is stored, it may only have zeros in the third column of the CSV.  Try it and let me know!
>  
> Tyler
> 
> From: gdal-dev-bounces at lists.osgeo.org on behalf of Murat BEYHAN
> Sent: Thu 1/31/2013 7:41 AM
> To: gdal-dev at lists.osgeo.org
> Subject: [gdal-dev] convert linestring to point data
> 
> Dear All,
> 
> I would like to convert linestring shape (.shp) file into point shape (.shp)
> file using gdal. Is this made by gogr2ogr
> 
> ogr2ogr -f "ESRI Shapefile"  -nlt POINT e34c3_point.shp e34c3_line.shp
> I have tried this but it gives an error
> Please How can I do using command
> I do this using qgis but I have to do using command.
> Thanks
> Murat
> 
> 
> --
> This message has been scanned for viruses and
> dangerous content by MailScanner, and is
> believed to be clean.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



Tyler Mitchell
Engineering Director 
Actian Corporation
tyler.mitchell at actian.com

MOBILE 250-303-1831
SKYPE spatialguru
www.actian.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130131/498db60e/attachment-0001.html>

