From jorge.arevalo at gmail.com  Mon Jun  1 07:08:50 2009
From: jorge.arevalo at gmail.com (=?UTF-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Mon Jun  1 07:09:14 2009
Subject: [gdal-dev] Re: [postgis-devel] WKT Raster Driver weekly report
In-Reply-To: <38D7001B29E62F469A4CB27B323584EF21DC9D@dev011_ex.Dev.cadcorp.net>
References: <cb4457700905291853v33d29151ya58f73645e62e0c4@mail.gmail.com> 
	<cb4457700905310233kf86a57y6f2aedbbfa382ab0@mail.gmail.com> 
	<38D7001B29E62F469A4CB27B323584EF21DC9D@dev011_ex.Dev.cadcorp.net>
Message-ID: <cb4457700906010408h2c23ab28w74b287747117580d@mail.gmail.com>

Hello everybody,
Some quick responses:

Frank: About the SVN access, I thought in that. I created users for you and
Tamas. I'll provide you the url and the password by mail.

Mateusz: Sorry, I've approved your comment. Thanks for your advice.

Tamas (and Frank): Ok. I can write an initial plan, and post it in the blog
as the report for this friday, to discuss it. Then, I'll take a break for my
exams, and I'll be ready to start working again after them. Is it ok?

Best Regards
Jorge


On Mon, Jun 1, 2009 at 11:18 AM, Mateusz Loskot
<Mateusz.Loskot@cadcorp.com>wrote:

> Jorge Ar?valo wrote:
> > My first report, in this blog,
> > is
> http://www.gis4free.org/blog/2009/05/30/gsoc-09-weekly-report-1-2305-2905/
>
> Two days ago, I put a comment to this post but it vanished somehow.
> I just wanted to suggest you to run complete set of regression tests
> for GEOS + PostGIS + WKT Raster every time you rebuild them.
> It will help you to catch possible problems in any of these packages.
>
> > And you can follow the project on this
> > gdal trac page http://trac.osgeo.org/gdal/wiki/WKTRasterDriver
>
> Cool.
>
> Good luck!
>
> Best regards,
> --
> Mateusz Loskot
> Senior Programmer, Cadcorp
> http://www.cadcorp.com
>
>
>
>
>
> _______________________________________________
> postgis-devel mailing list
> postgis-devel@postgis.refractions.net
> http://postgis.refractions.net/mailman/listinfo/postgis-devel
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090601/d98857af/attachment.html
From cjanssen at iavo-rs.com  Mon Jun  1 10:20:58 2009
From: cjanssen at iavo-rs.com (Christiaan Janssen)
Date: Mon Jun  1 10:51:02 2009
Subject: [gdal-dev] Erdas .img format (HFA) overview troubles
Message-ID: <6D14BC56-2F46-4BFD-B2CF-3B840FEA00FF@iavo-rs.com>

After reading the HFA image format description, I was under the impression that GDAL would support external .ovr files for this format but it seems that is not the case. I ran quick test with gdaladdo ("gdaladdo -ro test.img 2 4 8") and got the following error message: "ERROR 6: BuildOverviews() not supported for this dataset." After poking through the code a bit I can see that HFA driver doesn't seem to be using the default overview manager so it would seem that .ovr files aren't actually ever being used (but i could be wrong). Was this the intended result, or is this a bug?
Christiaan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090601/34afada9/attachment.html
From warmerdam at pobox.com  Mon Jun  1 11:23:47 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jun  1 11:24:10 2009
Subject: [gdal-dev] Erdas .img format (HFA) overview troubles
In-Reply-To: <6D14BC56-2F46-4BFD-B2CF-3B840FEA00FF@iavo-rs.com>
References: <6D14BC56-2F46-4BFD-B2CF-3B840FEA00FF@iavo-rs.com>
Message-ID: <4A23F283.5080309@pobox.com>

Christiaan Janssen wrote:
> After reading the HFA image format description, I was under the 
> impression that GDAL would support external .ovr files for this 
> format but it seems that is not the case. I ran quick test with gdaladdo 
> ("gdaladdo -ro test.img 2 4 8") and got the following error message: 
> "ERROR 6: BuildOverviews() not supported for this dataset." After poking 
> through the code a bit I can see that HFA driver doesn't seem to be 
> using the default overview manager so it would seem that .ovr files 
> aren't actually ever being used (but i could be wrong). Was this the 
> intended result, or is this a bug?

Christiaan,

I believe this is the intended behavior.  HFA format overviews are always
handling either in the .img file itself, in the .aux file or in an .rrd
file.

If the documentation indicates otherwise, please point out the location and
I'll attempt to clarify it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From cjanssen at iavo-rs.com  Mon Jun  1 11:39:10 2009
From: cjanssen at iavo-rs.com (Christiaan Janssen)
Date: Mon Jun  1 11:39:34 2009
Subject: [gdal-dev] Erdas .img format (HFA) overview troubles
In-Reply-To: <4A23F283.5080309@pobox.com>
Message-ID: <48119B76-8C08-43FC-B3D6-BB864DE3620F@iavo-rs.com>

On the page http://www.gdal.org/frmt_hfa.html, it mentions the creation of .ovr files under the Creation Issue section. Also, am I wrong in thinking the command "gdaladdo -ro test.img 2 4 8" should have at least generated an .aux (or .rrd) file and not errored the way it did? Thanks.

Christiaan

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Monday, June 01, 2009 11:24 AM
To: Christiaan Janssen
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Erdas .img format (HFA) overview troubles

Christiaan Janssen wrote:
> After reading the HFA image format description, I was under the 
> impression that GDAL would support external .ovr files for this format 
> but it seems that is not the case. I ran quick test with gdaladdo 
> ("gdaladdo -ro test.img 2 4 8") and got the following error message:
> "ERROR 6: BuildOverviews() not supported for this dataset." After 
> poking through the code a bit I can see that HFA driver doesn't seem 
> to be using the default overview manager so it would seem that .ovr 
> files aren't actually ever being used (but i could be wrong). Was this 
> the intended result, or is this a bug?

Christiaan,

I believe this is the intended behavior.  HFA format overviews are always handling either in the .img file itself, in the .aux file or in an .rrd file.

If the documentation indicates otherwise, please point out the location and I'll attempt to clarify it.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Mon Jun  1 11:52:43 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jun  1 11:53:09 2009
Subject: [gdal-dev] Erdas .img format (HFA) overview troubles
In-Reply-To: <48119B76-8C08-43FC-B3D6-BB864DE3620F@iavo-rs.com>
References: <48119B76-8C08-43FC-B3D6-BB864DE3620F@iavo-rs.com>
Message-ID: <4A23F94B.30007@pobox.com>

Christiaan Janssen wrote:
> On the page http://www.gdal.org/frmt_hfa.html, it mentions the creation of
> .ovr files under the Creation Issue section. 

Christiaan,

I have removed this inaccurate comment.

> Also, am I wrong in thinking
> the command "gdaladdo -ro test.img 2 4 8" should have at least generated an
> .aux (or .rrd) file and not errored the way it did? Thanks.

The error message was unhelpful, but I presume the issue is that overviews
cannot be generated in a read-only file.  If you would like to file a ticket
on this, I could look into more appropriate error handling.

I would add, if you wanted ovr support it should be relatively trivial for
you to add it in your local build with a call to initialize the
overview manager at the end of the Open() method.

     poDS->oOvManager.Initialize( poDS, poOpenInfo->pszFilename );

I am hesitant to do this in the mainline code though.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Mon Jun  1 12:09:49 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jun  1 12:10:02 2009
Subject: [gdal-dev] Erdas .img format (HFA) overview troubles
In-Reply-To: <4A23F94B.30007@pobox.com>
References: <48119B76-8C08-43FC-B3D6-BB864DE3620F@iavo-rs.com>
	<4A23F94B.30007@pobox.com>
Message-ID: <200906011809.50213.even.rouault@mines-paris.org>

Christiaan,

I see this in hfadataset.cpp :

CPLErr HFADataset::IBuildOverviews( const char *pszResampling, 
                                    int nOverviews, int *panOverviewList, 
                                    int nListBands, int *panBandList,
                                    GDALProgressFunc pfnProgress, 
                                    void * pProgressData )
    
{
  ...
    if( GetAccess() == GA_ReadOnly )
        return GDALDataset::IBuildOverviews( pszResampling, 
                                             nOverviews, panOverviewList, 
                                             nListBands, panBandList, 
                                             pfnProgress, pProgressData );
   ...
}

So with gdaladdo -ro, it defaults to GDALDataset::IBuildOverviews(), that will 
fail because the default overview mechanism isn't initialized as Frank noted 
below.

What you want to use is the HFA_USE_RRD global config option (documented after 
the list of creation options)

gdaladdo --config HFA_USE_RRD YES test.img 2 4 8


Even

Le Monday 01 June 2009 17:52:43 Frank Warmerdam, vous avez ?crit?:
> Christiaan Janssen wrote:
> > On the page http://www.gdal.org/frmt_hfa.html, it mentions the creation
> > of .ovr files under the Creation Issue section.
>
> Christiaan,
>
> I have removed this inaccurate comment.
>
> > Also, am I wrong in thinking
> > the command "gdaladdo -ro test.img 2 4 8" should have at least generated
> > an .aux (or .rrd) file and not errored the way it did? Thanks.
>
> The error message was unhelpful, but I presume the issue is that overviews
> cannot be generated in a read-only file.  If you would like to file a
> ticket on this, I could look into more appropriate error handling.
>
> I would add, if you wanted ovr support it should be relatively trivial for
> you to add it in your local build with a call to initialize the
> overview manager at the end of the Open() method.
>
>      poDS->oOvManager.Initialize( poDS, poOpenInfo->pszFilename );
>
> I am hesitant to do this in the mainline code though.
>
> Best regards,


From ltoma at bowdoin.edu  Mon Jun  1 13:58:44 2009
From: ltoma at bowdoin.edu (Laura Toma)
Date: Mon Jun  1 13:58:46 2009
Subject: [gdal-dev] gdalwarp on large files
Message-ID: <AFEF3EA0-D667-4DE5-A7E5-F7FA099B5EF3@bowdoin.edu>

Hi,

I am trying to create a large DEM from SRTM3 data.  I have a folder  
'australia' which includes 1060 .hgt tiles downloaded from  
'rome0srp01u.ecs.nasa.gov/', and I am trying to create a tiff for all  
the tiles in this folder.

I have tried to run 'gdalwarp'  several times and every time the   
server gets reset (see below) after  processing the first .hgt file.   
The tiles are not that large (i think i3600x3600), but processing the  
first tile takes hours.

Has anybody tried anything similar? Am I doing something wrong?  Any  
advise would be greatly appreciated.

thanks,
Laura

 > gdalwarp *hgt srtm_mosaik_australasia.tiff
Creating output file that is 432001P x 40801L.
Processing input file S11E119.hgt.
Using internal nodata values (eg. -32768) for image S11E119.hgt.
0...10...20...30...40...50...60..Read from remote host cod: Connection  
reset by peer

From even.rouault at mines-paris.org  Mon Jun  1 14:30:46 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jun  1 14:30:56 2009
Subject: [gdal-dev] gdalwarp on large files
In-Reply-To: <AFEF3EA0-D667-4DE5-A7E5-F7FA099B5EF3@bowdoin.edu>
References: <AFEF3EA0-D667-4DE5-A7E5-F7FA099B5EF3@bowdoin.edu>
Message-ID: <200906012030.47212.even.rouault@mines-paris.org>

Laura,

From the error message, I guess you are running gdalwarp on a remote server 
through a ssh connexion. There's probably a timeout that occurs since your 
operation takes hours. You should check the ssh options of the client/server 
for that.

In your use case, if you just want to create a mosaic of SRTM files and not 
really warp them, you'd better use gdalbuildvrt to create quickly a VRT file 
(XML-based) and then translate it to geotiff. This should run much faster 
than gdalwarp. But the 432001P x 40801L output size will remain. As it is 
huge, it will also likely take some time !

gdalbuildvrt mosaic.vrt *hgt
gdal_translate mosaic.vrt mosaic.tif

If you only use the mosaic with GDAL enabled tools, you can skip the 
gdal_translate step. That will save space (17.6 GB!) and time (a few seconds 
v.s. several hours).

Best regards,
Even

Le Monday 01 June 2009 19:58:44 Laura Toma, vous avez ?crit?:
> Hi,
>
> I am trying to create a large DEM from SRTM3 data.  I have a folder
> 'australia' which includes 1060 .hgt tiles downloaded from
> 'rome0srp01u.ecs.nasa.gov/', and I am trying to create a tiff for all
> the tiles in this folder.
>
> I have tried to run 'gdalwarp'  several times and every time the
> server gets reset (see below) after  processing the first .hgt file.
> The tiles are not that large (i think i3600x3600), but processing the
> first tile takes hours.
>
> Has anybody tried anything similar? Am I doing something wrong?  Any
> advise would be greatly appreciated.
>
> thanks,
> Laura
>
>  > gdalwarp *hgt srtm_mosaik_australasia.tiff
>
> Creating output file that is 432001P x 40801L.
> Processing input file S11E119.hgt.
> Using internal nodata values (eg. -32768) for image S11E119.hgt.
> 0...10...20...30...40...50...60..Read from remote host cod: Connection
> reset by peer
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Mon Jun  1 14:34:33 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jun  1 14:34:41 2009
Subject: [gdal-dev] gdalwarp on large files
In-Reply-To: <200906012030.47212.even.rouault@mines-paris.org>
References: <AFEF3EA0-D667-4DE5-A7E5-F7FA099B5EF3@bowdoin.edu>
	<200906012030.47212.even.rouault@mines-paris.org>
Message-ID: <200906012034.33606.even.rouault@mines-paris.org>

Actually my computation was wrong. I forgot that the datatype of a DEM is 
coded on Int16. So the expected size is 432000 * 40800 * 2 = 35.2 GB.
And as it is over 4GB, applications that can use such a TIFF file must be able 
to deal with BigTIFF.

Le Monday 01 June 2009 20:30:46 Even Rouault, vous avez ?crit?:
> Laura,
>
> From the error message, I guess you are running gdalwarp on a remote server
> through a ssh connexion. There's probably a timeout that occurs since your
> operation takes hours. You should check the ssh options of the
> client/server for that.
>
> In your use case, if you just want to create a mosaic of SRTM files and not
> really warp them, you'd better use gdalbuildvrt to create quickly a VRT
> file (XML-based) and then translate it to geotiff. This should run much
> faster than gdalwarp. But the 432001P x 40801L output size will remain. As
> it is huge, it will also likely take some time !
>
> gdalbuildvrt mosaic.vrt *hgt
> gdal_translate mosaic.vrt mosaic.tif
>
> If you only use the mosaic with GDAL enabled tools, you can skip the
> gdal_translate step. That will save space (17.6 GB!) and time (a few
> seconds v.s. several hours).
>
> Best regards,
> Even
>
> Le Monday 01 June 2009 19:58:44 Laura Toma, vous avez ?crit?:
> > Hi,
> >
> > I am trying to create a large DEM from SRTM3 data.  I have a folder
> > 'australia' which includes 1060 .hgt tiles downloaded from
> > 'rome0srp01u.ecs.nasa.gov/', and I am trying to create a tiff for all
> > the tiles in this folder.
> >
> > I have tried to run 'gdalwarp'  several times and every time the
> > server gets reset (see below) after  processing the first .hgt file.
> > The tiles are not that large (i think i3600x3600), but processing the
> > first tile takes hours.
> >
> > Has anybody tried anything similar? Am I doing something wrong?  Any
> > advise would be greatly appreciated.
> >
> > thanks,
> > Laura
> >
> >  > gdalwarp *hgt srtm_mosaik_australasia.tiff
> >
> > Creating output file that is 432001P x 40801L.
> > Processing input file S11E119.hgt.
> > Using internal nodata values (eg. -32768) for image S11E119.hgt.
> > 0...10...20...30...40...50...60..Read from remote host cod: Connection
> > reset by peer
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From moodleyp at cs.ukzn.ac.za  Tue Jun  2 09:46:11 2009
From: moodleyp at cs.ukzn.ac.za (Poovendran Moodley)
Date: Tue Jun  2 09:46:34 2009
Subject: [gdal-dev] GDAL Python Development: Area Selection
In-Reply-To: <200905291959.58879.even.rouault@mines-paris.org>
References: <b18bbf6f0905270306m4b1b88b2k1a567a5a4c6f6654@mail.gmail.com> 
	<200905272135.44255.even.rouault@mines-paris.org>
	<b18bbf6f0905282343rc0449f7i3ed0883c7513dc5@mail.gmail.com> 
	<200905291959.58879.even.rouault@mines-paris.org>
Message-ID: <b18bbf6f0906020646l42b06b78ncf8876ff6794e5f3@mail.gmail.com>

Hi Even,

Thank you for the additional resources! hehe and thanks to Frank for making
GDAL available :)

Kind regards
Pooven

On Fri, May 29, 2009 at 7:59 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Pooven,
>
> We clearly miss a specific documentation for the GDAL Python bindings
> (contributions welcome !). The OGR ones have docstring help generated from
> C++ doxygen.
>
> Generally, the Python API is close to the C++ one that is documented on the
> website, but there are a few specific methods like ReadRaster() that are
> specific to the binding. There's also the Javadoc of the Java bindings
> (http://gdal.org/java/) that can be somehow useful, as they share a lot of
> things in common, but expect a few differences too.
>
> A few other potential helpfull pointers :
> * Someone brought my attention to the following site,
> http://www.gis.usu.edu/~chrisg/python/<http://www.gis.usu.edu/%7Echrisg/python/>,
> that has very interesting slides and
> exercices about how to use GDAL/OGR in Python.
> * The various utilities written in Python, can also serve as exemple :
> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/scripts
> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/samples
>
> (Ah, and Frank Warmerdam, "the guy there" answering in the post you refer
> to,
> is the main author of GDAL ;-) )
>
> Even
>
> Le Friday 29 May 2009 08:43:08 Poovendran Moodley, vous avez ?crit :
> > Hi Even,
> >
> > I'm really appreciative of your help! And yes, gt[2] = gt[4] = 0 :)
> Here's
> > the code that I've written thus far (for those that are interested --
> > hopefully I'm not mistaken in my coding!):
> > def select(filename, x1, y1, x2, y2):
> >     dataset = gdal.Open( filename, GA_ReadOnly )
> >     colStart = int(math.ceil((x1 - gt[0])/gt[1]))
> >     rowStart = int(math.ceil((y1 - gt[3])/gt[5]))
> >     colEnd = int(math.ceil((x2 - gt[0])/gt[1]))
> >     rowEnd = int(math.ceil((y2 - gt[3])/gt[5]))
> >     band = dataset.GetRasterBand(1)
> >     n = colEnd - colStart + 1
> >     colStart = colStart - 1 #Because ReadRaster begins at row 0
> >     for k in range(rowStart - 1, rowEnd):
> >         scanline = band.ReadRaster(colStart, k, n, 1, n, 1, GDT_Float32)
> > ''' reading 1 row at a time within specified window '''
> >         tuple_of_floats = struct.unpack('f' * n, scanline)
> >         print tuple_of_floats
> >
> > It took me a while to fully understand how ReadRaster works. I read a
> post
> > in the FWTools newsgroup:
> > http://lists.maptools.org/pipermail/fwtools/2005-September/000138.html
> > The guy there explained the usage quite well. It's a pity that there
> isn't
> > more documentation readily available. Thank you again for your assistance
> > Even! All of the best to you :)
> >
> > Kind regards
> > Pooven
> >
> > On Wed, May 27, 2009 at 9:35 PM, Even Rouault
> >
> > <even.rouault@mines-paris.org>wrote:
> > > Pooven,
> > >
> > > You're doing things the right way. GDAL doesn't provide any high-level
> > > function to extract a region from a bounding box expressed in projected
> > > coordinates. You have to compute the pixel coordinates of the corner of
> > > the bounding box yourself by using the inverse of the geotransform
> matrix
> > > returned by the GetGeoTransform() method of the dataset.
> > >
> > > gt = ds.GetGeoTransform()
> > > x_pixel = (x_projected - gt[0]) / gt[1]
> > > y_pixel = (y_projected - gt[3]) / gt[5]
> > >
> > > (provided that your raster doesn't has any rotation or shearing, that
> is
> > > to say that gt[2] = gt[4] = 0)
> > >
> > > Best regards,
> > > Even
> > >
> > > Le Wednesday 27 May 2009 12:06:10 Poovendran Moodley, vous avez ?crit :
> > > > Hi there,
> > > >
> > > > I want to select only a region of a raster file; that is, suppose I
> > > > know the coordinates that form a bounding box around a region, I want
> > > > to
> > >
> > > select
> > >
> > > > just that region and write it to another file.
> > > >
> > > > I'm rather new to GDAL and thus far I'm only aware of one way to do
> > > > this;
> > > >
> > > > since I'm using Python:
> > > > > scanline = band.ReadRaster( 0, 0, band.XSize, 1, band.XSize, 1,
> > > > > GDT_Float32
> > > > > <
> > >
> > >
> http://www.gdal.org/gdal_8h.html#22e22ce0a55036a96f652765793fb7a4f5cbd2f
> > >
> > > > >96abffd9ac061fc0dced5cbba> )
> > > > >
> > > > > I believe that I can specify the window of raster data to read
> using
> > >
> > > the
> > >
> > > > 3rd till 6th input parameters of the above method (with reasonable
> size
> > > > reads untill the entire regions I'm interested in is read).
> > > >
> > > > Is there some other way this was suppose to be done? The method above
> > >
> > > will
> > >
> > > > require me to convert my coordinates into rows and columns (I think)
> > >
> > > which
> > >
> > > > is fine... but leaves room for error so I'd like to only rely on GDAL
> > > > routines. Can someone please advise? It could very well be that I'm
> > >
> > > totally
> > >
> > > > mistaken... I hope this isn't such a bad question...
> > > >
> > > > Kind regards
> > > > Pooven
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090602/92ea08a6/attachment-0001.html
From bfraser at geoanalytic.com  Tue Jun  2 13:50:40 2009
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Tue Jun  2 13:50:52 2009
Subject: [gdal-dev] Too much precision in WKT
Message-ID: <4A256670.5030201@geoanalytic.com>

I've been experimenting with v1.6.0 ogr2ogr:

    ogr2ogr -f csv test_dir test_in.shp -nln test_out -lco GEOMETRY=AS_WKT

The precision of the coordinates in the WKT seems to be overkill, eg: 

    "LINESTRING (-115.11433812265155 53.146791166875367,-115.12192424362472 53.147304268559473,

Is there any way to limit the precision?

Thanks!
Brent Fraser
From warmerdam at pobox.com  Tue Jun  2 14:51:30 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jun  2 14:51:45 2009
Subject: [gdal-dev] Too much precision in WKT
In-Reply-To: <4A256670.5030201@geoanalytic.com>
References: <4A256670.5030201@geoanalytic.com>
Message-ID: <4A2574B2.6000305@pobox.com>

Brent Fraser wrote:
> I've been experimenting with v1.6.0 ogr2ogr:
> 
>    ogr2ogr -f csv test_dir test_in.shp -nln test_out -lco GEOMETRY=AS_WKT
> 
> The precision of the coordinates in the WKT seems to be overkill, eg:
>    "LINESTRING (-115.11433812265155 
> 53.146791166875367,-115.12192424362472 53.147304268559473,
> 
> Is there any way to limit the precision?

Brent,

This question has come up a few times in the context of different text
oriented drivers.  I'm wondering if we should add an option to ogr2ogr
(and a method on OGRGeometry) to reduce coordinate precision to a specified
amount.  I think I prefer this approach to the alternative of adding creation
options or configuration variables to each driver text driver.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Tue Jun  2 14:59:54 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jun  2 15:00:07 2009
Subject: [gdal-dev] Too much precision in WKT
In-Reply-To: <4A256670.5030201@geoanalytic.com>
References: <4A256670.5030201@geoanalytic.com>
Message-ID: <200906022059.55729.even.rouault@mines-paris.org>

Brent,

no, there's currently no way to limit the precision.

By looking at your example, it seems that the extra figures are significant (but perhaps not for your use case). You'd get 000001 or 999999 at the end of the numbers if they were not significant So there's no way OGR can guess that you don't want them.

The WKT formatting for a point is done by OGRMakeWktCoordinate() in ogr/ogrutils.cpp and it always outputs 15 digits after the comma. This is the place where to hack if you want to change that default behaviour. The easiest way to add this would be adding a configuration option. The other - and cleaner - possibility is to propagate a precision parameter into the whole sequence of calls of ExportToWkt(). In any case, care should be taken that the output buffer passed by calling functions is sufficiently large. Currently all callers are supposed to pass a sufficiently large buffer, but if precision is made parametrable, this would be a bit more complicated : that wouldn't be a bad thing by the way to revisit that, as currently the code that allocates the buffer has plenty of magic - and different - constants all over and different tests to check if it must be resized...

But specifying the formatting is not as trivial as one could think at first. For a floating point, you have several possibilities that are reflected by the possibilities offered by printf with floating numbers :
- fixed point notiation (%f) where you can control the maximum number of figures after the comma, but not before
- exponential notation (%e) where you can control the number of significant figures.
- fixed point or exponential (%g), whichever is more appropriate for its magnitude

I'm not sure how the user could specify the format he wants. Passing the printf formatting string is a bit dangerous, as very bad things could happen if he got wrong...

I found that Frank had written a paragraph somehow a bit related to that issue, but it was more about OGC WKT Coordinate System. See "Numerical Precision in WKT" http://home.gdal.org/projects/opengis/wktproblems.html

I also found the following discussion : http://lists.ingres.com/pipermail/gis-users/2009-January/000145.html

Best regards,

Even

P.S : I had a doubt if the OGC WKT spec allowed exponential notation, but apparently yes (OGC 06-103r3 page 53-54, OpenGIS? Implementation Specification for Geographic  information - Simple feature access - Part 1: Common architecturen v1.2).


Le Tuesday 02 June 2009 19:50:40 Brent Fraser, vous avez ?crit?:
> I've been experimenting with v1.6.0 ogr2ogr:
>
>     ogr2ogr -f csv test_dir test_in.shp -nln test_out -lco GEOMETRY=AS_WKT
>
> The precision of the coordinates in the WKT seems to be overkill, eg:
>
>     "LINESTRING (-115.11433812265155 53.146791166875367,-115.12192424362472
> 53.147304268559473,
>
> Is there any way to limit the precision?
>
> Thanks!
> Brent Fraser
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090602/96b82fc8/attachment.html
From szekerest at gmail.com  Tue Jun  2 17:30:24 2009
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Jun  2 17:30:28 2009
Subject: [Gdal-dev] Warping a warped file C# bindings
In-Reply-To: <1243802858650-3003215.post@n2.nabble.com>
References: <1243802858650-3003215.post@n2.nabble.com>
Message-ID: <f3b73b7d0906021430l2029c0f4o6c53938a8b0c2c7d@mail.gmail.com>

Hi,

I'm not sure about this problem, I suspect cascading the vrt datasets should
normally work. Could you provide your complete C# example to produce the
output and the gdal_warp command line to examine the difference?

Best regards,

Tamas



2009/5/31 edomazlicky <edomazlicky@gmail.com>

>
> I am trying to warp a NAD27 UTM file to Google Mercator 900913. My
> understanding is that for this to happen you have to first warp the file to
> WGS84 and then to 900913. I have tried going straight from NAD27->900913
> and
> I get projection errors similar to if you plotted a WGS84 coordinate on a
> NAD27 map. So to accomplish this two-step warp I have been trying to do
> something kind of like this:
>
> Dim oWGS84 As New OSGeo.OSR.SpatialReference("")
> ' WGS84 UTM Zone 10
> oWGS84.ImportFromEPSG(32610)
> Dim wgs84_wkt As String = ""
> oWGS84.ExportToPrettyWkt(wgs84_wkt, 0)
> InterMed = OSGeo.GDAL.Gdal.AutoCreateWarpedVRT(SrcGdalDataSet, src_wkt,
> wgs84_wkt, eReSample, 0.125)
> GdalDataSet = OSGeo.GDAL.Gdal.AutoCreateWarpedVRT(InterMed, wgs84_wkt,
> dst_wkt, eReSample, 0.125)
>
> Where src_wkt contains the NAD27 WKT and dst_wkt contains the 900913 WKT.
> This doesn't work- I am getting the same results I get if I try to go
> straight from NAD27->900913. However if instead I warp the file in
> gdal_warp
> first to WGS84 and then go from that to 900913 it works fine. Is there
> anyway to warp these files without making a new file fist? I would like for
> it all to be done in memory without messing with temporary files or calling
> gdal_warp externally.
> --
> View this message in context:
> http://n2.nabble.com/Warping-a-warped-file-C--bindings-tp3003215p3003215.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090602/a770ca50/attachment.html
From bfraser at geoanalytic.com  Wed Jun  3 09:57:42 2009
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Jun  3 09:58:01 2009
Subject: [gdal-dev] Too much precision in WKT
In-Reply-To: <4A2619B7.3050606@york.ac.uk>
References: <4A256670.5030201@geoanalytic.com> <4A2619B7.3050606@york.ac.uk>
Message-ID: <4A268156.2030908@geoanalytic.com>

Peter,

  I want to round the coordinates of the vertices of linestrings represented as WKT, not the projection parameters.  My problem is that databases have different field types for strings depending on their expected length (MS Access TEXT vs MEMO for example, and I'm still trying to find info on DBF types).

   As you've explained below, instead of representing the latitude of a vertex as 53.146791166875367, it would be ok to instead use 53.1467912 and be within a centimeter of the original latitude (as long as the projection parameters remained at their full precision).

Best Regards,
Brent Fraser

Peter J Halls wrote:
> Brent,
> 
>    why would you want to?  Maybe you do not appreciate the implications 
> of so doing?  The parameters of which you complain define the ellipsoid, 
> the shape and measurements of the Earth, to be used for that 
> projection.  Round them and you effectively change the size and shape of 
> the Earth!
> 
>    Based on the Clarke Ellipsoid, 1m at the equator is approximately 
> 0.0008833141949 of a degree; round that and you lose the positional 
> accuracy - and 1m positional accuracy is, frankly, not great.  You can 
> divide that figure by ten if you want to work at .1m positional 
> accuracy.  However, most mapping agencies and surveyors will probably 
> use 1cm positional accuracy, or one hundreth: 0.000008833141949.  There 
> are a number of other spheroids and ellipsoids in use, as the surface of 
> our planet is sufficiently irregular to necessitate different 
> measurements depending upon the location of interest.
> 
>    The map projection equations are sensitive to this numerical 
> precision - they have to be - so reducing the numerical precision of the 
> projection parameters will significantly reduce the precision of the 
> final result.  Indeed, it does not take much rounding to have a dramatic 
> result, should you seek to align the results with material projected 
> using the proper parameters.
> 
>    You can test this yourself be experimenting with some spherical 
> trigonometry - the mathematics necessary for working with position on a 
> sphere.  You can find the equations for the various projections in J P 
> Snyder's 'Map Projections: a working manual', which is available online 
> from USGS.  Try out some of the equations by hand, with the full 
> precision and with your proposed precision for some locations in your 
> area of interest and I'm sure you will then appreciate the need for the 
> precision in these parameters.
> 
> Best wishes,
> 
> Peter
> 
> Brent Fraser wrote:
>> I've been experimenting with v1.6.0 ogr2ogr:
>>
>>    ogr2ogr -f csv test_dir test_in.shp -nln test_out -lco GEOMETRY=AS_WKT
>>
>> The precision of the coordinates in the WKT seems to be overkill, eg:
>>    "LINESTRING (-115.11433812265155 
>> 53.146791166875367,-115.12192424362472 53.147304268559473,
>>
>> Is there any way to limit the precision?
>>
>> Thanks!
>> Brent Fraser
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
From bfraser at geoanalytic.com  Wed Jun  3 10:14:48 2009
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Jun  3 10:15:04 2009
Subject: [gdal-dev] Too much precision in WKT
In-Reply-To: <4A2574B2.6000305@pobox.com>
References: <4A256670.5030201@geoanalytic.com> <4A2574B2.6000305@pobox.com>
Message-ID: <4A268558.1060007@geoanalytic.com>

Frank,

  I'm all for that approach.  The option should be added to ogrinfo as well since it can dump out WKT when incanted properly (I had started to sed/grep/awk its output, then I found that ogr2ogr -f CSV would dump WKT geometry).

Many Thanks,
Brent Fraser

Frank Warmerdam wrote:
> Brent Fraser wrote:
>> I've been experimenting with v1.6.0 ogr2ogr:
>>
>>    ogr2ogr -f csv test_dir test_in.shp -nln test_out -lco GEOMETRY=AS_WKT
>>
>> The precision of the coordinates in the WKT seems to be overkill, eg:
>>    "LINESTRING (-115.11433812265155 
>> 53.146791166875367,-115.12192424362472 53.147304268559473,
>>
>> Is there any way to limit the precision?
> 
> Brent,
> 
> This question has come up a few times in the context of different text
> oriented drivers.  I'm wondering if we should add an option to ogr2ogr
> (and a method on OGRGeometry) to reduce coordinate precision to a specified
> amount.  I think I prefer this approach to the alternative of adding 
> creation
> options or configuration variables to each driver text driver.
> 
> Best regards,
From bfraser at geoanalytic.com  Wed Jun  3 11:35:50 2009
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Jun  3 11:36:12 2009
Subject: [gdal-dev] Too much precision in WKT
In-Reply-To: <200906022059.55729.even.rouault@mines-paris.org>
References: <4A256670.5030201@geoanalytic.com>
	<200906022059.55729.even.rouault@mines-paris.org>
Message-ID: <4A269856.5070509@geoanalytic.com>

Even,

  I'll likely do the hack for now.  I need to write an easy-to-use app that spits out the first and last point coordinates of the linestrings as well as the linestrings in WKT for eventual loading into a database, so I might as well hard code the precision for now.

 Personally, I think something like an option of:

  -WKT_cp <digits to represent the fractional part>
eg:
  -WKT_cp 7   would result in 53.1467912

to specify the WKT coordinate precision would be good enough for a long term solution.  Easy to implement, easy to document, and easy to check the user input. And would likely handle most of the practical precision needs.

Best Regards,
Brent Fraser

Even Rouault wrote:
> Brent,
> 
> no, there's currently no way to limit the precision.
> 
> By looking at your example, it seems that the extra figures are 
> significant (but perhaps not for your use case). You'd get 000001 or 
> 999999 at the end of the numbers if they were not significant So there's 
> no way OGR can guess that you don't want them.
> 
> The WKT formatting for a point is done by OGRMakeWktCoordinate() in 
> ogr/ogrutils.cpp and it always outputs 15 digits after the comma. This 
> is the place where to hack if you want to change that default behaviour. 
> The easiest way to add this would be adding a configuration option. The 
> other - and cleaner - possibility is to propagate a precision parameter 
> into the whole sequence of calls of ExportToWkt(). In any case, care 
> should be taken that the output buffer passed by calling functions is 
> sufficiently large. Currently all callers are supposed to pass a 
> sufficiently large buffer, but if precision is made parametrable, this 
> would be a bit more complicated : that wouldn't be a bad thing by the 
> way to revisit that, as currently the code that allocates the buffer has 
> plenty of magic - and different - constants all over and different tests 
> to check if it must be resized...
> 
> But specifying the formatting is not as trivial as one could think at 
> first. For a floating point, you have several possibilities that are 
> reflected by the possibilities offered by printf with floating numbers :
> 
> - fixed point notiation (%f) where you can control the maximum number of 
> figures after the comma, but not before
> 
> - exponential notation (%e) where you can control the number of 
> significant figures.
> 
> - fixed point or exponential (%g), whichever is more appropriate for its 
> magnitude
> 
> I'm not sure how the user could specify the format he wants. Passing the 
> printf formatting string is a bit dangerous, as very bad things could 
> happen if he got wrong...
> 
> I found that Frank had written a paragraph somehow a bit related to that 
> issue, but it was more about OGC WKT Coordinate System. See "Numerical 
> Precision in WKT" http://home.gdal.org/projects/opengis/wktproblems.html
> 
> I also found the following discussion : 
> http://lists.ingres.com/pipermail/gis-users/2009-January/000145.html
> 
> Best regards,
> 
> Even
> 
> P.S : I had a doubt if the OGC WKT spec allowed exponential notation, 
> but apparently yes (OGC 06-103r3 page 53-54, OpenGIS? Implementation 
> Specification for Geographic information - Simple feature access - Part 
> 1: Common architecturen v1.2).
> 
> Le Tuesday 02 June 2009 19:50:40 Brent Fraser, vous avez ?crit :
> 
>>  I've been experimenting with v1.6.0 ogr2ogr:
> 
>>
> 
>>  ogr2ogr -f csv test_dir test_in.shp -nln test_out -lco GEOMETRY=AS_WKT
> 
>>
> 
>>  The precision of the coordinates in the WKT seems to be overkill, eg:
> 
>>
> 
>>  "LINESTRING (-115.11433812265155 53.146791166875367,-115.12192424362472
> 
>>  53.147304268559473,
> 
>>
> 
>>  Is there any way to limit the precision?
> 
>>
> 
>>  Thanks!
> 
>>  Brent Fraser
> 
>>  _______________________________________________
> 
>>  gdal-dev mailing list
> 
>>  gdal-dev@lists.osgeo.org
> 
>>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
From peifer at gmx.eu  Wed Jun  3 12:20:05 2009
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed Jun  3 12:21:59 2009
Subject: [gdal-dev] gdal_translate changes coordinate system
Message-ID: <h067um$ncj$1@ger.gmane.org>

I am trying to create a blank raster file, following the hint at 
http://lists.osgeo.org/pipermail/gdal-dev/2008-February/016061.html

I might be doing something terribly wrong, but after a simple 
gdal_translate, longitude/latitude of origin are changed from 10/52 to 
0/0, see at the end of this post.

I tried to fix the issue with -a_srs EPSG:3035, but things are getting 
worse. Now the coordinate system doesn't have any projection parameters:

PROJCS["ETRS89 / ETRS-LAEA",
     GEOGCS["ETRS89",
         DATUM["European_Terrestrial_Reference_System_1989",
             SPHEROID["GRS 1980",6378137,298.2572221010042,
                 AUTHORITY["EPSG","7019"]],
             AUTHORITY["EPSG","6258"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4258"]],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AUTHORITY["EPSG","3035"]]


Any hint?

Hermann



[peifer@whitefish:lceugr100_06]> gdalinfo lceugr100_06_pct.tif
Driver: GTiff/GeoTIFF
Files: lceugr100_06_pct.tif
        lceugr100_06_pct.aux
Size is 67000, 58000
Coordinate System is:
PROJCS["ETRS_1989_LAEA_L52_M10",
     GEOGCS["GCS_ETRS_1989",
         DATUM["European_Terrestrial_Reference_System_1989",
             SPHEROID["GRS_1980",6378137.0,298.257222101]],
         PRIMEM["Greenwich",0.0],
         UNIT["Degree",0.0174532925199433]],
     PROJECTION["Lambert_Azimuthal_Equal_Area"],
     PARAMETER["False_Easting",4321000.0],
     PARAMETER["False_Northing",3210000.0],
     PARAMETER["Central_Meridian",10.0],   <---
     PARAMETER["Latitude_Of_Origin",52.0], <---
     UNIT["Meter",1.0]]
Origin = (800000.000000000000000,6500000.000000000000000)
Pixel Size = (100.000000000000000,-100.000000000000000)

(...)

[peifer@whitefish:lceugr100_06]> gdal_translate lceugr100_06_pct.tif 
-projwin 3900000 3200000 4000000 3100000 -scale 0 255 0 0  template.tif
Input file size is 67000, 58000
Computed -srcwin 31000 33000 1000 1000 from projected window.
0...10...20...30...40...50...60...70...80...90...100 - done.

[peifer@whitefish:lceugr100_06]> gdalinfo template.tif
Driver: GTiff/GeoTIFF
Files: template.tif
Size is 1000, 1000
Coordinate System is:
PROJCS["ETRS_1989_LAEA_L52_M10",
     GEOGCS["GCS_ETRS_1989",
         DATUM["European_Terrestrial_Reference_System_1989",
             SPHEROID["GRS 1980",6378137,298.2572221010042,
                 AUTHORITY["EPSG","7019"]],
             AUTHORITY["EPSG","6258"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433]],
     PROJECTION["Lambert_Azimuthal_Equal_Area"],
     PARAMETER["latitude_of_center",0],  <--
     PARAMETER["longitude_of_center",0], <--
     PARAMETER["false_easting",4321000],
     PARAMETER["false_northing",3210000],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]
Origin = (3900000.000000000000000,3200000.000000000000000)
Pixel Size = (100.000000000000000,-100.000000000000000)
(...)

From warmerdam at pobox.com  Wed Jun  3 12:46:01 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jun  3 12:46:17 2009
Subject: [gdal-dev] gdal_translate changes coordinate system
In-Reply-To: <h067um$ncj$1@ger.gmane.org>
References: <h067um$ncj$1@ger.gmane.org>
Message-ID: <4A26A8C9.6090309@pobox.com>

Hermann Peifer wrote:
> [peifer@whitefish:lceugr100_06]> gdalinfo lceugr100_06_pct.tif
> Driver: GTiff/GeoTIFF
> Files: lceugr100_06_pct.tif
>        lceugr100_06_pct.aux
> Size is 67000, 58000
> Coordinate System is:
> PROJCS["ETRS_1989_LAEA_L52_M10",
>     GEOGCS["GCS_ETRS_1989",
>         DATUM["European_Terrestrial_Reference_System_1989",
>             SPHEROID["GRS_1980",6378137.0,298.257222101]],
>         PRIMEM["Greenwich",0.0],
>         UNIT["Degree",0.0174532925199433]],
>     PROJECTION["Lambert_Azimuthal_Equal_Area"],
>     PARAMETER["False_Easting",4321000.0],
>     PARAMETER["False_Northing",3210000.0],
>     PARAMETER["Central_Meridian",10.0],   <---
>     PARAMETER["Latitude_Of_Origin",52.0], <---
>     UNIT["Meter",1.0]]
...
> [peifer@whitefish:lceugr100_06]> gdalinfo template.tif
> Driver: GTiff/GeoTIFF
> Files: template.tif
> Size is 1000, 1000
> Coordinate System is:
> PROJCS["ETRS_1989_LAEA_L52_M10",
>     GEOGCS["GCS_ETRS_1989",
>         DATUM["European_Terrestrial_Reference_System_1989",
>             SPHEROID["GRS 1980",6378137,298.2572221010042,
>                 AUTHORITY["EPSG","7019"]],
>             AUTHORITY["EPSG","6258"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433]],
>     PROJECTION["Lambert_Azimuthal_Equal_Area"],
>     PARAMETER["latitude_of_center",0],  <--
>     PARAMETER["longitude_of_center",0], <--
>     PARAMETER["false_easting",4321000],
>     PARAMETER["false_northing",3210000],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]]]

Hermann,

The problem appears to be that for the first file the coordinate system
is being read from the .aux file, but not properly converted from ESRI
format to OGR format.  So the parameters should be named latitude_of_center
and longitude_of_center but instead are still using the ESRI names of
Central_Meridian and Latitude_Of_Origin.  The GeoTIFF writer does not
notice these values and writes default zeros for the lat/long of center
parameters in the geotiff file and that is what you get on read back.

I believe this is a failure of the .aux file reading logic to normalize
the coordinate system properly. Looking in the morphFromESRI() code there
appears to be handling for this transformation, so I suspect it is subtly
broken, or not being invoked by the .aux reader.

Could you file a ticket with the .aux file, and information on the version
of GDAL you are using?

As a work around you could paste the WKT with the zero lat/long of center
into a file (your_edited.wkt), edit in the correct values, and then
add "-a_srs your_edited.wkt" to the gdal_translate command.

But please do file the ticket - I'd like to fix this if the problem still
exists.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From peifer at gmx.eu  Wed Jun  3 13:05:28 2009
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed Jun  3 13:07:20 2009
Subject: [gdal-dev] Re: gdal_translate changes coordinate system
In-Reply-To: <4A26A8C9.6090309@pobox.com>
References: <h067um$ncj$1@ger.gmane.org> <4A26A8C9.6090309@pobox.com>
Message-ID: <h06ajp$144$1@ger.gmane.org>

Frank Warmerdam wrote:
> Hermann Peifer wrote:
>> [peifer@whitefish:lceugr100_06]> gdalinfo lceugr100_06_pct.tif
>> Driver: GTiff/GeoTIFF
>> Files: lceugr100_06_pct.tif
>>        lceugr100_06_pct.aux
>> Size is 67000, 58000
>> Coordinate System is:
>> PROJCS["ETRS_1989_LAEA_L52_M10",
>>     GEOGCS["GCS_ETRS_1989",
>>         DATUM["European_Terrestrial_Reference_System_1989",
>>             SPHEROID["GRS_1980",6378137.0,298.257222101]],
>>         PRIMEM["Greenwich",0.0],
>>         UNIT["Degree",0.0174532925199433]],
>>     PROJECTION["Lambert_Azimuthal_Equal_Area"],
>>     PARAMETER["False_Easting",4321000.0],
>>     PARAMETER["False_Northing",3210000.0],
>>     PARAMETER["Central_Meridian",10.0],   <---
>>     PARAMETER["Latitude_Of_Origin",52.0], <---
>>     UNIT["Meter",1.0]]
> ...
>> [peifer@whitefish:lceugr100_06]> gdalinfo template.tif
>> Driver: GTiff/GeoTIFF
>> Files: template.tif
>> Size is 1000, 1000
>> Coordinate System is:
>> PROJCS["ETRS_1989_LAEA_L52_M10",
>>     GEOGCS["GCS_ETRS_1989",
>>         DATUM["European_Terrestrial_Reference_System_1989",
>>             SPHEROID["GRS 1980",6378137,298.2572221010042,
>>                 AUTHORITY["EPSG","7019"]],
>>             AUTHORITY["EPSG","6258"]],
>>         PRIMEM["Greenwich",0],
>>         UNIT["degree",0.0174532925199433]],
>>     PROJECTION["Lambert_Azimuthal_Equal_Area"],
>>     PARAMETER["latitude_of_center",0],  <--
>>     PARAMETER["longitude_of_center",0], <--
>>     PARAMETER["false_easting",4321000],
>>     PARAMETER["false_northing",3210000],
>>     UNIT["metre",1,
>>         AUTHORITY["EPSG","9001"]]]
> 
> Hermann,
> 
> The problem appears to be that for the first file the coordinate system
> is being read from the .aux file, but not properly converted from ESRI
> format to OGR format.  So the parameters should be named latitude_of_center
> and longitude_of_center but instead are still using the ESRI names of
> Central_Meridian and Latitude_Of_Origin.  The GeoTIFF writer does not
> notice these values and writes default zeros for the lat/long of center
> parameters in the geotiff file and that is what you get on read back.
> 
> I believe this is a failure of the .aux file reading logic to normalize
> the coordinate system properly. Looking in the morphFromESRI() code there
> appears to be handling for this transformation, so I suspect it is subtly
> broken, or not being invoked by the .aux reader.
> 
> Could you file a ticket with the .aux file, and information on the version
> of GDAL you are using?
> 
> As a work around you could paste the WKT with the zero lat/long of center
> into a file (your_edited.wkt), edit in the correct values, and then
> add "-a_srs your_edited.wkt" to the gdal_translate command.
> 
> But please do file the ticket - I'd like to fix this if the problem still
> exists.
> 
> Best regards,

Thanks for the workaround. It works. Any hint why -a_srs EPSG:3035 made 
things worse?

BTW, I am using GDAL 1.6.0, released 2008/12/04

Hermann

From warmerdam at pobox.com  Wed Jun  3 13:12:23 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jun  3 13:12:36 2009
Subject: [gdal-dev] Re: gdal_translate changes coordinate system
In-Reply-To: <h06ajp$144$1@ger.gmane.org>
References: <h067um$ncj$1@ger.gmane.org> <4A26A8C9.6090309@pobox.com>
	<h06ajp$144$1@ger.gmane.org>
Message-ID: <4A26AEF7.2040907@pobox.com>

Hermann Peifer wrote:
> Thanks for the workaround. It works. Any hint why -a_srs EPSG:3035 made 
> things worse?

Hermann,

I missed this aspect of your post.  In fact, I see that GDAL itself is
expanding EPSG:3035 into an invalid representation of the coordinate
system according to GDAL's rules.  Yikes!  This definately needs a
ticket.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From edomazlicky at gmail.com  Wed Jun  3 14:13:51 2009
From: edomazlicky at gmail.com (edomazlicky)
Date: Wed Jun  3 14:13:53 2009
Subject: [Gdal-dev] Warping a warped file C# bindings
In-Reply-To: <f3b73b7d0906021430l2029c0f4o6c53938a8b0c2c7d@mail.gmail.com>
References: <1243802858650-3003215.post@n2.nabble.com>
	<f3b73b7d0906021430l2029c0f4o6c53938a8b0c2c7d@mail.gmail.com>
Message-ID: <1244052831102-3020052.post@n2.nabble.com>


Tamas-
 I've done some futher tracking on this and I found out the problem seems to
actually be a difference in how the SVN version of GDAL warps and how an
older development version warps. I warped the USGS DRG file for Mount
Rainier West- available here:
http://rocky.ess.washington.edu/data/raster/drg/yakima/o46121g7.zip

to EPSG:32610 (WGS84 UTM Zone 10N)- these files were NAD27 UTM Zone 10N to
start out. On a pixel by pixel basis the files are exactly the same- but if
you examine the GDALInfo output I attached you will see the Origin data
written to the files is almost 100 Meters off the Northing dimension, and
about 50 meters off the Easting dimension. If you plot a coordinate into the
reprojected maps (the summit of Rainier works well) you can see the old
version reprojects correctly, the new version is off by a significant
amount.
Summit coordinates should be: 46.852778, -121.760278

I'm not sure the exact versions of the library I'm using but the old version
that seems to work is from FWTools 2.3.0 and the new SVN version is from a
recent automated Windows build SDK built on 6/1/09.
On Tue, Jun 2, 2009 at 2:30 PM, Tamas Szekeres (via Nabble) <
ml-user+63011-1539807046@n2.nabble.com<ml-user%2B63011-1539807046@n2.nabble.com>
> wrote:

> Hi,
>
> I'm not sure about this problem, I suspect cascading the vrt datasets
> should normally work. Could you provide your complete C# example to produce
> the output and the gdal_warp command line to examine the difference?
>
> Best regards,
>
> Tamas
>
>
>
> 2009/5/31 edomazlicky <edomazlicky@...<http://n2.nabble.com/user/SendEmail.jtp?type=node&node=3014818&i=0>
> >
>
>>
>> I am trying to warp a NAD27 UTM file to Google Mercator 900913. My
>> understanding is that for this to happen you have to first warp the file
>> to
>> WGS84 and then to 900913. I have tried going straight from NAD27->900913
>> and
>> I get projection errors similar to if you plotted a WGS84 coordinate on a
>> NAD27 map. So to accomplish this two-step warp I have been trying to do
>> something kind of like this:
>>
>> Dim oWGS84 As New OSGeo.OSR.SpatialReference("")
>> ' WGS84 UTM Zone 10
>> oWGS84.ImportFromEPSG(32610)
>> Dim wgs84_wkt As String = ""
>> oWGS84.ExportToPrettyWkt(wgs84_wkt, 0)
>> InterMed = OSGeo.GDAL.Gdal.AutoCreateWarpedVRT(SrcGdalDataSet, src_wkt,
>> wgs84_wkt, eReSample, 0.125)
>> GdalDataSet = OSGeo.GDAL.Gdal.AutoCreateWarpedVRT(InterMed, wgs84_wkt,
>> dst_wkt, eReSample, 0.125)
>>
>> Where src_wkt contains the NAD27 WKT and dst_wkt contains the 900913 WKT.
>> This doesn't work- I am getting the same results I get if I try to go
>> straight from NAD27->900913. However if instead I warp the file in
>> gdal_warp
>> first to WGS84 and then go from that to 900913 it works fine. Is there
>> anyway to warp these files without making a new file fist? I would like
>> for
>> it all to be done in memory without messing with temporary files or
>> calling
>> gdal_warp externally.
>> --
>> View this message in context:
>> http://n2.nabble.com/Warping-a-warped-file-C--bindings-tp3003215p3003215.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@...<http://n2.nabble.com/user/SendEmail.jtp?type=node&node=3014818&i=1>
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@...<http://n2.nabble.com/user/SendEmail.jtp?type=node&node=3014818&i=2>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> ------------------------------
> This email is a reply to your post @
> http://n2.nabble.com/Warping-a-warped-file-C--bindings-tp3003215p3014818.html
> You can reply by email or by visting the link above.
>
>

Driver: GTiff/GeoTIFF
Files: o46121g7_new.tif
Size is 5212, 6818
Coordinate System is:
PROJCS["WGS 84 / UTM zone 10N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-123],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32610"]]
Origin = (584721.349063829520000,5192851.955712453500000)
Pixel Size = (2.438380511827829,-2.438380511827829)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  584721.349, 5192851.956) (121d53'16.89"W, 46d53'1.69"N)
Lower Left  (  584721.349, 5176227.077) (121d53'27.97"W, 46d44'3.21"N)
Upper Right (  597430.188, 5192851.956) (121d43'16.53"W, 46d52'55.42"N)
Lower Right (  597430.188, 5176227.077) (121d43'29.28"W, 46d43'56.97"N)
Center      (  591075.769, 5184539.517) (121d48'22.67"W, 46d48'29.43"N)
Band 1 Block=5212x1 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 256 entries)
    0: 0,0,0,255
    1: 255,255,255,255
    2: 0,151,164,255
    3: 203,0,23,255
    4: 131,66,37,255
    5: 201,234,157,255
    6: 137,51,128,255
    7: 255,234,0,255
    8: 167,226,226,255
    9: 255,184,184,255
   10: 218,179,214,255
   11: 209,209,209,255
   12: 207,164,142,255
   13: 0,0,0,255
   14: 0,0,0,255
   15: 0,0,0,255
   16: 0,0,0,255
   17: 0,0,0,255
   18: 0,0,0,255
   19: 0,0,0,255
   20: 0,0,0,255
   21: 0,0,0,255
   22: 0,0,0,255
   23: 0,0,0,255
   24: 0,0,0,255
   25: 0,0,0,255
   26: 0,0,0,255
   27: 0,0,0,255
   28: 0,0,0,255
   29: 0,0,0,255
   30: 0,0,0,255
   31: 0,0,0,255
   32: 0,0,0,255
   33: 0,0,0,255
   34: 0,0,0,255
   35: 0,0,0,255
   36: 0,0,0,255
   37: 0,0,0,255
   38: 0,0,0,255
   39: 0,0,0,255
   40: 0,0,0,255
   41: 0,0,0,255
   42: 0,0,0,255
   43: 0,0,0,255
   44: 0,0,0,255
   45: 0,0,0,255
   46: 0,0,0,255
   47: 0,0,0,255
   48: 0,0,0,255
   49: 0,0,0,255
   50: 0,0,0,255
   51: 0,0,0,255
   52: 0,0,0,255
   53: 0,0,0,255
   54: 0,0,0,255
   55: 0,0,0,255
   56: 0,0,0,255
   57: 0,0,0,255
   58: 0,0,0,255
   59: 0,0,0,255
   60: 0,0,0,255
   61: 0,0,0,255
   62: 0,0,0,255
   63: 0,0,0,255
   64: 0,0,0,255
   65: 0,0,0,255
   66: 0,0,0,255
   67: 0,0,0,255
   68: 0,0,0,255
   69: 0,0,0,255
   70: 0,0,0,255
   71: 0,0,0,255
   72: 0,0,0,255
   73: 0,0,0,255
   74: 0,0,0,255
   75: 0,0,0,255
   76: 0,0,0,255
   77: 0,0,0,255
   78: 0,0,0,255
   79: 0,0,0,255
   80: 0,0,0,255
   81: 0,0,0,255
   82: 0,0,0,255
   83: 0,0,0,255
   84: 0,0,0,255
   85: 0,0,0,255
   86: 0,0,0,255
   87: 0,0,0,255
   88: 0,0,0,255
   89: 0,0,0,255
   90: 0,0,0,255
   91: 0,0,0,255
   92: 0,0,0,255
   93: 0,0,0,255
   94: 0,0,0,255
   95: 0,0,0,255
   96: 0,0,0,255
   97: 0,0,0,255
   98: 0,0,0,255
   99: 0,0,0,255
  100: 0,0,0,255
  101: 0,0,0,255
  102: 0,0,0,255
  103: 0,0,0,255
  104: 0,0,0,255
  105: 0,0,0,255
  106: 0,0,0,255
  107: 0,0,0,255
  108: 0,0,0,255
  109: 0,0,0,255
  110: 0,0,0,255
  111: 0,0,0,255
  112: 0,0,0,255
  113: 0,0,0,255
  114: 0,0,0,255
  115: 0,0,0,255
  116: 0,0,0,255
  117: 0,0,0,255
  118: 0,0,0,255
  119: 0,0,0,255
  120: 0,0,0,255
  121: 0,0,0,255
  122: 0,0,0,255
  123: 0,0,0,255
  124: 0,0,0,255
  125: 0,0,0,255
  126: 0,0,0,255
  127: 0,0,0,255
  128: 0,0,0,255
  129: 0,0,0,255
  130: 0,0,0,255
  131: 0,0,0,255
  132: 0,0,0,255
  133: 0,0,0,255
  134: 0,0,0,255
  135: 0,0,0,255
  136: 0,0,0,255
  137: 0,0,0,255
  138: 0,0,0,255
  139: 0,0,0,255
  140: 0,0,0,255
  141: 0,0,0,255
  142: 0,0,0,255
  143: 0,0,0,255
  144: 0,0,0,255
  145: 0,0,0,255
  146: 0,0,0,255
  147: 0,0,0,255
  148: 0,0,0,255
  149: 0,0,0,255
  150: 0,0,0,255
  151: 0,0,0,255
  152: 0,0,0,255
  153: 0,0,0,255
  154: 0,0,0,255
  155: 0,0,0,255
  156: 0,0,0,255
  157: 0,0,0,255
  158: 0,0,0,255
  159: 0,0,0,255
  160: 0,0,0,255
  161: 0,0,0,255
  162: 0,0,0,255
  163: 0,0,0,255
  164: 0,0,0,255
  165: 0,0,0,255
  166: 0,0,0,255
  167: 0,0,0,255
  168: 0,0,0,255
  169: 0,0,0,255
  170: 0,0,0,255
  171: 0,0,0,255
  172: 0,0,0,255
  173: 0,0,0,255
  174: 0,0,0,255
  175: 0,0,0,255
  176: 0,0,0,255
  177: 0,0,0,255
  178: 0,0,0,255
  179: 0,0,0,255
  180: 0,0,0,255
  181: 0,0,0,255
  182: 0,0,0,255
  183: 0,0,0,255
  184: 0,0,0,255
  185: 0,0,0,255
  186: 0,0,0,255
  187: 0,0,0,255
  188: 0,0,0,255
  189: 0,0,0,255
  190: 0,0,0,255
  191: 0,0,0,255
  192: 0,0,0,255
  193: 0,0,0,255
  194: 0,0,0,255
  195: 0,0,0,255
  196: 0,0,0,255
  197: 0,0,0,255
  198: 0,0,0,255
  199: 0,0,0,255
  200: 0,0,0,255
  201: 0,0,0,255
  202: 0,0,0,255
  203: 0,0,0,255
  204: 0,0,0,255
  205: 0,0,0,255
  206: 0,0,0,255
  207: 0,0,0,255
  208: 0,0,0,255
  209: 0,0,0,255
  210: 0,0,0,255
  211: 0,0,0,255
  212: 0,0,0,255
  213: 0,0,0,255
  214: 0,0,0,255
  215: 0,0,0,255
  216: 0,0,0,255
  217: 0,0,0,255
  218: 0,0,0,255
  219: 0,0,0,255
  220: 0,0,0,255
  221: 0,0,0,255
  222: 0,0,0,255
  223: 0,0,0,255
  224: 0,0,0,255
  225: 0,0,0,255
  226: 0,0,0,255
  227: 0,0,0,255
  228: 0,0,0,255
  229: 0,0,0,255
  230: 0,0,0,255
  231: 0,0,0,255
  232: 0,0,0,255
  233: 0,0,0,255
  234: 0,0,0,255
  235: 0,0,0,255
  236: 0,0,0,255
  237: 0,0,0,255
  238: 0,0,0,255
  239: 0,0,0,255
  240: 0,0,0,255
  241: 0,0,0,255
  242: 0,0,0,255
  243: 0,0,0,255
  244: 0,0,0,255
  245: 0,0,0,255
  246: 0,0,0,255
  247: 0,0,0,255
  248: 0,0,0,255
  249: 0,0,0,255
  250: 0,0,0,255
  251: 0,0,0,255
  252: 0,0,0,255
  253: 0,0,0,255
  254: 0,0,0,255
  255: 0,0,0,255

Driver: GTiff/GeoTIFF
Files: o46121g7_old.tif
Size is 5212, 6818
Coordinate System is:
PROJCS["WGS 84 / UTM zone 10N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-123],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32610"]]
Origin = (584629.033300812820000,5192831.629261755400000)
Pixel Size = (2.438409423764617,-2.438409423764617)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  584629.033, 5192831.629) (121d53'21.26"W, 46d53'1.08"N)
Lower Left  (  584629.033, 5176206.554) (121d53'32.33"W, 46d44'2.58"N)
Upper Right (  597338.023, 5192831.629) (121d43'20.90"W, 46d52'54.81"N)
Lower Right (  597338.023, 5176206.554) (121d43'33.64"W, 46d43'56.35"N)
Center      (  590983.528, 5184519.092) (121d48'27.04"W, 46d48'28.82"N)
Band 1 Block=5212x1 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 256 entries)
    0: 0,0,0,255
    1: 255,255,255,255
    2: 0,151,164,255
    3: 203,0,23,255
    4: 131,66,37,255
    5: 201,234,157,255
    6: 137,51,128,255
    7: 255,234,0,255
    8: 167,226,226,255
    9: 255,184,184,255
   10: 218,179,214,255
   11: 209,209,209,255
   12: 207,164,142,255
   13: 0,0,0,255
   14: 0,0,0,255
   15: 0,0,0,255
   16: 0,0,0,255
   17: 0,0,0,255
   18: 0,0,0,255
   19: 0,0,0,255
   20: 0,0,0,255
   21: 0,0,0,255
   22: 0,0,0,255
   23: 0,0,0,255
   24: 0,0,0,255
   25: 0,0,0,255
   26: 0,0,0,255
   27: 0,0,0,255
   28: 0,0,0,255
   29: 0,0,0,255
   30: 0,0,0,255
   31: 0,0,0,255
   32: 0,0,0,255
   33: 0,0,0,255
   34: 0,0,0,255
   35: 0,0,0,255
   36: 0,0,0,255
   37: 0,0,0,255
   38: 0,0,0,255
   39: 0,0,0,255
   40: 0,0,0,255
   41: 0,0,0,255
   42: 0,0,0,255
   43: 0,0,0,255
   44: 0,0,0,255
   45: 0,0,0,255
   46: 0,0,0,255
   47: 0,0,0,255
   48: 0,0,0,255
   49: 0,0,0,255
   50: 0,0,0,255
   51: 0,0,0,255
   52: 0,0,0,255
   53: 0,0,0,255
   54: 0,0,0,255
   55: 0,0,0,255
   56: 0,0,0,255
   57: 0,0,0,255
   58: 0,0,0,255
   59: 0,0,0,255
   60: 0,0,0,255
   61: 0,0,0,255
   62: 0,0,0,255
   63: 0,0,0,255
   64: 0,0,0,255
   65: 0,0,0,255
   66: 0,0,0,255
   67: 0,0,0,255
   68: 0,0,0,255
   69: 0,0,0,255
   70: 0,0,0,255
   71: 0,0,0,255
   72: 0,0,0,255
   73: 0,0,0,255
   74: 0,0,0,255
   75: 0,0,0,255
   76: 0,0,0,255
   77: 0,0,0,255
   78: 0,0,0,255
   79: 0,0,0,255
   80: 0,0,0,255
   81: 0,0,0,255
   82: 0,0,0,255
   83: 0,0,0,255
   84: 0,0,0,255
   85: 0,0,0,255
   86: 0,0,0,255
   87: 0,0,0,255
   88: 0,0,0,255
   89: 0,0,0,255
   90: 0,0,0,255
   91: 0,0,0,255
   92: 0,0,0,255
   93: 0,0,0,255
   94: 0,0,0,255
   95: 0,0,0,255
   96: 0,0,0,255
   97: 0,0,0,255
   98: 0,0,0,255
   99: 0,0,0,255
  100: 0,0,0,255
  101: 0,0,0,255
  102: 0,0,0,255
  103: 0,0,0,255
  104: 0,0,0,255
  105: 0,0,0,255
  106: 0,0,0,255
  107: 0,0,0,255
  108: 0,0,0,255
  109: 0,0,0,255
  110: 0,0,0,255
  111: 0,0,0,255
  112: 0,0,0,255
  113: 0,0,0,255
  114: 0,0,0,255
  115: 0,0,0,255
  116: 0,0,0,255
  117: 0,0,0,255
  118: 0,0,0,255
  119: 0,0,0,255
  120: 0,0,0,255
  121: 0,0,0,255
  122: 0,0,0,255
  123: 0,0,0,255
  124: 0,0,0,255
  125: 0,0,0,255
  126: 0,0,0,255
  127: 0,0,0,255
  128: 0,0,0,255
  129: 0,0,0,255
  130: 0,0,0,255
  131: 0,0,0,255
  132: 0,0,0,255
  133: 0,0,0,255
  134: 0,0,0,255
  135: 0,0,0,255
  136: 0,0,0,255
  137: 0,0,0,255
  138: 0,0,0,255
  139: 0,0,0,255
  140: 0,0,0,255
  141: 0,0,0,255
  142: 0,0,0,255
  143: 0,0,0,255
  144: 0,0,0,255
  145: 0,0,0,255
  146: 0,0,0,255
  147: 0,0,0,255
  148: 0,0,0,255
  149: 0,0,0,255
  150: 0,0,0,255
  151: 0,0,0,255
  152: 0,0,0,255
  153: 0,0,0,255
  154: 0,0,0,255
  155: 0,0,0,255
  156: 0,0,0,255
  157: 0,0,0,255
  158: 0,0,0,255
  159: 0,0,0,255
  160: 0,0,0,255
  161: 0,0,0,255
  162: 0,0,0,255
  163: 0,0,0,255
  164: 0,0,0,255
  165: 0,0,0,255
  166: 0,0,0,255
  167: 0,0,0,255
  168: 0,0,0,255
  169: 0,0,0,255
  170: 0,0,0,255
  171: 0,0,0,255
  172: 0,0,0,255
  173: 0,0,0,255
  174: 0,0,0,255
  175: 0,0,0,255
  176: 0,0,0,255
  177: 0,0,0,255
  178: 0,0,0,255
  179: 0,0,0,255
  180: 0,0,0,255
  181: 0,0,0,255
  182: 0,0,0,255
  183: 0,0,0,255
  184: 0,0,0,255
  185: 0,0,0,255
  186: 0,0,0,255
  187: 0,0,0,255
  188: 0,0,0,255
  189: 0,0,0,255
  190: 0,0,0,255
  191: 0,0,0,255
  192: 0,0,0,255
  193: 0,0,0,255
  194: 0,0,0,255
  195: 0,0,0,255
  196: 0,0,0,255
  197: 0,0,0,255
  198: 0,0,0,255
  199: 0,0,0,255
  200: 0,0,0,255
  201: 0,0,0,255
  202: 0,0,0,255
  203: 0,0,0,255
  204: 0,0,0,255
  205: 0,0,0,255
  206: 0,0,0,255
  207: 0,0,0,255
  208: 0,0,0,255
  209: 0,0,0,255
  210: 0,0,0,255
  211: 0,0,0,255
  212: 0,0,0,255
  213: 0,0,0,255
  214: 0,0,0,255
  215: 0,0,0,255
  216: 0,0,0,255
  217: 0,0,0,255
  218: 0,0,0,255
  219: 0,0,0,255
  220: 0,0,0,255
  221: 0,0,0,255
  222: 0,0,0,255
  223: 0,0,0,255
  224: 0,0,0,255
  225: 0,0,0,255
  226: 0,0,0,255
  227: 0,0,0,255
  228: 0,0,0,255
  229: 0,0,0,255
  230: 0,0,0,255
  231: 0,0,0,255
  232: 0,0,0,255
  233: 0,0,0,255
  234: 0,0,0,255
  235: 0,0,0,255
  236: 0,0,0,255
  237: 0,0,0,255
  238: 0,0,0,255
  239: 0,0,0,255
  240: 0,0,0,255
  241: 0,0,0,255
  242: 0,0,0,255
  243: 0,0,0,255
  244: 0,0,0,255
  245: 0,0,0,255
  246: 0,0,0,255
  247: 0,0,0,255
  248: 0,0,0,255
  249: 0,0,0,255
  250: 0,0,0,255
  251: 0,0,0,255
  252: 0,0,0,255
  253: 0,0,0,255
  254: 0,0,0,255
  255: 0,0,0,255

-- 
View this message in context: http://n2.nabble.com/Warping-a-warped-file-C--bindings-tp3003215p3020052.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090603/a4f8a050/attachment-0001.html
From warmerdam at pobox.com  Wed Jun  3 16:00:50 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jun  3 16:01:06 2009
Subject: [gdal-dev] Re: gdal_translate changes coordinate system
In-Reply-To: <4A26AEF7.2040907@pobox.com>
References: <h067um$ncj$1@ger.gmane.org> <4A26A8C9.6090309@pobox.com>
	<h06ajp$144$1@ger.gmane.org> <4A26AEF7.2040907@pobox.com>
Message-ID: <4A26D672.5030301@pobox.com>

Frank Warmerdam wrote:
> Hermann Peifer wrote:
>> Thanks for the workaround. It works. Any hint why -a_srs EPSG:3035 
>> made things worse?
> 
> Hermann,
> 
> I missed this aspect of your post.  In fact, I see that GDAL itself is
> expanding EPSG:3035 into an invalid representation of the coordinate
> system according to GDAL's rules.  Yikes!  This definately needs a
> ticket.

Folks,

I was wrong in the above.  I had in fact looked at the wrong portion of
the "testepsg" output - judging based on the ESRI-morphed version instead
of the original.

The problem is a lack of LAEA support in libgeotiff which is rectified
by a patch produced by Even which I'll apply shortly as documented in:

   http://trac.osgeo.org/gdal/ticket/3016

Sorry for my confusing statements.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From diarenwhan at yahoo.co.uk  Thu Jun  4 08:01:45 2009
From: diarenwhan at yahoo.co.uk (Diaren)
Date: Thu Jun  4 08:01:48 2009
Subject: [Gdal-dev] C# Osr.GetProjectionMethodParameterList Access Violation
Message-ID: <1244116905898-3024324.post@n2.nabble.com>


Hi I've been building a projection dialog box in C# Windows, and have come
across a bug/problem with the generated swig wrappers for
GetProjectionMethodParameterList / OPTGetParameterList. The problem is that
the generated Swig Wrapper osr_wrap.cpp frees the Username passed back from
OPTGetParameterList which is a static string.

ogr_opt.cpp in OPTGetParameterList
----------------------------------
457:   if( ppszUserName != NULL )
                *ppszUserName = (char *)papszProjectionDefinitions[i];     
// <=== Static array of strings


ogr_wrap.cpp in CSharp_GetProjectionMethodParameterList
--------------------------------------------------------
976:    result = (char **)OPTGetParameterList(arg1,arg2);    // arg2 is
ppszUserName from above
          ...
          jresult = result; 
          {
             /* %typemap(argout) (char **argout) */
             char* temp_string;
             temp_string = SWIG_csharp_string_callback(*arg2);
             if (*arg2)
               free(*arg2);           // <===== Freeing static string
             *arg2 = temp_string;
          }
          return jresult;

Problem is I don't know the first thing about how swig works... and If I
modify the OPTGetParameterList to use CPLStrdup or something, then that will
cause problems for other code which knows Username is a static string and
doesn't need freeing.

So any swig experts that can modify the generated wrapper to not free arg2?
or is OPTGetParameterList supposed to allocate the string passed back
through Username?

-- 
View this message in context: http://n2.nabble.com/C--Osr.GetProjectionMethodParameterList-Access-Violation-tp3024324p3024324.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From diarenwhan at yahoo.co.uk  Thu Jun  4 08:06:42 2009
From: diarenwhan at yahoo.co.uk (Diaren)
Date: Thu Jun  4 08:06:44 2009
Subject: [Gdal-dev] C# Osr.GetProjectionMethodParameterList Access
	Violation
In-Reply-To: <1244116905898-3024324.post@n2.nabble.com>
References: <1244116905898-3024324.post@n2.nabble.com>
Message-ID: <1244117202943-3024353.post@n2.nabble.com>


Further to that the same problem will most likely exist with
CSharp_GetProjectionMethodParamInfo...


Diaren wrote:
> 
> Hi I've been building a projection dialog box in C# Windows, and have come
> across a bug/problem with the generated swig wrappers for
> GetProjectionMethodParameterList / OPTGetParameterList. The problem is
> that the generated Swig Wrapper osr_wrap.cpp frees the Username passed
> back from OPTGetParameterList which is a static string.
> 

-- 
View this message in context: http://n2.nabble.com/C--Osr.GetProjectionMethodParameterList-Access-Violation-tp3024324p3024353.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From r.hogendoorn at hitt.nl  Thu Jun  4 08:51:40 2009
From: r.hogendoorn at hitt.nl (Hogendoorn, Rene)
Date: Thu Jun  4 09:15:01 2009
Subject: [gdal-dev] Some questions about the TransformPoints typemap
Message-ID: <1979C52B2C1C234183439454C1599C7D65FB15@massenet.hitt.home>


In 1.6.1, TransformPoints got a python typemap such that a list of tuples can be transformed.
I want to make it a little bit more general, such that the inner tuples can be lists as well.
While looking at the typemap, I have the following questions:

- Why is there an explicit check on Py_None? Py_None will fail the next test anyway and the
  error message is not entirely true since a tuple is a sequence as well (and works).

- Memory is allocated with CPLMalloc; in some other typemaps it is plain malloc. In the latter
  case, there is no check on allocation failures. Should these be replaced by CPLMalloc?
 
- If CPLMalloc fails, it calls a memory allocation failure hook (according to the docs). The
  default is to terminate the application; shouldn't this hook raise a python memory exception?

- The transformpoints typemap returns a tuple of 2 lists. In general, python functions return
  tuples. Is there a reason to return lists in this case?

Regards,

Rene Hogendoorn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090604/8329af6e/attachment.html
From alberto.pettazzi at meteogalicia.es  Thu Jun  4 09:17:05 2009
From: alberto.pettazzi at meteogalicia.es (Alberto Pettazzi)
Date: Thu Jun  4 09:38:59 2009
Subject: [gdal-dev] opening eumetsat grib files
Message-ID: <4A27C951.7010004@meteogalicia.es>

Dear all,

I am trying to transform a grib file into a tiff. the file belongs to 
eumetsat. when I type:
gdalinfo L-000-MSG2__-MPEF________-CLM______-000001___-200906041200-__
I obtain the following message:
ERROR 4: L-000-MSG2__-MPEF________-CLM______-000001___-200906041200-__ 
is a grib file, but no raster dataset was successfully identified.
gdalinfo failed - unable to open 
'L-000-MSG2__-MPEF________-CLM______-000001___-200906041200-__'.

what can I do? where is the problem? I am a newbie in gdal

thank you in advance
-- 

Alberto Pettazzi


MeteoGalicia - Departamento de Climatolog?a y Observaci?n

Conseller?a de Medio Ambiente e Desenvolvemento Sostible

R?a de Roma, 6

15707 Santiago de Compostela. A Coru?a


Tel?fono: +34-881-999646


e-mail: alberto.pettazzi@meteogalicia.es 
<mailto:alberto.pettazzi@meteogalicia.es>


From diarenwhan at yahoo.co.uk  Thu Jun  4 09:45:17 2009
From: diarenwhan at yahoo.co.uk (Diaren)
Date: Thu Jun  4 09:45:19 2009
Subject: [Gdal-dev] C# Osr.GetProjectionMethodParameterList Access
	Violation
In-Reply-To: <1244116905898-3024324.post@n2.nabble.com>
References: <1244116905898-3024324.post@n2.nabble.com>
Message-ID: <1244123117640-3024796.post@n2.nabble.com>


Well I've learnt some swig and possibly solved the problem, can someone
verify that this ok and maybe turn this into a proper patch or someting was
against 1.6.0:

typemaps_csharp.i
+244:

%typemap(argout) (char **staticstring)
{
  /* %typemap(argout) (char **staticstring) */
  *$1 = SWIG_csharp_string_callback(*$1);
}

osr.i:
-229:
%rename (GetProjectionMethodParameterList) OPTGetParameterList;
%apply (char **CSL) {(char **)};
char **OPTGetParameterList( char *method, char **username );
%clear (char **);

%rename (GetProjectionMethodParamInfo) OPTGetParameterInfo;
void OPTGetParameterInfo( char *method, char *param, char **usrname,
                          char **type, double *defaultval );

+229:
%rename (GetProjectionMethodParameterList) OPTGetParameterList;
%apply (char **CSL) {(char **)};
%apply (char **staticstring) {(char **username)};
char **OPTGetParameterList( char *method, char **username );
%clear (char **);
%clear (char **username);

%rename (GetProjectionMethodParamInfo) OPTGetParameterInfo;
%apply (char **staticstring) {(char **usrname), (char **type)};
void OPTGetParameterInfo( char *method, char *param, char **usrname,
                          char **type, double *defaultval );
%clear (char **usrname);
%clear (char **type);


Diaren wrote:
> 
> Problem is I don't know the first thing about how swig works... and If I
> modify the OPTGetParameterList to use CPLStrdup or something, then that
> will cause problems for other code which knows Username is a static string
> and doesn't need freeing.
> 
> So any swig experts that can modify the generated wrapper to not free
> arg2? or is OPTGetParameterList supposed to allocate the string passed
> back through Username?
> 

-- 
View this message in context: http://n2.nabble.com/C--Osr.GetProjectionMethodParameterList-Access-Violation-tp3024324p3024796.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From warmerdam at pobox.com  Thu Jun  4 09:58:46 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jun  4 09:58:51 2009
Subject: [gdal-dev] opening eumetsat grib files
In-Reply-To: <4A27C951.7010004@meteogalicia.es>
References: <4A27C951.7010004@meteogalicia.es>
Message-ID: <4A27D316.6000401@pobox.com>

Alberto Pettazzi wrote:
> Dear all,
> 
> I am trying to transform a grib file into a tiff. the file belongs to 
> eumetsat. when I type:
> gdalinfo L-000-MSG2__-MPEF________-CLM______-000001___-200906041200-__
> I obtain the following message:
> ERROR 4: L-000-MSG2__-MPEF________-CLM______-000001___-200906041200-__ 
> is a grib file, but no raster dataset was successfully identified.
> gdalinfo failed - unable to open 
> 'L-000-MSG2__-MPEF________-CLM______-000001___-200906041200-__'.
> 
> what can I do? where is the problem? I am a newbie in gdal

Alberto,

It would be helpful if you could make the .grib file available for download
in order for us to evaluate what the issue might be.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From alberto.pettazzi at meteogalicia.es  Thu Jun  4 10:12:45 2009
From: alberto.pettazzi at meteogalicia.es (Alberto Pettazzi)
Date: Thu Jun  4 10:12:49 2009
Subject: [gdal-dev] opening eumetsat grib files
In-Reply-To: <4A27D316.6000401@pobox.com>
References: <4A27C951.7010004@meteogalicia.es> <4A27D316.6000401@pobox.com>
Message-ID: <4A27D65D.7030703@meteogalicia.es>

Dear Frank (and Mail list users),

please receive the grib file earlier mentioned...I hope you can help me.

Thank you,

Alberto Pettazzi



Frank Warmerdam escribi?:
> Alberto Pettazzi wrote:
>> Dear all,
>>
>> I am trying to transform a grib file into a tiff. the file belongs to 
>> eumetsat. when I type:
>> gdalinfo L-000-MSG2__-MPEF________-CLM______-000001___-200906041200-__
>> I obtain the following message:
>> ERROR 4: 
>> L-000-MSG2__-MPEF________-CLM______-000001___-200906041200-__ is a 
>> grib file, but no raster dataset was successfully identified.
>> gdalinfo failed - unable to open 
>> 'L-000-MSG2__-MPEF________-CLM______-000001___-200906041200-__'.
>>
>> what can I do? where is the problem? I am a newbie in gdal
>
> Alberto,
>
> It would be helpful if you could make the .grib file available for 
> download
> in order for us to evaluate what the issue might be.
>
> Best regards,
-------------- next part --------------
A non-text attachment was scrubbed...
Name: L-000-MSG2__-MPEF________-CLM______-000001___-200906041200-__.rar
Type: application/octet-stream
Size: 23227 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090604/470368f1/L-000-MSG2__-MPEF________-CLM______-000001___-200906041200-__-0001.obj
From szekerest at gmail.com  Thu Jun  4 10:30:19 2009
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jun  4 10:30:22 2009
Subject: [Gdal-dev] C# Osr.GetProjectionMethodParameterList Access 
	Violation
In-Reply-To: <1244123117640-3024796.post@n2.nabble.com>
References: <1244116905898-3024324.post@n2.nabble.com>
	<1244123117640-3024796.post@n2.nabble.com>
Message-ID: <f3b73b7d0906040730j4218f66fw3b69923bb8d85267@mail.gmail.com>

Diaren,

Good point. Please file a ticket with this issue and I'll take care of
fixing that in SVN branch-1.6 and trunk.

Best regards,

Tamas



2009/6/4 Diaren <diarenwhan@yahoo.co.uk>

>
> Well I've learnt some swig and possibly solved the problem, can someone
> verify that this ok and maybe turn this into a proper patch or someting was
> against 1.6.0:
>
> typemaps_csharp.i
> +244:
>
> %typemap(argout) (char **staticstring)
> {
>  /* %typemap(argout) (char **staticstring) */
>  *$1 = SWIG_csharp_string_callback(*$1);
> }
>
> osr.i:
> -229:
> %rename (GetProjectionMethodParameterList) OPTGetParameterList;
> %apply (char **CSL) {(char **)};
> char **OPTGetParameterList( char *method, char **username );
> %clear (char **);
>
> %rename (GetProjectionMethodParamInfo) OPTGetParameterInfo;
> void OPTGetParameterInfo( char *method, char *param, char **usrname,
>                          char **type, double *defaultval );
>
> +229:
> %rename (GetProjectionMethodParameterList) OPTGetParameterList;
> %apply (char **CSL) {(char **)};
> %apply (char **staticstring) {(char **username)};
> char **OPTGetParameterList( char *method, char **username );
> %clear (char **);
> %clear (char **username);
>
> %rename (GetProjectionMethodParamInfo) OPTGetParameterInfo;
> %apply (char **staticstring) {(char **usrname), (char **type)};
> void OPTGetParameterInfo( char *method, char *param, char **usrname,
>                          char **type, double *defaultval );
> %clear (char **usrname);
> %clear (char **type);
>
>
> Diaren wrote:
> >
> > Problem is I don't know the first thing about how swig works... and If I
> > modify the OPTGetParameterList to use CPLStrdup or something, then that
> > will cause problems for other code which knows Username is a static
> string
> > and doesn't need freeing.
> >
> > So any swig experts that can modify the generated wrapper to not free
> > arg2? or is OPTGetParameterList supposed to allocate the string passed
> > back through Username?
> >
>
> --
> View this message in context:
> http://n2.nabble.com/C--Osr.GetProjectionMethodParameterList-Access-Violation-tp3024324p3024796.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090604/5e3b9c1d/attachment.html
From even.rouault at mines-paris.org  Thu Jun  4 15:05:13 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jun  4 15:05:23 2009
Subject: [gdal-dev] Some questions about the TransformPoints typemap
In-Reply-To: <1979C52B2C1C234183439454C1599C7D65FB15@massenet.hitt.home>
References: <1979C52B2C1C234183439454C1599C7D65FB15@massenet.hitt.home>
Message-ID: <200906042105.13976.even.rouault@mines-paris.org>

Rene,

Le Thursday 04 June 2009 14:51:40 Hogendoorn, Rene, vous avez ?crit?:
> In 1.6.1, TransformPoints got a python typemap such that a list of tuples
> can be transformed. I want to make it a little bit more general, such that
> the inner tuples can be lists as well. While looking at the typemap, I have
> the following questions:
>
> - Why is there an explicit check on Py_None? Py_None will fail the next
> test anyway and the error message is not entirely true since a tuple is a
> sequence as well (and works).

Just slightly suboptimal coding and approximate error message it looks. Patch 
appreciated ;-)

>
> - Memory is allocated with CPLMalloc; in some other typemaps it is plain
> malloc. In the latter case, there is no check on allocation failures.
> Should these be replaced by CPLMalloc?
>
> - If CPLMalloc fails, it calls a memory allocation failure hook (according
> to the docs). The default is to terminate the application; shouldn't this
> hook raise a python memory exception?

Using non fatal allocation and checking the return code could be an 
improvement. But malloc/CPLMalloc should not fail unless you pass it a very 
huge array. Not to mention that CPLMalloc is itself used in GDAL internals, 
although they are from time to time replaced by VSIMalloc when the 
probability of failure is likely, but that makes coding a bit more difficult 
(properly handling error cases). Anyway, patch appreciated ;-)

>
> - The transformpoints typemap returns a tuple of 2 lists. In general,
> python functions return tuples. Is there a reason to return lists in this
> case?

The first list of the tuple is a list of triplets with the tranformed 
coordinates of the input sequence. The second list of the tuple is a list of 
return codes for each tuple of the input sequence
They are lists to be consistant with other calls that return a big number of 
elements. Generally, at least by looking at the other typemaps in the GDAL 
python bindings, we use tuples for small sized arrays (2 or 3 values), and 
lists for bigger arrays. Not sure if there is really a clearly defined policy 
though (I've noticed one exception for example : the typemap returning GCP 
return a tuple of GCPs)

>
> Regards,
>
> Rene Hogendoorn


From even.rouault at mines-paris.org  Thu Jun  4 16:21:08 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jun  4 16:21:18 2009
Subject: [gdal-dev] Thread safety of GDAL projection machinery?
In-Reply-To: <CED6B4B383C5F0418DAFEA443A0033C2C06CD6E29F@MALIBU.sarnoff.internal>
References: <ssrws82s80a.fsf@puffin.sarnoff.com>
	<200906042039.45807.even.rouault@mines-paris.org>
	<CED6B4B383C5F0418DAFEA443A0033C2C06CD6E29F@MALIBU.sarnoff.internal>
Message-ID: <200906042221.08807.even.rouault@mines-paris.org>

Le Thursday 04 June 2009 21:51:36 Karney, Charles, vous avez ?crit?:
> I'm afraid FWTools 2.4.0 has the same problem.  Here's a sampling of the
> output from multiple runs extracting the geodata from about 200 geotiffs
> (Florida North projection) running with 6 threads.

Too bad... I'm afraid that at that point we now really need code demonstrating 
the bug to fix it.

Here's a sample code I've used to try to reproduce (without success) the 
issue :

#include <gdal.h>
#include <cpl_multiproc.h>

void thread(void* unused)
{
    CPLSleep(2); /* Dummy way of waiting for all threads being started */
    while(TRUE)
    {
        GDALDatasetH hDS = GDALOpen("foo.tif", GA_ReadOnly);
        const char* pszPrj = GDALGetProjectionRef(hDS);
        GDALClose(hDS);
    }
}

int main(int argc, char* argv[])
{
    GDALAllRegister();
    int i;
    for(i=0;i<100;i++)
    {
        CPLCreateThread(thread, NULL);
    }
    while(TRUE) CPLSleep(1);
    return 0;
}

You could use that as a skeleton and add the GDAL calls that cause the errors. 
The exact image(s) you use could be important too (I don't remember you've 
precised which image format/driveer you use).

>
> ERROR 3: Read of file c:/Program Files (x86)/FWTools2.4.0/data/pcs.csv
> failed. ERROR 1: No PROJ.4 translation for source SRS, coordinate
> transformation initialization has failed. ERROR 3: Read of file c:/Program
> Files (x86)/FWTools2.4.0/data/prime_meridian.csv failed. ERROR 3: Read of
> file c:/Program Files (x86)/FWTools2.4.0/data/pcs.override.csv failed.
> ERROR 3: Read of file c:/Program Files
> (x86)/FWTools2.4.0/data/projop_wparm.csv failed. ERROR 3: Read of file
> c:/Program Files (x86)/FWTools2.4.0/data/gcs.csv failed. ERROR 2:
> CPLRealloc(): Out of memory allocating 32 bytes.
> ERROR 2: CPLRealloc(): Out of memory allocating 12 bytes.
> ERROR 3: Read of file c:/Program Files
> (x86)/FWTools2.4.0/data/unit_of_measure.csv failed.
>
> The problems go away if
>
> (1) I run a single thread, or
> (2) I put a lock around the GDAL calls.

Solution (2) is probably not better than (1) in term of speed, as it is going 
to serialize all GDAL calls.

>
>
> --
> Charles Karney <ckarney@sarnoff.com>
> Sarnoff Corporation, Princeton, NJ 08543-5300
>
> Tel: +1 609 734 2312
> Fax: +1 609 734 2662


From frdcn at hotmail.com  Thu Jun  4 17:34:09 2009
From: frdcn at hotmail.com (godofredo contreras)
Date: Thu Jun  4 17:34:12 2009
Subject: [gdal-dev] reload of layer definition without closing dataset
Message-ID: <COL103-W495DFD18798BF341D51436B24B0@phx.gbl>


Hi:

 

I'm trying to implement a reestructure layer routine for database datasources. I'm using OGR_DS_ExecuteSQL to send a drop column statement to mysql dataset and it works correctly, it drops the column but the problem is that the layer definition stays the same, how can I force the reload of layer definition without closing and opening the dataset?

 

Regards

 

Godofredo Contreras

_________________________________________________________________
Lauren found her dream laptop. Find the PC that?s right for you.
http://www.microsoft.com/windows/choosepc/?ocid=ftp_val_wl_290
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090604/f553030e/attachment.html
From even.rouault at mines-paris.org  Thu Jun  4 17:38:50 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jun  4 17:39:01 2009
Subject: [gdal-dev] reload of layer definition without closing dataset
In-Reply-To: <COL103-W495DFD18798BF341D51436B24B0@phx.gbl>
References: <COL103-W495DFD18798BF341D51436B24B0@phx.gbl>
Message-ID: <200906042338.51835.even.rouault@mines-paris.org>

You can't. By doing OGR_DS_ExecuteSQL, you by-pass OGR and it cannot know that 
you have altered the definition. Reloading is the only safe solution.

Proper fix : add support for a DeleteField() method at the OGR Layer level. 
See http://trac.osgeo.org/gdal/ticket/2671. It would require someone pushing 
a RFC on that.

Le Thursday 04 June 2009 23:34:09 godofredo contreras, vous avez ?crit?:
> Hi:
>
>
>
> I'm trying to implement a reestructure layer routine for database
> datasources. I'm using OGR_DS_ExecuteSQL to send a drop column statement to
> mysql dataset and it works correctly, it drops the column but the problem
> is that the layer definition stays the same, how can I force the reload of
> layer definition without closing and opening the dataset?
>
>
>
> Regards
>
>
>
> Godofredo Contreras
>
> _________________________________________________________________
> Lauren found her dream laptop. Find the PC that?s right for you.
> http://www.microsoft.com/windows/choosepc/?ocid=ftp_val_wl_290


From ckarney at Sarnoff.com  Fri Jun  5 10:36:10 2009
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Fri Jun  5 10:37:29 2009
Subject: [gdal-dev] Thread safety of GDAL projection machinery?
In-Reply-To: <200906042221.08807.even.rouault@mines-paris.org>
References: <ssrws82s80a.fsf@puffin.sarnoff.com>
	<200906042039.45807.even.rouault@mines-paris.org>
	<CED6B4B383C5F0418DAFEA443A0033C2C06CD6E29F@MALIBU.sarnoff.internal>,
	<200906042221.08807.even.rouault@mines-paris.org>
Message-ID: <CED6B4B383C5F0418DAFEA443A0033C2C06CD6E2A6@MALIBU.sarnoff.internal>

OK.  I'll try and put something together.  I might not
get to it for a couple of week, because I've a wedding to
go to in UK next week.
--
Charles Karney <ckarney@sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662
________________________________________
From: Even Rouault [even.rouault@mines-paris.org]
Sent: Thursday, June 04, 2009 16:21
To: Karney, Charles
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Thread safety of GDAL projection machinery?

Le Thursday 04 June 2009 21:51:36 Karney, Charles, vous avez ?crit :
> I'm afraid FWTools 2.4.0 has the same problem.  Here's a sampling of the
> output from multiple runs extracting the geodata from about 200 geotiffs
> (Florida North projection) running with 6 threads.

Too bad... I'm afraid that at that point we now really need code demonstrating
the bug to fix it.
From ltoma at bowdoin.edu  Fri Jun  5 11:31:18 2009
From: ltoma at bowdoin.edu (Laura Toma)
Date: Fri Jun  5 11:31:21 2009
Subject: [gdal-dev] gdalwarp on large files
In-Reply-To: <200906012030.47212.even.rouault@mines-paris.org>
References: <AFEF3EA0-D667-4DE5-A7E5-F7FA099B5EF3@bowdoin.edu>
	<200906012030.47212.even.rouault@mines-paris.org>
Message-ID: <4847B287-B166-4081-B1D4-A7265E85571A@bowdoin.edu>

Even,

I have the setup configured so that it  does not disconnect on its  
own.   There was something about gdalwarm handling large files.     
After some delay installing  the latest release  of gdal (gdalbuildvrt  
is not available in the earlier versions),  I got it to work. Both  
gdalbuildvrt and gdal_translate finished  fast (less than an hour) and  
now I have a 432001P x 40801L  raster.

Thanks a lot!

-Laura


On Jun 1, 2009, at 2:30 PM, Even Rouault wrote:

> Laura,
>
> From the error message, I guess you are running gdalwarp on a remote  
> server
> through a ssh connexion. There's probably a timeout that occurs  
> since your
> operation takes hours. You should check the ssh options of the  
> client/server
> for that.
>
> In your use case, if you just want to create a mosaic of SRTM files  
> and not
> really warp them, you'd better use gdalbuildvrt to create quickly a  
> VRT file
> (XML-based) and then translate it to geotiff. This should run much  
> faster
> than gdalwarp. But the 432001P x 40801L output size will remain. As  
> it is
> huge, it will also likely take some time !
>
> gdalbuildvrt mosaic.vrt *hgt
> gdal_translate mosaic.vrt mosaic.tif
>
> If you only use the mosaic with GDAL enabled tools, you can skip the
> gdal_translate step. That will save space (17.6 GB!) and time (a few  
> seconds
> v.s. several hours).
>
> Best regards,
> Even
>
> Le Monday 01 June 2009 19:58:44 Laura Toma, vous avez ?crit :
>> Hi,
>>
>> I am trying to create a large DEM from SRTM3 data.  I have a folder
>> 'australia' which includes 1060 .hgt tiles downloaded from
>> 'rome0srp01u.ecs.nasa.gov/', and I am trying to create a tiff for all
>> the tiles in this folder.
>>
>> I have tried to run 'gdalwarp'  several times and every time the
>> server gets reset (see below) after  processing the first .hgt file.
>> The tiles are not that large (i think i3600x3600), but processing the
>> first tile takes hours.
>>
>> Has anybody tried anything similar? Am I doing something wrong?  Any
>> advise would be greatly appreciated.
>>
>> thanks,
>> Laura
>>
>>> gdalwarp *hgt srtm_mosaik_australasia.tiff
>>
>> Creating output file that is 432001P x 40801L.
>> Processing input file S11E119.hgt.
>> Using internal nodata values (eg. -32768) for image S11E119.hgt.
>> 0...10...20...30...40...50...60..Read from remote host cod:  
>> Connection
>> reset by peer
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

From ksshannon at gmail.com  Fri Jun  5 12:05:15 2009
From: ksshannon at gmail.com (Kyle Shannon)
Date: Fri Jun  5 12:05:37 2009
Subject: [gdal-dev] Python Scripts
Message-ID: <c28f2e140906050905y121cc522icd8dccb85d9ae8ae@mail.gmail.com>

Hello all,
I am using some srtm data for some modeling and I need to get rid of the no
data values.  I checked the trac and found gdal_fillnodata.py.  Seems like a
good fit, but that script wasn't installed when I built 1.6.1.  Is this
script out of date, replaced or available in another form, or do I need to
rebuild differently?  Thanks.

kss

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406)829-6954
kshannon@fs.fed.us
ksshannon@gmail.com
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090605/7d02eae1/attachment.html
From bryan at ideotrope.org  Fri Jun  5 13:58:12 2009
From: bryan at ideotrope.org (Bryan Keith)
Date: Fri Jun  5 13:58:15 2009
Subject: [gdal-dev] Python Scripts
In-Reply-To: <c28f2e140906050905y121cc522icd8dccb85d9ae8ae@mail.gmail.com>
References: <c28f2e140906050905y121cc522icd8dccb85d9ae8ae@mail.gmail.com>
Message-ID: <1226.168.103.217.117.1244224692.squirrel@ideotrope.org>

kss,

That's in the gdal-dev branch (I don't really know my way around the doe
repository).  I use both Windows and Linux, and as I recall, it was easier
for me to get it running in Windows using the OSGeo4W installer then to
rebuild on Linux.

I know that's not much info, but maybe it's helpful.

Bryan

> Hello all,
> I am using some srtm data for some modeling and I need to get rid of the
> no
> data values.  I checked the trac and found gdal_fillnodata.py.  Seems like
> a
> good fit, but that script wasn't installed when I built 1.6.1.  Is this
> script out of date, replaced or available in another form, or do I need to
> rebuild differently?  Thanks.
>
> kss
>
> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
> Kyle Shannon
> Physical Science Technician
> RMRS Fire Sciences Lab
> Fire, Fuels & Smoke - RWU 4405
> 5775 Highway 10 W.
> Missoula, MT 59808
> (406)829-6954
> kshannon@fs.fed.us
> ksshannon@gmail.com
> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From matt.gregory at oregonstate.edu  Fri Jun  5 15:51:20 2009
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Fri Jun  5 16:19:32 2009
Subject: [gdal-dev] Incorrect use of MEM driver?
Message-ID: <451453C181B199458A55B2B1723FAC000260C8B9@SAGE.forestry.oregonstate.edu>

Hi all,

I'm a newbie to the MEM driver using Windows and trying to get it to
work using a very simple test:

///////////////

int main()
{
	GDALAllRegister();

	// Create space and populate with pattern
	GInt32 buf[10000];
	for (int i=0; i<10000; i++)
		*(buf+i) = i%32;

	// Create the MEM GDALDataset
	char* filename = new char[1024];
	sprintf(filename,
"MEM:::DATAPOINTER=%p,PIXELS=100,LINES=100,DATATYPE=Int32", buf);
	GDALDataset* srcDS = (GDALDataset*) GDALOpen(filename,
GA_ReadOnly);

	// Grab a chunk of data from the dataset
	GDALRasterBand* rb = srcDS->GetRasterBand(1);
	GInt32 buf2[100];
	rb->RasterIO( GF_Read, 0, 0, 10, 10, buf2, 10, 10, GDT_Int32, 0,
0);
}

///////////////

The RasterIO call fails, but through debugging I'm seeing that pabyData
in MEMDataset::Open is never receiving the correct pointer to the data
from the CPLScanPointer call (line 702 in memdataset.cpp).  I'm likely
doing something very stupid in my initial setup, so please let me know
if this is the case ...

My pointer address is something like 0x00126324.  When formatted into
the filename string, it becomes 00126324 (without the '0x').  Then, in
CPLScanPointer, it skips the MS specific code (lines 877-886) and calls
CPLScanULong which returns 126324, which I think is causing the bad
pointer.  

Thanks for help, matt
From even.rouault at mines-paris.org  Fri Jun  5 16:38:57 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jun  5 16:39:08 2009
Subject: [gdal-dev] Incorrect use of MEM driver?
In-Reply-To: <451453C181B199458A55B2B1723FAC000260C8B9@SAGE.forestry.oregonstate.edu>
References: <451453C181B199458A55B2B1723FAC000260C8B9@SAGE.forestry.oregonstate.edu>
Message-ID: <200906052238.58457.even.rouault@mines-paris.org>

Instead of sprintf("%p"), use CPLPrintPointer() that will add then 
necessary "0x" prefix in the case of the MSVC runtime library.

Le Friday 05 June 2009 21:51:20 Gregory, Matthew, vous avez ?crit?:
> My pointer address is something like 0x00126324. ?When formatted into
> the filename string, it becomes 00126324 (without the '0x'). ?Then, in
> CPLScanPointer, it skips the MS specific code (lines 877-886) and calls
> CPLScanULong which returns 126324, which I think is causing the bad
> pointer. ?


From ksshannon at gmail.com  Fri Jun  5 19:14:00 2009
From: ksshannon at gmail.com (Kyle Shannon)
Date: Fri Jun  5 19:21:33 2009
Subject: [gdal-dev] Python Scripts
In-Reply-To: <1226.168.103.217.117.1244224692.squirrel@ideotrope.org>
References: <c28f2e140906050905y121cc522icd8dccb85d9ae8ae@mail.gmail.com> 
	<1226.168.103.217.117.1244224692.squirrel@ideotrope.org>
Message-ID: <c28f2e140906051614h4aec79b6y1d08891b82478954@mail.gmail.com>

That did the trick, downloaded the current trunk and rebuilt, thanks.

kss
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406)829-6954
kshannon@fs.fed.us
ksshannon@gmail.com
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


On Fri, Jun 5, 2009 at 11:58 AM, Bryan Keith <bryan@ideotrope.org> wrote:

> kss,
>
> That's in the gdal-dev branch (I don't really know my way around the doe
> repository).  I use both Windows and Linux, and as I recall, it was easier
> for me to get it running in Windows using the OSGeo4W installer then to
> rebuild on Linux.
>
> I know that's not much info, but maybe it's helpful.
>
> Bryan
>
> > Hello all,
> > I am using some srtm data for some modeling and I need to get rid of the
> > no
> > data values.  I checked the trac and found gdal_fillnodata.py.  Seems
> like
> > a
> > good fit, but that script wasn't installed when I built 1.6.1.  Is this
> > script out of date, replaced or available in another form, or do I need
> to
> > rebuild differently?  Thanks.
> >
> > kss
> >
> > ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
> > Kyle Shannon
> > Physical Science Technician
> > RMRS Fire Sciences Lab
> > Fire, Fuels & Smoke - RWU 4405
> > 5775 Highway 10 W.
> > Missoula, MT 59808
> > (406)829-6954
> > kshannon@fs.fed.us
> > ksshannon@gmail.com
> > ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090605/3bcb121b/attachment.html
From 3119486 at irwebhost5.indyarocks.com  Sat Jun  6 01:10:59 2009
From: 3119486 at irwebhost5.indyarocks.com (Gokul Kartha)
Date: Sat Jun  6 01:24:50 2009
Subject: [gdal-dev] I have moved to Indyarocks
Message-ID: 6d46f35c06379e8042c86d7b331b616d

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090606/1e324523/attachment.html
From nahumoz at gmail.com  Sat Jun  6 12:08:36 2009
From: nahumoz at gmail.com (Oz Nahum)
Date: Sat Jun  6 12:08:38 2009
Subject: [gdal-dev] Re: Re: Python Scripts
Message-ID: <6ec71d090906060908x12b442c1v1b6b7d8a35064d98@mail.gmail.com>

Hi Kyle
It might be a little bit of a detour for reaching your goal, but if you're
already using gdal inside python you could use numpy masked arrays to fill
in no data values. I do that for that goal.

here is a snippet from my code:

def ClipPolution(nameOfMask, nameOfPolutionRaster):
    '''This function takes in two rasters, and returns a cliped raster,
    with NULL (-9999) values
    For all points out side of the domain of interest'''
    dataset = gdal.Open(nameOfPolutionRaster, GA_ReadOnly)
    dataSetMask = gdal.Open(nameOfMask, GA_ReadOnly)
    areaOfPolution = gdal_array.DatasetReadAsArray(dataset)
    maska = gdal_array.DatasetReadAsArray(dataSetMask)
    clip = ma.MaskedArray(areaOfPolution, mask=maska)
    cclip=ma.filled(clip,value=-9999)
    WriteRaster('p4masked.asc', cclip)
    print 'Successfuly Cliped polution Raster...'

you can find more stuff here:

http://docs.scipy.org/doc/numpy/reference/maskedarray.html

Hope it helps some how

Oz Nahum
Graduate Student
Center for Applied Geosciences
University of Tuebingen

-- 
----
           Imagine there's no countries
           It isn't hard to do
           Nothing to kill or die for
           And no religion too
           Imagine all the people
           Living life in peace
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090606/ee647306/attachment.html
From woklist at kyngchaos.com  Sat Jun  6 12:48:30 2009
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sat Jun  6 12:48:35 2009
Subject: [gdal-dev] missing nulls in vrt from GRASS rasters
Message-ID: <7F487151-7C14-4770-8706-BFDA62695816@kyngchaos.com>

I created a vrt raster from a set of GRASS rasters - image groups, RGB  
+ nulls.  But the nulls are not coming thru in the vrt.  Individually  
I get nulls.  Viewing in Qgis the vrt looks like:

-------------- next part --------------
A non-text attachment was scrubbed...
Name: vrt.png
Type: image/png
Size: 29590 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090606/79b58fbe/vrt-0001.png
-------------- next part --------------




Each successive image in the vrt overlaps those below it.

But when I add the individual GRASS raster groups to Qgis, it sees the  
nulls and lets the earlier images show thru in the overlapping areas.

The GRASS raster bands are all 0-255 greyscale images, and show up in  
the vrt as:

   <VRTRasterBand dataType="UInt16" band="1">
     <NoDataValue>2.56000000000000E+02</NoDataValue>
     <ColorInterp>Gray</ColorInterp>

gdalinfo also gives me that 256 for nodata.

In Qgis, the properties for the individual GRASS rasters has  
256,256,256 for the transparency band.  So the 256 seems to be right  
for the GDAL-GRASS driver for passing nodata/null.

As a test, I tried making a vrt from tiffs with alpha transparency -  
same problem, nodata is ignored.  Though for this one, there is no  
<NoDataValue> entry in the vrt.

Any idea how I can get the [GRASS] nulls to be recognized in a vrt?

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

[Trillian]  What are you supposed to do WITH a maniacally depressed  
robot?

[Marvin]  You think you have problems?  What are you supposed to do if  
you ARE a maniacally depressed robot?  No, don't try and answer, I'm  
50,000 times more intelligent than you and even I don't know the  
answer...

- HitchHiker's Guide to the Galaxy


From nahumoz at gmail.com  Sat Jun  6 12:49:09 2009
From: nahumoz at gmail.com (Oz Nahum)
Date: Sat Jun  6 12:49:13 2009
Subject: [gdal-dev] Re: Python Scripts
In-Reply-To: <6ec71d090906060908x12b442c1v1b6b7d8a35064d98@mail.gmail.com>
References: <6ec71d090906060908x12b442c1v1b6b7d8a35064d98@mail.gmail.com>
Message-ID: <6ec71d090906060949t4fc9e72cr5dffe2ab3d857900@mail.gmail.com>

Hi Kyle
It might be a little bit of a detour for reaching your goal, but if you're
already using gdal inside python you could use numpy masked arrays to fill
in no data values. I do that for that goal.

here is a snippet from my code:

def ClipPolution(nameOfMask, nameOfPolutionRaster):
    '''This function takes in two rasters, and returns a cliped raster,
    with NULL (-9999) values
    For all points out side of the domain of interest'''
    dataset = gdal.Open(nameOfPolutionRaster, GA_ReadOnly)
    dataSetMask = gdal.Open(nameOfMask, GA_ReadOnly)
    areaOfPolution = gdal_array.DatasetReadAsArray(dataset)
    maska = gdal_array.DatasetReadAsArray(dataSetMask)
    clip = ma.MaskedArray(areaOfPolution, mask=maska)
    cclip=ma.filled(clip,value=-9999)
    WriteRaster('p4masked.asc', cclip)
    print 'Successfuly Cliped polution Raster...'

you can find more stuff here:

http://docs.scipy.org/doc/numpy/reference/maskedarray.html

Hope it helps some how

Oz Nahum
Graduate Student
Center for Applied Geosciences
University of Tuebingen

-- 
----
           Imagine there's no countries
           It isn't hard to do
           Nothing to kill or die for
           And no religion too
           Imagine all the people
           Living life in peace





-- 
----
           Imagine there's no countries
           It isn't hard to do
           Nothing to kill or die for
           And no religion too
           Imagine all the people
           Living life in peace
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090606/6d20c5d9/attachment.html
From even.rouault at mines-paris.org  Sat Jun  6 14:37:39 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jun  6 14:37:51 2009
Subject: [gdal-dev] missing nulls in vrt from GRASS rasters
In-Reply-To: <7F487151-7C14-4770-8706-BFDA62695816@kyngchaos.com>
References: <7F487151-7C14-4770-8706-BFDA62695816@kyngchaos.com>
Message-ID: <200906062037.40820.even.rouault@mines-paris.org>

William,

you didn't mention how you have generated the VRT. If it's with gdalbuildvrt, 
I've just commited a change in trunk (r17201) that probably solves your 
issue. It appears that when a source has a nodata value, it is not sufficient 
to set it at the VRTRasterBand level. It must also been specified for each 
source by using a ComplexSource instead of a SimpleSource, so that nodata 
pixels from the source are not drawned on the destination buffer.

You can fix your VRT manually by replacing all SimpleSource references by 
ComplexSource and by adding a <NODATA>256</NODATA> inside each 
<ComplexSource> element.

Note that with qgis from svn trunk, I could manage to make it display 
correctly RGB images whose bands are of type UInt16 (it displayed only 
black), even when specifying the value range as 0...255 instead of the 
default 0...65535. I had to edit manually the VRT so that the VRTRasterBands 
are declared as Byte. This appears to be a qgis issue/feature, as openev can 
display correctly the same VRT.

Regards,

Even

Le Saturday 06 June 2009 18:48:30 William Kyngesburye, vous avez ?crit?:
> I created a vrt raster from a set of GRASS rasters - image groups, RGB
> + nulls.  But the nulls are not coming thru in the vrt.  Individually
> I get nulls.  Viewing in Qgis the vrt looks like:


From woklist at kyngchaos.com  Sat Jun  6 15:24:12 2009
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sat Jun  6 15:24:14 2009
Subject: [gdal-dev] missing nulls in vrt from GRASS rasters
In-Reply-To: <200906062037.40820.even.rouault@mines-paris.org>
References: <7F487151-7C14-4770-8706-BFDA62695816@kyngchaos.com>
	<200906062037.40820.even.rouault@mines-paris.org>
Message-ID: <5E0376D2-3E77-434C-82F3-A533D9CC94A0@kyngchaos.com>

On Jun 6, 2009, at 1:37 PM, Even Rouault wrote:

> William,
>
> you didn't mention how you have generated the VRT. If it's with  
> gdalbuildvrt,

Yes, gdalbuildvrt.
>
> I've just commited a change in trunk (r17201) that probably solves  
> your
> issue. It appears that when a source has a nodata value, it is not  
> sufficient
> to set it at the VRTRasterBand level. It must also been specified  
> for each
> source by using a ComplexSource instead of a SimpleSource, so that  
> nodata
> pixels from the source are not drawned on the destination buffer.

Will you be backporting this to 1.6 then?  Then I can get it into my  
GDAL framework binaries for OSX until a future 1.6.2 release.

> You can fix your VRT manually by replacing all SimpleSource  
> references by
> ComplexSource and by adding a <NODATA>256</NODATA> inside each
> <ComplexSource> element.
>
This did the trick.  thanks.

> Note that with qgis from svn trunk, I could manage to make it display
> correctly RGB images whose bands are of type UInt16 (it displayed only
> black), even when specifying the value range as 0...255 instead of the
> default 0...65535. I had to edit manually the VRT so that the  
> VRTRasterBands
> are declared as Byte. This appears to be a qgis issue/feature, as  
> openev can
> display correctly the same VRT.
>
gdal_translate also had the missing nulls.  With the manually fixed  
vrt above, gdal_translate and Qgis 1.1 display correctly.


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Mon Dieu! but they are all alike.  Cheating, murdering, lying,  
fighting, and all for things that the beasts of the jungle would not  
deign to possess - money to purchase the effeminate pleasures of  
weaklings.  And yet withal bound down by silly customs that make them  
slaves to their unhappy lot while firm in the belief that they be the  
lords of creation enjoying the only real pleasures of existence....

- the wisdom of Tarzan


From even.rouault at mines-paris.org  Sat Jun  6 15:37:38 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jun  6 15:37:48 2009
Subject: [gdal-dev] missing nulls in vrt from GRASS rasters
In-Reply-To: <5E0376D2-3E77-434C-82F3-A533D9CC94A0@kyngchaos.com>
References: <7F487151-7C14-4770-8706-BFDA62695816@kyngchaos.com>
	<200906062037.40820.even.rouault@mines-paris.org>
	<5E0376D2-3E77-434C-82F3-A533D9CC94A0@kyngchaos.com>
Message-ID: <200906062137.39291.even.rouault@mines-paris.org>

Le Saturday 06 June 2009 21:24:12 William Kyngesburye, vous avez ?crit?:

> Will you be backporting this to 1.6 then?  Then I can get it into my
> GDAL framework binaries for OSX until a future 1.6.2 release.

I'm not sure yet. trunk gdalbuildvrt has a new feature (-separate option) and 
the change for null values being mixed into that new code doesn't make easy 
to backport just it. I also consider it more as a new feature than a true 
bugfix. As it is changing the output of gdalbuildvrt, this could be seen as a 
unexpected effect for existing users of gdalbuildvrt (unlikely, but who 
knows ?). Not to mention that it will give people a good reason for upgrading 
to 1.7 when it will be released ;-)

If you really need it, you can just copy gdalbuildvrt.cpp from trunk to 1.6 
branch. It should compile just fine I think.

I might change my mind if enough people wish to see it backported and nobody 
complains.

> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> "Mon Dieu! but they are all alike.  Cheating, murdering, lying,
> fighting, and all for things that the beasts of the jungle would not
> deign to possess - money to purchase the effeminate pleasures of
> weaklings.  And yet withal bound down by silly customs that make them
> slaves to their unhappy lot while firm in the belief that they be the
> lords of creation enjoying the only real pleasures of existence....
>
> - the wisdom of Tarzan


From gispowerfan at gmail.com  Sun Jun  7 03:21:57 2009
From: gispowerfan at gmail.com (gispowerfan)
Date: Sun Jun  7 03:29:03 2009
Subject: [gdal-dev] subblock of gdal source code
Message-ID: <200906071521544688137@gmail.com>

hi,
      Recently I read the sorce code of gdal, and I found that there are subblocking in GDALRasterBand, can anyone give some examples of subblock, and how to use it? some doc in detail will be better!

thanks in advance!

gispowerfan

2009-06-07 



gispowerfan 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090607/fbfd12bb/attachment.html
From even.rouault at mines-paris.org  Sun Jun  7 04:56:07 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jun  7 04:56:17 2009
Subject: [gdal-dev] subblock of gdal source code
In-Reply-To: <200906071521544688137@gmail.com>
References: <200906071521544688137@gmail.com>
Message-ID: <200906071056.08707.even.rouault@mines-paris.org>

Unless you want to hack into gdalrasterband.cpp, you generally don't have to 
care about that concept of subblocking. It is just an internal implementation 
detail to improve memory usage when a raster has a big number of blocks.

Usually, GDAL will create an array of pointers to blocks of size nBlocksPerRow 
x nBlocksPerColumn, stored in the papoBlocks member. Let's say your raster is 
of dimension 1000 x 1000 and the block size is 10x10. This would lead to the 
creation of an array of 100 x 100 pointers.

If the number of blocks in one dimension is greater than SUBBLOCK_SIZE/2, then 
GDAL will create instead an array of ceil(nBocksPerRow / SUBBLOCK_SIZE) * 
ceil(nBocksPerColumn / SUBBLOCK_SIZE) where SUBBLOCK_SIZE = 64. In the 
example, as 100 > 32, an array of 4 x 4 is created in papoBlocks. Each 
element of this array can contain a sub-array of 64x64 pointer to blocks. But 
at the beginning those sub-arrays are not created, in order to save memory.

When you need to access block (i, j), GDAL will first compute the subblock in 
which the block is contained : (i', j') = (i / 64, j / 64). If the element at 
(i', j') is NULL, GDAL will first instanciate the 64x64 array. Then it will 
reserve memory for the block located at (i'', j'') = (i % 64, j % 64) in the 
subblock.

In case of huge rasters, this concept could be extended to a third level of 
indirection ("sub-sub-blocks"), but this has not been implemented.

Not sure I've been very clear. But now if you read the code, you should 
understand what I mean ;-)

Le Sunday 07 June 2009 09:21:57 gispowerfan, vous avez ?crit?:
> hi,
>       Recently I read the sorce code of gdal, and I found that there are
> subblocking in GDALRasterBand, can anyone give some examples of subblock,
> and how to use it? some doc in detail will be better!
>
> thanks in advance!
>
> gispowerfan
>
> 2009-06-07
>
>
>
> gispowerfan


From gispowerfan at gmail.com  Sun Jun  7 06:18:24 2009
From: gispowerfan at gmail.com (=?utf-8?B?Z2lzcG93ZXJmYW4=?=)
Date: Sun Jun  7 06:18:31 2009
Subject: =?utf-8?B?UmU6IFJlOiBbZ2RhbC1kZXZdIHN1YmJsb2NrIG9mIGdkYWwgc291cmNlIGNvZGU=?=
References: <200906071521544688137@gmail.com>
Message-ID: <200906071818224376898@gmail.com>

thank you very much! I understand the concept of subblocking in brief.
It is the skill of memory management of large image block using the default paras such as SUBBLOCK_SIZE=64.
The strategy of memory block management in GDAL is LRU, I got the idea from mail list archives, and now are there only block list for all GDAL datasets? or one block list for one GDAL datasets?
Is papoBlocks member the block list of memory?

thanks

gispowerfan 

2009-06-07 





???? Even Rouault 
????? 2009-06-07  16:56:17 
???? gdal-dev 
??? gispowerfan 
??? Re: [gdal-dev] subblock of gdal source code 
 
Unless you want to hack into gdalrasterband.cpp, you generally don't have to 
care about that concept of subblocking. It is just an internal implementation 
detail to improve memory usage when a raster has a big number of blocks.
Usually, GDAL will create an array of pointers to blocks of size nBlocksPerRow 
x nBlocksPerColumn, stored in the papoBlocks member. Let's say your raster is 
of dimension 1000 x 1000 and the block size is 10x10. This would lead to the 
creation of an array of 100 x 100 pointers.
If the number of blocks in one dimension is greater than SUBBLOCK_SIZE/2, then 
GDAL will create instead an array of ceil(nBocksPerRow / SUBBLOCK_SIZE) * 
ceil(nBocksPerColumn / SUBBLOCK_SIZE) where SUBBLOCK_SIZE = 64. In the 
example, as 100 > 32, an array of 4 x 4 is created in papoBlocks. Each 
element of this array can contain a sub-array of 64x64 pointer to blocks. But 
at the beginning those sub-arrays are not created, in order to save memory.
When you need to access block (i, j), GDAL will first compute the subblock in 
which the block is contained : (i', j') = (i / 64, j / 64). If the element at 
(i', j') is NULL, GDAL will first instanciate the 64x64 array. Then it will 
reserve memory for the block located at (i'', j'') = (i % 64, j % 64) in the 
subblock.
In case of huge rasters, this concept could be extended to a third level of 
indirection ("sub-sub-blocks"), but this has not been implemented.
Not sure I've been very clear. But now if you read the code, you should 
understand what I mean ;-)
Le Sunday 07 June 2009 09:21:57 gispowerfan, vous avez ?crit :
> hi,
>       Recently I read the sorce code of gdal, and I found that there are
> subblocking in GDALRasterBand, can anyone give some examples of subblock,
> and how to use it? some doc in detail will be better!
>
> thanks in advance!
>
> gispowerfan
>
> 2009-06-07
>
>
>
> gispowerfan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090607/9b2eaa6e/attachment-0001.html
From even.rouault at mines-paris.org  Sun Jun  7 06:44:12 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jun  7 06:44:23 2009
Subject: [gdal-dev] subblock of gdal source code
In-Reply-To: <200906071818224376898@gmail.com>
References: <200906071521544688137@gmail.com> <200906071818224376898@gmail.com>
Message-ID: <200906071244.13243.even.rouault@mines-paris.org>

Le Sunday 07 June 2009 12:18:24 gispowerfan, vous avez ?crit?:
> thank you very much! I understand the concept of subblocking in brief.
> It is the skill of memory management of large image block using the default
> paras such as SUBBLOCK_SIZE=64.

Not sure what you mean by "large image block" : to be more precise, 
subblocking is not related to the dimensions of a block itself, but to the 
number of blocks. For a constant image size, the larger the dimensions of a 
block, the lesser the number of blocks : nBlocksPerRow = ceil(nRasterXSize / 
nBlockXSize)

> The strategy of memory block management in 
> GDAL is LRU, I got the idea from mail list archives, and now are there only
> block list for all GDAL datasets?or one block list for one GDAL datasets?

There is only one block list shared by all GDAL datasets. It is accessed by 
the poOlded and poNewest pointers in gdalrasterblock.cpp. As this is used for 
all datasets, there is a global mutex to protect its access for 
multi-threading usage.
The role of the block list is to control the total memory used for block 
caching of all the datasets opened by GDAL.

> Is papoBlocks member the block list of memory?

No, the papoBlocks member is an array of pointer to blocks (or sub-blocks), 
maintained per rasterband (thus indirectly per dataset).

When the LRU block is discarded from the block list because the size of the 
block cache has reached its maximum (40 MB by default), it is freed and the 
related pointer in the papoBlocks of its rasterband is reset to NULL.
On the contrary when a new block is accessed, memory is allocated for it. The 
entry of the papoBlocks array points to that memory and the block is linked 
to the others in the block list.

>
> thanks
>
> gispowerfan
>
> 2009-06-07
>
>
>
>
>
> ???? Even Rouault
> ????? 2009-06-07  16:56:17
> ???? gdal-dev
> ??? gispowerfan
> ??? Re: [gdal-dev] subblock of gdal source code
>
> Unless you want to hack into gdalrasterband.cpp, you generally don't have
> to care about that concept of subblocking. It is just an internal
> implementation detail to improve memory usage when a raster has a big
> number of blocks. Usually, GDAL will create an array of pointers to blocks
> of size nBlocksPerRow x nBlocksPerColumn, stored in the papoBlocks member.
> Let's say your raster is of dimension 1000 x 1000 and the block size is
> 10x10. This would lead to the creation of an array of 100 x 100 pointers.
> If the number of blocks in one dimension is greater than SUBBLOCK_SIZE/2,
> then GDAL will create instead an array of ceil(nBocksPerRow /
> SUBBLOCK_SIZE) * ceil(nBocksPerColumn / SUBBLOCK_SIZE) where SUBBLOCK_SIZE
> = 64. In the example, as 100 > 32, an array of 4 x 4 is created in
> papoBlocks. Each element of this array can contain a sub-array of 64x64
> pointer to blocks. But at the beginning those sub-arrays are not created,
> in order to save memory. When you need to access block (i, j), GDAL will
> first compute the subblock in which the block is contained : (i', j') = (i
> / 64, j / 64). If the element at (i', j') is NULL, GDAL will first
> instanciate the 64x64 array. Then it will reserve memory for the block
> located at (i'', j'') = (i % 64, j % 64) in the subblock.
> In case of huge rasters, this concept could be extended to a third level of
> indirection ("sub-sub-blocks"), but this has not been implemented.
> Not sure I've been very clear. But now if you read the code, you should
> understand what I mean ;-)
>
> Le Sunday 07 June 2009 09:21:57 gispowerfan, vous avez ?crit :
> > hi,
> >       Recently I read the sorce code of gdal, and I found that there are
> > subblocking in GDALRasterBand, can anyone give some examples of subblock,
> > and how to use it? some doc in detail will be better!
> >
> > thanks in advance!
> >
> > gispowerfan
> >
> > 2009-06-07
> >
> >
> >
> > gispowerfan


From wollez at gmx.net  Sun Jun  7 07:52:22 2009
From: wollez at gmx.net (WolfgangZ)
Date: Sun Jun  7 07:52:34 2009
Subject: [gdal-dev] howto flattening of 3D shapefiles
Message-ID: <h0g9lk$913$1@ger.gmane.org>

Hi,

I hope that I'm on the correct mailing list. Otherwise please excuse my 
posting here.

How can I flatten a 3D shapefile? The problem is, that a software, where 
I need to import my shapefile, does not handle 3D shapfiles and 
therefore it can only display 2D shapefiles. However my shp is generated 
automatically and there is no option to flatten the shapes.

I just had a look at ogr2ogr but I did not figure out how to do this 
task. Any ideas?

Best regards
Woflgang

From even.rouault at mines-paris.org  Sun Jun  7 08:06:04 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jun  7 08:06:14 2009
Subject: [gdal-dev] howto flattening of 3D shapefiles
In-Reply-To: <h0g9lk$913$1@ger.gmane.org>
References: <h0g9lk$913$1@ger.gmane.org>
Message-ID: <200906071406.05647.even.rouault@mines-paris.org>

Wolfgang,

There are at least 2 ways of achieving this :

- use -nlt flag of ogr2ogr. For example if your src.shp contains 3D points : 
ogr2ogr dest.shp src.shp -nlt POINT. See http://gdal.org/ogr2ogr.html

- or, equivalently, use the SHPT creation option of the Shape driver : ogr2ogr 
dest.shp src.shp -lco SHPT=POINT. See http://gdal.org/ogr/drv_shapefile.html

Le Sunday 07 June 2009 13:52:22 WolfgangZ, vous avez ?crit?:
> Hi,
>
> I hope that I'm on the correct mailing list. Otherwise please excuse my
> posting here.
>
> How can I flatten a 3D shapefile? The problem is, that a software, where
> I need to import my shapefile, does not handle 3D shapfiles and
> therefore it can only display 2D shapefiles. However my shp is generated
> automatically and there is no option to flatten the shapes.
>
> I just had a look at ogr2ogr but I did not figure out how to do this
> task. Any ideas?
>
> Best regards
> Woflgang
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From wollez at gmx.net  Mon Jun  8 01:51:17 2009
From: wollez at gmx.net (WolfgangZ)
Date: Mon Jun  8 01:51:36 2009
Subject: [gdal-dev] Re: howto flattening of 3D shapefiles
In-Reply-To: <200906071406.05647.even.rouault@mines-paris.org>
References: <h0g9lk$913$1@ger.gmane.org>
	<200906071406.05647.even.rouault@mines-paris.org>
Message-ID: <h0i8sj$nu7$1@ger.gmane.org>

thank you very much, I managed to flatten my shapefile.

Best regards
Wolfgang

Even Rouault schrieb:
> Wolfgang,
> 
> There are at least 2 ways of achieving this :
> 
> - use -nlt flag of ogr2ogr. For example if your src.shp contains 3D points : 
> ogr2ogr dest.shp src.shp -nlt POINT. See http://gdal.org/ogr2ogr.html
> 
> - or, equivalently, use the SHPT creation option of the Shape driver : ogr2ogr 
> dest.shp src.shp -lco SHPT=POINT. See http://gdal.org/ogr/drv_shapefile.html
> 
> Le Sunday 07 June 2009 13:52:22 WolfgangZ, vous avez ?crit :
>> Hi,
>>
>> I hope that I'm on the correct mailing list. Otherwise please excuse my
>> posting here.
>>
>> How can I flatten a 3D shapefile? The problem is, that a software, where
>> I need to import my shapefile, does not handle 3D shapfiles and
>> therefore it can only display 2D shapefiles. However my shp is generated
>> automatically and there is no option to flatten the shapes.
>>
>> I just had a look at ogr2ogr but I did not figure out how to do this
>> task. Any ideas?
>>
>> Best regards
>> Woflgang
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From flavio.rigolon at gmail.com  Mon Jun  8 04:58:26 2009
From: flavio.rigolon at gmail.com (flavio rigolon)
Date: Mon Jun  8 05:06:46 2009
Subject: [gdal-dev] shp-gpx conversion with ogr2ogr
Message-ID: <2ce45db00906080158g144676e4w31998a63e44cfdcd@mail.gmail.com>

Hi all,
 I'm trying to convert a SHP file to GPX via ogr2ogr.

The "default" conversion works well:

<http://www.gdal.org/ogr/drv_gpx.html>$ ogr2ogr -f GPX nome_file.gpx
nome_file.shp

I'd like to mantain two attributes and I tried the option
GPX_USE_EXTENSIONS=YES with sql instruction to rename the interested fields:

$ ogr2ogr -f GPX -dsco GPX_USE_EXTENSION=YES -sql "SELECT NOME AS name, CAT
AS desc FROM source_layer" nome_file.gpx nome_file.shp

but I get this error:
--------------------------------
ERROR 1: SQL: Missing comma after column NOME in SELECT statement
--------------------------------
It seems that I forgot a comma but this command is the same in the
documentation.

I've checked the syntax with the help of this doc:
http://www.gdal.org/ogr/drv_gpx.html
http://www.gdal.org/ogr/drv_vrt.html

but I don't understand where is the error.
Does anibody have similar experience?

Thancks a lot for any hint.
flavio

-- 
io uso Debian GNU/Linux
user #413018 counter.li.org

<<usiamo formati aperti!>>
http://it.wikipedia.org/wiki/Formato_aperto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090608/3b3961b3/attachment.html
From neteler at osgeo.org  Mon Jun  8 11:24:02 2009
From: neteler at osgeo.org (Markus Neteler)
Date: Mon Jun  8 11:31:02 2009
Subject: [gdal-dev] Swiss CORINE: Bessel 1841 Hotine Oblique Mercator
	Azimuth Natural Origin?
Message-ID: <86782b610906080824k782f0ae6j552360b1933e9c5b@mail.gmail.com>

hi,

I am trying to reproject the Swiss CORINE data CLC90 [1] into LAEA.
The .prj file is attached. Unfortunately the transformation fails:

ogr2ogr -t_srs eu_etrs89_laea.prj /tmp/clc90_eu_laea.shp /geodata/clcbn85p.shp
ERROR 6: Failed to initialize PROJ.4 with `+proj=omerc
+lat_0=46.95240555555556 +lonc=7.439583333333333 +alpha=90 +k=1
+x_0=-9419820.590700001 +y_0=200000 +ellps=bessel +units=m +no_defs '.
lat_0 = 0 or 90 or alpha = 90
Failed to create coordinate transformation between the
following coordinate systems.  This may be because they
are not transformable, or because projection services
(PROJ.4 DLL/.so) could not be loaded.
Source:
PROJCS["Bessel_1841_Hotine_Oblique_Mercator_Azimuth_Natural_Origin",
    GEOGCS["GCS_Bessel_1841",
        DATUM["Not_specified_based_on_Bessel_1841_ellipsoid",
            SPHEROID["Bessel_1841",6377397.155,299.1528128]],
        PRIMEM["Greenwich",0.0],
        UNIT["Degree",0.0174532925199433]],
    PROJECTION["Hotine_Oblique_Mercator"],
    PARAMETER["False_Easting",-9419820.5907],
    PARAMETER["False_Northing",200000.0],
    PARAMETER["Scale_Factor",1.0],
    PARAMETER["Azimuth",90.0],
    PARAMETER["Longitude_Of_Center",7.439583333333333],
    PARAMETER["Latitude_Of_Center",46.95240555555556],
    UNIT["Meter",1.0]]
Target:
PROJCS["ETRS89 / ETRS-LAEA",
    GEOGCS["ETRS89",
        DATUM["European_Terrestrial_Reference_System_1989",
            SPHEROID["GRS 1980",6378137,298.2572221010042,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6258"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4258"]],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","3035"]]

Suggestions welcome to reproject this data set...

thanks
Markus

[1] http://www.bfs.admin.ch/bfs/portal/de/index/dienstleistungen/geostat/datenbeschreibung/corine_land_cover.html
    Data: -> GIS-Daten CORINE Land Cover Schweiz 1990 (ZIP file)
-------------- next part --------------
A non-text attachment was scrubbed...
Name: clcbn85p.prj
Type: application/octet-stream
Size: 537 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090608/6b4e1fa8/clcbn85p.obj
From warmerdam at pobox.com  Mon Jun  8 13:02:47 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jun  8 13:03:07 2009
Subject: [gdal-dev] shp-gpx conversion with ogr2ogr
In-Reply-To: <2ce45db00906080158g144676e4w31998a63e44cfdcd@mail.gmail.com>
References: <2ce45db00906080158g144676e4w31998a63e44cfdcd@mail.gmail.com>
Message-ID: <4A2D4437.50702@pobox.com>

flavio rigolon wrote:
> Hi all,
>  I'm trying to convert a SHP file to GPX via ogr2ogr.
> 
> The "default" conversion works well:
> 
> <http://www.gdal.org/ogr/drv_gpx.html>$ ogr2ogr -f GPX nome_file.gpx 
> nome_file.shp
> 
> I'd like to mantain two attributes and I tried the option 
> GPX_USE_EXTENSIONS=YES with sql instruction to rename the interested fields:
> 
> $ ogr2ogr -f GPX -dsco GPX_USE_EXTENSION=YES -sql "SELECT NOME AS name, 
> CAT AS desc FROM source_layer" nome_file.gpx nome_file.shp
> 
> but I get this error:
> --------------------------------
> ERROR 1: SQL: Missing comma after column NOME in SELECT statement
> --------------------------------
> It seems that I forgot a comma but this command is the same in the 
> documentation.
> 
> I've checked the syntax with the help of this doc:
> http://www.gdal.org/ogr/drv_gpx.html
> http://www.gdal.org/ogr/drv_vrt.html
> 
> but I don't understand where is the error.
> Does anibody have similar experience?

Flavio,

I found the above syntax worked in trunk, and 1.6 but not in 1.5.  I suspect
you are using 1.5.x or earlier binaries that do not support the AS operator
for renaming fields.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From flavio.rigolon at gmail.com  Mon Jun  8 16:27:04 2009
From: flavio.rigolon at gmail.com (flavio rigolon)
Date: Mon Jun  8 16:34:16 2009
Subject: [gdal-dev] shp-gpx conversion with ogr2ogr
In-Reply-To: <4A2D4437.50702@pobox.com>
References: <2ce45db00906080158g144676e4w31998a63e44cfdcd@mail.gmail.com>
	<4A2D4437.50702@pobox.com>
Message-ID: <2ce45db00906081327p40bbcdf2t140b90caf1283f6@mail.gmail.com>

>
>
> Flavio,
>
> I found the above syntax worked in trunk, and 1.6 but not in 1.5.  I
> suspect
> you are using 1.5.x or earlier binaries that do not support the AS operator
> for renaming fields.


Frank,
 thanks! You're right. I'm using 1.5 version.
I will try with 1.6

regards
flavio


-- 
io uso Debian GNU/Linux
user #413018 counter.li.org

<<usiamo formati aperti!>>
http://it.wikipedia.org/wiki/Formato_aperto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090608/c750d3d5/attachment.html
From schut at sarvision.nl  Tue Jun  9 08:29:06 2009
From: schut at sarvision.nl (Vincent Schut)
Date: Tue Jun  9 08:37:15 2009
Subject: [gdal-dev] memory leak in hdf driver
Message-ID: <4A2E5592.2080607@sarvision.nl>

Hi,

I'm afraid I've encountered a memory leak in the hdf driver.
Context: because of massive parallel (cluster) processing, I'm reusing a 
python instance for lots of jobs. Some of these jobs use gdal to read 
and/or save data. In some cases, I saw the memory use of my python 
worker processes grow with each job, until the whole lot got killed. 
I've got 8 gig on that server :-). I've been able to track down the leak 
to the use of gdal.Open on a hdf (modis) dataset. I guess this means 
that either the gdal hdf driver or libhdf4 has the leak.

Here is some python code (runs on linux only due to the code to get the 
mem usage) to prove a leak when opening a hdf file, while no leak when 
opening a tif. Run in a folder with 'data.hdf' and 'data.tif' present, 
or change those names to an existing hdf and tif file.

Using 64bit linux, gdal svn rev. 17228 (today), libhdf4.2r2, python 2.6.2
I'll file a bug for this issue.

========= python code =========

import os
from osgeo import gdal

def getmemory():
    proc_status = '/proc/%d/status' % os.getpid()
    scale = {'kB': 1024.0, 'mB': 1024.0*1024.0,
          'KB': 1024.0, 'MB': 1024.0*1024.0}
    v = open(proc_status).read()
    i = v.index('VmSize:')
    v = v[i:].split(None, 3)
    return (int(v[1]) * scale[v[2]])

nFiles = 100

m0 = getmemory()
print 'memory usage before:', m0
print
print nFiles, 'times the same hdf file'
for i in range(nFiles):
    gdal.OpenShared('data.hdf')

m1 = getmemory()
print 'memory usage now:', m1, '  difference:', m1-m0
print
print nFiles, 'times the same tif file'
for i in range(nFiles):
    gdal.OpenShared('data.tif')

m2 = getmemory()
print 'memory usage now:', m2, '  difference:', m2-m1

From schut at sarvision.nl  Tue Jun  9 08:41:46 2009
From: schut at sarvision.nl (Vincent Schut)
Date: Tue Jun  9 08:41:48 2009
Subject: [gdal-dev] memory leak in hdf driver
In-Reply-To: <4A2E5592.2080607@sarvision.nl>
References: <4A2E5592.2080607@sarvision.nl>
Message-ID: <4A2E588A.8020102@sarvision.nl>

issue filed as http://trac.osgeo.org/gdal/ticket/3023

Vincent Schut wrote:
> Hi,
>
> I'm afraid I've encountered a memory leak in the hdf driver.
> Context: because of massive parallel (cluster) processing, I'm reusing 
> a python instance for lots of jobs. Some of these jobs use gdal to 
> read and/or save data. In some cases, I saw the memory use of my 
> python worker processes grow with each job, until the whole lot got 
> killed. I've got 8 gig on that server :-). I've been able to track 
> down the leak to the use of gdal.Open on a hdf (modis) dataset. I 
> guess this means that either the gdal hdf driver or libhdf4 has the leak.
>
> Here is some python code (runs on linux only due to the code to get 
> the mem usage) to prove a leak when opening a hdf file, while no leak 
> when opening a tif. Run in a folder with 'data.hdf' and 'data.tif' 
> present, or change those names to an existing hdf and tif file.
>
> Using 64bit linux, gdal svn rev. 17228 (today), libhdf4.2r2, python 2.6.2
> I'll file a bug for this issue.
>
> ========= python code =========
>
> import os
> from osgeo import gdal
>
> def getmemory():
>    proc_status = '/proc/%d/status' % os.getpid()
>    scale = {'kB': 1024.0, 'mB': 1024.0*1024.0,
>          'KB': 1024.0, 'MB': 1024.0*1024.0}
>    v = open(proc_status).read()
>    i = v.index('VmSize:')
>    v = v[i:].split(None, 3)
>    return (int(v[1]) * scale[v[2]])
>
> nFiles = 100
>
> m0 = getmemory()
> print 'memory usage before:', m0
> print
> print nFiles, 'times the same hdf file'
> for i in range(nFiles):
>    gdal.OpenShared('data.hdf')
>
> m1 = getmemory()
> print 'memory usage now:', m1, '  difference:', m1-m0
> print
> print nFiles, 'times the same tif file'
> for i in range(nFiles):
>    gdal.OpenShared('data.tif')
>
> m2 = getmemory()
> print 'memory usage now:', m2, '  difference:', m2-m1
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jachym.cepicky at gmail.com  Tue Jun  9 09:15:06 2009
From: jachym.cepicky at gmail.com (Jachym Cepicky)
Date: Tue Jun  9 09:21:26 2009
Subject: [gdal-dev] support for gml 3 in gdal
Message-ID: <20090609131506.GC4965@kocour>

Hi,

I wanted to ask about current status of GML 3.x in OGR. Can it be
created? Can I specify custom profiles?

If not, is there any plan for implementing GML 3.1 to GML? 

Thanks

Jachym

-- 
Jachym Cepicky
e-mail: jachym.cepicky gmail com
URL: http://les-ejk.cz
GPG: http://www.les-ejk.cz/pgp/JachymCepicky.pgp
Key fingerprint: 0C6D 0EAE 76BD 506C F299  ED8A C8AB 74B8 08D4 E08F
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090609/90c087d5/attachment.bin
From bfraser at geoanalytic.com  Tue Jun  9 10:10:26 2009
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Tue Jun  9 10:40:56 2009
Subject: [gdal-dev] OGR and database filter on spatial extent
Message-ID: <4A2E6D52.60909@geoanalytic.com>

Hi All,

  In the case of accessing data in a relational database, does OGR have the ability to pass a spatial extent to the database to use as a filter on the geometry before sending the rows?

Thanks,
Brent Fraser
From warmerdam at pobox.com  Tue Jun  9 11:42:40 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jun  9 11:42:57 2009
Subject: [gdal-dev] OGR and database filter on spatial extent
In-Reply-To: <4A2E6D52.60909@geoanalytic.com>
References: <4A2E6D52.60909@geoanalytic.com>
Message-ID: <4A2E82F0.1060900@pobox.com>

Brent Fraser wrote:
> Hi All,
> 
>  In the case of accessing data in a relational database, does OGR have 
> the ability to pass a spatial extent to the database to use as a filter 
> on the geometry before sending the rows?

Brent,

Yes.  The OGRLayer has a SetSpatialFilter() method for this.  Some drivers
evaluate the spatial filter in OGR after reading all records, but smart
drivers are able to use the spatial filter for efficient querying.  So, the
spatially enabled databases work it into the query.

The -spat switch for ogrinfo is translated into a SetSpatialFilter() call
for instance.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Jun  9 11:48:09 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jun  9 11:48:27 2009
Subject: [gdal-dev] support for gml 3 in gdal
In-Reply-To: <20090609131506.GC4965@kocour>
References: <20090609131506.GC4965@kocour>
Message-ID: <4A2E8439.1090605@pobox.com>

Jachym Cepicky wrote:
> Hi,
> 
> I wanted to ask about current status of GML 3.x in OGR. Can it be
> created? Can I specify custom profiles?
> 
> If not, is there any plan for implementing GML 3.1 to GML? 

Jachym,

Chaitanya has a small contract to implement limited support for reading and
I think writing GML 3.1.1 products.  He is working on that now and can
hopefully provide some more detail.  I may have a contract over the next half
year or so to implement full fledged GML SF support based on GML 3.1.1.

Right now I do not believe OGR can produce GML 3.1.1 products but it is
possible it will soon depending on what Chaitanya is attempting.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From bfraser at geoanalytic.com  Tue Jun  9 14:31:51 2009
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Tue Jun  9 14:32:14 2009
Subject: [gdal-dev] OGR and database filter on spatial extent
In-Reply-To: <4A2E82F0.1060900@pobox.com>
References: <4A2E6D52.60909@geoanalytic.com> <4A2E82F0.1060900@pobox.com>
Message-ID: <4A2EAA97.2050306@geoanalytic.com>

Frank,

  Interesting.  I'm attempting to use Mapserver -> OGR -> VRT -> ODBC -> SqlServer2000 -> a table of 250k rows of point features.

  Testing with ogrinfo to return all the rows takes about 25 seconds, but with a "-spat"  to get about 3000 rows takes < 2 seconds (very acceptable).  And I didn't need to create a view with XMIN,YMIN,XMAX,YMAX as implied on GDAL's ODBC format page; OGR applied the filter to the point coordinate columns (dunno what it would do with lines or polygons and no min/max columns though).
 
  Looking at mapserver's mapogr.cpp, it appears that OGR_L_SetSpatialFilter is being called, so I'll have to do some more tracing/debugging to find out why my mapserver performance is so bad with this layer.

Thanks!
Brent Fraser

Frank Warmerdam wrote:
> Brent Fraser wrote:
>> Hi All,
>>
>>  In the case of accessing data in a relational database, does OGR have 
>> the ability to pass a spatial extent to the database to use as a 
>> filter on the geometry before sending the rows?
> 
> Brent,
> 
> Yes.  The OGRLayer has a SetSpatialFilter() method for this.  Some drivers
> evaluate the spatial filter in OGR after reading all records, but smart
> drivers are able to use the spatial filter for efficient querying.  So, the
> spatially enabled databases work it into the query.
> 
> The -spat switch for ogrinfo is translated into a SetSpatialFilter() call
> for instance.
> 
> Best regards,
From Shawn.Gong at drdc-rddc.gc.ca  Tue Jun  9 15:38:44 2009
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Tue Jun  9 15:38:52 2009
Subject: [gdal-dev] adding GCPs to RSAT-2 NITF format imagery_HH.ntf
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E26E96E@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

I have run the following Python codes to add more GCPs to RSAT-2's
single channel GeoTiff imagery_HH.tif. 
But when I apply it on RSAT-2 NITF format imagery_HH.ntf, all the GCPs
went to an anxiliary file "imagery_HH_GCPs.ntf.aux.xml". 
How can I add the GCPs directly into imagery_HH.ntf?


thanks,
Shawn


... ...
    dest_ds = gdal.GetDriverByName("NITF").CreateCopy(dest_file,
source_DN_ds, 0)

    # get projection
    projection = source_GCP_ds.GetGCPProjection()
    if projection is None:
        projection = source_GCP_ds.GetProjection()

    # get GCPs
    gcplist = []
    gcps = source_GCP_ds.GetGCPs()
    for item in gcps:
        gcplist.append(item)

    # writing GCPs to dest_ds
    dest_ds.SetGCPs(gcplist, projection)

    # close datasets properly and flush dest_ds to disk
    source_GCP_ds.FlushCache()
    source_GCP_ds = None

    source_DN_ds.FlushCache()
    source_DN_ds = None

    dest_ds.FlushCache()
    dest_ds = None




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090609/7fdf94d8/attachment.html
From even.rouault at mines-paris.org  Tue Jun  9 15:53:19 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jun  9 15:53:29 2009
Subject: [gdal-dev] adding GCPs to RSAT-2 NITF format imagery_HH.ntf
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E26E96E@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E26E96E@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <200906092153.19461.even.rouault@mines-paris.org>

You can't. The NITF driver doesn't support setting GCPs in the imagery itself.
When it reports GCPs while reading a NITF file, it takes them from the IGEOLO 
record that can contain up to 4 GCPs. But AFAIK, it wouldn't be easy to *set* 
arbitrary GCPs, as there must be necessary the 4 corners of the image.

Le Tuesday 09 June 2009 21:38:44 Gong, Shawn (Contractor), vous avez ?crit?:
> hi list,
>
> I have run the following Python codes to add more GCPs to RSAT-2's
> single channel GeoTiff imagery_HH.tif.
> But when I apply it on RSAT-2 NITF format imagery_HH.ntf, all the GCPs
> went to an anxiliary file "imagery_HH_GCPs.ntf.aux.xml".
> How can I add the GCPs directly into imagery_HH.ntf?
>
>
> thanks,
> Shawn
>
>
> ... ...
>     dest_ds = gdal.GetDriverByName("NITF").CreateCopy(dest_file,
> source_DN_ds, 0)
>
>     # get projection
>     projection = source_GCP_ds.GetGCPProjection()
>     if projection is None:
>         projection = source_GCP_ds.GetProjection()
>
>     # get GCPs
>     gcplist = []
>     gcps = source_GCP_ds.GetGCPs()
>     for item in gcps:
>         gcplist.append(item)
>
>     # writing GCPs to dest_ds
>     dest_ds.SetGCPs(gcplist, projection)
>
>     # close datasets properly and flush dest_ds to disk
>     source_GCP_ds.FlushCache()
>     source_GCP_ds = None
>
>     source_DN_ds.FlushCache()
>     source_DN_ds = None
>
>     dest_ds.FlushCache()
>     dest_ds = None


From matt at klaric.com  Wed Jun 10 10:56:04 2009
From: matt at klaric.com (Matt Klaric)
Date: Wed Jun 10 10:56:06 2009
Subject: [gdal-dev] 1.7 release date
Message-ID: <eba00f2b0906100756x3b91a798lf1fa14ecb5022b4b@mail.gmail.com>

What's the current thinking on when 1.7 might be released?  I'm interested
in a bugfix that has been added to the trunk, and am curious whether I
should spend the time to back port it to my version of 1.6.x or wait for 1.7
to be released.  I'm not looking for an exact date, but a rough timeline: a
week, a month, a few months, a year, etc.

Thanks,
Matt Klaric
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090610/8ad4f02c/attachment.html
From even.rouault at mines-paris.org  Wed Jun 10 13:29:30 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jun 10 13:29:41 2009
Subject: [gdal-dev] 1.7 release date
In-Reply-To: <eba00f2b0906100756x3b91a798lf1fa14ecb5022b4b@mail.gmail.com>
References: <eba00f2b0906100756x3b91a798lf1fa14ecb5022b4b@mail.gmail.com>
Message-ID: <200906101929.31231.even.rouault@mines-paris.org>

Matt,

1.7 release date hasn't been decided yet. There is no precise criterion to 
determine when it happens : it depends mainly on when RFC or major work 
planned by developers have been implemented. But if you look at the release 
date of previous "major" versions (1.6.0 ~ 04-Dec-2008, 1.5.0 ~ 20-Dec-2007, 
1.4.0 ~ 5-Jan-2007), you could expect 1.7.0 for the end of 2009.

Depending on the bug fix (which one are you refering to ? ticket number, SVN 
revision), it could be considered to be backported into the next maintenance 
version of the 1.6.x branch. But 1.6.1 has been released just a few weeks 
ago, so 1.6.2 won't likely be released before a few months.

Best regards,

Even

Le Wednesday 10 June 2009 16:56:04 Matt Klaric, vous avez ?crit?:
> my version of 1.6.x or wait for 1.7
> to be released. ?I'm not looking for an exact date, but a rough timeline: a
> week, a month, a few months, a year, etc


From matt at klaric.com  Wed Jun 10 14:11:00 2009
From: matt at klaric.com (Matt Klaric)
Date: Wed Jun 10 14:11:03 2009
Subject: [gdal-dev] 1.7 release date
In-Reply-To: <200906101929.31231.even.rouault@mines-paris.org>
References: <eba00f2b0906100756x3b91a798lf1fa14ecb5022b4b@mail.gmail.com>
	<200906101929.31231.even.rouault@mines-paris.org>
Message-ID: <eba00f2b0906101111p33a173d6s7e07ce2c5d725fc8@mail.gmail.com>

On Wed, Jun 10, 2009 at 12:29 PM, Even Rouault <even.rouault@mines-paris.org
> wrote:

>
> 1.7 release date hasn't been decided yet. There is no precise criterion to
> determine when it happens : it depends mainly on when RFC or major work
> planned by developers have been implemented. But if you look at the release
> date of previous "major" versions (1.6.0 ~ 04-Dec-2008, 1.5.0 ~
> 20-Dec-2007,
> 1.4.0 ~ 5-Jan-2007), you could expect 1.7.0 for the end of 2009.
>

Good to know.


>
> Depending on the bug fix (which one are you refering to ? ticket number,
> SVN
> revision), it could be considered to be backported into the next
> maintenance
> version of the 1.6.x branch. But 1.6.1 has been released just a few weeks
> ago, so 1.6.2 won't likely be released before a few months.
>
>
I'm looking at ticket #2989.  See: http://trac.osgeo.org/gdal/ticket/2989

I'll likely end up creating a patch for my gentoo ebuild unless this gets
backported into a 1.6.2 release.  It's tough to deal with some of the new,
large GeoEye-1 scenes without this fix.

Thanks,
Matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090610/00f82125/attachment.html
From even.rouault at mines-paris.org  Wed Jun 10 14:34:06 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jun 10 14:34:17 2009
Subject: [gdal-dev] 1.7 release date
In-Reply-To: <eba00f2b0906101111p33a173d6s7e07ce2c5d725fc8@mail.gmail.com>
References: <eba00f2b0906100756x3b91a798lf1fa14ecb5022b4b@mail.gmail.com>
	<200906101929.31231.even.rouault@mines-paris.org>
	<eba00f2b0906101111p33a173d6s7e07ce2c5d725fc8@mail.gmail.com>
Message-ID: <200906102034.08099.even.rouault@mines-paris.org>

Personnaly, being the author of that change, this one is precisely the type of 
change that I'm really reluctant to backport. Much too large and risky for a 
stable branch, on top of previous changes over the the whole NITF driver 
since 1.6, etc... I see support for 64-bit offsets in NITF more as a new 
feature than a bug fix.

Le Wednesday 10 June 2009 20:11:00 Matt Klaric, vous avez ?crit?:
> On Wed, Jun 10, 2009 at 12:29 PM, Even Rouault
> <even.rouault@mines-paris.org
>
> > wrote:
> >
> >
> > 1.7 release date hasn't been decided yet. There is no precise criterion
> > to determine when it happens : it depends mainly on when RFC or major
> > work planned by developers have been implemented. But if you look at the
> > release date of previous "major" versions (1.6.0 ~ 04-Dec-2008, 1.5.0 ~
> > 20-Dec-2007,
> > 1.4.0 ~ 5-Jan-2007), you could expect 1.7.0 for the end of 2009.
>
> Good to know.
>
> > Depending on the bug fix (which one are you refering to ? ticket number,
> > SVN
> > revision), it could be considered to be backported into the next
> > maintenance
> > version of the 1.6.x branch. But 1.6.1 has been released just a few weeks
> > ago, so 1.6.2 won't likely be released before a few months.
>
> I'm looking at ticket #2989.  See: http://trac.osgeo.org/gdal/ticket/2989
>
> I'll likely end up creating a patch for my gentoo ebuild unless this gets
> backported into a 1.6.2 release.  It's tough to deal with some of the new,
> large GeoEye-1 scenes without this fix.
>
> Thanks,
> Matt


From jerome at georezo.net  Wed Jun 10 14:39:41 2009
From: jerome at georezo.net (=?iso-8859-1?Q?Cuinet_J=E9r=F4me?=)
Date: Wed Jun 10 14:39:50 2009
Subject: [gdal-dev] 1.7 release date
In-Reply-To: <eba00f2b0906101111p33a173d6s7e07ce2c5d725fc8@mail.gmail.com>
References: <eba00f2b0906100756x3b91a798lf1fa14ecb5022b4b@mail.gmail.com><200906101929.31231.even.rouault@mines-paris.org>
	<eba00f2b0906101111p33a173d6s7e07ce2c5d725fc8@mail.gmail.com>
Message-ID: <D49C006D41ED403583227CED95296703@JCPORTABLE>

Now, I want to use a new enhancement which is not compile by defaut. So I 
have downloaded trunk sources, compiled the files and so I have a local user 
library (which is so in /usr/local/lib directory).

I'm using unstable trunk library ! Yes, I 'm using new enhancement ! I shall 
discover new bugs ! Yes, I should eradicate these !

It may be the open's magic. Elsewhere, I must wait and just ask when such 
feature will be released, and I will have to pay the library...


New early releases might be useless. Be patient.

----- Original Message ----- 
From: "Matt Klaric" <matt@klaric.com>
To: <gdal-dev@lists.osgeo.org>
Sent: Wednesday, June 10, 2009 8:11 PM
Subject: Re: [gdal-dev] 1.7 release date


> On Wed, Jun 10, 2009 at 12:29 PM, Even Rouault 
> <even.rouault@mines-paris.org
>> wrote:
>
>>
>> 1.7 release date hasn't been decided yet. There is no precise criterion 
>> to
>> determine when it happens : it depends mainly on when RFC or major work
>> planned by developers have been implemented. But if you look at the 
>> release
>> date of previous "major" versions (1.6.0 ~ 04-Dec-2008, 1.5.0 ~
>> 20-Dec-2007,
>> 1.4.0 ~ 5-Jan-2007), you could expect 1.7.0 for the end of 2009.
>>
>
> Good to know.
>
>
>>
>> Depending on the bug fix (which one are you refering to ? ticket number,
>> SVN
>> revision), it could be considered to be backported into the next
>> maintenance
>> version of the 1.6.x branch. But 1.6.1 has been released just a few weeks
>> ago, so 1.6.2 won't likely be released before a few months.
>>
>>
> I'm looking at ticket #2989.  See: http://trac.osgeo.org/gdal/ticket/2989
>
> I'll likely end up creating a patch for my gentoo ebuild unless this gets
> backported into a 1.6.2 release.  It's tough to deal with some of the new,
> large GeoEye-1 scenes without this fix.
>
> Thanks,
> Matt
>


--------------------------------------------------------------------------------


> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev 

From n.e.kendall at gmail.com  Wed Jun 10 16:39:20 2009
From: n.e.kendall at gmail.com (Nicholas Efremov-Kendall)
Date: Wed Jun 10 16:39:22 2009
Subject: [gdal-dev] Specifying projections
Message-ID: <33fd44f90906101339u1ac1194fjdadf2ac07256e240@mail.gmail.com>

Hi all,

I apologize for the somewhat beginner's question but here goes: I'm trying
to convert a shp file to GML. The shp file doesn't have a projection defined
for it, and I use the -a_srs" "EPSG:XXXX" -fileout -filein format. When I
convert them this way, the gml doesn't contain a bounding box or information
on the projection, although I explicitly assign a coordinate system (or
think I am). Does anyone have any suggestions on why this is happening, and
what I can do to resolve this issue?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090610/5aa2aa91/attachment.html
From sjahputerao at missouri.edu  Wed Jun 10 17:04:10 2009
From: sjahputerao at missouri.edu (Ozy Sjahputera)
Date: Wed Jun 10 17:05:18 2009
Subject: [gdal-dev] Can we copy RPC from NITF file to a newly created NITF
	file ?
Message-ID: <4A301FCA.7070103@missouri.edu>

I have an NITF image in UTM projection, but its RPC appears to be 
intended for LatLon. I tried to perform orthorectification on this image 
using orthoigen from OSSIM, but the result was weird (panchromatic and 
multispectral become non-overlapping).  I plan to reproject this image 
to LatLon hoping that it will work well with the available RPC. However, 
can do I transfer the RPC from original image to the new image? Should 
the new image be in NITF as well to accommodate the RPC?

Thanks.
Ozy
From Shawn.Gong at drdc-rddc.gc.ca  Wed Jun 10 17:19:12 2009
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Wed Jun 10 17:19:17 2009
Subject: [gdal-dev] _osr TransformPoint error
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E26E977@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

I've been getting the following error from osr.py:
? File "C:\iapro\OpenEV\python\lib\site-packages\osgeo\osr.py", line 618, in TransformPoint
return _osr.CoordinateTransformation_TransformPoint(*args)
NotImplementedError: Wrong number of arguments for overloaded function 'CoordinateTransformation_TransformPoint'.
? Possible C/C++ prototypes are:
??? TransformPoint(double [3])
??? TransformPoint(double [3], double, double, double)


The function I'm calling is below. ?I've tried it with different input combinations, but I always get the same result.

tr = osr.CoordinateTransformation(ref, proj)
tr_pts = []
for pt in geo_nodes:
       tr_pts.append(tr.TransformPoint(pt[0], pt[1]))


Has anyone seen the error, does it has something to do with Swig?


thanks,
Shawn


From even.rouault at mines-paris.org  Wed Jun 10 17:19:18 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jun 10 17:19:29 2009
Subject: [gdal-dev] Specifying projections
In-Reply-To: <33fd44f90906101339u1ac1194fjdadf2ac07256e240@mail.gmail.com>
References: <33fd44f90906101339u1ac1194fjdadf2ac07256e240@mail.gmail.com>
Message-ID: <200906102319.19271.even.rouault@mines-paris.org>

Nicholas,

this is a actually a good point. I've just improved ogr2ogr (svn trunk r17229) 
so that it sets the spatial coordinate system on each individual geometry 
when -a_srs is specified, in addition to the destination layer. This way 
the 'srsName' attribute will be written for each output GML geometry.

With your current version of OGR, you can use the following workaround. 
Instead of using -a_srs, you can specify both -s_srs and -t_srs, so that a 
reprojection (that won't do anything) occurs, which sets the destination SRS 
on each geometry.

ogr2ogr -f GML -s_srs EPSG:XXXX -t_srs EPSG:XXXX out.gml in.shp

Other point to be aware of : the GML driver doesn't support reading the 
coordinate system. It will just ignore the srsName attribute on a feature.

Best regards,

Even

Le Wednesday 10 June 2009 22:39:20 Nicholas Efremov-Kendall, vous avez ?crit?:
> Hi all,
>
> I apologize for the somewhat beginner's question but here goes: I'm trying
> to convert a shp file to GML. The shp file doesn't have a projection
> defined for it, and I use the -a_srs" "EPSG:XXXX" -fileout -filein format.
> When I convert them this way, the gml doesn't contain a bounding box or
> information on the projection, although I explicitly assign a coordinate
> system (or think I am). Does anyone have any suggestions on why this is
> happening, and what I can do to resolve this issue?


From even.rouault at mines-paris.org  Wed Jun 10 17:45:29 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jun 10 17:45:40 2009
Subject: [gdal-dev] _osr TransformPoint error
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E26E977@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E26E977@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <200906102345.30508.even.rouault@mines-paris.org>

From the error message, it looks like you would need to specify the z 
coordinate.  tr.TransformPoint(pt[0], pt[1], 0)

But both old gen and new gen python bindings have z coordinate as an optional 
argument. I have tested that it works with current trunk.

--> Looks like your OpenEV uses an unofficial/uncommon/old version of the new 
gen bindings. because the osr.py file provided with FWTools uses old gen 
bindings...

Weird

Le Wednesday 10 June 2009 23:19:12 Gong, Shawn (Contractor), vous avez ?crit?:
> hi list,
>
> I've been getting the following error from osr.py:
> ? File "C:\iapro\OpenEV\python\lib\site-packages\osgeo\osr.py", line 618,
> in TransformPoint return
> _osr.CoordinateTransformation_TransformPoint(*args)
> NotImplementedError: Wrong number of arguments for overloaded function
> 'CoordinateTransformation_TransformPoint'. Possible C/C++ prototypes are:
> ??? TransformPoint(double [3])
> ??? TransformPoint(double [3], double, double, double)
>
>
> The function I'm calling is below. ?I've tried it with different input
> combinations, but I always get the same result.
>
> tr = osr.CoordinateTransformation(ref, proj)
> tr_pts = []
> for pt in geo_nodes:
>        tr_pts.append(tr.TransformPoint(pt[0], pt[1]))
>
>
> Has anyone seen the error, does it has something to do with Swig?
>
>
> thanks,
> Shawn
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From benjamin.r.welton at wmich.edu  Wed Jun 10 17:47:11 2009
From: benjamin.r.welton at wmich.edu (Benjamin R Welton)
Date: Wed Jun 10 17:52:18 2009
Subject: [gdal-dev] python gdal installation issues
Message-ID: <f948885dd0fc.4a2ff19f@wmich.edu>

Hey all,

    Im having a bit of an issue using the python gdal api's. I keep getting an error in python saying that it is unable to find libgdal.so.1. I am not having any issues using the various gdal binaries however (gdalinfo works).  i looked at PYPI and  changed the gdal-config location setting in the setup.cfg file which allowed me to install the python module but when i attempt to use it i get the libgdal.so.1 file missing  error. 

   Anyone know of a way to fix this issue? I am compiling gdal from source on CentOS 5.1 using python 2.4.3.

Thanks,
Ben

From even.rouault at mines-paris.org  Wed Jun 10 18:03:13 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jun 10 18:03:25 2009
Subject: [gdal-dev] Specifying projections
In-Reply-To: <33fd44f90906101449y432a596dj3425b5bf4379e4f7@mail.gmail.com>
References: <33fd44f90906101339u1ac1194fjdadf2ac07256e240@mail.gmail.com>
	<33fd44f90906101421h3ade88a8m5f138695b6bca530@mail.gmail.com>
	<33fd44f90906101449y432a596dj3425b5bf4379e4f7@mail.gmail.com>
Message-ID: <200906110003.15144.even.rouault@mines-paris.org>

Le Wednesday 10 June 2009 23:49:41 Nicholas Efremov-Kendall, vous avez ?crit?:
> Hi Even,
>
> quick question. If it did specify the projection, where would it put it in
> the GML file, somewhere up top I assume?

No, as an attribue of the geometry of each GML feature. Like:

  <gml:featureMember>
    <ogr:treesa fid="F0">
      <ogr:geometryProperty><gml:Polygon 
srsName="EPSG:4326"><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>-6.754960765902467,61.462188720136709,0 -6.725221386036736,61.467224120527298,0 -6.717138042674094,61.466640471845658,0 -6.714249363124878,61.465167998701141,0 -6.712054958560202,61.464054107099599,0 -6.722721328835235,61.448833465009891,0 -6.717527141760513,61.44786071720717,0 -6.691915741121932,61.451583861738371,0 -6.688499203014175,61.432971953779557,0 -6.691221466314431,61.428195952803037,0 -6.67719387077716,61.424083709150736,0 -6.675108661952891,61.421752929121453,0 -6.674973716921698,61.396820067793584,0 -6.67549919143255,61.394943236738904,0 -6.680054893638072,61.39797210636781,0 -6.685304870828134,61.398056029707639,0 -6.690804710451204,61.394943236738918,0 -6.698471298393201,61.401027678877519,0 -6.711026897688839,61.405582427412632,0 -6.722554912763314,61.408164977461439,0 -6.747249355402857,61.413696288496546,0 -6.759582748688274,61.421443938642952,0 -6.765647640368627,61.432029723554969,0 -6.765647640368627,61.432029723554969,0 -6.763303508862606,61.434410094648705,0 -6.763248195840077,61.452518462568435,0 -6.763248195840077,61.452518462568435,0 -6.76228212366118,61.454818725019614,0 -6.76228212366118,61.454818725019614,0 -6.754960765902467,61.462188720136709,0</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></ogr:geometryProperty>
      <ogr:id>5</ogr:id>
      <ogr:f_code>EC030</ogr:f_code>
      <ogr:dmt>0</ogr:dmt>
      <ogr:exs>0</ogr:exs>
      <ogr:nam>UNK</ogr:nam>
      <ogr:pht>0</ogr:pht>
      <ogr:veg>24</ogr:veg>
      <ogr:tile_id>1</ogr:tile_id>
      <ogr:fac_id>54</ogr:fac_id>
    </ogr:treesa>
  </gml:featureMember>


>
> On Wed, Jun 10, 2009 at 5:21 PM, Nicholas Efremov-Kendall <
>
> n.e.kendall@gmail.com> wrote:
> > Thanks Evan!
> >
> >
> > On Wed, Jun 10, 2009 at 5:19 PM, Even Rouault <
> >
> > even.rouault@mines-paris.org> wrote:
> >> Nicholas,
> >>
> >> this is a actually a good point. I've just improved ogr2ogr (svn trunk
> >> r17229)
> >> so that it sets the spatial coordinate system on each individual
> >> geometry when -a_srs is specified, in addition to the destination layer.
> >> This way the 'srsName' attribute will be written for each output GML
> >> geometry.
> >>
> >> With your current version of OGR, you can use the following workaround.
> >> Instead of using -a_srs, you can specify both -s_srs and -t_srs, so that
> >> a reprojection (that won't do anything) occurs, which sets the
> >> destination SRS
> >> on each geometry.
> >>
> >> ogr2ogr -f GML -s_srs EPSG:XXXX -t_srs EPSG:XXXX out.gml in.shp
> >>
> >> Other point to be aware of : the GML driver doesn't support reading the
> >> coordinate system. It will just ignore the srsName attribute on a
> >> feature.
> >>
> >> Best regards,
> >>
> >> Even
> >>
> >> Le Wednesday 10 June 2009 22:39:20 Nicholas Efremov-Kendall, vous avez
> >>
> >> ?crit :
> >> > Hi all,
> >> >
> >> > I apologize for the somewhat beginner's question but here goes: I'm
> >>
> >> trying
> >>
> >> > to convert a shp file to GML. The shp file doesn't have a projection
> >> > defined for it, and I use the -a_srs" "EPSG:XXXX" -fileout -filein
> >>
> >> format.
> >>
> >> > When I convert them this way, the gml doesn't contain a bounding box
> >> > or information on the projection, although I explicitly assign a
> >> > coordinate system (or think I am). Does anyone have any suggestions on
> >> > why this is happening, and what I can do to resolve this issue?


From bfraser at geoanalytic.com  Thu Jun 11 12:21:47 2009
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Thu Jun 11 12:22:15 2009
Subject: [gdal-dev] OGR and database filter on spatial extent
In-Reply-To: <4A2EAA97.2050306@geoanalytic.com>
References: <4A2E6D52.60909@geoanalytic.com> <4A2E82F0.1060900@pobox.com>
	<4A2EAA97.2050306@geoanalytic.com>
Message-ID: <4A312F1B.3050300@geoanalytic.com>

More performance news... 

Using ogrinfo -> VRT -> ODBC -> SqlServer2000, the query using:
    <SrcLayer>alta83_v1</SrcLayer>
	- takes less than 2 seconds

    <SrcSQL>Select * from alta83_v1</SrcSQL>
	- a very simple select, logically equivalent to the above
	- takes 30 seconds (!)

>From the debug messages below, it seems that the spatial filter is not passed to the database server if a <SrcSQL> is included in the VRT.  Not too surprising given the difficultly of parsing a SELECT statement and rebuilding it with additional clauses, but we should mention the order of magnitude performance hit in the doc.

And I'm not sure why ogr seems to execute the SQL three times...

Thanks!
Brent

=================================
<SrcLayer>alta83_v1</SrcLayer>:
---------------------------------
G:\GeoData\Wells>ogrinfo -spat -114 51 -113 52 -ro --debug ON all_wells.ovf wells | more
OGR_ODBC: EstablishSession(DSN:"Wells_SQL", userid:"test", password:"test")
ODBC: SQLConnect(Wells_SQL)
OGR_ODBC: Table alta83_v1 has no identified FID column.
OGR: OGROpen(ODBC:test/test@Wells_SQL,alta83_v1/00C846D0) succeeded as ODBC.
OGR: OGROpen(all_wells.ovf/00C83B60) succeeded as VRT.
OGR: GetLayerCount() = 1

OGR_ODBC: ExecuteSQL(SELECT * FROM alta83_v1 WHERE BOT_LONG > -114 AND BOT_LONG < -113 AND BOT_LAT > 51 AND BOT_LAT < 52)
OGR_ODBC: ExecuteSQL(SELECT * FROM alta83_v1 WHERE BOT_LONG > -114 AND BOT_LONG < -113 AND BOT_LAT > 51 AND BOT_LAT < 52)
OGR_ODBC: ExecuteSQL(SELECT * FROM alta83_v1 WHERE BOT_LONG > -114 AND BOT_LONG < -113 AND BOT_LAT > 51 AND BOT_LAT < 52)
INFO: Open of `all_wells.ovf'
      using driver `VRT' successful.

========================================
<SrcSQL>Select * from alta83_v1</SrcSQL>
----------------------------------------
G:\GeoData\Wells>ogrinfo -spat -114 51 -113 52 -ro --debug ON all_wells.ovf wells | more
OGR_ODBC: EstablishSession(DSN:"Wells_SQL", userid:"test", password:"test")
ODBC: SQLConnect(Wells_SQL)
OGR_ODBC: Table alta83_v1 has no identified FID column.
OGR: OGROpen(ODBC:test/test@Wells_SQL,alta83_v1/00C846D0) succeeded as ODBC.
ODBC: ExecuteSQL(Select * from alta83_v1) called.
OGR_ODBC: Table SELECT has no identified FID column.
OGR: OGROpen(all_wells.ovf/00C83B60) succeeded as VRT.
OGR: GetLayerCount() = 1

OGR_ODBC: Recreating statement.
OGR_ODBC: Recreating statement.
INFO: Open of `all_wells.ovf'
      using driver `VRT' successful.



Brent Fraser wrote:
> Frank,
> 
>  Interesting.  I'm attempting to use Mapserver -> OGR -> VRT -> ODBC -> 
> SqlServer2000 -> a table of 250k rows of point features.
> 
>  Testing with ogrinfo to return all the rows takes about 25 seconds, but 
> with a "-spat"  to get about 3000 rows takes < 2 seconds (very 
> acceptable).  And I didn't need to create a view with 
> XMIN,YMIN,XMAX,YMAX as implied on GDAL's ODBC format page; OGR
> applied the filter to the point coordinate columns (dunno what it would 
> do with lines or polygons and no min/max columns though).
> 
>  Looking at mapserver's mapogr.cpp, it appears that 
> OGR_L_SetSpatialFilter is being called, so I'll have to do some more 
> tracing/debugging to find out why my mapserver performance is so bad 
> with this layer.
> 
> Thanks!
> Brent Fraser
> 
> Frank Warmerdam wrote:
>> Brent Fraser wrote:
>>> Hi All,
>>>
>>>  In the case of accessing data in a relational database, does OGR 
>>> have the ability to pass a spatial extent to the database to use as a 
>>> filter on the geometry before sending the rows?
>>
>> Brent,
>>
>> Yes.  The OGRLayer has a SetSpatialFilter() method for this.  Some 
>> drivers
>> evaluate the spatial filter in OGR after reading all records, but smart
>> drivers are able to use the spatial filter for efficient querying.  
>> So, the
>> spatially enabled databases work it into the query.
>>
>> The -spat switch for ogrinfo is translated into a SetSpatialFilter() call
>> for instance.
>>
>> Best regards,
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
From warmerdam at pobox.com  Thu Jun 11 12:40:56 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jun 11 12:41:02 2009
Subject: [gdal-dev] OGR and database filter on spatial extent
In-Reply-To: <4A312F1B.3050300@geoanalytic.com>
References: <4A2E6D52.60909@geoanalytic.com> <4A2E82F0.1060900@pobox.com>
	<4A2EAA97.2050306@geoanalytic.com> <4A312F1B.3050300@geoanalytic.com>
Message-ID: <4A313398.7060703@pobox.com>

Brent Fraser wrote:
> More performance news...
> Using ogrinfo -> VRT -> ODBC -> SqlServer2000, the query using:
>    <SrcLayer>alta83_v1</SrcLayer>
>     - takes less than 2 seconds
> 
>    <SrcSQL>Select * from alta83_v1</SrcSQL>
>     - a very simple select, logically equivalent to the above
>     - takes 30 seconds (!)
> 
>> From the debug messages below, it seems that the spatial filter is not 
>> passed to the database server if a <SrcSQL> is included in the VRT.  
>> Not too surprising given the difficultly of parsing a SELECT statement 
>> and rebuilding it with additional clauses, but we should mention the 
>> order of magnitude performance hit in the doc.
> 
> And I'm not sure why ogr seems to execute the SQL three times...

Brent,

Any time you provide your own SQL it will be executed unaltered.  The
spatial and attribute filters are only automatically built into the
select statement when the select statement is constructed internally
by OGR.

OGR makes *no attempt at all* to interprete provided SQL (via ExecuteSQL()
or <SrcSQL>.  So it has no idea what tables it relates to or how any
restrictions could be added.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From grevedan at hotmail.com  Thu Jun 11 12:42:32 2009
From: grevedan at hotmail.com (Dan Greve)
Date: Thu Jun 11 12:43:36 2009
Subject: [gdal-dev] Regarding using VRT to open a raw file
Message-ID: <COL107-W4258EB42FA49A1C44EE0E9C7420@phx.gbl>


I'm using the VRT schema to open a raw binary image file.  I can successfully access the image data by creating a VRT file with the necessary metadata, and then perform GDALOpen using the filename of the VRT file.  Is there a clean way to just create the VRT metadata file in memory, instead of having to create a VRT file on disk?

-- Dan Greve
-- Northrop Grumman Corp
-- Melbourne, FL

_________________________________________________________________
Lauren found her dream laptop. Find the PC that?s right for you.
http://www.microsoft.com/windows/choosepc/?ocid=ftp_val_wl_290
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090611/1cc225d3/attachment.html
From warmerdam at pobox.com  Thu Jun 11 12:54:30 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jun 11 12:54:38 2009
Subject: [gdal-dev] Regarding using VRT to open a raw file
In-Reply-To: <COL107-W4258EB42FA49A1C44EE0E9C7420@phx.gbl>
References: <COL107-W4258EB42FA49A1C44EE0E9C7420@phx.gbl>
Message-ID: <4A3136C6.70103@pobox.com>

Dan Greve wrote:
> I'm using the VRT schema to open a raw binary image file.  I can 
> successfully access the image data by creating a VRT file with the 
> necessary metadata, and then perform GDALOpen using the filename of the 
> VRT file.  Is there a clean way to just create the VRT metadata file in 
> memory, instead of having to create a VRT file on disk?

Dan,

I believe the VRT driver is unusual in that it allows passing the entire
VRT XML contents as the filename to GDALOpen() instead of it being a file
on disk.

If the driver did not have this specific capacity, you could also use the
/vsimem/ pseudo-filesystem handling to create the file in memory but have
it appear to be on disk to most of the GDAL software.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From grevedan at hotmail.com  Thu Jun 11 13:06:29 2009
From: grevedan at hotmail.com (Dan Greve)
Date: Thu Jun 11 13:07:09 2009
Subject: [gdal-dev] Regarding using VRT to open a raw file
In-Reply-To: <4A3136C6.70103@pobox.com>
References: <COL107-W4258EB42FA49A1C44EE0E9C7420@phx.gbl>
	<4A3136C6.70103@pobox.com>
Message-ID: <COL107-W29914068DE530CC260B60FC7420@phx.gbl>


Excellent Frank, thanks for the tips.  I thought there might be a problem with the /vsimem/ since only the VRT XML would be passed as an in-mem buffer, the actual image data is in a disk file.  I'll just pass the entire VRT XML for simplicity.

-- Dan

> Date: Thu, 11 Jun 2009 12:54:30 -0400
> From: warmerdam@pobox.com
> To: grevedan@hotmail.com
> CC: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Regarding using VRT to open a raw file
> 
> Dan Greve wrote:
> > I'm using the VRT schema to open a raw binary image file.  I can 
> > successfully access the image data by creating a VRT file with the 
> > necessary metadata, and then perform GDALOpen using the filename of the 
> > VRT file.  Is there a clean way to just create the VRT metadata file in 
> > memory, instead of having to create a VRT file on disk?
> 
> Dan,
> 
> I believe the VRT driver is unusual in that it allows passing the entire
> VRT XML contents as the filename to GDALOpen() instead of it being a file
> on disk.
> 
> If the driver did not have this specific capacity, you could also use the
> /vsimem/ pseudo-filesystem handling to create the file in memory but have
> it appear to be on disk to most of the GDAL software.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 

_________________________________________________________________
Windows Live?: Keep your life in sync. 
http://windowslive.com/explore?ocid=TXT_TAGLM_WL_BR_life_in_synch_062009
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090611/a7c5c678/attachment.html
From bfraser at geoanalytic.com  Thu Jun 11 13:07:56 2009
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Thu Jun 11 13:08:14 2009
Subject: [gdal-dev] OGR and database filter on spatial extent
In-Reply-To: <4A313398.7060703@pobox.com>
References: <4A2E6D52.60909@geoanalytic.com> <4A2E82F0.1060900@pobox.com>
	<4A2EAA97.2050306@geoanalytic.com>
	<4A312F1B.3050300@geoanalytic.com> <4A313398.7060703@pobox.com>
Message-ID: <4A3139EC.9060109@geoanalytic.com>

Frank,

 > Brent,
> 
> Any time you provide your own SQL it will be executed unaltered.  The
> spatial and attribute filters are only automatically built into the
> select statement when the select statement is constructed internally
> by OGR.
> 
> OGR makes *no attempt at all* to interprete provided SQL (via ExecuteSQL()
> or <SrcSQL>.  So it has no idea what tables it relates to or how any
> restrictions could be added.


I guess that's technically true, but ogr (likely the VRT parser) gives an error when I try to construct my own spatial filter:

<SrcSQL>SELECT * FROM alta83_v1 WHERE BOT_LONG > -114 AND BOT_LONG < -113 AND BOT_LAT > 51 AND BOT_LAT < 52</SrcSQL>

ERROR 1: Line 4: Didn't find expected '=' for value of attribute 'AND'.

I expect it doesn't like the ">".  Quoting the SQL and bracketing the where clause portion doesn't help.   Perhaps there's an escape sequence I could use?

And is there point in constructing a view with columns of WKT geometry, XMIN, YMIN, XMAX and YMAX to see if the ODBC driver would take advantage of those?

Thanks!
Brent

From warmerdam at pobox.com  Thu Jun 11 13:29:24 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jun 11 13:29:29 2009
Subject: [gdal-dev] OGR and database filter on spatial extent
In-Reply-To: <4A3139EC.9060109@geoanalytic.com>
References: <4A2E6D52.60909@geoanalytic.com> <4A2E82F0.1060900@pobox.com>
	<4A2EAA97.2050306@geoanalytic.com> <4A312F1B.3050300@geoanalytic.com>
	<4A313398.7060703@pobox.com> <4A3139EC.9060109@geoanalytic.com>
Message-ID: <4A313EF4.4060607@pobox.com>

Brent Fraser wrote:
> Frank,
> 
>  > Brent,
>>
>> Any time you provide your own SQL it will be executed unaltered.  The
>> spatial and attribute filters are only automatically built into the
>> select statement when the select statement is constructed internally
>> by OGR.
>>
>> OGR makes *no attempt at all* to interprete provided SQL (via 
>> ExecuteSQL()
>> or <SrcSQL>.  So it has no idea what tables it relates to or how any
>> restrictions could be added.
> 
> 
> I guess that's technically true, but ogr (likely the VRT parser) gives 
> an error when I try to construct my own spatial filter:
> 
> <SrcSQL>SELECT * FROM alta83_v1 WHERE BOT_LONG > -114 AND BOT_LONG < 
> -113 AND BOT_LAT > 51 AND BOT_LAT < 52</SrcSQL>
> 
> ERROR 1: Line 4: Didn't find expected '=' for value of attribute 'AND'.
> 
> I expect it doesn't like the ">".  Quoting the SQL and bracketing the 
> where clause portion doesn't help.   Perhaps there's an escape sequence 
> I could use?

Brent,

You need to use normal XML escaping.  I imagine that is &gt; and &lt; for
the comparison operators.

> And is there point in constructing a view with columns of WKT geometry, 
> XMIN, YMIN, XMAX and YMAX to see if the ODBC driver would take advantage 
> of those?

Not if you are going to use SrcSQL - no.  If you provide your own SQL, then
no automatic spatial filtering will take place in the database - it will be
done after fetching all rows.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From bfraser at geoanalytic.com  Thu Jun 11 13:46:06 2009
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Thu Jun 11 13:46:21 2009
Subject: [gdal-dev] OGR and database filter on spatial extent
In-Reply-To: <4A313EF4.4060607@pobox.com>
References: <4A2E6D52.60909@geoanalytic.com> <4A2E82F0.1060900@pobox.com>
	<4A2EAA97.2050306@geoanalytic.com>
	<4A312F1B.3050300@geoanalytic.com> <4A313398.7060703@pobox.com>
	<4A3139EC.9060109@geoanalytic.com> <4A313EF4.4060607@pobox.com>
Message-ID: <4A3142DE.4050300@geoanalytic.com>

Frank,

  That did it!  I was able to get my query back down to < 2 seconds using:

<SrcSQL>SELECT * FROM alta83_v1 WHERE BOT_LONG &gt; -114 AND BOT_LONG &lt; -113 AND BOT_LAT &gt; 51 AND BOT_LAT &lt; 52</SrcSQL>

Now I've got to enhance GeoMoose to calculate the view extents in Lat/Long and hope mapserver will like a VRT layer def of something like:

<SrcSQL>SELECT * FROM alta83_v1 WHERE BOT_LONG &gt; %VIEW_MIN_LONG% AND BOT_LONG &lt; %VIEW_MAX_LONG% AND BOT_LAT &gt; %VIEW_MIN_LAT% AND BOT_LAT &lt; %VIEW_MAX_LAT%</SrcSQL>

Many thanks!
Brent

Frank Warmerdam wrote:
> Brent Fraser wrote:
>> Frank,
>>
>>  > Brent,
>>>
>>> Any time you provide your own SQL it will be executed unaltered.  The
>>> spatial and attribute filters are only automatically built into the
>>> select statement when the select statement is constructed internally
>>> by OGR.
>>>
>>> OGR makes *no attempt at all* to interprete provided SQL (via 
>>> ExecuteSQL()
>>> or <SrcSQL>.  So it has no idea what tables it relates to or how any
>>> restrictions could be added.
>>
>>
>> I guess that's technically true, but ogr (likely the VRT parser) gives 
>> an error when I try to construct my own spatial filter:
>>
>> <SrcSQL>SELECT * FROM alta83_v1 WHERE BOT_LONG > -114 AND BOT_LONG < 
>> -113 AND BOT_LAT > 51 AND BOT_LAT < 52</SrcSQL>
>>
>> ERROR 1: Line 4: Didn't find expected '=' for value of attribute 'AND'.
>>
>> I expect it doesn't like the ">".  Quoting the SQL and bracketing the 
>> where clause portion doesn't help.   Perhaps there's an escape 
>> sequence I could use?
> 
> Brent,
> 
> You need to use normal XML escaping.  I imagine that is &gt; and &lt; for
> the comparison operators.
> 
>> And is there point in constructing a view with columns of WKT 
>> geometry, XMIN, YMIN, XMAX and YMAX to see if the ODBC driver would 
>> take advantage of those?
> 
> Not if you are going to use SrcSQL - no.  If you provide your own SQL, then
> no automatic spatial filtering will take place in the database - it will be
> done after fetching all rows.
> 
> Best regards,
From belaid_moa at hotmail.com  Thu Jun 11 22:14:29 2009
From: belaid_moa at hotmail.com (Belaid MOA)
Date: Thu Jun 11 22:15:32 2009
Subject: [gdal-dev] Need some inputs on using GDAL.
Message-ID: <COL113-W1C81937CB7EB147E80ED6F4430@phx.gbl>


Greetings Everyone,
  
   I would like to programmtically use GDAL to write a C++ program that takes two Geotiff images and uses the first image to create a mask that will be applied to the second image. The first image geographically contains the second image. The mask is computed from the first image using certain criteria on the values of its pixels. The mask is used to limit the processing of the second image into only the areas specified by the mask. The results of the processing is a new image that has the same projections as the second image.

  A first elementray solution I was thinking of is to use GDALCreateGenImgProjTransformer()  to create the transformer between the first and the second image. Then, loop over the pixels of the second image and call GDALGenImgProjTransform() to find the corresponding pixel in the first image, compute the mask, and process the pixel of the first image accordingly. The results of the processing are written into disk using Create()

   1- Any inputs on how to improve this elementray solution? Is it possible to use GDALWrapper for that?
   2- Is there an easy way for creating an output file with the same metadata as the second image?
   3- Is there any code I can look at for doing the masking?
      
  Any help on this is very appreciated.

 Thanks a lot in advance.

~Belaid...

  
 
_________________________________________________________________
Windows Live helps you keep up with all your friends, in one place.
http://go.microsoft.com/?linkid=9660826
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090612/bf724580/attachment.html
From schut at sarvision.nl  Fri Jun 12 03:06:12 2009
From: schut at sarvision.nl (Vincent Schut)
Date: Fri Jun 12 03:06:18 2009
Subject: [gdal-dev] memory leak in hdf driver
In-Reply-To: <4A2E5592.2080607@sarvision.nl>
References: <4A2E5592.2080607@sarvision.nl>
Message-ID: <4A31FE64.9070509@sarvision.nl>

Vincent Schut wrote:
> Hi,
>
> I'm afraid I've encountered a memory leak in the hdf driver.
> Context: because of massive parallel (cluster) processing, I'm reusing 
> a python instance for lots of jobs. Some of these jobs use gdal to 
> read and/or save data. In some cases, I saw the memory use of my 
> python worker processes grow with each job, until the whole lot got 
> killed. I've got 8 gig on that server :-). I've been able to track 
> down the leak to the use of gdal.Open on a hdf (modis) dataset. I 
> guess this means that either the gdal hdf driver or libhdf4 has the leak.

For the record and possible future googlers: this appeared to be a leak 
in libhdf4.2r2; upgrading to 4.2r4 fixed the issue.

Vincent.
From schut at sarvision.nl  Fri Jun 12 03:26:32 2009
From: schut at sarvision.nl (Vincent Schut)
Date: Fri Jun 12 03:26:39 2009
Subject: [gdal-dev] TypeError: in method 'Dataset_GetRasterBand',
 argument 2 of type 'int'
Message-ID: <4A320328.6040603@sarvision.nl>

Folks,

since some days (I have upgraded both gdal (refreshed from trunk) and 
numpy (trunk), and maybe even swig) I get swig related errors from the 
python gdal bindings when passing an element from a numpy array to a 
gdalpython function that expects an int, like:

TypeError: in method 'Dataset_GetRasterBand', argument 2 of type 'int'

the type that is being passed here is <type 'numpy.int64'>. So indeed 
this is no true pythonic int, rather a numpy type, though it can be 
regarded as an integer. Now I know this used to work before, I just 
don't know what changed where to make it not work. Gdal? Numpy? Swig?
It's easy to circumvent by adding a int(...) where necessary, but it's 
rather inconvenient.

I decided to first try the gdal ml. If it's not gdal's fault, I'll try 
the numpy folks ofcourse.

Vincent.
From m.diener at gomogi.com  Fri Jun 12 03:02:28 2009
From: m.diener at gomogi.com (Michael Diener)
Date: Fri Jun 12 04:03:27 2009
Subject: [gdal-dev] Windows CE build
Message-ID: <000301c9eb2b$bfa32130$3ee96390$@diener@gomogi.com>

Hi,

 

I have no expeirence with C or C++ programming and have tried to build GDAL
from source for Windows CE following the wiki instructions but they are old
(2007) and no longer compile.

 

The question is if anyone has currently done this or if it even being
maintained by someone?  I have contacted the original author and was
informed that he is no longer maintaining the Windows CE code.

 

Cheers for any help or direction in getting GDAL to build on Windows CE.

 

michael

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090612/7a475d3e/attachment.html
From j.donovan at virtalis.com  Fri Jun 12 07:05:38 2009
From: j.donovan at virtalis.com (John Donovan)
Date: Fri Jun 12 07:05:43 2009
Subject: [gdal-dev] Distributed processing
Message-ID: <C8891C79DFCAB347B9221DF3890EDD2F33CABF@topdog.Virtalis.local>

Hi,
We currently have a stand-alone app that converts, mosaicks and scales
GDAL-supported images to a proprietary format. It works well, but we
handle tens of thousands of source files at a time, which can slow the
process down to a crawl.

So we're investigating parallelising this process over several machines,
and I was wondering if anyone has any experience of this that they'd be
willing to share? It's still early days yet, so we're open to all
suggestions.

Regards,
John Donovan - Programmer, Virtalis Ltd.

______________________________________________________________________
This email has been scanned for Virtalis Ltd by the MessageLabs Email Security System. ______________________________________________________________________
From SnapeM at rpsgroup.com  Fri Jun 12 08:46:56 2009
From: SnapeM at rpsgroup.com (Matthew Snape)
Date: Fri Jun 12 09:02:01 2009
Subject: [gdal-dev] Distributed processing
In-Reply-To: <26f92c8bc8467a7d8b1d88f50d416b1ae6a4d078@localhost>
References: <26f92c8bc8467a7d8b1d88f50d416b1ae6a4d078@localhost>
Message-ID: <605F55D8070C094AA2E2A9CBA2767A3C04AC4E33@EXMB1.eur.rpsgroup.com>

Hi,

We currently do parallel execution of ArGIS geoprocessing tools,
although not yet with GDAL.  We use IPython to execute normal commands
in parallel.  IPython is a shell replacement that has parallel commands
that can be used from the shell or within code.  

The biggest difficulty I have found is using resources efficiently.  You
will inevitably hit a bottleneck of either cpu speed, disk bandwidth,
network bandwidth or memory.  It is worth spending some time thinking
about what resources a particular process will consume, and where
bottlenecks are likely to occur.  



-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of John Donovan
Sent: 12 June 2009 12:06
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Distributed processing

Hi,
We currently have a stand-alone app that converts, mosaicks and scales
GDAL-supported images to a proprietary format. It works well, but we
handle tens of thousands of source files at a time, which can slow the
process down to a crawl.

So we're investigating parallelising this process over several machines,
and I was wondering if anyone has any experience of this that they'd be
willing to share? It's still early days yet, so we're open to all
suggestions.

Regards,
John Donovan - Programmer, Virtalis Ltd.

______________________________________________________________________
This email has been scanned for Virtalis Ltd by the MessageLabs Email
Security System.
______________________________________________________________________
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
This e-mail message and any attached file is the property of the sender and is sent in confidence to the addressee only. The contents are not to be disclosed to anyone other than
the addressee. Unauthorised recipients are requested to preserve this confidentiality and to advise the sender immediately of any error in transmission. If you experience difficulty 
with opening any attachments to this message, or with sending a reply by email, please telephone on + 44-(0)1235 438151 or fax on + 44-(0)1235 438188. 
Any advice contained in this e-mail or any accompanying file attached hereto is for information purposes only. RPS do not take any responsibility for differences between the original 
and the transmission copy or any amendments made thereafter. If the addressee requires RPS to be responsible for the contents of this e-mail, RPS will be pleased to issue a signed 
hard copy of the document upon request.
RPS Planning and Development Limited, company number: 02947164 (England). Registered office: Centurion Court, 85 Milton Park Abingdon Oxfordshire OX14 4RY.
RPS Group Plc web link: <http://www.rpsgroup.com>
From espen.isaksen at gmail.com  Fri Jun 12 10:18:54 2009
From: espen.isaksen at gmail.com (Espen Isaksen)
Date: Fri Jun 12 10:18:58 2009
Subject: [gdal-dev] Small image format
Message-ID: <a4cd3760906120718j40dd23aeg401e2dd631ea5d1c@mail.gmail.com>

Hi!

We have a lot of ECW files today that we distribute on the net. We
have about 2,5 TB of ECW files.

Is there any other format supported by GDAL that would not
signifiantly increase the file size if we convert our files to it. The
best result I have gotten so far is TIFF LZW compression with
PREDICTION=2, which increase the file size about 7 times.

The file format must support file sizes larger than 4GB and should not
need an extra license.

Is there anything better to use than TIFF LZW or am I out of luck?

Kind regards,
Espen
From DKUNZMAN at overwatch.textron.com  Fri Jun 12 10:42:51 2009
From: DKUNZMAN at overwatch.textron.com (Kunzman, Douglas)
Date: Fri Jun 12 10:42:22 2009
Subject: [gdal-dev] Windows CE build
In-Reply-To: <000301c9eb2b$bfa32130$3ee96390$@diener@gomogi.com>
References: <000301c9eb2b$bfa32130$3ee96390$@diener@gomogi.com>
Message-ID: <56EA271A2716CA42942737F805B9443402C56527@txamasnwh016.ent.textron.com>

Can you tell us the error message you have recieved?
 
Doug

________________________________

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Michael Diener
Sent: Friday, June 12, 2009 3:02 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Windows CE build



Hi,

 

I have no expeirence with C or C++ programming and have tried to build
GDAL from source for Windows CE following the wiki instructions but they
are old (2007) and no longer compile.

 

The question is if anyone has currently done this or if it even being
maintained by someone?  I have contacted the original author and was
informed that he is no longer maintaining the Windows CE code.

 

Cheers for any help or direction in getting GDAL to build on Windows CE.

 

michael

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090612/22b074ce/attachment-0001.html
From seth at pricepages.org  Sat Jun 13 12:28:47 2009
From: seth at pricepages.org (Seth Price)
Date: Sat Jun 13 13:13:11 2009
Subject: [gdal-dev] Distributed processing
In-Reply-To: <C8891C79DFCAB347B9221DF3890EDD2F33CABF@topdog.Virtalis.local>
References: <C8891C79DFCAB347B9221DF3890EDD2F33CABF@topdog.Virtalis.local>
Message-ID: <3E9641AE-4106-4470-A1AB-6601DC985EAA@pricepages.org>

I would personally use Condor to distribute the processes, but the  
learning curve may be steep depending on where you're coming from.
~Seth

On Jun 12, 2009, at 5:05 AM, John Donovan wrote:

> Hi,
> We currently have a stand-alone app that converts, mosaicks and scales
> GDAL-supported images to a proprietary format. It works well, but we
> handle tens of thousands of source files at a time, which can slow the
> process down to a crawl.
>
> So we're investigating parallelising this process over several  
> machines,
> and I was wondering if anyone has any experience of this that they'd  
> be
> willing to share? It's still early days yet, so we're open to all
> suggestions.
>
> Regards,
> John Donovan - Programmer, Virtalis Ltd.
>
> ______________________________________________________________________
> This email has been scanned for Virtalis Ltd by the MessageLabs  
> Email Security System.  
> ______________________________________________________________________
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Craig.Dillabough at AGR.GC.CA  Mon Jun 15 15:15:28 2009
From: Craig.Dillabough at AGR.GC.CA (Dillabough, Craig)
Date: Mon Jun 15 15:37:49 2009
Subject: [gdal-dev] TIFFReadEncodedTile() failed
Message-ID: <8EA33237DDDB244E860ADDE976124AE50202CBC4@ONOTTAXMS2.AGR.GC.CA>

Hi,
I am trying to use GDAL to rescale/reproject a fairly large GeoTiff file
(just over 1 GB). The image is 28800x9600 with 32 bit floating-point
pixel values. I would like to reproject it, but for starters wanted to
try rescaling it to 8 bits. When running gdal_translate as follows:

gdal_translate -ot Byte -of GTiff -scale 0.0 1.0 0 255
Av.MaxNDVI.2000.2009.Week.17.tif wk17.2000-09.8bit.tif

I get the following message:

Input file size is 28800, 9600
0Warning 1: Lost metadata writing to GeoTIFF ... too large to fit in
tag.
...10...20...30...40...50.ERROR 1:
TIFFFillTile:Av.MaxNDVI.2000.2009.Week.17.tif
: Read error at row 12288, col 2688; got 4088 bytes, expected 16384
ERROR 1: TIFFReadEncodedTile() failed.

ERROR 1: IReadBlock failed at X offset 193, Y offset 83
ERROR 1: GetBlockRef failed at X block offset 193, Y block offset 83
Warning 1: Lost metadata writing to GeoTIFF ... too large to fit in tag.

I don't think the error is specific to my particular rescale command.
I've tried both gdal_translate to break up my image into smaller images,
and gdalwarp to reproject the image (the original GeoTiff), and both
generate a similar error. Perhaps it is the input file.

In case it is of any use, gdalinfo produces the following output for the
input file Av.MaxNDVI.2000.2009.Week.17.tif:

Driver: GTiff/GeoTIFF
Files: Av.MaxNDVI.2000.2009.Week.17.tif
       Av.MaxNDVI.2000.2009.Week.17.aux
       Av.MaxNDVI.2000.2009.Week.17.rrd
Size is 28800, 9600
Coordinate System is:
PROJCS["User_Defined_Sinusoidal",
    GEOGCS["GCS_User_Defined",
        DATUM["User_Defined",
            SPHEROID["User_Defined_Spheroid",6371007.181,0.0]],
        PRIMEM["Greenwich",0.0],
        UNIT["Degree",0.0174532925199433]],
    PROJECTION["Sinusoidal"],
    PARAMETER["False_Easting",0.0],
    PARAMETER["False_Northing",0.0],
    PARAMETER["Central_Meridian",0.0],
    UNIT["Meter",1.0]]
Origin = (-10007554.677000004798174,6671703.118001982569695)
Pixel Size = (231.656358263958310,-231.656358263958339)
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_SOFTWARE=IMAGINE TIFF Support
Copyright 1991 - 1999 by ERDAS, Inc. All Rights Reserved
@(#)$RCSfile: etif.c $ $Revision: 1.10.1.9.1.9.2.11 $ $Date: 2004/09/15
18:42:01
EDT $
  TIFFTAG_XRESOLUTION=1
  TIFFTAG_YRESOLUTION=1
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-10007554.677, 6671703.118) (180d 0'0.00"W, 60d 0'0.00"N)
Lower Left  (-10007554.677, 4447802.079) (117d29'11.96"W, 40d 0'0.00"N)
Upper Right (-3335851.559, 6671703.118) ( 60d 0'0.00"W, 60d 0'0.00"N)
Lower Right (-3335851.559, 4447802.079) ( 39d 9'43.99"W, 40d 0'0.00"N)
Center      (-6671703.118, 5559752.598) ( 93d20'36.35"W, 50d 0'0.00"N)
Band 1 Block=64x64 Type=Float32, ColorInterp=Gray
  Min=0.000 Max=0.957
  Minimum=0.000, Maximum=0.957, Mean=0.191, StdDev=0.197
  Overviews: 7200x2400, 3600x1200, 1800x600, 900x300, 450x150, 225x75,
113x38

Thank you for any help you can provide.

Regards,
Craig

From alobolistas at gmail.com  Mon Jun 15 15:40:44 2009
From: alobolistas at gmail.com (Agustin Lobo)
Date: Mon Jun 15 15:40:51 2009
Subject: [gdal-dev] [Fwd: Re: Problem with gdal-mrsid-src]
Message-ID: <4A36A3BC.7060702@gmail.com>

FYI
Agus


-------- Original Message --------
Subject: Re: Problem with gdal-mrsid-src
Date: Sat, 13 Jun 2009 12:53:13 +0200
From: Agustin Lobo <Agustin.Lobo@ija.csic.es>
Reply-To: Agustin.Lobo@ija.csic.es
To: Alan Boudreault <aboudreault@mapgears.com>
References: <20090530203254.4919.55334.launchpad@gangotri.canonical.com>
<200906101316.30622.aboudreault@mapgears.com> <4A2FF021.8070101@ija.csic.es>
<200906101353.58490.aboudreault@mapgears.com> <4A30B9EF.80400@ija.csic.es>
<4A30E1EA.9060602@mapgears.com>

Alan,

It does not work on my 8.04 machine.

This is what I do:

1. Complete uninstall using synaptic of all gdal stuff
2. Installation of gdal, includin gdalbin and gdal-mrsid
(see attachment for an screen capture of my synaptic when
I search gdal. There must be a more pro way of checking
which packages I have, but don't know how to do it)
3. Run  sudo /usr/bin/gdal-mrsid-build /usr/local/Geo_DSDK-7.0.0.2167
This is the output:
s$ sudo /usr/bin/gdal-mrsid-build /usr/local/Geo_DSDK-7.0.0.2167
grep: /usr/local/Geo_DSDK-7.0.0.2167/include/support/lt_base.h: No such file or
directory
Extracting GDAL/MrSID tarball
Building GDAL/MrSID plugin
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking for ranlib... ranlib
checking for g++ -shared ... yes
checking for gdal-config... /usr/bin/gdal-config
using /usr/lib/gdal16plugins as GDAL shared library autoload directory
checking for lt_base.h in /usr/local/Geo_DSDK-7.0.0.2167/include/support... not
found.
checking for lt_base.h in /usr/local/Geo_DSDK-7.0.0.2167/include... found MrSID
DSDK version 7.x or newer.
checking for MG3ImageWriter.h in
/usr/local/Geo_DSDK-7.0.0.2167/include/mrsid_writers... no encoding support.
checking for MrSID JPEG2000 support... enabled
checking for XTIFFClientOpen in -lgeotiff... yes
configure: creating ./config.status
config.status: creating Makefile
g++ -DFRMT_mrsid -Wall -I/usr/local/Geo_DSDK-7.0.0.2167/include
-I/usr/include/geotiff -fPIC  -DFRMT_mrsid -I/usr/include/gdal -DMRSID_J2K
-I/usr/local/Geo_DSDK-7.0.0.2167/include -I/usr/include/geotiff   -c -o
mrsiddataset.o mrsiddataset.cpp
g++ -DFRMT_mrsid -Wall -I/usr/local/Geo_DSDK-7.0.0.2167/include
-I/usr/include/geotiff -fPIC  -DFRMT_mrsid -I/usr/include/gdal -DMRSID_J2K
-I/usr/local/Geo_DSDK-7.0.0.2167/include -I/usr/include/geotiff   -c -o
mrsidstream.o mrsidstream.cpp
g++ -shared  mrsiddataset.o mrsidstream.o -lgeotiff
-L/usr/local/Geo_DSDK-7.0.0.2167/lib/Release
-L/usr/local/Geo_DSDK-7.0.0.2167/3rd-party/lib/Release -lltidsdk -lpthread
-llt_kakadu -L/usr/lib -lgdal1.6.0  -o gdal_MrSID.so
install -d /usr/lib/gdal16plugins
cp gdal_MrSID.so /usr/lib/gdal16plugins

4. But...
$ gdalinfo /media/Transcend/Mario/N-31-50_2000/N-31-50_2000/N-31-50_2000.sid
ERROR 1: /usr/lib/gdal16plugins/gdal_MrSID.so: undefined symbol:
_ZNSs20_S_empty_rep_storageE
ERROR 1: /usr/lib/gdal16plugins/gdal_MrSID.so: undefined symbol:
_ZNSs20_S_empty_rep_storageE
ERROR 4: `/media/Transcend/Mario/N-31-50_2000/N-31-50_2000/N-31-50_2000.sid' not
recognised as a supported file format.

gdalinfo failed - unable to open
'/media/Transcend/Mario/N-31-50_2000/N-31-50_2000/N-31-50_2000.sid'.


Am I doing something wrong? Is it working for others on ubuntu 8.04 ??
Don't know what to do.

Thanks

Agus

Alan Boudreault wrote:
> Try the new version. We'll see if you still have problems.
> 
> Alan
> 
> Agustin Lobo wrote:
>> with the same version that I was testing? what could be wrong in
>> my test then? I'll try again on Saturday, I'm away from that
>> computer until then.
>>
>> Agus
>>
>> Alan Boudreault wrote:
>>> That already work properly on 8.04. I've tested .sid and .jp2.
>>>
>>> Alan
>>>
>>> On June 10, 2009 01:40:49 pm Agustin Lobo wrote:
>>>> any hope on having this working for 8.04?
>>>> Agus
>>>>
>>>> Alan Boudreault wrote:
>>>>> Hi,
>>>>>
>>>>> Yes, I've tested one MrSID image of 270mb from the site.
>>>>>
>>>>> Thanks,
>>>>> Alan
>>>>>
>>>>> On June 10, 2009 12:59:36 pm Agustin Lobo wrote:
>>>>>> Did you manage to download it?
>>>>>> Agus
>>>>>>
>>>>>> Alan Boudreault wrote:
>>>>>>> Hi Agustin,
>>>>>>>
>>>>>>> Could you send me that file: of5mv50sd0f299112ss0r051.sid ? I would
>>>>>>> like to test it.
>>>>>>>
>>>>>>> Thanks,
>>>>>>> Alan
>>>>>>>
>>>>>>> On June 5, 2009 01:49:42 pm Agustin Lobo wrote:
>>>>>>>> Thanks, please keep me posted, this is an important matter
>>>>>>>> for me. Also, have you considered a similar approach for ecw?
>>>>>>>>
>>>>>>>> Agus
>>>>>>>>
>>>>>>>> Alan Boudreault wrote:
>>>>>>>>> Hi Agustin,
>>>>>>>>>
>>>>>>>>> This problem has been reported on the UbuntuGIS mailing list 
>>>>>>>>> and I'm
>>>>>>>>> going to investigate in it as soon as I can.
>>>>>>>>>
>>>>>>>>> Thanks,
>>>>>>>>> Alan
>>>>>>>>>
>>>>>>>>> On June 4, 2009 01:41:11 pm Agustin Lobo wrote:
>>>>>>>>>> More testing:
>>>>>>>>>>
>>>>>>>>>> 1. In the intrepid machine:
>>>>>>>>>> While gdalinfo --formats lists mrsid, I get the following 
>>>>>>>>>> error at
>>>>>>>>>> reading: $ gdalinfo N-31-50_2000.sid
>>>>>>>>>> gdalinfo: symbol lookup error: 
>>>>>>>>>> /usr/lib/gdal16plugins/gdal_MrSID.so:
>>>>>>>>>> undefined symbol: _ZN12LTIVSIStreamC1Ev
>>>>>>>>>>
>>>>>>>>>> 2. This is the same error that I get in QGIS: at reading a mrsid
>>>>>>>>>> file, qgis crashes and the same message is found in the terminal.
>>>>>>>>>>
>>>>>>>>>> 3. In the hardy machine.
>>>>>>>>>> While the installation works, gdalinfo --formats does not
>>>>>>>>>> list mrsid and:
>>>>>>>>>> $ gdalinfo N-31-50_2000.sid
>>>>>>>>>> ERROR 1: /usr/lib/gdal16plugins/gdal_MrSID.so: undefined symbol:
>>>>>>>>>> _ZNSs20_S_empty_rep_storageE
>>>>>>>>>> ERROR 1: /usr/lib/gdal16plugins/gdal_MrSID.so: undefined symbol:
>>>>>>>>>> _ZNSs20_S_empty_rep_storageE
>>>>>>>>>> ERROR 4: `N-31-50_2000.sid' not recognised as a supported file
>>>>>>>>>> format.
>>>>>>>>>>
>>>>>>>>>> gdalinfo failed - unable to open 'N-31-50_2000.sid'.
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Hope this helps! Let me know if can do anything more.
>>>>>>>>>> Thanks a lot for your work
>>>>>>>>>>
>>>>>>>>>> Agus
>>>>>>>>>>
>>>>>>>>>> Alan Boudreault wrote:
>>>>>>>>>>> Hi Agustin,
>>>>>>>>>>>
>>>>>>>>>>> I've found the problem. There was a bug in the libgeotiff 
>>>>>>>>>>> package.
>>>>>>>>>>> I compiled a new package and uploaded it in UbuntuGIS. Now,
>>>>>>>>>>> everything should ok with gdal-mrsid-src after updating apt-get:
>>>>>>>>>>> `apt-get update` and reinstalling the new version of 
>>>>>>>>>>> libgeotif1.2
>>>>>>>>>>> and libgeotiff-dev.
>>>>>>>>>>>
>>>>>>>>>>> Thanks,
>>>>>>>>>>> Alan
>>>>>>>>>>>
>>>>>>>>>>> On May 31, 2009 01:14:51 pm Agustin Lobo wrote:
>>>>>>>>>>>> Thank you for your interest!
>>>>>>>>>>>> Agus
>>>>>>>>>>>>
>>>>>>>>>>>> Alan Boudreault wrote:
>>>>>>>>>>>>> Hi Agustin,
>>>>>>>>>>>>>
>>>>>>>>>>>>> It seems that the autoconf script works in Debian but not in
>>>>>>>>>>>>> Ubuntu. I will check that as soon as I can (probably 
>>>>>>>>>>>>> tomorrow).
>>>>>>>>>>>>>
>>>>>>>>>>>>> Thank for your report.
>>>>>>>>>>>>> Alan
>>>>>>>>>>>>>
>>>>>>>>>>>>> Agustin Lobo wrote:
>>>>>>>>>>>>>> Thanks for the many tools in ubuntugis.
>>>>>>>>>>>>>> After downloading and uncompresing
>>>>>>>>>>>>>> Geo_DSDK-7.0.0.2167.linux.x86.gcc32.tar.gz
>>>>>>>>>>>>>> from
>>>>>>>>>>>>>> http://www.lizardtech.com/developer/members/downloads.php
>>>>>>>>>>>>>> (there is also Geo_DSDK-7.0.0.2167.linux.x86.gcc41.tar.gz
>>>>>>>>>>>>>> don't really know which one is better)
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> I've found a problem with gdal-mrsid-src:
>>>>>>>>>>>>>> When I run the GDAL MrSID building script:
>>>>>>>>>>>>>> $ sudo /usr/bin/gdal-mrsid-build 
>>>>>>>>>>>>>> /usr/local/Geo_DSDK-7.0.0.2167
>>>>>>>>>>>>>>  I get:
>>>>>>>>>>>>>> configure: error: libgeotiff is required to build GDAL MrSID
>>>>>>>>>>>>>> driver
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> despite having libgeotiff1-2 and libgeotiff-dev
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> It seems there is a broken dependency?
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> I'm using ubuntu 8.04 hardy
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> Thanks
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> Agus
>>>
>>
> 
> 

-- 
Dr. Agustin Lobo
Institut de Ciencies de la Terra "Jaume Almera" (CSIC)
LLuis Sole Sabaris s/n
08028 Barcelona
Spain
Tel. 34 934095410
Fax. 34 934110012
email: Agustin.Lobo@ija.csic.es
http://www.ija.csic.es/gt/obster


-------------- next part --------------
A non-text attachment was scrubbed...
Name: alobolistas.vcf
Type: text/x-vcard
Size: 251 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090615/c5c90756/alobolistas.vcf
From n.e.kendall at gmail.com  Mon Jun 15 15:44:47 2009
From: n.e.kendall at gmail.com (Nicholas Efremov-Kendall)
Date: Mon Jun 15 15:44:52 2009
Subject: [gdal-dev] Export to Mysql
Message-ID: <33fd44f90906151244n7020a260x9a1c4a8b18c4d35@mail.gmail.com>

Hi All,

I've been digging around, and I can't seem to find (good) documentation on
using GDAL to move GML to a Mysql database (yes, I know PG is better but I
have to use MySQL). Also, if anyone has any tips on exporting said data back
out of php as GML, I'd be thrilled.
best,
N
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090615/44a86b20/attachment.html
From armin.burger at gmx.net  Mon Jun 15 15:52:45 2009
From: armin.burger at gmx.net (Armin Burger)
Date: Mon Jun 15 15:53:11 2009
Subject: [gdal-dev] Writing KML with GDAL Python bindings
Message-ID: <4A36A68D.7010605@gmx.net>

Hi everybody

I would like to write KML output with GDAL Python bindings based on a 
database query. Everything works fine, I just have not found a way to 
define the NameField that is used in Google Earth as name displayed in 
the TOC. The ogr2ogr tool lets me define this using the flag "-dsco 
NameField=...".  Is there anything similar for GDAL Python?

Thanks in advance for any hints.

Armin
From even.rouault at mines-paris.org  Mon Jun 15 16:07:22 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jun 15 16:07:35 2009
Subject: [gdal-dev] Writing KML with GDAL Python bindings
In-Reply-To: <4A36A68D.7010605@gmx.net>
References: <4A36A68D.7010605@gmx.net>
Message-ID: <200906152207.23254.even.rouault@mines-paris.org>

Yes, try something like :

ogr.GetDriverByName('KML').CreateDataSource('out.kml', options = 
['NameField=foo'] )

Le Monday 15 June 2009 21:52:45 Armin Burger, vous avez ?crit?:
> Hi everybody
>
> I would like to write KML output with GDAL Python bindings based on a
> database query. Everything works fine, I just have not found a way to
> define the NameField that is used in Google Earth as name displayed in
> the TOC. The ogr2ogr tool lets me define this using the flag "-dsco
> NameField=...".  Is there anything similar for GDAL Python?
>
> Thanks in advance for any hints.
>
> Armin
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Mon Jun 15 16:09:41 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jun 15 16:12:02 2009
Subject: [gdal-dev] Export to Mysql
In-Reply-To: <33fd44f90906151244n7020a260x9a1c4a8b18c4d35@mail.gmail.com>
References: <33fd44f90906151244n7020a260x9a1c4a8b18c4d35@mail.gmail.com>
Message-ID: <200906152209.41312.even.rouault@mines-paris.org>

The doc of ogr2ogr and the MySQL driver should provide enough information :

http://gdal.org/ogr2ogr.html
http://gdal.org/ogr/drv_mysql.html


Le Monday 15 June 2009 21:44:47 Nicholas Efremov-Kendall, vous avez ?crit?:
> Hi All,
>
> I've been digging around, and I can't seem to find (good) documentation on
> using GDAL to move GML to a Mysql database (yes, I know PG is better but I
> have to use MySQL). Also, if anyone has any tips on exporting said data
> back out of php as GML, I'd be thrilled.
> best,
> N


From even.rouault at mines-paris.org  Mon Jun 15 16:34:05 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jun 15 16:34:17 2009
Subject: [gdal-dev] TIFFReadEncodedTile() failed
In-Reply-To: <8EA33237DDDB244E860ADDE976124AE50202CBC4@ONOTTAXMS2.AGR.GC.CA>
References: <8EA33237DDDB244E860ADDE976124AE50202CBC4@ONOTTAXMS2.AGR.GC.CA>
Message-ID: <200906152234.05331.even.rouault@mines-paris.org>

Looks like your input image might be corrupted. You could confirm by running :
gdalinfo -checksum Av.MaxNDVI.2000.2009.Week.17.tif

If it still triggers the error but you believe the image is not corrupted, you 
should try with a recent version of GDAL first and if it still persists, file 
a ticket with a link to that image.

Le Monday 15 June 2009 21:15:28 Dillabough, Craig, vous avez ?crit?:
> Hi,
> I am trying to use GDAL to rescale/reproject a fairly large GeoTiff file
> (just over 1 GB). The image is 28800x9600 with 32 bit floating-point
> pixel values. I would like to reproject it, but for starters wanted to
> try rescaling it to 8 bits. When running gdal_translate as follows:
>
> gdal_translate -ot Byte -of GTiff -scale 0.0 1.0 0 255
> Av.MaxNDVI.2000.2009.Week.17.tif wk17.2000-09.8bit.tif
>
> I get the following message:
>
> Input file size is 28800, 9600
> 0Warning 1: Lost metadata writing to GeoTIFF ... too large to fit in
> tag.
> ...10...20...30...40...50.ERROR 1:
> TIFFFillTile:Av.MaxNDVI.2000.2009.Week.17.tif
>
> : Read error at row 12288, col 2688; got 4088 bytes, expected 16384
>
> ERROR 1: TIFFReadEncodedTile() failed.
>
> ERROR 1: IReadBlock failed at X offset 193, Y offset 83
> ERROR 1: GetBlockRef failed at X block offset 193, Y block offset 83
> Warning 1: Lost metadata writing to GeoTIFF ... too large to fit in tag.
>
> I don't think the error is specific to my particular rescale command.
> I've tried both gdal_translate to break up my image into smaller images,
> and gdalwarp to reproject the image (the original GeoTiff), and both
> generate a similar error. Perhaps it is the input file.
>
> In case it is of any use, gdalinfo produces the following output for the
> input file Av.MaxNDVI.2000.2009.Week.17.tif:
>
> Driver: GTiff/GeoTIFF
> Files: Av.MaxNDVI.2000.2009.Week.17.tif
>        Av.MaxNDVI.2000.2009.Week.17.aux
>        Av.MaxNDVI.2000.2009.Week.17.rrd
> Size is 28800, 9600
> Coordinate System is:
> PROJCS["User_Defined_Sinusoidal",
>     GEOGCS["GCS_User_Defined",
>         DATUM["User_Defined",
>             SPHEROID["User_Defined_Spheroid",6371007.181,0.0]],
>         PRIMEM["Greenwich",0.0],
>         UNIT["Degree",0.0174532925199433]],
>     PROJECTION["Sinusoidal"],
>     PARAMETER["False_Easting",0.0],
>     PARAMETER["False_Northing",0.0],
>     PARAMETER["Central_Meridian",0.0],
>     UNIT["Meter",1.0]]
> Origin = (-10007554.677000004798174,6671703.118001982569695)
> Pixel Size = (231.656358263958310,-231.656358263958339)
> Metadata:
>   AREA_OR_POINT=Area
>   TIFFTAG_SOFTWARE=IMAGINE TIFF Support
> Copyright 1991 - 1999 by ERDAS, Inc. All Rights Reserved
> @(#)$RCSfile: etif.c $ $Revision: 1.10.1.9.1.9.2.11 $ $Date: 2004/09/15
> 18:42:01
> EDT $
>   TIFFTAG_XRESOLUTION=1
>   TIFFTAG_YRESOLUTION=1
>   TIFFTAG_RESOLUTIONUNIT=1 (unitless)
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (-10007554.677, 6671703.118) (180d 0'0.00"W, 60d 0'0.00"N)
> Lower Left  (-10007554.677, 4447802.079) (117d29'11.96"W, 40d 0'0.00"N)
> Upper Right (-3335851.559, 6671703.118) ( 60d 0'0.00"W, 60d 0'0.00"N)
> Lower Right (-3335851.559, 4447802.079) ( 39d 9'43.99"W, 40d 0'0.00"N)
> Center      (-6671703.118, 5559752.598) ( 93d20'36.35"W, 50d 0'0.00"N)
> Band 1 Block=64x64 Type=Float32, ColorInterp=Gray
>   Min=0.000 Max=0.957
>   Minimum=0.000, Maximum=0.957, Mean=0.191, StdDev=0.197
>   Overviews: 7200x2400, 3600x1200, 1800x600, 900x300, 450x150, 225x75,
> 113x38
>
> Thank you for any help you can provide.
>
> Regards,
> Craig
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From belaid_moa at hotmail.com  Mon Jun 15 19:03:33 2009
From: belaid_moa at hotmail.com (Belaid MOA)
Date: Mon Jun 15 19:03:35 2009
Subject: [gdal-dev] Resampling.
Message-ID: <COL113-W406280D04A04B34FB20EDAF43E0@phx.gbl>


Hi everyone,
  I am new to GDAL and I need some help on how to do re-sampling (programmatically). 
I have 30mx30m Geotiff images and I'd like to resample them into 25mx25m Geotiff images. 

 Any help on this is very appreciated.

 Thanks a lot in advance.

 With best regards.
~Belaid ...

_________________________________________________________________
Attention all humans. We are your photos. Free us.
http://go.microsoft.com/?linkid=9666046
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090615/10b0faee/attachment.html
From jorge.arevalo at gmail.com  Tue Jun 16 00:10:48 2009
From: jorge.arevalo at gmail.com (=?UTF-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Tue Jun 16 00:19:23 2009
Subject: [gdal-dev] GDAL WKT Raster Driver weekly report #3
Message-ID: <cb4457700906152110jbea2b5wc43aae6e5182df3f@mail.gmail.com>

Here is the report #3
http://www.gis4free.org/blog/2009/06/16/gsoc-09-weekly-report-3-0506-1206/

And, as usual, the project can be followed here

http://trac.osgeo.org/gdal/wiki/WKTRasterDriver

Best regards
Jorge
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090616/318055af/attachment.html
From warmerdam at pobox.com  Tue Jun 16 09:43:35 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jun 16 09:43:47 2009
Subject: [gdal-dev] Resampling.
In-Reply-To: <COL113-W406280D04A04B34FB20EDAF43E0@phx.gbl>
References: <COL113-W406280D04A04B34FB20EDAF43E0@phx.gbl>
Message-ID: <4A37A187.40803@pobox.com>

Belaid MOA wrote:
> Hi everyone,
>   I am new to GDAL and I need some help on how to do re-sampling 
> (programmatically).
> I have 30mx30m Geotiff images and I'd like to resample them into 25mx25m 
> Geotiff images.
> 
>  Any help on this is very appreciated.

Belaid,

One approach to do this would be a command like:

  gdalwarp -tr 25 25 input.tif output.tif

This resamples to 25x25 meter pixels with the default (nearest neighbour)
resampling kernel.  You might also want to use a fancier resampling kernel,
such as cubic convolution:

  gdalwarp -r cubic -tr 25 25 input.tif output.tif

More details are available at:

   http://www.gdal.org/gdalwarp.html

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fabrice.lallauret at external.thalesgroup.com  Tue Jun 16 11:29:14 2009
From: fabrice.lallauret at external.thalesgroup.com (Fabrice LALLAURET - PSV)
Date: Tue Jun 16 11:32:02 2009
Subject: [gdal-dev] Distributed processing
In-Reply-To: <C8891C79DFCAB347B9221DF3890EDD2F33CABF@topdog.Virtalis.local>
References: <C8891C79DFCAB347B9221DF3890EDD2F33CABF@topdog.Virtalis.local>
Message-ID: <4A37BA4A.3030400@external.thalesgroup.com>

John Donovan a ?crit :
> Hi,
> We currently have a stand-alone app that converts, mosaicks and scales
> GDAL-supported images to a proprietary format. It works well, but we
> handle tens of thousands of source files at a time, which can slow the
> process down to a crawl.
>
> So we're investigating parallelising this process over several machines,
> and I was wondering if anyone has any experience of this that they'd be
> willing to share? It's still early days yet, so we're open to all
> suggestions.
>
> Regards,
> John Donovan - Programmer, Virtalis Ltd.
>
> ______________________________________________________________________
> This email has been scanned for Virtalis Ltd by the MessageLabs Email Security System. ______________________________________________________________________
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
Personally, I create Makefile and use distmake for the distribution purpose.

Regards
From frankie at debian.org  Tue Jun 16 11:36:44 2009
From: frankie at debian.org (Francesco Paolo Lovergine)
Date: Tue Jun 16 11:38:58 2009
Subject: [gdal-dev] Can we copy RPC from NITF file to a newly created
	NITF file ?
In-Reply-To: <4A301FCA.7070103@missouri.edu>
References: <4A301FCA.7070103@missouri.edu>
Message-ID: <20090616153644.GA19867@frankie.is-a-geek.org>

On Wed, Jun 10, 2009 at 04:04:10PM -0500, Ozy Sjahputera wrote:
> I have an NITF image in UTM projection, but its RPC appears to be  
> intended for LatLon. I tried to perform orthorectification on this image  
> using orthoigen from OSSIM, but the result was weird (panchromatic and  
> multispectral become non-overlapping).  

Panchromatic and multispectrals have different spatial resolutions.
Did you use the same grid resolution for ortho-rect both them? 

> I plan to reproject this image  
> to LatLon hoping that it will work well with the available RPC. However,  
> can do I transfer the RPC from original image to the new image? Should  
> the new image be in NITF as well to accommodate the RPC?

-- 
Francesco P. Lovergine
From JARED.RUBIN at saic.com  Tue Jun 16 12:39:15 2009
From: JARED.RUBIN at saic.com (Rubin, Jared)
Date: Tue Jun 16 12:54:28 2009
Subject: [gdal-dev] cpl_port.h CPL_LSB macro setting
Message-ID: <3A7F37AE3B50AE479C753AFB27FBB64D018E0677@0461-its-exmb04.us.saic.com>


Is there a test in configure script to set the CPL_LSB macro automatically?
I am building on both big and little endian and I am not seeing the macro being set
CPL_IS_LSB is not being set to either 0 or 1
thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090616/1f161caf/attachment.html
From belaid_moa at hotmail.com  Tue Jun 16 13:09:33 2009
From: belaid_moa at hotmail.com (Belaid MOA)
Date: Tue Jun 16 13:09:35 2009
Subject: [gdal-dev] Resampling.
In-Reply-To: <4A37A187.40803@pobox.com>
References: <COL113-W406280D04A04B34FB20EDAF43E0@phx.gbl>
	<4A37A187.40803@pobox.com>
Message-ID: <COL113-W1CD820C27A0201470C484F43F0@phx.gbl>


That's exactly what I was looking for! Thank you very ... very much Frank.
With best regards.
~Belaid ... 

> Date: Tue, 16 Jun 2009 09:43:35 -0400
> From: warmerdam@pobox.com
> To: belaid_moa@hotmail.com
> CC: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Resampling.
> 
> Belaid MOA wrote:
> > Hi everyone,
> >   I am new to GDAL and I need some help on how to do re-sampling 
> > (programmatically).
> > I have 30mx30m Geotiff images and I'd like to resample them into 25mx25m 
> > Geotiff images.
> > 
> >  Any help on this is very appreciated.
> 
> Belaid,
> 
> One approach to do this would be a command like:
> 
>   gdalwarp -tr 25 25 input.tif output.tif
> 
> This resamples to 25x25 meter pixels with the default (nearest neighbour)
> resampling kernel.  You might also want to use a fancier resampling kernel,
> such as cubic convolution:
> 
>   gdalwarp -r cubic -tr 25 25 input.tif output.tif
> 
> More details are available at:
> 
>    http://www.gdal.org/gdalwarp.html
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 

_________________________________________________________________
Internet explorer 8 lets you browse the web faster.
http://go.microsoft.com/?linkid=9655582
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090616/6a15e173/attachment.html
From warmerdam at pobox.com  Tue Jun 16 13:09:23 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jun 16 13:09:36 2009
Subject: [gdal-dev] cpl_port.h CPL_LSB macro setting
In-Reply-To: <3A7F37AE3B50AE479C753AFB27FBB64D018E0677@0461-its-exmb04.us.saic.com>
References: <3A7F37AE3B50AE479C753AFB27FBB64D018E0677@0461-its-exmb04.us.saic.com>
Message-ID: <4A37D1C3.1000601@pobox.com>

Rubin, Jared wrote:
> 
> Is there a test in configure script to set the CPL_LSB macro automatically?
> I am building on both big and little endian and I am not seeing the 
> macro being set
> CPL_IS_LSB is not being set to either 0 or 1
> thanks

Jared,

The AC_C_BIGENDIAN step in configure sets the WORDS_BIGENDIAN macro (or not)
in cpl_config.h.  cpl_port.h then checks for this to decide whether to set
CPL_LSB or CPL_MSB and how to set CPL_IS_LSB.

The following code in cpl_port.h should ensure that anything including
cpl_port.h gets a 1 or 0 definition of CPL_IS_LSB.  Note that there are
some files (such as sublibraries such as libtiff or libpng) that do not
include cpl_port.h.

#if defined(CPL_LSB)
#  define CPL_IS_LSB 1
#else
#  define CPL_IS_LSB 0
#endif

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From armin.burger at gmx.net  Tue Jun 16 15:14:35 2009
From: armin.burger at gmx.net (Armin Burger)
Date: Tue Jun 16 15:14:51 2009
Subject: [gdal-dev] Writing KML with GDAL Python bindings
In-Reply-To: <200906152207.23254.even.rouault@mines-paris.org>
References: <4A36A68D.7010605@gmx.net>
	<200906152207.23254.even.rouault@mines-paris.org>
Message-ID: <4A37EF1B.5050804@gmx.net>

Even

thanks a lot for the help. Works perfectly.

armin

On 15/06/2009 22:07, Even Rouault wrote:
> Yes, try something like :
> 
> ogr.GetDriverByName('KML').CreateDataSource('out.kml', options = 
> ['NameField=foo'] )
> 
> Le Monday 15 June 2009 21:52:45 Armin Burger, vous avez ?crit :
>> Hi everybody
>>
>> I would like to write KML output with GDAL Python bindings based on a
>> database query. Everything works fine, I just have not found a way to
>> define the NameField that is used in Google Earth as name displayed in
>> the TOC. The ogr2ogr tool lets me define this using the flag "-dsco
>> NameField=...".  Is there anything similar for GDAL Python?
>>
>> Thanks in advance for any hints.
>>
>> Armin
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
From nsavard at mapgears.com  Tue Jun 16 16:10:39 2009
From: nsavard at mapgears.com (Normand Savard)
Date: Tue Jun 16 16:16:29 2009
Subject: [gdal-dev] Build OGR with Oracle support
Message-ID: <4A37FC3F.5020708@mapgears.com>

I'm trying to build OGR with Oracle 10g or 11.1 support through FGS.  
The problem is that the library is not found.  If you look to the 
configure output below I made the CPPFLAGS AND LDFLAGS to be printed 
out.  They both point out to the correct location.

I downloaded the basic and sdk client from 
http://www.oracle.com/technology/software/tech/oci/instantclient/htdocs/linuxsoft.html


The configure switch settings are:
## oci support
OPTIONS="$OPTIONS 
--with-oci-include=$FGS_BUILD_HOME/$oci_ARCHIVE_DIR/sdk/include 
--with-oci-lib=$FGS_BUILD_HOME/$oci_ARCHIVE_DIR"


I checked in the configure.in script and everything seems alright.  
Could someone gives me some hints about why the library is not found?

Norm


configure.in script

...
        dnl
        dnl Check OCI libraries
        dnl
        if test "$oci_header_found" = "yes"; then

            AC_MSG_CHECKING([for Oracle OCI libraries in $oracle_lib_dir])

AC_MSG_RESULT([norm:$LDFLAGS])
AC_MSG_RESULT([norm:$CPPFLAGS])

            AC_LANG_PUSH(C++)
            AC_LINK_IFELSE([
                AC_LANG_PROGRAM([[@%:@include <oci.h>]],
                    [[
OCIEnv* envh = 0;
OCIEnvCreate(&envh, OCI_DEFAULT, 0, 0, 0, 0, 0, 0);
if (envh) OCIHandleFree(envh, OCI_HTYPE_ENV);
                    ]]
                )],
                [
                ORACLE_OCI_LDFLAGS="$oci_ldflags"
                oci_lib_found="yes"
                AC_MSG_RESULT([yes])
                ],
                [
                oci_lib_found="no"
                AC_MSG_RESULT([not found])
                ]
            )
            AC_LANG_POP([C++])
        fi

        CPPFLAGS="$saved_CPPFLAGS"
        LDFLAGS="$saved_LDFLAGS"
    fi


Configure output:
...
checking for NCScbmOpenFileView in -lNCSEcw... no
checking for NCScbmOpenFileView in -lecwj2... no
checking for Kakadu JPEG2000 support... not requested.
configure: MrSID support disabled.
checking for MSG... not requested
checking for BSB... enabled
checking for Oracle OCI headers in 
/home/fgs/fgs-dev/built/instantclient_11_1/sdk/include... yes
checking for Oracle OCI libraries in 
/home/fgs/fgs-dev/built/instantclient_11_1... norm: 
-L/home/fgs/fgs-dev/built/instantclient_11_1 -lclntsh
norm: -I/home/fgs/fgs-dev/built/instantclient_11_1/sdk/include
not found
checking if Oracle support is enabled... no
checking for GRIB... enabled
checking for OGR ... enabled
checking for MySQL... yes
checking for Ingres... no
checking for Xerces C++ Parser headers in 
/home/fgs/fgs-dev/built/xerces_c/include and 
/home/fgs/fgs-dev/built/xerces_c/include/xercesc... found
checking for Xerces C++ Parser libraries... found
checking for Xerces C++ Parser... yes
checking if Xerces C++ Parser version is >= 2.7.0... yes
checking for Expat XML Parser headers in /usr/include... found
checking for Expat XML Parser libraries... found
checking for Expat XML Parser... yes
checking if Expat XML Parser version is >= 1.95.0... yes
using odbc library from /home/fgs/fgs-dev/built/unixODBC.
checking for Oracle OCI headers in 
/home/fgs/fgs-dev/built/instantclient_11_1/sdk/include... yes
checking for Oracle OCI libraries in 
/home/fgs/fgs-dev/built/instantclient_11_1... norm: 
-L/home/fgs/fgs-dev/built/instantclient_11_1 -lclntsh
norm: -I/home/fgs/fgs-dev/built/instantclient_11_1/sdk/include
not found
checking if Oracle support is enabled... no
checking Checking for DODS... disabled
 



From bclay at ball.com  Tue Jun 16 16:40:25 2009
From: bclay at ball.com (Clay, Bruce)
Date: Tue Jun 16 16:40:50 2009
Subject: [gdal-dev] How to delete shapefile
Message-ID: <C482FF98AE985A47B8C982FD429C9E3402F5A6F5@daytonmsg2k3.AERO.BALL.COM>

I am trying to delete a temporary shapefile after running a process with
the following code.

 

int GdalWrapper::DeleteDataset(const char *datasetName)

{

      int status = -1;

 

      if (datasetName != NULL)

      {

            OGRDataSource *dataSrc = OpenDatasetFile(datasetName);

            if (dataSrc != NULL)

            {

                  try

                  {

                        int refCnt = dataSrc->GetSummaryRefCount();

                        if (refCnt > 0)

                        {

                              dataSrc->Release();

                        }

                        int deleteOk =
dataSrc->TestCapability(ODsCDeleteLayer);

                        if (deleteOk == TRUE)

                        {

                              dataSrc->DeleteLayer(0);

                              status = 0;

                        }

                        else

                        {

                              mLastErrorMsg = "Can not delete requested
dataset";

                        }

                  }

                  catch(...)

                  {

                        mLastErrorMsg = "Could not delete layer: ";

                        mLastErrorMsg += datasetName;

                  }

 

            }

 

      }

 

      return(status);

}

 

The TestCapability always returns FALSE.  If I call DeleteLayer anyway I
get an unsupported operation error messege.

I am using GDAL 1.5.3 with Visual Studio 2005.

 

Is there an error in my code or a different way to delete a shapefile
using GDAL or do I have to go to the operating system and find all of
the files that make up the shapefile and delete them that way?

 

Bruce

 

 




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090616/a4093b2e/attachment-0001.html
From mateusz at loskot.net  Tue Jun 16 16:40:54 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Jun 16 16:41:00 2009
Subject: [gdal-dev] Build OGR with Oracle support
In-Reply-To: <4A37FC3F.5020708@mapgears.com>
References: <4A37FC3F.5020708@mapgears.com>
Message-ID: <4A380356.4070804@loskot.net>

Normand Savard wrote:
> I checked in the configure.in script and everything seems alright. 
> Could someone gives me some hints about why the library is not found?
> [...]
>
> /home/fgs/fgs-dev/built/instantclient_11_1... norm:
> -L/home/fgs/fgs-dev/built/instantclient_11_1 -lclntsh
> norm: -I/home/fgs/fgs-dev/built/instantclient_11_1/sdk/include
> not found
> checking if Oracle support is enabled... no
> checking Checking for DODS... disabled

./configure generates a log file called config.log.
If something goes wrong, there should be some diagnostic in this file.
It would be helpful if you could share it, for instance, here:

http://pastebin.com/

This will help to find what's the problem.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From matt.gregory at oregonstate.edu  Tue Jun 16 18:52:14 2009
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Tue Jun 16 18:52:17 2009
Subject: [gdal-dev] resampling techniques in GDAL
Message-ID: <451453C181B199458A55B2B1723FAC000260CB1D@SAGE.forestry.oregonstate.edu>

Hi all,

A recent post got me thinking about resampling techniques.  I've posted
a graphic to help illustrate my question.  

  http://www.fsl.orst.edu/lemma/sandbox/resample.png

In the graphic, assume the input image is the 3x3 grid with black
outlines and blue and yellow dot centers.  Assume the red outlined
pixels represent three different output resolutions of a single pixel
each having its center at the black dot.  

Using bilinear interpolation, each of these three output resolutions get
the same value (tested using gdalwarp) based on the four yellow cell
centers.  I understand why this is happening and realize this is the
expected behavior.  

My question, however, is whether or not there is a resampling technique
(inside or outside GDAL) that uses the proportional weights and values
of *all* input pixels touched by the output pixel.  At the finest
resolution in the illustration, this would be equivalent a nearest
neighbor resampling (ie. the output pixel is wholly contained within the
input pixel) and at the coarsest resolution, all nine input pixels would
contribute to the output value based on proportional area.  

This falls outside the traditional { nearest neighbor | bilinear
interpolation | cubic convolution } resampling techniques and there may
be a reason why this is a bad idea.  I can see that it might be
prohibitively slow for large output pixel resolutions but, to my way of
thinking, a potentially more accurate representation of the underlying
(finer-resolution) data.

matt
From warmerdam at pobox.com  Tue Jun 16 19:03:48 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jun 16 19:03:54 2009
Subject: [gdal-dev] resampling techniques in GDAL
In-Reply-To: <451453C181B199458A55B2B1723FAC000260CB1D@SAGE.forestry.oregonstate.edu>
References: <451453C181B199458A55B2B1723FAC000260CB1D@SAGE.forestry.oregonstate.edu>
Message-ID: <4A3824D4.8080700@pobox.com>

Gregory, Matthew wrote:
> Hi all,
> 
> A recent post got me thinking about resampling techniques.  I've posted
> a graphic to help illustrate my question.  
> 
>   http://www.fsl.orst.edu/lemma/sandbox/resample.png
> 
> In the graphic, assume the input image is the 3x3 grid with black
> outlines and blue and yellow dot centers.  Assume the red outlined
> pixels represent three different output resolutions of a single pixel
> each having its center at the black dot.  
> 
> Using bilinear interpolation, each of these three output resolutions get
> the same value (tested using gdalwarp) based on the four yellow cell
> centers.  I understand why this is happening and realize this is the
> expected behavior.  
> 
> My question, however, is whether or not there is a resampling technique
> (inside or outside GDAL) that uses the proportional weights and values
> of *all* input pixels touched by the output pixel.  At the finest
> resolution in the illustration, this would be equivalent a nearest
> neighbor resampling (ie. the output pixel is wholly contained within the
> input pixel) and at the coarsest resolution, all nine input pixels would
> contribute to the output value based on proportional area.  

Matt,

In a loose sense this is how averaged overviews works, and it is part of
why they are suitable for radically downsampling while the at most 4x4
resampling kernels in gdalwarp are not suitable for radical downsampling.

The current gdalwarp infrastructure does not make it easy to do what
you want - particularly when faced with transformations that are
non-linear.  If we took the narrower case of simple downsampling we
could design various options like what you want - possible based on
the template of the averaged overviews.

However, I have no plans to pursue this myself.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From seth at pricepages.org  Tue Jun 16 19:19:17 2009
From: seth at pricepages.org (Seth Price)
Date: Tue Jun 16 19:19:21 2009
Subject: [gdal-dev] resampling techniques in GDAL
In-Reply-To: <451453C181B199458A55B2B1723FAC000260CB1D@SAGE.forestry.oregonstate.ed
	u>
References: <451453C181B199458A55B2B1723FAC000260CB1D@SAGE.forestry.oregonstate.edu>
Message-ID: <55524.129.123.22.93.1245194357.squirrel@pricepages.org>

The reason that what you are suggesting isn't done is mainly speed and
simplicity. GDAL makes the assumption that you are warping from one
resolution to another, similar, resolution. The current scheme works well
for that.

However, I believe that Cubic Spline and Lanczos resampling both do what
you are referring to. They use variable kernel sizes depending on the
input/output image sizes.

In conclusion, if you want quality image resampling across large scales,
use a image manipulation package such as imagemagick. Their algorithms
incorporate your concerns and more. But GDAL's method works pretty well
for what it's used for.
~Seth


On Tue, June 16, 2009 5:52 pm, Gregory, Matthew wrote:
> Hi all,
>
> A recent post got me thinking about resampling techniques.  I've posted
> a graphic to help illustrate my question.
>
>   http://www.fsl.orst.edu/lemma/sandbox/resample.png
>
> In the graphic, assume the input image is the 3x3 grid with black
> outlines and blue and yellow dot centers.  Assume the red outlined
> pixels represent three different output resolutions of a single pixel
> each having its center at the black dot.
>
> Using bilinear interpolation, each of these three output resolutions get
> the same value (tested using gdalwarp) based on the four yellow cell
> centers.  I understand why this is happening and realize this is the
> expected behavior.
>
> My question, however, is whether or not there is a resampling technique
> (inside or outside GDAL) that uses the proportional weights and values
> of *all* input pixels touched by the output pixel.  At the finest
> resolution in the illustration, this would be equivalent a nearest
> neighbor resampling (ie. the output pixel is wholly contained within the
> input pixel) and at the coarsest resolution, all nine input pixels would
> contribute to the output value based on proportional area.
>
> This falls outside the traditional { nearest neighbor | bilinear
> interpolation | cubic convolution } resampling techniques and there may
> be a reason why this is a bad idea.  I can see that it might be
> prohibitively slow for large output pixel resolutions but, to my way of
> thinking, a potentially more accurate representation of the underlying
> (finer-resolution) data.
>
> matt
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From warmerdam at pobox.com  Tue Jun 16 19:31:25 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jun 16 19:31:35 2009
Subject: [gdal-dev] How to delete shapefile
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E3402F5A6F5@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E3402F5A6F5@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <4A382B4D.8030103@pobox.com>

Clay, Bruce wrote:
> I am trying to delete a temporary shapefile after running a process with 
> the following code.
...
> The TestCapability always returns FALSE.  If I call DeleteLayer anyway I 
> get an unsupported operation error messege.
> 
> I am using GDAL 1.5.3 with Visual Studio 2005.
>
> Is there an error in my code or a different way to delete a shapefile 
> using GDAL or do I have to go to the operating system and find all of 
> the files that make up the shapefile and delete them that way?

Bruce,

It looks like the DeleteLayer support for the shapefile driver was added
for 1.6.0.  So you need to either upgrade or perhaps just delete the files
yourself with unlink().  Make sure the datasource is closed when you do so.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Jun 16 23:40:44 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jun 16 23:40:46 2009
Subject: [gdal-dev] Upgrade to EPSG 7.1 files
Message-ID: <4A3865BC.7060905@pobox.com>

Folks,

Based on work Paul Ramsey did upgrading libgeotiff to EPSG 7.1, I have also
upgraded the gdal/data/*.csv and proj/nad/epsg files to the same level in
gdal and proj trunks.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From a.neumann at carto.net  Wed Jun 17 05:15:28 2009
From: a.neumann at carto.net (Andreas Neumann)
Date: Wed Jun 17 05:35:48 2009
Subject: [gdal-dev] Curve support in OGR
Message-ID: <4A38B430.5050609@carto.net>

Hi all,

I am sure this topic is coming up once in a while. I wonder what the 
take is on curve support in the OGR feature model.

Most formats we use now support curves, but our favorite translation 
engine does not. For curve support I currently have to use FME.

These are the formats/databases we use:

Postgis (Geodata Warehouse)
Oracle Spatial (production system for survey data, linked to Autodesk 
Topobase)
dxf/dwg (file exchange)
SVG (presentation format)
sdf (used for Mapguide)

Most of our survey data contains circular arcs, some datasets also 
contain splines.

I know that curve support in Postgis is somehow limited, but each 
release improves a bit on it and the list of curve-aware operators is 
growing:
http://postgis.refractions.net/documentation/manual-svn/ch08.html#PostGIS_Curved_GeometryFunctions

If OS GIS wants to further penetrate in Switzerland it has to be able to 
deal with curves (at least circular arcs) since they are used all over 
the place.

Of course we are willing to partially help to finance such a development 
(hopefully with some others) if the OGR developers are interested in 
adding curve support and can offer an estimate on how much it would cost 
to implement this (at least on the core and for selected formats).

Thanks,
Andreas


From stefan.moebius at actix.com  Wed Jun 17 10:20:10 2009
From: stefan.moebius at actix.com (Stefan Moebius)
Date: Wed Jun 17 10:21:15 2009
Subject: [gdal-dev] Java bindings build issue
Message-ID: <4A38FB9A.7060201@actix.com>

Hi,

I'm trying to build gdal-trunk with Java bindings on rhel-5.

I succeeded with GDAL itself, but had to disable expat.
I also disabled OGR, but included PROJ.4.

Next I configured gdal/swig/java/java.opt and ran make.

Result is:

mkdir -p org/gdal/gdal
mkdir -p org/gdal/gdalconst
mkdir -p org/gdal/ogr
mkdir -p org/gdal/osr
swig -Wall -I../include -I../include/java -I../include/java/docs -outdir 
"org/gdal/gdal" -package "org.gdal.gdal"  -I/home/devbuild/gdal-1.7
  -c++ -java -o gdal_wrap.cpp gdal.i
../include/cpl.i:EOF: Error: Missing #endif for conditional starting on line 214
make: *** [gdal_wrap.cpp] Error 1

Any ideas?

The swig version is 1.3.29.

Regards,
Stefan
From ari.jolma at tkk.fi  Wed Jun 17 10:25:04 2009
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Jun 17 10:23:22 2009
Subject: [gdal-dev] Towards more user-friendly error messages
Message-ID: <4A38FCC0.2070301@tkk.fi>

A colleague of mine is beginning to use GDAL via the Perl bindings (the
bindings are not the main issue however). He makes quite simple errors,
but is perplexed when he gets rather scary looking / uninformative error
messages. For example he forgot to open Shapefile with update turned on
(it is by default off at least in Perl bindings) and when he then calls
SetFeature the error is:

RuntimeError Error in psSHP->sHooks.FSeek() or fwrite() writing object
to .shp file.

Which for the initiated hints that maybe the file was opened read-only,
but for a newbie is just scary.

In this case there are two issues:

- the error is at layer method, although the data source was opened
read-only (does the layer know its data source and is it easy to query
from the data source, how it was opened - at least in the bindings
there's no method for that?)

- where to report the error nicely, for example "Can't call SetFeature
with a read-only layer, you moron."

Is this a policy issue, or is this a case-by-case issue? How could we
find and list the frequently made mistakes?

Regards,

Ari

-- 
Prof. Ari Jolma
Environmental Management Information Technology
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 4511 address: POBox 5300, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://geoinformatics.tkk.fi


From bclay at ball.com  Wed Jun 17 10:23:29 2009
From: bclay at ball.com (Clay, Bruce)
Date: Wed Jun 17 10:23:33 2009
Subject: [gdal-dev] How to delete shapefile
In-Reply-To: <4A382B4D.8030103@pobox.com>
References: <C482FF98AE985A47B8C982FD429C9E3402F5A6F5@daytonmsg2k3.AERO.BALL.COM>
	<4A382B4D.8030103@pobox.com>
Message-ID: <C482FF98AE985A47B8C982FD429C9E3402F5A7B4@daytonmsg2k3.AERO.BALL.COM>

Frank:
  Thanks for the information.  I tried to update to a newer version of GDAL (I tried both 1.6.1 and 1.7.0) but the both crash on RegisterAll


In both cases the problem seems to be in the following method

void VSIFileManager::InstallHandler( const std::string& osPrefix,
                                     VSIFilesystemHandler *poHandler )

{
    if( osPrefix == "" )
        Get()->poDefaultHandler = poHandler;
    else
        Get()->oHandlers[osPrefix] = poHandler;
}

The calling methods are passing what appears to be valid strings but the osPrefix contents in this method always seem to be different that the calling method.  One thing that looks odd although it may be valid is using std::string as an array index.  The program will go through InstallHandler a few times before it crashes.  When it does the calling method is passing double quotes yet this method falls to the else condition then crashes.

Are there any settings that need to be changed for the versions after 1.5.3?

Thanks again for your help.

Bruce


The stack trace is shown below.


Stack trace for 1.6.1 is relatively the same but it failed on the GZIPFileSystemHandler (I think that was the name)

Stack trace for 1.7.0

	msvcr80d.dll!cmpDWORD(const void * lhs=0x6973762f, const void * rhs=0x0012e8a0)  + 0x18 bytes	C
 	msvcr80d.dll!unaligned_memcmp(const unsigned char * bLHS=0x69737637, const unsigned char * bRHS=0x0012e8a8, unsigned int siz=8)  + 0x264 bytes	C
 	msvcr80d.dll!memcmp(const void * lhs=0x6973762f, const void * rhs=0x0012e8a0, unsigned int siz=8)  + 0x19a bytes	C
>	msvcp80d.dll!std::char_traits<char>::compare(const char * _First1=0x6973762f, const char * _First2=0x0012e8a0, unsigned int _Count=8)  Line 553 + 0x11 bytes	C++
 	msvcp80d.dll!std::basic_string<char,std::char_traits<char>,std::allocator<char> >::compare(unsigned int _Off=0, unsigned int _N0=12, const char * _Ptr=0x0012e8a0, unsigned int _Count=8)  Line 1978 + 0x2f bytes	C++
 	msvcp80d.dll!std::basic_string<char,std::char_traits<char>,std::allocator<char> >::compare(const std::basic_string<char,std::char_traits<char>,std::allocator<char> > & _Right="/vsimem/")  Line 1939	C++
 	msvcp80d.dll!std::operator<<char,std::char_traits<char>,std::allocator<char> >(const std::basic_string<char,std::char_traits<char>,std::allocator<char> > & _Left=<Bad Ptr>, const std::basic_string<char,std::char_traits<char>,std::allocator<char> > & _Right="/vsimem/")  Line 135 + 0xc bytes	C++
 	OccurrenceTool.exe!std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char> > >::operator()(const std::basic_string<char,std::char_traits<char>,std::allocator<char> > & _Left="????/vsisubfile/", const std::basic_string<char,std::char_traits<char>,std::allocator<char> > & _Right="")  Line 143 + 0xe bytes	C++
 	OccurrenceTool.exe!std::_Tree<std::_Tmap_traits<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,VSIFilesystemHandler *,std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char> > >,std::allocator<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> > const ,VSIFilesystemHandler *> >,0> >::_Lbound(const std::basic_string<char,std::char_traits<char>,std::allocator<char> > & _Keyval="")  Line 1174 + 0x19 bytes	C++
 	OccurrenceTool.exe!std::_Tree<std::_Tmap_traits<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,VSIFilesystemHandler *,std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char> > >,std::allocator<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> > const ,VSIFilesystemHandler *> >,0> >::lower_bound(const std::basic_string<char,std::char_traits<char>,std::allocator<char> > & _Keyval="")  Line 987 + 0x10 bytes	C++
 	OccurrenceTool.exe!std::map<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,VSIFilesystemHandler *,std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char> > >,std::allocator<std::pair<std::basic_string<char,std::char_traits<char>,std::allocator<char> > const ,VSIFilesystemHandler *> > >::operator[](const std::basic_string<char,std::char_traits<char>,std::allocator<char> > & _Keyval="")  Line 170	C++
 	OccurrenceTool.exe!VSIFileManager::InstallHandler(const std::basic_string<char,std::char_traits<char>,std::allocator<char> > & osPrefix="", VSIFilesystemHandler * poHandler=0x023d56e8)  Line 651 + 0x13 bytes	C++
 	OccurrenceTool.exe!VSIInstallMemFileHandler()  Line 694 + 0x48 bytes	C++
 	OccurrenceTool.exe!VSIFileManager::Get()  Line 601	C++
 	OccurrenceTool.exe!VSIFileManager::GetHandler(const char * pszPath=0x01cb4e10)  Line 616 + 0x5 bytes	C++
 	OccurrenceTool.exe!VSIReadDir(const char * pszPath=0x01cb4e10)  Line 63 + 0x9 bytes	C++
 	OccurrenceTool.exe!OGRSFDriverRegistrar::AutoLoadDrivers()  Line 763 + 0x12 bytes	C++
 	OccurrenceTool.exe!OGRRegisterAll()  Line 43	C++
 	OccurrenceTool.exe!GdalWrapper::Initialize()  Line 125 + 0x5 bytes	C++
 	OccurrenceTool.exe!COccurrenceToolView::OnInitialUpdate()  Line 316	C++
 	mfc80d.dll!CWnd::OnWndMsg(unsigned int message=868, unsigned int wParam=0, long lParam=0, long * pResult=0x0012fa2c)  Line 2028	C++
 	mfc80d.dll!CWnd::WindowProc(unsigned int message=868, unsigned int wParam=0, long lParam=0)  Line 1741 + 0x20 bytes	C++
 	mfc80d.dll!AfxCallWndProc(CWnd * pWnd=0x003b96d0, HWND__ * hWnd=0x00d91312, unsigned int nMsg=868, unsigned int wParam=0, long lParam=0)  Line 240 + 0x1c bytes	C++
 	mfc80d.dll!CWnd::SendMessageToDescendants(HWND__ * hWnd=0x00921336, unsigned int message=868, unsigned int wParam=0, long lParam=0, int bDeep=1, int bOnlyPerm=1)  Line 2524	C++
 	mfc80d.dll!CWnd::SendMessageToDescendants(unsigned int message=868, unsigned int wParam=0, long lParam=0, int bDeep=1, int bOnlyPerm=1)  Line 170 + 0x20 bytes	C++
 	mfc80d.dll!CFrameWnd::InitialUpdateFrame(CDocument * pDoc=0x003b90b0, int bMakeVisible=1)  Line 750	C++
 	mfc80d.dll!CDocTemplate::InitialUpdateFrame(CFrameWnd * pFrame=0x003b9140, CDocument * pDoc=0x003b90b0, int bMakeVisible=1)  Line 330	C++
 	mfc80d.dll!CSingleDocTemplate::OpenDocumentFile(const char * lpszPathName=0x00000000, int bMakeVisible=1)  Line 200	C++
 	mfc80d.dll!CDocManager::OnFileNew()  Line 848	C++
 	mfc80d.dll!CWinApp::OnFileNew()  Line 22	C++
 	mfc80d.dll!_AfxDispatchCmdMsg(CCmdTarget * pTarget=0x011a57c8, unsigned int nID=57600, int nCode=0, void (void)* pfn=0x0079e936, void * pExtra=0x00000000, unsigned int nSig=56, AFX_CMDHANDLERINFO * pHandlerInfo=0x00000000)  Line 82	C++
 	mfc80d.dll!CCmdTarget::OnCmdMsg(unsigned int nID=57600, int nCode=0, void * pExtra=0x00000000, AFX_CMDHANDLERINFO * pHandlerInfo=0x00000000)  Line 381 + 0x27 bytes	C++
 	mfc80d.dll!CWinApp::ProcessShellCommand(CCommandLineInfo & rCmdInfo={...})  Line 24 + 0x20 bytes	C++
 	OccurrenceTool.exe!COccurrenceToolApp::InitInstance()  Line 93 + 0xc bytes	C++
 	mfc80d.dll!AfxWinMain(HINSTANCE__ * hInstance=0x00400000, HINSTANCE__ * hPrevInstance=0x00000000, char * lpCmdLine=0x00151f39, int nCmdShow=1)  Line 37 + 0xd bytes	C++
 	OccurrenceTool.exe!WinMain(HINSTANCE__ * hInstance=0x00400000, HINSTANCE__ * hPrevInstance=0x00000000, char * lpCmdLine=0x00151f39, int nCmdShow=1)  Line 33	C++
 	OccurrenceTool.exe!__tmainCRTStartup()  Line 589 + 0x35 bytes	C
 	OccurrenceTool.exe!WinMainCRTStartup()  Line 414	C
 	kernel32.dll!7c817067() 	
 	[Frames below may be incorrect and/or missing, no symbols loaded for kernel32.dll]	

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Tuesday, June 16, 2009 7:31 PM
To: Clay, Bruce
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] How to delete shapefile

Clay, Bruce wrote:
> I am trying to delete a temporary shapefile after running a process with 
> the following code.
...
> The TestCapability always returns FALSE.  If I call DeleteLayer anyway I 
> get an unsupported operation error messege.
> 
> I am using GDAL 1.5.3 with Visual Studio 2005.
>
> Is there an error in my code or a different way to delete a shapefile 
> using GDAL or do I have to go to the operating system and find all of 
> the files that make up the shapefile and delete them that way?

Bruce,

It looks like the DeleteLayer support for the shapefile driver was added
for 1.6.0.  So you need to either upgrade or perhaps just delete the files
yourself with unlink().  Make sure the datasource is closed when you do so.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
From stefan.moebius at actix.com  Wed Jun 17 10:35:42 2009
From: stefan.moebius at actix.com (Stefan Moebius)
Date: Wed Jun 17 10:35:46 2009
Subject: [gdal-dev] Java bindings build issue
In-Reply-To: <4A38FB9A.7060201@actix.com>
References: <4A38FB9A.7060201@actix.com>
Message-ID: <4A38FF3E.30604@actix.com>

Same problem with OGR enabled.

Stefan Moebius wrote:
> Hi,
> 
> I'm trying to build gdal-trunk with Java bindings on rhel-5.
> 
> I succeeded with GDAL itself, but had to disable expat.
> I also disabled OGR, but included PROJ.4.
> 
> Next I configured gdal/swig/java/java.opt and ran make.
> 
> Result is:
> 
> mkdir -p org/gdal/gdal
> mkdir -p org/gdal/gdalconst
> mkdir -p org/gdal/ogr
> mkdir -p org/gdal/osr
> swig -Wall -I../include -I../include/java -I../include/java/docs -outdir 
> "org/gdal/gdal" -package "org.gdal.gdal"  -I/home/devbuild/gdal-1.7
>  -c++ -java -o gdal_wrap.cpp gdal.i
> ../include/cpl.i:EOF: Error: Missing #endif for conditional starting on 
> line 214
> make: *** [gdal_wrap.cpp] Error 1
> 
> Any ideas?
> 
> The swig version is 1.3.29.
> 
> Regards,
> Stefan

From ari.jolma at tkk.fi  Wed Jun 17 10:37:52 2009
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Jun 17 10:36:09 2009
Subject: [gdal-dev] Java bindings build issue
In-Reply-To: <4A38FB9A.7060201@actix.com>
References: <4A38FB9A.7060201@actix.com>
Message-ID: <4A38FFC0.5060600@tkk.fi>

Stefan Moebius kirjoitti:
> swig -Wall -I../include -I../include/java -I../include/java/docs 
> -outdir "org/gdal/gdal" -package "org.gdal.gdal"  
> -I/home/devbuild/gdal-1.7
>  -c++ -java -o gdal_wrap.cpp gdal.i
> ../include/cpl.i:EOF: Error: Missing #endif for conditional starting 
> on line 214
> make: *** [gdal_wrap.cpp] Error 1
>
> Any ideas? 
> The swig version is 1.3.29.

hmm, at least for Perl all is (almost) well:

swig -Wall -I../include -I../include/perl -I../include/perl/docs 
-DPERL_CPAN_NAMESPACE -I -c++ -perl -o gdal_wrap.cpp gdal.i
..\include\gdal.i(705): Warning(322): Redundant redeclaration of 
'GeneralCmdLineProcessor',
..\include\ogr.i(1818): Warning(322): previous declaration of 
'GeneralCmdLineProcessor'.
swig -Wall -I../include -I../include/perl -I../include/perl/docs 
-DPERL_CPAN_NAMESPACE -I -perl -o gdalconst_wrap.c gdalconst.i
swig -Wall -I../include -I../include/perl -I../include/perl/docs 
-DPERL_CPAN_NAMESPACE -I -c++ -perl -o ogr_wrap.cpp ogr.i
swig -Wall -I../include -I../include/perl -I../include/perl/docs 
-DPERL_CPAN_NAMESPACE -I -c++ -perl -o osr_wrap.cpp osr.i

i.e., cpl.i is ok for Perl

line 214 at cpl.i is #ifndef SWIGRUBY

the corresponding #endif seems to be on the last line and without 
newline, maybe that's confusing your swig? Add a newline to the end of 
the file and say make.

my swig is 1.3.36

>
> Regards,
> Stefan
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Environmental Management Information Technology
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 4511 address: POBox 5300, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://geoinformatics.tkk.fi

From stefan.moebius at actix.com  Wed Jun 17 10:37:44 2009
From: stefan.moebius at actix.com (Stefan Moebius)
Date: Wed Jun 17 10:37:47 2009
Subject: [gdal-dev] Java bindings build issue
In-Reply-To: <4A38FFC0.5060600@tkk.fi>
References: <4A38FB9A.7060201@actix.com> <4A38FFC0.5060600@tkk.fi>
Message-ID: <4A38FFB8.2030509@actix.com>

> line 214 at cpl.i is #ifndef SWIGRUBY
> 
> the corresponding #endif seems to be on the last line and without 
> newline, maybe that's confusing your swig? Add a newline to the end of 
> the file and say make.

Yeah, that's it. Thanks for saving my day :-)

Cheers,
Stefan
From mateusz at loskot.net  Wed Jun 17 10:54:18 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Jun 17 10:53:47 2009
Subject: [gdal-dev] How to delete shapefile
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E3402F5A7B4@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E3402F5A6F5@daytonmsg2k3.AERO.BALL.COM>	<4A382B4D.8030103@pobox.com>
	<C482FF98AE985A47B8C982FD429C9E3402F5A7B4@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <4A39039A.8030504@loskot.net>

Clay, Bruce wrote:
> Frank: Thanks for the information.  I tried to update to a newer
> version of GDAL (I tried both 1.6.1 and 1.7.0) but the both crash on
> RegisterAll
> 
> 
> In both cases the problem seems to be in the following method
> 
> void VSIFileManager::InstallHandler( const std::string& osPrefix, 
> VSIFilesystemHandler *poHandler )
> 
> { if( osPrefix == "" ) Get()->poDefaultHandler = poHandler; else 
> Get()->oHandlers[osPrefix] = poHandler; }
> 
> The calling methods are passing what appears to be valid strings but
> the osPrefix contents in this method always seem to be different that
> the calling method.  One thing that looks odd although it may be
> valid is using std::string as an array index.

The oHandlers is not an array. It is a dictionary implemented using
std::map tree with std::string as key. This is perfectly valid construction.

Try to ensure the following in your own code:

int refCnt = dataSrc->GetSummaryRefCount();
if (refCnt > 0)
{
    dataSrc->Release();
}

assert( 0 == dataSrc->GetSummaryRefCount()); // <--- HERE

Cheers,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From chandra.kumar at flagstonere.bm  Wed Jun 17 11:09:14 2009
From: chandra.kumar at flagstonere.bm (Chandra Shekhar Kumar)
Date: Wed Jun 17 11:09:19 2009
Subject: [gdal-dev] hdf5 to esri shape-file converter
In-Reply-To: <E50149C3B75A5349A6614DD9E67073EB12504B58@hfxpdexc01.flagstonere.local>
References: <E50149C3B75A5349A6614DD9E67073EB12504B58@hfxpdexc01.flagstonere.local>
Message-ID: <1B507B19FF9C474C936493A7909007D0792B1A@hfxpdexc01.flagstonere.local>

Hi,

 

I was looking for a converter tool to convert a given hdf5 file (.mh5)
to esri shape-files(.shp) and vice versa.

 

Does anyone has any idea about the same?

 

Does anyone see any utility in developing this(if it doesn't exists
already somewhere)?

Thanks,

Chandra

 


**********************************************************************
This communication contains information which is confidential and may also be legally privileged. It is for the exclusive use of the intended recipient(s). If you are not the intended recipient(s), disclosure, copying, distribution, or other use of, or action taken or omitted to be taken in reliance upon, this communication or the information in it is prohibited and maybe unlawful. If you have received this communication in error please notify the sender by return email, delete it from your system and destroy any copies.
**********************************************************************

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090617/874a551c/attachment.html
From sdteffen at gmail.com  Wed Jun 17 13:03:28 2009
From: sdteffen at gmail.com (Steffen Macke)
Date: Wed Jun 17 13:03:31 2009
Subject: [gdal-dev] hdf5 to esri shape-file converter
In-Reply-To: <1B507B19FF9C474C936493A7909007D0792B1A@hfxpdexc01.flagstonere.local>
References: <E50149C3B75A5349A6614DD9E67073EB12504B58@hfxpdexc01.flagstonere.local>
	<1B507B19FF9C474C936493A7909007D0792B1A@hfxpdexc01.flagstonere.local>
Message-ID: <3cb1691c0906171003k4d387c08o2ca540ad35e19444@mail.gmail.com>

Hi Chandra,

> I was looking for a converter tool to convert a given hdf5 file (.mh5) to
> esri shape-files(.shp) and vice versa.

GDAL supports reading of HDF5 raster data. But Shape files are vector data.
The process to convert from raster to vector data is called Vectorization.
And Vectorization is not a straightforward thing. See e.g

http://en.wikipedia.org/wiki/Vectorization_(computer_graphics)

But HDF5 can actually many different things:
Are you talking about HDF5 files with raster or vector data?

Regards,

Steffen
From chandra.kumar at flagstonere.bm  Wed Jun 17 13:13:46 2009
From: chandra.kumar at flagstonere.bm (Chandra Shekhar Kumar)
Date: Wed Jun 17 13:13:50 2009
Subject: [gdal-dev] hdf5 to esri shape-file converter
In-Reply-To: <3cb1691c0906171003k4d387c08o2ca540ad35e19444@mail.gmail.com>
References: <E50149C3B75A5349A6614DD9E67073EB12504B58@hfxpdexc01.flagstonere.local>
	<1B507B19FF9C474C936493A7909007D0792B1A@hfxpdexc01.flagstonere.local> 
	<3cb1691c0906171003k4d387c08o2ca540ad35e19444@mail.gmail.com>
Message-ID: <1B507B19FF9C474C936493A7909007D0792B3F@hfxpdexc01.flagstonere.local>

Steffen,

>Hi Chandra,
>
>> I was looking for a converter tool to convert a given hdf5 file
(.mh5)
>to
>> esri shape-files(.shp) and vice versa.
>
>GDAL supports reading of HDF5 raster data.
[Chandra ] this is really cool news for me.

>But Shape files are vector
>data.
>The process to convert from raster to vector data is called
>Vectorization.
>And Vectorization is not a straightforward thing. See e.g
>
>http://en.wikipedia.org/wiki/Vectorization_(computer_graphics)
Thanks for the info. It is very useful for me.
>
>But HDF5 can actually many different things:
>Are you talking about HDF5 files with raster or vector data?
[Chandra ] I have hdf files holding vector data only(basically
longitude, latitude, speed etc).
Do you think that it will easier now to convert it to shape files?

I thought that just inspecting the hdf-file to grab the vector data
somehow will be really cool if it holds that and the same can be
converted to shape files using ogr api.
May be it is not that cool :(


Many a thanks,
Chandra

**********************************************************************
This communication contains information which is confidential and may also be legally privileged. It is for the exclusive use of the intended recipient(s). If you are not the intended recipient(s), disclosure, copying, distribution, or other use of, or action taken or omitted to be taken in reliance upon, this communication or the information in it is prohibited and maybe unlawful. If you have received this communication in error please notify the sender by return email, delete it from your system and destroy any copies.
**********************************************************************

From mateusz at loskot.net  Wed Jun 17 13:15:25 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Jun 17 13:14:53 2009
Subject: [gdal-dev] How to delete shapefile
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E3402F5A7E1@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E3402F5A6F5@daytonmsg2k3.AERO.BALL.COM>	<4A382B4D.8030103@pobox.com>
	<C482FF98AE985A47B8C982FD429C9E3402F5A7B4@daytonmsg2k3.AERO.BALL.COM>
	<4A39039A.8030504@loskot.net>
	<C482FF98AE985A47B8C982FD429C9E3402F5A7E1@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <4A3924AD.3040301@loskot.net>

Clay, Bruce wrote:
> Mateusz:
>   Thanks for your reply.  Unfortunately I can not get far enough to do
> that.  The crash is occurring down stream from OGRRegisterAll.  That is
> to say, the last call in my code space before the crash is
> OGRRegisterAll. I can not get OGR initialized to be able to open a data
> source.

Bruce,

Are you saying that you are unable to run this simple program successfully?

#include "ogrsf_frmts.h"
int main()
{
     OGRRegisterAll();
}

If you indeed can not run it, it probably means your GDAL installation
is not configured properly or broken.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From sdteffen at gmail.com  Wed Jun 17 13:27:41 2009
From: sdteffen at gmail.com (Steffen Macke)
Date: Wed Jun 17 13:27:44 2009
Subject: [gdal-dev] hdf5 to esri shape-file converter
In-Reply-To: <1B507B19FF9C474C936493A7909007D0792B3F@hfxpdexc01.flagstonere.local>
References: <E50149C3B75A5349A6614DD9E67073EB12504B58@hfxpdexc01.flagstonere.local>
	<1B507B19FF9C474C936493A7909007D0792B1A@hfxpdexc01.flagstonere.local>
	<3cb1691c0906171003k4d387c08o2ca540ad35e19444@mail.gmail.com>
	<1B507B19FF9C474C936493A7909007D0792B3F@hfxpdexc01.flagstonere.local>
Message-ID: <3cb1691c0906171027o2eff3bc9u23ac16e20732ce66@mail.gmail.com>

Hi Chandra,

> [Chandra ] I have hdf files holding vector data only(basically
> longitude, latitude, speed etc).
> Do you think that it will easier now to convert it to shape files?

Most probably, because you can skip the Vectorization.
You could use CSV as an intermediate format:

* Create a CSV file using h5dump:

http://www.hdfgroup.org/HDF5/doc/RM/Tools.html#Tools-Dump

* Convert the CSV file into a Shape file using ogr. The OGR CSV driver
page has some documentation on this:

http://www.gdal.org/ogr/drv_csv.html

I assume that this is only about point data.

Regards,

Steffen
From even.rouault at mines-paris.org  Wed Jun 17 14:00:59 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jun 17 14:01:12 2009
Subject: [gdal-dev] Towards more user-friendly error messages
In-Reply-To: <4A38FCC0.2070301@tkk.fi>
References: <4A38FCC0.2070301@tkk.fi>
Message-ID: <200906172001.00870.even.rouault@mines-paris.org>

Ari,

It's funny because I myself got caught by the same issue a few days ago.
So I've just improved error reporting on shapefile layer for SetFeature(), 
CreateFeature() and DeleteFeature() operations in trunk (r17255). It was 
trivial in that case as the OGRShapeLayer object has a flag to indicate if it 
is opened in read-only or update mode.

I'm not sure there is a policy for error reporting and how it could be 
formulated if there was one ! If we can make it clearer in situations where 
it is not currently, just report it as you did.

I'd note that you can check for most operations on OGR Layers if they are 
possible by using the TestCapability() method, which is mapped to swig. For 
example, for SetFeature() with the OLCRandomWrite flag. (By the way, in that 
commit I've also fixed a few cases where the answer was not correct for other 
flags)

Best regards,

Even

Le Wednesday 17 June 2009 16:25:04 Ari Jolma, vous avez ?crit?:
> A colleague of mine is beginning to use GDAL via the Perl bindings (the
> bindings are not the main issue however). He makes quite simple errors,
> but is perplexed when he gets rather scary looking / uninformative error
> messages. For example he forgot to open Shapefile with update turned on
> (it is by default off at least in Perl bindings) and when he then calls
> SetFeature the error is:
>
> RuntimeError Error in psSHP->sHooks.FSeek() or fwrite() writing object
> to .shp file.
>
> Which for the initiated hints that maybe the file was opened read-only,
> but for a newbie is just scary.
>
> In this case there are two issues:
>
> - the error is at layer method, although the data source was opened
> read-only (does the layer know its data source and is it easy to query
> from the data source, how it was opened - at least in the bindings
> there's no method for that?)
>
> - where to report the error nicely, for example "Can't call SetFeature
> with a read-only layer, you moron."
>
> Is this a policy issue, or is this a case-by-case issue? How could we
> find and list the frequently made mistakes?
>
> Regards,
>
> Ari


From thare at usgs.gov  Wed Jun 17 14:00:07 2009
From: thare at usgs.gov (Trent M Hare)
Date: Wed Jun 17 14:15:38 2009
Subject: [gdal-dev] Distributed processing
In-Reply-To: <4A37BA4A.3030400@external.thalesgroup.com>
References: <C8891C79DFCAB347B9221DF3890EDD2F33CABF@topdog.Virtalis.local>
	<4A37BA4A.3030400@external.thalesgroup.com>
Message-ID: <OF6535FE16.61CFD516-ON072575D8.00605297-072575D8.0062E392@usgs.gov>

huh - processing using Make - clever.

We are researching several different approaches for this also but I 
imagine we will use Conductor, created by (UofA). Another of our 
commercial systems uses Condor (open source - 
http://www.cs.wisc.edu/condor/ ) .

Currently the UofA Conductor HiRISE pipeline uses our ISIS image 
processing software which is not yet multi-threaded. Thus this system 
should also work well for GDAL processing. They also have another tool 
that monitors Conductor called Maestro. Don't jump into this lightly as I 
imagine it will be tricky to setup (it also requires a database - MySQL). 
http://pirlwww.lpl.arizona.edu/software/Conductor.shtml BTW, they are a 
completely *nix house (Solaris, Mac OS-X, FreeBSD and Linux).

here is an abstract (by the author B. Castalia)
http://www.lsstmail.org/meet_coll/ongoing/Software/

Regards,
Trent



From:
Fabrice LALLAURET - PSV <fabrice.lallauret@external.thalesgroup.com>
To:
gdal-dev@lists.osgeo.org
Date:
06/16/2009 08:32 AM
Subject:
Re: [gdal-dev] Distributed processing
Sent by:
gdal-dev-bounces@lists.osgeo.org



John Donovan a ?crit :
> Hi,
> We currently have a stand-alone app that converts, mosaicks and scales
> GDAL-supported images to a proprietary format. It works well, but we
> handle tens of thousands of source files at a time, which can slow the
> process down to a crawl.
>
> So we're investigating parallelising this process over several machines,
> and I was wondering if anyone has any experience of this that they'd be
> willing to share? It's still early days yet, so we're open to all
> suggestions.
>
> Regards,
> John Donovan - Programmer, Virtalis Ltd.
>
> ______________________________________________________________________
> This email has been scanned for Virtalis Ltd by the MessageLabs Email 
Security System. 
______________________________________________________________________
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
Personally, I create Makefile and use distmake for the distribution 
purpose.

Regards
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090617/2b50e93c/attachment.html
From bclay at ball.com  Wed Jun 17 14:59:24 2009
From: bclay at ball.com (Clay, Bruce)
Date: Wed Jun 17 14:59:57 2009
Subject: [gdal-dev] GDAL/ArcObjects based app crashes with newer GDAL
	versions (was How to delete shapefile)
In-Reply-To: <4A3924AD.3040301@loskot.net>
References: <C482FF98AE985A47B8C982FD429C9E3402F5A6F5@daytonmsg2k3.AERO.BALL.COM>	<4A382B4D.8030103@pobox.com>
	<C482FF98AE985A47B8C982FD429C9E3402F5A7B4@daytonmsg2k3.AERO.BALL.COM>
	<4A39039A.8030504@loskot.net>
	<C482FF98AE985A47B8C982FD429C9E3402F5A7E1@daytonmsg2k3.AERO.BALL.COM>
	<4A3924AD.3040301@loskot.net>
Message-ID: <C482FF98AE985A47B8C982FD429C9E3402F5A886@daytonmsg2k3.AERO.BALL.COM>

Mateusz:

Yes that is the case.  The same application works fine with GDAL 1.5.4
but not with any newer version.

I am beginning to suspect SDE / GDAL interaction.  I think SDE uses GDAL
1.4.  My GDAL library is built with SDE support and I am linking in
ArcObjects libraries to my application.  I am linking to the GDAL static
library when the crash occurs.  If I try to link to the gdal_i.lib then
the program does not crash but it does not let me step into any of the
methods even though it is a debug library and no GDAL functions work.

You mentioned "configuration".  Does GDAL 1.6 and new code require some
configuration on Windows XP that was not required before?

Bruce


-----Original Message-----
From: Mateusz Loskot [mailto:mateusz@loskot.net] 
Sent: Wednesday, June 17, 2009 1:15 PM
To: Clay, Bruce
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] How to delete shapefile

Clay, Bruce wrote:
> Mateusz:
>   Thanks for your reply.  Unfortunately I can not get far enough to do
> that.  The crash is occurring down stream from OGRRegisterAll.  That
is
> to say, the last call in my code space before the crash is
> OGRRegisterAll. I can not get OGR initialized to be able to open a
data
> source.

Bruce,

Are you saying that you are unable to run this simple program
successfully?

#include "ogrsf_frmts.h"
int main()
{
     OGRRegisterAll();
}

If you indeed can not run it, it probably means your GDAL installation
is not configured properly or broken.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net



This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
From even.rouault at mines-paris.org  Wed Jun 17 15:32:34 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jun 17 15:32:45 2009
Subject: [gdal-dev] GDAL/ArcObjects based app crashes with newer GDAL
	versions (was How to delete shapefile)
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E3402F5A886@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E3402F5A6F5@daytonmsg2k3.AERO.BALL.COM>
	<4A3924AD.3040301@loskot.net>
	<C482FF98AE985A47B8C982FD429C9E3402F5A886@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <200906172132.34996.even.rouault@mines-paris.org>

I'm not familiar at all with SDE and Windows subtelties, so my comment might 
be unrelevant. But the following statements are at least universally true :
* if your application uses GDAL/OGR C++ API, you must recompile it against 
headers of newer GDAL version as C++ ABI changes from 1.x to 1.y (contrary to 
C API). Just relinking will not be sufficient.
* for same reason, if you try to load GDAL plugins compiled with an older 
version into a different GDAL version, you'll get crashes. Some checks have 
been introduced starting with GDAL 1.5.0 into plugin code to detect those 
situations and error out properly.
* if your application links directly or indirectly with several copy of GDAL 
library at the same time, it will likely not work too

Le Wednesday 17 June 2009 20:59:24 Clay, Bruce, vous avez ?crit?:
> Mateusz:
>
> Yes that is the case.  The same application works fine with GDAL 1.5.4
> but not with any newer version.
>
> I am beginning to suspect SDE / GDAL interaction.  I think SDE uses GDAL
> 1.4.  My GDAL library is built with SDE support and I am linking in
> ArcObjects libraries to my application.  I am linking to the GDAL static
> library when the crash occurs.  If I try to link to the gdal_i.lib then
> the program does not crash but it does not let me step into any of the
> methods even though it is a debug library and no GDAL functions work.
>
> You mentioned "configuration".  Does GDAL 1.6 and new code require some
> configuration on Windows XP that was not required before?
>
> Bruce
>
>
> -----Original Message-----
> From: Mateusz Loskot [mailto:mateusz@loskot.net]
> Sent: Wednesday, June 17, 2009 1:15 PM
> To: Clay, Bruce
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] How to delete shapefile
>
> Clay, Bruce wrote:
> > Mateusz:
> >   Thanks for your reply.  Unfortunately I can not get far enough to do
> > that.  The crash is occurring down stream from OGRRegisterAll.  That
>
> is
>
> > to say, the last call in my code space before the crash is
> > OGRRegisterAll. I can not get OGR initialized to be able to open a
>
> data
>
> > source.
>
> Bruce,
>
> Are you saying that you are unable to run this simple program
> successfully?
>
> #include "ogrsf_frmts.h"
> int main()
> {
>      OGRRegisterAll();
> }
>
> If you indeed can not run it, it probably means your GDAL installation
> is not configured properly or broken.
>
> Best regards,


From Shawn.Gong at drdc-rddc.gc.ca  Wed Jun 17 17:17:42 2009
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Wed Jun 17 17:17:49 2009
Subject: [gdal-dev] python CreateCopy just one band 
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E26E98F@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

I use these codes for CreateCopy() 
    src_ds = gdal.Open( src_filename )
    dst_ds = driver.CreateCopy( dst_filename, src_ds, 0 )


If the src_ds has two bands and my dst_ds has only one band, is there a
way to CreateCopy just one band? Or is there a way to remove bands in
Gdal Python?


thanks,
Shawn



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090617/8efa8934/attachment.html
From even.rouault at mines-paris.org  Wed Jun 17 17:53:07 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jun 17 17:53:17 2009
Subject: [gdal-dev] python CreateCopy just one band
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E26E98F@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E26E98F@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <200906172353.08229.even.rouault@mines-paris.org>

Le Wednesday 17 June 2009 23:17:42 Gong, Shawn (Contractor), vous avez ?crit?:
> hi list,
>
> I use these codes for CreateCopy()
>     src_ds = gdal.Open( src_filename )
>     dst_ds = driver.CreateCopy( dst_filename, src_ds, 0 )
>
>
> If the src_ds has two bands and my dst_ds has only one band, is there a
> way to CreateCopy just one band?

No, not directly. Not even in C/C++ GDAL

> Or is there a way to remove bands in 
> Gdal Python?

No, not even in C/C++ GDAL

>
>

But... you could create a VRT file that just references one band of your 
source raster and use CreateCopy from it. Below I've written a sample script 
that should do what you want to do. The vrt_xml has been deduced by observing 
the output of "gdal_translate -of VRT -b 1 rgbsmall.tif rgbsmall_red.vrt" and 
generalizing it a bit. It does the basic stuff (copy georeferencing and pixel 
values), but it should be improved if you want to copy metadata, color table, 
etc

#!/usr/bin/python

import gdal

src_filename = "rgbsmall.tif"
dst_filename = "rgbsmall_red.tif"
band_list = [1]

src_ds = gdal.Open( src_filename )
xsize = src_ds.RasterXSize
ysize = src_ds.RasterYSize
gt = src_ds.GetGeoTransform()
srs = src_ds.GetProjectionRef()

vrt_xml = '''<VRTDataset rasterXSize="%d" rasterYSize="%d">
    <SRS>%s</SRS>
    <GeoTransform>%f, %f, %f, %f, %f, %f</GeoTransform>''' % \
     (xsize, ysize, gdal.EscapeString(srs, scheme = gdal.CPLES_XML), \
      gt[0], gt[1], gt[2], gt[3], gt[4], gt[5])

dst_band = 1
for src_band in band_list:
    data_type = src_ds.GetRasterBand(src_band).DataType
    data_type_name = gdal.GetDataTypeName(data_type)

    vrt_xml = vrt_xml + '''
    <VRTRasterBand dataType="%s" band="%d">
        <SimpleSource>
        <SourceFilename relativeToVRT="1">%s</SourceFilename>
        <SourceBand>%d</SourceBand>
        <SrcRect xOff="0" yOff="0" xSize="%d" ySize="%d"/>
        <DstRect xOff="0" yOff="0" xSize="%d" ySize="%d"/>
        </SimpleSource>
    </VRTRasterBand>''' % \
    (data_type_name, dst_band, src_filename, src_band, \
     xsize, ysize, xsize, ysize)

    dst_band = dst_band + 1

vrt_xml = vrt_xml + '''
</VRTDataset>'''

vrt_ds = gdal.Open(vrt_xml)
driver = gdal.GetDriverByName('GTiff')
dst_ds = driver.CreateCopy( dst_filename, vrt_ds )

> thanks,
> Shawn


From even.rouault at mines-paris.org  Wed Jun 17 18:11:02 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jun 17 18:11:11 2009
Subject: Fwd: RE: [gdal-dev] GDAL/ArcObjects based app crashes with newer GDAL
	versions (was How to delete shapefile)
Message-ID: <200906180011.02325.even.rouault@mines-paris.org>

Forwarding to the list as others might be able to help you. No more idea on my 
side.
-------------- next part --------------
An embedded message was scrubbed...
From: "Clay, Bruce" <bclay@ball.com>
Subject: RE: [gdal-dev] GDAL/ArcObjects based app crashes with newer GDAL
	versions (was How to delete shapefile)
Date: Wed, 17 Jun 2009 17:42:50 -0400
Size: 7987
Url: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090618/8f0ac951/attachment.mht
From lucafasano at interfree.it  Thu Jun 18 04:09:27 2009
From: lucafasano at interfree.it (Luca Fasano)
Date: Thu Jun 18 04:10:59 2009
Subject: [gdal-dev] [gdal Python] Exceptions not reset correctly if
 gdal.UseExceptions() is used
Message-ID: <1245312567.3592.14.camel@fasano-Linux>

Hi all,
I suspect there is a bug in gdal.UseExceptions() in python binding. 
I noticed that if a RuntimeError has been generated, following gdal
instructions *raise the same exception*.
It seems that a gdal.ErrorReset() is necessary to reset it.
An example with ipython:

In [2]: from osgeo import gdal

In [3]: gdal.UseExceptions()

In [4]: dataset = gdal.Open('./filename.wrongformat')
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call
last)

/home/fasano/Desktop/test/<ipython console> in <module>()

RuntimeError: `./filename.wrongformat' not recognised as a supported
file format.


In [5]: gdal.GetCacheMax()
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call
last)

/home/fasano/Desktop/test/<ipython console> in <module>()

RuntimeError: `./filename.wrongformat' not recognised as a supported
file format.


In [6]: gdal.ErrorReset()

In [7]: gdal.GetCacheMax()
Out[7]: 41943040
 

(My gdal version is 1.5.4)

From nbarker at ittvis.com  Thu Jun 18 11:30:56 2009
From: nbarker at ittvis.com (Norman Barker)
Date: Thu Jun 18 11:58:27 2009
Subject: [gdal-dev] rfc 24 - jpip
Message-ID: <B1B624F7C110834B96594065A74F3A540D01663D@gemini.rsinc.com>

Hi

 

http://trac.osgeo.org/gdal/wiki/rfc24_progressive_data_support

 

and the code at 

 

http://svn.osgeo.org/gdal/sandbox/normanb/

 

has been available for some time without any significant comments, are
we at a point to vote on this RFC and if not then what needs to be done?

 

I would like to see JPIP as a format driver within the GDAL trunk, let
me know if you have any comments or any code changes.

 

Thanks,

 

Norman

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090618/2eb9151a/attachment-0001.html
From joelodom at gmail.com  Thu Jun 18 12:31:20 2009
From: joelodom at gmail.com (Joel Odom)
Date: Thu Jun 18 12:31:22 2009
Subject: [gdal-dev] Setting GDAL Http Fetcher
Message-ID: <d422b4500906180931q5dba64d3o50efe4c8b4e9c257@mail.gmail.com>

Can I programatically change the http fetcher that GDAL uses for WMS without
recompiling GDAL?  Thanks!

-- 
http://giscoder.blogspot.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090618/481368f1/attachment.html
From lran at unc.edu  Thu Jun 18 12:17:35 2009
From: lran at unc.edu (Limei Ran)
Date: Thu Jun 18 12:50:24 2009
Subject: [gdal-dev] Errors in compiling GDAL on a 64bits Linux
Message-ID: <20090618121735.p2x6kpb5wk8sokkk@webmail4.isis.unc.edu>


Hi:

I am compiling GDAL library on a 64bits Linux Server for our 
applications (we compiled correctly on a 32bits Linux Server).  But, I 
ran into errors in compiling GDAL on the 64bits Linux.  Could you check 
for me to see how I can solve the problem?

I configured it using:
./configure
--prefix=/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/gdal-1.6.1/local
--with-static-proj4=/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/proj-4.6.1/local --with-hdf5=/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/hdf5-1.8.3/local 
--with-libtiff=internal

Then, I type make and got the following error message after a long compiling:
=========================
...
libtool: link: warning: library
`/afs/isis.unc.edu/pkg/oracle-1020/client//lib/libexpat.la' was moved.
libtool: link: creating GNU ld script: .libs/libgdal.la.lnkscript
libtool: link: g++ -shared -nostdlib
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../lib64/crti.o
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/crtbeginS.o 
.libs/libgdal.la.lnkscript  -Wl,-rpath
-Wl,/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/proj-4.6.1/local/lib
-Wl,-rpath -Wl,/afs/isis.unc.edu/pkg/oracle-1020/client//lib -Wl,-rpath
-Wl,/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/hdf5-1.8.3/local/lib
-Wl,-rpath 
-Wl,/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/szip-2.1/local/lib
-Wl,-rpath
-Wl,/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/proj-4.6.1/local/lib
-Wl,-rpath -Wl,/afs/isis.unc.edu/pkg/oracle-1020/client//lib -Wl,-rpath
-Wl,/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/hdf5-1.8.3/local/lib
-Wl,-rpath 
-Wl,/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/szip-2.1/local/lib
-L/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/proj-4.6.1/local/lib
/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/proj-4.6.1/local/lib/libproj.so
-lsqlite3 -L/afs/isis.unc.edu/pkg/oracle-1020/client//lib -lclntsh 
-lnnz10 -L/usr/lib
/afs/isis.unc.edu/pkg/oracle-1020/client//lib/libexpat.so
-L/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/hdf5-1.8.3/local/lib
/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/hdf5-1.8.3/local/lib/libhdf5.so
-L/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/szip-2.1/local/lib
/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/szip-2.1/local/lib/libsz.so 
-lgif
-ljpeg -lpng -lz -lrt -ldl -L/usr/lib/gcc/x86_64-redhat-linux/4.1.2
-L/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../lib64 -L/lib/../lib64
-L/usr/lib/../lib64 -lstdc++ -lm -lc -lgcc_s
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/crtendS.o
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../lib64/crtn.o         
-Wl,-soname
-Wl,libgdal.so.1 -o .libs/libgdal.so.1.13.1
/afs/isis.unc.edu/pkg/oracle-1020/client//lib/libexpat.so: could not 
read symbols: File
in wrong format
collect2: ld returned 1 exit status
make[1]: *** [libgdal.la] Error 1
make[1]: Leaving directory
`/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/gdal-1.6.1'
make: *** [check-lib] Error 2
===================================

Thank you,


Limei


From Shawn.Gong at drdc-rddc.gc.ca  Thu Jun 18 13:59:14 2009
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Thu Jun 18 13:59:22 2009
Subject: [gdal-dev] Errors in compiling GDAL on a 64bits Linux
In-Reply-To: <20090618121735.p2x6kpb5wk8sokkk@webmail4.isis.unc.edu>
References: <20090618121735.p2x6kpb5wk8sokkk@webmail4.isis.unc.edu>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E26E995@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Hi Limei

I used the following to build GDAL library on a 64-bit Linux Server.

setenv CFLAGS "-fPIC"

./configure --prefix=/home/sgong/build_openev2/dist --with-png=internal
--with-libtiff=internal --with-gif=internal --with-geotiff=internal
--with-libz=/home/sgong/build_openev2/dist
--with-jpeg=/home/sgong/build_openev2/dist
--with-netcdf=/home/sgong/build_openev2/dist
--with-hdf4=/home/sgong/build_openev2/dist
--with-hdf5=/home/sgong/build_openev2/dist --without-ogdi
--without-jasper --without-ecw --without-curl --without-expat
--without-dwgdirect --without-mrsid --without-jp2mrsid --without-mysql
--without-odbc --without-grib --without-pg --with-python

basically, try to exclude as many as possible (like curl, expat, ogdi)

thanks,
Shawn


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Limei Ran
Sent: Thursday, June 18, 2009 12:18 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Errors in compiling GDAL on a 64bits Linux


Hi:

I am compiling GDAL library on a 64bits Linux Server for our 
applications (we compiled correctly on a 32bits Linux Server).  But, I 
ran into errors in compiling GDAL on the 64bits Linux.  Could you check 
for me to see how I can solve the problem?

I configured it using:
./configure
--prefix=/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/gdal-1.6
.1/local
--with-static-proj4=/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/li
bs/proj-4.6.1/local
--with-hdf5=/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/hdf5-
1.8.3/local 
--with-libtiff=internal

Then, I type make and got the following error message after a long
compiling:
=========================
...
libtool: link: warning: library
`/afs/isis.unc.edu/pkg/oracle-1020/client//lib/libexpat.la' was moved.
libtool: link: creating GNU ld script: .libs/libgdal.la.lnkscript
libtool: link: g++ -shared -nostdlib
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../lib64/crti.o
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/crtbeginS.o 
.libs/libgdal.la.lnkscript  -Wl,-rpath
-Wl,/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/proj-4.6.1/lo
cal/lib
-Wl,-rpath -Wl,/afs/isis.unc.edu/pkg/oracle-1020/client//lib -Wl,-rpath
-Wl,/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/hdf5-1.8.3/lo
cal/lib
-Wl,-rpath 
-Wl,/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/szip-2.1/loca
l/lib
-Wl,-rpath
-Wl,/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/proj-4.6.1/lo
cal/lib
-Wl,-rpath -Wl,/afs/isis.unc.edu/pkg/oracle-1020/client//lib -Wl,-rpath
-Wl,/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/hdf5-1.8.3/lo
cal/lib
-Wl,-rpath 
-Wl,/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/szip-2.1/loca
l/lib
-L/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/proj-4.6.1/loca
l/lib
/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/proj-4.6.1/local/
lib/libproj.so
-lsqlite3 -L/afs/isis.unc.edu/pkg/oracle-1020/client//lib -lclntsh 
-lnnz10 -L/usr/lib
/afs/isis.unc.edu/pkg/oracle-1020/client//lib/libexpat.so
-L/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/hdf5-1.8.3/loca
l/lib
/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/hdf5-1.8.3/local/
lib/libhdf5.so
-L/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/szip-2.1/local/
lib
/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/szip-2.1/local/li
b/libsz.so 
-lgif
-ljpeg -lpng -lz -lrt -ldl -L/usr/lib/gcc/x86_64-redhat-linux/4.1.2
-L/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../lib64
-L/lib/../lib64
-L/usr/lib/../lib64 -lstdc++ -lm -lc -lgcc_s
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/crtendS.o
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../lib64/crtn.o         
-Wl,-soname
-Wl,libgdal.so.1 -o .libs/libgdal.so.1.13.1
/afs/isis.unc.edu/pkg/oracle-1020/client//lib/libexpat.so: could not 
read symbols: File
in wrong format
collect2: ld returned 1 exit status
make[1]: *** [libgdal.la] Error 1
make[1]: Leaving directory
`/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/gdal-1.6.1'
make: *** [check-lib] Error 2
===================================

Thank you,


Limei


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From Craig.Dillabough at AGR.GC.CA  Thu Jun 18 15:50:25 2009
From: Craig.Dillabough at AGR.GC.CA (Dillabough, Craig)
Date: Thu Jun 18 15:50:28 2009
Subject: [gdal-dev] gdaladdo
Message-ID: <8EA33237DDDB244E860ADDE976124AE50202CBC7@ONOTTAXMS2.AGR.GC.CA>

Hi,
I am trying to tile and create overviews for a TIFF image dataset I
have, but I keep getting strange errors when attempting to add
overviews. 

1st I created a copy of the original image (same format and all, but
wanted to keep the original around in case I had problems).

>gdal_translate -ot Float32 -of GTiff Av.MaxNDVI.2000.2009.Week.19.tif
trans/week19.tif
>cd trans

Then I tiled the image (I guess I could have done this in one step by
adding -co "TILED=YES" to the previous step):

>gdal_translate -ot Float32 -of GTiff -co "TILED=YES" week19.tif
week19_tiled.tif

Then I tried to add the overviews:

> gdaladdo -r average -ro week19_tiled.tif 2 4 8 16

I get the following (I've added some whitespace for clarity):
0...10...20...30...40...50...60...70...
Warning 1: TIFFReadDirectory:week19_tiled.tif.ovr: Wrong
"StripByteCounts" field, 
ignoring and calculating from imagelength
Warning 1: TIFFReadDirectory:week19_tiled.tif.ovr: Wrong
"StripByteCounts" field, 
ignoring and calculating from imagelength
ERROR 1: week19_tiled.tif.ovr:DumpModeDecode: Not enough data for
scanline 0
ERROR 1: TIFFReadEncodedTile() failed.

ERROR 1: IReadBlock failed at X offset 0, Y offset 3
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 3

I get effectively the same error when I run this without the -ro option.

Any idea's what is going wrong.

Regards,
Craig Dillabaugh


From chandra.kumar at flagstonere.bm  Thu Jun 18 15:50:28 2009
From: chandra.kumar at flagstonere.bm (Chandra Shekhar Kumar)
Date: Thu Jun 18 15:50:33 2009
Subject: [gdal-dev] Errors in compiling GDAL on a 64bits Linux
In-Reply-To: <20090618121735.p2x6kpb5wk8sokkk@webmail4.isis.unc.edu>
References: <20090618121735.p2x6kpb5wk8sokkk@webmail4.isis.unc.edu>
Message-ID: <1B507B19FF9C474C936493A7909007D0792DE7@hfxpdexc01.flagstonere.local>

>/afs/isis.unc.edu/pkg/oracle-1020/client//lib/libexpat.so: could not
>read symbols: File
>in wrong format
>collect2: ld returned 1 exit status
>make[1]: *** [libgdal.la] Error 1
[Chandra ] it looks like it is getting linked against 32-bit libexpat.so
Can you check the same by "file <path-to-libexpat>/libexpat.so" and let
me know the result of the same ?

**********************************************************************
This communication contains information which is confidential and may also be legally privileged. It is for the exclusive use of the intended recipient(s). If you are not the intended recipient(s), disclosure, copying, distribution, or other use of, or action taken or omitted to be taken in reliance upon, this communication or the information in it is prohibited and maybe unlawful. If you have received this communication in error please notify the sender by return email, delete it from your system and destroy any copies.
**********************************************************************

From even.rouault at mines-paris.org  Thu Jun 18 16:11:03 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jun 18 16:11:16 2009
Subject: [gdal-dev] rfc 24 - jpip
In-Reply-To: <B1B624F7C110834B96594065A74F3A540D01663D@gemini.rsinc.com>
References: <B1B624F7C110834B96594065A74F3A540D01663D@gemini.rsinc.com>
Message-ID: <200906182211.04827.even.rouault@mines-paris.org>

Norman,

Sorry for not having given feedback in a more timely way, but the amount of 
changes didn't encourage ;-)

Anyway, here are my comments & questions on the changes done in 
http://trac.osgeo.org/gdal/changeset/16796/sandbox/normanb:

* frmts/jp2kak/jp2kakdataset.cpp : I'm not sure if we must touch this driver. 
I understand that you want to redirect open calls with jpip:// to the 
jpipkakdataset.cpp but this could be disruptive for existing applications. 
Anyway, you should still allow http:// and https:// to be opened by JP2KAK.
* frmts/jp2kak/makefile.vc : should be reverted probably ?
* frmts/makefile.vc : FRMT_jpipkak is unconditionnaly defined. Should probably 
be defined conditionnaly like JP2KAK driver with a dependency on KAKADU and 
CURL.
* gcore/gdal.h :
      - the meaning of each of the 4 GARIO_* values should be Doxygen 
documented
      - the naming of the C mappings of GDALAsyncRasterIO do not look very 
appropriate : GDALGetGDALDataset, GDALGetXOffset, GDALGetYOffset, 
GDALGetXSize, GDALGetYSize, GDALGetBuffer, ... Much too general. They could 
apply to a GDALDataset, so you would need some prefix, like GDALAIO : 
GDALAIOGetDataset(), GDALAIOGetXOffset(), ...
      - I'm wondering if they are not too many of those getter methods. We 
could also have a single method that would update them in a C structure to 
avoid method proliferation. I've no strong opinion about this though.
      - what is the meaning of GDALGetNDataRead() ?
* gcore/gdal_priv.h. What is the justification of the change in 
IsInitialized() ?
* gcore/gdaldataset.cpp :
  - The default implementation of the methods should probably issue a 
CPLError(CE_Failure, CPLE_NotSupported, "Dataset does not support the foo() 
method")
  - All those methods should be carefully documented with Doxygen.
* nmake.opt : your local changes -> should be reverted
* port/cpl_http.cpp : the http_persistent_handle object is global but not 
protected by any mutex mechanism --> thread unsafe if two people use your 
driver from two concurrent threads. Unless you protect it by a lock in your 
driver, but it is a bit messy. A nicer design would be to add a 
CPLHTTPCreateHandle() that would return a curl_easy_init, a 
CPLHTTPFetchWithHandle() that would use that handle, and a 
CPLHTTPDestroyHandle() to clean it. That way we don't need a global variable 
at all in cpl_http.cpp
* port/makefile.vc : What is the justification of the change ?
* swig/include/cpl.i : should be reverted
* swig/include/ogr.i : should be reverted
* swig/java/* : should be reverted
* swig/python/extensions/* : should be reverted.
* swig/python/osgeo/* : should be reverted.
* sandbox/normanb/gdal/swig/java/apps/* : what are all those new files ? Looks 
like they should belong to the imageio-ext project I guess ?
* swig/include/python/gdal_python.i :  I don't understand this comment :  // 
if type is byte typeSize is GDT_Int32 (4) since these are packed into an int 
(BGRA).

On the API itself :
* is the following sequence allowed  ?
	h1 = ds->BeginAsyncRasterIO(...)
	h2 = ds->BeginAsyncRasterIO(...)
  or must h1 be closed before ?
  --> I don't know if is supported by the JPIPKAK driver, but even if it is 
not, should we allow it in the API spec ? exclude it ? leave the decision to 
each driver implementatation ? should be documented

* what is the locking policy of the LockBuffer() / UnlockBuffer() ? You've not 
implemented it in the JPIPKAK driver, but if we define the related functions, 
their precise semantics should be defined.

--> 2 possibilities :
	- we could completely remove them if the buffer is not touched by the driver 
except when GDALGetNextUpdatedRegion() is called. Advantage : no locking 
complexity exposed to the driver. Drawback : possible small loss of 
performance due to some extra buffer copying done in the driver.

	- or if we allow the driver to update the buffer outside of the context of a 
GDALGetNextUpdatedRegion() call, shouldn't they be used when the user wants 
to read from the buffer instead of using them to surround the call to 
GDALGetNextUpdatedRegion() (which should do the necessary locking itself).
      How would locking work with swig bindings ?

* unit of timeout in GetNextUpdatedRegion() : milliseconds ? 

* LockBuffer(int, int, int, int) looks complicated. I'm not sure how someone 
could implement that.

* I guess it is illegal to close a dataset while a BeginAsyncRasterIO() has 
not been terminated with EndAsyncRasterIO() ? should be documented

* we should add a metadata value at the driver level to indicate that a driver 
supports the AIO API. Something like
#define GDAL_DCAP_ASYNC_IO  "DCAP_ASYNC_IO" in gcore.h.

* the JPIP driver only supports AIO as it exposes 0 band. I guess this is OK. 
It could be later extended to support regular IO. 

* I'm wondering if we shouldn't standardize a few of the metadata item you 
currently return in the JPIP domain. I think any driver doing AIO would need 
to return the number of "bands" (JPIP_NCOMPS) and the prefered datatype/bit 
precision too (JPIP_SPRECISION). "COMPONENT_COUNT" and "SAMPLE_PRECISION" in 
a "AIO" domain ? Not sure about the JPIP_NRESOLUTIONLEVELS : equivalent to 
the notion of overviews for regular datasets ?
--> Calling code should ideally not need to be aware of the particularities of 
the driver. 

* stylistic remark : your changes are not always consistant with the general 
indentation of surrounding code. You should avoid using tab characters and 
use spaces instead (4 spacing for each indentation level)

* I hardly looked at jpipkakdataset.cpp. But this is just an 
implementation "detail" ;-) The more important is to design & define clearly 
the new API. 

That's all for now ! All of the above comments are done only from code review. 
Didn't/couldn't compile&test it.

Best regards,

Even

Le Thursday 18 June 2009 17:30:56 Norman Barker, vous avez ?crit?:
> Hi
>
>
>
> http://trac.osgeo.org/gdal/wiki/rfc24_progressive_data_support
>
>
>
> and the code at
>
>
>
> http://svn.osgeo.org/gdal/sandbox/normanb/
>
>
>
> has been available for some time without any significant comments, are
> we at a point to vote on this RFC and if not then what needs to be done?
>
>
>
> I would like to see JPIP as a format driver within the GDAL trunk, let
> me know if you have any comments or any code changes.
>
>
>
> Thanks,
>
>
>
> Norman


From nbarker at ittvis.com  Thu Jun 18 16:16:21 2009
From: nbarker at ittvis.com (Norman Barker)
Date: Thu Jun 18 16:16:27 2009
Subject: [gdal-dev] rfc 24 - jpip
In-Reply-To: <200906182211.04827.even.rouault@mines-paris.org>
References: <B1B624F7C110834B96594065A74F3A540D01663D@gemini.rsinc.com>
	<200906182211.04827.even.rouault@mines-paris.org>
Message-ID: <B1B624F7C110834B96594065A74F3A540D016641@gemini.rsinc.com>

Even,

Thank you! I was looking for such a review.

I will wait a few days for more comments and then I will go through you suggestions and change the code as required.

Thanks,

Norman

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Even Rouault
Sent: Thursday, June 18, 2009 2:11 PM
To: gdal-dev@lists.osgeo.org
Cc: Norman Barker
Subject: Re: [gdal-dev] rfc 24 - jpip

Norman,

Sorry for not having given feedback in a more timely way, but the amount of 
changes didn't encourage ;-)

Anyway, here are my comments & questions on the changes done in 
http://trac.osgeo.org/gdal/changeset/16796/sandbox/normanb:

* frmts/jp2kak/jp2kakdataset.cpp : I'm not sure if we must touch this driver. 
I understand that you want to redirect open calls with jpip:// to the 
jpipkakdataset.cpp but this could be disruptive for existing applications. 
Anyway, you should still allow http:// and https:// to be opened by JP2KAK.
* frmts/jp2kak/makefile.vc : should be reverted probably ?
* frmts/makefile.vc : FRMT_jpipkak is unconditionnaly defined. Should probably 
be defined conditionnaly like JP2KAK driver with a dependency on KAKADU and 
CURL.
* gcore/gdal.h :
      - the meaning of each of the 4 GARIO_* values should be Doxygen 
documented
      - the naming of the C mappings of GDALAsyncRasterIO do not look very 
appropriate : GDALGetGDALDataset, GDALGetXOffset, GDALGetYOffset, 
GDALGetXSize, GDALGetYSize, GDALGetBuffer, ... Much too general. They could 
apply to a GDALDataset, so you would need some prefix, like GDALAIO : 
GDALAIOGetDataset(), GDALAIOGetXOffset(), ...
      - I'm wondering if they are not too many of those getter methods. We 
could also have a single method that would update them in a C structure to 
avoid method proliferation. I've no strong opinion about this though.
      - what is the meaning of GDALGetNDataRead() ?
* gcore/gdal_priv.h. What is the justification of the change in 
IsInitialized() ?
* gcore/gdaldataset.cpp :
  - The default implementation of the methods should probably issue a 
CPLError(CE_Failure, CPLE_NotSupported, "Dataset does not support the foo() 
method")
  - All those methods should be carefully documented with Doxygen.
* nmake.opt : your local changes -> should be reverted
* port/cpl_http.cpp : the http_persistent_handle object is global but not 
protected by any mutex mechanism --> thread unsafe if two people use your 
driver from two concurrent threads. Unless you protect it by a lock in your 
driver, but it is a bit messy. A nicer design would be to add a 
CPLHTTPCreateHandle() that would return a curl_easy_init, a 
CPLHTTPFetchWithHandle() that would use that handle, and a 
CPLHTTPDestroyHandle() to clean it. That way we don't need a global variable 
at all in cpl_http.cpp
* port/makefile.vc : What is the justification of the change ?
* swig/include/cpl.i : should be reverted
* swig/include/ogr.i : should be reverted
* swig/java/* : should be reverted
* swig/python/extensions/* : should be reverted.
* swig/python/osgeo/* : should be reverted.
* sandbox/normanb/gdal/swig/java/apps/* : what are all those new files ? Looks 
like they should belong to the imageio-ext project I guess ?
* swig/include/python/gdal_python.i :  I don't understand this comment :  // 
if type is byte typeSize is GDT_Int32 (4) since these are packed into an int 
(BGRA).

On the API itself :
* is the following sequence allowed  ?
	h1 = ds->BeginAsyncRasterIO(...)
	h2 = ds->BeginAsyncRasterIO(...)
  or must h1 be closed before ?
  --> I don't know if is supported by the JPIPKAK driver, but even if it is 
not, should we allow it in the API spec ? exclude it ? leave the decision to 
each driver implementatation ? should be documented

* what is the locking policy of the LockBuffer() / UnlockBuffer() ? You've not 
implemented it in the JPIPKAK driver, but if we define the related functions, 
their precise semantics should be defined.

--> 2 possibilities :
	- we could completely remove them if the buffer is not touched by the driver 
except when GDALGetNextUpdatedRegion() is called. Advantage : no locking 
complexity exposed to the driver. Drawback : possible small loss of 
performance due to some extra buffer copying done in the driver.

	- or if we allow the driver to update the buffer outside of the context of a 
GDALGetNextUpdatedRegion() call, shouldn't they be used when the user wants 
to read from the buffer instead of using them to surround the call to 
GDALGetNextUpdatedRegion() (which should do the necessary locking itself).
      How would locking work with swig bindings ?

* unit of timeout in GetNextUpdatedRegion() : milliseconds ? 

* LockBuffer(int, int, int, int) looks complicated. I'm not sure how someone 
could implement that.

* I guess it is illegal to close a dataset while a BeginAsyncRasterIO() has 
not been terminated with EndAsyncRasterIO() ? should be documented

* we should add a metadata value at the driver level to indicate that a driver 
supports the AIO API. Something like
#define GDAL_DCAP_ASYNC_IO  "DCAP_ASYNC_IO" in gcore.h.

* the JPIP driver only supports AIO as it exposes 0 band. I guess this is OK. 
It could be later extended to support regular IO. 

* I'm wondering if we shouldn't standardize a few of the metadata item you 
currently return in the JPIP domain. I think any driver doing AIO would need 
to return the number of "bands" (JPIP_NCOMPS) and the prefered datatype/bit 
precision too (JPIP_SPRECISION). "COMPONENT_COUNT" and "SAMPLE_PRECISION" in 
a "AIO" domain ? Not sure about the JPIP_NRESOLUTIONLEVELS : equivalent to 
the notion of overviews for regular datasets ?
--> Calling code should ideally not need to be aware of the particularities of 
the driver. 

* stylistic remark : your changes are not always consistant with the general 
indentation of surrounding code. You should avoid using tab characters and 
use spaces instead (4 spacing for each indentation level)

* I hardly looked at jpipkakdataset.cpp. But this is just an 
implementation "detail" ;-) The more important is to design & define clearly 
the new API. 

That's all for now ! All of the above comments are done only from code review. 
Didn't/couldn't compile&test it.

Best regards,

Even

Le Thursday 18 June 2009 17:30:56 Norman Barker, vous avez ?crit?:
> Hi
>
>
>
> http://trac.osgeo.org/gdal/wiki/rfc24_progressive_data_support
>
>
>
> and the code at
>
>
>
> http://svn.osgeo.org/gdal/sandbox/normanb/
>
>
>
> has been available for some time without any significant comments, are
> we at a point to vote on this RFC and if not then what needs to be done?
>
>
>
> I would like to see JPIP as a format driver within the GDAL trunk, let
> me know if you have any comments or any code changes.
>
>
>
> Thanks,
>
>
>
> Norman


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Thu Jun 18 16:18:12 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jun 18 16:18:21 2009
Subject: [gdal-dev] gdaladdo
In-Reply-To: <8EA33237DDDB244E860ADDE976124AE50202CBC7@ONOTTAXMS2.AGR.GC.CA>
References: <8EA33237DDDB244E860ADDE976124AE50202CBC7@ONOTTAXMS2.AGR.GC.CA>
Message-ID: <200906182218.12623.even.rouault@mines-paris.org>

Craig,

This should work.

Are you using an older GDAL version ? Are you using external libtiff ?

If so, try again with newer GDAL and internal libtiff (although I wouldn't 
older GDAL to fail on a simple case like yours that doesn't involve TIFF 
compression)

Le Thursday 18 June 2009 21:50:25 Dillabough, Craig, vous avez ?crit?:
> Hi,
> I am trying to tile and create overviews for a TIFF image dataset I
> have, but I keep getting strange errors when attempting to add
> overviews.
>
> 1st I created a copy of the original image (same format and all, but
> wanted to keep the original around in case I had problems).
>
> >gdal_translate -ot Float32 -of GTiff Av.MaxNDVI.2000.2009.Week.19.tif
>
> trans/week19.tif
>
> >cd trans
>
> Then I tiled the image (I guess I could have done this in one step by
>
> adding -co "TILED=YES" to the previous step):
> >gdal_translate -ot Float32 -of GTiff -co "TILED=YES" week19.tif
>
> week19_tiled.tif
>
> Then I tried to add the overviews:
> > gdaladdo -r average -ro week19_tiled.tif 2 4 8 16
>
> I get the following (I've added some whitespace for clarity):
> 0...10...20...30...40...50...60...70...
> Warning 1: TIFFReadDirectory:week19_tiled.tif.ovr: Wrong
> "StripByteCounts" field,
> ignoring and calculating from imagelength
> Warning 1: TIFFReadDirectory:week19_tiled.tif.ovr: Wrong
> "StripByteCounts" field,
> ignoring and calculating from imagelength
> ERROR 1: week19_tiled.tif.ovr:DumpModeDecode: Not enough data for
> scanline 0
> ERROR 1: TIFFReadEncodedTile() failed.
>
> ERROR 1: IReadBlock failed at X offset 0, Y offset 3
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 3
>
> I get effectively the same error when I run this without the -ro option.
>
> Any idea's what is going wrong.
>
> Regards,
> Craig Dillabaugh
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From nsavard at mapgears.com  Thu Jun 18 16:18:28 2009
From: nsavard at mapgears.com (Normand Savard)
Date: Thu Jun 18 16:18:30 2009
Subject: [gdal-dev] Build OGR with Oracle support
In-Reply-To: <4A380356.4070804@loskot.net>
References: <4A37FC3F.5020708@mapgears.com> <4A380356.4070804@loskot.net>
Message-ID: <4A3AA114.6070701@mapgears.com>

Mateusz Loskot wrote:
>
>
> ./configure generates a log file called config.log.
> If something goes wrong, there should be some diagnostic in this file.
> It would be helpful if you could share it, for instance, here:
>
> http://pastebin.com/
>
> This will help to find what's the problem.
>
>   
Maateusz,

You were right, this help a lot.  I succeeded to build OGR with Oracle 
10g and 11g but for those who may come on a similar issue in the future, 
I'm posting the process I went through.

I downloaded
oracle-instantclient-basic-10.2.0.4-1.i386.zip (library)
oracle-instantclient-devel-10.2.0.4-1.i386.zip (headers)

or
instantclient-basic-linux32-11.1.0.7.zip (library)
instantclient-sdk-linux32-11.1.0.7.zip (headers)


As suggested I checked the config.log (see 1) and noticed that there was 
a link problem (-lclntsh).  I went to the instantclient directory to 
check for libclntsh.so, but it was not there.  So I added a link to 
libclntsh.so.11.1. 

I redid the configure and checked the config.log again (see 2).  I 
noticed that libnnz11.so library was not found.  I went to the 
instantclient directory but the library was present.  Since I use the 
fgs-dev environment the libraries are not in a traditional path so the 
linker could not find it.  To solve this issue, I added the path to 
where the library was installed to $LD_LIBRARY_PATH.  There was a 
problem with libaio.so.1 library.  For this particular issue I had to 
install libaio-dev on my system (Ubuntu:  apt-get install).

It works fine after that.

Thank you to both of you.

Norm



1)config.log
configure:23653: checking for Oracle OCI headers in 
/home/fgs/fgs-dev/built/ins\
tantclient_11_1/sdk/include
configure:23696: g++ -c -fPIC  -g -DDEBUG  
-I/home/fgs/fgs-dev/built/instantcli\
ent_11_1/sdk/include conftest.cpp >&5
configure:23702: $? = 0
configure:23715: result: yes
configure:23740: checking for Oracle OCI libraries in 
/home/fgs/fgs-dev/built/i\
nstantclient_11_1
configure:23743: result: norm: 
-L/home/fgs/fgs-dev/built/instantclient_11_1 -lc\
lntsh
configure:23745: result: norm: 
-I/home/fgs/fgs-dev/built/instantclient_11_1/sdk\
/include
configure:23781: g++ -o conftest -fPIC  -g -DDEBUG  
-I/home/fgs/fgs-dev/built/i\
nstantclient_11_1/sdk/include  
-L/home/fgs/fgs-dev/built/instantclient_11_1 -lc\
lntsh conftest.cpp -L/home/fgs/fgs-dev/built/jpeg 
-L/home/fgs/fgs-dev/built/jpe\
g/lib -ljpeg -L/home/fgs/fgs-dev/built/libgeotiff/lib -lgeotiff 
-L/home/fgs/fgs\
-dev/built/tiff/lib -ltiff -L/home/fgs/fgs-dev/built/libpng 
-L/home/fgs/fgs-dev\
/built/libpng/lib -lpng -lpq -L/home/fgs/fgs-dev/built/postgresql/lib 
-lpq -lz \
-L/home/fgs/fgs-dev/built/zlib -L/home/fgs/fgs-dev/built/zlib/lib  -lm 
-lrt -ld\
l  >&5
/usr/bin/ld: cannot find -lclntsh
collect2: ld returned 1 exit status
configure:23787: $? = 1
configure: failed program was:
|
|                 /* confdefs.h.  */
| #define PACKAGE_NAME ""
| #define PACKAGE_TARNAME ""






2) config.log

configure:23740: checking for Oracle OCI libraries in 
/home/fgs/fgs-dev/built/i\
nstantclient_11_1
configure:23743: result: norm: 
-L/home/fgs/fgs-dev/built/instantclient_11_1 -lc\
lntsh
configure:23745: result: norm: 
-I/home/fgs/fgs-dev/built/instantclient_11_1/sdk\
/include
configure:23781: g++ -o conftest -fPIC  -g -DDEBUG  
-I/home/fgs/fgs-dev/built/i\
nstantclient_11_1/sdk/include  
-L/home/fgs/fgs-dev/built/instantclient_11_1 -lc\
lntsh conftest.cpp -L/home/fgs/fgs-dev/built/jpeg 
-L/home/fgs/fgs-dev/built/jpe\
g/lib -ljpeg -L/home/fgs/fgs-dev/built/libgeotiff/lib -lgeotiff 
-L/home/fgs/fgs\
-dev/built/tiff/lib -ltiff -L/home/fgs/fgs-dev/built/libpng 
-L/home/fgs/fgs-dev\
/built/libpng/lib -lpng -lpq -L/home/fgs/fgs-dev/built/postgresql/lib 
-lpq -lz \
-L/home/fgs/fgs-dev/built/zlib -L/home/fgs/fgs-dev/built/zlib/lib  -lm 
-lrt -ld\
l  >&5
/usr/bin/ld: warning: libnnz11.so, needed by 
/home/fgs/fgs-dev/built/instantcli\
ent_11_1/libclntsh.so, not found (try using -rpath or -rpath-link)
/usr/bin/ld: warning: libaio.so.1, needed by 
/home/fgs/fgs-dev/built/instantcli\
ent_11_1/libclntsh.so, not found (try using -rpath or -rpath-link)
/home/fgs/fgs-dev/built/instantclient_11_1/libclntsh.so: undefined 
reference to\
 `nzos_ServiceWriteQueue'
/home/fgs/fgs-dev/built/instantclient_11_1/libclntsh.so: undefined 
reference to\
 `nzosCipherSpecToStr'
/home/fgs/fgs-dev/built/instantclient_11_1/libclntsh.so: undefined 
reference to\
 `C_SetCRLBER'

From ivan.lucena at pmldnet.com  Thu Jun 18 16:32:37 2009
From: ivan.lucena at pmldnet.com (Ivan)
Date: Thu Jun 18 16:31:57 2009
Subject: [gdal-dev] Build OGR with Oracle support
In-Reply-To: <4A3AA114.6070701@mapgears.com>
References: <4A37FC3F.5020708@mapgears.com> <4A380356.4070804@loskot.net>
	<4A3AA114.6070701@mapgears.com>
Message-ID: <4A3AA465.7080408@pmldnet.com>

Normand,

Just a quick complimentary reference:

"""Instant Client allows you to run your applications without installing the standard Oracle client 
or having an ORACLE_HOME. OCI, OCCI, Pro*C, ODBC, and JDBC applications work without modification, 
while using significantly less disk space than before. Even SQL*Plus can be used with Instant 
Client. No recompile, no hassle.""" [http://www.oracle.com/technology/tech/oci/instantclient/index.html]

But of course, running is one thing, compiling is another.

Regards,

Ivan

Normand Savard wrote:
> Mateusz Loskot wrote:
>>
>>
>> ./configure generates a log file called config.log.
>> If something goes wrong, there should be some diagnostic in this file.
>> It would be helpful if you could share it, for instance, here:
>>
>> http://pastebin.com/
>>
>> This will help to find what's the problem.
>>
>>   
> Maateusz,
> 
> You were right, this help a lot.  I succeeded to build OGR with Oracle 
> 10g and 11g but for those who may come on a similar issue in the future, 
> I'm posting the process I went through.
> 
> I downloaded
> oracle-instantclient-basic-10.2.0.4-1.i386.zip (library)
> oracle-instantclient-devel-10.2.0.4-1.i386.zip (headers)
> 
> or
> instantclient-basic-linux32-11.1.0.7.zip (library)
> instantclient-sdk-linux32-11.1.0.7.zip (headers)
> 
> 
> As suggested I checked the config.log (see 1) and noticed that there was 
> a link problem (-lclntsh).  I went to the instantclient directory to 
> check for libclntsh.so, but it was not there.  So I added a link to 
> libclntsh.so.11.1.
> I redid the configure and checked the config.log again (see 2).  I 
> noticed that libnnz11.so library was not found.  I went to the 
> instantclient directory but the library was present.  Since I use the 
> fgs-dev environment the libraries are not in a traditional path so the 
> linker could not find it.  To solve this issue, I added the path to 
> where the library was installed to $LD_LIBRARY_PATH.  There was a 
> problem with libaio.so.1 library.  For this particular issue I had to 
> install libaio-dev on my system (Ubuntu:  apt-get install).
> 
> It works fine after that.
> 
> Thank you to both of you.
> 
> Norm
> 
> 
> 
> 1)config.log
> configure:23653: checking for Oracle OCI headers in 
> /home/fgs/fgs-dev/built/ins\
> tantclient_11_1/sdk/include
> configure:23696: g++ -c -fPIC  -g -DDEBUG  
> -I/home/fgs/fgs-dev/built/instantcli\
> ent_11_1/sdk/include conftest.cpp >&5
> configure:23702: $? = 0
> configure:23715: result: yes
> configure:23740: checking for Oracle OCI libraries in 
> /home/fgs/fgs-dev/built/i\
> nstantclient_11_1
> configure:23743: result: norm: 
> -L/home/fgs/fgs-dev/built/instantclient_11_1 -lc\
> lntsh
> configure:23745: result: norm: 
> -I/home/fgs/fgs-dev/built/instantclient_11_1/sdk\
> /include
> configure:23781: g++ -o conftest -fPIC  -g -DDEBUG  
> -I/home/fgs/fgs-dev/built/i\
> nstantclient_11_1/sdk/include  
> -L/home/fgs/fgs-dev/built/instantclient_11_1 -lc\
> lntsh conftest.cpp -L/home/fgs/fgs-dev/built/jpeg 
> -L/home/fgs/fgs-dev/built/jpe\
> g/lib -ljpeg -L/home/fgs/fgs-dev/built/libgeotiff/lib -lgeotiff 
> -L/home/fgs/fgs\
> -dev/built/tiff/lib -ltiff -L/home/fgs/fgs-dev/built/libpng 
> -L/home/fgs/fgs-dev\
> /built/libpng/lib -lpng -lpq -L/home/fgs/fgs-dev/built/postgresql/lib 
> -lpq -lz \
> -L/home/fgs/fgs-dev/built/zlib -L/home/fgs/fgs-dev/built/zlib/lib  -lm 
> -lrt -ld\
> l  >&5
> /usr/bin/ld: cannot find -lclntsh
> collect2: ld returned 1 exit status
> configure:23787: $? = 1
> configure: failed program was:
> |
> |                 /* confdefs.h.  */
> | #define PACKAGE_NAME ""
> | #define PACKAGE_TARNAME ""
> 
> 
> 
> 
> 
> 
> 2) config.log
> 
> configure:23740: checking for Oracle OCI libraries in 
> /home/fgs/fgs-dev/built/i\
> nstantclient_11_1
> configure:23743: result: norm: 
> -L/home/fgs/fgs-dev/built/instantclient_11_1 -lc\
> lntsh
> configure:23745: result: norm: 
> -I/home/fgs/fgs-dev/built/instantclient_11_1/sdk\
> /include
> configure:23781: g++ -o conftest -fPIC  -g -DDEBUG  
> -I/home/fgs/fgs-dev/built/i\
> nstantclient_11_1/sdk/include  
> -L/home/fgs/fgs-dev/built/instantclient_11_1 -lc\
> lntsh conftest.cpp -L/home/fgs/fgs-dev/built/jpeg 
> -L/home/fgs/fgs-dev/built/jpe\
> g/lib -ljpeg -L/home/fgs/fgs-dev/built/libgeotiff/lib -lgeotiff 
> -L/home/fgs/fgs\
> -dev/built/tiff/lib -ltiff -L/home/fgs/fgs-dev/built/libpng 
> -L/home/fgs/fgs-dev\
> /built/libpng/lib -lpng -lpq -L/home/fgs/fgs-dev/built/postgresql/lib 
> -lpq -lz \
> -L/home/fgs/fgs-dev/built/zlib -L/home/fgs/fgs-dev/built/zlib/lib  -lm 
> -lrt -ld\
> l  >&5
> /usr/bin/ld: warning: libnnz11.so, needed by 
> /home/fgs/fgs-dev/built/instantcli\
> ent_11_1/libclntsh.so, not found (try using -rpath or -rpath-link)
> /usr/bin/ld: warning: libaio.so.1, needed by 
> /home/fgs/fgs-dev/built/instantcli\
> ent_11_1/libclntsh.so, not found (try using -rpath or -rpath-link)
> /home/fgs/fgs-dev/built/instantclient_11_1/libclntsh.so: undefined 
> reference to\
> `nzos_ServiceWriteQueue'
> /home/fgs/fgs-dev/built/instantclient_11_1/libclntsh.so: undefined 
> reference to\
> `nzosCipherSpecToStr'
> /home/fgs/fgs-dev/built/instantclient_11_1/libclntsh.so: undefined 
> reference to\
> `C_SetCRLBER'
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

From even.rouault at mines-paris.org  Thu Jun 18 16:32:58 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jun 18 16:33:07 2009
Subject: [gdal-dev] gdaladdo
In-Reply-To: <8EA33237DDDB244E860ADDE976124AE50202CBC8@ONOTTAXMS2.AGR.GC.CA>
References: <8EA33237DDDB244E860ADDE976124AE50202CBC8@ONOTTAXMS2.AGR.GC.CA>
Message-ID: <200906182232.58993.even.rouault@mines-paris.org>

Look at TIFF_SETTING in GDALmake.opt.

Le Thursday 18 June 2009 22:31:12 Dillabough, Craig, vous avez ?crit?:
> I am using the latest and greatest GDAL. I compiled/installed it by hand
> (so to speak) so I am not sure which libtiff I am using - I will check
> config.log and get back to you tommorrow (need to catch my ride home) -
> unless you know of an easier way to check.
>
> Thanks for your help.
>
> Craig
>
>
>
>
>
>
>
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: Thursday, June 18, 2009 4:18 PM
> To: gdal-dev@lists.osgeo.org
> Cc: Dillabough, Craig
> Subject: Re: [gdal-dev] gdaladdo
>
>
> Craig,
>
> This should work.
>
> Are you using an older GDAL version ? Are you using external libtiff ?
>
> If so, try again with newer GDAL and internal libtiff (although I wouldn't
> older GDAL to fail on a simple case like yours that doesn't involve TIFF
> compression)
>
> Le Thursday 18 June 2009 21:50:25 Dillabough, Craig, vous avez ?crit?:
> > Hi,
> > I am trying to tile and create overviews for a TIFF image dataset I
> > have, but I keep getting strange errors when attempting to add
> > overviews.
> >
> > 1st I created a copy of the original image (same format and all, but
> > wanted to keep the original around in case I had problems).
> >
> > >gdal_translate -ot Float32 -of GTiff Av.MaxNDVI.2000.2009.Week.19.tif
> >
> > trans/week19.tif
> >
> > >cd trans
> >
> > Then I tiled the image (I guess I could have done this in one step by
> >
> > adding -co "TILED=YES" to the previous step):
> > >gdal_translate -ot Float32 -of GTiff -co "TILED=YES" week19.tif
> >
> > week19_tiled.tif
> >
> > Then I tried to add the overviews:
> > > gdaladdo -r average -ro week19_tiled.tif 2 4 8 16
> >
> > I get the following (I've added some whitespace for clarity):
> > 0...10...20...30...40...50...60...70...
> > Warning 1: TIFFReadDirectory:week19_tiled.tif.ovr: Wrong
> > "StripByteCounts" field,
> > ignoring and calculating from imagelength
> > Warning 1: TIFFReadDirectory:week19_tiled.tif.ovr: Wrong
> > "StripByteCounts" field,
> > ignoring and calculating from imagelength
> > ERROR 1: week19_tiled.tif.ovr:DumpModeDecode: Not enough data for
> > scanline 0
> > ERROR 1: TIFFReadEncodedTile() failed.
> >
> > ERROR 1: IReadBlock failed at X offset 0, Y offset 3
> > ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 3
> >
> > I get effectively the same error when I run this without the -ro option.
> >
> > Any idea's what is going wrong.
> >
> > Regards,
> > Craig Dillabaugh
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Thu Jun 18 16:47:43 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jun 18 16:47:53 2009
Subject: [gdal-dev] Setting GDAL Http Fetcher
In-Reply-To: <d422b4500906180931q5dba64d3o50efe4c8b4e9c257@mail.gmail.com>
References: <d422b4500906180931q5dba64d3o50efe4c8b4e9c257@mail.gmail.com>
Message-ID: <200906182247.44478.even.rouault@mines-paris.org>

I don't understand your question. You should provide more details on what you 
want to do exactly

Le Thursday 18 June 2009 18:31:20 Joel Odom, vous avez ?crit?:
> Can I programatically change the http fetcher that GDAL uses for WMS
> without recompiling GDAL?  Thanks!


From even.rouault at mines-paris.org  Thu Jun 18 17:03:43 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jun 18 17:03:53 2009
Subject: [gdal-dev] [gdal Python] Exceptions not reset correctly if
	gdal.UseExceptions() is used
In-Reply-To: <1245312567.3592.14.camel@fasano-Linux>
References: <1245312567.3592.14.camel@fasano-Linux>
Message-ID: <200906182303.43773.even.rouault@mines-paris.org>

Luca,

(This behaviour is identical in trunk too)

we could probably reset the error state after issuing the exception, but that 
would prevent code from getting the error message if they call 
gdal.GetLastErrorMsg() afterwards. But I don't think this would be a problem.
We should probably also call ErrorReset() in gdal.UseExceptions() so that 
previous errors don't cause unexpected exceptions to be thrown.

Howard ?

Le Thursday 18 June 2009 10:09:27 Luca Fasano, vous avez ?crit?:
> Hi all,
> I suspect there is a bug in gdal.UseExceptions() in python binding.
> I noticed that if a RuntimeError has been generated, following gdal
> instructions *raise the same exception*.
> It seems that a gdal.ErrorReset() is necessary to reset it.
> An example with ipython:
>
> In [2]: from osgeo import gdal
>
> In [3]: gdal.UseExceptions()
>
> In [4]: dataset = gdal.Open('./filename.wrongformat')
> ---------------------------------------------------------------------------
> RuntimeError                              Traceback (most recent call
> last)
>
> /home/fasano/Desktop/test/<ipython console> in <module>()
>
> RuntimeError: `./filename.wrongformat' not recognised as a supported
> file format.
>
>
> In [5]: gdal.GetCacheMax()
> ---------------------------------------------------------------------------
> RuntimeError                              Traceback (most recent call
> last)
>
> /home/fasano/Desktop/test/<ipython console> in <module>()
>
> RuntimeError: `./filename.wrongformat' not recognised as a supported
> file format.
>
>
> In [6]: gdal.ErrorReset()
>
> In [7]: gdal.GetCacheMax()
> Out[7]: 41943040
>
>
> (My gdal version is 1.5.4)
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From joelodom at gmail.com  Thu Jun 18 17:42:44 2009
From: joelodom at gmail.com (Joel Odom)
Date: Thu Jun 18 17:42:48 2009
Subject: [gdal-dev] Setting GDAL Http Fetcher
In-Reply-To: <200906182247.44478.even.rouault@mines-paris.org>
References: <d422b4500906180931q5dba64d3o50efe4c8b4e9c257@mail.gmail.com>
	<200906182247.44478.even.rouault@mines-paris.org>
Message-ID: <d422b4500906181442m35059990r397d362bcb2c8c8b@mail.gmail.com>

No mind readers here?  :-)  Let me explain.
The WMS data source uses libcurl to fetch http requests.  I'd like to put a
different engine in to fetch http requests so that I can handle some other
protocols (actually I'm using libcurl myself with some helper functions).  I
was wondering if I could instruct the WMS data source to use the methods
that I have to fetch http requests instead of using its internal handlers.
 Thanks!



On Thu, Jun 18, 2009 at 4:47 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> I don't understand your question. You should provide more details on what
> you
> want to do exactly
>
> Le Thursday 18 June 2009 18:31:20 Joel Odom, vous avez ?crit :
> > Can I programatically change the http fetcher that GDAL uses for WMS
> > without recompiling GDAL?  Thanks!
>
>
>


-- 
http://giscoder.blogspot.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090618/ec5a2a98/attachment-0001.html
From mateusz at loskot.net  Thu Jun 18 17:45:18 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Jun 18 17:45:24 2009
Subject: [gdal-dev] Re: GDAL/ArcObjects based app crashes with newer GDAL
 versions (was How to delete shapefile)
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E3402F5A886@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E3402F5A6F5@daytonmsg2k3.AERO.BALL.COM>	<4A382B4D.8030103@pobox.com>
	<C482FF98AE985A47B8C982FD429C9E3402F5A7B4@daytonmsg2k3.AERO.BALL.COM>
	<4A39039A.8030504@loskot.net>
	<C482FF98AE985A47B8C982FD429C9E3402F5A7E1@daytonmsg2k3.AERO.BALL.COM>
	<4A3924AD.3040301@loskot.net>
	<C482FF98AE985A47B8C982FD429C9E3402F5A886@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <4A3AB56E.7080301@loskot.net>

Clay, Bruce wrote:
> If I try to link to the gdal_i.lib then the program does not crash
> but it does not let me step into any of the methods even though it is
> a debug library and no GDAL functions work.

This is unrelated to GDAL. You better refer MSDN to solve this
kind of problems. This should help too:

http://www.wintellect.com/CS/blogs/jrobbins/archive/2009/05/11/pdb-files-what-every-developer-must-know.aspx

> You mentioned "configuration".  Does GDAL 1.6 and new code require
> some configuration on Windows XP that was not required before?

I meant configuration of your environment: installation of GDAL,
building configuration of you program, ensure you are linking against
binaries you are expecting and you are including coresponsding headers
in case you host more than one version of GDAL on your machine,
etc.

Meaning, factors unrelated to GDAL, but your system, that may cause
problems.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From mateusz at loskot.net  Thu Jun 18 17:49:07 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Jun 18 17:49:13 2009
Subject: [gdal-dev] Curve support in OGR
In-Reply-To: <4A38B430.5050609@carto.net>
References: <4A38B430.5050609@carto.net>
Message-ID: <4A3AB653.7070705@loskot.net>

Andreas Neumann wrote:
> sdf (used for Mapguide)

If you use MapGuide, you also use FDO.
FDO does support curves, so you can forget about OGR and just use FDO.

Cheers,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From even.rouault at mines-paris.org  Thu Jun 18 17:52:54 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jun 18 17:53:05 2009
Subject: [gdal-dev] Setting GDAL Http Fetcher
In-Reply-To: <d422b4500906181442m35059990r397d362bcb2c8c8b@mail.gmail.com>
References: <d422b4500906180931q5dba64d3o50efe4c8b4e9c257@mail.gmail.com>
	<200906182247.44478.even.rouault@mines-paris.org>
	<d422b4500906181442m35059990r397d362bcb2c8c8b@mail.gmail.com>
Message-ID: <200906182352.55654.even.rouault@mines-paris.org>

You need to hack into GDAL itself then.

Le Thursday 18 June 2009 23:42:44 Joel Odom, vous avez ?crit?:
> No mind readers here?  :-)  Let me explain.
> The WMS data source uses libcurl to fetch http requests.  I'd like to put a
> different engine in to fetch http requests so that I can handle some other
> protocols (actually I'm using libcurl myself with some helper functions). 
> I was wondering if I could instruct the WMS data source to use the methods
> that I have to fetch http requests instead of using its internal handlers.
> Thanks!
>
>
>
> On Thu, Jun 18, 2009 at 4:47 PM, Even Rouault
>
> <even.rouault@mines-paris.org>wrote:
> > I don't understand your question. You should provide more details on what
> > you
> > want to do exactly
> >
> > Le Thursday 18 June 2009 18:31:20 Joel Odom, vous avez ?crit :
> > > Can I programatically change the http fetcher that GDAL uses for WMS
> > > without recompiling GDAL?  Thanks!


From apachemaven0 at gmail.com  Thu Jun 18 23:24:48 2009
From: apachemaven0 at gmail.com (maven apache)
Date: Thu Jun 18 23:24:50 2009
Subject: [gdal-dev] parser the information from the gdalinfo
In-Reply-To: <b6ae15040906181948v2300ca3el10f2733d066875c6@mail.gmail.com>
References: <b6ae15040906181948v2300ca3el10f2733d066875c6@mail.gmail.com>
Message-ID: <b6ae15040906182024u1755eb07pff14380423bdcf3a@mail.gmail.com>

Hi:I try to get the information of a image:product_compose123.img and I got
a lot of infomation (perhaps 1500 lines).
I wonder there is some tools to handle this information? I want to change
them to a xml document.
-----------------------------------
PROJCS["Lambert Conformal Conic",
    GEOGCS["Krasovsky",
        DATUM["Krasovsky",
            SPHEROID["Krasovsky",6378245,298.3000003760163],
            TOWGS84[0,0,0,0,0,0,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",47],
    PARAMETER["standard_parallel_2",25],
    PARAMETER["latitude_of_origin",36],
    PARAMETER["central_meridian",105],
    PARAMETER["false_easting",5000000],
    PARAMETER["false_northing",5000000],
    UNIT["meters",1]]
------------------------------------
Above is the Coordinate System  described with OGC wkt,I think transfer this
to xml format is not a easy job.
PS:
The information is to long,because it include the all the bands information,
since I do not need the band info I wonder there is other commond?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090619/0fb79dc7/attachment.html
From antonio.valentino at tiscali.it  Fri Jun 19 02:41:59 2009
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Fri Jun 19 02:42:29 2009
Subject: [gdal-dev] [gdal Python] Exceptions not reset correctly
	ifgdal.UseExceptions() is used
References: <1245312567.3592.14.camel@fasano-Linux>
	<200906182303.43773.even.rouault@mines-paris.org>
Message-ID: <988E2BDD8CF447D8802379EB5707699F@innova.locale>

Even,
my opinion is that if all info are attached to the python exception then it 
should not matter if the error status is reset or not.

Anyway I can't figure out why an exception is raised if the called function 
that doesn't generete any error.

best regards

--
Antonio VALENTINO
System Engineer
INNOVA Consorzio per l'Informatica e la Telematica s.r.l.
Z.I. La Martella - C.da Chiatamura - Lotto 188 - 75100 Matera (MT) Italy
Tel.: +39 0835 1852131, +39 0835 307760 (+39 0835 309180)
Fax: +39 0835 264705
Email: valentino@consorzio-innova.it
Home Page: www.consorzio-innova.com

*ATTENZIONE*: le informazioni contenute in questo messaggio sono da 
considerarsi confidenziali ed il loro utilizzo e' riservato unicamente al 
destinatario sopra indicato. Chi dovesse ricevere questo messaggio per 
errore e' tenuto ad informare il mittente ed a rimuoverlo definitivamente da 
ogni supporto elettronico o cartaceo.

*WARNING*: This message contains confidential and/or proprietary information 
which may be subject to privilege or immunity and which is intended for use 
of its addressee only. Should you receive this message in error, you are 
kindly requested to inform the sender and to definitively remove it from any 
paper or electronic format.


----- Original Message ----- 
From: "Even Rouault" <even.rouault@mines-paris.org>
To: <gdal-dev@lists.osgeo.org>
Cc: "Luca Fasano" <lucafasano@interfree.it>
Sent: Thursday, June 18, 2009 11:03 PM
Subject: Re: [gdal-dev] [gdal Python] Exceptions not reset correctly 
ifgdal.UseExceptions() is used


Luca,

(This behaviour is identical in trunk too)

we could probably reset the error state after issuing the exception, but 
that
would prevent code from getting the error message if they call
gdal.GetLastErrorMsg() afterwards. But I don't think this would be a 
problem.
We should probably also call ErrorReset() in gdal.UseExceptions() so that
previous errors don't cause unexpected exceptions to be thrown.

Howard ?

Le Thursday 18 June 2009 10:09:27 Luca Fasano, vous avez ?crit :
> Hi all,
> I suspect there is a bug in gdal.UseExceptions() in python binding.
> I noticed that if a RuntimeError has been generated, following gdal
> instructions *raise the same exception*.
> It seems that a gdal.ErrorReset() is necessary to reset it.
> An example with ipython:
>
> In [2]: from osgeo import gdal
>
> In [3]: gdal.UseExceptions()
>
> In [4]: dataset = gdal.Open('./filename.wrongformat')
> ---------------------------------------------------------------------------
> RuntimeError                              Traceback (most recent call
> last)
>
> /home/fasano/Desktop/test/<ipython console> in <module>()
>
> RuntimeError: `./filename.wrongformat' not recognised as a supported
> file format.
>
>
> In [5]: gdal.GetCacheMax()
> ---------------------------------------------------------------------------
> RuntimeError                              Traceback (most recent call
> last)
>
> /home/fasano/Desktop/test/<ipython console> in <module>()
>
> RuntimeError: `./filename.wrongformat' not recognised as a supported
> file format.
>
>
> In [6]: gdal.ErrorReset()
>
> In [7]: gdal.GetCacheMax()
> Out[7]: 41943040
>
>
> (My gdal version is 1.5.4)
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev 

From a.neumann at carto.net  Fri Jun 19 04:41:41 2009
From: a.neumann at carto.net (Andreas Neumann)
Date: Fri Jun 19 04:41:47 2009
Subject: [gdal-dev] Curve support in OGR
In-Reply-To: <4A3AB653.7070705@loskot.net>
References: <4A38B430.5050609@carto.net> <4A3AB653.7070705@loskot.net>
Message-ID: <36122.193.246.86.39.1245400901.squirrel@webmail.carto.net>

right - we still use an old commercial version of Mapguide. We may move to
the newer open-source version (or Mapserver) in the future.

But this is not my main concern. The main concern is being able to work
with curves (mainly circular arcs) across the whole OSGeo tool chain,
primarily also in Desktop GIS.

Many desktop GIS build on top of OGR (e.g. the one we use: QGIS). They
won't bother with curves until their underlying base infrastructure
supports curves.

I know it is a probably a huge effort to include curve support in OGR and
won't happen tomorrow ... However, since more and more data formats and
applications now start to support curves, it would make sense that OGR
would support them as well, esp. since it is at the technical foundation
of so many other tools.

I know it should be financially supported by the users, so I wonder if we
could start a project like the WKTRaster project in Postgis [1], where the
necessary work packages for curve support are laid out, as well as
potential programmers and sponsors. People/organizations can assign
themselves as sponsors for certain parts of the whole work then.

The whole thing of course also concerns GEOS and Postgis.

Andreas

[1] http://trac.osgeo.org/postgis/wiki/WKTRaster/PlanningAndFunding


On Thu, June 18, 2009 11:49 pm, Mateusz Loskot wrote:
> Andreas Neumann wrote:
>> sdf (used for Mapguide)
>
> If you use MapGuide, you also use FDO.
> FDO does support curves, so you can forget about OGR and just use FDO.
>
> Cheers,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
>


-- 
Andreas Neumann
http://www.carto.net/neumann/
http://www.svgopen.org/

From a.neumann at carto.net  Fri Jun 19 07:54:55 2009
From: a.neumann at carto.net (Andreas Neumann)
Date: Fri Jun 19 07:55:01 2009
Subject: [gdal-dev] Build OGR with Oracle support
In-Reply-To: <4A3AA114.6070701@mapgears.com>
References: <4A37FC3F.5020708@mapgears.com> <4A380356.4070804@loskot.net>
	<4A3AA114.6070701@mapgears.com>
Message-ID: <35721.193.246.86.39.1245412495.squirrel@webmail.carto.net>

Hi,

I was trying to get OCI support on my Ubuntu server and followed your
instructions.

I am struggling with the libnnz10.so: libnnz10.so is present and I also
set the LD_LIBRARY_PATH accordingly.

But the configure script still fails. In the config.log I get the
following messages:

----------------
/usr/bin/ld: warning: libnnz10.so, needed by
/usr/local/lib/instantclient_10_2/libclntsh.so, not found (try using
 -rpath or -rpath-link)
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`nzos_ModifyCipherSuites'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`nzosCipherSpecToStr'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`nzos_Initialize'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`nzosgpc_GetProtocolVer'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`nztwOpenWallet'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`A_X931RandomInit'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`nzosGetSupportedCipher'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`nzos_ServiceWriteQueue'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`nzos_DisableClientAuthentication'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`nztiGetSecInfo'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`nzos_Write'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`nzduui2_destroy_ui'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`_intel_fast_memset'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`nztGetSubjectName'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`nzgbllsm_location_shared_memory'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`nzos_setThrUse'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`nzteMyCert'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`nzteDestroyPersona'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`nzos_RetrievePersonaCopy'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`nzosSCCS_SetCRLCacheSize'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`nztnGCL_Get_Certificate_List'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`nzos_setCRLFile'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`A_X931RandomContextDestroy'
/usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
`nzos_OToolkitContext'
..............
more messages ......
..............
collect2: ld returned 1 exit status
configure:24161: $? = 1
configure: failed program was:
|
|                 /* confdefs.h.  */
| #define PACKAGE_NAME ""
| #define PACKAGE_TARNAME ""
| #define PACKAGE_VERSION ""
| #define PACKAGE_STRING ""
| #define PACKAGE_BUGREPORT ""
| #define STDC_HEADERS 1

..............
more messages ......
..............

----------------

Any idea why it can't find libnnz10.so despite it being present and the
LD_LIBRARY_PATH set?

Here are my configure-params:
./configure --with-python --with-perl --with-php --with-curl --with-expat
--with-pg=/usr/local/pgsql/bin/pg_config --with-xerces
--with-grass=/usr/local/grass-6.4.0RC2/
--with-oci-include=/usr/local/lib/instantclient_10_2/sdk/include
--with-oci-lib=/usr/local/lib/instantclient_10_2

Thanks,
Andreas

On Thu, June 18, 2009 10:18 pm, Normand Savard wrote:
> Mateusz Loskot wrote:
>>
>>
>> ./configure generates a log file called config.log.
>> If something goes wrong, there should be some diagnostic in this file.
>> It would be helpful if you could share it, for instance, here:
>>
>> http://pastebin.com/
>>
>> This will help to find what's the problem.
>>
>>
> Maateusz,
>
> You were right, this help a lot.  I succeeded to build OGR with Oracle
> 10g and 11g but for those who may come on a similar issue in the future,
> I'm posting the process I went through.
>
> I downloaded
> oracle-instantclient-basic-10.2.0.4-1.i386.zip (library)
> oracle-instantclient-devel-10.2.0.4-1.i386.zip (headers)
>
> or
> instantclient-basic-linux32-11.1.0.7.zip (library)
> instantclient-sdk-linux32-11.1.0.7.zip (headers)
>
>
> As suggested I checked the config.log (see 1) and noticed that there was
> a link problem (-lclntsh).  I went to the instantclient directory to
> check for libclntsh.so, but it was not there.  So I added a link to
> libclntsh.so.11.1.
>
> I redid the configure and checked the config.log again (see 2).  I
> noticed that libnnz11.so library was not found.  I went to the
> instantclient directory but the library was present.  Since I use the
> fgs-dev environment the libraries are not in a traditional path so the
> linker could not find it.  To solve this issue, I added the path to
> where the library was installed to $LD_LIBRARY_PATH.  There was a
> problem with libaio.so.1 library.  For this particular issue I had to
> install libaio-dev on my system (Ubuntu:  apt-get install).
>
> It works fine after that.
>
> Thank you to both of you.
>
> Norm
>
>
>
> 1)config.log
> configure:23653: checking for Oracle OCI headers in
> /home/fgs/fgs-dev/built/ins\
> tantclient_11_1/sdk/include
> configure:23696: g++ -c -fPIC  -g -DDEBUG
> -I/home/fgs/fgs-dev/built/instantcli\
> ent_11_1/sdk/include conftest.cpp >&5
> configure:23702: $? = 0
> configure:23715: result: yes
> configure:23740: checking for Oracle OCI libraries in
> /home/fgs/fgs-dev/built/i\
> nstantclient_11_1
> configure:23743: result: norm:
> -L/home/fgs/fgs-dev/built/instantclient_11_1 -lc\
> lntsh
> configure:23745: result: norm:
> -I/home/fgs/fgs-dev/built/instantclient_11_1/sdk\
> /include
> configure:23781: g++ -o conftest -fPIC  -g -DDEBUG
> -I/home/fgs/fgs-dev/built/i\
> nstantclient_11_1/sdk/include
> -L/home/fgs/fgs-dev/built/instantclient_11_1 -lc\
> lntsh conftest.cpp -L/home/fgs/fgs-dev/built/jpeg
> -L/home/fgs/fgs-dev/built/jpe\
> g/lib -ljpeg -L/home/fgs/fgs-dev/built/libgeotiff/lib -lgeotiff
> -L/home/fgs/fgs\
> -dev/built/tiff/lib -ltiff -L/home/fgs/fgs-dev/built/libpng
> -L/home/fgs/fgs-dev\
> /built/libpng/lib -lpng -lpq -L/home/fgs/fgs-dev/built/postgresql/lib
> -lpq -lz \
> -L/home/fgs/fgs-dev/built/zlib -L/home/fgs/fgs-dev/built/zlib/lib  -lm
> -lrt -ld\
> l  >&5
> /usr/bin/ld: cannot find -lclntsh
> collect2: ld returned 1 exit status
> configure:23787: $? = 1
> configure: failed program was:
> |
> |                 /* confdefs.h.  */
> | #define PACKAGE_NAME ""
> | #define PACKAGE_TARNAME ""
>
>
>
>
>
>
> 2) config.log
>
> configure:23740: checking for Oracle OCI libraries in
> /home/fgs/fgs-dev/built/i\
> nstantclient_11_1
> configure:23743: result: norm:
> -L/home/fgs/fgs-dev/built/instantclient_11_1 -lc\
> lntsh
> configure:23745: result: norm:
> -I/home/fgs/fgs-dev/built/instantclient_11_1/sdk\
> /include
> configure:23781: g++ -o conftest -fPIC  -g -DDEBUG
> -I/home/fgs/fgs-dev/built/i\
> nstantclient_11_1/sdk/include
> -L/home/fgs/fgs-dev/built/instantclient_11_1 -lc\
> lntsh conftest.cpp -L/home/fgs/fgs-dev/built/jpeg
> -L/home/fgs/fgs-dev/built/jpe\
> g/lib -ljpeg -L/home/fgs/fgs-dev/built/libgeotiff/lib -lgeotiff
> -L/home/fgs/fgs\
> -dev/built/tiff/lib -ltiff -L/home/fgs/fgs-dev/built/libpng
> -L/home/fgs/fgs-dev\
> /built/libpng/lib -lpng -lpq -L/home/fgs/fgs-dev/built/postgresql/lib
> -lpq -lz \
> -L/home/fgs/fgs-dev/built/zlib -L/home/fgs/fgs-dev/built/zlib/lib  -lm
> -lrt -ld\
> l  >&5
> /usr/bin/ld: warning: libnnz11.so, needed by
> /home/fgs/fgs-dev/built/instantcli\
> ent_11_1/libclntsh.so, not found (try using -rpath or -rpath-link)
> /usr/bin/ld: warning: libaio.so.1, needed by
> /home/fgs/fgs-dev/built/instantcli\
> ent_11_1/libclntsh.so, not found (try using -rpath or -rpath-link)
> /home/fgs/fgs-dev/built/instantclient_11_1/libclntsh.so: undefined
> reference to\
>  `nzos_ServiceWriteQueue'
> /home/fgs/fgs-dev/built/instantclient_11_1/libclntsh.so: undefined
> reference to\
>  `nzosCipherSpecToStr'
> /home/fgs/fgs-dev/built/instantclient_11_1/libclntsh.so: undefined
> reference to\
>  `C_SetCRLBER'
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Andreas Neumann
http://www.carto.net/neumann/
http://www.svgopen.org/

From jason.roberts at duke.edu  Fri Jun 19 09:46:38 2009
From: jason.roberts at duke.edu (Jason Roberts)
Date: Fri Jun 19 09:49:47 2009
Subject: [gdal-dev] [gdal Python] Exceptions not reset
	correctly	ifgdal.UseExceptions() is used
In-Reply-To: <988E2BDD8CF447D8802379EB5707699F@innova.locale>
References: <1245312567.3592.14.camel@fasano-Linux>
	<200906182303.43773.even.rouault@mines-paris.org>
	<988E2BDD8CF447D8802379EB5707699F@innova.locale>
Message-ID: <01bd01c9f0e4$5f2acce0$1d8066a0$@roberts@duke.edu>

As a Python programmer that uses GDAL and OGR, I second this opinion.

The most "Pythonic" interface would be one in which all GDAL/OGR functions raise exceptions when they fail. This would be enabled by default, and the UseExceptions and ErrorReset methods would not be exposed at all. This approach is consistent with the rest of Python's libraries, and it is what Python programmers are used to. If this cannot be done (perhaps because people are too used to the existing interface that does not raise exceptions by default), then a Python program should be able to call UseExceptions once at the beginning to enable this behavior. There is no reason why a Python program should ever need to call ErrorReset. Python programmers are already used to catching exceptions and the idea of polling for errors and resetting error states is unusual to them.

Best,
Jason

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Antonio Valentino
Sent: Friday, June 19, 2009 2:42 AM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] [gdal Python] Exceptions not reset correctly ifgdal.UseExceptions() is used

Even,
my opinion is that if all info are attached to the python exception then it 
should not matter if the error status is reset or not.

Anyway I can't figure out why an exception is raised if the called function 
that doesn't generete any error.

best regards

--
Antonio VALENTINO
System Engineer
INNOVA Consorzio per l'Informatica e la Telematica s.r.l.
Z.I. La Martella - C.da Chiatamura - Lotto 188 - 75100 Matera (MT) Italy
Tel.: +39 0835 1852131, +39 0835 307760 (+39 0835 309180)
Fax: +39 0835 264705
Email: valentino@consorzio-innova.it
Home Page: www.consorzio-innova.com

*ATTENZIONE*: le informazioni contenute in questo messaggio sono da 
considerarsi confidenziali ed il loro utilizzo e' riservato unicamente al 
destinatario sopra indicato. Chi dovesse ricevere questo messaggio per 
errore e' tenuto ad informare il mittente ed a rimuoverlo definitivamente da 
ogni supporto elettronico o cartaceo.

*WARNING*: This message contains confidential and/or proprietary information 
which may be subject to privilege or immunity and which is intended for use 
of its addressee only. Should you receive this message in error, you are 
kindly requested to inform the sender and to definitively remove it from any 
paper or electronic format.


----- Original Message ----- 
From: "Even Rouault" <even.rouault@mines-paris.org>
To: <gdal-dev@lists.osgeo.org>
Cc: "Luca Fasano" <lucafasano@interfree.it>
Sent: Thursday, June 18, 2009 11:03 PM
Subject: Re: [gdal-dev] [gdal Python] Exceptions not reset correctly 
ifgdal.UseExceptions() is used


Luca,

(This behaviour is identical in trunk too)

we could probably reset the error state after issuing the exception, but 
that
would prevent code from getting the error message if they call
gdal.GetLastErrorMsg() afterwards. But I don't think this would be a 
problem.
We should probably also call ErrorReset() in gdal.UseExceptions() so that
previous errors don't cause unexpected exceptions to be thrown.

Howard ?

Le Thursday 18 June 2009 10:09:27 Luca Fasano, vous avez ?crit :
> Hi all,
> I suspect there is a bug in gdal.UseExceptions() in python binding.
> I noticed that if a RuntimeError has been generated, following gdal
> instructions *raise the same exception*.
> It seems that a gdal.ErrorReset() is necessary to reset it.
> An example with ipython:
>
> In [2]: from osgeo import gdal
>
> In [3]: gdal.UseExceptions()
>
> In [4]: dataset = gdal.Open('./filename.wrongformat')
> ---------------------------------------------------------------------------
> RuntimeError                              Traceback (most recent call
> last)
>
> /home/fasano/Desktop/test/<ipython console> in <module>()
>
> RuntimeError: `./filename.wrongformat' not recognised as a supported
> file format.
>
>
> In [5]: gdal.GetCacheMax()
> ---------------------------------------------------------------------------
> RuntimeError                              Traceback (most recent call
> last)
>
> /home/fasano/Desktop/test/<ipython console> in <module>()
>
> RuntimeError: `./filename.wrongformat' not recognised as a supported
> file format.
>
>
> In [6]: gdal.ErrorReset()
>
> In [7]: gdal.GetCacheMax()
> Out[7]: 41943040
>
>
> (My gdal version is 1.5.4)
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev 

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From mateusz at loskot.net  Fri Jun 19 09:50:19 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Jun 19 09:49:50 2009
Subject: [gdal-dev] Build OGR with Oracle support
In-Reply-To: <35721.193.246.86.39.1245412495.squirrel@webmail.carto.net>
References: <4A37FC3F.5020708@mapgears.com> <4A380356.4070804@loskot.net>
	<4A3AA114.6070701@mapgears.com>
	<35721.193.246.86.39.1245412495.squirrel@webmail.carto.net>
Message-ID: <4A3B979B.8040805@loskot.net>

Andreas Neumann wrote:
> /usr/bin/ld: warning: libnnz10.so, needed by
> /usr/local/lib/instantclient_10_2/libclntsh.so, not found (try using
>  -rpath or -rpath-link)

The path above and the path below are different.

>> -L/home/fgs/fgs-dev/built/instantclient_11_1 -lc\
>> lntsh

Are you sure you configure against one version of Oracle stuff?
 From what I can see, you have two versions.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From warmerdam at pobox.com  Fri Jun 19 10:20:33 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jun 19 10:20:41 2009
Subject: [gdal-dev] [gdal Python] Exceptions not reset correctly
	ifgdal.UseExceptions() is used
In-Reply-To: <988E2BDD8CF447D8802379EB5707699F@innova.locale>
References: <1245312567.3592.14.camel@fasano-Linux>
	<200906182303.43773.even.rouault@mines-paris.org>
	<988E2BDD8CF447D8802379EB5707699F@innova.locale>
Message-ID: <4A3B9EB1.9000701@pobox.com>

Antonio Valentino wrote:
> Anyway I can't figure out why an exception is raised if the called 
> function that doesn't generete any error.

Antonio,

Sometimes a GDAL function calls a lower level function that posts an error,
but that the higher level API ignores without even realizing it occured -
often because the error was insignificant in the context of use.  In
situations like this the error can remain posted in the error cache and
trigger an exception when things return to the python api.

The fix is to identify these situations, and ensure that the calling
function calls ErrorReset for errors that should be ignored.

Jason Roberts wrote:
 >
 > The most "Pythonic" interface would be one in which all GDAL/OGR
 > functions raise exceptions when they fail. This would be enabled
 > by default, and the UseExceptions and ErrorReset methods would not
 > be exposed at all. This approach is consistent with the rest of
 > Python's libraries, and it is what Python programmers are used
 > to. If this cannot be done (perhaps because people are too used
 > to the existing interface that does not raise exceptions by default),
 > then a Python program should be able to call UseExceptions once at
 > the beginning to enable this behavior.

This is the intended approach with UseExceptions() being off by default
to protect compatability of operation for existing python scripts.  A
script with UseExceptions() on should

 > There is no reason why a Python program should ever need to call
 > ErrorReset. Python programmers are already used to catching exceptions
 > and the idea of polling for errors and resetting error states is unusual
 > to them.

I agree, in UseExceptions() mode.  I'm not clear why the Python bindings
over the C API do not call ErrorReset() before any call into the C API.
I thought they did.  I think Howard is going to investigate a bit.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Jun 19 10:44:14 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jun 19 10:44:24 2009
Subject: [gdal-dev] Curve support in OGR
In-Reply-To: <36122.193.246.86.39.1245400901.squirrel@webmail.carto.net>
References: <4A38B430.5050609@carto.net> <4A3AB653.7070705@loskot.net>
	<36122.193.246.86.39.1245400901.squirrel@webmail.carto.net>
Message-ID: <4A3BA43E.30909@pobox.com>

Andreas Neumann wrote:
> right - we still use an old commercial version of Mapguide. We may move to
> the newer open-source version (or Mapserver) in the future.
> 
> But this is not my main concern. The main concern is being able to work
> with curves (mainly circular arcs) across the whole OSGeo tool chain,
> primarily also in Desktop GIS.
> 
> Many desktop GIS build on top of OGR (e.g. the one we use: QGIS). They
> won't bother with curves until their underlying base infrastructure
> supports curves.
> 
> I know it is a probably a huge effort to include curve support in OGR and
> won't happen tomorrow ... However, since more and more data formats and
> applications now start to support curves, it would make sense that OGR
> would support them as well, esp. since it is at the technical foundation
> of so many other tools.
> 
> I know it should be financially supported by the users, so I wonder if we
> could start a project like the WKTRaster project in Postgis [1], where the
> necessary work packages for curve support are laid out, as well as
> potential programmers and sponsors. People/organizations can assign
> themselves as sponsors for certain parts of the whole work then.
> 
> The whole thing of course also concerns GEOS and Postgis.

Andreas,

I would like to upgrade OGR to support curves and generally to support
a broader geometry model in line with Simple Features 1.1 and possible
some of the ISO geometry types.  However, this is a substantial effort
and I believe it would require financial support.  I have not had
significant client interest in such an upgrade myself, nor have the GDAL
sponsors spoken strongly on this point.

So, I'm basically at the point of waiting for funded interest in the
topic to grow.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From nsavard at mapgears.com  Fri Jun 19 11:03:02 2009
From: nsavard at mapgears.com (Normand Savard)
Date: Fri Jun 19 11:03:04 2009
Subject: [gdal-dev] Build OGR with Oracle support
In-Reply-To: <4A3B979B.8040805@loskot.net>
References: <4A37FC3F.5020708@mapgears.com> <4A380356.4070804@loskot.net>
	<4A3AA114.6070701@mapgears.com>
	<35721.193.246.86.39.1245412495.squirrel@webmail.carto.net>
	<4A3B979B.8040805@loskot.net>
Message-ID: <4A3BA8A6.9000809@mapgears.com>

Mateusz Loskot wrote:
> Andreas Neumann wrote:
>> /usr/bin/ld: warning: libnnz10.so, needed by
>> /usr/local/lib/instantclient_10_2/libclntsh.so, not found (try using
>>  -rpath or -rpath-link)
>
> The path above and the path below are different.
>
>>> -L/home/fgs/fgs-dev/built/instantclient_11_1 -lc\
>>> lntsh
>
> Are you sure you configure against one version of Oracle stuff?
> From what I can see, you have two versions.
>
Mateusz,

Maybe I misinterpreted Andreas' email but I think he's trying to compile 
GDAL/OGR with OCI (Oracle Instantclient) outside of fgs-dev.  Can you 
confirm Andreas?

Norm
From nsavard at mapgears.com  Fri Jun 19 11:15:28 2009
From: nsavard at mapgears.com (Normand Savard)
Date: Fri Jun 19 11:15:30 2009
Subject: [gdal-dev] Build OGR with Oracle support
In-Reply-To: <35721.193.246.86.39.1245412495.squirrel@webmail.carto.net>
References: <4A37FC3F.5020708@mapgears.com> <4A380356.4070804@loskot.net>
	<4A3AA114.6070701@mapgears.com>
	<35721.193.246.86.39.1245412495.squirrel@webmail.carto.net>
Message-ID: <4A3BAB90.1070403@mapgears.com>

Andreas Neumann wrote:
> Hi,
>
> I was trying to get OCI support on my Ubuntu server and followed your
> instructions.
>
> I am struggling with the libnnz10.so: libnnz10.so is present and I also
> set the LD_LIBRARY_PATH accordingly.
>
> But the configure script still fails. In the config.log I get the
> following messages:
>
> ----------------
> /usr/bin/ld: warning: libnnz10.so, needed by
> /usr/local/lib/instantclient_10_2/libclntsh.so, not found (try using
>  -rpath or -rpath-link)
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzos_ModifyCipherSuites'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzosCipherSpecToStr'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzos_Initialize'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzosgpc_GetProtocolVer'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nztwOpenWallet'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `A_X931RandomInit'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzosGetSupportedCipher'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzos_ServiceWriteQueue'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzos_DisableClientAuthentication'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nztiGetSecInfo'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzos_Write'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzduui2_destroy_ui'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `_intel_fast_memset'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nztGetSubjectName'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzgbllsm_location_shared_memory'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzos_setThrUse'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzteMyCert'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzteDestroyPersona'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzos_RetrievePersonaCopy'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzosSCCS_SetCRLCacheSize'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nztnGCL_Get_Certificate_List'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzos_setCRLFile'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `A_X931RandomContextDestroy'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzos_OToolkitContext'
> ..............
> more messages ......
> ..............
> collect2: ld returned 1 exit status
> configure:24161: $? = 1
> configure: failed program was:
> |
> |                 /* confdefs.h.  */
> | #define PACKAGE_NAME ""
> | #define PACKAGE_TARNAME ""
> | #define PACKAGE_VERSION ""
> | #define PACKAGE_STRING ""
> | #define PACKAGE_BUGREPORT ""
> | #define STDC_HEADERS 1
>
> ..............
> more messages ......
> ..............
>
> ----------------
>
> Any idea why it can't find libnnz10.so despite it being present and the
> LD_LIBRARY_PATH set?
>
> Here are my configure-params:
> ./configure --with-python --with-perl --with-php --with-curl --with-expat
> --with-pg=/usr/local/pgsql/bin/pg_config --with-xerces
> --with-grass=/usr/local/grass-6.4.0RC2/
> --with-oci-include=/usr/local/lib/instantclient_10_2/sdk/include
> --with-oci-lib=/usr/local/lib/instantclient_10_2
>
>   
Andreas,

Can you paste you LD_LIBRARY_PATH?

Norm
From nsavard at mapgears.com  Fri Jun 19 11:19:22 2009
From: nsavard at mapgears.com (Normand Savard)
Date: Fri Jun 19 11:19:25 2009
Subject: [gdal-dev] Build OGR with Oracle support
In-Reply-To: <35721.193.246.86.39.1245412495.squirrel@webmail.carto.net>
References: <4A37FC3F.5020708@mapgears.com> <4A380356.4070804@loskot.net>
	<4A3AA114.6070701@mapgears.com>
	<35721.193.246.86.39.1245412495.squirrel@webmail.carto.net>
Message-ID: <4A3BAC7A.2060903@mapgears.com>

Andreas Neumann wrote:
> Hi,
>
> I was trying to get OCI support on my Ubuntu server and followed your
> instructions.
>
> I am struggling with the libnnz10.so: libnnz10.so is present and I also
> set the LD_LIBRARY_PATH accordingly.
>
> But the configure script still fails. In the config.log I get the
> following messages:
>
> ----------------
> /usr/bin/ld: warning: libnnz10.so, needed by
> /usr/local/lib/instantclient_10_2/libclntsh.so, not found (try using
>  -rpath or -rpath-link)
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzos_ModifyCipherSuites'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzosCipherSpecToStr'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzos_Initialize'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzosgpc_GetProtocolVer'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nztwOpenWallet'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `A_X931RandomInit'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzosGetSupportedCipher'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzos_ServiceWriteQueue'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzos_DisableClientAuthentication'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nztiGetSecInfo'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzos_Write'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzduui2_destroy_ui'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `_intel_fast_memset'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nztGetSubjectName'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzgbllsm_location_shared_memory'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzos_setThrUse'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzteMyCert'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzteDestroyPersona'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzos_RetrievePersonaCopy'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzosSCCS_SetCRLCacheSize'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nztnGCL_Get_Certificate_List'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzos_setCRLFile'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `A_X931RandomContextDestroy'
> /usr/local/lib/instantclient_10_2/libclntsh.so: undefined reference to
> `nzos_OToolkitContext'
> ..............
> more messages ......
> ..............
> collect2: ld returned 1 exit status
> configure:24161: $? = 1
> configure: failed program was:
> |
> |                 /* confdefs.h.  */
> | #define PACKAGE_NAME ""
> | #define PACKAGE_TARNAME ""
> | #define PACKAGE_VERSION ""
> | #define PACKAGE_STRING ""
> | #define PACKAGE_BUGREPORT ""
> | #define STDC_HEADERS 1
>
> ..............
> more messages ......
> ..............
>
> ----------------
>
> Any idea why it can't find libnnz10.so despite it being present and the
> LD_LIBRARY_PATH set?
>
> Here are my configure-params:
> ./configure --with-python --with-perl --with-php --with-curl --with-expat
> --with-pg=/usr/local/pgsql/bin/pg_config --with-xerces
> --with-grass=/usr/local/grass-6.4.0RC2/
> --with-oci-include=/usr/local/lib/instantclient_10_2/sdk/include
> --with-oci-lib=/usr/local/lib/instantclient_10_2
>
>   
Andrea,

I was thinking of one other thing.  It is good to set LD_LIBRARY_PATH  
variable but  you  have to export it.  For instance, for FGS I needed to 
do something like this:

    export LD_LIBRARY_PATH=$FGS_BUILD_HOME/$oci_ARCHIVE_DIR:$LD_LIBRARY_PATH
 
Norm



From Craig.Dillabough at AGR.GC.CA  Fri Jun 19 12:05:30 2009
From: Craig.Dillabough at AGR.GC.CA (Dillabough, Craig)
Date: Fri Jun 19 12:05:33 2009
Subject: [gdal-dev] gdaladdo
In-Reply-To: <200906182232.58993.even.rouault@mines-paris.org>
Message-ID: <8EA33237DDDB244E860ADDE976124AE50202CBC9@ONOTTAXMS2.AGR.GC.CA>

Hi Even,

My original settings were:
TIFF_SETTING   =    external
And 
GEOTIFF_SETTING =   internal

I reconfigured with the --with-libtiff=internal and recompiled.

Now things seem to be working.

Thanks for your help, I don't think I would have ever figured that one out.

Regards,
Craig

-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Thursday, June 18, 2009 4:33 PM
To: Dillabough, Craig
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] gdaladdo


Look at TIFF_SETTING in GDALmake.opt.

Le Thursday 18 June 2009 22:31:12 Dillabough, Craig, vous avez ?crit?:
> I am using the latest and greatest GDAL. I compiled/installed it by hand
> (so to speak) so I am not sure which libtiff I am using - I will check
> config.log and get back to you tommorrow (need to catch my ride home) -
> unless you know of an easier way to check.
>
> Thanks for your help.
>
> Craig
>
>
>
>
>
>
>
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: Thursday, June 18, 2009 4:18 PM
> To: gdal-dev@lists.osgeo.org
> Cc: Dillabough, Craig
> Subject: Re: [gdal-dev] gdaladdo
>
>
> Craig,
>
> This should work.
>
> Are you using an older GDAL version ? Are you using external libtiff ?
>
> If so, try again with newer GDAL and internal libtiff (although I wouldn't
> older GDAL to fail on a simple case like yours that doesn't involve TIFF
> compression)
>
> Le Thursday 18 June 2009 21:50:25 Dillabough, Craig, vous avez ?crit?:
> > Hi,
> > I am trying to tile and create overviews for a TIFF image dataset I
> > have, but I keep getting strange errors when attempting to add
> > overviews.
> >
> > 1st I created a copy of the original image (same format and all, but
> > wanted to keep the original around in case I had problems).
> >
> > >gdal_translate -ot Float32 -of GTiff Av.MaxNDVI.2000.2009.Week.19.tif
> >
> > trans/week19.tif
> >
> > >cd trans
> >
> > Then I tiled the image (I guess I could have done this in one step by
> >
> > adding -co "TILED=YES" to the previous step):
> > >gdal_translate -ot Float32 -of GTiff -co "TILED=YES" week19.tif
> >
> > week19_tiled.tif
> >
> > Then I tried to add the overviews:
> > > gdaladdo -r average -ro week19_tiled.tif 2 4 8 16
> >
> > I get the following (I've added some whitespace for clarity):
> > 0...10...20...30...40...50...60...70...
> > Warning 1: TIFFReadDirectory:week19_tiled.tif.ovr: Wrong
> > "StripByteCounts" field,
> > ignoring and calculating from imagelength
> > Warning 1: TIFFReadDirectory:week19_tiled.tif.ovr: Wrong
> > "StripByteCounts" field,
> > ignoring and calculating from imagelength
> > ERROR 1: week19_tiled.tif.ovr:DumpModeDecode: Not enough data for
> > scanline 0
> > ERROR 1: TIFFReadEncodedTile() failed.
> >
> > ERROR 1: IReadBlock failed at X offset 0, Y offset 3
> > ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 3
> >
> > I get effectively the same error when I run this without the -ro option.
> >
> > Any idea's what is going wrong.
> >
> > Regards,
> > Craig Dillabaugh
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev


From belaid_moa at hotmail.com  Fri Jun 19 13:00:56 2009
From: belaid_moa at hotmail.com (Belaid MOA)
Date: Fri Jun 19 13:00:58 2009
Subject: [gdal-dev] moving filter averaging in GDAL.
Message-ID: <COL113-W44FA3154200BAA527C946AF43A0@phx.gbl>


Hi,
 Does GDAL have functions for applying an averaging filter of window, say 11x11, to an image? This is something that comes up all the time in image analysis. So, I suppose GDAL has built-in functions for that. 

 Any help on this is very appreciated.

With best regards.
~Belaid...

_________________________________________________________________
Create a cool, new character for your Windows Live? Messenger. 
http://go.microsoft.com/?linkid=9656621
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090619/2e7fd804/attachment.html
From warmerdam at pobox.com  Fri Jun 19 13:23:33 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jun 19 13:23:47 2009
Subject: [gdal-dev] moving filter averaging in GDAL.
In-Reply-To: <COL113-W44FA3154200BAA527C946AF43A0@phx.gbl>
References: <COL113-W44FA3154200BAA527C946AF43A0@phx.gbl>
Message-ID: <4A3BC995.6010807@pobox.com>

Belaid MOA wrote:
> Hi,
>  Does GDAL have functions for applying an averaging filter of window, 
> say 11x11, to an image? This is something that comes up all the time in 
> image analysis. So, I suppose GDAL has built-in functions for that.
> 
>  Any help on this is very appreciated.

Belaid,

There is support for filtering, including average filtering, with the
gdalfilter.py command in gdal/swig/python/samples.  It accomplished
by creating a virtual file using the <KernelFilteredSource> directive -
so ultimately the work is done by the VRT driver.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From belaid_moa at hotmail.com  Fri Jun 19 13:27:40 2009
From: belaid_moa at hotmail.com (Belaid MOA)
Date: Fri Jun 19 13:27:43 2009
Subject: [gdal-dev] moving filter averaging in GDAL.
In-Reply-To: <4A3BC995.6010807@pobox.com>
References: <COL113-W44FA3154200BAA527C946AF43A0@phx.gbl>
	<4A3BC995.6010807@pobox.com>
Message-ID: <COL113-W55CEE0316231DF928C7B53F43A0@phx.gbl>


Thanks a lot Frank. Is there any C/C++ version for that? I am doing the averaging filter from C++ code.

With best regards.
Belaid Moa.

> Date: Fri, 19 Jun 2009 13:23:33 -0400
> From: warmerdam@pobox.com
> To: belaid_moa@hotmail.com
> CC: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] moving filter averaging in GDAL.
> 
> Belaid MOA wrote:
> > Hi,
> >  Does GDAL have functions for applying an averaging filter of window, 
> > say 11x11, to an image? This is something that comes up all the time in 
> > image analysis. So, I suppose GDAL has built-in functions for that.
> > 
> >  Any help on this is very appreciated.
> 
> Belaid,
> 
> There is support for filtering, including average filtering, with the
> gdalfilter.py command in gdal/swig/python/samples.  It accomplished
> by creating a virtual file using the <KernelFilteredSource> directive -
> so ultimately the work is done by the VRT driver.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 

_________________________________________________________________
We are your photos. Share us now with Windows Live Photos.
http://go.microsoft.com/?linkid=9666047
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090619/d4ac6eb8/attachment.html
From even.rouault at mines-paris.org  Fri Jun 19 13:30:31 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jun 19 13:30:43 2009
Subject: [gdal-dev] gdaladdo
In-Reply-To: <8EA33237DDDB244E860ADDE976124AE50202CBC9@ONOTTAXMS2.AGR.GC.CA>
References: <8EA33237DDDB244E860ADDE976124AE50202CBC9@ONOTTAXMS2.AGR.GC.CA>
Message-ID: <200906191930.32934.even.rouault@mines-paris.org>

Just for curiosity, could you precise the version of external libtiff on your 
system and the dimensions of your TIFF image ?

Le Friday 19 June 2009 18:05:30 Dillabough, Craig, vous avez ?crit?:
> Hi Even,
>
> My original settings were:
> TIFF_SETTING   =    external
> And
> GEOTIFF_SETTING =   internal
>
> I reconfigured with the --with-libtiff=internal and recompiled.
>
> Now things seem to be working.
>
> Thanks for your help, I don't think I would have ever figured that one out.
>
> Regards,
> Craig
>
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: Thursday, June 18, 2009 4:33 PM
> To: Dillabough, Craig
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] gdaladdo
>
>
> Look at TIFF_SETTING in GDALmake.opt.
>
> Le Thursday 18 June 2009 22:31:12 Dillabough, Craig, vous avez ?crit?:
> > I am using the latest and greatest GDAL. I compiled/installed it by hand
> > (so to speak) so I am not sure which libtiff I am using - I will check
> > config.log and get back to you tommorrow (need to catch my ride home) -
> > unless you know of an easier way to check.
> >
> > Thanks for your help.
> >
> > Craig
> >
> >
> >
> >
> >
> >
> >
> > -----Original Message-----
> > From: Even Rouault [mailto:even.rouault@mines-paris.org]
> > Sent: Thursday, June 18, 2009 4:18 PM
> > To: gdal-dev@lists.osgeo.org
> > Cc: Dillabough, Craig
> > Subject: Re: [gdal-dev] gdaladdo
> >
> >
> > Craig,
> >
> > This should work.
> >
> > Are you using an older GDAL version ? Are you using external libtiff ?
> >
> > If so, try again with newer GDAL and internal libtiff (although I
> > wouldn't older GDAL to fail on a simple case like yours that doesn't
> > involve TIFF compression)
> >
> > Le Thursday 18 June 2009 21:50:25 Dillabough, Craig, vous avez ?crit?:
> > > Hi,
> > > I am trying to tile and create overviews for a TIFF image dataset I
> > > have, but I keep getting strange errors when attempting to add
> > > overviews.
> > >
> > > 1st I created a copy of the original image (same format and all, but
> > > wanted to keep the original around in case I had problems).
> > >
> > > >gdal_translate -ot Float32 -of GTiff Av.MaxNDVI.2000.2009.Week.19.tif
> > >
> > > trans/week19.tif
> > >
> > > >cd trans
> > >
> > > Then I tiled the image (I guess I could have done this in one step by
> > >
> > > adding -co "TILED=YES" to the previous step):
> > > >gdal_translate -ot Float32 -of GTiff -co "TILED=YES" week19.tif
> > >
> > > week19_tiled.tif
> > >
> > > Then I tried to add the overviews:
> > > > gdaladdo -r average -ro week19_tiled.tif 2 4 8 16
> > >
> > > I get the following (I've added some whitespace for clarity):
> > > 0...10...20...30...40...50...60...70...
> > > Warning 1: TIFFReadDirectory:week19_tiled.tif.ovr: Wrong
> > > "StripByteCounts" field,
> > > ignoring and calculating from imagelength
> > > Warning 1: TIFFReadDirectory:week19_tiled.tif.ovr: Wrong
> > > "StripByteCounts" field,
> > > ignoring and calculating from imagelength
> > > ERROR 1: week19_tiled.tif.ovr:DumpModeDecode: Not enough data for
> > > scanline 0
> > > ERROR 1: TIFFReadEncodedTile() failed.
> > >
> > > ERROR 1: IReadBlock failed at X offset 0, Y offset 3
> > > ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 3
> > >
> > > I get effectively the same error when I run this without the -ro
> > > option.
> > >
> > > Any idea's what is going wrong.
> > >
> > > Regards,
> > > Craig Dillabaugh
> > >
> > >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev


From matt.gregory at oregonstate.edu  Fri Jun 19 13:33:31 2009
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Fri Jun 19 13:33:34 2009
Subject: [gdal-dev] rgdal support for RATs?
Message-ID: <451453C181B199458A55B2B1723FAC000260CBAF@SAGE.forestry.oregonstate.edu>

Is there any support for raster attribute tables in the rgdal package at
present?  It didn't look like it, but wanted to make sure I wasn't
overlooking something.

thanks, matt
From even.rouault at mines-paris.org  Fri Jun 19 13:44:10 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jun 19 13:44:20 2009
Subject: [gdal-dev] moving filter averaging in GDAL.
In-Reply-To: <COL113-W55CEE0316231DF928C7B53F43A0@phx.gbl>
References: <COL113-W44FA3154200BAA527C946AF43A0@phx.gbl>
	<4A3BC995.6010807@pobox.com>
	<COL113-W55CEE0316231DF928C7B53F43A0@phx.gbl>
Message-ID: <200906191944.11542.even.rouault@mines-paris.org>

It should be relatively straighforward to transpose from Python to C++, as 
Python API is mostly deduced from the original C++ one. Look at the 
documentation of the C++ API on gdal.org

Le Friday 19 June 2009 19:27:40 Belaid MOA, vous avez ?crit?:
> Thanks a lot Frank. Is there any C/C++ version for that? I am doing the
> averaging filter from C++ code.
>
> With best regards.
> Belaid Moa.
>
> > Date: Fri, 19 Jun 2009 13:23:33 -0400
> > From: warmerdam@pobox.com
> > To: belaid_moa@hotmail.com
> > CC: gdal-dev@lists.osgeo.org
> > Subject: Re: [gdal-dev] moving filter averaging in GDAL.
> >
> > Belaid MOA wrote:
> > > Hi,
> > >  Does GDAL have functions for applying an averaging filter of window,
> > > say 11x11, to an image? This is something that comes up all the time in
> > > image analysis. So, I suppose GDAL has built-in functions for that.
> > >
> > >  Any help on this is very appreciated.
> >
> > Belaid,
> >
> > There is support for filtering, including average filtering, with the
> > gdalfilter.py command in gdal/swig/python/samples.  It accomplished
> > by creating a virtual file using the <KernelFilteredSource> directive -
> > so ultimately the work is done by the VRT driver.
> >
> > Best regards,
> > --
> > ---------------------------------------+---------------------------------
> >----- I set the clouds in motion - turn up   | Frank Warmerdam,
> > warmerdam@pobox.com light and sound - activate the windows |
> > http://pobox.com/~warmerdam and watch the world go round - Rush    |
> > Geospatial Programmer for Rent
>
> _________________________________________________________________
> We are your photos. Share us now with Windows Live Photos.
> http://go.microsoft.com/?linkid=9666047


From pal.kristensen at statkart.no  Fri Jun 19 13:44:31 2009
From: pal.kristensen at statkart.no (paalkr)
Date: Fri Jun 19 13:44:33 2009
Subject: [Gdal-dev] 1.7dev windows binaries?
Message-ID: <1245433471174-3121085.post@n2.nabble.com>


Hi!

Are there any gdal 1.7dev binaries including all the command utilities
available for windows? I'm specially interested in the dem tools.

Regards,
P?l Kristensen

-----

Regards,
P?l Kristensen
-- 
View this message in context: http://n2.nabble.com/1.7dev-windows-binaries--tp3121085p3121085.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From Craig.Dillabough at AGR.GC.CA  Fri Jun 19 13:44:58 2009
From: Craig.Dillabough at AGR.GC.CA (Dillabough, Craig)
Date: Fri Jun 19 13:45:01 2009
Subject: [gdal-dev] Scaling images with gdal_translate
Message-ID: <8EA33237DDDB244E860ADDE976124AE50202CBCA@ONOTTAXMS2.AGR.GC.CA>

I am scaling a 32-bit floating point GeoTiff image, using the command:

gdal_translate -ot Byte -of GTiff -scale -a_nodata 0
Av.MaxNDVI.2000.2009.Week.19.tif overview/week19.8bpp.tif

My understanding is that the -scale option should scale my image from:

Min_value -> 0
Max_value -> 255

And everything in between is scaled linearly. 

After doing so, I run gdalinfo on the output week19.8bpp.tif which among
the other things it spits out is the following:

1  Driver: GTiff/GeoTIFF
2  Files: week19.8bpp.tif
3         week19.8bpp.tif.aux.xml
4  Size is 28800, 9600
5  Coordinate System is:
   ....
6  Origin = (-10007554.677000004798174,6671703.118001982569695)
7  Pixel Size = (231.656358263958310,-231.656358263958339)
8  Metadata:
9  AREA_OR_POINT=Area
10 TIFFTAG_SOFTWARE=IMAGINE TIFF Support
11 Copyright 1991 - 1999 by ERDAS, Inc. All Rights Reserved
12 @(#)$RCSfile: etif.c $ $Revision: 1.10.1.9.1.9.2.11 $ $Date:
2004/09/15 18:42:01EDT $
13   TIFFTAG_XRESOLUTION=1
14  TIFFTAG_YRESOLUTION=1
15   TIFFTAG_RESOLUTIONUNIT=1 (unitless)
16 Image Structure Metadata:
17  INTERLEAVE=BAND
18 Corner Coordinates:
19 Upper Left  (-10007554.677, 6671703.118) (180d 0'0.00"W, 60d
0'0.00"N)
......
20 Band 1 Block=28800x1 Type=Byte, ColorInterp=Gray
21  Min=-0.199 Max=563.324
22  Minimum=-0.199, Maximum=563.324, Mean=0.233, StdDev=0.228 
23  NoData Value=0
24  Metadata:
25    STATISTICS_MINIMUM=-0.19934794306755
.....
26    STATISTICS_HISTONUMBINS=65536
27    STATISTICS_HISTOMIN=-0.19934794306755
28    STATISTICS_HISTOMAX=563.32446289062
29    LAYER_TYPE=athematic
30
STATISTICS_HISTOBINVALUES=27|28|58|70|86|90|99|79|50|30|31|35|35|30|34|3
9|37|41|38|43|63|46|71|39553020|31    37620637|
32
12895729|6925105|5280415|4393664|3759686|3302997|2920409|2608889|2344772
|2069413|2216309|1720438|1361429|33    1252933|1197
34
673|1167295|1161275|1180804|1212838|1266437|1326368|1389520|1480545|1624
178|1825891|2039326|2224735|
35     2363030|2454439|2
36     515120|2547460|2570836|2604551|2652160|2697275|2738886|

And so on.

I had a few questions:
1. Am I correct that linear scaling is used (are there other options?)
2. I guess the Min and Max values (Line 21) are retained from the
original dataset, but I was sort of expecting to see a Min = 0 and Max =
255. Also, why is the 65000 bin histogram retained for a 8 bit image?  

It seems sort of confusing that some of the Tiff Tag data appears to be
updated while other stuff is just copied over from the original dataset.
Is there any way to force it to throw out/update the metadata?


Thanks for any information.
Craig


From belaid_moa at hotmail.com  Fri Jun 19 13:50:02 2009
From: belaid_moa at hotmail.com (Belaid MOA)
Date: Fri Jun 19 13:50:04 2009
Subject: [gdal-dev] moving filter averaging in GDAL.
In-Reply-To: <200906191944.11542.even.rouault@mines-paris.org>
References: <COL113-W44FA3154200BAA527C946AF43A0@phx.gbl>
	<4A3BC995.6010807@pobox.com>
	<COL113-W55CEE0316231DF928C7B53F43A0@phx.gbl>
	<200906191944.11542.even.rouault@mines-paris.org>
Message-ID: <COL113-W409C2599EBCF5E72F0060AF43A0@phx.gbl>


Thank you very much Even. I was just making sure I am not reinventing the wheel :).
I will then write the C++ version.

With best regards.
~Belaid...

> From: even.rouault@mines-paris.org
> To: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] moving filter averaging in GDAL.
> Date: Fri, 19 Jun 2009 19:44:10 +0200
> CC: belaid_moa@hotmail.com
> 
> It should be relatively straighforward to transpose from Python to C++, as 
> Python API is mostly deduced from the original C++ one. Look at the 
> documentation of the C++ API on gdal.org
> 
> Le Friday 19 June 2009 19:27:40 Belaid MOA, vous avez ?crit :
> > Thanks a lot Frank. Is there any C/C++ version for that? I am doing the
> > averaging filter from C++ code.
> >
> > With best regards.
> > Belaid Moa.
> >
> > > Date: Fri, 19 Jun 2009 13:23:33 -0400
> > > From: warmerdam@pobox.com
> > > To: belaid_moa@hotmail.com
> > > CC: gdal-dev@lists.osgeo.org
> > > Subject: Re: [gdal-dev] moving filter averaging in GDAL.
> > >
> > > Belaid MOA wrote:
> > > > Hi,
> > > >  Does GDAL have functions for applying an averaging filter of window,
> > > > say 11x11, to an image? This is something that comes up all the time in
> > > > image analysis. So, I suppose GDAL has built-in functions for that.
> > > >
> > > >  Any help on this is very appreciated.
> > >
> > > Belaid,
> > >
> > > There is support for filtering, including average filtering, with the
> > > gdalfilter.py command in gdal/swig/python/samples.  It accomplished
> > > by creating a virtual file using the <KernelFilteredSource> directive -
> > > so ultimately the work is done by the VRT driver.
> > >
> > > Best regards,
> > > --
> > > ---------------------------------------+---------------------------------
> > >----- I set the clouds in motion - turn up   | Frank Warmerdam,
> > > warmerdam@pobox.com light and sound - activate the windows |
> > > http://pobox.com/~warmerdam and watch the world go round - Rush    |
> > > Geospatial Programmer for Rent
> >
> > _________________________________________________________________
> > We are your photos. Share us now with Windows Live Photos.
> > http://go.microsoft.com/?linkid=9666047
> 
> 

_________________________________________________________________
Attention all humans. We are your photos. Free us.
http://go.microsoft.com/?linkid=9666046
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090619/0eaf9ddf/attachment.html
From even.rouault at mines-paris.org  Fri Jun 19 13:50:48 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jun 19 13:50:57 2009
Subject: [Gdal-dev] 1.7dev windows binaries?
In-Reply-To: <1245433471174-3121085.post@n2.nabble.com>
References: <1245433471174-3121085.post@n2.nabble.com>
Message-ID: <200906191950.48431.even.rouault@mines-paris.org>

You can find binaries in Tamas Szekeres daily builds :
http://vbkto.dyndns.org:1280/sdk/Default.aspx

Le Friday 19 June 2009 19:44:31 paalkr, vous avez ?crit?:
> Hi!
>
> Are there any gdal 1.7dev binaries including all the command utilities
> available for windows? I'm specially interested in the dem tools.
>
> Regards,
> P?l Kristensen
>
> -----
>
> Regards,
> P?l Kristensen


From even.rouault at mines-paris.org  Fri Jun 19 13:52:33 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jun 19 13:52:42 2009
Subject: [gdal-dev] parser the information from the gdalinfo
In-Reply-To: <b6ae15040906182024u1755eb07pff14380423bdcf3a@mail.gmail.com>
References: <b6ae15040906181948v2300ca3el10f2733d066875c6@mail.gmail.com>
	<b6ae15040906182024u1755eb07pff14380423bdcf3a@mail.gmail.com>
Message-ID: <200906191952.34004.even.rouault@mines-paris.org>

It doesn't make much sense to parse the output of gdalinfo, which has no 
guarantee to remain stable over versions. You should rather use the C, C++, 
Python, Perl, C# or Java API to do that.

Le Friday 19 June 2009 05:24:48 maven apache, vous avez ?crit?:
> Hi:I try to get the information of a image:product_compose123.img and I got
> a lot of infomation (perhaps 1500 lines).
> I wonder there is some tools to handle this information? I want to change
> them to a xml document.
> -----------------------------------
> PROJCS["Lambert Conformal Conic",
>     GEOGCS["Krasovsky",
>         DATUM["Krasovsky",
>             SPHEROID["Krasovsky",6378245,298.3000003760163],
>             TOWGS84[0,0,0,0,0,0,0]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433]],
>     PROJECTION["Lambert_Conformal_Conic_2SP"],
>     PARAMETER["standard_parallel_1",47],
>     PARAMETER["standard_parallel_2",25],
>     PARAMETER["latitude_of_origin",36],
>     PARAMETER["central_meridian",105],
>     PARAMETER["false_easting",5000000],
>     PARAMETER["false_northing",5000000],
>     UNIT["meters",1]]
> ------------------------------------
> Above is the Coordinate System  described with OGC wkt,I think transfer
> this to xml format is not a easy job.
> PS:
> The information is to long,because it include the all the bands
> information, since I do not need the band info I wonder there is other
> commond?


From pal.kristensen at statkart.no  Fri Jun 19 13:54:58 2009
From: pal.kristensen at statkart.no (paalkr)
Date: Fri Jun 19 13:55:01 2009
Subject: [Gdal-dev] 1.7dev windows binaries?
In-Reply-To: <200906191950.48431.even.rouault@mines-paris.org>
References: <1245433471174-3121085.post@n2.nabble.com>
	<200906191950.48431.even.rouault@mines-paris.org>
Message-ID: <1245434098877-3121149.post@n2.nabble.com>


Hi!

Thanks for the information, unfortunately my web browsers (firefox, IE7)
always gets a timeout on that web page. Are there anything I can do to avoid
that from happening, or are there any mirror sites?

Regards,
PK


Even Rouault wrote:
> 
> You can find binaries in Tamas Szekeres daily builds :
> http://vbkto.dyndns.org:1280/sdk/Default.aspx
> 
> Le Friday 19 June 2009 19:44:31 paalkr, vous avez ?crit?:
>> Hi!
>>
>> Are there any gdal 1.7dev binaries including all the command utilities
>> available for windows? I'm specially interested in the dem tools.
>>
>> Regards,
>> P?l Kristensen
>>
>> -----
>>
>> Regards,
>> P?l Kristensen
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 


-----

Regards,
P?l Kristensen
-- 
View this message in context: http://n2.nabble.com/1.7dev-windows-binaries--tp3121085p3121149.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From warmerdam at pobox.com  Fri Jun 19 14:00:53 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jun 19 14:01:09 2009
Subject: [Gdal-dev] 1.7dev windows binaries?
In-Reply-To: <1245433471174-3121085.post@n2.nabble.com>
References: <1245433471174-3121085.post@n2.nabble.com>
Message-ID: <4A3BD255.7010605@pobox.com>

paalkr wrote:
> Hi!
> 
> Are there any gdal 1.7dev binaries including all the command utilities
> available for windows? I'm specially interested in the dem tools.

Pal,

The OSGeo4W gdal-dev package was rebuilt just a few days ago and includes
the gdaldem command.  To install the gdal-dev package you need to go through
the OSGeo4W advanced install, and select the gdal-dev package (possibly
in addition to the gdal package which is 1.5.x.).

At the OSGeo4W command shell you would need to type "gdaldev" to switch
to the development version of GDAL instead of the stock version (1.5.x).

   http://osgeo4w.osgeo.org/

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Fri Jun 19 14:02:03 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jun 19 14:02:11 2009
Subject: [Gdal-dev] 1.7dev windows binaries?
In-Reply-To: <1245434098877-3121149.post@n2.nabble.com>
References: <1245433471174-3121085.post@n2.nabble.com>
	<200906191950.48431.even.rouault@mines-paris.org>
	<1245434098877-3121149.post@n2.nabble.com>
Message-ID: <200906192002.03336.even.rouault@mines-paris.org>

Strange : works fine for me. Maybe some firewall that prevents you from 
connecting to port 1280 ?

Otherwise you could try the latest FWTools (2.4.1) that also includes 
gdaldem.exe : http://home.gdal.org/fwtools/FWTools241.exe

Le Friday 19 June 2009 19:54:58 paalkr, vous avez ?crit?:
> Hi!
>
> Thanks for the information, unfortunately my web browsers (firefox, IE7)
> always gets a timeout on that web page. Are there anything I can do to
> avoid that from happening, or are there any mirror sites?
>
> Regards,
> PK
>
> Even Rouault wrote:
> > You can find binaries in Tamas Szekeres daily builds :
> > http://vbkto.dyndns.org:1280/sdk/Default.aspx
> >
> > Le Friday 19 June 2009 19:44:31 paalkr, vous avez ?crit?:
> >> Hi!
> >>
> >> Are there any gdal 1.7dev binaries including all the command utilities
> >> available for windows? I'm specially interested in the dem tools.
> >>
> >> Regards,
> >> P?l Kristensen
> >>
> >> -----
> >>
> >> Regards,
> >> P?l Kristensen
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -----
>
> Regards,
> P?l Kristensen


From pal.kristensen at statkart.no  Fri Jun 19 14:09:45 2009
From: pal.kristensen at statkart.no (paalkr)
Date: Fri Jun 19 14:09:46 2009
Subject: [Gdal-dev] 1.7dev windows binaries?
In-Reply-To: <200906192002.03336.even.rouault@mines-paris.org>
References: <1245433471174-3121085.post@n2.nabble.com>
	<200906191950.48431.even.rouault@mines-paris.org>
	<1245434098877-3121149.post@n2.nabble.com>
	<200906192002.03336.even.rouault@mines-paris.org>
Message-ID: <1245434985396-3121237.post@n2.nabble.com>


Probably!

P?l


Even Rouault wrote:
> 
> Strange : works fine for me. Maybe some firewall that prevents you from 
> connecting to port 1280 ?
> 
> Otherwise you could try the latest FWTools (2.4.1) that also includes 
> gdaldem.exe : http://home.gdal.org/fwtools/FWTools241.exe
> 
> Le Friday 19 June 2009 19:54:58 paalkr, vous avez ?crit?:
>> Hi!
>>
>> Thanks for the information, unfortunately my web browsers (firefox, IE7)
>> always gets a timeout on that web page. Are there anything I can do to
>> avoid that from happening, or are there any mirror sites?
>>
>> Regards,
>> PK
>>
>> Even Rouault wrote:
>> > You can find binaries in Tamas Szekeres daily builds :
>> > http://vbkto.dyndns.org:1280/sdk/Default.aspx
>> >
>> > Le Friday 19 June 2009 19:44:31 paalkr, vous avez ?crit?:
>> >> Hi!
>> >>
>> >> Are there any gdal 1.7dev binaries including all the command utilities
>> >> available for windows? I'm specially interested in the dem tools.
>> >>
>> >> Regards,
>> >> P?l Kristensen
>> >>
>> >> -----
>> >>
>> >> Regards,
>> >> P?l Kristensen
>> >
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev@lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> -----
>>
>> Regards,
>> P?l Kristensen
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 


-----

Regards,
P?l Kristensen
-- 
View this message in context: http://n2.nabble.com/1.7dev-windows-binaries--tp3121085p3121237.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From pal.kristensen at statkart.no  Fri Jun 19 14:11:07 2009
From: pal.kristensen at statkart.no (paalkr)
Date: Fri Jun 19 14:11:10 2009
Subject: [Gdal-dev] 1.7dev windows binaries?
In-Reply-To: <4A3BD255.7010605@pobox.com>
References: <1245433471174-3121085.post@n2.nabble.com>
	<4A3BD255.7010605@pobox.com>
Message-ID: <1245435067885-3121244.post@n2.nabble.com>


Thanks

Working great!

Regards,
P?l Kristensen


Frank Warmerdam wrote:
> 
> paalkr wrote:
>> Hi!
>> 
>> Are there any gdal 1.7dev binaries including all the command utilities
>> available for windows? I'm specially interested in the dem tools.
> 
> Pal,
> 
> The OSGeo4W gdal-dev package was rebuilt just a few days ago and includes
> the gdaldem command.  To install the gdal-dev package you need to go
> through
> the OSGeo4W advanced install, and select the gdal-dev package (possibly
> in addition to the gdal package which is 1.5.x.).
> 
> At the OSGeo4W command shell you would need to type "gdaldev" to switch
> to the development version of GDAL instead of the stock version (1.5.x).
> 
>    http://osgeo4w.osgeo.org/
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 


-----

Regards,
P?l Kristensen
-- 
View this message in context: http://n2.nabble.com/1.7dev-windows-binaries--tp3121085p3121244.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jctoney at yahoo.com  Fri Jun 19 17:47:49 2009
From: jctoney at yahoo.com (Chris Toney)
Date: Fri Jun 19 17:54:33 2009
Subject: [gdal-dev] incorrect result from gdalwarp to Michigan GeoRef
Message-ID: <346357.82469.qm@web32908.mail.mud.yahoo.com>


Hi,
gdalwarp seems to give an incorrect result when reprojecting from USGS North American Albers (NAD83) to Michigan Oblique Mercator (NAD83). The output raster is not in the right place.
?
Tried with gdal 1.5.1, FWTools 2.2.8 and FWTools 2.3.0. Command line used:
?
gdalwarp -t_srs EPSG:3078 -tr 30 30 -srcnodata -9999 -dstnodata -9999 -of HFA evt_1_Alb83.img evt_1_MIGeoRef_gdal.img
?
The EPSG definition in pcs.csv is correct as far as I can tell.
?
Test data sets are available at:
http://www.spatialsimulation.org/test/gdalwarp_MI_georef.zip
evt_1_Alb83.img is the source raster
evt1_MIGeoRef_gdal.img is the output from gdalwarp
evt1_MIGeoRef_imagine.img is the output from Erdas Imagine based on specifying EPSG 3078. This raster is in the correct location.
?
gdalinfo for these rasters is copied below.
?
Am I missing anything with the gdalwarp usage?
?
Thanks.
?
Chris Toney
?
?
gdalinfo -norat -noct evt_1_alb83.img
Driver: HFA/Erdas Imagine Images (.img)
Files: evt_1_alb83.img
Size is 30, 24
Coordinate System is:
PROJCS["NAD_1983_Albers",
??? GEOGCS["GCS_North_American_1983",
??????? DATUM["North_American_Datum_1983",
??????????? SPHEROID["GRS_1980",6378137.0,298.257222101]],
??????? PRIMEM["Greenwich",0.0],
??????? UNIT["Degree",0.0174532925199433]],
??? PROJECTION["Albers_Conic_Equal_Area"],
??? PARAMETER["False_Easting",0.0],
??? PARAMETER["False_Northing",0.0],
??? PARAMETER["longitude_of_center",-96.0],
??? PARAMETER["Standard_Parallel_1",29.5],
??? PARAMETER["Standard_Parallel_2",45.5],
??? PARAMETER["latitude_of_center",23.0],
??? UNIT["Meter",1.0]]
Origin = (633135.000000000000000,2629425.000000000000000)
Pixel Size = (30.000000000000000,-30.000000000000000)
Corner Coordinates:
Upper Left? (? 633135.000, 2629425.000) ( 87d46'39.79"W, 46d24'25.53"N)
Lower Left? (? 633135.000, 2628705.000) ( 87d46'42.70"W, 46d24'2.24"N)
Upper Right (? 634035.000, 2629425.000) ( 87d45'57.92"W, 46d24'23.00"N)
Lower Right (? 634035.000, 2628705.000) ( 87d46'0.83"W, 46d23'59.71"N)
Center????? (? 633585.000, 2629065.000) ( 87d46'20.31"W, 46d24'12.62"N)
Band 1 Block=30x24 Type=Int16, ColorInterp=Palette
? Description = Band_1
? Min=21.000 Max=2481.000
? Minimum=21.000, Maximum=2481.000, Mean=2266.315, StdDev=395.461
? NoData Value=-9999
?
?
gdalinfo -norat -noct evt_1_migeoref_gdal.img
Driver: HFA/Erdas Imagine Images (.img)
Files: evt_1_migeoref_gdal.img
Size is 32, 27
Coordinate System is:
PROJCS["NAD83_Michigan_Oblique_Mercator",
??? GEOGCS["GCS_North_American_1983",
??????? DATUM["North_American_Datum_1983",
??????????? SPHEROID["GRS_1980",6378137,298.257222101]],
??????? PRIMEM["Greenwich",0],
??????? UNIT["Degree",0.017453292519943295]],
??? PROJECTION["Hotine_Oblique_Mercator"],
??? PARAMETER["latitude_of_center",45.30916666666666],
??? PARAMETER["longitude_of_center",-86],
??? PARAMETER["azimuth",337.25556],
??? PARAMETER["scale_factor",0.9996],
??? PARAMETER["false_easting",2546731.496],
??? PARAMETER["false_northing",-4354009.816],
??? UNIT["Meter",1]]
Origin = (2410019.541034979300000,-4230498.913706443300000)
Pixel Size = (30.000000000000000,-30.000000000000000)
Corner Coordinates:
Upper Left? ( 2410019.541,-4230498.914) ( 87d46'43.45"W, 46d24'25.47"N)
Lower Left? ( 2410019.541,-4231308.914) ( 87d46'42.60"W, 46d23'59.24"N)
Upper Right ( 2410979.541,-4230498.914) ( 87d45'58.50"W, 46d24'26.17"N)
Lower Right ( 2410979.541,-4231308.914) ( 87d45'57.66"W, 46d23'59.93"N)
Center????? ( 2410499.541,-4230903.914) ( 87d46'20.55"W, 46d24'12.70"N)
Band 1 Block=64x64 Type=Int16, ColorInterp=Palette
? Description = Layer_1
? Min=21.000 Max=2481.000
? Minimum=21.000, Maximum=2481.000, Mean=2266.046, StdDev=395.452
? NoData Value=-9999
?
?
gdalinfo -norat -noct evt_1_migeoref_imagine.img
Driver: HFA/Erdas Imagine Images (.img)
Files: evt_1_migeoref_imagine.img
Size is 32, 27
Coordinate System is:
PROJCS["Oblique Mercator (Hotine)",
??? GEOGCS["NAD83",
??????? DATUM["North_American_Datum_1983",
??????????? SPHEROID["GRS 1980",6378137,298.257222101,
??????????????? AUTHORITY["EPSG","7019"]],
??????????? TOWGS84[0,0,0,0,0,0,0],
??????????? AUTHORITY["EPSG","6269"]],
??????? PRIMEM["Greenwich",0,
??????????? AUTHORITY["EPSG","8901"]],
??????? UNIT["degree",0.0174532925199433,
??????????? AUTHORITY["EPSG","9108"]],
??????? AUTHORITY["EPSG","4269"]],
??? PROJECTION["Hotine_Oblique_Mercator"],
??? PARAMETER["latitude_of_center",45.30916666666666],
??? PARAMETER["longitude_of_center",-86],
??? PARAMETER["azimuth",337.25556],
??? PARAMETER["rectified_grid_angle",0],
??? PARAMETER["scale_factor",0.9996],
??? PARAMETER["false_easting",2546731.496],
??? PARAMETER["false_northing",-4354009.816],
??? UNIT["meters",1]]
Origin = (363137.000000000000000,652110.000000000000000)
Pixel Size = (30.000000000000000,-30.000000000000000)
Corner Coordinates:
Upper Left? (? 363137.000,? 652110.000) (178d20'9.95"E, 72d16'45.90"N)
Lower Left? (? 363137.000,? 651300.000) (178d21'35.77"E, 72d16'45.30"N)
Upper Right (? 364097.000,? 652110.000) (178d20'12.26"E, 72d17'16.88"N)
Lower Right (? 364097.000,? 651300.000) (178d21'38.13"E, 72d17'16.28"N)
Center????? (? 363617.000,? 651705.000) (178d20'54.03"E, 72d17'1.09"N)
Band 1 Block=32x27 Type=Int16, ColorInterp=Palette
? Description = Band_1
? Min=21.000 Max=2481.000
? Minimum=21.000, Maximum=2481.000, Mean=2265.965, StdDev=395.718
? NoData Value=-9999


      
From warmerdam at pobox.com  Fri Jun 19 23:37:05 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jun 19 23:37:05 2009
Subject: [gdal-dev] incorrect result from gdalwarp to Michigan GeoRef
In-Reply-To: <346357.82469.qm@web32908.mail.mud.yahoo.com>
References: <346357.82469.qm@web32908.mail.mud.yahoo.com>
Message-ID: <4A3C5961.5060000@pobox.com>

Chris Toney wrote:
> Hi,
> gdalwarp seems to give an incorrect result when reprojecting from USGS North American Albers (NAD83) to Michigan Oblique Mercator (NAD83). The output raster is not in the right place.
>  
> Tried with gdal 1.5.1, FWTools 2.2.8 and FWTools 2.3.0. Command line used:
>  
> gdalwarp -t_srs EPSG:3078 -tr 30 30 -srcnodata -9999 -dstnodata -9999 -of HFA evt_1_Alb83.img evt_1_MIGeoRef_gdal.img
>  
> The EPSG definition in pcs.csv is correct as far as I can tell.
>  
> Test data sets are available at:
> http://www.spatialsimulation.org/test/gdalwarp_MI_georef.zip
> evt_1_Alb83.img is the source raster
> evt1_MIGeoRef_gdal.img is the output from gdalwarp
> evt1_MIGeoRef_imagine.img is the output from Erdas Imagine based on specifying EPSG 3078. This raster is in the correct location.
>  
> gdalinfo for these rasters is copied below.
>  
> Am I missing anything with the gdalwarp usage?

Chris,

I have not reviewed this in detail, but I would suggest filing a ticket on
the issue.  It isn't immediately obvious to me what is going wrong.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Bob.Bruce at gov.mb.ca  Sat Jun 20 05:20:54 2009
From: Bob.Bruce at gov.mb.ca (Bob Bruce)
Date: Sat Jun 20 05:18:58 2009
Subject: [gdal-dev] GDAL Python API translation options for clipping an
	image?
In-Reply-To: <2D7230119FDBCE4DB0984678195B92009CEADE@OC1EX04.ME.MBGOV.CA>
Message-ID: <014f01c9f188$6ae6b2c0$6401a8c0@cs41617>


Hi:
	I am working on a Quantum GIS plugin to clip individual images.
I am trying to figure out how to issue a command from the Python API
which is the equivalent of:

gdal_translate -a_srs "EPSG:26914" -a_nodata 0 -of GTiff -prjwin 370600
6021200 327700 6023350 MB07005-83-R-modified.tif
MB07005-83-R-modifiedTrim.tif

I see that the creation options are accessible in the CreateCopy method
of the GDALDriver class but I cannot see where the other GDAL_translate
options are available. What should I do to perform this kind of
translation via the GDAL Python API?

Thanks,
	 Bob Bruce

-------------- next part --------------
A non-text attachment was scrubbed...
Name: winmail.dat
Type: application/ms-tnef
Size: 1840 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090620/2b839790/winmail.bin
From warmerdam at pobox.com  Sat Jun 20 06:57:43 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jun 20 06:58:01 2009
Subject: [gdal-dev] GDAL Python API translation options for clipping an
	image?
In-Reply-To: <014f01c9f188$6ae6b2c0$6401a8c0@cs41617>
References: <014f01c9f188$6ae6b2c0$6401a8c0@cs41617>
Message-ID: <4A3CC0A7.30807@pobox.com>

Bob Bruce wrote:
> Hi:
> 	I am working on a Quantum GIS plugin to clip individual images.
> I am trying to figure out how to issue a command from the Python API
> which is the equivalent of:
> 
> gdal_translate -a_srs "EPSG:26914" -a_nodata 0 -of GTiff -prjwin 370600
> 6021200 327700 6023350 MB07005-83-R-modified.tif
> MB07005-83-R-modifiedTrim.tif
> 
> I see that the creation options are accessible in the CreateCopy method
> of the GDALDriver class but I cannot see where the other GDAL_translate
> options are available. What should I do to perform this kind of
> translation via the GDAL Python API?

Bob,

The gdal_translate command accomplishes this by constructing an
intermediate virtual dataset which references only a subwindow
of the source dataset.  This is also how it accomplishes band
subsetting/rearranging.  I would suggest you skim the gdal_translate
code to get a sense of how this is accomplished.

Looking at gdal_translate I see it uses direct access to the VRT
API to accomplish some of the steps to construct a virtual dataset.
I don't think this API is exposed in Python, but the same effect can
be accomplished by assembling VRT XML as described at:

   http://www.gdal.org/gdal_vrttut.html

You might also find it helpful to review the code for the OpenEV Export
Tool which provides functionality fairly similar to gdal_translate from a
Python managed GUI.  It also construct VRT XML.  Hmm, on reflection I see
OpenEV abstracts most of the VRT portion of things into a vrtutils.py
module that might be useful with modification. I have attached it for
reference,

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

-------------- next part --------------
A non-text attachment was scrubbed...
Name: vrtutils.py
Type: text/x-python
Size: 48402 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090620/b4e325b8/vrtutils-0001.py
From Alberto.Telletxea at eea.europa.eu  Tue Jun  2 07:51:36 2009
From: Alberto.Telletxea at eea.europa.eu (Alberto Telletxea)
Date: Sat Jun 20 07:00:01 2009
Subject: [gdal-dev] GML 3.1.1
Message-ID: <ECDBB484CB145E429AAB0661F935E4E33174813EBD@SLOTHMAIL.eea.eu.int>


Dear GDAL developers
We would like to know if you have in mind to develop for the ogr2ogr utility the conversion to GML 3.1.1

At the European Environment Agency we use your tools to convert SHP files into GML. Once we have the GML generated we import them in SQL Server Spatial for further processing.

To import the GML into SQL Server Spatial 2008 we have to do some modification in the GML generated by ogr2ogr utility.
This is what we replace in the GML:

"gml:outerBoundaryIs" by "gml:exterior"
"gml:innerBoundaryIs" by "gml:interior"
"gml:coordinates" by "gml:posList"

And substitute comas by space

This is the GML 1.0 generated by ogr2ogr utiliy:
 <ogr:geometryProperty><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>-16.124971301678141,28.532350331930321 -16.125349339587991,28.532437725211178 -16.125317491520253,28.53240278983877 -16.125215922984399,28.532365814754602 -16.125097942598817,28.532313542029279 -16.125047035980906,28.532302772190828 -16.124971301678141,28.532350331930321</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></ogr:geometryProperty>

This is the GML 3.1. needed to import the spatial data into SQL Server 2008:
 <ogr:geometryProperty><gml:Polygon><gml:exterior><gml:LinearRing><gml:posList>-16.124971301678141 28.532350331930321 -16.124971301673579 28.532350331923503 -16.115508612667128 28.532428395055103 -16.115508611853965 28.532428391612456 -16.146225850780553 28.512726744977815 </gml:posList></gml:LinearRing></gml:exterior></gml:Polygon></ogr:geometryProperty>


Please do not hesitate in contact me for further details.

Looking to hearing from you.

Best Regards

Alberto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090602/c4e5adb9/attachment.html
From mateusz at loskot.net  Sat Jun 20 07:43:29 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Jun 20 07:43:37 2009
Subject: [gdal-dev] GML 3.1.1
In-Reply-To: <ECDBB484CB145E429AAB0661F935E4E33174813EBD@SLOTHMAIL.eea.eu.int>
References: <ECDBB484CB145E429AAB0661F935E4E33174813EBD@SLOTHMAIL.eea.eu.int>
Message-ID: <4A3CCB61.8040701@loskot.net>

Alberto Telletxea wrote:
> ** 
> Dear GDAL developers
> We would like to know if you have in mind to develop for the *ogr2ogr*
> utility the conversion to GML 3.1.1

It's been asked recently, check Frank's reply here

http://lists.osgeo.org/pipermail/gdal-dev/2009-June/020856.html

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From warmerdam at pobox.com  Sat Jun 20 08:12:39 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jun 20 08:12:58 2009
Subject: [gdal-dev] Towards more user-friendly error messages
In-Reply-To: <200906172001.00870.even.rouault@mines-paris.org>
References: <4A38FCC0.2070301@tkk.fi>
	<200906172001.00870.even.rouault@mines-paris.org>
Message-ID: <4A3CD237.4080107@pobox.com>

Even Rouault wrote:
> Ari,
> 
> It's funny because I myself got caught by the same issue a few days ago.
> So I've just improved error reporting on shapefile layer for SetFeature(), 
> CreateFeature() and DeleteFeature() operations in trunk (r17255). It was 
> trivial in that case as the OGRShapeLayer object has a flag to indicate if it 
> is opened in read-only or update mode.
> 
> I'm not sure there is a policy for error reporting and how it could be 
> formulated if there was one ! If we can make it clearer in situations where 
> it is not currently, just report it as you did.

Ari / Even,

My position is that the higher level methods like SetFeature(), CreateFeature()
etc ought to be checking read-only status and providing informative errors.
In general we need to try and issue informative errors at the highest
level we can for the sake of users and developers.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mark at overmeer.net  Sat Jun 20 08:08:22 2009
From: mark at overmeer.net (Mark Overmeer)
Date: Sat Jun 20 08:18:00 2009
Subject: [gdal-dev] GML 3.1.1
In-Reply-To: <20090620120707.GL5615@moon.overmeer.net>
References: <ECDBB484CB145E429AAB0661F935E4E33174813EBD@SLOTHMAIL.eea.eu.int>
	<20090620120707.GL5615@moon.overmeer.net>
Message-ID: <20090620120822.GM5615@moon.overmeer.net>

* Alberto Telletxea (Alberto.Telletxea@eea.europa.eu) [090602 11:37]:
> Dear GDAL developers
> We would like to know if you have in mind to develop for the ogr2ogr utility
> the conversion to GML 3.1.1
> 
> "gml:outerBoundaryIs" by "gml:exterior"
> "gml:innerBoundaryIs" by "gml:interior"
> "gml:coordinates" by "gml:posList"

For lat-long points you have to swap the order of the coordinates, as far as I
know.  It changed from always being "x,y" into "natural order".

Besides, it would be useful to have a GML 3.2.1 output as well, which is used
in ISO-19139.  Not as popular yet, but really needed in the near future.  A
lot of names have changed (again).
-- 
               MarkOv
From aaron.j.brown at hotmail.com  Sun Jun 21 01:18:00 2009
From: aaron.j.brown at hotmail.com (Aaron Brown)
Date: Sun Jun 21 10:24:57 2009
Subject: [gdal-dev] (no subject)
Message-ID: <COL101-W25194C0BF012F1F825B8E5B0380@phx.gbl>


Hi all,

I have to convert DTED Level 1 data into DTED Level 0 data, and was just wondering if anyone would be able to help?

Regards

_________________________________________________________________
View photos of singles in your area Click Here
http://dating.ninemsn.com.au/search/search.aspx?exec=go&tp=q&gc=2&tr=1&lage=18&uage=55&cl=14&sl=0&dist=50&po=1&do=2&trackingid=1046138&r2s=1&_t=773166090&_r=WLM_EndText
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090621/f2dd5c12/attachment.html
From warmerdam at pobox.com  Sun Jun 21 10:43:47 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Jun 21 10:44:03 2009
Subject: [gdal-dev] DTED Level 1 to Level 0
In-Reply-To: <COL101-W25194C0BF012F1F825B8E5B0380@phx.gbl>
References: <COL101-W25194C0BF012F1F825B8E5B0380@phx.gbl>
Message-ID: <4A3E4723.7050903@pobox.com>

Aaron Brown wrote:
> Hi all,
> 
> I have to convert DTED Level 1 data into DTED Level 0 data, and was just 
> wondering if anyone would be able to help?

Aaron,

I have taken the liberty of attaching a related subject line for this email.

What have you tried so far?  Have you read the DTED drive documentation
yet?  Are you fine with doing the conversion using gdal_translate?

   http://www.gdal.org/frmt_dted.html

It should be doable, but I'd like to know you have made an effort and that
I'm not going to explain stuff you have already tried before I sink a bunch
of time into this.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jorge.arevalo at gmail.com  Sat Jun 20 16:53:49 2009
From: jorge.arevalo at gmail.com (=?UTF-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Sun Jun 21 11:16:16 2009
Subject: [gdal-dev] WKT Raster weekly report #4
Message-ID: <cb4457700906201353t520e3963h559de6d25c554439@mail.gmail.com>

Hello,
Here, the report #4:
http://www.gis4free.org/blog/2009/06/20/gsoc-09-weekly-report-4-1206-1906/

You can follow the project here, as usual:
http://trac.osgeo.org/gdal/wiki/WKTRasterDriver

<http://trac.osgeo.org/gdal/wiki/WKTRasterDriver>Best regards,
Jorge

Henny Youngman<http://www.brainyquote.com/quotes/authors/h/henny_youngman.html>
- "I told the doctor I broke my leg in two places. He told me to quit
going
to those places."
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090620/3299c795/attachment.html
From olivierpilotte at gmail.com  Sat Jun 20 11:37:27 2009
From: olivierpilotte at gmail.com (Olivier Pilotte)
Date: Sun Jun 21 12:03:33 2009
Subject: [gdal-dev] Fwd: configuring gdal to support hdf
In-Reply-To: <e9b3f48e0906190618m7656bc07o29c0f39e55af5471@mail.gmail.com>
References: <e9b3f48e0906190618m7656bc07o29c0f39e55af5471@mail.gmail.com>
Message-ID: <e9b3f48e0906200837y10484a67wd657434a20c1faf5@mail.gmail.com>

I'm unable to configure gdal to support the hdf file format.
Any suggestions ?

Olivier Pilotte
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090620/ec4dcafe/attachment.html
From mateusz at loskot.net  Sun Jun 21 12:12:07 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun Jun 21 12:12:13 2009
Subject: [gdal-dev] Fwd: configuring gdal to support hdf
In-Reply-To: <e9b3f48e0906200837y10484a67wd657434a20c1faf5@mail.gmail.com>
References: <e9b3f48e0906190618m7656bc07o29c0f39e55af5471@mail.gmail.com>
	<e9b3f48e0906200837y10484a67wd657434a20c1faf5@mail.gmail.com>
Message-ID: <4A3E5BD7.2010403@loskot.net>

Olivier Pilotte wrote:
> I'm unable to configure gdal to support the hdf file format.
> 
> Any suggestions ?

No details, no suggestion.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From benjamin.r.welton at wmich.edu  Sun Jun 21 12:59:01 2009
From: benjamin.r.welton at wmich.edu (Benjamin Welton)
Date: Sun Jun 21 12:59:06 2009
Subject: [gdal-dev] Fwd: configuring gdal to support hdf
In-Reply-To: <4A3E5BD7.2010403@loskot.net>
References: <e9b3f48e0906190618m7656bc07o29c0f39e55af5471@mail.gmail.com>
	<e9b3f48e0906200837y10484a67wd657434a20c1faf5@mail.gmail.com>
	<4A3E5BD7.2010403@loskot.net>
Message-ID: <4A3E66D5.8060108@wmich.edu>

When doing ./configure are you adding the proper flag for the hdf 
version you plan to use (--with-hdf4 and --with-hdf5)? Also have you 
tried setting the locations of the library's by doing 
--with-hdf4=<library location>?

Ben

Mateusz Loskot wrote:
> Olivier Pilotte wrote:
>   
>> I'm unable to configure gdal to support the hdf file format.
>>
>> Any suggestions ?
>>     
>
> No details, no suggestion.
>
> Best regards,
>   

From mateusz at loskot.net  Sun Jun 21 08:08:49 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun Jun 21 13:05:18 2009
Subject: [gdal-dev] Tests fail on buildbot
Message-ID: <4A3E22D1.2020508@loskot.net>

Hi,

I've noticed tests fail on most builders and there is message like this:

"As GDAL_DOWNLOAD_TEST_DATA environment variable is not defined, 40
tests relying on data to downloaded from the Web have been skipped"

Is this something I should configure for GDAL on Buildbot?
If yes, what values should I set for this env variable?

Cheers
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From mateusz at loskot.net  Sat Jun 20 15:32:53 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun Jun 21 13:05:30 2009
Subject: [gdal-dev] Tests fail on buildbot
Message-ID: <4A3D3965.8090509@loskot.net>

Hi,

I've noticed tests fail on most builders and there is message like this:

"As GDAL_DOWNLOAD_TEST_DATA environment variable is not defined, 40
tests relying on data to downloaded from the Web have been skipped"

Is this something I should configure for GDAL on Buildbot?
If yes, what values should I set for this env variable?

Cheers
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From mateusz at loskot.net  Sun Jun 21 13:09:22 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun Jun 21 13:09:27 2009
Subject: [gdal-dev] Fwd: configuring gdal to support hdf
In-Reply-To: <4A3E66D5.8060108@wmich.edu>
References: <e9b3f48e0906190618m7656bc07o29c0f39e55af5471@mail.gmail.com>	<e9b3f48e0906200837y10484a67wd657434a20c1faf5@mail.gmail.com>	<4A3E5BD7.2010403@loskot.net>
	<4A3E66D5.8060108@wmich.edu>
Message-ID: <4A3E6942.20703@loskot.net>

Benjamin Welton wrote:
> When doing ./configure are you adding the proper flag for the hdf
> version you plan to use (--with-hdf4 and --with-hdf5)?

Yes, as you can see in ./configure template, you can use these
options to pass base location (so called prefix) of HDF libraries
(binaries and headers):

http://trac.osgeo.org/gdal/browser/trunk/gdal/configure.in?rev=17161#L1053

> Also have you tried setting the locations of the library's by doing
> --with-hdf4=<library location>?

As you can see in the ./configure usage message, you can pass locations
as value of --with-hdfX options.

$ ./configure --help | grep -i hdf
  --with-hdf4=ARG       Include HDF4 support (ARG=path)
  --with-hdf5=ARG       Include HDF5 support (ARG=path)

Don't forget to check this Wiki:

http://trac.osgeo.org/gdal/wiki/HDF

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From warmerdam at pobox.com  Sun Jun 21 13:22:12 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Jun 21 13:22:27 2009
Subject: [gdal-dev] Tests fail on buildbot
In-Reply-To: <4A3E22D1.2020508@loskot.net>
References: <4A3E22D1.2020508@loskot.net>
Message-ID: <4A3E6C44.7020500@pobox.com>

Mateusz Loskot wrote:
> Hi,
> 
> I've noticed tests fail on most builders and there is message like this:
> 
> "As GDAL_DOWNLOAD_TEST_DATA environment variable is not defined, 40
> tests relying on data to downloaded from the Web have been skipped"
> 
> Is this something I should configure for GDAL on Buildbot?
> If yes, what values should I set for this env variable?

Mateusz,

I'd prefer we not enable this while the build slaves are still on
buildbot.osgeo.org.  This could be turned on when the slaves have
been migrated to buildtest.osgeo.org.

The errors I notice on the windows tests are just a wms connection problem
and there isn't really much action to address them.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mateusz at loskot.net  Sun Jun 21 14:34:44 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun Jun 21 14:34:49 2009
Subject: [gdal-dev] Tests fail on buildbot
In-Reply-To: <4A3E6C44.7020500@pobox.com>
References: <4A3E22D1.2020508@loskot.net> <4A3E6C44.7020500@pobox.com>
Message-ID: <4A3E7D44.3060405@loskot.net>

Frank Warmerdam wrote:
> Mateusz Loskot wrote:
>> Hi,
>>
>> I've noticed tests fail on most builders and there is message like this:
>>
>> "As GDAL_DOWNLOAD_TEST_DATA environment variable is not defined, 40
>> tests relying on data to downloaded from the Web have been skipped"
>>
>> Is this something I should configure for GDAL on Buildbot?
>> If yes, what values should I set for this env variable?
> 
> Mateusz,
> 
> I'd prefer we not enable this while the build slaves are still on
> buildbot.osgeo.org.  This could be turned on when the slaves have
> been migrated to buildtest.osgeo.org.

Frank,

OK, works for me. Just let me know when/where to migrate the stuff.

> The errors I notice on the windows tests are just a wms connection problem
> and there isn't really much action to address them.

Understood.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From a.neumann at carto.net  Sun Jun 21 15:55:39 2009
From: a.neumann at carto.net (Andreas Neumann)
Date: Sun Jun 21 15:55:50 2009
Subject: [gdal-dev] Build OGR with Oracle support
In-Reply-To: <4A3BA8A6.9000809@mapgears.com>
References: <4A37FC3F.5020708@mapgears.com> <4A380356.4070804@loskot.net>
	<4A3AA114.6070701@mapgears.com>
	<35721.193.246.86.39.1245412495.squirrel@webmail.carto.net>
	<4A3B979B.8040805@loskot.net> <4A3BA8A6.9000809@mapgears.com>
Message-ID: <4A3E903B.5050207@carto.net>

yes, my setup has nothing to do with fgs-dev

This other path maybe appeared from the original email I was answering, 
but on my machine all the oracle instant client libraries are stored 
under /usr/local/lib/instantclient_10_2/ and the header files under 
/usr/local/lib/instantclient_10_2/sdk/

I will try again on Monday, maybe with also setting the PATH variable.

I will report back tomorrow.

Andreas

Normand Savard wrote:
> Mateusz Loskot wrote:
>> Andreas Neumann wrote:
>>> /usr/bin/ld: warning: libnnz10.so, needed by
>>> /usr/local/lib/instantclient_10_2/libclntsh.so, not found (try using
>>>  -rpath or -rpath-link)
>>
>> The path above and the path below are different.
>>
>>>> -L/home/fgs/fgs-dev/built/instantclient_11_1 -lc\
>>>> lntsh
>>
>> Are you sure you configure against one version of Oracle stuff?
>> From what I can see, you have two versions.
>>
> Mateusz,
>
> Maybe I misinterpreted Andreas' email but I think he's trying to 
> compile GDAL/OGR with OCI (Oracle Instantclient) outside of fgs-dev.  
> Can you confirm Andreas?
>
> Norm

From a.neumann at carto.net  Mon Jun 22 04:39:44 2009
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon Jun 22 04:39:51 2009
Subject: [gdal-dev] Build OGR with Oracle support
In-Reply-To: <4A3E903B.5050207@carto.net>
References: <4A37FC3F.5020708@mapgears.com> <4A380356.4070804@loskot.net>
	<4A3AA114.6070701@mapgears.com>
	<35721.193.246.86.39.1245412495.squirrel@webmail.carto.net>
	<4A3B979B.8040805@loskot.net> <4A3BA8A6.9000809@mapgears.com>
	<4A3E903B.5050207@carto.net>
Message-ID: <43307.193.246.86.39.1245659984.squirrel@webmail.carto.net>

ok - the problem could now be solved by setting the library path in
/etc/ld.so.conf.d/oracle.conf and running ldconfig as root. Then all the
libraries could be found. Somehow the LD_LIBRARY_PATH variable was
constantly ignored, although it was set and could be queried with echo
$LD_LIBRARY_PATH. It was interesting that LD_LIBRARY_PATH worked as root,
but not as a regular user, but the method with ldconfig worked for all
users.

Thank you for all of your help!

Andreas


On Sun, June 21, 2009 9:55 pm, Andreas Neumann wrote:
> yes, my setup has nothing to do with fgs-dev
>
> This other path maybe appeared from the original email I was answering,
> but on my machine all the oracle instant client libraries are stored
> under /usr/local/lib/instantclient_10_2/ and the header files under
> /usr/local/lib/instantclient_10_2/sdk/
>
> I will try again on Monday, maybe with also setting the PATH variable.
>
> I will report back tomorrow.
>
> Andreas
>
> Normand Savard wrote:
>> Mateusz Loskot wrote:
>>> Andreas Neumann wrote:
>>>> /usr/bin/ld: warning: libnnz10.so, needed by
>>>> /usr/local/lib/instantclient_10_2/libclntsh.so, not found (try using
>>>>  -rpath or -rpath-link)
>>>
>>> The path above and the path below are different.
>>>
>>>>> -L/home/fgs/fgs-dev/built/instantclient_11_1 -lc\
>>>>> lntsh
>>>
>>> Are you sure you configure against one version of Oracle stuff?
>>> From what I can see, you have two versions.
>>>
>> Mateusz,
>>
>> Maybe I misinterpreted Andreas' email but I think he's trying to
>> compile GDAL/OGR with OCI (Oracle Instantclient) outside of fgs-dev.
>> Can you confirm Andreas?
>>
>> Norm
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Andreas Neumann
http://www.carto.net/neumann/
http://www.svgopen.org/

From lran at unc.edu  Mon Jun 22 09:24:44 2009
From: lran at unc.edu (Limei Ran)
Date: Mon Jun 22 09:24:59 2009
Subject: [gdal-dev] Errors in compiling GDAL on a 64bits Linux
Message-ID: <20090622092444.m35vi7nrm04ok4oo@webmail3.isis.unc.edu>


Hi:

I configured it with the commands:


1. ./setenv CFLAGS "-fPIC"

2. ./configure
--prefix=/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/gdal-1.6.1/local
--with-static-proj4=/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/proj-4.6.1/local --with-hdf5=/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/hdf5-1.8.3/local  --with-libtiff=internal  --without-curl --without-expat 
--without-mysql

Then, ./make


Here are new errors I got:


/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/gdal-1.6.1/.libs/libgdal.so:
undefined reference to `XML_ErrorString'
/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/gdal-1.6.1/.libs/libgdal.so:
undefined reference to `curl_easy_setopt'
/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/gdal-1.6.1/.libs/libgdal.so:
undefined reference to `XML_GetCurrentColumnNumber'
/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/gdal-1.6.1/.libs/libgdal.so:
undefined reference to `curl_easy_getinfo'
/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/gdal-1.6.1/.libs/libgdal.so:
undefined reference to `curl_slist_free_all'
/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/gdal-1.6.1/.libs/libgdal.so:
undefined reference to `curl_multi_init'
/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/gdal-1.6.1/.libs/libgdal.so:
undefined reference to `curl_multi_fdset'
collect2: ld returned 1 exit status
make[1]: *** [gdalinfo] Error 1
make[1]: Leaving directory
`/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/gdal-1.6.1/apps'
make: *** [apps-target] Error 2
==============

I told not to use curl, expat, and mysql.  But, I do not know why errors
related to curl are there.

Thank you for your help.

Limei

-- 
Limei Ran, Research Associate
Center for Environmental Modeling for Policy Development
the Institute for the Environment University of North Carolina at Chapel Hill
Bank of American Plaza - CB#6116
137 E. Franklin, Room 661
Chapel Hill, NC 27599-6116

Email: lran@unc.edu
Phone:  919-966-2245
Fax:    919-843-3113






From aaron.j.brown at hotmail.com  Mon Jun 22 09:32:56 2009
From: aaron.j.brown at hotmail.com (Aaron Brown)
Date: Mon Jun 22 09:33:01 2009
Subject: [gdal-dev] DTED Level 1 to Level 0
In-Reply-To: <4A3E4723.7050903@pobox.com>
References: <COL101-W25194C0BF012F1F825B8E5B0380@phx.gbl>
	<4A3E4723.7050903@pobox.com>
Message-ID: <COL101-W4561F207FD3D511A9A91F5B0390@phx.gbl>


Hi Frank,

Thanks for the fast reply and also attaching a subject line, i forgot all about that... :S

I had read that link before and i understand the basic differences between DTED levels 0 and 1 however I'm truely stuck at where to start.  The task was given to me by a co-worker when I was telling him about my interest in learning to program when I stumbled across gdal.  I have read various documentation on gdal but still don't fully understand how to use it.  Would you be able to point me towards some useful examples?

I'm not sure how to specify which DTED level you wish to write, however I did try "gdal_translate -of DTED DTED/E150/S22.DT1 DTED/E150/S22.DT0" however i'm fairly certain the output was really DTED Level 1.

Any help is appreciated.

Regards,
Aaron

> Date: Sun, 21 Jun 2009 10:43:47 -0400
> From: warmerdam@pobox.com
> To: aaron.j.brown@hotmail.com
> CC: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] DTED Level 1 to Level 0
> 
> Aaron Brown wrote:
> > Hi all,
> > 
> > I have to convert DTED Level 1 data into DTED Level 0 data, and was just 
> > wondering if anyone would be able to help?
> 
> Aaron,
> 
> I have taken the liberty of attaching a related subject line for this email.
> 
> What have you tried so far?  Have you read the DTED drive documentation
> yet?  Are you fine with doing the conversion using gdal_translate?
> 
>    http://www.gdal.org/frmt_dted.html
> 
> It should be doable, but I'd like to know you have made an effort and that
> I'm not going to explain stuff you have already tried before I sink a bunch
> of time into this.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 

_________________________________________________________________
View photos of singles in your area Click Here
http://dating.ninemsn.com.au/search/search.aspx?exec=go&tp=q&gc=2&tr=1&lage=18&uage=55&cl=14&sl=0&dist=50&po=1&do=2&trackingid=1046138&r2s=1&_t=773166090&_r=WLM_EndText
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090623/52e4ee22/attachment.html
From warmerdam at pobox.com  Mon Jun 22 09:46:59 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jun 22 09:47:20 2009
Subject: [gdal-dev] DTED Level 1 to Level 0
In-Reply-To: <COL101-W4561F207FD3D511A9A91F5B0390@phx.gbl>
References: <COL101-W25194C0BF012F1F825B8E5B0380@phx.gbl>
	<4A3E4723.7050903@pobox.com>
	<COL101-W4561F207FD3D511A9A91F5B0390@phx.gbl>
Message-ID: <4A3F8B53.9000104@pobox.com>

Aaron Brown wrote:
> Hi Frank,
> 
> Thanks for the fast reply and also attaching a subject line, i forgot 
> all about that... :S
> 
> I had read that link before and i understand the basic differences 
> between DTED levels 0 and 1 however I'm truely stuck at where to start.  
> The task was given to me by a co-worker when I was telling him about my 
> interest in learning to program when I stumbled across gdal.  I have 
> read various documentation on gdal but still don't fully understand how 
> to use it.  Would you be able to point me towards some useful examples?
> 
> I'm not sure how to specify which DTED level you wish to write, however 
> I /did/ try "gdal_translate -of DTED DTED/E150/S22.DT1 
> DTED/E150/S22.DT0" however i'm fairly certain the output was really DTED 
> Level 1.
> 
> Any help is appreciated.

Aaron,

I see in the DTED docs: "The DTED driver does support creating new files,
but the input data must be exactly formatted as a Level 0, 1 or 2 cell. That
is the size, and bounds must be appropriate for a cell."

DTED 0 is 121x121 pixels with an origin and pixel size similar to:

Origin = (-80.004166666666663,44.004166666666663)
Pixel Size = (0.008333333333333,-0.008333333333333)


So you need to transform the level 1 file to something like this.  On a
different dt1 file I tried a command like:

   gdal_translate -outsize 121 121 in.dt1 -of DTED out.dt0

This produced an output DTED 0 file that appeared to have the correct
bounds though the following warning was issued:

Warning 1: The corner coordinates of the source are not properly aligned on 
plain latitude/longitude boundaries.

which I believe is because there was a slight offset in the origin.

So, with luck you can use gdal_translate to produce DTED Level 0
files.  I will warn that this solution has not been tested for
compliance with military standards and some file metadata may be
wrong. But it should be good enough for many purposes.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From marco.lechner at fossgis.de  Mon Jun 22 09:52:47 2009
From: marco.lechner at fossgis.de (Marco Lechner - FOSSGIS e.V.)
Date: Mon Jun 22 09:52:51 2009
Subject: [gdal-dev] Wiki-arcticle to collect Logos from OSGeo projects
	available
Message-ID: <4A3F8CAF.6020705@fossgis.de>

Hi list,

I created a wiki-article where logos of the numerous OSGeo projects can 
be linked.

The reason for creating the page: last week I wasted hours to get logos 
of most of the OSGeo projects in printquality to arrange them on a 
poster for the Linxtag in Berlin. All OSGeo projects: please put links 
to logos of your project on this page to make it easy to get them for 
any PR!

http://wiki.osgeo.org/wiki/Logos_from_OSGeo_projects

Marco
From a.neumann at carto.net  Mon Jun 22 10:01:18 2009
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon Jun 22 10:01:22 2009
Subject: [gdal-dev] Curve support in OGR
In-Reply-To: <4A3BA43E.30909@pobox.com>
References: <4A38B430.5050609@carto.net> <4A3AB653.7070705@loskot.net>
	<36122.193.246.86.39.1245400901.squirrel@webmail.carto.net>
	<4A3BA43E.30909@pobox.com>
Message-ID: <35728.193.246.86.39.1245679278.squirrel@webmail.carto.net>

Hi Frank,

Good to hear that you are principally interested in curve support. I can
understand that you are reluctanct to start such an effort before proper
financial backing.

Unfortunately I don't have loads of money to support such an effort, but I
(resp. my employer) would participate in a joint effort to financially
support this project.

It would be useful to have a clue how much work (and related estimated
development hours) would have to be invested. Also a list of major
milestones/packages would be useful.

Frank, do you think that you could write up a proposal/estimate? Others
could join in of course, but you are probably the one with the best
knowledge on the architecture of ogr.

Thanks,
Andreas


On Fri, June 19, 2009 4:44 pm, Frank Warmerdam wrote:
> Andreas Neumann wrote:
>> right - we still use an old commercial version of Mapguide. We may move
>> to
>> the newer open-source version (or Mapserver) in the future.
>>
>> But this is not my main concern. The main concern is being able to work
>> with curves (mainly circular arcs) across the whole OSGeo tool chain,
>> primarily also in Desktop GIS.
>>
>> Many desktop GIS build on top of OGR (e.g. the one we use: QGIS). They
>> won't bother with curves until their underlying base infrastructure
>> supports curves.
>>
>> I know it is a probably a huge effort to include curve support in OGR
>> and
>> won't happen tomorrow ... However, since more and more data formats and
>> applications now start to support curves, it would make sense that OGR
>> would support them as well, esp. since it is at the technical foundation
>> of so many other tools.
>>
>> I know it should be financially supported by the users, so I wonder if
>> we
>> could start a project like the WKTRaster project in Postgis [1], where
>> the
>> necessary work packages for curve support are laid out, as well as
>> potential programmers and sponsors. People/organizations can assign
>> themselves as sponsors for certain parts of the whole work then.
>>
>> The whole thing of course also concerns GEOS and Postgis.
>
> Andreas,
>
> I would like to upgrade OGR to support curves and generally to support
> a broader geometry model in line with Simple Features 1.1 and possible
> some of the ISO geometry types.  However, this is a substantial effort
> and I believe it would require financial support.  I have not had
> significant client interest in such an upgrade myself, nor have the GDAL
> sponsors spoken strongly on this point.
>
> So, I'm basically at the point of waiting for funded interest in the
> topic to grow.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>


-- 
Andreas Neumann
http://www.carto.net/neumann/
http://www.svgopen.org/

From armin.burger at gmx.net  Mon Jun 22 15:40:04 2009
From: armin.burger at gmx.net (Armin Burger)
Date: Mon Jun 22 15:40:28 2009
Subject: [gdal-dev] VRT images and overview types
Message-ID: <4A3FDE14.2070509@gmx.net>

Hi everybody

I noticed some strange behaviour of virtual images with the Erdas RRD 
overview type. I am using VRT images referencing Geotiff files and 
applying image stretching parameters (offset and scale) to improve the 
display in Mapserver applications. The VRT images are created with 
Python and GDAL bindings. This works fine if the overview is created 
e.g. with the -ro flag, the stretching parameters are then applied at 
all overview levels.

If I create the overviews using the Erdas format (--config USE_RRD YES) 
then the vrt image is applying the stretching parameters only in case 
the full Tiff image is read. At a scale level where just the overview 
file is read the stretching parameters are not applied. This causes a 
confusing display effect by enabling the stretching at a certain scale.

I'd prefer to continue with the RRD overviews since the images are also 
read via Desktop programs like Erdas or ArcMap that make use of the RRD 
.aux files. Is there a way to have RRD overviews and stretching 
parameters applied on them as well? Or would this be possible in future 
GDAL versions?

Thanks for any clarification

Armin

From kay1829 at vandals.uidaho.edu  Mon Jun 22 16:47:08 2009
From: kay1829 at vandals.uidaho.edu (JPKay)
Date: Mon Jun 22 16:47:52 2009
Subject: [Gdal-dev] GDAL problems with IDLE
Message-ID: <1245703628884-3138630.post@n2.nabble.com>


Hello, 

I am trying to install GDAL on my mac running OS x 10.5.7 using python
2.5.4. I have followed the directions to build from the cheese shop, however
when I go over to IDLE and try  the command "from osgeo import ogr" I get
the following error: ImportError: No module named osgeo. I assume this means
that the libraries can't find each other. Any thoughts on this topic would
be appreciated. 
Thanks in advance, 
Jon
-- 
View this message in context: http://n2.nabble.com/GDAL-problems-with-IDLE-tp3138630p3138630.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From belasalwa at yahoo.fr  Mon Jun 22 17:49:34 2009
From: belasalwa at yahoo.fr (belaqziz salwa)
Date: Mon Jun 22 17:51:46 2009
Subject: [Gdal-dev] GDAL problems with IDLE
Message-ID: <396654.37522.qm@web26604.mail.ukl.yahoo.com>

Hi,
try the the following steps

http://pypi.python.org/pypi/GDAL/



--- En date de?: Lun 22.6.09, JPKay <kay1829@vandals.uidaho.edu> a ?crit?:

De: JPKay <kay1829@vandals.uidaho.edu>
Objet: [Gdal-dev] GDAL problems with IDLE
?: gdal-dev@lists.osgeo.org
Date: Lundi 22 Juin 2009, 21h47


Hello, 

I am trying to install GDAL on my mac running OS x 10.5.7 using python
2.5.4. I have followed the directions to build from the cheese shop, however
when I go over to IDLE and try? the command "from osgeo import ogr" I get
the following error: ImportError: No module named osgeo. I assume this means
that the libraries can't find each other. Any thoughts on this topic would
be appreciated. 
Thanks in advance, 
Jon
-- 
View this message in context: http://n2.nabble.com/GDAL-problems-with-IDLE-tp3138630p3138630.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev



      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090622/c0743f4c/attachment.html
From kay1829 at vandals.uidaho.edu  Mon Jun 22 17:55:38 2009
From: kay1829 at vandals.uidaho.edu (JPKay)
Date: Mon Jun 22 17:55:40 2009
Subject: Re [Gdal-dev] : GDAL problems with IDLE
In-Reply-To: <396654.37522.qm@web26604.mail.ukl.yahoo.com>
References: <396654.37522.qm@web26604.mail.ukl.yahoo.com>
Message-ID: <1245707738835-3138989.post@n2.nabble.com>


I did that already, but it does not want to respond with IDLE, I get the same
error.

salwa wrote:
> 
> Hi,
> try the the following steps
> 
> http://pypi.python.org/pypi/GDAL/
> 
> 
> 
> --- En date de?: Lun 22.6.09, JPKay <kay1829@vandals.uidaho.edu> a ?crit?:
> 
> De: JPKay <kay1829@vandals.uidaho.edu>
> Objet: [Gdal-dev] GDAL problems with IDLE
> ?: gdal-dev@lists.osgeo.org
> Date: Lundi 22 Juin 2009, 21h47
> 
> 
> Hello, 
> 
> I am trying to install GDAL on my mac running OS x 10.5.7 using python
> 2.5.4. I have followed the directions to build from the cheese shop,
> however
> when I go over to IDLE and try? the command "from osgeo import ogr" I get
> the following error: ImportError: No module named osgeo. I assume this
> means
> that the libraries can't find each other. Any thoughts on this topic would
> be appreciated. 
> Thanks in advance, 
> Jon
> -- 
> View this message in context:
> http://n2.nabble.com/GDAL-problems-with-IDLE-tp3138630p3138630.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

-- 
View this message in context: http://n2.nabble.com/Re-%3A-GDAL-problems-with-IDLE-tp3138971p3138989.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jluis at ualg.pt  Mon Jun 22 17:30:08 2009
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon Jun 22 17:58:00 2009
Subject: [gdal-dev] "unresolved external symbol _GDALRegister" caused by a
 home build of HDF4
Message-ID: <4A3FF7E0.1060108@ualg.pt>

Hi,

Being victim of a dll hell provoked by Matlab distributing a private zlib1.dll that casts the a hell 
out in my MEXs I decided to try to escape it by building one myself but with a different name.
Well things are not so simple and I had to rebuild not only zlib but also jpeg, szip, curl (this 
bloody one was particularly painful) and HDF4.

After that the final step was to rebuild GDAL using the above dlls (ah, I'm on Windows), but here a 
very strange thing happens. When I do a fresh build I get these errors at the end

compileds\vc71/lib/libcurl_imp_mir.lib wsock32.lib wldap32.lib winmm.lib   gcore
\Version.res  /out:gdal16.dll /implib:gdal_i.lib
    Creating library gdal_i.lib and object gdal_i.exp
gdalallregister.obj : error LNK2019: unresolved external symbol _GDALRegister_HTTP referenced in 
function _GDALAllRegister@0
gdalallregister.obj : error LNK2019: unresolved external symbol _GDALRegister_WMS referenced in 
function _GDALAllRegister@0
gdalallregister.obj : error LNK2019: unresolved external symbol _GDALRegister_WCS referenced in 
function _GDALAllRegister@0
...
gdalallregister.obj : error LNK2019: unresolved external symbol _GDALRegister_netCDF referenced in 
function _GDALAllRegister@0
gdalallregister.obj : error LNK2019: unresolved external symbol _GDALRegister_GMT referenced in 
function _GDALAllRegister@0
gdal16.dll : fatal error LNK1120: 9 unresolved externals

However, if I first build GDAL using an official HDF4.r2 (the one I was using before) and with
successfully ends I change the nmake.opt to use now the HDF4 (r4) that I built than the GDAL build
process ends fine and I get a workable gdal.dll

I'm puzzled with this. Where do those errors of "unresolved external symbols" in GDALAllRegister 
come from in the first instance?

Thanks

Joaquim Luis




From mgolczak at yahoo.com  Tue Jun 23 06:52:05 2009
From: mgolczak at yahoo.com (Matthew Golczak)
Date: Tue Jun 23 06:58:48 2009
Subject: [gdal-dev] gdal_translate help
Message-ID: <936377.15800.qm@web39107.mail.mud.yahoo.com>


Hello,
I?m new to gdal concept and I?ll appreciate if you could help me. I?m trying to use gdal_translate to geo-referencing aerial images but with limited success so far. The image is generated as gif file plus   information about geo-location of each corner. Due to the fact that the corner geo-location is calculated based on GPS, the datum and projection is specified as EPSG:4326.
The following translation works very well for me 
gdal_translate -of GTiff -a_srs EPSG:4326 -gcp 0 0 138.792939 -34.721669 -gcp 1784 0 138.791485 -34.753698 -gcp 0 12515 138.519595 -34.713290 -gcp 1784 12515 138.518036 -34.745320  run.gif run.tiff
but I need also this image in nitif format  so I have tried  the following  translation 
gdal_translate -of nitf run1tiff run.nitf.  Unfortunately in this case  nitif file has not any geospatial references.  The gdalinof in regards to tiff contains geospatial information and none in respect to nitif.  It seems to me that is something wrong but what?
Any support in this matter highly appreciated.
Regards
maciek



      
From leaffan at gmx.net  Tue Jun 23 06:59:01 2009
From: leaffan at gmx.net (Markus Reinhold)
Date: Tue Jun 23 07:11:13 2009
Subject: [gdal-dev] Quicklook creation with Python/GDAL
Message-ID: <4A40B575.7080105@gmx.net>

Hej everyone,
currently I was able to finish a small Python project utilizing GDAL for 
creating quicklooks of satellite imagery. What I am doing right now is
retrieving the statistics of input bands, applying a standard deviation
stretch and saving the result as PNG-dataset. This works quite well,
however my problems start right here. To actually resize the created
dataset and to merge three separate bands into a single PNG-file I'm
using the Python Imaging Library, which needs single files to read from
in order to do any processing. There is no problem with small to
medium-sized images. But I'm running into trouble trying to create a
quicklook for some standard panchromatic Quickbird imagery (ca. 30000 x
30000 pixels, 0.6 m GSD at UInt16 -> about 1.9 GB file size) as the PNG
file that is created temporarily gets very big. The neccessary I/O
operations naturally take quite some time. So my question is the
following: Is there any possibility to do resizing a dataset with GDAL
means - to spare the creation of a temporary file?
Thank you very much for any ideas.
Regards,
Markus Reinhold

-- 

********************************************************
Dipl.-Kartograph Markus Reinhold

Chair of Geoinformatics, Geohydrology and Modeling
Friedrich-Schiller-University Jena
L?bdergraben 32
D - 07743 Jena
Germany

Phone.: (+49)(0)3641 / 9 488 65
E-Mail: markus.reinhold@uni-jena.de
********************************************************


From warmerdam at pobox.com  Tue Jun 23 08:37:56 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jun 23 08:38:07 2009
Subject: [gdal-dev] gdal_translate help
In-Reply-To: <936377.15800.qm@web39107.mail.mud.yahoo.com>
References: <936377.15800.qm@web39107.mail.mud.yahoo.com>
Message-ID: <4A40CCA4.6090008@pobox.com>

Matthew Golczak wrote:
> Hello, I?m new to gdal concept and I?ll appreciate if you could help me. I?m
> trying to use gdal_translate to geo-referencing aerial images but with
> limited success so far. The image is generated as gif file plus
> information about geo-location of each corner. Due to the fact that the
> corner geo-location is calculated based on GPS, the datum and projection is
> specified as EPSG:4326. The following translation works very well for me 
> gdal_translate -of GTiff -a_srs EPSG:4326 -gcp 0 0 138.792939 -34.721669
> -gcp 1784 0 138.791485 -34.753698 -gcp 0 12515 138.519595 -34.713290 -gcp
> 1784 12515 138.518036 -34.745320  run.gif run.tiff but I need also this
> image in nitif format  so I have tried  the following  translation 
> gdal_translate -of nitf run1tiff run.nitf.  Unfortunately in this case
> nitif file has not any geospatial references.  The gdalinof in regards to
> tiff contains geospatial information and none in respect to nitif.  It seems
> to me that is something wrong but what? Any support in this matter highly
> appreciated. 

Maciek,

The GDAL NITF driver does not support writing GCPs in NITF format.  In fact,
I'm not aware of a general mechanism for storing GCPs in NITF format.  I
think you will need to georeference it using affine georeferencing.  If
the image is not north up, you may need to rectify the image first with
gdalwarp.  In fact gdalwarp can write directly to nitf format so perhaps
you could do:

eg.

gdalwarp run.tiff -of NITF run.nitf

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Jun 23 09:16:52 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jun 23 09:17:10 2009
Subject: [gdal-dev] Motion: Commit Access for Robin Princeley
Message-ID: <4A40D5C4.1040203@pobox.com>

Motion: GDAL project commit access is granted to Robin Princeley.

---

Folks,

Robin is involved in the use of GDAL at ESRI and would like to be able to
directly fix things in GDAL trunk as well as maintaining ESRI branches like
the /sandbox/warmerdam/1.6-esri branch.  He has over a decade of experience
in imaging including use of libraries like libtiff, etc.  He has been using
GDAL since 1.2.x, including the GDAL integration in the ImageServer product
and has been actively porting bug fixes and other activities within the ESRI
copy of GDAL.

Robin has agreed to the guidelines in RFC3.

Peng Gao and I will keep an eye on his activities within GDAL initially.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From szekerest at gmail.com  Tue Jun 23 09:56:58 2009
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Jun 23 09:57:01 2009
Subject: [gdal-dev] Motion: Commit Access for Robin Princeley
In-Reply-To: <4A40D5C4.1040203@pobox.com>
References: <4A40D5C4.1040203@pobox.com>
Message-ID: <f3b73b7d0906230656s441903d3tae6e962967bb36e9@mail.gmail.com>

+1

Best regards,

Tamas



2009/6/23 Frank Warmerdam <warmerdam@pobox.com>

> Motion: GDAL project commit access is granted to Robin Princeley.
>
> ---
>
> Folks,
>
> Robin is involved in the use of GDAL at ESRI and would like to be able to
> directly fix things in GDAL trunk as well as maintaining ESRI branches like
> the /sandbox/warmerdam/1.6-esri branch.  He has over a decade of experience
> in imaging including use of libraries like libtiff, etc.  He has been using
> GDAL since 1.2.x, including the GDAL integration in the ImageServer product
> and has been actively porting bug fixes and other activities within the
> ESRI
> copy of GDAL.
>
> Robin has agreed to the guidelines in RFC3.
>
> Peng Gao and I will keep an eye on his activities within GDAL initially.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090623/4e5d2ea3/attachment.html
From dmorissette at mapgears.com  Tue Jun 23 09:52:42 2009
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue Jun 23 10:01:24 2009
Subject: [gdal-dev] Motion: Commit Access for Robin Princeley
In-Reply-To: <4A40D5C4.1040203@pobox.com>
References: <4A40D5C4.1040203@pobox.com>
Message-ID: <4A40DE2A.8010501@mapgears.com>

+1

Daniel


Frank Warmerdam wrote:
> Motion: GDAL project commit access is granted to Robin Princeley.
> 
> ---
> 
> Folks,
> 
> Robin is involved in the use of GDAL at ESRI and would like to be able to
> directly fix things in GDAL trunk as well as maintaining ESRI branches like
> the /sandbox/warmerdam/1.6-esri branch.  He has over a decade of experience
> in imaging including use of libraries like libtiff, etc.  He has been using
> GDAL since 1.2.x, including the GDAL integration in the ImageServer product
> and has been actively porting bug fixes and other activities within the 
> ESRI
> copy of GDAL.
> 
> Robin has agreed to the guidelines in RFC3.
> 
> Peng Gao and I will keep an eye on his activities within GDAL initially.
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/
From hobu.inc at gmail.com  Tue Jun 23 10:04:17 2009
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Jun 23 10:36:07 2009
Subject: [gdal-dev] Motion: Commit Access for Robin Princeley
In-Reply-To: <4A40DE2A.8010501@mapgears.com>
References: <4A40D5C4.1040203@pobox.com> <4A40DE2A.8010501@mapgears.com>
Message-ID: <FE584625-1D09-4FE6-A3C4-42A4DE664C95@gmail.com>

+1

On Jun 23, 2009, at 8:52 AM, Daniel Morissette wrote:

> +1
>
> Daniel
>
>
> Frank Warmerdam wrote:
>> Motion: GDAL project commit access is granted to Robin Princeley.
>> ---
>> Folks,
>> Robin is involved in the use of GDAL at ESRI and would like to be  
>> able to
>> directly fix things in GDAL trunk as well as maintaining ESRI  
>> branches like
>> the /sandbox/warmerdam/1.6-esri branch.  He has over a decade of  
>> experience
>> in imaging including use of libraries like libtiff, etc.  He has  
>> been using
>> GDAL since 1.2.x, including the GDAL integration in the ImageServer  
>> product
>> and has been actively porting bug fixes and other activities within  
>> the ESRI
>> copy of GDAL.
>> Robin has agreed to the guidelines in RFC3.
>> Peng Gao and I will keep an eye on his activities within GDAL  
>> initially.
>> Best regards,
>
>
> -- 
> Daniel Morissette
> http://www.mapgears.com/
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From joelodom at gmail.com  Tue Jun 23 13:00:51 2009
From: joelodom at gmail.com (Joel Odom)
Date: Tue Jun 23 13:00:55 2009
Subject: [gdal-dev] Fwd: Transparency in GDAL WMS
In-Reply-To: <d422b4500906230921j7a4930ber5bbb35f31e4fd50@mail.gmail.com>
References: <d422b4500906230636x7217d235s98ee21d69b048bda@mail.gmail.com>
	<d422b4500906230651v2c4937f6ueb64243cab336de6@mail.gmail.com>
	<4A40E1D7.8080102@pobox.com>
	<d422b4500906230757r2336a717h901afa83835eea9f@mail.gmail.com>
	<4A40F065.902@pobox.com>
	<d422b4500906230815u373fe5dfvfa1de316bc9019dd@mail.gmail.com>
	<4A40FA2A.3090501@pobox.com>
	<d422b4500906230855v53c81034r7ddbd1f615952891@mail.gmail.com>
	<4A40FC57.6050905@pobox.com>
	<d422b4500906230921j7a4930ber5bbb35f31e4fd50@mail.gmail.com>
Message-ID: <d422b4500906231000r2736d4d8r56044188074e339d@mail.gmail.com>

Update.  Now I think I understand the issue.  Here is the resolution:
<BandsCount>4</BandsCount> missing from the config file, not a bug.

Thanks!



---------- Forwarded message ----------
From: Joel Odom <joelodom@gmail.com>
Date: Tue, Jun 23, 2009 at 12:21 PM
Subject: Fwd: Transparency in GDAL WMS
To: gdal-dev@lists.osgeo.org


For posterity, here is some information about a GDAL WMS driver issue.  I
opened ticket 3042 to address this.  I hope no one minds if I paste the
transcript of the conversation below.  I often search this list archive for
information about GDAL issues and figure this may be useful to have in the
archive.  Thanks.

Transcript of conversation:



 Joel Odom <joelodom@gmail.com>
Transparency in GDAL WMS
10 messages
Joel Odom <joelodom@gmail.com> Tue, Jun 23, 2009 at 9:36 AM
To: Frank Warmerdam <warmerdam@pobox.com>
Hi, Frank.  I'm hitting a WMS link that returns a PNG with transparency, but
the data set raster count says that it has only three bands.  We're on GDAL
1.5.2.  Another researcher here says that newer versions of GDAL support WMS
transparency, but I can't find any mention of it in this group or on in
Trac.  Is it correct that this feature was put in a later release and do you
know which release?  Thanks.

(By the way, there is an early, fairly buggy, alpha of FalconView 4.3
available for free download now from http://www.falconview.org/.  We've also
posted the FalconView source code there.)



-- 
http://giscoder.blogspot.com/
Joel Odom <joelodom@gmail.com> Tue, Jun 23, 2009 at 9:51 AM
To: Frank Warmerdam <warmerdam@pobox.com>
I think this may be what the other researcher here was looking at when he
said a newer version of GDAL:
http://trac.osgeo.org/mapserver/ticket/83 This ticket refers to
something about 8 years ago, though, so it's probably
not the issue.

Here is the WMS request that is returning a transparent PNG.  Any idea why
I'm getting this back as a three band raster and not seeing an alpha band?
 Thanks so much.

http://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n1p.cgi?TRANSPARENT=TRUE&request=GetMap&version=1.1.0&layers=nexrad-n1p&styles=&srs=EPSG:4326&format=image/png&width=948&height=603&bbox=-106.24059800,39.92912300,-97.79391800,45.30185300

[Quoted text hidden]
-- 
http://giscoder.blogspot.com/
Frank Warmerdam <warmerdam@pobox.com> Tue, Jun 23, 2009 at 10:08 AM
To: Joel Odom <joelodom@gmail.com>
Joel Odom wrote:
I think this may be what the other researcher here was looking at when he
said a newer version of GDAL:
http://trac.osgeo.org/mapserver/ticket/83 This ticket refers to
something about 8 years ago, though, so it's probably
not the issue.

Here is the WMS request that is returning a transparent PNG.  Any idea why
I'm getting this back as a three band raster and not seeing an alpha band?
 Thanks so much.

http://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n1p.cgi?TRANSPARENT=TRUE&request=GetMap&version=1.1.0&layers=nexrad-n1p&styles=&srs=EPSG:4326&format=image/png&width=948&height=603&bbox=-106.24059800,39.92912300,-97.79391800,45.30185300<
http://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n1p.cgi?TRANSPARENT=TRUE&request=GetMap&version=1.1.0&layers=nexrad-n1p&styles=&srs=EPSG:4326&format=image/png&width=948&height=603&bbox=-106.24059800,39.92912300,-97.79391800,45.30185300
>

Joel,

There are two ways of accomplishing transparency in PNG.  One is to add an
alpha band.  The other is to designate a color index as transparent in
a single band image with a color table.  That is the approach used in this
image.

Driver: PNG/Portable Network Graphics
Files: /wrk/home/warmerda/n1p.cgi.png
Size is 948, 603
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  603.0)
Upper Right (  948.0,    0.0)
Lower Right (  948.0,  603.0)
Center      (  474.0,  301.5)
Band 1 Block=948x1 Type=Byte, ColorInterp=Palette
 NoData Value=0
 Color Table (RGB with 45 entries)
   0: 255,255,255,0
   1: 104,34,139,255
   2: 154,50,205,255
   3: 178,58,238,255
   4: 191,62,255,255
   5: 153,85,201,255
...

Note that alpha=0 in the color value for index zero.  The "nodata" metadata
is also set to refer to color index zero.  So for this image all zero pixels
should be treated as transparent.

Does that address your problem?

Hopefully I can try out FalconView soon.  I skimmed the page and I'm
impressed with the project.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

Joel Odom <joelodom@gmail.com> Tue, Jun 23, 2009 at 10:57 AM
To: Frank Warmerdam <warmerdam@pobox.com>
Thanks, Frank.  That gives me a lot of insight into what's going on, but it
raises a new question.  When I hit the WMS using GDALOpen on an XML file
with the WMS connect data, I get something different than when I hit the URL
below with my browser, save the image, then open the saved PNG file with
GDALOpen.  I see the color table when I open the PNG and see the single band
raster, but rasterBand->GetColorTable() returns null when I open the WMS
from the XML file and I see a three band raster.  Why would I get back
different data from the different data sources?  It's like the WMS data
source is doing some interpretation on the image that discards original
single band image and creates a new three band image with no transparency.

Thanks for checking out FalconView.  We've been very popular in DoD mission
planning for about 15 years now.  We're opening up to the public as an
open-source GIS product.  Part of that effort involves aligning with OGC
standards like WMS, KML, etc.  We're using GDAL and OGR as a big part of
that effort and really appreciate the product.


[Quoted text hidden]
-- 
http://giscoder.blogspot.com/
Frank Warmerdam <warmerdam@pobox.com> Tue, Jun 23, 2009 at 11:10 AM
To: Joel Odom <joelodom@gmail.com>
Joel Odom wrote:
Thanks, Frank.  That gives me a lot of insight into what's going on, but it
raises a new question.  When I hit the WMS using GDALOpen on an XML file
with the WMS connect data, I get something different than when I hit the URL
below with my browser, save the image, then open the saved PNG file with
GDALOpen.  I see the color table when I open the PNG and see the single band
raster, but rasterBand->GetColorTable() returns null when I open the WMS
from the XML file and I see a three band raster.  Why would I get back
different data from the different data sources?  It's like the WMS data
source is doing some interpretation on the image that discards original
single band image and creates a new three band image with no transparency.

Joel,

Could you provide your wms xml control file for GDAL?  I'd like to try
this.  I was not really much involved in the development of the GDAL WMS
driver so I'm not clear on how it works internally.  It appears to be
doing substantial image manipulation and it might need some further
adjustments for this case.

Thanks for checking out FalconView.  We've been very popular in DoD mission
planning for about 15 years now.  We're opening up to the public as an
open-source GIS product.  Part of that effort involves aligning with OGC
standards like WMS, KML, etc.  We're using GDAL and OGR as a big part of
that effort and really appreciate the product.

Excellent!
[Quoted text hidden]
Joel Odom <joelodom@gmail.com> Tue, Jun 23, 2009 at 11:15 AM
To: Frank Warmerdam <warmerdam@pobox.com>
Here it is.  I'm constructing this as an in-memory string, saving it to an
in-memory file using the VSI stuff, then calling GDALOpen on the file.
 Thanks!


<GDAL_WMS>
  <Service name="WMS">
    <ServerURL>
http://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n1p.cgi?TRANSPARENT=TRUE
</ServerURL>
    <ImageFormat>image/png</ImageFormat>
    <Layers>nexrad-n1p</Layers>
  </Service>
  <DataWindow>
    <UpperLeftX>-102.017258</UpperLeftX>
    <UpperLeftY>47.974853</UpperLeftY>
    <LowerRightX>-93.570578</LowerRightX>
    <LowerRightY>42.602123</LowerRightY>
    <SizeX>948</SizeX>
    <SizeY>603</SizeY>
  </DataWindow>
  <Timeout>45</Timeout>
</GDAL_WMS>


[Quoted text hidden]
-- 
http://giscoder.blogspot.com/
Frank Warmerdam <warmerdam@pobox.com> Tue, Jun 23, 2009 at 11:52 AM
To: Joel Odom <joelodom@gmail.com>
Joel Odom wrote:
Here it is.  I'm constructing this as an in-memory string, saving it to an
in-memory file using the VSI stuff, then calling GDALOpen on the file.
 Thanks!

Joel,

I see what you mean.  I believe the approach taken in the WMS driver is
essentially obliterating any concept of transparency in the result.  It
would take some non-trivial additional development in the WMS driver to
address this issue.  I'm not in a position to do it.

You might want to take up the issue with Adam Nowaki who wrote the the
driver.  Possibly I'm missing something, or perhaps he would be willing
to do some work on this.
[Quoted text hidden]
Joel Odom <joelodom@gmail.com> Tue, Jun 23, 2009 at 11:55 AM
To: Frank Warmerdam <warmerdam@pobox.com>
Cc: Chris Bailey <chris.bailey@gtri.gatech.edu>
Thanks, Frank.  I appreciate that.  My work-around for now is to request the
URL myself then have GDAL interpret the image using whatever driver it finds
appropriate for the binary image.  I've almost got that working.

Would you mind if I posted this conversation to the GDAL developers list for
posterity and opened a ticket for this issue?

Thanks again.


[Quoted text hidden]
-- 
http://giscoder.blogspot.com/
Frank Warmerdam <warmerdam@pobox.com> Tue, Jun 23, 2009 at 12:01 PM
To: Joel Odom <joelodom@gmail.com>
Cc: Chris Bailey <chris.bailey@gtri.gatech.edu>
Joel Odom wrote:
Thanks, Frank.  I appreciate that.  My work-around for now is to request the
URL myself then have GDAL interpret the image using whatever driver it finds
appropriate for the binary image.  I've almost got that working.

Would you mind if I posted this conversation to the GDAL developers list for
posterity and opened a ticket for this issue?

Joel,

That would be an excellent idea.
[Quoted text hidden]
Joel Odom <joelodom@gmail.com> Tue, Jun 23, 2009 at 12:17 PM
Draft To: gdal-dev@lists.osgeo.org
For posterity, here is some information about a GDAL WMS driver issue.  I
opened ticket 3042 to address this.  Thanks.


[Quoted text hidden]
-- 
http://giscoder.blogspot.com/



-- 
http://giscoder.blogspot.com/



-- 
http://giscoder.blogspot.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090623/1f6cdb48/attachment-0001.html
From chaitanya.ch at gmail.com  Tue Jun 23 13:06:10 2009
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jun 23 13:06:13 2009
Subject: [gdal-dev] Quicklook creation with Python/GDAL
In-Reply-To: <4A40B575.7080105@gmx.net>
References: <4A40B575.7080105@gmx.net>
Message-ID: <eb502d880906231006g4e718149qfaf6a2a2e2a05d36@mail.gmail.com>

Markus,

If I understand your problem correctly you should be able to use
GDALDataset::BuildOverviews() and/or GDALRegenerateOverviews() for this
task.
To avoid a temporary file, you can use a GDAL virtual
file<http://www.gdal.org/gdal_vrttut.html>
.
There is an example python code using these functions at
http://trac.osgeo.org/gdal/browser/trunk/autotest/gcore/tiff_ovr.py . You
can find the documentation for the C++ version of these functions at
http://www.gdal.org/classGDALDataset.html#2aa6f88b3bbc840a5696236af11dde15and
http://www.gdal.org/gdal_8h.html#f42fd5ddd2d160492b23d62e75e42c82 .
You may need to use the trunk version of GDAL (refer to
http://trac.osgeo.org/gdal/wiki/DownloadSource#Subversion) for these
functions.
I hope this can solve your problem.

Best regards,
-- 
Chaitanya kumar CH.

On Tue, Jun 23, 2009 at 4:29 PM, Markus Reinhold <leaffan@gmx.net> wrote:

> Hej everyone,
> currently I was able to finish a small Python project utilizing GDAL for
> creating quicklooks of satellite imagery. What I am doing right now is
> retrieving the statistics of input bands, applying a standard deviation
> stretch and saving the result as PNG-dataset. This works quite well,
> however my problems start right here. To actually resize the created
> dataset and to merge three separate bands into a single PNG-file I'm
> using the Python Imaging Library, which needs single files to read from
> in order to do any processing. There is no problem with small to
> medium-sized images. But I'm running into trouble trying to create a
> quicklook for some standard panchromatic Quickbird imagery (ca. 30000 x
> 30000 pixels, 0.6 m GSD at UInt16 -> about 1.9 GB file size) as the PNG
> file that is created temporarily gets very big. The neccessary I/O
> operations naturally take quite some time. So my question is the
> following: Is there any possibility to do resizing a dataset with GDAL
> means - to spare the creation of a temporary file?
> Thank you very much for any ideas.
> Regards,
> Markus Reinhold
>
> --
>
> ********************************************************
> Dipl.-Kartograph Markus Reinhold
>
> Chair of Geoinformatics, Geohydrology and Modeling
> Friedrich-Schiller-University Jena
> L?bdergraben 32
> D - 07743 Jena
> Germany
>
> Phone.: (+49)(0)3641 / 9 488 65
> E-Mail: markus.reinhold@uni-jena.de
> ********************************************************
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090623/83201d39/attachment.html
From joelodom at gmail.com  Tue Jun 23 12:21:35 2009
From: joelodom at gmail.com (Joel Odom)
Date: Tue Jun 23 13:17:22 2009
Subject: [gdal-dev] Fwd: Transparency in GDAL WMS
In-Reply-To: <4A40FC57.6050905@pobox.com>
References: <d422b4500906230636x7217d235s98ee21d69b048bda@mail.gmail.com>
	<d422b4500906230651v2c4937f6ueb64243cab336de6@mail.gmail.com>
	<4A40E1D7.8080102@pobox.com>
	<d422b4500906230757r2336a717h901afa83835eea9f@mail.gmail.com>
	<4A40F065.902@pobox.com>
	<d422b4500906230815u373fe5dfvfa1de316bc9019dd@mail.gmail.com>
	<4A40FA2A.3090501@pobox.com>
	<d422b4500906230855v53c81034r7ddbd1f615952891@mail.gmail.com>
	<4A40FC57.6050905@pobox.com>
Message-ID: <d422b4500906230921j7a4930ber5bbb35f31e4fd50@mail.gmail.com>

For posterity, here is some information about a GDAL WMS driver issue.  I
opened ticket 3042 to address this.  I hope no one minds if I paste the
transcript of the conversation below.  I often search this list archive for
information about GDAL issues and figure this may be useful to have in the
archive.  Thanks.

Transcript of conversation:



 Joel Odom <joelodom@gmail.com>
Transparency in GDAL WMS
10 messages
Joel Odom <joelodom@gmail.com> Tue, Jun 23, 2009 at 9:36 AM
To: Frank Warmerdam <warmerdam@pobox.com>
Hi, Frank.  I'm hitting a WMS link that returns a PNG with transparency, but
the data set raster count says that it has only three bands.  We're on GDAL
1.5.2.  Another researcher here says that newer versions of GDAL support WMS
transparency, but I can't find any mention of it in this group or on in
Trac.  Is it correct that this feature was put in a later release and do you
know which release?  Thanks.

(By the way, there is an early, fairly buggy, alpha of FalconView 4.3
available for free download now from http://www.falconview.org/.  We've also
posted the FalconView source code there.)



-- 
http://giscoder.blogspot.com/
Joel Odom <joelodom@gmail.com> Tue, Jun 23, 2009 at 9:51 AM
To: Frank Warmerdam <warmerdam@pobox.com>
I think this may be what the other researcher here was looking at when he
said a newer version of GDAL:
http://trac.osgeo.org/mapserver/ticket/83 This ticket refers to
something about 8 years ago, though, so it's probably
not the issue.

Here is the WMS request that is returning a transparent PNG.  Any idea why
I'm getting this back as a three band raster and not seeing an alpha band?
 Thanks so much.

http://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n1p.cgi?TRANSPARENT=TRUE&request=GetMap&version=1.1.0&layers=nexrad-n1p&styles=&srs=EPSG:4326&format=image/png&width=948&height=603&bbox=-106.24059800,39.92912300,-97.79391800,45.30185300

[Quoted text hidden]
-- 
http://giscoder.blogspot.com/
Frank Warmerdam <warmerdam@pobox.com> Tue, Jun 23, 2009 at 10:08 AM
To: Joel Odom <joelodom@gmail.com>
Joel Odom wrote:
I think this may be what the other researcher here was looking at when he
said a newer version of GDAL:
http://trac.osgeo.org/mapserver/ticket/83 This ticket refers to
something about 8 years ago, though, so it's probably
not the issue.

Here is the WMS request that is returning a transparent PNG.  Any idea why
I'm getting this back as a three band raster and not seeing an alpha band?
 Thanks so much.

http://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n1p.cgi?TRANSPARENT=TRUE&request=GetMap&version=1.1.0&layers=nexrad-n1p&styles=&srs=EPSG:4326&format=image/png&width=948&height=603&bbox=-106.24059800,39.92912300,-97.79391800,45.30185300<
http://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n1p.cgi?TRANSPARENT=TRUE&request=GetMap&version=1.1.0&layers=nexrad-n1p&styles=&srs=EPSG:4326&format=image/png&width=948&height=603&bbox=-106.24059800,39.92912300,-97.79391800,45.30185300
>

Joel,

There are two ways of accomplishing transparency in PNG.  One is to add an
alpha band.  The other is to designate a color index as transparent in
a single band image with a color table.  That is the approach used in this
image.

Driver: PNG/Portable Network Graphics
Files: /wrk/home/warmerda/n1p.cgi.png
Size is 948, 603
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  603.0)
Upper Right (  948.0,    0.0)
Lower Right (  948.0,  603.0)
Center      (  474.0,  301.5)
Band 1 Block=948x1 Type=Byte, ColorInterp=Palette
 NoData Value=0
 Color Table (RGB with 45 entries)
   0: 255,255,255,0
   1: 104,34,139,255
   2: 154,50,205,255
   3: 178,58,238,255
   4: 191,62,255,255
   5: 153,85,201,255
...

Note that alpha=0 in the color value for index zero.  The "nodata" metadata
is also set to refer to color index zero.  So for this image all zero pixels
should be treated as transparent.

Does that address your problem?

Hopefully I can try out FalconView soon.  I skimmed the page and I'm
impressed with the project.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

Joel Odom <joelodom@gmail.com> Tue, Jun 23, 2009 at 10:57 AM
To: Frank Warmerdam <warmerdam@pobox.com>
Thanks, Frank.  That gives me a lot of insight into what's going on, but it
raises a new question.  When I hit the WMS using GDALOpen on an XML file
with the WMS connect data, I get something different than when I hit the URL
below with my browser, save the image, then open the saved PNG file with
GDALOpen.  I see the color table when I open the PNG and see the single band
raster, but rasterBand->GetColorTable() returns null when I open the WMS
from the XML file and I see a three band raster.  Why would I get back
different data from the different data sources?  It's like the WMS data
source is doing some interpretation on the image that discards original
single band image and creates a new three band image with no transparency.

Thanks for checking out FalconView.  We've been very popular in DoD mission
planning for about 15 years now.  We're opening up to the public as an
open-source GIS product.  Part of that effort involves aligning with OGC
standards like WMS, KML, etc.  We're using GDAL and OGR as a big part of
that effort and really appreciate the product.


[Quoted text hidden]
-- 
http://giscoder.blogspot.com/
Frank Warmerdam <warmerdam@pobox.com> Tue, Jun 23, 2009 at 11:10 AM
To: Joel Odom <joelodom@gmail.com>
Joel Odom wrote:
Thanks, Frank.  That gives me a lot of insight into what's going on, but it
raises a new question.  When I hit the WMS using GDALOpen on an XML file
with the WMS connect data, I get something different than when I hit the URL
below with my browser, save the image, then open the saved PNG file with
GDALOpen.  I see the color table when I open the PNG and see the single band
raster, but rasterBand->GetColorTable() returns null when I open the WMS
from the XML file and I see a three band raster.  Why would I get back
different data from the different data sources?  It's like the WMS data
source is doing some interpretation on the image that discards original
single band image and creates a new three band image with no transparency.

Joel,

Could you provide your wms xml control file for GDAL?  I'd like to try
this.  I was not really much involved in the development of the GDAL WMS
driver so I'm not clear on how it works internally.  It appears to be
doing substantial image manipulation and it might need some further
adjustments for this case.

Thanks for checking out FalconView.  We've been very popular in DoD mission
planning for about 15 years now.  We're opening up to the public as an
open-source GIS product.  Part of that effort involves aligning with OGC
standards like WMS, KML, etc.  We're using GDAL and OGR as a big part of
that effort and really appreciate the product.

Excellent!
[Quoted text hidden]
Joel Odom <joelodom@gmail.com> Tue, Jun 23, 2009 at 11:15 AM
To: Frank Warmerdam <warmerdam@pobox.com>
Here it is.  I'm constructing this as an in-memory string, saving it to an
in-memory file using the VSI stuff, then calling GDALOpen on the file.
 Thanks!


<GDAL_WMS>
  <Service name="WMS">
    <ServerURL>
http://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n1p.cgi?TRANSPARENT=TRUE
</ServerURL>
    <ImageFormat>image/png</ImageFormat>
    <Layers>nexrad-n1p</Layers>
  </Service>
  <DataWindow>
    <UpperLeftX>-102.017258</UpperLeftX>
    <UpperLeftY>47.974853</UpperLeftY>
    <LowerRightX>-93.570578</LowerRightX>
    <LowerRightY>42.602123</LowerRightY>
    <SizeX>948</SizeX>
    <SizeY>603</SizeY>
  </DataWindow>
  <Timeout>45</Timeout>
</GDAL_WMS>


[Quoted text hidden]
-- 
http://giscoder.blogspot.com/
Frank Warmerdam <warmerdam@pobox.com> Tue, Jun 23, 2009 at 11:52 AM
To: Joel Odom <joelodom@gmail.com>
Joel Odom wrote:
Here it is.  I'm constructing this as an in-memory string, saving it to an
in-memory file using the VSI stuff, then calling GDALOpen on the file.
 Thanks!

Joel,

I see what you mean.  I believe the approach taken in the WMS driver is
essentially obliterating any concept of transparency in the result.  It
would take some non-trivial additional development in the WMS driver to
address this issue.  I'm not in a position to do it.

You might want to take up the issue with Adam Nowaki who wrote the the
driver.  Possibly I'm missing something, or perhaps he would be willing
to do some work on this.
[Quoted text hidden]
Joel Odom <joelodom@gmail.com> Tue, Jun 23, 2009 at 11:55 AM
To: Frank Warmerdam <warmerdam@pobox.com>
Cc: Chris Bailey <chris.bailey@gtri.gatech.edu>
Thanks, Frank.  I appreciate that.  My work-around for now is to request the
URL myself then have GDAL interpret the image using whatever driver it finds
appropriate for the binary image.  I've almost got that working.

Would you mind if I posted this conversation to the GDAL developers list for
posterity and opened a ticket for this issue?

Thanks again.


[Quoted text hidden]
-- 
http://giscoder.blogspot.com/
Frank Warmerdam <warmerdam@pobox.com> Tue, Jun 23, 2009 at 12:01 PM
To: Joel Odom <joelodom@gmail.com>
Cc: Chris Bailey <chris.bailey@gtri.gatech.edu>
Joel Odom wrote:
Thanks, Frank.  I appreciate that.  My work-around for now is to request the
URL myself then have GDAL interpret the image using whatever driver it finds
appropriate for the binary image.  I've almost got that working.

Would you mind if I posted this conversation to the GDAL developers list for
posterity and opened a ticket for this issue?

Joel,

That would be an excellent idea.
[Quoted text hidden]
Joel Odom <joelodom@gmail.com> Tue, Jun 23, 2009 at 12:17 PM
Draft To: gdal-dev@lists.osgeo.org
For posterity, here is some information about a GDAL WMS driver issue.  I
opened ticket 3042 to address this.  Thanks.


[Quoted text hidden]
-- 
http://giscoder.blogspot.com/



-- 
http://giscoder.blogspot.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090623/8c53eb96/attachment-0001.html
From nsavard at mapgears.com  Tue Jun 23 14:00:08 2009
From: nsavard at mapgears.com (Normand Savard)
Date: Tue Jun 23 14:00:09 2009
Subject: [gdal-dev] Build OGR with Oracle support
In-Reply-To: <4A3F983D.4030001@mapgears.com>
References: <4A37FC3F.5020708@mapgears.com> <4A380356.4070804@loskot.net>
	<4A3AA114.6070701@mapgears.com> <4A3AB3C0.6080706@loskot.net>
	<4A3F983D.4030001@mapgears.com>
Message-ID: <4A411828.60605@mapgears.com>

Normand Savard wrote:
> Mateusz Loskot wrote:
>> I maintain macros detecting Oracle (autotools at
>> http://github.com/mloskot/workshop/tree/) which are used in GDAL
>> and I'm interested in improving it, so feel free to report any problems
>>
>>   
> Mateusz,
>
> I'm wondering if a switch could be add to detect libnnzxx.so location 
> instead of having to specify $LD_LIBRARY_PATH or by setting the 
> library path in /etc/ld.so.conf.d/oracle.conf and running ldconfig as 
> root (as stated by Andreas)?
>
> Norm
>
I just noticed today that I replied to Mateusz only.  Sorry for that.  
Replying to the list as well now.

Norm
From klokan at klokan.cz  Tue Jun 23 15:14:50 2009
From: klokan at klokan.cz (=?ISO-8859-2?Q?Klokan_Petr_P=F8idal?=)
Date: Tue Jun 23 15:14:54 2009
Subject: [gdal-dev] Distributed processing
In-Reply-To: <OF6535FE16.61CFD516-ON072575D8.00605297-072575D8.0062E392@usgs.gov>
References: <C8891C79DFCAB347B9221DF3890EDD2F33CABF@topdog.Virtalis.local>
	<4A37BA4A.3030400@external.thalesgroup.com>
	<OF6535FE16.61CFD516-ON072575D8.00605297-072575D8.0062E392@usgs.gov>
Message-ID: <6e41d95b0906231214o3658d7fbkeefb2fe5608f1a3b@mail.gmail.com>

Hello John,

I developed the Parallel GDAL2Tiles application (info at
http://www.maptiler.com/) and I am using the ParallelPython module for
GDAL automation on a computer cluster - have a look at
http://www.parallelpython.com/.

It runs automatically on SMP and multi-core computers and it is simple
to setup in a cluster mode as well.
Parallel programming for simultaneously running python processes with
this module is quite straight forward. I can just recommend that - it
runs well in several production environments, including Amazon EC2
cluster (I made some patches for that).

I was also testing the light-weight open-source implementation of
Google's MapReduce from Nokia research lab available at
http://discoproject.org/. This is also usable for GDAL processing of
huge datasets.

I would like to present the MapTiler at FOSS4G in Sydney in case I get
a time slot...
BTW You can vote for my presentation at:
http://dev.extranet.lisasoft.com/foss4g/itemrate/list/all/gdal/

Best regards,

Klokan Petr Pridal

On Wed, Jun 17, 2009 at 8:00 PM, Trent M Hare<thare@usgs.gov> wrote:
>
> huh - processing using Make - clever.
>
> We are researching several different approaches for this also but I imagine
> we will use Conductor, created by (UofA). Another of our commercial systems
> uses Condor (open source - http://www.cs.wisc.edu/condor/ ) .
>
> Currently the UofA Conductor HiRISE pipeline uses our ISIS image processing
> software which is not yet multi-threaded. Thus this system should also work
> well for GDAL processing. They also have another tool that monitors
> Conductor called Maestro. Don't jump into this lightly as I imagine it will
> be tricky to setup (it also requires a database - MySQL).
> http://pirlwww.lpl.arizona.edu/software/Conductor.shtml BTW, they are a
> completely *nix house (Solaris, Mac OS-X, FreeBSD and Linux).
>
> here is an abstract (by the author B. Castalia)
> http://www.lsstmail.org/meet_coll/ongoing/Software/
>
> Regards,
> Trent
>
>
> From: Fabrice LALLAURET - PSV <fabrice.lallauret@external.thalesgroup.com>
> To:
> gdal-dev@lists.osgeo.org
> Date: 06/16/2009 08:32 AM
> Subject: Re: [gdal-dev] Distributed processing
> Sent by:
> gdal-dev-bounces@lists.osgeo.org
> ________________________________
>
>
> John Donovan a ?crit :
>> Hi,
>> We currently have a stand-alone app that converts, mosaicks and scales
>> GDAL-supported images to a proprietary format. It works well, but we
>> handle tens of thousands of source files at a time, which can slow the
>> process down to a crawl.
>>
>> So we're investigating parallelising this process over several machines,
>> and I was wondering if anyone has any experience of this that they'd be
>> willing to share? It's still early days yet, so we're open to all
>> suggestions.
>>
>> Regards,
>> John Donovan - Programmer, Virtalis Ltd.
>>
>> ______________________________________________________________________
>> This email has been scanned for Virtalis Ltd by the MessageLabs Email
>> Security System.
>> ______________________________________________________________________
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> Personally, I create Makefile and use distmake for the distribution purpose.
>
> Regards
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
http://blog.klokan.cz/
http://www.maptiler.org/
http://www.oldmapsonline.org/
From Craig.Dillabough at AGR.GC.CA  Tue Jun 23 15:33:48 2009
From: Craig.Dillabough at AGR.GC.CA (Dillabough, Craig)
Date: Tue Jun 23 15:33:51 2009
Subject: [gdal-dev] gdaladdo
In-Reply-To: <200906191930.32934.even.rouault@mines-paris.org>
Message-ID: <8EA33237DDDB244E860ADDE976124AE50202CBCD@ONOTTAXMS2.AGR.GC.CA>

Even,
Sorry I am slow getting back. I was away Monday, and just noticed your message now.

The external libtiff version was 3.8.2

My image is: 28800, 9600

Craig

-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Friday, June 19, 2009 1:31 PM
To: Dillabough, Craig
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] gdaladdo


Just for curiosity, could you precise the version of external libtiff on your 
system and the dimensions of your TIFF image ?

Le Friday 19 June 2009 18:05:30 Dillabough, Craig, vous avez ?crit?:
> Hi Even,
>
> My original settings were:
> TIFF_SETTING   =    external
> And
> GEOTIFF_SETTING =   internal
>
> I reconfigured with the --with-libtiff=internal and recompiled.
>
> Now things seem to be working.
>
> Thanks for your help, I don't think I would have ever figured that one out.
>
> Regards,
> Craig
>
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: Thursday, June 18, 2009 4:33 PM
> To: Dillabough, Craig
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] gdaladdo
>
>
> Look at TIFF_SETTING in GDALmake.opt.
>
> Le Thursday 18 June 2009 22:31:12 Dillabough, Craig, vous avez ?crit?:
> > I am using the latest and greatest GDAL. I compiled/installed it by hand
> > (so to speak) so I am not sure which libtiff I am using - I will check
> > config.log and get back to you tommorrow (need to catch my ride home) -
> > unless you know of an easier way to check.
> >
> > Thanks for your help.
> >
> > Craig
> >
> >
> >
> >
> >
> >
> >
> > -----Original Message-----
> > From: Even Rouault [mailto:even.rouault@mines-paris.org]
> > Sent: Thursday, June 18, 2009 4:18 PM
> > To: gdal-dev@lists.osgeo.org
> > Cc: Dillabough, Craig
> > Subject: Re: [gdal-dev] gdaladdo
> >
> >
> > Craig,
> >
> > This should work.
> >
> > Are you using an older GDAL version ? Are you using external libtiff ?
> >
> > If so, try again with newer GDAL and internal libtiff (although I
> > wouldn't older GDAL to fail on a simple case like yours that doesn't
> > involve TIFF compression)
> >
> > Le Thursday 18 June 2009 21:50:25 Dillabough, Craig, vous avez ?crit?:
> > > Hi,
> > > I am trying to tile and create overviews for a TIFF image dataset I
> > > have, but I keep getting strange errors when attempting to add
> > > overviews.
> > >
> > > 1st I created a copy of the original image (same format and all, but
> > > wanted to keep the original around in case I had problems).
> > >
> > > >gdal_translate -ot Float32 -of GTiff Av.MaxNDVI.2000.2009.Week.19.tif
> > >
> > > trans/week19.tif
> > >
> > > >cd trans
> > >
> > > Then I tiled the image (I guess I could have done this in one step by
> > >
> > > adding -co "TILED=YES" to the previous step):
> > > >gdal_translate -ot Float32 -of GTiff -co "TILED=YES" week19.tif
> > >
> > > week19_tiled.tif
> > >
> > > Then I tried to add the overviews:
> > > > gdaladdo -r average -ro week19_tiled.tif 2 4 8 16
> > >
> > > I get the following (I've added some whitespace for clarity):
> > > 0...10...20...30...40...50...60...70...
> > > Warning 1: TIFFReadDirectory:week19_tiled.tif.ovr: Wrong
> > > "StripByteCounts" field,
> > > ignoring and calculating from imagelength
> > > Warning 1: TIFFReadDirectory:week19_tiled.tif.ovr: Wrong
> > > "StripByteCounts" field,
> > > ignoring and calculating from imagelength
> > > ERROR 1: week19_tiled.tif.ovr:DumpModeDecode: Not enough data for
> > > scanline 0
> > > ERROR 1: TIFFReadEncodedTile() failed.
> > >
> > > ERROR 1: IReadBlock failed at X offset 0, Y offset 3
> > > ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 3
> > >
> > > I get effectively the same error when I run this without the -ro
> > > option.
> > >
> > > Any idea's what is going wrong.
> > >
> > > Regards,
> > > Craig Dillabaugh
> > >
> > >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev


From mateusz at loskot.net  Tue Jun 23 17:18:09 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Jun 23 17:18:15 2009
Subject: [gdal-dev] Build OGR with Oracle support
In-Reply-To: <4A3F983D.4030001@mapgears.com>
References: <4A37FC3F.5020708@mapgears.com> <4A380356.4070804@loskot.net>
	<4A3AA114.6070701@mapgears.com> <4A3AB3C0.6080706@loskot.net>
	<4A3F983D.4030001@mapgears.com>
Message-ID: <4A414691.2040908@loskot.net>

Normand Savard wrote:
> Mateusz Loskot wrote:
>> I maintain macros detecting Oracle (autotools at
>> http://github.com/mloskot/workshop/tree/) which are used in GDAL
>> and I'm interested in improving it, so feel free to report any problems
>>
>>   
> Mateusz,
> 
> I'm wondering if a switch could be add to detect libnnzxx.so location
> instead of having to specify $LD_LIBRARY_PATH or by setting the library
> path in /etc/ld.so.conf.d/oracle.conf and running ldconfig as root (as
> stated by Andreas)?

Normand,

All the elements you complain about are just a standard way tell loader
where to findshared libraries.
I don't think it's a good idea.


Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From mateusz at loskot.net  Tue Jun 23 18:03:42 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Jun 23 18:03:52 2009
Subject: [OT] Re: [gdal-dev] Distributed processing
In-Reply-To: <6e41d95b0906231214o3658d7fbkeefb2fe5608f1a3b@mail.gmail.com>
References: <C8891C79DFCAB347B9221DF3890EDD2F33CABF@topdog.Virtalis.local>	<4A37BA4A.3030400@external.thalesgroup.com>	<OF6535FE16.61CFD516-ON072575D8.00605297-072575D8.0062E392@usgs.gov>
	<6e41d95b0906231214o3658d7fbkeefb2fe5608f1a3b@mail.gmail.com>
Message-ID: <4A41513E.8020207@loskot.net>

Klokan Petr P?idal wrote:
> I would like to present the MapTiler at FOSS4G in Sydney in case I get
> a time slot...
> BTW You can vote for my presentation at:
> http://dev.extranet.lisasoft.com/foss4g/itemrate/list/all/gdal/

Trying to load this page, I'm getting "Page not found (404)".
If fixed, I will vote :-)

Cheers,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From mateusz at loskot.net  Tue Jun 23 18:31:30 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Jun 23 18:31:43 2009
Subject: [gdal-dev] Errors in compiling GDAL on a 64bits Linux
In-Reply-To: <20090622092444.m35vi7nrm04ok4oo@webmail3.isis.unc.edu>
References: <20090622092444.m35vi7nrm04ok4oo@webmail3.isis.unc.edu>
Message-ID: <4A4157C2.5050003@loskot.net>

Limei Ran wrote:
> Hi:
> 
> I configured it with the commands:
> 
> 
> 1. ./setenv CFLAGS "-fPIC"
> 
> 2. ./configure
> --prefix=/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/gdal-1.6.1/local
> 
> --with-static-proj4=/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/proj-4.6.1/local
> --with-hdf5=/nas/uncch/depts/cep/emc/lran/mims/sa_06_2009/src/libs/hdf5-1.8.3/local 
> --with-libtiff=internal  --without-curl --without-expat --without-mysql

It's very hard to diagnose this problem without summary produced by
./configure script. Please, paste the output it's giving you.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From mateusz at loskot.net  Tue Jun 23 18:38:48 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Jun 23 18:38:55 2009
Subject: [gdal-dev] Build OGR with Oracle support
In-Reply-To: <43307.193.246.86.39.1245659984.squirrel@webmail.carto.net>
References: <4A37FC3F.5020708@mapgears.com>
	<4A380356.4070804@loskot.net>	<4A3AA114.6070701@mapgears.com>	<35721.193.246.86.39.1245412495.squirrel@webmail.carto.net>	<4A3B979B.8040805@loskot.net>
	<4A3BA8A6.9000809@mapgears.com>	<4A3E903B.5050207@carto.net>
	<43307.193.246.86.39.1245659984.squirrel@webmail.carto.net>
Message-ID: <4A415978.2000904@loskot.net>

Andreas Neumann wrote:
> ok - the problem could now be solved by setting the library path in
> /etc/ld.so.conf.d/oracle.conf and running ldconfig as root. Then all the
> libraries could be found. Somehow the LD_LIBRARY_PATH variable was
> constantly ignored, although it was set and could be queried with echo
> $LD_LIBRARY_PATH. It was interesting that LD_LIBRARY_PATH worked as root,
> but not as a regular user, but the method with ldconfig worked for all
> users.
> 
> Thank you for all of your help!

Andreas,

Check if directory with libnnz has +x privileges for your non-root
users. IOW, check if you can step into this directory as non-root user.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From klokan at klokan.cz  Wed Jun 24 02:54:07 2009
From: klokan at klokan.cz (=?ISO-8859-2?Q?Klokan_Petr_P=F8idal?=)
Date: Wed Jun 24 02:54:10 2009
Subject: [OT] Re: [gdal-dev] Distributed processing
In-Reply-To: <4A41513E.8020207@loskot.net>
References: <C8891C79DFCAB347B9221DF3890EDD2F33CABF@topdog.Virtalis.local>
	<4A37BA4A.3030400@external.thalesgroup.com>
	<OF6535FE16.61CFD516-ON072575D8.00605297-072575D8.0062E392@usgs.gov>
	<6e41d95b0906231214o3658d7fbkeefb2fe5608f1a3b@mail.gmail.com>
	<4A41513E.8020207@loskot.net>
Message-ID: <6e41d95b0906232354h3cd64ebar4c8db2cc2ff7cd03@mail.gmail.com>

Hi Mateusz,

I am sorry, it seems there is no way how to link the abstract directly
on the web.

So you should go to:
http://2009.foss4g.org/presentations/

And click "Vote for abstracts" and then find my presentation. It has a
label "GDAL" ;-).
Maybe once you log in to their system, then my link mentioned bellow will run.

Thanks you!

Klokan

2009/6/24 Mateusz Loskot <mateusz@loskot.net>:
> Klokan Petr P?idal wrote:
>> I would like to present the MapTiler at FOSS4G in Sydney in case I get
>> a time slot...
>> BTW You can vote for my presentation at:
>> http://dev.extranet.lisasoft.com/foss4g/itemrate/list/all/gdal/
>
> Trying to load this page, I'm getting "Page not found (404)".
> If fixed, I will vote :-)
>
> Cheers,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
>



-- 
http://blog.klokan.cz/
http://www.maptiler.org/
http://www.oldmapsonline.org/
From mgolczak at yahoo.com  Wed Jun 24 04:06:06 2009
From: mgolczak at yahoo.com (Matthew Golczak)
Date: Wed Jun 24 04:06:11 2009
Subject: [gdal-dev] gdal_translate help
Message-ID: <178098.92368.qm@web39106.mail.mud.yahoo.com>



Hi Frank,
Thank you very much for your suggestion. I've followed your idea with  success . I've got nitif file with geo-spatial references but gdalwarp  during execution was not entirely happy   please see output dump.
gdalwarp run.tiff -of nitf    run1.nitf
Copying color table from run1linux.tiff to new file.
Creating output file that is 12595P x 1851L.
ERROR 6: NITF file should have been created with creation option 'ICOORDS=G'.
 
ERROR 6: Apparently no space reserved for IGEOLO info in NITF file.
NITFWriteIGEOGLO() fails.
ERROR 1: Unable to write all 256 LUT entries, only able to write 0.
Processing input file run1linux.tiff.
0...10...20...30...40...50...60...70...80...90...100 - done.
I'm not sure that those two errors are critical especially that I have got nitif image which is correctly displayed by openev and ESRI tools. In this circumstance could you comment those errors and advice me  what needs to be done to eliminate those errors?
Thank you very much for your advice .

regards

Maciek


--- On Tue, 6/23/09, Frank Warmerdam <warmerdam@pobox.com> wrote:

> From: Frank Warmerdam <warmerdam@pobox.com>
> Subject: Re: [gdal-dev] gdal_translate help
> To: "Matthew Golczak" <mgolczak@yahoo.com>
> Cc: gdal-dev@lists.osgeo.org
> Date: Tuesday, June 23, 2009, 4:37 PM
> Matthew Golczak wrote:
> > Hello, I?m new to gdal concept and I?ll appreciate
> if you could help me. I?m
> > trying to use gdal_translate to geo-referencing aerial
> images but with
> > limited success so far. The image is generated as gif
> file plus
> > information about geo-location of each corner. Due to
> the fact that the
> > corner geo-location is calculated based on GPS, the
> datum and projection is
> > specified as EPSG:4326. The following translation
> works very well for me gdal_translate -of GTiff -a_srs
> EPSG:4326 -gcp 0 0 138.792939 -34.721669
> > -gcp 1784 0 138.791485 -34.753698 -gcp 0 12515
> 138.519595 -34.713290 -gcp
> > 1784 12515 138.518036 -34.745320? run.gif
> run.tiff but I need also this
> > image in nitif format? so I have tried? the
> following? translation gdal_translate -of nitf run1tiff
> run.nitf.? Unfortunately in this case
> > nitif file has not any geospatial references.?
> The gdalinof in regards to
> > tiff contains geospatial information and none in
> respect to nitif.? It seems
> > to me that is something wrong but what? Any support in
> this matter highly
> > appreciated. 
> 
> Maciek,
> 
> The GDAL NITF driver does not support writing GCPs in NITF
> format.? In fact,
> I'm not aware of a general mechanism for storing GCPs in
> NITF format.? I
> think you will need to georeference it using affine
> georeferencing.? If
> the image is not north up, you may need to rectify the
> image first with
> gdalwarp.? In fact gdalwarp can write directly to nitf
> format so perhaps
> you could do:
> 
> eg.
> 
> gdalwarp run.tiff -of NITF run.nitf
> 
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up???|
> Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush? ? |
> Geospatial Programmer for Rent
> 
> 


      
From mateusz at loskot.net  Wed Jun 24 05:36:11 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Jun 24 05:35:36 2009
Subject: [gdal-dev] Re: [postgis-devel] WKT Raster weekly report #4
In-Reply-To: <cb4457700906201353t520e3963h559de6d25c554439@mail.gmail.com>
References: <cb4457700906201353t520e3963h559de6d25c554439@mail.gmail.com>
Message-ID: <4A41F38B.8030400@loskot.net>

Jorge Ar?valo wrote:
> Here, the report #4: 
> http://www.gis4free.org/blog/2009/06/20/gsoc-09-weekly-report-4-1206-1906/
> 
> 

Jorge,

I've submitted it as comments under your blog post, but it doesn't
appear and I didn't get any message it's been sent successful, so I'm
sending it here as well:


A couple of comments:

1. The spelling of PostGIS is PostGIS not Postgis, PostgreSQL not
Postgresql, also it's "WKT Raster" but not "WKT raster". It's fairly
important.

2. What sibling list you mean? Link it to specific place in GDAL/OGR
code from Trac source browser and it will be easier to find out.

3. Check this for svn:ignore
(http://svnbook.red-bean.com/en/1.1/ch07s02.html#svn-ch-7-sect-2.3.3)

4. What you mean as "I only compile the WKTRaster code"?
The WKT Raster has one direct dependency (PostGIS) and one indirect
(GEOS). The WKT Raster requires very recent version of PostGIS (I
suggest to grap source from its SVN trunk) and that recent version of
PostGIS requires very recent version of GEOS (again, GEOS from SVN
trunk). I build, run tests and install both of them every morning
without problems - it's easy.

I am going to put a post about WKT Raster installation, hopefully tonight.
Feel free to ask if you have any questions.

Best regards,
-- 
Mateusz Loskot
Senior Programmer, Cadcorp
http://www.cadcorp.com

From emmanuel.sambale at gmail.com  Wed Jun 24 06:00:26 2009
From: emmanuel.sambale at gmail.com (maning sambale)
Date: Wed Jun 24 06:21:55 2009
Subject: [gdal-dev] convert kmz to shapefiles
Message-ID: <f902f9840906240300h629ded73v1b064ccffaaaebe@mail.gmail.com>

Hi,

I tried converting kmz (compressed kml) to shapefile but it is not
recognized by ogr2ogr.  Any workaround the list can suggest?

-- 
cheers,
maning
------------------------------------------------------
"Freedom is still the most radical idea of all" -N.Branden
wiki: http://esambale.wikispaces.com/
blog: http://epsg4253.wordpress.com/
------------------------------------------------------
From SnapeM at rpsgroup.com  Wed Jun 24 08:09:51 2009
From: SnapeM at rpsgroup.com (Matthew Snape)
Date: Wed Jun 24 08:09:56 2009
Subject: [gdal-dev] convert kmz to shapefiles
In-Reply-To: <5e6e5b159c18e07d9a999f67d8f2bf6ff00464fb@localhost>
References: <5e6e5b159c18e07d9a999f67d8f2bf6ff00464fb@localhost>
Message-ID: <605F55D8070C094AA2E2A9CBA2767A3C04CAB690@EXMB1.eur.rpsgroup.com>

Have you tried decompressing the kmz and then converting the doc.kml?


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of maning sambale
Sent: 24 June 2009 11:00
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] convert kmz to shapefiles

Hi,

I tried converting kmz (compressed kml) to shapefile but it is not
recognized by ogr2ogr.  Any workaround the list can suggest?

-- 
cheers,
maning
------------------------------------------------------
"Freedom is still the most radical idea of all" -N.Branden
wiki: http://esambale.wikispaces.com/
blog: http://epsg4253.wordpress.com/
------------------------------------------------------
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
This e-mail message and any attached file is the property of the sender and is sent in confidence to the addressee only. The contents are not to be disclosed to anyone other than
the addressee. Unauthorised recipients are requested to preserve this confidentiality and to advise the sender immediately of any error in transmission. If you experience difficulty 
with opening any attachments to this message, or with sending a reply by email, please telephone on + 44-(0)1235 438151 or fax on + 44-(0)1235 438188. 
Any advice contained in this e-mail or any accompanying file attached hereto is for information purposes only. RPS do not take any responsibility for differences between the original 
and the transmission copy or any amendments made thereafter. If the addressee requires RPS to be responsible for the contents of this e-mail, RPS will be pleased to issue a signed 
hard copy of the document upon request.
RPS Planning and Development Limited, company number: 02947164 (England). Registered office: Centurion Court, 85 Milton Park Abingdon Oxfordshire OX14 4RY.
RPS Group Plc web link: <http://www.rpsgroup.com>
From jorge.arevalo at gmail.com  Wed Jun 24 10:55:39 2009
From: jorge.arevalo at gmail.com (=?UTF-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Wed Jun 24 10:56:02 2009
Subject: [gdal-dev] Re: [postgis-devel] WKT Raster weekly report #4
In-Reply-To: <4A41F38B.8030400@loskot.net>
References: <cb4457700906201353t520e3963h559de6d25c554439@mail.gmail.com> 
	<4A41F38B.8030400@loskot.net>
Message-ID: <cb4457700906240755w280aed0fg9c4d604f77e4d224@mail.gmail.com>

Hello,
I'm really sorry Mateusz. The first time you wrote, I forgot to activate the
autoapproval. Now, your post was marked as spam (????????). I just approved
it.

I'll read your post carefully. Many thanks!

Laurence J. Peter<http://www.brainyquote.com/quotes/authors/l/laurence_j_peter.html>
- "If two wrongs don't make a right, try three."

On Wed, Jun 24, 2009 at 11:36 AM, Mateusz Loskot <mateusz@loskot.net> wrote:

> Jorge Ar?valo wrote:
>
>> Here, the report #4:
>> http://www.gis4free.org/blog/2009/06/20/gsoc-09-weekly-report-4-1206-1906/
>>
>>
>>
> Jorge,
>
> I've submitted it as comments under your blog post, but it doesn't
> appear and I didn't get any message it's been sent successful, so I'm
> sending it here as well:
>
>
> A couple of comments:
>
> 1. The spelling of PostGIS is PostGIS not Postgis, PostgreSQL not
> Postgresql, also it's "WKT Raster" but not "WKT raster". It's fairly
> important.
>
> 2. What sibling list you mean? Link it to specific place in GDAL/OGR
> code from Trac source browser and it will be easier to find out.
>
> 3. Check this for svn:ignore
> (http://svnbook.red-bean.com/en/1.1/ch07s02.html#svn-ch-7-sect-2.3.3)
>
> 4. What you mean as "I only compile the WKTRaster code"?
> The WKT Raster has one direct dependency (PostGIS) and one indirect
> (GEOS). The WKT Raster requires very recent version of PostGIS (I
> suggest to grap source from its SVN trunk) and that recent version of
> PostGIS requires very recent version of GEOS (again, GEOS from SVN
> trunk). I build, run tests and install both of them every morning
> without problems - it's easy.
>
> I am going to put a post about WKT Raster installation, hopefully tonight.
> Feel free to ask if you have any questions.
>
> Best regards,
> --
> Mateusz Loskot
> Senior Programmer, Cadcorp
> http://www.cadcorp.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090624/4e924211/attachment.html
From alobolistas at gmail.com  Wed Jun 24 12:18:51 2009
From: alobolistas at gmail.com (Agustin Lobo)
Date: Wed Jun 24 12:25:51 2009
Subject: [gdal-dev] Same error for  gdal-mrsid on ubuntu 8.10
Message-ID: <4A4251EB.6080701@gmail.com>

Alan,

I've upgraded  to 8.10 and I've reinstalled  gdal  (1.6.1) and gdal-mrsid-src 
(through
sudo apt-get install gdal-mrsid-src
because gdal-mrsid-src is not listed by synaptic)
and then made gdal_MrSID.so with
sudo /usr/bin/gdal-mrsid-build /usr/local/Geo_DSDK-7.0.0.2167

but have the same problem:
$ gdalinfo --formats
ERROR 1: /usr/lib/gdal16plugins/gdal_MrSID.so: undefined symbol: 
_ZNSs20_S_empty_rep_storageE
ERROR 1: /usr/lib/gdal16plugins/gdal_MrSID.so: undefined symbol: 
_ZNSs20_S_empty_rep_storageE
Supported Formats:
   VRT (rw+): Virtual Raster
   GTiff (rw+): GeoTIFF
etc

Therefore, it is not a problem of the distribution.

Any suggestion?

(should I cc to ubuntu@lists.osgeo.org ?)

Thanks

Agus


-------------- next part --------------
A non-text attachment was scrubbed...
Name: alobolistas.vcf
Type: text/x-vcard
Size: 251 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090624/d1330253/alobolistas.vcf
From mateusz at loskot.net  Wed Jun 24 12:48:50 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Jun 24 12:48:15 2009
Subject: [OT] Re: [gdal-dev] Distributed processing
In-Reply-To: <6e41d95b0906232354h3cd64ebar4c8db2cc2ff7cd03@mail.gmail.com>
References: <C8891C79DFCAB347B9221DF3890EDD2F33CABF@topdog.Virtalis.local>	
	<4A37BA4A.3030400@external.thalesgroup.com>	
	<OF6535FE16.61CFD516-ON072575D8.00605297-072575D8.0062E392@usgs.gov>	
	<6e41d95b0906231214o3658d7fbkeefb2fe5608f1a3b@mail.gmail.com>	
	<4A41513E.8020207@loskot.net>
	<6e41d95b0906232354h3cd64ebar4c8db2cc2ff7cd03@mail.gmail.com>
Message-ID: <4A4258F2.9090203@loskot.net>

Klokan Petr P?idal wrote:
> Hi Mateusz,
> 
> I am sorry, it seems there is no way how to link the abstract directly
> on the web.
> 
> So you should go to:
> http://2009.foss4g.org/presentations/
> 
> And click "Vote for abstracts" and then find my presentation. It has a
> label "GDAL" ;-).
> Maybe once you log in to their system, then my link mentioned bellow will run.

Ah, you must log in. Sorry, then I do cross my fingers only :-)

Good luck!
-- 
Mateusz Loskot, http://mateusz.loskot.net
From bryan at ideotrope.org  Wed Jun 24 18:49:52 2009
From: bryan at ideotrope.org (Bryan Keith)
Date: Wed Jun 24 18:49:53 2009
Subject: [gdal-dev] convert lines to polygons
In-Reply-To: <d2595b180904011409s5b64aa39tb03152ed7edba7c3@mail.gmail.com>
References: <49D3CF27.9080705@loskot.net>
	<d2595b180904011357k7543a15ew4d13f7b5699793f3@mail.gmail.com>
	<d2595b180904011409s5b64aa39tb03152ed7edba7c3@mail.gmail.com>
Message-ID: <2250.64.15.96.66.1245883792.squirrel@ideotrope.org>

Hello,

I'm using BuildPolygonFromEdges in ogr in an attempt to take some lines
and convert them to polygons.  For a number of my sets of lines
BuildPolygonFromEdges fails.  I think this is because the lines aren't
closed.  Is there a way to put a tolerance into BuildPolygonFromEdges so
that nodes within the tolerance are considered coincident?

Or is there another tool that will do what I want?  I used to use ArcInfo
CLEAN to do this, but I don't have access to that tool.  I'm open to any
suggestions, not just gdal/ogr tools.  Thank you.

Bryan

From emmanuel.sambale at gmail.com  Wed Jun 24 21:31:36 2009
From: emmanuel.sambale at gmail.com (maning sambale)
Date: Wed Jun 24 21:31:38 2009
Subject: [gdal-dev] convert kmz to shapefiles
In-Reply-To: <BAY120-DS172C561ADFC2721FB3EB0F9370@phx.gbl>
References: <f902f9840906240300h629ded73v1b064ccffaaaebe@mail.gmail.com>
	<BAY120-DS172C561ADFC2721FB3EB0F9370@phx.gbl>
Message-ID: <f902f9840906241831g60662a10v2e24f75454f32af2@mail.gmail.com>

I tried to decompress the kmz nd converted the doc.kml.  ogr2ogr did
not convert the kml (for good reasons) because it is a mixture of
placemark, polygons and lines

On Thu, Jun 25, 2009 at 12:38 AM, Craig
Miller<craig.miller@spatialminds.com> wrote:
> Have you tried GPS Babel?
>
>
> --------------------------------------------------
> From: "maning sambale" <emmanuel.sambale@gmail.com>
> Sent: Wednesday, June 24, 2009 3:00 AM
> To: <gdal-dev@lists.osgeo.org>
> Subject: [gdal-dev] convert kmz to shapefiles
>
>> Hi,
>>
>> I tried converting kmz (compressed kml) to shapefile but it is not
>> recognized by ogr2ogr. ?Any workaround the list can suggest?
>>
>> --
>> cheers,
>> maning
>> ------------------------------------------------------
>> "Freedom is still the most radical idea of all" -N.Branden
>> wiki: http://esambale.wikispaces.com/
>> blog: http://epsg4253.wordpress.com/
>> ------------------------------------------------------
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>



-- 
cheers,
maning
------------------------------------------------------
"Freedom is still the most radical idea of all" -N.Branden
wiki: http://esambale.wikispaces.com/
blog: http://epsg4253.wordpress.com/
------------------------------------------------------
From jorge.arevalo at gmail.com  Wed Jun 24 21:28:14 2009
From: jorge.arevalo at gmail.com (=?UTF-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Wed Jun 24 21:36:06 2009
Subject: [gdal-dev] Re: [postgis-devel] WKT Raster weekly report #4
In-Reply-To: <cb4457700906240755w280aed0fg9c4d604f77e4d224@mail.gmail.com>
References: <cb4457700906201353t520e3963h559de6d25c554439@mail.gmail.com> 
	<4A41F38B.8030400@loskot.net>
	<cb4457700906240755w280aed0fg9c4d604f77e4d224@mail.gmail.com>
Message-ID: <cb4457700906241828u3635fcb9w4dbcbe416ba8c1bc@mail.gmail.com>

Hello,

I answered your comments in my blog
http://www.gis4free.org/blog/2009/06/20/gsoc-09-weekly-report-4-1206-1906/

I have a question: What's the best way to test a new driver's code? I've
loaded this TIFF file into PostGIS using gdal2wktraster.py:
http://rapidfire.sci.gsfc.nasa.gov/subsets/?subset=USA1.2009168.terra.2km,
and I think that I can simply do gdalinfo PG:.... to test if my driver is
working.

Another option is to create testing code, but gdalinfo is more reliable that
any code that I can write...

Yogi Berra <http://www.brainyquote.com/quotes/authors/y/yogi_berra.html>  -
"I never said most of the things I said."

2009/6/24 Jorge Ar?valo <jorge.arevalo@gmail.com>

> Hello,
> I'm really sorry Mateusz. The first time you wrote, I forgot to activate
> the autoapproval. Now, your post was marked as spam (????????). I just
> approved it.
>
> I'll read your post carefully. Many thanks!
>
> Laurence J. Peter<http://www.brainyquote.com/quotes/authors/l/laurence_j_peter.html> - "If two wrongs don't make a right, try three."
>
> On Wed, Jun 24, 2009 at 11:36 AM, Mateusz Loskot <mateusz@loskot.net>wrote:
>
>> Jorge Ar?valo wrote:
>>
>>> Here, the report #4:
>>> http://www.gis4free.org/blog/2009/06/20/gsoc-09-weekly-report-4-1206-1906/
>>>
>>>
>>>
>> Jorge,
>>
>> I've submitted it as comments under your blog post, but it doesn't
>> appear and I didn't get any message it's been sent successful, so I'm
>> sending it here as well:
>>
>>
>> A couple of comments:
>>
>> 1. The spelling of PostGIS is PostGIS not Postgis, PostgreSQL not
>> Postgresql, also it's "WKT Raster" but not "WKT raster". It's fairly
>> important.
>>
>> 2. What sibling list you mean? Link it to specific place in GDAL/OGR
>> code from Trac source browser and it will be easier to find out.
>>
>> 3. Check this for svn:ignore
>> (http://svnbook.red-bean.com/en/1.1/ch07s02.html#svn-ch-7-sect-2.3.3)
>>
>> 4. What you mean as "I only compile the WKTRaster code"?
>> The WKT Raster has one direct dependency (PostGIS) and one indirect
>> (GEOS). The WKT Raster requires very recent version of PostGIS (I
>> suggest to grap source from its SVN trunk) and that recent version of
>> PostGIS requires very recent version of GEOS (again, GEOS from SVN
>> trunk). I build, run tests and install both of them every morning
>> without problems - it's easy.
>>
>> I am going to put a post about WKT Raster installation, hopefully tonight.
>> Feel free to ask if you have any questions.
>>
>> Best regards,
>> --
>> Mateusz Loskot
>> Senior Programmer, Cadcorp
>> http://www.cadcorp.com
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090625/38fbaab0/attachment.html
From mateusz at loskot.net  Thu Jun 25 05:59:01 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Jun 25 05:58:27 2009
Subject: [gdal-dev] Re: [postgis-devel] WKT Raster weekly report #4
In-Reply-To: <cb4457700906241828u3635fcb9w4dbcbe416ba8c1bc@mail.gmail.com>
References: <cb4457700906201353t520e3963h559de6d25c554439@mail.gmail.com>
	<4A41F38B.8030400@loskot.net>
	<cb4457700906240755w280aed0fg9c4d604f77e4d224@mail.gmail.com>
	<cb4457700906241828u3635fcb9w4dbcbe416ba8c1bc@mail.gmail.com>
Message-ID: <4A434A65.6060100@loskot.net>

Jorge Ar?valo wrote:
> I have a question: What's the best way to test a new driver's code? I've 
> loaded this TIFF file into PostGIS using gdal2wktraster.py: 
> http://rapidfire.sci.gsfc.nasa.gov/subsets/?subset=USA1.2009168.terra.2km, 
> and I think that I can simply do gdalinfo PG:.... to test if my driver 
> is working.

Possible, but...

> Another option is to create testing code, but gdalinfo is more reliable 
> that any code that I can write...

you'll most likely need to debug your driver, so having this in mine,
choose your favourite option.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From bryan at ideotrope.org  Thu Jun 25 07:50:11 2009
From: bryan at ideotrope.org (Bryan Keith)
Date: Thu Jun 25 07:50:12 2009
Subject: [gdal-dev] convert lines to polygons (2nd post)
Message-ID: <1132.168.103.217.117.1245930611.squirrel@ideotrope.org>

Hello,

I'm posting this a second time because I see that by replying to an older
gdal-dev message, my first message was put in that thread by some e-mail
clients that sort threaded messages.  Sorry for the repeat.

I'm using BuildPolygonFromEdges in ogr in an attempt to take some lines
and convert them to polygons.  For a number of my sets of lines
BuildPolygonFromEdges fails.  I think this is because the lines aren't
closed.  Is there a way to put a tolerance into BuildPolygonFromEdges so
that nodes within the tolerance are considered coincident?

Or is there another tool that will do what I want?  I used to use ArcInfo
CLEAN to do this, but I don't have access to that tool.  I'm open to any
suggestions, not just gdal/ogr tools.  Thank you.

Bryan


From cjanssen at iavo-rs.com  Thu Jun 25 10:07:18 2009
From: cjanssen at iavo-rs.com (Christiaan Janssen)
Date: Thu Jun 25 10:07:24 2009
Subject: [gdal-dev] ENVI headers not reading RPCs correctly
Message-ID: <34A7B7E5-BC33-4341-9E9C-17D0A51B6B18@iavo-rs.com>

I was wondering if I should file a bug report for this. I noticed that the ENVIDataset class reads the RPC information from an ENVI .hdr file and places the values in metadata objects prefixed with "RPC_" off of the default domain. It was my understanding they shouldn't have the prefix and should be placed in the "RPC" domain. I believe this is the reason I currently can't easily access the RPC information using the builtin GDALExtractRPCInfo function.

Christiaan Janssen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090625/6463df83/attachment-0001.html
From warmerdam at pobox.com  Thu Jun 25 11:23:56 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jun 25 11:24:07 2009
Subject: [gdal-dev] convert lines to polygons
In-Reply-To: <2250.64.15.96.66.1245883792.squirrel@ideotrope.org>
References: <49D3CF27.9080705@loskot.net>
	<d2595b180904011357k7543a15ew4d13f7b5699793f3@mail.gmail.com>
	<d2595b180904011409s5b64aa39tb03152ed7edba7c3@mail.gmail.com>
	<2250.64.15.96.66.1245883792.squirrel@ideotrope.org>
Message-ID: <4A43968C.40504@pobox.com>

Bryan Keith wrote:
> Hello,
> 
> I'm using BuildPolygonFromEdges in ogr in an attempt to take some lines
> and convert them to polygons.  For a number of my sets of lines
> BuildPolygonFromEdges fails.  I think this is because the lines aren't
> closed.  Is there a way to put a tolerance into BuildPolygonFromEdges so
> that nodes within the tolerance are considered coincident?
> 
> Or is there another tool that will do what I want?  I used to use ArcInfo
> CLEAN to do this, but I don't have access to that tool.  I'm open to any
> suggestions, not just gdal/ogr tools.  Thank you.

Bryan,

GRASS has support for building a polygon topology from various input.
I think v.clean is the key command though I am not too familiar with it.

BuildPolygonsFromEdges() is primarily intended for already clean input
data - primarily for polygon assemble from topological formats.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jorge.arevalo at gmail.com  Thu Jun 25 12:01:57 2009
From: jorge.arevalo at gmail.com (=?UTF-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Thu Jun 25 12:02:22 2009
Subject: [gdal-dev] Re: [postgis-devel] WKT Raster weekly report #4
In-Reply-To: <4A434A65.6060100@loskot.net>
References: <cb4457700906201353t520e3963h559de6d25c554439@mail.gmail.com> 
	<4A41F38B.8030400@loskot.net>
	<cb4457700906240755w280aed0fg9c4d604f77e4d224@mail.gmail.com> 
	<cb4457700906241828u3635fcb9w4dbcbe416ba8c1bc@mail.gmail.com> 
	<4A434A65.6060100@loskot.net>
Message-ID: <cb4457700906250901x2056aceft68e57504eba46dea@mail.gmail.com>

2009/6/25 Mateusz Loskot <mateusz@loskot.net>

> Jorge Ar?valo wrote:
>
>> I have a question: What's the best way to test a new driver's code? I've
>> loaded this TIFF file into PostGIS using gdal2wktraster.py:
>> http://rapidfire.sci.gsfc.nasa.gov/subsets/?subset=USA1.2009168.terra.2km,
>> and I think that I can simply do gdalinfo PG:.... to test if my driver is
>> working.
>>
>
> Possible, but...
>
>  Another option is to create testing code, but gdalinfo is more reliable
>> that any code that I can write...
>>
>
> you'll most likely need to debug your driver, so having this in mine,
> choose your favourite option.
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
>

OK, maybe I can create my own testing code. I supose that the best place to
put this testing code is in the driver's directory. It's only temporary
testing code.

Yogi Berra <http://www.brainyquote.com/quotes/authors/y/yogi_berra.html>  -
"I never said most of the things I said."
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090625/edaa85b5/attachment.html
From Shawn.Gong at drdc-rddc.gc.ca  Thu Jun 25 16:04:58 2009
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Thu Jun 25 16:05:07 2009
Subject: [gdal-dev] RADARSAT2 NITF RPC georeferencing
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E26E9AC@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

RSAT2's NITF product comes in "imagery_##.ntf" and "product.xml"
gdalinfo output for these two are listed below.

Georeferencing is off between the two files (their corners don't match
using OpenEV). 
Q1: Is it true that imagery_##.ntf uses affine transform (see
GeoTransform tag), and product.xml uses 143 GCPs?
Q2: I see that NITF RPC georeferencing has been implemented,
http://trac.osgeo.org/gdal/wiki/rfc22_rpc  How do I use the RPC in
RADARSAT2's NITF file? Will the RPC provide better georeferencing?



thanks,
Shawn


=========================================
imagery_##.ntf
Driver: NITF/National Imagery Transmission Format
Files: imagery_HH.ntf
Size is 8792, 10070
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AUTHORITY["EPSG","4326"]]
GeoTransform =
  50.03718817626492, 5.656037108659124e-005, 1.153154346122985e-005
  13.76523037807838, 1.126467725830654e-005, -5.535416735635244e-005
Metadata:
  NITF_FHDR=NITF02.10
  NITF_CLEVEL=06
  NITF_STYPE=BF01
  NITF_OSTAID=RSI
  NITF_FDT=20081019203042
  NITF_FTITLE=RS2_RECTIFIED:2008-10-19T14:51:25.306614Z
...
...
RPC Metadata:
  LINE_OFF=5034
  LINE_SCALE=5036
  SAMP_OFF=4388
  SAMP_SCALE=4538
  LONG_OFF=50.3435
  LONG_SCALE=0.3068
  LAT_OFF=13.5359
  LAT_SCALE=0.3283
  HEIGHT_OFF=0
  HEIGHT_SCALE=700
  LINE_NUM_COEFF=0.0006728793 0.2105967 -1.130644 -1.223845e-006
-0.0003698973 -1.002738e-007 -3.118422e-007 -0.0006155271 -0.000504439 0
-1.174964e-008 2.143919e-007 -4.856652e-006 7.659651e-008 -6.164503e-006
-8.210502000000001e-007 -4.267789e-007 -4.321238e-008 0 -2.272615e-008 
  LINE_DEN_COEFF=1 -0.0004301605 0.0002676128 -3.302012e-007
-3.970334e-006 0 1.027667e-008 -6.566892e-006 2.541771e-006
3.784513e-007 0 0 -1.749914e-006 0 3.37938e-007 3.157953e-006 0 0 0 0 
  SAMP_NUM_COEFF=0.0003633695 1.147341 0.2557103 -0.03114342
-0.0006508754 0.0008477953 0.0001658026 -5.388591e-005 -0.0002000257
2.006948e-005 -1.95455e-005 -2.907722e-006 -9.035467999999999e-006
-1.276494e-006 1.372415e-006 -1.699765e-006 -5.031646e-007
-6.214799e-005 -1.609981e-006 3.722058e-008 
  SAMP_DEN_COEFF=1 -0.0001622142 0.0007102185 -0.001001374
-8.652518e-007 4.728022e-005 1.732678e-005 -2.196369e-006 8.936224e-006
-1.514486e-006 -2.812931e-006 0 1.072109e-007 1.4604e-007 -1.900576e-008
-2.564915e-007 0 -6.090468e-006 -3.221172e-007 0 
  MIN_LONG=50.1901
  MAX_LONG=50.4969
  MIN_LAT=13.37175
  MAX_LAT=13.70005
Corner Coordinates:
Upper Left  (  50.0371882,  13.7652304) ( 50d 2'13.88"E, 13d45'54.83"N)
Lower Left  (  50.1533108,  13.2078139) ( 50d 9'11.92"E, 13d12'28.13"N)
Upper Right (  50.5344670,  13.8642694) ( 50d32'4.08"E, 13d51'51.37"N)
Lower Right (  50.6505896,  13.3068530) ( 50d39'2.12"E, 13d18'24.67"N)
Center      (  50.3438889,  13.5360417) ( 50d20'38.00"E, 13d32'9.75"N)
Band 1 Block=1024x1024 Type=UInt16, ColorInterp=Gray


=========================================
product.xml
Driver: RS2/RadarSat 2 XML Product
Files: product.xml
       lutBeta.xml
       lutSigma.xml
       lutGamma.xml
       imagery_HH.ntf
       imagery_HV.ntf
Size is 8792, 10070
Coordinate System is `'
GCP Projection = GEOGCS[,DATUM[,SPHEROID["WGS
1984",6378137,298.2572235629972]],PRIMEM["Greenwich",0],UNIT["degree",0.
0174532925199433]]
GCP[  0]: Id=1, Info=
          (0,0) -> (50.0368241447173,13.7652233850433,0)
GCP[  1]: Id=2, Info=
          (879.099976,0) -> (50.0866031135979,13.775165475226,0)
GCP[  2]: Id=3, Info=
          (1758.19995,0) -> (50.1363862930026,13.7850974953681,0)
GCP[  3]: Id=4, Info=
          (2637.30005,0) -> (50.1861736889333,13.7950194384848,0)
GCP[  4]: Id=5, Info=
          (3516.3999,0) -> (50.2359652797982,13.8049312921043,0)
GCP[  5]: Id=6, Info=
          (4395.5,0) -> (50.2857610923955,13.8148330533982,0)
...
...
GCP[139]: Id=140, Info=
          (6153.7002,10069) -> (50.5012171146149,13.2772541435474,0)
GCP[140]: Id=141, Info=
          (7032.7998,10069) -> (50.5509029539819,13.2871595011868,0)
GCP[141]: Id=142, Info=
          (7911.8999,10069) -> (50.6005928456264,13.297055157266,0)
GCP[142]: Id=143, Info=
          (8791,10069) -> (50.6502867615454,13.3069410980946,0)
Metadata:
  PRODUCT_TYPE=SGF
  PIXEL_SPACING=6.25000000e+00
  LINE_SPACING=6.25000000e+00
  BETA_NOUGHT_LUT=lutBeta.xml
  SIGMA_NOUGHT_LUT=lutSigma.xml
  GAMMA_LUT=lutGamma.xml
  SATELLITE_IDENTIFIER=RADARSAT-2
  SENSOR_IDENTIFIER=SAR
  BEAM_MODE=F1
  ACQUISITION_START_TIME=2008-10-19T14:51:24.966569Z
  NEAR_RANGE_INCIDENCE_ANGLE=3.68685226e+01
  FAR_RANGE_INCIDENCE_ANGLE=3.98800888e+01
  SLANT_RANGE_NEAR_EDGE=9.631139343954010e+05
Subdatasets:
  SUBDATASET_3_NAME=RADARSAT_2_CALIB:BETA0:product.xml
  SUBDATASET_3_DESC=Beta Nought calibrated
  SUBDATASET_2_NAME=RADARSAT_2_CALIB:SIGMA0:product.xml
  SUBDATASET_2_DESC=Sigma Nought calibrated
  SUBDATASET_4_NAME=RADARSAT_2_CALIB:GAMMA:product.xml
  SUBDATASET_4_DESC=Gamma calibrated
  SUBDATASET_1_NAME=RADARSAT_2_CALIB:UNCALIB:product.xml
  SUBDATASET_1_DESC=Uncalibrated digital numbers
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,10070.0)
Upper Right ( 8792.0,    0.0)
Lower Right ( 8792.0,10070.0)
Center      ( 4396.0, 5035.0)
Band 1 Block=1024x1024 Type=UInt16, ColorInterp=Undefined
  Metadata:
    POLARIMETRIC_INTERP=HH
Band 2 Block=1024x1024 Type=UInt16, ColorInterp=Undefined
  Metadata:
    POLARIMETRIC_INTERP=HV

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090625/61cdd2b9/attachment-0001.html
From grevedan at hotmail.com  Thu Jun 25 16:13:18 2009
From: grevedan at hotmail.com (Dan Greve)
Date: Thu Jun 25 16:13:20 2009
Subject: [gdal-dev] Problem using VSIMem to open VRT dataset
Message-ID: <COL107-W635757B9997FA23ADE02A6C7340@phx.gbl>


Frank,

I've noticed some issues when using /vsimem/ to open a VRT dataset (among other formats).  The code usually fails @ GDALClose or FlushCache, when the dataset tries to perform a VSIMemFile::SetLength, and ultimately a realloc. Many formats I can only VSIUnlink, and don't try to close the dataset. I was going to submit a bug report.

I'm trying to SetGeotransform like the tfw to 0,1,0,0,0,-1 in order to perform a pixel space gdalwarp interopolation (i've actually wrapped the gdal utilities into a single DLL to perform more integrated exception handling).  So it tries to open the same /vsimem/ VRT that was modified, but it still has the old geotransform.  Short term i'll probably add a parameter to the utilities to pass the GDALDataset (source and destination) back and from from GDALWarp, but it's a little more code i have to merge with each GDAL version upgrade.

-- Dan Greve
-- Palm Bay, FL

_________________________________________________________________
Hotmail? has ever-growing storage! Don?t worry about storage limits. 
http://windowslive.com/Tutorial/Hotmail/Storage?ocid=TXT_TAGLM_WL_HM_Tutorial_Storage_062009
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090625/949f3b0c/attachment.html
From condit at sdsc.edu  Thu Jun 25 16:09:04 2009
From: condit at sdsc.edu (Christopher Condit)
Date: Thu Jun 25 16:15:47 2009
Subject: [gdal-dev] convert kmz to shapefiles
In-Reply-To: <f902f9840906241831g60662a10v2e24f75454f32af2@mail.gmail.com>
References: <f902f9840906240300h629ded73v1b064ccffaaaebe@mail.gmail.com><BAY120-DS172C561ADFC2721FB3EB0F9370@phx.gbl>
	<f902f9840906241831g60662a10v2e24f75454f32af2@mail.gmail.com>
Message-ID: <845AADAC1106E44996327D62097E4C6B013753A9@et.ad.sdsc.edu>

Hi Maning-
> I tried to decompress the kmz nd converted the doc.kml.  ogr2ogr did
> not convert the kml (for good reasons) because it is a mixture of
> placemark, polygons and lines
This is a known limitation of the current driver. I would suggest rearranging your data into layers comprised of only one type of Geometry and trying that...

-Chris


From iacovlev.pavel at gmail.com  Fri Jun 26 03:46:00 2009
From: iacovlev.pavel at gmail.com (Pavel Iacovlev)
Date: Fri Jun 26 03:46:04 2009
Subject: [gdal-dev] running gdal_merge for a lot of files
Message-ID: <2a37f67a0906260046i908c20hed9eb59aadd84510@mail.gmail.com>

Good day all,

I am trying to merge a large data set, the input imagery is 1TB RGB
uncompressed tifs (lots of them). Then I run gdal_merge.py on a small
data set it runs ok and with -v option I can see whats happening. But
then I run on a large dataset I don't get no verbose output (I don't
get no output at all) and it stuck on 8.9 GB image size. I can just
track that the image is getting bigger but not verbose output
whatsoever and I can tell why it stops on 8.9 GB.

My command is: gdal_merge.py -v -init 255 -of GTiff -co TILED=YES -co
COMPRESS=JPEG -co PHOTOMETRIC=YCBCR -co BIGTIFF=YES -o of.tif of/*.tif

The input images are around 160mb each so loading them 1 by 1 into
memory is not a problem.

I want to join all this imagery into 1 big tif and create overviews to
serve it via mapserver.

GDAL version: GDAL 1.6.1, released 2009/05/11

-- 
http://iap.md, The future is open
From warmerdam at pobox.com  Fri Jun 26 09:33:33 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jun 26 09:33:57 2009
Subject: [gdal-dev] running gdal_merge for a lot of files
In-Reply-To: <2a37f67a0906260046i908c20hed9eb59aadd84510@mail.gmail.com>
References: <2a37f67a0906260046i908c20hed9eb59aadd84510@mail.gmail.com>
Message-ID: <4A44CE2D.8030904@pobox.com>

Pavel Iacovlev wrote:
> Good day all,
> 
> I am trying to merge a large data set, the input imagery is 1TB RGB
> uncompressed tifs (lots of them). Then I run gdal_merge.py on a small
> data set it runs ok and with -v option I can see whats happening. But
> then I run on a large dataset I don't get no verbose output (I don't
> get no output at all) and it stuck on 8.9 GB image size. I can just
> track that the image is getting bigger but not verbose output
> whatsoever and I can tell why it stops on 8.9 GB.
> 
> My command is: gdal_merge.py -v -init 255 -of GTiff -co TILED=YES -co
> COMPRESS=JPEG -co PHOTOMETRIC=YCBCR -co BIGTIFF=YES -o of.tif of/*.tif
> 
> The input images are around 160mb each so loading them 1 by 1 into
> memory is not a problem.

Pavel,

I don't know what is going wrong.  I would suggest adding lots of print
statements in the gdal_merge.py script to try and establish where it is
freezing up.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Jun 26 09:50:39 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jun 26 09:51:05 2009
Subject: [gdal-dev] Re: Motion: Commit Access for Robin Princeley
In-Reply-To: <4A40D5C4.1040203@pobox.com>
References: <4A40D5C4.1040203@pobox.com>
Message-ID: <4A44D22F.4090609@pobox.com>

Frank Warmerdam wrote:
> Motion: GDAL project commit access is granted to Robin Princeley.

Folks,

I declare this motion passed with support from FrankW, TamasS, DanielM and
HowardB.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Jun 26 15:22:36 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jun 26 15:22:55 2009
Subject: [gdal-dev] 8/12 bit jpeg in tiff dual mode
Message-ID: <4A451FFC.3050307@pobox.com>

Folks,

Over the last few weeks I have been working on support for reading and
writing TIFF files with 12bit jpeg compressed images.  This is a somewhat
popular format for scanned airphotos from some vendors.

I have made changes in libjpeg and libtiff upstream, and incorporated these
updates into GDAL trunk so that now a default build of GDAL trunk should
support reading and writing 8 and 12 bit jpeg compressed TIFF files.  A
description of the projects and changes is available at:

   http://trac.osgeo.org/gdal/wiki/TIFF12BitJPEG

I would appreciate testing and feedback on this capability.  I would also
like to thank Adam Nowaki who assisted with some issues in libtiff related
to this project.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From patsv at bredband.net  Sat Jun 27 02:42:13 2009
From: patsv at bredband.net (patsv)
Date: Sat Jun 27 03:10:02 2009
Subject: [gdal-dev] Maps with GCP in C#
Message-ID: <000301c9f6f2$67e577e0$37b067a0$@net>

Hi, all this is my first post to this list.

I am fiddling with some gps data that I want to plot onto a .BSB chart.

I think I have understood howto project the gps data to geo-coordinates with
the spatialreference and transformpoints.

 And then it seems possible to translate from screen to geo-coordinates with
GCPToGeoTransform.

But how to do the inverse geo-coordinate to screen with GCP.

It seems that the GDALCreateGCPTransformer and GDALGCPTransform can do both.

But I cannot find the support in C# or is it hidden in some class?

 

Regards

Patrik Svensson

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090627/299a4cfa/attachment.html
From szekerest at gmail.com  Sat Jun 27 17:23:37 2009
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat Jun 27 17:23:41 2009
Subject: [gdal-dev] Maps with GCP in C#
In-Reply-To: <000301c9f6f2$67e577e0$37b067a0$@net>
References: <000301c9f6f2$67e577e0$37b067a0$@net>
Message-ID: <f3b73b7d0906271423m7162affcx7c3bfe23286cb512@mail.gmail.com>

Patrik,

You could do something like:

GCP[] GCPs = dataset.GetGCPs();
double[] adfGeoTransform= new double[6];
Gdal.GCPsToGeoTransform(GCPs, adfGeoTransform, 0);

// apply the transformation
dfGeoX = adfGeoTransform[0] + adfGeoTransform[1] * X + adfGeoTransform[2] *
Y;
dfGeoY = adfGeoTransform[3] + adfGeoTransform[4] * X + adfGeoTransform[5] *
Y;

// calculate the inverse (handling det=0 would also be required)
double det = adfGeoTransform[1] * adfGeoTransform[5] - adfGeoTransform[2] *
adfGeoTransform[4];
X = ((dfGeoX - adfGeoTransform[0]) * adfGeoTransform[5] - (dfGeoY -
adfGeoTransform[3]) * adfGeoTransform[2]) / det;
X = ((dfGeoY - adfGeoTransform[3]) * adfGeoTransform[1] - (dfGeoX -
adfGeoTransform[0]) * adfGeoTransform[4]) / det;

BTW: I recall I already have an open ticket to add these functions (by
exposing GDALApplyGeoTransform and GDALInvGeoTransform would be sufficient)
in the SWIG interface
http://trac.osgeo.org/gdal/ticket/1531


Best regards,

Tamas



2009/6/27 patsv <patsv@bredband.net>

>  Hi, all this is my first post to this list.
>
> I am fiddling with some gps data that I want to plot onto a .BSB chart.
>
> I think I have understood howto project the gps data to geo-coordinates
> with the spatialreference and transformpoints.
>
>  And then it seems possible to translate from screen to geo-coordinates
> with   GCPToGeoTransform.
>
> But how to do the inverse geo-coordinate to screen with GCP.
>
> It seems that the GDALCreateGCPTransformer and GDALGCPTransform can do
> both.
>
> But I cannot find the support in C# or is it hidden in some class?
>
>
>
> Regards
>
> Patrik Svensson
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090627/5dac7351/attachment.html
From alobolistas at gmail.com  Sun Jun 28 05:00:15 2009
From: alobolistas at gmail.com (Agustin Lobo)
Date: Sun Jun 28 05:00:27 2009
Subject: [gdal-dev] Directions to get mrsid support in GQIS (and other
 packages using gdal) on Ubuntu
Message-ID: <4A47311F.3010709@gmail.com>

Thanks to Alan Boudreault and the rest
of the ubuntugis team, and, of course, to the gdal team, we can add mrsid support
for QGIS that has been installed from binaries for ubuntu (from 8.04  to 9.04).
This support extends to other software relying on gdal, like package rgdal
for R.

An equivalent package exists for ecw support, I'll send directions for it
in few days.

We have tested these directions on several machines, but we cannot guarantee 
that you will not find other problems. Nevertheless, I do think this
is an small risk.

1. Include the ubuntugis unstable repository according to
https://launchpad.net/~ubuntugis/+archive/ubuntugis-unstable

2. sudo apt-get install gdal-mrsid-src gdal-bin

3. Go to http://www.lizardtech.com/developer
login (or register if you have not done it yet)  and  only then you'll see
*Download SDKs*
<http://www.lizardtech.com/developer/members/license.php>
on the left panel. Select  *Download SDKs*
<http://www.lizardtech.com/developer/members/license.php>,
accept the agreement and select the appropriate
*GeoExpress SDK for Linux (x86)
(I think that you can use either the version **gcc 3.2 or*
*gcc 4.1 for ubuntu 8.04 - 9.04, but actually don't know for sure)*
(Micha and I have tested the version for  gcc 4.1)

In the following I assume that you copy the file to /usr/local (you'll need sudo cp)

4.  cd /usr/local
sudo gunzip Geo_DSDK-7.0.0.2167.linux.x86.gcc32.tar.gz
sudo tar -xf Geo_DSDK-7.0.0.2167.linux.x86.gcc32.tar

5. Now you use the gdal-mrsid-build that got made in step 2:
sudo /usr/bin/gdal-mrsid-build /usr/local/Geo_DSDK-7.0.0.2167
Copy  and paste the output to a txt file just in case.
Note that this process makes  /usr/lib/gdal16plugins/gdal_MrSID.so

6. Re-install grass   support if you had it for  previous versions of  gdal:
apt-get install libgdal1-1.6.0-grass

7. Check  the available formats:
gdalinfo --formats

If gdal-mrsid works, you'll see a long list of supported formats with MrSID 
listed near the
top. QGIS will be able to display sid images.



Note: in some machines we get
~$ gdalinfo --formats
ERROR 1: /usr/lib/gdal16plugins/gdal_MrSID.so: undefined symbol:
_ZNSs20_S_empty_rep_storageE
ERROR 1: /usr/lib/gdal16plugins/gdal_MrSID.so: undefined symbol:
_ZNSs20_S_empty_rep_storageE
Supported Formats:
   VRT (rw+): Virtual Raster
   GTiff (rw+): GeoTIFF
   NITF (rw+): National Imagery Transmission Format
etc

In this case, you'll also have an error for package rgdal in R:
  > require(rgdal)

Loading required package: rgdal
Error in fun(...) :
     GDAL Error 1: /usr/lib/gdal16plugins/gdal_MrSID.so: undefined
symbol: _ZNSs20_S_empty_rep_storageE

Error : .onLoad failed in 'loadNamespace' for 'rgdal'

but this error goes away just by deleting
/usr/lib/gdal16plugins/gdal_MrSID.so

Hope this helps!

Agus

-- 
Dr. Agustin Lobo
Institut de Ciencies de la Terra "Jaume Almera" (CSIC)
LLuis Sole Sabaris s/n
08028 Barcelona
Spain
Tel. 34 934095410
Fax. 34 934110012
email: Agustin.Lobo@ija.csic.es
http://www.ija.csic.es/gt/obster
-------------- next part --------------
A non-text attachment was scrubbed...
Name: alobolistas.vcf
Type: text/x-vcard
Size: 251 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090628/075a0e5a/alobolistas.vcf
From even.rouault at mines-paris.org  Sun Jun 28 10:12:18 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jun 28 10:12:30 2009
Subject: [gdal-dev] 8/12 bit jpeg in tiff dual mode
In-Reply-To: <4A451FFC.3050307@pobox.com>
References: <4A451FFC.3050307@pobox.com>
Message-ID: <200906281612.19669.even.rouault@mines-paris.org>

Frank,

Nice work !

I don't know if you were aware of it, but there was a discussion on libtiff 
list (http://www.asmail.be/msg0054814912.html) where Joris Van Damme 
mentionned a set of 12bit jpeg compressed tiff files he produced with his 
TIFF codec: http://www.awaresystems.be/imaging/tiff/12bpsjpegintiff.zip.

I've tried them, and as anticipated by Joris, some images with exotic 
parameters cannot be read (JPEG compression with planar storage, fillorder 
bit order reversal, ITULAB color space, 4x4 subsampling). But the others work 
fine.

I've adapted the JPEG and NITF drivers so they are able to read and create 
12bit JPEG files when JPEG12_ENABLED=YES (the capability to deal with 12bit 
JPEG already existed when compiled against the MK1 libjpeg). See r17304 to 
r17309 for the related changesets.

Best regards,

Even

Le Friday 26 June 2009 21:22:36 Frank Warmerdam, vous avez ?crit?:
> Folks,
>
> Over the last few weeks I have been working on support for reading and
> writing TIFF files with 12bit jpeg compressed images.  This is a somewhat
> popular format for scanned airphotos from some vendors.
>
> I have made changes in libjpeg and libtiff upstream, and incorporated these
> updates into GDAL trunk so that now a default build of GDAL trunk should
> support reading and writing 8 and 12 bit jpeg compressed TIFF files.  A
> description of the projects and changes is available at:
>
>    http://trac.osgeo.org/gdal/wiki/TIFF12BitJPEG
>
> I would appreciate testing and feedback on this capability.  I would also
> like to thank Adam Nowaki who assisted with some issues in libtiff related
> to this project.
>
> Best regards,


From even.rouault at mines-paris.org  Sun Jun 28 13:24:47 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jun 28 13:24:57 2009
Subject: [gdal-dev] Problem using VSIMem to open VRT dataset
In-Reply-To: <COL107-W635757B9997FA23ADE02A6C7340@phx.gbl>
References: <COL107-W635757B9997FA23ADE02A6C7340@phx.gbl>
Message-ID: <200906281924.48155.even.rouault@mines-paris.org>

Dan,

I'm not sure if I've completely understood what you meant but here's a small 
python script that tries to reproduce what I've understood from your 
scenario :

import gdal
content = """<VRTDataset rasterXSize="1" rasterYSize="1">
  <GeoTransform>100,1,0,100,0,-1</GeoTransform>
  <VRTRasterBand dataType="Byte" band="1">
  </VRTRasterBand>
</VRTDataset>"""

gdal.FileFromMemBuffer('/vsimem/test.vrt', content)

ds = gdal.Open('/vsimem/test.vrt')
ds.SetGeoTransform([2,1,0,49,0,-1])
ds = None # Closes the dataset and updates /vsimem/test.vrt

ds = gdal.Open('/vsimem/test.vrt')
print ds.GetGeoTransform()
# Displays (2.0, 1.0, 0.0, 49.0, 0.0, -1.0) as expected
ds = None

gdal.Unlink('/vsimem/test.vrt')

So that works fine for me.

Best regards,
Even

Le Thursday 25 June 2009 22:13:18 Dan Greve, vous avez ?crit?:
> Frank,
>
> I've noticed some issues when using /vsimem/ to open a VRT dataset (among
> other formats).  The code usually fails @ GDALClose or FlushCache, when the
> dataset tries to perform a VSIMemFile::SetLength, and ultimately a realloc.
> Many formats I can only VSIUnlink, and don't try to close the dataset. I
> was going to submit a bug report.
>
> I'm trying to SetGeotransform like the tfw to 0,1,0,0,0,-1 in order to
> perform a pixel space gdalwarp interopolation (i've actually wrapped the
> gdal utilities into a single DLL to perform more integrated exception
> handling).  So it tries to open the same /vsimem/ VRT that was modified,
> but it still has the old geotransform.  Short term i'll probably add a
> parameter to the utilities to pass the GDALDataset (source and destination)
> back and from from GDALWarp, but it's a little more code i have to merge
> with each GDAL version upgrade.
>
> -- Dan Greve
> -- Palm Bay, FL
>
> _________________________________________________________________
> Hotmail? has ever-growing storage! Don?t worry about storage limits.
> http://windowslive.com/Tutorial/Hotmail/Storage?ocid=TXT_TAGLM_WL_HM_Tutori
>al_Storage_062009


From even.rouault at mines-paris.org  Sun Jun 28 13:29:38 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jun 28 13:29:46 2009
Subject: [gdal-dev] RADARSAT2 NITF RPC georeferencing
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E26E9AC@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E26E9AC@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <200906281929.38483.even.rouault@mines-paris.org>

Le Thursday 25 June 2009 22:04:58 Gong, Shawn (Contractor), vous avez ?crit?:
> hi list,
>
> RSAT2's NITF product comes in "imagery_##.ntf" and "product.xml"
> gdalinfo output for these two are listed below.
>
> Georeferencing is off between the two files (their corners don't match
> using OpenEV).
> Q1: Is it true that imagery_##.ntf uses affine transform (see
> GeoTransform tag), and product.xml uses 143 GCPs?

For what I know, NITF files can contain only 4 GCPs and the NITF driver tries 
to compute a GeoTransform from those 4 ones.

> Q2: I see that NITF RPC georeferencing has been implemented,
> http://trac.osgeo.org/gdal/wiki/rfc22_rpc  How do I use the RPC in
> RADARSAT2's NITF file? Will the RPC provide better georeferencing?

You can use the RPC info by using the '-rpc' option of gdalwarp.

>
>
>
> thanks,
> Shawn
>
>
> =========================================
> imagery_##.ntf
> Driver: NITF/National Imagery Transmission Format
> Files: imagery_HH.ntf
> Size is 8792, 10070
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         TOWGS84[0,0,0,0,0,0,0],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9108"]],
>     AUTHORITY["EPSG","4326"]]
> GeoTransform =
>   50.03718817626492, 5.656037108659124e-005, 1.153154346122985e-005
>   13.76523037807838, 1.126467725830654e-005, -5.535416735635244e-005
> Metadata:
>   NITF_FHDR=NITF02.10
>   NITF_CLEVEL=06
>   NITF_STYPE=BF01
>   NITF_OSTAID=RSI
>   NITF_FDT=20081019203042
>   NITF_FTITLE=RS2_RECTIFIED:2008-10-19T14:51:25.306614Z
> ...
> ...
> RPC Metadata:
>   LINE_OFF=5034
>   LINE_SCALE=5036
>   SAMP_OFF=4388
>   SAMP_SCALE=4538
>   LONG_OFF=50.3435
>   LONG_SCALE=0.3068
>   LAT_OFF=13.5359
>   LAT_SCALE=0.3283
>   HEIGHT_OFF=0
>   HEIGHT_SCALE=700
>   LINE_NUM_COEFF=0.0006728793 0.2105967 -1.130644 -1.223845e-006
> -0.0003698973 -1.002738e-007 -3.118422e-007 -0.0006155271 -0.000504439 0
> -1.174964e-008 2.143919e-007 -4.856652e-006 7.659651e-008 -6.164503e-006
> -8.210502000000001e-007 -4.267789e-007 -4.321238e-008 0 -2.272615e-008
>   LINE_DEN_COEFF=1 -0.0004301605 0.0002676128 -3.302012e-007
> -3.970334e-006 0 1.027667e-008 -6.566892e-006 2.541771e-006
> 3.784513e-007 0 0 -1.749914e-006 0 3.37938e-007 3.157953e-006 0 0 0 0
>   SAMP_NUM_COEFF=0.0003633695 1.147341 0.2557103 -0.03114342
> -0.0006508754 0.0008477953 0.0001658026 -5.388591e-005 -0.0002000257
> 2.006948e-005 -1.95455e-005 -2.907722e-006 -9.035467999999999e-006
> -1.276494e-006 1.372415e-006 -1.699765e-006 -5.031646e-007
> -6.214799e-005 -1.609981e-006 3.722058e-008
>   SAMP_DEN_COEFF=1 -0.0001622142 0.0007102185 -0.001001374
> -8.652518e-007 4.728022e-005 1.732678e-005 -2.196369e-006 8.936224e-006
> -1.514486e-006 -2.812931e-006 0 1.072109e-007 1.4604e-007 -1.900576e-008
> -2.564915e-007 0 -6.090468e-006 -3.221172e-007 0
>   MIN_LONG=50.1901
>   MAX_LONG=50.4969
>   MIN_LAT=13.37175
>   MAX_LAT=13.70005
> Corner Coordinates:
> Upper Left  (  50.0371882,  13.7652304) ( 50d 2'13.88"E, 13d45'54.83"N)
> Lower Left  (  50.1533108,  13.2078139) ( 50d 9'11.92"E, 13d12'28.13"N)
> Upper Right (  50.5344670,  13.8642694) ( 50d32'4.08"E, 13d51'51.37"N)
> Lower Right (  50.6505896,  13.3068530) ( 50d39'2.12"E, 13d18'24.67"N)
> Center      (  50.3438889,  13.5360417) ( 50d20'38.00"E, 13d32'9.75"N)
> Band 1 Block=1024x1024 Type=UInt16, ColorInterp=Gray
>
>
> =========================================
> product.xml
> Driver: RS2/RadarSat 2 XML Product
> Files: product.xml
>        lutBeta.xml
>        lutSigma.xml
>        lutGamma.xml
>        imagery_HH.ntf
>        imagery_HV.ntf
> Size is 8792, 10070
> Coordinate System is `'
> GCP Projection = GEOGCS[,DATUM[,SPHEROID["WGS
> 1984",6378137,298.2572235629972]],PRIMEM["Greenwich",0],UNIT["degree",0.
> 0174532925199433]]
> GCP[  0]: Id=1, Info=
>           (0,0) -> (50.0368241447173,13.7652233850433,0)
> GCP[  1]: Id=2, Info=
>           (879.099976,0) -> (50.0866031135979,13.775165475226,0)
> GCP[  2]: Id=3, Info=
>           (1758.19995,0) -> (50.1363862930026,13.7850974953681,0)
> GCP[  3]: Id=4, Info=
>           (2637.30005,0) -> (50.1861736889333,13.7950194384848,0)
> GCP[  4]: Id=5, Info=
>           (3516.3999,0) -> (50.2359652797982,13.8049312921043,0)
> GCP[  5]: Id=6, Info=
>           (4395.5,0) -> (50.2857610923955,13.8148330533982,0)
> ...
> ...
> GCP[139]: Id=140, Info=
>           (6153.7002,10069) -> (50.5012171146149,13.2772541435474,0)
> GCP[140]: Id=141, Info=
>           (7032.7998,10069) -> (50.5509029539819,13.2871595011868,0)
> GCP[141]: Id=142, Info=
>           (7911.8999,10069) -> (50.6005928456264,13.297055157266,0)
> GCP[142]: Id=143, Info=
>           (8791,10069) -> (50.6502867615454,13.3069410980946,0)
> Metadata:
>   PRODUCT_TYPE=SGF
>   PIXEL_SPACING=6.25000000e+00
>   LINE_SPACING=6.25000000e+00
>   BETA_NOUGHT_LUT=lutBeta.xml
>   SIGMA_NOUGHT_LUT=lutSigma.xml
>   GAMMA_LUT=lutGamma.xml
>   SATELLITE_IDENTIFIER=RADARSAT-2
>   SENSOR_IDENTIFIER=SAR
>   BEAM_MODE=F1
>   ACQUISITION_START_TIME=2008-10-19T14:51:24.966569Z
>   NEAR_RANGE_INCIDENCE_ANGLE=3.68685226e+01
>   FAR_RANGE_INCIDENCE_ANGLE=3.98800888e+01
>   SLANT_RANGE_NEAR_EDGE=9.631139343954010e+05
> Subdatasets:
>   SUBDATASET_3_NAME=RADARSAT_2_CALIB:BETA0:product.xml
>   SUBDATASET_3_DESC=Beta Nought calibrated
>   SUBDATASET_2_NAME=RADARSAT_2_CALIB:SIGMA0:product.xml
>   SUBDATASET_2_DESC=Sigma Nought calibrated
>   SUBDATASET_4_NAME=RADARSAT_2_CALIB:GAMMA:product.xml
>   SUBDATASET_4_DESC=Gamma calibrated
>   SUBDATASET_1_NAME=RADARSAT_2_CALIB:UNCALIB:product.xml
>   SUBDATASET_1_DESC=Uncalibrated digital numbers
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,10070.0)
> Upper Right ( 8792.0,    0.0)
> Lower Right ( 8792.0,10070.0)
> Center      ( 4396.0, 5035.0)
> Band 1 Block=1024x1024 Type=UInt16, ColorInterp=Undefined
>   Metadata:
>     POLARIMETRIC_INTERP=HH
> Band 2 Block=1024x1024 Type=UInt16, ColorInterp=Undefined
>   Metadata:
>     POLARIMETRIC_INTERP=HV


From even.rouault at mines-paris.org  Sun Jun 28 13:49:27 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jun 28 13:49:38 2009
Subject: [gdal-dev] ENVI headers not reading RPCs correctly
In-Reply-To: <34A7B7E5-BC33-4341-9E9C-17D0A51B6B18@iavo-rs.com>
References: <34A7B7E5-BC33-4341-9E9C-17D0A51B6B18@iavo-rs.com>
Message-ID: <200906281949.28080.even.rouault@mines-paris.org>

Le Thursday 25 June 2009 16:07:18 Christiaan Janssen, vous avez ?crit?:
> I was wondering if I should file a bug report for this. I noticed that the
> ENVIDataset class reads the RPC information from an ENVI .hdr file and
> places the values in metadata objects prefixed with "RPC_" off of the
> default domain. It was my understanding they shouldn't have the prefix and
> should be placed in the "RPC" domain. I believe this is the reason I
> currently can't easily access the RPC information using the builtin
> GDALExtractRPCInfo function.
>

That makes sense. You should probably file a ticket in Trac and provides a 
test .hdr file

> Christiaan Janssen


From even.rouault at mines-paris.org  Sun Jun 28 13:56:49 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jun 28 13:57:00 2009
Subject: [gdal-dev] gdal_translate help
In-Reply-To: <178098.92368.qm@web39106.mail.mud.yahoo.com>
References: <178098.92368.qm@web39106.mail.mud.yahoo.com>
Message-ID: <200906281956.49954.even.rouault@mines-paris.org>

Matthew ,

Basically, you need to specify 2 creation options to allow georeferencing 
information and color table to be written. This 2 creation options allocate 
the necessary space in the header of the NITF file so they can be later 
overriden.

Try:
gdalwarp run.tiff -of nitf run1.nitf -co ICORDS=G -co IREP=RGB/LUT

For complete reference, look at http://gdal.org/frmt_nitf.html, especially 
the "Creation Issues" part.

Best regards,
Evn

Le Wednesday 24 June 2009 10:06:06 Matthew Golczak, vous avez ?crit?:
> Hi Frank,
> Thank you very much for your suggestion. I've followed your idea with 
> success . I've got nitif file with geo-spatial references but gdalwarp 
> during execution was not entirely happy   please see output dump. gdalwarp
> run.tiff -of nitf    run1.nitf
> Copying color table from run1linux.tiff to new file.
> Creating output file that is 12595P x 1851L.
> ERROR 6: NITF file should have been created with creation option
> 'ICOORDS=G'.
>
> ERROR 6: Apparently no space reserved for IGEOLO info in NITF file.
> NITFWriteIGEOGLO() fails.
> ERROR 1: Unable to write all 256 LUT entries, only able to write 0.
> Processing input file run1linux.tiff.
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> I'm not sure that those two errors are critical especially that I have got
> nitif image which is correctly displayed by openev and ESRI tools. In this
> circumstance could you comment those errors and advice me  what needs to be
> done to eliminate those errors? Thank you very much for your advice .
>
> regards
>
> Maciek
>
> --- On Tue, 6/23/09, Frank Warmerdam <warmerdam@pobox.com> wrote:
> > From: Frank Warmerdam <warmerdam@pobox.com>
> > Subject: Re: [gdal-dev] gdal_translate help
> > To: "Matthew Golczak" <mgolczak@yahoo.com>
> > Cc: gdal-dev@lists.osgeo.org
> > Date: Tuesday, June 23, 2009, 4:37 PM
> >
> > Matthew Golczak wrote:
> > > Hello, I?m new to gdal concept and I?ll appreciate
> >
> > if you could help me. I?m
> >
> > > trying to use gdal_translate to geo-referencing aerial
> >
> > images but with
> >
> > > limited success so far. The image is generated as gif
> >
> > file plus
> >
> > > information about geo-location of each corner. Due to
> >
> > the fact that the
> >
> > > corner geo-location is calculated based on GPS, the
> >
> > datum and projection is
> >
> > > specified as EPSG:4326. The following translation
> >
> > works very well for me gdal_translate -of GTiff -a_srs
> > EPSG:4326 -gcp 0 0 138.792939 -34.721669
> >
> > > -gcp 1784 0 138.791485 -34.753698 -gcp 0 12515
> >
> > 138.519595 -34.713290 -gcp
> >
> > > 1784 12515 138.518036 -34.745320? run.gif
> >
> > run.tiff but I need also this
> >
> > > image in nitif format? so I have tried? the
> >
> > following? translation gdal_translate -of nitf run1tiff
> > run.nitf.? Unfortunately in this case
> >
> > > nitif file has not any geospatial references.?
> >
> > The gdalinof in regards to
> >
> > > tiff contains geospatial information and none in
> >
> > respect to nitif.? It seems
> >
> > > to me that is something wrong but what? Any support in
> >
> > this matter highly
> >
> > > appreciated.
> >
> > Maciek,
> >
> > The GDAL NITF driver does not support writing GCPs in NITF
> > format.? In fact,
> > I'm not aware of a general mechanism for storing GCPs in
> > NITF format.? I
> > think you will need to georeference it using affine
> > georeferencing.? If
> > the image is not north up, you may need to rectify the
> > image first with
> > gdalwarp.? In fact gdalwarp can write directly to nitf
> > format so perhaps
> > you could do:
> >
> > eg.
> >
> > gdalwarp run.tiff -of NITF run.nitf
> >
> > Best regards,
> > --
> > ---------------------------------------+---------------------------------
> >----- I set the clouds in motion - turn up???|
> > Frank Warmerdam, warmerdam@pobox.com
> > light and sound - activate the windows | http://pobox.com/~warmerdam
> > and watch the world go round - Rush? ? |
> > Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jorge.arevalo at gmail.com  Sun Jun 28 22:05:39 2009
From: jorge.arevalo at gmail.com (=?UTF-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Sun Jun 28 22:06:01 2009
Subject: [gdal-dev] GDAL WKT Raster Driver weekly report #5
Message-ID: <cb4457700906281905r52254a2bw5ccaae8e901e5e7a@mail.gmail.com>

Hello,
This is the report #5 of GDAL WKT Raster driver:
http://www.gis4free.org/blog/2009/06/27/gsoc-09-weekly-report-5-1906-2606/

The project can be followed here:
http://trac.osgeo.org/gdal/wiki/WKTRasterDriver

Best regards
Jorge
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090629/dcc049dc/attachment.html
From alberto.pettazzi at meteogalicia.es  Mon Jun 29 07:18:11 2009
From: alberto.pettazzi at meteogalicia.es (Alberto Pettazzi)
Date: Mon Jun 29 07:18:17 2009
Subject: [gdal-dev] can't open grib2 files
Message-ID: <4A48A2F3.6080804@meteogalicia.es>

Dear All,

I am not able to open grib2 files with GDAL. For example, in the 
attached file

http://rapidshare.com/files/249911240/MPE_20090629_0900_M9_00.rar.html

 I succeed in obtaining information about the file with GDALINFO 
command, but I cannot convert it into a GTiff (using gdal_translate 
command). I obtain the following message:

Input file size is 3712, 3712
0Segmentation fault

I know this file is not corrupted because I can open it with another 
software. What am I doing wrong?

Thank you

-- 

Alberto Pettazzi


MeteoGalicia - Departamento de Climatolog?a y Observaci?n

Conseller?a de Medio Ambiente, Territorio e Infraestruturas

R?a de Roma, 6

15707 Santiago de Compostela. A Coru?a


Tel?fono: +34-881-999646


e-mail: alberto.pettazzi@meteogalicia.es 
<mailto:alberto.pettazzi@meteogalicia.es>


From narmadhapk at gmail.com  Mon Jun 29 07:48:40 2009
From: narmadhapk at gmail.com (NarmadhaK)
Date: Mon Jun 29 07:56:36 2009
Subject: [gdal-dev] including GCP file for gdal_translate
Message-ID: <5ca30fb60906290448i6468a815sb7dce6d4480bd0e2@mail.gmail.com>

Hi,
I am trying to layer stack 7 bands from Raw landsat image.

I have been provided with 7 tif files one for each band (with no proj)

A separate GCP file (.txt) with nearly 90 GCPs has been provided too.

I want to input all the GCPs into gdal_translate.

I am using FWTools to work with gdal.

Is there any option to do so?



Narmadha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090629/3c75bd4a/attachment-0001.html
From bascetta at meeo.it  Mon Jun 29 08:10:12 2009
From: bascetta at meeo.it (Bascetta Marco)
Date: Mon Jun 29 08:17:02 2009
Subject: [gdal-dev] Reading ALOS - AVNIR-2 Level 0
In-Reply-To: <2a37f67a0906260046i908c20hed9eb59aadd84510@mail.gmail.com>
References: <2a37f67a0906260046i908c20hed9eb59aadd84510@mail.gmail.com>
Message-ID: <4A48AF24.10706@meeo.it>

Hi all,
anyone knows how can I read an ALOS AVNIR-2 level 0 data with GDAL?

Thanks for any advice.

Regards

Marco
From chaitanya.ch at gmail.com  Mon Jun 29 08:47:00 2009
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Jun 29 08:47:02 2009
Subject: [gdal-dev] including GCP file for gdal_translate
In-Reply-To: <5ca30fb60906290448i6468a815sb7dce6d4480bd0e2@mail.gmail.com>
References: <5ca30fb60906290448i6468a815sb7dce6d4480bd0e2@mail.gmail.com>
Message-ID: <eb502d880906290547p1f2baad3p5386fb70442c7698@mail.gmail.com>

Narmadha,

gdal_translate cannot 'stack' multiple images into one. One way is to use
gdal_merge.py with the -seperate option to create a single tif file and then
use gdal_translate to intorduce the projection with the GCPs.
To make it easy to mention the GCPs to gdal_translate you could use
--optfile (refer http://www.gdal.org/gdal_utilities.html) to edit the GCP
file into the required format ( [-gcp pixel line easting northing
[elevation]]* ).

On Mon, Jun 29, 2009 at 5:18 PM, NarmadhaK <narmadhapk@gmail.com> wrote:

> Hi,
> I am trying to layer stack 7 bands from Raw landsat image.
>
> I have been provided with 7 tif files one for each band (with no proj)
>
> A separate GCP file (.txt) with nearly 90 GCPs has been provided too.
>
> I want to input all the GCPs into gdal_translate.
>
> I am using FWTools to work with gdal.
>
> Is there any option to do so?
>
>
>
> Narmadha
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


Best regards,
-- 
Chaitanya kumar CH.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090629/bd97a0dc/attachment.html
From rigal at rapideye.de  Mon Jun 29 08:59:35 2009
From: rigal at rapideye.de (Matthieu Rigal)
Date: Mon Jun 29 08:59:48 2009
Subject: [gdal-dev] Re:[FWTools] GDALRasterizeGeometries() and Python
Message-ID: <200906291459.35395.rigal@rapideye.de>

Hi Frank and GDAL-dev team,

By reading the following message and unsuccessfully searching for 
documentation and possibilities to rasterize geometries, I would be pleased 
to know if the Python bindings for GDALRasterizeGeometries() are still 
somehow planned.

If no bindings are planned is there another work-around than invoking the 
utilities from the shell to mask raster data from vector data, within gdal or 
within numpy (after ReadAsArray) ?

Best regards,
Matthieu

-------------------

Travis,

I have checked, and can confirm that the rasterize geometries function
is not currently exposed in Python at all.  I've been adding bindings for
some other algorithms this week, and I'll look at adding one for this too,
though I think it may be a bit tricky.

Best regards,


On Wed, Sep 17, 2008 at 11:39 AM, Travis Kirstine
<traviskirstine at gmail.com> wrote:
> I'm was hoping to use GDALRasterizeGeometries()  from the gdal_agl.h
> file with python to burn polygons from PostGIS into a geotiff.  I
> don't believe that there are python binding available, am I correct?
>
> --
> Travis K.
>
> Toronto, Canada
> _______________________________________________
> FWTools mailing list
> FWTools at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/fwtools
> http://fwtools.maptools.org/

RapidEye AG
Molkenmarkt 30
14776 Brandenburg an der Havel
Germany

Follow us on Twitter! www.twitter.com/rapideye_ag
 
Head Office/Sitz der Gesellschaft: Brandenburg an der Havel
Management Board/Vorstand: Wolfgang G. Biedermann
Chairman of Supervisory Board/Vorsitzender des Aufsichtsrates: Axel Schmalz
Commercial Register/Handelsregister Potsdam HRB 17 796
Tax Number/Steuernummer: 048/100/00053
VAT-Ident-Number/Ust.-ID: DE 199331235
DIN EN ISO 9001 certified
 
*************************************************************************
Diese E-Mail enthaelt vertrauliche und/oder rechtlich geschuetzte
Informationen. Wenn Sie nicht der richtige Adressat sind oder diese
E-Mail irrtuemlich erhalten haben, informieren Sie bitte sofort den
Absender und vernichten Sie diese E-Mail. Das unerlaubte Kopieren sowie
die unbefugte Weitergabe dieser E-Mail ist nicht gestattet.
 
The information in this e-mail is intended for the named recipients
only. It may contain privileged and confidential information. If you
have received this communication in error, any use, copying or
dissemination of its contents is strictly prohibited. Please erase all
copies of the message along with any included attachments and notify
RapidEye AG or the sender immediately by telephone at the number
indicated on this page.
From robinprinceley at gmail.com  Mon Jun 29 09:00:29 2009
From: robinprinceley at gmail.com (Robin Princeley)
Date: Mon Jun 29 09:08:49 2009
Subject: [gdal-dev] can't open grib2 files
In-Reply-To: <4A48A2F3.6080804@meteogalicia.es>
References: <4A48A2F3.6080804@meteogalicia.es>
Message-ID: <7107a7340906290600u3e84033bu24aa0789f5d74657@mail.gmail.com>

There is a ticket for GRIB ( http://trac.osgeo.org/gdal/ticket/3010 )
- crash in IReadBlock. I was unable to download linked image from
rapidshare to confirm, but these may be related.

robinprinceley


On Mon, Jun 29, 2009 at 3:18 PM, Alberto Pettazzi
<alberto.pettazzi@meteogalicia.es> wrote:
>
> Dear All,
>
> I am not able to open grib2 files with GDAL. For example, in the attached file
>
> http://rapidshare.com/files/249911240/MPE_20090629_0900_M9_00.rar.html
>
> I succeed in obtaining information about the file with GDALINFO command, but I cannot convert it into a GTiff (using gdal_translate command). I obtain the following message:
>
> Input file size is 3712, 3712
> 0Segmentation fault
>
> I know this file is not corrupted because I can open it with another software. What am I doing wrong?
>
> Thank you
>
> --
>
> Alberto Pettazzi
>
>
> MeteoGalicia - Departamento de Climatolog?a y Observaci?n
>
> Conseller?a de Medio Ambiente, Territorio e Infraestruturas
>
> R?a de Roma, 6
>
> 15707 Santiago de Compostela. A Coru?a
>
>
> Tel?fono: +34-881-999646
>
>
> e-mail: alberto.pettazzi@meteogalicia.es <mailto:alberto.pettazzi@meteogalicia.es>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Mon Jun 29 09:12:47 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jun 29 09:13:05 2009
Subject: [gdal-dev] Re:[FWTools] GDALRasterizeGeometries() and Python
In-Reply-To: <200906291459.35395.rigal@rapideye.de>
References: <200906291459.35395.rigal@rapideye.de>
Message-ID: <4A48BDCF.5050504@pobox.com>

Matthieu Rigal wrote:
> Hi Frank and GDAL-dev team,
> 
> By reading the following message and unsuccessfully searching for 
> documentation and possibilities to rasterize geometries, I would be pleased 
> to know if the Python bindings for GDALRasterizeGeometries() are still 
> somehow planned.
> 
> If no bindings are planned is there another work-around than invoking the 
> utilities from the shell to mask raster data from vector data, within gdal or 
> within numpy (after ReadAsArray) ?

Matthieu,

It appears that the only rasterization entry point provided through
the swig bindings is RasterLayer which rasterizes from an OGR feature layer.
This is available in 1.6.  You can see an example of it's use in:

   http://svn.osgeo.org/gdal/branches/1.6/autotest/alg/rasterize.py

I do not have any plans to add a lower level GDALRasterizeGeometries at this
time.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From alberto.pettazzi at meteogalicia.es  Mon Jun 29 09:28:19 2009
From: alberto.pettazzi at meteogalicia.es (Alberto Pettazzi)
Date: Mon Jun 29 09:28:23 2009
Subject: [gdal-dev] can't open grib2 files
In-Reply-To: <6a17e9ee0906290608v6b5d7f2ewda769988ff1f0e12@mail.gmail.com>
References: <4A48A2F3.6080804@meteogalicia.es>
	<6a17e9ee0906290608v6b5d7f2ewda769988ff1f0e12@mail.gmail.com>
Message-ID: <4A48C173.9060802@meteogalicia.es>

Hi Scott,

thank you for your reply! I just have executed the command you suggested me,

gdal-config --formats


and that's what I got:

gxf gtiff hfa aigrid aaigrid ceos ceos2 iso8211 xpm sdts raw dted mem 
jdem envisat elas fit vrt usgsdem l1b nitf bmp pcidsk airsar rs2 ilwis 
rmf leveller sgi srtmhgt idrisi gsg ingr ers jaxapalsar dimap gff cosar 
pds adrg coasp tsx terragen blx msgn wcs wms grib bsb jpeg2000 hdf5 hdf4 
gif jpeg png netcdf pcraster rik

So, I guess that I have already built the jpeg2000 support. Any Suggestion?

Alberto Pettazzi


MeteoGalicia - Departamento de Climatolog?a y Observaci?n

Conseller?a de Medio Ambiente, Territorio e Infraestruturas

R?a de Roma, 6

15707 Santiago de Compostela. A Coru?a


Tel?fono: +34-881-999646


e-mail: alberto.pettazzi@meteogalicia.es 
<mailto:alberto.pettazzi@meteogalicia.es>




Scott Sinclair escribi?:
>> 2009/6/29 Alberto Pettazzi <alberto.pettazzi@meteogalicia.es>:
>> I am not able to open grib2 files with GDAL. For example, in the attached
>> file
>>
>> http://rapidshare.com/files/249911240/MPE_20090629_0900_M9_00.rar.html
>>
>> I succeed in obtaining information about the file with GDALINFO command, but
>> I cannot convert it into a GTiff (using gdal_translate command). I obtain
>> the following message:
>>
>> Input file size is 3712, 3712
>> 0Segmentation fault
>>
>> I know this file is not corrupted because I can open it with another
>> software. What am I doing wrong?
>>     
>
> Hi Alberto,
>
> GRIB2 files can be compressed using different encoding schemes, the
> GDAL page here (http://www.gdal.org/frmt_grib.html) says
>
> "There are several encoding schemes for raster data in GRIB format.
> Most common ones should be supported including PNG encoding. JPEG2000
> encoded GRIB files will generally be supported if GDAL is also built
> with JPEG2000 support via one of the GDAL JPEG2000 drivers. The JasPer
> library generally provides the best jpeg2000 support for the GRIB
> driver."
>
> It doesn't look like JPEG2000 support is built by default
> (http://www.gdal.org/formats_list.html), so you might need to build
> your own GDAL, if you want to read these files using GDAL. You could
> start by checking whether your GDAL has been built with JPEG2000
> support ('gdal-config --formats' on the command line).
>
> An alternative to access the data is wgrib2
> (http://www.cpc.ncep.noaa.gov/products/wesley/wgrib2/), which I've
> used in the past to read the Meteosat precipitation product you're
> dealing with.
>
> Cheers,
> Scott
>
>   
From jorsion at gmail.com  Mon Jun 29 12:13:53 2009
From: jorsion at gmail.com (jor sion)
Date: Mon Jun 29 12:14:15 2009
Subject: [gdal-dev] How to read HDF Attribute domains in c#
Message-ID: <8c2bdf730906290913v738637f6u9d718efe56d88317@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/png
Size: 8055 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090630/6ac88c32/attachment.png
From chandra.kumar at flagstonere.bm  Mon Jun 29 13:54:45 2009
From: chandra.kumar at flagstonere.bm (Chandra Shekhar Kumar)
Date: Mon Jun 29 13:55:05 2009
Subject: [gdal-dev] OGR API for ESRI Shapefile writer
Message-ID: <1B507B19FF9C474C936493A7909007D081EE07@hfxpdexc01.flagstonere.local>

Hi All,

 

I was trying to create a shapefile using the code below:

It looks like though the fieldnames are getting created but the values
(I tried just one row) are not getting created:

 

OGRRegisterAll();

    OGRSFDriver *poDriver =
OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName("ESRI Shapefile");

 

    OGRDataSource *poDS = poDriver->CreateDataSource("point_out.shp",
0);

 

    OGRLayer *poLayer = poDS->CreateLayer("point_out", 0, wkbPoint, 0);

 

    OGRFieldDefn oField1("Longitude", OFTReal);

    OGRFieldDefn oField2("Latitude", OFTReal);

    OGRFieldDefn oField3("Speed", OFTReal);

 

    if(poLayer->CreateField(&oField1) != OGRERR_NONE)

    {

        std::cout << "creation of Longitude failed" << std::endl;

        exit(1);

    }

    if(poLayer->CreateField(&oField2) != OGRERR_NONE)

    {

        std::cout << "creation of Latitude failed" << std::endl;

        exit(1);

    }

    if(poLayer->CreateField(&oField3) != OGRERR_NONE)

    {

        std::cout << "creation of Speed failed" << std::endl;

        exit(1);

    }

 

        OGRFeature *poFeature = OGRFeature::CreateFeature(
poLayer->GetLayerDefn() );

        poFeature->SetField("Longitude", 1.1);

        poFeature->SetField("Latitude", 2.2);

        poFeature->SetField("Speed", 3.3);

 

        if( poLayer->CreateFeature( poFeature ) != OGRERR_NONE )

        {

           std::cout <<  "Failed to create feature in shapefile" <<
std::endl;

           exit( 1 );

        }

 

       OGRFeature::DestroyFeature( poFeature );

 

 

Am I missing something basic here ?

 

Thanks,

Chandra


**********************************************************************
This communication contains information which is confidential and may also be legally privileged. It is for the exclusive use of the intended recipient(s). If you are not the intended recipient(s), disclosure, copying, distribution, or other use of, or action taken or omitted to be taken in reliance upon, this communication or the information in it is prohibited and maybe unlawful. If you have received this communication in error please notify the sender by return email, delete it from your system and destroy any copies.
**********************************************************************

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090629/aedce8b5/attachment.html
From even.rouault at mines-paris.org  Mon Jun 29 14:23:23 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jun 29 14:23:34 2009
Subject: [gdal-dev] OGR API for ESRI Shapefile writer
In-Reply-To: <1B507B19FF9C474C936493A7909007D081EE07@hfxpdexc01.flagstonere.local>
References: <1B507B19FF9C474C936493A7909007D081EE07@hfxpdexc01.flagstonere.local>
Message-ID: <200906292023.23947.even.rouault@mines-paris.org>

Almost perfect, but you've made a classical error : you've just forgotten to 
properly close the dataset with OGRDataSource::DestroyDataSource( poDS );

Quoting http://gdal.org/ogr/ogr_apitut.html: "Finally we need to close down 
the datasource in order to ensure headers are written out in an orderly way 
and all resources are recovered."

I'll mention it in the doc of OGRSFDriver::CreateDataSource() for the sake of 
completeness.

Le Monday 29 June 2009 19:54:45 Chandra Shekhar Kumar, vous avez ?crit?:
> OGRRegisterAll();
>
> ? ? OGRSFDriver *poDriver =
> OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName("ESRI Shapefile");
>
> ?
>
> ? ? OGRDataSource *poDS = poDriver->CreateDataSource("point_out.shp",
> 0);
>
> ?
>
> ? ? OGRLayer *poLayer = poDS->CreateLayer("point_out", 0, wkbPoint, 0);
>
> ?
>
> ? ? OGRFieldDefn oField1("Longitude", OFTReal);
>
> ? ? OGRFieldDefn oField2("Latitude", OFTReal);
>
> ? ? OGRFieldDefn oField3("Speed", OFTReal);
>
> ?
>
> ? ? if(poLayer->CreateField(&oField1) != OGRERR_NONE)
>
> ? ? {
>
> ? ? ? ? std::cout << "creation of Longitude failed" << std::endl;
>
> ? ? ? ? exit(1);
>
> ? ? }
>
> ? ? if(poLayer->CreateField(&oField2) != OGRERR_NONE)
>
> ? ? {
>
> ? ? ? ? std::cout << "creation of Latitude failed" << std::endl;
>
> ? ? ? ? exit(1);
>
> ? ? }
>
> ? ? if(poLayer->CreateField(&oField3) != OGRERR_NONE)
>
> ? ? {
>
> ? ? ? ? std::cout << "creation of Speed failed" << std::endl;
>
> ? ? ? ? exit(1);
>
> ? ? }
>
> ?
>
> ? ? ? ? OGRFeature *poFeature = OGRFeature::CreateFeature(
> poLayer->GetLayerDefn() );
>
> ? ? ? ? poFeature->SetField("Longitude", 1.1);
>
> ? ? ? ? poFeature->SetField("Latitude", 2.2);
>
> ? ? ? ? poFeature->SetField("Speed", 3.3);
>
> ?
>
> ? ? ? ? if( poLayer->CreateFeature( poFeature ) != OGRERR_NONE )
>
> ? ? ? ? {
>
> ? ? ? ? ? ?std::cout << ?"Failed to create feature in shapefile" <<
> std::endl;
>
> ? ? ? ? ? ?exit( 1 );
>
> ? ? ? ? }
>
> ?
>
> ? ? ? ?OGRFeature::DestroyFeature( poFeature );
>
> ?


From chandra.kumar at flagstonere.bm  Mon Jun 29 14:59:40 2009
From: chandra.kumar at flagstonere.bm (Chandra Shekhar Kumar)
Date: Mon Jun 29 14:59:44 2009
Subject: [gdal-dev] OGR API for ESRI Shapefile writer
In-Reply-To: <200906292023.23947.even.rouault@mines-paris.org>
References: <1B507B19FF9C474C936493A7909007D081EE07@hfxpdexc01.flagstonere.local>
	<200906292023.23947.even.rouault@mines-paris.org>
Message-ID: <1B507B19FF9C474C936493A7909007D081EE09@hfxpdexc01.flagstonere.local>

>-----Original Message-----
>From: Even Rouault [mailto:even.rouault@mines-paris.org]

>Almost perfect, but you've made a classical error : you've just forgotten to
>properly close the dataset with OGRDataSource::DestroyDataSource( poDS );
>
>Quoting http://gdal.org/ogr/ogr_apitut.html: "Finally we need to close down
>the datasource in order to ensure headers are written out in an orderly way
>and all resources are recovered."
[Chandra ] It worked like a magic!
It was my fault that I didn't read the tutorial completely :( though it was hardly 2-3 pages and complete in all sense.

Thanks a lot Even!

Regards,
Chandra


**********************************************************************
This communication contains information which is confidential and may also be legally privileged. It is for the exclusive use of the intended recipient(s). If you are not the intended recipient(s), disclosure, copying, distribution, or other use of, or action taken or omitted to be taken in reliance upon, this communication or the information in it is prohibited and maybe unlawful. If you have received this communication in error please notify the sender by return email, delete it from your system and destroy any copies.
**********************************************************************

From wollez at gmx.net  Mon Jun 29 15:32:40 2009
From: wollez at gmx.net (WolfgangZ)
Date: Mon Jun 29 15:32:59 2009
Subject: [gdal-dev] Re: running gdal_merge for a lot of files
In-Reply-To: <4A44CE2D.8030904@pobox.com>
References: <2a37f67a0906260046i908c20hed9eb59aadd84510@mail.gmail.com>
	<4A44CE2D.8030904@pobox.com>
Message-ID: <h2b4sp$7ht$1@ger.gmane.org>

Frank Warmerdam schrieb:
> Pavel Iacovlev wrote:
>> Good day all,
>>
>> I am trying to merge a large data set, the input imagery is 1TB RGB
>> uncompressed tifs (lots of them). Then I run gdal_merge.py on a small
>> data set it runs ok and with -v option I can see whats happening. But
>> then I run on a large dataset I don't get no verbose output (I don't
>> get no output at all) and it stuck on 8.9 GB image size. I can just
>> track that the image is getting bigger but not verbose output
>> whatsoever and I can tell why it stops on 8.9 GB.
>>
>> My command is: gdal_merge.py -v -init 255 -of GTiff -co TILED=YES -co
>> COMPRESS=JPEG -co PHOTOMETRIC=YCBCR -co BIGTIFF=YES -o of.tif of/*.tif
>>
>> The input images are around 160mb each so loading them 1 by 1 into
>> memory is not a problem.
> 
> Pavel,
> 
> I don't know what is going wrong.  I would suggest adding lots of print
> statements in the gdal_merge.py script to try and establish where it is
> freezing up.
> 
> Best regards,

wasn't there once a problem with the number of files that are joined? Or 
was this only when adding the files manually at the command line (not 
using the * operator).

Wolf

From warmerdam at pobox.com  Mon Jun 29 19:44:27 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jun 29 19:44:39 2009
Subject: [gdal-dev] GDAL WKT Raster Driver weekly report #5
In-Reply-To: <cb4457700906281905r52254a2bw5ccaae8e901e5e7a@mail.gmail.com>
References: <cb4457700906281905r52254a2bw5ccaae8e901e5e7a@mail.gmail.com>
Message-ID: <4A4951DB.6070309@pobox.com>

Jorge Ar?valo wrote:
> Hello,
> 
> This is the report #5 of GDAL WKT Raster 
> driver: http://www.gis4free.org/blog/2009/06/27/gsoc-09-weekly-report-5-1906-2606/
> 
> The project can be followed 
> here: http://trac.osgeo.org/gdal/wiki/WKTRasterDriver

Jorge,

I appologise for not staying on top of my mentoring duties.  I am reviewing
the design document at:

http://www.gis4free.org/blog/wp-content/uploads/2009/06/gdal-wktrasterdriver-spec-0.2.pdf

Is this still the most current version of your design?  I see Even, Mateusz,
Pierre and others have provided some feedback.  Their comments seem good.

I would also support the suggestion to put the design in a more malliable
form, such that others can contribute more directly - such as a trac wiki
page. I also think the design needs some further updates from the 0.2
version.  I notice you have your own trac now, though it does not seem to
have any public access which I think is unfortunate. Don't hesitate to keep
the design in the GDAL trac.

I would like design to better address the relationship between WKTRaster's
data model and the GDAL data model.  So, for instance, you might note things
like:

1) The fPixelSizeX, fPixelSizeY, fUpperLeftX, fUpperLeftY, fRotationX,
fRotationY values will become the GeoTransform in GDAL, possibly noting
how the transformation will take place.   Actually, the f* fields I note
are actually on a single WKTRaster objects after fetching and instead
you really need to populate the Geotransform based on the extent, pixelsize_x
and pixelsize_y fields from the RASTER_COLUMNS table and that
for now only north up images will be supported (unrotated).

2) Note that WKTRaster uses an SRID lookup into the spatial_ref_sys which
may contain WKT and PROJ.4 representations of a coordinate system, but
that GDAL needs WKT.  Note perhaps that the spatial_ref_sys lookup code
from the OGR PG driver can be used essentially unchanged, and that things
only get messy when there is a need to create new rasters as it is sometimes
hard to establish what SRID to use for a given WKT (or whether to create a
new one), but that this matter can also be done using the same approach as
the OGR PG driver.

--

In general I was surprised to find no mention of the RASTER_COLUMNS table
and the implications for the WKTRaster driver.  To a significant extent
this table was defined to make it easier to write the WKTRaster driver.
It encapsulates a concept of simplistic rasters that can be easily mapped
onto the GDAL data model and that can be efficiently manipulated by GDAL.

I would like the design talk about steps in implementation.  The first
complete step should be a read-only driver that supports
"regular_blocking" type images defined via RASTER_COLUMNS.   I would
hope this would be accomplished by the mid-term review.

After that some additions you could work on are:

  1) Supporting rasters that are not "regular_blocking".  I think it will
     be hard to make this really efficient, but it is definately doable.

  2) Support in place update for existing rasters.

  3) Support creating new rasters.

  4) Support access to overviews.

  5) Support "outdb" rasters.

I would like a sense of which of these you hope to do this summer,
in what order, and what you see as the issues with them.

I would personally be quite happy if you did a bulletproof and efficient
implementation of read-only access to WKTRasters with overviews and
all applicable metadata and access to "outdb" rasters.

Make sure the project plan includes time to extend the python test suite
with tests for the WKTRaster driver, and to write up user driver
documentation.


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From christian.mueller at nvoe.at  Mon Jun 29 22:36:25 2009
From: christian.mueller at nvoe.at (Christian =?iso-8859-1?Q?M=FCller?=)
Date: Mon Jun 29 22:41:46 2009
Subject: [gdal-dev] Re: running gdal_merge for a lot of files
In-Reply-To: <h2b4sp$7ht$1@ger.gmane.org>
References: <2a37f67a0906260046i908c20hed9eb59aadd84510@mail.gmail.com>
	<4A44CE2D.8030904@pobox.com> <h2b4sp$7ht$1@ger.gmane.org>
Message-ID: <20090630023625.11051.qmail@mail.linux4all.at>

I had the problem when running the gdal_mergey.py with many tiles using the 
* parameter. 

But using the --optfile options resolves this for me. 

I had also problems constructing big images from many tiles, I did a 
partitioning on the the tile set and merged in an iterative manner. 

WolfgangZ writes: 

> Frank Warmerdam schrieb:
>> Pavel Iacovlev wrote:
>>> Good day all, 
>>> 
>>> I am trying to merge a large data set, the input imagery is 1TB RGB
>>> uncompressed tifs (lots of them). Then I run gdal_merge.py on a small
>>> data set it runs ok and with -v option I can see whats happening. But
>>> then I run on a large dataset I don't get no verbose output (I don't
>>> get no output at all) and it stuck on 8.9 GB image size. I can just
>>> track that the image is getting bigger but not verbose output
>>> whatsoever and I can tell why it stops on 8.9 GB. 
>>> 
>>> My command is: gdal_merge.py -v -init 255 -of GTiff -co TILED=YES -co
>>> COMPRESS=JPEG -co PHOTOMETRIC=YCBCR -co BIGTIFF=YES -o of.tif of/*.tif 
>>> 
>>> The input images are around 160mb each so loading them 1 by 1 into
>>> memory is not a problem.
>> 
>> Pavel, 
>> 
>> I don't know what is going wrong.  I would suggest adding lots of print
>> statements in the gdal_merge.py script to try and establish where it is
>> freezing up. 
>> 
>> Best regards,
> 
> wasn't there once a problem with the number of files that are joined? Or 
> was this only when adding the files manually at the command line (not 
> using the * operator). 
> 
> Wolf 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 

From jorge.arevalo at gmail.com  Tue Jun 30 01:53:35 2009
From: jorge.arevalo at gmail.com (=?UTF-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Tue Jun 30 01:53:57 2009
Subject: [gdal-dev] GDAL WKT Raster Driver weekly report #5
In-Reply-To: <4A4951DB.6070309@pobox.com>
References: <cb4457700906281905r52254a2bw5ccaae8e901e5e7a@mail.gmail.com> 
	<4A4951DB.6070309@pobox.com>
Message-ID: <cb4457700906292253g3953ba56h983ad5cefbd67c5b@mail.gmail.com>

Hello Frank,

2009/6/30 Frank Warmerdam <warmerdam@pobox.com>

> Jorge Ar?valo wrote:
>
>> Hello,
>>
>> This is the report #5 of GDAL WKT Raster driver:
>> http://www.gis4free.org/blog/2009/06/27/gsoc-09-weekly-report-5-1906-2606/
>>
>> The project can be followed here:
>> http://trac.osgeo.org/gdal/wiki/WKTRasterDriver
>>
>
> Jorge,
>
> I appologise for not staying on top of my mentoring duties.  I am reviewing
> the design document at:
>
>
> http://www.gis4free.org/blog/wp-content/uploads/2009/06/gdal-wktrasterdriver-spec-0.2.pdf
>
> Is this still the most current version of your design?  I see Even,
> Mateusz,
> Pierre and others have provided some feedback.  Their comments seem good.


Don't worry. As you said, this is not the current version. Even, Mateusz,
Tamas... and myself, have commented a lot of things that must be added.


>
>
> I would also support the suggestion to put the design in a more malliable
> form, such that others can contribute more directly - such as a trac wiki
> page. I also think the design needs some further updates from the 0.2
> version.  I notice you have your own trac now, though it does not seem to
> have any public access which I think is unfortunate. Don't hesitate to keep
> the design in the GDAL trac.


OK. I'll use the GDAL trac to create a web version with more information.

>
>
> I would like design to better address the relationship between WKTRaster's
> data model and the GDAL data model.  So, for instance, you might note
> things
> like:
>
> 1) The fPixelSizeX, fPixelSizeY, fUpperLeftX, fUpperLeftY, fRotationX,
> fRotationY values will become the GeoTransform in GDAL, possibly noting
> how the transformation will take place.   Actually, the f* fields I note
> are actually on a single WKTRaster objects after fetching and instead
> you really need to populate the Geotransform based on the extent,
> pixelsize_x
> and pixelsize_y fields from the RASTER_COLUMNS table and that
> for now only north up images will be supported (unrotated).
>
> 2) Note that WKTRaster uses an SRID lookup into the spatial_ref_sys which
> may contain WKT and PROJ.4 representations of a coordinate system, but
> that GDAL needs WKT.  Note perhaps that the spatial_ref_sys lookup code
> from the OGR PG driver can be used essentially unchanged, and that things
> only get messy when there is a need to create new rasters as it is
> sometimes
> hard to establish what SRID to use for a given WKT (or whether to create a
> new one), but that this matter can also be done using the same approach as
> the OGR PG driver.
>
> --
>
> In general I was surprised to find no mention of the RASTER_COLUMNS table
> and the implications for the WKTRaster driver.  To a significant extent
> this table was defined to make it easier to write the WKTRaster driver.
> It encapsulates a concept of simplistic rasters that can be easily mapped
> onto the GDAL data model and that can be efficiently manipulated by GDAL.
>
> I would like the design talk about steps in implementation.  The first
> complete step should be a read-only driver that supports
> "regular_blocking" type images defined via RASTER_COLUMNS.   I would
> hope this would be accomplished by the mid-term review.
>
> After that some additions you could work on are:
>
>  1) Supporting rasters that are not "regular_blocking".  I think it will
>    be hard to make this really efficient, but it is definately doable.
>
>  2) Support in place update for existing rasters.
>
>  3) Support creating new rasters.
>
>  4) Support access to overviews.
>
>  5) Support "outdb" rasters.
>
> I would like a sense of which of these you hope to do this summer,
> in what order, and what you see as the issues with them.
>
> I would personally be quite happy if you did a bulletproof and efficient
> implementation of read-only access to WKTRasters with overviews and
> all applicable metadata and access to "outdb" rasters.
>
> Make sure the project plan includes time to extend the python test suite
> with tests for the WKTRaster driver, and to write up user driver
> documentation.
>

Understood. Since now, I'm working on an extended version of the document
(1.0 this time), describing more in detail all the work,  including your
comments, and any other information that can be useful.

Many thanks for your comments, I'll keep you (and the list) informed.

Best regards
Jorge


>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090630/ee9faf48/attachment-0001.html
From scott.sinclair.za at gmail.com  Tue Jun 30 07:33:33 2009
From: scott.sinclair.za at gmail.com (Scott Sinclair)
Date: Tue Jun 30 07:33:36 2009
Subject: Fwd: [gdal-dev] can't open grib2 files
In-Reply-To: <6a17e9ee0906300432y1afd10ccqb92f3c9b500a9c5b@mail.gmail.com>
References: <4A48A2F3.6080804@meteogalicia.es>
	<6a17e9ee0906290608v6b5d7f2ewda769988ff1f0e12@mail.gmail.com>
	<4A48C173.9060802@meteogalicia.es>
	<6a17e9ee0906300432y1afd10ccqb92f3c9b500a9c5b@mail.gmail.com>
Message-ID: <6a17e9ee0906300433y774cd0e9kb0e0012b577bbbe2@mail.gmail.com>

Forgot to copy the list.

---------- Forwarded message ----------
From: Scott Sinclair <scott.sinclair.za@gmail.com>
Date: 2009/6/30
Subject: Re: [gdal-dev] can't open grib2 files
To: Alberto Pettazzi <alberto.pettazzi@meteogalicia.es>


>2009/6/29 Alberto Pettazzi <alberto.pettazzi@meteogalicia.es>:
> ?I just have executed the command you suggested me,
>
> gdal-config --formats
>
>
> and that's what I got:
>
> gxf gtiff hfa aigrid aaigrid ceos ceos2 iso8211 xpm sdts raw dted mem jdem
> envisat elas fit vrt usgsdem l1b nitf bmp pcidsk airsar rs2 ilwis rmf
> leveller sgi srtmhgt idrisi gsg ingr ers jaxapalsar dimap gff cosar pds adrg
> coasp tsx terragen blx msgn wcs wms grib bsb jpeg2000 hdf5 hdf4 gif jpeg png
> netcdf pcraster rik
>
> So, I guess that I have already built the jpeg2000 support. Any Suggestion?

When you run gdalinfo on the input file you'll see that the GRIB file
has 3 bands. The last two are quality flags at a different spatial
resolution to the rainfall estimates (it seems that's what causes the
GRIB driver to choke). See
http://www.eumetsat.int/groups/ops/documents/document/pdf_metprod_mpe_quality_info.pdf

Using the -b flag to gdal_translate works for me:

$ gdalinfo --version
GDAL 1.6.1, released 2009/05/11
$ gdal_translate -b 1 MPE_20090629_0900_M9_00.grb MPE_20090629_0900_M9_00.tif
$ gdalinfo MPE_20090629_0900_M9_00.tif
Driver: GTiff/GeoTIFF
Files: MPE_20090629_0900_M9_00.tif
Size is 3712, 3712
Coordinate System is:
LOCAL_CS["unnamed",
? ?UNIT["metre",1,
? ? ? ?AUTHORITY["EPSG","9001"]]]
Origin = (-5568748.275999999605119,5568748.275999999605119)
Pixel Size = (3000.403165948275728,-3000.403165948275728)
Metadata:
?AREA_OR_POINT=Area
Image Structure Metadata:
?INTERLEAVE=BAND
Corner Coordinates:
Upper Left ?(-5568748.276, 5568748.276)
Lower Left ?(-5568748.276,-5568748.276)
Upper Right ( 5568748.276, 5568748.276)
Lower Right ( 5568748.276,-5568748.276)
Center ? ? ?( ? 0.0000000, ?-0.0000000)
Band 1 Block=3712x1 Type=Float64, ColorInterp=Gray
?Metadata:
? ?GRIB_UNIT=[kg/(m^2*s)]
? ?GRIB_COMMENT=Instantaneous rain rate [kg/(m^2*s)]
? ?GRIB_SHORT_NAME=0 undefined
? ?GRIB_REF_TIME=1246266000 sec UTC
? ?GRIB_VALID_TIME=1246266000 sec UTC
? ?GRIB_FORECAST_SECONDS=0 sec
? ?GRIB_PDS_PDTN=30
? ?GRIB_PDS_TEMPLATE_NUMBERS=1 1 8 7 1 1 77 0 56 207 255 255 255 255 255

Cheers,
Scott
From peifer at gmx.eu  Tue Jun 30 10:06:52 2009
From: peifer at gmx.eu (Hermann Peifer)
Date: Tue Jun 30 10:07:14 2009
Subject: [gdal-dev] PackBitsDecode: Not enough data ...
Message-ID: <h2d65t$k1u$1@ger.gmane.org>

Hi.

I am trying to warp a GeoTiff from EPSG:3035 to EPSG:4326. After 50% 
done, I end up with the following errors:

$ gdalwarp -t_srs EPSG:4326 lceugr100_00_pct.tif 
lceugr100_00_pct_epsg4326.tif -co COMPRESS=PACKBITS

Copying color table from lceugr100_00_pct.tif to new file.
Creating output file that is 121261P x 44229L.
Processing input file lceugr100_00_pct.tif.

0...10...20...30...40...50..ERROR 1: 
lceugr100_00_pct_epsg4326.tif:PackBitsDecode: Not enough data for 
scanline 22054

ERROR 1: TIFFReadEncodedStrip() failed.
ERROR 1: IReadBlock failed at X offset 0, Y offset 22054
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 22054

Is there any issue with the decoding the PACKBITS compression?

Hermann



$ gdalinfo lceugr100_00_pct.tif

Driver: GTiff/GeoTIFF
Files: lceugr100_00_pct.tif
        lceugr100_00_pct.aux
Size is 67000, 58000
Coordinate System is:
PROJCS["ETRS_1989_LAEA_L52_M10",
     GEOGCS["GCS_ETRS_1989",
         DATUM["European_Terrestrial_Reference_System_1989",
             SPHEROID["GRS_1980",6378137.0,298.257222101]],
         PRIMEM["Greenwich",0.0],
         UNIT["Degree",0.0174532925199433]],
     PROJECTION["Lambert_Azimuthal_Equal_Area"],
     PARAMETER["False_Easting",4321000.0],
     PARAMETER["False_Northing",3210000.0],
     PARAMETER["Central_Meridian",10.0],
     PARAMETER["Latitude_Of_Origin",52.0],
     UNIT["Meter",1.0]]
Origin = (800000.000000000000000,6500000.000000000000000)
Pixel Size = (100.000000000000000,-100.000000000000000)
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   COMPRESSION=PACKBITS
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  800000.000, 6500000.000) ( 72d48'20.05"W, 59d 5'6.85"N)
Lower Left  (  800000.000,  700000.000) ( 24d 7'20.21"W, 22d12'54.64"N)
Upper Right ( 7500000.000, 6500000.000) ( 90d22'56.28"E, 61d55'58.94"N)
Lower Right ( 7500000.000,  700000.000) ( 41d 0'50.13"E, 23d29'5.23"N)
Center      ( 4150000.000, 3600000.000) (  7d17'47.28"E, 55d28'33.08"N)
Band 1 Block=67000x1 Type=Byte, ColorInterp=Palette
   Metadata:
     LAYER_TYPE=thematic
   Color Table (RGB with 256 entries)
...

From adeel.raza at crc.gc.ca  Tue Jun 30 10:12:24 2009
From: adeel.raza at crc.gc.ca (Adeel Raza)
Date: Tue Jun 30 10:55:27 2009
Subject: [gdal-dev] Trouble installing gdal 1.6.1
Message-ID: <4A4A1D48.5060800@crc.gc.ca>

Hi,

I compiled gdal 1.6.1 for MSVC 9.0 and then I wrote the following 
command to install the library files in the desired directory. I get the 
following error:

D:\gdal-1.6.1> nmake /f makefile.vc install GDAL_HOME=D:\gdal

Microsoft (R) Program Maintenance Utility Version 9.00.30729.01
Copyright (C) Microsoft Corporation.  All rights reserved.

       if exist gdal.lib del gdal.lib
       lib /nologo /out:gdal.lib port\*.obj gcore\*.obj alg\*.obj 
frmts\o\*.obj
ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib vb6\vb6_support.obj
LINK : fatal error LNK1181: cannot open input file 'vb6\vb6_support.obj'
NMAKE : fatal error U1077: '"C:\Softwares\Microsoft Visual C++ 2008 
Express Edit
ion\VC\BIN\lib.EXE"' : return code '0x49d'
Stop.


Can someone help me with this?

Regards,
Adeel Raza.


From jmckenna at gatewaygeomatics.com  Tue Jun 30 11:06:44 2009
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue Jun 30 11:13:28 2009
Subject: [gdal-dev] Trouble installing gdal 1.6.1
In-Reply-To: <4A4A1D48.5060800@crc.gc.ca>
References: <4A4A1D48.5060800@crc.gc.ca>
Message-ID: <4A4A2A04.4090102@gatewaygeomatics.com>

Adeel Raza wrote:
> Hi,
> 
> I compiled gdal 1.6.1 for MSVC 9.0 and then I wrote the following 
> command to install the library files in the desired directory. I get the 
> following error:
> 
> D:\gdal-1.6.1> nmake /f makefile.vc install GDAL_HOME=D:\gdal
> 
> Microsoft (R) Program Maintenance Utility Version 9.00.30729.01
> Copyright (C) Microsoft Corporation.  All rights reserved.
> 
>       if exist gdal.lib del gdal.lib
>       lib /nologo /out:gdal.lib port\*.obj gcore\*.obj alg\*.obj 
> frmts\o\*.obj
> ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib vb6\vb6_support.obj
> LINK : fatal error LNK1181: cannot open input file 'vb6\vb6_support.obj'
> NMAKE : fatal error U1077: '"C:\Softwares\Microsoft Visual C++ 2008 
> Express Edit
> ion\VC\BIN\lib.EXE"' : return code '0x49d'
> Stop.
> 
> 
> Can someone help me with this?

Have you set the "MSVC_VER" variable in nmake.opt to the appropriate 
value?  (1500 for msvc 9.0)

-jeff




-- 
Jeff McKenna
FOSS4G Consulting and Training Services
http://www.gatewaygeomatics.com/




From jmckenna at gatewaygeomatics.com  Tue Jun 30 11:40:43 2009
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue Jun 30 11:47:26 2009
Subject: [gdal-dev] Trouble installing gdal 1.6.1
In-Reply-To: <4A4A2CFA.7020308@crc.gc.ca>
References: <4A4A1D48.5060800@crc.gc.ca>
	<4A4A2A04.4090102@gatewaygeomatics.com>
	<4A4A2CFA.7020308@crc.gc.ca>
Message-ID: <4A4A31FB.5010009@gatewaygeomatics.com>

Adeel Raza wrote:
> Hi Jeff,
> 
> Thanks for replying. I set the MSVC_VER variable in the original command 
> to compile the library as follows:
> D:\gdal-1.6.1> nmake /f makefile.vc MSVC_VER=1500
> 
> But it seemed like that had no effect  "nmake.opt". So i just changed it 
> manually and the install command is working now. But I do appreciate 
> your reply. Thanks.
> 

I am referring to setting the MSVC_VER variable in nmake.opt on line 
~26.  Set it there, save it, and retry your tests.

(please always reply to the gdal mailing list..or you can email me 
directly for my support rates)

-jeff


-- 
Jeff McKenna
FOSS4G Consulting and Training Services
http://www.gatewaygeomatics.com/


From jmckenna at gatewaygeomatics.com  Tue Jun 30 11:52:27 2009
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue Jun 30 11:59:09 2009
Subject: [gdal-dev] Trouble installing gdal 1.6.1
In-Reply-To: <4A4A1D48.5060800@crc.gc.ca>
References: <4A4A1D48.5060800@crc.gc.ca>
Message-ID: <4A4A34BB.9030700@gatewaygeomatics.com>

Adeel Raza wrote:
> Hi,
> 
> I compiled gdal 1.6.1 for MSVC 9.0 and then I wrote the following 
> command to install the library files in the desired directory. I get the 
> following error:
> 
> D:\gdal-1.6.1> nmake /f makefile.vc install GDAL_HOME=D:\gdal
> 
> Microsoft (R) Program Maintenance Utility Version 9.00.30729.01
> Copyright (C) Microsoft Corporation.  All rights reserved.
> 
>       if exist gdal.lib del gdal.lib
>       lib /nologo /out:gdal.lib port\*.obj gcore\*.obj alg\*.obj 
> frmts\o\*.obj
> ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib vb6\vb6_support.obj
> LINK : fatal error LNK1181: cannot open input file 'vb6\vb6_support.obj'
> NMAKE : fatal error U1077: '"C:\Softwares\Microsoft Visual C++ 2008 
> Express Edit
> ion\VC\BIN\lib.EXE"' : return code '0x49d'
> Stop.
> 
> 

Once you set the MSVC_VER value in the nmake.opt, then you can also set 
the install directory (see lines ~44-50)...set those, save, and execute 
'nmake /f makefile.vc' and then 'nmake /f makefile.vc install'.

-jeff


-- 
Jeff McKenna
FOSS4G Consulting and Training Services
http://www.gatewaygeomatics.com/


From adeel.raza at crc.gc.ca  Tue Jun 30 12:01:04 2009
From: adeel.raza at crc.gc.ca (Adeel Raza)
Date: Tue Jun 30 12:00:56 2009
Subject: [gdal-dev] Trouble installing gdal 1.6.1
In-Reply-To: <4A4A34BB.9030700@gatewaygeomatics.com>
References: <4A4A1D48.5060800@crc.gc.ca>
	<4A4A34BB.9030700@gatewaygeomatics.com>
Message-ID: <4A4A36C0.3050700@crc.gc.ca>

Thanks.

Jeff McKenna wrote:
> Adeel Raza wrote:
>> Hi,
>>
>> I compiled gdal 1.6.1 for MSVC 9.0 and then I wrote the following 
>> command to install the library files in the desired directory. I get 
>> the following error:
>>
>> D:\gdal-1.6.1> nmake /f makefile.vc install GDAL_HOME=D:\gdal
>>
>> Microsoft (R) Program Maintenance Utility Version 9.00.30729.01
>> Copyright (C) Microsoft Corporation.  All rights reserved.
>>
>>       if exist gdal.lib del gdal.lib
>>       lib /nologo /out:gdal.lib port\*.obj gcore\*.obj alg\*.obj 
>> frmts\o\*.obj
>> ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib vb6\vb6_support.obj
>> LINK : fatal error LNK1181: cannot open input file 'vb6\vb6_support.obj'
>> NMAKE : fatal error U1077: '"C:\Softwares\Microsoft Visual C++ 2008 
>> Express Edit
>> ion\VC\BIN\lib.EXE"' : return code '0x49d'
>> Stop.
>>
>>
>
> Once you set the MSVC_VER value in the nmake.opt, then you can also 
> set the install directory (see lines ~44-50)...set those, save, and 
> execute 'nmake /f makefile.vc' and then 'nmake /f makefile.vc install'.
>
> -jeff
>
>

From peifer at gmx.eu  Tue Jun 30 12:35:27 2009
From: peifer at gmx.eu (Hermann Peifer)
Date: Tue Jun 30 12:35:35 2009
Subject: [gdal-dev] Fwd: PackBitsDecode: Not enough data ...
Message-ID: <4A4A3ECF.8080405@gmx.eu>

I am not quite sure if my posting through gmane.comp.gis.gdal.devel went through. So I am sending it again. Hermann

-------- Original Message --------
Subject: PackBitsDecode: Not enough data ...
Date: Tue, 30 Jun 2009 16:06:52 +0200
From: Hermann Peifer <peifer@gmx.eu>
Newsgroups: gmane.comp.gis.gdal.devel

Hi.

I am trying to warp a GeoTiff from EPSG:3035 to EPSG:4326. After 50% 
done, I end up with the following errors:

$ gdalwarp -t_srs EPSG:4326 lceugr100_00_pct.tif 
lceugr100_00_pct_epsg4326.tif -co COMPRESS=PACKBITS

Copying color table from lceugr100_00_pct.tif to new file.
Creating output file that is 121261P x 44229L.
Processing input file lceugr100_00_pct.tif.

0...10...20...30...40...50..ERROR 1: 
lceugr100_00_pct_epsg4326.tif:PackBitsDecode: Not enough data for 
scanline 22054

ERROR 1: TIFFReadEncodedStrip() failed.
ERROR 1: IReadBlock failed at X offset 0, Y offset 22054
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 22054

Is there any issue with the decoding the PACKBITS compression?

Hermann



$ gdalinfo lceugr100_00_pct.tif

Driver: GTiff/GeoTIFF
Files: lceugr100_00_pct.tif
       lceugr100_00_pct.aux
Size is 67000, 58000
Coordinate System is:
PROJCS["ETRS_1989_LAEA_L52_M10",
    GEOGCS["GCS_ETRS_1989",
        DATUM["European_Terrestrial_Reference_System_1989",
            SPHEROID["GRS_1980",6378137.0,298.257222101]],
        PRIMEM["Greenwich",0.0],
        UNIT["Degree",0.0174532925199433]],
    PROJECTION["Lambert_Azimuthal_Equal_Area"],
    PARAMETER["False_Easting",4321000.0],
    PARAMETER["False_Northing",3210000.0],
    PARAMETER["Central_Meridian",10.0],
    PARAMETER["Latitude_Of_Origin",52.0],
    UNIT["Meter",1.0]]
Origin = (800000.000000000000000,6500000.000000000000000)
Pixel Size = (100.000000000000000,-100.000000000000000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=PACKBITS
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  800000.000, 6500000.000) ( 72d48'20.05"W, 59d 5'6.85"N)
Lower Left  (  800000.000,  700000.000) ( 24d 7'20.21"W, 22d12'54.64"N)
Upper Right ( 7500000.000, 6500000.000) ( 90d22'56.28"E, 61d55'58.94"N)
Lower Right ( 7500000.000,  700000.000) ( 41d 0'50.13"E, 23d29'5.23"N)
Center      ( 4150000.000, 3600000.000) (  7d17'47.28"E, 55d28'33.08"N)
Band 1 Block=67000x1 Type=Byte, ColorInterp=Palette
  Metadata:
    LAYER_TYPE=thematic
  Color Table (RGB with 256 entries)
...

From monshi at home.se  Tue Jun 30 12:38:13 2009
From: monshi at home.se (Tomas R)
Date: Tue Jun 30 12:38:28 2009
Subject: [gdal-dev] Future compatibility - plugins (C#)
Message-ID: <h2df1n$cm6$1@ger.gmane.org>

Hi again, time for a new question
First of, Q is regarding the C# environment.

Trying to update my plugin to SportTracks that makes it possible for 
other plugins to the great program to make use of Gdal. Currently the 
plugin uses Gdal 1.5.1 and the plan is to move to 1.6.1

There seem to not be a "soft" way to upgrade as a move to gdal 1.6.1 
will break the other plugin. Are the changes between 1.5.1 and 1.6.1 so 
great they require a break in compatibility?
In  the future, upgrade to Gdal 1.7 will this also not be backward 
compatible? Are there anything I can do when compiling Gdal than may 
simplify the transition? Say that a plugin linked to the 1.6.1 C# dlls 
will also work with the 1.5.1 dlls? That way it will possible to roll 
out the other plugins with support of Gdal 1.6.1 and some time later go 
out with the upgrade.

Suggestions, ideas, explanations why I have this problem at all!

Yours
Tomas

From even.rouault at mines-paris.org  Tue Jun 30 14:02:07 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jun 30 14:02:17 2009
Subject: [gdal-dev] Future compatibility - plugins (C#)
In-Reply-To: <h2df1n$cm6$1@ger.gmane.org>
References: <h2df1n$cm6$1@ger.gmane.org>
Message-ID: <200906302002.08513.even.rouault@mines-paris.org>

Tomas,

Disclaimer : I'm not an expert of C# at all and I've not understood your 
preliminary paragraph about 'SportTracks and the other plugins'. The 
following explanatations are more general remarks about how a random SWIG 
GDAL binding should work regards to versioning.

Theory : The csharp binding dlls use only the "C symbols" from libgdal. As 
there is upward ABI stability for the C symbols, a csharp program compiled 
against GDAL in version X should run against the binding dlls in version X 
and a GDAL library version in Y, where Y >= X. 

Practice : Under Linux, I've just tried running the GDALInfo.exe compiled in 
1.6 branch against the gdal_csharp.dll from that 1.6 branch and libgdal.so 
from 1.7.0dev and it works. But the other way would not work : a 
gdal_csharp.dll from 1.7.0 uses symbols that have appeared in libgdal 1.7.0, 
so it cannot run against an older libgdal. There's no way to make that work 
of course : that's the concept of upward compatibility only.
I've also tried running GDALInfo.exe (1.6) against gdal_csharp.dll from 
1.7.0dev (and libgdal from 1.7.0dev) and it seemed to work, but I'm not sure 
if it would always work (don't know how C# symbols are stored and linked).

Note : for the Java bindings things would get a bit more complicated. The 
gdal.jar and libgdal_jni.so are closely coupled and you cannot definitely use 
mixed versions of them.

Not sure if all above is clear and helps.

Best regards,
Even

Le Tuesday 30 June 2009 18:38:13 Tomas R, vous avez ?crit?:
> Hi again, time for a new question
> First of, Q is regarding the C# environment.
>
> Trying to update my plugin to SportTracks that makes it possible for
> other plugins to the great program to make use of Gdal. Currently the
> plugin uses Gdal 1.5.1 and the plan is to move to 1.6.1
>
> There seem to not be a "soft" way to upgrade as a move to gdal 1.6.1
> will break the other plugin. Are the changes between 1.5.1 and 1.6.1 so
> great they require a break in compatibility?
> In  the future, upgrade to Gdal 1.7 will this also not be backward
> compatible? Are there anything I can do when compiling Gdal than may
> simplify the transition? Say that a plugin linked to the 1.6.1 C# dlls
> will also work with the 1.5.1 dlls? That way it will possible to roll
> out the other plugins with support of Gdal 1.6.1 and some time later go
> out with the upgrade.
>
> Suggestions, ideas, explanations why I have this problem at all!
>
> Yours
> Tomas
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From Doug_Newcomb at fws.gov  Tue Jun 30 14:41:25 2009
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Tue Jun 30 14:41:30 2009
Subject: [gdal-dev] Make install problem on Centos 5.3 64-bit with gdal1.6.1
Message-ID: <OFC6B1636F.A49EC404-ON872575E5.0066AB4C-872575E5.0066AB57@fws.gov>



Hi,
I'm trying to compile gdal 1.6.1 on a Centos 5.3 x86_64 computer.  The make
portion works fine, but the make install bombs with :
/usr/bin/ld: skipping incompatible /usr/lib/libcom_err.so when searching
for -lcom_err
/usr/bin/ld: skipping incompatible /usr/lib/libcom_err.a when searching for
-lcom_err
/usr/bin/ld: skipping incompatible /usr/lib/libcom_err.so when searching
for -lcom_err
/usr/bin/ld: skipping incompatible /usr/lib/libcom_err.a when searching for
-lcom_err
/usr/bin/ld: cannot find -lcom_err
collect2: ld returned 1 exit status

I have compat-libcom_err.x86_64 installed, but I don't see a
libcom_err-devel rpm available.  Options?

Doug

Doug?Newcomb
USFWS
Raleigh,?NC
919-856-4520?ext.?14?doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------

The?opinions?I?express?are?my?own?and?are?not?representative?of?the?official?policy?of?the?U.S.Fish?and?Wildlife?Service?or?Dept.?of?Interior.???Life?is?too?short?for?undocumented,?proprietary?data?formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090630/cae229f5/attachment.html
From szekerest at gmail.com  Tue Jun 30 15:16:21 2009
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Jun 30 15:22:35 2009
Subject: [gdal-dev] Future compatibility - plugins (C#)
In-Reply-To: <h2df1n$cm6$1@ger.gmane.org>
References: <h2df1n$cm6$1@ger.gmane.org>
Message-ID: <f3b73b7d0906301216w67d89ack34845dcd97d353a0@mail.gmail.com>

2009/6/30 Tomas R <monshi@home.se>

> Trying to update my plugin to SportTracks that makes it possible for other
> plugins to the great program to make use of Gdal. Currently the plugin uses
> Gdal 1.5.1 and the plan is to move to 1.6.1


> There seem to not be a "soft" way to upgrade as a move to gdal 1.6.1 will
> break the other plugin. Are the changes between 1.5.1 and 1.6.1 so great
> they require a break in compatibility?


Tomas,


I can't recall how the architecture of SportTracks is looking like (how it
handles the plugins) and it seems your question is related to this. Assuming
it may use something like late binding to the assemblies may result some
kind of independence among the plugins and I suspect reinstalling a new
version won't violate the other (quite untelated) assemblies. Or will you
intend to keep 2 versions side by side to the application?



>
> In  the future, upgrade to Gdal 1.7 will this also not be backward
> compatible? Are there anything I can do when compiling Gdal than may
> simplify the transition? Say that a plugin linked to the 1.6.1 C# dlls will
> also work with the 1.5.1 dlls? That way it will possible to roll out the
> other plugins with support of Gdal 1.6.1 and some time later go out with the
> upgrade.
>

I would discourage mixing the dll-s from different compilations due to a
bunch of unpredictable issues may happen. Mixing the versions of the dll-s
at the swig side (ie gdal_csharp.dll and gdal_wrap.dll) is almost impossible
since the exported functions between the dll-s may be a target of frequent
changes. The gdal C API seems to be more invariant but the version change
implies different dll names which prevents from loading the newer versions.
Moreover you should also use the same compiler to compile these dll-s so as
to depend in the same CRT runtime.

You might also decide which framework is to be supported and which
architecture (x86 or x64) depending on how the host process have been
compiled. Most of the possible combinations are covered by the regular
builds can be downloaded from this location:
http://vbkto.dyndns.org:1280/sdk/Default.aspx

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090630/a4aabed9/attachment.html
From even.rouault at mines-paris.org  Tue Jun 30 16:00:12 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jun 30 16:00:25 2009
Subject: [gdal-dev] Make install problem on Centos 5.3 64-bit with
	gdal1.6.1
In-Reply-To: <OFC6B1636F.A49EC404-ON872575E5.0066AB4C-872575E5.0066AB57@fws.gov>
References: <OFC6B1636F.A49EC404-ON872575E5.0066AB4C-872575E5.0066AB57@fws.gov>
Message-ID: <200906302200.13415.even.rouault@mines-paris.org>

A quick Google search gives http://www.saiweb.co.uk/tag/libcom_err that seems 
to be exactly your issue

Le Tuesday 30 June 2009 20:41:25 Doug_Newcomb@fws.gov, vous avez ?crit?:
> libcom_err


From even.rouault at mines-paris.org  Tue Jun 30 16:03:26 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jun 30 16:03:35 2009
Subject: [gdal-dev] PackBitsDecode: Not enough data ...
In-Reply-To: <h2d65t$k1u$1@ger.gmane.org>
References: <h2d65t$k1u$1@ger.gmane.org>
Message-ID: <200906302203.26333.even.rouault@mines-paris.org>

Does gdalinfo -checksum lceugr100_00_pct_epsg4326.tif works ? If it doesn't, 
you might want to try with a recent GDAL (e.g 1.6.1) and internal libtiff 
support.

Le Tuesday 30 June 2009 16:06:52 Hermann Peifer, vous avez ?crit?:
> Hi.
>
> I am trying to warp a GeoTiff from EPSG:3035 to EPSG:4326. After 50%
> done, I end up with the following errors:
>
> $ gdalwarp -t_srs EPSG:4326 lceugr100_00_pct.tif
> lceugr100_00_pct_epsg4326.tif -co COMPRESS=PACKBITS
>
> Copying color table from lceugr100_00_pct.tif to new file.
> Creating output file that is 121261P x 44229L.
> Processing input file lceugr100_00_pct.tif.
>
> 0...10...20...30...40...50..ERROR 1:
> lceugr100_00_pct_epsg4326.tif:PackBitsDecode: Not enough data for
> scanline 22054
>
> ERROR 1: TIFFReadEncodedStrip() failed.
> ERROR 1: IReadBlock failed at X offset 0, Y offset 22054
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 22054
>
> Is there any issue with the decoding the PACKBITS compression?
>
> Hermann
>
>
>
> $ gdalinfo lceugr100_00_pct.tif
>
> Driver: GTiff/GeoTIFF
> Files: lceugr100_00_pct.tif
>         lceugr100_00_pct.aux
> Size is 67000, 58000
> Coordinate System is:
> PROJCS["ETRS_1989_LAEA_L52_M10",
>      GEOGCS["GCS_ETRS_1989",
>          DATUM["European_Terrestrial_Reference_System_1989",
>              SPHEROID["GRS_1980",6378137.0,298.257222101]],
>          PRIMEM["Greenwich",0.0],
>          UNIT["Degree",0.0174532925199433]],
>      PROJECTION["Lambert_Azimuthal_Equal_Area"],
>      PARAMETER["False_Easting",4321000.0],
>      PARAMETER["False_Northing",3210000.0],
>      PARAMETER["Central_Meridian",10.0],
>      PARAMETER["Latitude_Of_Origin",52.0],
>      UNIT["Meter",1.0]]
> Origin = (800000.000000000000000,6500000.000000000000000)
> Pixel Size = (100.000000000000000,-100.000000000000000)
> Metadata:
>    AREA_OR_POINT=Area
> Image Structure Metadata:
>    COMPRESSION=PACKBITS
>    INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (  800000.000, 6500000.000) ( 72d48'20.05"W, 59d 5'6.85"N)
> Lower Left  (  800000.000,  700000.000) ( 24d 7'20.21"W, 22d12'54.64"N)
> Upper Right ( 7500000.000, 6500000.000) ( 90d22'56.28"E, 61d55'58.94"N)
> Lower Right ( 7500000.000,  700000.000) ( 41d 0'50.13"E, 23d29'5.23"N)
> Center      ( 4150000.000, 3600000.000) (  7d17'47.28"E, 55d28'33.08"N)
> Band 1 Block=67000x1 Type=Byte, ColorInterp=Palette
>    Metadata:
>      LAYER_TYPE=thematic
>    Color Table (RGB with 256 entries)
> ...
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From monshi at home.se  Tue Jun 30 16:43:06 2009
From: monshi at home.se (Tomas R)
Date: Tue Jun 30 16:43:24 2009
Subject: [gdal-dev] Re: Future compatibility - plugins (C#)
In-Reply-To: <f3b73b7d0906301216w67d89ack34845dcd97d353a0@mail.gmail.com>
References: <h2df1n$cm6$1@ger.gmane.org>
	<f3b73b7d0906301216w67d89ack34845dcd97d353a0@mail.gmail.com>
Message-ID: <h2dtct$ndb$1@ger.gmane.org>

Ok. To clear it out.

I have a plugin which make gdal available for plugins within 
SportTracks. Actually, just adds gdal libraries to the path the plugins 
find them at runtime. That is, late bindings.

In simple words. How do I go about updating the plugin?
If I have gdal 1.5.1 on the path and  a plugin compiled against gdal 
1.6.1 it fails
If I have gdal 1.6.1 on the path and a plugin compiled against gdal 
1.5.1 it fails.
Two independent version of gdal installed, only one of them is loaded 
and available (the one with the lowest GUID actually)

You have added a strong name in gdal 1.6, do this affect this behaviour? 
When moving to gdal 1.7 will  any of the above setting work (switch 1.5 
to 1.6 and 1.6 to 1.7) or will it always be cumbersome to upgrade?

Any suggestions? It is a bit hard on the developers, and users!,  
depending in my plugin, me telling them "I will update gdal next week, 
it will break your current version of the plugin".

One of the developers has a solution on his part. He sets up a wrapper 
that tries to bind to gdal 1.5.1 and one wrapper that tries to bind to 
gdal 1.6.1. The one that works he uses and it provides the function 
calls to gdal he needs. This way it will be possible for him to support 
multiple version, two  wrappers should do since I will put the 1.5 
version off line at the time I upload 1.6.1 version. 1.5 version should 
die. Other plugin developers can of course also use this method and it 
is not to cumbersome I guess.

Environment. 1.6.1 is compiled with VSE 2008, old version was compiled 
with VSE 2005. Only x86. SportTracks now compiled with an x86 flag, 
forcing it to run in 32 bit mode because of various problem with plugins 
in 64 bit mode.

Since you (now) have compiled versions on the web perhaps I should give 
up compiling gdal myself?

Thanks for the quick and very good answers both of you.
Yours
Tomas

Tamas Szekeres skrev:
>
>
> 2009/6/30 Tomas R <monshi@home.se <mailto:monshi@home.se>>
>
>     Trying to update my plugin to SportTracks that makes it possible
>     for other plugins to the great program to make use of Gdal.
>     Currently the plugin uses Gdal 1.5.1 and the plan is to move to 1.6.1 
>
>
>     There seem to not be a "soft" way to upgrade as a move to gdal
>     1.6.1 will break the other plugin. Are the changes between 1.5.1
>     and 1.6.1 so great they require a break in compatibility?
>
>
> Tomas,
>
>
> I can't recall how the architecture of SportTracks is looking like 
> (how it handles the plugins) and it seems your question is related to 
> this. Assuming it may use something like late binding to the 
> assemblies may result some kind of independence among the plugins and 
> I suspect reinstalling a new version won't violate the other (quite 
> untelated) assemblies. Or will you intend to keep 2 versions side by 
> side to the application?
>
>  
>
>
>     In  the future, upgrade to Gdal 1.7 will this also not be backward
>     compatible? Are there anything I can do when compiling Gdal than
>     may simplify the transition? Say that a plugin linked to the 1.6.1
>     C# dlls will also work with the 1.5.1 dlls? That way it will
>     possible to roll out the other plugins with support of Gdal 1.6.1
>     and some time later go out with the upgrade.
>
>
> I would discourage mixing the dll-s from different compilations due to 
> a bunch of unpredictable issues may happen. Mixing the versions of the 
> dll-s at the swig side (ie gdal_csharp.dll and gdal_wrap.dll) is 
> almost impossible since the exported functions between the dll-s may 
> be a target of frequent changes. The gdal C API seems to be more 
> invariant but the version change implies different dll names which 
> prevents from loading the newer versions.
> Moreover you should also use the same compiler to compile these dll-s 
> so as to depend in the same CRT runtime.
>
> You might also decide which framework is to be supported and which 
> architecture (x86 or x64) depending on how the host process have been 
> compiled. Most of the possible combinations are covered by the regular 
> builds can be downloaded from this location:
> http://vbkto.dyndns.org:1280/sdk/Default.aspx
>
> Best regards,
>
> Tamas
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Doug_Newcomb at fws.gov  Tue Jun 30 16:52:56 2009
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Tue Jun 30 16:53:11 2009
Subject: [gdal-dev] Make install problem on Centos 5.3 64-bit with
	gdal1.6.1
In-Reply-To: <200906302200.13415.even.rouault@mines-paris.org>
Message-ID: <OF444A5B5B.24DBA80E-ON852575E5.0072AC6C-852575E5.0072B5D9@fws.gov>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: graycol.gif
Type: image/gif
Size: 105 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090630/b015ae75/graycol.gif
-------------- next part --------------
A non-text attachment was scrubbed...
Name: pic05705.gif
Type: image/gif
Size: 1255 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090630/b015ae75/pic05705.gif
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ecblank.gif
Type: image/gif
Size: 45 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090630/b015ae75/ecblank.gif
