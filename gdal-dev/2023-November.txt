From michael.smith.erdc at gmail.com  Wed Nov  1 03:18:10 2023
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Wed, 01 Nov 2023 06:18:10 -0400
Subject: [gdal-dev] GDAL 3.8.0beta1 available for testing
In-Reply-To: <277d82b1-37ed-421e-bc21-730fbabe4bd2@spatialys.com>
References: <0cd23294-a98b-4f4d-b28f-f58bd5024dd5@spatialys.com>
 <AM0PR09MB3219877BAD7C99524D38DC92FDA0A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <277d82b1-37ed-421e-bc21-730fbabe4bd2@spatialys.com>
Message-ID: <1E728D76-B34C-4753-809F-724393445570@gmail.com>

Using the ghcr.io/osgeo/gdal:ubuntu-full-latest docker image, I get a segfault when trying to convert overture maps to flatgeobuf

 

ogr2ogr -f flatgeobuf /data/overturemaps_2023_10_19.fgb /vsis3/overturemaps-us-west-2/release/2023-10-19-alpha.0/theme=buildings/ theme=buildings -progress

?

FlatGeobuf: Spatial index requested will write to temp file and do second pass on close

Segmentation fault (core dumped)

 

But no core file. 

 

 

-- 

Michael Smith

Remote Sensing/GIS Center

US Army Corps of Engineers

 

 

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org>
Reply-To: Even Rouault <even.rouault at spatialys.com>
Date: Tuesday, October 31, 2023 at 1:14 PM
To: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>, "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] GDAL 3.8.0beta1 available for testing

 

 

Le 31/10/2023 ? 17:36, Rahkonen Jukka a ?crit :
Hi,
 
I made a simple test with ogr2ogr and geopackage to geopackage on Windows. With GDAL 3.8.0dev-3e4dc710a2 (no arrow, old R-Tree) the timing was 36 minutes, with GDAL 3.8.0dev-6bbd2c080a the same conversion took 21 minutes. The gpkg file is 75 GB, with 120 layers.
 
Could it be that the new R-Tree implementation does not print anything into debug? 
Indeed. Debug traces added back in https://github.com/OSGeo/gdal/pull/8640

Even
-- 
http://www.spatialys.com
My software is free, but my time generally not.
_______________________________________________ gdal-dev mailing list gdal-dev at lists.osgeo.org https://lists.osgeo.org/mailman/listinfo/gdal-dev 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231101/8c86a34f/attachment.htm>

From even.rouault at spatialys.com  Wed Nov  1 04:13:59 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 1 Nov 2023 12:13:59 +0100
Subject: [gdal-dev] Motion: Adopt GDAL 3.7.3RC1 as 3.7.3 release
Message-ID: <d0ff88ad-1b09-45a6-8f4e-a8a145054aa3@spatialys.com>

Hi,

Motion:

Adopt GDAL 3.7.3RC1 as 3.7.3 release

Starting with my +1

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jukka.rahkonen at maanmittauslaitos.fi  Wed Nov  1 04:19:19 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Wed, 1 Nov 2023 11:19:19 +0000
Subject: [gdal-dev] Motion: Adopt GDAL 3.7.3RC1 as 3.7.3 release
In-Reply-To: <d0ff88ad-1b09-45a6-8f4e-a8a145054aa3@spatialys.com>
References: <d0ff88ad-1b09-45a6-8f4e-a8a145054aa3@spatialys.com>
Message-ID: <AM0PR09MB3219BB5DB07F5BC3C2E64D9FFDA7A@AM0PR09MB3219.eurprd09.prod.outlook.com>

+1

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault via gdal-dev
L?hetetty: keskiviikko 1. marraskuuta 2023 13.14
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Motion: Adopt GDAL 3.7.3RC1 as 3.7.3 release

Hi,

Motion:

Adopt GDAL 3.7.3RC1 as 3.7.3 release

Starting with my +1

Even

--
http://www.spatialys.com/
My software is free, but my time generally not.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Wed Nov  1 05:17:33 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 1 Nov 2023 13:17:33 +0100
Subject: [gdal-dev] GDAL 3.8.0beta1 available for testing
In-Reply-To: <1E728D76-B34C-4753-809F-724393445570@gmail.com>
References: <0cd23294-a98b-4f4d-b28f-f58bd5024dd5@spatialys.com>
 <AM0PR09MB3219877BAD7C99524D38DC92FDA0A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <277d82b1-37ed-421e-bc21-730fbabe4bd2@spatialys.com>
 <1E728D76-B34C-4753-809F-724393445570@gmail.com>
Message-ID: <d5b4e249-54d9-41c4-bb40-178a6debf29d@spatialys.com>

Hi Mike,

thanks for the report. Issue fixed in master. I've refreshed the Docker 
image

Note however that this Overture dataset contains 1,390,499,721 features, 
and with our estimate of 83 bytes / feature to build the FlatGeobuf 
RTree, that means you need at least 115 GB RAM on your machine 
(presumably more due to fragmentation etc)

You could potentially save a few minutes by not adding -progress since 
GetFeatureCount() on such dataset requires getting some bits in each of 
the ~1600 files, but I guess that for a process that's going to take a 
few hours, having some display progress justifies a few extra minutes :-)

Even

Le 01/11/2023 ? 11:18, Michael Smith a ?crit?:
>
> Using the ghcr.io/osgeo/gdal:ubuntu-full-latest docker image, I get a 
> segfault when trying to convert overture maps to flatgeobuf
>
> ogr2ogr -f flatgeobuf /data/overturemaps_2023_10_19.fgb 
> /vsis3/overturemaps-us-west-2/release/2023-10-19-alpha.0/theme=buildings/ 
> theme=buildings -progress
>
> ?
>
> FlatGeobuf: Spatial index requested will write to temp file and do 
> second pass on close
>
> Segmentation fault (core dumped)
>
> But no core file.
>
> -- 
>
> Michael Smith
>
> Remote Sensing/GIS Center
>
> US Army Corps of Engineers
>
> *From: *gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Even 
> Rouault via gdal-dev <gdal-dev at lists.osgeo.org>
> *Reply-To: *Even Rouault <even.rouault at spatialys.com>
> *Date: *Tuesday, October 31, 2023 at 1:14 PM
> *To: *Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>, 
> "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
> *Subject: *Re: [gdal-dev] GDAL 3.8.0beta1 available for testing
>
> Le 31/10/2023 ? 17:36, Rahkonen Jukka a ?crit?:
>
>     Hi,
>
>     I made a simple test with ogr2ogr and geopackage to geopackage on Windows. With GDAL 3.8.0dev-3e4dc710a2 (no arrow, old R-Tree) the timing was 36 minutes, with GDAL 3.8.0dev-6bbd2c080a the same conversion took 21 minutes. The gpkg file is 75 GB, with 120 layers.
>
>     Could it be that the new R-Tree implementation does not print anything into debug?
>
> Indeed. Debug traces added back in https://github.com/OSGeo/gdal/pull/8640
>
> Even
>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________ gdal-dev mailing list 
> gdal-dev at lists.osgeo.org 
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231101/89063869/attachment-0001.htm>

From j1 at jimenezshaw.com  Wed Nov  1 05:40:33 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 1 Nov 2023 13:40:33 +0100
Subject: [gdal-dev] Motion: Adopt GDAL 3.7.3RC1 as 3.7.3 release
In-Reply-To: <AM0PR09MB3219BB5DB07F5BC3C2E64D9FFDA7A@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <d0ff88ad-1b09-45a6-8f4e-a8a145054aa3@spatialys.com>
 <AM0PR09MB3219BB5DB07F5BC3C2E64D9FFDA7A@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <CADRrdKvXo3m1GV00mwZ79yzBqHf7HYhYersZDRyUA_A5z-4_6Q@mail.gmail.com>

+1 Javier

On Wed, 1 Nov 2023 at 12:19, Rahkonen Jukka via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> +1
>
> -Jukka Rahkonen-
>
> -----Alkuper?inen viesti-----
> L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even
> Rouault via gdal-dev
> L?hetetty: keskiviikko 1. marraskuuta 2023 13.14
> Vastaanottaja: gdal-dev at lists.osgeo.org
> Aihe: [gdal-dev] Motion: Adopt GDAL 3.7.3RC1 as 3.7.3 release
>
> Hi,
>
> Motion:
>
> Adopt GDAL 3.7.3RC1 as 3.7.3 release
>
> Starting with my +1
>
> Even
>
> --
> http://www.spatialys.com/
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231101/7efae429/attachment.htm>

From schwehr at gmail.com  Wed Nov  1 07:14:45 2023
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 1 Nov 2023 07:14:45 -0700
Subject: [gdal-dev] Motion: OSGeo Community Sprint Financial Support
In-Reply-To: <D1421805-81D3-46A4-BA8B-46DF9A9F1A57@hobu.co>
References: <D1421805-81D3-46A4-BA8B-46DF9A9F1A57@hobu.co>
Message-ID: <CACmBxyuEX=6YJ--=dYzS=OO2sUYzka_u1M9RSLk0N5um4_3mMQ@mail.gmail.com>

+1 Kurt S

On Tue, Oct 31, 2023 at 10:02?AM Howard Butler via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Dear PSC,
>
> Sorry for the short notice, but I would like to motion that the GDAL
> Sponsorship Program financially support GDAL PSC members who wish to attend
> the OSGeo Community Sprint in Vienna [1] next week. Support level is capped
> at 1000? for European attendees and 1500? for others.
>
> Howard
>
> [1] https://wiki.osgeo.org/wiki/OSGeo_Community_Sprint_2023
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231101/d92ac9bb/attachment.htm>

From craig.destigter at koordinates.com  Wed Nov  1 18:50:40 2023
From: craig.destigter at koordinates.com (Craig de Stigter)
Date: Thu, 2 Nov 2023 14:50:40 +1300
Subject: [gdal-dev] WFS: How to use feature ordering?
Message-ID: <CAF1M8pfUoWYR2+yqCOp5NwxM0Pm9T5ojqfEbt_EDpOTR_pwfNA@mail.gmail.com>

Hey folks

We're having a lot of trouble getting data out of a WFS server that doesn't
have primary keys. (previous work on this)
<https://github.com/OSGeo/gdal/pull/8146>


The URL that's causing us grief is this one:
https://opendata.maps.vic.gov.au/geoserver/wfs?REQUEST=GetFeature&SERVICE=WFS&VERSION=2.0.0&TYPENAMES=open-data-platform:v_s_parcel_proposed&STARTINDEX=0&COUNT=2

* we can't disable pagination, because the server only returns 5000 records
even if we ask for more.
* we can't paginate without ordering, because there's no PK.

So, adding a `&SORTBY=parcel_pfi` to the querystring fixes the issue. But I
can't seem to get GDAL to do that for us.

There does seem to be code for applying an "ORDER BY" clause from
ExecuteSQL to the WFS 1.1+ SORTBY field. However, I can't get it to work.

I made a test script
<https://gist.github.com/craigds/4fc8c0f61d02c0293b7c5005b8492744#file-wfs-order-by-test-py>
to demonstrate the problem. It uses ExecuteSQL to apply an ORDER BY clause,
but the resulting curl queries don't have a SORTBY parameter. Then it
crashes after the server returns a 400 error due to the missing SORTBY.

I assume there's something I need to do to cause GDAL to use the SORTBY
parameter but I'm not sure what it is. Any tips would be appreciated.

-- 
Regards,
Craig

Platform Engineer
Koordinates

+64 21 256 9488 <+64%2021%20256%209488> / koordinates.com / @koordinates
<https://twitter.com/koordinates>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231102/2bd6590a/attachment.htm>

From selimsezr at gmail.com  Wed Nov  1 22:53:08 2023
From: selimsezr at gmail.com (selim sezer)
Date: Thu, 2 Nov 2023 08:53:08 +0300
Subject: [gdal-dev] GDAL to Convert GML to KML Problem
Message-ID: <CACm+mKard7zMqEAF9Fp0S5hKk-yugF8DY7x1t4HBBZi7yw2Vrg@mail.gmail.com>

Hello;

I have an xml file and I am converting it to kml file using ogr2ogr. I
tried it on many files and it converted without any problems, but it could
not convert the file labeled gml that I mentioned in the link. When I
looked at the other parts of the file, I couldn't find a problem. The link
to the sample file is below.

verification-service/latest_version/1A2F20_1A2FD2_PASS.xml at master ?
aixm/verification-service (github.com)
<https://github.com/aixm/verification-service/blob/master/latest_version/1A2F20_1A2FD2_PASS.xml>

GDAL to convert GML to KML - Geographic Information Systems Stack Exchange
<https://gis.stackexchange.com/questions/469306/gdal-to-convert-gml-to-kml>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231102/9e99c467/attachment.htm>

From even.rouault at spatialys.com  Thu Nov  2 02:07:23 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 2 Nov 2023 10:07:23 +0100
Subject: [gdal-dev] WFS: How to use feature ordering?
In-Reply-To: <CAF1M8pfUoWYR2+yqCOp5NwxM0Pm9T5ojqfEbt_EDpOTR_pwfNA@mail.gmail.com>
References: <CAF1M8pfUoWYR2+yqCOp5NwxM0Pm9T5ojqfEbt_EDpOTR_pwfNA@mail.gmail.com>
Message-ID: <13ae8a78-4747-405e-8f04-bb953afc9550@spatialys.com>

Craig,

remove the leading end-of-line and spaces in your ExecuteSQL

l = ds.ExecuteSQL(
     """SELECT *
     FROM "open-data-platform:v_s_parcel_proposed"
     ORDER BY "parcel_pfi" ASC
     """
)

Also fixed perhttps://github.com/OSGeo/gdal/commit/f6c7d95e2c66ba1f62f6ff17e31af37f7f8f6bc8

Even

Le 02/11/2023 ? 02:50, Craig de Stigter via gdal-dev a ?crit?:
> Hey folks
>
> We're having a lot of trouble getting data out of a WFS server that 
> doesn't have primary keys. (previous work on this) 
> <https://github.com/OSGeo/gdal/pull/8146>
>
>
> The URL that's causing us grief is this one: 
> https://opendata.maps.vic.gov.au/geoserver/wfs?REQUEST=GetFeature&SERVICE=WFS&VERSION=2.0.0&TYPENAMES=open-data-platform:v_s_parcel_proposed&STARTINDEX=0&COUNT=2 
> <https://opendata.maps.vic.gov.au/geoserver/wfs?REQUEST=GetFeature&SERVICE=WFS&VERSION=2.0.0&TYPENAMES=open-data-platform:v_s_parcel_proposed&STARTINDEX=0&COUNT=2>
>
> * we can't disable pagination, because the server only returns 5000 
> records even if we ask for more.
> * we can't paginate without ordering, because there's no PK.
>
> So, adding a `&SORTBY=parcel_pfi` to the querystring fixes the issue. 
> But I can't seem to get GDAL to do that for us.
>
> There does seem to be code for applying an "ORDER BY" clause from 
> ExecuteSQL to the WFS 1.1+ SORTBY field. However, I can't get it to work.
>
> I made a test script 
> <https://gist.github.com/craigds/4fc8c0f61d02c0293b7c5005b8492744#file-wfs-order-by-test-py> 
> to demonstrate the problem. It uses ExecuteSQL to apply an ORDER BY 
> clause, but the resulting curl queries don't have a SORTBY parameter. 
> Then it crashes after the server returns a 400 error due to the 
> missing SORTBY.
>
> I assume there's something I need to do to cause GDAL to use the 
> SORTBY parameter but I'm not sure what it is. Any tips would be 
> appreciated.
>
> -- 
> Regards,
> Craig
>
> Platform Engineer
> Koordinates
>
> +64 21 256 9488 <tel:+64%2021%20256%209488>?/ koordinates.com 
> <http://koordinates.com/>?/ @koordinates <https://twitter.com/koordinates>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231102/60917720/attachment.htm>

From even.rouault at spatialys.com  Thu Nov  2 04:59:10 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 2 Nov 2023 12:59:10 +0100
Subject: [gdal-dev] Call for review and discussion on RFC96: Deferred
 in-tree C++ plugin loading
Message-ID: <7004463d-3e6e-4084-a87b-1d66b8fc218f@spatialys.com>

Hi,

I'm seeking for feedback and review on a new RFC (RFC 96: Deferred 
in-tree C++ plugin loading),
detailed in https://github.com/OSGeo/gdal/pull/8648, whose summary is:

This RFC adds a mechanism to defer the loading of in-tree C++ plugin 
drivers to
the point where their executable code is actually needed, and converts a 
number
of relevant drivers to use that mechanism. The aim is to allow for more 
modular
GDAL builds, while improving the performance of plugin loading.

(This is material only for GDAL 3.9 of course)

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From robert.coup at koordinates.com  Thu Nov  2 06:35:40 2023
From: robert.coup at koordinates.com (Robert Coup)
Date: Thu, 2 Nov 2023 13:35:40 +0000
Subject: [gdal-dev] Call for review and discussion on RFC96: Deferred
 in-tree C++ plugin loading
In-Reply-To: <7004463d-3e6e-4084-a87b-1d66b8fc218f@spatialys.com>
References: <7004463d-3e6e-4084-a87b-1d66b8fc218f@spatialys.com>
Message-ID: <CAFLLRpKRyTPR97khYTZhiLZJRKwgQzb+_7qT5Jtn=zCPQ+ivMQ@mail.gmail.com>

Hi Even,

On Thu, 2 Nov 2023 at 11:59, Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

>
> I'm seeking for feedback and review on a new RFC (RFC 96: Deferred
> in-tree C++ plugin loading), detailed in
> https://github.com/OSGeo/gdal/pull/8648, whose summary is:
>
> This RFC adds a mechanism to defer the loading of in-tree C++ plugin
> drivers to the point where their executable code is actually needed, and
> converts a
> number of relevant drivers to use that mechanism. The aim is to allow for
> more
> modular GDAL builds, while improving the performance of plugin loading.
>

This looks great from my perspective. Are there any downsides?

I guess conceptually "Driver X depending on LibW clashes with Driver Z
depending on LibY" cases are less likely to be hit during unit testing,
since a particular test-runner/process won't (eventually) be loading the
full set of drivers + dependencies? Usually that's a LibW vs LibY problem
though, not a GDAL issue.

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231102/095da047/attachment.htm>

From even.rouault at spatialys.com  Thu Nov  2 06:54:39 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 2 Nov 2023 14:54:39 +0100
Subject: [gdal-dev] Call for review and discussion on RFC96: Deferred
 in-tree C++ plugin loading
In-Reply-To: <CAFLLRpKRyTPR97khYTZhiLZJRKwgQzb+_7qT5Jtn=zCPQ+ivMQ@mail.gmail.com>
References: <7004463d-3e6e-4084-a87b-1d66b8fc218f@spatialys.com>
 <CAFLLRpKRyTPR97khYTZhiLZJRKwgQzb+_7qT5Jtn=zCPQ+ivMQ@mail.gmail.com>
Message-ID: <4389e15f-3ad2-4e21-9132-5f9312168c9f@spatialys.com>

Hi Rob,
>
> This looks great from my perspective. Are there any downsides?

- A bit of additional coding complexity for driver development, but not 
that much

- As mentioned in the backwards compatibility paragraph, for people 
doing multi-step builds to build first libgdal and then plugins, that 
will require extra care and defining the 
-DGDAL/OGR_DECLARE_DRIVER_xxxx_FOR_LATER_PLUGIN. Like the condaforge 
build recipee, but I would expect this to be more the exception, than 
what most distributions do. The recommended approach is still to do a 
single build and dispatch the artifacts in separate installable packages 
afterwards

>
> I guess conceptually "Driver X depending on LibW clashes with Driver Z 
> depending on LibY" cases are less likely to be hit during unit 
> testing, since a particular test-runner/process won't (eventually) be 
> loading the full set of drivers + dependencies? Usually that's a LibW 
> vs LibY problem though, not a GDAL issue.

Yes that could somehow hide such issues, but as you said, there are 
integration issues, and GDAL can't be expected to reliably detect those. 
Clashes also happen generally at runtime, when you used clashing 
drivers. Just loading the libraries isn't sufficient per se to run into 
the clashes. At least in most situations on Linux.

I've considered yet-another config option like 
GDAL_DEFERRED_PLUGIN_LOADING=NO to disable the new behaviour (meaning to 
fully load the drivers at GDALAllRegister() time), but didn't go for it 
for now as the use cases for it are not obvious. People wanting to 
emulate it can just loop through drivers and call GetMetadata() on them, 
which will force plugin loading,? to simulate that.

>
> Rob :)

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231102/3f30a5aa/attachment-0001.htm>

From schwehr at gmail.com  Thu Nov  2 07:28:38 2023
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 2 Nov 2023 07:28:38 -0700
Subject: [gdal-dev] Call for review and discussion on RFC96: Deferred
 in-tree C++ plugin loading
In-Reply-To: <7004463d-3e6e-4084-a87b-1d66b8fc218f@spatialys.com>
References: <7004463d-3e6e-4084-a87b-1d66b8fc218f@spatialys.com>
Message-ID: <CACmBxyvsvko0FnE2QXiRgxEneWyKpezfrR3gBaYU8Jt0CvXZUQ@mail.gmail.com>

Thanks Even for the RFC!

After a quick read, this seems reasonable. I was mostly concerned about the
impact on folks who statically build everything (my biggest use case), but
that is completely addressed in the doc.

On Thu, Nov 2, 2023 at 5:00?AM Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> I'm seeking for feedback and review on a new RFC (RFC 96: Deferred
> in-tree C++ plugin loading),
> detailed in https://github.com/OSGeo/gdal/pull/8648, whose summary is:
>
> This RFC adds a mechanism to defer the loading of in-tree C++ plugin
> drivers to
> the point where their executable code is actually needed, and converts a
> number
> of relevant drivers to use that mechanism. The aim is to allow for more
> modular
> GDAL builds, while improving the performance of plugin loading.
>
> (This is material only for GDAL 3.9 of course)
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231102/7e921009/attachment.htm>

From sean.gillies at gmail.com  Thu Nov  2 08:32:21 2023
From: sean.gillies at gmail.com (Sean Gillies)
Date: Thu, 2 Nov 2023 09:32:21 -0600
Subject: [gdal-dev] GDAL 3.8.0beta1 available for testing
In-Reply-To: <0cd23294-a98b-4f4d-b28f-f58bd5024dd5@spatialys.com>
References: <0cd23294-a98b-4f4d-b28f-f58bd5024dd5@spatialys.com>
Message-ID: <CAOodmJrEBuxJhPFjeqG5JabEap7+j-6jDBEGriQN=_d54BAbUg@mail.gmail.com>

Hi Even,

Rasterio's CI picked up a change to the AAIGrid driver in 3.8. The 3.7
version driver used to have whitespace before a row and no whitespace
after. It looks like this has flipped in 3.8. Is it intentional? I only
noticed because one of my tests is parsing the file as text. It's certainly
not a big deal. Hopefully this format has mostly expired on the internet :)

On Tue, Oct 31, 2023 at 8:34?AM Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> I've prepared a beta1 of GDAL 3.8.0 to get feedback from earlier testers.
>
> Sorry no updated NEWS.md file yet, but I'd in particular be interesting
> by testing of ogr2ogr workflows, since they have underwent significant
> changes in the underlying implementation:
>
> - when the source layer is a layer implementing the ArrowStream API
> (that is  GeoPackage, FlatGeoBuf, Arrow or Parquet), and when no ogr2ogr
> options than -of, -where, -spat, -lco, -dsco, -gt,
> -append/-overwrite/-update are used (and -sql as well for GeoPackage).
> When enabling CPL_DEBUG, you'll see a "OGR2OGR: Using WriteArrowBatch()"
> trace when that new code path is taken. If specifying other options, the
> feature-iteration-based traditional implementation is used
>
> - and/or when the output layer is GeoPackage (new layer), due to the
> revamped much faster spatial index creation.  This enhanced spatial
> index creation is not ogr2ogr specific and is actually available more
> generally for CreateLayer() + CreateFeature() or CreateLayer() +
> WriteArrowBatch() scenarios.
>
> Point of attention would be when in situations with large files and/or
> with low RAM.
>
> The ghcr.io/osgeo/gdal:ubuntu-small-latest,
> ghcr.io/osgeo/gdal:ubuntu-full-latest,
> ghcr.io/osgeo/gdal:alpine-normal-latest Docker images have been
> refreshed with 3.8.0beta1 (ghcr.io/osgeo/gdal:alpine-small-latest still
> building at time of writing).
>
> (Note: the GDAL master conda builds mentioned at
> https://gdal.org/download.html#gdal-master-conda-builds have been broken
> for a couple weeks and are thus not usable to test beta1 currently. I'm
> investigating)
>
> Source snapshots at:
>
> - https://download.osgeo.org/gdal/3.8.0/gdal-3.8.0beta1.tar.gz
>
> - https://download.osgeo.org/gdal/3.8.0/gdal-3.8.0beta1.tar.xz
>
> - https://download.osgeo.org/gdal/3.8.0/gdal380beta1.zip
>
> Autotest snapshots:
>
> - https://download.osgeo.org/gdal/3.8.0/gdalautotest-3.8.0beta1.tar.gz
>
> - https://download.osgeo.org/gdal/3.8.0/gdalautotest-3.8.0beta1.zip
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231102/cd7b62fa/attachment.htm>

From sean.gillies at gmail.com  Thu Nov  2 08:39:03 2023
From: sean.gillies at gmail.com (Sean Gillies)
Date: Thu, 2 Nov 2023 09:39:03 -0600
Subject: [gdal-dev] Motion: Adopt GDAL 3.7.3RC1 as 3.7.3 release
In-Reply-To: <d0ff88ad-1b09-45a6-8f4e-a8a145054aa3@spatialys.com>
References: <d0ff88ad-1b09-45a6-8f4e-a8a145054aa3@spatialys.com>
Message-ID: <CAOodmJqa6NCPwCbKweVx6fq5AhRvaKN0Qzeve72a+22o4PgN_Q@mail.gmail.com>

I'm changing Rasterio's CI to test against both the head of the master
branch and the head of the current release branch, so in the future I'll
likely only speak up if something is broken right before the release.
3.7.3RC1 looks good to me. I can't think of anything missing.

On Wed, Nov 1, 2023 at 5:14?AM Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> Motion:
>
> Adopt GDAL 3.7.3RC1 as 3.7.3 release
>
> Starting with my +1
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231102/b70e8b07/attachment.htm>

From even.rouault at spatialys.com  Thu Nov  2 08:59:56 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 2 Nov 2023 16:59:56 +0100
Subject: [gdal-dev] GDAL 3.8.0beta1 available for testing
In-Reply-To: <CAOodmJrEBuxJhPFjeqG5JabEap7+j-6jDBEGriQN=_d54BAbUg@mail.gmail.com>
References: <0cd23294-a98b-4f4d-b28f-f58bd5024dd5@spatialys.com>
 <CAOodmJrEBuxJhPFjeqG5JabEap7+j-6jDBEGriQN=_d54BAbUg@mail.gmail.com>
Message-ID: <38fe71d0-d46f-4b7c-9058-7e9de1456725@spatialys.com>

Hi Sean,
> Rasterio's CI picked up a change to the AAIGrid driver in 3.8. The 3.7 
> version driver used to have whitespace before a row and no whitespace 
> after. It looks like this has flipped in 3.8. Is it intentional?

Yes: https://github.com/OSGeo/gdal/pull/8362

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231102/264e9f4c/attachment.htm>

From howard at hobu.co  Thu Nov  2 13:57:27 2023
From: howard at hobu.co (Howard Butler)
Date: Thu, 2 Nov 2023 15:57:27 -0500
Subject: [gdal-dev] Call for review and discussion on RFC96: Deferred
 in-tree C++ plugin loading
In-Reply-To: <7004463d-3e6e-4084-a87b-1d66b8fc218f@spatialys.com>
References: <7004463d-3e6e-4084-a87b-1d66b8fc218f@spatialys.com>
Message-ID: <50541490-48FE-4CCB-AD05-97A270540DB3@hobu.co>



> On Nov 2, 2023, at 6:59?AM, Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
> 
> Hi,
> 
> I'm seeking for feedback and review on a new RFC (RFC 96: Deferred in-tree C++ plugin loading),
> detailed in https://github.com/OSGeo/gdal/pull/8648, whose summary is:
> 
> This RFC adds a mechanism to defer the loading of in-tree C++ plugin drivers to
> the point where their executable code is actually needed, and converts a number
> of relevant drivers to use that mechanism. The aim is to allow for more modular
> GDAL builds, while improving the performance of plugin loading.
> 
> (This is material only for GDAL 3.9 of course)

???
IMO this has been needed for a while. I'm glad you've been able to come to a solution that doesn't significantly impact behavior or performance. 

I would like to see some language that describes the expectations for version compatibility of plugins (ie, what happens with a plugin built against x.0 is used against a main library of y.0).

I'm very interested to hear from packagers about this topic and whether or not a plugin model like this is desirable to address GDAL's large dependency challenge.

Howard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231102/0b12361e/attachment.htm>

From even.rouault at spatialys.com  Thu Nov  2 14:20:06 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 2 Nov 2023 22:20:06 +0100
Subject: [gdal-dev] Call for review and discussion on RFC96: Deferred
 in-tree C++ plugin loading
In-Reply-To: <50541490-48FE-4CCB-AD05-97A270540DB3@hobu.co>
References: <7004463d-3e6e-4084-a87b-1d66b8fc218f@spatialys.com>
 <50541490-48FE-4CCB-AD05-97A270540DB3@hobu.co>
Message-ID: <e8733411-e3ab-436a-b9c8-f26a3d2fe362@spatialys.com>

Howard,
>
> I would like to see some language that describes the expectations for 
> version compatibility of plugins (ie, what happens with a plugin built 
> against x.0 is used against a main library of y.0).

This RFC actually doesn't change anything regarding this. See the 
mention of the GDAL_CHECK_VERSION macro in 
https://gdal.org/tutorials/raster_driver_tut.html#the-driver which 
covers this topic (I've just slightly tuned it to the below version 
which will be online soon):

"Note the use of GDAL_CHECK_VERSION macro. This is a macro that should 
be used by drivers that can be built as a plugin. As the GDAL C++ ABI 
may, and will, change between GDAL feature releases (for example from 
GDAL 3.x.0 to 3.y.0), it is necessary to recompile your driver against 
the header files of the GDAL feature version with which you want to make 
it work. The GDAL_CHECK_VERSION macro will check that the GDAL version 
with which the driver was compiled and the version against which it is 
running are compatible (checking that the major and minor version 
numbers are equal). The C++ ABI will however remain stable for releases 
of the same release branch (that is for bug fixes releases x.y.z of a 
given feature release x.y.0)."

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jukka.rahkonen at maanmittauslaitos.fi  Thu Nov  2 14:45:05 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Thu, 2 Nov 2023 21:45:05 +0000
Subject: [gdal-dev] Show isBigTIFF in image metadata
Message-ID: <AM0PR09MB32199AFDEE937562FD3BC48AFDA6A@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

I tried to find some easy way for checking with GDAL if an image is a standard TIFF or BigTIFF but I could not find any. It seems that "more big.tiff" on Windows finds "II+" from the beginning of the file if the image is BigTIFF and "II*" otherwise. Or then I can open the image with a hex editor for seeing if the third byte is 2A or 2B. However, I would like to see the information with gdalinfo for example as

Image Structure Metadata:
  INTERLEAVE=BAND
  VERSION=BigTIFF

Does it feel reasonable? I know that overviews may be standard TIFFs while the main image is BigTIFF but maybe the information from the header would be enough. Or have I missed some existing tool? I thought that tiffinfo at least would report TIFF/BigTIFF but it doesn't.

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231102/e9429045/attachment.htm>

From even.rouault at spatialys.com  Thu Nov  2 14:48:59 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 2 Nov 2023 22:48:59 +0100
Subject: [gdal-dev] Show isBigTIFF in image metadata
In-Reply-To: <AM0PR09MB32199AFDEE937562FD3BC48AFDA6A@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <AM0PR09MB32199AFDEE937562FD3BC48AFDA6A@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <b71eee02-bc4b-4421-a91d-963e5c48c97e@spatialys.com>

Jukka,
>
>
> Does it feel reasonable? I know that overviews may be standard TIFFs 
> while the main image is BigTIFF but maybe the information from the 
> header would be enough. Or have I missed some existing tool? I thought 
> that tiffinfo at least would report TIFF/BigTIFF but it doesn?t.
>
tiffdump does:

$ tiffdump byte.tif
byte.tif:
Magic: 0x4949 <little-endian> Version: 0x2a <ClassicTIFF>

vs

$ tiffdump bigtiff.tif
bigtiff.tif:
Magic: 0x4949 <little-endian> Version: 0x2b <BigTIFF>

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231102/c094ebca/attachment.htm>

From schwehr at gmail.com  Thu Nov  2 18:07:54 2023
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 2 Nov 2023 18:07:54 -0700
Subject: [gdal-dev] Show isBigTIFF in image metadata
In-Reply-To: <b71eee02-bc4b-4421-a91d-963e5c48c97e@spatialys.com>
References: <AM0PR09MB32199AFDEE937562FD3BC48AFDA6A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <b71eee02-bc4b-4421-a91d-963e5c48c97e@spatialys.com>
Message-ID: <CACmBxys=FCY9cMHm8pefuBefL4CYqt46pAvJkq=-uUvDG2gMmA@mail.gmail.com>

Jukka,

What's the exact use case for needing to know if a tiff is traditional or
BigTIFF? Is there a key tool that doesn't understand BigTIFF? The only one
I know of is Autodesk Civil3D.

Thanks,
-Kurt

On Thu, Nov 2, 2023 at 2:49?PM Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Jukka,
>
>
> Does it feel reasonable? I know that overviews may be standard TIFFs while
> the main image is BigTIFF but maybe the information from the header would
> be enough. Or have I missed some existing tool? I thought that tiffinfo at
> least would report TIFF/BigTIFF but it doesn?t.
>
> tiffdump does:
>
> $ tiffdump byte.tif
> byte.tif:
> Magic: 0x4949 <little-endian> Version: 0x2a <ClassicTIFF>
>
> vs
>
> $ tiffdump bigtiff.tif
> bigtiff.tif:
> Magic: 0x4949 <little-endian> Version: 0x2b <BigTIFF>
>
> Even
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231102/129c32d0/attachment-0001.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Nov  3 01:51:48 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Fri, 3 Nov 2023 08:51:48 +0000
Subject: [gdal-dev] Show isBigTIFF in image metadata
In-Reply-To: <CACmBxys=FCY9cMHm8pefuBefL4CYqt46pAvJkq=-uUvDG2gMmA@mail.gmail.com>
References: <AM0PR09MB32199AFDEE937562FD3BC48AFDA6A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <b71eee02-bc4b-4421-a91d-963e5c48c97e@spatialys.com>
 <CACmBxys=FCY9cMHm8pefuBefL4CYqt46pAvJkq=-uUvDG2gMmA@mail.gmail.com>
Message-ID: <AM0PR09MB3219595AF22E1A6022236CA4FDA5A@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

The exact use case is for the GDAL community help desk. I was wondering how this user https://gis.stackexchange.com/questions/469512/cannot-write-geotiff-larger-than-4gb-with-gdalwarp-despite-using-bigtiff-createo could check if their TIFF is created as BigTIFF or not.

-Jukka Rahkonen-

L?hett?j?: Kurt Schwehr <schwehr at gmail.com>
L?hetetty: perjantai 3. marraskuuta 2023 3.08
Vastaanottaja: Even Rouault <even.rouault at spatialys.com>
Kopio: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>; 'gdal-dev at lists.osgeo.org' (gdal-dev at lists.osgeo.org) <gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] Show isBigTIFF in image metadata

Jukka,

What's the exact use case for needing to know if a tiff is traditional or BigTIFF? Is there a key tool that doesn't understand BigTIFF? The only one I know of is Autodesk Civil3D.

Thanks,
-Kurt

On Thu, Nov 2, 2023 at 2:49?PM Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>> wrote:
Jukka,

Does it feel reasonable? I know that overviews may be standard TIFFs while the main image is BigTIFF but maybe the information from the header would be enough. Or have I missed some existing tool? I thought that tiffinfo at least would report TIFF/BigTIFF but it doesn?t.

tiffdump does:

$ tiffdump byte.tif
byte.tif:
Magic: 0x4949 <little-endian> Version: 0x2a <ClassicTIFF>

vs

$ tiffdump bigtiff.tif
bigtiff.tif:
Magic: 0x4949 <little-endian> Version: 0x2b <BigTIFF>
Even

--

http://www.spatialys.com<http://www.spatialys.com/>

My software is free, but my time generally not.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231103/9ed25c57/attachment.htm>

From even.rouault at spatialys.com  Fri Nov  3 06:28:06 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 3 Nov 2023 14:28:06 +0100
Subject: [gdal-dev] Motion: Adopt GDAL 3.7.3RC1 as 3.7.3 release
In-Reply-To: <d0ff88ad-1b09-45a6-8f4e-a8a145054aa3@spatialys.com>
References: <d0ff88ad-1b09-45a6-8f4e-a8a145054aa3@spatialys.com>
Message-ID: <73d8f4bb-d813-41aa-96e1-d16b26dc263e@spatialys.com>

Motion passed with +1 from PSC members JukkaR, JavierJS, SeanG and me

Le 01/11/2023 ? 12:13, Even Rouault via gdal-dev a ?crit?:
> Hi,
>
> Motion:
>
> Adopt GDAL 3.7.3RC1 as 3.7.3 release
>
> Starting with my +1
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Fri Nov  3 06:46:41 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 3 Nov 2023 14:46:41 +0100
Subject: [gdal-dev] GDAL 3.7.3 is released
Message-ID: <8fe1c7ad-788b-4e40-babd-f7808471d8db@spatialys.com>

Hi,

On behalf of the GDAL/OGR development team, I am pleased to announce the
release of the GDAL/OGR 3.7.3 bug fix version.

Consult the release notes for the list of issues addressed:
 ??? https://github.com/OSGeo/gdal/blob/v3.7.3/NEWS.md

The sources are available at:

 ??? https://download.osgeo.org/gdal/3.7.3/gdal-3.7.3.tar.xz
 ??? https://download.osgeo.org/gdal/3.7.3/gdal-3.7.3.tar.gz
 ??? https://download.osgeo.org/gdal/3.7.3/gdal373.zip

This will be the last bugfix version in the 3.7.x series.
A 3.8.0 release candidate should follow next week.

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jay at jp-hosting.net  Fri Nov  3 08:17:42 2023
From: jay at jp-hosting.net (James Addison)
Date: Fri, 3 Nov 2023 15:17:42 +0000
Subject: [gdal-dev] Question: CPL minizip affected by CVE-2023-45853?
Message-ID: <CALDQ5NyeOvDh+DoxQbTQJk1yzzDYgjWBaNPLOeRE6+au3at8Nw@mail.gmail.com>

Hi folks,

I've arrived at the gdal mailing list after reading the security
policy[1] on the GitHub repository, but then decided that this is as
much a question as it is a bug, so I'm following the issue template
comment advice[2] to post here.

The Common Portability Library within gdal includes some code derived
from minizip / Info-ZIP, and while investigating Debian bug #1054290
I've been trying to figure out where else code affected by
vulnerability CVE-2023-45853 could exist.

Could a maintainer confirm whether the affected section of code[3] in
gdal/CPL is vulnerable too?  If so, there is a fix[4] from the zlib
repository (that hosts minizip) that may be straightforward to apply -
and I think that'd be license-compatible to cherry-pick but that's
probably worth confirming.

Thanks,
James

From even.rouault at spatialys.com  Fri Nov  3 08:44:17 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 3 Nov 2023 16:44:17 +0100
Subject: [gdal-dev] Question: CPL minizip affected by CVE-2023-45853?
In-Reply-To: <CALDQ5NyeOvDh+DoxQbTQJk1yzzDYgjWBaNPLOeRE6+au3at8Nw@mail.gmail.com>
References: <CALDQ5NyeOvDh+DoxQbTQJk1yzzDYgjWBaNPLOeRE6+au3at8Nw@mail.gmail.com>
Message-ID: <943964be-e56f-4931-be65-9b766eb5eb59@spatialys.com>

Hi James,

thanks for the notice. GDAL copy has diverged a bit, but I've just 
managed to apply the upstream fix per 
https://github.com/OSGeo/gdal/pull/8658

Even

Le 03/11/2023 ? 16:17, James Addison via gdal-dev a ?crit?:
> Hi folks,
>
> I've arrived at the gdal mailing list after reading the security
> policy[1] on the GitHub repository, but then decided that this is as
> much a question as it is a bug, so I'm following the issue template
> comment advice[2] to post here.
>
> The Common Portability Library within gdal includes some code derived
> from minizip / Info-ZIP, and while investigating Debian bug #1054290
> I've been trying to figure out where else code affected by
> vulnerability CVE-2023-45853 could exist.
>
> Could a maintainer confirm whether the affected section of code[3] in
> gdal/CPL is vulnerable too?  If so, there is a fix[4] from the zlib
> repository (that hosts minizip) that may be straightforward to apply -
> and I think that'd be license-compatible to cherry-pick but that's
> probably worth confirming.
>
> Thanks,
> James
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jay at jp-hosting.net  Fri Nov  3 09:03:46 2023
From: jay at jp-hosting.net (James Addison)
Date: Fri, 3 Nov 2023 16:03:46 +0000
Subject: [gdal-dev] Question: CPL minizip affected by CVE-2023-45853?
In-Reply-To: <943964be-e56f-4931-be65-9b766eb5eb59@spatialys.com>
References: <CALDQ5NyeOvDh+DoxQbTQJk1yzzDYgjWBaNPLOeRE6+au3at8Nw@mail.gmail.com>
 <943964be-e56f-4931-be65-9b766eb5eb59@spatialys.com>
Message-ID: <CALDQ5Nzu6SnVxJm3xkCjoNCx=HvxG0A5GU2J6k3Wz87DYdM7eQ@mail.gmail.com>

Brilliant - thank you, Even!

On Fri, 3 Nov 2023 at 15:44, Even Rouault <even.rouault at spatialys.com> wrote:
>
> Hi James,
>
> thanks for the notice. GDAL copy has diverged a bit, but I've just
> managed to apply the upstream fix per
> https://github.com/OSGeo/gdal/pull/8658
>
> Even
>
> Le 03/11/2023 ? 16:17, James Addison via gdal-dev a ?crit :
> > Hi folks,
> >
> > I've arrived at the gdal mailing list after reading the security
> > policy[1] on the GitHub repository, but then decided that this is as
> > much a question as it is a bug, so I'm following the issue template
> > comment advice[2] to post here.
> >
> > The Common Portability Library within gdal includes some code derived
> > from minizip / Info-ZIP, and while investigating Debian bug #1054290
> > I've been trying to figure out where else code affected by
> > vulnerability CVE-2023-45853 could exist.
> >
> > Could a maintainer confirm whether the affected section of code[3] in
> > gdal/CPL is vulnerable too?  If so, there is a fix[4] from the zlib
> > repository (that hosts minizip) that may be straightforward to apply -
> > and I think that'd be license-compatible to cherry-pick but that's
> > probably worth confirming.
> >
> > Thanks,
> > James
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>

From even.rouault at spatialys.com  Fri Nov  3 10:53:54 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 3 Nov 2023 18:53:54 +0100
Subject: [gdal-dev] GDAL 3.8.0beta1 available for testing
In-Reply-To: <0cd23294-a98b-4f4d-b28f-f58bd5024dd5@spatialys.com>
References: <0cd23294-a98b-4f4d-b28f-f58bd5024dd5@spatialys.com>
Message-ID: <cac91dd4-4e96-4f1a-912c-abc4393584cf@spatialys.com>


> I've prepared a beta1 of GDAL 3.8.0 to get feedback from earlier testers.
>
> Sorry no updated NEWS.md file yet
==> now available at https://github.com/OSGeo/gdal/blob/master/NEWS.md

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From j1 at jimenezshaw.com  Fri Nov  3 11:39:40 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Fri, 3 Nov 2023 19:39:40 +0100
Subject: [gdal-dev] GDAL 3.8.0beta1 available for testing
In-Reply-To: <cac91dd4-4e96-4f1a-912c-abc4393584cf@spatialys.com>
References: <0cd23294-a98b-4f4d-b28f-f58bd5024dd5@spatialys.com>
 <cac91dd4-4e96-4f1a-912c-abc4393584cf@spatialys.com>
Message-ID: <CADRrdKuifV+RbyTRiZrKYS6e4x1ZhqubzLk8HeXSs9YOUMbmBQ@mail.gmail.com>

Wow Even. There's a lot of new things there! Thanks to all the contributors!

On Fri, 3 Nov 2023, 18:53 Even Rouault via gdal-dev, <
gdal-dev at lists.osgeo.org> wrote:

>
> > I've prepared a beta1 of GDAL 3.8.0 to get feedback from earlier testers.
> >
> > Sorry no updated NEWS.md file yet
> ==> now available at https://github.com/OSGeo/gdal/blob/master/NEWS.md
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231103/75310da4/attachment.htm>

From fitch at astraea.io  Fri Nov  3 13:36:51 2023
From: fitch at astraea.io (Fitch, Simeon)
Date: Fri, 3 Nov 2023 16:36:51 -0400
Subject: [gdal-dev] Advice on `GDALCreateAndReprojectImage` and destination
 no-data value.
Message-ID: <CAAsstvGKjCZiF-HXAhCicDUpN9jn1o=MZviq1GR2ai831bromQ@mail.gmail.com>

Hi,

I'm one of the maintainers at the `georust/gdal` bindings project. ?

I'm currently working on exposing some of the GDAL Warp functionality in
Rust, starting with a simple wrapper around `GDALCreateAndReprojectImage`.
I'm having trouble getting the output file to include a no-data value in
the band's metadata, despite the Warp operation properly respecting no-data
values specified in `GDALWarpOptions`.

My C++ skills are very "rusty", so I'm hoping I can get away with
explaining my problem with some Rust code that is pretty close to being 1:1
with the C API. My suspicion is I'm missing a step in the `GDALWarpOptions`
setup.

This is the CLI operation I'm trying to replicate:

    gdalwarp -t_srs EPSG:4269 -dstnodata 255 -r near input.tif output.tif

Here's the bare-bones Rust bindgen version:

    <https://gist.github.com/metasim/d2a288d5b6126438aaa84b9e95707aff>

The single band in `input.tif` is described by `gdalinfo` like this:

    Band 1 Block=186x44 Type=Byte, ColorInterp=Gray
      NoData Value=255
      Metadata:
        CLASSES=3

After running the Rust code, the results are correct (including Warp
numerically respecting source and destination no-data values) _except_
`output.tif` does not have a no-data value in the band metadata. Here's
what `gdalinfo` on `output.tif` shows:

    Band 1 Block=210x39 Type=Byte, ColorInterp=Gray

The only way I've been able to get the behavior I need is to open the
written dataset from the filesystem and set the no-data value explicitly in
the band, which is inefficient and awkward. Given the CLI version does the
right thing, it's obviously possible. I've spent several hours visually
inspecting the C++ source code, but the CLI version doesn't call
`GDALCreateAndReprojectImage` directly; rather it constructs the Warp
pipeline itself.

Anyone have tips that might help me run this down? Am I missing a no-data
handling step required when working with Warp routines? Could
`GDALCreateAndReprojectImage` have a bug?

Thanks,

Simeon

-- 
Simeon Fitch
Co-founder & CTO
Astraea, Inc.

-- 
The content of this email is intended for the person or entity to which it 
is addressed only. This email may contain confidential information. If you 
are not the person to whom this message is addressed, be aware that any 
use, reproduction, or distribution of this message is strictly prohibited. 
If you received this in error, please contact the sender and immediately 
delete this email and any attachments.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231103/a04b51dd/attachment.htm>

From j1 at jimenezshaw.com  Fri Nov  3 14:42:11 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Fri, 3 Nov 2023 22:42:11 +0100
Subject: [gdal-dev] Advice on `GDALCreateAndReprojectImage` and
 destination no-data value.
In-Reply-To: <CAAsstvGKjCZiF-HXAhCicDUpN9jn1o=MZviq1GR2ai831bromQ@mail.gmail.com>
References: <CAAsstvGKjCZiF-HXAhCicDUpN9jn1o=MZviq1GR2ai831bromQ@mail.gmail.com>
Message-ID: <CADRrdKs=0ReiYg9vF8Xn9oXceOGY0putHpnMrmzZZ=4uS0zFJg@mail.gmail.com>

I do not know that code. But having a look I have the impression that you
have to set the nodata also to papszCreateOptions, so the created dataset
has it.

On Fri, 3 Nov 2023 at 21:36, Fitch, Simeon via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> I'm one of the maintainers at the `georust/gdal` bindings project. ?
>
> I'm currently working on exposing some of the GDAL Warp functionality in
> Rust, starting with a simple wrapper around `GDALCreateAndReprojectImage`.
> I'm having trouble getting the output file to include a no-data value in
> the band's metadata, despite the Warp operation properly respecting no-data
> values specified in `GDALWarpOptions`.
>
> My C++ skills are very "rusty", so I'm hoping I can get away with
> explaining my problem with some Rust code that is pretty close to being 1:1
> with the C API. My suspicion is I'm missing a step in the `GDALWarpOptions`
> setup.
>
> This is the CLI operation I'm trying to replicate:
>
>     gdalwarp -t_srs EPSG:4269 -dstnodata 255 -r near input.tif output.tif
>
> Here's the bare-bones Rust bindgen version:
>
>     <https://gist.github.com/metasim/d2a288d5b6126438aaa84b9e95707aff>
>
> The single band in `input.tif` is described by `gdalinfo` like this:
>
>     Band 1 Block=186x44 Type=Byte, ColorInterp=Gray
>       NoData Value=255
>       Metadata:
>         CLASSES=3
>
> After running the Rust code, the results are correct (including Warp
> numerically respecting source and destination no-data values) _except_
> `output.tif` does not have a no-data value in the band metadata. Here's
> what `gdalinfo` on `output.tif` shows:
>
>     Band 1 Block=210x39 Type=Byte, ColorInterp=Gray
>
> The only way I've been able to get the behavior I need is to open the
> written dataset from the filesystem and set the no-data value explicitly in
> the band, which is inefficient and awkward. Given the CLI version does the
> right thing, it's obviously possible. I've spent several hours visually
> inspecting the C++ source code, but the CLI version doesn't call
> `GDALCreateAndReprojectImage` directly; rather it constructs the Warp
> pipeline itself.
>
> Anyone have tips that might help me run this down? Am I missing a no-data
> handling step required when working with Warp routines? Could
> `GDALCreateAndReprojectImage` have a bug?
>
> Thanks,
>
> Simeon
>
> --
> Simeon Fitch
> Co-founder & CTO
> Astraea, Inc.
>
>
> The content of this email is intended for the person or entity to which it
> is addressed only. This email may contain confidential information. If you
> are not the person to whom this message is addressed, be aware that any
> use, reproduction, or distribution of this message is strictly prohibited.
> If you received this in error, please contact the sender and immediately
> delete this email and any attachments.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231103/e0d6ac74/attachment.htm>

From even.rouault at spatialys.com  Fri Nov  3 16:02:55 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 4 Nov 2023 00:02:55 +0100
Subject: [gdal-dev] Advice on `GDALCreateAndReprojectImage` and
 destination no-data value.
In-Reply-To: <CAAsstvGKjCZiF-HXAhCicDUpN9jn1o=MZviq1GR2ai831bromQ@mail.gmail.com>
References: <CAAsstvGKjCZiF-HXAhCicDUpN9jn1o=MZviq1GR2ai831bromQ@mail.gmail.com>
Message-ID: <51d4ba0c-0d6b-47bf-8067-7c1ab343d32b@spatialys.com>

Simeon,
> ? ? Band 1 Block=210x39 Type=Byte, ColorInterp=Gray
>
> The only?way I've been able to get the behavior I need is to open the 
> written dataset from the filesystem and set the no-data value 
> explicitly in the band, which is inefficient and awkward.

You don't have much alternative than doing that if you use 
GDALCreateAndReprojectImage(). But GDALCreateAndReprojectImage() is a 
"simplistic" warp API that doesn't have all the bells and whistles of 
what gdalwarp lib. You could potentially submit a patch to 
GDALCreateAndReprojectImage() to set the nodata value, which would be 
reasonable, but perhaps you could just bind the GDALWarp() C function 
that is the heart of the gdalwarp binary. You'd get all the advanced 
heuristics of gdalwarp that you don't get with the less advanced warp 
functions.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From fitch at astraea.io  Sat Nov  4 04:41:59 2023
From: fitch at astraea.io (Fitch, Simeon)
Date: Sat, 4 Nov 2023 07:41:59 -0400
Subject: [gdal-dev] Advice on `GDALCreateAndReprojectImage` and
 destination no-data value.
In-Reply-To: <51d4ba0c-0d6b-47bf-8067-7c1ab343d32b@spatialys.com>
References: <CAAsstvGKjCZiF-HXAhCicDUpN9jn1o=MZviq1GR2ai831bromQ@mail.gmail.com>
 <51d4ba0c-0d6b-47bf-8067-7c1ab343d32b@spatialys.com>
Message-ID: <CAAsstvFCHRe+89VZ0EgE66Sdhv+rDTs6UkDONd3MNpbJQFNstw@mail.gmail.com>

Thanks Even & Javier!  Very helpful advice! Much appreciated.

Simeon

On Fri, Nov 3, 2023 at 7:02?PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Simeon,
> >     Band 1 Block=210x39 Type=Byte, ColorInterp=Gray
> >
> > The only way I've been able to get the behavior I need is to open the
> > written dataset from the filesystem and set the no-data value
> > explicitly in the band, which is inefficient and awkward.
>
> You don't have much alternative than doing that if you use
> GDALCreateAndReprojectImage(). But GDALCreateAndReprojectImage() is a
> "simplistic" warp API that doesn't have all the bells and whistles of
> what gdalwarp lib. You could potentially submit a patch to
> GDALCreateAndReprojectImage() to set the nodata value, which would be
> reasonable, but perhaps you could just bind the GDALWarp() C function
> that is the heart of the gdalwarp binary. You'd get all the advanced
> heuristics of gdalwarp that you don't get with the less advanced warp
> functions.
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
>

-- 
The content of this email is intended for the person or entity to which it 
is addressed only. This email may contain confidential information. If you 
are not the person to whom this message is addressed, be aware that any 
use, reproduction, or distribution of this message is strictly prohibited. 
If you received this in error, please contact the sender and immediately 
delete this email and any attachments.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231104/e6d9e051/attachment.htm>

From nagyrobi_r at yahoo.com  Sun Nov  5 03:36:31 2023
From: nagyrobi_r at yahoo.com (nagyrobi_r at yahoo.com)
Date: Sun, 5 Nov 2023 11:36:31 +0000 (UTC)
Subject: [gdal-dev] Docker Opensearch
References: <1929456032.1827286.1699184191785.ref@mail.yahoo.com>
Message-ID: <1929456032.1827286.1699184191785@mail.yahoo.com>

Hi All!

Has anybody managed to make Opensearch work with GDAL? I tried using the steps used in the GDAL documentation under Elasticsearch but i can't manage to make it work.

I am using the following setup:
A docker container for Opensearch deployed as follows:

# Disable memory paging and swapping.
sudo swapoff -a
# Edit the sysctl config file that defines the host's max map count.
 sudo vim /etc/sysctl.conf
# Set max map count to the recommended value of 262144.
vm.max_map_count=262144
# Reload the kernel parameters.
 sudo sysctl -p
#Deploy in docker
docker pull opensearchproject/opensearch:latest
docker run -d -p 9200:9200 -p 9600:9600 -e "discovery.type=single-node" opensearchproject/opensearch:latest
# Disable security
# Go into the container using docker exec -it -u 0 "containername/no" bash
# run the following:?
# dnf update
# dnf install vim
#Delete the?plugins/opensearch-security?folder on all nodes.
# rm -rf plugins/opensearch-security
# vim config/opensearch.yaml
# save and exit
#Delete all?plugins.security.*?configuration entries from?opensearch.yml.

At this point in time there is no security on opensearch
using gdal 3.7.2 on ubuntu if i run:
ogrinfo ES:http://example.com:9200
i get some errors regarding handlers.

If i try uploading the same way i would try with elasticsearch:

1.?ogr2ogr -lco INDEX_NAME=gdal-data -lco NOT_ANALYZED_FIELDS={ALL} -lco WRITE_MAPPING=./mapping.json ES:http://localhost:9200 my_shapefile.shp

2.?ogr2ogr -lco INDEX_NAME=gdal-data -lco OVERWRITE_INDEX=YES -lco MAPPING=./mapping.json ES:http://localhost:9200 my_shapefile.shp

I get again an error regarding handlers again.
If i run the steps on a normal elasticsearch instance they work like a charm.


I would be very glad if somebody could help.

Kind regards,
Robert Nagy



From naima.etienne at gmail.com  Sun Nov  5 07:35:13 2023
From: naima.etienne at gmail.com (Naima Dambrine)
Date: Sun, 5 Nov 2023 16:35:13 +0100
Subject: [gdal-dev] oblique cuts on a raster using python GDAL
Message-ID: <CAOHmAia+=2wach=vj_e=0kEvWU2AZo02qohaWVjE4B4d1feKRw@mail.gmail.com>

Hi ,

I have problems with oblique cuts on a raster using python GDAL (3.6.2)

- with this line i obtain black borders around :
gdal.warp('raster-dst' , raster-src', cutLineDSName='geometry-extraction.shp',
cropToCutline=True)

- with this one, the crop is not clean on closer inspection: residual black
pixels around image and white pixels appear in the image.
gdal. warp( 'raster-dst' , raster-src',
cutLineDSName='geometry-extraction.shp',
cropToCutline=True, copyMetaData=True, dstNodata=0)

I tried, without success, to refine with outputBounds=[minX, maxX, minY,
maxY], under QGIS directly ?.
I've run out of ideas :/
A (naive) question comes to mind: Is it possible to make oblique cuts with
gdal.warp() & co?

Na?ma
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231105/bd754406/attachment.htm>

From public at postholer.com  Sun Nov  5 09:35:51 2023
From: public at postholer.com (Scott)
Date: Sun, 5 Nov 2023 09:35:51 -0800
Subject: [gdal-dev] Segfault with ogr2ogr and Parquet
In-Reply-To: <CAOHmAia+=2wach=vj_e=0kEvWU2AZo02qohaWVjE4B4d1feKRw@mail.gmail.com>
References: <CAOHmAia+=2wach=vj_e=0kEvWU2AZo02qohaWVjE4B4d1feKRw@mail.gmail.com>
Message-ID: <b57df54a-89c6-4bd3-99e2-f5c681cb23e8@postholer.com>

On debian 10 linux, using gdal 3.7.1 or 3.8beta, built with apache arrow 
12.0, I get a segfault immediately after running either of these commands:

ogr2ogr tst.gpkg 
PARQUET:"/vsicurl/https://overturemapswestus2.blob.core.windows.net/release/2023-10-19-alpha.0/theme=admins"

ogr2ogr tst.gpkg 
/vsis3/overturemaps-us-west-2/release/2023-10-19-alpha.0/theme=admins

I appreciate your help!
Scott

From jukka.rahkonen at maanmittauslaitos.fi  Sun Nov  5 10:43:20 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Sun, 5 Nov 2023 18:43:20 +0000
Subject: [gdal-dev] oblique cuts on a raster using python GDAL
In-Reply-To: <CAOHmAia+=2wach=vj_e=0kEvWU2AZo02qohaWVjE4B4d1feKRw@mail.gmail.com>
References: <CAOHmAia+=2wach=vj_e=0kEvWU2AZo02qohaWVjE4B4d1feKRw@mail.gmail.com>
Message-ID: <AM0PR09MB321946742982233B38C84C75FDABA@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

Please add gdalinfo of the source image. Even better if you can share the image.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Naima Dambrine via gdal-dev
L?hetetty: sunnuntai 5. marraskuuta 2023 17.35
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] oblique cuts on a raster using python GDAL

Hi ,

I have problems with oblique cuts on a raster using python GDAL (3.6.2)

- with this line i obtain black borders around :
gdal.warp('raster-dst' , raster-src', cutLineDSName='geometry-extraction.shp', cropToCutline=True)

- with this one, the crop is not clean on closer inspection: residual black pixels around image and white pixels appear in the image.
gdal. warp( 'raster-dst' , raster-src', cutLineDSName='geometry-extraction.shp', cropToCutline=True, copyMetaData=True, dstNodata=0)

I tried, without success, to refine with outputBounds=[minX, maxX, minY, maxY], under QGIS directly ?.
I've run out of ideas :/
A (naive) question comes to mind: Is it possible to make oblique cuts with gdal.warp() & co?
Na?ma
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231105/977e5f56/attachment-0001.htm>

From public at postholer.com  Sun Nov  5 10:57:17 2023
From: public at postholer.com (Scott)
Date: Sun, 5 Nov 2023 10:57:17 -0800
Subject: [gdal-dev] Segfault with ogr2ogr and Parquet
In-Reply-To: <b57df54a-89c6-4bd3-99e2-f5c681cb23e8@postholer.com>
References: <CAOHmAia+=2wach=vj_e=0kEvWU2AZo02qohaWVjE4B4d1feKRw@mail.gmail.com>
 <b57df54a-89c6-4bd3-99e2-f5c681cb23e8@postholer.com>
Message-ID: <880648c3-b69a-4c85-b602-dbe2b43efad3@postholer.com>

Check that. This is only on 3.8beta. Apologies.

On 11/5/23 09:35, Scott via gdal-dev wrote:
> On debian 10 linux, using gdal 3.7.1 or 3.8beta, built with apache arrow 
> 12.0, I get a segfault immediately after running either of these commands:
> 
> ogr2ogr tst.gpkg 
> PARQUET:"/vsicurl/https://overturemapswestus2.blob.core.windows.net/release/2023-10-19-alpha.0/theme=admins"
> 
> ogr2ogr tst.gpkg 
> /vsis3/overturemaps-us-west-2/release/2023-10-19-alpha.0/theme=admins
> 
> I appreciate your help!
> Scott
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Sun Nov  5 13:26:06 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 5 Nov 2023 22:26:06 +0100
Subject: [gdal-dev] Segfault with ogr2ogr and Parquet
In-Reply-To: <880648c3-b69a-4c85-b602-dbe2b43efad3@postholer.com>
References: <CAOHmAia+=2wach=vj_e=0kEvWU2AZo02qohaWVjE4B4d1feKRw@mail.gmail.com>
 <b57df54a-89c6-4bd3-99e2-f5c681cb23e8@postholer.com>
 <880648c3-b69a-4c85-b602-dbe2b43efad3@postholer.com>
Message-ID: <825a9199-05f5-4501-9f56-6f9e85d4a624@spatialys.com>

Scott,

I don't reproduce anymore on master, and I strongly suspect this is the 
same issue as 
https://lists.osgeo.org/pipermail/gdal-dev/2023-November/057856.html 
which I fixed post-beta1

Even

Le 05/11/2023 ? 19:57, Scott via gdal-dev a ?crit?:
> ogr2ogr tst.gpkg 
> PARQUET:"/vsicurl/https://overturemapswestus2.blob.core.windows.net/release/2023-10-19-alpha.0/theme=admins" 
>

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From public at postholer.com  Sun Nov  5 21:33:26 2023
From: public at postholer.com (Scott)
Date: Sun, 5 Nov 2023 21:33:26 -0800
Subject: [gdal-dev] Segfault with ogr2ogr and Parquet
In-Reply-To: <825a9199-05f5-4501-9f56-6f9e85d4a624@spatialys.com>
References: <CAOHmAia+=2wach=vj_e=0kEvWU2AZo02qohaWVjE4B4d1feKRw@mail.gmail.com>
 <b57df54a-89c6-4bd3-99e2-f5c681cb23e8@postholer.com>
 <880648c3-b69a-4c85-b602-dbe2b43efad3@postholer.com>
 <825a9199-05f5-4501-9f56-6f9e85d4a624@spatialys.com>
Message-ID: <6d98fb78-dc15-4e8d-b955-ea9b8867ca1a@postholer.com>

Thanks for the info Even!

On 11/5/23 13:26, Even Rouault wrote:
> Scott,
> 
> I don't reproduce anymore on master, and I strongly suspect this is the 
> same issue as 
> https://lists.osgeo.org/pipermail/gdal-dev/2023-November/057856.html 
> which I fixed post-beta1
> 
> Even
> 
> Le 05/11/2023 ? 19:57, Scott via gdal-dev a ?crit?:
>> ogr2ogr tst.gpkg 
>> PARQUET:"/vsicurl/https://overturemapswestus2.blob.core.windows.net/release/2023-10-19-alpha.0/theme=admins"
> 

From naima.etienne at gmail.com  Mon Nov  6 00:29:58 2023
From: naima.etienne at gmail.com (Naima Dambrine (via Google Drive))
Date: Mon, 06 Nov 2023 08:29:58 +0000
Subject: [gdal-dev] Folder shared with you: "Partage"
References: <59b94229-9066-4629-a695-c804699ec48c@docs-share.google.com>
Message-ID: <autogen-java-7b7a851f-0660-494c-836c-2ecd09ef5293@google.com>

I've shared an item with you:

Partage
https://drive.google.com/drive/folders/1wTFicbuB9jWQD-7qACjzIJ0qEeTH1OGZ?usp=sharing&invite=CIaU2tkC&ts=6548a406

It's not an attachment -- it's stored online. To open this item, just click  
the link above.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231106/02cf8b0e/attachment.htm>

From naima.etienne at gmail.com  Mon Nov  6 00:30:58 2023
From: naima.etienne at gmail.com (Naima Dambrine (via Google Drive))
Date: Mon, 06 Nov 2023 08:30:58 +0000
Subject: [gdal-dev] Folder shared with you: "Partage"
References: <ee9e3468-bb5b-49ca-86a9-340781c3049d@docs-share.google.com>
Message-ID: <autogen-java-c99d8ac2-ff4d-481f-893d-2d647b07a88b@google.com>

I've shared an item with you:

Partage
https://drive.google.com/drive/folders/1wTFicbuB9jWQD-7qACjzIJ0qEeTH1OGZ?usp=sharing&invite=CIaU2tkC&ts=6548a442

It's not an attachment -- it's stored online. To open this item, just click  
the link above.

Share Raster image and geometry for oblique cut
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231106/c760b1d8/attachment.htm>

From johannespaul92 at gmail.com  Mon Nov  6 00:42:53 2023
From: johannespaul92 at gmail.com (Johannes Paul)
Date: Mon, 6 Nov 2023 09:42:53 +0100
Subject: [gdal-dev] GDAL 2.4.4 compilation fails with pdfium
Message-ID: <CACcmK9aQnYt3nRT2dRyPxpcHUaeNzqjg5TbaQQQdF4RrxW4XWQ@mail.gmail.com>

Hello,

I've been trying to compile GDAL 2.4.4 on Centos7 with pdfium unfortunately
it fails with the following ld errors:
libgdal.so: undefined reference to `CFDF_Document::CreateNewDoc()'
libgdal.so: undefined reference to `CPDF_Document::AddStandardFont(char
const*, CPDF_FontEncoding*)'

PDFium has been compiled from https://github.com/rouault/pdfium using the
proposed build script for linux
https://github.com/rouault/pdfium/blob/build/build-lin.sh.

Has anyone experienced similar issues compiling GDAL with pdfium ?

Thanks for your help,
Johannes
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231106/7dd22c61/attachment-0001.htm>

From naima.etienne at gmail.com  Mon Nov  6 01:47:54 2023
From: naima.etienne at gmail.com (Naima Dambrine)
Date: Mon, 6 Nov 2023 10:47:54 +0100
Subject: [gdal-dev] oblique cuts on a raster using python GDAL
Message-ID: <CAOHmAiY0ELZM0JX69mxxBu4esp5gzbj=4P+-K7Qwg4JLS_1qYA@mail.gmail.com>

HI,

i do not know if you receive my precedent attachments, so my apologies if
so.

here is a shared link for original image and geometry extraction
Thank you,


 Partage
<https://drive.google.com/drive/folders/1wTFicbuB9jWQD-7qACjzIJ0qEeTH1OGZ>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231106/ee8147e0/attachment.htm>

From j1 at jimenezshaw.com  Mon Nov  6 02:33:04 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 6 Nov 2023 11:33:04 +0100
Subject: [gdal-dev] oblique cuts on a raster using python GDAL
In-Reply-To: <AM0PR09MB321946742982233B38C84C75FDABA@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <CAOHmAia+=2wach=vj_e=0kEvWU2AZo02qohaWVjE4B4d1feKRw@mail.gmail.com>
 <AM0PR09MB321946742982233B38C84C75FDABA@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <CADRrdKsMs8Hou7TyWeGw-ioNUo0HkH3hTMEjsfdeK7=WF5Rt-Q@mail.gmail.com>

Hi Naima

I have been testing with your dataset. To me, using the GDAL in Ubuntu
22.04 (3.4.1) seems to be a problem with the JP2 output format. If you
output as geotiff it works fine.

On Sun, 5 Nov 2023 at 19:43, Rahkonen Jukka via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
>
>
> Please add gdalinfo of the source image. Even better if you can share the
> image.
>
>
>
> -Jukka Rahkonen-
>
>
>
> *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta *Naima
> Dambrine via gdal-dev
> *L?hetetty:* sunnuntai 5. marraskuuta 2023 17.35
> *Vastaanottaja:* gdal-dev at lists.osgeo.org
> *Aihe:* [gdal-dev] oblique cuts on a raster using python GDAL
>
>
>
> Hi ,
>
>
>
> I have problems with oblique cuts on a raster using python GDAL (3.6.2)
>
>
>
> - with this line i obtain black borders around :
>
> gdal.warp('raster-dst' , raster-src',
> cutLineDSName='geometry-extraction.shp', cropToCutline=True)
>
>
>
> - with this one, the crop is not clean on closer inspection: residual
> black pixels around image and white pixels appear in the image.
>
> gdal. warp( 'raster-dst' , raster-src',
> cutLineDSName='geometry-extraction.shp', cropToCutline=True,
> copyMetaData=True, dstNodata=0)
>
>
> I tried, without success, to refine with outputBounds=[minX, maxX, minY,
> maxY], under QGIS directly ?.
> I've run out of ideas :/
> A (naive) question comes to mind: Is it possible to make oblique cuts with
> gdal.warp() & co?
>
> Na?ma
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231106/b11ac818/attachment.htm>

From even.rouault at spatialys.com  Mon Nov  6 02:49:09 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 6 Nov 2023 11:49:09 +0100
Subject: [gdal-dev] GDAL 3.8.0 rc1 is available
Message-ID: <c3162e6e-993a-4457-b945-1b8be8d0cb9a@spatialys.com>

Hi,

I have prepared a GDAL/OGR 3.8.0 release candidate.

NEWS at:

 ? https://github.com/OSGeo/gdal/blob/v3.8.0RC1/NEWS.md

(small change in it since the initial version I mentioned last week:
there is a new optional dependency: libaec, needed for some GRIB files)

Pick up an archive among the following ones (by ascending size):

 ? https://download.osgeo.org/gdal/3.8.0/gdal-3.8.0rc1.tar.xz
 ? https://download.osgeo.org/gdal/3.8.0/gdal-3.8.0rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.8.0/gdal380rc1.zip

A snapshot of the gdalautotest suite is also available :

https://download.osgeo.org/gdal/3.8.0/gdalautotest-3.8.0rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.8.0/gdalautotest-3.8.0rc1.zip

A snapshot of the documentation is at:

 ? https://download.osgeo.org/gdal/3.8.0/gdal380doc.zip

I'll call for a vote promoting it later this week if no serious problems 
are reported before.

The "release/3.8" branch has been created for all bug fixes related to 
3.8.x.
master is now targeting 3.9.0dev.

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From stijn+gdal-dev at strict.be  Mon Nov  6 04:51:52 2023
From: stijn+gdal-dev at strict.be (Stijn Tallir)
Date: Mon, 6 Nov 2023 13:51:52 +0100
Subject: [gdal-dev] tps - gdalwarp vs ogr2ogr
In-Reply-To: <CAKadDxtf4d-qb1KAFJE7k74khF05+QLgDa7DunHCHwQgtTs7Bw@mail.gmail.com>
References: <CAKadDxvOySAyTZpQTrW4iGVEPZcGOP0sGR+r8TMDo0gKLuEXZg@mail.gmail.com>
 <AM0PR09MB32198CC1783B683BF77E07C8FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAKadDxuV_6TLqDfX0S-3eWpvD2tZ62tpUFdusu4jEfFLpUR4eQ@mail.gmail.com>
 <AM0PR09MB32194542EA59601B78D52766FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAKadDxtf4d-qb1KAFJE7k74khF05+QLgDa7DunHCHwQgtTs7Bw@mail.gmail.com>
Message-ID: <CAKadDxvCYXuK+4VfWOwHayuUFKBvQ9KHHV9utExLi=jQ0OZdGA@mail.gmail.com>

Hi Jukka,

I finally found the time to produce a test set.

You can download it here:
https://drive.google.com/file/d/1Y08Q-tIm5dxyKFKNdVqilvAO3H7FFFbx/view?usp=sharing

I started from an unreferenced raster file (raster2tps.tif) with gcp's
(gcp4tps.gcp) and transformed it with tps (tpsraster.tif).
Then polygonized the unreferenced raster file (vector2tps.shp) and
transformed the result with  the same gcp's (gcp4tps.gcp) and with tps
(tpsvector.shp).

The vector2tps.shp polygons are "flipped" because of the different Y-origin
for rasters and vectors but this way both datasets can use the exact same
gcp's.

When you lay the tpsvector-result on top of the tpsraster-result (in QGis
for instance) you'll see the differences in how both are transformed.

Kind regards,

Stijn

Op wo 16 aug 2023 om 13:16 schreef Stijn Tallir <stijn+gdal-dev at strict.be>:

> Yes, I checked them visually for both raster and vector.
>
> I compared the results also visually. The rasters are transformed in a way
> that the end ponts of the gcp's align exactly with the result so that is
> why I referred to it as "right". The vector data result is in the
> neighbourhood of the end points (sometimes a rather significant distance).
>
> The result is different from order 1-3 transformations so I presume the
> tps option isn't ignored.
>
> Stijn
>
> Op wo 16 aug 2023 om 11:52 schreef Rahkonen Jukka <
> jukka.rahkonen at maanmittauslaitos.fi>:
>
>> Hi,
>>
>>
>>
>> Did you check the ground control points? What is your reference when you
>> say that one result is right, and another wrong? Have you used some other
>> software for comparison? Or do you only know that the results are different?
>>
>>
>>
>> -Jukka-
>>
>>
>>
>> *L?hett?j?:* Stijn Tallir <stijn at strict.be>
>> *L?hetetty:* keskiviikko 16. elokuuta 2023 12.27
>> *Vastaanottaja:* Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
>> *Kopio:* gdal-dev at lists.osgeo.org
>> *Aihe:* Re: [gdal-dev] tps - gdalwarp vs ogr2ogr
>>
>>
>>
>> Hi Jukka,
>>
>>
>>
>> I thought of the density as an option for the "error" as you suggested
>> and I made a point-file with a point for every pixel in my original image
>> and used this as a source for the ogr2ogr transformation. So you could say
>> the desnity for both sources raster and vector) are then alike.
>>
>>
>>
>> The results were still the same (and wrong) ...
>>
>>
>>
>> Stijn
>>
>>
>>
>>
>>
>> Op wo 16 aug 2023 om 10:22 schreef Rahkonen Jukka <
>> jukka.rahkonen at maanmittauslaitos.fi>:
>>
>> Hi,
>>
>>
>>
>> Without test data it is very hard to say much. I believe that the promise
>> of tps is that the ground control points stay where they are set. The
>> intermediate points follow the least tension surfaces and I do not know how
>> exactly those spline algorithms are defined. Raster data is full of points
>> to warp but probably in the vector data the transformation is done vertex
>> by vertex. I would first check if the GCPs are in the same place in both
>> outputs. Then I would make a test by densifying the vector data before
>> georeferencing to have much more vertices and see if it has any effect on
>> the result.
>>
>>
>>
>> -Jukka Rahkonen-
>>
>>
>>
>> *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta *Stijn
>> Tallir
>> *L?hetetty:* keskiviikko 16. elokuuta 2023 10.29
>> *Vastaanottaja:* gdal-dev at lists.osgeo.org
>> *Aihe:* [gdal-dev] tps - gdalwarp vs ogr2ogr
>>
>>
>>
>> Hi,
>>
>>
>>
>> According to the documentation gdal and ogr use the same algorithm for
>> the tps-transformation but I don't seem to get the same results using the
>> same set of gcp's for images and vectors.
>>
>>
>>
>> I have images that are unreferenced and vector data digitised on these
>> images (in pixel coordinates).
>>
>>
>>
>> The images are then georeferenced with +100 gcp's and warped with
>> gdalwarp using the "tps" option.
>>
>>
>>
>> When I use the same gcp's (with adjusted y-origin to lower left corner)
>> to georeference the vector data with ogr2ogr and the "tps" option I get
>> different results. The vector-result is similar to the image-result but
>> never exactly the same and differences can be substantial.
>>
>>
>>
>> Any thoughts?
>>
>>
>>
>> Stijn
>>
>>
>>
>>
>> --
>>
>> Stijn Tallir - StrICT BV
>>
>>
>>
>> Wijnveld 8
>>
>> 9112 Sinaai-Waas
>>
>>
>>
>> GSM: 0486 750220
>>
>>
>>
>> E-mail: Info at strict.be
>>
>> Web: www.strict.be
>>
>>
>>
>> BTW: BE 0567.559.668
>>
>>
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231106/0d3ca780/attachment-0001.htm>

From j1 at jimenezshaw.com  Mon Nov  6 05:05:04 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 6 Nov 2023 14:05:04 +0100
Subject: [gdal-dev] oblique cuts on a raster using python GDAL
In-Reply-To: <CAOHmAiZtV-xA5N-i-OoGTQBMQrmcuik2iwqoFxU96zntRhb_8w@mail.gmail.com>
References: <CAOHmAia+=2wach=vj_e=0kEvWU2AZo02qohaWVjE4B4d1feKRw@mail.gmail.com>
 <AM0PR09MB321946742982233B38C84C75FDABA@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CADRrdKsMs8Hou7TyWeGw-ioNUo0HkH3hTMEjsfdeK7=WF5Rt-Q@mail.gmail.com>
 <CAOHmAiZtV-xA5N-i-OoGTQBMQrmcuik2iwqoFxU96zntRhb_8w@mail.gmail.com>
Message-ID: <CADRrdKtGSo4r4FSW4+Ch+JgQype4amcM6eUaG-GKYttfAYZw1Q@mail.gmail.com>

This is working for me (and also in gdal 3.8.0):

gdalwarp 3635_rasters_agreges.jp2 salida.tif -cutline
geometry_extraction.shp -crop_to_cutline -dstnodata 0 -cl
geometry_extraction -overwrite -of GTiff

About the "white" pixels inside the image, it could be that a single band
has a value of 0 (not that strange). Then it is transparent, and you see
the background color. (to avoid those "color misunderstandings" I have a
pink background color, that is not white).

On Mon, 6 Nov 2023 at 12:35, Naima Dambrine <naima.etienne at gmail.com> wrote:

> Hi Javier,
>
> Thank you, good news ...
>
> I'm on Ubuntu 20.04 with gdal 3.6.2. Yes, the original raster format is
> JP2, but my output format is GTiff. Here is exactly what I do :
>
> cut_ds = gdal.Warp(outfile, jp2_ds, format='GTiff',
> cutlineDCName=shape_file_path,
> cropToCutline=True,
> copyMetadat=True,
> dstNodata=0)
>
> What I see is that there are still black pixels around the image, as well
> as white pixels inside the image.
> Another point to consider is that, despite the use of compression, the
> output file is 75.3 MB, compared with around 14 MB with a JP2 format. Why
> is this?
>
> my output :
>
>
>
>
> Le lun. 6 nov. 2023 ? 11:33, Javier Jimenez Shaw <j1 at jimenezshaw.com> a
> ?crit :
>
>> Hi Naima
>>
>> I have been testing with your dataset. To me, using the GDAL in Ubuntu
>> 22.04 (3.4.1) seems to be a problem with the JP2 output format. If you
>> output as geotiff it works fine.
>>
>> On Sun, 5 Nov 2023 at 19:43, Rahkonen Jukka via gdal-dev <
>> gdal-dev at lists.osgeo.org> wrote:
>>
>>> Hi,
>>>
>>>
>>>
>>> Please add gdalinfo of the source image. Even better if you can share
>>> the image.
>>>
>>>
>>>
>>> -Jukka Rahkonen-
>>>
>>>
>>>
>>> *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta *Naima
>>> Dambrine via gdal-dev
>>> *L?hetetty:* sunnuntai 5. marraskuuta 2023 17.35
>>> *Vastaanottaja:* gdal-dev at lists.osgeo.org
>>> *Aihe:* [gdal-dev] oblique cuts on a raster using python GDAL
>>>
>>>
>>>
>>> Hi ,
>>>
>>>
>>>
>>> I have problems with oblique cuts on a raster using python GDAL (3.6.2)
>>>
>>>
>>>
>>> - with this line i obtain black borders around :
>>>
>>> gdal.warp('raster-dst' , raster-src',
>>> cutLineDSName='geometry-extraction.shp', cropToCutline=True)
>>>
>>>
>>>
>>> - with this one, the crop is not clean on closer inspection: residual
>>> black pixels around image and white pixels appear in the image.
>>>
>>> gdal. warp( 'raster-dst' , raster-src',
>>> cutLineDSName='geometry-extraction.shp', cropToCutline=True,
>>> copyMetaData=True, dstNodata=0)
>>>
>>>
>>> I tried, without success, to refine with outputBounds=[minX, maxX, minY,
>>> maxY], under QGIS directly ?.
>>> I've run out of ideas :/
>>> A (naive) question comes to mind: Is it possible to make oblique cuts
>>> with gdal.warp() & co?
>>>
>>> Na?ma
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231106/34aab626/attachment.htm>

From j1 at jimenezshaw.com  Mon Nov  6 05:18:13 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 6 Nov 2023 14:18:13 +0100
Subject: [gdal-dev] oblique cuts on a raster using python GDAL
In-Reply-To: <CADRrdKtGSo4r4FSW4+Ch+JgQype4amcM6eUaG-GKYttfAYZw1Q@mail.gmail.com>
References: <CAOHmAia+=2wach=vj_e=0kEvWU2AZo02qohaWVjE4B4d1feKRw@mail.gmail.com>
 <AM0PR09MB321946742982233B38C84C75FDABA@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CADRrdKsMs8Hou7TyWeGw-ioNUo0HkH3hTMEjsfdeK7=WF5Rt-Q@mail.gmail.com>
 <CAOHmAiZtV-xA5N-i-OoGTQBMQrmcuik2iwqoFxU96zntRhb_8w@mail.gmail.com>
 <CADRrdKtGSo4r4FSW4+Ch+JgQype4amcM6eUaG-GKYttfAYZw1Q@mail.gmail.com>
Message-ID: <CADRrdKssch4DojXitVQSkbYWinvtdSWmEDrj2H8k3NKYWs5XYg@mail.gmail.com>

This is producing something nicer, without those "white pixels". It is
adding an alpha band:
gdalwarp 3635_rasters_agreges.jp2 salida.jp2 -cutline
geometry_extraction.shp -crop_to_cutline -cl geometry_extraction -overwrite
-dstalpha

On Mon, 6 Nov 2023 at 14:05, Javier Jimenez Shaw <j1 at jimenezshaw.com> wrote:

> This is working for me (and also in gdal 3.8.0):
>
> gdalwarp 3635_rasters_agreges.jp2 salida.tif -cutline
> geometry_extraction.shp -crop_to_cutline -dstnodata 0 -cl
> geometry_extraction -overwrite -of GTiff
>
> About the "white" pixels inside the image, it could be that a single band
> has a value of 0 (not that strange). Then it is transparent, and you see
> the background color. (to avoid those "color misunderstandings" I have a
> pink background color, that is not white).
>
> On Mon, 6 Nov 2023 at 12:35, Naima Dambrine <naima.etienne at gmail.com>
> wrote:
>
>> Hi Javier,
>>
>> Thank you, good news ...
>>
>> I'm on Ubuntu 20.04 with gdal 3.6.2. Yes, the original raster format is
>> JP2, but my output format is GTiff. Here is exactly what I do :
>>
>> cut_ds = gdal.Warp(outfile, jp2_ds, format='GTiff',
>> cutlineDCName=shape_file_path,
>> cropToCutline=True,
>> copyMetadat=True,
>> dstNodata=0)
>>
>> What I see is that there are still black pixels around the image, as well
>> as white pixels inside the image.
>> Another point to consider is that, despite the use of compression, the
>> output file is 75.3 MB, compared with around 14 MB with a JP2 format. Why
>> is this?
>>
>> my output :
>>
>>
>>
>>
>> Le lun. 6 nov. 2023 ? 11:33, Javier Jimenez Shaw <j1 at jimenezshaw.com> a
>> ?crit :
>>
>>> Hi Naima
>>>
>>> I have been testing with your dataset. To me, using the GDAL in Ubuntu
>>> 22.04 (3.4.1) seems to be a problem with the JP2 output format. If you
>>> output as geotiff it works fine.
>>>
>>> On Sun, 5 Nov 2023 at 19:43, Rahkonen Jukka via gdal-dev <
>>> gdal-dev at lists.osgeo.org> wrote:
>>>
>>>> Hi,
>>>>
>>>>
>>>>
>>>> Please add gdalinfo of the source image. Even better if you can share
>>>> the image.
>>>>
>>>>
>>>>
>>>> -Jukka Rahkonen-
>>>>
>>>>
>>>>
>>>> *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta *Naima
>>>> Dambrine via gdal-dev
>>>> *L?hetetty:* sunnuntai 5. marraskuuta 2023 17.35
>>>> *Vastaanottaja:* gdal-dev at lists.osgeo.org
>>>> *Aihe:* [gdal-dev] oblique cuts on a raster using python GDAL
>>>>
>>>>
>>>>
>>>> Hi ,
>>>>
>>>>
>>>>
>>>> I have problems with oblique cuts on a raster using python GDAL (3.6.2)
>>>>
>>>>
>>>>
>>>> - with this line i obtain black borders around :
>>>>
>>>> gdal.warp('raster-dst' , raster-src',
>>>> cutLineDSName='geometry-extraction.shp', cropToCutline=True)
>>>>
>>>>
>>>>
>>>> - with this one, the crop is not clean on closer inspection: residual
>>>> black pixels around image and white pixels appear in the image.
>>>>
>>>> gdal. warp( 'raster-dst' , raster-src',
>>>> cutLineDSName='geometry-extraction.shp', cropToCutline=True,
>>>> copyMetaData=True, dstNodata=0)
>>>>
>>>>
>>>> I tried, without success, to refine with outputBounds=[minX, maxX,
>>>> minY, maxY], under QGIS directly ?.
>>>> I've run out of ideas :/
>>>> A (naive) question comes to mind: Is it possible to make oblique cuts
>>>> with gdal.warp() & co?
>>>>
>>>> Na?ma
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231106/caaabe14/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Nov  6 05:48:14 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Mon, 6 Nov 2023 13:48:14 +0000
Subject: [gdal-dev] tps - gdalwarp vs ogr2ogr
In-Reply-To: <CAKadDxsFUU2W2-a-nde_ObtUjmyn9yCmqzHtS5u-Pf6LALqFDg@mail.gmail.com>
References: <CAKadDxvOySAyTZpQTrW4iGVEPZcGOP0sGR+r8TMDo0gKLuEXZg@mail.gmail.com>
 <AM0PR09MB32198CC1783B683BF77E07C8FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAKadDxuV_6TLqDfX0S-3eWpvD2tZ62tpUFdusu4jEfFLpUR4eQ@mail.gmail.com>
 <AM0PR09MB32194542EA59601B78D52766FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAKadDxtf4d-qb1KAFJE7k74khF05+QLgDa7DunHCHwQgtTs7Bw@mail.gmail.com>
 <CAKadDxsFUU2W2-a-nde_ObtUjmyn9yCmqzHtS5u-Pf6LALqFDg@mail.gmail.com>
Message-ID: <AM0PR09MB32195C1FD6894CC42B84D1B0FDAAA@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

See the issue https://github.com/OSGeo/gdal/issues/8572. Maybe your problem is also resolved by https://github.com/OSGeo/gdal/pull/8573. The fix is included in the GDAL 3.8 RC1 version that was released 3 hour ago. Do you have an option to make a test?

-Jukka Rahkonen-

L?hett?j?: Stijn Tallir <stijn at strict.be>
L?hetetty: maanantai 6. marraskuuta 2023 14.47
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
Kopio: gdal-dev at lists.osgeo.org
Aihe: Re: [gdal-dev] tps - gdalwarp vs ogr2ogr

Hi Jukka,

I finally found the time to produce a test set.

You can download it here: https://drive.google.com/file/d/1Y08Q-tIm5dxyKFKNdVqilvAO3H7FFFbx/view?usp=sharing

I started from an unreferenced raster file (raster2tps.tif) with gcp's (gcp4tps.gcp) and transformed it with tps (tpsraster.tif).
Then polygonized the unreferenced raster file (vector2tps.shp) and transformed the result with  the same gcp's (gcp4tps.gcp) and with tps (tpsvector.shp).

The vector2tps.shp polygons are "flipped" because of the different Y-origin for rasters and vectors but this way both datasets can use the exact same gcp's.

When you lay the tpsvector-result on top of the tpsraster-result (in QGis for instance) you'll see the differences in how both are transformed.

Kind regards,

Stijn



Op wo 16 aug 2023 om 13:16 schreef Stijn Tallir <stijn+gdal-dev at strict.be<mailto:stijn%2Bgdal-dev at strict.be>>:
Yes, I checked them visually for both raster and vector.

I compared the results also visually. The rasters are transformed in a way that the end ponts of the gcp's align exactly with the result so that is why I referred to it as "right". The vector data result is in the neighbourhood of the end points (sometimes a rather significant distance).

The result is different from order 1-3 transformations so I presume the tps option isn't ignored.

Stijn

Op wo 16 aug 2023 om 11:52 schreef Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>:
Hi,

Did you check the ground control points? What is your reference when you say that one result is right, and another wrong? Have you used some other software for comparison? Or do you only know that the results are different?

-Jukka-

L?hett?j?: Stijn Tallir <stijn at strict.be<mailto:stijn at strict.be>>
L?hetetty: keskiviikko 16. elokuuta 2023 12.27
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>
Kopio: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] tps - gdalwarp vs ogr2ogr

Hi Jukka,

I thought of the density as an option for the "error" as you suggested and I made a point-file with a point for every pixel in my original image and used this as a source for the ogr2ogr transformation. So you could say the desnity for both sources raster and vector) are then alike.

The results were still the same (and wrong) ...

Stijn


Op wo 16 aug 2023 om 10:22 schreef Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>:
Hi,

Without test data it is very hard to say much. I believe that the promise of tps is that the ground control points stay where they are set. The intermediate points follow the least tension surfaces and I do not know how exactly those spline algorithms are defined. Raster data is full of points to warp but probably in the vector data the transformation is done vertex by vertex. I would first check if the GCPs are in the same place in both outputs. Then I would make a test by densifying the vector data before georeferencing to have much more vertices and see if it has any effect on the result.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Stijn Tallir
L?hetetty: keskiviikko 16. elokuuta 2023 10.29
Vastaanottaja: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] tps - gdalwarp vs ogr2ogr

Hi,

According to the documentation gdal and ogr use the same algorithm for the tps-transformation but I don't seem to get the same results using the same set of gcp's for images and vectors.

I have images that are unreferenced and vector data digitised on these images (in pixel coordinates).

The images are then georeferenced with +100 gcp's and warped with gdalwarp using the "tps" option.

When I use the same gcp's (with adjusted y-origin to lower left corner) to georeference the vector data with ogr2ogr and the "tps" option I get different results. The vector-result is similar to the image-result but never exactly the same and differences can be substantial.

Any thoughts?

Stijn


--
Stijn Tallir - StrICT BV

Wijnveld 8
9112 Sinaai-Waas

GSM: 0486 750220

E-mail: Info at strict.be<mailto:Info at strict.be>
Web: www.strict.be<http://www.strict.be/>

BTW: BE 0567.559.668

[http://www.strict.be/strict_web2.jpg]


--
Stijn Tallir - StrICT BV

Wijnveld 8
9112 Sinaai-Waas

GSM: 0486 750220

E-mail: Info at strict.be<mailto:Info at strict.be>
Web: www.strict.be<http://www.strict.be/>

BTW: BE 0567.559.668

[http://www.strict.be/strict_web2.jpg]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231106/ceaf317d/attachment-0001.htm>

From even.rouault at spatialys.com  Mon Nov  6 05:50:25 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 6 Nov 2023 14:50:25 +0100
Subject: [gdal-dev] Call for review and discussion on RFC96: Deferred
 in-tree C++ plugin loading
In-Reply-To: <7004463d-3e6e-4084-a87b-1d66b8fc218f@spatialys.com>
References: <7004463d-3e6e-4084-a87b-1d66b8fc218f@spatialys.com>
Message-ID: <876e96b5-b416-4d0e-a997-0ca65d619ece@spatialys.com>

Hi,

I've revised a bit the RFC 
(https://github.com/OSGeo/gdal/pull/8648/commits/b7053db2f433275edf16286596e71f3ceb9738a5) 
to unify the way the plugin driver proxy and the actual driver declare 
their metadata. This avoids the new GDALPluginDriverFeatures class, and 
will limit the risk of omissions or inconsistencies between the proxy 
and actual drivers.

Even

Le 02/11/2023 ? 12:59, Even Rouault via gdal-dev a ?crit?:
> Hi,
>
> I'm seeking for feedback and review on a new RFC (RFC 96: Deferred 
> in-tree C++ plugin loading),
> detailed in https://github.com/OSGeo/gdal/pull/8648, whose summary is:
>
> This RFC adds a mechanism to defer the loading of in-tree C++ plugin 
> drivers to
> the point where their executable code is actually needed, and converts 
> a number
> of relevant drivers to use that mechanism. The aim is to allow for 
> more modular
> GDAL builds, while improving the performance of plugin loading.
>
> (This is material only for GDAL 3.9 of course)
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From stijn+gdal-dev at strict.be  Mon Nov  6 07:32:40 2023
From: stijn+gdal-dev at strict.be (Stijn Tallir)
Date: Mon, 6 Nov 2023 16:32:40 +0100
Subject: [gdal-dev] tps - gdalwarp vs ogr2ogr
In-Reply-To: <AM0PR09MB32195C1FD6894CC42B84D1B0FDAAA@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <CAKadDxvOySAyTZpQTrW4iGVEPZcGOP0sGR+r8TMDo0gKLuEXZg@mail.gmail.com>
 <AM0PR09MB32198CC1783B683BF77E07C8FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAKadDxuV_6TLqDfX0S-3eWpvD2tZ62tpUFdusu4jEfFLpUR4eQ@mail.gmail.com>
 <AM0PR09MB32194542EA59601B78D52766FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAKadDxtf4d-qb1KAFJE7k74khF05+QLgDa7DunHCHwQgtTs7Bw@mail.gmail.com>
 <CAKadDxsFUU2W2-a-nde_ObtUjmyn9yCmqzHtS5u-Pf6LALqFDg@mail.gmail.com>
 <AM0PR09MB32195C1FD6894CC42B84D1B0FDAAA@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <CAKadDxu3sofN-XfUNKBR_4PoO6GBUSUePHEfoHbGsmYHVZVoVQ@mail.gmail.com>

Hi,

Does that mean the old raster tps transformation was "wrong" or the old
vector transformation?

I'm doing a test and trying to transform my raster image with the latest
dev version in osgeo4W but it takes forever to process now. Don't know in
how many days I will see the result :(

The vector transformation with the latest dev version was the same (time
and result).

Stijn

Op ma 6 nov 2023 om 14:48 schreef Rahkonen Jukka <
jukka.rahkonen at maanmittauslaitos.fi>:

> Hi,
>
>
>
> See the issue https://github.com/OSGeo/gdal/issues/8572. Maybe your
> problem is also resolved by https://github.com/OSGeo/gdal/pull/8573. The
> fix is included in the GDAL 3.8 RC1 version that was released 3 hour ago.
> Do you have an option to make a test?
>
>
>
> -Jukka Rahkonen-
>
>
>
> *L?hett?j?:* Stijn Tallir <stijn at strict.be>
> *L?hetetty:* maanantai 6. marraskuuta 2023 14.47
> *Vastaanottaja:* Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
> *Kopio:* gdal-dev at lists.osgeo.org
> *Aihe:* Re: [gdal-dev] tps - gdalwarp vs ogr2ogr
>
>
>
> Hi Jukka,
>
>
>
> I finally found the time to produce a test set.
>
>
>
> You can download it here:
> https://drive.google.com/file/d/1Y08Q-tIm5dxyKFKNdVqilvAO3H7FFFbx/view?usp=sharing
>
>
>
> I started from an unreferenced raster file (raster2tps.tif) with gcp's
> (gcp4tps.gcp) and transformed it with tps (tpsraster.tif).
>
> Then polygonized the unreferenced raster file (vector2tps.shp) and
> transformed the result with  the same gcp's (gcp4tps.gcp) and with tps
> (tpsvector.shp).
>
>
>
> The vector2tps.shp polygons are "flipped" because of the different
> Y-origin for rasters and vectors but this way both datasets can use the
> exact same gcp's.
>
>
>
> When you lay the tpsvector-result on top of the tpsraster-result (in QGis
> for instance) you'll see the differences in how both are transformed.
>
>
>
> Kind regards,
>
>
>
> Stijn
>
>
>
>
>
>
>
> Op wo 16 aug 2023 om 13:16 schreef Stijn Tallir <stijn+gdal-dev at strict.be
> >:
>
> Yes, I checked them visually for both raster and vector.
>
>
>
> I compared the results also visually. The rasters are transformed in a way
> that the end ponts of the gcp's align exactly with the result so that is
> why I referred to it as "right". The vector data result is in the
> neighbourhood of the end points (sometimes a rather significant distance).
>
>
>
> The result is different from order 1-3 transformations so I presume the
> tps option isn't ignored.
>
>
>
> Stijn
>
>
>
> Op wo 16 aug 2023 om 11:52 schreef Rahkonen Jukka <
> jukka.rahkonen at maanmittauslaitos.fi>:
>
> Hi,
>
>
>
> Did you check the ground control points? What is your reference when you
> say that one result is right, and another wrong? Have you used some other
> software for comparison? Or do you only know that the results are different?
>
>
>
> -Jukka-
>
>
>
> *L?hett?j?:* Stijn Tallir <stijn at strict.be>
> *L?hetetty:* keskiviikko 16. elokuuta 2023 12.27
> *Vastaanottaja:* Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
> *Kopio:* gdal-dev at lists.osgeo.org
> *Aihe:* Re: [gdal-dev] tps - gdalwarp vs ogr2ogr
>
>
>
> Hi Jukka,
>
>
>
> I thought of the density as an option for the "error" as you suggested and
> I made a point-file with a point for every pixel in my original image and
> used this as a source for the ogr2ogr transformation. So you could say the
> desnity for both sources raster and vector) are then alike.
>
>
>
> The results were still the same (and wrong) ...
>
>
>
> Stijn
>
>
>
>
>
> Op wo 16 aug 2023 om 10:22 schreef Rahkonen Jukka <
> jukka.rahkonen at maanmittauslaitos.fi>:
>
> Hi,
>
>
>
> Without test data it is very hard to say much. I believe that the promise
> of tps is that the ground control points stay where they are set. The
> intermediate points follow the least tension surfaces and I do not know how
> exactly those spline algorithms are defined. Raster data is full of points
> to warp but probably in the vector data the transformation is done vertex
> by vertex. I would first check if the GCPs are in the same place in both
> outputs. Then I would make a test by densifying the vector data before
> georeferencing to have much more vertices and see if it has any effect on
> the result.
>
>
>
> -Jukka Rahkonen-
>
>
>
> *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta *Stijn
> Tallir
> *L?hetetty:* keskiviikko 16. elokuuta 2023 10.29
> *Vastaanottaja:* gdal-dev at lists.osgeo.org
> *Aihe:* [gdal-dev] tps - gdalwarp vs ogr2ogr
>
>
>
> Hi,
>
>
>
> According to the documentation gdal and ogr use the same algorithm for the
> tps-transformation but I don't seem to get the same results using the same
> set of gcp's for images and vectors.
>
>
>
> I have images that are unreferenced and vector data digitised on these
> images (in pixel coordinates).
>
>
>
> The images are then georeferenced with +100 gcp's and warped with gdalwarp
> using the "tps" option.
>
>
>
> When I use the same gcp's (with adjusted y-origin to lower left corner) to
> georeference the vector data with ogr2ogr and the "tps" option I get
> different results. The vector-result is similar to the image-result but
> never exactly the same and differences can be substantial.
>
>
>
> Any thoughts?
>
>
>
> Stijn
>
>
>
>
> --
>
> Stijn Tallir - StrICT BV
>
>
>
> Wijnveld 8
>
> 9112 Sinaai-Waas
>
>
>
> GSM: 0486 750220
>
>
>
> E-mail: Info at strict.be
>
> Web: www.strict.be
>
>
>
> BTW: BE 0567.559.668
>
>
>
>
>
>
> --
>
> Stijn Tallir - StrICT BV
>
>
>
> Wijnveld 8
>
> 9112 Sinaai-Waas
>
>
>
> GSM: 0486 750220
>
>
>
> E-mail: Info at strict.be
>
> Web: www.strict.be
>
>
>
> BTW: BE 0567.559.668
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231106/a6ff2392/attachment.htm>

From stijn+gdal-dev at strict.be  Mon Nov  6 23:29:59 2023
From: stijn+gdal-dev at strict.be (Stijn Tallir)
Date: Tue, 7 Nov 2023 08:29:59 +0100
Subject: [gdal-dev] tps - gdalwarp vs ogr2ogr
In-Reply-To: <CAKadDxu3sofN-XfUNKBR_4PoO6GBUSUePHEfoHbGsmYHVZVoVQ@mail.gmail.com>
References: <CAKadDxvOySAyTZpQTrW4iGVEPZcGOP0sGR+r8TMDo0gKLuEXZg@mail.gmail.com>
 <AM0PR09MB32198CC1783B683BF77E07C8FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAKadDxuV_6TLqDfX0S-3eWpvD2tZ62tpUFdusu4jEfFLpUR4eQ@mail.gmail.com>
 <AM0PR09MB32194542EA59601B78D52766FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAKadDxtf4d-qb1KAFJE7k74khF05+QLgDa7DunHCHwQgtTs7Bw@mail.gmail.com>
 <CAKadDxsFUU2W2-a-nde_ObtUjmyn9yCmqzHtS5u-Pf6LALqFDg@mail.gmail.com>
 <AM0PR09MB32195C1FD6894CC42B84D1B0FDAAA@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAKadDxu3sofN-XfUNKBR_4PoO6GBUSUePHEfoHbGsmYHVZVoVQ@mail.gmail.com>
Message-ID: <CAKadDxviz8=dWKtdY=NG+Yvb_7_RXXsy99u93t4WBWfSUqZW8w@mail.gmail.com>

Hi Jukka,

The transformation lasted 3h20min vs 9min (before the fix)!

The results for raster and vector tps transformation are very similar now
and nothing changed for the vector result. Do I have to conclude the
previous rasters tps transformation method was faulty then?

Stijn

Op ma 6 nov 2023 om 16:32 schreef Stijn Tallir <stijn+gdal-dev at strict.be>:

> Hi,
>
> Does that mean the old raster tps transformation was "wrong" or the old
> vector transformation?
>
> I'm doing a test and trying to transform my raster image with the latest
> dev version in osgeo4W but it takes forever to process now. Don't know in
> how many days I will see the result :(
>
> The vector transformation with the latest dev version was the same (time
> and result).
>
> Stijn
>
> Op ma 6 nov 2023 om 14:48 schreef Rahkonen Jukka <
> jukka.rahkonen at maanmittauslaitos.fi>:
>
>> Hi,
>>
>>
>>
>> See the issue https://github.com/OSGeo/gdal/issues/8572. Maybe your
>> problem is also resolved by https://github.com/OSGeo/gdal/pull/8573. The
>> fix is included in the GDAL 3.8 RC1 version that was released 3 hour ago.
>> Do you have an option to make a test?
>>
>>
>>
>> -Jukka Rahkonen-
>>
>>
>>
>> *L?hett?j?:* Stijn Tallir <stijn at strict.be>
>> *L?hetetty:* maanantai 6. marraskuuta 2023 14.47
>> *Vastaanottaja:* Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
>> *Kopio:* gdal-dev at lists.osgeo.org
>> *Aihe:* Re: [gdal-dev] tps - gdalwarp vs ogr2ogr
>>
>>
>>
>> Hi Jukka,
>>
>>
>>
>> I finally found the time to produce a test set.
>>
>>
>>
>> You can download it here:
>> https://drive.google.com/file/d/1Y08Q-tIm5dxyKFKNdVqilvAO3H7FFFbx/view?usp=sharing
>>
>>
>>
>> I started from an unreferenced raster file (raster2tps.tif) with gcp's
>> (gcp4tps.gcp) and transformed it with tps (tpsraster.tif).
>>
>> Then polygonized the unreferenced raster file (vector2tps.shp) and
>> transformed the result with  the same gcp's (gcp4tps.gcp) and with tps
>> (tpsvector.shp).
>>
>>
>>
>> The vector2tps.shp polygons are "flipped" because of the different
>> Y-origin for rasters and vectors but this way both datasets can use the
>> exact same gcp's.
>>
>>
>>
>> When you lay the tpsvector-result on top of the tpsraster-result (in QGis
>> for instance) you'll see the differences in how both are transformed.
>>
>>
>>
>> Kind regards,
>>
>>
>>
>> Stijn
>>
>>
>>
>>
>>
>>
>>
>> Op wo 16 aug 2023 om 13:16 schreef Stijn Tallir <stijn+gdal-dev at strict.be
>> >:
>>
>> Yes, I checked them visually for both raster and vector.
>>
>>
>>
>> I compared the results also visually. The rasters are transformed in a
>> way that the end ponts of the gcp's align exactly with the result so that
>> is why I referred to it as "right". The vector data result is in the
>> neighbourhood of the end points (sometimes a rather significant distance).
>>
>>
>>
>> The result is different from order 1-3 transformations so I presume the
>> tps option isn't ignored.
>>
>>
>>
>> Stijn
>>
>>
>>
>> Op wo 16 aug 2023 om 11:52 schreef Rahkonen Jukka <
>> jukka.rahkonen at maanmittauslaitos.fi>:
>>
>> Hi,
>>
>>
>>
>> Did you check the ground control points? What is your reference when you
>> say that one result is right, and another wrong? Have you used some other
>> software for comparison? Or do you only know that the results are different?
>>
>>
>>
>> -Jukka-
>>
>>
>>
>> *L?hett?j?:* Stijn Tallir <stijn at strict.be>
>> *L?hetetty:* keskiviikko 16. elokuuta 2023 12.27
>> *Vastaanottaja:* Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
>> *Kopio:* gdal-dev at lists.osgeo.org
>> *Aihe:* Re: [gdal-dev] tps - gdalwarp vs ogr2ogr
>>
>>
>>
>> Hi Jukka,
>>
>>
>>
>> I thought of the density as an option for the "error" as you suggested
>> and I made a point-file with a point for every pixel in my original image
>> and used this as a source for the ogr2ogr transformation. So you could say
>> the desnity for both sources raster and vector) are then alike.
>>
>>
>>
>> The results were still the same (and wrong) ...
>>
>>
>>
>> Stijn
>>
>>
>>
>>
>>
>> Op wo 16 aug 2023 om 10:22 schreef Rahkonen Jukka <
>> jukka.rahkonen at maanmittauslaitos.fi>:
>>
>> Hi,
>>
>>
>>
>> Without test data it is very hard to say much. I believe that the promise
>> of tps is that the ground control points stay where they are set. The
>> intermediate points follow the least tension surfaces and I do not know how
>> exactly those spline algorithms are defined. Raster data is full of points
>> to warp but probably in the vector data the transformation is done vertex
>> by vertex. I would first check if the GCPs are in the same place in both
>> outputs. Then I would make a test by densifying the vector data before
>> georeferencing to have much more vertices and see if it has any effect on
>> the result.
>>
>>
>>
>> -Jukka Rahkonen-
>>
>>
>>
>> *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta *Stijn
>> Tallir
>> *L?hetetty:* keskiviikko 16. elokuuta 2023 10.29
>> *Vastaanottaja:* gdal-dev at lists.osgeo.org
>> *Aihe:* [gdal-dev] tps - gdalwarp vs ogr2ogr
>>
>>
>>
>> Hi,
>>
>>
>>
>> According to the documentation gdal and ogr use the same algorithm for
>> the tps-transformation but I don't seem to get the same results using the
>> same set of gcp's for images and vectors.
>>
>>
>>
>> I have images that are unreferenced and vector data digitised on these
>> images (in pixel coordinates).
>>
>>
>>
>> The images are then georeferenced with +100 gcp's and warped with
>> gdalwarp using the "tps" option.
>>
>>
>>
>> When I use the same gcp's (with adjusted y-origin to lower left corner)
>> to georeference the vector data with ogr2ogr and the "tps" option I get
>> different results. The vector-result is similar to the image-result but
>> never exactly the same and differences can be substantial.
>>
>>
>>
>> Any thoughts?
>>
>>
>>
>> Stijn
>>
>>
>>
>>
>> --
>>
>> Stijn Tallir - StrICT BV
>>
>>
>>
>> Wijnveld 8
>>
>> 9112 Sinaai-Waas
>>
>>
>>
>> GSM: 0486 750220
>>
>>
>>
>> E-mail: Info at strict.be
>>
>> Web: www.strict.be
>>
>>
>>
>> BTW: BE 0567.559.668
>>
>>
>>
>>
>>
>>
>> --
>>
>> Stijn Tallir - StrICT BV
>>
>>
>>
>> Wijnveld 8
>>
>> 9112 Sinaai-Waas
>>
>>
>>
>> GSM: 0486 750220
>>
>>
>>
>> E-mail: Info at strict.be
>>
>> Web: www.strict.be
>>
>>
>>
>> BTW: BE 0567.559.668
>>
>>
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231107/2e621d70/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Nov  6 23:56:47 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Tue, 7 Nov 2023 07:56:47 +0000
Subject: [gdal-dev] tps - gdalwarp vs ogr2ogr
In-Reply-To: <CAKadDxviz8=dWKtdY=NG+Yvb_7_RXXsy99u93t4WBWfSUqZW8w@mail.gmail.com>
References: <CAKadDxvOySAyTZpQTrW4iGVEPZcGOP0sGR+r8TMDo0gKLuEXZg@mail.gmail.com>
 <AM0PR09MB32198CC1783B683BF77E07C8FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAKadDxuV_6TLqDfX0S-3eWpvD2tZ62tpUFdusu4jEfFLpUR4eQ@mail.gmail.com>
 <AM0PR09MB32194542EA59601B78D52766FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAKadDxtf4d-qb1KAFJE7k74khF05+QLgDa7DunHCHwQgtTs7Bw@mail.gmail.com>
 <CAKadDxsFUU2W2-a-nde_ObtUjmyn9yCmqzHtS5u-Pf6LALqFDg@mail.gmail.com>
 <AM0PR09MB32195C1FD6894CC42B84D1B0FDAAA@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAKadDxu3sofN-XfUNKBR_4PoO6GBUSUePHEfoHbGsmYHVZVoVQ@mail.gmail.com>
 <CAKadDxviz8=dWKtdY=NG+Yvb_7_RXXsy99u93t4WBWfSUqZW8w@mail.gmail.com>
Message-ID: <AM0PR09MB3219500D7792768DD4E5D64CFDA9A@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

The slowness feels bad. I fear I must also have a try with your dataset.

-Jukka-

L?hett?j?: Stijn Tallir <stijn+gdal-dev at strict.be>
L?hetetty: tiistai 7. marraskuuta 2023 9.30
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
Kopio: gdal-dev at lists.osgeo.org
Aihe: Re: [gdal-dev] tps - gdalwarp vs ogr2ogr

Hi Jukka,

The transformation lasted 3h20min vs 9min (before the fix)!

The results for raster and vector tps transformation are very similar now and nothing changed for the vector result. Do I have to conclude the previous rasters tps transformation method was faulty then?

Stijn

Op ma 6 nov 2023 om 16:32 schreef Stijn Tallir <stijn+gdal-dev at strict.be<mailto:stijn%2Bgdal-dev at strict.be>>:
Hi,

Does that mean the old raster tps transformation was "wrong" or the old vector transformation?

I'm doing a test and trying to transform my raster image with the latest dev version in osgeo4W but it takes forever to process now. Don't know in how many days I will see the result :(

The vector transformation with the latest dev version was the same (time and result).

Stijn

Op ma 6 nov 2023 om 14:48 schreef Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>:
Hi,

See the issue https://github.com/OSGeo/gdal/issues/8572. Maybe your problem is also resolved by https://github.com/OSGeo/gdal/pull/8573. The fix is included in the GDAL 3.8 RC1 version that was released 3 hour ago. Do you have an option to make a test?

-Jukka Rahkonen-

L?hett?j?: Stijn Tallir <stijn at strict.be<mailto:stijn at strict.be>>
L?hetetty: maanantai 6. marraskuuta 2023 14.47
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>
Kopio: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] tps - gdalwarp vs ogr2ogr

Hi Jukka,

I finally found the time to produce a test set.

You can download it here: https://drive.google.com/file/d/1Y08Q-tIm5dxyKFKNdVqilvAO3H7FFFbx/view?usp=sharing

I started from an unreferenced raster file (raster2tps.tif) with gcp's (gcp4tps.gcp) and transformed it with tps (tpsraster.tif).
Then polygonized the unreferenced raster file (vector2tps.shp) and transformed the result with  the same gcp's (gcp4tps.gcp) and with tps (tpsvector.shp).

The vector2tps.shp polygons are "flipped" because of the different Y-origin for rasters and vectors but this way both datasets can use the exact same gcp's.

When you lay the tpsvector-result on top of the tpsraster-result (in QGis for instance) you'll see the differences in how both are transformed.

Kind regards,

Stijn



Op wo 16 aug 2023 om 13:16 schreef Stijn Tallir <stijn+gdal-dev at strict.be<mailto:stijn%2Bgdal-dev at strict.be>>:
Yes, I checked them visually for both raster and vector.

I compared the results also visually. The rasters are transformed in a way that the end ponts of the gcp's align exactly with the result so that is why I referred to it as "right". The vector data result is in the neighbourhood of the end points (sometimes a rather significant distance).

The result is different from order 1-3 transformations so I presume the tps option isn't ignored.

Stijn

Op wo 16 aug 2023 om 11:52 schreef Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>:
Hi,

Did you check the ground control points? What is your reference when you say that one result is right, and another wrong? Have you used some other software for comparison? Or do you only know that the results are different?

-Jukka-

L?hett?j?: Stijn Tallir <stijn at strict.be<mailto:stijn at strict.be>>
L?hetetty: keskiviikko 16. elokuuta 2023 12.27
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>
Kopio: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] tps - gdalwarp vs ogr2ogr

Hi Jukka,

I thought of the density as an option for the "error" as you suggested and I made a point-file with a point for every pixel in my original image and used this as a source for the ogr2ogr transformation. So you could say the desnity for both sources raster and vector) are then alike.

The results were still the same (and wrong) ...

Stijn


Op wo 16 aug 2023 om 10:22 schreef Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>:
Hi,

Without test data it is very hard to say much. I believe that the promise of tps is that the ground control points stay where they are set. The intermediate points follow the least tension surfaces and I do not know how exactly those spline algorithms are defined. Raster data is full of points to warp but probably in the vector data the transformation is done vertex by vertex. I would first check if the GCPs are in the same place in both outputs. Then I would make a test by densifying the vector data before georeferencing to have much more vertices and see if it has any effect on the result.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Stijn Tallir
L?hetetty: keskiviikko 16. elokuuta 2023 10.29
Vastaanottaja: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] tps - gdalwarp vs ogr2ogr

Hi,

According to the documentation gdal and ogr use the same algorithm for the tps-transformation but I don't seem to get the same results using the same set of gcp's for images and vectors.

I have images that are unreferenced and vector data digitised on these images (in pixel coordinates).

The images are then georeferenced with +100 gcp's and warped with gdalwarp using the "tps" option.

When I use the same gcp's (with adjusted y-origin to lower left corner) to georeference the vector data with ogr2ogr and the "tps" option I get different results. The vector-result is similar to the image-result but never exactly the same and differences can be substantial.

Any thoughts?

Stijn


--
Stijn Tallir - StrICT BV

Wijnveld 8
9112 Sinaai-Waas

GSM: 0486 750220

E-mail: Info at strict.be<mailto:Info at strict.be>
Web: www.strict.be<http://www.strict.be/>

BTW: BE 0567.559.668

[http://www.strict.be/strict_web2.jpg]


--
Stijn Tallir - StrICT BV

Wijnveld 8
9112 Sinaai-Waas

GSM: 0486 750220

E-mail: Info at strict.be<mailto:Info at strict.be>
Web: www.strict.be<http://www.strict.be/>

BTW: BE 0567.559.668

[http://www.strict.be/strict_web2.jpg]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231107/d37fabdf/attachment-0001.htm>

From even.rouault at spatialys.com  Tue Nov  7 04:48:50 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 7 Nov 2023 13:48:50 +0100
Subject: [gdal-dev] tps - gdalwarp vs ogr2ogr
In-Reply-To: <CAKadDxviz8=dWKtdY=NG+Yvb_7_RXXsy99u93t4WBWfSUqZW8w@mail.gmail.com>
References: <CAKadDxvOySAyTZpQTrW4iGVEPZcGOP0sGR+r8TMDo0gKLuEXZg@mail.gmail.com>
 <AM0PR09MB32198CC1783B683BF77E07C8FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAKadDxuV_6TLqDfX0S-3eWpvD2tZ62tpUFdusu4jEfFLpUR4eQ@mail.gmail.com>
 <AM0PR09MB32194542EA59601B78D52766FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAKadDxtf4d-qb1KAFJE7k74khF05+QLgDa7DunHCHwQgtTs7Bw@mail.gmail.com>
 <CAKadDxsFUU2W2-a-nde_ObtUjmyn9yCmqzHtS5u-Pf6LALqFDg@mail.gmail.com>
 <AM0PR09MB32195C1FD6894CC42B84D1B0FDAAA@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAKadDxu3sofN-XfUNKBR_4PoO6GBUSUePHEfoHbGsmYHVZVoVQ@mail.gmail.com>
 <CAKadDxviz8=dWKtdY=NG+Yvb_7_RXXsy99u93t4WBWfSUqZW8w@mail.gmail.com>
Message-ID: <129e5b04-6721-4e02-9d49-81077df52bc0@spatialys.com>

Hi,

I've ticketed your issue as https://github.com/OSGeo/gdal/issues/8672 . 
What you could try to reduce the execution time is to enable 
multithreading by adding -wo NUM_THREADS=ALL_CPUS to your gdalwarp 
command line

And yes the previous implementation of the raster TPS transformation was 
"wrong", at least not consistent with the forward direction of the TPS 
transformer as used by ogr2ogr. Both matched on the exact location of 
ground control points, but the result could be substantially different 
in-between. The new implementation solves that, but it implies 
substantial more computation cost as you found out...

Even

Le 07/11/2023 ? 08:29, Stijn Tallir via gdal-dev a ?crit?:
> Hi Jukka,
>
> The transformation lasted 3h20min vs 9min?(before the fix)!
>
> The results for raster and vector tps transformation are very 
> similar?now and nothing changed for the vector result. Do I have to 
> conclude the previous rasters tps transformation?method was faulty then?
>
> Stijn
>
> Op ma 6 nov 2023 om 16:32 schreef Stijn Tallir 
> <stijn+gdal-dev at strict.be <mailto:stijn%2Bgdal-dev at strict.be>>:
>
>     Hi,
>
>     Does?that mean the old raster tps transformation was "wrong" or
>     the old vector transformation?
>
>     I'm doing a test and trying to transform my raster image with the
>     latest dev version in osgeo4W but it takes forever to process now.
>     Don't know in how many days I will see the result :(
>
>     The vector transformation with the latest dev version was the same
>     (time and result).
>
>     Stijn
>
>     Op ma 6 nov 2023 om 14:48 schreef Rahkonen Jukka
>     <jukka.rahkonen at maanmittauslaitos.fi>:
>
>         Hi,
>
>         See the issue https://github.com/OSGeo/gdal/issues/8572
>         <https://github.com/OSGeo/gdal/issues/8572>. Maybe your
>         problem is also resolved by
>         https://github.com/OSGeo/gdal/pull/8573. The fix is included
>         in the GDAL 3.8 RC1 version that was released 3 hour ago. Do
>         you have an option to make a test?
>
>         -Jukka Rahkonen-
>
>         *L?hett?j?:* Stijn Tallir <stijn at strict.be>
>         *L?hetetty:* maanantai 6. marraskuuta 2023 14.47
>         *Vastaanottaja:* Rahkonen Jukka
>         <jukka.rahkonen at maanmittauslaitos.fi>
>         *Kopio:* gdal-dev at lists.osgeo.org
>         *Aihe:* Re: [gdal-dev] tps - gdalwarp vs ogr2ogr
>
>         Hi Jukka,
>
>         I finally found the time to produce a test set.
>
>         You can download it here:
>         https://drive.google.com/file/d/1Y08Q-tIm5dxyKFKNdVqilvAO3H7FFFbx/view?usp=sharing
>
>         I started from an unreferenced raster file (raster2tps.tif)
>         with gcp's (gcp4tps.gcp) and transformed it with tps
>         (tpsraster.tif).
>
>         Then polygonized the unreferenced raster file (vector2tps.shp)
>         and transformed the result with??the same gcp's (gcp4tps.gcp)
>         and with tps (tpsvector.shp).
>
>         The vector2tps.shp polygons are "flipped" because of the
>         different Y-origin for rasters and vectors but this way both
>         datasets can use the exact same gcp's.
>
>         When you lay the tpsvector-result?on top of the
>         tpsraster-result?(in QGis for instance) you'll see the
>         differences in how both are transformed.
>
>         Kind regards,
>
>         Stijn
>
>         Op wo 16 aug 2023 om 13:16 schreef Stijn Tallir
>         <stijn+gdal-dev at strict.be <mailto:stijn%2Bgdal-dev at strict.be>>:
>
>             Yes, I checked them visually for both raster?and vector.
>
>             I compared the results also visually. The rasters are
>             transformed in a way that the end ponts?of the gcp's align
>             exactly with the result so that is why I referred?to it as
>             "right". The vector data result is in the neighbourhood of
>             the end points (sometimes a rather significant distance).
>
>             The result?is different from order 1-3 transformations?so
>             I presume the tps option isn't ignored.
>
>             Stijn
>
>             Op wo 16 aug 2023 om 11:52 schreef Rahkonen Jukka
>             <jukka.rahkonen at maanmittauslaitos.fi>:
>
>                 Hi,
>
>                 Did you check the ground control points? What is your
>                 reference when you say that one result is right, and
>                 another wrong? Have you used some other software for
>                 comparison? Or do you only know that the results are
>                 different?
>
>                 -Jukka-
>
>                 *L?hett?j?:* Stijn Tallir <stijn at strict.be>
>                 *L?hetetty:* keskiviikko 16. elokuuta 2023 12.27
>                 *Vastaanottaja:* Rahkonen Jukka
>                 <jukka.rahkonen at maanmittauslaitos.fi>
>                 *Kopio:* gdal-dev at lists.osgeo.org
>                 *Aihe:* Re: [gdal-dev] tps - gdalwarp vs ogr2ogr
>
>                 Hi Jukka,
>
>                 I thought of the density as an option for the "error"
>                 as you suggested and I made a point-file with a point
>                 for every pixel in my original image and used this as
>                 a source for the ogr2ogr transformation. So you could
>                 say the desnity?for both sources raster and vector)
>                 are then alike.
>
>                 The results were still the same (and wrong) ...
>
>                 Stijn
>
>                 Op wo 16 aug 2023 om 10:22 schreef Rahkonen Jukka
>                 <jukka.rahkonen at maanmittauslaitos.fi>:
>
>                     Hi,
>
>                     Without test data it is very hard to say much. I
>                     believe that the promise of tps is that the ground
>                     control points stay where they are set. The
>                     intermediate points follow the least tension
>                     surfaces and I do not know how exactly those
>                     spline algorithms are defined. Raster data is full
>                     of points to warp but probably in the vector data
>                     the transformation is done vertex by vertex. I
>                     would first check if the GCPs are in the same
>                     place in both outputs. Then I would make a test by
>                     densifying the vector data before georeferencing
>                     to have much more vertices and see if it has any
>                     effect on the result.
>
>                     -Jukka Rahkonen-
>
>                     *L?hett?j?:* gdal-dev
>                     <gdal-dev-bounces at lists.osgeo.org> *Puolesta
>                     *Stijn Tallir
>                     *L?hetetty:* keskiviikko 16. elokuuta 2023 10.29
>                     *Vastaanottaja:* gdal-dev at lists.osgeo.org
>                     *Aihe:* [gdal-dev] tps - gdalwarp vs ogr2ogr
>
>                     Hi,
>
>                     According?to the documentation gdal and ogr use
>                     the same algorithm for the tps-transformation but
>                     I don't seem to get the same results using the
>                     same set of gcp's for images and vectors.
>
>                     I have images that are unreferenced and vector
>                     data digitised on these images (in pixel coordinates).
>
>                     The images are then georeferenced with +100 gcp's
>                     and warped with gdalwarp using the "tps" option.
>
>                     When I use the same gcp's (with adjusted y-origin
>                     to lower left corner) to georeference the?vector
>                     data with ogr2ogr and the "tps" option I get
>                     different results. The vector-result is similar to
>                     the image-result but never exactly the same and
>                     differences?can be substantial.
>
>                     Any thoughts?
>
>                     Stijn
>
>
>                 -- 
>
>                 Stijn Tallir - StrICT BV
>
>                 Wijnveld 8
>
>                 9112 Sinaai-Waas
>
>                 GSM: 0486 750220
>
>                 E-mail: Info at strict.be
>
>                 Web: www.strict.be <http://www.strict.be/>
>
>                 BTW: BE 0567.559.668
>
>
>         -- 
>
>         Stijn Tallir - StrICT BV
>
>         Wijnveld 8
>
>         9112 Sinaai-Waas
>
>         GSM: 0486 750220
>
>         E-mail: Info at strict.be
>
>         Web: www.strict.be <http://www.strict.be/>
>
>         BTW: BE 0567.559.668
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231107/94110d4b/attachment-0001.htm>

From andrew at aitchison.me.uk  Tue Nov  7 06:22:26 2023
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Tue, 7 Nov 2023 14:22:26 +0000 (GMT)
Subject: [gdal-dev] tps - gdalwarp vs ogr2ogr
In-Reply-To: <129e5b04-6721-4e02-9d49-81077df52bc0@spatialys.com>
References: <CAKadDxvOySAyTZpQTrW4iGVEPZcGOP0sGR+r8TMDo0gKLuEXZg@mail.gmail.com>
 <AM0PR09MB32198CC1783B683BF77E07C8FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAKadDxuV_6TLqDfX0S-3eWpvD2tZ62tpUFdusu4jEfFLpUR4eQ@mail.gmail.com>
 <AM0PR09MB32194542EA59601B78D52766FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAKadDxtf4d-qb1KAFJE7k74khF05+QLgDa7DunHCHwQgtTs7Bw@mail.gmail.com>
 <CAKadDxsFUU2W2-a-nde_ObtUjmyn9yCmqzHtS5u-Pf6LALqFDg@mail.gmail.com>
 <AM0PR09MB32195C1FD6894CC42B84D1B0FDAAA@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAKadDxu3sofN-XfUNKBR_4PoO6GBUSUePHEfoHbGsmYHVZVoVQ@mail.gmail.com>
 <CAKadDxviz8=dWKtdY=NG+Yvb_7_RXXsy99u93t4WBWfSUqZW8w@mail.gmail.com>
 <129e5b04-6721-4e02-9d49-81077df52bc0@spatialys.com>
Message-ID: <b3bf94a7-218b-a76d-8483-c77be1760d2c@aitchison.me.uk>


https://raw.githubusercontent.com/craigshelley/QuickChart/master/Specification/The%20Quick%20Chart%20File%20Format%20Specification%201.03.pdf
describes a file format which includes polynomials describing forward
*and reverse* tranforms for this.
I don't know how common, or accurate, such reverse transforms are.

Would it be useful or much effort to add the ability to use the 
reverse transform when it is offered ?

[ I have a gdal driver which can read some
  but not all of these files. ]

On Tue, 7 Nov 2023, Even Rouault via gdal-dev wrote:

> Hi,
>
> I've ticketed your issue as https://github.com/OSGeo/gdal/issues/8672 . What 
> you could try to reduce the execution time is to enable multithreading by 
> adding -wo NUM_THREADS=ALL_CPUS to your gdalwarp command line
>
> And yes the previous implementation of the raster TPS transformation was 
> "wrong", at least not consistent with the forward direction of the TPS 
> transformer as used by ogr2ogr. Both matched on the exact location of ground 
> control points, but the result could be substantially different in-between. 
> The new implementation solves that, but it implies substantial more 
> computation cost as you found out...
>
> Even
>
> Le 07/11/2023 ? 08:29, Stijn Tallir via gdal-dev a ?crit?:
>> Hi Jukka,
>> 
>> The transformation lasted 3h20min vs 9min?(before the fix)!
>> 
>> The results for raster and vector tps transformation are very similar?now 
>> and nothing changed for the vector result. Do I have to conclude the 
>> previous rasters tps transformation?method was faulty then?
>> 
>> Stijn
>> 
>> Op ma 6 nov 2023 om 16:32 schreef Stijn Tallir <stijn+gdal-dev at strict.be 
>> <mailto:stijn%2Bgdal-dev at strict.be>>:
>>
>>     Hi,
>>
>>     Does?that mean the old raster tps transformation was "wrong" or
>>     the old vector transformation?
>>
>>     I'm doing a test and trying to transform my raster image with the
>>     latest dev version in osgeo4W but it takes forever to process now.
>>     Don't know in how many days I will see the result :(
>>
>>     The vector transformation with the latest dev version was the same
>>     (time and result).
>>
>>     Stijn
>>
>>     Op ma 6 nov 2023 om 14:48 schreef Rahkonen Jukka
>>     <jukka.rahkonen at maanmittauslaitos.fi>:
>>
>>         Hi,
>>
>>         See the issue https://github.com/OSGeo/gdal/issues/8572
>>         <https://github.com/OSGeo/gdal/issues/8572>. Maybe your
>>         problem is also resolved by
>>         https://github.com/OSGeo/gdal/pull/8573. The fix is included
>>         in the GDAL 3.8 RC1 version that was released 3 hour ago. Do
>>         you have an option to make a test?
>>
>>         -Jukka Rahkonen-
>>
>>         *L?hett?j?:* Stijn Tallir <stijn at strict.be>
>>         *L?hetetty:* maanantai 6. marraskuuta 2023 14.47
>>         *Vastaanottaja:* Rahkonen Jukka
>>         <jukka.rahkonen at maanmittauslaitos.fi>
>>         *Kopio:* gdal-dev at lists.osgeo.org
>>         *Aihe:* Re: [gdal-dev] tps - gdalwarp vs ogr2ogr
>>
>>         Hi Jukka,
>>
>>         I finally found the time to produce a test set.
>>
>>         You can download it here:
>>         https://drive.google.com/file/d/1Y08Q-tIm5dxyKFKNdVqilvAO3H7FFFbx/view?usp=sharing
>>
>>         I started from an unreferenced raster file (raster2tps.tif)
>>         with gcp's (gcp4tps.gcp) and transformed it with tps
>>         (tpsraster.tif).
>>
>>         Then polygonized the unreferenced raster file (vector2tps.shp)
>>         and transformed the result with??the same gcp's (gcp4tps.gcp)
>>         and with tps (tpsvector.shp).
>>
>>         The vector2tps.shp polygons are "flipped" because of the
>>         different Y-origin for rasters and vectors but this way both
>>         datasets can use the exact same gcp's.
>>
>>         When you lay the tpsvector-result?on top of the
>>         tpsraster-result?(in QGis for instance) you'll see the
>>         differences in how both are transformed.
>>
>>         Kind regards,
>>
>>         Stijn
>>
>>         Op wo 16 aug 2023 om 13:16 schreef Stijn Tallir
>>         <stijn+gdal-dev at strict.be <mailto:stijn%2Bgdal-dev at strict.be>>:
>>
>>             Yes, I checked them visually for both raster?and vector.
>>
>>             I compared the results also visually. The rasters are
>>             transformed in a way that the end ponts?of the gcp's align
>>             exactly with the result so that is why I referred?to it as
>>             "right". The vector data result is in the neighbourhood of
>>             the end points (sometimes a rather significant distance).
>>
>>             The result?is different from order 1-3 transformations?so
>>             I presume the tps option isn't ignored.
>>
>>             Stijn
>>
>>             Op wo 16 aug 2023 om 11:52 schreef Rahkonen Jukka
>>             <jukka.rahkonen at maanmittauslaitos.fi>:
>>
>>                 Hi,
>>
>>                 Did you check the ground control points? What is your
>>                 reference when you say that one result is right, and
>>                 another wrong? Have you used some other software for
>>                 comparison? Or do you only know that the results are
>>                 different?
>>
>>                 -Jukka-
>>
>>                 *L?hett?j?:* Stijn Tallir <stijn at strict.be>
>>                 *L?hetetty:* keskiviikko 16. elokuuta 2023 12.27
>>                 *Vastaanottaja:* Rahkonen Jukka
>>                 <jukka.rahkonen at maanmittauslaitos.fi>
>>                 *Kopio:* gdal-dev at lists.osgeo.org
>>                 *Aihe:* Re: [gdal-dev] tps - gdalwarp vs ogr2ogr
>>
>>                 Hi Jukka,
>>
>>                 I thought of the density as an option for the "error"
>>                 as you suggested and I made a point-file with a point
>>                 for every pixel in my original image and used this as
>>                 a source for the ogr2ogr transformation. So you could
>>                 say the desnity?for both sources raster and vector)
>>                 are then alike.
>>
>>                 The results were still the same (and wrong) ...
>>
>>                 Stijn
>>
>>                 Op wo 16 aug 2023 om 10:22 schreef Rahkonen Jukka
>>                 <jukka.rahkonen at maanmittauslaitos.fi>:
>>
>>                     Hi,
>>
>>                     Without test data it is very hard to say much. I
>>                     believe that the promise of tps is that the ground
>>                     control points stay where they are set. The
>>                     intermediate points follow the least tension
>>                     surfaces and I do not know how exactly those
>>                     spline algorithms are defined. Raster data is full
>>                     of points to warp but probably in the vector data
>>                     the transformation is done vertex by vertex. I
>>                     would first check if the GCPs are in the same
>>                     place in both outputs. Then I would make a test by
>>                     densifying the vector data before georeferencing
>>                     to have much more vertices and see if it has any
>>                     effect on the result.
>>
>>                     -Jukka Rahkonen-
>>
>>                     *L?hett?j?:* gdal-dev
>>                     <gdal-dev-bounces at lists.osgeo.org> *Puolesta
>>                     *Stijn Tallir
>>                     *L?hetetty:* keskiviikko 16. elokuuta 2023 10.29
>>                     *Vastaanottaja:* gdal-dev at lists.osgeo.org
>>                     *Aihe:* [gdal-dev] tps - gdalwarp vs ogr2ogr
>>
>>                     Hi,
>>
>>                     According?to the documentation gdal and ogr use
>>                     the same algorithm for the tps-transformation but
>>                     I don't seem to get the same results using the
>>                     same set of gcp's for images and vectors.
>>
>>                     I have images that are unreferenced and vector
>>                     data digitised on these images (in pixel coordinates).
>>
>>                     The images are then georeferenced with +100 gcp's
>>                     and warped with gdalwarp using the "tps" option.
>>
>>                     When I use the same gcp's (with adjusted y-origin
>>                     to lower left corner) to georeference the?vector
>>                     data with ogr2ogr and the "tps" option I get
>>                     different results. The vector-result is similar to
>>                     the image-result but never exactly the same and
>>                     differences?can be substantial.
>>
>>                     Any thoughts?
>>
>>                     Stijn
>> 
>>
>>                 --
>>                 Stijn Tallir - StrICT BV
>>
>>                 Wijnveld 8
>>
>>                 9112 Sinaai-Waas
>>
>>                 GSM: 0486 750220
>>
>>                 E-mail: Info at strict.be
>>
>>                 Web: www.strict.be <http://www.strict.be/>
>>
>>                 BTW: BE 0567.559.668
>> 
>>
>>         --
>>         Stijn Tallir - StrICT BV
>>
>>         Wijnveld 8
>>
>>         9112 Sinaai-Waas
>>
>>         GSM: 0486 750220
>>
>>         E-mail: Info at strict.be
>>
>>         Web: www.strict.be <http://www.strict.be/>
>>
>>         BTW: BE 0567.559.668
>> 
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
>

-- 
Andrew C. Aitchison                      Kendal, UK
                    andrew at aitchison.me.uk

From even.rouault at spatialys.com  Wed Nov  8 00:39:00 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 8 Nov 2023 09:39:00 +0100
Subject: [gdal-dev] Motion: Adopt GDAL 3.8.0RC1 as 3.8.0 release
Message-ID: <27de12e5-ea5f-4379-bd85-5add6763f563@spatialys.com>

Hi,

Motion:

Adopt GDAL 3.8.0RC1 as 3.8.0 release

Starting with my +1

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jukka.rahkonen at maanmittauslaitos.fi  Wed Nov  8 01:16:14 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Wed, 8 Nov 2023 09:16:14 +0000
Subject: [gdal-dev] Motion: Adopt GDAL 3.8.0RC1 as 3.8.0 release
In-Reply-To: <27de12e5-ea5f-4379-bd85-5add6763f563@spatialys.com>
References: <27de12e5-ea5f-4379-bd85-5add6763f563@spatialys.com>
Message-ID: <AM0PR09MB3219A740F7BE7E732CADFD95FDA8A@AM0PR09MB3219.eurprd09.prod.outlook.com>

+1

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault via gdal-dev
L?hetetty: keskiviikko 8. marraskuuta 2023 10.39
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Motion: Adopt GDAL 3.8.0RC1 as 3.8.0 release

Hi,

Motion:

Adopt GDAL 3.8.0RC1 as 3.8.0 release

Starting with my +1

Even

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org

From j1 at jimenezshaw.com  Wed Nov  8 01:39:17 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 8 Nov 2023 10:39:17 +0100
Subject: [gdal-dev] Motion: Adopt GDAL 3.8.0RC1 as 3.8.0 release
In-Reply-To: <AM0PR09MB3219A740F7BE7E732CADFD95FDA8A@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <27de12e5-ea5f-4379-bd85-5add6763f563@spatialys.com>
 <AM0PR09MB3219A740F7BE7E732CADFD95FDA8A@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <CADRrdKvoxBqev1kjjAL7XBJTxM+6u0zxYiHQFs4M-PM1E-BFjQ@mail.gmail.com>

+1 Javier

On Wed, 8 Nov 2023, 10:16 Rahkonen Jukka via gdal-dev, <
gdal-dev at lists.osgeo.org> wrote:

> +1
>
> -Jukka Rahkonen-
>
> -----Alkuper?inen viesti-----
> L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even
> Rouault via gdal-dev
> L?hetetty: keskiviikko 8. marraskuuta 2023 10.39
> Vastaanottaja: gdal-dev at lists.osgeo.org
> Aihe: [gdal-dev] Motion: Adopt GDAL 3.8.0RC1 as 3.8.0 release
>
> Hi,
>
> Motion:
>
> Adopt GDAL 3.8.0RC1 as 3.8.0 release
>
> Starting with my +1
>
> Even
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231108/86d061c8/attachment.htm>

From naima.etienne at gmail.com  Wed Nov  8 03:29:41 2023
From: naima.etienne at gmail.com (Naima Dambrine)
Date: Wed, 8 Nov 2023 12:29:41 +0100
Subject: [gdal-dev] Fwd:  oblique cuts on a raster using python GDAL
In-Reply-To: <CAOHmAiby+9R3reO5h5DcuWfWoxcnP2+y2n0XDWCswJLf+A7Umw@mail.gmail.com>
References: <CAOHmAia+=2wach=vj_e=0kEvWU2AZo02qohaWVjE4B4d1feKRw@mail.gmail.com>
 <AM0PR09MB321946742982233B38C84C75FDABA@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CADRrdKsMs8Hou7TyWeGw-ioNUo0HkH3hTMEjsfdeK7=WF5Rt-Q@mail.gmail.com>
 <CAOHmAiZtV-xA5N-i-OoGTQBMQrmcuik2iwqoFxU96zntRhb_8w@mail.gmail.com>
 <CADRrdKtGSo4r4FSW4+Ch+JgQype4amcM6eUaG-GKYttfAYZw1Q@mail.gmail.com>
 <CAOHmAiYmLYroAGEQ32_ZtF04k9hBvk70txoQPMgbcwfC5oHMTw@mail.gmail.com>
 <CADRrdKu5iNXz7V9h=-rHCXkVG4ZBP4qQPbtxobxo5iETMQ98uQ@mail.gmail.com>
 <CAOHmAiby+9R3reO5h5DcuWfWoxcnP2+y2n0XDWCswJLf+A7Umw@mail.gmail.com>
Message-ID: <CAOHmAiZs4Kq9pne28UkHgBSuToNQC7je+Zf8vquvhw=56m3EKg@mail.gmail.com>

---------- Forwarded message ---------
De : Naima Dambrine <naima.etienne at gmail.com>
Date: mar. 7 nov. 2023 ? 09:16
Subject: Re: [gdal-dev] oblique cuts on a raster using python GDAL
To: Javier Jimenez Shaw <j1 at jimenezshaw.com>


Hi,

Thank you very much for your help, it let me try and try again, and you are
right when you say that it is possible.
I finally obtain a perfect cut in python, here is the code :

gdal.Warp(

output-raster,

raster-ds,

format=  ?GTiff?,

cutlineDSName= ?geometry-extraction.shp?,

cropToCutline = True,

xRes = None, yRes=None,

resampleAlg=?nearest?,

multithread= True,

srcNoData=None, dstNodata=255,

options=[?COMPRESS=DEFLATE?, ?PREDICTOR=2?, ?ZLEVEL=9']

)


Have a nice day,

Na?ma


Le lun. 6 nov. 2023 ? 17:23, Javier Jimenez Shaw <j1 at jimenezshaw.com> a
?crit :

>
>
> On Mon, 6 Nov 2023 at 14:43, Naima Dambrine <naima.etienne at gmail.com>
> wrote:
>
>> Thank you, can you please paste a zoom image of your result ?
>>
>> because if i translate your gdalwarp in python :
>>
>> gdalwarp 3635_rasters_agreges.jp2 salida.tif -cutline
>> geometry_extraction.shp -crop_to_cutline -dstnodata 0 -cl
>> geometry_extraction -overwrite -of GTiff
>>
>> gdal.Warp('salida.tif', '3635_rasters_agreges.jp2', format='GTiff',
>> cutlineDSName='geometry_extraction.shp', cropToCutline=True, dstNoData=0)
>>
>> it's the same code ...  and I do not obtain a clean image at all
>>
>>
>>
>> Le lun. 6 nov. 2023 ? 14:05, Javier Jimenez Shaw <j1 at jimenezshaw.com> a
>> ?crit :
>>
>>> This is working for me (and also in gdal 3.8.0):
>>>
>>> gdalwarp 3635_rasters_agreges.jp2 salida.tif -cutline
>>> geometry_extraction.shp -crop_to_cutline -dstnodata 0 -cl
>>> geometry_extraction -overwrite -of GTiff
>>>
>>> About the "white" pixels inside the image, it could be that a single
>>> band has a value of 0 (not that strange). Then it is transparent, and you
>>> see the background color. (to avoid those "color misunderstandings" I have
>>> a pink background color, that is not white).
>>>
>>> On Mon, 6 Nov 2023 at 12:35, Naima Dambrine <naima.etienne at gmail.com>
>>> wrote:
>>>
>>>> Hi Javier,
>>>>
>>>> Thank you, good news ...
>>>>
>>>> I'm on Ubuntu 20.04 with gdal 3.6.2. Yes, the original raster format is
>>>> JP2, but my output format is GTiff. Here is exactly what I do :
>>>>
>>>> cut_ds = gdal.Warp(outfile, jp2_ds, format='GTiff',
>>>> cutlineDCName=shape_file_path,
>>>> cropToCutline=True,
>>>> copyMetadat=True,
>>>> dstNodata=0)
>>>>
>>>> What I see is that there are still black pixels around the image, as
>>>> well as white pixels inside the image.
>>>> Another point to consider is that, despite the use of compression, the
>>>> output file is 75.3 MB, compared with around 14 MB with a JP2 format. Why
>>>> is this?
>>>>
>>>> my output :
>>>>
>>>>
>>>>
>>>>
>>>> Le lun. 6 nov. 2023 ? 11:33, Javier Jimenez Shaw <j1 at jimenezshaw.com>
>>>> a ?crit :
>>>>
>>>>> Hi Naima
>>>>>
>>>>> I have been testing with your dataset. To me, using the GDAL in Ubuntu
>>>>> 22.04 (3.4.1) seems to be a problem with the JP2 output format. If you
>>>>> output as geotiff it works fine.
>>>>>
>>>>> On Sun, 5 Nov 2023 at 19:43, Rahkonen Jukka via gdal-dev <
>>>>> gdal-dev at lists.osgeo.org> wrote:
>>>>>
>>>>>> Hi,
>>>>>>
>>>>>>
>>>>>>
>>>>>> Please add gdalinfo of the source image. Even better if you can share
>>>>>> the image.
>>>>>>
>>>>>>
>>>>>>
>>>>>> -Jukka Rahkonen-
>>>>>>
>>>>>>
>>>>>>
>>>>>> *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta *Naima
>>>>>> Dambrine via gdal-dev
>>>>>> *L?hetetty:* sunnuntai 5. marraskuuta 2023 17.35
>>>>>> *Vastaanottaja:* gdal-dev at lists.osgeo.org
>>>>>> *Aihe:* [gdal-dev] oblique cuts on a raster using python GDAL
>>>>>>
>>>>>>
>>>>>>
>>>>>> Hi ,
>>>>>>
>>>>>>
>>>>>>
>>>>>> I have problems with oblique cuts on a raster using python GDAL
>>>>>> (3.6.2)
>>>>>>
>>>>>>
>>>>>>
>>>>>> - with this line i obtain black borders around :
>>>>>>
>>>>>> gdal.warp('raster-dst' , raster-src',
>>>>>> cutLineDSName='geometry-extraction.shp', cropToCutline=True)
>>>>>>
>>>>>>
>>>>>>
>>>>>> - with this one, the crop is not clean on closer inspection:
>>>>>> residual black pixels around image and white pixels appear in the image.
>>>>>>
>>>>>> gdal. warp( 'raster-dst' , raster-src',
>>>>>> cutLineDSName='geometry-extraction.shp', cropToCutline=True,
>>>>>> copyMetaData=True, dstNodata=0)
>>>>>>
>>>>>>
>>>>>> I tried, without success, to refine with outputBounds=[minX, maxX,
>>>>>> minY, maxY], under QGIS directly ?.
>>>>>> I've run out of ideas :/
>>>>>> A (naive) question comes to mind: Is it possible to make oblique cuts
>>>>>> with gdal.warp() & co?
>>>>>>
>>>>>> Na?ma
>>>>>> _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev at lists.osgeo.org
>>>>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>
>>>>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231108/1a60e30a/attachment-0001.htm>

From Sam.Hall at jbarisk.com  Wed Nov  8 04:35:24 2023
From: Sam.Hall at jbarisk.com (Sam Hall)
Date: Wed, 8 Nov 2023 12:35:24 +0000
Subject: [gdal-dev] Transforming from EPSG:29902 to EPSG:4326 at the limit
 of the area of use.
Message-ID: <LO0P123MB68138ECA5668C1226B89C0D387A9A@LO0P123MB6813.GBRP123.PROD.OUTLOOK.COM>

I have some data that covers the whole of the Republic of Ireland, including the Blasket Islands off the West Coast, situated around 24439, 95540 in EPSG:29902. These islands straddle the western boundary of the area of use of the coordinate system -10.56? W.

When transforming a raster dataset from EPSG:29902 to EPSG:4326 using gdalwarp at gdal >= 3.5.2, there seems to be a roughly 50 m shift in the data at the area of use boundary, while if I use ogr2ogr on a vector copy of this data, I don't see this shift.

I have a reproducible example of this at https://gitlab.com/Sam.Hall1/29902_gdalwarp_vs_ogr2ogr.git. In this example I created a rectangular polygon with interpolated points and saved it to a shapefile, then used gdal_rasterize to create a GeoTiff. gdalwarp gives the desired result using a gdal 3.5.1 docker image. The full commands are in the docker-compose.yml in the repository but the parameter's I'm using are:

gdalwarp -t_srs EPSG:4326 -tr 0.000045 0.000045 -tap -overwrite input.tif output.tif
ogr2ogr -t_srs EPSG:4326 output.shp input.shp
 
I've also seen similar results when transforming from EPSG:27700 to EPSG:4326 in Jersey and Guernsey in the English Channel but I'd have to use a much earlier version of gdal to reproduce the desired result.

Is there a gridshift file or any additional parameters that I could use to get the output to look more continuous across the area of use line? 

Sam

From j1 at jimenezshaw.com  Wed Nov  8 05:47:59 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 8 Nov 2023 14:47:59 +0100
Subject: [gdal-dev] Transforming from EPSG:29902 to EPSG:4326 at the
 limit of the area of use.
In-Reply-To: <LO0P123MB68138ECA5668C1226B89C0D387A9A@LO0P123MB6813.GBRP123.PROD.OUTLOOK.COM>
References: <LO0P123MB68138ECA5668C1226B89C0D387A9A@LO0P123MB6813.GBRP123.PROD.OUTLOOK.COM>
Message-ID: <CADRrdKsuDxRnSCU+ph_3dAHp=UJLjFppxeO1uiBmKxM7rS97rA@mail.gmail.com>

Assuming that it does not happen in the main area of Ireland...I guess it
is because it is outside of the area of usage of the datum transformation
https://epsg.org/transformation_1641/TM65-to-WGS-84-2.html
Probably (this is just a guess) gdalwarp is not taking it into
consideration, making a ballpark transformation between TM65 and WGS84,
while ogr2ogr doesn't.

On Wed, 8 Nov 2023 at 13:35, Sam Hall via gdal-dev <gdal-dev at lists.osgeo.org>
wrote:

> I have some data that covers the whole of the Republic of Ireland,
> including the Blasket Islands off the West Coast, situated around 24439,
> 95540 in EPSG:29902. These islands straddle the western boundary of the
> area of use of the coordinate system -10.56? W.
>
> When transforming a raster dataset from EPSG:29902 to EPSG:4326 using
> gdalwarp at gdal >= 3.5.2, there seems to be a roughly 50 m shift in the
> data at the area of use boundary, while if I use ogr2ogr on a vector copy
> of this data, I don't see this shift.
>
> I have a reproducible example of this at
> https://gitlab.com/Sam.Hall1/29902_gdalwarp_vs_ogr2ogr.git. In this
> example I created a rectangular polygon with interpolated points and saved
> it to a shapefile, then used gdal_rasterize to create a GeoTiff. gdalwarp
> gives the desired result using a gdal 3.5.1 docker image. The full commands
> are in the docker-compose.yml in the repository but the parameter's I'm
> using are:
>
> gdalwarp -t_srs EPSG:4326 -tr 0.000045 0.000045 -tap -overwrite input.tif
> output.tif
> ogr2ogr -t_srs EPSG:4326 output.shp input.shp
>
> I've also seen similar results when transforming from EPSG:27700 to
> EPSG:4326 in Jersey and Guernsey in the English Channel but I'd have to use
> a much earlier version of gdal to reproduce the desired result.
>
> Is there a gridshift file or any additional parameters that I could use to
> get the output to look more continuous across the area of use line?
>
> Sam
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231108/077eb1cb/attachment.htm>

From lnicola at dend.ro  Wed Nov  8 06:41:37 2023
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Wed, 08 Nov 2023 16:41:37 +0200
Subject: [gdal-dev] Fwd:  oblique cuts on a raster using python GDAL
In-Reply-To: <CAOHmAiZs4Kq9pne28UkHgBSuToNQC7je+Zf8vquvhw=56m3EKg@mail.gmail.com>
References: <CAOHmAia+=2wach=vj_e=0kEvWU2AZo02qohaWVjE4B4d1feKRw@mail.gmail.com>
 <AM0PR09MB321946742982233B38C84C75FDABA@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CADRrdKsMs8Hou7TyWeGw-ioNUo0HkH3hTMEjsfdeK7=WF5Rt-Q@mail.gmail.com>
 <CAOHmAiZtV-xA5N-i-OoGTQBMQrmcuik2iwqoFxU96zntRhb_8w@mail.gmail.com>
 <CADRrdKtGSo4r4FSW4+Ch+JgQype4amcM6eUaG-GKYttfAYZw1Q@mail.gmail.com>
 <CAOHmAiYmLYroAGEQ32_ZtF04k9hBvk70txoQPMgbcwfC5oHMTw@mail.gmail.com>
 <CADRrdKu5iNXz7V9h=-rHCXkVG4ZBP4qQPbtxobxo5iETMQ98uQ@mail.gmail.com>
 <CAOHmAiby+9R3reO5h5DcuWfWoxcnP2+y2n0XDWCswJLf+A7Umw@mail.gmail.com>
 <CAOHmAiZs4Kq9pne28UkHgBSuToNQC7je+Zf8vquvhw=56m3EKg@mail.gmail.com>
Message-ID: <b5836c1c-e583-403f-bde7-6659b54f9eec@betaapp.fastmail.com>

Hi Na?ma,

I'm a bit late to the party, but note that the JP2OpenJPEG produces lossy output by default. You need to pass REVERSIBLE=YES and QUALITY=100 as creation options to make it use lossless compression.

Laurentiu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231108/29443ba4/attachment.htm>

From Sam.Hall at jbarisk.com  Wed Nov  8 06:57:47 2023
From: Sam.Hall at jbarisk.com (Sam Hall)
Date: Wed, 8 Nov 2023 14:57:47 +0000
Subject: [gdal-dev] Transforming from EPSG:29902 to EPSG:4326 at the
 limit of the area of use.
In-Reply-To: <CADRrdKufBbju4r1G+O=wtcnuJnHCAHkHsxdV_uArRyqv1vMGdw@mail.gmail.com>
References: <LO0P123MB68138ECA5668C1226B89C0D387A9A@LO0P123MB6813.GBRP123.PROD.OUTLOOK.COM>
 <CADRrdKsuDxRnSCU+ph_3dAHp=UJLjFppxeO1uiBmKxM7rS97rA@mail.gmail.com>
 <LO0P123MB6813AE695E8348C3526A6B8D87A8A@LO0P123MB6813.GBRP123.PROD.OUTLOOK.COM>
 <CADRrdKufBbju4r1G+O=wtcnuJnHCAHkHsxdV_uArRyqv1vMGdw@mail.gmail.com>
Message-ID: <LO0P123MB6813AB2AB089FF6CF89BF64687A8A@LO0P123MB6813.GBRP123.PROD.OUTLOOK.COM>

I didn't mean to just respond to you Javier, sorry about that.

That looks promising. I'll work out which is the one is using which transformation and see if I can use the right one.

Sam

From:?Javier Jimenez Shaw <j1 at jimenezshaw.com>
Sent:?Wednesday, November 8, 2023 14:39
To:?Sam Hall <Sam.Hall at jbarisk.com>
Subject:?Re: [gdal-dev] Transforming from EPSG:29902 to EPSG:4326 at the limit of the area of use.

projinfo -s EPSG:29902 -t EPSG:4326 -o proj
Candidate operations found: 1
-------------------------------------
Operation No. 1:

unknown id, Inverse of Irish Grid + TM65 to WGS 84 (2), 1 m, Ireland - onshore. United Kingdom (UK) - Northern Ireland (Ulster) - onshore.

PROJ string:
+proj=pipeline
? +step +inv +proj=tmerc +lat_0=53.5 +lon_0=-8 +k=1.000035 +x_0=200000
? ? ? ? +y_0=250000 +a=6377340.189 +rf=299.3249646
? +step +inv +proj=longlat +a=6377340.189 +rf=299.3249646
? +step +proj=push +v_3
? +step +proj=cart +a=6377340.189 +rf=299.3249646
? +step +proj=helmert +x=482.5 +y=-130.6 +z=564.6 +rx=-1.042 +ry=-0.214
? ? ? ? +rz=-0.631 +s=8.15 +convention=position_vector
? +step +inv +proj=cart +ellps=WGS84
? +step +proj=pop +v_3
? +step +proj=unitconvert +xy_in=rad +xy_out=deg
? +step +proj=axisswap +order=2,1



projinfo -s EPSG:29902 -t EPSG:4326 -o proj --bbox "-10.562,52.08,-10.561,52.1"
Candidate operations found: 1
-------------------------------------
Operation No. 1:

unknown id, Inverse of Irish Grid + Ballpark geographic offset from TM65 to WGS 84, unknown accuracy, World, has ballpark transformation

PROJ string:
+proj=pipeline
? +step +inv +proj=tmerc +lat_0=53.5 +lon_0=-8 +k=1.000035 +x_0=200000
? ? ? ? +y_0=250000 +a=6377340.189 +rf=299.3249646
? +step +proj=unitconvert +xy_in=rad +xy_out=deg
? +step +proj=axisswap +order=2,1

So I guess that somehow one is taking the datum transformation and the other doesn't. Which one is doing what you should check.

BTW, you are writing only to me, not to the mailing list. Are you aware of that?

Best,
Javier.

On Wed, 8 Nov 2023 at 15:23, Sam Hall <Sam.Hall at jbarisk.com> wrote:
Thanks Javier,

It doesn't happen on the Irish mainland.

Is it possible to define the transformation to use outside the area of usage of the datum transformation using a proj string with something like this "+proj=hgridshift +grids=first,second" in it? Or are you suggesting that gdalwarp doesn't take the area of usage into account and therefore wouldn't look for the second datum shift and use a ballpark transform.

Sam


From:?Javier Jimenez Shaw <j1 at jimenezshaw.com>
Sent:?Wednesday, November 8, 2023 13:47
To:?Sam Hall <Sam.Hall at jbarisk.com>
Cc: gdal-dev at lists.osgeo.org?<gdal-dev at lists.osgeo.org>
Subject:?Re: [gdal-dev] Transforming from EPSG:29902 to EPSG:4326 at the limit of the area of use.

Assuming that it does not happen in the main area of Ireland...I guess it is because it is outside of the area of usage of the datum transformation https://epsg.org/transformation_1641/TM65-to-WGS-84-2.html
Probably (this is just a guess) gdalwarp is not taking it into consideration, making a ballpark transformation between TM65 and WGS84, while ogr2ogr doesn't.

On Wed, 8 Nov 2023 at 13:35, Sam Hall via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
I have some data that covers the whole of the Republic of Ireland, including the Blasket Islands off the West Coast, situated around 24439, 95540 in EPSG:29902. These islands straddle the western boundary of the area of use of the coordinate system -10.56? W.

When transforming a raster dataset from EPSG:29902 to EPSG:4326 using gdalwarp at gdal >= 3.5.2, there seems to be a roughly 50 m shift in the data at the area of use boundary, while if I use ogr2ogr on a vector copy of this data, I don't see this shift.

I have a reproducible example of this at https://gitlab.com/Sam.Hall1/29902_gdalwarp_vs_ogr2ogr.git. In this example I created a rectangular polygon with interpolated points and saved it to a shapefile, then used gdal_rasterize to create a GeoTiff. gdalwarp gives the desired result using a gdal 3.5.1 docker image. The full commands are in the docker-compose.yml in the repository but the parameter's I'm using are:

gdalwarp -t_srs EPSG:4326 -tr 0.000045 0.000045 -tap -overwrite input.tif output.tif
ogr2ogr -t_srs EPSG:4326 output.shp input.shp

I've also seen similar results when transforming from EPSG:27700 to EPSG:4326 in Jersey and Guernsey in the English Channel but I'd have to use a much earlier version of gdal to reproduce the desired result.

Is there a gridshift file or any additional parameters that I could use to get the output to look more continuous across the area of use line?

Sam
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From Sam.Hall at jbarisk.com  Wed Nov  8 07:48:04 2023
From: Sam.Hall at jbarisk.com (Sam Hall)
Date: Wed, 8 Nov 2023 15:48:04 +0000
Subject: [gdal-dev] Transforming from EPSG:29902 to EPSG:4326 at the
 limit of the area of use.
In-Reply-To: <LO0P123MB6813AB2AB089FF6CF89BF64687A8A@LO0P123MB6813.GBRP123.PROD.OUTLOOK.COM>
References: <LO0P123MB68138ECA5668C1226B89C0D387A9A@LO0P123MB6813.GBRP123.PROD.OUTLOOK.COM>
 <CADRrdKsuDxRnSCU+ph_3dAHp=UJLjFppxeO1uiBmKxM7rS97rA@mail.gmail.com>
 <LO0P123MB6813AE695E8348C3526A6B8D87A8A@LO0P123MB6813.GBRP123.PROD.OUTLOOK.COM>
 <CADRrdKufBbju4r1G+O=wtcnuJnHCAHkHsxdV_uArRyqv1vMGdw@mail.gmail.com>
 <LO0P123MB6813AB2AB089FF6CF89BF64687A8A@LO0P123MB6813.GBRP123.PROD.OUTLOOK.COM>
Message-ID: <LO0P123MB681359BF2646283D464045F987A8A@LO0P123MB6813.GBRP123.PROD.OUTLOOK.COM>

I tried using both:

gdalwarp -ct "$(projinfo -s EPSG:29902 -t EPSG:4326 -o proj -q)" input.tif output.tif
gdalwarp -ct "$(projinfo -s EPSG:29902 -t EPSG:4326 -o proj -q --bbox -10.562,52.08,-10.561,52.1)" input.tif output.tif

and they both produce the desired result of a smooth transition across the area of use.

Thanks so much for your help.

Sam

From:?Sam Hall <Sam.Hall at jbarisk.com>
Sent:?Wednesday, November 8, 2023 14:57
To:?gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject:?Re: [gdal-dev] Transforming from EPSG:29902 to EPSG:4326 at the limit of the area of use.
?
I didn't mean to just respond to you Javier, sorry about that.

That looks promising. I'll work out which is the one is using which transformation and see if I can use the right one.

Sam

From:?Javier Jimenez Shaw <j1 at jimenezshaw.com>
Sent:?Wednesday, November 8, 2023 14:39
To:?Sam Hall <Sam.Hall at jbarisk.com>
Subject:?Re: [gdal-dev] Transforming from EPSG:29902 to EPSG:4326 at the limit of the area of use.

projinfo -s EPSG:29902 -t EPSG:4326 -o proj
Candidate operations found: 1
-------------------------------------
Operation No. 1:

unknown id, Inverse of Irish Grid + TM65 to WGS 84 (2), 1 m, Ireland - onshore. United Kingdom (UK) - Northern Ireland (Ulster) - onshore.

PROJ string:
+proj=pipeline
? +step +inv +proj=tmerc +lat_0=53.5 +lon_0=-8 +k=1.000035 +x_0=200000
? ? ? ? +y_0=250000 +a=6377340.189 +rf=299.3249646
? +step +inv +proj=longlat +a=6377340.189 +rf=299.3249646
? +step +proj=push +v_3
? +step +proj=cart +a=6377340.189 +rf=299.3249646
? +step +proj=helmert +x=482.5 +y=-130.6 +z=564.6 +rx=-1.042 +ry=-0.214
? ? ? ? +rz=-0.631 +s=8.15 +convention=position_vector
? +step +inv +proj=cart +ellps=WGS84
? +step +proj=pop +v_3
? +step +proj=unitconvert +xy_in=rad +xy_out=deg
? +step +proj=axisswap +order=2,1



projinfo -s EPSG:29902 -t EPSG:4326 -o proj --bbox "-10.562,52.08,-10.561,52.1"
Candidate operations found: 1
-------------------------------------
Operation No. 1:

unknown id, Inverse of Irish Grid + Ballpark geographic offset from TM65 to WGS 84, unknown accuracy, World, has ballpark transformation

PROJ string:
+proj=pipeline
? +step +inv +proj=tmerc +lat_0=53.5 +lon_0=-8 +k=1.000035 +x_0=200000
? ? ? ? +y_0=250000 +a=6377340.189 +rf=299.3249646
? +step +proj=unitconvert +xy_in=rad +xy_out=deg
? +step +proj=axisswap +order=2,1

So I guess that somehow one is taking the datum transformation and the other doesn't. Which one is doing what you should check.

BTW, you are writing only to me, not to the mailing list. Are you aware of that?

Best,
Javier.

On Wed, 8 Nov 2023 at 15:23, Sam Hall <Sam.Hall at jbarisk.com> wrote:
Thanks Javier,

It doesn't happen on the Irish mainland.

Is it possible to define the transformation to use outside the area of usage of the datum transformation using a proj string with something like this "+proj=hgridshift +grids=first,second" in it? Or are you suggesting that gdalwarp doesn't take the area of usage into account and therefore wouldn't look for the second datum shift and use a ballpark transform.

Sam


From:?Javier Jimenez Shaw <j1 at jimenezshaw.com>
Sent:?Wednesday, November 8, 2023 13:47
To:?Sam Hall <Sam.Hall at jbarisk.com>
Cc: gdal-dev at lists.osgeo.org?<gdal-dev at lists.osgeo.org>
Subject:?Re: [gdal-dev] Transforming from EPSG:29902 to EPSG:4326 at the limit of the area of use.

Assuming that it does not happen in the main area of Ireland...I guess it is because it is outside of the area of usage of the datum transformation https://epsg.org/transformation_1641/TM65-to-WGS-84-2.html
Probably (this is just a guess) gdalwarp is not taking it into consideration, making a ballpark transformation between TM65 and WGS84, while ogr2ogr doesn't.

On Wed, 8 Nov 2023 at 13:35, Sam Hall via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
I have some data that covers the whole of the Republic of Ireland, including the Blasket Islands off the West Coast, situated around 24439, 95540 in EPSG:29902. These islands straddle the western boundary of the area of use of the coordinate system -10.56? W.

When transforming a raster dataset from EPSG:29902 to EPSG:4326 using gdalwarp at gdal >= 3.5.2, there seems to be a roughly 50 m shift in the data at the area of use boundary, while if I use ogr2ogr on a vector copy of this data, I don't see this shift.

I have a reproducible example of this at https://gitlab.com/Sam.Hall1/29902_gdalwarp_vs_ogr2ogr.git. In this example I created a rectangular polygon with interpolated points and saved it to a shapefile, then used gdal_rasterize to create a GeoTiff. gdalwarp gives the desired result using a gdal 3.5.1 docker image. The full commands are in the docker-compose.yml in the repository but the parameter's I'm using are:

gdalwarp -t_srs EPSG:4326 -tr 0.000045 0.000045 -tap -overwrite input.tif output.tif
ogr2ogr -t_srs EPSG:4326 output.shp input.shp

I've also seen similar results when transforming from EPSG:27700 to EPSG:4326 in Jersey and Guernsey in the English Channel but I'd have to use a much earlier version of gdal to reproduce the desired result.

Is there a gridshift file or any additional parameters that I could use to get the output to look more continuous across the area of use line?

Sam
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From sebastic at xs4all.nl  Wed Nov  8 11:31:50 2023
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Wed, 8 Nov 2023 20:31:50 +0100
Subject: [gdal-dev] Motion: Adopt GDAL 3.8.0RC1 as 3.8.0 release
In-Reply-To: <27de12e5-ea5f-4379-bd85-5add6763f563@spatialys.com>
References: <27de12e5-ea5f-4379-bd85-5add6763f563@spatialys.com>
Message-ID: <477ce2d6-3c21-4dbe-a74a-a41033418e73@xs4all.nl>

On 11/8/23 09:39, Even Rouault via gdal-dev wrote:
> Adopt GDAL 3.8.0RC1 as 3.8.0 release

Can we get this fixed before the release?

  https://github.com/OSGeo/gdal/pull/8682

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From even.rouault at spatialys.com  Thu Nov  9 02:09:11 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 9 Nov 2023 11:09:11 +0100
Subject: [gdal-dev] GDAL 3.8.0 rc2 is available
In-Reply-To: <c3162e6e-993a-4457-b945-1b8be8d0cb9a@spatialys.com>
References: <c3162e6e-993a-4457-b945-1b8be8d0cb9a@spatialys.com>
Message-ID: <3e4f2305-c23c-40a7-8102-c9af3f5cc4dc@spatialys.com>

Hi,

I have prepared a 3.8.0 RC2. The changes since RC1 are:
- Python utilities: make gdal_edit, gdal_pansharp, gdal_retile and 
ogr_layer_algebra return 0 error code when invoked with --version switch
- Include <cstdint> for uint64_t in cpl_json.h (which broke compilation 
of GDAL reverse dependencies with gcc 13)

Pick up an archive among the following ones (by ascending size):

 ? https://download.osgeo.org/gdal/3.8.0/gdal-3.8.0rc2.tar.xz
 ? https://download.osgeo.org/gdal/3.8.0/gdal-3.8.0rc2.tar.gz
 ? https://download.osgeo.org/gdal/3.8.0/gdal380rc2.zip

Best regards,

Even

Le 06/11/2023 ? 11:49, Even Rouault via gdal-dev a ?crit?:
> Hi,
>
> I have prepared a GDAL/OGR 3.8.0 release candidate.
>
> NEWS at:
>
> ? https://github.com/OSGeo/gdal/blob/v3.8.0RC1/NEWS.md
>
> (small change in it since the initial version I mentioned last week:
> there is a new optional dependency: libaec, needed for some GRIB files)
>
> Pick up an archive among the following ones (by ascending size):
>
> ? https://download.osgeo.org/gdal/3.8.0/gdal-3.8.0rc1.tar.xz
> ? https://download.osgeo.org/gdal/3.8.0/gdal-3.8.0rc1.tar.gz
> ? https://download.osgeo.org/gdal/3.8.0/gdal380rc1.zip
>
> A snapshot of the gdalautotest suite is also available :
>
> https://download.osgeo.org/gdal/3.8.0/gdalautotest-3.8.0rc1.tar.gz
> ? https://download.osgeo.org/gdal/3.8.0/gdalautotest-3.8.0rc1.zip
>
> A snapshot of the documentation is at:
>
> ? https://download.osgeo.org/gdal/3.8.0/gdal380doc.zip
>
> I'll call for a vote promoting it later this week if no serious 
> problems are reported before.
>
> The "release/3.8" branch has been created for all bug fixes related to 
> 3.8.x.
> master is now targeting 3.9.0dev.
>
> Best regards,
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Thu Nov  9 02:12:27 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 9 Nov 2023 11:12:27 +0100
Subject: [gdal-dev] Motion: adopt GDAL 3.8.0RC2 as 3.8.0 release
In-Reply-To: <27de12e5-ea5f-4379-bd85-5add6763f563@spatialys.com>
References: <27de12e5-ea5f-4379-bd85-5add6763f563@spatialys.com>
Message-ID: <51d8d510-b1fd-47a6-b793-ba862a79e4ce@spatialys.com>

Retracting the motion to adopt 3.8.0RC1 and updating it to:

Motion:

Adopt GDAL 3.8.0RC2 as 3.8.0 release

Starting with my +1

Even

Le 08/11/2023 ? 09:39, Even Rouault via gdal-dev a ?crit?:
> Hi,
>
> Motion:
>
> Adopt GDAL 3.8.0RC1 as 3.8.0 release
>
> Starting with my +1
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jukka.rahkonen at maanmittauslaitos.fi  Thu Nov  9 02:19:38 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Thu, 9 Nov 2023 10:19:38 +0000
Subject: [gdal-dev] Motion: adopt GDAL 3.8.0RC2 as 3.8.0 release
In-Reply-To: <51d8d510-b1fd-47a6-b793-ba862a79e4ce@spatialys.com>
References: <27de12e5-ea5f-4379-bd85-5add6763f563@spatialys.com>
 <51d8d510-b1fd-47a6-b793-ba862a79e4ce@spatialys.com>
Message-ID: <AM0PR09MB3219CE2661CC11F2421F43F0FDAFA@AM0PR09MB3219.eurprd09.prod.outlook.com>

+1

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault via gdal-dev
L?hetetty: torstai 9. marraskuuta 2023 12.12
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Motion: adopt GDAL 3.8.0RC2 as 3.8.0 release

Retracting the motion to adopt 3.8.0RC1 and updating it to:

Motion:

Adopt GDAL 3.8.0RC2 as 3.8.0 release

Starting with my +1

Even

Le 08/11/2023 ? 09:39, Even Rouault via gdal-dev a ?crit?:
> Hi,
>
> Motion:
>
> Adopt GDAL 3.8.0RC1 as 3.8.0 release
>
> Starting with my +1
>
> Even
>
-- 

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org

From j1 at jimenezshaw.com  Thu Nov  9 02:30:23 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 9 Nov 2023 11:30:23 +0100
Subject: [gdal-dev] Motion: adopt GDAL 3.8.0RC2 as 3.8.0 release
In-Reply-To: <AM0PR09MB3219CE2661CC11F2421F43F0FDAFA@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <27de12e5-ea5f-4379-bd85-5add6763f563@spatialys.com>
 <51d8d510-b1fd-47a6-b793-ba862a79e4ce@spatialys.com>
 <AM0PR09MB3219CE2661CC11F2421F43F0FDAFA@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <CADRrdKvPA-yvBxQN_q8XY9tUe0CjmP2TceziNVb+wNBRZ=r3xA@mail.gmail.com>

+1 Javier

On Thu, 9 Nov 2023, 11:19 Rahkonen Jukka via gdal-dev, <
gdal-dev at lists.osgeo.org> wrote:

> +1
>
> -Jukka Rahkonen-
>
> -----Alkuper?inen viesti-----
> L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even
> Rouault via gdal-dev
> L?hetetty: torstai 9. marraskuuta 2023 12.12
> Vastaanottaja: gdal-dev at lists.osgeo.org
> Aihe: [gdal-dev] Motion: adopt GDAL 3.8.0RC2 as 3.8.0 release
>
> Retracting the motion to adopt 3.8.0RC1 and updating it to:
>
> Motion:
>
> Adopt GDAL 3.8.0RC2 as 3.8.0 release
>
> Starting with my +1
>
> Even
>
> Le 08/11/2023 ? 09:39, Even Rouault via gdal-dev a ?crit :
> > Hi,
> >
> > Motion:
> >
> > Adopt GDAL 3.8.0RC1 as 3.8.0 release
> >
> > Starting with my +1
> >
> > Even
> >
> --
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231109/0d594614/attachment.htm>

From naima.etienne at gmail.com  Thu Nov  9 04:40:32 2023
From: naima.etienne at gmail.com (Naima Dambrine)
Date: Thu, 9 Nov 2023 13:40:32 +0100
Subject: [gdal-dev] Fwd: oblique cuts on a raster using python GDAL
In-Reply-To: <b5836c1c-e583-403f-bde7-6659b54f9eec@betaapp.fastmail.com>
References: <CAOHmAia+=2wach=vj_e=0kEvWU2AZo02qohaWVjE4B4d1feKRw@mail.gmail.com>
 <AM0PR09MB321946742982233B38C84C75FDABA@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CADRrdKsMs8Hou7TyWeGw-ioNUo0HkH3hTMEjsfdeK7=WF5Rt-Q@mail.gmail.com>
 <CAOHmAiZtV-xA5N-i-OoGTQBMQrmcuik2iwqoFxU96zntRhb_8w@mail.gmail.com>
 <CADRrdKtGSo4r4FSW4+Ch+JgQype4amcM6eUaG-GKYttfAYZw1Q@mail.gmail.com>
 <CAOHmAiYmLYroAGEQ32_ZtF04k9hBvk70txoQPMgbcwfC5oHMTw@mail.gmail.com>
 <CADRrdKu5iNXz7V9h=-rHCXkVG4ZBP4qQPbtxobxo5iETMQ98uQ@mail.gmail.com>
 <CAOHmAiby+9R3reO5h5DcuWfWoxcnP2+y2n0XDWCswJLf+A7Umw@mail.gmail.com>
 <CAOHmAiZs4Kq9pne28UkHgBSuToNQC7je+Zf8vquvhw=56m3EKg@mail.gmail.com>
 <b5836c1c-e583-403f-bde7-6659b54f9eec@betaapp.fastmail.com>
Message-ID: <CAOHmAiaVdsWNkb8XXQD2jCS0D-FEVtOtzAQWAsu6KLPZQpSoMg@mail.gmail.com>

Hi Laurentiu,

Thank you, I think I'm not concerned because I use GTiff format as output,
then I specify a deflate compression with predictor=2 and zlevel=9.
Please, tell me if it is correct or not.

Na?ma

Le mer. 8 nov. 2023 ? 15:41, Lauren?iu Nicola <lnicola at dend.ro> a ?crit :

> Hi Na?ma,
>
> I'm a bit late to the party, but note that the JP2OpenJPEG produces lossy
> output by default. You need to pass REVERSIBLE=YES and QUALITY=100 as
> creation options to make it use lossless compression.
>
> Laurentiu
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231109/9452a4d9/attachment.htm>

From lnicola at dend.ro  Thu Nov  9 04:42:45 2023
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Thu, 09 Nov 2023 14:42:45 +0200
Subject: [gdal-dev] Fwd: oblique cuts on a raster using python GDAL
In-Reply-To: <CAOHmAiaVdsWNkb8XXQD2jCS0D-FEVtOtzAQWAsu6KLPZQpSoMg@mail.gmail.com>
References: <CAOHmAia+=2wach=vj_e=0kEvWU2AZo02qohaWVjE4B4d1feKRw@mail.gmail.com>
 <AM0PR09MB321946742982233B38C84C75FDABA@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CADRrdKsMs8Hou7TyWeGw-ioNUo0HkH3hTMEjsfdeK7=WF5Rt-Q@mail.gmail.com>
 <CAOHmAiZtV-xA5N-i-OoGTQBMQrmcuik2iwqoFxU96zntRhb_8w@mail.gmail.com>
 <CADRrdKtGSo4r4FSW4+Ch+JgQype4amcM6eUaG-GKYttfAYZw1Q@mail.gmail.com>
 <CAOHmAiYmLYroAGEQ32_ZtF04k9hBvk70txoQPMgbcwfC5oHMTw@mail.gmail.com>
 <CADRrdKu5iNXz7V9h=-rHCXkVG4ZBP4qQPbtxobxo5iETMQ98uQ@mail.gmail.com>
 <CAOHmAiby+9R3reO5h5DcuWfWoxcnP2+y2n0XDWCswJLf+A7Umw@mail.gmail.com>
 <CAOHmAiZs4Kq9pne28UkHgBSuToNQC7je+Zf8vquvhw=56m3EKg@mail.gmail.com>
 <b5836c1c-e583-403f-bde7-6659b54f9eec@betaapp.fastmail.com>
 <CAOHmAiaVdsWNkb8XXQD2jCS0D-FEVtOtzAQWAsu6KLPZQpSoMg@mail.gmail.com>
Message-ID: <1dd611f5-c36e-4f37-98d3-e80490430610@app.fastmail.com>

Yes, that's lossless. I was just offering a potential explanation for the issue you had with JPEG2000.

Laurentiu

On Thu, Nov 9, 2023, at 14:40, Naima Dambrine wrote:
> Hi Laurentiu,
> 
> Thank you, I think I'm not concerned because I use GTiff format as output, then I specify a deflate compression with predictor=2 and zlevel=9.
> Please, tell me if it is correct or not.
> 
> Na?ma
> 
> Le mer. 8 nov. 2023 ? 15:41, Lauren?iu Nicola <lnicola at dend.ro> a ?crit :
>> __
>> Hi Na?ma,
>> 
>> I'm a bit late to the party, but note that the JP2OpenJPEG produces lossy output by default. You need to pass REVERSIBLE=YES and QUALITY=100 as creation options to make it use lossless compression.
>> 
>> Laurentiu
>> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231109/0a53de0d/attachment-0001.htm>

From howard at hobu.co  Thu Nov  9 09:30:03 2023
From: howard at hobu.co (Howard Butler)
Date: Thu, 9 Nov 2023 11:30:03 -0600
Subject: [gdal-dev] Motion: adopt GDAL 3.8.0RC2 as 3.8.0 release
In-Reply-To: <CADRrdKvPA-yvBxQN_q8XY9tUe0CjmP2TceziNVb+wNBRZ=r3xA@mail.gmail.com>
References: <27de12e5-ea5f-4379-bd85-5add6763f563@spatialys.com>
 <51d8d510-b1fd-47a6-b793-ba862a79e4ce@spatialys.com>
 <AM0PR09MB3219CE2661CC11F2421F43F0FDAFA@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CADRrdKvPA-yvBxQN_q8XY9tUe0CjmP2TceziNVb+wNBRZ=r3xA@mail.gmail.com>
Message-ID: <A199EAB4-57F0-4CC5-A22A-820193A0FD45@hobu.co>

+1 Howard

> On Nov 9, 2023, at 4:30?AM, Javier Jimenez Shaw via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
> 
> +1 Javier
> 
> On Thu, 9 Nov 2023, 11:19 Rahkonen Jukka via gdal-dev, <gdal-dev at lists.osgeo.org> wrote:
> +1
> 
> -Jukka Rahkonen-
> 
> -----Alkuper?inen viesti-----
> L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault via gdal-dev
> L?hetetty: torstai 9. marraskuuta 2023 12.12
> Vastaanottaja: gdal-dev at lists.osgeo.org
> Aihe: [gdal-dev] Motion: adopt GDAL 3.8.0RC2 as 3.8.0 release
> 
> Retracting the motion to adopt 3.8.0RC1 and updating it to:
> 
> Motion:
> 
> Adopt GDAL 3.8.0RC2 as 3.8.0 release
> 
> Starting with my +1
> 
> Even
> 
> Le 08/11/2023 ? 09:39, Even Rouault via gdal-dev a ?crit :
> > Hi,
> >
> > Motion:
> >
> > Adopt GDAL 3.8.0RC1 as 3.8.0 release
> >
> > Starting with my +1
> >
> > Even
> >
> -- 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From mandeepsinghkalra at gmail.com  Mon Nov 13 04:02:58 2023
From: mandeepsinghkalra at gmail.com (Mandeep Singh)
Date: Mon, 13 Nov 2023 17:32:58 +0530
Subject: [gdal-dev] GDAL PDF Export: Support for different page sizes and
 multi-paged PDF
Message-ID: <CAAho42YmwHX8ydP0a=1WKK9h-0JJsqtGZr44KjAv3r0PZY0-xw@mail.gmail.com>

Hi,

I am currently using the GDAL Library for exporting the PDFs. Using the
gdal_translate command to generate the PDF from VRT, I am able to generate
a PDF. I have below queries:

- Is there any option to export a multi page PDF?
- How can I control the page size of each page in the PDF ?


Regards
Mandeep
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231113/1576739e/attachment.htm>

From even.rouault at spatialys.com  Mon Nov 13 09:23:41 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 13 Nov 2023 18:23:41 +0100
Subject: [gdal-dev] Motion: adopt GDAL 3.8.0RC2 as 3.8.0 release
In-Reply-To: <51d8d510-b1fd-47a6-b793-ba862a79e4ce@spatialys.com>
References: <27de12e5-ea5f-4379-bd85-5add6763f563@spatialys.com>
 <51d8d510-b1fd-47a6-b793-ba862a79e4ce@spatialys.com>
Message-ID: <5f703fa1-40c1-4dcc-ad0b-3c63afa25efb@spatialys.com>

I declare this motion passed with +1 from PSC members JukkaR, JavierJS, 
HowardB and me

Even

Le 09/11/2023 ? 11:12, Even Rouault via gdal-dev a ?crit?:
> Retracting the motion to adopt 3.8.0RC1 and updating it to:
>
> Motion:
>
> Adopt GDAL 3.8.0RC2 as 3.8.0 release
>
> Starting with my +1
>
> Even
>
> Le 08/11/2023 ? 09:39, Even Rouault via gdal-dev a ?crit?:
>> Hi,
>>
>> Motion:
>>
>> Adopt GDAL 3.8.0RC1 as 3.8.0 release
>>
>> Starting with my +1
>>
>> Even
>>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Mon Nov 13 09:48:52 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 13 Nov 2023 18:48:52 +0100
Subject: [gdal-dev] GDAL 3.8.0 is released
Message-ID: <3b362e68-8003-4414-a0d3-a3a0e4657299@spatialys.com>

Hi,

On behalf of the GDAL/OGR development team and community, I am pleased to
announce the release of GDAL/OGR 3.8.0. GDAL/OGR is a C++ geospatial data
access library for raster and vector file formats, databases and web 
services.
It includes bindings for several languages, and a variety of command line
tools.

http://gdal.org/

The 3.8.0 release is a new feature release with the following highlights:

* Add [JSONFG](https://gdal.org/drivers/vector/jsonfg.html) read/write 
vector driver for OGC Features and Geometries JSON.
* Add [PMTiles](https://gdal.org/drivers/vector/pmtiles.html) read/write 
vector driver for PMTiles v3 datasets containing MVT PBF tiles
* Add [S102](https://gdal.org/drivers/raster/s102.html) raster read-only 
driver for S-102 bathymetric products (depends on libhdf5)
* Add [gdal_footprint](https://gdal.org/programs/gdal_footprint.html) 
utility: compute the footprint of a raster file, taking into account 
nodata/mask band, and generating polygons/multipolygons corresponding to 
areas where pixels are valid (#6264)
* Python bindings: various enhancements to reduce the number of 
"gotchas" related to inter-object ownership relationships, and a few 
syntaxic sugar enhancements
* Arrow interface: improve spatial and attribute filtering on read side; 
add write side with OGRLayer::WriteArrowBatch()
* GeoPackage: much faster spatial index creation (~ 3-4 times faster)
* ARG driver deprecated: will be removed in 3.9.0
* Bump of shared lib major version

More complete information on the new features and fixes in the 3.8.0 
release can be found at:

https://github.com/OSGeo/gdal/blob/v3.8.0/NEWS.md

The release can be downloaded from:
 ? * https://download.osgeo.org/gdal/3.8.0/gdal380.zip - source as a zip
 ? * https://download.osgeo.org/gdal/3.8.0/gdal-3.8.0.tar.gz - source as 
.tar.gz
 ? * https://download.osgeo.org/gdal/3.8.0/gdal-3.8.0.tar.xz - source as 
.tar.xz
 ? * https://download.osgeo.org/gdal/3.8.0/gdalautotest-3.8.0.tar.gz - 
test suite
 ? * https://download.osgeo.org/gdal/3.8.0/gdal380doc.zip - 
documentation / website

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From public at postholer.com  Mon Nov 13 10:54:22 2023
From: public at postholer.com (Scott)
Date: Mon, 13 Nov 2023 10:54:22 -0800
Subject: [gdal-dev] GDAL 3.8.0 is released
In-Reply-To: <3b362e68-8003-4414-a0d3-a3a0e4657299@spatialys.com>
References: <3b362e68-8003-4414-a0d3-a3a0e4657299@spatialys.com>
Message-ID: <f3d2d55f-e6d4-4efa-aea9-16e75c62388a@postholer.com>

Yee haw! Thanks guys for all your hard work!


On 11/13/23 09:48, Even Rouault via gdal-dev wrote:
> Hi,
> 
> On behalf of the GDAL/OGR development team and community, I am pleased to
> announce the release of GDAL/OGR 3.8.0. GDAL/OGR is a C++ geospatial data
> access library for raster and vector file formats, databases and web 
> services.
> It includes bindings for several languages, and a variety of command line
> tools.
> 
> http://gdal.org/
> 
> The 3.8.0 release is a new feature release with the following highlights:
> 
> * Add [JSONFG](https://gdal.org/drivers/vector/jsonfg.html) read/write 
> vector driver for OGC Features and Geometries JSON.
> * Add [PMTiles](https://gdal.org/drivers/vector/pmtiles.html) read/write 
> vector driver for PMTiles v3 datasets containing MVT PBF tiles
> * Add [S102](https://gdal.org/drivers/raster/s102.html) raster read-only 
> driver for S-102 bathymetric products (depends on libhdf5)
> * Add [gdal_footprint](https://gdal.org/programs/gdal_footprint.html) 
> utility: compute the footprint of a raster file, taking into account 
> nodata/mask band, and generating polygons/multipolygons corresponding to 
> areas where pixels are valid (#6264)
> * Python bindings: various enhancements to reduce the number of 
> "gotchas" related to inter-object ownership relationships, and a few 
> syntaxic sugar enhancements
> * Arrow interface: improve spatial and attribute filtering on read side; 
> add write side with OGRLayer::WriteArrowBatch()
> * GeoPackage: much faster spatial index creation (~ 3-4 times faster)
> * ARG driver deprecated: will be removed in 3.9.0
> * Bump of shared lib major version
> 
> More complete information on the new features and fixes in the 3.8.0 
> release can be found at:
> 
> https://github.com/OSGeo/gdal/blob/v3.8.0/NEWS.md
> 
> The release can be downloaded from:
>  ? * https://download.osgeo.org/gdal/3.8.0/gdal380.zip - source as a zip
>  ? * https://download.osgeo.org/gdal/3.8.0/gdal-3.8.0.tar.gz - source as 
> .tar.gz
>  ? * https://download.osgeo.org/gdal/3.8.0/gdal-3.8.0.tar.xz - source as 
> .tar.xz
>  ? * https://download.osgeo.org/gdal/3.8.0/gdalautotest-3.8.0.tar.gz - 
> test suite
>  ? * https://download.osgeo.org/gdal/3.8.0/gdal380doc.zip - 
> documentation / website
> 
> Best regards,
> 
> Even
> 

From even.rouault at spatialys.com  Mon Nov 13 11:41:18 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 13 Nov 2023 20:41:18 +0100
Subject: [gdal-dev] Call for review and discussion on RFC96: Deferred
 in-tree C++ plugin loading
In-Reply-To: <876e96b5-b416-4d0e-a997-0ca65d619ece@spatialys.com>
References: <7004463d-3e6e-4084-a87b-1d66b8fc218f@spatialys.com>
 <876e96b5-b416-4d0e-a997-0ca65d619ece@spatialys.com>
Message-ID: <4b5bf842-2b08-43fe-a03d-0531cb300fb5@spatialys.com>

Hi,

The OSGeo code sprint last week has been the opportunity to advance the 
candidate implementation of the RFC. It is now available at 
https://github.com/OSGeo/gdal/pull/8695 :

  * All drivers that can be built as plugins and depend on external
    libraries have been converted to use the deferred plugin loading
    capability. Plus a few other drivers that only depend on core
  * The PNG, JPEG, GIF, MRF, NITF and planetary (PDS, PDS4, ISIS2,
    ISIS3, VICAR) drivers can also now be built as plugins (when not
    using the in-tree vendored libraries such as libpng, libjpeg, etc.),
    and use deferred plugin loading

On my full configuration with all drivers that can be built as plugins 
effectively built as plugins - that is those that only depend on 
libgdal, with -DGDAL_ENABLE_PLUGINS_NO_DEPS=ON and those that depend on 
third-party libraries, with -DGDAL_ENABLE_PLUGINS=ON -, the 
initialization time has dropped from ~ 300 ms to 70 ms. If building only 
as plugins drivers that depend on third-party libraries?with 
-DGDAL_ENABLE_PLUGINS=ON (which is the config that makes most sense), it 
drops to 26 ms, with all 55 plugins in deferred loading mode. One of the 
biggest culprit identified during the conversion process was the DGNv8 / 
DWG driver wich links to gazillion shared libraries of the Teigha SDK.

I've also added a bit of extra user friendliness:

 ?? When a plugin driver is known of core libgdal, but not available as 
a plugin at
 ??? runtime, GDAL will inform the user that the plugin is not 
available, but could
 ??? be installed. It is possible to give more hints on how to install a 
plugin
 ??? by setting the following option:

 ??? .. option:: 
GDAL_DRIVER_<driver_name>_PLUGIN_INSTALLATION_MESSAGE:STRING

 ??? .. option:: OGR_DRIVER_<driver_name>_PLUGIN_INSTALLATION_MESSAGE:STRING

 ??????? Custom message to give a hint to the user how to install a 
missing plugin


 ??? For example, if doing a build with::

 ??????? cmake .. -DOGR_DRIVER_PARQUET_PLUGIN_INSTALLATION_MESSAGE="You 
may install it with with 'conda install -c conda-forge 
libgdal-arrow-parquet'"

 ??? and opening a Parquet file while the plugin is not installed will 
display the
 ??? following error::

 ??????? $ ogrinfo poly.parquet
 ??????? ERROR 4: `poly.parquet' not recognized as a supported file 
format. It could have been recognized by driver Parquet, but plugin 
ogr_Parquet.so is not available in your installation. You may install it 
with with 'conda install -c conda-forge libgdal-arrow-parquet'

I'll submit soon the RFC to vote if there are no further remarks.

Even

Le 06/11/2023 ? 14:50, Even Rouault via gdal-dev a ?crit?:
> Hi,
>
> I've revised a bit the RFC 
> (https://github.com/OSGeo/gdal/pull/8648/commits/b7053db2f433275edf16286596e71f3ceb9738a5) 
> to unify the way the plugin driver proxy and the actual driver declare 
> their metadata. This avoids the new GDALPluginDriverFeatures class, 
> and will limit the risk of omissions or inconsistencies between the 
> proxy and actual drivers.
>
> Even
>
> Le 02/11/2023 ? 12:59, Even Rouault via gdal-dev a ?crit?:
>> Hi,
>>
>> I'm seeking for feedback and review on a new RFC (RFC 96: Deferred 
>> in-tree C++ plugin loading),
>> detailed in https://github.com/OSGeo/gdal/pull/8648, whose summary is:
>>
>> This RFC adds a mechanism to defer the loading of in-tree C++ plugin 
>> drivers to
>> the point where their executable code is actually needed, and 
>> converts a number
>> of relevant drivers to use that mechanism. The aim is to allow for 
>> more modular
>> GDAL builds, while improving the performance of plugin loading.
>>
>> (This is material only for GDAL 3.9 of course)
>>
>> Even
>>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231113/c56af9a9/attachment.htm>

From lnicola at dend.ro  Tue Nov 14 05:34:52 2023
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Tue, 14 Nov 2023 15:34:52 +0200
Subject: [gdal-dev] GDAL PDF Export: Support for different page sizes
 and multi-paged PDF
In-Reply-To: <CAAho42YmwHX8ydP0a=1WKK9h-0JJsqtGZr44KjAv3r0PZY0-xw@mail.gmail.com>
References: <CAAho42YmwHX8ydP0a=1WKK9h-0JJsqtGZr44KjAv3r0PZY0-xw@mail.gmail.com>
Message-ID: <15f46d70-b844-4d8b-ab2a-d793e1b11c48@app.fastmail.com>

Hi Mandeep,

I've never used it, but perhaps you should try https://gdal.org/drivers/raster/pdf.html#creation-of-pdf-file-from-a-xml-composition-file-gdal-3-0 in combination with gdal_create?

Lauren?iu

On Mon, Nov 13, 2023, at 14:02, Mandeep Singh via gdal-dev wrote:
> Hi,
> 
> I am currently using the GDAL Library for exporting the PDFs. Using the  gdal_translate command to generate the PDF from VRT, I am able to generate a PDF. I have below queries:
> 
> - Is there any option to export a multi page PDF?
> - How can I control the page size of each page in the PDF ?
> 
> 
> Regards
> Mandeep
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231114/b7a4049f/attachment.htm>

From mandeepsinghkalra at gmail.com  Tue Nov 14 09:56:43 2023
From: mandeepsinghkalra at gmail.com (Mandeep Singh)
Date: Tue, 14 Nov 2023 23:26:43 +0530
Subject: [gdal-dev] GDAL PDF Export: Support for different page sizes
 and multi-paged PDF
In-Reply-To: <15f46d70-b844-4d8b-ab2a-d793e1b11c48@app.fastmail.com>
References: <CAAho42YmwHX8ydP0a=1WKK9h-0JJsqtGZr44KjAv3r0PZY0-xw@mail.gmail.com>
 <15f46d70-b844-4d8b-ab2a-d793e1b11c48@app.fastmail.com>
Message-ID: <CAAho42bNXqF=o1w8Feaabs36d8LJpYdVw6u+EAaN6kCiV9ZY3A@mail.gmail.com>

Thanks, i tried the same but for some reason the vector data was not
displayed in the pdf i guess due to georeferenced control points

1) How do i set the control points based on page size and dpi, eg if i have
to use EPSG 3857 system. Is there any utility i can use to do this
conversion ?


2) In the vector dataset, can i use VRT file instead of shape files ?



Regards
Mandeep

On Tue, 14 Nov 2023 at 7:05 PM, Lauren?iu Nicola via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi Mandeep,
>
> I've never used it, but perhaps you should try
> https://gdal.org/drivers/raster/pdf.html#creation-of-pdf-file-from-a-xml-composition-file-gdal-3-0 in
> combination with gdal_create?
>
> Lauren?iu
>
> On Mon, Nov 13, 2023, at 14:02, Mandeep Singh via gdal-dev wrote:
>
> Hi,
>
> I am currently using the GDAL Library for exporting the PDFs. Using the
> gdal_translate command to generate the PDF from VRT, I am able to generate
> a PDF. I have below queries:
>
> - Is there any option to export a multi page PDF?
> - How can I control the page size of each page in the PDF ?
>
>
> Regards
> Mandeep
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231114/bf219593/attachment.htm>

From lnicola at dend.ro  Tue Nov 14 10:04:20 2023
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Tue, 14 Nov 2023 20:04:20 +0200
Subject: [gdal-dev] GDAL PDF Export: Support for different page sizes
 and multi-paged PDF
In-Reply-To: <CAAho42bNXqF=o1w8Feaabs36d8LJpYdVw6u+EAaN6kCiV9ZY3A@mail.gmail.com>
References: <CAAho42YmwHX8ydP0a=1WKK9h-0JJsqtGZr44KjAv3r0PZY0-xw@mail.gmail.com>
 <15f46d70-b844-4d8b-ab2a-d793e1b11c48@app.fastmail.com>
 <CAAho42bNXqF=o1w8Feaabs36d8LJpYdVw6u+EAaN6kCiV9ZY3A@mail.gmail.com>
Message-ID: <ee908772-5508-41b9-a157-55c84e386c8d@app.fastmail.com>



On Tue, Nov 14, 2023, at 19:56, Mandeep Singh wrote:
> Thanks, i tried the same but for some reason the vector data was not displayed in the pdf i guess due to georeferenced control points
> 
> 1) How do i set the control points based on page size and dpi, eg if i have to use EPSG 3857 system. Is there any utility i can use to do this conversion ?
I don't know, maybe it's enough to set SRS, BoundingBox and BoundingPolygon to your EPSG:3857 values, without any control points. The example there seems to take a more flexible approach.

> 
> 2) In the vector dataset, can i use VRT file instead of shape files ?
If your VRT has vector data, I don't see why not.

Laurentiu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231114/ced9350b/attachment.htm>

From even.rouault at spatialys.com  Tue Nov 14 10:16:29 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 14 Nov 2023 19:16:29 +0100
Subject: [gdal-dev] Is the SOSI Norwegian driver still useful?
Message-ID: <ce4642a7-025f-4d7e-985c-e060d200d5a9@spatialys.com>

Hi,

During the OSGeo code sprint, it was mentioned to me that the OGR SOSI 
driver (https://gdal.org/drivers/vector/sosi.html) is probably no longer 
relevant. Kartverket, the Norwegian mapping agency, which is the entity 
delivering datasets in the SOSI standard and which contributed the 
driver in 2010 has changed the format a few years ago and libfyba + the 
OGR SOSI driver haven't been updated to deal with it. It seems unlikely 
that Kartverket will provide updates to libfyba + OGR SOSI driver, given 
that the updated SOSI format is going to be totally retired in a near 
future. Apparently the future/new standard will be GML based, indeed 
totally different of the old custom SOSI format.

It thus seems its only use now would be limited to SOSI datasets 
produced up to a few years ago, which is a pretty limited use case. If 
there's no longer any use of it, it could be a good candidate for being 
removed.

==> Are there users still using the existing OGR SOSI driver ?

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From sebastic at xs4all.nl  Tue Nov 14 10:48:42 2023
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Tue, 14 Nov 2023 19:48:42 +0100
Subject: [gdal-dev] Is the SOSI Norwegian driver still useful?
In-Reply-To: <ce4642a7-025f-4d7e-985c-e060d200d5a9@spatialys.com>
References: <ce4642a7-025f-4d7e-985c-e060d200d5a9@spatialys.com>
Message-ID: <9a4f3699-45ee-43b3-b957-046fa26b5324@xs4all.nl>

On 11/14/23 19:16, Even Rouault via gdal-dev wrote:
> ==> Are there users still using the existing OGR SOSI driver ?

We don't have metrics for the OGR driver, but libfyba0 still has 513 
users in popcon.

  https://qa.debian.org/popcon.php?package=fyba

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From even.rouault at spatialys.com  Tue Nov 14 11:05:09 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 14 Nov 2023 20:05:09 +0100
Subject: [gdal-dev] Is the SOSI Norwegian driver still useful?
In-Reply-To: <9a4f3699-45ee-43b3-b957-046fa26b5324@xs4all.nl>
References: <ce4642a7-025f-4d7e-985c-e060d200d5a9@spatialys.com>
 <9a4f3699-45ee-43b3-b957-046fa26b5324@xs4all.nl>
Message-ID: <8d76aca3-563f-4490-aecb-539ab355274e@spatialys.com>


Le 14/11/2023 ? 19:48, Sebastiaan Couwenberg via gdal-dev a ?crit?:
> On 11/14/23 19:16, Even Rouault via gdal-dev wrote:
>> ==> Are there users still using the existing OGR SOSI driver ?
>
> We don't have metrics for the OGR driver, but libfyba0 still has 513 
> users in popcon.
>
> ?https://qa.debian.org/popcon.php?package=fyba

Bas,

Looking in the same column in 
https://qa.debian.org/popcon.php?package=gdal shows that gdal-bin would 
have only 520 users...? which seems highly suspiciously low compared to 
the super specialized and low level libfyba.? I would bet that > 99% of 
installations of libfyba0 are because libgdal links to it, which doesn't 
mean that it is used for useful stuff (the other reverse dependency of 
libfyba in Debian is sosi2osm, which according to 
https://qa.debian.org/popcon.php?package=sosi2osm, has only 3 users)

What if people build a Docker image of GDAL from source and install its 
dependencies with apt install libfyba-dev: will that trigger a hit in 
popcorn?

I'm more interested in Norwegian flesh and bones users testifying about 
their use or non-use of SOSI.

Even

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From sebastic at xs4all.nl  Tue Nov 14 11:41:26 2023
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Tue, 14 Nov 2023 20:41:26 +0100
Subject: [gdal-dev] Is the SOSI Norwegian driver still useful?
In-Reply-To: <8d76aca3-563f-4490-aecb-539ab355274e@spatialys.com>
References: <ce4642a7-025f-4d7e-985c-e060d200d5a9@spatialys.com>
 <9a4f3699-45ee-43b3-b957-046fa26b5324@xs4all.nl>
 <8d76aca3-563f-4490-aecb-539ab355274e@spatialys.com>
Message-ID: <7b5f2826-254f-4229-b496-df57c19695b3@xs4all.nl>

On 11/14/23 20:05, Even Rouault via gdal-dev wrote:
> Le 14/11/2023 ? 19:48, Sebastiaan Couwenberg via gdal-dev a ?crit?:
>> On 11/14/23 19:16, Even Rouault via gdal-dev wrote:
>>> ==> Are there users still using the existing OGR SOSI driver ?
>>
>> We don't have metrics for the OGR driver, but libfyba0 still has 513 
>> users in popcon.
>>
>> ?https://qa.debian.org/popcon.php?package=fyba
> 
> Looking in the same column in 
> https://qa.debian.org/popcon.php?package=gdal shows that gdal-bin would 
> have only 520 users...? which seems highly suspiciously low compared to 
> the super specialized and low level libfyba.? I would bet that > 99% of 
> installations of libfyba0 are because libgdal links to it, which doesn't 
> mean that it is used for useful stuff (the other reverse dependency of 
> libfyba in Debian is sosi2osm, which according to 
> https://qa.debian.org/popcon.php?package=sosi2osm, has only 3 users)

sosi2osm was removed from Debian during the bookworm development cycle.

The only rdep of fyba in Debian is gdal now.

Almost all installations of libfyba are due to it being a dependency of 
gdal, that's why it has 23911 installations but only 513 votes (regular 
users).

> What if people build a Docker image of GDAL from source and install its 
> dependencies with apt install libfyba-dev: will that trigger a hit in 
> popcorn?

popcon is opt-in, there are only ~230000 systems running popcon out of 
millions of Debian installations. Hence it's mostly usable to provide 
insight into relative popularity compared to other packages in Debian. 
Container images are unlikely to enable popcon, the Docker images don't 
even have it installed.

> I'm more interested in Norwegian flesh and bones users testifying about 
> their use or non-use of SOSI.

Me too, if there are none left we can also remove the fyba package from 
Debian.

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From nagyrobi_r at yahoo.com  Tue Nov 14 11:53:50 2023
From: nagyrobi_r at yahoo.com (nagyrobi_r at yahoo.com)
Date: Tue, 14 Nov 2023 19:53:50 +0000 (UTC)
Subject: [gdal-dev] Is the SOSI Norwegian driver still useful?
In-Reply-To: <7b5f2826-254f-4229-b496-df57c19695b3@xs4all.nl>
References: <ce4642a7-025f-4d7e-985c-e060d200d5a9@spatialys.com>
 <9a4f3699-45ee-43b3-b957-046fa26b5324@xs4all.nl>
 <8d76aca3-563f-4490-aecb-539ab355274e@spatialys.com>
 <7b5f2826-254f-4229-b496-df57c19695b3@xs4all.nl>
Message-ID: <539759427.1949979.1699991630453@mail.yahoo.com>

Hi all!?
I use SOSI gdal conversion. So in case you are wondering, there is at least one user.?
Kind regards,?Robet Nagy?
Sent from Yahoo Mail on Android 
 
  On Tue, Nov 14, 2023 at 8:41 PM, Sebastiaan Couwenberg via gdal-dev<gdal-dev at lists.osgeo.org> wrote:   On 11/14/23 20:05, Even Rouault via gdal-dev wrote:
> Le 14/11/2023 ? 19:48, Sebastiaan Couwenberg via gdal-dev a ?crit?:
>> On 11/14/23 19:16, Even Rouault via gdal-dev wrote:
>>> ==> Are there users still using the existing OGR SOSI driver ?
>>
>> We don't have metrics for the OGR driver, but libfyba0 still has 513 
>> users in popcon.
>>
>> ?https://qa.debian.org/popcon.php?package=fyba
> 
> Looking in the same column in 
> https://qa.debian.org/popcon.php?package=gdal shows that gdal-bin would 
> have only 520 users...? which seems highly suspiciously low compared to 
> the super specialized and low level libfyba.? I would bet that > 99% of 
> installations of libfyba0 are because libgdal links to it, which doesn't 
> mean that it is used for useful stuff (the other reverse dependency of 
> libfyba in Debian is sosi2osm, which according to 
> https://qa.debian.org/popcon.php?package=sosi2osm, has only 3 users)

sosi2osm was removed from Debian during the bookworm development cycle.

The only rdep of fyba in Debian is gdal now.

Almost all installations of libfyba are due to it being a dependency of 
gdal, that's why it has 23911 installations but only 513 votes (regular 
users).

> What if people build a Docker image of GDAL from source and install its 
> dependencies with apt install libfyba-dev: will that trigger a hit in 
> popcorn?

popcon is opt-in, there are only ~230000 systems running popcon out of 
millions of Debian installations. Hence it's mostly usable to provide 
insight into relative popularity compared to other packages in Debian. 
Container images are unlikely to enable popcon, the Docker images don't 
even have it installed.

> I'm more interested in Norwegian flesh and bones users testifying about 
> their use or non-use of SOSI.

Me too, if there are none left we can also remove the fyba package from 
Debian.

Kind Regards,

Bas

-- 
? GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146? 50D1 6750 F10A E88D 4AF1

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev
  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231114/449962cd/attachment.htm>

From even.rouault at spatialys.com  Tue Nov 14 12:02:38 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 14 Nov 2023 21:02:38 +0100
Subject: [gdal-dev] Is the SOSI Norwegian driver still useful?
In-Reply-To: <539759427.1949979.1699991630453@mail.yahoo.com>
References: <ce4642a7-025f-4d7e-985c-e060d200d5a9@spatialys.com>
 <9a4f3699-45ee-43b3-b957-046fa26b5324@xs4all.nl>
 <8d76aca3-563f-4490-aecb-539ab355274e@spatialys.com>
 <7b5f2826-254f-4229-b496-df57c19695b3@xs4all.nl>
 <539759427.1949979.1699991630453@mail.yahoo.com>
Message-ID: <5d95bf93-56b9-451b-89c0-e07c3e2cfe5a@spatialys.com>

Robet,

Can you confirm the information I got that the driver can only be used 
to convert legacy datasets (can they still be downloaded from web 
sites?) and not recent ones ? How much time still do you plan to use it ?

Le 14/11/2023 ? 20:53, nagyrobi_r--- via gdal-dev a ?crit?:
> Hi all!
>
> I use SOSI gdal conversion. So in case you are wondering, there is at 
> least one user.
>
> Kind regards,
> Robet Nagy
>
> Sent from Yahoo Mail on Android 
> <https://mail.onelink.me/107872968?pid=nativeplacement&c=Global_Acquisition_YMktg_315_Internal_EmailSignature&af_sub1=Acquisition&af_sub2=Global_YMktg&af_sub3=&af_sub4=100000604&af_sub5=EmailSignature__Static_>
>
>     On Tue, Nov 14, 2023 at 8:41 PM, Sebastiaan Couwenberg via gdal-dev
>     <gdal-dev at lists.osgeo.org> wrote:
>     On 11/14/23 20:05, Even Rouault via gdal-dev wrote:
>     > Le 14/11/2023 ? 19:48, Sebastiaan Couwenberg via gdal-dev a ?crit?:
>     >> On 11/14/23 19:16, Even Rouault via gdal-dev wrote:
>     >>> ==> Are there users still using the existing OGR SOSI driver ?
>     >>
>     >> We don't have metrics for the OGR driver, but libfyba0 still
>     has 513
>     >> users in popcon.
>     >>
>     >> https://qa.debian.org/popcon.php?package=fyba
>     >
>     > Looking in the same column in
>     > https://qa.debian.org/popcon.php?package=gdal shows that
>     gdal-bin would
>     > have only 520 users...? which seems highly suspiciously low
>     compared to
>     > the super specialized and low level libfyba.? I would bet that >
>     99% of
>     > installations of libfyba0 are because libgdal links to it, which
>     doesn't
>     > mean that it is used for useful stuff (the other reverse
>     dependency of
>     > libfyba in Debian is sosi2osm, which according to
>     > https://qa.debian.org/popcon.php?package=sosi2osm, has only 3 users)
>
>     sosi2osm was removed from Debian during the bookworm development
>     cycle.
>
>     The only rdep of fyba in Debian is gdal now.
>
>     Almost all installations of libfyba are due to it being a
>     dependency of
>     gdal, that's why it has 23911 installations but only 513 votes
>     (regular
>     users).
>
>     > What if people build a Docker image of GDAL from source and
>     install its
>     > dependencies with apt install libfyba-dev: will that trigger a
>     hit in
>     > popcorn?
>
>     popcon is opt-in, there are only ~230000 systems running popcon
>     out of
>     millions of Debian installations. Hence it's mostly usable to provide
>     insight into relative popularity compared to other packages in
>     Debian.
>     Container images are unlikely to enable popcon, the Docker images
>     don't
>     even have it installed.
>
>     > I'm more interested in Norwegian flesh and bones users
>     testifying about
>     > their use or non-use of SOSI.
>
>     Me too, if there are none left we can also remove the fyba package
>     from
>     Debian.
>
>     Kind Regards,
>
>     Bas
>
>     -- 
>     ? GPG Key ID: 4096R/6750F10AE88D4AF1
>     Fingerprint: 8182 DE41 7056 408D 6146? 50D1 6750 F10A E88D 4AF1
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231114/3ad43171/attachment.htm>

From nilserik at online.no  Tue Nov 14 12:01:49 2023
From: nilserik at online.no (=?utf-8?Q?Nils_Erik_J=C3=B8rgensen?=)
Date: Tue, 14 Nov 2023 21:01:49 +0100
Subject: [gdal-dev] Is the SOSI Norwegian driver still useful?
In-Reply-To: <539759427.1949979.1699991630453@mail.yahoo.com>
References: <ce4642a7-025f-4d7e-985c-e060d200d5a9@spatialys.com>
 <9a4f3699-45ee-43b3-b957-046fa26b5324@xs4all.nl>
 <8d76aca3-563f-4490-aecb-539ab355274e@spatialys.com>
 <7b5f2826-254f-4229-b496-df57c19695b3@xs4all.nl>
 <539759427.1949979.1699991630453@mail.yahoo.com>
Message-ID: <003701da1735$68bfb270$3a3f1750$@online.no>

I think there are many users.

 

Nils Erik J?rgensen

 

Fra: gdal-dev <gdal-dev-bounces at lists.osgeo.org> P? vegne av nagyrobi_r--- via gdal-dev
Sendt: tirsdag 14. november 2023 20:54
Til: Sebastiaan Couwenberg <sebastic at xs4all.nl>; Sebastiaan Couwenberg via gdal-dev <gdal-dev at lists.osgeo.org>
Emne: Re: [gdal-dev] Is the SOSI Norwegian driver still useful?

 

Hi all! 

 

I use SOSI gdal conversion. So in case you are wondering, there is at least one user. 

 

Kind regards, 

Robet Nagy 

 

Sent from Yahoo Mail on Android <https://mail.onelink.me/107872968?pid=nativeplacement&c=Global_Acquisition_YMktg_315_Internal_EmailSignature&af_sub1=Acquisition&af_sub2=Global_YMktg&af_sub3=&af_sub4=100000604&af_sub5=EmailSignature__Static_> 

 

On Tue, Nov 14, 2023 at 8:41 PM, Sebastiaan Couwenberg via gdal-dev

<gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org> > wrote:

On 11/14/23 20:05, Even Rouault via gdal-dev wrote:
> Le 14/11/2023 ? 19:48, Sebastiaan Couwenberg via gdal-dev a ?crit :
>> On 11/14/23 19:16, Even Rouault via gdal-dev wrote:
>>> ==> Are there users still using the existing OGR SOSI driver ?
>>
>> We don't have metrics for the OGR driver, but libfyba0 still has 513 
>> users in popcon.
>>
>>  https://qa.debian.org/popcon.php?package=fyba
> 
> Looking in the same column in 
> https://qa.debian.org/popcon.php?package=gdal shows that gdal-bin would 
> have only 520 users...  which seems highly suspiciously low compared to 
> the super specialized and low level libfyba.  I would bet that > 99% of 
> installations of libfyba0 are because libgdal links to it, which doesn't 
> mean that it is used for useful stuff (the other reverse dependency of 
> libfyba in Debian is sosi2osm, which according to 
> https://qa.debian.org/popcon.php?package=sosi2osm, has only 3 users)

sosi2osm was removed from Debian during the bookworm development cycle.

The only rdep of fyba in Debian is gdal now.

Almost all installations of libfyba are due to it being a dependency of 
gdal, that's why it has 23911 installations but only 513 votes (regular 
users).

> What if people build a Docker image of GDAL from source and install its 
> dependencies with apt install libfyba-dev: will that trigger a hit in 
> popcorn?

popcon is opt-in, there are only ~230000 systems running popcon out of 
millions of Debian installations. Hence it's mostly usable to provide 
insight into relative popularity compared to other packages in Debian. 
Container images are unlikely to enable popcon, the Docker images don't 
even have it installed.

> I'm more interested in Norwegian flesh and bones users testifying about 
> their use or non-use of SOSI.

Me too, if there are none left we can also remove the fyba package from 
Debian.

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org> 
https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Denne e-postmeldingen er sjekket av AVG-antivirus.
www.avg.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231114/8414e001/attachment.htm>

From nagyrobi_r at yahoo.com  Tue Nov 14 13:16:16 2023
From: nagyrobi_r at yahoo.com (nagyrobi_r at yahoo.com)
Date: Tue, 14 Nov 2023 21:16:16 +0000 (UTC)
Subject: [gdal-dev] Is the SOSI Norwegian driver still useful?
In-Reply-To: <5d95bf93-56b9-451b-89c0-e07c3e2cfe5a@spatialys.com>
References: <ce4642a7-025f-4d7e-985c-e060d200d5a9@spatialys.com>
 <9a4f3699-45ee-43b3-b957-046fa26b5324@xs4all.nl>
 <8d76aca3-563f-4490-aecb-539ab355274e@spatialys.com>
 <7b5f2826-254f-4229-b496-df57c19695b3@xs4all.nl>
 <539759427.1949979.1699991630453@mail.yahoo.com>
 <5d95bf93-56b9-451b-89c0-e07c3e2cfe5a@spatialys.com>
Message-ID: <180610418.1964392.1699996576420@mail.yahoo.com>

I have used it sparsely but it seems that i cant make it work, so you might be right that it only works on legacy.?

Sent from Yahoo Mail on Android 
 
  On Tue, Nov 14, 2023 at 9:02 PM, Even Rouault<even.rouault at spatialys.com> wrote:    
Robet,
 
Can you confirm the information I got that the driver can only be used to convert legacy datasets (can they still be downloaded from web sites?) and not recent ones ? How much time still do you plan to use it ?
 
 Le 14/11/2023 ? 20:53, nagyrobi_r--- via gdal-dev a ?crit?:
  
 
Hi all!? 
  I use SOSI gdal conversion. So in case you are wondering, there is at least one user.? 
  Kind regards,? Robet Nagy? 
 Sent from Yahoo Mail on Android 
 
  On Tue, Nov 14, 2023 at 8:41 PM, Sebastiaan Couwenberg via gdal-dev <gdal-dev at lists.osgeo.org> wrote:   On 11/14/23 20:05, Even Rouault via gdal-dev wrote:
 > Le 14/11/2023 ? 19:48, Sebastiaan Couwenberg via gdal-dev a ?crit?:
 >> On 11/14/23 19:16, Even Rouault via gdal-dev wrote:
 >>> ==> Are there users still using the existing OGR SOSI driver ?
 >>
 >> We don't have metrics for the OGR driver, but libfyba0 still has 513 
 >> users in popcon.
 >>
 >> ?https://qa.debian.org/popcon.php?package=fyba
 > 
 > Looking in the same column in 
 > https://qa.debian.org/popcon.php?package=gdal shows that gdal-bin would 
 > have only 520 users...? which seems highly suspiciously low compared to 
 > the super specialized and low level libfyba.? I would bet that > 99% of 
 > installations of libfyba0 are because libgdal links to it, which doesn't 
 > mean that it is used for useful stuff (the other reverse dependency of 
 > libfyba in Debian is sosi2osm, which according to 
 > https://qa.debian.org/popcon.php?package=sosi2osm, has only 3 users)
 
 sosi2osm was removed from Debian during the bookworm development cycle.
 
 The only rdep of fyba in Debian is gdal now.
 
 Almost all installations of libfyba are due to it being a dependency of 
 gdal, that's why it has 23911 installations but only 513 votes (regular 
 users).
 
 > What if people build a Docker image of GDAL from source and install its 
 > dependencies with apt install libfyba-dev: will that trigger a hit in 
 > popcorn?
 
 popcon is opt-in, there are only ~230000 systems running popcon out of 
 millions of Debian installations. Hence it's mostly usable to provide 
 insight into relative popularity compared to other packages in Debian. 
 Container images are unlikely to enable popcon, the Docker images don't 
 even have it installed.
 
 > I'm more interested in Norwegian flesh and bones users testifying about 
 > their use or non-use of SOSI.
 
 Me too, if there are none left we can also remove the fyba package from 
 Debian.
 
 Kind Regards,
 
 Bas
 
 -- 
 ? GPG Key ID: 4096R/6750F10AE88D4AF1
 Fingerprint: 8182 DE41 7056 408D 6146? 50D1 6750 F10A E88D 4AF1 
 
 _______________________________________________
 gdal-dev mailing list
 gdal-dev at lists.osgeo.org
 https://lists.osgeo.org/mailman/listinfo/gdal-dev
   
  
  _______________________________________________gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev -- 
http://www.spatialys.com
My software is free, but my time generally not.   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231114/aa436260/attachment-0001.htm>

From even.rouault at spatialys.com  Wed Nov 15 01:51:50 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 15 Nov 2023 10:51:50 +0100
Subject: [gdal-dev] Motion: adopt RFC 96: Deferred C++ plugin loading
Message-ID: <d0bef433-2a2c-4709-a4fb-697a0b890d5a@spatialys.com>

Hi,

Motion: adopt RFC 96: Deferred C++ plugin loading

https://github.com/OSGeo/gdal/pull/8648

Pre-rendered view:

https://github.com/rouault/gdal/blob/rfc96_text/doc/source/development/rfc/rfc96_deferred_plugin_loading.rst 


Starting with my +1,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From tachon.mathieu at protonmail.com  Wed Nov 15 02:48:55 2023
From: tachon.mathieu at protonmail.com (Tachon Mathieu)
Date: Wed, 15 Nov 2023 10:48:55 +0000
Subject: [gdal-dev] Is the SOSI Norwegian driver still useful?
Message-ID: <XqWme1VRkPwgAbzhRDDVFx_85AQlJD7YFzPYGIFN2fGDOSfEVmvNeAmGIG5f4RQbf8fh-zRfa0KleJE8LK50mRvSRiziRe00Rcv8NOxnHrc=@protonmail.com>

Hi,

The SOSI driver (fyba) integrated in GDAL is an old version and has not been updated for many years. We have an updated version of it in the GIS software (in-house) developed by the National Mapping Authority in Norway (Kartverket), that many people in the organisation use. There are major changes in the updated version: use of wchar data type instead of char data type for dealing with strings, it can handle UTF8 encoding, the object types and properties tables have been updated, amongst other things. As the latter were hard-coded and that the SOSI data model change rather dynamically, this is one of reasons for which newer versions of fyba have not been ported to GDAL, as it would require much time and resources. fyba has now extended its internal use of GDAL, which may rely on different versions of GDAL from the latest ones (not sure about that), and the people working with it find it challenging to keep an updated version of the SOSI driver in GDAL. We do not really have resources internally (at Kartverket) for doing such work. At the same time, SOSI will no longer be used as exchange format in just a few years. We also have currently a discussion internally about whether the SOSI driver should be removed from GDAL or not.

Kind regards,

Mathieu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231115/fd5e2161/attachment.htm>

From aborruso at gmail.com  Wed Nov 15 03:49:37 2023
From: aborruso at gmail.com (andy)
Date: Wed, 15 Nov 2023 12:49:37 +0100
Subject: [gdal-dev] Export image binary data from GDB dataset
Message-ID: <CAHEdGZM26irbvQPnpyJvERgpeJ-s9UZYEbwUVEgKjaXNh5XZQQ@mail.gmail.com>

Hi,
I have a Binary field in a GDB data source.

I have no other metadata about it. I know only that the field name is
"image", then it should contain images.
But I do not know the original file format.

I have extract one row (and then one field) as string it, using

ogr2ogr -f CSV /vsistdout/ -fieldTypeToString Binary data.gdb SITI_ARCHEO
-where "OBJECTID=277" >out.csv

And I have a long string as the one below.
I have tried to use "xxd -r -p" to convert to binary and then use "file" to
interpret its file format, but I don't get anything useful.

How could I do some reverse extraction of these images in their original
format?

Thank you

151C3B00020000001B000C0014002F00FFFFFFFF466F746F6772616669612064692050686F746F20456469746F72004D5350686F746F45642E330001050000020000000C0000004D5350686F746F45642E33000000000000000000000E0900D0CF11E0A1B11AE1000000000000000000000000000000003E000300FEFF09000600000000000000000000000A0000000100000000000000001000000200000001000000FEFFFFFF0000000000000000040000000500000006000000070000004502000046020000470200004802000049020000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
...

-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231115/8c639a9b/attachment.htm>

From even.rouault at spatialys.com  Wed Nov 15 05:38:49 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 15 Nov 2023 14:38:49 +0100
Subject: [gdal-dev] Export image binary data from GDB dataset
In-Reply-To: <CAHEdGZM26irbvQPnpyJvERgpeJ-s9UZYEbwUVEgKjaXNh5XZQQ@mail.gmail.com>
References: <CAHEdGZM26irbvQPnpyJvERgpeJ-s9UZYEbwUVEgKjaXNh5XZQQ@mail.gmail.com>
Message-ID: <9532b753-6763-47d0-8a7c-889c87c84003@spatialys.com>

Andrea,

looking with an hexadecimal editor, one sees the strings "Fotografia di 
Photo Editor", "MSPhotoEd.3", so it seems to be Microsoft Photo Editor 
format. According to 
https://stackoverflow.com/questions/43902205/microsoft-photo-editor-conversion-file-signatures 
, it might be a OLE based format containing JPEG files. So you might try 
tools that extract the content from OLE, and/or look for content between 
the FF D8 marker for the start of JPEG content and FF D9 for end of JPEG 
file

Even

Le 15/11/2023 ? 12:49, andy via gdal-dev a ?crit?:
> Hi,
> I have a Binary field in a GDB data source.
>
> I have no other metadata about it. I know only?that the field name is 
> "image", then it should contain images.
> But I do not know the original file format.
>
> I have extract one row (and then one field) as string it, using
>
> ogr2ogr -f CSV /vsistdout/ -fieldTypeToString Binary data.gdb 
> SITI_ARCHEO -where "OBJECTID=277" >out.csv
>
> And I have a long string as the one below.
> I have tried to use "xxd -r -p" to convert to binary and then use 
> "file" to interpret its file format, but I don't get anything useful.
>
> How could I do some reverse extraction of these images in their 
> original format?
>
> Thank you
>
> 151C3B00020000001B000C0014002F00FFFFFFFF466F746F6772616669612064692050686F746F20456469746F72004D5350686F746F45642E330001050000020000000C0000004D5350686F746F45642E33000000000000000000000E0900D0CF11E0A1B11AE1000000000000000000000000000000003E000300FEFF09000600000000000000000000000A0000000100000000000000001000000200000001000000FEFFFFFF0000000000000000040000000500000006000000070000004502000046020000470200004802000049020000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 
> ...
>
> -- 
> ___________________
>
> Andrea Borruso
> website: https://medium.com/tantotanto
> 38? 7' 48" N, 13? 21' 9" E, EPSG:4326
> ___________________
>
> "cercare e saper riconoscere chi e cosa,
> ?in mezzo all?inferno, non ? inferno,
> e farlo durare, e dargli spazio"
>
> Italo Calvino
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231115/06b510f1/attachment.htm>

From aborruso at gmail.com  Wed Nov 15 06:15:06 2023
From: aborruso at gmail.com (andy)
Date: Wed, 15 Nov 2023 15:15:06 +0100
Subject: [gdal-dev] Export image binary data from GDB dataset
In-Reply-To: <9532b753-6763-47d0-8a7c-889c87c84003@spatialys.com>
References: <CAHEdGZM26irbvQPnpyJvERgpeJ-s9UZYEbwUVEgKjaXNh5XZQQ@mail.gmail.com>
 <9532b753-6763-47d0-8a7c-889c87c84003@spatialys.com>
Message-ID: <CAHEdGZOzBSkmuKoWTig1ZgvOspPQxoc5aMEG73gA1M+1GeK05w@mail.gmail.com>

Even,

On Wed, 15 Nov 2023 at 14:38, Even Rouault <even.rouault at spatialys.com>
wrote:

> looking with an hexadecimal editor, one sees the strings "Fotografia di
> Photo Editor", "MSPhotoEd.3", so it seems to be Microsoft Photo Editor
> format. According to
> https://stackoverflow.com/questions/43902205/microsoft-photo-editor-conversion-file-signatures
> , it might be a OLE based format containing JPEG files. So you might try
> tools that extract the content from OLE, and/or look for content between
> the FF D8 marker for the start of JPEG content and FF D9 for end of JPEG
> file
>

now I must study.

Thank you very much

-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231115/73e6ae39/attachment-0001.htm>

From schwehr at gmail.com  Wed Nov 15 09:22:37 2023
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 15 Nov 2023 09:22:37 -0800
Subject: [gdal-dev] Motion: adopt RFC 96: Deferred C++ plugin loading
In-Reply-To: <d0bef433-2a2c-4709-a4fb-697a0b890d5a@spatialys.com>
References: <d0bef433-2a2c-4709-a4fb-697a0b890d5a@spatialys.com>
Message-ID: <CACmBxyuBbKwOQpxkNzHEHm-tE9grz9s0QLBONRdPMkc=+gAQsw@mail.gmail.com>

+1 KurtS

One minor comment...

I use pfnOpen in a few of my local fuzzers, but I build statically without
plugins, so I think my use won't be impacted. But even if I am impacted,
that's my problem and not a responsibility of the GDAL project as I'm using
internal GDAL details.

> Another potential issue is that if external code would directly use the
pfnOpen, pfnCreate, pfnCreateCopy, etc. function pointers of a GDALDriver
instance, it would see them null before the actual driver is loading, but
direct access to those function pointers has never been documented (instead
users should use GDALOpen(), GDALCreate(), GDALCreateCopy() etc), and is
not expected to be done by code external to libgdal core.

On Wed, Nov 15, 2023 at 1:52?AM Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> Motion: adopt RFC 96: Deferred C++ plugin loading
>
> https://github.com/OSGeo/gdal/pull/8648
>
> Pre-rendered view:
>
>
> https://github.com/rouault/gdal/blob/rfc96_text/doc/source/development/rfc/rfc96_deferred_plugin_loading.rst
>
>
> Starting with my +1,
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231115/c3ed6d4c/attachment.htm>

From howard at hobu.co  Wed Nov 15 12:23:43 2023
From: howard at hobu.co (Howard Butler)
Date: Wed, 15 Nov 2023 14:23:43 -0600
Subject: [gdal-dev] Motion: adopt RFC 96: Deferred C++ plugin loading
In-Reply-To: <d0bef433-2a2c-4709-a4fb-697a0b890d5a@spatialys.com>
References: <d0bef433-2a2c-4709-a4fb-697a0b890d5a@spatialys.com>
Message-ID: <8FCD55AB-02EE-4A8C-869C-D3A1FBF3E2DE@hobu.co>

+1 Howard

I'm excited for this to start percolating. Thank you for all of the effort to design and implement it.

> On Nov 15, 2023, at 3:51?AM, Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
> 
> Hi,
> 
> Motion: adopt RFC 96: Deferred C++ plugin loading
> 
> https://github.com/OSGeo/gdal/pull/8648
> 
> Pre-rendered view:
> 
> https://github.com/rouault/gdal/blob/rfc96_text/doc/source/development/rfc/rfc96_deferred_plugin_loading.rst 
> 
> Starting with my +1,
> 
> Even
> 
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From jukka.rahkonen at maanmittauslaitos.fi  Wed Nov 15 12:44:17 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Wed, 15 Nov 2023 20:44:17 +0000
Subject: [gdal-dev] Motion: adopt RFC 96: Deferred C++ plugin loading
In-Reply-To: <d0bef433-2a2c-4709-a4fb-697a0b890d5a@spatialys.com>
References: <d0bef433-2a2c-4709-a4fb-697a0b890d5a@spatialys.com>
Message-ID: <AM0PR09MB3219C9AEB9EA8FD1F12FE321FDB1A@AM0PR09MB3219.eurprd09.prod.outlook.com>

+1

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault via gdal-dev
L?hetetty: keskiviikko 15. marraskuuta 2023 11.52
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Motion: adopt RFC 96: Deferred C++ plugin loading

Hi,

Motion: adopt RFC 96: Deferred C++ plugin loading
...
Starting with my +1,

Even

-- 

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org

From j1 at jimenezshaw.com  Wed Nov 15 13:12:27 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 15 Nov 2023 22:12:27 +0100
Subject: [gdal-dev] Motion: adopt RFC 96: Deferred C++ plugin loading
In-Reply-To: <AM0PR09MB3219C9AEB9EA8FD1F12FE321FDB1A@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <d0bef433-2a2c-4709-a4fb-697a0b890d5a@spatialys.com>
 <AM0PR09MB3219C9AEB9EA8FD1F12FE321FDB1A@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <CADRrdKsJZSujo3xnap3cPuwYRWOM0TLgme=9yD5V6vA2CXmKHg@mail.gmail.com>

+1 Javier

On Wed, 15 Nov 2023 at 21:44, Rahkonen Jukka via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> +1
>
> -Jukka Rahkonen-
>
> -----Alkuper?inen viesti-----
> L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even
> Rouault via gdal-dev
> L?hetetty: keskiviikko 15. marraskuuta 2023 11.52
> Vastaanottaja: gdal-dev at lists.osgeo.org
> Aihe: [gdal-dev] Motion: adopt RFC 96: Deferred C++ plugin loading
>
> Hi,
>
> Motion: adopt RFC 96: Deferred C++ plugin loading
> ...
> Starting with my +1,
>
> Even
>
> --
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231115/793b53fd/attachment.htm>

From sean.gillies at gmail.com  Wed Nov 15 17:20:53 2023
From: sean.gillies at gmail.com (Sean Gillies)
Date: Wed, 15 Nov 2023 18:20:53 -0700
Subject: [gdal-dev] Motion: adopt RFC 96: Deferred C++ plugin loading
In-Reply-To: <d0bef433-2a2c-4709-a4fb-697a0b890d5a@spatialys.com>
References: <d0bef433-2a2c-4709-a4fb-697a0b890d5a@spatialys.com>
Message-ID: <CAOodmJo7woQ4bu4Ffy+-rKd5RD8+nQ5A-Hn7dwHDHfjdZx=xAA@mail.gmail.com>

Hi Even,

I think this makes great sense for the project. I don't yet understand what
it means for an enterprise like Rasterio's PyPI wheels.

Here's a refresher for people who aren't familiar with Python packaging
tools like delocate, auditwheel, and delvewheel. Today, these tools detect
when Rasterio extension modules link libgdal, and then find the libraries
that libgdal links via metadata in the shared libraries. This allows
libgdal and its dependencies to be relocated so that they can be
distributed alongside Rasterio's Python and extension modules.

I don't know that delocate et al will be able to find libraries that are
dlopened by the new GDAL proxy drivers. Does anyone else know? I'm starting
a new job this week and may not have time to experiment until next week.


On Wed, Nov 15, 2023 at 2:52?AM Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> Motion: adopt RFC 96: Deferred C++ plugin loading
>
> https://github.com/OSGeo/gdal/pull/8648
>
> Pre-rendered view:
>
>
> https://github.com/rouault/gdal/blob/rfc96_text/doc/source/development/rfc/rfc96_deferred_plugin_loading.rst
>
>
> Starting with my +1,
>
> Even
>

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231115/81effc9d/attachment.htm>

From even.rouault at spatialys.com  Thu Nov 16 04:10:36 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 16 Nov 2023 13:10:36 +0100
Subject: [gdal-dev] Motion: adopt RFC 96: Deferred C++ plugin loading
In-Reply-To: <CAOodmJo7woQ4bu4Ffy+-rKd5RD8+nQ5A-Hn7dwHDHfjdZx=xAA@mail.gmail.com>
References: <d0bef433-2a2c-4709-a4fb-697a0b890d5a@spatialys.com>
 <CAOodmJo7woQ4bu4Ffy+-rKd5RD8+nQ5A-Hn7dwHDHfjdZx=xAA@mail.gmail.com>
Message-ID: <cfcd8b02-89f3-4dd0-9180-c8ce09c9ad5e@spatialys.com>

Hi Sean,
>
> I think this makes great sense for the project. I don't yet understand 
> what it means for an enterprise like Rasterio's PyPI wheels.

I'd say it probably changes nothing. The RFC just postpones the time 
where the plugins are loaded, but the fact that they are dlopen()'ed 
(early or late) probably makes them non discoverable by delocate, since 
libgdal doesn't link to them in a way that is advertised in its shared 
library metadata. If your plan is to still have a rasterio wheel with a 
monolithic GDAL, then you don't need to build GDAL drivers as plugins 
and this RFC doesn't change anything to the status quo.

I'm not familiar at all with the wheel Python packaging tools, but if 
you'd want to have GDAL plugins in separate package(s) then you'd need 
to have a way of having the gdal_XXX.so / ogr_XXX.so be put in some 
known location that can be advertized to libgdal core with GDAL_DRIVER_PATH.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From Michael.Smith at erdc.dren.mil  Thu Nov 16 05:37:50 2023
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH CIV)
Date: Thu, 16 Nov 2023 13:37:50 +0000
Subject: [gdal-dev] Converting parquet to geopackage
Message-ID: <A679AA24-12B9-4DE1-B455-441697407F99@erdc.dren.mil>

Using gdal3.8 (ghcr.io/osgeo/gdal:ubuntu-full-3.8.0) , got an error I haven?t seen before:

ReadNext() failed: Couldn't deserialize thrift: TProtocolException: Exceeded size limit
Deserializing page header failed.

This happened at 92%

Command: ogr2ogr -f gpkg /data/overturemaps_2023_11_14.gpkg /vsis3/overturemaps-us-west-2/release/2023-11-14-alpha.0/theme=buildings/ theme=buildings -progress -NLT MULTIPOLYGON

So anyone know what this means and what caused it and any workarounds?

Mike


--
Michael Smith
US Army Corps of Engineers
Remote Sensing/GIS Center

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231116/8586c9bc/attachment-0001.htm>

From even.rouault at spatialys.com  Thu Nov 16 06:08:35 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 16 Nov 2023 15:08:35 +0100
Subject: [gdal-dev] Converting parquet to geopackage
In-Reply-To: <A679AA24-12B9-4DE1-B455-441697407F99@erdc.dren.mil>
References: <A679AA24-12B9-4DE1-B455-441697407F99@erdc.dren.mil>
Message-ID: <b6ccdda6-58dc-4a51-9062-28331a71b11e@spatialys.com>

Michael,

this error comes from libarrow-cpp.

Several potential causes:

- one of the parquet file is corrupted

- one of the parquet files is valid but uses "something" that 
libarrow-cpp can't understand. I mention this because we have seen an 
interoperability issues between files generated by the go implementation 
of parquet and libarrow-cpp. Not clear which end is the culprit. But the 
error message was different than yours

- there's an I/O error when getting data from S3

- some other bug in libarrow-cpp...

Perhaps run in --debug on mode to see in the traces which parquet file 
cause the issue ? (assuming that the error can also be reproduced when 
reading one of the component parquet files, and not just when reading 
the whole dataset...)

https://github.com/search?q=repo%3Aapache%2Farrow+TProtocolException%3A+Exceeded+size+limit&type=issues 
shows a number of issues where this error message pops up

Even

Le 16/11/2023 ? 14:37, Smith, Michael ERDC-RDE-CRREL-NH CIV via gdal-dev 
a ?crit?:
>
> Using gdal3.8 (ghcr.io/osgeo/gdal:ubuntu-full-3.8.0) , got an error I 
> haven?t seen before:
>
> ReadNext() failed: Couldn't deserialize thrift: TProtocolException: 
> Exceeded size limit
>
> Deserializing page header failed.
>
> This happened at 92%
>
> Command: ogr2ogr -f gpkg /data/overturemaps_2023_11_14.gpkg 
> /vsis3/overturemaps-us-west-2/release/2023-11-14-alpha.0/theme=buildings/ 
> theme=buildings -progress -NLT MULTIPOLYGON
>
> So anyone know what this means and what caused it and any workarounds?
>
> Mike
>
> -- 
>
> Michael Smith
>
> US Army Corps of Engineers
>
> Remote Sensing/GIS Center
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231116/85829f8d/attachment.htm>

From sean.gillies at gmail.com  Thu Nov 16 09:04:23 2023
From: sean.gillies at gmail.com (Sean Gillies)
Date: Thu, 16 Nov 2023 10:04:23 -0700
Subject: [gdal-dev] Motion: adopt RFC 96: Deferred C++ plugin loading
In-Reply-To: <cfcd8b02-89f3-4dd0-9180-c8ce09c9ad5e@spatialys.com>
References: <d0bef433-2a2c-4709-a4fb-697a0b890d5a@spatialys.com>
 <CAOodmJo7woQ4bu4Ffy+-rKd5RD8+nQ5A-Hn7dwHDHfjdZx=xAA@mail.gmail.com>
 <cfcd8b02-89f3-4dd0-9180-c8ce09c9ad5e@spatialys.com>
Message-ID: <CAOodmJrR4tiOJwvsx4S58RH2Xc-gM+G5HDk=iEHnka1hyu=Wkw@mail.gmail.com>

Sounds good to me, Even. Rasterio's wheels can remain at the forefront of
terrible for now.

On Thu, Nov 16, 2023 at 5:10?AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi Sean,
> >
> > I think this makes great sense for the project. I don't yet understand
> > what it means for an enterprise like Rasterio's PyPI wheels.
>
> I'd say it probably changes nothing. The RFC just postpones the time
> where the plugins are loaded, but the fact that they are dlopen()'ed
> (early or late) probably makes them non discoverable by delocate, since
> libgdal doesn't link to them in a way that is advertised in its shared
> library metadata. If your plan is to still have a rasterio wheel with a
> monolithic GDAL, then you don't need to build GDAL drivers as plugins
> and this RFC doesn't change anything to the status quo.
>
> I'm not familiar at all with the wheel Python packaging tools, but if
> you'd want to have GDAL plugins in separate package(s) then you'd need
> to have a way of having the gdal_XXX.so / ogr_XXX.so be put in some
> known location that can be advertized to libgdal core with
> GDAL_DRIVER_PATH.
>
> Even
>
>

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231116/6e26a5e0/attachment.htm>

From even.rouault at spatialys.com  Thu Nov 16 12:25:08 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 16 Nov 2023 21:25:08 +0100
Subject: [gdal-dev] RFC97 OGRFeatureDefn,
 OGRFieldDefn and OGRGeomFieldDefn "sealing" available for review
Message-ID: <2d3df5f8-8829-4d68-a541-288968810823@spatialys.com>

Hi,

Please review RFC 97: OGRFeatureDefn, OGRFieldDefn and OGRGeomFieldDefn 
"sealing"

at https://github.com/OSGeo/gdal/pull/8734

Summary:

This RFC aims at avoiding common misuse of the setter methods of the 
OGRFeatureDefn, OGRFieldDefn and OGRGeomFieldDefn classes. Indeed, the 
setter methods of those classes should not be used directly by user code 
(that is non driver implementations), on instances that are owned by a 
OGRLayer. It is quite frequent for users (even seasoned ones) to neglect 
that constraint. Hence this RFC introduces an optional "sealing" 
capability that drivers can enable to avoid users modifying instances 
that they should not.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From robert.coup at koordinates.com  Thu Nov 16 13:53:04 2023
From: robert.coup at koordinates.com (Robert Coup)
Date: Thu, 16 Nov 2023 21:53:04 +0000
Subject: [gdal-dev] Motion: adopt RFC 96: Deferred C++ plugin loading
In-Reply-To: <cfcd8b02-89f3-4dd0-9180-c8ce09c9ad5e@spatialys.com>
References: <d0bef433-2a2c-4709-a4fb-697a0b890d5a@spatialys.com>
 <CAOodmJo7woQ4bu4Ffy+-rKd5RD8+nQ5A-Hn7dwHDHfjdZx=xAA@mail.gmail.com>
 <cfcd8b02-89f3-4dd0-9180-c8ce09c9ad5e@spatialys.com>
Message-ID: <CAFLLRpJi9uQNbgWQDPUW7AEma0DBYwv5NzXapHX_qdkzW0k7vQ@mail.gmail.com>

Hi Sean

On Thu, 16 Nov 2023 at 12:10, Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> >
> > I think this makes great sense for the project. I don't yet understand
> > what it means for an enterprise like Rasterio's PyPI wheels.
>
> I'd say it probably changes nothing. The RFC just postpones the time
> where the plugins are loaded, but the fact that they are dlopen()'ed
> (early or late) probably makes them non discoverable by delocate, since
> libgdal doesn't link to them in a way that is advertised in its shared
> library metadata. If your plan is to still have a rasterio wheel with a
> monolithic GDAL, then you don't need to build GDAL drivers as plugins
> and this RFC doesn't change anything to the status quo.
>
> I'm not familiar at all with the wheel Python packaging tools, but if
> you'd want to have GDAL plugins in separate package(s) then you'd need
> to have a way of having the gdal_XXX.so / ogr_XXX.so be put in some
> known location that can be advertized to libgdal core with
> GDAL_DRIVER_PATH.
>

PyInstaller has a set of hooks for this, where custom behaviour can be
scripted for packages that need it. AFAICS auditwheel & delocate don't, and
also don't have `--include=my.so` options to override it and "force"
libraries to be processed ? the same issue crops up for stuff using ctypes
IIUC.

My horrible workaround idea: building a shim _gdalplugins python module
which does nothing except link to all the plugin libraries ? that would
allow them all to be processed by delocate/auditwheel alongside the real
libgdal ? so you get libgdal, and all the driver plugin libraries, and
their dependencies. Since _gdalplugins is never used/loaded (ideally it'd
be dropped) gdal would work via runtime plugin loading. The library
renaming that auditwheel/delocate do might get in the way, but hopefully
there's a path through that.

Cheers,

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231116/246ca449/attachment.htm>

From even.rouault at spatialys.com  Fri Nov 17 02:16:09 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 17 Nov 2023 11:16:09 +0100
Subject: [gdal-dev] Motion: adopt RFC 96: Deferred C++ plugin loading
In-Reply-To: <d0bef433-2a2c-4709-a4fb-697a0b890d5a@spatialys.com>
References: <d0bef433-2a2c-4709-a4fb-697a0b890d5a@spatialys.com>
Message-ID: <72b7f6a2-7ec7-412a-a81f-7391047408c5@spatialys.com>

Hi,

Motion passed with +1 from PSC members KurtS, HowardB, JukkaR, JavierJS 
and me

Even

Le 15/11/2023 ? 10:51, Even Rouault via gdal-dev a ?crit?:
> Hi,
>
> Motion: adopt RFC 96: Deferred C++ plugin loading
>
> https://github.com/OSGeo/gdal/pull/8648
>
> Pre-rendered view:
>
> https://github.com/rouault/gdal/blob/rfc96_text/doc/source/development/rfc/rfc96_deferred_plugin_loading.rst 
>
>
> Starting with my +1,
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From philippe.ghesquiere at airbus.com  Fri Nov 17 08:02:57 2023
From: philippe.ghesquiere at airbus.com (Philippe Ghesquiere)
Date: Fri, 17 Nov 2023 17:02:57 +0100
Subject: [gdal-dev] GeoPDF and neatline
Message-ID: <CAAes_OHpHCvsDmo0nVVSe9bateNE3smNqPkmK5b+tcD3voAgmQ@mail.gmail.com>

Dear all,

I would like to translate a GeoPDF into Geotiff.
Furthermore, I  would like to select the image area, given by the neatline.

Image samples are available on "FSTopo Map Products
<https://data.fs.usda.gov/geodata/rastergateway/states-regions/states.php>"
site.
Typical gdalinfo gives :

gdalinfo Boulder_400010515_FSTopo.pdf
Driver: PDF/Geospatial PDF
Files: Boulder_400010515_FSTopo.pdf
Size is 3262, 4050
...
Metadata:
  CREATION_DATE=D:20230213221000Z
  CREATOR=Esri ArcSOC 10.8.1.14362
  NEATLINE=POLYGON ((467455.095191925 4427281.84826825,467455.105581267
4442204.97588751,479233.89727774 4442204.58886474,479234.013428373
4427281.65662041,467455.095191925 4427281.84826825))


I searched various sites for information and ended with the following
commands :

gdalinfo Boulder_400010515_FSTopo.pdf|grep NEATLINE | awk -F= '{print
"id,WKT\n1,\"" $2 "\""}' > Neatline.csv
gdalwarp -of GTIFF -cutline Neatline.csv -crop_to_cutline
Boulder_400010515_FSTopo.pdf Boulder_400010515_FSTopo.pdf.tif


*My question :*
Is there a way to gdal_translate / gdalwarp the PDF file without EXPLICITLY
extracting the neatline ?

I tried to use the "*-oo NEATLINE=something*" option :
gdal_translate -of GTiff -oo NEATLINE="POLYGON ((467455.095191925
4427281.84826825,467455.105581267 4442204.97588751,479233.89727774
4442204.58886474,479234.013428373 4427281.65662041,467455.095191925
4427281.84826825)) Boulder_400010515_FSTopo.pdf
Boulder_400010515_FSTopo.pdf.tif

The option is ignored.

Philippe
The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231117/4a5bd6e2/attachment.htm>

From even.rouault at spatialys.com  Fri Nov 17 08:13:27 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 17 Nov 2023 17:13:27 +0100
Subject: [gdal-dev] GeoPDF and neatline
In-Reply-To: <CAAes_OHpHCvsDmo0nVVSe9bateNE3smNqPkmK5b+tcD3voAgmQ@mail.gmail.com>
References: <CAAes_OHpHCvsDmo0nVVSe9bateNE3smNqPkmK5b+tcD3voAgmQ@mail.gmail.com>
Message-ID: <ee30d901-b41b-4260-a665-868209f0ba9e@spatialys.com>

Hi,
>
> _My question :_
> Is there a way to gdal_translate / gdalwarp the PDF file without 
> EXPLICITLY extracting the neatline ?
No. Your above method is the nominal one.
>
> I tried to use the "*-oo NEATLINE=something*" option :
> gdal_translate -of GTiff -oo NEATLINE="POLYGON ((467455.095191925 
> 4427281.84826825,467455.105581267 4442204.97588751,479233.89727774 
> 4442204.58886474,479234.013428373 4427281.65662041,467455.095191925 
> 4427281.84826825)) Boulder_400010515_FSTopo.pdf 
> Boulder_400010515_FSTopo.pdf.tif

This won't work. As documented, this must be a name of a "Measure" PDF 
object. This is in the case of a PDF with multiple georeferenced areas 
(like US with an Alaska or Hawaai inset map). And by itself, this will 
not crop the raster, but just expose the pointed Measure as the NEATLINE 
metadata.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231117/074d044d/attachment.htm>

From philippe.ghesquiere at airbus.com  Fri Nov 17 08:16:58 2023
From: philippe.ghesquiere at airbus.com (Philippe Ghesquiere)
Date: Fri, 17 Nov 2023 17:16:58 +0100
Subject: [gdal-dev] GeoPDF and neatline
In-Reply-To: <ee30d901-b41b-4260-a665-868209f0ba9e@spatialys.com>
References: <CAAes_OHpHCvsDmo0nVVSe9bateNE3smNqPkmK5b+tcD3voAgmQ@mail.gmail.com>
 <ee30d901-b41b-4260-a665-868209f0ba9e@spatialys.com>
Message-ID: <CAAes_OHQ8r9mijyW_zeiKB08_RODV1Bo8habGm4-_5GfbHA1+Q@mail.gmail.com>

Great.
Thanks Even

On Fri, Nov 17, 2023 at 5:13?PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
>
> *My question :*
> Is there a way to gdal_translate / gdalwarp the PDF file without
> EXPLICITLY extracting the neatline ?
>
> No. Your above method is the nominal one.
>
>
> I tried to use the "*-oo NEATLINE=something*" option :
> gdal_translate -of GTiff -oo NEATLINE="POLYGON ((467455.095191925
> 4427281.84826825,467455.105581267 4442204.97588751,479233.89727774
> 4442204.58886474,479234.013428373 4427281.65662041,467455.095191925
> 4427281.84826825)) Boulder_400010515_FSTopo.pdf
> Boulder_400010515_FSTopo.pdf.tif
>
> This won't work. As documented, this must be a name of a "Measure" PDF
> object. This is in the case of a PDF with multiple georeferenced areas
> (like US with an Alaska or Hawaai inset map). And by itself, this will not
> crop the raster, but just expose the pointed Measure as the NEATLINE
> metadata.
> Even
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231117/5f060646/attachment-0001.htm>

From even.rouault at spatialys.com  Sat Nov 18 08:54:14 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 18 Nov 2023 17:54:14 +0100
Subject: [gdal-dev] Patches to fix build errors against libxml2 2.12
Message-ID: <9a354ba2-3aa0-43c1-b845-0148d5ada1ca@spatialys.com>

Hi,

Just to notify (mostly packagers) that libxml2 2.12 has been released 2 
days ago, and GDAL needs the following 2 patches to build against it:

- 
https://github.com/OSGeo/gdal/commit/cbed9fc91dffba30d0f9a6a06a412a04d9cd36fa 


- 
https://github.com/OSGeo/gdal/commit/ec33f6d6dfe944f59dc5454d01b4d000d9479c02

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From Stefan.Blumentrath at gmx.de  Sat Nov 18 11:33:33 2023
From: Stefan.Blumentrath at gmx.de (Stefan Blumentrath)
Date: Sat, 18 Nov 2023 20:33:33 +0100
Subject: [gdal-dev] Is the SOSI Norwegian driver still useful?
In-Reply-To: <XqWme1VRkPwgAbzhRDDVFx_85AQlJD7YFzPYGIFN2fGDOSfEVmvNeAmGIG5f4RQbf8fh-zRfa0KleJE8LK50mRvSRiziRe00Rcv8NOxnHrc=@protonmail.com>
References: <XqWme1VRkPwgAbzhRDDVFx_85AQlJD7YFzPYGIFN2fGDOSfEVmvNeAmGIG5f4RQbf8fh-zRfa0KleJE8LK50mRvSRiziRe00Rcv8NOxnHrc=@protonmail.com>
Message-ID: <trinity-9cc2dc8f-d444-4244-b319-35287c1088f0-1700336013671@3c-app-gmx-bs10>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231118/28330d6b/attachment.htm>

From tachon.mathieu at protonmail.com  Sat Nov 18 15:58:14 2023
From: tachon.mathieu at protonmail.com (Tachon Mathieu)
Date: Sat, 18 Nov 2023 23:58:14 +0000
Subject: [gdal-dev] Is the SOSI Norwegian driver still useful?
In-Reply-To: <trinity-9cc2dc8f-d444-4244-b319-35287c1088f0-1700336013671@3c-app-gmx-bs10>
References: <XqWme1VRkPwgAbzhRDDVFx_85AQlJD7YFzPYGIFN2fGDOSfEVmvNeAmGIG5f4RQbf8fh-zRfa0KleJE8LK50mRvSRiziRe00Rcv8NOxnHrc=@protonmail.com>
 <trinity-9cc2dc8f-d444-4244-b319-35287c1088f0-1700336013671@3c-app-gmx-bs10>
Message-ID: <EuFefmM_GYf2SN9nt-Wz3BOSG1ZJkHSF9-ExXiyL6Qf4i5gLB4exOfdOnefaKIX0mEo0te5vohApD8N3BFP8L0SolxNo5V81UI_x7GSAbTg=@protonmail.com>

Hi again,

I am not and have never been a contributor the to (Open)FYBA library. When it comes to challenges inherent to keeping an updated version of the SOSI driver in GDAL/OGR, I am not the best person to elaborate on that matter.

The statement "SOSI will no longer be used as exchange format in just a few years" is based on internal discussions in the organisation. I am also not aware of any national regulations that clearly state that SOSI will not be used as exchange format, and with a given date for when it comes into effect.

I am also not aware of any other OSGeo tool that enables working with SOSI files. That said, I think most people that work with SOSI files use FME, or GIS solutions developed by Norconsult/Norkart/Geodata AS.

It is true that SOSI is still used extensively as distribution format from Kartverket. However, most vector datasets available from geonorge.no are also distributed in the GML format. I am not aware of any vector datasets distributed from Kartverket at the SOSI format only, but I do not have a complete overview.

For some data deliveries from external organisations, Kartverket may ask the data to be in the SOSI format. However, I doubt that these organisations use the SOSI driver from GDAL/OGR to produce these files.

There was a major version update for SOSI earlier this year (from 4.6 to 5.0). Datasets in earlier versions than 5.0 will still be available for some time, but they will not be updated as far as I understand it. I am not sure what the consequences of the version change are for a driver, I did not dig much into it.

Stefan, the files that you worked with in 2022, were they generated/downloaded in 2022? And did you manage to work with them with the SOSI driver based on OpenFYBA? Also, could you give us more information on what kind of dataset you were working with?

I will try to get more information on my side and keep you updated. I also hope that more people working with the FYBA library get involved in this thread, so that we get more detailed information on what keeping an updated version of FYBA in GDAL/OGR implies.

Kind regards,

Mathieu
On Saturday, November 18th, 2023 at 8:33 PM, Stefan Blumentrath <Stefan.Blumentrath at gmx.de> wrote:

> Hei,
>
> flesh-and-bones-user from Norway here too.
>
> When the OpenFYBA library and the OGR-SOSI driver were revived roughly 10 years ago, Kartverket already had plans to replace the SOSI format and communicated what you now heared at the community sprint, Even. I see that Mathieu confirmed that "SOSI will no longer be used as exchange format in just a few years". Then, like now, I have not seen a clear time-line / roadmap.
>
> In consequence, the OGR-SOSI driver has been the primary (if not only) available option to consume significant parts of the open data delivered via GeoNorge in OSGeo tools for the last ten years. I am very grateful to Even and others for all support during that time! Currently, I do not work that much with SOSI files (but may do so again soon). My experience with SOSI files and the OGR SOSI driver is as follows:
>
> 1) SOSI is still a mayor - if not the main - distribution format from Kartverket and not all public vector data is provided in an alternative, OGR-readable format (Mathieu, please correct me if I am wrong).
> 2) Encoding is indeed an issue, as Methieu mentioned, when opening newer SOSI files. These use increasingly UTF8 encoding which is not supported by the OGR driver, but that can be worked around (e.g. here: https://gitlab.com/ninsbl/osgeonorge/-/blob/main/osgeonorge/sosi.py?ref_type=heads#L15) as SOSI files are basically siimple text-files,
> 3) I was never bothered by the other issues Mathieu mentioned, but I also have to admitt that the latest SOSI files I opened with OGR are from late 2022... Mathieu, do you know if there have been any significant changes to the format since then? If not, we may assume, that also currently provided files can still be handled with OGR.
>
> That said, if Kartverket one fine day finally follows through and abandons SOSI or provides all vector data in an alternative OGR-readable format, I would be happy to abandon the OGR-SOSI driver as well! Historic data could be accessed with historic versions of libraries... However, until that is the case, I would love to see the SOSI driver as part of GDAL distributions...
>
> Mathieu, could you keep us informed if Kartverket provides a full replacement for SOSI? That would be very useful information.
>
> Kind regards,
> Stefan
> Gesendet: Mittwoch, 15. November 2023 um 11:48 Uhr
> Von: "Tachon Mathieu via gdal-dev" <gdal-dev at lists.osgeo.org>
> An: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
> Betreff: Re: [gdal-dev] Is the SOSI Norwegian driver still useful?
> Hi,
>
> The SOSI driver (fyba) integrated in GDAL is an old version and has not been updated for many years. We have an updated version of it in the GIS software (in-house) developed by the National Mapping Authority in Norway (Kartverket), that many people in the organisation use. There are major changes in the updated version: use of wchar data type instead of char data type for dealing with strings, it can handle UTF8 encoding, the object types and properties tables have been updated, amongst other things. As the latter were hard-coded and that the SOSI data model change rather dynamically, this is one of reasons for which newer versions of fyba have not been ported to GDAL, as it would require much time and resources. fyba has now extended its internal use of GDAL, which may rely on different versions of GDAL from the latest ones (not sure about that), and the people working with it find it challenging to keep an updated version of the SOSI driver in GDAL. We do not really have resources internally (at Kartverket) for doing such work. At the same time, SOSI will no longer be used as exchange format in just a few years. We also have currently a discussion internally about whether the SOSI driver should be removed from GDAL or not.
>
> Kind regards,
>
> Mathieu
> _______________________________________________ gdal-dev mailing list gdal-dev at lists.osgeo.org https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231118/22abcc83/attachment.htm>

From giovanni.anconitano at uniroma1.it  Sat Nov 18 17:15:45 2023
From: giovanni.anconitano at uniroma1.it (Giovanni Anconitano)
Date: Sat, 18 Nov 2023 17:15:45 -0800
Subject: [gdal-dev] Resampling a raster with gdalwarp
Message-ID: <CADpTLOmJ9mNDPG4Ht4_OoFEXLxATtiVhnbNv+miNeGC+1iKkBg@mail.gmail.com>

Hello,

I have a question about how to properly set the -tr flag when using
gdalwarp.
In particular, I'm using gdalwarp for resampling a GeoTiff from its
original resolution to a target resolution.
Let's consider, for simplicity, the original pixel size equal to (5m, 5m)
and the target resolution equal to (10m, 10m).

This is the command I use: gdalwarp -tr 10 -10 input.tif output.tif

I'm using a negative <yres> because when I open the GeoTiff file in QGIS,
or if I use gdalinfo, I get a pixel size equal to (5, -5) for the source
raster.

Is it correct to use a negative <yres> with gdalwarp? I also tried -tr 10
10, but the result seems to be the same as the case in which I use -tr 10
-10.
In both cases gdalinfo and QGIS display (10,-10) as the pixel size.

How does gdalwarp treat a negative yres value?

Thank you

Giovanni

-- 
**Fai crescere le giovani ricercatrici e i giovani ricercatori*

**con il 5 
per mille alla Sapienza
*Scrivi il codice fiscale dell'Universit??
*80209930587
Cinque per mille <https://www.uniroma1.it/it/node/23149>*





-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231118/a6781042/attachment-0001.htm>

From even.rouault at spatialys.com  Sat Nov 18 17:27:36 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 19 Nov 2023 02:27:36 +0100
Subject: [gdal-dev] Resampling a raster with gdalwarp
In-Reply-To: <CADpTLOmJ9mNDPG4Ht4_OoFEXLxATtiVhnbNv+miNeGC+1iKkBg@mail.gmail.com>
References: <CADpTLOmJ9mNDPG4Ht4_OoFEXLxATtiVhnbNv+miNeGC+1iKkBg@mail.gmail.com>
Message-ID: <304cdf45-1147-494c-a14b-d5be11f54051@spatialys.com>

Giovanni,

gdalwarp takes the absolute value of the second tr value, so -tr 10 -10 
is understood as -tr 10 10

It is expected that gdalinfo reports a negative value for the pixel size 
factor for the vertical axis, as in GeoTIFF when the image is north-up, 
the first line of the image is intended to be the one displayed at the 
top of your screen, and as the line number of your screen increase from 
the top of your screen to the bottom, northings or latitudes increase 
from the bottom to the top, hence the negative sign...

More detailed equivalent explanation at 
https://gis.stackexchange.com/a/229807/218992 (you can ignore the 
paragraph "As to why the image flipped..." which is specific to the 
question in that stackexchange thread)

Even

Le 19/11/2023 ? 02:15, Giovanni Anconitano via gdal-dev a ?crit?:
> Hello,
>
> I have a question about how to properly set the -tr flag when using 
> gdalwarp.
> In particular, I'm using gdalwarp for resampling a GeoTiff from its 
> original resolution to a target resolution.
> Let's consider, for simplicity, the original pixel size equal to (5m, 
> 5m) and the target resolution equal to (10m, 10m).
>
> This is the command I use: gdalwarp -tr 10 -10 input.tif output.tif
>
> I'm using a negative <yres> because when I open the GeoTiff file in 
> QGIS, or if I use gdalinfo, I get a pixel size equal to (5, -5) for 
> the source raster.
>
> Is it correct to use a negative <yres> with gdalwarp? I also tried -tr 
> 10 10, but the result seems to be the same as the case in which I use 
> -tr 10 -10.
> In both cases gdalinfo and QGIS display (10,-10) as the pixel size.
>
> How does gdalwarp treat a negative yres value?
>
> Thank you
>
> Giovanni
>
> *
> *Fai crescere le giovani ricercatrici e i giovani ricercatori*
> *
> *con il 5 per mille alla Sapienza
> *
> Scrivi il codice fiscale dell'Universit? *80209930587
> Cinque per mille <https://www.uniroma1.it/it/node/23149>*
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231119/d96ea83c/attachment.htm>

From giovanni.anconitano at uniroma1.it  Sat Nov 18 18:08:43 2023
From: giovanni.anconitano at uniroma1.it (Giovanni Anconitano)
Date: Sat, 18 Nov 2023 18:08:43 -0800
Subject: [gdal-dev] Resampling a raster with gdalwarp
In-Reply-To: <304cdf45-1147-494c-a14b-d5be11f54051@spatialys.com>
References: <CADpTLOmJ9mNDPG4Ht4_OoFEXLxATtiVhnbNv+miNeGC+1iKkBg@mail.gmail.com>
 <304cdf45-1147-494c-a14b-d5be11f54051@spatialys.com>
Message-ID: <CADpTLOn2A9_zyqiCfogOc2S5d0kV4H9BFwmpZHsdJATz-h9z3g@mail.gmail.com>

Thank you very much.

Just to be sure, gdalwarp takes the absolute value of the second tr value
independently from the units of the pixel size.
It can be either meters or degrees depending on the coordinate reference
system. Is that correct?

Thanks again,
Giovanni

Il giorno sab 18 nov 2023 alle ore 17:27 Even Rouault <
even.rouault at spatialys.com> ha scritto:

> Giovanni,
>
> gdalwarp takes the absolute value of the second tr value, so -tr 10 -10 is
> understood as -tr 10 10
>
> It is expected that gdalinfo reports a negative value for the pixel size
> factor for the vertical axis, as in GeoTIFF when the image is north-up, the
> first line of the image is intended to be the one displayed at the top of
> your screen, and as the line number of your screen increase from the top of
> your screen to the bottom, northings or latitudes increase from the bottom
> to the top, hence the negative sign...
>
> More detailed equivalent explanation at
> https://gis.stackexchange.com/a/229807/218992 (you can ignore the
> paragraph "As to why the image flipped..." which is specific to the
> question in that stackexchange thread)
>
> Even
> Le 19/11/2023 ? 02:15, Giovanni Anconitano via gdal-dev a ?crit :
>
> Hello,
>
> I have a question about how to properly set the -tr flag when using
> gdalwarp.
> In particular, I'm using gdalwarp for resampling a GeoTiff from its
> original resolution to a target resolution.
> Let's consider, for simplicity, the original pixel size equal to (5m, 5m)
> and the target resolution equal to (10m, 10m).
>
> This is the command I use: gdalwarp -tr 10 -10 input.tif output.tif
>
> I'm using a negative <yres> because when I open the GeoTiff file in QGIS,
> or if I use gdalinfo, I get a pixel size equal to (5, -5) for the source
> raster.
>
> Is it correct to use a negative <yres> with gdalwarp? I also tried -tr 10
> 10, but the result seems to be the same as the case in which I use -tr 10
> -10.
> In both cases gdalinfo and QGIS display (10,-10) as the pixel size.
>
> How does gdalwarp treat a negative yres value?
>
> Thank you
>
> Giovanni
>
>
> * Fai crescere le giovani ricercatrici e i giovani ricercatori *
>
> *con il 5 per mille alla Sapienza *
> Scrivi il codice fiscale dell'Universit?
> *80209930587 Cinque per mille <https://www.uniroma1.it/it/node/23149>*
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>

-- 
**Fai crescere le giovani ricercatrici e i giovani ricercatori*

**con il 5 
per mille alla Sapienza
*Scrivi il codice fiscale dell'Universit??
*80209930587
Cinque per mille <https://www.uniroma1.it/it/node/23149>*





-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231118/f1a411c7/attachment.htm>

From even.rouault at spatialys.com  Sun Nov 19 02:49:32 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 19 Nov 2023 11:49:32 +0100
Subject: [gdal-dev] Resampling a raster with gdalwarp
In-Reply-To: <CADpTLOn2A9_zyqiCfogOc2S5d0kV4H9BFwmpZHsdJATz-h9z3g@mail.gmail.com>
References: <CADpTLOmJ9mNDPG4Ht4_OoFEXLxATtiVhnbNv+miNeGC+1iKkBg@mail.gmail.com>
 <304cdf45-1147-494c-a14b-d5be11f54051@spatialys.com>
 <CADpTLOn2A9_zyqiCfogOc2S5d0kV4H9BFwmpZHsdJATz-h9z3g@mail.gmail.com>
Message-ID: <aeabc6b9-94e5-4900-ad1a-7e7ef32c2f9f@spatialys.com>


Le 19/11/2023 ? 03:08, Giovanni Anconitano a ?crit?:
> Thank you very much.
>
> Just to be sure, gdalwarp takes the absolute value of the second tr 
> value independently from the units of the pixel size.
> It can be either meters or degrees depending on the coordinate 
> reference system. Is that correct?

yes: 
https://github.com/OSGeo/gdal/blob/208d0cdb35cc4f790f516eb7a3a88a1d9149a2ed/apps/gdalwarp_lib.cpp#L5411


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From matteo.ghetta at gmail.com  Tue Nov 21 00:24:36 2023
From: matteo.ghetta at gmail.com (Matteo Ghetta)
Date: Tue, 21 Nov 2023 09:24:36 +0100
Subject: [gdal-dev] COPY statement failed with PG_USE_COPY=YES
Message-ID: <a4445148-c3f2-4a21-b484-7bc93a734d55@gmail.com>

Hi all,

I'm trying to import (many) shapefiles into a PG database. I'm facing 
the following error, but only when PG_USE_COPY is set to YES:

ERROR 1: COPY statement failed.
ERROR:  date/time field value out of range: "0000/00/00"
CONTEXT:  COPY TABLE, line 12682, column DATA_INI: "0000/00/00"

The value in the source shapefile is NULL for some rows. With 
PG_USE_COPY NO the import works perfectly.

I've found this old ticket, that seems to describe this exact issue, and 
is marked as resolved:

https://trac.osgeo.org/gdal/ticket/4265

Tested with:

* GDAL 3.2.2, released 2021/03/05
* GDAL 3.7.3, released 2023/10/30

Do you have any ideas about what is causing this?

Cheers and thanks

Matteo

From even.rouault at spatialys.com  Tue Nov 21 03:24:53 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 21 Nov 2023 12:24:53 +0100
Subject: [gdal-dev] COPY statement failed with PG_USE_COPY=YES
In-Reply-To: <a4445148-c3f2-4a21-b484-7bc93a734d55@gmail.com>
References: <a4445148-c3f2-4a21-b484-7bc93a734d55@gmail.com>
Message-ID: <41de68dc-8847-416a-9711-11ed83af3a43@spatialys.com>

Matteo,

 From a quick test, I can't reproduce. Please provide a minimum 
shapefile that reproduces the issue

$ cat test.csv
id,dt
1,"0000/00/00"
$ cat test.csvt
Integer,Date
$ ogr2ogr date_null.shp test.csv
Warning 1: Invalid value type found in record 1 for field dt. This 
warning will no longer be emitted
$ ogr2ogr pg:dbname=autotest date_null.dbf --config PG_USE_COPY YES 
-overwrite
$ ogrinfo pg:dbname=autotest date_null -al
INFO: Open of `pg:dbname=autotest'
 ????? using driver `PostgreSQL' successful.

Layer name: date_null
Geometry: None
Feature Count: 1
Layer SRS WKT:
(unknown)
FID Column = ogc_fid
id: Integer (9.0)
dt: Date
OGRFeature(date_null):1
 ? id (Integer) = 1
 ? dt (Date) = (null)

Even

Le 21/11/2023 ? 09:24, Matteo Ghetta via gdal-dev a ?crit?:
> Hi all,
>
> I'm trying to import (many) shapefiles into a PG database. I'm facing 
> the following error, but only when PG_USE_COPY is set to YES:
>
> ERROR 1: COPY statement failed.
> ERROR:? date/time field value out of range: "0000/00/00"
> CONTEXT:? COPY TABLE, line 12682, column DATA_INI: "0000/00/00"
>
> The value in the source shapefile is NULL for some rows. With 
> PG_USE_COPY NO the import works perfectly.
>
> I've found this old ticket, that seems to describe this exact issue, 
> and is marked as resolved:
>
> https://trac.osgeo.org/gdal/ticket/4265
>
> Tested with:
>
> * GDAL 3.2.2, released 2021/03/05
> * GDAL 3.7.3, released 2023/10/30
>
> Do you have any ideas about what is causing this?
>
> Cheers and thanks
>
> Matteo
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Tue Nov 21 06:10:07 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 21 Nov 2023 15:10:07 +0100
Subject: [gdal-dev] Advanced 3.8.1 release
Message-ID: <5aa465f5-44e1-4d21-98a0-d7d4dfc27264@spatialys.com>

Hi,

yesterday was a very prolific day where several regressions of 3.8.0 
were reported:

- https://github.com/OSGeo/gdal/issues/8755: Python: Filtered 
parquet/arrow layers sometimes produce invalid Map<String, String> arrays

- https://github.com/OSGeo/gdal/issues/8757: Conversion from GPKG using 
ogr2ogr fails in 3.8.0 when there are more than 125 columns

- https://github.com/OSGeo/gdal/issues/8759: Possible regression in date 
parsing in GDAL 3.8.0

- https://github.com/OSGeo/gdal/issues/8761: Conversion from GPKG with 
the -preserve_fid flag fails when using ogr2ogr in 3.8.0

- https://github.com/OSGeo/gdal/issues/8767:? Spurious warnings when 
reading shapefiles (actually a 3.7.3 regression)

They have now been fixed. I'm considering issuing a 3.8.1 release 
candidate end of this week.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Wed Nov 22 04:05:51 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 22 Nov 2023 13:05:51 +0100
Subject: [gdal-dev] Motion: adopt RFC 97: OGRFeatureDefn,
 OGRFieldDefn and OGRGeomFieldDefn "sealing"
Message-ID: <c16f8940-92e1-4ac8-8a11-c44a04672220@spatialys.com>

Hi,

Motion: adopt RFC 97: OGRFeatureDefn, OGRFieldDefn and OGRGeomFieldDefn 
"sealing"

https://github.com/OSGeo/gdal/pull/8734

Pre-rendered view:

https://github.com/rouault/gdal/blob/rfc97_text/doc/source/development/rfc/rfc97_feature_and_fielddefn_sealing.rst 


Starting with my +1,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jukka.rahkonen at maanmittauslaitos.fi  Wed Nov 22 09:18:18 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Wed, 22 Nov 2023 17:18:18 +0000
Subject: [gdal-dev] Motion: adopt RFC 97: OGRFeatureDefn,
 OGRFieldDefn and OGRGeomFieldDefn "sealing"
In-Reply-To: <c16f8940-92e1-4ac8-8a11-c44a04672220@spatialys.com>
References: <c16f8940-92e1-4ac8-8a11-c44a04672220@spatialys.com>
Message-ID: <AM0PR09MB3219C428453677E9658BD7E5FDBAA@AM0PR09MB3219.eurprd09.prod.outlook.com>

+1

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault via gdal-dev
L?hetetty: keskiviikko 22. marraskuuta 2023 14.06
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Motion: adopt RFC 97: OGRFeatureDefn, OGRFieldDefn and OGRGeomFieldDefn "sealing"

Hi,

Motion: adopt RFC 97: OGRFeatureDefn, OGRFieldDefn and OGRGeomFieldDefn "sealing"

...

Starting with my +1,

Even

--
My software is free, but my time generally not.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org

From j1 at jimenezshaw.com  Wed Nov 22 10:22:02 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 22 Nov 2023 19:22:02 +0100
Subject: [gdal-dev] Motion: adopt RFC 97: OGRFeatureDefn,
 OGRFieldDefn and OGRGeomFieldDefn "sealing"
In-Reply-To: <AM0PR09MB3219C428453677E9658BD7E5FDBAA@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <c16f8940-92e1-4ac8-8a11-c44a04672220@spatialys.com>
 <AM0PR09MB3219C428453677E9658BD7E5FDBAA@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <CADRrdKsd7G3SVUu-=iQioopSCXDKP=ZOCRDojB2qvod-DkSnsw@mail.gmail.com>

+1 Javier

On Wed, 22 Nov 2023 at 18:18, Rahkonen Jukka via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> +1
>
> -Jukka Rahkonen-
>
> -----Alkuper?inen viesti-----
> L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even
> Rouault via gdal-dev
> L?hetetty: keskiviikko 22. marraskuuta 2023 14.06
> Vastaanottaja: gdal-dev at lists.osgeo.org
> Aihe: [gdal-dev] Motion: adopt RFC 97: OGRFeatureDefn, OGRFieldDefn and
> OGRGeomFieldDefn "sealing"
>
> Hi,
>
> Motion: adopt RFC 97: OGRFeatureDefn, OGRFieldDefn and OGRGeomFieldDefn
> "sealing"
>
> ...
>
> Starting with my +1,
>
> Even
>
> --
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231122/971f6d1b/attachment.htm>

From j1 at jimenezshaw.com  Thu Nov 23 05:53:40 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 23 Nov 2023 14:53:40 +0100
Subject: [gdal-dev] Problems compiling in Mac
Message-ID: <CADRrdKsqjyUKU05o+FFD7r49QUYGtX=iD-8T37e9ieezxn1wfg@mail.gmail.com>

Hi

A colleague of mine is compiling in Mac. I am aware of the problems with
arrow and libkml:
https://gdal.org/development/building_from_source.html#building-on-macos

But we are compiling with GDAL_USE_EXTERNAL_LIBS=OFF

However he has those problems with arrow and libkml, and had to unistall
them from his computer.

I thought that it was enough disabling GDAL_USE_EXTERNAL_LIBS (we are not
enabling explicitly arrow or kml). Am I wrong?

Thanks.
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231123/d80ff7ff/attachment.htm>

From even.rouault at spatialys.com  Thu Nov 23 06:01:38 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 23 Nov 2023 15:01:38 +0100
Subject: [gdal-dev] Problems compiling in Mac
In-Reply-To: <CADRrdKsqjyUKU05o+FFD7r49QUYGtX=iD-8T37e9ieezxn1wfg@mail.gmail.com>
References: <CADRrdKsqjyUKU05o+FFD7r49QUYGtX=iD-8T37e9ieezxn1wfg@mail.gmail.com>
Message-ID: <09e8c28d-fa4e-4c37-81b1-f740b8228a2b@spatialys.com>


Le 23/11/2023 ? 14:53, Javier Jimenez Shaw via gdal-dev a ?crit?:
> Hi
>
> A colleague of mine is compiling in Mac. I am aware of the problems 
> with arrow and libkml:
> https://gdal.org/development/building_from_source.html#building-on-macos
>
> But we are compiling with GDAL_USE_EXTERNAL_LIBS=OFF
>
> However he has those problems with arrow and libkml, and had to 
> unistall them from his computer.
>
> I thought that it was enough disabling?GDAL_USE_EXTERNAL_LIBS (we are 
> not enabling explicitly arrow or kml). Am I wrong?

He might have to remove CMakeCache.txt because it could contain the 
GDAL_USE_LIBKML=ON declaration that was set before turning off 
GDAL_USE_EXTERNAL_LIBS


>
> Thanks.
> .___ ._ ..._ .. . ._.? .___ .. __ . _. . __..? ... .... ._ .__
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231123/413d154a/attachment.htm>

From j1 at jimenezshaw.com  Thu Nov 23 07:22:37 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 23 Nov 2023 16:22:37 +0100
Subject: [gdal-dev] Problems compiling in Mac
In-Reply-To: <09e8c28d-fa4e-4c37-81b1-f740b8228a2b@spatialys.com>
References: <CADRrdKsqjyUKU05o+FFD7r49QUYGtX=iD-8T37e9ieezxn1wfg@mail.gmail.com>
 <09e8c28d-fa4e-4c37-81b1-f740b8228a2b@spatialys.com>
Message-ID: <CADRrdKuVhwRkfEBGKpj9=0AuD8v861FXf+HUxFXd6T7oieqzCw@mail.gmail.com>

On Thu, 23 Nov 2023 at 15:01, Even Rouault <even.rouault at spatialys.com>
wrote:

>
> Le 23/11/2023 ? 14:53, Javier Jimenez Shaw via gdal-dev a ?crit :
>
> Hi
>
> A colleague of mine is compiling in Mac. I am aware of the problems with
> arrow and libkml:
> https://gdal.org/development/building_from_source.html#building-on-macos
>
> But we are compiling with GDAL_USE_EXTERNAL_LIBS=OFF
>
> However he has those problems with arrow and libkml, and had to unistall
> them from his computer.
>
> I thought that it was enough disabling GDAL_USE_EXTERNAL_LIBS (we are not
> enabling explicitly arrow or kml). Am I wrong?
>
> He might have to remove CMakeCache.txt because it could contain the
> GDAL_USE_LIBKML=ON declaration that was set before turning off
> GDAL_USE_EXTERNAL_LIBS
>
He started from an empty directory.

We are using conan, that is python, and setting
GDAL_USE_EXTERNAL_LIBS=False . This is the result after searching for that
string:

$ rg  -C3 GDAL_USE_EXTERNAL_LIBS
9e1a1eccb8f4704e0053d8d98cd817cbba03c366/CMakeCache.txt
1010-
1011-//Whether detected external libraries should be used by default.
1012-// This should be set before CMakeCache.txt is created.
1013:GDAL_USE_EXTERNAL_LIBS:BOOL=False
1014-
1015-//Set ON to use FREEXL
1016-GDAL_USE_FREEXL:BOOL=OFF
--
2419-GDAL_ENABLE_PLUGINS_NO_DEPS-ADVANCED:INTERNAL=1
2420-//ADVANCED property for variable: GDAL_USE_CPL_MULTIPROC_PTHREAD
2421-GDAL_USE_CPL_MULTIPROC_PTHREAD-ADVANCED:INTERNAL=1
2422://Previous value of GDAL_USE_EXTERNAL_LIBS
2423:GDAL_USE_EXTERNAL_LIBS_OLD_CACHED:INTERNAL=False
2424-//STRINGS property for variable: GDAL_USE_INTERNAL_LIBS
2425-GDAL_USE_INTERNAL_LIBS-STRINGS:INTERNAL=ON;OFF;WHEN_NO_EXTERNAL
2426-//Set ON to use Rasterlite2



>
> Thanks.
> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231123/5d156c37/attachment.htm>

From even.rouault at spatialys.com  Thu Nov 23 07:25:23 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 23 Nov 2023 16:25:23 +0100
Subject: [gdal-dev] Problems compiling in Mac
In-Reply-To: <CADRrdKuVhwRkfEBGKpj9=0AuD8v861FXf+HUxFXd6T7oieqzCw@mail.gmail.com>
References: <CADRrdKsqjyUKU05o+FFD7r49QUYGtX=iD-8T37e9ieezxn1wfg@mail.gmail.com>
 <09e8c28d-fa4e-4c37-81b1-f740b8228a2b@spatialys.com>
 <CADRrdKuVhwRkfEBGKpj9=0AuD8v861FXf+HUxFXd6T7oieqzCw@mail.gmail.com>
Message-ID: <af71c122-4f32-42d1-aad8-b1fd796897e4@spatialys.com>


>>
>>     I thought that it was enough disabling?GDAL_USE_EXTERNAL_LIBS (we
>>     are not enabling explicitly arrow or kml). Am I wrong?
>
>     He might have to remove CMakeCache.txt because it could contain
>     the GDAL_USE_LIBKML=ON declaration that was set before turning off
>     GDAL_USE_EXTERNAL_LIBS
>
> He started from an empty directory.
>
> We are using conan, that is python, and setting 
> GDAL_USE_EXTERNAL_LIBS=False . This is the result after searching for 
> that string:

and what is the value of GDAL_USE_LIBKML and GDAL_USE_ARROW ? and what 
is the exact error message?


-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231123/c2f03288/attachment.htm>

From even.rouault at spatialys.com  Thu Nov 23 09:00:19 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 23 Nov 2023 18:00:19 +0100
Subject: [gdal-dev] Is the SOSI Norwegian driver still useful?
In-Reply-To: <EuFefmM_GYf2SN9nt-Wz3BOSG1ZJkHSF9-ExXiyL6Qf4i5gLB4exOfdOnefaKIX0mEo0te5vohApD8N3BFP8L0SolxNo5V81UI_x7GSAbTg=@protonmail.com>
References: <XqWme1VRkPwgAbzhRDDVFx_85AQlJD7YFzPYGIFN2fGDOSfEVmvNeAmGIG5f4RQbf8fh-zRfa0KleJE8LK50mRvSRiziRe00Rcv8NOxnHrc=@protonmail.com>
 <trinity-9cc2dc8f-d444-4244-b319-35287c1088f0-1700336013671@3c-app-gmx-bs10>
 <EuFefmM_GYf2SN9nt-Wz3BOSG1ZJkHSF9-ExXiyL6Qf4i5gLB4exOfdOnefaKIX0mEo0te5vohApD8N3BFP8L0SolxNo5V81UI_x7GSAbTg=@protonmail.com>
Message-ID: <1825510b-c1c3-4ba8-bdc2-a806c22138e5@spatialys.com>

Hi,

>
> However, I doubt that these organisations use the SOSI driver from 
> GDAL/OGR to produce these files.

They can't: the driver is read-only

Discussing that topic with other developers today during GDAL maintainer 
meeting, we could proceed with how we did in the past with drivers we 
suspected to be no longer used but lacked data points. That is in 3.9 
the driver will be still there, but when it detects a SOSI dataset, it 
will error out with a message indicating to the user that they have to 
define an environment variable to enable it, and invite them to file an 
issue on the bug tracker to make a case for keeping the driver, 
otherwise without feedback, the driver will be fully removed in 3.10

Dan also pointed to that QGIS ticket 
(https://github.com/qgis/QGIS/issues/50868) where a user reported a 
crash when trying to use a SOSI file, showing that there are issues in 
the driver and/or libfyba.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231123/a6148228/attachment.htm>

From j1 at jimenezshaw.com  Thu Nov 23 09:12:21 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 23 Nov 2023 18:12:21 +0100
Subject: [gdal-dev] Problems compiling in Mac
In-Reply-To: <af71c122-4f32-42d1-aad8-b1fd796897e4@spatialys.com>
References: <CADRrdKsqjyUKU05o+FFD7r49QUYGtX=iD-8T37e9ieezxn1wfg@mail.gmail.com>
 <09e8c28d-fa4e-4c37-81b1-f740b8228a2b@spatialys.com>
 <CADRrdKuVhwRkfEBGKpj9=0AuD8v861FXf+HUxFXd6T7oieqzCw@mail.gmail.com>
 <af71c122-4f32-42d1-aad8-b1fd796897e4@spatialys.com>
Message-ID: <CADRrdKvMUfLy7D_EZT1M92vZrHRBXnW1Mdns1YmaTbupZwCriQ@mail.gmail.com>

My colleague (I have only Linux) will give more info.

On Thu, 23 Nov 2023 at 16:25, Even Rouault <even.rouault at spatialys.com>
wrote:

>
>
>> I thought that it was enough disabling GDAL_USE_EXTERNAL_LIBS (we are not
>> enabling explicitly arrow or kml). Am I wrong?
>>
>> He might have to remove CMakeCache.txt because it could contain the
>> GDAL_USE_LIBKML=ON declaration that was set before turning off
>> GDAL_USE_EXTERNAL_LIBS
>>
> He started from an empty directory.
>
> We are using conan, that is python, and setting
> GDAL_USE_EXTERNAL_LIBS=False . This is the result after searching for that
> string:
>
> and what is the value of GDAL_USE_LIBKML and GDAL_USE_ARROW ? and what is
> the exact error message?
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231123/51a7ace1/attachment-0001.htm>

From even.rouault at spatialys.com  Thu Nov 23 13:56:42 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 23 Nov 2023 22:56:42 +0100
Subject: [gdal-dev] GDAL 3.8.1 RC1 is available, and motion to approve it
Message-ID: <1f263a33-81f0-45f0-8b69-3bcfc2024e62@spatialys.com>

Hi,

I have prepared a GDAL/OGR 3.8.1 release candidate.

Pick up an archive among the following ones (by ascending size):

 ? https://download.osgeo.org/gdal/3.8.1/gdal-3.8.1rc1.tar.xz
 ? https://download.osgeo.org/gdal/3.8.1/gdal-3.8.1rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.8.1/gdal381rc1.zip

A snapshot of the gdalautotest suite is also available:

https://download.osgeo.org/gdal/3.8.1/gdalautotest-3.8.1rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.8.1/gdalautotest-3.8.1rc1.zip

The NEWS file is here:

 ? https://github.com/OSGeo/gdal/blob/v3.8.1RC1/NEWS.md

 From a packaging point of view, the following change might have impacts on
build recipes:
* Python bindings: define entry_points.console_scripts. Affects in 
particular
 ? Windows where .exe launcher scripts are now installed in the Scripts
 ? subdirectory.

Motion: adopt 3.8.1 RC1 as final 3.8.1 release

Starting with my +1,

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From sebastic at xs4all.nl  Thu Nov 23 21:34:47 2023
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Fri, 24 Nov 2023 06:34:47 +0100
Subject: [gdal-dev] GDAL 3.8.1 RC1 is available, and motion to approve it
In-Reply-To: <1f263a33-81f0-45f0-8b69-3bcfc2024e62@spatialys.com>
References: <1f263a33-81f0-45f0-8b69-3bcfc2024e62@spatialys.com>
Message-ID: <ce4d4472-162f-48b4-a726-31904095bfe7@xs4all.nl>

On 11/23/23 22:56, Even Rouault via gdal-dev wrote:
>  From a packaging point of view, the following change might have impacts on
> build recipes:

The Python utilities are no longer installed with the .py extension, 
this broke their use in QGIS when we removed this in the Debian package 
some time ago. Don't know if that's still the case. Either way, this 
doesn't seem like an appropriate change for a .1 patch release.

usr/bin/__init__ is now also installed which not correct.

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From carsten.schultz at pix4d.com  Fri Nov 24 02:52:39 2023
From: carsten.schultz at pix4d.com (Carsten Schultz)
Date: Fri, 24 Nov 2023 11:52:39 +0100
Subject: [gdal-dev] Problems compiling in Mac
In-Reply-To: <CADRrdKvMUfLy7D_EZT1M92vZrHRBXnW1Mdns1YmaTbupZwCriQ@mail.gmail.com>
References: <CADRrdKsqjyUKU05o+FFD7r49QUYGtX=iD-8T37e9ieezxn1wfg@mail.gmail.com>
 <09e8c28d-fa4e-4c37-81b1-f740b8228a2b@spatialys.com>
 <CADRrdKuVhwRkfEBGKpj9=0AuD8v861FXf+HUxFXd6T7oieqzCw@mail.gmail.com>
 <af71c122-4f32-42d1-aad8-b1fd796897e4@spatialys.com>
 <CADRrdKvMUfLy7D_EZT1M92vZrHRBXnW1Mdns1YmaTbupZwCriQ@mail.gmail.com>
Message-ID: <CA6B270F-3CA3-40AE-B26A-63B07A6C3E90@pix4d.com>

Hallo!

> On 23. Nov 2023, at 18:12, Javier Jimenez Shaw via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
> 
> My colleague (I have only Linux) will give more info.

I am that colleague.

> 
> On Thu, 23 Nov 2023 at 16:25, Even Rouault <even.rouault at spatialys.com> wrote:
> 
>>> 
>>> I thought that it was enough disabling GDAL_USE_EXTERNAL_LIBS (we are not enabling explicitly arrow or kml). Am I wrong?
>> He might have to remove CMakeCache.txt because it could contain the GDAL_USE_LIBKML=ON declaration that was set before turning off GDAL_USE_EXTERNAL_LIBS
>> He started from an empty directory.
>> 
>> We are using conan, that is python, and setting GDAL_USE_EXTERNAL_LIBS=False . This is the result after searching for that string:
> and what is the value of GDAL_USE_LIBKML and GDAL_USE_ARROW ? and what is the exact error message?

I have re-tested everything, and at the moment I can only reproduce the libkml problem. It is that GDAL_USE_EXTERNAL_LIBS=OFF is not respected by the configuration for that library.

Longer version: We use

> GDAL_USE_EXTERNAL_LIBS:BOOL=False

with the intention that no external libraries are used unless requested explicitly. This works fine for other libraries. (E.g. "-- ARROW has been found, but is disabled due to GDAL_USE_EXTERNAL_LIBS=OFF. Enable it by setting GDAL_USE_ARROW=ON?. The detection for some of those libraries produced warnings, though, maybe there were actual errors in the past.) However, GDAL_USE_LIBKML seems not to respect that, and it still ends up ON in case that I happen to have it installed. This then also triggers OGR_ENABLE_DRIVER_LIBKML=ON.

Now it so happens that compilation then fails because of a version mismatch between the Boost version that the libkml that I have installed via homebrew expects and the Boost that I told GDAL to use, but that?s not the main problem. Even if it would compile, we would not want the result of the GDAL build depend on whether libkml is installed somewhere or not.

We can of course work around this by explicitly setting GDAL_USE_LIBKML=OFF.

Thanks for your time,

Carsten


P.S.: Even longer version.

To test I did the following. I first ran GDAL?s CMake with the settings that we use (which include GDAL_USE_EXTERNAL_LIBS=False). I then installed gdal via homebrew, removed it again (probably not a necessary step, it occurs to me now), but left all of its dependencies in place. I then ran GDAL?s CMake again, with the same settings and a clean directory. These are the differences:

$ rg :BOOL= gdal-clean/build/d185604a596dec60cbd1808d822f70b0e1117b56/CMakeCache.txt > clean-bools
$ rg :BOOL= gdal-dirty/build/d185604a596dec60cbd1808d822f70b0e1117b56/CMakeCache.txt > dirty-bools
$ diff clean-bools dirty-bools  172a173,175
> GDAL_USE_ARROW:BOOL=OFF
> GDAL_USE_ARROWDATASET:BOOL=OFF
> GDAL_USE_CFITSIO:BOOL=OFF
176a180
> GDAL_USE_FREEXL:BOOL=OFF
187a192
> GDAL_USE_JSONC:BOOL=OFF
190a196
> GDAL_USE_LERC:BOOL=OFF
191a198
> GDAL_USE_LIBKML:BOOL=ON
194a202,203
> GDAL_USE_NETCDF:BOOL=OFF
> GDAL_USE_ODBC:BOOL=OFF
197a207
> GDAL_USE_OPENJPEG:BOOL=False
198a209
> GDAL_USE_PARQUET:BOOL=OFF
202a214
> GDAL_USE_POPPLER:BOOL=OFF
203a216
> GDAL_USE_QHULL:BOOL=OFF
205a219
> GDAL_USE_SPATIALITE:BOOL=OFF
209a224
> GDAL_USE_XERCESC:BOOL=OFF
243a259,260
> OGR_ENABLE_DRIVER_LIBKML:BOOL=ON
> OGR_ENABLE_DRIVER_LIBKML_PLUGIN:BOOL=OFF

All of the extra FALSE entries are from stuff which has now been detected but ignored as wanted, they are ok. Just LIBKML doesn?t play nicely.

My main testing was with 3.6.4, but I also did a quick test with 3.8.0 and I saw the same behaviour.






From even.rouault at spatialys.com  Fri Nov 24 03:05:45 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 24 Nov 2023 12:05:45 +0100
Subject: [gdal-dev] GDAL 3.8.1 RC2 is available (was Re: GDAL 3.8.1 RC1 is
 available, and motion to approve it)
In-Reply-To: <ce4d4472-162f-48b4-a726-31904095bfe7@xs4all.nl>
References: <1f263a33-81f0-45f0-8b69-3bcfc2024e62@spatialys.com>
 <ce4d4472-162f-48b4-a726-31904095bfe7@xs4all.nl>
Message-ID: <bad8915d-7bf9-4759-a613-a926e3433471@spatialys.com>

Hi,

OK, I've reverted that change. I'll guess someone will have to figure 
out how to have both .py scripts and .exe/.sh launchers at the same time...

Pick up an archive among the following ones (by ascending size):

 ? https://download.osgeo.org/gdal/3.8.1/gdal-3.8.1rc2.tar.xz
 ? https://download.osgeo.org/gdal/3.8.1/gdal-3.8.1rc2.tar.gz
 ? https://download.osgeo.org/gdal/3.8.1/gdal381rc2.zip

A snapshot of the gdalautotest suite is also available:

https://download.osgeo.org/gdal/3.8.1/gdalautotest-3.8.1rc2.tar.gz
 ? https://download.osgeo.org/gdal/3.8.1/gdalautotest-3.8.1rc2.zip

Withdrawing previous motion and:

Motion: adopt 3.8.1 RC2 as final 3.8.1 release

Starting with my +1,

Even

Le 24/11/2023 ? 06:34, Sebastiaan Couwenberg via gdal-dev a ?crit?:
> On 11/23/23 22:56, Even Rouault via gdal-dev wrote:
>> ?From a packaging point of view, the following change might have 
>> impacts on
>> build recipes:
>
> The Python utilities are no longer installed with the .py extension, 
> this broke their use in QGIS when we removed this in the Debian 
> package some time ago. Don't know if that's still the case. Either 
> way, this doesn't seem like an appropriate change for a .1 patch release.
>
> usr/bin/__init__ is now also installed which not correct.
>
> Kind Regards,
>
> Bas
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Fri Nov 24 03:15:22 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 24 Nov 2023 12:15:22 +0100
Subject: [gdal-dev] "RFC 98: Build requirements for GDAL 3.9" available for
 review
Message-ID: <5d76801e-28a5-45b8-a261-967e446f0f92@spatialys.com>

Hi,

Please find "RFC 98: Build requirements for GDAL 3.9" in 
https://github.com/OSGeo/gdal/pull/8802 for review & comments

Summary:

The document updates RFC68 with the new build requirements for GDAL 3.9:

  * C++ >= 17
  * CMake >= 3.16
  * PROJ >= 6.3.1

The minimum version for the following optional dependencies is also updated:

  * Python >= 3.8
  * GEOS >= 3.8
  * Poppler >= 0.86
  * libtiff >= 4.1
  * libcurl >= 7.68
  * libpng >= 1.6.0
  * libsqlite3 >= 3.31
  * libopenjp2 >= 2.3.1
  * libnetcdf >= 4.7 and built with NC4 enabled
  * libhdf5 >= 1.10

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231124/dfb669ef/attachment.htm>

From even.rouault at spatialys.com  Fri Nov 24 04:16:35 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 24 Nov 2023 13:16:35 +0100
Subject: [gdal-dev] GDAL 3.8.1 RC1 is available, and motion to approve it
In-Reply-To: <ce4d4472-162f-48b4-a726-31904095bfe7@xs4all.nl>
References: <1f263a33-81f0-45f0-8b69-3bcfc2024e62@spatialys.com>
 <ce4d4472-162f-48b4-a726-31904095bfe7@xs4all.nl>
Message-ID: <cd508d84-2d96-49ef-984c-ddccb8f13dfd@spatialys.com>

Bas,
> The Python utilities are no longer installed with the .py extension, 
> this broke their use in QGIS when we removed this in the Debian 
> package some time ago. Don't know if that's still the case. Either 
> way, this doesn't seem like an appropriate change for a .1 patch release.

Are you sure about the .py utilities no longer be installed? Because, I 
see both /usr/bin/gdal2tiles and /usr/bin/gdal2tiles.py installed on 
Ubuntu 22.04 (before I reverted the change to add the launcher scripts)

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From variablestarlight at gmail.com  Fri Nov 24 04:22:35 2023
From: variablestarlight at gmail.com (=?UTF-8?Q?Hern=C3=A1n_De_Angelis?=)
Date: Fri, 24 Nov 2023 13:22:35 +0100
Subject: [gdal-dev] GDAL 3.8.1 RC1 is available, and motion to approve it
In-Reply-To: <cd508d84-2d96-49ef-984c-ddccb8f13dfd@spatialys.com>
References: <1f263a33-81f0-45f0-8b69-3bcfc2024e62@spatialys.com>
 <ce4d4472-162f-48b4-a726-31904095bfe7@xs4all.nl>
 <cd508d84-2d96-49ef-984c-ddccb8f13dfd@spatialys.com>
Message-ID: <cb54698b-1ef1-4f3d-9d14-f716447d5234@gmail.com>

May be this is of help: I have seen the case of the .py utilities not 
been compiled and installed a couple of times when I mistakenly had two 
Python versions present and acccessible.

/H.


Den 2023-11-24 kl. 13:16, skrev Even Rouault via gdal-dev:
> Bas,
>> The Python utilities are no longer installed with the .py extension, 
>> this broke their use in QGIS when we removed this in the Debian 
>> package some time ago. Don't know if that's still the case. Either 
>> way, this doesn't seem like an appropriate change for a .1 patch 
>> release.
>
> Are you sure about the .py utilities no longer be installed? Because, 
> I see both /usr/bin/gdal2tiles and /usr/bin/gdal2tiles.py installed on 
> Ubuntu 22.04 (before I reverted the change to add the launcher scripts)
>
> Even
>

From even.rouault at spatialys.com  Fri Nov 24 04:59:42 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 24 Nov 2023 13:59:42 +0100
Subject: [gdal-dev] Problems compiling in Mac
In-Reply-To: <CA6B270F-3CA3-40AE-B26A-63B07A6C3E90@pix4d.com>
References: <CADRrdKsqjyUKU05o+FFD7r49QUYGtX=iD-8T37e9ieezxn1wfg@mail.gmail.com>
 <09e8c28d-fa4e-4c37-81b1-f740b8228a2b@spatialys.com>
 <CADRrdKuVhwRkfEBGKpj9=0AuD8v861FXf+HUxFXd6T7oieqzCw@mail.gmail.com>
 <af71c122-4f32-42d1-aad8-b1fd796897e4@spatialys.com>
 <CADRrdKvMUfLy7D_EZT1M92vZrHRBXnW1Mdns1YmaTbupZwCriQ@mail.gmail.com>
 <CA6B270F-3CA3-40AE-B26A-63B07A6C3E90@pix4d.com>
Message-ID: <771a3ba1-0fb8-4143-9ad2-da4740c27dcb@spatialys.com>

Hi Carsten,

should be fixed per https://github.com/OSGeo/gdal/pull/8810

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231124/fb22c88e/attachment-0001.htm>

From sebastic at xs4all.nl  Fri Nov 24 05:32:38 2023
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Fri, 24 Nov 2023 14:32:38 +0100
Subject: [gdal-dev] GDAL 3.8.1 RC1 is available, and motion to approve it
In-Reply-To: <cd508d84-2d96-49ef-984c-ddccb8f13dfd@spatialys.com>
References: <1f263a33-81f0-45f0-8b69-3bcfc2024e62@spatialys.com>
 <ce4d4472-162f-48b4-a726-31904095bfe7@xs4all.nl>
 <cd508d84-2d96-49ef-984c-ddccb8f13dfd@spatialys.com>
Message-ID: <f49eef59-eca1-44c4-9e8d-657126cd8853@xs4all.nl>

On 11/24/23 13:16, Even Rouault via gdal-dev wrote:
>> The Python utilities are no longer installed with the .py extension, 
>> this broke their use in QGIS when we removed this in the Debian 
>> package some time ago. Don't know if that's still the case. Either 
>> way, this doesn't seem like an appropriate change for a .1 patch release.
> 
> Are you sure about the .py utilities no longer be installed? Because, I 
> see both /usr/bin/gdal2tiles and /usr/bin/gdal2tiles.py installed on 
> Ubuntu 22.04 (before I reverted the change to add the launcher scripts)

Both are installed indeed. I overlooked this when dh_missing failed on 
the executables without extension.

Installing usr/bin/__init__ is still wrong though. Skipping __init__.py 
when creating the console_scripts list may suffice.

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From sebastic at xs4all.nl  Fri Nov 24 05:34:48 2023
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Fri, 24 Nov 2023 14:34:48 +0100
Subject: [gdal-dev] GDAL 3.8.1 RC1 is available, and motion to approve it
In-Reply-To: <cb54698b-1ef1-4f3d-9d14-f716447d5234@gmail.com>
References: <1f263a33-81f0-45f0-8b69-3bcfc2024e62@spatialys.com>
 <ce4d4472-162f-48b4-a726-31904095bfe7@xs4all.nl>
 <cd508d84-2d96-49ef-984c-ddccb8f13dfd@spatialys.com>
 <cb54698b-1ef1-4f3d-9d14-f716447d5234@gmail.com>
Message-ID: <e20557b4-0e51-44fc-b17b-9df8cb2b7da8@xs4all.nl>

On 11/24/23 13:22, Hern?n De Angelis via gdal-dev wrote:
> May be this is of help: I have seen the case of the .py utilities not 
> been compiled and installed a couple of times when I mistakenly had two 
> Python versions present and acccessible.

There is an issue with setuptools silently failing with python3.12:

  https://bugs.debian.org/1055682

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From even.rouault at spatialys.com  Fri Nov 24 07:25:07 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 24 Nov 2023 16:25:07 +0100
Subject: [gdal-dev] GDAL 3.8.1 RC1 is available, and motion to approve it
In-Reply-To: <e20557b4-0e51-44fc-b17b-9df8cb2b7da8@xs4all.nl>
References: <1f263a33-81f0-45f0-8b69-3bcfc2024e62@spatialys.com>
 <ce4d4472-162f-48b4-a726-31904095bfe7@xs4all.nl>
 <cd508d84-2d96-49ef-984c-ddccb8f13dfd@spatialys.com>
 <cb54698b-1ef1-4f3d-9d14-f716447d5234@gmail.com>
 <e20557b4-0e51-44fc-b17b-9df8cb2b7da8@xs4all.nl>
Message-ID: <e4338d62-79ac-4044-862e-308c342744fc@spatialys.com>


Le 24/11/2023 ? 14:34, Sebastiaan Couwenberg via gdal-dev a ?crit?:
> On 11/24/23 13:22, Hern?n De Angelis via gdal-dev wrote:
>> May be this is of help: I have seen the case of the .py utilities not 
>> been compiled and installed a couple of times when I mistakenly had 
>> two Python versions present and acccessible.
>
> There is an issue with setuptools silently failing with python3.12:
>
> ?https://bugs.debian.org/1055682
>
This looks like a Debian specific issue. I can't replicate that locally 
with a manually built python 3.12.0 (cf 
https://gist.github.com/rouault/10096d152198a837ba3200af3cec04a9). It 
also works fine on Fedora Rawhide: cf 
https://github.com/OSGeo/gdal/actions/runs/6981942751/job/19000094023?pr=8812

I've tried in a debian:unstable Docker image, and I indeed reproduce the 
issue. I believe I've fixed that in 
https://github.com/OSGeo/gdal/pull/8812 (as well as not ignoring the 
installation failure). It seemed due to the fact that we previously add 
to define SETUPTOOLS_USE_DISTUTILS=stdlib to make things work, and 
apparently this is no longer needed. I'll let you cherry-pick those 
changes 
(https://github.com/OSGeo/gdal/pull/8812/commits/11cd5251e3166648ab51ca499468d0b144fcbfe9 
and 
https://github.com/OSGeo/gdal/pull/8812/commits/248d7809a46d2fefd7fe320b434182ebe2805ca7), 
as I'll likely will not issue a RC3 for that.

Even

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From schwehr at gmail.com  Fri Nov 24 15:25:01 2023
From: schwehr at gmail.com (Kurt Schwehr)
Date: Fri, 24 Nov 2023 15:25:01 -0800
Subject: [gdal-dev] "RFC 98: Build requirements for GDAL 3.9" available
 for review
In-Reply-To: <5d76801e-28a5-45b8-a261-967e446f0f92@spatialys.com>
References: <5d76801e-28a5-45b8-a261-967e446f0f92@spatialys.com>
Message-ID: <CACmBxyuk+zK26jhPhHrNKKkJN9MS2CQyebnNW+4R-9BH3DB-jg@mail.gmail.com>

Woohoo! I look forward to the cleanups that this will enable.  Thank you
Even for working on this!

I am hoping that the hdf4 will get some similar improvements in 2024. I
haven't looked to see if any of the hdf4 cleanup in 2023 could allow GDAL
cleanup. My guess is that there isn't anything yet as most of the changes
have been internal only.

On Fri, Nov 24, 2023 at 3:15?AM Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> Please find "RFC 98: Build requirements for GDAL 3.9" in
> https://github.com/OSGeo/gdal/pull/8802 for review & comments
>
> Summary:
>
> The document updates RFC68 with the new build requirements for GDAL 3.9:
>
>    - C++ >= 17
>    - CMake >= 3.16
>    - PROJ >= 6.3.1
>
> The minimum version for the following optional dependencies is also
> updated:
>
>    - Python >= 3.8
>    - GEOS >= 3.8
>    - Poppler >= 0.86
>    - libtiff >= 4.1
>    - libcurl >= 7.68
>    - libpng >= 1.6.0
>    - libsqlite3 >= 3.31
>    - libopenjp2 >= 2.3.1
>    - libnetcdf >= 4.7 and built with NC4 enabled
>    - libhdf5 >= 1.10
>
> Even
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231124/8f312824/attachment.htm>

From mdsumner at gmail.com  Fri Nov 24 15:44:55 2023
From: mdsumner at gmail.com (Michael Sumner)
Date: Sat, 25 Nov 2023 10:44:55 +1100
Subject: [gdal-dev] slow translate with OVERVIEW_LEVEL=NONE when no
 overviews exist
Message-ID: <CAAcGz9-e+nAzOMzdZwshO_JmR-XwRUZymYh+a00Bdqc+CKFyQA@mail.gmail.com>

When I translate this GeoTIFF to 10% original size, it's very very slow if
OVERVIEW_LEVEL=NONE is set.

The GeoTIFF has no overviews.

export dsn="/vsicurl/
https://github.com/mdsumner/cog-example/raw/main/cog/sentinel-image.tif"
## takes *forever*
gdal_translate $dsn  out.tif -outsize 219 226 -oo OVERVIEW_LEVEL=NONE

## works fast as expected
gdal_translate $dsn  out.tif -outsize 219 226

I found this in a package that has a global open option setting for
overviews for subsampling with RasterIO(). There we could detect that
overviews are not present, or even just not set it at all ... (better to
use GDALwarp() for general cases IMO).

But, is there a good reason why setting that open option affects translate
for sources with no overviews?

I'm in master at ebac6b74a429fa6eeeb94edd074b6cb60072a35f

Cheers, Mike



-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231125/1e2cfb17/attachment.htm>

From public at postholer.com  Fri Nov 24 16:51:02 2023
From: public at postholer.com (Scott)
Date: Fri, 24 Nov 2023 16:51:02 -0800
Subject: [gdal-dev] slow translate with OVERVIEW_LEVEL=NONE when no
 overviews exist
In-Reply-To: <CAAcGz9-e+nAzOMzdZwshO_JmR-XwRUZymYh+a00Bdqc+CKFyQA@mail.gmail.com>
References: <CAAcGz9-e+nAzOMzdZwshO_JmR-XwRUZymYh+a00Bdqc+CKFyQA@mail.gmail.com>
Message-ID: <1de54031-4dc9-4610-90f5-468066e58953@postholer.com>

Over the network it takes 23 seconds:

time gdal_translate -oo OVERVIEW_LEVEL=NONE -outsize 219 226 
/vsicurl/https://github.com/mdsumner/cog-example/raw/main/cog/sentinel-image.tif 
net.tif
real  0m23.909s
user  0m4.374s
sys   0m1.021s

Saving the file locally and translating it's fractional second:

time gdal_translate -oo OVERVIEW_LEVEL=NONE -outsize 219 226 sent.tif 
local.tif
real  0m0.143s
user  0m0.107s
sys   0m0.036s

My guess is there are numerous reads of the file and across a network, 
depending on server load, etc, it may take muchlonger.

On 11/24/23 15:44, Michael Sumner via gdal-dev wrote:
> When I translate this GeoTIFF to 10% original size, it's very very slow 
> if OVERVIEW_LEVEL=NONE is set.
> 
> The GeoTIFF has no overviews.
> 
> export 
> dsn="/vsicurl/https://github.com/mdsumner/cog-example/raw/main/cog/sentinel-image.tif <https://github.com/mdsumner/cog-example/raw/main/cog/sentinel-image.tif>"
> ## takes *forever*
> gdal_translate $dsn ?out.tif -outsize 219 226 -oo OVERVIEW_LEVEL=NONE
> 
> ## works fast as expected
> gdal_translate $dsn ?out.tif -outsize 219 226
> 
> I found this in a package that has a global open option setting for 
> overviews for subsampling with RasterIO(). There we could detect that 
> overviews are not present, or even just not set it at all ... (better to 
> use GDALwarp() for general cases IMO).
> 
> But, is there a good reason why setting that open option affects 
> translate for sources with no overviews?
> 
> I'm in master at?ebac6b74a429fa6eeeb94edd074b6cb60072a35f
> 
> Cheers, Mike
> 
> 
> 
> -- 
> Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com <mailto:mdsumner at gmail.com>
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Fri Nov 24 16:54:08 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 25 Nov 2023 01:54:08 +0100
Subject: [gdal-dev] slow translate with OVERVIEW_LEVEL=NONE when no
 overviews exist
In-Reply-To: <CAAcGz9-e+nAzOMzdZwshO_JmR-XwRUZymYh+a00Bdqc+CKFyQA@mail.gmail.com>
References: <CAAcGz9-e+nAzOMzdZwshO_JmR-XwRUZymYh+a00Bdqc+CKFyQA@mail.gmail.com>
Message-ID: <bd49b23b-2ec7-4159-adad-eae76a466ecf@spatialys.com>

Hi Michael,

Le 25/11/2023 ? 00:44, Michael Sumner via gdal-dev a ?crit?:
> When I translate this GeoTIFF to 10% original size, it's very very 
> slow if OVERVIEW_LEVEL=NONE is set.

Fixed per https://github.com/OSGeo/gdal/pull/8819

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From contact at opendemdata.info  Sat Nov 25 05:47:37 2023
From: contact at opendemdata.info (OpenDEM)
Date: Sat, 25 Nov 2023 14:47:37 +0100
Subject: [gdal-dev] Creation of MVT vector tiles with fid
Message-ID: <098c3919-47c9-41b7-96fc-f6d0abc49703@opendemdata.info>

Can someone please tell me how to prepare the data for the creation of 
MVT vector tiles with a fid?

ogr2ogr -f MVT outputfolder input.geojson (or PostGIS or ...) -dsco 
MINZOOM=0 -dsco MAXZOOM=6 -dsco COMPRESS=NO

Best regards,

Martin


From even.rouault at spatialys.com  Sat Nov 25 06:14:26 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 25 Nov 2023 15:14:26 +0100
Subject: [gdal-dev] Creation of MVT vector tiles with fid
In-Reply-To: <098c3919-47c9-41b7-96fc-f6d0abc49703@opendemdata.info>
References: <098c3919-47c9-41b7-96fc-f6d0abc49703@opendemdata.info>
Message-ID: <278670fa-bd11-4bb6-bab1-f281ca9ab00a@spatialys.com>

Hi,

add -preserve_fid to your ogr2ogr command line. On reading, you'll see 
it in the mvt_id field (on reading it is not set as a OGR feature id, 
since a given OGR feature can be split among several tiles, leading to 
several features when reading back, hence it is exposed as an attribute 
field to make sure the unicity of the OGR feature id)

Even

Le 25/11/2023 ? 14:47, OpenDEM via gdal-dev a ?crit?:
> Can someone please tell me how to prepare the data for the creation of 
> MVT vector tiles with a fid?
>
> ogr2ogr -f MVT outputfolder input.geojson (or PostGIS or ...) -dsco 
> MINZOOM=0 -dsco MAXZOOM=6 -dsco COMPRESS=NO
>
> Best regards,
>
> Martin
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From contact at opendemdata.info  Sat Nov 25 06:26:17 2023
From: contact at opendemdata.info (OpenDEM)
Date: Sat, 25 Nov 2023 15:26:17 +0100
Subject: [gdal-dev] Creation of MVT vector tiles with fid
In-Reply-To: <278670fa-bd11-4bb6-bab1-f281ca9ab00a@spatialys.com>
References: <098c3919-47c9-41b7-96fc-f6d0abc49703@opendemdata.info>
 <278670fa-bd11-4bb6-bab1-f281ca9ab00a@spatialys.com>
Message-ID: <dc7253eb-d3a5-45f9-8d19-56e769c2a625@opendemdata.info>

Thanks a lot Even!

Best regards,

Martin


Am 25.11.2023 um 15:14 schrieb Even Rouault:
> Hi,
>
> add -preserve_fid to your ogr2ogr command line. On reading, you'll see 
> it in the mvt_id field (on reading it is not set as a OGR feature id, 
> since a given OGR feature can be split among several tiles, leading to 
> several features when reading back, hence it is exposed as an 
> attribute field to make sure the unicity of the OGR feature id)
>
> Even 

From even.rouault at spatialys.com  Sat Nov 25 09:25:15 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 25 Nov 2023 18:25:15 +0100
Subject: [gdal-dev] Is the SOSI Norwegian driver still useful?
In-Reply-To: <1825510b-c1c3-4ba8-bdc2-a806c22138e5@spatialys.com>
References: <XqWme1VRkPwgAbzhRDDVFx_85AQlJD7YFzPYGIFN2fGDOSfEVmvNeAmGIG5f4RQbf8fh-zRfa0KleJE8LK50mRvSRiziRe00Rcv8NOxnHrc=@protonmail.com>
 <trinity-9cc2dc8f-d444-4244-b319-35287c1088f0-1700336013671@3c-app-gmx-bs10>
 <EuFefmM_GYf2SN9nt-Wz3BOSG1ZJkHSF9-ExXiyL6Qf4i5gLB4exOfdOnefaKIX0mEo0te5vohApD8N3BFP8L0SolxNo5V81UI_x7GSAbTg=@protonmail.com>
 <1825510b-c1c3-4ba8-bdc2-a806c22138e5@spatialys.com>
Message-ID: <7a2b23b2-c2a8-4913-871a-6e286a4949c5@spatialys.com>

Hi,

I got feedback from a user 
(https://mastodon.social/@lenas at fosstodon.org/111470467316641321) that 
the driver is apparently still usable for some datasets that can be 
downloaded from the national map catalog 
(https://kartkatalog.geonorge.no<https://kartkatalog.geonorge.no>). So I 
guess we'll have to keep it alive for now. But the Norwegian community 
would be most welcome to step up to maintain it to address its shortcomings.

Even

Le 23/11/2023 ? 18:00, Even Rouault via gdal-dev a ?crit?:
>
> Hi,
>
>>
>> However, I doubt that these organisations use the SOSI driver from 
>> GDAL/OGR to produce these files.
>
> They can't: the driver is read-only
>
> Discussing that topic with other developers today during GDAL 
> maintainer meeting, we could proceed with how we did in the past with 
> drivers we suspected to be no longer used but lacked data points. That 
> is in 3.9 the driver will be still there, but when it detects a SOSI 
> dataset, it will error out with a message indicating to the user that 
> they have to define an environment variable to enable it, and invite 
> them to file an issue on the bug tracker to make a case for keeping 
> the driver, otherwise without feedback, the driver will be fully 
> removed in 3.10
>
> Dan also pointed to that QGIS ticket 
> (https://github.com/qgis/QGIS/issues/50868) where a user reported a 
> crash when trying to use a SOSI file, showing that there are issues in 
> the driver and/or libfyba.
>
> Even
>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231125/33d24240/attachment-0001.htm>

From howard at hobu.co  Sun Nov 26 10:22:01 2023
From: howard at hobu.co (Howard Butler)
Date: Sun, 26 Nov 2023 12:22:01 -0600
Subject: [gdal-dev] GDAL Maintainers Meeting Minutes
Message-ID: <81672AA6-BD62-4D56-90BF-5684C5E8C3CF@hobu.co>

Howard Butler, Even Rouault, Dan Baston, Alessandro Pasotti, Frank Warmerdam, and Javier Jimenez Shaw held the monthly GDAL Maintainers Meeting on 11/23/2023. The following items were discussed and reported upon:

Fundraising update
----------------------------

Howard has begun out thank you / renewal letters to sponsors as their renewal periods are coming due for 2024. If your organization is not currently a member of the GDAL Sponsorship Program, please contact Howard to sign up. Economic uncertainty and corporate turnover are always risks to the program, and if your company has resources to contribute, we would be very happy to have you at whatever sponsorship level your organization can support.

OSGeo Community Sprint
------------------------------------------
Even Rouault, Jukka Rahkonen, and Dan Baston attended the OSGeo Community Sprint next week in Vienna https://wiki.osgeo.org/wiki/OSGeo_Community_Sprint_2023 

Maintenance activities update
------------------------------------------

Status from Dan:

* At the Vienna sprint, Dan focused adding SELECT ALL EXCEPT support fields to OGRSQL 
* Signature change for OGROpen (RFC97 related) which is documented in the migration guide
* const correctness and ownership tightening in OGR
* Dropped older CI configurations

Status from Alessandro:

* Computation of 3D extents for OGR features (#8570)
* PostGIS search path override
* OAPIF initial page size open option 

Status from Even:

* Gathered, built, motioned, and released GDAL 3.7.3 https://github.com/OSGeo/gdal/releases/tag/v3.7.3
* Gathered, built, motioned, and released GDAL 3.8.0 https://github.com/OSGeo/gdal/releases/tag/v3.8.0
* GDAL 3.8.1RC2 is now available to address some regressions present in 3.8.0
* RFC96 ? Deferred C++ Plugin Loading
  * one example showed default plugin loading times improved from ~300ms to ~30ms as a result of implementation
  * converted all drivers that depend on external dependencies
  * about 50 drivers with no dependencies that could be updated
  * spent most of code sprint doing RFC 96 updates

* RFC 97 ? "Sealing" of Definitions
  * Tightening of ownership and const correctness of driver primitives
  * Vote currently underway

* RFC 98 ? Build requirements for GDAL 3.9 brings forward a number of GDAL dependencies to newer versions to enable the project to jettison code, workarounds, and configuration complexity that is no longer necessary.

* Even experimented with using "unity" builds in CMake with PROJ. Some significant code modifications were required in PROJ to take advantage of them, but a 2x compile speed benefit was achieved. While that improves a developer's life significantly, the real win is in CI scenarios. There are downsides of unity builds, however, and they will not be enabled for all CI configurations. Even expects to complete more unity build work in GDAL as time permits.

C++17 and GDAL 3.9 or GDAL 4.0?
-------------------------------------------------

* C++17 is currently enabled in master. An RFC will be written in combination with RFC 98 to describe the consequences, requirements, usages, and API changes that may result of this update. Note that RFC 68 in 2017 was where we updated to C++11 in GDAL 2.3.0 https://gdal.org/development/rfc/rfc68_cplusplus11.html 

* The update to C++ brings up the question of whether or not the next release should be called 3.9 or 4.0. Some items that might possibly go into the next release necessitating a major increment include:

  * Standard C++ types (RFC 95 https://github.com/OSGeo/gdal/blob/master/doc/source/development/rfc/rfc95_standard_int_types.rst)
  * Enabling Python exceptions by default (only took 20 years!)
  * C++ 17 minimum version
  * Removal of GDALRasterIOExtraArg
  * "reasonable" std::unique_ptr usage in GDAL C++ API
  * Make OGRSpatialReference usage be std::shared_ptr instead of homespun reference counts
  * Remove CPL_STDCALL (old windows crap no one needs)
  * Make exportToWkt export WKT2 by default
  * use TILED=YES by default in GTiff driver
  * use COMPRESS=LZW by default in GTiff driver
  * design and unify datasource, open options, and subdatasets
  * See https://github.com/OSGeo/gdal/issues/8440 for more and to continue discussion

The next GDAL Maintainers Meeting is 12/28/2023 at 9:00 EDT. Any PSC members are welcome to join by reaching out to me for an invite.

Howard


From even.rouault at spatialys.com  Sun Nov 26 10:35:19 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 26 Nov 2023 19:35:19 +0100
Subject: [gdal-dev] GDAL Maintainers Meeting Minutes
In-Reply-To: <81672AA6-BD62-4D56-90BF-5684C5E8C3CF@hobu.co>
References: <81672AA6-BD62-4D56-90BF-5684C5E8C3CF@hobu.co>
Message-ID: <f28d7d84-e0ce-4481-946f-8e50146d5a54@spatialys.com>

> * C++17 is currently enabled in master. An RFC will be written in combination with RFC 98 to describe the consequences, requirements, usages, and API changes that may result of this update. Note that RFC 68 in 2017 was where we updated to C++11 in GDAL 2.3.0https://gdal.org/development/rfc/rfc68_cplusplus11.html  

Small clarification: RFC 98 intends to capture all consequences. No 
other RFC related to that for now :-)

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231126/49e44714/attachment.htm>

From j1 at jimenezshaw.com  Sun Nov 26 11:18:33 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Sun, 26 Nov 2023 20:18:33 +0100
Subject: [gdal-dev] GDAL Maintainers Meeting Minutes
In-Reply-To: <81672AA6-BD62-4D56-90BF-5684C5E8C3CF@hobu.co>
References: <81672AA6-BD62-4D56-90BF-5684C5E8C3CF@hobu.co>
Message-ID: <CADRrdKtr9nLMJFBYOsRueRx+eDieRd-ZN_30aamW9kaXW+5EaQ@mail.gmail.com>

>   * use TILED=YES by default in GTiff driver
>
> Was that decided? As some people pointed (including me) a big tiled
geotiff without overviews take ages to load in QGIS.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231126/79f6e9b8/attachment.htm>

From even.rouault at spatialys.com  Sun Nov 26 12:07:14 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 26 Nov 2023 21:07:14 +0100
Subject: [gdal-dev] GDAL Maintainers Meeting Minutes
In-Reply-To: <CADRrdKtr9nLMJFBYOsRueRx+eDieRd-ZN_30aamW9kaXW+5EaQ@mail.gmail.com>
References: <81672AA6-BD62-4D56-90BF-5684C5E8C3CF@hobu.co>
 <CADRrdKtr9nLMJFBYOsRueRx+eDieRd-ZN_30aamW9kaXW+5EaQ@mail.gmail.com>
Message-ID: <9d292b37-18b2-410e-a2df-3e94f34b3f81@spatialys.com>

Javier,
>
>     ? * use TILED=YES by default in GTiff driver
>
> Was that decided? As some people pointed (including me) a big tiled 
> geotiff without overviews take ages to load in QGIS.

No, pretty much all items are still just ideas (well, perhaps besides 
enabling Python exceptions by default, which I can't really imagine 
postponing any further than a 4.0 :-)), some of them not necessarily 
desirable or turning out to not be easily implementable. Most of them 
will only make sense if we have sufficient community buy-in, as they'll 
break things for existing users.

Your concern about big tiled geotiff without overviews is a real one. 
One idea I just got to avoid that that just came to mind (possibly not a 
good one as I'm detailing it, but anyway here's my brain dump :-)) could 
be that on creation of a tiled GeoTIFF larger than let's say 10k x 10k 
pixels, GDAL would automatically create a nearest-neighbour overview of 
let's say at most 512 pixels in width and height and update it whenever 
a tile is updated,. So the overview would likely have to be uncompressed 
(not entirely clear if all GeoTIFF capable software around is able to 
deal with different compression methods for overviews versus full 
resolution image), so its size remains constant when tiles are updated. 
And it would have to be discarded when explicit ones are created. And 
the logic of selection of overviews would also have to be modified to 
select that overview in a more aggressive way than the current logic 
does (cf 
https://gdal.org/api/gdaldataset_cpp.html#_CPPv4N11GDALDataset8RasterIOE10GDALRWFlagiiiiPvii12GDALDataTypeiPi8GSpacing8GSpacing8GSpacingP20GDALRasterIOExtraArg). 
Perhaps an open option that a viewer such as QGIS could set? So quite a 
bunch of extra complications in the GeoTIFF driver which is already 
super complicated.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231126/4ace50b5/attachment.htm>

From howard at hobu.co  Sun Nov 26 14:24:23 2023
From: howard at hobu.co (Howard Butler)
Date: Sun, 26 Nov 2023 16:24:23 -0600
Subject: [gdal-dev] GDAL Maintainers Meeting Minutes
In-Reply-To: <9d292b37-18b2-410e-a2df-3e94f34b3f81@spatialys.com>
References: <81672AA6-BD62-4D56-90BF-5684C5E8C3CF@hobu.co>
 <CADRrdKtr9nLMJFBYOsRueRx+eDieRd-ZN_30aamW9kaXW+5EaQ@mail.gmail.com>
 <9d292b37-18b2-410e-a2df-3e94f34b3f81@spatialys.com>
Message-ID: <A1DDF38A-760B-4C24-BB96-40EAC517CED9@hobu.co>



> On Nov 26, 2023, at 2:07?PM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Javier,
>> 
>>   * use TILED=YES by default in GTiff driver
>> 
>> Was that decided? As some people pointed (including me) a big tiled geotiff without overviews take ages to load in QGIS.
> No, pretty much all items are still just ideas (well, perhaps besides enabling Python exceptions by default, which I can't really imagine postponing any further than a 4.0 :-)), some of them not necessarily desirable or turning out to not be easily implementable. Most of them will only make sense if we have sufficient community buy-in, as they'll break things for existing users.

I guess should have put even more qualifying adverbs there I guess :) The big question is should the next major release be 3.9 or 4.0, and if it is to be 4.0, what behavior and API changes are tolerable and worth the trouble? That list of stuff in 8440 is where to have the discussion.

> Small clarification: RFC 98 intends to capture all consequences. No other RFC related to that for now :-)


Correct. 

When Python exceptions are always enabled by default in GDAL 4.0, one of my life goals will be satisfied.

Howard

From raivo at r-systems.ee  Mon Nov 27 01:40:30 2023
From: raivo at r-systems.ee (Raivo Rebane)
Date: Mon, 27 Nov 2023 11:40:30 +0200
Subject: [gdal-dev] GDAL Java binding problem
Message-ID: <3fc68a1e-853b-49ab-8435-90becd1515af@r-systems.ee>

Hi,

I want to use GDAL for GML parsing with Java.

I made an Eclipse project and got dependency - gdal-3.8.0.

My code compiles fine, but in debuging at line - gdal.AllRegister();

I got error :

Native library load failed.

java.lang.UnsatisfiedLinkError: no gdalalljni in java.library.path: 
[/home/Raivo/GML/lib]

Exception in thread "main" java.lang.UnsatisfiedLinkError: 'void 
org.gdal.gdal.gdalJNI.AllRegister()'

at org.gdal.gdal.gdalJNI.AllRegister(Native Method)

at org.gdal.gdal.gdal.AllRegister(gdal.java:712)

at My.Parser.Parser.main(Parser.java:16)

an in realility gdalalljni doesnt exist in my computer.

So I cloned GDAL sources from git, version 3.9.0, but I didn't find docs 
how to buil Java binding jar file

Can anybody hel my ?

Regards,

Raivo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231127/3c8523be/attachment.htm>

From even.rouault at spatialys.com  Mon Nov 27 05:17:54 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 27 Nov 2023 14:17:54 +0100
Subject: [gdal-dev] GDAL Java binding problem
In-Reply-To: <3fc68a1e-853b-49ab-8435-90becd1515af@r-systems.ee>
References: <3fc68a1e-853b-49ab-8435-90becd1515af@r-systems.ee>
Message-ID: <bc879a5f-a1f9-4ac2-8f53-780a108700f9@spatialys.com>


Le 27/11/2023 ? 10:40, Raivo Rebane via gdal-dev a ?crit?:
>
> Hi,
>
> I want to use GDAL for GML parsing with Java.
>
> I made an Eclipse project and got dependency - gdal-3.8.0.
>
> My code compiles fine, but in debuging at line - gdal.AllRegister();
>
> I got error :
>
> Native library load failed.
>
> java.lang.UnsatisfiedLinkError: no gdalalljni in java.library.path: 
> [/home/Raivo/GML/lib]
>
> Exception in thread "main" java.lang.UnsatisfiedLinkError: 'void 
> org.gdal.gdal.gdalJNI.AllRegister()'
>
> at org.gdal.gdal.gdalJNI.AllRegister(Native Method)
>
> at org.gdal.gdal.gdal.AllRegister(gdal.java:712)
>
> at My.Parser.Parser.main(Parser.java:16)
>
> an in realility gdalalljni doesnt exist in my computer.
>
> So I cloned GDAL sources from git, version 3.9.0, but I didn't find 
> docs how to buil Java binding jar file
>
Cf 
https://gdal.org/development/building_from_source.html#java-bindings-options

I've just submitted in https://github.com/OSGeo/gdal/pull/8836 more 
detailed instructions:

"""


How to use the bindings
-----------------------

The result of the build of the Java bindings will be both a :file:`gdal.jar`
and a companion :file:`libgdalalljni.so` / :file:`libgdalalljni.dylib` /
:file:`gdalalljni.dll` native library. To limit potential compatibility 
problems,
you should ensure that gdal.jar and gdalalljni come from the same GDAL 
sources.

The native gdalalljni library, as well as the core libgdal library (and its
dependencies) should be accessible through the mechanism of the operating
system to locate shared libraries.
Typically on Linux, this means that the path to those libraries should 
be set
in the ``LD_LIBRARY_PATH`` environment variable (or in 
:file:`/etc/ld.so.conf`).
On MacOSX, it should be in the ``DYLD_LIBRARY_PATH`` environment variable.
And on Windows, in the ``PATH`` environment variable.

For example, to test on Linux that the bindings are working, you can lanch,
from the build directory:

::

 ??? export LD_LIBRARY_PATH=$PWD:$PWD/swig/java:$LD_LIBRARY_PATH
 ??? java -classpath $PWD/swig/java/gdal.jar:$PWD/swig/java/build/apps 
gdalinfo

On Windows:

::

 ??? set PATH=%CD%;%CD%\swig\java;%PATH%
 ??? java -classpath %CD%\swig\java\gdal.jar;%CD%\swig\java\build\apps 
gdalinfo

"""

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231127/cae722ad/attachment.htm>

From matteo.ghetta at gmail.com  Mon Nov 27 07:04:20 2023
From: matteo.ghetta at gmail.com (Matteo Ghetta)
Date: Mon, 27 Nov 2023 16:04:20 +0100
Subject: [gdal-dev] COPY statement failed with PG_USE_COPY=YES
In-Reply-To: <41de68dc-8847-416a-9711-11ed83af3a43@spatialys.com>
References: <a4445148-c3f2-4a21-b484-7bc93a734d55@gmail.com>
 <41de68dc-8847-416a-9711-11ed83af3a43@spatialys.com>
Message-ID: <812ab56a-f3a0-42dc-afb5-0d557ec43298@gmail.com>

Hi Even,

sorry for the delay. In attach you can find a shapefile and here the 
command I'm using:

ogr2ogr -progress --config PG_USE_COPY YES --config SHAPE_ENCODING 
LATIN1 -f PostgreSQL PG:"host=XX port=XX dbname=XX user=XX password=XX 
active_schema=gis" -lco DIM=4 /path/to/FOG_NODI_PT_GIS.shp 
FOG_NODI_PT_GIS -lco LAUNDER=NO -overwrite -nlt POINT -lco 
GEOMETRY_NAME=geom -lco FID=id -nln gis."FOG_NODI_PT_GIS" -s_srs 
EPSG:23032 -t_srs EPSG:4326

Cheers and thanks!

Matteo

On 11/21/23 12:24, Even Rouault wrote:
> Matteo,
> 
>  From a quick test, I can't reproduce. Please provide a minimum 
> shapefile that reproduces the issue
> 
> $ cat test.csv
> id,dt
> 1,"0000/00/00"
> $ cat test.csvt
> Integer,Date
> $ ogr2ogr date_null.shp test.csv
> Warning 1: Invalid value type found in record 1 for field dt. This 
> warning will no longer be emitted
> $ ogr2ogr pg:dbname=autotest date_null.dbf --config PG_USE_COPY YES 
> -overwrite
> $ ogrinfo pg:dbname=autotest date_null -al
> INFO: Open of `pg:dbname=autotest'
>  ????? using driver `PostgreSQL' successful.
> 
> Layer name: date_null
> Geometry: None
> Feature Count: 1
> Layer SRS WKT:
> (unknown)
> FID Column = ogc_fid
> id: Integer (9.0)
> dt: Date
> OGRFeature(date_null):1
>  ? id (Integer) = 1
>  ? dt (Date) = (null)
> 
> Even
> 
> Le 21/11/2023 ? 09:24, Matteo Ghetta via gdal-dev a ?crit?:
>> Hi all,
>>
>> I'm trying to import (many) shapefiles into a PG database. I'm facing 
>> the following error, but only when PG_USE_COPY is set to YES:
>>
>> ERROR 1: COPY statement failed.
>> ERROR:? date/time field value out of range: "0000/00/00"
>> CONTEXT:? COPY TABLE, line 12682, column DATA_INI: "0000/00/00"
>>
>> The value in the source shapefile is NULL for some rows. With 
>> PG_USE_COPY NO the import works perfectly.
>>
>> I've found this old ticket, that seems to describe this exact issue, 
>> and is marked as resolved:
>>
>> https://trac.osgeo.org/gdal/ticket/4265
>>
>> Tested with:
>>
>> * GDAL 3.2.2, released 2021/03/05
>> * GDAL 3.7.3, released 2023/10/30
>>
>> Do you have any ideas about what is causing this?
>>
>> Cheers and thanks
>>
>> Matteo
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: FOG_NODI_PT_GIS.zip
Type: application/zip
Size: 10237 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231127/678576b0/attachment-0001.zip>

From even.rouault at spatialys.com  Mon Nov 27 07:37:31 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 27 Nov 2023 16:37:31 +0100
Subject: [gdal-dev] COPY statement failed with PG_USE_COPY=YES
In-Reply-To: <812ab56a-f3a0-42dc-afb5-0d557ec43298@gmail.com>
References: <a4445148-c3f2-4a21-b484-7bc93a734d55@gmail.com>
 <41de68dc-8847-416a-9711-11ed83af3a43@spatialys.com>
 <812ab56a-f3a0-42dc-afb5-0d557ec43298@gmail.com>
Message-ID: <7f748a8c-c4e4-4f29-b04d-df404551c39c@spatialys.com>

Hi Matteo,

I've pushed a fix in https://github.com/OSGeo/gdal/pull/8840 for that. 
The null dates were formatted in a unusual way. I assume that file was 
produced for another dataset where null dates were set to "0000/00/00" 
rather than an appropriate null value, which ended in a non-typical null 
date being written.

Even

Le 27/11/2023 ? 16:04, Matteo Ghetta a ?crit?:
> Hi Even,
>
> sorry for the delay. In attach you can find a shapefile and here the 
> command I'm using:
>
> ogr2ogr -progress --config PG_USE_COPY YES --config SHAPE_ENCODING 
> LATIN1 -f PostgreSQL PG:"host=XX port=XX dbname=XX user=XX password=XX 
> active_schema=gis" -lco DIM=4 /path/to/FOG_NODI_PT_GIS.shp 
> FOG_NODI_PT_GIS -lco LAUNDER=NO -overwrite -nlt POINT -lco 
> GEOMETRY_NAME=geom -lco FID=id -nln gis."FOG_NODI_PT_GIS" -s_srs 
> EPSG:23032 -t_srs EPSG:4326
>
> Cheers and thanks!
>
> Matteo
>
> On 11/21/23 12:24, Even Rouault wrote:
>> Matteo,
>>
>> ?From a quick test, I can't reproduce. Please provide a minimum 
>> shapefile that reproduces the issue
>>
>> $ cat test.csv
>> id,dt
>> 1,"0000/00/00"
>> $ cat test.csvt
>> Integer,Date
>> $ ogr2ogr date_null.shp test.csv
>> Warning 1: Invalid value type found in record 1 for field dt. This 
>> warning will no longer be emitted
>> $ ogr2ogr pg:dbname=autotest date_null.dbf --config PG_USE_COPY YES 
>> -overwrite
>> $ ogrinfo pg:dbname=autotest date_null -al
>> INFO: Open of `pg:dbname=autotest'
>> ?????? using driver `PostgreSQL' successful.
>>
>> Layer name: date_null
>> Geometry: None
>> Feature Count: 1
>> Layer SRS WKT:
>> (unknown)
>> FID Column = ogc_fid
>> id: Integer (9.0)
>> dt: Date
>> OGRFeature(date_null):1
>> ?? id (Integer) = 1
>> ?? dt (Date) = (null)
>>
>> Even
>>
>> Le 21/11/2023 ? 09:24, Matteo Ghetta via gdal-dev a ?crit?:
>>> Hi all,
>>>
>>> I'm trying to import (many) shapefiles into a PG database. I'm 
>>> facing the following error, but only when PG_USE_COPY is set to YES:
>>>
>>> ERROR 1: COPY statement failed.
>>> ERROR:? date/time field value out of range: "0000/00/00"
>>> CONTEXT:? COPY TABLE, line 12682, column DATA_INI: "0000/00/00"
>>>
>>> The value in the source shapefile is NULL for some rows. With 
>>> PG_USE_COPY NO the import works perfectly.
>>>
>>> I've found this old ticket, that seems to describe this exact issue, 
>>> and is marked as resolved:
>>>
>>> https://trac.osgeo.org/gdal/ticket/4265
>>>
>>> Tested with:
>>>
>>> * GDAL 3.2.2, released 2021/03/05
>>> * GDAL 3.7.3, released 2023/10/30
>>>
>>> Do you have any ideas about what is causing this?
>>>
>>> Cheers and thanks
>>>
>>> Matteo
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Mon Nov 27 07:42:32 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 27 Nov 2023 16:42:32 +0100
Subject: [gdal-dev] Motion: adopt RFC 97: OGRFeatureDefn,
 OGRFieldDefn and OGRGeomFieldDefn "sealing"
In-Reply-To: <c16f8940-92e1-4ac8-8a11-c44a04672220@spatialys.com>
References: <c16f8940-92e1-4ac8-8a11-c44a04672220@spatialys.com>
Message-ID: <ecc3dfb0-9d8a-46d3-b279-58a9ca9a101d@spatialys.com>

Hi,

I declare this motion passed with +1 from PSC members JukkaR, JavierJS 
and me.

(and friendly remainder that the GDAL 3.8.1RC2 motion is waiting for 
more votes)

Even

Le 22/11/2023 ? 13:05, Even Rouault via gdal-dev a ?crit?:
> Hi,
>
> Motion: adopt RFC 97: OGRFeatureDefn, OGRFieldDefn and 
> OGRGeomFieldDefn "sealing"
>
> https://github.com/OSGeo/gdal/pull/8734
>
> Pre-rendered view:
>
> https://github.com/rouault/gdal/blob/rfc97_text/doc/source/development/rfc/rfc97_feature_and_fielddefn_sealing.rst 
>
>
> Starting with my +1,
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jukka.rahkonen at maanmittauslaitos.fi  Mon Nov 27 08:30:27 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Mon, 27 Nov 2023 16:30:27 +0000
Subject: [gdal-dev] GDAL 3.8.1 RC2 is available (was Re: GDAL 3.8.1 RC1
 is available, and motion to approve it)
In-Reply-To: <bad8915d-7bf9-4759-a613-a926e3433471@spatialys.com>
References: <1f263a33-81f0-45f0-8b69-3bcfc2024e62@spatialys.com>
 <ce4d4472-162f-48b4-a726-31904095bfe7@xs4all.nl>
 <bad8915d-7bf9-4759-a613-a926e3433471@spatialys.com>
Message-ID: <AM0PR09MB3219943E5B38879D26B37F6BFDBDA@AM0PR09MB3219.eurprd09.prod.outlook.com>

+1

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault via gdal-dev
L?hetetty: perjantai 24. marraskuuta 2023 13.06
Vastaanottaja: Sebastiaan Couwenberg <sebastic at xs4all.nl>; gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] GDAL 3.8.1 RC2 is available (was Re: GDAL 3.8.1 RC1 is available, and motion to approve it)

Hi,

OK, I've reverted that change. I'll guess someone will have to figure out how to have both .py scripts and .exe/.sh launchers at the same time...

Pick up an archive among the following ones (by ascending size):
...

Withdrawing previous motion and:

Motion: adopt 3.8.1 RC2 as final 3.8.1 release

Starting with my +1,

Even

Le 24/11/2023 ? 06:34, Sebastiaan Couwenberg via gdal-dev a ?crit :
> On 11/23/23 22:56, Even Rouault via gdal-dev wrote:
>>  From a packaging point of view, the following change might have
>> impacts on build recipes:
>
> The Python utilities are no longer installed with the .py extension,
> this broke their use in QGIS when we removed this in the Debian
> package some time ago. Don't know if that's still the case. Either
> way, this doesn't seem like an appropriate change for a .1 patch release.
>
> usr/bin/__init__ is now also installed which not correct.
>
> Kind Regards,
>
> Bas
>
--
http://www.spatialys.com/
My software is free, but my time generally not.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From j1 at jimenezshaw.com  Mon Nov 27 08:45:56 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 27 Nov 2023 17:45:56 +0100
Subject: [gdal-dev] GDAL 3.8.1 RC2 is available (was Re: GDAL 3.8.1 RC1
 is available, and motion to approve it)
In-Reply-To: <AM0PR09MB3219943E5B38879D26B37F6BFDBDA@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <1f263a33-81f0-45f0-8b69-3bcfc2024e62@spatialys.com>
 <ce4d4472-162f-48b4-a726-31904095bfe7@xs4all.nl>
 <bad8915d-7bf9-4759-a613-a926e3433471@spatialys.com>
 <AM0PR09MB3219943E5B38879D26B37F6BFDBDA@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <CADRrdKs=88gW3vAmW0S2iheraqcCdReoLi_hcsvcikuj9+Y_5A@mail.gmail.com>

+1 Javier

On Mon, 27 Nov 2023 at 17:30, Rahkonen Jukka via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> +1
>
> -Jukka Rahkonen-
>
> -----Alkuper?inen viesti-----
> L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even
> Rouault via gdal-dev
> L?hetetty: perjantai 24. marraskuuta 2023 13.06
> Vastaanottaja: Sebastiaan Couwenberg <sebastic at xs4all.nl>;
> gdal-dev at lists.osgeo.org
> Aihe: [gdal-dev] GDAL 3.8.1 RC2 is available (was Re: GDAL 3.8.1 RC1 is
> available, and motion to approve it)
>
> Hi,
>
> OK, I've reverted that change. I'll guess someone will have to figure out
> how to have both .py scripts and .exe/.sh launchers at the same time...
>
> Pick up an archive among the following ones (by ascending size):
> ...
>
> Withdrawing previous motion and:
>
> Motion: adopt 3.8.1 RC2 as final 3.8.1 release
>
> Starting with my +1,
>
> Even
>
> Le 24/11/2023 ? 06:34, Sebastiaan Couwenberg via gdal-dev a ?crit :
> > On 11/23/23 22:56, Even Rouault via gdal-dev wrote:
> >>  From a packaging point of view, the following change might have
> >> impacts on build recipes:
> >
> > The Python utilities are no longer installed with the .py extension,
> > this broke their use in QGIS when we removed this in the Debian
> > package some time ago. Don't know if that's still the case. Either
> > way, this doesn't seem like an appropriate change for a .1 patch release.
> >
> > usr/bin/__init__ is now also installed which not correct.
> >
> > Kind Regards,
> >
> > Bas
> >
> --
> http://www.spatialys.com/
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231127/7bc0d826/attachment.htm>

From howard at hobu.co  Mon Nov 27 08:58:16 2023
From: howard at hobu.co (Howard Butler)
Date: Mon, 27 Nov 2023 10:58:16 -0600
Subject: [gdal-dev] GDAL 3.8.1 RC2 is available (was Re: GDAL 3.8.1 RC1
 is available, and motion to approve it)
In-Reply-To: <CADRrdKs=88gW3vAmW0S2iheraqcCdReoLi_hcsvcikuj9+Y_5A@mail.gmail.com>
References: <1f263a33-81f0-45f0-8b69-3bcfc2024e62@spatialys.com>
 <ce4d4472-162f-48b4-a726-31904095bfe7@xs4all.nl>
 <bad8915d-7bf9-4759-a613-a926e3433471@spatialys.com>
 <AM0PR09MB3219943E5B38879D26B37F6BFDBDA@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CADRrdKs=88gW3vAmW0S2iheraqcCdReoLi_hcsvcikuj9+Y_5A@mail.gmail.com>
Message-ID: <9B4C33C4-724B-4CD6-B181-441340AFDD96@hobu.co>

+1 Howard

> On Nov 27, 2023, at 10:45?AM, Javier Jimenez Shaw via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
> 
> +1 Javier
> 
> On Mon, 27 Nov 2023 at 17:30, Rahkonen Jukka via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
> +1
> 
> -Jukka Rahkonen-
> 
> -----Alkuper?inen viesti-----
> L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault via gdal-dev
> L?hetetty: perjantai 24. marraskuuta 2023 13.06
> Vastaanottaja: Sebastiaan Couwenberg <sebastic at xs4all.nl>; gdal-dev at lists.osgeo.org
> Aihe: [gdal-dev] GDAL 3.8.1 RC2 is available (was Re: GDAL 3.8.1 RC1 is available, and motion to approve it)
> 
> Hi,
> 
> OK, I've reverted that change. I'll guess someone will have to figure out how to have both .py scripts and .exe/.sh launchers at the same time...
> 
> Pick up an archive among the following ones (by ascending size):
> ...
> 
> Withdrawing previous motion and:
> 
> Motion: adopt 3.8.1 RC2 as final 3.8.1 release
> 
> Starting with my +1,
> 
> Even
> 
> Le 24/11/2023 ? 06:34, Sebastiaan Couwenberg via gdal-dev a ?crit :
> > On 11/23/23 22:56, Even Rouault via gdal-dev wrote:
> >>  From a packaging point of view, the following change might have
> >> impacts on build recipes:
> >
> > The Python utilities are no longer installed with the .py extension,
> > this broke their use in QGIS when we removed this in the Debian
> > package some time ago. Don't know if that's still the case. Either
> > way, this doesn't seem like an appropriate change for a .1 patch release.
> >
> > usr/bin/__init__ is now also installed which not correct.
> >
> > Kind Regards,
> >
> > Bas
> >
> --
> http://www.spatialys.com/
> My software is free, but my time generally not.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From matteo.ghetta at gmail.com  Mon Nov 27 22:25:04 2023
From: matteo.ghetta at gmail.com (Matteo Ghetta)
Date: Tue, 28 Nov 2023 07:25:04 +0100
Subject: [gdal-dev] COPY statement failed with PG_USE_COPY=YES
In-Reply-To: <7f748a8c-c4e4-4f29-b04d-df404551c39c@spatialys.com>
References: <a4445148-c3f2-4a21-b484-7bc93a734d55@gmail.com>
 <41de68dc-8847-416a-9711-11ed83af3a43@spatialys.com>
 <812ab56a-f3a0-42dc-afb5-0d557ec43298@gmail.com>
 <7f748a8c-c4e4-4f29-b04d-df404551c39c@spatialys.com>
Message-ID: <566bf793-1bd8-4ed6-886d-fcda704443c1@gmail.com>

Hi Even,

many thanks for the fix!

Cheers

Matteo

On 11/27/23 16:37, Even Rouault wrote:
> Hi Matteo,
> 
> I've pushed a fix in https://github.com/OSGeo/gdal/pull/8840 for that. 
> The null dates were formatted in a unusual way. I assume that file was 
> produced for another dataset where null dates were set to "0000/00/00" 
> rather than an appropriate null value, which ended in a non-typical null 
> date being written.
> 
> Even
> 
> Le 27/11/2023 ? 16:04, Matteo Ghetta a ?crit?:
>> Hi Even,
>>
>> sorry for the delay. In attach you can find a shapefile and here the 
>> command I'm using:
>>
>> ogr2ogr -progress --config PG_USE_COPY YES --config SHAPE_ENCODING 
>> LATIN1 -f PostgreSQL PG:"host=XX port=XX dbname=XX user=XX password=XX 
>> active_schema=gis" -lco DIM=4 /path/to/FOG_NODI_PT_GIS.shp 
>> FOG_NODI_PT_GIS -lco LAUNDER=NO -overwrite -nlt POINT -lco 
>> GEOMETRY_NAME=geom -lco FID=id -nln gis."FOG_NODI_PT_GIS" -s_srs 
>> EPSG:23032 -t_srs EPSG:4326
>>
>> Cheers and thanks!
>>
>> Matteo
>>
>> On 11/21/23 12:24, Even Rouault wrote:
>>> Matteo,
>>>
>>> ?From a quick test, I can't reproduce. Please provide a minimum 
>>> shapefile that reproduces the issue
>>>
>>> $ cat test.csv
>>> id,dt
>>> 1,"0000/00/00"
>>> $ cat test.csvt
>>> Integer,Date
>>> $ ogr2ogr date_null.shp test.csv
>>> Warning 1: Invalid value type found in record 1 for field dt. This 
>>> warning will no longer be emitted
>>> $ ogr2ogr pg:dbname=autotest date_null.dbf --config PG_USE_COPY YES 
>>> -overwrite
>>> $ ogrinfo pg:dbname=autotest date_null -al
>>> INFO: Open of `pg:dbname=autotest'
>>> ?????? using driver `PostgreSQL' successful.
>>>
>>> Layer name: date_null
>>> Geometry: None
>>> Feature Count: 1
>>> Layer SRS WKT:
>>> (unknown)
>>> FID Column = ogc_fid
>>> id: Integer (9.0)
>>> dt: Date
>>> OGRFeature(date_null):1
>>> ?? id (Integer) = 1
>>> ?? dt (Date) = (null)
>>>
>>> Even
>>>
>>> Le 21/11/2023 ? 09:24, Matteo Ghetta via gdal-dev a ?crit?:
>>>> Hi all,
>>>>
>>>> I'm trying to import (many) shapefiles into a PG database. I'm 
>>>> facing the following error, but only when PG_USE_COPY is set to YES:
>>>>
>>>> ERROR 1: COPY statement failed.
>>>> ERROR:? date/time field value out of range: "0000/00/00"
>>>> CONTEXT:? COPY TABLE, line 12682, column DATA_INI: "0000/00/00"
>>>>
>>>> The value in the source shapefile is NULL for some rows. With 
>>>> PG_USE_COPY NO the import works perfectly.
>>>>
>>>> I've found this old ticket, that seems to describe this exact issue, 
>>>> and is marked as resolved:
>>>>
>>>> https://trac.osgeo.org/gdal/ticket/4265
>>>>
>>>> Tested with:
>>>>
>>>> * GDAL 3.2.2, released 2021/03/05
>>>> * GDAL 3.7.3, released 2023/10/30
>>>>
>>>> Do you have any ideas about what is causing this?
>>>>
>>>> Cheers and thanks
>>>>
>>>> Matteo
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>

From even.rouault at spatialys.com  Tue Nov 28 07:32:36 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 28 Nov 2023 16:32:36 +0100
Subject: [gdal-dev] GDAL 3.8.1RC3 is available & motion to approve it
Message-ID: <47e4ff64-8fd2-49b5-ad38-7eb875875acd@spatialys.com>

Hi,

well, another annoying 3.8.0 regression related to ogr2ogr GPKG -> 
Shapefile when field names are longer than 10 characters (ah 
Shapefile!!!) popped up today, so here's a RC3 (crossing fingers it's 
the good one):

 ? https://download.osgeo.org/gdal/3.8.1/gdal-3.8.1rc3.tar.xz
 ? https://download.osgeo.org/gdal/3.8.1/gdal-3.8.1rc3.tar.gz
 ? https://download.osgeo.org/gdal/3.8.1/gdal381rc3.zip

A snapshot of the gdalautotest suite is also available:

https://download.osgeo.org/gdal/3.8.1/gdalautotest-3.8.1rc3.tar.gz
 ? https://download.osgeo.org/gdal/3.8.1/gdalautotest-3.8.1rc3.zip

The changes since RC2 are:

* CMake: make GDAL_USE_LIBKML and GDAL_USE_OPENJPEG honor 
GDAL_USE_EXTERNAL_LIBS
* Detect failure in installation of the Python bindings
* Fix installation issue with Python 3.12 on Debian
* GDALOverviewDataset::IRasterIO(): use parent dataset when possible for 
more
 ? efficiency
* gdal_footprint: fix wrong taking into account of alpha band (#8834)
* gdal_footprint: fix taking into account of individual bands that have 
nodata
* COG: for JPEG compression, convert single band+alpha as single band 
JPEG + 1-bit mask band
* GTIFF SRS reader: include VertCRS name from EPSG in CompoundCRS name 
if there's no citation geokey
* ogr2ogr: fix GPKG -> Shapefile when field names are truncated (#8849, 
3.8.0 regression)
* CSV writer: do not quote integer fields by default (only if 
STRING_QUOTING=ALWAYS is specified)
* GPX: make detection of extensions element more robust (#8827)
* Shapefile: recognize '????? 0' as a null date, fix writing an invalid 
"0000/00/00" date
* Python bindings: add a combineBands option to gdal.Footprint()


Withdrawing previous motion and:

==> Motion: adopt 3.8.1 RC3 as final 3.8.1 release

Starting with my +1,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jukka.rahkonen at maanmittauslaitos.fi  Tue Nov 28 07:57:57 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Tue, 28 Nov 2023 15:57:57 +0000
Subject: [gdal-dev] GDAL 3.8.1RC3 is available & motion to approve it
In-Reply-To: <47e4ff64-8fd2-49b5-ad38-7eb875875acd@spatialys.com>
References: <47e4ff64-8fd2-49b5-ad38-7eb875875acd@spatialys.com>
Message-ID: <AM0PR09MB321988832B22FCF1D0B52195FDBCA@AM0PR09MB3219.eurprd09.prod.outlook.com>

+1

-Jukka-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault via gdal-dev
L?hetetty: tiistai 28. marraskuuta 2023 17.33
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] GDAL 3.8.1RC3 is available & motion to approve it

Hi,

well, another annoying 3.8.0 regression related to ogr2ogr GPKG -> Shapefile when field names are longer than 10 characters (ah
Shapefile!!!) popped up today, so here's a RC3 (crossing fingers it's the good one):
...
A snapshot of the gdalautotest suite is also available:
...
The changes since RC2 are:

* CMake: make GDAL_USE_LIBKML and GDAL_USE_OPENJPEG honor GDAL_USE_EXTERNAL_LIBS
* Detect failure in installation of the Python bindings
* Fix installation issue with Python 3.12 on Debian
* GDALOverviewDataset::IRasterIO(): use parent dataset when possible for more
 ? efficiency
* gdal_footprint: fix wrong taking into account of alpha band (#8834)
* gdal_footprint: fix taking into account of individual bands that have nodata
* COG: for JPEG compression, convert single band+alpha as single band JPEG + 1-bit mask band
* GTIFF SRS reader: include VertCRS name from EPSG in CompoundCRS name if there's no citation geokey
* ogr2ogr: fix GPKG -> Shapefile when field names are truncated (#8849,
3.8.0 regression)
* CSV writer: do not quote integer fields by default (only if STRING_QUOTING=ALWAYS is specified)
* GPX: make detection of extensions element more robust (#8827)
* Shapefile: recognize '????? 0' as a null date, fix writing an invalid "0000/00/00" date
* Python bindings: add a combineBands option to gdal.Footprint()


Withdrawing previous motion and:

==> Motion: adopt 3.8.1 RC3 as final 3.8.1 release

Starting with my +1,

Even

--
My software is free, but my time generally not.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org

From howard at hobu.co  Tue Nov 28 08:29:35 2023
From: howard at hobu.co (Howard Butler)
Date: Tue, 28 Nov 2023 10:29:35 -0600
Subject: [gdal-dev] GDAL 3.8.1RC3 is available & motion to approve it
In-Reply-To: <AM0PR09MB321988832B22FCF1D0B52195FDBCA@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <47e4ff64-8fd2-49b5-ad38-7eb875875acd@spatialys.com>
 <AM0PR09MB321988832B22FCF1D0B52195FDBCA@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <5288A4CC-ED73-4CEC-98A9-9DBA8AD34DBC@hobu.co>

+1 Howard

> On Nov 28, 2023, at 9:57?AM, Rahkonen Jukka via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
> 
> +1
> 
> -Jukka-
> 
> -----Alkuper?inen viesti-----
> L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault via gdal-dev
> L?hetetty: tiistai 28. marraskuuta 2023 17.33
> Vastaanottaja: gdal-dev at lists.osgeo.org
> Aihe: [gdal-dev] GDAL 3.8.1RC3 is available & motion to approve it
> 
> Hi,
> 
> well, another annoying 3.8.0 regression related to ogr2ogr GPKG -> Shapefile when field names are longer than 10 characters (ah
> Shapefile!!!) popped up today, so here's a RC3 (crossing fingers it's the good one):
> ...
> A snapshot of the gdalautotest suite is also available:
> ...
> The changes since RC2 are:
> 
> * CMake: make GDAL_USE_LIBKML and GDAL_USE_OPENJPEG honor GDAL_USE_EXTERNAL_LIBS
> * Detect failure in installation of the Python bindings
> * Fix installation issue with Python 3.12 on Debian
> * GDALOverviewDataset::IRasterIO(): use parent dataset when possible for more
>   efficiency
> * gdal_footprint: fix wrong taking into account of alpha band (#8834)
> * gdal_footprint: fix taking into account of individual bands that have nodata
> * COG: for JPEG compression, convert single band+alpha as single band JPEG + 1-bit mask band
> * GTIFF SRS reader: include VertCRS name from EPSG in CompoundCRS name if there's no citation geokey
> * ogr2ogr: fix GPKG -> Shapefile when field names are truncated (#8849,
> 3.8.0 regression)
> * CSV writer: do not quote integer fields by default (only if STRING_QUOTING=ALWAYS is specified)
> * GPX: make detection of extensions element more robust (#8827)
> * Shapefile: recognize '      0' as a null date, fix writing an invalid "0000/00/00" date
> * Python bindings: add a combineBands option to gdal.Footprint()
> 
> 
> Withdrawing previous motion and:
> 
> ==> Motion: adopt 3.8.1 RC3 as final 3.8.1 release
> 
> Starting with my +1,
> 
> Even
> 
> --
> My software is free, but my time generally not.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From j1 at jimenezshaw.com  Tue Nov 28 09:52:42 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Tue, 28 Nov 2023 18:52:42 +0100
Subject: [gdal-dev] GDAL 3.8.1RC3 is available & motion to approve it
In-Reply-To: <5288A4CC-ED73-4CEC-98A9-9DBA8AD34DBC@hobu.co>
References: <47e4ff64-8fd2-49b5-ad38-7eb875875acd@spatialys.com>
 <AM0PR09MB321988832B22FCF1D0B52195FDBCA@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <5288A4CC-ED73-4CEC-98A9-9DBA8AD34DBC@hobu.co>
Message-ID: <CADRrdKs2PK13nzposvPGMY35=5c5wjG=qhFa5K_-uW70Xguobg@mail.gmail.com>

+1 Javier

On Tue, 28 Nov 2023 at 17:29, Howard Butler via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> +1 Howard
>
> > On Nov 28, 2023, at 9:57?AM, Rahkonen Jukka via gdal-dev <
> gdal-dev at lists.osgeo.org> wrote:
> >
> > +1
> >
> > -Jukka-
> >
> > -----Alkuper?inen viesti-----
> > L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even
> Rouault via gdal-dev
> > L?hetetty: tiistai 28. marraskuuta 2023 17.33
> > Vastaanottaja: gdal-dev at lists.osgeo.org
> > Aihe: [gdal-dev] GDAL 3.8.1RC3 is available & motion to approve it
> >
> > Hi,
> >
> > well, another annoying 3.8.0 regression related to ogr2ogr GPKG ->
> Shapefile when field names are longer than 10 characters (ah
> > Shapefile!!!) popped up today, so here's a RC3 (crossing fingers it's
> the good one):
> > ...
> > A snapshot of the gdalautotest suite is also available:
> > ...
> > The changes since RC2 are:
> >
> > * CMake: make GDAL_USE_LIBKML and GDAL_USE_OPENJPEG honor
> GDAL_USE_EXTERNAL_LIBS
> > * Detect failure in installation of the Python bindings
> > * Fix installation issue with Python 3.12 on Debian
> > * GDALOverviewDataset::IRasterIO(): use parent dataset when possible for
> more
> >   efficiency
> > * gdal_footprint: fix wrong taking into account of alpha band (#8834)
> > * gdal_footprint: fix taking into account of individual bands that have
> nodata
> > * COG: for JPEG compression, convert single band+alpha as single band
> JPEG + 1-bit mask band
> > * GTIFF SRS reader: include VertCRS name from EPSG in CompoundCRS name
> if there's no citation geokey
> > * ogr2ogr: fix GPKG -> Shapefile when field names are truncated (#8849,
> > 3.8.0 regression)
> > * CSV writer: do not quote integer fields by default (only if
> STRING_QUOTING=ALWAYS is specified)
> > * GPX: make detection of extensions element more robust (#8827)
> > * Shapefile: recognize '      0' as a null date, fix writing an invalid
> "0000/00/00" date
> > * Python bindings: add a combineBands option to gdal.Footprint()
> >
> >
> > Withdrawing previous motion and:
> >
> > ==> Motion: adopt 3.8.1 RC3 as final 3.8.1 release
> >
> > Starting with my +1,
> >
> > Even
> >
> > --
> > My software is free, but my time generally not.
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231128/20fa5bea/attachment-0001.htm>

From sean.gillies at gmail.com  Tue Nov 28 10:23:16 2023
From: sean.gillies at gmail.com (Sean Gillies)
Date: Tue, 28 Nov 2023 11:23:16 -0700
Subject: [gdal-dev] GDAL 3.8.1RC3 is available & motion to approve it
In-Reply-To: <47e4ff64-8fd2-49b5-ad38-7eb875875acd@spatialys.com>
References: <47e4ff64-8fd2-49b5-ad38-7eb875875acd@spatialys.com>
Message-ID: <CAOodmJqcHZE-Jmx0Q7topVjF49BmeixnN-dP9tVv+PcaBi0RtQ@mail.gmail.com>

I finally have configured a GitHub action that tests rasterio against the
latest GDAL tags and don't see any problems with 3.8.1RC3:
https://github.com/rasterio/rasterio/actions/runs/7022736307.

+1 for me

On Tue, Nov 28, 2023 at 8:32?AM Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> well, another annoying 3.8.0 regression related to ogr2ogr GPKG ->
> Shapefile when field names are longer than 10 characters (ah
> Shapefile!!!) popped up today, so here's a RC3 (crossing fingers it's
> the good one):
>
>    https://download.osgeo.org/gdal/3.8.1/gdal-3.8.1rc3.tar.xz
>    https://download.osgeo.org/gdal/3.8.1/gdal-3.8.1rc3.tar.gz
>    https://download.osgeo.org/gdal/3.8.1/gdal381rc3.zip
>
> A snapshot of the gdalautotest suite is also available:
>
> https://download.osgeo.org/gdal/3.8.1/gdalautotest-3.8.1rc3.tar.gz
>    https://download.osgeo.org/gdal/3.8.1/gdalautotest-3.8.1rc3.zip
>
> The changes since RC2 are:
>
> * CMake: make GDAL_USE_LIBKML and GDAL_USE_OPENJPEG honor
> GDAL_USE_EXTERNAL_LIBS
> * Detect failure in installation of the Python bindings
> * Fix installation issue with Python 3.12 on Debian
> * GDALOverviewDataset::IRasterIO(): use parent dataset when possible for
> more
>    efficiency
> * gdal_footprint: fix wrong taking into account of alpha band (#8834)
> * gdal_footprint: fix taking into account of individual bands that have
> nodata
> * COG: for JPEG compression, convert single band+alpha as single band
> JPEG + 1-bit mask band
> * GTIFF SRS reader: include VertCRS name from EPSG in CompoundCRS name
> if there's no citation geokey
> * ogr2ogr: fix GPKG -> Shapefile when field names are truncated (#8849,
> 3.8.0 regression)
> * CSV writer: do not quote integer fields by default (only if
> STRING_QUOTING=ALWAYS is specified)
> * GPX: make detection of extensions element more robust (#8827)
> * Shapefile: recognize '      0' as a null date, fix writing an invalid
> "0000/00/00" date
> * Python bindings: add a combineBands option to gdal.Footprint()
>
>
> Withdrawing previous motion and:
>
> ==> Motion: adopt 3.8.1 RC3 as final 3.8.1 release
>
> Starting with my +1,
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231128/39584df8/attachment.htm>

From even.rouault at spatialys.com  Tue Nov 28 14:03:21 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 28 Nov 2023 23:03:21 +0100
Subject: [gdal-dev] GDAL 3.8.1RC3 is available & motion to approve it
In-Reply-To: <47e4ff64-8fd2-49b5-ad38-7eb875875acd@spatialys.com>
References: <47e4ff64-8fd2-49b5-ad38-7eb875875acd@spatialys.com>
Message-ID: <ec4a17bd-c05d-41bb-ad43-dfbba96a55cf@spatialys.com>

FYI, Docker images ghcr.io/osgeo/gdal:alpine-small-3.8.1 , 
ghcr.io/osgeo/gdal:alpine-normal-3.8.1 , 
ghcr.io/osgeo/gdal:ubuntu-small-3.8.1 , 
ghcr.io/osgeo/gdal:ubuntu-full-3.8.1 have now been refreshed against RC3

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From fengting.chen at oracle.com  Tue Nov 28 14:40:32 2023
From: fengting.chen at oracle.com (Fengting Chen)
Date: Tue, 28 Nov 2023 22:40:32 +0000
Subject: [gdal-dev] GDAL driver Open() calls
Message-ID: <BYAPR10MB3366F2ABF37779E31227CE3F93BCA@BYAPR10MB3366.namprd10.prod.outlook.com>

Hi,

I noticed from the GeoRaster driver that in GDAL 3.6 and 3.7 (maybe 3.8 too),  there are two GDALOpen() calls on the driver with GDALOpenInfo eAccess as GA_ReadOnly, even when the GeoRaster is the output format in gdal_translate command. There are no such calls in GDAL 3.4. I am wondering if these invocations of Open() with eAccess as GA_ReadOnly are necessary when the driver is the output driver. This has caused performance issue for the GeoRaster driver when a user is trying to load the data into Oracle database because it has two unnecessary reads from the database.  If these Open() calls are unavoidable, how to differentiate the calls whether it is as input or as output in the gdal_translate command?

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231128/27c97b51/attachment.htm>

From even.rouault at spatialys.com  Tue Nov 28 15:36:00 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 29 Nov 2023 00:36:00 +0100
Subject: [gdal-dev] GDAL driver Open() calls
In-Reply-To: <BYAPR10MB3366F2ABF37779E31227CE3F93BCA@BYAPR10MB3366.namprd10.prod.outlook.com>
References: <BYAPR10MB3366F2ABF37779E31227CE3F93BCA@BYAPR10MB3366.namprd10.prod.outlook.com>
Message-ID: <f018c7c0-d558-4f8a-a010-b3fdcf24b9ef@spatialys.com>

Hi,

Please share the stack trace (on a debug build) of both instances where 
GDALOpen() is called

Even

Le 28/11/2023 ? 23:40, Fengting Chen via gdal-dev a ?crit?:
>
> Hi,
>
> I noticed from the GeoRaster driver that in GDAL 3.6 and 3.7 (maybe 
> 3.8 too), ?there are two GDALOpen() calls on the driver with 
> GDALOpenInfo eAccess as GA_ReadOnly, even when the GeoRaster is the 
> output format in gdal_translate command. There are no such calls in 
> GDAL 3.4. I am wondering if these invocations of Open() with eAccess 
> as GA_ReadOnly are necessary when the driver is the output driver. 
> This has caused performance issue for the GeoRaster driver when a user 
> is trying to load the data into Oracle database because it has two 
> unnecessary reads from the database. ?If these Open() calls are 
> unavoidable, how to differentiate the calls whether it is as input or 
> as output in the gdal_translate command?
>
> Thanks.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231129/f496302f/attachment.htm>

From fengting.chen at oracle.com  Tue Nov 28 17:56:15 2023
From: fengting.chen at oracle.com (Fengting Chen)
Date: Wed, 29 Nov 2023 01:56:15 +0000
Subject: [gdal-dev] [External] : Re:  GDAL driver Open() calls
In-Reply-To: <f018c7c0-d558-4f8a-a010-b3fdcf24b9ef@spatialys.com>
References: <BYAPR10MB3366F2ABF37779E31227CE3F93BCA@BYAPR10MB3366.namprd10.prod.outlook.com>
 <f018c7c0-d558-4f8a-a010-b3fdcf24b9ef@spatialys.com>
Message-ID: <BYAPR10MB33664395619CE211066350859383A@BYAPR10MB3366.namprd10.prod.outlook.com>

The attached are two output logs with debug on. You can see that the output from GDAL 3.7 has two extra queries at the beginning. These queries only happen when the eAccess is GA_ReadOnly. The logs are generated with the same command parameters to gdal_translate.

From: Even Rouault <even.rouault at spatialys.com>
Date: Tuesday, November 28, 2023 at 6:36 PM
To: Fengting Chen <fengting.chen at oracle.com>, gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: [External] : Re: [gdal-dev] GDAL driver Open() calls

Hi,

Please share the stack trace (on a debug build) of both instances where GDALOpen() is called

Even
Le 28/11/2023 ? 23:40, Fengting Chen via gdal-dev a ?crit :
Hi,

I noticed from the GeoRaster driver that in GDAL 3.6 and 3.7 (maybe 3.8 too),  there are two GDALOpen() calls on the driver with GDALOpenInfo eAccess as GA_ReadOnly, even when the GeoRaster is the output format in gdal_translate command. There are no such calls in GDAL 3.4. I am wondering if these invocations of Open() with eAccess as GA_ReadOnly are necessary when the driver is the output driver. This has caused performance issue for the GeoRaster driver when a user is trying to load the data into Oracle database because it has two unnecessary reads from the database.  If these Open() calls are unavoidable, how to differentiate the calls whether it is as input or as output in the gdal_translate command?

Thanks.



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev<https://urldefense.com/v3/__https:/lists.osgeo.org/mailman/listinfo/gdal-dev__;!!ACWV5N9M2RV99hQ!IqVgHqcg5DBb3fu5ZpXizGqYnezdKvCzFALf06Gt-Vs7RiPPCXFACcefd_slweWtNCqHy-G-OsmoPt9XZqR4DOWs5UiD$>

--

http://www.spatialys.com<https://urldefense.com/v3/__http:/www.spatialys.com__;!!ACWV5N9M2RV99hQ!IqVgHqcg5DBb3fu5ZpXizGqYnezdKvCzFALf06Gt-Vs7RiPPCXFACcefd_slweWtNCqHy-G-OsmoPt9XZqR4DFVEpZ99$>

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231129/fbf5861d/attachment-0001.htm>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: gdaltranslate_341_log.txt
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231129/fbf5861d/attachment-0002.txt>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: gdaltranslate_370_log.txt
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231129/fbf5861d/attachment-0003.txt>

From even.rouault at spatialys.com  Wed Nov 29 02:54:06 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 29 Nov 2023 11:54:06 +0100
Subject: [gdal-dev] [External] : Re:  GDAL driver Open() calls
In-Reply-To: <BYAPR10MB33664395619CE211066350859383A@BYAPR10MB3366.namprd10.prod.outlook.com>
References: <BYAPR10MB3366F2ABF37779E31227CE3F93BCA@BYAPR10MB3366.namprd10.prod.outlook.com>
 <f018c7c0-d558-4f8a-a010-b3fdcf24b9ef@spatialys.com>
 <BYAPR10MB33664395619CE211066350859383A@BYAPR10MB3366.namprd10.prod.outlook.com>
Message-ID: <e9b412a8-03ee-4503-ad29-019c0d5dbe91@spatialys.com>

Hi,

The logs didn't directly answer my question as they lacked the chain of 
calls, but I believe I figured out the reason. Please try 
https://github.com/OSGeo/gdal/pull/8865

Even

Le 29/11/2023 ? 02:56, Fengting Chen a ?crit?:
>
> The attached are two output logs with debug on. You can see that the 
> output from GDAL 3.7 has two extra queries at the beginning. These 
> queries only happen when the eAccess is GA_ReadOnly. The logs are 
> generated with the same command parameters to gdal_translate.
>
> *From: *Even Rouault <even.rouault at spatialys.com>
> *Date: *Tuesday, November 28, 2023 at 6:36 PM
> *To: *Fengting Chen <fengting.chen at oracle.com>, 
> gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
> *Subject: *[External] : Re: [gdal-dev] GDAL driver Open() calls
>
> Hi,
>
> Please share the stack trace (on a debug build) of both instances 
> where GDALOpen() is called
>
> Even
>
> Le 28/11/2023 ? 23:40, Fengting Chen via gdal-dev a ?crit?:
>
>     Hi,
>
>     I noticed from the GeoRaster driver that in GDAL 3.6 and 3.7
>     (maybe 3.8 too), ?there are two GDALOpen() calls on the driver
>     with GDALOpenInfo eAccess as GA_ReadOnly, even when the GeoRaster
>     is the output format in gdal_translate command. There are no such
>     calls in GDAL 3.4. I am wondering if these invocations of Open()
>     with eAccess as GA_ReadOnly are necessary when the driver is the
>     output driver. This has caused performance issue for the GeoRaster
>     driver when a user is trying to load the data into Oracle database
>     because it has two unnecessary reads from the database. ?If these
>     Open() calls are unavoidable, how to differentiate the calls
>     whether it is as input or as output in the gdal_translate command?
>
>     Thanks.
>
>
>
>     _______________________________________________
>
>     gdal-dev mailing list
>
>     gdal-dev at lists.osgeo.org
>
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev  <https://urldefense.com/v3/__https:/lists.osgeo.org/mailman/listinfo/gdal-dev__;!!ACWV5N9M2RV99hQ!IqVgHqcg5DBb3fu5ZpXizGqYnezdKvCzFALf06Gt-Vs7RiPPCXFACcefd_slweWtNCqHy-G-OsmoPt9XZqR4DOWs5UiD$>
>
> -- 
> http://www.spatialys.com  <https://urldefense.com/v3/__http:/www.spatialys.com__;!!ACWV5N9M2RV99hQ!IqVgHqcg5DBb3fu5ZpXizGqYnezdKvCzFALf06Gt-Vs7RiPPCXFACcefd_slweWtNCqHy-G-OsmoPt9XZqR4DFVEpZ99$>
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231129/7aacc2dd/attachment.htm>

From cliveswan at gmail.com  Wed Nov 29 02:57:48 2023
From: cliveswan at gmail.com (Clive Swan)
Date: Wed, 29 Nov 2023 10:57:48 +0000
Subject: [gdal-dev] Installation on Windows
Message-ID: <CWXP123MB395987458DA8B566E8106C4DA083A@CWXP123MB3959.GBRP123.PROD.OUTLOOK.COM>

Greetings,

Is there a detailed guide to installing GDAL on Windows 10?? I have attempted installation several times, but just get error mesdages.

Thanks
Clive
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231129/3c37d1d1/attachment.htm>

From jef at norbit.de  Wed Nov 29 03:18:42 2023
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Wed, 29 Nov 2023 12:18:42 +0100
Subject: [gdal-dev] Installation on Windows
In-Reply-To: <CWXP123MB395987458DA8B566E8106C4DA083A@CWXP123MB3959.GBRP123.PROD.OUTLOOK.COM>
References: <CWXP123MB395987458DA8B566E8106C4DA083A@CWXP123MB3959.GBRP123.PROD.OUTLOOK.COM>
Message-ID: <20231129111842.r4lmvxdrbilrczht@norbit.de>

Hi Clive,

On Wed, 29. Nov 2023 at 10:57:48 +0000, Clive Swan via gdal-dev wrote:
> Is there a detailed guide to installing GDAL on Windows 10?? I have attempted
> installation several times, but just get error mesdages.

https://gdal.org/download.html#windows

Which one did you try and which error messages did you get?

I'd go with OSGeo4W[0], but that's not listed anymore and I'm biased.


J?rgen

[0] https://trac.osgeo.org/osgeo4w

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231129/732abfab/attachment.sig>

From joh3 at anatexis.com  Wed Nov 29 07:05:56 2023
From: joh3 at anatexis.com (Joe Lovick)
Date: Wed, 29 Nov 2023 09:05:56 -0600
Subject: [gdal-dev] How do GCP's  in a VRT file work?
Message-ID: <ddd53b19-a9ab-43bb-8083-0f225626ad01@anatexis.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231129/d3bea67a/attachment.htm>

From gdt at lexort.com  Wed Nov 29 07:37:11 2023
From: gdt at lexort.com (Greg Troxel)
Date: Wed, 29 Nov 2023 10:37:11 -0500
Subject: [gdal-dev] How do GCP's  in a VRT file work?
In-Reply-To: <ddd53b19-a9ab-43bb-8083-0f225626ad01@anatexis.com> (Joe Lovick
 via gdal-dev's message of "Wed, 29 Nov 2023 09:05:56 -0600")
References: <ddd53b19-a9ab-43bb-8083-0f225626ad01@anatexis.com>
Message-ID: <rmimsuwbmfs.fsf@s1.lexort.com>

Joe Lovick via gdal-dev <gdal-dev at lists.osgeo.org> writes:

> Could someone explain how GCP's placed into a VRT file work, i was
> expecting a linear/bi-linear, or polynomial fit between the points for
> the simplest EPSG:4326 projection.however that is not what i see,
> adjusting a single point, effects the projection of all corner points.

(I am a newbie at VRT but find imagery registration interesting.)

Before I started reading docs, I had a different expectation from you,
which is that the input and output were conformal projections, and that
there was a single translate/rotate/scale transformation estimated,
probably via least squares, from all GCPs.

I looked at:

  https://gdal.org/drivers/raster/vrt.html

where it says

    GeoTransform: This element contains a six value affine
    geotransformation for the dataset, mapping between pixel/line
    coordinates and georeferenced coordinates. Typically
    (geotransform[0], geotransform[3]) will be the (easting, northing)
    of the upper-left corner of the raster, geotransform[1] the
    horizontal resolution in geospatial coordinates/pixel, and
    geotransform[5] the vertical resolution in geospatial
    coordinates/pixel, as a negative value if the image is north-up
    oriented. See Affine GeoTransform for more details about that
    mapping.

        <GeoTransform>440720.0,  60,  0.0,  3751320.0,  0.0, -60.0</GeoTransform>

    GCPList: This element contains a list of Ground Control Points for
    the dataset, mapping between pixel/line coordinates and
    georeferenced coordinates. The Projection attribute should contain
    the SRS of the georeferenced coordinates in the same format as the
    SRS element. The dataAxisToSRSAxisMapping attribute is the same as
    in the SRS element.

        <GCPList Projection="EPSG:4326">
            <GCP Id="1" Info="a" Pixel="0.5" Line="0.5" X="0.0" Y="0.0" Z="0.0" />
            <GCP Id="2" Info="b" Pixel="13.5" Line="23.5" X="1.0" Y="2.0" Z="0.0" />
        </GCPList>

which indicates that there are different scales for image-up anad
image-right, and leaving me confused about [2] and [4].  As I was
writing this, it came to me that they are the off-diagonal rotation
terms.I think this is a translation (0/3) and a matrix multiply from
pixel coords.

map_coords = [0  + [image_east, image_north] * [ 1 2
              3]                                 3 4]

is now my understanding.  So 2 and 3 are zero if the image's easting is
equal to the x axis of the projected coordinate system.

Thus, after reading, I still expect that GCPList is processed via least
squares to find a GeoTransform translation and
scale/rotation/slightly-more matrix.

The basic point is that this process is starting from a belief that the
imagery is consistent and needs only translation, scaling, and rotation.
That's not quite true, as a general matrix multiply is looser than a
rotation and scale, having 4 variables vs 2.



From joh3 at anatexis.com  Wed Nov 29 08:08:10 2023
From: joh3 at anatexis.com (Joe Lovick)
Date: Wed, 29 Nov 2023 10:08:10 -0600
Subject: [gdal-dev] How do GCP's in a VRT file work?
In-Reply-To: <rmimsuwbmfs.fsf@s1.lexort.com>
References: <ddd53b19-a9ab-43bb-8083-0f225626ad01@anatexis.com>
 <rmimsuwbmfs.fsf@s1.lexort.com>
Message-ID: <0571f9cd-a4f9-4dbf-9da1-dd696e482084@anatexis.com>

This is really informative and makes perfect sense..... makes my life a 
lot harder, but perfect sense

If I Could i ask a follow on question to this,

 ??? ?? What is the recommended processing paradigm for slightly 
off-nadir imagery where their is a need for a full [3x3] matrix mapping 
to take it to a consistent projection? ie the images have at a minimum 
perspective effects.

 ??? the reason i ask, is i have a significant image pile that needs 
this re-projection to remove camera lens + perspective effects , to map 
it to a consistent conformal projection? Can i do this with gdal_warp? 
or do i need to code this up, and then go from their once their is just 
a rotation / scale left.

Many thanks

Joe


On 2023-11-29 09:37, Greg Troxel via gdal-dev wrote:
> The basic point is that this process is starting from a belief that the
> imagery is consistent and needs only translation, scaling, and rotation.
> That's not quite true, as a general matrix multiply is looser than a
> rotation and scale, having 4 variables vs 2.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231129/0d7ba5cd/attachment-0001.htm>

From even.rouault at spatialys.com  Wed Nov 29 08:35:00 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 29 Nov 2023 17:35:00 +0100
Subject: [gdal-dev] How do GCP's in a VRT file work?
In-Reply-To: <ddd53b19-a9ab-43bb-8083-0f225626ad01@anatexis.com>
References: <ddd53b19-a9ab-43bb-8083-0f225626ad01@anatexis.com>
Message-ID: <84a8d306-6cb5-4c8b-bf8e-57290f421cfe@spatialys.com>

If you use the -tps flag of gdalwarp, it will strictly honour your GCPs. 
Cf https://gdal.org/programs/gdalwarp.html#cmdoption-gdalwarp-tps and 
https://gdal.org/api/gdal_alg.html#_CPPv424GDALCreateTPSTransformeriPK8GDAL_GCPi

"The thin plate spline transformer produces exact transformation at all 
control points and smoothly varying transformations between control 
points with greatest influence from local control points. It is suitable 
for for many applications not well modeled by polynomial transformations."

Le 29/11/2023 ? 16:05, Joe Lovick via gdal-dev a ?crit?:
> Could someone explain how GCP's placed into a VRT file work, i was 
> expecting a linear/bi-linear, or polynomial fit between the points for 
> the simplest EPSG:4326 projection.
>
> however that is not what i see, adjusting a single point, effects the 
> projection of all corner points.
>
> for example,
>
> a vrt file that starts...
>
> <VRTDataset rasterXSize="5328.0" rasterYSize="2160.0">
> ??? <GCPList Projection="EPSG:4326">
> <GCP? Id="1" Info="a" Pixel="0.0" Line="2160.0" X="-93.6369420815179" 
> Y="41.9822570038769" />
> <GCP? Id="2" Info="b" Pixel="5328.0" Line="2160.0" 
> X="-93.636924110907" Y="41.9822308438819" />
> <GCP? Id="3" Info="c" Pixel="5328.0" Line="0.0" X="-93.6369153669777" 
> Y="41.9822348674463" />
> <GCP? Id="4" Info="d" Pixel="0.0" Line="0.0" X="-93.636927955436" 
> Y="41.9822605751492" />
> </GCPList>
> .....
>
> if i adjust the 0,0 point to be further east, when i look at the 
> resulting remaped image, all corner image points have shifted, rather 
> than just the single corner location for 0,0
>
> what am i missing here?
>
> many thanks
> Joe
>
>
> via Newton Mail 
> <https://cloudmagic.com/k/d/mailapp?ct=dw&cv=10.0.71&pv=10.0&source=email_footer_2>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231129/f477930b/attachment.htm>

From jmckenna at gatewaygeomatics.com  Wed Nov 29 10:01:26 2023
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed, 29 Nov 2023 14:01:26 -0400
Subject: [gdal-dev] Installation on Windows
In-Reply-To: <20231129111842.r4lmvxdrbilrczht@norbit.de>
References: <CWXP123MB395987458DA8B566E8106C4DA083A@CWXP123MB3959.GBRP123.PROD.OUTLOOK.COM>
 <20231129111842.r4lmvxdrbilrczht@norbit.de>
Message-ID: <994f3afd-bd2a-4b03-8272-d706a5dde978@gatewaygeomatics.com>

You can find the popular Binaries at 
https://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries#Windows (great 
to see so many options listed there)

-jeff





-- 
Jeff McKenna
GatewayGeo: Developers of MS4W, & offering MapServer Consulting/Dev
co-founder of FOSS4G
http://gatewaygeo.com/




On 2023-11-29 7:18 a.m., J?rgen E. Fischer via gdal-dev wrote:
> Hi Clive,
> 
> On Wed, 29. Nov 2023 at 10:57:48 +0000, Clive Swan via gdal-dev wrote:
>> Is there a detailed guide to installing GDAL on Windows 10?? I have attempted
>> installation several times, but just get error mesdages.
> 
> https://gdal.org/download.html#windows
> 
> Which one did you try and which error messages did you get?
> 
> I'd go with OSGeo4W[0], but that's not listed anymore and I'm biased.
> 
> 
> J?rgen
> 
> [0] https://trac.osgeo.org/osgeo4w
> 
=


From fengting.chen at oracle.com  Wed Nov 29 19:47:19 2023
From: fengting.chen at oracle.com (Fengting Chen)
Date: Thu, 30 Nov 2023 03:47:19 +0000
Subject: [gdal-dev] [External] : Re:  GDAL driver Open() calls
In-Reply-To: <e9b412a8-03ee-4503-ad29-019c0d5dbe91@spatialys.com>
References: <BYAPR10MB3366F2ABF37779E31227CE3F93BCA@BYAPR10MB3366.namprd10.prod.outlook.com>
 <f018c7c0-d558-4f8a-a010-b3fdcf24b9ef@spatialys.com>
 <BYAPR10MB33664395619CE211066350859383A@BYAPR10MB3366.namprd10.prod.outlook.com>
 <e9b412a8-03ee-4503-ad29-019c0d5dbe91@spatialys.com>
Message-ID: <BYAPR10MB3366E97BDA90AF8EF21002B79382A@BYAPR10MB3366.namprd10.prod.outlook.com>

This doesn?t seem to fix the problem. How do I print out the stack trace in the driver?

From: Even Rouault <even.rouault at spatialys.com>
Date: Wednesday, November 29, 2023 at 5:54 AM
Hi,

The logs didn't directly answer my question as they lacked the chain of calls, but I believe I figured out the reason. Please try https://github.com/OSGeo/gdal/pull/8865<https://urldefense.com/v3/__https:/github.com/OSGeo/gdal/pull/8865__;!!ACWV5N9M2RV99hQ!MF9SjOfGKBc2ARm4bfNzMX-sGw7CXys2OohWuuKXhMG31EkrQNqZkn6xm2MnoCqt3grzKRb9rPrV6jn-lmQqxHx1bEOa$>

Even
Le 29/11/2023 ? 02:56, Fengting Chen a ?crit :
The attached are two output logs with debug on. You can see that the output from GDAL 3.7 has two extra queries at the beginning. These queries only happen when the eAccess is GA_ReadOnly. The logs are generated with the same command parameters to gdal_translate.

From: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>
Date: Tuesday, November 28, 2023 at 6:36 PM
Hi,

Please share the stack trace (on a debug build) of both instances where GDALOpen() is called

Even
Le 28/11/2023 ? 23:40, Fengting Chen via gdal-dev a ?crit :
Hi,

I noticed from the GeoRaster driver that in GDAL 3.6 and 3.7 (maybe 3.8 too),  there are two GDALOpen() calls on the driver with GDALOpenInfo eAccess as GA_ReadOnly, even when the GeoRaster is the output format in gdal_translate command. There are no such calls in GDAL 3.4. I am wondering if these invocations of Open() with eAccess as GA_ReadOnly are necessary when the driver is the output driver. This has caused performance issue for the GeoRaster driver when a user is trying to load the data into Oracle database because it has two unnecessary reads from the database.  If these Open() calls are unavoidable, how to differentiate the calls whether it is as input or as output in the gdal_translate command?

Thanks.




_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev<https://urldefense.com/v3/__https:/lists.osgeo.org/mailman/listinfo/gdal-dev__;!!ACWV5N9M2RV99hQ!IqVgHqcg5DBb3fu5ZpXizGqYnezdKvCzFALf06Gt-Vs7RiPPCXFACcefd_slweWtNCqHy-G-OsmoPt9XZqR4DOWs5UiD$>

--

http://www.spatialys.com<https://urldefense.com/v3/__http:/www.spatialys.com__;!!ACWV5N9M2RV99hQ!IqVgHqcg5DBb3fu5ZpXizGqYnezdKvCzFALf06Gt-Vs7RiPPCXFACcefd_slweWtNCqHy-G-OsmoPt9XZqR4DFVEpZ99$>

My software is free, but my time generally not.

--

http://www.spatialys.com<https://urldefense.com/v3/__http:/www.spatialys.com__;!!ACWV5N9M2RV99hQ!MF9SjOfGKBc2ARm4bfNzMX-sGw7CXys2OohWuuKXhMG31EkrQNqZkn6xm2MnoCqt3grzKRb9rPrV6jn-lmQqxN5wEZnr$>

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231130/bcad657e/attachment.htm>

From gdt at lexort.com  Thu Nov 30 03:54:43 2023
From: gdt at lexort.com (Greg Troxel)
Date: Thu, 30 Nov 2023 06:54:43 -0500
Subject: [gdal-dev] How do GCP's in a VRT file work?
In-Reply-To: <0571f9cd-a4f9-4dbf-9da1-dd696e482084@anatexis.com> (Joe Lovick
 via gdal-dev's message of "Wed, 29 Nov 2023 10:08:10 -0600")
References: <ddd53b19-a9ab-43bb-8083-0f225626ad01@anatexis.com>
 <rmimsuwbmfs.fsf@s1.lexort.com>
 <0571f9cd-a4f9-4dbf-9da1-dd696e482084@anatexis.com>
Message-ID: <rmiil5j8ni4.fsf@s1.lexort.com>

Joe Lovick via gdal-dev <gdal-dev at lists.osgeo.org> writes:

> ??? ?? What is the recommended processing paradigm for slightly
> off-nadir imagery where their is a need for a full [3x3] matrix
> mapping to take it to a consistent projection? ie the images have at a
> minimum perspective effects.
>
> ??? the reason i ask, is i have a significant image pile that needs
> this re-projection to remove camera lens + perspective effects , to
> map it to a consistent conformal projection? Can i do this with
> gdal_warp? or do i need to code this up, and then go from their once
> their is just a rotation / scale left.

I have contemplated acquiring imagery and processing it, but so far only
contemplated.  My impression is that you need to resample, not just compute a
transform (hence gdalwarp vs vrt), because most things that use imagery
expect at most only transform, scale and rotation.

One thing that I found that may be useful is

  https://www.opendronemap.org/

however it seems to have "docker is the approach" which generally makes
me suspicious of build system hygiene.  That may just be spin and not
real, though.

From even.rouault at spatialys.com  Thu Nov 30 05:40:10 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 30 Nov 2023 14:40:10 +0100
Subject: [gdal-dev] [External] : Re:  GDAL driver Open() calls
In-Reply-To: <BYAPR10MB3366E97BDA90AF8EF21002B79382A@BYAPR10MB3366.namprd10.prod.outlook.com>
References: <BYAPR10MB3366F2ABF37779E31227CE3F93BCA@BYAPR10MB3366.namprd10.prod.outlook.com>
 <f018c7c0-d558-4f8a-a010-b3fdcf24b9ef@spatialys.com>
 <BYAPR10MB33664395619CE211066350859383A@BYAPR10MB3366.namprd10.prod.outlook.com>
 <e9b412a8-03ee-4503-ad29-019c0d5dbe91@spatialys.com>
 <BYAPR10MB3366E97BDA90AF8EF21002B79382A@BYAPR10MB3366.namprd10.prod.outlook.com>
Message-ID: <aa6dc67b-9470-47dd-9a41-48d8cafd0dae@spatialys.com>


Le 30/11/2023 ? 04:47, Fengting Chen a ?crit?:
>
> This doesn?t seem to fix the problem. How do I print out the stack 
> trace in the driver?
>
This is not something the driver can do. You have to use the interactive 
debugger of your dev environment, attach it to your gdal_translate 
command, set a breakpoint in the GeoRasterDataset::Open method, and use 
the appropriate function of your debugger to display the call stack. I'm 
sure you'll find plenty of online resources for whatever debugger you use.

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231130/600666ec/attachment.htm>

From even.rouault at spatialys.com  Thu Nov 30 07:22:14 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 30 Nov 2023 16:22:14 +0100
Subject: [gdal-dev] GDAL 3.8.1RC3 is available & motion to approve it
In-Reply-To: <47e4ff64-8fd2-49b5-ad38-7eb875875acd@spatialys.com>
References: <47e4ff64-8fd2-49b5-ad38-7eb875875acd@spatialys.com>
Message-ID: <1ed1d098-9b36-44ff-ad71-06b8258f15fc@spatialys.com>

Motion passed with +1 from PSC members JukkaR, HowardB, JavierJS, SeanG 
and me.

Le 28/11/2023 ? 16:32, Even Rouault via gdal-dev a ?crit?:
> Hi,
>
> well, another annoying 3.8.0 regression related to ogr2ogr GPKG -> 
> Shapefile when field names are longer than 10 characters (ah 
> Shapefile!!!) popped up today, so here's a RC3 (crossing fingers it's 
> the good one):
>
> ? https://download.osgeo.org/gdal/3.8.1/gdal-3.8.1rc3.tar.xz
> ? https://download.osgeo.org/gdal/3.8.1/gdal-3.8.1rc3.tar.gz
> ? https://download.osgeo.org/gdal/3.8.1/gdal381rc3.zip
>
> A snapshot of the gdalautotest suite is also available:
>
> https://download.osgeo.org/gdal/3.8.1/gdalautotest-3.8.1rc3.tar.gz
> ? https://download.osgeo.org/gdal/3.8.1/gdalautotest-3.8.1rc3.zip
>
> The changes since RC2 are:
>
> * CMake: make GDAL_USE_LIBKML and GDAL_USE_OPENJPEG honor 
> GDAL_USE_EXTERNAL_LIBS
> * Detect failure in installation of the Python bindings
> * Fix installation issue with Python 3.12 on Debian
> * GDALOverviewDataset::IRasterIO(): use parent dataset when possible 
> for more
> ? efficiency
> * gdal_footprint: fix wrong taking into account of alpha band (#8834)
> * gdal_footprint: fix taking into account of individual bands that 
> have nodata
> * COG: for JPEG compression, convert single band+alpha as single band 
> JPEG + 1-bit mask band
> * GTIFF SRS reader: include VertCRS name from EPSG in CompoundCRS name 
> if there's no citation geokey
> * ogr2ogr: fix GPKG -> Shapefile when field names are truncated 
> (#8849, 3.8.0 regression)
> * CSV writer: do not quote integer fields by default (only if 
> STRING_QUOTING=ALWAYS is specified)
> * GPX: make detection of extensions element more robust (#8827)
> * Shapefile: recognize '????? 0' as a null date, fix writing an 
> invalid "0000/00/00" date
> * Python bindings: add a combineBands option to gdal.Footprint()
>
>
> Withdrawing previous motion and:
>
> ==> Motion: adopt 3.8.1 RC3 as final 3.8.1 release
>
> Starting with my +1,
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Thu Nov 30 07:47:56 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 30 Nov 2023 16:47:56 +0100
Subject: [gdal-dev] GDAL 3.8.1 is released
Message-ID: <3ce21bd8-7b95-447c-8f97-12b4380a3e26@spatialys.com>

Hi,

On behalf of the GDAL/OGR development team, I am pleased to announce the
release of the GDAL/OGR 3.8.1 bug fix version. All users that had already
updated to 3.8.0 are strongly encouraged to update to 3.8.1, which 
addresses a
few 3.8.0 specific regressions (particularly for ogr2ogr workflows with 
GeoPackage, FlatGeobuf, GeoParquet or TileDB as source datasets).

Consult the release notes for the list of issues addressed:
 ??? https://github.com/OSGeo/gdal/blob/v3.8.1/NEWS.md

The sources are available at:

 ??? https://download.osgeo.org/gdal/3.8.1/gdal-3.8.1.tar.xz
 ??? https://download.osgeo.org/gdal/3.8.1/gdal-3.8.1.tar.gz
 ??? https://download.osgeo.org/gdal/3.8.1/gdal381.zip

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Thu Nov 30 08:02:51 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 30 Nov 2023 17:02:51 +0100
Subject: [gdal-dev] "RFC 98: Build requirements for GDAL 3.9" available
 for review
In-Reply-To: <5d76801e-28a5-45b8-a261-967e446f0f92@spatialys.com>
References: <5d76801e-28a5-45b8-a261-967e446f0f92@spatialys.com>
Message-ID: <78d6c236-44d9-4411-9b46-fc12d844824f@spatialys.com>

No further comments on this ? If not, I'll submit it to vote tomorrow.

Le 24/11/2023 ? 12:15, Even Rouault via gdal-dev a ?crit?:
>
> Hi,
>
> Please find "RFC 98: Build requirements for GDAL 3.9" in 
> https://github.com/OSGeo/gdal/pull/8802 for review & comments
>
> Summary:
>
> The document updates RFC68 with the new build requirements for GDAL 3.9:
>
>   * C++ >= 17
>   * CMake >= 3.16
>   * PROJ >= 6.3.1
>
> The minimum version for the following optional dependencies is also 
> updated:
>
>   * Python >= 3.8
>   * GEOS >= 3.8
>   * Poppler >= 0.86
>   * libtiff >= 4.1
>   * libcurl >= 7.68
>   * libpng >= 1.6.0
>   * libsqlite3 >= 3.31
>   * libopenjp2 >= 2.3.1
>   * libnetcdf >= 4.7 and built with NC4 enabled
>   * libhdf5 >= 1.10
>
> Even
>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231130/370f9f8c/attachment.htm>

From fengting.chen at oracle.com  Thu Nov 30 11:59:40 2023
From: fengting.chen at oracle.com (Fengting Chen)
Date: Thu, 30 Nov 2023 19:59:40 +0000
Subject: [gdal-dev] [External] : Re:  GDAL driver Open() calls
In-Reply-To: <aa6dc67b-9470-47dd-9a41-48d8cafd0dae@spatialys.com>
References: <BYAPR10MB3366F2ABF37779E31227CE3F93BCA@BYAPR10MB3366.namprd10.prod.outlook.com>
 <f018c7c0-d558-4f8a-a010-b3fdcf24b9ef@spatialys.com>
 <BYAPR10MB33664395619CE211066350859383A@BYAPR10MB3366.namprd10.prod.outlook.com>
 <e9b412a8-03ee-4503-ad29-019c0d5dbe91@spatialys.com>
 <BYAPR10MB3366E97BDA90AF8EF21002B79382A@BYAPR10MB3366.namprd10.prod.outlook.com>
 <aa6dc67b-9470-47dd-9a41-48d8cafd0dae@spatialys.com>
Message-ID: <BYAPR10MB336614A7885528B00904673B9382A@BYAPR10MB3366.namprd10.prod.outlook.com>

Hi Even,

Here is what found out from debugging: There are two Open() calls. Your fix skipped one. Here is the stack trace of the second one:

[cid:image001.png at 01DA239D.5F51E090]

Thanks!

From: Even Rouault <even.rouault at spatialys.com>
Date: Thursday, November 30, 2023 at 8:40 AM

Le 30/11/2023 ? 04:47, Fengting Chen a ?crit :
This doesn?t seem to fix the problem. How do I print out the stack trace in the driver?

This is not something the driver can do. You have to use the interactive debugger of your dev environment, attach it to your gdal_translate command, set a breakpoint in the GeoRasterDataset::Open method, and use the appropriate function of your debugger to display the call stack. I'm sure you'll find plenty of online resources for whatever debugger you use.

Even



--

http://www.spatialys.com<https://urldefense.com/v3/__http:/www.spatialys.com__;!!ACWV5N9M2RV99hQ!LdunXkjoOPFddx-jqp6_eWkk746TTCmRdAPcBj35cB2LBYcxMogtL6zHZEup8CJ2DN0T62IvlW7uYshKVkU9PsDwZbPE$>

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231130/f3ea8246/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 32147 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231130/f3ea8246/attachment-0001.png>

From jesse.r.meyer at nasa.gov  Thu Nov 30 12:19:04 2023
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Thu, 30 Nov 2023 20:19:04 +0000
Subject: [gdal-dev] How to determine which creation options are supported by
 a driver?
Message-ID: <577930CE-7028-4F7E-A98A-D79B9E8A954E@ndc.nasa.gov>

Hi,

I have gdal 3.8.1 installed via Brew which includes liblerc and zstd as part of their formulae, so I assumed I could use the creation options ?COMPRESS=LERC_ZSTD? and ?MAX_Z_ERROR=x? as documented on the GTIFF page when creating a new gtif image.

But when I do GDAL states:

?Warning 6: 'LERC_ZSTD' is an unexpected value for COMPRESS creation option of type string-select.
Warning 6: driver GTiff does not support creation option MAX_Z_ERROR?

So I am not sure if this is an issue with the driver itself or with the brew formula.  Please advise,

Thanks,
Jesse
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231130/5c5e02cf/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Nov 30 12:32:06 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Thu, 30 Nov 2023 20:32:06 +0000
Subject: [gdal-dev] How to determine which creation options are
 supported by a driver?
In-Reply-To: <577930CE-7028-4F7E-A98A-D79B9E8A954E@ndc.nasa.gov>
References: <577930CE-7028-4F7E-A98A-D79B9E8A954E@ndc.nasa.gov>
Message-ID: <AM0PR09MB321995AC937A07D2E7B1159FFD82A@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

Run ?gdalinfo ?format GTiff?.  For me it prints:
<Option name="COMPRESS" type="string-select">
    <Value>NONE</Value>
    <Value>LZW</Value>
    <Value>PACKBITS</Value>
    <Value>JPEG</Value>
    <Value>CCITTRLE</Value>
    <Value>CCITTFAX3</Value>
    <Value>CCITTFAX4</Value>
    <Value>DEFLATE</Value>
    <Value>ZSTD</Value>
  </Option>

So my GDAL build does not support LERC.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev
L?hetetty: torstai 30. marraskuuta 2023 22.19
Vastaanottaja: Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] How to determine which creation options are supported by a driver?

Hi,

I have gdal 3.8.1 installed via Brew which includes liblerc and zstd as part of their formulae, so I assumed I could use the creation options ?COMPRESS=LERC_ZSTD? and ?MAX_Z_ERROR=x? as documented on the GTIFF page when creating a new gtif image.

But when I do GDAL states:

?Warning 6: 'LERC_ZSTD' is an unexpected value for COMPRESS creation option of type string-select.
Warning 6: driver GTiff does not support creation option MAX_Z_ERROR?

So I am not sure if this is an issue with the driver itself or with the brew formula.  Please advise,

Thanks,
Jesse
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231130/cbbd135d/attachment-0001.htm>

From even.rouault at spatialys.com  Thu Nov 30 12:32:13 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 30 Nov 2023 21:32:13 +0100
Subject: [gdal-dev] How to determine which creation options are
 supported by a driver?
In-Reply-To: <577930CE-7028-4F7E-A98A-D79B9E8A954E@ndc.nasa.gov>
References: <577930CE-7028-4F7E-A98A-D79B9E8A954E@ndc.nasa.gov>
Message-ID: <78873ebf-baaf-4e80-b6ed-36bc96a5db5f@spatialys.com>


Le 30/11/2023 ? 21:19, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND 
APPLICATIONS INC] via gdal-dev a ?crit?:
>
> Hi,
>
> I have gdal 3.8.1 installed via Brew which includes liblerc and zstd 
> as part of their formulae, so I assumed I could use the creation 
> options ?COMPRESS=LERC_ZSTD? and ?MAX_Z_ERROR=x? as documented on the 
> GTIFF page when creating a new gtif image.
>
> But when I do GDAL states:
>
> ?Warning 6: 'LERC_ZSTD' is an unexpected value for COMPRESS creation 
> option of type string-select.
>
> Warning 6: driver GTiff does not support creation option MAX_Z_ERROR?
>
"gdalinfo --format GTtiff" will report the options available in your 
GDAL build
>
> So I am not sure if this is an issue with the driver itself or with 
> the brew formula.? Please advise,
>
In the brew formula. In the libtiff one more exactly, as this capability 
comes from libtiff. Just checking 
https://github.com/Homebrew/homebrew-core/blob/b4698a581c0d752241353682fecd627d85ca6dd6/Formula/lib/libtiff.rb, 
it lacks a liblerc dependency.

You could try from Conda, since its libtiff includes lerc support (3.8.1 
hasn't yet landed there, but it should come soon)


> Thanks,
>
> Jesse
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231130/0b44e446/attachment.htm>

From even.rouault at spatialys.com  Thu Nov 30 12:41:43 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 30 Nov 2023 21:41:43 +0100
Subject: [gdal-dev] [External] : Re:  GDAL driver Open() calls
In-Reply-To: <BYAPR10MB336614A7885528B00904673B9382A@BYAPR10MB3366.namprd10.prod.outlook.com>
References: <BYAPR10MB3366F2ABF37779E31227CE3F93BCA@BYAPR10MB3366.namprd10.prod.outlook.com>
 <f018c7c0-d558-4f8a-a010-b3fdcf24b9ef@spatialys.com>
 <BYAPR10MB33664395619CE211066350859383A@BYAPR10MB3366.namprd10.prod.outlook.com>
 <e9b412a8-03ee-4503-ad29-019c0d5dbe91@spatialys.com>
 <BYAPR10MB3366E97BDA90AF8EF21002B79382A@BYAPR10MB3366.namprd10.prod.outlook.com>
 <aa6dc67b-9470-47dd-9a41-48d8cafd0dae@spatialys.com>
 <BYAPR10MB336614A7885528B00904673B9382A@BYAPR10MB3366.namprd10.prod.outlook.com>
Message-ID: <da496e72-1138-4477-b829-ca975a9005de@spatialys.com>

ok, that should be fixed per https://github.com/OSGeo/gdal/pull/8885 
(and factorization of similar code of gdal_translate_lib.cpp and 
gdaldriver.cpp)

Le 30/11/2023 ? 20:59, Fengting Chen a ?crit?:
>
> Hi Even,
>
> Here is what found out from debugging: There are two Open() calls. 
> Your fix skipped one. Here is the stack trace of the second one:
>
> Thanks!
>
> *From: *Even Rouault <even.rouault at spatialys.com>
> *Date: *Thursday, November 30, 2023 at 8:40 AM
>
> Le 30/11/2023 ? 04:47, Fengting Chen a ?crit?:
>
>     This doesn?t seem to fix the problem. How do I print out the stack
>     trace in the driver?
>
> This is not something the driver can do. You have to use the 
> interactive debugger of your dev environment, attach it to your 
> gdal_translate command, set a breakpoint in the GeoRasterDataset::Open 
> method, and use the appropriate function of your debugger to display 
> the call stack. I'm sure you'll find plenty of online resources for 
> whatever debugger you use.
>
> Even
>
>
>
> -- 
> http://www.spatialys.com  <https://urldefense.com/v3/__http:/www.spatialys.com__;!!ACWV5N9M2RV99hQ!LdunXkjoOPFddx-jqp6_eWkk746TTCmRdAPcBj35cB2LBYcxMogtL6zHZEup8CJ2DN0T62IvlW7uYshKVkU9PsDwZbPE$>
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231130/ff9e85a9/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 32147 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231130/ff9e85a9/attachment-0001.png>

From jesse.r.meyer at nasa.gov  Thu Nov 30 12:58:22 2023
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Thu, 30 Nov 2023 20:58:22 +0000
Subject: [gdal-dev] [EXTERNAL] Re: How to determine which creation
 options are supported by a driver?
In-Reply-To: <AM0PR09MB321995AC937A07D2E7B1159FFD82A@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <577930CE-7028-4F7E-A98A-D79B9E8A954E@ndc.nasa.gov>
 <AM0PR09MB321995AC937A07D2E7B1159FFD82A@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <837824EB-0D2F-4332-B955-597A31EF971A@ndc.nasa.gov>

Thanks everyone, and congratulations on the 3.8 release.

Best,
Jesse

From: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
Date: Thursday, November 30, 2023 at 3:32 PM
To: "Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC]" <jesse.r.meyer at nasa.gov>, Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org>
Subject: [EXTERNAL] Re: How to determine which creation options are supported by a driver?

CAUTION: This email originated from outside of NASA.  Please take care when clicking links or opening attachments.  Use the "Report Message" button to report suspicious messages to the NASA SOC.


Hi,

Run ?gdalinfo ?format GTiff?.  For me it prints:
<Option name="COMPRESS" type="string-select">
    <Value>NONE</Value>
    <Value>LZW</Value>
    <Value>PACKBITS</Value>
    <Value>JPEG</Value>
    <Value>CCITTRLE</Value>
    <Value>CCITTFAX3</Value>
    <Value>CCITTFAX4</Value>
    <Value>DEFLATE</Value>
    <Value>ZSTD</Value>
  </Option>

So my GDAL build does not support LERC.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev
L?hetetty: torstai 30. marraskuuta 2023 22.19
Vastaanottaja: Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] How to determine which creation options are supported by a driver?

Hi,

I have gdal 3.8.1 installed via Brew which includes liblerc and zstd as part of their formulae, so I assumed I could use the creation options ?COMPRESS=LERC_ZSTD? and ?MAX_Z_ERROR=x? as documented on the GTIFF page when creating a new gtif image.

But when I do GDAL states:

?Warning 6: 'LERC_ZSTD' is an unexpected value for COMPRESS creation option of type string-select.
Warning 6: driver GTiff does not support creation option MAX_Z_ERROR?

So I am not sure if this is an issue with the driver itself or with the brew formula.  Please advise,

Thanks,
Jesse
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231130/9f565b1c/attachment.htm>

From raivo at r-systems.ee  Thu Nov 30 23:33:48 2023
From: raivo at r-systems.ee (Raivo Rebane)
Date: Fri, 1 Dec 2023 09:33:48 +0200
Subject: [gdal-dev] unsubcribe
Message-ID: <00f8596b-4a81-4dc9-b508-d1e91af32c7c@r-systems.ee>



