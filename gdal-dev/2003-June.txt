From alessandro_amici at telespazio.it  Tue Jun  3 12:02:10 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:51 2007
Subject: R: [Gdal-dev] [ANNOUNCE] gdal debian package at mentors.de bi
	 a n.ne t
Message-ID: <A183DF60AC72D5119B990002A5749CB30430BAAB@ROMADG-MAIL01>

[resend to the list]

Frank,

> I have applied the suggested changes with a few minor differences.
> The gdal_utilities.html was already created from
> core/gdal_utilities.dox
> (the old html file logic was left over), and the master version of
> gdalicon.png is in gdal/data already.

looks ok to me, i'll test it later. in the mean time here it goes the
'install data 0644' patch (+ install-docs for ogr)

--- gdal-1.1.8+030521.orig/alg/GNUmakefile
+++ gdal-1.1.8+030521/alg/GNUmakefile
@@ -21,7 +21,7 @@
 	$(CXX) -c $(GDAL_INCLUDE) $(CXXFLAGS) $*.cpp -o $*.o
 
 install:
-	for f in *.h ; do $(INSTALL) $$f $(INST_INCLUDE) ; done
+	for f in *.h ; do $(INSTALL_DATA) $$f $(INST_INCLUDE) ; done
 
 lib:	$(OBJ)
 	(cd .. ; $(MAKE) force-lib)
--- gdal-1.1.8+030521.orig/ogr/GNUmakefile
+++ gdal-1.1.8+030521/ogr/GNUmakefile
@@ -34,6 +34,7 @@
 	rm -f sdts2mi$(EXE) testepsg$(EXE)
 	rm -f test_ogrsf$(EXE) $(OGR_LIB)
 	(cd ogrsf_frmts; $(MAKE) clean)
+	rm -f html/*
 
 very-clean: clean
 	rm -rf html rtf
@@ -68,6 +69,11 @@
 	rm -rf html/*
 	doxygen
 
+install-docs:
+	$(INSTALL_DIR) $(INST_DOCS)/ogr
+	cp html/* $(INST_DOCS)/ogr/
+
+
 $(OGR_LIB):	$(OBJ)
 	$(AR) r $(OGR_LIB) $?
 	$(RANLIB) $(OGR_LIB)
@@ -119,13 +125,15 @@
 	$(INSTALL) ogr2ogr $(INST_BIN)
 	$(INSTALL) ogrinfo $(INST_BIN)
 	$(INSTALL) ogrtindex $(INST_BIN)
-	$(INSTALL) $(OGRFRMTS_LIB) $(INST_LIB)
+	$(INSTALL_DATA) $(OGRFRMTS_LIB) $(INST_LIB)
 else
 install-full:
 endif
 
 install:	$(OGR_LIB) install-full
-	for f in $(INST_H_FILES) ; do $(INSTALL) $$f $(INST_INCLUDE) ; done
-	$(INSTALL) $(OGR_LIB) $(INST_LIB)
+	for f in $(INST_H_FILES) ; \
+	    do $(INSTALL_DATA) $$f $(INST_INCLUDE) ; \
+	done
+	$(INSTALL_DATA) $(OGR_LIB) $(INST_LIB)
 
 
--- gdal-1.1.8+030521.orig/core/GNUmakefile
+++ gdal-1.1.8+030521/core/GNUmakefile
@@ -35,4 +35,4 @@
 	$(CXX) -c $(GDAL_INCLUDE) $(CXXFLAGS) $*.cpp -o $*.o
 
 install:
-	for f in *.h ; do $(INSTALL) $$f $(INST_INCLUDE) ; done
+	for f in *.h ; do $(INSTALL_DATA) $$f $(INST_INCLUDE) ; done
--- gdal-1.1.8+030521.orig/port/GNUmakefile
+++ gdal-1.1.8+030521/port/GNUmakefile
@@ -33,8 +33,8 @@
 	$(RANLIB) $(LIB)
 
 install:	$(LIB)
-	for f in *.h ; do $(INSTALL) $$f $(INST_INCLUDE) ; done
-	$(INSTALL) cpl.a $(INST_LIB)
+	for f in *.h ; do $(INSTALL_DATA) $$f $(INST_INCLUDE) ; done
+	$(INSTALL_DATA) cpl.a $(INST_LIB)
 
 xmlreformat:	xmlreformat.o $(LIB)
 	$(CXX) $(CXXFLAGS) xmlreformat.o $(LIB) -o xmlreformat
\ No newline at end of file
--- gdal-1.1.8+030521.orig/GNUmakefile
+++ gdal-1.1.8+030521/GNUmakefile
@@ -139,9 +139,9 @@
 ifneq ($(PYTHON),no)
 	(cd pymod; $(MAKE) install)
 endif
-	$(INSTALL) $(GDAL_LIB) $(INST_LIB)
+	$(INSTALL_DATA) $(GDAL_LIB) $(INST_LIB)
 ifeq ($(HAVE_LD_SHARED),yes)
-	$(INSTALL) $(GDAL_SLIB) $(INST_LIB)
+	$(INSTALL_DATA) $(GDAL_SLIB) $(INST_LIB)
 endif
-	for f in data/*.* ; do $(INSTALL) -m 0644 $$f $(INST_DATA) ; done
+	for f in data/*.* ; do $(INSTALL_DATA) $$f $(INST_DATA) ; done
 
--- gdal-1.1.8+030521.orig/GDALmake.opt.in
+++ gdal-1.1.8+030521/GDALmake.opt.in
@@ -1,6 +1,7 @@
 CC	=	@CC@
 CXX	=	@CXX@
 INSTALL = 	$(GDAL_ROOT)/install-sh -c
+INSTALL_DATA	= 	$(GDAL_ROOT)/install-sh -c -m 0644
 INSTALL_DIR = 	$(GDAL_ROOT)/install-sh -d
 
 #Flags to build optimized relese version


the original patch (done before you applied the docs changes) has been
heavily tested. the above incarnation is hand-modified and may have
problems on the topdir GNUmakefile.

the following python bit may be more controversal due to the use of
the command 'head' and to the fact that it is a bit fragile WRT
handling spaces (i.e. "#!/usr/bin/env  pyhton" is not recognized 
as a script!).

if you prefer i can change it to use 'awk' instead.
however it works as expected on the current sources. here it goes:

--- gdal-1.1.8+030521.orig/pymod/GNUmakefile
+++ gdal-1.1.8+030521/pymod/GNUmakefile
@@ -31,4 +31,12 @@
 
 install:	$(GDALMODULE)
 	$(INSTALL_DIR) $(INST_PYMOD)
-	for f in *.py $(GDALMODULE) ; do $(INSTALL) $$f $(INST_PYMOD) ; done
+	$(INSTALL_DATA) $(GDALMODULE) $(INST_PYMOD)
+	for f in *.py ; do \
+	    HEAD=`head -n 1 $$f`; \
+	    if [ "$$HEAD" = "#!/usr/bin/env python" ]; then \
+		$(INSTALL) $$f $(INST_PYMOD); \
+	    else \
+		$(INSTALL_DATA) $$f $(INST_PYMOD); \
+	    fi \
+	done


> Let me know if you have any problems with the code as committed now.

i noted that i end up doing most of the work at home, where i have 
normal connection, so if your proposal about cvs write access is still
valid, i think it will make things easier for both of us.
future plans are:
	- hack aclocal.m4 to set GDAL_SLIB_SONAME when using gnu binutils
	- configure option for building a standard sonamed shared library
	  (including file names), when using gnu binutils.

i played a bit with the gnu libtool, lately. it looks like a powerful 
tool, if it is really up to what it promises. what's your concerns
about it? wuold you consider the libtoolification of gdal a worthwile
project? (apart from a bit of initial makefile panic i don't expect
it to be too diffcult, but i might be wrong!)

cheers,
alessandro

From warmerdam at pobox.com  Tue Jun  3 13:00:24 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: R: [Gdal-dev] [ANNOUNCE] gdal debian package at mentors.de bi
  a n.ne t
In-Reply-To: <A183DF60AC72D5119B990002A5749CB30430BAAB@ROMADG-MAIL01>
References: <A183DF60AC72D5119B990002A5749CB30430BAAB@ROMADG-MAIL01>
Message-ID: <3EDCD428.7040302@pobox.com>

Amici Alessandro wrote:
> looks ok to me, i'll test it later. in the mean time here it goes the
> 'install data 0644' patch (+ install-docs for ogr)

Alessandro,

I have briefly reviewed your suggested changes and I think they are OK.

...

> i noted that i end up doing most of the work at home, where i have 
> normal connection, so if your proposal about cvs write access is still
> valid, i think it will make things easier for both of us.

I agree.  Account created.  Please commit and test your patches yourself
against CVS and notify the list when you are happy with them.

> future plans are:
> 	- hack aclocal.m4 to set GDAL_SLIB_SONAME when using gnu binutils
> 	- configure option for building a standard sonamed shared library
> 	  (including file names), when using gnu binutils.
> 
> i played a bit with the gnu libtool, lately. it looks like a powerful 
> tool, if it is really up to what it promises. what's your concerns
> about it? wuold you consider the libtoolification of gdal a worthwile
> project? (apart from a bit of initial makefile panic i don't expect
> it to be too diffcult, but i might be wrong!)

I dislike libtool because:
  o I can't figure out how to debug applications and libraries built with it
    from within Emacs' gud.  I don't know how to make gud invoke gdb with the
    libtool wrapper. So I have to fallback to using gdb from the commandline.

  o All the object gets built twice slowing the compile-link-debug cycle.

  o I frequently run into problems with libtool version problems, and have
    trouble resolving them.

But basically my dislike for libtool is that it does a huge amount of
complicated magic, and I am left not understanding what is going on or
how to fix it when things screw up.  I admire what the libtool maintainers
have accomplished, but it leaves me feeling profoundly out of control of my
own application.  The benefits do not outweigh this cost for me.

Note, I have only used libtool in a couple of projects (PROJ.4 and libgeotiff
I think).  In PROJ.4 I also use automake.  Some of my problems with automake
may also be negatively colouring my opinion of libtool.  I am sure many of
these problems could be resolved if I were to take the time to deeply
understand libtool and how it is supposed to be used, but after a couple of
tries I just don't feel like sucking up that pain anymore.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Tue Jun  3 15:51:29 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] NITF RPC Support
Message-ID: <3EDCFC41.4000202@pobox.com>

Folks,

I have implemented some degree of support for Rational Polynomials for
providing georeferencing information of a raster.  Currently the only format
from which this can be exploited is NITF (using the RPC00B tags).  The
GDALRPCInfo structure in gdal.h encapsulates the information we keep about
an RPC transformation.  The actual coefficients are currently returned as
metadata.

There is a stub transformer using the RPC information, but it is only
meaningful going from lat/long/height to Pixel/line currently. When the
reverse transform is requested a simple affine approximation is used.
The gdalwarptest program can exploit the RPC but since there is currently
no infrastructure to supply elevation data a zero elevation is always used
... clearly discarding much precision.

While I don't plan to exploit the RPC support fully in the GDAL warp API, or
in OpenEV for the time being, I am interested in adding support in GDAL for
other RPC coefficient formats, and with establishing a defacto standard open
format for RPC coefficients, and/or ways of embedding them into formats like
GeoTIFF.  Input on solutions other have used are of interest.

I would like to thank GeoTango (http://www.geotango.com) who have supported
this work.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From shimitz at usgs.gov  Wed Jun  4 14:19:48 2003
From: shimitz at usgs.gov (April Shimitz)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] build bug
Message-ID: <OF1C0B96DF.BE5723A4-ON86256D3B.0063FE8E@cr.usgs.gov>

Frank,

I've just updated our copy of GDAL from code checked out from the
remotesensing repository as of yesterday at 4:30pm. I just tried to run
configure, but got the following error:

configure[3736]: syntax error at line 3765 : `(' unexpected

I looked at the line, but cannot see anything wrong with it; do you see any
or have you had any trouble with the configure script?

print \"-L%s/lib/python%s/config -lpython%s.dll" % (sys.prefix,
sys.version[:3], sys.version[:3])'`"

--------------------------------------------------------------------------
April Shimitz

Science Applications International Corporation
Software Applications Engineer
Engineering Department
Voice: 605-594-2774
Fax: 605-594-6940
shimitz@usgs.gov
--------------------------------------------------------------------------



From paul-grass at stjohnspoint.co.uk  Wed Jun  4 15:29:08 2003
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] build bug
In-Reply-To: <OF1C0B96DF.BE5723A4-ON86256D3B.0063FE8E@cr.usgs.gov>
References: <OF1C0B96DF.BE5723A4-ON86256D3B.0063FE8E@cr.usgs.gov>
Message-ID: <Pine.LNX.4.53.0306042026220.10351@agrippa.ukshells.co.uk>

Hello

On Wed, 4 Jun 2003, April Shimitz wrote:

> configure[3736]: syntax error at line 3765 : `(' unexpected
>
> I looked at the line, but cannot see anything wrong with it; do you see any
> or have you had any trouble with the configure script?

Maybe one of the quotes in the middle needs to be escaped also:
>
> print \"-L%s/lib/python%s/config -lpython%s.dll\" % (sys.prefix, sys.version[:3], sys.version[:3])'`"
                                                 ^ Change here

(I also had this problem and this fixed it)

Paul Kelly


From warmerdam at pobox.com  Wed Jun  4 15:36:15 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] build bug
In-Reply-To: <OF1C0B96DF.BE5723A4-ON86256D3B.0063FE8E@cr.usgs.gov>
References: <OF1C0B96DF.BE5723A4-ON86256D3B.0063FE8E@cr.usgs.gov>
Message-ID: <3EDE4A2F.80704@pobox.com>

April Shimitz wrote:
> Frank,
> 
> I've just updated our copy of GDAL from code checked out from the
> remotesensing repository as of yesterday at 4:30pm. I just tried to run
> configure, but got the following error:
> 
> configure[3736]: syntax error at line 3765 : `(' unexpected
> 
> I looked at the line, but cannot see anything wrong with it; do you see any
> or have you had any trouble with the configure script?
> 
> print \"-L%s/lib/python%s/config -lpython%s.dll" % (sys.prefix,
> sys.version[:3], sys.version[:3])'`"

April,

Could you try escaping the quote after .dll?

Like: -lpython%s.dll\" %

Then rerun autoconf and see if configure works.  It works fine for me
despite this apparent bug ... not sure why.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Wed Jun  4 15:42:18 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] build bug
In-Reply-To: <Pine.LNX.4.53.0306042026220.10351@agrippa.ukshells.co.uk>
References: <OF1C0B96DF.BE5723A4-ON86256D3B.0063FE8E@cr.usgs.gov> <Pine.LNX.4.53.0306042026220.10351@agrippa.ukshells.co.uk>
Message-ID: <3EDE4B9A.5040502@pobox.com>

Paul Kelly wrote:
> Hello
> 
> On Wed, 4 Jun 2003, April Shimitz wrote:
> 
> 
>>configure[3736]: syntax error at line 3765 : `(' unexpected
>>
>>I looked at the line, but cannot see anything wrong with it; do you see any
>>or have you had any trouble with the configure script?
> 
> 
> Maybe one of the quotes in the middle needs to be escaped also:
> 
>>print \"-L%s/lib/python%s/config -lpython%s.dll\" % (sys.prefix, sys.version[:3], sys.version[:3])'`"
> 
>                                                  ^ Change here
> 
> (I also had this problem and this fixed it)

Paul / April,

I have committed this fix in CVS now.  Sorry .. I don't know why it works
for me.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From shimitz at usgs.gov  Wed Jun  4 15:46:15 2003
From: shimitz at usgs.gov (April Shimitz)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] build bug
Message-ID: <OF3F20B29A.09568406-ON86256D3B.006C5A55@cr.usgs.gov>

Thanks Paul, that fixed the problem. I see now that the other print
statements within the configure script escape the second quote as well, so
this one does appear to deviate from the standard.

>> configure[3736]: syntax error at line 3765 : `(' unexpected
>>
>> I looked at the line, but cannot see anything wrong with it; do you see
any
>> or have you had any trouble with the configure script?
>
>Maybe one of the quotes in the middle needs to be escaped also:
>>
>> print \"-L%s/lib/python%s/config -lpython%s.dll\" % (sys.prefix,
sys.version[:3], sys.version[:3])'`"
>                                                 ^ Change here
>
>(I also had this problem and this fixed it)
>
>Paul Kelly

April Shimitz



From s.perkins at lanl.gov  Wed Jun  4 16:22:37 2003
From: s.perkins at lanl.gov (Simon Perkins)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] build bug
In-Reply-To: <3EDE4B9A.5040502@pobox.com>
References: <OF1C0B96DF.BE5723A4-ON86256D3B.0063FE8E@cr.usgs.gov>
	 <Pine.LNX.4.53.0306042026220.10351@agrippa.ukshells.co.uk>
	 <3EDE4B9A.5040502@pobox.com>
Message-ID: <1054758157.22431.36.camel@afreet.lanl.gov>

On Wed, 2003-06-04 at 13:42, Frank Warmerdam wrote:

> >>configure[3736]: syntax error at line 3765 : `(' unexpected
> >>
> >>I looked at the line, but cannot see anything wrong with it; do you see any
> >>or have you had any trouble with the configure script?
> > 
> > 
> > Maybe one of the quotes in the middle needs to be escaped also:
> > 
> >>print \"-L%s/lib/python%s/config -lpython%s.dll\" % (sys.prefix, sys.version[:3], sys.version[:3])'`"
> > 
> >                                                  ^ Change here
> > 
> > (I also had this problem and this fixed it)

We had similar problems at one time caused by incompatibilities between
different version of autoconf.

Sy



From alessandro_amici at telespazio.it  Thu Jun  5 06:28:17 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] new docs and install-docs targets
Message-ID: <A183DF60AC72D5119B990002A5749CB3043364BA@ROMADG-MAIL01>

folks,

cvs now contains two new targets:
	$ make docs
	$ make install-docs
which build and install the doxygen documentation for gdal and ogr.
the full browsable docs are put into $prefix/doc/gdal and $prefix/doc/ogr.

cheers,
alessandro

PS: Frank, looks like the cvs account is working ok, thanks.

From schut at sarvision.com  Thu Jun  5 10:35:21 2003
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] gdal_translate segfaults at tiff->envi
Message-ID: <200306051635.21198.schut@sarvision.com>

Using latest cvs, gdal_translate segfaults if I try to convert a tiff file to 
envi. The conversion seems to go well (reaches 100%) but then it crashes, 
apparently before closing the resulting envi file, because it is not finished 
(not all data is written to disk, half of the last line is missing).

Here is the gdb backtrace:

(gdb) run -of ENVI ag_199903_cl3_PP.tif ag_199903_cl3_PP.bin
Starting program: /usr/local/bin/gdal_translate -of ENVI ag_199903_cl3_PP.tif 
ag_199903_cl3_PP.bin
Input file size is 7600, 2460
0...10...20...30...40...50...60...70...80...90...100 - done.

Program received signal SIGSEGV, Segmentation fault.
0x405494a1 in strstr () from /lib/i686/libc.so.6
(gdb) backtrace
#0  0x405494a1 in strstr () from /lib/i686/libc.so.6
#1  0x4027bb47 in typeinfo name for DOQ1Dataset () from 
/usr/local/lib/libgdal.1.1.so
#2  0x400c6668 in ENVIDataset::~ENVIDataset() () from 
/usr/local/lib/libgdal.1.1.so
#3  0x4014c817 in GDALClose () from /usr/local/lib/libgdal.1.1.so
#4  0x0804a3ab in main ()
#5  0x404ec082 in __libc_start_main () from /lib/i686/libc.so.6
(gdb) q

Regards,
Vincent Schut.
-- 
______________________________________
Vincent Schut
Sarvision B.V.
Wageningen, The Netherlands
www.sarvision.com

From schut at sarvision.com  Thu Jun  5 10:55:28 2003
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] gdal_translate segfaults at tiff->envi
In-Reply-To: <200306051635.21198.schut@sarvision.com>
References: <200306051635.21198.schut@sarvision.com>
Message-ID: <200306051655.28759.schut@sarvision.com>

Replying my own post...

The problem appeared to be that my tiff files were *not* geotiff files, and 
thus contained no projection info. This resulting in an empty pszProjName and 
thus a segfaulting strstr(pszProjName, "UTM") (line 363 in envidataset.cpp).
If we want gdal_translate to export projection-less envi files, I suggest 
changing line 363 in something like:
if ( ( pszProjName != NULL ) && ( strstr( pszProjName, "UTM" ) ) )
which resolved the problem.

If we don't want it to write envi files without proj info, I suppose it should 
generate an error message and quit. Maybe a 'bin' or 'raw' output format 
could be added then to have envi-like (simple binary) files?

Regards,
Vincent Schut.

On Thursday 05 June 2003 16:35, Vincent Schut wrote:
> Using latest cvs, gdal_translate segfaults if I try to convert a tiff file
> to envi. The conversion seems to go well (reaches 100%) but then it
> crashes, apparently before closing the resulting envi file, because it is
> not finished (not all data is written to disk, half of the last line is
> missing).
>
> Here is the gdb backtrace:
>
> (gdb) run -of ENVI ag_199903_cl3_PP.tif ag_199903_cl3_PP.bin
> Starting program: /usr/local/bin/gdal_translate -of ENVI
> ag_199903_cl3_PP.tif ag_199903_cl3_PP.bin
> Input file size is 7600, 2460
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
> Program received signal SIGSEGV, Segmentation fault.
> 0x405494a1 in strstr () from /lib/i686/libc.so.6
> (gdb) backtrace
> #0  0x405494a1 in strstr () from /lib/i686/libc.so.6
> #1  0x4027bb47 in typeinfo name for DOQ1Dataset () from
> /usr/local/lib/libgdal.1.1.so
> #2  0x400c6668 in ENVIDataset::~ENVIDataset() () from
> /usr/local/lib/libgdal.1.1.so
> #3  0x4014c817 in GDALClose () from /usr/local/lib/libgdal.1.1.so
> #4  0x0804a3ab in main ()
> #5  0x404ec082 in __libc_start_main () from /lib/i686/libc.so.6
> (gdb) q
>
> Regards,
> Vincent Schut.

-- 
______________________________________
Vincent Schut
Sarvision B.V.
Wageningen, The Netherlands
www.sarvision.com

From warmerdam at pobox.com  Thu Jun  5 11:01:02 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] gdal_translate segfaults at tiff->envi
In-Reply-To: <200306051635.21198.schut@sarvision.com>
References: <200306051635.21198.schut@sarvision.com>
Message-ID: <3EDF5B2E.2040502@pobox.com>

Vincent Schut wrote:
> Using latest cvs, gdal_translate segfaults if I try to convert a tiff file to 
> envi. The conversion seems to go well (reaches 100%) but then it crashes, 
> apparently before closing the resulting envi file, because it is not finished 
> (not all data is written to disk, half of the last line is missing).
> 
> Here is the gdb backtrace:
> 
> (gdb) run -of ENVI ag_199903_cl3_PP.tif ag_199903_cl3_PP.bin
> Starting program: /usr/local/bin/gdal_translate -of ENVI ag_199903_cl3_PP.tif 
> ag_199903_cl3_PP.bin
> Input file size is 7600, 2460
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> Program received signal SIGSEGV, Segmentation fault.
> 0x405494a1 in strstr () from /lib/i686/libc.so.6
> (gdb) backtrace
> #0  0x405494a1 in strstr () from /lib/i686/libc.so.6
> #1  0x4027bb47 in typeinfo name for DOQ1Dataset () from 
> /usr/local/lib/libgdal.1.1.so
> #2  0x400c6668 in ENVIDataset::~ENVIDataset() () from 
> /usr/local/lib/libgdal.1.1.so
> #3  0x4014c817 in GDALClose () from /usr/local/lib/libgdal.1.1.so
> #4  0x0804a3ab in main ()
> #5  0x404ec082 in __libc_start_main () from /lib/i686/libc.so.6
> (gdb) q

Vincent,

I don't have this problem.  the reference to DOQ1Dataset() in your trace
makes me wonder if there is some sort of build inconsistency.  I would suggest
doing a clean build of GDAL and trying again.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Thu Jun  5 11:09:48 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] gdal_translate segfaults at tiff->envi
In-Reply-To: <200306051655.28759.schut@sarvision.com>
References: <200306051635.21198.schut@sarvision.com> <200306051655.28759.schut@sarvision.com>
Message-ID: <3EDF5D3C.4050907@pobox.com>

Vincent Schut wrote:
> Replying my own post...
> 
> The problem appeared to be that my tiff files were *not* geotiff files, and 
> thus contained no projection info. This resulting in an empty pszProjName and 
> thus a segfaulting strstr(pszProjName, "UTM") (line 363 in envidataset.cpp).
> If we want gdal_translate to export projection-less envi files, I suggest 
> changing line 363 in something like:
> if ( ( pszProjName != NULL ) && ( strstr( pszProjName, "UTM" ) ) )
> which resolved the problem.
> 
> If we don't want it to write envi files without proj info, I suppose it should 
> generate an error message and quit. Maybe a 'bin' or 'raw' output format 
> could be added then to have envi-like (simple binary) files?

Vincent,

Thanks for tracking this down.

Andrey, could you look into a robust solution to this?


I see in the code you do this to check the projection name to see
if it contains UTM.  This is not a robust way of determining if a projection
is UTM.  Instead just call oSRS.GetUTMZone() and check that the result is
non-zero.  If so, then the coordinate system is UTM otherwise not.

	if ( strstr( pszProjName, "UTM" ) )
	{
	    iUTMZone = oSRS.GetUTMZone( &bNorth );

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dron at ak4719.spb.edu  Thu Jun  5 11:44:29 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] gdal_translate segfaults at tiff->envi
In-Reply-To: <3EDF5D3C.4050907@pobox.com>
References: <200306051635.21198.schut@sarvision.com> <200306051655.28759.schut@sarvision.com> <3EDF5D3C.4050907@pobox.com>
Message-ID: <20030605154429.GA17882@ak4719.spb.edu>

On Thu, Jun 05, 2003 at 11:09:48AM -0400, Frank Warmerdam wrote:
> Andrey, could you look into a robust solution to this?
> I see in the code you do this to check the projection name to see
> if it contains UTM.  This is not a robust way of determining if a projection
> is UTM.  Instead just call oSRS.GetUTMZone() and check that the result is
> non-zero.  If so, then the coordinate system is UTM otherwise not.
> 
> 	if ( strstr( pszProjName, "UTM" ) )
> 	{
> 	    iUTMZone = oSRS.GetUTMZone( &bNorth );

I have made suggested changes.

Vincent, does it solve your problem?

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From schut at sarvision.com  Thu Jun  5 12:27:28 2003
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] gdal_translate segfaults at tiff->envi
In-Reply-To: <20030605154429.GA17882@ak4719.spb.edu>
References: <200306051635.21198.schut@sarvision.com> <3EDF5D3C.4050907@pobox.com> <20030605154429.GA17882@ak4719.spb.edu>
Message-ID: <200306051827.28110.schut@sarvision.com>

On Thursday 05 June 2003 17:44, Andrey Kiselev wrote:

> I have made suggested changes.
>
> Vincent, does it solve your problem?

It does. Thanks.

Vincent.

-- 
______________________________________
Vincent Schut
Sarvision B.V.
Wageningen, The Netherlands
www.sarvision.com

From nhv at cape.com  Sun Jun  8 12:39:10 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] heads up - CVS hiccup
In-Reply-To: <3EDCFC41.4000202@pobox.com>
Message-ID: <EKEJIKAILPONGGENMBGAMELDDKAA.nhv@cape.com>

a quick heads up

doing a 
% cvs up -Pd  

resulted in my client trying to download the entire osrs tree
into the gdal directory

When I noticed this I stopped the client and removed
D/osrs////
from $GDAL_ROOT/CVS/Entries 
and a subsequent cvs up did just the GDAL update

How that got there I have no idea but .....

Thought I should pass this along just in case.. 

Cheers

Norman

From blazek at itc.it  Tue Jun 10 05:13:19 2003
From: blazek at itc.it (Radim Blazek)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Geometry Collection
Message-ID: <200306100913.h5A9DJ428410@janacek.itc.it.>

Can Geometry Collection (GC) in OGR contain other GC, i.e. tree of GC without any
limits on number of levels? 

Is it possible in SFS? It seems, that it is possible [1].

Does it make any sense to have GC of GC tree? I don't think so. 
Are there any applications where such trees are useful? 
Does any SW producing such trees exist?

BTW: Collect() in PostGIS returns just one simple GC containing basic geometries
instead of GC of GC tree. 

Radim

[1] "2.1.2 Geometry Collection 
A GeometryCollection is a geometry that is a collection of 1 or more geometries. 
GeometryCollection places no other constraints on its elements. 
Subclasses of GeometryCollection may restrict membership based on dimension 
and may also place other constraints on the degree of spatial overlap between elements."






From dron at ak4719.spb.edu  Tue Jun 10 05:47:42 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] [ANNOUNCE]: MODIS Level 3 products now supported
Message-ID: <20030610094742.GA25819@ak4719.spb.edu>

Hi, folks,

HDF4 driver now supports MODIS Level 3 global data products. Coordinate
system information and geotransformation matrix properly extracted, so
these datasets may be used directly as an input for `gdalwarptest' tool.
There are a variety different MODIS L3 products and I'm believe all of
them are supported now. By the way, please, report any experienced
troubles with such data. `gdalinfo' output should be enough for me to
track the problem.

					Best regards,
					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From nhv at cape.com  Tue Jun 10 08:05:56 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] [ANNOUNCE]: MODIS Level 3 products now supported
In-Reply-To: <20030610094742.GA25819@ak4719.spb.edu>
Message-ID: <EKEJIKAILPONGGENMBGAAEPNDKAA.nhv@cape.com>

Hi Andrey,

Good show :-)

Will let you know if I encounter any problems.

Any plans regarding MODIS Level 2 products ?

Cheers

Norman


> -----Original Message-----
> From: gdal-dev-admin@remotesensing.org
> [mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Andrey Kiselev
> Sent: Tuesday, June 10, 2003 5:48 AM
> To: gdal-dev@remotesensing.org
> Subject: [Gdal-dev] [ANNOUNCE]: MODIS Level 3 products now supported
> 
> 
> Hi, folks,
> 
> HDF4 driver now supports MODIS Level 3 global data products. Coordinate
> system information and geotransformation matrix properly extracted, so
> these datasets may be used directly as an input for `gdalwarptest' tool.
> There are a variety different MODIS L3 products and I'm believe all of
> them are supported now. By the way, please, report any experienced
> troubles with such data. `gdalinfo' output should be enough for me to
> track the problem.
> 
> 					Best regards,
> 					Andrey
> 
> -- 
> Andrey V. Kiselev
> Home phone:  +7 812 5274898  ICQ# 26871517
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev
> 

From dron at ak4719.spb.edu  Tue Jun 10 08:31:51 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] [ANNOUNCE]: MODIS Level 3 products now supported
In-Reply-To: <EKEJIKAILPONGGENMBGAAEPNDKAA.nhv@cape.com>
References: <20030610094742.GA25819@ak4719.spb.edu> <EKEJIKAILPONGGENMBGAAEPNDKAA.nhv@cape.com>
Message-ID: <20030610123151.GA15064@ak4719.spb.edu>

On Tue, Jun 10, 2003 at 08:05:56AM -0400, Norman Vine wrote:
> Any plans regarding MODIS Level 2 products ?

Yes, in long term I have plans to support as much actually used data
types, as possible. MODIS and ASTER are the most wanted ones,
of course.


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From warmerdam at pobox.com  Tue Jun 10 10:22:21 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Geometry Collection
In-Reply-To: <200306100913.h5A9DJ428410@janacek.itc.it.>
References: <200306100913.h5A9DJ428410@janacek.itc.it.>
Message-ID: <3EE5E99D.4020704@pobox.com>

Radim Blazek wrote:
> Can Geometry Collection (GC) in OGR contain other GC, i.e. tree of GC without any
> limits on number of levels? 

Radim,

Yes, I believe OGRGeometryCollection can hold other geometry collections.

> Is it possible in SFS? It seems, that it is possible [1].

I believe so.

> Does it make any sense to have GC of GC tree? I don't think so. 
> Are there any applications where such trees are useful? 
> Does any SW producing such trees exist?

I can imagine some situations in which it would be useful, but I have certainly
never run into such a situation yet in "real life".

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dron at ak4719.spb.edu  Tue Jun 10 10:45:35 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] [ANNOUNCE]: MODIS Level 3 products now supported
In-Reply-To: <EKEJIKAILPONGGENMBGAAEPNDKAA.nhv@cape.com>
References: <20030610094742.GA25819@ak4719.spb.edu> <EKEJIKAILPONGGENMBGAAEPNDKAA.nhv@cape.com>
Message-ID: <20030610144535.GA7457@ak4719.spb.edu>

Norman,

> Any plans regarding MODIS Level 2 products ?

Just reading the ``MODIS Ocean Products User's Guide'': 

   Geolocation information for each pixel is contained in the MODIS             
   Geolocation product (MOD03) and also in the MODIS Ocean QC file (MODOCQC).   
   Thus, users needing to create Level 2 images mapped to a projection, or      
   needing latitude-longitude locations of pixels, should order these files     
   additionally.

I think there is nothing to do with Level 2 datasets in GDAL driver,
because such complex operations with several data sources are in scope
of high level tools on top of the GDAL. The only thing I can do is to
detect this particular data type and place appropriate hint in
SUBDATASET_n_NAME field (already done, will be commited soon).


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From alexamici at tiscali.it  Tue Jun 10 18:40:55 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] [announce] new debian package released
Message-ID: <200306110040.55629.alexamici@tiscali.it>

folks,

i just uploaded a new gdal debian package at: 
http://mentors.debian.net/debian/dists/unstable/main/binary-i386/gdal/

in the new deb you can find:

  * New cvs snapshot with improved handling of html documentation (and much 
	more)
  * Split libgdal-doc out of libgdal1-dev.
  * Add html documentation for ogr.
  * Add postgresql support.
  * Recommend proj (accessed via dlopen) (thanks to Andrey)

cheers,
alessandro


From packalen at cs.joensuu.fi  Wed Jun 11 13:25:02 2003
From: packalen at cs.joensuu.fi (Petteri Packalen)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] GDAL and Visual Studio .NET 2003
Message-ID: <Pine.GSO.4.50.0306112023340.29579-100000@cs>

Hi all,

Has anybody any experience in using GDAL under Visual Studio .NET 2003?

Regards,
Petteri

**********************************************************************
Petteri Packalen
University of Joensuu
Faculty of Forestry
P.O. Box 111
80101 Joensuu
Finland
E-mail: packalen@cs.joensuu.fi
**********************************************************************

From garvank at optech.on.ca  Wed Jun 11 13:54:09 2003
From: garvank at optech.on.ca (Garvan Keeley)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] GDAL and Visual Studio .NET 2003
Message-ID: <11E3973D1E78D311A5B400508B4A70CE6A9FCB@COMSRVR>

Hi,
experience in what way? Building GDAL through Visual Studio, or linking a
Visual Studio project to the GDAL library?
I am using GDAL in the latter capacity with VS .Net.

=======================
Garvan Keeley
Programmer/Analyst
Optech Incorporated
100 Wildcat Road
Toronto, Ontario, Canada, M3J 2Z9
Web: http://www.optech.on.ca
Tel: 416.661.5904 x441 

> -----Original Message-----
> From: Petteri Packalen [mailto:packalen@cs.joensuu.fi] 
> Sent: Wednesday, June 11, 2003 1:25 PM
> To: gdal-dev@remotesensing.org
> Subject: [Gdal-dev] GDAL and Visual Studio .NET 2003
> 
> 
> Hi all,
> 
> Has anybody any experience in using GDAL under Visual Studio 
> .NET 2003?
> 
> Regards,
> Petteri
> 
> 

From warmerdam at pobox.com  Wed Jun 11 14:11:09 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] GDAL and Visual Studio .NET 2003
In-Reply-To: <Pine.GSO.4.50.0306112023340.29579-100000@cs>
References: <Pine.GSO.4.50.0306112023340.29579-100000@cs>
Message-ID: <3EE770BD.2030201@pobox.com>

Petteri Packalen wrote:
> Hi all,
> 
> Has anybody any experience in using GDAL under Visual Studio .NET 2003?
> 
> Regards,
> Petteri

Petteri,

It builds fine with Visual Studio .NET 2002, I can't imagine there would be
many problems with 2003.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dron at ak4719.spb.edu  Thu Jun 12 11:23:01 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] SeaWiFS Level 3 Standard Mapped Image Products
Message-ID: <20030612152301.GA23208@ak4719.spb.edu>

Hi, folks,

There is support for SeaWiFS Level 3 Standard Mapped Image Products in
GDAL now. These datasets are very similar to MODIS Level 3 ones, so it
was easy to extend the driver.

SeaWiFS is not very popular these days after `Aqua' launching, but
somebody may be interested in this anyway, so I make a special announce
about it.

Also I have improved MODIS Level 2 detection. Really verbosive product
description will be displayed in SUBDATASET_n_DESC field now (e.g.,
instead of old `[2030x1354] sst (16-bit unsigned integer)' now will be
displayed `[2030x1354] sst: Sea surface temperature, daytime, 11 micron
(16-bit unsigned integer)'). 

					Regards,
					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From packalen at cs.joensuu.fi  Thu Jun 12 12:35:13 2003
From: packalen at cs.joensuu.fi (Petteri Packalen)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] RE: GDAL and Visual Studio .NET 2003
In-Reply-To: <20030612160001.1157.13390.Mailman@yoda.imagelinks.com>
References: <20030612160001.1157.13390.Mailman@yoda.imagelinks.com>
Message-ID: <Pine.GSO.4.50.0306121908260.3398-100000@cs>

Garvan, Frank,

> experience in what way? Building GDAL through Visual Studio, or linking a
> Visual Studio project to the GDAL library?

The whole package, building and linking.

> I am using GDAL in the latter capacity with VS .Net.
>
> =======================
> Garvan Keeley
> Programmer/Analyst
> Optech Incorporated
> 100 Wildcat Road
> Toronto, Ontario, Canada, M3J 2Z9
> Web: http://www.optech.on.ca
> Tel: 416.661.5904 x441

> > Has anybody any experience in using GDAL under Visual Studio .NET 2003?
> >
> > Regards,
> > Petteri
>
> Petteri,
>
> It builds fine with Visual Studio .NET 2002, I can't imagine there would be
> many problems with 2003.

OK - I will install VS .NET 2003 next week. I will
let you know if I face any problem with building.

>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent

From rogerjames99 at btinternet.com  Thu Jun 12 13:31:34 2003
From: rogerjames99 at btinternet.com (Roger James)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Gdal and proj uysing different versions of the windows runtime library
Message-ID: <000001c33108$7dde83e0$fe0aa8c0@lancaster.beardandsandals.co.uk>

Frank,

 

You recently changed the debug build of gdal to use the multi threaded
dll version of the ms runtime. This clashes with the build of proj which
uses the static linked library.

 

I have changed the gdal vc makefiles and nmake.opt to link with the
relevant versions of the dll runtime and to build versions of the
librabry with a d added to the filename in debug mode. Also matching
changes to the proj makefile, and a little conditional change in ogr to
load the debug or non debug version of proj accordingly.

 

Are you interested in these changes? If so I will zip them up and submit
them.

 

In general if anyone else gets problems with heap corruption on windows
platforms when doing transforms check that compatible runtimes are being
used.

 

Roger

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030612/6eb4432c/attachment.html
From gbuckmaster at cox.net  Fri Jun 13 02:29:27 2003
From: gbuckmaster at cox.net (Gerald Buckmaster)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Fwd: Re: Support for ASTER AST_07 products
Message-ID: <200306122329.27276.gbuckmaster@cox.net>

Hmm...maybe I should have been subscribed sooner...

Anyone else having trouble with ASTER Level 2 Surface Reflectance products?

----------  Forwarded Message  ----------

Subject: Re: Support for ASTER AST_07 products
Date: Thursday 12 June 2003 07:43 pm
From: Gerald Buckmaster <gbuckmaster@cox.net>
To: openev-discuss@lists.sourceforge.net
Cc: Andrey Kiselev <dron@ak4719.spb.edu>

Andrey,

First, I am not a C/C++ programmer, nor very smart about compiling code so
mostly stabbing in the dark here.

After reviewing hdf4dataset.h, hdf4imagedataset.cpp, and hdf4dataset.cpp,
it appears to me AST_07 ASTER Level 2 Surface Reflectance products are
specifically NOT supported yet, unlike ASTER_L1A, ASTER_L1B, and others. It
also appears one reason I am able to open and extract bands is because the
poDS->iDataType and pszDataType is being handled as  "UNKNOWN".  I would be
hard-pressed to extract bands using gdal_translate without knowing the
SubdatasetTypes were "UNKNOWN".

I double-checked my gdalinfo against L1B and L1A and GeoTIFFs produced with
gdal_translate from HDF.  No problems...just faulting on AST_07 products.
gdal_translate also does not appear to be extracting the projection or
coordinates from the AST_07 metadata.

I've included a vbscript that I and others wrote to handle various forms of
ASTER, including AST_07.  Don't know if it will help, but it may give you
some additional ideas.  plaster was really just a cli frontend to other
executables (in Windoze) to ease the extraction, georeferencing and merging
of ASTER image bands from hdf files.  If I remember right, AST_07 bandnames
are Band1, Band2, Band3N, etc.

HTH and thanks for all your hard work.

Gerald

On Thursday 12 June 2003 08:54 am, Gerald Buckmaster wrote:
> Andrey,
>
> I uploaded the gdalinfo output for a ASTER L1B dataset that was acting
> strangely.  it is at ftp.remotesensing.org/incoming/aster-l1b.txt
>
> I am actually using the nightly build from the 10th of June.
>
> The bzip2 brought the AST_07 dataset that includes SWIR and TIR bands down
> to 13mb.  Much better than 78mb!  Hope this doesn't clog your pipes too
> long. Unfortunately, I'm not technically skilled enough to extract only the
> TIR bands into a separate HDF...and that would probably negate
> troubleshooting anyway.
>
> You can find the AST_07 also at ftp.remotesensing.org/incoming/
>
> Thanks for the quick response!
>
> Gerald
>
> On Thursday 12 June 2003 07:14 am, you wrote:
> > Gerald,
> >
> > On Thu, Jun 12, 2003 at 06:39:49AM -0700, Gerald Buckmaster wrote:
> > > I noticed gdal_translate georeferences ASTER L1B HDF-EOS products very
> > > nicely, though there tends to be a initial display bug in
> > > OpenEV...something to do with what corner to start counting pixels
> > > from.
> >
> > It is very strange and should not happen. OpenEV works good for me, but
> > it is possible there is a bug in HDF4 code. Could you show me gdalinfo
> > output for those ASTER L1B dataset?
> >
> > > My real need, and I believe most public consumers of ASTER need, is the
> > > ability to do the same with ASTER Level 2 surface reflectance data set
> > > (AST07) products...gdal_translate works, but without interrogating the
> > > metadata and georeferencing. In fact, gdalinfo
> > > gives me a Segmentation fault runtime on AST07 HDF files.
> >
> > Very bad. What GDAL version do you have?
> >
> > Regarding AST_07 datasets: it will be good if you will upload sample
> > file into incoming. Try to compress it with bzip2, it should get some
> > effect. 90m dataset will be enough for me, I shall manage to order other
> > samples myself.
> >
> > 					Regards,
> > 					Andrey

-------------------------------------------------------


-------------- next part --------------
' PLASTER.VBS
' VBScript to process ASTER Satellite Imagery
' Written by Gerald Buckmaster, www.imagery-analyst.com
' Version 1.6 - 08 April 2002

' Version History

' v1.8 - 20 Aug 02 -	Recoded to handle AST_07 SurfaceReflectance product
' v1.6 - 08 Apr 02 -    Loose code optimized by Emilio, merged with previous enhancements of v1.5.2
'                              Fixed 'projection initialization failure by adding +ellps=clrk66 to proj.exe commandline
'                              Eliminated need to for ensuring batchproj.bat is included; script writes, executes, and deletes batchproj.bat

' v1.5.2 - 06 Apr 02 - Fixed script to determine processing level via coremetadata.0 vs. filename
'                              Combined Subs Geocode_VNIR_Bands(), Geocode_SWIR_Bands(), Geocode_TIR_Bands()
'                              into 1 subroutine called Geocode_Bands().
'                              Re-wrote subroutine Geocode_Image(BandNumber, SENSOR) to handle any band.
'                              Added Remove_A_File() to clean out the non-georeferenced tiff files.
'                              Added Command Line Argument processing - no longer need to edit this script

' v1.5.1 - 02 Apr 02 - Combined improvements below by G. Nelson and E. Mayorga

' v1.5 - 01 Apr 02 - Modified by Gerald Nelson
'              Moved user-editable constants closer to top of script, added comments and a
'              and a detailed seperate readmefirst.txt file.

' v1.4 - 15 Feb 02 - Added support for processing L1B Expedited Product. Fixed "double-negative"
'                    MAPORIENTATIONANGLE bug.

' 1.3.1- 06 Feb 02 - Modified by Emilio Mayorga
'              Added extraction of TIR bands. Made some minor changes also; mostly cosmetic,
'              but also fixed one apparent mistake with the name of the subroutine
'              Render_GeoTiff_CartesianType_PointFile

' v1.3 - 16 Jan 02 - Adjusted PullMapOrientation() to use a default -10 degrees in case the
'                    Metadata keyword MAPORIENTATIONANGLE or the seemingly rarer SCENEORIENTATIONANGLE 
'                    is not found.  -10 degrees seems to be a fair average orientation angle.

' v1.2 - 15 Jan 02 - Able to extract map orientation from Level-1B and conduct transformation
'                    This rotates the image north up.  We are now able to geocode in either
'                    geographic lat-longs or utm cartesian coordinates 

' v1.1 - 08 Jan 02 - Modified to process level 2 ASTER hdf files: AST_06V and AST_06S

' v1.0 - 06 Jan 02 - Initial working release of PLASTER.VBS works with level 1b ASTER hdf files

' This script accomplishes the following:
' Examines metadata from ASTER HDF files.
' Determines Level of Processing and Band Availability.
' Extracts and writes geographic coordinates to an ASCII file.
' Extracts map orientation angle.
' Provides a choice between rendering cartesian or lat-long coordinate system
' Calculates hemisphere and UTM zone.
' Converts the geographic coordinates to cartesian coordinates.
' Renders a geotiff modeltransformation definition file.
' Renders a geotiff four-corner tiepoint definition file.
' Extracts individual image bands to TIFF format.
' Geocodes each TIFF with definition file.

' This script assumes the following files are in your system with appropriate paths:
'   vbscript file         - this file

'   cscript.exe         - Windows Scripting Host Command Line Interface
'                             Copyright (C) Microsoft Corporation 1996-2001.

'   hdp.exe              - a HDF command-line utility
'                        ftp://ftp.ncsa.uiuc.edu/HDF/HDF/HDF_Current/zip/utilities/hdp.exe
'                        Copyright 1988-1999 The Board of Trustees of the University of Illinois

'   proj.exe             - a geographic projection command-line utility
'                        ftp://ftp.remotesensing.org/pub/proj/from_kai/DOS-PJ433.zip

'   hdfbrowse.exe      - a HDF command-line utility that extracts tif images from HDF
'                        http://www.scanex.ru/downloads/eostools/hdfbrowse.zip
'                        Copyright (C) 2001 R&D center ScanEx.

'   geotifcp.exe       - a utility to convert TIF to GeoTIFF
'                        http://www.possys.com/utilities.html

'   gdal_merge.py      - python script by Frank Warmerdam packaged with OpenEV
'                        Needed only if you want a single multiband GeoTiff file by not using
'                        the command line flag -s
'                        http://openev.sourceforge.net/

'   The OpenEV version must be 1.41+ in order to ensure the correct gdal_merge.py is present.

Const OPENEV_HOME = "C:\openev_fw\"
Const ForReading = 1, ForWriting = 2, ForAppending = 3
Const pi = 3.1415926535897932
Const DegToMeters = 111111.111     ' meters -> degrees conversion factor
Const VNIR = 0, SWIR = 1, TIR = 2  ' Band Group Indices
Const BandGroupTot = 3
Const BandTot = 15

dim strOutputFile
dim strMetaFile
dim strShellCmd
dim UTMZone
dim Hemi_1
dim Hemi_2
Dim cartesian_file
Dim Cart_Coord_UL
Dim Cart_Coord_UR
Dim Cart_Coord_LL
Dim Cart_Coord_LR
Dim proj_def_file
Dim PIX_COORDS (3)
Dim PIX_RES
Dim Geog_Coord_UL
Dim Geog_Coord_UR
Dim Geog_Coord_LL
Dim Geog_Coord_LR
Dim strCoordFile
Dim SDSString
Dim MapRotRads
Dim Processing_Level
Dim BandGroupIdx, BandIdx
Dim PixResScl, GeoTiffCoordPar
Dim bBandGroupProcess(3)
Dim BandGroupName
Dim BandGroupRows, BandGroupCols
Dim BandGroupBandStart, BandGroupBandEnd
Dim PixRES_meters
Dim BandName
Dim BaseFilePath

Dim Rendered_File_Count
Dim GDAL_Input(14)
Dim strHDFname
Dim drvPath
Dim drvDestPath
Dim GeographicType
Dim ModelTransformation
Dim MergeBands 
Dim objArgs
Dim TmpFileCnt
Dim TempFileList(10)
Dim BNDFLAG
Dim BSTPROJ

' ASTER Sensor and Dataset defaults
BandGroupName = Array("VNIR","SWIR","TIR")
BandGroupRows = Array(4200,2100,700)
BandGroupCols = Array(4980,2490,830)
PixRES_meters = Array(15,30,90)
BandGroupBandStart = Array(0,4,10)
BandGroupBandEnd   = Array(2,9,14)
BandName = Array("1","2","3N","3B","4","5","6","7","8","9","10","11","12","13","14")
TmpFileCnt = 0

' PROCESS COMMAND-LINE ARGUMENTS
' cscript plaster16.vbs -fhdfname -iinputpath -ooutputpath [-g] [-t] [-s] [-evo|eso|eto|evs|est|etv]
'     0   1              2         3           4             5    6    7    8
' -f (name of hdf file)
' -i (directory of input hdf file)
' -o (directory for output files)
' -g (use geographic coordinate system vs. UTM cartesian system - the assumed default)
' -t (use ModelTiepointTag vs. ModelTransformationTag - the assumed default)
' -s (separate bands extraction (no merge) vs. merge of bands selected for processing - the assumed default)

' All bands are extracted if flags below are not utilized
' -evo (extract VNIR only)*
' -eso (extract SWIR only)
' -eto (extract TIR only)
' -evs (extract VNIR & SWIR)*
' -est (extract SWIR & TIR)
' -etv (extract TIR & VNIR)*

' * Band 3B is not processed

' Default Settings
GeographicType = False ' use optional -g flag to use geographic coordinate system
ModelTransformation = True ' use optional -t flag to use ModelTiePointTag
MergeBands = True ' use optional -s flag to prevent merging of extracted bands into a single GeoTIFF

' use optional flags -evo, -eso, -eto, -evs, -est, -etv to control which bands are extracted
BNDFLAG = "VST"
BSTPROJ = "VNIR"

bBandGroupProcess(VNIR) = True
bBandGroupProcess(SWIR) = True
bBandGroupProcess(TIR)  = True


'Parse out the Command Line Arguments

Set objArgs = Wscript.Arguments

For I = 0 to objArgs.Count - 1

	Select Case left(objArgs.Item(I),2)
		Case "-f"
			strHDFname = mid(objArgs.Item(I),3)
		Case "-i"
			drvPath = mid(objArgs.Item(I),3)
			If right(drvPath,1) <> "\" then drvPath = drvPath & "\"
		Case "-o"
			drvDestPath = mid(objArgs.Item(I),3)
			If right(drvDestPath,1) <> "\" then drvDestPath = drvDestPath & "\"
		Case "-g"
			GeographicType = True
		Case "-t"
			ModelTransformation = False
		Case "-s"
			MergeBands = False
		Case "-e"
			Select Case left(objArgs.Item(I),4)
				Case "-evo"
					BNDFLAG = "V"
					BSTPROJ = "VNIR"
					bBandGroupProcess(SWIR) = False
					bBandGroupProcess(TIR)  = False
				Case "-eso"
					BNDFLAG = "S"
					BSTPROJ = "SWIR"
					bBandGroupProcess(VNIR) = False
					bBandGroupProcess(TIR)  = False
				Case "-eto"
					BNDFLAG = "T"
					BSTPROJ = "TIR"
					bBandGroupProcess(VNIR) = False
					bBandGroupProcess(SWIR)  = False
				Case "-evs"
					BNDFLAG = "VS"
					BSTPROJ = "VNIR"
					bBandGroupProcess(TIR) = False
				Case "-est"
					BNDFLAG = "ST"
					BSTPROJ = "SWIR"
					bBandGroupProcess(VNIR) = False
				Case "-etv"
					BNDFLAG = "VT"
					BSTPROJ = "VNIR"
					bBandGroupProcess(SWIR) = False
			End Select
	End Select

Next

' Check for missing mandatory arguments
If strHDFname ="" Then
	Wscript.Echo "Missing the -f argument...you need to provide the name of the HDF file." 
	WriteCommandSyntax
	Wscript.Quit
End If

If drvPath ="" Then
	Wscript.Echo "Missing the -i argument...you need to provide the entire path to the HDF file." 
	WriteCommandSyntax
	Wscript.Quit
End If

If drvDestPath ="" Then
	Wscript.Echo "Missing the -o argument...you need to an output path for the resulting GeoTIFF files." 
	WriteCommandSyntax
	Wscript.Quit
End If


Rendered_File_Count = 0 ' initialize the count

BaseFilePath = drvDestPath & strHDFname & "_"

' Determine Level of Processing represented in HDF file
strMeta = "coremetadata.0"
Extract_MetaData (strMeta)
Processing_Level = PullShortName (strMetaFile, "SHORTNAME")

' No matter what bands the user asked for, some bands will not be available
' At the same time, we cannot dictate what bands the user wants processed
' This filter could still be improved by parsing metadata for actual bands present

Select Case Processing_Level

	Case "AST_07"	'Added 2002-08-19 for processing Surface Reflectance Product

		'Situation: AST_07 product arrives in two hdf files, separating
		'			VNIR and SWIR, but AST_07 is used in each file.

		strMeta = "productmetadata.0"
		Extract_MetaData (strMeta)
		Processed_Bands = PullShortName (strMetaFile, "PROCESSEDBANDS")
		if Processed_Bands = "XXXXXXXX040506070809XXXXXXXXXX" then
				BSTPROJ = "SWIR"
				bBandGroupProcess(VNIR) = False
				bBandGroupProcess(TIR)  = False
		end if
		if Processed_Bands = "01023NXXXXXXXXXXXXXXXXXXXXXXXX" then
				BSTPROJ = "VNIR"
				bBandGroupProcess(SWIR) = False
				bBandGroupProcess(TIR)  = False
		end if

	Case "AST_06V"
		BSTPROJ = "VNIR"
		bBandGroupProcess(SWIR) = False
		bBandGroupProcess(TIR)  = False

	Case "AST_06S"
		BSTPROJ = "SWIR"
		bBandGroupProcess(VNIR) = False
		bBandGroupProcess(TIR)  = False

	Case "ASTL1B"
		' Every band could actually be available for processing 
End Select


' Extract coordinates from HDF file - writes a text file for further processing
	strMeta = "productmetadata.0"
	Extract_MetaData (strMeta)


' Find and stores geographic latitudes and longitudes to arrays
Read_Geographic_Coords Geog_Coord_UL, "UPPERLEFT"
Read_Geographic_Coords Geog_Coord_UR, "UPPERRIGHT"
Read_Geographic_Coords Geog_Coord_LL, "LOWERLEFT"
Read_Geographic_Coords Geog_Coord_LR, "LOWERRIGHT"


' Write Latitude-Longitude coordinates to file
strCoordFile = BaseFilePath & "coords.txt"
WriteCoordFile strCoordFile

' Pull Map Orientation data & determine proper radian
MapRotRads = (pi/180) * PullMapOrientation(strMetaFile)


If GeographicType = True Then 'user wants images with geographic coordinate system (latitude longitude pairs)
  PixResScl       = 1 / DegToMeters
  GeoTiffCoordPar = 0
Else ' User wants images projected to utm cartesians (eastings & northings)
  PixResScl       = 1
  GeoTiffCoordPar = 1

	If Trim(Geog_Coord_UL(1)) > 0 then ' Determine hemisphere of image location - either north or south
		Hemi_1 = "north"
		Hemi_2 = "N"
	Else 
		Hemi_1 = "south"
		Hemi_2 = "S"
	End if

  ' Convert Latitude-Longitude pairs to UTM Cartesians
	UTMZone = Calculate_UTM_Zone(Geog_Coord_LL(0), Geog_Coord_UR(0))
	Convert_LatLon_2_Cartesians Hemi_1, UTMZone, strCoordFile ' added missing Hemi_1 08 April 02
	Read_Cartesian_Coords
End If


'Create temporary GeoTIFF projection definition file for each Band Group requested
If ModelTransformation = True Then   ' We are using rotation factor
 For BandGroupIdx = 0 To BandGroupTot - 1
   If bBandGroupProcess(BandGroupIdx) = True Then
     PIX_COORDS(0) = PixResScl * PixRES_meters(BandGroupIdx) * sin(MapRotRads)
     PIX_RES       = PixResScl * PixRES_meters(BandGroupIdx) * cos(MapRotRads)

     Render_GeoTiff_File BandGroupName(BandGroupIdx)
   End If
 Next
Else                                 ' We are using tiepoints for corner coordinates
 For BandGroupIdx = 0 To BandGroupTot - 1
   If bBandGroupProcess(BandGroupIdx) = True Then
     PIX_COORDS(0) = GeoTiffCoordPar & " " & GeoTiffCoordPar & " 0"
     PIX_COORDS(1) = BandGroupCols(BandGroupIdx) & " " & GeoTiffCoordPar & " 0"
     PIX_COORDS(2) = GeoTiffCoordPar & " -" & BandGroupRows(BandGroupIdx) & " 0"
     PIX_COORDS(3) = BandGroupCols(BandGroupIdx) & " -" & BandGroupRows(BandGroupIdx) & " 0"
     PIX_RES       = PixResScl * PixRES_meters(BandGroupIdx)

     Render_GeoTiff_File BandGroupName(BandGroupIdx)
   End If
 Next
End If


' Here's the magic, courtesy of hdfbrowse and geotifcp

For BandGroupIdx = 0 To BandGroupTot - 1
  If bBandGroupProcess(BandGroupIdx) = True Then
    Extract_ASTER_Bands BandGroupIdx
    Geocode_Bands BandGroupIdx
  End If
Next

' More magic, if you want a single, multiband GeoTIFF
If  MergeBands = True Then
	Render_GDAL_Merge_Batch_File
	strShellCmd = drvDestPath & strHDFname & ".bat"
	RunShell strShellCmd
End If


' Clean Up unnecessary files

	' Remove all the individual band files geotiff files
	For X =  1  To Rendered_File_Count
		Remove_A_File GDAL_Input(X)
	Next

    Remove_A_File drvDestPath & strHDFname & "_TEMPGDAL.tif"
    Remove_A_File drvDestPath & strHDFname & "_cartesians.txt" 
    Remove_A_File drvDestPath & strHDFname & "_coords.txt" 
    Remove_A_File drvDestPath & strHDFname & "_" & BSTPROJ & "_projinfo.txt" 
    Remove_A_File drvDestPath & strHDFname & ".bat"
    Remove_A_File drvDestPath & strHDFname & "_batchproj.bat"
    Remove_A_File drvDestPath & strHDFname & "_coremetadata.0.met" 
    Remove_A_File drvDestPath & strHDFname & "_productmetadata.0.met" 


' End of Main Program

' =============================================================================
' SUBROUTINES & FUNCTIONS TO CALL FROM MAIN PROGRAM


Sub Extract_MetaData (strMetaName) 
' Added to allow dumping of both coremetadata.0 and productmetadata.0 - modified 06 April 2002 - buckmaster
' Requires presence of hdp.exe in $PATH

	strOutputFile = BaseFilePath & strMetaName & ".met"
	strShellCmd = "hdp dumpvd -n " & strMetaName & " -d -o " & strOutputFile & " -x " & drvPath & strHDFname
	RunShell strShellCmd
	' Clean data of extraneous characters including spaces
	strMetaFile = ReadNewMetaFile(strOutputFile)
	strMetaFile = StripSpaces(strMetaFile)
End Sub


Sub Extract_ASTER_Bands(CurrBGIdx)
' Requires presence of hdfbrowse.exe in $PATH

  For BandIdx = BandGroupBandStart(CurrBGIdx) To BandGroupBandEnd(CurrBGIdx)
    Select Case Processing_Level

		Case "AST_07" 'Added 20020819
			if Processed_Bands = "01023NXXXXXXXXXXXXXXXXXXXXXXXX" then
				SDSString = chr(34) & "SurfaceReflectanceVNIR!Data Fields!Band" & BandName(BandIdx) & chr(34)
			end if
			if Processed_Bands = "XXXXXXXX040506070809XXXXXXXXXX" then
				SDSString = chr(34) & "SurfaceReflectanceSWIR!Data Fields!Band" & BandName(BandIdx) & chr(34)
			end if
		Case "ASTL1B"
			SDSString = chr(34) & BandGroupName(CurrBGIdx) & "!" & BandGroupName(CurrBGIdx) & "_Swath!Data Fields!ImageData" & BandName(BandIdx) & chr(34)
		Case "AST_06V"
			SDSString = chr(34) & "DecorrelationStretchVNIR!Data Fields!Band" & BandName(BandIdx) & chr(34)
		Case "AST_06S"
			SDSString = chr(34) & "DecorrelationStretchSWIR!Data Fields!Band" & BandName(BandIdx) & chr(34)

	End Select

    ' Extract image band from ANY level of hdf
    strShellCmd = "hdfbrowse.exe -f" & drvPath & strHDFname & " -o" & drvDestPath & strHDFname & "_" & BandName(BandIdx) & ".tiff -s" & SDSString & " -b1 -d1 -x"
    RunShell(strShellCmd)
  Next
End Sub


Sub Remove_A_File (oldfile) ' Added 06 Apr 02 - buckmaster
' Facilitate the cleanup of unneeded raster and text files temporarily generated
	Set fso = CreateObject("Scripting.FileSystemObject")
	Set a = fso.GetFile(oldfile)
	a.Delete 
End Sub


Sub Geocode_Bands(CurrBGIdx)

  Dim InTifFile
  Dim OutTifFile
  Dim GeoProjFile

  For BandIdx = BandGroupBandStart(CurrBGIdx) To BandGroupBandEnd(CurrBGIdx)
    InTifFile   = BaseFilePath & BandName(BandIdx) & ".tiff"
    OutTifFile  = BaseFilePath & BandName(BandIdx) & "_geo.tif"
    GeoProjFile = BaseFilePath & BandGroupName(CurrBGIdx) & "_projinfo.txt"

    ' Geocode single existing image with rendered geotiff projection file
    strShellCmd = "geotifcp -g " &  GeoProjFile & " " & InTifFile & " " & OutTifFile
	RunShell strShellCmd
	Remove_A_File InTifFile
	Rendered_File_Count = Rendered_File_Count + 1
	' Populate an array with a file geotiff to be merged with Render_GDAL_Merge_Batch_File
	GDAL_Input(Rendered_File_Count) = OutTifFile
  Next

End Sub


Sub Render_GDAL_Merge_Batch_File()
' Requires presence of gdal_merge.py, thus the presence of OpenEV

	' A command is written here to re-geotifcp the merged tif
	' for some reason, gdal_merge.py corrupts the geotiff transformation tag

	Dim strMergeFiles	'list of files to merge
	strMergeFiles = ""	'initially null

	For X =  1  To Rendered_File_Count
		InputCheck = IsNull(GDAL_Input(X))
		' If Array item is not empty, add geotiff filename to merge list
		If InputCheck = False  Then strMergeFiles = strMergeFiles & " " & GDAL_Input(X)
	Next

	Set fso = CreateObject("Scripting.FileSystemObject")
	Set temp_batch = fso.CreateTextFile(drvDestPath & strHDFname & ".bat", True)

	' Write coords to file
	temp_batch.WriteLine "@echo off"
	temp_batch.WriteLine "set OPENEV_HOME=" & OPENEV_HOME
	temp_batch.WriteLine "set OLD_PATH=%PATH%"
	temp_batch.WriteLine "set path=%OPENEV_HOME%\bin;%OPENEV_HOME%\python;%PATH%"
	temp_batch.WriteLine "set PYTHONPATH=%OPENEV_HOME%\pymod;%OPENEV_HOME%\numpy"
	temp_batch.WriteLine "pythonw %OPENEV_HOME%\pymod\gdal_merge.py -o " & BaseFilePath & "TEMPGDAL.tif -v -separate " & strMergeFiles
	' Need to change "VNIR_projinfo.txt " to a variable that is set when determining band choices.
	temp_batch.WriteLine "geotifcp -g " & BaseFilePath & BSTPROJ & "_projinfo.txt " & BaseFilePath & "TEMPGDAL.tif  " & BaseFilePath & BNDFLAG & ".tif"
	temp_batch.WriteLine "set PATH=%OLD_PATH%"
	temp_batch.Close

End Sub


Sub Read_Geographic_Coords(Geog_Coords_Corner, Corner)
  ' Find and stores geographic latitudes and longitudes to arrays

  Dim GeogrCoords

  GeogrCoords = Split(PullCoord(strMetaFile, Corner), ",", -1, 1)
  Geog_Coords_Corner = Array(GeogrCoords(1), GeogrCoords(0))
End Sub


Sub Read_Cartesian_Coords()
	'Read in the cartesians from the file written by PROJ earlier
	Dim fso, f
	Dim mytab

	cartesian_file = BaseFilePath &  "cartesians.txt"
	Set fso = CreateObject("Scripting.FileSystemObject")
	Set f = fso.OpenTextFile(cartesian_file, 1)
	mytab = Chr(9)

	' coordinate order: upperleft - 0, upperright - 1, lowerleft - 2, lowerright -3
	tempcoord = trim(f.ReadLine)
	Cart_Coord_UL = Split(tempcoord,mytab, -1, 1)
	chopped_length = len(Cart_Coord_UL(1))-1
	Cart_Coord_UL(1) = mid(Cart_Coord_UL(1),1,chopped_length)

	tempcoord = trim(f.ReadLine)
	Cart_Coord_UR = Split(tempcoord,mytab, -1, 1)
	chopped_length = len(Cart_Coord_UR(1))-1
	Cart_Coord_UR(1) = mid(Cart_Coord_UR(1),1,chopped_length)

	tempcoord = trim(f.ReadLine)
	Cart_Coord_LL = Split(tempcoord,mytab, -1, 1)
	chopped_length = len(Cart_Coord_LL(1))-1
	Cart_Coord_LL(1) = mid(Cart_Coord_LL(1),1,chopped_length)

	tempcoord = trim(f.ReadLine)
	Cart_Coord_LR = Split(tempcoord,mytab, -1, 1)
	chopped_length = len(Cart_Coord_LR(1))-1
	Cart_Coord_LR(1) = mid(Cart_Coord_LR(1),1,chopped_length)

	f.Close
End Sub

Sub Render_GeoTiff_File(CurrBGName)
' Will render for any row/column set, pixel set and cartesian UTM coord set
' But you still need to provide those sets...see how to set up variable for
' calling Render_GeoTiff_ProjFile in the code immediately following the call
' to Read_Cartesian_Coords().  Future Feature will allow SELECTIVE PROJECTIONS

 Dim  i, Coord_UL(2), Coord_UR(2), Coord_LL(2), Coord_LR(2)
 Dim  ModelTypeGeoKey, LastLineTypeGeoKey

 If GeographicType = True Then
   For i = 0 To 1
     Coord_UL(i) = Geog_Coord_UL(i)
     Coord_UR(i) = Geog_Coord_UR(i)
     Coord_LL(i) = Geog_Coord_LL(i)
     Coord_LR(i) = Geog_Coord_LR(i)
   Next

   ' Setting actual GeoTIFF Tags - completely dependent upon the specification
   ModelTypeGeoKey = "ModelTypeGeographic"
   LastLineTypeGeoKey = "GeographicTypeGeoKey (Short,1): GCS_WGS_84"
 Else
   For i = 0 To 1
     Coord_UL(i) = Cart_Coord_UL(i)
     Coord_UR(i) = Cart_Coord_UR(i)
     Coord_LL(i) = Cart_Coord_LL(i)
     Coord_LR(i) = Cart_Coord_LR(i)
   Next

   ' Setting actual GeoTIFF Tags - completely dependent upon the specification
   ModelTypeGeoKey = "ModelTypeProjected"
   LastLineTypeGeoKey = "ProjectedCSTypeGeoKey (Short,1): PCS_WGS84_UTM_zone_" & UTMZone & Hemi_2
 End If

 ' Open File for writing
 Set fso = CreateObject("Scripting.FileSystemObject")
 Set proj_def_file = fso.CreateTextFile(drvDestPath & strHDFname & "_" & CurrBGName & "_projinfo.txt", True)

 ' Write coords to file
 proj_def_file.WriteLine "Geotiff_Information:"
 proj_def_file.WriteLine "Version: 1"
 proj_def_file.WriteLine "Key_Revision: 1.0"
 proj_def_file.WriteLine "Tagged_Information:"

 If ModelTransformation = True Then
   proj_def_file.WriteLine "ModelTransformationTag(4,4):"
   proj_def_file.WriteLine PIX_RES & " " & PIX_COORDS(0) & " 0 " & Coord_UL(0)
   proj_def_file.WriteLine PIX_COORDS(0) & " -" & PIX_RES & " 0 " & Coord_UL(1)
   proj_def_file.WriteLine "0 0 0 0"
   proj_def_file.WriteLine "0 0 0 1"
 Else
   proj_def_file.WriteLine "ModelTiepointTag (8,3):"
   proj_def_file.WriteLine PIX_COORDS(0)
   proj_def_file.WriteLine Coord_UL(0) & " " & Coord_UL(1) & " 0"
   proj_def_file.WriteLine PIX_COORDS(1)
   proj_def_file.WriteLine Coord_UR(0) & " " & Coord_UR(1) & " 0"
   proj_def_file.WriteLine PIX_COORDS(2)
   proj_def_file.WriteLine Coord_LL(0) & " " & Coord_LL(1) & " 0"
   proj_def_file.WriteLine PIX_COORDS(3)
   proj_def_file.WriteLine Coord_LR(0) & " " & Coord_LR(1) & " 0"
   proj_def_file.WriteLine "ModelPixelScaleTag (1,3):"
   proj_def_file.WriteLine PIX_RES & " " & PIX_RES & " 0"
 End If

 proj_def_file.WriteLine "End_Of_Tags."
 proj_def_file.WriteLine "Keyed_Information:"
 proj_def_file.WriteLine "GTModelTypeGeoKey (Short,1): " & ModelTypeGeoKey
 proj_def_file.WriteLine "GTRasterTypeGeoKey (Short,1): RasterPixelIsArea"
 proj_def_file.WriteLine LastLineTypeGeoKey
 proj_def_file.WriteLine "End_Of_Keys."
 proj_def_file.WriteLine "End_Of_Geotiff."
 proj_def_file.Close

End Sub


Sub Convert_LatLon_2_Cartesians(Hemi_1, UTMZone, strCoordFile)
' Convert Latitude-Longitude pairs to  UTM Cartesians

	'Write batch file
	Set fso = CreateObject("Scripting.FileSystemObject")
	Set temp_batch = fso.CreateTextFile(BaseFilePath & "batchproj.bat", True)
	' Write coords to file
	temp_batch.WriteLine "@echo off"
	temp_batch.WriteLine "proj +proj=utm +" & Hemi_1 & " +zone=" & UTMZone & " -r  +ellps=clrk66 " & strCoordFile & " > "  &  BaseFilePath & "cartesians.txt"
	temp_batch.Close

	'Execute batch file
	strShellCmd = BaseFilePath & "batchproj.bat"
	RunShell strShellCmd

End Sub

Sub WriteCommandSyntax()
	Wscript.Echo
	Wscript.Echo "cscript plaster16.vbs -fhdfname -iinpath -ooutpath [-g] [-t] [-s] [-evo|eso|eto|evs|est|etv]"
	Wscript.Echo
	Wscript.Echo "	-f (name of hdf file)"
	Wscript.Echo "	-i (directory of input hdf file)"
	Wscript.Echo "	-o (directory for output files)"
	Wscript.Echo
	Wscript.Echo "	-g (use geographic coordinate system vs. UTM cartesian system - the assumed default)"
	Wscript.Echo "	-t (use ModelTiepointTag vs. ModelTransformationTag - the assumed default)"
	Wscript.Echo "	-s (separate bands extraction (no merge) vs. merge of bands selected for processing - the assumed default)"
	Wscript.Echo
	Wscript.Echo "All bands are extracted if no flags below are stated"
	Wscript.Echo "	-evo (extract VNIR only)*"
	Wscript.Echo "	-eso (extract SWIR only)"
	Wscript.Echo "	-eto (extract TIR only)"
	Wscript.Echo "	-evs (extract VNIR & SWIR)*"
	Wscript.Echo "	-est (extract SWIR & TIR)"
	Wscript.Echo "	-etv (extract TIR & VNIR)*"
	Wscript.Echo
	Wscript.Echo "* Band 3B is not processed in this version."
End Sub

Function RunShell(strShellCmd)
' Handles most of the calls to external DOS executables to include batch files
	Set WshShell = Wscript.CreateObject("Wscript.Shell")
	Return = WshShell.Run (strShellCmd, 1, TRUE)
End Function


Function ReadNewMetaFile(strOutputFile)
' Reads an entire file into a string for further parsing
  Dim fso, f
  Set fso = CreateObject("Scripting.FileSystemObject")
  Set f = fso.OpenTextFile(strOutputFile, ForReading)
  ReadNewMetaFile =  f.ReadAll
End Function


Function WriteCoordFile(strFile)
' Write out the geographic coordinates to a file.  I know it probably better
' to pipe it to other functions, but PROJ 4.4.4 is what I use to convert to
' UTM cartesians, and it doesn't like working well with anything but files
' for input...it's the ole STDIN/STDOUT process that's biting me.
    Dim fso
	Dim txtfile
	Dim s
	Set fso = CreateObject("Scripting.FileSystemObject")
    Set txtfile = fso.CreateTextFile(strFile, True)
    ' Write coords to file
    txtfile.WriteLine Trim(Geog_Coord_UL(1)) & " " & Trim(Geog_Coord_UL(0))
    txtfile.WriteLine Trim(Geog_Coord_UR(1)) & " " & Trim(Geog_Coord_UR(0))
    txtfile.WriteLine Trim(Geog_Coord_LL(1)) & " " & Trim(Geog_Coord_LL(0))
    txtfile.WriteLine Trim(Geog_Coord_LR(1)) & " " & Trim(Geog_Coord_LR(0))
	txtfile.Close
End Function


Function PullCoord(strMetaFile,strCoord)
' Got to pull geographic coordinates (degree-decimal format) before
 Dim intStart, intEnd
	intStart = Instr(strMetaFile,strCoord)
	intStart = Instr(intStart,strMetaFile,"(")
	intEnd = Instr(intStart,strMetaFile,")")
	PullCoord = Mid(strMetaFile, intStart+1, (intEnd-intStart)-1)
End Function


Function PullProcessedBands(strMetaFile,strCoord)
' This is for determining what bands to process...very useful for AST_06S files
' This will assist SELECTIVE band processing - a future feature
	Dim intStart, intEnd
	intStart = Instr(strMetaFile,strCoord)
	intStart = Instr(intStart,strMetaFile,chr(34))
	intEnd = Instr(intStart+1,strMetaFile,chr(34))
	PullProcessedBands = Trim(mid(strMetaFile, intStart, intEnd))
End Function


Function PullShortName(strMetaFile,strCoord) '- added 06 April 2002 - buckmaster
' This is for determining what type of processing the ASTER HDF-EOS experienced
	Dim intStart, intEnd
	intStart = Instr(strMetaFile,strCoord)
	intStart = Instr(intStart,strMetaFile,chr(34))
	intEnd = Instr(intStart+1,strMetaFile,chr(34))
	PullShortName = Trim(mid(strMetaFile, intStart+1, intEnd-intStart-1))
End Function


Function PullMapOrientation(strMetaFile)
' This is for pulling orientation angle...differs with product :^(
  Dim intStart, intEnd
  Dim tempstring, OrientationDir

  intStart = Instr(strMetaFile,"MAPORIENTATIONANGLE")
  If intStart > 0 Then
    OrientationDir = -1
  Else
    intStart = Instr(strMetaFile,"SCENEORIENTATIONANGLE")
    If intStart > 0 Then
      OrientationDir = 1
    Else ' Use a default 10 degrees of angle
      PullMapOrientation = -10.000
      msgbox "No orientation metadata found...using default -10 degrees"
      'Return ' Type mismatch: 'Return'
    End If
  End If

  ' Extract and Process the orientation angle
  intStart = Instr(intStart,strMetaFile,"VALUE") ' Invalid procedure call or argument: 'Instr'
  intStart = Instr(intStart,strMetaFile,"=")
  intEnd   = Instr(intStart+1,strMetaFile,"END_OBJECT")
  tempstring = Trim(mid(strMetaFile, intStart+1, intEnd-intStart-5))

  PullMapOrientation = OrientationDir * tempstring
End Function


Function StripSpaces(strMetaFile)
' Clean extraneous spaces from metadata - need to accomplish before parsing for any data
	StripSpaces = Replace(strMetaFile, " ", "") 
End Function


Function Calculate_UTM_Zone(W_Lon, E_Lon)
' Subroutine to Determine UTMZone

	Dim Center_Lon

	If W_Lon < 0 and E_Lon < 0 then
		Center_Lon = E_Lon + ((W_Lon - E_Lon)/2)
	End If

	If W_Lon > 0 and E_Lon > 0 then
		Center_Lon = W_Lon + ((E_Lon - W_Lon)/2)
	End If

	If Center_Lon < 0 and Center_Lon > -6 then Calculate_UTM_Zone = "30"
	If Center_Lon < -6 and Center_Lon > -12 then Calculate_UTM_Zone = "29"
	If Center_Lon < -12 and Center_Lon > -18 then Calculate_UTM_Zone = "28"
	If Center_Lon < -18 and Center_Lon > -24 then Calculate_UTM_Zone = "27"
	If Center_Lon < -24 and Center_Lon > -30 then Calculate_UTM_Zone = "26"
	If Center_Lon < -30 and Center_Lon > -36 then Calculate_UTM_Zone = "25"
	If Center_Lon < -36 and Center_Lon > -42 then Calculate_UTM_Zone = "24"
	If Center_Lon < -42 and Center_Lon > -48 then Calculate_UTM_Zone = "23"
	If Center_Lon < -48 and Center_Lon > -54 then Calculate_UTM_Zone = "22"
	If Center_Lon < -54 and Center_Lon > -60 then Calculate_UTM_Zone = "21"
	If Center_Lon < -60 and Center_Lon > -66 then Calculate_UTM_Zone = "20"
	If Center_Lon < -66 and Center_Lon > -72 then Calculate_UTM_Zone = "19"
	If Center_Lon < -72 and Center_Lon > -78 then Calculate_UTM_Zone = "18"
	If Center_Lon < -78 and Center_Lon > -84 then Calculate_UTM_Zone = "17"
	If Center_Lon < -84 and Center_Lon > -90 then Calculate_UTM_Zone = "16"
	If Center_Lon < -90 and Center_Lon > -96 then Calculate_UTM_Zone = "15"
	If Center_Lon < -96 and Center_Lon > -102 then Calculate_UTM_Zone = "14"
	If Center_Lon < -102 and Center_Lon > -108 then Calculate_UTM_Zone = "13"
	If Center_Lon < -108 and Center_Lon > -114 then Calculate_UTM_Zone = "12"
	If Center_Lon < -114 and Center_Lon > -120 then Calculate_UTM_Zone = "11"
	If Center_Lon < -120 and Center_Lon > -126 then Calculate_UTM_Zone = "10"
	If Center_Lon < -126 and Center_Lon > -132 then Calculate_UTM_Zone = "09"
	If Center_Lon < -132 and Center_Lon > -138 then Calculate_UTM_Zone = "08"
	If Center_Lon < -138 and Center_Lon > -144 then Calculate_UTM_Zone = "07"
	If Center_Lon < -144 and Center_Lon > -150 then Calculate_UTM_Zone = "06"
	If Center_Lon < -150 and Center_Lon > -156 then Calculate_UTM_Zone = "05"
	If Center_Lon < -156 and Center_Lon > -162 then Calculate_UTM_Zone = "04"
	If Center_Lon < -162 and Center_Lon > -168 then Calculate_UTM_Zone = "03"
	If Center_Lon < -168 and Center_Lon > -174 then Calculate_UTM_Zone = "02"
	If Center_Lon < -174 and Center_Lon > -180 then Calculate_UTM_Zone = "01"

	If Center_Lon > 0 and Center_Lon < 6 then Calculate_UTM_Zone = "31"
	If Center_Lon > 6 and Center_Lon < 12 then Calculate_UTM_Zone = "32"
	If Center_Lon > 12 and Center_Lon < 18 then Calculate_UTM_Zone = "33"
	If Center_Lon > 18 and Center_Lon < 24 then Calculate_UTM_Zone = "34"
	If Center_Lon > 24 and Center_Lon < 30 then Calculate_UTM_Zone = "35"
	If Center_Lon > 30 and Center_Lon < 36 then Calculate_UTM_Zone = "36"
	If Center_Lon > 36 and Center_Lon < 42 then Calculate_UTM_Zone = "37"
	If Center_Lon > 42 and Center_Lon < 48 then Calculate_UTM_Zone = "38"
	If Center_Lon > 48 and Center_Lon < 54 then Calculate_UTM_Zone = "39"
	If Center_Lon > 54 and Center_Lon < 60 then Calculate_UTM_Zone = "40"
	If Center_Lon > 60 and Center_Lon < 66 then Calculate_UTM_Zone = "41"
	If Center_Lon > 66 and Center_Lon < 72 then Calculate_UTM_Zone = "42"
	If Center_Lon > 72 and Center_Lon < 78 then Calculate_UTM_Zone = "43"
	If Center_Lon > 78 and Center_Lon < 84 then Calculate_UTM_Zone = "44"
	If Center_Lon > 84 and Center_Lon < 90 then Calculate_UTM_Zone = "45"
	If Center_Lon > 90 and Center_Lon < 96 then Calculate_UTM_Zone = "46"
	If Center_Lon > 96 and Center_Lon < 102 then Calculate_UTM_Zone = "47"
	If Center_Lon > 102 and Center_Lon < 108 then Calculate_UTM_Zone = "48"
	If Center_Lon > 108 and Center_Lon < 114 then Calculate_UTM_Zone = "49"
	If Center_Lon > 114 and Center_Lon < 120 then Calculate_UTM_Zone = "50"
	If Center_Lon > 120 and Center_Lon < 126 then Calculate_UTM_Zone = "51"
	If Center_Lon > 126 and Center_Lon < 132 then Calculate_UTM_Zone = "52"
	If Center_Lon > 132 and Center_Lon < 138 then Calculate_UTM_Zone = "53"
	If Center_Lon > 138 and Center_Lon < 144 then Calculate_UTM_Zone = "54"
	If Center_Lon > 144 and Center_Lon < 150 then Calculate_UTM_Zone = "55"
	If Center_Lon > 150 and Center_Lon < 156 then Calculate_UTM_Zone = "56"
	If Center_Lon > 156 and Center_Lon < 162 then Calculate_UTM_Zone = "57"
	If Center_Lon > 162 and Center_Lon < 168 then Calculate_UTM_Zone = "58"
	If Center_Lon > 168 and Center_Lon < 174 then Calculate_UTM_Zone = "59"
	If Center_Lon > 174 and Center_Lon < 180 then Calculate_UTM_Zone = "60"

End Function

'    2. "cv" - The Latitude/Longitude reporting function was
'        changed for HDF-EOS files.  If the starting coordinate
'        for the mapping between the image array and the
'        Latitude/Longitude arrays is a coordinate that is outside
'        the image, then the program will attempt to determine the
'        mapping by examining the LatticePoint data field.
'        (Previously, it assumed that the starting coordinate was
'        the upper left corner of the image array, which gave
'        incorrect results for ASTER Level 1A files.)

'   Deprecated Command Line Argument Parser
'	If  left(objArgs.Item(I),2) = "-f" then strHDFname = mid(objArgs.Item(I),3)
'
'	If  left(objArgs.Item(I),2) = "-i" then drvPath = mid(objArgs.Item(I),3)
'	' Add a terminating delimiter if not present
'	If right(drvPath,1) <> "\" then drvPath = drvPath & "\"
'
'	If  left(objArgs.Item(I),2) = "-o" then drvDestPath = mid(objArgs.Item(I),3)
'	' Add a terminating delimiter if not present
'	If right(drvDestPath,1) <> "\" then drvDestPath = drvDestPath & "\"
'
'	If  left(objArgs.Item(I),2) = "-g" then GeographicType = True
'	If  left(objArgs.Item(I),2) = "-t" then  ModelTransformation = False
'	If  left(objArgs.Item(I),2) = "-s" then  MergeBands = False
'
'	If  left(objArgs.Item(I),3) = "-vo" then
'		bBandGroupProcess(VNIR) = True
'		bBandGroupProcess(SWIR) = False
'		bBandGroupProcess(TIR)  = False
'	end if
From tlsmith_1999 at yahoo.com  Fri Jun 13 13:56:36 2003
From: tlsmith_1999 at yahoo.com (Tim Smith)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] question about API tutorial
Message-ID: <20030613175636.12114.qmail@web12307.mail.yahoo.com>

Hello,
I have just begun working with GDAL, so this is
probably a simple mistake on my part.
I have compiled the c++ API tutorial, and run it
against a NITF file.  I have two questions:
1.  The tutorial compile complains on this line:
   printf( "Driver: %s/%s\n",
            poDataset->GetDriver()->c(), 
            poDataset->GetDriver()->GetMetadataItem(
GDAL_DMD_LONGNAME ) );

It tells me that "GetDescription" and
"GetMetadataItem" are not members of GDALDriver.

2.  If I comment out the above problem, and run the
program with a NITF file, GetGeoTransform return a
CE_FAILURE.

Thanks for any help,
Tim


__________________________________
Do you Yahoo!?
Yahoo! Calendar - Free online calendar with sync to Outlook(TM).
http://calendar.yahoo.com

From warmerdam at pobox.com  Mon Jun 16 09:40:19 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] question about API tutorial
In-Reply-To: <20030613175636.12114.qmail@web12307.mail.yahoo.com>
References: <20030613175636.12114.qmail@web12307.mail.yahoo.com>
Message-ID: <3EEDC8C3.80007@pobox.com>

Tim Smith wrote:
> Hello,
> I have just begun working with GDAL, so this is
> probably a simple mistake on my part.
> I have compiled the c++ API tutorial, and run it
> against a NITF file.  I have two questions:
> 1.  The tutorial compile complains on this line:
>    printf( "Driver: %s/%s\n",
>             poDataset->GetDriver()->c(), 
>             poDataset->GetDriver()->GetMetadataItem(
> GDAL_DMD_LONGNAME ) );
> 
> It tells me that "GetDescription" and
> "GetMetadataItem" are not members of GDALDriver.

Tim,

What version of GDAL are you using?  The GDALDriver should
have a GetMetadataItem() method if you are using a recent
version (1.1.8 or later for instance).  Likewise for
GetDescription().  Could you quote exact build errors?  Can
you verify that the methods exist in gdal_priv.h?  Can you
verify there are not any old copies of gdal_priv.h on your
system that might be unexpectedly getting used?

> 2.  If I comment out the above problem, and run the
> program with a NITF file, GetGeoTransform return a
> CE_FAILURE.

GDAL is not able to work out coordinate geotransformation information
for some NITF files.  If you can provide a smallish sample directly to me
I could look into whether this is a bug, or the nature of the file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From robert at openscenegraph.com  Mon Jun 16 16:40:12 2003
From: robert at openscenegraph.com (Robert Osfield)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Compiling errors under GDAL in cvs
Message-ID: <200306162140.12777.robert@openscenegraph.com>

Hi All,

I'm currently working up to building Ben Discoe's VTP suite, and as part of 
this am trying to get GDAL compiled up.  I've already successfully compiled 
and installed gdal-1.1.8, but alas the latest release of VTP requires GDAL's 
cvs version.  So I'm now working on getting GDAL in CVS compiled and 
installed.  I'm working under Suse8.2 with g++ 3.3.

I've ran .configure, did make, after a reasonable amount of successful 
compiling I came across the following compile error:

make[2]: Entering directory `/home/robert/VTP/gdal/frmts/jpeg2000'
c++ -c -I../.. -I../../port -I../../core -I../../ogr -Wall -fPIC -O2   
jpeg2000dataset.cpp -o jpeg2000dataset.o -I. -I.  -I../libjasper/include    
-g -O2
jpeg2000dataset.cpp: In member function `virtual GDALColorInterp
   JPEG2000RasterBand::GetColorInterpretation()':
jpeg2000dataset.cpp:437: error: `jas_image_clrspc' undeclared (first use this
   function)
jpeg2000dataset.cpp:437: error: (Each undeclared identifier is reported only
   once for each function it appears in.)
jpeg2000dataset.cpp:437: error: `jas_clrspc_fam' undeclared (first use this
   function)
jpeg2000dataset.cpp:438: error: `JAS_CLRSPC_FAM_GRAY' undeclared (first use
   this function)
jpeg2000dataset.cpp:441: error: `JAS_CLRSPC_FAM_RGB' undeclared (first use 
this
   function)
jpeg2000dataset.cpp: In function `GDALDataset* JPEG2000CreateCopy(const char*,
   GDALDataset*, int, char**, int (*)(double, const char*, void*), void*)':
jpeg2000dataset.cpp:991: error: `JAS_CLRSPC_SGRAY' undeclared (first use this
   function)
jpeg2000dataset.cpp:991: error: `jas_image_setclrspc' undeclared (first use
   this function)
jpeg2000dataset.cpp:996: error: `JAS_CLRSPC_SRGB' undeclared (first use this
   function)
jpeg2000dataset.cpp:1022: error: `JAS_CLRSPC_UNKNOWN' undeclared (first use
   this function)
make[2]: *** [jpeg2000dataset.o] Error 1
make[2]: Leaving directory `/home/robert/VTP/gdal/frmts/jpeg2000'

Looking at the docs in the frmts/jpeg2000 directory led me to download the 
patched version of jasper.  I then ran ./configure and make on it, but came 
across the error :

make[2]: Entering directory `/home/robert/VTP/jasper-1.700.2.uuid/src/appl'
Makefile:360: warning: overriding commands for target `jiv'
Makefile:348: warning: ignoring old commands for target `jiv'
/bin/sh ../../libtool --mode=link gcc  -g -O2 -W -Wall -Wno-long-long -Wformat 
-Wmissing-prototypes -Wstrict-prototypes -pedantic  -o jiv  jiv.o 
../libjasper/libjasper.la -lglut -lGL -lGLU  -lSM -lICE -lX11 -lXmu -lXi 
-lXext -lXt   -L/usr/X11R6/lib -lm  -ljpeg
libtool: link: cannot find the library `/usr/lib/libGLU.la'

Now I have libGLU :

  ls /usr/lib/libGLU*
  /usr/lib/libGLU.so  /usr/lib/libGLU.so.1  /usr/lib/libGLU.so.1.3

But alas no libGLU.la :-|

Suggestions?  Would it be easist to mod jasper?  Disable the compile of 
jpeg2000?  If so what option should I use with configure in GDAL?

Thanks for any help you can provide,

Robert.

From nhv at cape.com  Mon Jun 16 17:06:16 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Compiling errors under GDAL in cvs
In-Reply-To: <200306162140.12777.robert@openscenegraph.com>
Message-ID: <EKEJIKAILPONGGENMBGAIEPHDLAA.nhv@cape.com>

Robert Osfield writes:
> 
> Suggestions?  Would it be easist to mod jasper?  Disable the compile of 
> jpeg2000?  If so what option should I use with configure in GDAL?

Robert,

--with-jasper=no

or 

--without-jasper

either should work

< hack-attack >

You can hand modify GDALmake.opt to specify exactly 
what formats are compiled in

GDAL_FORMATS = xxx xxx

YOur changes will be over written though the next time
you run configure

< /hack-attack >

HTH

Norman

From dron at ak4719.spb.edu  Mon Jun 16 17:15:33 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Compiling errors under GDAL in cvs
In-Reply-To: <200306162140.12777.robert@openscenegraph.com>
References: <200306162140.12777.robert@openscenegraph.com>
Message-ID: <20030616211533.GA19455@ak4719.spb.edu>

Robert,

On Mon, Jun 16, 2003 at 09:40:12PM +0100, Robert Osfield wrote:
> Looking at the docs in the frmts/jpeg2000 directory led me to download the 
> patched version of jasper.  I then ran ./configure and make on it, but came 
> across the error :
> 
> make[2]: Entering directory `/home/robert/VTP/jasper-1.700.2.uuid/src/appl'
> Makefile:360: warning: overriding commands for target `jiv'
> Makefile:348: warning: ignoring old commands for target `jiv'
> /bin/sh ../../libtool --mode=link gcc  -g -O2 -W -Wall -Wno-long-long -Wforma 
> -Wmissing-prototypes -Wstrict-prototypes -pedantic  -o jiv  jiv.o 
> ../libjasper/libjasper.la -lglut -lGL -lGLU  -lSM -lICE -lX11 -lXmu -lXi 
> -lXext -lXt   -L/usr/X11R6/lib -lm  -ljpeg
> libtool: link: cannot find the library `/usr/lib/libGLU.la'
> 
> Now I have libGLU :
> 
>   ls /usr/lib/libGLU*
>   /usr/lib/libGLU.so  /usr/lib/libGLU.so.1  /usr/lib/libGLU.so.1.3
> 
> But alas no libGLU.la :-|

I think you don't have static libGLU.a library.

> Suggestions?  Would it be easist to mod jasper?  Disable the compile of 
> jpeg2000?  If so what option should I use with configure in GDAL?

If you just want to use GDAL you don't need OpenGL jiv application from
JasPer package (it is simple image viewer). JasPer configure option
`--disable-opengl' helps you. Or you may completely disable JPEG2000
driver in GDAL using `--without-jasper' switch.

Anyway, it is my fault that JPEG2000 driver becomes enabled without
proper JasPer version. I shall fix configure script tomorrow.
Thank you for report.


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From robert at openscenegraph.com  Tue Jun 17 02:23:09 2003
From: robert at openscenegraph.com (Robert Osfield)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Compiling errors under GDAL in cvs
In-Reply-To: <20030616211533.GA19455@ak4719.spb.edu>
References: <200306162140.12777.robert@openscenegraph.com> <20030616211533.GA19455@ak4719.spb.edu>
Message-ID: <200306170723.09341.robert@openscenegraph.com>

Hi Andrey and Norman,

Thanks for the pointers.

Both doing a:

  cd gdal
  ./configure --without-jasper

and

  cd jasper-1.700.2.uuid
  ./configure --disable-opengl
  make

  cd gdal
  ./configure 
  make

Worked just fine, I'm now working with the later.  

It does seem a bit of limitiation with jasper that it doesn't pick up on my 
installed OpenGL drivers, I might not have a static GLU but I do have a 
GLU.so.

Thanks for you help,
Robert.

From ben at vterrain.org  Tue Jun 17 08:43:04 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Bug fix in BMP support
In-Reply-To: <3ED7B8F5.3070504@pobox.com>
Message-ID: <017401c334cd$ff6205e0$f400fe0a@TOPP2>

This fixes a crash in the BMP reader on Windows:

RCS file: /cvsroot/osrs/gdal/frmts/bmp/bmpdataset.cpp,v
retrieving revision 1.20
diff -w -b -r1.20 bmpdataset.cpp
932c932
<     VSIFCloseL( poOpenInfo->fp );
---
>     VSIFClose( poOpenInfo->fp );

VSIFClose must be used here, because VSIFOpen was used in GDALOpenInfo
(core/gdalopen.cpp) to open the file.

-Ben


From warmerdam at pobox.com  Tue Jun 17 09:24:41 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Bug fix in BMP support
In-Reply-To: <017401c334cd$ff6205e0$f400fe0a@TOPP2>
References: <017401c334cd$ff6205e0$f400fe0a@TOPP2>
Message-ID: <3EEF1699.7060308@pobox.com>

Ben Discoe wrote:
> This fixes a crash in the BMP reader on Windows:
> 
> RCS file: /cvsroot/osrs/gdal/frmts/bmp/bmpdataset.cpp,v
> retrieving revision 1.20
> diff -w -b -r1.20 bmpdataset.cpp
> 932c932
> <     VSIFCloseL( poOpenInfo->fp );
> ---
> 
>>    VSIFClose( poOpenInfo->fp );
> 
> 
> VSIFClose must be used here, because VSIFOpen was used in GDALOpenInfo
> (core/gdalopen.cpp) to open the file.

Andrey,

I would add that I don't see why bmpdataset.cpp should even be closing the
file managed by the GDALOpenInfo.  Do you have a specific reason this needs
to be done?  If not, please don't.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From tlsmith_1999 at yahoo.com  Tue Jun 17 10:55:21 2003
From: tlsmith_1999 at yahoo.com (Tim Smith)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] question about API tutorial
In-Reply-To: <3EEDC8C3.80007@pobox.com>
Message-ID: <20030617145521.89165.qmail@web12301.mail.yahoo.com>

Hello Frank,

I am working with gdal 1.1.8. I do not have an older
version of gdal files on the system at all.

I have fixed the compile error, it was a typo on my
part (getDescription vs Getdescription).
But I still have the problem with the getgeoTransform
at run time.

I can't sent a copy of the nitf I am using.  But they
are nitf 2.0, with a single image, the gdalinfo app
returns the driver, size, coordinate system, corner
coordinates, and a color table.  If there is something
specific I can look up about/in the nitf that would
help you determine the problem, just let me know. 

The code I am using is almost an exact copy of the
tutorial from the web page, with a few print
statements, and using the argv parameter to pass the
file name in.


Thanks Tim.
--- Frank Warmerdam <warmerdam@pobox.com> wrote:
> Tim Smith wrote:
> > Hello,
> > I have just begun working with GDAL, so this is
> > probably a simple mistake on my part.
> > I have compiled the c++ API tutorial, and run it
> > against a NITF file.  I have two questions:
> > 1.  The tutorial compile complains on this line:
> >    printf( "Driver: %s/%s\n",
> >             poDataset->GetDriver()->c(), 
> >            
> poDataset->GetDriver()->GetMetadataItem(
> > GDAL_DMD_LONGNAME ) );
> > 
> > It tells me that "GetDescription" and
> > "GetMetadataItem" are not members of GDALDriver.
> 
> Tim,
> 
> What version of GDAL are you using?  The GDALDriver
> should
> have a GetMetadataItem() method if you are using a
> recent
> version (1.1.8 or later for instance).  Likewise for
> GetDescription().  Could you quote exact build
> errors?  Can
> you verify that the methods exist in gdal_priv.h? 
> Can you
> verify there are not any old copies of gdal_priv.h
> on your
> system that might be unexpectedly getting used?
> 
> > 2.  If I comment out the above problem, and run
> the
> > program with a NITF file, GetGeoTransform return a
> > CE_FAILURE.
> 
> GDAL is not able to work out coordinate
> geotransformation information
> for some NITF files.  If you can provide a smallish
> sample directly to me
> I could look into whether this is a bug, or the
> nature of the file.
> 
> Best regards,
> -- 
>
---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank
> Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows |
> http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial
> Programmer for Rent
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


__________________________________
Do you Yahoo!?
SBC Yahoo! DSL - Now only $29.95 per month!
http://sbc.yahoo.com

From warmerdam at pobox.com  Tue Jun 17 11:26:01 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] question about API tutorial
In-Reply-To: <20030617145521.89165.qmail@web12301.mail.yahoo.com>
References: <20030617145521.89165.qmail@web12301.mail.yahoo.com>
Message-ID: <3EEF3309.6080400@pobox.com>

Tim Smith wrote:
> I have fixed the compile error, it was a typo on my
> part (getDescription vs Getdescription).
> But I still have the problem with the getgeoTransform
> at run time.
> 
> I can't sent a copy of the nitf I am using.  But they
> are nitf 2.0, with a single image, the gdalinfo app
> returns the driver, size, coordinate system, corner
> coordinates, and a color table.  If there is something
> specific I can look up about/in the nitf that would
> help you determine the problem, just let me know. 
> 
> The code I am using is almost an exact copy of the
> tutorial from the web page, with a few print
> statements, and using the argv parameter to pass the
> file name in.

Tim,

The problem with GetGeoTransform() presumably represents an issue
with the NITF driver, not your code.  You mention you are getting
corner coordinates from gdalinfo, are they sensible?  It might be
helpful if you could send your "gdalinfo" output for the image.  Also
the results of nitfdump (cd into gdal/frmts/nitf and make this by hand)
on the image.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dron at ak4719.spb.edu  Tue Jun 17 12:56:03 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Bug fix in BMP support
In-Reply-To: <3EEF1699.7060308@pobox.com>
References: <017401c334cd$ff6205e0$f400fe0a@TOPP2> <3EEF1699.7060308@pobox.com>
Message-ID: <20030617165603.GB1975@ak4719.spb.edu>

On Tue, Jun 17, 2003 at 09:24:41AM -0400, Frank Warmerdam wrote:
> I would add that I don't see why bmpdataset.cpp should even be closing the
> file managed by the GDALOpenInfo.  Do you have a specific reason this needs
> to be done?  If not, please don't.

Frank,

I want reopen the file with large-file interface, so I'm closing opened
handler before reopening. Why do you think it is wrong?


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From warmerdam at pobox.com  Tue Jun 17 13:09:02 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Bug fix in BMP support
In-Reply-To: <20030617165603.GB1975@ak4719.spb.edu>
References: <017401c334cd$ff6205e0$f400fe0a@TOPP2> <3EEF1699.7060308@pobox.com> <20030617165603.GB1975@ak4719.spb.edu>
Message-ID: <3EEF4B2E.8060503@pobox.com>

Andrey Kiselev wrote:
> On Tue, Jun 17, 2003 at 09:24:41AM -0400, Frank Warmerdam wrote:
> 
>>I would add that I don't see why bmpdataset.cpp should even be closing the
>>file managed by the GDALOpenInfo.  Do you have a specific reason this needs
>>to be done?  If not, please don't.
> 
> 
> Frank,
> 
> I want reopen the file with large-file interface, so I'm closing opened
> handler before reopening. Why do you think it is wrong?

Andrey,

The general practice would be to go ahead and open it with the large file API,
but not to close the regular file handle.  The GDALOpen() API will take care
of it later.  I generally try to only fiddle with the GDALOpenInfo's file
pointer when I want to "adopt it" in the driver, in which case I set the
pointer to NULL, taking ownership of it.

However, there isn't really any harm in your closing it ... it just seems
unnecessary.

Of course, using the wrong API function to close it is ... wrong.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From bgmilne at cae.co.za  Tue Jun 17 14:15:40 2003
From: bgmilne at cae.co.za (Buchan Milne)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Geotiff support and issues with libgeotiff/libtiff
Message-ID: <3EEF5ACC.9020304@cae.co.za>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi,

While building grass51 from a cvs snapshot, I had to install a cvs
snapshot of gdal also, and since I maintain the packages in Mandrake, I
thought I would try and resolve some issues, such as enabling external
libtiff/libgeotiff support.

(this may not be totally on-topic, but libtiff/libgeotiff are also
hosted/maintained similarly to gdal I think, and I really don't want to
subscribe to another mailing list, and this is gdal-related).

It seems I need a newer geotiff than 1.1.4 (which is in the distro) to
do this, but libgeotiff 1.2.0 no longer ships with internal copies of
libtiff headers, and I have never managed to get any version of
libgeotiff to build against libtiff's headers (which is the problem that
must be solved).

The libtiff make install target installs these headers:
tiff.h
tiffconf.h
tiffio.h
tiffvers.h

Building geotiff 1.2.0 against this results in this error (and many others):
libxtiff/xtiff.c:29: error: parse error before "xtiffFieldInfo"

Yet, the internal headers for libtiff in libgeotiff<1.2.0 include:
tif_dir.h
tiffconf.h
tiffiop.h

So, I installed the following headers from libtiff:
tif_dir.h
tif_fax3.h
tif_predict.h
tiff.h
tiffcomp.h
tiffconf.h
tiffio.h
tiffiop.h
tiffvers.h

Since TIFFFieldInfo is declared in tif_dir.h, I added tif_dir.h as an
include to libxtiff/tiffio.h, and then I got a bit further, but more
errors appeared:
libxtiff/xtiff.c:32: error: `FIELD_CUSTOM' undeclared here (not in a
function).

I got stuck here, as I could not find any reference to FIELD_CUSTOM
outside libxtiff/xtiff.c.

Thus far I have again settled for building with internal geotiff support
in gdal, but can someone confirm whether it is actually possible to
build gdal with exteral geotiff support, and which headers are required
from libtiff to build libgeotiff 1.2.0?

Regards,
Buchan

- --
|--------------Another happy Mandrake Club member--------------|
Buchan Milne                Mechanical Engineer, Network Manager
Cellphone * Work            +27 82 472 2231 * +27 21 8828820x202
Stellenbosch Automotive Engineering         http://www.cae.co.za
GPG Key                   http://ranger.dnsalias.com/bgmilne.asc
1024D/60D204A7 2919 E232 5610 A038 87B1 72D6 AC92 BA50 60D2 04A7
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.2 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD4DBQE+71rLrJK6UGDSBKcRAs89AJd1r38vpzYbcF/o8cSRoHcMBiNpAJ9yL/Xa
flxGQTxGC0aRNOy4b4BSeA==
=4V0p
-----END PGP SIGNATURE-----

******************************************************************
Please click on http://www.cae.co.za/disclaimer.htm to read our
e-mail disclaimer or send an e-mail to info@cae.co.za for a copy.
******************************************************************

From alessandro_amici at telespazio.it  Tue Jun 17 14:16:46 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:51 2007
Subject: R: [Gdal-dev] Geotiff support and issues with libgeotiff/libtiff
Message-ID: <A183DF60AC72D5119B990002A5749CB3044A16DF@ROMADG-MAIL01>

Buchan,

> It seems I need a newer geotiff than 1.1.4 (which is in the distro) to
> do this, but libgeotiff 1.2.0 no longer ships with internal copies of
> libtiff headers, and I have never managed to get any version of
> libgeotiff to build against libtiff's headers (which is the problem that
> must be solved).

i maintain the unofficial debian package, and i use internal tiff-geotiff
libraries as well :/

Frank, one more point that is unclear to me is the status of tiff 3.6.x,
is it considered stable? i.e. should i push the debian tiff maintainer to
update it? are 3.6.x binary compatible with 3.5.x?

cheers,
alessandro

From bgmilne at cae.co.za  Tue Jun 17 14:40:10 2003
From: bgmilne at cae.co.za (Buchan Milne)
Date: Wed Nov 21 11:48:51 2007
Subject: R: [Gdal-dev] Geotiff support and issues with libgeotiff/libtiff
In-Reply-To: <A183DF60AC72D5119B990002A5749CB3044A16DF@ROMADG-MAIL01>
References: <A183DF60AC72D5119B990002A5749CB3044A16DF@ROMADG-MAIL01>
Message-ID: <3EEF608A.2020306@cae.co.za>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Amici Alessandro wrote:

>
> i maintain the unofficial debian package, and i use internal tiff-geotiff
> libraries as well :/
>

Well, I am not aware of any distro that packages geotiff 1.2.0 (I
searched rpmfind, and only got 1.1.4 packages), and this may be the
reason ...

> Frank, one more point that is unclear to me is the status of tiff 3.6.x,
> is it considered stable? i.e. should i push the debian tiff maintainer to
> update it? are 3.6.x binary compatible with 3.5.x?

And if so, does it's install make target install all the headers?

Regards,
Buchan

- --
|--------------Another happy Mandrake Club member--------------|
Buchan Milne                Mechanical Engineer, Network Manager
Cellphone * Work            +27 82 472 2231 * +27 21 8828820x202
Stellenbosch Automotive Engineering         http://www.cae.co.za
GPG Key                   http://ranger.dnsalias.com/bgmilne.asc
1024D/60D204A7 2919 E232 5610 A038 87B1 72D6 AC92 BA50 60D2 04A7
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.2 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQE+72CJrJK6UGDSBKcRAqYeAJ9+6/ZGk3TCdl71pQXAiI8QNBl2MACfWITh
w8Qnj2DCuDWl8GYoj0hBrnE=
=Gabg
-----END PGP SIGNATURE-----

******************************************************************
Please click on http://www.cae.co.za/disclaimer.htm to read our
e-mail disclaimer or send an e-mail to info@cae.co.za for a copy.
******************************************************************

From warmerdam at pobox.com  Tue Jun 17 14:36:41 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: R: [Gdal-dev] Geotiff support and issues with libgeotiff/libtiff
In-Reply-To: <A183DF60AC72D5119B990002A5749CB3044A16DF@ROMADG-MAIL01>
References: <A183DF60AC72D5119B990002A5749CB3044A16DF@ROMADG-MAIL01>
Message-ID: <3EEF5FB9.3000004@pobox.com>

Amici Alessandro wrote:
> Buchan,
> 
> 
>>It seems I need a newer geotiff than 1.1.4 (which is in the distro) to
>>do this, but libgeotiff 1.2.0 no longer ships with internal copies of
>>libtiff headers, and I have never managed to get any version of
>>libgeotiff to build against libtiff's headers (which is the problem that
>>must be solved).
> 
> 
> i maintain the unofficial debian package, and i use internal tiff-geotiff
> libraries as well :/
> 
> Frank, one more point that is unclear to me is the status of tiff 3.6.x,
> is it considered stable? i.e. should i push the debian tiff maintainer to
> update it? are 3.6.x binary compatible with 3.5.x?

Alessandro / Buchan,

Libgeotiff 1.2.0 should be used with libtiff 1.6.0 (beta or later).  There
was a substantial restructuring of how extentions are handled in the shift
to libgeotiff 1.2.0, and libtiff 1.6.0 and you cannot mix these versions
with older versions of the other library.  The change to how extensions are
handled was done to avoid needing a copy of libtiff include files (or access
to private include files) when building libgeotiff.  This practice was causing
lots of compatibility problems.

Andrey will be issuing a new libtiff 3.6.0 beta release this week and if there
are no problems with it, we should release libtiff 3.6.0 final as soon as next
week or the week after that.  I have intended to do this for several months,
but never seem to get to it, which is why I have asked Andrey to take over
this responsibility.

Once 3.6.0 final is out I hope Debian will upgrade to it promptly.

Buchan ... have you tried building libgeotiff 1.2.0 against libtiff 3.6.0 beta?

Note ... these issues really belong on the geotiff list.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dron at ak4719.spb.edu  Tue Jun 17 14:48:27 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:51 2007
Subject: R: [Gdal-dev] Geotiff support and issues with libgeotiff/libtiff
In-Reply-To: <3EEF608A.2020306@cae.co.za>
References: <A183DF60AC72D5119B990002A5749CB3044A16DF@ROMADG-MAIL01> <3EEF608A.2020306@cae.co.za>
Message-ID: <20030617184827.GA14737@ak4719.spb.edu>

> > i maintain the unofficial debian package, and i use internal tiff-geotiff
> > libraries as well :/
> Well, I am not aware of any distro that packages geotiff 1.2.0 (I
> searched rpmfind, and only got 1.1.4 packages), and this may be the
> reason ...
> > Frank, one more point that is unclear to me is the status of tiff 3.6.x,
> > is it considered stable? i.e. should i push the debian tiff maintainer to
> > update it? are 3.6.x binary compatible with 3.5.x?
> And if so, does it's install make target install all the headers?

Buchan/Alessandro,

You need latest snapshot of the libtiff library to build libgeotiff
and GDAL withoyut problems. It installs all required headers (and
TIFFFieldInfo now declared in tiffio.h file). FIELD_CUSTOM also appears
in libtiff after 3.5.7 release.

libtiff 3.6.0 should be fully binary compatible with 3.5.7. You may take
latest CVS snapshot of the library or wait one or two days when libtiff
3.6.0beta2 will be released.

Latest libtiff is much better than 3.5.7, many serious bugs fixed. In
3.5.7 some utilities even does not work. So I'm recommend using latest
libtiff snapshots.


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From ben at vterrain.org  Tue Jun 17 17:11:23 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Bug fix in BMP support
In-Reply-To: <017401c334cd$ff6205e0$f400fe0a@TOPP2>
Message-ID: <002701c33515$01e55d20$f400fe0a@TOPP2>


I made another fix to the BMP reader.  It was trying to compensate for
the BGR / RGB issue, but not doing it quite right.  It was also trying
to count backwards from the end of the file by size, which can be a
couple byte away from correct for some files.  Fixed module attached.

-Ben

> -----Original Message-----
> From: Ben Discoe
> Sent: Tuesday, June 17, 2003 7:43 AM
> 
> This fixes a crash in the BMP reader on Windows:
> 
> RCS file: /cvsroot/osrs/gdal/frmts/bmp/bmpdataset.cpp,v
> retrieving revision 1.20
> diff -w -b -r1.20 bmpdataset.cpp
> 932c932
> <     VSIFCloseL( poOpenInfo->fp );
> ---
> >     VSIFClose( poOpenInfo->fp );
> 
> VSIFClose must be used here, because VSIFOpen was used in GDALOpenInfo
> (core/gdalopen.cpp) to open the file.
> 
> -Ben
-------------- next part --------------
A non-text attachment was scrubbed...
Name: bmpdataset.cpp
Type: application/octet-stream
Size: 49869 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030617/5402b280/bmpdataset.obj
From dron at ak4719.spb.edu  Wed Jun 18 04:59:03 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Bug fix in BMP support
In-Reply-To: <002701c33515$01e55d20$f400fe0a@TOPP2>
References: <017401c334cd$ff6205e0$f400fe0a@TOPP2> <002701c33515$01e55d20$f400fe0a@TOPP2>
Message-ID: <20030618085903.GB8631@ak4719.spb.edu>

Ben,

On Tue, Jun 17, 2003 at 05:11:23PM -0400, Ben Discoe wrote:
> I made another fix to the BMP reader.  It was trying to compensate for
> the BGR / RGB issue, but not doing it quite right.

Sorry, but your fix is wrong. Pixels should be reordered before filling
pImage array.

> It was also trying to count backwards from the end of the file by
> size, which can be a couple byte away from correct for some files.

You are right, but this issue already fixed in bmpdataset.cpp v.1.22.
;-)

BTW, I have solved problem with wrong VSIFCloseL() using, thank you for
report.

					Regards,
					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From bgmilne at cae.co.za  Wed Jun 18 13:59:07 2003
From: bgmilne at cae.co.za (Buchan Milne)
Date: Wed Nov 21 11:48:51 2007
Subject: R: [Gdal-dev] Geotiff support and issues with libgeotiff/libtiff
In-Reply-To: <20030617184827.GA14737@ak4719.spb.edu>
References: <A183DF60AC72D5119B990002A5749CB3044A16DF@ROMADG-MAIL01> <3EEF608A.2020306@cae.co.za> <20030617184827.GA14737@ak4719.spb.edu>
Message-ID: <3EF0A86B.3060104@cae.co.za>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Andrey Kiselev wrote:

> Buchan/Alessandro,
>
> You need latest snapshot of the libtiff library to build libgeotiff
> and GDAL withoyut problems. It installs all required headers (and
> TIFFFieldInfo now declared in tiffio.h file). FIELD_CUSTOM also appears
> in libtiff after 3.5.7 release.
>
> libtiff 3.6.0 should be fully binary compatible with 3.5.7. You may take
> latest CVS snapshot of the library or wait one or two days when libtiff
> 3.6.0beta2 will be released.
>
> Latest libtiff is much better than 3.5.7, many serious bugs fixed. In
> 3.5.7 some utilities even does not work. So I'm recommend using latest
> libtiff snapshots.

Thanks Andrey,

I used 3.6.0beta, and everything works *much* better (maybe gdal's docs
could list requirements for geotiff>=1.2.0 for external geotiff support,
and geotiff could be documented as reqruiring libtiff>=3.6.0?).

Frank, if I may abuse this list for one more post on libgeotiff, there
is a buglet in configure for libgeotiff's checks for proj, it checks to
see if $PROJ_HOME/src is a directory, and if so, uses $PROJ_HOME/src to
find libproj.a. So, if proj is installed with a prefix of /usr,
configure checks for /usr/src, finds it, but doesn't find a libproj.a
below it, since it is in /usr/lib.

This section need to be improved:

  if test -d $PROJ_HOME/src ; then
    PROJ_HOME=$PROJ_HOME/src
  fi

For the moment I just have this line in my spec file:
perl -pi -e 's|test -d \$PROJ_HOME/src|false|g' configure

Regards,
Buchan
- --
|--------------Another happy Mandrake Club member--------------|
Buchan Milne                Mechanical Engineer, Network Manager
Cellphone * Work            +27 82 472 2231 * +27 21 8828820x202
Stellenbosch Automotive Engineering         http://www.cae.co.za
GPG Key                   http://ranger.dnsalias.com/bgmilne.asc
1024D/60D204A7 2919 E232 5610 A038 87B1 72D6 AC92 BA50 60D2 04A7
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.2 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQE+8KhrrJK6UGDSBKcRAjG3AJ9nYNn+ze1GedyBSlMfg7x2+Dc4WACbBENI
kxb+giIoKEFGKCflzJqbRWI=
=JVnx
-----END PGP SIGNATURE-----

******************************************************************
Please click on http://www.cae.co.za/disclaimer.htm to read our
e-mail disclaimer or send an e-mail to info@cae.co.za for a copy.
******************************************************************

From ben at vterrain.org  Wed Jun 18 19:21:52 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Reverse the effects of GDALAllRegister()?
In-Reply-To: <20030618085903.GB8631@ak4719.spb.edu>
Message-ID: <000401c335f0$6744ef60$f400fe0a@TOPP2>

I am finding a lot of unfreed memory when my program exits.  Tracking it
down, much of it is allocated in places like:
	GDALRegister_FAST()
	GDALRegister_FIT() etc.
Which are called by the usual call to:
	GDALAllRegister()

I looked for, but couldn't find, a way to tell GDAL to "unregister" and
free all the drivers that it allocates with GDALAllRegister().  There is
a method GDALDeregisterDriver(), but is only does a single driver and
doesn't actually free it.

Do we need a method like GDALAllFree(), or is there already a way to do
it?

Thanks,
Ben


From warmerdam at pobox.com  Wed Jun 18 19:41:55 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Reverse the effects of GDALAllRegister()?
In-Reply-To: <000401c335f0$6744ef60$f400fe0a@TOPP2>
References: <000401c335f0$6744ef60$f400fe0a@TOPP2>
Message-ID: <3EF0F8C3.507@pobox.com>

Ben Discoe wrote:

> I am finding a lot of unfreed memory when my program exits.  Tracking it
> down, much of it is allocated in places like:
> 	GDALRegister_FAST()
> 	GDALRegister_FIT() etc.
> Which are called by the usual call to:
> 	GDALAllRegister()
> 
> I looked for, but couldn't find, a way to tell GDAL to "unregister" and
> free all the drivers that it allocates with GDALAllRegister().  There is
> a method GDALDeregisterDriver(), but is only does a single driver and
> doesn't actually free it.
> 
> Do we need a method like GDALAllFree(), or is there already a way to do
> it?

Ben,

Call GDALDestroyDriverManaager().  There are usually a few tiny bits of
stuff left yet (paths pushed on the CPL "finder" stack for instance), but
it should get almost everything.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From rob at dataflowdesign.com  Wed Jun 18 22:11:16 2003
From: rob at dataflowdesign.com (R. Piepul)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Confusion with gdalwarp
Message-ID: <16113.7108.977465.188896@ursus.waterpathcanoe.com>

I seem to have a misunderstanding about the use of gdalwarp and am
hoping that someone can tell me what is wrong.  I am trying to prepare
a GeoTiff image for use in mapserver.

I'm using gdalwarp to project a GeoTiff raster image.  The coordinates
of the input file are in lat long.  After processing the file with
gdalwarp, I used gdalinfo to examine the output file.  It appears that
the coordinate system information is no longer there. Also, the corner
coordinates in the output file are in pixels.

I was expecting gdalinfo to display information about the projected
coordinate system.  Also, I expected the corner coordinates to be
displayed in projected units (meters).  Is this the normal behavior
for gdalwarp?  I'm concerned that I may have a configuration or build
issue.

Thanks for your help,
Rob



$ gdalinfo map.tif
ERROR 1: Undefined symbol "pj_get_def"
Driver: GTiff/GeoTIFF
Size is 5183, 3887
Coordinate System is:
GEOGCS["NAD83",
    DATUM["North_American_Datum_1983",
        SPHEROID["GRS 1980",6378137,298.2572221010002,
            AUTHORITY["EPSG","7019"]],
        AUTHORITY["EPSG","6269"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4269"]]
Origin = (-96.932100,36.761300)
Pixel Size = (0.000278,-0.000278)
Metadata:
  TIFFTAG_SOFTWARE=IMAGINE TIFF Support
Copyright 1991 - 1999 by ERDAS, Inc. All Rights Reserved
@(#)$RCSfile: etif.c $ $Revision: 1.9.1.2 $ $Date: 2001/12/05 00:33:12Z $
Corner Coordinates:
Upper Left  ( -96.9321000,  36.7613000) ( 96d55'55.56"W, 36d45'40.68"N)
Lower Left  ( -96.9321000,  35.6813695) ( 96d55'55.56"W, 35d40'52.93"N)
Upper Right ( -95.4921000,  36.7613000) ( 95d29'31.56"W, 36d45'40.68"N)
Lower Right ( -95.4921000,  35.6813695) ( 95d29'31.56"W, 35d40'52.93"N)
Center      ( -96.2121000,  36.2213347) ( 96d12'43.56"W, 36d13'16.81"N)
Band 1 Block=5183x1 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 256 entries)
    0: 0,0,0,255
    . . .
    [snipped]


$ gdalwarp -t_srs 'proj=utm zone=14' map.tif temp1.tif
:0...10...20...30...40...50...60...70...80...90...100 - done.


$ gdalinfo temp1.tif
Driver: GTiff/GeoTIFF
Size is 4879, 4536
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 4536.0)
Upper Right ( 4879.0,    0.0)
Lower Right ( 4879.0, 4536.0)
Center      ( 2439.5, 2268.0)
Band 1 Block=4879x1 Type=Byte, ColorInterp=Gray
$


$ gdal-config --version 
1.1.8
$ gdal-config --ogr-enabled
yes
$ gdal-config --formats
gxf gtiff hfa aigrid aaigrid ceos ceos2 iso8211 bsb xpm sdts raw dted
mem jdem envisat elas fit vrt usgsdem l1b nitf bmp hdf4 gif jpeg png
grass

From s.perkins at lanl.gov  Thu Jun 19 01:05:41 2003
From: s.perkins at lanl.gov (Simon Perkins)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Compiling errors under GDAL in cvs
References: <200306162140.12777.robert@openscenegraph.com> <20030616211533.GA19455@ak4719.spb.edu>
Message-ID: <3EF144A5.F1E29E7F@lanl.gov>

> > Suggestions?  Would it be easist to mod jasper?  Disable the compile of
> > jpeg2000?  If so what option should I use with configure in GDAL?
>
> If you just want to use GDAL you don't need OpenGL jiv application from
> JasPer package (it is simple image viewer). JasPer configure option
> `--disable-opengl' helps you. Or you may completely disable JPEG2000
> driver in GDAL using `--without-jasper' switch.

Just to throw in my two cents (but mostly to say "hi-Rob-how's-it-going"!),
autoconf generated configure scripts support a --help option that automatically
lists all the configuration options that are available.

Cheers,

Sy



From warmerdam at pobox.com  Thu Jun 19 09:25:58 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Confusion with gdalwarp
In-Reply-To: <16113.7108.977465.188896@ursus.waterpathcanoe.com>
References: <16113.7108.977465.188896@ursus.waterpathcanoe.com>
Message-ID: <3EF1B9E6.8020607@pobox.com>

R. Piepul wrote:

> I seem to have a misunderstanding about the use of gdalwarp and am
> hoping that someone can tell me what is wrong.  I am trying to prepare
> a GeoTiff image for use in mapserver.

...

> $ gdalwarp -t_srs 'proj=utm zone=14' map.tif temp1.tif
> :0...10...20...30...40...50...60...70...80...90...100 - done.

Rob,

I would encourage you to explicitly include an ellipse in PROJ.4
declarations.  You are also encouraged to explicitly include a
'+' in front of PROJ.4 options.  The above apparently works, but
not because I have been careful to make it work.  So I would suggest:

  -t_srs '+proj=utm +zone=14 +datum=NAD83'

> $ gdalinfo temp1.tif
> Driver: GTiff/GeoTIFF
> Size is 4879, 4536
> Coordinate System is `'
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0, 4536.0)
> Upper Right ( 4879.0,    0.0)
> Lower Right ( 4879.0, 4536.0)
> Center      ( 2439.5, 2268.0)
> Band 1 Block=4879x1 Type=Byte, ColorInterp=Gray
> $
> 
> 
> $ gdal-config --version 
> 1.1.8
> $ gdal-config --ogr-enabled
> yes
> $ gdal-config --formats
> gxf gtiff hfa aigrid aaigrid ceos ceos2 iso8211 bsb xpm sdts raw dted
> mem jdem envisat elas fit vrt usgsdem l1b nitf bmp hdf4 gif jpeg png
> grass

This sounds like a bug in the GDAL 1.1.8 release with the GeoTIFF
driver.  When it creates a new TIFF file with the Create() method
instead of the CreateCopy() method it fails to write the coordinate system
information out.  This bug was fixed a month or so after the GDAL 1.1.8
release.  I would encourage you to upgrade to the CVS snapshot code
and perhaps even try using gdalwarptest which works similarly but uses
a new more flexible algorithm.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From Rich at GreenwoodMap.com  Thu Jun 19 09:50:50 2003
From: Rich at GreenwoodMap.com (Richard Greenwood)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Confusion with gdalwarp
In-Reply-To: <16113.7108.977465.188896@ursus.waterpathcanoe.com>
Message-ID: <5.2.0.9.0.20030619074742.00ad5e88@mail.GreenwoodMap.com>

At 09:11 PM 6/18/2003 -0500, you wrote:

>I seem to have a misunderstanding about the use of gdalwarp and am
>hoping that someone can tell me what is wrong.  I am trying to prepare
>a GeoTiff image for use in mapserver.
>
>I'm using gdalwarp to project a GeoTiff raster image.  The coordinates
>of the input file are in lat long.  After processing the file with
>gdalwarp, I used gdalinfo to examine the output file.  It appears that
>the coordinate system information is no longer there. Also, the corner
>coordinates in the output file are in pixels.
>
>I was expecting gdalinfo to display information about the projected
>coordinate system.  Also, I expected the corner coordinates to be
>displayed in projected units (meters).  Is this the normal behavior
>for gdalwarp?  I'm concerned that I may have a configuration or build
>issue.
>
>Thanks for your help,
>Rob

Do you have your PROJ_LIB environment variable to point
to the directory holding the "epsg" file.

Alternatively you can define it something like:
  -t_srs "+proj=utm +ellps=GRS80 +zone=12 +north +datum=NAD83 +units=m"
(not your zone!). And if it was me, I'd also try defining you s_srs, too.

Rich


Richard W. Greenwood, PLS
Greenwood Mapping, Inc.
Rich@GreenwoodMap.com
(307) 733-0203
http://www.GreenwoodMap.com 
From rob at dataflowdesign.com  Thu Jun 19 10:49:51 2003
From: rob at dataflowdesign.com (R. Piepul)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Confusion with gdalwarp
In-Reply-To: <5.2.0.9.0.20030619074742.00ad5e88@mail.GreenwoodMap.com>
References: <16113.7108.977465.188896@ursus.waterpathcanoe.com>
	<5.2.0.9.0.20030619074742.00ad5e88@mail.GreenwoodMap.com>
Message-ID: <16113.52623.347913.321592@ursus.waterpathcanoe.com>

>>>>> "Richard" == Richard Greenwood <Rich@greenwoodmap.com> writes:

Hi Richard,
Thanks for responding. I'm taking Frank's suggestion and rebuilding
using the latest software in CVS but did try your suggestions.

    >> I seem to have a misunderstanding about the use of gdalwarp and
    >> am hoping that someone can tell me what is wrong.  I am trying
    >> to prepare a GeoTiff image for use in mapserver.
    >> 
    >> I'm using gdalwarp to project a GeoTiff raster image.  The
    >> coordinates of the input file are in lat long.  After
    >> processing the file with gdalwarp, I used gdalinfo to examine
    >> the output file.  It appears that the coordinate system
    >> information is no longer there. Also, the corner coordinates in
    >> the output file are in pixels.
    >> 
    >> I was expecting gdalinfo to display information about the
    >> projected coordinate system.  Also, I expected the corner
    >> coordinates to be displayed in projected units (meters).  Is
    >> this the normal behavior for gdalwarp?  I'm concerned that I
    >> may have a configuration or build issue.
    >> 
    >> Thanks for your help, Rob

    Richard> Do you have your PROJ_LIB environment variable to point
    Richard> to the directory holding the "epsg" file.

The epsg file is found and I have used that notation to set the
projection successfully when using proj

    Richard> Alternatively you can define it something like: -t_srs
    Richard> "+proj=utm +ellps=GRS80 +zone=12 +north +datum=NAD83
    Richard> +units=m" (not your zone!). And if it was me, I'd also
    Richard> try defining you s_srs, too.

Tried it, same results. I should have added in my original post that
the resulting image file displays correctly so I think that the
projection works correctly.
Thanks for your help,
Rob

From warmerdam at pobox.com  Thu Jun 19 15:36:07 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] ECW Coordinate System Support
Message-ID: <3EF210A7.9010403@pobox.com>

Folks,

I was in looking at the ECW code for GDAL yesterday, and fooled myself into
implementing coordinate system reading support.  This is now committed.  Note
that is depends on the ecw_cs.dat file in the gdal/data directory.

If anyone tries it out and finds problems please file the bugs in bugzilla.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent




From TMitchell at lignum.com  Thu Jun 19 16:32:43 2003
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] ECW Coordinate System Support
Message-ID: <OF39E417D9.41D078DB-ON88256D4A.0070D44D-88256D4A.0070DC1C@com>

Right on, thanks Frank.  I'm sure to try it out in the future.


                                                                                                          
                      Frank Warmerdam                                                                     
                      <warmerdam@pobox.com>        To:       gdal-dev <gdal-dev@remotesensing.org>        
                      Sent by:                     cc:                                                    
                      gdal-dev-admin@remote        Fax to:                                                
                      sensing.org                  Subject:  [Gdal-dev] ECW Coordinate System Support     
                                                                                                          
                                                                                                          
                      06/19/2003 12:36 PM                                                                 
                      Please respond to                                                                   
                      gdal-dev                                                                            
                                                                                                          
                                                                                                          




Folks,

I was in looking at the ECW code for GDAL yesterday, and fooled myself into
implementing coordinate system reading support.  This is now committed.
Note
that is depends on the ecw_cs.dat file in the gdal/data directory.

If anyone tries it out and finds problems please file the bugs in bugzilla.

Best regards,

--
---------------------------------------+--------------------------------------

I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev






From rob at dataflowdesign.com  Thu Jun 19 23:01:07 2003
From: rob at dataflowdesign.com (R. Piepul)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Multiple definition of symbol error
Message-ID: <16114.30963.765665.262288@ursus.waterpathcanoe.com>

While attempting to build gdal, I get a multiply defined reference
for cpl_csv.o. Please advise me on handling this problem.

I'm using libgeotiff-1.2.0 and cvs snapshot for gdal-cvs-030619
Thank you,
Rob


. . . [snipped] . . .
gmake[1]: Leaving directory `/home/rob/installs/gdal-cvs-030619'
gmake ./libgdal.1.1.so
gmake[1]: Entering directory `/home/rob/installs/gdal-cvs-030619'
c++ -shared   ./frmts/o/*.o ./core/*.o ./port/*.o ./alg/*.o ./ogr/ogrct.o ./ogr/ogr_opt.o ./ogr/ogr_fromepsg.o ./ogr/ogr_srs_validate.o ./ogr/ogrutils.o ./ogr/ogr_srs_proj4.o ./ogr/ograssemblepolygon.o ./ogr/ogr_api.o ./ogr/ogrsf_frmts/generic/ogrregisterall.o ./ogr/ogrfeaturestyle.o ./ogr/ogrsf_frmts/ogrsf_frmts.a -L -lpq  ./gdal.a ./ogr/ogr.a ./gdal.a ./port/cpl.a -lmfhdf -ldf -L/usr/local -L/usr/local/lib -ljpeg -L/home/rob/local/lib -lgeotiff -L/home/rob/local/lib -ltiff -L/usr/local -L/usr/local/lib -lpng -L/usr/local -L/usr/local/lib -lgrass5 -lz -lm -lm \
        -o ./libgdal.1.1.so
/home/rob/local/lib/libgeotiff.a(cpl_csv.o): In function `CSVGetFileFieldId':
cpl_csv.o(.text+0x974): multiple definition of `CSVGetFileFieldId'
./port/cpl_csv.o(.text+0xa64): first defined here
/usr/libexec/elf/ld: Warning: size of symbol `CSVGetFileFieldId' changed from 115 to 104 in cpl_csv.o
gmake[1]: *** [libgdal.1.1.so] Error 1
gmake[1]: Leaving directory `/home/rob/installs/gdal-cvs-030619'
gmake: *** [check-lib] Error 2
$

From warmerdam at pobox.com  Thu Jun 19 23:21:45 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Multiple definition of symbol error
In-Reply-To: <16114.30963.765665.262288@ursus.waterpathcanoe.com>
References: <16114.30963.765665.262288@ursus.waterpathcanoe.com>
Message-ID: <3EF27DC9.1080006@pobox.com>

R. Piepul wrote:

> While attempting to build gdal, I get a multiply defined reference
> for cpl_csv.o. Please advise me on handling this problem.
> 
> I'm using libgeotiff-1.2.0 and cvs snapshot for gdal-cvs-030619
> Thank you,
> Rob

Rob,

I hate to say it, but I think this was a bug in the libgeotiff 1.2.0 release.
You will need to extract libgeotiff from CVS and build that to use with
GDAL.

Hopefully, I will produce a libgeotiff 1.2.1 release shortly.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From rob at dataflowdesign.com  Fri Jun 20 10:28:09 2003
From: rob at dataflowdesign.com (R. Piepul)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Multiple definition of symbol error
In-Reply-To: <3EF27DC9.1080006@pobox.com>
References: <16114.30963.765665.262288@ursus.waterpathcanoe.com>
	<3EF27DC9.1080006@pobox.com>
Message-ID: <16115.6649.25245.619842@ursus.waterpathcanoe.com>

>>>>> "Frank" == Frank Warmerdam <warmerdam@pobox.com> writes:

    Frank> R. Piepul wrote:
    >> While attempting to build gdal, I get a multiply defined
    >> reference for cpl_csv.o. Please advise me on handling this
    >> problem.
    >> 
    >> I'm using libgeotiff-1.2.0 and cvs snapshot for gdal-cvs-030619
    >> Thank you, Rob

    Frank> Rob,

    Frank> I hate to say it, but I think this was a bug in the
    Frank> libgeotiff 1.2.0 release.  You will need to extract
    Frank> libgeotiff from CVS and build that to use with GDAL.
Hi Frank,
How do I do this? Use cvs checkout? If so, what is CVSROOT and the
password?
Thanks,
Rob

    Frank> Hopefully, I will produce a libgeotiff 1.2.1 release
    Frank> shortly.

    Frank> Best regards,

    Frank> --

From warmerdam at pobox.com  Fri Jun 20 11:20:18 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: R: [Gdal-dev] Geotiff support and issues with libgeotiff/libtiff
In-Reply-To: <3EF0A86B.3060104@cae.co.za>
References: <A183DF60AC72D5119B990002A5749CB3044A16DF@ROMADG-MAIL01> <3EEF608A.2020306@cae.co.za> <20030617184827.GA14737@ak4719.spb.edu> <3EF0A86B.3060104@cae.co.za>
Message-ID: <3EF32632.6050802@pobox.com>

> I used 3.6.0beta, and everything works *much* better (maybe gdal's docs
> could list requirements for geotiff>=1.2.0 for external geotiff support,
> and geotiff could be documented as reqruiring libtiff>=3.6.0?).
> 
> Frank, if I may abuse this list for one more post on libgeotiff, there
> is a buglet in configure for libgeotiff's checks for proj, it checks to
> see if $PROJ_HOME/src is a directory, and if so, uses $PROJ_HOME/src to
> find libproj.a. So, if proj is installed with a prefix of /usr,
> configure checks for /usr/src, finds it, but doesn't find a libproj.a
> below it, since it is in /usr/lib.
> 
> This section need to be improved:
> 
>   if test -d $PROJ_HOME/src ; then
>     PROJ_HOME=$PROJ_HOME/src
>   fi
> 
> For the moment I just have this line in my spec file:
> perl -pi -e 's|test -d \$PROJ_HOME/src|false|g' configure
> 

Buchan,

I see this has already been fixed in CVS.  I will release a libgeotiff 1.2.1
today with this and a few other fixes.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From rob at dataflowdesign.com  Fri Jun 20 11:44:20 2003
From: rob at dataflowdesign.com (R. Piepul)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Multiple definition of symbol error
In-Reply-To: <16115.6649.25245.619842@ursus.waterpathcanoe.com>
References: <16114.30963.765665.262288@ursus.waterpathcanoe.com>
	<3EF27DC9.1080006@pobox.com>
	<16115.6649.25245.619842@ursus.waterpathcanoe.com>
Message-ID: <16115.11220.142614.613774@ursus.waterpathcanoe.com>

>>>>> "R" == R Piepul <rob@dataflowdesign.com> writes:

>>>>> "Frank" == Frank Warmerdam <warmerdam@pobox.com> writes:
    Frank> R. Piepul wrote:
    >>> While attempting to build gdal, I get a multiply defined
    >>> reference for cpl_csv.o. Please advise me on handling this
    >>> problem.
    >>> 
    >>> I'm using libgeotiff-1.2.0 and cvs snapshot for
    >>> gdal-cvs-030619 Thank you, Rob

    Frank> Rob,

    Frank> I hate to say it, but I think this was a bug in the
    Frank> libgeotiff 1.2.0 release.  You will need to extract
    Frank> libgeotiff from CVS and build that to use with GDAL.

    R> Hi Frank, How do I do this? Use cvs checkout? If so, what is
    R> CVSROOT and the password?  Thanks, Rob
Sorry for the previous post. I figured it out. I didn't see it on the
geotiff page. It's analogous to the cvs instructions on the gdal page:

cvs -d :pserver:anonymous@remotesensing.org:/cvsroot login
cvs -d :pserver:anonymous@remotesensing.org:/cvsroot co geotiff

    Frank> Hopefully, I will produce a libgeotiff 1.2.1 release
    Frank> shortly.

From rob at dataflowdesign.com  Sat Jun 21 14:04:17 2003
From: rob at dataflowdesign.com (R. Piepul)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Confusion with gdalwarp
In-Reply-To: <3EF1B9E6.8020607@pobox.com>
References: <16113.7108.977465.188896@ursus.waterpathcanoe.com>
	<3EF1B9E6.8020607@pobox.com>
Message-ID: <16116.40481.461814.819212@ursus.waterpathcanoe.com>

>>>>> "Frank" == Frank Warmerdam <warmerdam@pobox.com> writes:

    Frank> R. Piepul wrote:
    >> I seem to have a misunderstanding about the use of gdalwarp and
    >> am hoping that someone can tell me what is wrong.  I am trying
    >> to prepare a GeoTiff image for use in mapserver.

    Frank> ...

    >> $ gdalwarp -t_srs 'proj=utm zone=14' map.tif temp1.tif
    >> :0...10...20...30...40...50...60...70...80...90...100 - done.

    Frank> Rob,

    Frank> I would encourage you to explicitly include an ellipse in
    Frank> PROJ.4 declarations.  You are also encouraged to explicitly
    Frank> include a '+' in front of PROJ.4 options.  The above
    Frank> apparently works, but not because I have been careful to
    Frank> make it work.  So I would suggest:

    Frank>   -t_srs '+proj=utm +zone=14 +datum=NAD83'

    >> $ gdalinfo temp1.tif Driver: GTiff/GeoTIFF Size is 4879, 4536
    >> Coordinate System is `' Corner Coordinates: Upper Left ( 0.0,
    >> 0.0) Lower Left ( 0.0, 4536.0) Upper Right ( 4879.0, 0.0) Lower
    >> Right ( 4879.0, 4536.0) Center ( 2439.5, 2268.0) Band 1
    >> Block=4879x1 Type=Byte, ColorInterp=Gray $
    >> 
    >> 
    >> $ gdal-config --version 1.1.8 $ gdal-config --ogr-enabled yes $
    >> gdal-config --formats gxf gtiff hfa aigrid aaigrid ceos ceos2
    >> iso8211 bsb xpm sdts raw dted mem jdem envisat elas fit vrt
    >> usgsdem l1b nitf bmp hdf4 gif jpeg png grass

    Frank> This sounds like a bug in the GDAL 1.1.8 release with the
    Frank> GeoTIFF driver.  When it creates a new TIFF file with the
    Frank> Create() method instead of the CreateCopy() method it fails
    Frank> to write the coordinate system information out.  This bug
    Frank> was fixed a month or so after the GDAL 1.1.8 release.  I
    Frank> would encourage you to upgrade to the CVS snapshot code and
    Frank> perhaps even try using gdalwarptest which works similarly
    Frank> but uses a new more flexible algorithm.

Installed cvs snapshot of gdal and libgeotiff 1.2.1 and it all seems
to work. Thanks for everyone's help
Rob

From ben at vterrain.org  Tue Jun 24 23:43:04 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Reverse the effects of GDALAllRegister()?
In-Reply-To: <3EF0F8C3.507@pobox.com>
Message-ID: <00b001c33acb$e2d1d3c0$f400fe0a@TOPP2>

> From: Frank Warmerdam
> 
> > 	GDALAllRegister()
> > 
> > I looked for, but couldn't find, a way to tell GDAL to 
> > "unregister" and free all the drivers that it allocates
> > with GDALAllRegister().
> 
> Call GDALDestroyDriverManager().

Excellent!  Now how about OGR - is there a way to reverse the effects of
OGRRegisterAll()?  It looks like the following might do the trick:

 OGRSFDriverRegistrar *reg = OGRSFDriverRegistrar::GetRegistrar();
 delete reg;

Is that an advisable way?  A better way?

-Ben


From dron at ak4719.spb.edu  Wed Jun 25 05:18:56 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] [ANNOUNCE]: ASTER Level 1A/1b/2 products supported
Message-ID: <20030625091856.GA16181@ak4719.spb.edu>

Hi, folks,

I have made an update to HDF4 driver to support all widely used ASTER
products.

1. ASTER Level 1B. Bad news: georeferencing extraction for these datasets
   was completely wrong before. Sorry for it. So
   
   !!! IF YOU ARE USING ASTER LEVEL 1B PRODUCTS, UPDATE YOUR GDAL TO
   THE LATEST CVS SNAPSHOT !!!
   
   If you can't update immediately, just discard georeferencing
   information reported for Level 1B datasets.
   
   Good news: problem fixed now, both geotransform matrix and set of
   GCPs are properly extracted. You can use what do you want to warp the
   scene, results must be the same. Note, that for 3B band you should use
   GCPs, not the geotransform matrix (and matrix is not reported for this
   band).

2. ASTER Level 1A. Set of GCPs suitable for `gdalwarptest' reported.

3. ASTER Level 2. Tested with AST_07 and AST_09 on-demand products, but
   should work with other types too. Will be more testing in the future.

					Best regards,
					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From warmerdam at pobox.com  Wed Jun 25 08:49:44 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Reverse the effects of GDALAllRegister()?
In-Reply-To: <00b001c33acb$e2d1d3c0$f400fe0a@TOPP2>
References: <00b001c33acb$e2d1d3c0$f400fe0a@TOPP2>
Message-ID: <3EF99A68.5070600@pobox.com>

Ben Discoe wrote:
>>From: Frank Warmerdam
>>
>>
>>>	GDALAllRegister()
>>>
>>>I looked for, but couldn't find, a way to tell GDAL to 
>>>"unregister" and free all the drivers that it allocates
>>>with GDALAllRegister().
>>
>>Call GDALDestroyDriverManager().
> 
> 
> Excellent!  Now how about OGR - is there a way to reverse the effects of
> OGRRegisterAll()?  It looks like the following might do the trick:
> 
>  OGRSFDriverRegistrar *reg = OGRSFDriverRegistrar::GetRegistrar();
>  delete reg;
> 
> Is that an advisable way?  A better way?


Ben,

This is mechanism I use to cleanup in ogrinfo.cpp for finding memory leaks,
so yes it should be OK.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From pond_bear at hotmail.com  Wed Jun 25 13:56:06 2003
From: pond_bear at hotmail.com (pond bear)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] How to make gdal_translate?
Message-ID: <BAY8-F112t8gsVWDKpz00016c10@hotmail.com>

I want to make a small change on the source code of gdal_translate. How to 
make it by gcc?
Please tell me the command line for making the excutable file.
Thanks

University of North Dakota

_________________________________________________________________
Tired of spam? Get advanced junk mail protection with MSN 8. 
http://join.msn.com/?page=features/junkmail


From warmerdam at pobox.com  Wed Jun 25 14:13:03 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] How to make gdal_translate?
In-Reply-To: <BAY8-F112t8gsVWDKpz00016c10@hotmail.com>
References: <BAY8-F112t8gsVWDKpz00016c10@hotmail.com>
Message-ID: <3EF9E62F.4020900@pobox.com>

pond bear wrote:
> I want to make a small change on the source code of gdal_translate. How 
> to make it by gcc?
> Please tell me the command line for making the excutable file.
> Thanks
> 
> University of North Dakota

Pond Bear,

If you cd into the apps directory you can just type "make" to rebuild any
out of date utility programs after chaing the source, or "make gdal_translate"
to only rebuild gdal_translate.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From ben at vterrain.org  Wed Jun 25 21:09:39 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] GDAL/Shapelib support for "Boolean" fields
In-Reply-To: <3EF99A68.5070600@pobox.com>
Message-ID: <000001c33b7f$9ea27c40$f400fe0a@TOPP2>

I ran into trouble using Shapelib to read some SHP files today.  It
turns out that Shapelib defines the following fieldtypes:
  FTString = 0
  FTInteger = 1
  FTDouble = 2
  FTInvalid = 3

However, SHP appears to actually support a "Boolean" field type as well.
ArcView lets you create such a field, and then Shapelib tells me the
boolean field is FTInvalid.

This would probably be an easy thing to add support for.  Let me know if
i should take a stab at implementing it myself, or...?

Thanks,
Ben


From ben at vterrain.org  Thu Jun 26 00:16:50 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] datum.csv -> gdal_datum.csv?
In-Reply-To: <000001c33b7f$9ea27c40$f400fe0a@TOPP2>
Message-ID: <000f01c33b99$c542cbb0$f400fe0a@TOPP2>

The file gdal/data/datum.csv was removed from CVS and replaced by
gdal_datum.csv?  Did i miss something.  The files look superficially
similar, some reason for a name change?

-Ben


From ben at vterrain.org  Thu Jun 26 00:22:00 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] ETA for next version?
Message-ID: <001101c33b9a$7d85d0f0$f400fe0a@TOPP2>

Because of how much stuff has been changing, i have needed to keep
making sub-releases for my users, 118a, 118b, 118c.  It's been 6 months
since the last release, is there any kind of estimate for 1.1.9?

Thanks,
Ben


From ben at vterrain.org  Thu Jun 26 00:28:32 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] Separate naming for debug libraries on Windows
Message-ID: <001201c33b9b$67764640$f400fe0a@TOPP2>

I've discovered that because of some cross-over in passing memory
around, it's actually vital that applications using MSVC build with a
GDAL version using the same flavor of standard library - in particular,
debug vs. release.

The drawback to doing this is that the current makefiles (nmake.opt,
makefile.vc, etc.) produce the same name for the .lib and .dll for both
debug and release builds.  Trying to build both overwrites each other.
This is unlike nearly all other libraries that i have experience with,
e.g OSG create "osg.dll" in release and "osgd.dll" in debug.

So, i modified the MSVC makefiles to produce two sets of output files.
In release:
	gdal_i.lib
	gdal.dll (as before.)
In debug:
	gdal_i_dbg.lib
	gdal_dbg.dll

This allows the apps to link and run with the correct library and solves
all sorts of nasty memory-related crashes.

May i offer y'all the changed makefiles?

-Ben


From warmerdam at pobox.com  Thu Jun 26 01:43:51 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] ETA for next version?
In-Reply-To: <001101c33b9a$7d85d0f0$f400fe0a@TOPP2>
References: <001101c33b9a$7d85d0f0$f400fe0a@TOPP2>
Message-ID: <3EFA8817.90102@pobox.com>

Ben Discoe wrote:

> Because of how much stuff has been changing, i have needed to keep
> making sub-releases for my users, 118a, 118b, 118c.  It's been 6 months
> since the last release, is there any kind of estimate for 1.1.9?

Ben,

I have been thinking to issue a 1.1.9 real soon now.  Perhaps I should
put together a 1.1.9 candidate release before I take off next week for
holidays.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Thu Jun 26 09:06:41 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] datum.csv -> gdal_datum.csv?
In-Reply-To: <000f01c33b99$c542cbb0$f400fe0a@TOPP2>
References: <000f01c33b99$c542cbb0$f400fe0a@TOPP2>
Message-ID: <3EFAEFE1.7020808@pobox.com>

Ben Discoe wrote:
> The file gdal/data/datum.csv was removed from CVS and replaced by
> gdal_datum.csv?  Did i miss something.  The files look superficially
> similar, some reason for a name change?

Ben,

The file was previously a direct copy of the EPSG derived datum.csv
distributed with libgeotiff.  However, I have added a new column,
ESRI_DATUM_NAME, that isn't part of the EPSG table, nor is part of the
libgeotiff version of datum.csv.  So to avoid confusion I have renamed
the file.

As you might guess, the column is used as part of the OGRSpatialReference
services for converting between ESRI WKT .prj files and a more EPSG based
set of datum names.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Thu Jun 26 09:10:18 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] GDAL/Shapelib support for "Boolean" fields
In-Reply-To: <000001c33b7f$9ea27c40$f400fe0a@TOPP2>
References: <000001c33b7f$9ea27c40$f400fe0a@TOPP2>
Message-ID: <3EFAF0BA.40607@pobox.com>

Ben Discoe wrote:

> I ran into trouble using Shapelib to read some SHP files today.  It
> turns out that Shapelib defines the following fieldtypes:
>   FTString = 0
>   FTInteger = 1
>   FTDouble = 2
>   FTInvalid = 3
> 
> However, SHP appears to actually support a "Boolean" field type as well.
> ArcView lets you create such a field, and then Shapelib tells me the
> boolean field is FTInvalid.
> 
> This would probably be an easy thing to add support for.  Let me know if
> i should take a stab at implementing it myself, or...?

Ben,

Shapelib supports an FTLogical type which is intended to be for booleans.
I am not sure if it is well integrated at the OGR level.  Could you send me
sample dataset not reported properly by Shapelib?

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Fri Jun 27 09:43:15 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] JP2KAK Driver
Message-ID: <3EFC49F3.4070807@pobox.com>

Folks,

For anyone uses the JP2KAK Kakadu based driver, I have upgraded it to use
Kakadu 4.0.2.  The good news is that with the support for JP2 boxes built
into Kakadu 4 no custom patches are now required ... gdal can be built against
Kakadu 4 as distributed.

Later,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent




From ben at vterrain.org  Fri Jun 27 11:33:55 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] CPL_DLL CSVDeaccess
In-Reply-To: <3EFAF0BA.40607@pobox.com>
Message-ID: <009b01c33cc1$85b28610$f400fe0a@TOPP2>

I have discovered there is no way to clean up the CSV cache at exit,
unless you have called GDALAllRegister/GDALDestroyDriverManager which
triggers the GeoTIFF module to clean up.

Since the CSV stuff is used heavily by the OGR coordinate system stuff
(not just the GDAL/GeoTIFF code), there needs to be way for apps using
OGR to clean up the CSV cache.

I found that calling CSVDeaccess is sufficient, but the following tiny
change is needed on Windows:

RCS file: /cvsroot/osrs/gdal/port/cpl_csv.h,v
retrieving revision 1.1
63c63
< void  CSVDeaccess( const char * );
---
> void  CPL_DLL CSVDeaccess( const char * );

Thanks,
Ben


From ben at vterrain.org  Fri Jun 27 11:40:08 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] GDAL/Shapelib support for "Boolean" fields
In-Reply-To: <3EFAF0BA.40607@pobox.com>
Message-ID: <009c01c33cc2$637b8ff0$f400fe0a@TOPP2>

Frank,

Sorry about this.  FTLogical was apparently added late last year, and my
copy of shapefil.h was slightly older.  If you recall, i had to adopt a
mirror of shapefil.h because it is not part of the standard GDAL
libs/headers distribution, re: our discussion of how to expose Shapelib
to users of GDAL.

-Ben

> -----Original Message-----
> From: Frank Warmerdam
> Sent: Thursday, June 26, 2003 8:10 AM
> To: gdal-dev@remotesensing.org
> Subject: Re: [Gdal-dev] GDAL/Shapelib support for "Boolean" fields
> 
> Ben Discoe wrote:
> 
> > I ran into trouble using Shapelib to read some SHP files today.  It
> > turns out that Shapelib defines the following fieldtypes:
> >   FTString = 0
> >   FTInteger = 1
> >   FTDouble = 2
> >   FTInvalid = 3
> 
> Ben,
> 
> Shapelib supports an FTLogical type which is intended to be 
> for booleans.


From zhang at aero.und.edu  Fri Jun 27 11:54:56 2003
From: zhang at aero.und.edu (Xiaodong Zhang)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] spectrally subsetting
Message-ID: <3EFC68D0.70307@aero.und.edu>

Hi,

Just wondering how can I do a spectral subsetting with Gdal utilities. 
For example. output a 7 band landsat image with only first 3 bands.

Thanks
Xiaodong


From warmerdam at pobox.com  Fri Jun 27 12:19:50 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] spectrally subsetting
In-Reply-To: <3EFC68D0.70307@aero.und.edu>
References: <3EFC68D0.70307@aero.und.edu>
Message-ID: <3EFC6EA6.3040003@pobox.com>

Xiaodong Zhang wrote:

> Hi,
> 
> Just wondering how can I do a spectral subsetting with Gdal utilities. 
> For example. output a 7 band landsat image with only first 3 bands.

Hi,

The gdal_translate utility supports extracting a single band from a multi-band
source via the "-b <n>" commandline switch.  There is currently no super-handy
way of taking a selection of bands.  The gdal_merge.py utility (requires
python support) can be used to merge a set of single band files into a single
multi-band file.

It might be nice to modify the -b switch to support multiple bands, but I don't
see it happening immediately.

By the way, another way to do it would be to use gdal_translate to convert
to "vrt" format, which just writes out a little xml file describing where the
data should be read from.  You could then go into this and delete the bands
you don't want and then convert this vrt file to a real file format.

It can also be accomplished by scripting or at the C/C++ level of course.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Fri Jun 27 12:21:46 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] CPL_DLL CSVDeaccess
In-Reply-To: <009b01c33cc1$85b28610$f400fe0a@TOPP2>
References: <009b01c33cc1$85b28610$f400fe0a@TOPP2>
Message-ID: <3EFC6F1A.201@pobox.com>

Ben Discoe wrote:

> I have discovered there is no way to clean up the CSV cache at exit,
> unless you have called GDALAllRegister/GDALDestroyDriverManager which
> triggers the GeoTIFF module to clean up.
> 
> Since the CSV stuff is used heavily by the OGR coordinate system stuff
> (not just the GDAL/GeoTIFF code), there needs to be way for apps using
> OGR to clean up the CSV cache.
> 
> I found that calling CSVDeaccess is sufficient, but the following tiny
> change is needed on Windows:

Ben,

I have committed changes to cpl_csv.h to expose the whole CSV API.

There is of course the more general question of how to "unload" things
if only the OGR coordinate system services are being used.  I haven't got
a full solution for that yet.

Thanks,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Fri Jun 27 15:08:08 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] "core" renamed to "gcore"
Message-ID: <3EFC9618.6080705@pobox.com>

Folks,

This is just to warn that I am changing the name of the gdal/core directory
to gdal/gcore to avoid all the problems with configure scripts trying to
delete it.  Things will be in flux for a bit due to this.  Anyone with a
CVS tree checked out will need to do "cvs update -d" in the main gdal directory
to get the new directory checked out, and the old one will likely have to
be removed manually.

I expect to have a gdal-1.1.9 beta up for review later this afternoon.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Fri Jun 27 17:45:22 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] GDAL/OGR 1.1.9 Release
Message-ID: <3EFCBAF2.9090900@pobox.com>

Folks,

I have prepared a GDAL/OGR 1.1.9 release to capture the changes since
the December 1.1.8 release.  This new cut is the one required for MapServer
4.0.  Links for source can be found on the GDAL page:

  http://www.remotesensing.org/gdal/

For windows binaries, grab the OpenEV_FW 1.6.2 release from:

  ftp://ftp.remotesensing.org/gdal/openev/OpenEV_FW_162.zip

I have included an overview of changes since 1.1.8, though there are lots of
bugs fixes and minor features not mentioned here.  This release also has
a surprising number of direct code contributors - direct commits from at
least six people other than myself.

I am on vacation for a week now, so hopefully this cut isn't to badly broken.
If it is, I will leave it to Andrey to patch things up and issue a 1.1.9.1
patch release.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



GDAL 1.1.9 - Overview of Changes
--------------------------------

  o MrSID Driver: New for 1.1.9, read-only, includes good coordiante system
    support, and should be high performance.

  o ECW Driver: Now reads coordinate system information (but doesn't write).

  o HDF Driver: Added support for Hyperion Level 1, Aster Level 1A/1B/2, MODIS
    Level 1B(earth-view)/2/3, SeaWIFS Level 3.

  o L1B Driver: Now reads GCPs for georeferencing.

  o NITF Driver: Support for reading RPC, variety of bugs fixes for reading and
    writing.  Also some general RPC infrastructure added to GDAL.

  o JP2KAK Driver: Can be used with Kakadu 4.0.2 now.  Compatibility fixes
    for internal geotiff to improve compatibility with Mapping Science tools.
    Added palette support.

  o HFA (Imagine) Driver: Added read/write support for color table opacity.
    Added write support for large (spill) files.

  o "core" directory renamed to "gcore" to avoid confusing configure script.

  o Added support for GDAL_DATA environment variable to point to GDAL support
    data files (those in gdal/data directory).

  o Added GDALDataset::RasterIO() for more efficient reading of multiple bands
    in one request (in some cases anyways).

  o High performance warp api considered to be complete now, and substantially
    optimized.

  o gdal_merge.py: supported multiple bands, copying PCT.


OGR 1.1.9 - Overview of Changes
-------------------------------

  o Oracle Spatial: New generic read/write, and implemented highly optimized
    loading support.

  o Tiger driver: added support for TIGER/Line 2002 product.

  o GML driver:  now supports Xerces versions from 1.6 up to 2.3.  Lots of
    bugs fixes and improvements.   GML Geometry now in OGR core.

  o Improved support for translating to and from ESRI WKT, including a complete
    mapping between EPSG related ESRI datum names and OGR's expected names.

  o Improved support for alternate prime meridians in coordinate system code.

  o Shapefiles: Can write features with NULL geometry,

  o DGN: added 3d write support.

  o Implemented generic attribute indexing support (only used for shapefile
    at this point).  Use in SQL where clauses and ExecuteSQL().

  o WKT MULTIPOINT in/out formatting fixed.

  o Added SynToDisk() method on OGRDataset and OGRLayer.

  o Implemented "Web Coordinate Transformation Service" (ogr/wcts).

  o Implemented "in memory" format driver.

  o C API documented.




From gbuckmaster at cox.net  Fri Jun 27 21:02:01 2003
From: gbuckmaster at cox.net (Gerald Buckmaster)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] "core" renamed to "gcore"
In-Reply-To: <3EFC9618.6080705@pobox.com>
References: <3EFC9618.6080705@pobox.com>
Message-ID: <200306271802.01971.gbuckmaster@cox.net>

Frank,

My attempt to configure OpenEV really wants that core directory - what do I 
need to edit for configure to look for gcore directory instead...guess I 
could grep for it.

Gerald

Using requested GDAL_HOME of /usr/local/src/gdal
configure: error: 'Unable to find /usr/local/src/gdal/core directory, are you 
sure a
regular GDAL build tree can be found at /usr/local/src/gdal?'



On Friday 27 June 2003 12:08 pm, Frank Warmerdam wrote:
> Folks,
>
> This is just to warn that I am changing the name of the gdal/core directory
> to gdal/gcore to avoid all the problems with configure scripts trying to
> delete it.  Things will be in flux for a bit due to this.  Anyone with a
> CVS tree checked out will need to do "cvs update -d" in the main gdal
> directory to get the new directory checked out, and the old one will likely
> have to be removed manually.
>
> I expect to have a gdal-1.1.9 beta up for review later this afternoon.
>
> Best regards,


From alexamici at tiscali.it  Sat Jun 28 07:13:41 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] VERSION file still reports 1.1.8
Message-ID: <200306281313.41253.alexamici@tiscali.it>

Andrey,

this is just a subtelity, but the VERSION file in the top dir lagged behind!
this is not completely trivial since automatic build system expect
	version=$(shell cat VERSION)
to give you the actual version of the package (see debian/rules).

cheers,
alessandro


From alexamici at tiscali.it  Sat Jun 28 14:28:04 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] VERSION file still reports 1.1.8
In-Reply-To: <200306281313.41253.alexamici@tiscali.it>
References: <200306281313.41253.alexamici@tiscali.it>
Message-ID: <200306282028.04283.alexamici@tiscali.it>

On Saturday 28 June 2003 13:13, Alessandro Amici wrote:
> Andrey,
>
> this is just a subtelity, but the VERSION file in the top dir lagged
> behind! this is not completely trivial since automatic build system expect
> version=$(shell cat VERSION)
> to give you the actual version of the package (see debian/rules).

to be more precise: the current cvs VERSION file is ok (1.1.9), but the 
revision tagged gdal_1_1_9 still reports 1.1.8.

i don't know the status of the actual release since i didn't download the 
tarball yet (i simply did a cvs up -r gdal_1_1_9). so this might just be a 
problem with tha cvs tag.

cheers,
alessandro


From dron at ak4719.spb.edu  Sun Jun 29 16:38:00 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] VERSION file still reports 1.1.8
In-Reply-To: <200306282028.04283.alexamici@tiscali.it>
References: <200306281313.41253.alexamici@tiscali.it> <200306282028.04283.alexamici@tiscali.it>
Message-ID: <20030629203800.GA17755@ak4719.spb.edu>

On Sat, Jun 28, 2003 at 08:28:04PM +0200, Alessandro Amici wrote:
> > this is just a subtelity, but the VERSION file in the top dir lagged
> > behind! this is not completely trivial since automatic build system expect
> > version=$(shell cat VERSION)
> > to give you the actual version of the package (see debian/rules).
> to be more precise: the current cvs VERSION file is ok (1.1.9), but the 
> revision tagged gdal_1_1_9 still reports 1.1.8.
> i don't know the status of the actual release since i didn't download the 
> tarball yet (i simply did a cvs up -r gdal_1_1_9). so this might just be a 
> problem with tha cvs tag.

Alessandro,

I have retagged VERSION file so the problem should be resolved now.

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Sun Jun 29 16:42:25 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:51 2007
Subject: [Gdal-dev] GDAL/OGR 1.1.9 Release
In-Reply-To: <3EFCBAF2.9090900@pobox.com>
References: <3EFCBAF2.9090900@pobox.com>
Message-ID: <20030629204225.GB17755@ak4719.spb.edu>

On Fri, Jun 27, 2003 at 05:45:22PM -0400, Frank Warmerdam wrote:
> I have prepared a GDAL/OGR 1.1.9 release to capture the changes since
> the December 1.1.8 release.  This new cut is the one required for MapServer
> 4.0.  Links for source can be found on the GDAL page:
> 
>  http://www.remotesensing.org/gdal/

Hi folks,

It seems that Frank forgot to upload release tarballs.
I have packaged release distribution myself and now it is available at

 ftp://ftp.remotesensing.org/pub/gdal/gdal-1.1.9.tar.gz
 ftp://ftp.remotesensing.org/pub/gdal/gdal119.zip


					Regards,
					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

