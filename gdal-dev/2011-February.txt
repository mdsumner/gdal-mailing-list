From strk at keybit.net  Tue Feb  1 01:49:19 2011
From: strk at keybit.net (strk)
Date: Tue Feb  1 01:49:27 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
In-Reply-To: <4D47932D.8020904@daylongraphics.com>
References: <4D447C2B.3030002@pobox.com> <4D46BFFF.6050905@mapgears.com>
	<363D84D4-BAF3-4921-9151-DB98BFC30611@gmail.com>
	<4D46F122.6040800@daylongraphics.com> <4D471C51.2030000@pobox.com>
	<4D474A57.9020901@daylongraphics.com> <4D4753B4.3030606@gov.yk.ca>
	<4D47932D.8020904@daylongraphics.com>
Message-ID: <20110201064919.GR23689@keybit.net>

On Mon, Jan 31, 2011 at 08:59:25PM -0800, Ray Gardener wrote:
> I should ask, is it okay for commercial apps to include GPL'd drivers 
> currently? What would happen if my app included one? Do I have to wait 
> for it to be under LGPL?
> 
> I don't mind at all sharing any changes I may make to such drivers, but 
> if I can't even include the drivers, that seems excessive.

You can include the drivers, and your application can be commercial.
Only, you have to give your customers the rights to get your
application's source code, to modify it and to redistribute it.

If you don't want to do that, ask the GPL driver copyright holders
if they agree on you putting the code they allowed you to use, 
look at, modify and distribute into something they can NOT look at,
modify or distribute.

Sounds kind of unfair to me, but they may have a different opinion
(or business plan) on the matter.

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From userofgdal at gmail.com  Tue Feb  1 07:23:29 2011
From: userofgdal at gmail.com (user gdal)
Date: Tue Feb  1 07:23:31 2011
Subject: [gdal-dev] Geometric Correction and Resampling
Message-ID: <AANLkTi=PqS_OjNGkKCq_W1REyyDT22K_RyR8ZW5RUftE@mail.gmail.com>

Dear all,
I need, using GDAL, a Geometric Correction and Resampling program for
ERDAS img in C++/MFC. Can you please help me. If you don't have the
source code, would you please mail me the detailed algorithm(s) to
accomplish the task.

With many thanks,
 Ramesh
From chaitanya.ch at gmail.com  Tue Feb  1 07:33:54 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Feb  1 07:33:57 2011
Subject: [gdal-dev] Geometric Correction and Resampling
In-Reply-To: <AANLkTi=PqS_OjNGkKCq_W1REyyDT22K_RyR8ZW5RUftE@mail.gmail.com>
References: <AANLkTi=PqS_OjNGkKCq_W1REyyDT22K_RyR8ZW5RUftE@mail.gmail.com>
Message-ID: <AANLkTi=8T4DqcM+iDRd0biUZ2nxgcgN3zMk-xDSafC3S@mail.gmail.com>

Ramesh,

Look at the GDAL command line utility list at
http://www.gdal.org/gdal_utilities.html and decide on the functionality you
want out of them. You can use their source code at
http://trac.osgeo.org/gdal/browser/trunk/gdal/apps .

On Tue, Feb 1, 2011 at 5:53 PM, user gdal <userofgdal@gmail.com> wrote:

> Dear all,
> I need, using GDAL, a Geometric Correction and Resampling program for
> ERDAS img in C++/MFC. Can you please help me. If you don't have the
> source code, would you please mail me the detailed algorithm(s) to
> accomplish the task.
>
> With many thanks,
>  Ramesh
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110201/567c049e/attachment.html
From patrick.cannon at barcosoft.com  Tue Feb  1 08:04:44 2011
From: patrick.cannon at barcosoft.com (Patrick Cannon)
Date: Tue Feb  1 08:10:07 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
In-Reply-To: <20110201064919.GR23689@keybit.net>
References: <4D447C2B.3030002@pobox.com> <4D47932D.8020904@daylongraphics.com>
	<20110201064919.GR23689@keybit.net>
Message-ID: <201102010704.44341.patrick.cannon@barcosoft.com>

This is exactly why many commercial applications do not or can not port to 
Linux.

The GPL is a virus license, if you really wanted the code to be "free" it 
would be released under an MIT style license.  The GPL/LGPL is just another 
proprietary license scheme that is meant to prevent people from using the 
code in any commercial venture.  Which is OK if you are a government agency 
or a school.

There are many format suppliers that do not allow their IP to be exposed, 
Maptech is a good example.  The BSB 3 format was reverse engineered but, no 
one has gotten permission to "publish" the BSB 4 or 5 formats.

We supported this format on Linux and Mac and have signed license agreements 
that prevent the release of the code.  Which means we can not 
utilize "tainted" GPL/LGPL code in our applications.  Which is unfortunate 
for the users, as they do not have the "choice" of turning on other 
drivers.

I would agree with Ray, do not put the limiter in GDAL instead put it in the 
OSGeo4W code base. 

Best regards,
Patrick Cannon
Barco Software LLC
www.barcosoft.com
www.barcosoft.net

This message is intended solely for the use of the designated recipient(s),
and may contain confidential information. Any unauthorized disclosure;
copying or distribution of its contents is strictly prohibited. If you have
received this message in error, please destroy it and advise the sender
immediately by phone or facsimile. Reproduction or distribution of this
message and any attached materials is strictly prohibited.

On Tuesday 01 February 2011 12:49:19 am strk wrote:
> On Mon, Jan 31, 2011 at 08:59:25PM -0800, Ray Gardener wrote:
> > I should ask, is it okay for commercial apps to include GPL'd drivers
> > currently? What would happen if my app included one? Do I have to wait
> > for it to be under LGPL?
> >
> > I don't mind at all sharing any changes I may make to such drivers, but
> > if I can't even include the drivers, that seems excessive.
>
> You can include the drivers, and your application can be commercial.
> Only, you have to give your customers the rights to get your
> application's source code, to modify it and to redistribute it.
>
> If you don't want to do that, ask the GPL driver copyright holders
> if they agree on you putting the code they allowed you to use,
> look at, modify and distribute into something they can NOT look at,
> modify or distribute.
>
> Sounds kind of unfair to me, but they may have a different opinion
> (or business plan) on the matter.
>
> --strk;
>
>   ()   Free GIS & Flash consultant/developer
>   /\   http://strk.keybit.net/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From chaitanya.ch at gmail.com  Tue Feb  1 08:30:13 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Feb  1 08:30:15 2011
Subject: [gdal-dev] Gdalwarp -crop_to_cutline results in shifted raster
In-Reply-To: <BLU0-SMTP108BB67C40BEC3C61F3E311B2E50@phx.gbl>
References: <BLU0-SMTP108BB67C40BEC3C61F3E311B2E50@phx.gbl>
Message-ID: <AANLkTim-4xzO6Uask1m43SG1KLreiYvyMUUV9wBRXE5_@mail.gmail.com>

Marius,

Can you provide some sample data to investigate this? You can raise a ticket
at http://trac.osgeo.org/gdal/newticket and attach the data.

On Tue, Feb 1, 2011 at 8:12 AM, Marius Jigmond <mariusjigmond@hotmail.com>wrote:

> Hi Everyone,
>
> I am using the -crop_to_cutline option of gdalwarp but the resulting
> raster is slightly shifted. Both cutline shapefile and raster are using
> the same projection. On the sample raster dataset (pixel=28.5m) the
> shift is about 5m to the east and 3.5m to the north. Pixel values remain
> the same (so resampling doesn't take place, as expected).
>
> I should add that not adding -crop_to_cutline results in no shift.
> Commands I ran:
> (1) gdalwarp -cutline mask.shp -crop_to_cutline sample.tif cropped.tif
> result is shifted
>
> (2) gdalwarp -cutline mask.shp sample.tif out.tif
> result is not shifted
>
> A workaround would be using gdal_rasterize on after option (2) above.
>
> -marius
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110201/4eb2725a/attachment-0001.html
From strk at keybit.net  Tue Feb  1 09:21:41 2011
From: strk at keybit.net (strk)
Date: Tue Feb  1 09:21:55 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
In-Reply-To: <201102010704.44341.patrick.cannon@barcosoft.com>
References: <4D447C2B.3030002@pobox.com> <4D47932D.8020904@daylongraphics.com>
	<20110201064919.GR23689@keybit.net>
	<201102010704.44341.patrick.cannon@barcosoft.com>
Message-ID: <20110201142140.GA44659@keybit.net>

On Tue, Feb 01, 2011 at 07:04:44AM -0600, Patrick Cannon wrote:
> This is exactly why many commercial applications do not or can not port to 
> Linux.

Again: you mean "closed-source" applications here, not "commercial", right ?

> The GPL is a virus license, if you really wanted the code to be "free" it 
> would be released under an MIT style license.  The GPL/LGPL is just another 
> proprietary license scheme that is meant to prevent people from using the 
> code in any commercial venture.  Which is OK if you are a government agency 
> or a school.

I don't get this.
What prevents you from talking with the copyright holder of a GPL/LGPL
licenced software the same way you'd talk with the copyright holder of
a proprietary licensed software ?

> There are many format suppliers that do not allow their IP to be exposed, 
> Maptech is a good example.  The BSB 3 format was reverse engineered but, no 
> one has gotten permission to "publish" the BSB 4 or 5 formats.

This is a very good reason for NOT using such formats.

I don't see how you can blame people giving you the grant to USE and
MODIFY and REDISTRIBUTE their code for not helping the spread of
such trap formats. You should be grateful.

> We supported this format on Linux and Mac and have signed license agreements 
> that prevent the release of the code.  Which means we can not 
> utilize "tainted" GPL/LGPL code in our applications.  Which is unfortunate 
> for the users, as they do not have the "choice" of turning on other 
> drivers.

They have the choice of not using your software, being tainted by
a restricting license preventing them from looking at the code.

They do have the choice of using free software (be it commercial or not).

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From dmorissette at mapgears.com  Tue Feb  1 10:33:20 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue Feb  1 10:33:23 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
In-Reply-To: <20110201142140.GA44659@keybit.net>
References: <4D447C2B.3030002@pobox.com>
	<4D47932D.8020904@daylongraphics.com>	<20110201064919.GR23689@keybit.net>	<201102010704.44341.patrick.cannon@barcosoft.com>
	<20110201142140.GA44659@keybit.net>
Message-ID: <4D4827C0.2070309@mapgears.com>

On 11-02-01 09:21 AM, strk wrote:
> On Tue, Feb 01, 2011 at 07:04:44AM -0600, Patrick Cannon wrote:
>
>> The GPL is a virus license, if you really wanted the code to be "free" it
>> would be released under an MIT style license.  The GPL/LGPL is just another
>> proprietary license scheme that is meant to prevent people from using the
>> code in any commercial venture.  Which is OK if you are a government agency
>> or a school.
>
> I don't get this.
> What prevents you from talking with the copyright holder of a GPL/LGPL
> licenced software the same way you'd talk with the copyright holder of
> a proprietary licensed software ?
>

Unfortunately, due to the collaborative nature of open source software, 
there is not always (and actually very rarely) a single copyright holder 
to talk to in order to request a license change or exception. Take for 
instance GRASS and QGIS: who should one talk to?

I speak from experience: I had to refrain from using QGIS in a 
(closed-source) project for a client not long ago because of its GPL 
license. If there had been a single copyright holder I'd have talked to 
that person instead of starting from scratch, but with multiple 
copyright holders that simply made QGIS a no-go and the QGIS project as 
a whole lost some potential users and contributors.

-- 
Daniel Morissette
http://www.mapgears.com/
From rayg at daylongraphics.com  Tue Feb  1 11:04:59 2011
From: rayg at daylongraphics.com (Ray Gardener)
Date: Tue Feb  1 11:02:52 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
In-Reply-To: <20110201064919.GR23689@keybit.net>
References: <4D447C2B.3030002@pobox.com> <4D46BFFF.6050905@mapgears.com>
	<363D84D4-BAF3-4921-9151-DB98BFC30611@gmail.com>
	<4D46F122.6040800@daylongraphics.com> <4D471C51.2030000@pobox.com>
	<4D474A57.9020901@daylongraphics.com> <4D4753B4.3030606@gov.yk.ca>
	<4D47932D.8020904@daylongraphics.com>
	<20110201064919.GR23689@keybit.net>
Message-ID: <4D482F2B.1010206@daylongraphics.com>

Oh man. So over time, as more GPL'd drivers are written, the very 
purpose of GDAL gets watered down. It's not like people are going to 
develop MIT-licenced drivers if they see an existing GPL driver that 
does the job. At the very least, the motivation will be blunted.

The whole reason I went with GDAL was that it was reasonable in regards 
to commercial devs. Now there's going to be a situation where they get 
increasingly treated as second-class citizens.

It's unreasonable to disclose a large application just because drivers 
are GPL'd. It should be submission policy to GDAL that they're LGPL'd. 
Frank's gone to the trouble of creating an environment that is 
commercial agnostic, and now it's being undone.

Ray




On 1/31/2011 10:49 PM, strk wrote:

> You can include the drivers, and your application can be commercial.
> Only, you have to give your customers the rights to get your
> application's source code, to modify it and to redistribute it.
>
> If you don't want to do that, ask the GPL driver copyright holders
> if they agree on you putting the code they allowed you to use,
> look at, modify and distribute into something they can NOT look at,
> modify or distribute.
>
> Sounds kind of unfair to me, but they may have a different opinion
> (or business plan) on the matter.


From strk at keybit.net  Tue Feb  1 11:11:13 2011
From: strk at keybit.net (strk)
Date: Tue Feb  1 11:11:25 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
In-Reply-To: <4D4827C0.2070309@mapgears.com>
References: <4D447C2B.3030002@pobox.com> <4D47932D.8020904@daylongraphics.com>
	<20110201064919.GR23689@keybit.net>
	<201102010704.44341.patrick.cannon@barcosoft.com>
	<20110201142140.GA44659@keybit.net> <4D4827C0.2070309@mapgears.com>
Message-ID: <20110201161113.GD44659@keybit.net>

On Tue, Feb 01, 2011 at 10:33:20AM -0500, Daniel Morissette wrote:

> I speak from experience: I had to refrain from using QGIS in a 
> (closed-source) project for a client not long ago because of its GPL 
> license. If there had been a single copyright holder I'd have talked to 
> that person instead of starting from scratch, but with multiple 
> copyright holders that simply made QGIS a no-go and the QGIS project as 
> a whole lost some potential users and contributors.

How much did "starting from scratch" cost to you or your client ?
Was it worth the closed-source choice ?
I guess it was (or the client wouldn't have taken it)

Well, my hope is that choosing proprietary software will be increasly
less worth, thus I prefer licenses on the "free" plate of the balance.

--strk; 

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From warmerdam at pobox.com  Tue Feb  1 11:55:19 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb  1 11:55:22 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
In-Reply-To: <4D482F2B.1010206@daylongraphics.com>
References: <4D447C2B.3030002@pobox.com> <4D46BFFF.6050905@mapgears.com>
	<363D84D4-BAF3-4921-9151-DB98BFC30611@gmail.com>
	<4D46F122.6040800@daylongraphics.com> <4D471C51.2030000@pobox.com>
	<4D474A57.9020901@daylongraphics.com> <4D4753B4.3030606@gov.yk.ca>
	<4D47932D.8020904@daylongraphics.com>
	<20110201064919.GR23689@keybit.net>
	<4D482F2B.1010206@daylongraphics.com>
Message-ID: <4D483AF7.5020105@pobox.com>

On 11-02-01 11:04 AM, Ray Gardener wrote:
> Oh man. So over time, as more GPL'd drivers are written, the very purpose of
> GDAL gets watered down. It's not like people are going to develop MIT-licenced
> drivers if they see an existing GPL driver that does the job. At the very
> least, the motivation will be blunted.
>
> The whole reason I went with GDAL was that it was reasonable in regards to
> commercial devs. Now there's going to be a situation where they get
> increasingly treated as second-class citizens.
>
> It's unreasonable to disclose a large application just because drivers are
> GPL'd. It should be submission policy to GDAL that they're LGPL'd. Frank's gone
> to the trouble of creating an environment that is commercial agnostic, and now
> it's being undone.

Folks,

I would prefer that this RFC discussion not turn into a broad license
argument.  I accept the rights of software developers to offer their
product under proprietary, recriprocal or non-reciprocal licenses and we
as consumer need to take or leave the offered components on their own
terms.

GDAL is released under an MIT/X nonrecriprocal open source license
because I and others believe this allows us to serve and involve the
largest possible community.  When we have an option between a proprietary
driver or a nonreciprocal driver then we will choose the nonreciprocal
driver.  When we have a chose between a reciprocally licensed driver
and a non-reciprocally licensed driver we will choose the
nonreciprocally licensed driver.   But I do not accept a that GDAL
is made poorer by also having options for proprietary and reciprocal
drivers for purposes that we could not otherwise serve.

I don't see any evidence that GDAL is becoming more dependent on GPL
or proprietary drivers as time goes on.  Care has always been called
for by distributors of software based on GDAL.

Ray, Patrick and Howard have argued against taking on runtime responsibility
for license checking in GDAL.  I only very weakly grasp the argument so
it might be worth expanding on it.

But this RFC is not about whether there will be proprietary GDAL drivers,
or reciprocally licensed drivers.  There have been, are and will be.
The question is in what ways does it make sense for the project to help
support application developers and distributors in being license
compliant.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From matt.wilkie at gov.yk.ca  Tue Feb  1 12:23:44 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Tue Feb  1 12:23:49 2011
Subject: [gdal-dev] Licensing Policy for drivers and applications
In-Reply-To: <4D483AF7.5020105@pobox.com>
References: <4D447C2B.3030002@pobox.com>
	<4D46BFFF.6050905@mapgears.com>	<363D84D4-BAF3-4921-9151-DB98BFC30611@gmail.com>	<4D46F122.6040800@daylongraphics.com>
	<4D471C51.2030000@pobox.com>	<4D474A57.9020901@daylongraphics.com>
	<4D4753B4.3030606@gov.yk.ca>	<4D47932D.8020904@daylongraphics.com>	<20110201064919.GR23689@keybit.net>	<4D482F2B.1010206@daylongraphics.com>
	<4D483AF7.5020105@pobox.com>
Message-ID: <4D4841A0.70403@gov.yk.ca>

Well said Frank. Thank you.

matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From mariusjigmond at hotmail.com  Tue Feb  1 13:40:03 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Tue Feb  1 13:41:05 2011
Subject: [gdal-dev] Gdalwarp -crop_to_cutline results in shifted raster
In-Reply-To: <AANLkTim-4xzO6Uask1m43SG1KLreiYvyMUUV9wBRXE5_@mail.gmail.com>
References: <BLU0-SMTP108BB67C40BEC3C61F3E311B2E50@phx.gbl>,
	<AANLkTim-4xzO6Uask1m43SG1KLreiYvyMUUV9wBRXE5_@mail.gmail.com>
Message-ID: <SNT112-W169C947B7E38EAB04E27E9B2E50@phx.gbl>


Submitted as ticket# 3947 but I had to link the sample data because of size.
-marius

Date: Tue, 1 Feb 2011 19:00:13 +0530
Subject: Re: [gdal-dev] Gdalwarp -crop_to_cutline results in shifted raster
From: chaitanya.ch@gmail.com
To: mariusjigmond@hotmail.com
CC: gdal-dev@lists.osgeo.org

Marius,

Can you provide some sample data to investigate this? You can raise a ticket at http://trac.osgeo.org/gdal/newticket and attach the data.


On Tue, Feb 1, 2011 at 8:12 AM, Marius Jigmond <mariusjigmond@hotmail.com> wrote:

Hi Everyone,



I am using the -crop_to_cutline option of gdalwarp but the resulting

raster is slightly shifted. Both cutline shapefile and raster are using

the same projection. On the sample raster dataset (pixel=28.5m) the

shift is about 5m to the east and 3.5m to the north. Pixel values remain

the same (so resampling doesn't take place, as expected).



I should add that not adding -crop_to_cutline results in no shift.

Commands I ran:

(1) gdalwarp -cutline mask.shp -crop_to_cutline sample.tif cropped.tif

result is shifted



(2) gdalwarp -cutline mask.shp sample.tif out.tif

result is not shifted



A workaround would be using gdal_rasterize on after option (2) above.



-marius



_______________________________________________

gdal-dev mailing list

gdal-dev@lists.osgeo.org

http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/ 
+91-9494447584
17.2416N 80.1426E
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110201/3faed27e/attachment.html
From even.rouault at mines-paris.org  Tue Feb  1 13:50:25 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb  1 13:50:38 2011
Subject: [gdal-dev] creating .VRT files with the python bindings
In-Reply-To: <AANLkTimTby8eUfYt0xNpWh44U0HrtW5_1P+KfyBU5kZ8@mail.gmail.com>
References: <AANLkTimTby8eUfYt0xNpWh44U0HrtW5_1P+KfyBU5kZ8@mail.gmail.com>
Message-ID: <201102011950.26061.even.rouault@mines-paris.org>

Ricardo,

Basically the XML you pass with SetMetadataItem() is deserialized and 
serialized again, but the relativeToVRT element isn't part of the internal 
model of the VRT driver and is "recomputed" at serialization time, so this 
explains why it can change behind your back.

I think however that this has been fixed in GDAL 1.8.0 in 
http://trac.osgeo.org/gdal/changeset/20939

Best regards,

Even

Le mardi 01 f?vrier 2011 02:27:36, Ricardo Filipe Soares Garcia da a ?crit :
> Hello list
> I am trying to create a .VRT file to mosaic a bunch of HDF5 files. It
> is starting to work, except for the fact that I can't seem to set the
> relativeToVRT attribute of the SourceFilename tag to "0".
> 
> I've been adapting the online vrt tutorial[1] from C++ to Python. The
> tutorial says that relativeToVRT will default to "0", but I'm getting
> the exact opposite. It is defaulting to "1", and even if I try to set
> it to "0" explicitly when using the SetMetadataItem method, it will
> still be saved as a "1". I have included an excerpt of the code at the
> end of this message. I'll post the rest of it if it is relevant.
> 
> After saving the file, I can open a text editor and replace all the
> "1" with "0" and this fixes it, allowing me to get the desired
> visualization (on QGIS).
> 
> Am I doing something wrong here? Or is this possibly a bug? I'm using
> gdal 1.7.3, as available on the ubuntugis-unstable repository.
> 
> 
> Another question: is it possible to use derived bands via python
> bindings? I guess I'll have to write a pixel function and somehow
> register it with gdal...
> 
> [1] - http://www.gdal.org/gdal_vrttut.html
> 
> [2] - python code follows:
> 
> 
> def get_xml_source(fileName, dataSet, xSize, ySize, dType, blockX,
>                    blockY, sXOff, sYOff, sXSize, sYSize, dXOff,
>                    dYOff, dXSize, dYSize, relToVRT=0, band=1):
>     template = """
>     <SimpleSource>
>     <SourceFilename relativeToVRT='%i'>HDF5:%s://%s</SourceFilename>
>     <SourceBand>%i</SourceBand>
>     <SourceProperties RasterXSize='%i' RasterYSize='%i' DataType='%s'
> BlockXSize='%i' BlockYSize='%i' />
>     <SrcRect xOff='%i' yOff='%i' xSize='%i' ySize='%i' />
>     <DstRect xOff='%i' yOff='%i' xSize='%i' ySize='%i' />
>     </SimpleSource>
>     """
>     return template % (relToVRT, fileName, dataSet, band, xSize, ySize,
>                        dType, blockX, blockY, sXOff, sYOff, sXSize, sYSize,
>                        dXOff, dYOff, dXSize, dYSize)
> 
> .... somewhere down the code...
> 
> xmlSource = get_xml_source(lit, dataSet, xResolution, yResolution,
>                                    "Int16", blockXSize, blockYSize, 0, 0,
>                                    xResolution, yResolution, xOff, yOff,
>                                    xResolution, yResolution)
> outBand.SetMetadataItem("teste", xmlSource, "new_vrt_sources")
From ricardo.garcia.silva at gmail.com  Tue Feb  1 16:57:10 2011
From: ricardo.garcia.silva at gmail.com (Ricardo Filipe Soares Garcia da)
Date: Tue Feb  1 16:57:34 2011
Subject: [gdal-dev] creating .VRT files with the python bindings
In-Reply-To: <201102011950.26061.even.rouault@mines-paris.org>
References: <AANLkTimTby8eUfYt0xNpWh44U0HrtW5_1P+KfyBU5kZ8@mail.gmail.com>
	<201102011950.26061.even.rouault@mines-paris.org>
Message-ID: <AANLkTimzf4TnVK7RvEKCSdOF3JwZoxQOjnyR=kkdwufF@mail.gmail.com>

Hi Even, list

Since I don't have a chance to test gdal 1.8.0 at my machine, I
decided to apply an (ugly) hack to alter the VRT file after it is
created, changing all the 'relativeToVRT' values to '0'. It is working
fine.

About my other question:

- Is it possible to use derived bands via python bindings? I guess
I'll have to write a pixel function and somehow register it with
gdal...


My HDF5 files have a scaling factor that I'd like to correct through
the VRT. I guess this is one of the points in using derived bands. If
it can't be done with a derived band, is there other option?

Thanks


On Tue, Feb 1, 2011 at 6:50 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Ricardo,
>
> Basically the XML you pass with SetMetadataItem() is deserialized and
> serialized again, but the relativeToVRT element isn't part of the internal
> model of the VRT driver and is "recomputed" at serialization time, so this
> explains why it can change behind your back.
>
> I think however that this has been fixed in GDAL 1.8.0 in
> http://trac.osgeo.org/gdal/changeset/20939
>
> Best regards,
>
> Even
>
> Le mardi 01 f?vrier 2011 02:27:36, Ricardo Filipe Soares Garcia da a ?crit :
>> Hello list
>> I am trying to create a .VRT file to mosaic a bunch of HDF5 files. It
>> is starting to work, except for the fact that I can't seem to set the
>> relativeToVRT attribute of the SourceFilename tag to "0".
>>
>> I've been adapting the online vrt tutorial[1] from C++ to Python. The
>> tutorial says that relativeToVRT will default to "0", but I'm getting
>> the exact opposite. It is defaulting to "1", and even if I try to set
>> it to "0" explicitly when using the SetMetadataItem method, it will
>> still be saved as a "1". I have included an excerpt of the code at the
>> end of this message. I'll post the rest of it if it is relevant.
>>
>> After saving the file, I can open a text editor and replace all the
>> "1" with "0" and this fixes it, allowing me to get the desired
>> visualization (on QGIS).
>>
>> Am I doing something wrong here? Or is this possibly a bug? I'm using
>> gdal 1.7.3, as available on the ubuntugis-unstable repository.
>>
>>
>> Another question: is it possible to use derived bands via python
>> bindings? I guess I'll have to write a pixel function and somehow
>> register it with gdal...
>>
>> [1] - http://www.gdal.org/gdal_vrttut.html
>>
>> [2] - python code follows:
>>
>>
>> def get_xml_source(fileName, dataSet, xSize, ySize, dType, blockX,
>> ? ? ? ? ? ? ? ? ? ?blockY, sXOff, sYOff, sXSize, sYSize, dXOff,
>> ? ? ? ? ? ? ? ? ? ?dYOff, dXSize, dYSize, relToVRT=0, band=1):
>> ? ? template = """
>> ? ? <SimpleSource>
>> ? ? <SourceFilename relativeToVRT='%i'>HDF5:%s://%s</SourceFilename>
>> ? ? <SourceBand>%i</SourceBand>
>> ? ? <SourceProperties RasterXSize='%i' RasterYSize='%i' DataType='%s'
>> BlockXSize='%i' BlockYSize='%i' />
>> ? ? <SrcRect xOff='%i' yOff='%i' xSize='%i' ySize='%i' />
>> ? ? <DstRect xOff='%i' yOff='%i' xSize='%i' ySize='%i' />
>> ? ? </SimpleSource>
>> ? ? """
>> ? ? return template % (relToVRT, fileName, dataSet, band, xSize, ySize,
>> ? ? ? ? ? ? ? ? ? ? ? ?dType, blockX, blockY, sXOff, sYOff, sXSize, sYSize,
>> ? ? ? ? ? ? ? ? ? ? ? ?dXOff, dYOff, dXSize, dYSize)
>>
>> .... somewhere down the code...
>>
>> xmlSource = get_xml_source(lit, dataSet, xResolution, yResolution,
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?"Int16", blockXSize, blockYSize, 0, 0,
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?xResolution, yResolution, xOff, yOff,
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?xResolution, yResolution)
>> outBand.SetMetadataItem("teste", xmlSource, "new_vrt_sources")
>



-- 
___________________________ ___ __
Ricardo Garcia Silva
From even.rouault at mines-paris.org  Tue Feb  1 17:04:39 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb  1 17:04:52 2011
Subject: [gdal-dev] creating .VRT files with the python bindings
In-Reply-To: <AANLkTimzf4TnVK7RvEKCSdOF3JwZoxQOjnyR=kkdwufF@mail.gmail.com>
References: <AANLkTimTby8eUfYt0xNpWh44U0HrtW5_1P+KfyBU5kZ8@mail.gmail.com>
	<201102011950.26061.even.rouault@mines-paris.org>
	<AANLkTimzf4TnVK7RvEKCSdOF3JwZoxQOjnyR=kkdwufF@mail.gmail.com>
Message-ID: <201102012304.39254.even.rouault@mines-paris.org>

Le mardi 01 f?vrier 2011 22:57:10, Ricardo Filipe Soares Garcia da a ?crit :
> Hi Even, list
> 
> Since I don't have a chance to test gdal 1.8.0 at my machine, I
> decided to apply an (ugly) hack to alter the VRT file after it is
> created, changing all the 'relativeToVRT' values to '0'. It is working
> fine.

I imagine ubuntugis will be updated at some point to use GDAL 1.8.0

> 
> About my other question:
> 
> - Is it possible to use derived bands via python bindings? I guess
> I'll have to write a pixel function and somehow register it with
> gdal...

I don't think it is possible via python bindings. You probably need to use C++ 
for that. 

> 
> 
> My HDF5 files have a scaling factor that I'd like to correct through
> the VRT. I guess this is one of the points in using derived bands. If
> it can't be done with a derived band, is there other option?

Yes, instead of adding a <SimpleSource> use a <ComplexSource> than is an 
extension of <SimpleSource> that can have a <ScaleRatio> sub element. See 
http://www.gdal.org/gdal_vrttut.html

> 
> Thanks
> 
> 
> On Tue, Feb 1, 2011 at 6:50 PM, Even Rouault
> 
> <even.rouault@mines-paris.org> wrote:
> > Ricardo,
> > 
> > Basically the XML you pass with SetMetadataItem() is deserialized and
> > serialized again, but the relativeToVRT element isn't part of the
> > internal model of the VRT driver and is "recomputed" at serialization
> > time, so this explains why it can change behind your back.
> > 
> > I think however that this has been fixed in GDAL 1.8.0 in
> > http://trac.osgeo.org/gdal/changeset/20939
> > 
> > Best regards,
> > 
> > Even
> > 
> > Le mardi 01 f?vrier 2011 02:27:36, Ricardo Filipe Soares Garcia da a ?crit 
:
> >> Hello list
> >> I am trying to create a .VRT file to mosaic a bunch of HDF5 files. It
> >> is starting to work, except for the fact that I can't seem to set the
> >> relativeToVRT attribute of the SourceFilename tag to "0".
> >> 
> >> I've been adapting the online vrt tutorial[1] from C++ to Python. The
> >> tutorial says that relativeToVRT will default to "0", but I'm getting
> >> the exact opposite. It is defaulting to "1", and even if I try to set
> >> it to "0" explicitly when using the SetMetadataItem method, it will
> >> still be saved as a "1". I have included an excerpt of the code at the
> >> end of this message. I'll post the rest of it if it is relevant.
> >> 
> >> After saving the file, I can open a text editor and replace all the
> >> "1" with "0" and this fixes it, allowing me to get the desired
> >> visualization (on QGIS).
> >> 
> >> Am I doing something wrong here? Or is this possibly a bug? I'm using
> >> gdal 1.7.3, as available on the ubuntugis-unstable repository.
> >> 
> >> 
> >> Another question: is it possible to use derived bands via python
> >> bindings? I guess I'll have to write a pixel function and somehow
> >> register it with gdal...
> >> 
> >> [1] - http://www.gdal.org/gdal_vrttut.html
> >> 
> >> [2] - python code follows:
> >> 
> >> 
> >> def get_xml_source(fileName, dataSet, xSize, ySize, dType, blockX,
> >>                    blockY, sXOff, sYOff, sXSize, sYSize, dXOff,
> >>                    dYOff, dXSize, dYSize, relToVRT=0, band=1):
> >>     template = """
> >>     <SimpleSource>
> >>     <SourceFilename relativeToVRT='%i'>HDF5:%s://%s</SourceFilename>
> >>     <SourceBand>%i</SourceBand>
> >>     <SourceProperties RasterXSize='%i' RasterYSize='%i' DataType='%s'
> >> BlockXSize='%i' BlockYSize='%i' />
> >>     <SrcRect xOff='%i' yOff='%i' xSize='%i' ySize='%i' />
> >>     <DstRect xOff='%i' yOff='%i' xSize='%i' ySize='%i' />
> >>     </SimpleSource>
> >>     """
> >>     return template % (relToVRT, fileName, dataSet, band, xSize, ySize,
> >>                        dType, blockX, blockY, sXOff, sYOff, sXSize,
> >> sYSize, dXOff, dYOff, dXSize, dYSize)
> >> 
> >> .... somewhere down the code...
> >> 
> >> xmlSource = get_xml_source(lit, dataSet, xResolution, yResolution,
> >>                                    "Int16", blockXSize, blockYSize, 0,
> >> 0, xResolution, yResolution, xOff, yOff, xResolution, yResolution)
> >> outBand.SetMetadataItem("teste", xmlSource, "new_vrt_sources")
From mike.axelrod at pictometry.com  Wed Feb  2 10:13:23 2011
From: mike.axelrod at pictometry.com (Mike Axelrod)
Date: Wed Feb  2 10:13:29 2011
Subject: [gdal-dev] Can I use ogr2ogr to postgresql with security? Yes I
	can!
In-Reply-To: <AANLkTimx0BZ0Mw8sjkssfs91tWs4WoDDQS0nQ6QBsryO@mail.gmail.com>
References: <225359692369D14887515DB978A6A01E2E99888609@Aurora>
	<AANLkTimM7LnE+hCwBodSu41rdS+HMzkEf1QPv4pw1rbY@mail.gmail.com>
	<225359692369D14887515DB978A6A01E2E9988866D@Aurora>
	<225359692369D14887515DB978A6A01E2E9988867D@Aurora>
	<AANLkTimx0BZ0Mw8sjkssfs91tWs4WoDDQS0nQ6QBsryO@mail.gmail.com>
Message-ID: <225359692369D14887515DB978A6A01E2E99888C41@Aurora>

Success!  So here are some notes on this in hopes it may help some others trying to do the same.

Assuming you don?t want to maintain you?re own builds and you just want to use the windows binaries of GDAl for tools like ogr2ogr, etc. enabling SSL postgres should be as simple as dropping in a replacement for libpq.dll.  But of course it is not.

Dependencies, dependencies dependences

You can get a tool like dependency walker an/or just painfully sit and watch the errors pop up as you bring in the other needed dlls.  After you bring in the other dlls then things start to work and you can use sslmode=require in your postgress connection string to create a secure connection.  (this assumes you set up your postfgres server, you?ll have to rtfm on that(, but that?s not too bad,  on unix just make sure your permissions and ownership on server.key are correct as this is not well documented).

Also you may want to be careful about which version of libpq.dll you bring in.  In my case I was successful with libpq.dll version 8.4.7.1127 obtained from the windows binary bundle from the postgres web site.  I can?t confirm if the 9.x version work in this scenario.  (This where I first ran into trouble, but I need to do more testing on this)

Finally I had to add the following dependant dlls; comerr32.dll, gssapi32.dll, k5sprt32.dll, krb5_32.dll, libiconv-2.dll, libintl-8.dll along with libpq.dll and then all was good.

Mike

Mike Axelrod, Software Engineer
Pictometry International Corp.
Suite A, 100 Town Centre Drive, Rochester, NY 14623
Phone: 585-775-7711
E-mail: mike.axelrod@pictometry.com<mailto:mike.axelrod@pictometry.com> Web: http://www.Pictometry.com/<http://www.pictometry.com/>

________________________________
From: Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com]
Sent: Thursday, January 27, 2011 4:12 PM
To: Mike Axelrod
Cc: gdal-dev@lists.osgeo.org; szekerest@gmail.com
Subject: Re: [gdal-dev] Can I use ogr2ogr to postgresql with security?

Mike,

To use SSL mode with OGR, your pqlib should be built with SSL support.
On Fri, Jan 28, 2011 at 2:09 AM, Mike Axelrod <mike.axelrod@pictometry.com<mailto:mike.axelrod@pictometry.com>> wrote:
So it seems the build I?m using may not support ssl, I run ogrinfo with sslmode=prefer I connect ok, but when I set sslmode=require I get this error:

---------------------------
Details...
---------------------------
call to ogrinfo failed: ERROR 1: PQconnectdb failed.
sslmode value "require" invalid when SSL support is not compiled in

________________________________
From: gdal-dev-bounces@lists.osgeo.org<mailto:gdal-dev-bounces@lists.osgeo.org> [mailto:gdal-dev-bounces@lists.osgeo.org<mailto:gdal-dev-bounces@lists.osgeo.org>] On Behalf Of Mike Axelrod
Sent: Thursday, January 27, 2011 3:21 PM
To: Chaitanya kumar CH

Cc: gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
Subject: RE: [gdal-dev] Can I use ogr2ogr to postgresql with security?

Thank you, I?ll be trying that out as soon as I get our postgresql server configured with ssl.  Do you know if the postgresql public key is required on the client side?  I see references to a ~/.postgresql/postgresql.key being available to the client. But I?m not clear if this is required or an option.

BTW I?m currently using the win32 SDK version of ogr2ogr that is distributed here => http://vbkto.dyndns.org/sdk/, I?m hoping these builds support SSL.  Can anybody confirm?

Mike

________________________________
From: Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com<mailto:chaitanya.ch@gmail.com>]
Sent: Thursday, January 27, 2011 2:56 PM
To: Mike Axelrod
Cc: gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
Subject: Re: [gdal-dev] Can I use ogr2ogr to postgresql with security?

Mike,

OGR's postgresql/postgis driver makes the connection using PQconnectdb() method from the libpq library.
You can set the option 'sslmode' to 'require', 'verify-ca' or 'verify-full' for a secure connection. Look for the documentation of PQconnectdb() for further details.
On Fri, Jan 28, 2011 at 12:13 AM, Mike Axelrod <mike.axelrod@pictometry.com<mailto:mike.axelrod@pictometry.com>> wrote:
Does ogr2ogr (and ogrinfo) natively support secure connections to postgresql?

I need to run ogrinfo and ogr2ogr where the target is a postgresql server elsewhere on the network (in a different domain) and secure the communication.

Mike

Mike Axelrod, Software Engineer
Pictometry International Corp.
Suite A, 100 Town Centre Drive, Rochester, NY 14623
Phone: 585-775-7711
E-mail: mike.axelrod@pictometry.com<mailto:mike.axelrod@pictometry.com> Web: http://www.Pictometry.com/<http://www.pictometry.com/>

NOTICE: This message is covered by the Electronic Communications Privacy Act, Title 18, United States Code, Sections 2510-2521. This e-mail and any attached files are the exclusive property of Pictometry International Corp., are deemed privileged and confidential, and are intended solely for the use of the individual(s) or entity to whom this e-mail is addressed. If you are not one of the named recipient(s) or believe that you have received this message in error, please delete this e-mail and any attachments and notify the sender immediately. Any other use, re-creation, dissemination, forwarding or copying of this e-mail is strictly prohibited and may be unlawful.

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
NOTICE: This message is covered by the Electronic Communications Privacy Act, Title 18, United States Code, Sections 2510-2521. This e-mail and any attached files are the exclusive property of Pictometry International Corp., are deemed privileged and confidential, and are intended solely for the use of the individual(s) or entity to whom this e-mail is addressed. If you are not one of the named recipient(s) or believe that you have received this message in error, please delete this e-mail and any attachments and notify the sender immediately. Any other use, re-creation, dissemination, forwarding or copying of this e-mail is strictly prohibited and may be unlawful.
NOTICE: This message is covered by the Electronic Communications Privacy Act, Title 18, United States Code, Sections 2510-2521. This e-mail and any attached files are the exclusive property of Pictometry International Corp., are deemed privileged and confidential, and are intended solely for the use of the individual(s) or entity to whom this e-mail is addressed. If you are not one of the named recipient(s) or believe that you have received this message in error, please delete this e-mail and any attachments and notify the sender immediately. Any other use, re-creation, dissemination, forwarding or copying of this e-mail is strictly prohibited and may be unlawful.



--
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E

NOTICE: This message is covered by the Electronic Communications Privacy Act, Title 18, United States Code, Sections 2510-2521. This e-mail and any attached files are the exclusive property of Pictometry International Corp., are deemed privileged and confidential, and are intended solely for the use of the individual(s) or entity to whom this e-mail is addressed. If you are not one of the named recipient(s) or believe that you have received this message in error, please delete this e-mail and any attachments and notify the sender immediately. Any other use, re-creation, dissemination, forwarding or copying of this e-mail is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110202/42d26d52/attachment-0001.html
From yehil at rafael.co.il  Wed Feb  2 10:19:22 2011
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Wed Feb  2 10:20:03 2011
Subject: [gdal-dev] NITF driver
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C06AF976FA3E@MAILBOXSERVER.rf.local>

Hi
Is it possible to write an NITF image file with text and graphics segments, or only image segments

Thanks
Yehiyam Livneh
**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110202/c47541a4/attachment.html
From even.rouault at mines-paris.org  Wed Feb  2 13:32:55 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb  2 13:33:10 2011
Subject: [gdal-dev] NITF driver
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C06AF976FA3E@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C06AF976FA3E@MAILBOXSERVER.rf.local>
Message-ID: <201102021932.55617.even.rouault@mines-paris.org>

Le mercredi 02 f?vrier 2011 16:19:22, Livneh Yehiyam a ?crit :
> Hi
> Is it possible to write an NITF image file with text and graphics segments,
> or only image segments
> 
Yes, you need GDAL 1.8.0. See http://gdal.org/frmt_nitf.html and more 
specifically http://gdal.org/frmt_nitf_advanced.html
From Jennings.Jay at geoeye.com  Wed Feb  2 17:20:04 2011
From: Jennings.Jay at geoeye.com (Jennings Jay)
Date: Wed Feb  2 17:20:58 2011
Subject: [gdal-dev] gdal_translate making NITF-JPEG2000 : memory exhausted?
Message-ID: <44EADB1AC2F19449B528A17643F417B99082A9883B@MS1.geoeye.com>


I have recently built GDAL including the optional JasPer library for JPEG-2000 support.  Using gdal_translate, I am able to convert smaller GeoTIFFs into NITFs with JPEG-2000 this way.  The first two attempts (both color uncompressed GeoTiff less than 200 MB) worked fine, with lossless compression and reduced in size by 67% and 59% respectively.

The problem came when I tried the same command on a bigger (950 MB) GeoTIFF:  gdal_translate apparently sucked up all available memory (as indicated by Physical Memory Free = 0 in Task Manager) then the app crashed.

Are there any workarounds in such a case ?  It looks like the "-multi" and "-wm" parameters aren't available in gdal_translate.

PS This is a Windows 7 64-bit machine with 8 GB RAM.

--Jay Jennings


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110202/f21fcf88/attachment.html
From warmerdam at pobox.com  Wed Feb  2 17:28:54 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb  2 17:28:57 2011
Subject: [gdal-dev] gdal_translate making NITF-JPEG2000 : memory exhausted?
In-Reply-To: <44EADB1AC2F19449B528A17643F417B99082A9883B@MS1.geoeye.com>
References: <44EADB1AC2F19449B528A17643F417B99082A9883B@MS1.geoeye.com>
Message-ID: <4D49DAA6.4010000@pobox.com>

On 11-02-02 05:20 PM, Jennings Jay wrote:
> I have recently built GDAL including the optional JasPer library for JPEG-2000
> support. Using gdal_translate, I am able to convert smaller GeoTIFFs into NITFs
> with JPEG-2000 this way. The first two attempts (both color uncompressed
> GeoTiff less than 200 MB) worked fine, with lossless compression and reduced in
> size by 67% and 59% respectively.
>
> The problem came when I tried the same command on a bigger (950 MB) GeoTIFF:
> gdal_translate apparently sucked up all available memory (as indicated by
> Physical Memory Free = 0 in Task Manager) then the app crashed.
>
> Are there any workarounds in such a case ? It looks like the ?-multi? and ?-wm?
> parameters aren?t available in gdal_translate.
>
> PS This is a Windows 7 64-bit machine with 8 GB RAM.

Jay,

This is a limitation of the JasPer based driver which is "whole image in
RAM at once" oriented due to the way the JasPer library is structured.
You could use the Kakadu or ECW based encoder though these have somewhat
involved licensing issues.  In theory we should be able to use the
OpenJPEG jpeg2000 implementation for this but I'm not aware of it having
been tested in the JPEG2000 in NITF case yet, and it may also not support
setting the jpeg2000 creation options to be truely NITF compliant.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From roger.loweth at gmail.com  Wed Feb  2 23:42:14 2011
From: roger.loweth at gmail.com (Roger Loweth)
Date: Wed Feb  2 23:42:16 2011
Subject: [gdal-dev] GDM2000 to BRSO
Message-ID: <AANLkTinsPJzkB_0bjcnHFC_=mmhyVGqCY60tZsrGQDxk@mail.gmail.com>

Good morning,

Here is a code snippet I'm using in gdal-python to transform a point from
GDM2000 (geodetic) to BRSO (projected):

*"""
		transform a pair of coordinates from the input CRS
		to the output GEOGCS and output PROJCS
		all codes are EPSG integers only
		(used internally)
		"""
		in_CRS = osr.SpatialReference()
		out_GEOGCS = osr.SpatialReference()
		out_PROJCS = osr.SpatialReference()
		in_CRS.ImportFromEPSG(inCRS)
		out_GEOGCS.ImportFromEPSG(outGEOGCS)
		out_PROJCS.ImportFromEPSG(outPROJCS)
		transform = osr.CoordinateTransformation(in_CRS, out_GEOGCS)
		coords = transform.TransformPoint(self.lon_value,self.lat_value)
		self.latitude = coords[1]
		self.longitude = coords[0]	
		proj_transform = osr.CoordinateTransformation(out_GEOGCS, out_PROJCS)
		proj_coords = proj_transform.TransformPoint(float(self.longitude),
float(self.latitude))
		self.easting = proj_coords[0]
		self.northing = proj_coords[1]*

I'm using EPSG codes 4742 (GDM2000) and 3376 (BRSO) with this test point:
? = 6? 52? 42.45022? N
? = 116? 50? 47.58835? E

This should give E/N of:
793704.631 mE 762081.047 mN

but I am getting 204217.0mE 318529.9mN. I have not made any changes to the
GDAL files gcs.csv or pcs.csv

Can anyone see what mistake I am making please?

Thanks, Roger
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110203/8431190f/attachment.html
From stefano.moratto at gmail.com  Thu Feb  3 07:22:47 2011
From: stefano.moratto at gmail.com (Stefano Moratto)
Date: Thu Feb  3 07:22:49 2011
Subject: [gdal-dev] Interrupt long operation
In-Reply-To: <4D46E5BA.6080408@pobox.com>
References: <AANLkTino9SiP_dWDiiDo2334GyZjzF0s1iUU1nxPDuie@mail.gmail.com>
	<4D46E5BA.6080408@pobox.com>
Message-ID: <AANLkTiksqufVcBUU+mGU7FZDAa9kQoc1e6No3cJF6uv=@mail.gmail.com>

Frank,
            thank you for your suggestion.
I added a GDALProgressFunc as you suggested.
In order to prevent blocking  in the rasterio now I check a state variable
indicating when I have to stop the reading.
Since I call rasterio foreach line of the destination bitmap I have added a
simple check of the state variable (eg.: if (terminate) then return). Very
simple!! I should  have think about it by myself.
Now my app can browse without blocking the openstreetmap dataset.

Best regards.
Stefano

-
Dr.Eng. Stefano Moratto
stefano.moratto@gmail.com
stefano.moratto@csiat.it
http://www.csiat.it - Traffic Optimization Software


On Mon, Jan 31, 2011 at 5:39 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> On 11-01-31 04:26 AM, Stefano Moratto wrote:
>
>> Hello,
>>           I need to interrupt a RasterIO  and warp calls before they have
>> been
>> ended.
>> The call is invoked in a background thread and  It may happen that the
>> user
>> changes the requested area in the main thread (GUI) (eg. a pan/scroll
>> operation).
>>
>
> Stefano,
>
> Algorithms which take a GDALProgressFunc are likely to be interruptable.
> Each time the progress function is invoked it has the opportunity to
> return an indicate that the operation has been cancelled by the user.
>
> So the warper can be canceled if you provide a customized progress
> function.  But RasterIO cannot since it has no progress function.
>
> If you want IO to be interruptible you would normally do it in modest
> sized chunks, though this can interfere with optimization of the IO in
> some cases.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110203/cad5dd30/attachment.html
From szekerest at gmail.com  Thu Feb  3 12:16:16 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Feb  3 12:16:19 2011
Subject: [gdal-dev] Packaging GDAL in OSGeo4w
Message-ID: <AANLkTinSv8frjzM7JbqO41p8uL=0nEznO1vpEUNnS6fo@mail.gmail.com>

Folks,

I'd be curious to know what would be the desired process to package specific
parts of GDAL (like the various plugins or bindings) in OSGeo4w.
Currently the only reasonable approach I have in my mind is that all of the
parts are generated from a single compilation (provided to use the same
compiler and dependencies)
In this regard would that be reasonable to include the actions in the
corresponding makefile.vc in the GDAL source tree. For example I would be
happy to maintain the csharp part in the csharp makefile.vc.
We could also store the common settings (like the version information in the
package names, location of the OSGeo4w installation etc.) in nmake.opt.


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110203/d7ff98e3/attachment.html
From anibal.pacheco at agesic.gub.uy  Thu Feb  3 13:30:40 2011
From: anibal.pacheco at agesic.gub.uy (=?ISO-8859-1?Q?An=EDbal_Pacheco?=)
Date: Thu Feb  3 13:40:39 2011
Subject: [gdal-dev] gdalbuildvrt
Message-ID: <4D4AF450.4010308@agesic.gub.uy>

Hi, I'm using gdalbuildvrt to produce a virtual raster layer which can 
then used in Mapnik and its ogcserver(WMS), everything works except that 
the result image is black & white and with a very poor resolution. The 2 
source tif files used in this test were both colored with a good 
resolution. Any ideas?
From warmerdam at pobox.com  Thu Feb  3 13:59:39 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb  3 13:59:42 2011
Subject: [gdal-dev] gdalbuildvrt
In-Reply-To: <4D4AF450.4010308@agesic.gub.uy>
References: <4D4AF450.4010308@agesic.gub.uy>
Message-ID: <4D4AFB1B.8060503@pobox.com>

On 11-02-03 01:30 PM, An?bal Pacheco wrote:
> Hi, I'm using gdalbuildvrt to produce a virtual raster layer which can then
> used in Mapnik and its ogcserver(WMS), everything works except that the result
> image is black & white and with a very poor resolution. The 2 source tif files
> used in this test were both colored with a good resolution. Any ideas?


An?bal,

I would suggest examining the resulting vrt to see if there is anything
odd about it.  Start with gdalinfo to see if it's resolution seems reasonable
and if in fact it is 3 bands.  You might want to run "gdalinfo -stats xx.vrt"
to get band statistics just to verify that the bands are radiometrically
distinct.  Also, check that the band pixel type is reasonable - the same
as the source files.

If that all looks ok, then perhaps visually examine the VRT with something
like QGIS.

After that it comes down to talking to Mapnik people about why there are
problems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Jennings.Jay at geoeye.com  Thu Feb  3 15:19:08 2011
From: Jennings.Jay at geoeye.com (Jay Jennings)
Date: Thu Feb  3 15:18:57 2011
Subject: [gdal-dev] gdal_translate making NITF-JPEG2000 : memory exhausted?
In-Reply-To: <4D49DAA6.4010000@pobox.com>
References: <44EADB1AC2F19449B528A17643F417B99082A9883B@MS1.geoeye.com>
	<4D49DAA6.4010000@pobox.com>
Message-ID: <44EADB1AC2F19449B528A17643F417B99082A98E3F@MS1.geoeye.com>

In fact, we do have a Kakadu license here... but I see in NITFCreateCopy() 
that JP2ECW and JasPer are the only two JPEG-2000 options currently supported.
Any idea how difficult it would be if I tried to implement JP2KAK 
as an additional option for NITF creation ?

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Wednesday, February 02, 2011 5:29 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] gdal_translate making NITF-JPEG2000 : memory exhausted?

On 11-02-02 05:20 PM, Jennings Jay wrote:
> I have recently built GDAL including the optional JasPer library for JPEG-2000
> support. Using gdal_translate, I am able to convert smaller GeoTIFFs into NITFs
> with JPEG-2000 this way. The first two attempts (both color uncompressed
> GeoTiff less than 200 MB) worked fine, with lossless compression and reduced in
> size by 67% and 59% respectively.
>
> The problem came when I tried the same command on a bigger (950 MB) GeoTIFF:
> gdal_translate apparently sucked up all available memory (as indicated by
> Physical Memory Free = 0 in Task Manager) then the app crashed.
>
> Are there any workarounds in such a case ? It looks like the "-multi" and "-wm"
> parameters aren't available in gdal_translate.
>
> PS This is a Windows 7 64-bit machine with 8 GB RAM.

Jay,

This is a limitation of the JasPer based driver which is "whole image in
RAM at once" oriented due to the way the JasPer library is structured.
You could use the Kakadu or ECW based encoder though these have somewhat
involved licensing issues.  In theory we should be able to use the
OpenJPEG jpeg2000 implementation for this but I'm not aware of it having
been tested in the JPEG2000 in NITF case yet, and it may also not support
setting the jpeg2000 creation options to be truely NITF compliant.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Thu Feb  3 15:24:57 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb  3 15:25:06 2011
Subject: [gdal-dev] gdal_translate making NITF-JPEG2000 : memory exhausted?
In-Reply-To: <44EADB1AC2F19449B528A17643F417B99082A98E3F@MS1.geoeye.com>
References: <44EADB1AC2F19449B528A17643F417B99082A9883B@MS1.geoeye.com>
	<4D49DAA6.4010000@pobox.com>
	<44EADB1AC2F19449B528A17643F417B99082A98E3F@MS1.geoeye.com>
Message-ID: <201102032124.57795.even.rouault@mines-paris.org>

Le jeudi 03 f?vrier 2011 21:19:08, Jay Jennings a ?crit :
> In fact, we do have a Kakadu license here... but I see in NITFCreateCopy()
> that JP2ECW and JasPer are the only two JPEG-2000 options currently
> supported. Any idea how difficult it would be if I tried to implement
> JP2KAK
> as an additional option for NITF creation ?

Actually, I just see that JP2KAK should be supported, but it is a very recent 
addition in GDAL trunk (1.9.0dev) that is not in 1.8. See 
http://trac.osgeo.org/gdal/changeset/21534

> 
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
> Sent: Wednesday, February 02, 2011 5:29 PM
> To: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] gdal_translate making NITF-JPEG2000 : memory
> exhausted?
> 
> On 11-02-02 05:20 PM, Jennings Jay wrote:
> > I have recently built GDAL including the optional JasPer library for
> > JPEG-2000 support. Using gdal_translate, I am able to convert smaller
> > GeoTIFFs into NITFs with JPEG-2000 this way. The first two attempts
> > (both color uncompressed GeoTiff less than 200 MB) worked fine, with
> > lossless compression and reduced in size by 67% and 59% respectively.
> > 
> > The problem came when I tried the same command on a bigger (950 MB)
> > GeoTIFF: gdal_translate apparently sucked up all available memory (as
> > indicated by Physical Memory Free = 0 in Task Manager) then the app
> > crashed.
> > 
> > Are there any workarounds in such a case ? It looks like the "-multi" and
> > "-wm" parameters aren't available in gdal_translate.
> > 
> > PS This is a Windows 7 64-bit machine with 8 GB RAM.
> 
> Jay,
> 
> This is a limitation of the JasPer based driver which is "whole image in
> RAM at once" oriented due to the way the JasPer library is structured.
> You could use the Kakadu or ECW based encoder though these have somewhat
> involved licensing issues.  In theory we should be able to use the
> OpenJPEG jpeg2000 implementation for this but I'm not aware of it having
> been tested in the JPEG2000 in NITF case yet, and it may also not support
> setting the jpeg2000 creation options to be truely NITF compliant.
> 
> Best regards,
From warmerdam at pobox.com  Thu Feb  3 15:28:48 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb  3 15:28:50 2011
Subject: [gdal-dev] gdal_translate making NITF-JPEG2000 : memory exhausted?
In-Reply-To: <44EADB1AC2F19449B528A17643F417B99082A98E3F@MS1.geoeye.com>
References: <44EADB1AC2F19449B528A17643F417B99082A9883B@MS1.geoeye.com>
	<4D49DAA6.4010000@pobox.com>
	<44EADB1AC2F19449B528A17643F417B99082A98E3F@MS1.geoeye.com>
Message-ID: <4D4B1000.3050508@pobox.com>

On 11-02-03 03:19 PM, Jay Jennings wrote:
> In fact, we do have a Kakadu license here... but I see in NITFCreateCopy()
> that JP2ECW and JasPer are the only two JPEG-2000 options currently supported.
> Any idea how difficult it would be if I tried to implement JP2KAK
> as an additional option for NITF creation ?

Jay,

I recently did some work on this, likely only in trunk not GDAL 1.8, in this
regard so I think you can use Kakadu now.  What I haven't done is figure out
what, if any, Kakadu creation options I should be using to make the result
proper per the specification for NITF.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From muhthrael at gmx.de  Thu Feb  3 18:26:15 2011
From: muhthrael at gmx.de (Horsto)
Date: Thu Feb  3 18:26:17 2011
Subject: [gdal-dev] Problem reprojecting DEM lat long to utm
Message-ID: <1296775575645-5990955.post@n2.nabble.com>


Hi everybody,

For hours I have been trying to reproject a dem-file to utm zone 40, using
following command:

gdalwarp -t_srs '+proj=utm +zone=40 +datum=WGS84' srtm_47_05.tif dem.tif

It seems that the coordinate system remains in old parameters. When I load
the file in Q-GIS, the map is not located on other correctly projected
UTM-40-maps but far away (as it should be with the Center coordinate 
52.5000005,  37.5000001).

Can anybody show me the mistake I am making?

Thanks for helping

Horsto

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Problem-reprojecting-DEM-lat-long-to-utm-tp5990955p5990955.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Thu Feb  3 18:31:55 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb  3 18:32:03 2011
Subject: [gdal-dev] Problem reprojecting DEM lat long to utm
In-Reply-To: <1296775575645-5990955.post@n2.nabble.com>
References: <1296775575645-5990955.post@n2.nabble.com>
Message-ID: <201102040031.55810.even.rouault@mines-paris.org>

Le vendredi 04 f?vrier 2011 00:26:15, Horsto a ?crit :
> Hi everybody,
> 
> For hours I have been trying to reproject a dem-file to utm zone 40, using
> following command:
> 
> gdalwarp -t_srs '+proj=utm +zone=40 +datum=WGS84' srtm_47_05.tif dem.tif
> 
> It seems that the coordinate system remains in old parameters. When I load
> the file in Q-GIS, the map is not located on other correctly projected
> UTM-40-maps but far away (as it should be with the Center coordinate
> 52.5000005,  37.5000001).
> 
> Can anybody show me the mistake I am making?
> 
> Thanks for helping
> 
> Horsto

Ah, one thing to know is that the target file is not overwritten if it already 
exists. So begin by removing it before running gdalwarp (or use the -overwrite 
option if you use GDAL 1.8.0)
From pim.vandenhelm at tno.nl  Fri Feb  4 02:54:19 2011
From: pim.vandenhelm at tno.nl (Helm, P.W. (Pim) van den)
Date: Fri Feb  4 02:55:27 2011
Subject: [gdal-dev] Compiling only OGR
Message-ID: <E4AFFB7FE0C9F44C80E634251C6284C35A8317@EXC-MBX01.tsn.tno.nl>

Hi all,

I am using only vertex calculation (OGR part) of GDAL. Using the GDAL library does the work perfectly, but I think this 6mb+ dll is rather large for my usage only. Further more , do I  really need the link to proj4 if I only refer to EPSG systems, since this also enlarges my project?

Is there a method to easily compile the OGR part of GDAL in OGR library? I am using a windows xp system and use VS6, VS2005 or VS2008 for compiling c/c++ code.

Any help or answer is welcome.

Kind regards,
Pim


This e-mail and its contents are subject to the DISCLAIMER at http://www.tno.nl/disclaimer/email.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110204/323abaef/attachment-0001.html
From userofgdal at gmail.com  Fri Feb  4 05:28:41 2011
From: userofgdal at gmail.com (user gdal)
Date: Fri Feb  4 05:28:43 2011
Subject: [gdal-dev] SOS! Zero pixel values in the output! Please help!
Message-ID: <AANLkTi=jNN2zrPDrhwrcOmZacBxxOEsRDYu-z9DDyaGb@mail.gmail.com>

Dear all,
I am new to GDAL and I was at fault in being too hasty in asking for
an advanced topic in my previous post.

I am facing a fundamental difficulty. The problem is to retrieve
projection and pixel data etc. from a source ERDAS .img file and copy
'as it is' to another file. For this, I wrote a small program in C++
whose relevant sections I am pasting here for kind perusal:

template<class T> void CIOImg_Templ<T>::AllocateMemory( )
{
 unsigned int b;

 buf=new T * [Band];
 if(!buf) HandleException("Memory Allocation Problem");

 for(b=0; b<Band; b++) // Bands in the input file
 {
 *(buf+b)=new T [Col];
 if(!(buf+b)) HandleException("Memory Allocation Problem");
 }
}   // Now buf is allocated with memory as buf[Band][Col]

template<class A> void CIOImg_Templ<A>::CreateOutputImg(GDALDataset *
const* InDS) // output dataset (DS) is defined as a class member
{
 char **options=NULL; /* saw an example of this kind in GDAL site */
 double trans[6];         // the transformation coefficients

 GDALDriver *driver=(*InDS)->GetDriver( );

 GDALAllRegister( );
 if(!driver) HandleException("Sorry, couldn't load the driver for your format");

 outds=(GDALDataset *) GDALOpen(outfilename, GA_Update);
 outds=driver->Create(outfilename, Col, Row, Band, datatype, options);
 // is it correct

 (*InDS)->GetGeoTransform(trans);
 outds->SetGeoTransform(trans);

 outds->SetProjection((*InDS)->GetProjectionRef( ));

 /* Seems there is much more to all this, but how to do? */
}

template<class T> void CIOImg_Templ<T>::Read(const unsigned int b,
GDALDataset* const *inds)
{
 ((*inds)->GetRasterBand(b+1))->RasterIO(GF_Read, 0, 0, Col, 1,
buf[b], Col, 1, datatype, 0, 0);   // able to read the pixel values
correctly into buffer (buf)
}

template<class T> void CIOImg_Templ<T>::Write(const unsigned int b,
GDALDataset** opds)
{
 ((*opds)->GetRasterBand(b+1))->RasterIO(GF_Write, 0, 0, Col, 1,
buf[b], Col, 1, datatype, 0, 0);

 */ (*opds)->RasterIO(GF_Write, 0, 0, Col, 1, buf[b], Col, 1,
datatype, 1, NULL, 0, 0, 0); */ /* Neither of these is working */
}

template<class T> void CIOImg_Templ<T>::ReadNWrite(GDALDataset * const *inds)
{
 unsigned int b, i=0;

 CreateOutputImg(inds);

 while(i<Row) // for each row
 {
 b=0;
 while(b<Band)
 {
 Read(b, inds); Write(b, &outds); // read row by row and write into a new file
 b++;
 }

 i++;
 }
}

The class's destructor closes the output dataset ("outds") using GDALClose.

I checked the input pixel values just after the call to the function
'Read'. They were read correctly (I verified with ERDAS software).
However, I am getting an image with exactly the same rows, columns and
bands as the input image but the output image contains only NULL (0)
values everywhere! Also, even if the input image is projected, I do
not see the projection info. in the output img. I understand that many
more parameters have to be retrieved and set properly for the output
img, I don't know how to.

Finally, I also chcked GDAL tutorials. It uses OGRSpatialReference,
apparently a class or a struct. Moreover, the example in the site ()
is limited only for UTM, whereas a general program must 'adapt' to the
required projection, if I'm correct. If I use OGR..., the program is
not compiling. Can you please provide me a solution.

In a nutshell (forgive me for the long message):

I didn't expect that I would stuck at this level itself, especially
the pixel values. I request your help in this regard and projection
info.

With many thanks,

Yours sincerely,
 Ramesh.
From anibal.pacheco at agesic.gub.uy  Fri Feb  4 08:41:20 2011
From: anibal.pacheco at agesic.gub.uy (=?ISO-8859-1?Q?An=EDbal_Pacheco?=)
Date: Fri Feb  4 08:41:26 2011
Subject: [gdal-dev] gdalbuildvrt
In-Reply-To: <4D4AFB1B.8060503@pobox.com>
References: <4D4AF450.4010308@agesic.gub.uy> <4D4AFB1B.8060503@pobox.com>
Message-ID: <4D4C0200.20206@agesic.gub.uy>

On 02/03/2011 04:59 PM, Frank Warmerdam wrote:
> On 11-02-03 01:30 PM, An?bal Pacheco wrote:
>> Hi, I'm using gdalbuildvrt to produce a virtual raster layer which can
>> then
>> used in Mapnik and its ogcserver(WMS), everything works except that
>> the result
>> image is black & white and with a very poor resolution. The 2 source
>> tif files
>> used in this test were both colored with a good resolution. Any ideas?
>
>
> An?bal,
>
> I would suggest examining the resulting vrt to see if there is anything
> odd about it. Start with gdalinfo to see if it's resolution seems
> reasonable
> and if in fact it is 3 bands. You might want to run "gdalinfo -stats
> xx.vrt"
> to get band statistics just to verify that the bands are radiometrically
> distinct. Also, check that the band pixel type is reasonable - the same
> as the source files.
>
> If that all looks ok, then perhaps visually examine the VRT with something
> like QGIS.
>
> After that it comes down to talking to Mapnik people about why there are
> problems.
>
> Best regards,


I think there is something wrong with the vrt because QGis does not find 
the 3rd band, here[0] is a screenshot to help. thanks

[0] http://imgur.com/OHnFg
From warmerdam at pobox.com  Fri Feb  4 08:54:19 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb  4 08:54:21 2011
Subject: [gdal-dev] Compiling only OGR
In-Reply-To: <E4AFFB7FE0C9F44C80E634251C6284C35A8317@EXC-MBX01.tsn.tno.nl>
References: <E4AFFB7FE0C9F44C80E634251C6284C35A8317@EXC-MBX01.tsn.tno.nl>
Message-ID: <4D4C050B.7060003@pobox.com>

On 11-02-04 02:54 AM, Helm, P.W. (Pim) van den wrote:
> Hi all,
> I am using only vertex calculation (OGR part) of GDAL. Using the GDAL library
> does the work perfectly, but I think this 6mb+ dll is rather large for my usage
> only.

Pim,

If you really want to trim down GDAL/OGR you will likely have to do some
fiddling.  I'd start by going through gdal/frmts/makefile.vc and removing
most formats from the EXTRAFLAGS list (each -DFRMT_xxx relates to one of the
subdirectories).

Because of relations to stuff on the OGR side you may find you need
to keep the FRMT_pcidsk and FRMT_sdts items.  You may also find that
you need to keep FRMT_gtiff because the geotiff machinery is used
to lookup EPSG coordinate systems, and FRMT_zlib (added below) for
other things using compression.

You might be able to skip building in all the stuff in
gdal/alg by removing it from gdal/makefile.vc but you will also
likely need to remove some entry points from BASE_INCLUDE in
gdal/makefile.vc.


> Further more, do I really need the link to proj4 if I only refer to EPSG
> systems, since this also enlarges my project?

PROJ.4 is usually loaded at runtime so if you don't need it just
don't distribute PROJ.DLL. Note that if you use
OGRCoordinateTransformation then you will need PROJ.4 even if you
just use EPSG coordinate systems.

It would be nice if your and others findings with doing slimmed down
builds could find its way into the trac wiki - perhaps in the

   http://trac.osgeo.org/gdal/wiki/BuildingOnWindowsWithMinimizedDrivers

page or elsewhere as appopriate off:

   http://trac.osgeo.org/gdal/wiki/BuildHints

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mariusjigmond at hotmail.com  Fri Feb  4 09:30:07 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Fri Feb  4 09:30:14 2011
Subject: [gdal-dev] gdalbuildvrt
In-Reply-To: <4D4C0200.20206@agesic.gub.uy>
References: <4D4AF450.4010308@agesic.gub.uy> <4D4AFB1B.8060503@pobox.com>
	<4D4C0200.20206@agesic.gub.uy>
Message-ID: <BLU0-SMTP211ACA60EAECEE6493933D2B2E60@phx.gbl>

An?bal,

Have you tried opening the .vrt file with a text editor? For each
source .tif there should be three entries in the .vrt file (one per
band). What does gdalinfo source.tif say?

-marius

On Fri, 2011-02-04 at 11:41 -0200, An?bal Pacheco wrote: 
> On 02/03/2011 04:59 PM, Frank Warmerdam wrote:
> > On 11-02-03 01:30 PM, An?bal Pacheco wrote:
> >> Hi, I'm using gdalbuildvrt to produce a virtual raster layer which can
> >> then
> >> used in Mapnik and its ogcserver(WMS), everything works except that
> >> the result
> >> image is black & white and with a very poor resolution. The 2 source
> >> tif files
> >> used in this test were both colored with a good resolution. Any ideas?
> >
> >
> > An?bal,
> >
> > I would suggest examining the resulting vrt to see if there is anything
> > odd about it. Start with gdalinfo to see if it's resolution seems
> > reasonable
> > and if in fact it is 3 bands. You might want to run "gdalinfo -stats
> > xx.vrt"
> > to get band statistics just to verify that the bands are radiometrically
> > distinct. Also, check that the band pixel type is reasonable - the same
> > as the source files.
> >
> > If that all looks ok, then perhaps visually examine the VRT with something
> > like QGIS.
> >
> > After that it comes down to talking to Mapnik people about why there are
> > problems.
> >
> > Best regards,
> 
> 
> I think there is something wrong with the vrt because QGis does not find 
> the 3rd band, here[0] is a screenshot to help. thanks
> 
> [0] http://imgur.com/OHnFg
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From mohammedrashadkm at gmail.com  Fri Feb  4 12:40:58 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Fri Feb  4 12:41:41 2011
Subject: [gdal-dev] Online Shapefile Viewer
Message-ID: <AANLkTinKnCgAta+1X3Yv3TsWRMgcJ2Cbo3Tv+=5FhdDF@mail.gmail.com>

Hi,
Sorry if my post doesnt belong this ML. I am posting because gis users may
find this application useful.
here is an online shapefile viewer which reads shapefile using OGR and
rendered on webpage.
http://lsi.iiit.ac.in/lsi/shpviewer/
Here the shapefile is directly rendered without mapserver, geoserver like
packages.The only library we used is GDAL


Please test it.

Looking forward your comments, BUGS && suggestions
--
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110204/3ade238e/attachment.html
From mariusjigmond at hotmail.com  Fri Feb  4 14:25:43 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Fri Feb  4 14:25:47 2011
Subject: [gdal-dev] gdal_rasterize 1.8.0 options
Message-ID: <BLU0-SMTP43BCC8D40A1F52FA0B542EB2E60@phx.gbl>

Hi Everyone,

Some of the options (I didn't test all) introduced with version 1.8.0
seem to behave strangely. Here's what I'm doing:
1. gdal_rasterize -burn 0 -i -l mask mask.shp sample.tif
works fine but I get the following warning:
Warning : the output raster dataset and the input vector layer do not
have the same SRS.
Results might be incorrect (no on-the-fly reprojection of input data).
even though both inputs use the same projection, EPSG:3844.

2. gdal_rasterize -burn 0 -i -a_srs EPSG:3844 -l mask mask.shp
sample.tif
fails with: '-tr xres yes' or '-ts xsize ysize' is required.

3. gdal_rasterize -burn 0 -i -a_nodata 0 -l mask mask.shp sample.tif
fails with: '-tr xres yes' or '-ts xsize ysize' is required.

>From http://www.gdal.org/gdal_rasterize.html it doesn't seem that -a_srs
or -a_nodata would require -tr or -ts. Am I doing something wrong?

-marius

From mariusjigmond at hotmail.com  Fri Feb  4 15:23:14 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Fri Feb  4 15:23:18 2011
Subject: [gdal-dev] gdal_rasterize 1.8.0 options
In-Reply-To: <4D4BEC31.4F75.00CE.0@co.lincoln.or.us>
References: <BLU0-SMTP43BCC8D40A1F52FA0B542EB2E60@phx.gbl>
	<4D4BEC31.4F75.00CE.0@co.lincoln.or.us>
Message-ID: <BLU0-SMTP18888C1BB07F475B9C56E6BB2E60@phx.gbl>

Eli,

Both input datasets (mask and raster) exist, which is why 1. works.
Option 1 doesn't use any of version 1.8.0 flags, which is why I thought
something else was introduced behind the scenes with the new flags.

-marius

On Fri, 2011-02-04 at 12:08 -0800, Eli Adam wrote: 
> Marius,
> 
> I don't know about 1. but possibilities for 2. and 3 below.  
> 
> > Hi Everyone,
> > 
> > Some of the options (I didn't test all) introduced with version 1.8.0
> > seem to behave strangely. Here's what I'm doing:
> > 1. gdal_rasterize -burn 0 -i -l mask mask.shp sample.tif
> > works fine but I get the following warning:
> > Warning : the output raster dataset and the input vector layer do not
> > have the same SRS.
> > Results might be incorrect (no on-the-fly reprojection of input data).
> > even though both inputs use the same projection, EPSG:3844.
> > 
> > 2. gdal_rasterize -burn 0 -i -a_srs EPSG:3844 -l mask mask.shp
> > sample.tif
> > fails with: '-tr xres yes' or '-ts xsize ysize' is required.
> > 
> > 3. gdal_rasterize -burn 0 -i -a_nodata 0 -l mask mask.shp sample.tif
> > fails with: '-tr xres yes' or '-ts xsize ysize' is required.
> > 
> >>From http://www.gdal.org/gdal_rasterize.html it doesn't seem that -a_srs
> > or -a_nodata would require -tr or -ts. Am I doing something wrong?
> 
> Does sample.tif exist?  If not, the docs say you need to use -tr or -ts, "Since GDAL 1.8.0, the target GDAL file can be created by gdal_rasterize. One of -tr or -ts option must be used in that case."  I don't know why that error would not also come from 1. 
> 
> 
> Bests, Eli
> 
> > 
> > -marius
> > 
> 
> 
> 

From EAdam at co.lincoln.or.us  Fri Feb  4 15:08:17 2011
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Fri Feb  4 15:29:33 2011
Subject: [gdal-dev] gdal_rasterize 1.8.0 options
In-Reply-To: <BLU0-SMTP43BCC8D40A1F52FA0B542EB2E60@phx.gbl>
References: <BLU0-SMTP43BCC8D40A1F52FA0B542EB2E60@phx.gbl>
Message-ID: <4D4BEC31.4F75.00CE.0@co.lincoln.or.us>

Marius,

I don't know about 1. but possibilities for 2. and 3 below.  

> Hi Everyone,
> 
> Some of the options (I didn't test all) introduced with version 1.8.0
> seem to behave strangely. Here's what I'm doing:
> 1. gdal_rasterize -burn 0 -i -l mask mask.shp sample.tif
> works fine but I get the following warning:
> Warning : the output raster dataset and the input vector layer do not
> have the same SRS.
> Results might be incorrect (no on-the-fly reprojection of input data).
> even though both inputs use the same projection, EPSG:3844.
> 
> 2. gdal_rasterize -burn 0 -i -a_srs EPSG:3844 -l mask mask.shp
> sample.tif
> fails with: '-tr xres yes' or '-ts xsize ysize' is required.
> 
> 3. gdal_rasterize -burn 0 -i -a_nodata 0 -l mask mask.shp sample.tif
> fails with: '-tr xres yes' or '-ts xsize ysize' is required.
> 
>>From http://www.gdal.org/gdal_rasterize.html it doesn't seem that -a_srs
> or -a_nodata would require -tr or -ts. Am I doing something wrong?

Does sample.tif exist?  If not, the docs say you need to use -tr or -ts, "Since GDAL 1.8.0, the target GDAL file can be created by gdal_rasterize. One of -tr or -ts option must be used in that case."  I don't know why that error would not also come from 1. 


Bests, Eli

> 
> -marius
> 


From mafunk at nmsu.edu  Fri Feb  4 17:48:22 2011
From: mafunk at nmsu.edu (Matt Funk)
Date: Fri Feb  4 17:48:30 2011
Subject: [gdal-dev] possible (probably) dumb question w.r.t to OpenGrADS and
	GDAL
Message-ID: <4D4C8236.2020806@nmsu.edu>

Hi,
i am fairly new to the earth science field and its implementation in
terms of programming.
I had a question that is probably fairly obvious to  most:
What is the difference/relationship between gdal and opengrads (or does
there even exist such a relationship?). Is one build on top of the
other. Are they competing products in some areas? Which has what place
where?

Grads description:
The Grid Analysis and Display System (GrADS)
<http://grads.iges.org/grads> is an interactive desktop tool for easy
access, manipulation, and visualization of earth science dat

GDal:
GDal is a translator library for raster geospatial data formats that is
released under an X/MIT
<http://trac.osgeo.org/gdal/wiki/FAQGeneral#WhatlicensedoesGDALOGRuse> style Open
Source <http://www.opensource.org/> license by the Open Source
Geospatial Foundation <http://www.osgeo.org/>.

So it looks to me both deal with gridded data (gdal->raster, gdal->Grid
Analysis ...), earth data etc...
I see that Grads describes itself as interactive ...

Anyway, does anyone know and if so could they enlighten me?

thanks
matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110204/c513ca18/attachment.html
From even.rouault at mines-paris.org  Fri Feb  4 18:06:22 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Feb  4 18:06:31 2011
Subject: [gdal-dev] gdal_rasterize 1.8.0 options
In-Reply-To: <BLU0-SMTP43BCC8D40A1F52FA0B542EB2E60@phx.gbl>
References: <BLU0-SMTP43BCC8D40A1F52FA0B542EB2E60@phx.gbl>
Message-ID: <201102050006.22865.even.rouault@mines-paris.org>

Le vendredi 04 f?vrier 2011 20:25:43, Marius Jigmond a ?crit :
> Hi Everyone,
> 
> Some of the options (I didn't test all) introduced with version 1.8.0
> seem to behave strangely. Here's what I'm doing:
> 1. gdal_rasterize -burn 0 -i -l mask mask.shp sample.tif
> works fine but I get the following warning:
> Warning : the output raster dataset and the input vector layer do not
> have the same SRS.
> Results might be incorrect (no on-the-fly reprojection of input data).
> even though both inputs use the same projection, EPSG:3844.

Unrelated with GDAL 1.8.0. The issue was that the transformation between OGC 
WKT and ESRI WKT didn't handle well the Oblique Stereographic projection. 
Fixed in trunk in http://trac.osgeo.org/gdal/changeset/21627

> 
> 2. gdal_rasterize -burn 0 -i -a_srs EPSG:3844 -l mask mask.shp
> sample.tif
> fails with: '-tr xres yes' or '-ts xsize ysize' is required.
> 
> 3. gdal_rasterize -burn 0 -i -a_nodata 0 -l mask mask.shp sample.tif
> fails with: '-tr xres yes' or '-ts xsize ysize' is required.
> 
> >From http://www.gdal.org/gdal_rasterize.html it doesn't seem that -a_srs
> or -a_nodata would require -tr or -ts. Am I doing something wrong?

When those 2 new options are used, they imply creating a new dataset. So they 
actually need to be used with -tr or -ts option.

> 
> -marius
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From mariusjigmond at hotmail.com  Fri Feb  4 18:26:06 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Fri Feb  4 18:26:09 2011
Subject: [gdal-dev] gdal_rasterize 1.8.0 options
In-Reply-To: <201102050006.22865.even.rouault@mines-paris.org>
References: <BLU0-SMTP43BCC8D40A1F52FA0B542EB2E60@phx.gbl>
	<201102050006.22865.even.rouault@mines-paris.org>
Message-ID: <BLU0-SMTP126F439A8454698C5372BC4B2E60@phx.gbl>



On Sat, 2011-02-05 at 00:06 +0100, Even Rouault wrote: 
> Le vendredi 04 f?vrier 2011 20:25:43, Marius Jigmond a ?crit :
> > Hi Everyone,
> > 
> > Some of the options (I didn't test all) introduced with version 1.8.0
> > seem to behave strangely. Here's what I'm doing:
> > 1. gdal_rasterize -burn 0 -i -l mask mask.shp sample.tif
> > works fine but I get the following warning:
> > Warning : the output raster dataset and the input vector layer do not
> > have the same SRS.
> > Results might be incorrect (no on-the-fly reprojection of input data).
> > even though both inputs use the same projection, EPSG:3844.
> 
> Unrelated with GDAL 1.8.0. The issue was that the transformation between OGC 
> WKT and ESRI WKT didn't handle well the Oblique Stereographic projection. 
> Fixed in trunk in http://trac.osgeo.org/gdal/changeset/21627

Thanks.

> 
> > 
> > 2. gdal_rasterize -burn 0 -i -a_srs EPSG:3844 -l mask mask.shp
> > sample.tif
> > fails with: '-tr xres yes' or '-ts xsize ysize' is required.
> > 
> > 3. gdal_rasterize -burn 0 -i -a_nodata 0 -l mask mask.shp sample.tif
> > fails with: '-tr xres yes' or '-ts xsize ysize' is required.
> > 
> > >From http://www.gdal.org/gdal_rasterize.html it doesn't seem that -a_srs
> > or -a_nodata would require -tr or -ts. Am I doing something wrong?
> 
> When those 2 new options are used, they imply creating a new dataset. So they 
> actually need to be used with -tr or -ts option.

Thanks for the clarification as it's not apparent from the web page.
Would have loved the -a_nodata to be available for existing datasets.

> 
> > 
> > -marius
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From maphew at gmail.com  Sat Feb  5 02:46:52 2011
From: maphew at gmail.com (Matt Wilkie)
Date: Sat Feb  5 02:47:14 2011
Subject: [gdal-dev] error adding ecw on Ubuntu 10.4 (lucid)
Message-ID: <AANLkTinrs6sWe4Jqi=bg2sXUNtdWPB3RjqFkjQU4-ufF@mail.gmail.com>

Hi Folks,

I'm trying to add ECW read support to gdal in Ubuntu 10.4 (Lucid)
amd64 and not having much luck. The end goal is simply to be able to
view ecw images in QGIS.

What I've tried to date follows.  Edited for space, things were not
actually installed all at the same time or in the order as written;
many false starts in the middle. I keep getting an error from
`gdal-ecw-build`: "checking for libNCSEcw.so or libecwj2... configure:
error: not found". The only reference I could find to this error was
on Mac OS-X from 3 years, with a note that a fix was committed to
source (http://trac.osgeo.org/gdal/ticket/2032). What am I doing
wrong/missing? thanks.

{{{
uname -a
#Linux ubuntu-desktop 2.6.32-21-generic #32-Ubuntu SMP Fri Apr 16
08:09:38 UTC 2010 x86_64 GNU/Linux

sudo add-apt-repository ppa:ubuntugis/ubuntugis-unstable
sudo apt-get update
sudo apt-get install qgis gdal-bin libgdal-ecw-src

# download libecwj2-3.3 and unpack to ~/src
cd ~/src
wget http://gentoo.cs.utah.edu/distfiles/libecwj2-3.3-2006-09-06.zip
unzip libecwj2-3.3-2006-09-06.zip

# build the SDK
cd libecwj2-3.3/Source
./configure
make
sudo make install

# build gdal with ecw plugin
sudo gdal-ecw-build ~/src/libecwj2-3.3/Source/

Extracting GDAL/ECW tarball
Building GDAL/ECW plugin
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking for ranlib... ranlib
checking for g++ -shared ... yes
checking for gdal-config... /usr/local/bin/gdal-config
using /usr/lib/gdal17plugins as GDAL shared library autoload directory
checking for libNCSEcw.so or libecwj2... configure: error: not found
in /home/matt/src/libecwj2-3.3/Source//lib or
/home/matt/src/libecwj2-3.3/Source//bin.
}}}


-- 
-matt
From even.rouault at mines-paris.org  Sat Feb  5 05:26:27 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Feb  5 05:26:37 2011
Subject: [gdal-dev] error adding ecw on Ubuntu 10.4 (lucid)
In-Reply-To: <AANLkTinrs6sWe4Jqi=bg2sXUNtdWPB3RjqFkjQU4-ufF@mail.gmail.com>
References: <AANLkTinrs6sWe4Jqi=bg2sXUNtdWPB3RjqFkjQU4-ufF@mail.gmail.com>
Message-ID: <201102051126.28015.even.rouault@mines-paris.org>

The error message 

"""using /usr/lib/gdal17plugins as GDAL shared library autoload directory
checking for libNCSEcw.so or libecwj2... configure: error: not found
in /home/matt/src/libecwj2-3.3/Source//lib or
/home/matt/src/libecwj2-3.3/Source//bin."""

leads me to think that you didn't specify the right directory. I guess gdal-
ecw-build needs the installation prefix of the ECW SDK, not its source 
directory.

So you should try "sudo gdal-ecw-build /usr/local" because you "./configure" 
the ECW SDK without any installation prefix.
From peifer at gmx.eu  Sat Feb  5 06:49:15 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Sat Feb  5 06:48:26 2011
Subject: [gdal-dev] Re: gdal_rasterize 1.8.0 options
In-Reply-To: <201102050006.22865.even.rouault@mines-paris.org>
References: <BLU0-SMTP43BCC8D40A1F52FA0B542EB2E60@phx.gbl>
	<201102050006.22865.even.rouault@mines-paris.org>
Message-ID: <4D4D393B.80603@gmx.eu>

On 05/02/2011 00:06, Even Rouault wrote:
>
> Unrelated with GDAL 1.8.0. The issue was that the transformation between OGC
> WKT and ESRI WKT didn't handle well the Oblique Stereographic projection.
> Fixed in trunk in http://trac.osgeo.org/gdal/changeset/21627
>

Even,

Once upon a time I opened http://trac.osgeo.org/gdal/ticket/2869, 
thinking that the reported issue could be fixed with a simple remapping 
between Double_Stereographic and Oblique_Stereographic projections.

Could you perhaps have a look at this 2-year old ticket?

Thanks in advance, Hermann
From even.rouault at mines-paris.org  Sat Feb  5 07:12:30 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Feb  5 07:12:39 2011
Subject: [gdal-dev] Re: gdal_rasterize 1.8.0 options
In-Reply-To: <4D4D393B.80603@gmx.eu>
References: <BLU0-SMTP43BCC8D40A1F52FA0B542EB2E60@phx.gbl>
	<201102050006.22865.even.rouault@mines-paris.org>
	<4D4D393B.80603@gmx.eu>
Message-ID: <201102051312.30392.even.rouault@mines-paris.org>

Le samedi 05 f?vrier 2011 12:49:15, Hermann Peifer a ?crit :
> On 05/02/2011 00:06, Even Rouault wrote:
> > Unrelated with GDAL 1.8.0. The issue was that the transformation between
> > OGC WKT and ESRI WKT didn't handle well the Oblique Stereographic
> > projection. Fixed in trunk in http://trac.osgeo.org/gdal/changeset/21627
> 
> Even,
> 
> Once upon a time I opened http://trac.osgeo.org/gdal/ticket/2869,
> thinking that the reported issue could be fixed with a simple remapping
> between Double_Stereographic and Oblique_Stereographic projections.
> 
> Could you perhaps have a look at this 2-year old ticket?
> 
> Thanks in advance, Hermann

Hermann,

I've just had a look, but not being neither Dutch nor a specialist of 
(stereographic) projections, I don't feel competent enough to do any action on 
it. Those tickets plus the reading of 
http://udig.refractions.net/files/docs/api-
geotools/org/geotools/referencing/operation/projection/Stereographic.html make 
me deeply confused and wondering if r21627 was really appropriate.
From peifer at gmx.eu  Sat Feb  5 08:47:17 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Sat Feb  5 08:46:55 2011
Subject: [gdal-dev] Re: gdal_rasterize 1.8.0 options
In-Reply-To: <201102051312.30392.even.rouault@mines-paris.org>
References: <BLU0-SMTP43BCC8D40A1F52FA0B542EB2E60@phx.gbl>	<201102050006.22865.even.rouault@mines-paris.org>	<4D4D393B.80603@gmx.eu>
	<201102051312.30392.even.rouault@mines-paris.org>
Message-ID: <4D4D54E5.2010802@gmx.eu>

On 05/02/2011 13:12, Even Rouault wrote:
>
> I've just had a look, but not being neither Dutch nor a specialist of
> (stereographic) projections, I don't feel competent enough to do any action on
> it. Those tickets plus the reading of
> http://udig.refractions.net/files/docs/api-
> geotools/org/geotools/referencing/operation/projection/Stereographic.html make
> me deeply confused and wondering if r21627 was really appropriate.

Hmm. This page confirms what I mentioned in ticket #2869: 
"Double_Stereographic" is simply the ESRI alias of 
"Oblique_Stereographic" (EPSG code 9809).

About r21627: I am afraid I do not understand enough about the inner 
workings of GDAL/OGR to make a judgement about whether this change was 
appropriate or not.

But by the end of the day and from what I remember when looking somewhat 
deeper into the issue, about 2 years ago: there is one stereographic 
projection (known as "the USGS formula" or "the approach given by 
Snyder") which translates into +proj=stere, and there is the other 
"Double_Stereographic", aka "Oblique_Stereographic" which is expected to 
end up as +proj=sterea.

Hermann
From mariusjigmond at hotmail.com  Sat Feb  5 10:35:36 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Sat Feb  5 10:35:40 2011
Subject: [gdal-dev] Re: gdal_rasterize 1.8.0 options
In-Reply-To: <201102051312.30392.even.rouault@mines-paris.org>
References: <BLU0-SMTP43BCC8D40A1F52FA0B542EB2E60@phx.gbl>
	<201102050006.22865.even.rouault@mines-paris.org>
	<4D4D393B.80603@gmx.eu>
	<201102051312.30392.even.rouault@mines-paris.org>
Message-ID: <BLU0-SMTP107401974CF44A72243C86B2E90@phx.gbl>

Even,

Hermann might be right. From reading several sources:
http://gge.unb.ca/Pubs/TR46.pdf
http://www.manifold.net/doc/double_stereographic.htm
it seems that double stereographic is oblique stereographic as long as
the origin is non-equatorial or non-polar.
The actual denomination "Double Stereographic" seems to be a ESRI
by-product that refers to "Oblique Stereographic". However, ESRI's own
descriptions of these projections are, at best, vague.

-marius

On Sat, 2011-02-05 at 13:12 +0100, Even Rouault wrote: 
> Le samedi 05 f?vrier 2011 12:49:15, Hermann Peifer a ?crit :
> > On 05/02/2011 00:06, Even Rouault wrote:
> > > Unrelated with GDAL 1.8.0. The issue was that the transformation between
> > > OGC WKT and ESRI WKT didn't handle well the Oblique Stereographic
> > > projection. Fixed in trunk in http://trac.osgeo.org/gdal/changeset/21627
> > 
> > Even,
> > 
> > Once upon a time I opened http://trac.osgeo.org/gdal/ticket/2869,
> > thinking that the reported issue could be fixed with a simple remapping
> > between Double_Stereographic and Oblique_Stereographic projections.
> > 
> > Could you perhaps have a look at this 2-year old ticket?
> > 
> > Thanks in advance, Hermann
> 
> Hermann,
> 
> I've just had a look, but not being neither Dutch nor a specialist of 
> (stereographic) projections, I don't feel competent enough to do any action on 
> it. Those tickets plus the reading of 
> http://udig.refractions.net/files/docs/api-
> geotools/org/geotools/referencing/operation/projection/Stereographic.html make 
> me deeply confused and wondering if r21627 was really appropriate.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From maphew at gmail.com  Sat Feb  5 14:18:16 2011
From: maphew at gmail.com (Matt Wilkie)
Date: Sat Feb  5 14:18:40 2011
Subject: [gdal-dev] error adding ecw on Ubuntu 10.4 (lucid)
In-Reply-To: <201102051126.28015.even.rouault@mines-paris.org>
References: <AANLkTinrs6sWe4Jqi=bg2sXUNtdWPB3RjqFkjQU4-ufF@mail.gmail.com>
	<201102051126.28015.even.rouault@mines-paris.org>
Message-ID: <AANLkTik52iugyGK5bFq693pEdq8-AuA1Ph4awtuzqnXv@mail.gmail.com>

> So you should try "sudo gdal-ecw-build /usr/local" because you "./configure"
> the ECW SDK without any installation prefix.

Ahh, thanks Even. That let me run gdal-ecw-build without error, though
there were lots of deprecation warnings.

 "gdalinfo --formats |grep -i ecw" still comes back empty however.
http://lists.osgeo.org/pipermail/ubuntu/2009-June/000054.html
indicates this should be enough, though apparently not for me. Any
other suggestions?

thanks,

-- 
-matt
From even.rouault at mines-paris.org  Sat Feb  5 14:24:16 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Feb  5 14:24:24 2011
Subject: [gdal-dev] error adding ecw on Ubuntu 10.4 (lucid)
In-Reply-To: <AANLkTik52iugyGK5bFq693pEdq8-AuA1Ph4awtuzqnXv@mail.gmail.com>
References: <AANLkTinrs6sWe4Jqi=bg2sXUNtdWPB3RjqFkjQU4-ufF@mail.gmail.com>
	<201102051126.28015.even.rouault@mines-paris.org>
	<AANLkTik52iugyGK5bFq693pEdq8-AuA1Ph4awtuzqnXv@mail.gmail.com>
Message-ID: <201102052024.16151.even.rouault@mines-paris.org>

Le samedi 05 f?vrier 2011 20:18:16, Matt Wilkie a ?crit :
> > So you should try "sudo gdal-ecw-build /usr/local" because you
> > "./configure" the ECW SDK without any installation prefix.
> 
> Ahh, thanks Even. That let me run gdal-ecw-build without error, though
> there were lots of deprecation warnings.
> 
>  "gdalinfo --formats |grep -i ecw" still comes back empty however.
> http://lists.osgeo.org/pipermail/ubuntu/2009-June/000054.html
> indicates this should be enough, though apparently not for me. Any
> other suggestions?
> 
> thanks,

Check that the gdal_ECW.so (or whatever is name is) is installed in the GDAL 
plugin directory and then do a ldd on this .so to see if the ECW SDK .so are 
reachable. You might need to adjust the /etc/ld.so.conf or LD_LIBRARY_PATH to 
add them.
From mariusjigmond at hotmail.com  Sat Feb  5 14:52:29 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Sat Feb  5 14:52:31 2011
Subject: [gdal-dev] error adding ecw on Ubuntu 10.4 (lucid)
In-Reply-To: <201102052024.16151.even.rouault@mines-paris.org>
References: <AANLkTinrs6sWe4Jqi=bg2sXUNtdWPB3RjqFkjQU4-ufF@mail.gmail.com>
	<201102051126.28015.even.rouault@mines-paris.org>
	<AANLkTik52iugyGK5bFq693pEdq8-AuA1Ph4awtuzqnXv@mail.gmail.com>
	<201102052024.16151.even.rouault@mines-paris.org>
Message-ID: <BLU0-SMTP202F07EF0E72792CA567168B2E90@phx.gbl>

Did you run "sudo ldconfig"?
http://trac.osgeo.org/ubuntugis/wiki/UserTutorials

-marius

On Sat, 2011-02-05 at 20:24 +0100, Even Rouault wrote: 
> Le samedi 05 f?vrier 2011 20:18:16, Matt Wilkie a ?crit :
> > > So you should try "sudo gdal-ecw-build /usr/local" because you
> > > "./configure" the ECW SDK without any installation prefix.
> > 
> > Ahh, thanks Even. That let me run gdal-ecw-build without error, though
> > there were lots of deprecation warnings.
> > 
> >  "gdalinfo --formats |grep -i ecw" still comes back empty however.
> > http://lists.osgeo.org/pipermail/ubuntu/2009-June/000054.html
> > indicates this should be enough, though apparently not for me. Any
> > other suggestions?
> > 
> > thanks,
> 
> Check that the gdal_ECW.so (or whatever is name is) is installed in the GDAL 
> plugin directory and then do a ldd on this .so to see if the ECW SDK .so are 
> reachable. You might need to adjust the /etc/ld.so.conf or LD_LIBRARY_PATH to 
> add them.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From ahmettemiz88 at gmail.com  Sat Feb  5 15:56:15 2011
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Sat Feb  5 15:56:18 2011
Subject: [gdal-dev] failing in making transparency
Message-ID: <AANLkTikaJ8+EPWM9S6CAooXgGUnUJh=Ap-mnOPcuCm5T@mail.gmail.com>

hello

I want to make nodata areas transparent.

here is what I did:

1.
$gdalinfo  -mm -noct duy_cat1.tif | grep -i 'nodata'
  NoData Value=65535

2.
 gdalwarp  -srcnodata 65535  -dstalpha duy_cat1.tif duy_cat14.tif

But, duy_cat14.tif looks full black

here is info of  outputfile(duy_cat14.tif):
~~~~~~~~~~
Driver: GTiff/GeoTIFF
Files: duy_cat14.tif
Size is 4677, 5527
Coordinate System is:
PROJCS["UTM Zone 36, Northern Hemisphere",
    GEOGCS[,
        DATUM["unknown",
            SPHEROID["unnamed",6378388,297.000000000005]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",33],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (437192.936421879974660,4649982.939232329837978)
Pixel Size = (20.004039786776190,-20.004039786776190)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  437192.936, 4649982.939) ( 32d14'30.03"E, 41d59'55.01"N)
Lower Left  (  437192.936, 4539420.611) ( 32d15'11.54"E, 41d 0'10.24"N)
Upper Right (  530751.831, 4649982.939) ( 33d22'16.70"E, 42d 0'1.87"N)
Lower Right (  530751.831, 4539420.611) ( 33d21'56.38"E, 41d 0'16.87"N)
Center      (  483972.383, 4594701.775) ( 32d48'28.68"E, 41d30'10.99"N)
Band 1 Block=4677x1 Type=UInt16, ColorInterp=Palette
    Computed Min/Max=0.000,65449.000
  Color Table (RGB with 65536 entries)
Band 2 Block=4677x1 Type=UInt16, ColorInterp=Alpha
    Computed Min/Max=0.000,255.000
~~~~~~~~~~~

could you tell me where the problem is ?

regards
-- 
Ahmet Temiz
Jeoloji M?h.
Planlama ve Zarar Azaltma Dairesi Ba?kanl???
Bilgi ve CBS grubu
Eski?ehir Yolu 10. km.
Lodumlu / Ankara
Tel : 0 312 2872680 / 1535
From chaitanya.ch at gmail.com  Sat Feb  5 23:43:35 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Feb  5 23:43:39 2011
Subject: [gdal-dev] failing in making transparency
In-Reply-To: <AANLkTikaJ8+EPWM9S6CAooXgGUnUJh=Ap-mnOPcuCm5T@mail.gmail.com>
References: <AANLkTikaJ8+EPWM9S6CAooXgGUnUJh=Ap-mnOPcuCm5T@mail.gmail.com>
Message-ID: <AANLkTik-bxL+ALYCLA-XqsgJXwUL32-SmGD=cPejXkeF@mail.gmail.com>

ahmet,

One likely reason for the dark image is that your viewer is assuming a range
of 0-65535 for the alpha values.
Check the histogram of the output image. In the histogram for the second
band, there should be a bunch of 0 valued pixels and 255 valued pixels.
Please provide a small sample image if the problem persists.


2011/2/6 ahmet temiz <ahmettemiz88@gmail.com>

> hello
>
> I want to make nodata areas transparent.
>
> here is what I did:
>
> 1.
> $gdalinfo  -mm -noct duy_cat1.tif | grep -i 'nodata'
>  NoData Value=65535
>
> 2.
>  gdalwarp  -srcnodata 65535  -dstalpha duy_cat1.tif duy_cat14.tif
>
> But, duy_cat14.tif looks full black
>
> here is info of  outputfile(duy_cat14.tif):
> ~~~~~~~~~~
> Driver: GTiff/GeoTIFF
> Files: duy_cat14.tif
> Size is 4677, 5527
> Coordinate System is:
> PROJCS["UTM Zone 36, Northern Hemisphere",
>    GEOGCS[,
>        DATUM["unknown",
>            SPHEROID["unnamed",6378388,297.000000000005]],
>        PRIMEM["Greenwich",0],
>        UNIT["degree",0.0174532925199433]],
>    PROJECTION["Transverse_Mercator"],
>    PARAMETER["latitude_of_origin",0],
>    PARAMETER["central_meridian",33],
>    PARAMETER["scale_factor",0.9996],
>    PARAMETER["false_easting",500000],
>    PARAMETER["false_northing",0],
>    UNIT["metre",1,
>        AUTHORITY["EPSG","9001"]]]
> Origin = (437192.936421879974660,4649982.939232329837978)
> Pixel Size = (20.004039786776190,-20.004039786776190)
> Metadata:
>  AREA_OR_POINT=Area
> Image Structure Metadata:
>  INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  (  437192.936, 4649982.939) ( 32d14'30.03"E, 41d59'55.01"N)
> Lower Left  (  437192.936, 4539420.611) ( 32d15'11.54"E, 41d 0'10.24"N)
> Upper Right (  530751.831, 4649982.939) ( 33d22'16.70"E, 42d 0'1.87"N)
> Lower Right (  530751.831, 4539420.611) ( 33d21'56.38"E, 41d 0'16.87"N)
> Center      (  483972.383, 4594701.775) ( 32d48'28.68"E, 41d30'10.99"N)
> Band 1 Block=4677x1 Type=UInt16, ColorInterp=Palette
>    Computed Min/Max=0.000,65449.000
>  Color Table (RGB with 65536 entries)
> Band 2 Block=4677x1 Type=UInt16, ColorInterp=Alpha
>    Computed Min/Max=0.000,255.000
> ~~~~~~~~~~~
>
> could you tell me where the problem is ?
>
> regards
> --
> Ahmet Temiz
> Jeoloji M?h.
> Planlama ve Zarar Azaltma Dairesi Ba?kanl???
> Bilgi ve CBS grubu
> Eski?ehir Yolu 10. km.
> Lodumlu / Ankara
> Tel : 0 312 2872680 / 1535
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110206/560c0b80/attachment.html
From even.rouault at mines-paris.org  Sun Feb  6 08:48:24 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Feb  6 08:48:33 2011
Subject: [gdal-dev] New OGR driver to read (French) EDIGEO exchange format
Message-ID: <201102061448.24114.even.rouault@mines-paris.org>

Hi all,

I wanted to mention that a new OGR driver has been added into GDAL/OGR trunk 
(1.9.0dev) to read files in the (French) EDIGEO exchange format. It has been 
mainly developed/tested for EDIGEO exchanges of the Plan Cadastral Informatis? 
(Digital Cadastral Plan).

As I have few test data, I am interested by the feedback of beta testers. The 
windows binaries with the new driver should be available from Monday 7 on 
http://vbkto.dyndns.org/sdk/ (download "MSVCXXXX (WinYY) -development" 
packages at the top of the first table). Obviously, people building GDAL by 
themselves can immediatly checkout and build GDAL trunk.

Best regards,

Even
From maphew at gmail.com  Sun Feb  6 12:47:45 2011
From: maphew at gmail.com (Matt Wilkie)
Date: Sun Feb  6 12:48:10 2011
Subject: [gdal-dev] error adding ecw on Ubuntu 10.4 (lucid)
In-Reply-To: <BLU0-SMTP202F07EF0E72792CA567168B2E90@phx.gbl>
References: <AANLkTinrs6sWe4Jqi=bg2sXUNtdWPB3RjqFkjQU4-ufF@mail.gmail.com>
	<201102051126.28015.even.rouault@mines-paris.org>
	<AANLkTik52iugyGK5bFq693pEdq8-AuA1Ph4awtuzqnXv@mail.gmail.com>
	<201102052024.16151.even.rouault@mines-paris.org>
	<BLU0-SMTP202F07EF0E72792CA567168B2E90@phx.gbl>
Message-ID: <AANLkTi=f5An8y_jPx+QPHDXCvba-oRivAaYjyasxEZUL@mail.gmail.com>

> Did you run "sudo ldconfig"?

yes

-- 
-matt
From maphew at gmail.com  Sun Feb  6 13:00:03 2011
From: maphew at gmail.com (Matt Wilkie)
Date: Sun Feb  6 13:00:27 2011
Subject: [gdal-dev] error adding ecw on Ubuntu 10.4 (lucid)
In-Reply-To: <201102052024.16151.even.rouault@mines-paris.org>
References: <AANLkTinrs6sWe4Jqi=bg2sXUNtdWPB3RjqFkjQU4-ufF@mail.gmail.com>
	<201102051126.28015.even.rouault@mines-paris.org>
	<AANLkTik52iugyGK5bFq693pEdq8-AuA1Ph4awtuzqnXv@mail.gmail.com>
	<201102052024.16151.even.rouault@mines-paris.org>
Message-ID: <AANLkTi=gTXhDQcWpcbZA2z+19iTZoOONR0bL57U9Omzk@mail.gmail.com>

> Check that the gdal_ECW.so (or whatever is name is) is installed in the GDAL
> plugin directory and then do a ldd on this .so to see if the ECW SDK .so are
> reachable. You might need to adjust the /etc/ld.so.conf or LD_LIBRARY_PATH to
> add them.

Is this searchable: ?

{{{
matt@ubuntu-desktop:~$ locate ECW.so
/usr/lib/gdal17plugins/gdal_ECW_JP2ECW.so
matt@ubuntu-desktop:~$ ldd /usr/lib/gdal17plugins/gdal_ECW_JP2ECW.so
	linux-vdso.so.1 =>  (0x00007ffff1d96000)
	libNCSEcw.so.0 => /usr/local/lib/libNCSEcw.so.0 (0x00007fbc071aa000)
	libNCSCnet.so.0 => /usr/local/lib/libNCSCnet.so.0 (0x00007fbc06f94000)
	libNCSUtil.so.0 => /usr/local/lib/libNCSUtil.so.0 (0x00007fbc06d6d000)
	libgdal.so.1 => /usr/local/lib/libgdal.so.1 (0x00007fbc06443000)
	libstdc++.so.6 => /usr/lib/libstdc++.so.6 (0x00007fbc0612f000)
	libm.so.6 => /lib/libm.so.6 (0x00007fbc05eab000)
	libgcc_s.so.1 => /lib/libgcc_s.so.1 (0x00007fbc05c94000)
	libc.so.6 => /lib/libc.so.6 (0x00007fbc05912000)
	libdl.so.2 => /lib/libdl.so.2 (0x00007fbc0570d000)
	librt.so.1 => /lib/librt.so.1 (0x00007fbc05505000)
	libsqlite3.so.0 => /usr/lib/libsqlite3.so.0 (0x00007fbc05278000)
	libpthread.so.0 => /lib/libpthread.so.0 (0x00007fbc0505a000)
	libexpat.so.1 => /lib/libexpat.so.1 (0x00007fbc04e31000)
	libjasper.so.1 => /usr/lib/libjasper.so.1 (0x00007fbc04bda000)
	libgif.so.4 => /usr/lib/libgif.so.4 (0x00007fbc049d0000)
	libjpeg.so.62 => /usr/lib/libjpeg.so.62 (0x00007fbc047ac000)
	libpng12.so.0 => /lib/libpng12.so.0 (0x00007fbc04585000)
	libpq.so.5 => /usr/lib/libpq.so.5 (0x00007fbc0435c000)
	libz.so.1 => /lib/libz.so.1 (0x00007fbc04145000)
	/lib64/ld-linux-x86-64.so.2 (0x00007fbc0772a000)
	libssl.so.0.9.8 => /lib/libssl.so.0.9.8 (0x00007fbc03ef4000)
	libcrypto.so.0.9.8 => /lib/libcrypto.so.0.9.8 (0x00007fbc03b64000)
	libkrb5.so.3 => /usr/lib/libkrb5.so.3 (0x00007fbc038a0000)
	libcom_err.so.2 => /lib/libcom_err.so.2 (0x00007fbc0369b000)
	libgssapi_krb5.so.2 => /usr/lib/libgssapi_krb5.so.2 (0x00007fbc03467000)
	libcrypt.so.1 => /lib/libcrypt.so.1 (0x00007fbc0322e000)
	libldap_r-2.4.so.2 => /usr/lib/libldap_r-2.4.so.2 (0x00007fbc02fe1000)
	libk5crypto.so.3 => /usr/lib/libk5crypto.so.3 (0x00007fbc02dbb000)
	libkrb5support.so.0 => /usr/lib/libkrb5support.so.0 (0x00007fbc02bb3000)
	libkeyutils.so.1 => /lib/libkeyutils.so.1 (0x00007fbc029af000)
	libresolv.so.2 => /lib/libresolv.so.2 (0x00007fbc02796000)
	liblber-2.4.so.2 => /usr/lib/liblber-2.4.so.2 (0x00007fbc02588000)
	libsasl2.so.2 => /usr/lib/libsasl2.so.2 (0x00007fbc0236d000)
	libgnutls.so.26 => /usr/lib/libgnutls.so.26 (0x00007fbc020cb000)
	libtasn1.so.3 => /usr/lib/libtasn1.so.3 (0x00007fbc01eb9000)
	libgcrypt.so.11 => /lib/libgcrypt.so.11 (0x00007fbc01c41000)
	libgpg-error.so.0 => /lib/libgpg-error.so.0 (0x00007fbc01a3d000)
matt@ubuntu-desktop:~$ gdalinfo --formats|grep -i ecw
matt@ubuntu-desktop:~$
}}}


-- 
-matt
From even.rouault at mines-paris.org  Sun Feb  6 13:08:42 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Feb  6 13:08:57 2011
Subject: [gdal-dev] error adding ecw on Ubuntu 10.4 (lucid)
In-Reply-To: <AANLkTi=gTXhDQcWpcbZA2z+19iTZoOONR0bL57U9Omzk@mail.gmail.com>
References: <AANLkTinrs6sWe4Jqi=bg2sXUNtdWPB3RjqFkjQU4-ufF@mail.gmail.com>
	<201102052024.16151.even.rouault@mines-paris.org>
	<AANLkTi=gTXhDQcWpcbZA2z+19iTZoOONR0bL57U9Omzk@mail.gmail.com>
Message-ID: <201102061908.42820.even.rouault@mines-paris.org>

Le dimanche 06 f?vrier 2011 19:00:03, Matt Wilkie a ?crit :
> > Check that the gdal_ECW.so (or whatever is name is) is installed in the
> > GDAL plugin directory and then do a ldd on this .so to see if the ECW
> > SDK .so are reachable. You might need to adjust the /etc/ld.so.conf or
> > LD_LIBRARY_PATH to add them.
> 
> Is this searchable: ?

Looks ok.

Perhaps try setting the environment variable GDAL_DRIVER_PATH to 
/usr/lib/gdal17plugins
From mgleahy at alumni.uwaterloo.ca  Sun Feb  6 14:50:34 2011
From: mgleahy at alumni.uwaterloo.ca (Mike Leahy)
Date: Sun Feb  6 14:50:42 2011
Subject: [gdal-dev] PHP bindings
Message-ID: <201102061450.35281.mgleahy@alumni.uwaterloo.ca>

Hello List,

Does anyone have an idea if there is any likelihood for a revival of php 
bindings for GDAL/OGR.  I know if these were available, I'd be making use of 
them...although, I have no experience creating/maintaining SWIG libraries.  So 
I'm curious to know what someone would need to know to get started on this, 
and how big of a job would it likely be?

Regards,
Mike
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110206/8e36e60a/attachment.html
From mariusjigmond at hotmail.com  Sun Feb  6 16:27:11 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Sun Feb  6 16:27:12 2011
Subject: [gdal-dev] error adding ecw on Ubuntu 10.4 (lucid)
In-Reply-To: <201102061908.42820.even.rouault@mines-paris.org>
References: <AANLkTinrs6sWe4Jqi=bg2sXUNtdWPB3RjqFkjQU4-ufF@mail.gmail.com>
	<201102052024.16151.even.rouault@mines-paris.org>
	<AANLkTi=gTXhDQcWpcbZA2z+19iTZoOONR0bL57U9Omzk@mail.gmail.com>
	<201102061908.42820.even.rouault@mines-paris.org>
Message-ID: <BLU0-SMTP1343B6E63D229E098BFE747B2E80@phx.gbl>

If that doesn't work, going back to what Even said earlier:
1. create a gdal_plugins.conf file in /etc/ld.so.conf.d/ with one
line: /usr/lib/gdal17plugins
2. sudo ldconfig

-marius

On Sun, 2011-02-06 at 19:08 +0100, Even Rouault wrote: 
> Le dimanche 06 f?vrier 2011 19:00:03, Matt Wilkie a ?crit :
> > > Check that the gdal_ECW.so (or whatever is name is) is installed in the
> > > GDAL plugin directory and then do a ldd on this .so to see if the ECW
> > > SDK .so are reachable. You might need to adjust the /etc/ld.so.conf or
> > > LD_LIBRARY_PATH to add them.
> > 
> > Is this searchable: ?
> 
> Looks ok.
> 
> Perhaps try setting the environment variable GDAL_DRIVER_PATH to 
> /usr/lib/gdal17plugins
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From alexandre.gacon+gdal at gmail.com  Mon Feb  7 04:08:43 2011
From: alexandre.gacon+gdal at gmail.com (Alexandre Gacon)
Date: Mon Feb  7 04:08:46 2011
Subject: [gdal-dev] Unable to compile OCI driver
Message-ID: <AANLkTinJJjP-_Eo8AvFOinAau9rZPa-BEOKG2PQcS2yM@mail.gmail.com>

Hi all,

I am trying to build GDAL/OGR with the OCI driver with Visual Studio 2005
and with the OCI coming from the version 11g version of ORACLE. I am stuck
with errors during linking : the linker cannot find the symbols defined in
the OCI headers.

I have put all the libraries I have in the lib path but it has no effect.

Any idea ?

-- 
Alexandre Gacon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110207/76a06296/attachment.html
From emilio.detorres at fueca.es  Mon Feb  7 04:36:37 2011
From: emilio.detorres at fueca.es (Emilio de Torres =?ISO-8859-1?Q?Fern=E1ndez?=)
Date: Mon Feb  7 04:59:48 2011
Subject: [gdal-dev] Reprojecting with gdalwarp takes too much time
Message-ID: <1297071397.1537.19.camel@fueca95>

Hello, 

I am developing an application that works as a kind of Google Maps for
ships. Boats can't connect to internet so they have satellite images
stored in a DB and a GPS. When the captain wants to see a part of the
coast, he fixes a point on the map (or use the actual position of the
boat) and selects a zoom level in nautical miles. This zoom indicates
the radio from the point to the limit of the image. 

Given the lat-long of the selected point and the zoom level, the
algorithm of the application will perform the following steps: 
  
1. Look for the image that contains the point on the DB (PostGIS
Raster). The images are stored in GeoTIFF format. 
2. Depending on the zoom, the area of interest can be contained in the
entire image or may be necessary to create a mosaic with the adjacent
images. 
3. The mosaic obtained in the previous step is reprojected to azimuthal
equidistant centered at the point selected. 
4. It returns the image in BMP or JPG format. 

The problem that I have is that only the reprojection with gdalwarp
takes between 2 and 19 seconds. Some images takes less because they have
low resolution, 2.5-5 meters/pixel, others take more time because they
have high resolution, 15 meters/pixel. With low resoution images it's
necessary to create a mosaic to cover large areas so the time saved
reprojecting is spent creating the mosaic. With high resolution images
is not usually necessary to generate a mosaic because they cover a large
area. The point is that in one way or another it takes too much time. I
have tried changing the values of the parameters -wm,-et and
GDAL_CACHEMAX.

No images can be reprojected an stored in memory because it's needed the
center an it is obtained in real time. Is there any alternative to
gdalwarp which does the reprojection in less time? All steps above must
be taken in 1 or 2 seconds. Is it feasible to create a system like
that? 

Best regards.




From msieczka at sieczka.org  Mon Feb  7 05:32:27 2011
From: msieczka at sieczka.org (Maciej Sieczka)
Date: Mon Feb  7 05:32:34 2011
Subject: [gdal-dev] Re: gdal_rasterize 1.8.0 options
In-Reply-To: <4D4D54E5.2010802@gmx.eu>
References: <BLU0-SMTP43BCC8D40A1F52FA0B542EB2E60@phx.gbl>	<201102050006.22865.even.rouault@mines-paris.org>	<4D4D393B.80603@gmx.eu>	<201102051312.30392.even.rouault@mines-paris.org>
	<4D4D54E5.2010802@gmx.eu>
Message-ID: <4D4FCA3B.5010405@sieczka.org>

W dniu 05.02.2011 14:47, Hermann Peifer pisze:
> On 05/02/2011 13:12, Even Rouault wrote:

>> I've just had a look, but not being neither Dutch nor a specialist
>> of (stereographic) projections, I don't feel competent enough to do
>> any action on it. Those tickets plus the reading of
>> http://udig.refractions.net/files/docs/api-
>> geotools/org/geotools/referencing/operation/projection/Stereographic.html
>>  make me deeply confused and wondering if r21627 was really
>> appropriate.

> Hmm. This page confirms what I mentioned in ticket #2869:
> "Double_Stereographic" is simply the ESRI alias of
> "Oblique_Stereographic" (EPSG code 9809).
>
> About r21627: I am afraid I do not understand enough about the inner
>  workings of GDAL/OGR to make a judgement about whether this change
> was appropriate or not.
>
> But by the end of the day and from what I remember when looking
> somewhat deeper into the issue, about 2 years ago: there is one
> stereographic projection (known as "the USGS formula" or "the
> approach given by Snyder") which translates into +proj=stere, and
> there is the other "Double_Stereographic", aka
> "Oblique_Stereographic" which is expected to end up as +proj=sterea.

I'm not an expert too, but Hermann findings are in accordance with my
findings for Polish stereographic CRS (from over 5 years ago):

http://lists.maptools.org/pipermail/proj/2005-March/001524.html

The Polish CRSs which use +proj=sterea version of stereographic are
3120, 2172-2174, 3328.

See also Gerald Evendeen's notes:

http://lists.maptools.org/pipermail/proj/2005-March/001526.html

Maciek

-- 
Maciej Sieczka
http://www.sieczka.org
From alexrl7 at gmail.com  Mon Feb  7 06:18:47 2011
From: alexrl7 at gmail.com (alejandra rodriguez)
Date: Mon Feb  7 06:18:49 2011
Subject: [gdal-dev] Re: GDALAllRegister()
In-Reply-To: <AANLkTiksvgW8MLvdW3PmfLtrGpBQZS3nyuLUZ2U_XxMS@mail.gmail.com>
References: <mailman.17467.1296222631.2887.gdal-dev@lists.osgeo.org>
	<AANLkTiksvgW8MLvdW3PmfLtrGpBQZS3nyuLUZ2U_XxMS@mail.gmail.com>
Message-ID: <AANLkTikFSJjobTted=cr_-52pR6GKxKXa6Ve3RXXniYy@mail.gmail.com>

> Hello,
>>>
>>> I am starting using GDAL, I have downloaded the libraries and I'm trying
>>> to use them in my code, but when I try with the GDALAllRegister() function
>>> an error appears. I only have written this code:
>>>
>>> #include <iostream>
>>>
>>> using namespace std;
>>>
>>> #include "gdal_priv.h"
>>>
>>> #include "cpl_conv.h" // for CPLMalloc()
>>>
>>> int main()
>>>
>>> {
>>>
>>> GDALDataset *poDataset;
>>>
>>>  GDALAllRegister();
>>>
>>>  char *pszFilename
>>>
>>> pszFilename = "201010131445_VIS_006_GEO_EUR_16bpp.XPIF";
>>>
>>>  poDataset = (GDALDataset *) GDALOpen( pszFilename, GA_ReadOnly );
>>>
>>> if( poDataset == NULL )
>>>
>>> {
>>>
>>> cout << "poDataset is null" << endl; // prints
>>>
>>> return 0;
>>>
>>> }
>>>
>>> }
>>>
>>>
>>>  and I get this error:
>>>
>>> undefined reference to `GDALAllRegister'
>>>
>>> collect2: ld returned 1 exit status
>>>
>>> make: *** [gdal] Error 1
>>>
>>>
>>>  Do you know what I have to do to make it work?
>>>
>>> Thank you and regards,
>>>
>>> Alex
>>>
>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110207/343d45b6/attachment-0001.html
From j.l.h.hartmann at uva.nl  Mon Feb  7 06:25:09 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Mon Feb  7 06:21:39 2011
Subject: [gdal-dev] Re: gdal_rasterize 1.8.0 options
In-Reply-To: <4D4FCA3B.5010405@sieczka.org>
References: <BLU0-SMTP43BCC8D40A1F52FA0B542EB2E60@phx.gbl>	<201102050006.22865.even.rouault@mines-paris.org>	<4D4D393B.80603@gmx.eu>	<201102051312.30392.even.rouault@mines-paris.org>	<4D4D54E5.2010802@gmx.eu>
	<4D4FCA3B.5010405@sieczka.org>
Message-ID: <4D4FD695.1030801@uva.nl>

For the Dutch case: in 2005 the PROJ-definition for the Dutch national 
system (which uses "Double Stereographic") was changed from "stere" to 
"sterea". See the thread starting at: 
http://lists.osgeo.org/pipermail/gdal-dev/2005-November/007045.html. The 
thread refers to a bug ticket at 
http://bugzilla.remotesensing.org/show_bug.cgi?id=980, but that link 
doesn't exist anymore.

Is there a place to put al the links on the stere-sterea subject 
together? In my experience, discussions about projection parameters  
tend to get fragmented, and even if a solution has been found, old 
errors tend to show up time and again. Sometimes, I can only find the 
solution in my private email archive.

Jan

On 2011-02-07 11:32, Maciej Sieczka wrote:
> W dniu 05.02.2011 14:47, Hermann Peifer pisze:
>> On 05/02/2011 13:12, Even Rouault wrote:
>
>>> I've just had a look, but not being neither Dutch nor a specialist
>>> of (stereographic) projections, I don't feel competent enough to do
>>> any action on it. Those tickets plus the reading of
>>> http://udig.refractions.net/files/docs/api-
>>> geotools/org/geotools/referencing/operation/projection/Stereographic.html 
>>>
>>>  make me deeply confused and wondering if r21627 was really
>>> appropriate.
>
>> Hmm. This page confirms what I mentioned in ticket #2869:
>> "Double_Stereographic" is simply the ESRI alias of
>> "Oblique_Stereographic" (EPSG code 9809).
>>
>> About r21627: I am afraid I do not understand enough about the inner
>>  workings of GDAL/OGR to make a judgement about whether this change
>> was appropriate or not.
>>
>> But by the end of the day and from what I remember when looking
>> somewhat deeper into the issue, about 2 years ago: there is one
>> stereographic projection (known as "the USGS formula" or "the
>> approach given by Snyder") which translates into +proj=stere, and
>> there is the other "Double_Stereographic", aka
>> "Oblique_Stereographic" which is expected to end up as +proj=sterea.
>
> I'm not an expert too, but Hermann findings are in accordance with my
> findings for Polish stereographic CRS (from over 5 years ago):
>
> http://lists.maptools.org/pipermail/proj/2005-March/001524.html
>
> The Polish CRSs which use +proj=sterea version of stereographic are
> 3120, 2172-2174, 3328.
>
> See also Gerald Evendeen's notes:
>
> http://lists.maptools.org/pipermail/proj/2005-March/001526.html
>
> Maciek
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110207/16cbe70a/attachment.html
From jorge.arevalo at deimos-space.com  Mon Feb  7 06:23:58 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Mon Feb  7 06:24:22 2011
Subject: [gdal-dev] Re: GDALAllRegister()
In-Reply-To: <AANLkTikFSJjobTted=cr_-52pR6GKxKXa6Ve3RXXniYy@mail.gmail.com>
References: <mailman.17467.1296222631.2887.gdal-dev@lists.osgeo.org>
	<AANLkTiksvgW8MLvdW3PmfLtrGpBQZS3nyuLUZ2U_XxMS@mail.gmail.com>
	<AANLkTikFSJjobTted=cr_-52pR6GKxKXa6Ve3RXXniYy@mail.gmail.com>
Message-ID: <AANLkTi=ygmWc3Nz4POKZNGcc2mxdQa4D2JuKfecpHqQw@mail.gmail.com>

On Mon, Feb 7, 2011 at 12:18 PM, alejandra rodriguez <alexrl7@gmail.com> wrote:
>
>>>> Hello,
>>>>
>>>> I am starting using GDAL, I have downloaded the libraries and I'm trying
>>>> to use them in my code, but when I try with the GDALAllRegister() function
>>>> an error appears. I only have written this code:
>>>>
>>>> #include <iostream>
>>>>
>>>> using namespace std;
>>>>
>>>> #include "gdal_priv.h"
>>>>
>>>> #include "cpl_conv.h" // for CPLMalloc()
>>>>
>>>> int main()
>>>>
>>>> {
>>>>
>>>> GDALDataset *poDataset;
>>>>
>>>> GDALAllRegister();
>>>>
>>>> char *pszFilename
>>>>
>>>> pszFilename = "201010131445_VIS_006_GEO_EUR_16bpp.XPIF";
>>>>
>>>> poDataset = (GDALDataset *) GDALOpen( pszFilename, GA_ReadOnly );
>>>>
>>>> if( poDataset == NULL )
>>>>
>>>> {
>>>>
>>>> cout << "poDataset is null" << endl; // prints
>>>>
>>>> return 0;
>>>>
>>>> }
>>>>
>>>> }
>>>>
>>>> and I get this error:
>>>>
>>>> undefined reference to `GDALAllRegister'
>>>>
>>>> collect2: ld returned 1 exit status
>>>>
>>>> make: *** [gdal] Error 1
>>>>
>>>> Do you know what I have to do to make it work?
>>>>
>>>> Thank you and regards,
>>>>
>>>> Alex
>>>
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

Hello,

Seems you're not linking with GDAL libraries. How do you compile and
link the code? gcc, Visual Studio? We need more info.

Best regards,

-- 
Jorge Ar?valo
Internet & Mobilty Division, DEIMOS
jorge.arevalo@deimos-space.com
http://es.linkedin.com/in/jorgearevalo80
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From p.halls at york.ac.uk  Mon Feb  7 06:32:08 2011
From: p.halls at york.ac.uk (Peter J Halls)
Date: Mon Feb  7 06:32:19 2011
Subject: [gdal-dev] Re: gdal_rasterize 1.8.0 options
In-Reply-To: <4D4FCA3B.5010405@sieczka.org>
References: <BLU0-SMTP43BCC8D40A1F52FA0B542EB2E60@phx.gbl>	<201102050006.22865.even.rouault@mines-paris.org>	<4D4D393B.80603@gmx.eu>	<201102051312.30392.even.rouault@mines-paris.org>	<4D4D54E5.2010802@gmx.eu>
	<4D4FCA3B.5010405@sieczka.org>
Message-ID: <4D4FD838.7020008@york.ac.uk>

I've kept out of this debate so far - partly waiting until I had my copy of 
Snyder's 'Working Manual' (USGS Professional Paper 1395) in front of me.  I've 
also got ESRI's 'Understanding Map Projections' by Kennedy and Kopp (my copy is 
dated 2000; ESRI Press) to hand.  I had a hazy memory that this was a 
complicated area ... as it indeed seems to be.

According to Kennedy and Kopp, the ESRI Stereographic projection uses the 
ellipsoid directly, whilst the Double Stereographic projection takes the 
ellipsoid to a Gaussian sphere before calculating the planar form.

According to Snyder (pp154-157) the basic Stereographic projection is an 
azimuthal conformal perspective projection on the sphere but only azimuthal 
conformal in the polar form on the ellipsoid, when it 'is not perspective'. 
There are also modified forms (Snyder p 203) that are not symmetrical and in 
which meridians and parallels are complex curves.  Snyder provides separate 
formulae for the spherical and ellipsoidal forms, implying that the spherical 
form is not a simple special case of the ellipsoidal.

In both Bugayevskiy & Snyder (1995, Map Projections: A Reference Manual, London: 
Taylor & Francis) and Yang, Snyder and Tobler (2000, Map Projection 
Transformation: Principles and Applications, London: Taylor & Francis) a 
"double" projection is defined as one in which the ellipsoidal form is first 
projected onto a sphere and then the sphere to planar form.  They also separate 
the spherical and ellipsoidal forms for the stereographic formulae.  This 
suggests that Kennedy & Kopp do give the detail necessary when they mention 
projection first onto the Gaussian sphere.

I have not examined the code of GDAL, nor of Proj4, so do not know whether these 
have the facility to transform from ellipsoid to sphere to planar to replicate 
the 'double' or whether the spherical or ellipsoidal form is provided - let 
alone as to whether such a double method is supported.  However, I suspect that 
Even is correct to surmise that the issue is not straightforward.

Best wishes,

Peter


Maciej Sieczka wrote:
> W dniu 05.02.2011 14:47, Hermann Peifer pisze:
>> On 05/02/2011 13:12, Even Rouault wrote:
> 
>>> I've just had a look, but not being neither Dutch nor a specialist
>>> of (stereographic) projections, I don't feel competent enough to do
>>> any action on it. Those tickets plus the reading of
>>> http://udig.refractions.net/files/docs/api-
>>> geotools/org/geotools/referencing/operation/projection/Stereographic.html 
>>>
>>>  make me deeply confused and wondering if r21627 was really
>>> appropriate.
> 
>> Hmm. This page confirms what I mentioned in ticket #2869:
>> "Double_Stereographic" is simply the ESRI alias of
>> "Oblique_Stereographic" (EPSG code 9809).
>>
>> About r21627: I am afraid I do not understand enough about the inner
>>  workings of GDAL/OGR to make a judgement about whether this change
>> was appropriate or not.
>>
>> But by the end of the day and from what I remember when looking
>> somewhat deeper into the issue, about 2 years ago: there is one
>> stereographic projection (known as "the USGS formula" or "the
>> approach given by Snyder") which translates into +proj=stere, and
>> there is the other "Double_Stereographic", aka
>> "Oblique_Stereographic" which is expected to end up as +proj=sterea.
> 
> I'm not an expert too, but Hermann findings are in accordance with my
> findings for Polish stereographic CRS (from over 5 years ago):
> 
> http://lists.maptools.org/pipermail/proj/2005-March/001524.html
> 
> The Polish CRSs which use +proj=sterea version of stereographic are
> 3120, 2172-2174, 3328.
> 
> See also Gerald Evendeen's notes:
> 
> http://lists.maptools.org/pipermail/proj/2005-March/001526.html
> 
> Maciek
> 

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor & Acting Team Leader Applications Support Group,
                Information Directorate, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: C/O IT Services, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From geographika at gmail.com  Mon Feb  7 06:34:20 2011
From: geographika at gmail.com (geographika)
Date: Mon Feb  7 06:34:38 2011
Subject: [gdal-dev] MSSQL2008 Driver and OGR/Python
In-Reply-To: <AANLkTik7+iWatYLW5aunUW51U48zHkkU5PtrepgGA8vh@mail.gmail.com>
References: <201009062027.22693.even.rouault@mines-paris.org>
	<AANLkTik7+iWatYLW5aunUW51U48zHkkU5PtrepgGA8vh@mail.gmail.com>
Message-ID: <4D4FD8BC.9070000@gmail.com>

Hi,

When working with the SQL Server 2008 OGR driver I presume it is 
necessary to create the following metadata tables?

geometry_columns
spatial_ref_sys

There appears to be no way to do this automatically in Python, but if I 
import a single dataset into the database it is created automatically. I 
can then use:

conn_string = "MSSQL:server=W08-SQL08;database=dbname;Integrated 
Security=true;"
ds = ogr.Open(conn_string)
lyr = ds.GetLayerByName('testdata')

It would be nice to be able to connect to a layer without having to 
register it with the geometry_columns table using a connection string 
such as:

"MSSQL:server=W08-SQL08;database=dbname;Integrated 
Security=true;tables=myschema.testdata(GEOMFIELD)"

As this is not currently possible I manually added a record to 
geometry_columns for an existing spatial table in my database. This is 
in a separate schema so I used the following SQL:

INSERT INTO [geometry_columns] ([f_table_catalog], [f_table_schema] 
,[f_table_name], 
[f_geometry_column],[coord_dimension],[srid],[geometry_type])
VALUES ('DbName', '*myschema*', 'testdata', 'GEOMFIELD', 2, 32768, 
'MULTIPOLYGON')

However using SQL Profiler when trying to connect to the layer it always 
tries to find this layer in *dbo*.

exec DbName..sp_columns N'testdata',N'*dbo*',N'DbName',NULL

As it does not exist in dbo the connection never succeeds, and I cannot 
connect to any of the layers in the database.
I can add this to trac if it is an issue - I just want to first make 
sure I've not made any obvious errors.

Regards,

Seth Girvin

--
web:http://geographika.co.uk
twitter: @geographika


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110207/a524aa6e/attachment.html
From j.l.h.hartmann at uva.nl  Mon Feb  7 06:56:43 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Mon Feb  7 06:53:16 2011
Subject: [gdal-dev] Re: gdal_rasterize 1.8.0 options
In-Reply-To: <4D4FD838.7020008@york.ac.uk>
References: <BLU0-SMTP43BCC8D40A1F52FA0B542EB2E60@phx.gbl>	<201102050006.22865.even.rouault@mines-paris.org>	<4D4D393B.80603@gmx.eu>	<201102051312.30392.even.rouault@mines-paris.org>	<4D4D54E5.2010802@gmx.eu>	<4D4FCA3B.5010405@sieczka.org>
	<4D4FD838.7020008@york.ac.uk>
Message-ID: <4D4FDDFB.3030509@uva.nl>

As far as the Dutch projection is concerned (EPSG:28992), Peter's 
summary is correct: it first projects the ellipsoid to the sphere and 
then projects the sphere stereographically to the plane. I don't know if 
that is the way PROJ4 computes the transformation, but I can garantee 
that using "sterea" as parameter gives correct results here.

Jan

On 2011-02-07 12:32, Peter J Halls wrote:
> I've kept out of this debate so far - partly waiting until I had my 
> copy of Snyder's 'Working Manual' (USGS Professional Paper 1395) in 
> front of me.  I've also got ESRI's 'Understanding Map Projections' by 
> Kennedy and Kopp (my copy is dated 2000; ESRI Press) to hand.  I had a 
> hazy memory that this was a complicated area ... as it indeed seems to 
> be.
>
> According to Kennedy and Kopp, the ESRI Stereographic projection uses 
> the ellipsoid directly, whilst the Double Stereographic projection 
> takes the ellipsoid to a Gaussian sphere before calculating the planar 
> form.
>
> According to Snyder (pp154-157) the basic Stereographic projection is 
> an azimuthal conformal perspective projection on the sphere but only 
> azimuthal conformal in the polar form on the ellipsoid, when it 'is 
> not perspective'. There are also modified forms (Snyder p 203) that 
> are not symmetrical and in which meridians and parallels are complex 
> curves.  Snyder provides separate formulae for the spherical and 
> ellipsoidal forms, implying that the spherical form is not a simple 
> special case of the ellipsoidal.
>
> In both Bugayevskiy & Snyder (1995, Map Projections: A Reference 
> Manual, London: Taylor & Francis) and Yang, Snyder and Tobler (2000, 
> Map Projection Transformation: Principles and Applications, London: 
> Taylor & Francis) a "double" projection is defined as one in which the 
> ellipsoidal form is first projected onto a sphere and then the sphere 
> to planar form.  They also separate the spherical and ellipsoidal 
> forms for the stereographic formulae.  This suggests that Kennedy & 
> Kopp do give the detail necessary when they mention projection first 
> onto the Gaussian sphere.
>
> I have not examined the code of GDAL, nor of Proj4, so do not know 
> whether these have the facility to transform from ellipsoid to sphere 
> to planar to replicate the 'double' or whether the spherical or 
> ellipsoidal form is provided - let alone as to whether such a double 
> method is supported.  However, I suspect that Even is correct to 
> surmise that the issue is not straightforward.
>
> Best wishes,
>
> Peter
>
>
> Maciej Sieczka wrote:
>> W dniu 05.02.2011 14:47, Hermann Peifer pisze:
>>> On 05/02/2011 13:12, Even Rouault wrote:
>>
>>>> I've just had a look, but not being neither Dutch nor a specialist
>>>> of (stereographic) projections, I don't feel competent enough to do
>>>> any action on it. Those tickets plus the reading of
>>>> http://udig.refractions.net/files/docs/api-
>>>> geotools/org/geotools/referencing/operation/projection/Stereographic.html 
>>>>
>>>>  make me deeply confused and wondering if r21627 was really
>>>> appropriate.
>>
>>> Hmm. This page confirms what I mentioned in ticket #2869:
>>> "Double_Stereographic" is simply the ESRI alias of
>>> "Oblique_Stereographic" (EPSG code 9809).
>>>
>>> About r21627: I am afraid I do not understand enough about the inner
>>>  workings of GDAL/OGR to make a judgement about whether this change
>>> was appropriate or not.
>>>
>>> But by the end of the day and from what I remember when looking
>>> somewhat deeper into the issue, about 2 years ago: there is one
>>> stereographic projection (known as "the USGS formula" or "the
>>> approach given by Snyder") which translates into +proj=stere, and
>>> there is the other "Double_Stereographic", aka
>>> "Oblique_Stereographic" which is expected to end up as +proj=sterea.
>>
>> I'm not an expert too, but Hermann findings are in accordance with my
>> findings for Polish stereographic CRS (from over 5 years ago):
>>
>> http://lists.maptools.org/pipermail/proj/2005-March/001524.html
>>
>> The Polish CRSs which use +proj=sterea version of stereographic are
>> 3120, 2172-2174, 3328.
>>
>> See also Gerald Evendeen's notes:
>>
>> http://lists.maptools.org/pipermail/proj/2005-March/001526.html
>>
>> Maciek
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110207/0bfbb26a/attachment-0001.html
From szekerest at gmail.com  Mon Feb  7 07:26:11 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Feb  7 07:26:14 2011
Subject: [gdal-dev] MSSQL2008 Driver and OGR/Python
In-Reply-To: <4D4FD8BC.9070000@gmail.com>
References: <201009062027.22693.even.rouault@mines-paris.org>
	<AANLkTik7+iWatYLW5aunUW51U48zHkkU5PtrepgGA8vh@mail.gmail.com>
	<4D4FD8BC.9070000@gmail.com>
Message-ID: <AANLkTimUdTr2XxPSQVk8KP8X9xV0boCG+0AcCK-1-X1o@mail.gmail.com>

2011/2/7 geographika <geographika@gmail.com>

>  Hi,
>
> When working with the SQL Server 2008 OGR driver I presume it is necessary
> to create the following metadata tables?
>
> geometry_columns
> spatial_ref_sys
>
> There appears to be no way to do this automatically in Python, but if I
> import a single dataset into the database it is created automatically. I can
> then use:
>
> conn_string = "MSSQL:server=W08-SQL08;database=dbname;Integrated
> Security=true;"
> ds = ogr.Open(conn_string)
> lyr = ds.GetLayerByName('testdata')
>

Hi Seth,

Those metadata tables are required since MSSQL2008 doesn't have a builtin
way to store all of these information. When importing the first table it
should indeed be created from scratch. With regards to spatial_ref_sys it
could also be populated by using the corresponding postgis script.



>
> It would be nice to be able to connect to a layer without having to
> register it with the geometry_columns table using a connection string such
> as:
>
> "MSSQL:server=W08-SQL08;database=dbname;Integrated
> Security=true;tables=myschema.testdata(GEOMFIELD)"
>
> As this is not currently possible I manually added a record to
> geometry_columns for an existing spatial table in my database. This is in a
> separate schema so I used the following SQL:
>
> INSERT INTO [geometry_columns] ([f_table_catalog], [f_table_schema]
> ,[f_table_name],
> [f_geometry_column],[coord_dimension],[srid],[geometry_type])
> VALUES ('DbName', '*myschema*', 'testdata', 'GEOMFIELD', 2, 32768,
> 'MULTIPOLYGON')
>
> However using SQL Profiler when trying to connect to the layer it always
> tries to find this layer in *dbo*.
>
> exec DbName..sp_columns N'testdata',N'*dbo*',N'DbName',NULL
>
> As it does not exist in dbo the connection never succeeds, and I cannot
> connect to any of the layers in the database.
> I can add this to trac if it is an issue - I just want to first make sure
> I've not made any obvious errors.
>
>
Specifying the schema in geometry_columns should be working and
myschema.mytable(GEOMFIELD) should also be a working option. So please file
a ticket with this issue if you encounter problems here.


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110207/d30c6b86/attachment.html
From warmerdam at pobox.com  Mon Feb  7 09:45:47 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb  7 09:45:57 2011
Subject: [gdal-dev] Re: gdal_rasterize 1.8.0 options
In-Reply-To: <4D4FD695.1030801@uva.nl>
References: <BLU0-SMTP43BCC8D40A1F52FA0B542EB2E60@phx.gbl>
	<201102050006.22865.even.rouault@mines-paris.org>	<4D4D393B.80603@gmx.eu>
	<201102051312.30392.even.rouault@mines-paris.org>	<4D4D54E5.2010802@gmx.eu>
	<4D4FCA3B.5010405@sieczka.org> <4D4FD695.1030801@uva.nl>
Message-ID: <4D50059B.2060204@pobox.com>

On 11-02-07 06:25 AM, Jan Hartmann wrote:
> Is there a place to put al the links on the stere-sterea subject together? In
> my experience, discussions about projection parameters  tend to get fragmented,
> and even if a solution has been found, old errors tend to show up time and
> again. Sometimes, I can only find the solution in my private email archive.

Jan,

I had been hoping to convert the topics at:

   http://www.remotesensing.org/geotiff/proj_list/

into Trac wiki topics so that anyone could easily update them.  Perhaps
the MetaCRS wiki would be more appropriate than the GeoTIFF one.  If anyone
was interested in taking that on as a task, I'd be happy to update the links
accordingly.

We could start by moving over the oblique stereographic discussion and
updating it with the missing information.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Feb  7 09:48:17 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb  7 09:48:19 2011
Subject: [gdal-dev] Unable to compile OCI driver
In-Reply-To: <AANLkTinJJjP-_Eo8AvFOinAau9rZPa-BEOKG2PQcS2yM@mail.gmail.com>
References: <AANLkTinJJjP-_Eo8AvFOinAau9rZPa-BEOKG2PQcS2yM@mail.gmail.com>
Message-ID: <4D500631.4040309@pobox.com>

On 11-02-07 04:08 AM, Alexandre Gacon wrote:
> Hi all,
>
> I am trying to build GDAL/OGR with the OCI driver with Visual Studio 2005 and
> with the OCI coming from the version 11g version of ORACLE. I am stuck with
> errors during linking : the linker cannot find the symbols defined in the OCI
> headers.
>
> I have put all the libraries I have in the lib path but it has no effect.
>
> Any idea ?

Alexandre,

My first idea is that it would be helpful if you could provide the exact
link command that ends up being used, and capture the exact error messages
from that link.  Otherwise we are largely flying blind.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jormarfe at gmail.com  Mon Feb  7 09:51:48 2011
From: jormarfe at gmail.com (Jorge Martin)
Date: Mon Feb  7 09:51:50 2011
Subject: [gdal-dev] Read and Write ArcGIS Bynary GRID
Message-ID: <AANLkTinHYMqPHi=iYRRtLiFQ0eDbrCLurHafLCkbd9U-@mail.gmail.com>

Hello,

        Using GDAL library is posible to read and write ArcGIS binary GRID
files?


Best Regards,

Jorge
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110207/02922717/attachment.html
From jorge.arevalo at deimos-space.com  Mon Feb  7 09:54:31 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Mon Feb  7 09:54:55 2011
Subject: [gdal-dev] Read and Write ArcGIS Bynary GRID
In-Reply-To: <AANLkTinHYMqPHi=iYRRtLiFQ0eDbrCLurHafLCkbd9U-@mail.gmail.com>
References: <AANLkTinHYMqPHi=iYRRtLiFQ0eDbrCLurHafLCkbd9U-@mail.gmail.com>
Message-ID: <AANLkTik6RCh3YtcnZXQWvH-1dHqP8PGub-AhK90Frh7v@mail.gmail.com>

On Mon, Feb 7, 2011 at 3:51 PM, Jorge Martin <jormarfe@gmail.com> wrote:
> Hello,
> ?? ? ? ?Using GDAL library is posible to read and write ArcGIS binary GRID
> files?
>
> Best Regards,
> Jorge
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

Hi,

AFAIK, reading support is incorporated via aigrid driver.

Further information here: http://www.gdal.org/formats_list.html

Best regards,

-- 
Jorge Ar?valo
Internet & Mobilty Division, DEIMOS
jorge.arevalo@deimos-space.com
http://es.linkedin.com/in/jorgearevalo80
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From warmerdam at pobox.com  Mon Feb  7 09:58:03 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb  7 09:58:06 2011
Subject: [gdal-dev] Read and Write ArcGIS Bynary GRID
In-Reply-To: <AANLkTinHYMqPHi=iYRRtLiFQ0eDbrCLurHafLCkbd9U-@mail.gmail.com>
References: <AANLkTinHYMqPHi=iYRRtLiFQ0eDbrCLurHafLCkbd9U-@mail.gmail.com>
Message-ID: <4D50087B.8030406@pobox.com>

On 11-02-07 09:51 AM, Jorge Martin wrote:
> Hello,
>
>          Using GDAL library is posible to read and write ArcGIS binary GRID files?

Jorge,

The support for this format is briefly described at:

   http://www.gdal.org/frmt_various.html#AIG

It is read-only.  At one time there was a grid writer in GDAL but it
depending on a fragile approach to using ArcView DLLs and it was removed
due to a variety of problems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From nicolas.simon at spw.wallonie.be  Mon Feb  7 10:08:23 2011
From: nicolas.simon at spw.wallonie.be (Nicolas Simon)
Date: Mon Feb  7 10:08:39 2011
Subject: [gdal-dev] OGR Shapefile SQL with date in where clause
Message-ID: <8C7DAE7B21100F4CABDD600FAAD339D005926B54@DGA-EXC01.mrw.wallonie.int>

Hello,
	I would like to extract feature from a shapefile layer based on a Date field.

	But I don't know how to format date value 
	
	Here is a defect command    
	
ogr2ogr -f "ESRI Shapefile" extrait.shp fulldataset.shp -sql "select * from fulldataset where VISTERRAIN = '2010/12/07' " 

	Help will be welcome.
	
	Thank you

	Nicolas Simon


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110207/acada065/attachment-0001.html
From j.l.h.hartmann at uva.nl  Mon Feb  7 10:16:26 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Mon Feb  7 10:12:55 2011
Subject: [gdal-dev] Re: gdal_rasterize 1.8.0 options
In-Reply-To: <4D50059B.2060204@pobox.com>
References: <BLU0-SMTP43BCC8D40A1F52FA0B542EB2E60@phx.gbl>
	<201102050006.22865.even.rouault@mines-paris.org>	<4D4D393B.80603@gmx.eu>
	<201102051312.30392.even.rouault@mines-paris.org>	<4D4D54E5.2010802@gmx.eu>
	<4D4FCA3B.5010405@sieczka.org> <4D4FD695.1030801@uva.nl>
	<4D50059B.2060204@pobox.com>
Message-ID: <4D500CCA.5050303@uva.nl>



On 2011-02-07 15:45, Frank Warmerdam wrote:
> On 11-02-07 06:25 AM, Jan Hartmann wrote:
>> Is there a place to put al the links on the stere-sterea subject 
>> together? In
>> my experience, discussions about projection parameters  tend to get 
>> fragmented,
>> and even if a solution has been found, old errors tend to show up 
>> time and
>> again. Sometimes, I can only find the solution in my private email 
>> archive.
>
> Jan,
>
> I had been hoping to convert the topics at:
>
>   http://www.remotesensing.org/geotiff/proj_list/
>
> into Trac wiki topics so that anyone could easily update them.  Perhaps
> the MetaCRS wiki would be more appropriate than the GeoTIFF one.  If 
> anyone
> was interested in taking that on as a task, I'd be happy to update the 
> links
> accordingly.
>
> We could start by moving over the oblique stereographic discussion and
> updating it with the missing information.
>
OK Frank, I'll take up the two Dutch problems, sterea and the towgs84 
conversion. You won't believe how much discussion I still see over here 
about things not fitting with Google Maps. It would be nice to have an 
authorative reference. Please say how I can help out.

Jan

From pcorti at gmail.com  Mon Feb  7 10:25:47 2011
From: pcorti at gmail.com (Paolo Corti)
Date: Mon Feb  7 10:26:29 2011
Subject: [gdal-dev] OGR Shapefile SQL with date in where clause
In-Reply-To: <8C7DAE7B21100F4CABDD600FAAD339D005926B54@DGA-EXC01.mrw.wallonie.int>
References: <8C7DAE7B21100F4CABDD600FAAD339D005926B54@DGA-EXC01.mrw.wallonie.int>
Message-ID: <AANLkTingqTbo4d+B5AchRDmFsoO=65YYLfbkzWswkXu=@mail.gmail.com>

On Mon, Feb 7, 2011 at 4:08 PM, Nicolas Simon
<nicolas.simon@spw.wallonie.be> wrote:
> Hello,
> ??????? I would like to extract feature from a shapefile layer based on a
> Date field.
>
> ??????? But I don't know how to format date value
>
> ??????? Here is a defect command
>
> ogr2ogr -f "ESRI Shapefile" extrait.shp fulldataset.shp -sql "select * from
> fulldataset where VISTERRAIN = '2010/12/07' "
>
> ??????? Help will be welcome.
>
> ??????? Thank you
>
> ??????? Nicolas Simon
>

Hi Nicolas

I am using gdal 1.8 and it is working for me, look at the output:

ogrinfo -al poi.shp
INFO: Open of `poi.shp'
      using driver `ESRI Shapefile' successful.

Layer name: poi
Geometry: Point
Feature Count: 3
Extent: (-5106701.348438, -1250725.685421) - (-17541.662933, 4118769.067506)
Layer SRS WKT:
PROJCS["WGS_1984_UTM_Zone_32N",
    GEOGCS["GCS_WGS_1984",
        DATUM["WGS_1984",
            SPHEROID["WGS_1984",6378137.0,298.257223563]],
        PRIMEM["Greenwich",0.0],
        UNIT["Degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["False_Easting",500000.0],
    PARAMETER["False_Northing",0.0],
    PARAMETER["Central_Meridian",9.0],
    PARAMETER["Scale_Factor",0.9996],
    PARAMETER["Latitude_Of_Origin",0.0],
    UNIT["Meter",1.0]]
Id: Integer (6.0)
mydate_d: Date (10.0)
mydate_s: String (50.0)
OGRFeature(poi):0
  Id (Integer) = 0
  mydate_d (Date) = 2010/08/11
  mydate_s (String) = (null)
  POINT (-4071618.022572413086891 4118769.067506278399378)

OGRFeature(poi):1
  Id (Integer) = 0
  mydate_d (Date) = 2010/08/11
  mydate_s (String) = (null)
  POINT (-5106701.348437865264714 668491.314621437806636)

OGRFeature(poi):2
  Id (Integer) = 0
  mydate_d (Date) = 2010/11/11
  mydate_s (String) = (null)
  POINT (-17541.662932725295832 -1250725.685420754598454)

ogr2ogr out.shp poi.shp -sql "select * from poi where mydate_d = '2010/08/11'"

ogrinfo -al out.shp
INFO: Open of `out.shp'
      using driver `ESRI Shapefile' successful.

Layer name: out
Geometry: Point
Feature Count: 2
Extent: (-5106701.348438, 668491.314621) - (-4071618.022572, 4118769.067506)
Layer SRS WKT:
PROJCS["WGS_1984_UTM_Zone_32N",
    GEOGCS["GCS_WGS_1984",
        DATUM["WGS_1984",
            SPHEROID["WGS_1984",6378137.0,298.257223563]],
        PRIMEM["Greenwich",0.0],
        UNIT["Degree",0.017453292519943295]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["False_Easting",500000.0],
    PARAMETER["False_Northing",0.0],
    PARAMETER["Central_Meridian",9.0],
    PARAMETER["Scale_Factor",0.9996],
    PARAMETER["Latitude_Of_Origin",0.0],
    UNIT["Meter",1.0]]
Id: Integer (6.0)
mydate_d: Date (10.0)
mydate_s: String (50.0)
OGRFeature(out):0
  Id (Integer) = 0
  mydate_d (Date) = 2010/08/11
  mydate_s (String) = (null)
  POINT (-4071618.022572413086891 4118769.067506278399378)

OGRFeature(out):1
  Id (Integer) = 0
  mydate_d (Date) = 2010/08/11
  mydate_s (String) = (null)
  POINT (-5106701.348437865264714 668491.314621437806636)

What error do you get?

best regards
P

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @paolo_corti
From geographika at gmail.com  Mon Feb  7 10:35:04 2011
From: geographika at gmail.com (geographika)
Date: Mon Feb  7 10:35:23 2011
Subject: [gdal-dev] MSSQL2008 Driver and OGR/Python
In-Reply-To: <AANLkTimUdTr2XxPSQVk8KP8X9xV0boCG+0AcCK-1-X1o@mail.gmail.com>
References: <201009062027.22693.even.rouault@mines-paris.org>	<AANLkTik7+iWatYLW5aunUW51U48zHkkU5PtrepgGA8vh@mail.gmail.com>	<4D4FD8BC.9070000@gmail.com>
	<AANLkTimUdTr2XxPSQVk8KP8X9xV0boCG+0AcCK-1-X1o@mail.gmail.com>
Message-ID: <4D501128.7020708@gmail.com>

Thanks Tamas for the quick reply.
I've been trying a few more combinations, and I now have it working.

In the geometry_columns table the first record works - when I duplicate 
the schema name in the the f_table_schema and f_table_name fields. The 
second does not.
In fact I can put any entry in the f_table_schema field - it appears to 
be ignored.


[f_table_catalog], [f_table_schema] ,[f_table_name], 
[f_geometry_column],[coord_dimension],[srid],[geometry_type]
DbName 	any value can be put here
	schemaname.mytable 	GEOMFIELD 	2 	32768 	MULTIPOLYGON
DbName 	schemaname 	mytable 	GEOMFIELD 	2 	32768 	MULTIPOLYGON


The following now works (with the first record - not the second):

conn_string = "MSSQL:server=W08-SQL08;database=DbName;Integrated 
Security=true;"
ds = ogr.Open(conn_string)
lyr = ds.GetLayerByName('schemaname.mytable') #schema name always has to 
be passed here

If this is not the intended behaviour I can create a ticket, otherwise 
thanks for your time (and drivers!).

Regards,

Seth

--
web:http://geographika.co.uk
twitter: @geographika



On 07/02/2011 13:26, Tamas Szekeres wrote:
>
>
> 2011/2/7 geographika <geographika@gmail.com 
> <mailto:geographika@gmail.com>>
>
>     Hi,
>
>     When working with the SQL Server 2008 OGR driver I presume it is
>     necessary to create the following metadata tables?
>
>     geometry_columns
>     spatial_ref_sys
>
>     There appears to be no way to do this automatically in Python, but
>     if I import a single dataset into the database it is created
>     automatically. I can then use:
>
>     conn_string = "MSSQL:server=W08-SQL08;database=dbname;Integrated
>     Security=true;"
>     ds = ogr.Open(conn_string)
>     lyr = ds.GetLayerByName('testdata')
>
>
> Hi Seth,
>
> Those metadata tables are required since MSSQL2008 doesn't have a 
> builtin way to store all of these information. When importing the 
> first table it should indeed be created from scratch. With regards to 
> spatial_ref_sys it could also be populated by using the corresponding 
> postgis script.
>
>
>     It would be nice to be able to connect to a layer without having
>     to register it with the geometry_columns table using a connection
>     string such as:
>
>     "MSSQL:server=W08-SQL08;database=dbname;Integrated
>     Security=true;tables=myschema.testdata(GEOMFIELD)"
>
>     As this is not currently possible I manually added a record to
>     geometry_columns for an existing spatial table in my database.
>     This is in a separate schema so I used the following SQL:
>
>     INSERT INTO [geometry_columns] ([f_table_catalog],
>     [f_table_schema] ,[f_table_name],
>     [f_geometry_column],[coord_dimension],[srid],[geometry_type])
>     VALUES ('DbName', '*myschema*', 'testdata', 'GEOMFIELD', 2, 32768,
>     'MULTIPOLYGON')
>
>     However using SQL Profiler when trying to connect to the layer it
>     always tries to find this layer in *dbo*.
>
>     exec DbName..sp_columns N'testdata',N'*dbo*',N'DbName',NULL
>
>     As it does not exist in dbo the connection never succeeds, and I
>     cannot connect to any of the layers in the database.
>     I can add this to trac if it is an issue - I just want to first
>     make sure I've not made any obvious errors.
>
>
> Specifying the schema in geometry_columns should be working and 
> myschema.mytable(GEOMFIELD) should also be a working option. So please 
> file a ticket with this issue if you encounter problems here.
>
>
> Best regards,
>
> Tamas
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110207/bdb4c1ec/attachment.html
From nicolas.simon at spw.wallonie.be  Mon Feb  7 10:35:21 2011
From: nicolas.simon at spw.wallonie.be (Nicolas Simon)
Date: Mon Feb  7 10:35:34 2011
Subject: [gdal-dev] OGR Shapefile SQL with date in where clause
In-Reply-To: <AANLkTingqTbo4d+B5AchRDmFsoO=65YYLfbkzWswkXu=@mail.gmail.com>
Message-ID: <8C7DAE7B21100F4CABDD600FAAD339D005926B56@DGA-EXC01.mrw.wallonie.int>

Paolo,

I have no error on the command line... and an empty result in the destination file.  
I'm using GDAL 1.6.1, could it be the reason ?

Thk  

Nicolas

> -----Message d'origine-----
> De : Paolo Corti [mailto:pcorti@gmail.com]
> Envoy? : lundi 7 f?vrier 2011 16:26
> ? : Nicolas Simon
> Cc : gdal-dev@lists.osgeo.org
> Objet : Re: [gdal-dev] OGR Shapefile SQL with date in where clause
> 
> 
> On Mon, Feb 7, 2011 at 4:08 PM, Nicolas Simon
> <nicolas.simon@spw.wallonie.be> wrote:
> > Hello,
> > ??????? I would like to extract feature from a shapefile 
> layer based on a
> > Date field.
> >
> > ??????? But I don't know how to format date value
> >
> > ??????? Here is a defect command
> >
> > ogr2ogr -f "ESRI Shapefile" extrait.shp fulldataset.shp 
> -sql "select * from
> > fulldataset where VISTERRAIN = '2010/12/07' "
> >
> > ??????? Help will be welcome.
> >
> > ??????? Thank you
> >
> > ??????? Nicolas Simon
> >
> 
> Hi Nicolas
> 
> I am using gdal 1.8 and it is working for me, look at the output:
> 
> ogrinfo -al poi.shp
> INFO: Open of `poi.shp'
>       using driver `ESRI Shapefile' successful.
> 
> Layer name: poi
> Geometry: Point
> Feature Count: 3
> Extent: (-5106701.348438, -1250725.685421) - (-17541.662933, 
> 4118769.067506)
> Layer SRS WKT:
> PROJCS["WGS_1984_UTM_Zone_32N",
>     GEOGCS["GCS_WGS_1984",
>         DATUM["WGS_1984",
>             SPHEROID["WGS_1984",6378137.0,298.257223563]],
>         PRIMEM["Greenwich",0.0],
>         UNIT["Degree",0.0174532925199433]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["False_Easting",500000.0],
>     PARAMETER["False_Northing",0.0],
>     PARAMETER["Central_Meridian",9.0],
>     PARAMETER["Scale_Factor",0.9996],
>     PARAMETER["Latitude_Of_Origin",0.0],
>     UNIT["Meter",1.0]]
> Id: Integer (6.0)
> mydate_d: Date (10.0)
> mydate_s: String (50.0)
> OGRFeature(poi):0
>   Id (Integer) = 0
>   mydate_d (Date) = 2010/08/11
>   mydate_s (String) = (null)
>   POINT (-4071618.022572413086891 4118769.067506278399378)
> 
> OGRFeature(poi):1
>   Id (Integer) = 0
>   mydate_d (Date) = 2010/08/11
>   mydate_s (String) = (null)
>   POINT (-5106701.348437865264714 668491.314621437806636)
> 
> OGRFeature(poi):2
>   Id (Integer) = 0
>   mydate_d (Date) = 2010/11/11
>   mydate_s (String) = (null)
>   POINT (-17541.662932725295832 -1250725.685420754598454)
> 
> ogr2ogr out.shp poi.shp -sql "select * from poi where 
> mydate_d = '2010/08/11'"
> 
> ogrinfo -al out.shp
> INFO: Open of `out.shp'
>       using driver `ESRI Shapefile' successful.
> 
> Layer name: out
> Geometry: Point
> Feature Count: 2
> Extent: (-5106701.348438, 668491.314621) - (-4071618.022572, 
> 4118769.067506)
> Layer SRS WKT:
> PROJCS["WGS_1984_UTM_Zone_32N",
>     GEOGCS["GCS_WGS_1984",
>         DATUM["WGS_1984",
>             SPHEROID["WGS_1984",6378137.0,298.257223563]],
>         PRIMEM["Greenwich",0.0],
>         UNIT["Degree",0.017453292519943295]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["False_Easting",500000.0],
>     PARAMETER["False_Northing",0.0],
>     PARAMETER["Central_Meridian",9.0],
>     PARAMETER["Scale_Factor",0.9996],
>     PARAMETER["Latitude_Of_Origin",0.0],
>     UNIT["Meter",1.0]]
> Id: Integer (6.0)
> mydate_d: Date (10.0)
> mydate_s: String (50.0)
> OGRFeature(out):0
>   Id (Integer) = 0
>   mydate_d (Date) = 2010/08/11
>   mydate_s (String) = (null)
>   POINT (-4071618.022572413086891 4118769.067506278399378)
> 
> OGRFeature(out):1
>   Id (Integer) = 0
>   mydate_d (Date) = 2010/08/11
>   mydate_s (String) = (null)
>   POINT (-5106701.348437865264714 668491.314621437806636)
> 
> What error do you get?
> 
> best regards
> P
> 
> -- 
> Paolo Corti
> Geospatial software developer
> web: http://www.paolocorti.net
> twitter: @paolo_corti
> 
> 
> 


From alexandre.gacon+gdal at gmail.com  Mon Feb  7 10:45:09 2011
From: alexandre.gacon+gdal at gmail.com (Alexandre Gacon)
Date: Mon Feb  7 10:45:13 2011
Subject: [gdal-dev] Unable to compile OCI driver
In-Reply-To: <4D500631.4040309@pobox.com>
References: <AANLkTinJJjP-_Eo8AvFOinAau9rZPa-BEOKG2PQcS2yM@mail.gmail.com>
	<4D500631.4040309@pobox.com>
Message-ID: <AANLkTi=3YDAqMCaXy8hF=XbK-41xuDE60ado9p8Y4XhR@mail.gmail.com>

Hi,

I found the problem : my colleague send me a 64bits version of the OCI. When
compiling a 32 bits version of GDAL, it logically fails.

Regards,

Alexandre

On Mon, Feb 7, 2011 at 3:48 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:

> On 11-02-07 04:08 AM, Alexandre Gacon wrote:
>
>> Hi all,
>>
>> I am trying to build GDAL/OGR with the OCI driver with Visual Studio 2005
>> and
>> with the OCI coming from the version 11g version of ORACLE. I am stuck
>> with
>> errors during linking : the linker cannot find the symbols defined in the
>> OCI
>> headers.
>>
>> I have put all the libraries I have in the lib path but it has no effect.
>>
>> Any idea ?
>>
>
> Alexandre,
>
> My first idea is that it would be helpful if you could provide the exact
> link command that ends up being used, and capture the exact error messages
> from that link.  Otherwise we are largely flying blind.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Alexandre Gacon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110207/0cecdf10/attachment-0001.html
From szekerest at gmail.com  Mon Feb  7 11:05:18 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Feb  7 11:05:21 2011
Subject: [gdal-dev] MSSQL2008 Driver and OGR/Python
In-Reply-To: <4D501128.7020708@gmail.com>
References: <201009062027.22693.even.rouault@mines-paris.org>
	<AANLkTik7+iWatYLW5aunUW51U48zHkkU5PtrepgGA8vh@mail.gmail.com>
	<4D4FD8BC.9070000@gmail.com>
	<AANLkTimUdTr2XxPSQVk8KP8X9xV0boCG+0AcCK-1-X1o@mail.gmail.com>
	<4D501128.7020708@gmail.com>
Message-ID: <AANLkTikctcCBw33XZvegGGJ2fZ_q=JzL02QLOfDDN7+1@mail.gmail.com>

I think the second one should also work, so this problem may however be
fixed.

Best regards,

Tamas


2011/2/7 geographika <geographika@gmail.com>

>  Thanks Tamas for the quick reply.
> I've been trying a few more combinations, and I now have it working.
>
> In the geometry_columns table the first record works - when I duplicate the
> schema name in the the f_table_schema and f_table_name fields. The second
> does not.
> In fact I can put any entry in the f_table_schema field - it appears to be
> ignored.
>
>
> [f_table_catalog], [f_table_schema] ,[f_table_name],
> [f_geometry_column],[coord_dimension],[srid],[geometry_type]
>   DbName any value can be put here
>  schemaname.mytable GEOMFIELD 2 32768 MULTIPOLYGON  DbName schemaname
> mytable GEOMFIELD 2 32768 MULTIPOLYGON
> The following now works (with the first record - not the second):
>
> conn_string = "MSSQL:server=W08-SQL08;database=DbName;Integrated
> Security=true;"
>
> ds = ogr.Open(conn_string)
> lyr = ds.GetLayerByName('schemaname.mytable') #schema name always has to be
> passed here
>
> If this is not the intended behaviour I can create a ticket, otherwise
> thanks for your time (and drivers!).
>
> Regards,
>
> Seth
>
>
>  --
> web: http://geographika.co.uk
> twitter: @geographika
>
>
>
> On 07/02/2011 13:26, Tamas Szekeres wrote:
>
>
>
> 2011/2/7 geographika <geographika@gmail.com>
>
>>  Hi,
>>
>> When working with the SQL Server 2008 OGR driver I presume it is necessary
>> to create the following metadata tables?
>>
>> geometry_columns
>> spatial_ref_sys
>>
>> There appears to be no way to do this automatically in Python, but if I
>> import a single dataset into the database it is created automatically. I can
>> then use:
>>
>> conn_string = "MSSQL:server=W08-SQL08;database=dbname;Integrated
>> Security=true;"
>> ds = ogr.Open(conn_string)
>> lyr = ds.GetLayerByName('testdata')
>>
>
> Hi Seth,
>
> Those metadata tables are required since MSSQL2008 doesn't have a builtin
> way to store all of these information. When importing the first table it
> should indeed be created from scratch. With regards to spatial_ref_sys it
> could also be populated by using the corresponding postgis script.
>
>
>
>>
>> It would be nice to be able to connect to a layer without having to
>> register it with the geometry_columns table using a connection string such
>> as:
>>
>> "MSSQL:server=W08-SQL08;database=dbname;Integrated
>> Security=true;tables=myschema.testdata(GEOMFIELD)"
>>
>> As this is not currently possible I manually added a record to
>> geometry_columns for an existing spatial table in my database. This is in a
>> separate schema so I used the following SQL:
>>
>> INSERT INTO [geometry_columns] ([f_table_catalog], [f_table_schema]
>> ,[f_table_name],
>> [f_geometry_column],[coord_dimension],[srid],[geometry_type])
>> VALUES ('DbName', '*myschema*', 'testdata', 'GEOMFIELD', 2, 32768,
>> 'MULTIPOLYGON')
>>
>> However using SQL Profiler when trying to connect to the layer it always
>> tries to find this layer in *dbo*.
>>
>> exec DbName..sp_columns N'testdata',N'*dbo*',N'DbName',NULL
>>
>> As it does not exist in dbo the connection never succeeds, and I cannot
>> connect to any of the layers in the database.
>> I can add this to trac if it is an issue - I just want to first make sure
>> I've not made any obvious errors.
>>
>>
> Specifying the schema in geometry_columns should be working and
> myschema.mytable(GEOMFIELD) should also be a working option. So please file
> a ticket with this issue if you encounter problems here.
>
>
> Best regards,
>
> Tamas
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110207/6bfcd27f/attachment.html
From maphew at gmail.com  Mon Feb  7 11:18:24 2011
From: maphew at gmail.com (Matt Wilkie)
Date: Mon Feb  7 11:18:47 2011
Subject: [gdal-dev] error adding ecw on Ubuntu 10.4 (lucid)
In-Reply-To: <201102061908.42820.even.rouault@mines-paris.org>
References: <AANLkTinrs6sWe4Jqi=bg2sXUNtdWPB3RjqFkjQU4-ufF@mail.gmail.com>
	<201102052024.16151.even.rouault@mines-paris.org>
	<AANLkTi=gTXhDQcWpcbZA2z+19iTZoOONR0bL57U9Omzk@mail.gmail.com>
	<201102061908.42820.even.rouault@mines-paris.org>
Message-ID: <AANLkTimMWda1U-TSKeK++fTQn5WQkunAf9yn56-uFO-H@mail.gmail.com>

> Perhaps try setting the environment variable GDAL_DRIVER_PATH to
> /usr/lib/gdal17plugins

Ok, that finally did the trick. Thanks for your help.

$ export GDAL_DRIVER_PATH=/usr/lib/gdal17plugins

Is this normally set as part of the install? (e.g. should I report a
packaging bug?)

-- 
-matt
From warmerdam at pobox.com  Mon Feb  7 11:29:44 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb  7 11:29:48 2011
Subject: [gdal-dev] error adding ecw on Ubuntu 10.4 (lucid)
In-Reply-To: <AANLkTimMWda1U-TSKeK++fTQn5WQkunAf9yn56-uFO-H@mail.gmail.com>
References: <AANLkTinrs6sWe4Jqi=bg2sXUNtdWPB3RjqFkjQU4-ufF@mail.gmail.com>
	<201102052024.16151.even.rouault@mines-paris.org>
	<AANLkTi=gTXhDQcWpcbZA2z+19iTZoOONR0bL57U9Omzk@mail.gmail.com>
	<201102061908.42820.even.rouault@mines-paris.org>
	<AANLkTimMWda1U-TSKeK++fTQn5WQkunAf9yn56-uFO-H@mail.gmail.com>
Message-ID: <4D501DF8.5040703@pobox.com>

On 11-02-07 11:18 AM, Matt Wilkie wrote:
>> Perhaps try setting the environment variable GDAL_DRIVER_PATH to
>> /usr/lib/gdal17plugins
>
> Ok, that finally did the trick. Thanks for your help.
>
> $ export GDAL_DRIVER_PATH=/usr/lib/gdal17plugins
>
> Is this normally set as part of the install? (e.g. should I report a
> packaging bug?)

Matt,

No, this is not normally set for prepackaged GDAL's on linux.  On linux
GDAL defaults to looking in /usr/local/lib/gdalplugins.  It is possible
to set the GDAL_PREFIX to change the default from /usr/local to /usr for
instance, but this is not apparently something the makefiles help with
as far as I can see.

Note that in 1.9 (aka trunk) GDAL now looks in /usr/local/lib/gdalplugins/1.9
before looking in /usr/local/lib/gdalplugins so embedding the version in
the directory name is no longer needed.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Doug_Newcomb at fws.gov  Mon Feb  7 12:30:33 2011
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Mon Feb  7 12:53:22 2011
Subject: [gdal-dev] Read and Write ArcGIS Bynary GRID
In-Reply-To: <4D50087B.8030406@pobox.com>
Message-ID: <OF8ABFA9C4.378133A6-ON85257830.005F203D-85257830.00602BDC@fws.gov>

Jorge,

> Hello,
>
>          Using GDAL library is posible to read and write ArcGIS binary 
GRID files?

I generally work with GRID files in GRASS.  As mentioned before, gdal ( 
r.in.gdal in this case) imports the GRID layers fine.  To export back to 
ArcGIS, I use the r.out.arc command, 
http://grass.fbk.eu/grass65/manuals/html65_user/r.out.arc.html , in GRASS 
to create an ESRI ASCII GRID file. 

        You can then import that back into ArcGIS.  Bear in mind that if 
you are a 32-bit windowsXP platform you will not be able to import a text 
file larger than 43? GB ( Frank?) in size due to the limitations of the 
WindowsXP 32 bit filesystem.  I have successfully imported data ESRI ASCII 
GRID files to ArcGIS up to 60GB in size on a computer running WindowsXP 64 
bit with ArcGIS 9.3.1.  Email me directly if you need further info.

 Doug
 


Doug Newcomb 
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the 
official policy of the U.S.Fish and Wildlife Service or Dept. of the 
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110207/70335d21/attachment.html
From even.rouault at mines-paris.org  Mon Feb  7 13:26:26 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Feb  7 13:26:24 2011
Subject: [gdal-dev] OGR Shapefile SQL with date in where clause
In-Reply-To: <8C7DAE7B21100F4CABDD600FAAD339D005926B56@DGA-EXC01.mrw.wallonie.int>
References: <8C7DAE7B21100F4CABDD600FAAD339D005926B56@DGA-EXC01.mrw.wallonie.int>
Message-ID: <201102071926.27047.even.rouault@mines-paris.org>

Le lundi 07 f?vrier 2011 16:35:21, Nicolas Simon a ?crit :
> Paolo,
> 
> I have no error on the command line... and an empty result in the
> destination file. I'm using GDAL 1.6.1, could it be the reason ?

Yes, you likely need to upgrade to latest version as there have been a number 
of fixes related to SQL and dates.

> 
> Thk
> 
> Nicolas
From w.reiche at hotmail.com  Mon Feb  7 13:57:28 2011
From: w.reiche at hotmail.com (Werner Reiche)
Date: Mon Feb  7 13:57:30 2011
Subject: [gdal-dev] gdal_grid - very slow
Message-ID: <BLU140-W30028E3F046ACC9D3A347686EB0@phx.gbl>


I'm using gdal_grid to create a 1200x796 pixel out from an input data set of approximately
250,000 points.  This takes about 90 minutes (30 minutes for each r/g/b band).  This seems
to be unreasonably slow.  Any ideas on speeding it up?
 
The command I am using is:
gdal_grid -txe -51.428009 -43.153992 -tye 46.112598 51.347198 -outsize 1024 796 \ 
          -a nearest:radius1=0.01:radius2=0.01:angle=0.0:nodata=0.0 \ 
          -l rs2_file_1 -l rs2_file_2 -l rs2_file_3 \ 
          -of GTiff -ot Byte rs2_file.vrt test.tiff 

  		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110207/3ad53502/attachment.html
From alhuskic at gmail.com  Mon Feb  7 15:09:48 2011
From: alhuskic at gmail.com (Alen Huskic)
Date: Mon Feb  7 15:10:12 2011
Subject: [gdal-dev] Get z-value of pixel from 3band raster using GDAL
Message-ID: <AANLkTimWn5XHDciNJt+vpVTeSnOkXmRTqTLee=_PD1Vb@mail.gmail.com>

Hi,

i was wondering is it possible to get z-values from  3 band raster? I am
using GDAL 1.7 c# bindings and I am unable to get z-values?
any ideas? any1?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110207/ba827137/attachment.html
From even.rouault at mines-paris.org  Mon Feb  7 15:20:44 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Feb  7 15:20:41 2011
Subject: [gdal-dev] gdal_grid - very slow
In-Reply-To: <BLU140-W30028E3F046ACC9D3A347686EB0@phx.gbl>
References: <BLU140-W30028E3F046ACC9D3A347686EB0@phx.gbl>
Message-ID: <201102072120.44652.even.rouault@mines-paris.org>

Le lundi 07 f?vrier 2011 19:57:28, Werner Reiche a ?crit :
> I'm using gdal_grid to create a 1200x796 pixel out from an input data set
> of approximately 250,000 points.  This takes about 90 minutes (30 minutes
> for each r/g/b band).  This seems to be unreasonably slow.  Any ideas on
> speeding it up?
> 
> The command I am using is:
> gdal_grid -txe -51.428009 -43.153992 -tye 46.112598 51.347198 -outsize 1024
> 796 \ -a nearest:radius1=0.01:radius2=0.01:angle=0.0:nodata=0.0 \ -l
> rs2_file_1 -l rs2_file_2 -l rs2_file_3 \
>           -of GTiff -ot Byte rs2_file.vrt test.tiff

This is a known limitation of the current gdal_grid. No easy workaround except 
reducing your raster size and/or point set. Or try an experimental patch 
available in http://trac.osgeo.org/gdal/ticket/2411 (based on r15061) but it 
won't apply on recent versions without adjustements.
From mgleahy at alumni.uwaterloo.ca  Mon Feb  7 18:57:41 2011
From: mgleahy at alumni.uwaterloo.ca (Mike Leahy)
Date: Mon Feb  7 18:57:49 2011
Subject: [gdal-dev] Re: PHP bindings
In-Reply-To: <201102061450.35281.mgleahy@alumni.uwaterloo.ca>
References: <201102061450.35281.mgleahy@alumni.uwaterloo.ca>
Message-ID: <201102071857.42980.mgleahy@alumni.uwaterloo.ca>

Hi again,

I recognize this perhaps isn't a popular topic.  However, I thought I'd give 
the PHP bingings a try with the latest 1.8.0 release.  It's somewhat promising 
to see that enabling the php bindings in the ./configure options and compiling 
will succesfully produce a php_gdal.so library.  After finding this, I ran make 
install for gdal, then copied the php_gdal.so to the PHP modules folder and 
configured PHP to load it.  Unfortunately, I get the following output in the 
Apache error logs when I attempt to load the module in PHP:

PHP Warning:  PHP Startup: Unable to load dynamic library 
'/usr/lib/php5/20090626+lfs/php_gdal.so' - 
/usr/lib/php5/20090626+lfs/php_gdal.so: undefined symbol: 
CPLLoggingErrorHandler in Unknown on line 0

I'm not really sure where to look next.  Could it be a compatibility issue 
with PHP 5.3.3, or maybe for some reason the php module isn't able to access 
the installed gdal libraries?

Any suggestions would be welcome.  I'm testing this in a minimal 64-bit Ubuntu 
10.11 VM.

Regards,
Mike

On Sunday, February 06, 2011 14:50:34 Mike Leahy wrote:
> Hello List,
> 
> Does anyone have an idea if there is any likelihood for a revival of php
> bindings for GDAL/OGR.  I know if these were available, I'd be making use
> of them...although, I have no experience creating/maintaining SWIG
> libraries.  So I'm curious to know what someone would need to know to get
> started on this, and how big of a job would it likely be?
> 
> Regards,
> Mike
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110207/b03427dc/attachment.html
From Jonathan.Lefman at usace.army.mil  Tue Feb  8 10:46:30 2011
From: Jonathan.Lefman at usace.army.mil (Lefman, Jonathan ERDC-TEC-VA)
Date: Tue Feb  8 10:46:34 2011
Subject: [gdal-dev] New to list and question (UNCLASSIFIED)
Message-ID: <FF46EE5C24AD134C86774E7498509C3DDDC46D@erd-ml1itl.erd.ds.usace.army.mil>

Classification: UNCLASSIFIED
Caveats: NONE

Hi all,

I joined this list today.  I have a question about using Python bindings with
GDAL to get info from a geotiff.  

What are the functions that I need to obtain coordinate extents of raster
data?  For example, if I have a rectangular area from Washington, DC with
coordinates in UTM format, how would I determine the top-left and lower-right
corners?  I was unable to find an example in the documentation.  

Here's a snippet of my code of where I'm at:

from osgeo import gdal
gdaldata = gdal.Open(gtiff_filename)
prj = gdaldata.GetProjection()
trfm = gdaldata.GetGeoTransform()

Thanks everyone,

Jon


Classification: UNCLASSIFIED
Caveats: NONE


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110208/f8a7c199/attachment-0001.html
From jorge.arevalo at deimos-space.com  Tue Feb  8 11:14:53 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Tue Feb  8 11:15:16 2011
Subject: [gdal-dev] New to list and question (UNCLASSIFIED)
In-Reply-To: <FF46EE5C24AD134C86774E7498509C3DDDC46D@erd-ml1itl.erd.ds.usace.army.mil>
References: <FF46EE5C24AD134C86774E7498509C3DDDC46D@erd-ml1itl.erd.ds.usace.army.mil>
Message-ID: <AANLkTi=AHT76WVPaRMgSFHxaMyjwpke5odjhq7j-3oWt@mail.gmail.com>

Hi Jonathan,

On Tue, Feb 8, 2011 at 4:46 PM, Lefman, Jonathan ERDC-TEC-VA
<Jonathan.Lefman@usace.army.mil> wrote:
> Classification: UNCLASSIFIED
>
> Caveats: NONE
>
> Hi all,
>
> I joined this list today.? I have a question about using Python bindings
> with GDAL to get info from a geotiff.
>
> What are the functions that I need to obtain coordinate extents of raster
> data?? For example, if I have a rectangular area from Washington, DC with
> coordinates in UTM format, how would I determine the top-left and
> lower-right corners?? I was unable to find an example in the documentation.
>
> Here?s a snippet of my code of where I?m at:
>
> from osgeo import gdal
>
> gdaldata = gdal.Open(gtiff_filename)
>
> prj = gdaldata.GetProjection()
>
> trfm = gdaldata.GetGeoTransform()
>
> Thanks everyone,
>
> Jon
>
> Classification: UNCLASSIFIED
>
> Caveats: NONE
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

Test this:

from osgeo import gdal

def calculate_geoxy(gt, xy):
    """Calculate georeferenced coordinate from given x and y"""
    xgeo = gt[0] + gt[1] * xy[0] + gt[2] * xy[1];
    ygeo = gt[3] + gt[4] * xy[0] + gt[5] * xy[1];

    return (xgeo, ygeo)

ds = gdal.Open(gtiff_filename)
prj = ds.GetProjection()
gt = tuple(list(ds.GetGeoTransform()))
dim = ( (0,0),(0,ds.RasterYSize),(ds.RasterXSize,0),(ds.RasterXSize,ds.RasterYSize)
)
ext = (calculate_geoxy(gt, dim[0]), calculate_geoxy(gt, dim[1]),
           calculate_geoxy(gt, dim[2]), calculate_geoxy(gt, dim[3]))


Best regards,

-- 
Jorge Ar?valo
Internet & Mobilty Division, DEIMOS
jorge.arevalo@deimos-space.com
http://es.linkedin.com/in/jorgearevalo80
http://mobility.grupodeimos.com/
http://www.twitter.com/jorgeas80
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From Jonathan.Lefman at usace.army.mil  Tue Feb  8 11:24:18 2011
From: Jonathan.Lefman at usace.army.mil (Lefman, Jonathan ERDC-TEC-VA)
Date: Tue Feb  8 11:24:23 2011
Subject: [gdal-dev] New to list and question (UNCLASSIFIED)
In-Reply-To: <AANLkTi=AHT76WVPaRMgSFHxaMyjwpke5odjhq7j-3oWt@mail.gmail.com>
References: <FF46EE5C24AD134C86774E7498509C3DDDC46D@erd-ml1itl.erd.ds.usace.army.mil>
	<AANLkTi=AHT76WVPaRMgSFHxaMyjwpke5odjhq7j-3oWt@mail.gmail.com>
Message-ID: <FF46EE5C24AD134C86774E7498509C3DDDC4C7@erd-ml1itl.erd.ds.usace.army.mil>

Classification: UNCLASSIFIED
Caveats: NONE

Thank you Jorge.  That worked.  :)



-----Original Message-----
From: Jorge Ar?valo [mailto:jorge.arevalo@deimos-space.com] 
Sent: Tuesday, February 08, 2011 11:15
To: Lefman, Jonathan ERDC-TEC-VA
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] New to list and question (UNCLASSIFIED)

Hi Jonathan,

On Tue, Feb 8, 2011 at 4:46 PM, Lefman, Jonathan ERDC-TEC-VA
<Jonathan.Lefman@usace.army.mil> wrote:
> Classification: UNCLASSIFIED
>
> Caveats: NONE
>
> Hi all,
>
> I joined this list today.? I have a question about using Python 
> bindings with GDAL to get info from a geotiff.
>
> What are the functions that I need to obtain coordinate extents of 
> raster data?? For example, if I have a rectangular area from 
> Washington, DC with coordinates in UTM format, how would I determine 
> the top-left and lower-right corners?? I was unable to find an example in
the documentation.
>
> Here's a snippet of my code of where I'm at:
>
> from osgeo import gdal
>
> gdaldata = gdal.Open(gtiff_filename)
>
> prj = gdaldata.GetProjection()
>
> trfm = gdaldata.GetGeoTransform()
>
> Thanks everyone,
>
> Jon
>
> Classification: UNCLASSIFIED
>
> Caveats: NONE
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

Test this:

from osgeo import gdal

def calculate_geoxy(gt, xy):
    """Calculate georeferenced coordinate from given x and y"""
    xgeo = gt[0] + gt[1] * xy[0] + gt[2] * xy[1];
    ygeo = gt[3] + gt[4] * xy[0] + gt[5] * xy[1];

    return (xgeo, ygeo)

ds = gdal.Open(gtiff_filename)
prj = ds.GetProjection()
gt = tuple(list(ds.GetGeoTransform()))
dim = (
(0,0),(0,ds.RasterYSize),(ds.RasterXSize,0),(ds.RasterXSize,ds.RasterYSize)
)
ext = (calculate_geoxy(gt, dim[0]), calculate_geoxy(gt, dim[1]),
           calculate_geoxy(gt, dim[2]), calculate_geoxy(gt, dim[3]))


Best regards,

--
Jorge Ar?valo
Internet & Mobilty Division, DEIMOS
jorge.arevalo@deimos-space.com
http://es.linkedin.com/in/jorgearevalo80
http://mobility.grupodeimos.com/
http://www.twitter.com/jorgeas80
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g

Classification: UNCLASSIFIED
Caveats: NONE


From jorge.arevalo at deimos-space.com  Tue Feb  8 11:45:36 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Tue Feb  8 12:12:41 2011
Subject: [gdal-dev] New to list and question (UNCLASSIFIED)
In-Reply-To: <FF46EE5C24AD134C86774E7498509C3DDDC4C7@erd-ml1itl.erd.ds.usace.army.mil>
References: <FF46EE5C24AD134C86774E7498509C3DDDC46D@erd-ml1itl.erd.ds.usace.army.mil>
	<AANLkTi=AHT76WVPaRMgSFHxaMyjwpke5odjhq7j-3oWt@mail.gmail.com>
	<FF46EE5C24AD134C86774E7498509C3DDDC4C7@erd-ml1itl.erd.ds.usace.army.mil>
Message-ID: <AANLkTikKyckAMjGKnhjOwjdsj7eq_U6vneVAyx+=VzRR@mail.gmail.com>

2011/2/8 Lefman, Jonathan ERDC-TEC-VA <Jonathan.Lefman@usace.army.mil>:
> Classification: UNCLASSIFIED
> Caveats: NONE
>
> Thank you Jorge. ?That worked. ?:)
>
>

Good to hear it :-).

Adapted from http://trac.osgeo.org/postgis/browser/trunk/raster/scripts/python/raster2pgsql.py


>
> -----Original Message-----
> From: Jorge Ar?valo [mailto:jorge.arevalo@deimos-space.com]
> Sent: Tuesday, February 08, 2011 11:15
> To: Lefman, Jonathan ERDC-TEC-VA
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] New to list and question (UNCLASSIFIED)
>
> Hi Jonathan,
>
> On Tue, Feb 8, 2011 at 4:46 PM, Lefman, Jonathan ERDC-TEC-VA
> <Jonathan.Lefman@usace.army.mil> wrote:
>> Classification: UNCLASSIFIED
>>
>> Caveats: NONE
>>
>> Hi all,
>>
>> I joined this list today.? I have a question about using Python
>> bindings with GDAL to get info from a geotiff.
>>
>> What are the functions that I need to obtain coordinate extents of
>> raster data?? For example, if I have a rectangular area from
>> Washington, DC with coordinates in UTM format, how would I determine
>> the top-left and lower-right corners?? I was unable to find an example in
> the documentation.
>>
>> Here's a snippet of my code of where I'm at:
>>
>> from osgeo import gdal
>>
>> gdaldata = gdal.Open(gtiff_filename)
>>
>> prj = gdaldata.GetProjection()
>>
>> trfm = gdaldata.GetGeoTransform()
>>
>> Thanks everyone,
>>
>> Jon
>>
>> Classification: UNCLASSIFIED
>>
>> Caveats: NONE
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> Test this:
>
> from osgeo import gdal
>
> def calculate_geoxy(gt, xy):
> ? ?"""Calculate georeferenced coordinate from given x and y"""
> ? ?xgeo = gt[0] + gt[1] * xy[0] + gt[2] * xy[1];
> ? ?ygeo = gt[3] + gt[4] * xy[0] + gt[5] * xy[1];
>
> ? ?return (xgeo, ygeo)
>
> ds = gdal.Open(gtiff_filename)
> prj = ds.GetProjection()
> gt = tuple(list(ds.GetGeoTransform()))
> dim = (
> (0,0),(0,ds.RasterYSize),(ds.RasterXSize,0),(ds.RasterXSize,ds.RasterYSize)
> )
> ext = (calculate_geoxy(gt, dim[0]), calculate_geoxy(gt, dim[1]),
> ? ? ? ? ? calculate_geoxy(gt, dim[2]), calculate_geoxy(gt, dim[3]))
>
>
> Best regards,
>
> --
> Jorge Ar?valo
> Internet & Mobilty Division, DEIMOS
> jorge.arevalo@deimos-space.com
> http://es.linkedin.com/in/jorgearevalo80
> http://mobility.grupodeimos.com/
> http://www.twitter.com/jorgeas80
> http://gis4free.wordpress.com
> http://geohash.org/ezjqgrgzz0g
>
> Classification: UNCLASSIFIED
> Caveats: NONE
>
>
>



-- 
Jorge Ar?valo
Internet & Mobilty Division, DEIMOS
jorge.arevalo@deimos-space.com
http://es.linkedin.com/in/jorgearevalo80
http://mobility.grupodeimos.com/
http://www.twitter.com/jorgeas80
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From szekerest at gmail.com  Tue Feb  8 15:44:54 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Feb  8 15:44:58 2011
Subject: [gdal-dev] Re: PHP bindings
In-Reply-To: <201102071857.42980.mgleahy@alumni.uwaterloo.ca>
References: <201102061450.35281.mgleahy@alumni.uwaterloo.ca>
	<201102071857.42980.mgleahy@alumni.uwaterloo.ca>
Message-ID: <AANLkTimpYCBppHn7nZuPtmGxDrALjZR7Dxni8uyEDUKn@mail.gmail.com>

Mike,

Actually the PHP bindings are not maintained at all, so any improvements in
this topic would be welcomed. You might also want to regenerate the bindings
with SWIG since the committed version may be outdated. You should also make
sure the corresponding gdal core is available load (proably by setting
LD_LIBRARY_PATH).

Best regards,

Tamas



2011/2/8 Mike Leahy <mgleahy@alumni.uwaterloo.ca>

>  Hi again,
>
> I recognize this perhaps isn't a popular topic. However, I thought I'd give
> the PHP bingings a try with the latest 1.8.0 release. It's somewhat
> promising to see that enabling the php bindings in the ./configure options
> and compiling will succesfully produce a php_gdal.so library. After finding
> this, I ran make install for gdal, then copied the php_gdal.so to the PHP
> modules folder and configured PHP to load it. Unfortunately, I get the
> following output in the Apache error logs when I attempt to load the module
> in PHP:
>
> PHP Warning: PHP Startup: Unable to load dynamic library
> '/usr/lib/php5/20090626+lfs/php_gdal.so' -
> /usr/lib/php5/20090626+lfs/php_gdal.so: undefined symbol:
> CPLLoggingErrorHandler in Unknown on line 0
>
> I'm not really sure where to look next. Could it be a compatibility issue
> with PHP 5.3.3, or maybe for some reason the php module isn't able to access
> the installed gdal libraries?
>
> Any suggestions would be welcome. I'm testing this in a minimal 64-bit
> Ubuntu 10.11 VM.
>
> Regards,
>
> Mike
>
> On Sunday, February 06, 2011 14:50:34 Mike Leahy wrote:
>
> > Hello List,
>
> >
>
> > Does anyone have an idea if there is any likelihood for a revival of php
>
> > bindings for GDAL/OGR. I know if these were available, I'd be making use
>
> > of them...although, I have no experience creating/maintaining SWIG
>
> > libraries. So I'm curious to know what someone would need to know to get
>
> > started on this, and how big of a job would it likely be?
>
> >
>
> > Regards,
>
> > Mike
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110208/c1548c0b/attachment.html
From stefano.moratto at gmail.com  Tue Feb  8 16:41:50 2011
From: stefano.moratto at gmail.com (Stefano Moratto)
Date: Tue Feb  8 16:41:52 2011
Subject: [gdal-dev] RasterIO in paralel
Message-ID: <AANLkTiks2VojFOZYR70LhbcZHp9teOHmznOfvYJNUsq+@mail.gmail.com>

Hello,
          given an opened GDAL dataset, is it possibile to perform
gdalrasterio calls for each band in a dedicated thread per band in a
thead-safe way?
E.g. I have a raster image with 3 band (r,g,b). Since I have 4 core I would
like to I run a thread for a band r, one for band g and one for band g.


Regards,
Stefano
-- 
Dr.Eng. Stefano Moratto
stefano.moratto@gmail.com
stefano.moratto@csiat.it
http://www.csiat.it - Traffic Optimization Software
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110208/20ad763c/attachment.html
From even.rouault at mines-paris.org  Tue Feb  8 16:48:03 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb  8 16:48:20 2011
Subject: [gdal-dev] RasterIO in paralel
In-Reply-To: <AANLkTiks2VojFOZYR70LhbcZHp9teOHmznOfvYJNUsq+@mail.gmail.com>
References: <AANLkTiks2VojFOZYR70LhbcZHp9teOHmznOfvYJNUsq+@mail.gmail.com>
Message-ID: <201102082248.03890.even.rouault@mines-paris.org>

Le mardi 08 f?vrier 2011 22:41:50, Stefano Moratto a ?crit :
> Hello,
>           given an opened GDAL dataset, is it possibile to perform
> gdalrasterio calls for each band in a dedicated thread per band in a
> thead-safe way?
> E.g. I have a raster image with 3 band (r,g,b). Since I have 4 core I would
> like to I run a thread for a band r, one for band g and one for band g.

This has been discussed recently. See http://lists.osgeo.org/pipermail/gdal-
dev/2011-January/027567.html and the following messages.

(I'd note that if you process a pixel interleaved image, there are 
optimizations in the GTiff driver to make the fetching of other bands almost 
'free' if you read block by block, so there's probably little to gain, but the 
results of your experiments are welcome)

> 
> 
> Regards,
> Stefano
From stefano.moratto at gmail.com  Tue Feb  8 17:07:36 2011
From: stefano.moratto at gmail.com (Stefano Moratto)
Date: Tue Feb  8 17:07:38 2011
Subject: [gdal-dev] RasterIO in paralel
In-Reply-To: <201102082248.03890.even.rouault@mines-paris.org>
References: <AANLkTiks2VojFOZYR70LhbcZHp9teOHmznOfvYJNUsq+@mail.gmail.com>
	<201102082248.03890.even.rouault@mines-paris.org>
Message-ID: <AANLkTikSw_+JePQRsfkDgjnbLSK-BGMKu5LT-ygn2XB9@mail.gmail.com>

Thanks for the suggestion,

I have to read png from openstreetmap. I'm trying to render an A4 paper size
sheet so I have a lot of data to move.
It may be better to divide the area to be read in blocks and to give to each
thread a block. Foreach  block a thread should read all the bands.
Probabilly I should allign the block to the tile's boundary

Stefano

-- 
Dr.Eng. Stefano Moratto
stefano.moratto@gmail.com
stefano.moratto@csiat.it
http://www.csiat.it - Traffic Optimization Software

On Tue, Feb 8, 2011 at 10:48 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le mardi 08 f?vrier 2011 22:41:50, Stefano Moratto a ?crit :
> > Hello,
> >           given an opened GDAL dataset, is it possibile to perform
> > gdalrasterio calls for each band in a dedicated thread per band in a
> > thead-safe way?
> > E.g. I have a raster image with 3 band (r,g,b). Since I have 4 core I
> would
> > like to I run a thread for a band r, one for band g and one for band g.
>
> This has been discussed recently. See
> http://lists.osgeo.org/pipermail/gdal-
> dev/2011-January/027567.html and the following messages.
>
> (I'd note that if you process a pixel interleaved image, there are
> optimizations in the GTiff driver to make the fetching of other bands
> almost
> 'free' if you read block by block, so there's probably little to gain, but
> the
> results of your experiments are welcome)
>
> >
> >
> > Regards,
> > Stefano
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110208/7dc40c63/attachment.html
From even.rouault at mines-paris.org  Tue Feb  8 17:14:16 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb  8 17:14:24 2011
Subject: [gdal-dev] RasterIO in paralel
In-Reply-To: <AANLkTikSw_+JePQRsfkDgjnbLSK-BGMKu5LT-ygn2XB9@mail.gmail.com>
References: <AANLkTiks2VojFOZYR70LhbcZHp9teOHmznOfvYJNUsq+@mail.gmail.com>
	<201102082248.03890.even.rouault@mines-paris.org>
	<AANLkTikSw_+JePQRsfkDgjnbLSK-BGMKu5LT-ygn2XB9@mail.gmail.com>
Message-ID: <201102082314.16255.even.rouault@mines-paris.org>

Le mardi 08 f?vrier 2011 23:07:36, Stefano Moratto a ?crit :
> Thanks for the suggestion,
> 
> I have to read png from openstreetmap. I'm trying to render an A4 paper
> size sheet so I have a lot of data to move.
> It may be better to divide the area to be read in blocks and to give to
> each thread a block. Foreach  block a thread should read all the bands.
> Probabilly I should allign the block to the tile's boundary

Unfortunately the PNG format is such that it is not possible to seek to an 
arbitrary line without decoding the data of all previous scanlines, so this 
approach won't work. The same would be true for JPEG or GIF. If you can fetch 
the data as TIFF, you could however try that approach.

> 
> Stefano
> 
> > Le mardi 08 f?vrier 2011 22:41:50, Stefano Moratto a ?crit :
> > > Hello,
> > > 
> > >           given an opened GDAL dataset, is it possibile to perform
> > > 
> > > gdalrasterio calls for each band in a dedicated thread per band in a
> > > thead-safe way?
> > > E.g. I have a raster image with 3 band (r,g,b). Since I have 4 core I
> > 
> > would
> > 
> > > like to I run a thread for a band r, one for band g and one for band g.
> > 
> > This has been discussed recently. See
> > http://lists.osgeo.org/pipermail/gdal-
> > dev/2011-January/027567.html and the following messages.
> > 
> > (I'd note that if you process a pixel interleaved image, there are
> > optimizations in the GTiff driver to make the fetching of other bands
> > almost
> > 'free' if you read block by block, so there's probably little to gain,
> > but the
> > results of your experiments are welcome)
> > 
> > > Regards,
> > > Stefano
From even.rouault at mines-paris.org  Tue Feb  8 17:38:41 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb  8 17:38:49 2011
Subject: [gdal-dev] RasterIO in paralel
In-Reply-To: <AANLkTinmPDSTwOTFMA3d94uvNgBZ2hCag7EL_aYsk0BN@mail.gmail.com>
References: <AANLkTiks2VojFOZYR70LhbcZHp9teOHmznOfvYJNUsq+@mail.gmail.com>
	<201102082314.16255.even.rouault@mines-paris.org>
	<AANLkTinmPDSTwOTFMA3d94uvNgBZ2hCag7EL_aYsk0BN@mail.gmail.com>
Message-ID: <201102082338.41595.even.rouault@mines-paris.org>

Le mardi 08 f?vrier 2011 23:33:39, Stefano Moratto a ?crit :
> The openstreet data is a virtual image composed by several tiles at a given
> zoom level, each tiles is a 256x256 png, so I think if a thead read a
> 256x256 block i will access only a given png.

Yes of course reading different images by different threads will work. If you 
use GDAL on Unix, be sure that it is built with the --with-threads option, 
which had to be explicitely passed before GDAL 1.8.0 and is now the default.

My previous answer only applies if you divide the reading of a single PNG 
image into several threads.

> 
> On Tue, Feb 8, 2011 at 11:14 PM, Even Rouault
> 
> <even.rouault@mines-paris.org>wrote:
> > Le mardi 08 f?vrier 2011 23:07:36, Stefano Moratto a ?crit :
> > > Thanks for the suggestion,
> > > 
> > > I have to read png from openstreetmap. I'm trying to render an A4 paper
> > > size sheet so I have a lot of data to move.
> > > It may be better to divide the area to be read in blocks and to give to
> > > each thread a block. Foreach  block a thread should read all the bands.
> > > Probabilly I should allign the block to the tile's boundary
> > 
> > Unfortunately the PNG format is such that it is not possible to seek to
> > an arbitrary line without decoding the data of all previous scanlines,
> > so this approach won't work. The same would be true for JPEG or GIF. If
> > you can fetch
> > the data as TIFF, you could however try that approach.
> > 
> > > Stefano
> > > 
> > > > Le mardi 08 f?vrier 2011 22:41:50, Stefano Moratto a ?crit :
> > > > > Hello,
> > > > > 
> > > > >           given an opened GDAL dataset, is it possibile to perform
> > > > > 
> > > > > gdalrasterio calls for each band in a dedicated thread per band in
> > > > > a thead-safe way?
> > > > > E.g. I have a raster image with 3 band (r,g,b). Since I have 4 core
> > > > > I
> > > > 
> > > > would
> > > > 
> > > > > like to I run a thread for a band r, one for band g and one for
> > > > > band
> > 
> > g.
> > 
> > > > This has been discussed recently. See
> > > > http://lists.osgeo.org/pipermail/gdal-
> > > > dev/2011-January/027567.html and the following messages.
> > > > 
> > > > (I'd note that if you process a pixel interleaved image, there are
> > > > optimizations in the GTiff driver to make the fetching of other bands
> > > > almost
> > > > 'free' if you read block by block, so there's probably little to
> > > > gain, but the
> > > > results of your experiments are welcome)
> > > > 
> > > > > Regards,
> > > > > Stefano
From fmarkham at gmail.com  Tue Feb  8 17:38:49 2011
From: fmarkham at gmail.com (Francis Markham)
Date: Tue Feb  8 17:39:12 2011
Subject: [gdal-dev] Best practices for concurrent writes with GDAL (was
	RasterIO in paralel)
Message-ID: <AANLkTikvHTBStivgdPC12KsDRCG=9_NK=FaN0uHwZEZ7@mail.gmail.com>

Is there a document anywhere specifying the best practices for parallel
writes to a GDAL raster?  I have an embarrasingly parallel problem that I
would like to parallelise with MPI, but I'm not sure what I am allowed to do
in parallel.  I would like to assign blocks exclusively to worker threads to
read and write concurrently, but I am unsure how I might do this safely.

Any suggestions would be greatly appreciated.

Kind Regards,

Francis Markham

On 9 February 2011 09:14, Even Rouault <even.rouault@mines-paris.org> wrote:

> Le mardi 08 f?vrier 2011 23:07:36, Stefano Moratto a ?crit :
> > Thanks for the suggestion,
> >
> > I have to read png from openstreetmap. I'm trying to render an A4 paper
> > size sheet so I have a lot of data to move.
> > It may be better to divide the area to be read in blocks and to give to
> > each thread a block. Foreach  block a thread should read all the bands.
> > Probabilly I should allign the block to the tile's boundary
>
> Unfortunately the PNG format is such that it is not possible to seek to an
> arbitrary line without decoding the data of all previous scanlines, so this
> approach won't work. The same would be true for JPEG or GIF. If you can
> fetch
> the data as TIFF, you could however try that approach.
>
> >
> > Stefano
> >
> > > Le mardi 08 f?vrier 2011 22:41:50, Stefano Moratto a ?crit :
> > > > Hello,
> > > >
> > > >           given an opened GDAL dataset, is it possibile to perform
> > > >
> > > > gdalrasterio calls for each band in a dedicated thread per band in a
> > > > thead-safe way?
> > > > E.g. I have a raster image with 3 band (r,g,b). Since I have 4 core I
> > >
> > > would
> > >
> > > > like to I run a thread for a band r, one for band g and one for band
> g.
> > >
> > > This has been discussed recently. See
> > > http://lists.osgeo.org/pipermail/gdal-
> > > dev/2011-January/027567.html and the following messages.
> > >
> > > (I'd note that if you process a pixel interleaved image, there are
> > > optimizations in the GTiff driver to make the fetching of other bands
> > > almost
> > > 'free' if you read block by block, so there's probably little to gain,
> > > but the
> > > results of your experiments are welcome)
> > >
> > > > Regards,
> > > > Stefano
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110209/bd467a7d/attachment.html
From even.rouault at mines-paris.org  Tue Feb  8 17:44:46 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb  8 17:44:53 2011
Subject: [gdal-dev] Best practices for concurrent writes with GDAL (was
	RasterIO in paralel)
In-Reply-To: <AANLkTikvHTBStivgdPC12KsDRCG=9_NK=FaN0uHwZEZ7@mail.gmail.com>
References: <AANLkTikvHTBStivgdPC12KsDRCG=9_NK=FaN0uHwZEZ7@mail.gmail.com>
Message-ID: <201102082344.46676.even.rouault@mines-paris.org>

Le mardi 08 f?vrier 2011 23:38:49, Francis Markham a ?crit :
> Is there a document anywhere specifying the best practices for parallel
> writes to a GDAL raster?  I have an embarrasingly parallel problem that I
> would like to parallelise with MPI, but I'm not sure what I am allowed to
> do in parallel.  I would like to assign blocks exclusively to worker
> threads to read and write concurrently, but I am unsure how I might do
> this safely.

There's 
http://trac.osgeo.org/gdal/wiki/FAQMiscellaneous#IstheGDALlibrarythread-safe 
and http://gdal.org/classGDALDataset.html#6764788806a1785c97036d1dba064497

which sums up to :
* you can generally read concurrently provided you use as many GDALDataset 
objects as you have concurrent threads
* you cannot write concurrently into the same file (and using several 
GDALDataset won't help)

> 
> Any suggestions would be greatly appreciated.
> 
> Kind Regards,
> 
> Francis Markham
> 
> On 9 February 2011 09:14, Even Rouault <even.rouault@mines-paris.org> wrote:
> > Le mardi 08 f?vrier 2011 23:07:36, Stefano Moratto a ?crit :
> > > Thanks for the suggestion,
> > > 
> > > I have to read png from openstreetmap. I'm trying to render an A4 paper
> > > size sheet so I have a lot of data to move.
> > > It may be better to divide the area to be read in blocks and to give to
> > > each thread a block. Foreach  block a thread should read all the bands.
> > > Probabilly I should allign the block to the tile's boundary
> > 
> > Unfortunately the PNG format is such that it is not possible to seek to
> > an arbitrary line without decoding the data of all previous scanlines,
> > so this approach won't work. The same would be true for JPEG or GIF. If
> > you can fetch
> > the data as TIFF, you could however try that approach.
> > 
> > > Stefano
> > > 
> > > > Le mardi 08 f?vrier 2011 22:41:50, Stefano Moratto a ?crit :
> > > > > Hello,
> > > > > 
> > > > >           given an opened GDAL dataset, is it possibile to perform
> > > > > 
> > > > > gdalrasterio calls for each band in a dedicated thread per band in
> > > > > a thead-safe way?
> > > > > E.g. I have a raster image with 3 band (r,g,b). Since I have 4 core
> > > > > I
> > > > 
> > > > would
> > > > 
> > > > > like to I run a thread for a band r, one for band g and one for
> > > > > band
> > 
> > g.
> > 
> > > > This has been discussed recently. See
> > > > http://lists.osgeo.org/pipermail/gdal-
> > > > dev/2011-January/027567.html and the following messages.
> > > > 
> > > > (I'd note that if you process a pixel interleaved image, there are
> > > > optimizations in the GTiff driver to make the fetching of other bands
> > > > almost
> > > > 'free' if you read block by block, so there's probably little to
> > > > gain, but the
> > > > results of your experiments are welcome)
> > > > 
> > > > > Regards,
> > > > > Stefano
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
From fmarkham at gmail.com  Tue Feb  8 17:58:48 2011
From: fmarkham at gmail.com (Francis Markham)
Date: Tue Feb  8 17:59:11 2011
Subject: [gdal-dev] Best practices for concurrent writes with GDAL (was
	RasterIO in paralel)
In-Reply-To: <201102082344.46676.even.rouault@mines-paris.org>
References: <AANLkTikvHTBStivgdPC12KsDRCG=9_NK=FaN0uHwZEZ7@mail.gmail.com>
	<201102082344.46676.even.rouault@mines-paris.org>
Message-ID: <AANLkTi=GZ-XLb6JKV3=qQHLPWFBbLg=+km0b74bhzR1b@mail.gmail.com>

Ouch, I guess I'll be slicing and mosaicing, sending all my data across the
network, or looking for another IO library.  Which approach would you
recommend?  Are you aware if any of the major non-GDAL libraries for popular
formats (e.g. libgeotiff) support concurrent writes?

-Francis

On 9 February 2011 09:44, Even Rouault <even.rouault@mines-paris.org> wrote:

>  * you cannot write concurrently into the same file (and using several
> GDALDataset won't help)
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110209/53eb2341/attachment.html
From warmerdam at pobox.com  Tue Feb  8 18:40:34 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb  8 18:40:37 2011
Subject: [gdal-dev] Best practices for concurrent writes with GDAL (was
	RasterIO in paralel)
In-Reply-To: <AANLkTi=GZ-XLb6JKV3=qQHLPWFBbLg=+km0b74bhzR1b@mail.gmail.com>
References: <AANLkTikvHTBStivgdPC12KsDRCG=9_NK=FaN0uHwZEZ7@mail.gmail.com>
	<201102082344.46676.even.rouault@mines-paris.org>
	<AANLkTi=GZ-XLb6JKV3=qQHLPWFBbLg=+km0b74bhzR1b@mail.gmail.com>
Message-ID: <4D51D472.8090700@pobox.com>


On 11-02-08 05:58 PM, Francis Markham wrote:
> Ouch, I guess I'll be slicing and mosaicing, sending all my data across the
> network, or looking for another IO library.  Which approach would you
> recommend?  Are you aware if any of the major non-GDAL libraries for popular
> formats (e.g. libgeotiff) support concurrent writes?
>
> -Francis

Francis,

Note that the core problem with writing relates to the shared block
cache amoung datasets, and problems with ensuring that flushes occur
in the appropriate thread.

So, with some care you could in theory write from multiple threads,
but you would need to ensure that you never fill the block cache
triggering block writes due to cache fullness.

Using Libtiff/libgeotiff directly will also avoid this problem.

Best regards,

> On 9 February 2011 09:44, Even Rouault <even.rouault@mines-paris.org
> <mailto:even.rouault@mines-paris.org>> wrote:
>
>     * you cannot write concurrently into the same file (and using several
>     GDALDataset won't help)
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fmarkham at gmail.com  Tue Feb  8 20:04:44 2011
From: fmarkham at gmail.com (Francis Markham)
Date: Tue Feb  8 20:05:06 2011
Subject: [gdal-dev] Best practices for concurrent writes with GDAL (was
	RasterIO in paralel)
In-Reply-To: <4D51D472.8090700@pobox.com>
References: <AANLkTikvHTBStivgdPC12KsDRCG=9_NK=FaN0uHwZEZ7@mail.gmail.com>
	<201102082344.46676.even.rouault@mines-paris.org>
	<AANLkTi=GZ-XLb6JKV3=qQHLPWFBbLg=+km0b74bhzR1b@mail.gmail.com>
	<4D51D472.8090700@pobox.com>
Message-ID: <AANLkTintxqT_gJDdSde+_cT=0FL8T111F7+zFjn6-8Wf@mail.gmail.com>

Is there any way to disable the block cache altogether?  Does setting the
cache size to zero work?  And is there a way to do this from a python
script?

Cheers,

Francis

On 9 February 2011 10:40, Frank Warmerdam <warmerdam@pobox.com> wrote:

> So, with some care you could in theory write from multiple threads,
> but you would need to ensure that you never fill the block cache
> triggering block writes due to cache fullness.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110209/00ff283d/attachment-0001.html
From warmerdam at pobox.com  Tue Feb  8 20:29:50 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb  8 20:29:56 2011
Subject: [gdal-dev] Best practices for concurrent writes with GDAL (was
	RasterIO in paralel)
In-Reply-To: <AANLkTintxqT_gJDdSde+_cT=0FL8T111F7+zFjn6-8Wf@mail.gmail.com>
References: <AANLkTikvHTBStivgdPC12KsDRCG=9_NK=FaN0uHwZEZ7@mail.gmail.com>
	<201102082344.46676.even.rouault@mines-paris.org>
	<AANLkTi=GZ-XLb6JKV3=qQHLPWFBbLg=+km0b74bhzR1b@mail.gmail.com>
	<4D51D472.8090700@pobox.com>
	<AANLkTintxqT_gJDdSde+_cT=0FL8T111F7+zFjn6-8Wf@mail.gmail.com>
Message-ID: <4D51EE0E.9080909@pobox.com>

On 11-02-08 08:04 PM, Francis Markham wrote:
> Is there any way to disable the block cache altogether?

Francis,

No, there is no way to disable the block cache altogether.  For
specific drivers you could skip past the block cache by calling
GDALRasterBand::WriteBlock() but this may not work well for all
drivers.

> Does setting the cache size to zero work?

In theory that might trigger an immediate flush as soon
as the block is pushed into the cache, but I wouldn't trust
it.

 > And is there a way to do this from a python script?

You can set the block cache max with gdal.SetCacheMax().  I
think the argument is a size in bytes.

GDALRasterBand::WriteBlock() is likely not accessable from
Python.

My suggestion is just to set the block cache very large, try
to only keep a few datasets open at a time, and make sure
they get closed before the block cache comes near to being
full.

But the real solution is to fix the issue in the core.
Providing some logic to ensure that blocks are only flushed
in the thread to which they belong or something like that.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Feb  8 21:31:34 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb  8 21:31:36 2011
Subject: [gdal-dev] GDALDestroyDriverManager() - dataset cleanup
Message-ID: <4D51FC86.4070806@pobox.com>

Folks,

I have modified GDALDriverManager::~GDALDriverManager() so that when
it is destroyed it will first close all still-open GDAL datasets.  A debug
message will be issued for each dataset force-closed.

This is part of an effort to ensure a clean shutdown and to make it easier
to detect memory leaks in some situations.

This is not a completely safe operation.  In particular, if there are VRT
files referencing other GDALDataset's the referenced dataset may be cleaned
up before the referencing dataset which would be bad.

I need this primarily for cleanup in MapServer where GDAL datasets are now
normally left open (CLOSE_CONNECTION=DEFER).

If this automatic dataset description causes problems we can disable or
remove it before the GDAL 1.9 release.  But it seems relatively harmless
to incorporate in trunk for the time being.

   http://trac.osgeo.org/gdal/changeset/21662

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mgleahy at alumni.uwaterloo.ca  Wed Feb  9 02:47:25 2011
From: mgleahy at alumni.uwaterloo.ca (Mike Leahy)
Date: Wed Feb  9 02:47:32 2011
Subject: [gdal-dev] Re: PHP bindings
In-Reply-To: <AANLkTimpYCBppHn7nZuPtmGxDrALjZR7Dxni8uyEDUKn@mail.gmail.com>
References: <201102061450.35281.mgleahy@alumni.uwaterloo.ca>
	<201102071857.42980.mgleahy@alumni.uwaterloo.ca>
	<AANLkTimpYCBppHn7nZuPtmGxDrALjZR7Dxni8uyEDUKn@mail.gmail.com>
Message-ID: <201102090247.26536.mgleahy@alumni.uwaterloo.ca>

Hi Tamas,

Thanks for the feedback.  I've tried what you suggested, regenerating the swig 
bindings, and setting the LD_LIBRARY_PATH...though the outcome seems to be the 
same.  Here's my output from manually building php_gdal.so, from within the 
swig/php source directory:

==============================
swig -Wall -I../include -I../include/php -I../include/php/docs  \
-I/sources/gdal/gdal-1.8.0 -c++ -php -o gdal_wrap.cpp ../include/gdal.i

../include/ColorTable.i:60: Warning(314): 'clone' is a PHP keyword, renamed as 
'c_clone'
../include/RasterAttributeTable.i:92: Warning(314): 'clone' is a PHP keyword, 
renamed as 'c_clone'
../include/gdal.i:206: Warning(453): Can't apply (Pointer NONNULL). No 
typemaps are defined.
../include/cpl.i:228: Warning(453): Can't apply (char **CSL). No typemaps are 
defined.
../include/Dataset.i:474: Warning(453): Can't apply (char **CSL). No typemaps 
are defined.
../include/Band.i:289: Warning(453): Can't apply (IF_ERROR_RETURN_NONE). No 
typemaps are defined.
../include/Band.i:303: Warning(453): Can't apply (IF_ERROR_RETURN_NONE). No 
typemaps are defined.
../include/Operations.i:229: Warning(453): Can't apply (int nList,double 
*pList). No typemaps are defined.
../include/Operations.i:360: Warning(453): Can't apply (int 
object_list_count,GDALRasterBandShadow **poObjects). No typemaps are defined.
../include/Operations.i:474: Warning(453): Can't apply (int nList,double 
*pList). No typemaps are defined.

g++ -I../../port -I../../gcore -I../../alg -I../../ogr `php-config \
--includes` -fpic -c gdal_wrap.cpp

gcc -shared gdal_wrap.o -o php_gdal.so
==============================

At this point, I've got a php_gdal.so file, which will not load in PHP.  I 
think for whatever reason, the module is not linking to the gdal core library. 
So either LD_LIBRARY_PATH has no effect, or there's something else that's being 
missed. Here's the output from ldd:

ldd php_gdal.so
        linux-vdso.so.1 =>  (0x00007fff9b985000)
        libc.so.6 => /lib/libc.so.6 (0x00007f0a329cc000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f0a32fce000)

I can successfully build /and/ load php_osr.so, but when I create an osr 
object in a sample PHP script, all of the object's methods return an integer 
zero, instead of the expected output (e.g., importing/exporting projection 
text).

There are less warnings when generating the swig bindings for osr_wrap.cpp 
(just three, similar to the 'clone' and 'CSL' related warnings above).  Also, 
when I run the g++ command above for osr, I see lots of warnings, such as:

==============================
osr_wrap.cpp: In function ?char* OGRErrMessages(int)?:
osr_wrap.cpp:1169: warning: deprecated conversion from string constant to 
?char*?
osr_wrap.cpp:1171: warning: deprecated conversion from string constant to 
?char*?
osr_wrap.cpp:1173: warning: deprecated conversion from string constant to 
?char*?

....

osr_wrap.cpp: In function ?int zm_startup_osr(int, int)?:
osr_wrap.cpp:8255: warning: deprecated conversion from string constant to 
?char*?
osr_wrap.cpp:8256: warning: deprecated conversion from string constant to 
?char*?

...
==============================

At this point, there's not much more I can do to without some guidance from 
someone with a better understanding of where things could be going wrong.  Is 
this perhaps a topic that would be better discussed with the SWIG users list?

Best regards,
Mike

On Tuesday, February 08, 2011 15:44:54 Tamas Szekeres wrote:
> Mike,
> 
> Actually the PHP bindings are not maintained at all, so any improvements in
> this topic would be welcomed. You might also want to regenerate the
> bindings with SWIG since the committed version may be outdated. You should
> also make sure the corresponding gdal core is available load (proably by
> setting LD_LIBRARY_PATH).
> 
> Best regards,
> 
> Tamas
> 
> 
> 
> 2011/2/8 Mike Leahy <mgleahy@alumni.uwaterloo.ca>
> 
> >  Hi again,
> > 
> > I recognize this perhaps isn't a popular topic. However, I thought I'd
> > give the PHP bingings a try with the latest 1.8.0 release. It's somewhat
> > promising to see that enabling the php bindings in the ./configure
> > options and compiling will succesfully produce a php_gdal.so library.
> > After finding this, I ran make install for gdal, then copied the
> > php_gdal.so to the PHP modules folder and configured PHP to load it.
> > Unfortunately, I get the following output in the Apache error logs when
> > I attempt to load the module in PHP:
> > 
> > PHP Warning: PHP Startup: Unable to load dynamic library
> > '/usr/lib/php5/20090626+lfs/php_gdal.so' -
> > /usr/lib/php5/20090626+lfs/php_gdal.so: undefined symbol:
> > CPLLoggingErrorHandler in Unknown on line 0
> > 
> > I'm not really sure where to look next. Could it be a compatibility issue
> > with PHP 5.3.3, or maybe for some reason the php module isn't able to
> > access the installed gdal libraries?
> > 
> > Any suggestions would be welcome. I'm testing this in a minimal 64-bit
> > Ubuntu 10.11 VM.
> > 
> > Regards,
> > 
> > Mike
> > 
> > On Sunday, February 06, 2011 14:50:34 Mike Leahy wrote:
> > > Hello List,
> > > 
> > > 
> > > 
> > > Does anyone have an idea if there is any likelihood for a revival of
> > > php
> > > 
> > > bindings for GDAL/OGR. I know if these were available, I'd be making
> > > use
> > > 
> > > of them...although, I have no experience creating/maintaining SWIG
> > > 
> > > libraries. So I'm curious to know what someone would need to know to
> > > get
> > > 
> > > started on this, and how big of a job would it likely be?
> > > 
> > > 
> > > 
> > > Regards,
> > > 
> > > Mike
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110209/29f056aa/attachment-0001.html
From brfr at metrico.lu  Wed Feb  9 02:54:14 2011
From: brfr at metrico.lu (Frank Broniewski)
Date: Wed Feb  9 02:53:31 2011
Subject: [gdal-dev] [python-ogr] Transform datasource problems
Message-ID: <4D524826.40206@metrico.lu>

Hello,

I have trouble transforming a datasource from one srs to another. I am 
using the python bindings and gdal 1.6.0 on Windows. Problem is, 
whatever I do to the datasource and the contained feature geometries, 
the coordinates just don't get transformed. My code, from what I've 
figured out so far:

def transform_datasource(datasource, source_epsg_id, target_epsg_id):
     source_srs = osr.SpatialReference()
     source_srs.ImportFromEPSG(source_epsg_id)
     target_srs = osr.SpatialReference()
     target_srs.ImportFromEPSG(target_epsg_id)
     transformation = osr.CoordinateTransformation(source_srs, target_srs)

     target_driver = ogr.GetDriverByName('Memory')
     target_datasource = target_driver.CreateDataSource('')

     for layer_index in xrange(datasource.GetLayerCount()):
         source_layer = datasource.GetLayer(layer_index)
         target_datasource.CopyLayer(source_layer, source_layer.GetName())
         target_layer = target_datasource.GetLayer(layer_index)
         for feature_index in xrange(source_layer.GetFeatureCount()):
             source_feature = source_layer.GetFeature(feature_index)
             target_feature = target_layer.GetFeature(feature_index)
             geometry = source_feature.GetGeometryRef()
             target_geometry = geometry.Clone()
             target_geometry.Transform(transformation)
             target_feature.SetGeometry(target_geometry)

     return target_datasource


My testing setup: Load a Shapefile, transform it from epsg 31466 to 4326 
and save as GeoJSON. Saving as GeoJSON works, but not the transformation:
     shp_path = 'xyz.shp'
     shp_driver = driver_by_name('ESRI Shapefile')
     shp_datasource = open_datasource(shp_driver, shp_path, False)

     path1 = '%s.geojson' % ''.join(random.choice(string.ascii_letters) 
for i in xrange(7))

     # see function above
     transformed = transform_datasource(shp_datasource, 31466, 4326)
     geojson_datasource = convert_datasource(transformed, 'GeoJSON', path1)
     transformed.Release()
     geojson_datasource.Release()

Many thanks for tipps, why nothing happens when transforming. I looked 
already at the python version of ogr2ogr, but I don't understand well 
what's going on in there ...

Frank



-- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
From stefano.moratto at gmail.com  Wed Feb  9 03:33:41 2011
From: stefano.moratto at gmail.com (Stefano Moratto)
Date: Wed Feb  9 03:33:44 2011
Subject: [gdal-dev] RasterIO in paralel
In-Reply-To: <201102082338.41595.even.rouault@mines-paris.org>
References: <AANLkTiks2VojFOZYR70LhbcZHp9teOHmznOfvYJNUsq+@mail.gmail.com>
	<201102082314.16255.even.rouault@mines-paris.org>
	<AANLkTinmPDSTwOTFMA3d94uvNgBZ2hCag7EL_aYsk0BN@mail.gmail.com>
	<201102082338.41595.even.rouault@mines-paris.org>
Message-ID: <AANLkTinqD8nqy4Ncjo8xqES9H1sybUR8Qp-+6cv10qjP@mail.gmail.com>

Thanks for the suggestion but I'm developing a Win32 app.
I will take in consideration your previous answer because the app can read
images from other sources.

Regards,
Stefano

-- 
Dr.Eng. Stefano Moratto
stefano.moratto@gmail.com
stefano.moratto@csiat.it
http://www.csiat.it - Traffic Optimization Software

On Tue, Feb 8, 2011 at 11:38 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le mardi 08 f?vrier 2011 23:33:39, Stefano Moratto a ?crit :
> > The openstreet data is a virtual image composed by several tiles at a
> given
> > zoom level, each tiles is a 256x256 png, so I think if a thead read a
> > 256x256 block i will access only a given png.
>
> Yes of course reading different images by different threads will work. If
> you
> use GDAL on Unix, be sure that it is built with the --with-threads option,
> which had to be explicitely passed before GDAL 1.8.0 and is now the
> default.
>
> My previous answer only applies if you divide the reading of a single PNG
> image into several threads.
>
> >
> > On Tue, Feb 8, 2011 at 11:14 PM, Even Rouault
> >
> > <even.rouault@mines-paris.org>wrote:
> > > Le mardi 08 f?vrier 2011 23:07:36, Stefano Moratto a ?crit :
> > > > Thanks for the suggestion,
> > > >
> > > > I have to read png from openstreetmap. I'm trying to render an A4
> paper
> > > > size sheet so I have a lot of data to move.
> > > > It may be better to divide the area to be read in blocks and to give
> to
> > > > each thread a block. Foreach  block a thread should read all the
> bands.
> > > > Probabilly I should allign the block to the tile's boundary
> > >
> > > Unfortunately the PNG format is such that it is not possible to seek to
> > > an arbitrary line without decoding the data of all previous scanlines,
> > > so this approach won't work. The same would be true for JPEG or GIF. If
> > > you can fetch
> > > the data as TIFF, you could however try that approach.
> > >
> > > > Stefano
> > > >
> > > > > Le mardi 08 f?vrier 2011 22:41:50, Stefano Moratto a ?crit :
> > > > > > Hello,
> > > > > >
> > > > > >           given an opened GDAL dataset, is it possibile to
> perform
> > > > > >
> > > > > > gdalrasterio calls for each band in a dedicated thread per band
> in
> > > > > > a thead-safe way?
> > > > > > E.g. I have a raster image with 3 band (r,g,b). Since I have 4
> core
> > > > > > I
> > > > >
> > > > > would
> > > > >
> > > > > > like to I run a thread for a band r, one for band g and one for
> > > > > > band
> > >
> > > g.
> > >
> > > > > This has been discussed recently. See
> > > > > http://lists.osgeo.org/pipermail/gdal-
> > > > > dev/2011-January/027567.html and the following messages.
> > > > >
> > > > > (I'd note that if you process a pixel interleaved image, there are
> > > > > optimizations in the GTiff driver to make the fetching of other
> bands
> > > > > almost
> > > > > 'free' if you read block by block, so there's probably little to
> > > > > gain, but the
> > > > > results of your experiments are welcome)
> > > > >
> > > > > > Regards,
> > > > > > Stefano
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110209/ad3e10dc/attachment.html
From antonio.valentino at tiscali.it  Wed Feb  9 03:59:02 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Wed Feb  9 03:59:06 2011
Subject: [gdal-dev] Best practices for concurrent writes with GDAL (was
	RasterIO in paralel)
In-Reply-To: <AANLkTikvHTBStivgdPC12KsDRCG=9_NK=FaN0uHwZEZ7@mail.gmail.com>
References: <AANLkTikvHTBStivgdPC12KsDRCG=9_NK=FaN0uHwZEZ7@mail.gmail.com>
Message-ID: <20110209095902.01e608cc@asigrid01>

Hi Francis,

Il giorno Wed, 9 Feb 2011 09:38:49 +1100
Francis Markham <fmarkham@gmail.com> ha scritto:

> Is there a document anywhere specifying the best practices for
> parallel writes to a GDAL raster?  I have an embarrasingly parallel
> problem that I would like to parallelise with MPI, but I'm not sure
> what I am allowed to do in parallel.  I would like to assign blocks
> exclusively to worker threads to read and write concurrently, but I
> am unsure how I might do this safely.
> 
> Any suggestions would be greatly appreciated.

Are you sure it is the best way to parallelize your problem?
If you write tho the disk operation are in some way serialized.
It is a common schema to have several worker processes/thread for CPU
bound computations and a single IO processes/thread that collects all
results and write them to disk.

The IO process/thread int this case can also be designed to implement
some optimization or caching mechanism that you could not apply at
worker process level.

With this schema you can bypass completely the problem of concurrent
writes without loss of performance IMHO.


regards

-- 
Antonio Valentino
From brfr at metrico.lu  Wed Feb  9 09:19:52 2011
From: brfr at metrico.lu (Frank Broniewski)
Date: Wed Feb  9 09:19:07 2011
Subject: [gdal-dev] [python-ogr] GetNumPoints from geometry
Message-ID: <4D52A288.5040301@metrico.lu>

Hi,

just a quick question: isn't GetNumPoints implemented on a geometry in 
ogr python? Neither GetNumPoints() nor getNumPoints() (small g) work.
The passed in geometry is a geometry object from a

geometry = feature.GetGeometryRef()

call and the geometry is of type 'LINESTRING' taken from

geometry.GetGeometryName() ...


code:
def line_nodes(geometry):
     nodes = list()

     for point_index in xrange(geometry.GetNumPoints()):
         ogr_point = ogr.OGRPoint()
         point = geometry.GetPoint(point_index, ogr_point)
         dimenion = point.GetCoordinateDimension()
         if dimension == 3:
             list.append(point_index, point.GetX(), point.GetY(), 
point.GetZ())
         else:
             list.append(point_index, point.GetX(), point.GetY())

     return nodes


raises an AttributeError
...
     for point_index in xrange(geometry.getNumPoints()):
   File "C:\Python26\lib\site-packages\osgeo\ogr.py", line 2672, in <lambda>
     __getattr__ = lambda self, name: _swig_getattr(self, Geometry, name)
   File "C:\Python26\lib\site-packages\osgeo\ogr.py", line 34, in 
_swig_getattr
     raise AttributeError,name
AttributeError: GetNumPoints


Many thanks

Frank

-- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
From ari.jolma at gmail.com  Wed Feb  9 09:44:47 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Feb  9 09:44:51 2011
Subject: [gdal-dev] [python-ogr] GetNumPoints from geometry
In-Reply-To: <4D52A288.5040301@metrico.lu>
References: <4D52A288.5040301@metrico.lu>
Message-ID: <4D52A85F.6070508@gmail.com>

On 02/09/2011 04:19 PM, Frank Broniewski wrote:
> Hi,
>
> just a quick question: isn't GetNumPoints implemented on a geometry in 
> ogr python? 

There are OGR_G_GetPointCount in ogr_api.h and GetPointCount method in 
the Geometry class in Swig bindings.

Hm. It seems that NumPoints is the name of the method in the OGC simple 
features standard (it is defined for LineStrings).

Ari

> Neither GetNumPoints() nor getNumPoints() (small g) work.
> The passed in geometry is a geometry object from a
>
> geometry = feature.GetGeometryRef()
>
> call and the geometry is of type 'LINESTRING' taken from
>
> geometry.GetGeometryName() ...
>
>
> code:
> def line_nodes(geometry):
>     nodes = list()
>
>     for point_index in xrange(geometry.GetNumPoints()):
>         ogr_point = ogr.OGRPoint()
>         point = geometry.GetPoint(point_index, ogr_point)
>         dimenion = point.GetCoordinateDimension()
>         if dimension == 3:
>             list.append(point_index, point.GetX(), point.GetY(), 
> point.GetZ())
>         else:
>             list.append(point_index, point.GetX(), point.GetY())
>
>     return nodes
>
>
> raises an AttributeError
> ...
>     for point_index in xrange(geometry.getNumPoints()):
>   File "C:\Python26\lib\site-packages\osgeo\ogr.py", line 2672, in 
> <lambda>
>     __getattr__ = lambda self, name: _swig_getattr(self, Geometry, name)
>   File "C:\Python26\lib\site-packages\osgeo\ogr.py", line 34, in 
> _swig_getattr
>     raise AttributeError,name
> AttributeError: GetNumPoints
>
>
> Many thanks
>
> Frank
>

From pcorti at gmail.com  Wed Feb  9 09:55:27 2011
From: pcorti at gmail.com (Paolo Corti)
Date: Wed Feb  9 09:56:09 2011
Subject: [gdal-dev] [python-ogr] GetNumPoints from geometry
In-Reply-To: <4D52A85F.6070508@gmail.com>
References: <4D52A288.5040301@metrico.lu> <4D52A85F.6070508@gmail.com>
Message-ID: <AANLkTi=bnKiskZXj8V_DsSwDp7yF8480xFntfC7eas5g@mail.gmail.com>

>
> There are OGR_G_GetPointCount in ogr_api.h and GetPointCount method in the
> Geometry class in Swig bindings.
>

Right, I was also trying to figure out this, this is my test code:

lineshp = driver.Open('/home/pcorti/data/shapefile/line.shp')
linelyr = lineshp.GetLayer(0)
feat = linelyr.GetNextFeature()
geom = feat.GetGeometryRef()
print geom.GetGeometryName()
LINESTRING
print geom.GetPointCount()
8

This is also suggested on the doc [0]

best regards
P

[0] http://www.gdal.org/ogr/classOGRLineString.html#7ea70605cd6ac71221177586c2ec5cfc

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @paolo_corti
From sebastien.favre at infoterra.fr  Wed Feb  9 10:27:46 2011
From: sebastien.favre at infoterra.fr (sebastien.favre@infoterra.fr)
Date: Wed Feb  9 10:28:55 2011
Subject: [gdal-dev] libKML driver missing
Message-ID: <OFA3B8AC00.D4EE3247-ONC1257832.0054B4D8-C1257832.0054F09D@istar.fr>

Skipped content of type multipart/alternative-------------- next part --------------

Ce courrier ?lectronique et toutes les pi?ces ?ventuellement jointes qu?il contient sont CONFIDENTIELS et destin?s exclusivement ? l?usage de leur destinataire. Si une erreur de transmission ou une adresse erron?e a mal dirig?e ce courrier, merci d?en informer l?exp?diteur en lui faisant une r?ponse par courrier ?lectronique d?s r?ception. Si vous n??tes pas le destinataire de ce courrier, vous ne devez pas l?utiliser, le conserver, en faire ?tat, le distribuer, le copier, l?imprimer ou en r?v?ler le contenu ? une tierce partie.
Ce courrier ?lectronique est ? usage strictement informatif et ne saurait engager de quelque mani?re que ce soit SPOT IMAGE SA, ni ses filiales.

This e-mail and any attachments hereto are CONFIDENTIAL and intended solely for the use of the addressee. If you have received this e-mail in error please send it back to the person that sent it to you.
If you have received it in error, please notify the sender by return email. If you are not the addressee of this email, you must not use, keep, disseminate, copy, print or otherwise deal with it.
This email is for information only and will not bind SPOT IMAGE SA in any contract or obligation, nor its subsidiaries.
From brfr at metrico.lu  Wed Feb  9 10:36:51 2011
From: brfr at metrico.lu (Frank Broniewski)
Date: Wed Feb  9 10:36:06 2011
Subject: [gdal-dev] [python-ogr] GetNumPoints from geometry
In-Reply-To: <4D52A85F.6070508@gmail.com>
References: <4D52A288.5040301@metrico.lu> <4D52A85F.6070508@gmail.com>
Message-ID: <4D52B493.2020608@metrico.lu>

Yes, thank you. GetPointCount() works. Another thing I noticed:

point = geometry.GetPoint(point_index)

point is of type tuple(x, y, z), not as one would guess an OGRPoint() 
geometry. At least for me this was unexpected. And the python GetPoint 
method does not take a OGRPoint geometry, like it is mentioned here [1]

Frank


[1] 
http://www.gdal.org/ogr/classOGRLineString.html#ab63760022e49a795477f2fd31da059f

Am 09.02.2011 15:44, schrieb Ari Jolma:
> On 02/09/2011 04:19 PM, Frank Broniewski wrote:
>> Hi,
>>
>> just a quick question: isn't GetNumPoints implemented on a geometry in
>> ogr python?
>
> There are OGR_G_GetPointCount in ogr_api.h and GetPointCount method in
> the Geometry class in Swig bindings.
>
> Hm. It seems that NumPoints is the name of the method in the OGC simple
> features standard (it is defined for LineStrings).
>
> Ari
>
>> Neither GetNumPoints() nor getNumPoints() (small g) work.
>> The passed in geometry is a geometry object from a
>>
>> geometry = feature.GetGeometryRef()
>>
>> call and the geometry is of type 'LINESTRING' taken from
>>
>> geometry.GetGeometryName() ...
>>
>>
>> code:
>> def line_nodes(geometry):
>> nodes = list()
>>
>> for point_index in xrange(geometry.GetNumPoints()):
>> ogr_point = ogr.OGRPoint()
>> point = geometry.GetPoint(point_index, ogr_point)
>> dimenion = point.GetCoordinateDimension()
>> if dimension == 3:
>> list.append(point_index, point.GetX(), point.GetY(), point.GetZ())
>> else:
>> list.append(point_index, point.GetX(), point.GetY())
>>
>> return nodes
>>
>>
>> raises an AttributeError
>> ...
>> for point_index in xrange(geometry.getNumPoints()):
>> File "C:\Python26\lib\site-packages\osgeo\ogr.py", line 2672, in <lambda>
>> __getattr__ = lambda self, name: _swig_getattr(self, Geometry, name)
>> File "C:\Python26\lib\site-packages\osgeo\ogr.py", line 34, in
>> _swig_getattr
>> raise AttributeError,name
>> AttributeError: GetNumPoints
>>
>>
>> Many thanks
>>
>> Frank
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
From warmerdam at pobox.com  Wed Feb  9 10:52:29 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb  9 10:52:32 2011
Subject: [gdal-dev] libKML driver missing
In-Reply-To: <OFA3B8AC00.D4EE3247-ONC1257832.0054B4D8-C1257832.0054F09D@istar.fr>
References: <OFA3B8AC00.D4EE3247-ONC1257832.0054B4D8-C1257832.0054F09D@istar.fr>
Message-ID: <4D52B83D.3030105@pobox.com>

On 11-02-09 10:27 AM, sebastien.favre@infoterra.fr wrote:
>
> Hello,
>
> I have installed ms4w package which involves GDAL/OGR 1.8.
> Unfortunately, libKML announced as a new driver is missing.
> Do you have any explanation ?
> Thank you.

S?bastien,

There is information on how to build GDAL with libkml support at:

   http://trac.osgeo.org/gdal/wiki/LibKML

Not surprisingly the libkml driver support requires special build time
steps to utilize the library.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From piva at meeo.it  Wed Feb  9 11:23:22 2011
From: piva at meeo.it (Giacomo Piva)
Date: Wed Feb  9 11:23:23 2011
Subject: [gdal-dev] Help with import gdal import in python
Message-ID: <4D52BF7A.3090009@meeo.it>

Hi all,

I'm getting this error when calling gdal_merge.py command.

Traceback (most recent call last):
   File "/home/meeo/bin/gdal_merge.py", line 31, in ?
     import gdal
   File "/usr/lib/python2.4/gdal.py", line 7, in ?
     import _gdal
ImportError: No module named _gdal

I don't know python 'cause I don't know how to solve this problem.
Any suggestion?

Thanks to all

-- 
G

From warmerdam at pobox.com  Wed Feb  9 11:40:38 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb  9 11:40:41 2011
Subject: [gdal-dev] Help with import gdal import in python
In-Reply-To: <4D52BF7A.3090009@meeo.it>
References: <4D52BF7A.3090009@meeo.it>
Message-ID: <4D52C386.5090402@pobox.com>

On 11-02-09 11:23 AM, Giacomo Piva wrote:
> Hi all,
>
> I'm getting this error when calling gdal_merge.py command.
>
> Traceback (most recent call last):
> File "/home/meeo/bin/gdal_merge.py", line 31, in ?
> import gdal
> File "/usr/lib/python2.4/gdal.py", line 7, in ?
> import _gdal
> ImportError: No module named _gdal
>
> I don't know python 'cause I don't know how to solve this problem.
> Any suggestion?

Giacomo,

With all due respect you haven't given much context.   Did you build
and install GDAL and the python bindings yourself?

I imagine the problem is related either to the _gdal.so file not being
found, or it not loading because the underlying libgdal.so.* file not
being found.  Does _gdal.so exist in:

   /usr/lib/python2.4/osgeo

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From yassefa at dmsolutions.ca  Wed Feb  9 12:01:38 2011
From: yassefa at dmsolutions.ca (Yewondwossen Assefa)
Date: Wed Feb  9 12:11:33 2011
Subject: [gdal-dev] libKML driver missing
In-Reply-To: <OFA3B8AC00.D4EE3247-ONC1257832.0054B4D8-C1257832.0054F09D@istar.fr>
References: <OFA3B8AC00.D4EE3247-ONC1257832.0054B4D8-C1257832.0054F09D@istar.fr>
Message-ID: <4D52C872.3030803@dmsolutions.ca>

CCing the ms4w list.

There is currently a bug on that [1].
I believe these type of request get  addressed for  upcoming releases.
You can also get in touch with the MS4W maintainers to find ways to get 
this done earlier.

[1]: http://bugzilla.maptools.org/show_bug.cgi?id=2294

best regards,

On 09/02/2011 10:27 AM, sebastien.favre@infoterra.fr wrote:
>
> Hello,
>
> I have installed ms4w package which involves GDAL/OGR 1.8.
> Unfortunately, libKML announced as a new driver is missing.
> Do you have any explanation ?
> Thank you.
>
> S?bastien FAVRE
>
>
>
> Ce courrier ?lectronique et toutes les pi?ces ?ventuellement jointes qu'il contient sont CONFIDENTIELS et destin?s exclusivement ? l'usage de leur destinataire. Si une erreur de transmission ou une adresse erron?e a mal dirig?e ce courrier, merci d'en informer l'exp?diteur en lui faisant une r?ponse par courrier ?lectronique d?s r?ception. Si vous n'?tes pas le destinataire de ce courrier, vous ne devez pas l'utiliser, le conserver, en faire ?tat, le distribuer, le copier, l'imprimer ou en r?v?ler le contenu ? une tierce partie.
> Ce courrier ?lectronique est ? usage strictement informatif et ne saurait engager de quelque mani?re que ce soit SPOT IMAGE SA, ni ses filiales.
>
> This e-mail and any attachments hereto are CONFIDENTIAL and intended solely for the use of the addressee. If you have received this e-mail in error please send it back to the person that sent it to you.
> If you have received it in error, please notify the sender by return email. If you are not the addressee of this email, you must not use, keep, disseminate, copy, print or otherwise deal with it.
> This email is for information only and will not bind SPOT IMAGE SA in any contract or obligation, nor its subsidiaries.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
----------------------------------------------------------------
Assefa Yewondwossen
Software Analyst

Email: yassefa@dmsolutions.ca
http://www.dmsolutions.ca/

Phone: (613) 565-5056 (ext 14)
Fax:   (613) 565-0925
----------------------------------------------------------------


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110209/b353eba3/attachment.html
From ari.jolma at gmail.com  Wed Feb  9 12:15:27 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Feb  9 12:15:32 2011
Subject: [gdal-dev] [python-ogr] GetNumPoints from geometry
In-Reply-To: <4D52B493.2020608@metrico.lu>
References: <4D52A288.5040301@metrico.lu> <4D52A85F.6070508@gmail.com>
	<4D52B493.2020608@metrico.lu>
Message-ID: <4D52CBAF.9060308@gmail.com>

On 02/09/2011 05:36 PM, Frank Broniewski wrote:
> Yes, thank you. GetPointCount() works. Another thing I noticed:
>
> point = geometry.GetPoint(point_index)
>
> point is of type tuple(x, y, z), not as one would guess an OGRPoint() 
> geometry. At least for me this was unexpected. And the python GetPoint 
> method does not take a OGRPoint geometry, like it is mentioned here [1]

The OGC name of GetPoint is PointN and it should return a Point object 
according to the standard.

The GDAL Perl (which I care for) works the same way, GetPoint returns a 
list of coordinates. It would be possible to make it return a geometry 
object in scalar context, but I'm not sure if Python has that possibility.

The GDAL Perl documentation for Geometry object is at 
http://geoinformatics.tkk.fi/doc/Geo-GDAL/html/class_geo_1_1_o_g_r_1_1_geometry.html 
I'm not aware of GDAL Python documentation in the web. There are 
differences between GDAL C++ API and GDAL C API. For the bindings the C 
API documentation is usually better: 
http://www.gdal.org/ogr/ogr__api_8h.html#67b897ffcd88a83832964c3735fa1dcb

Best regards,

Ari

>
> Frank
>
>
> [1] 
> http://www.gdal.org/ogr/classOGRLineString.html#ab63760022e49a795477f2fd31da059f
>
> Am 09.02.2011 15:44, schrieb Ari Jolma:
>> On 02/09/2011 04:19 PM, Frank Broniewski wrote:
>>> Hi,
>>>
>>> just a quick question: isn't GetNumPoints implemented on a geometry in
>>> ogr python?
>>
>> There are OGR_G_GetPointCount in ogr_api.h and GetPointCount method in
>> the Geometry class in Swig bindings.
>>
>> Hm. It seems that NumPoints is the name of the method in the OGC simple
>> features standard (it is defined for LineStrings).
>>
>> Ari
>>
>>> Neither GetNumPoints() nor getNumPoints() (small g) work.
>>> The passed in geometry is a geometry object from a
>>>
>>> geometry = feature.GetGeometryRef()
>>>
>>> call and the geometry is of type 'LINESTRING' taken from
>>>
>>> geometry.GetGeometryName() ...
>>>
>>>
>>> code:
>>> def line_nodes(geometry):
>>> nodes = list()
>>>
>>> for point_index in xrange(geometry.GetNumPoints()):
>>> ogr_point = ogr.OGRPoint()
>>> point = geometry.GetPoint(point_index, ogr_point)
>>> dimenion = point.GetCoordinateDimension()
>>> if dimension == 3:
>>> list.append(point_index, point.GetX(), point.GetY(), point.GetZ())
>>> else:
>>> list.append(point_index, point.GetX(), point.GetY())
>>>
>>> return nodes
>>>
>>>
>>> raises an AttributeError
>>> ...
>>> for point_index in xrange(geometry.getNumPoints()):
>>> File "C:\Python26\lib\site-packages\osgeo\ogr.py", line 2672, in 
>>> <lambda>
>>> __getattr__ = lambda self, name: _swig_getattr(self, Geometry, name)
>>> File "C:\Python26\lib\site-packages\osgeo\ogr.py", line 34, in
>>> _swig_getattr
>>> raise AttributeError,name
>>> AttributeError: GetNumPoints
>>>
>>>
>>> Many thanks
>>>
>>> Frank
>>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>

From jmckenna at gatewaygeomatics.com  Wed Feb  9 12:43:36 2011
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed Feb  9 12:43:39 2011
Subject: [gdal-dev] libKML driver missing
In-Reply-To: <OFA3B8AC00.D4EE3247-ONC1257832.0054B4D8-C1257832.0054F09D@istar.fr>
References: <OFA3B8AC00.D4EE3247-ONC1257832.0054B4D8-C1257832.0054F09D@istar.fr>
Message-ID: <4D52D248.8070602@gatewaygeomatics.com>

On 11-02-09 11:27 AM, sebastien.favre@infoterra.fr wrote:
>
> Hello,
>
> I have installed ms4w package which involves GDAL/OGR 1.8.
> Unfortunately, libKML announced as a new driver is missing.
> Do you have any explanation ?
> Thank you.
>
> S?bastien FAVRE

Thank you to both Assefa and Frank for answering this.  The change that 
Assefa noted will be available in the next MS4W release; if you require 
this sooner, or you would like to support the development of MS4W, 
please contact me directly.

In the future if you have any questions related to MS4W please be sure 
to join its mailing list (subscribe at 
http://lists.maptools.org/mailman/listinfo/ms4w-users); that way I won't 
miss emails like this that you send to other mailing lists.

Thanks.

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/


From even.rouault at mines-paris.org  Wed Feb  9 14:14:55 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb  9 14:14:55 2011
Subject: [gdal-dev] Re: PHP bindings
In-Reply-To: <201102090247.26536.mgleahy@alumni.uwaterloo.ca>
References: <201102061450.35281.mgleahy@alumni.uwaterloo.ca>
	<AANLkTimpYCBppHn7nZuPtmGxDrALjZR7Dxni8uyEDUKn@mail.gmail.com>
	<201102090247.26536.mgleahy@alumni.uwaterloo.ca>
Message-ID: <201102092014.55349.even.rouault@mines-paris.org>

Le mercredi 09 f?vrier 2011 08:47:25, Mike Leahy a ?crit :
> Hi Tamas,
> 
> Thanks for the feedback.  I've tried what you suggested, regenerating the
> swig bindings, and setting the LD_LIBRARY_PATH...though the outcome seems
> to be the same.  Here's my output from manually building php_gdal.so, from
> within the swig/php source directory:
> 
> ==============================
> swig -Wall -I../include -I../include/php -I../include/php/docs  \
> -I/sources/gdal/gdal-1.8.0 -c++ -php -o gdal_wrap.cpp ../include/gdal.i
> 
> ../include/ColorTable.i:60: Warning(314): 'clone' is a PHP keyword, renamed
> as 'c_clone'
> ../include/RasterAttributeTable.i:92: Warning(314): 'clone' is a PHP
> keyword, renamed as 'c_clone'
> ../include/gdal.i:206: Warning(453): Can't apply (Pointer NONNULL). No
> typemaps are defined.
> ../include/cpl.i:228: Warning(453): Can't apply (char **CSL). No typemaps
> are defined.
> ../include/Dataset.i:474: Warning(453): Can't apply (char **CSL). No
> typemaps are defined.
> ../include/Band.i:289: Warning(453): Can't apply (IF_ERROR_RETURN_NONE). No
> typemaps are defined.
> ../include/Band.i:303: Warning(453): Can't apply (IF_ERROR_RETURN_NONE). No
> typemaps are defined.
> ../include/Operations.i:229: Warning(453): Can't apply (int nList,double
> *pList). No typemaps are defined.
> ../include/Operations.i:360: Warning(453): Can't apply (int
> object_list_count,GDALRasterBandShadow **poObjects). No typemaps are
> defined. ../include/Operations.i:474: Warning(453): Can't apply (int
> nList,double *pList). No typemaps are defined.
> 
> g++ -I../../port -I../../gcore -I../../alg -I../../ogr `php-config \
> --includes` -fpic -c gdal_wrap.cpp
> 
> gcc -shared gdal_wrap.o -o php_gdal.so
> ==============================
> 
> At this point, I've got a php_gdal.so file, which will not load in PHP.  I
> think for whatever reason, the module is not linking to the gdal core
> library. So either LD_LIBRARY_PATH has no effect, or there's something
> else that's being missed. Here's the output from ldd:
> 
> ldd php_gdal.so
>         linux-vdso.so.1 =>  (0x00007fff9b985000)
>         libc.so.6 => /lib/libc.so.6 (0x00007f0a329cc000)
>         /lib64/ld-linux-x86-64.so.2 (0x00007f0a32fce000)

Perhaps you must explicitely link php_gdal.so with libgdal.so ? Otherwise I do 
not see how PHP could figure out that it must load it... So editing the 
GNUmakefile to add -L../.. -lgdal might - perhaps - help.

For reference, here's what you can find in the swig/java/GNUmakefile :
$(JAVA_MODULES): lib%jni.$(SO_EXT): %_wrap.$(OBJ_EXT)
	$(LINK) $(LDFLAGS) $(CONFIG_LIBS) $< -o $@ $(LINK_EXTRAFLAGS)

Disclaimer: I do not know anything about PHP, so I'm likely to say unrelevant 
things :-)

> 
> I can successfully build /and/ load php_osr.so,

Hum, strange, I don't understand why php_osr would behave differently from 
php_gdal or php_osr

> but when I create an osr
> object in a sample PHP script, all of the object's methods return an
> integer zero, instead of the expected output (e.g., importing/exporting
> projection text).

Well, not necessarily an error. The return code from most Import/Export method 
is an integer/enum and 0 is the "no error value" (OGRERR_NONE)

> 
> There are less warnings when generating the swig bindings for osr_wrap.cpp
> (just three, similar to the 'clone' and 'CSL' related warnings above). 
> Also, when I run the g++ command above for osr, I see lots of warnings,
> such as:
> 
> ==============================
> osr_wrap.cpp: In function ?char* OGRErrMessages(int)?:
> osr_wrap.cpp:1169: warning: deprecated conversion from string constant to
> ?char*?
> osr_wrap.cpp:1171: warning: deprecated conversion from string constant to
> ?char*?
> osr_wrap.cpp:1173: warning: deprecated conversion from string constant to
> ?char*?
> 
> ....
> 
> osr_wrap.cpp: In function ?int zm_startup_osr(int, int)?:
> osr_wrap.cpp:8255: warning: deprecated conversion from string constant to
> ?char*?
> osr_wrap.cpp:8256: warning: deprecated conversion from string constant to
> ?char*?
> 
> ...
> ==============================
> 
> At this point, there's not much more I can do to without some guidance from
> someone with a better understanding of where things could be going wrong. 
> Is this perhaps a topic that would be better discussed with the SWIG users
> list?

Perhaps. You need to get accustomed to how SWIG works certainly. The SWIG 
documentation can help a bit, but most of the learning comes from the hours of 
pain you will endure practicing :-) (speaking of my experience with Java and 
Python bindings).

The 'deprecated conversion from string constant to' warnings do not sound 
critical. At least, I wouldn't start by fixing those ones. The priority is to 
implement the missing typemaps that swig warns about. You can have a look at 
swig/include/README.typemaps. If you have experience with one of the other 
bindings languages (CSharp, Java, Perl or Python), you might also take some 
inspiration on what they do.
You will need to edit the files in swig/include/php ...

Best regards,

Even
From even.rouault at mines-paris.org  Wed Feb  9 14:24:34 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb  9 14:24:34 2011
Subject: [gdal-dev] [python-ogr] Transform datasource problems
In-Reply-To: <4D524826.40206@metrico.lu>
References: <4D524826.40206@metrico.lu>
Message-ID: <201102092024.34122.even.rouault@mines-paris.org>

Several points :

1) The implementation of Layer.GetFeature() is only efficient for just a few 
drivers (shapefile). Other drivers will need to sequentially read from the first 
feature ... So use GetNextFeature()

2) The real bug is that you don't rewrite the feature to its layer. So you 
need to add a target_layer.SetFeature(target_feature)

3) But what you are doing is really what ogr2ogr.py does, although your 
approach will be less efficient as you first copy the layer and then rewrite each 
of its feature.

For best performance, you should rather :
a) create a target layer from scratch
b) copy the feature definition from the source layer to the target layer
c) iterate over the source features, for each source feature, create a target 
feature (Feature.SetFrom(other_feature)). reproject the geometry, assign it to 
the target feature, and Layer.CreateFeature(target_feature)

Basically a stripped version of ogr2ogr.py
From even.rouault at mines-paris.org  Wed Feb  9 14:29:19 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb  9 14:29:19 2011
Subject: [gdal-dev] Best practices for concurrent writes with GDAL (was
	RasterIO in paralel)
In-Reply-To: <20110209095902.01e608cc@asigrid01>
References: <AANLkTikvHTBStivgdPC12KsDRCG=9_NK=FaN0uHwZEZ7@mail.gmail.com>
	<20110209095902.01e608cc@asigrid01>
Message-ID: <201102092029.19230.even.rouault@mines-paris.org>

Le mercredi 09 f?vrier 2011 09:59:02, Antonio Valentino a ?crit :
> Hi Francis,
> 
> Il giorno Wed, 9 Feb 2011 09:38:49 +1100
> 
> Francis Markham <fmarkham@gmail.com> ha scritto:
> > Is there a document anywhere specifying the best practices for
> > parallel writes to a GDAL raster?  I have an embarrasingly parallel
> > problem that I would like to parallelise with MPI, but I'm not sure
> > what I am allowed to do in parallel.  I would like to assign blocks
> > exclusively to worker threads to read and write concurrently, but I
> > am unsure how I might do this safely.
> > 
> > Any suggestions would be greatly appreciated.
> 
> Are you sure it is the best way to parallelize your problem?
> If you write tho the disk operation are in some way serialized.
> It is a common schema to have several worker processes/thread for CPU
> bound computations and a single IO processes/thread that collects all
> results and write them to disk.
> 
> The IO process/thread int this case can also be designed to implement
> some optimization or caching mechanism that you could not apply at
> worker process level.
> 
> With this schema you can bypass completely the problem of concurrent
> writes without loss of performance IMHO.

Yes I completely agree with the approach you suggest. Genuine concurrent 
writing is likely not possible on the whole chain and will result in queing at 
some point, for example at the OS level. (Unless you use some RAID, in which 
case if the file is spread over multiple disks, it is perhaps possible to have 
genuinge parallel writing of blocks of data of the same file.)

Nevertheless on GDAL side, you cannot safely use the WriteBlock() interface on 
the same RasterBand object from different threads. For example, in the GeoTIFF 
driver, for pixel-interleaved images, there is an optimization that doesn't 
flush immediately the block to libtiff until another block is read/written. This 
optimization is made so that, for a  pixel-interleaved RGB image, you can fill 
the R,G and B components of a of a block into memory without having to flush it 
to disk at each time. The GTIFFDataset object has thus state variables to 
maintain the current dirty block number and the associated buffer. If you try 
to write from different threads, they will overwrite this dirty block number 
and buffer, leading to chaos. I'd note that inside libtiff itself, there are 
state variables too, mainly when compression codecs are involved (but possibly 
also in the uncompressed case. I haven't checked). So if you want to use the 
WriteBlock() interface, you have to a full code inspection of the driver code 
to determine if it is safe to do so. And I'm afraid that the most popular 
drivers aren't.

If you use the RasterIO() interface, you might encounter the issue that Frank 
described about the flushes occuring potentially into a unappropriate thread. I 
have identified in the past also a few potential race conditions. See 
http://trac.osgeo.org/gdal/ticket/3225 and 
http://trac.osgeo.org/gdal/ticket/3226. That last one is probably the 
situation that Frank described. I'm not sure how/if it can be solved by 
identifying an "appropriate" thread. This supposes that there's somehow a 
"owner" thread of a dataset, which is not currently a requirement. What 
happens if thread A opens a dataset, writes a few blocks (that go into the 
block cache), then terminates and then thread B do other IO and close the 
dataset... ?

Anyway, if you always use RasterIO() interface and not mix RasterIO() with 
IReadBlock()/IWriteBlock(), I don't think that there are actually race 
conditions (I will not guarantee it however. Race condition analysis is 
terribly difficult) that could lead to the underlying IWriteBlock() to be called 
from different threads concurrently (which is bad, see 2nd paragraph). So using 
RasterIO() from different threads will lead to serialize the flushing of blocks 
to the disk due to the use of the global cache mutex. And I doubt using 
directly libtiff/libgeotiff will make it easier.

Best regards,

Even
From roland.duhaime at gmail.com  Wed Feb  9 16:10:56 2011
From: roland.duhaime at gmail.com (Roland Duhaime)
Date: Wed Feb  9 16:10:58 2011
Subject: [gdal-dev] Large ERDAS Imagine .img Files (HFA) Workaround
Message-ID: <AANLkTikCRiTvuiymZnVhdGhNvCVPhdL7=S6LxMjntjrG@mail.gmail.com>

I am using gdal2tiles under OSGEO4W.  I use both gdal16 and gdal17.

When I have a large HFA file I am not able to use gdal2tiles to process this
file.  These large .img (HFA) files have a spill file with a .ige
extension.  I receive an error similar to:

0ERROR 4: Unable to open external data file:z38null_rgb.ige (Note that this
is not a name I specified)


My source .img file has a name simlar to:
cape_impervious_mosaic_setnull_rgb.img


As a workaround I rename just the Erdas Spill file to z38null_rgb.ige and
the gdal2tiles command runs without error.


Thanks,

Roland
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110209/fb96c099/attachment.html
From even.rouault at mines-paris.org  Wed Feb  9 17:07:23 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb  9 17:07:31 2011
Subject: [gdal-dev] GDALDestroyDriverManager() - dataset cleanup
In-Reply-To: <4D51FC86.4070806@pobox.com>
References: <4D51FC86.4070806@pobox.com>
Message-ID: <201102092307.23354.even.rouault@mines-paris.org>

Le mercredi 09 f?vrier 2011 03:31:34, Frank Warmerdam a ?crit :
> Folks,
> 
> I have modified GDALDriverManager::~GDALDriverManager() so that when
> it is destroyed it will first close all still-open GDAL datasets.  A debug
> message will be issued for each dataset force-closed.
> 
> This is part of an effort to ensure a clean shutdown and to make it easier
> to detect memory leaks in some situations.
> 
> This is not a completely safe operation.  In particular, if there are VRT
> files referencing other GDALDataset's the referenced dataset may be cleaned
> up before the referencing dataset which would be bad.
> 

I have found and implemented a -hopefully- safer way of closing the datasets, 
by asking them first to kindly release all references to other datasets they 
might still have. After that, it is safe to call GDALClose() on the remaining 
opened datasets. See ticket http://trac.osgeo.org/gdal/ticket/3954 for the 
details
From frankie at debian.org  Wed Feb  9 16:59:51 2011
From: frankie at debian.org (Francesco P. Lovergine)
Date: Wed Feb  9 17:17:45 2011
Subject: [gdal-dev] error adding ecw on Ubuntu 10.4 (lucid)
In-Reply-To: <4D501DF8.5040703@pobox.com>
References: <AANLkTinrs6sWe4Jqi=bg2sXUNtdWPB3RjqFkjQU4-ufF@mail.gmail.com>
	<201102052024.16151.even.rouault@mines-paris.org>
	<AANLkTi=gTXhDQcWpcbZA2z+19iTZoOONR0bL57U9Omzk@mail.gmail.com>
	<201102061908.42820.even.rouault@mines-paris.org>
	<AANLkTimMWda1U-TSKeK++fTQn5WQkunAf9yn56-uFO-H@mail.gmail.com>
	<4D501DF8.5040703@pobox.com>
Message-ID: <20110209215950.GA18361@frankie.is-a-geek.org>

On Mon, Feb 07, 2011 at 11:29:44AM -0500, Frank Warmerdam wrote:
> 
> Note that in 1.9 (aka trunk) GDAL now looks in /usr/local/lib/gdalplugins/1.9
> before looking in /usr/local/lib/gdalplugins so embedding the version in
> the directory name is no longer needed.
> 

Definitively a good news!

-- 
Francesco P. Lovergine
From warmerdam at pobox.com  Wed Feb  9 17:24:07 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb  9 17:24:10 2011
Subject: [gdal-dev] Large ERDAS Imagine .img Files (HFA) Workaround
In-Reply-To: <AANLkTikCRiTvuiymZnVhdGhNvCVPhdL7=S6LxMjntjrG@mail.gmail.com>
References: <AANLkTikCRiTvuiymZnVhdGhNvCVPhdL7=S6LxMjntjrG@mail.gmail.com>
Message-ID: <4D531407.1090803@pobox.com>

On 11-02-09 04:10 PM, Roland Duhaime wrote:
>
> I am using gdal2tiles under OSGEO4W.  I use both gdal16 and gdal17.
>
> When I have a large HFA file I am not able to use gdal2tiles to process this
> file.  These large .img (HFA) files have a spill file with a .ige extension.  I
> receive an error similar to:
>
> 0ERROR 4: Unable to open external data file:z38null_rgb.ige (Note that this is
> not a name I specified)

Roland,

I imagine your .img and .ige file were renamed at some point and the
.img file still has a reference to the original .ige file inside.
One option might be to rename the .img to z38null_rgb.img and
the .ige file to z38null_rgb.ige.

Alternatively, you could use the default "gdal" package which is
now GDAL 1.8 and has improved logic for handling referenced
filename problems.  It should fallback to assuming the same
basename if the internal filename is wrong.

> My source .img file has a name simlar to: cape_impervious_mosaic_setnull_rgb.img
>
>
> As a workaround I rename just the Erdas Spill file to z38null_rgb.ige and the
> gdal2tiles command runs without error.

Ah, I see you already have a work around.  Excellent.

Note that now that the default "gdal" package is 1.8, there should be
few reasons to use the non-default version packages "gdal16" and "gdal17"
in OSGeo4W.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fmarkham at gmail.com  Wed Feb  9 17:49:46 2011
From: fmarkham at gmail.com (Francis Markham)
Date: Wed Feb  9 17:50:10 2011
Subject: [gdal-dev] Best practices for concurrent writes with GDAL (was
	RasterIO in paralel)
In-Reply-To: <201102092029.19230.even.rouault@mines-paris.org>
References: <AANLkTikvHTBStivgdPC12KsDRCG=9_NK=FaN0uHwZEZ7@mail.gmail.com>
	<20110209095902.01e608cc@asigrid01>
	<201102092029.19230.even.rouault@mines-paris.org>
Message-ID: <AANLkTi=cm8SQ-VPMvWTuj_nqa67UyEGBq1C7LdVpRuFr@mail.gmail.com>

Thanks for the feedback Antonio and Even, it is very helpful.

I probably should have specified that I want to do message passing across a
cluster using MPI, rather than shared memory multithreading.  I'll do some
performance testing to see what the relative speeds of having workers send
their data to a single writing master vs concurrent writes on NFS is.  I
suspect it might be highly dependant on the specific hardware involved.

-Francis

On 10 February 2011 06:29, Even Rouault <even.rouault@mines-paris.org>wrote:

> Le mercredi 09 f?vrier 2011 09:59:02, Antonio Valentino a ?crit :
> > Are you sure it is the best way to parallelize your problem?
> > If you write tho the disk operation are in some way serialized.
> > It is a common schema to have several worker processes/thread for CPU
> > bound computations and a single IO processes/thread that collects all
> > results and write them to disk.
> >
> > The IO process/thread int this case can also be designed to implement
> > some optimization or caching mechanism that you could not apply at
> > worker process level.
> >
> > With this schema you can bypass completely the problem of concurrent
> > writes without loss of performance IMHO.
>
> Yes I completely agree with the approach you suggest. Genuine concurrent
> writing is likely not possible on the whole chain and will result in queing
> at
> some point, for example at the OS level. (Unless you use some RAID, in
> which
> case if the file is spread over multiple disks, it is perhaps possible to
> have
> genuinge parallel writing of blocks of data of the same file.)
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110210/59c483c2/attachment.html
From mgleahy at alumni.uwaterloo.ca  Wed Feb  9 18:13:41 2011
From: mgleahy at alumni.uwaterloo.ca (Mike Leahy)
Date: Wed Feb  9 18:20:59 2011
Subject: [gdal-dev] Re: PHP bindings
In-Reply-To: <201102092014.55349.even.rouault@mines-paris.org>
References: <201102061450.35281.mgleahy@alumni.uwaterloo.ca>
	<201102090247.26536.mgleahy@alumni.uwaterloo.ca>
	<201102092014.55349.even.rouault@mines-paris.org>
Message-ID: <201102091813.42313.mgleahy@alumni.uwaterloo.ca>

Hi Even,

It looks like adding '-L../../.libs -lgdal' did the trick to ensure that the 
libraries are linked.  E.g.,:

swig -Wall -I../include -I../include/php -I../include/php/docs \
   -I/scratch2/gdal/gdal-1.8.0 -c++ -php -o osr_wrap.cpp ../include/osr.i
g++ -L../../.libs -lgdal -I../../port -I../../gcore -I../../alg \
   -I../../ogr `php-config --includes` -fpic -c osr_wrap.cpp
gcc -L../../.libs -lgdal -shared osr_wrap.o -o php_osr.so

After doing that, ldd shows a respectable number of linked libraries, 
inlcuding libgdal.  I can load php_osr.so without trouble, same as before.  
But php_gdal.so module now reports several conflicts when it is loaded (e.g., 
duplicate functions named 'rmdir', 'mkdir', 'unlink', etc...), so there's a 
bit more to fix up in that area.

However, I'm sticking with php_osr.so as a simpler test case to start off.  As 
an example, I would expect the PHP code below should create a spatial 
reference object for the wgs84 long/lat referenc system based on the epsg 
number 4326, and export the equivalent WKT text, but I'm still getting a zero 
integer returned:

php code:

$sr = new_SpatialReference();
var_dump($sr);
var_dump(SpatialReference_ImportFromProj4($sr,'+init=epsg:3587'));
var_dump(SpatialReference_ExportToWkt($sr));

outputs:

"resource(3) of type (_p_OSRSpatialReferenceShadow) int(0) int(0)"

In python, I can do the following:

srs = osgeo.osr.SpatialReference()
srs.ImportFromProj4('+init=epsg:3587')
print srs.ExportToWkt()

And I get the following output:

"GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]"

So maybe I just don't know how to interact with the spatial reference object 
within the PHP environment.  Any further suggestions here?

Regards,
Mike

On Wednesday, February 09, 2011 14:14:55 Even Rouault wrote:
> Le mercredi 09 f?vrier 2011 08:47:25, Mike Leahy a ?crit :
> > Hi Tamas,
> > 
> > Thanks for the feedback.  I've tried what you suggested, regenerating the
> > swig bindings, and setting the LD_LIBRARY_PATH...though the outcome seems
> > to be the same.  Here's my output from manually building php_gdal.so,
> > from within the swig/php source directory:
> > 
> > ==============================
> > swig -Wall -I../include -I../include/php -I../include/php/docs  \
> > -I/sources/gdal/gdal-1.8.0 -c++ -php -o gdal_wrap.cpp ../include/gdal.i
> > 
> > ../include/ColorTable.i:60: Warning(314): 'clone' is a PHP keyword,
> > renamed as 'c_clone'
> > ../include/RasterAttributeTable.i:92: Warning(314): 'clone' is a PHP
> > keyword, renamed as 'c_clone'
> > ../include/gdal.i:206: Warning(453): Can't apply (Pointer NONNULL). No
> > typemaps are defined.
> > ../include/cpl.i:228: Warning(453): Can't apply (char **CSL). No typemaps
> > are defined.
> > ../include/Dataset.i:474: Warning(453): Can't apply (char **CSL). No
> > typemaps are defined.
> > ../include/Band.i:289: Warning(453): Can't apply (IF_ERROR_RETURN_NONE).
> > No typemaps are defined.
> > ../include/Band.i:303: Warning(453): Can't apply (IF_ERROR_RETURN_NONE).
> > No typemaps are defined.
> > ../include/Operations.i:229: Warning(453): Can't apply (int nList,double
> > *pList). No typemaps are defined.
> > ../include/Operations.i:360: Warning(453): Can't apply (int
> > object_list_count,GDALRasterBandShadow **poObjects). No typemaps are
> > defined. ../include/Operations.i:474: Warning(453): Can't apply (int
> > nList,double *pList). No typemaps are defined.
> > 
> > g++ -I../../port -I../../gcore -I../../alg -I../../ogr `php-config \
> > --includes` -fpic -c gdal_wrap.cpp
> > 
> > gcc -shared gdal_wrap.o -o php_gdal.so
> > ==============================
> > 
> > At this point, I've got a php_gdal.so file, which will not load in PHP. 
> > I think for whatever reason, the module is not linking to the gdal core
> > library. So either LD_LIBRARY_PATH has no effect, or there's something
> > else that's being missed. Here's the output from ldd:
> > 
> > ldd php_gdal.so
> > 
> >         linux-vdso.so.1 =>  (0x00007fff9b985000)
> >         libc.so.6 => /lib/libc.so.6 (0x00007f0a329cc000)
> >         /lib64/ld-linux-x86-64.so.2 (0x00007f0a32fce000)
> 
> Perhaps you must explicitely link php_gdal.so with libgdal.so ? Otherwise I
> do not see how PHP could figure out that it must load it... So editing the
> GNUmakefile to add -L../.. -lgdal might - perhaps - help.
> 
> For reference, here's what you can find in the swig/java/GNUmakefile :
> $(JAVA_MODULES): lib%jni.$(SO_EXT): %_wrap.$(OBJ_EXT)
> 	$(LINK) $(LDFLAGS) $(CONFIG_LIBS) $< -o $@ $(LINK_EXTRAFLAGS)
> 
> Disclaimer: I do not know anything about PHP, so I'm likely to say
> unrelevant things :-)
> 
> > I can successfully build /and/ load php_osr.so,
> 
> Hum, strange, I don't understand why php_osr would behave differently from
> php_gdal or php_osr
> 
> > but when I create an osr
> > object in a sample PHP script, all of the object's methods return an
> > integer zero, instead of the expected output (e.g., importing/exporting
> > projection text).
> 
> Well, not necessarily an error. The return code from most Import/Export
> method is an integer/enum and 0 is the "no error value" (OGRERR_NONE)
> 
> > There are less warnings when generating the swig bindings for
> > osr_wrap.cpp (just three, similar to the 'clone' and 'CSL' related
> > warnings above). Also, when I run the g++ command above for osr, I see
> > lots of warnings, such as:
> > 
> > ==============================
> > osr_wrap.cpp: In function ?char* OGRErrMessages(int)?:
> > osr_wrap.cpp:1169: warning: deprecated conversion from string constant to
> > ?char*?
> > osr_wrap.cpp:1171: warning: deprecated conversion from string constant to
> > ?char*?
> > osr_wrap.cpp:1173: warning: deprecated conversion from string constant to
> > ?char*?
> > 
> > ....
> > 
> > osr_wrap.cpp: In function ?int zm_startup_osr(int, int)?:
> > osr_wrap.cpp:8255: warning: deprecated conversion from string constant to
> > ?char*?
> > osr_wrap.cpp:8256: warning: deprecated conversion from string constant to
> > ?char*?
> > 
> > ...
> > ==============================
> > 
> > At this point, there's not much more I can do to without some guidance
> > from someone with a better understanding of where things could be going
> > wrong. Is this perhaps a topic that would be better discussed with the
> > SWIG users list?
> 
> Perhaps. You need to get accustomed to how SWIG works certainly. The SWIG
> documentation can help a bit, but most of the learning comes from the hours
> of pain you will endure practicing :-) (speaking of my experience with
> Java and Python bindings).
> 
> The 'deprecated conversion from string constant to' warnings do not sound
> critical. At least, I wouldn't start by fixing those ones. The priority is
> to implement the missing typemaps that swig warns about. You can have a
> look at swig/include/README.typemaps. If you have experience with one of
> the other bindings languages (CSharp, Java, Perl or Python), you might
> also take some inspiration on what they do.
> You will need to edit the files in swig/include/php ...
> 
> Best regards,
> 
> Even
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110209/20688129/attachment-0001.html
From piva at meeo.it  Thu Feb 10 02:46:37 2011
From: piva at meeo.it (Giacomo Piva)
Date: Thu Feb 10 02:46:41 2011
Subject: [gdal-dev] Help with import gdal import in python
In-Reply-To: <4D52C386.5090402@pobox.com>
References: <4D52BF7A.3090009@meeo.it> <4D52C386.5090402@pobox.com>
Message-ID: <4D5397DD.80200@meeo.it>

Frank,
Thanks for your reply, I solved my problem by recompiling GDAL with 
--with-python option.
Thanks.

On 02/09/2011 05:40 PM, Frank Warmerdam wrote:
> On 11-02-09 11:23 AM, Giacomo Piva wrote:
>> Hi all,
>>
>> I'm getting this error when calling gdal_merge.py command.
>>
>> Traceback (most recent call last):
>> File "/home/meeo/bin/gdal_merge.py", line 31, in ?
>> import gdal
>> File "/usr/lib/python2.4/gdal.py", line 7, in ?
>> import _gdal
>> ImportError: No module named _gdal
>>
>> I don't know python 'cause I don't know how to solve this problem.
>> Any suggestion?
>
> Giacomo,
>
> With all due respect you haven't given much context.   Did you build
> and install GDAL and the python bindings yourself?
>
> I imagine the problem is related either to the _gdal.so file not being
> found, or it not loading because the underlying libgdal.so.* file not
> being found.  Does _gdal.so exist in:
>
>   /usr/lib/python2.4/osgeo
>
> Best regards,


-- 
Giacomo Piva

MEEO S.r.l.
Via Saragat 9
I-44122 Ferrara, Italy
Tel: +39 0532 1861501
Fax: +39 0532 1861637
http://www.meeo.it

========================================
"ATTENZIONE:le informazioni contenute in questo messaggio sono
da considerarsi confidenziali ed il loro utilizzo ? riservato unicamente
al destinatario sopra indicato. Chi dovesse ricevere questo messaggio
per errore ? tenuto ad informare il mittente ed a rimuoverlo
definitivamente da ogni supporto elettronico o cartaceo."

"WARNING:This message contains confidential and/or proprietary
information which may be subject to privilege or immunity and which
is intended for use of its addressee only. Should you receive this
message in error, you are kindly requested to inform the sender and
to definitively remove it from any paper or electronic format."

From brfr at metrico.lu  Thu Feb 10 03:09:45 2011
From: brfr at metrico.lu (Frank Broniewski)
Date: Thu Feb 10 03:08:55 2011
Subject: [gdal-dev] [python-ogr] Transform datasource problems
In-Reply-To: <201102092024.34122.even.rouault@mines-paris.org>
References: <4D524826.40206@metrico.lu>
	<201102092024.34122.even.rouault@mines-paris.org>
Message-ID: <4D539D49.4050905@metrico.lu>

Even,

thank you for your verbose and helpful answer!

Am 09.02.2011 20:24, schrieb Even Rouault:
> Several points :
>
> 1) The implementation of Layer.GetFeature() is only efficient for just a few
> drivers (shapefile). Other drivers will need to sequentially read from the first
> feature ... So use GetNextFeature()

Are these informations somewhere documented? I had a look at the docs 
here [1],[2], but didn't find anything related. What about iterating 
over layers in a datasource, or fields in a feature? Are there similar 
concerns?

> 2) The real bug is that you don't rewrite the feature to its layer. So you
> need to add a target_layer.SetFeature(target_feature)

Ah, Ok, so the link/object relation between the layer and the feature is 
lost, once the feature is fetched? Since most things are done by 
reference in Python, this was not obvious to me. Thanks for pointing 
this out!

> 3) But what you are doing is really what ogr2ogr.py does, although your
> approach will be less efficient as you first copy the layer and then rewrite each
> of its feature.

Yes, I know. And I had a deep look at the ogr2ogr.py script before 
writing to the list, but frankly this is too much for me. It looks more 
like a c/c++ script than anything else to me - no functions, no classes, 
nothing from the python zen ... I really got lost in the middle of the 
script :-) but that's just a cause of my insufficient programming skills.

> For best performance, you should rather :
> a) create a target layer from scratch
> b) copy the feature definition from the source layer to the target layer
> c) iterate over the source features, for each source feature, create a target
> feature (Feature.SetFrom(other_feature)). reproject the geometry, assign it to
> the target feature, and Layer.CreateFeature(target_feature)
>
> Basically a stripped version of ogr2ogr.py

I will make a new version and post it here on the list, so everyone can 
have a look and maybe learn something from it


Frank


[1] http://www.gdal.org/ogr/ogr_formats.html
[2] http://www.gdal.org/ogr/classOGRLayer.html

-- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
From brfr at metrico.lu  Thu Feb 10 03:28:49 2011
From: brfr at metrico.lu (Frank Broniewski)
Date: Thu Feb 10 03:28:00 2011
Subject: [gdal-dev] [python-ogr] GetNumPoints from geometry
In-Reply-To: <4D52CBAF.9060308@gmail.com>
References: <4D52A288.5040301@metrico.lu>
	<4D52A85F.6070508@gmail.com>	<4D52B493.2020608@metrico.lu>
	<4D52CBAF.9060308@gmail.com>
Message-ID: <4D53A1C1.4050302@metrico.lu>

Hi Ari,

thanks for your answer. I am not sure what you mean with return a 
geometry in scalar context, and I don't have a sound understanding of 
perl, SWIG and the impacts of it on the objects created by the bindings.

A very quick google search didn't reveal a good explanation of what a 
scalar in perl is, but from what I found it seems to have something to 
do with lists in python [1]
It would be possible to let an object (e.g. OGRPoint) inherit from list 
and use that as a container, but this is just speculation on my side ;-)

Thanks for the tipp with the documentation. I will use the C API in the 
future then ...


Thanks,

Frank


[1] http://docs.python.org/library/functions.html#list

Am 09.02.2011 18:15, schrieb Ari Jolma:
> On 02/09/2011 05:36 PM, Frank Broniewski wrote:
>> Yes, thank you. GetPointCount() works. Another thing I noticed:
>>
>> point = geometry.GetPoint(point_index)
>>
>> point is of type tuple(x, y, z), not as one would guess an OGRPoint()
>> geometry. At least for me this was unexpected. And the python GetPoint
>> method does not take a OGRPoint geometry, like it is mentioned here [1]
>
> The OGC name of GetPoint is PointN and it should return a Point object
> according to the standard.
>
> The GDAL Perl (which I care for) works the same way, GetPoint returns a
> list of coordinates. It would be possible to make it return a geometry
> object in scalar context, but I'm not sure if Python has that possibility.
>
> The GDAL Perl documentation for Geometry object is at
> http://geoinformatics.tkk.fi/doc/Geo-GDAL/html/class_geo_1_1_o_g_r_1_1_geometry.html
> I'm not aware of GDAL Python documentation in the web. There are
> differences between GDAL C++ API and GDAL C API. For the bindings the C
> API documentation is usually better:
> http://www.gdal.org/ogr/ogr__api_8h.html#67b897ffcd88a83832964c3735fa1dcb
>
> Best regards,
>
> Ari
>
>>
>> Frank
>>
>>
>> [1]
>> http://www.gdal.org/ogr/classOGRLineString.html#ab63760022e49a795477f2fd31da059f
>>
>>
>> Am 09.02.2011 15:44, schrieb Ari Jolma:
>>> On 02/09/2011 04:19 PM, Frank Broniewski wrote:
>>>> Hi,
>>>>
>>>> just a quick question: isn't GetNumPoints implemented on a geometry in
>>>> ogr python?
>>>
>>> There are OGR_G_GetPointCount in ogr_api.h and GetPointCount method in
>>> the Geometry class in Swig bindings.
>>>
>>> Hm. It seems that NumPoints is the name of the method in the OGC simple
>>> features standard (it is defined for LineStrings).
>>>
>>> Ari
>>>
>>>> Neither GetNumPoints() nor getNumPoints() (small g) work.
>>>> The passed in geometry is a geometry object from a
>>>>
>>>> geometry = feature.GetGeometryRef()
>>>>
>>>> call and the geometry is of type 'LINESTRING' taken from
>>>>
>>>> geometry.GetGeometryName() ...
>>>>
>>>>
>>>> code:
>>>> def line_nodes(geometry):
>>>> nodes = list()
>>>>
>>>> for point_index in xrange(geometry.GetNumPoints()):
>>>> ogr_point = ogr.OGRPoint()
>>>> point = geometry.GetPoint(point_index, ogr_point)
>>>> dimenion = point.GetCoordinateDimension()
>>>> if dimension == 3:
>>>> list.append(point_index, point.GetX(), point.GetY(), point.GetZ())
>>>> else:
>>>> list.append(point_index, point.GetX(), point.GetY())
>>>>
>>>> return nodes
>>>>
>>>>
>>>> raises an AttributeError
>>>> ...
>>>> for point_index in xrange(geometry.getNumPoints()):
>>>> File "C:\Python26\lib\site-packages\osgeo\ogr.py", line 2672, in
>>>> <lambda>
>>>> __getattr__ = lambda self, name: _swig_getattr(self, Geometry, name)
>>>> File "C:\Python26\lib\site-packages\osgeo\ogr.py", line 34, in
>>>> _swig_getattr
>>>> raise AttributeError,name
>>>> AttributeError: GetNumPoints
>>>>
>>>>
>>>> Many thanks
>>>>
>>>> Frank
>>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
From ari.jolma at gmail.com  Thu Feb 10 04:08:21 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu Feb 10 04:08:26 2011
Subject: [gdal-dev] [python-ogr] GetNumPoints from geometry
In-Reply-To: <4D53A1C1.4050302@metrico.lu>
References: <4D52A288.5040301@metrico.lu>	<4D52A85F.6070508@gmail.com>	<4D52B493.2020608@metrico.lu>	<4D52CBAF.9060308@gmail.com>
	<4D53A1C1.4050302@metrico.lu>
Message-ID: <4D53AB05.1080506@gmail.com>

On 02/10/2011 10:28 AM, Frank Broniewski wrote:
> Hi Ari,
>
> thanks for your answer. I am not sure what you mean with return a 
> geometry in scalar context, and I don't have a sound understanding of 
> perl, SWIG and the impacts of it on the objects created by the bindings.
>
> A very quick google search didn't reveal a good explanation of what a 
> scalar in perl is, but from what I found it seems to have something to 
> do with lists in python [1]
> It would be possible to let an object (e.g. OGRPoint) inherit from 
> list and use that as a container, but this is just speculation on my 
> side ;-)

In this case the GetPoint method exists already, so to maintain 
backwards compatibility, its behavior should not be changed. However, 
the behavior is only really defined in the context where it is expected 
to return a list (the coordinates). Thus, it would be possible to 
extend/define its behavior to scalar context, i.e., where it is expected 
to return a single value. For example in Perl, @list is a variable that 
is a list and $scalar is a variable that is a scalar (one thing):

@list = $geometry_object->GetPoint(0);
$scalar = $geometry_object->GetPoint(0);

now @list would be array (x,y) and $scalar would be a Geometry object of 
type Point.

This might be confusing and I don't know if Python supports this kind of 
play with the syntax.

Anyway, as PointN is the standard name, which is not used in GDAL so 
far, we could use that.

Ari

>
> Thanks for the tipp with the documentation. I will use the C API in 
> the future then ...
>
>
> Thanks,
>
> Frank
>
>
> [1] http://docs.python.org/library/functions.html#list
>
> Am 09.02.2011 18:15, schrieb Ari Jolma:
>> On 02/09/2011 05:36 PM, Frank Broniewski wrote:
>>> Yes, thank you. GetPointCount() works. Another thing I noticed:
>>>
>>> point = geometry.GetPoint(point_index)
>>>
>>> point is of type tuple(x, y, z), not as one would guess an OGRPoint()
>>> geometry. At least for me this was unexpected. And the python GetPoint
>>> method does not take a OGRPoint geometry, like it is mentioned here [1]
>>
>> The OGC name of GetPoint is PointN and it should return a Point object
>> according to the standard.
>>
>> The GDAL Perl (which I care for) works the same way, GetPoint returns a
>> list of coordinates. It would be possible to make it return a geometry
>> object in scalar context, but I'm not sure if Python has that 
>> possibility.
>>
>> The GDAL Perl documentation for Geometry object is at
>> http://geoinformatics.tkk.fi/doc/Geo-GDAL/html/class_geo_1_1_o_g_r_1_1_geometry.html 
>>
>> I'm not aware of GDAL Python documentation in the web. There are
>> differences between GDAL C++ API and GDAL C API. For the bindings the C
>> API documentation is usually better:
>> http://www.gdal.org/ogr/ogr__api_8h.html#67b897ffcd88a83832964c3735fa1dcb 
>>
>>
>> Best regards,
>>
>> Ari
>>
>>>
>>> Frank
>>>
>>>
>>> [1]
>>> http://www.gdal.org/ogr/classOGRLineString.html#ab63760022e49a795477f2fd31da059f 
>>>
>>>
>>>
>>> Am 09.02.2011 15:44, schrieb Ari Jolma:
>>>> On 02/09/2011 04:19 PM, Frank Broniewski wrote:
>>>>> Hi,
>>>>>
>>>>> just a quick question: isn't GetNumPoints implemented on a 
>>>>> geometry in
>>>>> ogr python?
>>>>
>>>> There are OGR_G_GetPointCount in ogr_api.h and GetPointCount method in
>>>> the Geometry class in Swig bindings.
>>>>
>>>> Hm. It seems that NumPoints is the name of the method in the OGC 
>>>> simple
>>>> features standard (it is defined for LineStrings).
>>>>
>>>> Ari
>>>>
>>>>> Neither GetNumPoints() nor getNumPoints() (small g) work.
>>>>> The passed in geometry is a geometry object from a
>>>>>
>>>>> geometry = feature.GetGeometryRef()
>>>>>
>>>>> call and the geometry is of type 'LINESTRING' taken from
>>>>>
>>>>> geometry.GetGeometryName() ...
>>>>>
>>>>>
>>>>> code:
>>>>> def line_nodes(geometry):
>>>>> nodes = list()
>>>>>
>>>>> for point_index in xrange(geometry.GetNumPoints()):
>>>>> ogr_point = ogr.OGRPoint()
>>>>> point = geometry.GetPoint(point_index, ogr_point)
>>>>> dimenion = point.GetCoordinateDimension()
>>>>> if dimension == 3:
>>>>> list.append(point_index, point.GetX(), point.GetY(), point.GetZ())
>>>>> else:
>>>>> list.append(point_index, point.GetX(), point.GetY())
>>>>>
>>>>> return nodes
>>>>>
>>>>>
>>>>> raises an AttributeError
>>>>> ...
>>>>> for point_index in xrange(geometry.getNumPoints()):
>>>>> File "C:\Python26\lib\site-packages\osgeo\ogr.py", line 2672, in
>>>>> <lambda>
>>>>> __getattr__ = lambda self, name: _swig_getattr(self, Geometry, name)
>>>>> File "C:\Python26\lib\site-packages\osgeo\ogr.py", line 34, in
>>>>> _swig_getattr
>>>>> raise AttributeError,name
>>>>> AttributeError: GetNumPoints
>>>>>
>>>>>
>>>>> Many thanks
>>>>>
>>>>> Frank
>>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>

From dmorissette at mapgears.com  Thu Feb 10 10:32:04 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu Feb 10 10:32:06 2011
Subject: [gdal-dev] Montreal OSGeo Code Sprint: March 15-18, 2011
Message-ID: <4D5404F4.30902@mapgears.com>

Hi GDAL/OGR Devs,

This is a reminder that the Montreal Code Sprint will be taking place on 
March 15-18, 2011. We've already got a few participants for GDAL/OGR and 
there is still room for more.

If you plan on participating then please, please, please add your name 
to the list in the wiki to help us with the planning:

http://wiki.osgeo.org/wiki/Montreal_Code_Sprint_2011

You'll also find in the wiki all information about the venue and the 
hotel, including our group rate. I'd encourage you to book your hotel 
room ASAP to reduce the chances of having to stay in a different hotel 
from the rest of the group.

You are also invited to join the "tosprint" list to receive the latest 
updates:
http://lists.osgeo.org/mailman/listinfo/tosprint

SPONSORS:

Finally, we're also seeking sponsors (750$ each) to support food and fun 
for the sprinters as they work hard and play hard for four productive 
days. If you are interested in supporting this event then please contact 
me off-list.

Thank you to our first round of sponsors:

- LizardTech - http://www.lizardtech.com/
- Azavea - http://www.azavea.com/
- qPublic - http://qpublic.net/
- Farallon Geographics - http://fargeo.com/

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From haileyeckstrand at gmail.com  Thu Feb 10 13:43:47 2011
From: haileyeckstrand at gmail.com (Hailey Eckstrand)
Date: Thu Feb 10 13:43:50 2011
Subject: [gdal-dev] ERROR 1: Too many points (440 out of 441) failed to
 transform, unable to compute output bounds.
Message-ID: <AANLkTi=QU1y70AeFBmLdwhooyf8qLnKQYemFhKMrXHRq@mail.gmail.com>

My GDAL package version:
GDAL 1.9dev, released 2011/01/18
My input file is a NETCDF file which contains global average temperatures.
This is the gdalinfo spew:

Driver: netCDF/Network Common Data Format
Files: gfdl_cm2_1-sresa2-tas-run1-2041-2070.nc
Size is 144, 88
Coordinate System is `'
Origin = (0.000000000000000,88.988767426589433)
Pixel Size = (2.500000000000000,-2.022471986967942)
Metadata:
  NC_GLOBAL#title=GFDL CM2.1, SRESA2 (run1) SRES A2 experiment output for
IPCC AR4 and US CCSP
  NC_GLOBAL#institution=NOAA GFDL (US Dept of Commerce / NOAA / Geophysical
Fluid Dynamics Laboratory, Princeton, NJ, USA)
  NC_GLOBAL#source=GFDL_CM2.1 (2004): atmosphere: AM2.1 (am2p13fv, M45L24);
ocean: OM3.1 (mom4p1p7_om3p5, tripolar360x200L50); sea ice: SIS; land: LM2;
infrastructure: FMS preK release
  NC_GLOBAL#contact=GFDL.Climate.Model.Info@noaa.gov
  NC_GLOBAL#project_id=IPCC Fourth Assessment and US CCSP Projects
  NC_GLOBAL#table_id=Table A1 (20 September 2004)
  NC_GLOBAL#experiment_id=SRES A2 experiment
  NC_GLOBAL#realization=1
  NC_GLOBAL#cmor_version=9.600000e-01
  NC_GLOBAL#Conventions=CF-1.0
  NC_GLOBAL#history=Wed Feb  9 15:43:49 2011: ncks -d lat,1,88
gfdl_cm2_1-sresa2-tas-run1-2041-2070.nc
gfdl_cm2_1-sresa2-tas-run1-2041-2070.nc
input/atmos.200101-210012.t_ref.nc  At 10:21:57 on 01/28/2005, CMOR rewrote
data to comply with CF standards and IPCC Fourth Assessment and US CCSP
Projects requirements
  NC_GLOBAL#references=The GFDL Data Portal (http://nomads.gfdl.noaa.gov/)
provides access to NOAA/GFDL's publicly available model input and output
data sets. From this web site one can view and download data sets and
documentation, including those related to the GFDL CM2.1 model experiments
run for the IPCC's 4th Assessment Report and the US CCSP.
  NC_GLOBAL#comment=GFDL experiment name = CM2.1U-H2_SresA2_W1. PCMDI
experiment name = SRESA2 (run1). Initial conditions for this experiment were
taken from 1 January 2001 of the climate of the 20th century experiment
named CM2.1U-D4_1860-2000-AllForc_H2. Several time varying forcing agents
used during the first 100 years of this CM2.1U-H2_SresA2_W1 experiment were
based on output of the MOZART global atmospheric chemistry climate model
when driven with the SRES A2 emission scenarios. For the CM2.1U-H2_SresA2_W1
experiment volcanic aerosols were zero, land surface cover types were time
invariant, and solar irradiance varied seasonally based upon late 20th
century averages but with no interannual variation.
  NC_GLOBAL#gfdl_experiment_name=CM2.1U-H2_SresA2_W1
  NC_GLOBAL#NCO=20110209
  tas#standard_name=air_temperature
  tas#long_name=Surface Air Temperature
  tas#units=K
  tas#cell_methods=time: mean
  tas#coordinates=height
  tas#original_name=t_ref
  lat#standard_name=latitude
  lat#long_name=latitude
  lat#units=degrees_north
  lat#axis=Y
  lat#bounds=lat_bnds
  lon#standard_name=longitude
  lon#long_name=longitude
  lon#units=degrees_east
  lon#axis=X
  lon#bounds=lon_bnds
Corner Coordinates:
Upper Left  (   0.0000000,  88.9887674)
Lower Left  (   0.0000000, -88.9887674)
Upper Right (     360.000,      88.989)
Lower Right (     360.000,     -88.989)
Center      ( 180.0000000,  -0.0000000)
Band 1 Block=144x1 Type=Float32, ColorInterp=Undefined
  NoData Value=9.96920996838686905e+36
  Metadata:
    NETCDF_VARNAME=tas
    NETCDF_DIMENSION_timeofyear=1


this is the command I am trying to perform:
gdalwarp -s_srs "+proj=longlat" -t_srs "+proj=somerc +lat_0=47.5
+lon_0=-97.0 +y_0=3150000.0 +x_0=3900000.0 +a=6371229 +b=6371229" -tr 50000
-50000 -te 575000.000 575000.000 7275000.000 5775000.000 -srcnodata "1e20"
-dstnodata "1e20" -r bilinear -overwrite
NETCDF:gfdl_cm2_1-sresa2-tas-run1-2041-2070.nc:tas test.tif

as per this thread:
http://tinyurl.com/4enmf2o*
*I have also tried:
gdalwarp --config CENTER_LONG 180 -s_srs "+proj=longlat" -t_srs
"+proj=somerc +lat_0=47.5 +lon_0=-97.0 +y_0=3150000.0 +x_0=3900000.0
+a=6371229 +b=6371229" -tr 50000 -50000 -te 575000.000 575000.000
7275000.000 5775000.000 -srcnodata "1e20" -dstnodata "1e20" -r bilinear
-overwrite NETCDF:gfdl_cm2_1-sresa2-tas-run1-2041-2070.nc:tas test.tif

and with a negative center_long

gdalwarp --config CENTER_LONG -180 -s_srs "+proj=longlat" -t_srs
"+proj=somerc +lat_0=47.5 +lon_0=-97.0 +y_0=3150000.0 +x_0=3900000.0
+a=6371229 +b=6371229" -tr 50000 -50000 -te 575000.000 575000.000
7275000.000 5775000.000 -srcnodata "1e20" -dstnodata "1e20" -r bilinear
-overwrite NETCDF:gfdl_cm2_1-sresa2-tas-run1-2041-2070.nc:tas test.tif

But the stays the same:
ERROR 1: Too many points (440 out of 441) failed to transform,
unable to compute output bounds.

I am not sure if it makes a different, but I have slightly altered the input
file by removing the top 2 rows of latitude using the command:
ncks -d lat,1,88 gfdl_cm2_1-sresa2-tas-run1-2041-2070.nc

Any help with this error would be very appreciated,
Hailey
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110210/b588e861/attachment.html
From even.rouault at mines-paris.org  Thu Feb 10 14:24:08 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb 10 14:24:15 2011
Subject: [gdal-dev] [python-ogr] Transform datasource problems
In-Reply-To: <4D539D49.4050905@metrico.lu>
References: <4D524826.40206@metrico.lu>
	<201102092024.34122.even.rouault@mines-paris.org>
	<4D539D49.4050905@metrico.lu>
Message-ID: <201102102024.08234.even.rouault@mines-paris.org>

Le jeudi 10 f?vrier 2011 09:09:45, Frank Broniewski a ?crit :
> Even,
> 
> thank you for your verbose and helpful answer!
> 
> Am 09.02.2011 20:24, schrieb Even Rouault:
> > Several points :
> > 
> > 1) The implementation of Layer.GetFeature() is only efficient for just a
> > few drivers (shapefile). Other drivers will need to sequentially read
> > from the first feature ... So use GetNextFeature()
> 
> Are these informations somewhere documented? I had a look at the docs
> here [1],[2], but didn't find anything related. What about iterating
> over layers in a datasource, or fields in a feature? Are there similar
> concerns?

Well, the doc for OGRLayer::GetFeature() at 
http://gdal.org/ogr/classOGRLayer.html#cb7625383f161e5a04aeea2173dce411 
mentions "Use OGRLayer::TestCapability(OLCRandomRead) to establish if this 
layer supports efficient random access reading via GetFeature(); however, the 
call should always work if the feature exists as a fallback implementation 
just scans all the features in the layer looking for the desired feature."

DataSource.GetLayer() and Feature.GetFieldAsXXXX() are efficents since the 
datasource maintains a layer array and the feature maintains a field array

> 
> > 2) The real bug is that you don't rewrite the feature to its layer. So
> > you need to add a target_layer.SetFeature(target_feature)
> 
> Ah, Ok, so the link/object relation between the layer and the feature is
> lost, once the feature is fetched?

Exactly. Or to be more precise, any update done to the feature is only "in 
memory" until the feature is commited back to the layer with 
Layer.SetFeature().

> Since most things are done by
> reference in Python, this was not obvious to me. Thanks for pointing
> this out!

The GDAL Python bindings are known not to be very python'ish. They tend to 
make the C/C++ API accessible to Python in the most straighforward way. The 
main reason is that we use swig as a facility to have a common API between 
Python, Perl, Java and C#.

You should have a look at http://trac.osgeo.org/gdal/wiki/GdalOgrInPython and 
particularly the "Gotchas" section.

> 
> > 3) But what you are doing is really what ogr2ogr.py does, although your
> > approach will be less efficient as you first copy the layer and then
> > rewrite each of its feature.
> 
> Yes, I know. And I had a deep look at the ogr2ogr.py script before
> writing to the list, but frankly this is too much for me. It looks more
> like a c/c++ script than anything else to me - no functions, no classes,
> nothing from the python zen ..

Yes this is "by design" as explained at the beginning of the file. Basically 
you can open ogr2ogr.cpp and ogr2ogr.py side by side and see how the C/C++ API 
maps to Python.

> I really got lost in the middle of the
> script :-) but that's just a cause of my insufficient programming skills.

Yes, ogr2ogr code has become more complicated over the time, with the addition 
of new options. Hoewever, what you want to do should be doable in ~ 30 lines I 
think.

Or, just blindly use ogr2ogr.py and call its main() with the appropriate 
arguments ;-)

> 
> > For best performance, you should rather :
> > a) create a target layer from scratch
> > b) copy the feature definition from the source layer to the target layer
> > c) iterate over the source features, for each source feature, create a
> > target feature (Feature.SetFrom(other_feature)). reproject the geometry,
> > assign it to the target feature, and Layer.CreateFeature(target_feature)
> > 
> > Basically a stripped version of ogr2ogr.py
> 
> I will make a new version and post it here on the list, so everyone can
> have a look and maybe learn something from it
> 
> 
> Frank
> 
> 
> [1] http://www.gdal.org/ogr/ogr_formats.html
> [2] http://www.gdal.org/ogr/classOGRLayer.html
From warmerdam at pobox.com  Thu Feb 10 16:50:19 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 10 16:50:21 2011
Subject: [gdal-dev] ERROR 1: Too many points (440 out of 441) failed to
	transform, unable to compute output bounds.
In-Reply-To: <AANLkTi=QU1y70AeFBmLdwhooyf8qLnKQYemFhKMrXHRq@mail.gmail.com>
References: <AANLkTi=QU1y70AeFBmLdwhooyf8qLnKQYemFhKMrXHRq@mail.gmail.com>
Message-ID: <4D545D9B.9050702@pobox.com>

On 11-02-10 01:43 PM, Hailey Eckstrand wrote:
> But the stays the same:
> ERROR 1: Too many points (440 out of 441) failed to transform,
> unable to compute output bounds.

Hailey,

I tried with your file and with debugging on and saw the following message:

   WARP: Recompute out extent with CHECK_WITH_INVERT_PROJ=TRUE

I read through the code in gdalwarp.cpp and it seems this is something
added, perhaps by Even, to check that the output area selected is appropriate
and can be effectively reprojected.  I tested a few points between the somerc
projection and WGS84 with the PROJ.4 "cs2cs" command and found there was often
poor fidelity - likely indicating that points were being transformed that
are far outside the well defined area for the projection.

I did successfully run your gdalwarp command by adding:

   --config CHECK_WITH_INVERT_PROJ FALSE

on the commandline, but I'm not convinced that the results are actually
very accurate or meaningful.  I'd suggest you reconsider whether you really
want to try and warp nearly the whole world to a swiss oblique mercator
projection.

Possibly Even could consider improving the error reporting in this case
if the issue is really that the transformation is not round tripping well.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From brfr at metrico.lu  Fri Feb 11 02:54:12 2011
From: brfr at metrico.lu (Frank Broniewski)
Date: Fri Feb 11 02:54:17 2011
Subject: [gdal-dev] [python-ogr] Transform datasource problems
In-Reply-To: <201102102024.08234.even.rouault@mines-paris.org>
References: <4D524826.40206@metrico.lu>
	<201102092024.34122.even.rouault@mines-paris.org>
	<4D539D49.4050905@metrico.lu>
	<201102102024.08234.even.rouault@mines-paris.org>
Message-ID: <4D54EB24.3090502@metrico.lu>

Ok, this is the script made up yesterday:
http://paste.pocoo.org/show/336317/

and an example script which is using it:
http://paste.pocoo.org/show/336318/

The convert_datasource funtion can convert an input datasource from one 
format to another, and in an optional step do a coordinate 
transformation from the input srs to another srs.

I did try to make the funtion as pythonic as I am able to do ;-), but I 
think there are still many improvements to make. Escpecially the 
transformation part should be factored out into another function I 
think. I will see what I can do over the weekend and post another, 
improved version next week.


Frank


Am 10.02.2011 20:24, schrieb Even Rouault:
> Le jeudi 10 f?vrier 2011 09:09:45, Frank Broniewski a ?crit :
>> Even,
>>
>> thank you for your verbose and helpful answer!
>>
>> Am 09.02.2011 20:24, schrieb Even Rouault:
>>> Several points :
>>>
>>> 1) The implementation of Layer.GetFeature() is only efficient for just a
>>> few drivers (shapefile). Other drivers will need to sequentially read
>>> from the first feature ... So use GetNextFeature()
>>
>> Are these informations somewhere documented? I had a look at the docs
>> here [1],[2], but didn't find anything related. What about iterating
>> over layers in a datasource, or fields in a feature? Are there similar
>> concerns?
>
> Well, the doc for OGRLayer::GetFeature() at
> http://gdal.org/ogr/classOGRLayer.html#cb7625383f161e5a04aeea2173dce411
> mentions "Use OGRLayer::TestCapability(OLCRandomRead) to establish if this
> layer supports efficient random access reading via GetFeature(); however, the
> call should always work if the feature exists as a fallback implementation
> just scans all the features in the layer looking for the desired feature."
>
> DataSource.GetLayer() and Feature.GetFieldAsXXXX() are efficents since the
> datasource maintains a layer array and the feature maintains a field array
>
>>
>>> 2) The real bug is that you don't rewrite the feature to its layer. So
>>> you need to add a target_layer.SetFeature(target_feature)
>>
>> Ah, Ok, so the link/object relation between the layer and the feature is
>> lost, once the feature is fetched?
>
> Exactly. Or to be more precise, any update done to the feature is only "in
> memory" until the feature is commited back to the layer with
> Layer.SetFeature().
>
>> Since most things are done by
>> reference in Python, this was not obvious to me. Thanks for pointing
>> this out!
>
> The GDAL Python bindings are known not to be very python'ish. They tend to
> make the C/C++ API accessible to Python in the most straighforward way. The
> main reason is that we use swig as a facility to have a common API between
> Python, Perl, Java and C#.
>
> You should have a look at http://trac.osgeo.org/gdal/wiki/GdalOgrInPython and
> particularly the "Gotchas" section.
>
>>
>>> 3) But what you are doing is really what ogr2ogr.py does, although your
>>> approach will be less efficient as you first copy the layer and then
>>> rewrite each of its feature.
>>
>> Yes, I know. And I had a deep look at the ogr2ogr.py script before
>> writing to the list, but frankly this is too much for me. It looks more
>> like a c/c++ script than anything else to me - no functions, no classes,
>> nothing from the python zen ..
>
> Yes this is "by design" as explained at the beginning of the file. Basically
> you can open ogr2ogr.cpp and ogr2ogr.py side by side and see how the C/C++ API
> maps to Python.
>
>> I really got lost in the middle of the
>> script :-) but that's just a cause of my insufficient programming skills.
>
> Yes, ogr2ogr code has become more complicated over the time, with the addition
> of new options. Hoewever, what you want to do should be doable in ~ 30 lines I
> think.
>
> Or, just blindly use ogr2ogr.py and call its main() with the appropriate
> arguments ;-)
>
>>
>>> For best performance, you should rather :
>>> a) create a target layer from scratch
>>> b) copy the feature definition from the source layer to the target layer
>>> c) iterate over the source features, for each source feature, create a
>>> target feature (Feature.SetFrom(other_feature)). reproject the geometry,
>>> assign it to the target feature, and Layer.CreateFeature(target_feature)
>>>
>>> Basically a stripped version of ogr2ogr.py
>>
>> I will make a new version and post it here on the list, so everyone can
>> have a look and maybe learn something from it
>>
>>
>> Frank
>>
>>
>> [1] http://www.gdal.org/ogr/ogr_formats.html
>> [2] http://www.gdal.org/ogr/classOGRLayer.html
>


-- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
From acembro at yahoo.com  Fri Feb 11 06:23:58 2011
From: acembro at yahoo.com (Alain Cembro)
Date: Fri Feb 11 06:27:21 2011
Subject: [gdal-dev] Image compositing in VRT files
Message-ID: <538711.39675.qm@web120408.mail.ne1.yahoo.com>

Hello,
I have two sets of tiles.
The first one contain RGB tiles, let us call it" orthophotos".
The first one contain RGBA tiles, let us call it "roads" (with transparent background)
Is it possible to write a VRT file, so that the resulting image would have only 3 channels RGB, and show the roads on the orthophotos ?

Regards,
Alain 


      
From jorge.arevalo at deimos-space.com  Fri Feb 11 06:34:43 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Fri Feb 11 06:35:06 2011
Subject: [gdal-dev] Image compositing in VRT files
In-Reply-To: <538711.39675.qm@web120408.mail.ne1.yahoo.com>
References: <538711.39675.qm@web120408.mail.ne1.yahoo.com>
Message-ID: <AANLkTinEim3_m4E+apc8o+R8VXR6Uw1fix+zZutSCZ__@mail.gmail.com>

On Fri, Feb 11, 2011 at 12:23 PM, Alain Cembro <acembro@yahoo.com> wrote:
> Hello,
> I have two sets of tiles.
> The first one contain RGB tiles, let us call it" orthophotos".
> The first one contain RGBA tiles, let us call it "roads" (with transparent background)
> Is it possible to write a VRT file, so that the resulting image would have only 3 channels RGB, and show the roads on the orthophotos ?
>
> Regards,
> Alain
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

Hello Alain,

You probably can use gdal_vrtmerge.py script in this way:

gdal_vrtmerge.py -o out.vrt <list of tiff files>

You can modify the out.vrt file to include only the bands you're interested in.

Best regards,

-- 
Jorge Ar?valo
Internet & Mobilty Division, DEIMOS
jorge.arevalo@deimos-space.com
http://es.linkedin.com/in/jorgearevalo80
http://mobility.grupodeimos.com/
http://www.twitter.com/jorgeas80
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From joris.devplace at gmail.com  Fri Feb 11 06:50:41 2011
From: joris.devplace at gmail.com (Joris van de Sande)
Date: Fri Feb 11 06:50:43 2011
Subject: [gdal-dev] Reviving the PHP Bindings
Message-ID: <AANLkTin4SjA8uqswvFY9E0ZKV86esfYdgrB=uAaXHrtP@mail.gmail.com>

Hello,

This is a reply to the PHP Bindings thread that has been started by
Mike Leahy.I have just registered with the list, so I was not able to
reply to the thread.

I am also interested in getting the PHP bindings for GDAL up to date.
Right now we're using the gdal command line utilities a lot from
within PHP. We're relying on regular expressions to parse the output
at the moment. So it would make development a lot easier if we could
use the internal GDAL classes and functions from within PHP.

A few months ago I have created a little PHP module that converts
projection strings from wkt to proj format (and vice versa) using the
SpatialReference class. But it would be great if more functionality
could be used from inside PHP.

What can be done to revive the PHP bindings? Are more people interested

I am a PHP developer with some knowledge of C/C++. My main interest at
the moment are:
1. Using the SpatialReference class from within PHP
2. Retrieving map(meta)data like gdalinfo does from within PHP

Regards,
Joris van de Sande
From acembro at yahoo.com  Fri Feb 11 08:03:49 2011
From: acembro at yahoo.com (Alain Cembro)
Date: Fri Feb 11 08:07:00 2011
Subject: [gdal-dev] Image compositing in VRT files
In-Reply-To: <AANLkTinEim3_m4E+apc8o+R8VXR6Uw1fix+zZutSCZ__@mail.gmail.com>
Message-ID: <82732.32811.qm@web120404.mail.ne1.yahoo.com>

Hello Jorge,


--- On Fri, 2/11/11, Jorge Ar?valo <jorge.arevalo@deimos-space.com> wrote:

> You probably can use gdal_vrtmerge.py script in this way:
> 
> gdal_vrtmerge.py -o out.vrt <list of tiff files>
> 
> You can modify the out.vrt file to include only the bands
> you're interested in.

Sorry, it doesn't work :

If I put the roads.tif first, there is an exeption :

$ gdal_vrtmerge.py -o test.vrt roads.tif photos.tif           
Traceback (most recent call last):
  File "/usr/share/gdal/samples/gdal_vrtmerge.py", line 320, in <module>
    fi.write_source(t_fh, geotransform, xsize, ysize, band)
  File "/usr/share/gdal/samples/gdal_vrtmerge.py", line 150, in write_source
    data_type_name = gdal.GetDataTypeName(self.band_types[s_band]) 
IndexError: list index out of range

If I put the photos.tif first, a VRT file is created, but I can only see the roads on a white background instead of the photos background.

$ gdal_vrtmerge.py -o test.vrt photos.tif roads.tif 

More infos :

$ gdalinfo roads.tif 
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA 
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA 
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA 
Band 4 Block=256x256 Type=Byte, ColorInterp=Alpha

$ gdalinfo photos.tif 
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue

$ gdalinfo test.vrt   
Band 1 Block=128x128 Type=Byte, ColorInterp=Red
Band 2 Block=128x128 Type=Byte, ColorInterp=Green
Band 3 Block=128x128 Type=Byte, ColorInterp=Blue



      
From jorge.arevalo at deimos-space.com  Fri Feb 11 08:37:10 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Fri Feb 11 08:37:33 2011
Subject: [gdal-dev] Image compositing in VRT files
In-Reply-To: <82732.32811.qm@web120404.mail.ne1.yahoo.com>
References: <AANLkTinEim3_m4E+apc8o+R8VXR6Uw1fix+zZutSCZ__@mail.gmail.com>
	<82732.32811.qm@web120404.mail.ne1.yahoo.com>
Message-ID: <AANLkTimJB7FH4aCdBtQ6bCFZMNNCdsAj1gJPCceyN4mS@mail.gmail.com>

2011/2/11 Alain Cembro <acembro@yahoo.com>:
> Hello Jorge,
>
>
> --- On Fri, 2/11/11, Jorge Ar?valo <jorge.arevalo@deimos-space.com> wrote:
>
>> You probably can use gdal_vrtmerge.py script in this way:
>>
>> gdal_vrtmerge.py -o out.vrt <list of tiff files>
>>
>> You can modify the out.vrt file to include only the bands
>> you're interested in.
>
> Sorry, it doesn't work :
>
> If I put the roads.tif first, there is an exeption :
>
> $ gdal_vrtmerge.py -o test.vrt roads.tif photos.tif
> Traceback (most recent call last):
> ?File "/usr/share/gdal/samples/gdal_vrtmerge.py", line 320, in <module>
> ? ?fi.write_source(t_fh, geotransform, xsize, ysize, band)
> ?File "/usr/share/gdal/samples/gdal_vrtmerge.py", line 150, in write_source
> ? ?data_type_name = gdal.GetDataTypeName(self.band_types[s_band])
> IndexError: list index out of range
>
> If I put the photos.tif first, a VRT file is created, but I can only see the roads on a white background instead of the photos background.
>
> $ gdal_vrtmerge.py -o test.vrt photos.tif roads.tif
>
> More infos :
>
> $ gdalinfo roads.tif
> Band 1 Block=256x256 Type=Byte, ColorInterp=Red
> ?Mask Flags: PER_DATASET ALPHA
> Band 2 Block=256x256 Type=Byte, ColorInterp=Green
> ?Mask Flags: PER_DATASET ALPHA
> Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
> ?Mask Flags: PER_DATASET ALPHA
> Band 4 Block=256x256 Type=Byte, ColorInterp=Alpha
>
> $ gdalinfo photos.tif
> Band 1 Block=256x256 Type=Byte, ColorInterp=Red
> Band 2 Block=256x256 Type=Byte, ColorInterp=Green
> Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
>
> $ gdalinfo test.vrt
> Band 1 Block=128x128 Type=Byte, ColorInterp=Red
> Band 2 Block=128x128 Type=Byte, ColorInterp=Green
> Band 3 Block=128x128 Type=Byte, ColorInterp=Blue
>
>
>
>
>

Hello,

The error is caused because both files have different band number. If
you put road.tif first (4 bands), the script tries to fetch 4 bands
from all files, and fails with the 3-bands tif photos.tif. When you
put photos.tif in first place, then the scripts takes 3 bands for all
files, and you lose the alpha band (that's the reason of white bg
instead a transparent one)

I'm not sure if I'm talking nonsense, but you may use one of the bands
from photos.tif as alpha channel for the resulting vrt file. You can
change the VRT file by hand (http://www.gdal.org/gdal_vrttut.html)

Sorry, I don't know if it really helps... Maybe I'm wrong

-- 
Jorge Ar?valo
Internet & Mobilty Division, DEIMOS
jorge.arevalo@deimos-space.com
http://es.linkedin.com/in/jorgearevalo80
http://mobility.grupodeimos.com/
http://www.twitter.com/jorgeas80
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From adershowitz at exponent.com  Fri Feb 11 13:20:41 2011
From: adershowitz at exponent.com (Adam Dershowitz, Ph.D., P.E.)
Date: Fri Feb 11 13:40:26 2011
Subject: [gdal-dev] gdapwarp problem
Message-ID: <52CBDA34-B283-4064-9919-C51A2C395D20@exponent.com>

I am having a problem trying to use gdalwarp.  Perhaps I am just missing something, but I figured I would see if someone can help.  

I downloaded some aerial imagery from here:
http://www.michigan.gov/dnr/0,1607,7-153-10371_14546-30211--,00.html

I want to import it into a UTM zone 17 project.  So I did the following:
gdalwarp -t_srs '+proj=utm +zone=17 +datum=WGS84' input.sid output_utm.sid

gdapwarp responds with an error, but then continues with the conversion:
ERROR 6: Failed to initialize PROJ.4 with `+proj=omerc +lat_0=0 +lonc=0 +alpha=0 +k=1 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs '.
lat_0 = 0 or 90 or alpha = 90
0...10...20...30...40...50...60...70...80...90...100 - done.

It does complete, but the area of interest is in the range of UTM (254500,4734000) and the output of gdalwarp is around 663144,240035.  

Any suggestions for what I might be doing wrong?  


If I do gdalinfo on the original file here is what I get:

Driver: MrSID/Multi-resolution Seamless Image Database (MrSID)
Files: oakgrove_sw.sid
      oakgrove_sw.sdw
      oakgrove_sw.sid.aux.xml
Size is 6415, 8061
Coordinate System is:
PROJCS["IMAGINE GeoTIFF Support
Copyright 1991 - 2001 by ERDAS, Inc. All Rights Reserved
@(#)$RCSfile: egtf.c $ $Revision: 1.7 $ $Date: 2001/09/27 14:59:29EDT $
Projection = Oblique Mercator (Hotine)|IMAGINE",
   GEOGCS["NAD83",
       DATUM["North_American_Datum_1983",
           SPHEROID["GRS 1980",6378137,298.2572221010002,
               AUTHORITY["EPSG","7019"]],
           AUTHORITY["EPSG","6269"]],
       PRIMEM["Greenwich",0],
       UNIT["degree",0.0174532925199433],
       AUTHORITY["EPSG","4269"]],
   PROJECTION["Hotine_Oblique_Mercator"],
   PARAMETER["latitude_of_center",0],
   PARAMETER["longitude_of_center",0],
   PARAMETER["azimuth",0],
   PARAMETER["rectified_grid_angle",90],
   PARAMETER["scale_factor",1],
   PARAMETER["false_easting",0],
   PARAMETER["false_northing",0],
   UNIT["metre",1,
       AUTHORITY["EPSG","9001"]]]
Origin = (663144.500000000000000,240035.500000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Metadata:
 IMAGE__INPUT_NAME=K:\blk18\oakgrove_sw.tif
 IMAGE__INPUT_FILE_SIZE=155199578.000000
 GEOTIFF_NUM__1024__GTModelTypeGeoKey=1
 GEOTIFF_CHAR__GTModelTypeGeoKey=ModelTypeProjected
 GEOTIFF_NUM__1025__GTRasterTypeGeoKey=1
 GEOTIFF_CHAR__GTRasterTypeGeoKey=RasterPixelIsArea
 GEOTIFF_NUM__1026__GTCitationGeoKey=IMAGINE GeoTIFF Support
Copyright 1991 - 2001 by ERDAS, Inc. All Rights Reserved
@(#)$RCSfile: egtf.c $ $Revision: 1.7 $ $Date: 2001/09/27 14:59:29EDT $
Projection = Oblique Mercator (Hotine)|IMAGINE GeoTIFF Support
Copyright 1991 - 2001 by ERDAS, Inc. All Rights Reserved
@(#)$RCSfile: egtf.c $ $Revision: 1.7 $ $Date: 2001/09/27 14:59:29EDT $
Projection Name = Oblique Mercator (Hotine)
Units = meters
GeoTIFF Units = meters|
 GEOTIFF_NUM__2048__GeographicTypeGeoKey=4269
 GEOTIFF_CHAR__GeographicTypeGeoKey=GCS_NAD83
 GEOTIFF_NUM__2060__GeogAzimuthUnitsGeoKey=9102
 GEOTIFF_CHAR__GeogAzimuthUnitsGeoKey=Angular_Degree
 GEOTIFF_NUM__3072__ProjectedCSTypeGeoKey=32767
 GEOTIFF_CHAR__ProjectedCSTypeGeoKey=User-Defined
 GEOTIFF_NUM__3073__PCSCitationGeoKey=IMAGINE GeoTIFF Support
Copyright 1991 - 2001 by ERDAS, Inc. All Rights Reserved
@(#)$RCSfile: egtf.c $ $Revision: 1.7 $ $Date: 2001/09/27 14:59:29EDT $
Projection = Oblique Mercator (Hotine)|IMAGINE GeoTIFF Support
Copyright 1991 - 2001 by ERDAS, Inc. All Rights Reserved
@(#)$RCSfile: egtf.c $ $Revision: 1.7 $ $Date: 2001/09/27 14:59:29EDT $
Projection Name = Oblique Mercator (Hotine)
Units = meters
GeoTIFF Units = meters|
 GEOTIFF_NUM__3074__ProjectionGeoKey=32767
 GEOTIFF_CHAR__ProjectionGeoKey=User-Defined
 GEOTIFF_NUM__3075__ProjCoordTransGeoKey=3
 GEOTIFF_CHAR__ProjCoordTransGeoKey=CT_ObliqueMercator
 GEOTIFF_NUM__3076__ProjLinearUnitsGeoKey=9001
 GEOTIFF_CHAR__ProjLinearUnitsGeoKey=Linear_Meter
 GEOTIFF_NUM__3088__ProjCenterLongGeoKey=0.999600,45.309167,2546731.496000,-4354009.816000,337.255560,-86.000000
 GEOTIFF_NUM__3089__ProjCenterLatGeoKey=0.999600,45.309167,2546731.496000,-4354009.816000,337.255560,-86.000000
 GEOTIFF_NUM__3090__ProjCenterEastingGeoKey=0.999600,45.309167,2546731.496000,-4354009.816000,337.255560,-86.000000
 GEOTIFF_NUM__3091__ProjCenterNorthingGeoKey=0.999600,45.309167,2546731.496000,-4354009.816000,337.255560,-86.000000
 GEOTIFF_NUM__3093__ProjScaleAtCenterGeoKey=0.999600,45.309167,2546731.496000,-4354009.816000,337.255560,-86.000000
 GEOTIFF_NUM__3094__ProjAzimuthAngleGeoKey=0.999600,45.309167,2546731.496000,-4354009.816000,337.255560,-86.000000
 IMAGE__Z_RESOLUTION=0.000000
 GEO__ModelTypeGeoKey=1
 GEO__ProjectedCSTypeGeoKey=32767
 GEO__PCSCitationGeoKey=IMAGINE GeoTIFF Support
Copyright 1991 - 2001 by ERDAS, Inc. All Rights Reserved
@(#)$RCSfile: egtf.c $ $Revision: 1.7 $ $Date: 2001/09/27 14:59:29EDT $
Projection = Oblique Mercator (Hotine)|IMAGINE GeoTIFF Support
Copyright 1991 - 2001 by ERDAS, Inc. All Rights Reserved
@(#)$RCSfile: egtf.c $ $Revision: 1.7 $ $Date: 2001/09/27 14:59:29EDT $
Projection Name = Oblique Mercator (Hotine)
Units = meters
GeoTIFF Units = meters|
 IMAGE__Z_ORIGIN=0.000000
 IMAGE__COMPRESSION_VERSION=1,6,1
 IMAGE__TARGET_COMPRESSION_RATIO=20.000000
 IMAGE__COMPRESSION_NLEV=4
 IMAGE__COMPRESSION_WEIGHT=4.000000
 IMAGE__COMPRESSION_GAMMA=2.000000
 IMAGE__COMPRESSION_BLOCK_SIZE=512
 IMAGE__CREATION_DATE=Wed Mar 10 17:11:37 2004

 VERSION=MG2
 IMAGE__BITS_PER_SAMPLE=8
 IMAGE__WIDTH=6415
 IMAGE__HEIGHT=8061
 IMAGE__COLOR_SCHEME=0
 IMAGE__DATA_TYPE=0
 IMAGE__XY_ORIGIN=663145.000000,240035.000000
 IMAGE__X_RESOLUTION=1.000000
 IMAGE__Y_RESOLUTION=1.000000
Image Structure Metadata:
 INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  663144.500,  240035.500) 
Lower Left  (  663144.500,  231974.500) 
Upper Right (  669559.500,  240035.500) 
Lower Right (  669559.500,  231974.500) 
Center      (  666352.000,  236005.000) 
Band 1 Block=1024x128 Type=Byte, ColorInterp=Red
 Minimum=0.000, Maximum=255.000, Mean=97.677, StdDev=49.163
 Overviews: 3208x4031, 1604x2016, 802x1008, 401x504
Band 2 Block=1024x128 Type=Byte, ColorInterp=Green
 Minimum=0.000, Maximum=255.000, Mean=97.555, StdDev=49.371
 Overviews: 3208x4031, 1604x2016, 802x1008, 401x504
Band 3 Block=1024x128 Type=Byte, ColorInterp=Blue
 Minimum=0.000, Maximum=255.000, Mean=97.402, StdDev=49.024
 Overviews: 3208x4031, 1604x2016, 802x1008, 401x504

Thanks much!

--Adam



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110211/6c7166e6/attachment.html
From jrepetto at free.fr  Fri Feb 11 13:59:36 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Fri Feb 11 13:59:45 2011
Subject: [gdal-dev] gdapwarp problem
In-Reply-To: <52CBDA34-B283-4064-9919-C51A2C395D20@exponent.com>
References: <52CBDA34-B283-4064-9919-C51A2C395D20@exponent.com>
Message-ID: <4D558718.4060509@free.fr>

On 02/11/11 19:20, Adam Dershowitz, Ph.D., P.E. wrote:
> +proj=omerc +lat_0=0 +lonc=0 +alpha=0 +k=1 +x_0=0 +y_0=0 +ellps=GRS80
> +datum=NAD83 +units=m +no_defs

Hello,

PROJ.4 is more verbose about the problem:

$ proj +proj=omerc +lat_0=0 +lonc=0 +alpha=0 +k=1 +x_0=0 +y_0=0 
+ellps=GRS80 +datum=NAD83 +units=m +no_defs
Rel. 4.7.1, 23 September 2009
<proj>:
projection initialization failure
cause: lat_0 = 0 or 90 or alpha = 90

Jean-Claude

From adershowitz at exponent.com  Fri Feb 11 14:12:01 2011
From: adershowitz at exponent.com (Adam Dershowitz, Ph.D., P.E.)
Date: Fri Feb 11 14:12:08 2011
Subject: [gdal-dev] gdapwarp problem
In-Reply-To: <4D558718.4060509@free.fr>
References: <52CBDA34-B283-4064-9919-C51A2C395D20@exponent.com>
	<4D558718.4060509@free.fr>
Message-ID: <E446CA04-077E-4B73-89E3-DDBFADE73BF9@exponent.com>



On Feb 11, 2011, at 10:59 AM, Jean-Claude Repetto wrote:

> On 02/11/11 19:20, Adam Dershowitz, Ph.D., P.E. wrote:
>> +proj=omerc +lat_0=0 +lonc=0 +alpha=0 +k=1 +x_0=0 +y_0=0 +ellps=GRS80
>> +datum=NAD83 +units=m +no_defs
> 
> Hello,
> 
> PROJ.4 is more verbose about the problem:
> 
> $ proj +proj=omerc +lat_0=0 +lonc=0 +alpha=0 +k=1 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs
> Rel. 4.7.1, 23 September 2009
> <proj>:
> projection initialization failure
> cause: lat_0 = 0 or 90 or alpha = 90
> 
> Jean-Claude
> 

Thanks.  I see that, but I am not sure why, or what to do about it.  I do see that gdalinfo does display 0 for latitude, but also has other information.  Does this mean that the file is defective?  Or that there is a problem with gdalwarp?  
Is there some way, based on the information that gdalinfo is displaying that I can "correct" this?  

Thanks,

--Adam 
From warmerdam at pobox.com  Fri Feb 11 17:23:51 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 11 17:23:54 2011
Subject: [gdal-dev] MSVC warnings changes
Message-ID: <4D55B6F7.5050305@pobox.com>

Folks,

I have spent several hours today cleaning up warnings when building with
Microsoft Visual C++.

The first step was to move warning suppression out of gdal/port/cpl_port.h
and instead passing warning suppression via the compiler commandline line.
This is accomplished by setting of the WARNFLAGS macro in nmake.opt with
a warning level (/W4 now) and a set of specific warnings to be disabled
(using /wd4127, etc).  Moving the disabling out of cpl_port.h is important
because it means GDAL policy of disabling some warnings will not impact
applications including gdal.h.

The warning I have disabled are things I feel are reasonable practice and
not worth seeing as warnings.  Mostly this is the same as the warnings
disabled in cpl_port.h, but I have add a few including warnings related
to signed/unsigned comparison mismatches.  These drive me nuts and have not
(for me) yet lead to identifying a real error.

I have also introduced the SOFTWARNFLAGS macro.  This disables a bunch more
warnings, and is used in some of the submakefiles building code from external
sources that we can't practically alter.  This includes stuff like zlib,
and libjpeg.

I have made a variety substantial pass over the GDAL source tree building
with MS Visual Studio 2008 Express Edition and trying to adjust the code to
clean away warnings and in a few cases adding extra local warning disablers
either in makefiles or using the pragma in the code.   These changes can
mostly be seen in these commits:

   http://trac.osgeo.org/gdal/changeset/21684
   http://trac.osgeo.org/gdal/changeset/21680

The main warnings I'm still aware of are related to the MITAB and AVCE00
libraries.  These changes need to be upstreamed and were sufficiently involved
that I put them off.   Beyond that I was able to get a pretty much warning
free build on /W4.

Going forward I am hoping we can balance appropriate choice of warnings
to suppress globally and adjustments to the code to keep our windows
build warning-clean.  Hopefully this will help us be more vigilant  in
addressing new warnings that do pop up.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Feb 11 17:27:10 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 11 17:27:13 2011
Subject: [gdal-dev] nmake.local on windows builds
Message-ID: <4D55B7BE.8090204@pobox.com>

Folks,

Some time ago Tamas added a mechanism to nmake.opt (the central include
file for windows MSVC nmake based makefiles) so that you could provide
an extra definition file on the commandline.

eg.
  nmake -f makefile.vc EXT_NMAKE_OPT=mynmake.opt

While this is useful, expecially in cases where it is desirable to
have several build configurations out of one tree, I never used it.  I
always just adding "!INCLUDE nmake.osgeo4w" or "!INCLUDE nmake.frank"
at the beginning of nmake.opt and put my definitions in that new file.

With Kirk's recent introduction of a complicated nmake.opt file for the
MrSID driver, I've learned that you can check for the existance of a
file in an nmake !IF EXISTS directive, and I have incorporated use of this
in nmake.opt to pull in "nmake.local" if it exists.

So going forward, I'm hoping the default way of tailoring windows builds
will be to create an nmake.local file overriding definitions from nmake.opt.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From adershowitz at exponent.com  Fri Feb 11 17:40:03 2011
From: adershowitz at exponent.com (Adam Dershowitz, Ph.D., P.E.)
Date: Fri Feb 11 17:40:06 2011
Subject: [gdal-dev] Re: gdapwarp problem
In-Reply-To: <52CBDA34-B283-4064-9919-C51A2C395D20@exponent.com>
References: <52CBDA34-B283-4064-9919-C51A2C395D20@exponent.com>
Message-ID: <E29FA4ED-DD60-43AF-A09A-95AA9B06A89A@exponent.com>



On Feb 11, 2011, at 10:20 AM, Adam Dershowitz, Ph.D., P.E. wrote:

> I am having a problem trying to use gdalwarp.  Perhaps I am just missing something, but I figured I would see if someone can help.  
> 
> I downloaded some aerial imagery from here:
> http://www.michigan.gov/dnr/0,1607,7-153-10371_14546-30211--,00.html
> 
> I want to import it into a UTM zone 17 project.  So I did the following:
> gdalwarp -t_srs '+proj=utm +zone=17 +datum=WGS84' input.sid output_utm.sid
> 
> gdapwarp responds with an error, but then continues with the conversion:
> ERROR 6: Failed to initialize PROJ.4 with `+proj=omerc +lat_0=0 +lonc=0 +alpha=0 +k=1 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs '.
> lat_0 = 0 or 90 or alpha = 90
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> It does complete, but the area of interest is in the range of UTM (254500,4734000) and the output of gdalwarp is around 663144,240035.  
> 
> Any suggestions for what I might be doing wrong?  
> 
> 
> If I do gdalinfo on the original file here is what I get:
> 
> 
> 


I googled around some and it looks like this is actually an issue with the Michigan projection in Proj4.  

I found this link:
http://www.osgeo.org/pipermail/mapserver-users/2006-July/018292.html

And this seems to give reasonable results, based on the above:

gdalwarp -t_srs '+proj=utm +zone=17 +datum=WGS84' -s_srs '+proj=omerc +lat_0=45.309166667 +lonc=-86.0 +alpha=337.255555556 +k=0.9996 +x_0=499839.8337 +y_0=528600.2398 +ellps=GRS80 +datum=NAD83 +units=m' oakgrove_sw.sid oakgrove_sw_utm.tifg

So, I am not really sure about the source of these numbers, but it does look pretty close.

--Adam
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110211/1edabc2b/attachment.html
From mgleahy at alumni.uwaterloo.ca  Fri Feb 11 18:05:25 2011
From: mgleahy at alumni.uwaterloo.ca (Mike Leahy)
Date: Fri Feb 11 18:05:31 2011
Subject: [gdal-dev] Re: gdal-dev Digest, Vol 81, Issue 27
In-Reply-To: <20110211170011.B92F7E022C5@lists.osgeo.org>
References: <20110211170011.B92F7E022C5@lists.osgeo.org>
Message-ID: <201102111805.26254.mgleahy@alumni.uwaterloo.ca>

Hi Joris,

You're ahead of me already, as I don't have any real experience with C/C++.

However, I would be interested to see specifically how you're getting the 
SpatialReference objects to work...since I'm at least able to compile and load 
that particular module.  Do you have a bit of sample code that can demonstrate 
this?  As I noted in a previous post to this list, I seem to get zeros 
returned by the relevant functions...so either the compiled module I have 
isn't working right, or I'm not using it right.  It would be helpful if I 
could compare my tests with the way you've done it.

Best regards,
Mike

On Friday, February 11, 2011 12:00:11  Joris van de Sande wrote:
> Date: Fri, 11 Feb 2011 12:50:41 +0100
> From: Joris van de Sande <joris.devplace@gmail.com>
> Subject: [gdal-dev] Reviving the PHP Bindings
> To: gdal-dev@lists.osgeo.org
> 
> Message-ID:
>         <AANLkTin4SjA8uqswvFY9E0ZKV86esfYdgrB=uAaXHrtP@mail.gmail.com>
> 
> Content-Type: text/plain; charset=ISO-8859-1
> 
> Hello,
> 
> This is a reply to the PHP Bindings thread that has been started by
> Mike Leahy.I have just registered with the list, so I was not able to
> reply to the thread.
> 
> I am also interested in getting the PHP bindings for GDAL up to date.
> Right now we're using the gdal command line utilities a lot from
> within PHP. We're relying on regular expressions to parse the output
> at the moment. So it would make development a lot easier if we could
> use the internal GDAL classes and functions from within PHP.
> 
> A few months ago I have created a little PHP module that converts
> projection strings from wkt to proj format (and vice versa) using the
> SpatialReference class. But it would be great if more functionality
> could be used from inside PHP.
> 
> What can be done to revive the PHP bindings? Are more people interested
> 
> I am a PHP developer with some knowledge of C/C++. My main interest at
> the moment are:
> 1. Using the SpatialReference class from within PHP
> 2. Retrieving map(meta)data like gdalinfo does from within PHP
> 
> Regards,
> Joris van de Sande
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110211/71553f2a/attachment.html
From szekerest at gmail.com  Fri Feb 11 18:56:15 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Feb 11 18:56:19 2011
Subject: [gdal-dev] nmake.local on windows builds
In-Reply-To: <4D55B7BE.8090204@pobox.com>
References: <4D55B7BE.8090204@pobox.com>
Message-ID: <AANLkTi=qB+01_SeZopkBvSaLaKpGJ32nLpWXNbpvt0KV@mail.gmail.com>

Frank,

While I'm not sure about what changes you intend to do here, I would
emphatically disagree removing the current approach with the ability of
setting the full path to the external configuration file from the nmake
command line. My build system is higly depend on this setting and if we
don't have any compelling reason I would like to avoid relocating this
custom file (which is anyway generated dynamically) into the gdal source
tree.


Best regards,

Tamas



2011/2/11 Frank Warmerdam <warmerdam@pobox.com>

> Folks,
>
> Some time ago Tamas added a mechanism to nmake.opt (the central include
> file for windows MSVC nmake based makefiles) so that you could provide
> an extra definition file on the commandline.
>
> eg.
>  nmake -f makefile.vc EXT_NMAKE_OPT=mynmake.opt
>
> While this is useful, expecially in cases where it is desirable to
> have several build configurations out of one tree, I never used it.  I
> always just adding "!INCLUDE nmake.osgeo4w" or "!INCLUDE nmake.frank"
> at the beginning of nmake.opt and put my definitions in that new file.
>
> With Kirk's recent introduction of a complicated nmake.opt file for the
> MrSID driver, I've learned that you can check for the existance of a
> file in an nmake !IF EXISTS directive, and I have incorporated use of this
> in nmake.opt to pull in "nmake.local" if it exists.
>
> So going forward, I'm hoping the default way of tailoring windows builds
> will be to create an nmake.local file overriding definitions from
> nmake.opt.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110212/7b60fffd/attachment.html
From warmerdam at pobox.com  Fri Feb 11 18:59:36 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 11 18:59:42 2011
Subject: [gdal-dev] nmake.local on windows builds
In-Reply-To: <AANLkTi=qB+01_SeZopkBvSaLaKpGJ32nLpWXNbpvt0KV@mail.gmail.com>
References: <4D55B7BE.8090204@pobox.com>
	<AANLkTi=qB+01_SeZopkBvSaLaKpGJ32nLpWXNbpvt0KV@mail.gmail.com>
Message-ID: <4D55CD68.1030208@pobox.com>

On 11-02-11 06:56 PM, Tamas Szekeres wrote:
> Frank,
>
> While I'm not sure about what changes you intend to do here, I would
> emphatically disagree removing the current approach with the ability of setting
> the full path to the external configuration file from the nmake command line.
> My build system is higly depend on this setting and if we don't have any
> compelling reason I would like to avoid relocating this custom file (which is
> anyway generated dynamically) into the gdal source tree.


Tamas,

I did not remove the support for EXT_NMAKE_OPT - the first stuff in
nmake.opt now looks like:

###############################################################################
# For convenience, user may put custom settings in a local settings file
# named nmake.local, or a name defined by the EXT_NMAKE_OPT option.

!IF EXIST("$(GDAL_ROOT)\nmake.local")
!INCLUDE $(GDAL_ROOT)\nmake.local
!ENDIF

# nmake -f makefile.vc EXT_NMAKE_OPT=mynmake.opt
!IFDEF EXT_NMAKE_OPT
!INCLUDE $(EXT_NMAKE_OPT)
!ENDIF

I believe this will serve both needs smoothly, albeit with a little
extra complication in the nmake.opt.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From szekerest at gmail.com  Sat Feb 12 07:28:35 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat Feb 12 07:28:37 2011
Subject: [gdal-dev] nmake.local on windows builds
In-Reply-To: <4D55CD68.1030208@pobox.com>
References: <4D55B7BE.8090204@pobox.com>
	<AANLkTi=qB+01_SeZopkBvSaLaKpGJ32nLpWXNbpvt0KV@mail.gmail.com>
	<4D55CD68.1030208@pobox.com>
Message-ID: <AANLkTikfQS0AdeCiqccW9ckE_i30VJeKG2wj2YxpY=Py@mail.gmail.com>

Looks good.

Tamas



2011/2/12 Frank Warmerdam <warmerdam@pobox.com>

> On 11-02-11 06:56 PM, Tamas Szekeres wrote:
>
>> Frank,
>>
>> While I'm not sure about what changes you intend to do here, I would
>> emphatically disagree removing the current approach with the ability of
>> setting
>> the full path to the external configuration file from the nmake command
>> line.
>> My build system is higly depend on this setting and if we don't have any
>> compelling reason I would like to avoid relocating this custom file (which
>> is
>> anyway generated dynamically) into the gdal source tree.
>>
>
>
> Tamas,
>
> I did not remove the support for EXT_NMAKE_OPT - the first stuff in
> nmake.opt now looks like:
>
>
> ###############################################################################
> # For convenience, user may put custom settings in a local settings file
> # named nmake.local, or a name defined by the EXT_NMAKE_OPT option.
>
> !IF EXIST("$(GDAL_ROOT)\nmake.local")
> !INCLUDE $(GDAL_ROOT)\nmake.local
> !ENDIF
>
> # nmake -f makefile.vc EXT_NMAKE_OPT=mynmake.opt
> !IFDEF EXT_NMAKE_OPT
> !INCLUDE $(EXT_NMAKE_OPT)
> !ENDIF
>
> I believe this will serve both needs smoothly, albeit with a little
> extra complication in the nmake.opt.
>
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110212/fcde38e6/attachment.html
From joris.devplace at gmail.com  Sat Feb 12 08:19:06 2011
From: joris.devplace at gmail.com (Joris van de Sande)
Date: Sat Feb 12 08:19:08 2011
Subject: [gdal-dev] Re: Reviving the PHP Bindings
Message-ID: <AANLkTi=8VtWxMSnh9TmutqrYypUFwk8aUJyebObnPDyG@mail.gmail.com>

Hi Mike,

I didn't use the PHP bindings that come with GDAL, because at that
time I didn't know about it's existence.

I created a little C file with 2 functions in it. One to convert from
proj4 to WKT and the second function converted WKT format to proj4.
See the attachment for the source code. I have used the GDAL C++ API
as you will see in the source code.

>From that C file I created a PHP module with SWIG.

I have played with the PHP bindings of GDAL yesterday. A lot of work
must be done to make the PHP bindings up to date. The main reason that
not everything is working as expected with the PHP bindings is because
of incomplete SWIG typemaps (that's my conclusion). Compared to the
python bindings, a lot is missing in the PHP bindings.

It's too much work to make the PHP bindings up to date at once. So in
my opinion the best solution is to determine in which order the
various GDAL parts should be implemented in the PHP bindings.

-Joris

On Sat, Feb 12, 2011 at 12:05 AM, Mike Leahy
<mgleahy@alumni.uwaterloo.ca> wrote:
> Hi Joris,
>
> You're ahead of me already, as I don't have any real experience with C/C++.
>
> However, I would be interested to see specifically how you're getting the
> SpatialReference objects to work...since I'm at least able to compile and
> load that particular module. Do you have a bit of sample code that can
> demonstrate this? As I noted in a previous post to this list, I seem to get
> zeros returned by the relevant functions...so either the compiled module I
> have isn't working right, or I'm not using it right. It would be helpful if
> I could compare my tests with the way you've done it.
>
> Best regards,
>
> Mike
>
> On Friday, February 11, 2011 12:00:11 Joris van de Sande wrote:
>
>> Date: Fri, 11 Feb 2011 12:50:41 +0100
>
>> From: Joris van de Sande <joris.devplace@gmail.com>
>
>> Subject: [gdal-dev] Reviving the PHP Bindings
>
>> To: gdal-dev@lists.osgeo.org
>
>>
>
>> Message-ID:
>
>> <AANLkTin4SjA8uqswvFY9E0ZKV86esfYdgrB=uAaXHrtP@mail.gmail.com>
>
>>
>
>> Content-Type: text/plain; charset=ISO-8859-1
>
>>
>
>> Hello,
>
>>
>
>> This is a reply to the PHP Bindings thread that has been started by
>
>> Mike Leahy.I have just registered with the list, so I was not able to
>
>> reply to the thread.
>
>>
>
>> I am also interested in getting the PHP bindings for GDAL up to date.
>
>> Right now we're using the gdal command line utilities a lot from
>
>> within PHP. We're relying on regular expressions to parse the output
>
>> at the moment. So it would make development a lot easier if we could
>
>> use the internal GDAL classes and functions from within PHP.
>
>>
>
>> A few months ago I have created a little PHP module that converts
>
>> projection strings from wkt to proj format (and vice versa) using the
>
>> SpatialReference class. But it would be great if more functionality
>
>> could be used from inside PHP.
>
>>
>
>> What can be done to revive the PHP bindings? Are more people interested
>
>>
>
>> I am a PHP developer with some knowledge of C/C++. My main interest at
>
>> the moment are:
>
>> 1. Using the SpatialReference class from within PHP
>
>> 2. Retrieving map(meta)data like gdalinfo does from within PHP
>
>>
>
>> Regards,
>
>> Joris van de Sande
-------------- next part --------------
A non-text attachment was scrubbed...
Name: wkt_proj.cpp
Type: text/x-c++src
Size: 1324 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110212/756c0441/wkt_proj.bin
From even.rouault at mines-paris.org  Sat Feb 12 08:23:48 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Feb 12 08:23:55 2011
Subject: [gdal-dev] GDAL/OGR (skeleton of) Python API documentation
	available on http://gdal.org/python/
Message-ID: <201102121423.48489.even.rouault@mines-paris.org>

Hi,

just to mention you can now find a GDAL/OGR Python API documentation on 
http://gdal.org/python/ . http://trac.osgeo.org/gdal/wiki/GdalOgrInPython has 
been updated to point to it.

Disclaimer: don't expect too much of it. This is just the result of a run of 
epydoc on the osgeo module. You will essentially get the names of available 
classes and methods, but very few descriptions of what they do (except for OGR 
classes where the OGR C documentation is copied).

Best regards,

Even
From mohammedrashadkm at gmail.com  Sat Feb 12 09:52:35 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Sat Feb 12 09:53:18 2011
Subject: [gdal-dev] gdal convert shape to raster
Message-ID: <AANLkTi=2cNVBBSOt7ZEHoXBSHgK8meECp5F2NoK3B86F@mail.gmail.com>

How to convert shapefile to raster using gdal or gdal_rasterize

-- 
Thanks && Regards
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110212/4ebca2bd/attachment.html
From chaitanya.ch at gmail.com  Sat Feb 12 09:56:54 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Feb 12 09:56:57 2011
Subject: [gdal-dev] gdal convert shape to raster
In-Reply-To: <AANLkTi=2cNVBBSOt7ZEHoXBSHgK8meECp5F2NoK3B86F@mail.gmail.com>
References: <AANLkTi=2cNVBBSOt7ZEHoXBSHgK8meECp5F2NoK3B86F@mail.gmail.com>
Message-ID: <AANLkTikpm=q7e_T9-jjJ5+QEFbwaRc1oaoE01-+v5sJE@mail.gmail.com>

Rashad,

Look at the examples in it's doc page.
http://www.gdal.org/gdal_rasterize.html

On Sat, Feb 12, 2011 at 8:22 PM, Mohammed Rashad <mohammedrashadkm@gmail.com
> wrote:

> How to convert shapefile to raster using gdal or gdal_rasterize
>
> --
> Thanks && Regards
> Rashad
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110212/df0aa331/attachment.html
From pcorti at gmail.com  Sat Feb 12 11:39:47 2011
From: pcorti at gmail.com (Paolo Corti)
Date: Sat Feb 12 11:41:56 2011
Subject: [gdal-dev] GDAL/OGR (skeleton of) Python API documentation
	available on http://gdal.org/python/
In-Reply-To: <201102121423.48489.even.rouault@mines-paris.org>
References: <201102121423.48489.even.rouault@mines-paris.org>
Message-ID: <4999231629354381192@unknownmsgid>

> .
>
> Disclaimer: don't expect too much of it. This is just the result of a run of
> epydoc on the osgeo module. You will essentially get the names of available
> classes and methods, but very few descriptions of what they do (except for OGR
> classes where the OGR C documentation is copied).
>
> Best regards,
>

Hey Even
Thanks for your great effort!
Even if it is a very basic starting point, I think this an excellent
resources for people using Python bindings
P
From chaitanya.ch at gmail.com  Sat Feb 12 11:49:36 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Feb 12 11:49:38 2011
Subject: [gdal-dev] gdal convert shape to raster
In-Reply-To: <AANLkTinOV0mc0i6jP4mEPYiKnn4NuxSx9CQsyvqj_SFj@mail.gmail.com>
References: <AANLkTi=2cNVBBSOt7ZEHoXBSHgK8meECp5F2NoK3B86F@mail.gmail.com>
	<AANLkTikpm=q7e_T9-jjJ5+QEFbwaRc1oaoE01-+v5sJE@mail.gmail.com>
	<AANLkTik=hvxiHAmyrjXakorntP2rbikKypvJ5_yAfE+=@mail.gmail.com>
	<AANLkTinPVwEDfhz19oktVEnO25a3HvtmpbXg0hTuvyBS@mail.gmail.com>
	<AANLkTinOV0mc0i6jP4mEPYiKnn4NuxSx9CQsyvqj_SFj@mail.gmail.com>
Message-ID: <AANLkTik-3km8pDGqz6oMNmxGhOLM4-eQV9anN5ckeNk1@mail.gmail.com>

Rashad,

You did not send me raster you are writing to. If you are creating the
raster with gdal_rasterize, remove the -b options.

On Sat, Feb 12, 2011 at 8:47 PM, Mohammed Rashad <mohammedrashadkm@gmail.com
> wrote:

> gdal_rasterize -b 1 -b 2 -b 3 -burn 255 -burn 0 -burn 0 -l ernakulam
> data/ernakulam.shp gtopo30_shade.tif
>
>
> On Sat, Feb 12, 2011 at 8:30 PM, Chaitanya kumar CH <chaitanya.ch@
> gmail.com> wrote:
>
>> Send me a small shapefile you used along with the command you used on it.
>>
>>
>> On Sat, Feb 12, 2011 at 8:27 PM, Mohammed Rashad <
>> mohammedrashadkm@gmail.com> wrote:
>>
>>> i tried the examples but no output
>>>
>>>
>>> On Sat, Feb 12, 2011 at 8:26 PM, Chaitanya kumar CH <chaitanya.ch@
>>> gmail.com> wrote:
>>>
>>>> Rashad,
>>>>
>>>> Look at the examples in it's doc page.
>>>> http://www.gdal.org/gdal_rasterize.html
>>>>
>>>> On Sat, Feb 12, 2011 at 8:22 PM, Mohammed Rashad <
>>>> mohammedrashadkm@gmail.com> wrote:
>>>>
>>>>> How to convert shapefile to raster using gdal or gdal_rasterize
>>>>>
>>>>> --
>>>>> Thanks && Regards
>>>>> Rashad
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Best regards,
>>>> Chaitanya kumar CH.
>>>> /t?a???nj?/ /k?m?r/
>>>> +91-9494447584
>>>> 17.2416N 80.1426E
>>>>
>>>
>>>
>>>
>>> --
>>> Thanks && Regards
>>> Rashad
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>> /t?a???nj?/ /k?m?r/
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>
>
> --
> Thanks && Regards
> Rashad
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110212/e9782063/attachment-0001.html
From massimodisasha at gmail.com  Sat Feb 12 23:57:24 2011
From: massimodisasha at gmail.com (Massimo Di Stefano)
Date: Sat Feb 12 23:57:30 2011
Subject: [gdal-dev] generate vrt from grass data
Message-ID: <A1C1EF87-8BB7-43DF-946E-756355854109@gmail.com>

Hi All

i'm using python-gdal to generate vrt file, it works fine but for some data like  :

(from the spearfish dataset) the raster file :

spearfish60/PERMANENT/cellhd/tractids


gdalinfo give me : 


http://www.geofemengineering.it/data/vrtlog.txt

tring to generate a vrt freeze my shell and i have to force quit it.

i tested it on osx 10.6.6 (gdal.framework,  grass6.5.svn)

and on linux debian sid (gdal svn , grass65 svn)

i got the same results ( ctrl+D ctrl+C doesn't work, force quit the shell)


From mohammedrashadkm at gmail.com  Sun Feb 13 05:41:20 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Sun Feb 13 05:42:02 2011
Subject: [gdal-dev] convert shapefile to raster
Message-ID: <AANLkTikCs7DGV8cKsobRg3B2jHcBf5SFmw_W1mORjiLx@mail.gmail.com>

How to convert shapefile to a raster image using gdal

I tried
gdal_rasterize -burn 255 -burn 0 -burn 0 -ts 100 100 -l ernakulam
ernakulam.shp ekm.tif

gdal_rasterize -A DIST -ts 100 100 -l ernakulam ernakulam.shp ekm.tif

gdal_rasterize -A AREA -ts 100 100 -l ernakulam ernakulam.shp ekm.tif

but still no output



ogrinfo -al -so ernakulam.shp

INFO: Open of `ernakulam.shp'
     using driver `ESRI Shapefile' successful.

Layer name: ernakulam
Geometry: Polygon
Feature Count: 16
Extent: (76.168263, 9.788524) - (76.840498, 10.301794)
Layer SRS WKT:
(unknown)
AREA: Real (20.15)
PERIMETER: Real (20.15)
INDIA_: Real (11.0)
INDIA_ID: Real (11.0)
STATE: String (20.0)
DIST: String (20.0)
TALUK: String (20.0)
CENTROID_Y: Real (20.15)
CENTROID_X: Real (20.15)
i selected AREA

-- 
Thanks && Regards
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110213/b760886f/attachment.html
From chaitanya.ch at gmail.com  Sun Feb 13 05:56:05 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Feb 13 05:56:10 2011
Subject: [gdal-dev] convert shapefile to raster
In-Reply-To: <AANLkTikCs7DGV8cKsobRg3B2jHcBf5SFmw_W1mORjiLx@mail.gmail.com>
References: <AANLkTikCs7DGV8cKsobRg3B2jHcBf5SFmw_W1mORjiLx@mail.gmail.com>
Message-ID: <AANLkTi=Hu6MHw5d-vp0xyEno090GcbN7Wujd6Bh976uO@mail.gmail.com>

Rashad,

This would probably give you a Float64 type bands with the pixels valued at
255.0
Try setting the band type to Byte using the -ot option.

On Sun, Feb 13, 2011 at 4:11 PM, Mohammed Rashad <mohammedrashadkm@gmail.com
> wrote:

>
> How to convert shapefile to a raster image using gdal
>
> I tried
> gdal_rasterize -burn 255 -burn 0 -burn 0 -ts 100 100 -l ernakulam
> ernakulam.shp ekm.tif
>
> gdal_rasterize -A DIST -ts 100 100 -l ernakulam ernakulam.shp ekm.tif
>
> gdal_rasterize -A AREA -ts 100 100 -l ernakulam ernakulam.shp ekm.tif
>
> but still no output
>
>
>
> ogrinfo -al -so ernakulam.shp
>
> INFO: Open of `ernakulam.shp'
>      using driver `ESRI Shapefile' successful.
>
> Layer name: ernakulam
> Geometry: Polygon
> Feature Count: 16
> Extent: (76.168263, 9.788524) - (76.840498, 10.301794)
> Layer SRS WKT:
> (unknown)
> AREA: Real (20.15)
> PERIMETER: Real (20.15)
> INDIA_: Real (11.0)
> INDIA_ID: Real (11.0)
> STATE: String (20.0)
> DIST: String (20.0)
> TALUK: String (20.0)
> CENTROID_Y: Real (20.15)
> CENTROID_X: Real (20.15)
> i selected AREA
>
> --
> Thanks && Regards
> Rashad
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110213/9f9f6a67/attachment.html
From even.rouault at mines-paris.org  Sun Feb 13 13:40:20 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Feb 13 13:40:29 2011
Subject: [gdal-dev] generate vrt from grass data
In-Reply-To: <A1C1EF87-8BB7-43DF-946E-756355854109@gmail.com>
References: <A1C1EF87-8BB7-43DF-946E-756355854109@gmail.com>
Message-ID: <201102131940.20365.even.rouault@mines-paris.org>

Le dimanche 13 f?vrier 2011 05:57:24, Massimo Di Stefano a ?crit :
> Hi All
> 
> i'm using python-gdal to generate vrt file, it works fine but for some data
> like  :
> 
> (from the spearfish dataset) the raster file :
> 
> spearfish60/PERMANENT/cellhd/tractids
> 
> 
> gdalinfo give me :
> 
> 
> http://www.geofemengineering.it/data/vrtlog.txt
> 
> tring to generate a vrt freeze my shell and i have to force quit it.
> 
> i tested it on osx 10.6.6 (gdal.framework,  grass6.5.svn)
> 
> and on linux debian sid (gdal svn , grass65 svn)
> 
> i got the same results ( ctrl+D ctrl+C doesn't work, force quit the shell)

Should be fixed by http://trac.osgeo.org/gdal/ticket/3961

The huge color table revealed quadratic performance in the XML serialization.

> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From brfr at metrico.lu  Mon Feb 14 01:48:33 2011
From: brfr at metrico.lu (Frank Broniewski)
Date: Mon Feb 14 01:48:38 2011
Subject: [gdal-dev] GDAL/OGR (skeleton of) Python API
	documentation	available on http://gdal.org/python/
In-Reply-To: <201102121423.48489.even.rouault@mines-paris.org>
References: <201102121423.48489.even.rouault@mines-paris.org>
Message-ID: <4D58D041.10106@metrico.lu>

Wow, cool! Thank you very much!

Frank


Am 12.02.2011 14:23, schrieb Even Rouault:
> Hi,
>
> just to mention you can now find a GDAL/OGR Python API documentation on
> http://gdal.org/python/ . http://trac.osgeo.org/gdal/wiki/GdalOgrInPython has
> been updated to point to it.
>
> Disclaimer: don't expect too much of it. This is just the result of a run of
> epydoc on the osgeo module. You will essentially get the names of available
> classes and methods, but very few descriptions of what they do (except for OGR
> classes where the OGR C documentation is copied).
>
> Best regards,
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
From jmckenna at gatewaygeomatics.com  Mon Feb 14 08:54:27 2011
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Mon Feb 14 08:54:31 2011
Subject: [gdal-dev] nmake.local on windows builds
In-Reply-To: <4D55B7BE.8090204@pobox.com>
References: <4D55B7BE.8090204@pobox.com>
Message-ID: <4D593413.2040005@gatewaygeomatics.com>

I personally have always just modified the nmake.opt.  I am not sure 
what is recommended now.  Can someone verify that the new recommended 
way is to create a 'nmake.local' file and then execute 'nmake /f 
makefile.vc' ?

-jeff



On 11-02-11 6:27 PM, Frank Warmerdam wrote:
> Folks,
>
> Some time ago Tamas added a mechanism to nmake.opt (the central include
> file for windows MSVC nmake based makefiles) so that you could provide
> an extra definition file on the commandline.
>
> eg.
> nmake -f makefile.vc EXT_NMAKE_OPT=mynmake.opt
>
> While this is useful, expecially in cases where it is desirable to
> have several build configurations out of one tree, I never used it. I
> always just adding "!INCLUDE nmake.osgeo4w" or "!INCLUDE nmake.frank"
> at the beginning of nmake.opt and put my definitions in that new file.
>
> With Kirk's recent introduction of a complicated nmake.opt file for the
> MrSID driver, I've learned that you can check for the existance of a
> file in an nmake !IF EXISTS directive, and I have incorporated use of this
> in nmake.opt to pull in "nmake.local" if it exists.
>
> So going forward, I'm hoping the default way of tailoring windows builds
> will be to create an nmake.local file overriding definitions from
> nmake.opt.
>
> Best regards,


-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/


From webmaster at spaceyes.fr  Mon Feb 14 10:22:44 2011
From: webmaster at spaceyes.fr (=?iso-8859-1?Q?Fr=E9d=E9ric_Trastour?=)
Date: Mon Feb 14 10:30:16 2011
Subject: [gdal-dev] nmake.local on windows builds
In-Reply-To: <4D55B7BE.8090204@pobox.com>
References: <4D55B7BE.8090204@pobox.com>
Message-ID: <01c301cbcc5b$07e72470$17b56d50$@fr>

Frank,

IMHO, something that is missing in the actual build system is a way to allow
the user to specify additional libraries to link with without modifying
nmake.opt.
It is possible to specify some include folders with EXTRAFLAGS but no way to
initialize for example the ADD_LIBS variable.
This should be possible with a very minor change to nmake.opt :

Just replace the line :

	# Any extra libraries needed on this platform?
	ADD_LIBS	= 

With something like :

	# Any extra libraries needed on this platform?
	ADD_LIBS	= $(ADD_LIBS)

With that, it is possible to specify additional libraries in nmake.opt or in
the EXT_NMAKE_OPT file.
For example :

	#
	# JPEG LS (lossless jpeg)
	#
	EXTRAFLAGS = $(EXTRAFLAGS) -DFRMT_jpegls
	HAVE_CHARLS = yes
	CHARLS_INC  = -I$(3RDPARTY)/CharLS-1.0
	CHARLS_LIB  = $(3RDPARTY)/CharLS-1.0/$(BUILD_MODE)/CharLS.lib

	ADD_LIBS = $(ADD_LIBS) $(CHARLS_LIB)

Best regards, 

Fr?d?ric.

> -----Message d'origine-----
> De?: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-
> bounces@lists.osgeo.org] De la part de Frank Warmerdam
> Envoy??: vendredi 11 f?vrier 2011 23:27
> ??: gdal-dev
> Objet?: [gdal-dev] nmake.local on windows builds
> 
> Folks,
> 
> Some time ago Tamas added a mechanism to nmake.opt (the central include
> file for windows MSVC nmake based makefiles) so that you could provide
> an extra definition file on the commandline.
> 
> eg.
>   nmake -f makefile.vc EXT_NMAKE_OPT=mynmake.opt
> 
> While this is useful, expecially in cases where it is desirable to
> have several build configurations out of one tree, I never used it.  I
> always just adding "!INCLUDE nmake.osgeo4w" or "!INCLUDE nmake.frank"
> at the beginning of nmake.opt and put my definitions in that new file.
> 
> With Kirk's recent introduction of a complicated nmake.opt file for the
> MrSID driver, I've learned that you can check for the existance of a
> file in an nmake !IF EXISTS directive, and I have incorporated use of this
> in nmake.opt to pull in "nmake.local" if it exists.
> 
> So going forward, I'm hoping the default way of tailoring windows builds
> will be to create an nmake.local file overriding definitions from
> nmake.opt.
> 
> Best regards,
> --
> ---------------------------------------+----------------------------------
> ----
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From scott.a.merritt at navy.mil  Mon Feb 14 12:47:11 2011
From: scott.a.merritt at navy.mil (cobalto)
Date: Mon Feb 14 12:47:14 2011
Subject: [gdal-dev] GetProjectionRef() difference 1.8 vs 1.7.2
Message-ID: <1297705631824-6024512.post@n2.nabble.com>


Migrating from GDAL 1.7.2 to GDAL 1.8.0, I noticed that
GDALDataset::GetProjectionRef() now returns an empty string "" on some cases
where it previously returned an informative WKT string. 
The file I initially noticed this on was a 10Jan2009 Worldview image in NITF
format. The image has 2 subdatasets, one of which (NITF_IM:1) is a 90x87
thumbnail, the other (NITF_IM:0) is an ~35k x 34k single band image. 

In GDAL 1.7.2, GetProjectionRef Produced an identical string for both
NITF_IM:0 and NITF_IM:1.
In GDAL 1.8.0, GetProjectionRef Produces an empty string for NITF_IM:0 and
the same string produced by 1.7.2 for NITF_IM:1. 

Any ideas as to whether this is a design change or a bug? If design change,
what is the new best practice to retreive the projection for NITF_IM:0?


 

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GetProjectionRef-difference-1-8-vs-1-7-2-tp6024512p6024512.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Mon Feb 14 14:38:03 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Feb 14 14:38:10 2011
Subject: [gdal-dev] GetProjectionRef() difference 1.8 vs 1.7.2
In-Reply-To: <1297705631824-6024512.post@n2.nabble.com>
References: <1297705631824-6024512.post@n2.nabble.com>
Message-ID: <201102142038.03749.even.rouault@mines-paris.org>

Le lundi 14 f?vrier 2011 18:47:11, cobalto a ?crit :
> Migrating from GDAL 1.7.2 to GDAL 1.8.0, I noticed that
> GDALDataset::GetProjectionRef() now returns an empty string "" on some
> cases where it previously returned an informative WKT string.
> The file I initially noticed this on was a 10Jan2009 Worldview image in
> NITF format. The image has 2 subdatasets, one of which (NITF_IM:1) is a
> 90x87 thumbnail, the other (NITF_IM:0) is an ~35k x 34k single band image.
> 
> In GDAL 1.7.2, GetProjectionRef Produced an identical string for both
> NITF_IM:0 and NITF_IM:1.
> In GDAL 1.8.0, GetProjectionRef Produces an empty string for NITF_IM:0 and
> the same string produced by 1.7.2 for NITF_IM:1.
> 
> Any ideas as to whether this is a design change or a bug? If design change,
> what is the new best practice to retreive the projection for NITF_IM:0?

Scott,

I don't recall a design change on this, but there were many changes in the 
driver between the 2 versions, so I might have missed something. What is sure 
is that GetProjectionRef() reports a projection from the information read in 
each image segment header, so it is not surprising that they can be different. 
Now I think only close inspection of the file can determine what happens and if 
it is a bug of 1.8.0 or if the driver of 1.7.2 didn't behave as expected. Or 
at the very least the output of gdalinfo NITF_IM:0:your.ntf and gdalinfo 
NITF_IM:1:your.ntf.

The output of the debug utility nitfdump (not built by default. On Linux/Unix 
go to gdal/frmts/nitf; make nitfdump) on the file could also help.

Best regards,

Even
From scott.a.merritt at navy.mil  Mon Feb 14 15:40:36 2011
From: scott.a.merritt at navy.mil (cobalto)
Date: Mon Feb 14 15:40:37 2011
Subject: [gdal-dev] Re: GetProjectionRef() difference 1.8 vs 1.7.2
In-Reply-To: <201102142038.03749.even.rouault@mines-paris.org>
References: <1297705631824-6024512.post@n2.nabble.com>
	<201102142038.03749.even.rouault@mines-paris.org>
Message-ID: <1297716036489-6025100.post@n2.nabble.com>


I'm hesitant to post the entire gdalinfo dump, but below are the changed
sections for nitf_im:0:myfile.nitf between v1.7.2 and v1.8.0 of gdalinfo
(Win64 w/ kakadu). Does this help? It seems like the info I'm after is now
in the GCP Projection rather than the coordinate system. Does this provide
any additional insight?

v1.7.2:
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AUTHORITY["EPSG","4326"]]
GeoTransform =
  -110.3506276351247, 5.274359713657748e-006, -4.110233165192119e-009
  31.74208561181177, 4.650427374265933e-008, -4.603461145144028e-006
Metadata:
<SNIP>
  NITF_PJUST=R
<SNIP>
Corner Coordinates:
Upper Left  (-110.3506276,  31.7420856) (110d21'2.26"W, 31d44'31.51"N)
Lower Left  (-110.3507665,  31.5865255) (110d21'2.76"W, 31d35'11.49"N)
Upper Right (-110.1615946,  31.7437523) (110d 9'41.74"W, 31d44'37.51"N)
Lower Right (-110.1617335,  31.5881922) (110d 9'42.24"W, 31d35'17.49"N)
Center      (-110.2561806,  31.6651389) (110d15'22.25"W, 31d39'54.50"N)


v1.8.0:
Coordinate System is `'
GCP Projection = 
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AUTHORITY["EPSG","4326"]]
GCP[  0]: Id=UpperLeft, Info=
          (0.5,0.5) -> (-110.350555555556,31.7422222222222,0)
GCP[  1]: Id=UpperRight, Info=
          (35839.5,0.5) -> (-110.161666666667,31.7436111111111,0)
GCP[  2]: Id=LowerRight, Info=
          (35839.5,33791.5) -> (-110.161666666667,31.5883333333333,0)
GCP[  3]: Id=LowerLeft, Info=
          (0.5,33791.5) -> (-110.350833333333,31.5863888888889,0)
Metadata:
<SNIP>
  NITF_PJUST=R
  NITF_ICORDS=G
  NITF_IGEOLO=314432N1102102W314437N1100942W313518N1100942W313511N1102103W
<SNIP>
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,33792.0)
Upper Right (35840.0,    0.0)
Lower Right (35840.0,33792.0)
Center      (17920.0,16896.0)

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GetProjectionRef-difference-1-8-vs-1-7-2-tp6024512p6025100.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From bcclaywell at gmail.com  Mon Feb 14 15:52:05 2011
From: bcclaywell at gmail.com (Brian Claywell)
Date: Mon Feb 14 15:52:12 2011
Subject: [gdal-dev] MrSID mask band support
Message-ID: <AANLkTikuT4ECbVDZ6UcgOoxJ3EUOir2E90pJx6yBPHft@mail.gmail.com>

I'm attempting to use CreateMaskBand() on a MrSID dataset with GDAL
1.8.0 and receiving the error that "CreateMaskBand() is not supported
on this dataset." I presume this is because mask band support was
implemented using the GDALDefaultOverviews manager, and since MrSID is
a multi-resolution format, the overview manager is never initialized.

Is there a way to make mask bands work with MrSID datasets out of the
box? Barring that, since the MrSID driver reimplements the
overview-related virtual functions to bypass the default overview
manager, would there be any harm in initializing the overview manager
when a MrSIDDataset object is created?

-b

-- 
Brian Claywell
bcclaywell@gmail.com
From even.rouault at mines-paris.org  Mon Feb 14 15:55:56 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Feb 14 15:56:03 2011
Subject: [gdal-dev] Re: GetProjectionRef() difference 1.8 vs 1.7.2
In-Reply-To: <1297716036489-6025100.post@n2.nabble.com>
References: <1297705631824-6024512.post@n2.nabble.com>
	<201102142038.03749.even.rouault@mines-paris.org>
	<1297716036489-6025100.post@n2.nabble.com>
Message-ID: <201102142155.57108.even.rouault@mines-paris.org>

Le lundi 14 f?vrier 2011 21:40:36, cobalto a ?crit :
> I'm hesitant to post the entire gdalinfo dump, but below are the changed
> sections for nitf_im:0:myfile.nitf between v1.7.2 and v1.8.0 of gdalinfo
> (Win64 w/ kakadu). Does this help? It seems like the info I'm after is now
> in the GCP Projection rather than the coordinate system. Does this provide
> any additional insight?

Yes, that helps. I think the difference in behaviour is due to 
http://trac.osgeo.org/gdal/changeset/18635/trunk/gdal/frmts/nitf which changed 
how GCPs are handled, and I think the new behaviour is appropriate.

I believe (Frank may confirm as being the commiter of this changeset) that the 
difference is is due to GDALGCPsToGeoTransform() being now called with the 
bApproxOK parameter to FALSE in 1.8.0 whereas it was set to TRUE to 1.7.X. 
Which means that in 1.7.X we would return a geotransform in all cases, even if 
the GCPs didn't determine an exact affine geotransform. Now if they don't, we 
return them in their raw form. You can still force compute an approximate 
geotransform by calling GDALGCPsToGeoTransform( nGCPCount, psGCPs,  
adfGeoTransform, TRUE ). And the projection can indeed be fetched by 
GDALGetGCPProjection() when GCPs are returned instead of a geotransform.

From acembro at yahoo.com  Mon Feb 14 16:09:20 2011
From: acembro at yahoo.com (Alain Cembro)
Date: Mon Feb 14 16:09:27 2011
Subject: [gdal-dev] Image compositing in VRT files
In-Reply-To: <AANLkTimJB7FH4aCdBtQ6bCFZMNNCdsAj1gJPCceyN4mS@mail.gmail.com>
Message-ID: <703564.78315.qm@web120413.mail.ne1.yahoo.com>

No other answers ! Does it mean that it is not possible ?


      
From even.rouault at mines-paris.org  Mon Feb 14 16:23:42 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Feb 14 16:23:50 2011
Subject: [gdal-dev] Image compositing in VRT files
In-Reply-To: <703564.78315.qm@web120413.mail.ne1.yahoo.com>
References: <703564.78315.qm@web120413.mail.ne1.yahoo.com>
Message-ID: <201102142223.43089.even.rouault@mines-paris.org>

Le lundi 14 f?vrier 2011 22:09:20, Alain Cembro a ?crit :
> No other answers ! Does it mean that it is not possible ?

Indeed, I don't believe that image compositing based on alpha band is possible 
with VRT. You could have some success if you used a RGB image with NODATA 
instead.

Otherwise to composite RGB images with RGBA images, you have to use gdalwarp 
and produce a "normal" output image (like GeoTIFF)


> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From scott.a.merritt at navy.mil  Mon Feb 14 20:30:09 2011
From: scott.a.merritt at navy.mil (cobalto)
Date: Mon Feb 14 20:30:10 2011
Subject: [gdal-dev] Re: GetProjectionRef() difference 1.8 vs 1.7.2
In-Reply-To: <201102142155.57108.even.rouault@mines-paris.org>
References: <1297705631824-6024512.post@n2.nabble.com>
	<201102142038.03749.even.rouault@mines-paris.org>
	<1297716036489-6025100.post@n2.nabble.com>
	<201102142155.57108.even.rouault@mines-paris.org>
Message-ID: <1297733409439-6025941.post@n2.nabble.com>




> You can still force compute an approximate 
> geotransform by calling GDALGCPsToGeoTransform( nGCPCount, psGCPs,  
> adfGeoTransform, TRUE ). And the projection can indeed be fetched by 
> GDALGetGCPProjection() when GCPs are returned instead of a geotransform.
> 

These NITFs contain RPCs, so I mostly am unconcerned with the geotransform,
exact or approximated. However, proper interpretation of the RPCs requires
knowledge of the projection reference. In these cases, it seems somewhat
circuitous to look for a projection reference among the GCPs. If
GDALGCPsToGeoTransform() fails to return a geotransform, would there be any
reason not to set the projection reference to the GCP projection (but to
still have GetGeoTransform() return CE_Failure)? Is the dataset projection
reference ever set to something different than the GCP Projection? 


-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GetProjectionRef-difference-1-8-vs-1-7-2-tp6024512p6025941.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From yehil at rafael.co.il  Tue Feb 15 00:17:41 2011
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Tue Feb 15 00:18:28 2011
Subject: [gdal-dev] Re: GetProjectionRef() difference 1.8 vs 1.7.2
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C06AFBDD1EAA@MAILBOXSERVER.rf.local>

From my experience, setting the georeference but leaving the transform blank will cause applications like GlobalMapper to fail reading the file (I noticed that with jp2k but I suppose it will happen with NITF as well).

Sent from my mobile
Yehiyam

-----------------------------
From: "cobalto"
Subject: [gdal-dev] Re: GetProjectionRef() difference 1.8 vs 1.7.2
Date: 15 ?????? 2011 03:29





> You can still force compute an approximate
> geotransform by calling GDALGCPsToGeoTransform( nGCPCount, psGCPs,
> adfGeoTransform, TRUE ). And the projection can indeed be fetched by
> GDALGetGCPProjection() when GCPs are returned instead of a geotransform.
>

These NITFs contain RPCs, so I mostly am unconcerned with the geotransform,
exact or approximated. However, proper interpretation of the RPCs requires
knowledge of the projection reference. In these cases, it seems somewhat
circuitous to look for a projection reference among the GCPs. If
GDALGCPsToGeoTransform() fails to return a geotransform, would there be any
reason not to set the projection reference to the GCP projection (but to
still have GetGeoTransform() return CE_Failure)? Is the dataset projection
reference ever set to something different than the GCP Projection?


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GetProjectionRef-difference-1-8-vs-1-7-2-tp6024512p6025941.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

a
**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110215/0b9b928c/attachment-0001.html
From even.rouault at mines-paris.org  Tue Feb 15 04:45:36 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb 15 04:45:46 2011
Subject: [gdal-dev] Re: GetProjectionRef() difference 1.8 vs 1.7.2
In-Reply-To: <1297733409439-6025941.post@n2.nabble.com>
References: <1297705631824-6024512.post@n2.nabble.com>
	<201102142038.03749.even.rouault@mines-paris.org>
	<1297716036489-6025100.post@n2.nabble.com>
	<201102142155.57108.even.rouault@mines-paris.org>
	<1297733409439-6025941.post@n2.nabble.com>
Message-ID: <1297763136.4d5a4b40ce6b6@webmail.free.fr>

Selon cobalto <scott.a.merritt@navy.mil>:


> These NITFs contain RPCs, so I mostly am unconcerned with the geotransform,
> exact or approximated. However, proper interpretation of the RPCs requires
> knowledge of the projection reference. In these cases, it seems somewhat
> circuitous to look for a projection reference among the GCPs. If
> GDALGCPsToGeoTransform() fails to return a geotransform, would there be any
> reason not to set the projection reference to the GCP projection (but to
> still have GetGeoTransform() return CE_Failure)? Is the dataset projection
> reference ever set to something different than the GCP Projection?

The current behaviour is consistant to the principles described in the GDAL Data
model page ( http://gdal.org/gdal_datamodel.html )

"""The coordinate system returned by GDALDataset::GetProjectionRef() describes
the georeferenced coordinates implied by the affine georeferencing transform
returned by GDALDataset::GetGeoTransform(). The coordinate system returned by
GDALDataset::GetGCPProjection() describes the georeferenced coordinates of the
GCPs returned by GDALDataset::GetGCPs().
Note that a returned coordinate system strings of "" indicates nothing is known
about the georeferencing coordinate system.
"""


>
>
> --
> View this message in context:
>
http://osgeo-org.1803224.n2.nabble.com/GetProjectionRef-difference-1-8-vs-1-7-2-tp6024512p6025941.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From emilio.detorres at fueca.es  Tue Feb 15 07:50:29 2011
From: emilio.detorres at fueca.es (Emilio de Torres =?ISO-8859-1?Q?Fern=E1ndez?=)
Date: Tue Feb 15 07:50:42 2011
Subject: [gdal-dev] gdalinfo: Corner Coordinates
Message-ID: <1297774229.7288.12.camel@fueca95>

Hello,

I'm trying to understand the corner coordinates info of the following
gdalinfo output:

Driver: GTiff/GeoTIFF
Files: mosaicoRe.tif
Size is 2674, 2649
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Azimuthal_Equidistant"],
    PARAMETER["latitude_of_center",-6.2500000000005],
    PARAMETER["longitude_of_center",36.5166666666677],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-4195457.111657013185322,5006607.738502652384341)
Pixel Size = (14.156374416158000,-14.156374416158000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (-4195457.112, 5006607.739) (  6d32'32.13"W, 36d42'16.93"N)
Lower Left  (-4195457.112, 4969107.503) (  6d25'25.65"W, 36d24'11.72"N)
Upper Right (-4157602.966, 5006607.739) (  6d 9'42.57"W, 36d44'40.08"N)
Lower Right (-4157602.966, 4969107.503) (  6d 2'38.96"W, 36d26'32.65"N)
Center      (-4176530.039, 4987857.621) (  6d17'34.10"W, 36d34'25.64"N)
Band 1 Block=2674x1 Type=Byte, ColorInterp=Red
Band 2 Block=2674x1 Type=Byte, ColorInterp=Green
Band 3 Block=2674x1 Type=Byte, ColorInterp=Blue



I'm focusing in the Upper Left info:

      * The first pair of numbers are the coordinates of the upper left
        corner in the spatial reference set ot an azimuthal equidistant
        projection.
      * The second pair is the long-lat of the same upper left corner.


If I use the  equations of the azimuthal equidistant projection to
transform   long=6d32'32.13"W and  lat=36d42'16.93"N) I get x = -0.65688
and y = 0.78961, not (-4195457.112, 5006607.739). Why??? I guess I
misunderstood some concept of the "Corner Coordinates" of gdalinfo.

Best regards



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110215/ac860cf0/attachment.html
From warmerdam at pobox.com  Tue Feb 15 13:20:24 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 15 13:20:27 2011
Subject: [gdal-dev] gdalinfo: Corner Coordinates
In-Reply-To: <1297774229.7288.12.camel@fueca95>
References: <1297774229.7288.12.camel@fueca95>
Message-ID: <4D5AC3E8.9030000@pobox.com>

On 11-02-15 07:50 AM, Emilio de Torres Fern?ndez wrote:
> If I use the equations of the azimuthal equidistant projection <http://> to
> transform long=6d32'32.13"W and lat=36d42'16.93"N) I get x = -0.65688 and y =
> 0.78961, not (-4195457.112, 5006607.739). Why??? I guess I misunderstood some
> concept of the "Corner Coordinates" of gdalinfo.

Emilio,

Well, I don't know what equations you are using, but I can't imagine getting
x and y values in meters that small unless you were *right at* the origin
which is not the case.  Perhaps you don't understand the units required by,
and/or produced by the equations you are applying?  When I use PROJ.4 to
do the reprojection (as GDAL does underneath) I get:

cs2cs -I +proj=aeqd +lat_0=-6.2500000000005 +lon_0=36.5166666666677
   +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs
   +to +proj=latlong +datum=WGS84
6d32'32.13"W 36d42'16.93"N
-4196092.49	5007369.96 0.00

Make sure you aren't mixing up longitude and latitude.  GDAL and PROJ.4
default to long/lat order while the location seems coincidentally near
the origin of the projection *if* you reversed the ordinates.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From nhatzop at gmail.com  Tue Feb 15 13:20:30 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Tue Feb 15 13:20:32 2011
Subject: [gdal-dev] lat lon matrix tables to geotif
Message-ID: <AANLkTimUiTxvgdq+2mHouSRZhwiaoNaPs1gjucpfZdTD@mail.gmail.com>

So we have three tables:
one matrix for latitude values
one matrix for longitude values
one matrix for our data values

all the matrix have the same dimensions

how we can convert these three tables to geotif using gdal??


--Nikos Hatzopoulos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110215/29623f3a/attachment.html
From warmerdam at pobox.com  Tue Feb 15 13:34:12 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 15 13:34:15 2011
Subject: [gdal-dev] lat lon matrix tables to geotif
In-Reply-To: <AANLkTimUiTxvgdq+2mHouSRZhwiaoNaPs1gjucpfZdTD@mail.gmail.com>
References: <AANLkTimUiTxvgdq+2mHouSRZhwiaoNaPs1gjucpfZdTD@mail.gmail.com>
Message-ID: <4D5AC724.6020609@pobox.com>

On 11-02-15 01:20 PM, Nikolaos Hatzopoulos wrote:
> So we have three tables:
> one matrix for latitude values
> one matrix for longitude values
> one matrix for our data values
>
> all the matrix have the same dimensions
>
> how we can convert these three tables to geotif using gdal??

Mikos,

This is a georeferencing method I refer to as "geolocation grids".  It is
not a supported organization in GeoTIFF so there is no way to produce
a GeoTIFF with the above data where the meaning of the latitude and longitude
values will be well understood.

If you want to use the resulting geotiffs in non-GDAL applications I
think you are best just turning each matrix into a separate TIFF file
with appropriate file names to suggest the meaning to and end user.

Another option is to just rectify the image data into a normal north
up rectified grid and write that to GeoTIFF.  Such an output would be
easily exploited in any GeoTIFF reading application.

It also is possible to use metadata to associate the latitude and longitude
as geolocation grids within a GeoTIFF file in a way that some GDAL
applications (like gdalwarp) could take advtange of.  This requires setting
up very specific metadata items to relate the data.  The metadata required
(for geotiff or other formats) is listed in RFC 4:

   http://trac.osgeo.org/gdal/wiki/rfc4_geolocate

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Feb 15 13:47:07 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 15 13:47:10 2011
Subject: [gdal-dev] nmake.local on windows builds
In-Reply-To: <4D593413.2040005@gatewaygeomatics.com>
References: <4D55B7BE.8090204@pobox.com>
	<4D593413.2040005@gatewaygeomatics.com>
Message-ID: <4D5ACA2B.6020704@pobox.com>

On 11-02-14 08:54 AM, Jeff McKenna wrote:
> I personally have always just modified the nmake.opt. I am not sure what is
> recommended now. Can someone verify that the new recommended way is to create a
> 'nmake.local' file and then execute 'nmake /f makefile.vc' ?

Jeff,

Well, either way will work.  But *my* recommendation is creating an
nmake.local with GDAL trunk and beyond.  This is better than editing
nmake.opt directly particularly in the case where you later want to
do svn update's and rebuilds.  If you hand edit the nmake.opt there is
a significant risk of needless merge conflicts.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jmckenna at gatewaygeomatics.com  Tue Feb 15 13:55:57 2011
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue Feb 15 13:56:01 2011
Subject: [gdal-dev] nmake.local on windows builds
In-Reply-To: <4D5ACA2B.6020704@pobox.com>
References: <4D55B7BE.8090204@pobox.com>	<4D593413.2040005@gatewaygeomatics.com>
	<4D5ACA2B.6020704@pobox.com>
Message-ID: <4D5ACC3D.8080003@gatewaygeomatics.com>

On 11-02-15 2:47 PM, Frank Warmerdam wrote:
>
> Well, either way will work. But *my* recommendation is creating an
> nmake.local with GDAL trunk and beyond. This is better than editing
> nmake.opt directly particularly in the case where you later want to
> do svn update's and rebuilds. If you hand edit the nmake.opt there is
> a significant risk of needless merge conflicts.

I like your recommendation, and I will switch to this nmake.local 
method.  Thanks for the tip.

-jeff

From warmerdam at pobox.com  Tue Feb 15 14:04:45 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 15 14:04:48 2011
Subject: [gdal-dev] MrSID mask band support
In-Reply-To: <AANLkTikuT4ECbVDZ6UcgOoxJ3EUOir2E90pJx6yBPHft@mail.gmail.com>
References: <AANLkTikuT4ECbVDZ6UcgOoxJ3EUOir2E90pJx6yBPHft@mail.gmail.com>
Message-ID: <4D5ACE4D.3030107@pobox.com>

On 11-02-14 03:52 PM, Brian Claywell wrote:
> I'm attempting to use CreateMaskBand() on a MrSID dataset with GDAL
> 1.8.0 and receiving the error that "CreateMaskBand() is not supported
> on this dataset." I presume this is because mask band support was
> implemented using the GDALDefaultOverviews manager, and since MrSID is
> a multi-resolution format, the overview manager is never initialized.

Brian,

This is a lucid deduction.  I believe you are right.

> Is there a way to make mask bands work with MrSID datasets out of the
> box? Barring that, since the MrSID driver reimplements the
> overview-related virtual functions to bypass the default overview
> manager, would there be any harm in initializing the overview manager
> when a MrSIDDataset object is created?

The one caveat I might offer is that it would be prudent to have
MrSIDDataset override IBuildOverviews() or else people will find they
can build external overviews for MrSID but they will never be used.
The IBuildOverviews() override would presumably just report that
overviews are "built in" for mrsid and building them is unnecessary.

If you try this out, I'd be interested in a patch submitted via Trac.

A similar approach would likely apply to formats like ECW and JPEG2000
with built in overviews, but where masks would still be useful.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Tue Feb 15 14:19:01 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb 15 14:19:05 2011
Subject: [gdal-dev] MrSID mask band support
In-Reply-To: <AANLkTikuT4ECbVDZ6UcgOoxJ3EUOir2E90pJx6yBPHft@mail.gmail.com>
References: <AANLkTikuT4ECbVDZ6UcgOoxJ3EUOir2E90pJx6yBPHft@mail.gmail.com>
Message-ID: <201102152019.01529.even.rouault@mines-paris.org>

Le lundi 14 f?vrier 2011 21:52:05, Brian Claywell a ?crit :
> I'm attempting to use CreateMaskBand() on a MrSID dataset with GDAL
> 1.8.0 and receiving the error that "CreateMaskBand() is not supported
> on this dataset." I presume this is because mask band support was
> implemented using the GDALDefaultOverviews manager, and since MrSID is
> a multi-resolution format, the overview manager is never initialized.

Yes most likely. The mask band support was added in RFC15, much later than 
overview support and the initial MrSID driver.

Your remark made me wonder why there wasn't a GDALDefaultMaskBand manager to 
deal with the mask band support, but closer inspection of the code shows that 
there's a small intersection of functionnality : if you have both external 
overview and mask support, if you have a mask and you build overviews, you'll 
need to build the overviews of the mask ...

> 
> Is there a way to make mask bands work with MrSID datasets out of the
> box? Barring that, since the MrSID driver reimplements the
> overview-related virtual functions to bypass the default overview
> manager, would there be any harm in initializing the overview manager
> when a MrSIDDataset object is created?

Yes I think this should be harmless. But I'm not too sure of what will happen 
if you try to get the overviews of the mask, or the mask of the overviews ...

Why not trying and report how successfull you were ?


> 
> -b
From armin.burger at gmx.net  Tue Feb 15 16:57:23 2011
From: armin.burger at gmx.net (Armin Burger)
Date: Tue Feb 15 16:57:28 2011
Subject: [gdal-dev] ERDAS RRD format for overviews
Message-ID: <4D5AF6C3.1040303@gmx.net>

Hi all

I would like to create ERDAS Imagine compliant overview files for a 
larger satellite archive (mainly GeoTIFF files) in an automated way. The 
"gdaladdo" tool has the possibility of defining this with "--config 
USE_RRD YES". But this writes out not the typical ERDAS *.rrd files but 
adds the overviews into an *.aux file instead. This is not recognized 
properly by Erdas or ArcGIS. Just renaming the *.aux file to *.rrd does 
not fully work since Erdas complains and spits out some error messages 
(it opens the files after that, though).

Are there any plans to implement the plain *.rrd output and leave the 
*.aux file for the typical usage of Erdas/ArcGIS for storing other 
parameters like histograms etc? I guess the format change between the 
plain *.rrd and the *.aux is very low, proably the aux file adds some 
additional header lines or something like that.

Best regards

Armin
From nhatzop at gmail.com  Wed Feb 16 01:48:24 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Wed Feb 16 01:48:26 2011
Subject: [gdal-dev] lat lon matrix tables to geotif
In-Reply-To: <4D5AC724.6020609@pobox.com>
References: <AANLkTimUiTxvgdq+2mHouSRZhwiaoNaPs1gjucpfZdTD@mail.gmail.com>
	<4D5AC724.6020609@pobox.com>
Message-ID: <AANLkTimrhVa10r7C+M-K-V2jSVx5RTXQ_pS=whve1csg@mail.gmail.com>

So you are talking for something like this:

Example VRT file for data (just to show the geolocation metadata reference):

<VRTDataset rasterXSize="2048" rasterYSize="964">
  <Metadata domain="GEOLOCATION">
    <MDI key="X_DATASET">data.lon.vrt</MDI>
    <MDI key="X_BAND">1</MDI>
    <MDI key="Y_DATASET">data.lat.vrt</MDI>
    <MDI key="Y_BAND">1</MDI>
    <MDI key="PIXEL_OFFSET">0</MDI>
    <MDI key="LINE_OFFSET">0</MDI>
    <MDI key="PIXEL_STEP">1</MDI>
    <MDI key="LINE_STEP">1</MDI>
  </Metadata>
  <SRS> stuff goes here</SRS>

  <VRTRasterBand dataType="UInt16" band="1" subClass="VRTRawRasterBand">
    <ImageOffset>1500</ImageOffset>
    <PixelOffset>10</PixelOffset>
    <LineOffset>22180</LineOffset>
    <ByteOrder>LSB</ByteOrder>
  </VRTRasterBand>
</VRTDataset>



On Tue, Feb 15, 2011 at 10:34 AM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> On 11-02-15 01:20 PM, Nikolaos Hatzopoulos wrote:
>
>> So we have three tables:
>> one matrix for latitude values
>> one matrix for longitude values
>> one matrix for our data values
>>
>> all the matrix have the same dimensions
>>
>> how we can convert these three tables to geotif using gdal??
>>
>
> Mikos,
>
> This is a georeferencing method I refer to as "geolocation grids".  It is
> not a supported organization in GeoTIFF so there is no way to produce
> a GeoTIFF with the above data where the meaning of the latitude and
> longitude
> values will be well understood.
>
> If you want to use the resulting geotiffs in non-GDAL applications I
> think you are best just turning each matrix into a separate TIFF file
> with appropriate file names to suggest the meaning to and end user.
>
> Another option is to just rectify the image data into a normal north
> up rectified grid and write that to GeoTIFF.  Such an output would be
> easily exploited in any GeoTIFF reading application.
>
> It also is possible to use metadata to associate the latitude and longitude
> as geolocation grids within a GeoTIFF file in a way that some GDAL
> applications (like gdalwarp) could take advtange of.  This requires setting
> up very specific metadata items to relate the data.  The metadata required
> (for geotiff or other formats) is listed in RFC 4:
>
>  http://trac.osgeo.org/gdal/wiki/rfc4_geolocate
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110215/6b0b3212/attachment-0001.html
From heng.feng at aircominternational.com  Wed Feb 16 02:28:12 2011
From: heng.feng at aircominternational.com (heng.feng)
Date: Wed Feb 16 02:28:14 2011
Subject: [gdal-dev] gdalwarp reprojection problem
Message-ID: <1297841292124-6030749.post@n2.nabble.com>


Hi there,

When I tried to use GDALWARP to do the re-projeciton on some large GeoTiff
data, the output pictures seemed to contain the gaps, which appeared to be a
few horizontal lines when zooming out. The command I was using is something
like this:
gdalwarp --config GDAL_CACHEMAX 250 -wm 250 -co TILED=YES -co COMPRESS=LZW
-s_srs "+proj=tmerc +lat_0=0 +lon_0=12 +k=1.000000 +x_0=4500000 +y_0=0
+ellps=bessel +datum=potsdam +nadgrids=c:\fh\BETA2007.gsb,null +units=m
+wktext" -t_srs "+proj=utm +datum=WGS84 +zone=32"
"Z:\JBRoadMaps100\100\100.tif" "Z:\JBRoadMaps100\100\100_converted.tif"

This problem seems to be only happening to the large data as I have used the
same GDALWARP command on the smaller data and everything was working fine
(with no gap at all). Also the bigger is the data, more gaps/lines the
output picture will have. I have also tried to increase/decrease
GDAL_CACHEMAX and ?wm values and it does not make any difference (the same
amount of gaps still exists in the same output data).  I suspect this
problem is caused by the option ?-co TILED=YES?, but once I removed this
option, the re-projection process was hanging. Moving the map data onto the
local disk does not ease this problem either.

Can anyone here give me some help regarding this problem?
 
Thanks,
Heng

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdalwarp-reprojection-problem-tp6030749p6030749.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From heng.feng at aircominternational.com  Wed Feb 16 02:36:21 2011
From: heng.feng at aircominternational.com (heng.feng)
Date: Wed Feb 16 02:36:23 2011
Subject: [gdal-dev] An issue about using GDALWARP todotheNTv2transformation
In-Reply-To: <240EE7C956B2CB439C613DF6CEC8A32D037BBB55@sebulba.bezreg-koeln.nrw.de>
References: <240EE7C956B2CB439C613DF6CEC8A32D037BBB14@sebulba.bezreg-koeln.nrw.de>
	<C3257D068EB03E4498BAC3A96344256803B2A92561@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<1292682078901-5848200.post@n2.nabble.com>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB1D@sebulba.bezreg-koeln.nrw.de>
	<C3257D068EB03E4498BAC3A96344256803B2D1A28F@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<1293133614782-5862681.post@n2.nabble.com>
	<C3257D068EB03E4498BAC3A96344256803B31C4208@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB47@sebulba.bezreg-koeln.nrw.de>
	<C3257D068EB03E4498BAC3A963442568054645389F@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB55@sebulba.bezreg-koeln.nrw.de>
Message-ID: <C3257D068EB03E4498BAC3A9634425680546D9C398@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>


Hi Uwe,

Sorry to bother you again. I actually need your help about another GDALWARP problem I am having. I just thought it might be better to send you an email directly about this (a shortcut:)) although I did just post a message regarding this problem on the GDAL DEV forum: http://osgeo-org.1803224.n2.nabble.com/gdalwarp-reprojection-problem-td6030749.html.

I am just wondering whether you have seen this kind of problem before. Do you have idea about what could be the cause for this problem?

Thanks & Best Regards,
Heng
From: Schmitz, Uwe [via OSGeo.org] [mailto:ml-node+5954610-1691648657-308251@n2.nabble.com]
Sent: 24 January 2011 09:25
To: Heng Feng
Subject: AW: [gdal-dev] An issue about using GDALWARP todotheNTv2transformation

Heng,

>
> Hi Uwe,
>
> I have been trying to use gdal_merge.py to merge
> a few 8 bit colored .tif tiles together. Having
> tried all sorts of options for this command, I
> always ended up with a merged 8-bit grayscale picture.
> I did a search on the internet and found a couple of
> posts related to this, however it seemed to me that
> the gdal_merge.py just does not have the ability
> to preserve the color. Did I get the wrong idea about
> this? Do you have any suggestion to solve this problem?
>
you have to specify "-pct" to grab the color table
of the first merged tile for the result file.
And, very important, all input tiles need to have
the *same* color table, because merging is done
on pixel values (that means channels).

> Not sure if I should post a separate message for
> this gdal_merge.py issue.  I just thought this would
> be the quickest way to get the help :)
>
Yes, IMO a seperate post would have been better and
addressing it to me wouldn't always help to get a fast
response ;-)

Regards
Uwe
_______________________________________________
gdal-dev mailing list
[hidden email]</user/SendEmail.jtp?type=node&node=5954610&i=0>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

________________________________
If you reply to this email, your message will be added to the discussion below:
http://osgeo-org.1803224.n2.nabble.com/An-issue-about-using-GDALWARP-to-do-the-NTv2-transformation-tp5838904p5954610.html
To unsubscribe from An issue about using GDALWARP to do the NTv2 transformation, click here<http://osgeo-org.1803224.n2.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5838904&code=aGVuZy5mZW5nQGFpcmNvbWludGVybmF0aW9uYWwuY29tfDU4Mzg5MDR8MTI3MzEwMjEw>.

AIRCOM International
Mobile World Congress 2011, 14-17 February
Stand 1B14, Barcelona, Spain
Click mailto:events@aircominternational.com?subject=Mobile%20World%20Congress%20'11%20meeting%20-%20Appointement%20Booking to book a meeting

Disclaimer: 
This e-mail message is confidential and should not be used by, or disclosed to, anyone except the addressee. If you receive this message in error, please advise us immediately on +44 (0) 1932 442000. Since e-mail transmission is not secure or error free, we do not accept responsibility for changes to any e-mail which occur after it has been sent. Attachments to this e-mail may contain software viruses which could damage your systems. You should therefore virus-check all attachments before opening. AIRCOM may monitor incoming and outgoing emails through its networks and by responding to this email, you consent to such monitoring. The views and opinions expressed in this e-mail are those of the author only and not of AIRCOM. We do not intend to enter into any legal commitments or contracts by e-mail. Registered Office: Cassini Court, Randalls Research Park, Randalls Way, Leatherhead, Surrey, KT22 7TW, UK. AIRCOM International Ltd registered in England No. 3052022. VAT number 811 5323 68.
 Save a tree. Don't print this e-mail unless it's really necessary

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/An-issue-about-using-GDALWARP-to-do-the-NTv2-transformation-tp5838904p6030762.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110215/bee32839/attachment.html
From Ralf.Suhr at itc-halle.de  Wed Feb 16 03:10:37 2011
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Wed Feb 16 03:10:48 2011
Subject: [gdal-dev] gdalwarp reprojection problem
In-Reply-To: <1297841292124-6030749.post@n2.nabble.com>
References: <1297841292124-6030749.post@n2.nabble.com>
Message-ID: <201102160910.37378.Ralf.Suhr@itc-halle.de>

Hi Heng,

use gdal version 1.8.

Your srs definition has to be "+proj=utm +datum=WGS84 +zone=32 +towgs84=0,0,0 
+wktext".

Gr
Ralf

Am Mittwoch 16 Februar 2011, 08:28:12 schrieb heng.feng:
> Hi there,
> 
> When I tried to use GDALWARP to do the re-projeciton on some large GeoTiff
> data, the output pictures seemed to contain the gaps, which appeared to be
> a few horizontal lines when zooming out. The command I was using is
> something like this:
> gdalwarp --config GDAL_CACHEMAX 250 -wm 250 -co TILED=YES -co COMPRESS=LZW
> -s_srs "+proj=tmerc +lat_0=0 +lon_0=12 +k=1.000000 +x_0=4500000 +y_0=0
> +ellps=bessel +datum=potsdam +nadgrids=c:\fh\BETA2007.gsb,null +units=m
> +wktext" -t_srs "+proj=utm +datum=WGS84 +zone=32"
> "Z:\JBRoadMaps100\100\100.tif" "Z:\JBRoadMaps100\100\100_converted.tif"
> 
> This problem seems to be only happening to the large data as I have used
> the same GDALWARP command on the smaller data and everything was working
> fine (with no gap at all). Also the bigger is the data, more gaps/lines
> the output picture will have. I have also tried to increase/decrease
> GDAL_CACHEMAX and ?wm values and it does not make any difference (the same
> amount of gaps still exists in the same output data).  I suspect this
> problem is caused by the option ?-co TILED=YES?, but once I removed this
> option, the re-projection process was hanging. Moving the map data onto the
> local disk does not ease this problem either.
> 
> Can anyone here give me some help regarding this problem?
> 
> Thanks,
> Heng

From userofgdal at gmail.com  Wed Feb 16 03:28:54 2011
From: userofgdal at gmail.com (user gdal)
Date: Wed Feb 16 03:28:57 2011
Subject: [gdal-dev] Zero Pixel Values in the output! Solution Please
Message-ID: <AANLkTi=cowqZs_B2RXtrOkXw+fXB1naGeK+u=se1d_K8@mail.gmail.com>

Dear all,
I am new to GDAL and I was at fault in being too hasty in asking for
an advanced topic in my previous post.

I am facing a fundamental difficulty. The problem is to retrieve
projection and pixel data etc. from a source ERDAS .img file and copy
'as it is' to another file. For this, I wrote a small program in C++
whose relevant sections I am pasting here for kind perusal:

template<class T> void CIOImg_Templ<T>::
AllocateMemory( )
{
 unsigned int b;

 buf=new T * [Band];
 if(!buf) HandleException("Memory Allocation Problem");

 for(b=0; b<Band; b++) // Bands in the input file
 {
 *(buf+b)=new T [Col];
 if(!(buf+b)) HandleException("Memory Allocation Problem");
 }
}   // Now buf is allocated with memory as buf[Band][Col]

template<class A> void CIOImg_Templ<A>::CreateOutputImg(GDALDataset *
const* InDS) // output dataset (DS) is defined as a class member
{
 char **options=NULL; /* saw an example of this kind in GDAL site */
 double trans[6];         // the transformation coefficients

 GDALDriver *driver=(*InDS)->GetDriver( );

 GDALAllRegister( );
 if(!driver) HandleException("Sorry, couldn't load the driver for your
format");

 outds=(GDALDataset *) GDALOpen(outfilename, GA_Update);
 outds=driver->Create(outfilename, Col, Row, Band, datatype, options);
 // is it correct

 (*InDS)->GetGeoTransform(trans);
 outds->SetGeoTransform(trans);

 outds->SetProjection((*InDS)->GetProjectionRef( ));

 /* Seems there is much more to all this, but how to do? */
}

template<class T> void CIOImg_Templ<T>::Read(const unsigned int b,
GDALDataset* const *inds)
{
 ((*inds)->GetRasterBand(b+1))->RasterIO(GF_Read, 0, 0, Col, 1,
buf[b], Col, 1, datatype, 0, 0);   // able to read the pixel values
correctly into buffer (buf)
}

template<class T> void CIOImg_Templ<T>::Write(const unsigned int b,
GDALDataset** opds)
{
 ((*opds)->GetRasterBand(b+1))->RasterIO(GF_Write, 0, 0, Col, 1,
buf[b], Col, 1, datatype, 0, 0);

 */ (*opds)->RasterIO(GF_Write, 0, 0, Col, 1, buf[b], Col, 1,
datatype, 1, NULL, 0, 0, 0); */ /* Neither of these is working */
}

template<class T> void CIOImg_Templ<T>::ReadNWrite(GDALDataset * const
*inds)
{
 unsigned int b, i=0;

 CreateOutputImg(inds);

 while(i<Row) // for each row
 {
 b=0;
 while(b<Band)
 {
 Read(b, inds); Write(b, &outds); // read row by row and write into a new
file
 b++;
 }

 i++;
 }
}

The class's destructor closes the output dataset ("outds") using GDALClose.

I checked the input pixel values just after the call to the function
'Read'. They were read correctly (I verified with ERDAS software).
However, I am getting an image with exactly the same rows, columns and
bands as the input image but the output image contains only NULL (0)
values everywhere! Also, even if the input image is projected, I do
not see the projection info. in the output img. I understand that many
more parameters have to be retrieved and set properly for the output
img, I don't know how to.

Finally, I also chcked GDAL tutorials. It uses OGRSpatialReference,
apparently a class or a struct. Moreover, the example in the site ()
is limited only for UTM, whereas a general program must 'adapt' to the
required projection, if I'm correct. If I use OGR..., the program is
not compiling. Can you please provide me a solution.

In a nutshell (forgive me for the long message):

I didn't expect that I would stuck at this level itself, especially
the pixel values. I request your help in this regard and projection
info.

With many thanks,

Yours sincerely,
 Ramesh.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110216/b3138c0b/attachment-0001.html
From uwe.schmitz at bezreg-koeln.nrw.de  Wed Feb 16 04:42:43 2011
From: uwe.schmitz at bezreg-koeln.nrw.de (Schmitz, Uwe)
Date: Wed Feb 16 04:42:59 2011
Subject: AW: [gdal-dev] An issue about using GDALWARP todotheNTv2transformation
In-Reply-To: <C3257D068EB03E4498BAC3A9634425680546D9C398@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
Message-ID: <240EE7C956B2CB439C613DF6CEC8A32D037BBB7F@sebulba.bezreg-koeln.nrw.de>

Heng,
> 
> Hi Uwe,
> 
> Sorry to bother you again. I actually need your help 
> about another GDALWARP problem I am having. I just 
> thought it might be better to send you an email 
> directly about this (a shortcutJ) although I did 
> just post a message regarding this problem on 
> the GDAL DEV forum: 
> http://osgeo-org.1803224.n2.nabble.com/gdalwarp-reprojection-problem-td6030749.html.
> 
> I am just wondering whether you have seen this kind 
> of problem before. Do you have idea about what 
> could be the cause for this problem?
>
personally I try to avoid large data sets in
one file. I tend to put them in many smaller manageable
tiles. So may be I'm not the right one to ask for
help (especially if you hit a real bug ;-)) in this case.
But there are many people here with deep knowledge of
such things, that I'm pretty sure you will get
further help from them.

So let me try to get some more informations regarding
your above mentioned posting. What do you mean by
"large" data. Are you beyond 65k-Pixel in width or
height, so that you need BigTIFF? 
You wrote:
"... the output pictures seemed to contain the gaps, 
which appeared to be a few horizontal lines when zooming out."

I would assume that the gaps will disappear or even come
up randomly if you zoom out (according to which interpolation
algorithm your favorite viewer uses). But may be I haven't
the right impression of what you mean with "gap".

Further, if I have to do gdalwarp, I will take two
steps:
   1. gdalwarp to an intermediate file with a fast and
      "easy" compression (uncompressed if you can afford
      the space)
   2. gdal_translate the intermediate file to the target file
      with the desired format and compression
I don't know if these two steps are still necessary.


Uwe
From heng.feng at aircominternational.com  Wed Feb 16 05:08:21 2011
From: heng.feng at aircominternational.com (heng.feng)
Date: Wed Feb 16 05:08:22 2011
Subject: [gdal-dev] Re: gdalwarp reprojection problem
In-Reply-To: <201102160910.37378.Ralf.Suhr@itc-halle.de>
References: <1297841292124-6030749.post@n2.nabble.com>
	<201102160910.37378.Ralf.Suhr@itc-halle.de>
Message-ID: <1297850901357-6031104.post@n2.nabble.com>


Thanks, Ralf.

I am using the latest version of FW Tools 2.4.7. I am guessing I have to
download the GDAL version 1.8 and build the dll/exe to replace the current
ones under the FW Tools bin folder?

And I will try your suggestion about the -t_srs option.

BR,
Heng 
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdalwarp-reprojection-problem-tp6030749p6031104.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From zoltans at geograph.co.za  Wed Feb 16 05:20:36 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Wed Feb 16 05:20:45 2011
Subject: [gdal-dev] Mosaicking Orthos
Message-ID: <4D5BA4F4.1090402@geograph.co.za>

Hi All,
I've built a vrt with 176 images.

I now need to mosaic this whole area into roughly 5 x 5 ortho images.

How can I force the white edges into background of the overlapping orthos?
I'm a little cautious of simply (finding a way to) making "white" 
transparent as it is only the white on the edges that need to be 
backgrounded.

Some pointers would be nice.

Thanks in advance,
Zoltan



-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================

-------------- next part --------------
A non-text attachment was scrubbed...
Name: vrt_177_lowres.jpg
Type: image/jpeg
Size: 26998 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110216/c39bdfc1/vrt_177_lowres-0001.jpg
-------------- next part --------------
Skipped content of type multipart/alternative
From Heng.Feng at AIRCOMINTERNATIONAL.COM  Wed Feb 16 05:46:43 2011
From: Heng.Feng at AIRCOMINTERNATIONAL.COM (Heng Feng)
Date: Wed Feb 16 05:48:27 2011
Subject: [gdal-dev] An issue about using GDALWARP todotheNTv2transformation
In-Reply-To: <240EE7C956B2CB439C613DF6CEC8A32D037BBB7F@sebulba.bezreg-koeln.nrw.de>
References: <C3257D068EB03E4498BAC3A9634425680546D9C398@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
	<240EE7C956B2CB439C613DF6CEC8A32D037BBB7F@sebulba.bezreg-koeln.nrw.de>
Message-ID: <C3257D068EB03E4498BAC3A9634425680546D9C598@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>

Hi Uwe,

Thanks for your quick response as usual :) 

Yes, I had to use the "BIGTIFF=YES" option on some of these large data to get the re-projection done, but did not need to use this option on all the data which had this problem. The word "large" was actually mentioned due to the fact that all the data which do not have this "gap" problem after the re-projection are smaller than the ones which have. If you want, I can give you more details about the actual size of those data tomorrow as I do not have access to the data at the moment.

I actually can clearly see those "gaps" in FW OpenEV and in one of our own tools (only for viewing). The gaps are always there no matter I zoom in/out them in whichever way. Of course, the gaps will become bigger if I zoom in the picture.

The original data are actually provided in smaller tiles (GeoTiff) and all I need to do this time is re-projecting the data and displaying them as a whole dataset. However, after I did the re-projection on those tiles separately, there appear to be black lines around those tiles when displaying them in one view/window (even after merging them with GDALWARP command. Shall I use the option "skip_nosource=yes" to mosaic the tiles in the GDALWARP command?). And this was why I chose to merge the smaller tiles first and then re-project the merged large dataset. 

BR,
Heng
-----Original Message-----
From: Schmitz, Uwe [mailto:uwe.schmitz@bezreg-koeln.nrw.de] 
Sent: 16 February 2011 09:43
To: Heng Feng; gdal-dev@lists.osgeo.org
Subject: AW: [gdal-dev] An issue about using GDALWARP todotheNTv2transformation

Heng,
> 
> Hi Uwe,
> 
> Sorry to bother you again. I actually need your help about another 
> GDALWARP problem I am having. I just thought it might be better to 
> send you an email directly about this (a shortcutJ) although I did 
> just post a message regarding this problem on the GDAL DEV forum:
> http://osgeo-org.1803224.n2.nabble.com/gdalwarp-reprojection-problem-td6030749.html.
> 
> I am just wondering whether you have seen this kind of problem before. 
> Do you have idea about what could be the cause for this problem?
>
personally I try to avoid large data sets in one file. I tend to put them in many smaller manageable tiles. So may be I'm not the right one to ask for help (especially if you hit a real bug ;-)) in this case.
But there are many people here with deep knowledge of such things, that I'm pretty sure you will get further help from them.

So let me try to get some more informations regarding your above mentioned posting. What do you mean by "large" data. Are you beyond 65k-Pixel in width or height, so that you need BigTIFF? 
You wrote:
"... the output pictures seemed to contain the gaps, which appeared to be a few horizontal lines when zooming out."

I would assume that the gaps will disappear or even come up randomly if you zoom out (according to which interpolation algorithm your favorite viewer uses). But may be I haven't the right impression of what you mean with "gap".

Further, if I have to do gdalwarp, I will take two
steps:
   1. gdalwarp to an intermediate file with a fast and
      "easy" compression (uncompressed if you can afford
      the space)
   2. gdal_translate the intermediate file to the target file
      with the desired format and compression I don't know if these two steps are still necessary.


Uwe

AIRCOM International
Mobile World Congress 2011, 14-17 February
Stand 1B14, Barcelona, Spain
Click mailto:events@aircominternational.com?subject=Mobile%20World%20Congress%20'11%20meeting%20-%20Appointement%20Booking to book a meeting

Disclaimer: 
This e-mail message is confidential and should not be used by, or disclosed to, anyone except the addressee. If you receive this message in error, please advise us immediately on +44 (0) 1932 442000. Since e-mail transmission is not secure or error free, we do not accept responsibility for changes to any e-mail which occur after it has been sent. Attachments to this e-mail may contain software viruses which could damage your systems. You should therefore virus-check all attachments before opening. AIRCOM may monitor incoming and outgoing emails through its networks and by responding to this email, you consent to such monitoring. The views and opinions expressed in this e-mail are those of the author only and not of AIRCOM. We do not intend to enter into any legal commitments or contracts by e-mail. Registered Office: Cassini Court, Randalls Research Park, Randalls Way, Leatherhead, Surrey, KT22 7TW, UK. AIRCOM International Ltd registered in England No. 3052022. VAT number 811 5323 68.
 Save a tree. Don't print this e-mail unless it's really necessary
From uwe.schmitz at bezreg-koeln.nrw.de  Wed Feb 16 06:15:43 2011
From: uwe.schmitz at bezreg-koeln.nrw.de (Schmitz, Uwe)
Date: Wed Feb 16 06:15:48 2011
Subject: AW: [gdal-dev] An issue about using GDALWARP todotheNTv2transformation
In-Reply-To: <C3257D068EB03E4498BAC3A9634425680546D9C598@SVRUKEXVS01.AIRCOMINTERNATIONAL.COM>
Message-ID: <240EE7C956B2CB439C613DF6CEC8A32D037BBB80@sebulba.bezreg-koeln.nrw.de>

Heng,
> 
> 
> Hi Uwe,
> 
> Thanks for your quick response as usual :) 
> 
> Yes, I had to use the "BIGTIFF=YES" option on some of these 
> large data to get the re-projection done, but did not need to 
> use this option on all the data which had this problem. The 
> word "large" was actually mentioned due to the fact that all 
> the data which do not have this "gap" problem after the 
> re-projection are smaller than the ones which have. If you 
> want, I can give you more details about the actual size of 
> those data tomorrow as I do not have access to the data at the moment.
> 
> I actually can clearly see those "gaps" in FW OpenEV and in 
> one of our own tools (only for viewing). The gaps are always 
> there no matter I zoom in/out them in whichever way. Of 
> course, the gaps will become bigger if I zoom in the picture.
> 
> The original data are actually provided in smaller tiles 
> (GeoTiff) and all I need to do this time is re-projecting the 
> data and displaying them as a whole dataset. However, after I 
> did the re-projection on those tiles separately, there appear 
> to be black lines around those tiles when displaying them in 
> one view/window (even after merging them with GDALWARP 
> command. Shall I use the option "skip_nosource=yes" to mosaic 
> the tiles in the GDALWARP command?). And this was why I chose 
> to merge the smaller tiles first and then re-project the 
> merged large dataset. 
> 
if these gaps are one or two pixel in size and around the
tile boundaries, it is possible that they are caused by 
rounding problems during transformation. I don't know
anything about your data, but If they are RGB try to use 
another interpolation algorithm like "-r cubic". The
command you posted uses "-r near". This can cause those black 
pixels.

Uwe
From zoltans at geograph.co.za  Wed Feb 16 06:55:53 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Wed Feb 16 06:55:59 2011
Subject: [gdal-dev] Mosaicking Orthos
In-Reply-To: <4D5BA4F4.1090402@geograph.co.za>
References: <4D5BA4F4.1090402@geograph.co.za>
Message-ID: <4D5BBB49.3020105@geograph.co.za>

On 2011-02-16 12:20, Zoltan Szecsei wrote:
> Hi All,
> I've built a vrt with 176 images.
>
> I now need to mosaic this whole area into roughly 5 x 5 ortho images.
>
> How can I force the white edges into background of the overlapping 
> orthos?
> I'm a little cautious of simply (finding a way to) making "white" 
> transparent as it is only the white on the edges that need to be 
> backgrounded.

Hi again,
Since the above post, I have tried different ways to set nodata, but to 
no avail - I still get the white edges:
(see jpeg sent with my original post)

gdalbuildvrt -addalpha -hidenodata -input_file_list files 
177_untiled_orthos_nodata.vrt
gdalbuildvrt -srcnodata "0 0 0"  -addalpha -hidenodata -input_file_list 
files 177_untiled_orthos_blk.vrt
gdalbuildvrt -srcnodata "255 255 255"  -addalpha -hidenodata 
-input_file_list files 177_untiled_orthos_white.vrt

How should I be masking out the nodata (or even white pixels) so that 
when I mosaic a bunch of tiffs together, I dont get the white stripes in 
the resulting image?

Using GDAL 1.7.3, released 2010/11/10 on Ubuntu 10.04
Viewing with Quantum GIS - 1.6.0-Trunk on Ubuntu 10.04 (same box).
...but running the whole lot in xterms with Xming & putty from my 
WinVista box.


Regards,
Zoltan




-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================



-----
No virus found in this message.
Checked by AVG - www.avg.com
Version: 10.0.1204 / Virus Database: 1435/3446 - Release Date: 02/15/11

From warmerdam at pobox.com  Wed Feb 16 08:53:11 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb 16 08:53:13 2011
Subject: [gdal-dev] Zero Pixel Values in the output! Solution Please
In-Reply-To: <AANLkTi=cowqZs_B2RXtrOkXw+fXB1naGeK+u=se1d_K8@mail.gmail.com>
References: <AANLkTi=cowqZs_B2RXtrOkXw+fXB1naGeK+u=se1d_K8@mail.gmail.com>
Message-ID: <4D5BD6C7.3020702@pobox.com>

On 11-02-16 03:28 AM, user gdal wrote:
> Dear all,
> I am new to GDAL and I was at fault in being too hasty in asking for
> an advanced topic in my previous post.
...
> template<class T> void CIOImg_Templ<T>::Read(const unsigned int b,
> GDALDataset* const *inds)
> {
>   ((*inds)->GetRasterBand(b+1))->RasterIO(GF_Read, 0, 0, Col, 1,
> buf[b], Col, 1, datatype, 0, 0);   // able to read the pixel values
> correctly into buffer (buf)
> }

Ramesh,

One thing I notice about your code is that you only appear to read
and write the first scanline of the image.  Is this intentional?

For the purposes of asking a question of the list it would be helpful if
you could boil your program down to a minimum example including all the
essentials.  It will require extra work on your part, but will make it
much easier for the many members of the list who might want to skim
through the code to see if they have suggestions.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Wed Feb 16 08:55:52 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb 16 08:55:58 2011
Subject: [gdal-dev] lat lon matrix tables to geotif
In-Reply-To: <AANLkTimrhVa10r7C+M-K-V2jSVx5RTXQ_pS=whve1csg@mail.gmail.com>
References: <AANLkTimUiTxvgdq+2mHouSRZhwiaoNaPs1gjucpfZdTD@mail.gmail.com>
	<4D5AC724.6020609@pobox.com>
	<AANLkTimrhVa10r7C+M-K-V2jSVx5RTXQ_pS=whve1csg@mail.gmail.com>
Message-ID: <4D5BD768.5050303@pobox.com>

On 11-02-16 01:48 AM, Nikolaos Hatzopoulos wrote:
> So you are talking for something like this:
>
> Example VRT file for data (just to show the geolocation metadata reference):
>
> <VRTDataset rasterXSize="2048"  rasterYSize="964">
>
>    <Metadata domain="GEOLOCATION">
>      <MDI key="X_DATASET">data.lon.vrt</MDI>
>      <MDI key="X_BAND">1</MDI>
>      <MDI key="Y_DATASET">data.lat.vrt</MDI>
>
>      <MDI key="Y_BAND">1</MDI>
>      <MDI key="PIXEL_OFFSET">0</MDI>
>      <MDI key="LINE_OFFSET">0</MDI>
>      <MDI key="PIXEL_STEP">1</MDI>
>
>      <MDI key="LINE_STEP">1</MDI>
>    </Metadata>
>    <SRS>  stuff goes here</SRS>
>
>    <VRTRasterBand dataType="UInt16"  band="1"  subClass="VRTRawRasterBand">
>
>      <ImageOffset>1500</ImageOffset>
>      <PixelOffset>10</PixelOffset>
>      <LineOffset>22180</LineOffset>
>      <ByteOrder>LSB</ByteOrder>
>    </VRTRasterBand>
>
> </VRTDataset>

Nikolaos,

Yes, metdata formatted as above though the VRTRasterBand is incomplete.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From chaitanya.ch at gmail.com  Wed Feb 16 12:39:38 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Feb 16 12:39:40 2011
Subject: [gdal-dev] Mosaicking Orthos
In-Reply-To: <4D5BBB49.3020105@geograph.co.za>
References: <4D5BA4F4.1090402@geograph.co.za> <4D5BBB49.3020105@geograph.co.za>
Message-ID: <AANLkTin4KU53kgZXchcsFoa6sWQG2cFAm+_pb4Ug4zTe@mail.gmail.com>

Zoltan,

Have you tried the nearblack GDAL utility on the original 176 images?
http://www.gdal.org/nearblack.html

On Wed, Feb 16, 2011 at 5:25 PM, Zoltan Szecsei <zoltans@geograph.co.za>wrote:

> On 2011-02-16 12:20, Zoltan Szecsei wrote:
>
>> Hi All,
>> I've built a vrt with 176 images.
>>
>> I now need to mosaic this whole area into roughly 5 x 5 ortho images.
>>
>> How can I force the white edges into background of the overlapping orthos?
>> I'm a little cautious of simply (finding a way to) making "white"
>> transparent as it is only the white on the edges that need to be
>> backgrounded.
>>
>
> Hi again,
> Since the above post, I have tried different ways to set nodata, but to no
> avail - I still get the white edges:
> (see jpeg sent with my original post)
>
> gdalbuildvrt -addalpha -hidenodata -input_file_list files
> 177_untiled_orthos_nodata.vrt
> gdalbuildvrt -srcnodata "0 0 0"  -addalpha -hidenodata -input_file_list
> files 177_untiled_orthos_blk.vrt
> gdalbuildvrt -srcnodata "255 255 255"  -addalpha -hidenodata
> -input_file_list files 177_untiled_orthos_white.vrt
>
> How should I be masking out the nodata (or even white pixels) so that when
> I mosaic a bunch of tiffs together, I dont get the white stripes in the
> resulting image?
>
> Using GDAL 1.7.3, released 2010/11/10 on Ubuntu 10.04
> Viewing with Quantum GIS - 1.6.0-Trunk on Ubuntu 10.04 (same box).
> ...but running the whole lot in xterms with Xming & putty from my WinVista
> box.
>
>
> Regards,
>
> Zoltan
>
>
>
>
> --
>
> ===========================================
> Zoltan Szecsei PrGISc [PGP0031]
> Geograph (Pty) Ltd.
> P.O. Box 7, Muizenberg 7950, South Africa.
>
> 65 Main Road, Muizenberg 7945
> Western Cape, South Africa.
>
> 34? 6'16.35"S 18?28'5.62"E
>
> Tel: +27-21-7884897  Mobile: +27-83-6004028
> Fax: +27-86-6115323     www.geograph.co.za
> ===========================================
>
>
>
> -----
> No virus found in this message.
> Checked by AVG - www.avg.com
> Version: 10.0.1204 / Virus Database: 1435/3446 - Release Date: 02/15/11
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110216/0355b08f/attachment.html
From roland.duhaime at gmail.com  Wed Feb 16 15:14:04 2011
From: roland.duhaime at gmail.com (Roland Duhaime)
Date: Wed Feb 16 15:14:07 2011
Subject: [gdal-dev] Gdal2tiles in Gdal18 and creating KMZ files
Message-ID: <AANLkTik8okbxnC9uU-hPo5c=srwB5qP2HYYasqszgEk5@mail.gmail.com>

I am following the instructions for creating one KMZ file that are posted
here:

http://trac.osgeo.org/gdal/wiki/UserDocs/Gdal2Tiles

I am using gdal2tiles under the "gdal" package 1.8.  I have having success
creating superoverlays and the related folder structure.  I am able to read
the created doc.kml in Google Earth.  However, when I attempt to zip up the
folder structure using 7zip and rename the file to test.kmz, the file
doesn't read properly in Google Earth (GE).  GE zooms into the correct
location but all I see is a red "x".  Compressing the superoverlay structure
seems to break the link between the doc.kml file and the png files.  As an
example, I have created a tiny (21 KB)  example and placed it here:

http://www.edc.uri.edu/Personal/roland/test.kmz

I am curious if someone had some insight.

All the Best,
Roland
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110216/1c604b54/attachment.html
From rush at winkey.org  Wed Feb 16 17:35:14 2011
From: rush at winkey.org (brian)
Date: Wed Feb 16 17:44:43 2011
Subject: [gdal-dev] Gdal2tiles in Gdal18 and creating KMZ files
In-Reply-To: <AANLkTik8okbxnC9uU-hPo5c=srwB5qP2HYYasqszgEk5@mail.gmail.com>
References: <AANLkTik8okbxnC9uU-hPo5c=srwB5qP2HYYasqszgEk5@mail.gmail.com>
Message-ID: <1297895714.4826.46.camel@winkey.org>

Roland


the problem is in /12/1211/2558.kml line 26

<href>2558.png</href>

this should be a relative path from the root of the zipfile not from
2558.kml

Brian



On Wed, 2011-02-16 at 15:14 -0500, Roland Duhaime wrote:
> 
> I am following the instructions for creating one KMZ file that are
> posted here:
> 
> http://trac.osgeo.org/gdal/wiki/UserDocs/Gdal2Tiles
> 
> I am using gdal2tiles under the "gdal" package 1.8.  I have having
> success creating superoverlays and the related folder structure.  I am
> able to read the created doc.kml in Google Earth.  However, when I
> attempt to zip up the folder structure using 7zip and rename the file
> to test.kmz, the file doesn't read properly in Google Earth (GE).  GE
> zooms into the correct location but all I see is a red "x".
> Compressing the superoverlay structure seems to break the link between
> the doc.kml file and the png files.  As an example, I have created a
> tiny (21 KB)  example and placed it here:
> 
> http://www.edc.uri.edu/Personal/roland/test.kmz
> 
> I am curious if someone had some insight.
> 
> All the Best,
> Roland
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From mohammedrashadkm at gmail.com  Thu Feb 17 05:40:38 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Thu Feb 17 05:41:20 2011
Subject: [gdal-dev] gdal android
Message-ID: <AANLkTik0bQJaKfw2bZ_JONuWVmAMy2Uk534KVCoysgH_@mail.gmail.com>

I am using android-ndk-r4-crystax. gdal is building proprerly but I am
getting error when linking gdal with my application

here is my error log

/home/rashadkm/android/android-ndk-r4-crystax/build/prebuilt/linux-x86/arm-eabi-4.4.0/bin/../lib/gcc/arm-eabi/4.4.0/../../../../arm-eabi/bin/ld:
/home/rashadkm/android/gdal/lib/libgdal.a(ogrregisterall.o): Relocations in
generic ELF (EM: 3)
/home/rashadkm/android/android-ndk-r4-crystax/build/prebuilt/linux-x86/arm-eabi-4.4.0/bin/../lib/gcc/arm-eabi/4.4.0/../../../../arm-eabi/bin/ld:
/home/rashadkm/android/gdal/lib/libgdal.a(ogrregisterall.o): Relocations in
generic ELF (EM: 3)
/home/rashadkm/android/android-ndk-r4-crystax/build/prebuilt/linux-x86/arm-eabi-4.4.0/bin/../lib/gcc/arm-eabi/4.4.0/../../../../arm-eabi/bin/ld:
/home/rashadkm/android/gdal/lib/libgdal.a(ogrregisterall.o): Relocations in
generic ELF (EM: 3)
/home/rashadkm/android/android-ndk-r4-crystax/build/prebuilt/linux-x86/arm-eabi-4.4.0/bin/../lib/gcc/arm-eabi/4.4.0/../../../../arm-eabi/bin/ld:
/home/rashadkm/android/gdal/lib/libgdal.a(ogrregisterall.o): Relocations in
generic ELF (EM: 3)
/home/rashadkm/android/android-ndk-r4-crystax/build/prebuilt/linux-x86/arm-eabi-4.4.0/bin/../lib/gcc/arm-eabi/4.4.0/../../../../arm-eabi/bin/ld:
/home/rashadkm/android/gdal/lib/libgdal.a(ogrregisterall.o): Relocations in
generic ELF (EM: 3)
/home/rashadkm/android/android-ndk-r4-crystax/build/prebuilt/linux-x86/arm-eabi-4.4.0/bin/../lib/gcc/arm-eabi/4.4.0/../../../../arm-eabi/bin/ld:
/home/rashadkm/android/gdal/lib/libgdal.a(ogrregisterall.o): Relocations in
generic ELF (EM: 3)
/home/rashadkm/android/gdal/lib/libgdal.a: could not read symbols: File in
wrong format
collect2: ld returned 1 exit status


-- 
Thanks && Regards
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110217/77cedc5b/attachment.html
From mohammedrashadkm at gmail.com  Thu Feb 17 06:00:09 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Thu Feb 17 06:00:52 2011
Subject: [gdal-dev] Re: gdal android
In-Reply-To: <AANLkTik0bQJaKfw2bZ_JONuWVmAMy2Uk534KVCoysgH_@mail.gmail.com>
References: <AANLkTik0bQJaKfw2bZ_JONuWVmAMy2Uk534KVCoysgH_@mail.gmail.com>
Message-ID: <AANLkTikgWYOZDh6MXSSE274_kmrYuRj9VkvVwoccpUbr@mail.gmail.com>

here is my new error log
cpl_strtod.cpp: In function 'void CPLReplacePointByLocalePoint(char*,
char)':
cpl_strtod.cpp:200: error: 'struct lconv' has no member named
'decimal_point'
cpl_strtod.cpp:201: error: 'struct lconv' has no member named
'decimal_point'
cpl_strtod.cpp:204: error: 'struct lconv' has no member named
'decimal_point'
make[1]: *** [cpl_strtod.lo] Error 1
make[1]: Leaving directory `/home/rashadkm/gdal-1.8.0/port'
make: *** [port-target] Error 2

Which gdal version to use for Android

On Thu, Feb 17, 2011 at 4:10 PM, Mohammed Rashad <mohammedrashadkm@gmail.com
> wrote:

> I am using android-ndk-r4-crystax. gdal is building proprerly but I am
> getting error when linking gdal with my application
>
> here is my error log
>
> /home/rashadkm/android/android-ndk-r4-crystax/build/prebuilt/linux-x86/arm-eabi-4.4.0/bin/../lib/gcc/arm-eabi/4.4.0/../../../../arm-eabi/bin/ld:
> /home/rashadkm/android/gdal/lib/libgdal.a(ogrregisterall.o): Relocations in
> generic ELF (EM: 3)
> /home/rashadkm/android/android-ndk-r4-crystax/build/prebuilt/linux-x86/arm-eabi-4.4.0/bin/../lib/gcc/arm-eabi/4.4.0/../../../../arm-eabi/bin/ld:
> /home/rashadkm/android/gdal/lib/libgdal.a(ogrregisterall.o): Relocations in
> generic ELF (EM: 3)
> /home/rashadkm/android/android-ndk-r4-crystax/build/prebuilt/linux-x86/arm-eabi-4.4.0/bin/../lib/gcc/arm-eabi/4.4.0/../../../../arm-eabi/bin/ld:
> /home/rashadkm/android/gdal/lib/libgdal.a(ogrregisterall.o): Relocations in
> generic ELF (EM: 3)
> /home/rashadkm/android/android-ndk-r4-crystax/build/prebuilt/linux-x86/arm-eabi-4.4.0/bin/../lib/gcc/arm-eabi/4.4.0/../../../../arm-eabi/bin/ld:
> /home/rashadkm/android/gdal/lib/libgdal.a(ogrregisterall.o): Relocations in
> generic ELF (EM: 3)
> /home/rashadkm/android/android-ndk-r4-crystax/build/prebuilt/linux-x86/arm-eabi-4.4.0/bin/../lib/gcc/arm-eabi/4.4.0/../../../../arm-eabi/bin/ld:
> /home/rashadkm/android/gdal/lib/libgdal.a(ogrregisterall.o): Relocations in
> generic ELF (EM: 3)
> /home/rashadkm/android/android-ndk-r4-crystax/build/prebuilt/linux-x86/arm-eabi-4.4.0/bin/../lib/gcc/arm-eabi/4.4.0/../../../../arm-eabi/bin/ld:
> /home/rashadkm/android/gdal/lib/libgdal.a(ogrregisterall.o): Relocations in
> generic ELF (EM: 3)
> /home/rashadkm/android/gdal/lib/libgdal.a: could not read symbols: File in
> wrong format
> collect2: ld returned 1 exit status
>
>
> --
> Thanks && Regards
> Rashad
>



-- 
Thanks && Regards
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110217/be23a130/attachment-0001.html
From mohammedrashadkm at gmail.com  Thu Feb 17 08:41:15 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Thu Feb 17 08:41:58 2011
Subject: [gdal-dev] gdal install error version 1.5.0
Message-ID: <AANLkTin3LK6EO3q664JCPcgk1Z4Tgact7b6f8iea153V@mail.gmail.com>

Install error; console log

bin/sh /home/rashadkm/gdal-1.5.0/libtool --mode=compile --tag=CXX
arm-linux-androideabi-g++ -g -O2  -Wall  -I/home/rashadkm/gdal-1.5.0/port
-I/home/rashadkm/gdal-1.5.0/gcore -I/home/rashadkm/gdal-1.5.0/alg
-I/home/rashadkm/gdal-1.5.0/ogr -I/home/rashadkm/gdal-1.5.0/ogr/ogrsf_frmts
-c -o ../o/ilwisdataset.o ilwisdataset.cpp
libtool: compile:  arm-linux-androideabi-g++ -g -O2 -Wall
-I/home/rashadkm/gdal-1.5.0/port -I/home/rashadkm/gdal-1.5.0/gcore
-I/home/rashadkm/gdal-1.5.0/alg -I/home/rashadkm/gdal-1.5.0/ogr
-I/home/rashadkm/gdal-1.5.0/ogr/ogrsf_frmts -c ilwisdataset.cpp  -fPIC -DPIC
-o ../o/.libs/ilwisdataset.o
In file included from /home/rashadkm/gdal-1.5.0/gcore/gdal_priv.h:54,
                 from /home/rashadkm/gdal-1.5.0/gcore/gdal_pam.h:33,
                 from ilwisdataset.h:34,
                 from ilwisdataset.cpp:30:
/home/rashadkm/gdal-1.5.0/port/cpl_string.h:173: note: the mangling of
'va_list' has changed in GCC 4.4
ilwisdataset.cpp: In function 'CPLErr GetStoreType(std::string,
ilwisStoreType&)':
ilwisdataset.cpp:409: error: no matching function for call to
'transform(__gnu_cxx::__normal_iterator<char*, std::basic_string<char,
std::char_traits<char>, std::allocator<char> > >,
__gnu_cxx::__normal_iterator<char*, std::basic_string<char,
std::char_traits<char>, std::allocator<char> > >,
__gnu_cxx::__normal_iterator<char*, std::basic_string<char,
std::char_traits<char>, std::allocator<char> > >, <unresolved overloaded
function type>)'
ilwisdataset.cpp: In member function 'void
ILWISDataset::CollectTransformCoef(std::string&)':
ilwisdataset.cpp:485: error: no matching function for call to
'transform(__gnu_cxx::__normal_iterator<char*, std::basic_string<char,
std::char_traits<char>, std::allocator<char> > >,
__gnu_cxx::__normal_iterator<char*, std::basic_string<char,
std::char_traits<char>, std::allocator<char> > >,
__gnu_cxx::__normal_iterator<char*, std::basic_string<char,
std::char_traits<char>, std::allocator<char> > >, <unresolved overloaded
function type>)'
ilwisdataset.cpp: In static member function 'static GDALDataset*
ILWISDataset::Open(GDALOpenInfo*)':
ilwisdataset.cpp:791: error: no matching function for call to
'transform(__gnu_cxx::__normal_iterator<char*, std::basic_string<char,
std::char_traits<char>, std::allocator<char> > >,
__gnu_cxx::__normal_iterator<char*, std::basic_string<char,
std::char_traits<char>, std::allocator<char> > >,
__gnu_cxx::__normal_iterator<char*, std::basic_string<char,
std::char_traits<char>, std::allocator<char> > >, <unresolved overloaded
function type>)'
ilwisdataset.cpp: In member function 'CPLErr
ILWISRasterBand::GetILWISInfo(std::string)':
ilwisdataset.cpp:1321: error: no matching function for call to
'transform(__gnu_cxx::__normal_iterator<char*, std::basic_string<char,
std::char_traits<char>, std::allocator<char> > >,
__gnu_cxx::__normal_iterator<char*, std::basic_string<char,
std::char_traits<char>, std::allocator<char> > >,
__gnu_cxx::__normal_iterator<char*, std::basic_string<char,
std::char_traits<char>, std::allocator<char> > >, <unresolved overloaded
function type>)'
ilwisdataset.cpp:1373: error: no matching function for call to
'transform(__gnu_cxx::__normal_iterator<char*, std::basic_string<char,
std::char_traits<char>, std::allocator<char> > >,
__gnu_cxx::__normal_iterator<char*, std::basic_string<char,
std::char_traits<char>, std::allocator<char> > >,
__gnu_cxx::__normal_iterator<char*, std::basic_string<char,
std::char_traits<char>, std::allocator<char> > >, <unresolved overloaded
function type>)'
make[2]: *** [../o/ilwisdataset.o] Error 1
make[2]: Leaving directory `/home/rashadkm/gdal-1.5.0/frmts/ilwis'
make[1]: *** [ilwis-install-obj] Error 2
make[1]: Leaving directory `/home/rashadkm/gdal-1.5.0/frmts'
make: *** [frmts-target] Error 2


-- 
Thanks && Regards
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110217/f4a6090a/attachment.html
From warmerdam at pobox.com  Thu Feb 17 09:47:11 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 17 09:47:15 2011
Subject: [gdal-dev] gdal install error version 1.5.0
In-Reply-To: <AANLkTin3LK6EO3q664JCPcgk1Z4Tgact7b6f8iea153V@mail.gmail.com>
References: <AANLkTin3LK6EO3q664JCPcgk1Z4Tgact7b6f8iea153V@mail.gmail.com>
Message-ID: <4D5D34EF.2000107@pobox.com>

On 11-02-17 08:41 AM, Mohammed Rashad wrote:
> Install error; console log
>
> bin/sh /home/rashadkm/gdal-1.5.0/libtool
...
>
> --
> Thanks && Regards
> Rashad

Rashad,

GDAL 1.5.0 is quite old, and not even the newest of that stable branch.
Try GDAL 1.8.0.  If the problem persists I'm sure we would be glad to look
into it. If you really need a GDAL 1.5.x version then at least use the newest
1.5.x release (1.5.4?).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Thu Feb 17 09:58:17 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 17 09:58:20 2011
Subject: [gdal-dev] Re: gdal android
In-Reply-To: <AANLkTikgWYOZDh6MXSSE274_kmrYuRj9VkvVwoccpUbr@mail.gmail.com>
References: <AANLkTik0bQJaKfw2bZ_JONuWVmAMy2Uk534KVCoysgH_@mail.gmail.com>
	<AANLkTikgWYOZDh6MXSSE274_kmrYuRj9VkvVwoccpUbr@mail.gmail.com>
Message-ID: <4D5D3789.8030402@pobox.com>

On 11-02-17 06:00 AM, Mohammed Rashad wrote:
> here is my new error log
> cpl_strtod.cpp: In function 'void CPLReplacePointByLocalePoint(char*, char)':
> cpl_strtod.cpp:200: error: 'struct lconv' has no member named 'decimal_point'
> cpl_strtod.cpp:201: error: 'struct lconv' has no member named 'decimal_point'
> cpl_strtod.cpp:204: error: 'struct lconv' has no member named 'decimal_point'
> make[1]: *** [cpl_strtod.lo] Error 1
> make[1]: Leaving directory `/home/rashadkm/gdal-1.8.0/port'
> make: *** [port-target] Error 2
>
> Which gdal version to use for Android

Rashad,

My copy of cpl_strtod.cpp (trunk) has an ifdef in that function for the
__ANDROID__ case.  Do you?  If yes, I wonder why it isn't getting activated.

Perhaps you should review the fairly new android notes at:

   http://trac.osgeo.org/gdal/wiki/BuildingForAndroid

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From vadp.devl at gmail.com  Thu Feb 17 10:08:26 2011
From: vadp.devl at gmail.com (Vadim Shlyakhov)
Date: Thu Feb 17 10:08:27 2011
Subject: [gdal-dev] GCP list projection
Message-ID: <AANLkTinr_4+hXzzkD6ZzS7FdixYX0d2f51EmOJd9tO2=@mail.gmail.com>

Hello,

I wonder if it makes any sense if GCP list at a dataset is different from
the dataset's SRS.

I've played a little with these in Python, but neither gdal.Transformer, nor
warping via VRT doesn't produce the results expected. I mean, presumably if
GCP's SRS is different from the dataset's SRS, then they are to be
transformed internally into the dataset SRS, but this doesn't seem to happen

Regards
V
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110217/9e1ef8f5/attachment.html
From roland.duhaime at gmail.com  Thu Feb 17 12:28:58 2011
From: roland.duhaime at gmail.com (Roland Duhaime)
Date: Thu Feb 17 12:29:00 2011
Subject: [gdal-dev] Gdal2tiles in Gdal18 and creating KMZ files
In-Reply-To: <1297895714.4826.46.camel@winkey.org>
References: <AANLkTik8okbxnC9uU-hPo5c=srwB5qP2HYYasqszgEk5@mail.gmail.com>
	<1297895714.4826.46.camel@winkey.org>
Message-ID: <AANLkTim_HURSJOs5SQxbovv=ziNLCNpre2q2Ke+TrK85@mail.gmail.com>

Thanks Brian,

I have reviewed OSGeo4W\bin\gdal2tiles.py and specifically line 1597
containing the href tag to the png file:

          <Icon>
            <href>%(ty)d.%(tileformat)s</href>
          </Icon>

I was curious if someone had any idea on how to modify this href tag to
include the relative path as Brian suggests below.  I see that the
appropriate path is already included in the name tag if the .kml is changed
to .png.  Any ideas on the best approach would be appreciated.  Also, is
this relative path something that should be added to the general release to
support kmz compression?

Thanks,
Roland




On Wed, Feb 16, 2011 at 5:35 PM, brian <rush@winkey.org> wrote:

> Roland
>
>
> the problem is in /12/1211/2558.kml line 26
>
> <href>2558.png</href>
>
> this should be a relative path from the root of the zipfile not from
> 2558.kml
>
> Brian
>
>
>
> On Wed, 2011-02-16 at 15:14 -0500, Roland Duhaime wrote:
> >
> > I am following the instructions for creating one KMZ file that are
> > posted here:
> >
> > http://trac.osgeo.org/gdal/wiki/UserDocs/Gdal2Tiles
> >
> > I am using gdal2tiles under the "gdal" package 1.8.  I have having
> > success creating superoverlays and the related folder structure.  I am
> > able to read the created doc.kml in Google Earth.  However, when I
> > attempt to zip up the folder structure using 7zip and rename the file
> > to test.kmz, the file doesn't read properly in Google Earth (GE).  GE
> > zooms into the correct location but all I see is a red "x".
> > Compressing the superoverlay structure seems to break the link between
> > the doc.kml file and the png files.  As an example, I have created a
> > tiny (21 KB)  example and placed it here:
> >
> > http://www.edc.uri.edu/Personal/roland/test.kmz
> >
> > I am curious if someone had some insight.
> >
> > All the Best,
> > Roland
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110217/5f747b08/attachment.html
From warmerdam at pobox.com  Thu Feb 17 13:08:31 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 17 13:08:35 2011
Subject: [gdal-dev] GCP list projection
In-Reply-To: <AANLkTinr_4+hXzzkD6ZzS7FdixYX0d2f51EmOJd9tO2=@mail.gmail.com>
References: <AANLkTinr_4+hXzzkD6ZzS7FdixYX0d2f51EmOJd9tO2=@mail.gmail.com>
Message-ID: <4D5D641F.1070405@pobox.com>

On 11-02-17 10:08 AM, Vadim Shlyakhov wrote:
> Hello,
>
> I wonder if it makes any sense if GCP list at a dataset is different from the
> dataset's SRS.
>
> I've played a little with these in Python, but neither gdal.Transformer, nor
> warping via VRT doesn't produce the results expected. I mean, presumably if
> GCP's SRS is different from the dataset's SRS, then they are to be transformed
> internally into the dataset SRS, but this doesn't seem to happen

Vadim,

Normally I would expected a dataset with GCPs to have a GCP SRS, and no
dataset level projection or geotransform.

When given such a datsaet, gdalwarp will attempt to produce an output
dataset in the *GCP SRS*.

If the source dataset has both a GCP SRS and a dataset level SRS I am not
absolutely positive what gdalwarp does, but I feel it *ought* to be producing
an output file in the GCP SRS if it is using the GCPs.  I am not sure why you
expect the GCPs to be reprojected.

Note, if the output file is in a different SRS than the GCPs, I think the GCPs
would still be used to compute a polynomial in the SRS of the GCPs for
getting from source file pixel/line to source georeferenced coordinates.  Then
reprojection would be applied as an extra step.

In theory it could make sense to have a dataset with a dataset level SRS
and geotransform, and also GCPs with a different SRS.  In some cases the GCPs
are in a particular SRS (say lat/long) just because it is a convenient
coordinate system to collect the GCPs, not because it is representative of
the geometry of the image.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Thu Feb 17 13:33:15 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb 17 13:33:15 2011
Subject: [gdal-dev] Re: gdal android
In-Reply-To: <4D5D3789.8030402@pobox.com>
References: <AANLkTik0bQJaKfw2bZ_JONuWVmAMy2Uk534KVCoysgH_@mail.gmail.com>
	<AANLkTikgWYOZDh6MXSSE274_kmrYuRj9VkvVwoccpUbr@mail.gmail.com>
	<4D5D3789.8030402@pobox.com>
Message-ID: <201102171933.15998.even.rouault@mines-paris.org>

Le jeudi 17 f?vrier 2011 15:58:17, Frank Warmerdam a ?crit :
> On 11-02-17 06:00 AM, Mohammed Rashad wrote:
> > here is my new error log
> > cpl_strtod.cpp: In function 'void CPLReplacePointByLocalePoint(char*,
> > char)': cpl_strtod.cpp:200: error: 'struct lconv' has no member named
> > 'decimal_point' cpl_strtod.cpp:201: error: 'struct lconv' has no member
> > named 'decimal_point' cpl_strtod.cpp:204: error: 'struct lconv' has no
> > member named 'decimal_point' make[1]: *** [cpl_strtod.lo] Error 1
> > make[1]: Leaving directory `/home/rashadkm/gdal-1.8.0/port'
> > make: *** [port-target] Error 2
> > 
> > Which gdal version to use for Android
> 
> Rashad,
> 
> My copy of cpl_strtod.cpp (trunk) has an ifdef in that function for the
> __ANDROID__ case.  Do you?  If yes, I wonder why it isn't getting
> activated.
> 
> Perhaps you should review the fairly new android notes at:
> 
>    http://trac.osgeo.org/gdal/wiki/BuildingForAndroid
> 
> Best regards,

I see that the path is /home/rashadkm/gdal-1.8.0/port so I deduce this is a 
GDAL 1.8.0 build. But the adjustment for Android has been introduced in trunk 
(1.9.0dev) very recently. See http://trac.osgeo.org/gdal/ticket/3952
From mafunk at nmsu.edu  Thu Feb 17 13:49:28 2011
From: mafunk at nmsu.edu (Matt Funk)
Date: Thu Feb 17 13:49:47 2011
Subject: [gdal-dev] gdal vs wgrib2 output for grb2 files
In-Reply-To: <AFBF0FD253136F4ABD241011F70F86909A44@PRTMB01.corp.weather.com>
References: <4D38AB4E.4080806@nmsu.edu>
	<AFBF0FD253136F4ABD241011F70F86909A44@PRTMB01.corp.weather.com>
Message-ID: <4D5D6DB8.9000101@nmsu.edu>

Hi Bill,

i was wondering if there had been any more progress on the issue w.r.t
to the discreptancy between wgrib2 and the gdal driver file?
I found the thread which you initiated at:
http://osgeo-org.1803224.n2.nabble.com/gdal-dev-GDAL-Navigation-of-a-Grib2-file-td5740761.html

If you don't mind, can you tell me where that whole thing ended up or
whether it went any further than listed?
Which output did you trust?

Any advice is appreciated...

thanks
matt


On 1/20/2011 3:24 PM, Cassanova, Bill wrote:
> Hi Matt,
>
> Can you be a little more explicit about what you are asking?  Generally speaking GRIB2 files do not contain explicit lat-lon information.
> GRIB2's contain a projection and within that projection the bounding box including the number of points along each axis is contained.
>
> As an experiment run gdalinfo on your grib2 file and you will see output similar to the below:
>
> gdalinfo foo.grib2
> Driver: GRIB/GRIdded Binary (.grb)
> Files: foo.grib2
> Size is 720, 361
> Coordinate System is:
> GEOGCS["Coordinate System imported from GRIB file",
>     DATUM["unknown",
>         SPHEROID["Sphere",6371229,0]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433]]
> Origin = (0.000000000000000,270.000000000000000)
> Pixel Size = (0.500000000000000,-0.500000000000000)
> Corner Coordinates:
> Upper Left  (       0.000,     270.000) (  0d 0'0.01"E,270d 0'0.00"N)
> Lower Left  (   0.0000000,  89.5000000) (  0d 0'0.01"E, 89d30'0.00"N)
> Upper Right (     360.000,     270.000) (360d 0'0.00"E,270d 0'0.00"N)
> Lower Right (     360.000,      89.500) (360d 0'0.00"E, 89d30'0.00"N)
> Center      (     180.000,     179.750) (180d 0'0.00"E,179d45'0.00"N)
> Band 1 Block=720x1 Type=Float64, ColorInterp=Undefined
>   Description = 0[-] SFC="Ground or water surface"
>   Metadata:
>     GRIB_UNIT=[K]
>     GRIB_COMMENT=Temperature [K]
>     GRIB_ELEMENT=TMP
>     GRIB_SHORT_NAME=0-SFC
>     GRIB_REF_TIME=  1295481600 sec UTC
>     GRIB_VALID_TIME=  1296151200 sec UTC
>     GRIB_FORECAST_SECONDS=669600 sec
>     GRIB_PDS_PDTN=0
>     GRIB_PDS_TEMPLATE_NUMBERS=0 0 2 0 96 0 0 0 1 0 0 0 186 1 0 0 0 0 0 255 0 0 0 0 0
>
> If you are trying to read the values contained in Upper Left, Lower Left, etc?
>
> If this is the case you need to get the geo_transform using code similar to the C-code below:
>
> GDALAllRegister();
>
>
>    GDALDatasetH my_data_set;
>
>    int my_x_size, my_y_size;
>    int my_raster_bands;
>
>    GDALRasterBandH my_raster_band;
>
>    double my_geo_transform[6];
>
>    std::string my_projection_ref;
>
>    my_data_set = NULL;
>    my_raster_band = NULL;
>    my_x_size = my_y_size = my_raster_bands = 0;
>
>    ACE_LOG_MSG->log(LM_INFO, "%D %n Opening %s \n", input_grib2_file.c_str());
>
>    my_data_set = GDALOpen(input_grib2_file.c_str(), GA_ReadOnly);
>
>
>    if (NULL == my_data_set)
>    {
>       ACE_LOG_MSG->log(LM_INFO, "%D %n NULL GDALDatasetH pointer for file %s, "
>                        "file invalid, quitting\n", input_grib2_file.c_str());
>       return (1);
>    }
>
>    GDALGetGeoTransform(my_data_set, my_geo_transform);
>
>    my_x_size = GDALGetRasterXSize(my_data_set);
>
>    my_y_size = GDALGetRasterYSize(my_data_set);
>
>    my_raster_bands = GDALGetRasterCount(my_data_set);
>
>    ACE_LOG_MSG->log(LM_INFO,
>                     "%D %n Data Set: x_size = %d y_size = %d raster_bands = %d origin = %f, %f, pixel_size=%f, %f\n",
>                     my_x_size, my_y_size, my_raster_bands, my_geo_transform[0],
>                     my_geo_transform[3], my_geo_transform[1],
>                     my_geo_transform[5]);
>
> >From this information you can calculate the lat-lon of each point within the file.
>
> To answer your other question about wgrib2 -spread....wgrib2 calculates the lat-lon coordinates on the fly and does not store these explicitly in the file...Unless they are put there as a wgrib2 data segment which most people don't do.
>
>
> Hope this helps,
> Bill
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Matt Funk
> Sent: Thursday, January 20, 2011 4:38 PM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] question about reading grib2 file
>
> Hi,
>
> i am somewhat new to gdal and the grib format.
> I need to read in a grib2 file which contains latitude longitude and
> elevation.
> So i do:
> ds = gdal.Open(filename)
> and
> print "ds.GetRasterCount(): %s" % ds.GetRasterCount()
> gives: 1
>
> I can proceed to read in this band, but all the data that i get is the
> elevation.
> Not sure if this is an incredibly stupid question, but how do i access
> the latitude/longitude data?
>
> I know that there is latitude/longitude since when outputting things to
> a csv file via the wgrib2 utility i get lat/lon and elevation?
>
> thanks for any advice
> matt
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From mohammedrashadkm at gmail.com  Thu Feb 17 13:59:56 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Thu Feb 17 14:00:53 2011
Subject: [gdal-dev] Re: gdal android
In-Reply-To: <201102171933.15998.even.rouault@mines-paris.org>
References: <AANLkTik0bQJaKfw2bZ_JONuWVmAMy2Uk534KVCoysgH_@mail.gmail.com>
	<AANLkTikgWYOZDh6MXSSE274_kmrYuRj9VkvVwoccpUbr@mail.gmail.com>
	<4D5D3789.8030402@pobox.com>
	<201102171933.15998.even.rouault@mines-paris.org>
Message-ID: <AANLkTikLfhC0aiMeOHLvE95NhrH3tN3wH0PZELeFfKei@mail.gmail.com>

I installed gdal-1.5.0 on android with some patches.
there is a problem in tiff format, gml,geojson,kml all other formats worked
without any patch
will send you those patches if needed

On Fri, Feb 18, 2011 at 12:03 AM, Even Rouault <even.rouault@mines-paris.org
> wrote:

> Le jeudi 17 f?vrier 2011 15:58:17, Frank Warmerdam a ?crit :
> > On 11-02-17 06:00 AM, Mohammed Rashad wrote:
> > > here is my new error log
> > > cpl_strtod.cpp: In function 'void CPLReplacePointByLocalePoint(char*,
> > > char)': cpl_strtod.cpp:200: error: 'struct lconv' has no member named
> > > 'decimal_point' cpl_strtod.cpp:201: error: 'struct lconv' has no member
> > > named 'decimal_point' cpl_strtod.cpp:204: error: 'struct lconv' has no
> > > member named 'decimal_point' make[1]: *** [cpl_strtod.lo] Error 1
> > > make[1]: Leaving directory `/home/rashadkm/gdal-1.8.0/port'
> > > make: *** [port-target] Error 2
> > >
> > > Which gdal version to use for Android
> >
> > Rashad,
> >
> > My copy of cpl_strtod.cpp (trunk) has an ifdef in that function for the
> > __ANDROID__ case.  Do you?  If yes, I wonder why it isn't getting
> > activated.
> >
> > Perhaps you should review the fairly new android notes at:
> >
> >    http://trac.osgeo.org/gdal/wiki/BuildingForAndroid
> >
> > Best regards,
>
> I see that the path is /home/rashadkm/gdal-1.8.0/port so I deduce this is a
> GDAL 1.8.0 build. But the adjustment for Android has been introduced in
> trunk
> (1.9.0dev) very recently. See http://trac.osgeo.org/gdal/ticket/3952
>



-- 
Thanks && Regards
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110218/0baa6d94/attachment.html
From bcclaywell at gmail.com  Thu Feb 17 16:23:43 2011
From: bcclaywell at gmail.com (Brian Claywell)
Date: Thu Feb 17 16:23:47 2011
Subject: [gdal-dev] MrSID mask band support
In-Reply-To: <201102152019.01529.even.rouault@mines-paris.org>
References: <AANLkTikuT4ECbVDZ6UcgOoxJ3EUOir2E90pJx6yBPHft@mail.gmail.com>
	<201102152019.01529.even.rouault@mines-paris.org>
Message-ID: <AANLkTi=zLY2-JB87wSjMLWeAHUs-zZZxa3H4p=fCP4wn@mail.gmail.com>

On Tue, Feb 15, 2011 at 1:19 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
>> Barring that, since the MrSID driver reimplements the
>> overview-related virtual functions to bypass the default overview
>> manager, would there be any harm in initializing the overview manager
>> when a MrSIDDataset object is created?
>
> Yes I think this should be harmless. But I'm not too sure of what will happen
> if you try to get the overviews of the mask, or the mask of the overviews ...

The basics of the patch were easy enough (23 lines): I initialize the
overview manager near the end of MrSIDDataset::Open(), and implemented
MrSIDDataset::IBuildOverviews() to simply print a warning, as Frank
suggested.

As to your last comment about masks of the overviews and overviews of
the masks, Even, the behavior as it stands after this patch is that 1)
the masks of the overviews are coming back as GMF_ALL_VALID, and 2)
overviews of the masks are non-existent. I believe this is consistent
with the current behavior of, e.g., adding a per-dataset mask to a
GeoTIFF file that already has overviews. If that's sufficient, I'll
create a ticket and submit the patch as-is -- otherwise, I'm open to
suggestions.

-b

-- 
Brian Claywell
bcclaywell@gmail.com
From even.rouault at mines-paris.org  Thu Feb 17 16:48:12 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb 17 16:48:19 2011
Subject: [gdal-dev] MrSID mask band support
In-Reply-To: <AANLkTi=zLY2-JB87wSjMLWeAHUs-zZZxa3H4p=fCP4wn@mail.gmail.com>
References: <AANLkTikuT4ECbVDZ6UcgOoxJ3EUOir2E90pJx6yBPHft@mail.gmail.com>
	<201102152019.01529.even.rouault@mines-paris.org>
	<AANLkTi=zLY2-JB87wSjMLWeAHUs-zZZxa3H4p=fCP4wn@mail.gmail.com>
Message-ID: <201102172248.12251.even.rouault@mines-paris.org>

Le jeudi 17 f?vrier 2011 22:23:43, Brian Claywell a ?crit :
> On Tue, Feb 15, 2011 at 1:19 PM, Even Rouault
> 
> <even.rouault@mines-paris.org> wrote:
> >> Barring that, since the MrSID driver reimplements the
> >> overview-related virtual functions to bypass the default overview
> >> manager, would there be any harm in initializing the overview manager
> >> when a MrSIDDataset object is created?
> > 
> > Yes I think this should be harmless. But I'm not too sure of what will
> > happen if you try to get the overviews of the mask, or the mask of the
> > overviews ...
> 
> The basics of the patch were easy enough (23 lines): I initialize the
> overview manager near the end of MrSIDDataset::Open(), and implemented
> MrSIDDataset::IBuildOverviews() to simply print a warning, as Frank
> suggested.
> 
> As to your last comment about masks of the overviews and overviews of
> the masks, Even, the behavior as it stands after this patch is that 1)
> the masks of the overviews are coming back as GMF_ALL_VALID, and 2)
> overviews of the masks are non-existent. I believe this is consistent
> with the current behavior of, e.g., adding a per-dataset mask to a
> GeoTIFF file that already has overviews. If that's sufficient, I'll
> create a ticket and submit the patch as-is -- otherwise, I'm open to
> suggestions.

I think it must be OK as it is. Actually 
GDALDefaultOverviews::IBuildOverviews() will build overviews of the mask if 
the mask already exists, but yes, creating a mask after building the overviews 
will not lead to automatic building of the overviews of the mask. Those are 
really very specialized cases that could be improved later. Actually, you can 
run IBuildOverviews() on the .msk file and the overviews of the mask should be 
usable.

> 
> -b
From bhudspeth at edac.unm.edu  Thu Feb 17 17:21:17 2011
From: bhudspeth at edac.unm.edu (William Hudspeth)
Date: Thu Feb 17 17:30:11 2011
Subject: [gdal-dev] How to reproject a geotiff using osgeo gdal python
	bindings
Message-ID: <1297981277.1490.3.camel@wilbur-desktop>

Hello,

I am trying to project a raster in lambert conformal conic projection to
geographic dd wgs84. The cell resolution changes between the two, so I
don't know what the final grid size is in the geographic raster. Does
anyone have any complete examples of opening a geotiff in lambert, and
writing the complete dataset out to geographic?

Thanks Bill

From even.rouault at mines-paris.org  Thu Feb 17 19:02:30 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb 17 19:02:37 2011
Subject: [gdal-dev] Potential dangerous use of CPLSetErrorHandler()
Message-ID: <201102180102.30382.even.rouault@mines-paris.org>

Hi Roger,

not sure if you are the appropriate recipient for this email, but as your name 
appeared on http://cran.r-project.org/web/packages/rgdal/index.html I try my 
chance ;-).

(CC'ing gdal-dev too since other users of GDAL might be interested by the 
issue related with CPLSetErrorHandler() in other contexts)

I had a discussion with Bob on the GDAL IRC that you can follow here :

http://logs.qgis.org/gdal/%23gdal.2011-02-16.log and
http://logs.qgis.org/gdal/%23gdal.2011-02-17.log

Here's my analysis (based on https://r-forge.r-
project.org/scm/viewvc.php/trunk/src/gdal-bindings.cpp?view=markup&root=rgdal 
) of what leads to the crash he noticed (of course I can be wrong since my 
knowledge of R is null, so this is mostly based on guess) :
1) QGIS loads a plugin that loads RGDAL
2) When RGDAL is initialized, it installs a global error handler 
__errorHandler with CPLSetErrorHandler()
3) Some functions of QGIS unrelated to RGDAL causes a CPLError() to be emitted 
by GDAL/OGR
4) The global RGDAL error handler is triggered, causes the error() method to 
be called which apparently causes a longjmp() to the R interpreter
5) At that point QGIS crashes as the longjmp() is inappropriate because R 
isn't ready for being run at that point

So my suggestion would be not to use a global error handler set when RGDAL is 
initialized, but rather for each binding of the GDAL API, install a local 
error handler with CPLPushErrorHandler(__errorHandler) and uninstall it before 
returning to R with CPLPopErrorHandler()

For example :

SEXP
RGDAL_GetDescription(SEXP sxpObj) {

  void *pGDALObj = getGDALObjPtr(sxpObj);

  CPLPushErrorHandler(__errorHandler);

  const char *desc = ((GDALMajorObject *)pGDALObj)->GetDescription();

  CPLPopErrorHandler();

  return(mkString_safe(desc));

}

This is going to be quite painfull since you have to do this for each GDAL 
method you bind, and be careful to correctly pair CPLPushErrorHandler() / 
CPLPopErrorHandler() (the later being the easiest to forget in unsuual code 
paths, such as error code paths).

Best regards,

Even

From even.rouault at mines-paris.org  Thu Feb 17 19:27:13 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb 17 19:27:21 2011
Subject: [gdal-dev] Potential dangerous use of CPLSetErrorHandler()
In-Reply-To: <201102180102.30382.even.rouault@mines-paris.org>
References: <201102180102.30382.even.rouault@mines-paris.org>
Message-ID: <201102180127.13934.even.rouault@mines-paris.org>

Le vendredi 18 f?vrier 2011 01:02:30, Even Rouault a ?crit :
> 
> So my suggestion would be not to use a global error handler set when RGDAL
> is initialized, but rather for each binding of the GDAL API, install a
> local error handler with CPLPushErrorHandler(__errorHandler) and uninstall
> it before returning to R with CPLPopErrorHandler()
> 
> For example :
> 
> SEXP
> RGDAL_GetDescription(SEXP sxpObj) {
> 
>   void *pGDALObj = getGDALObjPtr(sxpObj);
> 
>   CPLPushErrorHandler(__errorHandler);
> 
>   const char *desc = ((GDALMajorObject *)pGDALObj)->GetDescription();
> 
>   CPLPopErrorHandler();
> 
>   return(mkString_safe(desc));
> 
> }
> 

Actually, I'm just thinking that when an error actually triggers, the 
CPLPopErrorHandler() will not be called due to the longjmp() done in the error 
handler... So you probably needs to call CPLPopErrorHandler() in the error 
handler before it to call error() (a quick review of port/cpl_error.cpp leads 
me to think this is OK to do so, but this needs certainly some testing)

Or other possibility, it might be dangerous that the error handler interrupts 
the GDAL code flow with the longjmp(). It could cause memory leaks or leaves 
GDAL in an unstable state (unreleased locks, or whatever). What would be safer 
would be that the error handler just stores the error code and/or message, and 
just looks at it after the return from the GDAL code.

Something like this :

static CPLErr saved_eErrClass = CE_None;
static saved_err_no = 0;
static char saved_error_msg[2048];

static void
__errorHandler(CPLErr eErrClass, int err_no, const char *msg) {
	saved_eErrClass = eErrClass;
	saved_err_no = err_no;
/* a mutex could be usefull here to avoid a race condition if 2 threads 
trigger the error handler at the same time */
	strncpy(saved_error_msg, msg, sizeof(saved_error_msg));
        saved_error_msg[sizeof(saved_error_msg)-1] = 0;
}

void installErrorHandler()
{
   CPLPushErrorHandler(__errorHandler);
   saved_err_no = 0;
}

void uninstallErrorHandlerAndTriggerRError()
{
    CPLPopErrorHandler();
    if (saved_err_no == CE_Warning) {

    warning("\n\tNon-fatal GDAL Error %d: %s\n", saved_err_no, 
saved_error_msg);

  } else if (saved_err_no == CE_Failure) {

    error("\n\tGDAL Error %d: %s\n", saved_err_no, saved_error_msg);

  }
}

SEXP
RGDAL_GetDescription(SEXP sxpObj) {

  void *pGDALObj = getGDALObjPtr(sxpObj);

  installErrorHandler();

  const char *desc = ((GDALMajorObject *)pGDALObj)->GetDescription();

   uninstallErrorHandlerAndTriggerRError();

  return(mkString_safe(desc));

}

Or you could also take the approach of 
gdal/swig/include/python/python_exceptions.i where the installed error handler 
just forwards CE_Fatal, CE_Warning and CE_Debug to the previous error handler 
(or the default one if there's none). After the GDAL call, it just looks at 
CPLGetLastErrorType() and if it is CE_Failure, it triggers a Python exception 
with the error messages fetched with CPLGetLastErrorMsg(). 
From Derrick.Wong at csiro.au  Thu Feb 17 21:54:25 2011
From: Derrick.Wong at csiro.au (Derrick.Wong@csiro.au)
Date: Thu Feb 17 21:55:34 2011
Subject: [gdal-dev] Segmentation fault using gdal_translate in 1.8.0
In-Reply-To: <C237184E7081314392F31AE826947FFA4E566E6843@EXWA-MBX01.nexus.csiro.au>
References: <C237184E7081314392F31AE826947FFA4E566E683E@EXWA-MBX01.nexus.csiro.au>
	<C237184E7081314392F31AE826947FFA4E566E6843@EXWA-MBX01.nexus.csiro.au>
Message-ID: <C237184E7081314392F31AE826947FFA4E566E6844@EXWA-MBX01.nexus.csiro.au>

Hi all,

I have updated to use GDAL 1.8 and I am having problems using gdal_translate to convert netCDF files to Geotiff or ERS. I am getting "Segmentation fault" errors only occurring in 1.8.0. I was using 1.7.3 previously.

Could someone kindly advise?

Thank you for your time.
Derrick Wong
Software Engineer | Spatial Information Services Stack (SISS) Project | CSIRO

Phone: +61 8 6436 8945
derrick.wong@csiro.au<mailto:derrick.wong@csiro.au> | www.csiro.au<http://www.csiro.au>
Address: Spatial Information Services Stack (SISS), 26 Dick Perry Avenue, Kensington WA 6151, Australia

PLEASE NOTE
The information contained in this email may be confidential or privileged. Any unauthorised use or disclosure is prohibited. If you have received this email in error, please delete it immediately and notify the sender by return email. Thank you. To the extent permitted by law, CSIRO does not represent, warrant and/or guarantee that the integrity of this communication has been maintained or that the communication is free of errors, virus, interception or interference.
Please consider the environment before printing this email.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110218/5fa5d8b8/attachment.html
From ksshannon at gmail.com  Thu Feb 17 22:32:22 2011
From: ksshannon at gmail.com (Kyle Shannon)
Date: Thu Feb 17 22:32:39 2011
Subject: [gdal-dev] Segmentation fault using gdal_translate in 1.8.0
In-Reply-To: <C237184E7081314392F31AE826947FFA4E566E6844@EXWA-MBX01.nexus.csiro.au>
References: <C237184E7081314392F31AE826947FFA4E566E683E@EXWA-MBX01.nexus.csiro.au>
	<C237184E7081314392F31AE826947FFA4E566E6843@EXWA-MBX01.nexus.csiro.au>
	<C237184E7081314392F31AE826947FFA4E566E6844@EXWA-MBX01.nexus.csiro.au>
Message-ID: <AANLkTinfhJamt8fuq1hOVL2VxP_0_osF4TL3taRDKhaJ@mail.gmail.com>

Derrick,
Can you file a ticket and attach a sample data set?  Do you have any other
details?  A gdalinfo of the netcdf file and another of one of the variables
would be great.  Thanks.

kss


# ============================
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406)829-6954
kshannon@fs.fed.us
# ============================


On Thu, Feb 17, 2011 at 19:54, <Derrick.Wong@csiro.au> wrote:

> Hi all,
>
>
>
> I have updated to use GDAL 1.8 and I am having problems using
> gdal_translate to convert netCDF files to Geotiff or ERS. I am getting
> ?Segmentation fault? errors only occurring in 1.8.0. I was using 1.7.3
> previously.
>
>
>
> Could someone kindly advise?
>
>
>
> Thank you for your time.
>
> *Derrick Wong** *
> Software Engineer *|* Spatial Information Services Stack (SISS) Project *|
> *CSIRO
>
> Phone: +61 8 6436 8945
> derrick.wong@csiro.au *|* www.csiro.au
> Address: Spatial Information Services Stack (SISS), 26 Dick Perry Avenue,
> Kensington WA 6151, Australia
>
> *PLEASE NOTE**
> *The information contained in this email may be confidential or
> privileged. Any unauthorised use or disclosure is prohibited. If you have
> received this email in error, please delete it immediately and notify the
> sender by return email. Thank you. To the extent permitted by law, CSIRO
> does not represent, warrant and/or guarantee that the integrity of this
> communication has been maintained or that the communication is free of
> errors, virus, interception or interference.
>
> *Please consider the environment before printing this email.*
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110217/30defe89/attachment-0001.html
From Derrick.Wong at csiro.au  Thu Feb 17 23:27:21 2011
From: Derrick.Wong at csiro.au (Derrick.Wong@csiro.au)
Date: Thu Feb 17 23:27:29 2011
Subject: [gdal-dev] Segmentation fault using gdal_translate in 1.8.0
In-Reply-To: <AANLkTinfhJamt8fuq1hOVL2VxP_0_osF4TL3taRDKhaJ@mail.gmail.com>
References: <C237184E7081314392F31AE826947FFA4E566E683E@EXWA-MBX01.nexus.csiro.au>
	<C237184E7081314392F31AE826947FFA4E566E6843@EXWA-MBX01.nexus.csiro.au>
	<C237184E7081314392F31AE826947FFA4E566E6844@EXWA-MBX01.nexus.csiro.au>
	<AANLkTinfhJamt8fuq1hOVL2VxP_0_osF4TL3taRDKhaJ@mail.gmail.com>
Message-ID: <C237184E7081314392F31AE826947FFA4E566E684A@EXWA-MBX01.nexus.csiro.au>

Skipped content of type multipart/alternative-------------- next part --------------
Driver: netCDF/Network Common Data Format
Files: ga_fixed2_1e75_911d_7726.nc
Size is 179, 180
Coordinate System is `'
Origin = (147.124923499972280,-39.969630500001372)
Pixel Size = (0.008332999999993,-0.008333000000000)
Metadata:
  NC_GLOBAL#cdm_data_type=Grid
  NC_GLOBAL#Conventions=CF-1.0, COARDS, Unidata Dataset Discovery v1.0
  NC_GLOBAL#Easternmost_Easting=148.612
  NC_GLOBAL#geospatial_lat_max=-39.9738
  NC_GLOBAL#geospatial_lat_min=-41.4654
  NC_GLOBAL#geospatial_lon_max=148.612
  NC_GLOBAL#geospatial_lon_min=147.129
  NC_GLOBAL#history=2011-02-01 http://apacsrv6/thredds/dodsC/ga/onshore_only_Bouguer_geodetic_fixed2
.nc
2011-02-01 http://apacsrv6.arrc.csiro.au/erddap/griddap/ga_fixed2.nc?onshore_only_Bouguer_geodetic[(
-41.46540400000144):(-39.973797000001376)][(147.12908999997228):(148.61236399997108)]&.draw=surface&
.vars=longitude|latitude|onshore_only_Bouguer_geodetic&.colorBar=|||||&.land=under
  NC_GLOBAL#infoUrl=http://apacsrv6/thredds/dodsC/ga/onshore_only_Bouguer_geodetic_fixed2.nc.html
  NC_GLOBAL#institution=APACSRV6
  NC_GLOBAL#license=The data may be used and redistributed for free but is not intended
for legal use, since it may contain inaccuracies. Neither the data
Contributor, ERD, NOAA, nor the United States Government, nor any
of their employees or contractors, makes any warranty, express or
implied, including warranties of merchantability and fitness for a
particular purpose, or assumes any legal liability for the accuracy,
completeness, or usefulness, of this information.
  NC_GLOBAL#Metadata_Conventions=CF-1.0, COARDS, Unidata Dataset Discovery v1.0
  NC_GLOBAL#Northernmost_Northing=-39.9738
  NC_GLOBAL#Source_Software=ESRI ArcGIS
  NC_GLOBAL#sourceUrl=http://apacsrv6/thredds/dodsC/ga/onshore_only_Bouguer_geodetic_fixed2.nc
  NC_GLOBAL#Southernmost_Northing=-41.4654
  NC_GLOBAL#standard_name_vocabulary=CF-12
  NC_GLOBAL#summary=APACSRV6 data from http://apacsrv6/thredds/dodsC/ga/onshore_only_Bouguer_geodeti
c_fixed2.nc.das .
  NC_GLOBAL#title=Ga onshore only Bouguer geodetic fixed2
  NC_GLOBAL#Westernmost_Easting=147.129
  onshore_only_Bouguer_geodetic#coordinates=lon lat
  onshore_only_Bouguer_geodetic#esri_pe_string=GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID
[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433
]]
  onshore_only_Bouguer_geodetic#ioos_category=Unknown
  onshore_only_Bouguer_geodetic#long_name=onshore_only_Bouguer_geodetic
  onshore_only_Bouguer_geodetic#missing_value=0.000000e+000
  onshore_only_Bouguer_geodetic#units=Degree
  latitude#_CoordinateAxisType=Lat
  latitude#actual_range=-41.4654, -39.9738
  latitude#axis=Y
  latitude#ioos_category=Location
  latitude#long_name=Latitude
  latitude#standard_name=latitude
  latitude#units=degrees_north
  longitude#_CoordinateAxisType=Lon
  longitude#actual_range=147.129, 148.612
  longitude#axis=X
  longitude#ioos_category=Location
  longitude#long_name=Longitude
  longitude#standard_name=longitude
  longitude#units=degrees_east
Corner Coordinates:
Upper Left  ( 147.1249235, -39.9696305)
Lower Left  ( 147.1249235, -41.4695705)
Upper Right ( 148.6165305, -39.9696305)
Lower Right ( 148.6165305, -41.4695705)
Center      ( 147.8707270, -40.7196005)
Band 1 Block=179x1 Type=Float32, ColorInterp=Undefined
  NoData Value=0
  Metadata:
    NETCDF_VARNAME=onshore_only_Bouguer_geodetic

From ksshannon at gmail.com  Fri Feb 18 02:06:34 2011
From: ksshannon at gmail.com (Kyle Shannon)
Date: Fri Feb 18 02:06:51 2011
Subject: [gdal-dev] Segmentation fault using gdal_translate in 1.8.0
In-Reply-To: <C237184E7081314392F31AE826947FFA4E566E684A@EXWA-MBX01.nexus.csiro.au>
References: <C237184E7081314392F31AE826947FFA4E566E683E@EXWA-MBX01.nexus.csiro.au>
	<C237184E7081314392F31AE826947FFA4E566E6843@EXWA-MBX01.nexus.csiro.au>
	<C237184E7081314392F31AE826947FFA4E566E6844@EXWA-MBX01.nexus.csiro.au>
	<AANLkTinfhJamt8fuq1hOVL2VxP_0_osF4TL3taRDKhaJ@mail.gmail.com>
	<C237184E7081314392F31AE826947FFA4E566E684A@EXWA-MBX01.nexus.csiro.au>
Message-ID: <AANLkTiknZUiG5vTXjxHJKzTBvZ4U8SDz7BirtUKqOqSX@mail.gmail.com>

Thanks Derrick, I will look at this in the morning.  I will file a ticket if
need be.  Thanks for the report, sorry about the inconvenience.

kss

# ============================
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406)829-6954
kshannon@fs.fed.us
# ============================


On Thu, Feb 17, 2011 at 21:27, <Derrick.Wong@csiro.au> wrote:

> Hi Kyle,
>
>
>
> Thanks for the reply.
>
>
>
> Gdalinfo on 1.8.0 gives me the same ?Segmentation fault? error.
>
>
>
> Attached is the dump using 1.7.3
>
>
>
> I have included a sample file and you can download it here:
>
>
>
> ftp://ftp.csiro.au/DerrickWong/sample/sample.nc
>
>
>
>
>
>
>
> *Derrick Wong** *
> Software Engineer *|* Spatial Information Services Stack (SISS) Project *|
> *CSIRO
>
> Phone: +61 8 6436 8945
> derrick.wong@csiro.au *|* www.csiro.au
> Address: Spatial Information Services Stack (SISS), 26 Dick Perry Avenue,
> Kensington WA 6151, Australia
>
> *PLEASE NOTE**
> *The information contained in this email may be confidential or
> privileged. Any unauthorised use or disclosure is prohibited. If you have
> received this email in error, please delete it immediately and notify the
> sender by return email. Thank you. To the extent permitted by law, CSIRO
> does not represent, warrant and/or guarantee that the integrity of this
> communication has been maintained or that the communication is free of
> errors, virus, interception or interference.
>
> *Please consider the environment before printing this email.*
>
>
>
> *From:* Kyle Shannon [mailto:ksshannon@gmail.com]
> *Sent:* Friday, 18 February 2011 11:32 AM
> *To:* Wong, Derrick (CESRE, Kensington)
> *Cc:* gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] Segmentation fault using gdal_translate in 1.8.0
>
>
>
> Derrick,
> Can you file a ticket and attach a sample data set?  Do you have any other
> details?  A gdalinfo of the netcdf file and another of one of the variables
> would be great.  Thanks.
>
> kss
>
>
> # ============================
> Kyle Shannon
> Physical Science Technician
> RMRS Fire Sciences Lab
> Fire, Fuels & Smoke - RWU 4405
> 5775 Highway 10 W.
> Missoula, MT 59808
> (406)829-6954
> kshannon@fs.fed.us
> # ============================
>
> On Thu, Feb 17, 2011 at 19:54, <Derrick.Wong@csiro.au> wrote:
>
> Hi all,
>
>
>
> I have updated to use GDAL 1.8 and I am having problems using
> gdal_translate to convert netCDF files to Geotiff or ERS. I am getting
> ?Segmentation fault? errors only occurring in 1.8.0. I was using 1.7.3
> previously.
>
>
>
> Could someone kindly advise?
>
>
>
> Thank you for your time.
>
> *Derrick Wong *
> Software Engineer *|* Spatial Information Services Stack (SISS) Project *|
> *CSIRO
>
> Phone: +61 8 6436 8945
> derrick.wong@csiro.au *|* www.csiro.au
> Address: Spatial Information Services Stack (SISS), 26 Dick Perry Avenue,
> Kensington WA 6151, Australia
>
> *PLEASE NOTE**
> *The information contained in this email may be confidential or
> privileged. Any unauthorised use or disclosure is prohibited. If you have
> received this email in error, please delete it immediately and notify the
> sender by return email. Thank you. To the extent permitted by law, CSIRO
> does not represent, warrant and/or guarantee that the integrity of this
> communication has been maintained or that the communication is free of
> errors, virus, interception or interference.
>
> *Please consider the environment before printing this email.*
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110218/903152e9/attachment-0001.html
From schut at sarvision.nl  Fri Feb 18 02:34:29 2011
From: schut at sarvision.nl (Vincent Schut)
Date: Fri Feb 18 02:35:36 2011
Subject: [gdal-dev] Gdal2tiles in Gdal18 and creating KMZ files
In-Reply-To: <AANLkTim_HURSJOs5SQxbovv=ziNLCNpre2q2Ke+TrK85@mail.gmail.com>
References: <AANLkTik8okbxnC9uU-hPo5c=srwB5qP2HYYasqszgEk5@mail.gmail.com>	<1297895714.4826.46.camel@winkey.org>
	<AANLkTim_HURSJOs5SQxbovv=ziNLCNpre2q2Ke+TrK85@mail.gmail.com>
Message-ID: <4D5E2105.6060209@sarvision.nl>

Roland,

not really an answer to your question, but note that - with a recent 
gdal - you can also create kmz by using the kmlsuperoverlay output 
format, e.g.:

gdal_translate -of kmlsuperoverlay <infile> out.kmz

your infile need be a rgb or rgba format (if you want to maintain 
transparency, add '-co format=png' to the gdal_translate command, 
otherwise jpeg's will be created for the tiles).

Regards,
Vincent.

On 02/17/2011 06:28 PM, Roland Duhaime wrote:
> Thanks Brian,
>
> I have reviewed OSGeo4W\bin\gdal2tiles.py and specifically line 1597
> containing the href tag to the png file:
>
> <Icon>
> <href>%(ty)d.%(tileformat)s</href>
> </Icon>
>
> I was curious if someone had any idea on how to modify this href tag to
> include the relative path as Brian suggests below.  I see that the
> appropriate path is already included in the name tag if the .kml is
> changed to .png.  Any ideas on the best approach would be appreciated.
> Also, is this relative path something that should be added to the
> general release to support kmz compression?
>
> Thanks,
> Roland
>
>
>
>
> On Wed, Feb 16, 2011 at 5:35 PM, brian <rush@winkey.org
> <mailto:rush@winkey.org>> wrote:
>
>     Roland
>
>
>     the problem is in /12/1211/2558.kml line 26
>
>     <href>2558.png</href>
>
>     this should be a relative path from the root of the zipfile not from
>     2558.kml
>
>     Brian
>
>
>
>     On Wed, 2011-02-16 at 15:14 -0500, Roland Duhaime wrote:
>      >
>      > I am following the instructions for creating one KMZ file that are
>      > posted here:
>      >
>      > http://trac.osgeo.org/gdal/wiki/UserDocs/Gdal2Tiles
>      >
>      > I am using gdal2tiles under the "gdal" package 1.8.  I have having
>      > success creating superoverlays and the related folder structure.
>       I am
>      > able to read the created doc.kml in Google Earth.  However, when I
>      > attempt to zip up the folder structure using 7zip and rename the file
>      > to test.kmz, the file doesn't read properly in Google Earth (GE).  GE
>      > zooms into the correct location but all I see is a red "x".
>      > Compressing the superoverlay structure seems to break the link
>     between
>      > the doc.kml file and the png files.  As an example, I have created a
>      > tiny (21 KB)  example and placed it here:
>      >
>      > http://www.edc.uri.edu/Personal/roland/test.kmz
>      >
>      > I am curious if someone had some insight.
>      >
>      > All the Best,
>      > Roland
>      >
>      >
>      >
>      > _______________________________________________
>      > gdal-dev mailing list
>      > gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>      > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jef at norbit.de  Fri Feb 18 03:05:26 2011
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Fri Feb 18 03:06:02 2011
Subject: [gdal-dev] Potential dangerous use of CPLSetErrorHandler()
In-Reply-To: <201102180102.30382.even.rouault@mines-paris.org>
References: <201102180102.30382.even.rouault@mines-paris.org>
Message-ID: <20110218080526.GB13425@norbit.de>

Hi Even,

On Fri, 18. Feb 2011 at 01:02:30 +0100, Even Rouault wrote:
> This is going to be quite painfull since you have to do this for each GDAL 
> method you bind, and be careful to correctly pair CPLPushErrorHandler() / 
> CPLPopErrorHandler() (the later being the easiest to forget in unsuual code 
> paths, such as error code paths).

Something like 

http://trac.osgeo.org/qgis/browser/trunk/qgis/src/providers/ogr/qgsogrprovider.cpp#L67

might be useful to automate the push/pop.


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502

From vadp.devl at gmail.com  Fri Feb 18 03:39:40 2011
From: vadp.devl at gmail.com (Vadim Shlyakhov)
Date: Fri Feb 18 03:39:57 2011
Subject: [gdal-dev] Re: GCP list projection
References: <AANLkTinr_4+hXzzkD6ZzS7FdixYX0d2f51EmOJd9tO2=@mail.gmail.com>
	<4D5D641F.1070405@pobox.com>
Message-ID: <loom.20110218T093048-811@post.gmane.org>

Frank Warmerdam <warmerdam <at> pobox.com> writes:


> In theory it could make sense to have a dataset with a dataset level SRS
> and geotransform, and also GCPs with a different SRS.  In some cases the GCPs
> are in a particular SRS (say lat/long) just because it is a convenient
> coordinate system to collect the GCPs, not because it is representative of
> the geometry of the image.

Thanks Frank, That was actually my understanding. BSB and Ozi have their GCPs in
long/lat, so I thought that a feature for such a case.

So, if you have GCP SRS, you don't need SRS set at the dataset level, do you?

BTW I've noticed if a dataset doesn't have a geotransform, then
ds.GetGeoTransform() returns (0.0, 1.0, 0.0, 0.0, 0.0, 1.0). Is that a feature
or a bug?



From Roger.Bivand at nhh.no  Fri Feb 18 03:58:11 2011
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri Feb 18 03:58:27 2011
Subject: [gdal-dev] Potential dangerous use of CPLSetErrorHandler()
In-Reply-To: <201102180127.13934.even.rouault@mines-paris.org>
References: <201102180102.30382.even.rouault@mines-paris.org>
	<201102180127.13934.even.rouault@mines-paris.org>
Message-ID: <alpine.LRH.2.00.1102180923370.4359@reclus.nhh.no>

On Fri, 18 Feb 2011, Even Rouault wrote:

> Le vendredi 18 f?vrier 2011 01:02:30, Even Rouault a ?crit :
>>
>> So my suggestion would be not to use a global error handler set when RGDAL
>> is initialized, but rather for each binding of the GDAL API, install a
>> local error handler with CPLPushErrorHandler(__errorHandler) and uninstall
>> it before returning to R with CPLPopErrorHandler()

Even,

This analysis holds in a shared object/DLL world, right? For our static 
builds of rgdal.dll for Windows 32/64-bit, there would be no interaction? 
So it's a case of dynamic linking having rather tricky pitfalls?

In GRASS, the modules linked to GDAL/OGR are short-lived, and over the 
years, nobody has reported any issues (though that isn't hard evidence), 
but QGIS and R are running together over longer periods.

I'm adding Carson Farmer to the CCs in case he is not subscribed here - he 
has some nice R/QGIS interfaces, and may be able to help in setting up a 
test rig.

Note that R runs single threaded (plus a GUI thread if there is a GUI), 
now because it is useful to run separate parallel R threads across 
multicore processors, and the R engine is small.

I feel that we need a test rig to be able to provoke the problem 
predictably, so that we know when it is settled, for known versions of 
GDAL/OGR, R, and rgdal, and versions of QGIS if we cannot provoke the 
problem without it.

From the initial report from Bob, it isn't clear (for me) how R/rgdal came 
into the picture? Is R with rgdal loaded running but separate from QGIS, 
or is R being called (even through system or via python) from QGIS?

Bob says on IRC that the problem occurs when the MCE Lite plugin is loaded 
in QGIS, but not otherwise - the plugin does not use R or rgdal. Could Bob 
confirm that this is the case, or does the problem occur independently of 
MCE Lite being loaded? Do we know which QGIS plugin is loading R and 
rgdal, and how?

Since that part of rgdal dates back at least 8 years, it may be worth 
revisiting, but I'd like to have a fuller analysis and test rig before 
modifying hundreds of functions calling GDAL and OGR in rgdal.

Roger

>>
>> For example :
>>
>> SEXP
>> RGDAL_GetDescription(SEXP sxpObj) {
>>
>>   void *pGDALObj = getGDALObjPtr(sxpObj);
>>
>>   CPLPushErrorHandler(__errorHandler);
>>
>>   const char *desc = ((GDALMajorObject *)pGDALObj)->GetDescription();
>>
>>   CPLPopErrorHandler();
>>
>>   return(mkString_safe(desc));
>>
>> }
>>
>
> Actually, I'm just thinking that when an error actually triggers, the
> CPLPopErrorHandler() will not be called due to the longjmp() done in the error
> handler... So you probably needs to call CPLPopErrorHandler() in the error
> handler before it to call error() (a quick review of port/cpl_error.cpp leads
> me to think this is OK to do so, but this needs certainly some testing)
>
> Or other possibility, it might be dangerous that the error handler interrupts
> the GDAL code flow with the longjmp(). It could cause memory leaks or leaves
> GDAL in an unstable state (unreleased locks, or whatever). What would be safer
> would be that the error handler just stores the error code and/or message, and
> just looks at it after the return from the GDAL code.
>
> Something like this :
>
> static CPLErr saved_eErrClass = CE_None;
> static saved_err_no = 0;
> static char saved_error_msg[2048];
>
> static void
> __errorHandler(CPLErr eErrClass, int err_no, const char *msg) {
> 	saved_eErrClass = eErrClass;
> 	saved_err_no = err_no;
> /* a mutex could be usefull here to avoid a race condition if 2 threads
> trigger the error handler at the same time */
> 	strncpy(saved_error_msg, msg, sizeof(saved_error_msg));
>        saved_error_msg[sizeof(saved_error_msg)-1] = 0;
> }
>
> void installErrorHandler()
> {
>   CPLPushErrorHandler(__errorHandler);
>   saved_err_no = 0;
> }
>
> void uninstallErrorHandlerAndTriggerRError()
> {
>    CPLPopErrorHandler();
>    if (saved_err_no == CE_Warning) {
>
>    warning("\n\tNon-fatal GDAL Error %d: %s\n", saved_err_no,
> saved_error_msg);
>
>  } else if (saved_err_no == CE_Failure) {
>
>    error("\n\tGDAL Error %d: %s\n", saved_err_no, saved_error_msg);
>
>  }
> }
>
> SEXP
> RGDAL_GetDescription(SEXP sxpObj) {
>
>  void *pGDALObj = getGDALObjPtr(sxpObj);
>
>  installErrorHandler();
>
>  const char *desc = ((GDALMajorObject *)pGDALObj)->GetDescription();
>
>   uninstallErrorHandlerAndTriggerRError();
>
>  return(mkString_safe(desc));
>
> }
>
> Or you could also take the approach of
> gdal/swig/include/python/python_exceptions.i where the installed error handler
> just forwards CE_Fatal, CE_Warning and CE_Debug to the previous error handler
> (or the default one if there's none). After the GDAL call, it just looks at
> CPLGetLastErrorType() and if it is CE_Failure, it triggers a Python exception
> with the error messages fetched with CPLGetLastErrorMsg().
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no
From chaitanya.ch at gmail.com  Fri Feb 18 05:51:27 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Feb 18 05:51:28 2011
Subject: [gdal-dev] Re: GCP list projection
In-Reply-To: <loom.20110218T093048-811@post.gmane.org>
References: <AANLkTinr_4+hXzzkD6ZzS7FdixYX0d2f51EmOJd9tO2=@mail.gmail.com>
	<4D5D641F.1070405@pobox.com>
	<loom.20110218T093048-811@post.gmane.org>
Message-ID: <AANLkTinZq8Vam65mXFsimNMNTtH5xa0-h9a4T7RachUT@mail.gmail.com>

Vadim,

(0,1,0,0,0,1) is the default transform and will be returned even in case of
an error.

On Fri, Feb 18, 2011 at 2:09 PM, Vadim Shlyakhov <vadp.devl@gmail.com>wrote:

> Frank Warmerdam <warmerdam <at> pobox.com> writes:
>
>
> > In theory it could make sense to have a dataset with a dataset level SRS
> > and geotransform, and also GCPs with a different SRS.  In some cases the
> GCPs
> > are in a particular SRS (say lat/long) just because it is a convenient
> > coordinate system to collect the GCPs, not because it is representative
> of
> > the geometry of the image.
>
> Thanks Frank, That was actually my understanding. BSB and Ozi have their
> GCPs in
> long/lat, so I thought that a feature for such a case.
>
> So, if you have GCP SRS, you don't need SRS set at the dataset level, do
> you?
>
> BTW I've noticed if a dataset doesn't have a geotransform, then
> ds.GetGeoTransform() returns (0.0, 1.0, 0.0, 0.0, 0.0, 1.0). Is that a
> feature
> or a bug?
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110218/df8e675e/attachment.html
From chaitanya.ch at gmail.com  Fri Feb 18 06:55:32 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Feb 18 07:01:34 2011
Subject: [gdal-dev] Segmentation fault using gdal_translate in 1.8.0
In-Reply-To: <C237184E7081314392F31AE826947FFA4E566E684A@EXWA-MBX01.nexus.csiro.au>
References: <C237184E7081314392F31AE826947FFA4E566E683E@EXWA-MBX01.nexus.csiro.au>
	<C237184E7081314392F31AE826947FFA4E566E6843@EXWA-MBX01.nexus.csiro.au>
	<C237184E7081314392F31AE826947FFA4E566E6844@EXWA-MBX01.nexus.csiro.au>
	<AANLkTinfhJamt8fuq1hOVL2VxP_0_osF4TL3taRDKhaJ@mail.gmail.com>
	<C237184E7081314392F31AE826947FFA4E566E684A@EXWA-MBX01.nexus.csiro.au>
Message-ID: <AANLkTik6wRM1cphaXO85EutdOrC1kzDyi8AnhzPREHEm@mail.gmail.com>

Derrick,

I was able to run gdalinfo and gdal_translate on your sample dataset without
any error.
Can you provide some more details like your platform and the settings you
used to compile GDAL?

On Fri, Feb 18, 2011 at 9:57 AM, <Derrick.Wong@csiro.au> wrote:

> Hi Kyle,
>
>
>
> Thanks for the reply.
>
>
>
> Gdalinfo on 1.8.0 gives me the same ?Segmentation fault? error.
>
>
>
> Attached is the dump using 1.7.3
>
>
>
> I have included a sample file and you can download it here:
>
>
>
> ftp://ftp.csiro.au/DerrickWong/sample/sample.nc
>
>
>
>
>
>
>
> *Derrick Wong** *
> Software Engineer *|* Spatial Information Services Stack (SISS) Project *|
> *CSIRO
>
> Phone: +61 8 6436 8945
> derrick.wong@csiro.au *|* www.csiro.au
> Address: Spatial Information Services Stack (SISS), 26 Dick Perry Avenue,
> Kensington WA 6151, Australia
>
> *PLEASE NOTE**
> *The information contained in this email may be confidential or
> privileged. Any unauthorised use or disclosure is prohibited. If you have
> received this email in error, please delete it immediately and notify the
> sender by return email. Thank you. To the extent permitted by law, CSIRO
> does not represent, warrant and/or guarantee that the integrity of this
> communication has been maintained or that the communication is free of
> errors, virus, interception or interference.
>
> *Please consider the environment before printing this email.*
>
>
>
> *From:* Kyle Shannon [mailto:ksshannon@gmail.com]
> *Sent:* Friday, 18 February 2011 11:32 AM
> *To:* Wong, Derrick (CESRE, Kensington)
> *Cc:* gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] Segmentation fault using gdal_translate in 1.8.0
>
>
>
> Derrick,
> Can you file a ticket and attach a sample data set?  Do you have any other
> details?  A gdalinfo of the netcdf file and another of one of the variables
> would be great.  Thanks.
>
> kss
>
>
> # ============================
> Kyle Shannon
> Physical Science Technician
> RMRS Fire Sciences Lab
> Fire, Fuels & Smoke - RWU 4405
> 5775 Highway 10 W.
> Missoula, MT 59808
> (406)829-6954
> kshannon@fs.fed.us
> # ============================
>
> On Thu, Feb 17, 2011 at 19:54, <Derrick.Wong@csiro.au> wrote:
>
> Hi all,
>
>
>
> I have updated to use GDAL 1.8 and I am having problems using
> gdal_translate to convert netCDF files to Geotiff or ERS. I am getting
> ?Segmentation fault? errors only occurring in 1.8.0. I was using 1.7.3
> previously.
>
>
>
> Could someone kindly advise?
>
>
>
> Thank you for your time.
>
> *Derrick Wong *
> Software Engineer *|* Spatial Information Services Stack (SISS) Project *|
> *CSIRO
>
> Phone: +61 8 6436 8945
> derrick.wong@csiro.au *|* www.csiro.au
> Address: Spatial Information Services Stack (SISS), 26 Dick Perry Avenue,
> Kensington WA 6151, Australia
>
> *PLEASE NOTE**
> *The information contained in this email may be confidential or
> privileged. Any unauthorised use or disclosure is prohibited. If you have
> received this email in error, please delete it immediately and notify the
> sender by return email. Thank you. To the extent permitted by law, CSIRO
> does not represent, warrant and/or guarantee that the integrity of this
> communication has been maintained or that the communication is free of
> errors, virus, interception or interference.
>
> *Please consider the environment before printing this email.*
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110218/958f7d6d/attachment-0001.html
From chaitanya.ch at gmail.com  Fri Feb 18 07:12:58 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Feb 18 07:19:47 2011
Subject: [gdal-dev] How to reproject a geotiff using osgeo gdal python
	bindings
In-Reply-To: <1297981277.1490.3.camel@wilbur-desktop>
References: <1297981277.1490.3.camel@wilbur-desktop>
Message-ID: <AANLkTi=_P+54sNYMZaWDWSQh_dKQoDbUD83fMQEZqNj6@mail.gmail.com>

Bill,

You can use the -tr option in gdalwarp utility[0] to set the resolution of
the target raster. You can look at it's code[1].

[0] http://www.gdal.org/gdalwarp.html
[1] http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/gdalwarp.cpp

On Fri, Feb 18, 2011 at 3:51 AM, William Hudspeth <bhudspeth@edac.unm.edu>wrote:

> Hello,
>
> I am trying to project a raster in lambert conformal conic projection to
> geographic dd wgs84. The cell resolution changes between the two, so I
> don't know what the final grid size is in the geographic raster. Does
> anyone have any complete examples of opening a geotiff in lambert, and
> writing the complete dataset out to geographic?
>
> Thanks Bill
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110218/31cf92ea/attachment.html
From mohammedrashadkm at gmail.com  Fri Feb 18 08:08:13 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Fri Feb 18 08:16:34 2011
Subject: [gdal-dev] open shapefile from server
Message-ID: <AANLkTi=E+pxu1CwwCc9vA52Qe0qXrOn2A4gCa_ZYaBin@mail.gmail.com>

How can I open a shapefile and read the coordinates from it without
downloading into client.
just as mywebsite.com/shapefiles/myshape.shp and pass this to function as

poDS = OGRSFDriverRegistrar::Open("
http://mywebsite.com/shapefiles/myshape.shp", FALSE );

Is it possible in gdal/ogr?

I dont know if its an offtopic. If yes please ignore it.
-- 
Thanks && Regards
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110218/695744e0/attachment.html
From chaitanya.ch at gmail.com  Fri Feb 18 09:25:40 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Feb 18 09:25:42 2011
Subject: [gdal-dev] open shapefile from server
In-Reply-To: <AANLkTi=E+pxu1CwwCc9vA52Qe0qXrOn2A4gCa_ZYaBin@mail.gmail.com>
References: <AANLkTi=E+pxu1CwwCc9vA52Qe0qXrOn2A4gCa_ZYaBin@mail.gmail.com>
Message-ID: <AANLkTimPvXku37X0yVFyy_62yb26dUTk7C3ouJDwGOKO@mail.gmail.com>

Rashad,

Read the documentation on VSIInstallCurlFileHandler() in the cpl_vsi.h file
documentation.
http://www.gdal.org/cpl__vsi_8h.html

On Fri, Feb 18, 2011 at 6:38 PM, Mohammed Rashad <mohammedrashadkm@gmail.com
> wrote:

> How can I open a shapefile and read the coordinates from it without
> downloading into client.
> just as mywebsite.com/shapefiles/myshape.shp and pass this to function as
>
> poDS = OGRSFDriverRegistrar::Open("
> http://mywebsite.com/shapefiles/myshape.shp", FALSE );
>
> Is it possible in gdal/ogr?
>
> I dont know if its an offtopic. If yes please ignore it.
> --
> Thanks && Regards
> Rashad
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110218/1dfddbf9/attachment.html
From mateusz at loskot.net  Fri Feb 18 09:53:45 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Feb 18 09:49:03 2011
Subject: [gdal-dev] open shapefile from server
In-Reply-To: <AANLkTimPvXku37X0yVFyy_62yb26dUTk7C3ouJDwGOKO@mail.gmail.com>
References: <AANLkTi=E+pxu1CwwCc9vA52Qe0qXrOn2A4gCa_ZYaBin@mail.gmail.com>
	<AANLkTimPvXku37X0yVFyy_62yb26dUTk7C3ouJDwGOKO@mail.gmail.com>
Message-ID: <4D5E87F9.4090502@loskot.net>

On 18/02/11 14:25, Chaitanya kumar CH wrote:
> Rashad,
>
> Read the documentation on VSIInstallCurlFileHandler() in the cpl_vsi.h
> file documentation.
> http://www.gdal.org/cpl__vsi_8h.html

Nice features indeedb, but it does not guarantee "without
downloading the whole file", does it? It depends on what part of
file is being read, doesn't it?

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From mateusz at loskot.net  Fri Feb 18 08:54:17 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Feb 18 09:49:25 2011
Subject: [gdal-dev] open shapefile from server
In-Reply-To: <AANLkTi=E+pxu1CwwCc9vA52Qe0qXrOn2A4gCa_ZYaBin@mail.gmail.com>
References: <AANLkTi=E+pxu1CwwCc9vA52Qe0qXrOn2A4gCa_ZYaBin@mail.gmail.com>
Message-ID: <4D5E7A09.1080101@loskot.net>

On 18/02/11 13:08, Mohammed Rashad wrote:
> How can I open a shapefile and read the coordinates from it without
> downloading into client. just as mywebsite.com/shapefiles/myshape.shp
>  <http://mywebsite.com/shapefiles/myshape.shp> and pass this to
> function as
>
> poDS =
> OGRSFDriverRegistrar::Open("http://mywebsite.com/shapefiles/myshape.shp",
> FALSE );
>
> Is it possible in gdal/ogr?

It is not possible without downloading. Even if URL-based file open is
supported, the Open function would still need to download the whole file.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From warmerdam at pobox.com  Fri Feb 18 10:34:00 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 18 10:34:04 2011
Subject: [gdal-dev] Re: GCP list projection
In-Reply-To: <loom.20110218T093048-811@post.gmane.org>
References: <AANLkTinr_4+hXzzkD6ZzS7FdixYX0d2f51EmOJd9tO2=@mail.gmail.com>
	<4D5D641F.1070405@pobox.com> <loom.20110218T093048-811@post.gmane.org>
Message-ID: <4D5E9168.2040803@pobox.com>

On 11-02-18 03:39 AM, Vadim Shlyakhov wrote:
> So, if you have GCP SRS, you don't need SRS set at the dataset level, do you?

Vadim,

Correct.

> BTW I've noticed if a dataset doesn't have a geotransform, then
> ds.GetGeoTransform() returns (0.0, 1.0, 0.0, 0.0, 0.0, 1.0). Is that a feature
> or a bug?

As mentioned, this the fallback value when there isn't one.  But the method
should return CE_Failure on failure so you can distinguish whether the
unity transform is "real" or just a filler value.

So I consider it a feature.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Fri Feb 18 14:51:53 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Feb 18 14:52:09 2011
Subject: [gdal-dev] open shapefile from server
In-Reply-To: <4D5E87F9.4090502@loskot.net>
References: <AANLkTi=E+pxu1CwwCc9vA52Qe0qXrOn2A4gCa_ZYaBin@mail.gmail.com>
	<AANLkTimPvXku37X0yVFyy_62yb26dUTk7C3ouJDwGOKO@mail.gmail.com>
	<4D5E87F9.4090502@loskot.net>
Message-ID: <201102182051.53920.even.rouault@mines-paris.org>

Le vendredi 18 f?vrier 2011 15:53:45, Mateusz Loskot a ?crit :
> On 18/02/11 14:25, Chaitanya kumar CH wrote:
> > Rashad,
> > 
> > Read the documentation on VSIInstallCurlFileHandler() in the cpl_vsi.h
> > file documentation.
> > http://www.gdal.org/cpl__vsi_8h.html
> 
> Nice features indeedb, but it does not guarantee "without
> downloading the whole file", does it? It depends on what part of
> file is being read, doesn't it?

With GDAL 1.8.0, you can try :

poDS = OGRSFDriverRegistrar::Open("
/vsicurl/http://mywebsite.com/shapefiles/myshape.shp", FALSE );

Yes /vsicurl is no magic. If there's a VSIFReadL() call that reads the whole 
file in a single gulp, then the whole file would be downloaded of course, but 
most GDAL/OGR drivers try to only read the minimum necessary at open time. In 
the case of the shapefile driver, it will read essentially only the header of 
the .shp, .shx and .dbf files

Extra bonus: you can combine /vsizip with /vsicurl. For example, try :

ogrinfo -ro -so -al --debug on 
/vsizip/vsicurl/http://www.aprsworld.net/gisdata/world/world.zip

Expected result :

VSICURL: GetFileSize(http://www.aprsworld.net/gisdata/world/world.zip)=3436277  
response_code=200
VSICURL: Downloading 3424256-3440639 
(http://www.aprsworld.net/gisdata/world/world.zip)...
VSICURL: Downloading 3407872-3424255 
(http://www.aprsworld.net/gisdata/world/world.zip)...
VSICURL: Downloading 3391488-3407871 
(http://www.aprsworld.net/gisdata/world/world.zip)...
VSICURL: Downloading 3375104-3391487 
(http://www.aprsworld.net/gisdata/world/world.zip)...
VSICURL: Downloading 3358720-3375103 
(http://www.aprsworld.net/gisdata/world/world.zip)...
VSICURL: Downloading 0-16383 
(http://www.aprsworld.net/gisdata/world/world.zip)...
VSICURL: Downloading 16384-81919 
(http://www.aprsworld.net/gisdata/world/world.zip)...
OGR: 
OGROpen(/vsizip/vsicurl/http://www.aprsworld.net/gisdata/world/world.zip/0x1f35830) 
succeeded as ESRI Shapefile.
INFO: Open of 
`/vsizip/vsicurl/http://www.aprsworld.net/gisdata/world/world.zip'
      using driver `ESRI Shapefile' successful.
OGR: GetLayerCount() = 1


Layer name: world
Geometry: Polygon
Feature Count: 244
Extent: (-180.000000, -89.900000) - (180.000000, 83.674733)
Layer SRS WKT:
(unknown)
NAME: String (40.0)
CAPITAL: String (64.0)
APPROX: Real (15.0)
AREA: Real (20.15)
SOURCETHM: String (16.0)



> 
> Best regards,
From Roger.Bivand at nhh.no  Fri Feb 18 15:04:45 2011
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri Feb 18 15:03:59 2011
Subject: [gdal-dev] Potential dangerous use of CPLSetErrorHandler()
In-Reply-To: <AANLkTimZ4N8QLK+8cvx5sLSMqA9vRXtRr055_+pVJ4T0@mail.gmail.com>
References: <201102180102.30382.even.rouault@mines-paris.org>
	<201102180127.13934.even.rouault@mines-paris.org>
	<alpine.LRH.2.00.1102180923370.4359@reclus.nhh.no>
	<AANLkTimZ4N8QLK+8cvx5sLSMqA9vRXtRr055_+pVJ4T0@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.1102182015580.7042@reclus.nhh.no>

On Fri, 18 Feb 2011, Bob and Deb wrote:

> Roger,
>
> I have only 2 QGIS plugins that uses R.  They are Carson Farmer's
> manageR and Volkan Osman Kepoglu's SDA4P (see
> http://ggit.metu.edu.tr/~volkan/index.html).  Looking at the source
> code I see they both use rgdal.  I was not using these plugins when
> the crash occurred.  So, my guess is that one of the triggers to my
> problem was when one (if not both) of these plugins were registered
> (or whatever you call it) when QGIS started.
>
> After starting QGIS, I went to create a thematic map.  When I clicked
> on the Classify button, QGIS immediately crashed.  So, I turned off
> all of my plugins and enabled one plugin at a time then tried to
> create the thematic map.  When MCE Lite was enabled, QGIS crashed when
> I tried to make a thematic map.  As I said above, the 2 plugins that
> uses rgdal are manageR and SDA4P.  I'm not sure what QGIS does to
> plugins when it starts up, but I believe that was the trigger to my
> problem.
>
> I've added Volkan Osman Kepoglu to the CC list since he might be
> interested in this topic too.

Thanks, Bob, that is clearer.

Even,

I accept that "Set" is wrong and should be "Push"/"Pop".

I've committed "Push"/"Pop" to R-forge SVN - this corresponds to 1. below. 
It will be available as a source package for installation from within R on 
Saturday evening CET, I missed today's deadline.

Does CPL know which application has pushed/popped a handler - I can't see 
anything like the GEOS context handle which could be used to associate 
correctly different active programs using GDAL/OGR?

What granularity of error handler protection is needed:

1. when R loads and unloads rgdal - so that while rgdal is loaded in R, 
the R handler is at the top of the CPL error handler stack, when rgdal is 
unloaded in R, it is popped;

2. when R functions using the C/C++ interface to GDAL/OGR functions are 
entered or exit - not all the computation will be in C/C++, but will run 
continuously;

3. when C/C++ functions called by R functions, but using multiple C/C++ 
GDAL/OGR functions are entered or exit - all the computation will be in 
C/C++ but not all in GDAL/OGR, and will run continuously;

4. every time a C/C++ GDAL/OGR function is used with push just before the 
call, and pop just after the call;

Both 3. and 4. may be in loops; 4. very often are, like retrieving field 
values or geometries.

Grateful for any suggestions beyond those already given. If it has to be 
4, we'll have to take the performance hits involved.

Roger

>
> Bob
>
> On Fri, Feb 18, 2011 at 12:58 AM, Roger Bivand <Roger.Bivand@nhh.no> wrote:
>> On Fri, 18 Feb 2011, Even Rouault wrote:
>>
>>> Le vendredi 18 f?vrier 2011 01:02:30, Even Rouault a ?crit :
>>>>
>>>> So my suggestion would be not to use a global error handler set when
>>>> RGDAL
>>>> is initialized, but rather for each binding of the GDAL API, install a
>>>> local error handler with CPLPushErrorHandler(__errorHandler) and
>>>> uninstall
>>>> it before returning to R with CPLPopErrorHandler()
>>
>> Even,
>>
>> This analysis holds in a shared object/DLL world, right? For our static
>> builds of rgdal.dll for Windows 32/64-bit, there would be no interaction? So
>> it's a case of dynamic linking having rather tricky pitfalls?
>>
>> In GRASS, the modules linked to GDAL/OGR are short-lived, and over the
>> years, nobody has reported any issues (though that isn't hard evidence), but
>> QGIS and R are running together over longer periods.
>>
>> I'm adding Carson Farmer to the CCs in case he is not subscribed here - he
>> has some nice R/QGIS interfaces, and may be able to help in setting up a
>> test rig.
>>
>> Note that R runs single threaded (plus a GUI thread if there is a GUI), now
>> because it is useful to run separate parallel R threads across multicore
>> processors, and the R engine is small.
>>
>> I feel that we need a test rig to be able to provoke the problem
>> predictably, so that we know when it is settled, for known versions of
>> GDAL/OGR, R, and rgdal, and versions of QGIS if we cannot provoke the
>> problem without it.
>>
>> From the initial report from Bob, it isn't clear (for me) how R/rgdal came
>> into the picture? Is R with rgdal loaded running but separate from QGIS, or
>> is R being called (even through system or via python) from QGIS?
>>
>> Bob says on IRC that the problem occurs when the MCE Lite plugin is loaded
>> in QGIS, but not otherwise - the plugin does not use R or rgdal. Could Bob
>> confirm that this is the case, or does the problem occur independently of
>> MCE Lite being loaded? Do we know which QGIS plugin is loading R and rgdal,
>> and how?
>>
>> Since that part of rgdal dates back at least 8 years, it may be worth
>> revisiting, but I'd like to have a fuller analysis and test rig before
>> modifying hundreds of functions calling GDAL and OGR in rgdal.
>>
>> Roger
>>
>>>>
>>>> For example :
>>>>
>>>> SEXP
>>>> RGDAL_GetDescription(SEXP sxpObj) {
>>>>
>>>> ?void *pGDALObj = getGDALObjPtr(sxpObj);
>>>>
>>>> ?CPLPushErrorHandler(__errorHandler);
>>>>
>>>> ?const char *desc = ((GDALMajorObject *)pGDALObj)->GetDescription();
>>>>
>>>> ?CPLPopErrorHandler();
>>>>
>>>> ?return(mkString_safe(desc));
>>>>
>>>> }
>>>>
>>>
>>> Actually, I'm just thinking that when an error actually triggers, the
>>> CPLPopErrorHandler() will not be called due to the longjmp() done in the
>>> error
>>> handler... So you probably needs to call CPLPopErrorHandler() in the error
>>> handler before it to call error() (a quick review of port/cpl_error.cpp
>>> leads
>>> me to think this is OK to do so, but this needs certainly some testing)
>>>
>>> Or other possibility, it might be dangerous that the error handler
>>> interrupts
>>> the GDAL code flow with the longjmp(). It could cause memory leaks or
>>> leaves
>>> GDAL in an unstable state (unreleased locks, or whatever). What would be
>>> safer
>>> would be that the error handler just stores the error code and/or message,
>>> and
>>> just looks at it after the return from the GDAL code.
>>>
>>> Something like this :
>>>
>>> static CPLErr saved_eErrClass = CE_None;
>>> static saved_err_no = 0;
>>> static char saved_error_msg[2048];
>>>
>>> static void
>>> __errorHandler(CPLErr eErrClass, int err_no, const char *msg) {
>>> ? ? ? ?saved_eErrClass = eErrClass;
>>> ? ? ? ?saved_err_no = err_no;
>>> /* a mutex could be usefull here to avoid a race condition if 2 threads
>>> trigger the error handler at the same time */
>>> ? ? ? ?strncpy(saved_error_msg, msg, sizeof(saved_error_msg));
>>> ? ? ? saved_error_msg[sizeof(saved_error_msg)-1] = 0;
>>> }
>>>
>>> void installErrorHandler()
>>> {
>>> ?CPLPushErrorHandler(__errorHandler);
>>> ?saved_err_no = 0;
>>> }
>>>
>>> void uninstallErrorHandlerAndTriggerRError()
>>> {
>>> ? CPLPopErrorHandler();
>>> ? if (saved_err_no == CE_Warning) {
>>>
>>> ? warning("\n\tNon-fatal GDAL Error %d: %s\n", saved_err_no,
>>> saved_error_msg);
>>>
>>> ?} else if (saved_err_no == CE_Failure) {
>>>
>>> ? error("\n\tGDAL Error %d: %s\n", saved_err_no, saved_error_msg);
>>>
>>> ?}
>>> }
>>>
>>> SEXP
>>> RGDAL_GetDescription(SEXP sxpObj) {
>>>
>>> ?void *pGDALObj = getGDALObjPtr(sxpObj);
>>>
>>> ?installErrorHandler();
>>>
>>> ?const char *desc = ((GDALMajorObject *)pGDALObj)->GetDescription();
>>>
>>> ?uninstallErrorHandlerAndTriggerRError();
>>>
>>> ?return(mkString_safe(desc));
>>>
>>> }
>>>
>>> Or you could also take the approach of
>>> gdal/swig/include/python/python_exceptions.i where the installed error
>>> handler
>>> just forwards CE_Fatal, CE_Warning and CE_Debug to the previous error
>>> handler
>>> (or the default one if there's none). After the GDAL call, it just looks
>>> at
>>> CPLGetLastErrorType() and if it is CE_Failure, it triggers a Python
>>> exception
>>> with the error messages fetched with CPLGetLastErrorMsg().
>>>
>>
>> --
>> Roger Bivand
>> Economic Geography Section, Department of Economics, Norwegian School of
>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand@nhh.no
>>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no
From mateusz at loskot.net  Fri Feb 18 16:15:46 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Feb 18 16:15:55 2011
Subject: [gdal-dev] open shapefile from server
In-Reply-To: <201102182051.53920.even.rouault@mines-paris.org>
References: <AANLkTi=E+pxu1CwwCc9vA52Qe0qXrOn2A4gCa_ZYaBin@mail.gmail.com>
	<AANLkTimPvXku37X0yVFyy_62yb26dUTk7C3ouJDwGOKO@mail.gmail.com>
	<4D5E87F9.4090502@loskot.net>
	<201102182051.53920.even.rouault@mines-paris.org>
Message-ID: <4D5EE182.7040902@loskot.net>

On 18/02/11 19:51, Even Rouault wrote:
> Le vendredi 18 f?vrier 2011 15:53:45, Mateusz Loskot a ?crit :
>> On 18/02/11 14:25, Chaitanya kumar CH wrote:
>>> Rashad,
>>>
>>> Read the documentation on VSIInstallCurlFileHandler() in the cpl_vsi.h
>>> file documentation.
>>> http://www.gdal.org/cpl__vsi_8h.html
>>
>> Nice features indeedb, but it does not guarantee "without
>> downloading the whole file", does it? It depends on what part of
>> file is being read, doesn't it?
> 
> With GDAL 1.8.0, you can try :
> 
> poDS = OGRSFDriverRegistrar::Open("
> /vsicurl/http://mywebsite.com/shapefiles/myshape.shp", FALSE );
> 
> Yes /vsicurl is no magic. If there's a VSIFReadL() call that reads the whole 
> file in a single gulp, then the whole file would be downloaded of course, but 
> most GDAL/OGR drivers try to only read the minimum necessary at open time. In 
> the case of the shapefile driver, it will read essentially only the header of 
> the .shp, .shx and .dbf files

Thanks Even for the explanation.

Nice feature indeed.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From mariusjigmond at hotmail.com  Sat Feb 19 18:24:16 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Sat Feb 19 18:24:25 2011
Subject: [gdal-dev] gdal_rasterize 1.8.0 options
In-Reply-To: <201102050006.22865.even.rouault@mines-paris.org>
References: <BLU0-SMTP43BCC8D40A1F52FA0B542EB2E60@phx.gbl>
	<201102050006.22865.even.rouault@mines-paris.org>
Message-ID: <BLU0-SMTP203EEF5D849861C2FCDBCBEB2D70@phx.gbl>

Hi Even,

I'm not trying to re-ignite the stereo debate but I think there's more
to the issue with the warning. I've realized that the particular EPSG
code 3844 (not sure about others) is reported totally different by
ogrinfo and gdalinfo. It's not the actual reporting that's wrong but the
way -a_srs is applied by ogr2ogr versus gdal_translate. Below is an
example:
marius@mobi:~/data/romania/test$ gdalinfo RGB321-K-34-005.tif 
Driver: GTiff/GeoTIFF
Files: RGB321-K-34-005.tif
Size is 2985, 2775
Coordinate System is:
PROJCS["Pulkovo 1942(58) / Stereo70",
    GEOGCS["Pulkovo 1942(58)",
        DATUM["Pulkovo_1942_58",
            SPHEROID["Krassowsky 1940",6378245,298.2999999999998,
                AUTHORITY["EPSG","7024"]],
            AUTHORITY["EPSG","6179"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4179"]],
    PROJECTION["Oblique_Stereographic"],
    PARAMETER["latitude_of_origin",46],
    PARAMETER["central_meridian",25],
    PARAMETER["scale_factor",0.99975],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",500000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","3844"]]
Origin = (96676.434833699619048,290247.117718913941644)
Pixel Size = (14.256214353408733,-14.256214353408733)
...


marius@mobi:~/data/romania/test$ ogrinfo -where 'FID=0' -geom=summary
-fields=no ../caroiaje/caroiaje_100k_EPSG3844.shp caroiaje_100k_EPSG3844
INFO: Open of `../caroiaje/caroiaje_100k_EPSG3844.shp'
      using driver `ESRI Shapefile' successful.

Layer name: caroiaje_100k_EPSG3844
Geometry: Polygon
Feature Count: 1
Extent: (94505.736838, 203681.624680) - (905494.263162, 771251.195001)
Layer SRS WKT:
PROJCS["Stereographic",
    GEOGCS["GCS_Krassovsky, 1942",
        DATUM["unknown",
            SPHEROID["krass",6378245,298.3]],
        PRIMEM["Greenwich",0],
        UNIT["Degree",0.017453292519943295]],
    PROJECTION["Stereographic"],
    PARAMETER["latitude_of_origin",46],
    PARAMETER["central_meridian",25],
    PARAMETER["scale_factor",0.99975],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",500000],
    UNIT["Meter",1]]
INDICATIV: String (25.0)
OGRFeature(caroiaje_100k_EPSG3844):0
  POLYGON : 65 points

Is the disconnect simply a reporting issue and reprojections are handled
properly behind the scenes when using this EPSG code? It seems that what
gdalinfo reports is in accordance to
http://spatialreference.org/ref/epsg/3844/html/ .

-marius

On Sat, 2011-02-05 at 00:06 +0100, Even Rouault wrote: 
> Le vendredi 04 f?vrier 2011 20:25:43, Marius Jigmond a ?crit :
> > Hi Everyone,
> > 
> > Some of the options (I didn't test all) introduced with version 1.8.0
> > seem to behave strangely. Here's what I'm doing:
> > 1. gdal_rasterize -burn 0 -i -l mask mask.shp sample.tif
> > works fine but I get the following warning:
> > Warning : the output raster dataset and the input vector layer do not
> > have the same SRS.
> > Results might be incorrect (no on-the-fly reprojection of input data).
> > even though both inputs use the same projection, EPSG:3844.
> 
> Unrelated with GDAL 1.8.0. The issue was that the transformation between OGC 
> WKT and ESRI WKT didn't handle well the Oblique Stereographic projection. 
> Fixed in trunk in http://trac.osgeo.org/gdal/changeset/21627
> 
> > 
> > 2. gdal_rasterize -burn 0 -i -a_srs EPSG:3844 -l mask mask.shp
> > sample.tif
> > fails with: '-tr xres yes' or '-ts xsize ysize' is required.
> > 
> > 3. gdal_rasterize -burn 0 -i -a_nodata 0 -l mask mask.shp sample.tif
> > fails with: '-tr xres yes' or '-ts xsize ysize' is required.
> > 
> > >From http://www.gdal.org/gdal_rasterize.html it doesn't seem that -a_srs
> > or -a_nodata would require -tr or -ts. Am I doing something wrong?
> 
> When those 2 new options are used, they imply creating a new dataset. So they 
> actually need to be used with -tr or -ts option.
> 
> > 
> > -marius
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From even.rouault at mines-paris.org  Sat Feb 19 18:38:39 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Feb 19 18:38:49 2011
Subject: [gdal-dev] gdal_rasterize 1.8.0 options
In-Reply-To: <BLU0-SMTP203EEF5D849861C2FCDBCBEB2D70@phx.gbl>
References: <BLU0-SMTP43BCC8D40A1F52FA0B542EB2E60@phx.gbl>
	<201102050006.22865.even.rouault@mines-paris.org>
	<BLU0-SMTP203EEF5D849861C2FCDBCBEB2D70@phx.gbl>
Message-ID: <201102200038.39535.even.rouault@mines-paris.org>

Le dimanche 20 f?vrier 2011 00:24:16, Marius Jigmond a ?crit :
> 
> Is the disconnect simply a reporting issue and reprojections are handled
> properly behind the scenes when using this EPSG code? It seems that what
> gdalinfo reports is in accordance to
> http://spatialreference.org/ref/epsg/3844/html/ .

Marius,

The .prj file of shapefiles stores WKT in ESRI WKT, not OGC WKT. 
http://trac.osgeo.org/gdal/changeset/21627 (which is a fix not found in 1.8.0) 
translates the ESRI "Stereographic" into the OGC "Oblique_Stereographic", to 
be consistant with what is done in the reverse transformation

> 
> -marius
> 
> On Sat, 2011-02-05 at 00:06 +0100, Even Rouault wrote:
> > Le vendredi 04 f?vrier 2011 20:25:43, Marius Jigmond a ?crit :
> > > Hi Everyone,
> > > 
> > > Some of the options (I didn't test all) introduced with version 1.8.0
> > > seem to behave strangely. Here's what I'm doing:
> > > 1. gdal_rasterize -burn 0 -i -l mask mask.shp sample.tif
> > > works fine but I get the following warning:
> > > Warning : the output raster dataset and the input vector layer do not
> > > have the same SRS.
> > > Results might be incorrect (no on-the-fly reprojection of input data).
> > > even though both inputs use the same projection, EPSG:3844.
> > 
> > Unrelated with GDAL 1.8.0. The issue was that the transformation between
> > OGC WKT and ESRI WKT didn't handle well the Oblique Stereographic
> > projection. Fixed in trunk in http://trac.osgeo.org/gdal/changeset/21627
> > 
> > > 2. gdal_rasterize -burn 0 -i -a_srs EPSG:3844 -l mask mask.shp
> > > sample.tif
> > > fails with: '-tr xres yes' or '-ts xsize ysize' is required.
> > > 
> > > 3. gdal_rasterize -burn 0 -i -a_nodata 0 -l mask mask.shp sample.tif
> > > fails with: '-tr xres yes' or '-ts xsize ysize' is required.
> > > 
> > > >From http://www.gdal.org/gdal_rasterize.html it doesn't seem that
> > > >-a_srs
> > > 
> > > or -a_nodata would require -tr or -ts. Am I doing something wrong?
> > 
> > When those 2 new options are used, they imply creating a new dataset. So
> > they actually need to be used with -tr or -ts option.
> > 
> > > -marius
> > > 
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
From mariusjigmond at hotmail.com  Sat Feb 19 18:46:07 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Sat Feb 19 18:46:16 2011
Subject: [gdal-dev] gdal_rasterize 1.8.0 options
In-Reply-To: <201102200038.39535.even.rouault@mines-paris.org>
References: <BLU0-SMTP43BCC8D40A1F52FA0B542EB2E60@phx.gbl>
	<201102050006.22865.even.rouault@mines-paris.org>
	<BLU0-SMTP203EEF5D849861C2FCDBCBEB2D70@phx.gbl>
	<201102200038.39535.even.rouault@mines-paris.org>
Message-ID: <BLU0-SMTP338B01D18DAF9646CA2011B2D70@phx.gbl>

Should it then match http://spatialreference.org/ref/epsg/3844/esriwkt/
because it does not seem to? I apologize if my questions seem silly.

-marius

On Sun, 2011-02-20 at 00:38 +0100, Even Rouault wrote: 
> Le dimanche 20 f?vrier 2011 00:24:16, Marius Jigmond a ?crit :
> > 
> > Is the disconnect simply a reporting issue and reprojections are handled
> > properly behind the scenes when using this EPSG code? It seems that what
> > gdalinfo reports is in accordance to
> > http://spatialreference.org/ref/epsg/3844/html/ .
> 
> Marius,
> 
> The .prj file of shapefiles stores WKT in ESRI WKT, not OGC WKT. 
> http://trac.osgeo.org/gdal/changeset/21627 (which is a fix not found in 1.8.0) 
> translates the ESRI "Stereographic" into the OGC "Oblique_Stereographic", to 
> be consistant with what is done in the reverse transformation
> 
> > 
> > -marius
> > 
> > On Sat, 2011-02-05 at 00:06 +0100, Even Rouault wrote:
> > > Le vendredi 04 f?vrier 2011 20:25:43, Marius Jigmond a ?crit :
> > > > Hi Everyone,
> > > > 
> > > > Some of the options (I didn't test all) introduced with version 1.8.0
> > > > seem to behave strangely. Here's what I'm doing:
> > > > 1. gdal_rasterize -burn 0 -i -l mask mask.shp sample.tif
> > > > works fine but I get the following warning:
> > > > Warning : the output raster dataset and the input vector layer do not
> > > > have the same SRS.
> > > > Results might be incorrect (no on-the-fly reprojection of input data).
> > > > even though both inputs use the same projection, EPSG:3844.
> > > 
> > > Unrelated with GDAL 1.8.0. The issue was that the transformation between
> > > OGC WKT and ESRI WKT didn't handle well the Oblique Stereographic
> > > projection. Fixed in trunk in http://trac.osgeo.org/gdal/changeset/21627
> > > 
> > > > 2. gdal_rasterize -burn 0 -i -a_srs EPSG:3844 -l mask mask.shp
> > > > sample.tif
> > > > fails with: '-tr xres yes' or '-ts xsize ysize' is required.
> > > > 
> > > > 3. gdal_rasterize -burn 0 -i -a_nodata 0 -l mask mask.shp sample.tif
> > > > fails with: '-tr xres yes' or '-ts xsize ysize' is required.
> > > > 
> > > > >From http://www.gdal.org/gdal_rasterize.html it doesn't seem that
> > > > >-a_srs
> > > > 
> > > > or -a_nodata would require -tr or -ts. Am I doing something wrong?
> > > 
> > > When those 2 new options are used, they imply creating a new dataset. So
> > > they actually need to be used with -tr or -ts option.
> > > 
> > > > -marius
> > > > 
> > > > _______________________________________________
> > > > gdal-dev mailing list
> > > > gdal-dev@lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From even.rouault at mines-paris.org  Sat Feb 19 19:25:23 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Feb 19 19:25:30 2011
Subject: [gdal-dev] gdal_rasterize 1.8.0 options
In-Reply-To: <BLU0-SMTP338B01D18DAF9646CA2011B2D70@phx.gbl>
References: <BLU0-SMTP43BCC8D40A1F52FA0B542EB2E60@phx.gbl>
	<201102200038.39535.even.rouault@mines-paris.org>
	<BLU0-SMTP338B01D18DAF9646CA2011B2D70@phx.gbl>
Message-ID: <201102200125.23128.even.rouault@mines-paris.org>

Le dimanche 20 f?vrier 2011 00:46:07, Marius Jigmond a ?crit :
> Should it then match http://spatialreference.org/ref/epsg/3844/esriwkt/
> because it does not seem to? I apologize if my questions seem silly.

With all respect due to the great job of that site, I'm not sure you can 
blindly trust spatialreference.org to be always a genuine reference (I'm not 
sure that in the world of SRS, there is *a* reference ...). The data in there 
comes from the output of various software packages, including GDAL or 
GeoTools, that might not be the most recent ones and have some bugs. This WKT 
with the space in "Oblique_Stereographic" is likely coming from GeoTools.  See 
http://www.osgeo.org/pipermail/metacrs/2008-December/000187.html that gives 
some hint on where data of spatialreference.org comes from.

Anyway, with latest GDAL trunk, if I do a ogr2ogr -a_srs EPSG:3844 
foo_3844.shp foo.shp,

foo_3844.prj is :

PROJCS["Pulkovo_1942_58_Stereo70",GEOGCS["GCS_Pulkovo 
1942(58)",DATUM["D_Pulkovo_1942_Adj_1958",SPHEROID["Krassowsky_1940",6378245,298.3]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Stereographic"],PARAMETER["latitude_of_origin",46],PARAMETER["central_meridian",25],PARAMETER["scale_factor",0.99975],PARAMETER["false_easting",500000],PARAMETER["false_northing",500000],UNIT["Meter",1]]

And ogrinfo reads it back as :

PROJCS["Pulkovo_1942_58_Stereo70",
    GEOGCS["GCS_Pulkovo 1942(58)",
        DATUM["Pulkovo_1942_58",
            SPHEROID["Krassowsky_1940",6378245,298.3]],
        PRIMEM["Greenwich",0],
        UNIT["Degree",0.017453292519943295]],
    PROJECTION["Oblique_Stereographic"],
    PARAMETER["latitude_of_origin",46],
    PARAMETER["central_meridian",25],
    PARAMETER["scale_factor",0.99975],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",500000],
    UNIT["Meter",1]]

which is nearly identical to the output of gdalinfo (except that the 
ESRI'fication loses the AUTHORITY nodes)

> 
> -marius
> 
> On Sun, 2011-02-20 at 00:38 +0100, Even Rouault wrote:
> > Le dimanche 20 f?vrier 2011 00:24:16, Marius Jigmond a ?crit :
> > > Is the disconnect simply a reporting issue and reprojections are
> > > handled properly behind the scenes when using this EPSG code? It seems
> > > that what gdalinfo reports is in accordance to
> > > http://spatialreference.org/ref/epsg/3844/html/ .
> > 
> > Marius,
> > 
> > The .prj file of shapefiles stores WKT in ESRI WKT, not OGC WKT.
> > http://trac.osgeo.org/gdal/changeset/21627 (which is a fix not found in
> > 1.8.0) translates the ESRI "Stereographic" into the OGC
> > "Oblique_Stereographic", to be consistant with what is done in the
> > reverse transformation
> > 
> > > -marius
> > > 
> > > On Sat, 2011-02-05 at 00:06 +0100, Even Rouault wrote:
> > > > Le vendredi 04 f?vrier 2011 20:25:43, Marius Jigmond a ?crit :
> > > > > Hi Everyone,
> > > > > 
> > > > > Some of the options (I didn't test all) introduced with version
> > > > > 1.8.0 seem to behave strangely. Here's what I'm doing:
> > > > > 1. gdal_rasterize -burn 0 -i -l mask mask.shp sample.tif
> > > > > works fine but I get the following warning:
> > > > > Warning : the output raster dataset and the input vector layer do
> > > > > not have the same SRS.
> > > > > Results might be incorrect (no on-the-fly reprojection of input
> > > > > data). even though both inputs use the same projection, EPSG:3844.
> > > > 
> > > > Unrelated with GDAL 1.8.0. The issue was that the transformation
> > > > between OGC WKT and ESRI WKT didn't handle well the Oblique
> > > > Stereographic projection. Fixed in trunk in
> > > > http://trac.osgeo.org/gdal/changeset/21627
> > > > 
> > > > > 2. gdal_rasterize -burn 0 -i -a_srs EPSG:3844 -l mask mask.shp
> > > > > sample.tif
> > > > > fails with: '-tr xres yes' or '-ts xsize ysize' is required.
> > > > > 
> > > > > 3. gdal_rasterize -burn 0 -i -a_nodata 0 -l mask mask.shp
> > > > > sample.tif fails with: '-tr xres yes' or '-ts xsize ysize' is
> > > > > required.
> > > > > 
> > > > > >From http://www.gdal.org/gdal_rasterize.html it doesn't seem that
> > > > > >-a_srs
> > > > > 
> > > > > or -a_nodata would require -tr or -ts. Am I doing something wrong?
> > > > 
> > > > When those 2 new options are used, they imply creating a new dataset.
> > > > So they actually need to be used with -tr or -ts option.
> > > > 
> > > > > -marius
> > > > > 
> > > > > _______________________________________________
> > > > > gdal-dev mailing list
> > > > > gdal-dev@lists.osgeo.org
> > > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
From vadp.devl at gmail.com  Sun Feb 20 06:12:12 2011
From: vadp.devl at gmail.com (Vadim Shlyakhov)
Date: Sun Feb 20 06:12:29 2011
Subject: [gdal-dev] Re: Gdal2tiles in Gdal18 and creating KMZ files
References: <AANLkTik8okbxnC9uU-hPo5c=srwB5qP2HYYasqszgEk5@mail.gmail.com>
	<1297895714.4826.46.camel@winkey.org>
Message-ID: <loom.20110220T115906-69@post.gmane.org>

brian <rush <at> winkey.org> writes:

> the problem is in /12/1211/2558.kml line 26
> 
> <href>2558.png</href>
> 
> this should be a relative path from the root of the zipfile not from
> 2558.kml
> 

Hello Brian, 

I've made another tile cutter (http://code.google.com/p/tilers-tools/). It
produces a directory tree in a manner which is very similar to gdal2tiles.py. So
I had a look into this problem. 

I must say it didn't work for me either: GE shows KML just fine, but if I zip a
dir tree into KMZ it fails altogether. I've tried relative paths to PNGs, to
internal KMLs. All these were to no avail. 

I think that the problem actually lies in '<NetworkLink>' things and I still
cannot get a clue on these.

I wonder if you have (or can produce manually) a sample of working KMZ with
superoverlays, so I'd be able to have a look

From zoltans at geograph.co.za  Sun Feb 20 12:20:25 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Sun Feb 20 12:20:29 2011
Subject: [gdal-dev] Mosaicking Orthos
In-Reply-To: <AANLkTin4KU53kgZXchcsFoa6sWQG2cFAm+_pb4Ug4zTe@mail.gmail.com>
References: <4D5BA4F4.1090402@geograph.co.za>	<4D5BBB49.3020105@geograph.co.za>
	<AANLkTin4KU53kgZXchcsFoa6sWQG2cFAm+_pb4Ug4zTe@mail.gmail.com>
Message-ID: <4D614D59.6080801@geograph.co.za>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110220/2342b069/attachment.html
From mariusjigmond at hotmail.com  Sun Feb 20 14:16:36 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Sun Feb 20 14:16:34 2011
Subject: [gdal-dev] Mosaicking Orthos
In-Reply-To: <4D614D59.6080801@geograph.co.za>
References: <4D5BA4F4.1090402@geograph.co.za> <4D5BBB49.3020105@geograph.co.za>
	<AANLkTin4KU53kgZXchcsFoa6sWQG2cFAm+_pb4Ug4zTe@mail.gmail.com>
	<4D614D59.6080801@geograph.co.za>
Message-ID: <BLU0-SMTP46802185302E9C22972C02B2D60@phx.gbl>

Hi Zoltan,

Are you sure that the white you see is a pure 255/255/255? Albeit, the
nearblack with its near default of 15 would have likely taken care of
that.

If you load two othophotos in QGIS and specify the transparent pixels,
does the collar between the orthophotos disappear?

Regarding the warnings see:
http://www.mail-archive.com/gdal-dev@lists.osgeo.org/msg06960.html

-marius



From pcreso at pcreso.com  Sun Feb 20 19:12:21 2011
From: pcreso at pcreso.com (pcreso@pcreso.com)
Date: Sun Feb 20 19:19:05 2011
Subject: [gdal-dev] OGR VRT ODBC connection problem
In-Reply-To: <CC197224AC75CE4DB23F739B16891B8601879E75@tikka.haapa.mmm.fi>
Message-ID: <695255.17583.qm@web33201.mail.mud.yahoo.com>


Hi,

Apologies for the cross posting, but I figure there are experts on both lists.

I'm trying to get a ogr virtual connection working from a Linux host to a remote Oracle DB to use mapserver for a WFS service providing the required data..

ODBC is working, eg:

sqlplus user/user@metp
select count(*) from land_station;
8338

etc...

However, when testing with ogr2ogr, I get:

ogrinfo ODBC:user/user@metp land_station

libnuma: Warning: /sys not mounted or no numa system. Assuming one node: No such file or directory

and the terminal window hangs, I'm unable to get any response, & have to kill the connection to continue.


Any suggestions?


Thanks,

? Brent Wood




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110220/7a39b7ea/attachment.html
From woodbri at swoodbridge.com  Sun Feb 20 20:12:27 2011
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Sun Feb 20 20:32:05 2011
Subject: [gdal-dev] Re: [mapserver-users] OGR VRT ODBC connection problem
In-Reply-To: <695255.17583.qm@web33201.mail.mud.yahoo.com>
References: <695255.17583.qm@web33201.mail.mud.yahoo.com>
Message-ID: <4D61BBFB.5060702@swoodbridge.com>

Hi Brent,

I'm certainly not an expert on this, but I think the issue might be that 
sqlplus does not use an ODBC connection it uses some proprietary Oracle 
socket protocol to connect.

Do you have ODBC services setup, configured and running on the Linux 
host? How have you verified this?

If not then this is likely the issue. Sorry I don't use ODBC, so I can't 
help much more then this.

-Steve W

On 2/20/2011 7:12 PM, pcreso@pcreso.com wrote:
>
> Hi,
>
> Apologies for the cross posting, but I figure there are experts on both
> lists.
>
> I'm trying to get a ogr virtual connection working from a Linux host to
> a remote Oracle DB to use mapserver for a WFS service providing the
> required data..
>
> ODBC is working, eg:
>
> sqlplus user/user@metp <mailto:niwatest/niwatest@metp>
> select count(*) from land_station;
> 8338
>
> etc...
>
> However, when testing with ogr2ogr, I get:
>
> ogrinfo ODBC:user/user@metp land_station
>
> libnuma: Warning: /sys not mounted or no numa system. Assuming one node:
> No such file or directory
>
> and the terminal window hangs, I'm unable to get any response, & have to
> kill the connection to continue.
>
>
> Any suggestions?
>
>
> Thanks,
>
> Brent Wood
>
>
>
>
>
>
> _______________________________________________
> mapserver-users mailing list
> mapserver-users@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/mapserver-users

From pcreso at pcreso.com  Sun Feb 20 22:08:08 2011
From: pcreso at pcreso.com (pcreso@pcreso.com)
Date: Sun Feb 20 22:08:14 2011
Subject: [gdal-dev] Re: [mapserver-users] OGR VRT ODBC connection problem
In-Reply-To: <4D61BBFB.5060702@swoodbridge.com>
Message-ID: <197199.5874.qm@web33201.mail.mud.yahoo.com>

Thanks Stephen, 

I should have included this in my first msg, apologies, but thanks for the reply.

I'm running GDAL v1.6.1, from
ogrinfo --version
GDAL 1.6.1, released 2009/05/11
?

And, running isql (from unixodbc) also works.

isql --help
unixODBC 2.2.12

isql -v metp niwatest niwatest
libnuma: Warning: /sys not mounted or no numa system. Assuming one node: No such file or directory
+---------------------------------------+
| Connected!??????????????????????????? |
|?????????????????????????????????????? |
| sql-statement???????????????????????? |
| help [tablename]????????????????????? |
| quit????????????????????????????????? |
|?????????????????????????????????????? |
+---------------------------------------+
SQL> select count(*) from land_station;
+-----------------------------------------+
| COUNT(*)??????????????????????????????? |
+-----------------------------------------+
| 8338??????????????????????????????????? |
+-----------------------------------------+??? 


So isql succeeds, and is definately using ODBC.

ogrinfo just hangs. Both have the /sys warning msg, which I am ignoring.


I'm still lost with respect to this....


Thanks,

?? Brent



--- On Mon, 2/21/11, Stephen Woodbridge <woodbri@swoodbridge.com> wrote:

From: Stephen Woodbridge <woodbri@swoodbridge.com>
Subject: Re: [mapserver-users] OGR VRT ODBC connection problem
To: pcreso@pcreso.com
Cc: mapserver-users@lists.osgeo.org, gdal-dev@lists.osgeo.org
Date: Monday, February 21, 2011, 2:12 PM

Hi Brent,

I'm certainly not an expert on this, but I think the issue might be that 
sqlplus does not use an ODBC connection it uses some proprietary Oracle 
socket protocol to connect.

Do you have ODBC services setup, configured and running on the Linux 
host? How have you verified this?

If not then this is likely the issue. Sorry I don't use ODBC, so I can't 
help much more then this.

-Steve W

On 2/20/2011 7:12 PM, pcreso@pcreso.com wrote:
>
> Hi,
>
> Apologies for the cross posting, but I figure there are experts on both
> lists.
>
> I'm trying to get a ogr virtual connection working from a Linux host to
> a remote Oracle DB to use mapserver for a WFS service providing the
> required data..
>
> ODBC is working, eg:
>
> sqlplus user/user@metp <mailto:niwatest/niwatest@metp>
> select count(*) from land_station;
> 8338
>
> etc...
>
> However, when testing with ogr2ogr, I get:
>
> ogrinfo ODBC:user/user@metp land_station
>
> libnuma: Warning: /sys not mounted or no numa system. Assuming one node:
> No such file or directory
>
> and the terminal window hangs, I'm unable to get any response, & have to
> kill the connection to continue.
>
>
> Any suggestions?
>
>
> Thanks,
>
> Brent Wood
>
>
>
>
>
>
> _______________________________________________
> mapserver-users mailing list
> mapserver-users@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/mapserver-users

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110220/d180c1ac/attachment.html
From chaitanya.ch at gmail.com  Sun Feb 20 23:25:11 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Feb 20 23:25:13 2011
Subject: [gdal-dev] Segmentation fault using gdal_translate in 1.8.0
In-Reply-To: <C237184E7081314392F31AE826947FFA4E566E684D@EXWA-MBX01.nexus.csiro.au>
References: <C237184E7081314392F31AE826947FFA4E566E683E@EXWA-MBX01.nexus.csiro.au>
	<C237184E7081314392F31AE826947FFA4E566E6843@EXWA-MBX01.nexus.csiro.au>
	<C237184E7081314392F31AE826947FFA4E566E6844@EXWA-MBX01.nexus.csiro.au>
	<AANLkTinfhJamt8fuq1hOVL2VxP_0_osF4TL3taRDKhaJ@mail.gmail.com>
	<C237184E7081314392F31AE826947FFA4E566E684A@EXWA-MBX01.nexus.csiro.au>
	<AANLkTik6wRM1cphaXO85EutdOrC1kzDyi8AnhzPREHEm@mail.gmail.com>
	<C237184E7081314392F31AE826947FFA4E566E684D@EXWA-MBX01.nexus.csiro.au>
Message-ID: <AANLkTimVU_zbuMB209TyURQ=qkxbD7MxgEAMLtjLeHh_@mail.gmail.com>

Derrick,

I tested your sample data on ubuntu with gdal trunk and 1.8 versions.

Check if you are linking to the right gdal library. Just run the command
"gdalinfo --version".

Since the error is coming up only on your system, you have to help me
perform the testing.

Build with the "--enable-debug" configure option and run the program after
setting the environment variable "CPL_DEBUG" to YES. If that doesn't show
any info before segfaulting, run it under the gdb debugger.

On Mon, Feb 21, 2011 at 9:28 AM, <Derrick.Wong@csiro.au> wrote:

> Hi Chaitanya
>
>
>
> I have downloaded and unpacked the tar.gz and compiled it in on a standard
> Debian box.
>
>
>
> Please find attached the config log for the installation.
>
>
>
> I have downloaded a precompiled windows executable (1.8.0) for comparison,
> and I am not having any issues with it though.
>
>
>
> Am I missing an include or something during my build/compile process?
>
>
>
> Please assist.
>
>
>
> Thanks.
>
>
>
> *Derrick Wong** *
> Software Engineer *|* Spatial Information Services Stack (SISS) Project *|
> *CSIRO
>
> Phone: +61 8 6436 8945
> derrick.wong@csiro.au *|* www.csiro.au
> Address: Spatial Information Services Stack (SISS), 26 Dick Perry Avenue,
> Kensington WA 6151, Australia
>
> *PLEASE NOTE**
> *The information contained in this email may be confidential or
> privileged. Any unauthorised use or disclosure is prohibited. If you have
> received this email in error, please delete it immediately and notify the
> sender by return email. Thank you. To the extent permitted by law, CSIRO
> does not represent, warrant and/or guarantee that the integrity of this
> communication has been maintained or that the communication is free of
> errors, virus, interception or interference.
>
> *Please consider the environment before printing this email.*
>
>
>
> *From:* Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com]
> *Sent:* Friday, 18 February 2011 7:56 PM
>
> *To:* Wong, Derrick (CESRE, Kensington)
> *Cc:* ksshannon@gmail.com; gdal-dev@lists.osgeo.org; Fraser, Ryan (CESRE,
> Kensington)
>
> *Subject:* Re: [gdal-dev] Segmentation fault using gdal_translate in 1.8.0
>
>
>
> Derrick,
>
> I was able to run gdalinfo and gdal_translate on your sample dataset
> without any error.
> Can you provide some more details like your platform and the settings you
> used to compile GDAL?
>
> On Fri, Feb 18, 2011 at 9:57 AM, <Derrick.Wong@csiro.au> wrote:
>
> Hi Kyle,
>
>
>
> Thanks for the reply.
>
>
>
> Gdalinfo on 1.8.0 gives me the same ?Segmentation fault? error.
>
>
>
> Attached is the dump using 1.7.3
>
>
>
> I have included a sample file and you can download it here:
>
>
>
> ftp://ftp.csiro.au/DerrickWong/sample/sample.nc
>
>
>
>
>
>
>
> *Derrick Wong *
> Software Engineer *|* Spatial Information Services Stack (SISS) Project *|
> *CSIRO
>
> Phone: +61 8 6436 8945
> derrick.wong@csiro.au *|* www.csiro.au
> Address: Spatial Information Services Stack (SISS), 26 Dick Perry Avenue,
> Kensington WA 6151, Australia
>
> *PLEASE NOTE**
> *The information contained in this email may be confidential or
> privileged. Any unauthorised use or disclosure is prohibited. If you have
> received this email in error, please delete it immediately and notify the
> sender by return email. Thank you. To the extent permitted by law, CSIRO
> does not represent, warrant and/or guarantee that the integrity of this
> communication has been maintained or that the communication is free of
> errors, virus, interception or interference.
>
> *Please consider the environment before printing this email.*
>
>
>
> *From:* Kyle Shannon [mailto:ksshannon@gmail.com]
> *Sent:* Friday, 18 February 2011 11:32 AM
> *To:* Wong, Derrick (CESRE, Kensington)
> *Cc:* gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] Segmentation fault using gdal_translate in 1.8.0
>
>
>
> Derrick,
> Can you file a ticket and attach a sample data set?  Do you have any other
> details?  A gdalinfo of the netcdf file and another of one of the variables
> would be great.  Thanks.
>
> kss
>
>
> # ============================
> Kyle Shannon
> Physical Science Technician
> RMRS Fire Sciences Lab
> Fire, Fuels & Smoke - RWU 4405
> 5775 Highway 10 W.
> Missoula, MT 59808
> (406)829-6954
> kshannon@fs.fed.us
> # ============================
>
> On Thu, Feb 17, 2011 at 19:54, <Derrick.Wong@csiro.au> wrote:
>
> Hi all,
>
>
>
> I have updated to use GDAL 1.8 and I am having problems using
> gdal_translate to convert netCDF files to Geotiff or ERS. I am getting
> ?Segmentation fault? errors only occurring in 1.8.0. I was using 1.7.3
> previously.
>
>
>
> Could someone kindly advise?
>
>
>
> Thank you for your time.
>
> *Derrick Wong *
> Software Engineer *|* Spatial Information Services Stack (SISS) Project *|
> *CSIRO
>
> Phone: +61 8 6436 8945
> derrick.wong@csiro.au *|* www.csiro.au
> Address: Spatial Information Services Stack (SISS), 26 Dick Perry Avenue,
> Kensington WA 6151, Australia
>
> *PLEASE NOTE**
> *The information contained in this email may be confidential or
> privileged. Any unauthorised use or disclosure is prohibited. If you have
> received this email in error, please delete it immediately and notify the
> sender by return email. Thank you. To the extent permitted by law, CSIRO
> does not represent, warrant and/or guarantee that the integrity of this
> communication has been maintained or that the communication is free of
> errors, virus, interception or interference.
>
> *Please consider the environment before printing this email.*
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110221/723bab27/attachment-0001.html
From hamish_b at yahoo.com  Mon Feb 21 00:43:33 2011
From: hamish_b at yahoo.com (Hamish)
Date: Mon Feb 21 00:46:26 2011
Subject: [gdal-dev] Re: [Live-demo] Image for the GDAL overview
Message-ID: <361923.94900.qm@web110006.mail.gq1.yahoo.com>

Hi,

A gdal overview image for the live DVD is now uploaded. the GDAL/OGR list
of formats is a bit out of date (it's a slide from a talk I gave a few
years ago), but the oldies but goodies will all be there. Not sure how
well the words will scale down, but we can always rerender from source at
the target image size, and increase the fontsize of bolded words as needed.

 http://adhoc.osgeo.osuosl.org/livedvd/docs/en/overview/gdal_overview.html

(due to a sphinx 1.0.4 bug*, image scaling isn't working at all on the 
nightly adhoc server doc build, but we use the old version on the disc
so not a problem for the final cut. For now just imagine that the image
only covers 60% of the frame)
 [*] https://bitbucket.org/birkenfeld/sphinx/issue/557/

PROJ.4 is mentioned in passing here as it otherwise doesn't get any due
props on the disc, and it surely deserves some.


enjoy,
Hamish



      
From zoltans at geograph.co.za  Mon Feb 21 01:53:14 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Mon Feb 21 01:53:21 2011
Subject: [gdal-dev] Mosaicking Orthos
In-Reply-To: <BLU0-SMTP46802185302E9C22972C02B2D60@phx.gbl>
References: <4D5BA4F4.1090402@geograph.co.za>	
	<4D5BBB49.3020105@geograph.co.za>	
	<AANLkTin4KU53kgZXchcsFoa6sWQG2cFAm+_pb4Ug4zTe@mail.gmail.com>	
	<4D614D59.6080801@geograph.co.za>
	<BLU0-SMTP46802185302E9C22972C02B2D60@phx.gbl>
Message-ID: <4D620BDA.4030804@geograph.co.za>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110221/3bbbf5aa/attachment-0001.html
-------------- next part --------------
A non-text attachment was scrubbed...
Name: nodata_qgis.jpg
Type: image/jpeg
Size: 26436 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110221/3bbbf5aa/nodata_qgis-0001.jpg
From chaitanya.ch at gmail.com  Mon Feb 21 03:01:15 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Feb 21 03:01:19 2011
Subject: [gdal-dev] Mosaicking Orthos
In-Reply-To: <4D614D59.6080801@geograph.co.za>
References: <4D5BA4F4.1090402@geograph.co.za> <4D5BBB49.3020105@geograph.co.za>
	<AANLkTin4KU53kgZXchcsFoa6sWQG2cFAm+_pb4Ug4zTe@mail.gmail.com>
	<4D614D59.6080801@geograph.co.za>
Message-ID: <AANLkTinuV-Z_TFt1YZ3eeELEEVn0k+TTYZvfVxWkNwy7@mail.gmail.com>

Zoltan,

The creation of 0394w.tif failed. Does the process have write permission on
directory?
I note that you did not specify the -of option for nearblack. In it's
absence, nearblack creates the output file in Erdas Imagine format.


On Sun, Feb 20, 2011 at 10:50 PM, Zoltan Szecsei <zoltans@geograph.co.za>wrote:

>  Hi Chaitanya (& all),
> I tried your nearblack comment, and got:
>
>  nearblack -white -o 0394w.tif 0394.tif
> Warning 1: TIFFFetchNormalTag:ASCII value for tag "ImageDescription" does
> not end in null byte
>


> Warning 1: TIFFFetchNormalTag:ASCII value for tag "ImageDescription" does
> not end in null byte
> Warning 1: TIFFFetchNormalTag:ASCII value for tag "Software" contains null
> byte in value; value incorrectly truncated during reading due to
> implementation limitati
> ERROR 4: Creation of file 0394w.tif failed.
>
>
> I think I am having trouble understanding the setting/using of nodata
> values.
> I have now also downloaded and compiled gdal 1.8.0 (but nearblack remained
> on v1.7.3) on ubuntu 10.04 LTS, and recreated my vrt, to no improvement.
>
> To recap: I have 179 3*8bit RGB band aerial images that have been
> orthorectified. The resulting skewness in the images has created white
> slivers in the corners, and I am presuming that these white slivers are
> recognised as "nodata". (My first mistake?)
>
> I use the following to create a vrt:
> gdalbuildvrt -addalpha -hidenodata -srcnodata "255 255 255" -vrtnodata "0 0
> 0" -input_file_list files 177_untiled_orthos_nodata_180.vrt
>
> Thinking that the above will tell gdalbuildvrt that, for the input orthos,
> white should be recognised as 'nodata', and in the VRT, those white pixels
> should be converted to black, as nodata.
> Well, as you've guessed, it didn't happen this way, and I still have the
> white bits after mosaicking my VRT thus:
> gdal_translate -projwin -16000 -3520650 -13000 -3525650
> 177_untiled_orthos_nodata.vrt try1.tif
>
> I tried re-running gdalbuildvrt specifying -vrtnodata "255 255 255" (to
> match the input ortho files) and the outside border of my vrt turned white,
> but the slivers between the mosaicked orthos were still present.
>
> Please can someone show me the correct way to address this problem.
>
> I have included gdalinfo results for both an individual ortho, and for the
> vrt itself.
>
> Thanks & regards,
> Zoltan
>
>
>
>
>
>
> **********************************  *GDALINFO on indicidual ORTHO*****************************************
> geograph@gs0:~/vrt_177$ *gdalinfo --version*
> GDAL 1.8.0, released 2011/01/12
> geograph@gs0:~/vrt_177$
> geograph@gs0:~/vrt_177$
> geograph@gs0:~/vrt_177$
> geograph@gs0:~/vrt_177$ *gdalinfo
> /mnt/geo_lvm0/ngi_jobs/orthos_8bit/NGI_177_untiled_orthos/0003.tif*
> Warning 1: TIFFFetchNormalTag:ASCII value for tag "ImageDescription" does
> not end in null byte
> Warning 1: TIFFFetchNormalTag:ASCII value for tag "Software" contains null
> byte in value; value incorrectly truncated during reading due to
> implementation limitations
>


>   Mask Flags: PER_DATASET ALPHA
> Band 4 Block=128x128 Type=Byte, ColorInterp=Alpha
> geograph@gs0:~/vrt_177$
>
> *******************************************************************************************************
>
>
>
>
> On 2011-02-16 19:39, Chaitanya kumar CH wrote:
>
> Zoltan,
>
> Have you tried the nearblack GDAL utility on the original 176 images?
> http://www.gdal.org/nearblack.html
>
> On Wed, Feb 16, 2011 at 5:25 PM, Zoltan Szecsei <zoltans@geograph.co.za>wrote:
>
>> On 2011-02-16 12:20, Zoltan Szecsei wrote:
>>
>>> Hi All,
>>> I've built a vrt with 176 images.
>>>
>>> I now need to mosaic this whole area into roughly 5 x 5 ortho images.
>>>
>>> How can I force the white edges into background of the overlapping
>>> orthos?
>>> I'm a little cautious of simply (finding a way to) making "white"
>>> transparent as it is only the white on the edges that need to be
>>> backgrounded.
>>>
>>
>>  Hi again,
>> Since the above post, I have tried different ways to set nodata, but to no
>> avail - I still get the white edges:
>> (see jpeg sent with my original post)
>>
>> gdalbuildvrt -addalpha -hidenodata -input_file_list files
>> 177_untiled_orthos_nodata.vrt
>> gdalbuildvrt -srcnodata "0 0 0"  -addalpha -hidenodata -input_file_list
>> files 177_untiled_orthos_blk.vrt
>> gdalbuildvrt -srcnodata "255 255 255"  -addalpha -hidenodata
>> -input_file_list files 177_untiled_orthos_white.vrt
>>
>> How should I be masking out the nodata (or even white pixels) so that when
>> I mosaic a bunch of tiffs together, I dont get the white stripes in the
>> resulting image?
>>
>> Using GDAL 1.7.3, released 2010/11/10 on Ubuntu 10.04
>> Viewing with Quantum GIS - 1.6.0-Trunk on Ubuntu 10.04 (same box).
>> ...but running the whole lot in xterms with Xming & putty from my WinVista
>> box.
>>
>>
>> Regards,
>>
>> Zoltan
>>
>>
>
> --
>
> ===========================================
> Zoltan Szecsei PrGISc [PGP0031]
> Geograph (Pty) Ltd.
> P.O. Box 7, Muizenberg 7950, South Africa.
>
> 65 Main Road, Muizenberg 7945
> Western Cape, South Africa.
>
> 34? 6'16.35"S 18?28'5.62"E
>
> Tel: +27-21-7884897  Mobile: +27-83-6004028
> Fax: +27-86-6115323     www.geograph.co.za
> ===========================================
>
>  ------------------------------
>
>
>
>

-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110221/939d62c5/attachment.html
From P.Halls at york.ac.uk  Mon Feb 21 03:14:58 2011
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Mon Feb 21 03:15:13 2011
Subject: [gdal-dev] Re: [mapserver-users] OGR VRT ODBC connection problem
In-Reply-To: <197199.5874.qm@web33201.mail.mud.yahoo.com>
References: <197199.5874.qm@web33201.mail.mud.yahoo.com>
Message-ID: <4D621F02.1010809@york.ac.uk>

Brent,

    firstly, whilst SQLPLUS is a useful tool to ensure the Oracle environment is 
correctly configured, it does not test ODBC - nor does the very much nicer, Java 
based, SQL Developer, which is also not restricted to use with Oracle.

    Secondly, how many tables are there in your Oracle tablespace?  I currently 
have around 70 or 80 and OGR takes forever to start.  OGR reads the schema for 
every table in the tablespace, trying to identify the spatial tables and 
pre-load the key data in readiness.  If you have a lot of tables, the 
initialisation step may certainly seem to hang.

    Thirdly, enabling debug in GDAL will enable you to track a lot of what is 
going on and should enable you to quickly determine what is causing the hang - 
although fixing it may take rather more effort, of course.

    Lastly, I built GDAL against the Oracle Call Interface (OCI) libraries, not 
ODBC: this connects to Oracle in a similar manner to that used by the Oracle 
products and I find it to be fast and efficient.

Best wishes,

Peter

pcreso@pcreso.com wrote:
> Thanks Stephen, 
> 
> I should have included this in my first msg, apologies, but thanks for the reply.
> 
> I'm running GDAL v1.6.1, from
> ogrinfo --version
> GDAL 1.6.1, released 2009/05/11
>  
> 
> And, running isql (from unixodbc) also works.
> 
> isql --help
> unixODBC 2.2.12
> 
> isql -v metp niwatest niwatest
> libnuma: Warning: /sys not mounted or no numa system. Assuming one node: No such file or directory
> +---------------------------------------+
> | Connected!                            |
> |                                       |
> | sql-statement                         |
> | help [tablename]                      |
> | quit                                  |
> |                                       |
> +---------------------------------------+
> SQL> select count(*) from land_station;
> +-----------------------------------------+
> | COUNT(*)                                |
> +-----------------------------------------+
> | 8338                                    |
> +-----------------------------------------+    
> 
> 
> So isql succeeds, and is definately using ODBC.
> 
> ogrinfo just hangs. Both have the /sys warning msg, which I am ignoring.
> 
> 
> I'm still lost with respect to this....
> 
> 
> Thanks,
> 
>    Brent
> 
> 
> 
> --- On Mon, 2/21/11, Stephen Woodbridge <woodbri@swoodbridge.com> wrote:
> 
> From: Stephen Woodbridge <woodbri@swoodbridge.com>
> Subject: Re: [mapserver-users] OGR VRT ODBC connection problem
> To: pcreso@pcreso.com
> Cc: mapserver-users@lists.osgeo.org, gdal-dev@lists.osgeo.org
> Date: Monday, February 21, 2011, 2:12 PM
> 
> Hi Brent,
> 
> I'm certainly not an expert on this, but I think the issue might be that 
> sqlplus does not use an ODBC connection it uses some proprietary Oracle 
> socket protocol to connect.
> 
> Do you have ODBC services setup, configured and running on the Linux 
> host? How have you verified this?
> 
> If not then this is likely the issue. Sorry I don't use ODBC, so I can't 
> help much more then this.
> 
> -Steve W
> 
> On 2/20/2011 7:12 PM, pcreso@pcreso.com wrote:
>> Hi,
>>
>> Apologies for the cross posting, but I figure there are experts on both
>> lists.
>>
>> I'm trying to get a ogr virtual connection working from a Linux host to
>> a remote Oracle DB to use mapserver for a WFS service providing the
>> required data..
>>
>> ODBC is working, eg:
>>
>> sqlplus user/user@metp <mailto:niwatest/niwatest@metp>
>> select count(*) from land_station;
>> 8338
>>
>> etc...
>>
>> However, when testing with ogr2ogr, I get:
>>
>> ogrinfo ODBC:user/user@metp land_station
>>
>> libnuma: Warning: /sys not mounted or no numa system. Assuming one node:
>> No such file or directory
>>
>> and the terminal window hangs, I'm unable to get any response, & have to
>> kill the connection to continue.
>>
>>
>> Any suggestions?
>>
>>
>> Thanks,
>>
>> Brent Wood
>>
>>
>>
>>
>>
>>
>> _______________________________________________
>> mapserver-users mailing list
>> mapserver-users@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/mapserver-users
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor & Acting Team Leader Applications Support Group,
                Information Directorate, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: C/O IT Services, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From zoltans at geograph.co.za  Mon Feb 21 03:25:09 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Mon Feb 21 03:25:20 2011
Subject: [gdal-dev] Mosaicking Orthos - Solved
In-Reply-To: <4D620BDA.4030804@geograph.co.za>
References: <4D5BA4F4.1090402@geograph.co.za>		<4D5BBB49.3020105@geograph.co.za>		<AANLkTin4KU53kgZXchcsFoa6sWQG2cFAm+_pb4Ug4zTe@mail.gmail.com>		<4D614D59.6080801@geograph.co.za>	<BLU0-SMTP46802185302E9C22972C02B2D60@phx.gbl>
	<4D620BDA.4030804@geograph.co.za>
Message-ID: <4D622165.2000405@geograph.co.za>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110221/3661d943/attachment.html
From schut at sarvision.nl  Mon Feb 21 03:31:12 2011
From: schut at sarvision.nl (Vincent Schut)
Date: Mon Feb 21 03:31:18 2011
Subject: [gdal-dev] Gdal2tiles in Gdal18 and creating KMZ files
In-Reply-To: <AANLkTinGrkPEQurjRy8iOtN6FdSnxdqeb2QhP4c4u3R8@mail.gmail.com>
References: <AANLkTik8okbxnC9uU-hPo5c=srwB5qP2HYYasqszgEk5@mail.gmail.com>	<1297895714.4826.46.camel@winkey.org>	<AANLkTim_HURSJOs5SQxbovv=ziNLCNpre2q2Ke+TrK85@mail.gmail.com>	<4D5E2105.6060209@sarvision.nl>
	<AANLkTinGrkPEQurjRy8iOtN6FdSnxdqeb2QhP4c4u3R8@mail.gmail.com>
Message-ID: <4D6222D0.50602@sarvision.nl>

Hi Roland,

(lets cc the gdal list, so others can join in reading and/or answering)

If I recall correctly, you just have to make sure your input dataset is 
rgba. I think I usually had a 4-channel 8-bit geotiff, tiled, and with 
overviews (use gdaladdo to add them). I'm using a self-compiled very 
recent version of gdal (from svn repository) however, so that might be a 
cause of difference.
But it's some time ago I did this, and I'm not sure I recall everything 
correctly. Only that it seemed the most easy way to me to create kmz's 
with gdal :-)

Hope you'll succeed with some more experimenting.

Btw, have you checked the contents of the kmz file? Are you sure there 
are png's inside, and not jpeg's? I'm nog entirely sure anymore of how 
to force png output, my '-co format=png' might have been wrong...

If you don't succeed, don't hesitate to ask again on the gdal list :-)

Vincent.

On 02/18/2011 09:49 PM, Roland Duhaime wrote:
> Thanks for the response Vincent.  I wasn't aware of the new
> kmlsuperoveraly format.  I was able to create the KMZ file with PNG
> files.  However, the png files had black pixels instead of transparent
> pixels.  Were you able to get "gdal_translate -of kmlsuperoverlay -co
> format=png..." to preserve transparent pixels?  If so, what were some of
> the details of your source image or do you have a sample image I can
> repeat the process with?  I was able to maintain transparency with the
> same image using gdal2tiles but not with -kmlsuperoverlay.
>
> I see others had a similar experience here:
>
> http://osgeo-org.1803224.n2.nabble.com/gdal-dev-kmlsuperoverlay-nodata-support-td5624321.html
>
> Thanks Again,
> Roland
>
>
> On Fri, Feb 18, 2011 at 2:34 AM, Vincent Schut <schut@sarvision.nl
> <mailto:schut@sarvision.nl>> wrote:
>
>     Roland,
>
>     not really an answer to your question, but note that - with a recent
>     gdal - you can also create kmz by using the kmlsuperoverlay output
>     format, e.g.:
>
>     gdal_translate -of kmlsuperoverlay <infile> out.kmz
>
>     your infile need be a rgb or rgba format (if you want to maintain
>     transparency, add '-co format=png' to the gdal_translate command,
>     otherwise jpeg's will be created for the tiles).
>
>     Regards,
>     Vincent.
>
>
>     On 02/17/2011 06:28 PM, Roland Duhaime wrote:
>
>         Thanks Brian,
>
>         I have reviewed OSGeo4W\bin\gdal2tiles.py and specifically line 1597
>         containing the href tag to the png file:
>
>         <Icon>
>         <href>%(ty)d.%(tileformat)s</href>
>         </Icon>
>
>         I was curious if someone had any idea on how to modify this href
>         tag to
>         include the relative path as Brian suggests below.  I see that the
>         appropriate path is already included in the name tag if the .kml is
>         changed to .png.  Any ideas on the best approach would be
>         appreciated.
>         Also, is this relative path something that should be added to the
>         general release to support kmz compression?
>
>         Thanks,
>         Roland
>
>
>
>
>         On Wed, Feb 16, 2011 at 5:35 PM, brian <rush@winkey.org
>         <mailto:rush@winkey.org>
>         <mailto:rush@winkey.org <mailto:rush@winkey.org>>> wrote:
>
>             Roland
>
>
>             the problem is in /12/1211/2558.kml line 26
>
>         <href>2558.png</href>
>
>             this should be a relative path from the root of the zipfile
>         not from
>             2558.kml
>
>             Brian
>
>
>
>             On Wed, 2011-02-16 at 15:14 -0500, Roland Duhaime wrote:
>          >
>          > I am following the instructions for creating one KMZ file
>         that are
>          > posted here:
>          >
>          > http://trac.osgeo.org/gdal/wiki/UserDocs/Gdal2Tiles
>          >
>          > I am using gdal2tiles under the "gdal" package 1.8.  I have
>         having
>          > success creating superoverlays and the related folder structure.
>               I am
>          > able to read the created doc.kml in Google Earth.  However,
>         when I
>          > attempt to zip up the folder structure using 7zip and rename
>         the file
>          > to test.kmz, the file doesn't read properly in Google Earth
>         (GE).  GE
>          > zooms into the correct location but all I see is a red "x".
>          > Compressing the superoverlay structure seems to break the link
>             between
>          > the doc.kml file and the png files.  As an example, I have
>         created a
>          > tiny (21 KB)  example and placed it here:
>          >
>          > http://www.edc.uri.edu/Personal/roland/test.kmz
>          >
>          > I am curious if someone had some insight.
>          >
>          > All the Best,
>          > Roland
>          >
>          >
>          >
>          > _______________________________________________
>          > gdal-dev mailing list
>          > gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>         <mailto:gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>>
>
>          > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
From zoltans at geograph.co.za  Mon Feb 21 03:39:28 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Mon Feb 21 03:39:30 2011
Subject: [gdal-dev] Coulour balancing and feathering, in a VRT
Message-ID: <4D6224C0.1040808@geograph.co.za>

Hi,
I've been googling around a bit, but no luck yet.

Now that I have my fancy vrt with a 170 orthos in it, is there a 
(opensource) product I can colour balance and feather with, before I cut 
out the required orthophoto regions?

Thanks in advance,
Zoltan




-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================



-----
No virus found in this message.
Checked by AVG - www.avg.com
Version: 10.0.1204 / Virus Database: 1435/3456 - Release Date: 02/20/11

From P.Halls at york.ac.uk  Mon Feb 21 03:44:15 2011
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Mon Feb 21 03:45:32 2011
Subject: [gdal-dev] Coulour balancing and feathering, in a VRT
In-Reply-To: <4D6224C0.1040808@geograph.co.za>
References: <4D6224C0.1040808@geograph.co.za>
Message-ID: <4D6225DF.6050108@york.ac.uk>

Zoltan,

Zoltan Szecsei wrote:
> Hi,
> I've been googling around a bit, but no luck yet.
> 
> Now that I have my fancy vrt with a 170 orthos in it, is there a 
> (opensource) product I can colour balance and feather with, before I cut 
> out the required orthophoto regions?

The Gimp?  Blender can also provide this sort of functionality.

> 
> Thanks in advance,
> Zoltan
> 

Best wishes,

Peter

--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor & Acting Team Leader Applications Support Group,
                Information Directorate, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: C/O IT Services, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From zoltans at geograph.co.za  Mon Feb 21 04:04:58 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Mon Feb 21 04:05:02 2011
Subject: [gdal-dev] Coulour balancing and feathering, in a VRT
In-Reply-To: <4D6225DF.6050108@york.ac.uk>
References: <4D6224C0.1040808@geograph.co.za> <4D6225DF.6050108@york.ac.uk>
Message-ID: <4D622ABA.80404@geograph.co.za>

On 2011-02-21 10:44, Peter J Halls wrote:
>>
>> Now that I have my fancy vrt with a 170 orthos in it, is there a 
>> (opensource) product I can colour balance and feather with, before I 
>> cut out the required orthophoto regions?
>
>
> The Gimp?  Blender can also provide this sort of functionality.
Batch run across 179 geo-referenced images, each some 200MB?

Will take a look - I'm also looking to see if ossim mapblender will do 
the trick (in batch mode).

Thanks & regards,
Zoltan

-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================



-----
No virus found in this message.
Checked by AVG - www.avg.com
Version: 10.0.1204 / Virus Database: 1435/3456 - Release Date: 02/20/11

From nhv at cape.com  Mon Feb 21 04:05:19 2011
From: nhv at cape.com (Norman Vine)
Date: Mon Feb 21 04:14:24 2011
Subject: [gdal-dev] Coulour balancing and feathering, in a VRT
In-Reply-To: <4D6224C0.1040808@geograph.co.za>
References: <4D6224C0.1040808@geograph.co.za>
Message-ID: <C426ECBC-938E-409A-A025-E65ED51095B0@cape.com>


On Feb 21, 2011, at 3:39 AM, Zoltan Szecsei wrote:

> Hi,
> I've been googling around a bit, but no luck yet.
> 
> Now that I have my fancy vrt with a 170 orthos in it, is there a (opensource) product I can colour balance and feather with, before I cut out the required orthophoto regions?

Zoltan

see http://trac.osgeo.org/ossim/wiki/orthoigen

HTH

Norman
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110221/24ca5d68/attachment.html
From mariusjigmond at hotmail.com  Mon Feb 21 08:17:10 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Mon Feb 21 08:17:31 2011
Subject: [gdal-dev] Mosaicking Orthos
In-Reply-To: <AANLkTinuV-Z_TFt1YZ3eeELEEVn0k+TTYZvfVxWkNwy7@mail.gmail.com>
References: <4D5BA4F4.1090402@geograph.co.za> <4D5BBB49.3020105@geograph.co.za>
	<AANLkTin4KU53kgZXchcsFoa6sWQG2cFAm+_pb4Ug4zTe@mail.gmail.com>
	<4D614D59.6080801@geograph.co.za>
	<AANLkTinuV-Z_TFt1YZ3eeELEEVn0k+TTYZvfVxWkNwy7@mail.gmail.com>
Message-ID: <BLU0-SMTP131F62765B9A232CFB0A73AB2D90@phx.gbl>



On Mon, 2011-02-21 at 13:31 +0530, Chaitanya kumar CH wrote:
> Zoltan,
> 
> The creation of 0394w.tif failed. Does the process have write
> permission on directory?
> I note that you did not specify the -of option for nearblack. In it's
> absence, nearblack creates the output file in Erdas Imagine format.

True :), regardless of the extension you specify.

> 
> 
> On Sun, Feb 20, 2011 at 10:50 PM, Zoltan Szecsei
> <zoltans@geograph.co.za> wrote:
>         Hi Chaitanya (& all),
>         I tried your nearblack comment, and got:
>         
>          nearblack -white -o 0394w.tif 0394.tif
>         Warning 1: TIFFFetchNormalTag:ASCII value for tag
>         "ImageDescription" does not end in null byte
>         
>  
>         Warning 1: TIFFFetchNormalTag:ASCII value for tag
>         "ImageDescription" does not end in null byte
>         Warning 1: TIFFFetchNormalTag:ASCII value for tag "Software"
>         contains null byte in value; value incorrectly truncated
>         during reading due to implementation limitati
>         ERROR 4: Creation of file 0394w.tif failed.
>         
>         
>         I think I am having trouble understanding the setting/using of
>         nodata values.
>         I have now also downloaded and compiled gdal 1.8.0 (but
>         nearblack remained on v1.7.3) on ubuntu 10.04 LTS, and
>         recreated my vrt, to no improvement.
>         
>         To recap: I have 179 3*8bit RGB band aerial images that have
>         been orthorectified. The resulting skewness in the images has
>         created white slivers in the corners, and I am presuming that
>         these white slivers are recognised as "nodata". (My first
>         mistake?)
>         
>         I use the following to create a vrt: 
>         gdalbuildvrt -addalpha -hidenodata -srcnodata "255 255 255"
>         -vrtnodata "0 0 0" -input_file_list files
>         177_untiled_orthos_nodata_180.vrt
>         
>         Thinking that the above will tell gdalbuildvrt that, for the
>         input orthos, white should be recognised as 'nodata', and in
>         the VRT, those white pixels should be converted to black, as
>         nodata.
>         Well, as you've guessed, it didn't happen this way, and I
>         still have the white bits after mosaicking my VRT thus:
>         gdal_translate -projwin -16000 -3520650 -13000 -3525650
>         177_untiled_orthos_nodata.vrt try1.tif
>         
>         I tried re-running gdalbuildvrt specifying -vrtnodata "255 255
>         255" (to match the input ortho files) and the outside border
>         of my vrt turned white, but the slivers between the mosaicked
>         orthos were still present.
>         
>         Please can someone show me the correct way to address this
>         problem.
>         
>         I have included gdalinfo results for both an individual ortho,
>         and for the vrt itself.
>         
>         Thanks & regards,
>         Zoltan
>         
>         
>         
>         
>         
>         
>         **********************************  GDALINFO on indicidual
>         ORTHO ****************************************
>         geograph@gs0:~/vrt_177$ gdalinfo --version
>         GDAL 1.8.0, released 2011/01/12
>         geograph@gs0:~/vrt_177$ 
>         geograph@gs0:~/vrt_177$ 
>         geograph@gs0:~/vrt_177$ 
>         geograph@gs0:~/vrt_177$
>         gdalinfo /mnt/geo_lvm0/ngi_jobs/orthos_8bit/NGI_177_untiled_orthos/0003.tif
>         Warning 1: TIFFFetchNormalTag:ASCII value for tag
>         "ImageDescription" does not end in null byte
>         Warning 1: TIFFFetchNormalTag:ASCII value for tag "Software"
>         contains null byte in value; value incorrectly truncated
>         during reading due to implementation limitations
>         
>  
>           Mask Flags: PER_DATASET ALPHA 
>         Band 4 Block=128x128 Type=Byte, ColorInterp=Alpha
>         geograph@gs0:~/vrt_177$ 
>         ******************************************************************************************************* 
>         
>         
>         
>         
>         
>         On 2011-02-16 19:39, Chaitanya kumar CH wrote: 
>         > Zoltan,
>         > 
>         > Have you tried the nearblack GDAL utility on the original
>         > 176 images?
>         > http://www.gdal.org/nearblack.html
>         > 
>         > On Wed, Feb 16, 2011 at 5:25 PM, Zoltan Szecsei
>         > <zoltans@geograph.co.za> wrote: 
>         >         On 2011-02-16 12:20, Zoltan Szecsei wrote:
>         >                 Hi All,
>         >                 I've built a vrt with 176 images.
>         >                 
>         >                 I now need to mosaic this whole area into
>         >                 roughly 5 x 5 ortho images.
>         >                 
>         >                 How can I force the white edges into
>         >                 background of the overlapping orthos?
>         >                 I'm a little cautious of simply (finding a
>         >                 way to) making "white" transparent as it is
>         >                 only the white on the edges that need to be
>         >                 backgrounded.
>         >         
>         >         
>         >         Hi again,
>         >         Since the above post, I have tried different ways to
>         >         set nodata, but to no avail - I still get the white
>         >         edges:
>         >         (see jpeg sent with my original post)
>         >         
>         >         gdalbuildvrt -addalpha -hidenodata -input_file_list
>         >         files 177_untiled_orthos_nodata.vrt
>         >         gdalbuildvrt -srcnodata "0 0 0"  -addalpha
>         >         -hidenodata -input_file_list files
>         >         177_untiled_orthos_blk.vrt
>         >         gdalbuildvrt -srcnodata "255 255 255"  -addalpha
>         >         -hidenodata -input_file_list files
>         >         177_untiled_orthos_white.vrt
>         >         
>         >         How should I be masking out the nodata (or even
>         >         white pixels) so that when I mosaic a bunch of tiffs
>         >         together, I dont get the white stripes in the
>         >         resulting image?
>         >         
>         >         Using GDAL 1.7.3, released 2010/11/10 on Ubuntu
>         >         10.04
>         >         Viewing with Quantum GIS - 1.6.0-Trunk on Ubuntu
>         >         10.04 (same box).
>         >         ...but running the whole lot in xterms with Xming &
>         >         putty from my WinVista box.
>         >         
>         >         
>         >         Regards, 
>         >         
>         >         Zoltan
>         >         
>         >         
>         
>         
>         -- 
>         
>         ===========================================
>         Zoltan Szecsei PrGISc [PGP0031]
>         Geograph (Pty) Ltd.
>         P.O. Box 7, Muizenberg 7950, South Africa.
>         
>         65 Main Road, Muizenberg 7945
>         Western Cape, South Africa.  
>         
>         34? 6'16.35"S 18?28'5.62"E 
>         
>         Tel: +27-21-7884897  Mobile: +27-83-6004028
>         Fax: +27-86-6115323     www.geograph.co.za
>         ===========================================
>         
>         ______________________________________________________________
>         
>         
>         
>         
>         
>         
> 
> 
> -- 
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/ 
> +91-9494447584
> 17.2416N 80.1426E 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From mariusjigmond at hotmail.com  Mon Feb 21 08:33:44 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Mon Feb 21 08:33:50 2011
Subject: [gdal-dev] Coulour balancing and feathering, in a VRT
In-Reply-To: <4D6224C0.1040808@geograph.co.za>
References: <4D6224C0.1040808@geograph.co.za>
Message-ID: <BLU0-SMTP17711190F14C742AE9902F3B2D90@phx.gbl>

With gdal_translate you can do per band re-scaling. I've used it on
Landsat, it's not magic but it works pretty well. You can group your
images, find the right formula for each group and you can quickly verify
the results with a VRT.

-marius

On Mon, 2011-02-21 at 10:39 +0200, Zoltan Szecsei wrote: 
> Hi,
> I've been googling around a bit, but no luck yet.
> 
> Now that I have my fancy vrt with a 170 orthos in it, is there a 
> (opensource) product I can colour balance and feather with, before I cut 
> out the required orthophoto regions?
> 
> Thanks in advance,
> Zoltan
> 
> 
> 
> 

From jormarfe at gmail.com  Mon Feb 21 12:43:20 2011
From: jormarfe at gmail.com (Jorge Martin)
Date: Mon Feb 21 12:45:16 2011
Subject: [gdal-dev] Transform point from UTM to Lat/Long
Message-ID: <AANLkTi=E8eMKVEraGe-+r9fnv0kkpGATd0L84mY=3AgF@mail.gmail.com>

Hello,


        I have a big doubt about transforming one point from UTM to
Lat/long. I have to make the resampling of a Lat/long image. The target
image is UTM with 2.5 resolution. To create the target image I use GDAL, so
I have to set the UTM zone, so I set this zone to the zone corresponding to
the top left corner of the source image (Lat/long).

      When I am reading the all the points of the target (UTM) image and
finding the corresponding lat/long coordinates into the source image. I have
to transform these points from UTM to Lat/Long. I case the source image
covers more than one UTM zone, the transformation between this two
coordinate system is not the right.Because the Lat/long of the initial image
may corresponds  to a UTM zone different than the one I have fixed for the
grid.

Is there any way to make this transformation taking into account this
problem?



Best Regards,


Jorge Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110221/d1228e97/attachment.html
From warmerdam at pobox.com  Mon Feb 21 13:01:15 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb 21 13:01:18 2011
Subject: [gdal-dev] Transform point from UTM to Lat/Long
In-Reply-To: <AANLkTi=E8eMKVEraGe-+r9fnv0kkpGATd0L84mY=3AgF@mail.gmail.com>
References: <AANLkTi=E8eMKVEraGe-+r9fnv0kkpGATd0L84mY=3AgF@mail.gmail.com>
Message-ID: <4D62A86B.7050203@pobox.com>

On 11-02-21 12:43 PM, Jorge Martin wrote:
> Hello,
>
>
>          I have a big doubt about transforming one point from UTM to Lat/long.
> I have to make the resampling of a Lat/long image. The target image is UTM with
> 2.5 resolution. To create the target image I use GDAL, so I have to set the UTM
> zone, so I set this zone to the zone corresponding to the top left corner of
> the source image (Lat/long).
>
>        When I am reading the all the points of the target (UTM) image and
> finding the corresponding lat/long coordinates into the source image. I have to
> transform these points from UTM to Lat/Long. I case the source image covers
> more than one UTM zone, the transformation between this two coordinate system
> is not the right.Because the Lat/long of the initial image may corresponds  to
> a UTM zone different than the one I have fixed for the grid.
>
> Is there any way to make this transformation taking into account this problem?

Jorge,

I'm not positive I follow your problem, but in the situation of resampling
an image into a UTM projection when the image overlaps two zones you can
just pick one with the greatest overlap and use that.

There is nothing that says you can't reproject to a given utm zone even
outside it's zone bounds.  But keep in mind that the further you get
from the central meridian of a zone, the greater the distortion and error
in how the equations are evaluated.  So you don't want to be using a
UTM zone several zones away from the image.

As a rule of thumb, I'd suggest using the center of the image to decide
on a utm zone.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jorge.arevalo at deimos-space.com  Mon Feb 21 14:18:22 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Mon Feb 21 14:18:46 2011
Subject: [gdal-dev] Transform point from UTM to Lat/Long
In-Reply-To: <4D62A86B.7050203@pobox.com>
References: <AANLkTi=E8eMKVEraGe-+r9fnv0kkpGATd0L84mY=3AgF@mail.gmail.com>
	<4D62A86B.7050203@pobox.com>
Message-ID: <AANLkTik3r2gS_uzTf5ipYBmN3xUq-a72n=sgG+DJ2FXG@mail.gmail.com>

On Mon, Feb 21, 2011 at 7:01 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> On 11-02-21 12:43 PM, Jorge Martin wrote:
>>
>> Hello,
>>
>>
>> ? ? ? ? I have a big doubt about transforming one point from UTM to
>> Lat/long.
>> I have to make the resampling of a Lat/long image. The target image is UTM
>> with
>> 2.5 resolution. To create the target image I use GDAL, so I have to set
>> the UTM
>> zone, so I set this zone to the zone corresponding to the top left corner
>> of
>> the source image (Lat/long).
>>
>> ? ? ? When I am reading the all the points of the target (UTM) image and
>> finding the corresponding lat/long coordinates into the source image. I
>> have to
>> transform these points from UTM to Lat/Long. I case the source image
>> covers
>> more than one UTM zone, the transformation between this two coordinate
>> system
>> is not the right.Because the Lat/long of the initial image may corresponds
>> ?to
>> a UTM zone different than the one I have fixed for the grid.
>>
>> Is there any way to make this transformation taking into account this
>> problem?
>
> Jorge,
>
> I'm not positive I follow your problem, but in the situation of resampling
> an image into a UTM projection when the image overlaps two zones you can
> just pick one with the greatest overlap and use that.
>
> There is nothing that says you can't reproject to a given utm zone even
> outside it's zone bounds. ?But keep in mind that the further you get
> from the central meridian of a zone, the greater the distortion and error
> in how the equations are evaluated. ?So you don't want to be using a
> UTM zone several zones away from the image.
>
> As a rule of thumb, I'd suggest using the center of the image to decide
> on a utm zone.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

Hi Jorge,

As Frank said, I'd use the center of the image to decide UTM zone. I
have experience with images covering Spain area (UTM zone 28 for
Canary Island, and 29-31 for Spain). I've obtained positive results
using zone 30 for all Spain except Canary Island.

Best regards,

-- 
Jorge Ar?valo
Internet & Mobilty Division, DEIMOS
jorge.arevalo@deimos-space.com
http://es.linkedin.com/in/jorgearevalo80
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From Jennings.Jay at geoeye.com  Mon Feb 21 15:26:44 2011
From: Jennings.Jay at geoeye.com (Jay Jennings)
Date: Mon Feb 21 15:26:34 2011
Subject: [gdal-dev] Downsample with averaging?
Message-ID: <44EADB1AC2F19449B528A17643F417B99082D25903@MS1.geoeye.com>

Hello list,
(using GDAL 1.8.0) I am trying to create a 32:1 down-sampled overview of a GeoTiff satellite image.  My first thought was gdal_translate, with args such as "-outsize 3.125% 3.125%"... which produces surprisingly high quality given the absence of a resampling option.   However I'm looking for a downsampling scheme that creates a result pixel by averaging all relevant source pixels (I know, for 32:1 downsample, that means 1024 source pixels for each result pixel !) with the hope of an output that is not "speckled" or "grainy" insofar as possible.

I also looked at gdaladdo, which does have the "-r average" resampling option... the guidance at gdal.org seems to suggest that it can produce a 32:1 GeoTIFF external overview with a command like this:

gdaladdo  -r  average  -ro  XXXXX.tif  32

But that produces a surprising error message, namely:
ERROR 4: `XXXXX.tif.ovr' does not exist in the file system, and is not recognised as a supported dataset name.

Am I barking up the wrong tree with gdaladdo for this purpose ?  Anybody have any suggestions for highest-quality down-sampling ? Thanks in advance.

--Jay Jennings
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110221/2aefba1d/attachment.html
From chaitanya.ch at gmail.com  Mon Feb 21 16:18:33 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Feb 21 16:18:37 2011
Subject: [gdal-dev] Downsample with averaging?
In-Reply-To: <44EADB1AC2F19449B528A17643F417B99082D25903@MS1.geoeye.com>
References: <44EADB1AC2F19449B528A17643F417B99082D25903@MS1.geoeye.com>
Message-ID: <AANLkTimbHwkrMyVC3QL-w7V9d_U4kGLUN78GcdSOZ=y4@mail.gmail.com>

Jay,

Can you provide a sample file that gives this error?

On Tue, Feb 22, 2011 at 1:56 AM, Jay Jennings <Jennings.Jay@geoeye.com>wrote:

> Hello list,
>
> (using GDAL 1.8.0) I am trying to create a 32:1 down-sampled overview of a
> GeoTiff satellite image.  My first thought was gdal_translate, with args
> such as ?-outsize 3.125% 3.125%?? which produces surprisingly high quality
> given the absence of a resampling option.   However I?m looking for a
> downsampling scheme that creates a result pixel by averaging all relevant
> source pixels (I know, for 32:1 downsample, that means 1024 source pixels
> for each result pixel !) with the hope of an output that is not ?speckled?
> or ?grainy? insofar as possible.
>
>
>
> I also looked at gdaladdo, which does have the ?-r average? resampling
> option? the guidance at gdal.org seems to suggest that it can produce a
> 32:1 GeoTIFF external overview with a command like this:
>
>
>
> gdaladdo  -r  average  -ro  XXXXX.tif  32
>
>
>
> But that produces a surprising error message, namely:
>
> ERROR 4: `XXXXX.tif.ovr' does not exist in the file system, and is not
> recognised as a supported dataset name.
>
>
>
> Am I barking up the wrong tree with gdaladdo for this purpose ?  Anybody
> have any suggestions for highest-quality down-sampling ? Thanks in advance.
>
>
>
> --Jay Jennings
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110222/82fcdf09/attachment-0001.html
From Jennings.Jay at geoeye.com  Mon Feb 21 17:56:46 2011
From: Jennings.Jay at geoeye.com (Jay Jennings)
Date: Mon Feb 21 17:56:37 2011
Subject: [gdal-dev] Downsample with averaging?
In-Reply-To: <AANLkTimbHwkrMyVC3QL-w7V9d_U4kGLUN78GcdSOZ=y4@mail.gmail.com>
References: <44EADB1AC2F19449B528A17643F417B99082D25903@MS1.geoeye.com>
	<AANLkTimbHwkrMyVC3QL-w7V9d_U4kGLUN78GcdSOZ=y4@mail.gmail.com>
Message-ID: <44EADB1AC2F19449B528A17643F417B99082D2593D@MS1.geoeye.com>

Unfortunately I can?t provide the file (it?s about 2.1 GB and not releasable), but below is the ?gdalinfo? dump for it.

The problem may be related to size of the input, because the same command worked OK on a GeoTiff that is ?only? 975 MB.

BTW   For the 975 GB run that succeeded, the created overview was named *.ovr rather than *.tif.   Is this expected ?   The guidance for ?gdaladdo? hints that the created *.ovr is actually a TIFF, but that?s not true here (I tried renaming it *.tif, but no TIFF reader could open it).


Driver: GTiff/GeoTIFF
Files: XXXXXX.tif
Size is 25733, 27840
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-100.375165330488004,29.624901844319002)
Pixel Size = (0.000004869286704,-0.000004495684143)
Metadata:
  TIFFTAG_DATETIME=2009:07:17 06:16:07
  TIFFTAG_ARTIST=GeoEye
  TIFFTAG_COPYRIGHT=(C) COPYRIGHT GeoEye, All Rights Reserved
  TIFFTAG_MINSAMPLEVALUE=0
  TIFFTAG_MAXSAMPLEVALUE=255
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  -100.3751653,  29.6249018) ( 100d22'30.60"W, 29d37'29.65"N)
Lower Left  (  -100.3751653,  29.4997420) ( 100d22'30.60"W, 29d29'59.07"N)
Upper Right (  -100.2498639,  29.6249018) ( 100d14'59.51"W, 29d37'29.65"N)
Lower Right (  -100.2498639,  29.4997420) ( 100d14'59.51"W, 29d29'59.07"N)
Center      (  -100.3125146,  29.5623219) ( 100d18'45.05"W, 29d33'44.36"N)
Band 1 Block=512x512 Type=Byte, ColorInterp=Red
Band 2 Block=512x512 Type=Byte, ColorInterp=Green
Band 3 Block=512x512 Type=Byte, ColorInterp=Blue

From: Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com]
Sent: Monday, February 21, 2011 4:19 PM
To: Jay Jennings
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Downsample with averaging?

Jay,

Can you provide a sample file that gives this error?
On Tue, Feb 22, 2011 at 1:56 AM, Jay Jennings <Jennings.Jay@geoeye.com<mailto:Jennings.Jay@geoeye.com>> wrote:
Hello list,
(using GDAL 1.8.0) I am trying to create a 32:1 down-sampled overview of a GeoTiff satellite image.  My first thought was gdal_translate, with args such as ?-outsize 3.125% 3.125%?? which produces surprisingly high quality given the absence of a resampling option.   However I?m looking for a downsampling scheme that creates a result pixel by averaging all relevant source pixels (I know, for 32:1 downsample, that means 1024 source pixels for each result pixel !) with the hope of an output that is not ?speckled? or ?grainy? insofar as possible.

I also looked at gdaladdo, which does have the ?-r average? resampling option? the guidance at gdal.org<http://gdal.org> seems to suggest that it can produce a 32:1 GeoTIFF external overview with a command like this:

gdaladdo  -r  average  -ro  XXXXX.tif  32

But that produces a surprising error message, namely:
ERROR 4: `XXXXX.tif.ovr' does not exist in the file system, and is not recognised as a supported dataset name.

Am I barking up the wrong tree with gdaladdo for this purpose ?  Anybody have any suggestions for highest-quality down-sampling ? Thanks in advance.

--Jay Jennings

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110221/7716bcd8/attachment.html
From userofgdal at gmail.com  Mon Feb 21 23:19:57 2011
From: userofgdal at gmail.com (user gdal)
Date: Mon Feb 21 23:19:58 2011
Subject: [gdal-dev] Zero Pixel Values. Continuation...
Message-ID: <AANLkTi=-5PJJJ3WvZs9Fd4efJosmxgBUdGVzfRXYnUHs@mail.gmail.com>

Dear Sir,
Thanks a lot for reply about zero pixel values when I attempted to
write into an output image file. Though I pasted the code I wrote for
programmatically 'copying' the image, once again I am pasting the same
below.

Q. "One thing I notice about your code is that you only appear to read
and write the first scanline of the image.  Is this intentional?"

Ans. No. I want to copy the whole image. Please see the function
ReadNWrite(...). Am I reading only the first scanline? Oh my God! In
the syntax of the function RasterIO of GDALDataset, it seems there is
no parameter with scanline number. Can you please solve the problem
for me. Before call of the function ReadNWrite, I wanted to 'prepare'
the output image (see the function CreateOutputImg). The problem
should be in the functions CreateOutputImg, ReadNWrite, Read and
Write.

Another worry is projection information, which I wanted to put in
CreateOutputImg. I am sure there are some serious shortcomings in my
attempt. How to set that correctly?

Q. "For the purposes of asking a question of the list it would be helpful if
you could boil your program down to a minimum example including all the
essentials.  It will require extra work on your part, but will make it
much easier for the many members of the list who might want to skim
through the code to see if they have suggestions".

Ans. I have made some more effort to make my difficulty more specific.
Now I request all of you to kindly solve it and if possible, post in
the website.

Thanks once again.

Yours sincerely,
 Ramesh

-------------------------------------------------------------------------------------------------------------------------
template<class T> void CIOImg_Templ<T>::
AllocateMemory( )
{
 unsigned int b;

 buf=new T * [Band];
 if(!buf) HandleException("Memory Allocation Problem");

 for(b=0; b<Band; b++) // Bands in the input file
 {
 *(buf+b)=new T [Col];
 if(!(buf+b)) HandleException("Memory Allocation Problem");
 }
}   // Now buf is allocated with memory as buf[Band][Col]

template<class A> void CIOImg_Templ<A>::CreateOutputImg(GDALDataset *
const* InDS) // output dataset (DS) is defined as a class member
{
 char **options=NULL; /* saw an example of this kind in GDAL site */
 double trans[6];         // the transformation coefficients

 GDALDriver *driver=(*InDS)->GetDriver( );

 GDALAllRegister( );
 if(!driver) HandleException("Sorry, couldn't load the driver for your format");

 outds=(GDALDataset *) GDALOpen(outfilename, GA_Update);
 outds=driver->Create(outfilename, Col, Row, Band, datatype, options);
 // is it correct

 (*InDS)->GetGeoTransform(trans);
 outds->SetGeoTransform(trans);

 outds->SetProjection((*InDS)->GetProjectionRef( ));

 /* Seems there is much more to all this, but how to do? */
}

template<class T> void CIOImg_Templ<T>::Read(const unsigned int b,
GDALDataset* const *inds)
{
 ((*inds)->GetRasterBand(b+1))->RasterIO(GF_Read, 0, 0, Col, 1,
buf[b], Col, 1, datatype, 0, 0);   // able to read the pixel values
correctly into buffer (buf)
}

template<class T> void CIOImg_Templ<T>::Write(const unsigned int b,
GDALDataset** opds)
{
 ((*opds)->GetRasterBand(b+1))->RasterIO(GF_Write, 0, 0, Col, 1,
buf[b], Col, 1, datatype, 0, 0);

 */ (*opds)->RasterIO(GF_Write, 0, 0, Col, 1, buf[b], Col, 1,
datatype, 1, NULL, 0, 0, 0); */ /* Neither of these is working */
}

template<class T> void CIOImg_Templ<T>::ReadNWrite(GDALDataset * const *inds)
{
 unsigned int b, i=0;

 CreateOutputImg(inds);

 while(i<Row) // for each row
 {
 b=0;
 while(b<Band)
 {
 Read(b, inds); Write(b, &outds); // read row by row and write into a new file
 b++;
 }

 i++;
 }
}

The class's destructor closes the output dataset ("outds") using GDALClose.

Ramesh
-------------------------------------------------------------------------------------------------------------------------
From chaitanya.ch at gmail.com  Tue Feb 22 00:03:02 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Feb 22 00:03:04 2011
Subject: [gdal-dev] Zero Pixel Values. Continuation...
In-Reply-To: <AANLkTi=-5PJJJ3WvZs9Fd4efJosmxgBUdGVzfRXYnUHs@mail.gmail.com>
References: <AANLkTi=-5PJJJ3WvZs9Fd4efJosmxgBUdGVzfRXYnUHs@mail.gmail.com>
Message-ID: <AANLkTingmqxwY9npme12q_WvUY6T3Eak13ZfKYSUR4Nb@mail.gmail.com>

Ramesh,

Instead of 'pasting' a part of your code, could you attach your entire .cpp
file along with the main() function and stuff?

On Tue, Feb 22, 2011 at 9:49 AM, user gdal <userofgdal@gmail.com> wrote:

> Dear Sir,
> Thanks a lot for reply about zero pixel values when I attempted to
> write into an output image file. Though I pasted the code I wrote for
> programmatically 'copying' the image, once again I am pasting the same
> below.
>
> Q. "One thing I notice about your code is that you only appear to read
> and write the first scanline of the image.  Is this intentional?"
>
> Ans. No. I want to copy the whole image. Please see the function
> ReadNWrite(...). Am I reading only the first scanline? Oh my God! In
> the syntax of the function RasterIO of GDALDataset, it seems there is
> no parameter with scanline number. Can you please solve the problem
> for me. Before call of the function ReadNWrite, I wanted to 'prepare'
> the output image (see the function CreateOutputImg). The problem
> should be in the functions CreateOutputImg, ReadNWrite, Read and
> Write.
>
> Another worry is projection information, which I wanted to put in
> CreateOutputImg. I am sure there are some serious shortcomings in my
> attempt. How to set that correctly?
>
> Q. "For the purposes of asking a question of the list it would be helpful
> if
> you could boil your program down to a minimum example including all the
> essentials.  It will require extra work on your part, but will make it
> much easier for the many members of the list who might want to skim
> through the code to see if they have suggestions".
>
> Ans. I have made some more effort to make my difficulty more specific.
> Now I request all of you to kindly solve it and if possible, post in
> the website.
>
> Thanks once again.
>
> Yours sincerely,
>  Ramesh
>
>

>
> The class's destructor closes the output dataset ("outds") using GDALClose.
>
> Ramesh
>
> -------------------------------------------------------------------------------------------------------------------------
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110222/39968ef7/attachment-0001.html
From bcclaywell at gmail.com  Tue Feb 22 00:27:47 2011
From: bcclaywell at gmail.com (Brian Claywell)
Date: Tue Feb 22 00:27:50 2011
Subject: [gdal-dev] Downsample with averaging?
In-Reply-To: <44EADB1AC2F19449B528A17643F417B99082D25903@MS1.geoeye.com>
References: <44EADB1AC2F19449B528A17643F417B99082D25903@MS1.geoeye.com>
Message-ID: <AANLkTimsVJ_tGk32kj=5R59uqaxYhcZM45FZ8p6HsDz0@mail.gmail.com>

On Mon, Feb 21, 2011 at 2:26 PM, Jay Jennings <Jennings.Jay@geoeye.com> wrote:
> [...] I?m looking for a
> downsampling scheme that creates a result pixel by averaging all relevant
> source pixels (I know, for 32:1 downsample, that means 1024 source pixels
> for each result pixel !) with the hope of an output that is not ?speckled?
> or ?grainy? insofar as possible.

gdalwarp would probably give you the most control over the resampling
algorithm: http://www.gdal.org/gdalwarp.html
Look particularly at the -tr (target resolution, in georeferenced
units) or -ts (target size, in pixels) options.

For example, to produce a 32:1 thumbnail of a 44418x39108 GeoTIFF that
I have laying around,

$ gdalwarp -ts 1389 1223 -r bilinear input.tif output.tif

You can experiment with the different resampling algorithms to find
one you like (near, bilinear, cubic, cubicspline, lanczos).

> gdaladdo ?-r ?average ?-ro ?XXXXX.tif ?32
>
> But that produces a surprising error message, namely:
>
> ERROR 4: `XXXXX.tif.ovr' does not exist in the file system, and is not
> recognised as a supported dataset name.

I tried gdaladdo with your arguments on the GeoTIFF I mentioned above
(which is 3.4 GB) and it executed with no problems. Your error sounds
like the *.tif.ovr file simply didn't get created; you might
double-check that you have write permissions in the directory where
your input file lives. I believe overviews are always written into the
same directory as their source file, rather than your current working
directory.

-b

-- 
Brian Claywell
bcclaywell@gmail.com
From chaitanya.ch at gmail.com  Tue Feb 22 03:03:06 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Feb 22 03:03:10 2011
Subject: [gdal-dev] Downsample with averaging?
In-Reply-To: <44EADB1AC2F19449B528A17643F417B99082D2593D@MS1.geoeye.com>
References: <44EADB1AC2F19449B528A17643F417B99082D25903@MS1.geoeye.com>
	<AANLkTimbHwkrMyVC3QL-w7V9d_U4kGLUN78GcdSOZ=y4@mail.gmail.com>
	<44EADB1AC2F19449B528A17643F417B99082D2593D@MS1.geoeye.com>
Message-ID: <AANLkTim90wWDEy7SWuEJAOvh-b3ZHk2sZw20SsCB4fMr@mail.gmail.com>

Jay,

The external overview files are created in TIFF format. I checked. However,
most of the metadata will be lost.
You can recover the metadata by using gdal_translate with "-outsize 3.125%
3.125%". It will read the metadata from the original file and the pixels
from the level 32 overview.

Regarding the 2.1GB file:
Check if the directory is not read-only and the disk has sufficient space.
Run gdaladdo with the environment variable CPL_DEBUG set to YES and report
the messages.

You can also try gdalwarp multiple times with the resampling method set to
something other than 'near' and 'bilinear'. However, I am not sure if this
will give you want you want.

On Tue, Feb 22, 2011 at 4:26 AM, Jay Jennings <Jennings.Jay@geoeye.com>wrote:

> Unfortunately I can?t provide the file (it?s about 2.1 GB and not
> releasable), but below is the ?gdalinfo? dump for it.
>
>
>
> The problem may be related to size of the input, because the same command
> worked OK on a GeoTiff that is ?only? 975 MB.
>
>
>
> BTW   For the 975 GB run that succeeded, the created overview was named
> *.ovr rather than *.tif.   Is this expected ?   The guidance for ?gdaladdo?
> hints that the created *.ovr is actually a TIFF, but that?s not true here (I
> tried renaming it *.tif, but no TIFF reader could open it).
>
>
>
>
>
> Driver: GTiff/GeoTIFF
>
> Files: XXXXXX.tif
>
> Size is 25733, 27840
>
> Coordinate System is:
>
> GEOGCS["WGS 84",
>
>     DATUM["WGS_1984",
>
>         SPHEROID["WGS 84",6378137,298.257223563,
>
>             AUTHORITY["EPSG","7030"]],
>
>         AUTHORITY["EPSG","6326"]],
>
>     PRIMEM["Greenwich",0],
>
>     UNIT["degree",0.0174532925199433],
>
>     AUTHORITY["EPSG","4326"]]
>
> Origin = (-100.375165330488004,29.624901844319002)
>
> Pixel Size = (0.000004869286704,-0.000004495684143)
>
> Metadata:
>
>   TIFFTAG_DATETIME=2009:07:17 06:16:07
>
>   TIFFTAG_ARTIST=GeoEye
>
>   TIFFTAG_COPYRIGHT=(C) COPYRIGHT GeoEye, All Rights Reserved
>
>   TIFFTAG_MINSAMPLEVALUE=0
>
>   TIFFTAG_MAXSAMPLEVALUE=255
>
>   AREA_OR_POINT=Area
>
> Image Structure Metadata:
>
>   INTERLEAVE=PIXEL
>
> Corner Coordinates:
>
> Upper Left  (  -100.3751653,  29.6249018) ( 100d22'30.60"W, 29d37'29.65"N)
>
> Lower Left  (  -100.3751653,  29.4997420) ( 100d22'30.60"W, 29d29'59.07"N)
>
> Upper Right (  -100.2498639,  29.6249018) ( 100d14'59.51"W, 29d37'29.65"N)
>
> Lower Right (  -100.2498639,  29.4997420) ( 100d14'59.51"W, 29d29'59.07"N)
>
> Center      (  -100.3125146,  29.5623219) ( 100d18'45.05"W, 29d33'44.36"N)
>
> Band 1 Block=512x512 Type=Byte, ColorInterp=Red
>
> Band 2 Block=512x512 Type=Byte, ColorInterp=Green
>
> Band 3 Block=512x512 Type=Byte, ColorInterp=Blue
>
>
>
> *From:* Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com]
> *Sent:* Monday, February 21, 2011 4:19 PM
> *To:* Jay Jennings
> *Cc:* gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] Downsample with averaging?
>
>
>
> Jay,
>
> Can you provide a sample file that gives this error?
>
> On Tue, Feb 22, 2011 at 1:56 AM, Jay Jennings <Jennings.Jay@geoeye.com>
> wrote:
>
> Hello list,
>
> (using GDAL 1.8.0) I am trying to create a 32:1 down-sampled overview of a
> GeoTiff satellite image.  My first thought was gdal_translate, with args
> such as ?-outsize 3.125% 3.125%?? which produces surprisingly high quality
> given the absence of a resampling option.   However I?m looking for a
> downsampling scheme that creates a result pixel by averaging all relevant
> source pixels (I know, for 32:1 downsample, that means 1024 source pixels
> for each result pixel !) with the hope of an output that is not ?speckled?
> or ?grainy? insofar as possible.
>
>
>
> I also looked at gdaladdo, which does have the ?-r average? resampling
> option? the guidance at gdal.org seems to suggest that it can produce a
> 32:1 GeoTIFF external overview with a command like this:
>
>
>
> gdaladdo  -r  average  -ro  XXXXX.tif  32
>
>
>
> But that produces a surprising error message, namely:
>
> ERROR 4: `XXXXX.tif.ovr' does not exist in the file system, and is not
> recognised as a supported dataset name.
>
>
>
> Am I barking up the wrong tree with gdaladdo for this purpose ?  Anybody
> have any suggestions for highest-quality down-sampling ? Thanks in advance.
>
>
>
> --Jay Jennings
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110222/da4ccae3/attachment.html
From nhv at cape.com  Tue Feb 22 04:09:21 2011
From: nhv at cape.com (Norman Vine)
Date: Tue Feb 22 04:09:26 2011
Subject: [gdal-dev] Downsample with averaging?
In-Reply-To: <44EADB1AC2F19449B528A17643F417B99082D25903@MS1.geoeye.com>
References: <44EADB1AC2F19449B528A17643F417B99082D25903@MS1.geoeye.com>
Message-ID: <DB2C0142-0101-4FBA-A5AD-741F68492053@cape.com>


On Feb 21, 2011, at 3:26 PM, Jay Jennings wrote:

> Hello list,
> (using GDAL 1.8.0) I am trying to create a 32:1 down-sampled overview of a GeoTiff satellite image.  My first thought was gdal_translate, with args such as ?-outsize 3.125% 3.125%?? which produces surprisingly high quality given the absence of a resampling option.   However I?m looking for a downsampling scheme that creates a result pixel by averaging all relevant source pixels (I know, for 32:1 downsample, that means 1024 source pixels for each result pixel !) with the hope of an output that is not ?speckled? or ?grainy? insofar as possible.
>  
> I also looked at gdaladdo, which does have the ?-r average? resampling option? the guidance at gdal.org seems to suggest that it can produce a 32:1 GeoTIFF external overview with a command like this:
>  
> gdaladdo  -r  average  -ro  XXXXX.tif  32
>  
> But that produces a surprising error message, namely:
> ERROR 4: `XXXXX.tif.ovr' does not exist in the file system, and is not recognised as a supported dataset name.
>  
> Am I barking up the wrong tree with gdaladdo for this purpose ?  Anybody have any suggestions for highest-quality down-sampling ? Thanks in advance.
>  

Jay

I think you need to build your overlays incrementally in order to get the average
of the 'block' at each overview level as gdaladdo has a very small sampling window

gdaladdo -r average my.tif 2 4 8 16 32

better to use gauss sampling
see http://en.wikipedia.org/wiki/Pyramid_%28image_processing%29

gdaladdo -r gauss my.tiff 2 4 8 16 32

note you may want to convert your image to a floating point form first 
so as not to possibly lose precision due to the multiple passes

there is a gdal method to extract a single overview level from a tif but I can never 
remember it maybe someone will chime in if not you can use your gdal_translate
trick.

HTH

Norman


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110222/70ef2fc1/attachment-0001.html
From anitagraser at gmx.at  Tue Feb 22 07:37:26 2011
From: anitagraser at gmx.at (Anita Graser)
Date: Tue Feb 22 07:37:35 2011
Subject: [gdal-dev] Re: [Qgis-developer] Issue saving shapefiles with REAL15
	values
In-Reply-To: <1298377151.4158.74.camel@ursus.ufficio.net>
References: <op.vra0dm1jna7rjy@anita-pc>
	<1298377151.4158.74.camel@ursus.ufficio.net>
Message-ID: <op.vra1coaona7rjy@anita-pc>

Am 22.02.2011, 13:19 Uhr, schrieb Paolo Cavallini <cavallini@faunalia.it>:

> Il giorno mar, 22/02/2011 alle 13.16 +0100, Anita Graser ha scritto:
>> I have a shapefile containing fields of type REAL15. I'd like to cut an
>> area of interest out of this shapefile using QGIS "Save as ..."  
>> function.
>> The resulting shapefile still has fields of type REAL15 but the  
>> contained
>> values are botched, e.g. 10400000603695 becomes -2147483648.
>
>> I'm uncertain whether the problem lies with GDAL or QGIS' use of GDAL.
>
> Which versions?

OSGeo4W r15203 with GDAL 1.8.0

>
>> It would be great if this problem could be resolved. Unfortunately, I
>> can't share the original (commercial) dataset.
>
> You can extract just one record, and share that one.

How? If I use QGIS, the values will be broken.

Best wishes,

Anita
From chaitanya.ch at gmail.com  Tue Feb 22 10:33:52 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Feb 22 10:33:55 2011
Subject: [gdal-dev] Re: [Qgis-developer] Issue saving shapefiles with
	REAL15 values
In-Reply-To: <op.vra1coaona7rjy@anita-pc>
References: <op.vra0dm1jna7rjy@anita-pc>
	<1298377151.4158.74.camel@ursus.ufficio.net>
	<op.vra1coaona7rjy@anita-pc>
Message-ID: <AANLkTimd6tCffkxO9V7orWX73Wmny3WjaWv0u-Dtm7=3@mail.gmail.com>

Anita,

First, let us isolate the source of this error. QGIS or GDAL/OGR.
Use ogr2ogr to clip the part you did with QGIS. See the extents of the
clipped shapefile using ogrinfo and use it with the ogr2ogr utility.
http://www.gdal.org/ogr2ogr.html

On Tue, Feb 22, 2011 at 6:07 PM, Anita Graser <anitagraser@gmx.at> wrote:

> Am 22.02.2011, 13:19 Uhr, schrieb Paolo Cavallini <cavallini@faunalia.it>:
>
>  Il giorno mar, 22/02/2011 alle 13.16 +0100, Anita Graser ha scritto:
>>
>>> I have a shapefile containing fields of type REAL15. I'd like to cut an
>>> area of interest out of this shapefile using QGIS "Save as ..." function.
>>> The resulting shapefile still has fields of type REAL15 but the contained
>>> values are botched, e.g. 10400000603695 becomes -2147483648.
>>>
>>
>>  I'm uncertain whether the problem lies with GDAL or QGIS' use of GDAL.
>>>
>>
>> Which versions?
>>
>
> OSGeo4W r15203 with GDAL 1.8.0
>
>
>>  It would be great if this problem could be resolved. Unfortunately, I
>>> can't share the original (commercial) dataset.
>>>
>>
>> You can extract just one record, and share that one.
>>
>
> How? If I use QGIS, the values will be broken.
>
> Best wishes,
>
> Anita
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110222/50a78f76/attachment.html
From Jennings.Jay at geoeye.com  Tue Feb 22 10:39:06 2011
From: Jennings.Jay at geoeye.com (Jay Jennings)
Date: Tue Feb 22 10:38:57 2011
Subject: [gdal-dev] Downsample with averaging?
In-Reply-To: <DB2C0142-0101-4FBA-A5AD-741F68492053@cape.com>
References: <44EADB1AC2F19449B528A17643F417B99082D25903@MS1.geoeye.com>
	<DB2C0142-0101-4FBA-A5AD-741F68492053@cape.com>
Message-ID: <44EADB1AC2F19449B528A17643F417B99082D25AE9@MS1.geoeye.com>

>> there is a gdal method to extract a single overview level from a tif but I can never
>> remember it maybe someone will chime in...

If so, that would be really helpful.  Does anyone know how to extract a single overview from a pyramid'd image such as made from a command like:
gdaladdo XXXX.tif 2 4 8 16 32 64 128 256


From: Norman Vine [mailto:nhv@cape.com]
Sent: Tuesday, February 22, 2011 4:09 AM
To: Jay Jennings
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Downsample with averaging?


On Feb 21, 2011, at 3:26 PM, Jay Jennings wrote:


Hello list,
(using GDAL 1.8.0) I am trying to create a 32:1 down-sampled overview of a GeoTiff satellite image.  My first thought was gdal_translate, with args such as "-outsize 3.125% 3.125%"... which produces surprisingly high quality given the absence of a resampling option.   However I'm looking for a downsampling scheme that creates a result pixel by averaging all relevant source pixels (I know, for 32:1 downsample, that means 1024 source pixels for each result pixel !) with the hope of an output that is not "speckled" or "grainy" insofar as possible.

I also looked at gdaladdo, which does have the "-r average" resampling option... the guidance at gdal.org<http://gdal.org> seems to suggest that it can produce a 32:1 GeoTIFF external overview with a command like this:

gdaladdo  -r  average  -ro  XXXXX.tif  32

But that produces a surprising error message, namely:
ERROR 4: `XXXXX.tif.ovr' does not exist in the file system, and is not recognised as a supported dataset name.

Am I barking up the wrong tree with gdaladdo for this purpose ?  Anybody have any suggestions for highest-quality down-sampling ? Thanks in advance.


Jay

I think you need to build your overlays incrementally in order to get the average
of the 'block' at each overview level as gdaladdo has a very small sampling window

gdaladdo -r average my.tif 2 4 8 16 32

better to use gauss sampling
see http://en.wikipedia.org/wiki/Pyramid_%28image_processing%29

gdaladdo -r gauss my.tiff 2 4 8 16 32

note you may want to convert your image to a floating point form first
so as not to possibly lose precision due to the multiple passes

there is a gdal method to extract a single overview level from a tif but I can never
remember it maybe someone will chime in if not you can use your gdal_translate
trick.

HTH

Norman


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110222/2a0018e1/attachment.html
From jrepetto at free.fr  Tue Feb 22 10:47:37 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue Feb 22 10:47:51 2011
Subject: [gdal-dev] Downsample with averaging?
In-Reply-To: <44EADB1AC2F19449B528A17643F417B99082D25AE9@MS1.geoeye.com>
References: <44EADB1AC2F19449B528A17643F417B99082D25903@MS1.geoeye.com>	<DB2C0142-0101-4FBA-A5AD-741F68492053@cape.com>
	<44EADB1AC2F19449B528A17643F417B99082D25AE9@MS1.geoeye.com>
Message-ID: <4D63DA99.3080702@free.fr>

Le 22/02/2011 16:39, Jay Jennings a ?crit :
>  >> there is a gdal method to extract a single overview level from a tif
> but I can never
>
>  >> remember it maybe someone will chime in...
>
> If so, that would be really helpful. Does anyone know how to extract a
> single overview from a pyramid?d image such as made from a command like:
>
> gdaladdo XXXX.tif 2 4 8 16 32 64 128 256
>

gdal_translate with the -outsize parameter should do the job.

Jean-Claude
From anitagraser at gmx.at  Tue Feb 22 10:51:07 2011
From: anitagraser at gmx.at (Anita Graser)
Date: Tue Feb 22 10:51:16 2011
Subject: [gdal-dev] Re: [Qgis-developer] Issue saving shapefiles with REAL15
	values
In-Reply-To: <AANLkTimXnZqCFu5zNWgoAqWnmLJwDtqeEdJ9ADm_Q+x9@mail.gmail.com>
References: <op.vra0dm1jna7rjy@anita-pc>
	<1298377151.4158.74.camel@ursus.ufficio.net>
	<op.vra1coaona7rjy@anita-pc>
	<AANLkTimXnZqCFu5zNWgoAqWnmLJwDtqeEdJ9ADm_Q+x9@mail.gmail.com>
Message-ID: <op.vra5vupnna7rjy@anita-pc>

Am 22.02.2011, 14:49 Uhr, schrieb Barry Rowlingson  
<b.rowlingson@lancaster.ac.uk>:

> On Tue, Feb 22, 2011 at 12:37 PM, Anita Graser <anitagraser@gmx.at>  
> wrote:
>
>>> You can extract just one record, and share that one.
>>
>> How? If I use QGIS, the values will be broken.
>
>  ogr2ogr on the command line?

ogr2ogr results in the same broken values. Looks like it's a GDAL problem.

> what does ogrinfo say about it?

INFO: Open of `nw.shp'
       using driver `ESRI Shapefile' successful.
1: autaut________nw_wien (Line String)

>  Can you load the DBF in a spreadsheet?

Yes, Openoffice loads them. The header says ID,N,15,0. QGIS displays  
REAL15 in fields tab of layer properties.

> How do you know what the values are supposed to be?

The data comes with documentation.

Thanks for your help,
Anita
From anitagraser at gmx.at  Tue Feb 22 10:51:10 2011
From: anitagraser at gmx.at (Anita Graser)
Date: Tue Feb 22 10:51:19 2011
Subject: [gdal-dev] Re: [Qgis-developer] Issue saving shapefiles with
	REAL15 values
In-Reply-To: <AANLkTimd6tCffkxO9V7orWX73Wmny3WjaWv0u-Dtm7=3@mail.gmail.com>
References: <op.vra0dm1jna7rjy@anita-pc>
	<1298377151.4158.74.camel@ursus.ufficio.net>
	<op.vra1coaona7rjy@anita-pc>
	<AANLkTimd6tCffkxO9V7orWX73Wmny3WjaWv0u-Dtm7=3@mail.gmail.com>
Message-ID: <op.vrbabk1qna7rjy@anita-pc>

Hi,

I used the following ogr2ogr command:

ogr2ogr -sql "select * from nw where NAME = 'Am Johannesberg'" new.shp  
nw.shp

The resulting shp contains correct geometries, but the values in ID,N,15,0  
fields are broken.

I guess that shows that it's a GDAL/OGR problem.

Thanks, best wishes,
Anita


Am 22.02.2011, 16:33 Uhr, schrieb Chaitanya kumar CH  
<chaitanya.ch@gmail.com>:

> Anita,
>
> First, let us isolate the source of this error. QGIS or GDAL/OGR.
> Use ogr2ogr to clip the part you did with QGIS. See the extents of the
> clipped shapefile using ogrinfo and use it with the ogr2ogr utility.
> http://www.gdal.org/ogr2ogr.html
>


From chaitanya.ch at gmail.com  Tue Feb 22 11:39:48 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Feb 22 11:39:49 2011
Subject: [gdal-dev] Re: [Qgis-developer] Issue saving shapefiles with
	REAL15 values
In-Reply-To: <op.vrbabk1qna7rjy@anita-pc>
References: <op.vra0dm1jna7rjy@anita-pc>
	<1298377151.4158.74.camel@ursus.ufficio.net>
	<op.vra1coaona7rjy@anita-pc>
	<AANLkTimd6tCffkxO9V7orWX73Wmny3WjaWv0u-Dtm7=3@mail.gmail.com>
	<op.vrbabk1qna7rjy@anita-pc>
Message-ID: <AANLkTimrRrPtoBO4B6u+diubcoAAMVcKyiF=SfR5BvwY@mail.gmail.com>

Anita,

Is it possible to send a small sample data to my email for testing? Doesn't
matter if the ID field values are wrong.

On Tue, Feb 22, 2011 at 9:21 PM, Anita Graser <anitagraser@gmx.at> wrote:

> Hi,
>
> I used the following ogr2ogr command:
>
> ogr2ogr -sql "select * from nw where NAME = 'Am Johannesberg'" new.shp
> nw.shp
>
> The resulting shp contains correct geometries, but the values in ID,N,15,0
> fields are broken.
>
> I guess that shows that it's a GDAL/OGR problem.
>
> Thanks, best wishes,
> Anita
>
>
> Am 22.02.2011, 16:33 Uhr, schrieb Chaitanya kumar CH <chaitanya.ch@
> gmail.com>:
>
>
>  Anita,
>>
>> First, let us isolate the source of this error. QGIS or GDAL/OGR.
>> Use ogr2ogr to clip the part you did with QGIS. See the extents of the
>> clipped shapefile using ogrinfo and use it with the ogr2ogr utility.
>> http://www.gdal.org/ogr2ogr.html
>>
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110222/a0546799/attachment.html
From Jennings.Jay at geoeye.com  Tue Feb 22 11:43:39 2011
From: Jennings.Jay at geoeye.com (Jay Jennings)
Date: Tue Feb 22 11:43:29 2011
Subject: [gdal-dev] Downsample with averaging?
In-Reply-To: <4D63DA99.3080702@free.fr>
References: <44EADB1AC2F19449B528A17643F417B99082D25903@MS1.geoeye.com>
	<DB2C0142-0101-4FBA-A5AD-741F68492053@cape.com>
	<44EADB1AC2F19449B528A17643F417B99082D25AE9@MS1.geoeye.com>
	<4D63DA99.3080702@free.fr>
Message-ID: <44EADB1AC2F19449B528A17643F417B99082D25BD9@MS1.geoeye.com>

Brilliant ! That works well, and fast.  For the record, a command like:

gdal_translate -outsize 3.125% 3.125% XXXX.tif XXXX_dzm32.tif

serves to extract the 32:1 reduced-resolution level from a file created with a command like:

gdaladdo -r cubic XXXX.tif 2 4 8 16 32 64 128 256

and the result is a nicely smoothed dezoom of the original.

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Jean-Claude Repetto
Sent: Tuesday, February 22, 2011 10:48 AM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Downsample with averaging?

Le 22/02/2011 16:39, Jay Jennings a ?crit :
>  >> there is a gdal method to extract a single overview level from a tif
> but I can never
>
>  >> remember it maybe someone will chime in...
>
> If so, that would be really helpful. Does anyone know how to extract a
> single overview from a pyramid'd image such as made from a command like:
>
> gdaladdo XXXX.tif 2 4 8 16 32 64 128 256
>

gdal_translate with the -outsize parameter should do the job.

Jean-Claude
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From frederic.claudel at magellium.fr  Tue Feb 22 11:31:29 2011
From: frederic.claudel at magellium.fr (Frederic CLAUDEL)
Date: Tue Feb 22 12:02:01 2011
Subject: [gdal-dev] GDAL JP2KAK plugin for lossless 16 bit
Message-ID: <201102221631.p1MGVrT0013890@smtp06.msg.oleane.net>

Hi,
 
I've been trying to create a lossless JPEG2000 image from a signed 16-bit
DEM (stored in a TIFF file),
but have had no success so far with JP2KAK.
My DEM has large NoData regions (value is DTED NoData : -32767)
 
I tried different GDAL versions (1.7 1.8), and different versions of KAKADU
(6.3, 6.2)
 
I'm using gdal_translate -of JP2KAK -co QUALITY=100 <input.tif> <output.tif>
 
The image is created with no errors, but shows strong artefacts around
Nodata parts, while the large NoData areas are transformed to random 16bit
garbage.
It's not a solution to use lossy conversion, because NoData values would be
lost.
 
However, using kakadu tools there is no problem : Creversible is used
instead of QUALITY=100
kdu_compress.exe -i <source>.tif -o <target>.jp2 Clayers=12 Creversible=yes 
 
So I guess the problem comes from GDAL JP2KAK driver.
A quick look at the code gave me no clue.
 
I also checked if it was coming from the signed type (Int16), but that
problem also occurs with unsigned 16-bit data (same data with a +32768
offset to have positive values)
 
thanks in advance for any hint,
best regards,
 
Frederic Claudel
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110222/49798d10/attachment.html
From warmerdam at pobox.com  Tue Feb 22 12:17:03 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 22 12:17:07 2011
Subject: [gdal-dev] GDAL JP2KAK plugin for lossless 16 bit
In-Reply-To: <201102221631.p1MGVrT0013890@smtp06.msg.oleane.net>
References: <201102221631.p1MGVrT0013890@smtp06.msg.oleane.net>
Message-ID: <4D63EF8F.7020201@pobox.com>

On 11-02-22 11:31 AM, Frederic CLAUDEL wrote:
> Hi,
> I've been trying to create a lossless JPEG2000 image from a signed 16-bit DEM
> (stored in a TIFF file),
> but have had no success so far with JP2KAK.
> My DEM has large NoData regions (value is DTED NoData : -32767)
> I tried different GDAL versions (1.7 1.8), and different versions of KAKADU
> (6.3, 6.2)
> I'm using gdal_translate -of JP2KAK -co QUALITY=100 <input.tif> <output.tif>
> The image is created with no errors, but shows strong artefacts around Nodata
> parts, while the large NoData areas are transformed to random 16bit garbage.

Frederic,

I would encourage you to file a ticket and I'll investigate.  I believe
there is a bug in the JP2KAK driver.  I started some related improvements
a couple months ago but let them fall by the wayside since no one seemed
to be running into the problems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Feb 22 13:14:56 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 22 13:14:59 2011
Subject: [gdal-dev] 2011 FOSS4G Call for Papers
Message-ID: <4D63FD20.8080805@pobox.com>

Folks,

The call for presentations for FOSS4G 2011 in Denver is now open.  The
full announcement follows:


Open Source Geospatial Conference Calls for Speakers
Education for All Levels of Ability and Experience

DENVER, Feb. 22, 2011 -- The Free and Open Source Software for Geospatial 
(FOSS4G) conference is reaching out to speakers interested in presenting at the 
2011 conference that will be held Sept. 12 - 16 in Denver, CO, USA. FOSS4G is 
the premier international conference focused on open source geospatial 
software. The open source geospatial toolset is mature with enterprise-class 
deployments across the globe at all levels of enterprise for a wide variety of 
applications.

Users and developers are encouraged to present their latest projects and 
software development work to demonstrate the power of open source geospatial 
solutions. The organizers are looking for a good mix of content for all levels 
of ability and experience with open source. In addition to high-caliber 
sessions for developers, there are plans for several workshops and sessions 
that will welcome non-technical decision makers to the power, capability and 
compelling business case for open source geospatial software.

Presentation topics will include case studies of open source applications, 
benchmarks of performance between different components, visualization tips and 
tricks, and new tool developments, hacks and mashups. In addition to the core 
focus on free and open source software, this year?s conference will also 
feature a major focus on free and open data. Content may cover systems that are 
solely open source or a combination of open and closed source solutions.

Sessions will run in seven concurrent tracks with space for around 135 
presentations in both a regular program and an academic program. Presentations 
will either fill 30-minute slots with time for questions or 5-minute lightning 
talks. Proposals can be submitted online at http://2011.foss4g.org/program/.

There is pent up demand in the North American market for this content given the 
growth in open source geospatial solutions and the fact that this is the first 
time this international event will return to a North American venue in four 
years. ?With the current strong interest in open source geospatial solutions, 
we anticipate an attendance of around a thousand people? said Peter Batty, 
conference committee chair and vice president of geospatial technology at 
Ubisense, Inc. ?We have a great venue and an experienced organizing team, and 
believe this will be one of the premier geospatial events of 2011.?

This year?s FOSS4G event is also adjacent to State of the Map, the annual 
international conference focused on OpenStreetMap, the wiki-style creator and 
provider of free geographic data that has recently garnered corporate support 
from both MapQuest and Microsoft. The ability to attend both events with one 
trip to Denver in September makes for a great opportunity to learn about the 
latest developments in the geospatial industry.

The event already has strong support, with major sponsors that include Esri, 
Google, OpenGeo, MapQuest, Newmont and Safe Software. Bronze sponsors include 
CamptoCamp, EOX, GeoCat, GeoIQ, GeoSolutions, Korem, MapGears, Metaspatial, 
Oracle Spatial, Spatial Networks and Terrestris. You can view an updated list 
of sponsors at http://2011.foss4g.org/sponsors.

About FOSS4G
FOSS4G is the global conference focused on Free and Open Source Software for 
Geospatial that is organized by the Open Source Geospatial Foundation (OSGeo) 
with support from an all-volunteer organizing committee and professional 
conference management from the Geospatial Information Technology Association 
(GITA). The 2011 FOSS4G event in Denver marks the first North American event in 
four years, with the prior three events taking place in Barcelona, Sydney and 
Cape Town.

SOURCE FOSS4G Organizing Committee

RELATED LINKS:
http://2011.foss4g.org/ FOSS4G Denver 2011
http://www.osgeo.org/ Open Source Geospatial Foundation
http://stateofthemap.org/ State of the Map Conference
http://www.gita.org/ Geospatial Information Technology Association
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From kmichael.aye at gmail.com  Tue Feb 22 15:17:30 2011
From: kmichael.aye at gmail.com (K.-Michael Aye)
Date: Tue Feb 22 15:17:45 2011
Subject: [gdal-dev] What's the best/simplest gdal binary for Windows 7?
Message-ID: <ik15kq$3gk$1@dough.gmane.org>

Dear all,

I am providing some python/gdal based libraries to Windows 7 users who 
are no programmers, so no mingw or VisualStudio is available and I am a 
Mac User.
Which of the several should I recommend them to install?

Best regards,
Michael 


From roland.duhaime at gmail.com  Tue Feb 22 15:38:30 2011
From: roland.duhaime at gmail.com (Roland Duhaime)
Date: Tue Feb 22 15:38:32 2011
Subject: [gdal-dev] Re: Gdal2tiles in Gdal18 and creating KMZ files
In-Reply-To: <loom.20110220T115906-69@post.gmane.org>
References: <AANLkTik8okbxnC9uU-hPo5c=srwB5qP2HYYasqszgEk5@mail.gmail.com>
	<1297895714.4826.46.camel@winkey.org>
	<loom.20110220T115906-69@post.gmane.org>
Message-ID: <AANLkTik06_BGiyoJiBgPr+SADHZVTmU3YT7ZUH03hkc6@mail.gmail.com>

I have been working with the png creation option under "gdal_translate -of
kmlsuperoverlay" to create kmz files that include transparency.  I haven't
had much luck with controlling specific colors that becomes transparent, or
even maintaining transparency in the source HFA file.  The handling of
transparency is different from gdal2tiles, where I have had good results.
This leads me back to gdal2tiles and attempting to create a kmz file from
the tile structure.  The key difference I see between the .kml files using
the two different processes is below.   In order to be able to compress the
gdal2tiles output into one file, I believe that I may need to modify
gdal2tiles.py to create the gx:LatLonQuad tag from section 1 below as
opposed to the LatLonBox from section 2 below.  Does anyone know the
difference between gx:LatLonQuad and LatLonBox before I decide if this
change is appropriate?:

(1) KML Superoverlay snippet:

        <GroundOverlay>
            <drawOrder>0</drawOrder>
            <Icon>
                <href>0.png</href>
            </Icon>
            <gx:LatLonQuad>
                <coordinates>
                    -74.885604, 40.373168, 0
                    -74.269963, 40.373582, 0
                    -74.267506, 41.083329, 0
                    -74.889723, 41.082904, 0
                </coordinates>
            </gx:LatLonQuad>
        </GroundOverlay>

(2)GDAL2Tiles Kml snippet:

        <GroundOverlay>
          <drawOrder>16</drawOrder>
          <Icon>
            <href>159.png</href>
          </Icon>
          <LatLonBox>
            <north>40.97989806962016</north>
            <south>39.90973623453719</south>
            <east>-74.53125000000000</east>
            <west>-75.93750000000000</west>
          </LatLonBox>
        </GroundOverlay>

Thanks Again,
Roland


On Sun, Feb 20, 2011 at 6:12 AM, Vadim Shlyakhov <vadp.devl@gmail.com>wrote:

> brian <rush <at> winkey.org> writes:
>
> > the problem is in /12/1211/2558.kml line 26
> >
> > <href>2558.png</href>
> >
> > this should be a relative path from the root of the zipfile not from
> > 2558.kml
> >
>
> Hello Brian,
>
> I've made another tile cutter (http://code.google.com/p/tilers-tools/). It
> produces a directory tree in a manner which is very similar to
> gdal2tiles.py. So
> I had a look into this problem.
>
> I must say it didn't work for me either: GE shows KML just fine, but if I
> zip a
> dir tree into KMZ it fails altogether. I've tried relative paths to PNGs,
> to
> internal KMLs. All these were to no avail.
>
> I think that the problem actually lies in '<NetworkLink>' things and I
> still
> cannot get a clue on these.
>
> I wonder if you have (or can produce manually) a sample of working KMZ with
> superoverlays, so I'd be able to have a look
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110222/925af92b/attachment-0001.html
From roland.duhaime at gmail.com  Tue Feb 22 16:54:05 2011
From: roland.duhaime at gmail.com (Roland Duhaime)
Date: Tue Feb 22 16:54:08 2011
Subject: [gdal-dev] What's the best/simplest gdal binary for Windows 7?
In-Reply-To: <ik15kq$3gk$1@dough.gmane.org>
References: <ik15kq$3gk$1@dough.gmane.org>
Message-ID: <AANLkTinO78oe78cZpp57yji7g-UvufQA3z6hgyk=xba3@mail.gmail.com>

Michael,

I am running Windows 7 and I use the Osgeo4w installer with the advanced
install option to select the specific gdal and python libraries that I
need.  The default gdal1.8 is recommended.  Osgeo4w can be found here:

http://trac.osgeo.org/osgeo4w/

Without knowing your specific application, the setup interface allows you to
easily add, remove, or update libraries to meet your needs.

Best Wishes,
Roland


On Tue, Feb 22, 2011 at 3:17 PM, K.-Michael Aye <kmichael.aye@gmail.com>wrote:

> Dear all,
>
> I am providing some python/gdal based libraries to Windows 7 users who are
> no programmers, so no mingw or VisualStudio is available and I am a Mac
> User.
> Which of the several should I recommend them to install?
>
> Best regards,
> Michael
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110222/4454dafb/attachment.html
From misha at mail.geometrics.com  Tue Feb 22 17:14:50 2011
From: misha at mail.geometrics.com (Mikhail Tchernychev)
Date: Tue Feb 22 17:29:55 2011
Subject: [gdal-dev] How to use GDAL C++ dynamically?
Message-ID: <4D64355A.3040201@mail.geometrics.com>

   Hello List,

I wonder if someone could point me into the right direction. I would 
like to use
GDAL as loaded DLL at run time,  with LoadLibray()  call under windows 
and corresponding
calls under Linux. I see that most of the functions are virtual, so it 
seems it is made
with this in mind.  I am trying to compile simple program:

#include "stdafx.h"
#include <windows.h>

#define CPL_DLL

#include "ogrsf_frmts.h"

typedef void (* pOGRRegisterAll)();
typedef OGRSFDriverRegistrar * (*pGetRegistar)();

int _tmain(int argc, _TCHAR* argv[])
{

     const char *pszDriverName = "ESRI Shapefile";
     HMODULE hDll = LoadLibrary("gdal18.dll");
     if(!hDll) {
             fprintf(stderr,"Cannot load library\n");
             exit(0);
     }


     pOGRRegisterAll pRegFunc = 
(pOGRRegisterAll)GetProcAddress(hDll,"OGRRegisterAll");

     (*pRegFunc)();

     OGRSFDriver *poDriver;
     OGRSFDriverRegistrar * poRegistrar;

     pGetRegistar pRegistrarFunc = 
(pGetRegistar)GetProcAddress(hDll,"?GetRegistrar@OGRSFDriverRegistrar@@SAPAV1@XZ");

     if(pRegistrarFunc == NULL )
     {
         printf( "Cannot get registrar\n");
         exit( 1 );
     }

     poRegistrar = (*pRegistrarFunc)();

     if( poRegistrar == NULL )
     {
         printf( "Cannot get poRegistrar\n");
         exit( 1 );
     }

     // link error here:
     poDriver = poRegistrar->GetDriverByName(pszDriverName);

     if( poDriver == NULL )
     {
         printf( "%s driver not available.\n", pszDriverName );
         exit( 1 );
     }


     return 0;
}

This is just part of the GDAL API tutorial.

I see two problems here:

1. I have to use C++ mangled names, which is not very nice. Is there 
.DEF file for GDAL
      with meaningful names?

2. I got a link error, which apparently clear why, because 
GetDriverByName() is not virtual.
Now then could I create new files if GDAL is loaded dynamically?

I am using latest GDAL source with VC++ 2010

I tried to search mail list but did not seem find anything.

Thank you very much,

Mikhail

From even.rouault at mines-paris.org  Tue Feb 22 17:43:43 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb 22 17:43:24 2011
Subject: [gdal-dev] How to use GDAL C++ dynamically?
In-Reply-To: <4D64355A.3040201@mail.geometrics.com>
References: <4D64355A.3040201@mail.geometrics.com>
Message-ID: <201102222343.43776.even.rouault@mines-paris.org>

Le mardi 22 f?vrier 2011 23:14:50, Mikhail Tchernychev a ?crit :
>    Hello List,
> 
> I wonder if someone could point me into the right direction. I would
> like to use
> GDAL as loaded DLL at run time,  with LoadLibray()  call under windows
> and corresponding
> calls under Linux. I see that most of the functions are virtual, so it
> seems it is made
> with this in mind.  I am trying to compile simple program:

I think you are going to inflict you a lot of pain with LoadLibrary() and C++ 
API at the same time !

If you really need to dynamicly load gdal, use the GDAL C API instead...

> 
> #include "stdafx.h"
> #include <windows.h>
> 
> #define CPL_DLL
> 
> #include "ogrsf_frmts.h"
> 
> typedef void (* pOGRRegisterAll)();
> typedef OGRSFDriverRegistrar * (*pGetRegistar)();
> 
> int _tmain(int argc, _TCHAR* argv[])
> {
> 
>      const char *pszDriverName = "ESRI Shapefile";
>      HMODULE hDll = LoadLibrary("gdal18.dll");
>      if(!hDll) {
>              fprintf(stderr,"Cannot load library\n");
>              exit(0);
>      }
> 
> 
>      pOGRRegisterAll pRegFunc =
> (pOGRRegisterAll)GetProcAddress(hDll,"OGRRegisterAll");
> 
>      (*pRegFunc)();
> 
>      OGRSFDriver *poDriver;
>      OGRSFDriverRegistrar * poRegistrar;
> 
>      pGetRegistar pRegistrarFunc =
> (pGetRegistar)GetProcAddress(hDll,"?GetRegistrar@OGRSFDriverRegistrar@@SAPA
> V1@XZ");
> 
>      if(pRegistrarFunc == NULL )
>      {
>          printf( "Cannot get registrar\n");
>          exit( 1 );
>      }
> 
>      poRegistrar = (*pRegistrarFunc)();
> 
>      if( poRegistrar == NULL )
>      {
>          printf( "Cannot get poRegistrar\n");
>          exit( 1 );
>      }
> 
>      // link error here:
>      poDriver = poRegistrar->GetDriverByName(pszDriverName);
> 
>      if( poDriver == NULL )
>      {
>          printf( "%s driver not available.\n", pszDriverName );
>          exit( 1 );
>      }
> 
> 
>      return 0;
> }
> 
> This is just part of the GDAL API tutorial.
> 
> I see two problems here:
> 
> 1. I have to use C++ mangled names, which is not very nice. Is there
> .DEF file for GDAL
>       with meaningful names?
> 
> 2. I got a link error, which apparently clear why, because
> GetDriverByName() is not virtual.
> Now then could I create new files if GDAL is loaded dynamically?
> 
> I am using latest GDAL source with VC++ 2010
> 
> I tried to search mail list but did not seem find anything.
> 
> Thank you very much,
> 
> Mikhail
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From misha at mail.geometrics.com  Tue Feb 22 17:52:40 2011
From: misha at mail.geometrics.com (Mikhail Tchernychev)
Date: Tue Feb 22 17:52:45 2011
Subject: [gdal-dev] How to use GDAL C++ dynamically?
In-Reply-To: <201102222343.43776.even.rouault@mines-paris.org>
References: <4D64355A.3040201@mail.geometrics.com>
	<201102222343.43776.even.rouault@mines-paris.org>
Message-ID: <4D643E38.5070800@mail.geometrics.com>

  This is what I normally do, however it's not much less pain, even it's 
simple.
I typically write a wrapper to execute all GetProcAdress() functions at 
once and store
pointers in the class.

Taking into number of GDAL functions, its' would be very challenging.

Mikhail

On 2/22/2011 2:43 PM, Even Rouault wrote:
> Le mardi 22 f?vrier 2011 23:14:50, Mikhail Tchernychev a ?crit :
>>     Hello List,
>>
>> I wonder if someone could point me into the right direction. I would
>> like to use
>> GDAL as loaded DLL at run time,  with LoadLibray()  call under windows
>> and corresponding
>> calls under Linux. I see that most of the functions are virtual, so it
>> seems it is made
>> with this in mind.  I am trying to compile simple program:
> I think you are going to inflict you a lot of pain with LoadLibrary() and C++
> API at the same time !
>
> If you really need to dynamicly load gdal, use the GDAL C API instead...
>
>> #include "stdafx.h"
>> #include<windows.h>
>>
>> #define CPL_DLL
>>
>> #include "ogrsf_frmts.h"
>>
>> typedef void (* pOGRRegisterAll)();
>> typedef OGRSFDriverRegistrar * (*pGetRegistar)();
>>
>> int _tmain(int argc, _TCHAR* argv[])
>> {
>>
>>       const char *pszDriverName = "ESRI Shapefile";
>>       HMODULE hDll = LoadLibrary("gdal18.dll");
>>       if(!hDll) {
>>               fprintf(stderr,"Cannot load library\n");
>>               exit(0);
>>       }
>>
>>
>>       pOGRRegisterAll pRegFunc =
>> (pOGRRegisterAll)GetProcAddress(hDll,"OGRRegisterAll");
>>
>>       (*pRegFunc)();
>>
>>       OGRSFDriver *poDriver;
>>       OGRSFDriverRegistrar * poRegistrar;
>>
>>       pGetRegistar pRegistrarFunc =
>> (pGetRegistar)GetProcAddress(hDll,"?GetRegistrar@OGRSFDriverRegistrar@@SAPA
>> V1@XZ");
>>
>>       if(pRegistrarFunc == NULL )
>>       {
>>           printf( "Cannot get registrar\n");
>>           exit( 1 );
>>       }
>>
>>       poRegistrar = (*pRegistrarFunc)();
>>
>>       if( poRegistrar == NULL )
>>       {
>>           printf( "Cannot get poRegistrar\n");
>>           exit( 1 );
>>       }
>>
>>       // link error here:
>>       poDriver = poRegistrar->GetDriverByName(pszDriverName);
>>
>>       if( poDriver == NULL )
>>       {
>>           printf( "%s driver not available.\n", pszDriverName );
>>           exit( 1 );
>>       }
>>
>>
>>       return 0;
>> }
>>
>> This is just part of the GDAL API tutorial.
>>
>> I see two problems here:
>>
>> 1. I have to use C++ mangled names, which is not very nice. Is there
>> .DEF file for GDAL
>>        with meaningful names?
>>
>> 2. I got a link error, which apparently clear why, because
>> GetDriverByName() is not virtual.
>> Now then could I create new files if GDAL is loaded dynamically?
>>
>> I am using latest GDAL source with VC++ 2010
>>
>> I tried to search mail list but did not seem find anything.
>>
>> Thank you very much,
>>
>> Mikhail
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From misha at mail.geometrics.com  Tue Feb 22 20:41:46 2011
From: misha at mail.geometrics.com (Mikhail Tchernychev)
Date: Tue Feb 22 20:41:52 2011
Subject: [gdal-dev] How to use GDAL C++ dynamically?
In-Reply-To: <201102222343.43776.even.rouault@mines-paris.org>
References: <4D64355A.3040201@mail.geometrics.com>
	<201102222343.43776.even.rouault@mines-paris.org>
Message-ID: <4D6465DA.5070109@mail.geometrics.com>


I just tried:  If I declare make functions of OGRSFDriverRegistrar as 
virtual,
everything is working as expected.

Most of the functions of other classes are virtual, why those are not?

Best Regards,
Mikhail


On 2/22/2011 2:43 PM, Even Rouault wrote:
> Le mardi 22 f?vrier 2011 23:14:50, Mikhail Tchernychev a ?crit :
>>     Hello List,
>>
>> I wonder if someone could point me into the right direction. I would
>> like to use
>> GDAL as loaded DLL at run time,  with LoadLibray()  call under windows
>> and corresponding
>> calls under Linux. I see that most of the functions are virtual, so it
>> seems it is made
>> with this in mind.  I am trying to compile simple program:
> I think you are going to inflict you a lot of pain with LoadLibrary() and C++
> API at the same time !
>
> If you really need to dynamicly load gdal, use the GDAL C API instead...
>
>> #include "stdafx.h"
>> #include<windows.h>
>>
>> #define CPL_DLL
>>
>> #include "ogrsf_frmts.h"
>>
>> typedef void (* pOGRRegisterAll)();
>> typedef OGRSFDriverRegistrar * (*pGetRegistar)();
>>
>> int _tmain(int argc, _TCHAR* argv[])
>> {
>>
>>       const char *pszDriverName = "ESRI Shapefile";
>>       HMODULE hDll = LoadLibrary("gdal18.dll");
>>       if(!hDll) {
>>               fprintf(stderr,"Cannot load library\n");
>>               exit(0);
>>       }
>>
>>
>>       pOGRRegisterAll pRegFunc =
>> (pOGRRegisterAll)GetProcAddress(hDll,"OGRRegisterAll");
>>
>>       (*pRegFunc)();
>>
>>       OGRSFDriver *poDriver;
>>       OGRSFDriverRegistrar * poRegistrar;
>>
>>       pGetRegistar pRegistrarFunc =
>> (pGetRegistar)GetProcAddress(hDll,"?GetRegistrar@OGRSFDriverRegistrar@@SAPA
>> V1@XZ");
>>
>>       if(pRegistrarFunc == NULL )
>>       {
>>           printf( "Cannot get registrar\n");
>>           exit( 1 );
>>       }
>>
>>       poRegistrar = (*pRegistrarFunc)();
>>
>>       if( poRegistrar == NULL )
>>       {
>>           printf( "Cannot get poRegistrar\n");
>>           exit( 1 );
>>       }
>>
>>       // link error here:
>>       poDriver = poRegistrar->GetDriverByName(pszDriverName);
>>
>>       if( poDriver == NULL )
>>       {
>>           printf( "%s driver not available.\n", pszDriverName );
>>           exit( 1 );
>>       }
>>
>>
>>       return 0;
>> }
>>
>> This is just part of the GDAL API tutorial.
>>
>> I see two problems here:
>>
>> 1. I have to use C++ mangled names, which is not very nice. Is there
>> .DEF file for GDAL
>>        with meaningful names?
>>
>> 2. I got a link error, which apparently clear why, because
>> GetDriverByName() is not virtual.
>> Now then could I create new files if GDAL is loaded dynamically?
>>
>> I am using latest GDAL source with VC++ 2010
>>
>> I tried to search mail list but did not seem find anything.
>>
>> Thank you very much,
>>
>> Mikhail
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From dburken at comcast.net  Tue Feb 22 22:04:28 2011
From: dburken at comcast.net (David Burken)
Date: Tue Feb 22 22:05:39 2011
Subject: [gdal-dev] 
	JP2KAK driver - nitf, j2p blocks, with color space of YCC
Message-ID: <4D64793C.7080002@comcast.net>

Hi Frank, all,

Just fyi we had some nitf data that had jp2 blocks with ycc color 
space(JP2_sYCC_SPACE=18) .  ossim was crashing because the bands were 
set to 3 in the nitf but kakadu was expanding only one channel.   I 
checked gdal and it was returning only one band(no crash).  Anyway 
feeding the kdu_channel_mapping::configure the jp2_source* instead of 
the raw codestream fixed the issue for us.  The supplier of the data 
would not release a sample for you.  Sorry.  Just thought I'd let you 
know. Maybe you could scrounge a sample somewhere.

Take care,
Dave

From antonio.rocha at deimos.com.pt  Wed Feb 23 04:14:54 2011
From: antonio.rocha at deimos.com.pt (=?ISO-8859-1?Q?Ant=F3nio_Rocha?=)
Date: Wed Feb 23 04:14:58 2011
Subject: [gdal-dev] Error running gdal16 binary
Message-ID: <4D64D00E.1090101@deimos.com.pt>

Greetings

While I was running GDAL16 binary, in Windows OS, for a grib file I got 
this error after a few lines:
ERROR 2: CPLMalloc(): Out of memory allocating -469696517
bytes.
This application has requested the Runtime to terminate it
in an unusual way.
Please contact the application's support team for more
information.

What might be happening here? because I have used with similar GRIBS 
(ECMWF ERA Interim dataset) and I never got this problem
Thanks

Best regards,
Antonio


__________ Information from ESET NOD32 Antivirus, version of virus signature database 5898 (20110223) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From chaitanya.ch at gmail.com  Wed Feb 23 04:17:31 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Feb 23 04:17:35 2011
Subject: [gdal-dev] Error running gdal16 binary
In-Reply-To: <4D64D00E.1090101@deimos.com.pt>
References: <4D64D00E.1090101@deimos.com.pt>
Message-ID: <AANLkTi=a9ajnoXH3aaUhs+PgcOPwS3TBOLDQw=teNL7z@mail.gmail.com>

Ant?nio,

Check with gdal-1.8 version. THe bug might have been fixed.

2011/2/23 Ant?nio Rocha <antonio.rocha@deimos.com.pt>

> Greetings
>
> While I was running GDAL16 binary, in Windows OS, for a grib file I got
> this error after a few lines:
> ERROR 2: CPLMalloc(): Out of memory allocating -469696517
> bytes.
> This application has requested the Runtime to terminate it
> in an unusual way.
> Please contact the application's support team for more
> information.
>
> What might be happening here? because I have used with similar GRIBS (ECMWF
> ERA Interim dataset) and I never got this problem
> Thanks
>
> Best regards,
> Antonio
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 5898 (20110223) __________
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110223/2ef24532/attachment-0001.html
From vadp.devl at gmail.com  Wed Feb 23 04:26:27 2011
From: vadp.devl at gmail.com (Vadim Shlyakhov)
Date: Wed Feb 23 04:26:30 2011
Subject: [gdal-dev] Re: Gdal2tiles in Gdal18 and creating KMZ files
In-Reply-To: <AANLkTik06_BGiyoJiBgPr+SADHZVTmU3YT7ZUH03hkc6@mail.gmail.com>
References: <AANLkTik8okbxnC9uU-hPo5c=srwB5qP2HYYasqszgEk5@mail.gmail.com>
	<1297895714.4826.46.camel@winkey.org>
	<loom.20110220T115906-69@post.gmane.org>
	<AANLkTik06_BGiyoJiBgPr+SADHZVTmU3YT7ZUH03hkc6@mail.gmail.com>
Message-ID: <AANLkTi=qLmFWKVUih+5P59pJdpX+Bs6imJsnu7EfNfKH@mail.gmail.com>

<gx:LatLonQuad> shouldn't make any difference as it's semantics nearly
the same as <LatLonBox>.

On Tue, Feb 22, 2011 at 11:38 PM, Roland Duhaime
<roland.duhaime@gmail.com> wrote:
> I have been working with the png creation option under "gdal_translate -of
> kmlsuperoverlay" to create kmz files that include transparency.? I haven't
> had much luck with controlling specific colors that becomes transparent, or
> even maintaining transparency in the source HFA file.? The handling of
> transparency is different from gdal2tiles, where I have had good results.
> This leads me back to gdal2tiles and attempting to create a kmz file from
> the tile structure.? The key difference I see between the .kml files using
> the two different processes is below.?? In order to be able to compress the
> gdal2tiles output into one file, I believe that I may need to modify
> gdal2tiles.py to create the gx:LatLonQuad tag from section 1 below as
> opposed to the LatLonBox from section 2 below.? Does anyone know the
> difference between gx:LatLonQuad and LatLonBox before I decide if this
> change is appropriate?:
>
> (1) KML Superoverlay snippet:
>
> ??? ??? <GroundOverlay>
> ??? ??? ??? <drawOrder>0</drawOrder>
> ??? ??? ??? <Icon>
> ??? ??? ??? ??? <href>0.png</href>
> ??? ??? ??? </Icon>
> ??? ??? ??? <gx:LatLonQuad>
> ??? ??? ??? ??? <coordinates>
> ??? ??? ??? ??? ??? -74.885604, 40.373168, 0
> ??? ??? ??? ??? ??? -74.269963, 40.373582, 0
> ??? ??? ??? ??? ??? -74.267506, 41.083329, 0
> ??? ??? ??? ??? ??? -74.889723, 41.082904, 0
> ??? ??? ??? ??? </coordinates>
> ??? ??? ??? </gx:LatLonQuad>
> ??? ??? </GroundOverlay>
>
> (2)GDAL2Tiles Kml snippet:
>
> ??? ??? <GroundOverlay>
> ??? ????? <drawOrder>16</drawOrder>
> ??? ????? <Icon>
> ??? ??????? <href>159.png</href>
> ??? ????? </Icon>
> ??? ????? <LatLonBox>
> ??? ??????? <north>40.97989806962016</north>
> ??? ??????? <south>39.90973623453719</south>
> ??? ??????? <east>-74.53125000000000</east>
> ??? ??????? <west>-75.93750000000000</west>
> ??? ????? </LatLonBox>
> ??? ??? </GroundOverlay>
>
> Thanks Again,
> Roland
>
>
> On Sun, Feb 20, 2011 at 6:12 AM, Vadim Shlyakhov <vadp.devl@gmail.com>
> wrote:
>>
>> brian <rush <at> winkey.org> writes:
>>
>> > the problem is in /12/1211/2558.kml line 26
>> >
>> > <href>2558.png</href>
>> >
>> > this should be a relative path from the root of the zipfile not from
>> > 2558.kml
>> >
>>
>> Hello Brian,
>>
>> I've made another tile cutter (http://code.google.com/p/tilers-tools/). It
>> produces a directory tree in a manner which is very similar to
>> gdal2tiles.py. So
>> I had a look into this problem.
>>
>> I must say it didn't work for me either: GE shows KML just fine, but if I
>> zip a
>> dir tree into KMZ it fails altogether. I've tried relative paths to PNGs,
>> to
>> internal KMLs. All these were to no avail.
>>
>> I think that the problem actually lies in '<NetworkLink>' things and I
>> still
>> cannot get a clue on these.
>>
>> I wonder if you have (or can produce manually) a sample of working KMZ
>> with
>> superoverlays, so I'd be able to have a look
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
From antonio.rocha at deimos.com.pt  Wed Feb 23 04:30:09 2011
From: antonio.rocha at deimos.com.pt (=?UTF-8?B?QW50w7NuaW8gUm9jaGE=?=)
Date: Wed Feb 23 04:30:12 2011
Subject: [gdal-dev] Error running gdal16 binary
In-Reply-To: <AANLkTi=a9ajnoXH3aaUhs+PgcOPwS3TBOLDQw=teNL7z@mail.gmail.com>
References: <4D64D00E.1090101@deimos.com.pt>
	<AANLkTi=a9ajnoXH3aaUhs+PgcOPwS3TBOLDQw=teNL7z@mail.gmail.com>
Message-ID: <4D64D3A1.9080109@deimos.com.pt>

Hello Chaitanya
Yesterday I was searching Windows binary gdal18 version and I didn't 
find it. Where can I get it?
Thanks for your help
Antonio
Chaitanya kumar CH wrote:
> Ant?nio,
>
> Check with gdal-1.8 version. THe bug might have been fixed.
>
> 2011/2/23 Ant?nio Rocha <antonio.rocha@deimos.com.pt 
> <mailto:antonio.rocha@deimos.com.pt>>
>
>     Greetings
>
>     While I was running GDAL16 binary, in Windows OS, for a grib file
>     I got this error after a few lines:
>     ERROR 2: CPLMalloc(): Out of memory allocating -469696517
>     bytes.
>     This application has requested the Runtime to terminate it
>     in an unusual way.
>     Please contact the application's support team for more
>     information.
>
>     What might be happening here? because I have used with similar
>     GRIBS (ECMWF ERA Interim dataset) and I never got this problem
>     Thanks
>
>     Best regards,
>     Antonio
>
>
> 17.2416N 80.1426E



__________ Information from ESET NOD32 Antivirus, version of virus signature database 5898 (20110223) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From jef at norbit.de  Wed Feb 23 04:32:11 2011
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Wed Feb 23 04:32:45 2011
Subject: [gdal-dev] Error running gdal16 binary
In-Reply-To: <4D64D3A1.9080109@deimos.com.pt>
References: <4D64D00E.1090101@deimos.com.pt>
	<AANLkTi=a9ajnoXH3aaUhs+PgcOPwS3TBOLDQw=teNL7z@mail.gmail.com>
	<4D64D3A1.9080109@deimos.com.pt>
Message-ID: <20110223093211.GA13768@norbit.de>

On Wed, 23. Feb 2011 at 09:30:09 +0000, Ant?nio Rocha wrote:
> Hello Chaitanya
> Yesterday I was searching Windows binary gdal18 version and I didn't  
> find it. Where can I get it?

OSGeo4W[1] has GDAL 1.8.

J?rgen

[1] http://trac.osgeo.org/osgeo4w/

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502

From antonio.rocha at deimos.com.pt  Wed Feb 23 05:23:07 2011
From: antonio.rocha at deimos.com.pt (=?ISO-8859-1?Q?Ant=F3nio_Rocha?=)
Date: Wed Feb 23 05:23:11 2011
Subject: [gdal-dev] Error running gdal16 binary
Message-ID: <4D64E00B.1070207@deimos.com.pt>


Hi Jurgen
But in my case I need the binaries in order to integrate it in a package 
that I'm developing. So I need standalone Windows Binaries. Is there any 
of it in OSGEO4W? I mean can I pick them up and remove from osgeo4w folder?
Thanks
Antonio
------------------------------------------------------------------------

On Wed, 23. Feb 2011 at 09:30:09 +0000, Ant?nio Rocha wrote:
>/ Hello Chaitanya
/>/ Yesterday I was searching Windows binary gdal18 version and I didn't  
/>/ find it. Where can I get it?
/
OSGeo4W[1] has GDAL 1.8.

J?rgen

[1] http://trac.osgeo.org/osgeo4w/




__________ Information from ESET NOD32 Antivirus, version of virus signature database 5898 (20110223) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From jormarfe at gmail.com  Wed Feb 23 05:38:01 2011
From: jormarfe at gmail.com (Jorge Martin)
Date: Wed Feb 23 05:38:04 2011
Subject: [gdal-dev] Resampling using RPCs
Message-ID: <AANLkTikp2OJ8McMOjZa+Z5EsoZTNCLwigVN-Jr56iKsf@mail.gmail.com>

Hello,

       I have to make a resampling from a source image in Lat/Long
coordinates to UTM target image.

       If I take the GCPs of the source image in Lat/long the RPCs works
very good, but if I get this points and tranform the to UTM (with the same
zone of the target image) and compute the RPCs, the RPCs do not give me the
right position on the source image (the position is very far from the
image). I do not know if the is a problem trying to obtain the RPC in UTM
because of the reprojection or  something like this. I think that the
problem could be in the normalization that has to be done with the GCP,
because in Lat/lon is clear the min and max values but in UTM is not so
easy.

     Is there anyone that knows this issue?

Best Regards,


Jorge
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110223/b6647bf0/attachment.html
From chaitanya.ch at gmail.com  Wed Feb 23 07:12:07 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Feb 23 07:12:43 2011
Subject: [gdal-dev] Error running gdal16 binary
In-Reply-To: <4D64E00B.1070207@deimos.com.pt>
References: <4D64E00B.1070207@deimos.com.pt>
Message-ID: <AANLkTimq1a-eZRLcQC-AePv6uYyJAvexFkZvrU9oSFzL@mail.gmail.com>

Ant?nio,

You can use the binaries and other stuff like data from the osgeo4w package.

2011/2/23 Ant?nio Rocha <antonio.rocha@deimos.com.pt>

>
> Hi Jurgen
> But in my case I need the binaries in order to integrate it in a package
> that I'm developing. So I need standalone Windows Binaries. Is there any of
> it in OSGEO4W? I mean can I pick them up and remove from osgeo4w folder?
> Thanks
> Antonio
> ------------------------------------------------------------------------
>
>
> On Wed, 23. Feb 2011 at 09:30:09 +0000, Ant?nio Rocha wrote:
>
>> / Hello Chaitanya
>>
> />/ Yesterday I was searching Windows binary gdal18 version and I didn't
>  />/ find it. Where can I get it?
> /
> OSGeo4W[1] has GDAL 1.8.
>
> J?rgen
>
> [1] http://trac.osgeo.org/osgeo4w/
>
>
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 5898 (20110223) __________
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110223/a36bff01/attachment.html
From jormarfe at gmail.com  Wed Feb 23 11:27:38 2011
From: jormarfe at gmail.com (Jorge Martin)
Date: Wed Feb 23 11:28:57 2011
Subject: [gdal-dev] transform input image to UTM
Message-ID: <AANLkTi=g-oRHpyOrJHHnp_ier6Wk22Q0huw63VZkkNtT@mail.gmail.com>

Hello,

       I want to project an input Lat/Long image into UTM. I need to do this
automatic, so I have to do it in C++. I have found a source code to
implement this issue. I have paste below the source code that I have used.
     I When this code is running, appears some times the followin error
messages:

       "ERROR 1: no system list, errno: 42" and
      "ERROR 6: SetColorTable() not supported for multi-sample TIFF files."

     What is it means?
When I open the output image there are some strange black lines crossing the
output image that not appear in the input image. Is there any reason for
this behaviour?


Many thanks,

Jorge


//----------------------------------SOUCE
CODE----------------------------------------


void Reproject()
{
 // ------------ Example of initializing an image into the GDALDataset
object

    GDALDataset  *poDataset;

    // -------------- Reprojection example

 GDALDatasetH  hSrcDS, hDstDS; //, hRefDS;

    // Open input and output files.

    GDALAllRegister();

    hSrcDS = GDALOpen(
"/home/jjmf/sample_images/t1.09155.AV_MI.143.250m.tif", GA_ReadOnly );

    poDataset = (GDALDataset *) hSrcDS;
    if( poDataset == NULL )
    {

        cout<<"The input file does not exist: "<< endl;

        exit(1);
    }

    GDALDriverH hDriver;
    GDALDataType eDT;

    // Open the source file.

    CPLAssert( hSrcDS != NULL );

    // Create output with same datatype as first input band.

    eDT = GDALGetRasterDataType(GDALGetRasterBand(hSrcDS,1));

    // Get output driver (GeoTIFF format)
    hDriver = GDALGetDriverByName("GTiff");
    CPLAssert( hDriver != NULL );

    // Get Source coordinate system.

    const char *pszSrcWKT = NULL;
    char *pszDstWKT;

    pszSrcWKT = GDALGetProjectionRef( hSrcDS );
    CPLAssert( pszSrcWKT != NULL && strlen(pszSrcWKT) > 0 );



    OGRSpatialReference oSRS;

    oSRS.SetUTM(12, TRUE);

    oSRS.SetWellKnownGeogCS("EPSG:4258");
    //oSRS.importFromProj4("+proj=latlo +datum=WGS84");

    oSRS.exportToWkt( &pszDstWKT );

    // Create a transformer that maps from source pixel/line coordinates
    // to destination georeferenced coordinates (not destination
    // pixel line).  We do that by omitting the destination dataset
    // handle (setting it to NULL).

    void *hTransformArg;

    hTransformArg = GDALCreateGenImgProjTransformer( hSrcDS, pszSrcWKT,
NULL, pszDstWKT, FALSE, 0, 1 );
    CPLAssert( hTransformArg != NULL );

    // Get approximate output georeferenced bounds and resolution for file.

    double adfDstGeoTransform[6];
    int nPixels = 0, nLines = 0;
    CPLErr eErr;

    eErr = GDALSuggestedWarpOutput( hSrcDS, GDALGenImgProjTransform,
hTransformArg, adfDstGeoTransform, &nPixels, &nLines );
    CPLAssert( eErr == CE_None );

    GDALDestroyGenImgProjTransformer( hTransformArg );

    // Create the output file.
    char *apszOptions[] = {"INTERLEAVE=PIXEL", NULL};

    hDstDS = GDALCreate(hDriver, "/home/jjmf/sample_images/out_new.tif",
nPixels, nLines, GDALGetRasterCount(hSrcDS), eDT, apszOptions);

    CPLAssert( hDstDS != NULL );

    // Write out the projection definition.

    GDALSetProjection(hDstDS, pszDstWKT);
    GDALSetGeoTransform(hDstDS, adfDstGeoTransform);

    // Copy the color table, if required.

    GDALColorTableH hCT;

    hCT = GDALGetRasterColorTable(GDALGetRasterBand(hSrcDS,1));
    GDALSetRasterColorTable(GDALGetRasterBand(hDstDS,1), hCT);


    hCT = GDALGetRasterColorTable(GDALGetRasterBand(hSrcDS,2));
    GDALSetRasterColorTable(GDALGetRasterBand(hDstDS,2), hCT);


    hCT = GDALGetRasterColorTable(GDALGetRasterBand(hSrcDS,3));
    GDALSetRasterColorTable(GDALGetRasterBand(hDstDS,3), hCT);


 cout << "Setup warp options ..."<<endl;
    // Setup warp options.

    GDALWarpOptions *psWarpOptions = GDALCreateWarpOptions();

    psWarpOptions->hSrcDS = hSrcDS;
    psWarpOptions->hDstDS = hDstDS;
    psWarpOptions->nBandCount = 3;
    psWarpOptions->panSrcBands = (int *) CPLMalloc(sizeof(int) *
psWarpOptions->nBandCount);
    psWarpOptions->panSrcBands[0] = 1;
    psWarpOptions->panSrcBands[1] = 2;
    psWarpOptions->panSrcBands[2] = 3;
    psWarpOptions->panDstBands = (int *) CPLMalloc(sizeof(int) *
psWarpOptions->nBandCount);
    psWarpOptions->panDstBands[0] = 1;
    psWarpOptions->panDstBands[1] = 2;
    psWarpOptions->panDstBands[2] = 3;

    psWarpOptions->pfnProgress = GDALTermProgress;

 cout << "Establishing transformer ..."<<endl;
    // Establish reprojection transformer.

    psWarpOptions->pTransformerArg = GDALCreateGenImgProjTransformer(hSrcDS,
GDALGetProjectionRef(hSrcDS), hDstDS, GDALGetProjectionRef(hDstDS), FALSE,
0.0, 1);
    psWarpOptions->pfnTransformer = GDALGenImgProjTransform;

    // Initialize and execute the warp operation.

 cout << "Executing ..."<<endl;
    GDALWarpOperation oOperation;

    // Initialize transformation operation
 oOperation.Initialize(psWarpOptions);

 // Perform the transformation
    oOperation.ChunkAndWarpImage(0, 0, GDALGetRasterXSize(hDstDS),
GDALGetRasterYSize(hDstDS));

 // Clean up the intermediate objects
    GDALDestroyGenImgProjTransformer(psWarpOptions->pTransformerArg);
    GDALDestroyWarpOptions(psWarpOptions);


 cout <<"Done ..."<<endl;

 // Close the input and output files
    GDALClose(hDstDS);
    GDALClose(hSrcDS);



}

//--------------------------------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110223/6816a650/attachment-0001.html
From warmerdam at pobox.com  Wed Feb 23 13:11:34 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb 23 13:11:37 2011
Subject: [gdal-dev] transform input image to UTM
In-Reply-To: <AANLkTi=g-oRHpyOrJHHnp_ier6Wk22Q0huw63VZkkNtT@mail.gmail.com>
References: <AANLkTi=g-oRHpyOrJHHnp_ier6Wk22Q0huw63VZkkNtT@mail.gmail.com>
Message-ID: <4D654DD6.70902@pobox.com>

On 11-02-23 11:27 AM, Jorge Martin wrote:
> Hello,
>
>         I want to project an input Lat/Long image into UTM. I need to do this
> automatic, so I have to do it in C++. I have found a source code to implement
> this issue. I have paste below the source code that I have used.
>       I When this code is running, appears some times the followin error messages:
>
> "ERROR 1: no system list, errno: 42" and

Jorge,

This is normally an error message from PROJ.4.  I see "errno.h" has error
42 as "ENOMSG" or "No message of desired type" which is unlikely.  Error
-42 (a PROJ.4 specific error) is "|lat_1| == |lat_2|".

I'd suggest careful examination of the input and output coordinate systems
to see if there is anything odd about them.

> "ERROR 6: SetColorTable() not supported for multi-sample TIFF files."
>       What is it means?

This is because you try to copy color tables from all three source bands
to all three destination bands but it is highly unlikely there even is a
color table on the source bands.  The error message is reporting that TIFF
has no way of storing color tables on multi-sample (ie. RGB) files.

> When I open the output image there are some strange black lines crossing the
> output image that not appear in the input image. Is there any reason for this
> behaviour?

That is harder to analyse.  You would pretty much need to provide a full
bug report (ideally via Trac) in order to get a good answer.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Wed Feb 23 14:05:01 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb 23 14:05:03 2011
Subject: [gdal-dev] How to use GDAL C++ dynamically?
In-Reply-To: <4D6465DA.5070109@mail.geometrics.com>
References: <4D64355A.3040201@mail.geometrics.com>
	<201102222343.43776.even.rouault@mines-paris.org>
	<4D6465DA.5070109@mail.geometrics.com>
Message-ID: <4D655A5D.4090407@pobox.com>

On 11-02-22 08:41 PM, Mikhail Tchernychev wrote:
>
> I just tried: If I declare make functions of OGRSFDriverRegistrar as virtual,
> everything is working as expected.
>
> Most of the functions of other classes are virtual, why those are not?
>

Mikhail,

They are not virtual because it is not part of our pattern to
derive subclasses from OGRSFDriverRegistrar.  I think you will find there
are other classes that don't use virtual methods including OGRFeature.  If
your technique depends on this, I think you will get frustrated.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Wed Feb 23 14:12:49 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb 23 14:12:53 2011
Subject: [gdal-dev] How to use GDAL C++ dynamically?
In-Reply-To: <4D643E38.5070800@mail.geometrics.com>
References: <4D64355A.3040201@mail.geometrics.com>
	<201102222343.43776.even.rouault@mines-paris.org>
	<4D643E38.5070800@mail.geometrics.com>
Message-ID: <4D655C31.60503@pobox.com>

On 11-02-22 05:52 PM, Mikhail Tchernychev wrote:
> This is what I normally do, however it's not much less pain, even it's simple.
> I typically write a wrapper to execute all GetProcAdress() functions at once
> and store
> pointers in the class.
>
> Taking into number of GDAL functions, its' would be very challenging.
>
> Mikhail
>
> On 2/22/2011 2:43 PM, Even Rouault wrote:
>> Le mardi 22 f?vrier 2011 23:14:50, Mikhail Tchernychev a ?crit :
>>> Hello List,
>>>
>>> I wonder if someone could point me into the right direction. I would
>>> like to use
>>> GDAL as loaded DLL at run time, with LoadLibray() call under windows
>>> and corresponding
>>> calls under Linux. I see that most of the functions are virtual, so it
>>> seems it is made
>>> with this in mind. I am trying to compile simple program:
>> I think you are going to inflict you a lot of pain with LoadLibrary() and C++
>> API at the same time !
>>
>> If you really need to dynamicly load gdal, use the GDAL C API instead...


Folks,

I will note that at one time I maintained a "bridge" mechanism which
basically did this.  It dynamically loaded the C API at runtime.  I
stopped maintaining it several years ago but you can still find it in
old code branches.

ie.

http://svn.osgeo.org/gdal/tags/gdal_1_2_0/bridge/

If someone felt it was really useful, that might be a good place to
start.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From rush at winkey.org  Wed Feb 23 17:41:35 2011
From: rush at winkey.org (brian)
Date: Wed Feb 23 17:41:35 2011
Subject: [gdal-dev] Re: Gdal2tiles in Gdal18 and creating KMZ files
In-Reply-To: <AANLkTik06_BGiyoJiBgPr+SADHZVTmU3YT7ZUH03hkc6@mail.gmail.com>
References: <AANLkTik8okbxnC9uU-hPo5c=srwB5qP2HYYasqszgEk5@mail.gmail.com>
	<1297895714.4826.46.camel@winkey.org>
	<loom.20110220T115906-69@post.gmane.org>
	<AANLkTik06_BGiyoJiBgPr+SADHZVTmU3YT7ZUH03hkc6@mail.gmail.com>
Message-ID: <1298500895.31258.26.camel@winkey.org>

Roland

it is probably worth your time to include another step in in your
proccess

run nearblack -setmask -near 0 -nb 0 -of GTiff infile -o nearblack.tif

nearblack options change if the source is a white background and if the
image format is lossy

gdalwarp -dstalpha -t_srs "EPSG:4326 nearblack.tif warped.tif

gdal_translate -of kmlsuperoverlay warped.tif final.kmz

brian

On Tue, 2011-02-22 at 15:38 -0500, Roland Duhaime wrote:
> I have been working with the png creation option under "gdal_translate
> -of kmlsuperoverlay" to create kmz files that include transparency.  I
> haven't had much luck with controlling specific colors that becomes
> transparent, or even maintaining transparency in the source HFA file.
> The handling of transparency is different from gdal2tiles, where I
> have had good results.  This leads me back to gdal2tiles and
> attempting to create a kmz file from the tile structure.  The key
> difference I see between the .kml files using the two different
> processes is below.   In order to be able to compress the gdal2tiles
> output into one file, I believe that I may need to modify
> gdal2tiles.py to create the gx:LatLonQuad tag from section 1 below as
> opposed to the LatLonBox from section 2 below.  Does anyone know the
> difference between gx:LatLonQuad and LatLonBox before I decide if this
> change is appropriate?:
> 
> (1) KML Superoverlay snippet:
> 
>         <GroundOverlay>
>             <drawOrder>0</drawOrder>
>             <Icon>
>                 <href>0.png</href>
>             </Icon>
>             <gx:LatLonQuad>
>                 <coordinates>
>                     -74.885604, 40.373168, 0
>                     -74.269963, 40.373582, 0
>                     -74.267506, 41.083329, 0
>                     -74.889723, 41.082904, 0
>                 </coordinates>
>             </gx:LatLonQuad>
>         </GroundOverlay>
> 
> (2)GDAL2Tiles Kml snippet:        
>         
>         <GroundOverlay>
>           <drawOrder>16</drawOrder>
>           <Icon>
>             <href>159.png</href>
>           </Icon>
>           <LatLonBox>
>             <north>40.97989806962016</north>
>             <south>39.90973623453719</south>
>             <east>-74.53125000000000</east>
>             <west>-75.93750000000000</west>
>           </LatLonBox>
>         </GroundOverlay>
> 
> Thanks Again,
> Roland
> 
> 
> On Sun, Feb 20, 2011 at 6:12 AM, Vadim Shlyakhov <vadp.devl@gmail.com>
> wrote:
>         brian <rush <at> winkey.org> writes:
>         
>         > the problem is in /12/1211/2558.kml line 26
>         >
>         > <href>2558.png</href>
>         >
>         > this should be a relative path from the root of the zipfile
>         not from
>         > 2558.kml
>         >
>         
>         
>         Hello Brian,
>         
>         I've made another tile cutter
>         (http://code.google.com/p/tilers-tools/). It
>         produces a directory tree in a manner which is very similar to
>         gdal2tiles.py. So
>         I had a look into this problem.
>         
>         I must say it didn't work for me either: GE shows KML just
>         fine, but if I zip a
>         dir tree into KMZ it fails altogether. I've tried relative
>         paths to PNGs, to
>         internal KMLs. All these were to no avail.
>         
>         I think that the problem actually lies in '<NetworkLink>'
>         things and I still
>         cannot get a clue on these.
>         
>         I wonder if you have (or can produce manually) a sample of
>         working KMZ with
>         superoverlays, so I'd be able to have a look
>         
>         
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev@lists.osgeo.org
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>         
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From roland.duhaime at gmail.com  Wed Feb 23 23:14:53 2011
From: roland.duhaime at gmail.com (Roland Duhaime)
Date: Wed Feb 23 23:14:55 2011
Subject: [gdal-dev] Re: Gdal2tiles in Gdal18 and creating KMZ files
In-Reply-To: <1298500895.31258.26.camel@winkey.org>
References: <AANLkTik8okbxnC9uU-hPo5c=srwB5qP2HYYasqszgEk5@mail.gmail.com>
	<1297895714.4826.46.camel@winkey.org>
	<loom.20110220T115906-69@post.gmane.org>
	<AANLkTik06_BGiyoJiBgPr+SADHZVTmU3YT7ZUH03hkc6@mail.gmail.com>
	<1298500895.31258.26.camel@winkey.org>
Message-ID: <AANLkTikZqPioSuG8sDZ4ib4+abGo+uZZ1k_K4ZCH57dD@mail.gmail.com>

Thanks Brian,

I will give your suggestion a try.

Going back to the original post, I have made some progress with compressing
the output of gdal2tiles to a kmz file.  The resulting kmz file opens in
Google Earth as red X's.  It appears to be an issue with 7zip, because I am
able to compress the same folder structure using the compression tool in
Windows 7 and the kmz file opens in Google Earth as it should (and the
transparency is correct).  I just have posted my experience to the 7zip
forum to see if that group is aware of any issues with creating kmz files
using 7zip.

Thanks,
Roland


On Wed, Feb 23, 2011 at 5:41 PM, brian <rush@winkey.org> wrote:

> Roland
>
> it is probably worth your time to include another step in in your
> proccess
>
> run nearblack -setmask -near 0 -nb 0 -of GTiff infile -o nearblack.tif
>
> nearblack options change if the source is a white background and if the
> image format is lossy
>
> gdalwarp -dstalpha -t_srs "EPSG:4326 nearblack.tif warped.tif
>
> gdal_translate -of kmlsuperoverlay warped.tif final.kmz
>
> brian
>
> On Tue, 2011-02-22 at 15:38 -0500, Roland Duhaime wrote:
> > I have been working with the png creation option under "gdal_translate
> > -of kmlsuperoverlay" to create kmz files that include transparency.  I
> > haven't had much luck with controlling specific colors that becomes
> > transparent, or even maintaining transparency in the source HFA file.
> > The handling of transparency is different from gdal2tiles, where I
> > have had good results.  This leads me back to gdal2tiles and
> > attempting to create a kmz file from the tile structure.  The key
> > difference I see between the .kml files using the two different
> > processes is below.   In order to be able to compress the gdal2tiles
> > output into one file, I believe that I may need to modify
> > gdal2tiles.py to create the gx:LatLonQuad tag from section 1 below as
> > opposed to the LatLonBox from section 2 below.  Does anyone know the
> > difference between gx:LatLonQuad and LatLonBox before I decide if this
> > change is appropriate?:
> >
> > (1) KML Superoverlay snippet:
> >
> >         <GroundOverlay>
> >             <drawOrder>0</drawOrder>
> >             <Icon>
> >                 <href>0.png</href>
> >             </Icon>
> >             <gx:LatLonQuad>
> >                 <coordinates>
> >                     -74.885604, 40.373168, 0
> >                     -74.269963, 40.373582, 0
> >                     -74.267506, 41.083329, 0
> >                     -74.889723, 41.082904, 0
> >                 </coordinates>
> >             </gx:LatLonQuad>
> >         </GroundOverlay>
> >
> > (2)GDAL2Tiles Kml snippet:
> >
> >         <GroundOverlay>
> >           <drawOrder>16</drawOrder>
> >           <Icon>
> >             <href>159.png</href>
> >           </Icon>
> >           <LatLonBox>
> >             <north>40.97989806962016</north>
> >             <south>39.90973623453719</south>
> >             <east>-74.53125000000000</east>
> >             <west>-75.93750000000000</west>
> >           </LatLonBox>
> >         </GroundOverlay>
> >
> > Thanks Again,
> > Roland
> >
> >
> > On Sun, Feb 20, 2011 at 6:12 AM, Vadim Shlyakhov <vadp.devl@gmail.com>
> > wrote:
> >         brian <rush <at> winkey.org> writes:
> >
> >         > the problem is in /12/1211/2558.kml line 26
> >         >
> >         > <href>2558.png</href>
> >         >
> >         > this should be a relative path from the root of the zipfile
> >         not from
> >         > 2558.kml
> >         >
> >
> >
> >         Hello Brian,
> >
> >         I've made another tile cutter
> >         (http://code.google.com/p/tilers-tools/). It
> >         produces a directory tree in a manner which is very similar to
> >         gdal2tiles.py. So
> >         I had a look into this problem.
> >
> >         I must say it didn't work for me either: GE shows KML just
> >         fine, but if I zip a
> >         dir tree into KMZ it fails altogether. I've tried relative
> >         paths to PNGs, to
> >         internal KMLs. All these were to no avail.
> >
> >         I think that the problem actually lies in '<NetworkLink>'
> >         things and I still
> >         cannot get a clue on these.
> >
> >         I wonder if you have (or can produce manually) a sample of
> >         working KMZ with
> >         superoverlays, so I'd be able to have a look
> >
> >
> >         _______________________________________________
> >         gdal-dev mailing list
> >         gdal-dev@lists.osgeo.org
> >         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110223/913cdf6f/attachment-0001.html
From mikhail_tche at sbcglobal.net  Wed Feb 23 23:33:36 2011
From: mikhail_tche at sbcglobal.net (Mikhail Tchernychev)
Date: Wed Feb 23 23:33:38 2011
Subject: [gdal-dev] How to use GDAL C++ dynamically?
Message-ID: <4D65DFA0.1080200@sbcglobal.net>

Hello Frank,

Yes indeed there are many functions which are not declared as virtual.
Thank you very much for pointing in right direction.


Cheers,

Mikhail

> Folks, I will note that at one time I maintained a "bridge" mechanism 
> which basically did this. It dynamically loaded the C API at runtime. 
> I stopped maintaining it several years ago but you can still find it 
> in old code branches. ie. 
> http://svn.osgeo.org/gdal/tags/gdal_1_2_0/bridge/ If someone felt it 
> was really useful, that might be a good place to start. Best regards,
> -- 
From mohammedrashadkm at gmail.com  Thu Feb 24 08:43:32 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Thu Feb 24 08:44:14 2011
Subject: [gdal-dev] multipolygon to polygon
Message-ID: <AANLkTikqotV7uM3vV0mN_tn5M9aANMYfG1U3mQraUWTT@mail.gmail.com>

How to convert mutipolygon to polygon

my code
string geometry = "MULTIPOLYGON (((76.742484035494002
9.949536084104899,76.783465713734998 9.8207365239198,76.818592866512006
9.8773302700617,76.842010968363994 9.931972507716001,76.742484035494002
9.949536084104899)))";

    char *geom = (char *) geometry.c_str();

 OGRGeometry *OLGeometry = NULL;


 OGRGeometryFactory::createFromWkt( &geom, NULL, &OLGeometry );

the OLGeometry is multipolygon I need it as polygon as given below.

Note: both are not equal

POLYGON ((76.334618761574006 10.378867951388999,76.338521778548994
10.419849629630001,76.404873067129998 10.349595324074,76.371697422840001
10.271534984568,76.334618761574006 10.378867951388999))




-- 
Thanks && Regards
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110224/293dd2c8/attachment.html
From mateusz at loskot.net  Thu Feb 24 09:05:35 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Feb 24 09:00:39 2011
Subject: [gdal-dev] What is status of RFC23?
Message-ID: <4D6665AF.6040305@loskot.net>

Folks,

I'm trying to find what's the actual status of the RFC 23 [1]
The only reference I got so far is from its header:

"Status: Adopted (partially implemented)"

and 1.6.0 release notes [2]:

"RFC 23: Preliminary support for character set transcoding
(in OGR for now)."

but what does it mean?
What means preliminary and partially here?

Are the functions like OGRFeature::SetField and GetFieldAsString()
fully UTF-8 aware/enabled?

[1] http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode
[2] http://trac.osgeo.org/gdal/wiki/Release/1.6.0-News

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From chaitanya.ch at gmail.com  Thu Feb 24 09:01:24 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Feb 24 09:02:26 2011
Subject: [gdal-dev] multipolygon to polygon
In-Reply-To: <AANLkTikqotV7uM3vV0mN_tn5M9aANMYfG1U3mQraUWTT@mail.gmail.com>
References: <AANLkTikqotV7uM3vV0mN_tn5M9aANMYfG1U3mQraUWTT@mail.gmail.com>
Message-ID: <AANLkTik1mn8CC-dej2zXwgfgLRYREkCAv9C0w9O_M2p9@mail.gmail.com>

Rashad,

If the Polygons in a MultiPolygon can be combined into a single connected
polygon, you can use the OGRGeometry::UnionCascaded() function to do this.

On Thu, Feb 24, 2011 at 7:13 PM, Mohammed Rashad <mohammedrashadkm@gmail.com
> wrote:

> How to convert mutipolygon to polygon
>
> my code
> string geometry = "MULTIPOLYGON (((76.742484035494002
> 9.949536084104899,76.783465713734998 9.8207365239198,76.818592866512006
> 9.8773302700617,76.842010968363994 9.931972507716001,76.742484035494002
> 9.949536084104899)))";
>
>     char *geom = (char *) geometry.c_str();
>
>  OGRGeometry *OLGeometry = NULL;
>
>
>  OGRGeometryFactory::createFromWkt( &geom, NULL, &OLGeometry );
>
> the OLGeometry is multipolygon I need it as polygon as given below.
>
> Note: both are not equal
>
> POLYGON ((76.334618761574006 10.378867951388999,76.338521778548994
> 10.419849629630001,76.404873067129998 10.349595324074,76.371697422840001
> 10.271534984568,76.334618761574006 10.378867951388999))
>
>
>
>
> --
> Thanks && Regards
> Rashad
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110224/ffbb2758/attachment.html
From chaitanya.ch at gmail.com  Thu Feb 24 09:03:27 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Feb 24 09:03:29 2011
Subject: [gdal-dev] multipolygon to polygon
In-Reply-To: <AANLkTikqotV7uM3vV0mN_tn5M9aANMYfG1U3mQraUWTT@mail.gmail.com>
References: <AANLkTikqotV7uM3vV0mN_tn5M9aANMYfG1U3mQraUWTT@mail.gmail.com>
Message-ID: <AANLkTinWbR1+iF4a8E3iS9hKdNO8vPszp=ojee5k_TN+@mail.gmail.com>

Rashad,

If the Polygons in a MultiPolygon can be combined into a single connected
polygon, you can use the OGRGeometry::UnionCascaded() function to do this.

On Thu, Feb 24, 2011 at 7:13 PM, Mohammed Rashad <mohammedrashadkm@gmail.com
> wrote:

> How to convert mutipolygon to polygon
>
> my code
> string geometry = "MULTIPOLYGON (((76.742484035494002
> 9.949536084104899,76.783465713734998 9.8207365239198,76.818592866512006
> 9.8773302700617,76.842010968363994 9.931972507716001,76.742484035494002
> 9.949536084104899)))";
>
>     char *geom = (char *) geometry.c_str();
>
>  OGRGeometry *OLGeometry = NULL;
>
>
>  OGRGeometryFactory::createFromWkt( &geom, NULL, &OLGeometry );
>
> the OLGeometry is multipolygon I need it as polygon as given below.
>
> Note: both are not equal
>
> POLYGON ((76.334618761574006 10.378867951388999,76.338521778548994
> 10.419849629630001,76.404873067129998 10.349595324074,76.371697422840001
> 10.271534984568,76.334618761574006 10.378867951388999))
>
>
>
>
> --
> Thanks && Regards
> Rashad
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110224/64a30a98/attachment.html
From pcorti at gmail.com  Thu Feb 24 09:10:44 2011
From: pcorti at gmail.com (Paolo Corti)
Date: Thu Feb 24 09:50:59 2011
Subject: [gdal-dev] multipolygon to polygon
In-Reply-To: <AANLkTikqotV7uM3vV0mN_tn5M9aANMYfG1U3mQraUWTT@mail.gmail.com>
References: <AANLkTikqotV7uM3vV0mN_tn5M9aANMYfG1U3mQraUWTT@mail.gmail.com>
Message-ID: <AANLkTin0WTvgokg2YxsXN+-LH2kkDN=x_PXVMqcqJomv@mail.gmail.com>

On Thu, Feb 24, 2011 at 2:43 PM, Mohammed Rashad <mohammedrashadkm@gmail.com
> wrote:

> How to convert mutipolygon to polygon
>
> my code
> string geometry = "MULTIPOLYGON (((76.742484035494002
> 9.949536084104899,76.783465713734998 9.8207365239198,76.818592866512006
> 9.8773302700617,76.842010968363994 9.931972507716001,76.742484035494002
> 9.949536084104899)))";
>
>     char *geom = (char *) geometry.c_str();
>
>  OGRGeometry *OLGeometry = NULL;
>
>
>  OGRGeometryFactory::createFromWkt( &geom, NULL, &OLGeometry );
>
> the OLGeometry is multipolygon I need it as polygon as given below.
>
> Note: both are not equal
>
> POLYGON ((76.334618761574006 10.378867951388999,76.338521778548994
> 10.419849629630001,76.404873067129998 10.349595324074,76.371697422840001
> 10.271534984568,76.334618761574006 10.378867951388999))
>
>
>
This is Python code, but you can easily convert it to C:

multipoly_geom = ogr.CreateGeometryFromWkt('MULTIPOLYGON
(((76.742484035494002 9.949536084104899,76.783465713734998
9.8207365239198,76.818592866512006 9.8773302700617,76.842010968363994
9.931972507716001,76.742484035494002 9.949536084104899)))')
for geom_part in multipoly_geom:
    print geom_part.ExportToWkt()

POLYGON ((76.742484035494002 9.949536084104899,76.783465713734998
9.8207365239198,76.818592866512006 9.8773302700617,76.842010968363994
9.931972507716001,76.742484035494002 9.949536084104899))

also give a look at this previous discussion:
http://www.mail-archive.com/gdal-dev@lists.osgeo.org/msg09285.html

best regards
P

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @paolo_corti
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110224/611609e6/attachment.html
From warmerdam at pobox.com  Thu Feb 24 10:28:18 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 24 10:28:22 2011
Subject: [gdal-dev] What is status of RFC23?
In-Reply-To: <4D6665AF.6040305@loskot.net>
References: <4D6665AF.6040305@loskot.net>
Message-ID: <4D667912.8030205@pobox.com>

On 11-02-24 09:05 AM, Mateusz Loskot wrote:
> Folks,
>
> I'm trying to find what's the actual status of the RFC 23 [1]
> The only reference I got so far is from its header:
>
> "Status: Adopted (partially implemented)"
>
> and 1.6.0 release notes [2]:
>
> "RFC 23: Preliminary support for character set transcoding
> (in OGR for now)."
>
> but what does it mean?
> What means preliminary and partially here?
>
> Are the functions like OGRFeature::SetField and GetFieldAsString()
> fully UTF-8 aware/enabled?
>
> [1] http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode
> [2] http://trac.osgeo.org/gdal/wiki/Release/1.6.0-News

Mateusz,

The RFC is now mostly implemented.  Only recently the iconv() implemented
was integrated into CPLRecode().

Of course the RFC sets up the superstructure but does not guarantee that
all drivers return UTF8.  Skiming the code, it appears the dxf, GeoRSS,
GML, GPX, NAS, Postgres, SOSI, VRT (depending on underlying layer) and
WFS layers declare themselves with OLCStringsAsUTF8.

Of course other drivers may also be UTF8 but not fully declared.

What was listed in the RFC, but was not done, was UTF8 translation of
wide string fields in the ODBC driver, and support for recoding
from/to UTF8 in the Shapefile driver.

So in that sense it is still incomplete.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From sritchie09 at gmail.com  Thu Feb 24 10:51:12 2011
From: sritchie09 at gmail.com (Sam Ritchie)
Date: Thu Feb 24 10:52:52 2011
Subject: [gdal-dev] Building Java Bindings for use with "apt-get gdal-bin"
Message-ID: <AANLkTi=rLeBEB3OHipymTakYG-aS8GKLg32R61greAcx@mail.gmail.com>

Hey all,

QUICK VERSION:
When I build the java bindings for gdal, what native dependencies do I need
to transfer over to another machine (with an identical install location) to
get them to run?

LONG VERSION:
I'm working on an application that requires the java bindings for gdal 1.8.0
to be packaged up with the app, along with the native libraries. Now! I've
actually accomplished this on Mac OS X -- rather than building from source
on each machine, I was able to pull the macports version of gdal using

sudo port install gdal +hdf4 +universal

then build from source, with --prefix=/opt/local, or the location of that
macports variant. Once the bindings had the proper location, I was able to
bundle them up inside my jar file and distribute them to other machines. (As
long as the *.dylib files are on java's library path, all is well.)

My issue is, I'm having a bit of trouble doing the same thing with linux.
I've installed gdal-bin with

sudo apt-get gdal-bin

And can verify that gdalinfo works, for one of the HDF files I need to
process. Good news there.

I then built the java bindings from source using

./configure --prefix=/usr --with-threads --disable-netcdf --disable-fortran
--with-hdf4=/usr
make
cd swig/java
make

(After modifiying swig/java/java.opt to point to my native java install.)

To make these bindings work on some other machine, I know that I need the
four *.so files -- after I run "make" inside gdal/swig/java, though, I end
up with three versions of each file:

libgdalconstjni.so
libgdalconstjni.so.1.15.0
libgdalconstjni.so.1

etc.

Now, it looks like the first two (.so and .so.1.15.0) are symlinked to the
*.so.1 file -- if I try to bundle either of these and run my project on a
fresh machine (without the built source, but after running "sudo apt-get
gdal-bin") and use them, I get

java.lang.UnsatisfiedLinkError: /root/forma-hadoop/lib/native/libgdaljni.so:
libgdal.so.1: cannot open shared object file: No such file or directory

I'm stuck, here. I don't know what libgdal.so.1 is, or where it sits. Do I
need to bundle this up as well? More generally, what files do the bindings
depend on to actually link to the gdal binaries?

(My final step, hopefully the working step, is to bundle up the (*.so.1)
files, clean, and try again. This worked with OS X, but on OS X I never saw
a reference to "libgdal", without the jni extension.)

Sorry for such a long email. I plan on doing a blog post detailing all of
this work, and putting the final jar file, with OS X and linux dependencies
for 1.8, up in a maven repository after this all works out.

Best,
Sam
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110224/6670beca/attachment.html
From mohammedrashadkm at gmail.com  Thu Feb 24 11:56:14 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Thu Feb 24 11:56:57 2011
Subject: [gdal-dev] Bug in SetField
Message-ID: <AANLkTiks3kmsMy5nvDrvG-Nvwz=UN+5ZxChhkadpf8Xo@mail.gmail.com>

my code
field - fieldname is of string type and 0th field

poFeature->SetField("fieldname","value");


poFeature->GetFieldAsString(0);
returns  v instead of value;

I dont know is it bug or my problem

but I opened the shapefile in OpenJUMP and QGIS both shows field names as
only v instead of value

I am working with shapefiles


-- 
Thanks && Regards
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110224/a107b5db/attachment.html
From warmerdam at pobox.com  Thu Feb 24 12:09:53 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 24 12:09:56 2011
Subject: [gdal-dev] Bug in SetField
In-Reply-To: <AANLkTiks3kmsMy5nvDrvG-Nvwz=UN+5ZxChhkadpf8Xo@mail.gmail.com>
References: <AANLkTiks3kmsMy5nvDrvG-Nvwz=UN+5ZxChhkadpf8Xo@mail.gmail.com>
Message-ID: <4D6690E1.6040001@pobox.com>

On 11-02-24 11:56 AM, Mohammed Rashad wrote:
> my code
> field - fieldname is of string type and 0th field
>
> poFeature->SetField("fieldname","value");
>
>
> poFeature->GetFieldAsString(0);
> returns  v instead of value;
>
> I dont know is it bug or my problem
>
> but I opened the shapefile in OpenJUMP and QGIS both shows field names as only
> v instead of value
>
> I am working with shapefiles

Mohammed,

What does the ogrinfo report on the field definitions look?

ie.

ogrinfo -so -al abc.shp

I suspect the field "fieldname" was defined with a width of one.  SetField()
will automatically truncate the value in such a case.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mateusz at loskot.net  Thu Feb 24 12:10:25 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Feb 24 12:10:26 2011
Subject: [gdal-dev] Re: What is status of RFC23?
In-Reply-To: <4D667912.8030205@pobox.com>
References: <4D6665AF.6040305@loskot.net> <4D667912.8030205@pobox.com>
Message-ID: <1298567425229-6061088.post@n2.nabble.com>


Frank,

It answers my question. Thanks.

The RFC 30 states "GDAL uses UTF-8 encoding internally when working with
strings". Does it mean functions like GDALGetDataTypeName are considered to
return UTF-8? I understand that in this particular case, there is no
difference between ANSI and UTF8 regarding "content" of the string, but I'm
trying to learn if and how far the uniform pattern applies.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org

-----
-- 
Mateusz Loskot
http://mateusz.loskot.net
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-What-is-status-of-RFC23-tp6060414p6061088.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From mohammedrashadkm at gmail.com  Thu Feb 24 12:17:13 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Thu Feb 24 12:17:55 2011
Subject: [gdal-dev] Bug in SetField
In-Reply-To: <4D6690E1.6040001@pobox.com>
References: <AANLkTiks3kmsMy5nvDrvG-Nvwz=UN+5ZxChhkadpf8Xo@mail.gmail.com>
	<4D6690E1.6040001@pobox.com>
Message-ID: <AANLkTiku-YkSrBGuR7KWXfWGe6eGMiLZnex9Ucr0w36K@mail.gmail.com>

rashadkm@rashad-laptop:~/wt/examples/vrgeo/shp$ ogrinfo -so -al layerff.shp
ERROR 4: Unable to open layerff.shp or layerff.SHP.
Had to open data source read-only.
INFO: Open of `layerff.shp'
      using driver `ESRI Shapefile' successful.

Layer name: layerff
Geometry: Polygon
Feature Count: 5
Extent: (76.199480, 9.727064) - (76.863570, 10.255923)
Layer SRS WKT:
(unknown)
fieldname: String (1.0)
rashadkm@rashad-laptop:~/wt/examples/vrgeo/shp$


but i had set the feild width to 132

    OGRFieldDefn oField( field, OFTString );

    oField.SetWidth(132);


On Thu, Feb 24, 2011 at 10:39 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> On 11-02-24 11:56 AM, Mohammed Rashad wrote:
>
>> my code
>> field - fieldname is of string type and 0th field
>>
>> poFeature->SetField("fieldname","value");
>>
>>
>> poFeature->GetFieldAsString(0);
>> returns  v instead of value;
>>
>> I dont know is it bug or my problem
>>
>> but I opened the shapefile in OpenJUMP and QGIS both shows field names as
>> only
>> v instead of value
>>
>> I am working with shapefiles
>>
>
> Mohammed,
>
> What does the ogrinfo report on the field definitions look?
>
> ie.
>
> ogrinfo -so -al abc.shp
>
> I suspect the field "fieldname" was defined with a width of one.
>  SetField()
> will automatically truncate the value in such a case.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Thanks && Regards
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110224/6bcd75cc/attachment.html
From warmerdam at pobox.com  Thu Feb 24 12:25:55 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 24 12:25:58 2011
Subject: [gdal-dev] Re: What is status of RFC23?
In-Reply-To: <1298567425229-6061088.post@n2.nabble.com>
References: <4D6665AF.6040305@loskot.net> <4D667912.8030205@pobox.com>
	<1298567425229-6061088.post@n2.nabble.com>
Message-ID: <4D6694A3.70105@pobox.com>

On 11-02-24 12:10 PM, Mateusz Loskot wrote:
>
> Frank,
>
> It answers my question. Thanks.
>
> The RFC 30 states "GDAL uses UTF-8 encoding internally when working with
> strings". Does it mean functions like GDALGetDataTypeName are considered to
> return UTF-8? I understand that in this particular case, there is no
> difference between ANSI and UTF8 regarding "content" of the string, but I'm
> trying to learn if and how far the uniform pattern applies.

Mateusz,

I don't think you should take that statement to mean very much.  I think it
was just intended to convey that the string and stringlist attributes of
features would be treated as UTF-8 during internal processing.  That statement
might also have been left over from an earlier, broader version of the RFC.
In practice the RFC should only be taken to address string and stringlist
attributes of features.

Certainly it is my *intent* that essentially all strings in GDAL/OGR should
be handled as UTF-8.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Thu Feb 24 13:56:53 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb 24 13:57:11 2011
Subject: [gdal-dev] Building Java Bindings for use with "apt-get gdal-bin"
In-Reply-To: <AANLkTi=rLeBEB3OHipymTakYG-aS8GKLg32R61greAcx@mail.gmail.com>
References: <AANLkTi=rLeBEB3OHipymTakYG-aS8GKLg32R61greAcx@mail.gmail.com>
Message-ID: <201102241956.53631.even.rouault@mines-paris.org>

Le jeudi 24 f?vrier 2011 16:51:12, Sam Ritchie a ?crit :
> Hey all,
> 
> QUICK VERSION:
> When I build the java bindings for gdal, what native dependencies do I need
> to transfer over to another machine (with an identical install location) to
> get them to run?
> 
> LONG VERSION:
> I'm working on an application that requires the java bindings for gdal
> 1.8.0 to be packaged up with the app, along with the native libraries.
> Now! I've actually accomplished this on Mac OS X -- rather than building
> from source on each machine, I was able to pull the macports version of
> gdal using
> 
> sudo port install gdal +hdf4 +universal
> 
> then build from source, with --prefix=/opt/local, or the location of that
> macports variant. Once the bindings had the proper location, I was able to
> bundle them up inside my jar file and distribute them to other machines.
> (As long as the *.dylib files are on java's library path, all is well.)
> 
> My issue is, I'm having a bit of trouble doing the same thing with linux.
> I've installed gdal-bin with
> 
> sudo apt-get gdal-bin
> 
> And can verify that gdalinfo works, for one of the HDF files I need to
> process. Good news there.
> 
> I then built the java bindings from source using
> 
> ./configure --prefix=/usr --with-threads --disable-netcdf --disable-fortran
> --with-hdf4=/usr
> make
> cd swig/java
> make
> 
> (After modifiying swig/java/java.opt to point to my native java install.)
> 
> To make these bindings work on some other machine, I know that I need the
> four *.so files -- after I run "make" inside gdal/swig/java, though, I end
> up with three versions of each file:
> 
> libgdalconstjni.so
> libgdalconstjni.so.1.15.0
> libgdalconstjni.so.1
> 
> etc.
> 
> Now, it looks like the first two (.so and .so.1.15.0) are symlinked to the
> *.so.1 file -- if I try to bundle either of these and run my project on a
> fresh machine (without the built source, but after running "sudo apt-get
> gdal-bin") and use them, I get
> 
> java.lang.UnsatisfiedLinkError:
> /root/forma-hadoop/lib/native/libgdaljni.so: libgdal.so.1: cannot open
> shared object file: No such file or directory
> 
> I'm stuck, here. I don't know what libgdal.so.1 is

well, I thought that would have been pretty obvious ;-). This is the GDAL 
shared object used by language bindings and gdal command line utilities (and 
all other programs relying on GDAL).

> , or where it sits.

You should likely found it in /usr/lib. It should be installed there by the 
libgdal1-XXXX (XXXX being the GDAL version of your Debian/Ubuntu install) 
package, which is itself a dependency that should be installed when installing 
gdal-bin.

So if I have understood well your process, what you have done should work...

One way to check is to 'ldd libgdaljni.so' and do what is necessary to remove 
any "not found" dependency.

> Do I
> need to bundle this up as well?

libgdal.so.1 definitely needs to be available for the bindings to work. Then it 
depends on the context if you suppose that the user has it installed through 
the package manager, or if you must bundle it yourself ala FWTools for Linux.

> More generally, what files do the bindings
> depend on to actually link to the gdal binaries?

libgdaljni.so, libogrjni.so and etc.. will link to libgdal and its library 
dependencies (which depend on the exact GDAL build)

> 
> (My final step, hopefully the working step, is to bundle up the (*.so.1)
> files, clean, and try again. This worked with OS X, but on OS X I never saw
> a reference to "libgdal", without the jni extension.)
> 
> Sorry for such a long email. I plan on doing a blog post detailing all of
> this work, and putting the final jar file, with OS X and linux dependencies
> for 1.8, up in a maven repository after this all works out.
> 
> Best,
> Sam
From even.rouault at mines-paris.org  Thu Feb 24 13:58:08 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Feb 24 13:58:26 2011
Subject: [gdal-dev] Bug in SetField
In-Reply-To: <AANLkTiku-YkSrBGuR7KWXfWGe6eGMiLZnex9Ucr0w36K@mail.gmail.com>
References: <AANLkTiks3kmsMy5nvDrvG-Nvwz=UN+5ZxChhkadpf8Xo@mail.gmail.com>
	<4D6690E1.6040001@pobox.com>
	<AANLkTiku-YkSrBGuR7KWXfWGe6eGMiLZnex9Ucr0w36K@mail.gmail.com>
Message-ID: <201102241958.08850.even.rouault@mines-paris.org>

Le jeudi 24 f?vrier 2011 18:17:13, Mohammed Rashad a ?crit :
> rashadkm@rashad-laptop:~/wt/examples/vrgeo/shp$ ogrinfo -so -al layerff.shp
> ERROR 4: Unable to open layerff.shp or layerff.SHP.
> Had to open data source read-only.
> INFO: Open of `layerff.shp'
>       using driver `ESRI Shapefile' successful.
> 
> Layer name: layerff
> Geometry: Polygon
> Feature Count: 5
> Extent: (76.199480, 9.727064) - (76.863570, 10.255923)
> Layer SRS WKT:
> (unknown)
> fieldname: String (1.0)

Yes that matches Frank hypothesis !

> rashadkm@rashad-laptop:~/wt/examples/vrgeo/shp$
> 
> 
> but i had set the feild width to 132
> 
>     OGRFieldDefn oField( field, OFTString );
> 
>     oField.SetWidth(132);

You cannot change a field definition of an existing file. You can only set it 
when creating a new field with the OGRLayer::CreateField() API
From armin.burger at gmx.net  Thu Feb 24 15:22:44 2011
From: armin.burger at gmx.net (Armin Burger)
Date: Thu Feb 24 15:22:49 2011
Subject: [gdal-dev] Windows builds and wildcard usage for gdaltindex &
	gdalbuildvrt
Message-ID: <4D66BE14.5000904@gmx.net>

Hi all

I wanted to use a more recent Windows build than the latest FW Tools 
which are a bit old now. I used the binaries from

http://vbkto.dyndns.org/sdk/PackageList.aspx?file=release-1310-gdal-1-8-0-mapserver-5-6-6.zip

All works fine, just the usage of wildcards in tools like gdaltindex or 
gdalbuildvrt does not work any more. If I run eg

gdaltindex tileindex.shp *.tif

I just get the error that the file "*.tif" could not be found. Same 
happens for gdalbuildvrt.exe.  So the wildcard resolution seems not to 
work any more (it still did work in the last FWTools 2.4.7). For 
gdaltindex I can use a "for" loop command because it adds every tif to 
the same shape, but I don't think this workaround works for the 
gdalbuildvrt.

On Linux builds the wildcards usage still works fine with GDAL 1.8. Any 
ideas if this will be fixed for Windows?

Armin
From warmerdam at pobox.com  Thu Feb 24 15:34:16 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 24 15:34:19 2011
Subject: [gdal-dev] Windows builds and wildcard usage for gdaltindex &
	gdalbuildvrt
In-Reply-To: <4D66BE14.5000904@gmx.net>
References: <4D66BE14.5000904@gmx.net>
Message-ID: <4D66C0C8.60307@pobox.com>

On 11-02-24 03:22 PM, Armin Burger wrote:
> Hi all
>
> I wanted to use a more recent Windows build than the latest FW Tools which are
> a bit old now. I used the binaries from
>
> http://vbkto.dyndns.org/sdk/PackageList.aspx?file=release-1310-gdal-1-8-0-mapserver-5-6-6.zip
>
>
> All works fine, just the usage of wildcards in tools like gdaltindex or
> gdalbuildvrt does not work any more. If I run eg
>
> gdaltindex tileindex.shp *.tif
>
> I just get the error that the file "*.tif" could not be found. Same happens for
> gdalbuildvrt.exe. So the wildcard resolution seems not to work any more (it
> still did work in the last FWTools 2.4.7). For gdaltindex I can use a "for"
> loop command because it adds every tif to the same shape, but I don't think
> this workaround works for the gdalbuildvrt.
>
> On Linux builds the wildcards usage still works fine with GDAL 1.8. Any ideas
> if this will be fixed for Windows?

Armin / Tamas,

For this the SETARGV macro in nmake.opt needs to reference an appropriate
setargv.obj object file from the visual studio tree.  The default is
commented out:

#SETARGV =	$(VCDIR)\lib\setargv.obj

On Unix and unix like shells such as cygwin on windows the shell performs
expansion of wildcards in filenames.  On the Windows CMD.EXE command processor
this is not the case, and the setargv.obj provides a default implementation
of wildcard expansion.

Perhaps Tamas could enable this for his builds.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From SGONG at mdacorporation.com  Thu Feb 24 16:16:36 2011
From: SGONG at mdacorporation.com (Shawn Gong)
Date: Thu Feb 24 16:17:40 2011
Subject: [gdal-dev] image header UL,LL,UR,LR
Message-ID: <33584A1DEF4341428D15C1273466D323552D1A58@EVSYVR1.ds.mda.ca>

Hi list,

I have a flat binary image "HH.img" and a HH.aux header

The header file looks like:
AuxiliaryTarget: HH.img
RawDefinition: 1492 1680 1
ChanDefinition-1: 32R 0 4 5968 Unswapped
ChanDesc-1: HH intensity
SegDesc-1-0: Contents Not Specified
MapUnits: LONG/LAT    D-04
UpLeftX: -5.601451
UpLeftY: 36.098471
UpRightX: -5.305277
UpRightY: 36.148817
LoLeftX: -5.522707
LoLeftY: 35.800948
LoRightX: -5.227759
LoRightY: 35.851245
ProjParms: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 4

gdalinfo does not give the right corner coordinates.
what changes do I have to make for gdal to ingest?
(I can use gdal_translate, but try to avoid that route)

Thanks,
Shawn
From SGONG at mdacorporation.com  Thu Feb 24 16:16:40 2011
From: SGONG at mdacorporation.com (Shawn Gong)
Date: Thu Feb 24 16:17:45 2011
Subject: [gdal-dev] image header UL,LL,UR,LR
Message-ID: <33584A1DEF4341428D15C1273466D323552D1A59@EVSYVR1.ds.mda.ca>

Hi list,

I have a flat binary image "HH.img" and a HH.aux header

The header file looks like:
AuxiliaryTarget: HH.img
RawDefinition: 1492 1680 1
ChanDefinition-1: 32R 0 4 5968 Unswapped
ChanDesc-1: HH intensity
SegDesc-1-0: Contents Not Specified
MapUnits: LONG/LAT    D-04
UpLeftX: -5.601451
UpLeftY: 36.098471
UpRightX: -5.305277
UpRightY: 36.148817
LoLeftX: -5.522707
LoLeftY: 35.800948
LoRightX: -5.227759
LoRightY: 35.851245
ProjParms: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 4

gdalinfo does not give the right corner coordinates.
what changes do I have to make for gdal to ingest?
(I can use gdal_translate, but try to avoid that route)

Thanks,
Shawn
From dmorissette at mapgears.com  Thu Feb 24 16:26:13 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu Feb 24 16:26:15 2011
Subject: [gdal-dev] Sponsorship for OSGeo Montreal Code Sprint 2011
Message-ID: <4D66CCF5.8010205@mapgears.com>

Dear GDAL/OGR users,

OSGeo's Montreal Code Sprint 2011 is going to take place on March 14-18, 
2011. A group of over 20 OSGeo project developers and contributors will 
meet in Montreal for 4 days of work on their respective projects... for 
the advancement of the software that you use everyday.

So far, 22 devs/contributors have signed up to participate, including 5 
who plan to work on GDAL/OGR.

If your organization uses GDAL/OGR then you might want to let your boss 
know (or take note if you're the boss) that we are looking for sponsors 
($750 each) to support food and fun for the sprinters as they work hard 
and play hard for four productive days. Each $750 sponsorship will be 
put towards lunch and dinner costs for the sprinters, and potentially 
bringing in sprinters who might otherwise be unable to attend.

Ideally we'd need another 2 or 3 sponsors to meet our current budget 
objectives, and if we have a surplus then it will either be returned to 
OSGeo, or used for a future code sprint.

All the details about the sprint, including our current budget are 
available in the wiki at

   http://wiki.osgeo.org/wiki/Montreal_Code_Sprint_2011

If you are interested in sponsoring then please contact me directly 
off-list.

Finally, I'd like to thank our first round of sponsors:

- LizardTech - http://www.lizardtech.com/
- Azavea - http://www.azavea.com/
- qPublic - http://qpublic.net/
- Farallon Geographics - http://fargeo.com/

And also big thanks to the "Communaut? M?tropolitaine de Montr?al (CMM)" 
for hosting us in their wonderful conference room.

I hope to be able to announce a few more sponsors in the next couple of 
days.  :-)

Daniel

P.S. There is also still a bit of room for more sprinters. The only 
requirement is that you be knowledgeable and willing to get your hands 
dirty doing some work for one of the projects that is represented. If 
you are interested in participating then to help us with planning please 
list your name in the wiki, join the "tosprint" list to receive the 
latest updates, and book your hotel ASAP since our room block is about 
to expire. All that info is in the wiki.

-- 
Daniel Morissette
http://www.mapgears.com/

From warmerdam at pobox.com  Thu Feb 24 16:31:20 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 24 16:31:22 2011
Subject: [gdal-dev] image header UL,LL,UR,LR
In-Reply-To: <33584A1DEF4341428D15C1273466D323552D1A58@EVSYVR1.ds.mda.ca>
References: <33584A1DEF4341428D15C1273466D323552D1A58@EVSYVR1.ds.mda.ca>
Message-ID: <4D66CE28.4060608@pobox.com>

On 11-02-24 04:16 PM, Shawn Gong wrote:
> Hi list,
>
> I have a flat binary image "HH.img" and a HH.aux header
>
> The header file looks like:
> AuxiliaryTarget: HH.img
> RawDefinition: 1492 1680 1
> ChanDefinition-1: 32R 0 4 5968 Unswapped
> ChanDesc-1: HH intensity
> SegDesc-1-0: Contents Not Specified
> MapUnits: LONG/LAT    D-04
> UpLeftX: -5.601451
> UpLeftY: 36.098471
> UpRightX: -5.305277
> UpRightY: 36.148817
> LoLeftX: -5.522707
> LoLeftY: 35.800948
> LoRightX: -5.227759
> LoRightY: 35.851245
> ProjParms: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 4
>
> gdalinfo does not give the right corner coordinates.
> what changes do I have to make for gdal to ingest?
> (I can use gdal_translate, but try to avoid that route)

Shawn,

The PCI .aux file is only intended to be used with "north up"
images.  I see your corner coordinates are not regular.  For instance
the longitude of the upper left and lower left corner are not the same.

You could wrap the same dataset in a "raw" VRT and associate GCPs
with it to identify the corner coordinates instead of trying to set
a geotransform.  Scan down to the raw file part of:

   http://www.gdal.org/gdal_vrttut.html

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From szekerest at gmail.com  Thu Feb 24 16:40:08 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Feb 24 16:40:10 2011
Subject: [gdal-dev] Windows builds and wildcard usage for gdaltindex &
	gdalbuildvrt
In-Reply-To: <4D66BE14.5000904@gmx.net>
References: <4D66BE14.5000904@gmx.net>
Message-ID: <AANLkTim3BR+3ChjFiX9HdVJKsoLc=UEW--AngC7sSw+Z@mail.gmail.com>

Hi Armin,

I've just added wildcard support to the builds at
http://vbkto.dyndns.org/sdk/ according to Frank's suggestion. The
corresponding binaries should be available with the next daily builds.

Best regards,

Tamas



2011/2/24 Armin Burger <armin.burger@gmx.net>

> Hi all
>
> I wanted to use a more recent Windows build than the latest FW Tools which
> are a bit old now. I used the binaries from
>
>
> http://vbkto.dyndns.org/sdk/PackageList.aspx?file=release-1310-gdal-1-8-0-mapserver-5-6-6.zip
>
> All works fine, just the usage of wildcards in tools like gdaltindex or
> gdalbuildvrt does not work any more. If I run eg
>
> gdaltindex tileindex.shp *.tif
>
> I just get the error that the file "*.tif" could not be found. Same happens
> for gdalbuildvrt.exe.  So the wildcard resolution seems not to work any more
> (it still did work in the last FWTools 2.4.7). For gdaltindex I can use a
> "for" loop command because it adds every tif to the same shape, but I don't
> think this workaround works for the gdalbuildvrt.
>
> On Linux builds the wildcards usage still works fine with GDAL 1.8. Any
> ideas if this will be fixed for Windows?
>
> Armin
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110224/7fa4d086/attachment.html
From mgleahy at alumni.uwaterloo.ca  Thu Feb 24 22:26:28 2011
From: mgleahy at alumni.uwaterloo.ca (Mike Leahy)
Date: Thu Feb 24 22:26:36 2011
Subject: [gdal-dev] Re: PHP bindings
In-Reply-To: <201102091822.20846.mgleahy@alumni.uwaterloo.ca>
References: <201102061450.35281.mgleahy@alumni.uwaterloo.ca>
	<201102100014.49318.even.rouault@mines-paris.org>
	<201102091822.20846.mgleahy@alumni.uwaterloo.ca>
Message-ID: <201102242226.29204.mgleahy@alumni.uwaterloo.ca>

Hello all,

To keep this topic somewhat alive, I might note that I can identify that 
php_osr.so works partially in some ways, but not how I would expect 
compared with the same bindings in other languages.

I also found that at least one typemap was needed in typemaps_php.i, which I 
determined by looking at the Python typemaps:

/* Almost same as %typemap(out) char **options */
/* but we CSLDestroy the char** pointer at the end */
%typemap(out) char **CSL
{
  /* %typemap(out) char ** -> ( string ) */
  char **stringarray = $1;
  if ( stringarray == NULL ) {
    RETVAL_NULL();
  }
  else {
    int len = CSLCount( stringarray );
    array_init($result);
    for ( int i = 0; i < len; ++i, ++stringarray ) {
      add_next_index_string( $result, *stringarray, 1 );
    }
  }
  CSLDestroy($1);
}

This seems to have removed the warnings about that being missing when I 
compile the osr library (I'm continuing to focus just on this library for 
now).

In terms of actually using php_osr.so, I can successfully import a proj4 
string, and export that to WKT using the '__str__' method:

<?php
$sr = new_SpatialReference();
SpatialReference_ImportFromProj4($sr,'+init=epsg:4326');
echo SpatialReference___str__($sr);
?>

This suggests to me that the underlying objects work as expected.  However, I 
would expect that the last line would be equivalent to using 
"SpatialReference_ExportToWkt($sr);", but that isn't the case.  When using 
that function, I still get zero, which I think stems from the fact that the 
data type for the ExportToWkt (and similar functions) in osr.i is of the type 
'OGRErr', and this is what is getting returned in PHP instead of the desired 
wkt output.

My guess is that there's a difference in how swig is interpreting these 
functions when compiling for PHP versus the other languages.  In osr.i, I 
added an extra declaration that mimics how the __str__ function works, but 
returns proj4 strings.  It looks like this:

%newobject ExportToProj4Test;
  char *ExportToProj4Test() {
    char *buf = 0;
    OSRExportToProj4( self, &buf );
    return buf;
  }

After compiling that, the following code will successfully return a Proj4 
string:

<?php
$sr = new_SpatialReference();
SpatialReference_ImportFromProj4($sr,'+init=epsg:4326');
echo SpatialReference_ExportToProj4Test($sr);
?>

So...with this in mind, does this suggest that PHP will essentially need an 
entirely rewritten list of functions that substitute those that are currently 
there now?  I would hope that there's a more efficient/effective way to go about 
this, and that I'm just looking at this with my relatively novice perspective.

Best regards,
Mike

> Hi Even,
> 
> It looks like adding '-L../../.libs -lgdal' did the trick to ensure
> that the libraries are linked.  E.g.,:
> 
> swig -Wall -I../include -I../include/php -I../include/php/docs \
> 
>    -I/scratch2/gdal/gdal-1.8.0 -c++ -php -o osr_wrap.cpp
>    ../include/osr.i
> 
> g++ -L../../.libs -lgdal -I../../port -I../../gcore -I../../alg \
> 
>    -I../../ogr `php-config --includes` -fpic -c osr_wrap.cpp
> 
> gcc -L../../.libs -lgdal -shared osr_wrap.o -o php_osr.so
> 
> After doing that, ldd shows a respectable number of linked libraries,
> inlcuding libgdal.  I can load php_osr.so without trouble, same as
> before. But php_gdal.so module now reports several conflicts when it is
> loaded (e.g., duplicate functions named 'rmdir', 'mkdir', 'unlink',
> etc...), so there's a bit more to fix up in that area.
> 
> However, I'm sticking with php_osr.so as a simpler test case to start
> off. As an example, I would expect the PHP code below should create a
> spatial reference object for the wgs84 long/lat referenc system based
> on the epsg number 4326, and export the equivalent WKT text, but I'm
> still getting a zero integer returned:
> 
> php code:
> 
> $sr = new_SpatialReference();
> var_dump($sr);
> var_dump(SpatialReference_ImportFromProj4($sr,'+init=epsg:3587'));
> var_dump(SpatialReference_ExportToWkt($sr));
> 
> outputs:
> 
> "resource(3) of type (_p_OSRSpatialReferenceShadow) int(0) int(0)"
> 
> In python, I can do the following:
> 
> srs = osgeo.osr.SpatialReference()
> srs.ImportFromProj4('+init=epsg:3587')
> print srs.ExportToWkt()
> 
> And I get the following output:
> 
> "GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,2
> 98 .2
> 57223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]"
> 
> So maybe I just don't know how to interact with the spatial reference
> object within the PHP environment.  Any further suggestions here?
> 
> Regards,
> Mike
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110224/fc90cb13/attachment-0001.html
From brfr at metrico.lu  Fri Feb 25 04:34:38 2011
From: brfr at metrico.lu (Frank Broniewski)
Date: Fri Feb 25 04:34:37 2011
Subject: [gdal-dev] [python-ogr] GML attributes are missing
Message-ID: <4D6777AE.4070205@metrico.lu>

Hello,

I have a problem when converting datasources from one format to GML. 
Whenever I export my source datasource to a GML - datasource the 
attributes of the features are missing in the resulting gml file. Other 
exports to formats like shapefile, kml or geojson have the attributes 
included. When I use ogr2ogr the gml has attributes included. So my 
question is: What's the difference between e.g. a kml and a gml 
outputformat and why does one have attributes and the other doesn't?
I tried on windows using gdal 1.8 and on Hardy 8.04 with 1.7.x, and on 
both there're no attributes with the gml.

I use the following code to transform from one format to another:


target_driver = driver_by_name(target_format_name)
target_datasource = create_datasource(target_driver, output_destination)

for layer in iterate_layers(source_datasource):
     layer_name = layer.GetName()
     geometry_type = get_geometry_type(layer)
     target_layer = target_datasource.CreateLayer(layer_name, source_srs,
                                                  geometry_type)
     feature_definition = layer.GetLayerDefn()
     for feature in iterate_features(layer):
         target_feature = ogr.Feature(feature_definition)
         target_feature.SetFrom(feature)
         target_feature.SetFID(feature.GetFID())

         if transformation is not None:
             geometry_reference = feature.GetGeometryRef()
             geometry = geometry_reference.Clone()
             geometry.Transform(transformation)
             target_feature.SetGeometryDirectly(geometry)

         target_layer.CreateFeature(target_feature)


Full code:
http://paste.pocoo.org/show/344283/
Python test file
http://paste.pocoo.org/show/344284/



Frank




-- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
From even.rouault at mines-paris.org  Fri Feb 25 05:34:41 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Feb 25 05:34:50 2011
Subject: [gdal-dev] [python-ogr] GML attributes are missing
In-Reply-To: <4D6777AE.4070205@metrico.lu>
References: <4D6777AE.4070205@metrico.lu>
Message-ID: <1298630081.4d6785c12e6a0@webmail.free.fr>

Selon Frank Broniewski <brfr@metrico.lu>:

> Hello,
>
> I have a problem when converting datasources from one format to GML.
> Whenever I export my source datasource to a GML - datasource the
> attributes of the features are missing in the resulting gml file. Other
> exports to formats like shapefile, kml or geojson have the attributes
> included. When I use ogr2ogr the gml has attributes included. So my
> question is: What's the difference between e.g. a kml and a gml
> outputformat and why does one have attributes and the other doesn't?
> I tried on windows using gdal 1.8 and on Hardy 8.04 with 1.7.x, and on
> both there're no attributes with the gml.

Watching the below code, I'm in fact surprised that it actually works with
shapefile, kml or geojson...

I'm really surprised for shapefile since the call to Layer.CreateField() is
needed to create the appropriate columns in the .DBF. For GeoJSON, from a quick
code review, it might indeed work but you shouldn't rely on that. For KML, I
guess you only get the Name and Description but not ExtendedData.

>
> I use the following code to transform from one format to another:
>
>
> target_driver = driver_by_name(target_format_name)
> target_datasource = create_datasource(target_driver, output_destination)
>
> for layer in iterate_layers(source_datasource):
>      layer_name = layer.GetName()
>      geometry_type = get_geometry_type(layer)
>      target_layer = target_datasource.CreateLayer(layer_name, source_srs,
>                                                   geometry_type)

# At that point, the layer has no fields.

>      feature_definition = layer.GetLayerDefn()

Here you need to use target_layer.CreateField() to create the fields of the
target_layer based on the source layer feature definition.
Something like (untested. might need some minor adjustments on method names)

       # Populate the target layer with field definitions coming from the source
layer definition
       for i in range(feature_definition.GetFieldCount()):
            target_layer.CreateField(feature_definition.GetFieldDefn(i))

       # Now fetch the resulting target feature definition
       target_feature_definition = target_layer.GetLayerDefn()

>      for feature in iterate_features(layer):


>          target_feature = ogr.Feature(feature_definition)

Here's the error : you create a target_feature with the source layer feature
definition. This is bound to fail (and possibly even crash). Replace with :
           target_feature = ogr.Feature(target_feature_definition)

>          target_feature.SetFrom(feature)
>          target_feature.SetFID(feature.GetFID())
>
>          if transformation is not None:
>              geometry_reference = feature.GetGeometryRef()
>              geometry = geometry_reference.Clone()
>              geometry.Transform(transformation)
>              target_feature.SetGeometryDirectly(geometry)
>
>          target_layer.CreateFeature(target_feature)
>
>
> Full code:
> http://paste.pocoo.org/show/344283/
> Python test file
> http://paste.pocoo.org/show/344284/

We should probably add some testing (in the binding code possibly, or deeper in
OGR) to check that the feature passed to Layer.CreateFeature() has a feature
definition matching the Layer.GetLayerDefn(). I would think that most (if not
all) drivers relies on that assumpution, although I don't see it explicitely
documented in
http://gdal.org/ogr/ogr__api_8h.html#301d319111285a47fe6cda6e079214f8

>
>
>
> Frank
>
>
>
>
> --
> Frank BRONIEWSKI
>
> METRICO s.?? r.l.
> g??om??tres
> technologies d'information g??ographique
> rue des Romains 36
> L-5433 NIEDERDONVEN
>
> t??l.: +352 26 74 94 - 28
> fax.: +352 26 74 94 99
> http://www.metrico.lu
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From brfr at metrico.lu  Fri Feb 25 07:57:56 2011
From: brfr at metrico.lu (Frank Broniewski)
Date: Fri Feb 25 07:57:54 2011
Subject: [gdal-dev] [python-ogr] GML attributes are missing
In-Reply-To: <1298630081.4d6785c12e6a0@webmail.free.fr>
References: <4D6777AE.4070205@metrico.lu>
	<1298630081.4d6785c12e6a0@webmail.free.fr>
Message-ID: <4D67A754.1050708@metrico.lu>

Even,

merci beaucoup for your continuous help and support! Creating the fields 
on the target layer and using the feature definition from the target 
layer does indeed help :-). I even looked at the corresponding part in 
ogr2ogr.py before writing to the list but I didn't realise that this 
part was not implemented in my code. Many thanks again!

Frank


Am 25.02.2011 11:34, schrieb Even Rouault:
> Selon Frank Broniewski<brfr@metrico.lu>:
>
>> Hello,
>>
>> I have a problem when converting datasources from one format to GML.
>> Whenever I export my source datasource to a GML - datasource the
>> attributes of the features are missing in the resulting gml file. Other
>> exports to formats like shapefile, kml or geojson have the attributes
>> included. When I use ogr2ogr the gml has attributes included. So my
>> question is: What's the difference between e.g. a kml and a gml
>> outputformat and why does one have attributes and the other doesn't?
>> I tried on windows using gdal 1.8 and on Hardy 8.04 with 1.7.x, and on
>> both there're no attributes with the gml.
>
> Watching the below code, I'm in fact surprised that it actually works with
> shapefile, kml or geojson...
>
> I'm really surprised for shapefile since the call to Layer.CreateField() is
> needed to create the appropriate columns in the .DBF. For GeoJSON, from a quick
> code review, it might indeed work but you shouldn't rely on that. For KML, I
> guess you only get the Name and Description but not ExtendedData.
>
>>
>> I use the following code to transform from one format to another:
>>
>>
>> target_driver = driver_by_name(target_format_name)
>> target_datasource = create_datasource(target_driver, output_destination)
>>
>> for layer in iterate_layers(source_datasource):
>>       layer_name = layer.GetName()
>>       geometry_type = get_geometry_type(layer)
>>       target_layer = target_datasource.CreateLayer(layer_name, source_srs,
>>                                                    geometry_type)
>
> # At that point, the layer has no fields.
>
>>       feature_definition = layer.GetLayerDefn()
>
> Here you need to use target_layer.CreateField() to create the fields of the
> target_layer based on the source layer feature definition.
> Something like (untested. might need some minor adjustments on method names)
>
>         # Populate the target layer with field definitions coming from the source
> layer definition
>         for i in range(feature_definition.GetFieldCount()):
>              target_layer.CreateField(feature_definition.GetFieldDefn(i))
>
>         # Now fetch the resulting target feature definition
>         target_feature_definition = target_layer.GetLayerDefn()
>
>>       for feature in iterate_features(layer):
>
>
>>           target_feature = ogr.Feature(feature_definition)
>
> Here's the error : you create a target_feature with the source layer feature
> definition. This is bound to fail (and possibly even crash). Replace with :
>             target_feature = ogr.Feature(target_feature_definition)
>
>>           target_feature.SetFrom(feature)
>>           target_feature.SetFID(feature.GetFID())
>>
>>           if transformation is not None:
>>               geometry_reference = feature.GetGeometryRef()
>>               geometry = geometry_reference.Clone()
>>               geometry.Transform(transformation)
>>               target_feature.SetGeometryDirectly(geometry)
>>
>>           target_layer.CreateFeature(target_feature)
>>
>>
>> Full code:
>> http://paste.pocoo.org/show/344283/
>> Python test file
>> http://paste.pocoo.org/show/344284/
>
> We should probably add some testing (in the binding code possibly, or deeper in
> OGR) to check that the feature passed to Layer.CreateFeature() has a feature
> definition matching the Layer.GetLayerDefn(). I would think that most (if not
> all) drivers relies on that assumpution, although I don't see it explicitely
> documented in
> http://gdal.org/ogr/ogr__api_8h.html#301d319111285a47fe6cda6e079214f8
>
>>
>>
>>
>> Frank
>>
>>
>>
>>
>> --
>> Frank BRONIEWSKI
>>
>> METRICO s.?  r.l.
>> g??om??tres
>> technologies d'information g??ographique
>> rue des Romains 36
>> L-5433 NIEDERDONVEN
>>
>> t??l.: +352 26 74 94 - 28
>> fax.: +352 26 74 94 99
>> http://www.metrico.lu
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>


-- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
From chaitanya.ch at gmail.com  Fri Feb 25 08:22:43 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Feb 25 08:22:47 2011
Subject: [gdal-dev] Re: [Qgis-developer] Issue saving shapefiles with
	REAL15 values
In-Reply-To: <op.vrbff61ona7rjy@anita-pc>
References: <op.vra0dm1jna7rjy@anita-pc>
	<1298377151.4158.74.camel@ursus.ufficio.net>
	<op.vra1coaona7rjy@anita-pc>
	<AANLkTimd6tCffkxO9V7orWX73Wmny3WjaWv0u-Dtm7=3@mail.gmail.com>
	<op.vrbabk1qna7rjy@anita-pc>
	<AANLkTimrRrPtoBO4B6u+diubcoAAMVcKyiF=SfR5BvwY@mail.gmail.com>
	<op.vrbff61ona7rjy@anita-pc>
Message-ID: <AANLkTin39eTmX8xRU5OZLb4pEUHcQKJgscoTzqucabY0@mail.gmail.com>

Anita,

OGR's shapefile driver is reading the large values correctly is able to
display them with ogrinfo.
However, newly created .dbf files get the value -2147483648.

You can track further development regarding this at
http://trac.osgeo.org/gdal/ticket/3982

On Fri, Feb 25, 2011 at 3:04 AM, Anita Graser <anitagraser@gmx.at> wrote:

> Hi,
>
> Thanks for your help. I've attached a sample with faulty values
>
> Best wishes,
>
> Anita
>
>
> Am 22.02.2011, 17:39 Uhr, schrieb Chaitanya kumar CH <chaitanya.ch@
> gmail.com>:
>
>
>  Anita,
>>
>> Is it possible to send a small sample data to my email for testing?
>> Doesn't
>> matter if the ID field values are wrong.
>>
>> On Tue, Feb 22, 2011 at 9:21 PM, Anita Graser <anitagraser@gmx.at> wrote:
>>
>>  Hi,
>>>
>>> I used the following ogr2ogr command:
>>>
>>> ogr2ogr -sql "select * from nw where NAME = 'Am Johannesberg'" new.shp
>>> nw.shp
>>>
>>> The resulting shp contains correct geometries, but the values in
>>> ID,N,15,0
>>> fields are broken.
>>>
>>> I guess that shows that it's a GDAL/OGR problem.
>>>
>>> Thanks, best wishes,
>>> Anita
>>>
>>>
>>> Am 22.02.2011, 16:33 Uhr, schrieb Chaitanya kumar CH <chaitanya.ch@
>>> gmail.com>:
>>>
>>>
>>>  Anita,
>>>
>>>>
>>>> First, let us isolate the source of this error. QGIS or GDAL/OGR.
>>>> Use ogr2ogr to clip the part you did with QGIS. See the extents of the
>>>> clipped shapefile using ogrinfo and use it with the ogr2ogr utility.
>>>> http://www.gdal.org/ogr2ogr.html
>>>>
>>>>
>>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>


-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110225/e7814d40/attachment.html
From SGONG at mdacorporation.com  Fri Feb 25 09:38:23 2011
From: SGONG at mdacorporation.com (Shawn Gong)
Date: Fri Feb 25 09:38:37 2011
Subject: [gdal-dev] image header UL,LL,UR,LR
In-Reply-To: <4D66CE28.4060608@pobox.com>
References: <33584A1DEF4341428D15C1273466D323552D1A58@EVSYVR1.ds.mda.ca>,
	<4D66CE28.4060608@pobox.com>
Message-ID: <33584A1DEF4341428D15C1273466D323552D1A5B@EVSYVR1.ds.mda.ca>

Thank you, Frank.


Shawn

________________________________________
From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam [warmerdam@pobox.com]
Sent: Thursday, February 24, 2011 4:31 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] image header UL,LL,UR,LR

On 11-02-24 04:16 PM, Shawn Gong wrote:
> Hi list,
>
> I have a flat binary image "HH.img" and a HH.aux header
>
> The header file looks like:
> AuxiliaryTarget: HH.img
> RawDefinition: 1492 1680 1
> ChanDefinition-1: 32R 0 4 5968 Unswapped
> ChanDesc-1: HH intensity
> SegDesc-1-0: Contents Not Specified
> MapUnits: LONG/LAT    D-04
> UpLeftX: -5.601451
> UpLeftY: 36.098471
> UpRightX: -5.305277
> UpRightY: 36.148817
> LoLeftX: -5.522707
> LoLeftY: 35.800948
> LoRightX: -5.227759
> LoRightY: 35.851245
> ProjParms: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 4
>
> gdalinfo does not give the right corner coordinates.
> what changes do I have to make for gdal to ingest?
> (I can use gdal_translate, but try to avoid that route)

Shawn,

The PCI .aux file is only intended to be used with "north up"
images.  I see your corner coordinates are not regular.  For instance
the longitude of the upper left and lower left corner are not the same.

You could wrap the same dataset in a "raw" VRT and associate GCPs
with it to identify the corner coordinates instead of trying to set
a geotransform.  Scan down to the raw file part of:

   http://www.gdal.org/gdal_vrttut.html

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From sritchie09 at gmail.com  Fri Feb 25 15:02:06 2011
From: sritchie09 at gmail.com (Sam Ritchie)
Date: Fri Feb 25 15:02:27 2011
Subject: [gdal-dev] Building Java Bindings for use with "apt-get gdal-bin"
In-Reply-To: <201102241956.53631.even.rouault@mines-paris.org>
References: <AANLkTi=rLeBEB3OHipymTakYG-aS8GKLg32R61greAcx@mail.gmail.com>
	<201102241956.53631.even.rouault@mines-paris.org>
Message-ID: <AANLkTinvvR5aqmOioDkKtwJKaDaDci66JDsUvOt5QBLP@mail.gmail.com>

Even,

Thanks for the response, and sorry for my late reply, here.

What you write makes sense, especially after processing this problem a bit
further. As you mentioned, libgdal1-XXXX was installed by apt-get... the
problem here is that apt-get has libgdal1-1.5.0, and I was building java
bindings for 1.8.0.

What would it take to upgrade these packages? The issue for my workflow now
is that I need access to 1.8.0, so I'll currently have to keep a custom AMI,
with gdal built from source. I'd be happy to do the work to upgrade these
packages to 1.8.0. Any thoughts?

Best,
Sam

On Thu, Feb 24, 2011 at 1:56 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le jeudi 24 f?vrier 2011 16:51:12, Sam Ritchie a ?crit :
> > Hey all,
> >
> > QUICK VERSION:
> > When I build the java bindings for gdal, what native dependencies do I
> need
> > to transfer over to another machine (with an identical install location)
> to
> > get them to run?
> >
> > LONG VERSION:
> > I'm working on an application that requires the java bindings for gdal
> > 1.8.0 to be packaged up with the app, along with the native libraries.
> > Now! I've actually accomplished this on Mac OS X -- rather than building
> > from source on each machine, I was able to pull the macports version of
> > gdal using
> >
> > sudo port install gdal +hdf4 +universal
> >
> > then build from source, with --prefix=/opt/local, or the location of that
> > macports variant. Once the bindings had the proper location, I was able
> to
> > bundle them up inside my jar file and distribute them to other machines.
> > (As long as the *.dylib files are on java's library path, all is well.)
> >
> > My issue is, I'm having a bit of trouble doing the same thing with linux.
> > I've installed gdal-bin with
> >
> > sudo apt-get gdal-bin
> >
> > And can verify that gdalinfo works, for one of the HDF files I need to
> > process. Good news there.
> >
> > I then built the java bindings from source using
> >
> > ./configure --prefix=/usr --with-threads --disable-netcdf
> --disable-fortran
> > --with-hdf4=/usr
> > make
> > cd swig/java
> > make
> >
> > (After modifiying swig/java/java.opt to point to my native java install.)
> >
> > To make these bindings work on some other machine, I know that I need the
> > four *.so files -- after I run "make" inside gdal/swig/java, though, I
> end
> > up with three versions of each file:
> >
> > libgdalconstjni.so
> > libgdalconstjni.so.1.15.0
> > libgdalconstjni.so.1
> >
> > etc.
> >
> > Now, it looks like the first two (.so and .so.1.15.0) are symlinked to
> the
> > *.so.1 file -- if I try to bundle either of these and run my project on a
> > fresh machine (without the built source, but after running "sudo apt-get
> > gdal-bin") and use them, I get
> >
> > java.lang.UnsatisfiedLinkError:
> > /root/forma-hadoop/lib/native/libgdaljni.so: libgdal.so.1: cannot open
> > shared object file: No such file or directory
> >
> > I'm stuck, here. I don't know what libgdal.so.1 is
>
> well, I thought that would have been pretty obvious ;-). This is the GDAL
> shared object used by language bindings and gdal command line utilities
> (and
> all other programs relying on GDAL).
>
> > , or where it sits.
>
> You should likely found it in /usr/lib. It should be installed there by the
> libgdal1-XXXX (XXXX being the GDAL version of your Debian/Ubuntu install)
> package, which is itself a dependency that should be installed when
> installing
> gdal-bin.
>
> So if I have understood well your process, what you have done should
> work...
>
> One way to check is to 'ldd libgdaljni.so' and do what is necessary to
> remove
> any "not found" dependency.
>
> > Do I
> > need to bundle this up as well?
>
> libgdal.so.1 definitely needs to be available for the bindings to work.
> Then it
> depends on the context if you suppose that the user has it installed
> through
> the package manager, or if you must bundle it yourself ala FWTools for
> Linux.
>
> > More generally, what files do the bindings
> > depend on to actually link to the gdal binaries?
>
> libgdaljni.so, libogrjni.so and etc.. will link to libgdal and its library
> dependencies (which depend on the exact GDAL build)
>
> >
> > (My final step, hopefully the working step, is to bundle up the (*.so.1)
> > files, clean, and try again. This worked with OS X, but on OS X I never
> saw
> > a reference to "libgdal", without the jni extension.)
> >
> > Sorry for such a long email. I plan on doing a blog post detailing all of
> > this work, and putting the final jar file, with OS X and linux
> dependencies
> > for 1.8, up in a maven repository after this all works out.
> >
> > Best,
> > Sam
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110225/b11fc81a/attachment.html
From even.rouault at mines-paris.org  Fri Feb 25 15:11:18 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Feb 25 15:11:45 2011
Subject: [gdal-dev] Building Java Bindings for use with "apt-get gdal-bin"
In-Reply-To: <AANLkTinvvR5aqmOioDkKtwJKaDaDci66JDsUvOt5QBLP@mail.gmail.com>
References: <AANLkTi=rLeBEB3OHipymTakYG-aS8GKLg32R61greAcx@mail.gmail.com>
	<201102241956.53631.even.rouault@mines-paris.org>
	<AANLkTinvvR5aqmOioDkKtwJKaDaDci66JDsUvOt5QBLP@mail.gmail.com>
Message-ID: <201102252111.18273.even.rouault@mines-paris.org>

Le vendredi 25 f?vrier 2011 21:02:06, Sam Ritchie a ?crit :
> Even,
> 
> Thanks for the response, and sorry for my late reply, here.
> 
> What you write makes sense, especially after processing this problem a bit
> further. As you mentioned, libgdal1-XXXX was installed by apt-get... the
> problem here is that apt-get has libgdal1-1.5.0, and I was building java
> bindings for 1.8.0.

Yes, Java bindings for 1.8.0 require GDAL 1.8.0 lib.

> 
> What would it take to upgrade these packages? The issue for my workflow now
> is that I need access to 1.8.0, so I'll currently have to keep a custom
> AMI, with gdal built from source. I'd be happy to do the work to upgrade
> these packages to 1.8.0. Any thoughts?

Well, there's the UbuntuGIS PPA that ships with GDAL 1.7.3. I guess that they 
will end up updating to 1.8.0 in some time. You could ask to the osgeo 
'ubuntu' list what their plan is.

If you want to be your own master and not depend on distro packages, you could 
also follow the cookbook made by Frank Warmerdam to build the latest FWTools 
3.0.X for Linux and add Java bindings support in it. See the "How FWTools is 
Built" section in http://fwtools.maptools.org/linux-experimental.html

> 
> Best,
> Sam
> 
> On Thu, Feb 24, 2011 at 1:56 PM, Even Rouault
> 
> <even.rouault@mines-paris.org>wrote:
> > Le jeudi 24 f?vrier 2011 16:51:12, Sam Ritchie a ?crit :
> > > Hey all,
> > > 
> > > QUICK VERSION:
> > > When I build the java bindings for gdal, what native dependencies do I
> > 
> > need
> > 
> > > to transfer over to another machine (with an identical install
> > > location)
> > 
> > to
> > 
> > > get them to run?
> > > 
> > > LONG VERSION:
> > > I'm working on an application that requires the java bindings for gdal
> > > 1.8.0 to be packaged up with the app, along with the native libraries.
> > > Now! I've actually accomplished this on Mac OS X -- rather than
> > > building from source on each machine, I was able to pull the macports
> > > version of gdal using
> > > 
> > > sudo port install gdal +hdf4 +universal
> > > 
> > > then build from source, with --prefix=/opt/local, or the location of
> > > that macports variant. Once the bindings had the proper location, I
> > > was able
> > 
> > to
> > 
> > > bundle them up inside my jar file and distribute them to other
> > > machines. (As long as the *.dylib files are on java's library path,
> > > all is well.)
> > > 
> > > My issue is, I'm having a bit of trouble doing the same thing with
> > > linux. I've installed gdal-bin with
> > > 
> > > sudo apt-get gdal-bin
> > > 
> > > And can verify that gdalinfo works, for one of the HDF files I need to
> > > process. Good news there.
> > > 
> > > I then built the java bindings from source using
> > > 
> > > ./configure --prefix=/usr --with-threads --disable-netcdf
> > 
> > --disable-fortran
> > 
> > > --with-hdf4=/usr
> > > make
> > > cd swig/java
> > > make
> > > 
> > > (After modifiying swig/java/java.opt to point to my native java
> > > install.)
> > > 
> > > To make these bindings work on some other machine, I know that I need
> > > the four *.so files -- after I run "make" inside gdal/swig/java,
> > > though, I
> > 
> > end
> > 
> > > up with three versions of each file:
> > > 
> > > libgdalconstjni.so
> > > libgdalconstjni.so.1.15.0
> > > libgdalconstjni.so.1
> > > 
> > > etc.
> > > 
> > > Now, it looks like the first two (.so and .so.1.15.0) are symlinked to
> > 
> > the
> > 
> > > *.so.1 file -- if I try to bundle either of these and run my project on
> > > a fresh machine (without the built source, but after running "sudo
> > > apt-get gdal-bin") and use them, I get
> > > 
> > > java.lang.UnsatisfiedLinkError:
> > > /root/forma-hadoop/lib/native/libgdaljni.so: libgdal.so.1: cannot open
> > > shared object file: No such file or directory
> > > 
> > > I'm stuck, here. I don't know what libgdal.so.1 is
> > 
> > well, I thought that would have been pretty obvious ;-). This is the GDAL
> > shared object used by language bindings and gdal command line utilities
> > (and
> > all other programs relying on GDAL).
> > 
> > > , or where it sits.
> > 
> > You should likely found it in /usr/lib. It should be installed there by
> > the libgdal1-XXXX (XXXX being the GDAL version of your Debian/Ubuntu
> > install) package, which is itself a dependency that should be installed
> > when installing
> > gdal-bin.
> > 
> > So if I have understood well your process, what you have done should
> > work...
> > 
> > One way to check is to 'ldd libgdaljni.so' and do what is necessary to
> > remove
> > any "not found" dependency.
> > 
> > > Do I
> > > need to bundle this up as well?
> > 
> > libgdal.so.1 definitely needs to be available for the bindings to work.
> > Then it
> > depends on the context if you suppose that the user has it installed
> > through
> > the package manager, or if you must bundle it yourself ala FWTools for
> > Linux.
> > 
> > > More generally, what files do the bindings
> > > depend on to actually link to the gdal binaries?
> > 
> > libgdaljni.so, libogrjni.so and etc.. will link to libgdal and its
> > library dependencies (which depend on the exact GDAL build)
> > 
> > > (My final step, hopefully the working step, is to bundle up the
> > > (*.so.1) files, clean, and try again. This worked with OS X, but on OS
> > > X I never
> > 
> > saw
> > 
> > > a reference to "libgdal", without the jni extension.)
> > > 
> > > Sorry for such a long email. I plan on doing a blog post detailing all
> > > of this work, and putting the final jar file, with OS X and linux
> > 
> > dependencies
> > 
> > > for 1.8, up in a maven repository after this all works out.
> > > 
> > > Best,
> > > Sam
From sritchie09 at gmail.com  Fri Feb 25 15:49:35 2011
From: sritchie09 at gmail.com (Sam Ritchie)
Date: Fri Feb 25 15:50:00 2011
Subject: [gdal-dev] Building Java Bindings for use with "apt-get gdal-bin"
In-Reply-To: <201102252111.18273.even.rouault@mines-paris.org>
References: <AANLkTi=rLeBEB3OHipymTakYG-aS8GKLg32R61greAcx@mail.gmail.com>
	<201102241956.53631.even.rouault@mines-paris.org>
	<AANLkTinvvR5aqmOioDkKtwJKaDaDci66JDsUvOt5QBLP@mail.gmail.com>
	<201102252111.18273.even.rouault@mines-paris.org>
Message-ID: <AANLkTi=xM+gpnASr9BtV4KHKQtvJb5UkN-nsxA2pnfxY@mail.gmail.com>

A custom build of fwtools sounds like the perfect solution, here. Then my
bootstrap procedure consists of downloading my FWTools build, opening it up,
running ./install.sh and adding the directory to the path (to allow access
to the libraries).

Thanks, Even, this is great!

On Fri, Feb 25, 2011 at 3:11 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le vendredi 25 f?vrier 2011 21:02:06, Sam Ritchie a ?crit :
> > Even,
> >
> > Thanks for the response, and sorry for my late reply, here.
> >
> > What you write makes sense, especially after processing this problem a
> bit
> > further. As you mentioned, libgdal1-XXXX was installed by apt-get... the
> > problem here is that apt-get has libgdal1-1.5.0, and I was building java
> > bindings for 1.8.0.
>
> Yes, Java bindings for 1.8.0 require GDAL 1.8.0 lib.
>
> >
> > What would it take to upgrade these packages? The issue for my workflow
> now
> > is that I need access to 1.8.0, so I'll currently have to keep a custom
> > AMI, with gdal built from source. I'd be happy to do the work to upgrade
> > these packages to 1.8.0. Any thoughts?
>
> Well, there's the UbuntuGIS PPA that ships with GDAL 1.7.3. I guess that
> they
> will end up updating to 1.8.0 in some time. You could ask to the osgeo
> 'ubuntu' list what their plan is.
>
> If you want to be your own master and not depend on distro packages, you
> could
> also follow the cookbook made by Frank Warmerdam to build the latest
> FWTools
> 3.0.X for Linux and add Java bindings support in it. See the "How FWTools
> is
> Built" section in http://fwtools.maptools.org/linux-experimental.html
>
> >
> > Best,
> > Sam
> >
> > On Thu, Feb 24, 2011 at 1:56 PM, Even Rouault
> >
> > <even.rouault@mines-paris.org>wrote:
> > > Le jeudi 24 f?vrier 2011 16:51:12, Sam Ritchie a ?crit :
> > > > Hey all,
> > > >
> > > > QUICK VERSION:
> > > > When I build the java bindings for gdal, what native dependencies do
> I
> > >
> > > need
> > >
> > > > to transfer over to another machine (with an identical install
> > > > location)
> > >
> > > to
> > >
> > > > get them to run?
> > > >
> > > > LONG VERSION:
> > > > I'm working on an application that requires the java bindings for
> gdal
> > > > 1.8.0 to be packaged up with the app, along with the native
> libraries.
> > > > Now! I've actually accomplished this on Mac OS X -- rather than
> > > > building from source on each machine, I was able to pull the macports
> > > > version of gdal using
> > > >
> > > > sudo port install gdal +hdf4 +universal
> > > >
> > > > then build from source, with --prefix=/opt/local, or the location of
> > > > that macports variant. Once the bindings had the proper location, I
> > > > was able
> > >
> > > to
> > >
> > > > bundle them up inside my jar file and distribute them to other
> > > > machines. (As long as the *.dylib files are on java's library path,
> > > > all is well.)
> > > >
> > > > My issue is, I'm having a bit of trouble doing the same thing with
> > > > linux. I've installed gdal-bin with
> > > >
> > > > sudo apt-get gdal-bin
> > > >
> > > > And can verify that gdalinfo works, for one of the HDF files I need
> to
> > > > process. Good news there.
> > > >
> > > > I then built the java bindings from source using
> > > >
> > > > ./configure --prefix=/usr --with-threads --disable-netcdf
> > >
> > > --disable-fortran
> > >
> > > > --with-hdf4=/usr
> > > > make
> > > > cd swig/java
> > > > make
> > > >
> > > > (After modifiying swig/java/java.opt to point to my native java
> > > > install.)
> > > >
> > > > To make these bindings work on some other machine, I know that I need
> > > > the four *.so files -- after I run "make" inside gdal/swig/java,
> > > > though, I
> > >
> > > end
> > >
> > > > up with three versions of each file:
> > > >
> > > > libgdalconstjni.so
> > > > libgdalconstjni.so.1.15.0
> > > > libgdalconstjni.so.1
> > > >
> > > > etc.
> > > >
> > > > Now, it looks like the first two (.so and .so.1.15.0) are symlinked
> to
> > >
> > > the
> > >
> > > > *.so.1 file -- if I try to bundle either of these and run my project
> on
> > > > a fresh machine (without the built source, but after running "sudo
> > > > apt-get gdal-bin") and use them, I get
> > > >
> > > > java.lang.UnsatisfiedLinkError:
> > > > /root/forma-hadoop/lib/native/libgdaljni.so: libgdal.so.1: cannot
> open
> > > > shared object file: No such file or directory
> > > >
> > > > I'm stuck, here. I don't know what libgdal.so.1 is
> > >
> > > well, I thought that would have been pretty obvious ;-). This is the
> GDAL
> > > shared object used by language bindings and gdal command line utilities
> > > (and
> > > all other programs relying on GDAL).
> > >
> > > > , or where it sits.
> > >
> > > You should likely found it in /usr/lib. It should be installed there by
> > > the libgdal1-XXXX (XXXX being the GDAL version of your Debian/Ubuntu
> > > install) package, which is itself a dependency that should be installed
> > > when installing
> > > gdal-bin.
> > >
> > > So if I have understood well your process, what you have done should
> > > work...
> > >
> > > One way to check is to 'ldd libgdaljni.so' and do what is necessary to
> > > remove
> > > any "not found" dependency.
> > >
> > > > Do I
> > > > need to bundle this up as well?
> > >
> > > libgdal.so.1 definitely needs to be available for the bindings to work.
> > > Then it
> > > depends on the context if you suppose that the user has it installed
> > > through
> > > the package manager, or if you must bundle it yourself ala FWTools for
> > > Linux.
> > >
> > > > More generally, what files do the bindings
> > > > depend on to actually link to the gdal binaries?
> > >
> > > libgdaljni.so, libogrjni.so and etc.. will link to libgdal and its
> > > library dependencies (which depend on the exact GDAL build)
> > >
> > > > (My final step, hopefully the working step, is to bundle up the
> > > > (*.so.1) files, clean, and try again. This worked with OS X, but on
> OS
> > > > X I never
> > >
> > > saw
> > >
> > > > a reference to "libgdal", without the jni extension.)
> > > >
> > > > Sorry for such a long email. I plan on doing a blog post detailing
> all
> > > > of this work, and putting the final jar file, with OS X and linux
> > >
> > > dependencies
> > >
> > > > for 1.8, up in a maven repository after this all works out.
> > > >
> > > > Best,
> > > > Sam
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110225/47e1725e/attachment-0001.html
From Jean-Philippe.Gauthier at ec.gc.ca  Fri Feb 25 16:09:01 2011
From: Jean-Philippe.Gauthier at ec.gc.ca (Gauthier,Jean-Philippe [CMC])
Date: Fri Feb 25 16:09:04 2011
Subject: [gdal-dev] OGR SQL problems
Message-ID: <87B835B89ADA0A45A96CD7F55BEA0B2601A4098D@ECQCMTLMAIL2.quebec.int.ec.gc.ca>


Hi all,

I think there might be a bug with the OGR_DS_ExecuteSQL call in gdal 1.8, this worked fine with 1.7 and I see you`ve rebuilt the SQL part.

I've tried a select on a CANVEC layer which looks something like this:

	ogrinfo CanVec/031/h/031h05/031h05_6_0_BS_2010009_2.shp -sql  "SELECT * FROM 031h05_6_0_BS_2010009_2"

And I get

	ERROR 1: SQL Expression Parsing Error: syntax error

I've tried many other layers and it woks fine for all of them but not for any CANVEC layer.

I'm beginning to think the underscores in the layer name might cause a problem cause it`s the only differrence I can see

Has anybody seen this behavior has well ?

Note the it does the same thing with the C API where I first stumbled on the problem

 Thanks.

================================================================
Jean-Philippe Gauthier Bilodeau		Direction des op?rations
Sp?cialiste principal,				Centre M?t?orologique Canadien
programmation scientifique et infographie	2121 Route Transcanadienne
Tel : (514) 421-4642				Dorval,Qu?bec
Fax: (514) 421-4679				H9P 1J3
Email: Jean-Philippe.Gauthier@ec.gc.ca	



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110225/0b61bd0f/attachment.html
From even.rouault at mines-paris.org  Fri Feb 25 17:11:49 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Feb 25 17:12:18 2011
Subject: [gdal-dev] OGR SQL problems
In-Reply-To: <87B835B89ADA0A45A96CD7F55BEA0B2601A4098D@ECQCMTLMAIL2.quebec.int.ec.gc.ca>
References: <87B835B89ADA0A45A96CD7F55BEA0B2601A4098D@ECQCMTLMAIL2.quebec.int.ec.gc.ca>
Message-ID: <201102252311.49882.even.rouault@mines-paris.org>

Le vendredi 25 f?vrier 2011 22:09:01, Gauthier,Jean-Philippe [CMC] a ?crit :
> Hi all,
> 
> I think there might be a bug with the OGR_DS_ExecuteSQL call in gdal 1.8,
> this worked fine with 1.7 and I see you`ve rebuilt the SQL part.
> 
> I've tried a select on a CANVEC layer which looks something like this:
> 
> 	ogrinfo CanVec/031/h/031h05/031h05_6_0_BS_2010009_2.shp -sql  "SELECT *
> FROM 031h05_6_0_BS_2010009_2"
> 
> And I get
> 
> 	ERROR 1: SQL Expression Parsing Error: syntax error
> 
> I've tried many other layers and it woks fine for all of them but not for
> any CANVEC layer.
> 
> I'm beginning to think the underscores in the layer name might cause a
> problem cause it`s the only differrence I can see

I think the issue is rather the 0 as first character of the layer name. In GDAL 
1.8.0 the SQL engine was rewritten and it seems to be stricter than the 
previous versions on what it recognizes as valid idents. You should be able to 
solve this by quoting it.

ogrinfo CanVec/031/h/031h05/031h05_6_0_BS_2010009_2.shp -sql  "SELECT * FROM 
'031h05_6_0_BS_2010009_2'"

(I've tested that Postgresql, Mysql and Sqlite also need quoting for such 
layer names)

> 
> Has anybody seen this behavior has well ?
> 
> Note the it does the same thing with the C API where I first stumbled on
> the problem
> 
>  Thanks.
> 
> ================================================================
> Jean-Philippe Gauthier Bilodeau		Direction des op?rations
> Sp?cialiste principal,				Centre M?t?orologique Canadien
> programmation scientifique et infographie	2121 Route Transcanadienne
> Tel : (514) 421-4642				Dorval,Qu?bec
> Fax: (514) 421-4679				H9P 1J3
> Email: Jean-Philippe.Gauthier@ec.gc.ca
From stephanie.jean.houser at gmail.com  Fri Feb 25 18:37:12 2011
From: stephanie.jean.houser at gmail.com (PJ Houser)
Date: Fri Feb 25 18:37:35 2011
Subject: [gdal-dev] ogr-to-osm error message
Message-ID: <AANLkTikkhQBL_Q64hO2vo6GL4Kuo+BdH=WRkRxvVTbU9@mail.gmail.com>

Hi all,

We're having this problem when we run ogr-to-osm.py. (from
http://svn.openstreetmap.org/applications/utils/import/ogr2osm/) I don't
know much about python, so the problem could be obvious. Any help would be
appreciated. Thank you.

G:\PUBLIC\OpenStreetMap\tools\
ogr-to-osm>.\run.bat -e 4326 G:\PUBLIC\OpenStreetM
ap\data\shp\trails.shp

G:\PUBLIC\OpenStreetMap\tools\ogr-to-osm>G:\PUBLIC\OpenStreetMap\tools\usr\Pytho
n26\python.exe G:\PUBLIC\OpenStreetMap\tools\ogr-to-osm\ogr2osm.py -e 4326
G:\PU
BLIC\OpenStreetMap\data\shp\trails.shp
G:\PUBLIC\OpenStreetMap\tools\usr\Python26\lib\site-packages\osgeo\gdal.py:81:
D
eprecationWarning: ogr.py was placed in a namespace, it is now available as
osge
o.ogr
  DeprecationWarning)
([('-e', '4326')], ['G:\\PUBLIC\\OpenStreetMap\\data\\shp\\trails.shp'])

Preparing to convert file G:\PUBLIC\OpenStreetMap\data\shp\trails.shp
(extension
 is shp) into G:\PUBLIC\OpenStreetMap\data\shp\trails.osm
Will assume that source data is in EPSG:4326

Parsing features

['OBJECTID', 'TRAILID', 'TRAILNAME', 'SYSTEMNAME', 'SYSTEMTYPE', 'CITYMUNI',
'CO
UNTY', 'STATE', 'STATUS', 'LENGTH', 'TRLSURFACE', 'WIDTH', 'ACCESSIBLE',
'MOTORI
ZED', 'HIKE', 'ROADBIKE', 'MTNBIKE', 'EQUESTRIAN', 'WCRAFT_MTR',
'WCRAFT_NON', '
PORTAGE', 'AGENCYNAME', 'AGENCYTYPE', 'Shape_Leng']
Got layer field definitions

Nodes: 189758
Way segments: 189888
Lines: 10287
Areas: 0

Joining segments

Simplifying line segments
Traceback (most recent call last):
  File "G:\PUBLIC\OpenStreetMap\tools\ogr-to-osm\ogr2osm.py", line 594, in
<modu
le>
    for nodeID in segmentNodes[segmentID]:
KeyError: -195887


--
PJ Houser
Trimet, GIS
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110225/31ef23ee/attachment.html
From christopher.schmidt at nokia.com  Fri Feb 25 19:35:30 2011
From: christopher.schmidt at nokia.com (christopher.schmidt@nokia.com)
Date: Fri Feb 25 19:35:44 2011
Subject: [gdal-dev] ogr-to-osm error message
In-Reply-To: <AANLkTikkhQBL_Q64hO2vo6GL4Kuo+BdH=WRkRxvVTbU9@mail.gmail.com>
References: <AANLkTikkhQBL_Q64hO2vo6GL4Kuo+BdH=WRkRxvVTbU9@mail.gmail.com>
Message-ID: <94B46F97-0172-4097-9ED9-B8B2E4CB8DE3@nokia.com>

This looks like a problem in ogr-to-osm, not related to
GDAL/OGR. These segment/node IDs appear to be created internal
to the script and are not related to GDAL/OGR. I would recommend
going to an OpenStreetMap list of some sort to ask this 
particular question.

-- Chris


On Feb 26, 2011, at 12:37 AM, ext PJ Houser wrote:

> Hi all,
> 
> We're having this problem when we run ogr-to-osm.py. (from http://svn.openstreetmap.org/applications/utils/import/ogr2osm/) I don't know much about python, so the problem could be obvious. Any help would be appreciated. Thank you.
> 
> G:\PUBLIC\OpenStreetMap\tools\
> ogr-to-osm>.\run.bat -e 4326 G:\PUBLIC\OpenStreetM
> ap\data\shp\trails.shp
> 
> G:\PUBLIC\OpenStreetMap\tools\ogr-to-osm>G:\PUBLIC\OpenStreetMap\tools\usr\Pytho
> n26\python.exe G:\PUBLIC\OpenStreetMap\tools\ogr-to-osm\ogr2osm.py -e 4326 G:\PU
> BLIC\OpenStreetMap\data\shp\trails.shp
> G:\PUBLIC\OpenStreetMap\tools\usr\Python26\lib\site-packages\osgeo\gdal.py:81: D
> eprecationWarning: ogr.py was placed in a namespace, it is now available as osge
> o.ogr
>   DeprecationWarning)
> ([('-e', '4326')], ['G:\\PUBLIC\\OpenStreetMap\\data\\shp\\trails.shp'])
> 
> Preparing to convert file G:\PUBLIC\OpenStreetMap\data\shp\trails.shp (extension
>  is shp) into G:\PUBLIC\OpenStreetMap\data\shp\trails.osm
> Will assume that source data is in EPSG:4326
> 
> Parsing features
> 
> ['OBJECTID', 'TRAILID', 'TRAILNAME', 'SYSTEMNAME', 'SYSTEMTYPE', 'CITYMUNI', 'CO
> UNTY', 'STATE', 'STATUS', 'LENGTH', 'TRLSURFACE', 'WIDTH', 'ACCESSIBLE', 'MOTORI
> ZED', 'HIKE', 'ROADBIKE', 'MTNBIKE', 'EQUESTRIAN', 'WCRAFT_MTR', 'WCRAFT_NON', '
> PORTAGE', 'AGENCYNAME', 'AGENCYTYPE', 'Shape_Leng']
> Got layer field definitions
> 
> Nodes: 189758
> Way segments: 189888
> Lines: 10287
> Areas: 0
> 
> Joining segments
> 
> Simplifying line segments
> Traceback (most recent call last):
>   File "G:\PUBLIC\OpenStreetMap\tools\ogr-to-osm\ogr2osm.py", line 594, in <modu
> le>
>     for nodeID in segmentNodes[segmentID]:
> KeyError: -195887
> 
> 
> --
> PJ Houser
> Trimet, GIS
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From hamish_b at yahoo.com  Sat Feb 26 21:24:41 2011
From: hamish_b at yahoo.com (Hamish)
Date: Sat Feb 26 21:24:45 2011
Subject: [gdal-dev] Re: [Live-demo] Image for the GDAL overview
Message-ID: <316961.34196.qm@web110001.mail.gq1.yahoo.com>

> Cameron wrote:
> > I'm also toying with creating a wordle image of the words.
> > http://www.wordle.net/

Hamish:
> that's a great idea.
> maybe a dark/light red image on top with GDAL words.
> with dark/light blue image directly below with OGR words.

hmm, the wordle site doesn't let you specify frequency, but many
e.g. blogs have that functionality. anyone know of another tool
which would help?


> I'll see what I can do with 'lynx -dump' in a loop, stand by.

see script below and results attached.

some will need to be redone by hand, with either more specific or less specific search terms:

$ grep 'GMT' format_freq.dat
GMT Compatible netCDF|678
GMT|493000000

$ grep '|$' format_freq.dat
USGS LULC Composite Theme Grid|
ERDAS Compressed Wavelets|
FARSITE LCP Format|
NADCON .los/.las|
Vexcel MFF/MFF2|
MG4 Encoded Lidar|
Northwood/VerticalMapper Grid|
Rasterlite/SQLite|
Raster Product Format/RPF (CADRG, CIB)|
Access MDB (PGeo and Geomedia capable)|
OGDI Vectors (VPF, VMAP, DCW)|


maybe log() or cap the max number of hits to filter out things
like "GMT" or "Memory"?

{{{
OGR_FORMATS="Aeronav FAA|ESRI ArcObjects|Arc/Info Binary Coverage|Arc/Info .E00 (ASCII) Coverage|Atlas BNA|AutoCAD DXF|Comma Separated Value (.csv)|DODS/OPeNDAP|EDIGEO|ESRI Personal GeoDatabase|ESRI ArcSDE|ESRI Shapefile|FMEObjects Gateway|GeoJSON|G?oconcept Export|Geomedia .mdb|GeoRSS|GML|GMT|GPSBabel|GPX|GRASS|GPSTrackMaker|Hydrographic Transfer Format|Informix DataBlade|INTERLIS|INGRES|KML|LIBKML|Mapinfo Microstation DGN|Access MDB (PGeo and Geomedia capable)|Memory|MySQL|NAS - ALKIS|Oracle Spatial|ODBC|MS SQL Spatial|OGDI Vectors (VPF, VMAP, DCW)|OpenAir|PCI Geomatics Database File|PDS|PGDump|PostgreSQL/PostGIS|EPIInfo .REC|S-57 (ENC)|SDTS|Norwegian SOSI Standard|SQLite/SpatiaLite|SUA|UK .NTF|U.S. Census TIGER|VFK|VRT - Virtual Datasource|OGC WFS (Web Feature Service)|X-Plane/Flighgear"
GDAL_FORMATS="Arc/Info ASCII Grid|ACE2|ADRG/ARC Digitilized Raster Graphics|Arc/Info Binary Grid|AIRSAR Polarimetric|Magellan BLX Topo|Bathymetry Attributed Grid|Microsoft Windows Device Independent Bitmap|BSB Nautical Chart Format|VTP Binary Terrain Format|CEOS (Spot for instance)|DRDC COASP SAR Processor Raster|TerraSAR-X Complex SAR Data Product|Convair PolGASP data|USGS LULC Composite Theme Grid|Spot DIMAP|ELAS DIPEx|DODS/OPeNDAP|First Generation USGS DOQ|New Labelled USGS DOQ|Military Elevation Data|ERDAS Compressed Wavelets|ESRI .hdr Labelled|Erdas Imagine Raw|NASA ELAS|ENVI .hdr Labelled Raster|Epsilon - Wavelet compressed images|ERMapper|Envisat Image Product|EOSAT FAST Format|FIT|FITS|Fuji BAS Scanner Image|Generic Binary (.hdr Labelled)|Oracle Spatial GeoRaster|GSat File Format|Graphics Interchange Format|WMO GRIB1/GRIB2|GMT Compatible netCDF|GRASS Rasters|GRASS ASCII Grid|Golden Software ASCII Grid|Golden Software Binary Grid|GSC
 Geogrid|TIFF|BigTIFF|GeoTIFF|NOAA .gtx|GXF/Grid eXchange File|HDF4|HDF5|HF2/HFZ heightfield raster|Erdas Imagine|Image Display and Analysis (WinDisp)|ILWIS Raster Map|Intergraph Raster|USGS Astrogeology ISIS cube|JAXA PALSAR Product Reader|Japanese DEM|JPEG JFIF|JPEG-LS|JPEG2000|ECW|KAK|MrSID|OpenJPEG|JPIP|KMLSUPEROVERLAY|NOAA Polar Orbiter Level 1b Data Set (AVHRR)|Erdas .LAN and .GIS|FARSITE LCP Format|Daylon Leveller Heightfield|NADCON .los/.las|In Memory Raster|Vexcel MFF/MFF2|MG4 Encoded Lidar|Multi-resolution Seamless Image Database|Meteosat Second Generation|EUMETSAT Archive native|NLAPS Data Format|NITF|NetCDF|NTv2|Northwood/VerticalMapper Grid|OGDI Bridge|OZI OZF2/OZFX3|PCI .aux Labelled|PCI Geomatics Database File|PCRaster|Geospatial PDF|NASA Planetary Data System|Portable Network Graphics|PostGIS Raster|Netpbm|R Object Data Store|Rasdaman|Rasterlite/SQLite|Swedish Grid RIK|Raster Matrix Format|Raster Product Format/RPF (CADRG, CIB)|RadarSat2
 XML|Idrisi Raster|SAGA Binary|SAR CEOS|ArcSDE Raster|USGS SDTS DEM|SGI Image|Standard Raster Product (ASRP/USRP)|SRTM HGT|Terragen Heightfield|Terralib|EarthWatch/DigitalGlobe|TerraSAR-X Product|USGS ASCII DEM / CDED|GDAL Virtual|OGC Web Coverage Server|OGC Web Map Server|X11 Pixmap|ASCII Gridded XYZ"

FORMATS="$GDAL_FORMATS|$OGR_FORMATS"
URL="http://www.google.com/search?q="
echo "#format|hits" > format_freq.dat

IFS='|'
for FMT in $FORMATS ; do
   echo "[$FMT]"
   SEARCH=`echo "$FMT" | sed -e 's|[,-/()]| |g' -e 's/ $//' | tr -s ' ' '+'`
   HITS=`lynx -dump "$URL\"$SEARCH\"" | grep 'About .* results' | awk '{print $2}' | sed -e 's/,//g'`
   echo "   $HITS"
   echo "$FMT|$HITS" >> format_freq.dat
done
}}}



Hamish


ps- recursive email, HITS = HITS+1  :^)



      
-------------- next part --------------
A non-text attachment was scrubbed...
Name: format_freq.dat
Type: application/x-ns-proxy-autoconfig
Size: 3954 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110226/a1b05604/format_freq.bin
From hamish_b at yahoo.com  Sat Feb 26 21:35:41 2011
From: hamish_b at yahoo.com (Hamish)
Date: Sat Feb 26 21:35:45 2011
Subject: [gdal-dev] Re: [Live-demo] Image for the GDAL overview
In-Reply-To: <316961.34196.qm@web110001.mail.gq1.yahoo.com>
Message-ID: <89316.35972.qm@web110007.mail.gq1.yahoo.com>

> > Cameron wrote:
> > > I'm also toying with creating a wordle image of
> > > the words.
> > > http://www.wordle.net/
> Hamish:
> > that's a great idea.
> > maybe a dark/light red image on top with GDAL words.
> > with dark/light blue image directly below with OGR
> > words.
...
> hmm, the wordle site doesn't let you specify frequency,

yes, it does, on the "advanced" page.

grep -v '^#' format_freq.dat | tr '|' ':' > format_freq.prn

split up into two gdal and ogr files, then paste format_freq.prn
into   http://www.wordle.net/advanced

well at this point I need to have java installed, but that's on
another machine. over to you...

if someone normalizes/caps the number of hits for generic format
names I can easily calc red/blue hex colors to attach them to
the "weighted words with hex colors" advanced option.


Hamish



      
From even.rouault at mines-paris.org  Sun Feb 27 05:15:07 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Feb 27 05:15:11 2011
Subject: [gdal-dev] Re: [Live-demo] Image for the GDAL overview
In-Reply-To: <316961.34196.qm@web110001.mail.gq1.yahoo.com>
References: <316961.34196.qm@web110001.mail.gq1.yahoo.com>
Message-ID: <201102271115.07557.even.rouault@mines-paris.org>

Hamish,

If I understand well what you are trying to do (try to evaluate the relative 
"popularity" of formats to present it graphically ?), I'm afraid the method 
used here will lead to lots of false results and a biased view of the 
"reality"

For example,

* http://www.google.com/search?q=GMT shows that GMT is mainly Greenwich Mean 
Time, Giant Magellan Telescope, Generative Modeling Technologies, ...

* when I try "Portable Network Graphics", I get 1070000, and not 998000 (I've 
the feeling that the results given by Google depend somehow of your IP 
address) . And it will probably lead to far less hits than "PNG" which the 
more popular term for it (but which is also Papua New Guinea...). PNG gives 1 
010 000 000 hits !!!

* "Shapefile" --> 2 570 000  but "ESRI Shapefile" only 183 000

* FIT and FITS have incredible high hits, while being quite obscure formats. 
The reason for that popularity burst is that they are mainly English verbs... 
or FIT = Fashion Institute of Technology, F?d?ration internationale des 
traducteurs, Florida Institute of Technology, Faculty of Information 
Technology, ...

* KAK is not a very significant name (and none of the results in the first page 
of Google shows a link with the format) for the JP2KAK driver, which is itself 
a GDAL-only codename for JPEG2000 with Kakadu library.

* "PostgreSQL/PostGIS" --> 58 500, but "PostgreSQL" --> 9 650 000 and 
"PostGIS" --> 324 000 ...

etc etc...

What would be more interesting would be to install a spy in the GDAL lib which 
would connect to a web site and increase the hit count of the appropriate 
driver for each successful opening of a dataset :-) And I'm pretty sure you 
would see geotiff and shapefile appear in the top of the list.

Best regards,

Even
From hamish_b at yahoo.com  Sun Feb 27 07:18:57 2011
From: hamish_b at yahoo.com (Hamish)
Date: Sun Feb 27 07:20:53 2011
Subject: [gdal-dev] Re: [Live-demo] Image for the GDAL overview
In-Reply-To: <201102271115.07557.even.rouault@mines-paris.org>
Message-ID: <978203.97087.qm@web110014.mail.gq1.yahoo.com>

Even wrote:
> If I understand well what you are trying to do (try to
> evaluate the relative "popularity" of formats to present it
> graphically ?),

Yes. For the osgeo liveDVD demo disc we're trying to put together
a screenshot for the GDAL overview page. Screenshots of CLI or
libs are not very interesting, so we're being creative.

here's the current one (ignore image scaling, that's a sphinx
bug on the adhoc server; imagine it at 60% size),
 http://adhoc.osgeo.osuosl.org/livedvd/docs/en/overview/gdal_overview.html


> I'm afraid the method used here will lead to lots of false
> results and a biased view of the "reality"
> 
> For example,
> 
> * http://www.google.com/search?q=GMT shows that GMT is mainly
>  Greenwich Mean Time, Giant Magellan Telescope, Generative
> Modeling Technologies, ...

yes I know, that's why I pulled that one out as an example of
search terms which would need to be adjusted.

for GMT I think I'll change the search term to `"GMT+grid"`
and see how that does.

> * when I try "Portable Network Graphics", I get 1070000,
> and not 998000 (I've the feeling that the results given by
> Google depend somehow of your IP address) .

yes, rather frustrating. I find it often tells me the answers
already known to me and not the other uses (and I'm doing a
search for things I don't know, not for what I do know). hard to
treat as unbiased results.. anyway I do it while logged out
of gmail if that helps. :)

e.g., if I do a search for "GRASS" while logged into gmail I
get "GRASS GIS" as the #2 result, after wikipedia. I could hope,
but I doubt random users see the same list. and a lot of hits
for "GRASS in $HOME_COUNTRY".

> And it will probably lead to far less hits than "PNG" which the 
> more popular term for it (but which is also Papua New
> Guinea...). PNG gives 1 010 000 000 hits !!!

For generic names I think we could add `"$NAME"+GIS` to the
search to remove some of the clutter.

> * "Shapefile" --> 2 570 000? but "ESRI Shapefile"
> only 183 000

right, more refinement needed there.

 
> * FIT and FITS have incredible high hits, while being quite
> obscure formats. 
> The reason for that popularity burst is that they are
> mainly English verbs... 

+GIS or +raster ?

> * KAK is not a very significant name (and none of the
> results in the first page of Google shows a link with the
> format) for the JP2KAK driver, which is itself 
> a GDAL-only codename for JPEG2000 with Kakadu library.

so perhaps reasonably accurate.
 
> * "PostgreSQL/PostGIS" --> 58 500, but "PostgreSQL"
> --> 9 650 000 and "PostGIS" --> 324 000 ...

probably reduce that one to just PostGIS.

> etc etc...


> What would be more interesting would be to install a spy in
> the GDAL lib which would connect to a web site and increase
> the hit count of the appropriate driver for each successful
> opening of a dataset :-)

users would love us for that.. :-)
(fwiw, see popcon package in debian/ubuntu)

> And I'm pretty sure you would see geotiff and shapefile appear
> in the top of the list.

yeah, the idea isn't to do an exhaustive scientific search of
what is the most popular formats, just to provide some weighting
to a font-sizing algorithm in a promo image.

I feel my own use of GDAL will be strongly skewed to a few
formats on the list that I use in my field, and not necessarily
what is most used by other users.

for shared editing of the search terms, I've thrown them up
here:
  http://wiki.osgeo.org/wiki/GDAL_format_popularity


Hamish



      
From kmichael.aye at gmail.com  Sun Feb 27 10:15:56 2011
From: kmichael.aye at gmail.com (K.-Michael Aye)
Date: Sun Feb 27 10:16:13 2011
Subject: [gdal-dev] Lost in projections 
Message-ID: <ikdprc$25s$1@dough.gmane.org>

I just can't get my head around it... :(

I have a Mars DEM rasterdata set that is projected in polar 
stereographic with this Wkt:

PROJCS["POLAR_STEREOGRAPHIC MARS",
    GEOGCS["GCS_MARS",
        DATUM["D_MARS",
            SPHEROID["MARS",3396190,169.8944472236118]],
        PRIMEM["Reference_Meridian",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Polar_Stereographic"],
    PARAMETER["latitude_of_origin",-90],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0]]

and a worldfile (output of ds.GetGeoTransform()

(-707109.6954345703,
 115.08946865797043,
 0.0,
 707109.6954345703,
 0.0,
 -115.08946865797043)

So, currently, to find the corrent sample/line coordinates to determine 
what raster window to read, I need to know the projected coordinate in 
meters and using this via gdal.ApplyGeoTransform() works fine, in both 
directions.

But I would like to find my data by providing a pair of  unprojected, 
i.e. geographical coordinates. So something like
sample, line = gdal.ApplyGeoTransform(t, lat,lon)

So I understand that I need a transformation between 
polar_stereographic and lat/long projection, but I am stumped at how I 
get a new wordfile?

I guess I can just take the above Wkt and change projection to lat/long 
and remove the parameter section, but what do I do with the affine 
transformation parameters? Where do I have to put them into the proj4 
system to achieve what I need? Somehow no examples I can find explain 
this part (or I can't see the forest because of all the trees.)

Any help would be appreciated deeply!!

Best regards,
Michael 


From martin.martinjensen at gmail.com  Sun Feb 27 16:00:49 2011
From: martin.martinjensen at gmail.com (Martinjensen)
Date: Sun Feb 27 16:00:50 2011
Subject: [gdal-dev] Re: Converting contour lines (Shape files) into DEM
In-Reply-To: <201003272307.24152.even.rouault@mines-paris.org>
References: <6e7b1b711003271109k184e1aeamc86f545e7bc5ef96@mail.gmail.com>
	<201003272307.24152.even.rouault@mines-paris.org>
Message-ID: <1298840449162-6071139.post@n2.nabble.com>

I am trying the same thing but gdal_rasterize will not let me without an
existing raster  outputfile. My GDAL version is:

>gdal_rasterize --utility_version
gdal_rasterize was compiled against GDAL 1.8.0 and is running against GDAL
1.8.0

I run it like this:

gdal_rasterize.exe -a Z -l LINESTRING LINESTRING.shp LINESTRING_dem.tif
ERROR 4: `LINESTRING_dem.tif' does not exist in the file system,
and is not recognised as a supported dataset name.

I thought the ability to create new output file by gdal_rasterize war
introduced en GDAL 1.8. 
Am I doing anything wrong?

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Converting-contour-lines-Shape-files-into-DEM-tp4810148p6071139.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Sun Feb 27 16:05:29 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Feb 27 16:05:38 2011
Subject: [gdal-dev] Re: Converting contour lines (Shape files) into DEM
In-Reply-To: <1298840449162-6071139.post@n2.nabble.com>
References: <6e7b1b711003271109k184e1aeamc86f545e7bc5ef96@mail.gmail.com>
	<201003272307.24152.even.rouault@mines-paris.org>
	<1298840449162-6071139.post@n2.nabble.com>
Message-ID: <201102272205.29464.even.rouault@mines-paris.org>

Le dimanche 27 f?vrier 2011 22:00:49, Martinjensen a ?crit :
> I am trying the same thing but gdal_rasterize will not let me without an
> 
> existing raster  outputfile. My GDAL version is:
> >gdal_rasterize --utility_version
> 
> gdal_rasterize was compiled against GDAL 1.8.0 and is running against GDAL
> 1.8.0
> 
> I run it like this:
> 
> gdal_rasterize.exe -a Z -l LINESTRING LINESTRING.shp LINESTRING_dem.tif
> ERROR 4: `LINESTRING_dem.tif' does not exist in the file system,
> and is not recognised as a supported dataset name.
> 
> I thought the ability to create new output file by gdal_rasterize war
> introduced en GDAL 1.8.
> Am I doing anything wrong?

The manual page mentions :

"Since GDAL 1.8.0, the target GDAL file can be created by gdal_rasterize. One 
of -tr or -ts option must be used in that case."
From nfarah at hotmail.com  Sun Feb 27 18:02:31 2011
From: nfarah at hotmail.com (N. Farah)
Date: Sun Feb 27 18:03:34 2011
Subject: [gdal-dev] gdalinfo crash on a jpeg 2000 file
Message-ID: <SNT116-W54282A1CF1F55ACBDA2F91DDDF0@phx.gbl>


Hi,
Using gdalinfo from GDAL 1.8 release build (http://vbkto.dyndns.org:1280/sdk/) on this jpeg 2000 file(http://www.openjpeg.org/samples/Facade.j2k) crash !
To debug it I built gdal from source and registered only open jpeg 2000 driver: it appears that a unhandled exception wasthrown at this line if(!opj_read_header(pCodec, &psImage, &nX0, &nY0, &nTileW, &nTileH, &nTilesX, &nTilesY, pStream))in JP2OpenJPEGDataset::Open method.
The used openjpeg.dll is the one that come with http://vbkto.dyndns.org:1280/sdk which i assume was a private build fromthe open jpeg branch or trunk.
Should i file this as ticket with GDAL or probably with open jpeg 2000 ?
Thanks
Noureddine Farah 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110227/3ace3eb6/attachment.html
From even.rouault at mines-paris.org  Sun Feb 27 18:14:01 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Feb 27 18:14:07 2011
Subject: [gdal-dev] gdalinfo crash on a jpeg 2000 file
In-Reply-To: <SNT116-W54282A1CF1F55ACBDA2F91DDDF0@phx.gbl>
References: <SNT116-W54282A1CF1F55ACBDA2F91DDDF0@phx.gbl>
Message-ID: <201102280014.01088.even.rouault@mines-paris.org>

Le lundi 28 f?vrier 2011 00:02:31, N. Farah a ?crit :
> Hi,
> Using gdalinfo from GDAL 1.8 release build
> (http://vbkto.dyndns.org:1280/sdk/) on this jpeg 2000
> file(http://www.openjpeg.org/samples/Facade.j2k) crash ! To debug it I
> built gdal from source and registered only open jpeg 2000 driver: it
> appears that a unhandled exception wasthrown at this line
> if(!opj_read_header(pCodec, &psImage, &nX0, &nY0, &nTileW, &nTileH,
> &nTilesX, &nTilesY, pStream))in JP2OpenJPEGDataset::Open method. The used
> openjpeg.dll is the one that come with http://vbkto.dyndns.org:1280/sdk
> which i assume was a private build fromthe open jpeg branch or trunk.
> Should i file this as ticket with GDAL or probably with open jpeg 2000 ?
> Thanks
> Noureddine Farah

On Linux, with my own build of openjpeg v2 branch, I get a "clean" error :
ERROR 1: Marker is not compliant with its position
ERROR 1: opj_read_header() failed

I'd note that the JP2ECW and JPEG2000 (Jasper) drivers also fail on that 
image. With the JP2MrSID driver I manage to read it, but some parts are very 
blury, so I guess this is a corrupted or corner case image.
From nfarah at hotmail.com  Sun Feb 27 18:20:22 2011
From: nfarah at hotmail.com (N. Farah)
Date: Sun Feb 27 18:20:25 2011
Subject: [gdal-dev] gdalinfo crash on a jpeg 2000 file
In-Reply-To: <201102280014.01088.even.rouault@mines-paris.org>
References: <SNT116-W54282A1CF1F55ACBDA2F91DDDF0@phx.gbl>,
	<201102280014.01088.even.rouault@mines-paris.org>
Message-ID: <SNT116-W518848F1A99C64F55AD6ECDDDF0@phx.gbl>


Thanks for the prompt response !
I assume then that exception is now handled gracefully with open jpeg trunk. May be the 'openjpeg.dll' that come withwith http://vbkto.dyndns.org:1280/sdk/ is outdated and did not have that fix. I'll build it from the open jpeg 2000 trunk and verify the results.
Was it the trunk ? or branch v2 as mentioned at http://gdal.org/frmt_jp2openjpeg.html ?
Noureddine Farah

> From: even.rouault@mines-paris.org
> To: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] gdalinfo crash on a jpeg 2000 file
> Date: Mon, 28 Feb 2011 00:14:01 +0100
> CC: nfarah@hotmail.com
> 
> Le lundi 28 f?vrier 2011 00:02:31, N. Farah a ?crit :
> > Hi,
> > Using gdalinfo from GDAL 1.8 release build
> > (http://vbkto.dyndns.org:1280/sdk/) on this jpeg 2000
> > file(http://www.openjpeg.org/samples/Facade.j2k) crash ! To debug it I
> > built gdal from source and registered only open jpeg 2000 driver: it
> > appears that a unhandled exception wasthrown at this line
> > if(!opj_read_header(pCodec, &psImage, &nX0, &nY0, &nTileW, &nTileH,
> > &nTilesX, &nTilesY, pStream))in JP2OpenJPEGDataset::Open method. The used
> > openjpeg.dll is the one that come with http://vbkto.dyndns.org:1280/sdk
> > which i assume was a private build fromthe open jpeg branch or trunk.
> > Should i file this as ticket with GDAL or probably with open jpeg 2000 ?
> > Thanks
> > Noureddine Farah
> 
> On Linux, with my own build of openjpeg v2 branch, I get a "clean" error :
> ERROR 1: Marker is not compliant with its position
> ERROR 1: opj_read_header() failed
> 
> I'd note that the JP2ECW and JPEG2000 (Jasper) drivers also fail on that 
> image. With the JP2MrSID driver I manage to read it, but some parts are very 
> blury, so I guess this is a corrupted or corner case image.
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110227/9f3c9841/attachment.html
From even.rouault at mines-paris.org  Sun Feb 27 18:25:28 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Feb 27 18:25:35 2011
Subject: [gdal-dev] gdalinfo crash on a jpeg 2000 file
In-Reply-To: <SNT116-W518848F1A99C64F55AD6ECDDDF0@phx.gbl>
References: <SNT116-W54282A1CF1F55ACBDA2F91DDDF0@phx.gbl>
	<201102280014.01088.even.rouault@mines-paris.org>
	<SNT116-W518848F1A99C64F55AD6ECDDDF0@phx.gbl>
Message-ID: <201102280025.28854.even.rouault@mines-paris.org>

Le lundi 28 f?vrier 2011 00:20:22, N. Farah a ?crit :
> Thanks for the prompt response !
> I assume then that exception is now handled gracefully with open jpeg
> trunk. May be the 'openjpeg.dll' that come withwith
> http://vbkto.dyndns.org:1280/sdk/ is outdated and did not have that fix.
> I'll build it from the open jpeg 2000 trunk and verify the results. Was it
> the trunk ? or branch v2 as mentioned at
> http://gdal.org/frmt_jp2openjpeg.html ? Noureddine Farah

v2 branch. There's no way to build the JP2OPENJPEG driver against openjpeg 
trunk (which is in fact their v1.X branch).

I'm not too sure when I built my openjpeg lib, but the progress of the 
openjpeg v2 branch developement is rather slow. So perhaps, this is an issue 
with the windows build of openjpeg. I remember that Tamas had a hard time to 
build it and make it work with the GDAL driver because of a mess with the 
redefinition of the bool type.

> 
> > From: even.rouault@mines-paris.org
> > To: gdal-dev@lists.osgeo.org
> > Subject: Re: [gdal-dev] gdalinfo crash on a jpeg 2000 file
> > Date: Mon, 28 Feb 2011 00:14:01 +0100
> > CC: nfarah@hotmail.com
> > 
> > Le lundi 28 f?vrier 2011 00:02:31, N. Farah a ?crit :
> > > Hi,
> > > Using gdalinfo from GDAL 1.8 release build
> > > (http://vbkto.dyndns.org:1280/sdk/) on this jpeg 2000
> > > file(http://www.openjpeg.org/samples/Facade.j2k) crash ! To debug it I
> > > built gdal from source and registered only open jpeg 2000 driver: it
> > > appears that a unhandled exception wasthrown at this line
> > > if(!opj_read_header(pCodec, &psImage, &nX0, &nY0, &nTileW, &nTileH,
> > > &nTilesX, &nTilesY, pStream))in JP2OpenJPEGDataset::Open method. The
> > > used openjpeg.dll is the one that come with
> > > http://vbkto.dyndns.org:1280/sdk which i assume was a private build
> > > fromthe open jpeg branch or trunk. Should i file this as ticket with
> > > GDAL or probably with open jpeg 2000 ? Thanks
> > > Noureddine Farah
> > 
> > On Linux, with my own build of openjpeg v2 branch, I get a "clean" error
> > : ERROR 1: Marker is not compliant with its position
> > ERROR 1: opj_read_header() failed
> > 
> > I'd note that the JP2ECW and JPEG2000 (Jasper) drivers also fail on that
> > image. With the JP2MrSID driver I manage to read it, but some parts are
> > very blury, so I guess this is a corrupted or corner case image.
From nfarah at hotmail.com  Sun Feb 27 18:26:43 2011
From: nfarah at hotmail.com (N. Farah)
Date: Sun Feb 27 18:26:46 2011
Subject: [gdal-dev] Unrecognized Geopdf files using GDAL 1.8
In-Reply-To: <SNT116-W54282A1CF1F55ACBDA2F91DDDF0@phx.gbl>
References: <SNT116-W54282A1CF1F55ACBDA2F91DDDF0@phx.gbl>
Message-ID: <SNT116-W46167B7700436BDBB658F0DDDF0@phx.gbl>


Hi,
Using gdalinfo (http://vbkto.dyndns.org:1280/sdk/) on few geopdf files did not recognized the files as supported.Other files were opened and recognized ok. 
Here are 3 files that were unrecognized:
http://www.agc.army.mil/GeoPDFgallery/3D/Fargo.jpg
http://www.agc.army.mil/GeoPDFgallery/3D/Fargo_May09_geo.jpg
http://acrobatusers.com/sites/default/files/gallery_pictures/GEOEYE-INAUGURATION.pdf
Thanks
Noureddine Farah 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110227/a5babfa5/attachment-0001.html
From even.rouault at mines-paris.org  Sun Feb 27 18:42:34 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Feb 27 18:42:42 2011
Subject: [gdal-dev] Unrecognized Geopdf files using GDAL 1.8
In-Reply-To: <SNT116-W46167B7700436BDBB658F0DDDF0@phx.gbl>
References: <SNT116-W54282A1CF1F55ACBDA2F91DDDF0@phx.gbl>
	<SNT116-W46167B7700436BDBB658F0DDDF0@phx.gbl>
Message-ID: <201102280042.34928.even.rouault@mines-paris.org>

Le lundi 28 f?vrier 2011 00:26:43, N. Farah a ?crit :
> Hi,
> Using gdalinfo (http://vbkto.dyndns.org:1280/sdk/) on few geopdf files did
> not recognized the files as supported.Other files were opened and
> recognized ok. Here are 3 files that were unrecognized:
> http://www.agc.army.mil/GeoPDFgallery/3D/Fargo.jpg

--> this is a JPEG file ...

You probably meant http://www.agc.army.mil/GeoPDFgallery/3D/Fargo.pdf which is 
recognized as a *non* spatial PDF on Linux with Poppler 0.16.0. A dump of the 
PDF content shows that there are indeed no spatial info in that PDF that 
follow the OGC best practice encoding or Adobe supplement to ISO 32000. And 
the name of the file suggests that this is a 3D GeoPDF, which is a specification 
not handled by the driver.

> http://www.agc.army.mil/GeoPDFgallery/3D/Fargo_May09_geo.jpg

Same as above

> http://acrobatusers.com/sites/default/files/gallery_pictures/GEOEYE-
INAUGURATION.pdf

--> recognized as a geospatial PDF on Linux with Poppler 0.16.0

Driver: PDF/Geospatial PDF
Files: GEOEYE-INAUGURATION.pdf
Size is 1350, 619
Coordinate System is:
PROJCS["WGS 84 / UTM zone 18N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4326"]],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-75],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    AUTHORITY["EPSG","32618"],
    AXIS["Easting",EAST],
    AXIS["Northing",NORTH]]
GeoTransform =
  322005.63038904, 2.8993752, -0.04217184
  4307533.17691748, -0.13576416, -2.77423392
Metadata:
  NEATLINE=POLYGON ((322005.69019039417617 
4307537.110892030410469,325915.627076361211948 
4307346.153255709446967,325893.724369931151159 
4305634.64386628754437,321983.72777434962336 
4305821.667495521716774,322005.630388610996306 
4307533.176889259368181,322005.69019039417617 4307537.110892030410469))
Corner Coordinates:
Upper Left  (  322005.630, 4307533.177) ( 77d 3' 9.14"W, 38d53'55.17"N)
Lower Left  (  321979.526, 4305815.926) ( 77d 3' 8.62"W, 38d52'59.48"N)
Upper Right (  325919.787, 4307349.895) ( 77d 0'26.58"W, 38d53'52.05"N)
Lower Right (  325893.683, 4305632.645) ( 77d 0'26.09"W, 38d52'56.36"N)
Center      (  323949.656, 4306582.911) ( 77d 1'47.61"W, 38d53'25.77"N)

>  Thanks
> Noureddine Farah
From nfarah at hotmail.com  Sun Feb 27 20:34:14 2011
From: nfarah at hotmail.com (N. Farah)
Date: Sun Feb 27 20:34:18 2011
Subject: [gdal-dev] Unrecognized Geopdf files using GDAL 1.8
In-Reply-To: <201102280042.34928.even.rouault@mines-paris.org>
References: <SNT116-W54282A1CF1F55ACBDA2F91DDDF0@phx.gbl>
	<SNT116-W46167B7700436BDBB658F0DDDF0@phx.gbl>,
	<201102280042.34928.even.rouault@mines-paris.org>
Message-ID: <SNT116-W51A3C348DEC61D779B3D66DDDE0@phx.gbl>


Thanks !
Yes I meant http://www.agc.army.mil/GeoPDFgallery/3D/Fargo.pdf
It makes sense then for this file and http://www.agc.army.mil/GeoPDFgallery/3D/Fargo_May09_geo.jpgif they were 3D or/and not following the OGC spec.
I believe poppler packaged with http://vbkto.dyndns.org:1280/sdk might be 0.15.1 and apparently0.16.0 had changes that probably made http://acrobatusers.com/sites/default/files/gallery_pictures/GEOEYE-INAUGURATION.pdfrecognized as valid GeoPdf.
Noureddine Farah

> From: even.rouault@mines-paris.org
> To: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Unrecognized Geopdf files using GDAL 1.8
> Date: Mon, 28 Feb 2011 00:42:34 +0100
> CC: nfarah@hotmail.com
> 
> Le lundi 28 f?vrier 2011 00:26:43, N. Farah a ?crit :
> > Hi,
> > Using gdalinfo (http://vbkto.dyndns.org:1280/sdk/) on few geopdf files did
> > not recognized the files as supported.Other files were opened and
> > recognized ok. Here are 3 files that were unrecognized:
> > http://www.agc.army.mil/GeoPDFgallery/3D/Fargo.jpg
> 
> --> this is a JPEG file ...
> 
> You probably meant http://www.agc.army.mil/GeoPDFgallery/3D/Fargo.pdf which is 
> recognized as a *non* spatial PDF on Linux with Poppler 0.16.0. A dump of the 
> PDF content shows that there are indeed no spatial info in that PDF that 
> follow the OGC best practice encoding or Adobe supplement to ISO 32000. And 
> the name of the file suggests that this is a 3D GeoPDF, which is a specification 
> not handled by the driver.
> 
> > http://www.agc.army.mil/GeoPDFgallery/3D/Fargo_May09_geo.jpg
> 
> Same as above
> 
> > http://acrobatusers.com/sites/default/files/gallery_pictures/GEOEYE-
> INAUGURATION.pdf
> 
> --> recognized as a geospatial PDF on Linux with Poppler 0.16.0
> 
> Driver: PDF/Geospatial PDF
> Files: GEOEYE-INAUGURATION.pdf
> Size is 1350, 619
> Coordinate System is:
> PROJCS["WGS 84 / UTM zone 18N",
>     GEOGCS["WGS 84",
>         DATUM["WGS_1984",
>             SPHEROID["WGS 84",6378137,298.257223563,
>                 AUTHORITY["EPSG","7030"]],
>             AUTHORITY["EPSG","6326"]],
>         PRIMEM["Greenwich",0,
>             AUTHORITY["EPSG","8901"]],
>         UNIT["degree",0.0174532925199433,
>             AUTHORITY["EPSG","9122"]],
>         AUTHORITY["EPSG","4326"]],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",-75],
>     PARAMETER["scale_factor",0.9996],
>     PARAMETER["false_easting",500000],
>     PARAMETER["false_northing",0],
>     AUTHORITY["EPSG","32618"],
>     AXIS["Easting",EAST],
>     AXIS["Northing",NORTH]]
> GeoTransform =
>   322005.63038904, 2.8993752, -0.04217184
>   4307533.17691748, -0.13576416, -2.77423392
> Metadata:
>   NEATLINE=POLYGON ((322005.69019039417617 
> 4307537.110892030410469,325915.627076361211948 
> 4307346.153255709446967,325893.724369931151159 
> 4305634.64386628754437,321983.72777434962336 
> 4305821.667495521716774,322005.630388610996306 
> 4307533.176889259368181,322005.69019039417617 4307537.110892030410469))
> Corner Coordinates:
> Upper Left  (  322005.630, 4307533.177) ( 77d 3' 9.14"W, 38d53'55.17"N)
> Lower Left  (  321979.526, 4305815.926) ( 77d 3' 8.62"W, 38d52'59.48"N)
> Upper Right (  325919.787, 4307349.895) ( 77d 0'26.58"W, 38d53'52.05"N)
> Lower Right (  325893.683, 4305632.645) ( 77d 0'26.09"W, 38d52'56.36"N)
> Center      (  323949.656, 4306582.911) ( 77d 1'47.61"W, 38d53'25.77"N)
> 
> >  Thanks
> > Noureddine Farah
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110227/92dc3617/attachment.html
From even.rouault at mines-paris.org  Mon Feb 28 02:57:22 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Feb 28 02:57:31 2011
Subject: [gdal-dev] Unrecognized Geopdf files using GDAL 1.8
In-Reply-To: <SNT116-W51A3C348DEC61D779B3D66DDDE0@phx.gbl>
References: <SNT116-W54282A1CF1F55ACBDA2F91DDDF0@phx.gbl>
	<SNT116-W46167B7700436BDBB658F0DDDF0@phx.gbl>,
	<201102280042.34928.even.rouault@mines-paris.org>
	<SNT116-W51A3C348DEC61D779B3D66DDDE0@phx.gbl>
Message-ID: <1298879842.4d6b556267c7a@webmail.free.fr>

Selon "N. Farah" <nfarah@hotmail.com>:


> I believe poppler packaged with http://vbkto.dyndns.org:1280/sdk might be
> 0.15.1 and apparently0.16.0 had changes that probably made
>
http://acrobatusers.com/sites/default/files/gallery_pictures/GEOEYE-INAUGURATION.pdf
recognized as valid GeoPdf.

Actually not. I have tested with a GDAL windows build of mine, against a
libpoppler (0.12.4 I believe) build from the kdewin32 project, and with that
build, I get the same results as on Linux. So it is likely something with the
build at http://vbkto.dyndns.org:1280/sdk

> Noureddine Farah
>
> > From: even.rouault@mines-paris.org
> > To: gdal-dev@lists.osgeo.org
> > Subject: Re: [gdal-dev] Unrecognized Geopdf files using GDAL 1.8
> > Date: Mon, 28 Feb 2011 00:42:34 +0100
> > CC: nfarah@hotmail.com
> >
> > Le lundi 28 f?vrier 2011 00:26:43, N. Farah a ?crit :
> > > Hi,
> > > Using gdalinfo (http://vbkto.dyndns.org:1280/sdk/) on few geopdf files
> did
> > > not recognized the files as supported.Other files were opened and
> > > recognized ok. Here are 3 files that were unrecognized:
> > > http://www.agc.army.mil/GeoPDFgallery/3D/Fargo.jpg
> >
> > --> this is a JPEG file ...
> >
> > You probably meant http://www.agc.army.mil/GeoPDFgallery/3D/Fargo.pdf which
> is
> > recognized as a *non* spatial PDF on Linux with Poppler 0.16.0. A dump of
> the
> > PDF content shows that there are indeed no spatial info in that PDF that
> > follow the OGC best practice encoding or Adobe supplement to ISO 32000. And
> > the name of the file suggests that this is a 3D GeoPDF, which is a
> specification
> > not handled by the driver.
> >
> > > http://www.agc.army.mil/GeoPDFgallery/3D/Fargo_May09_geo.jpg
> >
> > Same as above
> >
> > > http://acrobatusers.com/sites/default/files/gallery_pictures/GEOEYE-
> > INAUGURATION.pdf
> >
> > --> recognized as a geospatial PDF on Linux with Poppler 0.16.0
> >
> > Driver: PDF/Geospatial PDF
> > Files: GEOEYE-INAUGURATION.pdf
> > Size is 1350, 619
> > Coordinate System is:
> > PROJCS["WGS 84 / UTM zone 18N",
> >     GEOGCS["WGS 84",
> >         DATUM["WGS_1984",
> >             SPHEROID["WGS 84",6378137,298.257223563,
> >                 AUTHORITY["EPSG","7030"]],
> >             AUTHORITY["EPSG","6326"]],
> >         PRIMEM["Greenwich",0,
> >             AUTHORITY["EPSG","8901"]],
> >         UNIT["degree",0.0174532925199433,
> >             AUTHORITY["EPSG","9122"]],
> >         AUTHORITY["EPSG","4326"]],
> >     UNIT["metre",1,
> >         AUTHORITY["EPSG","9001"]],
> >     PROJECTION["Transverse_Mercator"],
> >     PARAMETER["latitude_of_origin",0],
> >     PARAMETER["central_meridian",-75],
> >     PARAMETER["scale_factor",0.9996],
> >     PARAMETER["false_easting",500000],
> >     PARAMETER["false_northing",0],
> >     AUTHORITY["EPSG","32618"],
> >     AXIS["Easting",EAST],
> >     AXIS["Northing",NORTH]]
> > GeoTransform =
> >   322005.63038904, 2.8993752, -0.04217184
> >   4307533.17691748, -0.13576416, -2.77423392
> > Metadata:
> >   NEATLINE=POLYGON ((322005.69019039417617
> > 4307537.110892030410469,325915.627076361211948
> > 4307346.153255709446967,325893.724369931151159
> > 4305634.64386628754437,321983.72777434962336
> > 4305821.667495521716774,322005.630388610996306
> > 4307533.176889259368181,322005.69019039417617 4307537.110892030410469))
> > Corner Coordinates:
> > Upper Left  (  322005.630, 4307533.177) ( 77d 3' 9.14"W, 38d53'55.17"N)
> > Lower Left  (  321979.526, 4305815.926) ( 77d 3' 8.62"W, 38d52'59.48"N)
> > Upper Right (  325919.787, 4307349.895) ( 77d 0'26.58"W, 38d53'52.05"N)
> > Lower Right (  325893.683, 4305632.645) ( 77d 0'26.09"W, 38d52'56.36"N)
> > Center      (  323949.656, 4306582.911) ( 77d 1'47.61"W, 38d53'25.77"N)
> >
> > >  Thanks
> > > Noureddine Farah
>


From kmichael.aye at gmail.com  Mon Feb 28 06:43:17 2011
From: kmichael.aye at gmail.com (K.-Michael Aye)
Date: Mon Feb 28 06:43:40 2011
Subject: [gdal-dev] Re: Lost in projections
References: <ikdprc$25s$1@dough.gmane.org>
Message-ID: <ikg1ol$hts$1@dough.gmane.org>

To make the sad long story short:

I was missing (=not knowing about) one method of the SpatialReference 
class: CloneGeogCS()

So if you do:

srs = osr.SpatialReference(gdaldataset.GetProjection())

and that projection is in map coordinates, to get the same thing in 
geographical coordinates one just has to do:

targetSRS = srs.CloneGeogCS()

and then to convert one into another :

transform = osr.CoordinateTransformation(srs,targetSRS)

and then for example:

lon, lat, height = transform.TransformPoint(x,y)

It is instructive to look at both srs and targetSRS.ExportToPrettyWkt() 
to see the differences.

HTH others,

Michael

On 2011-02-27 16:15:56 +0100, K.-Michael Aye said:

> I just can't get my head around it... :(
> 
> I have a Mars DEM rasterdata set that is projected in polar 
> stereographic with this Wkt:
> 
> PROJCS["POLAR_STEREOGRAPHIC MARS",
>     GEOGCS["GCS_MARS",
>         DATUM["D_MARS",
>             SPHEROID["MARS",3396190,169.8944472236118]],
>         PRIMEM["Reference_Meridian",0],
>         UNIT["degree",0.0174532925199433]],
>     PROJECTION["Polar_Stereographic"],
>     PARAMETER["latitude_of_origin",-90],
>     PARAMETER["central_meridian",0],
>     PARAMETER["scale_factor",1],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0]]
> 
> and a worldfile (output of ds.GetGeoTransform()
> 
> (-707109.6954345703,
>  115.08946865797043,
>  0.0,
>  707109.6954345703,
>  0.0,
>  -115.08946865797043)
> 
> So, currently, to find the corrent sample/line coordinates to determine 
> what raster window to read, I need to know the projected coordinate in 
> meters and using this via gdal.ApplyGeoTransform() works fine, in both 
> directions.
> 
> But I would like to find my data by providing a pair of  unprojected, 
> i.e. geographical coordinates. So something like
> sample, line = gdal.ApplyGeoTransform(t, lat,lon)
> 
> So I understand that I need a transformation between 
> polar_stereographic and lat/long projection, but I am stumped at how I 
> get a new wordfile?
> 
> I guess I can just take the above Wkt and change projection to lat/long 
> and remove the parameter section, but what do I do with the affine 
> transformation parameters? Where do I have to put them into the proj4 
> system to achieve what I need? Somehow no examples I can find explain 
> this part (or I can't see the forest because of all the trees.)
> 
> Any help would be appreciated deeply!!
> 
> Best regards,
> Michael



From nfarah at hotmail.com  Mon Feb 28 06:51:09 2011
From: nfarah at hotmail.com (N. Farah)
Date: Mon Feb 28 06:52:12 2011
Subject: [gdal-dev] Unrecognized Geopdf files using GDAL 1.8
In-Reply-To: <1298879842.4d6b556267c7a@webmail.free.fr>
References: <SNT116-W54282A1CF1F55ACBDA2F91DDDF0@phx.gbl>
	<SNT116-W46167B7700436BDBB658F0DDDF0@phx.gbl>,
	<201102280042.34928.even.rouault@mines-paris.org>
	<SNT116-W51A3C348DEC61D779B3D66DDDE0@phx.gbl>,
	<1298879842.4d6b556267c7a@webmail.free.fr>
Message-ID: <SNT116-W2788CDA80636B58FBABFF2DDDE0@phx.gbl>


Okay. Thanks again ! 
I remember i built one time open jpeg from v2 branch and there was compatibility issues with poppler distributed with kdewin32 project.The poppler I got from kdewin32 was dependent openJpeg 1.3-2 and this one was built with the following exported functions:opj_destroy_decompress, opj_cio_close and opj_set_event_mgr that are not existent any more in Open jpeg v2.
2>gdal.lib(JPEG2000Stream.cc.obj) : error LNK2001: unresolved external symbol __imp__opj_destroy_decompress@42>gdal.lib(JPEG2000Stream.cc.obj) : error LNK2001: unresolved external symbol __imp__opj_cio_close@42>gdal.lib(JPEG2000Stream.cc.obj) : error LNK2001: unresolved external symbol __imp__opj_cio_open@122>gdal.lib(JPEG2000Stream.cc.obj) : error LNK2001: unresolved external symbol __imp__opj_set_event_mgr@12
But it appears that http://vbkto.dyndns.org:1280/sdk had a poppler version that is compatible with open jpeg 2000 v2.So i end up using it those packaged versions with http://vbkto.dyndns.org:1280/sdk.
Apparently since you can open ok the mentioned .pdf with poppler 0.12.4 the issue seems to come from the packaged poppler orits a regression issue introduced in 0.15.1.
Noureddine Farah
> Date: Mon, 28 Feb 2011 08:57:22 +0100
> From: even.rouault@mines-paris.org
> To: nfarah@hotmail.com
> CC: even.rouault@mines-paris.org; gdal-dev@lists.osgeo.org
> Subject: RE: [gdal-dev] Unrecognized Geopdf files using GDAL 1.8
> 
> Selon "N. Farah" <nfarah@hotmail.com>:
> 
> 
> > I believe poppler packaged with http://vbkto.dyndns.org:1280/sdk might be
> > 0.15.1 and apparently0.16.0 had changes that probably made
> >
> http://acrobatusers.com/sites/default/files/gallery_pictures/GEOEYE-INAUGURATION.pdf
> recognized as valid GeoPdf.
> 
> Actually not. I have tested with a GDAL windows build of mine, against a
> libpoppler (0.12.4 I believe) build from the kdewin32 project, and with that
> build, I get the same results as on Linux. So it is likely something with the
> build at http://vbkto.dyndns.org:1280/sdk
> 
> > Noureddine Farah
> >
> > > From: even.rouault@mines-paris.org
> > > To: gdal-dev@lists.osgeo.org
> > > Subject: Re: [gdal-dev] Unrecognized Geopdf files using GDAL 1.8
> > > Date: Mon, 28 Feb 2011 00:42:34 +0100
> > > CC: nfarah@hotmail.com
> > >
> > > Le lundi 28 f?vrier 2011 00:26:43, N. Farah a ?crit :
> > > > Hi,
> > > > Using gdalinfo (http://vbkto.dyndns.org:1280/sdk/) on few geopdf files
> > did
> > > > not recognized the files as supported.Other files were opened and
> > > > recognized ok. Here are 3 files that were unrecognized:
> > > > http://www.agc.army.mil/GeoPDFgallery/3D/Fargo.jpg
> > >
> > > --> this is a JPEG file ...
> > >
> > > You probably meant http://www.agc.army.mil/GeoPDFgallery/3D/Fargo.pdf which
> > is
> > > recognized as a *non* spatial PDF on Linux with Poppler 0.16.0. A dump of
> > the
> > > PDF content shows that there are indeed no spatial info in that PDF that
> > > follow the OGC best practice encoding or Adobe supplement to ISO 32000. And
> > > the name of the file suggests that this is a 3D GeoPDF, which is a
> > specification
> > > not handled by the driver.
> > >
> > > > http://www.agc.army.mil/GeoPDFgallery/3D/Fargo_May09_geo.jpg
> > >
> > > Same as above
> > >
> > > > http://acrobatusers.com/sites/default/files/gallery_pictures/GEOEYE-
> > > INAUGURATION.pdf
> > >
> > > --> recognized as a geospatial PDF on Linux with Poppler 0.16.0
> > >
> > > Driver: PDF/Geospatial PDF
> > > Files: GEOEYE-INAUGURATION.pdf
> > > Size is 1350, 619
> > > Coordinate System is:
> > > PROJCS["WGS 84 / UTM zone 18N",
> > >     GEOGCS["WGS 84",
> > >         DATUM["WGS_1984",
> > >             SPHEROID["WGS 84",6378137,298.257223563,
> > >                 AUTHORITY["EPSG","7030"]],
> > >             AUTHORITY["EPSG","6326"]],
> > >         PRIMEM["Greenwich",0,
> > >             AUTHORITY["EPSG","8901"]],
> > >         UNIT["degree",0.0174532925199433,
> > >             AUTHORITY["EPSG","9122"]],
> > >         AUTHORITY["EPSG","4326"]],
> > >     UNIT["metre",1,
> > >         AUTHORITY["EPSG","9001"]],
> > >     PROJECTION["Transverse_Mercator"],
> > >     PARAMETER["latitude_of_origin",0],
> > >     PARAMETER["central_meridian",-75],
> > >     PARAMETER["scale_factor",0.9996],
> > >     PARAMETER["false_easting",500000],
> > >     PARAMETER["false_northing",0],
> > >     AUTHORITY["EPSG","32618"],
> > >     AXIS["Easting",EAST],
> > >     AXIS["Northing",NORTH]]
> > > GeoTransform =
> > >   322005.63038904, 2.8993752, -0.04217184
> > >   4307533.17691748, -0.13576416, -2.77423392
> > > Metadata:
> > >   NEATLINE=POLYGON ((322005.69019039417617
> > > 4307537.110892030410469,325915.627076361211948
> > > 4307346.153255709446967,325893.724369931151159
> > > 4305634.64386628754437,321983.72777434962336
> > > 4305821.667495521716774,322005.630388610996306
> > > 4307533.176889259368181,322005.69019039417617 4307537.110892030410469))
> > > Corner Coordinates:
> > > Upper Left  (  322005.630, 4307533.177) ( 77d 3' 9.14"W, 38d53'55.17"N)
> > > Lower Left  (  321979.526, 4305815.926) ( 77d 3' 8.62"W, 38d52'59.48"N)
> > > Upper Right (  325919.787, 4307349.895) ( 77d 0'26.58"W, 38d53'52.05"N)
> > > Lower Right (  325893.683, 4305632.645) ( 77d 0'26.09"W, 38d52'56.36"N)
> > > Center      (  323949.656, 4306582.911) ( 77d 1'47.61"W, 38d53'25.77"N)
> > >
> > > >  Thanks
> > > > Noureddine Farah
> >
> 
> 
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110228/f2f6fc04/attachment-0001.html
From mgleahy at alumni.uwaterloo.ca  Mon Feb 28 20:06:37 2011
From: mgleahy at alumni.uwaterloo.ca (Mike Leahy)
Date: Mon Feb 28 20:06:43 2011
Subject: [gdal-dev] Re: PHP bindings
In-Reply-To: <201102241945.17074.mgleahy@alumni.uwaterloo.ca>
References: <201102061450.35281.mgleahy@alumni.uwaterloo.ca>
	<201102091813.42313.mgleahy@alumni.uwaterloo.ca>
	<201102241945.17074.mgleahy@alumni.uwaterloo.ca>
Message-ID: <201102282006.38116.mgleahy@alumni.uwaterloo.ca>

Hello again,

I think I stumbled upon the part that was tripping up the methods I was using 
with the php_osr.so library.  Posted at http://pastebin.com/SXKKfe6v is a 
patch that should work on both 1.8.0, and the trunk svn.  It adds the missing 
CSL typemap, and corrects the OGRErr related typemaps to ensure that it only 
returns results for non-zero error responses.

The patch also includes changes to the GNUmakefile in the swig/php folder to 
make sure that the gdal libs are linked, and that all of the php modules are 
compiles instead of just php_gdal.so (not sure if this is fully necessary, but 
I was having trouble with linking before).

In addition to this, I had to substitute all instances of 
'zend_error_noreturn' that swig inserts into the *_wrap.cpp files with 
'zend_error'...I don't know if this is just specific to my environment, but the 
best I could determine from searching online is that more recent versions of 
PHP no longer define zend_error_noreturn, yet swig still uses it.  It seems 
that zend_error is a sufficient substitute (without this, I would find that when 
the module raised errors, it would cause a segfault instead of actually 
producing a descriptive error in Apache/PHP).

If this patch is applied and gdal is configured/compiled with the '--with-php' 
option, then when swig/php/php_osr.so is installed and loaded into the PHP 
environment, the following PHP script will work as expected:

<?php
include("/path/to/gdal/swig/php/osr.php");
$sr = new SpatialReference();
$sr->ImportFromProj4('+init=epsg:4326');
echo $sr->ExportToProj4();
?>

This is about as far as I can get for now - looking through typemaps_php.i, I 
think I see plenty of stuff that still needs fixing/updating.  There are also 
function name conflicts if I try to load php_gdal.so and/or php_ogr.so.  I 
think that's out of my league, however.  Hopefully this is enough to peak the 
interest of someone who has a little more familarity with c/swig/php, and we 
could get a more fully-supported set of PHP bindings.

Best regards,
Mike

On Thursday, February 24, 2011 19:45:16 Mike Leahy wrote:
> Hello all,
> 
> To keep this topic somewhat alive, I might note that I can identify that at
> the very least, php_osr.so works in some ways, but not how I would expect
> compared with the same bindings in other languages.
> 
> I also found that at least one typemap was needed in typemaps_php.i:
> 
> /* Almost same as %typemap(out) char **options */
> /* but we CSLDestroy the char** pointer at the end */
> %typemap(out) char **CSL
> {
>   /* %typemap(out) char ** -> ( string ) */
>   char **stringarray = $1;
>   if ( stringarray == NULL ) {
>     RETVAL_NULL();
>   }
>   else {
>     int len = CSLCount( stringarray );
>     array_init($result);
>     for ( int i = 0; i < len; ++i, ++stringarray ) {
>       add_next_index_string( $result, *stringarray, 1 );
>     }
>   }
>   CSLDestroy($1);
> }
> 
> This seems to have removed the warnings about that being missing when I
> compile the osr library (I'm continuing to focus just on this binding as a
> simple case).
> 
> In terms of actually using php_osr.so, I can successfully import a proj4
> string, and export that to WKT using the '__str__' method:
> 
> <?php
> $sr = new_SpatialReference();
> SpatialReference_ImportFromProj4($sr,'+init=epsg:4326');
> echo SpatialReference___str__($sr);
> ?>
> 
> I would expect that the last line would be equivalent to
> "SpatialReference_ExportToWkt($sr);", but that isn't the case...I'm still
> getting zero, which I think stems from the fact that the data type for the
> ExportToWkt (and similar functions) in osr.i is of the type 'OGRErr', and
> this is what is getting returned in PHP instead of the desired wkt output.
> 
> I'm guessing that there's a difference in how swig interprets these
> functions when compiling in PHP versus the other languages.  In osr.i, I
> added an extra declaration that mimics how the __str__ function works, but
> returns proj4 strings.  It looks like this:
> 
> %newobject ExportToProj4Test;
>   char *ExportToProj4Test() {
>     char *buf = 0;
>     OSRExportToProj4( self, &buf );
>     return buf;
>   }
> 
> After compiling that, the following code will successfully return a Proj4
> string:
> 
> <?php
> $sr = new_SpatialReference();
> SpatialReference_ImportFromProj4($sr,'+init=epsg:4326');
> echo SpatialReference_ExportToProj4Test($sr);
> ?>
> 
> So...with this in mind, does this suggest that PHP will essentially need an
> entirely rewritten list of functions?  I would hope that there's a more
> effective way to go about it this, and that I'm just looking at this with
> my relatively novice perspective.
> 
> Best regards,
> Mike
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110228/ae24c778/attachment.html
