From ari.jolma at tkk.fi  Fri Jun  1 04:56:52 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] GDAL binders at FOSS4G 2007
In-Reply-To: <f3b73b7d0705281403v3cf7d77dg18e1dde3fc8b607@mail.gmail.com>
References: <465B30EA.5070809@tkk.fi>
	<f3b73b7d0705281403v3cf7d77dg18e1dde3fc8b607@mail.gmail.com>
Message-ID: <465FDF54.9050603@tkk.fi>

Now at http://wiki.osgeo.org/index.php/FOSS4G2007_CodeSprint#SWIG_Bindings

Ari



From monshi at home.se  Fri Jun  1 09:12:04 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Re: Supported projections/transformation in a GUI
In-Reply-To: <f3eenm$qaj$1@sea.gmane.org>
References: <f3eenm$qaj$1@sea.gmane.org>
Message-ID: <f3p5v4$edn$1@sea.gmane.org>

As I thought, no easy way...

If there was, a reply would have found the way to this thread.

Tomas R skrev:
> Ok folks, here is question to crack.
>
> Simple idea:
> User can pick either a file with geo-data in it or an image without.
> If it is a file without geo-data the user is to be able to select 
> which projection/coordinate system the image is saved in and also set 
> up the coordinates of the edges of the map.  A transformation of 
> coordinates between map local projection and WGS84 will the be set up.
>
> My big problem is the case with no geo-data. I need to set up an 
> interface which an ordinary user can use, a user with not to much 
> experience of projections and such stuff.
>
> Firstly I need to sort out which, in GDAL, available projections that 
> are common. Just to reduce the list.
> Next I need to find a friendly name to present them with.
> If possible - sort them corresponding to where they are used, for 
> example  the user can select USA and get all the UTM-zones (and by 
> knowing the coordinates of the map select the right zone). Or replace 
> USA with a European country and their specific common projections.
>
> I'm a bit lost, don't know where to start. The ideas above is just 
> loose ideas.
>
> Suggestions? Any tools in GDAL that can help me? Anyway to look up the 
> available projections in GDAL? Anyway to sort out the "valid" 
> projections?
>
> Working with GDAL from C#.
>
> Pls
> /tomas


From milo at 3dsite.nl  Fri Jun  1 04:16:02 2007
From: milo at 3dsite.nl (Milo van der Linden)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] OGR_csharp sample code
Message-ID: <465FD5C2.5020802@3dsite.nl>

Hello,

I have added some of the source I am using in VB.net to do exactly as
what you are requesting. There are a couple of things you have to keep
in mind:
- Build enumerators that mimic the enumerators that are in the original
OGR dll's
- Be careful, base for featurecount are different for shape files or
mapinfo tab (the first starts at 0, the other at 1)

Let me be honest, I am not giving you the code in detail. Google Earth
content is core business for my own little company (3DSite,
http://www.3dsite.nl)

I have spent a lot of time getting it to what it is now, I am not
working for a boss beside this and nobody is funding my effort. Maybe
you can give me some insight on what you are going to use it for?
Perhaps we can partner in the business, Greece is not to far away from
the Netherlands and I am a great fan of Greece!


First, at the loading of my vb.net application I register all OGR file
types:

 'Register all filetypes for use with OGR
        OGR.ogr.RegisterAll()

I have a Class that holds the following objects:

Datasets Collection of type Dataset (selfmade class)

Dataset looks something like this:

Public Class Dataset
        Private _DataSource As OGR.DataSource
        Private _Driver As OGR.Driver
        Private _Name As String
        Private _Path As String
        Private _Extension As String
        Private _FileName As String
        Private _Layers As Layers
        Private _NameField As String
        Private _GroupField As String
        Private _SortField As String

where I turn all these private variables into public properties

Then I have 2 constructors in the dataset object:

        Public Sub New(ByVal name As String, ByVal path As String, ByVal
extension As String)
            _Name = name
            _Path = path
            _Extension = extension
            _FileName = _Path & "\" & _Name & _Extension
            _DataSource = OGR.ogr.Open(_FileName, 0)
            _Driver = _DataSource.GetDriver()

        End Sub
        Public Sub New(ByVal FileName As String)
            Dim j As Integer
            _Layers = New Layers
            _FileName = FileName
            _Path = System.IO.Path.GetDirectoryName(FileName)
            _Extension = System.IO.Path.GetExtension(FileName)
            _Name = System.IO.Path.GetFileNameWithoutExtension(FileName)
            _DataSource = OGR.ogr.Open(_FileName, 0)
            _Driver = _DataSource.GetDriver()
            For j = 0 To _DataSource.GetLayerCount - 1
                Dim lyr As New Layer(_DataSource.GetLayerByIndex(j))
                _Layers.Add(lyr)
            Next
        End Sub

The Layer object is an enhanced version of the OGR.Layer object:

Public Class Layer
        Private _fieldtable As DataTable = New DataTable("Fields")
        Private _sr As New OGR.SpatialReference("")
        Private _ogrLayer As OGR.Layer
        Private _name As String
        Private _def As OGR.FeatureDefn
        Private _FeatureCount As Integer
        Private _Type As Integer

The Layer Object also has an advanced constructor:

Public Sub New(ByVal lyr As OGR.Layer)

            ' Create DataColumns and set various properties.
            Dim fName As DataColumn = New DataColumn
            fName.DataType = System.Type.GetType("System.String")
            fName.AllowDBNull = True
            fName.Caption = "Name"
            fName.ColumnName = "name"
            fName.DefaultValue = ""
            ' Add the column to the table.
            _fieldtable.Columns.Add(fName)

            Dim fNum As DataColumn = New DataColumn
            fNum.DataType = System.Type.GetType("System.String")
            fNum.AllowDBNull = True
            fNum.Caption = "Type"
            fNum.ColumnName = "type"
            fNum.DefaultValue = 0
            ' Add the column to the table.
            _fieldtable.Columns.Add(fNum)

            Dim tmp As String = ""
            _ogrLayer = lyr

            _def = _ogrLayer.GetLayerDefn()
            _name = _def.GetName
            _FeatureCount = _ogrLayer.GetFeatureCount(1)
            _Type = _def.GetGeomType
            Dim i As Integer
            For i = 0 To _def.GetFieldCount() - 1
                Dim row As DataRow
                row = _fieldtable.NewRow()
                Dim FieldDef As OGR.FieldDefn = _def.GetFieldDefn(i)
                row("name") = FieldDef.GetName
                row("type") = FieldDef.GetFieldType
                _fieldtable.Rows.Add(row)
            Next
            _sr = _ogrLayer.GetSpatialRef
            _sr.ExportToProj4(tmp)
            If tmp = "" Then
                Dim ATproj4 As String = "+proj=tmerc +lat_0=12.51697
+lon_0=-69.994775 +k=0.9996 +x_0=10000 +y_0=15000 +towgs84=0,0,0,0,0,0,0
+units=m +no_defs"
                '    'Pop up a dialog stating that the source projection
is invalid!
                '    '"No Source coordinate system defined, proceed?"
                _sr.ImportFromProj4(ATproj4)
            Else
                Debug.Print("Source coordinate system: " & tmp)
            End If
        End Sub

Then, for the conversion to KML, I loop through this Dataset-Layer object
Dim lyr As ClassData.Layer
            For Each lyr In _ds.Layers
                count = lyr.Count
                 For j = i To count
                    Dim feat As OGR.Feature = lyr.Feature(j)
                    If Not feat Is Nothing Then
                        Dim geom As OGR.Geometry = feat.GetGeometryRef
                        If Not geom Is Nothing Then
                            Dim geomType As wkbGeometryType
                            geomType = geom.GetGeometryType
                            If geomType = wkbGeometryType.wkbLineString
Or geomType = wkbGeometryType.wkbPolygon Or geomType =
wkbGeometryType.wkbPoint Or geomType = wkbGeometryType.wkbMultiPolygon Then
                                ..... Now you have reached the point
where you have a valid object!, use it to convert to a kml string


            Next

IMPORTANT:

If you are using non US system settings: You can use this code to make
sure comma's are interpreted correctly:

Sub DoTheThing
    'First, store the CurrentCulture so it can be reset after the
routine is done
            Dim originalCulture As System.Globalization.CultureInfo
            originalCulture = CultureInfo.CurrentCulture

            'Google Earth needs the locale to be set to US so the . and
, are interpreted correctly
            Thread.CurrentThread.CurrentCulture = New
CultureInfo("en-US", True)

                DoTheConversionHere

            'Reset the CurrentCulture
            Thread.CurrentThread.CurrentCulture = originalCulture
end sub


Kind regards,

Milo van der Linden

3DSite - Milo van der Linden - CTO
Groenedijk 12, 4441 TJ  Ovezande (Zeeland, Nederland)
milo@3dsite.nl <mailto:milo@3dsite.nl>
http://www.3dsite.nl


<skype:milovanderlinden?chat>
 


De informatie verzonden met dit e-mail bericht is uitsluitend bestemd
voor de geadresseerde(n). Gebruik van deze informatie door andere dan de
geadresseerde(n) is verboden. Openbaarmaking, vermenigvuldiging,
verspreiding en/of verstrekking van deze informatie aan derde is niet
toegestaan. Kopi?ren en/of misbruiken van ingesloten afbeeldingen en/of
bestanden is wettelijke verboden en strafbaar. 3DSite staat niet in voor
de juiste en volledige overbrenging van de inhoud van een verzonden
e-mail, noch voor tijdig ontvangst daarvan. Op al onze leveringen,
aanbiedingen en verkopen zijn van toepassing onze Algemene Voorwaarden,
zoals gedeponeerd bij de K.v.K. te Middelburg. 3DSite

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070601/3d76eafc/attachment.html
From mateusz at loskot.net  Fri Jun  1 10:00:22 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] OGR_csharp sample code
In-Reply-To: <465FD5C2.5020802@3dsite.nl>
References: <465FD5C2.5020802@3dsite.nl>
Message-ID: <46602676.9010305@loskot.net>

Folks,

FYI, if you like, you can add interesting snippets to the GDAL Wiki:

http://trac.osgeo.org/gdal/wiki/CodeSnippets

Mateusz


Milo van der Linden wrote:
> Hello,
> 
> I have added some of the source I am using in VB.net to do exactly as
> what you are requesting. There are a couple of things you have to keep
> in mind:
> - Build enumerators that mimic the enumerators that are in the original
> OGR dll's
> - Be careful, base for featurecount are different for shape files or
> mapinfo tab (the first starts at 0, the other at 1)
> 
> Let me be honest, I am not giving you the code in detail. Google Earth
> content is core business for my own little company (3DSite,
> http://www.3dsite.nl)
> 
> I have spent a lot of time getting it to what it is now, I am not
> working for a boss beside this and nobody is funding my effort. Maybe
> you can give me some insight on what you are going to use it for?
> Perhaps we can partner in the business, Greece is not to far away from
> the Netherlands and I am a great fan of Greece!
> 
> 
> First, at the loading of my vb.net application I register all OGR file
> types:
> 
>  'Register all filetypes for use with OGR
>         OGR.ogr.RegisterAll()
> 
> I have a Class that holds the following objects:
> 
> Datasets Collection of type Dataset (selfmade class)
> 
> Dataset looks something like this:
> 
> Public Class Dataset
>         Private _DataSource As OGR.DataSource
>         Private _Driver As OGR.Driver
>         Private _Name As String
>         Private _Path As String
>         Private _Extension As String
>         Private _FileName As String
>         Private _Layers As Layers
>         Private _NameField As String
>         Private _GroupField As String
>         Private _SortField As String
> 
> where I turn all these private variables into public properties
> 
> Then I have 2 constructors in the dataset object:
> 
>         Public Sub New(ByVal name As String, ByVal path As String, ByVal
> extension As String)
>             _Name = name
>             _Path = path
>             _Extension = extension
>             _FileName = _Path & "\" & _Name & _Extension
>             _DataSource = OGR.ogr.Open(_FileName, 0)
>             _Driver = _DataSource.GetDriver()
> 
>         End Sub
>         Public Sub New(ByVal FileName As String)
>             Dim j As Integer
>             _Layers = New Layers
>             _FileName = FileName
>             _Path = System.IO.Path.GetDirectoryName(FileName)
>             _Extension = System.IO.Path.GetExtension(FileName)
>             _Name = System.IO.Path.GetFileNameWithoutExtension(FileName)
>             _DataSource = OGR.ogr.Open(_FileName, 0)
>             _Driver = _DataSource.GetDriver()
>             For j = 0 To _DataSource.GetLayerCount - 1
>                 Dim lyr As New Layer(_DataSource.GetLayerByIndex(j))
>                 _Layers.Add(lyr)
>             Next
>         End Sub
> 
> The Layer object is an enhanced version of the OGR.Layer object:
> 
> Public Class Layer
>         Private _fieldtable As DataTable = New DataTable("Fields")
>         Private _sr As New OGR.SpatialReference("")
>         Private _ogrLayer As OGR.Layer
>         Private _name As String
>         Private _def As OGR.FeatureDefn
>         Private _FeatureCount As Integer
>         Private _Type As Integer
> 
> The Layer Object also has an advanced constructor:
> 
> Public Sub New(ByVal lyr As OGR.Layer)
> 
>             ' Create DataColumns and set various properties.
>             Dim fName As DataColumn = New DataColumn
>             fName.DataType = System.Type.GetType("System.String")
>             fName.AllowDBNull = True
>             fName.Caption = "Name"
>             fName.ColumnName = "name"
>             fName.DefaultValue = ""
>             ' Add the column to the table.
>             _fieldtable.Columns.Add(fName)
> 
>             Dim fNum As DataColumn = New DataColumn
>             fNum.DataType = System.Type.GetType("System.String")
>             fNum.AllowDBNull = True
>             fNum.Caption = "Type"
>             fNum.ColumnName = "type"
>             fNum.DefaultValue = 0
>             ' Add the column to the table.
>             _fieldtable.Columns.Add(fNum)
> 
>             Dim tmp As String = ""
>             _ogrLayer = lyr
> 
>             _def = _ogrLayer.GetLayerDefn()
>             _name = _def.GetName
>             _FeatureCount = _ogrLayer.GetFeatureCount(1)
>             _Type = _def.GetGeomType
>             Dim i As Integer
>             For i = 0 To _def.GetFieldCount() - 1
>                 Dim row As DataRow
>                 row = _fieldtable.NewRow()
>                 Dim FieldDef As OGR.FieldDefn = _def.GetFieldDefn(i)
>                 row("name") = FieldDef.GetName
>                 row("type") = FieldDef.GetFieldType
>                 _fieldtable.Rows.Add(row)
>             Next
>             _sr = _ogrLayer.GetSpatialRef
>             _sr.ExportToProj4(tmp)
>             If tmp = "" Then
>                 Dim ATproj4 As String = "+proj=tmerc +lat_0=12.51697
> +lon_0=-69.994775 +k=0.9996 +x_0=10000 +y_0=15000 +towgs84=0,0,0,0,0,0,0
> +units=m +no_defs"
>                 '    'Pop up a dialog stating that the source projection
> is invalid!
>                 '    '"No Source coordinate system defined, proceed?"
>                 _sr.ImportFromProj4(ATproj4)
>             Else
>                 Debug.Print("Source coordinate system: " & tmp)
>             End If
>         End Sub
> 
> Then, for the conversion to KML, I loop through this Dataset-Layer object
> Dim lyr As ClassData.Layer
>             For Each lyr In _ds.Layers
>                 count = lyr.Count
>                  For j = i To count
>                     Dim feat As OGR.Feature = lyr.Feature(j)
>                     If Not feat Is Nothing Then
>                         Dim geom As OGR.Geometry = feat.GetGeometryRef
>                         If Not geom Is Nothing Then
>                             Dim geomType As wkbGeometryType
>                             geomType = geom.GetGeometryType
>                             If geomType = wkbGeometryType.wkbLineString
> Or geomType = wkbGeometryType.wkbPolygon Or geomType =
> wkbGeometryType.wkbPoint Or geomType = wkbGeometryType.wkbMultiPolygon Then
>                                 ..... Now you have reached the point
> where you have a valid object!, use it to convert to a kml string
> 
> 
>             Next
> 
> IMPORTANT:
> 
> If you are using non US system settings: You can use this code to make
> sure comma's are interpreted correctly:
> 
> Sub DoTheThing
>     'First, store the CurrentCulture so it can be reset after the
> routine is done
>             Dim originalCulture As System.Globalization.CultureInfo
>             originalCulture = CultureInfo.CurrentCulture
> 
>             'Google Earth needs the locale to be set to US so the . and
> , are interpreted correctly
>             Thread.CurrentThread.CurrentCulture = New
> CultureInfo("en-US", True)
> 
>                 DoTheConversionHere
> 
>             'Reset the CurrentCulture
>             Thread.CurrentThread.CurrentCulture = originalCulture
> end sub
> 
> 
> Kind regards,
> 
> Milo van der Linden
> 
> 3DSite - Milo van der Linden - CTO
> Groenedijk 12, 4441 TJ  Ovezande (Zeeland, Nederland)
> milo@3dsite.nl <mailto:milo@3dsite.nl>
> http://www.3dsite.nl
> 
> 
> <skype:milovanderlinden?chat>
>  
> 
> 
> De informatie verzonden met dit e-mail bericht is uitsluitend bestemd
> voor de geadresseerde(n). Gebruik van deze informatie door andere dan de
> geadresseerde(n) is verboden. Openbaarmaking, vermenigvuldiging,
> verspreiding en/of verstrekking van deze informatie aan derde is niet
> toegestaan. Kopi?ren en/of misbruiken van ingesloten afbeeldingen en/of
> bestanden is wettelijke verboden en strafbaar. 3DSite staat niet in voor
> de juiste en volledige overbrenging van de inhoud van een verzonden
> e-mail, noch voor tijdig ontvangst daarvan. Op al onze leveringen,
> aanbiedingen en verkopen zijn van toepassing onze Algemene Voorwaarden,
> zoals gedeponeerd bij de K.v.K. te Middelburg. 3DSite
> 
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Mateusz Loskot
http://mateusz.loskot.net

From szekerest at gmail.com  Fri Jun  1 10:13:08 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Re: Supported projections/transformation in a GUI
In-Reply-To: <f3p5v4$edn$1@sea.gmane.org>
References: <f3eenm$qaj$1@sea.gmane.org> <f3p5v4$edn$1@sea.gmane.org>
Message-ID: <f3b73b7d0706010713g38656193xcd9b2263f5b2acdd@mail.gmail.com>

Yes. I don't know we have such kind of categorization prepared. I
think the best thing you can do to parse any of the files containing
the projections like proj/nad/epsg and display a list with the
available values.

Best regards,

Tamas


2007/6/1, Tomas R <monshi@home.se>:
> As I thought, no easy way...
>
> If there was, a reply would have found the way to this thread.
>
> Tomas R skrev:
> > Ok folks, here is question to crack.
> >
> > Simple idea:
> > User can pick either a file with geo-data in it or an image without.
> > If it is a file without geo-data the user is to be able to select
> > which projection/coordinate system the image is saved in and also set
> > up the coordinates of the edges of the map.  A transformation of
> > coordinates between map local projection and WGS84 will the be set up.
> >
> > My big problem is the case with no geo-data. I need to set up an
> > interface which an ordinary user can use, a user with not to much
> > experience of projections and such stuff.
> >
> > Firstly I need to sort out which, in GDAL, available projections that
> > are common. Just to reduce the list.
> > Next I need to find a friendly name to present them with.
> > If possible - sort them corresponding to where they are used, for
> > example  the user can select USA and get all the UTM-zones (and by
> > knowing the coordinates of the map select the right zone). Or replace
> > USA with a European country and their specific common projections.
> >
> > I'm a bit lost, don't know where to start. The ideas above is just
> > loose ideas.
> >
> > Suggestions? Any tools in GDAL that can help me? Anyway to look up the
> > available projections in GDAL? Anyway to sort out the "valid"
> > projections?
> >
> > Working with GDAL from C#.
> >
> > Pls
> > /tomas
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From monshi at home.se  Fri Jun  1 10:27:51 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Re: Supported projections/transformation in a GUI
In-Reply-To: <f3b73b7d0706010713g38656193xcd9b2263f5b2acdd@mail.gmail.com>
References: <f3eenm$qaj$1@sea.gmane.org> <f3p5v4$edn$1@sea.gmane.org>
	<f3b73b7d0706010713g38656193xcd9b2263f5b2acdd@mail.gmail.com>
Message-ID: <f3pad6$vsq$1@sea.gmane.org>

That is one approach.

But the one I think I will start with is selecting a number of "common" 
projection and add more as more users use the application and request 
support for their native map. Will of course support all the in gdal 
available projections/transformatins from the start but probably not 
from an easy-to-use interface.

oh - and Tamas - when you answer to my post I see my email is included 
in the header. The damage is done - but why is it there? A setting in my 
program (Thunderbird) or in yours?


/Tomas
Tamas Szekeres skrev:
> Yes. I don't know we have such kind of categorization prepared. I
> think the best thing you can do to parse any of the files containing
> the projections like proj/nad/epsg and display a list with the
> available values.
>
> Best regards,
>
> Tamas
>
>
> 2007/6/1, Tomas R <monshi@home.se>:
>> As I thought, no easy way...
>>
>> If there was, a reply would have found the way to this thread.
>>
>> Tomas R skrev:
>> > Ok folks, here is question to crack.
>> >
>> > Simple idea:
>> > User can pick either a file with geo-data in it or an image without.
>> > If it is a file without geo-data the user is to be able to select
>> > which projection/coordinate system the image is saved in and also set
>> > up the coordinates of the edges of the map.  A transformation of
>> > coordinates between map local projection and WGS84 will the be set up.
>> >
>> > My big problem is the case with no geo-data. I need to set up an
>> > interface which an ordinary user can use, a user with not to much
>> > experience of projections and such stuff.
>> >
>> > Firstly I need to sort out which, in GDAL, available projections that
>> > are common. Just to reduce the list.
>> > Next I need to find a friendly name to present them with.
>> > If possible - sort them corresponding to where they are used, for
>> > example  the user can select USA and get all the UTM-zones (and by
>> > knowing the coordinates of the map select the right zone). Or replace
>> > USA with a European country and their specific common projections.
>> >
>> > I'm a bit lost, don't know where to start. The ideas above is just
>> > loose ideas.
>> >
>> > Suggestions? Any tools in GDAL that can help me? Anyway to look up the
>> > available projections in GDAL? Anyway to sort out the "valid"
>> > projections?
>> >
>> > Working with GDAL from C#.
>> >
>> > Pls
>> > /tomas
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>


From szekerest at gmail.com  Fri Jun  1 11:04:46 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] GDAL binders at FOSS4G 2007
In-Reply-To: <465FDF54.9050603@tkk.fi>
References: <465B30EA.5070809@tkk.fi>
	<f3b73b7d0705281403v3cf7d77dg18e1dde3fc8b607@mail.gmail.com>
	<465FDF54.9050603@tkk.fi>
Message-ID: <f3b73b7d0706010804p581ad03eo8644286314a0b612@mail.gmail.com>

That's cool. I'll add myself anyway and hopefully I'll be able to get
there. I also involved in GDAL/MapServer if we can harmonize the time
of the events.

Tamas


2007/6/1, Ari Jolma <ari.jolma@tkk.fi>:
> Now at http://wiki.osgeo.org/index.php/FOSS4G2007_CodeSprint#SWIG_Bindings
>
> Ari
>
>
>

From mitchelljj98 at gmail.com  Fri Jun  1 11:15:15 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] editing shapefiles geospatially or textually
Message-ID: <fa2ac0580706010815m3e13b84cg17555693748526d9@mail.gmail.com>

Hi,

I would like to be able to edit shapefiles geospatially or textually without
having to purchase ArcEditor.  Can you edit shapefiles geospatially or
textually within gdal or openEV_FW?

Thanks,

-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070601/77b86393/attachment.html
From larry at shafferinteractive.com  Sat Jun  2 19:43:18 2007
From: larry at shafferinteractive.com (Larry Shaffer)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] gdal_merge.py UTM rasters in different zones?
Message-ID: <46620096.4090700@shafferinteractive.com>

Hi,

I have 2 UTM satellite images in different zones and when using gdal_merge.py to merge them they act as if they are in only one zone.

I get the following verbose output during merge:

Filename: p033r029_7t20000712_z13_nn10.tif
File Size: 8678x7751x1
Pixel Size: 28.500000 x -28.500000
UL:(548283.000000,5051226.000000)   LR:(795606.000000,4830322.500000)
Copy 0,0,8678,7751 to 12567,185,8678,7751.

Filename: p032r029_7t20010825_z14_nn10.tif
File Size: 9029x8099x1
Pixel Size: 28.500000 x -28.500000
UL:(190123.500000,5056498.500000)   LR:(447450.000000,4825677.000000)
Copy 0,0,9029,8099 to 0,0,9029,8099.


The second file should mosaic, overlain on the right side of the first. But, it ends up far to the left as if the Easting and Northings are for the same zone (regardless of zone). Same happens in QGIS and OpenEV. 

If I gdalwarp the files into LatLon then everything works fine. Although, I do not want to re-project the data.

Is there a way to merge UTM rasters in different zones with gdal_merge.py, without re-projection?


gdalinfo for the files is as follows (reads proper LatLon coords):

### gdalinfo for p033r029_7t20000712_z13_nn10.tif
Driver: GTiff/GeoTIFF
Size is 8678, 7751
Coordinate System is:
PROJCS["WGS 84 / UTM zone 13N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-105],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32613"]]
Origin = (548283.000000000000000,5051226.000000000000000)
Pixel Size = (28.500000000000000,-28.500000000000000)
Metadata:
  AREA_OR_POINT=Point
  TIFFTAG_XRESOLUTION=72
  TIFFTAG_YRESOLUTION=72
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Corner Coordinates:
Upper Left  (  548283.000, 5051226.000) (104d22'50.71"W, 45d36'46.44"N)
Lower Left  (  548283.000, 4830322.500) (104d24'5.53"W, 43d37'27.56"N)
Upper Right (  795606.000, 5051226.000) (101d12'46.11"W, 45d33'6.32"N)
Lower Right (  795606.000, 4830322.500) (101d20'22.48"W, 43d34'2.10"N)
Center      (  671944.500, 4940774.250) (102d50'0.33"W, 44d35'59.16"N)
Band 1 Block=8678x1 Type=Byte, ColorInterp=Gray


### gdalinfo for p032r029_7t20010825_z14_nn10.tif
Driver: GTiff/GeoTIFF
Size is 9029, 8099
Coordinate System is:
PROJCS["WGS 84 / UTM zone 14N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-99],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32614"]]
Origin = (190123.500000000000000,5056498.500000000000000)
Pixel Size = (28.500000000000000,-28.500000000000000)
Metadata:
  AREA_OR_POINT=Point
  TIFFTAG_XRESOLUTION=72
  TIFFTAG_YRESOLUTION=72
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Corner Coordinates:
Upper Left  (  190123.500, 5056498.500) (102d58'22.55"W, 45d35'34.43"N)
Lower Left  (  190123.500, 4825677.000) (102d50'2.76"W, 43d31'11.01"N)
Upper Right (  447450.000, 5056498.500) ( 99d40'28.34"W, 45d39'36.16"N)
Lower Right (  447450.000, 4825677.000) ( 99d39'3.23"W, 43d34'55.95"N)
Center      (  318786.750, 4941087.750) (101d17'0.19"W, 44d36'1.12"N)

From pmin00 at gmail.com  Sun Jun  3 05:38:22 2007
From: pmin00 at gmail.com (Patrick Min)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] ADF -> AAIGrid, "IReadBlock failed"
Message-ID: <27e900d30706030238m7f01108du6caae2ce3b93b49e@mail.gmail.com>

hello Frank,

> But I'm still not clear on how the tile naming works, and without having
> that well understood I think it is going to be hard for me to fix the driver.

my current guess is that this is the order:
w001001
w001000
z001001
z001002

which seems a bit weird. Sometime next week I'll plot an image of the
map (probably subsampled), to confirm that this is the actual order.
I'll keep you posted.

thanks,

Patrick

From pmin00 at gmail.com  Sun Jun  3 09:39:07 2007
From: pmin00 at gmail.com (Patrick Min)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] ADF -> AAIGrid, "IReadBlock failed"
In-Reply-To: <27e900d30706030238m7f01108du6caae2ce3b93b49e@mail.gmail.com>
References: <27e900d30706030238m7f01108du6caae2ce3b93b49e@mail.gmail.com>
Message-ID: <27e900d30706030639w1530f2f3ta91301bf055da961@mail.gmail.com>

On 6/3/07, Patrick Min <pmin00@gmail.com> wrote:
> my current guess is that this is the order:
> w001001
> w001000
> z001001
> z001002

I can confirm that this is the correct ordering
(tested by converting bottom and top slices of the files to PNG,
and appending them).

Patrick

From schut at sarvision.nl  Tue Jun  5 06:14:13 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] gdal_array.SaveArray problem
Message-ID: <46653775.1000608@sarvision.nl>

Hi folks,

the ngpython gdal_array.SaveArray method does something picky with my
arrays... When I try to access the array I have saved, I get a segfault.
When saving a copy of the array, everything goes fine.

This code segfaults:

#!/usr/bin/python

import gdal, gdal_array, numpy

a = numpy.arange(3*100*150, dtype=numpy.uint16).reshape((3, 100, 150))
gdal_array.SaveArray(a, "gdalSaveArrayTest.tif")
print a[0,0,0] # segfaults here.

And this code does not segfault:

#!/usr/bin/python

import gdal, gdal_array, numpy

a = numpy.arange(3*100*150, dtype=numpy.uint16).reshape((3, 100, 150))
gdal_array.SaveArray(a.copy(), "gdalSaveArrayTest.tif")
print a[0,0,0] # OK


Apparently it has something to do with refcounts; try this in a python
interpreter (a is a numpy array):
>>> gdal_array.SaveArray(a, "test.tif")
<gdal.Dataset; proxy of <Swig Object of type 'GDALDatasetShadow *' at
0xb57fa0> >
>>> a
<refcnt -4294967291 at 0x9648c0>


This is with gdal from recent svn, and numpy too.

From RSuddaby at NRCan.gc.ca  Tue Jun  5 11:32:51 2007
From: RSuddaby at NRCan.gc.ca (Suddaby, Rod)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Convert point data to raster
Message-ID: <10D1A5C374FC064AA08164EECED7873901063EEB@S0-OTT-X3.nrn.nrcan.gc.ca>

Hi List:

I have a set of data points arranged in a regular grid that I would like
to convert to a raster (TIFF). What functions would I need to look at in
the GDAL C-API in order to accomplish this?
I'm not a GIS expert but it would seem that this would be a relatively
straight-forward process. I would really appreciate any help or
direction.

Thanks,
Rod.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070605/7a135b60/attachment.html
From tutey at o2.pl  Tue Jun  5 13:17:43 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] r.out.gdal vs gdal_translate vs gdalwarp
In-Reply-To: <464A1E10.7040807@pobox.com>
References: <46422286.1050300@o2.pl> <46423280.1040603@o2.pl>
	<46471693.9040701@o2.pl> <46484E88.6070102@pobox.com>
	<10629998.post@talk.nabble.com> <464A1E10.7040807@pobox.com>
Message-ID: <46659AB7.4050405@o2.pl>

Frank Warmerdam wrote:
> Maciej Sieczka wrote:
>> 'Frank Warmerdam-2' wrote:

>> Frank,
>> 
>> Thanks much for your answer! I'm so glad the hear this is not a
>> data corruption issue or whatsoever. However, wouldn't you
>> consider it a missfeature that gdalwarp creates circa 25% bigger
>> GeoTIFFs than gdal_translate does? The bigger deal it is the 
>> bigger is the input dataset.  For me it is quite a difference
>> whether I get a 3 GB or 4 GB raster. Do you think gdalwarp could
>> follow gdal_translate in this regard? If possible of course.

> The particular problem I saw in the case I analysed should actually
> get less and less significant as the dataset gets larger.  If you
> are seeing much larger files for big files then a different issue is
> likely to be coming into play.

Sorry for long time no reply. I have had an opportynity to dig into
this in some more detail at last. Indeed the bigger (in general) the
output dataset, the smaller the difference in gdal_translate and
gdalwarp output size. At circa 230 kB, the difference becomes almost
neglectable.

More info on the graph [1] (X axis should read "gdal_translate output
size [kB]" - sorry for this glitch).

Each raster was created and "measured" by script [2] and those
measurements were used to create the graph. The very input raster is
here [3].

One conclussion is that if someone creates, say, 500 10 kB rasters with
gdal_translate, they occupy 5 MB, while if created with gdalwarp it's 2
times more. This is a drastic scenario of course, but likely to happen.
Anyway, for anyone using GDAL to create rasters smaller than 200-250 kB
it is important. I'm one, and moreover I use those rasters as backdrop
on mobile GIS, where storage space is scarce.

I was wondering if, by any chance, it could be possible to make
gdalwarp to behave like gdal_translate in this respect?

Best Regards,
Maciek

[1]http://kufaya.googlepages.com/gt_vs_gw.pdf
[2]http://kufaya.googlepages.com/gt_vs_gw.txt
[3]http://kufaya.googlepages.com/one.tif

From warmerdam at pobox.com  Tue Jun  5 13:52:01 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] r.out.gdal vs gdal_translate vs gdalwarp
In-Reply-To: <46659AB7.4050405@o2.pl>
References: <46422286.1050300@o2.pl> <46423280.1040603@o2.pl>
	<46471693.9040701@o2.pl> <46484E88.6070102@pobox.com>
	<10629998.post@talk.nabble.com> <464A1E10.7040807@pobox.com>
	<46659AB7.4050405@o2.pl>
Message-ID: <4665A2C1.5030305@pobox.com>

Maciej Sieczka wrote:
> I was wondering if, by any chance, it could be possible to make
> gdalwarp to behave like gdal_translate in this respect?

Maciej,

You could file a bug report on the issue, but it isn't likely to be very
high priority since there is a straight forward workaround.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From tutey at o2.pl  Tue Jun  5 13:53:35 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] r.out.gdal vs gdal_translate vs gdalwarp
In-Reply-To: <4665A2C1.5030305@pobox.com>
References: <46422286.1050300@o2.pl> <46423280.1040603@o2.pl>
	<46471693.9040701@o2.pl> <46484E88.6070102@pobox.com>
	<10629998.post@talk.nabble.com> <464A1E10.7040807@pobox.com>
	<46659AB7.4050405@o2.pl> <4665A2C1.5030305@pobox.com>
Message-ID: <4665A31F.1090202@o2.pl>

Frank Warmerdam wrote:
> Maciej Sieczka wrote:
>> I was wondering if, by any chance, it could be possible to make
>> gdalwarp to behave like gdal_translate in this respect?

> You could file a bug report on the issue, but it isn't likely to be very
> high priority since there is a straight forward workaround.

Ok. But I wanted to add that I've been using gdal_translate and
gdalwarp for few years now, and I only learned that the problem exists.
I never expected that any GDAL program will waste bytes. When I noticed
one did, at first I suspected a bug. I believe other users may think
the same way (it is a sane expectation, I guess).

>From now on I will remember to feed gdalwarp's output into
gdal_translate in situations when bytes are precious. I'm glad to know
the workaround now. Thanks.

Maciek

From fabio at synapsisbrasil.com.br  Tue Jun  5 16:01:12 2007
From: fabio at synapsisbrasil.com.br (=?iso-8859-1?Q?Kaminski=2C_F=E1bio_-_PROVIDER?=)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] experiences using SQLite, anyone?
Message-ID: <0501AE5E961A4D42899FBCC1755CCE1501D5D5F1@forsyn01ex01.for.e-corpnet.org>

Folks,

 

            Im using the Gdal and Ogr api in c++, primarily using postgis to hold the data.  and for this particular architeture the simplicity from SQLite is something that I want, in this particular case I don't need transactions and multiple clients support.

            Im just wondering if there is some kind of limitation from SQLite, like database size, or because its limited just to WKT, or the postgis functions comming from geos.. like Intersect.. (after I got a OGRGeometry can I use the encapsulated geos library and compare two or more geometries..im I right?).

            

            Somebody who use SQLite with ogr has any comments? Good and bad experiences are welcome :-)

 

 

Thanks for help!

 

Fabio Kaminski

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070605/878fc7cd/attachment.html
From craigrthunter at gmail.com  Tue Jun  5 16:25:19 2007
From: craigrthunter at gmail.com (Craig Hunter)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] OGR m-values
Message-ID: <10977142.post@talk.nabble.com>


Hi Listers,

I found a reference to supporting M-values (measure values) in the future
for the vector based ogr project.  I was wondering if this was currently
being worked on? or if anyone had additional information in regards to this
ambition.

Thanks,

Craig.
-- 
View this message in context: http://www.nabble.com/OGR-m-values-tf3874108.html#a10977142
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From warmerdam at pobox.com  Tue Jun  5 16:59:16 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] OGR m-values
In-Reply-To: <10977142.post@talk.nabble.com>
References: <10977142.post@talk.nabble.com>
Message-ID: <4665CEA4.10500@pobox.com>

Craig Hunter wrote:
> Hi Listers,
> 
> I found a reference to supporting M-values (measure values) in the future
> for the vector based ogr project.  I was wondering if this was currently
> being worked on? or if anyone had additional information in regards to this
> ambition.

Craig,

This is not planned for GDAL/OGR 1.5.  But it is part of the newly (or
soon?) released OGC simple features specification, so I hope to add it in
the next year or two.  This will be a substantial effort, and it remains
to be seen if there will be financial or development support for such an
overhaul to OGR.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ivan.mjartan at geovap.cz  Wed Jun  6 04:17:31 2007
From: ivan.mjartan at geovap.cz (Ivan Mjartan)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] create Authorized WMS 1.1.1 
Message-ID: <000801c7a813$210be0a0$1a01a8c0@pc24>

Hi there, 

 

I have question, Sorry may be this is wrong group. 

So I need add authorization to my WMS service. I have to produce WMS for ESRI clients. I wrote this base on .Net C# . I am keeping WMS 1.1.1 standard so I have no problem consume this service in ArcMap but without authorization. I try BASIC HTTP authorization but I am success just in non ESRI clients.  

Is there way to create Authorized WMS for ESRI clients? Or what kind of  authorization I have to use ? 



I thing that WMS is wrong way for ESRI clients, may be I have to create ArcIMS service. I know that ArcIMS is similar protocol like WMS but what I don't know is what kind of authorization is used in ArcIMS service. 

 

Is there somebody how had same problem like me?

Thanks a lot Ivan Mjartan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070606/4da45cbc/attachment.html
From tutey at o2.pl  Wed Jun  6 08:37:46 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] r.out.gdal vs gdal_translate vs gdalwarp
In-Reply-To: <4665A2C1.5030305@pobox.com>
References: <46422286.1050300@o2.pl> <46423280.1040603@o2.pl>
	<46471693.9040701@o2.pl> <46484E88.6070102@pobox.com>
	<10629998.post@talk.nabble.com> <464A1E10.7040807@pobox.com>
	<46659AB7.4050405@o2.pl> <4665A2C1.5030305@pobox.com>
Message-ID: <10987837.post@talk.nabble.com>


"Frank Warmerdam-2" wrote:

>You could file a bug report on the issue, but it isn't likely to be very
> high priority since there is a straight forward workaround.

I have just noticed that using compression might well boost the difference
in gdalwarp and gdal_translate output.

I have a GeoTIFF which is 47,605,938 bytes uncompressed. Deflated with
gdalwarp it's 20,513,882 bytes, while deflated with gdal_translate it's
13,734,032 bytes.  7 MBs, 45%  difference.

It looks like it is *always* a good idea to process any gdalwarp GeoTIFF
output with gdal_translate.

Maciek

-- 
View this message in context: http://www.nabble.com/r.out.gdal-vs-gdal_translate-vs-gdalwarp-tf3717930.html#a10987837
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From warmerdam at pobox.com  Wed Jun  6 10:34:17 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] r.out.gdal vs gdal_translate vs gdalwarp
In-Reply-To: <10987837.post@talk.nabble.com>
References: <46422286.1050300@o2.pl> <46423280.1040603@o2.pl>
	<46471693.9040701@o2.pl> <46484E88.6070102@pobox.com>
	<10629998.post@talk.nabble.com> <464A1E10.7040807@pobox.com>
	<46659AB7.4050405@o2.pl> <4665A2C1.5030305@pobox.com>
	<10987837.post@talk.nabble.com>
Message-ID: <4666C5E9.5020201@pobox.com>

Maciej Sieczka wrote:
> "Frank Warmerdam-2" wrote:
> 
>> You could file a bug report on the issue, but it isn't likely to be very
>> high priority since there is a straight forward workaround.
> 
> I have just noticed that using compression might well boost the difference
> in gdalwarp and gdal_translate output.
> 
> I have a GeoTIFF which is 47,605,938 bytes uncompressed. Deflated with
> gdalwarp it's 20,513,882 bytes, while deflated with gdal_translate it's
> 13,734,032 bytes.  7 MBs, 45%  difference.
> 
> It looks like it is *always* a good idea to process any gdalwarp GeoTIFF
> output with gdal_translate.

Maciek,

I believe this is a different issue.  "Random update" of compressed images
was not traditionally supported by libtiff, but I have hacked in some degree
of support for this over the last half dozen years.  This is sufficient to
allow gdalwarp to write compressed geotiff files.

But, when a given tile or scanline gets rewritten (since gdalwarp operates
on regions not related to tile boundaries) it is moved to the end of the
file if it will be larger on disk than the previous version of that tile
was.  The old space is abandoned and not reused.

I suspect this is the effect you are running into.

In this case gdal_translate is also helpful, though I can't really agree
with the rule in complete generality.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Jun  6 10:42:01 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] create Authorized WMS 1.1.1
In-Reply-To: <000801c7a813$210be0a0$1a01a8c0@pc24>
References: <000801c7a813$210be0a0$1a01a8c0@pc24>
Message-ID: <4666C7B9.2090902@pobox.com>

Ivan Mjartan wrote:
> Hi there,
> 
>  
> 
> I have question, Sorry may be this is wrong group.
> 
> So I need add authorization to my WMS service. I have to produce WMS for 
> ESRI clients. I wrote this base on .Net C# ? I am keeping WMS 1.1.1 
> standard so I have no problem consume this service in ArcMap but without 
> authorization. I try BASIC HTTP authorization but I am success just in 
> non ESRI clients.  
> 
> Is there way to create Authorized WMS for ESRI clients? Or what kind of 
>  authorization I have to use ?
> 
> I thing that WMS is wrong way for ESRI clients, may be I have to create 
> ArcIMS service. I know that ArcIMS is similar protocol like WMS but what 
> I don?t know is what kind of authorization is used in ArcIMS service.
>
> Is there somebody how had same problem like me?

Ivan,

I'd respectfully suggest this is the wrong group to ask this question.  I'd
suggest subscribing to the following list and asking there, or asking on the
appropriate ESRI forums.

   http://lists.eogeo.org/mailman/listinfo/wms-dev

If the ArcGIS WMS client does not support a prompt based authorization
mechanism you may need to engineer some sort of special authorization key
into your URLs manually.  That is the only mechanism currently available
for the GDAL WCS client for instance.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hulst at argoss.nl  Wed Jun  6 10:05:18 2007
From: hulst at argoss.nl (A.Th.C. Hulst)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Trac ticket
Message-ID: <200706061605.18644.hulst@argoss.nl>

Hi,

I try to add a bug / feature add report but get:

Forbidden
TICKET_CREATE privileges are required to perform this operation

Am I doing something wrong here?

Regards,
Sander





From warmerdam at pobox.com  Wed Jun  6 11:25:19 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Trac ticket
In-Reply-To: <200706061605.18644.hulst@argoss.nl>
References: <200706061605.18644.hulst@argoss.nl>
Message-ID: <4666D1DF.2000209@pobox.com>

A.Th.C. Hulst wrote:
> Hi,
> 
> I try to add a bug / feature add report but get:
> 
> Forbidden
> TICKET_CREATE privileges are required to perform this operation
> 
> Am I doing something wrong here?

Sander,

Per the instructions on http://trac.osgeo.org/gdal you will need to
register an OSGeo userid and then login using it before you can submit
a ticket.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ivan.lucena at pmldnet.com  Wed Jun  6 10:35:09 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Building a customized raster format in ArcGIS 9.2 using
	GDAL
Message-ID: <4666C61D.8040503@pmldnet.com>

Hi all,

Does anybody have ever followed those steps to add a raster format 
support in ArcGIS using GDAL?

http://webhelp.esri.com/arcgisdesktop/9.2/index.cfm?TopicName=Supported_raster_dataset_file_formats 


If I understood it correctly, all you need to do is to build a GDAL 
library and give it a name like (let?s use GRIB as an example) 
gdal_grib.dll or gdal_grib.so, copy it to the ArcGIS's Bin folder and 
update "RasterFormats.dat" by adding:

<e on="y" nm="GRIB" ex="*.grib" et="GRIB" at="0x27" />

And then: Vuala! You can display and do all kind of stuff with your new 
format.

But it is not working. :-(

I can see the new format in the UI "Tools/Options/Raster/Raster 
Formats", but when I try to load images I get:

"Invalid raster dataset. Failed to create raster layer."

I have some experience with the "legacy method" of adding a custom dll 
and I thought that this one would be easier. But...

Does anybody have done that before? What is the trick?

Thanks in advance,

Ivan

From jicicuendez at gmv.es  Wed Jun  6 11:26:02 2007
From: jicicuendez at gmv.es (juan)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] JP2 files (JPEG2000)
Message-ID: <loom.20070606T171909-883@post.gmane.org>

Dear all,

I have to read some JP2 geocoded image files that have been created with Kakadu 
software (I believe). The thing is that using gdal drivers as in the tutorial 
but I see the file, dimensions of the image and type but I seem to loose the 
geo-referencing information and also when I try to access the values they all 
return a zero value. 

Does anyone tell me if GDAL supports this type of files? If not, does anyone 
know a solution to read these files?

Thanks in advance,
Juan


From warmerdam at pobox.com  Wed Jun  6 13:24:21 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Building a customized raster format in ArcGIS 9.2
	using GDAL
In-Reply-To: <4666C61D.8040503@pmldnet.com>
References: <4666C61D.8040503@pmldnet.com>
Message-ID: <4666EDC5.5020603@pobox.com>

Lucena, Ivan wrote:
> Hi all,
> 
> Does anybody have ever followed those steps to add a raster format 
> support in ArcGIS using GDAL?
> 
> http://webhelp.esri.com/arcgisdesktop/9.2/index.cfm?TopicName=Supported_raster_dataset_file_formats 
> 
> 
> If I understood it correctly, all you need to do is to build a GDAL 
> library and give it a name like (let?s use GRIB as an example) 
> gdal_grib.dll or gdal_grib.so, copy it to the ArcGIS's Bin folder and 

Ivan,

GDAL plugins are not complete gdal libraries.  They are just a single
driver linked against GDAL and containing a GDALRegister_GRIB() entry
point.  Note that the short name for the driver in the DLL name has to
match in case with the registry entry point, so you need to name the
DLL gdal_GRIB.DLL if the entry pointis GDALRegister_GRIB().

The gdal/frmts/mrsid/makefile.vc includes a plugin target as an example
of how to build the MrSID driver as a plugin.

Normally GDAL looks for plugins in the directory indicated in the
GDAL_DRIVER_PATH environment variable.  On windows it also tries to
look in a gdalplugins directory under the directory containing the
currently running .exe.

I don't know if ArcGIS is otherwise adjusting the driver load path.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Christian.Martel at drdc-rddc.gc.ca  Wed Jun  6 12:29:26 2007
From: Christian.Martel at drdc-rddc.gc.ca (Martel, Christian)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] spatial intersection of ogr geometry and shapefile
	features
Message-ID: <D8AD814B3EB3A945B7F149E41240DB6D103915@valcartierex01.valcartier.drdc-rddc.gc.ca>

Hi,

I have an OGR geometry and a shapefile of all worldwide countries. I
need to find which countries intersect my geometry (bbox of country is
fine). I'm working in Python with FWTools. I found some hints in the
list but I need more help.

What should I try ?
- Create a qix index file and work with shapefile ? If so, how to
compare geometries with DataSource.ExecuteSQL(...) command ? How to use
the index for that comparison ?
- In a loop, build ogr geometry of each country and compare it with the
current geometry (not very efficient I think) ?

I have experience with gdal/ogr with python in fwtool and I know how to
write/read shapefiles.

Thanks,
Christian



From warmerdam at pobox.com  Wed Jun  6 14:10:43 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] spatial intersection of ogr geometry and shapefile
	features
In-Reply-To: <D8AD814B3EB3A945B7F149E41240DB6D103915@valcartierex01.valcartier.drdc-rddc.gc.ca>
References: <D8AD814B3EB3A945B7F149E41240DB6D103915@valcartierex01.valcartier.drdc-rddc.gc.ca>
Message-ID: <4666F8A3.7040208@pobox.com>

Martel, Christian wrote:
> Hi,
> 
> I have an OGR geometry and a shapefile of all worldwide countries. I
> need to find which countries intersect my geometry (bbox of country is
> fine). I'm working in Python with FWTools. I found some hints in the
> list but I need more help.
> 
> What should I try ?
> - Create a qix index file and work with shapefile ? If so, how to
> compare geometries with DataSource.ExecuteSQL(...) command ? How to use
> the index for that comparison ?
> - In a loop, build ogr geometry of each country and compare it with the
> current geometry (not very efficient I think) ?
> 
> I have experience with gdal/ogr with python in fwtool and I know how to
> write/read shapefiles.

Christian,

Before reading the features from the shapefile layer of countries,
first call SetSpatialFilter() passing in the geometry you want to
intersect with.  The spatial filter will be used to restrict the set
of features (countries) you get back.

If speed is important (hard to imagine with a list of countries) then
you could also build a spatial index on the country shapefile but that
is necessary to make things work.

The test script at:
   http://trac.osgeo.org/gdal/browser/trunk/autotest/ogr/ogr_basic_test.py#L78

should be a useful example-in-action of spatial filtering from python.

If you want to do a more details geometric test after preliminary spatial
filtering you might want to review the GEOS based examples at:

   http://trac.osgeo.org/gdal/browser/trunk/autotest/ogr/ogr_geos.py

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From pgao at esri.com  Wed Jun  6 13:13:36 2007
From: pgao at esri.com (Peng Gao)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Building a customized raster format in ArcGIS 9.2using
	GDAL
In-Reply-To: <4666EDC5.5020603@pobox.com>
References: <4666C61D.8040503@pmldnet.com> <4666EDC5.5020603@pobox.com>
Message-ID: <A383B271E8D0DF47B51972FCEB438DC702C32095@twistedwire.esri.com>

> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org 
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of 
> Frank Warmerdam
> Sent: Wednesday, June 06, 2007 10:24 AM
> To: Lucena, Ivan
> Cc: gdal-dev
> Subject: Re: [Gdal-dev] Building a customized raster format 
> in ArcGIS 9.2using GDAL
> 
> Lucena, Ivan wrote:
> > Hi all,
> > 
> > Does anybody have ever followed those steps to add a raster format 
> > support in ArcGIS using GDAL?
> > 
> > 
> http://webhelp.esri.com/arcgisdesktop/9.2/index.cfm?TopicName=Supporte
> > d_raster_dataset_file_formats
> > 
> > 
> > If I understood it correctly, all you need to do is to build a GDAL 
> > library and give it a name like (let's use GRIB as an example) 
> > gdal_grib.dll or gdal_grib.so, copy it to the ArcGIS's Bin 
> folder and
> 
> Ivan,
> 
> GDAL plugins are not complete gdal libraries.  They are just 
> a single driver linked against GDAL and containing a 
> GDALRegister_GRIB() entry point.  Note that the short name 
> for the driver in the DLL name has to match in case with the 
> registry entry point, so you need to name the DLL 
> gdal_GRIB.DLL if the entry pointis GDALRegister_GRIB().
> 
> The gdal/frmts/mrsid/makefile.vc includes a plugin target as 
> an example of how to build the MrSID driver as a plugin.
> 
> Normally GDAL looks for plugins in the directory indicated in 
> the GDAL_DRIVER_PATH environment variable.  On windows it 
> also tries to look in a gdalplugins directory under the 
> directory containing the currently running .exe.
> 
> I don't know if ArcGIS is otherwise adjusting the driver load path.
> 

ArcGIS uses gdalplugins directory under the directory containing the
currently 
running .exe ("ArcGIS\Bin\gdalplugins").

We have found that, while there are success stories, it's hard to build 
a plugin using standard GDAL release,
and make it work with the gdal*.dll distributed with a particular ArcGIS

release, because of header mismatch, and etc. We plan to make the
matching
include and lib files available for download if there is enough
interest.
Also on Windows ArcGIS 92, and its GDAL library, are built using MSVC7.

Gao, Peng


From ivan.lucena at pmldnet.com  Wed Jun  6 13:27:56 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Building a customized raster format in ArcGIS 9.2using
	GDAL
In-Reply-To: <A383B271E8D0DF47B51972FCEB438DC702C32095@twistedwire.esri.com>
References: <4666C61D.8040503@pmldnet.com> <4666EDC5.5020603@pobox.com>
	<A383B271E8D0DF47B51972FCEB438DC702C32095@twistedwire.esri.com>
Message-ID: <4666EE9C.5040107@pmldnet.com>

Frank, Gao,

Thank you very much.

Ivan

Peng Gao wrote:
>> -----Original Message-----
>> From: gdal-dev-bounces@lists.maptools.org 
>> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of 
>> Frank Warmerdam
>> Sent: Wednesday, June 06, 2007 10:24 AM
>> To: Lucena, Ivan
>> Cc: gdal-dev
>> Subject: Re: [Gdal-dev] Building a customized raster format 
>> in ArcGIS 9.2using GDAL
>>
>> Lucena, Ivan wrote:
>>     
>>> Hi all,
>>>
>>> Does anybody have ever followed those steps to add a raster format 
>>> support in ArcGIS using GDAL?
>>>
>>>
>>>       
>> http://webhelp.esri.com/arcgisdesktop/9.2/index.cfm?TopicName=Supporte
>>     
>>> d_raster_dataset_file_formats
>>>
>>>
>>> If I understood it correctly, all you need to do is to build a GDAL 
>>> library and give it a name like (let's use GRIB as an example) 
>>> gdal_grib.dll or gdal_grib.so, copy it to the ArcGIS's Bin 
>>>       
>> folder and
>>
>> Ivan,
>>
>> GDAL plugins are not complete gdal libraries.  They are just 
>> a single driver linked against GDAL and containing a 
>> GDALRegister_GRIB() entry point.  Note that the short name 
>> for the driver in the DLL name has to match in case with the 
>> registry entry point, so you need to name the DLL 
>> gdal_GRIB.DLL if the entry pointis GDALRegister_GRIB().
>>
>> The gdal/frmts/mrsid/makefile.vc includes a plugin target as 
>> an example of how to build the MrSID driver as a plugin.
>>
>> Normally GDAL looks for plugins in the directory indicated in 
>> the GDAL_DRIVER_PATH environment variable.  On windows it 
>> also tries to look in a gdalplugins directory under the 
>> directory containing the currently running .exe.
>>
>> I don't know if ArcGIS is otherwise adjusting the driver load path.
>>
>>     
>
> ArcGIS uses gdalplugins directory under the directory containing the
> currently 
> running .exe ("ArcGIS\Bin\gdalplugins").
>
> We have found that, while there are success stories, it's hard to build 
> a plugin using standard GDAL release,
> and make it work with the gdal*.dll distributed with a particular ArcGIS
>
> release, because of header mismatch, and etc. We plan to make the
> matching
> include and lib files available for download if there is enough
> interest.
> Also on Windows ArcGIS 92, and its GDAL library, are built using MSVC7.
>
> Gao, Peng
>
>
>   


From Christian.Martel at drdc-rddc.gc.ca  Wed Jun  6 14:04:42 2007
From: Christian.Martel at drdc-rddc.gc.ca (Martel, Christian)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] spatial intersection of ogr geometry and shapefile
	features
In-Reply-To: <4666F8A3.7040208@pobox.com>
References: <D8AD814B3EB3A945B7F149E41240DB6D103915@valcartierex01.valcartier.drdc-rddc.gc.ca>
	<4666F8A3.7040208@pobox.com>
Message-ID: <D8AD814B3EB3A945B7F149E41240DB6D103916@valcartierex01.valcartier.drdc-rddc.gc.ca>

Frank,

Thanks. This is the hint I was looking for.

I read in the doc about SetSpatialFilter:
"Currently this test is may be inaccurately implemented, but it is
guaranteed that all features who's envelope (as returned by
OGRGeometry::getEnvelope()) overlaps the envelope of the spatial filter
will be returned. This can result in more shapes being returned that
should strictly be the case."

It's ok because I only want a bbox comparison. Do you plan to update the
function to do an intersection test with the actual geometry ? If so I
should try something else to ensure my code will always return the same
result.

Thanks,
Christian

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: 6 juin 2007 14:11
To: Martel, Christian
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] spatial intersection of ogr geometry and
shapefile features

Martel, Christian wrote:
> Hi,
> 
> I have an OGR geometry and a shapefile of all worldwide countries. I 
> need to find which countries intersect my geometry (bbox of country is

> fine). I'm working in Python with FWTools. I found some hints in the 
> list but I need more help.
> 
> What should I try ?
> - Create a qix index file and work with shapefile ? If so, how to 
> compare geometries with DataSource.ExecuteSQL(...) command ? How to 
> use the index for that comparison ?
> - In a loop, build ogr geometry of each country and compare it with 
> the current geometry (not very efficient I think) ?
> 
> I have experience with gdal/ogr with python in fwtool and I know how 
> to write/read shapefiles.

Christian,

Before reading the features from the shapefile layer of countries, first
call SetSpatialFilter() passing in the geometry you want to intersect
with.  The spatial filter will be used to restrict the set of features
(countries) you get back.

If speed is important (hard to imagine with a list of countries) then
you could also build a spatial index on the country shapefile but that
is necessary to make things work.

The test script at:
 
http://trac.osgeo.org/gdal/browser/trunk/autotest/ogr/ogr_basic_test.py#
L78

should be a useful example-in-action of spatial filtering from python.

If you want to do a more details geometric test after preliminary
spatial filtering you might want to review the GEOS based examples at:

   http://trac.osgeo.org/gdal/browser/trunk/autotest/ogr/ogr_geos.py

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org



From warmerdam at pobox.com  Wed Jun  6 15:22:28 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Building a customized raster format in ArcGIS 9.2using
	GDAL
In-Reply-To: <A383B271E8D0DF47B51972FCEB438DC702C32095@twistedwire.esri.com>
References: <4666C61D.8040503@pmldnet.com> <4666EDC5.5020603@pobox.com>
	<A383B271E8D0DF47B51972FCEB438DC702C32095@twistedwire.esri.com>
Message-ID: <46670974.2090107@pobox.com>

Peng Gao wrote:
> ArcGIS uses gdalplugins directory under the directory containing the
> currently 
> running .exe ("ArcGIS\Bin\gdalplugins").
> 
> We have found that, while there are success stories, it's hard to build 
> a plugin using standard GDAL release,
> and make it work with the gdal*.dll distributed with a particular ArcGIS
> release, because of header mismatch, and etc. We plan to make the
> matching include and lib files available for download if there is enough
> interest. Also on Windows ArcGIS 92, and its GDAL library, are built using 
 > MSVC7.

Gao,

It would be desirable, in my mind, if we could have ArcGIS using a build
of GDAL that is ABI compatible with a stable release of GDAL and matching
the build configuration of the binaries distributed by the GDAL project.

For instance, if ArcGIS 9.3 uses the 1.4-esri branch of GDAL, built with
vc7 as we use for the GDAL binary builds, it should be possible to drop
any of the plugins distributed with GDAL's win32 builds.  Also, the
gdal win32 sdk could be easily used to develop additional plugins.

I'm also hoping to get MapGuide OS distributed with GDAL builds
corresponding to our "official release binaries" for the same reason.

After largely ignoring the issue of win32 binary releases targetted
at a particular stable ABI (such as GDAL 1.4) I'm now growing quite
keen on the idea, and the value of being able to prepare plugins
seperately and use them widely.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Jun  6 15:24:45 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] spatial intersection of ogr geometry and shapefile
	features
In-Reply-To: <D8AD814B3EB3A945B7F149E41240DB6D103916@valcartierex01.valcartier.drdc-rddc.gc.ca>
References: <D8AD814B3EB3A945B7F149E41240DB6D103915@valcartierex01.valcartier.drdc-rddc.gc.ca>
	<4666F8A3.7040208@pobox.com>
	<D8AD814B3EB3A945B7F149E41240DB6D103916@valcartierex01.valcartier.drdc-rddc.gc.ca>
Message-ID: <466709FD.8060806@pobox.com>

Martel, Christian wrote:
> Frank,
> 
> Thanks. This is the hint I was looking for.
> 
> I read in the doc about SetSpatialFilter:
> "Currently this test is may be inaccurately implemented, but it is
> guaranteed that all features who's envelope (as returned by
> OGRGeometry::getEnvelope()) overlaps the envelope of the spatial filter
> will be returned. This can result in more shapes being returned that
> should strictly be the case."
> 
> It's ok because I only want a bbox comparison. Do you plan to update the
> function to do an intersection test with the actual geometry ? If so I
> should try something else to ensure my code will always return the same
> result.

Christian,

In fact, right now if you build with GEOS support enabled for OGR and you
use a non-rectangular geometry with SetSpatialFilter() I believe it does
an exact test for most drivers.  Some drivers (such as RDBMS drivers)
implement the spatial test themselves and may only use bounding boxes.

If you very specifically only want a bounding box comparison, then you
should use a rectangular envelope for your target region, rather than an
irregular shape.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From alison_luo2001 at yahoo.com  Wed Jun  6 14:34:02 2007
From: alison_luo2001 at yahoo.com (Alison Luo)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] NITF image metadata domain field in GDAL - SUBDATASETS
Message-ID: <644448.80838.qm@web50507.mail.re2.yahoo.com>

I need to extract image data from NITF format metadata
field. I know there is a SUBDATASETS domain field for
this purpose. I used libraries from 
http://vterrain.org/Distrib/gdal.html .

But the SUBDATASETS domain is not recognized. Here's
my code:

	GDALAccess	access = GA_ReadOnly;
	GDALDataset*  imgDataset = NULL;
	const char* pszFilename =
ASFileSysDisplayStringFromPath(inFileSys, inPath);
	imgDataset = (GDALDataset*)GDALOpen(pszFilename,
access); 	

	GDALDriver* gDriver = imgDataset->GetDriver();
	const char* str =
gDriver->GetMetadataItem(SUBDATASETS);




      ____________________________________________________________________________________
Luggage? GPS? Comic books? 
Check out fitting gifts for grads at Yahoo! Search
http://search.yahoo.com/search?fr=oni_on_mail&p=graduation+gifts&cs=bz

From Christian.Martel at drdc-rddc.gc.ca  Wed Jun  6 14:39:23 2007
From: Christian.Martel at drdc-rddc.gc.ca (Martel, Christian)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] spatial intersection of ogr geometry and shapefile
	features
In-Reply-To: <466709FD.8060806@pobox.com>
References: <D8AD814B3EB3A945B7F149E41240DB6D103915@valcartierex01.valcartier.drdc-rddc.gc.ca>
	<4666F8A3.7040208@pobox.com>
	<D8AD814B3EB3A945B7F149E41240DB6D103916@valcartierex01.valcartier.drdc-rddc.gc.ca>
	<466709FD.8060806@pobox.com>
Message-ID: <D8AD814B3EB3A945B7F149E41240DB6D103918@valcartierex01.valcartier.drdc-rddc.gc.ca>

Frank,

With FWTools 1.1.3 I do not have GEOS support. It's not an issue because
SetSpatialFilter give a bbox comparison (I verified it). If I want an
intersection with the feature geometry instead of the bbox, I just need
to add an Intersection test. Otherwise, if I always want a bbox
comparison (even with future version of FWTools with GEOS support), I
will create a shp with bbox of countries.
Thanks for you help,
Christian

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: 6 juin 2007 15:25
To: Martel, Christian
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] spatial intersection of ogr geometry and
shapefile features

Martel, Christian wrote:
> Frank,
> 
> Thanks. This is the hint I was looking for.
> 
> I read in the doc about SetSpatialFilter:
> "Currently this test is may be inaccurately implemented, but it is 
> guaranteed that all features who's envelope (as returned by
> OGRGeometry::getEnvelope()) overlaps the envelope of the spatial 
> filter will be returned. This can result in more shapes being returned

> that should strictly be the case."
> 
> It's ok because I only want a bbox comparison. Do you plan to update 
> the function to do an intersection test with the actual geometry ? If 
> so I should try something else to ensure my code will always return 
> the same result.

Christian,

In fact, right now if you build with GEOS support enabled for OGR and
you use a non-rectangular geometry with SetSpatialFilter() I believe it
does an exact test for most drivers.  Some drivers (such as RDBMS
drivers) implement the spatial test themselves and may only use bounding
boxes.

If you very specifically only want a bounding box comparison, then you
should use a rectangular envelope for your target region, rather than an
irregular shape.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org



From warmerdam at pobox.com  Thu Jun  7 00:19:17 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Re: Motion: Extend Commiter Priveledges to Ray Gardener
Message-ID: <46678745.8040000@pobox.com>

Folks,

It seems I never closed this motion from November.  In any event, it
was approved with support from myself, Daniel and Howard.  I'm setting
up the access now for Ray who plans on  faster BT driver, Terragen driver
fixes, etc.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Klug.Stefan at gmx.de  Thu Jun  7 07:44:07 2007
From: Klug.Stefan at gmx.de (Stefan Klug)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] GDALScaledProgress confusion
Message-ID: <4667EF87.50902@gmx.de>

Hi,

I'm trying to use GDALScaledProgress and GDALCreateScaledProgress and 
I'm a bit confused by its correct usage.

The docs say at http://www.gdal.org/gdal_8h.html

pScaledProgress = GDALCreateScaledProgress <http://www.gdal.org/gdal_8h.html#462c1d7aa414cdacd608d62e1830ef43>( 0.0, 0.5, pfnProgress, pProgressData );
GDALDoLongSlowOperation( ..., GDALScaledProgressFunc, pProgressData );
GDALDestroyScaledProgress <http://www.gdal.org/gdal_8h.html#f1ac4100ae77f94983d45a33fc1b6fcd>( pScaledProgress );

shouldn't pScaledProgress be passed to GDALDoLongSlowOperation() instead of pProgressData?
This is the way it is used in /frmts/gtiff/geotiff.cpp.

I even got more confused when I read /frmts/gtiff/gt_overview.cpp where in line 330... it is used like this:
pScaledProgressData =  GDALCreateScaledProgress( ...,pfnProgress, pProgressData );
GDALRegenerateOverviews( ...,pfnProgress,pProgressData);
GDALDestroyScaledProgress( pScaledProgressData );

Here the scaled progress seems to be completely left out.
To me it looks like a small bug...

Would be nice if someone could shed some light on this.

Regards Stefan







From Sjur.A.Kolberg at sintef.no  Thu Jun  7 09:19:33 2007
From: Sjur.A.Kolberg at sintef.no (Kolberg Sjur A)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Does GDAL handle rotated spheres?
Message-ID: <AC3559779B145744A3FA06C52D00BD0F02102E78@SINTEFXCH01.sintef.no>

Hello list,

Does GDAL handle rotated spheres?

According to this mail from 2005, GDAL re-implements a subset of Proj4's keycodes, unfortuately excluding ob_tran. 

http://lists.maptools.org/pipermail/gdal-dev/2005-June/005839.html <http://lists.maptools.org/pipermail/gdal-dev/2005-June/005839.html> 

Is this correctly described and still valid? 
Is there any known workaround or plans for extension?

This proj string seems to work in the proj shell command:
C:\Program Files\FWTools1.2.2>proj +proj=ob_tran +o_proj=eqc +lon_0=-40 +o_lat_p
=22 +x_0=639367 +y_0=1473324 +a=6371000 +b=6371000
-20 70
1387440.15 1817677.94
45 65
3557085.41 3450332.43

Whereas the same string results in error code 5 when using
OGRSpatialReference::ImportFromProj4()

C++ code:
// Source projection system in proj4 text format
msg = "+proj=ob_tran +o_proj=eqc +lon_0=-40 +o_lat_p=22 +x_0=-639367+y_0=1473324 +a=6371000.0 +b=6371000.0";
OGRErr errcode = ogrspatref.importFromProj4((LPCTSTR) msg);
if ( errcode != OGRERR_NONE)
{
    ASSERT(false);
    return "ERROR! Could not import coordinate system from proj4 format";
}
(gives errcode==5; // #define OGRERR_CORRUPT_DATA        5) 

fwtools 1.2.2 on Windows, Microsoft VS 2005.


Best regards,

Sjur Kolberg
SINTEF Energiforskning A/S
Sem S?lands vei 11
7465 Trondheim
tlf. 73 59 72 78
fax  73 59 72 50 



From warmerdam at pobox.com  Thu Jun  7 10:10:56 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Does GDAL handle rotated spheres?
In-Reply-To: <AC3559779B145744A3FA06C52D00BD0F02102E78@SINTEFXCH01.sintef.no>
References: <AC3559779B145744A3FA06C52D00BD0F02102E78@SINTEFXCH01.sintef.no>
Message-ID: <466811F0.9040509@pobox.com>

Kolberg Sjur A wrote:
> Hello list,
> 
> Does GDAL handle rotated spheres?
> 
> According to this mail from 2005, GDAL re-implements a subset of Proj4's
> keycodes, unfortuately excluding ob_tran.
> 
> http://lists.maptools.org/pipermail/gdal-dev/2005-June/005839.html
> <http://lists.maptools.org/pipermail/gdal-dev/2005-June/005839.html>
> 
> Is this correctly described and still valid? Is there any known workaround
> or plans for extension?

Sjur,

A mechanism to embed PROJ.4 strings with more parameters than are actually
known to OGR has been implemented.  I think if you used importFromWkt()
instead on the following you would get the transformation you wish.

PROJCS["Plate_Carree",
     GEOGCS["unnamed ellipse",
         DATUM["D_unknown",
             SPHEROID["Unknown",6371000,0]],
         PRIMEM["Greenwich",0],
         UNIT["Degree",0.017453292519943295]],
     PROJECTION["Plate_Carree"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",-40],
     PARAMETER["false_easting",639367],
     PARAMETER["false_northing",1473324],
     EXTENSION["PROJ4","+proj=ob_tran +o_proj=eqc +lon_0=-40 +o_lat_p=22 
+x_0=639367 +y_0=1473324 +a=6371000 +b=6371000 +wktext"],
     UNIT["Meter",1]]

Note the EXTENSION[] item which allows you to embed a specific PROJ.4
string to be used as the PROJ.4 version of this WKT.

I believe this was first released in GDAL/OGR 1.4.0.  I hope it helps.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Jun  7 10:14:38 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] GDALScaledProgress confusion
In-Reply-To: <4667EF87.50902@gmx.de>
References: <4667EF87.50902@gmx.de>
Message-ID: <466812CE.70907@pobox.com>

Stefan Klug wrote:
> Hi,
> 
> I'm trying to use GDALScaledProgress and GDALCreateScaledProgress and 
> I'm a bit confused by its correct usage.
> 
> The docs say at http://www.gdal.org/gdal_8h.html
> 
> pScaledProgress = GDALCreateScaledProgress 
> <http://www.gdal.org/gdal_8h.html#462c1d7aa414cdacd608d62e1830ef43>( 
> 0.0, 0.5, pfnProgress, pProgressData );
> GDALDoLongSlowOperation( ..., GDALScaledProgressFunc, pProgressData );
> GDALDestroyScaledProgress 
> <http://www.gdal.org/gdal_8h.html#f1ac4100ae77f94983d45a33fc1b6fcd>( 
> pScaledProgress );
> 
> shouldn't pScaledProgress be passed to GDALDoLongSlowOperation() instead 
> of pProgressData?
> This is the way it is used in /frmts/gtiff/geotiff.cpp.
> 
> I even got more confused when I read /frmts/gtiff/gt_overview.cpp where 
> in line 330... it is used like this:
> pScaledProgressData =  GDALCreateScaledProgress( ...,pfnProgress, 
> pProgressData );
> GDALRegenerateOverviews( ...,pfnProgress,pProgressData);
> GDALDestroyScaledProgress( pScaledProgressData );
> 
> Here the scaled progress seems to be completely left out.
> To me it looks like a small bug...
> 
> Would be nice if someone could shed some light on this.

Stefan,

You are completely correct.  I have corrected the documentation and it
should be reflected on the website in the upcoming hours.  It should be:

  *   int MyOperation( ..., GDALProgressFunc pfnProgress, void *pProgressData );
  *
  *   {
  *       void *pScaledProgress;
  *
  *       pScaledProgress = GDALCreateScaledProgress( 0.0, 0.5, pfnProgress,
  *                                                   pProgressData );
  *       GDALDoLongSlowOperation(...,GDALScaledProgressFunc, pScaledProgress );
  *       GDALDestroyScaledProgress( pScaledProgress );
  *
  *       pScaledProgress = GDALCreateScaledProgress( 0.5, 1.0, pfnProgress,
  *                                                   pProgressData );
  *       GDALDoAnotherOperation(..., GDALScaledProgressFunc, pScaledProgress );
  *       GDALDestroyScaledProgress( pScaledProgress );
  *
  *       return ...;
  *   }

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Klug.Stefan at gmx.de  Thu Jun  7 12:37:23 2007
From: Klug.Stefan at gmx.de (Stefan Klug)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] VRTSimpleSource bNoDataSet not initialized
Message-ID: <46683443.6010602@gmx.de>

Hi,

the subject says it all.
In VRTSimpleSource the bNoDataSet member is not initialized in the 
constructor.
In my opinion it should be initialized to FALSE.

This hit me when I tried to use a VRTSimpleSource with Average Sampling 
and no explicitly set NoDataValue.
In this case white pixels where not averaged because bNoDataSet was true 
and dfNoDataValue zero.

Best regards,
Stefan
 

From sy at perkins.net  Thu Jun  7 14:41:20 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] GDAL-created TIFF Files and Windows
Message-ID: <46685150.5050102@perkins.net>

Hi,

I've created some 3-band byte format TIFF files using GDAL, but I'm
having trouble viewing them using various common Windows programs, e.g.
Microsoft Office Picture Manager, Windows Picture and Fax Viewer, etc.
The preview in Windows Explorer also doesn't work. In all these cases,
the image fails to draw - sometimes with an unhelpful error message,
sometimes without.

I can load the images using GDAL and read them just fine. I can also
read the images successfully using Adobe Photoshop. The output of
gdalinfo applied to one of these files looks like:

C:\Images\QUICKBIRD>gdalinfo original.tif
Driver: GTiff/GeoTIFF
Size is 129, 129
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  129.0)
Upper Right (  129.0,    0.0)
Lower Right (  129.0,  129.0)
Center      (   64.5,   64.5)
Band 1 Block=129x63 Type=Byte, ColorInterp=Red
Band 2 Block=129x63 Type=Byte, ColorInterp=Green
Band 3 Block=129x63 Type=Byte, ColorInterp=Blue

If I create single band TIFF images, the programs display these just
fine as grayscale images.

Do these windows programs require the organization of the TIFF file to
be different from what GDAL produces? e.g. packed pixels?

I have a small example image I can send to anyone who wants.

Cheers,

Simon



From sy at perkins.net  Thu Jun  7 15:14:57 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] GDAL-created TIFF Files and Windows
In-Reply-To: <4668562C.3050204@ferrara.linux.it>
References: <46685150.5050102@perkins.net> <4668562C.3050204@ferrara.linux.it>
Message-ID: <46685931.1080004@perkins.net>

Mario Cavicchi wrote:
>> I've created some 3-band byte format TIFF files using GDAL, but I'm
>> having trouble viewing them using various common Windows programs, e.g.
>> Microsoft Office Picture Manager, Windows Picture and Fax Viewer, etc.
>> The preview in Windows Explorer also doesn't work...
>
> You can try Gimp... http://www.gimp.org/

Well, not in my case... My code uses GDAL and I want to use it to dump 
out images that I can view easily in windows without having to go 
through some intermediate code. Just wondered if anyone knew what it 
might be about GDAL generated TIFF images that makes them unpalatable to 
the standard windows apps.

Cheers,

Sy



From gdangit at gmail.com  Thu Jun  7 15:59:41 2007
From: gdangit at gmail.com (Dan Rizzo)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] gdalwarp for north-up rotation seems to eat geo
	information
Message-ID: <fa2f01b90706071259l4d80012dhc4ecdcb4fc9bc37b@mail.gmail.com>

Hello

I am trying to rotate some GeoTiff images to be "North Up".  When I run
gdalwarp, it seems to eat the Geo Transform and other geo information.

The input image, which we'll call in.tif, has gdalinfo which looks like
this:
Driver: GTiff/GeoTIFF
Size is 27552, 30080
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235629972,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
GeoTransform =
  <lon offset> <scale related> <nonzero rotation>
  <lat offset> <nonzero rotation> <scale related>
Metadata:
 tons of key-value pairs here.
Corner Coordinates:
 listed in Lat/Long

I'd like to have the same type of info in the output file, but with the
rotations both zero (north up)

I tried:
gdalwarp in.tif out.tif

this results in the out.tif having no geo information, where gdalinfo
outputs:
Driver: GTiff/GeoTIFF
Size is 28141, 29577
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,29577.0)
Upper Right (28141.0,    0.0)
Lower Right (28141.0,29577.0)
Center      (14070.5,14788.5)
Band 1 Block=28141x1 Type=UInt16, ColorInterp=Gray

The problems as I see it are:
1) the coordinate system is gone in the output
2) the geo transform info is gone (including pixel scale and coordinate
system offset)
3) the corners are now expressed in pixel values (because of #2?)
4) all the metadata name/value pairs are gone

I tried many other variations, including specifying the target SRS values,
and the source and target SRS, but I must confess I'm not sure I got this
exactly right:

gdalwarp -s_srs "+proj=latlong +datum=WGS84" -t_srs "+proj=latlong
+datum=WGS84" -multi in.tif out.tif

I also tried adding "+north" to the target projection, which I saw on this
list somewhere.

Can anyone explain what I am doing wrong?

Thanks in advance!

Dan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070607/e76055d1/attachment.html
From tosborn at sbcglobal.net  Thu Jun  7 16:17:00 2007
From: tosborn at sbcglobal.net (Tim Osborn)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] GDAL-created TIFF Files and Windows
In-Reply-To: <46685931.1080004@perkins.net>
References: <46685150.5050102@perkins.net> <46685931.1080004@perkins.net>
Message-ID: <11015465.post@talk.nabble.com>


>From http://www.gdal.org/frmt_gtiff.html:

Gdal creates band interleaved tiff files by default.  These are slightly
more efficient for some purposes, but some applications only support pixel
interleaved TIFF files. In these cases pass INTERLEAVE=PIXEL to produce
pixel interleaved TIFF files (PLANARCONFIG_CONTIG in TIFF terminology).

I suspect this is your problem.

Tim Osborn
-- 
View this message in context: http://www.nabble.com/GDAL-created-TIFF-Files-and-Windows-tf3885774.html#a11015465
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From sy at perkins.net  Thu Jun  7 16:34:25 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] GDAL-created TIFF Files and Windows
In-Reply-To: <11015465.post@talk.nabble.com>
References: <46685150.5050102@perkins.net> <46685931.1080004@perkins.net>
	<11015465.post@talk.nabble.com>
Message-ID: <46686BD1.3010601@perkins.net>

Tim Osborn wrote:
> >From http://www.gdal.org/frmt_gtiff.html:
>
> Gdal creates band interleaved tiff files by default.  These are slightly
> more efficient for some purposes, but some applications only support pixel
> interleaved TIFF files. In these cases pass INTERLEAVE=PIXEL to produce
> pixel interleaved TIFF files (PLANARCONFIG_CONTIG in TIFF terminology).
>
> I suspect this is your problem.
>
> Tim Osborn
>   

That did the trick!

Cheers,

Simon


From warmerdam at pobox.com  Thu Jun  7 23:11:29 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] gdalwarp for north-up rotation seems to eat geo
	information
In-Reply-To: <fa2f01b90706071259l4d80012dhc4ecdcb4fc9bc37b@mail.gmail.com>
References: <fa2f01b90706071259l4d80012dhc4ecdcb4fc9bc37b@mail.gmail.com>
Message-ID: <4668C8E1.3070609@pobox.com>

Dan Rizzo wrote:
> The problems as I see it are:
> 1) the coordinate system is gone in the output
> 2) the geo transform info is gone (including pixel scale and coordinate 
> system offset)
> 3) the corners are now expressed in pixel values (because of #2?)
> 4) all the metadata name/value pairs are gone
> 
> I tried many other variations, including specifying the target SRS 
> values, and the source and target SRS, but I must confess I'm not sure I 
> got this exactly right:
> 
> gdalwarp -s_srs "+proj=latlong +datum=WGS84" -t_srs "+proj=latlong 
> +datum=WGS84" -multi in.tif out.tif

Dan,

The behavior you are seeing is surprising to me.  I'd like to suggest you
try reproducing the problem with a small input file using FWTools 1.3.1.
If you can reproduce it there, then file an appropriate bug report against
GDAL, otherwise we can try to isolate what the differences are.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri Jun  8 00:08:13 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] VRTSimpleSource bNoDataSet not initialized
In-Reply-To: <46683443.6010602@gmx.de>
References: <46683443.6010602@gmx.de>
Message-ID: <4668D62D.4030401@pobox.com>

Stefan Klug wrote:
> Hi,
> 
> the subject says it all.
> In VRTSimpleSource the bNoDataSet member is not initialized in the 
> constructor.
> In my opinion it should be initialized to FALSE.

Stefan,

I agree.  I have made this change in trunk and 1.4 branch.

Best regards,

> This hit me when I tried to use a VRTSimpleSource with Average Sampling 
> and no explicitly set NoDataValue.
> In this case white pixels where not averaged because bNoDataSet was true 
> and dfNoDataValue zero.




-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri Jun  8 00:20:04 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] NITF image metadata domain field in GDAL - SUBDATASETS
In-Reply-To: <644448.80838.qm@web50507.mail.re2.yahoo.com>
References: <644448.80838.qm@web50507.mail.re2.yahoo.com>
Message-ID: <4668D8F4.70407@pobox.com>

Alison Luo wrote:
> I need to extract image data from NITF format metadata
> field. I know there is a SUBDATASETS domain field for
> this purpose. I used libraries from 
> http://vterrain.org/Distrib/gdal.html .
> 
> But the SUBDATASETS domain is not recognized. Here's
> my code:
> 
> 	GDALAccess	access = GA_ReadOnly;
> 	GDALDataset*  imgDataset = NULL;
> 	const char* pszFilename =
> ASFileSysDisplayStringFromPath(inFileSys, inPath);
> 	imgDataset = (GDALDataset*)GDALOpen(pszFilename,
> access); 	
> 
> 	GDALDriver* gDriver = imgDataset->GetDriver();
> 	const char* str =
> gDriver->GetMetadataItem(SUBDATASETS);

Alison,

I'm not exactly clear on what you want to do.

NITF files that contain multiple images will provide
special dataset names to access the specific images via
the SUBDATASETS metadata domain.  But in a normal one-image
NITF file there will be no subdatasets.

What does gdalinfo report for your file?  You might want to try
with the FWTools binaries if the vterrain build does not include
utilities.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri Jun  8 00:22:20 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] JP2 files (JPEG2000)
In-Reply-To: <loom.20070606T171909-883@post.gmane.org>
References: <loom.20070606T171909-883@post.gmane.org>
Message-ID: <4668D97C.4020606@pobox.com>

juan wrote:
> Dear all,
> 
> I have to read some JP2 geocoded image files that have been created with Kakadu 
> software (I believe). The thing is that using gdal drivers as in the tutorial 
> but I see the file, dimensions of the image and type but I seem to loose the 
> geo-referencing information and also when I try to access the values they all 
> return a zero value. 
> 
> Does anyone tell me if GDAL supports this type of files? If not, does anyone 
> know a solution to read these files?

Juan,

GDAL supports a variety of geocoding formats in JPEG2000 files, but I'm not
sure what mechanism Kakadu is using for it's encoding.  I'd add that some
of the support for different formats was added fairly recently to GDAL
so if you are using something older than 1.4.0 that could be an issue.

Do you happen to know what encoding form Kakadu is using?  Can you supply
a small file with geocoding I can inspect?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From alison_luo2001 at yahoo.com  Fri Jun  8 02:03:13 2007
From: alison_luo2001 at yahoo.com (Alison Luo)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] NITF image metadata domain field in GDAL - SUBDATASETS
In-Reply-To: <4668D8F4.70407@pobox.com>
Message-ID: <592005.989.qm@web50501.mail.re2.yahoo.com>

Hi Frank,

Thank you for the comment. Indeed I discovered that in
a normal one-image NITF file there will be no
subdatasets. In that case, how do I acquire the image
data?

In the addition, it seems the image data is compressed
either as jpeg or jp2k in NITF. How do I pull out the
compress image data using GDAL? 

Thanks,
Alison


--- Frank Warmerdam <warmerdam@pobox.com> wrote:

> Alison Luo wrote:
> > I need to extract image data from NITF format
> metadata
> > field. I know there is a SUBDATASETS domain field
> for
> > this purpose. I used libraries from 
> > http://vterrain.org/Distrib/gdal.html .
> > 
> > But the SUBDATASETS domain is not recognized.
> Here's
> > my code:
> > 
> > 	GDALAccess	access = GA_ReadOnly;
> > 	GDALDataset*  imgDataset = NULL;
> > 	const char* pszFilename =
> > ASFileSysDisplayStringFromPath(inFileSys, inPath);
> > 	imgDataset = (GDALDataset*)GDALOpen(pszFilename,
> > access); 	
> > 
> > 	GDALDriver* gDriver = imgDataset->GetDriver();
> > 	const char* str =
> > gDriver->GetMetadataItem(SUBDATASETS);
> 
> Alison,
> 
> I'm not exactly clear on what you want to do.
> 
> NITF files that contain multiple images will provide
> special dataset names to access the specific images
> via
> the SUBDATASETS metadata domain.  But in a normal
> one-image
> NITF file there will be no subdatasets.
> 
> What does gdalinfo report for your file?  You might
> want to try
> with the FWTools binaries if the vterrain build does
> not include
> utilities.
> 
> Best regards,
> -- 
>
---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank
> Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows |
> http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President
> OSGeo, http://osgeo.org
> 
> 



       
____________________________________________________________________________________
Need a vacation? Get great deals
to amazing places on Yahoo! Travel.
http://travel.yahoo.com/

From mateusz at loskot.net  Fri Jun  8 04:13:17 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] editing shapefiles geospatially or textually
In-Reply-To: <fa2ac0580706010815m3e13b84cg17555693748526d9@mail.gmail.com>
References: <fa2ac0580706010815m3e13b84cg17555693748526d9@mail.gmail.com>
Message-ID: <46690F9D.2070703@loskot.net>

John Mitchell wrote:
> Hi,
> 
> I would like to be able to edit shapefiles geospatially or textually
> without having to purchase ArcEditor.
> Can you edit shapefiles geospatially or
> textually within gdal or openEV_FW?

John,

There are some editing capabilities.
I think this chapter should give some overview:

http://openev.sourceforge.net/app/edittools.html

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From jachym.cepicky at gmail.com  Fri Jun  8 06:32:32 2007
From: jachym.cepicky at gmail.com (Jachym Cepicky)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] gdal --with-grass on solaris
Message-ID: <1181298752.7750.4.camel@mellon>

hi,

I try co compile GDAL --with-grass support on

SunOS ul-wrk2 5.10 Generic_118833-03 sun4u sparc SUNW,A70 Solaris
gcc (GCC) 3.4.3 (csl-sol210-3_4-branch+sol_rpath)
GNU Make 3.80
automake (GNU automake) 1.8.3
autoconf (GNU Autoconf) 2.59

and it does not work:

1) I managed to compile gdal with
 ./configure
make
make install

2) I managed to install grass with

./configure  --with-proj-libs=/usr/local/lib/
--with-postgres-includes=/usr/local/pgsql/include/
--with-postgres-libs=/usr/local/pgsql/lib/ --without-fftw
--with-tcltk-includes=/usr/local/include/
--with-tcltk-libs=/usr/local/lib/
make
make install

3) I would like to install gdal --with-grass, however

./configure --with-grass=/usr/local/grass-6.2.2RC1/
[....]
checking dynamic linker characteristics... f90: Warning: Option
-print-search-dirs passed to ld, if ld is invoked, ignored otherwise
Usage: f90 [ options ] files.  Use 'f90 -flags' for details
solaris2.10 ld.so
[....]
checking for pg_config... no
checking for PostgreSQL... no
checking for G_asprintf in -lgrass_gis... no
configure: error: --with-grass=/usr/local/grass-6.2.2RC1/ requested,
but libraries not found!

but

ls /usr/local/grass-6.2.2RC1/
bin  bwidget  docs  driver  etc  fonts  include  lib  man  scripts

and

echo $LD_LIBRARY_PATH
/usr/local/grass-6.2.2RC1/lib/

could anybody give me advice, how to approach on this operating
system? On linux, it works :-/

Thanks

Jachym
-- 
Jachym Cepicky
e-mail: jachym.cepicky@gmail.com
URL: http://les-ejk.cz
GPG: http://www.les-ejk.cz/pgp/jachym_cepicky-gpg.pub

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Toto je =?UTF-8?Q?digit=C3=A1ln=C4=9B?=
	=?ISO-8859-1?Q?_podepsan=E1?= =?UTF-8?Q?_=C4=8D=C3=A1st?=
	=?ISO-8859-1?Q?_zpr=E1vy?=
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070608/439add8b/attachment.bin
From mateusz at loskot.net  Fri Jun  8 08:03:14 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] gdal --with-grass on solaris
In-Reply-To: <1181298752.7750.4.camel@mellon>
References: <1181298752.7750.4.camel@mellon>
Message-ID: <46694582.5040204@loskot.net>

Jachym Cepicky wrote:
> 
> 3) I would like to install gdal --with-grass, however
> 
> ./configure --with-grass=/usr/local/grass-6.2.2RC1/
> [....]
> checking dynamic linker characteristics... f90: Warning: Option
> -print-search-dirs passed to ld, if ld is invoked, ignored otherwise
> Usage: f90 [ options ] files.  Use 'f90 -flags' for details
> solaris2.10 ld.so
> [....]
> checking for pg_config... no
> checking for PostgreSQL... no
> checking for G_asprintf in -lgrass_gis... no
> configure: error: --with-grass=/usr/local/grass-6.2.2RC1/ requested,
> but libraries not found!

Jachym,

Could you check if you have libgrass_datetime.so library in
/usr/local/grass-6.2.2.RC1/lib ?

May be there is libraries naming issue.
The test that is failing above checks if there is G_asprintf() function
defined in this library.

Also, if you could paste error from the config.log that would be helpful.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From nicolasgabarron at yahoo.fr  Fri Jun  8 10:07:35 2007
From: nicolasgabarron at yahoo.fr (NicoSIG)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] OCI support for Oracle 9i
In-Reply-To: <464C4D74.7040402@loskot.net>
References: <20070515110247.69c5a374@localhost.localdomain>
	<46499DCE.7030004@loskot.net>
	<20070515143715.4b9a48f9@localhost.localdomain>
	<464C4D74.7040402@loskot.net>
Message-ID: <11027157.post@talk.nabble.com>


Hi,

I've the same problem, I tried with GDAL from SVN
(gdal-svn-stable-2007.06.08.tar.gz), and the problem is persistent.

The version of Oracle seems correctly detected.
Please, could you regenerate the ./configure script for the next stable svn
version ?

Thanks,

Nicolas



Mateusz Loskot wrote:
> 
> 
> Otto Dassau wrote:
>> Mateusz Loskot <mateusz@loskot.net> wrote:
>>> Otto Dassau wrote:
>>>> 
>>>> I am trying to build gdal 1.4.1 with OCI support but with no
>>>> success. The database is an oracle 9i. In the configure script I
>>>> provide:
>>>> 
>>>> --with-oci=/usr/lib/oracle/9.2.0/OraHome \ 
>>>> --with-oci-lib=/usr/lib/oracle/9.2.0/OraHome/lib
>>> Otto,
>>> 
>>> You should use
>>> 
>>> --with-oci
>>> 
>>> *or* pair of options
>>> 
>>> --with-oci-include --with-oci-lib
>> 
>> yes, but the header files are in two folders - so I use:
>> 
>> --with-oci-include='/usr/lib/oracle/9.2.0/OraHome/rdbms/public \ 
>> /usr/lib/oracle/9.2.0/OraHome/rdbms/demo'
> 
> Otto,
> 
> Unfortunately, this hack won't work.
> 
> I'm a little surprised that ./configure can not detect your headers.
> Some time ago, I fixed support for older Oracle versions in the
> ./configure and m4/ax_oracle_oci.m4 macro
> 
> 
> Here, you can see that for older Oracle, headers are checked in two
> locations:
> 
> http://trac.osgeo.org/gdal/browser/trunk/gdal/m4/ax_oracle_oci.m4#L102
> http://trac.osgeo.org/gdal/browser/trunk/gdal/m4/ax_oracle_oci.m4#L175
> 
> ORACLE_HOME/rdbms/public
> and
> ORACLE_HOME/rdbms/demo
> 
> AFAIR, some users confirmed that this fix works.
> 
>>>> b) checking for Oracle OCI libraries in
>>>> /usr/lib/oracle/9.2.0/OraHome/lib
>>>> 
>>>> here I get following error message that -lnnz10 is missing:
>>>> 
>>>> #configure:26066: checking for Oracle OCI libraries in 
>>>> #/usr/lib/oracle/9.2.0/OraHome/lib configure:26097: g++ -o
>>>> conftest -g -O2 #-I/usr/lib/oracle/9.2.0/OraHome/rdbms/public 
>>>> #-L/usr/lib/oracle/9.2.0/OraHome/lib -lclntsh -lnnz10 conftest.cc
>>>> -L/usr/lib #-lxerces-c -lpthread -ljasper -lmfhdf -ldf -lgif
>>>> -ljpeg -ltiff -lpng -lnetcdf #-lcfitsio -lpq -L/usr/lib -lpq -lz
>>>> -lpthread -lm -lrt -ldl  >&5 /usr/bin/ld: #cannot find -lnnz10
>>>> collect2: ld returned 1 exit status
> 
> 
> Older Oracle versions does not have nnz10 library.
> As I see in your files list, you don't have it indeed.
> 
> Although, this issue seems to be also filtered in the ./configure script:
> http://trac.osgeo.org/gdal/browser/trunk/gdal/m4/ax_oracle_oci.m4#L263
> 
> If version is >=10.x, then add -lnnz10, otherwise not.
> 
> 
> I suppose there may be two issues:
> 1) problem with detecting version of Oracle
> 2) the ./configure script has not been regenerated (by ./autogen.sh)
> before releasing, so changes in the ax_oracle_oci.m4 macro are not
> present there
> 
> Otto, would it be possible for you to try GDAL from SVN ?
> Just for this issue, to test if SVN works for older Oracle.
> 
> Unfortunately, I have only access to Oracle 10g so it's very hard to
> catch all subtle differences.
> 
> Thanks for your help!
> 
> Cheers
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/OCI-support-for-Oracle-9i-tf3757272.html#a11027157
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From warmerdam at pobox.com  Fri Jun  8 11:11:14 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] NITF image metadata domain field in GDAL - SUBDATASETS
In-Reply-To: <592005.989.qm@web50501.mail.re2.yahoo.com>
References: <592005.989.qm@web50501.mail.re2.yahoo.com>
Message-ID: <46697192.9060403@pobox.com>

Alison Luo wrote:
> Hi Frank,
> 
> Thank you for the comment. Indeed I discovered that in
> a normal one-image NITF file there will be no
> subdatasets. In that case, how do I acquire the image
> data?
> 
> In the addition, it seems the image data is compressed
> either as jpeg or jp2k in NITF. How do I pull out the
> compress image data using GDAL? 

Alison,

If you GDALOpen() an NITF file, the return GDALDataset is
implicitly for the first image in the NITF file.  So just
use normal mechanism (GetRasterBand(1)->RasterIO(), etc) to
access the image data.

JPEG and JPEG2000 decompression should be handled automatically
by GDAL if you are using an appropriately configured and reasonably
recent build of GDAL (ie. 1.4.0 or newer and with the Kakadu or ECW
SDK built in for jpeg2000 support).

You can refer to the GDAL API tutorial for additional details on
general image access.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Fri Jun  8 11:22:25 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] OCI support for Oracle 9i
In-Reply-To: <11027157.post@talk.nabble.com>
References: <20070515110247.69c5a374@localhost.localdomain>	<46499DCE.7030004@loskot.net>	<20070515143715.4b9a48f9@localhost.localdomain>	<464C4D74.7040402@loskot.net>
	<11027157.post@talk.nabble.com>
Message-ID: <46697431.1000807@loskot.net>

NicoSIG wrote:
> Hi,
> 
> I've the same problem, I tried with GDAL from SVN 
> (gdal-svn-stable-2007.06.08.tar.gz), and the problem is persistent.
> 
> The version of Oracle seems correctly detected. Please, could you
> regenerate the ./configure script for the next stable svn version ?

If you use SVN, you can regenereate ./configure yourself using
autogen.sh. Just run

$ ./autogen.sh

and you should get fresh version of ./configure.

Could you confirm if the problem vanished/still exists after you
regenerate the configure script?

I submitted ticket so we don't mis this task for next stable release:
http://trac.osgeo.org/gdal/ticket/1661

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From roth.luke at gmail.com  Fri Jun  8 12:08:24 2007
From: roth.luke at gmail.com (Luke Roth)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Limitation in gdal_rasterize
Message-ID: <20ecc0f10706080908o3138d468ia27ae3f050e80980@mail.gmail.com>

I've noticed a limitation in gdal_rasterize: it seems to be saving all
values as 8-bit data regardless of the data type of the target image.
For example, I have a shapefile for which the value of the feature
being rasterized is 710, and I use gdal_rasterize and pass it an
unsigned 16-bit image to rasterize to, and the value saved to the
image is 195.  I've browsed through the gdalrasterize.cpp code and it
seems to have special-case code to handle both GDT_Byte and
GDT_Float32 data, but no others.  However, I don't feel I understand
the code well enough yet to know if this is intentional or if it
should be fixed.  The code in issue is from gdalrasterize.cpp, lines
319-387 (gdal version 1.4.1), where eType is limited to GDT_Float32
for all non - GDT_Byte source image types.  If this should be changed,
let me know and I can submit a patch.

I apologize if I should be submitting this to the tracker / wiki page,
I haven't figured out how to use it yet - are there any guidelines,
etc. that I haven't seen?

Thanks,

Luke Roth
www.gdacorp.com

From roth.luke at gmail.com  Fri Jun  8 12:20:20 2007
From: roth.luke at gmail.com (Luke Roth)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] re: Limitation in gdal_rasterize
Message-ID: <20ecc0f10706080920y7341e066q9cf731a69db9787e@mail.gmail.com>

Sorry about the previous post - I somehow missed the fact that I
needed an OSGeo ID despite the fact that it says so right at the top
of the page (oops).  I'll submit the earlier question about
gdal_rasterize to the tracker.

Luke Roth
www.gdacorp.com

From roth.luke at gmail.com  Fri Jun  8 15:21:43 2007
From: roth.luke at gmail.com (Luke Roth)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Re: [GDAL] #1662: Data type limitation in gdal_rasterize
In-Reply-To: <056.f6384b69fe48e69170da0681a2af0325@osgeo.org>
References: <047.94142beeaad8b5a01c3ef3aae52192e1@osgeo.org>
	<056.f6384b69fe48e69170da0681a2af0325@osgeo.org>
Message-ID: <20ecc0f10706081221g60abfc28sae3ea1479178b0d6@mail.gmail.com>

Thanks for the quick followup - it looks like I jumped the gun on
submitting this problem, I've re-read through the code and I think I
understand how it works a bit better - I misunderstood exactly how the
rasterIO functions handled the data type specification, and it was my
code that was handling it incorrectly.  Sorry for the trouble!

Luke

On 6/8/07, GDAL <trac@osgeo.org> wrote:
> #1662: Data type limitation in gdal_rasterize
> -------------------------+--------------------------------------------------
>  Reporter:  lukeroth     |        Owner:  warmerdam
>      Type:  defect       |       Status:  assigned
>  Priority:  normal       |    Milestone:  1.4.2
> Component:  GDAL_Raster  |      Version:  1.4.1
>  Severity:  normal       |   Resolution:
>  Keywords:  rasterize    |
> -------------------------+--------------------------------------------------
> Changes (by warmerdam):
>
>   * keywords:  => rasterize
>   * status:  new => assigned
>   * component:  default => GDAL_Raster
>   * milestone:  => 1.4.2
>
> Comment:
>
>  Luke,
>
>  The code, as structured, is intended to load 16bit data into a float32
>  buffer, apply changes, and write back to the 16bit file.  This should work
>  properly for 16bit data.  But you are apparently seeing a different
>  behavior which surprises me.  Can you attach a small 16bit raster file,
>  shapefile and commandline that reproduces the problem?
>
>  I use Float32 as the general case because it can be used as a working
>  format for most image values without any data loss - though there are some
>  exceptions (float64, complex values and very large int32 values).
>
> --
> Ticket URL: <http://trac.osgeo.org/gdal/ticket/1662#comment:1>
> GDAL <http://trac.osgeo.org/gdal/>
> Geospatial Data Abstraction Library is a translator library for raster and vector geospatial data formats.

From alison_luo2001 at yahoo.com  Fri Jun  8 18:28:55 2007
From: alison_luo2001 at yahoo.com (Alison Luo)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Can GDAL GDALDataset return compressed image data
In-Reply-To: <46697192.9060403@pobox.com>
Message-ID: <477770.33872.qm@web50502.mail.re2.yahoo.com>

I have my own JPEG and JP2K decoder. I do not need
decompressed image data stream acquired from
GDALDataset::RasterIO. I would simply like to get the
JPEG or JP2K compressed image stream from a NITF file
through GDAL. Can this be accomplished?

Thanks,
Alison


       
____________________________________________________________________________________
Get the free Yahoo! toolbar and rest assured with the added security of spyware protection.
http://new.toolbar.yahoo.com/toolbar/features/norton/index.php

From alison_luo2001 at yahoo.com  Fri Jun  8 18:47:45 2007
From: alison_luo2001 at yahoo.com (Alison Luo)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Can GDAL GDALDataset return compressed image data
In-Reply-To: <46697192.9060403@pobox.com>
Message-ID: <177739.27316.qm@web50512.mail.re2.yahoo.com>

I have my own JPEG and JP2K decoder. I do not need
decompressed image data stream acquired from
GDALDataset::RasterIO. I would simply like to get the
JPEG or JP2K compressed image stream from a NITF file
through GDAL. Can this be accomplished?

Thanks,
Alison


       
____________________________________________________________________________________
Building a website is a piece of cake. Yahoo! Small Business gives you all the tools to get online.
http://smallbusiness.yahoo.com/webhosting 

From ivan.lucena at pmldnet.com  Fri Jun  8 20:01:13 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Can GDAL GDALDataset return compressed image data
In-Reply-To: <177739.27316.qm@web50512.mail.re2.yahoo.com>
References: <177739.27316.qm@web50512.mail.re2.yahoo.com>
Message-ID: <4669EDC9.6060106@pmldnet.com>

Alison,

Anyone, Correct me If I am wrong but I don't think that in the GDAL API 
there is a function that delivers the haw compressed data block in a 
buffer. But if you look at that piece of code:

http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/nitf/nitfdataset.cpp#L908

That is where the NITF JPEG buffer is passed to the GDAL JPEG driver to 
be decoded. Then, take a look at the code at:

http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/jpeg/jpgdataset.cpp#L1099

And line 1274 where generic JPEG tables are loaded to make it look like 
a JFIF file so that the libjpeg can decode it.

Regards,

Ivan


Alison Luo wrote:
> I have my own JPEG and JP2K decoder. I do not need
> decompressed image data stream acquired from
> GDALDataset::RasterIO. I would simply like to get the
> JPEG or JP2K compressed image stream from a NITF file
> through GDAL. Can this be accomplished?
> 
> Thanks,
> Alison
> 
> 
>        
> ____________________________________________________________________________________
> Building a website is a piece of cake. Yahoo! Small Business gives you all the tools to get online.
> http://smallbusiness.yahoo.com/webhosting 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

From brian.claywell at gmail.com  Sat Jun  9 16:42:38 2007
From: brian.claywell at gmail.com (Brian Claywell)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] [GDAL] #1567: Patch for HFA no-data value support
Message-ID: <f4f3bv$s27$1@sea.gmane.org>

Frank et al.,

I don't know if you recall me talking about patching the HFA driver to
include no-data value support, but I wanted to follow up on the patch I
submitted back in April as ticket #1567 and let you know that we've been
using it internally on our build of gdal-1.4.1 for about two months now
with no problems.

http://trac.osgeo.org/gdal/ticket/1567

Thanks!

-- 
Brian Claywell
brian.claywell@gmail.com


From ari.jolma at tkk.fi  Sat Jun  9 16:52:35 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Re: [Geo-perl] NEW: gdal-1.4.1 errors
In-Reply-To: <466AF60A.8020606@gmail.com>
References: <466AF60A.8020606@gmail.com>
Message-ID: <466B1313.10704@tkk.fi>

I'm cc'ing this to the GDAL list since this may be of interest to GDAL 
developers.

Jamie,

This seems to come from the SWIG Python bindings. I myself usually don't 
enable the bindings in the configure but compile the Perl bindings 
separately after the main library is compiled (not enabling is AFAIK 
also the default) - thus I've not run into this problem. Could you try 
running configure without enabling the bindings and then cd swig/perl; 
perl Makefile.PL; make build; make test; make install

Regards,

Ari

Jamie Lahowetz kirjoitti:
> Well I'm trying to get libgdal to work by building gdal-1.4.1 from 
> source. configure seems to work but when I run make I get these errors:
> gdal_wrap.c:11620: error: expected '=', ',', ';', 'asm' or 
> '__attribute__' before '*' token
> gdal_wrap.c:11640: error: expected '=', ',', ';', 'asm' or 
> '__attribute__' before '_gdalMethods'
> gdal_wrap.c:12052: error: expected '=', ',', ';', 'asm' or 
> '__attribute__' before '*' token
> gdal_wrap.c: In function 'init_gdal':
> gdal_wrap.c:12057: error: 'PyObject' undeclared (first use in this 
> function)
> gdal_wrap.c:12057: error: 'm' undeclared (first use in this function)
> gdal_wrap.c:12057: error: 'd' undeclared (first use in this function)
> gdal_wrap.c:12057: warning: left-hand operand of comma expression has 
> no effect
> gdal_wrap.c:12057: warning: statement with no effect
> gdal_wrap.c:12058: error: 'SWIG_globals' undeclared (first use in this 
> function)
> gdal_wrap.c:12058: warning: implicit declaration of function 
> 'SWIG_newvarlink'
> gdal_wrap.c:12059: warning: implicit declaration of function 
> 'Py_InitModule'
> gdal_wrap.c:12059: error: '_gdalMethods' undeclared (first use in this 
> function)
> gdal_wrap.c:12060: warning: implicit declaration of function 
> 'PyModule_GetDict'
> make[1]: *** [gdal_wrap.o] Error 1
> make[1]: Leaving directory `/home/deadpickle/Desktop/gdal-1.4.1/pymod'
> make: *** [py-module] Error 2
> What this means I dont know. Any ideas? as soon as I can get this 
> installed I can get Geo::GDAL installed.
> _______________________________________________
> Geo-perl mailing list
> Geo-perl@list.hut.fi
> https://list.hut.fi/mailman/listinfo/geo-perl
>   



From pgao at esri.com  Sun Jun 10 11:12:40 2007
From: pgao at esri.com (Peng Gao)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Building a customized raster format in ArcGIS 9.2using
	GDAL
In-Reply-To: <46670974.2090107@pobox.com>
Message-ID: <A383B271E8D0DF47B51972FCEB438DC702C911EC@twistedwire.esri.com>

> -----Original Message-----
> From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
> Sent: Wednesday, June 06, 2007 12:22 PM
> To: Peng Gao
> Cc: Lucena, Ivan; gdal-dev
> Subject: Re: [Gdal-dev] Building a customized raster format 
> in ArcGIS 9.2using GDAL
> 
> Peng Gao wrote:
> > ArcGIS uses gdalplugins directory under the directory 
> containing the 
> > currently running .exe ("ArcGIS\Bin\gdalplugins").
> > 
> > We have found that, while there are success stories, it's hard to 
> > build a plugin using standard GDAL release, and make it 
> work with the 
> > gdal*.dll distributed with a particular ArcGIS release, because of 
> > header mismatch, and etc. We plan to make the matching 
> include and lib 
> > files available for download if there is enough interest. Also on 
> > Windows ArcGIS 92, and its GDAL library, are built using
>  > MSVC7.
> 
> Gao,
> 
> It would be desirable, in my mind, if we could have ArcGIS 
> using a build of GDAL that is ABI compatible with a stable 
> release of GDAL and matching the build configuration of the 
> binaries distributed by the GDAL project.
> 
> For instance, if ArcGIS 9.3 uses the 1.4-esri branch of GDAL, 
> built with
> vc7 as we use for the GDAL binary builds, it should be 
> possible to drop any of the plugins distributed with GDAL's 
> win32 builds.  Also, the gdal win32 sdk could be easily used 
> to develop additional plugins.
> 
> I'm also hoping to get MapGuide OS distributed with GDAL 
> builds corresponding to our "official release binaries" for 
> the same reason.
> 
> After largely ignoring the issue of win32 binary releases 
> targetted at a particular stable ABI (such as GDAL 1.4) I'm 
> now growing quite keen on the idea, and the value of being 
> able to prepare plugins seperately and use them widely.
> 

Frank,

Great idea. The new branch will make this possible for 9.3, and in the
future
releases we can try to sync up with regular GDAL releases.

Thanks,
Gao, Peng


From warmerdam at pobox.com  Sun Jun 10 12:47:29 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] [GDAL] #1567: Patch for HFA no-data value support
In-Reply-To: <f4f3bv$s27$1@sea.gmane.org>
References: <f4f3bv$s27$1@sea.gmane.org>
Message-ID: <466C2B21.2000602@pobox.com>

Brian Claywell wrote:
> Frank et al.,
> 
> I don't know if you recall me talking about patching the HFA driver to
> include no-data value support, but I wanted to follow up on the patch I
> submitted back in April as ticket #1567 and let you know that we've been
> using it internally on our build of gdal-1.4.1 for about two months now
> with no problems.
> 
> http://trac.osgeo.org/gdal/ticket/1567

Brian,

I've assigned this to Mateusz now to act on though my target is 1.5.0,
not the 1.4.2 release, since it is a new feature.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From alison_luo2001 at yahoo.com  Sun Jun 10 14:56:32 2007
From: alison_luo2001 at yahoo.com (Alison Luo)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Can GDAL GDALDataset return compressed image data
In-Reply-To: <4669EDC9.6060106@pmldnet.com>
Message-ID: <73290.4024.qm@web50508.mail.re2.yahoo.com>

Hi Ivan,

Thank you so much for your help. I have more questions
regarding the block of code you referred to in
nitifdataset.cpp. I also took a look of class
NITFSegmentInfo in nitflilb.h:

NITFSegmentInfo has a member hAccess, which is the
NITF image stream. I suppose other pasSegmentInfo
member     
    GUInt32 nSegmentHeaderStart;
    GUInt32 nSegmentHeaderSize;
    GUInt32 nSegmentStart;
    GUInt32 nSegmentSize;
would somehow indicate how to get the encoded jpeg
stream from hAccess? Could you please explain how the
jpeg buffer is filled given this information?

Why doesn't GDAL provide APIs to access encoded image
stream, but only provide API to get raw image stream?

Thanks,
Alison 
--- "Lucena, Ivan" <ivan.lucena@pmldnet.com> wrote:

> Alison,
> 
> Anyone, Correct me If I am wrong but I don't think
> that in the GDAL API 
> there is a function that delivers the haw compressed
> data block in a 
> buffer. But if you look at that piece of code:
> 
>
http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/nitf/nitfdataset.cpp#L908
> 
> That is where the NITF JPEG buffer is passed to the
> GDAL JPEG driver to 
> be decoded. Then, take a look at the code at:
> 
>
http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/jpeg/jpgdataset.cpp#L1099
> 
> And line 1274 where generic JPEG tables are loaded
> to make it look like 
> a JFIF file so that the libjpeg can decode it.
> 
> Regards,
> 
> Ivan
> 
> 
> Alison Luo wrote:
> > I have my own JPEG and JP2K decoder. I do not need
> > decompressed image data stream acquired from
> > GDALDataset::RasterIO. I would simply like to get
> the
> > JPEG or JP2K compressed image stream from a NITF
> file
> > through GDAL. Can this be accomplished?
> > 
> > Thanks,
> > Alison
> > 
> > 
> >        
> >
>
____________________________________________________________________________________
> > Building a website is a piece of cake. Yahoo!
> Small Business gives you all the tools to get
> online.
> > http://smallbusiness.yahoo.com/webhosting 
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> >
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> > 
> > 
> 



       
____________________________________________________________________________________Ready for the edge of your seat? 
Check out tonight's top picks on Yahoo! TV. 
http://tv.yahoo.com/

From warmerdam at pobox.com  Sun Jun 10 17:21:26 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Can GDAL GDALDataset return compressed image data
In-Reply-To: <73290.4024.qm@web50508.mail.re2.yahoo.com>
References: <73290.4024.qm@web50508.mail.re2.yahoo.com>
Message-ID: <466C6B56.3080906@pobox.com>

Alison Luo wrote:
> Hi Ivan,
> 
> Thank you so much for your help. I have more questions
> regarding the block of code you referred to in
> nitifdataset.cpp. I also took a look of class
> NITFSegmentInfo in nitflilb.h:
> 
> NITFSegmentInfo has a member hAccess, which is the
> NITF image stream.

Alison,

It is a pointer to the NITFImage structure for image segemnts.

 >  I suppose other pasSegmentInfo
> member     
>     GUInt32 nSegmentHeaderStart;
>     GUInt32 nSegmentHeaderSize;
>     GUInt32 nSegmentStart;
>     GUInt32 nSegmentSize;
> would somehow indicate how to get the encoded jpeg
> stream from hAccess? Could you please explain how the
> jpeg buffer is filled given this information?

They are information on where the image header, and image
data chunks are in the file.  So compressed data stream
would consist of nSegmentSize bytes started at byte nSegmentStart
in the file.

> Why doesn't GDAL provide APIs to access encoded image
> stream, but only provide API to get raw image stream?

GDAL does not provide direct access to compressed datastreams
because the purpose of GDAL is to provide a "normalized" view to
different datasets, not to provide low level access.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jidanni at jidanni.org  Sun Jun 10 21:03:51 2007
From: jidanni at jidanni.org (jidanni@jidanni.org)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] put X marks the spot on weather .JPG
Message-ID: <87lker9ua0.fsf@jidanni.org>

I'm curious about these two images,

for DIR in s1q s3q
do echo http://www.cwb.gov.tw/V5/observe/satellite/Data/${DIR?}/$DIR-`date +%Y-%m-%d-%H`.jpg
done #(local time) (wget --user-agent=something_else needed)

I contacted CWB.GOV.TW saying that .JPG seems rather wasteful for
these images. They responded that that is not necessarily true.

But aren't such satellite images originally in an more .PNG or .GIF
like format, and them turning them into .JPGs is like blunder #1 for
them, where they merely could convert the .PNG into a more slim
version for dissemination to so many Taiwan households that surely are
browsing them?

Or maybe they do it on purpose to degrade the no-cost version?

Anyway, one could easily make an image with half the bytes that looks
the same, at least it seems here on my terminal.

What I was trying to do actually was to put an X marks the spot
for my http:///jidanni.org/location/coordinates_en.html onto the
image. So I suppose I should make a mapserver .map file incorporating
this raster .JPG without any accompanying worldfile or anything, by
doing [what?] to nail down its coordinates and projection into
mapserver... and is there something automatic I can use that grasps
the white latitude and longitude lines and tells me it is actually
"tmerc" or something, and all I have to do is give a few hints?

Or should I use Imagemagick and just give a pixel address for a text "X"?

From ivan.lucena at pmldnet.com  Sun Jun 10 23:32:41 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Can GDAL GDALDataset return compressed image data
In-Reply-To: <466C6B56.3080906@pobox.com>
References: <73290.4024.qm@web50508.mail.re2.yahoo.com>
	<466C6B56.3080906@pobox.com>
Message-ID: <466CC259.1050303@pmldnet.com>

I think that Frank gave you the all answers.

Frank Warmerdam wrote:
> Alison Luo wrote:
>> Hi Ivan,
>>
>> Thank you so much for your help. I have more questions
>> regarding the block of code you referred to in
>> nitifdataset.cpp. I also took a look of class
>> NITFSegmentInfo in nitflilb.h:
>>
>> NITFSegmentInfo has a member hAccess, which is the
>> NITF image stream.
> 
> Alison,
> 
> It is a pointer to the NITFImage structure for image segemnts.
> 
>  >  I suppose other pasSegmentInfo
>> member         GUInt32 nSegmentHeaderStart;
>>     GUInt32 nSegmentHeaderSize;
>>     GUInt32 nSegmentStart;
>>     GUInt32 nSegmentSize;
>> would somehow indicate how to get the encoded jpeg
>> stream from hAccess? Could you please explain how the
>> jpeg buffer is filled given this information?
> 
> They are information on where the image header, and image
> data chunks are in the file.  So compressed data stream
> would consist of nSegmentSize bytes started at byte nSegmentStart
> in the file.
> 
>> Why doesn't GDAL provide APIs to access encoded image
>> stream, but only provide API to get raw image stream?
> 
> GDAL does not provide direct access to compressed datastreams
> because the purpose of GDAL is to provide a "normalized" view to
> different datasets, not to provide low level access.
> 
> Best regards,

From jachym.cepicky at gmail.com  Mon Jun 11 01:14:56 2007
From: jachym.cepicky at gmail.com (Jachym Cepicky)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] support for gpx and osm formats
Message-ID: <1181538896.7825.11.camel@mellon>

Hi,
I'm wondering, how difficult it would be, to add support for gpx [1] and
osm [2]. Would this be possible?

Thanks

Jachym

[1] http://en.wikipedia.org/wiki/GPX
[2] http://en.wikipedia.org/wiki/OpenStreetMap , 
-- 
Jachym Cepicky
e-mail: jachym.cepicky@gmail.com
URL: http://les-ejk.cz
GPG: http://www.les-ejk.cz/pgp/jachym_cepicky-gpg.pub

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Toto je =?UTF-8?Q?digit=C3=A1ln=C4=9B?=
	=?ISO-8859-1?Q?_podepsan=E1?= =?UTF-8?Q?_=C4=8D=C3=A1st?=
	=?ISO-8859-1?Q?_zpr=E1vy?=
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070611/5a310ea7/attachment.bin
From mateusz at loskot.net  Mon Jun 11 01:39:52 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] support for gpx and osm formats
In-Reply-To: <1181538896.7825.11.camel@mellon>
References: <1181538896.7825.11.camel@mellon>
Message-ID: <466CE028.4080004@loskot.net>

Jachym Cepicky wrote:
> Hi, I'm wondering, how difficult it would be, to add support for gpx
> [1] and osm [2]. Would this be possible?

Jachym,

Recently, I've been thinking about these formats as well.
Also, there is another interesting format called Polish Format (PFM) [1]
which is used, among others, by OSM-like project in Poland called UMP.

The GPX format was discussed in March:

http://lists.maptools.org/pipermail/gdal-dev/2007-March/012099.html

and as you can see the idea meets favouritism:

http://lists.maptools.org/pipermail/gdal-dev/2007-March/012103

The OSM format support in OGR is also under consideration by OSM community:

http://lists.maptools.org/pipermail/gdal-dev/2007-May/013228.html

>From my side, I think I could some help in conceptual and testing parts,
I can help with incorporating new drivers into GDAL/OGR.
Also, I could help with coding, though in some limited way.

BTW, Jens Oberender is working on the KML driver for OGR so he is
playing with XML data in OGR pretty much. I believe it would be
reasonable to use this analysis, notes and experience for other
XML-based formats:

http://trac.osgeo.org/gdal/wiki/SoCKMLRead

[1] From cGPSMapper manual:
Polish Format is a convenient, text based, format used for saving map
information on a computer and transferring map information between
computer programs.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From jachym.cepicky at gmail.com  Mon Jun 11 01:49:33 2007
From: jachym.cepicky at gmail.com (Jachym Cepicky)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] support for gpx and osm formats
In-Reply-To: <466CE028.4080004@loskot.net>
References: <1181538896.7825.11.camel@mellon>  <466CE028.4080004@loskot.net>
Message-ID: <1181540973.7825.22.camel@mellon>

Thanks for this comprehensive answer.

Jachym

Mateusz Loskot p??e v Po 11. 06. 2007 v 07:39 +0200:
> Jachym Cepicky wrote:
> > Hi, I'm wondering, how difficult it would be, to add support for gpx
> > [1] and osm [2]. Would this be possible?
> 
> Jachym,
> 
> Recently, I've been thinking about these formats as well.
> Also, there is another interesting format called Polish Format (PFM) [1]
> which is used, among others, by OSM-like project in Poland called UMP.
> 
> The GPX format was discussed in March:
> 
> http://lists.maptools.org/pipermail/gdal-dev/2007-March/012099.html
> 
> and as you can see the idea meets favouritism:
> 
> http://lists.maptools.org/pipermail/gdal-dev/2007-March/012103
> 
> The OSM format support in OGR is also under consideration by OSM community:
> 
> http://lists.maptools.org/pipermail/gdal-dev/2007-May/013228.html
> 
> >From my side, I think I could some help in conceptual and testing parts,
> I can help with incorporating new drivers into GDAL/OGR.
> Also, I could help with coding, though in some limited way.
> 
> BTW, Jens Oberender is working on the KML driver for OGR so he is
> playing with XML data in OGR pretty much. I believe it would be
> reasonable to use this analysis, notes and experience for other
> XML-based formats:
> 
> http://trac.osgeo.org/gdal/wiki/SoCKMLRead
> 
> [1] From cGPSMapper manual:
> Polish Format is a convenient, text based, format used for saving map
> information on a computer and transferring map information between
> computer programs.
> 
> Cheers
-- 
Jachym Cepicky
e-mail: jachym.cepicky@gmail.com
URL: http://les-ejk.cz
GPG: http://www.les-ejk.cz/pgp/jachym_cepicky-gpg.pub

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Toto je =?UTF-8?Q?digit=C3=A1ln=C4=9B?=
	=?ISO-8859-1?Q?_podepsan=E1?= =?UTF-8?Q?_=C4=8D=C3=A1st?=
	=?ISO-8859-1?Q?_zpr=E1vy?=
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070611/396abe6c/attachment.bin
From nimalika.f at sliit.lk  Mon Jun 11 02:21:12 2007
From: nimalika.f at sliit.lk (Nimalika)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] help on ogr2ogr to assign Spatial reference system 
Message-ID: <000601c7abf0$b7150fa0$d81410ac@nimali>

Dear all,

I am working with set of shape files and some are missing coordinate system references.I need to assign coordinate system to them and trying to use ogr2ogr to assign coordinate system to them with -a_srs .

I tried to use the definitions in the  .proj file which is attached to shape files with the reference system to add the same to other shape files but not sucessful.I am not quite sure how to give the parameters to -a_srs 

The .proj file content is as follows.

PROJCS["SL_grid_99",
GEOGCS["GCS_Kandawala",
DATUM["D_Kandawala",
 SPHEROID["Everest_1830",6377276.345,300.8017]],
  PRIMEM["Greenwich",0],
  UNIT["Degree",0.017453292519943295]],
PROJECTION["Transverse_Mercator"],
    PARAMETER["False_Easting",200000.000],
    PARAMETER["False_Northing",200000.00],
    PARAMETER["Central_Meridian",80.77171],
    PARAMETER["Scale_Factor",0.9999238418],
    PARAMETER["Latitude_Of_Origin",7.00048],
    UNIT["Meter",1]

I used the folowing and got the error message 

ogr2ogr -f "ESRI Shapefile" -a_srs +proj=tmerc +ellps=evr
st30 +lat_0=7.00048 +lon_o=80.77171 +k=0.9999238418 +x-0=2000000 +y_0=200000 +un
its=m D:\Reserch\Kaduwela\Kaduwela\gn_kaduwela.shp

FAILURE:
Unable to open datasource `+lat_0=7.00048' with the following drivers.
 > ESRI Shape file .....

It seems like the way in which I gave the parameters are not correct .
Any help in this regard is highly appriciated. 


Thanking you

nimalika
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070611/abb7fd94/attachment.html
From mateusz at loskot.net  Mon Jun 11 02:20:30 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] help on ogr2ogr to assign Spatial reference system
In-Reply-To: <000601c7abf0$b7150fa0$d81410ac@nimali>
References: <000601c7abf0$b7150fa0$d81410ac@nimali>
Message-ID: <466CE9AE.70809@loskot.net>

Nimalika wrote:
> It seems like the way in which I gave the parameters are not correct .
> Any help in this regard is highly appriciated. 

You need to wrap definition passed to *_srs options with quotes,
if the definition you're passing includes spaces:

-a_srs "+proj=tmerc +ellps=evrst30 +lat_0=7.00048 +lon_o=80.77171
+k=0.9999238418 +x-0=2000000 +y_0=200000 +units=m"

but if you pass ie. EPSG code, then you don't need to wrap it with quotes:

-a_srs EPSG:4326

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From nimalika.f at sliit.lk  Mon Jun 11 03:28:23 2007
From: nimalika.f at sliit.lk (Nimalika)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] help on ogr2ogr to assign Spatial reference system
References: <000601c7abf0$b7150fa0$d81410ac@nimali> <466CE9AE.70809@loskot.net>
Message-ID: <008601c7abfa$18712370$d81410ac@nimali>

Dear M.L,

Thanks for the early response.

I tried with the quotes but still fails and this time no error message.

>ogr2ogr -f "ESRI Shapefile" -a_srs "+proj=tmerc +ellps=ev
rst30 +lat_0=7.00048 +lon_0=80.77171 +k=0.9999238418 +x-0=2000000 
+y_0=200000 +u
nits=m" D:\Reserch\Kaduwela\Kaduwela\gn_kaduwela.shp
Usage: ogr2ogr [--help-general] [-skipfailures] [-append] [-update]
               [-select field_list] [-where restricted_where]
              .....
anny help is appriciated much.

regards

nimalika




----- Original Message ----- 
From: "Mateusz Loskot" <mateusz@loskot.net>
To: "Nimalika" <nimalika.f@sliit.lk>
Cc: <gdal-dev@lists.maptools.org>
Sent: Monday, June 11, 2007 11:50 AM
Subject: Re: [Gdal-dev] help on ogr2ogr to assign Spatial reference system


> Nimalika wrote:
>> It seems like the way in which I gave the parameters are not correct .
>> Any help in this regard is highly appriciated.
>
> You need to wrap definition passed to *_srs options with quotes,
> if the definition you're passing includes spaces:
>
> -a_srs "+proj=tmerc +ellps=evrst30 +lat_0=7.00048 +lon_o=80.77171
> +k=0.9999238418 +x-0=2000000 +y_0=200000 +units=m"
>
> but if you pass ie. EPSG code, then you don't need to wrap it with quotes:
>
> -a_srs EPSG:4326
>
> Cheers
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net
> 



From mateusz at loskot.net  Mon Jun 11 03:52:22 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] help on ogr2ogr to assign Spatial reference system
In-Reply-To: <008601c7abfa$18712370$d81410ac@nimali>
References: <000601c7abf0$b7150fa0$d81410ac@nimali> <466CE9AE.70809@loskot.net>
	<008601c7abfa$18712370$d81410ac@nimali>
Message-ID: <466CFF36.8040109@loskot.net>

Nimalika wrote:
> I tried with the quotes but still fails and this time no error
> message.
> 
>> ogr2ogr -f "ESRI Shapefile" -a_srs "+proj=tmerc +ellps=ev
> rst30 +lat_0=7.00048 +lon_0=80.77171 +k=0.9999238418 +x-0=2000000 
> +y_0=200000 +u nits=m" D:\Reserch\Kaduwela\Kaduwela\gn_kaduwela.shp 
> Usage: ogr2ogr [--help-general] [-skipfailures] [-append] [-update] 
> [-select field_list] [-where restricted_where] ..... anny help is
> appriciated much.

Your command is incomplete.
According to the manual (http://www.gdal.org/ogr/ogr2ogr.html)
you need to provide dst_datasource_name *and* src_datasource_name
OGR does not support in-place update, so the overall procedure looks as
follows:

1. ogr2ogr ... output_data my_existing_data
2. Delete (or move somewhere) my_existing_data
3. Rename output_data to my_existing_data

Usually, users wrap these steps with a script ie. in Bash.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From jukka.rahkonen at mmmtike.fi  Mon Jun 11 05:35:05 2007
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Re: JP2 files (JPEG2000)
References: <loom.20070606T171909-883@post.gmane.org>
	<4668D97C.4020606@pobox.com>
Message-ID: <loom.20070611T105432-704@post.gmane.org>

Frank Warmerdam <warmerdam <at> pobox.com> writes:
> juan wrote:
> > Dear all,
> > 
> > I have to read some JP2 geocoded image files that have
 been created with Kakadu 
> > software (I believe). The thing is that using gdal drivers
 as in the tutorial 
> > but I see the file, dimensions of the image and type but I seem to 
loose the 
> > geo-referencing information and also when I try to
 access the values they all 
> > return a zero value. 
> > 
> > Does anyone tell me if GDAL supports this type of files?
 If not, does anyone 
> > know a solution to read these files?
> 
> Juan,
> 
> GDAL supports a variety of geocoding formats in JPEG2000 files, but I'm not
> sure what mechanism Kakadu is using for it's encoding.  I'd add that some
> of the support for different formats was added fairly recently to GDAL
> so if you are using something older than 1.4.0 that could be an issue.
...

Hi,

Kakadu is after all C++ library for those who would like to make
own jpeg2000 applications.  It does include some extremely
good demonstration programs that can be used for compressing,
decompressing, viewing and serving jpeg2000 imagery. The problem
is that the main aim of the Kakadu developers is not to improve
these demo programs, while people like me are willing to use those
as they are because they are full of features, fast, and free of
charge for non-commercial use.
When it comes to geo-referencing, kdu_compress can compress tiff
files directly to jpeg2000. It they are GeoTiffs then the
georeferencing is transferred as well with GeoJP2 system, and
GDAL will recognise it.  With kdu_compress you can only compress
from Windows BMP, PGM/PPM (portable gray map/ portable pixel map,
or RAW formats (you can demonstrate quite a lot of jpeg2000 stuff
with those formats).
So the only way to include georeferencing to jpeg2000 files made
with kdu_compress is to start from GeoTiff files and compress them.
By now it is better to have pixel interleaved geoTIFF to start
from (creation option INTERLEAVE=PIXEL in GDAL), because the 
downloadable demo executables may not handle band interleaved
images correctly.  I've been told that this is corrected in the
next demo release, and it is already correected in the SDK.
Another alternative is to use worldfile, I remember that GDAL
accepts world files named either as .j2w or .wld.

-Jukka Rahkonen-



From nimalika.f at sliit.lk  Mon Jun 11 09:28:53 2007
From: nimalika.f at sliit.lk (Nimalika)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] help on ogr2ogr to assign Spatial reference system
References: <000601c7abf0$b7150fa0$d81410ac@nimali> <466CE9AE.70809@loskot.net>
	<008601c7abfa$18712370$d81410ac@nimali>
	<466CFF36.8040109@loskot.net>
Message-ID: <00cf01c7ac2c$74a35c30$d81410ac@nimali>


Dear M.L,

Thank you so much. It works fine. My error was that no destination file was 
added.

I add the code for anybody who is having same type of issue.

>ogr2ogr -f "ESRI Shapefile" -a_srs "+proj=tmerc +ellps=ev
rst30 +lat_0=7.00048 +lon_0=80.77171 +k=0.9999238418 +x-0=2000000 
+y_0=200000 +u
nits=m" gn_kaduwela_ref.shp D:\Reserch\Kaduwela\Kaduwela\gn_kaduwela.shp

resulting .proj file looks like follows.

PROJCS["Transverse_Mercator",GEOGCS["Everest 
1830",DATUM["D_unknown",SPHEROID["evrst30",6377276.345,300.8017]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",7.00048],PARAMETER["central_meridian",80.77171],PARAMETER["scale_factor",0.9999238418],PARAMETER["false_easting",0],PARAMETER["false_northing",200000],UNIT["Meter",1]]

I tried to add datum parameter also . Can anybody suggest from where to get 
valid datum names ? I tried with D_Kandawala, kadawala both but they are not 
correct.

Best Regards

Nimalika




----- Original Message ----- 
From: "Mateusz Loskot" <mateusz@loskot.net>
To: "Nimalika" <nimalika.f@sliit.lk>
Cc: <gdal-dev@lists.maptools.org>
Sent: Monday, June 11, 2007 1:22 PM
Subject: Re: [Gdal-dev] help on ogr2ogr to assign Spatial reference system


> Nimalika wrote:
>> I tried with the quotes but still fails and this time no error
>> message.
>>
>>> ogr2ogr -f "ESRI Shapefile" -a_srs "+proj=tmerc +ellps=ev
>> rst30 +lat_0=7.00048 +lon_0=80.77171 +k=0.9999238418 +x-0=2000000
>> +y_0=200000 +u nits=m" D:\Reserch\Kaduwela\Kaduwela\gn_kaduwela.shp
>> Usage: ogr2ogr [--help-general] [-skipfailures] [-append] [-update]
>> [-select field_list] [-where restricted_where] ..... anny help is
>> appriciated much.
>
> Your command is incomplete.
> According to the manual (http://www.gdal.org/ogr/ogr2ogr.html)
> you need to provide dst_datasource_name *and* src_datasource_name
> OGR does not support in-place update, so the overall procedure looks as
> follows:
>
> 1. ogr2ogr ... output_data my_existing_data
> 2. Delete (or move somewhere) my_existing_data
> 3. Rename output_data to my_existing_data
>
> Usually, users wrap these steps with a script ie. in Bash.
>
> Cheers
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net
> 



From mateusz at loskot.net  Mon Jun 11 09:42:03 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] help on ogr2ogr to assign Spatial reference system
In-Reply-To: <00cf01c7ac2c$74a35c30$d81410ac@nimali>
References: <000601c7abf0$b7150fa0$d81410ac@nimali> <466CE9AE.70809@loskot.net>
	<008601c7abfa$18712370$d81410ac@nimali>
	<466CFF36.8040109@loskot.net>
	<00cf01c7ac2c$74a35c30$d81410ac@nimali>
Message-ID: <466D512B.9010902@loskot.net>

Nimalika wrote:
> Can anybody suggest from where to get valid datum names ? I tried
> with D_Kandawala, kadawala both but they are not correct.

You can list projections, ellipsoids and datums built-in PROJ.4 (also
used by GDAL), using proj command. Check the first Q in the FAQ:

http://proj.maptools.org/faq.html

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Mon Jun 11 15:11:17 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] gdal --with-grass on solaris
In-Reply-To: <1181586618.7719.1.camel@mellon>
References: <1181298752.7750.4.camel@mellon> <46694582.5040204@loskot.net>
	<1181586618.7719.1.camel@mellon>
Message-ID: <466D9E55.3010705@loskot.net>

Jachym Cepicky wrote:
> Mateusz Loskot p??e v P? 08. 06. 2007 v 14:03 +0200: [....]
>> May be there is libraries naming issue. The test that is failing 
>> above checks if there is G_asprintf() function defined in this 
>> library.
>> 
>> Also, if you could paste error from the config.log that would be 
>> helpful.
>> 
>> Cheers
> 
> I attached it to this e-mail.

Jachym,

It looks like a GRASS issue on Solaris.
As you can see in the config.log, near:

configure:22068: checking for G_asprintf in -lgrass_gis

./configure script tries to compile very simple test program:

/* conftest.c */
char G_asprintf();
int main()
{
  G_asprintf();
  return 0;
}

and the command calling GCC is

gcc -o conftest -g -O2 conftest.c -lgrass_gis
-L/usr/local/grass-6.2.2RC1//lib -lgrass_datetime -lz  -lm -lrt -ldl

but it fails.

If these -l and -L parameters are correct (paths and libraries exist)
then something is wrong with GRASS libraries on Solaris
- some symbols are undefined or inaccessible.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From alison_luo2001 at yahoo.com  Mon Jun 11 15:53:55 2007
From: alison_luo2001 at yahoo.com (Alison Luo)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Can GDAL GDALDataset return compressed image data
In-Reply-To: <466C6B56.3080906@pobox.com>
Message-ID: <258365.48562.qm@web50503.mail.re2.yahoo.com>

Hi Frank,

I still can not get the correct compressed data stream
using NITFSegmentInfo. I add the offset nSegmentStart
to the pointer hAccess, which should bring me to the
beginning of the compressed data stream. Then I read
nSegmentSize bytes of data from there. But from what I
read in memory, the returned block of data is not
correct. I expect to see the exact jpeg compressed
data returned.

I don't know what's wrong with my workflow. I'm
attaching the sample file I've been using.

By the way, is there any free NITF file viewer for
Windows platform to download?

Thanks,
Alison

--- Frank Warmerdam <warmerdam@pobox.com> wrote:

> Alison Luo wrote:
> > Hi Ivan,
> > 
> > Thank you so much for your help. I have more
> questions
> > regarding the block of code you referred to in
> > nitifdataset.cpp. I also took a look of class
> > NITFSegmentInfo in nitflilb.h:
> > 
> > NITFSegmentInfo has a member hAccess, which is the
> > NITF image stream.
> 
> Alison,
> 
> It is a pointer to the NITFImage structure for image
> segemnts.
> 
>  >  I suppose other pasSegmentInfo
> > member     
> >     GUInt32 nSegmentHeaderStart;
> >     GUInt32 nSegmentHeaderSize;
> >     GUInt32 nSegmentStart;
> >     GUInt32 nSegmentSize;
> > would somehow indicate how to get the encoded jpeg
> > stream from hAccess? Could you please explain how
> the
> > jpeg buffer is filled given this information?
> 
> They are information on where the image header, and
> image
> data chunks are in the file.  So compressed data
> stream
> would consist of nSegmentSize bytes started at byte
> nSegmentStart
> in the file.
> 
> > Why doesn't GDAL provide APIs to access encoded
> image
> > stream, but only provide API to get raw image
> stream?
> 
> GDAL does not provide direct access to compressed
> datastreams
> because the purpose of GDAL is to provide a
> "normalized" view to
> different datasets, not to provide low level access.
> 
> Best regards,
> -- 
>
---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank
> Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows |
> http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President
> OSGeo, http://osgeo.org
> 
> 



      ____________________________________________________________________________________
Shape Yahoo! in your own image.  Join our Network Research Panel today!   http://surveylink.yahoo.com/gmrs/yahoo_panel_invite.asp?a=7 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: i_3008a.ntf
Type: application/octet-stream
Size: 21212 bytes
Desc: 2095884774-i_3008a.ntf
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070611/b4717b36/i_3008a.obj
From alison_luo2001 at yahoo.com  Mon Jun 11 17:22:31 2007
From: alison_luo2001 at yahoo.com (Alison Luo)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Can GDAL GDALDataset return compressed image data
Message-ID: <729298.26457.qm@web50509.mail.re2.yahoo.com>

Never mind. I finally got the compressed data!!!
nSegmentStart is the offset from the file handler, not
from the image handler. Once I changed my code to
compute the offset from the file handler, I got the
compressed data correctly.

Alison

--- Alison Luo <alison_luo2001@yahoo.com> wrote:

> Hi Frank,
> 
> I still can not get the correct compressed data
> stream
> using NITFSegmentInfo. I add the offset
> nSegmentStart
> to the pointer hAccess, which should bring me to the
> beginning of the compressed data stream. Then I read
> nSegmentSize bytes of data from there. But from what
> I
> read in memory, the returned block of data is not
> correct. I expect to see the exact jpeg compressed
> data returned.
> 
> I don't know what's wrong with my workflow. I'm
> attaching the sample file I've been using.
> 
> By the way, is there any free NITF file viewer for
> Windows platform to download?
> 
> Thanks,
> Alison
> 
> --- Frank Warmerdam <warmerdam@pobox.com> wrote:
> 
> > Alison Luo wrote:
> > > Hi Ivan,
> > > 
> > > Thank you so much for your help. I have more
> > questions
> > > regarding the block of code you referred to in
> > > nitifdataset.cpp. I also took a look of class
> > > NITFSegmentInfo in nitflilb.h:
> > > 
> > > NITFSegmentInfo has a member hAccess, which is
> the
> > > NITF image stream.
> > 
> > Alison,
> > 
> > It is a pointer to the NITFImage structure for
> image
> > segemnts.
> > 
> >  >  I suppose other pasSegmentInfo
> > > member     
> > >     GUInt32 nSegmentHeaderStart;
> > >     GUInt32 nSegmentHeaderSize;
> > >     GUInt32 nSegmentStart;
> > >     GUInt32 nSegmentSize;
> > > would somehow indicate how to get the encoded
> jpeg
> > > stream from hAccess? Could you please explain
> how
> > the
> > > jpeg buffer is filled given this information?
> > 
> > They are information on where the image header,
> and
> > image
> > data chunks are in the file.  So compressed data
> > stream
> > would consist of nSegmentSize bytes started at
> byte
> > nSegmentStart
> > in the file.
> > 
> > > Why doesn't GDAL provide APIs to access encoded
> > image
> > > stream, but only provide API to get raw image
> > stream?
> > 
> > GDAL does not provide direct access to compressed
> > datastreams
> > because the purpose of GDAL is to provide a
> > "normalized" view to
> > different datasets, not to provide low level
> access.
> > 
> > Best regards,
> > -- 
> >
>
---------------------------------------+--------------------------------------
> > I set the clouds in motion - turn up   | Frank
> > Warmerdam, warmerdam@pobox.com
> > light and sound - activate the windows |
> > http://pobox.com/~warmerdam
> > and watch the world go round - Rush    | President
> > OSGeo, http://osgeo.org
> > 
> > 
> 
> 
> 
>      
>
____________________________________________________________________________________
> Shape Yahoo! in your own image.  Join our Network
> Research Panel today!  
>
http://surveylink.yahoo.com/gmrs/yahoo_panel_invite.asp?a=7
> 
> 
> 



       
____________________________________________________________________________________
Yahoo! oneSearch: Finally, mobile search 
that gives answers, not web links. 
http://mobile.yahoo.com/mobileweb/onesearch?refer=1ONXIC

From fabio at synapsisbrasil.com.br  Tue Jun 12 09:29:10 2007
From: fabio at synapsisbrasil.com.br (=?iso-8859-1?Q?Kaminski=2C_F=E1bio_-_PROVIDER?=)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Support for SVG format
Message-ID: <0501AE5E961A4D42899FBCC1755CCE1501DF576E@forsyn01ex01.for.e-corpnet.org>

Is there any plans for OGR support the SVG format?

 

It seems that format is growing as a standard for Web browsers in support for vector graphics..

Perhaps our applications using ogr could deploy in this format if necessary, for internet browser navigation..

 

Any issue about SVG?

 

 

Cheers,

 

Fabio Kaminski

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070612/c59827bd/attachment.html
From warmerdam at pobox.com  Tue Jun 12 09:58:54 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Support for SVG format
In-Reply-To: <0501AE5E961A4D42899FBCC1755CCE1501DF576E@forsyn01ex01.for.e-corpnet.org>
References: <0501AE5E961A4D42899FBCC1755CCE1501DF576E@forsyn01ex01.for.e-corpnet.org>
Message-ID: <466EA69E.1080700@pobox.com>

Kaminski wrote:
> Is there any plans for OGR support the SVG format?
> 
> It seems that format is growing as a standard for Web browsers in 
> support for vector graphics..
> 
> Perhaps our applications using ogr could deploy in this format if 
> necessary, for internet browser navigation..
> 
> Any issue about SVG?

Fabio,

I am not aware of any plans to implement SVG support in OGR.  My main
concern with implementing it in OGR directly is that SVG is a fairly
presentation oriented format, and OGR doesn't address such issues very
well.  So most people use a rendering engine, like MapServer, to convert
from OGR inputs to SVG.  This allows development of a map file to decribe
the appearance of the output SVG.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From alison_luo2001 at yahoo.com  Tue Jun 12 20:53:56 2007
From: alison_luo2001 at yahoo.com (Alison Luo)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] How to get NITF image resolution
In-Reply-To: <466C6B56.3080906@pobox.com>
Message-ID: <491761.14381.qm@web50505.mail.re2.yahoo.com>

I need to get the resolution of NITF images. I read
through all the nitf-related code in GDAL source code,
but I do not seem to be able to find the code to get
NITF image resolution.

Thanks,
Alison


       
____________________________________________________________________________________
Moody friends. Drama queens. Your life? Nope! - their life, your story. Play Sims Stories at Yahoo! Games.
http://sims.yahoo.com/  

From smithj at nsidc.org  Tue Jun 12 21:06:22 2007
From: smithj at nsidc.org (Jeff Smith)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Multiple Images in HDF4Image format
Message-ID: <466F430E.4070802@nsidc.org>

I need to merge 2 GIFs into a single HDF4 file. The GDAL documentation
implies that files in HDF4Image format can be appended to. My guess was
to use the gdal_translate utility to create the HDF4 file, but I can't
figure out how to append the second image to the file. Presumably, I
need to use some arguement to the -co flag. Any help would be appreciated.

-- 
=========================================================================
Jeff Smith				
NSIDC/CIRES				Email: smithj@nsidc.org
University of Colorado, Boulder		Phone: (303)492-5692
449 UCB	   				Fax:   (303)492-2468
Boulder, CO 80309-0449			NSIDC WWW: http://nsidc.org
=========================================================================

"It is perhaps easier, and certainly safer,
 to follow a beaten path, but it is also
 dull, uninteresting, and futile."
                      - Dmitri Shostakovich



From jluis at ualg.pt  Tue Jun 12 21:06:58 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Do we need to specifically set band's min,
	max on writting?
Message-ID: <466F4332.8080906@ualg.pt>

Hi,

When saving a dataset to a file do we have to specifically say what are 
datasets min and max?
And if yes, how do we do that? I searched but didn't find any 
"GDALSetRasterMinimum"
I am using GDALRasterIO( hBand, GF_Write, ...) and thought band min, max 
were being
set automatically but a gdalinfo -stats shows this (the rest, as far as 
I can see, is ok)
....
Band 1 Block=1781x1 Type=Float32, ColorInterp=Gray
  Minimum=-1.#IO, Maximum=-1.#IO, Mean=-1.#IO, StdDev=-1.#IO
  Metadata:
    STATISTICS_MINIMUM=-1.#IND
    STATISTICS_MAXIMUM=-1.#IND
    STATISTICS_MEAN=-1.#IND
    STATISTICS_STDDEV=-1.#IND

Thanks

Joaquim Luis

From rayg at daylongraphics.com  Tue Jun 12 21:44:43 2007
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Second Life tool
In-Reply-To: <466F4332.8080906@ualg.pt>
References: <466F4332.8080906@ualg.pt>
Message-ID: <466F4C0B.30000@daylongraphics.com>

A split/merge tool that breaks up and combines channels for Second Life 
files is available at

http://www.daylongraphics.com/products/leveller/download/secondliferaw.zip

If anyone feels it would be handy to have a Second Life driver added to 
GDAL, I could add it.

Ray

From warmerdam at pobox.com  Tue Jun 12 22:41:16 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Do we need to specifically set band's min, max on
	writting?
In-Reply-To: <466F4332.8080906@ualg.pt>
References: <466F4332.8080906@ualg.pt>
Message-ID: <466F594C.4000101@pobox.com>

Joaquim Luis wrote:
> Hi,
> 
> When saving a dataset to a file do we have to specifically say what are 
> datasets min and max?
> And if yes, how do we do that? I searched but didn't find any 
> "GDALSetRasterMinimum"
> I am using GDALRasterIO( hBand, GF_Write, ...) and thought band min, max 
> were being
> set automatically but a gdalinfo -stats shows this (the rest, as far as 
> I can see, is ok)
> ....
> Band 1 Block=1781x1 Type=Float32, ColorInterp=Gray
>  Minimum=-1.#IO, Maximum=-1.#IO, Mean=-1.#IO, StdDev=-1.#IO
>  Metadata:
>    STATISTICS_MINIMUM=-1.#IND
>    STATISTICS_MAXIMUM=-1.#IND
>    STATISTICS_MEAN=-1.#IND
>    STATISTICS_STDDEV=-1.#IND

Joaquim,

You do not need to set raster min/max values yourself.  They are normally
computed on request.  The above likely means you have some pixels - perhaps
unwritten portions - which have invalid floating point values.  This
messes up the min/max calculations for floating point.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Jun 12 22:42:28 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Multiple Images in HDF4Image format
In-Reply-To: <466F430E.4070802@nsidc.org>
References: <466F430E.4070802@nsidc.org>
Message-ID: <466F5994.5010006@pobox.com>

Jeff Smith wrote:
> I need to merge 2 GIFs into a single HDF4 file. The GDAL documentation
> implies that files in HDF4Image format can be appended to. My guess was
> to use the gdal_translate utility to create the HDF4 file, but I can't
> figure out how to append the second image to the file. Presumably, I
> need to use some arguement to the -co flag. Any help would be appreciated.

Jeff,

I am not aware of a mechanism for writing multi-image HDF4 files.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Jun 12 22:44:55 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] How to get NITF image resolution
In-Reply-To: <491761.14381.qm@web50505.mail.re2.yahoo.com>
References: <491761.14381.qm@web50505.mail.re2.yahoo.com>
Message-ID: <466F5A27.8040300@pobox.com>

Alison Luo wrote:
> I need to get the resolution of NITF images. I read
> through all the nitf-related code in GDAL source code,
> but I do not seem to be able to find the code to get
> NITF image resolution.

Alison,

The GDALGetGeoTransform() function or GetGeoTransform() method on
the GDALDataset will return an affine transformation mapping pixel/line
coordinates to georeferenced coordinates.  For unrotated (north up)
images the pixel width will be the second entry in this array, and
the pixel height will be the negative of the sixth element of this
array.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jluis at ualg.pt  Tue Jun 12 22:26:28 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Do we need to specifically set band's min, max on
	writting?
In-Reply-To: <466F594C.4000101@pobox.com>
References: <466F4332.8080906@ualg.pt> <466F594C.4000101@pobox.com>
Message-ID: <466F55D4.90300@ualg.pt>

Frank Warmerdam wrote:
> Joaquim Luis wrote:
>> Hi,
>>
>> When saving a dataset to a file do we have to specifically say what 
>> are datasets min and max?
>> And if yes, how do we do that? I searched but didn't find any 
>> "GDALSetRasterMinimum"
>> I am using GDALRasterIO( hBand, GF_Write, ...) and thought band min, 
>> max were being
>> set automatically but a gdalinfo -stats shows this (the rest, as far 
>> as I can see, is ok)
>> ....
>> Band 1 Block=1781x1 Type=Float32, ColorInterp=Gray
>>  Minimum=-1.#IO, Maximum=-1.#IO, Mean=-1.#IO, StdDev=-1.#IO
>>  Metadata:
>>    STATISTICS_MINIMUM=-1.#IND
>>    STATISTICS_MAXIMUM=-1.#IND
>>    STATISTICS_MEAN=-1.#IND
>>    STATISTICS_STDDEV=-1.#IND
>
> Joaquim,
>
> You do not need to set raster min/max values yourself.  They are normally
> computed on request.  The above likely means you have some pixels - 
> perhaps
> unwritten portions - which have invalid floating point values.  This
> messes up the min/max calculations for floating point.

Frank,

After my post I found out that the cause was due to fact that the file 
(a geotiff DEM, e.g. a float) has NaNs.
That is on purpose, as they correspond to nodata values.
Do you mean that all files that have NaNs cannot have their min/max 
computed?

Joaquim

From warmerdam at pobox.com  Tue Jun 12 23:25:35 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Do we need to specifically set band's min, max on
	writting?
In-Reply-To: <466F55D4.90300@ualg.pt>
References: <466F4332.8080906@ualg.pt> <466F594C.4000101@pobox.com>
	<466F55D4.90300@ualg.pt>
Message-ID: <466F63AF.8020907@pobox.com>

Joaquim Luis wrote:
> Frank,
> 
> After my post I found out that the cause was due to fact that the file 
> (a geotiff DEM, e.g. a float) has NaNs.
> That is on purpose, as they correspond to nodata values.
> Do you mean that all files that have NaNs cannot have their min/max 
> computed?

Joaquim,

It means that NaNs are not currently ignored by the min/max computation
code.  If you wish you could file that as a bug, though I'd claim putting
"special" values like NaN and Inf in floating point images is asking
for trouble.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jluis at ualg.pt  Tue Jun 12 22:47:59 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Do we need to specifically set band's min, max on
	writting?
In-Reply-To: <466F63AF.8020907@pobox.com>
References: <466F4332.8080906@ualg.pt> <466F594C.4000101@pobox.com>
	<466F55D4.90300@ualg.pt> <466F63AF.8020907@pobox.com>
Message-ID: <466F5ADF.5090803@ualg.pt>

Frank Warmerdam wrote:
> Joaquim Luis wrote:
>> Frank,
>>
>> After my post I found out that the cause was due to fact that the 
>> file (a geotiff DEM, e.g. a float) has NaNs.
>> That is on purpose, as they correspond to nodata values.
>> Do you mean that all files that have NaNs cannot have their min/max 
>> computed?
>
> Joaquim,
>
> It means that NaNs are not currently ignored by the min/max computation
> code.  If you wish you could file that as a bug, though I'd claim putting
> "special" values like NaN and Inf in floating point images is asking
> for trouble.

Frank,

If you accept this as a reference ...
This has always been the practice within GMT grids and I don't know of 
any complains about this practice.

Other opinions?

Joaquim Luis


From mkadiwala at flenvironmental.org  Wed Jun 13 10:28:42 2007
From: mkadiwala at flenvironmental.org (Mubin)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Increasing Buffer Size in GDAL's Project2
Message-ID: <11100722.post@talk.nabble.com>


Hi,

I am using GDAL's project2.exe file to convert BIP (bytes interleaved by
pixels) formatted files to BSQ (bytes sequential).  A high resolution image
file of size 30GB takes about ~12-15hrs to convert.  I could use ENVI to do
this conversion for me which would take about ~5-6hrs but, as I have many
files to convert so I want to batch the process.  I remember someone once
telling me that the buffer size is ~64k in project2.  If that is true, is
there a way to increase this buffer size in the code for faster processing? 
If not, is there any other way to increase the speed of project2.  Here is
my call to project2:

project2 -of ENVI -s_srs "+proj=utm +zone=16 +datum=wgs84" -t_srs "+proj=utm
+zone=16 +datum=wgs84" DSS_Image_BIP.bip DSS_Image_BSQ.bsq

My computer specs is:
CPU:  3.0GHz
RAM:  2.0GB

Any help would be greatly appriciated.

Thanks,
Mubin
-- 
View this message in context: http://www.nabble.com/Increasing-Buffer-Size-in-GDAL%27s-Project2-tf3915050.html#a11100722
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From warmerdam at pobox.com  Wed Jun 13 12:27:00 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Increasing Buffer Size in GDAL's Project2
In-Reply-To: <11100722.post@talk.nabble.com>
References: <11100722.post@talk.nabble.com>
Message-ID: <46701AD4.8070508@pobox.com>

Mubin wrote:
> Hi,
> 
> I am using GDAL's project2.exe file to convert BIP (bytes interleaved by
> pixels) formatted files to BSQ (bytes sequential).  A high resolution image
> file of size 30GB takes about ~12-15hrs to convert.  I could use ENVI to do
> this conversion for me which would take about ~5-6hrs but, as I have many
> files to convert so I want to batch the process.  I remember someone once
> telling me that the buffer size is ~64k in project2.  If that is true, is
> there a way to increase this buffer size in the code for faster processing? 
> If not, is there any other way to increase the speed of project2.  Here is
> my call to project2:
> 
> project2 -of ENVI -s_srs "+proj=utm +zone=16 +datum=wgs84" -t_srs "+proj=utm
> +zone=16 +datum=wgs84" DSS_Image_BIP.bip DSS_Image_BSQ.bsq

Mubin,

I believe project2 is a customized version of gdalwarp prepared for you, so it
isn't likely to be familiar to most GDAL users.

But, assuming it supports all the normal gdalwarp commandline options, you
should be able to add "-wm 400" to assign 400M of warp memory.  This
essentially establishes the size of imagery chunk warped at a time.  Bigger
chunks are somewhat more efficient than small chunks, though the difference
isn't necessarily large.

The other thing that can help is to increase the block cache size.  This
is the IO subsystem cache of blocks on the source and destination file.
This can be set at the commandline using the "--config GDAL_CACHEMAX 400"
switch or by setting the GDAL_CACHEMAX environment variable in advance.

I would suggest setting both values to 400 (400MB) since you have lots of
RAM.  Setting them larger is unlikely to improve performance noticably.

PS. if you aren't really doing any resampling or reprojecting, you might
get much better performance just using gdal_translate directly.  The
GDAL_CACHEMAX item can be helpful for that program as well.  Going through
the warp api adds a great deal of extra processing work.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From daniel112b at gmail.com  Wed Jun 13 12:46:05 2007
From: daniel112b at gmail.com (Daniel)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Assertion in .tab driver
Message-ID: <962626470706130946u489703abt55c2292436c1bf1f@mail.gmail.com>

Hello,

If you build GDAL against the debug version of the c-runtime with
Visual Studio 2005 (/MDd) and try to open a .tab file with 8-bit ASCII
characters in it, the field names for instance, you get an assert in
isspace on row 177 in
http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/mitab/mitab_imapinfofile.cpp

The parameter passed to isspace is a signed char which is converted to
a signed int so any values >127 will become negative. It seems to work
fine when built against the release libraries and if you ignore the
assert it seems to work so this is probably nothing serious maybe
depending on the locale that is used. It can easily be fixed by
casting the char to an unsigend char before passing it to isspace:
isspace((unsigned char)*pszLine)

Regards,
  Daniel B?ck


From alison_luo2001 at yahoo.com  Wed Jun 13 13:47:47 2007
From: alison_luo2001 at yahoo.com (Alison Luo)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] NITF viewer
In-Reply-To: <466F5A27.8040300@pobox.com>
Message-ID: <864386.74109.qm@web50506.mail.re2.yahoo.com>

Is there any free NITF image viewer for Windows to
download? I have a ntf file that I can not decode
using GDAL. I'm wondering if this is a corrupted NITF
file. So I need a NITF viewer to verify.

Thanks,
Alison


       
____________________________________________________________________________________
Moody friends. Drama queens. Your life? Nope! - their life, your story. Play Sims Stories at Yahoo! Games.
http://sims.yahoo.com/  

From ivan.lucena at pmldnet.com  Wed Jun 13 14:11:48 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] NITF viewer
In-Reply-To: <864386.74109.qm@web50506.mail.re2.yahoo.com>
References: <864386.74109.qm@web50506.mail.re2.yahoo.com>
Message-ID: <46703364.9070306@pmldnet.com>

XnView: http://www.xnview.com/

Alison Luo wrote:
> Is there any free NITF image viewer for Windows to
> download? I have a ntf file that I can not decode
> using GDAL. I'm wondering if this is a corrupted NITF
> file. So I need a NITF viewer to verify.
> 
> Thanks,
> Alison
> 
> 
>        
> ____________________________________________________________________________________
> Moody friends. Drama queens. Your life? Nope! - their life, your story. Play Sims Stories at Yahoo! Games.
> http://sims.yahoo.com/  
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

From dmitry.kan at gmail.com  Thu Jun 14 10:02:18 2007
From: dmitry.kan at gmail.com (Dmitry Kan)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] GDALGetCacheUsed() always returns 0
Message-ID: <9a4d1d60706140702l48b86f76h1094bd3543936d84@mail.gmail.com>

Hello list!

I just came across small issue relating to caching in GDAL. I use
GDALGetCacheMax() to vary the cache limit and it seems to be working fine.
But when I request the amount of bytes used via GDALGetCacheUsed() after the
whole process I always get 0 bytes. Could anyone please explain me why does
this take place?

Version details: GDAL 1.4.0.0, FWTools 1.1.3 released 20070104.

-- 
best wishes,
Dmitry Kan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070614/df49d90a/attachment.html
From asmits at lizardtech.com  Thu Jun 14 10:21:05 2007
From: asmits at lizardtech.com (Alex Smits)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] ESRI AUX file support
Message-ID: <DBEC881B4E22D1449F5FAC530E1ADD12DC06AB@sea-srv-ms3.lizardtech.com>

I'm looking for a way to read and write ESRI/Erdas/Leica AUX files, and
my initial queries have come up with nothing.  Does GDAL support this
functionality?

Thanks,
Alex Smits


From ivan.lucena at pmldnet.com  Thu Jun 14 10:42:15 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] ESRI AUX file support
In-Reply-To: <DBEC881B4E22D1449F5FAC530E1ADD12DC06AB@sea-srv-ms3.lizardtech.com>
References: <DBEC881B4E22D1449F5FAC530E1ADD12DC06AB@sea-srv-ms3.lizardtech.com>
Message-ID: <467153C7.1010002@pmldnet.com>

hfatest.cpp in \frmts\hfa is a independent executable that does that.

Alex Smits wrote:
> I'm looking for a way to read and write ESRI/Erdas/Leica AUX files, and
> my initial queries have come up with nothing.  Does GDAL support this
> functionality?
> 
> Thanks,
> Alex Smits
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

From warmerdam at pobox.com  Thu Jun 14 11:27:43 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] ESRI AUX file support
In-Reply-To: <DBEC881B4E22D1449F5FAC530E1ADD12DC06AB@sea-srv-ms3.lizardtech.com>
References: <DBEC881B4E22D1449F5FAC530E1ADD12DC06AB@sea-srv-ms3.lizardtech.com>
Message-ID: <46715E6F.3010501@pobox.com>

Alex Smits wrote:
> I'm looking for a way to read and write ESRI/Erdas/Leica AUX files, and
> my initial queries have come up with nothing.  Does GDAL support this
> functionality?

Alex,

As Ivan mentioned, you can build the hfatest utility in gdal/frmts/hfa and
it is capable of dumping a variety of details about an .aux file.  On
windows you would do:

cd gdal\frmts\hfa
nmake /f makefile.vc hfatest.exe

hfatest.exe -dt abc.aux

It will dump a "tree view" of the internal nodes.

You can also just run gdalinfo against a .aux file and find out some
information.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Jun 14 11:50:05 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] GDALGetCacheUsed() always returns 0
In-Reply-To: <9a4d1d60706140702l48b86f76h1094bd3543936d84@mail.gmail.com>
References: <9a4d1d60706140702l48b86f76h1094bd3543936d84@mail.gmail.com>
Message-ID: <467163AD.8060903@pobox.com>

Dmitry Kan wrote:
> 
> Hello list!
> 
> I just came across small issue relating to caching in GDAL. I use 
> GDALGetCacheMax() to vary the cache limit and it seems to be working 
> fine. But when I request the amount of bytes used via GDALGetCacheUsed() 
> after the whole process I always get 0 bytes. Could anyone please 
> explain me why does this take place?

Dmitry,

This function returns the amount of cache bytes *currently* in use.  When
you close the files all cached blocks are released.  So if you want an
approximation of the maximum amount of cache used then call the
function before closing anything.

If you want to track a true highwater mark then the code would have to be
changed.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From willy.hersman at conocophillips.com  Thu Jun 14 11:50:20 2007
From: willy.hersman at conocophillips.com (Hersman, William)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Row/column data to Geotiff
Message-ID: <A9AC87CDA7DB664689BCB76FC4275AAFC4A565@ancexmb2.conoco.net>

Hi,

I am looking for a way to write geotiff files from simple row/column
data, such as:

 ROW    7;  COLUMNS   1 THRU 50
  6038.698       6025.553       6013.471       6003.241       5995.237
  5989.413       5985.433       5982.787       5981.004       5979.861
  5979.379       5980.666       5984.076       5990.979       6060.380
  6071.938       6092.017       6115.689       6107.636       6097.677
  6088.838       6081.833       6076.131       6071.144       6066.436
  6061.369       6055.924       6050.646       6046.408       6044.147
  6044.722       6048.734       6049.608       6047.399       6045.258
  6044.493       6044.704       6044.831       6044.806       6047.358
  6053.283       6065.744       6074.324       6078.942       6076.226
  6133.812       6140.912       6148.538       6155.627       6160.118

Can that be done with the GDAL library (I'm on Linux)?  It's not clear
to me, but seems like it should be doable.  Or maybe there is an easier
way with another library or freeware?

Thanks,

William Hersman

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070614/f315842c/attachment.html
From warmerdam at pobox.com  Thu Jun 14 12:11:51 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Row/column data to Geotiff
In-Reply-To: <A9AC87CDA7DB664689BCB76FC4275AAFC4A565@ancexmb2.conoco.net>
References: <A9AC87CDA7DB664689BCB76FC4275AAFC4A565@ancexmb2.conoco.net>
Message-ID: <467168C7.3040200@pobox.com>

Hersman, William wrote:
> Hi,
> 
> I am looking for a way to write geotiff files from simple row/column 
> data, such as:
> 
>  ROW    7;  COLUMNS   1 THRU 50
>   6038.698       6025.553       6013.471       6003.241       5995.237
>   5989.413       5985.433       5982.787       5981.004       5979.861
>   5979.379       5980.666       5984.076       5990.979       6060.380
>   6071.938       6092.017       6115.689       6107.636       6097.677
>   6088.838       6081.833       6076.131       6071.144       6066.436
>   6061.369       6055.924       6050.646       6046.408       6044.147
>   6044.722       6048.734       6049.608       6047.399       6045.258
>   6044.493       6044.704       6044.831       6044.806       6047.358
>   6053.283       6065.744       6074.324       6078.942       6076.226
>   6133.812       6140.912       6148.538       6155.627       6160.118
> 
> Can that be done with the GDAL library (I'm on Linux)?  It's not clear 
> to me, but seems like it should be doable.  Or maybe there is an easier 
> way with another library or freeware?

William,

If you can format the values in Arc/Info ASCII Grid format it should be
trivial to translate to other GDAL supported format. I have attached a
50x7 ascii grid as an example.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

-------------- next part --------------
ncols        50
nrows        7
xllcorner    440720.000000000000
yllcorner    3750900.000000000000
cellsize     60.000000000000
 107.5 123 132 115 132 132 140 132 132 132 107 132 107 132 132 107 123 115 156 148 107 132 107 115 99 123 99 74 115 82 115 115 107 123 123 99 123 123 115 115 107 90 99 107 107 99 123 107 140 123
 115 132 107 123 148 115 165 115 140 107 123 123 99 132 123 132 132 132 99 156 123 140 115 115 115 99 107 132 107 115 107 99 90 115 115 107 123 99 115 123 115 115 140 132 140 115 132 115 140 107
 115 132 140 132 123 115 140 107 140 115 132 123 107 132 132 115 115 107 115 107 123 107 132 90 132 123 99 107 99 115 90 99 115 107 115 90 123 99 123 123 107 140 107 132 123 123 123 140 140 107
 148 132 123 123 115 132 132 123 115 123 115 123 107 115 148 107 115 140 115 132 99 107 107 107 115 132 115 156 115 115 115 107 115 99 123 90 107 99 107 115 115 123 140 107 132 107 123 123 123 123
 132 156 132 140 132 132 115 115 115 123 148 123 165 123 132 107 107 132 156 123 115 99 107 99 123 99 115 115 99 107 115 90 115 90 99 115 107 123 107 99 140 99 140 115 132 123 115 115 123 132
 189 173 173 148 148 115 148 123 107 132 115 132 156 99 123 115 132 132 206 107 115 99 90 107 123 99 115 123 90 99 99 99 99 123 107 115 107 107 123 132 132 132 107 156 132 115 115 132 140 132
 197 173 148 140 140 132 99 132 123 115 140 132 132 99 132 123 132 173 123 115 115 99 107 132 107 123 99 107 107 99 115 99 99 90 99 115 90 115 140 115 148 123 132 140 123 123 148 132 115 140
From dmorissette at mapgears.com  Thu Jun 14 14:49:31 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Assertion in .tab driver
In-Reply-To: <962626470706130946u489703abt55c2292436c1bf1f@mail.gmail.com>
References: <962626470706130946u489703abt55c2292436c1bf1f@mail.gmail.com>
Message-ID: <46718DBB.9020403@mapgears.com>

I've received a contributed patch recently to replace this same 
isspace() call with a call to iswspace(), claiming that isspace() could 
potentially "crash" when passed a wide char. The change is not in GDAL 
yet, it will be ported to the GDAL copy of the MITAB driver before the 
GDAL 1.5.0 release.

I wonder if his "crash" might have been the same assert that you 
encountered and if yes then which fix between yours and his is better. I 
have contacted him to get his thoughts but haven't received any reply 
yet. I'd welcome your comments too.

Daniel



Daniel wrote:
> Hello,
> 
> If you build GDAL against the debug version of the c-runtime with
> Visual Studio 2005 (/MDd) and try to open a .tab file with 8-bit ASCII
> characters in it, the field names for instance, you get an assert in
> isspace on row 177 in
> http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/mitab/mitab_imapinfofile.cpp 
> 
> 
> The parameter passed to isspace is a signed char which is converted to
> a signed int so any values >127 will become negative. It seems to work
> fine when built against the release libraries and if you ignore the
> assert it seems to work so this is probably nothing serious maybe
> depending on the locale that is used. It can easily be fixed by
> casting the char to an unsigend char before passing it to isspace:
> isspace((unsigned char)*pszLine)
> 
> Regards,
>  Daniel B?ck
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Daniel Morissette
http://www.mapgears.com/

From nicolasgabarron at yahoo.fr  Fri Jun 15 02:09:13 2007
From: nicolasgabarron at yahoo.fr (NicoSIG)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] OCI support for Oracle 9i
In-Reply-To: <46697431.1000807@loskot.net>
References: <20070515110247.69c5a374@localhost.localdomain>
	<46499DCE.7030004@loskot.net>
	<20070515143715.4b9a48f9@localhost.localdomain>
	<464C4D74.7040402@loskot.net> <11027157.post@talk.nabble.com>
	<46697431.1000807@loskot.net>
Message-ID: <11133710.post@talk.nabble.com>


Hi,

I tried that, but the shell send an error message:

+ aclocal -I ./m4 
./autogen.sh: aclocal: not found
+ autoconf 
./autogen.sh: autoconf: not found

What are those executables ?
Do I install them, or where can I find them ?

In the svn distribution, there is a file aclocal.m4.
What is this file ?

Thanks,

Nico


Mateusz Loskot wrote:
> 
> NicoSIG wrote:
>> Hi,
>> 
>> I've the same problem, I tried with GDAL from SVN 
>> (gdal-svn-stable-2007.06.08.tar.gz), and the problem is persistent.
>> 
>> The version of Oracle seems correctly detected. Please, could you
>> regenerate the ./configure script for the next stable svn version ?
> 
> If you use SVN, you can regenereate ./configure yourself using
> autogen.sh. Just run
> 
> $ ./autogen.sh
> 
> and you should get fresh version of ./configure.
> 
> Could you confirm if the problem vanished/still exists after you
> regenerate the configure script?
> 
> I submitted ticket so we don't mis this task for next stable release:
> http://trac.osgeo.org/gdal/ticket/1661
> 
> Cheers
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/OCI-support-for-Oracle-9i-tf3757272.html#a11133710
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From mateusz at loskot.net  Fri Jun 15 04:12:13 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] OCI support for Oracle 9i
In-Reply-To: <11133710.post@talk.nabble.com>
References: <20070515110247.69c5a374@localhost.localdomain>	<46499DCE.7030004@loskot.net>	<20070515143715.4b9a48f9@localhost.localdomain>	<464C4D74.7040402@loskot.net>
	<11027157.post@talk.nabble.com>	<46697431.1000807@loskot.net>
	<11133710.post@talk.nabble.com>
Message-ID: <467249DD.70306@loskot.net>

NicoSIG wrote:
> Hi,
> 
> I tried that, but the shell send an error message:
> 
> + aclocal -I ./m4 
> ./autogen.sh: aclocal: not found
> + autoconf 
> ./autogen.sh: autoconf: not found
> 
> What are those executables ?

These are part of so called GNU autotools.

> Do I install them, or where can I find them ?

Yes, you need to install autoconf, automake and libtool packages.

> In the svn distribution, there is a file aclocal.m4.
> What is this file ?

This is a local library of autoconf/m4 macros.
You don't need to do anything with this file.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From daniel112b at gmail.com  Fri Jun 15 04:48:16 2007
From: daniel112b at gmail.com (Daniel)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Assertion in .tab driver
In-Reply-To: <46718DBB.9020403@mapgears.com>
References: <962626470706130946u489703abt55c2292436c1bf1f@mail.gmail.com>
	<46718DBB.9020403@mapgears.com>
Message-ID: <962626470706150148r33107aecx1cb7df83a6c8ea7d@mail.gmail.com>

If he got a crash it could very well  be the same problem since
isspace expects input that can be represented as an unsigned char or
EOF.

Looking at Microsofts documentation for isspace at:
http://msdn2.microsoft.com/en-us/library/y13z34da(VS.80).aspx

"When used with a debug CRT library, isspace will display a CRT assert
if passed a parameter that is not EOF or in the range of 0 through
0xFF. When used with a non-debug CRT library, isspace will use the
parameter as an index into an array, with undefined results if the
parameter is not EOF or in the range of 0 through 0xFF."

So this could very well cause a crash. I don't think that the correct
solution is to use iswspace since the rest of the code can't handle
wide chars anyway.

Some locales might even have characters >127 that should be treated as
whitespace and changing to use iswspace won't fix that.

This seems to be quite a common problem, see "C Language Gotchas"
http://www.greenend.org.uk/rjk/2001/02/cfu.html#ctypechar

I did a quick search for isspace in the GDAL source and there seems to
be some more places where isspace is passed a char instead of an
unsigned char.

Regards,
  Daniel B?ck

On 6/14/07, Daniel Morissette <dmorissette@mapgears.com> wrote:
> I've received a contributed patch recently to replace this same
> isspace() call with a call to iswspace(), claiming that isspace() could
> potentially "crash" when passed a wide char. The change is not in GDAL
> yet, it will be ported to the GDAL copy of the MITAB driver before the
> GDAL 1.5.0 release.
>
> I wonder if his "crash" might have been the same assert that you
> encountered and if yes then which fix between yours and his is better. I
> have contacted him to get his thoughts but haven't received any reply
> yet. I'd welcome your comments too.
>
> Daniel
>
>
>
> Daniel wrote:
> > Hello,
> >
> > If you build GDAL against the debug version of the c-runtime with
> > Visual Studio 2005 (/MDd) and try to open a .tab file with 8-bit ASCII
> > characters in it, the field names for instance, you get an assert in
> > isspace on row 177 in
> > http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/mitab/mitab_imapinfofile.cpp
> >
> >
> > The parameter passed to isspace is a signed char which is converted to
> > a signed int so any values >127 will become negative. It seems to work
> > fine when built against the release libraries and if you ignore the
> > assert it seems to work so this is probably nothing serious maybe
> > depending on the locale that is used. It can easily be fixed by
> > casting the char to an unsigend char before passing it to isspace:
> > isspace((unsigned char)*pszLine)
> >
> > Regards,
> >  Daniel B?ck
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>
> --
> Daniel Morissette
> http://www.mapgears.com/
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From mateusz at loskot.net  Fri Jun 15 07:36:53 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Assertion in .tab driver
In-Reply-To: <962626470706150148r33107aecx1cb7df83a6c8ea7d@mail.gmail.com>
References: <962626470706130946u489703abt55c2292436c1bf1f@mail.gmail.com>	<46718DBB.9020403@mapgears.com>
	<962626470706150148r33107aecx1cb7df83a6c8ea7d@mail.gmail.com>
Message-ID: <467279D5.70505@loskot.net>

Daniel wrote:
> If he got a crash it could very well  be the same problem since
> isspace expects input that can be represented as an unsigned char or
> EOF.
> 
> Looking at Microsofts documentation for isspace at:
> http://msdn2.microsoft.com/en-us/library/y13z34da(VS.80).aspx
> 
> "When used with a debug CRT library, isspace will display a CRT assert
> if passed a parameter that is not EOF or in the range of 0 through
> 0xFF. When used with a non-debug CRT library, isspace will use the
> parameter as an index into an array, with undefined results if the
> parameter is not EOF or in the range of 0 through 0xFF."

Daniel,

That's one of the reason why old C functions should be replaced with C++
and safe equivalents (see below).

> So this could very well cause a crash. I don't think that the correct
> solution is to use iswspace since the rest of the code can't handle
> wide chars anyway.

IMO, it is not.

Instead of old functions, it's much better to use ctype facet object
which serves information about char type characteristics for current
locale. The facet-based solution is wrapped with template function
from <locale> library:

// Test >127 character
const char c = 128;
bool space = std::isspace<char>(c, std::locale()));


After we migrate to Unicode, we can easily switch to wide characters

std::isspace<wchar_t>(...)

but that's another story.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Fri Jun 15 08:04:14 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Assertion in .tab driver
In-Reply-To: <467279D5.70505@loskot.net>
References: <962626470706130946u489703abt55c2292436c1bf1f@mail.gmail.com>	<46718DBB.9020403@mapgears.com>	<962626470706150148r33107aecx1cb7df83a6c8ea7d@mail.gmail.com>
	<467279D5.70505@loskot.net>
Message-ID: <4672803E.7080204@loskot.net>

Mateusz Loskot wrote:
> Daniel wrote:
>> If he got a crash it could very well  be the same problem since
>> isspace expects input that can be represented as an unsigned char or
>> EOF.
>>
>> Looking at Microsofts documentation for isspace at:
>> http://msdn2.microsoft.com/en-us/library/y13z34da(VS.80).aspx
>>
>> "When used with a debug CRT library, isspace will display a CRT assert
>> if passed a parameter that is not EOF or in the range of 0 through
>> 0xFF. When used with a non-debug CRT library, isspace will use the
>> parameter as an index into an array, with undefined results if the
>> parameter is not EOF or in the range of 0 through 0xFF."
> 
> Daniel,
> 
> That's one of the reason why old C functions should be replaced with C++
> and safe equivalents (see below).
> 
>> So this could very well cause a crash. I don't think that the correct
>> solution is to use iswspace since the rest of the code can't handle
>> wide chars anyway.
> 
> IMO, it is not.
> 
> Instead of old functions, it's much better to use ctype facet object
> which serves information about char type characteristics for current
> locale. The facet-based solution is wrapped with template function
> from <locale> library:
> 
> // Test >127 character
> const char c = 128;
> bool space = std::isspace<char>(c, std::locale()));

One additional note, it's not required to specify the type explicitly.
The type can be deduced in compile-time, so the solution is generic:

signed char a = 128;
unsigned char b = 0x20;

std::isspace(a, std::locale()); // returns false
std::isspace(b, std::locale()); // returns true

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Fri Jun 15 10:27:08 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] Assertion in .tab driver
In-Reply-To: <467279D5.70505@loskot.net>
References: <962626470706130946u489703abt55c2292436c1bf1f@mail.gmail.com>
	<46718DBB.9020403@mapgears.com>
	<962626470706150148r33107aecx1cb7df83a6c8ea7d@mail.gmail.com>
	<467279D5.70505@loskot.net>
Message-ID: <4672A1BC.9050309@pobox.com>

Mateusz Loskot wrote:
> That's one of the reason why old C functions should be replaced with C++
> and safe equivalents (see below).

Folks,

Well, I don't really agree with this.  I have found the C++
templated versions of stuff like isspace to be implemented somewhat
inconsistently between compilers, and when things go wrong it is
hard to work out why.  Just casting an argument in problems cases
seems fine to me.

> After we migrate to Unicode, we can easily switch to wide characters
> 
> std::isspace<wchar_t>(...)
> 
> but that's another story.

I believe when we move to unicode we are likely to use utf-8, not wchar_t,
in the bulk of the code.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri Jun 15 10:33:25 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:54 2007
Subject: [Gdal-dev] OCI support for Oracle 9i
In-Reply-To: <11133710.post@talk.nabble.com>
References: <20070515110247.69c5a374@localhost.localdomain>
	<46499DCE.7030004@loskot.net>
	<20070515143715.4b9a48f9@localhost.localdomain>
	<464C4D74.7040402@loskot.net> <11027157.post@talk.nabble.com>
	<46697431.1000807@loskot.net> <11133710.post@talk.nabble.com>
Message-ID: <4672A335.4050300@pobox.com>

NicoSIG wrote:
> Hi,
> 
> I tried that, but the shell send an error message:
> 
> + aclocal -I ./m4 
> ./autogen.sh: aclocal: not found
> + autoconf 
> ./autogen.sh: autoconf: not found
> 
> What are those executables ?
> Do I install them, or where can I find them ?
> 
> In the svn distribution, there is a file aclocal.m4.
> What is this file ?

Nico,

I updated the configure script for gdal-1.4 branch in SVN several
days ago, so hopefully grabbing a new nightly snapshot of the svn
stable branch should have the updated files.

The autogen and aclocal commands are used to generated configure and
are often not installed on non-development systems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Fri Jun 15 09:37:42 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Assertion in .tab driver
In-Reply-To: <4672A1BC.9050309@pobox.com>
References: <962626470706130946u489703abt55c2292436c1bf1f@mail.gmail.com>	<46718DBB.9020403@mapgears.com>	<962626470706150148r33107aecx1cb7df83a6c8ea7d@mail.gmail.com>	<467279D5.70505@loskot.net>
	<4672A1BC.9050309@pobox.com>
Message-ID: <46729626.8050201@loskot.net>

Frank Warmerdam wrote:
> Mateusz Loskot wrote:
>> That's one of the reason why old C functions should be replaced
>> with C++ and safe equivalents (see below).
> 
> Folks,
> 
> Well, I don't really agree with this.  I have found the C++ templated
> versions of stuff like isspace to be implemented somewhat 
> inconsistently between compilers,

Frank,

Do you remember what compilers & versions failed?

> and when things go wrong it is hard to work out why. Just casting an
> argument in problems cases seems fine to me.

OK, but then everytime (in GDAL) a character goes to the isspace() from
<cctype> it should be wrapped with cast, to avoid such problems in future.

Cheers
--
Mateusz Loskot
http://mateusz.loskot.net

From tutey at o2.pl  Fri Jun 15 13:59:39 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] wrong nodata returned in GDAL dependent software
Message-ID: <4672D38B.8050603@o2.pl>

Hi,

Although my GeoTIFF has a value range 0-255 with nodata set to 256 [1],
both QGIS 0.8.1 and OpenEV output '255' when I query the area supposed
to be nodata. Any ideas what could be the culprit? I *suspect* the
issue might be in GDAL itself, as I can reproduce the problem in two
different viewers. Example GeoTiff attached. My specs:

GDAL 1.4.1 current SVN
OpenEV from FWTools 1.3.2
QGIS 0.8.1 current SVN

[1]
Driver: GTiff/GeoTIFF
Size is 54, 41
Coordinate System is:
PROJCS["NAD27 / UTM zone 13N",
    GEOGCS["NAD27",
        DATUM["North_American_Datum_1927",
            SPHEROID["Clarke 1866",6378206.4,294.9786982138982,
                AUTHORITY["EPSG","7008"]],
            AUTHORITY["EPSG","6267"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4267"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-105],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","26713"]]
Origin = (586000.000000000000000,4931000.000000000000000)
Pixel Size = (500.000000000000000,-500.000000000000000)
Corner Coordinates:
Upper Left  (  586000.000, 4931000.000) (103d55'3.73"W, 44d31'44.94"N)
Lower Left  (  586000.000, 4910500.000) (103d55'15.97"W, 44d20'40.64"N)
Upper Right (  613000.000, 4931000.000) (103d34'40.81"W, 44d31'31.53"N)
Lower Right (  613000.000, 4910500.000) (103d34'56.89"W, 44d20'27.32"N)
Center      (  599500.000, 4920750.000) (103d44'59.34"W, 44d26'6.56"N)
Band 1 Block=54x41 Type=Byte, ColorInterp=Palette
    Computed Min/Max=0.000,255.000
  NoData Value=256

Maciek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.tif.bz2
Type: application/x-bzip
Size: 6934 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070615/e34db1a7/test.tif.bin
From Chris.Barker at noaa.gov  Fri Jun 15 14:29:56 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] wrong nodata returned in GDAL dependent software
In-Reply-To: <4672D38B.8050603@o2.pl>
References: <4672D38B.8050603@o2.pl>
Message-ID: <4672DAA4.20805@noaa.gov>



Maciej Sieczka wrote:
 > Hi,
 >
 > Although my GeoTIFF has a value range 0-255 with nodata set to 256 [1],


If it's 8-bit, the largest value possible is 255 -- that may be your 
problem.

-CHB



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From warmerdam at pobox.com  Fri Jun 15 16:03:59 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] wrong nodata returned in GDAL dependent software
In-Reply-To: <4672D38B.8050603@o2.pl>
References: <4672D38B.8050603@o2.pl>
Message-ID: <4672F0AF.3060104@pobox.com>

Maciej Sieczka wrote:
> Hi,
> 
> Although my GeoTIFF has a value range 0-255 with nodata set to 256 [1],
> both QGIS 0.8.1 and OpenEV output '255' when I query the area supposed
> to be nodata. Any ideas what could be the culprit? I *suspect* the
> issue might be in GDAL itself, as I can reproduce the problem in two
> different viewers. Example GeoTiff attached. My specs:

Maciej,

Your gdalinfo report listed the file as data type Byte.  The largest value
that can be represented in a Byte is 255.  So there is no way to read back
values of 256 from such a file.

If the file was written with GDAL from a buffer bigger than Byte but
to a file with data type Byte, then GDAL would clamp a value of 256 to
the maximum representable value, 255, while writing.  Perhaps this happened?

In any event, it is not meaningful to have a nodata value of 256 for a byte
data file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ionut at berkeley.edu  Fri Jun 15 15:07:55 2007
From: ionut at berkeley.edu (Ionut Iordache)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Surfer binary grids support
Message-ID: <4672E38B.10907@berkeley.edu>

Greetings,
I'm trying to use GDAL under Solaris 8 to convert Surfer 8 binary grids 
(or even ASCII) to ArcInfo floating point grids (.hdr and .flt files).
I don't know whether the Surfer 7 format (GS7BG, advertised as supported 
for reading in GDAL) is the same as what Surfer 8 outputs, but I wanted 
give it a shot.
My problem is that I can't find support for any of the Surfer grids 
formats in the downloaded version of the GDAL 1.4.1.0 source code.
The directory "gdal/frmts/gsg" is simply missing from the source tree 
and after compiling and installing from source, "--formats" doesn't list 
any Surfer formats as being supported.

So, my question is two-fold:
- what version of the GDAL source code I need to download in order to 
get the Surfer driver code, and
- does anyone know if my Surfer 8 binary grids would be readable by the 
GS7BG driver ?


Thanks much,
    Ionut Iordache

-- 
_______________________________________________

Dorel Ionut Iordache <diordache@berkeley.edu>
National Center for Airborne Laser Mapping and
Department of Earth & Planetary Science,
University of California Berkeley

Tel: (510) 642-3991 Fax: (510) 643-9980
Address: 371 McCone Hall, Berkeley, CA 94720
http://ncalm.berkeley.edu
http://eps.berkeley.edu


From warmerdam at pobox.com  Fri Jun 15 16:50:14 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Surfer binary grids support
In-Reply-To: <4672E38B.10907@berkeley.edu>
References: <4672E38B.10907@berkeley.edu>
Message-ID: <4672FB86.9030602@pobox.com>

Ionut Iordache wrote:
> Greetings,
> I'm trying to use GDAL under Solaris 8 to convert Surfer 8 binary grids 
> (or even ASCII) to ArcInfo floating point grids (.hdr and .flt files).
> I don't know whether the Surfer 7 format (GS7BG, advertised as supported 
> for reading in GDAL) is the same as what Surfer 8 outputs, but I wanted 
> give it a shot.
> My problem is that I can't find support for any of the Surfer grids 
> formats in the downloaded version of the GDAL 1.4.1.0 source code.
> The directory "gdal/frmts/gsg" is simply missing from the source tree 
> and after compiling and installing from source, "--formats" doesn't list 
> any Surfer formats as being supported.
> 
> So, my question is two-fold:
> - what version of the GDAL source code I need to download in order to 
> get the Surfer driver code, and
> - does anyone know if my Surfer 8 binary grids would be readable by the 
> GS7BG driver ?

Ionut,

I'm not too knowledgable about this driver, but I believe it is only
in GDAL 1.5 (aka the development version).

You can test them quickly using the FWTools builds for linux or windows
which are built from the development trunk.

You can also grab snapshots of the development source (trunk) from:

   http://download.osgeo.org/gdal/daily

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ionut at berkeley.edu  Fri Jun 15 15:31:48 2007
From: ionut at berkeley.edu (Ionut Iordache)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Surfer binary grids support
In-Reply-To: <4672FB86.9030602@pobox.com>
References: <4672E38B.10907@berkeley.edu> <4672FB86.9030602@pobox.com>
Message-ID: <4672E924.7060300@berkeley.edu>

Frank,
Thank you for the very quick and informative response!
I'll give GDAL 1.5 under FWTools a try.

Best regards,
    Ionut Iordache

Frank Warmerdam wrote:
> Ionut Iordache wrote:
>> Greetings,
>> I'm trying to use GDAL under Solaris 8 to convert Surfer 8 binary 
>> grids (or even ASCII) to ArcInfo floating point grids (.hdr and .flt 
>> files).
>> I don't know whether the Surfer 7 format (GS7BG, advertised as 
>> supported for reading in GDAL) is the same as what Surfer 8 outputs, 
>> but I wanted give it a shot.
>> My problem is that I can't find support for any of the Surfer grids 
>> formats in the downloaded version of the GDAL 1.4.1.0 source code.
>> The directory "gdal/frmts/gsg" is simply missing from the source tree 
>> and after compiling and installing from source, "--formats" doesn't 
>> list any Surfer formats as being supported.
>>
>> So, my question is two-fold:
>> - what version of the GDAL source code I need to download in order to 
>> get the Surfer driver code, and
>> - does anyone know if my Surfer 8 binary grids would be readable by 
>> the GS7BG driver ?
>
> Ionut,
>
> I'm not too knowledgable about this driver, but I believe it is only
> in GDAL 1.5 (aka the development version).
>
> You can test them quickly using the FWTools builds for linux or windows
> which are built from the development trunk.
>
> You can also grab snapshots of the development source (trunk) from:
>
>   http://download.osgeo.org/gdal/daily
>
> Best regards,


-- 
_______________________________________________

Dorel Ionut Iordache <diordache@berkeley.edu>
National Center for Airborne Laser Mapping and
Department of Earth & Planetary Science,
University of California Berkeley

Tel: (510) 642-3991 Fax: (510) 643-9980
Address: 371 McCone Hall, Berkeley, CA 94720
http://ncalm.berkeley.edu
http://eps.berkeley.edu


From jluis at ualg.pt  Fri Jun 15 16:01:21 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Surfer binary grids support
In-Reply-To: <4672E38B.10907@berkeley.edu>
References: <4672E38B.10907@berkeley.edu>
Message-ID: <4672F011.1050505@ualg.pt>

Ionut Iordache wrote:
> Greetings,
> I'm trying to use GDAL under Solaris 8 to convert Surfer 8 binary 
> grids (or even ASCII) to ArcInfo floating point grids (.hdr and .flt 
> files).
> I don't know whether the Surfer 7 format (GS7BG, advertised as 
> supported for reading in GDAL) is the same as what Surfer 8 outputs, 
> but I wanted give it a shot.
> My problem is that I can't find support for any of the Surfer grids 
> formats in the downloaded version of the GDAL 1.4.1.0 source code.
> The directory "gdal/frmts/gsg" is simply missing from the source tree 
> and after compiling and installing from source, "--formats" doesn't 
> list any Surfer formats as being supported.
>
> So, my question is two-fold:
> - what version of the GDAL source code I need to download in order to 
> get the Surfer driver code, and
> - does anyone know if my Surfer 8 binary grids would be readable by 
> the GS7BG driver ?
>

Ionut,
I don't know the answer to your GDAL specific questions but let me help 
clarify some issues

1. There is no such format as Surfer 8. What exist is the old binary 
(floats) and a new (since Surfer 7) one made with doubles
and potentially complicated when it contain breaklines.

2. Surfer is a Windows only software and its formats use native binaries 
which means that you'll risk to have a problem
of endianess with Solaris.

3. If you want to try it, GMT recognizes Surfer 6 and a simplified form 
(eg, no breaklines) of Surfer 7 grids (thins one as read only).

Joaquim Luis

From tutey at o2.pl  Fri Jun 15 16:12:33 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] wrong nodata returned in GDAL dependent software
In-Reply-To: <4672F0AF.3060104@pobox.com>
References: <4672D38B.8050603@o2.pl> <4672F0AF.3060104@pobox.com>
Message-ID: <4672F2B1.104@o2.pl>

Frank Warmerdam wrote:
> Maciej Sieczka wrote:

>> Although my GeoTIFF has a value range 0-255 with nodata set to 256 [1],
>> both QGIS 0.8.1 and OpenEV output '255' when I query the area supposed
>> to be nodata. Any ideas what could be the culprit? I *suspect* the
>> issue might be in GDAL itself, as I can reproduce the problem in two
>> different viewers. Example GeoTiff attached. My specs:

> Your gdalinfo report listed the file as data type Byte.  The largest value
> that can be represented in a Byte is 255.  So there is no way to read back
> values of 256 from such a file.
> 
> If the file was written with GDAL from a buffer bigger than Byte but
> to a file with data type Byte, then GDAL would clamp a value of 256 to
> the maximum representable value, 255, while writing.  Perhaps this
> happened?
> 
> In any event, it is not meaningful to have a nodata value of 256 for a byte
> data file.

That's what r.out.gdal.sh did, ie. gdal_translate. My raster in GRASS
was 0-255 and had null. "r.out.gdal.sh input=test format=GTiff
type=Byte output=test.tif" created a 0-255 GeoTIFF with nodata set to 256.

So my error was that I should specify at least type=Int16 instead of
Byte to cover the whole range; or Uint16 to preserve the colortable too.

Propably r.out.gdal.sh should yield an appropriate warning for such
cases. I'll try to implement filters for r.out.gdal.sh to inform the
user that the selected file data type can't cover the whole input data
range; if time allows over the weekend.

So all my fault/lack of knowledge. Yet there is something else fishy -
even when the input GRASS raster has no null, still gdal_translate
forces a nodata, eg.:

$ r.mapcalc 'test=rand(0,1024)'
$ r.info -r test
min=0
max=1023

$ r.out.gdal.sh input=test format=GTiff type=UInt16 output=test.tif

$ gdalinfo -mm test.tif | grep 'Computed\|NoData'
    Computed Min/Max=0.000,1023.000
  NoData Value=65535


Or this one:

$ r.mapcalc 'test=rand(0,256)'
$ r.info -r test
min=0
max=255

$ gdal_translate /gdata/spearfish60/sieczka/cellhd/test test.tif

$ gdalinfo -mm test.tif | grep 'Computed\|NoData'
    Computed Min/Max=0.000,255.000
  NoData Value=256

Is this OK? In either case I don't have any null in my input 'test'
GRASS raster this time. Why is GDAL forcing it?

Maciek

From schut at sarvision.nl  Mon Jun 18 04:17:05 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:50:55 2007
Subject: [Fwd: [Gdal-dev] gdal_array.SaveArray problem]
Message-ID: <46763F81.8020909@sarvision.nl>

Folks,

did nobody notice this post of mine of 2 weeks ago (see below), or does
nobody know an answer?
I hope someone can at least shed a little ray of light on it... I prefer
to post problems to the ml first, before filing a bug, because of the
larger audience and the simple fact that it might just be my fault
instead of a bug. I'll file a bug anyway if I get no response...

Vincent.

-------- Original Message --------
Subject: 	[Gdal-dev] gdal_array.SaveArray problem
Date: 	Tue, 05 Jun 2007 12:14:13 +0200
From: 	Vincent Schut <schut@sarvision.nl>
Organization: 	sarvision.nl
To: 	gdal-dev@lists.maptools.org



Hi folks,

the ngpython gdal_array.SaveArray method does something picky with my
arrays... When I try to access the array I have saved, I get a segfault.
When saving a copy of the array, everything goes fine.

This code segfaults:

#!/usr/bin/python

import gdal, gdal_array, numpy

a = numpy.arange(3*100*150, dtype=numpy.uint16).reshape((3, 100, 150))
gdal_array.SaveArray(a, "gdalSaveArrayTest.tif")
print a[0,0,0] # segfaults here.

And this code does not segfault:

#!/usr/bin/python

import gdal, gdal_array, numpy

a = numpy.arange(3*100*150, dtype=numpy.uint16).reshape((3, 100, 150))
gdal_array.SaveArray(a.copy(), "gdalSaveArrayTest.tif")
print a[0,0,0] # OK


Apparently it has something to do with refcounts; try this in a python
interpreter (a is a numpy array):
>>> gdal_array.SaveArray(a, "test.tif")
<gdal.Dataset; proxy of <Swig Object of type 'GDALDatasetShadow *' at
0xb57fa0> >
>>> a
<refcnt -4294967291 at 0x9648c0>


This is with gdal from recent svn, and numpy too.
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Mon Jun 18 10:04:08 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] GDAL 1.4.2 Release Lead Up
Message-ID: <467690D8.2050900@pobox.com>

Folks,

I would like to have a 1.4.2 GDAL bug fix release this week.  Tentatively
my plan is to produce an beta by wednesday evening.  Assuming there aren't
too many issues, I will aim to produce an RC1 by on the weekend which the
PSC can vote to accept as a formal release Monday and Tuesday.

Does this plan sound ok?  I'm hoping folks can make a push to clean up 1.4.2
bugs between now and Wednesday evening.

I have already created 1.4.3 release milestone, which I anticipate being
the last 1.4.x release.  I'll likely migrate a few bugs on to 1.4.3 that can't
practically be handled for 1.4.2.  The bugs currently targetted to the 1.4.2
release are:

http://trac.osgeo.org/gdal/query?status=new&status=assigned&status=reopened&milestone=1.4.2

Currently myself, Mateusz, Andrey, and Tamas has release bugs assigned.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Mon Jun 18 10:34:44 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] GDAL 1.4.2 Release Lead Up
In-Reply-To: <467690D8.2050900@pobox.com>
References: <467690D8.2050900@pobox.com>
Message-ID: <46769804.30801@loskot.net>

Frank Warmerdam wrote:
> Folks,
> 
> I would like to have a 1.4.2 GDAL bug fix release this week.
> Tentatively my plan is to produce an beta by wednesday evening.
> Assuming there aren't too many issues, I will aim to produce an RC1
> by on the weekend which the PSC can vote to accept as a formal
> release Monday and Tuesday.
> 
> Does this plan sound ok?

Frank,

Yes, it's OK for me.

> I'm hoping folks can make a push to clean
> up 1.4.2 bugs between now and Wednesday evening.

I suppose I'm most in delay comparing to others, so you're waiting for
my bugs to get cleaned. I'm working on them now and hopefully they will
be fixed in time.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From szekerest at gmail.com  Mon Jun 18 10:55:14 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] GDAL 1.4.2 Release Lead Up
In-Reply-To: <467690D8.2050900@pobox.com>
References: <467690D8.2050900@pobox.com>
Message-ID: <f3b73b7d0706180755j77e09399g8b07eea78993facf@mail.gmail.com>

OK, I've already fixed that one from my side.

Best regards,

Tamas


2007/6/18, Frank Warmerdam <warmerdam@pobox.com>:
> Folks,
>
> I would like to have a 1.4.2 GDAL bug fix release this week.  Tentatively
> my plan is to produce an beta by wednesday evening.  Assuming there aren't
> too many issues, I will aim to produce an RC1 by on the weekend which the
> PSC can vote to accept as a formal release Monday and Tuesday.
>
> Does this plan sound ok?  I'm hoping folks can make a push to clean up 1.4.2
> bugs between now and Wednesday evening.
>
> I have already created 1.4.3 release milestone, which I anticipate being
> the last 1.4.x release.  I'll likely migrate a few bugs on to 1.4.3 that can't
> practically be handled for 1.4.2.  The bugs currently targetted to the 1.4.2
> release are:
>
> http://trac.osgeo.org/gdal/query?status=new&status=assigned&status=reopened&milestone=1.4.2
>
> Currently myself, Mateusz, Andrey, and Tamas has release bugs assigned.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From jbeverage at prologic-inc.com  Tue Jun 19 11:21:22 2007
From: jbeverage at prologic-inc.com (Jason Beverage)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] DataSet.GCPs Method in C# Bindings
Message-ID: <2DBB9F887DAA394FA75D98474EA5730D0399CEF5@vader.prologic-inc.com>

Hi all,

It seems like the signature for DataSet.GetGCPs is incorrect in the C#
bindings.  It is currently:
void DataSet.GetGCPs(SWIGTYPE_p_int nGCPs, SWIGTYPE_p_p_GDAL_GCP pGCPs)

It seems like it should be:
GCP[] Dataset.GetGCPs();

Should I open a ticket?

Thanks,

Jason


From szekerest at gmail.com  Tue Jun 19 12:28:58 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] DataSet.GCPs Method in C# Bindings
In-Reply-To: <2DBB9F887DAA394FA75D98474EA5730D0399CEF5@vader.prologic-inc.com>
References: <2DBB9F887DAA394FA75D98474EA5730D0399CEF5@vader.prologic-inc.com>
Message-ID: <f3b73b7d0706190928i4e9f7fga050183f6ec2e16b@mail.gmail.com>

2007/6/19, Jason Beverage <jbeverage@prologic-inc.com>:
> Hi all,
>
> It seems like the signature for DataSet.GetGCPs is incorrect in the C#
> bindings.  It is currently:
> void DataSet.GetGCPs(SWIGTYPE_p_int nGCPs, SWIGTYPE_p_p_GDAL_GCP pGCPs)
>
> It seems like it should be:
> GCP[] Dataset.GetGCPs();
>
> Should I open a ticket?
>
> Thanks,
>
> Jason
>

Yes please, and assign the ticket to the CSharpBindings component

Best regards,

Tamas Szekeres

From nico at langhirano.it  Wed Jun 20 09:07:40 2007
From: nico at langhirano.it (Nico Alberti)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Assigning projection in php_ogr
Message-ID: <c52191e30706200607y111b3379o94bfbfe33c303462@mail.gmail.com>

Hi all,

I need to do a geometry transformation using php_ogr.

Just like I do in my Python programs, I would use the
OGR_G_TransformTo ($Geometry, $SpatialReference) function. For this
reason I should use something like the
OSRImportFromProj4(), to apply the desidered starting and ending
spatial reference, but I cannot fing the corresponding function in the
php extension.

Can anybody give me a hint? I am stuck.

Thank you in advance and sorry for my bad English.
-- 
Ciao
Nico

From warmerdam at pobox.com  Wed Jun 20 10:43:45 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Assigning projection in php_ogr
In-Reply-To: <c52191e30706200607y111b3379o94bfbfe33c303462@mail.gmail.com>
References: <c52191e30706200607y111b3379o94bfbfe33c303462@mail.gmail.com>
Message-ID: <46793D21.1010305@pobox.com>

Nico Alberti wrote:
> Hi all,
> 
> I need to do a geometry transformation using php_ogr.
> 
> Just like I do in my Python programs, I would use the
> OGR_G_TransformTo ($Geometry, $SpatialReference) function. For this
> reason I should use something like the
> OSRImportFromProj4(), to apply the desidered starting and ending
> spatial reference, but I cannot fing the corresponding function in the
> php extension.
> 
> Can anybody give me a hint? I am stuck.
> 
> Thank you in advance and sorry for my bad English.

Nico,

The PHP OGR bindings are maintained seperately from the rest of GDAL/OGR
and so it is not always easy to get answers about them.  BTW, where did
you get the php_ogr stuff?  We should setup a little topic in the wiki
about them.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jmckenna at dmsolutions.ca  Wed Jun 20 10:53:46 2007
From: jmckenna at dmsolutions.ca (Jeff McKenna)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Assigning projection in php_ogr
In-Reply-To: <46793D21.1010305@pobox.com>
References: <c52191e30706200607y111b3379o94bfbfe33c303462@mail.gmail.com>
	<46793D21.1010305@pobox.com>
Message-ID: <46793F7A.7020508@dmsolutions.ca>

I do include the php_ogr.dll for each MS4W release...might be good to 
note in that wiki.

jeff



Frank Warmerdam wrote:
> Nico,
> 
> The PHP OGR bindings are maintained seperately from the rest of GDAL/OGR
> and so it is not always easy to get answers about them.  BTW, where did
> you get the php_ogr stuff?  We should setup a little topic in the wiki
> about them.
> 
> Best regards,


-- 
Jeff McKenna
DM Solutions Group Inc.
http://www.dmsolutions.ca

From nico at langhirano.it  Wed Jun 20 10:54:00 2007
From: nico at langhirano.it (Nico Alberti)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Assigning projection in php_ogr
In-Reply-To: <46793D21.1010305@pobox.com>
References: <c52191e30706200607y111b3379o94bfbfe33c303462@mail.gmail.com>
	<46793D21.1010305@pobox.com>
Message-ID: <c52191e30706200754o6553bebby88c77f06950ef1a1@mail.gmail.com>

2007/6/20, Frank Warmerdam <warmerdam@pobox.com>:

> Nico,
>
> The PHP OGR bindings are maintained seperately from the rest of GDAL/OGR
> and so it is not always easy to get answers about them.  BTW, where did
> you get the php_ogr stuff?  We should setup a little topic in the wiki
> about them.

I found it on the ms4w package (I am working on a win32 environment),
from http://maptools.org. (Actually I asked the people at
Remotesensing, as suggested on
http://dl.maptools.org/dl/php_ogr/php_ogr_documentation.html).

However, looking inside the dll, it seems that several key functions
are missing (like the ability to import a spatial reference using the
PROJ4 syntax), but I hope I just missed them.
-- 
Ciao
Nico

From nico at langhirano.it  Wed Jun 20 11:27:54 2007
From: nico at langhirano.it (Nico Alberti)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Assigning projection in php_ogr
In-Reply-To: <46793F7A.7020508@dmsolutions.ca>
References: <c52191e30706200607y111b3379o94bfbfe33c303462@mail.gmail.com>
	<46793D21.1010305@pobox.com> <46793F7A.7020508@dmsolutions.ca>
Message-ID: <c52191e30706200827r76b6feara35ca4a4ce484cfe@mail.gmail.com>

2007/6/20, Jeff McKenna <jmckenna@dmsolutions.ca>:
> I do include the php_ogr.dll for each MS4W release...might be good to
> note in that wiki.

Excuse me if I cc: directly to you, but, as the php_ogr.dll mantainer,
you can probably help me about the topic of this thread: is there a
way to explicitly initialize a spatial reference (a la
OGRSpatialReference::importFromProj4) in php_ogr? I need it to
translate the coordinates from meters to lat/long, but perhaps there
are other ways.

Thank you for the library you provide us.
-- 
Ciao
Nico

From warmerdam at pobox.com  Wed Jun 20 11:34:10 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Assigning projection in php_ogr
In-Reply-To: <46793F7A.7020508@dmsolutions.ca>
References: <c52191e30706200607y111b3379o94bfbfe33c303462@mail.gmail.com>
	<46793D21.1010305@pobox.com> <46793F7A.7020508@dmsolutions.ca>
Message-ID: <467948F2.5010807@pobox.com>

Jeff McKenna wrote:
> I do include the php_ogr.dll for each MS4W release...might be good to 
> note in that wiki.

Done ... I have created:

   http://trac.osgeo.org/gdal/wiki/GdalOgrInPhp

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dmorissette at mapgears.com  Thu Jun 21 15:13:01 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Assertion in .tab driver
In-Reply-To: <962626470706150148r33107aecx1cb7df83a6c8ea7d@mail.gmail.com>
References: <962626470706130946u489703abt55c2292436c1bf1f@mail.gmail.com>	<46718DBB.9020403@mapgears.com>
	<962626470706150148r33107aecx1cb7df83a6c8ea7d@mail.gmail.com>
Message-ID: <467ACDBD.2040007@mapgears.com>

Thanks for providing those details Daniel, that helped a lot. FYI a 
ticket has been filed and this is now fixed in in the MITAB driver for 
both the trunk and 1.4 branch in SVN:

https://trac.osgeo.org/gdal/ticket/1678

I have also created ticket 1681 about fixing all isspace() calls in GDAL:
https://trac.osgeo.org/gdal/ticket/1681

Daniel

Daniel wrote:
> If he got a crash it could very well  be the same problem since
> isspace expects input that can be represented as an unsigned char or
> EOF.
> 
> Looking at Microsofts documentation for isspace at:
> http://msdn2.microsoft.com/en-us/library/y13z34da(VS.80).aspx
> 
> "When used with a debug CRT library, isspace will display a CRT assert
> if passed a parameter that is not EOF or in the range of 0 through
> 0xFF. When used with a non-debug CRT library, isspace will use the
> parameter as an index into an array, with undefined results if the
> parameter is not EOF or in the range of 0 through 0xFF."
> 
> So this could very well cause a crash. I don't think that the correct
> solution is to use iswspace since the rest of the code can't handle
> wide chars anyway.
> 
> Some locales might even have characters >127 that should be treated as
> whitespace and changing to use iswspace won't fix that.
> 
> This seems to be quite a common problem, see "C Language Gotchas"
> http://www.greenend.org.uk/rjk/2001/02/cfu.html#ctypechar
> 
> I did a quick search for isspace in the GDAL source and there seems to
> be some more places where isspace is passed a char instead of an
> unsigned char.
> 
> Regards,
>  Daniel B?ck
> 
> On 6/14/07, Daniel Morissette <dmorissette@mapgears.com> wrote:
>> I've received a contributed patch recently to replace this same
>> isspace() call with a call to iswspace(), claiming that isspace() could
>> potentially "crash" when passed a wide char. The change is not in GDAL
>> yet, it will be ported to the GDAL copy of the MITAB driver before the
>> GDAL 1.5.0 release.
>>
>> I wonder if his "crash" might have been the same assert that you
>> encountered and if yes then which fix between yours and his is better. I
>> have contacted him to get his thoughts but haven't received any reply
>> yet. I'd welcome your comments too.
>>
>> Daniel
>>
>>
>>
>> Daniel wrote:
>> > Hello,
>> >
>> > If you build GDAL against the debug version of the c-runtime with
>> > Visual Studio 2005 (/MDd) and try to open a .tab file with 8-bit ASCII
>> > characters in it, the field names for instance, you get an assert in
>> > isspace on row 177 in
>> > 
>> http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/mitab/mitab_imapinfofile.cpp 
>>
>> >
>> >
>> > The parameter passed to isspace is a signed char which is converted to
>> > a signed int so any values >127 will become negative. It seems to work
>> > fine when built against the release libraries and if you ignore the
>> > assert it seems to work so this is probably nothing serious maybe
>> > depending on the locale that is used. It can easily be fixed by
>> > casting the char to an unsigend char before passing it to isspace:
>> > isspace((unsigned char)*pszLine)
>> >
>> > Regards,
>> >  Daniel B?ck
>> >
>> > _______________________________________________
>> > Gdal-dev mailing list
>> > Gdal-dev@lists.maptools.org
>> > http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
>>
>> -- 
>> Daniel Morissette
>> http://www.mapgears.com/
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Daniel Morissette
http://www.mapgears.com/

From alison_luo2001 at yahoo.com  Fri Jun 22 02:02:10 2007
From: alison_luo2001 at yahoo.com (Alison Luo)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] How to read multiple segments in NITF image
In-Reply-To: <467168C7.3040200@pobox.com>
Message-ID: <817117.16847.qm@web50511.mail.re2.yahoo.com>

I have a sample NITF image file with 4 image segments.
I believe they are four portions of a large image. How
do I read them into an image buffer and display them
all together as one large image? Any GDAL support for
this?

My sample file ns3361c.nsf is from 
http://ismc.nga.mil/ntb/baseline/software/TESTFILE/Nitfv2_1/scen_2_1.html

Thanks,
Alison


       
____________________________________________________________________________________
Choose the right car based on your needs.  Check out Yahoo! Autos new Car Finder tool.
http://autos.yahoo.com/carfinder/

From roth.luke at gmail.com  Fri Jun 22 10:48:56 2007
From: roth.luke at gmail.com (Luke Roth)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Problem reading projection information consistently
Message-ID: <20ecc0f10706220748h3d309db4j6d76763484086f05@mail.gmail.com>

I'm having an issue reading the projection information from an Ikonos
image.  I know it to be UTM zone 17, and when I open it in OpenEV
(from FWTools 1.3.1) I get the WKT

PROJCS["WGS 84 / UTM zone 17N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-81],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1]]

This is what I would expect, but when I use gdalinfo or the API
command GetProjectionRef() (using GDAL from the same version of
FWTools) I get:

PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-81],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32617"]]

Why is there a difference?  I'm trying to write a script to convert a
large number of images and shapefiles to a common projection, but this
is causing a problem.  Any ideas?  If I should be sending this to the
FWTools mailing list instead, let me know.

Thanks,

Luke Roth

From Shawn.Gong at drdc-rddc.gc.ca  Fri Jun 22 11:35:52 2007
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] RPC coefficients for NITF and GeoTiff
Message-ID: <2E58C246F17003499C141D334794D0490276833C@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Hi list,
Are RPC coefficients the same for NITF and GeoTiff formats? i.e. Can I
use gdalinfo to capture the RPC coefficients and then create a rpc.txt
file to orthorectify Geotiff image?
My ortho program won't read NITF metadata so I am trying GTIFF route.

I have two sets of INOKOS images on the same location, GTIFF WGS84 and
NITF NAD83.  Their RPCs are very different.
I am not sure if that is due to different datum.

Thanks,
Shawn

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070622/ede2f8ef/attachment.html
From senorsaru at yahoo.com  Fri Jun 22 17:48:00 2007
From: senorsaru at yahoo.com (Alex Quinn)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] How can I translate a DBF (of a shapefile) into a
	non-Roman language?
Message-ID: <148142.21657.qm@web63905.mail.re1.yahoo.com>

Hello,

We're trying to make a online world map that is
multilingual.  Ultimately, you'll be able to select a
language and have all the country names change to any
of 7 languages, specifically Arabic, Chinese, English,
French, Portugese, Russian, and Spanish.  For the time
being, we're using a shapefile.  Some other format
would be fine, as long as MapServer and either ArcMap
or QuantumGIS can read it.

Is there any way I can use GDAL to programmatically
add the translations to the DBF file?

Is there some other tool that would be better?

Any help would be much appreciated.

Thanks,
Alex

http://www.worlddigitallibrary.org/project/english/about/


      ____________________________________________________________________________________
Shape Yahoo! in your own image.  Join our Network Research Panel today!   http://surveylink.yahoo.com/gmrs/yahoo_panel_invite.asp?a=7 



From ari.jolma at tkk.fi  Sat Jun 23 05:25:41 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] CPLRealloc(): Out of memory allocating 28 bytes.
Message-ID: <467CE715.4060303@tkk.fi>

I've got a strange problem with the latest svn version using it in 
MSYS+MinGW+Windows environment. CPLRealloc fails allocating very small 
amount of memory after some successful attempts. This problem is not in 
1.4.1 release.

It is quite difficult to debug since the problem does not exist if I run 
programs that use gdal.dll in gdb or dependencywalker.

Any ideas?

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From ari.jolma at tkk.fi  Sat Jun 23 16:21:32 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] CPLRealloc(): Out of memory allocating 28 bytes.
In-Reply-To: <467CE715.4060303@tkk.fi>
References: <467CE715.4060303@tkk.fi>
Message-ID: <467D80CC.1040002@tkk.fi>

Doh!

I just needed to

make clean; ./configure; make; make install

Ari

Ari Jolma kirjoitti:
> I've got a strange problem with the latest svn version using it in 
> MSYS+MinGW+Windows environment. CPLRealloc fails allocating very small 
> amount of memory after some successful attempts. This problem is not 
> in 1.4.1 release.
>
> It is quite difficult to debug since the problem does not exist if I 
> run programs that use gdal.dll in gdb or dependencywalker.
>
> Any ideas?
>
> Ari
>


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From rayg at daylongraphics.com  Sun Jun 24 13:32:51 2007
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Does GeoTIFF support LocalCS?
In-Reply-To: <467D80CC.1040002@tkk.fi>
References: <467CE715.4060303@tkk.fi> <467D80CC.1040002@tkk.fi>
Message-ID: <467EAAC3.3060905@daylongraphics.com>

Has anyone been able to use local CS with GeoTIFF? The best I can get 
GDAL to do is write an associated .tfw file out okay, but when reading 
back in, GetProjectionRef() in 1.4.1 returns

   GEOGCS["unnamed", DATUM["unknown",
    SPHEROID["unretrievable... UNITS["degrees"...

Since the units (in my case, meters) are replaced with degrees, 
intepreting a "null" geogcs as localcs doesn't help.

Does the GeoTIFF format support localcs? If so, I'd prefer to mod the 
driver to actually handle it.

Ray


From j.obi at troja.net  Sun Jun 24 15:50:44 2007
From: j.obi at troja.net (Jens Oberender)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] GSoC KML support (read and tile images)
Message-ID: <467ECB14.9050000@troja.net>

Hello

I'm doing the KML read support for GDAL as Google Summer of Code 
projects and wanted to give my construction draft for discussion.

http://trac.osgeo.org/gdal/wiki/SoCKMLRead
http://wiki.osgeo.org/index.php/GSoC_KML_Read_-_Construction_Draft

Klokan Petr P?idal is also doing a project for GSoC that works with KML: 
GDAL2Tiles
Page: http://wiki.osgeo.org/index.php/GDAL2Tiles_SoC_2007

Perhaps the GDAL2Tiles can be expressed with the new ImagePyramid tag, 
introduced in KML 2.2 (still beta).

In my opinion we can work together on the KML class and help each other 
that way.

I'm looking forward to your comments, criticism and suggestions.

Bye,
	Jens

PS: I'm on IRC with the nick D|dge

From warmerdam at pobox.com  Sun Jun 24 18:51:11 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Does GeoTIFF support LocalCS?
In-Reply-To: <467EAAC3.3060905@daylongraphics.com>
References: <467CE715.4060303@tkk.fi> <467D80CC.1040002@tkk.fi>
	<467EAAC3.3060905@daylongraphics.com>
Message-ID: <467EF55F.3060500@pobox.com>

Ray Gardener wrote:
> Has anyone been able to use local CS with GeoTIFF? The best I can get 
> GDAL to do is write an associated .tfw file out okay, but when reading 
> back in, GetProjectionRef() in 1.4.1 returns
> 
>   GEOGCS["unnamed", DATUM["unknown",
>    SPHEROID["unretrievable... UNITS["degrees"...
> 
> Since the units (in my case, meters) are replaced with degrees, 
> intepreting a "null" geogcs as localcs doesn't help.
> 
> Does the GeoTIFF format support localcs? If so, I'd prefer to mod the 
> driver to actually handle it.

Ray,

I suspect you are correct about LOCALCS support in geotiff.  My intention
is that LOCAL_CS should translate to geotiff as a geotransform
matrix and linear units specified in the file.  If that isn't happening
it is a bug and I'd appreciate your filing the specifics of what you see.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From kevsemola at gmail.com  Mon Jun 25 02:14:22 2007
From: kevsemola at gmail.com (kevser sonmez)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] s 57 data reader in java
In-Reply-To: <7337d4f60706200102l150a93fbt79977d7fd2de8fe1@mail.gmail.com>
References: <7337d4f60706200102l150a93fbt79977d7fd2de8fe1@mail.gmail.com>
Message-ID: <7337d4f60706242314l22e6c4b3l6a748183c3e382b3@mail.gmail.com>

hi there,

I want to ask whether any of you know a java library to read the s-57 data?
Just like the ogr which is a C++ API.
Or is it possible to write the user interface in java and use the ogr as the
data reader, if so how?

Any ideas will be greatly appreciated
Thanks a lot in advance
:)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070625/bf098536/attachment.html
From kevsemola at gmail.com  Mon Jun 25 02:18:01 2007
From: kevsemola at gmail.com (kevser sonmez)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] gis concepts
Message-ID: <7337d4f60706242318q72810147mceee78c6b2f0e59f@mail.gmail.com>

Hi there,
I am almost new to the GIS topics, I want to ask whether there is a good
concepts tutorial/site (there are a good number of GIS sites as far as I
looked, but I couldnt figured out a somewhat beginner or elementary ones),
that I will increase and complete my knowledge of GIS.

Get your works easy ;)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070625/5bef6471/attachment.html
From aaime at openplans.org  Mon Jun 25 02:33:37 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] s 57 data reader in java
In-Reply-To: <7337d4f60706242314l22e6c4b3l6a748183c3e382b3@mail.gmail.com>
References: <7337d4f60706200102l150a93fbt79977d7fd2de8fe1@mail.gmail.com>
	<7337d4f60706242314l22e6c4b3l6a748183c3e382b3@mail.gmail.com>
Message-ID: <467F61C1.9000200@openplans.org>

kevser sonmez ha scritto:
> 
> hi there,
> 
> I want to ask whether any of you know a java library to read the s-57 
> data? Just like the ogr which is a C++ API.
> Or is it possible to write the user interface in java and use the ogr as 
> the data reader, if so how?

Have a look at the OGR java bindings, they should give you
what you're asking for. There is also a (very experimental) module
in Geotools that uses the OGR java bindings to expose OGR as a datastore 
(it's there sitting on gt2 trunk).

Cheers
Andrea

From mateusz at loskot.net  Mon Jun 25 02:36:09 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] gis concepts
In-Reply-To: <7337d4f60706242318q72810147mceee78c6b2f0e59f@mail.gmail.com>
References: <7337d4f60706242318q72810147mceee78c6b2f0e59f@mail.gmail.com>
Message-ID: <467F6259.6000203@loskot.net>

kevser sonmez wrote:
> Hi there,
> I am almost new to the GIS topics, I want to ask whether there is a good
> concepts tutorial/site (there are a good number of GIS sites as far as I
> looked, but I couldnt figured out a somewhat beginner or elementary ones),
> that I will increase and complete my knowledge of GIS.
> 
> Get your works easy ;)

Here, you will find a very good introduction:

http://en.wikipedia.org/wiki/GIS

There are also some introductory materials on the OSGeo Wiki:

http://wiki.osgeo.org/

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Mon Jun 25 02:39:17 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] s 57 data reader in java
In-Reply-To: <7337d4f60706242314l22e6c4b3l6a748183c3e382b3@mail.gmail.com>
References: <7337d4f60706200102l150a93fbt79977d7fd2de8fe1@mail.gmail.com>
	<7337d4f60706242314l22e6c4b3l6a748183c3e382b3@mail.gmail.com>
Message-ID: <467F6315.2020906@loskot.net>

kevser sonmez wrote:
> hi there,
> 
> I want to ask whether any of you know a java library to read the s-57 data?
> Just like the ogr which is a C++ API.
> Or is it possible to write the user interface in java and use the ogr as
> the data reader, if so how?

There are SWIG binginds to GDAL for number of languages,
including Java:

http://trac.osgeo.org/gdal/wiki/GdalOgrInJava

As you will find out, Java bindings are not well documented,
so I'd also recommend to search through the gdal-dev list
archives:

http://news.gmane.org/gmane.comp.gis.gdal.devel

where you can find helpful details and hints.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From nimalika.f at sliit.lk  Mon Jun 25 03:26:36 2007
From: nimalika.f at sliit.lk (Nimalika)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] gis concepts
References: <7337d4f60706242318q72810147mceee78c6b2f0e59f@mail.gmail.com>
Message-ID: <004801c7b6fa$2ad945f0$d81410ac@nimali>

Hi,
This site also may help you

http://www.gisdevelopment.net/tutorials/index.htm

Regards
Nimalika
  ----- Original Message ----- 
  From: kevser sonmez 
  To: gdal-dev@lists.maptools.org 
  Sent: Monday, June 25, 2007 11:48 AM
  Subject: [Gdal-dev] gis concepts


  Hi there,
  I am almost new to the GIS topics, I want to ask whether there is a good concepts tutorial/site (there are a good number of GIS sites as far as I looked, but I couldnt figured out a somewhat beginner or elementary ones), that I will increase and complete my knowledge of GIS. 

  Get your works easy ;)




  _______________________________________________
  Gdal-dev mailing list
  Gdal-dev@lists.maptools.org
  http://lists.maptools.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070625/ee555b8a/attachment.html
From kevsemola at gmail.com  Mon Jun 25 04:03:09 2007
From: kevsemola at gmail.com (kevser sonmez)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Re: s 57 data reader in java
References: <7337d4f60706200102l150a93fbt79977d7fd2de8fe1@mail.gmail.com>
	<7337d4f60706242314l22e6c4b3l6a748183c3e382b3@mail.gmail.com>
	<467F6315.2020906@loskot.net>
Message-ID: <loom.20070625T100047-332@post.gmane.org>



> 
> There are SWIG binginds to GDAL for number of languages,
> including Java:
> 
> http://trac.osgeo.org/gdal/wiki/GdalOgrInJava
> 
> As you will find out, Java bindings are not well documented,
> so I'd also recommend to search through the gdal-dev list
> archives:
> 
> http://news.gmane.org/gmane.comp.gis.gdal.devel
> 
> where you can find helpful details and hints.
> 
> Cheers

Hi,
thanks a lot for the binding issue, where shall I find the GDAL java bindings,
do they come with the GDAL installation?

Cheers,



From aaime at openplans.org  Mon Jun 25 08:08:03 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Re: s 57 data reader in java
In-Reply-To: <loom.20070625T100047-332@post.gmane.org>
References: <7337d4f60706200102l150a93fbt79977d7fd2de8fe1@mail.gmail.com>	<7337d4f60706242314l22e6c4b3l6a748183c3e382b3@mail.gmail.com>	<467F6315.2020906@loskot.net>
	<loom.20070625T100047-332@post.gmane.org>
Message-ID: <467FB023.5090706@openplans.org>

kevser sonmez ha scritto:
> 
>> There are SWIG binginds to GDAL for number of languages,
>> including Java:
>>
>> http://trac.osgeo.org/gdal/wiki/GdalOgrInJava
>>
>> As you will find out, Java bindings are not well documented,
>> so I'd also recommend to search through the gdal-dev list
>> archives:
>>
>> http://news.gmane.org/gmane.comp.gis.gdal.devel
>>
>> where you can find helpful details and hints.
>>
>> Cheers
> 
> Hi,
> thanks a lot for the binding issue, where shall I find the GDAL java bindings,
> do they come with the GDAL installation?

No, they're not in a good enough shape to be included in the GDAL 
releases. I suggest you check out gdal trunk, you'll find them there
(and you will have to compile them too).

Cheers
Andrea

From tutey at o2.pl  Mon Jun 25 10:39:41 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] wrong nodata returned in GDAL dependent software
In-Reply-To: <4672F2B1.104@o2.pl>
References: <4672D38B.8050603@o2.pl> <4672F0AF.3060104@pobox.com>
	<4672F2B1.104@o2.pl>
Message-ID: <467FD3AD.3000307@o2.pl>

Hi

I'm resending my question. I guess it's got missed when GDAL list was
down for several days recently.

Maciej Sieczka wrote:

> Yet there is something else fishy -
> even when the input GRASS raster has no null, still gdal_translate
> forces a nodata, eg.:
> 
> $ r.mapcalc 'test=rand(0,1024)'
> $ r.info -r test
> min=0
> max=1023
> 
> $ r.out.gdal.sh input=test format=GTiff type=UInt16 output=test.tif
> 
> $ gdalinfo -mm test.tif | grep 'Computed\|NoData'
>     Computed Min/Max=0.000,1023.000
>   NoData Value=65535
> 
> 
> Or this one:
> 
> $ r.mapcalc 'test=rand(0,256)'
> $ r.info -r test
> min=0
> max=255
> 
> $ gdal_translate /gdata/spearfish60/sieczka/cellhd/test test.tif
> 
> $ gdalinfo -mm test.tif | grep 'Computed\|NoData'
>     Computed Min/Max=0.000,255.000
>   NoData Value=256
> 
> Is this OK? In either case I don't have any null in my input 'test'
> GRASS raster this time. Why is GDAL forcing it?

Maciek

From ludwigbrinckmann at gmail.com  Mon Jun 25 11:38:50 2007
From: ludwigbrinckmann at gmail.com (Ludwig M Brinckmann)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Copying GCPs from one file to another
Message-ID: <3f7a6e1c0706250838m1b33027bx93e30f1b56af104c@mail.gmail.com>

I have a set of files with GCPs and a set of files that are the result of
processing the first, which lack the GCPs. The files are GeoTiffs and they
have the same shape.

Is there a simple way of getting the GCPs out of the first files and to
attach them to the other?

(Simple means simpler than programmatically reading in the georef'ed file
and the non-georef'ed, extracting the GCPs and rewriting the second set, now
with GCPs)

Ludwig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070625/07d735d7/attachment.html
From warmerdam at pobox.com  Mon Jun 25 11:55:52 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Copying GCPs from one file to another
In-Reply-To: <3f7a6e1c0706250838m1b33027bx93e30f1b56af104c@mail.gmail.com>
References: <3f7a6e1c0706250838m1b33027bx93e30f1b56af104c@mail.gmail.com>
Message-ID: <467FE588.7030604@pobox.com>

Ludwig M Brinckmann wrote:
> I have a set of files with GCPs and a set of files that are the result 
> of processing the first, which lack the GCPs. The files are GeoTiffs and 
> they have the same shape.
> 
> Is there a simple way of getting the GCPs out of the first files and to 
> attach them to the other?
> 
> (Simple means simpler than programmatically reading in the georef'ed 
> file and the non-georef'ed, extracting the GCPs and rewriting the second 
> set, now with GCPs)

Ludwig,

There is no really simple way of doing this.

If I had to do it, I would utilize VRT files.  Basically I would:

1) gdal_translate -of VRT original.tif original.vrt
2) gdal_translate -of VRT result.tif result.vrt
3) copy the GCPs section of original.vrt to result.vrt in a text editor.
4) gdal_translate result.vrt result_with_gcps.tif

If you only want to do it a very few times this approach should be ok.
This general approach of using VRT files so that various kinds of metadata
can be copied/modified/etc can be applied to many similar problems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ludwigbrinckmann at gmail.com  Mon Jun 25 12:53:52 2007
From: ludwigbrinckmann at gmail.com (Ludwig M Brinckmann)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Copying GCPs from one file to another
In-Reply-To: <467FE588.7030604@pobox.com>
References: <3f7a6e1c0706250838m1b33027bx93e30f1b56af104c@mail.gmail.com>
	<467FE588.7030604@pobox.com>
Message-ID: <3f7a6e1c0706250953o3eb6a56apcfc712f28032844e@mail.gmail.com>

Frank, thanks for your usual quick reply.

As I have thousands of files, anything manual was not an option (of course
one could implement your suggestion with sed), so I went the way reading in
both files and stealing one file's GCPs with GetGCPs() and write the whole
shebang out again -- this also works of course with metadata, noDataValue
etc.

Ludwig

On 25/06/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> Ludwig M Brinckmann wrote:
> > I have a set of files with GCPs and a set of files that are the result
> > of processing the first, which lack the GCPs. The files are GeoTiffs and
> > they have the same shape.
> >
> > Is there a simple way of getting the GCPs out of the first files and to
> > attach them to the other?
> >
> > (Simple means simpler than programmatically reading in the georef'ed
> > file and the non-georef'ed, extracting the GCPs and rewriting the second
> > set, now with GCPs)
>
> Ludwig,
>
> There is no really simple way of doing this.
>
> If I had to do it, I would utilize VRT files.  Basically I would:
>
> 1) gdal_translate -of VRT original.tif original.vrt
> 2) gdal_translate -of VRT result.tif result.vrt
> 3) copy the GCPs section of original.vrt to result.vrt in a text editor.
> 4) gdal_translate result.vrt result_with_gcps.tif
>
> If you only want to do it a very few times this approach should be ok.
> This general approach of using VRT files so that various kinds of metadata
> can be copied/modified/etc can be applied to many similar problems.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070625/efce2ac6/attachment.html
From eduardo.kanegae at inflor.com.br  Mon Jun 25 17:46:36 2007
From: eduardo.kanegae at inflor.com.br (Eduardo Patto Kanegae)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] unable to initialize OGR datasource using C#
Message-ID: <468037BC.2020806@inflor.com.br>

Hi,

I?d like to run some C# benchmarks using OGR x ArcObjects but I?m 
getting some errors with OGR.

I?m running VisualStudio.NET 2005 with Windows XP Pro, created a new 
Windows application project,
added references for gdal_csharp.dll, gdalconst_csharp.dll, 
ogr_csharp.dll and osr_csharp.dll
and also C:\Program files\FWTools1.3.2\bin as a project reference path.

Then I added " using OSGeo.OGR " at the begining of my form code but 
when I try to run it,
it fails at the first line: Ogr.RegisterAll();

Ogr.RegisterAll();
OSGeo.OGR.DataSource oDS = Ogr.Open("D:\\myshapefile.shp", 0);
if (oDS == null)
{
    MessageBox.Show("DataSource open error!");
}
else
{
    Driver oDrv = oDS.GetDriver();
    if (oDrv == null)
    {
        MessageBox.Show("getDriver error!");
    }
    else
    {
        MessageBox.Show(oDrv.name);
    }
}

What might be wrong?

The error handler only gives me:

System.TypeInitializationException was unhandled
  Message="The type initializer for 'OSGeo.OGR.Ogr' threw an exception."
  Source="ogr_csharp"
  TypeName="OSGeo.OGR.Ogr"

thanks,

Eduardo Patto Kanegae
Consultor GIS
Tel: +55(27)2122-0888
Cel: +55(27)8155-2990
Fax: +55(27)2122-0861
eduardo.kanegae@inflor.com.br <mailto:eduardo.kanegae@inflor.com.br>
www.inflor.com.br <http://www.inflor.com.br>

From szekerest at gmail.com  Mon Jun 25 18:17:59 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] unable to initialize OGR datasource using C#
In-Reply-To: <468037BC.2020806@inflor.com.br>
References: <468037BC.2020806@inflor.com.br>
Message-ID: <f3b73b7d0706251517l8265e11k94cc7b168098f0c9@mail.gmail.com>

Eduardo,

I think some of the dll-s could not be loaded by your application. I
guess you should strip the '_fw' suffix of some of the dll-s in the
FWTools bin directory if you don't have those dll-s available on you
system. For example try to rename proj_fw.dll to proj.dll and so on.

Best regards,

Tamas Szekeres



2007/6/25, Eduardo Patto Kanegae <eduardo.kanegae@inflor.com.br>:
> Hi,
>
> I?d like to run some C# benchmarks using OGR x ArcObjects but I?m
> getting some errors with OGR.
>
> I?m running VisualStudio.NET 2005 with Windows XP Pro, created a new
> Windows application project,
> added references for gdal_csharp.dll, gdalconst_csharp.dll,
> ogr_csharp.dll and osr_csharp.dll
> and also C:\Program files\FWTools1.3.2\bin as a project reference path.
>
> Then I added " using OSGeo.OGR " at the begining of my form code but
> when I try to run it,
> it fails at the first line: Ogr.RegisterAll();
>
> Ogr.RegisterAll();
> OSGeo.OGR.DataSource oDS = Ogr.Open("D:\\myshapefile.shp", 0);
> if (oDS == null)
> {
>     MessageBox.Show("DataSource open error!");
> }
> else
> {
>     Driver oDrv = oDS.GetDriver();
>     if (oDrv == null)
>     {
>         MessageBox.Show("getDriver error!");
>     }
>     else
>     {
>         MessageBox.Show(oDrv.name);
>     }
> }
>
> What might be wrong?
>
> The error handler only gives me:
>
> System.TypeInitializationException was unhandled
>   Message="The type initializer for 'OSGeo.OGR.Ogr' threw an exception."
>   Source="ogr_csharp"
>   TypeName="OSGeo.OGR.Ogr"
>
> thanks,
>
> Eduardo Patto Kanegae
> Consultor GIS
> Tel: +55(27)2122-0888
> Cel: +55(27)8155-2990
> Fax: +55(27)2122-0861
> eduardo.kanegae@inflor.com.br <mailto:eduardo.kanegae@inflor.com.br>
> www.inflor.com.br <http://www.inflor.com.br>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From bgreene at rapidmap.com.au  Mon Jun 25 19:51:53 2007
From: bgreene at rapidmap.com.au (Ben Greene)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Problem reading projection information consistently
Message-ID: <CFE1D6CAE2D44343BF58E308C1C7EC64885723@rmg-server03.rmg.local>

I had a similar issue with an image that had invalid/confusing
projection information, but a valid EPSG code definition.  It seemed
that OpenEV extracted the EPSG code and used the definition for that to
generate the WKT, but GDAL was stricter with its interpretation.
I think that might be what's happening here.

I found this problem when trying to convert the WKT to proj4, which
returned an empty string.

What I ended up doing was, if the WKT didn't make any sense, parsing the
WKT looking for an EPSG code, and if I found one, I looked it up in the
'epsg' file which I believe is supplied with GDAL.
I then created the SpatialReference from the proj4 definition associated
with that EPSG code.

(I tried creating the SpatialReference directly from the EPSG code, but
it seems that my build of the C# bindings has issues with that, and
threw an exception).

HTH

Ben

-----Original Message-----
From: Luke Roth [mailto:roth.luke@gmail.com] 
Sent: Saturday, June 23, 2007 12:49 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Problem reading projection information consistently

I'm having an issue reading the projection information from an Ikonos
image.  I know it to be UTM zone 17, and when I open it in OpenEV
(from FWTools 1.3.1) I get the WKT

PROJCS["WGS 84 / UTM zone 17N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-81],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1]]

This is what I would expect, but when I use gdalinfo or the API
command GetProjectionRef() (using GDAL from the same version of
FWTools) I get:

PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-81],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32617"]]

Why is there a difference?  I'm trying to write a script to convert a
large number of images and shapefiles to a common projection, but this
is causing a problem.  Any ideas?  If I should be sending this to the
FWTools mailing list instead, let me know.

Thanks,

Luke Roth
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From kevsemola at gmail.com  Tue Jun 26 02:00:44 2007
From: kevsemola at gmail.com (kevser sonmez)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] s 57 data reader in java
In-Reply-To: <467F6315.2020906@loskot.net>
References: <7337d4f60706200102l150a93fbt79977d7fd2de8fe1@mail.gmail.com>
	<7337d4f60706242314l22e6c4b3l6a748183c3e382b3@mail.gmail.com>
	<467F6315.2020906@loskot.net>
Message-ID: <7337d4f60706252300r2d6735dax13006b57aa04f642@mail.gmail.com>

hmm, here is another question;
is it possible for me to produce these java bindings using SWIG? [Cause I
cannot find them :( ] And if so, will the produced bindings be used as
flexible as the ones in c++?

Thanks a lot for answers to newbie questions :)

On 6/25/07, Mateusz Loskot <mateusz@loskot.net> wrote:
>
> kevser sonmez wrote:
> > hi there,
> >
> > I want to ask whether any of you know a java library to read the s-57
> data?
> > Just like the ogr which is a C++ API.
> > Or is it possible to write the user interface in java and use the ogr as
>
> > the data reader, if so how?
>
> There are SWIG binginds to GDAL for number of languages,
> including Java:
>
> http://trac.osgeo.org/gdal/wiki/GdalOgrInJava
>
> As you will find out, Java bindings are not well documented,
> so I'd also recommend to search through the gdal-dev list
> archives:
>
> http://news.gmane.org/gmane.comp.gis.gdal.devel
>
> where you can find helpful details and hints.
>
> Cheers
> --
> Mateusz Loskot
> http://mateusz.loskot.net
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070626/2290d76c/attachment.html
From aaime at openplans.org  Tue Jun 26 02:26:56 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] s 57 data reader in java
In-Reply-To: <7337d4f60706252300r2d6735dax13006b57aa04f642@mail.gmail.com>
References: <7337d4f60706200102l150a93fbt79977d7fd2de8fe1@mail.gmail.com>	<7337d4f60706242314l22e6c4b3l6a748183c3e382b3@mail.gmail.com>	<467F6315.2020906@loskot.net>
	<7337d4f60706252300r2d6735dax13006b57aa04f642@mail.gmail.com>
Message-ID: <4680B1B0.4010004@openplans.org>

kevser sonmez ha scritto:
> hmm, here is another question;
> is it possible for me to produce these java bindings using SWIG? [Cause 
> I cannot find them :( ] 

With subversion installed:
svn co http://svn.osgeo.org/gdal/trunk/gdal gdal
cd gdal/swig/java

(this is just to locate them, depending on your operating system you'll
have to follow different instructions to actually build gdal/ogr and 
then the bindings, look into the online docs for directions).

Cheers
Andrea


From dmitry.kan at gmail.com  Tue Jun 26 09:50:52 2007
From: dmitry.kan at gmail.com (Dmitry Kan)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] projection in TAB files
Message-ID: <9a4d1d60706260650k3b68a8d7nad0d75098a985f38@mail.gmail.com>

Hello list!

I have the task to extract projection information from a TAB file of a
raster image (in ECW format) with no data in header and put it to the header
of the initial dataset.

Is there any way to restore projection from TAB? And will I have an
opportunity to introduce a *custom* projection into header of an image in
ECW format at all?

-- 
best wishes,
Dmitry Kan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070626/28661144/attachment.html
From warmerdam at pobox.com  Tue Jun 26 10:37:41 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] projection in TAB files
In-Reply-To: <9a4d1d60706260650k3b68a8d7nad0d75098a985f38@mail.gmail.com>
References: <9a4d1d60706260650k3b68a8d7nad0d75098a985f38@mail.gmail.com>
Message-ID: <468124B5.6090405@pobox.com>

Dmitry Kan wrote:
> 
> Hello list!
> 
> I have the task to extract projection information from a TAB file of a 
> raster image (in ECW format) with no data in header and put it to the 
> header of the initial dataset.

Dmitry,

There is no way to update coordinate system or geotransform information
inside an existing ECW file using GDAL.  You would basically have to
re-write the file with the correct information.

 > Is there any way to restore projection from TAB? And will I have an
 > opportunity to introduce a *custom* projection into header of an image
 > in ECW format at all?

I'm not sure what you mean by a custom projection.  In ECW format you
can only write a short PROJECTION name and DATUM name to define a
coordinate system.  These are references to coordinate system definition
files distributed with ERMapper.  There are ways of extending these
dictionary files, and if you did this, you could use your new custom
projections --- but only by setting the PROJ and DATUM creation options
to the ECW driver.

I hope this helps.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ari.jolma at tkk.fi  Tue Jun 26 12:18:46 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] GEOS precision model?
Message-ID: <46813C66.1070405@tkk.fi>

I'm doing some rather heavy duty geocomputation with OGR (via Perl 
module Geo::OGR of course), mainly intersections. I run into a problem, 
where GEOS throws a topology exception since the vertices of the two 
geometries are very close to each other (6 digits same, then differences).

I'm no GEOS guru, but it seems there is a possibility to improve the 
robustness of overlay operations with precision models(?). I think they 
could be useful for me now.

Is there a way to take advantage of what GEOS offers (and what does it 
really offer, if I could have a quick lesson...) via OGR? And if not, 
would it be difficult to hack it in?

Regards,

Ari


From warmerdam at pobox.com  Tue Jun 26 14:16:13 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] GEOS precision model?
In-Reply-To: <46813C66.1070405@tkk.fi>
References: <46813C66.1070405@tkk.fi>
Message-ID: <468157ED.30109@pobox.com>

Ari Jolma wrote:
> I'm doing some rather heavy duty geocomputation with OGR (via Perl 
> module Geo::OGR of course), mainly intersections. I run into a problem, 
> where GEOS throws a topology exception since the vertices of the two 
> geometries are very close to each other (6 digits same, then differences).
> 
> I'm no GEOS guru, but it seems there is a possibility to improve the 
> robustness of overlay operations with precision models(?). I think they 
> could be useful for me now.
> 
> Is there a way to take advantage of what GEOS offers (and what does it 
> really offer, if I could have a quick lesson...) via OGR? And if not, 
> would it be difficult to hack it in?

Ari,

OGR does not provide any access to the GEOS precision model.  In fact,
looking over the GEOS C API it does not either.  I think if you were
willing to do a custom build you would want to replace the following
in geos/capi/geos_c.cpp

static const GeometryFactory *geomFactory =
	GeometryFactory::getDefaultInstance();

with a customized geometry factory.  I don't know the details about
that though.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hobu.inc at gmail.com  Tue Jun 26 14:19:50 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] GEOS precision model?
In-Reply-To: <46813C66.1070405@tkk.fi>
References: <46813C66.1070405@tkk.fi>
Message-ID: <8FD1D73A-E629-4051-B688-A8FAC66AF78C@gmail.com>

Ari,

I've had similar problems, and I think there's been other GEOS users  
with the same.  The options are quite limited however:
-- Make sure you are using the robust operations (see the C++ header  
files for details on what needs to be called) in the latest release  
candidate.  I don't think OGR uses these by default right now.
-- Tweak your precision models until you find something that works  
consistently and good enough.
-- Use a computational geometry library that does real math like CGAL  
or LEDA (I ended up taking this option).
-- Inject QD into GEOS to bump the precision up and at a likely cost  
in performance <http://crd.lbl.gov/~dhbailey/mpdist/>.  I don't know  
how challenging this would be, but I suspect others would be  
interested in it.

Howard

On Jun 26, 2007, at 11:18 AM, Ari Jolma wrote:

> I'm doing some rather heavy duty geocomputation with OGR (via Perl  
> module Geo::OGR of course), mainly intersections. I run into a  
> problem, where GEOS throws a topology exception since the vertices  
> of the two geometries are very close to each other (6 digits same,  
> then differences).
>
> I'm no GEOS guru, but it seems there is a possibility to improve  
> the robustness of overlay operations with precision models(?). I  
> think they could be useful for me now.
>
> Is there a way to take advantage of what GEOS offers (and what does  
> it really offer, if I could have a quick lesson...) via OGR? And if  
> not, would it be difficult to hack it in?
>
> Regards,
>
> Ari
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From richard.matsunaga at waypointinfo.com  Tue Jun 26 14:34:26 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] ogr2ogr and casing on PG table names
Message-ID: <004e01c7b820$a0321710$cd012b0a@Richard>

I've just built GDAL myself from trunk and found that ogr2ogr no longer
respects the case of a file name when converting to a PG database.
 
I was previously using the ogr2ogr from FWTools 1.1.1 and it keeps the case
of the filename.
 
I'm wondering if this was intentional or if I've missed an option somewhere
in the build config?
 
Thanks,
Richard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070626/70d172b4/attachment.html
From richard.matsunaga at waypointinfo.com  Tue Jun 26 14:45:53 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] RE: ogr2ogr and casing on PG table names
Message-ID: <005401c7b822$397e5d10$cd012b0a@Richard>

I guess here is my answer:
 
http://trac.osgeo.org/gdal/ticket/1431


  _____  

From: Richard Matsunaga [mailto:richard.matsunaga@waypointinfo.com] 
Sent: June 26, 2007 2:34 PM
To: 'gdal-dev'
Subject: ogr2ogr and casing on PG table names


I've just built GDAL myself from trunk and found that ogr2ogr no longer
respects the case of a file name when converting to a PG database.
 
I was previously using the ogr2ogr from FWTools 1.1.1 and it keeps the case
of the filename.
 
I'm wondering if this was intentional or if I've missed an option somewhere
in the build config?
 
Thanks,
Richard

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070626/c43fbb8b/attachment.html
From hulst at argoss.nl  Tue Jun 26 15:59:04 2007
From: hulst at argoss.nl (A.Th.C. Hulst)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Possible enhanced NetCDF support in GDAL
Message-ID: <200706262159.04568.hulst@argoss.nl>



-------------Original mail Paavo ----------------
> Hello,

<snip>
excerpt:
Added support for colortables in netCDF. Configuration, including, add_offset 
scale_factor, is done from xml file
</snip>

I've offered code for the netCDF driver to apply scale_factor and offset on 
the fly. Same as you I'm having an issue with the colorisation of my raster 
data.

> Our typical application of this enhanced driver is to access and map
> oceanographic data such as SST contained in annual or six monthly
> aggregate files. These files typically have the data stored in 3d arrays
> (lat, lon, time) and sometimes 4d arrays (lat, lon, time, depth). With
> this modified driver it is simple to access a particular time slice for
> viewing as map data. The ability to colourise the data with a
> customisable colour table is a nice bonus. 
My interest is also in the oceanographic field. I wonder whether it won't be 
easier to display the data using a default rainbow pseudo colortable. I gues 
that once you have that, you can modify the colortable with processing 
options from mapserver.

I'm very interested in the Colortable impletation that you did in the netCDF 
driver. Can I ask you to send me a copy?

> If you are interested in including it or a modified version of it into
> new releases of gdal I'll gladly offer the code to you and bring it up
> to date to the latest development version, though I can't promise much
> commitment for furture maintenance. It would seem that this approach to
> generalisation would possbily work well with other file formats such as
> HDF.

Best regards,
Sander


From warmerdam at pobox.com  Tue Jun 26 16:27:03 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] RE: ogr2ogr and casing on PG table names
In-Reply-To: <005401c7b822$397e5d10$cd012b0a@Richard>
References: <005401c7b822$397e5d10$cd012b0a@Richard>
Message-ID: <46817697.9090101@pobox.com>

Richard Matsunaga wrote:
> I guess here is my answer:
>  
> http://trac.osgeo.org/gdal/ticket/1431
> 
>     ------------------------------------------------------------------------
>     *From:* Richard Matsunaga [mailto:richard.matsunaga@waypointinfo.com]
>     *Sent:* June 26, 2007 2:34 PM
>     *To:* 'gdal-dev'
>     *Subject:* ogr2ogr and casing on PG table names
> 
>     I've just built GDAL myself from trunk and found that ogr2ogr no
>     longer respects the case of a file name when converting to a PG
>     database.
>      
>     I was previously using the ogr2ogr from FWTools 1.1.1 and it keeps
>     the case of the filename.
>      
>     I'm wondering if this was intentional or if I've missed an option
>     somewhere in the build config?

Richard,

Right, the default behavior changed.  Preserving the case of table
and field names seemed to be making live difficult for most folks.  But
using LAUNDER=NO you can preserve the case if you need this.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ari.jolma at tkk.fi  Tue Jun 26 16:24:11 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] GEOS precision model?
In-Reply-To: <8FD1D73A-E629-4051-B688-A8FAC66AF78C@gmail.com>
References: <46813C66.1070405@tkk.fi>
	<8FD1D73A-E629-4051-B688-A8FAC66AF78C@gmail.com>
Message-ID: <468175EB.4010003@tkk.fi>

Howard Butler kirjoitti:
> Ari,
>
> I've had similar problems, and I think there's been other GEOS users 
> with the same.  The options are quite limited however:
> -- Make sure you are using the robust operations (see the C++ header 
> files for details on what needs to be called) in the latest release 
> candidate.  I don't think OGR uses these by default right now.
> -- Tweak your precision models until you find something that works 
> consistently and good enough.
> -- Use a computational geometry library that does real math like CGAL 
> or LEDA (I ended up taking this option).
> -- Inject QD into GEOS to bump the precision up

In fact I'd be more keen on taking it down, since these points are 
really the same (they are really points in the real world for heaven's 
sake!), one's X is 3780012.001 and the other's 3780011.999 etc. for some 
reason. I think it's pointless to try to extract the minuscule polygons 
at least in this case. Maybe the simplest approach would be to first 
pre-process the input files to some specific precision (7 digits in my 
case I believe) - or even implement the rounding filter into the main app.

Thanks for the suggestions.

Ari


> and at a likely cost in performance 
> <http://crd.lbl.gov/~dhbailey/mpdist/>.  I don't know how challenging 
> this would be, but I suspect others would be interested in it.
>
> Howard
>
> On Jun 26, 2007, at 11:18 AM, Ari Jolma wrote:
>
>> I'm doing some rather heavy duty geocomputation with OGR (via Perl 
>> module Geo::OGR of course), mainly intersections. I run into a 
>> problem, where GEOS throws a topology exception since the vertices of 
>> the two geometries are very close to each other (6 digits same, then 
>> differences).
>>
>> I'm no GEOS guru, but it seems there is a possibility to improve the 
>> robustness of overlay operations with precision models(?). I think 
>> they could be useful for me now.
>>
>> Is there a way to take advantage of what GEOS offers (and what does 
>> it really offer, if I could have a quick lesson...) via OGR? And if 
>> not, would it be difficult to hack it in?
>>
>> Regards,
>>
>> Ari
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From richard.matsunaga at waypointinfo.com  Tue Jun 26 17:00:18 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] RE: ogr2ogr to PostGIS gives wrong SRID?
Message-ID: <008801c7b835$00994290$cd012b0a@Richard>


Frank, I recovered this post from the archives. 

I have the same problem, where I am converting files (CSV, SHP, TAB) to
PostGIS and it is creating a new SRID for them (although this doesn't seem
all that consistent - but at any rate it isn't using the pre-existing EPSG
4326 that I want it to).

The real problem that I'm having with this is that GeoServer doesn't like
the assigned SRID, since it is using it to search for the EPSG code and
failing. I can force the EPSG 4326, but this is all part of an automated
process and for file formats with embedded SRS, the user shouldn't have to
worry about setting the EPSG.

It seems very odd that when converting a CSV file (with a VRT) and assigning
the SRS of EPSG:4326 that it would create a new entry in the spatial_ref_sys
table.

It also seems like it would be nice to carry around the EPSG code in some
cases, especially if the WKT is preferred over the proj4 representation and
the WKT diverges from the "master" EPSG definition.

Richard


Randy George wrote:
> Hi,
> 
>  
> 
> I am attempting to use ogr2ogr to load some shp files into PostGIS
> 
> When translating a .shp file that is in EPSG:2239 and reprojecting to 
> EPSG:4326 like this:
> 
>  
> 
> ogr2ogr -f PostgreSQL PG:"user=user dbname=GA host=localhost 
> password=pass port=5432" 06_ZoneA.shp -s_srs EPSG:2239 -t_srs EPSG:4326 
> -nln test -append
> 
>  
> 
> The resulting table has correct coords but not a valid srid:
> 
> "SRID=32771;LINESTRING(-81.3993398544517 
> 31.4233644295052,-81.4019931984873 31.4217494430945,-81.4036082752935 
> 31.4205958831135,-81.4047618947201 31.4192116162976,-81.4062616063205 
> 31.4179427019781,-81.407645959851 31.4171352080714,-81.4096071087392 
> 31.4144 (..)"

Randy,

What is happening is that ogr2ogr is expanding EPSG:4326 into the
full well known text definition.  It is then doing a comparison of this
WKT to all the WKT values in the spatial_ref_sys table, and when no
match is found it creates and populates a new entry in the table with
code 32771 (the next free value).  Then it assigns this value to the table
and all geometries.

There is nothing inherently wrong with this, but it makes it difficult mix
the geometries with other geometries using SRID 4326.

The assumption that SRID is the same as EPSG code is not exactly true -
it just happens that the default set of SRIDs are matched with EPSG.

Unfortunately I don't see a creation option to allow forcing use of
a particular pre-existing SRID with the PG driver.  I think there is
already an enhancement request for this in bugzilla, but you might want
to verify that, and file one if you can't find such a request.




From schwehr at ccom.unh.edu  Tue Jun 26 17:16:51 2007
From: schwehr at ccom.unh.edu (Kurt Schwehr)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] RE: ogr2ogr to PostGIS gives wrong SRID?
In-Reply-To: <200706262101.l5QL1S48031977@duke.maptools.org>
References: <200706262101.l5QL1S48031977@duke.maptools.org>
Message-ID: <0BFF1CCD-B44F-4319-BB51-2A68C931A1C1@ccom.unh.edu>

What about adding this to the command line?  It seemed to work for us  
with S57 data conversion.  We did that and then tried renaming the  
table to be lower case (alter table "CBLARE" rename to cblare;) but  
were then still not able to get mapserver/openlayers to display, so  
this might not be the solution....

ogr2ogr -a_srs "EPSG:4326" ...

-kurt


On Jun 26, 2007, at 5:01 PM, gdal-dev-request@lists.maptools.org wrote:

> Message: 9
> Date: Tue, 26 Jun 2007 17:00:18 -0400
> From: "Richard Matsunaga" <richard.matsunaga@waypointinfo.com>
> Subject: [Gdal-dev] RE: ogr2ogr to PostGIS gives wrong SRID?
> To: "'gdal-dev'" <gdal-dev@lists.maptools.org>
> Message-ID: <008801c7b835$00994290$cd012b0a@Richard>
> Content-Type: text/plain;	charset="US-ASCII"
>
>
> Frank, I recovered this post from the archives.
>
> I have the same problem, where I am converting files (CSV, SHP,  
> TAB) to
> PostGIS and it is creating a new SRID for them (although this  
> doesn't seem
> all that consistent - but at any rate it isn't using the pre- 
> existing EPSG
> 4326 that I want it to).
>
> The real problem that I'm having with this is that GeoServer  
> doesn't like
> the assigned SRID, since it is using it to search for the EPSG code  
> and
> failing. I can force the EPSG 4326, but this is all part of an  
> automated
> process and for file formats with embedded SRS, the user shouldn't  
> have to
> worry about setting the EPSG.
>
> It seems very odd that when converting a CSV file (with a VRT) and  
> assigning
> the SRS of EPSG:4326 that it would create a new entry in the  
> spatial_ref_sys
> table.
>
> It also seems like it would be nice to carry around the EPSG code  
> in some
> cases, especially if the WKT is preferred over the proj4  
> representation and
> the WKT diverges from the "master" EPSG definition.
>
> Richard
>
>
> Randy George wrote:
>> Hi,
>>
>>
>>
>> I am attempting to use ogr2ogr to load some shp files into PostGIS
>>
>> When translating a .shp file that is in EPSG:2239 and reprojecting to
>> EPSG:4326 like this:
>>
>>
>>
>> ogr2ogr -f PostgreSQL PG:"user=user dbname=GA host=localhost
>> password=pass port=5432" 06_ZoneA.shp -s_srs EPSG:2239 -t_srs EPSG: 
>> 4326
>> -nln test -append
>>
>>
>>
>> The resulting table has correct coords but not a valid srid:
>>
>> "SRID=32771;LINESTRING(-81.3993398544517
>> 31.4233644295052,-81.4019931984873 31.4217494430945,-81.4036082752935
>> 31.4205958831135,-81.4047618947201 31.4192116162976,-81.4062616063205
>> 31.4179427019781,-81.407645959851 31.4171352080714,-81.4096071087392
>> 31.4144 (..)"
>
> Randy,
>
> What is happening is that ogr2ogr is expanding EPSG:4326 into the
> full well known text definition.  It is then doing a comparison of  
> this
> WKT to all the WKT values in the spatial_ref_sys table, and when no
> match is found it creates and populates a new entry in the table with
> code 32771 (the next free value).  Then it assigns this value to  
> the table
> and all geometries.
>
> There is nothing inherently wrong with this, but it makes it  
> difficult mix
> the geometries with other geometries using SRID 4326.
>
> The assumption that SRID is the same as EPSG code is not exactly  
> true -
> it just happens that the default set of SRIDs are matched with EPSG.
>
> Unfortunately I don't see a creation option to allow forcing use of
> a particular pre-existing SRID with the PG driver.  I think there is
> already an enhancement request for this in bugzilla, but you might  
> want
> to verify that, and file one if you can't find such a request.


From sy at perkins.net  Tue Jun 26 17:19:30 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Geometry.AddPoint_2D() method missing from OGR C#
	bindings?
Message-ID: <468182E2.4040704@perkins.net>

I noticed the other day that the OGR C# bindings for the Geometry class 
have the method AddPoint(double x, double y, double z) , but not 
AddPoint_2D(double x, double y). The latter corresponds to the C API 
function OGR_G_AddPoint_2D().

I can use the 3 argument version, with z=0, but I've noticed that this 
results in my Polygon geometries being re-assigned a type of 
wkbPolygon25D, instead of wkbPolygon.

Would it make sense for this method to be added?

Cheers,

Simon


From hulst at argoss.nl  Wed Jun 27 00:25:24 2007
From: hulst at argoss.nl (A.Th.C. Hulst)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Possible enhanced NetCDF support in GDAL
In-Reply-To: <C8085FAD5A0F274187122B8E2550DA1D29AA11@extas4-hba.tas.csiro.au>
References: <C8085FAD5A0F274187122B8E2550DA1D29AA11@extas4-hba.tas.csiro.au>
Message-ID: <200706270625.25057.hulst@argoss.nl>

On Wednesday 27 June 2007 02:23:12 you wrote:
> Further to your comments,
>
> >My interest is also in the oceanographic field. I wonder whether it
>
> won't be
>
> >easier to display the data using a default rainbow pseudo colortable. I
>
> gues
>
> >that once you have that, you can modify the colortable with processing
> >options from mapserver.
>
> The way I specify colour tables is very easy and much easier than trying
> to do it through mapserver (in my opinion). Beyond that, I have little
> doubt it is faster too. The other thing to note is that rainbow colour
> tables are generally bad to use in data representation because human
> vision is much more sensitive to lightness change than hue change. As
> such, you can see much more detail in complex data by not using the
> rainbow map, though it seems that every man and his dog seems to want to
> use it. It seems to make some sense for SST data though.
One gets used to it ;)

I'll try your code the coming days. The maps look good. Whenever I made it 
into 1.4.1 I'll send you the results.

Best regards,
Sander



From hulst at argoss.nl  Wed Jun 27 02:25:07 2007
From: hulst at argoss.nl (A.Th.C. Hulst)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Possible enhanced NetCDF support in GDAL
In-Reply-To: <C8085FAD5A0F274187122B8E2550DA1D29AA10@extas4-hba.tas.csiro.au>
References: <C8085FAD5A0F274187122B8E2550DA1D29AA10@extas4-hba.tas.csiro.au>
Message-ID: <200706270825.07915.hulst@argoss.nl>

Hi Paavo,

I've looked at your code. Since version 1.2.6 the netCDF driver had quite some 
changes. For instance, it takes care of the geometric dimensions for you now. 
That code can be skipped. As I said before, I've also modified it so that it 
support scale and offset. Unfortunately, I've used a similar trick as you did 
to recast the pImage, so that would complicate things a bit. My 
netcdfdataset.cpp can be found in the trac system of gdal 
(http://trac.osgeo.org/gdal/ticket/1660). 

What do you think would be the best way to reimplement your code in the 1.4.x 
driver? It seems logical to me that only color information is configured in 
the XML file. All other information is included in the netCDF file itself and 
should be obtained from there (geometrics, noDataValues etc.).

It might be an idea to put as much code as possible in a seperate file so we 
only have to update the bindings when a new version arrives.

Sander


From hulst at argoss.nl  Wed Jun 27 03:23:41 2007
From: hulst at argoss.nl (A.Th.C. Hulst)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Possible enhanced NetCDF support in GDAL
In-Reply-To: <C8085FAD5A0F274187122B8E2550DA1D03D520@extas4-hba.tas.csiro.au>
References: <C8085FAD5A0F274187122B8E2550DA1D03D520@extas4-hba.tas.csiro.au>
Message-ID: <200706270923.41374.hulst@argoss.nl>

I'm spilling some ideas here. Maybe the main developers have a comment or two?

On Wednesday 27 June 2007 08:42:45 you wrote:
> As an example, how would the current netcdf driver react to the nc file
> I have of SST which is in 3 dimensional arrays with 2 spatial and one
> time co-ordinate? How would I select a particular slice to display and
> would it automatically interpret the co-ordinates correctly? I have
> grave doubts that it would and that is why I have an external XML file
> to describe to the driver how it should interpret the metadata.
Consider one of my wave model result files which displays correctly as 
grayscale. Note that this gdalinfo includes my modifications.
----------------------------------
hulst@smartone:/var/www/mapserver/data/windwave$ gdalinfo ww3_output.nc
Warning 1: No UNIDATA NC_GLOBAL:Conventions attribute
Driver: netCDF/Network Common Data Format
Size is 512, 512
Coordinate System is `'
Metadata:
  NC_GLOBAL#history=Generated by Argoss WMES
 <SNIP>
Subdatasets:
  SUBDATASET_1_NAME=NETCDF:"ww3_output.nc":zonal_wind_speed
  SUBDATASET_1_DESC=[169x157x288] zonal_wind_speed (8-bit integer)
  SUBDATASET_2_NAME=NETCDF:"ww3_output.nc":meridional_wind_speed
  SUBDATASET_2_DESC=[169x157x288] meridional_wind_speed (8-bit integer)
  SUBDATASET_3_NAME=NETCDF:"ww3_output.nc":sign_wave_height
<SNIP>
------------------------
and
------------------------

hulst@smartone:/$ gdalinfo netCDF:"ww3_output.nc":sign_wave_height

Warning 1: No UNIDATA NC_GLOBAL:Conventions attribute
Driver: netCDF/Network Common Data Format
Size is 288, 157
Coordinate System is `'
Origin = (-0.625000000000000,-78.500000000000000)
Pixel Size = (1.250000000000000,1.000000000000000)
Metadata:
  NC_GLOBAL#history=Generated by Argoss WMES
  NC_GLOBAL#descriptor=
  NC_GLOBAL#wind_source=gfs
  NC_GLOBAL#calibration_version=1
  NC_GLOBAL#assimilation_version=0
  NC_GLOBAL#grid_identifier=gl
  NC_GLOBAL#grid_configuration=4
  NC_GLOBAL#wmes_identifier=95
  NC_GLOBAL#model_identifier=3
  sign_wave_height#units=m
  sign_wave_height#_FillValue=-32768
  sign_wave_height#scale_factor=7.629511e-04
  sign_wave_height#add_offset=2.499962e+01
  time#_FillValue=-3.3e+33
  latitude#units=degrees_north
  longitude#units=degrees_east
  direction#units=degrees
  frequency#units=hertz
Corner Coordinates:
Upper Left  (  -0.6250000, -78.5000000)
Lower Left  (  -0.6250000,  78.5000000)
Upper Right (     359.375,     -78.500)
Lower Right (     359.375,      78.500)
Center      ( 179.3750000,   0.0000000)
Band 1 Block=288x1 Type=Float32, ColorInterp=Palette
  NoData Value=-32768
  Offset: 24.9996185302734,   Scale:0.000762951094657183
  Metadata:
    NETCDF_VARNAME=sign_wave_height
    NETCDF_DIMENSION_time=13654.5
    NETCDF_time_units=Days since 01-jan-1970 00:00:00

<SNIP>

Band 169 Block=288x1 Type=Float32, ColorInterp=Palette
  NoData Value=-32768
  Offset: 24.9996185302734,   Scale:0.000762951094657183
  Metadata:
    NETCDF_VARNAME=sign_wave_height
    NETCDF_DIMENSION_time=13661.5
    NETCDF_time_units=Days since 01-jan-1970 00:00:00
----------------------------------------

As you can see, you refer to the variable by name, and time slice by "band" 
number. This is a reasonable assumption as the record axis will be the time 
axis 9 out of 10 times.

In mapserver this would be referred to as:
DATA netCDF:"ww3_output.nc":sign_wave_height
PROCESSING bands="1"

In your case, it could be
DATA netCDF:"ww3_output.xml":sign_wave_height
PROCESSING bands="1"

which could cause OpenUsingInterpretationXML to search for a section with that 
variable type (sign_wave_height) and use it for coloring. You even could set 
a default coloring for unspecified variables. My idea was to add time axis 
support in a wrapper around mapserv. The wrapper would set the PROCESSING 
bands= parameter throught MapScript (Perl most likely).

Another option, more in the spirit of gdal, could be to extend the PROCESSING 
LUT="agimpfile" mechanism to accept your xml file. The advantage being that 
data and representation are seperated and one colorintrepretation file could 
be used for several netcdf files (you can remove the filename element). That 
would certainly be ideal for me as I produce gigs of netCDF data with 
atmospheric, oceanographic and tidal models.

It would then be:
DATA netCDF:"ww3_output.nc":sign_wave_height
PROCESSING bands="1"
PROCESSING LUT="myColorIntrepretation.xml"

Regards,
Sander


From kevsemola at gmail.com  Wed Jun 27 03:54:36 2007
From: kevsemola at gmail.com (kevser sonmez)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] gis concepts
In-Reply-To: <004801c7b6fa$2ad945f0$d81410ac@nimali>
References: <7337d4f60706242318q72810147mceee78c6b2f0e59f@mail.gmail.com>
	<004801c7b6fa$2ad945f0$d81410ac@nimali>
Message-ID: <7337d4f60706270054j76125a41x9ba9304a136b8939@mail.gmail.com>

Hi;
I have been looking and even still looking to the sites you have sent.
Thanks for the suggestions. I am trying to read s57 data with OGR. I would
like to view the data in s 52 format, in Java. I dont know whether I have
choosen the right way to view the S52 data but I want to make something that
is platform independent. Shall I choose OpenGL, instead of Java drawing?
Which would be more efficient?

I have found some workings on OpenEv for s 52 viewing, but I want to know
whether the working is over or mature enough to be used. So that there is no
need for me to reinvent the wheel. Or there are some other works on the
issue?? Or shall I have to fiddle into the code?

And also I am curious whether there is a
documentation/tutorial/site/anything for s57 producing other than the
specification. I have the 3.1 specification of the s 57 data format. But as
far as I understood, it is returning to 4.0 standard?

So confused;
just looking for some ideas

Thanks again :)

On 6/25/07, Nimalika <nimalika.f@sliit.lk> wrote:
>
>  Hi,
> This site also may help you
>
> http://www.gisdevelopment.net/tutorials/index.htm
>
> Regards
> Nimalika
>
> ----- Original Message -----
> *From:* kevser sonmez <kevsemola@gmail.com>
> *To:* gdal-dev@lists.maptools.org
> *Sent:* Monday, June 25, 2007 11:48 AM
> *Subject:* [Gdal-dev] gis concepts
>
> Hi there,
> I am almost new to the GIS topics, I want to ask whether there is a good
> concepts tutorial/site (there are a good number of GIS sites as far as I
> looked, but I couldnt figured out a somewhat beginner or elementary ones),
> that I will increase and complete my knowledge of GIS.
>
> Get your works easy ;)
>
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070627/5931273e/attachment.html
From richard.matsunaga at waypointinfo.com  Wed Jun 27 09:01:14 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] RE: ogr2ogr to PostGIS gives wrong SRID?
In-Reply-To: <0BFF1CCD-B44F-4319-BB51-2A68C931A1C1@ccom.unh.edu>
References: <200706262101.l5QL1S48031977@duke.maptools.org>
	<0BFF1CCD-B44F-4319-BB51-2A68C931A1C1@ccom.unh.edu>
Message-ID: <002201c7b8bb$3e5fa840$cd012b0a@Richard>

 
Yes, I do assign the SRS, particularly with the CSV case, where it is
required. I found another old post indicating that you need to use s_srs,
but that doesn't cause the SRID to get set at all.

Richard

> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org 
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Kurt Schwehr
> 
> What about adding this to the command line?  It seemed to 
> work for us with S57 data conversion.  We did that and then 
> tried renaming the table to be lower case (alter table 
> "CBLARE" rename to cblare;) but were then still not able to 
> get mapserver/openlayers to display, so this might not be the 
> solution....
> 
> ogr2ogr -a_srs "EPSG:4326" ...
> 
> -kurt
> 
> 
> On Jun 26, 2007, at 5:01 PM, 
> gdal-dev-request@lists.maptools.org wrote:
> 
> > Message: 9
> > Date: Tue, 26 Jun 2007 17:00:18 -0400
> > From: "Richard Matsunaga" <richard.matsunaga@waypointinfo.com>
> > Subject: [Gdal-dev] RE: ogr2ogr to PostGIS gives wrong SRID?
> > To: "'gdal-dev'" <gdal-dev@lists.maptools.org>
> > Message-ID: <008801c7b835$00994290$cd012b0a@Richard>
> > Content-Type: text/plain;	charset="US-ASCII"
> >
> >
> > Frank, I recovered this post from the archives.
> >
> > I have the same problem, where I am converting files (CSV, SHP,
> > TAB) to
> > PostGIS and it is creating a new SRID for them (although 
> this doesn't 
> > seem all that consistent - but at any rate it isn't using the pre- 
> > existing EPSG
> > 4326 that I want it to).
> >
> > The real problem that I'm having with this is that 
> GeoServer doesn't 
> > like the assigned SRID, since it is using it to search for the EPSG 
> > code and failing. I can force the EPSG 4326, but this is 
> all part of 
> > an automated process and for file formats with embedded 
> SRS, the user 
> > shouldn't have to worry about setting the EPSG.
> >
> > It seems very odd that when converting a CSV file (with a VRT) and 
> > assigning the SRS of EPSG:4326 that it would create a new 
> entry in the 
> > spatial_ref_sys table.
> >
> > It also seems like it would be nice to carry around the 
> EPSG code in 
> > some cases, especially if the WKT is preferred over the proj4 
> > representation and the WKT diverges from the "master" EPSG 
> definition.
> >
> > Richard
> >
> >
> > Randy George wrote:
> >> Hi,
> >>
> >>
> >>
> >> I am attempting to use ogr2ogr to load some shp files into PostGIS
> >>
> >> When translating a .shp file that is in EPSG:2239 and 
> reprojecting to
> >> EPSG:4326 like this:
> >>
> >>
> >>
> >> ogr2ogr -f PostgreSQL PG:"user=user dbname=GA host=localhost 
> >> password=pass port=5432" 06_ZoneA.shp -s_srs EPSG:2239 -t_srs EPSG:
> >> 4326
> >> -nln test -append
> >>
> >>
> >>
> >> The resulting table has correct coords but not a valid srid:
> >>
> >> "SRID=32771;LINESTRING(-81.3993398544517
> >> 31.4233644295052,-81.4019931984873 
> 31.4217494430945,-81.4036082752935
> >> 31.4205958831135,-81.4047618947201 
> 31.4192116162976,-81.4062616063205
> >> 31.4179427019781,-81.407645959851 
> 31.4171352080714,-81.4096071087392
> >> 31.4144 (..)"
> >
> > Randy,
> >
> > What is happening is that ogr2ogr is expanding EPSG:4326 
> into the full 
> > well known text definition.  It is then doing a comparison 
> of this WKT 
> > to all the WKT values in the spatial_ref_sys table, and 
> when no match 
> > is found it creates and populates a new entry in the table 
> with code 
> > 32771 (the next free value).  Then it assigns this value to 
> the table 
> > and all geometries.
> >
> > There is nothing inherently wrong with this, but it makes 
> it difficult 
> > mix the geometries with other geometries using SRID 4326.
> >
> > The assumption that SRID is the same as EPSG code is not 
> exactly true 
> > - it just happens that the default set of SRIDs are matched 
> with EPSG.
> >
> > Unfortunately I don't see a creation option to allow 
> forcing use of a 
> > particular pre-existing SRID with the PG driver.  I think there is 
> > already an enhancement request for this in bugzilla, but you might 
> > want to verify that, and file one if you can't find such a request.
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From szekerest at gmail.com  Wed Jun 27 09:22:49 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Geometry.AddPoint_2D() method missing from OGR C#
	bindings?
In-Reply-To: <468182E2.4040704@perkins.net>
References: <468182E2.4040704@perkins.net>
Message-ID: <f3b73b7d0706270622p6e59a2c3reffba6de714d94dd@mail.gmail.com>

2007/6/26, Simon Perkins <sy@perkins.net>:
> I noticed the other day that the OGR C# bindings for the Geometry class
> have the method AddPoint(double x, double y, double z) , but not
> AddPoint_2D(double x, double y). The latter corresponds to the C API
> function OGR_G_AddPoint_2D().
>
> I can use the 3 argument version, with z=0, but I've noticed that this
> results in my Polygon geometries being re-assigned a type of
> wkbPolygon25D, instead of wkbPolygon.
>
> Would it make sense for this method to be added?
>

I think that makes sense. Would you submit a ticket with this issue?

Best regards,

Tamas

From warmerdam at pobox.com  Wed Jun 27 10:09:19 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] gis concepts
In-Reply-To: <7337d4f60706270054j76125a41x9ba9304a136b8939@mail.gmail.com>
References: <7337d4f60706242318q72810147mceee78c6b2f0e59f@mail.gmail.com>
	<004801c7b6fa$2ad945f0$d81410ac@nimali>
	<7337d4f60706270054j76125a41x9ba9304a136b8939@mail.gmail.com>
Message-ID: <46826F8F.7040909@pobox.com>

kevser sonmez wrote:
> Hi;
> I have been looking and even still looking to the sites you have sent. 
> Thanks for the suggestions. I am trying to read s57 data with OGR. I 
> would like to view the data in s 52 format, in Java. I dont know whether 
> I have choosen the right way to view the S52 data but I want to make 
> something that is platform independent. Shall I choose OpenGL, instead 
> of Java drawing? Which would be more efficient?

Kevser,

I am not aware of any pre-prepared open source solution for s-52
rendering of S-57 data into Java.

> I have found some workings on OpenEv for s 52 viewing, but I want to 
> know whether the working is over or mature enough to be used. So that 
> there is no need for me to reinvent the wheel. Or there are some other 
> works on the issue?? Or shall I have to fiddle into the code?

My personal opinion is that this code is orphaned, and not all that
mature so if you use it you should expect some hassles.  But you might
want to try and contact the author directly.

> And also I am curious whether there is a 
> documentation/tutorial/site/anything for s57 producing other than the 
> specification. I have the 3.1 specification of the s 57 data format. But 
> as far as I understood, it is returning to 4.0 standard?

As far as I know the 3.1 specification applies to data in current distribution
and I don't think the 4.0 spec will matter from a practical point of view for
a while.  But I don't follow this issue very closely.

For resources, I often refer to the Universal Systems S-57 page which has a
nice online object dictionary:

   http://www.caris.com/S-57/frames/S57catalog.htm

You might also find the OpenECDIS forum useful:

   http://www.openecdis.org/

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From abhay.menon at gmail.com  Wed Jun 27 14:33:30 2007
From: abhay.menon at gmail.com (abhay menon)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] 16bit Erdas Imagine(HFA) to 8bit GeoTIFF
Message-ID: <7a30cd70706271133p2f289f0cx231c475e3f3d4b1@mail.gmail.com>

Hello List,

I have a 16 Bit (UInt16) Image of Erdas Imagine which I need to convert to a
GeoTIFF file of 8bit (Byte).

I tried using rgb2pct.py and gdal_translate, also did try gdalwarp too. No
success!!

I found on OpenEV (with FWTools 1.3.1) that the raster information suggest
it's color ranges are beyond 255 per band which mean i have to adjust the
color value less than to 255.

Is there any tool or sequence of steps or instruction for gdal_translate or
gdalwarp, which I could follow to adjust the color ranges and convert the 16
bit to 8 bit image.

-- 
Best Regards

Abhay Menon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070628/caeaa896/attachment.html
From warmerdam at pobox.com  Wed Jun 27 15:02:49 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Motion to Release GDAL 1.4.2 
Message-ID: <4682B459.5090704@pobox.com>

Folks,

I have prepared a release candidate for 1.4.2 (finally) at:

http://download.osgeo.org/gdal/gdal-1.4.2RC1.tar.gz
http://download.osgeo.org/gdal/gdal142RC1.zip

I'd appreciate any testing.  News at:

   http://trac.osgeo.org/gdal/wiki/Release/1.4.2-News

Motion: To release this as 1.4.2 Friday June 29th.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hobu.inc at gmail.com  Wed Jun 27 15:15:04 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Motion to Release GDAL 1.4.2 
In-Reply-To: <4682B459.5090704@pobox.com>
References: <4682B459.5090704@pobox.com>
Message-ID: <D1A054A9-F205-4A7B-B711-D339C0860826@gmail.com>

+1 on a Friday release.  Good job guys...

Howard


On Jun 27, 2007, at 2:02 PM, Frank Warmerdam wrote:

> Folks,
>
> I have prepared a release candidate for 1.4.2 (finally) at:
>
> http://download.osgeo.org/gdal/gdal-1.4.2RC1.tar.gz
> http://download.osgeo.org/gdal/gdal142RC1.zip
>
> I'd appreciate any testing.  News at:
>
>   http://trac.osgeo.org/gdal/wiki/Release/1.4.2-News
>
> Motion: To release this as 1.4.2 Friday June 29th.
>
> Best regards,
> --  
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http:// 
> osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From dmorissette at mapgears.com  Wed Jun 27 17:41:17 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Motion to Release GDAL 1.4.2
In-Reply-To: <4682B459.5090704@pobox.com>
References: <4682B459.5090704@pobox.com>
Message-ID: <4682D97D.9050403@mapgears.com>

Frank Warmerdam wrote:
> 
> Motion: To release this as 1.4.2 Friday June 29th.
> 

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From warmerdam at pobox.com  Wed Jun 27 18:04:47 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] GDAL 1.4.2RC1 win32 binaries
Message-ID: <4682DEFF.3070901@pobox.com>

Folks,

I have produced GDAL 1.4.2 win32 binaries similar to those we have
for 1.4.1 at:

  http://download.osgeo.org/gdal/win32/

In actual fact, the plugins from 1.4.1 should also work fine in
1.4.2.  In fact, it would be nice to confirm that.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Jun 27 18:10:07 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] GDAL 1.4.2RC1 win32 binaries
Message-ID: <4682E03F.6020406@pobox.com>

Folks,

I have produced GDAL 1.4.2 win32 binaries similar to those we have
for 1.4.1 at:

  http://download.osgeo.org/gdal/win32/

In actual fact, the plugins from 1.4.1 should also work fine in
1.4.2.  In fact, it would be nice to confirm that.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Wed Jun 27 20:48:35 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Motion to Release GDAL 1.4.2
In-Reply-To: <4682B459.5090704@pobox.com>
References: <4682B459.5090704@pobox.com>
Message-ID: <f3b73b7d0706271748w28d6fc74ma57576ae2bc252d3@mail.gmail.com>

+1 to the motion

Best regards,

Tamas


2007/6/27, Frank Warmerdam <warmerdam@pobox.com>:
> Folks,
>
> I have prepared a release candidate for 1.4.2 (finally) at:
>
> http://download.osgeo.org/gdal/gdal-1.4.2RC1.tar.gz
> http://download.osgeo.org/gdal/gdal142RC1.zip
>
> I'd appreciate any testing.  News at:
>
>    http://trac.osgeo.org/gdal/wiki/Release/1.4.2-News
>
> Motion: To release this as 1.4.2 Friday June 29th.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From alison_luo2001 at yahoo.com  Thu Jun 28 03:19:43 2007
From: alison_luo2001 at yahoo.com (Alison Luo)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Does GDAL1.4.1 support vector quantization
In-Reply-To: <4682E03F.6020406@pobox.com>
Message-ID: <15241.29205.qm@web50511.mail.re2.yahoo.com>

Sample NITF file U_3058b.ntf from
ftp://ftp.remotesensing.org/gdal/data/nitf/nitf2.0/
has vector quantization compression. The image has 1
block of size 1536x1536. I used RasterIO method in
GDALDataset class to get raw image data as follows:

imgData->RasterIO(GF_READ,0,0,1536,1536,pData,1536,1536,GDT_Byte,1,NULL,0,0,0);

But the returned data in buffer pData is all wrong. Is
it because GDAL does not support vector quantization
compression or I did not use RasterIO correctly?

Thanks,
Alison 


 
____________________________________________________________________________________
Never miss an email again!
Yahoo! Toolbar alerts you the instant new Mail arrives.
http://tools.search.yahoo.com/toolbar/features/mail/

From roberto.starnini at gmail.com  Thu Jun 28 05:11:43 2007
From: roberto.starnini at gmail.com (Roberto Starnini)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] PHP_OGR layer create options
Message-ID: <3367565a0706280211i5b4d57caodc7694c65f13ff80@mail.gmail.com>

Hello,

I have used ogr/php library to migrate layers from Oracle to Postgres. I
have a problem with the last parameter of OGR_DS_CreateLayer()  function. I
have passed an array of options :
 $aoptions[0] = 'OVERWRITE=YES';
 $aoptions[1] = 'GEOMETRY_NAME=the_geom';
but it doesn't works.

Thanks for help!


Roberto Starnini
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070628/5f1cdd89/attachment.html
From dron at ak4719.spb.edu  Thu Jun 28 06:21:02 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Motion to Release GDAL 1.4.2
In-Reply-To: <4682B459.5090704@pobox.com>
References: <4682B459.5090704@pobox.com>
Message-ID: <20070628102102.GA31086@ak4719.spb.edu>

On Wed, Jun 27, 2007 at 03:02:49PM -0400, Frank Warmerdam wrote:
> Motion: To release this as 1.4.2 Friday June 29th.

+1

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From SriRam.PrasadBhasker at rmsi.com  Thu Jun 28 07:48:47 2007
From: SriRam.PrasadBhasker at rmsi.com (SriRam Prasad Bhasker)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Motion to Release GDAL 1.4.2
In-Reply-To: <20070628102102.GA31086@ak4719.spb.edu>
Message-ID: <OF3B4CEA87.637576FA-ON65257308.0040DB44-65257308.0040E71A@rmsi.com>

I am eagerly waiting for this 1.4.2 release.

cheers
s.p.bhasker






Andrey Kiselev <dron@ak4719.spb.edu>
Sent by: gdal-dev-bounces@lists.maptools.org
06/28/2007 03:51 PM
 
        To:     gdal-dev@lists.maptools.org
        cc: 
        Subject:        Re: [Gdal-dev] Motion to Release GDAL 1.4.2


On Wed, Jun 27, 2007 at 03:02:49PM -0400, Frank Warmerdam wrote:
> Motion: To release this as 1.4.2 Friday June 29th.

+1

Best regards,
Andrey

--
Andrey V. Kiselev
ICQ# 26871517
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070628/d022959f/attachment.html
From kevsemola at gmail.com  Thu Jun 28 08:38:03 2007
From: kevsemola at gmail.com (kevser sonmez)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] ogrinfo related
Message-ID: <7337d4f60706280538t273cdaf9rc776761dc807757f@mail.gmail.com>

Hi there,
I was using ogrinfo.exe without problem yesterday, but today something has
happened (as far as I remember I just moved some locations of the files),
when I call for an enc-s57 data to look for the naming info of layers with
ogrinfo; it always returns of 5 layers like Point, Line, Area... regardless
of the data? Yesterday I could be able to get the specific names from the
IHO Object Catalogue; like ADMARE, DEPARE ... What do you think may have
happened, related with this Object Catalogue?

Thanks a lot
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070628/9798cc11/attachment.html
From warmerdam at pobox.com  Thu Jun 28 10:18:12 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] ogrinfo related
In-Reply-To: <7337d4f60706280538t273cdaf9rc776761dc807757f@mail.gmail.com>
References: <7337d4f60706280538t273cdaf9rc776761dc807757f@mail.gmail.com>
Message-ID: <4683C324.9040809@pobox.com>

kevser sonmez wrote:
> Hi there,
> I was using ogrinfo.exe without problem yesterday, but today something 
> has happened (as far as I remember I just moved some locations of the 
> files), when I call for an enc-s57 data to look for the naming info of 
> layers with ogrinfo; it always returns of 5 layers like Point, Line, 
> Area... regardless of the data? Yesterday I could be able to get the 
> specific names from the IHO Object Catalogue; like ADMARE, DEPARE ... 
> What do you think may have happened, related with this Object Catalogue?

Kevser,

In order to represent object classes properly the OGR S-57 driver needs
access to the various object catalog files such as s57objectclasses.csv.
These are normally found in gdal/data in the source.  On windows systems
you normally have to set the GDAL_DATA environment variable to point to the
directory where these are found.  On Unix this isn't necessary if they
are installed in the standard location (/usr/local/share/gdal).

I don't know if you are using FWTools, but if you are it sets up various
paths at install time, and you can't move things afterwards without fixing
this up or some things won't work right.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From kevsemola at gmail.com  Thu Jun 28 10:36:00 2007
From: kevsemola at gmail.com (kevser sonmez)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] ogrinfo related
In-Reply-To: <4683C324.9040809@pobox.com>
References: <7337d4f60706280538t273cdaf9rc776761dc807757f@mail.gmail.com>
	<4683C324.9040809@pobox.com>
Message-ID: <7337d4f60706280736v6bbd8db8lbcf239108de65a38@mail.gmail.com>

Hi Frank,
Thanks a lot. The GDAL_DATA just as you told was pointing to a wrong
directory..
I dont remember setting an environment variable though.

Thanks again :)

On 6/28/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> kevser sonmez wrote:
> > Hi there,
> > I was using ogrinfo.exe without problem yesterday, but today something
> > has happened (as far as I remember I just moved some locations of the
> > files), when I call for an enc-s57 data to look for the naming info of
> > layers with ogrinfo; it always returns of 5 layers like Point, Line,
> > Area... regardless of the data? Yesterday I could be able to get the
> > specific names from the IHO Object Catalogue; like ADMARE, DEPARE ...
> > What do you think may have happened, related with this Object Catalogue?
>
> Kevser,
>
> In order to represent object classes properly the OGR S-57 driver needs
> access to the various object catalog files such as s57objectclasses.csv.
> These are normally found in gdal/data in the source.  On windows systems
> you normally have to set the GDAL_DATA environment variable to point to
> the
> directory where these are found.  On Unix this isn't necessary if they
> are installed in the standard location (/usr/local/share/gdal).
>
> I don't know if you are using FWTools, but if you are it sets up various
> paths at install time, and you can't move things afterwards without fixing
> this up or some things won't work right.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070628/035b3ed8/attachment.html
From warmerdam at pobox.com  Thu Jun 28 10:41:30 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Does GDAL1.4.1 support vector quantization
In-Reply-To: <15241.29205.qm@web50511.mail.re2.yahoo.com>
References: <15241.29205.qm@web50511.mail.re2.yahoo.com>
Message-ID: <4683C89A.5060106@pobox.com>

Alison Luo wrote:
> Sample NITF file U_3058b.ntf from
> ftp://ftp.remotesensing.org/gdal/data/nitf/nitf2.0/
> has vector quantization compression. The image has 1
> block of size 1536x1536. I used RasterIO method in
> GDALDataset class to get raw image data as follows:
> 
> imgData->RasterIO(GF_READ,0,0,1536,1536,pData,1536,1536,GDT_Byte,1,NULL,0,0,0);
> 
> But the returned data in buffer pData is all wrong. Is
> it because GDAL does not support vector quantization
> compression or I did not use RasterIO correctly?

Alison,

I believe this is a bug in the NITF driver VQ decoding.  The VQ decoder
was intended for a very specific data product (CADRG?) and I suspect the
issue is that this file does not adhere to the particulars of that product.

I'd appreciate it if you could file a bug report in the GDAL trac on this
issue, and I'll try and address it when practical.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dany.geotools at gmail.com  Thu Jun 28 11:54:43 2007
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Error2 CPLRealloc(): Out of memory allocating 10 bytes
	(with MrSID)
Message-ID: <7221db410706280854i72027c91tec5c83305e587525@mail.gmail.com>

Hi list,
I encountered a strange error when using GDAL's MrSID driver from Java.
(My system is Windows XP with Visual Studio .Net 2003)

I built GDAL from SVN (I'm using the revision 11339) using NMAKE.

I written an ImageIO plugin for loading and reading MrSID data sources.
This is a typical code in my plugin:
-------------------------------------------------------------------------------------------
...
{
       Dataset ds = gdal.Open(String name, int accessType);
       ...
       // trivial operations (getting Driver and Driver's description).
       ...
       ds.delete();
}
...
// trivial operations
...
{
 ...
 Dataset ds = gdal.Open(String name, int accessType);
 ...
}
-------------------------------------------------------------------------------------------------------------------------------------------------------------
I noticed that on some MrSID data samples, when calling the Open method the
second time, this error will occur:
Error2 CPLRealloc(): Out of memory allocating 10 bytes.

It is thrown when MrSID parses metadata on mrsiddataset.cpp:
pszMetadata = (char *)CPLRealloc( pszMetadata, iLength );

To solve this problem, I built GDAL using a Visual Studio Solution (with
MrSID support properly configured) and the error magically disappears.

Any suggestion to build GDAL using NMAKE without this error?
(I already attempted a NMAKE clean ...)

Thank you very much.

-- 
Best Regards,
Daniele Romagnoli
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070628/a4ffa40e/attachment.html
From matt at guero.sr.unh.edu  Thu Jun 28 15:48:07 2007
From: matt at guero.sr.unh.edu (Matt Fearon)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] matching metadata for different file formats
Message-ID: <46841077.8090300@guero.sr.unh.edu>

Dear GDAL users:

I am converting grib files to netcdf as a 1st step using ncar command 
language. netcdf is an easier format for me in the long run for data 
storage. After this 1st step, I would like to reprojected my data from 
polar stereographic to geographic. The datum of the polar stereographic 
is unique in that data are mapped to a sphere with radii 6371200 km. 
Here is my trouble:

If I skip the 1st step and simply reproject the grib data to geographic 
using gdalwarp everything works perfectly. However, if try to reproject 
the data after the 1st step, I am unsuccessful. I am also performing 
some simple calculations on the data before going from grib to netcdf, 
but I am not changing the coordinate system, projection, datum 
etc...Some of the metadata is lost going from grib to netcdf, and 
therefore, I apply gdal_translate to the netcdf file adding the lost 
metadata back in and converting the format to geotiff. However, after 
these steps, I still notice some slight differences in the metadata 
between the original grib and the geotiff. I am struggling to make the 
metadata consistent for 3 parameters (GEOGCS, DATUM, and SPHEROID), 
please see metadata comparison at the base of this email from gdalinfo.

Any suggestions on how I can make these 3 parameters consistent between 
files would be much appreciated. Perhaps some combination of options 
using gdal_translate? Although, I have tried many combinations 
unsuccessfully, and therefore, the data do not map correctly. gdalinfo 
may be excluding some information as well. However, everything is 
consistent with the metadata except these 3 parameters. My original data 
are hourly NEXRAD precipitation, mosaicked over the CONUS at 4km, in 
grib format, polar stereographic projection assuming the Earth as a 
sphere with radii of 6371200 km, downloaded from NCEP. I am converting 
hourly to daily and storing in netcdf for various projects.

thanks in advance for the help,
Matt


Driver: GRIB/GRIdded Binary (.grb)
Files: gag4.19980201.01
Size is 1160, 880
Coordinate System is:
PROJCS["unnamed",
  GEOGCS["Coordinate System imported from GRIB file",
      DATUM["unknown",
          SPHEROID["Sphere",6371200,0]],

Driver: GTiff/GeoTIFF
Files: 19980201.tif
Size is 1160, 880
Coordinate System is:
PROJCS["unnamed",
  GEOGCS["unnamed ellipse",
      DATUM["unknown",
          SPHEROID["unnamed",6371200,0]],

From Sjur.A.Kolberg at sintef.no  Fri Jun 29 04:10:56 2007
From: Sjur.A.Kolberg at sintef.no (Kolberg Sjur A)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] matching metadata for different file 
	formats
In-Reply-To: <46841077.8090300@guero.sr.unh.edu>
References: <46841077.8090300@guero.sr.unh.edu>
Message-ID: <AC3559779B145744A3FA06C52D00BD0F02102EB6@SINTEFXCH01.sintef.no>


Hello, Matt,

It seems that even your GRIB data hasn't got the Polar Stereographic info.

I have just been working with the GRIB driver, and I know that there is a new version coming which may catch some more projection info. The new version is not included in the latest GDAL (1.4.2) or FWtools (1.3.2) releases, but maybe the sources are in place.

Also, there is a hatch with data projected on a spherical Earth. People sometimes forget that the ellipsiod and datum are not only properties of the projection (from a curved to plane surface), but of the latlong coordinate system itself. Meaning; The geographical position 10degE, 60degN is not at the same place as 10degE, 60degN in spherical-earth degrees. The difference at 60 deg N is around 18km in N-S direction. You need to figure out if this is the case for your data. See http://lists.maptools.org/pipermail/proj/2005-March/001520.html

Regards,

Sjur K :-)


Sjur Kolberg
SINTEF Energiforskning A/S
Sem S?lands vei 11
7465 Trondheim
tlf. 73 59 72 78
fax  73 59 72 50 

> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org 
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Matt Fearon
> Sent: 28 juni 2007 21:48
> To: gdal-dev@lists.maptools.org
> Subject: [Gdal-dev] matching metadata for different file formats
> 
> Dear GDAL users:
> 
> I am converting grib files to netcdf as a 1st step using ncar 
> command language. netcdf is an easier format for me in the 
> long run for data storage. After this 1st step, I would like 
> to reprojected my data from polar stereographic to 
> geographic. The datum of the polar stereographic is unique in 
> that data are mapped to a sphere with radii 6371200 km. 
> Here is my trouble:
> 
> If I skip the 1st step and simply reproject the grib data to 
> geographic using gdalwarp everything works perfectly. 
> However, if try to reproject the data after the 1st step, I 
> am unsuccessful. I am also performing some simple 
> calculations on the data before going from grib to netcdf, 
> but I am not changing the coordinate system, projection, 
> datum etc...Some of the metadata is lost going from grib to 
> netcdf, and therefore, I apply gdal_translate to the netcdf 
> file adding the lost metadata back in and converting the 
> format to geotiff. However, after these steps, I still notice 
> some slight differences in the metadata between the original 
> grib and the geotiff. I am struggling to make the metadata 
> consistent for 3 parameters (GEOGCS, DATUM, and SPHEROID), 
> please see metadata comparison at the base of this email from 
> gdalinfo.
> 
> Any suggestions on how I can make these 3 parameters 
> consistent between files would be much appreciated. Perhaps 
> some combination of options using gdal_translate? Although, I 
> have tried many combinations unsuccessfully, and therefore, 
> the data do not map correctly. gdalinfo may be excluding some 
> information as well. However, everything is consistent with 
> the metadata except these 3 parameters. My original data are 
> hourly NEXRAD precipitation, mosaicked over the CONUS at 4km, 
> in grib format, polar stereographic projection assuming the 
> Earth as a sphere with radii of 6371200 km, downloaded from 
> NCEP. I am converting hourly to daily and storing in netcdf 
> for various projects.
> 
> thanks in advance for the help,
> Matt
> 
> 
> Driver: GRIB/GRIdded Binary (.grb)
> Files: gag4.19980201.01
> Size is 1160, 880
> Coordinate System is:
> PROJCS["unnamed",
>   GEOGCS["Coordinate System imported from GRIB file",
>       DATUM["unknown",
>           SPHEROID["Sphere",6371200,0]],
> 
> Driver: GTiff/GeoTIFF
> Files: 19980201.tif
> Size is 1160, 880
> Coordinate System is:
> PROJCS["unnamed",
>   GEOGCS["unnamed ellipse",
>       DATUM["unknown",
>           SPHEROID["unnamed",6371200,0]], 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


From ivan.lucena at pmldnet.com  Fri Jun 29 09:09:03 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] gcore\gdal_rat.cpp typo and logical errors
Message-ID: <4685046F.1090202@pmldnet.com>

Hi there,

#1 - There is a missing "h" at:

"In the general case each row as a column indicating the minimum pixel"

[http://trac.osgeo.org/gdal/browser/trunk/gdal/gcore/gdal_rat.cpp#L54]

It looks like someone is imitating my writing style :-), but I guess 
that the fix would be:

"In the general case each row has a column indicating the minimum pixel"

#2 - And a missing variable assignment to the returning value of a 
function call at:

1239 	        if( iMaxCol == -1 )
1240 	            GetColOfUsage( GFU_MinMax );
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^

[http://trac.osgeo.org/gdal/browser/trunk/gdal/gcore/gdal_rat.cpp#L1240]

The fix is probably something like that:

1236 	        int  iMaxCol;
1237 	
1238 	        iMaxCol = GetColOfUsage( GFU_Max );
1239 	        if( iMaxCol == -1 )
1240 	            iMaxCol = GetColOfUsage( GFU_MinMax );
                     ^^^^^^^^^^
1241 	
1242 	        if( iMaxCol == -1 || nRowCount == 0 )
1243 	            return NULL;

I would be happy to commit it if that is OK.

Best regards,

Ivan

From matt at guero.sr.unh.edu  Fri Jun 29 09:23:22 2007
From: matt at guero.sr.unh.edu (Matt Fearon)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] matching metadata for different file formats
In-Reply-To: <AC3559779B145744A3FA06C52D00BD0F02102EB6@SINTEFXCH01.sintef.no>
References: <46841077.8090300@guero.sr.unh.edu>
	<AC3559779B145744A3FA06C52D00BD0F02102EB6@SINTEFXCH01.sintef.no>
Message-ID: <468507CA.2040108@guero.sr.unh.edu>

Hi Sjur K,

Thank you for your reply. You make some very interesting comments. 
However, the grib file appears to have enough metadata (including info 
on the polar stere proj) so that GDAL reprojects the data to geographic 
nicely. See all the gdalinfo from the grib file below. It reprojects to 
geographic using the following command;

gdalwarp -t_srs '+proj=latlong +datum=WGS84' gag4.19980201.01 out_geo.tif

Given the above, why doesn't my newly created netcdf file reproject correctly using the same command. I believe because the netcdf file lacks the appropriate metadata. The file format, the metadata, and the data values are the only differences between the 2 files. The coordinate system, datum, projection, bounding corners etc... are all the same - see gdalinfo on netcdf below for both before and after using gdal_translate to add metadata. The grib file must have important metadata that I am loosing when I go to netcdf. I see this in comparing the gdalinfo between the files below. How can I make the metadata consistent between the 2 files using GDAL commands? 

thank you,
Matt



---- gdalinfo on grib file:

Driver: GRIB/GRIdded Binary (.grb)
Files: gag4.19980201.01
Size is 1160, 880
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["Coordinate System imported from GRIB file",
        DATUM["unknown",
            SPHEROID["Sphere",6371200,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Polar_Stereographic"],
    PARAMETER["latitude_of_origin",60],
    PARAMETER["central_meridian",255],
    PARAMETER["scale_factor",90],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0]]
Origin = (-2095445.938568701269105,-3433257.108374913223088)
Pixel Size = (4763.000000000000000,-4763.000000000000000)
Corner Coordinates:
Upper Left  (-2095445.939,-3433257.108) (136d23'50.23"W, 52d37'0.31"N)
Lower Left  (-2095445.939,-7624697.108) (120d22'0.66"W, 22d44'35.90"N)
Upper Right ( 3429634.061,-3433257.108) ( 60d 1'48.89"W, 45d35'28.48"N)
Lower Right ( 3429634.061,-7624697.108) ( 80d46'53.41"W, 19d46'5.69"N)
Center      (  667094.061,-5528977.108) ( 98d 7'13.01"W, 39d48'1.57"N)
Band 1 Block=1160x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC (Ground or water surface)



---- gdalinfo on netcdf before gdal_translate. Note metadata on the coordinate system, datum, projection, and corners have been lost when compared to grib.

Driver: netCDF/Network Common Data Format
Files: 19980201.nc
Size is 1160, 880
Coordinate System is `'
Metadata:
  precip#_FillValue=-9.990000e+02
  precip#description=These daily data are a sum of the original hourly data; the sum used a GMT to UTC time adjustment (15 deg change longitude = 1 hour change in GMT); the adjustment was calculated per individual gridcell determining the linear distance between centroid longitude and the prime meridian
  precip#date=19980201
  precip#longname=Daily Precipitation
  precip#shortname=precip
  precip#center=US National Weather Service - NCEP (WMC)
  precip#long_name=Total precipitation
  precip#units=kg/m^2
  precip#coordinates=gridlat_240 gridlon_240
  precip#level_indicator=1
  precip#gds_grid_type=5
  precip#parameter_table_version=2
  precip#parameter_number=61
  precip#model=WSR-88D Stage II Precipitation Analysis
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  880.0)
Upper Right ( 1160.0,    0.0)
Lower Right ( 1160.0,  880.0)
Center      (  580.0,  440.0)
Band 1 Block=1160x1 Type=Float32, ColorInterp=Undefined
  NoData Value=-999
  Metadata:
    NETCDF_VARNAME=precip


---- gdalinfo on netcdf after the following gdal_translate command. Note how GEOGCS says "unnamed ellipse" and Spheroid says "unnamed". These are different when compared to the grib. Grib has these as "sphere". How can I change these to "sphere" and keep the radii = 6371200 km ?

gdal_translate -sds -a_srs '+proj=stere +lat_ts=60 +lat_0=90 +lon_0=255 +k_0=90 +x_0=0 +y_0=0 +a=6371200 +b=6371200' -a_ullr -2095445.939 -3433257.108 3429634.061 -7624697.108 19980201.nc 19980201.tif


Files: 19980201.tif
Size is 1160, 880
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["unnamed ellipse",
        DATUM["unknown",
            SPHEROID["unnamed",6371200,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Polar_Stereographic"],
    PARAMETER["latitude_of_origin",60],
    PARAMETER["central_meridian",255],
    PARAMETER["scale_factor",90],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-2095445.939000000013039,-3433257.108000000007451)
Pixel Size = (4763.000000000000000,-4763.000000000000000)
Metadata:
  AREA_OR_POINT=Area
  precip#_FillValue=-9.990000e+02
  precip#description=These daily data are a sum of the original hourly data; the sum used a GMT to UTC time adjustment (15 deg change longitude = 1 hour change in GMT); the adjustment was calculated per individual gridcell determining the linear distance between centroid longitude and the prime meridian
  precip#date=19980201
  precip#longname=Daily Precipitation
  precip#shortname=precip
  precip#center=US National Weather Service - NCEP (WMC)
  precip#long_name=Total precipitation
  precip#units=kg/m^2
  precip#coordinates=gridlat_240 gridlon_240
  precip#level_indicator=1
  precip#gds_grid_type=5
  precip#parameter_table_version=2
  precip#parameter_number=61
  precip#model=WSR-88D Stage II Precipitation Analysis
Corner Coordinates:
Upper Left  (-2095445.939,-3433257.108) (136d23'50.23"W, 52d37'0.31"N)
Lower Left  (-2095445.939,-7624697.108) (120d22'0.66"W, 22d44'35.90"N)
Upper Right ( 3429634.061,-3433257.108) ( 60d 1'48.89"W, 45d35'28.48"N)
Lower Right ( 3429634.061,-7624697.108) ( 80d46'53.41"W, 19d46'5.69"N)
Center      (  667094.061,-5528977.108) ( 98d 7'13.01"W, 39d48'1.57"N)
Band 1 Block=1160x1 Type=Float32, ColorInterp=Gray
  NoData Value=-999
  Metadata:
    NETCDF_VARNAME=precip










Kolberg Sjur A wrote:
> Hello, Matt,
>
> It seems that even your GRIB data hasn't got the Polar Stereographic info.
>
> I have just been working with the GRIB driver, and I know that there is a new version coming which may catch some more projection info. The new version is not included in the latest GDAL (1.4.2) or FWtools (1.3.2) releases, but maybe the sources are in place.
>
> Also, there is a hatch with data projected on a spherical Earth. People sometimes forget that the ellipsiod and datum are not only properties of the projection (from a curved to plane surface), but of the latlong coordinate system itself. Meaning; The geographical position 10degE, 60degN is not at the same place as 10degE, 60degN in spherical-earth degrees. The difference at 60 deg N is around 18km in N-S direction. You need to figure out if this is the case for your data. See http://lists.maptools.org/pipermail/proj/2005-March/001520.html
>
> Regards,
>
> Sjur K :-)
>
>
> Sjur Kolberg
> SINTEF Energiforskning A/S
> Sem S?lands vei 11
> 7465 Trondheim
> tlf. 73 59 72 78
> fax  73 59 72 50 
>
>   
>> -----Original Message-----
>> From: gdal-dev-bounces@lists.maptools.org 
>> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Matt Fearon
>> Sent: 28 juni 2007 21:48
>> To: gdal-dev@lists.maptools.org
>> Subject: [Gdal-dev] matching metadata for different file formats
>>
>> Dear GDAL users:
>>
>> I am converting grib files to netcdf as a 1st step using ncar 
>> command language. netcdf is an easier format for me in the 
>> long run for data storage. After this 1st step, I would like 
>> to reprojected my data from polar stereographic to 
>> geographic. The datum of the polar stereographic is unique in 
>> that data are mapped to a sphere with radii 6371200 km. 
>> Here is my trouble:
>>
>> If I skip the 1st step and simply reproject the grib data to 
>> geographic using gdalwarp everything works perfectly. 
>> However, if try to reproject the data after the 1st step, I 
>> am unsuccessful. I am also performing some simple 
>> calculations on the data before going from grib to netcdf, 
>> but I am not changing the coordinate system, projection, 
>> datum etc...Some of the metadata is lost going from grib to 
>> netcdf, and therefore, I apply gdal_translate to the netcdf 
>> file adding the lost metadata back in and converting the 
>> format to geotiff. However, after these steps, I still notice 
>> some slight differences in the metadata between the original 
>> grib and the geotiff. I am struggling to make the metadata 
>> consistent for 3 parameters (GEOGCS, DATUM, and SPHEROID), 
>> please see metadata comparison at the base of this email from 
>> gdalinfo.
>>
>> Any suggestions on how I can make these 3 parameters 
>> consistent between files would be much appreciated. Perhaps 
>> some combination of options using gdal_translate? Although, I 
>> have tried many combinations unsuccessfully, and therefore, 
>> the data do not map correctly. gdalinfo may be excluding some 
>> information as well. However, everything is consistent with 
>> the metadata except these 3 parameters. My original data are 
>> hourly NEXRAD precipitation, mosaicked over the CONUS at 4km, 
>> in grib format, polar stereographic projection assuming the 
>> Earth as a sphere with radii of 6371200 km, downloaded from 
>> NCEP. I am converting hourly to daily and storing in netcdf 
>> for various projects.
>>
>> thanks in advance for the help,
>> Matt
>>
>>
>> Driver: GRIB/GRIdded Binary (.grb)
>> Files: gag4.19980201.01
>> Size is 1160, 880
>> Coordinate System is:
>> PROJCS["unnamed",
>>   GEOGCS["Coordinate System imported from GRIB file",
>>       DATUM["unknown",
>>           SPHEROID["Sphere",6371200,0]],
>>
>> Driver: GTiff/GeoTIFF
>> Files: 19980201.tif
>> Size is 1160, 880
>> Coordinate System is:
>> PROJCS["unnamed",
>>   GEOGCS["unnamed ellipse",
>>       DATUM["unknown",
>>           SPHEROID["unnamed",6371200,0]], 
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
>>     
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>   


From warmerdam at pobox.com  Fri Jun 29 10:12:05 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] gcore\gdal_rat.cpp typo and logical errors
In-Reply-To: <4685046F.1090202@pmldnet.com>
References: <4685046F.1090202@pmldnet.com>
Message-ID: <46851335.203@pobox.com>

Lucena, Ivan wrote:
> Hi there,
> 
> #1 - There is a missing "h" at:
> 
> "In the general case each row as a column indicating the minimum pixel"
> 
> [http://trac.osgeo.org/gdal/browser/trunk/gdal/gcore/gdal_rat.cpp#L54]
> 
> It looks like someone is imitating my writing style :-), but I guess 
> that the fix would be:
> 
> "In the general case each row has a column indicating the minimum pixel"
> 
> #2 - And a missing variable assignment to the returning value of a 
> function call at:
> 
> 1239             if( iMaxCol == -1 )
> 1240                 GetColOfUsage( GFU_MinMax );
>                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> 
> [http://trac.osgeo.org/gdal/browser/trunk/gdal/gcore/gdal_rat.cpp#L1240]
> 
> The fix is probably something like that:
> 
> 1236             int  iMaxCol;
> 1237    
> 1238             iMaxCol = GetColOfUsage( GFU_Max );
> 1239             if( iMaxCol == -1 )
> 1240                 iMaxCol = GetColOfUsage( GFU_MinMax );
>                     ^^^^^^^^^^
> 1241    
> 1242             if( iMaxCol == -1 || nRowCount == 0 )
> 1243                 return NULL;
> 
> I would be happy to commit it if that is OK.

Ivan,

Yes, you are correct on both points.  I committed the changes
before reading your last line so no need to do so.

Thanks!
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From rlcave3rd at yahoo.com  Fri Jun 29 11:30:49 2007
From: rlcave3rd at yahoo.com (Bob Cave)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] MITAB Version in GDAL 1.4.2
Message-ID: <116250.40134.qm@web55508.mail.re4.yahoo.com>


It was my understanding that GDAL 1.4.2 was going to contain the latest MITAB library (version 1.6.1), but the RC1 contains MITAB 1.5.1.  Will this be updated in the near future?

Thanks,

Bob




 
____________________________________________________________________________________
8:00? 8:25? 8:40? Find a flick in no time 
with the Yahoo! Search movie showtime shortcut.
http://tools.search.yahoo.com/shortcuts/#news
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070629/902f16d8/attachment.html
From dmorissette at mapgears.com  Fri Jun 29 12:13:31 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] MITAB Version in GDAL 1.4.2
In-Reply-To: <116250.40134.qm@web55508.mail.re4.yahoo.com>
References: <116250.40134.qm@web55508.mail.re4.yahoo.com>
Message-ID: <46852FAB.8060507@mapgears.com>

Bob Cave wrote:
> 
> It was my understanding that GDAL 1.4.2 was going to contain the latest 
> MITAB library (version 1.6.1), but the RC1 contains MITAB 1.5.1.  Will 
> this be updated in the near future?
> 

No, I don't think it would be a good idea to upgrade GDAL 1.4.x to MITAB 
1.6.x because MITAB 1.6.x has some issues that still need to be fixed. I 
think sticking to 1.5.1 is safer for GDAL 1.4.x.

I planned some time to work on MITAB later in July-Augustand the next 
MITAB release should make it in GDAL 1.5 (but not 1.4.x).

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From warmerdam at pobox.com  Fri Jun 29 12:17:20 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] MITAB Version in GDAL 1.4.2
In-Reply-To: <116250.40134.qm@web55508.mail.re4.yahoo.com>
References: <116250.40134.qm@web55508.mail.re4.yahoo.com>
Message-ID: <46853090.4030408@pobox.com>

Bob Cave wrote:
> 
> It was my understanding that GDAL 1.4.2 was going to contain the latest 
> MITAB library (version 1.6.1), but the RC1 contains MITAB 1.5.1.  Will 
> this be updated in the near future?

Bob,

I see that Daniel has been backporting individual fixes, but I don't
believe he planned a bulk upgrade in the 1.4 branch.

   http://trac.osgeo.org/gdal/log/branches/1.4/gdal/ogr/ogrsf_frmts/mitab

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri Jun 29 14:23:42 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Motion to Release GDAL 1.4.2
In-Reply-To: <4682B459.5090704@pobox.com>
References: <4682B459.5090704@pobox.com>
Message-ID: <46854E2E.9030302@pobox.com>

Frank Warmerdam wrote:
> Motion: To release this as 1.4.2 Friday June 29th.

Folks,

The motion passes with support from Tamas, Andrey, Daniel, Howard and
myself.  I'll send out a release announcement to gdal-dev and
gdal-announce shortly.  The files are already up.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri Jun 29 14:34:32 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] GDAL/OGR 1.4.2 Released
Message-ID: <468550B8.7070500@pobox.com>

Folks,

The GDAL/OGR team is pleased to announce the release of GDAL/OGR 1.4.2.
This is intended to be a bug fix release extending the GDAL 1.4.x
stable branch and does not include the many new features in the development
trunk (which will appear as GDAL/OGR 1.5.0).

With GDAL/OGR 1.4.2, 63 Trac tickets were addressed:

   http://trac.osgeo.org/gdal/query?status=closed&milestone=1.4.2

The NEWS for the release is available at:

   http://trac.osgeo.org/gdal/wiki/Release/1.4.2-News

Source is available at:

   http://download.osgeo.org/gdal/gdal142.zip
   http://download.osgeo.org/gdal/gdal-1.4.2.tar.gz

In keeping with the recent project efforts towards providing standard
win32 binaries, we are also providing win32 binaries at:

   http://download.osgeo.org/gdal/win32/gdalwin32exe142.zip

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt at guero.sr.unh.edu  Fri Jun 29 14:30:18 2007
From: matt at guero.sr.unh.edu (Matt Fearon)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] matching metadata for different file formats
In-Reply-To: <468507CA.2040108@guero.sr.unh.edu>
References: <46841077.8090300@guero.sr.unh.edu>
	<AC3559779B145744A3FA06C52D00BD0F02102EB6@SINTEFXCH01.sintef.no>
	<468507CA.2040108@guero.sr.unh.edu>
Message-ID: <46854FBA.1060303@guero.sr.unh.edu>

Hi All,

Wondering if anyone could give me some advice on the following. Sjur was 
helping me, but has gone on holiday.

I have a grib file that I have converted to a netcdf. My goal is to 
reproject the data in the netcdf file from polar stereographic to 
geographic. The original grib file reprojects nicely using the following 
GDAL command;

gdalwarp -t_srs '+proj=latlong +datum=WGS84' gag4.19980201.01 out_geo.tif

However, the netcdf file does not reproject correctly. I believe it is 
due to metadata being lost. The only difference between the 2 files are 
the format, metadata, and the data values - after some calculations on 
the data. The coordinate system, projection, and datum etc.. are the 
same. How can I make the metadata consistent between the 2 files using 
GDAL commands and reproject accurately? I have tried many things 
unsuccessfully. Please see below the following:
1. gdalinfo on grib file
2. gdalinfo on netcdf file before gdal_translate
3. gdalinfo on geotiff after gdal_translate (an attempt to make metadata 
consistent)

Help would be greatly appreciated.
thanks,
Matt


---- gdalinfo on grib file:

Driver: GRIB/GRIdded Binary (.grb)
Files: gag4.19980201.01
Size is 1160, 880
Coordinate System is:
PROJCS["unnamed",
   GEOGCS["Coordinate System imported from GRIB file",
       DATUM["unknown",
           SPHEROID["Sphere",6371200,0]],
       PRIMEM["Greenwich",0],
       UNIT["degree",0.0174532925199433]],
   PROJECTION["Polar_Stereographic"],
   PARAMETER["latitude_of_origin",60],
   PARAMETER["central_meridian",255],
   PARAMETER["scale_factor",90],
   PARAMETER["false_easting",0],
   PARAMETER["false_northing",0]]
Origin = (-2095445.938568701269105,-3433257.108374913223088)
Pixel Size = (4763.000000000000000,-4763.000000000000000)
Corner Coordinates:
Upper Left  (-2095445.939,-3433257.108) (136d23'50.23"W, 52d37'0.31"N)
Lower Left  (-2095445.939,-7624697.108) (120d22'0.66"W, 22d44'35.90"N)
Upper Right ( 3429634.061,-3433257.108) ( 60d 1'48.89"W, 45d35'28.48"N)
Lower Right ( 3429634.061,-7624697.108) ( 80d46'53.41"W, 19d46'5.69"N)
Center      (  667094.061,-5528977.108) ( 98d 7'13.01"W, 39d48'1.57"N)
Band 1 Block=1160x1 Type=Float64, ColorInterp=Undefined
 Description = 0[-] SFC (Ground or water surface)



---- gdalinfo on netcdf before gdal_translate. Note metadata on the 
coordinate system, datum, projection, and corners have been lost when 
compared to grib.

Driver: netCDF/Network Common Data Format
Files: 19980201.nc
Size is 1160, 880
Coordinate System is `'
Metadata:
 precip#_FillValue=-9.990000e+02
 precip#description=These daily data are a sum of the original hourly 
data; the sum used a GMT to UTC time adjustment (15 deg change longitude 
= 1 hour change in GMT); the adjustment was calculated per individual 
gridcell determining the linear distance between centroid longitude and 
the prime meridian
 precip#date=19980201
 precip#longname=Daily Precipitation
 precip#shortname=precip
 precip#center=US National Weather Service - NCEP (WMC)
 precip#long_name=Total precipitation
 precip#units=kg/m2
 precip#coordinates=gridlat_240 gridlon_240
 precip#level_indicator=1
 precip#gds_grid_type=5
 precip#parameter_table_version=2
 precip#parameter_number=61
 precip#model=WSR-88D Stage II Precipitation Analysis
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  880.0)
Upper Right ( 1160.0,    0.0)
Lower Right ( 1160.0,  880.0)
Center      (  580.0,  440.0)
Band 1 Block=1160x1 Type=Float32, ColorInterp=Undefined
 NoData Value=-999
 Metadata:
   NETCDF_VARNAME=precip


---- gdalinfo on geotiff after the following gdal_translate command. 
Note how GEOGCS says "unnamed ellipse" and Spheroid says "unnamed". 
These are different when compared to the grib. Grib has these as 
"sphere". How can I change these to "sphere" and keep the radii = 
6371200 km ?

gdal_translate -sds -a_srs '+proj=stere +lat_ts=60 +lat_0=90 +lon_0=255 
+k_0=90 +x_0=0 +y_0=0 +a=6371200 +b=6371200' -a_ullr -2095445.939 
-3433257.108 3429634.061 -7624697.108 19980201.nc 19980201.tif


Files: 19980201.tif
Size is 1160, 880
Coordinate System is:
PROJCS["unnamed",
   GEOGCS["unnamed ellipse",
       DATUM["unknown",
           SPHEROID["unnamed",6371200,0]],
       PRIMEM["Greenwich",0],
       UNIT["degree",0.0174532925199433]],
   PROJECTION["Polar_Stereographic"],
   PARAMETER["latitude_of_origin",60],
   PARAMETER["central_meridian",255],
   PARAMETER["scale_factor",90],
   PARAMETER["false_easting",0],
   PARAMETER["false_northing",0],
   UNIT["metre",1,
       AUTHORITY["EPSG","9001"]]]
Origin = (-2095445.939000000013039,-3433257.108000000007451)
Pixel Size = (4763.000000000000000,-4763.000000000000000)
Metadata:
 AREA_OR_POINT=Area
 precip#_FillValue=-9.990000e+02
 precip#description=These daily data are a sum of the original hourly 
data; the sum used a GMT to UTC time adjustment (15 deg change longitude 
= 1 hour change in GMT); the adjustment was calculated per individual 
gridcell determining the linear distance between centroid longitude and 
the prime meridian
 precip#date=19980201
 precip#longname=Daily Precipitation
 precip#shortname=precip
 precip#center=US National Weather Service - NCEP (WMC)
 precip#long_name=Total precipitation
 precip#units=kg/m2
 precip#coordinates=gridlat_240 gridlon_240
 precip#level_indicator=1
 precip#gds_grid_type=5
 precip#parameter_table_version=2
 precip#parameter_number=61
 precip#model=WSR-88D Stage II Precipitation Analysis
Corner Coordinates:
Upper Left  (-2095445.939,-3433257.108) (136d23'50.23"W, 52d37'0.31"N)
Lower Left  (-2095445.939,-7624697.108) (120d22'0.66"W, 22d44'35.90"N)
Upper Right ( 3429634.061,-3433257.108) ( 60d 1'48.89"W, 45d35'28.48"N)
Lower Right ( 3429634.061,-7624697.108) ( 80d46'53.41"W, 19d46'5.69"N)
Center      (  667094.061,-5528977.108) ( 98d 7'13.01"W, 39d48'1.57"N)
Band 1 Block=1160x1 Type=Float32, ColorInterp=Gray
 NoData Value=-999
 Metadata:
   NETCDF_VARNAME=precip


From andrew.bell.ia at gmail.com  Fri Jun 29 15:59:02 2007
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] OGROpen and delete
Message-ID: <e80abd30706291259g5313c03bhc945915c6133662c@mail.gmail.com>

Hi,

The documentation for OGROpen says that the data source should be
deleted with "delete".  But the type OGRDataSourceH is really a void *
and you can't delete a void *.  What type do I have to cast the result
of OGROpen to in order to delete the source?

Thanks,

-- 
Andrew Bell
andrew.bell.ia@gmail.com

From hobu.inc at gmail.com  Fri Jun 29 16:34:18 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] OGROpen and delete
In-Reply-To: <e80abd30706291259g5313c03bhc945915c6133662c@mail.gmail.com>
References: <e80abd30706291259g5313c03bhc945915c6133662c@mail.gmail.com>
Message-ID: <D41F2960-3871-4448-B7DF-6721865BB8C2@gmail.com>

Andrew,

The function to use is OGRReleaseDataSource (at least this is what  
the SWIG bindings do).  I'll update the doc...

Howard


On Jun 29, 2007, at 2:59 PM, Andrew Bell wrote:

> Hi,
>
> The documentation for OGROpen says that the data source should be
> deleted with "delete".  But the type OGRDataSourceH is really a void *
> and you can't delete a void *.  What type do I have to cast the result
> of OGROpen to in order to delete the source?
>
> Thanks,
>
> -- 
> Andrew Bell
> andrew.bell.ia@gmail.com
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From andrew.bell.ia at gmail.com  Fri Jun 29 17:58:21 2007
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed Nov 21 11:50:55 2007
Subject: [Gdal-dev] Documentation Suggestions
Message-ID: <e80abd30706291458i532975eau1c5a5416eb3216e4@mail.gmail.com>

Hi,

Here are a few suggestions for the OGR documentation:

====================

OGR_G_ExportToWkt()

ppszSrcText 	a text buffer is allocated by the program, and assigned
to the passed pointer.

* "allocated by the program" be better said as "allocated by OGR".
Some note should also say that the buffer should be deallocated with
free() or VSIFree().  (Is there a better way?)

==================

OGR_G_DestroyGeometry

*Some note should be made that a geometry in a feature will be
destroyed when the feature is destroyed and does not need to be
explicitly deallocated with this call.

=================

OGR_L_GetNextFeature

*The documentation says that it is the responsibility of the caller to
delete the object, but it doesn't say how.  Perhaps a reference to
OGR_F_Destroy is in order.  There are other calls that have this same
issue.

=================

OGR_F_Destroy

*The text here is confusing.  You can't free memory _onto_ anywhere,
you can only free memory that has been allocated where it was
allocated.  I'm not sure what this is trying to get across.

Cheers,

-- 
Andrew Bell
andrew.bell.ia@gmail.com

